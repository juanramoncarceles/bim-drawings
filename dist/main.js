!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=19)}([function(e,t,n){"use strict";n.r(t),n.d(t,"__extends",(function(){return i})),n.d(t,"__assign",(function(){return o})),n.d(t,"__rest",(function(){return a})),n.d(t,"__decorate",(function(){return s})),n.d(t,"__param",(function(){return u})),n.d(t,"__metadata",(function(){return c})),n.d(t,"__awaiter",(function(){return l})),n.d(t,"__generator",(function(){return h})),n.d(t,"__exportStar",(function(){return d})),n.d(t,"__values",(function(){return f})),n.d(t,"__read",(function(){return p})),n.d(t,"__spread",(function(){return m})),n.d(t,"__spreadArrays",(function(){return g})),n.d(t,"__await",(function(){return y})),n.d(t,"__asyncGenerator",(function(){return v})),n.d(t,"__asyncDelegator",(function(){return b})),n.d(t,"__asyncValues",(function(){return w})),n.d(t,"__makeTemplateObject",(function(){return T})),n.d(t,"__importStar",(function(){return S})),n.d(t,"__importDefault",(function(){return I}));
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function i(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function a(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function s(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}function u(e,t){return function(n,r){t(n,r,e)}}function c(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function l(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n((function(t){t(e.value)})).then(a,s)}u((r=r.apply(e,t||[])).next())}))}function h(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function d(e,t){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}function f(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}function p(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function m(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(p(arguments[t]));return e}function g(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}function y(e){return this instanceof y?(this.v=e,this):new y(e)}function v(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),o=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(e){i[e]&&(r[e]=function(t){return new Promise((function(n,r){o.push([e,t,n,r])>1||s(e,t)}))})}function s(e,t){try{(n=i[e](t)).value instanceof y?Promise.resolve(n.value.v).then(u,c):l(o[0][2],n)}catch(e){l(o[0][3],e)}var n}function u(e){s("next",e)}function c(e){s("throw",e)}function l(e,t){e(t),o.shift(),o.length&&s(o[0][0],o[0][1])}}function b(e){var t,n;return t={},r("next"),r("throw",(function(e){throw e})),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,i){t[r]=e[r]?function(t){return(n=!n)?{value:y(e[r](t)),done:"return"===r}:i?i(t):t}:i}}function w(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=f(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,i){(function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)})(r,i,(t=e[n](t)).done,t.value)}))}}}function T(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function S(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function I(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},o=function(e,t){if(!e)throw a(t)},a=function(e){return new Error("Firebase Database ("+i.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)},s=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},u={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var o=e[i],a=i+1<e.length,s=a?e[i+1]:0,u=i+2<e.length,c=u?e[i+2]:0,l=o>>2,h=(3&o)<<4|s>>4,d=(15&s)<<2|c>>6,f=63&c;u||(f=64,a||(d=64)),r.push(n[l],n[h],n[d],n[f])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(s(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var a=((7&i)<<18|(63&(o=e[n++]))<<12|(63&(s=e[n++]))<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(a>>10)),t[r++]=String.fromCharCode(56320+(1023&a))}else{o=e[n++];var s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var o=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0,s=++i<e.length?n[e.charAt(i)]:64,u=++i<e.length?n[e.charAt(i)]:64;if(++i,null==o||null==a||null==s||null==u)throw Error();var c=o<<2|a>>4;if(r.push(c),64!==s){var l=a<<4&240|s>>2;if(r.push(l),64!==u){var h=s<<6&192|u;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},c=function(e){try{return u.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&(e[n]=l(e[n],t[n]));return e}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var h=function(){function e(){var e=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))}return e.prototype.wrapCallback=function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"==typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}},e}();
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var f="FirebaseError",p=function(e){function t(n,r){var i=e.call(this,r)||this;return i.code=n,i.name=f,Object.setPrototypeOf(i,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(i,m.prototype.create),i}return r.__extends(t,e),t}(Error),m=function(){function e(e,t,n){this.service=e,this.serviceName=t,this.errors=n}return e.prototype.create=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=t[0]||{},i=this.service+"/"+e,o=this.errors[e],a=o?g(o,r):"Error",s=this.serviceName+": "+a+" ("+i+").",u=new p(i,s),c=0,l=Object.keys(r);c<l.length;c++){var h=l[c];"_"!==h.slice(-1)&&(h in u&&console.warn('Overwriting FirebaseError base field "'+h+'" can cause unexpected behavior.'),u[h]=r[h])}return u},e}();function g(e,t){return e.replace(y,(function(e,n){var r=t[n];return null!=r?r.toString():"<"+n+"?>"}))}var y=/\{\$([^}]+)}/g;
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v(e){return JSON.parse(e)}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var b=function(e){var t={},n={},r={},i="";try{var o=e.split(".");t=v(c(o[0])||""),n=v(c(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(e){}return{header:t,claims:n,data:r,signature:i}};
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var w=function(){function e(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}return e.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},e.prototype.compress_=function(e,t){t||(t=0);var n=this.W_;if("string"==typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(r=0;r<16;r++)n[r]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,a,s=this.chain_[0],u=this.chain_[1],c=this.chain_[2],l=this.chain_[3],h=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(o=l^u&(c^l),a=1518500249):(o=u^c^l,a=1859775393):r<60?(o=u&c|l&(u|c),a=2400959708):(o=u^c^l,a=3395469782);i=(s<<5|s>>>27)+o+h+a+n[r]&4294967295;h=l,l=c,c=4294967295&(u<<30|u>>>2),u=s,s=i}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295},e.prototype.update=function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<t;){if(0===o)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"==typeof e){for(;r<t;)if(i[o]=e.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<t;)if(i[o]=e[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=t}},e.prototype.digest=function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)e[r]=this.chain_[n]>>i&255,++r;return e},e}();var T=function(){function e(e,t){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((function(){e(n)})).catch((function(e){n.error(e)}))}return e.prototype.next=function(e){this.forEachObserver((function(t){t.next(e)}))},e.prototype.error=function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)},e.prototype.complete=function(){this.forEachObserver((function(e){e.complete()})),this.close()},e.prototype.subscribe=function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!=typeof e||null===e)return!1;for(var n=0,r=t;n<r.length;n++){var i=r[n];if(i in e&&"function"==typeof e[i])return!0}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=S),void 0===r.error&&(r.error=S),void 0===r.complete&&(r.complete=S);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),o},e.prototype.unsubscribeOne=function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},e.prototype.forEachObserver=function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)},e.prototype.sendOne=function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}}))},e.prototype.close=function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))},e}();function S(){}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I(e,t,n){var r="";switch(t){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}var i=e+" failed: ";return i+=r+" argument "}t.CONSTANTS=i,t.Deferred=h,t.ErrorFactory=m,t.FirebaseError=p,t.Sha1=w,t.assert=o,t.assertionError=a,t.async=function(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];Promise.resolve(!0).then((function(){e.apply(void 0,n)})).catch((function(e){t&&t(e)}))}},t.base64=u,t.base64Decode=c,t.base64Encode=function(e){var t=s(e);return u.encodeByteArray(t,!0)},t.contains=
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.createSubscribe=function(e,t){var n=new T(e,t);return n.subscribe.bind(n)},t.decode=b,t.deepCopy=
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(e){return l(void 0,e)},t.deepExtend=l,t.errorPrefix=I,t.getUA=d,t.isAdmin=function(e){var t=b(e).claims;return"object"==typeof t&&!0===t.admin},t.isBrowser=function(){return"object"==typeof self&&self.self===self},t.isEmpty=function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0},t.isMobileCordova=function(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(d())},t.isNode=function(){try{return"[object process]"===Object.prototype.toString.call(e.process)}catch(e){return!1}},t.isNodeSdk=function(){return!0===i.NODE_CLIENT||!0===i.NODE_ADMIN},t.isReactNative=function(){return"object"==typeof navigator&&"ReactNative"===navigator.product},t.isValidFormat=function(e){var t=b(e).claims;return!!t&&"object"==typeof t&&t.hasOwnProperty("iat")},t.isValidTimestamp=function(e){var t=b(e).claims,n=Math.floor((new Date).getTime()/1e3),r=0,i=0;return"object"==typeof t&&(t.hasOwnProperty("nbf")?r=t.nbf:t.hasOwnProperty("iat")&&(r=t.iat),i=t.hasOwnProperty("exp")?t.exp:r+86400),!!n&&!!r&&!!i&&n>=r&&n<=i},t.issuedAtTime=function(e){var t=b(e).claims;return"object"==typeof t&&t.hasOwnProperty("iat")?t.iat:null},t.jsonEval=v,t.map=function(e,t,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,t.querystring=function(e){for(var t=[],n=function(e,n){Array.isArray(n)?n.forEach((function(n){t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))})):t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))},r=0,i=Object.entries(e);r<i.length;r++){var o=i[r];n(o[0],o[1])}return t.length?"&"+t.join("&"):""},t.querystringDecode=function(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=e.split("=");t[n[0]]=n[1]}})),t},t.safeGet=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0},t.stringLength=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t},t.stringToByteArray=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(i>=55296&&i<=56319){var a=i-55296;r++,o(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(a<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},t.stringify=function(e){return JSON.stringify(e)},t.validateArgCount=function(e,t,n,r){var i;if(r<t?i="at least "+t:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")},t.validateCallback=function(e,t,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(I(e,t,r)+"must be a valid function.")},t.validateContextObject=function(e,t,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(I(e,t,r)+"must be a valid context object.")}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,t.validateNamespace=function(e,t,n,r){if((!r||n)&&"string"!=typeof n)throw new Error(I(e,t,r)+"must be a valid firebase namespace.")}}).call(this,n(5))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n(1),o=function(){function e(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return e.prototype.setInstantiationMode=function(e){return this.instantiationMode=e,this},e.prototype.setMultipleInstances=function(e){return this.multipleInstances=e,this},e.prototype.setServiceProps=function(e){return this.serviceProps=e,this},e}(),a="[DEFAULT]",s=function(){function e(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return e.prototype.get=function(e){void 0===e&&(e=a);var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new i.Deferred;this.instancesDeferred.set(t,n);try{var r=this.getOrInitializeService(t);r&&n.resolve(r)}catch(e){}}return this.instancesDeferred.get(t).promise},e.prototype.getImmediate=function(e){var t=r.__assign({identifier:a,optional:!1},e),n=t.identifier,i=t.optional,o=this.normalizeInstanceIdentifier(n);try{var s=this.getOrInitializeService(o);if(!s){if(i)return null;throw Error("Service "+this.name+" is not available")}return s}catch(e){if(i)return null;throw e}},e.prototype.getComponent=function(){return this.component},e.prototype.setComponent=function(e){var t,n;if(e.name!==this.name)throw Error("Mismatching Component "+e.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=e,function(e){return"EAGER"===e.instantiationMode}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e))try{this.getOrInitializeService(a)}catch(e){}try{for(var i=r.__values(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var s=r.__read(o.value,2),u=s[0],c=s[1],l=this.normalizeInstanceIdentifier(u);try{var h=this.getOrInitializeService(l);c.resolve(h)}catch(e){}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}},e.prototype.clearInstance=function(e){void 0===e&&(e=a),this.instancesDeferred.delete(e),this.instances.delete(e)},e.prototype.delete=function(){return r.__awaiter(this,void 0,void 0,(function(){var e;return r.__generator(this,(function(t){switch(t.label){case 0:return e=Array.from(this.instances.values()),[4,Promise.all(e.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()})))];case 1:return t.sent(),[2]}}))}))},e.prototype.isComponentSet=function(){return null!=this.component},e.prototype.getOrInitializeService=function(e){var t=this.instances.get(e);return!t&&this.component&&(t=this.component.instanceFactory(this.container,function(e){return e===a?void 0:e}(e)),this.instances.set(e,t)),t||null},e.prototype.normalizeInstanceIdentifier=function(e){return this.component?this.component.multipleInstances?e:a:e},e}();var u=function(){function e(e){this.name=e,this.providers=new Map}return e.prototype.addComponent=function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component "+e.name+" has already been registered with "+this.name);t.setComponent(e)},e.prototype.addOrOverwriteComponent=function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)},e.prototype.getProvider=function(e){if(this.providers.has(e))return this.providers.get(e);var t=new s(e,this);return this.providers.set(e,t),t},e.prototype.getProviders=function(){return Array.from(this.providers.values())},e}();t.Component=o,t.ComponentContainer=u,t.Provider=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i,o=n(0),a=n(1),s=n(2),u=n(6),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r),l=new a.ErrorFactory("app","Firebase",c),h="@firebase/app",d="0.5.0",f="[DEFAULT]",p=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),m=new u.Logger("@firebase/app"),g=function(){function e(e,t,n){var r,i,u=this;this.firebase_=n,this.isDeleted_=!1,this.name_=t.name,this.automaticDataCollectionEnabled_=t.automaticDataCollectionEnabled||!1,this.options_=a.deepCopy(e),this.container=new s.ComponentContainer(t.name),this._addComponent(new s.Component("app",(function(){return u}),"PUBLIC"));try{for(var c=o.__values(this.firebase_.INTERNAL.components.values()),l=c.next();!l.done;l=c.next()){var h=l.value;this._addComponent(h)}}catch(e){r={error:e}}finally{try{l&&!l.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}}return Object.defineProperty(e.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(e){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!0,configurable:!0}),e.prototype.delete=function(){var e=this;return new Promise((function(t){e.checkDestroyed_(),t()})).then((function(){return e.firebase_.INTERNAL.removeApp(e.name_),Promise.all(e.container.getProviders().map((function(e){return e.delete()})))})).then((function(){e.isDeleted_=!0}))},e.prototype._getService=function(e,t){return void 0===t&&(t=f),this.checkDestroyed_(),this.container.getProvider(e).getImmediate({identifier:t})},e.prototype._removeServiceInstance=function(e,t){void 0===t&&(t=f),this.container.getProvider(e).clearInstance(t)},e.prototype._addComponent=function(e){try{this.container.addComponent(e)}catch(t){m.debug("Component "+e.name+" failed to register with FirebaseApp "+this.name,t)}},e.prototype._addOrOverwriteComponent=function(e){this.container.addOrOverwriteComponent(e)},e.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},e}();g.prototype.name&&g.prototype.options||g.prototype.delete||console.log("dc");var y="7.6.0";
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var v=
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function e(){var t=function(e){var t={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={});if("object"!=typeof i||null===i){i={name:i}}var o=i;void 0===o.name&&(o.name=f);var s=o.name;if("string"!=typeof s||!s)throw l.create("bad-app-name",{appName:String(s)});if(a.contains(t,s))throw l.create("duplicate-app",{appName:s});var u=new e(n,o,r);return t[s]=u,u},app:i,registerVersion:function(e,t,n){var r,i=null!==(r=p[e])&&void 0!==r?r:e;n&&(i+="-"+n);var o=i.match(/\s|\//),a=t.match(/\s|\//);if(o||a){var c=['Unable to register library "'+i+'" with version "'+t+'":'];return o&&c.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),o&&a&&c.push("and"),a&&c.push('version name "'+t+'" contains illegal characters (whitespace or "/")'),void m.warn(c.join(" "))}u(new s.Component(i+"-version",(function(){return{library:i,version:t}}),"VERSION"))},apps:null,SDK_VERSION:y,INTERNAL:{registerComponent:u,removeApp:function(e){delete t[e]},components:n,useAsService:function(e,t){if("serverAuth"===t)return null;return t}}};function i(e){if(e=e||f,!a.contains(t,e))throw l.create("no-app",{appName:e});return t[e]}function u(s){var u,c,h=s.name;if(n.has(h))return m.debug("There were multiple attempts to register component "+h+"."),"PUBLIC"===s.type?r[h]:null;if(n.set(h,s),"PUBLIC"===s.type){var d=function(e){if(void 0===e&&(e=i()),"function"!=typeof e[h])throw l.create("invalid-app-argument",{appName:h});return e[h]()};void 0!==s.serviceProps&&a.deepExtend(d,s.serviceProps),r[h]=d,e.prototype[h]=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this._getService.bind(this,h);return n.apply(this,s.multipleInstances?e:[])}}try{for(var f=o.__values(Object.keys(t)),p=f.next();!p.done;p=f.next()){var g=p.value;t[g]._addComponent(s)}}catch(e){u={error:e}}finally{try{p&&!p.done&&(c=f.return)&&c.call(f)}finally{if(u)throw u.error}}return"PUBLIC"===s.type?r[h]:null}return(r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(t).map((function(e){return t[e]}))}}),i.App=e,r)}(g);return t.INTERNAL=o.__assign(o.__assign({},t.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){a.deepExtend(t,e)},createSubscribe:a.createSubscribe,ErrorFactory:a.ErrorFactory,deepExtend:a.deepExtend}),t}(),b=function(){function e(e){this.container=e}return e.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(e){if(function(e){var t,n=e.getComponent();return"VERSION"===(null===(t=n)||void 0===t?void 0:t.type)}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e)){var t=e.getImmediate();return t.library+"/"+t.version}return null})).filter((function(e){return e})).join(" ")},e}();
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
if(a.isBrowser()&&void 0!==self.firebase){m.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var w=self.firebase.SDK_VERSION;w&&w.indexOf("LITE")>=0&&m.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var T=v.initializeApp;v.initializeApp=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return a.isNode()&&m.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the rollup-plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/rollup-plugin-node-resolve\n      '),T.apply(void 0,e)};var S=v;!function(e,t){e.INTERNAL.registerComponent(new s.Component("platform-logger",(function(e){return new b(e)}),"PRIVATE")),e.registerVersion(h,d,t),e.registerVersion("fire-js","")}(S),t.default=S,t.firebase=S},function(e,t,n){"use strict";var r,i=(r=n(3))&&"object"==typeof r&&"default"in r?r.default:r;
/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
i.registerVersion("firebase","7.6.1","app"),e.exports=i},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
function r(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */n.r(t),n.d(t,"LogLevel",(function(){return i})),n.d(t,"Logger",(function(){return u})),n.d(t,"setLogLevel",(function(){return c}));var i,o=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(i||(i={}));var a=i.INFO,s=function(e,t){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];if(!(t<e.logLevel)){var a=(new Date).toISOString();switch(t){case i.DEBUG:case i.VERBOSE:console.log.apply(console,r(["["+a+"]  "+e.name+":"],n));break;case i.INFO:console.info.apply(console,r(["["+a+"]  "+e.name+":"],n));break;case i.WARN:console.warn.apply(console,r(["["+a+"]  "+e.name+":"],n));break;case i.ERROR:console.error.apply(console,r(["["+a+"]  "+e.name+":"],n));break;default:throw new Error("Attempted to log a message with an invalid logType (value: "+t+")")}}},u=function(){function e(e){this.name=e,this._logLevel=a,this._logHandler=s,o.push(this)}return Object.defineProperty(e.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){if(!(e in i))throw new TypeError("Invalid value assigned to `logLevel`");this._logLevel=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"logHandler",{get:function(){return this._logHandler},set:function(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e},enumerable:!0,configurable:!0}),e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,r([this,i.DEBUG],e))},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,r([this,i.VERBOSE],e))},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,r([this,i.INFO],e))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,r([this,i.WARN],e))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,r([this,i.ERROR],e))},e}();
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function c(e){o.forEach((function(t){t.logLevel=e}))}},function(e,t,n){!function(e){"use strict";function t(e){return Array.prototype.slice.call(e)}function n(e){return new Promise((function(t,n){e.onsuccess=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function r(e,t,r){var i,o=new Promise((function(o,a){n(i=e[t].apply(e,r)).then(o,a)}));return o.request=i,o}function i(e,t,n){var i=r(e,t,n);return i.then((function(e){if(e)return new l(e,i.request)}))}function o(e,t,n){n.forEach((function(n){Object.defineProperty(e.prototype,n,{get:function(){return this[t][n]},set:function(e){this[t][n]=e}})}))}function a(e,t,n,i){i.forEach((function(i){i in n.prototype&&(e.prototype[i]=function(){return r(this[t],i,arguments)})}))}function s(e,t,n,r){r.forEach((function(r){r in n.prototype&&(e.prototype[r]=function(){return this[t][r].apply(this[t],arguments)})}))}function u(e,t,n,r){r.forEach((function(r){r in n.prototype&&(e.prototype[r]=function(){return i(this[t],r,arguments)})}))}function c(e){this._index=e}function l(e,t){this._cursor=e,this._request=t}function h(e){this._store=e}function d(e){this._tx=e,this.complete=new Promise((function(t,n){e.oncomplete=function(){t()},e.onerror=function(){n(e.error)},e.onabort=function(){n(e.error)}}))}function f(e,t,n){this._db=e,this.oldVersion=t,this.transaction=new d(n)}function p(e){this._db=e}o(c,"_index",["name","keyPath","multiEntry","unique"]),a(c,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),u(c,"_index",IDBIndex,["openCursor","openKeyCursor"]),o(l,"_cursor",["direction","key","primaryKey","value"]),a(l,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach((function(e){e in IDBCursor.prototype&&(l.prototype[e]=function(){var t=this,r=arguments;return Promise.resolve().then((function(){return t._cursor[e].apply(t._cursor,r),n(t._request).then((function(e){if(e)return new l(e,t._request)}))}))})})),h.prototype.createIndex=function(){return new c(this._store.createIndex.apply(this._store,arguments))},h.prototype.index=function(){return new c(this._store.index.apply(this._store,arguments))},o(h,"_store",["name","keyPath","indexNames","autoIncrement"]),a(h,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),u(h,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),s(h,"_store",IDBObjectStore,["deleteIndex"]),d.prototype.objectStore=function(){return new h(this._tx.objectStore.apply(this._tx,arguments))},o(d,"_tx",["objectStoreNames","mode"]),s(d,"_tx",IDBTransaction,["abort"]),f.prototype.createObjectStore=function(){return new h(this._db.createObjectStore.apply(this._db,arguments))},o(f,"_db",["name","version","objectStoreNames"]),s(f,"_db",IDBDatabase,["deleteObjectStore","close"]),p.prototype.transaction=function(){return new d(this._db.transaction.apply(this._db,arguments))},o(p,"_db",["name","version","objectStoreNames"]),s(p,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach((function(e){[h,c].forEach((function(n){e in n.prototype&&(n.prototype[e.replace("open","iterate")]=function(){var n=t(arguments),r=n[n.length-1],i=this._store||this._index,o=i[e].apply(i,n.slice(0,-1));o.onsuccess=function(){r(o.result)}})}))})),[c,h].forEach((function(e){e.prototype.getAll||(e.prototype.getAll=function(e,t){var n=this,r=[];return new Promise((function(i){n.iterateCursor(e,(function(e){e?(r.push(e.value),void 0===t||r.length!=t?e.continue():i(r)):i(r)}))}))})})),e.openDb=function(e,t,n){var i=r(indexedDB,"open",[e,t]),o=i.request;return o&&(o.onupgradeneeded=function(e){n&&n(new f(o.result,e.oldVersion,o.transaction))}),i.then((function(e){return new p(e)}))},e.deleteDb=function(e){return r(indexedDB,"deleteDatabase",[e])},Object.defineProperty(e,"__esModule",{value:!0})}(t)},function(e,t,n){var r=n(9),i=n(10);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var o={insert:"head",singleton:!1};r(i,o);e.exports=i.locals||{}},function(e,t,n){"use strict";var r,i=function(){return void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r},o=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),a=[];function s(e){for(var t=-1,n=0;n<a.length;n++)if(a[n].identifier===e){t=n;break}return t}function u(e,t){for(var n={},r=[],i=0;i<e.length;i++){var o=e[i],u=t.base?o[0]+t.base:o[0],c=n[u]||0,l="".concat(u," ").concat(c);n[u]=c+1;var h=s(l),d={css:o[1],media:o[2],sourceMap:o[3]};-1!==h?(a[h].references++,a[h].updater(d)):a.push({identifier:l,updater:g(d,t),references:1}),r.push(l)}return r}function c(e){var t=document.createElement("style"),r=e.attributes||{};if(void 0===r.nonce){var i=n.nc;i&&(r.nonce=i)}if(Object.keys(r).forEach((function(e){t.setAttribute(e,r[e])})),"function"==typeof e.insert)e.insert(t);else{var a=o(e.insert||"head");if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(t)}return t}var l,h=(l=[],function(e,t){return l[e]=t,l.filter(Boolean).join("\n")});function d(e,t,n,r){var i=n?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(e.styleSheet)e.styleSheet.cssText=h(t,i);else{var o=document.createTextNode(i),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(o,a[t]):e.appendChild(o)}}function f(e,t,n){var r=n.css,i=n.media,o=n.sourceMap;if(i?e.setAttribute("media",i):e.removeAttribute("media"),o&&btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}var p=null,m=0;function g(e,t){var n,r,i;if(t.singleton){var o=m++;n=p||(p=c(t)),r=d.bind(null,n,o,!1),i=d.bind(null,n,o,!0)}else n=c(t),r=f.bind(null,n,t),i=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else i()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=i());var n=u(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var r=0;r<n.length;r++){var i=s(n[r]);a[i].references--}for(var o=u(e,t),c=0;c<n.length;c++){var l=s(n[c]);0===a[l].references&&(a[l].updater(),a.splice(l,1))}n=o}}}},function(e,t,n){var r=n(11),i=n(12),o=n(13),a=n(14),s=n(15);t=r(!1);var u=i(o),c=i(a),l=i(s);t.push([e.i,'.mainPanel{display:flex;position:absolute;background-color:rgba(246,246,246,.9);transition:right 1s,bottom 1s;--width: 250px;--height: 200px}.mainPanel.right{height:100%;width:var(--width);top:0;right:calc(var(--width) * -1)}.mainPanel.bottom{flex-direction:column;height:var(--height);width:100%;bottom:calc(var(--height) * -1)}.mainPanel.right>.panel-content{width:100%}.mainPanel.bottom>.panel-content{display:flex;height:100%}.mainPanel.right.open{right:0}.mainPanel.bottom.open{bottom:0}.mainPanel>.panel-grip{background:#2a8fb1}.mainPanel.right>.panel-grip{display:flex;align-items:center;padding:0 5px;cursor:col-resize}.mainPanel.bottom>.panel-grip{padding:5px 0;cursor:row-resize}.mainPanel>.panel-grip::before{content:"";display:block}.mainPanel.right>.panel-grip::before{height:27px;border-right:3px double #fff}.mainPanel.bottom>.panel-grip::before{width:27px;border-top:3px double #fff;margin:auto}.mainPanel>.panel-content>.panel-header{display:flex;justify-content:space-around;align-items:center;text-align:center}.mainPanel.bottom>.panel-content>.panel-header{flex-direction:column}.mainPanel>.panel-content>.panel-header>span{padding:.2rem;flex-grow:1}.mainPanel.bottom>.panel-content>.panel-header>span{width:35px;writing-mode:vertical-rl;-webkit-writing-mode:vertical-rl}.mainPanel>.panel-content>.panel-header>span:not(.active){cursor:pointer;background-color:#e4e4e4}.mainPanel.right>.panel-content>.panel-header>span:not(.active){border-bottom:1px solid #a6a6a6}.mainPanel.bottom>.panel-content>.panel-header>span:not(.active){border-right:1px solid #a6a6a6}.mainPanel.right>.panel-content>.panel-header>span:not(:last-child){border-right:1px solid #a6a6a6}.mainPanel.bottom>.panel-content>.panel-header>span:not(:last-child){border-bottom:1px solid #a6a6a6}.mainPanel>.panel-content>.panel-body{flex-grow:1;padding:.5rem}.mainPanel>.panel-content>.panel-body>.hidden{display:none}#projectsListContainer{height:100%;width:100%;position:absolute;background-color:#fff}#projectsListContainer>div:first-child{display:flex;justify-content:space-between;padding:1rem}#projectsListContainer>div:first-child>span{width:20%}@media(max-width: 500px){#closeProjectsListBtn{display:none}}#closeProjectsListBtn{float:right}#projectsListContainer>div:first-child>h4{overflow-x:hidden;font-weight:normal;font-size:1.6rem}#projectsList{display:flex;flex-wrap:wrap;margin-left:1rem;--items-h: 6;--item-width: calc((100% / var(--items-h)) - 1rem);--remaining-items: unset}@media(max-width: 1000px){#projectsList{--items-h: 5}}@media(max-width: 800px){#projectsList{--items-h: 4}}@media(max-width: 600px){#projectsList{--items-h: 3}}@media(max-width: 400px){#projectsList{--items-h: 2}}@media(max-width: 280px){#projectsList{--items-h: 1}}#projectsList::after{content:"";flex-grow:var(--remaining-items);width:calc((var(--item-width) + 1rem) * var(--remaining-items))}#projectsList>.empty-msg{width:100%;margin-top:3rem;margin-bottom:3rem;text-align:center}.projectItem{flex-grow:1;width:var(--item-width);margin-bottom:1rem;margin-right:1rem;position:relative;cursor:pointer;font-family:inherit;box-shadow:2px 2px 7px #b2b2b2}.projectItem>h4{background-color:#f9f9f9}.projectItem.current{cursor:auto;outline:4px solid #7da5b6;box-shadow:none}.projectItem.unsync{opacity:.5}.projectItem:not(.current):hover{box-shadow:2px 2px 7px #6b6b6b}.projectItem>.sharedIcon{position:absolute;width:30px;height:30px;right:6px;top:6px;background-color:#eee;padding:5px;border-radius:50%}.projectItem>.thumb{display:block;width:100%;height:150px;object-fit:cover}.projectItem>h4{padding:.6rem;font-weight:normal}#loadMoreProjBtn{display:block;margin:auto}#modalDialogContainer{justify-content:center;align-items:center;position:absolute;top:0;right:0;bottom:0;left:0}#modalDialogContainer>div{padding:1rem;background-color:#fff}#modalDialogContainer.grayTranslucent{background-color:rgba(216,216,216,.8)}#modalDialogContainer.lightOpaque{background-color:#fff}#closeModalBtn{float:right}#modalDialogContainer .modal-main-btns{display:flex;align-items:flex-end;justify-content:flex-end;margin-top:.3rem}#modalDialogContainer .modal-main-btns>button:not(:first-child){margin-left:.5rem}#authorizeDialog{display:flex;flex-direction:column;padding:1rem}#authorizeDialog>img{align-self:center}#authorizeDialog>h2{font-size:1.6rem;text-align:center;font-weight:normal;margin-bottom:1.5rem;margin-top:1rem}#authorizeDialog>div:last-child{display:flex;flex-direction:column;flex-grow:1;justify-content:end}#authorizeDialog>div:last-child>button{font-size:1.2rem}#authorizeDialog>div:last-child>button:not(:last-child){margin-bottom:.4rem}#uploadFileForm{display:flex;flex-direction:column;min-width:200px;padding:1rem;background-color:#fff}#uploadFileForm>input{font-family:inherit}#uploadFileForm>label{margin-top:1rem;text-align:center;cursor:pointer;font-size:.9rem}#uploadFileForm>button:last-child{margin-top:.5rem}#loadingFile{padding:1rem;text-align:center}#sideNavContainer{display:flex;flex-direction:column;position:absolute;height:100vh;width:314px;top:0;right:0;z-index:999;transform:translateX(314px);background-color:#fff}#sideNavContainer.active{transform:translateX(0)}.side-nav-header{padding-right:1rem;padding-left:1rem}#user-info{display:flex;align-items:flex-end;margin-top:var(--header-height)}#user-info>img{margin-right:.6rem}#user-info>span{overflow-x:hidden}#user-info>span>span{display:block}#user-info .email{font-weight:lighter}.side-nav-body{display:flex;flex-direction:column;align-items:center;flex-grow:1;padding:1rem;text-align:center}.side-nav-body button{width:80%}.side-nav-body>.side-nav-section{width:100%;padding-bottom:1rem}.side-nav-body>.side-nav-section.grow{flex-grow:1}#sideNavToggle{width:24px;height:24px;margin:.4rem;cursor:pointer;border-style:none;background-image:url('+u+");background-repeat:no-repeat;background-position:center}#sideNavToggle.active{background-image:url("+c+')}#sideNavContainer+.side-nav-shade{position:absolute;z-index:10;background-color:#000;width:100%;height:100vh;top:0;opacity:0;left:100%;transition:opacity .25s ease-out,left 0s linear .25s}#sideNavContainer.active+.side-nav-shade{opacity:.7;left:0;transition:opacity .25s ease-out,left 0s linear}.side-nav-footer{padding:1rem;font-weight:lighter}#commentForm>.inputs{margin-bottom:.8rem}#commentForm>.inputs>textarea{width:100%;min-height:150px}#commentForm.horizontal{display:flex}#commentForm.horizontal>.inputs{flex-grow:1}#commentForm.horizontal>.inputs>textarea{min-height:60px}#commentForm>.inputs>.members{margin-top:.5rem}#commentForm>.inputs>.members.hidden{display:none}#commentForm>.inputs>.members>p:first-child{font-weight:lighter;margin-bottom:.2rem}#commentForm>.inputs>.members>select{width:100%}#commentForm .info{margin-top:.1rem;font-size:.7rem;font-weight:lighter}#commentForm>.formButtonsModes>.buttonsContainer{display:flex;justify-content:space-between}#commentForm.horizontal>.formButtonsModes{margin-left:.5rem}#commentForm.horizontal>.formButtonsModes>.buttonsContainer{flex-direction:column}#commentForm.horizontal>.formButtonsModes>.buttonsContainer>button{height:50px}#commentForm.horizontal>.formButtonsModes>.buttonsContainer>button:first-child{margin-top:.6rem;order:1}#shareProjectDialog{display:flex;flex-direction:column;position:relative;min-height:350px;min-width:400px;background-color:#fff}#shareProjectDialog .table-wrapper{margin-top:.5rem;margin-bottom:1rem;background-color:#f1f1f1}#shareProjectDialog .table-wrapper.fixed-height{height:100px;overflow-y:auto}#shareProjectDialog .table-wrapper>table{width:100%;border-collapse:collapse;background-color:#eee}#shareProjectDialog .table-wrapper>.empty-msg{display:none;height:100%;align-items:center;justify-content:center;padding:1rem}#shareProjectDialog>.users-container.empty .empty-msg{display:flex}#shareProjectDialog>.users-container.empty table{display:none}#shareProjectDialog>.users-container.hidden{visibility:hidden}#shareProjectDialog td:last-child{width:40px;text-align:center}#shareProjectDialog td:last-child>svg{width:12px;height:12px}#shareProjectDialog td.action-btn{cursor:pointer}#shareProjectDialog td.action-btn:hover{background-color:#dbdbdb}#shareProjectDialog tr{border-bottom:2px solid #fff}#shareProjectDialog tr.to-delete>td:first-child{opacity:.4}#shareProjectDialog td.user-data>img{float:left;height:64px;width:64px;margin-right:.5rem}#shareProjectDialog td.user-data>div{display:flex;height:64px;padding:.4rem;flex-direction:column;justify-content:space-around}#shareProjectDialog td.user-data>div>span:nth-child(2){font-weight:lighter}#shareProjectDialog>.pending-users td.user-data{padding:.4rem}#shareProjectDialog>form>label{display:block}#shareProjectDialog>form>div{display:flex}#shareProjectDialog>form input{flex-grow:1}#shareProjectDialog>form button{width:60px}#shareProjectDialog>.loader-container{display:flex;align-items:center;justify-content:center;position:absolute;width:100%;height:100%;top:0;left:0;background-color:rgba(255,255,255,.7)}#shareProjectDialog>.loader-container.hidden{display:none}#shareProjectDialog .share-notification{position:absolute;bottom:0}#shareProjectDialog .share-notification.hidden{visibility:hidden}div#propsTablesContainer{display:flex}.mainPanel.right div#propsTablesContainer{flex-direction:column}.data-table{text-align:left;width:100%}.data-table>thead th{padding-left:.3rem;padding-right:.3rem;background-color:#ddd}.data-table>tbody th{width:50%;font-weight:normal}.data-table td{font-weight:lighter}#messageContainer{position:absolute;padding:1rem;max-width:300px;flex-direction:column;align-items:flex-end;bottom:2rem;right:2rem;box-shadow:2px 2px 6px #b2b2b2}#messageContainer>button{margin-bottom:.5rem}#messageContainer>button>img{width:1rem}#messageContainer.success{background-color:#aef5ad}#messageContainer.error{background-color:#dc9393}#messageContainer.warning{background-color:#ecdaa4}#viewportMessage{display:none;position:absolute;width:100%;height:100%;top:0;justify-content:center;align-items:center;text-align:center;font-weight:lighter;background-color:rgba(255,255,255,.95)}#viewportMessage.active{display:flex}#viewportMessage p{padding-bottom:1rem}#viewportMessage .btns-container{display:flex;justify-content:space-around}#notificationsContainer{display:none;position:absolute;width:450px;top:calc(var(--header-height) + 1rem);right:1rem;opacity:0;transition:opacity .2s ease-in;background-color:#f6f6f6;box-shadow:0 0 12px rgba(0,0,0,.2)}#notificationsContainer>.empty-msg{display:none;padding:2rem .8rem;text-align:center}#notificationsContainer.open{display:unset;opacity:1}#notificationsContainer.empty>.notifications-body{display:none}#notificationsContainer.empty>.empty-msg{display:block}.notifications-header{padding:.8rem;background-color:#fbfbfb;border-bottom:2px solid #dbdbdb}.notifications-body{max-height:350px;overflow:auto}.notifications-body>li{display:flex;padding:.8rem;cursor:pointer;border-bottom:1px solid #dbdbdb}.notifications-body>li.pending{background-color:#cbeaf5}.notifications-body>li.pending:hover{background-color:#c2e0ea}.notifications-body>li:hover{background-color:#eaeaea}.notification-thumb{height:50px;margin-right:1rem}.notification-content>h4{margin-bottom:.2rem;font-weight:500}.notification-content>p{font-weight:lighter}#contextMenu{width:120px;position:absolute;padding-top:.5rem;background-color:#fff;box-shadow:2px 2px 7px rgba(0,0,0,.2)}#contextMenu>ul>li{padding:.6rem;cursor:pointer}#contextMenu>ul>li:hover{background-color:rgba(0,0,0,.2)}.selected{--fill: #ffbd00;--stroke: #e89807;--stroke-w: 8px}.selected.fill.stroke>path,.selected.fill.stroke>polygon,.selected.fill.stroke>circle,.selected.fill.stroke>rect{fill:var(--fill);stroke:var(--stroke);stroke-width:var(--stroke-w)}.selected.stroke>path,.selected.stroke>polyline,.selected.stroke>line{stroke:var(--stroke);stroke-width:var(--stroke-w)}.selected.fill>path,.selected.fill>polygon,.selected.fill>circle{fill:var(--fill)}.selected.stroke>.hatch>line{stroke:var(--stroke);stroke-width:var(--stroke-w)}:root{--header-height: 2.5rem;--theme-blue: #2a8fb1;--theme-yellow: #ea8c15}*,*::before,*::after{box-sizing:border-box}h1,h2,h3,h4,h5,p{margin-top:0;margin-bottom:0}ul,ol{list-style-type:none;margin-top:0;margin-bottom:0;padding-left:0}button{border-style:none;padding:0;background-color:unset}body{display:flex;flex-direction:column;margin:0;overflow:hidden;color:#545454;font-family:"Oswald",sans-serif}svg.svg-loader{width:130px;height:90px}.buttonBase{padding:.4rem;cursor:pointer;border-width:1px;border-style:solid;font-family:inherit}.buttonBase.sides{border-top-style:none;border-bottom-style:none}.buttonBase.light{color:#373737;border-color:#cfcfcf}.buttonBase.light:not(.disabled):hover{background-color:#ececec}.buttonBase.emphasize{border-color:#e0e0e0;background-color:#d1f0ec}.buttonBase.emphasize:not(.disabled):hover{background-color:#acd3ce}.buttonBase.danger{color:#f55252;border-color:#fba4a4}.buttonBase.danger:not(.disabled):hover{background-color:#ffe9e9}.buttonBase.disabled{cursor:unset;opacity:.5}button.disabled:focus{outline-style:none}.buttonBase.locked{cursor:unset}.buttonBase.locked:hover{background-color:unset}.icon-btn{cursor:pointer}header .icon-btn{padding:calc(((var(--header-height) - 2px) - 24px) / 2);height:calc(var(--header-height) - 2px);width:calc(var(--header-height) - 2px)}.icon-btn:not(.disabled):not(.btn-tool-enabled):hover{background-color:#ececec}.icon-btn>svg{display:block;width:24px;height:24px}.icon-btn.disabled{opacity:.1;cursor:auto}.icon-btn.hidden{display:none}.btn-tool-enabled{background-color:#96cbdb}.btn-bg-img{background-repeat:no-repeat;background-position-y:center;background-position-x:.8rem}.google-logo{background-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHZpZXdCb3g9IjAgMCAxOCAxOCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48dGl0bGU+c3VwZXIgZzwvdGl0bGU+PGcgZmlsbC1ydWxlPSJldmVub2RkIj48cGF0aCBkPSJNOSAzLjQ4YzEuNjkgMCAyLjgzLjczIDMuNDggMS4zNGwyLjU0LTIuNDhDMTMuNDYuODkgMTEuNDMgMCA5IDAgNS40OCAwIDIuNDQgMi4wMi45NiA0Ljk2bDIuOTEgMi4yNkM0LjYgNS4wNSA2LjYyIDMuNDggOSAzLjQ4eiIgZmlsbD0iI0VBNDMzNSIvPjxwYXRoIGQ9Ik0xNy42NCA5LjJjMC0uNzQtLjA2LTEuMjgtLjE5LTEuODRIOXYzLjM0aDQuOTZjLS4xLjgzLS42NCAyLjA4LTEuODQgMi45MmwyLjg0IDIuMmMxLjctMS41NyAyLjY4LTMuODggMi42OC02LjYyeiIgZmlsbD0iIzQyODVGNCIvPjxwYXRoIGQ9Ik0zLjg4IDEwLjc4QTUuNTQgNS41NCAwIDAgMSAzLjU4IDljMC0uNjIuMTEtMS4yMi4yOS0xLjc4TC45NiA0Ljk2QTkuMDA4IDkuMDA4IDAgMCAwIDAgOWMwIDEuNDUuMzUgMi44Mi45NiA0LjA0bDIuOTItMi4yNnoiIGZpbGw9IiNGQkJDMDUiLz48cGF0aCBkPSJNOSAxOGMyLjQzIDAgNC40Ny0uOCA1Ljk2LTIuMThsLTIuODQtMi4yYy0uNzYuNTMtMS43OC45LTMuMTIuOS0yLjM4IDAtNC40LTEuNTctNS4xMi0zLjc0TC45NyAxMy4wNEMyLjQ1IDE1Ljk4IDUuNDggMTggOSAxOHoiIGZpbGw9IiMzNEE4NTMiLz48cGF0aCBmaWxsPSJub25lIiBkPSJNMCAwaDE4djE4SDB6Ii8+PC9nPjwvc3ZnPg==)}#saveBtn.enabled>svg,#notificationBtn.enabled>svg{fill:var(--theme-yellow);transform:scale(1.2)}#saveBtn>svg.progress-icon{display:none}#saveBtn.progress:hover{cursor:auto;background-color:unset}#saveBtn.progress>svg.save-icon{display:none}#saveBtn.progress>svg.progress-icon{display:block}header{height:var(--header-height);padding-right:8rem;align-items:stretch;z-index:1;background-color:#f6f6f6;border-bottom:2px solid var(--theme-blue)}header>span:first-child{width:4rem}header>span:first-child>img{height:100%;padding:.3rem;margin:auto;display:block}header>h1{position:absolute;right:100%}#projectsListBtn{min-width:10rem;font-size:1rem;font-weight:normal}#projectsListBtn>span{display:inline-block;width:100%;text-align:center}@media(max-width: 500px){#projectsListBtn{display:unset;min-width:unset;width:2.5rem;font-size:0;border-left-style:none;background-repeat:no-repeat;background-position:center;background-image:url('+l+");background-size:24px}}#toolbarsContainer{flex-grow:1;justify-content:flex-end}#drawingsBtns{min-width:8rem;text-align:center}#drawingsBtns>button{height:calc(var(--header-height) - 2px);width:100%;border-left-style:none}#drawingsBtns>ul{font-size:.9rem;font-weight:lighter;cursor:pointer;background-color:#f6f6f6;box-shadow:0px 2px 5px #b6b6b6}#drawingsBtns>ul>li{padding:.4rem}#drawingsBtns>ul>li.active{background-color:#c2c2c2;cursor:auto}#drawingsBtns>ul>li:not(.active):hover{background-color:#dfdfdf}.global-nav-btns{display:flex;position:absolute;top:0;right:0;z-index:1000;border-left:1px solid #c8c8c8}@media(max-width: 500px){header{order:1;border-top:2px solid var(--theme-blue);border-bottom:unset}header>span:first-child{display:none}#toolbarsContainer{position:absolute;right:0}#drawingsBtns>ul{box-shadow:0px -2px 7px #b6b6b6}}.dropdown-container{z-index:1;position:relative}.dropdown-container>.dropdown-content{display:flex;flex-direction:column;transition:.6s;transform:translateY(-100%);opacity:0;z-index:-1;position:absolute;right:0;left:0;top:calc(var(--header-height) - 2px)}.dropdown-container.responsive>.dropdown-content{display:inline;opacity:unset;z-index:unset;position:unset}@media(max-width: 800px){.dropdown-container.responsive>.dropdown-content{display:flex;opacity:0;z-index:-1;position:absolute}}.dropdown-container.open>.dropdown-content{transform:translateY(0%);opacity:1}@media(max-width: 500px){.dropdown-container>.dropdown-content{transform:unset}.dropdown-container.open>.dropdown-content{transform:translateY(calc(-100% - 2.5rem + 2px))}}main{position:relative;height:calc(100vh - var(--header-height))}#workspaces{height:100%}.workspace{height:100%}form .top-label{margin-bottom:.5rem}form .base-input{padding:.4rem}form .error-msg{font-size:.9rem;font-weight:lighter;color:red}form .error-msg.hidden{visibility:hidden}#renameProjectForm .rename-form-content{display:flex;width:100%;flex-direction:column}.drawingsContainer{height:100%}.drawingsContainer>div{height:100%}.drawingsContainer>div>svg{height:100%;width:100%}@media all and (display-mode: standalone){header{border-top:1px solid #dedede}}",""]),e.exports=t},function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n=e[1]||"",r=e[3];if(!r)return n;if(t&&"function"==typeof btoa){var i=(a=r,s=btoa(unescape(encodeURIComponent(JSON.stringify(a)))),u="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(s),"/*# ".concat(u," */")),o=r.sources.map((function(e){return"/*# sourceURL=".concat(r.sourceRoot||"").concat(e," */")}));return[n].concat(o).concat([i]).join("\n")}var a,s,u;return[n].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,r){"string"==typeof e&&(e=[[null,e,""]]);var i={};if(r)for(var o=0;o<this.length;o++){var a=this[o][0];null!=a&&(i[a]=!0)}for(var s=0;s<e.length;s++){var u=[].concat(e[s]);r&&i[u[0]]||(n&&(u[2]?u[2]="".concat(n," and ").concat(u[2]):u[2]=n),t.push(u))}},t}},function(e,t,n){"use strict";e.exports=function(e,t){return t||(t={}),"string"!=typeof(e=e&&e.__esModule?e.default:e)?e:(/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]/.test(e)||t.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e)}},function(e,t,n){"use strict";n.r(t),t.default=n.p+"6a516ff5fac28139a5f05c592974ad7a.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"e2684d217a882ae02c861b7fc5314e72.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"699485ad424f68ff9068a111deaba047.svg"},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r,i,o=(r=n(3))&&"object"==typeof r&&"default"in r?r.default:r,a=n(0),s=n(6),u=n(1),c=n(2),l=n(18),h=o.SDK_VERSION,d=new s.Logger("@firebase/firestore");function f(){return d.logLevel===s.LogLevel.DEBUG?i.DEBUG:d.logLevel===s.LogLevel.SILENT?i.SILENT:i.ERROR}function p(e){switch(e){case i.DEBUG:d.logLevel=s.LogLevel.DEBUG;break;case i.ERROR:d.logLevel=s.LogLevel.ERROR;break;case i.SILENT:d.logLevel=s.LogLevel.SILENT;break;default:d.error("Firestore ("+h+"): Invalid value passed to `setLogLevel`")}}function m(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(d.logLevel<=s.LogLevel.DEBUG){var i=n.map(y);d.debug.apply(d,a.__spreadArrays(["Firestore ("+h+") ["+e+"]: "+t],i))}}function g(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(d.logLevel<=s.LogLevel.ERROR){var r=t.map(y);d.error.apply(d,a.__spreadArrays(["Firestore ("+h+"): "+e],r))}}function y(e){if("string"==typeof e)return e;var t=w.getPlatform();try{return t.formatJSON(e)}catch(t){return e}}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v(e){var t="FIRESTORE ("+h+") INTERNAL ASSERTION FAILED: "+e;throw g(t),new Error(t)}function b(e,t){e||v(t)}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */!function(e){e[e.DEBUG=0]="DEBUG",e[e.ERROR=1]="ERROR",e[e.SILENT=2]="SILENT"}(i||(i={}));var w=function(){function e(){}return e.setPlatform=function(t){e.platform&&v("Platform already defined"),e.platform=t},e.getPlatform=function(){return e.platform||v("Platform not set"),e.platform},e}();function T(){return w.getPlatform().emptyByteString}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var S={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},I=function(e){function t(t,n){var r=e.call(this,n)||this;return r.code=t,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return a.__extends(t,e),t}(Error);
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function E(e,t){function n(){var e="This constructor is private.";throw t&&(e+=" ",e+=t),new I(S.INVALID_ARGUMENT,e)}for(var r in n.prototype=e.prototype,e)e.hasOwnProperty(r)&&(n[r]=e[r]);return n}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function _(e,t){return void 0!==e?e:t}function D(e,t){for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Number(n);isNaN(r)||t(r,e[n])}}function k(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function N(e){for(var t in b(null!=e&&"object"==typeof e,"isEmpty() expects object parameter."),e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function A(e,t){if(0!==t.length)throw new I(S.INVALID_ARGUMENT,"Function "+e+"() does not support arguments, but was called with "+Y(t.length,"argument")+".")}function x(e,t,n){if(t.length!==n)throw new I(S.INVALID_ARGUMENT,"Function "+e+"() requires "+Y(n,"argument")+", but was called with "+Y(t.length,"argument")+".")}function M(e,t,n){if(t.length<n)throw new I(S.INVALID_ARGUMENT,"Function "+e+"() requires at least "+Y(n,"argument")+", but was called with "+Y(t.length,"argument")+".")}function L(e,t,n,r){if(t.length<n||t.length>r)throw new I(S.INVALID_ARGUMENT,"Function "+e+"() requires between "+n+" and "+r+" arguments, but was called with "+Y(t.length,"argument")+".")}function P(e,t,n,r){q(e,t,H(n)+" argument",r)}function O(e,t,n,r){void 0!==r&&P(e,t,n,r)}function R(e,t,n,r){q(e,t,n+" option",r)}function j(e,t,n,r){void 0!==r&&R(e,t,n,r)}function B(e,t,n,r,i){void 0!==r&&function(e,t,n,r,i){if(!(r instanceof Array))throw new I(S.INVALID_ARGUMENT,"Function "+e+"() requires its "+t+" option to be an array, but it was: "+W(r));for(var o=0;o<r.length;++o)if(!i(r[o]))throw new I(S.INVALID_ARGUMENT,"Function "+e+"() requires all "+t+" elements to be "+n+", but the value at index "+o+" was: "+W(r[o]))}(e,t,n,r,i)}function F(e,t,n,r,i){void 0!==r&&function(e,t,n,r,i){for(var o=[],a=0,s=i;a<s.length;a++){var u=s[a];if(u===r)return;o.push(W(u))}var c=W(r);throw new I(S.INVALID_ARGUMENT,"Invalid value "+c+" provided to function "+e+'() for option "'+n+'". Acceptable values: '+o.join(", "))}(e,0,n,r,i)}function V(e,t,n,r){if(!t.some((function(e){return e===r})))throw new I(S.INVALID_ARGUMENT,"Invalid value "+W(r)+" provided to function "+e+"() for its "+H(n)+" argument. Acceptable values: "+t.join(", "))}function q(e,t,n,r){if(!("object"===t?U(r):"non-empty string"===t?"string"==typeof r&&""!==r:typeof r===t)){var i=W(r);throw new I(S.INVALID_ARGUMENT,"Function "+e+"() requires its "+n+" to be of type "+t+", but it was: "+i)}}function U(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function W(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=e.substring(0,20)+"..."),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){if(e.constructor){var t=/function\s+([^\s(]+)\s*\(/.exec(e.constructor.toString());if(t&&t.length>1)return t[1]}return null}(e);return t?"a custom "+t+" object":"an object"}return"function"==typeof e?"a function":v("Unknown wrong type: "+typeof e)}function z(e,t,n){if(void 0===n)throw new I(S.INVALID_ARGUMENT,"Function "+e+"() requires a valid "+H(t)+" argument, but it was undefined.")}function K(e,t,n){k(t,(function(t,r){if(n.indexOf(t)<0)throw new I(S.INVALID_ARGUMENT,"Unknown option '"+t+"' passed to function "+e+"(). Available options: "+n.join(", "))}))}function G(e,t,n,r){var i=W(r);return new I(S.INVALID_ARGUMENT,"Function "+e+"() requires its "+H(n)+" argument to be a "+t+", but it was: "+i)}function Q(e,t,n){if(n<=0)throw new I(S.INVALID_ARGUMENT,'Function "'+e+'()" requires its '+H(t)+" argument to be a positive number, but it was: "+n+".")}function H(e){switch(e){case 1:return"first";case 2:return"second";case 3:return"third";default:return e+"th"}}function Y(e,t){return e+" "+t+(1===e?"":"s")}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var J=function(){function e(){}return e.newId=function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t="",n=0;n<20;n++)t+=e.charAt(Math.floor(Math.random()*e.length));return b(20===t.length,"Invalid auto ID: "+t),t},e}();function X(e,t){return e<t?-1:e>t?1:0}function $(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].isEqual(t[n]))return!1;return!0}function Z(e){return e+"\0"}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ee(){if("undefined"==typeof Uint8Array)throw new I(S.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function te(){if(!w.getPlatform().base64Available)throw new I(S.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var ne,re=function(){function e(e){te(),this._binaryString=e}return e.fromBase64String=function(t){x("Blob.fromBase64String",arguments,1),P("Blob.fromBase64String","string",1,t),te();try{var n=w.getPlatform().atob(t);return new e(n)}catch(e){throw new I(S.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+e)}},e.fromUint8Array=function(t){if(x("Blob.fromUint8Array",arguments,1),ee(),!(t instanceof Uint8Array))throw G("Blob.fromUint8Array","Uint8Array",1,t);var n=Array.prototype.map.call(t,(function(e){return String.fromCharCode(e)})).join("");return new e(n)},e.prototype.toBase64=function(){return x("Blob.toBase64",arguments,0),te(),w.getPlatform().btoa(this._binaryString)},e.prototype.toUint8Array=function(){x("Blob.toUint8Array",arguments,0),ee();for(var e=new Uint8Array(this._binaryString.length),t=0;t<this._binaryString.length;t++)e[t]=this._binaryString.charCodeAt(t);return e},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e.prototype.isEqual=function(e){return this._binaryString===e._binaryString},e.prototype._compareTo=function(e){return X(this._binaryString,e._binaryString)},e}(),ie=E(re,"Use Blob.fromUint8Array() or Blob.fromBase64String() instead."),oe=function(e,t,n,r,i){this.databaseId=e,this.persistenceKey=t,this.host=n,this.ssl=r,this.forceLongPolling=i},ae="(default)",se=function(){function e(e,t){this.projectId=e,this.database=t||ae}return Object.defineProperty(e.prototype,"isDefaultDatabase",{get:function(){return this.database===ae},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database},e.prototype.compareTo=function(e){return X(this.projectId,e.projectId)||X(this.database,e.database)},e}(),ue=function(){function e(e,t){var n=this;this.previousValue=e,t&&(t.sequenceNumberHandler=function(e){return n.setPreviousValue(e)},this.writeNewSequenceNumber=function(e){return t.writeSequenceNumber(e)})}return e.prototype.setPreviousValue=function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue},e.prototype.next=function(){var e=++this.previousValue;return this.writeNewSequenceNumber&&this.writeNewSequenceNumber(e),e},e.INVALID=-1,e}(),ce=function(){function e(e,t,n){void 0===t?t=0:t>e.length&&v("offset "+t+" out of range "+e.length),void 0===n?n=e.length-t:n>e.length-t&&v("length "+n+" out of range "+(e.length-t)),this.segments=e,this.offset=t,this.len=n}return Object.defineProperty(e.prototype,"length",{get:function(){return this.len},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return 0===e.comparator(this,t)},e.prototype.child=function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)},e.prototype.limit=function(){return this.offset+this.length},e.prototype.popFirst=function(e){return e=void 0===e?1:e,b(this.length>=e,"Can't call popFirst() with less segments"),this.construct(this.segments,this.offset+e,this.length-e)},e.prototype.popLast=function(){return b(!this.isEmpty(),"Can't call popLast() on empty path"),this.construct(this.segments,this.offset,this.length-1)},e.prototype.firstSegment=function(){return b(!this.isEmpty(),"Can't call firstSegment() on empty path"),this.segments[this.offset]},e.prototype.lastSegment=function(){return this.get(this.length-1)},e.prototype.get=function(e){return b(e<this.length,"Index out of range"),this.segments[this.offset+e]},e.prototype.isEmpty=function(){return 0===this.length},e.prototype.isPrefixOf=function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0},e.prototype.isImmediateParentOf=function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0},e.prototype.forEach=function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])},e.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},e.comparator=function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),o=t.get(r);if(i<o)return-1;if(i>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0},e}(),le=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.construct=function(e,n,r){return new t(e,n,r)},t.prototype.canonicalString=function(){return this.toArray().join("/")},t.prototype.toString=function(){return this.canonicalString()},t.fromString=function(e){if(e.indexOf("//")>=0)throw new I(S.INVALID_ARGUMENT,"Invalid path ("+e+"). Paths must not contain // in them.");return new t(e.split("/").filter((function(e){return e.length>0})))},t.EMPTY_PATH=new t([]),t}(ce),he=/^[_a-zA-Z][_a-zA-Z0-9]*$/,de=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.construct=function(e,n,r){return new t(e,n,r)},t.isValidIdentifier=function(e){return he.test(e)},t.prototype.canonicalString=function(){return this.toArray().map((function(e){return e=e.replace("\\","\\\\").replace("`","\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")},t.prototype.toString=function(){return this.canonicalString()},t.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},t.keyField=function(){return new t(["__name__"])},t.fromServerFormat=function(e){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new I(S.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},a=!1;i<e.length;){var s=e[i];if("\\"===s){if(i+1===e.length)throw new I(S.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new I(S.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===s?(a=!a,i++):"."!==s||a?(r+=s,i++):(o(),i++)}if(o(),a)throw new I(S.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)},t.EMPTY_PATH=new t([]),t}(ce),fe=function(){function e(t){this.path=t,b(e.isDocumentKey(t),"Invalid DocumentKey with an odd number of segments: "+t.toArray().join("/"))}return e.prototype.hasCollectionId=function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e},e.prototype.isEqual=function(e){return null!==e&&0===le.comparator(this.path,e.path)},e.prototype.toString=function(){return this.path.toString()},e.comparator=function(e,t){return le.comparator(e.path,t.path)},e.isDocumentKey=function(e){return e.length%2==0},e.fromSegments=function(t){return new e(new le(t.slice()))},e.fromPathString=function(t){return new e(le.fromString(t))},e.EMPTY=new e(new le([])),e}(),pe=function(){var e=this;this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))};!function(e){e.All="all",e.ListenStreamIdle="listen_stream_idle",e.ListenStreamConnectionBackoff="listen_stream_connection_backoff",e.WriteStreamIdle="write_stream_idle",e.WriteStreamConnectionBackoff="write_stream_connection_backoff",e.OnlineStateTimeout="online_state_timeout",e.ClientMetadataRefresh="client_metadata_refresh",e.LruGarbageCollection="lru_garbage_collection",e.RetryTransaction="retry_transaction"}(ne||(ne={}));var me=function(){function e(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new pe,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.catch=this.deferred.promise.catch.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return e.createAndSchedule=function(t,n,r,i,o){var a=new e(t,n,Date.now()+r,i,o);return a.start(r),a},e.prototype.start=function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)},e.prototype.skipDelay=function(){return this.handleDelayElapsed()},e.prototype.cancel=function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new I(S.CANCELLED,"Operation cancelled"+(e?": "+e:""))))},e.prototype.handleDelayElapsed=function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))},e.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},e}(),ge=function(){function e(){this.tail=Promise.resolve(),this._isShuttingDown=!1,this.delayedOperations=[],this.failure=null,this.operationInProgress=!1,this.timerIdsToSkip=[]}return Object.defineProperty(e.prototype,"isShuttingDown",{get:function(){return this._isShuttingDown},enumerable:!0,configurable:!0}),e.prototype.enqueueAndForget=function(e){this.enqueue(e)},e.prototype.enqueueAndForgetEvenAfterShutdown=function(e){this.verifyNotFailed(),this.enqueueInternal(e)},e.prototype.enqueueEvenAfterShutdown=function(e){return this.verifyNotFailed(),this.enqueueInternal(e)},e.prototype.enqueueAndInitiateShutdown=function(e){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(t){switch(t.label){case 0:return this.verifyNotFailed(),this._isShuttingDown?[3,2]:(this._isShuttingDown=!0,[4,this.enqueueEvenAfterShutdown(e)]);case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},e.prototype.enqueue=function(e){return this.verifyNotFailed(),this._isShuttingDown?new Promise((function(e){})):this.enqueueInternal(e)},e.prototype.enqueueInternal=function(e){var t=this,n=this.tail.then((function(){return t.operationInProgress=!0,e().catch((function(e){t.failure=e,t.operationInProgress=!1;var n=e.stack||e.message||"";throw g("INTERNAL UNHANDLED ERROR: ",n),n.indexOf("Firestore Test Simulated Error")<0&&setTimeout((function(){throw e}),0),e})).then((function(e){return t.operationInProgress=!1,e}))}));return this.tail=n,n},e.prototype.enqueueAfterDelay=function(e,t,n){var r=this;this.verifyNotFailed(),b(t>=0,"Attempted to schedule an operation with a negative delay of "+t),this.timerIdsToSkip.indexOf(e)>-1&&(t=0);var i=me.createAndSchedule(this,e,t,n,(function(e){return r.removeDelayedOperation(e)}));return this.delayedOperations.push(i),i},e.prototype.verifyNotFailed=function(){this.failure&&v("AsyncQueue is already failed: "+(this.failure.stack||this.failure.message))},e.prototype.verifyOperationInProgress=function(){b(this.operationInProgress,"verifyOpInProgress() called when no op in progress on this queue.")},e.prototype.drain=function(){return this.enqueueEvenAfterShutdown((function(){return Promise.resolve()}))},e.prototype.containsDelayedOperation=function(e){for(var t=0,n=this.delayedOperations;t<n.length;t++){if(n[t].timerId===e)return!0}return!1},e.prototype.runDelayedOperationsEarly=function(e){var t=this;return this.drain().then((function(){b(e===ne.All||t.containsDelayedOperation(e),"Attempted to drain to missing operation "+e),t.delayedOperations.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));for(var n=0,r=t.delayedOperations;n<r.length;n++){var i=r[n];if(i.skipDelay(),e!==ne.All&&i.timerId===e)break}return t.drain()}))},e.prototype.skipDelaysForTimerId=function(e){this.timerIdsToSkip.push(e)},e.prototype.removeDelayedOperation=function(e){var t=this.delayedOperations.indexOf(e);b(t>=0,"Delayed operation not found."),this.delayedOperations.splice(t,1)},e}(),ye="",ve="",be="",we="";function Te(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=Ie(t)),t=Se(e.get(n),t);return Ie(t)}function Se(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var o=e.charAt(i);switch(o){case"\0":n+=ye+be;break;case ye:n+=ye+we;break;default:n+=o}}return n}function Ie(e){return e+ye+ve}function Ee(e){var t=e.length;if(b(t>=2,"Invalid path "+e),2===t)return b(e.charAt(0)===ye&&e.charAt(1)===ve,"Non-empty path "+e+" had length 2"),le.EMPTY_PATH;for(var n=t-2,r=[],i="",o=0;o<t;){var a=e.indexOf(ye,o);switch((a<0||a>n)&&v('Invalid encoded resource path: "'+e+'"'),e.charAt(a+1)){case ve:var s=e.substring(o,a),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case be:i+=e.substring(o,a),i+="\0";break;case we:i+=e.substring(o,a+1);break;default:v('Invalid encoded resource path: "'+e+'"')}o=a+2}return new le(r)}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ce=function(){function e(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new I(S.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new I(S.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new I(S.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new I(S.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}return e.now=function(){return e.fromMillis(Date.now())},e.fromDate=function(t){return e.fromMillis(t.getTime())},e.fromMillis=function(t){var n=Math.floor(t/1e3);return new e(n,1e6*(t-1e3*n))},e.prototype.toDate=function(){return new Date(this.toMillis())},e.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},e.prototype._compareTo=function(e){return this.seconds===e.seconds?X(this.nanoseconds,e.nanoseconds):X(this.seconds,e.seconds)},e.prototype.isEqual=function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds},e.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},e}(),_e=function(){function e(e){this.timestamp=e}return e.fromMicroseconds=function(t){var n=Math.floor(t/1e6);return new e(new Ce(n,t%1e6*1e3))},e.fromTimestamp=function(t){return new e(t)},e.forDeletedDoc=function(){return e.MIN},e.prototype.compareTo=function(e){return this.timestamp._compareTo(e.timestamp)},e.prototype.isEqual=function(e){return this.timestamp.isEqual(e.timestamp)},e.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},e.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},e.prototype.toTimestamp=function(){return this.timestamp},e.MIN=new e(new Ce(0,0)),e}(),De=function(){function e(e,t){this.comparator=e,this.root=t||Ne.EMPTY}return e.prototype.insert=function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Ne.BLACK,null,null))},e.prototype.remove=function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Ne.BLACK,null,null))},e.prototype.get=function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null},e.prototype.indexOf=function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1},e.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(e.prototype,"size",{get:function(){return this.root.size},enumerable:!0,configurable:!0}),e.prototype.minKey=function(){return this.root.minKey()},e.prototype.maxKey=function(){return this.root.maxKey()},e.prototype.inorderTraversal=function(e){return this.root.inorderTraversal(e)},e.prototype.forEach=function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))},e.prototype.toString=function(){var e=[];return this.inorderTraversal((function(t,n){return e.push(t+":"+n),!1})),"{"+e.join(", ")+"}"},e.prototype.reverseTraversal=function(e){return this.root.reverseTraversal(e)},e.prototype.getIterator=function(){return new ke(this.root,null,this.comparator,!1)},e.prototype.getIteratorFrom=function(e){return new ke(this.root,e,this.comparator,!1)},e.prototype.getReverseIterator=function(){return new ke(this.root,null,this.comparator,!0)},e.prototype.getReverseIteratorFrom=function(e){return new ke(this.root,e,this.comparator,!0)},e}(),ke=function(){function e(e,t,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!e.isEmpty();)if(i=t?n(e.key,t):1,r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}return e.prototype.getNext=function(){b(this.nodeStack.length>0,"getNext() called on iterator when hasNext() is false.");var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t},e.prototype.hasNext=function(){return this.nodeStack.length>0},e.prototype.peek=function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}},e}(),Ne=function(){function e(t,n,r,i,o){this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=o?o:e.EMPTY,this.size=this.left.size+1+this.right.size}return e.prototype.copy=function(t,n,r,i,o){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},e.prototype.isEmpty=function(){return!1},e.prototype.inorderTraversal=function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)},e.prototype.reverseTraversal=function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)},e.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},e.prototype.minKey=function(){return this.min().key},e.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},e.prototype.insert=function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()},e.prototype.removeMin=function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()},e.prototype.remove=function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()},e.prototype.isRed=function(){return this.color},e.prototype.fixUp=function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e},e.prototype.moveRedLeft=function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e},e.prototype.moveRedRight=function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e},e.prototype.rotateLeft=function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},e.prototype.rotateRight=function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},e.prototype.colorFlip=function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)},e.prototype.checkMaxDepth=function(){var e=this.check();return Math.pow(2,e)<=this.size+1},e.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw v("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed())throw v("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check();if(e!==this.right.check())throw v("Black depths differ");return e+(this.isRed()?0:1)},e.EMPTY=null,e.RED=!0,e.BLACK=!1,e}(),Ae=function(){function e(){this.size=0}return Object.defineProperty(e.prototype,"key",{get:function(){throw v("LLRBEmptyNode has no key.")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){throw v("LLRBEmptyNode has no value.")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){throw v("LLRBEmptyNode has no color.")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){throw v("LLRBEmptyNode has no left child.")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){throw v("LLRBEmptyNode has no right child.")},enumerable:!0,configurable:!0}),e.prototype.copy=function(e,t,n,r,i){return this},e.prototype.insert=function(e,t,n){return new Ne(e,t)},e.prototype.remove=function(e,t){return this},e.prototype.isEmpty=function(){return!0},e.prototype.inorderTraversal=function(e){return!1},e.prototype.reverseTraversal=function(e){return!1},e.prototype.minKey=function(){return null},e.prototype.maxKey=function(){return null},e.prototype.isRed=function(){return!1},e.prototype.checkMaxDepth=function(){return!0},e.prototype.check=function(){return 0},e}();
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ne.EMPTY=new Ae;
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var xe=function(){function e(e){this.comparator=e,this.data=new De(this.comparator)}return e.fromMapKeys=function(t){var n=new e(t.comparator);return t.forEach((function(e){n=n.add(e)})),n},e.prototype.has=function(e){return null!==this.data.get(e)},e.prototype.first=function(){return this.data.minKey()},e.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(e.prototype,"size",{get:function(){return this.data.size},enumerable:!0,configurable:!0}),e.prototype.indexOf=function(e){return this.data.indexOf(e)},e.prototype.forEach=function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))},e.prototype.forEachInRange=function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}},e.prototype.forEachWhile=function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();){if(!e(n.getNext().key))return}},e.prototype.firstAfterOrEqual=function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null},e.prototype.getIterator=function(){return new Me(this.data.getIterator())},e.prototype.getIteratorFrom=function(e){return new Me(this.data.getIteratorFrom(e))},e.prototype.add=function(e){return this.copy(this.data.remove(e).insert(e,!0))},e.prototype.delete=function(e){return this.has(e)?this.copy(this.data.remove(e)):this},e.prototype.isEmpty=function(){return this.data.isEmpty()},e.prototype.unionWith=function(e){var t=this;return e.forEach((function(e){t=t.add(e)})),t},e.prototype.isEqual=function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},e.prototype.toArray=function(){var e=[];return this.forEach((function(t){e.push(t)})),e},e.prototype.toString=function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"},e.prototype.copy=function(t){var n=new e(this.comparator);return n.data=t,n},e}(),Me=function(){function e(e){this.iter=e}return e.prototype.getNext=function(){return this.iter.getNext().key},e.prototype.hasNext=function(){return this.iter.hasNext()},e}(),Le=new De(fe.comparator);function Pe(){return Le}function Oe(){return Pe()}var Re=new De(fe.comparator);function je(){return Re}var Be=new De(fe.comparator);function Fe(){return Be}var Ve=new xe(fe.comparator);function qe(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=Ve,r=0,i=e;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var Ue=new xe(X);function We(){return Ue}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ze=function(){function e(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r,b(r.length>0,"Cannot create an empty mutation batch")}return e.prototype.applyToRemoteDocument=function(e,t,n){t&&b(t.key.isEqual(e),"applyToRemoteDocument: key "+e+" should match maybeDoc key\n        "+t.key);var r=n.mutationResults;b(r.length===this.mutations.length,"Mismatch between mutations length\n      ("+this.mutations.length+") and mutation results length\n      ("+r.length+").");for(var i=0;i<this.mutations.length;i++){var o=this.mutations[i];if(o.key.isEqual(e)){var a=r[i];t=o.applyToRemoteDocument(t,a)}}return t},e.prototype.applyToLocalView=function(e,t){t&&b(t.key.isEqual(e),"applyToLocalDocument: key "+e+" should match maybeDoc key\n        "+t.key);for(var n=0,r=this.baseMutations;n<r.length;n++){(s=r[n]).key.isEqual(e)&&(t=s.applyToLocalView(t,t,this.localWriteTime))}for(var i=t,o=0,a=this.mutations;o<a.length;o++){var s;(s=a[o]).key.isEqual(e)&&(t=s.applyToLocalView(t,i,this.localWriteTime))}return t},e.prototype.applyToLocalDocumentSet=function(e){var t=this,n=e;return this.mutations.forEach((function(r){var i=t.applyToLocalView(r.key,e.get(r.key));i&&(n=n.insert(r.key,i))})),n},e.prototype.keys=function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),qe())},e.prototype.isEqual=function(e){return this.batchId===e.batchId&&$(this.mutations,e.mutations)&&$(this.baseMutations,e.baseMutations)},e}(),Ke=function(){function e(e,t,n,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.streamToken=r,this.docVersions=i}return e.from=function(t,n,r,i){b(t.mutations.length===r.length,"Mutations sent "+t.mutations.length+" must equal results received "+r.length);for(var o=Fe(),a=t.mutations,s=0;s<a.length;s++)o=o.insert(a[s].key,r[s].version);return new e(t,n,r,i,o)},e}(),Ge=function(){function e(e){var t=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((function(e){t.isDone=!0,t.result=e,t.nextCallback&&t.nextCallback(e)}),(function(e){t.isDone=!0,t.error=e,t.catchCallback&&t.catchCallback(e)}))}return e.prototype.catch=function(e){return this.next(void 0,e)},e.prototype.next=function(t,n){var r=this;return this.callbackAttached&&v("Called next() or catch() twice for PersistencePromise"),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))},e.prototype.toPromise=function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))},e.prototype.wrapUserFunction=function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}},e.prototype.wrapSuccess=function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)},e.prototype.wrapFailure=function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)},e.resolve=function(t){return new e((function(e,n){e(t)}))},e.reject=function(t){return new e((function(e,n){n(t)}))},e.waitFor=function(t){return new e((function(e,n){var r=0,i=0,o=!1;t.forEach((function(t){++r,t.next((function(){++i,o&&i===r&&e()}),(function(e){return n(e)}))})),o=!0,i===r&&e()}))},e.or=function(t){for(var n=e.resolve(!1),r=function(t){n=n.next((function(n){return n?e.resolve(n):t()}))},i=0,o=t;i<o.length;i++){r(o[i])}return n},e.forEach=function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)},e}(),Qe="SimpleDb",He=function(){function t(e){this.db=e,12.2===t.getIOSVersion(u.getUA())&&g("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.openOrCreate=function(e,n,r){return b(t.isAvailable(),"IndexedDB not supported in current environment."),m(Qe,"Opening database:",e),new Ge((function(i,o){var a=window.indexedDB.open(e,n);a.onsuccess=function(e){var n=e.target.result;i(new t(n))},a.onblocked=function(){o(new I(S.FAILED_PRECONDITION,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=function(e){var t=e.target.error;"VersionError"===t.name?o(new I(S.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o(t)},a.onupgradeneeded=function(t){m(Qe,'Database "'+e+'" requires upgrade from version:',t.oldVersion);var n=t.target.result;r.createOrUpgrade(n,a.transaction,t.oldVersion,rn).next((function(){m(Qe,"Database upgrade to version "+rn+" complete")}))}})).toPromise()},t.delete=function(e){return m(Qe,"Removing database:",e),$e(window.indexedDB.deleteDatabase(e)).toPromise()},t.isAvailable=function(){if("undefined"==typeof window||null==window.indexedDB)return!1;if(t.isMockPersistence())return!0;if(void 0===window.navigator)return!1;var e=u.getUA(),n=t.getIOSVersion(e),r=0<n&&n<10,i=t.getAndroidVersion(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.isMockPersistence=function(){var t;return void 0!==e&&"YES"===(null===(t=Object({GOOGLE_CLIENT_ID:"344446892746-36ebkcl04viq3poe73mb3dkhr79lspqk.apps.googleusercontent.com",GOOGLE_API_KEY_DEV:"AIzaSyBuHx9BXXCRFSKiLzjinZgK_2ys58ynGew",GOOGLE_API_KEY_PROD:"AIzaSyDiGyyxn_sPAvr2Mox44J6lPurG0XhQa7c"}))||void 0===t?void 0:t.USE_MOCK_PERSISTENCE)},t.getStore=function(e,t){return e.store(t)},t.getIOSVersion=function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.getAndroidVersion=function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.setVersionChangeListener=function(e){this.db.onversionchange=function(t){return e(t)}},t.prototype.runTransaction=function(e,t,n){return a.__awaiter(this,void 0,void 0,(function(){var r,i,o,s,u,c;return a.__generator(this,(function(l){switch(l.label){case 0:r=e.startsWith("readonly"),i=e.endsWith("idempotent"),o=0,s=function(){var e,s,c,l;return a.__generator(this,(function(a){switch(a.label){case 0:++o,e=Je.open(u.db,r?"readonly":"readwrite",t),a.label=1;case 1:return a.trys.push([1,3,,4]),(s=n(e).catch((function(t){return e.abort(t),Ge.reject(t)})).toPromise()).catch((function(){})),[4,e.completionPromise];case 2:return a.sent(),[2,{value:s}];case 3:return c=a.sent(),l=i&&"FirebaseError"!==c.name&&o<3,m(Qe,"Transaction failed with error: %s. Retrying: %s.",c.message,l),l?[3,4]:[2,{value:Promise.reject(c)}];case 4:return[2]}}))},u=this,l.label=1;case 1:return[5,s()];case 2:return"object"==typeof(c=l.sent())?[2,c.value]:[3,1];case 3:return[2]}}))}))},t.prototype.close=function(){this.db.close()},t}(),Ye=function(){function e(e){this.dbCursor=e,this.shouldStop=!1,this.nextKey=null}return Object.defineProperty(e.prototype,"isDone",{get:function(){return this.shouldStop},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"skipToKey",{get:function(){return this.nextKey},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cursor",{set:function(e){this.dbCursor=e},enumerable:!0,configurable:!0}),e.prototype.done=function(){this.shouldStop=!0},e.prototype.skip=function(e){this.nextKey=e},e.prototype.delete=function(){return $e(this.dbCursor.delete())},e}(),Je=function(){function e(e){var t=this;this.transaction=e,this.aborted=!1,this.completionDeferred=new pe,this.transaction.oncomplete=function(){t.completionDeferred.resolve()},this.transaction.onabort=function(){e.error?t.completionDeferred.reject(e.error):t.completionDeferred.resolve()},this.transaction.onerror=function(e){var n=et(e.target.error);t.completionDeferred.reject(n)}}return e.open=function(t,n,r){return new e(t.transaction(r,n))},Object.defineProperty(e.prototype,"completionPromise",{get:function(){return this.completionDeferred.promise},enumerable:!0,configurable:!0}),e.prototype.abort=function(e){e&&this.completionDeferred.reject(e),this.aborted||(m(Qe,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},e.prototype.store=function(e){var t=this.transaction.objectStore(e);return b(!!t,"Object store not part of transaction: "+e),new Xe(t)},e}(),Xe=function(){function e(e){this.store=e}return e.prototype.put=function(e,t){var n;return void 0!==t?(m(Qe,"PUT",this.store.name,e,t),n=this.store.put(t,e)):(m(Qe,"PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),$e(n)},e.prototype.add=function(e){return m(Qe,"ADD",this.store.name,e,e),$e(this.store.add(e))},e.prototype.get=function(e){var t=this;return $e(this.store.get(e)).next((function(n){return void 0===n&&(n=null),m(Qe,"GET",t.store.name,e,n),n}))},e.prototype.delete=function(e){return m(Qe,"DELETE",this.store.name,e),$e(this.store.delete(e))},e.prototype.count=function(){return m(Qe,"COUNT",this.store.name),$e(this.store.count())},e.prototype.loadAll=function(e,t){var n=this.cursor(this.options(e,t)),r=[];return this.iterateCursor(n,(function(e,t){r.push(t)})).next((function(){return r}))},e.prototype.deleteAll=function(e,t){m(Qe,"DELETE ALL",this.store.name);var n=this.options(e,t);n.keysOnly=!1;var r=this.cursor(n);return this.iterateCursor(r,(function(e,t,n){return n.delete()}))},e.prototype.iterate=function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.iterateCursor(r,t)},e.prototype.iterateSerial=function(e){var t=this.cursor({});return new Ge((function(n,r){t.onerror=function(e){var t=et(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))},e.prototype.iterateCursor=function(e,t){var n=[];return new Ge((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var o=new Ye(i),a=t(i.primaryKey,i.value,o);if(a instanceof Ge){var s=a.catch((function(e){return o.done(),Ge.reject(e)}));n.push(s)}o.isDone?r():null===o.skipToKey?i.continue():i.continue(o.skipToKey)}else r()}})).next((function(){return Ge.waitFor(n)}))},e.prototype.options=function(e,t){var n=void 0;return void 0!==e&&("string"==typeof e?n=e:(b(void 0===t,"3rd argument must not be defined if 2nd is a range."),t=e)),{index:n,range:t}},e.prototype.cursor=function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.keysOnly?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)},e}();function $e(e){return new Ge((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=et(e.target.error);n(t)}}))}var Ze=!1;function et(e){var t=He.getIOSVersion(u.getUA());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new I("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Ze||(Ze=!0,setTimeout((function(){throw r}),0)),r}}return e}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tt=function(){function e(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.documentKeysByBatchId={}}return e.forUser=function(t,n,r,i){return b(""!==t.uid,"UserID must not be an empty string."),new e(t.isAuthenticated()?t.uid:"",n,r,i)},e.prototype.checkEmpty=function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ot(e).iterate({index:cn.userMutationsIndex,range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))},e.prototype.acknowledgeBatch=function(e,t,n){return this.getMutationQueueMetadata(e).next((function(t){return t.lastStreamToken=it(n),st(e).put(t)}))},e.prototype.getLastStreamToken=function(e){return this.getMutationQueueMetadata(e).next((function(e){return e.lastStreamToken}))},e.prototype.setLastStreamToken=function(e,t){return this.getMutationQueueMetadata(e).next((function(n){return n.lastStreamToken=it(t),st(e).put(n)}))},e.prototype.addMutationBatch=function(e,t,n,r){var i=this,o=at(e),a=ot(e);return a.add({}).next((function(s){b("number"==typeof s,"Auto-generated key is not a number");for(var u=new ze(s,t,n,r),c=i.serializer.toDbMutationBatch(i.userId,u),l=[],h=new xe((function(e,t){return X(e.canonicalString(),t.canonicalString())})),d=0,f=r;d<f.length;d++){var p=f[d],m=ln.key(i.userId,p.key.path,s);h=h.add(p.key.path.popLast()),l.push(a.put(c)),l.push(o.put(m,ln.PLACEHOLDER))}return h.forEach((function(t){l.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.documentKeysByBatchId[s]=u.keys()})),Ge.waitFor(l).next((function(){return u}))}))},e.prototype.lookupMutationBatch=function(e,t){var n=this;return ot(e).get(t).next((function(e){return e?(b(e.userId===n.userId,"Unexpected user '"+e.userId+"' for mutation batch "+t),n.serializer.fromDbMutationBatch(e)):null}))},e.prototype.lookupMutationKeys=function(e,t){var n=this;return this.documentKeysByBatchId[t]?Ge.resolve(this.documentKeysByBatchId[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.documentKeysByBatchId[t]=r,r}return null}))},e.prototype.getNextMutationBatchAfterBatchId=function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return ot(e).iterate({index:cn.userMutationsIndex,range:i},(function(e,t,i){t.userId===n.userId&&(b(t.batchId>=r,"Should have found mutation after "+r),o=n.serializer.fromDbMutationBatch(t)),i.done()})).next((function(){return o}))},e.prototype.getHighestUnacknowledgedBatchId=function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return ot(e).iterate({index:cn.userMutationsIndex,range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))},e.prototype.getAllMutationBatches=function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ot(e).loadAll(cn.userMutationsIndex,n).next((function(e){return e.map((function(e){return t.serializer.fromDbMutationBatch(e)}))}))},e.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,t){var n=this,r=ln.prefixForPath(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return at(e).iterate({range:i},(function(r,i,a){var s=r[0],u=r[1],c=r[2],l=Ee(u);if(s===n.userId&&t.path.isEqual(l))return ot(e).get(c).next((function(e){if(!e)throw v("Dangling document-mutation reference found: "+r+" which points to "+c);b(e.userId===n.userId,"Unexpected user '"+e.userId+"' for mutation batch "+c),o.push(n.serializer.fromDbMutationBatch(e))}));a.done()})).next((function(){return o}))},e.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,t){var n=this,r=new xe(X),i=[];return t.forEach((function(t){var o=ln.prefixForPath(n.userId,t.path),a=IDBKeyRange.lowerBound(o),s=at(e).iterate({range:a},(function(e,i,o){var a=e[0],s=e[1],u=e[2],c=Ee(s);a===n.userId&&t.path.isEqual(c)?r=r.add(u):o.done()}));i.push(s)})),Ge.waitFor(i).next((function(){return n.lookupMutationBatches(e,r)}))},e.prototype.getAllMutationBatchesAffectingQuery=function(e,t){var n=this;b(!t.isDocumentQuery(),"Document queries shouldn't go down this path"),b(!t.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var r=t.path,i=r.length+1,o=ln.prefixForPath(this.userId,r),a=IDBKeyRange.lowerBound(o),s=new xe(X);return at(e).iterate({range:a},(function(e,t,o){var a=e[0],u=e[1],c=e[2],l=Ee(u);a===n.userId&&r.isPrefixOf(l)?l.length===i&&(s=s.add(c)):o.done()})).next((function(){return n.lookupMutationBatches(e,s)}))},e.prototype.lookupMutationBatches=function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(ot(e).get(t).next((function(e){if(null===e)throw v("Dangling document-mutation reference found, which points to "+t);b(e.userId===n.userId,"Unexpected user '"+e.userId+"' for mutation batch "+t),r.push(n.serializer.fromDbMutationBatch(e))})))})),Ge.waitFor(i).next((function(){return r}))},e.prototype.removeMutationBatch=function(e,t){var n=this;return rt(e.simpleDbTransaction,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.removeCachedMutationKeys(t.batchId)})),Ge.forEach(r,(function(t){return n.referenceDelegate.removeMutationReference(e,t)}))}))},e.prototype.removeCachedMutationKeys=function(e){delete this.documentKeysByBatchId[e]},e.prototype.performConsistencyCheck=function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return Ge.resolve();var r=IDBKeyRange.lowerBound(ln.prefixForUser(t.userId)),i=[];return at(e).iterate({range:r},(function(e,n,r){if(e[0]===t.userId){var o=Ee(e[1]);i.push(o)}else r.done()})).next((function(){b(0===i.length,"Document leak -- detected dangling mutation references when queue is empty. Dangling keys: "+i.map((function(e){return e.canonicalString()})))}))}))},e.prototype.containsKey=function(e,t){return nt(e,this.userId,t)},e.prototype.getMutationQueueMetadata=function(e){var t=this;return st(e).get(this.userId).next((function(e){return e||new un(t.userId,-1,"")}))},e}();function nt(e,t,n){var r=ln.prefixForPath(t,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),a=!1;return at(e).iterate({range:o,keysOnly:!0},(function(e,n,r){var o=e[0],s=e[1];e[2];o===t&&s===i&&(a=!0),r.done()})).next((function(){return a}))}function rt(e,t,n){var r=e.store(cn.store),i=e.store(ln.store),o=[],a=IDBKeyRange.only(n.batchId),s=0,u=r.iterate({range:a},(function(e,t,n){return s++,n.delete()}));o.push(u.next((function(){b(1===s,"Dangling document-mutation reference found: Missing batch "+n.batchId)})));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var d=h[l],f=ln.key(t,d.key.path,n.batchId);o.push(i.delete(f)),c.push(d.key)}return Ge.waitFor(o).next((function(){return c}))}function it(e){return e instanceof Uint8Array?(b(He.isMockPersistence(),"Persisting non-string stream tokens is only supported with mock persistence."),e.toString()):e}function ot(e){return qn.getStore(e,cn.store)}function at(e){return qn.getStore(e,ln.store)}function st(e){return qn.getStore(e,un.store)}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ut,ct=1;!function(e){e[e.QueryCache=0]="QueryCache",e[e.SyncEngine=1]="SyncEngine"}(ut||(ut={}));var lt=function(){function e(e,t){this.generatorId=e,b((e&ct)===e,"Generator ID "+e+" contains more than "+ct+" reserved bits"),this.seek(void 0!==t?t:this.generatorId)}return e.prototype.next=function(){var e=this.nextId;return this.nextId+=1<<ct,e},e.prototype.after=function(e){return this.seek(e+(1<<ct)),this.next()},e.prototype.seek=function(e){b((e&ct)===this.generatorId,"Cannot supply target ID from different generator ID"),this.nextId=e},e.forTargetCache=function(){return new e(ut.QueryCache,2)},e.forSyncEngine=function(){return new e(ut.SyncEngine)},e}(),ht=function(){function e(e,t){this.referenceDelegate=e,this.serializer=t,this.targetIdGenerator=lt.forTargetCache()}return e.prototype.allocateTargetId=function(e){var t=this;return this.retrieveMetadata(e).next((function(n){return n.highestTargetId=t.targetIdGenerator.after(n.highestTargetId),t.saveMetadata(e,n).next((function(){return n.highestTargetId}))}))},e.prototype.getLastRemoteSnapshotVersion=function(e){return this.retrieveMetadata(e).next((function(e){return _e.fromTimestamp(new Ce(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))},e.prototype.getHighestSequenceNumber=function(e){return pt(e.simpleDbTransaction)},e.prototype.setTargetsMetadata=function(e,t,n){var r=this;return this.retrieveMetadata(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.saveMetadata(e,i)}))},e.prototype.addTargetData=function(e,t){var n=this;return this.saveTargetData(e,t).next((function(){return n.retrieveMetadata(e).next((function(r){return r.targetCount+=1,n.updateMetadataFromTargetData(t,r),n.saveMetadata(e,r)}))}))},e.prototype.updateTargetData=function(e,t){return this.saveTargetData(e,t)},e.prototype.removeTargetData=function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return dt(e).delete(t.targetId)})).next((function(){return n.retrieveMetadata(e)})).next((function(t){return b(t.targetCount>0,"Removing from an empty target cache"),t.targetCount-=1,n.saveMetadata(e,t)}))},e.prototype.removeTargets=function(e,t,n){var r=this,i=0,o=[];return dt(e).iterate((function(a,s){var u=r.serializer.fromDbTarget(s);u.sequenceNumber<=t&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(e,u)))})).next((function(){return Ge.waitFor(o)})).next((function(){return i}))},e.prototype.forEachTarget=function(e,t){var n=this;return dt(e).iterate((function(e,r){var i=n.serializer.fromDbTarget(r);t(i)}))},e.prototype.retrieveMetadata=function(e){return ft(e.simpleDbTransaction)},e.prototype.saveMetadata=function(e,t){return(n=e,qn.getStore(n,yn.store)).put(yn.key,t);var n},e.prototype.saveTargetData=function(e,t){return dt(e).put(this.serializer.toDbTarget(t))},e.prototype.updateMetadataFromTargetData=function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n},e.prototype.getTargetCount=function(e){return this.retrieveMetadata(e).next((function(e){return e.targetCount}))},e.prototype.getTargetData=function(e,t){var n=this,r=t.canonicalId(),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return dt(e).iterate({range:i,index:mn.queryTargetsIndexName},(function(e,r,i){var a=n.serializer.fromDbTarget(r);t.isEqual(a.target)&&(o=a,i.done())})).next((function(){return o}))},e.prototype.addMatchingKeys=function(e,t,n){var r=this,i=[],o=mt(e);return t.forEach((function(t){var a=Te(t.path);i.push(o.put(new gn(n,a))),i.push(r.referenceDelegate.addReference(e,t))})),Ge.waitFor(i)},e.prototype.removeMatchingKeys=function(e,t,n){var r=this,i=mt(e);return Ge.forEach(t,(function(t){var o=Te(t.path);return Ge.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(e,t)])}))},e.prototype.removeMatchingKeysForTargetId=function(e,t){var n=mt(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)},e.prototype.getMatchingKeysForTargetId=function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=mt(e),i=qe();return r.iterate({range:n,keysOnly:!0},(function(e,t,n){var r=Ee(e[1]),o=new fe(r);i=i.add(o)})).next((function(){return i}))},e.prototype.containsKey=function(e,t){var n=Te(t.path),r=IDBKeyRange.bound([n],[Z(n)],!1,!0),i=0;return mt(e).iterate({index:gn.documentTargetsIndex,keysOnly:!0,range:r},(function(e,t,n){var r=e[0];e[1];0!==r&&(i++,n.done())})).next((function(){return i>0}))},e.prototype.getTargetDataForTarget=function(e,t){var n=this;return dt(e).get(t).next((function(e){return e?n.serializer.fromDbTarget(e):null}))},e}();
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dt(e){return qn.getStore(e,mn.store)}function ft(e){return He.getStore(e,yn.store).get(yn.key).next((function(e){return b(null!==e,"Missing metadata row."),e}))}function pt(e){return ft(e).next((function(e){return e.highestListenSequenceNumber}))}function mt(e){return qn.getStore(e,gn.store)}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gt,yt=function(){function e(e){this.fields=e}return e.fromSet=function(t){return new e(t)},e.fromArray=function(t){var n=new xe(de.comparator);return t.forEach((function(e){return n=n.add(e)})),new e(n)},e.prototype.covers=function(e){var t=!1;return this.fields.forEach((function(n){n.isPrefixOf(e)&&(t=!0)})),t},e.prototype.isEqual=function(e){return this.fields.isEqual(e.fields)},e}(),vt=function(){function e(e,t){this.field=e,this.transform=t}return e.prototype.isEqual=function(e){return this.field.isEqual(e.field)&&this.transform.isEqual(e.transform)},e}(),bt=function(e,t){this.version=e,this.transformResults=t};!function(e){e[e.Set=0]="Set",e[e.Patch=1]="Patch",e[e.Transform=2]="Transform",e[e.Delete=3]="Delete"}(gt||(gt={}));var wt,Tt,St=function(){function e(e,t){this.updateTime=e,this.exists=t,b(void 0===e||void 0===t,'Precondition can specify "exists" or "updateTime" but not both')}return e.exists=function(t){return new e(void 0,t)},e.updateTime=function(t){return new e(t)},Object.defineProperty(e.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!0,configurable:!0}),e.prototype.isValidFor=function(e){return void 0!==this.updateTime?e instanceof Kt&&e.version.isEqual(this.updateTime):void 0!==this.exists?this.exists===e instanceof Kt:(b(this.isNone,"Precondition should be empty"),!0)},e.prototype.isEqual=function(e){return t=this.updateTime,n=e.updateTime,(null!=t?!(!n||!t.isEqual(n)):t===n)&&this.exists===e.exists;var t,n},e.NONE=new e,e}(),It=function(){function e(){}return e.prototype.verifyKeyMatches=function(e){null!=e&&b(e.key.isEqual(this.key),"Can only apply a mutation to a document with the same key")},e.getPostMutationVersion=function(e){return e instanceof Kt?e.version:_e.MIN},e}(),Et=function(e){function t(t,n,r){var i=e.call(this)||this;return i.key=t,i.value=n,i.precondition=r,i.type=gt.Set,i}return a.__extends(t,e),t.prototype.applyToRemoteDocument=function(e,t){this.verifyKeyMatches(e),b(null==t.transformResults,"Transform results received by SetMutation.");var n=t.version;return new Kt(this.key,n,{hasCommittedMutations:!0},this.value)},t.prototype.applyToLocalView=function(e,t,n){if(this.verifyKeyMatches(e),!this.precondition.isValidFor(e))return e;var r=It.getPostMutationVersion(e);return new Kt(this.key,r,{hasLocalMutations:!0},this.value)},t.prototype.extractBaseValue=function(e){return null},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.value.isEqual(e.value)&&this.precondition.isEqual(e.precondition)},t}(It),Ct=function(e){function t(t,n,r,i){var o=e.call(this)||this;return o.key=t,o.data=n,o.fieldMask=r,o.precondition=i,o.type=gt.Patch,o}return a.__extends(t,e),t.prototype.applyToRemoteDocument=function(e,t){if(this.verifyKeyMatches(e),b(null==t.transformResults,"Transform results received by PatchMutation."),!this.precondition.isValidFor(e))return new Qt(this.key,t.version);var n=this.patchDocument(e);return new Kt(this.key,t.version,{hasCommittedMutations:!0},n)},t.prototype.applyToLocalView=function(e,t,n){if(this.verifyKeyMatches(e),!this.precondition.isValidFor(e))return e;var r=It.getPostMutationVersion(e),i=this.patchDocument(e);return new Kt(this.key,r,{hasLocalMutations:!0},i)},t.prototype.extractBaseValue=function(e){return null},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.fieldMask.isEqual(e.fieldMask)&&this.precondition.isEqual(e.precondition)},t.prototype.patchDocument=function(e){var t;return t=e instanceof Kt?e.data():Ut.EMPTY,this.patchObject(t)},t.prototype.patchObject=function(e){var t=this;return this.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=t.data.field(n);e=null!==r?e.set(n,r):e.delete(n)}})),e},t}(It),_t=function(e){function t(t,n){var r=e.call(this)||this;return r.key=t,r.fieldTransforms=n,r.type=gt.Transform,r.precondition=St.exists(!0),r}return a.__extends(t,e),t.prototype.applyToRemoteDocument=function(e,t){if(this.verifyKeyMatches(e),b(null!=t.transformResults,"Transform results missing for TransformMutation."),!this.precondition.isValidFor(e))return new Qt(this.key,t.version);var n=this.requireDocument(e),r=this.serverTransformResults(e,t.transformResults),i=t.version,o=this.transformObject(n.data(),r);return new Kt(this.key,i,{hasCommittedMutations:!0},o)},t.prototype.applyToLocalView=function(e,t,n){if(this.verifyKeyMatches(e),!this.precondition.isValidFor(e))return e;var r=this.requireDocument(e),i=this.localTransformResults(n,e,t),o=this.transformObject(r.data(),i);return new Kt(this.key,r.version,{hasLocalMutations:!0},o)},t.prototype.extractBaseValue=function(e){for(var t=null,n=0,r=this.fieldTransforms;n<r.length;n++){var i=r[n],o=e instanceof Kt?e.field(i.field):void 0,a=i.transform.computeBaseValue(o||null);null!=a&&(t=null==t?Ut.EMPTY.set(i.field,a):t.set(i.field,a))}return t},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&$(this.fieldTransforms,e.fieldTransforms)&&this.precondition.isEqual(e.precondition)},t.prototype.requireDocument=function(e){return b(e instanceof Kt,"Unknown MaybeDocument type "+e),b(e.key.isEqual(this.key),"Can only transform a document with the same key"),e},t.prototype.serverTransformResults=function(e,t){var n=[];b(this.fieldTransforms.length===t.length,"server transform result count ("+t.length+") should match field transform count ("+this.fieldTransforms.length+")");for(var r=0;r<t.length;r++){var i=this.fieldTransforms[r],o=i.transform,a=null;e instanceof Kt&&(a=e.field(i.field)),n.push(o.applyToRemoteDocument(a,t[r]))}return n},t.prototype.localTransformResults=function(e,t,n){for(var r=[],i=0,o=this.fieldTransforms;i<o.length;i++){var a=o[i],s=a.transform,u=null;t instanceof Kt&&(u=t.field(a.field)),null===u&&n instanceof Kt&&(u=n.field(a.field)),r.push(s.applyToLocalView(u,e))}return r},t.prototype.transformObject=function(e,t){b(t.length===this.fieldTransforms.length,"TransformResults length mismatch.");for(var n=0;n<this.fieldTransforms.length;n++){var r=this.fieldTransforms[n].field;e=e.set(r,t[n])}return e},t}(It),Dt=function(e){function t(t,n){var r=e.call(this)||this;return r.key=t,r.precondition=n,r.type=gt.Delete,r}return a.__extends(t,e),t.prototype.applyToRemoteDocument=function(e,t){return this.verifyKeyMatches(e),b(null==t.transformResults,"Transform results received by DeleteMutation."),new Gt(this.key,t.version,{hasCommittedMutations:!0})},t.prototype.applyToLocalView=function(e,t,n){return this.verifyKeyMatches(e),this.precondition.isValidFor(e)?(e&&b(e.key.isEqual(this.key),"Can only apply mutation to document with same key"),new Gt(this.key,_e.forDeletedDoc())):e},t.prototype.extractBaseValue=function(e){return null},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.precondition.isEqual(e.precondition)},t}(It);!function(e){e[e.NullValue=0]="NullValue",e[e.BooleanValue=1]="BooleanValue",e[e.NumberValue=2]="NumberValue",e[e.TimestampValue=3]="TimestampValue",e[e.StringValue=4]="StringValue",e[e.BlobValue=5]="BlobValue",e[e.RefValue=6]="RefValue",e[e.GeoPointValue=7]="GeoPointValue",e[e.ArrayValue=8]="ArrayValue",e[e.ObjectValue=9]="ObjectValue"}(wt||(wt={})),function(e){e[e.Default=0]="Default",e[e.Estimate=1]="Estimate",e[e.Previous=2]="Previous"}(Tt||(Tt={}));var kt=function(){function e(e,t){this.serverTimestampBehavior=e,this.timestampsInSnapshots=t}return e.fromSnapshotOptions=function(t,n){switch(t.serverTimestamps){case"estimate":return new e(Tt.Estimate,n);case"previous":return new e(Tt.Previous,n);case"none":case void 0:return new e(Tt.Default,n);default:return v("fromSnapshotOptions() called with invalid options.")}},e}(),Nt=function(){function e(){}return e.prototype.toString=function(){var e=this.value();return null===e?"null":e.toString()},e.prototype.defaultCompareTo=function(e){return b(this.typeOrder!==e.typeOrder,"Default compareTo should not be used for values of same type."),X(this.typeOrder,e.typeOrder)},e}(),At=function(e){function t(){var t=e.call(this)||this;return t.typeOrder=wt.NullValue,t.internalValue=null,t}return a.__extends(t,e),t.prototype.value=function(e){return null},t.prototype.isEqual=function(e){return e instanceof t},t.prototype.compareTo=function(e){return e instanceof t?0:this.defaultCompareTo(e)},t.INSTANCE=new t,t}(Nt),xt=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=wt.BooleanValue,n}return a.__extends(t,e),t.prototype.value=function(e){return this.internalValue},t.prototype.isEqual=function(e){return e instanceof t&&this.internalValue===e.internalValue},t.prototype.compareTo=function(e){return e instanceof t?X(this,e):this.defaultCompareTo(e)},t.of=function(e){return e?t.TRUE:t.FALSE},t.TRUE=new t(!0),t.FALSE=new t(!1),t}(Nt),Mt=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=wt.NumberValue,n}return a.__extends(t,e),t.prototype.value=function(e){return this.internalValue},t.prototype.compareTo=function(e){return e instanceof t?(n=this.internalValue,r=e.internalValue,n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1):this.defaultCompareTo(e);var n,r},t}(Nt);function Lt(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}var Pt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.isEqual=function(e){return e instanceof t&&Lt(this.internalValue,e.internalValue)},t}(Mt),Ot=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.isEqual=function(e){return e instanceof t&&Lt(this.internalValue,e.internalValue)},t.NAN=new t(NaN),t.POSITIVE_INFINITY=new t(1/0),t.NEGATIVE_INFINITY=new t(-1/0),t}(Mt),Rt=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=wt.StringValue,n}return a.__extends(t,e),t.prototype.value=function(e){return this.internalValue},t.prototype.isEqual=function(e){return e instanceof t&&this.internalValue===e.internalValue},t.prototype.compareTo=function(e){return e instanceof t?X(this.internalValue,e.internalValue):this.defaultCompareTo(e)},t}(Nt),jt=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=wt.TimestampValue,n}return a.__extends(t,e),t.prototype.value=function(e){return!e||e.timestampsInSnapshots?this.internalValue:this.internalValue.toDate()},t.prototype.isEqual=function(e){return e instanceof t&&this.internalValue.isEqual(e.internalValue)},t.prototype.compareTo=function(e){return e instanceof t?this.internalValue._compareTo(e.internalValue):e instanceof Bt?-1:this.defaultCompareTo(e)},t}(Nt),Bt=function(e){function t(t,n){var r=e.call(this)||this;return r.localWriteTime=t,r.previousValue=n,r.typeOrder=wt.TimestampValue,r}return a.__extends(t,e),t.prototype.value=function(e){return e&&e.serverTimestampBehavior===Tt.Estimate?new jt(this.localWriteTime).value(e):e&&e.serverTimestampBehavior===Tt.Previous&&this.previousValue?this.previousValue.value(e):null},t.prototype.isEqual=function(e){return e instanceof t&&this.localWriteTime.isEqual(e.localWriteTime)},t.prototype.compareTo=function(e){return e instanceof t?this.localWriteTime._compareTo(e.localWriteTime):e instanceof jt?1:this.defaultCompareTo(e)},t.prototype.toString=function(){return"<ServerTimestamp localTime="+this.localWriteTime.toString()+">"},t}(Nt),Ft=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=wt.BlobValue,n}return a.__extends(t,e),t.prototype.value=function(e){return this.internalValue},t.prototype.isEqual=function(e){return e instanceof t&&this.internalValue.isEqual(e.internalValue)},t.prototype.compareTo=function(e){return e instanceof t?this.internalValue._compareTo(e.internalValue):this.defaultCompareTo(e)},t}(Nt),Vt=function(e){function t(t,n){var r=e.call(this)||this;return r.databaseId=t,r.key=n,r.typeOrder=wt.RefValue,r}return a.__extends(t,e),t.prototype.value=function(e){return this.key},t.prototype.isEqual=function(e){return e instanceof t&&(this.key.isEqual(e.key)&&this.databaseId.isEqual(e.databaseId))},t.prototype.compareTo=function(e){if(e instanceof t){var n=this.databaseId.compareTo(e.databaseId);return 0!==n?n:fe.comparator(this.key,e.key)}return this.defaultCompareTo(e)},t}(Nt),qt=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=wt.GeoPointValue,n}return a.__extends(t,e),t.prototype.value=function(e){return this.internalValue},t.prototype.isEqual=function(e){return e instanceof t&&this.internalValue.isEqual(e.internalValue)},t.prototype.compareTo=function(e){return e instanceof t?this.internalValue._compareTo(e.internalValue):this.defaultCompareTo(e)},t}(Nt),Ut=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=wt.ObjectValue,n}return a.__extends(t,e),t.prototype.value=function(e){var t={};return this.internalValue.inorderTraversal((function(n,r){t[n]=r.value(e)})),t},t.prototype.forEach=function(e){this.internalValue.inorderTraversal(e)},t.prototype.isEqual=function(e){if(e instanceof t){for(var n=this.internalValue.getIterator(),r=e.internalValue.getIterator();n.hasNext()&&r.hasNext();){var i=n.getNext(),o=r.getNext();if(i.key!==o.key||!i.value.isEqual(o.value))return!1}return!n.hasNext()&&!r.hasNext()}return!1},t.prototype.compareTo=function(e){if(e instanceof t){for(var n=this.internalValue.getIterator(),r=e.internalValue.getIterator();n.hasNext()&&r.hasNext();){var i=n.getNext(),o=r.getNext(),a=X(i.key,o.key)||i.value.compareTo(o.value);if(a)return a}return X(n.hasNext(),r.hasNext())}return this.defaultCompareTo(e)},t.prototype.set=function(e,n){if(b(!e.isEmpty(),"Cannot set field for empty path on ObjectValue"),1===e.length)return this.setChild(e.firstSegment(),n);var r=this.child(e.firstSegment());r instanceof t||(r=t.EMPTY);var i=r.set(e.popFirst(),n);return this.setChild(e.firstSegment(),i)},t.prototype.delete=function(e){if(b(!e.isEmpty(),"Cannot delete field for empty path on ObjectValue"),1===e.length)return new t(this.internalValue.remove(e.firstSegment()));var n=this.child(e.firstSegment());if(n instanceof t){var r=n.delete(e.popFirst());return new t(this.internalValue.insert(e.firstSegment(),r))}return this},t.prototype.contains=function(e){return null!==this.field(e)},t.prototype.field=function(e){b(!e.isEmpty(),"Can't get field of empty path");var n=this;return e.forEach((function(e){n=n instanceof t?n.internalValue.get(e):null})),n},t.prototype.fieldMask=function(){var e=new xe(de.comparator);return this.internalValue.forEach((function(n,r){var i=new de([n]);if(r instanceof t){var o=r.fieldMask().fields;o.isEmpty()?e=e.add(i):o.forEach((function(t){e=e.add(i.child(t))}))}else e=e.add(i)})),yt.fromSet(e)},t.prototype.toString=function(){return this.internalValue.toString()},t.prototype.child=function(e){return this.internalValue.get(e)||void 0},t.prototype.setChild=function(e,n){return new t(this.internalValue.insert(e,n))},t.EMPTY=new t(new De(X)),t}(Nt),Wt=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=wt.ArrayValue,n}return a.__extends(t,e),t.prototype.value=function(e){return this.internalValue.map((function(t){return t.value(e)}))},t.prototype.contains=function(e){for(var t=0,n=this.internalValue;t<n.length;t++){if(n[t].isEqual(e))return!0}return!1},t.prototype.forEach=function(e){this.internalValue.forEach(e)},t.prototype.isEqual=function(e){if(e instanceof t){if(this.internalValue.length!==e.internalValue.length)return!1;for(var n=0;n<this.internalValue.length;n++)if(!this.internalValue[n].isEqual(e.internalValue[n]))return!1;return!0}return!1},t.prototype.compareTo=function(e){if(e instanceof t){for(var n=Math.min(this.internalValue.length,e.internalValue.length),r=0;r<n;r++){var i=this.internalValue[r].compareTo(e.internalValue[r]);if(i)return i}return X(this.internalValue.length,e.internalValue.length)}return this.defaultCompareTo(e)},t.prototype.toString=function(){return"["+this.internalValue.map((function(e){return e.toString()})).join(",")+"]"},t}(Nt),zt=function(){function e(e,t){this.key=e,this.version=t}return e.compareByKey=function(e,t){return fe.comparator(e.key,t.key)},e}(),Kt=function(e){function t(t,n,r,i,o,a){var s=e.call(this,t,n)||this;return s.objectValue=i,s.proto=o,s.converter=a,b(void 0!==s.objectValue||void 0!==s.proto&&void 0!==s.converter,"If objectValue is not defined, proto and converter need to be set."),s.hasLocalMutations=!!r.hasLocalMutations,s.hasCommittedMutations=!!r.hasCommittedMutations,s}return a.__extends(t,e),t.prototype.field=function(e){if(this.objectValue)return this.objectValue.field(e);this.fieldValueCache||(this.fieldValueCache=new Map);var t=e.canonicalString(),n=this.fieldValueCache.get(t);if(void 0===n){var r=this.getProtoField(e);n=void 0===r?null:this.converter(r),this.fieldValueCache.set(t,n)}return n},t.prototype.data=function(){var e=this;if(!this.objectValue){var t=Ut.EMPTY;k(this.proto.fields||{},(function(n,r){t=t.set(new de([n]),e.converter(r))})),this.objectValue=t,this.fieldValueCache=void 0}return this.objectValue},t.prototype.value=function(){return this.data().value()},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.hasLocalMutations===e.hasLocalMutations&&this.hasCommittedMutations===e.hasCommittedMutations&&this.data().isEqual(e.data())},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.data().toString()+", {hasLocalMutations: "+this.hasLocalMutations+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!0,configurable:!0}),t.prototype.getProtoField=function(e){b(void 0!==this.proto,"Can only call getProtoField() when proto is defined");for(var t=this.proto.fields?this.proto.fields[e.firstSegment()]:void 0,n=1;n<e.length;++n){if(!t||!t.mapValue||!t.mapValue.fields)return;t=t.mapValue.fields[e.get(n)]}return t},t.compareByField=function(e,t,n){var r=t.field(e),i=n.field(e);return null!==r&&null!==i?r.compareTo(i):v("Trying to compare documents on fields that don't exist")},t}(zt),Gt=function(e){function t(t,n,r){var i=e.call(this,t,n)||this;return i.hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return a.__extends(t,e),t.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.hasCommittedMutations===this.hasCommittedMutations&&e.version.isEqual(this.version)&&e.key.isEqual(this.key)},t}(zt),Qt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.version.isEqual(this.version)&&e.key.isEqual(this.key)},t}(zt),Ht=function(){function e(e){this.mapKeyFn=e,this.inner={}}return e.prototype.get=function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];if(a.isEqual(e))return s}},e.prototype.has=function(e){return void 0!==this.get(e)},e.prototype.set=function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(r[i][0].isEqual(e))return void(r[i]=[e,t]);r.push([e,t])}else this.inner[n]=[[e,t]]},e.prototype.delete=function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(n[r][0].isEqual(e))return 1===n.length?delete this.inner[t]:n.splice(r,1),!0;return!1},e.prototype.forEach=function(e){k(this.inner,(function(t,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];e(a,s)}}))},e.prototype.isEmpty=function(){return N(this.inner)},e}(),Yt=function(){function e(){this.changes=new Ht((function(e){return e.toString()})),this.changesApplied=!1}return Object.defineProperty(e.prototype,"readTime",{get:function(){return b(void 0!==this._readTime,"Read time is not set. All removeEntry() calls must include a readTime if `trackRemovals` is used."),this._readTime},set:function(e){b(void 0===this._readTime||this._readTime.isEqual(e),"All changes in a RemoteDocumentChangeBuffer must have the same read time"),this._readTime=e},enumerable:!0,configurable:!0}),e.prototype.addEntry=function(e,t){this.assertNotApplied(),this.readTime=t,this.changes.set(e.key,e)},e.prototype.removeEntry=function(e,t){this.assertNotApplied(),t&&(this.readTime=t),this.changes.set(e,null)},e.prototype.getEntry=function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?Ge.resolve(n):this.getFromCache(e,t)},e.prototype.getEntries=function(e,t){return this.getAllFromCache(e,t)},e.prototype.apply=function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)},e.prototype.assertNotApplied=function(){b(!this.changesApplied,"Changes have already been applied.")},e}(),Jt=function(){function e(e,t){this.serializer=e,this.indexManager=t}return e.prototype.addEntry=function(e,t,n){return $t(e).put(Zt(t),n)},e.prototype.removeEntry=function(e,t){var n=$t(e),r=Zt(t);return n.delete(r)},e.prototype.updateMetadata=function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.setMetadata(e,r)}))},e.prototype.getEntry=function(e,t){var n=this;return $t(e).get(Zt(t)).next((function(e){return n.maybeDecodeDocument(e)}))},e.prototype.getSizedEntry=function(e,t){var n=this;return $t(e).get(Zt(t)).next((function(e){var t=n.maybeDecodeDocument(e);return t?{maybeDocument:t,size:en(e)}:null}))},e.prototype.getEntries=function(e,t){var n=this,r=Oe();return this.forEachDbEntry(e,t,(function(e,t){var i=n.maybeDecodeDocument(t);r=r.insert(e,i)})).next((function(){return r}))},e.prototype.getSizedEntries=function(e,t){var n=this,r=Oe(),i=new De(fe.comparator);return this.forEachDbEntry(e,t,(function(e,t){var o=n.maybeDecodeDocument(t);o?(r=r.insert(e,o),i=i.insert(e,en(t))):(r=r.insert(e,null),i=i.insert(e,0))})).next((function(){return{maybeDocuments:r,sizeMap:i}}))},e.prototype.forEachDbEntry=function(e,t,n){if(t.isEmpty())return Ge.resolve();var r=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),i=t.getIterator(),o=i.getNext();return $t(e).iterate({range:r},(function(e,t,r){for(var a=fe.fromSegments(e);o&&fe.comparator(o,a)<0;)n(o,null),o=i.getNext();o&&o.isEqual(a)&&(n(o,t),o=i.hasNext()?i.getNext():null),o?r.skip(o.path.toArray()):r.done()})).next((function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null}))},e.prototype.getDocumentsMatchingQuery=function(e,t,n){var r=this;b(!t.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var i=je(),o=t.path.length+1,a={};if(n.isEqual(_e.MIN)){var s=t.path.toArray();a.range=IDBKeyRange.lowerBound(s)}else{var u=t.path.toArray(),c=this.serializer.toDbTimestampKey(n);a.range=IDBKeyRange.lowerBound([u,c],!0),a.index=fn.collectionReadTimeIndex}return $t(e).iterate(a,(function(e,n,a){if(e.length===o){var s=r.serializer.fromDbRemoteDocument(n);t.path.isPrefixOf(s.key.path)?s instanceof Kt&&t.matches(s)&&(i=i.insert(s.key,s)):a.done()}})).next((function(){return i}))},e.prototype.getNewDocumentChanges=function(e,t){var n=this,r=Pe(),i=this.serializer.toDbTimestampKey(t),o=$t(e),a=IDBKeyRange.lowerBound(i,!0);return o.iterate({index:fn.readTimeIndex,range:a},(function(e,t){var o=n.serializer.fromDbRemoteDocument(t);r=r.insert(o.key,o),i=t.readTime})).next((function(){return{changedDocs:r,readTime:n.serializer.fromDbTimestampKey(i)}}))},e.prototype.getLastDocumentChange=function(e){var t,n=this,r=$t(e),i=_e.MIN;return r.iterate({index:fn.readTimeIndex,reverse:!0},(function(e,r,o){t=n.serializer.fromDbRemoteDocument(r),r.readTime&&(i=n.serializer.fromDbTimestampKey(r.readTime)),o.done()})).next((function(){return{changedDoc:t,readTime:i}}))},e.prototype.newChangeBuffer=function(t){return new e.RemoteDocumentChangeBuffer(this,!!t&&t.trackRemovals)},e.prototype.getSize=function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))},e.prototype.getMetadata=function(e){return Xt(e).get(pn.key).next((function(e){return b(!!e,"Missing document cache metadata"),e}))},e.prototype.setMetadata=function(e,t){return Xt(e).put(pn.key,t)},e.prototype.maybeDecodeDocument=function(e){if(e){var t=this.serializer.fromDbRemoteDocument(e);return t instanceof Gt&&t.version.isEqual(_e.forDeletedDoc())?null:t}return null},e.RemoteDocumentChangeBuffer=function(e){function t(t,n){var r=e.call(this)||this;return r.documentCache=t,r.trackRemovals=n,r.documentSizes=new Ht((function(e){return e.toString()})),r}return a.__extends(t,e),t.prototype.applyChanges=function(e){var t=this,n=[],r=0,i=new xe((function(e,t){return X(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(o,a){var s=t.documentSizes.get(o);if(b(void 0!==s,"Cannot modify a document that wasn't read (for "+o+")"),a){b(!t.readTime.isEqual(_e.MIN),"Cannot add a document with a read time of zero");var u=t.documentCache.serializer.toDbRemoteDocument(a,t.readTime);i=i.add(o.path.popLast());var c=en(u);r+=c-s,n.push(t.documentCache.addEntry(e,o,u))}else if(r-=s,t.trackRemovals){var l=t.documentCache.serializer.toDbRemoteDocument(new Gt(o,_e.forDeletedDoc()),t.readTime);n.push(t.documentCache.addEntry(e,o,l))}else n.push(t.documentCache.removeEntry(e,o))})),i.forEach((function(r){n.push(t.documentCache.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.documentCache.updateMetadata(e,r)),Ge.waitFor(n)},t.prototype.getFromCache=function(e,t){var n=this;return this.documentCache.getSizedEntry(e,t).next((function(e){return null===e?(n.documentSizes.set(t,0),null):(n.documentSizes.set(t,e.size),e.maybeDocument)}))},t.prototype.getAllFromCache=function(e,t){var n=this;return this.documentCache.getSizedEntries(e,t).next((function(e){var t=e.maybeDocuments;return e.sizeMap.forEach((function(e,t){n.documentSizes.set(e,t)})),t}))},t}(Yt),e}();function Xt(e){return qn.getStore(e,pn.store)}function $t(e){return qn.getStore(e,fn.store)}function Zt(e){return e.path.toArray()}function en(e){var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw v("Unknown remote document type");t=e.noDocument}return JSON.stringify(t).length}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tn=function(){function e(){this.collectionParentIndex=new nn}return e.prototype.addToCollectionParentIndex=function(e,t){return this.collectionParentIndex.add(t),Ge.resolve()},e.prototype.getCollectionParents=function(e,t){return Ge.resolve(this.collectionParentIndex.getEntries(t))},e}(),nn=function(){function e(){this.index={}}return e.prototype.add=function(e){b(e.length%2==1,"Expected a collection path.");var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new xe(le.comparator),i=!r.has(n);return this.index[t]=r.add(n),i},e.prototype.has=function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)},e.prototype.getEntries=function(e){return(this.index[e]||new xe(le.comparator)).toArray()},e}(),rn=9,on=function(){function e(e){this.serializer=e}return e.prototype.createOrUpgrade=function(e,t,n,r){var i=this;b(n<r&&n>=0&&r<=rn,"Unexpected schema upgrade from v"+n+" to v{toVersion}.");var o=new Je(t);n<1&&r>=1&&(function(e){e.createObjectStore(sn.store)}(e),function(e){e.createObjectStore(un.store,{keyPath:un.keyPath}),e.createObjectStore(cn.store,{keyPath:cn.keyPath,autoIncrement:!0}).createIndex(cn.userMutationsIndex,cn.userMutationsKeyPath,{unique:!0}),e.createObjectStore(ln.store)}(e),bn(e),function(e){e.createObjectStore(fn.store)}(e));var a=Ge.resolve();return n<3&&r>=3&&(0!==n&&(!function(e){e.deleteObjectStore(gn.store),e.deleteObjectStore(mn.store),e.deleteObjectStore(yn.store)}(e),bn(e)),a=a.next((function(){return function(e){var t=e.store(yn.store),n=new yn(0,0,_e.MIN.toTimestamp(),0);return t.put(yn.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(a=a.next((function(){return function(e,t){return t.store(cn.store).loadAll().next((function(n){e.deleteObjectStore(cn.store),e.createObjectStore(cn.store,{keyPath:cn.keyPath,autoIncrement:!0}).createIndex(cn.userMutationsIndex,cn.userMutationsKeyPath,{unique:!0});var r=t.store(cn.store),i=n.map((function(e){return r.put(e)}));return Ge.waitFor(i)}))}(e,o)}))),a=a.next((function(){!function(e){e.createObjectStore(wn.store,{keyPath:wn.keyPath})}(e)}))),n<5&&r>=5&&(a=a.next((function(){return i.removeAcknowledgedMutations(o)}))),n<6&&r>=6&&(a=a.next((function(){return function(e){e.createObjectStore(pn.store)}(e),i.addDocumentGlobal(o)}))),n<7&&r>=7&&(a=a.next((function(){return i.ensureSequenceNumbers(o)}))),n<8&&r>=8&&(a=a.next((function(){return i.createCollectionParentIndex(e,o)}))),n<9&&r>=9&&(a=a.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e),function(e){var t=e.objectStore(fn.store);t.createIndex(fn.readTimeIndex,fn.readTimeIndexPath,{unique:!1}),t.createIndex(fn.collectionReadTimeIndex,fn.collectionReadTimeIndexPath,{unique:!1})}(t)}))),a},e.prototype.addDocumentGlobal=function(e){var t=0;return e.store(fn.store).iterate((function(e,n){t+=en(n)})).next((function(){var n=new pn(t);return e.store(pn.store).put(pn.key,n)}))},e.prototype.removeAcknowledgedMutations=function(e){var t=this,n=e.store(un.store),r=e.store(cn.store);return n.loadAll().next((function(n){return Ge.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.loadAll(cn.userMutationsIndex,i).next((function(r){return Ge.forEach(r,(function(r){b(r.userId===n.userId,"Cannot process batch "+r.batchId+" from unexpected user");var i=t.serializer.fromDbMutationBatch(r);return rt(e,n.userId,i).next((function(){}))}))}))}))}))},e.prototype.ensureSequenceNumbers=function(e){var t=e.store(gn.store),n=e.store(fn.store);return pt(e).next((function(e){var r=[];return n.iterate((function(n,i){var o=new le(n),a=function(e){return[0,Te(e)]}(o);r.push(t.get(a).next((function(n){return n?Ge.resolve():function(n){return t.put(new gn(0,Te(n),e))}(o)})))})).next((function(){return Ge.waitFor(r)}))}))},e.prototype.createCollectionParentIndex=function(e,t){e.createObjectStore(vn.store,{keyPath:vn.keyPath});var n=t.store(vn.store),r=new nn,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:Te(i)})}};return t.store(fn.store).iterate({keysOnly:!0},(function(e,t){var n=new le(e);return i(n.popLast())})).next((function(){return t.store(ln.store).iterate({keysOnly:!0},(function(e,t){e[0];var n=e[1],r=(e[2],Ee(n));return i(r.popLast())}))}))},e}();var an=function(e,t){this.seconds=e,this.nanoseconds=t},sn=function(){function e(e,t,n){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=n}return e.store="owner",e.key="owner",e}();var un=function(){function e(e,t,n){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=n}return e.store="mutationQueues",e.keyPath="userId",e}(),cn=function(){function e(e,t,n,r,i){this.userId=e,this.batchId=t,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i}return e.store="mutations",e.keyPath="batchId",e.userMutationsIndex="userMutationsIndex",e.userMutationsKeyPath=["userId","batchId"],e}();var ln=function(){function e(){}return e.prefixForUser=function(e){return[e]},e.prefixForPath=function(e,t){return[e,Te(t)]},e.key=function(e,t,n){return[e,Te(t),n]},e.store="documentMutations",e.PLACEHOLDER=new e,e}();var hn=function(e,t){this.path=e,this.readTime=t},dn=function(e,t){this.path=e,this.version=t},fn=function(){function e(e,t,n,r,i,o){this.unknownDocument=e,this.noDocument=t,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o}return e.store="remoteDocuments",e.readTimeIndex="readTimeIndex",e.readTimeIndexPath="readTime",e.collectionReadTimeIndex="collectionReadTimeIndex",e.collectionReadTimeIndexPath=["parentPath","readTime"],e}(),pn=function(){function e(e){this.byteSize=e}return e.store="remoteDocumentGlobal",e.key="remoteDocumentGlobalKey",e}();var mn=function(){function e(e,t,n,r,i,o,a){this.targetId=e,this.canonicalId=t,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=a}return e.store="targets",e.keyPath="targetId",e.queryTargetsIndexName="queryTargetsIndex",e.queryTargetsKeyPath=["canonicalId","targetId"],e}(),gn=function(){function e(e,t,n){this.targetId=e,this.path=t,this.sequenceNumber=n,b(0===e==(void 0!==n),"A target-document row must either have targetId == 0 and a defined sequence number, or a non-zero targetId and no sequence number")}return e.store="targetDocuments",e.keyPath=["targetId","path"],e.documentTargetsIndex="documentTargetsIndex",e.documentTargetsKeyPath=["path","targetId"],e}(),yn=function(){function e(e,t,n,r){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=n,this.targetCount=r}return e.key="targetGlobalKey",e.store="targetGlobal",e}(),vn=function(){function e(e,t){this.collectionId=e,this.parent=t}return e.store="collectionParents",e.keyPath=["collectionId","parent"],e}();function bn(e){e.createObjectStore(gn.store,{keyPath:gn.keyPath}).createIndex(gn.documentTargetsIndex,gn.documentTargetsKeyPath,{unique:!0}),e.createObjectStore(mn.store,{keyPath:mn.keyPath}).createIndex(mn.queryTargetsIndexName,mn.queryTargetsKeyPath,{unique:!0}),e.createObjectStore(yn.store)}var wn=function(){function e(e,t,n,r){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=n,this.inForeground=r}return e.store="clientMetadata",e.keyPath="clientId",e}();var Tn,Sn=[un.store,cn.store,ln.store,fn.store,mn.store,sn.store,yn.store,gn.store],In=a.__spreadArrays(Sn,[wn.store]),En=a.__spreadArrays(In,[pn.store]),Cn=a.__spreadArrays(En,[vn.store]),_n=function(){function e(){this.collectionParentsCache=new nn}return e.prototype.addToCollectionParentIndex=function(e,t){var n=this;if(b(t.length%2==1,"Expected a collection path."),!this.collectionParentsCache.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.collectionParentsCache.add(t)}));var o={collectionId:r,parent:Te(i)};return Dn(e).put(o)}return Ge.resolve()},e.prototype.getCollectionParents=function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[Z(t),""],!1,!0);return Dn(e).loadAll(r).next((function(e){for(var r=0,i=e;r<i.length;r++){var o=i[r];if(o.collectionId!==t)break;n.push(Ee(o.parent))}return n}))},e}();function Dn(e){return qn.getStore(e,vn.store)}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */!function(e){e[e.Listen=0]="Listen",e[e.ExistenceFilterMismatch=1]="ExistenceFilterMismatch",e[e.LimboResolution=2]="LimboResolution"}(Tn||(Tn={}));var kn=function(){function e(e,t,n,r,i,o,a){void 0===i&&(i=_e.MIN),void 0===o&&(o=_e.MIN),void 0===a&&(a=T()),this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}return e.prototype.withSequenceNumber=function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},e.prototype.withResumeToken=function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)},e.prototype.withLastLimboFreeSnapshotVersion=function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)},e.prototype.isEqual=function(e){return this.targetId===e.targetId&&this.purpose===e.purpose&&this.sequenceNumber===e.sequenceNumber&&this.snapshotVersion.isEqual(e.snapshotVersion)&&this.lastLimboFreeSnapshotVersion.isEqual(e.lastLimboFreeSnapshotVersion)&&this.resumeToken===e.resumeToken&&this.target.isEqual(e.target)},e}(),Nn=function(){function e(e){this.remoteSerializer=e}return e.prototype.fromDbRemoteDocument=function(e){if(e.document)return this.remoteSerializer.fromDocument(e.document,!!e.hasCommittedMutations);if(e.noDocument){var t=fe.fromSegments(e.noDocument.path),n=this.fromDbTimestamp(e.noDocument.readTime);return new Gt(t,n,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){t=fe.fromSegments(e.unknownDocument.path),n=this.fromDbTimestamp(e.unknownDocument.version);return new Qt(t,n)}return v("Unexpected DbRemoteDocument")},e.prototype.toDbRemoteDocument=function(e,t){var n=this.toDbTimestampKey(t),r=e.key.path.popLast().toArray();if(e instanceof Kt){var i=e.proto?e.proto:this.remoteSerializer.toDocument(e),o=e.hasCommittedMutations;return new fn(null,null,i,o,n,r)}if(e instanceof Gt){var a=e.key.path.toArray(),s=this.toDbTimestamp(e.version);o=e.hasCommittedMutations;return new fn(null,new hn(a,s),null,o,n,r)}if(e instanceof Qt){a=e.key.path.toArray();var u=this.toDbTimestamp(e.version);return new fn(new dn(a,u),null,null,!0,n,r)}return v("Unexpected MaybeDocument")},e.prototype.toDbTimestampKey=function(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]},e.prototype.fromDbTimestampKey=function(e){var t=new Ce(e[0],e[1]);return _e.fromTimestamp(t)},e.prototype.toDbTimestamp=function(e){var t=e.toTimestamp();return new an(t.seconds,t.nanoseconds)},e.prototype.fromDbTimestamp=function(e){var t=new Ce(e.seconds,e.nanoseconds);return _e.fromTimestamp(t)},e.prototype.toDbMutationBatch=function(e,t){var n=this,r=t.baseMutations.map((function(e){return n.remoteSerializer.toMutation(e)})),i=t.mutations.map((function(e){return n.remoteSerializer.toMutation(e)}));return new cn(e,t.batchId,t.localWriteTime.toMillis(),r,i)},e.prototype.fromDbMutationBatch=function(e){var t=this,n=(e.baseMutations||[]).map((function(e){return t.remoteSerializer.fromMutation(e)})),r=e.mutations.map((function(e){return t.remoteSerializer.fromMutation(e)})),i=Ce.fromMillis(e.localWriteTimeMs);return new ze(e.batchId,i,n,r)},e.prototype.toDbResourcePaths=function(e){var t=[];return e.forEach((function(e){t.push(Te(e.path))})),t},e.prototype.fromDbResourcePaths=function(e){for(var t=qe(),n=0,r=e;n<r.length;n++){var i=r[n];t=t.add(new fe(Ee(i)))}return t},e.prototype.fromDbTarget=function(e){var t,n=this.fromDbTimestamp(e.readTime),r=void 0!==e.lastLimboFreeSnapshotVersion?this.fromDbTimestamp(e.lastLimboFreeSnapshotVersion):_e.MIN,i=e.resumeToken;return t=void 0!==e.query.documents?this.remoteSerializer.fromDocumentsTarget(e.query):this.remoteSerializer.fromQueryTarget(e.query),new kn(t,e.targetId,Tn.Listen,e.lastListenSequenceNumber,n,r,i)},e.prototype.toDbTarget=function(e){b(Tn.Listen===e.purpose,"Only queries with purpose "+Tn.Listen+" may be stored, got "+e.purpose);var t,n,r=this.toDbTimestamp(e.snapshotVersion),i=this.toDbTimestamp(e.lastLimboFreeSnapshotVersion);return t=e.target.isDocumentQuery()?this.remoteSerializer.toDocumentsTarget(e.target):this.remoteSerializer.toQueryTarget(e.target),e.resumeToken instanceof Uint8Array?(b(He.isMockPersistence(),"Persisting non-string stream tokens is only supported with mock persistence ."),n=e.resumeToken.toString()):n=e.resumeToken,new mn(e.targetId,e.target.canonicalId(),r,n,e.sequenceNumber,i,t)},e}();
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function An(e,t){var n=e[0],r=e[1],i=t[0],o=t[1],a=X(n,i);return 0===a?X(r,o):a}var xn=function(){function e(e){this.maxElements=e,this.buffer=new xe(An),this.previousIndex=0}return e.prototype.nextIndex=function(){return++this.previousIndex},e.prototype.addElement=function(e){var t=[e,this.nextIndex()];if(this.buffer.size<this.maxElements)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();An(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}},Object.defineProperty(e.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!0,configurable:!0}),e}(),Mn={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Ln=function(){function e(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}return e.withCacheSize=function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},e.COLLECTION_DISABLED=-1,e.MINIMUM_CACHE_SIZE_BYTES=1048576,e.DEFAULT_CACHE_SIZE_BYTES=41943040,e.DEFAULT_COLLECTION_PERCENTILE=10,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,e.DEFAULT=new e(e.DEFAULT_CACHE_SIZE_BYTES,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),e.DISABLED=new e(e.COLLECTION_DISABLED,0,0),e}(),Pn=function(){function e(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.hasRun=!1,this.gcTask=null}return e.prototype.start=function(){b(null===this.gcTask,"Cannot start an already started LruScheduler"),this.garbageCollector.params.cacheSizeCollectionThreshold!==Ln.COLLECTION_DISABLED&&this.scheduleGC()},e.prototype.stop=function(){this.gcTask&&(this.gcTask.cancel(),this.gcTask=null)},Object.defineProperty(e.prototype,"started",{get:function(){return null!==this.gcTask},enumerable:!0,configurable:!0}),e.prototype.scheduleGC=function(){var e=this;b(null===this.gcTask,"Cannot schedule GC while a task is pending");var t=this.hasRun?3e5:6e4;m("LruGarbageCollector","Garbage collection scheduled in "+t+"ms"),this.gcTask=this.asyncQueue.enqueueAfterDelay(ne.LruGarbageCollection,t,(function(){return e.gcTask=null,e.hasRun=!0,e.localStore.collectGarbage(e.garbageCollector).then((function(){return e.scheduleGC()})).catch(Un)}))},e}(),On=function(){function e(e,t){this.delegate=e,this.params=t}return e.prototype.calculateTargetCount=function(e,t){return this.delegate.getSequenceNumberCount(e).next((function(e){return Math.floor(t/100*e)}))},e.prototype.nthSequenceNumber=function(e,t){var n=this;if(0===t)return Ge.resolve(ue.INVALID);var r=new xn(t);return this.delegate.forEachTarget(e,(function(e){return r.addElement(e.sequenceNumber)})).next((function(){return n.delegate.forEachOrphanedDocumentSequenceNumber(e,(function(e){return r.addElement(e)}))})).next((function(){return r.maxValue}))},e.prototype.removeTargets=function(e,t,n){return this.delegate.removeTargets(e,t,n)},e.prototype.removeOrphanedDocuments=function(e,t){return this.delegate.removeOrphanedDocuments(e,t)},e.prototype.collect=function(e,t){var n=this;return this.params.cacheSizeCollectionThreshold===Ln.COLLECTION_DISABLED?(m("LruGarbageCollector","Garbage collection skipped; disabled"),Ge.resolve(Mn)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(m("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),Mn):n.runGarbageCollection(e,t)}))},e.prototype.getCacheSize=function(e){return this.delegate.getCacheSize(e)},e.prototype.runGarbageCollection=function(e,t){var n,r,o,a,s,u,c,l=this,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>l.params.maximumSequenceNumbersToCollect?(m("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+l.params.maximumSequenceNumbersToCollect+" from "+t),r=l.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),l.nthSequenceNumber(e,r)})).next((function(r){return n=r,s=Date.now(),l.removeTargets(e,n,t)})).next((function(t){return o=t,u=Date.now(),l.removeOrphanedDocuments(e,n)})).next((function(e){(c=Date.now(),f()<=i.DEBUG)&&m("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(a-h)+"ms\n\tDetermined least recently used "+r+" in "+(s-a)+"ms\n\tRemoved "+o+" targets in "+(u-s)+"ms\n\tRemoved "+e+" documents in "+(c-u)+"ms\nTotal Duration: "+(c-h)+"ms");return Ge.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:e})}))},e}(),Rn=function(){function e(){this.onCommittedListeners=[]}return e.prototype.addOnCommittedListener=function(e){this.onCommittedListeners.push(e)},e.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach((function(e){return e()}))},e}(),jn="IndexedDbPersistence",Bn="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Fn="Another tab has exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `synchronizeTabs:true` in all tabs.",Vn=function(e){function t(t,n){var r=e.call(this)||this;return r.simpleDbTransaction=t,r.currentSequenceNumber=n,r}return a.__extends(t,e),t}(Rn),qn=function(){function e(t,n,r,i,o,a,s,u){if(this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.queue=a,this.sequenceNumberSyncer=u,this._started=!1,this.isPrimary=!1,this.networkEnabled=!0,this.windowUnloadHandler=null,this.inForeground=!1,this.documentVisibilityHandler=null,this.clientMetadataRefresher=null,this.lastGarbageCollectionTime=Number.NEGATIVE_INFINITY,this.primaryStateListener=function(e){return Promise.resolve()},this.referenceDelegate=new Kn(this,o),this.dbName=n+e.MAIN_DATABASE,this.serializer=new Nn(s),this.document=i.document,this.targetCache=new ht(this.referenceDelegate,this.serializer),this.indexManager=new _n,this.remoteDocumentCache=new Jt(this.serializer,this.indexManager),!i.window||!i.window.localStorage)throw new I(S.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");this.window=i.window,this.webStorage=this.window.localStorage}return e.getStore=function(e,t){if(e instanceof Vn)return He.getStore(e.simpleDbTransaction,t);throw v("IndexedDbPersistence must use instances of IndexedDbTransaction")},e.createIndexedDbPersistence=function(t){return a.__awaiter(this,void 0,void 0,(function(){var n;return a.__generator(this,(function(r){switch(r.label){case 0:if(!e.isAvailable())throw new I(S.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");return[4,(n=new e(t.allowTabSynchronization,t.persistenceKey,t.clientId,t.platform,t.lruParams,t.queue,t.serializer,t.sequenceNumberSyncer)).start()];case 1:return r.sent(),[2,n]}}))}))},e.prototype.start=function(){var e=this;return b(!this.started,"IndexedDbPersistence double-started!"),b(null!==this.window,"Expected 'window' to be defined"),He.openOrCreate(this.dbName,rn,new on(this.serializer)).then((function(t){return e.simpleDb=t,e.updateClientMetadataAndTryBecomePrimary()})).then((function(){return e.attachVisibilityHandler(),e.attachWindowUnloadHook(),e.scheduleClientMetadataAndPrimaryLeaseRefreshes(),e.simpleDb.runTransaction("readonly-idempotent",[yn.store],(function(e){return pt(e)}))})).then((function(t){e.listenSequence=new ue(t,e.sequenceNumberSyncer)})).then((function(){e._started=!0})).catch((function(t){return e.simpleDb&&e.simpleDb.close(),Promise.reject(t)}))},e.prototype.setPrimaryStateListener=function(e){var t=this;return this.primaryStateListener=function(n){return a.__awaiter(t,void 0,void 0,(function(){return a.__generator(this,(function(t){return this.started?[2,e(n)]:[2]}))}))},e(this.isPrimary)},e.prototype.setDatabaseDeletedListener=function(e){var t=this;this.simpleDb.setVersionChangeListener((function(n){return a.__awaiter(t,void 0,void 0,(function(){return a.__generator(this,(function(t){switch(t.label){case 0:return null!==n.newVersion?[3,2]:[4,e()];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))},e.prototype.setNetworkEnabled=function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.queue.enqueueAndForget((function(){return a.__awaiter(t,void 0,void 0,(function(){return a.__generator(this,(function(e){switch(e.label){case 0:return this.started?[4,this.updateClientMetadataAndTryBecomePrimary()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))})))},e.prototype.updateClientMetadataAndTryBecomePrimary=function(){var e=this;return this.simpleDb.runTransaction("readwrite-idempotent",Cn,(function(t){return zn(t).put(new wn(e.clientId,Date.now(),e.networkEnabled,e.inForeground)).next((function(){if(e.isPrimary)return e.verifyPrimaryLease(t).next((function(t){t||(e.isPrimary=!1,e.queue.enqueueAndForget((function(){return e.primaryStateListener(!1)})))}))})).next((function(){return e.canActAsPrimary(t)})).next((function(n){return e.isPrimary&&!n?e.releasePrimaryLeaseIfHeld(t).next((function(){return!1})):!!n&&e.acquireOrExtendPrimaryLease(t).next((function(){return!0}))}))})).catch((function(t){if(!e.allowTabSynchronization)throw t;return m(jn,"Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.queue.enqueueAndForget((function(){return e.primaryStateListener(t)})),e.isPrimary=t}))},e.prototype.verifyPrimaryLease=function(e){var t=this;return Wn(e).get(sn.key).next((function(e){return Ge.resolve(t.isLocalClient(e))}))},e.prototype.removeClientMetadata=function(e){return zn(e).delete(this.clientId)},e.prototype.maybeGarbageCollectMultiClientState=function(){return a.__awaiter(this,void 0,void 0,(function(){var t=this;return a.__generator(this,(function(n){switch(n.label){case 0:return!this.isPrimary||this.isWithinAge(this.lastGarbageCollectionTime,18e5)?[3,2]:(this.lastGarbageCollectionTime=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary-idempotent",(function(n){var r=e.getStore(n,wn.store);return r.loadAll().next((function(e){var n=t.filterActiveClients(e,18e5),i=e.filter((function(e){return-1===n.indexOf(e)}));return Ge.forEach(i,(function(e){return r.delete(e.clientId)})).next((function(){return i}))}))}))]);case 1:n.sent().forEach((function(e){t.window.localStorage.removeItem(t.zombiedClientLocalStorageKey(e.clientId))})),n.label=2;case 2:return[2]}}))}))},e.prototype.scheduleClientMetadataAndPrimaryLeaseRefreshes=function(){var e=this;this.clientMetadataRefresher=this.queue.enqueueAfterDelay(ne.ClientMetadataRefresh,4e3,(function(){return e.updateClientMetadataAndTryBecomePrimary().then((function(){return e.maybeGarbageCollectMultiClientState()})).then((function(){return e.scheduleClientMetadataAndPrimaryLeaseRefreshes()}))}))},e.prototype.isLocalClient=function(e){return!!e&&e.ownerId===this.clientId},e.prototype.canActAsPrimary=function(e){var t=this;return Wn(e).get(sn.key).next((function(n){if(null!==n&&t.isWithinAge(n.leaseTimestampMs,5e3)&&!t.isClientZombied(n.ownerId)){if(t.isLocalClient(n)&&t.networkEnabled)return!0;if(!t.isLocalClient(n)){if(!n.allowTabSynchronization)throw new I(S.FAILED_PRECONDITION,Fn);return!1}}return!(!t.networkEnabled||!t.inForeground)||zn(e).loadAll().next((function(e){return void 0===t.filterActiveClients(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&m(jn,"Client "+(e?"is":"is not")+" eligible for a primary lease."),e}))},e.prototype.shutdown=function(){return a.__awaiter(this,void 0,void 0,(function(){var e=this;return a.__generator(this,(function(t){switch(t.label){case 0:return this._started=!1,this.markClientZombied(),this.clientMetadataRefresher&&(this.clientMetadataRefresher.cancel(),this.clientMetadataRefresher=null),this.detachVisibilityHandler(),this.detachWindowUnloadHook(),[4,this.simpleDb.runTransaction("readwrite-idempotent",[sn.store,wn.store],(function(t){return e.releasePrimaryLeaseIfHeld(t).next((function(){return e.removeClientMetadata(t)}))}))];case 1:return t.sent(),this.simpleDb.close(),this.removeClientZombiedEntry(),[2]}}))}))},e.prototype.filterActiveClients=function(e,t){var n=this;return e.filter((function(e){return n.isWithinAge(e.updateTimeMs,t)&&!n.isClientZombied(e.clientId)}))},e.prototype.getActiveClients=function(){var e=this;return this.simpleDb.runTransaction("readonly-idempotent",[wn.store],(function(t){return zn(t).loadAll().next((function(t){return e.filterActiveClients(t,18e5).map((function(e){return e.clientId}))}))}))},e.clearPersistence=function(t){return a.__awaiter(this,void 0,void 0,(function(){var n;return a.__generator(this,(function(r){switch(r.label){case 0:return e.isAvailable()?(n=t+e.MAIN_DATABASE,[4,He.delete(n)]):[2,Promise.resolve()];case 1:return r.sent(),[2]}}))}))},Object.defineProperty(e.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),e.prototype.getMutationQueue=function(e){return b(this.started,"Cannot initialize MutationQueue before persistence is started."),tt.forUser(e,this.serializer,this.indexManager,this.referenceDelegate)},e.prototype.getTargetCache=function(){return b(this.started,"Cannot initialize TargetCache before persistence is started."),this.targetCache},e.prototype.getRemoteDocumentCache=function(){return b(this.started,"Cannot initialize RemoteDocumentCache before persistence is started."),this.remoteDocumentCache},e.prototype.getIndexManager=function(){return b(this.started,"Cannot initialize IndexManager before persistence is started."),this.indexManager},e.prototype.runTransaction=function(e,t,n){var r=this;m(jn,"Starting transaction:",e);var i,o=t.endsWith("idempotent"),a=t.startsWith("readonly")?o?"readonly-idempotent":"readonly":o?"readwrite-idempotent":"readwrite";return this.simpleDb.runTransaction(a,Cn,(function(o){return i=new Vn(o,r.listenSequence.next()),"readwrite-primary"===t||"readwrite-primary-idempotent"===t?r.verifyPrimaryLease(o).next((function(e){return!!e||r.canActAsPrimary(o)})).next((function(t){if(!t)throw g("Failed to obtain primary lease for action '"+e+"'."),r.isPrimary=!1,r.queue.enqueueAndForget((function(){return r.primaryStateListener(!1)})),new I(S.FAILED_PRECONDITION,Bn);return n(i)})).next((function(e){return r.acquireOrExtendPrimaryLease(o).next((function(){return e}))})):r.verifyAllowTabSynchronization(o).next((function(){return n(i)}))})).then((function(e){return i.raiseOnCommittedEvent(),e}))},e.prototype.verifyAllowTabSynchronization=function(e){var t=this;return Wn(e).get(sn.key).next((function(e){if(null!==e&&t.isWithinAge(e.leaseTimestampMs,5e3)&&!t.isClientZombied(e.ownerId)&&!t.isLocalClient(e)&&!e.allowTabSynchronization)throw new I(S.FAILED_PRECONDITION,Fn)}))},e.prototype.acquireOrExtendPrimaryLease=function(e){var t=new sn(this.clientId,this.allowTabSynchronization,Date.now());return Wn(e).put(sn.key,t)},e.isAvailable=function(){return He.isAvailable()},e.buildStoragePrefix=function(e){var t=e.databaseId.projectId;return e.databaseId.isDefaultDatabase||(t+="."+e.databaseId.database),"firestore/"+e.persistenceKey+"/"+t+"/"},e.prototype.releasePrimaryLeaseIfHeld=function(e){var t=this,n=Wn(e);return n.get(sn.key).next((function(e){return t.isLocalClient(e)?(m(jn,"Releasing primary lease."),n.delete(sn.key)):Ge.resolve()}))},e.prototype.isWithinAge=function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(g("Detected an update time that is in the future: "+e+" > "+n),!1))},e.prototype.attachVisibilityHandler=function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.documentVisibilityHandler=function(){e.queue.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.updateClientMetadataAndTryBecomePrimary()}))},this.document.addEventListener("visibilitychange",this.documentVisibilityHandler),this.inForeground="visible"===this.document.visibilityState)},e.prototype.detachVisibilityHandler=function(){this.documentVisibilityHandler&&(b(null!==this.document&&"function"==typeof this.document.addEventListener,"Expected 'document.addEventListener' to be a function"),this.document.removeEventListener("visibilitychange",this.documentVisibilityHandler),this.documentVisibilityHandler=null)},e.prototype.attachWindowUnloadHook=function(){var e=this;"function"==typeof this.window.addEventListener&&(this.windowUnloadHandler=function(){e.markClientZombied(),e.queue.enqueueAndForget((function(){return e.shutdown()}))},this.window.addEventListener("unload",this.windowUnloadHandler))},e.prototype.detachWindowUnloadHook=function(){this.windowUnloadHandler&&(b("function"==typeof this.window.removeEventListener,"Expected 'window.removeEventListener' to be a function"),this.window.removeEventListener("unload",this.windowUnloadHandler),this.windowUnloadHandler=null)},e.prototype.isClientZombied=function(e){try{var t=null!==this.webStorage.getItem(this.zombiedClientLocalStorageKey(e));return m(jn,"Client '"+e+"' "+(t?"is":"is not")+" zombied in LocalStorage"),t}catch(e){return g(jn,"Failed to get zombied client id.",e),!1}},e.prototype.markClientZombied=function(){try{this.webStorage.setItem(this.zombiedClientLocalStorageKey(this.clientId),String(Date.now()))}catch(e){g("Failed to set zombie client id.",e)}},e.prototype.removeClientZombiedEntry=function(){try{this.webStorage.removeItem(this.zombiedClientLocalStorageKey(this.clientId))}catch(e){}},e.prototype.zombiedClientLocalStorageKey=function(e){return"firestore_zombie_"+this.persistenceKey+"_"+e},e.MAIN_DATABASE="main",e}();function Un(e){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(t){if(!function(e){return e.code===S.FAILED_PRECONDITION&&e.message===Bn}(e))throw e;return m(jn,"Unexpectedly lost primary lease"),[2]}))}))}function Wn(e){return e.store(sn.store)}function zn(e){return e.store(wn.store)}var Kn=function(){function e(e,t){this.db=e,this.inMemoryPins=null,this.garbageCollector=new On(this,t)}return e.prototype.getSequenceNumberCount=function(e){var t=this.orphanedDocmentCount(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))},e.prototype.orphanedDocmentCount=function(e){var t=0;return this.forEachOrphanedDocumentSequenceNumber(e,(function(e){t++})).next((function(){return t}))},e.prototype.forEachTarget=function(e,t){return this.db.getTargetCache().forEachTarget(e,t)},e.prototype.forEachOrphanedDocumentSequenceNumber=function(e,t){return this.forEachOrphanedDocument(e,(function(e,n){return t(n)}))},e.prototype.setInMemoryPins=function(e){this.inMemoryPins=e},e.prototype.addReference=function(e,t){return Gn(e,t)},e.prototype.removeReference=function(e,t){return Gn(e,t)},e.prototype.removeTargets=function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)},e.prototype.removeMutationReference=function(e,t){return Gn(e,t)},e.prototype.isPinned=function(e,t){return this.inMemoryPins.containsKey(t)?Ge.resolve(!0):function(e,t){var n=!1;return st(e).iterateSerial((function(r){return nt(e,r,t).next((function(e){return e&&(n=!0),Ge.resolve(!e)}))})).next((function(){return n}))}(e,t)},e.prototype.removeOrphanedDocuments=function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.forEachOrphanedDocument(e,(function(a,s){if(s<=t){var u=n.isPinned(e,a).next((function(t){if(!t)return o++,r.getEntry(e,a).next((function(){return r.removeEntry(a),mt(e).delete([0,Te(a.path)])}))}));i.push(u)}})).next((function(){return Ge.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return o}))},e.prototype.removeTarget=function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)},e.prototype.updateLimboDocument=function(e,t){return Gn(e,t)},e.prototype.forEachOrphanedDocument=function(e,t){var n,r=mt(e),i=ue.INVALID;return r.iterate({index:gn.documentTargetsIndex},(function(e,r){var o=e[0],a=(e[1],r.path),s=r.sequenceNumber;0===o?(i!==ue.INVALID&&t(new fe(Ee(n)),i),i=s,n=a):i=ue.INVALID})).next((function(){i!==ue.INVALID&&t(new fe(Ee(n)),i)}))},e.prototype.getCacheSize=function(e){return this.db.getRemoteDocumentCache().getSize(e)},e}();function Gn(e,t){return mt(e).put(function(e,t){return new gn(0,Te(e.path),t)}(t,e.currentSequenceNumber))}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qn=Number,Hn=Qn.MIN_SAFE_INTEGER||-(Math.pow(2,53)-1),Yn=Qn.MAX_SAFE_INTEGER||Math.pow(2,53)-1,Jn=Qn.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e};function Xn(e){return null==e}function $n(e){return Jn(e)&&e<=Yn&&e>=Hn}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Zn,er=function(){function e(e,t,n,r,i,o,a){void 0===t&&(t=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.memoizedCanonicalId=null}return e.prototype.canonicalId=function(){if(null===this.memoizedCanonicalId){var e=this.path.canonicalString();null!==this.collectionGroup&&(e+="|cg:"+this.collectionGroup),e+="|f:";for(var t=0,n=this.filters;t<n.length;t++){e+=n[t].canonicalId(),e+=","}e+="|ob:";for(var r=0,i=this.orderBy;r<i.length;r++){e+=i[r].canonicalId(),e+=","}Xn(this.limit)||(e+="|l:",e+=this.limit),this.startAt&&(e+="|lb:",e+=this.startAt.canonicalId()),this.endAt&&(e+="|ub:",e+=this.endAt.canonicalId()),this.memoizedCanonicalId=e}return this.memoizedCanonicalId},e.prototype.toString=function(){var e=this.path.canonicalString();return null!==this.collectionGroup&&(e+=" collectionGroup="+this.collectionGroup),this.filters.length>0&&(e+=", filters: ["+this.filters.join(", ")+"]"),Xn(this.limit)||(e+=", limit: "+this.limit),this.orderBy.length>0&&(e+=", orderBy: ["+this.orderBy.join(", ")+"]"),this.startAt&&(e+=", startAt: "+this.startAt.canonicalId()),this.endAt&&(e+=", endAt: "+this.endAt.canonicalId()),"Target("+e+")"},e.prototype.isEqual=function(e){if(this.limit!==e.limit)return!1;if(this.orderBy.length!==e.orderBy.length)return!1;for(var t=0;t<this.orderBy.length;t++)if(!this.orderBy[t].isEqual(e.orderBy[t]))return!1;if(this.filters.length!==e.filters.length)return!1;for(t=0;t<this.filters.length;t++)if(!this.filters[t].isEqual(e.filters[t]))return!1;return this.collectionGroup===e.collectionGroup&&(!!this.path.isEqual(e.path)&&(!(null!==this.startAt?!this.startAt.isEqual(e.startAt):null!==e.startAt)&&(null!==this.endAt?this.endAt.isEqual(e.endAt):null===e.endAt)))},e.prototype.isDocumentQuery=function(){return fe.isDocumentKey(this.path)&&null===this.collectionGroup&&0===this.filters.length},e}();
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */!function(e){e.First="F",e.Last="L"}(Zn||(Zn={}));var tr=function(){function e(e,t,n,r,i,o,a,s){void 0===t&&(t=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=Zn.First),void 0===a&&(a=null),void 0===s&&(s=null),this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=s,this.memoizedOrderBy=null,this.memoizedTarget=null,this.startAt&&this.assertValidBound(this.startAt),this.endAt&&this.assertValidBound(this.endAt)}return e.atPath=function(t){return new e(t)},Object.defineProperty(e.prototype,"orderBy",{get:function(){if(null===this.memoizedOrderBy){var e=this.getInequalityFilterField(),t=this.getFirstOrderByField();if(null!==e&&null===t)e.isKeyField()?this.memoizedOrderBy=[fr]:this.memoizedOrderBy=[new dr(e),fr];else{b(null===e||null!==t&&e.isEqual(t),"First orderBy should match inequality field."),this.memoizedOrderBy=[];for(var n=!1,r=0,i=this.explicitOrderBy;r<i.length;r++){var o=i[r];this.memoizedOrderBy.push(o),o.field.isKeyField()&&(n=!0)}if(!n){var a=this.explicitOrderBy.length>0?this.explicitOrderBy[this.explicitOrderBy.length-1].dir:lr.ASCENDING;this.memoizedOrderBy.push(a===lr.ASCENDING?fr:pr)}}}return this.memoizedOrderBy},enumerable:!0,configurable:!0}),e.prototype.addFilter=function(t){b(null==this.getInequalityFilterField()||!(t instanceof ir)||!t.isInequality()||t.field.isEqual(this.getInequalityFilterField()),"Query must only have one inequality field."),b(!this.isDocumentQuery(),"No filtering allowed for document query");var n=this.filters.concat([t]);return new e(this.path,this.collectionGroup,this.explicitOrderBy.slice(),n,this.limit,this.limitType,this.startAt,this.endAt)},e.prototype.addOrderBy=function(t){b(!this.startAt&&!this.endAt,"Bounds must be set after orderBy");var n=this.explicitOrderBy.concat([t]);return new e(this.path,this.collectionGroup,n,this.filters.slice(),this.limit,this.limitType,this.startAt,this.endAt)},e.prototype.withLimitToFirst=function(t){return new e(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),t,Zn.First,this.startAt,this.endAt)},e.prototype.withLimitToLast=function(t){return new e(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),t,Zn.Last,this.startAt,this.endAt)},e.prototype.withStartAt=function(t){return new e(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.limitType,t,this.endAt)},e.prototype.withEndAt=function(t){return new e(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.limitType,this.startAt,t)},e.prototype.asCollectionQueryAtPath=function(t){return new e(t,null,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.limitType,this.startAt,this.endAt)},e.prototype.matchesAllDocuments=function(){return 0===this.filters.length&&null===this.limit&&null==this.startAt&&null==this.endAt&&(0===this.explicitOrderBy.length||1===this.explicitOrderBy.length&&this.explicitOrderBy[0].field.isKeyField())},e.prototype.canonicalId=function(){return this.toTarget().canonicalId()+"|lt:"+this.limitType},e.prototype.toString=function(){return"Query(target="+this.toTarget().toString()+"; limitType="+this.limitType+")"},e.prototype.isEqual=function(e){return this.toTarget().isEqual(e.toTarget())&&this.limitType===e.limitType},e.prototype.docComparator=function(e,t){for(var n=!1,r=0,i=this.orderBy;r<i.length;r++){var o=i[r],a=o.compare(e,t);if(0!==a)return a;n=n||o.field.isKeyField()}return b(n,"orderBy used that doesn't compare on key field"),0},e.prototype.matches=function(e){return this.matchesPathAndCollectionGroup(e)&&this.matchesOrderBy(e)&&this.matchesFilters(e)&&this.matchesBounds(e)},e.prototype.hasLimitToFirst=function(){return!Xn(this.limit)&&this.limitType===Zn.First},e.prototype.hasLimitToLast=function(){return!Xn(this.limit)&&this.limitType===Zn.Last},e.prototype.getFirstOrderByField=function(){return this.explicitOrderBy.length>0?this.explicitOrderBy[0].field:null},e.prototype.getInequalityFilterField=function(){for(var e=0,t=this.filters;e<t.length;e++){var n=t[e];if(n instanceof ir&&n.isInequality())return n.field}return null},e.prototype.findFilterOperator=function(e){for(var t=0,n=this.filters;t<n.length;t++){var r=n[t];if(r instanceof ir&&e.indexOf(r.op)>=0)return r.op}return null},e.prototype.isDocumentQuery=function(){return this.toTarget().isDocumentQuery()},e.prototype.isCollectionGroupQuery=function(){return null!==this.collectionGroup},e.prototype.toTarget=function(){if(!this.memoizedTarget)if(this.limitType===Zn.First)this.memoizedTarget=new er(this.path,this.collectionGroup,this.orderBy,this.filters,this.limit,this.startAt,this.endAt);else{for(var e=[],t=0,n=this.orderBy;t<n.length;t++){var r=n[t],i=r.dir===lr.DESCENDING?lr.ASCENDING:lr.DESCENDING;e.push(new dr(r.field,i))}var o=this.endAt?new hr(this.endAt.position,!this.endAt.before):null,a=this.startAt?new hr(this.startAt.position,!this.startAt.before):null;this.memoizedTarget=new er(this.path,this.collectionGroup,e,this.filters,this.limit,o,a)}return this.memoizedTarget},e.prototype.matchesPathAndCollectionGroup=function(e){var t=e.key.path;return null!==this.collectionGroup?e.key.hasCollectionId(this.collectionGroup)&&this.path.isPrefixOf(t):fe.isDocumentKey(this.path)?this.path.isEqual(t):this.path.isImmediateParentOf(t)},e.prototype.matchesOrderBy=function(e){for(var t=0,n=this.explicitOrderBy;t<n.length;t++){var r=n[t];if(!r.field.isKeyField()&&null===e.field(r.field))return!1}return!0},e.prototype.matchesFilters=function(e){for(var t=0,n=this.filters;t<n.length;t++){if(!n[t].matches(e))return!1}return!0},e.prototype.matchesBounds=function(e){return!(this.startAt&&!this.startAt.sortsBeforeDocument(this.orderBy,e))&&(!this.endAt||!this.endAt.sortsBeforeDocument(this.orderBy,e))},e.prototype.assertValidBound=function(e){b(e.position.length<=this.orderBy.length,"Bound is longer than orderBy")},e}(),nr=function(){},rr=function(){function e(e){this.name=e}return e.fromString=function(t){switch(t){case"<":return e.LESS_THAN;case"<=":return e.LESS_THAN_OR_EQUAL;case"==":return e.EQUAL;case">=":return e.GREATER_THAN_OR_EQUAL;case">":return e.GREATER_THAN;case"array-contains":return e.ARRAY_CONTAINS;case"in":return e.IN;case"array-contains-any":return e.ARRAY_CONTAINS_ANY;default:return v("Unknown FieldFilter operator: "+t)}},e.prototype.toString=function(){return this.name},e.prototype.isEqual=function(e){return this.name===e.name},e.LESS_THAN=new e("<"),e.LESS_THAN_OR_EQUAL=new e("<="),e.EQUAL=new e("=="),e.GREATER_THAN=new e(">"),e.GREATER_THAN_OR_EQUAL=new e(">="),e.ARRAY_CONTAINS=new e("array-contains"),e.IN=new e("in"),e.ARRAY_CONTAINS_ANY=new e("array-contains-any"),e}(),ir=function(e){function t(t,n,r){var i=e.call(this)||this;return i.field=t,i.op=n,i.value=r,i}return a.__extends(t,e),t.create=function(e,n,r){if(e.isKeyField())return n===rr.IN?(b(r instanceof Wt,"Comparing on key with IN, but filter value not an ArrayValue"),b(r.internalValue.every((function(e){return e instanceof Vt})),"Comparing on key with IN, but an array value was not a RefValue"),new ar(e,r)):(b(r instanceof Vt,"Comparing on key, but filter value not a RefValue"),b(n!==rr.ARRAY_CONTAINS&&n!==rr.ARRAY_CONTAINS_ANY,"'"+n.toString()+"' queries don't make sense on document keys."),new or(e,n,r));if(r.isEqual(At.INSTANCE)){if(n!==rr.EQUAL)throw new I(S.INVALID_ARGUMENT,"Invalid query. Null supports only equality comparisons.");return new t(e,n,r)}if(r.isEqual(Ot.NAN)){if(n!==rr.EQUAL)throw new I(S.INVALID_ARGUMENT,"Invalid query. NaN supports only equality comparisons.");return new t(e,n,r)}return n===rr.ARRAY_CONTAINS?new sr(e,r):n===rr.IN?(b(r instanceof Wt,"IN filter has invalid value: "+r.toString()),new ur(e,r)):n===rr.ARRAY_CONTAINS_ANY?(b(r instanceof Wt,"ARRAY_CONTAINS_ANY filter has invalid value: "+r.toString()),new cr(e,r)):new t(e,n,r)},t.prototype.matches=function(e){var t=e.field(this.field);return null!==t&&this.value.typeOrder===t.typeOrder&&this.matchesComparison(t.compareTo(this.value))},t.prototype.matchesComparison=function(e){switch(this.op){case rr.LESS_THAN:return e<0;case rr.LESS_THAN_OR_EQUAL:return e<=0;case rr.EQUAL:return 0===e;case rr.GREATER_THAN:return e>0;case rr.GREATER_THAN_OR_EQUAL:return e>=0;default:return v("Unknown FieldFilter operator: "+this.op)}},t.prototype.isInequality=function(){return[rr.LESS_THAN,rr.LESS_THAN_OR_EQUAL,rr.GREATER_THAN,rr.GREATER_THAN_OR_EQUAL].indexOf(this.op)>=0},t.prototype.canonicalId=function(){return this.field.canonicalString()+this.op.toString()+this.value.toString()},t.prototype.isEqual=function(e){return e instanceof t&&(this.op.isEqual(e.op)&&this.field.isEqual(e.field)&&this.value.isEqual(e.value))},t.prototype.toString=function(){return this.field.canonicalString()+" "+this.op+" "+this.value.value()},t}(nr),or=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.matches=function(e){var t=this.value,n=fe.comparator(e.key,t.key);return this.matchesComparison(n)},t}(ir),ar=function(e){function t(t,n){var r=e.call(this,t,rr.IN,n)||this;return r.value=n,r}return a.__extends(t,e),t.prototype.matches=function(e){return this.value.internalValue.some((function(t){return e.key.isEqual(t.key)}))},t}(ir),sr=function(e){function t(t,n){return e.call(this,t,rr.ARRAY_CONTAINS,n)||this}return a.__extends(t,e),t.prototype.matches=function(e){var t=e.field(this.field);return t instanceof Wt&&t.contains(this.value)},t}(ir),ur=function(e){function t(t,n){var r=e.call(this,t,rr.IN,n)||this;return r.value=n,r}return a.__extends(t,e),t.prototype.matches=function(e){var t=this.value,n=e.field(this.field);return null!==n&&t.contains(n)},t}(ir),cr=function(e){function t(t,n){var r=e.call(this,t,rr.ARRAY_CONTAINS_ANY,n)||this;return r.value=n,r}return a.__extends(t,e),t.prototype.matches=function(e){var t=this,n=e.field(this.field);return n instanceof Wt&&n.internalValue.some((function(e){return t.value.contains(e)}))},t}(ir),lr=function(){function e(e){this.name=e}return e.prototype.toString=function(){return this.name},e.ASCENDING=new e("asc"),e.DESCENDING=new e("desc"),e}(),hr=function(){function e(e,t){this.position=e,this.before=t}return e.prototype.canonicalId=function(){for(var e=this.before?"b:":"a:",t=0,n=this.position;t<n.length;t++){e+=n[t].toString()}return e},e.prototype.sortsBeforeDocument=function(e,t){b(this.position.length<=e.length,"Bound has more components than query's orderBy");for(var n=0,r=0;r<this.position.length;r++){var i=e[r],o=this.position[r];if(i.field.isKeyField())b(o instanceof Vt,"Bound has a non-key value where the key path is being used."),n=fe.comparator(o.key,t.key);else{var a=t.field(i.field);b(null!==a,"Field should exist since document matched the orderBy already."),n=o.compareTo(a)}if(i.dir===lr.DESCENDING&&(n*=-1),0!==n)break}return this.before?n<=0:n<0},e.prototype.isEqual=function(e){if(null===e)return!1;if(this.before!==e.before||this.position.length!==e.position.length)return!1;for(var t=0;t<this.position.length;t++){var n=this.position[t],r=e.position[t];if(!n.isEqual(r))return!1}return!0},e}(),dr=function(){function e(e,t){this.field=e,void 0===t&&(t=lr.ASCENDING),this.dir=t,this.isKeyOrderBy=e.isKeyField()}return e.prototype.compare=function(e,t){var n=this.isKeyOrderBy?Kt.compareByKey(e,t):Kt.compareByField(this.field,e,t);switch(this.dir){case lr.ASCENDING:return n;case lr.DESCENDING:return-1*n;default:return v("Unknown direction: "+this.dir)}},e.prototype.canonicalId=function(){return this.field.canonicalString()+this.dir.toString()},e.prototype.toString=function(){return this.field.canonicalString()+" ("+this.dir+")"},e.prototype.isEqual=function(e){return this.dir===e.dir&&this.field.isEqual(e.field)},e}(),fr=new dr(de.keyField(),lr.ASCENDING),pr=new dr(de.keyField(),lr.DESCENDING),mr=function(){function e(){}return e.prototype.setLocalDocumentsView=function(e){this.localDocumentsView=e},e.prototype.getDocumentsMatchingQuery=function(e,t,n,r){var o=this;return b(void 0!==this.localDocumentsView,"setLocalDocumentsView() not called"),t.matchesAllDocuments()?this.executeFullCollectionScan(e,t):n.isEqual(_e.MIN)?this.executeFullCollectionScan(e,t):this.localDocumentsView.getDocuments(e,r).next((function(a){var s=o.applyQuery(t,a);return(t.hasLimitToFirst()||t.hasLimitToLast())&&o.needsRefill(t.limitType,s,r,n)?o.executeFullCollectionScan(e,t):(f()<=i.DEBUG&&m("IndexFreeQueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),t.toString()),o.localDocumentsView.getDocumentsMatchingQuery(e,t,n).next((function(e){return s.forEach((function(t){e=e.insert(t.key,t)})),e})))}))},e.prototype.applyQuery=function(e,t){var n=new xe((function(t,n){return e.docComparator(t,n)}));return t.forEach((function(t,r){r instanceof Kt&&e.matches(r)&&(n=n.add(r))})),n},e.prototype.needsRefill=function(e,t,n,r){if(n.size!==t.size)return!0;var i=e===Zn.First?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},e.prototype.executeFullCollectionScan=function(e,t){return f()<=i.DEBUG&&m("IndexFreeQueryEngine","Using full collection scan to execute query: %s",t.toString()),this.localDocumentsView.getDocumentsMatchingQuery(e,t,_e.MIN)},e}(),gr=function(){function e(e,t,n){this.remoteDocumentCache=e,this.mutationQueue=t,this.indexManager=n}return e.prototype.getDocument=function(e,t){var n=this;return this.mutationQueue.getAllMutationBatchesAffectingDocumentKey(e,t).next((function(r){return n.getDocumentInternal(e,t,r)}))},e.prototype.getDocumentInternal=function(e,t,n){return this.remoteDocumentCache.getEntry(e,t).next((function(e){for(var r=0,i=n;r<i.length;r++){e=i[r].applyToLocalView(t,e)}return e}))},e.prototype.applyLocalMutationsToDocuments=function(e,t,n){var r=Oe();return t.forEach((function(e,t){for(var i=0,o=n;i<o.length;i++){t=o[i].applyToLocalView(e,t)}r=r.insert(e,t)})),r},e.prototype.getDocuments=function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t)}))},e.prototype.getLocalViewOfDocuments=function(e,t){var n=this;return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(r){var i=n.applyLocalMutationsToDocuments(e,t,r),o=Pe();return i.forEach((function(e,t){t||(t=new Gt(e,_e.forDeletedDoc())),o=o.insert(e,t)})),o}))},e.prototype.getDocumentsMatchingQuery=function(e,t,n){return t.isDocumentQuery()?this.getDocumentsMatchingDocumentQuery(e,t.path):t.isCollectionGroupQuery()?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)},e.prototype.getDocumentsMatchingDocumentQuery=function(e,t){return this.getDocument(e,new fe(t)).next((function(e){var t=je();return e instanceof Kt&&(t=t.insert(e.key,e)),t}))},e.prototype.getDocumentsMatchingCollectionGroupQuery=function(e,t,n){var r=this;b(t.path.isEmpty(),"Currently we only support collection group queries at the root.");var i=t.collectionGroup,o=je();return this.indexManager.getCollectionParents(e,i).next((function(a){return Ge.forEach(a,(function(a){var s=t.asCollectionQueryAtPath(a.child(i));return r.getDocumentsMatchingCollectionQuery(e,s,n).next((function(e){e.forEach((function(e,t){o=o.insert(e,t)}))}))})).next((function(){return o}))}))},e.prototype.getDocumentsMatchingCollectionQuery=function(e,t,n){var r,i,o=this;return this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n).next((function(n){return r=n,o.mutationQueue.getAllMutationBatchesAffectingQuery(e,t)})).next((function(t){return i=t,o.addMissingBaseDocuments(e,i,r).next((function(e){r=e;for(var t=0,n=i;t<n.length;t++)for(var o=n[t],a=0,s=o.mutations;a<s.length;a++){var u=s[a],c=u.key,l=r.get(c),h=u.applyToLocalView(l,l,o.localWriteTime);r=h instanceof Kt?r.insert(c,h):r.remove(c)}}))})).next((function(){return r.forEach((function(e,n){t.matches(n)||(r=r.remove(e))})),r}))},e.prototype.addMissingBaseDocuments=function(e,t,n){for(var r=qe(),i=0,o=t;i<o.length;i++)for(var a=0,s=o[i].mutations;a<s.length;a++){var u=s[a];u instanceof Ct&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.remoteDocumentCache.getEntries(e,r).next((function(e){return e.forEach((function(e,t){null!==t&&t instanceof Kt&&(c=c.insert(e,t))})),c}))},e}(),yr=function(){function e(){this.refsByKey=new xe(vr.compareByKey),this.refsByTarget=new xe(vr.compareByTargetId)}return e.prototype.isEmpty=function(){return this.refsByKey.isEmpty()},e.prototype.addReference=function(e,t){var n=new vr(e,t);this.refsByKey=this.refsByKey.add(n),this.refsByTarget=this.refsByTarget.add(n)},e.prototype.addReferences=function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))},e.prototype.removeReference=function(e,t){this.removeRef(new vr(e,t))},e.prototype.removeReferences=function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))},e.prototype.removeReferencesForId=function(e){var t=this,n=fe.EMPTY,r=new vr(n,e),i=new vr(n,e+1),o=[];return this.refsByTarget.forEachInRange([r,i],(function(e){t.removeRef(e),o.push(e.key)})),o},e.prototype.removeAllReferences=function(){var e=this;this.refsByKey.forEach((function(t){return e.removeRef(t)}))},e.prototype.removeRef=function(e){this.refsByKey=this.refsByKey.delete(e),this.refsByTarget=this.refsByTarget.delete(e)},e.prototype.referencesForId=function(e){var t=fe.EMPTY,n=new vr(t,e),r=new vr(t,e+1),i=qe();return this.refsByTarget.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i},e.prototype.containsKey=function(e){var t=new vr(e,0),n=this.refsByKey.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)},e}(),vr=function(){function e(e,t){this.key=e,this.targetOrBatchId=t}return e.compareByKey=function(e,t){return fe.comparator(e.key,t.key)||X(e.targetOrBatchId,t.targetOrBatchId)},e.compareByTargetId=function(e,t){return X(e.targetOrBatchId,t.targetOrBatchId)||fe.comparator(e.key,t.key)},e}(),br=function(){function e(e,t,n){this.persistence=e,this.queryEngine=t,this.localViewReferences=new yr,this.targetDataByTarget=new De(X),this.targetIdByTarget=new Ht((function(e){return e.canonicalId()})),this.lastDocumentChangeReadTime=_e.MIN,b(e.started,"LocalStore was passed an unstarted persistence implementation"),this.persistence.referenceDelegate.setInMemoryPins(this.localViewReferences),this.mutationQueue=e.getMutationQueue(n),this.remoteDocuments=e.getRemoteDocumentCache(),this.targetCache=e.getTargetCache(),this.localDocuments=new gr(this.remoteDocuments,this.mutationQueue,this.persistence.getIndexManager()),this.queryEngine.setLocalDocumentsView(this.localDocuments)}return e.prototype.start=function(){return this.synchronizeLastDocumentChangeReadTime()},e.prototype.handleUserChange=function(e){return a.__awaiter(this,void 0,void 0,(function(){var t,n,r,i=this;return a.__generator(this,(function(o){switch(o.label){case 0:return t=this.mutationQueue,n=this.localDocuments,[4,this.persistence.runTransaction("Handle user change","readonly-idempotent",(function(r){var o;return i.mutationQueue.getAllMutationBatches(r).next((function(a){return o=a,t=i.persistence.getMutationQueue(e),n=new gr(i.remoteDocuments,t,i.persistence.getIndexManager()),t.getAllMutationBatches(r)})).next((function(e){for(var t=[],i=[],a=qe(),s=0,u=o;s<u.length;s++){var c=u[s];t.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++){var d=h[l];a=a.add(d.key)}}for(var f=0,p=e;f<p.length;f++){c=p[f];i.push(c.batchId);for(var m=0,g=c.mutations;m<g.length;m++){d=g[m];a=a.add(d.key)}}return n.getDocuments(r,a).next((function(e){return{affectedDocuments:e,removedBatchIds:t,addedBatchIds:i}}))}))}))];case 1:return r=o.sent(),this.mutationQueue=t,this.localDocuments=n,this.queryEngine.setLocalDocumentsView(this.localDocuments),[2,r]}}))}))},e.prototype.localWrite=function(e){var t,n=this,r=Ce.now(),i=e.reduce((function(e,t){return e.add(t.key)}),qe());return this.persistence.runTransaction("Locally write mutations","readwrite-idempotent",(function(o){return n.localDocuments.getDocuments(o,i).next((function(i){t=i;for(var a=[],s=0,u=e;s<u.length;s++){var c=u[s],l=c.extractBaseValue(t.get(c.key));null!=l&&a.push(new Ct(c.key,l,l.fieldMask(),St.exists(!0)))}return n.mutationQueue.addMutationBatch(o,r,a,e)}))})).then((function(e){var n=e.applyToLocalDocumentSet(t);return{batchId:e.batchId,changes:n}}))},e.prototype.lookupMutationDocuments=function(e){var t=this;return this.persistence.runTransaction("Lookup mutation documents","readonly-idempotent",(function(n){return t.mutationQueue.lookupMutationKeys(n,e).next((function(e){return e?t.localDocuments.getDocuments(n,e):Ge.resolve(null)}))}))},e.prototype.acknowledgeBatch=function(e){var t=this;return this.persistence.runTransaction("Acknowledge batch","readwrite-primary-idempotent",(function(n){var r=e.batch.keys(),i=t.remoteDocuments.newChangeBuffer({trackRemovals:!0});return t.mutationQueue.acknowledgeBatch(n,e.batch,e.streamToken).next((function(){return t.applyWriteToRemoteDocuments(n,e,i)})).next((function(){return i.apply(n)})).next((function(){return t.mutationQueue.performConsistencyCheck(n)})).next((function(){return t.localDocuments.getDocuments(n,r)}))}))},e.prototype.rejectBatch=function(e){var t=this;return this.persistence.runTransaction("Reject batch","readwrite-primary-idempotent",(function(n){var r;return t.mutationQueue.lookupMutationBatch(n,e).next((function(e){return b(null!==e,"Attempt to reject nonexistent batch!"),r=e.keys(),t.mutationQueue.removeMutationBatch(n,e)})).next((function(){return t.mutationQueue.performConsistencyCheck(n)})).next((function(){return t.localDocuments.getDocuments(n,r)}))}))},e.prototype.getHighestUnacknowledgedBatchId=function(){var e=this;return this.persistence.runTransaction("Get highest unacknowledged batch id","readonly-idempotent",(function(t){return e.mutationQueue.getHighestUnacknowledgedBatchId(t)}))},e.prototype.getLastStreamToken=function(){var e=this;return this.persistence.runTransaction("Get last stream token","readonly-idempotent",(function(t){return e.mutationQueue.getLastStreamToken(t)}))},e.prototype.setLastStreamToken=function(e){var t=this;return this.persistence.runTransaction("Set last stream token","readwrite-primary-idempotent",(function(n){return t.mutationQueue.setLastStreamToken(n,e)}))},e.prototype.getLastRemoteSnapshotVersion=function(){var e=this;return this.persistence.runTransaction("Get last remote snapshot version","readonly-idempotent",(function(t){return e.targetCache.getLastRemoteSnapshotVersion(t)}))},e.prototype.applyRemoteEvent=function(t){var n=this,r=t.snapshotVersion,i=this.targetDataByTarget;return this.persistence.runTransaction("Apply remote event","readwrite-primary-idempotent",(function(o){var a=n.remoteDocuments.newChangeBuffer({trackRemovals:!0});i=n.targetDataByTarget;var s=[];D(t.targetChanges,(function(t,a){var u=i.get(t);if(u){s.push(n.targetCache.removeMatchingKeys(o,a.removedDocuments,t).next((function(){return n.targetCache.addMatchingKeys(o,a.addedDocuments,t)})));var c=a.resumeToken;if(c.length>0){var l=u.withResumeToken(c,r).withSequenceNumber(o.currentSequenceNumber);i=i.insert(t,l),e.shouldPersistTargetData(u,l,a)&&s.push(n.targetCache.updateTargetData(o,l))}}}));var u=Pe(),c=qe();if(t.documentUpdates.forEach((function(e,t){c=c.add(e)})),s.push(a.getEntries(o,c).next((function(e){t.documentUpdates.forEach((function(i,c){var l=e.get(i);c instanceof Gt&&c.version.isEqual(_e.MIN)?(a.removeEntry(i,r),u=u.insert(i,c)):null==l||c.version.compareTo(l.version)>0||0===c.version.compareTo(l.version)&&l.hasPendingWrites?(b(!_e.MIN.isEqual(r),"Cannot add a document when the remote version is zero"),a.addEntry(c,r),u=u.insert(i,c)):m("LocalStore","Ignoring outdated watch update for ",i,". Current version:",l.version," Watch version:",c.version),t.resolvedLimboDocuments.has(i)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(o,i))}))}))),!r.isEqual(_e.MIN)){var l=n.targetCache.getLastRemoteSnapshotVersion(o).next((function(e){return b(r.compareTo(e)>=0,"Watch stream reverted to previous snapshot?? "+r+" < "+e),n.targetCache.setTargetsMetadata(o,o.currentSequenceNumber,r)}));s.push(l)}return Ge.waitFor(s).next((function(){return a.apply(o)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(o,u)}))})).then((function(e){return n.targetDataByTarget=i,e}))},e.shouldPersistTargetData=function(e,t,n){return b(t.resumeToken.length>0,"Attempted to persist target data with no resume token"),0===e.resumeToken.length||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=this.RESUME_TOKEN_MAX_AGE_MICROS||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)},e.prototype.notifyLocalViewChanges=function(e){for(var t=this,n=0,r=e;n<r.length;n++){var i=r[n],o=i.targetId;if(this.localViewReferences.addReferences(i.addedKeys,o),this.localViewReferences.removeReferences(i.removedKeys,o),!i.fromCache){var a=this.targetDataByTarget.get(o);b(null!==a,"Can't set limbo-free snapshot version for unknown target: "+o);var s=a.snapshotVersion,u=a.withLastLimboFreeSnapshotVersion(s);this.targetDataByTarget=this.targetDataByTarget.insert(o,u)}}return this.persistence.runTransaction("notifyLocalViewChanges","readwrite-idempotent",(function(n){return Ge.forEach(e,(function(e){return Ge.forEach(e.removedKeys,(function(e){return t.persistence.referenceDelegate.removeReference(n,e)}))}))}))},e.prototype.nextMutationBatch=function(e){var t=this;return this.persistence.runTransaction("Get next mutation batch","readonly-idempotent",(function(n){return void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(n,e)}))},e.prototype.readDocument=function(e){var t=this;return this.persistence.runTransaction("read document","readonly-idempotent",(function(n){return t.localDocuments.getDocument(n,e)}))},e.prototype.allocateTarget=function(e){var t=this;return this.persistence.runTransaction("Allocate target","readwrite-idempotent",(function(n){var r;return t.targetCache.getTargetData(n,e).next((function(i){return i?(r=i,Ge.resolve(r)):t.targetCache.allocateTargetId(n).next((function(i){return r=new kn(e,i,Tn.Listen,n.currentSequenceNumber),t.targetCache.addTargetData(n,r).next((function(){return r}))}))}))})).then((function(n){return null===t.targetDataByTarget.get(n.targetId)&&(t.targetDataByTarget=t.targetDataByTarget.insert(n.targetId,n),t.targetIdByTarget.set(e,n.targetId)),n}))},e.prototype.getTargetData=function(e,t){var n=this.targetIdByTarget.get(t);return void 0!==n?Ge.resolve(this.targetDataByTarget.get(n)):this.targetCache.getTargetData(e,t)},e.prototype.releaseTarget=function(e,t){var n=this,r=this.targetDataByTarget.get(e);b(null!==r,"Tried to release nonexistent target: "+e);var i=t?"readwrite-idempotent":"readwrite-primary-idempotent";return this.persistence.runTransaction("Release target",i,(function(i){var o=n.localViewReferences.removeReferencesForId(e);return t?Ge.resolve():Ge.forEach(o,(function(e){return n.persistence.referenceDelegate.removeReference(i,e)})).next((function(){n.persistence.referenceDelegate.removeTarget(i,r)}))})).then((function(){n.targetDataByTarget=n.targetDataByTarget.remove(e),n.targetIdByTarget.delete(r.target)}))},e.prototype.executeQuery=function(e,t){var n=this,r=_e.MIN,i=qe();return this.persistence.runTransaction("Execute query","readonly-idempotent",(function(o){return n.getTargetData(o,e.toTarget()).next((function(e){if(e)return r=e.lastLimboFreeSnapshotVersion,n.targetCache.getMatchingKeysForTargetId(o,e.targetId).next((function(e){i=e}))})).next((function(){return n.queryEngine.getDocumentsMatchingQuery(o,e,t?r:_e.MIN,t?i:qe())})).next((function(e){return{documents:e,remoteKeys:i}}))}))},e.prototype.remoteDocumentKeys=function(e){var t=this;return this.persistence.runTransaction("Remote document keys","readonly-idempotent",(function(n){return t.targetCache.getMatchingKeysForTargetId(n,e)}))},e.prototype.getActiveClients=function(){return this.persistence.getActiveClients()},e.prototype.removeCachedMutationBatchMetadata=function(e){this.mutationQueue.removeCachedMutationKeys(e)},e.prototype.setNetworkEnabled=function(e){this.persistence.setNetworkEnabled(e)},e.prototype.applyWriteToRemoteDocuments=function(e,t,n){var r=this,i=t.batch,o=i.keys(),a=Ge.resolve();return o.forEach((function(r){a=a.next((function(){return n.getEntry(e,r)})).next((function(e){var o=e,a=t.docVersions.get(r);b(null!==a,"ackVersions should contain every doc in the write."),(!o||o.version.compareTo(a)<0)&&((o=i.applyToRemoteDocument(r,o,t))?n.addEntry(o,t.commitVersion):b(!e,"Mutation batch "+i+" applied to document "+e+" resulted in null"))}))})),a.next((function(){return r.mutationQueue.removeMutationBatch(e,i)}))},e.prototype.collectGarbage=function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary-idempotent",(function(n){return e.collect(n,t.targetDataByTarget)}))},e.prototype.getTarget=function(e){var t=this,n=this.targetDataByTarget.get(e);return n?Promise.resolve(n.target):this.persistence.runTransaction("Get target data","readonly-idempotent",(function(n){return t.targetCache.getTargetDataForTarget(n,e).next((function(e){return e?e.target:null}))}))},e.prototype.getNewDocumentChanges=function(){var e=this;return this.persistence.runTransaction("Get new document changes","readonly-idempotent",(function(t){return e.remoteDocuments.getNewDocumentChanges(t,e.lastDocumentChangeReadTime)})).then((function(t){var n=t.changedDocs,r=t.readTime;return e.lastDocumentChangeReadTime=r,n}))},e.prototype.synchronizeLastDocumentChangeReadTime=function(){return a.__awaiter(this,void 0,void 0,(function(){var e,t=this;return a.__generator(this,(function(n){return this.remoteDocuments instanceof Jt?(e=this.remoteDocuments,[2,this.persistence.runTransaction("Synchronize last document change read time","readonly-idempotent",(function(t){return e.getLastDocumentChange(t)})).then((function(e){var n=e.readTime;t.lastDocumentChangeReadTime=n}))]):[2]}))}))},e.RESUME_TOKEN_MAX_AGE_MICROS=3e8,e}(),wr=function(){function e(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.nextBatchId=1,this.lastStreamToken=T(),this.batchesByDocumentKey=new xe(vr.compareByKey)}return e.prototype.checkEmpty=function(e){return Ge.resolve(0===this.mutationQueue.length)},e.prototype.acknowledgeBatch=function(e,t,n){var r=t.batchId,i=this.indexOfExistingBatchId(r,"acknowledged");b(0===i,"Can only acknowledge the first batch in the mutation queue");var o=this.mutationQueue[i];return b(r===o.batchId,"Queue ordering failure: expected batch "+r+", got batch "+o.batchId),this.lastStreamToken=n,Ge.resolve()},e.prototype.getLastStreamToken=function(e){return Ge.resolve(this.lastStreamToken)},e.prototype.setLastStreamToken=function(e,t){return this.lastStreamToken=t,Ge.resolve()},e.prototype.addMutationBatch=function(e,t,n,r){b(0!==r.length,"Mutation batches should not be empty");var i=this.nextBatchId;(this.nextBatchId++,this.mutationQueue.length>0)&&b(this.mutationQueue[this.mutationQueue.length-1].batchId<i,"Mutation batchIDs must be monotonically increasing order");var o=new ze(i,t,n,r);this.mutationQueue.push(o);for(var a=0,s=r;a<s.length;a++){var u=s[a];this.batchesByDocumentKey=this.batchesByDocumentKey.add(new vr(u.key,i)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast())}return Ge.resolve(o)},e.prototype.lookupMutationBatch=function(e,t){return Ge.resolve(this.findMutationBatch(t))},e.prototype.lookupMutationKeys=function(e,t){var n=this.findMutationBatch(t);return b(null!=n,"Failed to find local mutation batch."),Ge.resolve(n.keys())},e.prototype.getNextMutationBatchAfterBatchId=function(e,t){var n=t+1,r=this.indexOfBatchId(n),i=r<0?0:r;return Ge.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)},e.prototype.getHighestUnacknowledgedBatchId=function(){return Ge.resolve(0===this.mutationQueue.length?-1:this.nextBatchId-1)},e.prototype.getAllMutationBatches=function(e){return Ge.resolve(this.mutationQueue.slice())},e.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,t){var n=this,r=new vr(t,0),i=new vr(t,Number.POSITIVE_INFINITY),o=[];return this.batchesByDocumentKey.forEachInRange([r,i],(function(e){b(t.isEqual(e.key),"Should only iterate over a single key's batches");var r=n.findMutationBatch(e.targetOrBatchId);b(null!==r,"Batches in the index must exist in the main table"),o.push(r)})),Ge.resolve(o)},e.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,t){var n=this,r=new xe(X);return t.forEach((function(e){var t=new vr(e,0),i=new vr(e,Number.POSITIVE_INFINITY);n.batchesByDocumentKey.forEachInRange([t,i],(function(t){b(e.isEqual(t.key),"For each key, should only iterate over a single key's batches"),r=r.add(t.targetOrBatchId)}))})),Ge.resolve(this.findMutationBatches(r))},e.prototype.getAllMutationBatchesAffectingQuery=function(e,t){b(!t.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var n=t.path,r=n.length+1,i=n;fe.isDocumentKey(i)||(i=i.child(""));var o=new vr(new fe(i),0),a=new xe(X);return this.batchesByDocumentKey.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.targetOrBatchId)),!0)}),o),Ge.resolve(this.findMutationBatches(a))},e.prototype.findMutationBatches=function(e){var t=this,n=[];return e.forEach((function(e){var r=t.findMutationBatch(e);null!==r&&n.push(r)})),n},e.prototype.removeMutationBatch=function(e,t){var n=this;b(0===this.indexOfExistingBatchId(t.batchId,"removed"),"Can only remove the first entry of the mutation queue"),this.mutationQueue.shift();var r=this.batchesByDocumentKey;return Ge.forEach(t.mutations,(function(i){var o=new vr(i.key,t.batchId);return r=r.delete(o),n.referenceDelegate.removeMutationReference(e,i.key)})).next((function(){n.batchesByDocumentKey=r}))},e.prototype.removeCachedMutationKeys=function(e){},e.prototype.containsKey=function(e,t){var n=new vr(t,0),r=this.batchesByDocumentKey.firstAfterOrEqual(n);return Ge.resolve(t.isEqual(r&&r.key))},e.prototype.performConsistencyCheck=function(e){return 0===this.mutationQueue.length&&b(this.batchesByDocumentKey.isEmpty(),"Document leak -- detected dangling mutation references when queue is empty."),Ge.resolve()},e.prototype.indexOfExistingBatchId=function(e,t){var n=this.indexOfBatchId(e);return b(n>=0&&n<this.mutationQueue.length,"Batches must exist to be "+t),n},e.prototype.indexOfBatchId=function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId},e.prototype.findMutationBatch=function(e){var t=this.indexOfBatchId(e);if(t<0||t>=this.mutationQueue.length)return null;var n=this.mutationQueue[t];return b(n.batchId===e,"If found batch must match"),n},e}();var Tr,Sr=function(){function e(e,t){this.indexManager=e,this.sizer=t,this.docs=new De(fe.comparator),this.size=0}return e.prototype.addEntry=function(e,t,n){b(!n.isEqual(_e.MIN),"Cannot add a document with a read time of zero");var r=t.key,i=this.docs.get(r),o=i?i.size:0,a=this.sizer(t);return this.docs=this.docs.insert(r,{maybeDocument:t,size:a,readTime:n}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())},e.prototype.removeEntry=function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)},e.prototype.getEntry=function(e,t){var n=this.docs.get(t);return Ge.resolve(n?n.maybeDocument:null)},e.prototype.getEntries=function(e,t){var n=this,r=Oe();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.maybeDocument:null)})),Ge.resolve(r)},e.prototype.getDocumentsMatchingQuery=function(e,t,n){b(!t.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");for(var r=je(),i=new fe(t.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var a=o.getNext(),s=a.key,u=a.value,c=u.maybeDocument,l=u.readTime;if(!t.path.isPrefixOf(s.path))break;l.compareTo(n)<=0||c instanceof Kt&&t.matches(c)&&(r=r.insert(c.key,c))}return Ge.resolve(r)},e.prototype.forEachDocumentKey=function(e,t){return Ge.forEach(this.docs,(function(e){return t(e)}))},e.prototype.getNewDocumentChanges=function(e,t){throw new Error("getNewDocumentChanges() is not supported with MemoryPersistence")},e.prototype.newChangeBuffer=function(t){return new e.RemoteDocumentChangeBuffer(this)},e.prototype.getSize=function(e){return Ge.resolve(this.size)},e.RemoteDocumentChangeBuffer=function(e){function t(t){var n=e.call(this)||this;return n.documentCache=t,n}return a.__extends(t,e),t.prototype.applyChanges=function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i?n.push(t.documentCache.addEntry(e,i,t.readTime)):t.documentCache.removeEntry(r)})),Ge.waitFor(n)},t.prototype.getFromCache=function(e,t){return this.documentCache.getEntry(e,t)},t.prototype.getAllFromCache=function(e,t){return this.documentCache.getEntries(e,t)},t}(Yt),e}(),Ir=function(){function e(e){this.persistence=e,this.targets=new Ht((function(e){return e.canonicalId()})),this.lastRemoteSnapshotVersion=_e.MIN,this.highestTargetId=0,this.highestSequenceNumber=0,this.references=new yr,this.targetCount=0,this.targetIdGenerator=lt.forTargetCache()}return e.prototype.forEachTarget=function(e,t){return this.targets.forEach((function(e,n){return t(n)})),Ge.resolve()},e.prototype.getLastRemoteSnapshotVersion=function(e){return Ge.resolve(this.lastRemoteSnapshotVersion)},e.prototype.getHighestSequenceNumber=function(e){return Ge.resolve(this.highestSequenceNumber)},e.prototype.allocateTargetId=function(e){var t=this.targetIdGenerator.after(this.highestTargetId);return this.highestTargetId=t,Ge.resolve(t)},e.prototype.setTargetsMetadata=function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.highestSequenceNumber&&(this.highestSequenceNumber=t),Ge.resolve()},e.prototype.saveTargetData=function(e){this.targets.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.highestTargetId=t),e.sequenceNumber>this.highestSequenceNumber&&(this.highestSequenceNumber=e.sequenceNumber)},e.prototype.addTargetData=function(e,t){return b(!this.targets.has(t.target),"Adding a target that already exists"),this.saveTargetData(t),this.targetCount+=1,Ge.resolve()},e.prototype.updateTargetData=function(e,t){return b(this.targets.has(t.target),"Updating a non-existent target"),this.saveTargetData(t),Ge.resolve()},e.prototype.removeTargetData=function(e,t){return b(this.targetCount>0,"Removing a target from an empty cache"),b(this.targets.has(t.target),"Removing a non-existent target from the cache"),this.targets.delete(t.target),this.references.removeReferencesForId(t.targetId),this.targetCount-=1,Ge.resolve()},e.prototype.removeTargets=function(e,t,n){var r=this,i=0,o=[];return this.targets.forEach((function(a,s){s.sequenceNumber<=t&&null===n.get(s.targetId)&&(r.targets.delete(a),o.push(r.removeMatchingKeysForTargetId(e,s.targetId)),i++)})),Ge.waitFor(o).next((function(){return i}))},e.prototype.getTargetCount=function(e){return Ge.resolve(this.targetCount)},e.prototype.getTargetData=function(e,t){var n=this.targets.get(t)||null;return Ge.resolve(n)},e.prototype.getTargetDataForTarget=function(e,t){return v("Not yet implemented.")},e.prototype.addMatchingKeys=function(e,t,n){this.references.addReferences(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.addReference(e,t))})),Ge.waitFor(i)},e.prototype.removeMatchingKeys=function(e,t,n){this.references.removeReferences(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.removeReference(e,t))})),Ge.waitFor(i)},e.prototype.removeMatchingKeysForTargetId=function(e,t){return this.references.removeReferencesForId(t),Ge.resolve()},e.prototype.getMatchingKeysForTargetId=function(e,t){var n=this.references.referencesForId(t);return Ge.resolve(n)},e.prototype.containsKey=function(e,t){return Ge.resolve(this.references.containsKey(t))},e}(),Er=function(){function e(e,t){var n=this;this.clientId=e,this.mutationQueues={},this.listenSequence=new ue(0),this._started=!1,this._started=!0,this.referenceDelegate=t(this),this.targetCache=new Ir(this);this.indexManager=new tn,this.remoteDocumentCache=new Sr(this.indexManager,(function(e){return n.referenceDelegate.documentSize(e)}))}return e.createLruPersistence=function(t,n,r){return new e(t,(function(e){return new Dr(e,new Nn(n),r)}))},e.createEagerPersistence=function(t){return new e(t,(function(e){return new _r(e)}))},e.prototype.shutdown=function(){return this._started=!1,Promise.resolve()},Object.defineProperty(e.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),e.prototype.getActiveClients=function(){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(e){return[2,[this.clientId]]}))}))},e.prototype.setPrimaryStateListener=function(e){return e(!0)},e.prototype.setDatabaseDeletedListener=function(){},e.prototype.setNetworkEnabled=function(e){},e.prototype.getIndexManager=function(){return this.indexManager},e.prototype.getMutationQueue=function(e){var t=this.mutationQueues[e.toKey()];return t||(t=new wr(this.indexManager,this.referenceDelegate),this.mutationQueues[e.toKey()]=t),t},e.prototype.getTargetCache=function(){return this.targetCache},e.prototype.getRemoteDocumentCache=function(){return this.remoteDocumentCache},e.prototype.runTransaction=function(e,t,n){var r=this;m("MemoryPersistence","Starting transaction:",e);var i=new Cr(this.listenSequence.next());return this.referenceDelegate.onTransactionStarted(),n(i).next((function(e){return r.referenceDelegate.onTransactionCommitted(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))},e.prototype.mutationQueuesContainKey=function(e,t){return Ge.or((n=this.mutationQueues,r=[],k(n,(function(e,t){return r.push(t)})),r).map((function(n){return function(){return n.containsKey(e,t)}})));var n,r},e}(),Cr=function(e){function t(t){var n=e.call(this)||this;return n.currentSequenceNumber=t,n}return a.__extends(t,e),t}(Rn),_r=function(){function e(e){this.persistence=e,this.inMemoryPins=null,this._orphanedDocuments=null}return Object.defineProperty(e.prototype,"orphanedDocuments",{get:function(){if(this._orphanedDocuments)return this._orphanedDocuments;throw v("orphanedDocuments is only valid during a transaction.")},enumerable:!0,configurable:!0}),e.prototype.setInMemoryPins=function(e){this.inMemoryPins=e},e.prototype.addReference=function(e,t){return this.orphanedDocuments.delete(t),Ge.resolve()},e.prototype.removeReference=function(e,t){return this.orphanedDocuments.add(t),Ge.resolve()},e.prototype.removeMutationReference=function(e,t){return this.orphanedDocuments.add(t),Ge.resolve()},e.prototype.removeTarget=function(e,t){var n=this,r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.orphanedDocuments.add(e)}))})).next((function(){return r.removeTargetData(e,t)}))},e.prototype.onTransactionStarted=function(){this._orphanedDocuments=new Set},e.prototype.onTransactionCommitted=function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ge.forEach(this.orphanedDocuments,(function(r){return t.isReferenced(e,r).next((function(e){e||n.removeEntry(r)}))})).next((function(){return t._orphanedDocuments=null,n.apply(e)}))},e.prototype.updateLimboDocument=function(e,t){var n=this;return this.isReferenced(e,t).next((function(e){e?n.orphanedDocuments.delete(t):n.orphanedDocuments.add(t)}))},e.prototype.documentSize=function(e){return 0},e.prototype.isReferenced=function(e,t){var n=this;return Ge.or([function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.mutationQueuesContainKey(e,t)},function(){return Ge.resolve(n.inMemoryPins.containsKey(t))}])},e}(),Dr=function(){function e(e,t,n){this.persistence=e,this.serializer=t,this.inMemoryPins=null,this.orphanedSequenceNumbers=new Ht((function(e){return Te(e.path)})),this.garbageCollector=new On(this,n)}return e.prototype.onTransactionStarted=function(){},e.prototype.onTransactionCommitted=function(e){return Ge.resolve()},e.prototype.forEachTarget=function(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)},e.prototype.getSequenceNumberCount=function(e){var t=this.orphanedDocumentCount(e);return this.persistence.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))},e.prototype.orphanedDocumentCount=function(e){var t=0;return this.forEachOrphanedDocumentSequenceNumber(e,(function(e){t++})).next((function(){return t}))},e.prototype.forEachOrphanedDocumentSequenceNumber=function(e,t){var n=this;return Ge.forEach(this.orphanedSequenceNumbers,(function(r,i){return n.isPinned(e,r,i).next((function(e){return e?Ge.resolve():t(i)}))}))},e.prototype.setInMemoryPins=function(e){this.inMemoryPins=e},e.prototype.removeTargets=function(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)},e.prototype.removeOrphanedDocuments=function(e,t){var n=this,r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.forEachDocumentKey(e,(function(i){return n.isPinned(e,i,t).next((function(e){e||(r++,o.removeEntry(i))}))})).next((function(){return o.apply(e)})).next((function(){return r}))},e.prototype.removeMutationReference=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),Ge.resolve()},e.prototype.removeTarget=function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)},e.prototype.addReference=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),Ge.resolve()},e.prototype.removeReference=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),Ge.resolve()},e.prototype.updateLimboDocument=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),Ge.resolve()},e.prototype.documentSize=function(e){var t,n=this.serializer.toDbRemoteDocument(e,e.version);if(n.document)t=n.document;else if(n.unknownDocument)t=n.unknownDocument;else{if(!n.noDocument)throw v("Unknown remote document type");t=n.noDocument}return JSON.stringify(t).length},e.prototype.isPinned=function(e,t,n){var r=this;return Ge.or([function(){return r.persistence.mutationQueuesContainKey(e,t)},function(){return Ge.resolve(r.inMemoryPins.containsKey(t))},function(){return r.persistence.getTargetCache().containsKey(e,t)},function(){var e=r.orphanedSequenceNumbers.get(t);return Ge.resolve(void 0!==e&&e>n)}])},e.prototype.getCacheSize=function(e){return this.persistence.getRemoteDocumentCache().getSize(e)},e}(),kr=1e3,Nr=1.5,Ar=6e4,xr=function(){function e(e,t,n,r,i){void 0===n&&(n=kr),void 0===r&&(r=Nr),void 0===i&&(i=Ar),this.queue=e,this.timerId=t,this.initialDelayMs=n,this.backoffFactor=r,this.maxDelayMs=i,this.currentBaseMs=0,this.timerPromise=null,this.lastAttemptTime=Date.now(),this.reset()}return e.prototype.reset=function(){this.currentBaseMs=0},e.prototype.resetToMax=function(){this.currentBaseMs=this.maxDelayMs},e.prototype.backoffAndRun=function(e){var t=this;this.cancel();var n=Math.floor(this.currentBaseMs+this.jitterDelayMs()),r=Math.max(0,Date.now()-this.lastAttemptTime),i=Math.max(0,n-r);this.currentBaseMs>0&&m("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.currentBaseMs+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.timerPromise=this.queue.enqueueAfterDelay(this.timerId,i,(function(){return t.lastAttemptTime=Date.now(),e()})),this.currentBaseMs*=this.backoffFactor,this.currentBaseMs<this.initialDelayMs&&(this.currentBaseMs=this.initialDelayMs),this.currentBaseMs>this.maxDelayMs&&(this.currentBaseMs=this.maxDelayMs)},e.prototype.cancel=function(){null!==this.timerPromise&&(this.timerPromise.cancel(),this.timerPromise=null)},e.prototype.jitterDelayMs=function(){return(Math.random()-.5)*this.currentBaseMs},e}();
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */!function(e){e[e.Initial=0]="Initial",e[e.Starting=1]="Starting",e[e.Open=2]="Open",e[e.Error=3]="Error",e[e.Backoff=4]="Backoff"}(Tr||(Tr={}));var Mr,Lr,Pr=function(){function e(e,t,n,r,i,o){this.queue=e,this.idleTimerId=n,this.connection=r,this.credentialsProvider=i,this.listener=o,this.state=Tr.Initial,this.closeCount=0,this.idleTimer=null,this.stream=null,this.backoff=new xr(e,t)}return e.prototype.isStarted=function(){return this.state===Tr.Starting||this.state===Tr.Open||this.state===Tr.Backoff},e.prototype.isOpen=function(){return this.state===Tr.Open},e.prototype.start=function(){this.state!==Tr.Error?(b(this.state===Tr.Initial,"Already started"),this.auth()):this.performBackoff()},e.prototype.stop=function(){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(e){switch(e.label){case 0:return this.isStarted()?[4,this.close(Tr.Initial)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},e.prototype.inhibitBackoff=function(){b(!this.isStarted(),"Can only inhibit backoff in a stopped state"),this.state=Tr.Initial,this.backoff.reset()},e.prototype.markIdle=function(){var e=this;this.isOpen()&&null===this.idleTimer&&(this.idleTimer=this.queue.enqueueAfterDelay(this.idleTimerId,6e4,(function(){return e.handleIdleCloseTimer()})))},e.prototype.sendRequest=function(e){this.cancelIdleCheck(),this.stream.send(e)},e.prototype.handleIdleCloseTimer=function(){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(e){return this.isOpen()?[2,this.close(Tr.Initial)]:[2]}))}))},e.prototype.cancelIdleCheck=function(){this.idleTimer&&(this.idleTimer.cancel(),this.idleTimer=null)},e.prototype.close=function(e,t){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(n){switch(n.label){case 0:return b(this.isStarted(),"Only started streams should be closed."),b(e===Tr.Error||Xn(t),"Can't provide an error when not in an error state."),this.cancelIdleCheck(),this.backoff.cancel(),this.closeCount++,e!==Tr.Error?this.backoff.reset():t&&t.code===S.RESOURCE_EXHAUSTED?(g(t.toString()),g("Using maximum backoff delay to prevent overloading the backend."),this.backoff.resetToMax()):t&&t.code===S.UNAUTHENTICATED&&this.credentialsProvider.invalidateToken(),null!==this.stream&&(this.tearDown(),this.stream.close(),this.stream=null),this.state=e,[4,this.listener.onClose(t)];case 1:return n.sent(),[2]}}))}))},e.prototype.tearDown=function(){},e.prototype.auth=function(){var e=this;b(this.state===Tr.Initial,"Must be in initial state to auth"),this.state=Tr.Starting;var t=this.getCloseGuardedDispatcher(this.closeCount),n=this.closeCount;this.credentialsProvider.getToken().then((function(t){e.closeCount===n&&e.startStream(t)}),(function(n){t((function(){var t=new I(S.UNKNOWN,"Fetching auth token failed: "+n.message);return e.handleStreamClose(t)}))}))},e.prototype.startStream=function(e){var t=this;b(this.state===Tr.Starting,"Trying to start stream in a non-starting state");var n=this.getCloseGuardedDispatcher(this.closeCount);this.stream=this.startRpc(e),this.stream.onOpen((function(){n((function(){return b(t.state===Tr.Starting,"Expected stream to be in state Starting, but was "+t.state),t.state=Tr.Open,t.listener.onOpen()}))})),this.stream.onClose((function(e){n((function(){return t.handleStreamClose(e)}))})),this.stream.onMessage((function(e){n((function(){return t.onMessage(e)}))}))},e.prototype.performBackoff=function(){var e=this;b(this.state===Tr.Error,"Should only perform backoff when in Error state"),this.state=Tr.Backoff,this.backoff.backoffAndRun((function(){return a.__awaiter(e,void 0,void 0,(function(){return a.__generator(this,(function(e){return b(this.state===Tr.Backoff,"Backoff elapsed but state is now: "+this.state),this.state=Tr.Initial,this.start(),b(this.isStarted(),"PersistentStream should have started"),[2]}))}))}))},e.prototype.handleStreamClose=function(e){return b(this.isStarted(),"Can't handle server close on non-started stream"),m("PersistentStream","close with error: "+e),this.stream=null,this.close(Tr.Error,e)},e.prototype.getCloseGuardedDispatcher=function(e){var t=this;return function(n){t.queue.enqueueAndForget((function(){return t.closeCount===e?n():(m("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},e}(),Or=function(e){function t(t,n,r,i,o){var a=e.call(this,t,ne.ListenStreamConnectionBackoff,ne.ListenStreamIdle,n,r,o)||this;return a.serializer=i,a}return a.__extends(t,e),t.prototype.startRpc=function(e){return this.connection.openStream("Listen",e)},t.prototype.onMessage=function(e){this.backoff.reset();var t=this.serializer.fromWatchChange(e),n=this.serializer.versionFromListenResponse(e);return this.listener.onWatchChange(t,n)},t.prototype.watch=function(e){var t={};t.database=this.serializer.encodedDatabaseId,t.addTarget=this.serializer.toTarget(e);var n=this.serializer.toListenRequestLabels(e);n&&(t.labels=n),this.sendRequest(t)},t.prototype.unwatch=function(e){var t={};t.database=this.serializer.encodedDatabaseId,t.removeTarget=e,this.sendRequest(t)},t}(Pr),Rr=function(e){function t(t,n,r,i,o){var a=e.call(this,t,ne.WriteStreamConnectionBackoff,ne.WriteStreamIdle,n,r,o)||this;return a.serializer=i,a.handshakeComplete_=!1,a.lastStreamToken=T(),a}return a.__extends(t,e),Object.defineProperty(t.prototype,"handshakeComplete",{get:function(){return this.handshakeComplete_},enumerable:!0,configurable:!0}),t.prototype.start=function(){this.handshakeComplete_=!1,e.prototype.start.call(this)},t.prototype.tearDown=function(){this.handshakeComplete_&&this.writeMutations([])},t.prototype.startRpc=function(e){return this.connection.openStream("Write",e)},t.prototype.onMessage=function(e){if(b(!!e.streamToken,"Got a write response without a stream token"),this.lastStreamToken=e.streamToken,this.handshakeComplete_){this.backoff.reset();var t=this.serializer.fromWriteResults(e.writeResults,e.commitTime),n=this.serializer.fromVersion(e.commitTime);return this.listener.onMutationResult(n,t)}return b(!e.writeResults||0===e.writeResults.length,"Got mutation results for handshake"),this.handshakeComplete_=!0,this.listener.onHandshakeComplete()},t.prototype.writeHandshake=function(){b(this.isOpen(),"Writing handshake requires an opened stream"),b(!this.handshakeComplete_,"Handshake already completed");var e={};e.database=this.serializer.encodedDatabaseId,this.sendRequest(e)},t.prototype.writeMutations=function(e){var t=this;b(this.isOpen(),"Writing mutations requires an opened stream"),b(this.handshakeComplete_,"Handshake must be complete before writing mutations"),b(this.lastStreamToken.length>0,"Trying to write mutation without a token");var n={streamToken:this.lastStreamToken,writes:e.map((function(e){return t.serializer.toMutation(e)}))};this.sendRequest(n)},t}(Pr),jr=function(){function e(e,t,n,r){this.queue=e,this.connection=t,this.credentials=n,this.serializer=r}return e.prototype.newPersistentWriteStream=function(e){return new Rr(this.queue,this.connection,this.credentials,this.serializer,e)},e.prototype.newPersistentWatchStream=function(e){return new Or(this.queue,this.connection,this.credentials,this.serializer,e)},e.prototype.commit=function(e){var t=this,n={database:this.serializer.encodedDatabaseId,writes:e.map((function(e){return t.serializer.toMutation(e)}))};return this.invokeRPC("Commit",n).then((function(e){return t.serializer.fromWriteResults(e.writeResults,e.commitTime)}))},e.prototype.lookup=function(e){var t=this,n={database:this.serializer.encodedDatabaseId,documents:e.map((function(e){return t.serializer.toName(e)}))};return this.invokeStreamingRPC("BatchGetDocuments",n).then((function(n){var r=Pe();n.forEach((function(e){var n=t.serializer.fromMaybeDocument(e);r=r.insert(n.key,n)}));var i=[];return e.forEach((function(e){var t=r.get(e);b(!!t,"Missing entity in write response for "+e),i.push(t)})),i}))},e.prototype.invokeRPC=function(e,t){var n=this;return this.credentials.getToken().then((function(r){return n.connection.invokeRPC(e,t,r)})).catch((function(e){throw e.code===S.UNAUTHENTICATED&&n.credentials.invalidateToken(),e}))},e.prototype.invokeStreamingRPC=function(e,t){var n=this;return this.credentials.getToken().then((function(r){return n.connection.invokeStreamingRPC(e,t,r)})).catch((function(e){throw e.code===S.UNAUTHENTICATED&&n.credentials.invalidateToken(),e}))},e}(),Br=function(){function e(e){this.datastore=e,this.readVersions=Fe(),this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return e.prototype.lookup=function(e){return a.__awaiter(this,void 0,void 0,(function(){var t,n=this;return a.__generator(this,(function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new I(S.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,this.datastore.lookup(e)];case 1:return(t=r.sent()).forEach((function(e){e instanceof Gt||e instanceof Kt?n.recordVersion(e):v("Document in a transaction was a "+e.constructor.name)})),[2,t]}}))}))},e.prototype.set=function(e,t){this.write(t.toMutations(e,this.precondition(e))),this.writtenDocs.add(e)},e.prototype.update=function(e,t){try{this.write(t.toMutations(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e)},e.prototype.delete=function(e){this.write([new Dt(e,this.precondition(e))]),this.writtenDocs.add(e)},e.prototype.commit=function(){return a.__awaiter(this,void 0,void 0,(function(){var e;return a.__generator(this,(function(t){switch(t.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;if(e=this.readVersions,this.mutations.forEach((function(t){e=e.remove(t.key)})),!e.isEmpty())throw new I(S.INVALID_ARGUMENT,"Every document read in a transaction must also be written.");return[4,this.datastore.commit(this.mutations)];case 1:return t.sent(),this.committed=!0,[2]}}))}))},e.prototype.recordVersion=function(e){var t;if(e instanceof Kt)t=e.version;else{if(!(e instanceof Gt))throw v("Document in a transaction was a "+e.constructor.name);t=_e.forDeletedDoc()}var n=this.readVersions.get(e.key);if(null!==n){if(!t.isEqual(n))throw new I(S.ABORTED,"Document version changed between two reads.")}else this.readVersions=this.readVersions.insert(e.key,t)},e.prototype.precondition=function(e){var t=this.readVersions.get(e);return!this.writtenDocs.has(e)&&t?St.updateTime(t):St.NONE},e.prototype.preconditionForUpdate=function(e){var t=this.readVersions.get(e);if(!this.writtenDocs.has(e)&&t){if(t.isEqual(_e.forDeletedDoc()))throw new I(S.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return St.updateTime(t)}return St.exists(!0)},e.prototype.write=function(e){this.ensureCommitNotCalled(),this.mutations=this.mutations.concat(e)},e.prototype.ensureCommitNotCalled=function(){b(!this.committed,"A transaction object cannot be used after its update callback has been invoked.")},e}();!function(e){e[e.Unknown=0]="Unknown",e[e.Online=1]="Online",e[e.Offline=2]="Offline"}(Mr||(Mr={})),function(e){e[e.RemoteStore=0]="RemoteStore",e[e.SharedClientState=1]="SharedClientState"}(Lr||(Lr={}));
/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Fr,Vr=function(){function e(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state=Mr.Unknown,this.watchStreamFailures=0,this.onlineStateTimer=null,this.shouldWarnClientIsOffline=!0}return e.prototype.handleWatchStreamStart=function(){var e=this;0===this.watchStreamFailures&&(this.setAndBroadcast(Mr.Unknown),b(null===this.onlineStateTimer,"onlineStateTimer shouldn't be started yet"),this.onlineStateTimer=this.asyncQueue.enqueueAfterDelay(ne.OnlineStateTimeout,1e4,(function(){return e.onlineStateTimer=null,b(e.state===Mr.Unknown,"Timer should be canceled if we transitioned to a different state."),e.logClientOfflineWarningIfNecessary("Backend didn't respond within 10 seconds."),e.setAndBroadcast(Mr.Offline),Promise.resolve()})))},e.prototype.handleWatchStreamFailure=function(e){this.state===Mr.Online?(this.setAndBroadcast(Mr.Unknown),b(0===this.watchStreamFailures,"watchStreamFailures must be 0"),b(null===this.onlineStateTimer,"onlineStateTimer must be null")):(this.watchStreamFailures++,this.watchStreamFailures>=1&&(this.clearOnlineStateTimer(),this.logClientOfflineWarningIfNecessary("Connection failed 1 times. Most recent error: "+e.toString()),this.setAndBroadcast(Mr.Offline)))},e.prototype.set=function(e){this.clearOnlineStateTimer(),this.watchStreamFailures=0,e===Mr.Online&&(this.shouldWarnClientIsOffline=!1),this.setAndBroadcast(e)},e.prototype.setAndBroadcast=function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))},e.prototype.logClientOfflineWarningIfNecessary=function(e){var t="Could not reach Cloud Firestore backend. "+e+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.shouldWarnClientIsOffline?(g(t),this.shouldWarnClientIsOffline=!1):m("OnlineStateTracker",t)},e.prototype.clearOnlineStateTimer=function(){null!==this.onlineStateTimer&&(this.onlineStateTimer.cancel(),this.onlineStateTimer=null)},e}();function qr(e){switch(e){case S.OK:return v("Treated status OK as error");case S.CANCELLED:case S.UNKNOWN:case S.DEADLINE_EXCEEDED:case S.RESOURCE_EXHAUSTED:case S.INTERNAL:case S.UNAVAILABLE:case S.UNAUTHENTICATED:return!1;case S.INVALID_ARGUMENT:case S.NOT_FOUND:case S.ALREADY_EXISTS:case S.PERMISSION_DENIED:case S.FAILED_PRECONDITION:case S.ABORTED:case S.OUT_OF_RANGE:case S.UNIMPLEMENTED:case S.DATA_LOSS:return!0;default:return v("Unknown status code: "+e)}}function Ur(e){if(void 0===e)return g("GRPC error has no .code"),S.UNKNOWN;switch(e){case Fr.OK:return S.OK;case Fr.CANCELLED:return S.CANCELLED;case Fr.UNKNOWN:return S.UNKNOWN;case Fr.DEADLINE_EXCEEDED:return S.DEADLINE_EXCEEDED;case Fr.RESOURCE_EXHAUSTED:return S.RESOURCE_EXHAUSTED;case Fr.INTERNAL:return S.INTERNAL;case Fr.UNAVAILABLE:return S.UNAVAILABLE;case Fr.UNAUTHENTICATED:return S.UNAUTHENTICATED;case Fr.INVALID_ARGUMENT:return S.INVALID_ARGUMENT;case Fr.NOT_FOUND:return S.NOT_FOUND;case Fr.ALREADY_EXISTS:return S.ALREADY_EXISTS;case Fr.PERMISSION_DENIED:return S.PERMISSION_DENIED;case Fr.FAILED_PRECONDITION:return S.FAILED_PRECONDITION;case Fr.ABORTED:return S.ABORTED;case Fr.OUT_OF_RANGE:return S.OUT_OF_RANGE;case Fr.UNIMPLEMENTED:return S.UNIMPLEMENTED;case Fr.DATA_LOSS:return S.DATA_LOSS;default:return v("Unknown status code: "+e)}}function Wr(e){if(void 0===e)return Fr.OK;switch(e){case S.OK:return Fr.OK;case S.CANCELLED:return Fr.CANCELLED;case S.UNKNOWN:return Fr.UNKNOWN;case S.DEADLINE_EXCEEDED:return Fr.DEADLINE_EXCEEDED;case S.RESOURCE_EXHAUSTED:return Fr.RESOURCE_EXHAUSTED;case S.INTERNAL:return Fr.INTERNAL;case S.UNAVAILABLE:return Fr.UNAVAILABLE;case S.UNAUTHENTICATED:return Fr.UNAUTHENTICATED;case S.INVALID_ARGUMENT:return Fr.INVALID_ARGUMENT;case S.NOT_FOUND:return Fr.NOT_FOUND;case S.ALREADY_EXISTS:return Fr.ALREADY_EXISTS;case S.PERMISSION_DENIED:return Fr.PERMISSION_DENIED;case S.FAILED_PRECONDITION:return Fr.FAILED_PRECONDITION;case S.ABORTED:return Fr.ABORTED;case S.OUT_OF_RANGE:return Fr.OUT_OF_RANGE;case S.UNIMPLEMENTED:return Fr.UNIMPLEMENTED;case S.DATA_LOSS:return Fr.DATA_LOSS;default:return v("Unknown status code: "+e)}}!function(e){e[e.OK=0]="OK",e[e.CANCELLED=1]="CANCELLED",e[e.UNKNOWN=2]="UNKNOWN",e[e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",e[e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",e[e.NOT_FOUND=5]="NOT_FOUND",e[e.ALREADY_EXISTS=6]="ALREADY_EXISTS",e[e.PERMISSION_DENIED=7]="PERMISSION_DENIED",e[e.UNAUTHENTICATED=16]="UNAUTHENTICATED",e[e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",e[e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",e[e.ABORTED=10]="ABORTED",e[e.OUT_OF_RANGE=11]="OUT_OF_RANGE",e[e.UNIMPLEMENTED=12]="UNIMPLEMENTED",e[e.INTERNAL=13]="INTERNAL",e[e.UNAVAILABLE=14]="UNAVAILABLE",e[e.DATA_LOSS=15]="DATA_LOSS"}(Fr||(Fr={}));
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var zr,Kr,Gr=function(){function e(e){this.comparator=e?function(t,n){return e(t,n)||fe.comparator(t.key,n.key)}:function(e,t){return fe.comparator(e.key,t.key)},this.keyedMap=je(),this.sortedSet=new De(this.comparator)}return e.emptySet=function(t){return new e(t.comparator)},e.prototype.has=function(e){return null!=this.keyedMap.get(e)},e.prototype.get=function(e){return this.keyedMap.get(e)},e.prototype.first=function(){return this.sortedSet.minKey()},e.prototype.last=function(){return this.sortedSet.maxKey()},e.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},e.prototype.indexOf=function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1},Object.defineProperty(e.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!0,configurable:!0}),e.prototype.forEach=function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))},e.prototype.add=function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))},e.prototype.delete=function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this},e.prototype.isEqual=function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},e.prototype.toString=function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"},e.prototype.copy=function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r},e}();
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */!function(e){e[e.Added=0]="Added",e[e.Removed=1]="Removed",e[e.Modified=2]="Modified",e[e.Metadata=3]="Metadata"}(zr||(zr={})),function(e){e[e.Local=0]="Local",e[e.Synced=1]="Synced"}(Kr||(Kr={}));var Qr,Hr=function(){function e(){this.changeMap=new De(fe.comparator)}return e.prototype.track=function(e){var t=e.doc.key,n=this.changeMap.get(t);n?e.type!==zr.Added&&n.type===zr.Metadata?this.changeMap=this.changeMap.insert(t,e):e.type===zr.Metadata&&n.type!==zr.Removed?this.changeMap=this.changeMap.insert(t,{type:n.type,doc:e.doc}):e.type===zr.Modified&&n.type===zr.Modified?this.changeMap=this.changeMap.insert(t,{type:zr.Modified,doc:e.doc}):e.type===zr.Modified&&n.type===zr.Added?this.changeMap=this.changeMap.insert(t,{type:zr.Added,doc:e.doc}):e.type===zr.Removed&&n.type===zr.Added?this.changeMap=this.changeMap.remove(t):e.type===zr.Removed&&n.type===zr.Modified?this.changeMap=this.changeMap.insert(t,{type:zr.Removed,doc:n.doc}):e.type===zr.Added&&n.type===zr.Removed?this.changeMap=this.changeMap.insert(t,{type:zr.Modified,doc:e.doc}):v("unsupported combination of changes: "+JSON.stringify(e)+" after "+JSON.stringify(n)):this.changeMap=this.changeMap.insert(t,e)},e.prototype.getChanges=function(){var e=[];return this.changeMap.inorderTraversal((function(t,n){e.push(n)})),e},e}(),Yr=function(){function e(e,t,n,r,i,o,a,s){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=s}return e.fromInitialDocuments=function(t,n,r,i){var o=[];return n.forEach((function(e){o.push({type:zr.Added,doc:e})})),new e(t,n,Gr.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&this.query.isEqual(e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0},e}(),Jr=function(){function e(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return e.createSynthesizedRemoteEventForCurrentChange=function(t,n){var r,i=((r={})[t]=Xr.createSynthesizedTargetChangeForCurrentChange(t,n),r);return new e(_e.MIN,i,We(),Pe(),qe())},e}(),Xr=function(){function e(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return e.createSynthesizedTargetChangeForCurrentChange=function(t,n){return new e(T(),n,qe(),qe(),qe())},e}(),$r=function(e,t,n,r){this.updatedTargetIds=e,this.removedTargetIds=t,this.key=n,this.newDoc=r},Zr=function(e,t){this.targetId=e,this.existenceFilter=t};!function(e){e[e.NoChange=0]="NoChange",e[e.Added=1]="Added",e[e.Removed=2]="Removed",e[e.Current=3]="Current",e[e.Reset=4]="Reset"}(Qr||(Qr={}));var ei=function(e,t,n,r){void 0===n&&(n=T()),void 0===r&&(r=null),this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r},ti=function(){function e(){this.pendingResponses=0,this.documentChanges=ii(),this._resumeToken=T(),this._current=!1,this._hasPendingChanges=!0}return Object.defineProperty(e.prototype,"current",{get:function(){return this._current},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"resumeToken",{get:function(){return this._resumeToken},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isPending",{get:function(){return 0!==this.pendingResponses},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasPendingChanges",{get:function(){return this._hasPendingChanges},enumerable:!0,configurable:!0}),e.prototype.updateResumeToken=function(e){e.length>0&&(this._hasPendingChanges=!0,this._resumeToken=e)},e.prototype.toTargetChange=function(){var e=qe(),t=qe(),n=qe();return this.documentChanges.forEach((function(r,i){switch(i){case zr.Added:e=e.add(r);break;case zr.Modified:t=t.add(r);break;case zr.Removed:n=n.add(r);break;default:v("Encountered invalid change type: "+i)}})),new Xr(this._resumeToken,this._current,e,t,n)},e.prototype.clearPendingChanges=function(){this._hasPendingChanges=!1,this.documentChanges=ii()},e.prototype.addDocumentChange=function(e,t){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.insert(e,t)},e.prototype.removeDocumentChange=function(e){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.remove(e)},e.prototype.recordPendingTargetRequest=function(){this.pendingResponses+=1},e.prototype.recordTargetResponse=function(){this.pendingResponses-=1},e.prototype.markCurrent=function(){this._hasPendingChanges=!0,this._current=!0},e}(),ni=function(){function e(e){this.metadataProvider=e,this.targetStates={},this.pendingDocumentUpdates=Pe(),this.pendingDocumentTargetMapping=ri(),this.pendingTargetResets=new xe(X)}return e.prototype.handleDocumentChange=function(e){for(var t=0,n=e.updatedTargetIds;t<n.length;t++){var r=n[t];e.newDoc instanceof Kt?this.addDocumentToTarget(r,e.newDoc):e.newDoc instanceof Gt&&this.removeDocumentFromTarget(r,e.key,e.newDoc)}for(var i=0,o=e.removedTargetIds;i<o.length;i++){r=o[i];this.removeDocumentFromTarget(r,e.key,e.newDoc)}},e.prototype.handleTargetChange=function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.ensureTargetState(n);switch(e.state){case Qr.NoChange:t.isActiveTarget(n)&&r.updateResumeToken(e.resumeToken);break;case Qr.Added:r.recordTargetResponse(),r.isPending||r.clearPendingChanges(),r.updateResumeToken(e.resumeToken);break;case Qr.Removed:r.recordTargetResponse(),r.isPending||t.removeTarget(n),b(!e.cause,"WatchChangeAggregator does not handle errored targets");break;case Qr.Current:t.isActiveTarget(n)&&(r.markCurrent(),r.updateResumeToken(e.resumeToken));break;case Qr.Reset:t.isActiveTarget(n)&&(t.resetTarget(n),r.updateResumeToken(e.resumeToken));break;default:v("Unknown target watch change state: "+e.state)}}))},e.prototype.forEachTarget=function(e,t){e.targetIds.length>0?e.targetIds.forEach(t):D(this.targetStates,t)},e.prototype.handleExistenceFilter=function(e){var t=e.targetId,n=e.existenceFilter.count,r=this.targetDataForActiveTarget(t);if(r){var i=r.target;if(i.isDocumentQuery())if(0===n){var o=new fe(i.path);this.removeDocumentFromTarget(t,o,new Gt(o,_e.forDeletedDoc()))}else b(1===n,"Single document existence filter with count: "+n);else this.getCurrentDocumentCountForTarget(t)!==n&&(this.resetTarget(t),this.pendingTargetResets=this.pendingTargetResets.add(t))}},e.prototype.createRemoteEvent=function(e){var t=this,n={};D(this.targetStates,(function(r,i){var o=t.targetDataForActiveTarget(r);if(o){if(i.current&&o.target.isDocumentQuery()){var a=new fe(o.target.path);null!==t.pendingDocumentUpdates.get(a)||t.targetContainsDocument(r,a)||t.removeDocumentFromTarget(r,a,new Gt(a,e))}i.hasPendingChanges&&(n[r]=i.toTargetChange(),i.clearPendingChanges())}}));var r=qe();this.pendingDocumentTargetMapping.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.targetDataForActiveTarget(e);return!n||n.purpose===Tn.LimboResolution||(i=!1,!1)})),i&&(r=r.add(e))}));var i=new Jr(e,n,this.pendingTargetResets,this.pendingDocumentUpdates,r);return this.pendingDocumentUpdates=Pe(),this.pendingDocumentTargetMapping=ri(),this.pendingTargetResets=new xe(X),i},e.prototype.addDocumentToTarget=function(e,t){if(this.isActiveTarget(e)){var n=this.targetContainsDocument(e,t.key)?zr.Modified:zr.Added;this.ensureTargetState(e).addDocumentChange(t.key,n),this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(t.key,t),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(t.key,this.ensureDocumentTargetMapping(t.key).add(e))}},e.prototype.removeDocumentFromTarget=function(e,t,n){if(this.isActiveTarget(e)){var r=this.ensureTargetState(e);this.targetContainsDocument(e,t)?r.addDocumentChange(t,zr.Removed):r.removeDocumentChange(t),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(t,this.ensureDocumentTargetMapping(t).delete(e)),n&&(this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(t,n))}},e.prototype.removeTarget=function(e){delete this.targetStates[e]},e.prototype.getCurrentDocumentCountForTarget=function(e){var t=this.ensureTargetState(e).toTargetChange();return this.metadataProvider.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size},e.prototype.recordPendingTargetRequest=function(e){this.ensureTargetState(e).recordPendingTargetRequest()},e.prototype.ensureTargetState=function(e){return this.targetStates[e]||(this.targetStates[e]=new ti),this.targetStates[e]},e.prototype.ensureDocumentTargetMapping=function(e){var t=this.pendingDocumentTargetMapping.get(e);return t||(t=new xe(X),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(e,t)),t},e.prototype.isActiveTarget=function(e){var t=null!==this.targetDataForActiveTarget(e);return t||m("WatchChangeAggregator","Detected inactive target",e),t},e.prototype.targetDataForActiveTarget=function(e){var t=this.targetStates[e];return t&&t.isPending?null:this.metadataProvider.getTargetDataForTarget(e)},e.prototype.resetTarget=function(e){var t=this;b(!this.targetStates[e].isPending,"Should only reset active targets"),this.targetStates[e]=new ti,this.metadataProvider.getRemoteKeysForTarget(e).forEach((function(n){t.removeDocumentFromTarget(e,n,null)}))},e.prototype.targetContainsDocument=function(e,t){return this.metadataProvider.getRemoteKeysForTarget(e).has(t)},e}();function ri(){return new De(fe.comparator)}function ii(){return new De(fe.comparator)}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var oi="RemoteStore",ai=function(){function e(e,t,n,r,i){var o=this;this.localStore=e,this.datastore=t,this.writePipeline=[],this.listenTargets={},this.watchChangeAggregator=null,this.networkEnabled=!1,this.isPrimary=!1,this.connectivityMonitor=i,this.connectivityMonitor.addCallback((function(e){n.enqueueAndForget((function(){return a.__awaiter(o,void 0,void 0,(function(){return a.__generator(this,(function(e){switch(e.label){case 0:return this.canUseNetwork()?(m(oi,"Restarting streams for network reachability change."),[4,this.restartNetwork()]):[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))})),this.onlineStateTracker=new Vr(n,r),this.watchStream=this.datastore.newPersistentWatchStream({onOpen:this.onWatchStreamOpen.bind(this),onClose:this.onWatchStreamClose.bind(this),onWatchChange:this.onWatchStreamChange.bind(this)}),this.writeStream=this.datastore.newPersistentWriteStream({onOpen:this.onWriteStreamOpen.bind(this),onClose:this.onWriteStreamClose.bind(this),onHandshakeComplete:this.onWriteHandshakeComplete.bind(this),onMutationResult:this.onMutationResult.bind(this)})}return e.prototype.start=function(){return this.enableNetwork()},e.prototype.enableNetwork=function(){return a.__awaiter(this,void 0,void 0,(function(){var e;return a.__generator(this,(function(t){switch(t.label){case 0:return this.networkEnabled=!0,this.canUseNetwork()?(e=this.writeStream,[4,this.localStore.getLastStreamToken()]):[3,3];case 1:return e.lastStreamToken=t.sent(),this.shouldStartWatchStream()?this.startWatchStream():this.onlineStateTracker.set(Mr.Unknown),[4,this.fillWritePipeline()];case 2:t.sent(),t.label=3;case 3:return[2]}}))}))},e.prototype.disableNetwork=function(){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(e){switch(e.label){case 0:return this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return e.sent(),this.onlineStateTracker.set(Mr.Offline),[2]}}))}))},e.prototype.disableNetworkInternal=function(){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(e){switch(e.label){case 0:return[4,this.writeStream.stop()];case 1:return e.sent(),[4,this.watchStream.stop()];case 2:return e.sent(),this.writePipeline.length>0&&(m(oi,"Stopping write stream with "+this.writePipeline.length+" pending writes"),this.writePipeline=[]),this.cleanUpWatchStreamState(),[2]}}))}))},e.prototype.shutdown=function(){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(e){switch(e.label){case 0:return m(oi,"RemoteStore shutting down."),this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return e.sent(),this.connectivityMonitor.shutdown(),this.onlineStateTracker.set(Mr.Unknown),[2]}}))}))},e.prototype.listen=function(e){C(this.listenTargets,e.targetId)||(this.listenTargets[e.targetId]=e,this.shouldStartWatchStream()?this.startWatchStream():this.watchStream.isOpen()&&this.sendWatchRequest(e))},e.prototype.unlisten=function(e){b(C(this.listenTargets,e),"unlisten called on target no currently watched: "+e),delete this.listenTargets[e],this.watchStream.isOpen()&&this.sendUnwatchRequest(e),N(this.listenTargets)&&(this.watchStream.isOpen()?this.watchStream.markIdle():this.canUseNetwork()&&this.onlineStateTracker.set(Mr.Unknown))},e.prototype.getTargetDataForTarget=function(e){return this.listenTargets[e]||null},e.prototype.getRemoteKeysForTarget=function(e){return this.syncEngine.getRemoteKeysForTarget(e)},e.prototype.sendWatchRequest=function(e){this.watchChangeAggregator.recordPendingTargetRequest(e.targetId),this.watchStream.watch(e)},e.prototype.sendUnwatchRequest=function(e){this.watchChangeAggregator.recordPendingTargetRequest(e),this.watchStream.unwatch(e)},e.prototype.startWatchStream=function(){b(this.shouldStartWatchStream(),"startWatchStream() called when shouldStartWatchStream() is false."),this.watchChangeAggregator=new ni(this),this.watchStream.start(),this.onlineStateTracker.handleWatchStreamStart()},e.prototype.shouldStartWatchStream=function(){return this.canUseNetwork()&&!this.watchStream.isStarted()&&!N(this.listenTargets)},e.prototype.canUseNetwork=function(){return this.isPrimary&&this.networkEnabled},e.prototype.cleanUpWatchStreamState=function(){this.watchChangeAggregator=null},e.prototype.onWatchStreamOpen=function(){return a.__awaiter(this,void 0,void 0,(function(){var e=this;return a.__generator(this,(function(t){return D(this.listenTargets,(function(t,n){e.sendWatchRequest(n)})),[2]}))}))},e.prototype.onWatchStreamClose=function(e){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(t){return void 0===e&&b(!this.shouldStartWatchStream(),"Watch stream was stopped gracefully while still needed."),this.cleanUpWatchStreamState(),this.shouldStartWatchStream()?(this.onlineStateTracker.handleWatchStreamFailure(e),this.startWatchStream()):this.onlineStateTracker.set(Mr.Unknown),[2]}))}))},e.prototype.onWatchStreamChange=function(e,t){return a.__awaiter(this,void 0,void 0,(function(){var n;return a.__generator(this,(function(r){switch(r.label){case 0:return this.onlineStateTracker.set(Mr.Online),e instanceof ei&&e.state===Qr.Removed&&e.cause?[2,this.handleTargetError(e)]:(e instanceof $r?this.watchChangeAggregator.handleDocumentChange(e):e instanceof Zr?this.watchChangeAggregator.handleExistenceFilter(e):(b(e instanceof ei,"Expected watchChange to be an instance of WatchTargetChange"),this.watchChangeAggregator.handleTargetChange(e)),t.isEqual(_e.MIN)?[3,3]:[4,this.localStore.getLastRemoteSnapshotVersion()]);case 1:return n=r.sent(),t.compareTo(n)>=0?[4,this.raiseWatchSnapshot(t)]:[3,3];case 2:r.sent(),r.label=3;case 3:return[2]}}))}))},e.prototype.raiseWatchSnapshot=function(e){var t=this;b(!e.isEqual(_e.MIN),"Can't raise event for unknown SnapshotVersion");var n=this.watchChangeAggregator.createRemoteEvent(e);return D(n.targetChanges,(function(n,r){if(r.resumeToken.length>0){var i=t.listenTargets[n];i&&(t.listenTargets[n]=i.withResumeToken(r.resumeToken,e))}})),n.targetMismatches.forEach((function(e){var n=t.listenTargets[e];if(n){t.listenTargets[e]=n.withResumeToken(T(),n.snapshotVersion),t.sendUnwatchRequest(e);var r=new kn(n.target,e,Tn.ExistenceFilterMismatch,n.sequenceNumber);t.sendWatchRequest(r)}})),this.syncEngine.applyRemoteEvent(n)},e.prototype.handleTargetError=function(e){var t=this;b(!!e.cause,"Handling target error without a cause");var n=e.cause,r=Promise.resolve();return e.targetIds.forEach((function(e){r=r.then((function(){return a.__awaiter(t,void 0,void 0,(function(){return a.__generator(this,(function(t){return C(this.listenTargets,e)?(delete this.listenTargets[e],this.watchChangeAggregator.removeTarget(e),[2,this.syncEngine.rejectListen(e,n)]):[2]}))}))}))})),r},e.prototype.fillWritePipeline=function(){return a.__awaiter(this,void 0,void 0,(function(){var e,t;return a.__generator(this,(function(n){switch(n.label){case 0:return this.canAddToWritePipeline()?(e=this.writePipeline.length>0?this.writePipeline[this.writePipeline.length-1].batchId:-1,[4,this.localStore.nextMutationBatch(e)]):[3,4];case 1:return null!==(t=n.sent())?[3,2]:(0===this.writePipeline.length&&this.writeStream.markIdle(),[3,4]);case 2:return this.addToWritePipeline(t),[4,this.fillWritePipeline()];case 3:n.sent(),n.label=4;case 4:return this.shouldStartWriteStream()&&this.startWriteStream(),[2]}}))}))},e.prototype.canAddToWritePipeline=function(){return this.canUseNetwork()&&this.writePipeline.length<10},e.prototype.outstandingWrites=function(){return this.writePipeline.length},e.prototype.addToWritePipeline=function(e){b(this.canAddToWritePipeline(),"addToWritePipeline called when pipeline is full"),this.writePipeline.push(e),this.writeStream.isOpen()&&this.writeStream.handshakeComplete&&this.writeStream.writeMutations(e.mutations)},e.prototype.shouldStartWriteStream=function(){return this.canUseNetwork()&&!this.writeStream.isStarted()&&this.writePipeline.length>0},e.prototype.startWriteStream=function(){b(this.shouldStartWriteStream(),"startWriteStream() called when shouldStartWriteStream() is false."),this.writeStream.start()},e.prototype.onWriteStreamOpen=function(){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(e){return this.writeStream.writeHandshake(),[2]}))}))},e.prototype.onWriteHandshakeComplete=function(){var e=this;return this.localStore.setLastStreamToken(this.writeStream.lastStreamToken).then((function(){for(var t=0,n=e.writePipeline;t<n.length;t++){var r=n[t];e.writeStream.writeMutations(r.mutations)}})).catch(Un)},e.prototype.onMutationResult=function(e,t){var n=this;b(this.writePipeline.length>0,"Got result for empty write pipeline");var r=this.writePipeline.shift(),i=Ke.from(r,e,t,this.writeStream.lastStreamToken);return this.syncEngine.applySuccessfulWrite(i).then((function(){return n.fillWritePipeline()}))},e.prototype.onWriteStreamClose=function(e){return a.__awaiter(this,void 0,void 0,(function(){var t=this;return a.__generator(this,(function(n){return void 0===e&&b(!this.shouldStartWriteStream(),"Write stream was stopped gracefully while still needed."),e&&this.writePipeline.length>0?(void 0,[2,(this.writeStream.handshakeComplete?this.handleWriteError(e):this.handleHandshakeError(e)).then((function(){t.shouldStartWriteStream()&&t.startWriteStream()}))]):[2]}))}))},e.prototype.handleHandshakeError=function(e){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(t){return qr(e.code)?(m(oi,"RemoteStore error before completed handshake; resetting stream token: ",this.writeStream.lastStreamToken),this.writeStream.lastStreamToken=T(),[2,this.localStore.setLastStreamToken(T()).catch(Un)]):[2]}))}))},e.prototype.handleWriteError=function(e){return a.__awaiter(this,void 0,void 0,(function(){var t,n=this;return a.__generator(this,(function(r){return qr(i=e.code)&&i!==S.ABORTED?(t=this.writePipeline.shift(),this.writeStream.inhibitBackoff(),[2,this.syncEngine.rejectFailedWrite(t.batchId,e).then((function(){return n.fillWritePipeline()}))]):[2];var i}))}))},e.prototype.createTransaction=function(){return new Br(this.datastore)},e.prototype.restartNetwork=function(){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(e){switch(e.label){case 0:return this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return e.sent(),this.onlineStateTracker.set(Mr.Unknown),[4,this.enableNetwork()];case 2:return e.sent(),[2]}}))}))},e.prototype.handleCredentialChange=function(){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(e){switch(e.label){case 0:return this.canUseNetwork()?(m(oi,"RemoteStore restarting streams for new credential"),[4,this.restartNetwork()]):[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},e.prototype.applyPrimaryState=function(e){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(t){switch(t.label){case 0:return this.isPrimary=e,e&&this.networkEnabled?[4,this.enableNetwork()]:[3,2];case 1:return t.sent(),[3,4];case 2:return e?[3,4]:[4,this.disableNetworkInternal()];case 3:t.sent(),this.onlineStateTracker.set(Mr.Unknown),t.label=4;case 4:return[2]}}))}))},e}(),si=function(){function e(e,t){if(x("GeoPoint",arguments,2),P("GeoPoint","number",1,e),P("GeoPoint","number",2,t),!isFinite(e)||e<-90||e>90)throw new I(S.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new I(S.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}return Object.defineProperty(e.prototype,"latitude",{get:function(){return this._lat},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"longitude",{get:function(){return this._long},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(e){return this._lat===e._lat&&this._long===e._long},e.prototype._compareTo=function(e){return X(this._lat,e._lat)||X(this._long,e._long)},e}(),ui=function(){function e(){}return e.prototype.applyToLocalView=function(e,t){return new Bt(t,e)},e.prototype.applyToRemoteDocument=function(e,t){return t},e.prototype.computeBaseValue=function(e){return null},e.prototype.isEqual=function(t){return t instanceof e},e.instance=new e,e}(),ci=function(){function e(e){this.elements=e}return e.prototype.applyToLocalView=function(e,t){return this.apply(e)},e.prototype.applyToRemoteDocument=function(e,t){return this.apply(e)},e.prototype.apply=function(e){for(var t=di(e),n=function(e){t.find((function(t){return t.isEqual(e)}))||t.push(e)},r=0,i=this.elements;r<i.length;r++){n(i[r])}return new Wt(t)},e.prototype.computeBaseValue=function(e){return null},e.prototype.isEqual=function(t){return t instanceof e&&$(t.elements,this.elements)},e}(),li=function(){function e(e){this.elements=e}return e.prototype.applyToLocalView=function(e,t){return this.apply(e)},e.prototype.applyToRemoteDocument=function(e,t){return this.apply(e)},e.prototype.apply=function(e){for(var t=di(e),n=function(e){t=t.filter((function(t){return!t.isEqual(e)}))},r=0,i=this.elements;r<i.length;r++){n(i[r])}return new Wt(t)},e.prototype.computeBaseValue=function(e){return null},e.prototype.isEqual=function(t){return t instanceof e&&$(t.elements,this.elements)},e}(),hi=function(){function e(e){this.operand=e}return e.prototype.applyToLocalView=function(e,t){var n=this.computeBaseValue(e);if(n instanceof Pt&&this.operand instanceof Pt){var r=n.internalValue+this.operand.internalValue;return new Pt(r)}r=n.internalValue+this.operand.internalValue;return new Ot(r)},e.prototype.applyToRemoteDocument=function(e,t){return b(null!==t,"Didn't receive transformResult for NUMERIC_ADD transform"),t},e.prototype.computeBaseValue=function(e){return e instanceof Mt?e:new Pt(0)},e.prototype.isEqual=function(t){return t instanceof e&&this.operand.isEqual(t.operand)},e}();function di(e){return e instanceof Wt?e.internalValue.slice():[]}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fi,pi,mi=function(){function e(e){this.count=e}return e.prototype.isEqual=function(e){return e&&e.count===this.count},e}(),gi=((fi={})[lr.ASCENDING.name]="ASCENDING",fi[lr.DESCENDING.name]="DESCENDING",fi),yi=((pi={})[rr.LESS_THAN.name]="LESS_THAN",pi[rr.LESS_THAN_OR_EQUAL.name]="LESS_THAN_OR_EQUAL",pi[rr.GREATER_THAN.name]="GREATER_THAN",pi[rr.GREATER_THAN_OR_EQUAL.name]="GREATER_THAN_OR_EQUAL",pi[rr.EQUAL.name]="EQUAL",pi[rr.ARRAY_CONTAINS.name]="ARRAY_CONTAINS",pi[rr.IN.name]="IN",pi[rr.ARRAY_CONTAINS_ANY.name]="ARRAY_CONTAINS_ANY",pi),vi=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bi(e,t){b(!Xn(e),t+" is missing")}function wi(e){return"number"==typeof e?e:"string"==typeof e?Number(e):v("can't parse "+e)}var Ti=function(){function e(e,t){this.databaseId=e,this.options=t}return e.prototype.emptyByteString=function(){return this.options.useProto3Json?"":new Uint8Array(0)},e.prototype.unsafeCastProtoByteString=function(e){return e},e.prototype.fromRpcStatus=function(e){var t=void 0===e.code?S.UNKNOWN:Ur(e.code);return new I(t,e.message||"")},e.prototype.toInt32Value=function(e){return this.options.useProto3Json||Xn(e)?e:{value:e}},e.prototype.fromInt32Value=function(e){var t;return Xn(t="object"==typeof e?e.value:e)?null:t},e.prototype.toTimestamp=function(e){return this.options.useProto3Json?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}},e.prototype.fromTimestamp=function(e){if("string"==typeof e)return this.fromIso8601String(e);b(!!e,"Cannot deserialize null or undefined timestamp.");var t=wi(e.seconds||"0"),n=e.nanos||0;return new Ce(t,n)},e.prototype.fromIso8601String=function(e){var t=0,n=vi.exec(e);if(b(!!n,"invalid timestamp: "+e),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e),o=Math.floor(i.getTime()/1e3);return new Ce(o,t)},e.prototype.toBytes=function(e){return this.options.useProto3Json?e.toBase64():this.unsafeCastProtoByteString(e.toUint8Array())},e.prototype.fromBlob=function(e){return"string"==typeof e?(b(this.options.useProto3Json,"Expected bytes to be passed in as Uint8Array, but got a string instead."),re.fromBase64String(e)):(b(!this.options.useProto3Json,"Expected bytes to be passed in as Uint8Array, but got a string instead."),re.fromUint8Array(e))},e.prototype.toVersion=function(e){return this.toTimestamp(e.toTimestamp())},e.prototype.fromVersion=function(e){return b(!!e,"Trying to deserialize version that isn't set"),_e.fromTimestamp(this.fromTimestamp(e))},e.prototype.toResourceName=function(e,t){return this.fullyQualifiedPrefixPath(e).child("documents").child(t).canonicalString()},e.prototype.fromResourceName=function(e){var t=le.fromString(e);return b(this.isValidResourceName(t),"Tried to deserialize invalid key "+t.toString()),t},e.prototype.toName=function(e){return this.toResourceName(this.databaseId,e.path)},e.prototype.fromName=function(e){var t=this.fromResourceName(e);return b(t.get(1)===this.databaseId.projectId,"Tried to deserialize key from different project: "+t.get(1)+" vs "+this.databaseId.projectId),b(!t.get(3)&&!this.databaseId.database||t.get(3)===this.databaseId.database,"Tried to deserialize key from different database: "+t.get(3)+" vs "+this.databaseId.database),new fe(this.extractLocalPathFromResourceName(t))},e.prototype.toQueryPath=function(e){return this.toResourceName(this.databaseId,e)},e.prototype.fromQueryPath=function(e){var t=this.fromResourceName(e);return 4===t.length?le.EMPTY_PATH:this.extractLocalPathFromResourceName(t)},Object.defineProperty(e.prototype,"encodedDatabaseId",{get:function(){return new le(["projects",this.databaseId.projectId,"databases",this.databaseId.database]).canonicalString()},enumerable:!0,configurable:!0}),e.prototype.fullyQualifiedPrefixPath=function(e){return new le(["projects",e.projectId,"databases",e.database])},e.prototype.extractLocalPathFromResourceName=function(e){return b(e.length>4&&"documents"===e.get(4),"tried to deserialize invalid key "+e.toString()),e.popFirst(5)},e.prototype.isValidResourceName=function(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)},e.prototype.toValue=function(e){if(e instanceof At)return{nullValue:"NULL_VALUE"};if(e instanceof xt)return{booleanValue:e.value()};if(e instanceof Pt)return{integerValue:""+e.value()};if(e instanceof Ot){var t=e.value();if(this.options.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:e.value()}}return e instanceof Rt?{stringValue:e.value()}:e instanceof Ut?{mapValue:this.toMapValue(e)}:e instanceof Wt?{arrayValue:this.toArrayValue(e)}:e instanceof jt?{timestampValue:this.toTimestamp(e.internalValue)}:e instanceof qt?{geoPointValue:{latitude:e.value().latitude,longitude:e.value().longitude}}:e instanceof Ft?{bytesValue:this.toBytes(e.value())}:e instanceof Vt?{referenceValue:this.toResourceName(e.databaseId,e.key.path)}:v("Unknown FieldValue "+JSON.stringify(e))},e.prototype.fromValue=function(e){var t=this;if("nullValue"in e)return At.INSTANCE;if("booleanValue"in e)return xt.of(e.booleanValue);if("integerValue"in e)return new Pt(wi(e.integerValue));if("doubleValue"in e){if(this.options.useProto3Json){if("NaN"===e.doubleValue)return Ot.NAN;if("Infinity"===e.doubleValue)return Ot.POSITIVE_INFINITY;if("-Infinity"===e.doubleValue)return Ot.NEGATIVE_INFINITY}return new Ot(e.doubleValue)}if("stringValue"in e)return new Rt(e.stringValue);if("mapValue"in e)return this.fromFields(e.mapValue.fields||{});if("arrayValue"in e){bi(e.arrayValue,"arrayValue");var n=e.arrayValue.values||[];return new Wt(n.map((function(e){return t.fromValue(e)})))}if("timestampValue"in e)return bi(e.timestampValue,"timestampValue"),new jt(this.fromTimestamp(e.timestampValue));if("geoPointValue"in e){bi(e.geoPointValue,"geoPointValue");var r=e.geoPointValue.latitude||0,i=e.geoPointValue.longitude||0;return new qt(new si(r,i))}if("bytesValue"in e){bi(e.bytesValue,"bytesValue");var o=this.fromBlob(e.bytesValue);return new Ft(o)}if("referenceValue"in e){bi(e.referenceValue,"referenceValue");var a=this.fromResourceName(e.referenceValue),s=new se(a.get(1),a.get(3)),u=new fe(this.extractLocalPathFromResourceName(a));return new Vt(s,u)}return v("Unknown Value proto "+JSON.stringify(e))},e.prototype.toMutationDocument=function(e,t){return{name:this.toName(e),fields:this.toFields(t)}},e.prototype.toDocument=function(e){return b(!e.hasLocalMutations,"Can't serialize documents with mutations."),{name:this.toName(e.key),fields:this.toFields(e.data()),updateTime:this.toTimestamp(e.version.toTimestamp())}},e.prototype.fromDocument=function(e,t){var n=this,r=this.fromName(e.name),i=this.fromVersion(e.updateTime);return new Kt(r,i,{hasCommittedMutations:!!t},void 0,e,(function(e){return n.fromValue(e)}))},e.prototype.toFields=function(e){var t=this,n={};return e.forEach((function(e,r){n[e]=t.toValue(r)})),n},e.prototype.fromFields=function(e){var t=this,n=e,r=Ut.EMPTY;return k(n,(function(e,n){r=r.set(new de([e]),t.fromValue(n))})),r},e.prototype.toMapValue=function(e){return{fields:this.toFields(e)}},e.prototype.toArrayValue=function(e){var t=this,n=[];return e.forEach((function(e){n.push(t.toValue(e))})),{values:n}},e.prototype.fromFound=function(e){var t=this;b(!!e.found,"Tried to deserialize a found document from a missing document."),bi(e.found.name,"doc.found.name"),bi(e.found.updateTime,"doc.found.updateTime");var n=this.fromName(e.found.name),r=this.fromVersion(e.found.updateTime);return new Kt(n,r,{},void 0,e.found,(function(e){return t.fromValue(e)}))},e.prototype.fromMissing=function(e){b(!!e.missing,"Tried to deserialize a missing document from a found document."),b(!!e.readTime,"Tried to deserialize a missing document without a read time.");var t=this.fromName(e.missing),n=this.fromVersion(e.readTime);return new Gt(t,n)},e.prototype.fromMaybeDocument=function(e){return"found"in e?this.fromFound(e):"missing"in e?this.fromMissing(e):v("invalid batch get response: "+JSON.stringify(e))},e.prototype.toWatchTargetChangeState=function(e){switch(e){case Qr.Added:return"ADD";case Qr.Current:return"CURRENT";case Qr.NoChange:return"NO_CHANGE";case Qr.Removed:return"REMOVE";case Qr.Reset:return"RESET";default:return v("Unknown WatchTargetChangeState: "+e)}},e.prototype.toTestWatchChange=function(e){if(e instanceof Zr)return{filter:{count:e.existenceFilter.count,targetId:e.targetId}};if(e instanceof $r){if(e.newDoc instanceof Kt){var t=e.newDoc;return{documentChange:{document:{name:this.toName(t.key),fields:this.toFields(t.data()),updateTime:this.toVersion(t.version)},targetIds:e.updatedTargetIds,removedTargetIds:e.removedTargetIds}}}if(e.newDoc instanceof Gt){t=e.newDoc;return{documentDelete:{document:this.toName(t.key),readTime:this.toVersion(t.version),removedTargetIds:e.removedTargetIds}}}if(null===e.newDoc)return{documentRemove:{document:this.toName(e.key),removedTargetIds:e.removedTargetIds}}}if(e instanceof ei){var n=void 0;return e.cause&&(n={code:Wr(e.cause.code),message:e.cause.message}),{targetChange:{targetChangeType:this.toWatchTargetChangeState(e.state),targetIds:e.targetIds,resumeToken:this.unsafeCastProtoByteString(e.resumeToken),cause:n}}}return v("Unrecognized watch change: "+JSON.stringify(e))},e.prototype.fromWatchChange=function(e){var t,n=this;if("targetChange"in e){bi(e.targetChange,"targetChange");var r=this.fromWatchTargetChangeState(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=e.targetChange.resumeToken||this.emptyByteString(),a=e.targetChange.cause,s=a&&this.fromRpcStatus(a);t=new ei(r,i,o,s||null)}else if("documentChange"in e){bi(e.documentChange,"documentChange");var u=e.documentChange;bi(u.document,"documentChange.name"),bi(u.document.name,"documentChange.document.name"),bi(u.document.updateTime,"documentChange.document.updateTime");var c=this.fromName(u.document.name),l=this.fromVersion(u.document.updateTime),h=new Kt(c,l,{},void 0,u.document,(function(e){return n.fromValue(e)})),d=u.targetIds||[],f=u.removedTargetIds||[];t=new $r(d,f,h.key,h)}else if("documentDelete"in e){bi(e.documentDelete,"documentDelete");var p=e.documentDelete;bi(p.document,"documentDelete.document");c=this.fromName(p.document),l=p.readTime?this.fromVersion(p.readTime):_e.forDeletedDoc(),h=new Gt(c,l),f=p.removedTargetIds||[];t=new $r([],f,h.key,h)}else if("documentRemove"in e){bi(e.documentRemove,"documentRemove");var m=e.documentRemove;bi(m.document,"documentRemove");c=this.fromName(m.document),f=m.removedTargetIds||[];t=new $r([],f,c,null)}else{if(!("filter"in e))return v("Unknown change type "+JSON.stringify(e));bi(e.filter,"filter");var g=e.filter;bi(g.targetId,"filter.targetId");var y=g.count||0,b=new mi(y),w=g.targetId;t=new Zr(w,b)}return t},e.prototype.fromWatchTargetChangeState=function(e){return"NO_CHANGE"===e?Qr.NoChange:"ADD"===e?Qr.Added:"REMOVE"===e?Qr.Removed:"CURRENT"===e?Qr.Current:"RESET"===e?Qr.Reset:v("Got unexpected TargetChange.state: "+e)},e.prototype.versionFromListenResponse=function(e){if(!("targetChange"in e))return _e.MIN;var t=e.targetChange;return t.targetIds&&t.targetIds.length?_e.MIN:t.readTime?this.fromVersion(t.readTime):_e.MIN},e.prototype.toMutation=function(e){var t,n=this;if(e instanceof Et)t={update:this.toMutationDocument(e.key,e.value)};else if(e instanceof Dt)t={delete:this.toName(e.key)};else if(e instanceof Ct)t={update:this.toMutationDocument(e.key,e.data),updateMask:this.toDocumentMask(e.fieldMask)};else{if(!(e instanceof _t))return v("Unknown mutation type "+e.type);t={transform:{document:this.toName(e.key),fieldTransforms:e.fieldTransforms.map((function(e){return n.toFieldTransform(e)}))}}}return e.precondition.isNone||(t.currentDocument=this.toPrecondition(e.precondition)),t},e.prototype.fromMutation=function(e){var t=this,n=e.currentDocument?this.fromPrecondition(e.currentDocument):St.NONE;if(e.update){bi(e.update.name,"name");var r=this.fromName(e.update.name),i=this.fromFields(e.update.fields||{});if(e.updateMask){var o=this.fromDocumentMask(e.updateMask);return new Ct(r,i,o,n)}return new Et(r,i,n)}if(e.delete){r=this.fromName(e.delete);return new Dt(r,n)}if(e.transform){r=this.fromName(e.transform.document);var a=e.transform.fieldTransforms.map((function(e){return t.fromFieldTransform(e)}));return b(!0===n.exists,'Transforms only support precondition "exists == true"'),new _t(r,a)}return v("unknown mutation proto: "+JSON.stringify(e))},e.prototype.toPrecondition=function(e){return b(!e.isNone,"Can't serialize an empty precondition"),void 0!==e.updateTime?{updateTime:this.toVersion(e.updateTime)}:void 0!==e.exists?{exists:e.exists}:v("Unknown precondition")},e.prototype.fromPrecondition=function(e){return void 0!==e.updateTime?St.updateTime(this.fromVersion(e.updateTime)):void 0!==e.exists?St.exists(e.exists):St.NONE},e.prototype.fromWriteResult=function(e,t){var n=this,r=e.updateTime?this.fromVersion(e.updateTime):this.fromVersion(t);r.isEqual(_e.MIN)&&(r=this.fromVersion(t));var i=null;return e.transformResults&&e.transformResults.length>0&&(i=e.transformResults.map((function(e){return n.fromValue(e)}))),new bt(r,i)},e.prototype.fromWriteResults=function(e,t){var n=this;return e&&e.length>0?(b(void 0!==t,"Received a write result without a commit time"),e.map((function(e){return n.fromWriteResult(e,t)}))):[]},e.prototype.toFieldTransform=function(e){var t=this,n=e.transform;if(n instanceof ui)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof ci)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements.map((function(e){return t.toValue(e)}))}};if(n instanceof li)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements.map((function(e){return t.toValue(e)}))}};if(n instanceof hi)return{fieldPath:e.field.canonicalString(),increment:this.toValue(n.operand)};throw v("Unknown transform: "+e.transform)},e.prototype.fromFieldTransform=function(e){var t=this,n=null;if("setToServerValue"in e)b("REQUEST_TIME"===e.setToServerValue,"Unknown server value transform proto: "+JSON.stringify(e)),n=ui.instance;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new ci(r.map((function(e){return t.fromValue(e)})))}else if("removeAllFromArray"in e){r=e.removeAllFromArray.values||[];n=new li(r.map((function(e){return t.fromValue(e)})))}else if("increment"in e){var i=this.fromValue(e.increment);b(i instanceof Mt,"NUMERIC_ADD transform requires a NumberValue"),n=new hi(i)}else v("Unknown transform proto: "+JSON.stringify(e));var o=de.fromServerFormat(e.fieldPath);return new vt(o,n)},e.prototype.toDocumentsTarget=function(e){return{documents:[this.toQueryPath(e.path)]}},e.prototype.fromDocumentsTarget=function(e){var t=e.documents.length;b(1===t,"DocumentsTarget contained other than 1 document: "+t);var n=e.documents[0];return tr.atPath(this.fromQueryPath(n)).toTarget()},e.prototype.toQueryTarget=function(e){var t={structuredQuery:{}},n=e.path;null!==e.collectionGroup?(b(n.length%2==0,"Collection Group queries should be within a document path or root."),t.parent=this.toQueryPath(n),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(b(n.length%2!=0,"Document queries with filters are not supported."),t.parent=this.toQueryPath(n.popLast()),t.structuredQuery.from=[{collectionId:n.lastSegment()}]);var r=this.toFilter(e.filters);r&&(t.structuredQuery.where=r);var i=this.toOrder(e.orderBy);i&&(t.structuredQuery.orderBy=i);var o=this.toInt32Value(e.limit);return null!==o&&(t.structuredQuery.limit=o),e.startAt&&(t.structuredQuery.startAt=this.toCursor(e.startAt)),e.endAt&&(t.structuredQuery.endAt=this.toCursor(e.endAt)),t},e.prototype.fromQueryTarget=function(e){var t=this.fromQueryPath(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){b(1===r,"StructuredQuery.from with more than one collection is not supported.");var o=n.from[0];o.allDescendants?i=o.collectionId:t=t.child(o.collectionId)}var a=[];n.where&&(a=this.fromFilter(n.where));var s=[];n.orderBy&&(s=this.fromOrder(n.orderBy));var u=null;n.limit&&(u=this.fromInt32Value(n.limit));var c=null;n.startAt&&(c=this.fromCursor(n.startAt));var l=null;return n.endAt&&(l=this.fromCursor(n.endAt)),new tr(t,i,s,a,u,Zn.First,c,l).toTarget()},e.prototype.toListenRequestLabels=function(e){var t=this.toLabel(e.purpose);return null==t?null:{"goog-listen-tags":t}},e.prototype.toLabel=function(e){switch(e){case Tn.Listen:return null;case Tn.ExistenceFilterMismatch:return"existence-filter-mismatch";case Tn.LimboResolution:return"limbo-document";default:return v("Unrecognized query purpose: "+e)}},e.prototype.toTarget=function(e){var t,n=e.target;return(t=n.isDocumentQuery()?{documents:this.toDocumentsTarget(n)}:{query:this.toQueryTarget(n)}).targetId=e.targetId,e.resumeToken.length>0&&(t.resumeToken=this.unsafeCastProtoByteString(e.resumeToken)),t},e.prototype.toFilter=function(e){var t=this;if(0!==e.length){var n=e.map((function(e){return e instanceof ir?t.toUnaryOrFieldFilter(e):v("Unrecognized filter: "+JSON.stringify(e))}));return 1===n.length?n[0]:{compositeFilter:{op:"AND",filters:n}}}},e.prototype.fromFilter=function(e){var t=this;return e?void 0!==e.unaryFilter?[this.fromUnaryFilter(e)]:void 0!==e.fieldFilter?[this.fromFieldFilter(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return t.fromFilter(e)})).reduce((function(e,t){return e.concat(t)})):v("Unknown filter: "+JSON.stringify(e)):[]},e.prototype.toOrder=function(e){var t=this;if(0!==e.length)return e.map((function(e){return t.toPropertyOrder(e)}))},e.prototype.fromOrder=function(e){var t=this;return e.map((function(e){return t.fromPropertyOrder(e)}))},e.prototype.toCursor=function(e){var t=this;return{before:e.before,values:e.position.map((function(e){return t.toValue(e)}))}},e.prototype.fromCursor=function(e){var t=this,n=!!e.before,r=e.values.map((function(e){return t.fromValue(e)}));return new hr(r,n)},e.prototype.toDirection=function(e){return gi[e.name]},e.prototype.fromDirection=function(e){switch(e){case"ASCENDING":return lr.ASCENDING;case"DESCENDING":return lr.DESCENDING;default:return}},e.prototype.toOperatorName=function(e){return yi[e.name]},e.prototype.fromOperatorName=function(e){switch(e){case"EQUAL":return rr.EQUAL;case"GREATER_THAN":return rr.GREATER_THAN;case"GREATER_THAN_OR_EQUAL":return rr.GREATER_THAN_OR_EQUAL;case"LESS_THAN":return rr.LESS_THAN;case"LESS_THAN_OR_EQUAL":return rr.LESS_THAN_OR_EQUAL;case"ARRAY_CONTAINS":return rr.ARRAY_CONTAINS;case"IN":return rr.IN;case"ARRAY_CONTAINS_ANY":return rr.ARRAY_CONTAINS_ANY;case"OPERATOR_UNSPECIFIED":return v("Unspecified operator");default:return v("Unknown operator")}},e.prototype.toFieldPathReference=function(e){return{fieldPath:e.canonicalString()}},e.prototype.fromFieldPathReference=function(e){return de.fromServerFormat(e.fieldPath)},e.prototype.toPropertyOrder=function(e){return{field:this.toFieldPathReference(e.field),direction:this.toDirection(e.dir)}},e.prototype.fromPropertyOrder=function(e){return new dr(this.fromFieldPathReference(e.field),this.fromDirection(e.direction))},e.prototype.fromFieldFilter=function(e){return ir.create(this.fromFieldPathReference(e.fieldFilter.field),this.fromOperatorName(e.fieldFilter.op),this.fromValue(e.fieldFilter.value))},e.prototype.toUnaryOrFieldFilter=function(e){if(e.op===rr.EQUAL){if(e.value.isEqual(Ot.NAN))return{unaryFilter:{field:this.toFieldPathReference(e.field),op:"IS_NAN"}};if(e.value.isEqual(At.INSTANCE))return{unaryFilter:{field:this.toFieldPathReference(e.field),op:"IS_NULL"}}}return{fieldFilter:{field:this.toFieldPathReference(e.field),op:this.toOperatorName(e.op),value:this.toValue(e.value)}}},e.prototype.fromUnaryFilter=function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=this.fromFieldPathReference(e.unaryFilter.field);return ir.create(t,rr.EQUAL,Ot.NAN);case"IS_NULL":var n=this.fromFieldPathReference(e.unaryFilter.field);return ir.create(n,rr.EQUAL,At.INSTANCE);case"OPERATOR_UNSPECIFIED":return v("Unspecified filter");default:return v("Unknown filter")}},e.prototype.toDocumentMask=function(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}},e.prototype.fromDocumentMask=function(e){var t=(e.fieldPaths||[]).map((function(e){return de.fromServerFormat(e)}));return yt.fromArray(t)},e}(),Si=function(){this.viewSnap=null,this.targetId=0,this.listeners=[]},Ii=function(){function e(e){this.syncEngine=e,this.queries=new Ht((function(e){return e.canonicalId()})),this.onlineState=Mr.Unknown,this.snapshotsInSyncListeners=new Set,this.syncEngine.subscribe(this)}return e.prototype.listen=function(e){var t=e.query,n=!1,r=this.queries.get(t);(r||(n=!0,r=new Si,this.queries.set(t,r)),r.listeners.push(e),b(!e.applyOnlineStateChange(this.onlineState),"applyOnlineStateChange() shouldn't raise an event for brand-new listeners."),r.viewSnap)&&(e.onViewSnapshot(r.viewSnap)&&this.raiseSnapshotsInSyncEvent());return n?this.syncEngine.listen(t).then((function(e){return r.targetId=e,e})):Promise.resolve(r.targetId)},e.prototype.unlisten=function(e){return a.__awaiter(this,void 0,void 0,(function(){var t,n,r,i;return a.__generator(this,(function(o){return t=e.query,n=!1,(r=this.queries.get(t))&&(i=r.listeners.indexOf(e))>=0&&(r.listeners.splice(i,1),n=0===r.listeners.length),n?(this.queries.delete(t),[2,this.syncEngine.unlisten(t)]):[2]}))}))},e.prototype.onWatchChange=function(e){for(var t=!1,n=0,r=e;n<r.length;n++){var i=r[n],o=i.query,a=this.queries.get(o);if(a){for(var s=0,u=a.listeners;s<u.length;s++){u[s].onViewSnapshot(i)&&(t=!0)}a.viewSnap=i}}t&&this.raiseSnapshotsInSyncEvent()},e.prototype.onWatchError=function(e,t){var n=this.queries.get(e);if(n)for(var r=0,i=n.listeners;r<i.length;r++){i[r].onError(t)}this.queries.delete(e)},e.prototype.onOnlineStateChange=function(e){this.onlineState=e;var t=!1;this.queries.forEach((function(n,r){for(var i=0,o=r.listeners;i<o.length;i++){o[i].applyOnlineStateChange(e)&&(t=!0)}})),t&&this.raiseSnapshotsInSyncEvent()},e.prototype.addSnapshotsInSyncListener=function(e){this.snapshotsInSyncListeners.add(e),e.next()},e.prototype.removeSnapshotsInSyncListener=function(e){this.snapshotsInSyncListeners.delete(e)},e.prototype.raiseSnapshotsInSyncEvent=function(){this.snapshotsInSyncListeners.forEach((function(e){e.next()}))},e}(),Ei=function(){function e(e,t,n){this.query=e,this.queryObserver=t,this.raisedInitialEvent=!1,this.snap=null,this.onlineState=Mr.Unknown,this.options=n||{}}return e.prototype.onViewSnapshot=function(e){if(b(e.docChanges.length>0||e.syncStateChanged,"We got a new snapshot with no changes?"),!this.options.includeMetadataChanges){for(var t=[],n=0,r=e.docChanges;n<r.length;n++){var i=r[n];i.type!==zr.Metadata&&t.push(i)}e=new Yr(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var o=!1;return this.raisedInitialEvent?this.shouldRaiseEvent(e)&&(this.queryObserver.next(e),o=!0):this.shouldRaiseInitialEvent(e,this.onlineState)&&(this.raiseInitialEvent(e),o=!0),this.snap=e,o},e.prototype.onError=function(e){this.queryObserver.error(e)},e.prototype.applyOnlineStateChange=function(e){this.onlineState=e;var t=!1;return this.snap&&!this.raisedInitialEvent&&this.shouldRaiseInitialEvent(this.snap,e)&&(this.raiseInitialEvent(this.snap),t=!0),t},e.prototype.shouldRaiseInitialEvent=function(e,t){if(b(!this.raisedInitialEvent,"Determining whether to raise first event but already had first event"),!e.fromCache)return!0;var n=t!==Mr.Offline;return this.options.waitForSyncWhenOnline&&n?(b(e.fromCache,"Waiting for sync, but snapshot is not from cache"),!1):!e.docs.isEmpty()||t===Mr.Offline},e.prototype.shouldRaiseEvent=function(e){if(e.docChanges.length>0)return!0;var t=this.snap&&this.snap.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges},e.prototype.raiseInitialEvent=function(e){b(!this.raisedInitialEvent,"Trying to raise initial events for second time"),e=Yr.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.raisedInitialEvent=!0,this.queryObserver.next(e)},e}(),Ci=function(){function e(e,t,n,r){this.targetId=e,this.fromCache=t,this.addedKeys=n,this.removedKeys=r}return e.fromSnapshot=function(t,n){for(var r=qe(),i=qe(),o=0,a=n.docChanges;o<a.length;o++){var s=a[o];switch(s.type){case zr.Added:r=r.add(s.doc.key);break;case zr.Removed:i=i.add(s.doc.key)}}return new e(t,n.fromCache,r,i)},e}(),_i=function(e){this.key=e},Di=function(e){this.key=e},ki=function(){function e(e,t){this.query=e,this._syncedDocuments=t,this.syncState=null,this.current=!1,this.limboDocuments=qe(),this.mutatedKeys=qe(),this.documentSet=new Gr(e.docComparator.bind(e))}return Object.defineProperty(e.prototype,"syncedDocuments",{get:function(){return this._syncedDocuments},enumerable:!0,configurable:!0}),e.prototype.computeDocChanges=function(e,t){var n=this,r=t?t.changeSet:new Hr,i=t?t.documentSet:this.documentSet,o=t?t.mutatedKeys:this.mutatedKeys,a=i,s=!1,u=this.query.hasLimitToFirst()&&i.size===this.query.limit?i.last():null,c=this.query.hasLimitToLast()&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),h=t instanceof Kt?t:null;h&&(b(e.isEqual(h.key),"Mismatching keys found in document changes: "+e+" != "+h.key),h=n.query.matches(h)?h:null);var d=!!l&&n.mutatedKeys.has(l.key),f=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data().isEqual(h.data())?d!==f&&(r.track({type:zr.Metadata,doc:h}),p=!0):n.shouldWaitForSyncedDocument(l,h)||(r.track({type:zr.Modified,doc:h}),p=!0,(u&&n.query.docComparator(h,u)>0||c&&n.query.docComparator(h,c)<0)&&(s=!0)):!l&&h?(r.track({type:zr.Added,doc:h}),p=!0):l&&!h&&(r.track({type:zr.Removed,doc:l}),p=!0,(u||c)&&(s=!0));p&&(h?(a=a.add(h),o=f?o.add(e):o.delete(e)):(a=a.delete(e),o=o.delete(e)))})),this.query.hasLimitToFirst()||this.query.hasLimitToLast())for(;a.size>this.query.limit;){var l=this.query.hasLimitToFirst()?a.last():a.first();a=a.delete(l.key),o=o.delete(l.key),r.track({type:zr.Removed,doc:l})}return b(!s||!t,"View was refilled using docs that themselves needed refilling."),{documentSet:a,changeSet:r,needsRefill:s,mutatedKeys:o}},e.prototype.shouldWaitForSyncedDocument=function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations},e.prototype.applyChanges=function(e,t,n){var r=this;b(!e.needsRefill,"Cannot apply changes that need a refill");var i=this.documentSet;this.documentSet=e.documentSet,this.mutatedKeys=e.mutatedKeys;var o=e.changeSet.getChanges();o.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case zr.Added:return 1;case zr.Modified:case zr.Metadata:return 2;case zr.Removed:return 0;default:return v("Unknown ChangeType: "+e)}};return n(e)-n(t)}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e.type,t.type)||r.query.docComparator(e.doc,t.doc)})),this.applyTargetChange(n);var a=t?this.updateLimboDocuments():[],s=0===this.limboDocuments.size&&this.current?Kr.Synced:Kr.Local,u=s!==this.syncState;return this.syncState=s,0!==o.length||u?{snapshot:new Yr(this.query,e.documentSet,i,o,e.mutatedKeys,s===Kr.Local,u,!1),limboChanges:a}:{limboChanges:a}},e.prototype.applyOnlineStateChange=function(e){return this.current&&e===Mr.Offline?(this.current=!1,this.applyChanges({documentSet:this.documentSet,changeSet:new Hr,mutatedKeys:this.mutatedKeys,needsRefill:!1},!1)):{limboChanges:[]}},e.prototype.shouldBeInLimbo=function(e){return!this._syncedDocuments.has(e)&&(!!this.documentSet.has(e)&&!this.documentSet.get(e).hasLocalMutations)},e.prototype.applyTargetChange=function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t._syncedDocuments=t._syncedDocuments.add(e)})),e.modifiedDocuments.forEach((function(e){return b(t._syncedDocuments.has(e),"Modified document "+e+" not found in view.")})),e.removedDocuments.forEach((function(e){return t._syncedDocuments=t._syncedDocuments.delete(e)})),this.current=e.current)},e.prototype.updateLimboDocuments=function(){var e=this;if(!this.current)return[];var t=this.limboDocuments;this.limboDocuments=qe(),this.documentSet.forEach((function(t){e.shouldBeInLimbo(t.key)&&(e.limboDocuments=e.limboDocuments.add(t.key))}));var n=[];return t.forEach((function(t){e.limboDocuments.has(t)||n.push(new Di(t))})),this.limboDocuments.forEach((function(e){t.has(e)||n.push(new _i(e))})),n},e.prototype.synchronizeWithPersistedState=function(e){this._syncedDocuments=e.remoteKeys,this.limboDocuments=qe();var t=this.computeDocChanges(e.documents);return this.applyChanges(t,!0)},e.prototype.computeInitialSnapshot=function(){return Yr.fromInitialDocuments(this.query,this.documentSet,this.mutatedKeys,this.syncState===Kr.Local)},e}();
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ni=5,Ai=function(){function e(e,t,n,r){this.asyncQueue=e,this.remoteStore=t,this.updateFunction=n,this.deferred=r,this.retries=Ni,this.backoff=new xr(this.asyncQueue,ne.RetryTransaction)}return e.prototype.run=function(){this.runWithBackOff()},e.prototype.runWithBackOff=function(){var e=this;this.backoff.backoffAndRun((function(){return a.__awaiter(e,void 0,void 0,(function(){var e,t,n=this;return a.__generator(this,(function(r){return e=this.remoteStore.createTransaction(),(t=this.tryRunUpdateFunction(e))&&t.then((function(t){n.asyncQueue.enqueueAndForget((function(){return e.commit().then((function(){n.deferred.resolve(t)})).catch((function(e){n.handleTransactionError(e)}))}))})).catch((function(e){n.handleTransactionError(e)})),[2]}))}))}))},e.prototype.tryRunUpdateFunction=function(e){try{var t=this.updateFunction(e);return!Xn(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}},e.prototype.handleTransactionError=function(e){var t=this;this.retries>0&&this.isRetryableTransactionError(e)?(this.retries-=1,this.asyncQueue.enqueueAndForget((function(){return t.runWithBackOff(),Promise.resolve()}))):this.deferred.reject(e)},e.prototype.isRetryableTransactionError=function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!qr(t)}return!1},e}(),xi=function(e,t,n){this.query=e,this.targetId=t,this.view=n},Mi=function(e){this.key=e,this.receivedDocument=!1},Li=function(){function e(e,t,n,r){this.localStore=e,this.remoteStore=t,this.sharedClientState=n,this.currentUser=r,this.syncEngineListener=null,this.queryViewsByQuery=new Ht((function(e){return e.canonicalId()})),this.queriesByTarget={},this.limboTargetsByKey=new De(fe.comparator),this.limboResolutionsByTarget={},this.limboDocumentRefs=new yr,this.mutationUserCallbacks={},this.pendingWritesCallbacks=new Map,this.limboTargetIdGenerator=lt.forSyncEngine(),this.isPrimary=void 0,this.onlineState=Mr.Unknown}return Object.defineProperty(e.prototype,"isPrimaryClient",{get:function(){return!0===this.isPrimary},enumerable:!0,configurable:!0}),e.prototype.subscribe=function(e){b(null!==e,"SyncEngine listener cannot be null"),b(null===this.syncEngineListener,"SyncEngine already has a subscriber."),this.syncEngineListener=e},e.prototype.listen=function(e){return a.__awaiter(this,void 0,void 0,(function(){var t,n,r,i,o;return a.__generator(this,(function(a){switch(a.label){case 0:return this.assertSubscribed("listen()"),(r=this.queryViewsByQuery.get(e))?(t=r.targetId,this.sharedClientState.addLocalQueryTarget(t),n=r.view.computeInitialSnapshot(),[3,4]):[3,1];case 1:return[4,this.localStore.allocateTarget(e.toTarget())];case 2:return i=a.sent(),o=this.sharedClientState.addLocalQueryTarget(i.targetId),t=i.targetId,[4,this.initializeViewAndComputeSnapshot(e,t,"current"===o)];case 3:n=a.sent(),this.isPrimary&&this.remoteStore.listen(i),a.label=4;case 4:return this.syncEngineListener.onWatchChange([n]),[2,t]}}))}))},e.prototype.initializeViewAndComputeSnapshot=function(e,t,n){return a.__awaiter(this,void 0,void 0,(function(){var r,i,o,s,u,c;return a.__generator(this,(function(a){switch(a.label){case 0:return[4,this.localStore.executeQuery(e,!0)];case 1:return r=a.sent(),i=new ki(e,r.remoteKeys),o=i.computeDocChanges(r.documents),s=Xr.createSynthesizedTargetChangeForCurrentChange(t,n&&this.onlineState!==Mr.Offline),b(0===(u=i.applyChanges(o,!0===this.isPrimary,s)).limboChanges.length,"View returned limbo docs before target ack from the server."),b(!!u.snapshot,"applyChanges for new view should always return a snapshot"),c=new xi(e,t,i),this.queryViewsByQuery.set(e,c),this.queriesByTarget[t]||(this.queriesByTarget[t]=[]),this.queriesByTarget[t].push(e),[2,u.snapshot]}}))}))},e.prototype.synchronizeViewAndComputeSnapshot=function(e){return a.__awaiter(this,void 0,void 0,(function(){var t,n;return a.__generator(this,(function(r){switch(r.label){case 0:return[4,this.localStore.executeQuery(e.query,!0)];case 1:return t=r.sent(),n=e.view.synchronizeWithPersistedState(t),this.isPrimary&&this.updateTrackedLimbos(e.targetId,n.limboChanges),[2,n]}}))}))},e.prototype.unlisten=function(e){return a.__awaiter(this,void 0,void 0,(function(){var t,n,r=this;return a.__generator(this,(function(i){switch(i.label){case 0:return this.assertSubscribed("unlisten()"),b(!!(t=this.queryViewsByQuery.get(e)),"Trying to unlisten on query not found:"+e),(n=this.queriesByTarget[t.targetId]).length>1?(this.queriesByTarget[t.targetId]=n.filter((function(t){return!t.isEqual(e)})),this.queryViewsByQuery.delete(e),[2]):this.isPrimary?(this.sharedClientState.removeLocalQueryTarget(t.targetId),this.sharedClientState.isActiveQueryTarget(t.targetId)?[3,2]:[4,this.localStore.releaseTarget(t.targetId,!1).then((function(){r.sharedClientState.clearQueryState(t.targetId),r.remoteStore.unlisten(t.targetId),r.removeAndCleanupTarget(t.targetId)})).catch(Un)]):[3,3];case 1:i.sent(),i.label=2;case 2:return[3,5];case 3:return this.removeAndCleanupTarget(t.targetId),[4,this.localStore.releaseTarget(t.targetId,!0)];case 4:i.sent(),i.label=5;case 5:return[2]}}))}))},e.prototype.write=function(e,t){return a.__awaiter(this,void 0,void 0,(function(){var n;return a.__generator(this,(function(r){switch(r.label){case 0:return this.assertSubscribed("write()"),[4,this.localStore.localWrite(e)];case 1:return n=r.sent(),this.sharedClientState.addPendingMutation(n.batchId),this.addMutationCallback(n.batchId,t),[4,this.emitNewSnapsAndNotifyLocalStore(n.changes)];case 2:return r.sent(),[4,this.remoteStore.fillWritePipeline()];case 3:return r.sent(),[2]}}))}))},e.prototype.runTransaction=function(e,t,n){new Ai(e,this.remoteStore,t,n).run()},e.prototype.applyRemoteEvent=function(e){return a.__awaiter(this,void 0,void 0,(function(){var t,n=this;return a.__generator(this,(function(r){switch(r.label){case 0:this.assertSubscribed("applyRemoteEvent()"),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.localStore.applyRemoteEvent(e)];case 2:return t=r.sent(),k(e.targetChanges,(function(e,t){var r=n.limboResolutionsByTarget[Number(e)];r&&(b(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1,"Limbo resolution for single document contains multiple changes."),t.addedDocuments.size>0?r.receivedDocument=!0:t.modifiedDocuments.size>0?b(r.receivedDocument,"Received change for limbo target document without add."):t.removedDocuments.size>0&&(b(r.receivedDocument,"Received remove for limbo target document without add."),r.receivedDocument=!1))})),[4,this.emitNewSnapsAndNotifyLocalStore(t,e)];case 3:return r.sent(),[3,6];case 4:return[4,Un(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},e.prototype.applyOnlineStateChange=function(e,t){if(this.isPrimary&&t===Lr.RemoteStore||!this.isPrimary&&t===Lr.SharedClientState){this.assertSubscribed("applyOnlineStateChange()");var n=[];this.queryViewsByQuery.forEach((function(t,r){var i=r.view.applyOnlineStateChange(e);b(0===i.limboChanges.length,"OnlineState should not affect limbo documents."),i.snapshot&&n.push(i.snapshot)})),this.syncEngineListener.onOnlineStateChange(e),this.syncEngineListener.onWatchChange(n),this.onlineState=e,this.isPrimary&&this.sharedClientState.setOnlineState(e)}},e.prototype.rejectListen=function(e,t){return a.__awaiter(this,void 0,void 0,(function(){var n,r,i,o,s,u=this;return a.__generator(this,(function(a){switch(a.label){case 0:return this.assertSubscribed("rejectListens()"),this.sharedClientState.updateQueryState(e,"rejected",t),n=this.limboResolutionsByTarget[e],(r=n&&n.key)?(this.limboTargetsByKey=this.limboTargetsByKey.remove(r),delete this.limboResolutionsByTarget[e],i=(i=new De(fe.comparator)).insert(r,new Gt(r,_e.forDeletedDoc())),o=qe().add(r),s=new Jr(_e.MIN,{},new xe(X),i,o),[2,this.applyRemoteEvent(s)]):[3,1];case 1:return[4,this.localStore.releaseTarget(e,!1).then((function(){return u.removeAndCleanupTarget(e,t)})).catch(Un)];case 2:a.sent(),a.label=3;case 3:return[2]}}))}))},e.prototype.applyBatchState=function(e,t,n){return a.__awaiter(this,void 0,void 0,(function(){var r;return a.__generator(this,(function(i){switch(i.label){case 0:return this.assertSubscribed("applyBatchState()"),[4,this.localStore.lookupMutationDocuments(e)];case 1:return null===(r=i.sent())?(m("SyncEngine","Cannot apply mutation batch with id: "+e),[2]):"pending"!==t?[3,3]:[4,this.remoteStore.fillWritePipeline()];case 2:return i.sent(),[3,4];case 3:"acknowledged"===t||"rejected"===t?(this.processUserCallback(e,n||null),this.localStore.removeCachedMutationBatchMetadata(e)):v("Unknown batchState: "+t),i.label=4;case 4:return[4,this.emitNewSnapsAndNotifyLocalStore(r)];case 5:return i.sent(),[2]}}))}))},e.prototype.applySuccessfulWrite=function(e){return a.__awaiter(this,void 0,void 0,(function(){var t,n;return a.__generator(this,(function(r){switch(r.label){case 0:this.assertSubscribed("applySuccessfulWrite()"),t=e.batch.batchId,this.processUserCallback(t,null),this.triggerPendingWritesCallbacks(t),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.localStore.acknowledgeBatch(e)];case 2:return n=r.sent(),this.sharedClientState.updateMutationState(t,"acknowledged"),[4,this.emitNewSnapsAndNotifyLocalStore(n)];case 3:return r.sent(),[3,6];case 4:return[4,Un(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},e.prototype.rejectFailedWrite=function(e,t){return a.__awaiter(this,void 0,void 0,(function(){var n;return a.__generator(this,(function(r){switch(r.label){case 0:this.assertSubscribed("rejectFailedWrite()"),this.processUserCallback(e,t),this.triggerPendingWritesCallbacks(e),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.localStore.rejectBatch(e)];case 2:return n=r.sent(),this.sharedClientState.updateMutationState(e,"rejected",t),[4,this.emitNewSnapsAndNotifyLocalStore(n)];case 3:return r.sent(),[3,6];case 4:return[4,Un(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},e.prototype.registerPendingWritesCallback=function(e){return a.__awaiter(this,void 0,void 0,(function(){var t,n;return a.__generator(this,(function(r){switch(r.label){case 0:return this.remoteStore.canUseNetwork()||m("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),[4,this.localStore.getHighestUnacknowledgedBatchId()];case 1:return-1===(t=r.sent())?(e.resolve(),[2]):((n=this.pendingWritesCallbacks.get(t)||[]).push(e),this.pendingWritesCallbacks.set(t,n),[2])}}))}))},e.prototype.triggerPendingWritesCallbacks=function(e){(this.pendingWritesCallbacks.get(e)||[]).forEach((function(e){e.resolve()})),this.pendingWritesCallbacks.delete(e)},e.prototype.rejectOutstandingPendingWritesCallbacks=function(e){this.pendingWritesCallbacks.forEach((function(t){t.forEach((function(t){t.reject(new I(S.CANCELLED,e))}))})),this.pendingWritesCallbacks.clear()},e.prototype.addMutationCallback=function(e,t){var n=this.mutationUserCallbacks[this.currentUser.toKey()];n||(n=new De(X)),n=n.insert(e,t),this.mutationUserCallbacks[this.currentUser.toKey()]=n},e.prototype.processUserCallback=function(e,t){var n=this.mutationUserCallbacks[this.currentUser.toKey()];if(n){var r=n.get(e);r&&(b(e===n.minKey(),"Mutation callbacks processed out-of-order?"),t?r.reject(t):r.resolve(),n=n.remove(e)),this.mutationUserCallbacks[this.currentUser.toKey()]=n}},e.prototype.removeAndCleanupTarget=function(e,t){var n=this;void 0===t&&(t=null),this.sharedClientState.removeLocalQueryTarget(e),b(this.queriesByTarget[e]&&0!==this.queriesByTarget[e].length,"There are no queries mapped to target id "+e);for(var r=0,i=this.queriesByTarget[e];r<i.length;r++){var o=i[r];this.queryViewsByQuery.delete(o),t&&this.syncEngineListener.onWatchError(o,t)}if(delete this.queriesByTarget[e],this.isPrimary){var a=this.limboDocumentRefs.referencesForId(e);this.limboDocumentRefs.removeReferencesForId(e),a.forEach((function(e){n.limboDocumentRefs.containsKey(e)||n.removeLimboTarget(e)}))}},e.prototype.removeLimboTarget=function(e){var t=this.limboTargetsByKey.get(e);null!==t&&(this.remoteStore.unlisten(t),this.limboTargetsByKey=this.limboTargetsByKey.remove(e),delete this.limboResolutionsByTarget[t])},e.prototype.updateTrackedLimbos=function(e,t){for(var n=0,r=t;n<r.length;n++){var i=r[n];if(i instanceof _i)this.limboDocumentRefs.addReference(i.key,e),this.trackLimboChange(i);else if(i instanceof Di){m("SyncEngine","Document no longer in limbo: "+i.key),this.limboDocumentRefs.removeReference(i.key,e),this.limboDocumentRefs.containsKey(i.key)||this.removeLimboTarget(i.key)}else v("Unknown limbo change: "+JSON.stringify(i))}},e.prototype.trackLimboChange=function(e){var t=e.key;if(!this.limboTargetsByKey.get(t)){m("SyncEngine","New document in limbo: "+t);var n=this.limboTargetIdGenerator.next(),r=tr.atPath(t.path);this.limboResolutionsByTarget[n]=new Mi(t),this.remoteStore.listen(new kn(r.toTarget(),n,Tn.LimboResolution,ue.INVALID)),this.limboTargetsByKey=this.limboTargetsByKey.insert(t,n)}},e.prototype.currentLimboDocs=function(){return this.limboTargetsByKey},e.prototype.emitNewSnapsAndNotifyLocalStore=function(e,t){return a.__awaiter(this,void 0,void 0,(function(){var n,r,i,o=this;return a.__generator(this,(function(a){switch(a.label){case 0:return n=[],r=[],i=[],this.queryViewsByQuery.forEach((function(a,s){i.push(Promise.resolve().then((function(){var t=s.view.computeDocChanges(e);return t.needsRefill?o.localStore.executeQuery(s.query,!1).then((function(e){var n=e.documents;return s.view.computeDocChanges(n,t)})):t})).then((function(e){var i=t&&t.targetChanges[s.targetId],a=s.view.applyChanges(e,!0===o.isPrimary,i);if(o.updateTrackedLimbos(s.targetId,a.limboChanges),a.snapshot){o.isPrimary&&o.sharedClientState.updateQueryState(s.targetId,a.snapshot.fromCache?"not-current":"current"),n.push(a.snapshot);var u=Ci.fromSnapshot(s.targetId,a.snapshot);r.push(u)}})))})),[4,Promise.all(i)];case 1:return a.sent(),this.syncEngineListener.onWatchChange(n),[4,this.localStore.notifyLocalViewChanges(r)];case 2:return a.sent(),[2]}}))}))},e.prototype.assertSubscribed=function(e){b(null!==this.syncEngineListener,"Trying to call "+e+" before calling subscribe().")},e.prototype.handleCredentialChange=function(e){return a.__awaiter(this,void 0,void 0,(function(){var t,n;return a.__generator(this,(function(r){switch(r.label){case 0:return t=!this.currentUser.isEqual(e),this.currentUser=e,t?(this.rejectOutstandingPendingWritesCallbacks("'waitForPendingWrites' promise is rejected due to a user change."),[4,this.localStore.handleUserChange(e)]):[3,3];case 1:return n=r.sent(),this.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),[4,this.emitNewSnapsAndNotifyLocalStore(n.affectedDocuments)];case 2:r.sent(),r.label=3;case 3:return[4,this.remoteStore.handleCredentialChange()];case 4:return r.sent(),[2]}}))}))},e.prototype.applyPrimaryState=function(e){return a.__awaiter(this,void 0,void 0,(function(){var t,n,r,i,o,s,u,c=this;return a.__generator(this,(function(a){switch(a.label){case 0:return!0!==e||!0===this.isPrimary?[3,3]:(this.isPrimary=!0,[4,this.remoteStore.applyPrimaryState(!0)]);case 1:return a.sent(),t=this.sharedClientState.getAllActiveQueryTargets(),[4,this.synchronizeQueryViewsAndRaiseSnapshots(t.toArray())];case 2:for(n=a.sent(),r=0,i=n;r<i.length;r++)o=i[r],this.remoteStore.listen(o);return[3,7];case 3:return!1!==e||!1===this.isPrimary?[3,7]:(this.isPrimary=!1,s=[],u=Promise.resolve(),D(this.queriesByTarget,(function(e,t){c.sharedClientState.isLocalQueryTarget(e)?s.push(e):u=u.then((function(){return c.removeAndCleanupTarget(e),c.localStore.releaseTarget(e,!0)})),c.remoteStore.unlisten(e)})),[4,u]);case 4:return a.sent(),[4,this.synchronizeQueryViewsAndRaiseSnapshots(s)];case 5:return a.sent(),this.resetLimboDocuments(),[4,this.remoteStore.applyPrimaryState(!1)];case 6:a.sent(),a.label=7;case 7:return[2]}}))}))},e.prototype.resetLimboDocuments=function(){var e=this;D(this.limboResolutionsByTarget,(function(t){e.remoteStore.unlisten(t)})),this.limboDocumentRefs.removeAllReferences(),this.limboResolutionsByTarget=[],this.limboTargetsByKey=new De(fe.comparator)},e.prototype.synchronizeQueryViewsAndRaiseSnapshots=function(e){return a.__awaiter(this,void 0,void 0,(function(){var t,n,r,i,o,s,u,c,l,h,d,f,p;return a.__generator(this,(function(a){switch(a.label){case 0:t=[],n=[],r=0,i=e,a.label=1;case 1:return r<i.length?(o=i[r],s=void 0,(u=this.queriesByTarget[o])&&0!==u.length?[4,this.localStore.releaseTarget(o,!0)]:[3,8]):[3,14];case 2:return a.sent(),[4,this.localStore.allocateTarget(u[0].toTarget())];case 3:s=a.sent(),c=0,l=u,a.label=4;case 4:return c<l.length?(h=l[c],b(!!(d=this.queryViewsByQuery.get(h)),"No query view found for "+h),[4,this.synchronizeViewAndComputeSnapshot(d)]):[3,7];case 5:(f=a.sent()).snapshot&&n.push(f.snapshot),a.label=6;case 6:return c++,[3,4];case 7:return[3,12];case 8:return b(!0===this.isPrimary,"A secondary tab should never have an active target without an active query."),[4,this.localStore.getTarget(o)];case 9:return b(!!(p=a.sent()),"Target for id "+o+" not found"),[4,this.localStore.allocateTarget(p)];case 10:return s=a.sent(),[4,this.initializeViewAndComputeSnapshot(this.synthesizeTargetToQuery(p),o,!1)];case 11:a.sent(),a.label=12;case 12:t.push(s),a.label=13;case 13:return r++,[3,1];case 14:return this.syncEngineListener.onWatchChange(n),[2,t]}}))}))},e.prototype.synthesizeTargetToQuery=function(e){return new tr(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,Zn.First,e.startAt,e.endAt)},e.prototype.getActiveClients=function(){return this.localStore.getActiveClients()},e.prototype.applyTargetState=function(e,t,n){return a.__awaiter(this,void 0,void 0,(function(){var r,i;return a.__generator(this,(function(o){switch(o.label){case 0:if(this.isPrimary)return m("SyncEngine","Ignoring unexpected query state notification."),[2];if(!this.queriesByTarget[e])return[3,7];switch(t){case"current":case"not-current":return[3,1];case"rejected":return[3,4]}return[3,6];case 1:return[4,this.localStore.getNewDocumentChanges()];case 2:return r=o.sent(),i=Jr.createSynthesizedRemoteEventForCurrentChange(e,"current"===t),[4,this.emitNewSnapsAndNotifyLocalStore(r,i)];case 3:return o.sent(),[3,7];case 4:return[4,this.localStore.releaseTarget(e,!0)];case 5:return o.sent(),this.removeAndCleanupTarget(e,n),[3,7];case 6:v("Unexpected target state: "+t),o.label=7;case 7:return[2]}}))}))},e.prototype.applyActiveTargetsChange=function(e,t){return a.__awaiter(this,void 0,void 0,(function(){var n,r,i,o,s,u,c,l,h,d=this;return a.__generator(this,(function(f){switch(f.label){case 0:if(!this.isPrimary)return[2];n=0,r=e,f.label=1;case 1:return n<r.length?(h=r[n],b(!this.queriesByTarget[h],"Trying to add an already active target"),[4,this.localStore.getTarget(h)]):[3,6];case 2:return b(!!(i=f.sent()),"Query data for active target "+h+" not found"),[4,this.localStore.allocateTarget(i)];case 3:return o=f.sent(),[4,this.initializeViewAndComputeSnapshot(this.synthesizeTargetToQuery(i),o.targetId,!1)];case 4:f.sent(),this.remoteStore.listen(o),f.label=5;case 5:return n++,[3,1];case 6:s=function(e){return a.__generator(this,(function(t){switch(t.label){case 0:return u.queriesByTarget[e]?[4,u.localStore.releaseTarget(e,!1).then((function(){d.remoteStore.unlisten(e),d.removeAndCleanupTarget(e)})).catch(Un)]:[2,"continue"];case 1:return t.sent(),[2]}}))},u=this,c=0,l=t,f.label=7;case 7:return c<l.length?(h=l[c],[5,s(h)]):[3,10];case 8:f.sent(),f.label=9;case 9:return c++,[3,7];case 10:return[2]}}))}))},e.prototype.enableNetwork=function(){return this.localStore.setNetworkEnabled(!0),this.remoteStore.enableNetwork()},e.prototype.disableNetwork=function(){return this.localStore.setNetworkEnabled(!1),this.remoteStore.disableNetwork()},e.prototype.getRemoteKeysForTarget=function(e){var t=this.limboResolutionsByTarget[e];if(t&&t.receivedDocument)return qe().add(t.key);var n=qe(),r=this.queriesByTarget[e];if(!r)return n;for(var i=0,o=r;i<o.length;i++){var a=o[i],s=this.queryViewsByQuery.get(a);b(!!s,"No query view found for "+a),n=n.unionWith(s.view.syncedDocuments)}return n},e}(),Pi=function(){function e(e){this.uid=e}return e.prototype.isAuthenticated=function(){return null!=this.uid},e.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},e.prototype.isEqual=function(e){return e.uid===this.uid},e.UNAUTHENTICATED=new e(null),e.GOOGLE_CREDENTIALS=new e("google-credentials-uid"),e.FIRST_PARTY=new e("first-party-uid"),e}(),Oi="firestore_clients";function Ri(e,t){return b(-1===t.indexOf("_"),"Client key cannot contain '_', but was '"+t+"'"),Oi+"_"+e+"_"+t}var ji="firestore_mutations";function Bi(e,t,n){var r=ji+"_"+e+"_"+n;return t.isAuthenticated()&&(r+="_"+t.uid),r}var Fi="firestore_targets";function Vi(e,t){return Fi+"_"+e+"_"+t}var qi="firestore_online_state";var Ui="firestore_sequence_number";
/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Wi="SharedClientState",zi=function(){function e(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r,b(void 0!==r==("rejected"===n),"MutationMetadata must contain an error iff state is 'rejected'")}return e.fromWebStorageEntry=function(t,n,r){var i=JSON.parse(r),o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error),a=void 0;return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(a=new I(i.error.code,i.error.message)),o?new e(t,n,i.state,a):(g(Wi,"Failed to parse mutation state for ID '"+n+"': "+r),null)},e.prototype.toWebStorageJSON=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},e}(),Ki=function(){function e(e,t,n){this.targetId=e,this.state=t,this.error=n,b(void 0!==n==("rejected"===t),"QueryTargetMetadata must contain an error iff state is 'rejected'")}return e.fromWebStorageEntry=function(t,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new I(r.error.code,r.error.message)),i?new e(t,r.state,o):(g(Wi,"Failed to parse target state for ID '"+t+"': "+n),null)},e.prototype.toWebStorageJSON=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},e}(),Gi=function(){function e(e,t){this.clientId=e,this.activeTargetIds=t}return e.fromWebStorageEntry=function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=We(),a=0;i&&a<r.activeTargetIds.length;++a)i=$n(r.activeTargetIds[a]),o=o.add(r.activeTargetIds[a]);return i?new e(t,o):(g(Wi,"Failed to parse client data for instance '"+t+"': "+n),null)},e}(),Qi=function(){function e(e,t){this.clientId=e,this.onlineState=t}return e.fromWebStorageEntry=function(t){var n=JSON.parse(t);return"object"==typeof n&&n.onlineState in Mr&&"string"==typeof n.clientId?new e(n.clientId,Mr[n.onlineState]):(g(Wi,"Failed to parse online state: "+t),null)},e}(),Hi=function(){function e(){this.activeTargetIds=We()}return e.prototype.addQueryTarget=function(e){this.activeTargetIds=this.activeTargetIds.add(e)},e.prototype.removeQueryTarget=function(e){this.activeTargetIds=this.activeTargetIds.delete(e)},e.prototype.toWebStorageJSON=function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)},e}(),Yi=function(){function e(t,n,r,i,o){if(this.queue=t,this.platform=n,this.persistenceKey=r,this.localClientId=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.activeClients={},this.storageListener=this.handleWebStorageEvent.bind(this),this.started=!1,this.earlyEvents=[],!e.isAvailable(this.platform))throw new I(S.UNIMPLEMENTED,"LocalStorage is not available on this platform.");var a=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.platform.window.localStorage,this.currentUser=o,this.localClientStorageKey=Ri(this.persistenceKey,this.localClientId),this.sequenceNumberKey=function(e){return Ui+"_"+e}(this.persistenceKey),this.activeClients[this.localClientId]=new Hi,this.clientStateKeyRe=new RegExp("^"+Oi+"_"+a+"_([^_]*)$"),this.mutationBatchKeyRe=new RegExp("^"+ji+"_"+a+"_(\\d+)(?:_(.*))?$"),this.queryTargetKeyRe=new RegExp("^"+Fi+"_"+a+"_(\\d+)$"),this.onlineStateKey=function(e){return qi+"_"+e}(this.persistenceKey),this.platform.window.addEventListener("storage",this.storageListener)}return e.isAvailable=function(e){return!(!e.window||null==e.window.localStorage)},e.prototype.start=function(){return a.__awaiter(this,void 0,void 0,(function(){var e,t,n,r,i,o,s,u,c,l,h,d=this;return a.__generator(this,(function(a){switch(a.label){case 0:return b(!this.started,"WebStorageSharedClientState already started"),b(null!==this.syncEngine,"syncEngine property must be set before calling start()"),b(null!==this.onlineStateHandler,"onlineStateHandler property must be set before calling start()"),[4,this.syncEngine.getActiveClients()];case 1:for(e=a.sent(),t=0,n=e;t<n.length;t++)(r=n[t])!==this.localClientId&&(i=this.getItem(Ri(this.persistenceKey,r)))&&(o=Gi.fromWebStorageEntry(r,i))&&(this.activeClients[o.clientId]=o);for(this.persistClientState(),(s=this.storage.getItem(this.onlineStateKey))&&(u=this.fromWebStorageOnlineState(s))&&this.handleOnlineStateEvent(u),c=0,l=this.earlyEvents;c<l.length;c++)h=l[c],this.handleWebStorageEvent(h);return this.earlyEvents=[],this.platform.window.addEventListener("unload",(function(){return d.shutdown()})),this.started=!0,[2]}}))}))},e.prototype.writeSequenceNumber=function(e){this.setItem(this.sequenceNumberKey,JSON.stringify(e))},e.prototype.getAllActiveQueryTargets=function(){var e=We();return k(this.activeClients,(function(t,n){e=e.unionWith(n.activeTargetIds)})),e},e.prototype.isActiveQueryTarget=function(e){for(var t in this.activeClients)if(this.activeClients.hasOwnProperty(t)&&this.activeClients[t].activeTargetIds.has(e))return!0;return!1},e.prototype.addPendingMutation=function(e){this.persistMutationState(e,"pending")},e.prototype.updateMutationState=function(e,t,n){this.persistMutationState(e,t,n),this.removeMutationState(e)},e.prototype.addLocalQueryTarget=function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(Vi(this.persistenceKey,e));if(n){var r=Ki.fromWebStorageEntry(e,n);r&&(t=r.state)}}return this.localClientState.addQueryTarget(e),this.persistClientState(),t},e.prototype.removeLocalQueryTarget=function(e){this.localClientState.removeQueryTarget(e),this.persistClientState()},e.prototype.isLocalQueryTarget=function(e){return this.localClientState.activeTargetIds.has(e)},e.prototype.clearQueryState=function(e){this.removeItem(Vi(this.persistenceKey,e))},e.prototype.updateQueryState=function(e,t,n){this.persistQueryTargetState(e,t,n)},e.prototype.handleUserChange=function(e,t,n){var r=this;t.forEach((function(e){r.removeMutationState(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))},e.prototype.setOnlineState=function(e){this.persistOnlineState(e)},e.prototype.shutdown=function(){this.started&&(this.platform.window.removeEventListener("storage",this.storageListener),this.removeItem(this.localClientStorageKey),this.started=!1)},e.prototype.getItem=function(e){var t=this.storage.getItem(e);return m(Wi,"READ",e,t),t},e.prototype.setItem=function(e,t){m(Wi,"SET",e,t),this.storage.setItem(e,t)},e.prototype.removeItem=function(e){m(Wi,"REMOVE",e),this.storage.removeItem(e)},e.prototype.handleWebStorageEvent=function(e){var t=this;if(e.storageArea===this.storage){if(m(Wi,"EVENT",e.key,e.newValue),e.key===this.localClientStorageKey)return void g("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.queue.enqueueAndForget((function(){return a.__awaiter(t,void 0,void 0,(function(){var t,n,r,i,o,s;return a.__generator(this,(function(a){if(!this.started)return this.earlyEvents.push(e),[2];if(null===e.key)return[2];if(this.clientStateKeyRe.test(e.key)){if(null==e.newValue)return n=this.fromWebStorageClientStateKey(e.key),[2,this.handleClientStateEvent(n,null)];if(t=this.fromWebStorageClientState(e.key,e.newValue))return[2,this.handleClientStateEvent(t.clientId,t)]}else if(this.mutationBatchKeyRe.test(e.key)){if(null!==e.newValue&&(r=this.fromWebStorageMutationMetadata(e.key,e.newValue)))return[2,this.handleMutationBatchEvent(r)]}else if(this.queryTargetKeyRe.test(e.key)){if(null!==e.newValue&&(i=this.fromWebStorageQueryTargetMetadata(e.key,e.newValue)))return[2,this.handleQueryTargetEvent(i)]}else if(e.key===this.onlineStateKey){if(null!==e.newValue&&(o=this.fromWebStorageOnlineState(e.newValue)))return[2,this.handleOnlineStateEvent(o)]}else e.key===this.sequenceNumberKey&&(b(!!this.sequenceNumberHandler,"Missing sequenceNumberHandler"),(s=function(e){var t=ue.INVALID;if(null!=e)try{var n=JSON.parse(e);b("number"==typeof n,"Found non-numeric sequence number"),t=n}catch(e){g(Wi,"Failed to read sequence number from WebStorage",e)}return t}(e.newValue))!==ue.INVALID&&this.sequenceNumberHandler(s));return[2]}))}))}))}},Object.defineProperty(e.prototype,"localClientState",{get:function(){return this.activeClients[this.localClientId]},enumerable:!0,configurable:!0}),e.prototype.persistClientState=function(){this.setItem(this.localClientStorageKey,this.localClientState.toWebStorageJSON())},e.prototype.persistMutationState=function(e,t,n){var r=new zi(this.currentUser,e,t,n),i=Bi(this.persistenceKey,this.currentUser,e);this.setItem(i,r.toWebStorageJSON())},e.prototype.removeMutationState=function(e){var t=Bi(this.persistenceKey,this.currentUser,e);this.removeItem(t)},e.prototype.persistOnlineState=function(e){var t={clientId:this.localClientId,onlineState:Mr[e]};this.storage.setItem(this.onlineStateKey,JSON.stringify(t))},e.prototype.persistQueryTargetState=function(e,t,n){var r=Vi(this.persistenceKey,e),i=new Ki(e,t,n);this.setItem(r,i.toWebStorageJSON())},e.prototype.fromWebStorageClientStateKey=function(e){var t=this.clientStateKeyRe.exec(e);return t?t[1]:null},e.prototype.fromWebStorageClientState=function(e,t){var n=this.fromWebStorageClientStateKey(e);return b(null!==n,"Cannot parse client state key '"+e+"'"),Gi.fromWebStorageEntry(n,t)},e.prototype.fromWebStorageMutationMetadata=function(e,t){var n=this.mutationBatchKeyRe.exec(e);b(null!==n,"Cannot parse mutation batch key '"+e+"'");var r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return zi.fromWebStorageEntry(new Pi(i),r,t)},e.prototype.fromWebStorageQueryTargetMetadata=function(e,t){var n=this.queryTargetKeyRe.exec(e);b(null!==n,"Cannot parse query target key '"+e+"'");var r=Number(n[1]);return Ki.fromWebStorageEntry(r,t)},e.prototype.fromWebStorageOnlineState=function(e){return Qi.fromWebStorageEntry(e)},e.prototype.handleMutationBatchEvent=function(e){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(t){return e.user.uid!==this.currentUser.uid?(m(Wi,"Ignoring mutation for non-active user "+e.user.uid),[2]):[2,this.syncEngine.applyBatchState(e.batchId,e.state,e.error)]}))}))},e.prototype.handleQueryTargetEvent=function(e){return this.syncEngine.applyTargetState(e.targetId,e.state,e.error)},e.prototype.handleClientStateEvent=function(e,t){var n=this,r=this.getAllActiveQueryTargets();t?this.activeClients[e]=t:delete this.activeClients[e];var i=this.getAllActiveQueryTargets(),o=[],s=[];return i.forEach((function(e){return a.__awaiter(n,void 0,void 0,(function(){return a.__generator(this,(function(t){return r.has(e)||o.push(e),[2]}))}))})),r.forEach((function(e){return a.__awaiter(n,void 0,void 0,(function(){return a.__generator(this,(function(t){return i.has(e)||s.push(e),[2]}))}))})),this.syncEngine.applyActiveTargetsChange(o,s)},e.prototype.handleOnlineStateEvent=function(e){this.activeClients[e.clientId]&&this.onlineStateHandler(e.onlineState)},e}();var Ji=function(){function e(){this.localState=new Hi,this.queryState={},this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null}return e.prototype.addPendingMutation=function(e){},e.prototype.updateMutationState=function(e,t,n){},e.prototype.addLocalQueryTarget=function(e){return this.localState.addQueryTarget(e),this.queryState[e]||"not-current"},e.prototype.updateQueryState=function(e,t,n){this.queryState[e]=t},e.prototype.removeLocalQueryTarget=function(e){this.localState.removeQueryTarget(e)},e.prototype.isLocalQueryTarget=function(e){return this.localState.activeTargetIds.has(e)},e.prototype.clearQueryState=function(e){delete this.queryState[e]},e.prototype.getAllActiveQueryTargets=function(){return this.localState.activeTargetIds},e.prototype.isActiveQueryTarget=function(e){return this.localState.activeTargetIds.has(e)},e.prototype.start=function(){return this.localState=new Hi,Promise.resolve()},e.prototype.handleUserChange=function(e,t,n){},e.prototype.setOnlineState=function(e){},e.prototype.shutdown=function(){},e.prototype.writeSequenceNumber=function(e){},e}(),Xi=function(){function e(e,t){this.cacheSizeBytes=e,this.synchronizeTabs=t}return e.prototype.lruParams=function(){return Ln.withCacheSize(this.cacheSizeBytes)},e}(),$i=function(){},Zi=function(){function e(e,t,n,r){this.platform=e,this.databaseInfo=t,this.credentials=n,this.asyncQueue=r,this.clientId=J.newId()}return e.prototype.start=function(e){var t=this;this.verifyNotTerminated();var n=new pe,r=new pe,i=!1;return this.credentials.setChangeListener((function(o){i?t.asyncQueue.enqueueAndForget((function(){return t.handleCredentialChange(o)})):(i=!0,t.initializePersistence(e,r,o).then((function(e){return t.initializeRest(o,e)})).then(n.resolve,n.reject))})),this.asyncQueue.enqueueAndForget((function(){return n.promise})),r.promise},e.prototype.enableNetwork=function(){var e=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue((function(){return e.syncEngine.enableNetwork()}))},e.prototype.initializePersistence=function(e,t,n){var r=this;return e instanceof Xi?this.startIndexedDbPersistence(n,e).then((function(e){return t.resolve(),e})).catch((function(e){if(t.reject(e),!r.canFallback(e))throw e;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+e),r.startMemoryPersistence()})):(t.resolve(),this.startMemoryPersistence())},e.prototype.canFallback=function(e){return e instanceof I?e.code===S.FAILED_PRECONDITION||e.code===S.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)},e.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new I(S.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.startIndexedDbPersistence=function(e,t){var n=this,r=qn.buildStoragePrefix(this.databaseInfo),i=new Ti(this.databaseInfo.databaseId,{useProto3Json:!0});return Promise.resolve().then((function(){return a.__awaiter(n,void 0,void 0,(function(){var n,o;return a.__generator(this,(function(a){switch(a.label){case 0:if(t.synchronizeTabs&&!Yi.isAvailable(this.platform))throw new I(S.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");return n=t.lruParams(),this.sharedClientState=t.synchronizeTabs?new Yi(this.asyncQueue,this.platform,r,this.clientId,e):new Ji,[4,qn.createIndexedDbPersistence({allowTabSynchronization:t.synchronizeTabs,persistenceKey:r,clientId:this.clientId,platform:this.platform,queue:this.asyncQueue,serializer:i,lruParams:n,sequenceNumberSyncer:this.sharedClientState})];case 1:return o=a.sent(),this.persistence=o,[2,o.referenceDelegate.garbageCollector]}}))}))}))},e.prototype.startMemoryPersistence=function(){return this.persistence=Er.createEagerPersistence(this.clientId),this.sharedClientState=new Ji,Promise.resolve(null)},e.prototype.initializeRest=function(e,t){var n=this;return m("FirestoreClient","Initializing. user=",e.uid),this.platform.loadConnection(this.databaseInfo).then((function(r){return a.__awaiter(n,void 0,void 0,(function(){var n,i,o,s,u,c,l=this;return a.__generator(this,(function(h){switch(h.label){case 0:return n=new mr,this.localStore=new br(this.persistence,n,e),[4,this.localStore.start()];case 1:return h.sent(),t&&(this.lruScheduler=new Pn(t,this.asyncQueue,this.localStore)),i=this.platform.newConnectivityMonitor(),o=this.platform.newSerializer(this.databaseInfo.databaseId),s=new jr(this.asyncQueue,r,this.credentials,o),u=function(e){return l.syncEngine.applyOnlineStateChange(e,Lr.RemoteStore)},c=function(e){return l.syncEngine.applyOnlineStateChange(e,Lr.SharedClientState)},this.remoteStore=new ai(this.localStore,s,this.asyncQueue,u,i),this.syncEngine=new Li(this.localStore,this.remoteStore,this.sharedClientState,e),this.sharedClientState.onlineStateHandler=c,this.remoteStore.syncEngine=this.syncEngine,this.sharedClientState.syncEngine=this.syncEngine,this.eventMgr=new Ii(this.syncEngine),[4,this.sharedClientState.start()];case 2:return h.sent(),[4,this.remoteStore.start()];case 3:return h.sent(),[4,this.persistence.setPrimaryStateListener((function(e){return a.__awaiter(l,void 0,void 0,(function(){return a.__generator(this,(function(t){switch(t.label){case 0:return[4,this.syncEngine.applyPrimaryState(e)];case 1:return t.sent(),this.lruScheduler&&(e&&!this.lruScheduler.started?this.lruScheduler.start():e||this.lruScheduler.stop()),[2]}}))}))}))];case 4:return h.sent(),[4,this.persistence.setDatabaseDeletedListener((function(){return a.__awaiter(l,void 0,void 0,(function(){return a.__generator(this,(function(e){switch(e.label){case 0:return[4,this.terminate()];case 1:return e.sent(),[2]}}))}))}))];case 5:return h.sent(),[2]}}))}))}))},e.prototype.handleCredentialChange=function(e){return this.asyncQueue.verifyOperationInProgress(),m("FirestoreClient","Credential Changed. Current user: "+e.uid),this.syncEngine.handleCredentialChange(e)},e.prototype.disableNetwork=function(){var e=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue((function(){return e.syncEngine.disableNetwork()}))},e.prototype.terminate=function(){var e=this;return this.asyncQueue.enqueueAndInitiateShutdown((function(){return a.__awaiter(e,void 0,void 0,(function(){return a.__generator(this,(function(e){switch(e.label){case 0:return this.lruScheduler&&this.lruScheduler.stop(),[4,this.remoteStore.shutdown()];case 1:return e.sent(),[4,this.sharedClientState.shutdown()];case 2:return e.sent(),[4,this.persistence.shutdown()];case 3:return e.sent(),this.credentials.removeChangeListener(),[2]}}))}))}))},e.prototype.waitForPendingWrites=function(){var e=this;this.verifyNotTerminated();var t=new pe;return this.asyncQueue.enqueueAndForget((function(){return e.syncEngine.registerPendingWritesCallback(t)})),t.promise},e.prototype.listen=function(e,t,n){var r=this;this.verifyNotTerminated();var i=new Ei(e,t,n);return this.asyncQueue.enqueueAndForget((function(){return r.eventMgr.listen(i)})),i},e.prototype.unlisten=function(e){var t=this;this.clientTerminated||this.asyncQueue.enqueueAndForget((function(){return t.eventMgr.unlisten(e)}))},e.prototype.getDocumentFromLocalCache=function(e){var t=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue((function(){return t.localStore.readDocument(e)})).then((function(e){if(e instanceof Kt)return e;if(e instanceof Gt)return null;throw new I(S.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")}))},e.prototype.getDocumentsFromLocalCache=function(e){var t=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue((function(){return a.__awaiter(t,void 0,void 0,(function(){var t,n,r;return a.__generator(this,(function(i){switch(i.label){case 0:return[4,this.localStore.executeQuery(e,!0)];case 1:return t=i.sent(),n=new ki(e,t.remoteKeys),r=n.computeDocChanges(t.documents),[2,n.applyChanges(r,!1).snapshot]}}))}))}))},e.prototype.write=function(e){var t=this;this.verifyNotTerminated();var n=new pe;return this.asyncQueue.enqueueAndForget((function(){return t.syncEngine.write(e,n)})),n.promise},e.prototype.databaseId=function(){return this.databaseInfo.databaseId},e.prototype.addSnapshotsInSyncListener=function(e){var t=this;this.verifyNotTerminated(),this.asyncQueue.enqueueAndForget((function(){return t.eventMgr.addSnapshotsInSyncListener(e),Promise.resolve()}))},e.prototype.removeSnapshotsInSyncListener=function(e){this.clientTerminated||this.eventMgr.removeSnapshotsInSyncListener(e)},Object.defineProperty(e.prototype,"clientTerminated",{get:function(){return this.asyncQueue.isShuttingDown},enumerable:!0,configurable:!0}),e.prototype.transaction=function(e){var t=this;this.verifyNotTerminated();var n=new pe;return this.asyncQueue.enqueueAndForget((function(){return t.syncEngine.runTransaction(t.asyncQueue,e,n),Promise.resolve()})),n.promise},e}(),eo=function(){function e(e){this.observer=e,this.muted=!1}return e.prototype.next=function(e){this.scheduleEvent(this.observer.next,e)},e.prototype.error=function(e){this.scheduleEvent(this.observer.error,e)},e.prototype.mute=function(){this.muted=!0},e.prototype.scheduleEvent=function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)},e}(),to=function(){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];!function(e,t,n,r){if(!(t instanceof Array)||t.length<r)throw new I(S.INVALID_ARGUMENT,"Function "+e+"() requires its "+n+" argument to be an array with at least "+Y(r,"element")+".")}("FieldPath",e,"fieldNames",1);for(var n=0;n<e.length;++n)if(P("FieldPath","string",n,e[n]),0===e[n].length)throw new I(S.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new de(e)}return e.documentId=function(){return e._DOCUMENT_ID},e.prototype.isEqual=function(t){if(!(t instanceof e))throw G("isEqual","FieldPath",1,t);return this._internalPath.isEqual(t._internalPath)},e._DOCUMENT_ID=new e(de.keyField().canonicalString()),e}(),no=new RegExp("[~\\*/\\[\\]]");
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ro=function(e,t){this.user=t,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+e},io=function(){function e(){this.changeListener=null}return e.prototype.getToken=function(){return Promise.resolve(null)},e.prototype.invalidateToken=function(){},e.prototype.setChangeListener=function(e){b(!this.changeListener,"Can only call setChangeListener() once."),this.changeListener=e,e(Pi.UNAUTHENTICATED)},e.prototype.removeChangeListener=function(){b(null!==this.changeListener,"removeChangeListener() when no listener registered"),this.changeListener=null},e}(),oo=function(){function e(e){var t=this;this.tokenListener=null,this.currentUser=Pi.UNAUTHENTICATED,this.receivedInitialUser=!1,this.tokenCounter=0,this.changeListener=null,this.forceRefresh=!1,this.tokenListener=function(){t.tokenCounter++,t.currentUser=t.getUser(),t.receivedInitialUser=!0,t.changeListener&&t.changeListener(t.currentUser)},this.tokenCounter=0,this.auth=e.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.tokenListener):(this.tokenListener(null),e.get().then((function(e){t.auth=e,t.tokenListener&&t.auth.addAuthTokenListener(t.tokenListener)}),(function(){})))}return e.prototype.getToken=function(){var e=this;b(null!=this.tokenListener,"getToken cannot be called after listener removed.");var t=this.tokenCounter,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){if(e.tokenCounter!==t)throw new I(S.ABORTED,"getToken aborted due to token change.");return n?(b("string"==typeof n.accessToken,"Invalid tokenData returned from getToken():"+n),new ro(n.accessToken,e.currentUser)):null})):Promise.resolve(null)},e.prototype.invalidateToken=function(){this.forceRefresh=!0},e.prototype.setChangeListener=function(e){b(!this.changeListener,"Can only call setChangeListener() once."),this.changeListener=e,this.receivedInitialUser&&e(this.currentUser)},e.prototype.removeChangeListener=function(){b(null!=this.tokenListener,"removeChangeListener() called twice"),b(null!==this.changeListener,"removeChangeListener() called when no listener registered"),this.auth&&this.auth.removeAuthTokenListener(this.tokenListener),this.tokenListener=null,this.changeListener=null},e.prototype.getUser=function(){var e=this.auth&&this.auth.getUid();return b(null===e||"string"==typeof e,"Received invalid UID: "+e),new Pi(e)},e}(),ao=function(){function e(e,t){this.gapi=e,this.sessionIndex=t,this.type="FirstParty",this.user=Pi.FIRST_PARTY}return Object.defineProperty(e.prototype,"authHeaders",{get:function(){var e={"X-Goog-AuthUser":this.sessionIndex},t=this.gapi.auth.getAuthHeaderValueForFirstParty([]);return t&&(e.Authorization=t),e},enumerable:!0,configurable:!0}),e}(),so=function(){function e(e,t){this.gapi=e,this.sessionIndex=t}return e.prototype.getToken=function(){return Promise.resolve(new ao(this.gapi,this.sessionIndex))},e.prototype.setChangeListener=function(e){e(Pi.FIRST_PARTY)},e.prototype.removeChangeListener=function(){},e.prototype.invalidateToken=function(){},e}();function uo(e){if(!e)return new io;switch(e.type){case"gapi":var t=e.client;return b(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty),"unexpected gapi interface"),new so(t,e.sessionIndex||"0");case"provider":return e.client;default:throw new I(S.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function co(e){return function(e,t){if("object"!=typeof e||null===e)return!1;for(var n=e,r=0,i=t;r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e,["next","error","complete"])}var lo,ho=function(){function e(e){this._methodName=e}return e.delete=function(){return A("FieldValue.delete",arguments),fo.instance},e.serverTimestamp=function(){return A("FieldValue.serverTimestamp",arguments),po.instance},e.arrayUnion=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return M("FieldValue.arrayUnion",arguments,1),new mo(e)},e.arrayRemove=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return M("FieldValue.arrayRemove",arguments,1),new go(e)},e.increment=function(e){return P("FieldValue.increment","number",1,e),x("FieldValue.increment",arguments,1),new yo(e)},e.prototype.isEqual=function(e){return this===e},e}(),fo=function(e){function t(){return e.call(this,"FieldValue.delete")||this}return a.__extends(t,e),t.instance=new t,t}(ho),po=function(e){function t(){return e.call(this,"FieldValue.serverTimestamp")||this}return a.__extends(t,e),t.instance=new t,t}(ho),mo=function(e){function t(t){var n=e.call(this,"FieldValue.arrayUnion")||this;return n._elements=t,n}return a.__extends(t,e),t}(ho),go=function(e){function t(t){var n=e.call(this,"FieldValue.arrayRemove")||this;return n._elements=t,n}return a.__extends(t,e),t}(ho),yo=function(e){function t(t){var n=e.call(this,"FieldValue.increment")||this;return n._operand=t,n}return a.__extends(t,e),t}(ho),vo=E(ho,"Use FieldValue.<field>() instead."),bo=/^__.*__$/,wo=function(){function e(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}return e.prototype.toMutations=function(e,t){var n=[];return null!==this.fieldMask?n.push(new Ct(e,this.data,this.fieldMask,t)):n.push(new Et(e,this.data,t)),this.fieldTransforms.length>0&&n.push(new _t(e,this.fieldTransforms)),n},e}(),To=function(){function e(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}return e.prototype.toMutations=function(e,t){var n=[new Ct(e,this.data,this.fieldMask,t)];return this.fieldTransforms.length>0&&n.push(new _t(e,this.fieldTransforms)),n},e}();function So(e){switch(e){case lo.Set:case lo.MergeSet:case lo.Update:return!0;case lo.Argument:case lo.ArrayArgument:return!1;default:throw v("Unexpected case for UserDataSource: "+e)}}!function(e){e[e.Set=0]="Set",e[e.Update=1]="Update",e[e.MergeSet=2]="MergeSet",e[e.Argument=3]="Argument",e[e.ArrayArgument=4]="ArrayArgument"}(lo||(lo={}));var Io=function(){function e(e,t,n,r,i,o){this.dataSource=e,this.methodName=t,this.path=n,this.arrayElement=r,void 0===i&&this.validatePath(),this.arrayElement=void 0!==r&&r,this.fieldTransforms=i||[],this.fieldMask=o||[]}return e.prototype.childContextForField=function(t){var n=null==this.path?null:this.path.child(t),r=new e(this.dataSource,this.methodName,n,!1,this.fieldTransforms,this.fieldMask);return r.validatePathSegment(t),r},e.prototype.childContextForFieldPath=function(t){var n=null==this.path?null:this.path.child(t),r=new e(this.dataSource,this.methodName,n,!1,this.fieldTransforms,this.fieldMask);return r.validatePath(),r},e.prototype.childContextForArray=function(t){return new e(this.dataSource,this.methodName,null,!0,this.fieldTransforms,this.fieldMask)},e.prototype.createError=function(e){var t=null===this.path||this.path.isEmpty()?"":" (found in field "+this.path.toString()+")";return new I(S.INVALID_ARGUMENT,"Function "+this.methodName+"() called with invalid data. "+e+t)},e.prototype.contains=function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))},e.prototype.validatePath=function(){if(null!==this.path)for(var e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))},e.prototype.validatePathSegment=function(e){if(0===e.length)throw this.createError("Document fields must not be empty");if(So(this.dataSource)&&bo.test(e))throw this.createError('Document fields cannot begin and end with "__"')},e}(),Eo=function(e,t){this.databaseId=e,this.key=t},Co=function(){function e(e){this.preConverter=e}return e.prototype.parseSetData=function(e,t){var n=new Io(lo.Set,e,de.EMPTY_PATH);Do("Data must be an object, but it was:",n,t);var r=this.parseData(t,n);return new wo(r,null,n.fieldTransforms)},e.prototype.parseMergeData=function(e,t,n){var r=new Io(lo.MergeSet,e,de.EMPTY_PATH);Do("Data must be an object, but it was:",r,t);var i,o,a=this.parseData(t,r);if(n){for(var s=new xe(de.comparator),u=0,c=n;u<c.length;u++){var l=c[u],h=void 0;if(l instanceof to)h=l._internalPath;else{if("string"!=typeof l)throw v("Expected stringOrFieldPath to be a string or a FieldPath");h=No(e,l)}if(!r.contains(h))throw new I(S.INVALID_ARGUMENT,"Field '"+h+"' is specified in your field mask but missing from your input data.");s=s.add(h)}i=yt.fromSet(s),o=r.fieldTransforms.filter((function(e){return i.covers(e.field)}))}else i=yt.fromArray(r.fieldMask),o=r.fieldTransforms;return new wo(a,i,o)},e.prototype.parseUpdateData=function(e,t){var n=this,r=new Io(lo.Update,e,de.EMPTY_PATH);Do("Data must be an object, but it was:",r,t);var i=new xe(de.comparator),o=Ut.EMPTY;k(t,(function(t,a){var s=No(e,t),u=r.childContextForFieldPath(s);if((a=n.runPreConverter(a,u))instanceof fo)i=i.add(s);else{var c=n.parseData(a,u);null!=c&&(i=i.add(s),o=o.set(s,c))}}));var a=yt.fromSet(i);return new To(o,a,r.fieldTransforms)},e.prototype.parseUpdateVarargs=function(e,t,n,r){var i=new Io(lo.Update,e,de.EMPTY_PATH),o=[ko(e,t)],a=[n];if(r.length%2!=0)throw new I(S.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var s=0;s<r.length;s+=2)o.push(ko(e,r[s])),a.push(r[s+1]);var u=new xe(de.comparator),c=Ut.EMPTY;for(s=0;s<o.length;++s){var l=o[s],h=i.childContextForFieldPath(l),d=this.runPreConverter(a[s],h);if(d instanceof fo)u=u.add(l);else{var f=this.parseData(d,h);null!=f&&(u=u.add(l),c=c.set(l,f))}}var p=yt.fromSet(u);return new To(c,p,i.fieldTransforms)},e.prototype.parseQueryValue=function(e,t,n){void 0===n&&(n=!1);var r=new Io(n?lo.ArrayArgument:lo.Argument,e,de.EMPTY_PATH),i=this.parseData(t,r);return b(null!=i,"Parsed data should not be null."),b(0===r.fieldTransforms.length,"Field transforms should have been disallowed."),i},e.prototype.runPreConverter=function(e,t){try{return this.preConverter(e)}catch(e){var n=Ao(e);throw t.createError(n)}},e.prototype.parseData=function(e,t){if(_o(e=this.runPreConverter(e,t)))return Do("Unsupported field value:",t,e),this.parseObject(e,t);if(e instanceof ho)return this.parseSentinelFieldValue(e,t),null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.arrayElement&&t.dataSource!==lo.ArrayArgument)throw t.createError("Nested arrays are not supported");return this.parseArray(e,t)}return this.parseScalarValue(e,t)},e.prototype.parseObject=function(e,t){var n=this,r=new De(X);return N(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):k(e,(function(e,i){var o=n.parseData(i,t.childContextForField(e));null!=o&&(r=r.insert(e,o))})),new Ut(r)},e.prototype.parseArray=function(e,t){for(var n=[],r=0,i=0,o=e;i<o.length;i++){var a=o[i],s=this.parseData(a,t.childContextForArray(r));null==s&&(s=At.INSTANCE),n.push(s),r++}return new Wt(n)},e.prototype.parseSentinelFieldValue=function(e,t){if(!So(t.dataSource))throw t.createError(e._methodName+"() can only be used with update() and set()");if(null===t.path)throw t.createError(e._methodName+"() is not currently supported inside arrays");if(e instanceof fo){if(t.dataSource!==lo.MergeSet)throw t.dataSource===lo.Update?(b(t.path.length>0,"FieldValue.delete() at the top level should have already been handled."),t.createError("FieldValue.delete() can only appear at the top level of your update data")):t.createError("FieldValue.delete() cannot be used with set() unless you pass {merge:true}");t.fieldMask.push(t.path)}else if(e instanceof po)t.fieldTransforms.push(new vt(t.path,ui.instance));else if(e instanceof mo){var n=this.parseArrayTransformElements(e._methodName,e._elements),r=new ci(n);t.fieldTransforms.push(new vt(t.path,r))}else if(e instanceof go){n=this.parseArrayTransformElements(e._methodName,e._elements);var i=new li(n);t.fieldTransforms.push(new vt(t.path,i))}else if(e instanceof yo){var o=this.parseQueryValue("FieldValue.increment",e._operand),a=new hi(o);t.fieldTransforms.push(new vt(t.path,a))}else v("Unknown FieldValue type: "+e)},e.prototype.parseScalarValue=function(e,t){if(null===e)return At.INSTANCE;if("number"==typeof e)return $n(e)?new Pt(e):new Ot(e);if("boolean"==typeof e)return xt.of(e);if("string"==typeof e)return new Rt(e);if(e instanceof Date)return new jt(Ce.fromDate(e));if(e instanceof Ce)return new jt(new Ce(e.seconds,1e3*Math.floor(e.nanoseconds/1e3)));if(e instanceof si)return new qt(e);if(e instanceof re)return new Ft(e);if(e instanceof Eo)return new Vt(e.databaseId,e.key);throw t.createError("Unsupported field value: "+W(e))},e.prototype.parseArrayTransformElements=function(e,t){var n=this;return t.map((function(t,r){var i=new Io(lo.Argument,e,de.EMPTY_PATH);return n.parseData(t,i.childContextForArray(r))}))},e}();function _o(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Ce||e instanceof si||e instanceof re||e instanceof Eo||e instanceof ho)}function Do(e,t,n){if(!_o(n)||!U(n)){var r=W(n);throw"an object"===r?t.createError(e+" a custom object"):t.createError(e+" "+r)}}function ko(e,t){if(t instanceof to)return t._internalPath;if("string"==typeof t)return No(e,t);throw new I(S.INVALID_ARGUMENT,"Function "+e+"() called with invalid data. Field path arguments must be of type string or FieldPath.")}function No(e,t){try{return function(e){if(e.search(no)>=0)throw new I(S.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(to.bind.apply(to,a.__spreadArrays([void 0],e.split("."))))}catch(t){throw new I(S.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(t)._internalPath}catch(t){var n=Ao(t);throw new I(S.INVALID_ARGUMENT,"Function "+e+"() called with invalid data. "+n)}}function Ao(e){return e instanceof Error?e.message:e.toString()}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xo="firestore.googleapis.com",Mo=!0,Lo=!0,Po=!1,Oo=Ln.COLLECTION_DISABLED,Ro=function(){function e(e){if(void 0===e.host){if(void 0!==e.ssl)throw new I(S.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=xo,this.ssl=Mo}else R("settings","non-empty string","host",e.host),this.host=e.host,j("settings","boolean","ssl",e.ssl),this.ssl=_(e.ssl,Mo);if(K("settings",e,["host","ssl","credentials","timestampsInSnapshots","cacheSizeBytes","experimentalForceLongPolling"]),j("settings","object","credentials",e.credentials),this.credentials=e.credentials,j("settings","boolean","timestampsInSnapshots",e.timestampsInSnapshots),!0===e.timestampsInSnapshots?g("\n  The timestampsInSnapshots setting now defaults to true and you no\n  longer need to explicitly set it. In a future release, the setting\n  will be removed entirely and so it is recommended that you remove it\n  from your firestore.settings() call now."):!1===e.timestampsInSnapshots&&g("\n  The timestampsInSnapshots setting will soon be removed. YOU MUST UPDATE\n  YOUR CODE.\n\n  To hide this warning, stop using the timestampsInSnapshots setting in your\n  firestore.settings({ ... }) call.\n\n  Once you remove the setting, Timestamps stored in Cloud Firestore will be\n  read back as Firebase Timestamp objects instead of as system Date objects.\n  So you will also need to update code expecting a Date to instead expect a\n  Timestamp. For example:\n\n  // Old:\n  const date = snapshot.get('created_at');\n  // New:\n  const timestamp = snapshot.get('created_at'); const date =\n  timestamp.toDate();\n\n  Please audit all existing usages of Date when you enable the new\n  behavior."),this.timestampsInSnapshots=_(e.timestampsInSnapshots,Lo),j("settings","number","cacheSizeBytes",e.cacheSizeBytes),void 0===e.cacheSizeBytes)this.cacheSizeBytes=Ln.DEFAULT_CACHE_SIZE_BYTES;else{if(e.cacheSizeBytes!==Oo&&e.cacheSizeBytes<Ln.MINIMUM_CACHE_SIZE_BYTES)throw new I(S.INVALID_ARGUMENT,"cacheSizeBytes must be at least "+Ln.MINIMUM_CACHE_SIZE_BYTES);this.cacheSizeBytes=e.cacheSizeBytes}j("settings","boolean","experimentalForceLongPolling",e.experimentalForceLongPolling),this.forceLongPolling=void 0===e.experimentalForceLongPolling?Po:e.experimentalForceLongPolling}return e.prototype.isEqual=function(e){return this.host===e.host&&this.ssl===e.ssl&&this.timestampsInSnapshots===e.timestampsInSnapshots&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.forceLongPolling===e.forceLongPolling},e}(),jo=function(){function e(t,n){var r=this;if(this._firebaseApp=null,this._queue=new ge,this.INTERNAL={delete:function(){return a.__awaiter(r,void 0,void 0,(function(){return a.__generator(this,(function(e){switch(e.label){case 0:return this.ensureClientConfigured(),[4,this._firestoreClient.terminate()];case 1:return e.sent(),[2]}}))}))}},"object"==typeof t.options){var i=t;this._firebaseApp=i,this._databaseId=e.databaseIdFromApp(i),this._persistenceKey=i.name,this._credentials=new oo(n)}else{var o=t;if(!o.projectId)throw new I(S.INVALID_ARGUMENT,"Must provide projectId");this._databaseId=new se(o.projectId,o.database),this._persistenceKey="[DEFAULT]",this._credentials=new io}this._settings=new Ro({}),this._dataConverter=this.createDataConverter(this._databaseId)}return e.prototype.settings=function(e){if(x("Firestore.settings",arguments,1),P("Firestore.settings","object",1,e),C(e,"persistence"))throw new I(S.INVALID_ARGUMENT,'"persistence" is now specified with a separate call to firestore.enablePersistence().');var t=new Ro(e);if(this._firestoreClient&&!this._settings.isEqual(t))throw new I(S.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");this._settings=t,void 0!==t.credentials&&(this._credentials=uo(t.credentials))},e.prototype.enableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.enableNetwork()},e.prototype.disableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.disableNetwork()},e.prototype.enablePersistence=function(e){if(this._firestoreClient)throw new I(S.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");var t=!1;return e&&(void 0!==e.experimentalTabSynchronization&&g("The 'experimentalTabSynchronization' setting has been renamed to 'synchronizeTabs'. In a future release, the setting will be removed and it is recommended that you update your firestore.enablePersistence() call to use 'synchronizeTabs'."),t=_(void 0!==e.synchronizeTabs?e.synchronizeTabs:e.experimentalTabSynchronization,!1)),this.configureClient(new Xi(this._settings.cacheSizeBytes,t))},e.prototype.clearPersistence=function(){var e=this,t=qn.buildStoragePrefix(this.makeDatabaseInfo()),n=new pe;return this._queue.enqueueAndForgetEvenAfterShutdown((function(){return a.__awaiter(e,void 0,void 0,(function(){var e;return a.__generator(this,(function(r){switch(r.label){case 0:if(r.trys.push([0,2,,3]),void 0!==this._firestoreClient&&!this._firestoreClient.clientTerminated)throw new I(S.FAILED_PRECONDITION,"Persistence cannot be cleared after this Firestore instance is initialized.");return[4,qn.clearPersistence(t)];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise},e.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.INTERNAL.delete()},Object.defineProperty(e.prototype,"_isTerminated",{get:function(){return this.ensureClientConfigured(),this._firestoreClient.clientTerminated},enumerable:!0,configurable:!0}),e.prototype.waitForPendingWrites=function(){return this.ensureClientConfigured(),this._firestoreClient.waitForPendingWrites()},e.prototype.onSnapshotsInSync=function(e){if(this.ensureClientConfigured(),co(e))return this.onSnapshotsInSyncInternal(e);P("Firestore.onSnapshotsInSync","function",1,e);var t={next:e};return this.onSnapshotsInSyncInternal(t)},e.prototype.onSnapshotsInSyncInternal=function(e){var t=this,n=new eo({next:function(){e.next&&e.next()},error:function(e){throw v("Uncaught Error in onSnapshotsInSync")}});return this._firestoreClient.addSnapshotsInSyncListener(n),function(){n.mute(),t._firestoreClient.removeSnapshotsInSyncListener(n)}},e.prototype.ensureClientConfigured=function(){return this._firestoreClient||this.configureClient(new $i),this._firestoreClient},e.prototype.makeDatabaseInfo=function(){return new oe(this._databaseId,this._persistenceKey,this._settings.host,this._settings.ssl,this._settings.forceLongPolling)},e.prototype.configureClient=function(e){b(!!this._settings.host,"FirestoreSettings.host is not set"),b(!this._firestoreClient,"configureClient() called multiple times");var t=this.makeDatabaseInfo();return this._firestoreClient=new Zi(w.getPlatform(),t,this._credentials,this._queue),this._firestoreClient.start(e)},e.prototype.createDataConverter=function(e){return new Co((function(t){if(t instanceof Vo){var n=e,r=t.firestore._databaseId;if(!r.isEqual(n))throw new I(S.INVALID_ARGUMENT,"Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return new Eo(e,t._key)}return t}))},e.databaseIdFromApp=function(e){var t=e.options;if(!C(t,"projectId"))throw new I(S.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var n=t.projectId;if(!n||"string"!=typeof n)throw new I(S.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new se(n)},Object.defineProperty(e.prototype,"app",{get:function(){if(!this._firebaseApp)throw new I(S.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._firebaseApp},enumerable:!0,configurable:!0}),e.prototype.collection=function(e){return x("Firestore.collection",arguments,1),P("Firestore.collection","non-empty string",1,e),this.ensureClientConfigured(),new Go(le.fromString(e),this)},e.prototype.doc=function(e){return x("Firestore.doc",arguments,1),P("Firestore.doc","non-empty string",1,e),this.ensureClientConfigured(),Vo.forPath(le.fromString(e),this)},e.prototype.collectionGroup=function(e){if(x("Firestore.collectionGroup",arguments,1),P("Firestore.collectionGroup","non-empty string",1,e),e.indexOf("/")>=0)throw new I(S.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return this.ensureClientConfigured(),new zo(new tr(le.EMPTY_PATH,e),this)},e.prototype.runTransaction=function(e){var t=this;return x("Firestore.runTransaction",arguments,1),P("Firestore.runTransaction","function",1,e),this.ensureClientConfigured().transaction((function(n){return e(new Bo(t,n))}))},e.prototype.batch=function(){return this.ensureClientConfigured(),new Fo(this)},Object.defineProperty(e,"logLevel",{get:function(){switch(f()){case i.DEBUG:return"debug";case i.ERROR:return"error";case i.SILENT:return"silent";default:return v("Unknown log level: "+f())}},enumerable:!0,configurable:!0}),e.setLogLevel=function(e){switch(x("Firestore.setLogLevel",arguments,1),P("Firestore.setLogLevel","non-empty string",1,e),e){case"debug":p(i.DEBUG);break;case"error":p(i.ERROR);break;case"silent":p(i.SILENT);break;default:throw new I(S.INVALID_ARGUMENT,"Invalid log level: "+e)}},e.prototype._areTimestampsInSnapshotsEnabled=function(){return this._settings.timestampsInSnapshots},e}(),Bo=function(){function e(e,t){this._firestore=e,this._transaction=t}return e.prototype.get=function(e){var t=this;x("Transaction.get",arguments,1);var n=Jo("Transaction.get",e,this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return v("Mismatch in docs returned from document lookup.");var r=e[0];if(r instanceof Gt)return new Uo(t._firestore,n._key,null,!1,!1,n._converter);if(r instanceof Kt)return new Uo(t._firestore,n._key,r,!1,!1,n._converter);throw v("BatchGetDocumentsRequest returned unexpected document type: "+r.constructor.name)}))},e.prototype.set=function(e,t,n){L("Transaction.set",arguments,2,3);var r=Jo("Transaction.set",e,this._firestore);n=Qo("Transaction.set",n);var i=$o(r._converter,t,"Transaction.set"),o=i[0],a=i[1],s=n.merge||n.mergeFields?this._firestore._dataConverter.parseMergeData(a,o,n.mergeFields):this._firestore._dataConverter.parseSetData(a,o);return this._transaction.set(r._key,s),this},e.prototype.update=function(e,t,n){for(var r,i,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];return"string"==typeof t||t instanceof to?(M("Transaction.update",arguments,3),r=Jo("Transaction.update",e,this._firestore),i=this._firestore._dataConverter.parseUpdateVarargs("Transaction.update",t,n,o)):(x("Transaction.update",arguments,2),r=Jo("Transaction.update",e,this._firestore),i=this._firestore._dataConverter.parseUpdateData("Transaction.update",t)),this._transaction.update(r._key,i),this},e.prototype.delete=function(e){x("Transaction.delete",arguments,1);var t=Jo("Transaction.delete",e,this._firestore);return this._transaction.delete(t._key),this},e}(),Fo=function(){function e(e){this._firestore=e,this._mutations=[],this._committed=!1}return e.prototype.set=function(e,t,n){L("WriteBatch.set",arguments,2,3),this.verifyNotCommitted();var r=Jo("WriteBatch.set",e,this._firestore);n=Qo("WriteBatch.set",n);var i=$o(r._converter,t,"WriteBatch.set"),o=i[0],a=i[1],s=n.merge||n.mergeFields?this._firestore._dataConverter.parseMergeData(a,o,n.mergeFields):this._firestore._dataConverter.parseSetData(a,o);return this._mutations=this._mutations.concat(s.toMutations(r._key,St.NONE)),this},e.prototype.update=function(e,t,n){for(var r,i,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];return this.verifyNotCommitted(),"string"==typeof t||t instanceof to?(M("WriteBatch.update",arguments,3),r=Jo("WriteBatch.update",e,this._firestore),i=this._firestore._dataConverter.parseUpdateVarargs("WriteBatch.update",t,n,o)):(x("WriteBatch.update",arguments,2),r=Jo("WriteBatch.update",e,this._firestore),i=this._firestore._dataConverter.parseUpdateData("WriteBatch.update",t)),this._mutations=this._mutations.concat(i.toMutations(r._key,St.exists(!0))),this},e.prototype.delete=function(e){x("WriteBatch.delete",arguments,1),this.verifyNotCommitted();var t=Jo("WriteBatch.delete",e,this._firestore);return this._mutations=this._mutations.concat(new Dt(t._key,St.NONE)),this},e.prototype.commit=function(){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(e){return this.verifyNotCommitted(),this._committed=!0,this._mutations.length>0?[2,this._firestore.ensureClientConfigured().write(this._mutations)]:[2]}))}))},e.prototype.verifyNotCommitted=function(){if(this._committed)throw new I(S.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},e}(),Vo=function(){function e(e,t,n){this._key=e,this.firestore=t,this._converter=n,this._firestoreClient=this.firestore.ensureClientConfigured()}return e.forPath=function(t,n,r){if(t.length%2!=0)throw new I(S.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.canonicalString()+" has "+t.length);return new e(new fe(t),n,r)},Object.defineProperty(e.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new Go(this._key.path.popLast(),this.firestore,this._converter)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!0,configurable:!0}),e.prototype.collection=function(e){if(x("DocumentReference.collection",arguments,1),P("DocumentReference.collection","non-empty string",1,e),!e)throw new I(S.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var t=le.fromString(e);return new Go(this._key.path.child(t),this.firestore)},e.prototype.isEqual=function(t){if(!(t instanceof e))throw G("isEqual","DocumentReference",1,t);return this.firestore===t.firestore&&this._key.isEqual(t._key)&&this._converter===t._converter},e.prototype.set=function(e,t){L("DocumentReference.set",arguments,1,2),t=Qo("DocumentReference.set",t);var n=$o(this._converter,e,"DocumentReference.set"),r=n[0],i=n[1],o=t.merge||t.mergeFields?this.firestore._dataConverter.parseMergeData(i,r,t.mergeFields):this.firestore._dataConverter.parseSetData(i,r);return this._firestoreClient.write(o.toMutations(this._key,St.NONE))},e.prototype.update=function(e,t){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return"string"==typeof e||e instanceof to?(M("DocumentReference.update",arguments,2),n=this.firestore._dataConverter.parseUpdateVarargs("DocumentReference.update",e,t,r)):(x("DocumentReference.update",arguments,1),n=this.firestore._dataConverter.parseUpdateData("DocumentReference.update",e)),this._firestoreClient.write(n.toMutations(this._key,St.exists(!0)))},e.prototype.delete=function(){return x("DocumentReference.delete",arguments,0),this._firestoreClient.write([new Dt(this._key,St.NONE)])},e.prototype.onSnapshot=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];L("DocumentReference.onSnapshot",arguments,1,4);var n,r={includeMetadataChanges:!1},i=0;"object"!=typeof e[i]||co(e[i])||(K("DocumentReference.onSnapshot",r=e[i],["includeMetadataChanges"]),j("DocumentReference.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++);var o={includeMetadataChanges:r.includeMetadataChanges};return co(e[i])?n=e[i]:(P("DocumentReference.onSnapshot","function",i,e[i]),O("DocumentReference.onSnapshot","function",i+1,e[i+1]),O("DocumentReference.onSnapshot","function",i+2,e[i+2]),n={next:e[i],error:e[i+1],complete:e[i+2]}),this.onSnapshotInternal(o,n)},e.prototype.onSnapshotInternal=function(e,t){var n=this,r=function(e){console.error("Uncaught Error in onSnapshot:",e)};t.error&&(r=t.error.bind(t));var i=new eo({next:function(e){if(t.next){b(e.docs.size<=1,"Too many documents returned on a document query");var r=e.docs.get(n._key);t.next(new Uo(n.firestore,n._key,r,e.fromCache,e.hasPendingWrites,n._converter))}},error:r}),o=this._firestoreClient.listen(tr.atPath(this._key.path),i,e);return function(){i.mute(),n._firestoreClient.unlisten(o)}},e.prototype.get=function(e){var t=this;return L("DocumentReference.get",arguments,0,1),Yo("DocumentReference.get",e),new Promise((function(n,r){e&&"cache"===e.source?t.firestore.ensureClientConfigured().getDocumentFromLocalCache(t._key).then((function(e){n(new Uo(t.firestore,t._key,e,!0,e instanceof Kt&&e.hasLocalMutations,t._converter))}),r):t.getViaSnapshotListener(n,r,e)}))},e.prototype.getViaSnapshotListener=function(e,t,n){var r=this.onSnapshotInternal({includeMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(i){r(),!i.exists&&i.metadata.fromCache?t(new I(S.UNAVAILABLE,"Failed to get document because the client is offline.")):i.exists&&i.metadata.fromCache&&n&&"server"===n.source?t(new I(S.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):e(i)},error:t})},e.prototype.withConverter=function(t){return new e(this._key,this.firestore,t)},e}(),qo=function(){function e(e,t){this.hasPendingWrites=e,this.fromCache=t}return e.prototype.isEqual=function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache},e}(),Uo=function(){function e(e,t,n,r,i,o){this._firestore=e,this._key=t,this._document=n,this._fromCache=r,this._hasPendingWrites=i,this._converter=o}return e.prototype.data=function(e){if(L("DocumentSnapshot.data",arguments,0,1),e=Ho("DocumentSnapshot.data",e),this._document){if(this._converter){var t=new Wo(this._firestore,this._key,this._document,this._fromCache,this._hasPendingWrites);return this._converter.fromFirestore(t,e)}return this.toJSObject(this._document.data(),kt.fromSnapshotOptions(e,this._firestore._areTimestampsInSnapshotsEnabled()))}},e.prototype.get=function(e,t){if(L("DocumentSnapshot.get",arguments,1,2),t=Ho("DocumentSnapshot.get",t),this._document){var n=this._document.data().field(ko("DocumentSnapshot.get",e));if(null!==n)return this.toJSValue(n,kt.fromSnapshotOptions(t,this._firestore._areTimestampsInSnapshotsEnabled()))}},Object.defineProperty(e.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ref",{get:function(){return new Vo(this._key,this._firestore,this._converter)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return null!==this._document},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return new qo(this._hasPendingWrites,this._fromCache)},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){if(!(t instanceof e))throw G("isEqual","DocumentSnapshot",1,t);return this._firestore===t._firestore&&this._fromCache===t._fromCache&&this._key.isEqual(t._key)&&(null===this._document?null===t._document:this._document.isEqual(t._document))&&this._converter===t._converter},e.prototype.toJSObject=function(e,t){var n=this,r={};return e.forEach((function(e,i){r[e]=n.toJSValue(i,t)})),r},e.prototype.toJSValue=function(e,t){if(e instanceof Ut)return this.toJSObject(e,t);if(e instanceof Wt)return this.toJSArray(e,t);if(e instanceof Vt){var n=e.value(t),r=this._firestore.ensureClientConfigured().databaseId();return e.databaseId.isEqual(r)||g("Document "+this._key.path+" contains a document reference within a different database ("+e.databaseId.projectId+"/"+e.databaseId.database+") which is not supported. It will be treated as a reference in the current database ("+r.projectId+"/"+r.database+") instead."),new Vo(n,this._firestore,this._converter)}return e.value(t)},e.prototype.toJSArray=function(e,t){var n=this;return e.internalValue.map((function(e){return n.toJSValue(e,t)}))},e}(),Wo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.data=function(t){var n=e.prototype.data.call(this,t);return b(void 0!==n,"Document in a QueryDocumentSnapshot should exist"),n},t}(Uo),zo=function(){function e(e,t,n){this._query=e,this.firestore=t,this._converter=n}return e.prototype.where=function(t,n,r){x("Query.where",arguments,3),z("Query.where",3,r);var i,o=["<","<=","==",">=",">","array-contains","in","array-contains-any"];V("Query.where",o,2,n);var a=ko("Query.where",t),s=rr.fromString(n);if(a.isKeyField()){if(s===rr.ARRAY_CONTAINS||s===rr.ARRAY_CONTAINS_ANY)throw new I(S.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+s.toString()+"' queries on FieldPath.documentId().");if(s===rr.IN){this.validateDisjunctiveFilterElements(r,s);for(var u=[],c=0,l=r;c<l.length;c++){var h=l[c];u.push(this.parseDocumentIdValue(h))}i=new Wt(u)}else i=this.parseDocumentIdValue(r)}else s!==rr.IN&&s!==rr.ARRAY_CONTAINS_ANY||this.validateDisjunctiveFilterElements(r,s),i=this.firestore._dataConverter.parseQueryValue("Query.where",r,s===rr.IN);var d=ir.create(a,s,i);return this.validateNewFilter(d),new e(this._query.addFilter(d),this.firestore,this._converter)},e.prototype.orderBy=function(t,n){var r;if(L("Query.orderBy",arguments,1,2),O("Query.orderBy","non-empty string",2,n),void 0===n||"asc"===n)r=lr.ASCENDING;else{if("desc"!==n)throw new I(S.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+n+"', expected 'asc' or 'desc'.");r=lr.DESCENDING}if(null!==this._query.startAt)throw new I(S.INVALID_ARGUMENT,"Invalid query. You must not call Query.startAt() or Query.startAfter() before calling Query.orderBy().");if(null!==this._query.endAt)throw new I(S.INVALID_ARGUMENT,"Invalid query. You must not call Query.endAt() or Query.endBefore() before calling Query.orderBy().");var i=ko("Query.orderBy",t),o=new dr(i,r);return this.validateNewOrderBy(o),new e(this._query.addOrderBy(o),this.firestore,this._converter)},e.prototype.limit=function(t){return x("Query.limit",arguments,1),P("Query.limit","number",1,t),Q("Query.limit",1,t),new e(this._query.withLimitToFirst(t),this.firestore,this._converter)},e.prototype.limitToLast=function(t){return x("Query.limitToLast",arguments,1),P("Query.limitToLast","number",1,t),Q("Query.limitToLast",1,t),new e(this._query.withLimitToLast(t),this.firestore,this._converter)},e.prototype.startAt=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];M("Query.startAt",arguments,1);var i=this.boundFromDocOrFields("Query.startAt",t,n,!0);return new e(this._query.withStartAt(i),this.firestore,this._converter)},e.prototype.startAfter=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];M("Query.startAfter",arguments,1);var i=this.boundFromDocOrFields("Query.startAfter",t,n,!1);return new e(this._query.withStartAt(i),this.firestore,this._converter)},e.prototype.endBefore=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];M("Query.endBefore",arguments,1);var i=this.boundFromDocOrFields("Query.endBefore",t,n,!0);return new e(this._query.withEndAt(i),this.firestore,this._converter)},e.prototype.endAt=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];M("Query.endAt",arguments,1);var i=this.boundFromDocOrFields("Query.endAt",t,n,!1);return new e(this._query.withEndAt(i),this.firestore,this._converter)},e.prototype.isEqual=function(t){if(!(t instanceof e))throw G("isEqual","Query",1,t);return this.firestore===t.firestore&&this._query.isEqual(t._query)},e.prototype.withConverter=function(t){return new e(this._query,this.firestore,t)},e.prototype.boundFromDocOrFields=function(e,t,n,r){if(z(e,1,t),t instanceof Uo){if(n.length>0)throw new I(S.INVALID_ARGUMENT,"Too many arguments provided to "+e+"().");var i=t;if(!i.exists)throw new I(S.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+e+"().");return this.boundFromDocument(e,i._document,r)}var o=[t].concat(n);return this.boundFromFields(e,o,r)},e.prototype.boundFromDocument=function(e,t,n){for(var r=[],i=0,o=this._query.orderBy;i<o.length;i++){var a=o[i];if(a.field.isKeyField())r.push(new Vt(this.firestore._databaseId,t.key));else{var s=t.field(a.field);if(s instanceof Bt)throw new I(S.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+a.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===s){var u=a.field.canonicalString();throw new I(S.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+u+"' (used as the orderBy) does not exist.")}r.push(s)}}return new hr(r,n)},e.prototype.boundFromFields=function(e,t,n){var r=this._query.explicitOrderBy;if(t.length>r.length)throw new I(S.INVALID_ARGUMENT,"Too many arguments provided to "+e+"(). The number of arguments must be less than or equal to the number of Query.orderBy() clauses");for(var i=[],o=0;o<t.length;o++){var a=t[o];if(r[o].field.isKeyField()){if("string"!=typeof a)throw new I(S.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+e+"(), but got a "+typeof a);if(!this._query.isCollectionGroupQuery()&&-1!==a.indexOf("/"))throw new I(S.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+e+"() must be a plain document ID, but '"+a+"' contains a slash.");var s=this._query.path.child(le.fromString(a));if(!fe.isDocumentKey(s))throw new I(S.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+e+"() must result in a valid document path, but '"+s+"' is not because it contains an odd number of segments.");var u=new fe(s);i.push(new Vt(this.firestore._databaseId,u))}else{var c=this.firestore._dataConverter.parseQueryValue(e,a);i.push(c)}}return new hr(i,n)},e.prototype.onSnapshot=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];L("Query.onSnapshot",arguments,1,4);var n,r={},i=0;return"object"!=typeof e[i]||co(e[i])||(K("Query.onSnapshot",r=e[i],["includeMetadataChanges"]),j("Query.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++),co(e[i])?n=e[i]:(P("Query.onSnapshot","function",i,e[i]),O("Query.onSnapshot","function",i+1,e[i+1]),O("Query.onSnapshot","function",i+2,e[i+2]),n={next:e[i],error:e[i+1],complete:e[i+2]}),this.validateHasExplicitOrderByForLimitToLast(this._query),this.onSnapshotInternal(r,n)},e.prototype.onSnapshotInternal=function(e,t){var n=this,r=function(e){console.error("Uncaught Error in onSnapshot:",e)};t.error&&(r=t.error.bind(t));var i=new eo({next:function(e){t.next&&t.next(new Ko(n.firestore,n._query,e,n._converter))},error:r}),o=this.firestore.ensureClientConfigured(),a=o.listen(this._query,i,e);return function(){i.mute(),o.unlisten(a)}},e.prototype.validateHasExplicitOrderByForLimitToLast=function(e){if(e.hasLimitToLast()&&0===e.explicitOrderBy.length)throw new I(S.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")},e.prototype.get=function(e){var t=this;return L("Query.get",arguments,0,1),Yo("Query.get",e),this.validateHasExplicitOrderByForLimitToLast(this._query),new Promise((function(n,r){e&&"cache"===e.source?t.firestore.ensureClientConfigured().getDocumentsFromLocalCache(t._query).then((function(e){n(new Ko(t.firestore,t._query,e,t._converter))}),r):t.getViaSnapshotListener(n,r,e)}))},e.prototype.getViaSnapshotListener=function(e,t,n){var r=this.onSnapshotInternal({includeMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(i){r(),i.metadata.fromCache&&n&&"server"===n.source?t(new I(S.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):e(i)},error:t})},e.prototype.parseDocumentIdValue=function(e){if("string"==typeof e){if(""===e)throw new I(S.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!this._query.isCollectionGroupQuery()&&-1!==e.indexOf("/"))throw new I(S.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+e+"' contains a '/' character.");var t=this._query.path.child(le.fromString(e));if(!fe.isDocumentKey(t))throw new I(S.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+t+"' is not because it has an odd number of segments ("+t.length+").");return new Vt(this.firestore._databaseId,new fe(t))}if(e instanceof Vo){var n=e;return new Vt(this.firestore._databaseId,n._key)}throw new I(S.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+W(e)+".")},e.prototype.validateDisjunctiveFilterElements=function(e,t){if(!Array.isArray(e)||0===e.length)throw new I(S.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+t.toString()+"' filters.");if(e.length>10)throw new I(S.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters support a maximum of 10 elements in the value array.");if(e.indexOf(null)>=0)throw new I(S.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters cannot contain 'null' in the value array.");if(e.filter((function(e){return Number.isNaN(e)})).length>0)throw new I(S.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters cannot contain 'NaN' in the value array.")},e.prototype.validateNewFilter=function(e){if(e instanceof ir){var t=[rr.ARRAY_CONTAINS,rr.ARRAY_CONTAINS_ANY],n=[rr.IN,rr.ARRAY_CONTAINS_ANY],r=t.indexOf(e.op)>=0,i=n.indexOf(e.op)>=0;if(e.isInequality()){var o=this._query.getInequalityFilterField();if(null!==o&&!o.isEqual(e.field))throw new I(S.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+o.toString()+"' and '"+e.field.toString()+"'");var a=this._query.getFirstOrderByField();null!==a&&this.validateOrderByAndInequalityMatch(e.field,a)}else if(i||r){var s=null;if(i&&(s=this._query.findFilterOperator(n)),null===s&&r&&(s=this._query.findFilterOperator(t)),null!=s)throw s===e.op?new I(S.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new I(S.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+s.toString()+"' filters.")}}},e.prototype.validateNewOrderBy=function(e){if(null===this._query.getFirstOrderByField()){var t=this._query.getInequalityFilterField();null!==t&&this.validateOrderByAndInequalityMatch(t,e.field)}},e.prototype.validateOrderByAndInequalityMatch=function(e,t){if(!t.isEqual(e))throw new I(S.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first Query.orderBy(), but your first Query.orderBy() is on field '"+t.toString()+"' instead.")},e}(),Ko=function(){function e(e,t,n,r){this._firestore=e,this._originalQuery=t,this._snapshot=n,this._converter=r,this._cachedChanges=null,this._cachedChangesIncludeMetadataChanges=null,this.metadata=new qo(n.hasPendingWrites,n.fromCache)}return Object.defineProperty(e.prototype,"docs",{get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this._snapshot.docs.isEmpty()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!0,configurable:!0}),e.prototype.forEach=function(e,t){var n=this;L("QuerySnapshot.forEach",arguments,1,2),P("QuerySnapshot.forEach","function",1,e),this._snapshot.docs.forEach((function(r){e.call(t,n.convertToDocumentImpl(r))}))},Object.defineProperty(e.prototype,"query",{get:function(){return new zo(this._originalQuery,this._firestore,this._converter)},enumerable:!0,configurable:!0}),e.prototype.docChanges=function(e){e&&(K("QuerySnapshot.docChanges",e,["includeMetadataChanges"]),j("QuerySnapshot.docChanges","boolean","includeMetadataChanges",e.includeMetadataChanges));var t=!(!e||!e.includeMetadataChanges);if(t&&this._snapshot.excludesMetadataChanges)throw new I(S.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t,n,r){if(n.oldDocs.isEmpty()){var i,o=0;return n.docChanges.map((function(t){var a=new Wo(e,t.doc.key,t.doc,n.fromCache,n.mutatedKeys.has(t.doc.key),r);return b(t.type===zr.Added,"Invalid event type for first snapshot"),b(!i||n.query.docComparator(i,t.doc)<0,"Got added events in wrong order"),i=t.doc,{type:"added",doc:a,oldIndex:-1,newIndex:o++}}))}var a=n.oldDocs;return n.docChanges.filter((function(e){return t||e.type!==zr.Metadata})).map((function(t){var i=new Wo(e,t.doc.key,t.doc,n.fromCache,n.mutatedKeys.has(t.doc.key),r),o=-1,s=-1;return t.type!==zr.Added&&(b((o=a.indexOf(t.doc.key))>=0,"Index for document not found"),a=a.delete(t.doc.key)),t.type!==zr.Removed&&(s=(a=a.add(t.doc)).indexOf(t.doc.key)),{type:Xo(t.type),doc:i,oldIndex:o,newIndex:s}}))}(this._firestore,t,this._snapshot,this._converter),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges},e.prototype.isEqual=function(t){if(!(t instanceof e))throw G("isEqual","QuerySnapshot",1,t);return this._firestore===t._firestore&&this._originalQuery.isEqual(t._originalQuery)&&this._snapshot.isEqual(t._snapshot)&&this._converter===t._converter},e.prototype.convertToDocumentImpl=function(e){return new Wo(this._firestore,e.key,e,this.metadata.fromCache,this._snapshot.mutatedKeys.has(e.key),this._converter)},e}();a.__spreadArrays(["length","forEach","map"],"undefined"!=typeof Symbol?[Symbol.iterator]:[]).forEach((function(e){try{Object.defineProperty(Ko.prototype.docChanges,e,{get:function(){return function(){throw new I(S.INVALID_ARGUMENT,'QuerySnapshot.docChanges has been changed from a property into a method, so usages like "querySnapshot.docChanges" should become "querySnapshot.docChanges()"')}()}})}catch(e){}}));var Go=function(e){function t(t,n,r){var i=e.call(this,tr.atPath(t),n,r)||this;if(i._path=t,t.length%2!=1)throw new I(S.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t.canonicalString()+" has "+t.length);return i}return a.__extends(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._query.path.popLast();return e.isEmpty()?null:new Vo(new fe(e),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!0,configurable:!0}),t.prototype.doc=function(e){if(L("CollectionReference.doc",arguments,0,1),0===arguments.length&&(e=J.newId()),P("CollectionReference.doc","non-empty string",1,e),""===e)throw new I(S.INVALID_ARGUMENT,"Document path must be a non-empty string");var t=le.fromString(e);return Vo.forPath(this._query.path.child(t),this.firestore,this._converter)},t.prototype.add=function(e){x("CollectionReference.add",arguments,1),P("CollectionReference.add","object",1,e);var t=this.doc();return t.set(e).then((function(){return t}))},t.prototype.withConverter=function(e){return new t(this._path,this.firestore,e)},t}(zo);function Qo(e,t){if(void 0===t)return{merge:!1};if(K(e,t,["merge","mergeFields"]),j(e,"boolean","merge",t.merge),B(e,"mergeFields","a string or a FieldPath",t.mergeFields,(function(e){return"string"==typeof e||e instanceof to})),void 0!==t.mergeFields&&void 0!==t.merge)throw new I(S.INVALID_ARGUMENT,"Invalid options passed to function "+e+'(): You cannot specify both "merge" and "mergeFields".');return t}function Ho(e,t){return void 0===t?{}:(K(e,t,["serverTimestamps"]),F(e,0,"serverTimestamps",t.serverTimestamps,["estimate","previous","none"]),t)}function Yo(e,t){O(e,"object",1,t),t&&(K(e,t,["source"]),F(e,0,"source",t.source,["default","server","cache"]))}function Jo(e,t,n){if(t instanceof Vo){if(t.firestore!==n)throw new I(S.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}throw G(e,"DocumentReference",1,t)}function Xo(e){switch(e){case zr.Added:return"added";case zr.Modified:case zr.Metadata:return"modified";case zr.Removed:return"removed";default:return v("Unknown change type: "+e)}}function $o(e,t,n){var r;return e?(r=e.toFirestore(t),n="toFirestore() in "+n):r=t,[r,n]}var Zo=E(jo,"Use firebase.firestore() instead."),ea=E(Bo,"Use firebase.firestore().runTransaction() instead."),ta=E(Fo,"Use firebase.firestore().batch() instead."),na=E(Vo,"Use firebase.firestore().doc() instead."),ra=E(Uo),ia=E(Wo),oa=E(zo),aa=E(Ko),sa=E(Go,"Use firebase.firestore().collection() instead."),ua={Firestore:Zo,GeoPoint:si,Timestamp:Ce,Blob:ie,Transaction:ea,WriteBatch:ta,DocumentReference:na,DocumentSnapshot:ra,Query:oa,QueryDocumentSnapshot:ia,QuerySnapshot:aa,CollectionReference:sa,FieldPath:to,FieldValue:vo,setLogLevel:jo.setLogLevel,CACHE_SIZE_UNLIMITED:Oo};function ca(e){e.INTERNAL.registerComponent(new c.Component("firestore",(function(e){var t=e.getProvider("app").getImmediate();return new jo(t,e.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(function(e){b(e&&"object"==typeof e,"shallowCopy() expects object parameter.");var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}(ua)))}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var la=function(){function e(){}return e.prototype.addCallback=function(e){},e.prototype.shutdown=function(){},e}(),ha=function(){function e(){var e=this;this.networkAvailableListener=function(){return e.onNetworkAvailable()},this.networkUnavailableListener=function(){return e.onNetworkUnavailable()},this.callbacks=[],this.configureNetworkMonitoring()}return e.prototype.addCallback=function(e){this.callbacks.push(e)},e.prototype.shutdown=function(){window.removeEventListener("online",this.networkAvailableListener),window.removeEventListener("offline",this.networkUnavailableListener)},e.prototype.configureNetworkMonitoring=function(){window.addEventListener("online",this.networkAvailableListener),window.addEventListener("offline",this.networkUnavailableListener)},e.prototype.onNetworkAvailable=function(){m("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var e=0,t=this.callbacks;e<t.length;e++){(0,t[e])(0)}},e.prototype.onNetworkUnavailable=function(){m("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var e=0,t=this.callbacks;e<t.length;e++){(0,t[e])(1)}},e.isAvailable=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},e}(),da=function(){function e(e){this.sendFn=e.sendFn,this.closeFn=e.closeFn}return e.prototype.onOpen=function(e){b(!this.wrappedOnOpen,"Called onOpen on stream twice!"),this.wrappedOnOpen=e},e.prototype.onClose=function(e){b(!this.wrappedOnClose,"Called onClose on stream twice!"),this.wrappedOnClose=e},e.prototype.onMessage=function(e){b(!this.wrappedOnMessage,"Called onMessage on stream twice!"),this.wrappedOnMessage=e},e.prototype.close=function(){this.closeFn()},e.prototype.send=function(e){this.sendFn(e)},e.prototype.callOnOpen=function(){b(void 0!==this.wrappedOnOpen,"Cannot call onOpen because no callback was set"),this.wrappedOnOpen()},e.prototype.callOnClose=function(e){b(void 0!==this.wrappedOnClose,"Cannot call onClose because no callback was set"),this.wrappedOnClose(e)},e.prototype.callOnMessage=function(e){b(void 0!==this.wrappedOnMessage,"Cannot call onMessage because no callback was set"),this.wrappedOnMessage(e)},e}(),fa="Connection",pa={BatchGetDocuments:"batchGet",Commit:"commit"},ma="gl-js/ fire/"+h,ga=function(){function e(e){this.databaseId=e.databaseId;var t=e.ssl?"https":"http";this.baseUrl=t+"://"+e.host,this.forceLongPolling=e.forceLongPolling}return e.prototype.modifyHeadersForRequest=function(e,t){if(t)for(var n in t.authHeaders)t.authHeaders.hasOwnProperty(n)&&(e[n]=t.authHeaders[n]);e["X-Goog-Api-Client"]=ma},e.prototype.invokeRPC=function(e,t,n){var r=this,i=this.makeUrl(e);return new Promise((function(o,s){var u=new l.XhrIo;u.listenOnce(l.EventType.COMPLETE,(function(){try{switch(u.getLastErrorCode()){case l.ErrorCode.NO_ERROR:var t=u.getResponseJson();m(fa,"XHR received:",JSON.stringify(t)),o(t);break;case l.ErrorCode.TIMEOUT:m(fa,'RPC "'+e+'" timed out'),s(new I(S.DEADLINE_EXCEEDED,"Request time out"));break;case l.ErrorCode.HTTP_ERROR:var n=u.getStatus();if(m(fa,'RPC "'+e+'" failed with status:',n,"response text:",u.getResponseText()),n>0){var r=u.getResponseJson().error;if(r&&r.status&&r.message){var i=(a=r.status,c=a.toLowerCase().replace("_","-"),Object.values(S).indexOf(c)>=0?c:S.UNKNOWN);s(new I(i,r.message))}else s(new I(S.UNKNOWN,"Server responded with status "+u.getStatus()))}else m(fa,'RPC "'+e+'" failed'),s(new I(S.UNAVAILABLE,"Connection failed."));break;default:v('RPC "'+e+'" failed with unanticipated webchannel error '+u.getLastErrorCode()+": "+u.getLastError()+", giving up.")}}finally{m(fa,'RPC "'+e+'" completed.')}var a,c}));var c=a.__assign({},t);delete c.database;var h=JSON.stringify(c);m(fa,"XHR sending: ",i+" "+h);var d={"Content-Type":"text/plain"};r.modifyHeadersForRequest(d,n),u.send(i,"POST",h,d,15)}))},e.prototype.invokeStreamingRPC=function(e,t,n){return this.invokeRPC(e,t,n)},e.prototype.openStream=function(e,t){var n=[this.baseUrl,"/","google.firestore.v1.Firestore","/",e,"/channel"],r=l.createWebChannelTransport(),i={backgroundChannelTest:!0,httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling};this.modifyHeadersForRequest(i.initMessageHeaders,t),u.isReactNative()||(i.httpHeadersOverwriteParam="$httpHeaders");var o=n.join("");m(fa,"Creating WebChannel: "+o+" "+i);var a=r.createWebChannel(o,i),s=!1,c=!1,h=new da({sendFn:function(e){c?m(fa,"Not sending because WebChannel is closed:",e):(s||(m(fa,"Opening WebChannel transport."),a.open(),s=!0),m(fa,"WebChannel sending:",e),a.send(e))},closeFn:function(){return a.close()}}),d=function(e,t){a.listen(e,(function(e){try{t(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return d(l.WebChannel.EventType.OPEN,(function(){c||m(fa,"WebChannel transport opened.")})),d(l.WebChannel.EventType.CLOSE,(function(){c||(c=!0,m(fa,"WebChannel transport closed"),h.callOnClose())})),d(l.WebChannel.EventType.ERROR,(function(e){c||(c=!0,m(fa,"WebChannel transport errored:",e),h.callOnClose(new I(S.UNAVAILABLE,"The operation could not be completed")))})),d(l.WebChannel.EventType.MESSAGE,(function(e){var t;if(!c){var n=e.data[0];b(!!n,"Got a webchannel message without data.");var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){m(fa,"WebChannel received error:",i);var o=i.status,s=function(e){var t=Fr[e];if(void 0!==t)return Ur(t)}(o),u=i.message;void 0===s&&(s=S.INTERNAL,u="Unknown error status: "+o+" with message "+i.message),c=!0,h.callOnClose(new I(s,u)),a.close()}else m(fa,"WebChannel received:",n),h.callOnMessage(n)}})),setTimeout((function(){h.callOnOpen()}),0),h},e.prototype.makeUrl=function(e){var t=pa[e];return b(void 0!==t,"Unknown REST mapping for: "+e),this.baseUrl+"/v1/projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents:"+t},e}(),ya=function(){function e(){this.emptyByteString="",this.base64Available="undefined"!=typeof atob}return Object.defineProperty(e.prototype,"document",{get:function(){return"undefined"!=typeof document?document:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"window",{get:function(){return"undefined"!=typeof window?window:null},enumerable:!0,configurable:!0}),e.prototype.loadConnection=function(e){return Promise.resolve(new ga(e))},e.prototype.newConnectivityMonitor=function(){return ha.isAvailable()?new ha:new la},e.prototype.newSerializer=function(e){return new Ti(e,{useProto3Json:!0})},e.prototype.formatJSON=function(e){return JSON.stringify(e)},e.prototype.atob=function(e){return atob(e)},e.prototype.btoa=function(e){return btoa(e)},e}();
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
w.setPlatform(new ya);var va="@firebase/firestore",ba="1.9.1";
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function wa(e){ca(e),e.registerVersion(va,ba)}wa(o),t.registerFirestore=wa}).call(this,n(17))},function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var u,c=[],l=!1,h=-1;function d(){l&&u&&(l=!1,u.length?c=u.concat(c):h=-1,c.length&&f())}function f(){if(!l){var e=s(d);l=!0;for(var t=c.length;t;){for(u=c,c=[];++h<t;)u&&u[h].run();h=-1,t=c.length}u=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function m(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new p(e,t)),1!==c.length||l||s(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"ErrorCode",(function(){return cr})),n.d(t,"EventType",(function(){return lr})),n.d(t,"WebChannel",(function(){return hr})),n.d(t,"XhrIo",(function(){return dr})),n.d(t,"createWebChannelTransport",(function(){return ur}));var r,i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{},o=o||{},a=i;function s(e){return"string"==typeof e}function u(e){return"number"==typeof e}function c(e,t){e=e.split("."),t=t||a;for(var n=0;n<e.length;n++)if(null==(t=t[e[n]]))return null;return t}function l(){}function h(e){var t=typeof e;if("object"==t){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return t;var n=Object.prototype.toString.call(e);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof e.length&&void 0!==e.splice&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==e.call&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==t&&void 0===e.call)return"object";return t}function d(e){return"array"==h(e)}function f(e){var t=h(e);return"array"==t||"object"==t&&"number"==typeof e.length}function p(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var m="closure_uid_"+(1e9*Math.random()>>>0),g=0;function y(e,t,n){return e.call.apply(e.bind,arguments)}function v(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function b(e,t,n){return(b=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?y:v).apply(null,arguments)}function w(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}var T=Date.now||function(){return+new Date};function S(e,t){function n(){}n.prototype=t.prototype,e.N=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.xb=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}function I(){this.j=this.j,this.i=this.i}I.prototype.j=!1,I.prototype.la=function(){if(!this.j&&(this.j=!0,this.G(),0))this[m]||(this[m]=++g)},I.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var E=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if(s(e))return s(t)&&1==t.length?e.indexOf(t,0):-1;for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},C=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i=s(e)?e.split(""):e,o=0;o<r;o++)o in i&&t.call(n,i[o],o,e)};function _(e){return Array.prototype.concat.apply([],arguments)}function D(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function k(e){return/^[\s\xa0]*$/.test(e)}var N,A=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function x(e,t){return-1!=e.indexOf(t)}function M(e,t){return e<t?-1:e>t?1:0}e:{var L=a.navigator;if(L){var P=L.userAgent;if(P){N=P;break e}}N=""}function O(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function R(e){var t,n={};for(t in e)n[t]=e[t];return n}var j="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function B(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var o=0;o<j.length;o++)n=j[o],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function F(e){return F[" "](e),e}F[" "]=l;var V,q,U=x(N,"Opera"),W=x(N,"Trident")||x(N,"MSIE"),z=x(N,"Edge"),K=z||W,G=x(N,"Gecko")&&!(x(N.toLowerCase(),"webkit")&&!x(N,"Edge"))&&!(x(N,"Trident")||x(N,"MSIE"))&&!x(N,"Edge"),Q=x(N.toLowerCase(),"webkit")&&!x(N,"Edge");function H(){var e=a.document;return e?e.documentMode:void 0}e:{var Y="",J=(q=N,G?/rv:([^\);]+)(\)|;)/.exec(q):z?/Edge\/([\d\.]+)/.exec(q):W?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(q):Q?/WebKit\/(\S+)/.exec(q):U?/(?:Version)[ \/]?(\S+)/.exec(q):void 0);if(J&&(Y=J?J[1]:""),W){var X=H();if(null!=X&&X>parseFloat(Y)){V=String(X);break e}}V=Y}var $,Z={};function ee(e){return function(e,t){var n=Z;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(){for(var t=0,n=A(String(V)).split("."),r=A(String(e)).split("."),i=Math.max(n.length,r.length),o=0;0==t&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;t=M(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||M(0==a[2].length,0==s[2].length)||M(a[2],s[2]),a=a[3],s=s[3]}while(0==t)}return 0<=t}))}var te=a.document;$=te&&W?H()||("CSS1Compat"==te.compatMode?parseInt(V,10):5):void 0;var ne=!W||9<=Number($),re=W&&!ee("9"),ie=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{a.addEventListener("test",l,t),a.removeEventListener("test",l,t)}catch(e){}return e}();function oe(e,t){this.type=e,this.a=this.target=t,this.Ia=!0}function ae(e,t){if(oe.call(this,e?e.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.a=t,t=e.relatedTarget){if(G){e:{try{F(t.nodeName);var i=!0;break e}catch(e){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=s(e.pointerType)?e.pointerType:se[e.pointerType]||"",this.c=e,e.defaultPrevented&&this.b()}}oe.prototype.b=function(){this.Ia=!1},S(ae,oe);var se={2:"touch",3:"pen",4:"mouse"};ae.prototype.b=function(){ae.N.b.call(this);var e=this.c;if(e.preventDefault)e.preventDefault();else if(e.returnValue=!1,re)try{(e.ctrlKey||112<=e.keyCode&&123>=e.keyCode)&&(e.keyCode=-1)}catch(e){}};var ue="closure_listenable_"+(1e6*Math.random()|0),ce=0;function le(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.da=i,this.key=++ce,this.X=this.Z=!1}function he(e){e.X=!0,e.listener=null,e.proxy=null,e.src=null,e.da=null}function de(e){this.src=e,this.a={},this.b=0}function fe(e,t){var n=t.type;if(n in e.a){var r,i=e.a[n],o=E(i,t);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(he(t),0==e.a[n].length&&(delete e.a[n],e.b--))}}function pe(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.X&&o.listener==t&&o.capture==!!n&&o.da==r)return i}return-1}de.prototype.add=function(e,t,n,r,i){var o=e.toString();(e=this.a[o])||(e=this.a[o]=[],this.b++);var a=pe(e,t,r,i);return-1<a?(t=e[a],n||(t.Z=!1)):((t=new le(t,this.src,o,!!r,i)).Z=n,e.push(t)),t};var me="closure_lm_"+(1e6*Math.random()|0),ge={};function ye(e,t,n,r,i){if(r&&r.once)return function e(t,n,r,i,o){if(d(n)){for(var a=0;a<n.length;a++)e(t,n[a],r,i,o);return null}return r=Ce(r),t&&t[ue]?t.Aa(n,r,p(i)?!!i.capture:!!i,o):ve(t,n,r,!0,i,o)}(e,t,n,r,i);if(d(t)){for(var o=0;o<t.length;o++)ye(e,t[o],n,r,i);return null}return n=Ce(n),e&&e[ue]?e.za(t,n,p(r)?!!r.capture:!!r,i):ve(e,t,n,!1,r,i)}function ve(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var a=p(i)?!!i.capture:!!i;if(a&&!ne)return null;var s=Ie(e);if(s||(e[me]=s=new de(e)),(n=s.add(t,n,r,a,o)).proxy)return n;if(r=function(){var e=Se,t=ne?function(n){return e.call(t.src,t.listener,n)}:function(n){if(!(n=e.call(t.src,t.listener,n)))return n};return t}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)ie||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(we(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function be(e){if(!u(e)&&e&&!e.X){var t=e.src;if(t&&t[ue])fe(t.c,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(we(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Ie(t))?(fe(n,e),0==n.b&&(n.src=null,t[me]=null)):he(e)}}}function we(e){return e in ge?ge[e]:ge[e]="on"+e}function Te(e,t){var n=e.listener,r=e.da||e.src;return e.Z&&be(e),n.call(r,t)}function Se(e,t){return!!e.X||(ne?Te(e,new ae(t,this)):Te(e,t=new ae(t||c("window.event"),this)))}function Ie(e){return(e=e[me])instanceof de?e:null}var Ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ce(e){return"function"==h(e)?e:(e[Ee]||(e[Ee]=function(t){return e.handleEvent(t)}),e[Ee])}function _e(){I.call(this),this.c=new de(this),this.J=this,this.B=null}function De(e,t,n,r){if(!(t=e.c.a[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var a=t[o];if(a&&!a.X&&a.capture==n){var s=a.listener,u=a.da||a.src;a.Z&&fe(e.c,a),i=!1!==s.call(u,r)&&i}}return i&&0!=r.Ia}S(_e,I),_e.prototype[ue]=!0,(r=_e.prototype).addEventListener=function(e,t,n,r){ye(this,e,t,n,r)},r.removeEventListener=function(e,t,n,r){!function e(t,n,r,i,o){if(d(n))for(var a=0;a<n.length;a++)e(t,n[a],r,i,o);else i=p(i)?!!i.capture:!!i,r=Ce(r),t&&t[ue]?(t=t.c,(n=String(n).toString())in t.a&&(-1<(r=pe(a=t.a[n],r,i,o))&&(he(a[r]),Array.prototype.splice.call(a,r,1),0==a.length&&(delete t.a[n],t.b--)))):t&&(t=Ie(t))&&(n=t.a[n.toString()],t=-1,n&&(t=pe(n,r,i,o)),(r=-1<t?n[t]:null)&&be(r))}(this,e,t,n,r)},r.dispatchEvent=function(e){var t,n=this.B;if(n)for(t=[];n;n=n.B)t.push(n);n=this.J;var r=e.type||e;if(s(e))e=new oe(e,n);else if(e instanceof oe)e.target=e.target||n;else{var i=e;B(e=new oe(r,n),i)}if(i=!0,t)for(var o=t.length-1;0<=o;o--){var a=e.a=t[o];i=De(a,r,!0,e)&&i}if(i=De(a=e.a=n,r,!0,e)&&i,i=De(a,r,!1,e)&&i,t)for(o=0;o<t.length;o++)i=De(a=e.a=t[o],r,!1,e)&&i;return i},r.G=function(){if(_e.N.G.call(this),this.c){var e,t=this.c;for(e in t.a){for(var n=t.a[e],r=0;r<n.length;r++)he(n[r]);delete t.a[e],t.b--}}this.B=null},r.za=function(e,t,n,r){return this.c.add(String(e),t,!1,n,r)},r.Aa=function(e,t,n,r){return this.c.add(String(e),t,!0,n,r)};var ke=a.JSON.stringify;function Ne(e,t){this.c=e,this.f=t,this.b=0,this.a=null}function Ae(){this.b=this.a=null}Ne.prototype.get=function(){if(0<this.b){this.b--;var e=this.a;this.a=e.next,e.next=null}else e=this.c();return e};var xe,Me=new Ne((function(){return new Pe}),(function(e){e.reset()}));function Le(){var e=Be,t=null;return e.a&&(t=e.a,e.a=e.a.next,e.a||(e.b=null),t.next=null),t}function Pe(){this.next=this.b=this.a=null}function Oe(e){a.setTimeout((function(){throw e}),0)}function Re(e,t){xe||function(){var e=a.Promise.resolve(void 0);xe=function(){e.then(Fe)}}(),je||(xe(),je=!0),Be.add(e,t)}Ae.prototype.add=function(e,t){var n=Me.get();n.set(e,t),this.b?this.b.next=n:this.a=n,this.b=n},Pe.prototype.set=function(e,t){this.a=e,this.b=t,this.next=null},Pe.prototype.reset=function(){this.next=this.b=this.a=null};var je=!1,Be=new Ae;function Fe(){for(var e;e=Le();){try{e.a.call(e.b)}catch(e){Oe(e)}var t=Me;t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}je=!1}function Ve(e,t){_e.call(this),this.b=e||1,this.a=t||a,this.f=b(this.fb,this),this.g=T()}function qe(e){e.ba=!1,e.L&&(e.a.clearTimeout(e.L),e.L=null)}function Ue(e,t,n){if("function"==h(e))n&&(e=b(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=b(e.handleEvent,e)}return 2147483647<Number(t)?-1:a.setTimeout(e,t||0)}function We(e,t,n){I.call(this),this.f=null!=n?b(e,n):e,this.c=t,this.b=b(this.$a,this),this.a=[]}function ze(e){e.U=Ue(e.b,e.c),e.f.apply(null,e.a)}function Ke(e){I.call(this),this.b=e,this.a={}}S(Ve,_e),(r=Ve.prototype).ba=!1,r.L=null,r.fb=function(){if(this.ba){var e=T()-this.g;0<e&&e<.8*this.b?this.L=this.a.setTimeout(this.f,this.b-e):(this.L&&(this.a.clearTimeout(this.L),this.L=null),this.dispatchEvent("tick"),this.ba&&(qe(this),this.start()))}},r.start=function(){this.ba=!0,this.L||(this.L=this.a.setTimeout(this.f,this.b),this.g=T())},r.G=function(){Ve.N.G.call(this),qe(this),delete this.a},S(We,I),(r=We.prototype).ea=!1,r.U=null,r.Ta=function(e){this.a=arguments,this.U?this.ea=!0:ze(this)},r.G=function(){We.N.G.call(this),this.U&&(a.clearTimeout(this.U),this.U=null,this.ea=!1,this.a=[])},r.$a=function(){this.U=null,this.ea&&(this.ea=!1,ze(this))},S(Ke,I);var Ge=[];function Qe(e,t,n,r){d(n)||(n&&(Ge[0]=n.toString()),n=Ge);for(var i=0;i<n.length;i++){var o=ye(t,n[i],r||e.handleEvent,!1,e.b||e);if(!o)break;e.a[o.key]=o}}function He(e){O(e.a,(function(e,t){this.a.hasOwnProperty(t)&&be(e)}),e),e.a={}}function Ye(){}Ke.prototype.G=function(){Ke.N.G.call(this),He(this)},Ke.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Je=new _e;function Xe(e){oe.call(this,"serverreachability",e)}function $e(e){Je.dispatchEvent(new Xe(Je,e))}function Ze(e){oe.call(this,"statevent",e)}function et(e){Je.dispatchEvent(new Ze(Je,e))}function tt(e){oe.call(this,"timingevent",e)}function nt(e,t){if("function"!=h(e))throw Error("Fn must not be null and must be a function");return a.setTimeout((function(){e()}),t)}S(Xe,oe),S(Ze,oe),S(tt,oe);var rt={NO_ERROR:0,gb:1,nb:2,mb:3,jb:4,lb:5,ob:6,La:7,TIMEOUT:8,rb:9},it={ib:"complete",vb:"success",Ma:"error",La:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",kb:"downloadprogress",wb:"uploadprogress"};function ot(){}function at(e){var t;return(t=e.a)||(t=e.a={}),t}function st(){}ot.prototype.a=null;var ut,ct={OPEN:"a",hb:"b",Ma:"c",qb:"d"};function lt(){oe.call(this,"d")}function ht(){oe.call(this,"c")}function dt(){}function ft(e,t,n){this.g=e,this.W=t,this.V=n||1,this.I=new Ke(this),this.O=pt,e=K?125:void 0,this.P=new Ve(e),this.h=null,this.b=!1,this.l=this.D=this.f=this.F=this.v=this.R=this.i=null,this.j=[],this.a=null,this.A=0,this.c=this.w=null,this.o=-1,this.m=!1,this.J=0,this.B=null,this.s=this.S=this.H=!1}S(lt,oe),S(ht,oe),S(dt,ot),ut=new dt;var pt=45e3,mt={},gt={};function yt(e,t,n){e.F=1,e.f=Ut(Ot(t)),e.l=n,e.H=!0,bt(e,null)}function vt(e,t,n,r){e.F=1,e.f=Ut(Ot(t)),e.l=null,e.H=n,bt(e,r)}function bt(e,t){e.v=T(),St(e),e.D=Ot(e.f),qt(e.D,"t",e.V),e.A=0,e.a=e.g.$(e.g.Y()?t:null),0<e.J&&(e.B=new We(b(e.Ja,e,e.a),e.J)),Qe(e.I,e.a,"readystatechange",e.cb),t=e.h?R(e.h):{},e.l?(e.w||(e.w="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.a.ca(e.D,e.w,e.l,t)):(e.w="GET",e.a.ca(e.D,e.w,null,t)),$e(1)}function wt(e,t,n){for(var r=!0;!e.m&&e.A<n.length;){var i=Tt(e,n);if(i==gt){4==t&&(e.c=4,et(14),r=!1);break}if(i==mt){e.c=4,et(15),r=!1;break}Dt(e,i)}4==t&&0==n.length&&(e.c=1,et(16),r=!1),e.b=e.b&&r,r||(_t(e),Ct(e))}function Tt(e,t){var n=e.A,r=t.indexOf("\n",n);return-1==r?gt:(n=Number(t.substring(n,r)),isNaN(n)?mt:(r+=1)+n>t.length?gt:(t=t.substr(r,n),e.A=r+n,t))}function St(e){e.R=T()+e.O,It(e,e.O)}function It(e,t){if(null!=e.i)throw Error("WatchDog timer not null");e.i=nt(b(e.ab,e),t)}function Et(e){e.i&&(a.clearTimeout(e.i),e.i=null)}function Ct(e){e.g.Ca()||e.m||e.g.na(e)}function _t(e){Et(e);var t=e.B;t&&"function"==typeof t.la&&t.la(),e.B=null,qe(e.P),He(e.I),e.a&&(t=e.a,e.a=null,t.abort(),t.la())}function Dt(e,t){try{e.g.Fa(e,t),$e(4)}catch(e){}}function kt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(f(e)||s(e))C(e,t,void 0);else{if(e.K&&"function"==typeof e.K)var n=e.K();else if(e.C&&"function"==typeof e.C)n=void 0;else if(f(e)||s(e)){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;i=(r=function(e){if(e.C&&"function"==typeof e.C)return e.C();if(s(e))return e.split("");if(f(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e)).length;for(var o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}}function Nt(e,t){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof Nt)for(n=e.K(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function At(e,t){Mt(e.b,t)&&(delete e.b[t],e.c--,e.a.length>2*e.c&&xt(e))}function xt(e){if(e.c!=e.a.length){for(var t=0,n=0;t<e.a.length;){var r=e.a[t];Mt(e.b,r)&&(e.a[n++]=r),t++}e.a.length=n}if(e.c!=e.a.length){var i={};for(n=t=0;t<e.a.length;)Mt(i,r=e.a[t])||(e.a[n++]=r,i[r]=1),t++;e.a.length=n}}function Mt(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(r=ft.prototype).setTimeout=function(e){this.O=e},r.cb=function(e){e=e.target;var t=this.B;t&&3==On(e)?t.Ta():this.Ja(e)},r.Ja=function(e){try{if(e==this.a)e:{var t=On(this.a),n=this.a.ya(),r=this.a.T();if(!(3>t||3==t&&!K&&!this.a.aa())){this.m||4!=t||7==n||$e(8==n||0>=r?3:2),Et(this);var i=this.a.T();this.o=i;var o=this.a.aa();if(this.b=200==i){if(this.S&&!this.s){t:{if(this.a){var a=Rn(this.a,"X-HTTP-Initial-Response");if(a&&!k(a)){var s=a;break t}}s=null}if(!s){this.b=!1,this.c=3,et(12),_t(this),Ct(this);break e}this.s=!0,Dt(this,s)}this.H?(wt(this,t,o),K&&this.b&&3==t&&(Qe(this.I,this.P,"tick",this.bb),this.P.start())):Dt(this,o),4==t&&_t(this),this.b&&!this.m&&(4==t?this.g.na(this):(this.b=!1,St(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.c=3,et(12)):(this.c=0,et(13)),_t(this),Ct(this)}}}catch(e){}},r.bb=function(){if(this.a){var e=On(this.a),t=this.a.aa();this.A<t.length&&(Et(this),wt(this,e,t),this.b&&4!=e&&St(this))}},r.cancel=function(){this.m=!0,_t(this)},r.ab=function(){this.i=null;var e=T();0<=e-this.R?(2!=this.F&&($e(3),et(17)),_t(this),this.c=2,Ct(this)):It(this,this.R-e)},(r=Nt.prototype).C=function(){xt(this);for(var e=[],t=0;t<this.a.length;t++)e.push(this.b[this.a[t]]);return e},r.K=function(){return xt(this),this.a.concat()},r.get=function(e,t){return Mt(this.b,e)?this.b[e]:t},r.set=function(e,t){Mt(this.b,e)||(this.c++,this.a.push(e)),this.b[e]=t},r.forEach=function(e,t){for(var n=this.K(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);e.call(t,o,i,this)}};var Lt=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Pt(e,t){var n;this.b=this.j=this.f="",this.i=null,this.g=this.a="",this.h=!1,e instanceof Pt?(this.h=void 0!==t?t:e.h,Rt(this,e.f),this.j=e.j,jt(this,e.b),Bt(this,e.i),this.a=e.a,Ft(this,nn(e.c)),this.g=e.g):e&&(n=String(e).match(Lt))?(this.h=!!t,Rt(this,n[1]||"",!0),this.j=Wt(n[2]||""),jt(this,n[3]||"",!0),Bt(this,n[4]),this.a=Wt(n[5]||"",!0),Ft(this,n[6]||"",!0),this.g=Wt(n[7]||"")):(this.h=!!t,this.c=new Xt(null,this.h))}function Ot(e){return new Pt(e)}function Rt(e,t,n){e.f=n?Wt(t,!0):t,e.f&&(e.f=e.f.replace(/:$/,""))}function jt(e,t,n){e.b=n?Wt(t,!0):t}function Bt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.i=t}else e.i=null}function Ft(e,t,n){t instanceof Xt?(e.c=t,function(e,t){t&&!e.f&&($t(e),e.c=null,e.a.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Zt(this,t),tn(this,n,e))}),e)),e.f=t}(e.c,e.h)):(n||(t=zt(t,Yt)),e.c=new Xt(t,e.h))}function Vt(e,t,n){e.c.set(t,n)}function qt(e,t,n){d(n)||(n=[String(n)]),tn(e.c,t,n)}function Ut(e){return Vt(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^T()).toString(36)),e}function Wt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function zt(e,t,n){return s(e)?(e=encodeURI(e).replace(t,Kt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Kt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Pt.prototype.toString=function(){var e=[],t=this.f;t&&e.push(zt(t,Gt,!0),":");var n=this.b;return(n||"file"==t)&&(e.push("//"),(t=this.j)&&e.push(zt(t,Gt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.i)&&e.push(":",String(n))),(n=this.a)&&(this.b&&"/"!=n.charAt(0)&&e.push("/"),e.push(zt(n,"/"==n.charAt(0)?Ht:Qt,!0))),(n=this.c.toString())&&e.push("?",n),(n=this.g)&&e.push("#",zt(n,Jt)),e.join("")},Pt.prototype.resolve=function(e){var t=Ot(this),n=!!e.f;n?Rt(t,e.f):n=!!e.j,n?t.j=e.j:n=!!e.b,n?jt(t,e.b):n=null!=e.i;var r=e.a;if(n)Bt(t,e.i);else if(n=!!e.a){if("/"!=r.charAt(0))if(this.b&&!this.a)r="/"+r;else{var i=t.a.lastIndexOf("/");-1!=i&&(r=t.a.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(x(i,"./")||x(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],a=0;a<i.length;){var s=i[a++];"."==s?r&&a==i.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&a==i.length&&o.push("")):(o.push(s),r=!0)}r=o.join("/")}else r=i}return n?t.a=r:n=""!==e.c.toString(),n?Ft(t,nn(e.c)):n=!!e.g,n&&(t.g=e.g),t};var Gt=/[#\/\?@]/g,Qt=/[#\?:]/g,Ht=/[#\?]/g,Yt=/[#\?@]/g,Jt=/#/g;function Xt(e,t){this.b=this.a=null,this.c=e||null,this.f=!!t}function $t(e){e.a||(e.a=new Nt,e.b=0,e.c&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.c,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Zt(e,t){$t(e),t=rn(e,t),Mt(e.a.b,t)&&(e.c=null,e.b-=e.a.get(t).length,At(e.a,t))}function en(e,t){return $t(e),t=rn(e,t),Mt(e.a.b,t)}function tn(e,t,n){Zt(e,t),0<n.length&&(e.c=null,e.a.set(rn(e,t),D(n)),e.b+=n.length)}function nn(e){var t=new Xt;return t.c=e.c,e.a&&(t.a=new Nt(e.a),t.b=e.b),t}function rn(e,t){return t=String(t),e.f&&(t=t.toLowerCase()),t}function on(e){this.a=e,this.b=this.h=null,this.g=!1,this.i=null,this.c=-1,this.l=this.f=null}function an(e){var t=e.a.F.a;if(null!=t)et(4),t?(et(10),Hn(e.a,e,!1)):(et(11),Hn(e.a,e,!0));else{e.b=new ft(e,void 0,void 0),e.b.h=e.h,t=Zn(t=e.a,t.Y()?e.f:null,e.i),et(4),qt(t,"TYPE","xmlhttp");var n=e.a.j,r=e.a.I;n&&r&&Vt(t,n,r),vt(e.b,t,!1,e.f)}}function sn(){this.a=this.b=null}function un(){this.a=new Nt}function cn(e){var t=typeof e;return"object"==t&&e||"function"==t?"o"+(e[m]||(e[m]=++g)):t.charAt(0)+e}function ln(e,t){this.b=e,this.a=t}function hn(e){this.g=e||dn,a.PerformanceNavigationTiming?e=0<(e=a.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(a.ka&&a.ka.Da&&a.ka.Da()&&a.ka.Da().yb),this.f=e?this.g:1,this.a=null,1<this.f&&(this.a=new un),this.b=null,this.c=[]}(r=Xt.prototype).add=function(e,t){$t(this),this.c=null,e=rn(this,e);var n=this.a.get(e);return n||this.a.set(e,n=[]),n.push(t),this.b+=1,this},r.forEach=function(e,t){$t(this),this.a.forEach((function(n,r){C(n,(function(n){e.call(t,n,r,this)}),this)}),this)},r.K=function(){$t(this);for(var e=this.a.C(),t=this.a.K(),n=[],r=0;r<t.length;r++)for(var i=e[r],o=0;o<i.length;o++)n.push(t[r]);return n},r.C=function(e){$t(this);var t=[];if(s(e))en(this,e)&&(t=_(t,this.a.get(rn(this,e))));else{e=this.a.C();for(var n=0;n<e.length;n++)t=_(t,e[n])}return t},r.set=function(e,t){return $t(this),this.c=null,en(this,e=rn(this,e))&&(this.b-=this.a.get(e).length),this.a.set(e,[t]),this.b+=1,this},r.get=function(e,t){return e&&0<(e=this.C(e)).length?String(e[0]):t},r.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var e=[],t=this.a.K(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.C(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),e.push(a)}}return this.c=e.join("&")},S((function(){}),(function(){})),(r=on.prototype).M=null,r.$=function(e){return this.a.$(e)},r.abort=function(){this.b&&(this.b.cancel(),this.b=null),this.c=-1},r.Ca=function(){return!1},r.Fa=function(e,t){if(this.c=e.o,0==this.M){if(!this.a.o&&(e=e.a)){var n=Rn(e,"X-Client-Wire-Protocol");this.l=n||null,this.a.j&&(e=Rn(e,"X-HTTP-Session-Id"))&&(this.a.I=e)}if(t){try{var r=this.a.ja.a.parse(t)}catch(e){return(t=this.a).m=this.c,void Xn(t,2)}this.f=r[0]}else(t=this.a).m=this.c,Xn(t,2)}else 1==this.M&&(this.g?et(6):"11111"==t?(et(5),this.g=!0,(!W||10<=Number($))&&(this.c=200,this.b.cancel(),et(11),Hn(this.a,this,!0))):(et(7),this.g=!1))},r.na=function(){if(this.c=this.b.o,this.b.b)0==this.M?(this.M=1,an(this)):1==this.M&&(this.g?(et(11),Hn(this.a,this,!0)):(et(10),Hn(this.a,this,!1)));else{0==this.M?et(8):1==this.M&&et(9);var e=this.a;e.m=this.c,Xn(e,2)}},r.Y=function(){return this.a.Y()},r.ma=function(){return this.a.ma()},un.prototype.add=function(e){this.a.set(cn(e),e)},un.prototype.C=function(){return this.a.C()};var dn=10;function fn(e,t){!e.a&&(x(t,"spdy")||x(t,"quic")||x(t,"h2"))&&(e.f=e.g,e.a=new un,e.b&&(yn(e,e.b),e.b=null))}function pn(e){return!!e.b||!!e.a&&e.a.a.c>=e.f}function mn(e){return e.b?1:e.a?e.a.a.c:0}function gn(e,t){return e.b?e=e.b==t:e.a?(t=cn(t),e=Mt(e.a.a.b,t)):e=!1,e}function yn(e,t){e.a?e.a.add(t):e.b=t}function vn(e,t){var n;e.b&&e.b==t?e.b=null:((n=e.a)&&(n=cn(t),n=Mt(e.a.a.b,n)),n&&At(e.a.a,cn(t)))}function bn(e){if(null!=e.b)return e.c.concat(e.b.j);if(null!=e.a&&0!=e.a.a.c){var t=e.c;return C(e.a.C(),(function(e){t=t.concat(e.j)})),t}return D(e.c)}function wn(){}function Tn(){this.a=new wn}function Sn(e,t,n){var r=n||"";try{kt(e,(function(e,n){var i=e;p(e)&&(i=ke(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(e){throw t.push(r+"type="+encodeURIComponent("_badmap")),e}}function In(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(e){}}hn.prototype.cancel=function(){this.c=bn(this),this.b?(this.b.cancel(),this.b=null):this.a&&0!=this.a.a.c&&(C(this.a.C(),(function(e){e.cancel()})),function(e){e.b={},e.a.length=0,e.c=0}(this.a.a))},wn.prototype.stringify=function(e){return a.JSON.stringify(e,void 0)},wn.prototype.parse=function(e){return a.JSON.parse(e,void 0)};var En=a.JSON.parse;function Cn(e){_e.call(this),this.headers=new Nt,this.H=e||null,this.b=!1,this.s=this.a=null,this.A="",this.h=0,this.f="",this.g=this.w=this.l=this.v=!1,this.o=0,this.m=null,this.I=_n,this.D=this.F=!1}S(Cn,_e);var _n="",Dn=/^https?$/i,kn=["POST","PUT"];function Nn(e){return"content-type"==e.toLowerCase()}function An(e,t){e.b=!1,e.a&&(e.g=!0,e.a.abort(),e.g=!1),e.f=t,e.h=5,xn(e),Ln(e)}function xn(e){e.v||(e.v=!0,e.dispatchEvent("complete"),e.dispatchEvent("error"))}function Mn(e){if(e.b&&void 0!==o&&(!e.s[1]||4!=On(e)||2!=e.T()))if(e.l&&4==On(e))Ue(e.Ea,0,e);else if(e.dispatchEvent("readystatechange"),4==On(e)){e.b=!1;try{var t,n=e.T();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var s=String(e.A).match(Lt)[1]||null;if(!s&&a.self&&a.self.location){var u=a.self.location.protocol;s=u.substr(0,u.length-1)}i=!Dn.test(s?s.toLowerCase():"")}t=i}if(t)e.dispatchEvent("complete"),e.dispatchEvent("success");else{e.h=6;try{var c=2<On(e)?e.a.statusText:""}catch(e){c=""}e.f=c+" ["+e.T()+"]",xn(e)}}finally{Ln(e)}}}function Ln(e,t){if(e.a){Pn(e);var n=e.a,r=e.s[0]?l:null;e.a=null,e.s=null,t||e.dispatchEvent("ready");try{n.onreadystatechange=r}catch(e){}}}function Pn(e){e.a&&e.D&&(e.a.ontimeout=null),e.m&&(a.clearTimeout(e.m),e.m=null)}function On(e){return e.a?e.a.readyState:0}function Rn(e,t){return e.a?e.a.getResponseHeader(t):null}function jn(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}if(r)return e;if(n=function(e){var t="";return O(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),s(e)){if(t=encodeURIComponent(String(t)),t+=n=null!=n?"="+encodeURIComponent(String(n)):""){if(0>(n=e.indexOf("#"))&&(n=e.length),0>(r=e.indexOf("?"))||r>n){r=n;var i=""}else i=e.substring(r+1,n);n=(e=[e.substr(0,r),i,e.substr(n)])[1],e[1]=t?n?n+"&"+t:t:n,e=e[0]+(e[1]?"?"+e[1]:"")+e[2]}return e}return Vt(e,t,n),e}function Bn(e){this.f=[],this.F=new sn,this.ga=this.pa=this.B=this.ha=this.a=this.I=this.j=this.V=this.g=this.J=this.i=null,this.Qa=this.P=0,this.Oa=!!c("internalChannelParams.failFast",e),this.ia=this.w=this.s=this.l=this.h=this.c=null,this.oa=!0,this.m=this.ra=this.O=-1,this.S=this.v=this.A=0,this.Na=c("internalChannelParams.baseRetryDelayMs",e)||5e3,this.Ra=c("internalChannelParams.retryDelaySeedMs",e)||1e4,this.Pa=c("internalChannelParams.forwardChannelMaxRetries",e)||2,this.qa=c("internalChannelParams.forwardChannelRequestTimeoutMs",e)||2e4,this.Ka=e&&e.zb||void 0,this.D=void 0,this.R=e&&e.supportsCrossDomainXhr||!1,this.H="",this.b=new hn(e&&e.concurrentRequestLimit),this.ja=new Tn,this.o=!e||void 0===e.backgroundChannelTest||e.backgroundChannelTest,(this.W=e&&e.fastHandshake||!1)&&!this.o&&(this.o=!0),e&&e.forceLongPolling&&(this.oa=!1),this.fa=void 0}function Fn(e){if(Vn(e),3==e.u){var t=e.P++,n=Ot(e.B);Vt(n,"SID",e.H),Vt(n,"RID",t),Vt(n,"TYPE","terminate"),zn(e,n),(t=new ft(e,t,void 0)).F=2,t.f=Ut(Ot(n)),n=!1,a.navigator&&a.navigator.sendBeacon&&(n=a.navigator.sendBeacon(t.f.toString(),"")),!n&&a.Image&&((new Image).src=t.f,n=!0),n||(t.a=t.g.$(null),t.a.ca(t.f)),t.v=T(),St(t)}$n(e)}function Vn(e){e.w&&(e.w.abort(),e.w=null),e.a&&(e.a.cancel(),e.a=null),e.l&&(a.clearTimeout(e.l),e.l=null),Yn(e),e.b.cancel(),e.h&&(u(e.h)&&a.clearTimeout(e.h),e.h=null)}function qn(e,t){e.f.push(new ln(e.Qa++,t)),3==e.u&&Un(e)}function Un(e){pn(e.b)||e.h||(e.h=!0,Re(e.Ha,e),e.A=0)}function Wn(e,t){var n;n=t?t.W:e.P++;var r=Ot(e.B);Vt(r,"SID",e.H),Vt(r,"RID",n),Vt(r,"AID",e.O),zn(e,r),e.g&&e.i&&jn(r,e.g,e.i),n=new ft(e,n,e.A+1),null===e.g&&(n.h=e.i),t&&(e.f=t.j.concat(e.f)),t=Kn(e,n,1e3),n.setTimeout(Math.round(.5*e.qa)+Math.round(.5*e.qa*Math.random())),yn(e.b,n),yt(n,r,t)}function zn(e,t){e.c&&kt({},(function(e,n){Vt(t,n,e)}))}function Kn(e,t,n){n=Math.min(e.f.length,n);var r=e.c?b(e.c.Sa,e.c,e):null;e:for(var i=e.f,o=-1;;){var a=["count="+n];-1==o?0<n?(o=i[0].b,a.push("ofs="+o)):o=0:a.push("ofs="+o);for(var s=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),s=!1;else try{Sn(l,a,"req"+c+"_")}catch(e){r&&r(l)}}if(s){r=a.join("&");break e}}return e=e.f.splice(0,n),t.j=e,r}function Gn(e){e.a||e.l||(e.S=1,Re(e.Ga,e),e.v=0)}function Qn(e){return!(e.a||e.l||3<=e.v)&&(e.S++,e.l=nt(b(e.Ga,e),Jn(e,e.v)),e.v++,!0)}function Hn(e,t,n){var r=t.l;r&&fn(e.b,r),e.ia=e.oa&&n,e.m=t.c,e.B=Zn(e,null,e.ha),Un(e)}function Yn(e){null!=e.s&&(a.clearTimeout(e.s),e.s=null)}function Jn(e,t){var n=e.Na+Math.floor(Math.random()*e.Ra);return e.ma()||(n*=2),n*t}function Xn(e,t){if(2==t){var n=null;e.c&&(n=null);var r=b(e.eb,e);n||(n=new Pt("//www.google.com/images/cleardot.gif"),a.location&&"http"==a.location.protocol||Rt(n,"https"),Ut(n)),function(e,t){var n=new Ye;if(a.Image){var r=new Image;r.onload=w(In,n,r,"TestLoadImage: loaded",!0,t),r.onerror=w(In,n,r,"TestLoadImage: error",!1,t),r.onabort=w(In,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=w(In,n,r,"TestLoadImage: timeout",!1,t),a.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else et(2);e.u=0,e.c&&e.c.ta(t),$n(e),Vn(e)}function $n(e){e.u=0,e.m=-1,e.c&&(0==bn(e.b).length&&0==e.f.length||(e.b.c.length=0,D(e.f),e.f.length=0),e.c.sa())}function Zn(e,t,n){var r=function(e){return e instanceof Pt?Ot(e):new Pt(e,void 0)}(n);if(""!=r.b)t&&jt(r,t+"."+r.b),Bt(r,r.i);else{var i,o=a.location;i=t?t+"."+o.hostname:o.hostname,r=function(e,t,n,r){var i=new Pt(null,void 0);return e&&Rt(i,e),t&&jt(i,t),n&&Bt(i,n),r&&(i.a=r),i}(o.protocol,i,+o.port,n)}return e.V&&O(e.V,(function(e,t){Vt(r,t,e)})),t=e.j,n=e.I,t&&n&&Vt(r,t,n),Vt(r,"VER",e.wa),zn(e,r),r}function er(){}function tr(){if(W&&!(10<=Number($)))throw Error("Environmental error: no available transport.")}function nr(e,t){_e.call(this),this.a=new Bn(t),this.g=e,this.m=t&&t.testUrl?t.testUrl:function(e){for(var t=arguments[0],n=1;n<arguments.length;n++){var r,i=arguments[n];if(0==i.lastIndexOf("/",0))t=i;else(r=""==t)||(r=0<=(r=t.length-1)&&t.indexOf("/",r)==r),t+=r?i:"/"+i}return t}(this.g,"test"),this.b=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.a.i=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.xa&&(e?e["X-WebChannel-Client-Profile"]=t.xa:e={"X-WebChannel-Client-Profile":t.xa}),this.a.J=e,(e=t&&t.httpHeadersOverwriteParam)&&!k(e)&&(this.a.g=e),this.l=t&&t.supportsCrossDomainXhr||!1,this.h=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!k(t)&&(this.a.j=t,null!==(e=this.b)&&t in e&&(t in(e=this.b)&&delete e[t])),this.f=new or(this)}function rr(e){lt.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.c=e)?(e=this.c,this.data=null!==t&&e in t?t[e]:void 0):this.data=t}else this.data=e}function ir(){ht.call(this),this.status=1}function or(e){this.a=e}(r=Cn.prototype).ca=function(e,t,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.A+"; newUri="+e);t=t?t.toUpperCase():"GET",this.A=e,this.f="",this.h=0,this.v=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?at(this.H):at(ut),this.a.onreadystatechange=b(this.Ea,this);try{this.w=!0,this.a.open(t,String(e),!0),this.w=!1}catch(e){return void An(this,e)}e=n||"";var i=new Nt(this.headers);r&&kt(r,(function(e,t){i.set(t,e)})),r=function(e){e:{for(var t=Nn,n=e.length,r=s(e)?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:s(e)?e.charAt(t):e[t]}(i.K()),n=a.FormData&&e instanceof a.FormData,!(0<=E(kn,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.a.setRequestHeader(t,e)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{Pn(this),0<this.o&&((this.D=function(e){return W&&ee(9)&&u(e.timeout)&&void 0!==e.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=b(this.Ba,this)):this.m=Ue(this.Ba,this.o,this)),this.l=!0,this.a.send(e),this.l=!1}catch(e){An(this,e)}},r.Ba=function(){void 0!==o&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,this.dispatchEvent("timeout"),this.abort(8))},r.abort=function(e){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=e||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Ln(this))},r.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Ln(this,!0)),Cn.N.G.call(this)},r.Ea=function(){this.j||(this.w||this.l||this.g?Mn(this):this.Za())},r.Za=function(){Mn(this)},r.T=function(){try{return 2<On(this)?this.a.status:-1}catch(e){return-1}},r.aa=function(){try{return this.a?this.a.responseText:""}catch(e){return""}},r.Ua=function(e){if(this.a){var t=this.a.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),En(t)}},r.ya=function(){return this.h},r.Xa=function(){return s(this.f)?this.f:String(this.f)},(r=Bn.prototype).wa=8,r.u=1,r.Ca=function(){return 0==this.u},r.Ha=function(e){if(this.h)if(this.h=null,1==this.u){if(!e){this.P=Math.floor(1e5*Math.random());var t,n=new ft(this,e=this.P++,void 0),r=this.i;if(this.J&&(r?B(r=R(r),this.J):r=this.J),null===this.g&&(n.h=r),this.W)e:{for(var i=t=0;i<this.f.length;i++){var o=this.f[i];if(void 0===(o="__data__"in o.a&&s(o=o.a.__data__)?o.length:void 0))break;if(4096<(t+=o)){t=i;break e}if(4096===t||i===this.f.length-1){t=i+1;break e}}t=1e3}else t=1e3;t=Kn(this,n,t),Vt(i=Ot(this.B),"RID",e),Vt(i,"CVER",22),this.o&&this.j&&Vt(i,"X-HTTP-Session-Id",this.j),zn(this,i),this.g&&r&&jn(i,this.g,r),yn(this.b,n),this.W?(Vt(i,"$req",t),Vt(i,"SID","null"),n.S=!0,yt(n,i,null)):yt(n,i,t),this.u=2}}else 3==this.u&&(e?Wn(this,e):0==this.f.length||pn(this.b)||Wn(this))},r.Ga=function(){this.l=null,this.a=new ft(this,"rpc",this.S),null===this.g&&(this.a.h=this.i),this.a.J=0;var e=Ot(this.pa);Vt(e,"RID","rpc"),Vt(e,"SID",this.H),Vt(e,"CI",this.ia?"0":"1"),Vt(e,"AID",this.O),zn(this,e),Vt(e,"TYPE","xmlhttp"),this.g&&this.i&&jn(e,this.g,this.i),this.D&&this.a.setTimeout(this.D),vt(this.a,e,!0,this.ga)},r.Fa=function(e,t){if(0!=this.u&&(this.a==e||gn(this.b,e)))if(this.m=e.o,!e.s&&gn(this.b,e)&&3==this.u){try{var n=this.ja.a.parse(t)}catch(e){n=null}if(d(n)&&3==n.length){if(0==(t=n)[0]){e:if(!this.l){if(this.a){if(!(this.a.v+3e3<e.v))break e;Yn(this),this.a.cancel(),this.a=null}Qn(this),et(18)}}else this.ra=t[1],0<this.ra-this.O&&37500>t[2]&&this.ia&&0==this.v&&!this.s&&(this.s=nt(b(this.Ya,this),6e3));if(1>=mn(this.b)&&this.fa){try{this.fa()}catch(e){}this.fa=void 0}}else Xn(this,11)}else if((e.s||this.a==e)&&Yn(this),!k(t))for(t=n=this.ja.a.parse(t),n=0;n<t.length;n++){var r=t[n];if(this.O=r[0],r=r[1],2==this.u)if("c"==r[0]){this.H=r[1],this.ga=r[2];var i=r[3];null!=i&&(this.wa=i),null!=(r=r[5])&&u(r)&&0<r&&(this.D=1.5*r),this.o&&(r=e.a)&&((i=Rn(r,"X-Client-Wire-Protocol"))&&fn(this.b,i),this.j&&(r=Rn(r,"X-HTTP-Session-Id")))&&(this.I=r,Vt(this.B,this.j,r)),this.u=3,this.c&&this.c.va(),r=e,this.pa=Zn(this,this.Y()?this.ga:null,this.ha),r.s?(vn(this.b,r),(i=this.D)&&r.setTimeout(i),r.i&&(Et(r),St(r)),this.a=r):Gn(this),0<this.f.length&&Un(this)}else"stop"!=r[0]&&"close"!=r[0]||Xn(this,7);else 3==this.u&&("stop"==r[0]||"close"==r[0]?"stop"==r[0]?Xn(this,7):Fn(this):"noop"!=r[0]&&this.c&&this.c.ua(r),this.v=0)}},r.Ya=function(){null!=this.s&&(this.s=null,this.a.cancel(),this.a=null,Qn(this),et(19))},r.na=function(e){var t=null;if(this.a==e){Yn(this),this.a=null;var n=2}else{if(!gn(this.b,e))return;t=e.j,vn(this.b,e),n=1}if(this.m=e.o,0!=this.u)if(e.b)1==n?(t=T()-e.v,Je.dispatchEvent(new tt(Je,e.l?e.l.length:0,t,this.A)),Un(this)):Gn(this);else{var r=e.c;if(3==r||0==r&&0<this.m||!(1==n&&function(e,t){return!(mn(e.b)>=e.b.f-(e.h?1:0))&&(e.h?(e.f=t.j.concat(e.f),!0):!(1==e.u||2==e.u||e.A>=(e.Oa?0:e.Pa))&&(e.h=nt(b(e.Ha,e,t),Jn(e,e.A)),e.A++,!0))}(this,e)||2==n&&Qn(this)))switch(t&&0<t.length&&(e=this.b,e.c=e.c.concat(t)),r){case 1:Xn(this,5);break;case 4:Xn(this,10);break;case 3:Xn(this,6);break;default:Xn(this,2)}}},r.eb=function(e){et(e?2:1)},r.$=function(e){if(e&&!this.R)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Cn(this.Ka)).F=this.R,e},r.ma=function(){return!!this.c&&!0},r.Y=function(){return this.R},(r=er.prototype).va=function(){},r.ua=function(){},r.ta=function(){},r.sa=function(){},r.Sa=function(){},tr.prototype.a=function(e,t){return new nr(e,t)},S(nr,_e),(r=nr.prototype).addEventListener=function(e,t,n,r){nr.N.addEventListener.call(this,e,t,n,r)},r.removeEventListener=function(e,t,n,r){nr.N.removeEventListener.call(this,e,t,n,r)},r.Va=function(){this.a.c=this.f,this.l&&(this.a.R=!0);var e=this.a,t=this.m,n=this.g,r=this.b||void 0;et(0),e.ha=n,e.V=r||{},e.o&&(e.F.b=[],e.F.a=!1),e.w=new on(e),null===e.g&&(e.w.h=e.i),n=t,e.g&&e.i&&(n=jn(t,e.g,e.i)),(e=e.w).i=n,t=Zn(e.a,null,e.i),et(3),null!=(n=e.a.F.b)?(e.f=n[0],e.M=1,an(e)):(qt(t,"MODE","init"),!e.a.o&&e.a.j&&qt(t,"X-HTTP-Session-Id",e.a.j),e.b=new ft(e,void 0,void 0),e.b.h=e.h,vt(e.b,t,!1,null),e.M=0)},r.close=function(){Fn(this.a)},r.Wa=function(e){if(s(e)){var t={};t.__data__=e,qn(this.a,t)}else this.h?((t={}).__data__=ke(e),qn(this.a,t)):qn(this.a,e)},r.G=function(){this.a.c=null,delete this.f,Fn(this.a),delete this.a,nr.N.G.call(this)},S(rr,lt),S(ir,ht),S(or,er),or.prototype.va=function(){this.a.dispatchEvent("a")},or.prototype.ua=function(e){this.a.dispatchEvent(new rr(e))},or.prototype.ta=function(e){this.a.dispatchEvent(new ir(e))},or.prototype.sa=function(){this.a.dispatchEvent("b")};var ar=w((function(e,t){function n(){}n.prototype=e.prototype;var r=new n;return e.apply(r,Array.prototype.slice.call(arguments,1)),r}),tr);tr.prototype.createWebChannel=tr.prototype.a,nr.prototype.send=nr.prototype.Wa,nr.prototype.open=nr.prototype.Va,nr.prototype.close=nr.prototype.close,rt.NO_ERROR=0,rt.TIMEOUT=8,rt.HTTP_ERROR=6,it.COMPLETE="complete",st.EventType=ct,ct.OPEN="a",ct.CLOSE="b",ct.ERROR="c",ct.MESSAGE="d",_e.prototype.listen=_e.prototype.za,Cn.prototype.listenOnce=Cn.prototype.Aa,Cn.prototype.getLastError=Cn.prototype.Xa,Cn.prototype.getLastErrorCode=Cn.prototype.ya,Cn.prototype.getStatus=Cn.prototype.T,Cn.prototype.getResponseJson=Cn.prototype.Ua,Cn.prototype.getResponseText=Cn.prototype.aa,Cn.prototype.send=Cn.prototype.ca;var sr={createWebChannelTransport:ar,ErrorCode:rt,EventType:it,WebChannel:st,XhrIo:Cn},ur=sr.createWebChannelTransport,cr=sr.ErrorCode,lr=sr.EventType,hr=sr.WebChannel,dr=sr.XhrIo;t.default=sr}.call(this,n(5))},function(e,t,n){"use strict";n.r(t);var r,i;n(8);!function(e){e[e.Nothing=0]="Nothing",e[e.Intersect=1]="Intersect",e[e.Overlap=2]="Overlap"}(r||(r={})),function(e){e[e.Disjoint=0]="Disjoint",e[e.Match=1]="Match",e[e.Intersect=2]="Intersect",e[e.AInsideB=3]="AInsideB",e[e.BInsideA=4]="BInsideA",e[e.Tangent=5]="Tangent"}(i||(i={}));var o,a=function(e,t,n){void 0===t&&(t=void 0),void 0===n&&(n=void 0),this.type=e,this.intersection=t,this.overlap=n},s=function(){function e(){}return e.ptsDistance=function(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))},e.lineMiddlePt=function(e){return{x:(e[0].x+e[1].x)/2,y:(e[0].y+e[1].y)/2}},e.areLinesEqual=function(e,t){return this.arePointsEqual(e[0],t[0])&&this.arePointsEqual(e[1],t[1])||this.arePointsEqual(e[0],t[1])&&this.arePointsEqual(e[1],t[0])},e.arePointsEqual=function(e,t){return e.x===t.x&&e.y===t.y},e}(),u=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r},c=function(){function e(){}return e.readInputFile=function(e){return new Promise((function(t,n){var r=new FileReader;r.readAsText(e,"UTF-8"),r.onload=function(){t(r.result)},r.onerror=function(){console.log("Error reading the file.")}}))},e.getUrlParams=function(e){var t={},n=document.createElement("a");n.href=e;for(var r=n.search.substring(1).split("&"),i=0;i<r.length;i++){var o=r[i].split("=");t[o[0]]=decodeURIComponent(o[1])}return t},e.emptyNode=function(e){for(;e.firstChild&&e.removeChild(e.firstChild););},e.createBBox=function(e,t,n){void 0===t&&(t=5),void 0===n&&(n=5);var r=document.createElementNS("http://www.w3.org/2000/svg","rect");return r.setAttribute("x",(e.getBBox().x-t).toString()),r.setAttribute("y",(e.getBBox().y-t).toString()),r.setAttribute("width",(e.getBBox().width+2*t).toString()),r.setAttribute("height",(e.getBBox().height+2*t).toString()),r.setAttribute("rx",n.toString()),r.setAttribute("ry",n.toString()),r},e.createBBox2=function(e,t){return void 0===t&&(t=0),0!==t?{x:e.getBBox().x-t,y:e.getBBox().y-t,width:e.getBBox().width+2*t,height:e.getBBox().height+2*t}:e.getBBox()},e.getRelativeCoords=function(e,t){var n=t.createSVGPoint();return n.x=e.clientX,n.y=e.clientY,n.matrixTransform(t.getScreenCTM().inverse())},e.uuidv4=function(){return(1e7.toString()+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(function(e){return(Number(e)^crypto.getRandomValues(new Uint8Array(1))[0]&15>>Number(e)/4).toString(16)}))},e.getRectSegments=function(e){var t={x:e.x,y:e.y},n={x:e.x+e.width,y:e.y},r={x:e.x+e.width,y:e.y+e.height},i={x:e.x,y:e.y+e.height};return[[t,n],[n,r],[r,i],[i,t]]},e.isPtInRect=function(e,t,n){return void 0===n&&(n=!0),n?t.x>=e.x&&t.x<=e.x+e.width&&t.y>=e.y&&t.y<=e.y+e.height:t.x>e.x&&t.x<e.x+e.width&&t.y>e.y&&t.y<e.y+e.height},e.isLineInRect=function(e,t){return this.isPtInRect(t,e[0])&&this.isPtInRect(t,e[1])},e.isNumBetween=function(e,t,n,r){return void 0===r&&(r=!0),r?e>=Math.min(t,n)&&e<=Math.max(t,n):e>Math.min(t,n)&&e<Math.max(t,n)},e.isLineHorizontal=function(e){return e[0].y===e[1].y},e.isLineVertical=function(e){return e[0].x===e[1].x},e.sortPtsByDistance=function(e,t,n){void 0===t&&(t=void 0),void 0===n&&(n=!1);var r=void 0!==t?t:e[0],i=e.sort((function(e,t){return s.ptsDistance(r,e)<s.ptsDistance(r,t)?-1:s.ptsDistance(r,e)>s.ptsDistance(r,t)?1:0}));return void 0!==t&&!0===n?u([t],i):i},e.linesBetweenPts=function(e){if(e.length>1){for(var t=[],n=0;n<e.length-1;n++)t.push([e[n],e[n+1]]);return t}return null},e.rectRectRelationship=function(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height?i.Match:this.isPtInRect(t,{x:e.x,y:e.y})&&this.isPtInRect(t,{x:e.x+e.width,y:e.y})&&this.isPtInRect(t,{x:e.x+e.width,y:e.y+e.height})&&this.isPtInRect(t,{x:e.x,y:e.y+e.height})?i.AInsideB:this.isPtInRect(e,{x:t.x,y:t.y})&&this.isPtInRect(e,{x:t.x+t.width,y:t.y})&&this.isPtInRect(e,{x:t.x+t.width,y:t.y+t.height})&&this.isPtInRect(e,{x:t.x,y:t.y+t.height})?i.BInsideA:this.isPtInRect(t,{x:e.x,y:e.y},!1)||this.isPtInRect(t,{x:e.x+e.width,y:e.y},!1)||this.isPtInRect(t,{x:e.x+e.width,y:e.y+e.height},!1)||this.isPtInRect(t,{x:e.x,y:e.y+e.height},!1)||this.isPtInRect(e,{x:t.x,y:t.y},!1)||this.isPtInRect(e,{x:t.x+t.width,y:t.y},!1)||this.isPtInRect(e,{x:t.x+t.width,y:t.y+t.height},!1)||this.isPtInRect(e,{x:t.x,y:t.y+t.height},!1)||this.isNumBetween(e.y,t.y,t.y+t.height,!1)&&e.x<=t.x&&e.x+e.width>=t.x+t.width||this.isNumBetween(t.y,e.y,e.y+e.height,!1)&&t.x<=e.x&&t.x+t.width>=e.x+e.width?i.Intersect:this.isPtInRect(t,{x:e.x,y:e.y})||this.isPtInRect(t,{x:e.x+e.width,y:e.y})||this.isPtInRect(t,{x:e.x+e.width,y:e.y+e.height})||this.isPtInRect(t,{x:e.x,y:e.y+e.height})||this.isPtInRect(e,{x:t.x,y:t.y})||this.isPtInRect(e,{x:t.x+t.width,y:t.y})||this.isPtInRect(e,{x:t.x+t.width,y:t.y+t.height})||this.isPtInRect(e,{x:t.x,y:t.y+t.height})?i.Tangent:i.Disjoint},e.getOrthoLineLineRelationship=function(e,t){if(this.isLineHorizontal(e)&&this.isLineVertical(t))return this.isNumBetween(e[0].y,t[0].y,t[1].y)&&this.isNumBetween(t[0].x,e[0].x,e[1].x)?new a(r.Intersect,{x:t[0].x,y:e[0].y}):new a(r.Nothing);if(this.isLineHorizontal(t)&&this.isLineVertical(e))return this.isNumBetween(t[0].y,e[0].y,e[1].y)&&this.isNumBetween(e[0].x,t[0].x,t[1].x)?new a(r.Intersect,{x:e[0].x,y:t[0].y}):new a(r.Nothing);if(this.isLineHorizontal(e)&&this.isLineHorizontal(t)){if(e[0].y===t[0].y){var n=Math.min(Math.max(e[0].x,e[1].x),Math.max(t[0].x,t[1].x)),i=Math.max(Math.min(e[0].x,e[1].x),Math.min(t[0].x,t[1].x));return n>=i?new a(r.Overlap,void 0,[{x:n,y:e[0].y},{x:i,y:e[0].y}]):new a(r.Nothing)}return new a(r.Nothing)}if(this.isLineVertical(e)&&this.isLineVertical(t)){if(e[0].x===t[0].x){var o=Math.min(Math.max(e[0].y,e[1].y),Math.max(t[0].y,t[1].y)),s=Math.max(Math.min(e[0].y,e[1].y),Math.min(t[0].y,t[1].y));return o>=s?new a(r.Overlap,void 0,[{x:e[0].x,y:o},{x:e[0].x,y:s}]):new a(r.Nothing)}return new a(r.Nothing)}return new a(r.Nothing)},e.rectanglesSilhouette=function(e){for(var t=[],n=0;n<e.length;n++)t.push(this.getRectSegments(e[n]));var o=[],a=[];for(n=0;n<e.length;n++){for(var c=this.getRectSegments(e[n]),l=function(o){if(o!=n){var l=[],d=h.rectRectRelationship(e[o],e[n]);if(d===i.BInsideA||n>o&&d===i.Match)return c.length=0,"break";if(d===i.Intersect||d===i.Tangent){for(var f=[],p=0;p<c.length;p++){var m=[],g=c[p];if(!h.isLineInRect(g,e[o])){for(var y=0;y<t[o].length;y++){var v=t[o][y],b=h.getOrthoLineLineRelationship(g,v);b.type===r.Intersect?b.intersection&&m.push(b.intersection):b.type===r.Overlap&&b.overlap&&f.push(b.overlap)}if(m.length>0)for(var w=h.sortPtsByDistance(m,c[p][0],!0),T=h.linesBetweenPts(u(w,[c[p][1]])),S=0;S<T.length;S++)h.isPtInRect(e[o],s.lineMiddlePt(T[S]))||l.push(T[S]);else l.push(c[p])}}if(f.length>0&&d!==i.Tangent)for(var I=function(e){a.find((function(t){return s.areLinesEqual(t,f[e])}))||a.push(f[e])},E=0;E<f.length;E++)I(E);c=l}}},h=this,d=0;d<e.length;d++){if("break"===l(d))break}c.length>0&&o.push.apply(o,c)}return a.length>0&&o.push.apply(o,a),o},e.svgPathFromLines=function(e){for(var t=document.createElementNS("http://www.w3.org/2000/svg","path"),n=[],r=0;r<e.length;r++)n.push("M"+e[r][0].x.toFixed(3)+","+e[r][0].y.toFixed(3)+" "+e[r][1].x.toFixed(3)+","+e[r][1].y.toFixed(3));return t.setAttribute("d",n.join("")),t},e}(),l=function(){function e(e,t){this.SVGWIDTH=500,this.ZOOMSPEED=1.25,this.allowPanning=!1,this.name=e,this.id=t,this.content,this.zoom=this.zoom.bind(this)}return e.prototype.setContent=function(e){var t=this;this.content=document.createElement("div");var n=new DOMParser;this.svgCanvas=n.parseFromString(e,"image/svg+xml").documentElement,this.content.appendChild(this.svgCanvas),this.svgCanvas.addEventListener("wheel",this.zoom),this.svgCanvas.addEventListener("mousedown",(function(e){2===e.buttons&&(t.allowPanning=!0,t.svgInitialClick=c.getRelativeCoords(e,t.svgCanvas),t.prevViewBox=t.svgCanvas.viewBox.baseVal)})),this.svgCanvas.addEventListener("mouseup",(function(){return t.allowPanning=!1})),this.svgCanvas.addEventListener("mouseleave",(function(){return t.allowPanning=!1})),this.svgCanvas.addEventListener("mousemove",(function(e){2===e.buttons&&!1===t.allowPanning&&(t.allowPanning=!0,t.svgInitialClick=c.getRelativeCoords(e,t.svgCanvas),t.prevViewBox=t.svgCanvas.viewBox.baseVal),t.allowPanning&&(t.mousePosition=c.getRelativeCoords(e,t.svgCanvas),t.svgCanvas.viewBox.baseVal.x=-t.mousePosition.x-(-t.svgInitialClick.x-t.prevViewBox.x),t.svgCanvas.viewBox.baseVal.y=-t.mousePosition.y-(-t.svgInitialClick.y-t.prevViewBox.y))}))},e.prototype.createCommentsGroup=function(){this.commentsGroup=document.createElementNS("http://www.w3.org/2000/svg","g"),this.svgCanvas.appendChild(this.commentsGroup)},e.prototype.zoom=function(e){e.preventDefault(),this.mousePosition=c.getRelativeCoords(e,this.svgCanvas);var t=e.deltaY>0?this.ZOOMSPEED:1/this.ZOOMSPEED,n=(this.mousePosition.x-this.svgCanvas.viewBox.baseVal.x)/this.svgCanvas.viewBox.baseVal.width,r=this.svgCanvas.viewBox.baseVal.width*t-this.svgCanvas.viewBox.baseVal.width,i=(this.mousePosition.y-this.svgCanvas.viewBox.baseVal.y)/this.svgCanvas.viewBox.baseVal.height,o=this.svgCanvas.viewBox.baseVal.height*t-this.svgCanvas.viewBox.baseVal.height;(e.deltaY>0?this.svgCanvas.viewBox.baseVal.width<10*this.SVGWIDTH:this.svgCanvas.viewBox.baseVal.width>this.SVGWIDTH/10)&&(this.svgCanvas.viewBox.baseVal.x-=r*n,this.svgCanvas.viewBox.baseVal.width+=r,this.svgCanvas.viewBox.baseVal.y-=o*i,this.svgCanvas.viewBox.baseVal.height+=o)},e}(),h=class{static listFiles(e,t){const n=[];e.name&&n.push("name='"+e.name+"'"),e.parentId&&n.push("'"+e.parentId+"' in parents"),!1===e.trashed&&n.push("trashed=false"),e.excludeName&&n.push("not name contains '"+e.excludeName+"'"),e.onlyFolder&&n.push("mimeType='application/vnd.google-apps.folder'");let r=gapi.client.drive.files.list({pageSize:15,fields:`nextPageToken, files(id, name${t?", "+t:""})`,q:n.join(" and ")});return r.then(e=>{const t=e.result.files;t&&t.length>0?console.log(t):console.log("No files found with this query:",n.join(" and "))},e=>{console.error(e.body)}),r}static getFileContent(e){let t=gapi.client.drive.files.get({fileId:e,alt:"media"});return t.then(t=>{200===t.status&&console.log("File with id "+e+" fetched successfully.")},e=>{console.error(e.body)}),t}static getFileData(e,t){let n=gapi.client.drive.files.get({fileId:e,fields:t});return n.then(e=>{200===e.status&&console.log("File data fetched succesfully.")},e=>{console.error(e)}),n}static createFolder(e,t="drive"){const n={name:e,mimeType:"application/vnd.google-apps.folder",parents:"drive"!==t?[t]:[]},r=gapi.client.request({path:"https://www.googleapis.com/drive/v3/files/",method:"POST",body:n});return r.then(t=>{console.log(e+" folder created. Id: "+JSON.parse(t.body).id)}),r}static uploadFile(e,t,n,r){const i=new Blob([e],{type:t}),o={name:n,mimeType:t,parents:[r]},a=gapi.auth.getToken().access_token,s=new FormData;s.append("metadata",new Blob([JSON.stringify(o)],{type:"application/json"})),s.append("file",i);let u=fetch("https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart&fields=id",{method:"POST",headers:new Headers({Authorization:"Bearer "+a}),body:s});return u.then(e=>{!0===e.ok&&200===e.status&&console.log("Upload of "+n+" successful.")},e=>{console.error(e)}),u}static updateFileContent(e,t,n){const r=new Blob([e],{type:t}),i={mimeType:t},o=gapi.auth.getToken().access_token,a=new FormData;a.append("metadata",new Blob([JSON.stringify(i)],{type:"application/json"})),a.append("file",r);let s=fetch(`https://www.googleapis.com/upload/drive/v3/files/${n}?uploadType=multipart`,{method:"PATCH",headers:new Headers({Authorization:"Bearer "+o}),body:a});return s.then(e=>{!0===e.ok&&200===e.status&&console.log("Update successful.")},e=>{console.error(e)}),s}static renameFile(e,t){const n=gapi.client.drive.files.update({fileId:e,name:t,uploadType:"media"});return n.then(e=>{},t=>{console.error("Error renaming file: "+e,t)}),n}static moveFileV2(e,t){const n=gapi.client.request({path:"https://www.googleapis.com/drive/v2/files/"+e+"/parents",method:"POST",headers:{"Content-Type":"application/json"},body:{id:t}});return n.then(e=>{console.log(e)},e=>{console.log(e)}),n}static moveFile(e,t){const n={id:t};gapi.client.drive.parents.insert({fileId:e,resource:n}).execute((function(e){}))}static deleteFile(e){let t=gapi.client.drive.files.delete({fileId:e});return t.then(e=>{console.log(e)},e=>{console.log(e)}),t}static shareFile(e,t,n=0){return new Promise(e=>setTimeout(e,n)).then(n=>{const r=gapi.client.request({path:`https://www.googleapis.com/drive/v3/files/${e}/permissions?sendNotificationEmail=false&fields=id,displayName,emailAddress,photoLink,role`,method:"POST",headers:{"Content-Type":"application/json"},body:{role:"writer",type:"user",emailAddress:t}});return r.then(e=>{console.log(e)}),r})}static stopSharingFile(e,t){const n=gapi.client.request({path:"https://www.googleapis.com/drive/v3/files/"+e+"/permissions/"+t,method:"DELETE",headers:{"Content-Type":"application/json"}});return n.then(e=>{console.log(e)}),n}static getProjectTeamData(e){const t=gapi.client.request({path:`https://www.googleapis.com/drive/v3/files/${e}/permissions?fields=permissions(id,displayName,emailAddress,role,photoLink)`,method:"GET",headers:{"Content-Type":"application/json"}});return t.then(e=>{console.log(e)},e=>{console.log(e)}),t}static getUserInfo(){const e=gapi.client.drive.about.get({fields:"user"});return e.then(e=>{console.log(JSON.parse(e.body).user)}),e}static sendSharingProjectEmail(e,t,n,r){const i=fetch("https://us-central1-testgdproject-1570036439931.cloudfunctions.net/sendMail",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sharer:e,recipients:t,projectName:n,projectId:r})});return i.then(e=>{console.log(e)},e=>{console.error(e)}),i}static sendNotification(e,t,n,r,i,o){const a=fetch("https://us-central1-testgdproject-1570036439931.cloudfunctions.net/sendPushNotification",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({emails:e,author:t,photoLink:n,text:r,projectName:i,projectId:o})});return a.then(e=>{console.log(e)},e=>{console.error(e)}),a}static async createProject(e,t,n){let r;const i=await c.readInputFile(e),o=JSON.parse(i);if(console.log("File contents:",o),n.name=o.projectInfo.title,!t.appMainFolderId){const e=(await this.listFiles({name:"VAviewerData",onlyFolder:!0,trashed:!1})).result.files;if(e&&e.length>0)t.appMainFolderId=e[0].id;else{const e=await this.createFolder("VAviewerData");t.appMainFolderId=JSON.parse(e.body).id,console.log("No appFolder found, one is going to be created.")}}let a;if(void 0!==t.projectsData&&t.projectsData.find(e=>e.name===o.projectInfo.title))t.projectsData.find(e=>e.name===o.projectInfo.title)?r="No project was created because there is already a project with this name.":console.error("Unknown error while attempting to create the project folder.");else try{const e=await this.createFolder(o.projectInfo.title,t.appMainFolderId);a=JSON.parse(e.body).id,n.id=a;const r={id:a,name:o.projectInfo.title};void 0===t.projectsData?t.projectsData=[r]:t.projectsData.find(e=>e.name===o.projectInfo.title)||t.projectsData.push(r)}catch(e){console.log(e),n.id="temporal",r=JSON.parse(e.body).error.message}if(a&&o.drawings){const e=await this.createFolder("drawings",a),r=JSON.parse(e.body).id;t.projectsData[t.projectsData.length-1].drawingsFolderId=r;const i=[];n.drawings=[];for(const e in o.drawings){const t=this.uploadFile(o.drawings[e],"image/svg+xml",e.concat(".svg"),r);i.push(t);const a=new l(e,void 0);a.setContent(o.drawings[e]),n.drawings.push(a)}const s=new TextDecoder("utf-8");await Promise.all(i).then(e=>{e.forEach((e,t)=>{!0===e.ok&&200===e.status&&e.body.getReader().read().then(({value:e,done:r})=>{const i=JSON.parse(s.decode(e)).id;n.drawings[t].id=i,console.log("Drawing with id "+i+" uploaded successfully.")})})},e=>{console.error(e)})}if(a&&o.elementsData){const e=await this.createFolder("elementsData",a),r=JSON.parse(e.body).id;t.projectsData[t.projectsData.length-1].elementsDataFolderId=r,n.elementsData=o.elementsData;const i=[];for(const e in o.elementsData){const t=this.uploadFile(JSON.stringify(o.elementsData[e]),"application/json",e.concat(".json"),r);i.push(t)}await Promise.all(i).then(e=>{console.log("ElementsData files uploaded successfully.")},e=>{console.error(e)})}return a?(console.log("Upload successful. Uploaded "+Object.keys(o.drawings).length+" drawings."),{id:a,name:o.projectInfo.title}):Promise.reject(new Error("Project upload failed. "+r))}static async listProjectItems(e){if(!e.appMainFolderId){const t=(await this.listFiles({name:"VAviewerData",onlyFolder:!0,trashed:!1})).result.files;if(!(t&&t.length>0))return console.log("No appFolder found."),Promise.reject(new Error("No appFolder found."));e.appMainFolderId=t[0].id}const t=await this.listFiles({parentId:e.appMainFolderId,onlyFolder:!0,excludeName:"appSettings",trashed:!1},"shared, permissions");let n;const r=t.result.files;r&&r.length>0&&(void 0===e.projectsData?(n=r,e.projectsData=n):Array.isArray(e.projectsData)&&(n=t.result.files.filter(t=>void 0===e.projectsData.find(e=>e.id===t.id))).forEach(t=>{e.projectsData.push(t)})),console.assert(e.projectsData.length>0,"There are no project folders.");const i=(await this.listFiles({parentId:e.appMainFolderId,name:"appSettings",onlyFolder:!0})).result.files;i&&i.length>0?e.appSettingsFolderId=i[0].id:console.log("No settings folder found.");const o=(await this.listFiles({parentId:e.appSettingsFolderId,name:"projectsThumbs",onlyFolder:!0})).result.files;o&&o.length>0?e.thumbsFolderId=o[0].id:console.log("No thumbs folder found.");const a=(await this.listFiles({parentId:e.thumbsFolderId})).result.files;return e.projectsData.forEach(e=>{const t=a.find(t=>e.id===t.name.replace(".jpg",""));t&&(e.thumbId=t.id)}),console.assert(a.length>0,"There are no thumbnails."),n}static async fetchProject(e,t){let n;if(console.log("Fetching project: "+e),void 0===t.projectsData){const r=await this.getFileData(e,"name, trashed");JSON.parse(r.body).trashed||(t.projectsData=[{id:e,name:JSON.parse(r.body).name}],n=0)}else"temporal"!==e&&(n=t.projectsData.findIndex(t=>t.id===e));if(n>=0&&!t.projectsData[n].permissions)try{const r=(await this.getProjectTeamData(e)).result.permissions;r&&r.length>0?t.projectsData[n].permissions=r:console.log("No project team members found.")}catch(e){console.log("Error fetching the team members data.")}if(n>=0&&!t.projectsData[n].projSettings){const r=(await this.listFiles({parentId:e,name:"projectSettings.json"})).result.files;if(r&&r.length>0){const e=await this.getFileContent(r[0].id);t.projectsData[n].projSettings=e.body}else console.log("No projectSettings.json found.")}if(n>=0&&!t.projectsData[n].drawings){const r=(await this.listFiles({parentId:e,onlyFolder:!0,name:"drawings"})).result.files;if(r&&r.length>0){const e=await this.listFiles({parentId:r[0].id,trashed:!1});t.projectsData[n].drawings=[],e.result.files.forEach(e=>{"drawingsStyles.css"===e.name?t.projectsData[n].drawingsStylesId=e.id:t.projectsData[n].drawings.push(new l(e.name.replace(/.svg$/,""),e.id))})}else console.log("No drawings folder found.")}if(n>=0&&!t.projectsData[n].elementsData){const r=(await this.listFiles({parentId:e,onlyFolder:!0,name:"elementsData"})).result.files;if(r&&r.length>0){const e=await this.listFiles({parentId:r[0].id,trashed:!1});t.projectsData[n].elementsData=e.result.files}else console.log("No elementsData folder found.")}if(n>=0&&!t.projectsData[n].comments){const r=(await this.listFiles({parentId:e,name:"comments.json",trashed:!1})).result.files;if(r&&r.length>0){t.projectsData[n].commentsFileId=r[0].id;const e=await this.getFileContent(r[0].id);t.projectsData[n].comments=JSON.parse(e.body)}else console.log("No comments.json file found.")}if(n>=0&&!t.projectsData[n].images){const r=(await this.listFiles({parentId:e,onlyFolder:!0,name:"images"})).result.files;if(r&&r.length>0){const e=await this.listFiles({parentId:r[0].id});t.projectsData[n].images=e.result.files}else console.log("No images folder found.")}return n>=0?(console.log("Project resources fetched succesfully."),t.projectsData[n]):Promise.reject(new Error("Project resources could not be fetched."))}},d=function(){function e(e,t,n){var r;void 0===n&&(n=[]),this.elementsIds=[],this.representations=[],(r=this.elementsIds).push.apply(r,e),this.content=t,this.mentions=n,this.id="c-"+c.uuidv4()}return e.prototype.createRepresentation=function(e,t){for(var n=[],r=0;r<t.length;r++)n.push(c.createBBox2(t[r],15));var i=c.rectanglesSilhouette(n),o=c.svgPathFromLines(i);o.setAttribute("style","fill:none;stroke:#e22a2a;stroke-width:8px;stroke-dasharray:30;stroke-linecap:round;"),o.dataset.id=this.id,e.appendChild(o),this.representations.push(o)},e}();!function(e){e[e.Right=0]="Right",e[e.Bottom=1]="Bottom"}(o||(o={}));var f,p=function(){function e(e,t){var n=this;this.sections=[],this.panelWidth=250,this.panelHeight=200,this.resizingWidth=!1,this.resizingHeight=!1,this.panelsStorage=e,this.panelContainer=document.createElement("div"),this.panelContainer.classList.add("mainPanel","right"),this.panelGrip=document.createElement("div"),this.panelGrip.classList.add("panel-grip"),this.panelContainer.appendChild(this.panelGrip),this.panelContent=document.createElement("div"),this.panelContent.classList.add("panel-content"),this.panelHeader=document.createElement("div"),this.panelHeader.classList.add("panel-header"),this.panelBody=document.createElement("div"),this.panelBody.classList.add("panel-body"),this.panelFooter=document.createElement("div"),this.panelFooter.classList.add("panel-footer"),this.panelContent.appendChild(this.panelHeader),this.panelContent.appendChild(this.panelBody),this.panelContent.appendChild(this.panelFooter),this.panelContainer.appendChild(this.panelContent),t.workspaceContainer.addEventListener("mousemove",(function(e){n.resizingWidth?n.resizeWidth(e):n.resizingHeight&&n.resizeHeight(e)})),t.workspaceContainer.addEventListener("mouseup",(function(){n.resizingWidth=!1,n.resizingHeight=!1})),this.setActive=this.setActive.bind(this),this.panelHeader.onclick=function(e){var t=e.target.closest("[data-btn]");t&&!t.classList.contains("active")&&n.setActive(t.innerText)},this.mediumBreakpoint=window.matchMedia("(max-width: 700px)"),this.panelPositon=this.panelPositon.bind(this),this.mediumBreakpoint.addListener(this.panelPositon),this.panelPositon(this.mediumBreakpoint),this.panelContainer.style.setProperty("--width",this.panelWidth+"px"),this.panelContainer.style.setProperty("--height",this.panelHeight+"px"),this.panelGrip.onmousedown=function(e){n.panelSide===o.Right?(n.resizingWidth=!0,n.resizingHeight=!1,n.startX=e.pageX,n.startWidth=n.panelWidth):n.panelSide===o.Bottom&&(n.resizingHeight=!0,n.resizingWidth=!1,n.startY=e.pageY,n.startHeight=n.panelHeight)},t.workspaceContainer.appendChild(this.panelContainer)}return e.prototype.resizeWidth=function(e){this.panelWidth=this.startWidth-(e.pageX-this.startX),this.panelContainer.style.setProperty("--width",this.panelWidth+"px")},e.prototype.resizeHeight=function(e){this.panelHeight=this.startHeight-(e.pageY-this.startY),this.panelContainer.style.setProperty("--height",this.panelHeight+"px")},e.prototype.open=function(){this.panelContainer.classList.add("open"),this.panelPositon(this.mediumBreakpoint),this.isOpen=!0},e.prototype.close=function(){this.panelContainer.classList.remove("open"),this.isOpen=!1},e.prototype.dockTo=function(e){e===o.Right?(this.panelSide=e,this.panelContainer.classList.remove("bottom"),this.panelContainer.classList.add("right"),this.panelBody.childNodes.forEach((function(e){e.classList.remove("horizontal"),e.classList.add("vertical")}))):e===o.Bottom&&(this.panelSide=e,this.panelContainer.classList.remove("right"),this.panelContainer.classList.add("bottom"),this.panelBody.childNodes.forEach((function(e){e.classList.remove("vertical"),e.classList.add("horizontal")})))},e.prototype.setActive=function(e){this.activeSection&&this.setInactive(this.activeSection),this.activeSection=this.sections.find((function(t){return t.name===e})),this.activeSection.button.classList.add("active"),this.activeSection.body.classList.remove("hidden")},e.prototype.setInactive=function(e){e.button.classList.remove("active"),e.body.classList.add("hidden")},e.prototype.addSection=function(e,t,n,r){void 0===n&&(n=!0),void 0===r&&(r=!1);var i=this.sections.find((function(t){return t.name===e}));if(void 0===i){var o=document.createElement("span");o.innerText=e,o.dataset.btn="",this.panelHeader.appendChild(o),this.panelBody.appendChild(t),i={name:e,button:o,body:t},r?this.sections.unshift(i):this.sections.push(i)}n?this.setActive(i.name):this.setInactive(i)},e.prototype.addSections=function(e){for(var t=0;t<e.length;t++)this.addSection(e[t].name,e[t].body,0===t)},e.prototype.removeSection=function(e){var t=this.sections.findIndex((function(t){return t.name===e}));if(t>=0){var n=this.sections.splice(t,1)[0];n.button.remove(),this.panelsStorage.appendChild(n.body),this.sections.length>0?this.setActive(this.sections[0].name):this.close()}else console.warn("Impossible to remove the section. No section was found with that name.")},e.prototype.panelPositon=function(e){e.matches?this.dockTo(o.Bottom):this.dockTo(o.Right)},e.prototype.kill=function(){this.panelHeader.onclick=null,this.panelGrip.onmousedown=null},e}(),m=function(){function e(e,t){var n=this;this.formElement=e,this.workspace=t,e.onsubmit=function(e){e.preventDefault()},this.cancelCreateBtn=document.getElementById("commentFormCancel"),this.addCommentBtn=document.getElementById("addCommentBtn"),this.deleteBtn=document.getElementById("commentFormDelete"),this.deleteBtn.onclick=function(){return n.deleteComment(n.commentId)},this.editBtn=document.getElementById("commentFormEdit"),this.editBtn.onclick=function(){return n.enableEditComment(n.commentId)},this.cancelUpdateBtn=document.getElementById("discardChanges"),this.cancelUpdateBtn.onclick=function(){return n.discardUpdate()},this.confirmUpdateBtn=document.getElementById("confirmChanges"),this.textInput=e.elements.namedItem("comment"),this.mentionsSection=e.querySelector(".members"),this.mentionsInput=e.elements.namedItem("members"),this.buttonsModes=e.querySelector(".formButtonsModes")}return e.prototype.showMentionsSection=function(){this.mentionsSection.classList.remove("hidden")},e.prototype.hideMentionsSection=function(){this.mentionsSection.classList.add("hidden")},e.prototype.buttonsVisibilityMode=function(e){for(var t=0;t<this.buttonsModes.children.length;t++)this.buttonsModes.children[t].dataset.mode!==e?this.buttonsModes.children[t].style.display="none":this.buttonsModes.children[t].style.display="flex"},e.prototype.deleteComment=function(e){var t=this.workspace.comments.findIndex((function(t){return t.id===e}));this.workspace.comments[t].representations.forEach((function(e){return e.remove()})),this.workspace.comments.splice(t,1),this.workspace.unsavedCommentsData(),this.workspace.mainPanel.removeSection("Comment")},e.prototype.disableForm=function(){this.textInput.disabled=!0,this.mentionsInput.disabled=!0},e.prototype.enableForm=function(){this.textInput.disabled=!1,this.mentionsInput.disabled=!1},e.prototype.viewComment=function(e){var t=this.workspace.comments.find((function(t){return t.id===e}));t?(this.fillInputs(t),this.commentId=t.id,this.disableForm(),this.buttonsVisibilityMode("view")):console.warn("No comment found with that id:",e)},e.prototype.enableEditComment=function(e){var t=this,n=this.workspace.comments.find((function(t){return t.id===e}));n?(this.fillInputs(n),this.commentId=e,this.enableForm(),this.buttonsVisibilityMode("edit"),this.formElement.onchange=function(){t.confirmUpdateBtn.classList.remove("disabled"),t.confirmUpdateBtn.onclick=function(){return t.updateComment(e,t.textInput.value,t.getSelectedMembers())}}):console.warn("No comment found with that id:",e)},e.prototype.updateComment=function(e,t,n){var r=this.workspace.comments.find((function(t){return t.id===e}));r?(r.content=t,r.mentions=n,this.workspace.unsavedCommentsData(),this.formElement.onchange=null,this.disableForm(),this.buttonsVisibilityMode("view"),this.confirmUpdateBtn.classList.add("disabled"),this.cancelUpdateBtn.classList.add("disabled"),this.confirmUpdateBtn.onclick=null,this.cancelUpdateBtn.onclick=null):console.warn("No comment found with that id:",e)},e.prototype.discardUpdate=function(){var e=this,t=this.workspace.comments.find((function(t){return t.id===e.commentId}));t?(this.textInput.value=t.content,this.formElement.onchange=null,this.disableForm(),this.buttonsVisibilityMode("view"),this.confirmUpdateBtn.classList.add("disabled"),this.confirmUpdateBtn.onclick=null):console.warn("No comment found with that id:",this.commentId)},e.prototype.getSelectedMembers=function(){for(var e=[],t=0;t<this.mentionsInput.selectedOptions.length;t++)e.push(this.mentionsInput.selectedOptions[t].value);return e},e.prototype.fillInputs=function(e){var t=this;if(this.textInput.value=e.content,e.mentions.length>0){var n=[];e.mentions.forEach((function(e){var r=t.workspace.permissions.find((function(t){return t.emailAddress===e}));n.push('<option value="'+e+'">'+(r?r.displayName:"Removed user")+"</option>")})),this.mentionsInput.innerHTML=n.join("")}else c.emptyNode(this.mentionsInput)},e.prototype.reset=function(){this.formElement.reset()},e}(),g=function(){function e(e,t){var n=this;this.appendedDrawingsIds=[],this.comments=[],this.elementsComments={},this.workspaceContainer=document.createElement("div"),this.workspaceContainer.classList.add("workspace"),this.projectName=e.name,this.projectId=e.id,this.permissions=e.permissions,this.projectIndex=t.projectsData.findIndex((function(t){return t.name===e.name})),t.lastUploadedProject&&e.id===t.lastUploadedProject.id||(this.drawings=e.drawings,this.drawingsStylesId=e.drawingsStylesId,this.elementsData={}),t.projectsListBtn.innerHTML="<span>"+e.name+"</span>",this.drawingsBtns=t.drawingsBtns,this.saveBtn=t.saveBtn,this.createDrawingsBtns(this.drawings),this.drawingsBtns.children[0].innerText="Pick a drawing",this.drawingsBtns.style.display="unset",t.toolbarsContainer.style.display="flex",this.projectsData=t.projectsData,this.propsTablesContainer=document.getElementById("propsTablesContainer"),this.paramsTablesContainer=document.getElementById("paramsTablesContainer"),e.commentsFileId&&(this.commentsFileId=e.commentsFileId),e.comments&&(e.comments.forEach((function(e){var t=new d(e.elementsIds,e.content,e.mentions);n.comments.push(t);for(var r=0;r<e.elementsIds.length;r++)n.elementsComments.hasOwnProperty(e.elementsIds[r])||(n.elementsComments[e.elementsIds[r]]=[]),n.elementsComments[e.elementsIds[r]].push(t.id)})),this.drawings.forEach((function(e){return e.commentsChanged=!0}))),this.mainPanel=new p(t.panelsStorage,this),this.commentForm=new m(document.getElementById("commentForm"),this),this.drawingsContainer=document.createElement("div"),this.drawingsContainer.classList.add("drawingsContainer"),this.workspaceContainer.appendChild(this.drawingsContainer),t.workspacesContainer.appendChild(this.workspaceContainer)}return e.prototype.manageTools=function(e,t,n){void 0!==this.activeDrawing?void 0===this.activeTool?this.activeTool=new t(n,e.currentTarget,this):this.activeTool.name!==n?(this.activeTool.kill(),this.activeTool=new t(n,e.currentTarget,this)):this.activeTool.name===n&&(this.activeTool.kill(),this.activeTool=void 0):console.log("A drawing must be active.")},e.prototype.unsavedCommentsData=function(){this.commentsChangesUnsaved=!0,this.saveBtn.classList.remove("disabled"),this.saveBtn.classList.add("enabled")},e.prototype.setDrawing=function(e){if(this.activeDrawing&&this.activeDrawing.name!==e.name)this.activeTool&&this.activeTool.currentSelection.length>0&&this.activeTool.removeDrawingSelectionAppearance(this.activeDrawing),this.activeDrawing.content.style.display="none";else if(this.activeDrawing&&this.activeDrawing.name===e.name)return;if(e.content.style.visibility="hidden",this.appendedDrawingsIds.includes(e.id)?e.content.style.display="unset":(this.appendedDrawingsIds.push(e.id),this.drawingsContainer.append(e.content)),e.commentsChanged){if(void 0===e.commentsGroup)for(var t=!1,n=0;n<this.comments.length;n++){for(var r=[],i=0;i<this.comments[n].elementsIds.length;i++){null!==(o=e.content.querySelector('[data-id="'+this.comments[n].elementsIds[i]+'"]'))&&r.push(o)}r.length>0&&(t||(e.createCommentsGroup(),t=!0),this.comments[n].createRepresentation(e.commentsGroup,r))}else for(n=0;n<this.comments.length;n++)if(null===e.commentsGroup.querySelector('[data-id="'+this.comments[n].id+'"]')){for(r=[],i=0;i<this.comments[n].elementsIds.length;i++){var o;null!==(o=e.content.querySelector('[data-id="'+this.comments[n].elementsIds[i]+'"]'))&&r.push(o)}r.length>0&&this.comments[n].createRepresentation(e.commentsGroup,r)}e.commentsChanged=!1}this.activeTool&&this.activeTool.currentSelection.length>0&&this.activeTool.addDrawingSelectionAppearance(e),e.content.style.visibility="unset",this.activeDrawing=e},e.prototype.createDrawingsBtns=function(e){var t=[];e.forEach((function(e){t.push("<li "+(e.id?'data-id="'+e.id+'"':"")+">"+e.name+"</li>")})),this.drawingsBtns.querySelector(".dropdown-content").innerHTML=t.join("")},e.prototype.close=function(){c.emptyNode(this.drawingsBtns.querySelector(".dropdown-content")),void 0!==this.drawingsStylesTag&&this.drawingsStylesTag.remove(),this.drawingsContainer.innerHTML=""},e}(),y=function(){function e(e,t,n){this.name=e,this.toolBtn=t,this.workspace=n,this.toolBtn.classList.add("btn-tool-enabled")}return e.prototype.kill=function(){this.toolBtn.classList.remove("btn-tool-enabled")},e}(),v=(f=function(e,t){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}f(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),b=function(e){function t(t,n,r){var i=e.call(this,t,n,r)||this;return i.currentSelection=[],i.multipleSelection=!1,i.manageSelection=i.manageSelection.bind(i),r.drawingsContainer.addEventListener("click",i.manageSelection),i}return v(t,e),t.prototype.manageSelection=function(e){(this.selection=e.target.closest("[selectable]"),null!==this.selection)?this.multipleSelection?-1===this.currentSelection.indexOf(this.selection.dataset.id)?this.select(this.selection):this.deselect(this.selection.dataset.id):0===this.currentSelection.length?this.select(this.selection):this.selection.dataset.id!==this.currentSelection[0]?(this.deselect(this.currentSelection[0]),this.select(this.selection)):this.selection.dataset.id===this.currentSelection[0]&&this.deselect(this.currentSelection[0]):this.clearAllSelection();console.log("Selection ",this.currentSelection)},t.prototype.select=function(e){this.currentSelection.push(e.dataset.id),this.addSelectionAppearance(e)},t.prototype.deselect=function(e){var t=this.currentSelection.indexOf(e);if(t>-1){this.currentSelection.splice(t,1);var n=this.workspace.activeDrawing.content.querySelector('[data-id="'+e+'"]');n&&this.clearSelectionAppearance(n)}},t.prototype.removeDrawingSelectionAppearance=function(e){for(var t=0;t<this.currentSelection.length;t++){var n=e.content.querySelector('[data-id="'+this.currentSelection[t]+'"]');n&&this.clearSelectionAppearance(n)}},t.prototype.addDrawingSelectionAppearance=function(e){for(var t=0;t<this.currentSelection.length;t++){var n=e.content.querySelector('[data-id="'+this.currentSelection[t]+'"]');n&&this.addSelectionAppearance(n)}},t.prototype.clearSelectionAppearance=function(e){for(var t=0;t<e.children.length;t++)e.children[t].classList.remove("selected")},t.prototype.addSelectionAppearance=function(e){for(var t=0;t<e.children.length;t++)e.children[t].classList.add("selected")},t.prototype.clearAllSelection=function(){if(this.currentSelection.length>0){for(var e=0;e<this.currentSelection.length;e++){var t=this.workspace.activeDrawing.content.querySelector('[data-id="'+this.currentSelection[e]+'"]');t&&this.clearSelectionAppearance(t)}this.currentSelection.length=0}},t.prototype.getDrawingSelectedElementsRefs=function(e){for(var t=[],n=0;n<this.currentSelection.length;n++){var r=e.content.querySelector('[data-id="'+this.currentSelection[n]+'"]');r&&t.push(r)}return t},t.prototype.kill=function(){e.prototype.kill.call(this),this.workspace.drawingsContainer.removeEventListener("click",this.manageSelection),this.clearAllSelection()},t}(y);class w extends b{constructor(e,t,n){if(super(e,t,n),console.log("Comment element tool enabled."),this.multipleSelection=!0,this.boundingBox,this.waitingForComment=!1,this.cancelComment=this.cancelComment.bind(this),n.commentForm.cancelCreateBtn.onclick=this.cancelComment,n.permissions.length>1){const e=[],t=window.getCurrentUser().emailAddress;n.permissions.forEach(n=>{n.emailAddress!==t&&e.push(`<option value="${n.emailAddress}">${n.displayName}</option>`)}),n.commentForm.mentionsInput.innerHTML=e.join(""),n.commentForm.showMentionsSection()}else n.commentForm.hideMentionsSection();this.addComment=this.addComment.bind(this),n.commentForm.addCommentBtn.onclick=this.addComment,n.commentForm.enableForm(),n.commentForm.reset(),this.hasUsedPanel=!1}manageSelection(e){super.manageSelection(e),this.currentSelection.length>0?(this.waitingForComment=!0,this.workspace.commentForm.buttonsVisibilityMode("create"),this.workspace.mainPanel.addSection("Comment",this.workspace.commentForm.formElement),this.workspace.mainPanel.open(),this.hasUsedPanel=!0):this.waitingForComment=!1}addComment(){if(0===this.currentSelection.length)return;let e;if(void 0===this.workspace.activeDrawing.commentsGroup&&this.workspace.activeDrawing.createCommentsGroup(),this.workspace.permissions.length>1&&(e=this.workspace.commentForm.getSelectedMembers()).length>0){const t=window.getCurrentUser().displayName,n=window.getCurrentUser().photoLink;this.workspace.pendingNotificationsToSend.push({emails:e,userName:t,userPhoto:n,textContent:this.workspace.commentForm.textInput.value,projectName:this.workspace.projectName,projectId:this.workspace.projectId})}const t=new d(this.currentSelection,this.workspace.commentForm.textInput.value,e),n=this.getDrawingSelectedElementsRefs(this.workspace.activeDrawing);t.createRepresentation(this.workspace.activeDrawing.commentsGroup,n);for(let e=0;e<this.currentSelection.length;e++)this.workspace.elementsComments.hasOwnProperty(this.currentSelection[e])||(this.workspace.elementsComments[this.currentSelection[e]]=[]),this.workspace.elementsComments[this.currentSelection[e]].push(t.id);console.log("elementsComments ",this.workspace.elementsComments),this.workspace.comments.push(t),console.log(this.workspace.comments),this.workspace.commentForm.reset(),this.workspace.mainPanel.close(),this.waitingForComment=!1,this.workspace.unsavedCommentsData(),this.workspace.drawings.forEach(e=>{e.id!==this.workspace.activeDrawing.id&&(e.commentsChanged=!0)}),super.clearAllSelection()}cancelComment(){this.workspace.mainPanel.close(),this.workspace.commentForm.reset(),this.waitingForComment=!1,super.clearAllSelection()}kill(){super.kill(),console.log("Comment element tool disabled."),this.waitingForComment&&(this.workspace.commentForm.reset(),this.workspace.mainPanel.close()),this.hasUsedPanel&&this.workspace.mainPanel.removeSection("Comment"),this.workspace.commentForm.addCommentBtn.onclick=null,this.workspace.commentForm.cancelCreateBtn.onclick=null}}var T,S=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),I=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},E=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},C=function(e){function t(t,n,r){var i=e.call(this,t,n,r)||this;return i.hasUsedPanel=!1,console.log("Elements data tool enabled."),i.elementsData=r.elementsData,i.projectsData=r.projectsData,i.projectIndex=r.projectIndex,i}return S(t,e),t.prototype.manageSelection=function(t){e.prototype.manageSelection.call(this,t),null!==this.selection&&this.currentSelection.length>0?(this.showElementData(this.selection.dataset.category,this.selection.dataset.id),this.selection.dataset.comment?(this.workspace.commentForm.viewComment(this.selection.dataset.comment),this.workspace.mainPanel.addSection("Comment",this.workspace.commentForm.formElement)):this.workspace.mainPanel.sections.find((function(e){return"Comment"===e.name}))&&this.workspace.mainPanel.removeSection("Comment")):this.currentElementData&&(this.currentElementData=void 0,this.workspace.mainPanel.close(),console.log("Data table cleaned."))},t.prototype.showElementData=function(e,t){return I(this,void 0,void 0,(function(){var n,r,i,o=this;return E(this,(function(a){switch(a.label){case 0:return n=!0,this.elementsData[e]?(this.currentElementData=this.elementsData[e].instances[t],console.log(this.currentElementData),[3,4]):[3,1];case 1:return void 0===(r=this.projectsData[this.projectIndex].elementsData.find((function(t){return t.name.replace(".json","")===e})))?[3,3]:[4,h.getFileContent(r.id).then((function(n){o.elementsData[e]=JSON.parse(n.body),o.currentElementData=o.elementsData[e].instances[t],console.log(o.currentElementData)}),(function(e){n=!1,console.log(e)}))];case 2:return a.sent(),[3,4];case 3:console.log("There is no data for that element."),a.label=4;case 4:return n&&(this.workspace.propsTablesContainer.innerHTML=this.createDataTable(this.currentElementData.properties),i=[{name:"Properties",body:this.workspace.propsTablesContainer}],this.currentElementData.parameters.length>0&&(this.workspace.paramsTablesContainer.innerHTML=this.createDataTable(this.currentElementData.parameters),i.push({name:"Parameters",body:this.workspace.paramsTablesContainer})),this.workspace.mainPanel.addSections(i),this.workspace.mainPanel.open(),this.hasUsedPanel=!0),[2]}}))}))},t.prototype.createDataTable=function(e){for(var t=[],n=[],r=0;r<e.length;r++){var i=e[r].category,o=t.indexOf(i),a="<tr><th>"+e[r].name+"</th><td>"+e[r].value+"</td></tr>";-1!==o?n[o].push(a):(n.push(['<table class="data-table"><thead><tr><th colspan="2">'+i+"</th></tr></thead>",a]),t.push(i))}var s=[];for(r=0;r<n.length;r++)s.push(n[r].join("")+"</tbody></table>");return s.join("")},t.prototype.kill=function(){e.prototype.kill.call(this),this.workspace.mainPanel.isOpen&&this.workspace.mainPanel.close(),this.hasUsedPanel&&(this.workspace.mainPanel.removeSection("Properties"),this.workspace.mainPanel.removeSection("Parameters")),console.log("Elements data tool disabled.")},t}(b),_=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},D=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},k=function(){function e(e,t){var n=this;this.pendingToRemove=[],this.pendingToAdd=[],this.htmlContainer=e,this.shareForm=e.querySelector(".share-form"),this.shareFormErrorMsg=e.querySelector(".share-form > .error-msg"),this.confirmChangesBtns=e.querySelector(".modal-main-btns"),this.saveChangesBtn=e.querySelector(".save-changes-btn"),this.cancelChangesBtn=e.querySelector(".cancel-changes-btn"),this.waitingAnimation=e.querySelector(".loader-container"),this.currentUsersContent=e.querySelector(".current-users"),this.currentUsersTable=e.querySelector(".current-users tbody"),this.pendingUsersContent=e.querySelector(".pending-users"),this.pendingUsersToAddTable=e.querySelector(".pending-users tbody"),this.shareNotificationContainer=e.querySelector(".share-notification"),this.shareNotificationInput=e.querySelector(".share-notification > input"),this.app=t,this.projectsList=t.projectsList,this.currentUsersTable.addEventListener("click",(function(e){if(e.target.closest("[data-action]")){var t=e.target.closest("[data-action]");"stage"===t.dataset.action?n.stageMemberToRemove(t.parentElement):n.unstageMemberToRemove(t.parentElement)}})),this.pendingUsersToAddTable.addEventListener("click",(function(e){e.target.closest("[data-action]")&&n.unstageMemberToAdd(e.target.closest("[data-action]").parentElement)})),this.saveChanges=this.saveChanges.bind(this),this.stageMemberToAdd=this.stageMemberToAdd.bind(this),this.shareForm.onsubmit=this.stageMemberToAdd}return e.prototype.setUpDialog=function(e){this.pendingToRemove=[],c.emptyNode(this.currentUsersTable),this.pendingToAdd=[],c.emptyNode(this.pendingUsersToAddTable),this.pendingUsersContent.classList.add("hidden"),this.shareNotificationContainer.classList.add("hidden");for(var t=0;t<this.confirmChangesBtns.children.length;t++)this.confirmChangesBtns.children[t].classList.add("disabled");if(this.saveChangesBtn.onclick=null,this.cancelChangesBtn.onclick=null,this.projectData=e,this.projectItem=this.projectsList.querySelector('button[data-proj-id="'+e.id+'"]'),e.shared){var n=[],r=window.getCurrentUser().emailAddress;e.permissions.forEach((function(e){n.push('\n          <tr data-permission="'+e.id+'">\n            <td class="user-data">\n              <img src="'+e.photoLink+'">\n              <div>\n                <span>'+(e.emailAddress===r?"You":e.displayName)+"</span>\n                <span>"+e.emailAddress+"</span>\n              </div>\n            </td>\n            "+("owner"===e.role?'<td title="Project owner"><svg><use href="#keyIcon"></use></svg></td>':'<td class="action-btn" data-action="stage"><svg><use href="#crossIcon"></use></svg></td>')+"\n          </tr>")})),this.currentUsersTable.innerHTML=n.join(""),this.currentUsersContent.classList.remove("empty")}else this.currentUsersContent.classList.add("empty")},e.prototype.stageMemberToAdd=function(e){e.preventDefault();var t=e.target.elements.namedItem("email").value;if(""===t||this.pendingToAdd.includes(t)||void 0!==this.projectData.permissions.find((function(e){return e.emailAddress===t})))this.shareFormErrorMsg.classList.remove("hidden"),console.log("Not valid input.");else if(this.shareFormErrorMsg.classList.add("hidden"),this.pendingToAdd.push(t),this.pendingUsersToAddTable.insertAdjacentHTML("beforeend",'\n        <tr data-email="'+t+'">\n          <td class="user-data"><span>'+t+'</span></td>\n          <td class="action-btn" data-action="stage"><svg><use href="#crossIcon"></use></svg></td>\n        </tr>'),e.target.elements.namedItem("email").value="",1===this.pendingToAdd.length&&(this.pendingUsersContent.classList.remove("hidden"),this.shareNotificationContainer.classList.remove("hidden"),this.shareNotificationInput.checked=!0,0===this.pendingToRemove.length)){for(var n=0;n<this.confirmChangesBtns.children.length;n++)this.confirmChangesBtns.children[n].classList.remove("disabled");this.saveChangesBtn.onclick=this.saveChanges,this.cancelChangesBtn.onclick=this.app.closeModalDialog}},e.prototype.unstageMemberToAdd=function(e){var t=this.pendingToAdd.indexOf(e.dataset.email);if(this.pendingToAdd.splice(t,1),e.remove(),0===this.pendingToAdd.length&&(this.pendingUsersContent.classList.add("hidden"),this.shareNotificationContainer.classList.add("hidden"),0===this.pendingToRemove.length)){for(var n=0;n<this.confirmChangesBtns.children.length;n++)this.confirmChangesBtns.children[n].classList.add("disabled");this.saveChangesBtn.onclick=null,this.cancelChangesBtn.onclick=null}},e.prototype.stageMemberToRemove=function(e){this.pendingToRemove.push(e.dataset.permission),e.classList.add("to-delete");var t=e.querySelector(".action-btn");if(t.innerHTML='<svg><use href="#reloadIcon"></use></svg>',t.dataset.action="unstage",0===this.pendingToAdd.length&&1===this.pendingToRemove.length){for(var n=0;n<this.confirmChangesBtns.children.length;n++)this.confirmChangesBtns.children[n].classList.remove("disabled");this.saveChangesBtn.onclick=this.saveChanges,this.cancelChangesBtn.onclick=this.app.closeModalDialog}},e.prototype.unstageMemberToRemove=function(e){var t=this.pendingToRemove.indexOf(e.dataset.permission);this.pendingToRemove.splice(t,1),e.classList.remove("to-delete");var n=e.querySelector(".action-btn");if(n.innerHTML='<svg><use href="#crossIcon"></use></svg>',n.dataset.action="stage",0===this.pendingToRemove.length&&0===this.pendingToAdd.length){for(var r=0;r<this.confirmChangesBtns.children.length;r++)this.confirmChangesBtns.children[r].classList.add("disabled");this.saveChangesBtn.onclick=null,this.cancelChangesBtn.onclick=null}},e.prototype.addStagedMembers=function(){var e=this,t=[];return this.pendingToAdd.forEach((function(n,r){t.push(h.shareFile(e.projectData.id,n,600*r))})),Promise.all(t)},e.prototype.removeStagedMembers=function(){var e=this,t=[];return this.pendingToRemove.forEach((function(n){t.push(h.stopSharingFile(e.projectData.id,n))})),Promise.all(t)},e.prototype.saveChanges=function(){return _(this,void 0,void 0,(function(){var e,t,n=this;return D(this,(function(r){switch(r.label){case 0:return this.waitingAnimation.classList.remove("hidden"),e=!0,t=!0,this.pendingToRemove.length>0?[4,this.removeStagedMembers().then((function(e){n.pendingToRemove.forEach((function(e){var t=n.projectData.permissions.findIndex((function(t){return t.id===e}));n.projectData.permissions.splice(t,1)}))}),(function(e){console.log(e),t=!1}))]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.pendingToAdd.length>0?[4,this.addStagedMembers().then((function(e){e.forEach((function(e,t){n.projectData.permissions.push({id:e.result.id,emailAddress:n.pendingToAdd[t],role:e.result.role,displayName:e.result.displayName,photoLink:e.result.photoLink})})),n.shareNotificationInput.checked&&h.sendSharingProjectEmail(window.getCurrentUser().displayName,n.pendingToAdd,n.projectData.name,n.projectData.id),window.saveMessagingDeviceToken()}),(function(t){console.log(t),e=!1}))]:[3,4];case 3:r.sent(),r.label=4;case 4:return e&&t?(1===this.projectData.permissions.length?(this.projectData.shared=!1,this.projectItem.querySelector(".sharedIcon")&&this.projectItem.querySelector(".sharedIcon").remove()):(this.projectData.shared=!0,this.projectItem.querySelector(".sharedIcon")||this.projectItem.insertAdjacentHTML("afterbegin",'<img class="sharedIcon" src="src/assets/icons/shareIcon.svg">')),this.app.showMessage("success","Project members updated successfully.",5e3)):this.app.showMessage("error","Something went wrong, member changes could no be saved."),this.waitingAnimation.classList.add("hidden"),this.app.closeModalDialog(),[2]}}))}))},e}(),N=function(){function e(){var e=this;this.notifications=[],this.notificationsBtn=document.getElementById("notificationBtn"),this.notificationsContainer=document.getElementById("notificationsContainer"),this.notificationsList=document.querySelector("#notificationsContainer > .notifications-body"),this.notificationsBtn.onclick=function(){return e.notificationsContainer.classList.toggle("open")},this.notificationsList.addEventListener("click",(function(t){var n=t.target.closest("li");n&&e.viewNotification(n.dataset.id)}))}return e.prototype.createNotificaction=function(e){var t=document.createElement("li"),n=c.uuidv4();t.dataset.id=n,t.classList.add("pending"),t.innerHTML='\n      <img class="notification-thumb" src="'+e.photoLink+'">\n      <div class="notification-content">\n        <h4>'+e.author+" mentioned you in a comment on the project "+e.projectName+"</h4>\n        <p>"+e.text+"</p>\n      </div>",this.notificationsList.prepend(t),this.notifications.push({id:n,representation:t,state:"pending",data:e}),this.notificationsBtn.classList.add("enabled"),1===this.notifications.length&&this.notificationsContainer.classList.remove("empty")},e.prototype.deleteNotificaction=function(e){var t=this.notifications.findIndex((function(t){return t.id===e}));this.notifications[t].representation.remove(),this.notifications.splice(t,1)},e.prototype.viewNotification=function(e){var t=this.notifications.find((function(t){return t.id===e}));t.state="read",t.representation.classList.remove("pending"),void 0===this.notifications.find((function(e){return"pending"===e.state}))&&this.notificationsBtn.classList.remove("enabled")},e}(),A=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},x=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},M=function(){function e(e,t){var n=this;this.emptyInputValue=new RegExp(/^(\s|\t)*$/),this.htmlContainer=e,this.renameForm=e.querySelector("form"),this.input=e.querySelector("form > div:first-child > input"),this.renameProjectErrorMsg=e.querySelector(".error-msg"),this.cancelBtn=e.querySelector("form > div:last-child > .cancel-btn"),this.app=t,this.renameProject=this.renameProject.bind(this),this.renameForm.onsubmit=this.renameProject,this.cancelBtn.onclick=function(e){e.preventDefault(),n.setInputValue(""),t.closeModalDialog()}}return e.prototype.setUpDialog=function(e){this.projectListItem=e,this.projectId=e.dataset.projId,this.currentName=e.dataset.name,this.renameProjectErrorMsg.classList.add("hidden"),this.setInputValue(this.currentName)},e.prototype.renameProject=function(e){return A(this,void 0,void 0,(function(){var t,n;return x(this,(function(r){switch(r.label){case 0:return e.preventDefault(),""===this.input.value||this.emptyInputValue.test(this.input.value)?(this.renameProjectErrorMsg.classList.remove("hidden"),[3,6]):[3,1];case 1:return this.input.value.trim()!==this.currentName?[3,2]:(this.setInputValue(""),this.app.closeModalDialog(),[3,6]);case 2:this.renameProjectErrorMsg.classList.add("hidden"),r.label=3;case 3:return r.trys.push([3,5,,6]),[4,h.renameFile(this.projectId,this.input.value.trim())];case 4:return 200===(t=r.sent()).status?(this.projectListItem.querySelector("h4").innerText=t.result.name,this.projectListItem.dataset.name=t.result.name,this.setInputValue(""),this.app.closeModalDialog(),this.app.showMessage("success","Project renamed successfully.",5e3)):(this.app.showMessage("error","It was not possible to rename the project."),this.app.closeModalDialog(),console.error("Something went wrong renaming a project. ",t)),[3,6];case 5:return n=r.sent(),this.app.showMessage("error","It was not possible to rename the project."),this.app.closeModalDialog(),console.error("Something went wrong renaming a project. ",n),[3,6];case 6:return[2]}}))}))},e.prototype.setInputValue=function(e){this.input.value=e},e}(),L=function(){function e(){var e=this;this.visible=!1,this.HTMLContainer=document.createElement("div"),this.HTMLContainer.id="contextMenu",this.menuListContainer=document.createElement("ul"),this.HTMLContainer.appendChild(this.menuListContainer),this.HTMLContainer.style.display="none",window.addEventListener("click",(function(){e.visible&&e.toggleMenu("hide")})),window.addEventListener("contextmenu",(function(t){t.preventDefault();var n=t.target.closest("[data-cxmenu]");n&&n.hasOwnProperty("contextMenuData")?(e.clearMenu(),e.generateMenu(n.contextMenuData),e.setPosition(t.pageY,t.pageX)):e.visible&&e.toggleMenu("hide")})),window.document.body.appendChild(this.HTMLContainer)}return e.prototype.toggleMenu=function(e){this.HTMLContainer.style.display="show"===e?"block":"none",this.visible=!this.visible},e.prototype.setPosition=function(e,t){this.HTMLContainer.style.left=t+"px",this.HTMLContainer.style.top=e+"px",this.toggleMenu("show")},e.prototype.clearMenu=function(){this.menuListContainer.childNodes.forEach((function(e){return e.onclick=null})),c.emptyNode(this.menuListContainer)},e.prototype.generateMenu=function(e){for(var t=new DocumentFragment,n=0;n<e.length;n++){var r=document.createElement("li");r.innerText=e[n].name,r.onclick=e[n].action,t.appendChild(r)}this.menuListContainer.appendChild(t)},e}(),P=function(e,t){var n=this;this.HTMLContainer=document.createElement("button"),"temporal"===e.id&&this.HTMLContainer.classList.add("unsync"),this.HTMLContainer.dataset.projId=e.id,this.HTMLContainer.dataset.name=e.name,this.HTMLContainer.classList.add("projectItem");var r=[];e.shared&&r.push('<svg class="sharedIcon"><use href="#sharedIcon" /></svg>'),e.thumbId?r.push('<img class="thumb" src="https://drive.google.com/uc?id='+e.thumbId+'">'):r.push('<svg class="thumb" xmlns="http://www.w3.org/2000/svg" viewBox="-100 -50 350 210"><path d="M143,10.44H65.27V7a7,7,0,0,0-7-7H7A7,7,0,0,0,0,7V103a7,7,0,0,0,7,7H65V70.18H85V110h58a7,7,0,0,0,7-7V17.41A7,7,0,0,0,143,10.44ZM125,53.49H105v-20h20Z" style="fill:#e6e6e6"/></svg>'),r.push("<h4>"+e.name+"</h4>"),this.HTMLContainer.innerHTML=r.join(""),this.HTMLContainer.dataset.cxmenu="",this.HTMLContainer.contextMenuData=[{name:"Delete",action:function(){t.showViewportDialog("action","Are you sure you want to delete the "+e.name+" project?",[{name:"Delete",function:function(){t.showViewportDialog("loader","Deleting "+e.name+" project."),h.deleteFile(e.id).then((function(r){n.HTMLContainer.remove();var i=t.projectsData.findIndex((function(t){return t.id===e.id}));t.projectsData.splice(i,1),t.hideViewportMessage(),t.showMessage("success","Project deleted successfully")}))}},{name:"Cancel",function:function(){t.hideViewportMessage()}}])}},{name:"Share project",action:function(){t.shareProjectDialog.setUpDialog(e),t.showModalDialog(t.shareProjectDialog.htmlContainer),t.modalDialogContainer.classList.add("grayTranslucent")}},{name:"Rename",action:function(){t.renameProjectDialog.setUpDialog(n.HTMLContainer),t.showModalDialog(t.renameProjectDialog.htmlContainer)}}]},O=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},R=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},j=function(){function e(){var e=this;this.userInfoContainer=document.getElementById("user-info"),this.workspacesContainer=document.getElementById("workspaces"),this.projectsListBtn=document.getElementById("projectsListBtn"),this.drawingsBtns=document.getElementById("drawingsBtns"),this.toolbarsContainer=document.getElementById("toolbarsContainer"),this.modalDialogContainer=document.getElementById("modalDialogContainer"),this.modalDialogContent=this.modalDialogContainer.querySelector(".modal-content"),this.modalDialogsStorage=document.getElementById("modalDialogsStorage"),this.closeModalBtn=document.getElementById("closeModalBtn"),this.closeModalDialog=this.closeModalDialog.bind(this),this.closeModalBtn.onclick=this.closeModalDialog,this.viewportMessage=document.getElementById("viewportMessage"),this.projectsListContainer=document.getElementById("projectsListContainer"),this.projectsList=document.getElementById("projectsList"),this.closeProjectsListBtn=document.getElementById("closeProjectsListBtn"),this.panelsStorage=document.getElementById("panelsStorage"),this.saveBtn=document.getElementById("saveBtn"),this.saveCommentsData=this.saveCommentsData.bind(this),this.saveBtn.onclick=this.saveCommentsData,this.closeProjectsList=this.closeProjectsList.bind(this),this.projectsListBtn.onclick=function(){"true"===e.projectsListBtn.dataset.open?e.closeProjectsList():"false"===e.projectsListBtn.dataset.open&&e.openProjectsList()},this.closeProjectsListBtn.addEventListener("click",this.closeProjectsList),this.goToProject=this.goToProject.bind(this),this.projectsList.addEventListener("click",this.goToProject),this.uploadFileForm=document.getElementById("uploadFileForm"),this.fileInput=document.getElementById("fileInput"),this.submitFileBtn=this.uploadFileForm.querySelector('button[type="submit"]'),document.getElementById("newProjectBtn").addEventListener("click",(function(){e.showModalDialog(e.uploadFileForm),e.modalDialogContainer.classList.add("grayTranslucent")})),this.fileInput.addEventListener("change",(function(){e.fileInput.files.length>0?(e.fileInput.nextElementSibling.innerHTML=e.fileInput.files[0].name,e.submitFileBtn.classList.remove("disabled")):(e.fileInput.nextElementSibling.innerHTML="Choose a file",e.submitFileBtn.classList.add("disabled"))})),this.uploadFileForm.onsubmit=function(t){t.preventDefault(),document.getElementById("loadingFile").style.display="unset",e.submitFileBtn.classList.add("disabled"),e.submitFileBtn.innerHTML="Uploading file",e.fileInput.nextElementSibling.style.display="none";var n=t.target.elements.namedItem("file").files[0];h.createProject(n,e,e.lastUploadedProject).then((function(t){e.updateProjectsList(t),e.closeModalDialog(),e.showMessage("success","Project uploaded successfully."),e.fileInput.value="",document.getElementById("loadingFile").style.display="none",e.fileInput.nextElementSibling.innerHTML="Choose a file",e.submitFileBtn.innerHTML="Upload",e.fileInput.nextElementSibling.style.display="unset"}),(function(t){e.closeModalDialog(),e.updateProjectsList(e.lastUploadedProject),console.error(t)}))},this.renameProjectDialog=new M(document.getElementById("renameProjectForm"),this),this.shareProjectDialog=new k(document.getElementById("shareProjectDialog"),this),this.messageContainer=document.getElementById("messageContainer"),this.closeMessage=this.closeMessage.bind(this),this.messageContainer.querySelector("button").onclick=this.closeMessage,window.onresize=this.adjustItems,document.getElementById("tool-4").addEventListener("click",(function(t){return e.currentWorkspace.manageTools(t,C,"elementsDataTool")})),document.getElementById("tool-5").addEventListener("click",(function(t){return e.currentWorkspace.manageTools(t,w,"commentsTool")})),this.notificationsManager=new N,this.contextMenu=new L}return e.prototype.setUserInfo=function(){return O(this,void 0,void 0,(function(){var e;return R(this,(function(t){switch(t.label){case 0:return[4,h.getUserInfo()];case 1:return e=t.sent(),this.userInfo=JSON.parse(e.body).user,this.userInfoContainer.innerHTML="\n      <img src="+this.userInfo.photoLink+">\n      <span>\n        <span>"+this.userInfo.displayName+'</span><span class="email">'+this.userInfo.emailAddress+"</span>\n      </span>",[2]}}))}))},e.prototype.saveCommentsData=function(){return O(this,void 0,void 0,(function(){var e,t,n,r,i,o,a,s,u,c,l,d=this;return R(this,(function(f){switch(f.label){case 0:return this.currentWorkspace&&this.currentWorkspace.commentsChangesUnsaved?(this.commentsChangesUnsaved=!1,this.saveBtn.classList.remove("enabled"),this.saveBtn.classList.add("progress"),e=void 0,t=[],this.currentWorkspace.comments.forEach((function(e){t.push({elementsIds:e.elementsIds,content:e.content,mentions:e.mentions})})),n=JSON.stringify(t),this.currentWorkspace.commentsFileId?[3,8]:[4,h.uploadFile(n,"application/json","comments.json",this.currentWorkspace.projectId)]):[3,13];case 1:if(!(r=f.sent()).ok||200!==r.status)return[3,6];f.label=2;case 2:return f.trys.push([2,4,,5]),i=new TextDecoder("utf-8"),[4,r.body.getReader().read()];case 3:return o=f.sent(),a=o.value,o.done,s=JSON.parse(i.decode(a)).id,this.currentWorkspace.commentsFileId=s,e=!0,[3,5];case 4:return u=f.sent(),console.log("Error decoding the new comments.json file id: ",u),[3,5];case 5:return[3,7];case 6:e=!1,f.label=7;case 7:return[3,10];case 8:return[4,h.updateFileContent(n,"application/json",this.currentWorkspace.commentsFileId)];case 9:(c=f.sent()).ok&&200===c.status&&(e=!0),f.label=10;case 10:return e&&this.currentWorkspace.pendingNotificationsToSend.length>0?(l=[],this.currentWorkspace.pendingNotificationsToSend.forEach((function(e){var t=h.sendNotification(e.emails,e.userName,e.userPhoto,e.textContent,e.projectName,e.projectId);l.push(t)})),[4,Promise.all(l).then((function(e){console.log("Users notified successfully"),d.currentWorkspace.pendingNotificationsToSend.length=0}),(function(e){console.warn("Users couldn't be notified. ",e)}))]):[3,12];case 11:f.sent(),f.label=12;case 12:e?(this.saveBtn.classList.remove("progress"),this.saveBtn.classList.add("disabled"),console.log("Data saved successfully.")):(this.commentsChangesUnsaved=!0,this.saveBtn.classList.remove("progress"),this.saveBtn.classList.add("enabled"),this.showMessage("error","Something went wrong and data could not be saved."),console.error("Something went wrong trying to save. Retry again.")),f.label=13;case 13:return[2]}}))}))},e.prototype.goToProject=function(e){var t=this,n=e.target.closest("[data-proj-id]");null!==n&&(this.currentWorkspace&&this.currentWorkspace.projectId===n.dataset.projId||(this.lastUploadedProject&&n.dataset.projId===this.lastUploadedProject.id?("temporal"===this.lastUploadedProject.id&&console.log("Show a message indicating that the project can be accessed but in viewer mode because it couldnt be saved."),this.openProject(this.lastUploadedProject),this.previousActiveItem&&this.previousActiveItem.classList.remove("current"),n.classList.add("current"),this.previousActiveItem=n,this.projectsListBtn.style.display="unset"):(this.showViewportDialog("loader","Loading project "+n.dataset.name),h.fetchProject(n.dataset.projId,this).then((function(e){t.openProject(e),t.previousActiveItem&&t.previousActiveItem.classList.remove("current"),n.classList.add("current"),t.previousActiveItem=n,t.projectsListBtn.style.display="unset",t.hideViewportMessage()}),(function(e){console.log(e)})))))},e.prototype.openProject=function(e){this.currentWorkspace&&this.currentWorkspace.close(),this.currentWorkspace=new g(e,this),this.projectsListContainer.style.display="none",history.replaceState({projectTitle:e.name},e.name,"?id="+e.id)},e.prototype.closeProjectsList=function(){this.projectsListContainer.style.display="none",this.drawingsBtns.style.display="unset",this.toolbarsContainer.style.display="flex",this.projectsListBtn.dataset.open="false"},e.prototype.openProjectsList=function(){var e=this;void 0===this.currentWorkspace?this.closeProjectsListBtn.classList.add("hidden"):this.closeProjectsListBtn.classList.remove("hidden"),this.projectsListContainer.style.display="block",this.projectsListBtn.dataset.open="true",this.drawingsBtns.style.display="none",this.toolbarsContainer.style.display="none",(void 0===this.projectsData||this.projectsData.length<=1)&&(this.showViewportDialog("loader","Loading projects"),h.listProjectItems(this).then((function(t){e.createHTMLProjectsList(t),e.projectsList.childNodes.forEach((function(t){t.dataset&&t.dataset.projId===e.currentWorkspace.projectId&&(t.classList.add("current"),e.previousActiveItem=t)})),e.hideViewportMessage()}),(function(t){e.projectsList.innerHTML='<p class="empty-msg">There are no projects. Upload one!</p>',e.hideViewportMessage()})))},e.prototype.createHTMLProjectsList=function(e){var t=this;e.forEach((function(e){var n=new P(e,t);t.projectsList.appendChild(n.HTMLContainer)})),this.adjustItems()},e.prototype.adjustItems=function(){var e=Number(getComputedStyle(this.projectsList).getPropertyValue("--items-h")),t=this.projectsList.children.length;this.projectsList.style.setProperty("--remaining-items",(Math.ceil(t/e)*e-t).toString())},e.prototype.updateProjectsList=function(e){this.projectsData.length<=1&&this.projectsList.querySelector(".empty-msg").remove();var t=new P(e,this);this.projectsList.prepend(t.HTMLContainer),this.adjustItems()},e.prototype.showMessage=function(e,t,n){var r=this;switch(void 0===n&&(n=void 0),""!==this.messageContainer.dataset.type?(this.messageContainer.classList.remove(this.messageContainer.dataset.type),this.messageTimerId&&(window.clearTimeout(this.messageTimerId),this.messageTimerId=void 0)):this.messageContainer.style.display="flex",this.messageContainer.dataset.type=e,this.messageContainer.querySelector("p").innerText=t,e){case"success":this.messageContainer.classList.add("success");break;case"warning":this.messageContainer.classList.add("warning");break;case"error":this.messageContainer.classList.add("error")}n&&(this.messageTimerId=window.setTimeout((function(){return r.closeMessage()}),n))},e.prototype.closeMessage=function(){this.messageContainer.style.display="none",this.messageContainer.classList.remove(this.messageContainer.dataset.type),this.messageContainer.dataset.type="",this.messageTimerId&&(clearTimeout(this.messageTimerId),this.messageTimerId=void 0)},e.prototype.showViewportDialog=function(e,t,n){void 0===n&&(n=[]),this.viewportMessage.querySelector(".btns-container")&&this.viewportMessage.querySelectorAll(".btns-container > button").forEach((function(e){return e.onclick=null})),c.emptyNode(this.viewportMessage);var r=document.createElement("div");if("loader"===e)r.innerHTML="<p>"+t+'</p><svg class="svg-loader"><use href="#vaLoader"/></svg>';else if("action"===e&&n.length>0){r.innerHTML="<p>"+t+"</p>";var i=document.createElement("div");i.classList.add("btns-container"),n.forEach((function(e){var t=document.createElement("button");t.innerHTML=e.name,t.classList.add("buttonBase","light"),t.onclick=e.function,i.appendChild(t)})),r.appendChild(i)}else"message"===e&&(r.innerHTML="<p>"+t+"</p>");this.viewportMessage.appendChild(r),this.viewportMessage.classList.add("active")},e.prototype.hideViewportMessage=function(){this.viewportMessage.classList.remove("active")},e.prototype.showModalDialog=function(e,t,n){void 0===t&&(t="translucent"),void 0===n&&(n=!0),this.modalDialogContainer.classList.value="","translucent"===t?this.modalDialogContainer.classList.add("grayTranslucent"):"opaque"===t&&this.modalDialogContainer.classList.add("lightOpaque"),this.closeModalBtn.style.display=n?"unset":"none",this.modalDialogContent.appendChild(e),this.modalDialogContainer.style.display="flex"},e.prototype.closeModalDialog=function(){var e=this.modalDialogContent.firstElementChild;this.modalDialogContainer.style.display="none",this.modalDialogsStorage.appendChild(e)},e.prototype.start=function(e){var t=this;void 0===e&&(e=""),document.querySelector("header").style.display="flex",document.querySelector("main").style.display="block",""!==e?(this.showViewportDialog("loader","Loading project"),h.fetchProject(e,this).then((function(e){t.currentWorkspace=new g(e,t),t.createHTMLProjectsList([e]),t.projectsListBtn.style.display="unset",t.hideViewportMessage(),e.permissions.length>1&&window.saveMessagingDeviceToken()}),(function(e){console.log(e);var n=void 0===e.body?e:"Message: "+JSON.parse(e.body).error.message+" Code: "+JSON.parse(e.body).error.code;t.showViewportDialog("action",n,[{name:"View projects list",function:function(){t.openProjectsList(),""!==location.search&&history.replaceState({page:"Projects list"},"Projects list",location.href.replace(location.search,""))}}])}))):(""!==location.search&&history.replaceState({page:"Projects list"},"Projects list",location.href.replace(location.search,"")),this.projectsListContainer.style.display="block",this.showViewportDialog("loader","Loading projects"),h.listProjectItems(this).then((function(e){if(t.createHTMLProjectsList(e),t.hideViewportMessage(),window.thereIsMessaging)for(var n=0;n<e.length;n++)if(e[n].permissions.length>1){window.saveMessagingDeviceToken();break}}),(function(e){t.projectsList.innerHTML='<p class="empty-msg">There are no projects. Upload one!</p>',t.hideViewportMessage()})))},e}(),B=n(4),F=n(3),V=n.n(F),q=n(2),U=n(0),W=n(1),z=n(7),K="@firebase/installations",G="0.3.8",Q=1e4,H="w:"+G,Y="FIS_v2",J="https://firebaseinstallations.googleapis.com/v1",X=36e5,$=((T={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',T["not-registered"]="Firebase Installation is not registered.",T["installation-not-found"]="Firebase Installation not found.",T["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',T["app-offline"]="Could not process request. Application offline.",T["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",T),Z=new W.ErrorFactory("installations","Installations",$);function ee(e){return e instanceof W.FirebaseError&&e.code.includes("request-failed")}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function te(e){var t=e.projectId;return J+"/projects/"+t+"/installations"}function ne(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}function re(e,t){return Object(U.__awaiter)(this,void 0,void 0,(function(){var n,r;return Object(U.__generator)(this,(function(i){switch(i.label){case 0:return[4,t.json()];case 1:return n=i.sent(),r=n.error,[2,Z.create("request-failed",{requestName:e,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})]}}))}))}function ie(e){var t=e.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function oe(e,t){var n=t.refreshToken,r=ie(e);return r.append("Authorization",function(e){return Y+" "+e}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(n)),r}function ae(e){return Object(U.__awaiter)(this,void 0,void 0,(function(){var t;return Object(U.__generator)(this,(function(n){switch(n.label){case 0:return[4,e()];case 1:return(t=n.sent()).status>=500&&t.status<600?[2,e()]:[2,t]}}))}))}function se(e,t){var n=t.fid;return Object(U.__awaiter)(this,void 0,void 0,(function(){var t,r,i,o,a,s;return Object(U.__generator)(this,(function(u){switch(u.label){case 0:return t=te(e),r=ie(e),i={fid:n,authVersion:Y,appId:e.appId,sdkVersion:H},o={method:"POST",headers:r,body:JSON.stringify(i)},[4,ae((function(){return fetch(t,o)}))];case 1:return(a=u.sent()).ok?[4,a.json()]:[3,3];case 2:return s=u.sent(),[2,{fid:s.fid||n,registrationStatus:2,refreshToken:s.refreshToken,authToken:ne(s.authToken)}];case 3:return[4,re("Create Installation",a)];case 4:throw u.sent()}}))}))}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ue(e){return new Promise((function(t){setTimeout(t,e)}))}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ce=/^[cdef][\w-]{21}$/,le="";function he(){try{var e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;var t=function(e){return(t=e,btoa(String.fromCharCode.apply(String,Object(U.__spread)(t))).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22);var t}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e);return ce.test(t)?t:le}catch(e){return le}}var de,fe="firebase-installations-database",pe=1,me="firebase-installations-store",ge=null;function ye(){return ge||(ge=Object(z.openDb)(fe,pe,(function(e){switch(e.oldVersion){case 0:e.createObjectStore(me)}}))),ge}function ve(e,t){return Object(U.__awaiter)(this,void 0,void 0,(function(){var n,r,i;return Object(U.__generator)(this,(function(o){switch(o.label){case 0:return n=Te(e),[4,ye()];case 1:return r=o.sent(),[4,(i=r.transaction(me,"readwrite")).objectStore(me).put(t,n)];case 2:return o.sent(),[4,i.complete];case 3:return o.sent(),[2,t]}}))}))}function be(e){return Object(U.__awaiter)(this,void 0,void 0,(function(){var t,n,r;return Object(U.__generator)(this,(function(i){switch(i.label){case 0:return t=Te(e),[4,ye()];case 1:return n=i.sent(),[4,(r=n.transaction(me,"readwrite")).objectStore(me).delete(t)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}}))}))}function we(e,t){return Object(U.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o,a,s;return Object(U.__generator)(this,(function(u){switch(u.label){case 0:return n=Te(e),[4,ye()];case 1:return r=u.sent(),i=r.transaction(me,"readwrite"),[4,(o=i.objectStore(me)).get(n)];case 2:return a=u.sent(),void 0!==(s=t(a))?[3,4]:[4,o.delete(n)];case 3:return u.sent(),[3,6];case 4:return[4,o.put(s,n)];case 5:u.sent(),u.label=6;case 6:return[4,i.complete];case 7:return u.sent(),[2,s]}}))}))}function Te(e){return e.appName+"!"+e.appId}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Se(e){return Object(U.__awaiter)(this,void 0,void 0,(function(){var t,n,r;return Object(U.__generator)(this,(function(i){switch(i.label){case 0:return[4,we(e,(function(n){var r=function(e){return Ce(e||{fid:he(),registrationStatus:0})}(n),i=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine){var n=Promise.reject(Z.create("app-offline"));return{installationEntry:t,registrationPromise:n}}var r={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},i=function(e,t){return Object(U.__awaiter)(this,void 0,void 0,(function(){var n,r;return Object(U.__generator)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,7]),[4,se(e,t)];case 1:return n=i.sent(),[2,ve(e,n)];case 2:return ee(r=i.sent())&&409===r.serverCode?[4,be(e)]:[3,4];case 3:return i.sent(),[3,6];case 4:return[4,ve(e,{fid:t.fid,registrationStatus:0})];case 5:i.sent(),i.label=6;case 6:throw r;case 7:return[2]}}))}))}(e,r);return{installationEntry:r,registrationPromise:i}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:Ie(e)}:{installationEntry:t}}(e,r);return t=i.registrationPromise,i.installationEntry}))];case 1:return(n=i.sent()).fid!==le?[3,3]:(r={},[4,t]);case 2:return[2,(r.installationEntry=i.sent(),r)];case 3:return[2,{installationEntry:n,registrationPromise:t}]}}))}))}function Ie(e){return Object(U.__awaiter)(this,void 0,void 0,(function(){var t,n,r,i;return Object(U.__generator)(this,(function(o){switch(o.label){case 0:return[4,Ee(e)];case 1:t=o.sent(),o.label=2;case 2:return 1!==t.registrationStatus?[3,5]:[4,ue(100)];case 3:return o.sent(),[4,Ee(e)];case 4:return t=o.sent(),[3,2];case 5:return 0!==t.registrationStatus?[3,7]:[4,Se(e)];case 6:return n=o.sent(),r=n.installationEntry,(i=n.registrationPromise)?[2,i]:[2,r];case 7:return[2,t]}}))}))}function Ee(e){return we(e,(function(e){if(!e)throw Z.create("installation-not-found");return Ce(e)}))}function Ce(e){return 1===(t=e).registrationStatus&&t.registrationTime+Q<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t;
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}function _e(e,t){var n=e.appConfig,r=e.platformLoggerProvider;return Object(U.__awaiter)(this,void 0,void 0,(function(){var e,i,o,a,s,u,c;return Object(U.__generator)(this,(function(l){switch(l.label){case 0:return e=function(e,t){var n=t.fid;return te(e)+"/"+n+"/authTokens:generate"}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(n,t),i=oe(n,t),(o=r.getImmediate({optional:!0}))&&i.append("x-firebase-client",o.getPlatformInfoString()),a={installation:{sdkVersion:H}},s={method:"POST",headers:i,body:JSON.stringify(a)},[4,ae((function(){return fetch(e,s)}))];case 1:return(u=l.sent()).ok?[4,u.json()]:[3,3];case 2:return c=l.sent(),[2,ne(c)];case 3:return[4,re("Generate Auth Token",u)];case 4:throw l.sent()}}))}))}function De(e,t){return void 0===t&&(t=!1),Object(U.__awaiter)(this,void 0,void 0,(function(){var n,r,i;return Object(U.__generator)(this,(function(o){switch(o.label){case 0:return[4,we(e.appConfig,(function(r){if(!Ne(r))throw Z.create("not-registered");var i=r.authToken;if(!t&&function(e){return 2===e.requestStatus&&!function(e){var t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+X}(e)}(i))return r;if(1===i.requestStatus)return n=function(e,t){return Object(U.__awaiter)(this,void 0,void 0,(function(){var n,r;return Object(U.__generator)(this,(function(i){switch(i.label){case 0:return[4,ke(e.appConfig)];case 1:n=i.sent(),i.label=2;case 2:return 1!==n.authToken.requestStatus?[3,5]:[4,ue(100)];case 3:return i.sent(),[4,ke(e.appConfig)];case 4:return n=i.sent(),[3,2];case 5:return 0===(r=n.authToken).requestStatus?[2,De(e,t)]:[2,r]}}))}))}(e,t),r;if(!navigator.onLine)throw Z.create("app-offline");var o=function(e){var t={requestStatus:1,requestTime:Date.now()};return Object(U.__assign)(Object(U.__assign)({},e),{authToken:t})}(r);return n=function(e,t){return Object(U.__awaiter)(this,void 0,void 0,(function(){var n,r,i;return Object(U.__generator)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,8]),[4,_e(e,t)];case 1:return n=o.sent(),i=Object(U.__assign)(Object(U.__assign)({},t),{authToken:n}),[4,ve(e.appConfig,i)];case 2:return o.sent(),[2,n];case 3:return!ee(r=o.sent())||401!==r.serverCode&&404!==r.serverCode?[3,5]:[4,be(e.appConfig)];case 4:return o.sent(),[3,7];case 5:return i=Object(U.__assign)(Object(U.__assign)({},t),{authToken:{requestStatus:0}}),[4,ve(e.appConfig,i)];case 6:o.sent(),o.label=7;case 7:throw r;case 8:return[2]}}))}))}(e,o),o}))];case 1:return r=o.sent(),n?[4,n]:[3,3];case 2:return i=o.sent(),[3,4];case 3:i=r.authToken,o.label=4;case 4:return[2,i]}}))}))}function ke(e){return we(e,(function(e){if(!Ne(e))throw Z.create("not-registered");var t,n=e.authToken;return 1===(t=n).requestStatus&&t.requestTime+Q<Date.now()?Object(U.__assign)(Object(U.__assign)({},e),{authToken:{requestStatus:0}}):e}))}function Ne(e){return void 0!==e&&2===e.registrationStatus}function Ae(e){return Object(U.__awaiter)(this,void 0,void 0,(function(){var t;return Object(U.__generator)(this,(function(n){switch(n.label){case 0:return[4,Se(e)];case 1:return(t=n.sent().registrationPromise)?[4,t]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}}))}))}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xe(e,t){return Object(U.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o;return Object(U.__generator)(this,(function(a){switch(a.label){case 0:return n=function(e,t){var n=t.fid;return te(e)+"/"+n}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e,t),r=oe(e,t),i={method:"DELETE",headers:r},[4,ae((function(){return fetch(n,i)}))];case 1:return(o=a.sent()).ok?[3,3]:[4,re("Delete Installation",o)];case 2:throw a.sent();case 3:return[2]}}))}))}function Me(e){return Z.create("missing-app-config-values",{valueName:e})}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(de=V.a).INTERNAL.registerComponent(new q.Component("installations",(function(e){var t=e.getProvider("app").getImmediate(),n={appConfig:
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(e){var t,n;if(!e||!e.options)throw Me("App Configuration");if(!e.name)throw Me("App Name");try{for(var r=Object(U.__values)(["projectId","apiKey","appId"]),i=r.next();!i.done;i=r.next()){var o=i.value;if(!e.options[o])throw Me(o)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t),platformLoggerProvider:e.getProvider("platform-logger")};return{app:t,getId:function(){
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */return function(e){return Object(U.__awaiter)(this,void 0,void 0,(function(){var t,n,r;return Object(U.__generator)(this,(function(i){switch(i.label){case 0:return[4,Se(e.appConfig)];case 1:return t=i.sent(),n=t.installationEntry,(r=t.registrationPromise)?r.catch(console.error):De(e).catch(console.error),[2,n.fid]}}))}))}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(n)},getToken:function(e){return function(e,t){return void 0===t&&(t=!1),Object(U.__awaiter)(this,void 0,void 0,(function(){return Object(U.__generator)(this,(function(n){switch(n.label){case 0:return[4,Ae(e.appConfig)];case 1:return n.sent(),[4,De(e,t)];case 2:return[2,n.sent().token]}}))}))}(n,e)},delete:function(){return function(e){return Object(U.__awaiter)(this,void 0,void 0,(function(){var t,n;return Object(U.__generator)(this,(function(r){switch(r.label){case 0:return[4,we(t=e.appConfig,(function(e){if(!e||0!==e.registrationStatus)return e}))];case 1:if(!(n=r.sent()))return[3,6];if(1!==n.registrationStatus)return[3,2];throw Z.create("delete-pending-registration");case 2:if(2!==n.registrationStatus)return[3,6];if(navigator.onLine)return[3,3];throw Z.create("app-offline");case 3:return[4,xe(t,n)];case 4:return r.sent(),[4,be(t)];case 5:r.sent(),r.label=6;case 6:return[2]}}))}))}(n)}}}),"PUBLIC")),de.registerVersion(K,G);
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Le,Pe,Oe,Re="measurementId",je="firebase_id",Be="origin",Fe="https://www.googletagmanager.com/gtag/js";function Ve(e,t,n){var r=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];window[t].push(arguments)};return window[n]&&"function"==typeof window[n]&&(r=window[n]),window[n]=function(e,t){return function(n,r,i){if(n===Le.EVENT){var o=[];if(i&&i.send_to){var a=i.send_to;Array.isArray(a)||(a=[a]);for(var s=0,u=a;s<u.length;s++){var c=u[s],l=t[c];if(!l){o=[];break}o.push(l)}}if(0===o.length)for(var h=0,d=Object.values(t);h<d.length;h++){var f=d[h];o.push(f)}Promise.all(o).then((function(){return e(Le.EVENT,r,i||{})})).catch((function(e){return console.error(e)}))}else if(n===Le.CONFIG){(t[r]||Promise.resolve()).then((function(){e(Le.CONFIG,r,i)})).catch((function(e){return console.error(e)}))}else e(Le.SET,r)}}(r,e),{gtagCore:r,wrappedGtag:window[n]}}!function(e){e.EVENT="event",e.SET="set",e.CONFIG="config"}(Le||(Le={})),function(e){e.ADD_PAYMENT_INFO="add_payment_info",e.ADD_TO_CART="add_to_cart",e.ADD_TO_WISHLIST="add_to_wishlist",e.BEGIN_CHECKOUT="begin_checkout",e.CHECKOUT_PROGRESS="checkout_progress",e.EXCEPTION="exception",e.GENERATE_LEAD="generate_lead",e.LOGIN="login",e.PAGE_VIEW="page_view",e.PURCHASE="purchase",e.REFUND="refund",e.REMOVE_FROM_CART="remove_from_cart",e.SCREEN_VIEW="screen_view",e.SEARCH="search",e.SELECT_CONTENT="select_content",e.SET_CHECKOUT_OPTION="set_checkout_option",e.SHARE="share",e.SIGN_UP="sign_up",e.TIMING_COMPLETE="timing_complete",e.VIEW_ITEM="view_item",e.VIEW_ITEM_LIST="view_item_list",e.VIEW_PROMOTION="view_promotion",e.VIEW_SEARCH_RESULTS="view_search_results"}(Pe||(Pe={}));var qe,Ue,We=((Oe={})["no-ga-id"]='"'+Re+'" field is empty in Firebase config. Firebase Analytics requires this field to contain a valid measurement ID.',Oe["already-exists"]="A Firebase Analytics instance with the measurement ID ${id}  already exists. Only one Firebase Analytics instance can be created for each measurement ID.",Oe["already-initialized"]="Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",Oe["interop-component-reg-failed"]="Firebase Analytics Interop Component failed to instantiate",Oe),ze=new W.ErrorFactory("analytics","Analytics",We),Ke={},Ge="dataLayer",Qe="gtag",He=!1;function Ye(e){if(He)throw ze.create("already-initialized");e.dataLayerName&&(Ge=e.dataLayerName),e.gtagName&&(Qe=e.gtagName)}function Je(e,t){var n=e.options[Re];if(!n)throw ze.create("no-ga-id");if(null!=Ke[n])throw ze.create("already-exists",{id:n});if(!He){(function(){for(var e=window.document.getElementsByTagName("script"),t=0,n=Object.values(e);t<n.length;t++){var r=n[t];if(r.src&&r.src.includes(Fe))return r}return null}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */)()||function(e){var t=document.createElement("script");t.src=Fe+"?l="+e,t.async=!0,document.head.appendChild(t)}(Ge),function(e){var t=[];Array.isArray(window[e])?t=window[e]:window[e]=t}(Ge);var r=Ve(Ke,Ge,Qe),i=r.wrappedGtag,o=r.gtagCore;Ue=i,qe=o,He=!0}return Ke[n]=
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(e,t,n){return Object(U.__awaiter)(this,void 0,void 0,(function(){var r,i;return Object(U.__generator)(this,(function(o){switch(o.label){case 0:return[4,t.getId()];case 1:return r=o.sent(),n("js",new Date),n(Le.CONFIG,e.options[Re],((i={})[je]=r,i[Be]="firebase",i.update=!0,i)),[2]}}))}))}(e,t,qe),{app:e,logEvent:function(e,t,r){
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
return function(e,t,n,r,i){var o=r||{};i&&i.global||(o=Object(U.__assign)(Object(U.__assign)({},r),{send_to:t})),e(Le.EVENT,n,o||{})}(Ue,n,e,t,r)},setCurrentScreen:function(e,t){return function(e,t,n,r){r&&r.global?e(Le.SET,{screen_name:n}):e(Le.CONFIG,t,{update:!0,screen_name:n})}(Ue,n,e,t)},setUserId:function(e,t){return function(e,t,n,r){r&&r.global?e(Le.SET,{user_id:n}):e(Le.CONFIG,t,{update:!0,user_id:n})}(Ue,n,e,t)},setUserProperties:function(e,t){return function(e,t,n,r){if(r&&r.global){for(var i={},o=0,a=Object.keys(n);o<a.length;o++){var s=a[o];i["user_properties."+s]=n[s]}e(Le.SET,i)}else e(Le.CONFIG,t,{update:!0,user_properties:n})}(Ue,n,e,t)},setAnalyticsCollectionEnabled:function(e){return function(e,t){window["ga-disable-"+e]=!t}(n,e)}}}var Xe="@firebase/analytics",$e="0.2.9",Ze="analytics";!function(e){e.INTERNAL.registerComponent(new q.Component(Ze,(function(e){return Je(e.getProvider("app").getImmediate(),e.getProvider("installations").getImmediate())}),"PUBLIC").setServiceProps({settings:Ye,EventName:Pe})),e.INTERNAL.registerComponent(new q.Component("analytics-internal",(function(e){try{return{logEvent:e.getProvider(Ze).getImmediate().logEvent}}catch(e){throw ze.create("interop-component-reg-failed",{reason:e})}}),"PRIVATE")),e.registerVersion(Xe,$e)}(V.a);n(16);
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var et,tt,nt=((et={})["only-available-in-window"]="This method is available in a Window context.",et["only-available-in-sw"]="This method is available in a service worker context.",et["should-be-overriden"]="This method should be overriden by extended classes.",et["bad-sender-id"]="Please ensure that 'messagingSenderId' is set correctly in the options passed into firebase.initializeApp().",et["permission-default"]="The required permissions were not granted and dismissed instead.",et["permission-blocked"]="The required permissions were not granted and blocked instead.",et["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",et["notifications-blocked"]="Notifications have been blocked.",et["failed-serviceworker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",et["sw-registration-expected"]="A service worker registration was the expected input.",et["get-subscription-failed"]="There was an error when trying to get any existing Push Subscriptions.",et["invalid-saved-token"]="Unable to access details of the saved token.",et["sw-reg-redundant"]="The service worker being used for push was made redundant.",et["token-subscribe-failed"]="A problem occured while subscribing the user to FCM: {$errorInfo}",et["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",et["token-unsubscribe-failed"]="A problem occured while unsubscribing the user from FCM: {$errorInfo}",et["token-update-failed"]="A problem occured while updating the user from FCM: {$errorInfo}",et["token-update-no-token"]="FCM returned no token when updating the user to push.",et["use-sw-before-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",et["invalid-delete-token"]="You must pass a valid token into deleteToken(), i.e. the token from getToken().",et["delete-token-not-found"]="The deletion attempt for token could not be performed as the token was not found.",et["delete-scope-not-found"]="The deletion attempt for service worker scope could not be performed as the scope was not found.",et["bg-handler-function-expected"]="The input to setBackgroundMessageHandler() must be a function.",et["no-window-client-to-msg"]="An attempt was made to message a non-existant window client.",et["unable-to-resubscribe"]="There was an error while re-subscribing the FCM token for push messaging. Will have to resubscribe the user on next visit. {$errorInfo}",et["no-fcm-token-for-resubscribe"]="Could not find an FCM token and as a result, unable to resubscribe. Will have to resubscribe the user on next visit.",et["failed-to-delete-token"]="Unable to delete the currently saved token.",et["no-sw-in-reg"]="Even though the service worker registration was successful, there was a problem accessing the service worker itself.",et["bad-scope"]="The service worker scope must be a string with at least one character.",et["bad-vapid-key"]="The public VAPID key is not a Uint8Array with 65 bytes.",et["bad-subscription"]="The subscription must be a valid PushSubscription.",et["bad-token"]="The FCM Token used for storage / lookup was not a valid token string.",et["failed-delete-vapid-key"]="The VAPID key could not be deleted.",et["invalid-public-vapid-key"]="The public VAPID key must be a string.",et["use-public-key-before-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",et["public-vapid-key-decryption-failed"]="The public VAPID key did not equal 65 bytes when decrypted.",et),rt=new W.ErrorFactory("messaging","Messaging",nt),it=new Uint8Array([4,51,148,247,223,161,235,177,220,3,162,94,21,113,219,72,211,46,237,237,178,52,219,183,71,58,12,143,196,204,225,111,60,140,132,223,171,182,102,62,242,12,212,139,254,227,249,118,47,20,28,99,8,106,111,45,177,26,149,176,206,55,192,156,110]),ot="https://fcmregistrations.googleapis.com/v1";
/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function at(e,t){if(null==e||null==t)return!1;if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(var n=new DataView(e),r=new DataView(t),i=0;i<e.byteLength;i++)if(n.getUint8(i)!==r.getUint8(i))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function st(e){return function(e){var t=new Uint8Array(e);return btoa(String.fromCharCode.apply(String,Object(U.__spread)(t)))}(e).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */!function(e){e.PUSH_MSG_RECEIVED="push-msg-received",e.NOTIFICATION_CLICKED="notification-clicked"}(tt||(tt={}));var ut=function(){function e(){}return e.prototype.getToken=function(e,t,n){return Object(U.__awaiter)(this,void 0,void 0,(function(){var r,i,o,a,s,u;return Object(U.__generator)(this,(function(c){switch(c.label){case 0:return[4,lt(e)];case 1:r=c.sent(),i=ht(t,n),o={method:"POST",headers:r,body:JSON.stringify(i)},c.label=2;case 2:return c.trys.push([2,5,,6]),[4,fetch(ct(e.app),o)];case 3:return[4,c.sent().json()];case 4:return a=c.sent(),[3,6];case 5:throw s=c.sent(),rt.create("token-subscribe-failed",{errorInfo:s});case 6:if(a.error)throw u=a.error.message,rt.create("token-subscribe-failed",{errorInfo:u});if(!a.token)throw rt.create("token-subscribe-no-token");return[2,a.token]}}))}))},e.prototype.updateToken=function(e,t,n,r){return Object(U.__awaiter)(this,void 0,void 0,(function(){var i,o,a,s,u,c;return Object(U.__generator)(this,(function(l){switch(l.label){case 0:return[4,lt(t)];case 1:i=l.sent(),o=ht(n,r),a={method:"PATCH",headers:i,body:JSON.stringify(o)},l.label=2;case 2:return l.trys.push([2,5,,6]),[4,fetch(ct(t.app)+"/"+e.fcmToken,a)];case 3:return[4,l.sent().json()];case 4:return s=l.sent(),[3,6];case 5:throw u=l.sent(),rt.create("token-update-failed",{errorInfo:u});case 6:if(s.error)throw c=s.error.message,rt.create("token-update-failed",{errorInfo:c});if(!s.token)throw rt.create("token-update-no-token");return[2,s.token]}}))}))},e.prototype.deleteToken=function(e,t){return Object(U.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o,a;return Object(U.__generator)(this,(function(s){switch(s.label){case 0:return[4,lt(e)];case 1:n=s.sent(),r={method:"DELETE",headers:n},s.label=2;case 2:return s.trys.push([2,5,,6]),[4,fetch(ct(e.app)+"/"+t.fcmToken,r)];case 3:return[4,s.sent().json()];case 4:if((i=s.sent()).error)throw o=i.error.message,rt.create("token-unsubscribe-failed",{errorInfo:o});return[3,6];case 5:throw a=s.sent(),rt.create("token-unsubscribe-failed",{errorInfo:a});case 6:return[2]}}))}))},e}();function ct(e){return ot+"/projects/"+e.options.projectId+"/registrations"}function lt(e){var t=e.app,n=e.installations;return Object(U.__awaiter)(this,void 0,void 0,(function(){var e;return Object(U.__generator)(this,(function(r){switch(r.label){case 0:return[4,n.getToken()];case 1:return e=r.sent(),[2,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.options.apiKey,"x-goog-firebase-installations-auth":"FIS "+e})]}}))}))}function ht(e,t){var n=st(e.getKey("p256dh")),r=st(e.getKey("auth")),i={web:{endpoint:e.endpoint,p256dh:n,auth:r}};return at(t.buffer,it.buffer)||(i.web.applicationPubKey=st(t)),i}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dt(e){for(var t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(t),r=new Uint8Array(n.length),i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ft="undefined",pt="fcm_token_object_Store";function mt(e){var t=indexedDB.open(ft);t.onerror=function(e){},t.onsuccess=function(n){!function(e,t){if(e.objectStoreNames.contains(pt)){var n=e.transaction(pt).objectStore(pt),r=new ut,i=n.openCursor();i.onerror=function(e){console.warn("Unable to cleanup old IDB.",e)},i.onsuccess=function(){var n=i.result;if(n){var o=n.value;r.deleteToken(t,o),n.continue()}else e.close(),indexedDB.deleteDatabase(ft)}}}(t.result,e)}}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gt=function(){function e(){this.dbPromise=null}return e.prototype.get=function(e){return this.createTransaction((function(t){return t.get(e)}))},e.prototype.getIndex=function(e,t){return this.createTransaction((function(n){return n.index(e).get(t)}))},e.prototype.put=function(e){return this.createTransaction((function(t){return t.put(e)}),"readwrite")},e.prototype.delete=function(e){return this.createTransaction((function(t){return t.delete(e)}),"readwrite")},e.prototype.closeDatabase=function(){return Object(U.__awaiter)(this,void 0,void 0,(function(){return Object(U.__generator)(this,(function(e){switch(e.label){case 0:return this.dbPromise?[4,this.dbPromise]:[3,2];case 1:e.sent().close(),this.dbPromise=null,e.label=2;case 2:return[2]}}))}))},e.prototype.createTransaction=function(e,t){return void 0===t&&(t="readonly"),Object(U.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o;return Object(U.__generator)(this,(function(a){switch(a.label){case 0:return[4,this.getDb()];case 1:return n=a.sent(),r=n.transaction(this.objectStoreName,t),i=r.objectStore(this.objectStoreName),[4,yt(e(i))];case 2:return o=a.sent(),[2,new Promise((function(e,t){r.oncomplete=function(){e(o)},r.onerror=function(){t(r.error)}}))]}}))}))},e.prototype.getDb=function(){var e=this;return this.dbPromise||(this.dbPromise=new Promise((function(t,n){var r=indexedDB.open(e.dbName,e.dbVersion);r.onsuccess=function(){t(r.result)},r.onerror=function(){e.dbPromise=null,n(r.error)},r.onupgradeneeded=function(t){return e.onDbUpgrade(r,t)}}))),this.dbPromise},e}();function yt(e){return new Promise((function(t,n){e.onsuccess=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vt=function(e){function t(t){var n=e.call(this)||this;return n.services=t,n.dbName="fcm_token_details_db",n.dbVersion=4,n.objectStoreName="fcm_token_object_Store",n}return Object(U.__extends)(t,e),t.prototype.onDbUpgrade=function(e,t){var n=e.result;switch(t.oldVersion){case 0:(i=n.createObjectStore(this.objectStoreName,{keyPath:"swScope"})).createIndex("fcmSenderId","fcmSenderId",{unique:!1}),i.createIndex("fcmToken","fcmToken",{unique:!0});case 1:mt(this.services);case 2:var r=(i=e.transaction.objectStore(this.objectStoreName)).openCursor();r.onsuccess=function(){var e=r.result;if(e){var t=e.value,n=Object(U.__assign)({},t);t.createTime||(n.createTime=Date.now()),"string"==typeof t.vapidKey&&(n.vapidKey=dt(t.vapidKey)),"string"==typeof t.auth&&(n.auth=dt(t.auth).buffer),"string"==typeof t.auth&&(n.p256dh=dt(t.p256dh).buffer),"string"==typeof t.fcmPushSet&&delete n.fcmPushSet,e.update(n),e.continue()}};break;case 3:var i,o=(i=e.transaction.objectStore(this.objectStoreName)).openCursor();o.onsuccess=function(){var e=o.result;if(e){var t=e.value,n=Object(U.__assign)({},t);"string"==typeof t.fcmPushSet&&delete n.fcmPushSet,e.update(n),e.continue()}}}},t.prototype.getTokenDetailsFromToken=function(e){return Object(U.__awaiter)(this,void 0,void 0,(function(){return Object(U.__generator)(this,(function(t){if(!e)throw rt.create("bad-token");return bt({fcmToken:e}),[2,this.getIndex("fcmToken",e)]}))}))},t.prototype.getTokenDetailsFromSWScope=function(e){return Object(U.__awaiter)(this,void 0,void 0,(function(){return Object(U.__generator)(this,(function(t){if(!e)throw rt.create("bad-scope");return bt({swScope:e}),[2,this.get(e)]}))}))},t.prototype.saveTokenDetails=function(e){return Object(U.__awaiter)(this,void 0,void 0,(function(){return Object(U.__generator)(this,(function(t){if(!e.swScope)throw rt.create("bad-scope");if(!e.vapidKey)throw rt.create("bad-vapid-key");if(!e.endpoint||!e.auth||!e.p256dh)throw rt.create("bad-subscription");if(!e.fcmSenderId)throw rt.create("bad-sender-id");if(!e.fcmToken)throw rt.create("bad-token");return bt(e),[2,this.put(e)]}))}))},t.prototype.deleteToken=function(e){return Object(U.__awaiter)(this,void 0,void 0,(function(){var t;return Object(U.__generator)(this,(function(n){switch(n.label){case 0:return"string"!=typeof e||0===e.length?[2,Promise.reject(rt.create("invalid-delete-token"))]:[4,this.getTokenDetailsFromToken(e)];case 1:if(!(t=n.sent()))throw rt.create("delete-token-not-found");return[4,this.delete(t.swScope)];case 2:return n.sent(),[2,t]}}))}))},t}(gt);function bt(e){if(e.fcmToken&&("string"!=typeof e.fcmToken||0===e.fcmToken.length))throw rt.create("bad-token");if(e.swScope&&("string"!=typeof e.swScope||0===e.swScope.length))throw rt.create("bad-scope");if(e.vapidKey&&(!(e.vapidKey instanceof Uint8Array)||65!==e.vapidKey.length))throw rt.create("bad-vapid-key");if(e.endpoint&&("string"!=typeof e.endpoint||0===e.endpoint.length))throw rt.create("bad-subscription");if(e.auth&&!(e.auth instanceof ArrayBuffer))throw rt.create("bad-subscription");if(e.p256dh&&!(e.p256dh instanceof ArrayBuffer))throw rt.create("bad-subscription");if(e.fcmSenderId&&("string"!=typeof e.fcmSenderId||0===e.fcmSenderId.length))throw rt.create("bad-sender-id")}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.dbName="fcm_vapid_details_db",t.dbVersion=1,t.objectStoreName="fcm_vapid_object_Store",t}return Object(U.__extends)(t,e),t.prototype.onDbUpgrade=function(e){e.result.createObjectStore(this.objectStoreName,{keyPath:"swScope"})},t.prototype.getVapidFromSWScope=function(e){return Object(U.__awaiter)(this,void 0,void 0,(function(){var t;return Object(U.__generator)(this,(function(n){switch(n.label){case 0:if("string"!=typeof e||0===e.length)throw rt.create("bad-scope");return[4,this.get(e)];case 1:return[2,(t=n.sent())?t.vapidKey:void 0]}}))}))},t.prototype.saveVapidDetails=function(e,t){return Object(U.__awaiter)(this,void 0,void 0,(function(){var n;return Object(U.__generator)(this,(function(r){if("string"!=typeof e||0===e.length)throw rt.create("bad-scope");if(null===t||65!==t.length)throw rt.create("bad-vapid-key");return n={swScope:e,vapidKey:t},[2,this.put(n)]}))}))},t.prototype.deleteVapidDetails=function(e){return Object(U.__awaiter)(this,void 0,void 0,(function(){var t;return Object(U.__generator)(this,(function(n){switch(n.label){case 0:return[4,this.getVapidFromSWScope(e)];case 1:if(!(t=n.sent()))throw rt.create("delete-scope-not-found");return[4,this.delete(e)];case 2:return n.sent(),[2,t]}}))}))},t}(gt),Tt=function(){function e(e){var t=this;this.services=e,this.vapidDetailsModel=new wt,this.subscriptionManager=new ut;var n=e.app;if(this.app=n,!n.options.messagingSenderId||"string"!=typeof n.options.messagingSenderId)throw rt.create("bad-sender-id");this.INTERNAL={delete:function(){return t.delete()}},this.tokenDetailsModel=new vt(e)}return e.prototype.getToken=function(){return Object(U.__awaiter)(this,void 0,void 0,(function(){var e,t,n,r,i;return Object(U.__generator)(this,(function(o){switch(o.label){case 0:return"default"!==(e=this.getNotificationPermission())?[3,2]:[4,this.requestNotificationPermission()];case 1:e=o.sent(),o.label=2;case 2:if("granted"!==e)throw rt.create("notifications-blocked");return[4,this.getSWRegistration_()];case 3:return t=o.sent(),[4,this.getPublicVapidKey_()];case 4:return n=o.sent(),[4,this.getPushSubscription(t,n)];case 5:return r=o.sent(),[4,this.tokenDetailsModel.getTokenDetailsFromSWScope(t.scope)];case 6:return(i=o.sent())?[2,this.manageExistingToken(t,r,n,i)]:[2,this.getNewToken(t,r,n)]}}))}))},e.prototype.manageExistingToken=function(e,t,n,r){return Object(U.__awaiter)(this,void 0,void 0,(function(){return Object(U.__generator)(this,(function(i){switch(i.label){case 0:return function(e,t,n){if(!n.vapidKey||!at(t.buffer,n.vapidKey.buffer))return!1;var r=e.endpoint===n.endpoint,i=at(e.getKey("auth"),n.auth),o=at(e.getKey("p256dh"),n.p256dh);return r&&i&&o}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t,n,r)?Date.now()<r.createTime+6048e5?[2,r.fcmToken]:[2,this.updateToken(e,t,n,r)]:[3,1];case 1:return[4,this.deleteTokenFromDB(r.fcmToken)];case 2:return i.sent(),[2,this.getNewToken(e,t,n)];case 3:return[2]}}))}))},e.prototype.updateToken=function(e,t,n,r){return Object(U.__awaiter)(this,void 0,void 0,(function(){var i,o,a;return Object(U.__generator)(this,(function(s){switch(s.label){case 0:return s.trys.push([0,4,,6]),[4,this.subscriptionManager.updateToken(r,this.services,t,n)];case 1:return i=s.sent(),o={swScope:e.scope,vapidKey:n,fcmSenderId:this.services.app.options.messagingSenderId,fcmToken:i,createTime:Date.now(),endpoint:t.endpoint,auth:t.getKey("auth"),p256dh:t.getKey("p256dh")},[4,this.tokenDetailsModel.saveTokenDetails(o)];case 2:return s.sent(),[4,this.vapidDetailsModel.saveVapidDetails(e.scope,n)];case 3:return s.sent(),[2,i];case 4:return a=s.sent(),[4,this.deleteToken(r.fcmToken)];case 5:throw s.sent(),a;case 6:return[2]}}))}))},e.prototype.getNewToken=function(e,t,n){return Object(U.__awaiter)(this,void 0,void 0,(function(){var r,i;return Object(U.__generator)(this,(function(o){switch(o.label){case 0:return[4,this.subscriptionManager.getToken(this.services,t,n)];case 1:return r=o.sent(),i={swScope:e.scope,vapidKey:n,fcmSenderId:this.app.options.messagingSenderId,fcmToken:r,createTime:Date.now(),endpoint:t.endpoint,auth:t.getKey("auth"),p256dh:t.getKey("p256dh")},[4,this.tokenDetailsModel.saveTokenDetails(i)];case 2:return o.sent(),[4,this.vapidDetailsModel.saveVapidDetails(e.scope,n)];case 3:return o.sent(),[2,r]}}))}))},e.prototype.deleteToken=function(e){return Object(U.__awaiter)(this,void 0,void 0,(function(){var t,n;return Object(U.__generator)(this,(function(r){switch(r.label){case 0:return[4,this.deleteTokenFromDB(e)];case 1:return r.sent(),[4,this.getSWRegistration_()];case 2:return(t=r.sent())?[4,t.pushManager.getSubscription()]:[3,4];case 3:if(n=r.sent())return[2,n.unsubscribe()];r.label=4;case 4:return[2,!0]}}))}))},e.prototype.deleteTokenFromDB=function(e){return Object(U.__awaiter)(this,void 0,void 0,(function(){var t,n;return Object(U.__generator)(this,(function(r){switch(r.label){case 0:return[4,this.tokenDetailsModel.deleteToken(e)];case 1:t=r.sent(),r.label=2;case 2:return r.trys.push([2,4,,5]),[4,this.subscriptionManager.deleteToken(this.services,t)];case 3:return r.sent(),[3,5];case 4:return n=r.sent(),console.error(n),[3,5];case 5:return[2]}}))}))},e.prototype.getPushSubscription=function(e,t){return Object(U.__awaiter)(this,void 0,void 0,(function(){var n;return Object(U.__generator)(this,(function(r){switch(r.label){case 0:return[4,e.pushManager.getSubscription()];case 1:return(n=r.sent())?[2,n]:[2,e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:t})]}}))}))},e.prototype.requestPermission=function(){throw rt.create("only-available-in-window")},e.prototype.useServiceWorker=function(e){throw rt.create("only-available-in-window")},e.prototype.usePublicVapidKey=function(e){throw rt.create("only-available-in-window")},e.prototype.onMessage=function(e,t,n){throw rt.create("only-available-in-window")},e.prototype.onTokenRefresh=function(e,t,n){throw rt.create("only-available-in-window")},e.prototype.setBackgroundMessageHandler=function(e){throw rt.create("only-available-in-sw")},e.prototype.delete=function(){return Object(U.__awaiter)(this,void 0,void 0,(function(){return Object(U.__generator)(this,(function(e){switch(e.label){case 0:return[4,Promise.all([this.tokenDetailsModel.closeDatabase(),this.vapidDetailsModel.closeDatabase()])];case 1:return e.sent(),[2]}}))}))},e.prototype.getNotificationPermission=function(){return Notification.permission},e.prototype.requestNotificationPermission=function(){return Object(U.__awaiter)(this,void 0,void 0,(function(){return Object(U.__generator)(this,(function(e){return Notification.requestPermission?[2,Notification.requestPermission()]:[2,Notification.permission]}))}))},e.prototype.getTokenDetailsModel=function(){return this.tokenDetailsModel},e.prototype.getVapidDetailsModel=function(){return this.vapidDetailsModel},e.prototype.getSubscriptionManager=function(){return this.subscriptionManager},e}();var St=function(e){function t(t){var n=e.call(this,t)||this;return n.bgMessageHandler=null,self.addEventListener("push",(function(e){n.onPush(e)})),self.addEventListener("pushsubscriptionchange",(function(e){n.onSubChange(e)})),self.addEventListener("notificationclick",(function(e){n.onNotificationClick(e)})),n}return Object(U.__extends)(t,e),t.prototype.onPush=function(e){e.waitUntil(this.onPush_(e))},t.prototype.onSubChange=function(e){e.waitUntil(this.onSubChange_(e))},t.prototype.onNotificationClick=function(e){e.waitUntil(this.onNotificationClick_(e))},t.prototype.onPush_=function(e){return Object(U.__awaiter)(this,void 0,void 0,(function(){var t,n,r,i,o,a;return Object(U.__generator)(this,(function(s){switch(s.label){case 0:if(!e.data)return[2];try{t=e.data.json()}catch(e){return[2]}return[4,this.hasVisibleClients_()];case 1:return s.sent()?[2,this.sendMessageToWindowClients_(t)]:(n=this.getNotificationData_(t))?(r=n.title||"",[4,this.getSWRegistration_()]):[3,3];case 2:return i=s.sent(),o=n.actions,a=Notification.maxActions,o&&a&&o.length>a&&console.warn("This browser only supports "+a+" actions.The remaining actions will not be displayed."),[2,i.showNotification(r,n)];case 3:return this.bgMessageHandler?[4,this.bgMessageHandler(t)]:[3,5];case 4:return s.sent(),[2];case 5:return[2]}}))}))},t.prototype.onSubChange_=function(e){return Object(U.__awaiter)(this,void 0,void 0,(function(){var e,t,n,r;return Object(U.__generator)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this.getSWRegistration_()];case 1:return e=i.sent(),[3,3];case 2:throw t=i.sent(),rt.create("unable-to-resubscribe",{errorInfo:t});case 3:return i.trys.push([3,5,,8]),[4,e.pushManager.getSubscription()];case 4:return i.sent(),[3,8];case 5:return n=i.sent(),[4,this.getTokenDetailsModel().getTokenDetailsFromSWScope(e.scope)];case 6:if(!(r=i.sent()))throw n;return[4,this.deleteToken(r.fcmToken)];case 7:throw i.sent(),n;case 8:return[2]}}))}))},t.prototype.onNotificationClick_=function(e){return Object(U.__awaiter)(this,void 0,void 0,(function(){var t,n,r,i;return Object(U.__generator)(this,(function(o){switch(o.label){case 0:if(!(e.notification&&e.notification.data&&e.notification.data.FCM_MSG))return[2];if(e.action)return[2];if(e.stopImmediatePropagation(),e.notification.close(),!(t=e.notification.data.FCM_MSG).notification)return[2];if(!(n=t.fcmOptions&&t.fcmOptions.link||t.notification.click_action)){if(!(t.data&&"google.c.a.c_id"in t.data))return[2];n=self.location.origin}return[4,this.getWindowClient_(n)];case 1:return(r=o.sent())?[3,4]:[4,self.clients.openWindow(n)];case 2:return r=o.sent(),[4,(a=3e3,new Promise((function(e){setTimeout(e,a)})))];case 3:return o.sent(),[3,6];case 4:return[4,r.focus()];case 5:r=o.sent(),o.label=6;case 6:return r?(delete t.notification,delete t.fcmOptions,i=Et(tt.NOTIFICATION_CLICKED,t),[2,this.attemptToMessageClient_(r,i)]):[2]}var a;
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}))}))},t.prototype.getNotificationData_=function(e){var t;if(e&&"object"==typeof e.notification){var n=Object(U.__assign)({},e.notification);return n.data=Object(U.__assign)(Object(U.__assign)({},e.notification.data),((t={}).FCM_MSG=e,t)),n}},t.prototype.setBackgroundMessageHandler=function(e){if(!e||"function"!=typeof e)throw rt.create("bg-handler-function-expected");this.bgMessageHandler=e},t.prototype.getWindowClient_=function(e){return Object(U.__awaiter)(this,void 0,void 0,(function(){var t,n,r,i;return Object(U.__generator)(this,(function(o){switch(o.label){case 0:return t=new URL(e,self.location.href).href,[4,It()];case 1:for(n=o.sent(),r=null,i=0;i<n.length;i++)if(new URL(n[i].url,self.location.href).href===t){r=n[i];break}return[2,r]}}))}))},t.prototype.attemptToMessageClient_=function(e,t){return Object(U.__awaiter)(this,void 0,void 0,(function(){return Object(U.__generator)(this,(function(n){if(!e)throw rt.create("no-window-client-to-msg");return e.postMessage(t),[2]}))}))},t.prototype.hasVisibleClients_=function(){return Object(U.__awaiter)(this,void 0,void 0,(function(){return Object(U.__generator)(this,(function(e){switch(e.label){case 0:return[4,It()];case 1:return[2,e.sent().some((function(e){return"visible"===e.visibilityState&&!e.url.startsWith("chrome-extension://")}))]}}))}))},t.prototype.sendMessageToWindowClients_=function(e){return Object(U.__awaiter)(this,void 0,void 0,(function(){var t,n,r=this;return Object(U.__generator)(this,(function(i){switch(i.label){case 0:return[4,It()];case 1:return t=i.sent(),n=Et(tt.PUSH_MSG_RECEIVED,e),[4,Promise.all(t.map((function(e){return r.attemptToMessageClient_(e,n)})))];case 2:return i.sent(),[2]}}))}))},t.prototype.getSWRegistration_=function(){return Object(U.__awaiter)(this,void 0,void 0,(function(){return Object(U.__generator)(this,(function(e){return[2,self.registration]}))}))},t.prototype.getPublicVapidKey_=function(){return Object(U.__awaiter)(this,void 0,void 0,(function(){var e,t;return Object(U.__generator)(this,(function(n){switch(n.label){case 0:return[4,this.getSWRegistration_()];case 1:if(!(e=n.sent()))throw rt.create("sw-registration-expected");return[4,this.getVapidDetailsModel().getVapidFromSWScope(e.scope)];case 2:return null==(t=n.sent())?[2,it]:[2,t]}}))}))},t}(Tt);function It(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function Et(e,t){return{firebaseMessagingType:e,firebaseMessagingData:t}}var Ct=function(e){function t(t){var n=e.call(this,t)||this;return n.registrationToUse=null,n.publicVapidKeyToUse=null,n.messageObserver=null,n.tokenRefreshObserver=null,n.onMessageInternal=Object(W.createSubscribe)((function(e){n.messageObserver=e})),n.onTokenRefreshInternal=Object(W.createSubscribe)((function(e){n.tokenRefreshObserver=e})),n.setupSWMessageListener_(),n}return Object(U.__extends)(t,e),t.prototype.requestPermission=function(){return Object(U.__awaiter)(this,void 0,void 0,(function(){var e;return Object(U.__generator)(this,(function(t){switch(t.label){case 0:return"granted"===Notification.permission?[2]:[4,Notification.requestPermission()];case 1:if("granted"===(e=t.sent()))return[2];throw"denied"===e?rt.create("permission-blocked"):rt.create("permission-default")}}))}))},t.prototype.useServiceWorker=function(e){if(!(e instanceof ServiceWorkerRegistration))throw rt.create("sw-registration-expected");if(null!=this.registrationToUse)throw rt.create("use-sw-before-get-token");this.registrationToUse=e},t.prototype.usePublicVapidKey=function(e){if("string"!=typeof e)throw rt.create("invalid-public-vapid-key");if(null!=this.publicVapidKeyToUse)throw rt.create("use-public-key-before-get-token");var t=dt(e);if(65!==t.length)throw rt.create("public-vapid-key-decryption-failed");this.publicVapidKeyToUse=t},t.prototype.onMessage=function(e,t,n){return"function"==typeof e?this.onMessageInternal(e,t,n):this.onMessageInternal(e)},t.prototype.onTokenRefresh=function(e,t,n){return"function"==typeof e?this.onTokenRefreshInternal(e,t,n):this.onTokenRefreshInternal(e)},t.prototype.waitForRegistrationToActivate_=function(e){var t=e.installing||e.waiting||e.active;return new Promise((function(n,r){if(t)if("activated"!==t.state)if("redundant"!==t.state){var i=function(){if("activated"===t.state)n(e);else{if("redundant"!==t.state)return;r(rt.create("sw-reg-redundant"))}t.removeEventListener("statechange",i)};t.addEventListener("statechange",i)}else r(rt.create("sw-reg-redundant"));else n(e);else r(rt.create("no-sw-in-reg"))}))},t.prototype.getSWRegistration_=function(){var e=this;return this.registrationToUse?this.waitForRegistrationToActivate_(this.registrationToUse):(this.registrationToUse=null,navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"}).catch((function(e){throw rt.create("failed-serviceworker-registration",{browserErrorMessage:e.message})})).then((function(t){return e.waitForRegistrationToActivate_(t).then((function(){return e.registrationToUse=t,t.update(),t}))})))},t.prototype.getPublicVapidKey_=function(){return Object(U.__awaiter)(this,void 0,void 0,(function(){return Object(U.__generator)(this,(function(e){return this.publicVapidKeyToUse?[2,this.publicVapidKeyToUse]:[2,it]}))}))},t.prototype.setupSWMessageListener_=function(){var e=this;navigator.serviceWorker.addEventListener("message",(function(t){return Object(U.__awaiter)(e,void 0,void 0,(function(){var e,n,r,i,o;return Object(U.__generator)(this,(function(a){switch(a.label){case 0:return t.data&&t.data.firebaseMessagingType&&t.data.firebaseMessagingData?(e=t.data,n=e.firebaseMessagingType,r=e.firebaseMessagingData,this.messageObserver&&this.messageObserver.next(r),(i=r.data)&&"google.c.a.c_id"in i&&"1"===i["google.c.a.e"]?(o=function(e){switch(e){case tt.NOTIFICATION_CLICKED:return"notification_open";case tt.PUSH_MSG_RECEIVED:return"notification_foreground";default:throw new Error}}(n),[4,this.services.analyticsProvider.get()]):[3,2]):[2];case 1:a.sent().logEvent(o,{message_name:i["google.c.a.c_l"],message_id:i["google.c.a.c_id"],message_time:i["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)}),a.label=2;case 2:return[2]}}))}))}),!1)},t}(Tt);var _t="@firebase/messaging",Dt="0.6.0";function kt(){return self&&"ServiceWorkerGlobalScope"in self?"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey"):navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}!
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(e){var t={isSupported:kt};e.INTERNAL.registerComponent(new q.Component("messaging",(function(e){var t={app:e.getProvider("app").getImmediate(),installations:e.getProvider("installations").getImmediate(),analyticsProvider:e.getProvider("analytics-internal")};if(!kt())throw rt.create("unsupported-browser");return self&&"ServiceWorkerGlobalScope"in self?new St(t):new Ct(t)}),"PUBLIC").setServiceProps(t)),e.registerVersion(_t,Dt)}(V.a);B.initializeApp({apiKey:"AIzaSyB9KC9Q3NzMt7b6TspNcKxqWqnzzPLvdFg",authDomain:"testgdproject-1570036439931.firebaseapp.com",databaseURL:"https://testgdproject-1570036439931.firebaseio.com",projectId:"testgdproject-1570036439931",storageBucket:"testgdproject-1570036439931.appspot.com",messagingSenderId:"199844453643",appId:"1:199844453643:web:4aa7ba97d1ae2e428b560e"});var Nt=function(){function e(e){var t=this;this.messaging=B.messaging(),this.messaging.onMessage((function(t){console.log("Message received. ",t);var n=t.data;e.notificationsManager.createNotificaction(n)})),this.messaging.onTokenRefresh((function(){t.messaging.getToken().then((function(t){console.log("FCM token refreshed:",t),B.firestore().collection("fcmTokens").doc(t).set({email:e.userInfo.emailAddress})})).catch((function(e){console.log("Unable to retrieve refreshed token ",e)}))})),window.getMessagingToken=function(){B.messaging().getToken().then((function(e){console.log(e)})).catch((function(e){console.error(e)}))},window.saveMessagingDeviceToken=function(){var t=this;sessionStorage.getItem("deviceToken")||B.messaging().getToken().then((function(n){n?(console.log("FCM token generated:",n),B.firestore().collection("fcmTokens").doc(n).set({email:e.userInfo.emailAddress}),sessionStorage.setItem("deviceToken",n)):t.requestNotificationsPermissions()})).catch((function(e){console.error("Unable to get FCM token.",e)}))}}return e.prototype.requestNotificationsPermissions=function(){console.log("Requesting notifications permission..."),B.messaging().requestPermission().then((function(){console.log("Notification permission granted."),window.saveMessagingDeviceToken()})).catch((function(e){console.error("Unable to get permission to notify:",e)}))},e}(),At=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},xt=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},Mt=new j,Lt=new Nt(Mt);(window.thereIsMessaging=!0,"serviceWorker"in navigator&&window.addEventListener("load",(function(){navigator.serviceWorker.register("/service-worker.js").then((function(e){console.log("Service worker registered.",e),window.thereIsMessaging&&Lt.messaging.useServiceWorker(e)})).catch((function(e){console.error("Service Worker Error",e)}))})),window.getCurrentUser=function(){return Mt.userInfo},window.BroadcastChannel)?new BroadcastChannel("app-channel").onmessage=function(e){"newNotification"===e.data.action&&(console.log("Add notification to the list."),Mt.notificationsManager.createNotificaction(e.data.content))}:console.warn("This browser does not support BroadcastChannel.");document.getElementById("sampleProjectBtn").onclick=function(){document.getElementById("projectsListBtn").onclick=null,Mt.saveBtn.style.visibility="hidden",Mt.projectsListBtn.classList.add("locked"),Mt.start("1D4ESY97zKvJoZ1BWeLWYq8GxhQNWsXpg")};var Pt,Ot="344446892746-36ebkcl04viq3poe73mb3dkhr79lspqk.apps.googleusercontent.com";Pt="production"===Object({GOOGLE_CLIENT_ID:"344446892746-36ebkcl04viq3poe73mb3dkhr79lspqk.apps.googleusercontent.com",GOOGLE_API_KEY_DEV:"AIzaSyBuHx9BXXCRFSKiLzjinZgK_2ys58ynGew",GOOGLE_API_KEY_PROD:"AIzaSyDiGyyxn_sPAvr2Mox44J6lPurG0XhQa7c"}).PROCESS?"AIzaSyDiGyyxn_sPAvr2Mox44J6lPurG0XhQa7c":"AIzaSyBuHx9BXXCRFSKiLzjinZgK_2ys58ynGew";var Rt,jt=["https://www.googleapis.com/discovery/v1/apis/drive/v3/rest"],Bt="https://www.googleapis.com/auth/drive",Ft=document.getElementById("authorizeBtn"),Vt=document.getElementById("signoutBtn");function qt(){gapi.client.init({apiKey:Pt,clientId:Ot,discoveryDocs:jt,scope:Bt}).then((function(){gapi.auth2.getAuthInstance().isSignedIn.listen(Ut),Ut(gapi.auth2.getAuthInstance().isSignedIn.get()),Ft.onclick=Wt,Vt.onclick=zt}),(function(e){console.log(JSON.stringify(e,null,2))}))}function Ut(e){if(e){console.log("Authorized.");var t=c.getUrlParams(window.location.href).id;Mt.modalDialogContent.firstElementChild&&Mt.closeModalDialog(),Mt.setUserInfo(),Mt.start(t)}else console.log("Not authorized"),Mt.showModalDialog(Kt,"opaque",!1),document.querySelector("header").style.display="none",document.querySelector("main").style.display="none",Mt.projectsListContainer.style.display="none",c.emptyNode(Mt.projectsList),history.replaceState({page:"Sign in dialog"},"Sign in dialog",location.href.replace(location.search,""))}function Wt(){gapi.auth2.getAuthInstance().signIn()}function zt(){gapi.auth2.getAuthInstance().signOut()}(Rt=document.createElement("script")).type="text/javascript",Rt.defer=!0,Rt.onload=function(){gapi.load("client:auth2",qt)},Rt.src="https://apis.google.com/js/api.js",document.querySelector("body").appendChild(Rt);var Kt=document.getElementById("authorizeDialog");var Gt,Qt=null,Ht=document.getElementById("installBtn");Ht.addEventListener("click",(function(e){Qt.prompt(),e.target.hidden=!0,Qt.userChoice.then((function(e){"accepted"===e.outcome?console.log("User accepted the A2HS prompt",e):console.log("User dismissed the A2HS prompt",e),Qt=null}))})),window.addEventListener("beforeinstallprompt",(function(e){e.preventDefault(),Qt=e,Ht.removeAttribute("hidden")})),window.addEventListener("appinstalled",(function(e){console.log("VisualARQ Drawings Viewer was installed.",e)})),Mt.drawingsBtns.querySelector(".dropdown-content").addEventListener("click",(function(e){return At(this,void 0,void 0,(function(){var t,n,r,i;return xt(this,(function(o){switch(o.label){case 0:if(Gt&&Gt.classList.remove("active"),Gt=e.target,t=Gt.dataset.id,Mt.drawingsBtns.children[0].innerText=Gt.innerText,Gt.classList.add("active"),n=Mt.currentWorkspace.drawings.find((function(e){return e.id===t})),void 0!==Mt.currentWorkspace.drawingsStylesTag)return[3,6];if(void 0===Mt.currentWorkspace.drawingsStylesId)return[3,5];r=void 0,o.label=1;case 1:return o.trys.push([1,3,,4]),[4,h.getFileContent(Mt.currentWorkspace.drawingsStylesId)];case 2:return r=o.sent(),[3,4];case 3:return o.sent(),console.error("Error while trying to fetch the drawings styles."),[3,4];case 4:return r&&((i=document.createElement("style")).innerText=r.body,document.head.appendChild(i),Mt.currentWorkspace.drawingsStylesTag=i),[3,6];case 5:console.warn("This project doesn't have a css styles file for the drawings."),o.label=6;case 6:return void 0!==n.content?Mt.currentWorkspace.setDrawing(n):(Mt.showViewportDialog("loader","Loading drawing"),h.getFileContent(t).then((function(e){n.setContent(e.body),Mt.currentWorkspace.setDrawing(n),Mt.hideViewportMessage(),console.log("Drawing fetched.")}),(function(e){console.log(e)}))),[2]}}))}))}));for(var Yt=document.getElementsByClassName("dropdown-container"),Jt=function(e){Yt[e].children[0].addEventListener("click",(function(){Yt[e].classList.toggle("open")})),Yt[e].addEventListener("mouseleave",(function(e){e.currentTarget.classList.remove("open")}))},Xt=0;Xt<Yt.length;Xt++)Jt(Xt);var $t=document.getElementById("sideNavToggle");$t.addEventListener("click",(function(){document.getElementById("sideNavContainer").classList.toggle("active"),$t.classList.toggle("active")}))}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3RzbGliL3RzbGliLmVzNi5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL3V0aWwvZGlzdC9pbmRleC5janMuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS9jb21wb25lbnQvZGlzdC9pbmRleC5janMuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS9hcHAvZGlzdC9pbmRleC5janMuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2ZpcmViYXNlL2FwcC9kaXN0L2luZGV4LmNqcy5qcyIsIndlYnBhY2s6Ly8vKHdlYnBhY2spL2J1aWxkaW4vZ2xvYmFsLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvbG9nZ2VyL2Rpc3QvaW5kZXguZXNtLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9pZGIvYnVpbGQvaWRiLmpzIiwid2VicGFjazovLy8uL3NyYy9zdHlsZXMvc3R5bGVzLnNjc3M/NDExYSIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbmplY3RTdHlsZXNJbnRvU3R5bGVUYWcuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3N0eWxlcy9zdHlsZXMuc2NzcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvYXBpLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9nZXRVcmwuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Fzc2V0cy9pY29ucy9oYW1idXJnZXJJY29uLnN2ZyIsIndlYnBhY2s6Ly8vLi9zcmMvYXNzZXRzL2ljb25zL2Nyb3NzSWNvbi5zdmciLCJ3ZWJwYWNrOi8vLy4vc3JjL2Fzc2V0cy9pY29ucy9wcm9qZWN0c0xpc3RJY29uLnN2ZyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL2ZpcmVzdG9yZS9kaXN0L2luZGV4LmNqcy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcHJvY2Vzcy9icm93c2VyLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2Uvd2ViY2hhbm5lbC13cmFwcGVyL2Rpc3QvaW5kZXguZXNtLmpzIiwid2VicGFjazovLy8uL3NyYy9nZW9tZXRyeS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbWFpblBhbmVsLnRzIiwid2VicGFjazovLy8uL3NyYy9nZW5lcmljcy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZHJhd2luZy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYXBpLmpzIiwid2VicGFjazovLy8uL3NyYy9jb21tZW50LnRzIiwid2VicGFjazovLy8uL3NyYy9jb21tZW50Rm9ybS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvd29ya3NwYWNlLnRzIiwid2VicGFjazovLy8uL3NyYy9hcHBUb29scy90b29sLnRzIiwid2VicGFjazovLy8uL3NyYy9hcHBUb29scy9lbGVtZW50U2VsZWN0aW9uLnRzIiwid2VicGFjazovLy8uL3NyYy9hcHBUb29scy9hZGRDb21tZW50LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvaW5zdGFsbGF0aW9ucy9kaXN0L2luZGV4LmVzbS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvYXBwVG9vbHMvZWxlbWVudERhdGEudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3NoYXJlUHJvamVjdC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbm90aWZpY2F0aW9uc01hbmFnZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3JlbmFtZVByb2plY3QudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbnRleHRNZW51LnRzIiwid2VicGFjazovLy8uL3NyYy9wcm9qZWN0SXRlbS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYXBwLnRzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvYW5hbHl0aWNzL2Rpc3QvaW5kZXguZXNtLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvbWVzc2FnaW5nL2Rpc3QvaW5kZXguZXNtLmpzIiwid2VicGFjazovLy8uL3NyYy9tZXNzYWdpbmcudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2luZGV4LnRzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiZXh0ZW5kU3RhdGljcyIsImIiLCJzZXRQcm90b3R5cGVPZiIsIl9fcHJvdG9fXyIsIkFycmF5IiwiX19leHRlbmRzIiwiX18iLCJ0aGlzIiwiY29uc3RydWN0b3IiLCJfX2Fzc2lnbiIsImFzc2lnbiIsImFyZ3VtZW50cyIsImxlbmd0aCIsImFwcGx5IiwiX19yZXN0IiwiZSIsImluZGV4T2YiLCJnZXRPd25Qcm9wZXJ0eVN5bWJvbHMiLCJwcm9wZXJ0eUlzRW51bWVyYWJsZSIsIl9fZGVjb3JhdGUiLCJkZWNvcmF0b3JzIiwidGFyZ2V0IiwiZGVzYyIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsIlJlZmxlY3QiLCJkZWNvcmF0ZSIsIl9fcGFyYW0iLCJwYXJhbUluZGV4IiwiZGVjb3JhdG9yIiwiX19tZXRhZGF0YSIsIm1ldGFkYXRhS2V5IiwibWV0YWRhdGFWYWx1ZSIsIm1ldGFkYXRhIiwiX19hd2FpdGVyIiwidGhpc0FyZyIsIl9hcmd1bWVudHMiLCJQIiwiZ2VuZXJhdG9yIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJmdWxmaWxsZWQiLCJzdGVwIiwibmV4dCIsInJlamVjdGVkIiwicmVzdWx0IiwiZG9uZSIsInRoZW4iLCJfX2dlbmVyYXRvciIsImJvZHkiLCJmIiwieSIsImciLCJfIiwibGFiZWwiLCJzZW50IiwidHJ5cyIsIm9wcyIsInZlcmIiLCJpdGVyYXRvciIsInYiLCJvcCIsIlR5cGVFcnJvciIsInBvcCIsInB1c2giLCJfX2V4cG9ydFN0YXIiLCJfX3ZhbHVlcyIsIl9fcmVhZCIsImFyIiwiZXJyb3IiLCJfX3NwcmVhZCIsImNvbmNhdCIsIl9fc3ByZWFkQXJyYXlzIiwiaWwiLCJrIiwiYSIsImoiLCJqbCIsIl9fYXdhaXQiLCJfX2FzeW5jR2VuZXJhdG9yIiwiYXN5bmNJdGVyYXRvciIsInEiLCJyZXN1bWUiLCJmdWxmaWxsIiwic2V0dGxlIiwic2hpZnQiLCJfX2FzeW5jRGVsZWdhdG9yIiwiX19hc3luY1ZhbHVlcyIsIl9fbWFrZVRlbXBsYXRlT2JqZWN0IiwiY29va2VkIiwicmF3IiwiX19pbXBvcnRTdGFyIiwibW9kIiwiZGVmYXVsdCIsIl9faW1wb3J0RGVmYXVsdCIsInRzbGliIiwiQ09OU1RBTlRTIiwiTk9ERV9DTElFTlQiLCJOT0RFX0FETUlOIiwiU0RLX1ZFUlNJT04iLCJhc3NlcnQiLCJhc3NlcnRpb24iLCJtZXNzYWdlIiwiYXNzZXJ0aW9uRXJyb3IiLCJFcnJvciIsInN0cmluZ1RvQnl0ZUFycmF5Iiwic3RyIiwib3V0IiwiY2hhckNvZGVBdCIsImJhc2U2NCIsImJ5dGVUb0NoYXJNYXBfIiwiY2hhclRvQnl0ZU1hcF8iLCJieXRlVG9DaGFyTWFwV2ViU2FmZV8iLCJjaGFyVG9CeXRlTWFwV2ViU2FmZV8iLCJFTkNPREVEX1ZBTFNfQkFTRSIsIkhBU19OQVRJVkVfU1VQUE9SVCIsImF0b2IiLCJlbmNvZGVCeXRlQXJyYXkiLCJpbnB1dCIsIndlYlNhZmUiLCJpc0FycmF5IiwiaW5pdF8iLCJieXRlVG9DaGFyTWFwIiwib3V0cHV0IiwiYnl0ZTEiLCJoYXZlQnl0ZTIiLCJieXRlMiIsImhhdmVCeXRlMyIsImJ5dGUzIiwib3V0Qnl0ZTEiLCJvdXRCeXRlMiIsIm91dEJ5dGUzIiwib3V0Qnl0ZTQiLCJqb2luIiwiZW5jb2RlU3RyaW5nIiwiYnRvYSIsImRlY29kZVN0cmluZyIsImJ5dGVzIiwicG9zIiwiYzEiLCJTdHJpbmciLCJmcm9tQ2hhckNvZGUiLCJjMiIsInUiLCJjMyIsImJ5dGVBcnJheVRvU3RyaW5nIiwiZGVjb2RlU3RyaW5nVG9CeXRlQXJyYXkiLCJjaGFyVG9CeXRlTWFwIiwiY2hhckF0IiwiYnl0ZTQiLCJFTkNPREVEX1ZBTFMiLCJFTkNPREVEX1ZBTFNfV0VCU0FGRSIsImJhc2U2NERlY29kZSIsImNvbnNvbGUiLCJkZWVwRXh0ZW5kIiwic291cmNlIiwiRGF0ZSIsImdldFRpbWUiLCJ1bmRlZmluZWQiLCJwcm9wIiwiRGVmZXJyZWQiLCJfdGhpcyIsInByb21pc2UiLCJ3cmFwQ2FsbGJhY2siLCJjYWxsYmFjayIsImNhdGNoIiwiZ2V0VUEiLCJuYXZpZ2F0b3IiLCJFUlJPUl9OQU1FIiwiRmlyZWJhc2VFcnJvciIsIl9zdXBlciIsImNvZGUiLCJjYXB0dXJlU3RhY2tUcmFjZSIsIkVycm9yRmFjdG9yeSIsInNlcnZpY2UiLCJzZXJ2aWNlTmFtZSIsImVycm9ycyIsImRhdGEiLCJfaSIsImN1c3RvbURhdGEiLCJmdWxsQ29kZSIsInRlbXBsYXRlIiwicmVwbGFjZVRlbXBsYXRlIiwiZnVsbE1lc3NhZ2UiLCJfYSIsIl9iIiwia2V5cyIsInNsaWNlIiwid2FybiIsInJlcGxhY2UiLCJQQVRURVJOIiwidG9TdHJpbmciLCJqc29uRXZhbCIsIkpTT04iLCJwYXJzZSIsImRlY29kZSIsInRva2VuIiwiaGVhZGVyIiwiY2xhaW1zIiwic2lnbmF0dXJlIiwicGFydHMiLCJzcGxpdCIsIlNoYTEiLCJjaGFpbl8iLCJidWZfIiwiV18iLCJwYWRfIiwiaW5idWZfIiwidG90YWxfIiwiYmxvY2tTaXplIiwicmVzZXQiLCJjb21wcmVzc18iLCJidWYiLCJvZmZzZXQiLCJXIiwidXBkYXRlIiwibGVuZ3RoTWludXNCbG9jayIsImluYnVmIiwiZGlnZXN0IiwidG90YWxCaXRzIiwiT2JzZXJ2ZXJQcm94eSIsImV4ZWN1dG9yIiwib25Ob09ic2VydmVycyIsIm9ic2VydmVycyIsInVuc3Vic2NyaWJlcyIsIm9ic2VydmVyQ291bnQiLCJ0YXNrIiwiZmluYWxpemVkIiwiZm9yRWFjaE9ic2VydmVyIiwib2JzZXJ2ZXIiLCJjbG9zZSIsImNvbXBsZXRlIiwic3Vic2NyaWJlIiwibmV4dE9yT2JzZXJ2ZXIiLCJvYmoiLCJtZXRob2RzIiwibWV0aG9kc18xIiwibWV0aG9kIiwiaW1wbGVtZW50c0FueU1ldGhvZHMiLCJub29wIiwidW5zdWIiLCJ1bnN1YnNjcmliZU9uZSIsImZpbmFsRXJyb3IiLCJmbiIsInNlbmRPbmUiLCJlcnIiLCJlcnJvclByZWZpeCIsImZuTmFtZSIsImFyZ3VtZW50TnVtYmVyIiwib3B0aW9uYWwiLCJhcmdOYW1lIiwiYXN5bmMiLCJvbkVycm9yIiwiYXJncyIsImJhc2U2NEVuY29kZSIsInV0ZjhCeXRlcyIsImNvbnRhaW5zIiwiY3JlYXRlU3Vic2NyaWJlIiwicHJveHkiLCJkZWVwQ29weSIsImlzQWRtaW4iLCJpc0Jyb3dzZXIiLCJzZWxmIiwiaXNFbXB0eSIsImlzTW9iaWxlQ29yZG92YSIsIndpbmRvdyIsInRlc3QiLCJpc05vZGUiLCJnbG9iYWwiLCJwcm9jZXNzIiwiaXNOb2RlU2RrIiwiaXNSZWFjdE5hdGl2ZSIsImlzVmFsaWRGb3JtYXQiLCJpc1ZhbGlkVGltZXN0YW1wIiwibm93IiwiTWF0aCIsImZsb29yIiwidmFsaWRTaW5jZSIsInZhbGlkVW50aWwiLCJpc3N1ZWRBdFRpbWUiLCJtYXAiLCJjb250ZXh0T2JqIiwicmVzIiwicXVlcnlzdHJpbmciLCJxdWVyeXN0cmluZ1BhcmFtcyIsInBhcmFtcyIsIl9sb29wXzEiLCJmb3JFYWNoIiwiYXJyYXlWYWwiLCJlbmNvZGVVUklDb21wb25lbnQiLCJlbnRyaWVzIiwicXVlcnlzdHJpbmdEZWNvZGUiLCJzYWZlR2V0Iiwic3RyaW5nTGVuZ3RoIiwiaGlnaCIsInN0cmluZ2lmeSIsInZhbGlkYXRlQXJnQ291bnQiLCJtaW5Db3VudCIsIm1heENvdW50IiwiYXJnQ291bnQiLCJhcmdFcnJvciIsInZhbGlkYXRlQ2FsbGJhY2siLCJ2YWxpZGF0ZUNvbnRleHRPYmplY3QiLCJjb250ZXh0IiwidmFsaWRhdGVOYW1lc3BhY2UiLCJuYW1lc3BhY2UiLCJ1dGlsIiwiQ29tcG9uZW50IiwiaW5zdGFuY2VGYWN0b3J5IiwidHlwZSIsIm11bHRpcGxlSW5zdGFuY2VzIiwic2VydmljZVByb3BzIiwiaW5zdGFudGlhdGlvbk1vZGUiLCJzZXRJbnN0YW50aWF0aW9uTW9kZSIsInNldE11bHRpcGxlSW5zdGFuY2VzIiwic2V0U2VydmljZVByb3BzIiwicHJvcHMiLCJERUZBVUxUX0VOVFJZX05BTUUiLCJQcm92aWRlciIsImNvbnRhaW5lciIsImNvbXBvbmVudCIsImluc3RhbmNlcyIsIk1hcCIsImluc3RhbmNlc0RlZmVycmVkIiwiaWRlbnRpZmllciIsIm5vcm1hbGl6ZWRJZGVudGlmaWVyIiwibm9ybWFsaXplSW5zdGFuY2VJZGVudGlmaWVyIiwiaGFzIiwiZGVmZXJyZWQiLCJzZXQiLCJpbnN0YW5jZSIsImdldE9ySW5pdGlhbGl6ZVNlcnZpY2UiLCJnZXRJbW1lZGlhdGUiLCJvcHRpb25zIiwiZ2V0Q29tcG9uZW50Iiwic2V0Q29tcG9uZW50IiwiZV8xIiwiaXNDb21wb25lbnRFYWdlciIsIl9jIiwiX2QiLCJpbnN0YW5jZUlkZW50aWZpZXIiLCJpbnN0YW5jZURlZmVycmVkIiwiZV8xXzEiLCJyZXR1cm4iLCJjbGVhckluc3RhbmNlIiwiZGVsZXRlIiwic2VydmljZXMiLCJmcm9tIiwidmFsdWVzIiwiYWxsIiwiZmlsdGVyIiwiSU5URVJOQUwiLCJpc0NvbXBvbmVudFNldCIsIm5vcm1hbGl6ZUlkZW50aWZpZXJGb3JGYWN0b3J5IiwiQ29tcG9uZW50Q29udGFpbmVyIiwicHJvdmlkZXJzIiwiYWRkQ29tcG9uZW50IiwicHJvdmlkZXIiLCJnZXRQcm92aWRlciIsImFkZE9yT3ZlcndyaXRlQ29tcG9uZW50IiwiZ2V0UHJvdmlkZXJzIiwiX2EkMSIsImxvZ2dlciQxIiwiRVJST1JTIiwiRVJST1JfRkFDVE9SWSIsInZlcnNpb24iLCJQTEFURk9STV9MT0dfU1RSSU5HIiwibG9nZ2VyIiwiTG9nZ2VyIiwiRmlyZWJhc2VBcHBJbXBsIiwiY29uZmlnIiwiZmlyZWJhc2VfIiwiaXNEZWxldGVkXyIsIm5hbWVfIiwiYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkXyIsImF1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZCIsIm9wdGlvbnNfIiwiX2FkZENvbXBvbmVudCIsImNvbXBvbmVudHMiLCJjb21wb25lbnQkMSIsImNoZWNrRGVzdHJveWVkXyIsInZhbCIsImNvbmZpZ3VyYWJsZSIsInJlbW92ZUFwcCIsIl9nZXRTZXJ2aWNlIiwiX3JlbW92ZVNlcnZpY2VJbnN0YW5jZSIsImRlYnVnIiwiX2FkZE9yT3ZlcndyaXRlQ29tcG9uZW50IiwiYXBwTmFtZSIsImxvZyIsInZlcnNpb24kMSIsImZpcmViYXNlIiwiY3JlYXRlRmlyZWJhc2VOYW1lc3BhY2UiLCJmaXJlYmFzZUFwcEltcGwiLCJhcHBzIiwiaW5pdGlhbGl6ZUFwcCIsInJhd0NvbmZpZyIsImFwcCIsInJlZ2lzdGVyVmVyc2lvbiIsImxpYnJhcnlLZXlPck5hbWUiLCJ2YXJpYW50IiwibGlicmFyeSIsImxpYnJhcnlNaXNtYXRjaCIsIm1hdGNoIiwidmVyc2lvbk1pc21hdGNoIiwid2FybmluZyIsInJlZ2lzdGVyQ29tcG9uZW50IiwidXNlQXNTZXJ2aWNlIiwiY29tcG9uZW50TmFtZSIsInNlcnZpY2VOYW1lc3BhY2UiLCJhcHBBcmciLCJzZXJ2aWNlRnhuIiwiY3JlYXRlRmlyZWJhc2VOYW1lc3BhY2VDb3JlIiwiZXh0ZW5kTmFtZXNwYWNlIiwiUGxhdGZvcm1Mb2dnZXJTZXJ2aWNlIiwiZ2V0UGxhdGZvcm1JbmZvU3RyaW5nIiwiaXNWZXJzaW9uU2VydmljZVByb3ZpZGVyIiwibG9nU3RyaW5nIiwic2RrVmVyc2lvbiIsImZpcmViYXNlJDEiLCJyZWdpc3RlckNvcmVDb21wb25lbnRzIiwiZXgiLCJGdW5jdGlvbiIsIkxvZ0xldmVsIiwiZGVmYXVsdExvZ0xldmVsIiwiSU5GTyIsImRlZmF1bHRMb2dIYW5kbGVyIiwibG9nVHlwZSIsImxvZ0xldmVsIiwidG9JU09TdHJpbmciLCJERUJVRyIsIlZFUkJPU0UiLCJpbmZvIiwiV0FSTiIsIkVSUk9SIiwiX2xvZ0xldmVsIiwiX2xvZ0hhbmRsZXIiLCJzZXRMb2dMZXZlbCIsImxldmVsIiwiaW5zdCIsInRvQXJyYXkiLCJhcnIiLCJwcm9taXNpZnlSZXF1ZXN0IiwicmVxdWVzdCIsIm9uc3VjY2VzcyIsIm9uZXJyb3IiLCJwcm9taXNpZnlSZXF1ZXN0Q2FsbCIsInByb21pc2lmeUN1cnNvclJlcXVlc3RDYWxsIiwiQ3Vyc29yIiwicHJveHlQcm9wZXJ0aWVzIiwiUHJveHlDbGFzcyIsInRhcmdldFByb3AiLCJwcm9wZXJ0aWVzIiwicHJveHlSZXF1ZXN0TWV0aG9kcyIsIkNvbnN0cnVjdG9yIiwicHJveHlNZXRob2RzIiwicHJveHlDdXJzb3JSZXF1ZXN0TWV0aG9kcyIsIkluZGV4IiwiaW5kZXgiLCJfaW5kZXgiLCJjdXJzb3IiLCJfY3Vyc29yIiwiX3JlcXVlc3QiLCJPYmplY3RTdG9yZSIsInN0b3JlIiwiX3N0b3JlIiwiVHJhbnNhY3Rpb24iLCJpZGJUcmFuc2FjdGlvbiIsIl90eCIsIm9uY29tcGxldGUiLCJvbmFib3J0IiwiVXBncmFkZURCIiwiZGIiLCJvbGRWZXJzaW9uIiwidHJhbnNhY3Rpb24iLCJfZGIiLCJEQiIsIklEQkluZGV4IiwiSURCQ3Vyc29yIiwibWV0aG9kTmFtZSIsImNyZWF0ZUluZGV4IiwiSURCT2JqZWN0U3RvcmUiLCJvYmplY3RTdG9yZSIsIklEQlRyYW5zYWN0aW9uIiwiY3JlYXRlT2JqZWN0U3RvcmUiLCJJREJEYXRhYmFzZSIsImZ1bmNOYW1lIiwibmF0aXZlT2JqZWN0IiwiZ2V0QWxsIiwicXVlcnkiLCJjb3VudCIsIml0ZW1zIiwiaXRlcmF0ZUN1cnNvciIsImNvbnRpbnVlIiwib3BlbkRiIiwidXBncmFkZUNhbGxiYWNrIiwiaW5kZXhlZERCIiwib251cGdyYWRlbmVlZGVkIiwiZXZlbnQiLCJkZWxldGVEYiIsImZhY3RvcnkiLCJhcGkiLCJjb250ZW50IiwibG9jYWxzIiwibWVtbyIsImlzT2xkSUUiLCJCb29sZWFuIiwiZG9jdW1lbnQiLCJnZXRUYXJnZXQiLCJzdHlsZVRhcmdldCIsInF1ZXJ5U2VsZWN0b3IiLCJIVE1MSUZyYW1lRWxlbWVudCIsImNvbnRlbnREb2N1bWVudCIsImhlYWQiLCJzdHlsZXNJbkRvbSIsImdldEluZGV4QnlJZGVudGlmaWVyIiwibW9kdWxlc1RvRG9tIiwibGlzdCIsImlkQ291bnRNYXAiLCJpZGVudGlmaWVycyIsIml0ZW0iLCJpZCIsImJhc2UiLCJjc3MiLCJtZWRpYSIsInNvdXJjZU1hcCIsInJlZmVyZW5jZXMiLCJ1cGRhdGVyIiwiYWRkU3R5bGUiLCJpbnNlcnRTdHlsZUVsZW1lbnQiLCJzdHlsZSIsImNyZWF0ZUVsZW1lbnQiLCJhdHRyaWJ1dGVzIiwibm9uY2UiLCJzZXRBdHRyaWJ1dGUiLCJpbnNlcnQiLCJhcHBlbmRDaGlsZCIsInRleHRTdG9yZSIsInJlcGxhY2VUZXh0IiwicmVwbGFjZW1lbnQiLCJhcHBseVRvU2luZ2xldG9uVGFnIiwicmVtb3ZlIiwic3R5bGVTaGVldCIsImNzc1RleHQiLCJjc3NOb2RlIiwiY3JlYXRlVGV4dE5vZGUiLCJjaGlsZE5vZGVzIiwicmVtb3ZlQ2hpbGQiLCJpbnNlcnRCZWZvcmUiLCJhcHBseVRvVGFnIiwicmVtb3ZlQXR0cmlidXRlIiwidW5lc2NhcGUiLCJmaXJzdENoaWxkIiwic2luZ2xldG9uIiwic2luZ2xldG9uQ291bnRlciIsInN0eWxlSW5kZXgiLCJwYXJlbnROb2RlIiwicmVtb3ZlU3R5bGVFbGVtZW50IiwibmV3T2JqIiwibGFzdElkZW50aWZpZXJzIiwibmV3TGlzdCIsIm5ld0xhc3RJZGVudGlmaWVycyIsInNwbGljZSIsIl9fX0NTU19MT0FERVJfQVBJX0lNUE9SVF9fXyIsIl9fX0NTU19MT0FERVJfR0VUX1VSTF9JTVBPUlRfX18iLCJfX19DU1NfTE9BREVSX1VSTF9JTVBPUlRfMF9fXyIsIl9fX0NTU19MT0FERVJfVVJMX0lNUE9SVF8xX19fIiwiX19fQ1NTX0xPQURFUl9VUkxfSU1QT1JUXzJfX18iLCJfX19DU1NfTE9BREVSX1VSTF9SRVBMQUNFTUVOVF8wX19fIiwiX19fQ1NTX0xPQURFUl9VUkxfUkVQTEFDRU1FTlRfMV9fXyIsIl9fX0NTU19MT0FERVJfVVJMX1JFUExBQ0VNRU5UXzJfX18iLCJ1c2VTb3VyY2VNYXAiLCJjc3NNYXBwaW5nIiwic291cmNlTWFwcGluZyIsInNvdXJjZVVSTHMiLCJzb3VyY2VzIiwic291cmNlUm9vdCIsImNzc1dpdGhNYXBwaW5nVG9TdHJpbmciLCJtZWRpYVF1ZXJ5IiwiZGVkdXBlIiwiYWxyZWFkeUltcG9ydGVkTW9kdWxlcyIsInVybCIsImhhc2giLCJuZWVkUXVvdGVzIiwid2ViY2hhbm5lbFdyYXBwZXIiLCJsb2dDbGllbnQiLCJnZXRMb2dMZXZlbCIsIlNJTEVOVCIsIm5ld0xldmVsIiwidGFnIiwibXNnIiwiYXJnVG9TdHJpbmciLCJwbGF0Zm9ybSIsIlBsYXRmb3JtU3VwcG9ydCIsImdldFBsYXRmb3JtIiwiZm9ybWF0SlNPTiIsImZhaWwiLCJmYWlsdXJlIiwic2V0UGxhdGZvcm0iLCJlbXB0eUJ5dGVTdHJpbmciLCJDb2RlIiwiT0siLCJDQU5DRUxMRUQiLCJVTktOT1dOIiwiSU5WQUxJRF9BUkdVTUVOVCIsIkRFQURMSU5FX0VYQ0VFREVEIiwiTk9UX0ZPVU5EIiwiQUxSRUFEWV9FWElTVFMiLCJQRVJNSVNTSU9OX0RFTklFRCIsIlVOQVVUSEVOVElDQVRFRCIsIlJFU09VUkNFX0VYSEFVU1RFRCIsIkZBSUxFRF9QUkVDT05ESVRJT04iLCJBQk9SVEVEIiwiT1VUX09GX1JBTkdFIiwiVU5JTVBMRU1FTlRFRCIsIlVOQVZBSUxBQkxFIiwiREFUQV9MT1NTIiwiRmlyZXN0b3JlRXJyb3IiLCJtYWtlQ29uc3RydWN0b3JQcml2YXRlIiwiY2xzIiwib3B0aW9uYWxNZXNzYWdlIiwiUHVibGljQ29uc3RydWN0b3IiLCJzdGF0aWNQcm9wZXJ0eSIsImRlZmF1bHRlZCIsImRlZmF1bHRWYWx1ZSIsImZvckVhY2hOdW1iZXIiLCJudW0iLCJOdW1iZXIiLCJpc05hTiIsInZhbGlkYXRlTm9BcmdzIiwiZnVuY3Rpb25OYW1lIiwiZm9ybWF0UGx1cmFsIiwidmFsaWRhdGVFeGFjdE51bWJlck9mQXJncyIsIm51bWJlck9mQXJncyIsInZhbGlkYXRlQXRMZWFzdE51bWJlck9mQXJncyIsIm1pbk51bWJlck9mQXJncyIsInZhbGlkYXRlQmV0d2Vlbk51bWJlck9mQXJncyIsIm1heE51bWJlck9mQXJncyIsInZhbGlkYXRlQXJnVHlwZSIsInBvc2l0aW9uIiwiYXJndW1lbnQiLCJ2YWxpZGF0ZVR5cGUiLCJvcmRpbmFsIiwidmFsaWRhdGVPcHRpb25hbEFyZ1R5cGUiLCJ2YWxpZGF0ZU5hbWVkVHlwZSIsIm9wdGlvbk5hbWUiLCJ2YWxpZGF0ZU5hbWVkT3B0aW9uYWxUeXBlIiwidmFsaWRhdGVPcHRpb25hbEFycmF5RWxlbWVudHMiLCJ0eXBlRGVzY3JpcHRpb24iLCJ2YWxpZGF0b3IiLCJ2YWx1ZURlc2NyaXB0aW9uIiwidmFsaWRhdGVBcnJheUVsZW1lbnRzIiwidmFsaWRhdGVOYW1lZE9wdGlvbmFsUHJvcGVydHlFcXVhbHMiLCJpbnB1dE5hbWUiLCJleHBlY3RlZCIsImV4cGVjdGVkRGVzY3JpcHRpb24iLCJleHBlY3RlZF8xIiwiYWN0dWFsRGVzY3JpcHRpb24iLCJ2YWxpZGF0ZU5hbWVkUHJvcGVydHlFcXVhbHMiLCJ2YWxpZGF0ZVN0cmluZ0VudW0iLCJlbnVtcyIsInNvbWUiLCJlbGVtZW50IiwiaXNQbGFpbk9iamVjdCIsImRlc2NyaXB0aW9uIiwiZ2V0UHJvdG90eXBlT2YiLCJzdWJzdHJpbmciLCJjdXN0b21PYmplY3ROYW1lIiwicmVzdWx0cyIsImV4ZWMiLCJ0cnlHZXRDdXN0b21PYmplY3RUeXBlIiwidmFsaWRhdGVEZWZpbmVkIiwidmFsaWRhdGVPcHRpb25OYW1lcyIsIm9wdGlvbk5hbWVzIiwiaW52YWxpZENsYXNzRXJyb3IiLCJ2YWxpZGF0ZVBvc2l0aXZlTnVtYmVyIiwiQXV0b0lkIiwibmV3SWQiLCJjaGFycyIsImF1dG9JZCIsInJhbmRvbSIsInByaW1pdGl2ZUNvbXBhcmF0b3IiLCJsZWZ0IiwicmlnaHQiLCJhcnJheUVxdWFscyIsImlzRXF1YWwiLCJpbW1lZGlhdGVTdWNjZXNzb3IiLCJhc3NlcnRVaW50OEFycmF5QXZhaWxhYmxlIiwiVWludDhBcnJheSIsImFzc2VydEJhc2U2NEF2YWlsYWJsZSIsImJhc2U2NEF2YWlsYWJsZSIsIlRpbWVySWQiLCJCbG9iIiwiYmluYXJ5U3RyaW5nIiwiX2JpbmFyeVN0cmluZyIsImZyb21CYXNlNjRTdHJpbmciLCJmcm9tVWludDhBcnJheSIsImFycmF5IiwiY2hhciIsInRvQmFzZTY0IiwidG9VaW50OEFycmF5IiwiYnVmZmVyIiwib3RoZXIiLCJfY29tcGFyZVRvIiwiUHVibGljQmxvYiIsIkRhdGFiYXNlSW5mbyIsImRhdGFiYXNlSWQiLCJwZXJzaXN0ZW5jZUtleSIsImhvc3QiLCJzc2wiLCJmb3JjZUxvbmdQb2xsaW5nIiwiREVGQVVMVF9EQVRBQkFTRV9OQU1FIiwiRGF0YWJhc2VJZCIsInByb2plY3RJZCIsImRhdGFiYXNlIiwiY29tcGFyZVRvIiwiTGlzdGVuU2VxdWVuY2UiLCJwcmV2aW91c1ZhbHVlIiwic2VxdWVuY2VOdW1iZXJTeW5jZXIiLCJzZXF1ZW5jZU51bWJlckhhbmRsZXIiLCJzZXF1ZW5jZU51bWJlciIsInNldFByZXZpb3VzVmFsdWUiLCJ3cml0ZU5ld1NlcXVlbmNlTnVtYmVyIiwid3JpdGVTZXF1ZW5jZU51bWJlciIsImV4dGVybmFsUHJldmlvdXNWYWx1ZSIsIm1heCIsIm5leHRWYWx1ZSIsIklOVkFMSUQiLCJCYXNlUGF0aCIsInNlZ21lbnRzIiwibGVuIiwiY29tcGFyYXRvciIsImNoaWxkIiwibmFtZU9yUGF0aCIsImxpbWl0Iiwic2VnbWVudCIsImNvbnN0cnVjdCIsInBvcEZpcnN0Iiwic2l6ZSIsInBvcExhc3QiLCJmaXJzdFNlZ21lbnQiLCJsYXN0U2VnbWVudCIsImlzUHJlZml4T2YiLCJpc0ltbWVkaWF0ZVBhcmVudE9mIiwicG90ZW50aWFsQ2hpbGQiLCJlbmQiLCJwMSIsInAyIiwibWluIiwiUmVzb3VyY2VQYXRoIiwiY2Fub25pY2FsU3RyaW5nIiwiZnJvbVN0cmluZyIsInBhdGgiLCJFTVBUWV9QQVRIIiwiaWRlbnRpZmllclJlZ0V4cCIsIkZpZWxkUGF0aCIsImlzVmFsaWRJZGVudGlmaWVyIiwiaXNLZXlGaWVsZCIsImtleUZpZWxkIiwiZnJvbVNlcnZlckZvcm1hdCIsImN1cnJlbnQiLCJhZGRDdXJyZW50U2VnbWVudCIsImluQmFja3RpY2tzIiwiRG9jdW1lbnRLZXkiLCJpc0RvY3VtZW50S2V5IiwiaGFzQ29sbGVjdGlvbklkIiwiY29sbGVjdGlvbklkIiwiazEiLCJrMiIsImZyb21TZWdtZW50cyIsImZyb21QYXRoU3RyaW5nIiwiRU1QVFkiLCJEZWxheWVkT3BlcmF0aW9uIiwiYXN5bmNRdWV1ZSIsInRpbWVySWQiLCJ0YXJnZXRUaW1lTXMiLCJyZW1vdmFsQ2FsbGJhY2siLCJjcmVhdGVBbmRTY2hlZHVsZSIsImRlbGF5TXMiLCJkZWxheWVkT3AiLCJzdGFydCIsInRpbWVySGFuZGxlIiwic2V0VGltZW91dCIsImhhbmRsZURlbGF5RWxhcHNlZCIsInNraXBEZWxheSIsImNhbmNlbCIsInJlYXNvbiIsImNsZWFyVGltZW91dCIsImVucXVldWVBbmRGb3JnZXQiLCJBc3luY1F1ZXVlIiwidGFpbCIsIl9pc1NodXR0aW5nRG93biIsImRlbGF5ZWRPcGVyYXRpb25zIiwib3BlcmF0aW9uSW5Qcm9ncmVzcyIsInRpbWVySWRzVG9Ta2lwIiwiZW5xdWV1ZSIsImVucXVldWVBbmRGb3JnZXRFdmVuQWZ0ZXJTaHV0ZG93biIsInZlcmlmeU5vdEZhaWxlZCIsImVucXVldWVJbnRlcm5hbCIsImVucXVldWVFdmVuQWZ0ZXJTaHV0ZG93biIsImVucXVldWVBbmRJbml0aWF0ZVNodXRkb3duIiwibmV3VGFpbCIsImVycm9yJDEiLCJzdGFjayIsImVucXVldWVBZnRlckRlbGF5IiwicmVtb3ZlZE9wIiwicmVtb3ZlRGVsYXllZE9wZXJhdGlvbiIsInZlcmlmeU9wZXJhdGlvbkluUHJvZ3Jlc3MiLCJkcmFpbiIsImNvbnRhaW5zRGVsYXllZE9wZXJhdGlvbiIsInJ1bkRlbGF5ZWRPcGVyYXRpb25zRWFybHkiLCJsYXN0VGltZXJJZCIsIkFsbCIsInNvcnQiLCJza2lwRGVsYXlzRm9yVGltZXJJZCIsImVzY2FwZUNoYXIiLCJlbmNvZGVkU2VwYXJhdG9yQ2hhciIsImVuY29kZWROdWwiLCJlbmNvZGVkRXNjYXBlIiwiZW5jb2RlIiwiZW5jb2RlU2VwYXJhdG9yIiwiZW5jb2RlU2VnbWVudCIsInJlc3VsdEJ1ZiIsImxhc3RSZWFzb25hYmxlRXNjYXBlSW5kZXgiLCJzZWdtZW50QnVpbGRlciIsImN1cnJlbnRQaWVjZSIsIlRpbWVzdGFtcCIsInNlY29uZHMiLCJuYW5vc2Vjb25kcyIsImZyb21NaWxsaXMiLCJmcm9tRGF0ZSIsImRhdGUiLCJtaWxsaXNlY29uZHMiLCJ0b0RhdGUiLCJ0b01pbGxpcyIsIlNuYXBzaG90VmVyc2lvbiIsInRpbWVzdGFtcCIsImZyb21NaWNyb3NlY29uZHMiLCJmcm9tVGltZXN0YW1wIiwiZm9yRGVsZXRlZERvYyIsIk1JTiIsInRvTWljcm9zZWNvbmRzIiwidG9UaW1lc3RhbXAiLCJTb3J0ZWRNYXAiLCJyb290IiwiTExSQk5vZGUiLCJjb3B5IiwiQkxBQ0siLCJub2RlIiwiY21wIiwicHJ1bmVkTm9kZXMiLCJtaW5LZXkiLCJtYXhLZXkiLCJpbm9yZGVyVHJhdmVyc2FsIiwiYWN0aW9uIiwiZGVzY3JpcHRpb25zIiwicmV2ZXJzZVRyYXZlcnNhbCIsImdldEl0ZXJhdG9yIiwiU29ydGVkTWFwSXRlcmF0b3IiLCJnZXRJdGVyYXRvckZyb20iLCJnZXRSZXZlcnNlSXRlcmF0b3IiLCJnZXRSZXZlcnNlSXRlcmF0b3JGcm9tIiwic3RhcnRLZXkiLCJpc1JldmVyc2UiLCJub2RlU3RhY2siLCJnZXROZXh0IiwiaGFzTmV4dCIsInBlZWsiLCJjb2xvciIsIlJFRCIsImZpeFVwIiwicmVtb3ZlTWluIiwiaXNSZWQiLCJtb3ZlUmVkTGVmdCIsInNtYWxsZXN0Iiwicm90YXRlUmlnaHQiLCJtb3ZlUmVkUmlnaHQiLCJyb3RhdGVMZWZ0IiwiY29sb3JGbGlwIiwibmwiLCJuciIsImNoZWNrTWF4RGVwdGgiLCJibGFja0RlcHRoIiwiY2hlY2siLCJwb3ciLCJMTFJCRW1wdHlOb2RlIiwiU29ydGVkU2V0IiwiZnJvbU1hcEtleXMiLCJhZGQiLCJlbGVtIiwiZmlyc3QiLCJsYXN0IiwiY2IiLCJmb3JFYWNoSW5SYW5nZSIsInJhbmdlIiwiaXRlciIsImZvckVhY2hXaGlsZSIsImZpcnN0QWZ0ZXJPckVxdWFsIiwiU29ydGVkU2V0SXRlcmF0b3IiLCJ1bmlvbldpdGgiLCJ0aGlzSXQiLCJvdGhlckl0IiwidGhpc0VsZW0iLCJvdGhlckVsZW0iLCJ0YXJnZXRJZCIsIkVNUFRZX01BWUJFX0RPQ1VNRU5UX01BUCIsIm1heWJlRG9jdW1lbnRNYXAiLCJudWxsYWJsZU1heWJlRG9jdW1lbnRNYXAiLCJFTVBUWV9ET0NVTUVOVF9NQVAiLCJkb2N1bWVudE1hcCIsIkVNUFRZX0RPQ1VNRU5UX1ZFUlNJT05fTUFQIiwiZG9jdW1lbnRWZXJzaW9uTWFwIiwiRU1QVFlfRE9DVU1FTlRfS0VZX1NFVCIsImRvY3VtZW50S2V5U2V0Iiwia2V5c18xIiwiRU1QVFlfVEFSR0VUX0lEX1NFVCIsInRhcmdldElkU2V0IiwiTXV0YXRpb25CYXRjaCIsImJhdGNoSWQiLCJsb2NhbFdyaXRlVGltZSIsImJhc2VNdXRhdGlvbnMiLCJtdXRhdGlvbnMiLCJhcHBseVRvUmVtb3RlRG9jdW1lbnQiLCJkb2NLZXkiLCJtYXliZURvYyIsImJhdGNoUmVzdWx0IiwibXV0YXRpb25SZXN1bHRzIiwibXV0YXRpb24iLCJtdXRhdGlvblJlc3VsdCIsImFwcGx5VG9Mb2NhbFZpZXciLCJiYXNlRG9jIiwiYXBwbHlUb0xvY2FsRG9jdW1lbnRTZXQiLCJtYXliZURvY3MiLCJtdXRhdGVkRG9jdW1lbnRzIiwibXV0YXRlZERvY3VtZW50IiwicmVkdWNlIiwiTXV0YXRpb25CYXRjaFJlc3VsdCIsImJhdGNoIiwiY29tbWl0VmVyc2lvbiIsInN0cmVhbVRva2VuIiwiZG9jVmVyc2lvbnMiLCJ2ZXJzaW9uTWFwIiwiUGVyc2lzdGVuY2VQcm9taXNlIiwibmV4dENhbGxiYWNrIiwiY2F0Y2hDYWxsYmFjayIsImlzRG9uZSIsImNhbGxiYWNrQXR0YWNoZWQiLCJuZXh0Rm4iLCJjYXRjaEZuIiwid3JhcEZhaWx1cmUiLCJ3cmFwU3VjY2VzcyIsInRvUHJvbWlzZSIsIndyYXBVc2VyRnVuY3Rpb24iLCJ3YWl0Rm9yIiwiZXhwZWN0ZWRDb3VudCIsInJlc29sdmVkQ291bnQiLCJvciIsInByZWRpY2F0ZXMiLCJwcmVkaWNhdGUiLCJpc1RydWUiLCJwcmVkaWNhdGVzXzEiLCJjb2xsZWN0aW9uIiwicHJvbWlzZXMiLCJMT0dfVEFHIiwiU2ltcGxlRGIiLCJnZXRJT1NWZXJzaW9uIiwib3Blbk9yQ3JlYXRlIiwic2NoZW1hQ29udmVydGVyIiwiaXNBdmFpbGFibGUiLCJvcGVuIiwib25ibG9ja2VkIiwiY3JlYXRlT3JVcGdyYWRlIiwiU0NIRU1BX1ZFUlNJT04iLCJ3cmFwUmVxdWVzdCIsImRlbGV0ZURhdGFiYXNlIiwiaXNNb2NrUGVyc2lzdGVuY2UiLCJ1YSIsImlPU1ZlcnNpb24iLCJpc1Vuc3VwcG9ydGVkSU9TIiwiYW5kcm9pZFZlcnNpb24iLCJnZXRBbmRyb2lkVmVyc2lvbiIsImlzVW5zdXBwb3J0ZWRBbmRyb2lkIiwiVVNFX01PQ0tfUEVSU0lTVEVOQ0UiLCJnZXRTdG9yZSIsInR4biIsImlPU1ZlcnNpb25SZWdleCIsImFuZHJvaWRWZXJzaW9uUmVnZXgiLCJzZXRWZXJzaW9uQ2hhbmdlTGlzdGVuZXIiLCJ2ZXJzaW9uQ2hhbmdlTGlzdGVuZXIiLCJvbnZlcnNpb25jaGFuZ2UiLCJydW5UcmFuc2FjdGlvbiIsIm9iamVjdFN0b3JlcyIsInRyYW5zYWN0aW9uRm4iLCJyZWFkb25seSIsImlkZW1wb3RlbnQiLCJhdHRlbXB0TnVtYmVyIiwidGhpc18xIiwic3RhdGVfMSIsInN0YXJ0c1dpdGgiLCJlbmRzV2l0aCIsInRyYW5zYWN0aW9uRm5SZXN1bHQiLCJlcnJvcl8xIiwicmV0cnlhYmxlIiwiU2ltcGxlRGJUcmFuc2FjdGlvbiIsImFib3J0IiwiY29tcGxldGlvblByb21pc2UiLCJJdGVyYXRpb25Db250cm9sbGVyIiwiZGJDdXJzb3IiLCJzaG91bGRTdG9wIiwibmV4dEtleSIsInNraXAiLCJhYm9ydGVkIiwiY29tcGxldGlvbkRlZmVycmVkIiwiY2hlY2tGb3JBbmRSZXBvcnRpT1NFcnJvciIsIm9iamVjdFN0b3JlTmFtZXMiLCJzdG9yZU5hbWUiLCJTaW1wbGVEYlN0b3JlIiwicHV0Iiwia2V5T3JWYWx1ZSIsImxvYWRBbGwiLCJpbmRleE9yUmFuZ2UiLCJkZWxldGVBbGwiLCJrZXlzT25seSIsImNvbnRyb2wiLCJpdGVyYXRlIiwib3B0aW9uc09yQ2FsbGJhY2siLCJpdGVyYXRlU2VyaWFsIiwiY3Vyc29yUmVxdWVzdCIsInByaW1hcnlLZXkiLCJzaG91bGRDb250aW51ZSIsImNvbnRyb2xsZXIiLCJ1c2VyUmVzdWx0IiwidXNlclByb21pc2UiLCJza2lwVG9LZXkiLCJpbmRleE5hbWUiLCJkaXJlY3Rpb24iLCJyZXZlcnNlIiwib3BlbktleUN1cnNvciIsIm9wZW5DdXJzb3IiLCJyZXBvcnRlZElPU0Vycm9yIiwiSU9TX0VSUk9SIiwibmV3RXJyb3JfMSIsIkluZGV4ZWREYk11dGF0aW9uUXVldWUiLCJ1c2VySWQiLCJzZXJpYWxpemVyIiwiaW5kZXhNYW5hZ2VyIiwicmVmZXJlbmNlRGVsZWdhdGUiLCJkb2N1bWVudEtleXNCeUJhdGNoSWQiLCJmb3JVc2VyIiwidXNlciIsInVpZCIsImlzQXV0aGVudGljYXRlZCIsImNoZWNrRW1wdHkiLCJlbXB0eSIsIklEQktleVJhbmdlIiwiYm91bmQiLCJORUdBVElWRV9JTkZJTklUWSIsIlBPU0lUSVZFX0lORklOSVRZIiwibXV0YXRpb25zU3RvcmUiLCJEYk11dGF0aW9uQmF0Y2giLCJ1c2VyTXV0YXRpb25zSW5kZXgiLCJhY2tub3dsZWRnZUJhdGNoIiwiZ2V0TXV0YXRpb25RdWV1ZU1ldGFkYXRhIiwibGFzdFN0cmVhbVRva2VuIiwiY29udmVydFN0cmVhbVRva2VuIiwibXV0YXRpb25RdWV1ZXNTdG9yZSIsImdldExhc3RTdHJlYW1Ub2tlbiIsInNldExhc3RTdHJlYW1Ub2tlbiIsImFkZE11dGF0aW9uQmF0Y2giLCJkb2N1bWVudFN0b3JlIiwiZG9jdW1lbnRNdXRhdGlvbnNTdG9yZSIsIm11dGF0aW9uU3RvcmUiLCJkYkJhdGNoIiwidG9EYk11dGF0aW9uQmF0Y2giLCJjb2xsZWN0aW9uUGFyZW50cyIsIm11dGF0aW9uc18xIiwiaW5kZXhLZXkiLCJEYkRvY3VtZW50TXV0YXRpb24iLCJQTEFDRUhPTERFUiIsInBhcmVudCIsImFkZFRvQ29sbGVjdGlvblBhcmVudEluZGV4IiwiYWRkT25Db21taXR0ZWRMaXN0ZW5lciIsImxvb2t1cE11dGF0aW9uQmF0Y2giLCJmcm9tRGJNdXRhdGlvbkJhdGNoIiwibG9va3VwTXV0YXRpb25LZXlzIiwiZ2V0TmV4dE11dGF0aW9uQmF0Y2hBZnRlckJhdGNoSWQiLCJuZXh0QmF0Y2hJZCIsImxvd2VyQm91bmQiLCJmb3VuZEJhdGNoIiwiZ2V0SGlnaGVzdFVuYWNrbm93bGVkZ2VkQmF0Y2hJZCIsInVwcGVyQm91bmQiLCJnZXRBbGxNdXRhdGlvbkJhdGNoZXMiLCJkYkJhdGNoZXMiLCJnZXRBbGxNdXRhdGlvbkJhdGNoZXNBZmZlY3RpbmdEb2N1bWVudEtleSIsImRvY3VtZW50S2V5IiwiaW5kZXhQcmVmaXgiLCJwcmVmaXhGb3JQYXRoIiwiaW5kZXhTdGFydCIsInVzZXJJRCIsImVuY29kZWRQYXRoIiwiZ2V0QWxsTXV0YXRpb25CYXRjaGVzQWZmZWN0aW5nRG9jdW1lbnRLZXlzIiwiZG9jdW1lbnRLZXlzIiwidW5pcXVlQmF0Y2hJRHMiLCJiYXRjaElEIiwibG9va3VwTXV0YXRpb25CYXRjaGVzIiwiZ2V0QWxsTXV0YXRpb25CYXRjaGVzQWZmZWN0aW5nUXVlcnkiLCJpc0RvY3VtZW50UXVlcnkiLCJpc0NvbGxlY3Rpb25Hcm91cFF1ZXJ5IiwicXVlcnlQYXRoIiwiaW1tZWRpYXRlQ2hpbGRyZW5MZW5ndGgiLCJiYXRjaElEcyIsInJlbW92ZU11dGF0aW9uQmF0Y2giLCJzaW1wbGVEYlRyYW5zYWN0aW9uIiwicmVtb3ZlZERvY3VtZW50cyIsInJlbW92ZUNhY2hlZE11dGF0aW9uS2V5cyIsInJlbW92ZU11dGF0aW9uUmVmZXJlbmNlIiwicGVyZm9ybUNvbnNpc3RlbmN5Q2hlY2siLCJzdGFydFJhbmdlIiwicHJlZml4Rm9yVXNlciIsImRhbmdsaW5nTXV0YXRpb25SZWZlcmVuY2VzIiwiY29udGFpbnNLZXkiLCJtdXRhdGlvblF1ZXVlQ29udGFpbnNLZXkiLCJEYk11dGF0aW9uUXVldWUiLCJrZXlQYXRoIiwiaW5kZXhUeG4iLCJvbmx5IiwibnVtRGVsZXRlZCIsInJlbW92ZVByb21pc2UiLCJJbmRleGVkRGJQZXJzaXN0ZW5jZSIsIkdlbmVyYXRvcklkcyIsIlJFU0VSVkVEX0JJVFMiLCJUYXJnZXRJZEdlbmVyYXRvciIsImdlbmVyYXRvcklkIiwic2VlZCIsInNlZWsiLCJuZXh0SWQiLCJhZnRlciIsImZvclRhcmdldENhY2hlIiwiUXVlcnlDYWNoZSIsImZvclN5bmNFbmdpbmUiLCJTeW5jRW5naW5lIiwiSW5kZXhlZERiVGFyZ2V0Q2FjaGUiLCJ0YXJnZXRJZEdlbmVyYXRvciIsImFsbG9jYXRlVGFyZ2V0SWQiLCJyZXRyaWV2ZU1ldGFkYXRhIiwiaGlnaGVzdFRhcmdldElkIiwic2F2ZU1ldGFkYXRhIiwiZ2V0TGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbiIsImxhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24iLCJnZXRIaWdoZXN0U2VxdWVuY2VOdW1iZXIiLCJnZXRIaWdoZXN0TGlzdGVuU2VxdWVuY2VOdW1iZXIiLCJzZXRUYXJnZXRzTWV0YWRhdGEiLCJoaWdoZXN0TGlzdGVuU2VxdWVuY2VOdW1iZXIiLCJhZGRUYXJnZXREYXRhIiwidGFyZ2V0RGF0YSIsInNhdmVUYXJnZXREYXRhIiwidGFyZ2V0Q291bnQiLCJ1cGRhdGVNZXRhZGF0YUZyb21UYXJnZXREYXRhIiwidXBkYXRlVGFyZ2V0RGF0YSIsInJlbW92ZVRhcmdldERhdGEiLCJyZW1vdmVNYXRjaGluZ0tleXNGb3JUYXJnZXRJZCIsInRhcmdldHNTdG9yZSIsInJlbW92ZVRhcmdldHMiLCJhY3RpdmVUYXJnZXRJZHMiLCJmcm9tRGJUYXJnZXQiLCJmb3JFYWNoVGFyZ2V0IiwiRGJUYXJnZXRHbG9iYWwiLCJ0b0RiVGFyZ2V0IiwidXBkYXRlZCIsImdldFRhcmdldENvdW50IiwiZ2V0VGFyZ2V0RGF0YSIsImNhbm9uaWNhbElkIiwiRGJUYXJnZXQiLCJxdWVyeVRhcmdldHNJbmRleE5hbWUiLCJmb3VuZCIsImFkZE1hdGNoaW5nS2V5cyIsImRvY3VtZW50VGFyZ2V0U3RvcmUiLCJEYlRhcmdldERvY3VtZW50IiwiYWRkUmVmZXJlbmNlIiwicmVtb3ZlTWF0Y2hpbmdLZXlzIiwicmVtb3ZlUmVmZXJlbmNlIiwiZ2V0TWF0Y2hpbmdLZXlzRm9yVGFyZ2V0SWQiLCJkb2N1bWVudFRhcmdldHNJbmRleCIsImdldFRhcmdldERhdGFGb3JUYXJnZXQiLCJ0YXJnZXRHbG9iYWwiLCJNdXRhdGlvblR5cGUiLCJGaWVsZE1hc2siLCJmaWVsZHMiLCJmcm9tU2V0IiwiZnJvbUFycmF5IiwiZmllbGRzQXNTZXQiLCJmaWVsZFBhdGgiLCJjb3ZlcnMiLCJmaWVsZE1hc2tQYXRoIiwiRmllbGRUcmFuc2Zvcm0iLCJmaWVsZCIsInRyYW5zZm9ybSIsIk11dGF0aW9uUmVzdWx0IiwidHJhbnNmb3JtUmVzdWx0cyIsIlR5cGVPcmRlciIsIlNlcnZlclRpbWVzdGFtcEJlaGF2aW9yIiwiUHJlY29uZGl0aW9uIiwidXBkYXRlVGltZSIsImV4aXN0cyIsImlzVmFsaWRGb3IiLCJEb2N1bWVudCIsImlzTm9uZSIsIk5PTkUiLCJNdXRhdGlvbiIsInZlcmlmeUtleU1hdGNoZXMiLCJnZXRQb3N0TXV0YXRpb25WZXJzaW9uIiwiU2V0TXV0YXRpb24iLCJwcmVjb25kaXRpb24iLCJTZXQiLCJoYXNDb21taXR0ZWRNdXRhdGlvbnMiLCJoYXNMb2NhbE11dGF0aW9ucyIsImV4dHJhY3RCYXNlVmFsdWUiLCJQYXRjaE11dGF0aW9uIiwiZmllbGRNYXNrIiwiUGF0Y2giLCJVbmtub3duRG9jdW1lbnQiLCJuZXdEYXRhIiwicGF0Y2hEb2N1bWVudCIsIk9iamVjdFZhbHVlIiwicGF0Y2hPYmplY3QiLCJuZXdWYWx1ZSIsIlRyYW5zZm9ybU11dGF0aW9uIiwiZmllbGRUcmFuc2Zvcm1zIiwiVHJhbnNmb3JtIiwiZG9jIiwicmVxdWlyZURvY3VtZW50Iiwic2VydmVyVHJhbnNmb3JtUmVzdWx0cyIsInRyYW5zZm9ybU9iamVjdCIsImxvY2FsVHJhbnNmb3JtUmVzdWx0cyIsImJhc2VPYmplY3QiLCJmaWVsZFRyYW5zZm9ybSIsImV4aXN0aW5nVmFsdWUiLCJjb2VyY2VkVmFsdWUiLCJjb21wdXRlQmFzZVZhbHVlIiwiRGVsZXRlTXV0YXRpb24iLCJEZWxldGUiLCJOb0RvY3VtZW50IiwiRmllbGRWYWx1ZU9wdGlvbnMiLCJzZXJ2ZXJUaW1lc3RhbXBCZWhhdmlvciIsInRpbWVzdGFtcHNJblNuYXBzaG90cyIsImZyb21TbmFwc2hvdE9wdGlvbnMiLCJzZXJ2ZXJUaW1lc3RhbXBzIiwiRXN0aW1hdGUiLCJQcmV2aW91cyIsIkRlZmF1bHQiLCJGaWVsZFZhbHVlIiwiZGVmYXVsdENvbXBhcmVUbyIsInR5cGVPcmRlciIsIk51bGxWYWx1ZSIsImludGVybmFsVmFsdWUiLCJJTlNUQU5DRSIsIkJvb2xlYW5WYWx1ZSIsIm9mIiwiVFJVRSIsIkZBTFNFIiwiTnVtYmVyVmFsdWUiLCJudW1lcmljRXF1YWxzIiwiSW50ZWdlclZhbHVlIiwiRG91YmxlVmFsdWUiLCJOQU4iLCJOYU4iLCJJbmZpbml0eSIsIlN0cmluZ1ZhbHVlIiwiVGltZXN0YW1wVmFsdWUiLCJTZXJ2ZXJUaW1lc3RhbXBWYWx1ZSIsIkJsb2JWYWx1ZSIsIlJlZlZhbHVlIiwiR2VvUG9pbnRWYWx1ZSIsIml0MSIsIml0MiIsIm5leHQxIiwibmV4dDIiLCJ0byIsInNldENoaWxkIiwibmV3Q2hpbGQiLCJwYXRoU2VnbWVudCIsImN1cnJlbnRQYXRoIiwibmVzdGVkRmllbGRzIiwibmVzdGVkUGF0aCIsImNoaWxkTmFtZSIsIkFycmF5VmFsdWUiLCJtaW5MZW5ndGgiLCJNYXliZURvY3VtZW50IiwiY29tcGFyZUJ5S2V5IiwiZDEiLCJkMiIsIm9iamVjdFZhbHVlIiwicHJvdG8iLCJjb252ZXJ0ZXIiLCJmaWVsZFZhbHVlQ2FjaGUiLCJjYW5vbmljYWxQYXRoIiwiZmllbGRWYWx1ZSIsInByb3RvVmFsdWUiLCJnZXRQcm90b0ZpZWxkIiwicmVzdWx0XzEiLCJtYXBWYWx1ZSIsImNvbXBhcmVCeUZpZWxkIiwidjEiLCJ2MiIsIk9iamVjdE1hcCIsIm1hcEtleUZuIiwiaW5uZXIiLCJtYXRjaGVzIiwibWF0Y2hlc18xIiwib3RoZXJLZXkiLCJlbnRyaWVzXzEiLCJSZW1vdGVEb2N1bWVudENoYW5nZUJ1ZmZlciIsImNoYW5nZXMiLCJjaGFuZ2VzQXBwbGllZCIsIl9yZWFkVGltZSIsImFkZEVudHJ5IiwibWF5YmVEb2N1bWVudCIsInJlYWRUaW1lIiwiYXNzZXJ0Tm90QXBwbGllZCIsInJlbW92ZUVudHJ5IiwiZ2V0RW50cnkiLCJidWZmZXJlZEVudHJ5IiwiZ2V0RnJvbUNhY2hlIiwiZ2V0RW50cmllcyIsImdldEFsbEZyb21DYWNoZSIsImFwcGx5Q2hhbmdlcyIsIkluZGV4ZWREYlJlbW90ZURvY3VtZW50Q2FjaGUiLCJyZW1vdGVEb2N1bWVudHNTdG9yZSIsImRiS2V5IiwidXBkYXRlTWV0YWRhdGEiLCJzaXplRGVsdGEiLCJnZXRNZXRhZGF0YSIsImJ5dGVTaXplIiwic2V0TWV0YWRhdGEiLCJkYlJlbW90ZURvYyIsIm1heWJlRGVjb2RlRG9jdW1lbnQiLCJnZXRTaXplZEVudHJ5IiwiZGJEb2N1bWVudFNpemUiLCJmb3JFYWNoRGJFbnRyeSIsImdldFNpemVkRW50cmllcyIsInNpemVNYXAiLCJtYXliZURvY3VtZW50cyIsImtleUl0ZXIiLCJwb3RlbnRpYWxLZXlSYXciLCJwb3RlbnRpYWxLZXkiLCJnZXREb2N1bWVudHNNYXRjaGluZ1F1ZXJ5Iiwic2luY2VSZWFkVGltZSIsImltbWVkaWF0ZUNoaWxkcmVuUGF0aExlbmd0aCIsIml0ZXJhdGlvbk9wdGlvbnMiLCJjb2xsZWN0aW9uS2V5IiwicmVhZFRpbWVLZXkiLCJ0b0RiVGltZXN0YW1wS2V5IiwiRGJSZW1vdGVEb2N1bWVudCIsImNvbGxlY3Rpb25SZWFkVGltZUluZGV4IiwiZnJvbURiUmVtb3RlRG9jdW1lbnQiLCJnZXROZXdEb2N1bWVudENoYW5nZXMiLCJjaGFuZ2VkRG9jcyIsImxhc3RSZWFkVGltZSIsImRvY3VtZW50c1N0b3JlIiwicmVhZFRpbWVJbmRleCIsImZyb21EYlRpbWVzdGFtcEtleSIsImdldExhc3REb2N1bWVudENoYW5nZSIsImNoYW5nZWREb2MiLCJuZXdDaGFuZ2VCdWZmZXIiLCJ0cmFja1JlbW92YWxzIiwiZ2V0U2l6ZSIsImRvY3VtZW50R2xvYmFsU3RvcmUiLCJEYlJlbW90ZURvY3VtZW50R2xvYmFsIiwiY2xhc3NfMSIsImRvY3VtZW50Q2FjaGUiLCJkb2N1bWVudFNpemVzIiwicHJldmlvdXNTaXplIiwidG9EYlJlbW90ZURvY3VtZW50IiwiZGVsZXRlZERvYyIsImdldFJlc3VsdCIsInVua25vd25Eb2N1bWVudCIsIm5vRG9jdW1lbnQiLCJNZW1vcnlJbmRleE1hbmFnZXIiLCJjb2xsZWN0aW9uUGFyZW50SW5kZXgiLCJNZW1vcnlDb2xsZWN0aW9uUGFyZW50SW5kZXgiLCJjb2xsZWN0aW9uUGF0aCIsImdldENvbGxlY3Rpb25QYXJlbnRzIiwicGFyZW50UGF0aCIsImV4aXN0aW5nUGFyZW50cyIsImFkZGVkIiwiU2NoZW1hQ29udmVydGVyIiwiZnJvbVZlcnNpb24iLCJ0b1ZlcnNpb24iLCJEYlByaW1hcnlDbGllbnQiLCJjcmVhdGVQcmltYXJ5Q2xpZW50U3RvcmUiLCJhdXRvSW5jcmVtZW50IiwidXNlck11dGF0aW9uc0tleVBhdGgiLCJ1bmlxdWUiLCJjcmVhdGVNdXRhdGlvblF1ZXVlIiwiY3JlYXRlUXVlcnlDYWNoZSIsImNyZWF0ZVJlbW90ZURvY3VtZW50Q2FjaGUiLCJkZWxldGVPYmplY3RTdG9yZSIsImRyb3BRdWVyeUNhY2hlIiwiZ2xvYmFsU3RvcmUiLCJ3cml0ZUVtcHR5VGFyZ2V0R2xvYmFsRW50cnkiLCJleGlzdGluZ011dGF0aW9ucyIsInYzTXV0YXRpb25zU3RvcmUiLCJ3cml0ZUFsbCIsInVwZ3JhZGVNdXRhdGlvbkJhdGNoU2NoZW1hQW5kTWlncmF0ZURhdGEiLCJEYkNsaWVudE1ldGFkYXRhIiwiY3JlYXRlQ2xpZW50TWV0YWRhdGFTdG9yZSIsInJlbW92ZUFja25vd2xlZGdlZE11dGF0aW9ucyIsImNyZWF0ZURvY3VtZW50R2xvYmFsU3RvcmUiLCJhZGREb2N1bWVudEdsb2JhbCIsImVuc3VyZVNlcXVlbmNlTnVtYmVycyIsImNyZWF0ZUNvbGxlY3Rpb25QYXJlbnRJbmRleCIsImRyb3BSZW1vdGVEb2N1bWVudENoYW5nZXNTdG9yZSIsInJlbW90ZURvY3VtZW50U3RvcmUiLCJyZWFkVGltZUluZGV4UGF0aCIsImNvbGxlY3Rpb25SZWFkVGltZUluZGV4UGF0aCIsImNyZWF0ZVJlbW90ZURvY3VtZW50UmVhZFRpbWVJbmRleCIsImJ5dGVDb3VudCIsInF1ZXVlc1N0b3JlIiwicXVldWVzIiwicXVldWUiLCJsYXN0QWNrbm93bGVkZ2VkQmF0Y2hJZCIsImN1cnJlbnRTZXF1ZW5jZU51bWJlciIsImRvY1NlbnRpbmVsS2V5Iiwic2VudGluZWxLZXkiLCJtYXliZVNlbnRpbmVsIiwid3JpdGVTZW50aW5lbEtleSIsIkRiQ29sbGVjdGlvblBhcmVudCIsImNvbGxlY3Rpb25QYXJlbnRzU3RvcmUiLCJjYWNoZSIsInBhdGhTZWdtZW50cyIsIkRiVGltZXN0YW1wIiwib3duZXJJZCIsImFsbG93VGFiU3luY2hyb25pemF0aW9uIiwibGVhc2VUaW1lc3RhbXBNcyIsImxvY2FsV3JpdGVUaW1lTXMiLCJEYk5vRG9jdW1lbnQiLCJEYlVua25vd25Eb2N1bWVudCIsInJlc3VtZVRva2VuIiwibGFzdExpc3RlblNlcXVlbmNlTnVtYmVyIiwibGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbiIsInF1ZXJ5VGFyZ2V0c0tleVBhdGgiLCJkb2N1bWVudFRhcmdldHNLZXlQYXRoIiwiY2xpZW50SWQiLCJ1cGRhdGVUaW1lTXMiLCJuZXR3b3JrRW5hYmxlZCIsImluRm9yZWdyb3VuZCIsIlRhcmdldFB1cnBvc2UiLCJWM19TVE9SRVMiLCJWNF9TVE9SRVMiLCJWNl9TVE9SRVMiLCJBTExfU1RPUkVTIiwiSW5kZXhlZERiSW5kZXhNYW5hZ2VyIiwiY29sbGVjdGlvblBhcmVudHNDYWNoZSIsImNvbGxlY3Rpb25QYXJlbnQiLCJwYXJlbnRQYXRocyIsImVudHJ5IiwiVGFyZ2V0RGF0YSIsInB1cnBvc2UiLCJzbmFwc2hvdFZlcnNpb24iLCJ3aXRoU2VxdWVuY2VOdW1iZXIiLCJ3aXRoUmVzdW1lVG9rZW4iLCJ3aXRoTGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbiIsIkxvY2FsU2VyaWFsaXplciIsInJlbW90ZVNlcmlhbGl6ZXIiLCJyZW1vdGVEb2MiLCJmcm9tRG9jdW1lbnQiLCJmcm9tRGJUaW1lc3RhbXAiLCJkYlJlYWRUaW1lIiwidG9Eb2N1bWVudCIsInJlYWRUaW1lXzEiLCJ0b0RiVGltZXN0YW1wIiwicmVhZFRpbWVfMiIsImRiVGltZXN0YW1wS2V5IiwiZGJUaW1lc3RhbXAiLCJzZXJpYWxpemVkQmFzZU11dGF0aW9ucyIsInRvTXV0YXRpb24iLCJzZXJpYWxpemVkTXV0YXRpb25zIiwiZnJvbU11dGF0aW9uIiwidG9EYlJlc291cmNlUGF0aHMiLCJlbmNvZGVkS2V5cyIsImZyb21EYlJlc291cmNlUGF0aHMiLCJlbmNvZGVkUGF0aHMiLCJlbmNvZGVkUGF0aHNfMSIsImRiVGFyZ2V0IiwiZG9jdW1lbnRzIiwiZnJvbURvY3VtZW50c1RhcmdldCIsImZyb21RdWVyeVRhcmdldCIsIkxpc3RlbiIsInF1ZXJ5UHJvdG8iLCJkYkxhc3RMaW1ib0ZyZWVUaW1lc3RhbXAiLCJ0b0RvY3VtZW50c1RhcmdldCIsInRvUXVlcnlUYXJnZXQiLCJidWZmZXJFbnRyeUNvbXBhcmF0b3IiLCJhU2VxdWVuY2UiLCJhSW5kZXgiLCJiU2VxdWVuY2UiLCJiSW5kZXgiLCJzZXFDbXAiLCJSb2xsaW5nU2VxdWVuY2VOdW1iZXJCdWZmZXIiLCJtYXhFbGVtZW50cyIsInByZXZpb3VzSW5kZXgiLCJuZXh0SW5kZXgiLCJhZGRFbGVtZW50IiwiaGlnaGVzdFZhbHVlIiwiR0NfRElEX05PVF9SVU4iLCJkaWRSdW4iLCJzZXF1ZW5jZU51bWJlcnNDb2xsZWN0ZWQiLCJ0YXJnZXRzUmVtb3ZlZCIsImRvY3VtZW50c1JlbW92ZWQiLCJMcnVQYXJhbXMiLCJjYWNoZVNpemVDb2xsZWN0aW9uVGhyZXNob2xkIiwicGVyY2VudGlsZVRvQ29sbGVjdCIsIm1heGltdW1TZXF1ZW5jZU51bWJlcnNUb0NvbGxlY3QiLCJ3aXRoQ2FjaGVTaXplIiwiY2FjaGVTaXplIiwiREVGQVVMVF9DT0xMRUNUSU9OX1BFUkNFTlRJTEUiLCJERUZBVUxUX01BWF9TRVFVRU5DRV9OVU1CRVJTX1RPX0NPTExFQ1QiLCJDT0xMRUNUSU9OX0RJU0FCTEVEIiwiTUlOSU1VTV9DQUNIRV9TSVpFX0JZVEVTIiwiREVGQVVMVF9DQUNIRV9TSVpFX0JZVEVTIiwiREVGQVVMVCIsIkRJU0FCTEVEIiwiTHJ1U2NoZWR1bGVyIiwiZ2FyYmFnZUNvbGxlY3RvciIsImxvY2FsU3RvcmUiLCJoYXNSdW4iLCJnY1Rhc2siLCJzY2hlZHVsZUdDIiwic3RvcCIsImRlbGF5IiwiTHJ1R2FyYmFnZUNvbGxlY3Rpb24iLCJjb2xsZWN0R2FyYmFnZSIsImlnbm9yZUlmUHJpbWFyeUxlYXNlTG9zcyIsIkxydUdhcmJhZ2VDb2xsZWN0b3IiLCJkZWxlZ2F0ZSIsImNhbGN1bGF0ZVRhcmdldENvdW50IiwicGVyY2VudGlsZSIsImdldFNlcXVlbmNlTnVtYmVyQ291bnQiLCJudGhTZXF1ZW5jZU51bWJlciIsImZvckVhY2hPcnBoYW5lZERvY3VtZW50U2VxdWVuY2VOdW1iZXIiLCJtYXhWYWx1ZSIsInJlbW92ZU9ycGhhbmVkRG9jdW1lbnRzIiwiY29sbGVjdCIsImdldENhY2hlU2l6ZSIsInJ1bkdhcmJhZ2VDb2xsZWN0aW9uIiwidXBwZXJCb3VuZFNlcXVlbmNlTnVtYmVyIiwic2VxdWVuY2VOdW1iZXJzVG9Db2xsZWN0IiwiY291bnRlZFRhcmdldHNUcyIsImZvdW5kVXBwZXJCb3VuZFRzIiwicmVtb3ZlZFRhcmdldHNUcyIsInJlbW92ZWREb2N1bWVudHNUcyIsInN0YXJ0VHMiLCJzZXF1ZW5jZU51bWJlcnMiLCJudW1UYXJnZXRzUmVtb3ZlZCIsIlBlcnNpc3RlbmNlVHJhbnNhY3Rpb24iLCJvbkNvbW1pdHRlZExpc3RlbmVycyIsImxpc3RlbmVyIiwicmFpc2VPbkNvbW1pdHRlZEV2ZW50IiwiTE9HX1RBRyQxIiwiUFJJTUFSWV9MRUFTRV9MT1NUX0VSUk9SX01TRyIsIlBSSU1BUllfTEVBU0VfRVhDTFVTSVZFX0VSUk9SX01TRyIsIkluZGV4ZWREYlRyYW5zYWN0aW9uIiwibHJ1UGFyYW1zIiwiX3N0YXJ0ZWQiLCJpc1ByaW1hcnkiLCJ3aW5kb3dVbmxvYWRIYW5kbGVyIiwiZG9jdW1lbnRWaXNpYmlsaXR5SGFuZGxlciIsImNsaWVudE1ldGFkYXRhUmVmcmVzaGVyIiwibGFzdEdhcmJhZ2VDb2xsZWN0aW9uVGltZSIsInByaW1hcnlTdGF0ZUxpc3RlbmVyIiwiSW5kZXhlZERiTHJ1RGVsZWdhdGUiLCJkYk5hbWUiLCJNQUlOX0RBVEFCQVNFIiwidGFyZ2V0Q2FjaGUiLCJyZW1vdGVEb2N1bWVudENhY2hlIiwibG9jYWxTdG9yYWdlIiwid2ViU3RvcmFnZSIsImNyZWF0ZUluZGV4ZWREYlBlcnNpc3RlbmNlIiwicGVyc2lzdGVuY2UiLCJzdGFydGVkIiwic2ltcGxlRGIiLCJ1cGRhdGVDbGllbnRNZXRhZGF0YUFuZFRyeUJlY29tZVByaW1hcnkiLCJhdHRhY2hWaXNpYmlsaXR5SGFuZGxlciIsImF0dGFjaFdpbmRvd1VubG9hZEhvb2siLCJzY2hlZHVsZUNsaWVudE1ldGFkYXRhQW5kUHJpbWFyeUxlYXNlUmVmcmVzaGVzIiwibGlzdGVuU2VxdWVuY2UiLCJzZXRQcmltYXJ5U3RhdGVMaXN0ZW5lciIsInByaW1hcnlTdGF0ZSIsInNldERhdGFiYXNlRGVsZXRlZExpc3RlbmVyIiwiZGF0YWJhc2VEZWxldGVkTGlzdGVuZXIiLCJuZXdWZXJzaW9uIiwic2V0TmV0d29ya0VuYWJsZWQiLCJjbGllbnRNZXRhZGF0YVN0b3JlIiwidmVyaWZ5UHJpbWFyeUxlYXNlIiwic3VjY2VzcyIsImNhbkFjdEFzUHJpbWFyeSIsInJlbGVhc2VQcmltYXJ5TGVhc2VJZkhlbGQiLCJhY3F1aXJlT3JFeHRlbmRQcmltYXJ5TGVhc2UiLCJwcmltYXJ5Q2xpZW50U3RvcmUiLCJwcmltYXJ5Q2xpZW50IiwiaXNMb2NhbENsaWVudCIsInJlbW92ZUNsaWVudE1ldGFkYXRhIiwibWF5YmVHYXJiYWdlQ29sbGVjdE11bHRpQ2xpZW50U3RhdGUiLCJpc1dpdGhpbkFnZSIsIm1ldGFkYXRhU3RvcmUiLCJleGlzdGluZ0NsaWVudHMiLCJhY3RpdmUiLCJmaWx0ZXJBY3RpdmVDbGllbnRzIiwiaW5hY3RpdmUiLCJjbGllbnQiLCJpbmFjdGl2ZUNsaWVudCIsInJlbW92ZUl0ZW0iLCJ6b21iaWVkQ2xpZW50TG9jYWxTdG9yYWdlS2V5IiwiQ2xpZW50TWV0YWRhdGFSZWZyZXNoIiwiY3VycmVudFByaW1hcnkiLCJpc0NsaWVudFpvbWJpZWQiLCJmaW5kIiwib3RoZXJDbGllbnQiLCJvdGhlckNsaWVudEhhc0JldHRlck5ldHdvcmtTdGF0ZSIsIm90aGVyQ2xpZW50SGFzQmV0dGVyVmlzaWJpbGl0eSIsIm90aGVyQ2xpZW50SGFzU2FtZU5ldHdvcmtTdGF0ZSIsInNodXRkb3duIiwibWFya0NsaWVudFpvbWJpZWQiLCJkZXRhY2hWaXNpYmlsaXR5SGFuZGxlciIsImRldGFjaFdpbmRvd1VubG9hZEhvb2siLCJyZW1vdmVDbGllbnRab21iaWVkRW50cnkiLCJjbGllbnRzIiwiYWN0aXZpdHlUaHJlc2hvbGRNcyIsImdldEFjdGl2ZUNsaWVudHMiLCJjbGllbnRNZXRhZGF0YSIsImNsZWFyUGVyc2lzdGVuY2UiLCJnZXRNdXRhdGlvblF1ZXVlIiwiZ2V0VGFyZ2V0Q2FjaGUiLCJnZXRSZW1vdGVEb2N1bWVudENhY2hlIiwiZ2V0SW5kZXhNYW5hZ2VyIiwidHJhbnNhY3Rpb25PcGVyYXRpb24iLCJwZXJzaXN0ZW5jZVRyYW5zYWN0aW9uIiwic2ltcGxlRGJNb2RlIiwic2ltcGxlRGJUeG4iLCJob2xkc1ByaW1hcnlMZWFzZSIsInZlcmlmeUFsbG93VGFiU3luY2hyb25pemF0aW9uIiwibmV3UHJpbWFyeSIsImJ1aWxkU3RvcmFnZVByZWZpeCIsImRhdGFiYXNlSW5mbyIsImlzRGVmYXVsdERhdGFiYXNlIiwibWF4QWdlTXMiLCJhZGRFdmVudExpc3RlbmVyIiwidmlzaWJpbGl0eVN0YXRlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImlzWm9tYmllZCIsImdldEl0ZW0iLCJzZXRJdGVtIiwiWk9NQklFRF9DTElFTlRTX0tFWV9QUkVGSVgiLCJpc1ByaW1hcnlMZWFzZUxvc3RFcnJvciIsImluTWVtb3J5UGlucyIsImRvY0NvdW50UHJvbWlzZSIsIm9ycGhhbmVkRG9jbWVudENvdW50IiwiZG9jQ291bnQiLCJvcnBoYW5lZENvdW50IiwiZm9yRWFjaE9ycGhhbmVkRG9jdW1lbnQiLCJzZXRJbk1lbW9yeVBpbnMiLCJpc1Bpbm5lZCIsIm11dGF0aW9uUXVldWVzQ29udGFpbktleSIsImNoYW5nZUJ1ZmZlciIsImRvY3VtZW50Q291bnQiLCJyZW1vdmVUYXJnZXQiLCJ1cGRhdGVMaW1ib0RvY3VtZW50IiwibmV4dFBhdGgiLCJuZXh0VG9SZXBvcnQiLCJzZW50aW5lbFJvdyIsIk51bWJlckFzQW55IiwiTUlOX1NBRkVfSU5URUdFUiIsIk1BWF9TQUZFX0lOVEVHRVIiLCJpc0ludGVnZXIiLCJpc0Zpbml0ZSIsImlzTnVsbE9yVW5kZWZpbmVkIiwiaXNTYWZlSW50ZWdlciIsIkxpbWl0VHlwZSIsIlRhcmdldCIsImNvbGxlY3Rpb25Hcm91cCIsIm9yZGVyQnkiLCJmaWx0ZXJzIiwic3RhcnRBdCIsImVuZEF0IiwibWVtb2l6ZWRDYW5vbmljYWxJZCIsIlF1ZXJ5IiwiZXhwbGljaXRPcmRlckJ5IiwibGltaXRUeXBlIiwiRmlyc3QiLCJtZW1vaXplZE9yZGVyQnkiLCJtZW1vaXplZFRhcmdldCIsImFzc2VydFZhbGlkQm91bmQiLCJhdFBhdGgiLCJpbmVxdWFsaXR5RmllbGQiLCJnZXRJbmVxdWFsaXR5RmlsdGVyRmllbGQiLCJmaXJzdE9yZGVyQnlGaWVsZCIsImdldEZpcnN0T3JkZXJCeUZpZWxkIiwiS0VZX09SREVSSU5HX0FTQyIsIk9yZGVyQnkiLCJmb3VuZEtleU9yZGVyaW5nIiwibGFzdERpcmVjdGlvbiIsImRpciIsIkRpcmVjdGlvbiIsIkFTQ0VORElORyIsIktFWV9PUkRFUklOR19ERVNDIiwiYWRkRmlsdGVyIiwiRmllbGRGaWx0ZXIiLCJpc0luZXF1YWxpdHkiLCJuZXdGaWx0ZXJzIiwiYWRkT3JkZXJCeSIsIm5ld09yZGVyQnkiLCJ3aXRoTGltaXRUb0ZpcnN0Iiwid2l0aExpbWl0VG9MYXN0IiwiTGFzdCIsIndpdGhTdGFydEF0Iiwid2l0aEVuZEF0IiwiYXNDb2xsZWN0aW9uUXVlcnlBdFBhdGgiLCJtYXRjaGVzQWxsRG9jdW1lbnRzIiwidG9UYXJnZXQiLCJkb2NDb21wYXJhdG9yIiwiY29tcGFyZWRPbktleUZpZWxkIiwiY29tcCIsImNvbXBhcmUiLCJtYXRjaGVzUGF0aEFuZENvbGxlY3Rpb25Hcm91cCIsIm1hdGNoZXNPcmRlckJ5IiwibWF0Y2hlc0ZpbHRlcnMiLCJtYXRjaGVzQm91bmRzIiwiaGFzTGltaXRUb0ZpcnN0IiwiaGFzTGltaXRUb0xhc3QiLCJmaW5kRmlsdGVyT3BlcmF0b3IiLCJvcGVyYXRvcnMiLCJvcmRlckJ5cyIsIkRFU0NFTkRJTkciLCJCb3VuZCIsImJlZm9yZSIsImRvY1BhdGgiLCJzb3J0c0JlZm9yZURvY3VtZW50IiwiRmlsdGVyIiwiT3BlcmF0b3IiLCJMRVNTX1RIQU4iLCJMRVNTX1RIQU5fT1JfRVFVQUwiLCJFUVVBTCIsIkdSRUFURVJfVEhBTl9PUl9FUVVBTCIsIkdSRUFURVJfVEhBTiIsIkFSUkFZX0NPTlRBSU5TIiwiSU4iLCJBUlJBWV9DT05UQUlOU19BTlkiLCJldmVyeSIsIktleUZpZWxkSW5GaWx0ZXIiLCJLZXlGaWVsZEZpbHRlciIsIkFycmF5Q29udGFpbnNGaWx0ZXIiLCJJbkZpbHRlciIsIkFycmF5Q29udGFpbnNBbnlGaWx0ZXIiLCJtYXRjaGVzQ29tcGFyaXNvbiIsImNvbXBhcmlzb24iLCJyZWZWYWx1ZSIsImFycmF5VmFsdWUiLCJsaHNFbGVtIiwib3JkZXJCeUNvbXBvbmVudCIsImRvY1ZhbHVlIiwidGhpc1Bvc2l0aW9uIiwib3RoZXJQb3NpdGlvbiIsImlzS2V5T3JkZXJCeSIsIkluZGV4RnJlZVF1ZXJ5RW5naW5lIiwic2V0TG9jYWxEb2N1bWVudHNWaWV3IiwibG9jYWxEb2N1bWVudHMiLCJsb2NhbERvY3VtZW50c1ZpZXciLCJyZW1vdGVLZXlzIiwiZXhlY3V0ZUZ1bGxDb2xsZWN0aW9uU2NhbiIsImdldERvY3VtZW50cyIsInByZXZpb3VzUmVzdWx0cyIsImFwcGx5UXVlcnkiLCJuZWVkc1JlZmlsbCIsInVwZGF0ZWRSZXN1bHRzIiwicXVlcnlSZXN1bHRzIiwic29ydGVkUHJldmlvdXNSZXN1bHRzIiwibGltYm9GcmVlU25hcHNob3RWZXJzaW9uIiwiZG9jQXRMaW1pdEVkZ2UiLCJoYXNQZW5kaW5nV3JpdGVzIiwiTG9jYWxEb2N1bWVudHNWaWV3IiwibXV0YXRpb25RdWV1ZSIsImdldERvY3VtZW50IiwiYmF0Y2hlcyIsImdldERvY3VtZW50SW50ZXJuYWwiLCJpbkJhdGNoZXMiLCJpbkJhdGNoZXNfMSIsImFwcGx5TG9jYWxNdXRhdGlvbnNUb0RvY3VtZW50cyIsImRvY3MiLCJsb2NhbFZpZXciLCJiYXRjaGVzXzEiLCJnZXRMb2NhbFZpZXdPZkRvY3VtZW50cyIsImJhc2VEb2NzIiwiZ2V0RG9jdW1lbnRzTWF0Y2hpbmdEb2N1bWVudFF1ZXJ5IiwiZ2V0RG9jdW1lbnRzTWF0Y2hpbmdDb2xsZWN0aW9uR3JvdXBRdWVyeSIsImdldERvY3VtZW50c01hdGNoaW5nQ29sbGVjdGlvblF1ZXJ5IiwicGFyZW50cyIsImNvbGxlY3Rpb25RdWVyeSIsIm11dGF0aW9uQmF0Y2hlcyIsIm1hdGNoaW5nTXV0YXRpb25CYXRjaGVzIiwiYWRkTWlzc2luZ0Jhc2VEb2N1bWVudHMiLCJtZXJnZWREb2N1bWVudHMiLCJtdXRhdGlvbkJhdGNoZXNfMSIsIm11dGF0ZWREb2MiLCJleGlzdGluZ0RvY3VtZW50cyIsIm1pc3NpbmdCYXNlRG9jRW50cmllc0ZvclBhdGNoaW5nIiwibWF0Y2hpbmdNdXRhdGlvbkJhdGNoZXNfMSIsIm1pc3NpbmdCYXNlRG9jcyIsIlJlZmVyZW5jZVNldCIsInJlZnNCeUtleSIsIkRvY1JlZmVyZW5jZSIsInJlZnNCeVRhcmdldCIsImNvbXBhcmVCeVRhcmdldElkIiwicmVmIiwiYWRkUmVmZXJlbmNlcyIsInJlbW92ZVJlZiIsInJlbW92ZVJlZmVyZW5jZXMiLCJyZW1vdmVSZWZlcmVuY2VzRm9ySWQiLCJlbXB0eUtleSIsInN0YXJ0UmVmIiwiZW5kUmVmIiwicmVtb3ZlQWxsUmVmZXJlbmNlcyIsInJlZmVyZW5jZXNGb3JJZCIsImZpcnN0UmVmIiwidGFyZ2V0T3JCYXRjaElkIiwiTG9jYWxTdG9yZSIsInF1ZXJ5RW5naW5lIiwiaW5pdGlhbFVzZXIiLCJsb2NhbFZpZXdSZWZlcmVuY2VzIiwidGFyZ2V0RGF0YUJ5VGFyZ2V0IiwidGFyZ2V0SWRCeVRhcmdldCIsImxhc3REb2N1bWVudENoYW5nZVJlYWRUaW1lIiwicmVtb3RlRG9jdW1lbnRzIiwic3luY2hyb25pemVMYXN0RG9jdW1lbnRDaGFuZ2VSZWFkVGltZSIsImhhbmRsZVVzZXJDaGFuZ2UiLCJuZXdNdXRhdGlvblF1ZXVlIiwibmV3TG9jYWxEb2N1bWVudHMiLCJvbGRCYXRjaGVzIiwicHJvbWlzZWRPbGRCYXRjaGVzIiwibmV3QmF0Y2hlcyIsInJlbW92ZWRCYXRjaElkcyIsImFkZGVkQmF0Y2hJZHMiLCJjaGFuZ2VkS2V5cyIsIm9sZEJhdGNoZXNfMSIsIm5ld0JhdGNoZXNfMSIsIl9lIiwiYWZmZWN0ZWREb2N1bWVudHMiLCJsb2NhbFdyaXRlIiwiZXhpc3RpbmdEb2NzIiwiYmFzZVZhbHVlIiwibG9va3VwTXV0YXRpb25Eb2N1bWVudHMiLCJhZmZlY3RlZCIsImRvY3VtZW50QnVmZmVyIiwiYXBwbHlXcml0ZVRvUmVtb3RlRG9jdW1lbnRzIiwicmVqZWN0QmF0Y2giLCJhZmZlY3RlZEtleXMiLCJhcHBseVJlbW90ZUV2ZW50IiwicmVtb3RlRXZlbnQiLCJyZW1vdGVWZXJzaW9uIiwibmV3VGFyZ2V0RGF0YUJ5VGFyZ2V0TWFwIiwidGFyZ2V0Q2hhbmdlcyIsImNoYW5nZSIsIm9sZFRhcmdldERhdGEiLCJhZGRlZERvY3VtZW50cyIsIm5ld1RhcmdldERhdGEiLCJzaG91bGRQZXJzaXN0VGFyZ2V0RGF0YSIsInVwZGF0ZWRLZXlzIiwiZG9jdW1lbnRVcGRhdGVzIiwiZXhpc3RpbmdEb2MiLCJyZXNvbHZlZExpbWJvRG9jdW1lbnRzIiwidXBkYXRlUmVtb3RlVmVyc2lvbiIsIlJFU1VNRV9UT0tFTl9NQVhfQUdFX01JQ1JPUyIsIm1vZGlmaWVkRG9jdW1lbnRzIiwibm90aWZ5TG9jYWxWaWV3Q2hhbmdlcyIsInZpZXdDaGFuZ2VzIiwidmlld0NoYW5nZXNfMSIsInZpZXdDaGFuZ2UiLCJhZGRlZEtleXMiLCJyZW1vdmVkS2V5cyIsImZyb21DYWNoZSIsInVwZGF0ZWRUYXJnZXREYXRhIiwibmV4dE11dGF0aW9uQmF0Y2giLCJhZnRlckJhdGNoSWQiLCJyZWFkRG9jdW1lbnQiLCJhbGxvY2F0ZVRhcmdldCIsImNhY2hlZCIsInJlbGVhc2VUYXJnZXQiLCJrZWVwUGVyc2lzdGVkVGFyZ2V0RGF0YSIsInJlbW92ZWQiLCJleGVjdXRlUXVlcnkiLCJ1c2VQcmV2aW91c1Jlc3VsdHMiLCJyZW1vdGVEb2N1bWVudEtleXMiLCJyZW1vdmVDYWNoZWRNdXRhdGlvbkJhdGNoTWV0YWRhdGEiLCJkb2NLZXlzIiwicHJvbWlzZUNoYWluIiwiYWNrVmVyc2lvbiIsImNhY2hlZFRhcmdldERhdGEiLCJyZW1vdGVEb2N1bWVudENhY2hlXzEiLCJNZW1vcnlNdXRhdGlvblF1ZXVlIiwiYmF0Y2hlc0J5RG9jdW1lbnRLZXkiLCJiYXRjaEluZGV4IiwiaW5kZXhPZkV4aXN0aW5nQmF0Y2hJZCIsImZpbmRNdXRhdGlvbkJhdGNoIiwibXV0YXRpb25CYXRjaCIsInJhd0luZGV4IiwiaW5kZXhPZkJhdGNoSWQiLCJmaW5kTXV0YXRpb25CYXRjaGVzIiwicHJlZml4Iiwic3RhcnRQYXRoIiwicm93S2V5UGF0aCIsIlBlcnNpc3RlbnRTdHJlYW1TdGF0ZSIsIk1lbW9yeVJlbW90ZURvY3VtZW50Q2FjaGUiLCJzaXplciIsImN1cnJlbnRTaXplIiwiZm9yRWFjaERvY3VtZW50S2V5IiwiTWVtb3J5VGFyZ2V0Q2FjaGUiLCJ0YXJnZXRzIiwiaGlnaGVzdFNlcXVlbmNlTnVtYmVyIiwibmV4dFRhcmdldElkIiwicmVtb3ZhbHMiLCJtYXRjaGluZ0tleXMiLCJNZW1vcnlQZXJzaXN0ZW5jZSIsInJlZmVyZW5jZURlbGVnYXRlRmFjdG9yeSIsIm11dGF0aW9uUXVldWVzIiwiZG9jdW1lbnRTaXplIiwiY3JlYXRlTHJ1UGVyc2lzdGVuY2UiLCJNZW1vcnlMcnVEZWxlZ2F0ZSIsImNyZWF0ZUVhZ2VyUGVyc2lzdGVuY2UiLCJNZW1vcnlFYWdlckRlbGVnYXRlIiwidG9LZXkiLCJNZW1vcnlUcmFuc2FjdGlvbiIsIm9uVHJhbnNhY3Rpb25TdGFydGVkIiwib25UcmFuc2FjdGlvbkNvbW1pdHRlZCIsInZzIiwiX29ycGhhbmVkRG9jdW1lbnRzIiwib3JwaGFuZWREb2N1bWVudHMiLCJpc1JlZmVyZW5jZWQiLCJvcnBoYW5lZFNlcXVlbmNlTnVtYmVycyIsIm9ycGhhbmVkRG9jdW1lbnRDb3VudCIsInJlbW90ZURvY3VtZW50Iiwib3JwaGFuZWRBdCIsIkRFRkFVTFRfQkFDS09GRl9JTklUSUFMX0RFTEFZX01TIiwiREVGQVVMVF9CQUNLT0ZGX0ZBQ1RPUiIsIkRFRkFVTFRfQkFDS09GRl9NQVhfREVMQVlfTVMiLCJFeHBvbmVudGlhbEJhY2tvZmYiLCJpbml0aWFsRGVsYXlNcyIsImJhY2tvZmZGYWN0b3IiLCJtYXhEZWxheU1zIiwiY3VycmVudEJhc2VNcyIsInRpbWVyUHJvbWlzZSIsImxhc3RBdHRlbXB0VGltZSIsInJlc2V0VG9NYXgiLCJiYWNrb2ZmQW5kUnVuIiwiZGVzaXJlZERlbGF5V2l0aEppdHRlck1zIiwiaml0dGVyRGVsYXlNcyIsImRlbGF5U29GYXJNcyIsInJlbWFpbmluZ0RlbGF5TXMiLCJPbmxpbmVTdGF0ZSIsIk9ubGluZVN0YXRlU291cmNlIiwiUGVyc2lzdGVudFN0cmVhbSIsImNvbm5lY3Rpb25UaW1lcklkIiwiaWRsZVRpbWVySWQiLCJjb25uZWN0aW9uIiwiY3JlZGVudGlhbHNQcm92aWRlciIsInN0YXRlIiwiSW5pdGlhbCIsImNsb3NlQ291bnQiLCJpZGxlVGltZXIiLCJzdHJlYW0iLCJiYWNrb2ZmIiwiaXNTdGFydGVkIiwiU3RhcnRpbmciLCJPcGVuIiwiQmFja29mZiIsImlzT3BlbiIsImF1dGgiLCJwZXJmb3JtQmFja29mZiIsImluaGliaXRCYWNrb2ZmIiwibWFya0lkbGUiLCJoYW5kbGVJZGxlQ2xvc2VUaW1lciIsInNlbmRSZXF1ZXN0IiwiY2FuY2VsSWRsZUNoZWNrIiwic2VuZCIsImZpbmFsU3RhdGUiLCJpbnZhbGlkYXRlVG9rZW4iLCJ0ZWFyRG93biIsIm9uQ2xvc2UiLCJkaXNwYXRjaElmTm90Q2xvc2VkIiwiZ2V0Q2xvc2VHdWFyZGVkRGlzcGF0Y2hlciIsImdldFRva2VuIiwic3RhcnRTdHJlYW0iLCJycGNFcnJvciIsImhhbmRsZVN0cmVhbUNsb3NlIiwic3RhcnRScGMiLCJvbk9wZW4iLCJvbk1lc3NhZ2UiLCJzdGFydENsb3NlQ291bnQiLCJQZXJzaXN0ZW50TGlzdGVuU3RyZWFtIiwiY3JlZGVudGlhbHMiLCJMaXN0ZW5TdHJlYW1Db25uZWN0aW9uQmFja29mZiIsIkxpc3RlblN0cmVhbUlkbGUiLCJvcGVuU3RyZWFtIiwid2F0Y2hDaGFuZ2VQcm90byIsIndhdGNoQ2hhbmdlIiwiZnJvbVdhdGNoQ2hhbmdlIiwic25hcHNob3QiLCJ2ZXJzaW9uRnJvbUxpc3RlblJlc3BvbnNlIiwib25XYXRjaENoYW5nZSIsIndhdGNoIiwiZW5jb2RlZERhdGFiYXNlSWQiLCJhZGRUYXJnZXQiLCJsYWJlbHMiLCJ0b0xpc3RlblJlcXVlc3RMYWJlbHMiLCJ1bndhdGNoIiwiUGVyc2lzdGVudFdyaXRlU3RyZWFtIiwiV3JpdGVTdHJlYW1Db25uZWN0aW9uQmFja29mZiIsIldyaXRlU3RyZWFtSWRsZSIsImhhbmRzaGFrZUNvbXBsZXRlXyIsIndyaXRlTXV0YXRpb25zIiwicmVzcG9uc2VQcm90byIsImZyb21Xcml0ZVJlc3VsdHMiLCJ3cml0ZVJlc3VsdHMiLCJjb21taXRUaW1lIiwib25NdXRhdGlvblJlc3VsdCIsIm9uSGFuZHNoYWtlQ29tcGxldGUiLCJ3cml0ZUhhbmRzaGFrZSIsIndyaXRlcyIsIkRhdGFzdG9yZSIsIm5ld1BlcnNpc3RlbnRXcml0ZVN0cmVhbSIsIm5ld1BlcnNpc3RlbnRXYXRjaFN0cmVhbSIsImNvbW1pdCIsImludm9rZVJQQyIsInJlc3BvbnNlIiwibG9va3VwIiwidG9OYW1lIiwiaW52b2tlU3RyZWFtaW5nUlBDIiwiZnJvbU1heWJlRG9jdW1lbnQiLCJycGNOYW1lIiwiZGF0YXN0b3JlIiwicmVhZFZlcnNpb25zIiwiY29tbWl0dGVkIiwibGFzdFdyaXRlRXJyb3IiLCJ3cml0dGVuRG9jcyIsImVuc3VyZUNvbW1pdE5vdENhbGxlZCIsInJlY29yZFZlcnNpb24iLCJ3cml0ZSIsInRvTXV0YXRpb25zIiwicHJlY29uZGl0aW9uRm9yVXBkYXRlIiwidW53cml0dGVuIiwiZG9jVmVyc2lvbiIsImV4aXN0aW5nVmVyc2lvbiIsIlJwY0NvZGUiLCJPbmxpbmVTdGF0ZVRyYWNrZXIiLCJvbmxpbmVTdGF0ZUhhbmRsZXIiLCJVbmtub3duIiwid2F0Y2hTdHJlYW1GYWlsdXJlcyIsIm9ubGluZVN0YXRlVGltZXIiLCJzaG91bGRXYXJuQ2xpZW50SXNPZmZsaW5lIiwiaGFuZGxlV2F0Y2hTdHJlYW1TdGFydCIsInNldEFuZEJyb2FkY2FzdCIsIk9ubGluZVN0YXRlVGltZW91dCIsImxvZ0NsaWVudE9mZmxpbmVXYXJuaW5nSWZOZWNlc3NhcnkiLCJPZmZsaW5lIiwiaGFuZGxlV2F0Y2hTdHJlYW1GYWlsdXJlIiwiT25saW5lIiwiY2xlYXJPbmxpbmVTdGF0ZVRpbWVyIiwibmV3U3RhdGUiLCJkZXRhaWxzIiwiaXNQZXJtYW5lbnRFcnJvciIsIm1hcENvZGVGcm9tUnBjQ29kZSIsIm1hcFJwY0NvZGVGcm9tQ29kZSIsIkNoYW5nZVR5cGUiLCJTeW5jU3RhdGUiLCJEb2N1bWVudFNldCIsImtleWVkTWFwIiwic29ydGVkU2V0IiwiZW1wdHlTZXQiLCJvbGRTZXQiLCJ0aGlzRG9jIiwib3RoZXJEb2MiLCJkb2NTdHJpbmdzIiwibmV3U2V0IiwiV2F0Y2hUYXJnZXRDaGFuZ2VTdGF0ZSIsIkRvY3VtZW50Q2hhbmdlU2V0IiwiY2hhbmdlTWFwIiwidHJhY2siLCJvbGRDaGFuZ2UiLCJBZGRlZCIsIk1ldGFkYXRhIiwiUmVtb3ZlZCIsIk1vZGlmaWVkIiwiZ2V0Q2hhbmdlcyIsIlZpZXdTbmFwc2hvdCIsIm9sZERvY3MiLCJkb2NDaGFuZ2VzIiwibXV0YXRlZEtleXMiLCJzeW5jU3RhdGVDaGFuZ2VkIiwiZXhjbHVkZXNNZXRhZGF0YUNoYW5nZXMiLCJmcm9tSW5pdGlhbERvY3VtZW50cyIsIm90aGVyQ2hhbmdlcyIsIlJlbW90ZUV2ZW50IiwidGFyZ2V0TWlzbWF0Y2hlcyIsImNyZWF0ZVN5bnRoZXNpemVkUmVtb3RlRXZlbnRGb3JDdXJyZW50Q2hhbmdlIiwiVGFyZ2V0Q2hhbmdlIiwiY3JlYXRlU3ludGhlc2l6ZWRUYXJnZXRDaGFuZ2VGb3JDdXJyZW50Q2hhbmdlIiwiRG9jdW1lbnRXYXRjaENoYW5nZSIsInVwZGF0ZWRUYXJnZXRJZHMiLCJyZW1vdmVkVGFyZ2V0SWRzIiwibmV3RG9jIiwiRXhpc3RlbmNlRmlsdGVyQ2hhbmdlIiwiZXhpc3RlbmNlRmlsdGVyIiwiV2F0Y2hUYXJnZXRDaGFuZ2UiLCJ0YXJnZXRJZHMiLCJjYXVzZSIsIlRhcmdldFN0YXRlIiwicGVuZGluZ1Jlc3BvbnNlcyIsImRvY3VtZW50Q2hhbmdlcyIsInNuYXBzaG90Q2hhbmdlc01hcCIsIl9yZXN1bWVUb2tlbiIsIl9jdXJyZW50IiwiX2hhc1BlbmRpbmdDaGFuZ2VzIiwidXBkYXRlUmVzdW1lVG9rZW4iLCJ0b1RhcmdldENoYW5nZSIsImNoYW5nZVR5cGUiLCJjbGVhclBlbmRpbmdDaGFuZ2VzIiwiYWRkRG9jdW1lbnRDaGFuZ2UiLCJyZW1vdmVEb2N1bWVudENoYW5nZSIsInJlY29yZFBlbmRpbmdUYXJnZXRSZXF1ZXN0IiwicmVjb3JkVGFyZ2V0UmVzcG9uc2UiLCJtYXJrQ3VycmVudCIsIldhdGNoQ2hhbmdlQWdncmVnYXRvciIsIm1ldGFkYXRhUHJvdmlkZXIiLCJ0YXJnZXRTdGF0ZXMiLCJwZW5kaW5nRG9jdW1lbnRVcGRhdGVzIiwicGVuZGluZ0RvY3VtZW50VGFyZ2V0TWFwcGluZyIsImRvY3VtZW50VGFyZ2V0TWFwIiwicGVuZGluZ1RhcmdldFJlc2V0cyIsImhhbmRsZURvY3VtZW50Q2hhbmdlIiwiZG9jQ2hhbmdlIiwiYWRkRG9jdW1lbnRUb1RhcmdldCIsInJlbW92ZURvY3VtZW50RnJvbVRhcmdldCIsImhhbmRsZVRhcmdldENoYW5nZSIsInRhcmdldENoYW5nZSIsInRhcmdldFN0YXRlIiwiZW5zdXJlVGFyZ2V0U3RhdGUiLCJOb0NoYW5nZSIsImlzQWN0aXZlVGFyZ2V0IiwiaXNQZW5kaW5nIiwiQ3VycmVudCIsIlJlc2V0IiwicmVzZXRUYXJnZXQiLCJoYW5kbGVFeGlzdGVuY2VGaWx0ZXIiLCJ0YXJnZXREYXRhRm9yQWN0aXZlVGFyZ2V0IiwiZ2V0Q3VycmVudERvY3VtZW50Q291bnRGb3JUYXJnZXQiLCJjcmVhdGVSZW1vdGVFdmVudCIsInRhcmdldENvbnRhaW5zRG9jdW1lbnQiLCJoYXNQZW5kaW5nQ2hhbmdlcyIsImlzT25seUxpbWJvVGFyZ2V0IiwiTGltYm9SZXNvbHV0aW9uIiwiZW5zdXJlRG9jdW1lbnRUYXJnZXRNYXBwaW5nIiwidXBkYXRlZERvY3VtZW50IiwiZ2V0UmVtb3RlS2V5c0ZvclRhcmdldCIsInRhcmdldE1hcHBpbmciLCJ0YXJnZXRBY3RpdmUiLCJMT0dfVEFHJDgiLCJSZW1vdGVTdG9yZSIsImNvbm5lY3Rpdml0eU1vbml0b3IiLCJ3cml0ZVBpcGVsaW5lIiwibGlzdGVuVGFyZ2V0cyIsIndhdGNoQ2hhbmdlQWdncmVnYXRvciIsImFkZENhbGxiYWNrIiwic3RhdHVzIiwiY2FuVXNlTmV0d29yayIsInJlc3RhcnROZXR3b3JrIiwib25saW5lU3RhdGVUcmFja2VyIiwid2F0Y2hTdHJlYW0iLCJvbldhdGNoU3RyZWFtT3BlbiIsIm9uV2F0Y2hTdHJlYW1DbG9zZSIsIm9uV2F0Y2hTdHJlYW1DaGFuZ2UiLCJ3cml0ZVN0cmVhbSIsIm9uV3JpdGVTdHJlYW1PcGVuIiwib25Xcml0ZVN0cmVhbUNsb3NlIiwib25Xcml0ZUhhbmRzaGFrZUNvbXBsZXRlIiwiZW5hYmxlTmV0d29yayIsInNob3VsZFN0YXJ0V2F0Y2hTdHJlYW0iLCJzdGFydFdhdGNoU3RyZWFtIiwiZmlsbFdyaXRlUGlwZWxpbmUiLCJkaXNhYmxlTmV0d29yayIsImRpc2FibGVOZXR3b3JrSW50ZXJuYWwiLCJjbGVhblVwV2F0Y2hTdHJlYW1TdGF0ZSIsImxpc3RlbiIsInNlbmRXYXRjaFJlcXVlc3QiLCJ1bmxpc3RlbiIsInNlbmRVbndhdGNoUmVxdWVzdCIsInN5bmNFbmdpbmUiLCJoYW5kbGVUYXJnZXRFcnJvciIsInJhaXNlV2F0Y2hTbmFwc2hvdCIsInJlcXVlc3RUYXJnZXREYXRhIiwiRXhpc3RlbmNlRmlsdGVyTWlzbWF0Y2giLCJyZWplY3RMaXN0ZW4iLCJsYXN0QmF0Y2hJZFJldHJpZXZlZCIsImNhbkFkZFRvV3JpdGVQaXBlbGluZSIsImFkZFRvV3JpdGVQaXBlbGluZSIsInNob3VsZFN0YXJ0V3JpdGVTdHJlYW0iLCJzdGFydFdyaXRlU3RyZWFtIiwib3V0c3RhbmRpbmdXcml0ZXMiLCJoYW5kc2hha2VDb21wbGV0ZSIsImFwcGx5U3VjY2Vzc2Z1bFdyaXRlIiwiaGFuZGxlV3JpdGVFcnJvciIsImhhbmRsZUhhbmRzaGFrZUVycm9yIiwicmVqZWN0RmFpbGVkV3JpdGUiLCJjcmVhdGVUcmFuc2FjdGlvbiIsImhhbmRsZUNyZWRlbnRpYWxDaGFuZ2UiLCJhcHBseVByaW1hcnlTdGF0ZSIsIkdlb1BvaW50IiwibGF0aXR1ZGUiLCJsb25naXR1ZGUiLCJfbGF0IiwiX2xvbmciLCJTZXJ2ZXJUaW1lc3RhbXBUcmFuc2Zvcm0iLCJ0cmFuc2Zvcm1SZXN1bHQiLCJBcnJheVVuaW9uVHJhbnNmb3JtT3BlcmF0aW9uIiwiZWxlbWVudHMiLCJjb2VyY2VkRmllbGRWYWx1ZXNBcnJheSIsInRvVW5pb24iLCJBcnJheVJlbW92ZVRyYW5zZm9ybU9wZXJhdGlvbiIsIl9sb29wXzIiLCJ0b1JlbW92ZSIsIk51bWVyaWNJbmNyZW1lbnRUcmFuc2Zvcm1PcGVyYXRpb24iLCJvcGVyYW5kIiwic3VtIiwiZGlycyIsIkV4aXN0ZW5jZUZpbHRlciIsIkRJUkVDVElPTlMiLCJPUEVSQVRPUlMiLCJJU09fUkVHX0VYUCIsIlJlZ0V4cCIsImFzc2VydFByZXNlbnQiLCJwYXJzZUludDY0IiwiSnNvblByb3RvU2VyaWFsaXplciIsInVzZVByb3RvM0pzb24iLCJ1bnNhZmVDYXN0UHJvdG9CeXRlU3RyaW5nIiwiYnl0ZVN0cmluZyIsImZyb21ScGNTdGF0dXMiLCJ0b0ludDMyVmFsdWUiLCJmcm9tSW50MzJWYWx1ZSIsIm5hbm9zIiwiZnJvbUlzbzg2MDFTdHJpbmciLCJ1dGMiLCJmcmFjdGlvbiIsIm5hbm9TdHIiLCJzdWJzdHIiLCJ0b0J5dGVzIiwiZnJvbUJsb2IiLCJibG9iIiwidG9SZXNvdXJjZU5hbWUiLCJmdWxseVF1YWxpZmllZFByZWZpeFBhdGgiLCJmcm9tUmVzb3VyY2VOYW1lIiwicmVzb3VyY2UiLCJpc1ZhbGlkUmVzb3VyY2VOYW1lIiwiZnJvbU5hbWUiLCJleHRyYWN0TG9jYWxQYXRoRnJvbVJlc291cmNlTmFtZSIsInRvUXVlcnlQYXRoIiwiZnJvbVF1ZXJ5UGF0aCIsInJlc291cmNlTmFtZSIsInRvVmFsdWUiLCJudWxsVmFsdWUiLCJib29sZWFuVmFsdWUiLCJpbnRlZ2VyVmFsdWUiLCJkb3VibGVWYWx1ZSIsInN0cmluZ1ZhbHVlIiwidG9NYXBWYWx1ZSIsInRvQXJyYXlWYWx1ZSIsInRpbWVzdGFtcFZhbHVlIiwiZ2VvUG9pbnRWYWx1ZSIsImJ5dGVzVmFsdWUiLCJyZWZlcmVuY2VWYWx1ZSIsImZyb21WYWx1ZSIsImZyb21GaWVsZHMiLCJkYklkIiwidG9NdXRhdGlvbkRvY3VtZW50IiwidG9GaWVsZHMiLCJmcm9tRm91bmQiLCJmcm9tTWlzc2luZyIsIm1pc3NpbmciLCJ0b1dhdGNoVGFyZ2V0Q2hhbmdlU3RhdGUiLCJ0b1Rlc3RXYXRjaENoYW5nZSIsImRvY3VtZW50Q2hhbmdlIiwiZG9jdW1lbnREZWxldGUiLCJkb2N1bWVudFJlbW92ZSIsInRhcmdldENoYW5nZVR5cGUiLCJmcm9tV2F0Y2hUYXJnZXRDaGFuZ2VTdGF0ZSIsImNhdXNlUHJvdG8iLCJlbnRpdHlDaGFuZ2UiLCJkb2NEZWxldGUiLCJkb2NSZW1vdmUiLCJ1cGRhdGVNYXNrIiwidG9Eb2N1bWVudE1hc2siLCJ0b0ZpZWxkVHJhbnNmb3JtIiwiY3VycmVudERvY3VtZW50IiwidG9QcmVjb25kaXRpb24iLCJmcm9tUHJlY29uZGl0aW9uIiwiZnJvbURvY3VtZW50TWFzayIsImZyb21GaWVsZFRyYW5zZm9ybSIsImZyb21Xcml0ZVJlc3VsdCIsInByb3RvcyIsInNldFRvU2VydmVyVmFsdWUiLCJhcHBlbmRNaXNzaW5nRWxlbWVudHMiLCJyZW1vdmVBbGxGcm9tQXJyYXkiLCJpbmNyZW1lbnQiLCJkb2N1bWVudHNUYXJnZXQiLCJzdHJ1Y3R1cmVkUXVlcnkiLCJhbGxEZXNjZW5kYW50cyIsIndoZXJlIiwidG9GaWx0ZXIiLCJ0b09yZGVyIiwidG9DdXJzb3IiLCJmcm9tQ291bnQiLCJmaWx0ZXJCeSIsImZyb21GaWx0ZXIiLCJmcm9tT3JkZXIiLCJmcm9tQ3Vyc29yIiwidG9MYWJlbCIsInRvVW5hcnlPckZpZWxkRmlsdGVyIiwiY29tcG9zaXRlRmlsdGVyIiwidW5hcnlGaWx0ZXIiLCJmcm9tVW5hcnlGaWx0ZXIiLCJmaWVsZEZpbHRlciIsImZyb21GaWVsZEZpbHRlciIsImFjY3VtIiwib3JkZXIiLCJ0b1Byb3BlcnR5T3JkZXIiLCJmcm9tUHJvcGVydHlPcmRlciIsInRvRGlyZWN0aW9uIiwiZnJvbURpcmVjdGlvbiIsInRvT3BlcmF0b3JOYW1lIiwiZnJvbU9wZXJhdG9yTmFtZSIsInRvRmllbGRQYXRoUmVmZXJlbmNlIiwiZnJvbUZpZWxkUGF0aFJlZmVyZW5jZSIsImZpZWxkUmVmZXJlbmNlIiwibmFuRmllbGQiLCJudWxsRmllbGQiLCJjYW5vbmljYWxGaWVsZHMiLCJmaWVsZFBhdGhzIiwiUXVlcnlMaXN0ZW5lcnNJbmZvIiwidmlld1NuYXAiLCJsaXN0ZW5lcnMiLCJFdmVudE1hbmFnZXIiLCJxdWVyaWVzIiwib25saW5lU3RhdGUiLCJzbmFwc2hvdHNJblN5bmNMaXN0ZW5lcnMiLCJmaXJzdExpc3RlbiIsInF1ZXJ5SW5mbyIsImFwcGx5T25saW5lU3RhdGVDaGFuZ2UiLCJvblZpZXdTbmFwc2hvdCIsInJhaXNlU25hcHNob3RzSW5TeW5jRXZlbnQiLCJsYXN0TGlzdGVuIiwidmlld1NuYXBzIiwicmFpc2VkRXZlbnQiLCJ2aWV3U25hcHNfMSIsIm9uV2F0Y2hFcnJvciIsIm9uT25saW5lU3RhdGVDaGFuZ2UiLCJhZGRTbmFwc2hvdHNJblN5bmNMaXN0ZW5lciIsInJlbW92ZVNuYXBzaG90c0luU3luY0xpc3RlbmVyIiwiUXVlcnlMaXN0ZW5lciIsInF1ZXJ5T2JzZXJ2ZXIiLCJyYWlzZWRJbml0aWFsRXZlbnQiLCJzbmFwIiwiaW5jbHVkZU1ldGFkYXRhQ2hhbmdlcyIsInNob3VsZFJhaXNlRXZlbnQiLCJzaG91bGRSYWlzZUluaXRpYWxFdmVudCIsInJhaXNlSW5pdGlhbEV2ZW50IiwibWF5YmVPbmxpbmUiLCJ3YWl0Rm9yU3luY1doZW5PbmxpbmUiLCJoYXNQZW5kaW5nV3JpdGVzQ2hhbmdlZCIsIkxvY2FsVmlld0NoYW5nZXMiLCJmcm9tU25hcHNob3QiLCJ2aWV3U25hcHNob3QiLCJBZGRlZExpbWJvRG9jdW1lbnQiLCJSZW1vdmVkTGltYm9Eb2N1bWVudCIsIlZpZXciLCJfc3luY2VkRG9jdW1lbnRzIiwic3luY1N0YXRlIiwibGltYm9Eb2N1bWVudHMiLCJkb2N1bWVudFNldCIsImNvbXB1dGVEb2NDaGFuZ2VzIiwicHJldmlvdXNDaGFuZ2VzIiwiY2hhbmdlU2V0Iiwib2xkRG9jdW1lbnRTZXQiLCJuZXdNdXRhdGVkS2V5cyIsIm5ld0RvY3VtZW50U2V0IiwibGFzdERvY0luTGltaXQiLCJmaXJzdERvY0luTGltaXQiLCJuZXdNYXliZURvYyIsIm9sZERvYyIsIm9sZERvY0hhZFBlbmRpbmdNdXRhdGlvbnMiLCJuZXdEb2NIYXNQZW5kaW5nTXV0YXRpb25zIiwiY2hhbmdlQXBwbGllZCIsInNob3VsZFdhaXRGb3JTeW5jZWREb2N1bWVudCIsInVwZGF0ZUxpbWJvRG9jdW1lbnRzIiwiY29tcGFyZUNoYW5nZVR5cGUiLCJhcHBseVRhcmdldENoYW5nZSIsImxpbWJvQ2hhbmdlcyIsIm5ld1N5bmNTdGF0ZSIsIlN5bmNlZCIsIkxvY2FsIiwic2hvdWxkQmVJbkxpbWJvIiwib2xkTGltYm9Eb2N1bWVudHMiLCJzeW5jaHJvbml6ZVdpdGhQZXJzaXN0ZWRTdGF0ZSIsInF1ZXJ5UmVzdWx0IiwiY29tcHV0ZUluaXRpYWxTbmFwc2hvdCIsIlJFVFJZX0NPVU5UIiwiVHJhbnNhY3Rpb25SdW5uZXIiLCJyZW1vdGVTdG9yZSIsInVwZGF0ZUZ1bmN0aW9uIiwicmV0cmllcyIsIlJldHJ5VHJhbnNhY3Rpb24iLCJydW4iLCJydW5XaXRoQmFja09mZiIsInRyeVJ1blVwZGF0ZUZ1bmN0aW9uIiwiY29tbWl0RXJyb3IiLCJoYW5kbGVUcmFuc2FjdGlvbkVycm9yIiwidXNlclByb21pc2VFcnJvciIsImlzUmV0cnlhYmxlVHJhbnNhY3Rpb25FcnJvciIsIlF1ZXJ5VmlldyIsInZpZXciLCJyZWNlaXZlZERvY3VtZW50Iiwic2hhcmVkQ2xpZW50U3RhdGUiLCJjdXJyZW50VXNlciIsInN5bmNFbmdpbmVMaXN0ZW5lciIsInF1ZXJ5Vmlld3NCeVF1ZXJ5IiwicXVlcmllc0J5VGFyZ2V0IiwibGltYm9UYXJnZXRzQnlLZXkiLCJsaW1ib1Jlc29sdXRpb25zQnlUYXJnZXQiLCJsaW1ib0RvY3VtZW50UmVmcyIsIm11dGF0aW9uVXNlckNhbGxiYWNrcyIsInBlbmRpbmdXcml0ZXNDYWxsYmFja3MiLCJsaW1ib1RhcmdldElkR2VuZXJhdG9yIiwicXVlcnlWaWV3Iiwic3RhdHVzXzEiLCJhc3NlcnRTdWJzY3JpYmVkIiwiYWRkTG9jYWxRdWVyeVRhcmdldCIsImluaXRpYWxpemVWaWV3QW5kQ29tcHV0ZVNuYXBzaG90Iiwidmlld0RvY0NoYW5nZXMiLCJzeW50aGVzaXplZFRhcmdldENoYW5nZSIsInN5bmNocm9uaXplVmlld0FuZENvbXB1dGVTbmFwc2hvdCIsInVwZGF0ZVRyYWNrZWRMaW1ib3MiLCJyZW1vdmVMb2NhbFF1ZXJ5VGFyZ2V0IiwiaXNBY3RpdmVRdWVyeVRhcmdldCIsImNsZWFyUXVlcnlTdGF0ZSIsInJlbW92ZUFuZENsZWFudXBUYXJnZXQiLCJ1c2VyQ2FsbGJhY2siLCJhZGRQZW5kaW5nTXV0YXRpb24iLCJhZGRNdXRhdGlvbkNhbGxiYWNrIiwiZW1pdE5ld1NuYXBzQW5kTm90aWZ5TG9jYWxTdG9yZSIsImxpbWJvUmVzb2x1dGlvbiIsIlNoYXJlZENsaWVudFN0YXRlIiwibmV3Vmlld1NuYXBzaG90c18xIiwic2V0T25saW5lU3RhdGUiLCJsaW1ib0tleSIsImV2ZW50XzEiLCJ1cGRhdGVRdWVyeVN0YXRlIiwiYXBwbHlCYXRjaFN0YXRlIiwiYmF0Y2hTdGF0ZSIsInByb2Nlc3NVc2VyQ2FsbGJhY2siLCJtdXRhdGlvbkJhdGNoUmVzdWx0IiwidHJpZ2dlclBlbmRpbmdXcml0ZXNDYWxsYmFja3MiLCJ1cGRhdGVNdXRhdGlvblN0YXRlIiwicmVnaXN0ZXJQZW5kaW5nV3JpdGVzQ2FsbGJhY2siLCJoaWdoZXN0QmF0Y2hJZCIsImNhbGxiYWNrcyIsInJlamVjdE91dHN0YW5kaW5nUGVuZGluZ1dyaXRlc0NhbGxiYWNrcyIsImVycm9yTWVzc2FnZSIsImNsZWFyIiwibmV3Q2FsbGJhY2tzIiwibGltYm9LZXlzIiwicmVtb3ZlTGltYm9UYXJnZXQiLCJsaW1ib1RhcmdldElkIiwibGltYm9DaGFuZ2VzXzEiLCJsaW1ib0NoYW5nZSIsInRyYWNrTGltYm9DaGFuZ2UiLCJjdXJyZW50TGltYm9Eb2NzIiwibmV3U25hcHMiLCJkb2NDaGFuZ2VzSW5BbGxWaWV3cyIsInF1ZXJpZXNQcm9jZXNzZWQiLCJ1c2VyQ2hhbmdlZCIsImFjdGl2ZVRhcmdldHMiLCJhY3RpdmVRdWVyaWVzIiwiYWN0aXZlUXVlcmllc18xIiwiYWN0aXZlVGFyZ2V0c18xIiwicF8xIiwiZ2V0QWxsQWN0aXZlUXVlcnlUYXJnZXRzIiwic3luY2hyb25pemVRdWVyeVZpZXdzQW5kUmFpc2VTbmFwc2hvdHMiLCJpc0xvY2FsUXVlcnlUYXJnZXQiLCJyZXNldExpbWJvRG9jdW1lbnRzIiwibmV3Vmlld1NuYXBzaG90cyIsInRhcmdldHNfMSIsInF1ZXJpZXNfMSIsInN5bnRoZXNpemVUYXJnZXRUb1F1ZXJ5IiwiYXBwbHlUYXJnZXRTdGF0ZSIsInN5bnRoZXNpemVkUmVtb3RlRXZlbnQiLCJhcHBseUFjdGl2ZVRhcmdldHNDaGFuZ2UiLCJhZGRlZF8xIiwicmVtb3ZlZF8xIiwia2V5U2V0IiwicXVlcmllc18yIiwic3luY2VkRG9jdW1lbnRzIiwiVXNlciIsIm90aGVyVXNlciIsIkdPT0dMRV9DUkVERU5USUFMUyIsIkZJUlNUX1BBUlRZIiwiQ0xJRU5UX1NUQVRFX0tFWV9QUkVGSVgiLCJjcmVhdGVXZWJTdG9yYWdlQ2xpZW50U3RhdGVLZXkiLCJNVVRBVElPTl9CQVRDSF9LRVlfUFJFRklYIiwiY3JlYXRlV2ViU3RvcmFnZU11dGF0aW9uQmF0Y2hLZXkiLCJtdXRhdGlvbktleSIsIlFVRVJZX1RBUkdFVF9LRVlfUFJFRklYIiwiY3JlYXRlV2ViU3RvcmFnZVF1ZXJ5VGFyZ2V0TWV0YWRhdGFLZXkiLCJPTkxJTkVfU1RBVEVfS0VZX1BSRUZJWCIsIlNFUVVFTkNFX05VTUJFUl9LRVlfUFJFRklYIiwiTE9HX1RBRyRhIiwiTXV0YXRpb25NZXRhZGF0YSIsImZyb21XZWJTdG9yYWdlRW50cnkiLCJ2YWxpZERhdGEiLCJmaXJlc3RvcmVFcnJvciIsInRvV2ViU3RvcmFnZUpTT04iLCJiYXRjaE1ldGFkYXRhIiwiUXVlcnlUYXJnZXRNZXRhZGF0YSIsIlJlbW90ZUNsaWVudFN0YXRlIiwiY2xpZW50U3RhdGUiLCJhY3RpdmVUYXJnZXRJZHNTZXQiLCJTaGFyZWRPbmxpbmVTdGF0ZSIsIkxvY2FsQ2xpZW50U3RhdGUiLCJhZGRRdWVyeVRhcmdldCIsInJlbW92ZVF1ZXJ5VGFyZ2V0IiwiV2ViU3RvcmFnZVNoYXJlZENsaWVudFN0YXRlIiwibG9jYWxDbGllbnRJZCIsImFjdGl2ZUNsaWVudHMiLCJzdG9yYWdlTGlzdGVuZXIiLCJoYW5kbGVXZWJTdG9yYWdlRXZlbnQiLCJlYXJseUV2ZW50cyIsImVzY2FwZWRQZXJzaXN0ZW5jZUtleSIsInN0b3JhZ2UiLCJsb2NhbENsaWVudFN0b3JhZ2VLZXkiLCJzZXF1ZW5jZU51bWJlcktleSIsImNyZWF0ZVdlYlN0b3JhZ2VTZXF1ZW5jZU51bWJlcktleSIsImNsaWVudFN0YXRlS2V5UmUiLCJtdXRhdGlvbkJhdGNoS2V5UmUiLCJxdWVyeVRhcmdldEtleVJlIiwib25saW5lU3RhdGVLZXkiLCJjcmVhdGVXZWJTdG9yYWdlT25saW5lU3RhdGVLZXkiLCJleGlzdGluZ0NsaWVudHNfMSIsInN0b3JhZ2VJdGVtIiwib25saW5lU3RhdGVKU09OIiwicGVyc2lzdENsaWVudFN0YXRlIiwiZnJvbVdlYlN0b3JhZ2VPbmxpbmVTdGF0ZSIsImhhbmRsZU9ubGluZVN0YXRlRXZlbnQiLCJwZXJzaXN0TXV0YXRpb25TdGF0ZSIsInJlbW92ZU11dGF0aW9uU3RhdGUiLCJxdWVyeVN0YXRlIiwibG9jYWxDbGllbnRTdGF0ZSIsInBlcnNpc3RRdWVyeVRhcmdldFN0YXRlIiwicGVyc2lzdE9ubGluZVN0YXRlIiwic3RvcmFnZUFyZWEiLCJtdXRhdGlvbk1ldGFkYXRhIiwicXVlcnlUYXJnZXRNZXRhZGF0YSIsImZyb21XZWJTdG9yYWdlQ2xpZW50U3RhdGVLZXkiLCJoYW5kbGVDbGllbnRTdGF0ZUV2ZW50IiwiZnJvbVdlYlN0b3JhZ2VDbGllbnRTdGF0ZSIsImZyb21XZWJTdG9yYWdlTXV0YXRpb25NZXRhZGF0YSIsImhhbmRsZU11dGF0aW9uQmF0Y2hFdmVudCIsImZyb21XZWJTdG9yYWdlUXVlcnlUYXJnZXRNZXRhZGF0YSIsImhhbmRsZVF1ZXJ5VGFyZ2V0RXZlbnQiLCJzZXFTdHJpbmciLCJwYXJzZWQiLCJmcm9tV2ViU3RvcmFnZVNlcXVlbmNlTnVtYmVyIiwibXV0YXRpb25TdGF0ZSIsInRhcmdldEtleSIsInRhcmdldE1ldGFkYXRhIiwiZXhpc3RpbmdUYXJnZXRzIiwibmV3VGFyZ2V0cyIsImFkZGVkVGFyZ2V0cyIsInJlbW92ZWRUYXJnZXRzIiwiTWVtb3J5U2hhcmVkQ2xpZW50U3RhdGUiLCJsb2NhbFN0YXRlIiwiSW5kZXhlZERiUGVyc2lzdGVuY2VTZXR0aW5ncyIsImNhY2hlU2l6ZUJ5dGVzIiwic3luY2hyb25pemVUYWJzIiwiTWVtb3J5UGVyc2lzdGVuY2VTZXR0aW5ncyIsIkZpcmVzdG9yZUNsaWVudCIsInBlcnNpc3RlbmNlU2V0dGluZ3MiLCJ2ZXJpZnlOb3RUZXJtaW5hdGVkIiwiaW5pdGlhbGl6YXRpb25Eb25lIiwicGVyc2lzdGVuY2VSZXN1bHQiLCJpbml0aWFsaXplZCIsInNldENoYW5nZUxpc3RlbmVyIiwiaW5pdGlhbGl6ZVBlcnNpc3RlbmNlIiwibWF5YmVMcnVHYyIsImluaXRpYWxpemVSZXN0Iiwic3RhcnRJbmRleGVkRGJQZXJzaXN0ZW5jZSIsImNhbkZhbGxiYWNrIiwic3RhcnRNZW1vcnlQZXJzaXN0ZW5jZSIsIkRPTUV4Y2VwdGlvbiIsImlzU2h1dHRpbmdEb3duIiwic2V0dGluZ3MiLCJsb2FkQ29ubmVjdGlvbiIsInJlbW90ZVN0b3JlT25saW5lU3RhdGVDaGFuZ2VkSGFuZGxlciIsInNoYXJlZENsaWVudFN0YXRlT25saW5lU3RhdGVDaGFuZ2VkSGFuZGxlciIsImxydVNjaGVkdWxlciIsIm5ld0Nvbm5lY3Rpdml0eU1vbml0b3IiLCJuZXdTZXJpYWxpemVyIiwiZXZlbnRNZ3IiLCJ0ZXJtaW5hdGUiLCJyZW1vdmVDaGFuZ2VMaXN0ZW5lciIsIndhaXRGb3JQZW5kaW5nV3JpdGVzIiwiY2xpZW50VGVybWluYXRlZCIsImdldERvY3VtZW50RnJvbUxvY2FsQ2FjaGUiLCJnZXREb2N1bWVudHNGcm9tTG9jYWxDYWNoZSIsIkFzeW5jT2JzZXJ2ZXIiLCJtdXRlZCIsInNjaGVkdWxlRXZlbnQiLCJtdXRlIiwiZXZlbnRIYW5kbGVyIiwiRmllbGRQYXRoJDEiLCJmaWVsZE5hbWVzIiwibWluTnVtYmVyT2ZFbGVtZW50cyIsInZhbGlkYXRlTmFtZWRBcnJheUF0TGVhc3ROdW1iZXJPZkVsZW1lbnRzIiwiX2ludGVybmFsUGF0aCIsImRvY3VtZW50SWQiLCJfRE9DVU1FTlRfSUQiLCJSRVNFUlZFRCIsIk9BdXRoVG9rZW4iLCJhdXRoSGVhZGVycyIsIkVtcHR5Q3JlZGVudGlhbHNQcm92aWRlciIsImNoYW5nZUxpc3RlbmVyIiwiRmlyZWJhc2VDcmVkZW50aWFsc1Byb3ZpZGVyIiwiYXV0aFByb3ZpZGVyIiwidG9rZW5MaXN0ZW5lciIsInJlY2VpdmVkSW5pdGlhbFVzZXIiLCJ0b2tlbkNvdW50ZXIiLCJmb3JjZVJlZnJlc2giLCJnZXRVc2VyIiwiYWRkQXV0aFRva2VuTGlzdGVuZXIiLCJpbml0aWFsVG9rZW5Db3VudGVyIiwidG9rZW5EYXRhIiwiYWNjZXNzVG9rZW4iLCJyZW1vdmVBdXRoVG9rZW5MaXN0ZW5lciIsImN1cnJlbnRVaWQiLCJnZXRVaWQiLCJGaXJzdFBhcnR5VG9rZW4iLCJnYXBpIiwic2Vzc2lvbkluZGV4IiwiaGVhZGVycyIsImF1dGhIZWFkZXIiLCJnZXRBdXRoSGVhZGVyVmFsdWVGb3JGaXJzdFBhcnR5IiwiRmlyc3RQYXJ0eUNyZWRlbnRpYWxzUHJvdmlkZXIiLCJtYWtlQ3JlZGVudGlhbHNQcm92aWRlciIsImlzUGFydGlhbE9ic2VydmVyIiwiVXNlckRhdGFTb3VyY2UiLCJGaWVsZFZhbHVlSW1wbCIsIl9tZXRob2ROYW1lIiwiRGVsZXRlRmllbGRWYWx1ZUltcGwiLCJzZXJ2ZXJUaW1lc3RhbXAiLCJTZXJ2ZXJUaW1lc3RhbXBGaWVsZFZhbHVlSW1wbCIsImFycmF5VW5pb24iLCJBcnJheVVuaW9uRmllbGRWYWx1ZUltcGwiLCJhcnJheVJlbW92ZSIsIkFycmF5UmVtb3ZlRmllbGRWYWx1ZUltcGwiLCJOdW1lcmljSW5jcmVtZW50RmllbGRWYWx1ZUltcGwiLCJfZWxlbWVudHMiLCJfb3BlcmFuZCIsIlB1YmxpY0ZpZWxkVmFsdWUiLCJSRVNFUlZFRF9GSUVMRF9SRUdFWCIsIlBhcnNlZFNldERhdGEiLCJQYXJzZWRVcGRhdGVEYXRhIiwiaXNXcml0ZSIsImRhdGFTb3VyY2UiLCJNZXJnZVNldCIsIlVwZGF0ZSIsIkFyZ3VtZW50IiwiQXJyYXlBcmd1bWVudCIsIlBhcnNlQ29udGV4dCIsImFycmF5RWxlbWVudCIsInZhbGlkYXRlUGF0aCIsImNoaWxkQ29udGV4dEZvckZpZWxkIiwiY2hpbGRQYXRoIiwidmFsaWRhdGVQYXRoU2VnbWVudCIsImNoaWxkQ29udGV4dEZvckZpZWxkUGF0aCIsImNoaWxkQ29udGV4dEZvckFycmF5IiwiY3JlYXRlRXJyb3IiLCJmaWVsZERlc2NyaXB0aW9uIiwiRG9jdW1lbnRLZXlSZWZlcmVuY2UiLCJVc2VyRGF0YUNvbnZlcnRlciIsInByZUNvbnZlcnRlciIsInBhcnNlU2V0RGF0YSIsInZhbGlkYXRlUGxhaW5PYmplY3QiLCJ1cGRhdGVEYXRhIiwicGFyc2VEYXRhIiwicGFyc2VNZXJnZURhdGEiLCJ2YWxpZGF0ZWRGaWVsZFBhdGhzIiwiZmllbGRQYXRoc18xIiwic3RyaW5nT3JGaWVsZFBhdGgiLCJmaWVsZFBhdGhGcm9tRG90U2VwYXJhdGVkU3RyaW5nIiwicGFyc2VVcGRhdGVEYXRhIiwiZmllbGRNYXNrUGF0aHMiLCJjaGlsZENvbnRleHQiLCJydW5QcmVDb252ZXJ0ZXIiLCJwYXJzZWRWYWx1ZSIsIm1hc2siLCJwYXJzZVVwZGF0ZVZhcmFyZ3MiLCJtb3JlRmllbGRzQW5kVmFsdWVzIiwiZmllbGRQYXRoRnJvbUFyZ3VtZW50IiwidmFsdWVfMSIsInBhcnNlUXVlcnlWYWx1ZSIsImFsbG93QXJyYXlzIiwibG9va3NMaWtlSnNvbk9iamVjdCIsInBhcnNlT2JqZWN0IiwicGFyc2VTZW50aW5lbEZpZWxkVmFsdWUiLCJwYXJzZUFycmF5IiwicGFyc2VTY2FsYXJWYWx1ZSIsImVudHJ5SW5kZXgiLCJhcnJheV8xIiwicGFyc2VkRW50cnkiLCJwYXJzZWRFbGVtZW50cyIsInBhcnNlQXJyYXlUcmFuc2Zvcm1FbGVtZW50cyIsIm51bWVyaWNJbmNyZW1lbnQiLCJzZWFyY2giLCJmcm9tRG90U2VwYXJhdGVkU3RyaW5nIiwiREVGQVVMVF9IT1NUIiwiREVGQVVMVF9TU0wiLCJERUZBVUxUX1RJTUVTVEFNUFNfSU5fU05BUFNIT1RTIiwiREVGQVVMVF9GT1JDRV9MT05HX1BPTExJTkciLCJDQUNIRV9TSVpFX1VOTElNSVRFRCIsIkZpcmVzdG9yZVNldHRpbmdzIiwiZXhwZXJpbWVudGFsRm9yY2VMb25nUG9sbGluZyIsIkZpcmVzdG9yZSIsImRhdGFiYXNlSWRPckFwcCIsIl9maXJlYmFzZUFwcCIsIl9xdWV1ZSIsImVuc3VyZUNsaWVudENvbmZpZ3VyZWQiLCJfZmlyZXN0b3JlQ2xpZW50IiwiX2RhdGFiYXNlSWQiLCJkYXRhYmFzZUlkRnJvbUFwcCIsIl9wZXJzaXN0ZW5jZUtleSIsIl9jcmVkZW50aWFscyIsImV4dGVybmFsXzEiLCJfc2V0dGluZ3MiLCJfZGF0YUNvbnZlcnRlciIsImNyZWF0ZURhdGFDb252ZXJ0ZXIiLCJzZXR0aW5nc0xpdGVyYWwiLCJuZXdTZXR0aW5ncyIsImVuYWJsZVBlcnNpc3RlbmNlIiwiZXhwZXJpbWVudGFsVGFiU3luY2hyb25pemF0aW9uIiwiY29uZmlndXJlQ2xpZW50IiwibWFrZURhdGFiYXNlSW5mbyIsIm9uU25hcHNob3RzSW5TeW5jIiwiYXJnIiwib25TbmFwc2hvdHNJblN5bmNJbnRlcm5hbCIsImFzeW5jT2JzZXJ2ZXIiLCJEb2N1bWVudFJlZmVyZW5jZSIsInRoaXNEYiIsIm90aGVyRGIiLCJmaXJlc3RvcmUiLCJfa2V5IiwicGF0aFN0cmluZyIsIkNvbGxlY3Rpb25SZWZlcmVuY2UiLCJmb3JQYXRoIiwiUXVlcnkkMSIsIlRyYW5zYWN0aW9uJDEiLCJXcml0ZUJhdGNoIiwiX2FyZVRpbWVzdGFtcHNJblNuYXBzaG90c0VuYWJsZWQiLCJfZmlyZXN0b3JlIiwiX3RyYW5zYWN0aW9uIiwiZG9jdW1lbnRSZWYiLCJ2YWxpZGF0ZVJlZmVyZW5jZSIsIkRvY3VtZW50U25hcHNob3QiLCJfY29udmVydGVyIiwidmFsaWRhdGVTZXRPcHRpb25zIiwiYXBwbHlGaXJlc3RvcmVEYXRhQ29udmVydGVyIiwiY29udmVydGVkVmFsdWUiLCJtZXJnZSIsIm1lcmdlRmllbGRzIiwiZmllbGRPclVwZGF0ZURhdGEiLCJfbXV0YXRpb25zIiwiX2NvbW1pdHRlZCIsInZlcmlmeU5vdENvbW1pdHRlZCIsIm9uU25hcHNob3QiLCJjdXJyQXJnIiwiaW50ZXJuYWxPcHRpb25zIiwib25TbmFwc2hvdEludGVybmFsIiwiZXJySGFuZGxlciIsImludGVybmFsTGlzdGVuZXIiLCJ2YWxpZGF0ZUdldE9wdGlvbnMiLCJnZXRWaWFTbmFwc2hvdExpc3RlbmVyIiwid2l0aENvbnZlcnRlciIsIlNuYXBzaG90TWV0YWRhdGEiLCJfZG9jdW1lbnQiLCJfZnJvbUNhY2hlIiwiX2hhc1BlbmRpbmdXcml0ZXMiLCJ2YWxpZGF0ZVNuYXBzaG90T3B0aW9ucyIsIlF1ZXJ5RG9jdW1lbnRTbmFwc2hvdCIsImZyb21GaXJlc3RvcmUiLCJ0b0pTT2JqZWN0IiwidG9KU1ZhbHVlIiwidG9KU0FycmF5IiwiX3F1ZXJ5Iiwib3BTdHIiLCJ3aGVyZUZpbHRlck9wRW51bXMiLCJvcGVyYXRvciIsInZhbGlkYXRlRGlzanVuY3RpdmVGaWx0ZXJFbGVtZW50cyIsInJlZmVyZW5jZUxpc3QiLCJwYXJzZURvY3VtZW50SWRWYWx1ZSIsInZhbGlkYXRlTmV3RmlsdGVyIiwiZGlyZWN0aW9uU3RyIiwidmFsaWRhdGVOZXdPcmRlckJ5IiwibGltaXRUb0xhc3QiLCJkb2NPckZpZWxkIiwiYm91bmRGcm9tRG9jT3JGaWVsZHMiLCJzdGFydEFmdGVyIiwiZW5kQmVmb3JlIiwiYm91bmRGcm9tRG9jdW1lbnQiLCJhbGxGaWVsZHMiLCJib3VuZEZyb21GaWVsZHMiLCJyYXdWYWx1ZSIsIndyYXBwZWQiLCJ2YWxpZGF0ZUhhc0V4cGxpY2l0T3JkZXJCeUZvckxpbWl0VG9MYXN0IiwiUXVlcnlTbmFwc2hvdCIsImZpcmVzdG9yZUNsaWVudCIsImRvY3VtZW50SWRWYWx1ZSIsImFycmF5T3BzIiwiZGlzanVuY3RpdmVPcHMiLCJpc0FycmF5T3AiLCJpc0Rpc2p1bmN0aXZlT3AiLCJleGlzdGluZ0ZpZWxkIiwidmFsaWRhdGVPcmRlckJ5QW5kSW5lcXVhbGl0eU1hdGNoIiwiY29uZmxpY3RpbmdPcCIsImluZXF1YWxpdHkiLCJfb3JpZ2luYWxRdWVyeSIsIl9zbmFwc2hvdCIsIl9jYWNoZWRDaGFuZ2VzIiwiX2NhY2hlZENoYW5nZXNJbmNsdWRlTWV0YWRhdGFDaGFuZ2VzIiwiY29udmVydFRvRG9jdW1lbnRJbXBsIiwibGFzdERvY18xIiwiaW5kZXhfMSIsIm9sZEluZGV4IiwibmV3SW5kZXgiLCJpbmRleFRyYWNrZXJfMSIsInJlc3VsdENoYW5nZVR5cGUiLCJjaGFuZ2VzRnJvbVNuYXBzaG90IiwidGhyb3dEb2NDaGFuZ2VzTWV0aG9kRXJyb3IiLCJfcGF0aCIsImRvY1JlZiIsInRvRmlyZXN0b3JlIiwiUHVibGljRmlyZXN0b3JlIiwiUHVibGljVHJhbnNhY3Rpb24iLCJQdWJsaWNXcml0ZUJhdGNoIiwiUHVibGljRG9jdW1lbnRSZWZlcmVuY2UiLCJQdWJsaWNEb2N1bWVudFNuYXBzaG90IiwiUHVibGljUXVlcnlEb2N1bWVudFNuYXBzaG90IiwiUHVibGljUXVlcnkiLCJQdWJsaWNRdWVyeVNuYXBzaG90IiwiUHVibGljQ29sbGVjdGlvblJlZmVyZW5jZSIsImZpcmVzdG9yZU5hbWVzcGFjZSIsImNvbmZpZ3VyZUZvckZpcmViYXNlIiwic2hhbGxvd0NvcHkiLCJOb29wQ29ubmVjdGl2aXR5TW9uaXRvciIsIkJyb3dzZXJDb25uZWN0aXZpdHlNb25pdG9yIiwibmV0d29ya0F2YWlsYWJsZUxpc3RlbmVyIiwib25OZXR3b3JrQXZhaWxhYmxlIiwibmV0d29ya1VuYXZhaWxhYmxlTGlzdGVuZXIiLCJvbk5ldHdvcmtVbmF2YWlsYWJsZSIsImNvbmZpZ3VyZU5ldHdvcmtNb25pdG9yaW5nIiwiU3RyZWFtQnJpZGdlIiwic2VuZEZuIiwiY2xvc2VGbiIsIndyYXBwZWRPbk9wZW4iLCJ3cmFwcGVkT25DbG9zZSIsIndyYXBwZWRPbk1lc3NhZ2UiLCJjYWxsT25PcGVuIiwiY2FsbE9uQ2xvc2UiLCJjYWxsT25NZXNzYWdlIiwiTE9HX1RBRyRkIiwiUlBDX05BTUVfUkVTVF9NQVBQSU5HIiwiWF9HT09HX0FQSV9DTElFTlRfVkFMVUUiLCJXZWJDaGFubmVsQ29ubmVjdGlvbiIsImJhc2VVcmwiLCJtb2RpZnlIZWFkZXJzRm9yUmVxdWVzdCIsIm1ha2VVcmwiLCJ4aHIiLCJYaHJJbyIsImxpc3Rlbk9uY2UiLCJFdmVudFR5cGUiLCJDT01QTEVURSIsImdldExhc3RFcnJvckNvZGUiLCJFcnJvckNvZGUiLCJOT19FUlJPUiIsImpzb24iLCJnZXRSZXNwb25zZUpzb24iLCJUSU1FT1VUIiwiSFRUUF9FUlJPUiIsImdldFN0YXR1cyIsImdldFJlc3BvbnNlVGV4dCIsInJlc3BvbnNlRXJyb3IiLCJmaXJlc3RvcmVFcnJvckNvZGUiLCJzZXJ2ZXJFcnJvciIsInRvTG93ZXJDYXNlIiwiZ2V0TGFzdEVycm9yIiwianNvbk9iaiIsInJlcXVlc3RTdHJpbmciLCJ1cmxQYXJ0cyIsIndlYmNoYW5uZWxUcmFuc3BvcnQiLCJjcmVhdGVXZWJDaGFubmVsVHJhbnNwb3J0IiwiYmFja2dyb3VuZENoYW5uZWxUZXN0IiwiaHR0cFNlc3Npb25JZFBhcmFtIiwiaW5pdE1lc3NhZ2VIZWFkZXJzIiwibWVzc2FnZVVybFBhcmFtcyIsInNlbmRSYXdKc29uIiwic3VwcG9ydHNDcm9zc0RvbWFpblhociIsImludGVybmFsQ2hhbm5lbFBhcmFtcyIsImZvcndhcmRDaGFubmVsUmVxdWVzdFRpbWVvdXRNcyIsImh0dHBIZWFkZXJzT3ZlcndyaXRlUGFyYW0iLCJjaGFubmVsIiwiY3JlYXRlV2ViQ2hhbm5lbCIsIm9wZW5lZCIsImNsb3NlZCIsInN0cmVhbUJyaWRnZSIsInVuZ3VhcmRlZEV2ZW50TGlzdGVuIiwicGFyYW0iLCJXZWJDaGFubmVsIiwiT1BFTiIsIkNMT1NFIiwiTUVTU0FHRSIsIm1zZ0RhdGEiLCJtc2dEYXRhT3JFcnJvciIsInN0YXR1c18yIiwibWFwQ29kZUZyb21ScGNTdGF0dXMiLCJ1cmxScGNOYW1lIiwiQnJvd3NlclBsYXRmb3JtIiwiZW5jb2RlZCIsInJlZ2lzdGVyRmlyZXN0b3JlIiwiY2FjaGVkU2V0VGltZW91dCIsImNhY2hlZENsZWFyVGltZW91dCIsImRlZmF1bHRTZXRUaW1vdXQiLCJkZWZhdWx0Q2xlYXJUaW1lb3V0IiwicnVuVGltZW91dCIsImZ1biIsImN1cnJlbnRRdWV1ZSIsImRyYWluaW5nIiwicXVldWVJbmRleCIsImNsZWFuVXBOZXh0VGljayIsImRyYWluUXVldWUiLCJ0aW1lb3V0IiwibWFya2VyIiwicnVuQ2xlYXJUaW1lb3V0IiwiSXRlbSIsIm5leHRUaWNrIiwidGl0bGUiLCJicm93c2VyIiwiZW52IiwiYXJndiIsInZlcnNpb25zIiwib24iLCJhZGRMaXN0ZW5lciIsIm9uY2UiLCJvZmYiLCJyZW1vdmVMaXN0ZW5lciIsInJlbW92ZUFsbExpc3RlbmVycyIsImVtaXQiLCJwcmVwZW5kTGlzdGVuZXIiLCJwcmVwZW5kT25jZUxpc3RlbmVyIiwiYmluZGluZyIsImN3ZCIsImNoZGlyIiwidW1hc2siLCJjb21tb25qc0dsb2JhbCIsImdsb2JhbFRoaXMiLCJnb29nIiwiYWEiLCJiYSIsImNhIiwiZGEiLCJlYSIsImZhIiwidW5zaGlmdCIsInciLCJ4IiwiTiIsInhiIiwiaCIsImxhIiwiRyIsImphIiwib2EiLCJwYSIsInFhIiwiQSIsInJhIiwidHJpbSIsInoiLCJzYSIsInRhIiwidXNlckFnZW50IiwidmEiLCJ3YSIsInhhIiwieWEiLCJ6YSIsIklhIiwiQ2EiLCJCIiwiRGEiLCJFYSIsIkZhIiwiR2EiLCJIYSIsImRvY3VtZW50TW9kZSIsIkphIiwiS2EiLCJMYSIsInBhcnNlRmxvYXQiLCJOYSIsIkJhIiwiTWEiLCJBYSIsInBhcnNlSW50IiwiT2EiLCJjb21wYXRNb2RlIiwiUGEiLCJRYSIsIlJhIiwiQyIsIkQiLCJyZWxhdGVkVGFyZ2V0IiwiYnV0dG9uIiwic2NyZWVuWSIsInNjcmVlblgiLCJjbGllbnRZIiwiY2xpZW50WCIsIm1ldGFLZXkiLCJzaGlmdEtleSIsImFsdEtleSIsImN0cmxLZXkiLCJwb2ludGVySWQiLCJwb2ludGVyVHlwZSIsImNoYW5nZWRUb3VjaGVzIiwic3JjRWxlbWVudCIsIm5vZGVOYW1lIiwiZnJvbUVsZW1lbnQiLCJ0b0VsZW1lbnQiLCJwYWdlWCIsInBhZ2VZIiwiU2EiLCJkZWZhdWx0UHJldmVudGVkIiwiMiIsIjMiLCI0IiwicHJldmVudERlZmF1bHQiLCJyZXR1cm5WYWx1ZSIsImtleUNvZGUiLCJGIiwiVGEiLCJVYSIsInNyYyIsImNhcHR1cmUiLCJYIiwiWiIsIlZhIiwiV2EiLCJZYSIsIlhhIiwiWmEiLCIkYSIsImJiIiwiZWIiLCJmYiIsImliIiwiZ2IiLCJhdHRhY2hFdmVudCIsImhiIiwia2IiLCJkZXRhY2hFdmVudCIsImxiIiwibWIiLCJoYW5kbGVFdmVudCIsIkoiLCJuYiIsIkUiLCJqYiIsImRpc3BhdGNoRXZlbnQiLCJvYiIsInBiIiwicWIiLCJzYiIsInJiIiwidGIiLCJ1YiIsInZiIiwid2IiLCJBYiIsInliIiwiemIiLCJDYiIsIkRiIiwiTCIsIkViIiwiRmIiLCJHYiIsIlUiLCJIIiwiSGIiLCJJYiIsIkpiIiwiS2IiLCJJIiwiTGIiLCJNYiIsIksiLCJOYiIsIk9iIiwiUGIiLCJRYiIsIlJiIiwiU2IiLCJUYiIsIldiIiwiVWIiLCJWYiIsIlhiIiwiTSIsIlYiLCJPIiwiWWIiLCJSIiwiUyIsIlpiIiwiJGIiLCJhYyIsImJjIiwiY2MiLCJkYyIsImVjIiwiZmMiLCIkIiwiWSIsImtjIiwibGMiLCJpYyIsImpjIiwibWMiLCJhYiIsImdjIiwibmEiLCJvYyIsIm5jIiwiUSIsInJjIiwicGMiLCJUIiwiaGMiLCJzYyIsInVjIiwidmMiLCJ3YyIsInhjIiwieWMiLCJ6YyIsIkFjIiwiTWMiLCJJYyIsIkdjIiwiQmMiLCJIYyIsImFicyIsImRlY29kZVVSSSIsImRlY29kZVVSSUNvbXBvbmVudCIsImVuY29kZVVSSSIsIkxjIiwiQ2MiLCJEYyIsIkVjIiwiRmMiLCJsYXN0SW5kZXhPZiIsInRjIiwiTmMiLCJTYyIsIlVjIiwiVmMiLCJXYyIsIlhjIiwiWWMiLCJaYyIsIiRjIiwiYWQiLCJiZCIsIlBlcmZvcm1hbmNlTmF2aWdhdGlvblRpbWluZyIsInBlcmZvcm1hbmNlIiwiZ2V0RW50cmllc0J5VHlwZSIsIm5leHRIb3BQcm90b2NvbCIsImthIiwibWEiLCJjZCIsImRkIiwiZWQiLCJmZCIsImdkIiwiaGQiLCJqZCIsImtkIiwibGQiLCJuZCIsIm9ubG9hZCIsIm9udGltZW91dCIsInFjIiwib2QiLCJwZCIsInFkIiwicmQiLCJzZCIsInZkIiwid2QiLCJ4ZCIsImxvY2F0aW9uIiwicHJvdG9jb2wiLCJzdGF0dXNUZXh0IiwidGQiLCJvbnJlYWR5c3RhdGVjaGFuZ2UiLCJyZWFkeVN0YXRlIiwiZ2V0UmVzcG9uc2VIZWFkZXIiLCJ6ZCIsInlkIiwiQWQiLCJnYSIsImhhIiwiaWEiLCJjb25jdXJyZW50UmVxdWVzdExpbWl0IiwiZmFzdEhhbmRzaGFrZSIsIkJkIiwiQ2QiLCJEZCIsInNlbmRCZWFjb24iLCJJbWFnZSIsIkVkIiwiRmQiLCJHZCIsIkhkIiwiTGQiLCJLZCIsInJvdW5kIiwiQmIiLCJUYyIsIlVkIiwiTWQiLCJOZCIsIkpkIiwibWQiLCJKYyIsImhvc3RuYW1lIiwiS2MiLCJwb3J0IiwiT2QiLCJRZCIsInRlc3RVcmwiLCJQZCIsIm1lc3NhZ2VIZWFkZXJzIiwiY2xpZW50UHJvdG9jb2xIZWFkZXJSZXF1aXJlZCIsIm1lc3NhZ2VDb250ZW50VHlwZSIsIlJkIiwiX19zbV9fIiwiU2QiLCJ0b1VwcGVyQ2FzZSIsIlhNTEh0dHBSZXF1ZXN0IiwiRm9ybURhdGEiLCJzZXRSZXF1ZXN0SGVhZGVyIiwicmVzcG9uc2VUeXBlIiwid2l0aENyZWRlbnRpYWxzIiwidWQiLCJyZXNwb25zZVRleHQiLCJfX2RhdGFfXyIsIklkIiwiVGQiLCJ0bXAiLCJ0bXBfMSIsInRtcF8yIiwidG1wXzMiLCJ0bXBfNCIsInRtcF81IiwiT3J0aG9MaW5lTGluZVJlbGF0aW9uc2hpcFR5cGUiLCJSZWN0UmVjdFJlbGF0aW9uc2hpcFR5cGUiLCJQYW5lbFBvc2l0aW9uIiwib3J0aG9MaW5lTGluZVJlbGF0aW9uc2hpcFR5cGUiLCJpbnRlcnNlY3Rpb24iLCJvdmVybGFwIiwicHRzRGlzdGFuY2UiLCJwdDEiLCJwdDIiLCJzcXJ0IiwibGluZU1pZGRsZVB0IiwibGluZSIsImFyZUxpbmVzRXF1YWwiLCJsaW5lMSIsImxpbmUyIiwiYXJlUG9pbnRzRXF1YWwiLCJwb2ludDEiLCJwb2ludDIiLCJyZWFkSW5wdXRGaWxlIiwiZmlsZSIsInJlaiIsInJlYWRlciIsIkZpbGVSZWFkZXIiLCJyZWFkQXNUZXh0IiwiZ2V0VXJsUGFyYW1zIiwicGFyc2VyIiwiaHJlZiIsInZhcnMiLCJwYWlyIiwiZW1wdHlOb2RlIiwiY3JlYXRlQkJveCIsImZpbGxldCIsInJlY3QiLCJjcmVhdGVFbGVtZW50TlMiLCJnZXRCQm94Iiwid2lkdGgiLCJoZWlnaHQiLCJjcmVhdGVCQm94MiIsImdldFJlbGF0aXZlQ29vcmRzIiwic3ZnRG9jIiwib3JpZ2luUHQiLCJjcmVhdGVTVkdQb2ludCIsIm1hdHJpeFRyYW5zZm9ybSIsImdldFNjcmVlbkNUTSIsImludmVyc2UiLCJ1dWlkdjQiLCJjcnlwdG8iLCJnZXRSYW5kb21WYWx1ZXMiLCJnZXRSZWN0U2VnbWVudHMiLCJjb3JuZXJBIiwiY29ybmVyQiIsImNvcm5lckMiLCJjb3JuZXJEIiwiaXNQdEluUmVjdCIsInB0IiwiaW5jbHVzaXZlIiwiaXNMaW5lSW5SZWN0IiwiaXNOdW1CZXR3ZWVuIiwibGltaXQxIiwibGltaXQyIiwiaXNMaW5lSG9yaXpvbnRhbCIsImlzTGluZVZlcnRpY2FsIiwic29ydFB0c0J5RGlzdGFuY2UiLCJwdHMiLCJyZWZQdCIsImluY2x1ZGVSZWZQdCIsInJlZmVyZW5jZVB0Iiwic29ydGVkUHRzIiwiR2VvbWV0cnlDYWxjIiwibGluZXNCZXR3ZWVuUHRzIiwicmVjdFJlY3RSZWxhdGlvbnNoaXAiLCJyZWN0MSIsInJlY3QyIiwiTWF0Y2giLCJBSW5zaWRlQiIsIkJJbnNpZGVBIiwiSW50ZXJzZWN0IiwiVGFuZ2VudCIsIkRpc2pvaW50IiwiZ2V0T3J0aG9MaW5lTGluZVJlbGF0aW9uc2hpcCIsIk9ydGhvTGluZUxpbmVSZWxhdGlvbnNoaXAiLCJOb3RoaW5nIiwic3RhcnRQb2ludFgiLCJlbmRQb2ludFgiLCJPdmVybGFwIiwic3RhcnRQb2ludFkiLCJlbmRQb2ludFkiLCJyZWN0YW5nbGVzU2lsaG91ZXR0ZSIsInJlY3RzIiwicmVjdHNTZWdtZW50cyIsImZpbmFsU2VnbWVudHMiLCJvdmVybGFwcGVkU2VnbWVudHMiLCJjdXJyZW50UmVjdFNlZ21lbnRzIiwibmV3Q3VycmVudFJlY3RTZWdtZW50cyIsInJlY3RzUmVsYXRpb24iLCJzZWdtZW50SW50ZXJzZWN0aW9ucyIsImxpbmVzUmVsYXRpb25zaGlwIiwic29ydGVkSW50ZXJzZWN0aW9ucyIsInNwbGl0ZWRTZWdtZW50cyIsInN2Z1BhdGhGcm9tTGluZXMiLCJwYXRoQ29udGVudCIsInRvRml4ZWQiLCJTVkdXSURUSCIsIlpPT01TUEVFRCIsImFsbG93UGFubmluZyIsInpvb20iLCJzZXRDb250ZW50IiwiZG9tcGFyc2VyIiwiRE9NUGFyc2VyIiwic3ZnQ2FudmFzIiwicGFyc2VGcm9tU3RyaW5nIiwiZG9jdW1lbnRFbGVtZW50IiwiYnV0dG9ucyIsInN2Z0luaXRpYWxDbGljayIsInByZXZWaWV3Qm94Iiwidmlld0JveCIsImJhc2VWYWwiLCJtb3VzZVBvc2l0aW9uIiwiY3JlYXRlQ29tbWVudHNHcm91cCIsImNvbW1lbnRzR3JvdXAiLCJ6b29tRmFjdG9yIiwiZGVsdGFZIiwieFByb3AiLCJ4SW5jIiwieVByb3AiLCJ5SW5jIiwibWV0YWRhdGFGaWVsZHMiLCJxdWVyeUl0ZW1zIiwicGFyZW50SWQiLCJ0cmFzaGVkIiwiZXhjbHVkZU5hbWUiLCJvbmx5Rm9sZGVyIiwiZHJpdmUiLCJmaWxlcyIsImZpbGVJZCIsImFsdCIsImZpbGVDb250ZW50IiwiZmlsZU1pbWVUeXBlIiwiZmlsZU5hbWUiLCJmb2xkZXJJZCIsImFjY2Vzc190b2tlbiIsImZvcm0iLCJhcHBlbmQiLCJmZXRjaCIsIkhlYWRlcnMiLCJvayIsIm5ld1RpdGxlIiwiZXhlY3V0ZSIsInJlc3AiLCJlbWFpbEFkZHJlc3MiLCJwZXJtaXNzaW9uSWQiLCJhYm91dCIsInNoYXJlciIsInJlY2lwaWVudHMiLCJwcm9qZWN0TmFtZSIsImVtYWlscyIsImF1dGhvciIsInBob3RvTGluayIsInRleHQiLCJBcHBEYXRhIiwibGFzdFVwbG9hZGVkUHJvamVjdCIsImVycm9yTXNnIiwiZmlsZUNvbnRlbnRSYXciLCJwcm9qZWN0SW5mbyIsImFwcE1haW5Gb2xkZXJJZCIsImFwcE1haW5Gb2xkZXJEYXRhIiwibGlzdEZpbGVzIiwiYXBwTWFpbkZvbGRlclJlcyIsImNyZWF0ZUZvbGRlciIsInByb2plY3RGb2xkZXJJZCIsInByb2plY3RzRGF0YSIsInByb2oiLCJmb2xkZXJDcmVhdGlvblByb21pc2UiLCJwcm9qZWN0Rm9sZGVyRGF0YSIsImRyYXdpbmdzIiwiZHJhd2luZ3NGb2xkZXJQcm9taXNlIiwiZHJhd2luZ3NGb2xkZXJJZCIsImRyYXdpbmdzUHJvbWlzZXMiLCJkcmF3aW5nIiwiZHJhd2luZ1Byb21pc2UiLCJ1cGxvYWRGaWxlIiwiZHJhd2luZ09iaiIsImRlY29kZXIiLCJUZXh0RGVjb2RlciIsInJlc3BvbnNlcyIsImdldFJlYWRlciIsInJlYWQiLCJlbGVtZW50c0RhdGEiLCJlbGVtZW50c0RhdGFGb2xkZXJQcm9taXNlIiwiZWxlbWVudHNEYXRhRm9sZGVySWQiLCJlbGVtZW50c0RhdGFQcm9taXNlcyIsImVsZW1lbnREYXRhIiwiZWxlbWVudERhdGFQcm9taXNlIiwicHJvamVjdHNGb2xkZXJzUmVzIiwibmV3UHJvamVjdHMiLCJwcm9qZWN0c0ZvbGRlcnNEYXRhIiwibmV3UHJvaiIsImFwcFNldHRGb2xkZXJEYXRhIiwiYXBwU2V0dGluZ3NGb2xkZXJJZCIsInRodW1ic0ZvbGRlckRhdGEiLCJ0aHVtYnNGb2xkZXJJZCIsImltZ0RhdGEiLCJwcm9qZWN0VGh1bWJEYXRhIiwiaW1nIiwidGh1bWJJZCIsInByb2plY3RJbmRleCIsInByb2plY3ROYW1lUmVzIiwiZ2V0RmlsZURhdGEiLCJmaW5kSW5kZXgiLCJwZXJtaXNzaW9ucyIsInByb2pQZXJtaXNzaW9uc0RhdGEiLCJnZXRQcm9qZWN0VGVhbURhdGEiLCJwcm9qU2V0dGluZ3MiLCJwcm9qU2V0dGluZ3NEYXRhIiwicHJvalNldHRpbmdzQ29udGVudFJlcyIsImdldEZpbGVDb250ZW50IiwiZHJhd2luZ3NGb2xkZXJEYXRhIiwiZHJhd2luZ3NSZXMiLCJkcmF3aW5nc1N0eWxlc0lkIiwiZWxlbWVudHNEYXRhRm9sZGVyRGF0YSIsImVsZW1lbnRzRGF0YVJlcyIsImNvbW1lbnRzIiwiY29tbWVudHNEYXRhIiwiY29tbWVudHNGaWxlSWQiLCJjb21tZW50c0NvbnRlbnRSZXMiLCJpbWFnZXMiLCJpbWFnZXNGb2xkZXJEYXRhIiwiaW1hZ2VzUmVzIiwiZWxlbWVudHNJZHMiLCJtZW50aW9ucyIsInJlcHJlc2VudGF0aW9ucyIsImNyZWF0ZVJlcHJlc2VudGF0aW9uIiwicmVjdGFuZ2xlcyIsInJlcHJlc2VudGF0aW9uIiwiZGF0YXNldCIsInBhbmVsc1N0b3JhZ2UiLCJXb3Jrc3BhY2UiLCJzZWN0aW9ucyIsInBhbmVsV2lkdGgiLCJwYW5lbEhlaWdodCIsInJlc2l6aW5nV2lkdGgiLCJyZXNpemluZ0hlaWdodCIsInBhbmVsQ29udGFpbmVyIiwiY2xhc3NMaXN0IiwicGFuZWxHcmlwIiwicGFuZWxDb250ZW50IiwicGFuZWxIZWFkZXIiLCJwYW5lbEJvZHkiLCJwYW5lbEZvb3RlciIsIndvcmtzcGFjZUNvbnRhaW5lciIsInJlc2l6ZVdpZHRoIiwicmVzaXplSGVpZ2h0Iiwic2V0QWN0aXZlIiwib25jbGljayIsImNsb3Nlc3QiLCJpbm5lclRleHQiLCJtZWRpdW1CcmVha3BvaW50IiwibWF0Y2hNZWRpYSIsInBhbmVsUG9zaXRvbiIsInNldFByb3BlcnR5Iiwib25tb3VzZWRvd24iLCJwYW5lbFNpZGUiLCJSaWdodCIsInN0YXJ0WCIsInN0YXJ0V2lkdGgiLCJCb3R0b20iLCJzdGFydFkiLCJzdGFydEhlaWdodCIsIm1vdXNlRXZlbnQiLCJkb2NrVG8iLCJzaWRlIiwiYWN0aXZlU2VjdGlvbiIsInNldEluYWN0aXZlIiwic2VjdGlvbiIsImFkZFNlY3Rpb24iLCJhY3RpdmF0ZSIsImJ0biIsImFkZFNlY3Rpb25zIiwic2VjdGlvbnNBcnJheSIsInJlbW92ZVNlY3Rpb24iLCJzZWN0aW9uSW5kZXgiLCJicmVha3BvaW50Iiwia2lsbCIsImZvcm1FbGVtZW50Iiwid29ya3NwYWNlIiwib25zdWJtaXQiLCJjYW5jZWxDcmVhdGVCdG4iLCJnZXRFbGVtZW50QnlJZCIsImFkZENvbW1lbnRCdG4iLCJkZWxldGVCdG4iLCJkZWxldGVDb21tZW50IiwiY29tbWVudElkIiwiZWRpdEJ0biIsImVuYWJsZUVkaXRDb21tZW50IiwiY2FuY2VsVXBkYXRlQnRuIiwiZGlzY2FyZFVwZGF0ZSIsImNvbmZpcm1VcGRhdGVCdG4iLCJ0ZXh0SW5wdXQiLCJuYW1lZEl0ZW0iLCJtZW50aW9uc1NlY3Rpb24iLCJtZW50aW9uc0lucHV0IiwiYnV0dG9uc01vZGVzIiwic2hvd01lbnRpb25zU2VjdGlvbiIsImhpZGVNZW50aW9uc1NlY3Rpb24iLCJidXR0b25zVmlzaWJpbGl0eU1vZGUiLCJjaGlsZHJlbiIsImRpc3BsYXkiLCJ1bnNhdmVkQ29tbWVudHNEYXRhIiwibWFpblBhbmVsIiwiZGlzYWJsZUZvcm0iLCJkaXNhYmxlZCIsImVuYWJsZUZvcm0iLCJ2aWV3Q29tbWVudCIsImNvbW1lbnQiLCJmaWxsSW5wdXRzIiwib25jaGFuZ2UiLCJ1cGRhdGVDb21tZW50IiwiZ2V0U2VsZWN0ZWRNZW1iZXJzIiwic2VsZWN0ZWRPcHRpb25zIiwibWVudGlvbkVtYWlsIiwicGVybWlzc2lvbiIsImRpc3BsYXlOYW1lIiwiaW5uZXJIVE1MIiwicHJvamVjdERhdGEiLCJBcHAiLCJhcHBlbmRlZERyYXdpbmdzSWRzIiwiZWxlbWVudHNDb21tZW50cyIsInByb2plY3RzTGlzdEJ0biIsImRyYXdpbmdzQnRucyIsInNhdmVCdG4iLCJjcmVhdGVEcmF3aW5nc0J0bnMiLCJ0b29sYmFyc0NvbnRhaW5lciIsInByb3BzVGFibGVzQ29udGFpbmVyIiwicGFyYW1zVGFibGVzQ29udGFpbmVyIiwiY29tbWVudERhdGEiLCJjb21tZW50T2JqIiwiY29tbWVudHNDaGFuZ2VkIiwiTWFpblBhbmVsIiwiY29tbWVudEZvcm0iLCJkcmF3aW5nc0NvbnRhaW5lciIsIndvcmtzcGFjZXNDb250YWluZXIiLCJtYW5hZ2VUb29scyIsIlRvb2wiLCJhY3RpdmVEcmF3aW5nIiwiYWN0aXZlVG9vbCIsImN1cnJlbnRUYXJnZXQiLCJjb21tZW50c0NoYW5nZXNVbnNhdmVkIiwic2V0RHJhd2luZyIsImN1cnJlbnRTZWxlY3Rpb24iLCJyZW1vdmVEcmF3aW5nU2VsZWN0aW9uQXBwZWFyYW5jZSIsInZpc2liaWxpdHkiLCJpbmNsdWRlcyIsImdyb3VwQ3JlYXRlZCIsImVsZW1zRm9yQ29tbWVudFJlcHJlc2VudGF0aW9uIiwiYWRkRHJhd2luZ1NlbGVjdGlvbkFwcGVhcmFuY2UiLCJkcmF3aW5nc0l0ZW1zIiwiZHJhd2luZ3NTdHlsZXNUYWciLCJ0b29sQnRuIiwibXVsdGlwbGVTZWxlY3Rpb24iLCJtYW5hZ2VTZWxlY3Rpb24iLCJzZWxlY3Rpb24iLCJzZWxlY3QiLCJkZXNlbGVjdCIsImNsZWFyQWxsU2VsZWN0aW9uIiwiYWRkU2VsZWN0aW9uQXBwZWFyYW5jZSIsImVsZW1lbnRJZCIsImVsIiwiY2xlYXJTZWxlY3Rpb25BcHBlYXJhbmNlIiwiZ2V0RHJhd2luZ1NlbGVjdGVkRWxlbWVudHNSZWZzIiwic2VsZWN0ZWRFbGVtZW50cyIsIkVsZW1lbnRTZWxlY3Rpb24iLCJzdXBlciIsImJvdW5kaW5nQm94Iiwid2FpdGluZ0ZvckNvbW1lbnQiLCJjYW5jZWxDb21tZW50IiwibWVtYmVyc0VtYWlscyIsImN1cnJlbnRVc2VyRW1haWwiLCJnZXRDdXJyZW50VXNlciIsIm1lbWJlciIsImFkZENvbW1lbnQiLCJoYXNVc2VkUGFuZWwiLCJzZWxlY3RlZEVtYWlscyIsImN1cnJlbnRVc2VyTmFtZSIsImN1cnJlbnRVc2VyUGhvdG8iLCJwZW5kaW5nTm90aWZpY2F0aW9uc1RvU2VuZCIsInVzZXJOYW1lIiwidXNlclBob3RvIiwidGV4dENvbnRlbnQiLCJzZWxFbGVtZW50c1JlZiIsInNob3dFbGVtZW50RGF0YSIsImNhdGVnb3J5IiwiY3VycmVudEVsZW1lbnREYXRhIiwiY2F0ZWdvcnlEYXRhIiwiY3JlYXRlRGF0YVRhYmxlIiwicGFyYW1ldGVycyIsImRhdGFFbnRyaWVzIiwiY2F0ZWdvcmllc1RpdGxlcyIsImRhdGFCeUNhdGVnb3JpZXMiLCJjYXRlZ29yeUluZGV4IiwidGFibGVSb3ciLCJkYXRhVGFibGUiLCJzaGFyZVByb2plY3RDb250YWluZXIiLCJwZW5kaW5nVG9SZW1vdmUiLCJwZW5kaW5nVG9BZGQiLCJodG1sQ29udGFpbmVyIiwic2hhcmVGb3JtIiwic2hhcmVGb3JtRXJyb3JNc2ciLCJjb25maXJtQ2hhbmdlc0J0bnMiLCJzYXZlQ2hhbmdlc0J0biIsImNhbmNlbENoYW5nZXNCdG4iLCJ3YWl0aW5nQW5pbWF0aW9uIiwiY3VycmVudFVzZXJzQ29udGVudCIsImN1cnJlbnRVc2Vyc1RhYmxlIiwicGVuZGluZ1VzZXJzQ29udGVudCIsInBlbmRpbmdVc2Vyc1RvQWRkVGFibGUiLCJzaGFyZU5vdGlmaWNhdGlvbkNvbnRhaW5lciIsInNoYXJlTm90aWZpY2F0aW9uSW5wdXQiLCJwcm9qZWN0c0xpc3QiLCJhY3Rpb25CdG4iLCJzdGFnZU1lbWJlclRvUmVtb3ZlIiwicGFyZW50RWxlbWVudCIsInVuc3RhZ2VNZW1iZXJUb1JlbW92ZSIsInVuc3RhZ2VNZW1iZXJUb0FkZCIsInNhdmVDaGFuZ2VzIiwic3RhZ2VNZW1iZXJUb0FkZCIsInNldFVwRGlhbG9nIiwicHJvamVjdEl0ZW0iLCJzaGFyZWQiLCJyb2xlIiwiaW5zZXJ0QWRqYWNlbnRIVE1MIiwiY2hlY2tlZCIsImNsb3NlTW9kYWxEaWFsb2ciLCJpdGVtSW5kZXgiLCJlbWFpbCIsImFkZFN0YWdlZE1lbWJlcnMiLCJhZGRNZW1iZXJzUHJvbWlzZXMiLCJzaGFyZUZpbGUiLCJyZW1vdmVTdGFnZWRNZW1iZXJzIiwicmVtb3ZlTWVtYmVyc1Byb21pc2VzIiwic3RvcFNoYXJpbmdGaWxlIiwiYWRkaXRpb25TdWNjZXNzIiwicmVtb3ZhbFN1Y2Nlc3MiLCJyZXNBcnIiLCJzZW5kU2hhcmluZ1Byb2plY3RFbWFpbCIsInNhdmVNZXNzYWdpbmdEZXZpY2VUb2tlbiIsInNob3dNZXNzYWdlIiwibm90aWZpY2F0aW9ucyIsIm5vdGlmaWNhdGlvbnNCdG4iLCJub3RpZmljYXRpb25zQ29udGFpbmVyIiwibm90aWZpY2F0aW9uc0xpc3QiLCJ0b2dnbGUiLCJ2aWV3Tm90aWZpY2F0aW9uIiwiY3JlYXRlTm90aWZpY2FjdGlvbiIsIm5vdGlmaWNhdGlvbkVsZW1lbnQiLCJub3RpZmljYXRpb25JZCIsInByZXBlbmQiLCJkZWxldGVOb3RpZmljYWN0aW9uIiwibm90aWZpY2F0aW9uIiwicmVuYW1lUHJvamVjdENvbnRhaW5lciIsImVtcHR5SW5wdXRWYWx1ZSIsInJlbmFtZUZvcm0iLCJyZW5hbWVQcm9qZWN0RXJyb3JNc2ciLCJjYW5jZWxCdG4iLCJyZW5hbWVQcm9qZWN0Iiwic2V0SW5wdXRWYWx1ZSIsInByb2plY3RMaXN0SXRlbSIsInByb2pJZCIsImN1cnJlbnROYW1lIiwicmVuYW1lRmlsZSIsInByb2plY3RSZW5hbWVkUmVzIiwidmlzaWJsZSIsIkhUTUxDb250YWluZXIiLCJtZW51TGlzdENvbnRhaW5lciIsInRvZ2dsZU1lbnUiLCJ0YXJnZXRFbGVtZW50IiwiY2xlYXJNZW51IiwiZ2VuZXJhdGVNZW51IiwiY29udGV4dE1lbnVEYXRhIiwic2V0UG9zaXRpb24iLCJjb21tYW5kIiwidG9wIiwiaXRlbXNDb250YWluZXIiLCJEb2N1bWVudEZyYWdtZW50IiwicHJvakl0ZW1Db250ZW50IiwiY3htZW51Iiwic2hvd1ZpZXdwb3J0RGlhbG9nIiwiZnVuY3Rpb24iLCJkZWxldGVGaWxlIiwicHJvakluZGV4IiwiaGlkZVZpZXdwb3J0TWVzc2FnZSIsInNoYXJlUHJvamVjdERpYWxvZyIsInNob3dNb2RhbERpYWxvZyIsIm1vZGFsRGlhbG9nQ29udGFpbmVyIiwicmVuYW1lUHJvamVjdERpYWxvZyIsInVzZXJJbmZvQ29udGFpbmVyIiwibW9kYWxEaWFsb2dDb250ZW50IiwibW9kYWxEaWFsb2dzU3RvcmFnZSIsImNsb3NlTW9kYWxCdG4iLCJ2aWV3cG9ydE1lc3NhZ2UiLCJwcm9qZWN0c0xpc3RDb250YWluZXIiLCJjbG9zZVByb2plY3RzTGlzdEJ0biIsInNhdmVDb21tZW50c0RhdGEiLCJjbG9zZVByb2plY3RzTGlzdCIsIm9wZW5Qcm9qZWN0c0xpc3QiLCJnb1RvUHJvamVjdCIsInVwbG9hZEZpbGVGb3JtIiwiZmlsZUlucHV0Iiwic3VibWl0RmlsZUJ0biIsIm5leHRFbGVtZW50U2libGluZyIsImNyZWF0ZVByb2plY3QiLCJ1cGRhdGVQcm9qZWN0c0xpc3QiLCJtZXNzYWdlQ29udGFpbmVyIiwiY2xvc2VNZXNzYWdlIiwib25yZXNpemUiLCJhZGp1c3RJdGVtcyIsImN1cnJlbnRXb3Jrc3BhY2UiLCJub3RpZmljYXRpb25zTWFuYWdlciIsImNvbnRleHRNZW51Iiwic2V0VXNlckluZm8iLCJnZXRVc2VySW5mbyIsInVzZXJJbmZvUmVzIiwidXNlckluZm8iLCJzYXZpbmdTdWNjZXNzZnVsIiwianNvbkRhdGFUb1NhdmUiLCJjb21tZW50c0ZpbGVDcmVhdGlvblJlcyIsInVwZGF0ZUZpbGVDb250ZW50IiwiY29tbWVudHNGaWxlVXBkYXRlUmVzIiwibm90aWZpY2F0aW9uUHJvbWlzZSIsInNlbmROb3RpZmljYXRpb24iLCJvcGVuUHJvamVjdCIsInByZXZpb3VzQWN0aXZlSXRlbSIsImZldGNoUHJvamVjdCIsInByb2plY3QiLCJoaXN0b3J5IiwicmVwbGFjZVN0YXRlIiwicHJvamVjdFRpdGxlIiwibGlzdFByb2plY3RJdGVtcyIsImNyZWF0ZUhUTUxQcm9qZWN0c0xpc3QiLCJwcm9qRGF0YSIsIml0ZW1zSCIsImdldENvbXB1dGVkU3R5bGUiLCJnZXRQcm9wZXJ0eVZhbHVlIiwiaXRlbXNUb3RhbCIsImNlaWwiLCJ0aW1lciIsIm1lc3NhZ2VUaW1lcklkIiwiYWN0aW9ucyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJpbm5lckNvbnRhaW5lciIsImJhY2tncm91bmQiLCJjbG9zYWJsZSIsImZpcnN0RWxlbWVudENoaWxkIiwicGFnZSIsInRoZXJlSXNNZXNzYWdpbmciLCJQRU5ESU5HX1RJTUVPVVRfTVMiLCJQQUNLQUdFX1ZFUlNJT04iLCJJTlRFUk5BTF9BVVRIX1ZFUlNJT04iLCJJTlNUQUxMQVRJT05TX0FQSV9VUkwiLCJUT0tFTl9FWFBJUkFUSU9OX0JVRkZFUiIsIkVSUk9SX0RFU0NSSVBUSU9OX01BUCIsImlzU2VydmVyRXJyb3IiLCJnZXRJbnN0YWxsYXRpb25zRW5kcG9pbnQiLCJleHRyYWN0QXV0aFRva2VuSW5mb0Zyb21SZXNwb25zZSIsInJlcXVlc3RTdGF0dXMiLCJleHBpcmVzSW4iLCJyZXNwb25zZUV4cGlyZXNJbiIsImNyZWF0aW9uVGltZSIsImdldEVycm9yRnJvbVJlc3BvbnNlIiwicmVxdWVzdE5hbWUiLCJyZXNwb25zZUpzb24iLCJlcnJvckRhdGEiLCJzZXJ2ZXJDb2RlIiwic2VydmVyTWVzc2FnZSIsInNlcnZlclN0YXR1cyIsImdldEhlYWRlcnMiLCJhcGlLZXkiLCJBY2NlcHQiLCJnZXRIZWFkZXJzV2l0aEF1dGgiLCJhcHBDb25maWciLCJyZWZyZXNoVG9rZW4iLCJnZXRBdXRob3JpemF0aW9uSGVhZGVyIiwicmV0cnlJZlNlcnZlckVycm9yIiwiY3JlYXRlSW5zdGFsbGF0aW9uUmVxdWVzdCIsImZpZCIsImVuZHBvaW50IiwicmVzcG9uc2VWYWx1ZSIsImF1dGhWZXJzaW9uIiwiYXBwSWQiLCJyZWdpc3RyYXRpb25TdGF0dXMiLCJhdXRoVG9rZW4iLCJzbGVlcCIsIm1zIiwiVkFMSURfRklEX1BBVFRFUk4iLCJJTlZBTElEX0ZJRCIsImdlbmVyYXRlRmlkIiwiZmlkQnl0ZUFycmF5IiwibXNDcnlwdG8iLCJEQVRBQkFTRV9OQU1FIiwiREFUQUJBU0VfVkVSU0lPTiIsIk9CSkVDVF9TVE9SRV9OQU1FIiwiZGJQcm9taXNlIiwiZ2V0RGJQcm9taXNlIiwidXBncmFkZURCIiwidHgiLCJnZXRLZXkiLCJ1cGRhdGVGbiIsIm9sZFZhbHVlIiwiZ2V0SW5zdGFsbGF0aW9uRW50cnkiLCJyZWdpc3RyYXRpb25Qcm9taXNlIiwiaW5zdGFsbGF0aW9uRW50cnkiLCJvbGRFbnRyeSIsImNsZWFyVGltZWRPdXRSZXF1ZXN0IiwidXBkYXRlT3JDcmVhdGVJbnN0YWxsYXRpb25FbnRyeSIsImVudHJ5V2l0aFByb21pc2UiLCJvbkxpbmUiLCJyZWdpc3RyYXRpb25Qcm9taXNlV2l0aEVycm9yIiwiaW5Qcm9ncmVzc0VudHJ5IiwicmVnaXN0cmF0aW9uVGltZSIsInJlZ2lzdGVyZWRJbnN0YWxsYXRpb25FbnRyeSIsInJlZ2lzdGVySW5zdGFsbGF0aW9uIiwid2FpdFVudGlsRmlkUmVnaXN0cmF0aW9uIiwidHJpZ2dlclJlZ2lzdHJhdGlvbklmTmVjZXNzYXJ5IiwidXBkYXRlSW5zdGFsbGF0aW9uUmVxdWVzdCIsImdlbmVyYXRlQXV0aFRva2VuUmVxdWVzdCIsInBsYXRmb3JtTG9nZ2VyUHJvdmlkZXIiLCJwbGF0Zm9ybUxvZ2dlciIsImdldEdlbmVyYXRlQXV0aFRva2VuRW5kcG9pbnQiLCJpbnN0YWxsYXRpb24iLCJyZWZyZXNoQXV0aFRva2VuIiwiZGVwZW5kZW5jaWVzIiwidG9rZW5Qcm9taXNlIiwiaXNFbnRyeVJlZ2lzdGVyZWQiLCJvbGRBdXRoVG9rZW4iLCJpc0F1dGhUb2tlbkV4cGlyZWQiLCJpc0F1dGhUb2tlblZhbGlkIiwidXBkYXRlQXV0aFRva2VuUmVxdWVzdCIsIndhaXRVbnRpbEF1dGhUb2tlblJlcXVlc3QiLCJpblByb2dyZXNzQXV0aFRva2VuIiwicmVxdWVzdFRpbWUiLCJtYWtlQXV0aFRva2VuUmVxdWVzdEluUHJvZ3Jlc3NFbnRyeSIsInVwZGF0ZWRJbnN0YWxsYXRpb25FbnRyeSIsImZldGNoQXV0aFRva2VuRnJvbVNlcnZlciIsImNvbXBsZXRlSW5zdGFsbGF0aW9uUmVnaXN0cmF0aW9uIiwiZGVsZXRlSW5zdGFsbGF0aW9uUmVxdWVzdCIsImdldERlbGV0ZUVuZHBvaW50IiwiZ2V0TWlzc2luZ1ZhbHVlRXJyb3IiLCJ2YWx1ZU5hbWUiLCJjb25maWdLZXlzXzEiLCJjb25maWdLZXlzXzFfMSIsImtleU5hbWUiLCJleHRyYWN0QXBwQ29uZmlnIiwiZ2V0SWQiLCJkZWxldGVJbnN0YWxsYXRpb24iLCJHdGFnQ29tbWFuZCIsIkV2ZW50TmFtZSIsIkFOQUxZVElDU19JRF9GSUVMRCIsIkdBX0ZJRF9LRVkiLCJPUklHSU5fS0VZIiwiR1RBR19VUkwiLCJ3cmFwT3JDcmVhdGVHdGFnIiwiaW5pdGlhbGl6ZWRJZFByb21pc2VzTWFwIiwiZGF0YUxheWVyTmFtZSIsImd0YWdGdW5jdGlvbk5hbWUiLCJndGFnQ29yZSIsIl9hcmdzIiwiaWRPck5hbWVPclBhcmFtcyIsImd0YWdQYXJhbXMiLCJFVkVOVCIsImluaXRpYWxpemF0aW9uUHJvbWlzZXNUb1dhaXRGb3IiLCJnYVNlbmRUb0xpc3QiLCJnYVNlbmRUb0xpc3RfMSIsInNlbmRUb0lkIiwiaW5pdGlhbGl6YXRpb25Qcm9taXNlIiwiaWRQcm9taXNlIiwiQ09ORklHIiwiU0VUIiwid3JhcEd0YWciLCJ3cmFwcGVkR3RhZyIsImd0YWdDb3JlRnVuY3Rpb24iLCJ3cmFwcGVkR3RhZ0Z1bmN0aW9uIiwiZ3RhZ05hbWUiLCJnbG9iYWxJbml0RG9uZSIsImluc3RhbGxhdGlvbnMiLCJhbmFseXRpY3NJZCIsInNjcmlwdFRhZ3MiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsImZpbmRHdGFnU2NyaXB0T25QYWdlIiwic2NyaXB0IiwiaW5zZXJ0U2NyaXB0VGFnIiwiZGF0YUxheWVyIiwiZ2V0T3JDcmVhdGVEYXRhTGF5ZXIiLCJpbml0aWFsaXplR0FJZCIsImxvZ0V2ZW50IiwiZXZlbnROYW1lIiwiZXZlbnRQYXJhbXMiLCJndGFnRnVuY3Rpb24iLCJzZXRDdXJyZW50U2NyZWVuIiwic2NyZWVuTmFtZSIsInNldFVzZXJJZCIsInNldFVzZXJQcm9wZXJ0aWVzIiwiZmxhdFByb3BlcnRpZXMiLCJzZXRBbmFseXRpY3NDb2xsZWN0aW9uRW5hYmxlZCIsImVuYWJsZWQiLCJBTkFMWVRJQ1NfVFlQRSIsInJlZ2lzdGVyQW5hbHl0aWNzIiwiTWVzc2FnZVR5cGUiLCJFUlJPUl9NQVAiLCJlcnJvckZhY3RvcnkiLCJERUZBVUxUX1BVQkxJQ19WQVBJRF9LRVkiLCJFTkRQT0lOVCIsImlzQXJyYXlCdWZmZXJFcXVhbCIsImJ5dGVMZW5ndGgiLCJ2aWV3QSIsIkRhdGFWaWV3Iiwidmlld0IiLCJnZXRVaW50OCIsImFycmF5QnVmZmVyVG9CYXNlNjQiLCJhcnJheUJ1ZmZlciIsInVpbnQ4VmVyc2lvbiIsIlN1YnNjcmlwdGlvbk1hbmFnZXIiLCJzdWJzY3JpcHRpb24iLCJ2YXBpZEtleSIsInN1YnNjcmliZU9wdGlvbnMiLCJyZXNwb25zZURhdGEiLCJlcnJfMSIsImdldEJvZHkiLCJnZXRFbmRwb2ludCIsImVycm9ySW5mbyIsInVwZGF0ZVRva2VuIiwidG9rZW5EZXRhaWxzIiwidXBkYXRlT3B0aW9ucyIsImVycl8yIiwiZmNtVG9rZW4iLCJkZWxldGVUb2tlbiIsInVuc3Vic2NyaWJlT3B0aW9ucyIsImVycl8zIiwicDI1NmRoIiwid2ViIiwiYXBwbGljYXRpb25QdWJLZXkiLCJiYXNlNjRUb0FycmF5QnVmZmVyIiwiYmFzZTY0U3RyaW5nIiwicmVwZWF0IiwicmF3RGF0YSIsIm91dHB1dEFycmF5IiwiT0xEX0RCX05BTUUiLCJPTERfT0JKRUNUX1NUT1JFX05BTUUiLCJjbGVhblYxIiwiX2V2ZW50Iiwic3Vic2NyaXB0aW9uTWFuYWdlciIsIm9wZW5DdXJzb3JSZXF1ZXN0IiwiaGFuZGxlRGIiLCJEYkludGVyZmFjZSIsImdldEluZGV4IiwiY2xvc2VEYXRhYmFzZSIsInJ1blJlcXVlc3QiLCJnZXREYiIsIm9iamVjdFN0b3JlTmFtZSIsInByb21pc2lmeSIsImRiVmVyc2lvbiIsIm9uRGJVcGdyYWRlIiwiVG9rZW5EZXRhaWxzTW9kZWwiLCJjdXJzb3JSZXF1ZXN0XzEiLCJjcmVhdGVUaW1lIiwiZmNtUHVzaFNldCIsImN1cnNvclJlcXVlc3RfMiIsImdldFRva2VuRGV0YWlsc0Zyb21Ub2tlbiIsInZhbGlkYXRlSW5wdXRzIiwiZ2V0VG9rZW5EZXRhaWxzRnJvbVNXU2NvcGUiLCJzd1Njb3BlIiwic2F2ZVRva2VuRGV0YWlscyIsImZjbVNlbmRlcklkIiwiQXJyYXlCdWZmZXIiLCJWYXBpZERldGFpbHNNb2RlbCIsImdldFZhcGlkRnJvbVNXU2NvcGUiLCJzYXZlVmFwaWREZXRhaWxzIiwiZGVsZXRlVmFwaWREZXRhaWxzIiwiQmFzZUNvbnRyb2xsZXIiLCJ2YXBpZERldGFpbHNNb2RlbCIsIm1lc3NhZ2luZ1NlbmRlcklkIiwidG9rZW5EZXRhaWxzTW9kZWwiLCJzd1JlZyIsInB1YmxpY1ZhcGlkS2V5IiwicHVzaFN1YnNjcmlwdGlvbiIsImdldE5vdGlmaWNhdGlvblBlcm1pc3Npb24iLCJyZXF1ZXN0Tm90aWZpY2F0aW9uUGVybWlzc2lvbiIsImdldFNXUmVnaXN0cmF0aW9uXyIsImdldFB1YmxpY1ZhcGlkS2V5XyIsImdldFB1c2hTdWJzY3JpcHRpb24iLCJzY29wZSIsIm1hbmFnZUV4aXN0aW5nVG9rZW4iLCJnZXROZXdUb2tlbiIsImlzRW5kcG9pbnRFcXVhbCIsImlzQXV0aEVxdWFsIiwiaXNQMjU2ZGhFcXVhbCIsImlzVG9rZW5TdGlsbFZhbGlkIiwiZGVsZXRlVG9rZW5Gcm9tREIiLCJ1cGRhdGVkVG9rZW4iLCJhbGxEZXRhaWxzIiwibmV3VG9rZW4iLCJyZWdpc3RyYXRpb24iLCJwdXNoTWFuYWdlciIsImdldFN1YnNjcmlwdGlvbiIsInVuc3Vic2NyaWJlIiwiZV8yIiwic3dSZWdpc3RyYXRpb24iLCJ1c2VyVmlzaWJsZU9ubHkiLCJhcHBsaWNhdGlvblNlcnZlcktleSIsInJlcXVlc3RQZXJtaXNzaW9uIiwidXNlU2VydmljZVdvcmtlciIsIl9yZWdpc3RyYXRpb24iLCJ1c2VQdWJsaWNWYXBpZEtleSIsIl9iNjRQdWJsaWNLZXkiLCJfbmV4dE9yT2JzZXJ2ZXIiLCJfZXJyb3IiLCJfY29tcGxldGVkIiwib25Ub2tlblJlZnJlc2giLCJzZXRCYWNrZ3JvdW5kTWVzc2FnZUhhbmRsZXIiLCJfY2FsbGJhY2siLCJOb3RpZmljYXRpb24iLCJnZXRUb2tlbkRldGFpbHNNb2RlbCIsImdldFZhcGlkRGV0YWlsc01vZGVsIiwiZ2V0U3Vic2NyaXB0aW9uTWFuYWdlciIsIlN3Q29udHJvbGxlciIsImJnTWVzc2FnZUhhbmRsZXIiLCJvblB1c2giLCJvblN1YkNoYW5nZSIsIm9uTm90aWZpY2F0aW9uQ2xpY2siLCJ3YWl0VW50aWwiLCJvblB1c2hfIiwib25TdWJDaGFuZ2VfIiwib25Ob3RpZmljYXRpb25DbGlja18iLCJtc2dQYXlsb2FkIiwibm90aWZpY2F0aW9uRGV0YWlscyIsIm5vdGlmaWNhdGlvblRpdGxlIiwicmVnIiwibWF4QWN0aW9ucyIsImhhc1Zpc2libGVDbGllbnRzXyIsInNlbmRNZXNzYWdlVG9XaW5kb3dDbGllbnRzXyIsImdldE5vdGlmaWNhdGlvbkRhdGFfIiwic2hvd05vdGlmaWNhdGlvbiIsImxpbmsiLCJ3aW5kb3dDbGllbnQiLCJpbnRlcm5hbE1zZyIsInN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbiIsImZjbU9wdGlvbnMiLCJjbGlja19hY3Rpb24iLCJvcmlnaW4iLCJnZXRXaW5kb3dDbGllbnRfIiwib3BlbldpbmRvdyIsImZvY3VzIiwiY3JlYXRlTmV3TXNnIiwiTk9USUZJQ0FUSU9OX0NMSUNLRUQiLCJhdHRlbXB0VG9NZXNzYWdlQ2xpZW50XyIsIm5vdGlmaWNhdGlvbkluZm9ybWF0aW9uIiwicGFyc2VkVVJMIiwiY2xpZW50TGlzdCIsInN1aXRhYmxlQ2xpZW50IiwiVVJMIiwiZ2V0Q2xpZW50TGlzdCIsInBvc3RNZXNzYWdlIiwiUFVTSF9NU0dfUkVDRUlWRUQiLCJ2YXBpZEtleUZyb21EYXRhYmFzZSIsIm1hdGNoQWxsIiwiaW5jbHVkZVVuY29udHJvbGxlZCIsIm1zZ1R5cGUiLCJmaXJlYmFzZU1lc3NhZ2luZ1R5cGUiLCJmaXJlYmFzZU1lc3NhZ2luZ0RhdGEiLCJXaW5kb3dDb250cm9sbGVyIiwicmVnaXN0cmF0aW9uVG9Vc2UiLCJwdWJsaWNWYXBpZEtleVRvVXNlIiwibWVzc2FnZU9ic2VydmVyIiwidG9rZW5SZWZyZXNoT2JzZXJ2ZXIiLCJvbk1lc3NhZ2VJbnRlcm5hbCIsIm9uVG9rZW5SZWZyZXNoSW50ZXJuYWwiLCJzZXR1cFNXTWVzc2FnZUxpc3RlbmVyXyIsInBlcm1pc3Npb25SZXN1bHQiLCJTZXJ2aWNlV29ya2VyUmVnaXN0cmF0aW9uIiwicHVibGljS2V5IiwicGFyc2VkS2V5IiwiY29tcGxldGVkIiwid2FpdEZvclJlZ2lzdHJhdGlvblRvQWN0aXZhdGVfIiwic2VydmljZVdvcmtlciIsImluc3RhbGxpbmciLCJ3YWl0aW5nIiwic3RhdGVDaGFuZ2VMaXN0ZW5lciIsInJlZ2lzdGVyIiwiYnJvd3NlckVycm9yTWVzc2FnZSIsImV2ZW50VHlwZSIsIm1lc3NhZ2VUeXBlIiwiZ2V0RXZlbnRUeXBlIiwiYW5hbHl0aWNzUHJvdmlkZXIiLCJtZXNzYWdlX25hbWUiLCJtZXNzYWdlX2lkIiwibWVzc2FnZV90aW1lIiwibWVzc2FnZV9kZXZpY2VfdGltZSIsImlzU3VwcG9ydGVkIiwiUHVzaFN1YnNjcmlwdGlvbiIsImNvb2tpZUVuYWJsZWQiLCJuYW1lc3BhY2VFeHBvcnRzIiwiZmlyZWJhc2VTZXJ2aWNlcyIsInJlZ2lzdGVyTWVzc2FnaW5nIiwiYXV0aERvbWFpbiIsImRhdGFiYXNlVVJMIiwic3RvcmFnZUJ1Y2tldCIsIm1lc3NhZ2luZyIsInBheWxvYWQiLCJyZWZyZXNoZWRUb2tlbiIsImdldE1lc3NhZ2luZ1Rva2VuIiwic2Vzc2lvblN0b3JhZ2UiLCJyZXF1ZXN0Tm90aWZpY2F0aW9uc1Blcm1pc3Npb25zIiwiTXNnIiwiQnJvYWRjYXN0Q2hhbm5lbCIsIm9ubWVzc2FnZSIsIkFQSV9LRVkiLCJDTElFTlRfSUQiLCJQUk9DRVNTIiwiRElTQ09WRVJZX0RPQ1MiLCJTQ09QRVMiLCJhdXRob3JpemVCdXR0b24iLCJzaWdub3V0QnV0dG9uIiwiaW5pdENsaWVudCIsImluaXQiLCJkaXNjb3ZlcnlEb2NzIiwiYXV0aDIiLCJnZXRBdXRoSW5zdGFuY2UiLCJpc1NpZ25lZEluIiwidXBkYXRlU2lnbmluU3RhdHVzIiwiaGFuZGxlQXV0aENsaWNrIiwiaGFuZGxlU2lnbm91dENsaWNrIiwiYXV0aG9yaXplRGlhbG9nIiwic2lnbkluIiwic2lnbk91dCIsImRlZmVyIiwibG9hZCIsImN1cnJlbnREcmF3aW5nQnRuIiwiZGVmZXJyZWRJbnN0YWxsUHJvbXB0IiwiaW5zdGFsbEJ1dHRvbiIsInByb21wdCIsImhpZGRlbiIsInVzZXJDaG9pY2UiLCJjaG9pY2UiLCJvdXRjb21lIiwiZHJhd2luZ0lkIiwicmVxdWVzdGVkRHJhd2luZyIsInN0eWxlc1JlcyIsInN0eWxlVGFnIiwiZHJvcGRvd25zIiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsInNpZGVOYXZUb2dnbGUiXSwibWFwcGluZ3MiOiJhQUNFLElBQUlBLEVBQW1CLEdBR3ZCLFNBQVNDLEVBQW9CQyxHQUc1QixHQUFHRixFQUFpQkUsR0FDbkIsT0FBT0YsRUFBaUJFLEdBQVVDLFFBR25DLElBQUlDLEVBQVNKLEVBQWlCRSxHQUFZLENBQ3pDRyxFQUFHSCxFQUNISSxHQUFHLEVBQ0hILFFBQVMsSUFVVixPQU5BSSxFQUFRTCxHQUFVTSxLQUFLSixFQUFPRCxRQUFTQyxFQUFRQSxFQUFPRCxRQUFTRixHQUcvREcsRUFBT0UsR0FBSSxFQUdKRixFQUFPRCxRQUtmRixFQUFvQlEsRUFBSUYsRUFHeEJOLEVBQW9CUyxFQUFJVixFQUd4QkMsRUFBb0JVLEVB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QixjQUFjLFVBQy9CaThGLFVBQVlpckIsRUFBVXBsSSxLQUMvQjBjLFNBQVNNLEtBQUt1QixZQUFZOG1ILEdBQzFCLEdBQUk5YSxpQkFBaUIvSixrQkFBb0I2a0IsRyxhQUczQzcrSCxRQUFRbUMsS0FBSyxpRSw2QkFLZ0I5QixJQUE3QnMrSCxFQUFpQjlvSCxRQUNuQixHQUFJa3VHLGlCQUFpQnhLLFdBQVdvbEIsSUFFaEMsR0FBSTFjLG1CQUFtQixTQUFVLG1CQUNqQyxFQUFJOVEsZUFBZXV0QixHQUFXcGxJLE1BQUssU0FBQTJPLEdBQ2pDMDJILEVBQWlCcjBCLFdBQVdyaUcsRUFBSXpPLE1BQ2hDLEdBQUl1cUgsaUJBQWlCeEssV0FBV29sQixHQUNoQyxHQUFJdGMsc0JBQ0pyaUgsUUFBUTRPLElBQUksdUJBQ1gsU0FBQWhKLEdBQ0Q1RixRQUFRNE8sSUFBSWhKLE8sY0FVbEIsSUFGQSxJQUFNazVILEdBQVk1b0gsU0FBUzZvSCx1QkFBdUIsc0IsWUFFekN4cUksR0FDUHVxSSxHQUFVdnFJLEdBQUdzaUgsU0FBUyxHQUFHeDVELGlCQUFpQixTQUFTLFdBQ2pEeWhGLEdBQVV2cUksR0FBR3crRyxVQUFVK00sT0FBTyxXQUVoQ2dmLEdBQVV2cUksR0FBRzhvRCxpQkFBaUIsY0FBYyxTQUFBL2xELEdBQ3pDQSxFQUFFK2hILGNBQThCdEcsVUFBVTM2RixPQUFPLFlBTDdDLEdBQUksRUFBRyxHQUFJMG1ILEdBQVUzbkksT0FBUSxLLEdBQTdCLElBWVQsSUFBTTZuSSxHQUFnQjlvSCxTQUFTeS9GLGVBQWUsaUJBRTlDcXBCLEdBQWMzaEYsaUJBQWlCLFNBQVMsV0FDdENubkMsU0FBU3kvRixlQUFlLG9CQUFvQjVDLFVBQVUrTSxPQUFPLFVBQzdEa2YsR0FBY2pzQixVQUFVK00sT0FBTyIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDE5KTtcbiIsIi8qISAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG5Db3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlXHJcbnRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlXHJcbkxpY2Vuc2UgYXQgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcblxyXG5USElTIENPREUgSVMgUFJPVklERUQgT04gQU4gKkFTIElTKiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXHJcbktJTkQsIEVJVEhFUiBFWFBSRVNTIE9SIElNUExJRUQsIElOQ0xVRElORyBXSVRIT1VUIExJTUlUQVRJT04gQU5ZIElNUExJRURcclxuV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIFRJVExFLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSxcclxuTUVSQ0hBTlRBQkxJVFkgT1IgTk9OLUlORlJJTkdFTUVOVC5cclxuXHJcblNlZSB0aGUgQXBhY2hlIFZlcnNpb24gMi4wIExpY2Vuc2UgZm9yIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9uc1xyXG5hbmQgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovXHJcbi8qIGdsb2JhbCBSZWZsZWN0LCBQcm9taXNlICovXHJcblxyXG52YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uKGQsIGIpIHtcclxuICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XHJcbiAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxufTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2V4dGVuZHMoZCwgYikge1xyXG4gICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG59XHJcblxyXG5leHBvcnQgdmFyIF9fYXNzaWduID0gZnVuY3Rpb24oKSB7XHJcbiAgICBfX2Fzc2lnbiA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gX19hc3NpZ24odCkge1xyXG4gICAgICAgIGZvciAodmFyIHMsIGkgPSAxLCBuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IG47IGkrKykge1xyXG4gICAgICAgICAgICBzID0gYXJndW1lbnRzW2ldO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkpIHRbcF0gPSBzW3BdO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdDtcclxuICAgIH1cclxuICAgIHJldHVybiBfX2Fzc2lnbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19yZXN0KHMsIGUpIHtcclxuICAgIHZhciB0ID0ge307XHJcbiAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkgJiYgZS5pbmRleE9mKHApIDwgMClcclxuICAgICAgICB0W3BdID0gc1twXTtcclxuICAgIGlmIChzICE9IG51bGwgJiYgdHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMgPT09IFwiZnVuY3Rpb25cIilcclxuICAgICAgICBmb3IgKHZhciBpID0gMCwgcCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMocyk7IGkgPCBwLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmIChlLmluZGV4T2YocFtpXSkgPCAwICYmIE9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChzLCBwW2ldKSlcclxuICAgICAgICAgICAgICAgIHRbcFtpXV0gPSBzW3BbaV1dO1xyXG4gICAgICAgIH1cclxuICAgIHJldHVybiB0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xyXG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcclxuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XHJcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xyXG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcGFyYW0ocGFyYW1JbmRleCwgZGVjb3JhdG9yKSB7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhcmdldCwga2V5KSB7IGRlY29yYXRvcih0YXJnZXQsIGtleSwgcGFyYW1JbmRleCk7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fbWV0YWRhdGEobWV0YWRhdGFLZXksIG1ldGFkYXRhVmFsdWUpIHtcclxuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5tZXRhZGF0YSA9PT0gXCJmdW5jdGlvblwiKSByZXR1cm4gUmVmbGVjdC5tZXRhZGF0YShtZXRhZGF0YUtleSwgbWV0YWRhdGFWYWx1ZSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2F3YWl0ZXIodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XHJcbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHJlc3VsdC52YWx1ZSk7IH0pLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cclxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZ2VuZXJhdG9yKHRoaXNBcmcsIGJvZHkpIHtcclxuICAgIHZhciBfID0geyBsYWJlbDogMCwgc2VudDogZnVuY3Rpb24oKSB7IGlmICh0WzBdICYgMSkgdGhyb3cgdFsxXTsgcmV0dXJuIHRbMV07IH0sIHRyeXM6IFtdLCBvcHM6IFtdIH0sIGYsIHksIHQsIGc7XHJcbiAgICByZXR1cm4gZyA9IHsgbmV4dDogdmVyYigwKSwgXCJ0aHJvd1wiOiB2ZXJiKDEpLCBcInJldHVyblwiOiB2ZXJiKDIpIH0sIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiAoZ1tTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KSwgZztcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyByZXR1cm4gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIHN0ZXAoW24sIHZdKTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gc3RlcChvcCkge1xyXG4gICAgICAgIGlmIChmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiR2VuZXJhdG9yIGlzIGFscmVhZHkgZXhlY3V0aW5nLlwiKTtcclxuICAgICAgICB3aGlsZSAoXykgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKGYgPSAxLCB5ICYmICh0ID0gb3BbMF0gJiAyID8geVtcInJldHVyblwiXSA6IG9wWzBdID8geVtcInRocm93XCJdIHx8ICgodCA9IHlbXCJyZXR1cm5cIl0pICYmIHQuY2FsbCh5KSwgMCkgOiB5Lm5leHQpICYmICEodCA9IHQuY2FsbCh5LCBvcFsxXSkpLmRvbmUpIHJldHVybiB0O1xyXG4gICAgICAgICAgICBpZiAoeSA9IDAsIHQpIG9wID0gW29wWzBdICYgMiwgdC52YWx1ZV07XHJcbiAgICAgICAgICAgIHN3aXRjaCAob3BbMF0pIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMDogY2FzZSAxOiB0ID0gb3A7IGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA0OiBfLmxhYmVsKys7IHJldHVybiB7IHZhbHVlOiBvcFsxXSwgZG9uZTogZmFsc2UgfTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNTogXy5sYWJlbCsrOyB5ID0gb3BbMV07IG9wID0gWzBdOyBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNzogb3AgPSBfLm9wcy5wb3AoKTsgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEodCA9IF8udHJ5cywgdCA9IHQubGVuZ3RoID4gMCAmJiB0W3QubGVuZ3RoIC0gMV0pICYmIChvcFswXSA9PT0gNiB8fCBvcFswXSA9PT0gMikpIHsgXyA9IDA7IGNvbnRpbnVlOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSAzICYmICghdCB8fCAob3BbMV0gPiB0WzBdICYmIG9wWzFdIDwgdFszXSkpKSB7IF8ubGFiZWwgPSBvcFsxXTsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDYgJiYgXy5sYWJlbCA8IHRbMV0pIHsgXy5sYWJlbCA9IHRbMV07IHQgPSBvcDsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodCAmJiBfLmxhYmVsIDwgdFsyXSkgeyBfLmxhYmVsID0gdFsyXTsgXy5vcHMucHVzaChvcCk7IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRbMl0pIF8ub3BzLnBvcCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIF8udHJ5cy5wb3AoKTsgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgb3AgPSBib2R5LmNhbGwodGhpc0FyZywgXyk7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkgeyBvcCA9IFs2LCBlXTsgeSA9IDA7IH0gZmluYWxseSB7IGYgPSB0ID0gMDsgfVxyXG4gICAgICAgIGlmIChvcFswXSAmIDUpIHRocm93IG9wWzFdOyByZXR1cm4geyB2YWx1ZTogb3BbMF0gPyBvcFsxXSA6IHZvaWQgMCwgZG9uZTogdHJ1ZSB9O1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19leHBvcnRTdGFyKG0sIGV4cG9ydHMpIHtcclxuICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKCFleHBvcnRzLmhhc093blByb3BlcnR5KHApKSBleHBvcnRzW3BdID0gbVtwXTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fdmFsdWVzKG8pIHtcclxuICAgIHZhciBtID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9bU3ltYm9sLml0ZXJhdG9yXSwgaSA9IDA7XHJcbiAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwO1xyXG4gICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogbyAmJiBvW2krK10sIGRvbmU6ICFvIH07XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcmVhZChvLCBuKSB7XHJcbiAgICB2YXIgbSA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvW1N5bWJvbC5pdGVyYXRvcl07XHJcbiAgICBpZiAoIW0pIHJldHVybiBvO1xyXG4gICAgdmFyIGkgPSBtLmNhbGwobyksIHIsIGFyID0gW10sIGU7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIHdoaWxlICgobiA9PT0gdm9pZCAwIHx8IG4tLSA+IDApICYmICEociA9IGkubmV4dCgpKS5kb25lKSBhci5wdXNoKHIudmFsdWUpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGVycm9yKSB7IGUgPSB7IGVycm9yOiBlcnJvciB9OyB9XHJcbiAgICBmaW5hbGx5IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBpZiAociAmJiAhci5kb25lICYmIChtID0gaVtcInJldHVyblwiXSkpIG0uY2FsbChpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZmluYWxseSB7IGlmIChlKSB0aHJvdyBlLmVycm9yOyB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYXI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3NwcmVhZCgpIHtcclxuICAgIGZvciAodmFyIGFyID0gW10sIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKVxyXG4gICAgICAgIGFyID0gYXIuY29uY2F0KF9fcmVhZChhcmd1bWVudHNbaV0pKTtcclxuICAgIHJldHVybiBhcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fc3ByZWFkQXJyYXlzKCkge1xyXG4gICAgZm9yICh2YXIgcyA9IDAsIGkgPSAwLCBpbCA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBpbDsgaSsrKSBzICs9IGFyZ3VtZW50c1tpXS5sZW5ndGg7XHJcbiAgICBmb3IgKHZhciByID0gQXJyYXkocyksIGsgPSAwLCBpID0gMDsgaSA8IGlsOyBpKyspXHJcbiAgICAgICAgZm9yICh2YXIgYSA9IGFyZ3VtZW50c1tpXSwgaiA9IDAsIGpsID0gYS5sZW5ndGg7IGogPCBqbDsgaisrLCBrKyspXHJcbiAgICAgICAgICAgIHJba10gPSBhW2pdO1xyXG4gICAgcmV0dXJuIHI7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hd2FpdCh2KSB7XHJcbiAgICByZXR1cm4gdGhpcyBpbnN0YW5jZW9mIF9fYXdhaXQgPyAodGhpcy52ID0gdiwgdGhpcykgOiBuZXcgX19hd2FpdCh2KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNHZW5lcmF0b3IodGhpc0FyZywgX2FyZ3VtZW50cywgZ2VuZXJhdG9yKSB7XHJcbiAgICBpZiAoIVN5bWJvbC5hc3luY0l0ZXJhdG9yKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3ltYm9sLmFzeW5jSXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xyXG4gICAgdmFyIGcgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSksIGksIHEgPSBbXTtcclxuICAgIHJldHVybiBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLmFzeW5jSXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyBpZiAoZ1tuXSkgaVtuXSA9IGZ1bmN0aW9uICh2KSB7IHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAoYSwgYikgeyBxLnB1c2goW24sIHYsIGEsIGJdKSA+IDEgfHwgcmVzdW1lKG4sIHYpOyB9KTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gcmVzdW1lKG4sIHYpIHsgdHJ5IHsgc3RlcChnW25dKHYpKTsgfSBjYXRjaCAoZSkgeyBzZXR0bGUocVswXVszXSwgZSk7IH0gfVxyXG4gICAgZnVuY3Rpb24gc3RlcChyKSB7IHIudmFsdWUgaW5zdGFuY2VvZiBfX2F3YWl0ID8gUHJvbWlzZS5yZXNvbHZlKHIudmFsdWUudikudGhlbihmdWxmaWxsLCByZWplY3QpIDogc2V0dGxlKHFbMF1bMl0sIHIpOyB9XHJcbiAgICBmdW5jdGlvbiBmdWxmaWxsKHZhbHVlKSB7IHJlc3VtZShcIm5leHRcIiwgdmFsdWUpOyB9XHJcbiAgICBmdW5jdGlvbiByZWplY3QodmFsdWUpIHsgcmVzdW1lKFwidGhyb3dcIiwgdmFsdWUpOyB9XHJcbiAgICBmdW5jdGlvbiBzZXR0bGUoZiwgdikgeyBpZiAoZih2KSwgcS5zaGlmdCgpLCBxLmxlbmd0aCkgcmVzdW1lKHFbMF1bMF0sIHFbMF1bMV0pOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jRGVsZWdhdG9yKG8pIHtcclxuICAgIHZhciBpLCBwO1xyXG4gICAgcmV0dXJuIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiLCBmdW5jdGlvbiAoZSkgeyB0aHJvdyBlOyB9KSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobiwgZikgeyBpW25dID0gb1tuXSA/IGZ1bmN0aW9uICh2KSB7IHJldHVybiAocCA9ICFwKSA/IHsgdmFsdWU6IF9fYXdhaXQob1tuXSh2KSksIGRvbmU6IG4gPT09IFwicmV0dXJuXCIgfSA6IGYgPyBmKHYpIDogdjsgfSA6IGY7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNWYWx1ZXMobykge1xyXG4gICAgaWYgKCFTeW1ib2wuYXN5bmNJdGVyYXRvcikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5hc3luY0l0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxuICAgIHZhciBtID0gb1tTeW1ib2wuYXN5bmNJdGVyYXRvcl0sIGk7XHJcbiAgICByZXR1cm4gbSA/IG0uY2FsbChvKSA6IChvID0gdHlwZW9mIF9fdmFsdWVzID09PSBcImZ1bmN0aW9uXCIgPyBfX3ZhbHVlcyhvKSA6IG9bU3ltYm9sLml0ZXJhdG9yXSgpLCBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLmFzeW5jSXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaSk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgaVtuXSA9IG9bbl0gJiYgZnVuY3Rpb24gKHYpIHsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsgdiA9IG9bbl0odiksIHNldHRsZShyZXNvbHZlLCByZWplY3QsIHYuZG9uZSwgdi52YWx1ZSk7IH0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiBzZXR0bGUocmVzb2x2ZSwgcmVqZWN0LCBkLCB2KSB7IFByb21pc2UucmVzb2x2ZSh2KS50aGVuKGZ1bmN0aW9uKHYpIHsgcmVzb2x2ZSh7IHZhbHVlOiB2LCBkb25lOiBkIH0pOyB9LCByZWplY3QpOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX21ha2VUZW1wbGF0ZU9iamVjdChjb29rZWQsIHJhdykge1xyXG4gICAgaWYgKE9iamVjdC5kZWZpbmVQcm9wZXJ0eSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkoY29va2VkLCBcInJhd1wiLCB7IHZhbHVlOiByYXcgfSk7IH0gZWxzZSB7IGNvb2tlZC5yYXcgPSByYXc7IH1cclxuICAgIHJldHVybiBjb29rZWQ7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19pbXBvcnRTdGFyKG1vZCkge1xyXG4gICAgaWYgKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgcmV0dXJuIG1vZDtcclxuICAgIHZhciByZXN1bHQgPSB7fTtcclxuICAgIGlmIChtb2QgIT0gbnVsbCkgZm9yICh2YXIgayBpbiBtb2QpIGlmIChPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtb2QsIGspKSByZXN1bHRba10gPSBtb2Rba107XHJcbiAgICByZXN1bHQuZGVmYXVsdCA9IG1vZDtcclxuICAgIHJldHVybiByZXN1bHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2ltcG9ydERlZmF1bHQobW9kKSB7XHJcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IGRlZmF1bHQ6IG1vZCB9O1xyXG59XHJcbiIsIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcblxudmFyIHRzbGliID0gcmVxdWlyZSgndHNsaWInKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBAZmlsZW92ZXJ2aWV3IEZpcmViYXNlIGNvbnN0YW50cy4gIFNvbWUgb2YgdGhlc2UgKEBkZWZpbmVzKSBjYW4gYmUgb3ZlcnJpZGRlbiBhdCBjb21waWxlLXRpbWUuXHJcbiAqL1xyXG52YXIgQ09OU1RBTlRTID0ge1xyXG4gICAgLyoqXHJcbiAgICAgKiBAZGVmaW5lIHtib29sZWFufSBXaGV0aGVyIHRoaXMgaXMgdGhlIGNsaWVudCBOb2RlLmpzIFNESy5cclxuICAgICAqL1xyXG4gICAgTk9ERV9DTElFTlQ6IGZhbHNlLFxyXG4gICAgLyoqXHJcbiAgICAgKiBAZGVmaW5lIHtib29sZWFufSBXaGV0aGVyIHRoaXMgaXMgdGhlIEFkbWluIE5vZGUuanMgU0RLLlxyXG4gICAgICovXHJcbiAgICBOT0RFX0FETUlOOiBmYWxzZSxcclxuICAgIC8qKlxyXG4gICAgICogRmlyZWJhc2UgU0RLIFZlcnNpb25cclxuICAgICAqL1xyXG4gICAgU0RLX1ZFUlNJT046ICcke0pTQ09SRV9WRVJTSU9OfSdcclxufTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBUaHJvd3MgYW4gZXJyb3IgaWYgdGhlIHByb3ZpZGVkIGFzc2VydGlvbiBpcyBmYWxzeVxyXG4gKi9cclxudmFyIGFzc2VydCA9IGZ1bmN0aW9uIChhc3NlcnRpb24sIG1lc3NhZ2UpIHtcclxuICAgIGlmICghYXNzZXJ0aW9uKSB7XHJcbiAgICAgICAgdGhyb3cgYXNzZXJ0aW9uRXJyb3IobWVzc2FnZSk7XHJcbiAgICB9XHJcbn07XHJcbi8qKlxyXG4gKiBSZXR1cm5zIGFuIEVycm9yIG9iamVjdCBzdWl0YWJsZSBmb3IgdGhyb3dpbmcuXHJcbiAqL1xyXG52YXIgYXNzZXJ0aW9uRXJyb3IgPSBmdW5jdGlvbiAobWVzc2FnZSkge1xyXG4gICAgcmV0dXJuIG5ldyBFcnJvcignRmlyZWJhc2UgRGF0YWJhc2UgKCcgK1xyXG4gICAgICAgIENPTlNUQU5UUy5TREtfVkVSU0lPTiArXHJcbiAgICAgICAgJykgSU5URVJOQUwgQVNTRVJUIEZBSUxFRDogJyArXHJcbiAgICAgICAgbWVzc2FnZSk7XHJcbn07XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG52YXIgc3RyaW5nVG9CeXRlQXJyYXkgPSBmdW5jdGlvbiAoc3RyKSB7XHJcbiAgICAvLyBUT0RPKHVzZXIpOiBVc2UgbmF0aXZlIGltcGxlbWVudGF0aW9ucyBpZi93aGVuIGF2YWlsYWJsZVxyXG4gICAgdmFyIG91dCA9IFtdO1xyXG4gICAgdmFyIHAgPSAwO1xyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICB2YXIgYyA9IHN0ci5jaGFyQ29kZUF0KGkpO1xyXG4gICAgICAgIGlmIChjIDwgMTI4KSB7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gYztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoYyA8IDIwNDgpIHtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyA+PiA2KSB8IDE5MjtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyAmIDYzKSB8IDEyODtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoKGMgJiAweGZjMDApID09PSAweGQ4MDAgJiZcclxuICAgICAgICAgICAgaSArIDEgPCBzdHIubGVuZ3RoICYmXHJcbiAgICAgICAgICAgIChzdHIuY2hhckNvZGVBdChpICsgMSkgJiAweGZjMDApID09PSAweGRjMDApIHtcclxuICAgICAgICAgICAgLy8gU3Vycm9nYXRlIFBhaXJcclxuICAgICAgICAgICAgYyA9IDB4MTAwMDAgKyAoKGMgJiAweDAzZmYpIDw8IDEwKSArIChzdHIuY2hhckNvZGVBdCgrK2kpICYgMHgwM2ZmKTtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyA+PiAxOCkgfCAyNDA7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKChjID4+IDEyKSAmIDYzKSB8IDEyODtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoKGMgPj4gNikgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjID4+IDEyKSB8IDIyNDtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoKGMgPj4gNikgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG91dDtcclxufTtcclxuLyoqXHJcbiAqIFR1cm5zIGFuIGFycmF5IG9mIG51bWJlcnMgaW50byB0aGUgc3RyaW5nIGdpdmVuIGJ5IHRoZSBjb25jYXRlbmF0aW9uIG9mIHRoZVxyXG4gKiBjaGFyYWN0ZXJzIHRvIHdoaWNoIHRoZSBudW1iZXJzIGNvcnJlc3BvbmQuXHJcbiAqIEBwYXJhbSBieXRlcyBBcnJheSBvZiBudW1iZXJzIHJlcHJlc2VudGluZyBjaGFyYWN0ZXJzLlxyXG4gKiBAcmV0dXJuIFN0cmluZ2lmaWNhdGlvbiBvZiB0aGUgYXJyYXkuXHJcbiAqL1xyXG52YXIgYnl0ZUFycmF5VG9TdHJpbmcgPSBmdW5jdGlvbiAoYnl0ZXMpIHtcclxuICAgIC8vIFRPRE8odXNlcik6IFVzZSBuYXRpdmUgaW1wbGVtZW50YXRpb25zIGlmL3doZW4gYXZhaWxhYmxlXHJcbiAgICB2YXIgb3V0ID0gW107XHJcbiAgICB2YXIgcG9zID0gMCwgYyA9IDA7XHJcbiAgICB3aGlsZSAocG9zIDwgYnl0ZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgdmFyIGMxID0gYnl0ZXNbcG9zKytdO1xyXG4gICAgICAgIGlmIChjMSA8IDEyOCkge1xyXG4gICAgICAgICAgICBvdXRbYysrXSA9IFN0cmluZy5mcm9tQ2hhckNvZGUoYzEpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChjMSA+IDE5MSAmJiBjMSA8IDIyNCkge1xyXG4gICAgICAgICAgICB2YXIgYzIgPSBieXRlc1twb3MrK107XHJcbiAgICAgICAgICAgIG91dFtjKytdID0gU3RyaW5nLmZyb21DaGFyQ29kZSgoKGMxICYgMzEpIDw8IDYpIHwgKGMyICYgNjMpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoYzEgPiAyMzkgJiYgYzEgPCAzNjUpIHtcclxuICAgICAgICAgICAgLy8gU3Vycm9nYXRlIFBhaXJcclxuICAgICAgICAgICAgdmFyIGMyID0gYnl0ZXNbcG9zKytdO1xyXG4gICAgICAgICAgICB2YXIgYzMgPSBieXRlc1twb3MrK107XHJcbiAgICAgICAgICAgIHZhciBjNCA9IGJ5dGVzW3BvcysrXTtcclxuICAgICAgICAgICAgdmFyIHUgPSAoKChjMSAmIDcpIDw8IDE4KSB8ICgoYzIgJiA2MykgPDwgMTIpIHwgKChjMyAmIDYzKSA8PCA2KSB8IChjNCAmIDYzKSkgLVxyXG4gICAgICAgICAgICAgICAgMHgxMDAwMDtcclxuICAgICAgICAgICAgb3V0W2MrK10gPSBTdHJpbmcuZnJvbUNoYXJDb2RlKDB4ZDgwMCArICh1ID4+IDEwKSk7XHJcbiAgICAgICAgICAgIG91dFtjKytdID0gU3RyaW5nLmZyb21DaGFyQ29kZSgweGRjMDAgKyAodSAmIDEwMjMpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHZhciBjMiA9IGJ5dGVzW3BvcysrXTtcclxuICAgICAgICAgICAgdmFyIGMzID0gYnl0ZXNbcG9zKytdO1xyXG4gICAgICAgICAgICBvdXRbYysrXSA9IFN0cmluZy5mcm9tQ2hhckNvZGUoKChjMSAmIDE1KSA8PCAxMikgfCAoKGMyICYgNjMpIDw8IDYpIHwgKGMzICYgNjMpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gb3V0LmpvaW4oJycpO1xyXG59O1xyXG4vLyBXZSBkZWZpbmUgaXQgYXMgYW4gb2JqZWN0IGxpdGVyYWwgaW5zdGVhZCBvZiBhIGNsYXNzIGJlY2F1c2UgYSBjbGFzcyBjb21waWxlZCBkb3duIHRvIGVzNSBjYW4ndFxyXG4vLyBiZSB0cmVlc2hha2VkLiBodHRwczovL2dpdGh1Yi5jb20vcm9sbHVwL3JvbGx1cC9pc3N1ZXMvMTY5MVxyXG4vLyBTdGF0aWMgbG9va3VwIG1hcHMsIGxhemlseSBwb3B1bGF0ZWQgYnkgaW5pdF8oKVxyXG52YXIgYmFzZTY0ID0ge1xyXG4gICAgLyoqXHJcbiAgICAgKiBNYXBzIGJ5dGVzIHRvIGNoYXJhY3RlcnMuXHJcbiAgICAgKi9cclxuICAgIGJ5dGVUb0NoYXJNYXBfOiBudWxsLFxyXG4gICAgLyoqXHJcbiAgICAgKiBNYXBzIGNoYXJhY3RlcnMgdG8gYnl0ZXMuXHJcbiAgICAgKi9cclxuICAgIGNoYXJUb0J5dGVNYXBfOiBudWxsLFxyXG4gICAgLyoqXHJcbiAgICAgKiBNYXBzIGJ5dGVzIHRvIHdlYnNhZmUgY2hhcmFjdGVycy5cclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIGJ5dGVUb0NoYXJNYXBXZWJTYWZlXzogbnVsbCxcclxuICAgIC8qKlxyXG4gICAgICogTWFwcyB3ZWJzYWZlIGNoYXJhY3RlcnMgdG8gYnl0ZXMuXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICBjaGFyVG9CeXRlTWFwV2ViU2FmZV86IG51bGwsXHJcbiAgICAvKipcclxuICAgICAqIE91ciBkZWZhdWx0IGFscGhhYmV0LCBzaGFyZWQgYmV0d2VlblxyXG4gICAgICogRU5DT0RFRF9WQUxTIGFuZCBFTkNPREVEX1ZBTFNfV0VCU0FGRVxyXG4gICAgICovXHJcbiAgICBFTkNPREVEX1ZBTFNfQkFTRTogJ0FCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaJyArICdhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5eicgKyAnMDEyMzQ1Njc4OScsXHJcbiAgICAvKipcclxuICAgICAqIE91ciBkZWZhdWx0IGFscGhhYmV0LiBWYWx1ZSA2NCAoPSkgaXMgc3BlY2lhbDsgaXQgbWVhbnMgXCJub3RoaW5nLlwiXHJcbiAgICAgKi9cclxuICAgIGdldCBFTkNPREVEX1ZBTFMoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuRU5DT0RFRF9WQUxTX0JBU0UgKyAnKy89JztcclxuICAgIH0sXHJcbiAgICAvKipcclxuICAgICAqIE91ciB3ZWJzYWZlIGFscGhhYmV0LlxyXG4gICAgICovXHJcbiAgICBnZXQgRU5DT0RFRF9WQUxTX1dFQlNBRkUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuRU5DT0RFRF9WQUxTX0JBU0UgKyAnLV8uJztcclxuICAgIH0sXHJcbiAgICAvKipcclxuICAgICAqIFdoZXRoZXIgdGhpcyBicm93c2VyIHN1cHBvcnRzIHRoZSBhdG9iIGFuZCBidG9hIGZ1bmN0aW9ucy4gVGhpcyBleHRlbnNpb25cclxuICAgICAqIHN0YXJ0ZWQgYXQgTW96aWxsYSBidXQgaXMgbm93IGltcGxlbWVudGVkIGJ5IG1hbnkgYnJvd3NlcnMuIFdlIHVzZSB0aGVcclxuICAgICAqIEFTU1VNRV8qIHZhcmlhYmxlcyB0byBhdm9pZCBwdWxsaW5nIGluIHRoZSBmdWxsIHVzZXJhZ2VudCBkZXRlY3Rpb24gbGlicmFyeVxyXG4gICAgICogYnV0IHN0aWxsIGFsbG93aW5nIHRoZSBzdGFuZGFyZCBwZXItYnJvd3NlciBjb21waWxhdGlvbnMuXHJcbiAgICAgKlxyXG4gICAgICovXHJcbiAgICBIQVNfTkFUSVZFX1NVUFBPUlQ6IHR5cGVvZiBhdG9iID09PSAnZnVuY3Rpb24nLFxyXG4gICAgLyoqXHJcbiAgICAgKiBCYXNlNjQtZW5jb2RlIGFuIGFycmF5IG9mIGJ5dGVzLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBpbnB1dCBBbiBhcnJheSBvZiBieXRlcyAobnVtYmVycyB3aXRoXHJcbiAgICAgKiAgICAgdmFsdWUgaW4gWzAsIDI1NV0pIHRvIGVuY29kZS5cclxuICAgICAqIEBwYXJhbSB3ZWJTYWZlIEJvb2xlYW4gaW5kaWNhdGluZyB3ZSBzaG91bGQgdXNlIHRoZVxyXG4gICAgICogICAgIGFsdGVybmF0aXZlIGFscGhhYmV0LlxyXG4gICAgICogQHJldHVybiBUaGUgYmFzZTY0IGVuY29kZWQgc3RyaW5nLlxyXG4gICAgICovXHJcbiAgICBlbmNvZGVCeXRlQXJyYXk6IGZ1bmN0aW9uIChpbnB1dCwgd2ViU2FmZSkge1xyXG4gICAgICAgIGlmICghQXJyYXkuaXNBcnJheShpbnB1dCkpIHtcclxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoJ2VuY29kZUJ5dGVBcnJheSB0YWtlcyBhbiBhcnJheSBhcyBhIHBhcmFtZXRlcicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmluaXRfKCk7XHJcbiAgICAgICAgdmFyIGJ5dGVUb0NoYXJNYXAgPSB3ZWJTYWZlXHJcbiAgICAgICAgICAgID8gdGhpcy5ieXRlVG9DaGFyTWFwV2ViU2FmZV9cclxuICAgICAgICAgICAgOiB0aGlzLmJ5dGVUb0NoYXJNYXBfO1xyXG4gICAgICAgIHZhciBvdXRwdXQgPSBbXTtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGlucHV0Lmxlbmd0aDsgaSArPSAzKSB7XHJcbiAgICAgICAgICAgIHZhciBieXRlMSA9IGlucHV0W2ldO1xyXG4gICAgICAgICAgICB2YXIgaGF2ZUJ5dGUyID0gaSArIDEgPCBpbnB1dC5sZW5ndGg7XHJcbiAgICAgICAgICAgIHZhciBieXRlMiA9IGhhdmVCeXRlMiA/IGlucHV0W2kgKyAxXSA6IDA7XHJcbiAgICAgICAgICAgIHZhciBoYXZlQnl0ZTMgPSBpICsgMiA8IGlucHV0Lmxlbmd0aDtcclxuICAgICAgICAgICAgdmFyIGJ5dGUzID0gaGF2ZUJ5dGUzID8gaW5wdXRbaSArIDJdIDogMDtcclxuICAgICAgICAgICAgdmFyIG91dEJ5dGUxID0gYnl0ZTEgPj4gMjtcclxuICAgICAgICAgICAgdmFyIG91dEJ5dGUyID0gKChieXRlMSAmIDB4MDMpIDw8IDQpIHwgKGJ5dGUyID4+IDQpO1xyXG4gICAgICAgICAgICB2YXIgb3V0Qnl0ZTMgPSAoKGJ5dGUyICYgMHgwZikgPDwgMikgfCAoYnl0ZTMgPj4gNik7XHJcbiAgICAgICAgICAgIHZhciBvdXRCeXRlNCA9IGJ5dGUzICYgMHgzZjtcclxuICAgICAgICAgICAgaWYgKCFoYXZlQnl0ZTMpIHtcclxuICAgICAgICAgICAgICAgIG91dEJ5dGU0ID0gNjQ7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWhhdmVCeXRlMikge1xyXG4gICAgICAgICAgICAgICAgICAgIG91dEJ5dGUzID0gNjQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgb3V0cHV0LnB1c2goYnl0ZVRvQ2hhck1hcFtvdXRCeXRlMV0sIGJ5dGVUb0NoYXJNYXBbb3V0Qnl0ZTJdLCBieXRlVG9DaGFyTWFwW291dEJ5dGUzXSwgYnl0ZVRvQ2hhck1hcFtvdXRCeXRlNF0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gb3V0cHV0LmpvaW4oJycpO1xyXG4gICAgfSxcclxuICAgIC8qKlxyXG4gICAgICogQmFzZTY0LWVuY29kZSBhIHN0cmluZy5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gaW5wdXQgQSBzdHJpbmcgdG8gZW5jb2RlLlxyXG4gICAgICogQHBhcmFtIHdlYlNhZmUgSWYgdHJ1ZSwgd2Ugc2hvdWxkIHVzZSB0aGVcclxuICAgICAqICAgICBhbHRlcm5hdGl2ZSBhbHBoYWJldC5cclxuICAgICAqIEByZXR1cm4gVGhlIGJhc2U2NCBlbmNvZGVkIHN0cmluZy5cclxuICAgICAqL1xyXG4gICAgZW5jb2RlU3RyaW5nOiBmdW5jdGlvbiAoaW5wdXQsIHdlYlNhZmUpIHtcclxuICAgICAgICAvLyBTaG9ydGN1dCBmb3IgTW96aWxsYSBicm93c2VycyB0aGF0IGltcGxlbWVudFxyXG4gICAgICAgIC8vIGEgbmF0aXZlIGJhc2U2NCBlbmNvZGVyIGluIHRoZSBmb3JtIG9mIFwiYnRvYS9hdG9iXCJcclxuICAgICAgICBpZiAodGhpcy5IQVNfTkFUSVZFX1NVUFBPUlQgJiYgIXdlYlNhZmUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGJ0b2EoaW5wdXQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5lbmNvZGVCeXRlQXJyYXkoc3RyaW5nVG9CeXRlQXJyYXkoaW5wdXQpLCB3ZWJTYWZlKTtcclxuICAgIH0sXHJcbiAgICAvKipcclxuICAgICAqIEJhc2U2NC1kZWNvZGUgYSBzdHJpbmcuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGlucHV0IHRvIGRlY29kZS5cclxuICAgICAqIEBwYXJhbSB3ZWJTYWZlIFRydWUgaWYgd2Ugc2hvdWxkIHVzZSB0aGVcclxuICAgICAqICAgICBhbHRlcm5hdGl2ZSBhbHBoYWJldC5cclxuICAgICAqIEByZXR1cm4gc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgZGVjb2RlZCB2YWx1ZS5cclxuICAgICAqL1xyXG4gICAgZGVjb2RlU3RyaW5nOiBmdW5jdGlvbiAoaW5wdXQsIHdlYlNhZmUpIHtcclxuICAgICAgICAvLyBTaG9ydGN1dCBmb3IgTW96aWxsYSBicm93c2VycyB0aGF0IGltcGxlbWVudFxyXG4gICAgICAgIC8vIGEgbmF0aXZlIGJhc2U2NCBlbmNvZGVyIGluIHRoZSBmb3JtIG9mIFwiYnRvYS9hdG9iXCJcclxuICAgICAgICBpZiAodGhpcy5IQVNfTkFUSVZFX1NVUFBPUlQgJiYgIXdlYlNhZmUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGF0b2IoaW5wdXQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gYnl0ZUFycmF5VG9TdHJpbmcodGhpcy5kZWNvZGVTdHJpbmdUb0J5dGVBcnJheShpbnB1dCwgd2ViU2FmZSkpO1xyXG4gICAgfSxcclxuICAgIC8qKlxyXG4gICAgICogQmFzZTY0LWRlY29kZSBhIHN0cmluZy5cclxuICAgICAqXHJcbiAgICAgKiBJbiBiYXNlLTY0IGRlY29kaW5nLCBncm91cHMgb2YgZm91ciBjaGFyYWN0ZXJzIGFyZSBjb252ZXJ0ZWQgaW50byB0aHJlZVxyXG4gICAgICogYnl0ZXMuICBJZiB0aGUgZW5jb2RlciBkaWQgbm90IGFwcGx5IHBhZGRpbmcsIHRoZSBpbnB1dCBsZW5ndGggbWF5IG5vdFxyXG4gICAgICogYmUgYSBtdWx0aXBsZSBvZiA0LlxyXG4gICAgICpcclxuICAgICAqIEluIHRoaXMgY2FzZSwgdGhlIGxhc3QgZ3JvdXAgd2lsbCBoYXZlIGZld2VyIHRoYW4gNCBjaGFyYWN0ZXJzLCBhbmRcclxuICAgICAqIHBhZGRpbmcgd2lsbCBiZSBpbmZlcnJlZC4gIElmIHRoZSBncm91cCBoYXMgb25lIG9yIHR3byBjaGFyYWN0ZXJzLCBpdCBkZWNvZGVzXHJcbiAgICAgKiB0byBvbmUgYnl0ZS4gIElmIHRoZSBncm91cCBoYXMgdGhyZWUgY2hhcmFjdGVycywgaXQgZGVjb2RlcyB0byB0d28gYnl0ZXMuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGlucHV0IElucHV0IHRvIGRlY29kZS5cclxuICAgICAqIEBwYXJhbSB3ZWJTYWZlIFRydWUgaWYgd2Ugc2hvdWxkIHVzZSB0aGUgd2ViLXNhZmUgYWxwaGFiZXQuXHJcbiAgICAgKiBAcmV0dXJuIGJ5dGVzIHJlcHJlc2VudGluZyB0aGUgZGVjb2RlZCB2YWx1ZS5cclxuICAgICAqL1xyXG4gICAgZGVjb2RlU3RyaW5nVG9CeXRlQXJyYXk6IGZ1bmN0aW9uIChpbnB1dCwgd2ViU2FmZSkge1xyXG4gICAgICAgIHRoaXMuaW5pdF8oKTtcclxuICAgICAgICB2YXIgY2hhclRvQnl0ZU1hcCA9IHdlYlNhZmVcclxuICAgICAgICAgICAgPyB0aGlzLmNoYXJUb0J5dGVNYXBXZWJTYWZlX1xyXG4gICAgICAgICAgICA6IHRoaXMuY2hhclRvQnl0ZU1hcF87XHJcbiAgICAgICAgdmFyIG91dHB1dCA9IFtdO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaW5wdXQubGVuZ3RoOykge1xyXG4gICAgICAgICAgICB2YXIgYnl0ZTEgPSBjaGFyVG9CeXRlTWFwW2lucHV0LmNoYXJBdChpKyspXTtcclxuICAgICAgICAgICAgdmFyIGhhdmVCeXRlMiA9IGkgPCBpbnB1dC5sZW5ndGg7XHJcbiAgICAgICAgICAgIHZhciBieXRlMiA9IGhhdmVCeXRlMiA/IGNoYXJUb0J5dGVNYXBbaW5wdXQuY2hhckF0KGkpXSA6IDA7XHJcbiAgICAgICAgICAgICsraTtcclxuICAgICAgICAgICAgdmFyIGhhdmVCeXRlMyA9IGkgPCBpbnB1dC5sZW5ndGg7XHJcbiAgICAgICAgICAgIHZhciBieXRlMyA9IGhhdmVCeXRlMyA/IGNoYXJUb0J5dGVNYXBbaW5wdXQuY2hhckF0KGkpXSA6IDY0O1xyXG4gICAgICAgICAgICArK2k7XHJcbiAgICAgICAgICAgIHZhciBoYXZlQnl0ZTQgPSBpIDwgaW5wdXQubGVuZ3RoO1xyXG4gICAgICAgICAgICB2YXIgYnl0ZTQgPSBoYXZlQnl0ZTQgPyBjaGFyVG9CeXRlTWFwW2lucHV0LmNoYXJBdChpKV0gOiA2NDtcclxuICAgICAgICAgICAgKytpO1xyXG4gICAgICAgICAgICBpZiAoYnl0ZTEgPT0gbnVsbCB8fCBieXRlMiA9PSBudWxsIHx8IGJ5dGUzID09IG51bGwgfHwgYnl0ZTQgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgRXJyb3IoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgb3V0Qnl0ZTEgPSAoYnl0ZTEgPDwgMikgfCAoYnl0ZTIgPj4gNCk7XHJcbiAgICAgICAgICAgIG91dHB1dC5wdXNoKG91dEJ5dGUxKTtcclxuICAgICAgICAgICAgaWYgKGJ5dGUzICE9PSA2NCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG91dEJ5dGUyID0gKChieXRlMiA8PCA0KSAmIDB4ZjApIHwgKGJ5dGUzID4+IDIpO1xyXG4gICAgICAgICAgICAgICAgb3V0cHV0LnB1c2gob3V0Qnl0ZTIpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGJ5dGU0ICE9PSA2NCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBvdXRCeXRlMyA9ICgoYnl0ZTMgPDwgNikgJiAweGMwKSB8IGJ5dGU0O1xyXG4gICAgICAgICAgICAgICAgICAgIG91dHB1dC5wdXNoKG91dEJ5dGUzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gb3V0cHV0O1xyXG4gICAgfSxcclxuICAgIC8qKlxyXG4gICAgICogTGF6eSBzdGF0aWMgaW5pdGlhbGl6YXRpb24gZnVuY3Rpb24uIENhbGxlZCBiZWZvcmVcclxuICAgICAqIGFjY2Vzc2luZyBhbnkgb2YgdGhlIHN0YXRpYyBtYXAgdmFyaWFibGVzLlxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgaW5pdF86IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoIXRoaXMuYnl0ZVRvQ2hhck1hcF8pIHtcclxuICAgICAgICAgICAgdGhpcy5ieXRlVG9DaGFyTWFwXyA9IHt9O1xyXG4gICAgICAgICAgICB0aGlzLmNoYXJUb0J5dGVNYXBfID0ge307XHJcbiAgICAgICAgICAgIHRoaXMuYnl0ZVRvQ2hhck1hcFdlYlNhZmVfID0ge307XHJcbiAgICAgICAgICAgIHRoaXMuY2hhclRvQnl0ZU1hcFdlYlNhZmVfID0ge307XHJcbiAgICAgICAgICAgIC8vIFdlIHdhbnQgcXVpY2sgbWFwcGluZ3MgYmFjayBhbmQgZm9ydGgsIHNvIHdlIHByZWNvbXB1dGUgdHdvIG1hcHMuXHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5FTkNPREVEX1ZBTFMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYnl0ZVRvQ2hhck1hcF9baV0gPSB0aGlzLkVOQ09ERURfVkFMUy5jaGFyQXQoaSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNoYXJUb0J5dGVNYXBfW3RoaXMuYnl0ZVRvQ2hhck1hcF9baV1dID0gaTtcclxuICAgICAgICAgICAgICAgIHRoaXMuYnl0ZVRvQ2hhck1hcFdlYlNhZmVfW2ldID0gdGhpcy5FTkNPREVEX1ZBTFNfV0VCU0FGRS5jaGFyQXQoaSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNoYXJUb0J5dGVNYXBXZWJTYWZlX1t0aGlzLmJ5dGVUb0NoYXJNYXBXZWJTYWZlX1tpXV0gPSBpO1xyXG4gICAgICAgICAgICAgICAgLy8gQmUgZm9yZ2l2aW5nIHdoZW4gZGVjb2RpbmcgYW5kIGNvcnJlY3RseSBkZWNvZGUgYm90aCBlbmNvZGluZ3MuXHJcbiAgICAgICAgICAgICAgICBpZiAoaSA+PSB0aGlzLkVOQ09ERURfVkFMU19CQVNFLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2hhclRvQnl0ZU1hcF9bdGhpcy5FTkNPREVEX1ZBTFNfV0VCU0FGRS5jaGFyQXQoaSldID0gaTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNoYXJUb0J5dGVNYXBXZWJTYWZlX1t0aGlzLkVOQ09ERURfVkFMUy5jaGFyQXQoaSldID0gaTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufTtcclxuLyoqXHJcbiAqIFVSTC1zYWZlIGJhc2U2NCBlbmNvZGluZ1xyXG4gKi9cclxudmFyIGJhc2U2NEVuY29kZSA9IGZ1bmN0aW9uIChzdHIpIHtcclxuICAgIHZhciB1dGY4Qnl0ZXMgPSBzdHJpbmdUb0J5dGVBcnJheShzdHIpO1xyXG4gICAgcmV0dXJuIGJhc2U2NC5lbmNvZGVCeXRlQXJyYXkodXRmOEJ5dGVzLCB0cnVlKTtcclxufTtcclxuLyoqXHJcbiAqIFVSTC1zYWZlIGJhc2U2NCBkZWNvZGluZ1xyXG4gKlxyXG4gKiBOT1RFOiBETyBOT1QgdXNlIHRoZSBnbG9iYWwgYXRvYigpIGZ1bmN0aW9uIC0gaXQgZG9lcyBOT1Qgc3VwcG9ydCB0aGVcclxuICogYmFzZTY0VXJsIHZhcmlhbnQgZW5jb2RpbmcuXHJcbiAqXHJcbiAqIEBwYXJhbSBzdHIgVG8gYmUgZGVjb2RlZFxyXG4gKiBAcmV0dXJuIERlY29kZWQgcmVzdWx0LCBpZiBwb3NzaWJsZVxyXG4gKi9cclxudmFyIGJhc2U2NERlY29kZSA9IGZ1bmN0aW9uIChzdHIpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgcmV0dXJuIGJhc2U2NC5kZWNvZGVTdHJpbmcoc3RyLCB0cnVlKTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignYmFzZTY0RGVjb2RlIGZhaWxlZDogJywgZSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbnVsbDtcclxufTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBEbyBhIGRlZXAtY29weSBvZiBiYXNpYyBKYXZhU2NyaXB0IE9iamVjdHMgb3IgQXJyYXlzLlxyXG4gKi9cclxuZnVuY3Rpb24gZGVlcENvcHkodmFsdWUpIHtcclxuICAgIHJldHVybiBkZWVwRXh0ZW5kKHVuZGVmaW5lZCwgdmFsdWUpO1xyXG59XHJcbi8qKlxyXG4gKiBDb3B5IHByb3BlcnRpZXMgZnJvbSBzb3VyY2UgdG8gdGFyZ2V0IChyZWN1cnNpdmVseSBhbGxvd3MgZXh0ZW5zaW9uXHJcbiAqIG9mIE9iamVjdHMgYW5kIEFycmF5cykuICBTY2FsYXIgdmFsdWVzIGluIHRoZSB0YXJnZXQgYXJlIG92ZXItd3JpdHRlbi5cclxuICogSWYgdGFyZ2V0IGlzIHVuZGVmaW5lZCwgYW4gb2JqZWN0IG9mIHRoZSBhcHByb3ByaWF0ZSB0eXBlIHdpbGwgYmUgY3JlYXRlZFxyXG4gKiAoYW5kIHJldHVybmVkKS5cclxuICpcclxuICogV2UgcmVjdXJzaXZlbHkgY29weSBhbGwgY2hpbGQgcHJvcGVydGllcyBvZiBwbGFpbiBPYmplY3RzIGluIHRoZSBzb3VyY2UtIHNvXHJcbiAqIHRoYXQgbmFtZXNwYWNlLSBsaWtlIGRpY3Rpb25hcmllcyBhcmUgbWVyZ2VkLlxyXG4gKlxyXG4gKiBOb3RlIHRoYXQgdGhlIHRhcmdldCBjYW4gYmUgYSBmdW5jdGlvbiwgaW4gd2hpY2ggY2FzZSB0aGUgcHJvcGVydGllcyBpblxyXG4gKiB0aGUgc291cmNlIE9iamVjdCBhcmUgY29waWVkIG9udG8gaXQgYXMgc3RhdGljIHByb3BlcnRpZXMgb2YgdGhlIEZ1bmN0aW9uLlxyXG4gKi9cclxuZnVuY3Rpb24gZGVlcEV4dGVuZCh0YXJnZXQsIHNvdXJjZSkge1xyXG4gICAgaWYgKCEoc291cmNlIGluc3RhbmNlb2YgT2JqZWN0KSkge1xyXG4gICAgICAgIHJldHVybiBzb3VyY2U7XHJcbiAgICB9XHJcbiAgICBzd2l0Y2ggKHNvdXJjZS5jb25zdHJ1Y3Rvcikge1xyXG4gICAgICAgIGNhc2UgRGF0ZTpcclxuICAgICAgICAgICAgLy8gVHJlYXQgRGF0ZXMgbGlrZSBzY2FsYXJzOyBpZiB0aGUgdGFyZ2V0IGRhdGUgb2JqZWN0IGhhZCBhbnkgY2hpbGRcclxuICAgICAgICAgICAgLy8gcHJvcGVydGllcyAtIHRoZXkgd2lsbCBiZSBsb3N0IVxyXG4gICAgICAgICAgICB2YXIgZGF0ZVZhbHVlID0gc291cmNlO1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IERhdGUoZGF0ZVZhbHVlLmdldFRpbWUoKSk7XHJcbiAgICAgICAgY2FzZSBPYmplY3Q6XHJcbiAgICAgICAgICAgIGlmICh0YXJnZXQgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgdGFyZ2V0ID0ge307XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBBcnJheTpcclxuICAgICAgICAgICAgLy8gQWx3YXlzIGNvcHkgdGhlIGFycmF5IHNvdXJjZSBhbmQgb3ZlcndyaXRlIHRoZSB0YXJnZXQuXHJcbiAgICAgICAgICAgIHRhcmdldCA9IFtdO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAvLyBOb3QgYSBwbGFpbiBPYmplY3QgLSB0cmVhdCBpdCBhcyBhIHNjYWxhci5cclxuICAgICAgICAgICAgcmV0dXJuIHNvdXJjZTtcclxuICAgIH1cclxuICAgIGZvciAodmFyIHByb3AgaW4gc291cmNlKSB7XHJcbiAgICAgICAgaWYgKCFzb3VyY2UuaGFzT3duUHJvcGVydHkocHJvcCkpIHtcclxuICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRhcmdldFtwcm9wXSA9IGRlZXBFeHRlbmQodGFyZ2V0W3Byb3BdLCBzb3VyY2VbcHJvcF0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRhcmdldDtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxudmFyIERlZmVycmVkID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gRGVmZXJyZWQoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB0aGlzLnJlamVjdCA9IGZ1bmN0aW9uICgpIHsgfTtcclxuICAgICAgICB0aGlzLnJlc29sdmUgPSBmdW5jdGlvbiAoKSB7IH07XHJcbiAgICAgICAgdGhpcy5wcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICBfdGhpcy5yZXNvbHZlID0gcmVzb2x2ZTtcclxuICAgICAgICAgICAgX3RoaXMucmVqZWN0ID0gcmVqZWN0O1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBPdXIgQVBJIGludGVybmFscyBhcmUgbm90IHByb21pc2VpZmllZCBhbmQgY2Fubm90IGJlY2F1c2Ugb3VyIGNhbGxiYWNrIEFQSXMgaGF2ZSBzdWJ0bGUgZXhwZWN0YXRpb25zIGFyb3VuZFxyXG4gICAgICogaW52b2tpbmcgcHJvbWlzZXMgaW5saW5lLCB3aGljaCBQcm9taXNlcyBhcmUgZm9yYmlkZGVuIHRvIGRvLiBUaGlzIG1ldGhvZCBhY2NlcHRzIGFuIG9wdGlvbmFsIG5vZGUtc3R5bGUgY2FsbGJhY2tcclxuICAgICAqIGFuZCByZXR1cm5zIGEgbm9kZS1zdHlsZSBjYWxsYmFjayB3aGljaCB3aWxsIHJlc29sdmUgb3IgcmVqZWN0IHRoZSBEZWZlcnJlZCdzIHByb21pc2UuXHJcbiAgICAgKi9cclxuICAgIERlZmVycmVkLnByb3RvdHlwZS53cmFwQ2FsbGJhY2sgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoZXJyb3IsIHZhbHVlKSB7XHJcbiAgICAgICAgICAgIGlmIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMucmVqZWN0KGVycm9yKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLnJlc29sdmUodmFsdWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgICAgIC8vIEF0dGFjaGluZyBub29wIGhhbmRsZXIganVzdCBpbiBjYXNlIGRldmVsb3BlciB3YXNuJ3QgZXhwZWN0aW5nXHJcbiAgICAgICAgICAgICAgICAvLyBwcm9taXNlc1xyXG4gICAgICAgICAgICAgICAgX3RoaXMucHJvbWlzZS5jYXRjaChmdW5jdGlvbiAoKSB7IH0pO1xyXG4gICAgICAgICAgICAgICAgLy8gU29tZSBvZiBvdXIgY2FsbGJhY2tzIGRvbid0IGV4cGVjdCBhIHZhbHVlIGFuZCBvdXIgb3duIHRlc3RzXHJcbiAgICAgICAgICAgICAgICAvLyBhc3NlcnQgdGhhdCB0aGUgcGFyYW1ldGVyIGxlbmd0aCBpcyAxXHJcbiAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2subGVuZ3RoID09PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soZXJyb3IsIHZhbHVlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIERlZmVycmVkO1xyXG59KCkpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFJldHVybnMgbmF2aWdhdG9yLnVzZXJBZ2VudCBzdHJpbmcgb3IgJycgaWYgaXQncyBub3QgZGVmaW5lZC5cclxuICogQHJldHVybiB1c2VyIGFnZW50IHN0cmluZ1xyXG4gKi9cclxuZnVuY3Rpb24gZ2V0VUEoKSB7XHJcbiAgICBpZiAodHlwZW9mIG5hdmlnYXRvciAhPT0gJ3VuZGVmaW5lZCcgJiZcclxuICAgICAgICB0eXBlb2YgbmF2aWdhdG9yWyd1c2VyQWdlbnQnXSA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICByZXR1cm4gbmF2aWdhdG9yWyd1c2VyQWdlbnQnXTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHJldHVybiAnJztcclxuICAgIH1cclxufVxyXG4vKipcclxuICogRGV0ZWN0IENvcmRvdmEgLyBQaG9uZUdhcCAvIElvbmljIGZyYW1ld29ya3Mgb24gYSBtb2JpbGUgZGV2aWNlLlxyXG4gKlxyXG4gKiBEZWxpYmVyYXRlbHkgZG9lcyBub3QgcmVseSBvbiBjaGVja2luZyBgZmlsZTovL2AgVVJMcyAoYXMgdGhpcyBmYWlscyBQaG9uZUdhcFxyXG4gKiBpbiB0aGUgUmlwcGxlIGVtdWxhdG9yKSBub3IgQ29yZG92YSBgb25EZXZpY2VSZWFkeWAsIHdoaWNoIHdvdWxkIG5vcm1hbGx5XHJcbiAqIHdhaXQgZm9yIGEgY2FsbGJhY2suXHJcbiAqL1xyXG5mdW5jdGlvbiBpc01vYmlsZUNvcmRvdmEoKSB7XHJcbiAgICByZXR1cm4gKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmXHJcbiAgICAgICAgLy8gQHRzLWlnbm9yZSBTZXR0aW5nIHVwIGFuIGJyb2FkbHkgYXBwbGljYWJsZSBpbmRleCBzaWduYXR1cmUgZm9yIFdpbmRvd1xyXG4gICAgICAgIC8vIGp1c3QgdG8gZGVhbCB3aXRoIHRoaXMgY2FzZSB3b3VsZCBwcm9iYWJseSBiZSBhIGJhZCBpZGVhLlxyXG4gICAgICAgICEhKHdpbmRvd1snY29yZG92YSddIHx8IHdpbmRvd1sncGhvbmVnYXAnXSB8fCB3aW5kb3dbJ1Bob25lR2FwJ10pICYmXHJcbiAgICAgICAgL2lvc3xpcGhvbmV8aXBvZHxpcGFkfGFuZHJvaWR8YmxhY2tiZXJyeXxpZW1vYmlsZS9pLnRlc3QoZ2V0VUEoKSkpO1xyXG59XHJcbi8qKlxyXG4gKiBEZXRlY3QgTm9kZS5qcy5cclxuICpcclxuICogQHJldHVybiB0cnVlIGlmIE5vZGUuanMgZW52aXJvbm1lbnQgaXMgZGV0ZWN0ZWQuXHJcbiAqL1xyXG4vLyBOb2RlIGRldGVjdGlvbiBsb2dpYyBmcm9tOiBodHRwczovL2dpdGh1Yi5jb20vaWxpYWthbi9kZXRlY3Qtbm9kZS9cclxuZnVuY3Rpb24gaXNOb2RlKCkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICByZXR1cm4gKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChnbG9iYWwucHJvY2VzcykgPT09ICdbb2JqZWN0IHByb2Nlc3NdJyk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogRGV0ZWN0IEJyb3dzZXIgRW52aXJvbm1lbnRcclxuICovXHJcbmZ1bmN0aW9uIGlzQnJvd3NlcigpIHtcclxuICAgIHJldHVybiB0eXBlb2Ygc2VsZiA9PT0gJ29iamVjdCcgJiYgc2VsZi5zZWxmID09PSBzZWxmO1xyXG59XHJcbi8qKlxyXG4gKiBEZXRlY3QgUmVhY3QgTmF0aXZlLlxyXG4gKlxyXG4gKiBAcmV0dXJuIHRydWUgaWYgUmVhY3ROYXRpdmUgZW52aXJvbm1lbnQgaXMgZGV0ZWN0ZWQuXHJcbiAqL1xyXG5mdW5jdGlvbiBpc1JlYWN0TmF0aXZlKCkge1xyXG4gICAgcmV0dXJuICh0eXBlb2YgbmF2aWdhdG9yID09PSAnb2JqZWN0JyAmJiBuYXZpZ2F0b3JbJ3Byb2R1Y3QnXSA9PT0gJ1JlYWN0TmF0aXZlJyk7XHJcbn1cclxuLyoqXHJcbiAqIERldGVjdCB3aGV0aGVyIHRoZSBjdXJyZW50IFNESyBidWlsZCBpcyB0aGUgTm9kZSB2ZXJzaW9uLlxyXG4gKlxyXG4gKiBAcmV0dXJuIHRydWUgaWYgaXQncyB0aGUgTm9kZSBTREsgYnVpbGQuXHJcbiAqL1xyXG5mdW5jdGlvbiBpc05vZGVTZGsoKSB7XHJcbiAgICByZXR1cm4gQ09OU1RBTlRTLk5PREVfQ0xJRU5UID09PSB0cnVlIHx8IENPTlNUQU5UUy5OT0RFX0FETUlOID09PSB0cnVlO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG52YXIgRVJST1JfTkFNRSA9ICdGaXJlYmFzZUVycm9yJztcclxuLy8gQmFzZWQgb24gY29kZSBmcm9tOlxyXG4vLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9FcnJvciNDdXN0b21fRXJyb3JfVHlwZXNcclxudmFyIEZpcmViYXNlRXJyb3IgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICB0c2xpYi5fX2V4dGVuZHMoRmlyZWJhc2VFcnJvciwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIEZpcmViYXNlRXJyb3IoY29kZSwgbWVzc2FnZSkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIG1lc3NhZ2UpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMuY29kZSA9IGNvZGU7XHJcbiAgICAgICAgX3RoaXMubmFtZSA9IEVSUk9SX05BTUU7XHJcbiAgICAgICAgLy8gRml4IEZvciBFUzVcclxuICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vTWljcm9zb2Z0L1R5cGVTY3JpcHQtd2lraS9ibG9iL21hc3Rlci9CcmVha2luZy1DaGFuZ2VzLm1kI2V4dGVuZGluZy1idWlsdC1pbnMtbGlrZS1lcnJvci1hcnJheS1hbmQtbWFwLW1heS1uby1sb25nZXItd29ya1xyXG4gICAgICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZihfdGhpcywgRmlyZWJhc2VFcnJvci5wcm90b3R5cGUpO1xyXG4gICAgICAgIC8vIE1haW50YWlucyBwcm9wZXIgc3RhY2sgdHJhY2UgZm9yIHdoZXJlIG91ciBlcnJvciB3YXMgdGhyb3duLlxyXG4gICAgICAgIC8vIE9ubHkgYXZhaWxhYmxlIG9uIFY4LlxyXG4gICAgICAgIGlmIChFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSkge1xyXG4gICAgICAgICAgICBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZShfdGhpcywgRXJyb3JGYWN0b3J5LnByb3RvdHlwZS5jcmVhdGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gRmlyZWJhc2VFcnJvcjtcclxufShFcnJvcikpO1xyXG52YXIgRXJyb3JGYWN0b3J5ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gRXJyb3JGYWN0b3J5KHNlcnZpY2UsIHNlcnZpY2VOYW1lLCBlcnJvcnMpIHtcclxuICAgICAgICB0aGlzLnNlcnZpY2UgPSBzZXJ2aWNlO1xyXG4gICAgICAgIHRoaXMuc2VydmljZU5hbWUgPSBzZXJ2aWNlTmFtZTtcclxuICAgICAgICB0aGlzLmVycm9ycyA9IGVycm9ycztcclxuICAgIH1cclxuICAgIEVycm9yRmFjdG9yeS5wcm90b3R5cGUuY3JlYXRlID0gZnVuY3Rpb24gKGNvZGUpIHtcclxuICAgICAgICB2YXIgZGF0YSA9IFtdO1xyXG4gICAgICAgIGZvciAodmFyIF9pID0gMTsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIGRhdGFbX2kgLSAxXSA9IGFyZ3VtZW50c1tfaV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBjdXN0b21EYXRhID0gZGF0YVswXSB8fCB7fTtcclxuICAgICAgICB2YXIgZnVsbENvZGUgPSB0aGlzLnNlcnZpY2UgKyBcIi9cIiArIGNvZGU7XHJcbiAgICAgICAgdmFyIHRlbXBsYXRlID0gdGhpcy5lcnJvcnNbY29kZV07XHJcbiAgICAgICAgdmFyIG1lc3NhZ2UgPSB0ZW1wbGF0ZSA/IHJlcGxhY2VUZW1wbGF0ZSh0ZW1wbGF0ZSwgY3VzdG9tRGF0YSkgOiAnRXJyb3InO1xyXG4gICAgICAgIC8vIFNlcnZpY2UgTmFtZTogRXJyb3IgbWVzc2FnZSAoc2VydmljZS9jb2RlKS5cclxuICAgICAgICB2YXIgZnVsbE1lc3NhZ2UgPSB0aGlzLnNlcnZpY2VOYW1lICsgXCI6IFwiICsgbWVzc2FnZSArIFwiIChcIiArIGZ1bGxDb2RlICsgXCIpLlwiO1xyXG4gICAgICAgIHZhciBlcnJvciA9IG5ldyBGaXJlYmFzZUVycm9yKGZ1bGxDb2RlLCBmdWxsTWVzc2FnZSk7XHJcbiAgICAgICAgLy8gS2V5cyB3aXRoIGFuIHVuZGVyc2NvcmUgYXQgdGhlIGVuZCBvZiB0aGVpciBuYW1lIGFyZSBub3QgaW5jbHVkZWQgaW5cclxuICAgICAgICAvLyBlcnJvci5kYXRhIGZvciBzb21lIHJlYXNvbi5cclxuICAgICAgICAvLyBUT0RPOiBSZXBsYWNlIHdpdGggT2JqZWN0LmVudHJpZXMgd2hlbiBsaWIgaXMgdXBkYXRlZCB0byBlczIwMTcuXHJcbiAgICAgICAgZm9yICh2YXIgX2EgPSAwLCBfYiA9IE9iamVjdC5rZXlzKGN1c3RvbURhdGEpOyBfYSA8IF9iLmxlbmd0aDsgX2ErKykge1xyXG4gICAgICAgICAgICB2YXIga2V5ID0gX2JbX2FdO1xyXG4gICAgICAgICAgICBpZiAoa2V5LnNsaWNlKC0xKSAhPT0gJ18nKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoa2V5IGluIGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFwiT3ZlcndyaXRpbmcgRmlyZWJhc2VFcnJvciBiYXNlIGZpZWxkIFxcXCJcIiArIGtleSArIFwiXFxcIiBjYW4gY2F1c2UgdW5leHBlY3RlZCBiZWhhdmlvci5cIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlcnJvcltrZXldID0gY3VzdG9tRGF0YVtrZXldO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBlcnJvcjtcclxuICAgIH07XHJcbiAgICByZXR1cm4gRXJyb3JGYWN0b3J5O1xyXG59KCkpO1xyXG5mdW5jdGlvbiByZXBsYWNlVGVtcGxhdGUodGVtcGxhdGUsIGRhdGEpIHtcclxuICAgIHJldHVybiB0ZW1wbGF0ZS5yZXBsYWNlKFBBVFRFUk4sIGZ1bmN0aW9uIChfLCBrZXkpIHtcclxuICAgICAgICB2YXIgdmFsdWUgPSBkYXRhW2tleV07XHJcbiAgICAgICAgcmV0dXJuIHZhbHVlICE9IG51bGwgPyB2YWx1ZS50b1N0cmluZygpIDogXCI8XCIgKyBrZXkgKyBcIj8+XCI7XHJcbiAgICB9KTtcclxufVxyXG52YXIgUEFUVEVSTiA9IC9cXHtcXCQoW159XSspfS9nO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEV2YWx1YXRlcyBhIEpTT04gc3RyaW5nIGludG8gYSBqYXZhc2NyaXB0IG9iamVjdC5cclxuICpcclxuICogQHBhcmFtIHtzdHJpbmd9IHN0ciBBIHN0cmluZyBjb250YWluaW5nIEpTT04uXHJcbiAqIEByZXR1cm4geyp9IFRoZSBqYXZhc2NyaXB0IG9iamVjdCByZXByZXNlbnRpbmcgdGhlIHNwZWNpZmllZCBKU09OLlxyXG4gKi9cclxuZnVuY3Rpb24ganNvbkV2YWwoc3RyKSB7XHJcbiAgICByZXR1cm4gSlNPTi5wYXJzZShzdHIpO1xyXG59XHJcbi8qKlxyXG4gKiBSZXR1cm5zIEpTT04gcmVwcmVzZW50aW5nIGEgamF2YXNjcmlwdCBvYmplY3QuXHJcbiAqIEBwYXJhbSB7Kn0gZGF0YSBKYXZhc2NyaXB0IG9iamVjdCB0byBiZSBzdHJpbmdpZmllZC5cclxuICogQHJldHVybiB7c3RyaW5nfSBUaGUgSlNPTiBjb250ZW50cyBvZiB0aGUgb2JqZWN0LlxyXG4gKi9cclxuZnVuY3Rpb24gc3RyaW5naWZ5KGRhdGEpIHtcclxuICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShkYXRhKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIERlY29kZXMgYSBGaXJlYmFzZSBhdXRoLiB0b2tlbiBpbnRvIGNvbnN0aXR1ZW50IHBhcnRzLlxyXG4gKlxyXG4gKiBOb3RlczpcclxuICogLSBNYXkgcmV0dXJuIHdpdGggaW52YWxpZCAvIGluY29tcGxldGUgY2xhaW1zIGlmIHRoZXJlJ3Mgbm8gbmF0aXZlIGJhc2U2NCBkZWNvZGluZyBzdXBwb3J0LlxyXG4gKiAtIERvZXNuJ3QgY2hlY2sgaWYgdGhlIHRva2VuIGlzIGFjdHVhbGx5IHZhbGlkLlxyXG4gKi9cclxudmFyIGRlY29kZSA9IGZ1bmN0aW9uICh0b2tlbikge1xyXG4gICAgdmFyIGhlYWRlciA9IHt9LCBjbGFpbXMgPSB7fSwgZGF0YSA9IHt9LCBzaWduYXR1cmUgPSAnJztcclxuICAgIHRyeSB7XHJcbiAgICAgICAgdmFyIHBhcnRzID0gdG9rZW4uc3BsaXQoJy4nKTtcclxuICAgICAgICBoZWFkZXIgPSBqc29uRXZhbChiYXNlNjREZWNvZGUocGFydHNbMF0pIHx8ICcnKTtcclxuICAgICAgICBjbGFpbXMgPSBqc29uRXZhbChiYXNlNjREZWNvZGUocGFydHNbMV0pIHx8ICcnKTtcclxuICAgICAgICBzaWduYXR1cmUgPSBwYXJ0c1syXTtcclxuICAgICAgICBkYXRhID0gY2xhaW1zWydkJ10gfHwge307XHJcbiAgICAgICAgZGVsZXRlIGNsYWltc1snZCddO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHsgfVxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBoZWFkZXI6IGhlYWRlcixcclxuICAgICAgICBjbGFpbXM6IGNsYWltcyxcclxuICAgICAgICBkYXRhOiBkYXRhLFxyXG4gICAgICAgIHNpZ25hdHVyZTogc2lnbmF0dXJlXHJcbiAgICB9O1xyXG59O1xyXG4vKipcclxuICogRGVjb2RlcyBhIEZpcmViYXNlIGF1dGguIHRva2VuIGFuZCBjaGVja3MgdGhlIHZhbGlkaXR5IG9mIGl0cyB0aW1lLWJhc2VkIGNsYWltcy4gV2lsbCByZXR1cm4gdHJ1ZSBpZiB0aGVcclxuICogdG9rZW4gaXMgd2l0aGluIHRoZSB0aW1lIHdpbmRvdyBhdXRob3JpemVkIGJ5IHRoZSAnbmJmJyAobm90LWJlZm9yZSkgYW5kICdpYXQnIChpc3N1ZWQtYXQpIGNsYWltcy5cclxuICpcclxuICogTm90ZXM6XHJcbiAqIC0gTWF5IHJldHVybiBhIGZhbHNlIG5lZ2F0aXZlIGlmIHRoZXJlJ3Mgbm8gbmF0aXZlIGJhc2U2NCBkZWNvZGluZyBzdXBwb3J0LlxyXG4gKiAtIERvZXNuJ3QgY2hlY2sgaWYgdGhlIHRva2VuIGlzIGFjdHVhbGx5IHZhbGlkLlxyXG4gKi9cclxudmFyIGlzVmFsaWRUaW1lc3RhbXAgPSBmdW5jdGlvbiAodG9rZW4pIHtcclxuICAgIHZhciBjbGFpbXMgPSBkZWNvZGUodG9rZW4pLmNsYWltcztcclxuICAgIHZhciBub3cgPSBNYXRoLmZsb29yKG5ldyBEYXRlKCkuZ2V0VGltZSgpIC8gMTAwMCk7XHJcbiAgICB2YXIgdmFsaWRTaW5jZSA9IDAsIHZhbGlkVW50aWwgPSAwO1xyXG4gICAgaWYgKHR5cGVvZiBjbGFpbXMgPT09ICdvYmplY3QnKSB7XHJcbiAgICAgICAgaWYgKGNsYWltcy5oYXNPd25Qcm9wZXJ0eSgnbmJmJykpIHtcclxuICAgICAgICAgICAgdmFsaWRTaW5jZSA9IGNsYWltc1snbmJmJ107XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGNsYWltcy5oYXNPd25Qcm9wZXJ0eSgnaWF0JykpIHtcclxuICAgICAgICAgICAgdmFsaWRTaW5jZSA9IGNsYWltc1snaWF0J107XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChjbGFpbXMuaGFzT3duUHJvcGVydHkoJ2V4cCcpKSB7XHJcbiAgICAgICAgICAgIHZhbGlkVW50aWwgPSBjbGFpbXNbJ2V4cCddO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gdG9rZW4gd2lsbCBleHBpcmUgYWZ0ZXIgMjRoIGJ5IGRlZmF1bHRcclxuICAgICAgICAgICAgdmFsaWRVbnRpbCA9IHZhbGlkU2luY2UgKyA4NjQwMDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gKCEhbm93ICYmXHJcbiAgICAgICAgISF2YWxpZFNpbmNlICYmXHJcbiAgICAgICAgISF2YWxpZFVudGlsICYmXHJcbiAgICAgICAgbm93ID49IHZhbGlkU2luY2UgJiZcclxuICAgICAgICBub3cgPD0gdmFsaWRVbnRpbCk7XHJcbn07XHJcbi8qKlxyXG4gKiBEZWNvZGVzIGEgRmlyZWJhc2UgYXV0aC4gdG9rZW4gYW5kIHJldHVybnMgaXRzIGlzc3VlZCBhdCB0aW1lIGlmIHZhbGlkLCBudWxsIG90aGVyd2lzZS5cclxuICpcclxuICogTm90ZXM6XHJcbiAqIC0gTWF5IHJldHVybiBudWxsIGlmIHRoZXJlJ3Mgbm8gbmF0aXZlIGJhc2U2NCBkZWNvZGluZyBzdXBwb3J0LlxyXG4gKiAtIERvZXNuJ3QgY2hlY2sgaWYgdGhlIHRva2VuIGlzIGFjdHVhbGx5IHZhbGlkLlxyXG4gKi9cclxudmFyIGlzc3VlZEF0VGltZSA9IGZ1bmN0aW9uICh0b2tlbikge1xyXG4gICAgdmFyIGNsYWltcyA9IGRlY29kZSh0b2tlbikuY2xhaW1zO1xyXG4gICAgaWYgKHR5cGVvZiBjbGFpbXMgPT09ICdvYmplY3QnICYmIGNsYWltcy5oYXNPd25Qcm9wZXJ0eSgnaWF0JykpIHtcclxuICAgICAgICByZXR1cm4gY2xhaW1zWydpYXQnXTtcclxuICAgIH1cclxuICAgIHJldHVybiBudWxsO1xyXG59O1xyXG4vKipcclxuICogRGVjb2RlcyBhIEZpcmViYXNlIGF1dGguIHRva2VuIGFuZCBjaGVja3MgdGhlIHZhbGlkaXR5IG9mIGl0cyBmb3JtYXQuIEV4cGVjdHMgYSB2YWxpZCBpc3N1ZWQtYXQgdGltZS5cclxuICpcclxuICogTm90ZXM6XHJcbiAqIC0gTWF5IHJldHVybiBhIGZhbHNlIG5lZ2F0aXZlIGlmIHRoZXJlJ3Mgbm8gbmF0aXZlIGJhc2U2NCBkZWNvZGluZyBzdXBwb3J0LlxyXG4gKiAtIERvZXNuJ3QgY2hlY2sgaWYgdGhlIHRva2VuIGlzIGFjdHVhbGx5IHZhbGlkLlxyXG4gKi9cclxudmFyIGlzVmFsaWRGb3JtYXQgPSBmdW5jdGlvbiAodG9rZW4pIHtcclxuICAgIHZhciBkZWNvZGVkID0gZGVjb2RlKHRva2VuKSwgY2xhaW1zID0gZGVjb2RlZC5jbGFpbXM7XHJcbiAgICByZXR1cm4gISFjbGFpbXMgJiYgdHlwZW9mIGNsYWltcyA9PT0gJ29iamVjdCcgJiYgY2xhaW1zLmhhc093blByb3BlcnR5KCdpYXQnKTtcclxufTtcclxuLyoqXHJcbiAqIEF0dGVtcHRzIHRvIHBlZXIgaW50byBhbiBhdXRoIHRva2VuIGFuZCBkZXRlcm1pbmUgaWYgaXQncyBhbiBhZG1pbiBhdXRoIHRva2VuIGJ5IGxvb2tpbmcgYXQgdGhlIGNsYWltcyBwb3J0aW9uLlxyXG4gKlxyXG4gKiBOb3RlczpcclxuICogLSBNYXkgcmV0dXJuIGEgZmFsc2UgbmVnYXRpdmUgaWYgdGhlcmUncyBubyBuYXRpdmUgYmFzZTY0IGRlY29kaW5nIHN1cHBvcnQuXHJcbiAqIC0gRG9lc24ndCBjaGVjayBpZiB0aGUgdG9rZW4gaXMgYWN0dWFsbHkgdmFsaWQuXHJcbiAqL1xyXG52YXIgaXNBZG1pbiA9IGZ1bmN0aW9uICh0b2tlbikge1xyXG4gICAgdmFyIGNsYWltcyA9IGRlY29kZSh0b2tlbikuY2xhaW1zO1xyXG4gICAgcmV0dXJuIHR5cGVvZiBjbGFpbXMgPT09ICdvYmplY3QnICYmIGNsYWltc1snYWRtaW4nXSA9PT0gdHJ1ZTtcclxufTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIGNvbnRhaW5zKG9iaiwga2V5KSB7XHJcbiAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KTtcclxufVxyXG5mdW5jdGlvbiBzYWZlR2V0KG9iaiwga2V5KSB7XHJcbiAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkge1xyXG4gICAgICAgIHJldHVybiBvYmpba2V5XTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gaXNFbXB0eShvYmopIHtcclxuICAgIGZvciAodmFyIGtleSBpbiBvYmopIHtcclxuICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRydWU7XHJcbn1cclxuZnVuY3Rpb24gbWFwKG9iaiwgZm4sIGNvbnRleHRPYmopIHtcclxuICAgIHZhciByZXMgPSB7fTtcclxuICAgIGZvciAodmFyIGtleSBpbiBvYmopIHtcclxuICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkge1xyXG4gICAgICAgICAgICByZXNba2V5XSA9IGZuLmNhbGwoY29udGV4dE9iaiwgb2JqW2tleV0sIGtleSwgb2JqKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVzO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogUmV0dXJucyBhIHF1ZXJ5c3RyaW5nLWZvcm1hdHRlZCBzdHJpbmcgKGUuZy4gJmFyZz12YWwmYXJnMj12YWwyKSBmcm9tIGFcclxuICogcGFyYW1zIG9iamVjdCAoZS5nLiB7YXJnOiAndmFsJywgYXJnMjogJ3ZhbDInfSlcclxuICogTm90ZTogWW91IG11c3QgcHJlcGVuZCBpdCB3aXRoID8gd2hlbiBhZGRpbmcgaXQgdG8gYSBVUkwuXHJcbiAqL1xyXG5mdW5jdGlvbiBxdWVyeXN0cmluZyhxdWVyeXN0cmluZ1BhcmFtcykge1xyXG4gICAgdmFyIHBhcmFtcyA9IFtdO1xyXG4gICAgdmFyIF9sb29wXzEgPSBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xyXG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xyXG4gICAgICAgICAgICB2YWx1ZS5mb3JFYWNoKGZ1bmN0aW9uIChhcnJheVZhbCkge1xyXG4gICAgICAgICAgICAgICAgcGFyYW1zLnB1c2goZW5jb2RlVVJJQ29tcG9uZW50KGtleSkgKyAnPScgKyBlbmNvZGVVUklDb21wb25lbnQoYXJyYXlWYWwpKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBwYXJhbXMucHVzaChlbmNvZGVVUklDb21wb25lbnQoa2V5KSArICc9JyArIGVuY29kZVVSSUNvbXBvbmVudCh2YWx1ZSkpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gT2JqZWN0LmVudHJpZXMocXVlcnlzdHJpbmdQYXJhbXMpOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgIHZhciBfYiA9IF9hW19pXSwga2V5ID0gX2JbMF0sIHZhbHVlID0gX2JbMV07XHJcbiAgICAgICAgX2xvb3BfMShrZXksIHZhbHVlKTtcclxuICAgIH1cclxuICAgIHJldHVybiBwYXJhbXMubGVuZ3RoID8gJyYnICsgcGFyYW1zLmpvaW4oJyYnKSA6ICcnO1xyXG59XHJcbi8qKlxyXG4gKiBEZWNvZGVzIGEgcXVlcnlzdHJpbmcgKGUuZy4gP2FyZz12YWwmYXJnMj12YWwyKSBpbnRvIGEgcGFyYW1zIG9iamVjdFxyXG4gKiAoZS5nLiB7YXJnOiAndmFsJywgYXJnMjogJ3ZhbDInfSlcclxuICovXHJcbmZ1bmN0aW9uIHF1ZXJ5c3RyaW5nRGVjb2RlKHF1ZXJ5c3RyaW5nKSB7XHJcbiAgICB2YXIgb2JqID0ge307XHJcbiAgICB2YXIgdG9rZW5zID0gcXVlcnlzdHJpbmcucmVwbGFjZSgvXlxcPy8sICcnKS5zcGxpdCgnJicpO1xyXG4gICAgdG9rZW5zLmZvckVhY2goZnVuY3Rpb24gKHRva2VuKSB7XHJcbiAgICAgICAgaWYgKHRva2VuKSB7XHJcbiAgICAgICAgICAgIHZhciBrZXkgPSB0b2tlbi5zcGxpdCgnPScpO1xyXG4gICAgICAgICAgICBvYmpba2V5WzBdXSA9IGtleVsxXTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBvYmo7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBAZmlsZW92ZXJ2aWV3IFNIQS0xIGNyeXB0b2dyYXBoaWMgaGFzaC5cclxuICogVmFyaWFibGUgbmFtZXMgZm9sbG93IHRoZSBub3RhdGlvbiBpbiBGSVBTIFBVQiAxODAtMzpcclxuICogaHR0cDovL2NzcmMubmlzdC5nb3YvcHVibGljYXRpb25zL2ZpcHMvZmlwczE4MC0zL2ZpcHMxODAtM19maW5hbC5wZGYuXHJcbiAqXHJcbiAqIFVzYWdlOlxyXG4gKiAgIHZhciBzaGExID0gbmV3IHNoYTEoKTtcclxuICogICBzaGExLnVwZGF0ZShieXRlcyk7XHJcbiAqICAgdmFyIGhhc2ggPSBzaGExLmRpZ2VzdCgpO1xyXG4gKlxyXG4gKiBQZXJmb3JtYW5jZTpcclxuICogICBDaHJvbWUgMjM6ICAgfjQwMCBNYml0L3NcclxuICogICBGaXJlZm94IDE2OiAgfjI1MCBNYml0L3NcclxuICpcclxuICovXHJcbi8qKlxyXG4gKiBTSEEtMSBjcnlwdG9ncmFwaGljIGhhc2ggY29uc3RydWN0b3IuXHJcbiAqXHJcbiAqIFRoZSBwcm9wZXJ0aWVzIGRlY2xhcmVkIGhlcmUgYXJlIGRpc2N1c3NlZCBpbiB0aGUgYWJvdmUgYWxnb3JpdGhtIGRvY3VtZW50LlxyXG4gKiBAY29uc3RydWN0b3JcclxuICogQGZpbmFsXHJcbiAqIEBzdHJ1Y3RcclxuICovXHJcbnZhciBTaGExID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gU2hhMSgpIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBIb2xkcyB0aGUgcHJldmlvdXMgdmFsdWVzIG9mIGFjY3VtdWxhdGVkIHZhcmlhYmxlcyBhLWUgaW4gdGhlIGNvbXByZXNzX1xyXG4gICAgICAgICAqIGZ1bmN0aW9uLlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5jaGFpbl8gPSBbXTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBBIGJ1ZmZlciBob2xkaW5nIHRoZSBwYXJ0aWFsbHkgY29tcHV0ZWQgaGFzaCByZXN1bHQuXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLmJ1Zl8gPSBbXTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBBbiBhcnJheSBvZiA4MCBieXRlcywgZWFjaCBhIHBhcnQgb2YgdGhlIG1lc3NhZ2UgdG8gYmUgaGFzaGVkLiAgUmVmZXJyZWQgdG9cclxuICAgICAgICAgKiBhcyB0aGUgbWVzc2FnZSBzY2hlZHVsZSBpbiB0aGUgZG9jcy5cclxuICAgICAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuV18gPSBbXTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDb250YWlucyBkYXRhIG5lZWRlZCB0byBwYWQgbWVzc2FnZXMgbGVzcyB0aGFuIDY0IGJ5dGVzLlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5wYWRfID0gW107XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQHByaXZhdGUge251bWJlcn1cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLmluYnVmXyA9IDA7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQHByaXZhdGUge251bWJlcn1cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLnRvdGFsXyA9IDA7XHJcbiAgICAgICAgdGhpcy5ibG9ja1NpemUgPSA1MTIgLyA4O1xyXG4gICAgICAgIHRoaXMucGFkX1swXSA9IDEyODtcclxuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IHRoaXMuYmxvY2tTaXplOyArK2kpIHtcclxuICAgICAgICAgICAgdGhpcy5wYWRfW2ldID0gMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5yZXNldCgpO1xyXG4gICAgfVxyXG4gICAgU2hhMS5wcm90b3R5cGUucmVzZXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5jaGFpbl9bMF0gPSAweDY3NDUyMzAxO1xyXG4gICAgICAgIHRoaXMuY2hhaW5fWzFdID0gMHhlZmNkYWI4OTtcclxuICAgICAgICB0aGlzLmNoYWluX1syXSA9IDB4OThiYWRjZmU7XHJcbiAgICAgICAgdGhpcy5jaGFpbl9bM10gPSAweDEwMzI1NDc2O1xyXG4gICAgICAgIHRoaXMuY2hhaW5fWzRdID0gMHhjM2QyZTFmMDtcclxuICAgICAgICB0aGlzLmluYnVmXyA9IDA7XHJcbiAgICAgICAgdGhpcy50b3RhbF8gPSAwO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogSW50ZXJuYWwgY29tcHJlc3MgaGVscGVyIGZ1bmN0aW9uLlxyXG4gICAgICogQHBhcmFtIGJ1ZiBCbG9jayB0byBjb21wcmVzcy5cclxuICAgICAqIEBwYXJhbSBvZmZzZXQgT2Zmc2V0IG9mIHRoZSBibG9jayBpbiB0aGUgYnVmZmVyLlxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgU2hhMS5wcm90b3R5cGUuY29tcHJlc3NfID0gZnVuY3Rpb24gKGJ1Ziwgb2Zmc2V0KSB7XHJcbiAgICAgICAgaWYgKCFvZmZzZXQpIHtcclxuICAgICAgICAgICAgb2Zmc2V0ID0gMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIFcgPSB0aGlzLldfO1xyXG4gICAgICAgIC8vIGdldCAxNiBiaWcgZW5kaWFuIHdvcmRzXHJcbiAgICAgICAgaWYgKHR5cGVvZiBidWYgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMTY7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgLy8gVE9ETyh1c2VyKTogW2J1ZyA4MTQwMTIyXSBSZWNlbnQgdmVyc2lvbnMgb2YgU2FmYXJpIGZvciBNYWMgT1MgYW5kIGlPU1xyXG4gICAgICAgICAgICAgICAgLy8gaGF2ZSBhIGJ1ZyB0aGF0IHR1cm5zIHRoZSBwb3N0LWluY3JlbWVudCArKyBvcGVyYXRvciBpbnRvIHByZS1pbmNyZW1lbnRcclxuICAgICAgICAgICAgICAgIC8vIGR1cmluZyBKSVQgY29tcGlsYXRpb24uICBXZSBoYXZlIGNvZGUgdGhhdCBkZXBlbmRzIGhlYXZpbHkgb24gU0hBLTEgZm9yXHJcbiAgICAgICAgICAgICAgICAvLyBjb3JyZWN0bmVzcyBhbmQgd2hpY2ggaXMgYWZmZWN0ZWQgYnkgdGhpcyBidWcsIHNvIEkndmUgcmVtb3ZlZCBhbGwgdXNlc1xyXG4gICAgICAgICAgICAgICAgLy8gb2YgcG9zdC1pbmNyZW1lbnQgKysgaW4gd2hpY2ggdGhlIHJlc3VsdCB2YWx1ZSBpcyB1c2VkLiAgV2UgY2FuIHJldmVydFxyXG4gICAgICAgICAgICAgICAgLy8gdGhpcyBjaGFuZ2Ugb25jZSB0aGUgU2FmYXJpIGJ1Z1xyXG4gICAgICAgICAgICAgICAgLy8gKGh0dHBzOi8vYnVncy53ZWJraXQub3JnL3Nob3dfYnVnLmNnaT9pZD0xMDkwMzYpIGhhcyBiZWVuIGZpeGVkIGFuZFxyXG4gICAgICAgICAgICAgICAgLy8gbW9zdCBjbGllbnRzIGhhdmUgYmVlbiB1cGRhdGVkLlxyXG4gICAgICAgICAgICAgICAgV1tpXSA9XHJcbiAgICAgICAgICAgICAgICAgICAgKGJ1Zi5jaGFyQ29kZUF0KG9mZnNldCkgPDwgMjQpIHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgKGJ1Zi5jaGFyQ29kZUF0KG9mZnNldCArIDEpIDw8IDE2KSB8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIChidWYuY2hhckNvZGVBdChvZmZzZXQgKyAyKSA8PCA4KSB8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1Zi5jaGFyQ29kZUF0KG9mZnNldCArIDMpO1xyXG4gICAgICAgICAgICAgICAgb2Zmc2V0ICs9IDQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMTY7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgV1tpXSA9XHJcbiAgICAgICAgICAgICAgICAgICAgKGJ1ZltvZmZzZXRdIDw8IDI0KSB8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIChidWZbb2Zmc2V0ICsgMV0gPDwgMTYpIHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgKGJ1ZltvZmZzZXQgKyAyXSA8PCA4KSB8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1ZltvZmZzZXQgKyAzXTtcclxuICAgICAgICAgICAgICAgIG9mZnNldCArPSA0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGV4cGFuZCB0byA4MCB3b3Jkc1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAxNjsgaSA8IDgwOyBpKyspIHtcclxuICAgICAgICAgICAgdmFyIHQgPSBXW2kgLSAzXSBeIFdbaSAtIDhdIF4gV1tpIC0gMTRdIF4gV1tpIC0gMTZdO1xyXG4gICAgICAgICAgICBXW2ldID0gKCh0IDw8IDEpIHwgKHQgPj4+IDMxKSkgJiAweGZmZmZmZmZmO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgYSA9IHRoaXMuY2hhaW5fWzBdO1xyXG4gICAgICAgIHZhciBiID0gdGhpcy5jaGFpbl9bMV07XHJcbiAgICAgICAgdmFyIGMgPSB0aGlzLmNoYWluX1syXTtcclxuICAgICAgICB2YXIgZCA9IHRoaXMuY2hhaW5fWzNdO1xyXG4gICAgICAgIHZhciBlID0gdGhpcy5jaGFpbl9bNF07XHJcbiAgICAgICAgdmFyIGYsIGs7XHJcbiAgICAgICAgLy8gVE9ETyh1c2VyKTogVHJ5IHRvIHVucm9sbCB0aGlzIGxvb3AgdG8gc3BlZWQgdXAgdGhlIGNvbXB1dGF0aW9uLlxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgODA7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAoaSA8IDQwKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaSA8IDIwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZiA9IGQgXiAoYiAmIChjIF4gZCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGsgPSAweDVhODI3OTk5O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZiA9IGIgXiBjIF4gZDtcclxuICAgICAgICAgICAgICAgICAgICBrID0gMHg2ZWQ5ZWJhMTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmIChpIDwgNjApIHtcclxuICAgICAgICAgICAgICAgICAgICBmID0gKGIgJiBjKSB8IChkICYgKGIgfCBjKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgayA9IDB4OGYxYmJjZGM7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBmID0gYiBeIGMgXiBkO1xyXG4gICAgICAgICAgICAgICAgICAgIGsgPSAweGNhNjJjMWQ2O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciB0ID0gKCgoYSA8PCA1KSB8IChhID4+PiAyNykpICsgZiArIGUgKyBrICsgV1tpXSkgJiAweGZmZmZmZmZmO1xyXG4gICAgICAgICAgICBlID0gZDtcclxuICAgICAgICAgICAgZCA9IGM7XHJcbiAgICAgICAgICAgIGMgPSAoKGIgPDwgMzApIHwgKGIgPj4+IDIpKSAmIDB4ZmZmZmZmZmY7XHJcbiAgICAgICAgICAgIGIgPSBhO1xyXG4gICAgICAgICAgICBhID0gdDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jaGFpbl9bMF0gPSAodGhpcy5jaGFpbl9bMF0gKyBhKSAmIDB4ZmZmZmZmZmY7XHJcbiAgICAgICAgdGhpcy5jaGFpbl9bMV0gPSAodGhpcy5jaGFpbl9bMV0gKyBiKSAmIDB4ZmZmZmZmZmY7XHJcbiAgICAgICAgdGhpcy5jaGFpbl9bMl0gPSAodGhpcy5jaGFpbl9bMl0gKyBjKSAmIDB4ZmZmZmZmZmY7XHJcbiAgICAgICAgdGhpcy5jaGFpbl9bM10gPSAodGhpcy5jaGFpbl9bM10gKyBkKSAmIDB4ZmZmZmZmZmY7XHJcbiAgICAgICAgdGhpcy5jaGFpbl9bNF0gPSAodGhpcy5jaGFpbl9bNF0gKyBlKSAmIDB4ZmZmZmZmZmY7XHJcbiAgICB9O1xyXG4gICAgU2hhMS5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKGJ5dGVzLCBsZW5ndGgpIHtcclxuICAgICAgICAvLyBUT0RPKGpvaG5sZW56KTogdGlnaHRlbiB0aGUgZnVuY3Rpb24gc2lnbmF0dXJlIGFuZCByZW1vdmUgdGhpcyBjaGVja1xyXG4gICAgICAgIGlmIChieXRlcyA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGxlbmd0aCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGxlbmd0aCA9IGJ5dGVzLmxlbmd0aDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGxlbmd0aE1pbnVzQmxvY2sgPSBsZW5ndGggLSB0aGlzLmJsb2NrU2l6ZTtcclxuICAgICAgICB2YXIgbiA9IDA7XHJcbiAgICAgICAgLy8gVXNpbmcgbG9jYWwgaW5zdGVhZCBvZiBtZW1iZXIgdmFyaWFibGVzIGdpdmVzIH41JSBzcGVlZHVwIG9uIEZpcmVmb3ggMTYuXHJcbiAgICAgICAgdmFyIGJ1ZiA9IHRoaXMuYnVmXztcclxuICAgICAgICB2YXIgaW5idWYgPSB0aGlzLmluYnVmXztcclxuICAgICAgICAvLyBUaGUgb3V0ZXIgd2hpbGUgbG9vcCBzaG91bGQgZXhlY3V0ZSBhdCBtb3N0IHR3aWNlLlxyXG4gICAgICAgIHdoaWxlIChuIDwgbGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIC8vIFdoZW4gd2UgaGF2ZSBubyBkYXRhIGluIHRoZSBibG9jayB0byB0b3AgdXAsIHdlIGNhbiBkaXJlY3RseSBwcm9jZXNzIHRoZVxyXG4gICAgICAgICAgICAvLyBpbnB1dCBidWZmZXIgKGFzc3VtaW5nIGl0IGNvbnRhaW5zIHN1ZmZpY2llbnQgZGF0YSkuIFRoaXMgZ2l2ZXMgfjI1JVxyXG4gICAgICAgICAgICAvLyBzcGVlZHVwIG9uIENocm9tZSAyMyBhbmQgfjE1JSBzcGVlZHVwIG9uIEZpcmVmb3ggMTYsIGJ1dCByZXF1aXJlcyB0aGF0XHJcbiAgICAgICAgICAgIC8vIHRoZSBkYXRhIGlzIHByb3ZpZGVkIGluIGxhcmdlIGNodW5rcyAob3IgaW4gbXVsdGlwbGVzIG9mIDY0IGJ5dGVzKS5cclxuICAgICAgICAgICAgaWYgKGluYnVmID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAobiA8PSBsZW5ndGhNaW51c0Jsb2NrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21wcmVzc18oYnl0ZXMsIG4pO1xyXG4gICAgICAgICAgICAgICAgICAgIG4gKz0gdGhpcy5ibG9ja1NpemU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBieXRlcyA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgICAgIHdoaWxlIChuIDwgbGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnVmW2luYnVmXSA9IGJ5dGVzLmNoYXJDb2RlQXQobik7XHJcbiAgICAgICAgICAgICAgICAgICAgKytpbmJ1ZjtcclxuICAgICAgICAgICAgICAgICAgICArK247XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGluYnVmID09PSB0aGlzLmJsb2NrU2l6ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbXByZXNzXyhidWYpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmJ1ZiA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEp1bXAgdG8gdGhlIG91dGVyIGxvb3Agc28gd2UgdXNlIHRoZSBmdWxsLWJsb2NrIG9wdGltaXphdGlvbi5cclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgd2hpbGUgKG4gPCBsZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICBidWZbaW5idWZdID0gYnl0ZXNbbl07XHJcbiAgICAgICAgICAgICAgICAgICAgKytpbmJ1ZjtcclxuICAgICAgICAgICAgICAgICAgICArK247XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGluYnVmID09PSB0aGlzLmJsb2NrU2l6ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbXByZXNzXyhidWYpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmJ1ZiA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEp1bXAgdG8gdGhlIG91dGVyIGxvb3Agc28gd2UgdXNlIHRoZSBmdWxsLWJsb2NrIG9wdGltaXphdGlvbi5cclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuaW5idWZfID0gaW5idWY7XHJcbiAgICAgICAgdGhpcy50b3RhbF8gKz0gbGVuZ3RoO1xyXG4gICAgfTtcclxuICAgIC8qKiBAb3ZlcnJpZGUgKi9cclxuICAgIFNoYTEucHJvdG90eXBlLmRpZ2VzdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgZGlnZXN0ID0gW107XHJcbiAgICAgICAgdmFyIHRvdGFsQml0cyA9IHRoaXMudG90YWxfICogODtcclxuICAgICAgICAvLyBBZGQgcGFkIDB4ODAgMHgwMCouXHJcbiAgICAgICAgaWYgKHRoaXMuaW5idWZfIDwgNTYpIHtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGUodGhpcy5wYWRfLCA1NiAtIHRoaXMuaW5idWZfKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlKHRoaXMucGFkXywgdGhpcy5ibG9ja1NpemUgLSAodGhpcy5pbmJ1Zl8gLSA1NikpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBBZGQgIyBiaXRzLlxyXG4gICAgICAgIGZvciAodmFyIGkgPSB0aGlzLmJsb2NrU2l6ZSAtIDE7IGkgPj0gNTY7IGktLSkge1xyXG4gICAgICAgICAgICB0aGlzLmJ1Zl9baV0gPSB0b3RhbEJpdHMgJiAyNTU7XHJcbiAgICAgICAgICAgIHRvdGFsQml0cyAvPSAyNTY7IC8vIERvbid0IHVzZSBiaXQtc2hpZnRpbmcgaGVyZSFcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jb21wcmVzc18odGhpcy5idWZfKTtcclxuICAgICAgICB2YXIgbiA9IDA7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCA1OyBpKyspIHtcclxuICAgICAgICAgICAgZm9yICh2YXIgaiA9IDI0OyBqID49IDA7IGogLT0gOCkge1xyXG4gICAgICAgICAgICAgICAgZGlnZXN0W25dID0gKHRoaXMuY2hhaW5fW2ldID4+IGopICYgMjU1O1xyXG4gICAgICAgICAgICAgICAgKytuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBkaWdlc3Q7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFNoYTE7XHJcbn0oKSk7XG5cbi8qKlxyXG4gKiBIZWxwZXIgdG8gbWFrZSBhIFN1YnNjcmliZSBmdW5jdGlvbiAoanVzdCBsaWtlIFByb21pc2UgaGVscHMgbWFrZSBhXHJcbiAqIFRoZW5hYmxlKS5cclxuICpcclxuICogQHBhcmFtIGV4ZWN1dG9yIEZ1bmN0aW9uIHdoaWNoIGNhbiBtYWtlIGNhbGxzIHRvIGEgc2luZ2xlIE9ic2VydmVyXHJcbiAqICAgICBhcyBhIHByb3h5LlxyXG4gKiBAcGFyYW0gb25Ob09ic2VydmVycyBDYWxsYmFjayB3aGVuIGNvdW50IG9mIE9ic2VydmVycyBnb2VzIHRvIHplcm8uXHJcbiAqL1xyXG5mdW5jdGlvbiBjcmVhdGVTdWJzY3JpYmUoZXhlY3V0b3IsIG9uTm9PYnNlcnZlcnMpIHtcclxuICAgIHZhciBwcm94eSA9IG5ldyBPYnNlcnZlclByb3h5KGV4ZWN1dG9yLCBvbk5vT2JzZXJ2ZXJzKTtcclxuICAgIHJldHVybiBwcm94eS5zdWJzY3JpYmUuYmluZChwcm94eSk7XHJcbn1cclxuLyoqXHJcbiAqIEltcGxlbWVudCBmYW4tb3V0IGZvciBhbnkgbnVtYmVyIG9mIE9ic2VydmVycyBhdHRhY2hlZCB2aWEgYSBzdWJzY3JpYmVcclxuICogZnVuY3Rpb24uXHJcbiAqL1xyXG52YXIgT2JzZXJ2ZXJQcm94eSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIGV4ZWN1dG9yIEZ1bmN0aW9uIHdoaWNoIGNhbiBtYWtlIGNhbGxzIHRvIGEgc2luZ2xlIE9ic2VydmVyXHJcbiAgICAgKiAgICAgYXMgYSBwcm94eS5cclxuICAgICAqIEBwYXJhbSBvbk5vT2JzZXJ2ZXJzIENhbGxiYWNrIHdoZW4gY291bnQgb2YgT2JzZXJ2ZXJzIGdvZXMgdG8gemVyby5cclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gT2JzZXJ2ZXJQcm94eShleGVjdXRvciwgb25Ob09ic2VydmVycykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5vYnNlcnZlcnMgPSBbXTtcclxuICAgICAgICB0aGlzLnVuc3Vic2NyaWJlcyA9IFtdO1xyXG4gICAgICAgIHRoaXMub2JzZXJ2ZXJDb3VudCA9IDA7XHJcbiAgICAgICAgLy8gTWljcm8tdGFzayBzY2hlZHVsaW5nIGJ5IGNhbGxpbmcgdGFzay50aGVuKCkuXHJcbiAgICAgICAgdGhpcy50YXNrID0gUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICAgICAgdGhpcy5maW5hbGl6ZWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLm9uTm9PYnNlcnZlcnMgPSBvbk5vT2JzZXJ2ZXJzO1xyXG4gICAgICAgIC8vIENhbGwgdGhlIGV4ZWN1dG9yIGFzeW5jaHJvbm91c2x5IHNvIHN1YnNjcmliZXJzIHRoYXQgYXJlIGNhbGxlZFxyXG4gICAgICAgIC8vIHN5bmNocm9ub3VzbHkgYWZ0ZXIgdGhlIGNyZWF0aW9uIG9mIHRoZSBzdWJzY3JpYmUgZnVuY3Rpb25cclxuICAgICAgICAvLyBjYW4gc3RpbGwgcmVjZWl2ZSB0aGUgdmVyeSBmaXJzdCB2YWx1ZSBnZW5lcmF0ZWQgaW4gdGhlIGV4ZWN1dG9yLlxyXG4gICAgICAgIHRoaXMudGFza1xyXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGV4ZWN1dG9yKF90aGlzKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgX3RoaXMuZXJyb3IoZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBPYnNlcnZlclByb3h5LnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgICAgdGhpcy5mb3JFYWNoT2JzZXJ2ZXIoZnVuY3Rpb24gKG9ic2VydmVyKSB7XHJcbiAgICAgICAgICAgIG9ic2VydmVyLm5leHQodmFsdWUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIE9ic2VydmVyUHJveHkucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICAgICAgdGhpcy5mb3JFYWNoT2JzZXJ2ZXIoZnVuY3Rpb24gKG9ic2VydmVyKSB7XHJcbiAgICAgICAgICAgIG9ic2VydmVyLmVycm9yKGVycm9yKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmNsb3NlKGVycm9yKTtcclxuICAgIH07XHJcbiAgICBPYnNlcnZlclByb3h5LnByb3RvdHlwZS5jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmZvckVhY2hPYnNlcnZlcihmdW5jdGlvbiAob2JzZXJ2ZXIpIHtcclxuICAgICAgICAgICAgb2JzZXJ2ZXIuY29tcGxldGUoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBTdWJzY3JpYmUgZnVuY3Rpb24gdGhhdCBjYW4gYmUgdXNlZCB0byBhZGQgYW4gT2JzZXJ2ZXIgdG8gdGhlIGZhbi1vdXQgbGlzdC5cclxuICAgICAqXHJcbiAgICAgKiAtIFdlIHJlcXVpcmUgdGhhdCBubyBldmVudCBpcyBzZW50IHRvIGEgc3Vic2NyaWJlciBzeWNocm9ub3VzbHkgdG8gdGhlaXJcclxuICAgICAqICAgY2FsbCB0byBzdWJzY3JpYmUoKS5cclxuICAgICAqL1xyXG4gICAgT2JzZXJ2ZXJQcm94eS5wcm90b3R5cGUuc3Vic2NyaWJlID0gZnVuY3Rpb24gKG5leHRPck9ic2VydmVyLCBlcnJvciwgY29tcGxldGUpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhciBvYnNlcnZlcjtcclxuICAgICAgICBpZiAobmV4dE9yT2JzZXJ2ZXIgPT09IHVuZGVmaW5lZCAmJlxyXG4gICAgICAgICAgICBlcnJvciA9PT0gdW5kZWZpbmVkICYmXHJcbiAgICAgICAgICAgIGNvbXBsZXRlID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIE9ic2VydmVyLicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBBc3NlbWJsZSBhbiBPYnNlcnZlciBvYmplY3Qgd2hlbiBwYXNzZWQgYXMgY2FsbGJhY2sgZnVuY3Rpb25zLlxyXG4gICAgICAgIGlmIChpbXBsZW1lbnRzQW55TWV0aG9kcyhuZXh0T3JPYnNlcnZlciwgW1xyXG4gICAgICAgICAgICAnbmV4dCcsXHJcbiAgICAgICAgICAgICdlcnJvcicsXHJcbiAgICAgICAgICAgICdjb21wbGV0ZSdcclxuICAgICAgICBdKSkge1xyXG4gICAgICAgICAgICBvYnNlcnZlciA9IG5leHRPck9ic2VydmVyO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgb2JzZXJ2ZXIgPSB7XHJcbiAgICAgICAgICAgICAgICBuZXh0OiBuZXh0T3JPYnNlcnZlcixcclxuICAgICAgICAgICAgICAgIGVycm9yOiBlcnJvcixcclxuICAgICAgICAgICAgICAgIGNvbXBsZXRlOiBjb21wbGV0ZVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAob2JzZXJ2ZXIubmV4dCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIG9ic2VydmVyLm5leHQgPSBub29wO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAob2JzZXJ2ZXIuZXJyb3IgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBvYnNlcnZlci5lcnJvciA9IG5vb3A7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChvYnNlcnZlci5jb21wbGV0ZSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIG9ic2VydmVyLmNvbXBsZXRlID0gbm9vcDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIHVuc3ViID0gdGhpcy51bnN1YnNjcmliZU9uZS5iaW5kKHRoaXMsIHRoaXMub2JzZXJ2ZXJzLmxlbmd0aCk7XHJcbiAgICAgICAgLy8gQXR0ZW1wdCB0byBzdWJzY3JpYmUgdG8gYSB0ZXJtaW5hdGVkIE9ic2VydmFibGUgLSB3ZVxyXG4gICAgICAgIC8vIGp1c3QgcmVzcG9uZCB0byB0aGUgT2JzZXJ2ZXIgd2l0aCB0aGUgZmluYWwgZXJyb3Igb3IgY29tcGxldGVcclxuICAgICAgICAvLyBldmVudC5cclxuICAgICAgICBpZiAodGhpcy5maW5hbGl6ZWQpIHtcclxuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1mbG9hdGluZy1wcm9taXNlc1xyXG4gICAgICAgICAgICB0aGlzLnRhc2sudGhlbihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChfdGhpcy5maW5hbEVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9ic2VydmVyLmVycm9yKF90aGlzLmZpbmFsRXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2JzZXJ2ZXIuY29tcGxldGUoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIG5vdGhpbmdcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMub2JzZXJ2ZXJzLnB1c2gob2JzZXJ2ZXIpO1xyXG4gICAgICAgIHJldHVybiB1bnN1YjtcclxuICAgIH07XHJcbiAgICAvLyBVbnN1YnNjcmliZSBpcyBzeW5jaHJvbm91cyAtIHdlIGd1YXJhbnRlZSB0aGF0IG5vIGV2ZW50cyBhcmUgc2VudCB0b1xyXG4gICAgLy8gYW55IHVuc3Vic2NyaWJlZCBPYnNlcnZlci5cclxuICAgIE9ic2VydmVyUHJveHkucHJvdG90eXBlLnVuc3Vic2NyaWJlT25lID0gZnVuY3Rpb24gKGkpIHtcclxuICAgICAgICBpZiAodGhpcy5vYnNlcnZlcnMgPT09IHVuZGVmaW5lZCB8fCB0aGlzLm9ic2VydmVyc1tpXSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZGVsZXRlIHRoaXMub2JzZXJ2ZXJzW2ldO1xyXG4gICAgICAgIHRoaXMub2JzZXJ2ZXJDb3VudCAtPSAxO1xyXG4gICAgICAgIGlmICh0aGlzLm9ic2VydmVyQ291bnQgPT09IDAgJiYgdGhpcy5vbk5vT2JzZXJ2ZXJzICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5vbk5vT2JzZXJ2ZXJzKHRoaXMpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBPYnNlcnZlclByb3h5LnByb3RvdHlwZS5mb3JFYWNoT2JzZXJ2ZXIgPSBmdW5jdGlvbiAoZm4pIHtcclxuICAgICAgICBpZiAodGhpcy5maW5hbGl6ZWQpIHtcclxuICAgICAgICAgICAgLy8gQWxyZWFkeSBjbG9zZWQgYnkgcHJldmlvdXMgZXZlbnQuLi4uanVzdCBlYXQgdGhlIGFkZGl0aW9uYWwgdmFsdWVzLlxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFNpbmNlIHNlbmRPbmUgY2FsbHMgYXN5bmNocm9ub3VzbHkgLSB0aGVyZSBpcyBubyBjaGFuY2UgdGhhdFxyXG4gICAgICAgIC8vIHRoaXMub2JzZXJ2ZXJzIHdpbGwgYmVjb21lIHVuZGVmaW5lZC5cclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMub2JzZXJ2ZXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VuZE9uZShpLCBmbik7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8vIENhbGwgdGhlIE9ic2VydmVyIHZpYSBvbmUgb2YgaXQncyBjYWxsYmFjayBmdW5jdGlvbi4gV2UgYXJlIGNhcmVmdWwgdG9cclxuICAgIC8vIGNvbmZpcm0gdGhhdCB0aGUgb2JzZXJ2ZSBoYXMgbm90IGJlZW4gdW5zdWJzY3JpYmVkIHNpbmNlIHRoaXMgYXN5bmNocm9ub3VzXHJcbiAgICAvLyBmdW5jdGlvbiBoYWQgYmVlbiBxdWV1ZWQuXHJcbiAgICBPYnNlcnZlclByb3h5LnByb3RvdHlwZS5zZW5kT25lID0gZnVuY3Rpb24gKGksIGZuKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICAvLyBFeGVjdXRlIHRoZSBjYWxsYmFjayBhc3luY2hyb25vdXNseVxyXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZmxvYXRpbmctcHJvbWlzZXNcclxuICAgICAgICB0aGlzLnRhc2sudGhlbihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmIChfdGhpcy5vYnNlcnZlcnMgIT09IHVuZGVmaW5lZCAmJiBfdGhpcy5vYnNlcnZlcnNbaV0gIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBmbihfdGhpcy5vYnNlcnZlcnNbaV0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBJZ25vcmUgZXhjZXB0aW9ucyByYWlzZWQgaW4gT2JzZXJ2ZXJzIG9yIG1pc3NpbmcgbWV0aG9kcyBvZiBhblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIE9ic2VydmVyLlxyXG4gICAgICAgICAgICAgICAgICAgIC8vIExvZyBlcnJvciB0byBjb25zb2xlLiBiLzMxNDA0ODA2XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBjb25zb2xlICE9PSAndW5kZWZpbmVkJyAmJiBjb25zb2xlLmVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgT2JzZXJ2ZXJQcm94eS5wcm90b3R5cGUuY2xvc2UgPSBmdW5jdGlvbiAoZXJyKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBpZiAodGhpcy5maW5hbGl6ZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmZpbmFsaXplZCA9IHRydWU7XHJcbiAgICAgICAgaWYgKGVyciAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZmluYWxFcnJvciA9IGVycjtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gUHJveHkgaXMgbm8gbG9uZ2VyIG5lZWRlZCAtIGdhcmJhZ2UgY29sbGVjdCByZWZlcmVuY2VzXHJcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1mbG9hdGluZy1wcm9taXNlc1xyXG4gICAgICAgIHRoaXMudGFzay50aGVuKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgX3RoaXMub2JzZXJ2ZXJzID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICBfdGhpcy5vbk5vT2JzZXJ2ZXJzID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBPYnNlcnZlclByb3h5O1xyXG59KCkpO1xyXG4vKiogVHVybiBzeW5jaHJvbm91cyBmdW5jdGlvbiBpbnRvIG9uZSBjYWxsZWQgYXN5bmNocm9ub3VzbHkuICovXHJcbmZ1bmN0aW9uIGFzeW5jKGZuLCBvbkVycm9yKSB7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBhcmdzID0gW107XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xyXG4gICAgICAgIH1cclxuICAgICAgICBQcm9taXNlLnJlc29sdmUodHJ1ZSlcclxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBmbi5hcHBseSh2b2lkIDAsIGFyZ3MpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgaWYgKG9uRXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIG9uRXJyb3IoZXJyb3IpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG59XHJcbi8qKlxyXG4gKiBSZXR1cm4gdHJ1ZSBpZiB0aGUgb2JqZWN0IHBhc3NlZCBpbiBpbXBsZW1lbnRzIGFueSBvZiB0aGUgbmFtZWQgbWV0aG9kcy5cclxuICovXHJcbmZ1bmN0aW9uIGltcGxlbWVudHNBbnlNZXRob2RzKG9iaiwgbWV0aG9kcykge1xyXG4gICAgaWYgKHR5cGVvZiBvYmogIT09ICdvYmplY3QnIHx8IG9iaiA9PT0gbnVsbCkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIGZvciAodmFyIF9pID0gMCwgbWV0aG9kc18xID0gbWV0aG9kczsgX2kgPCBtZXRob2RzXzEubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgdmFyIG1ldGhvZCA9IG1ldGhvZHNfMVtfaV07XHJcbiAgICAgICAgaWYgKG1ldGhvZCBpbiBvYmogJiYgdHlwZW9mIG9ialttZXRob2RdID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBmYWxzZTtcclxufVxyXG5mdW5jdGlvbiBub29wKCkge1xyXG4gICAgLy8gZG8gbm90aGluZ1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQ2hlY2sgdG8gbWFrZSBzdXJlIHRoZSBhcHByb3ByaWF0ZSBudW1iZXIgb2YgYXJndW1lbnRzIGFyZSBwcm92aWRlZCBmb3IgYSBwdWJsaWMgZnVuY3Rpb24uXHJcbiAqIFRocm93cyBhbiBlcnJvciBpZiBpdCBmYWlscy5cclxuICpcclxuICogQHBhcmFtIGZuTmFtZSBUaGUgZnVuY3Rpb24gbmFtZVxyXG4gKiBAcGFyYW0gbWluQ291bnQgVGhlIG1pbmltdW0gbnVtYmVyIG9mIGFyZ3VtZW50cyB0byBhbGxvdyBmb3IgdGhlIGZ1bmN0aW9uIGNhbGxcclxuICogQHBhcmFtIG1heENvdW50IFRoZSBtYXhpbXVtIG51bWJlciBvZiBhcmd1bWVudCB0byBhbGxvdyBmb3IgdGhlIGZ1bmN0aW9uIGNhbGxcclxuICogQHBhcmFtIGFyZ0NvdW50IFRoZSBhY3R1YWwgbnVtYmVyIG9mIGFyZ3VtZW50cyBwcm92aWRlZC5cclxuICovXHJcbnZhciB2YWxpZGF0ZUFyZ0NvdW50ID0gZnVuY3Rpb24gKGZuTmFtZSwgbWluQ291bnQsIG1heENvdW50LCBhcmdDb3VudCkge1xyXG4gICAgdmFyIGFyZ0Vycm9yO1xyXG4gICAgaWYgKGFyZ0NvdW50IDwgbWluQ291bnQpIHtcclxuICAgICAgICBhcmdFcnJvciA9ICdhdCBsZWFzdCAnICsgbWluQ291bnQ7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChhcmdDb3VudCA+IG1heENvdW50KSB7XHJcbiAgICAgICAgYXJnRXJyb3IgPSBtYXhDb3VudCA9PT0gMCA/ICdub25lJyA6ICdubyBtb3JlIHRoYW4gJyArIG1heENvdW50O1xyXG4gICAgfVxyXG4gICAgaWYgKGFyZ0Vycm9yKSB7XHJcbiAgICAgICAgdmFyIGVycm9yID0gZm5OYW1lICtcclxuICAgICAgICAgICAgJyBmYWlsZWQ6IFdhcyBjYWxsZWQgd2l0aCAnICtcclxuICAgICAgICAgICAgYXJnQ291bnQgK1xyXG4gICAgICAgICAgICAoYXJnQ291bnQgPT09IDEgPyAnIGFyZ3VtZW50LicgOiAnIGFyZ3VtZW50cy4nKSArXHJcbiAgICAgICAgICAgICcgRXhwZWN0cyAnICtcclxuICAgICAgICAgICAgYXJnRXJyb3IgK1xyXG4gICAgICAgICAgICAnLic7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yKTtcclxuICAgIH1cclxufTtcclxuLyoqXHJcbiAqIEdlbmVyYXRlcyBhIHN0cmluZyB0byBwcmVmaXggYW4gZXJyb3IgbWVzc2FnZSBhYm91dCBmYWlsZWQgYXJndW1lbnQgdmFsaWRhdGlvblxyXG4gKlxyXG4gKiBAcGFyYW0gZm5OYW1lIFRoZSBmdW5jdGlvbiBuYW1lXHJcbiAqIEBwYXJhbSBhcmd1bWVudE51bWJlciBUaGUgaW5kZXggb2YgdGhlIGFyZ3VtZW50XHJcbiAqIEBwYXJhbSBvcHRpb25hbCBXaGV0aGVyIG9yIG5vdCB0aGUgYXJndW1lbnQgaXMgb3B0aW9uYWxcclxuICogQHJldHVybiBUaGUgcHJlZml4IHRvIGFkZCB0byB0aGUgZXJyb3IgdGhyb3duIGZvciB2YWxpZGF0aW9uLlxyXG4gKi9cclxuZnVuY3Rpb24gZXJyb3JQcmVmaXgoZm5OYW1lLCBhcmd1bWVudE51bWJlciwgb3B0aW9uYWwpIHtcclxuICAgIHZhciBhcmdOYW1lID0gJyc7XHJcbiAgICBzd2l0Y2ggKGFyZ3VtZW50TnVtYmVyKSB7XHJcbiAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICBhcmdOYW1lID0gb3B0aW9uYWwgPyAnZmlyc3QnIDogJ0ZpcnN0JztcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICBhcmdOYW1lID0gb3B0aW9uYWwgPyAnc2Vjb25kJyA6ICdTZWNvbmQnO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgIGFyZ05hbWUgPSBvcHRpb25hbCA/ICd0aGlyZCcgOiAnVGhpcmQnO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIDQ6XHJcbiAgICAgICAgICAgIGFyZ05hbWUgPSBvcHRpb25hbCA/ICdmb3VydGgnIDogJ0ZvdXJ0aCc7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignZXJyb3JQcmVmaXggY2FsbGVkIHdpdGggYXJndW1lbnROdW1iZXIgPiA0LiAgTmVlZCB0byB1cGRhdGUgaXQ/Jyk7XHJcbiAgICB9XHJcbiAgICB2YXIgZXJyb3IgPSBmbk5hbWUgKyAnIGZhaWxlZDogJztcclxuICAgIGVycm9yICs9IGFyZ05hbWUgKyAnIGFyZ3VtZW50ICc7XHJcbiAgICByZXR1cm4gZXJyb3I7XHJcbn1cclxuLyoqXHJcbiAqIEBwYXJhbSBmbk5hbWVcclxuICogQHBhcmFtIGFyZ3VtZW50TnVtYmVyXHJcbiAqIEBwYXJhbSBuYW1lc3BhY2VcclxuICogQHBhcmFtIG9wdGlvbmFsXHJcbiAqL1xyXG5mdW5jdGlvbiB2YWxpZGF0ZU5hbWVzcGFjZShmbk5hbWUsIGFyZ3VtZW50TnVtYmVyLCBuYW1lc3BhY2UsIG9wdGlvbmFsKSB7XHJcbiAgICBpZiAob3B0aW9uYWwgJiYgIW5hbWVzcGFjZSkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGlmICh0eXBlb2YgbmFtZXNwYWNlICE9PSAnc3RyaW5nJykge1xyXG4gICAgICAgIC8vVE9ETzogSSBzaG91bGQgZG8gbW9yZSB2YWxpZGF0aW9uIGhlcmUuIFdlIG9ubHkgYWxsb3cgY2VydGFpbiBjaGFycyBpbiBuYW1lc3BhY2VzLlxyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvclByZWZpeChmbk5hbWUsIGFyZ3VtZW50TnVtYmVyLCBvcHRpb25hbCkgK1xyXG4gICAgICAgICAgICAnbXVzdCBiZSBhIHZhbGlkIGZpcmViYXNlIG5hbWVzcGFjZS4nKTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiB2YWxpZGF0ZUNhbGxiYWNrKGZuTmFtZSwgYXJndW1lbnROdW1iZXIsIGNhbGxiYWNrLCBvcHRpb25hbCkge1xyXG4gICAgaWYgKG9wdGlvbmFsICYmICFjYWxsYmFjaykge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgIT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3JQcmVmaXgoZm5OYW1lLCBhcmd1bWVudE51bWJlciwgb3B0aW9uYWwpICtcclxuICAgICAgICAgICAgJ211c3QgYmUgYSB2YWxpZCBmdW5jdGlvbi4nKTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiB2YWxpZGF0ZUNvbnRleHRPYmplY3QoZm5OYW1lLCBhcmd1bWVudE51bWJlciwgY29udGV4dCwgb3B0aW9uYWwpIHtcclxuICAgIGlmIChvcHRpb25hbCAmJiAhY29udGV4dCkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGlmICh0eXBlb2YgY29udGV4dCAhPT0gJ29iamVjdCcgfHwgY29udGV4dCA9PT0gbnVsbCkge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvclByZWZpeChmbk5hbWUsIGFyZ3VtZW50TnVtYmVyLCBvcHRpb25hbCkgK1xyXG4gICAgICAgICAgICAnbXVzdCBiZSBhIHZhbGlkIGNvbnRleHQgb2JqZWN0LicpO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vLyBDb2RlIG9yaWdpbmFsbHkgY2FtZSBmcm9tIGdvb2cuY3J5cHQuc3RyaW5nVG9VdGY4Qnl0ZUFycmF5LCBidXQgZm9yIHNvbWUgcmVhc29uIHRoZXlcclxuLy8gYXV0b21hdGljYWxseSByZXBsYWNlZCAnXFxyXFxuJyB3aXRoICdcXG4nLCBhbmQgdGhleSBkaWRuJ3QgaGFuZGxlIHN1cnJvZ2F0ZSBwYWlycyxcclxuLy8gc28gaXQncyBiZWVuIG1vZGlmaWVkLlxyXG4vLyBOb3RlIHRoYXQgbm90IGFsbCBVbmljb2RlIGNoYXJhY3RlcnMgYXBwZWFyIGFzIHNpbmdsZSBjaGFyYWN0ZXJzIGluIEphdmFTY3JpcHQgc3RyaW5ncy5cclxuLy8gZnJvbUNoYXJDb2RlIHJldHVybnMgdGhlIFVURi0xNiBlbmNvZGluZyBvZiBhIGNoYXJhY3RlciAtIHNvIHNvbWUgVW5pY29kZSBjaGFyYWN0ZXJzXHJcbi8vIHVzZSAyIGNoYXJhY3RlcnMgaW4gSmF2YXNjcmlwdC4gIEFsbCA0LWJ5dGUgVVRGLTggY2hhcmFjdGVycyBiZWdpbiB3aXRoIGEgZmlyc3RcclxuLy8gY2hhcmFjdGVyIGluIHRoZSByYW5nZSAweEQ4MDAgLSAweERCRkYgKHRoZSBmaXJzdCBjaGFyYWN0ZXIgb2YgYSBzby1jYWxsZWQgc3Vycm9nYXRlXHJcbi8vIHBhaXIpLlxyXG4vLyBTZWUgaHR0cDovL3d3dy5lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzUuMS8jc2VjLTE1LjEuM1xyXG4vKipcclxuICogQHBhcmFtIHtzdHJpbmd9IHN0clxyXG4gKiBAcmV0dXJuIHtBcnJheX1cclxuICovXHJcbnZhciBzdHJpbmdUb0J5dGVBcnJheSQxID0gZnVuY3Rpb24gKHN0cikge1xyXG4gICAgdmFyIG91dCA9IFtdO1xyXG4gICAgdmFyIHAgPSAwO1xyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICB2YXIgYyA9IHN0ci5jaGFyQ29kZUF0KGkpO1xyXG4gICAgICAgIC8vIElzIHRoaXMgdGhlIGxlYWQgc3Vycm9nYXRlIGluIGEgc3Vycm9nYXRlIHBhaXI/XHJcbiAgICAgICAgaWYgKGMgPj0gMHhkODAwICYmIGMgPD0gMHhkYmZmKSB7XHJcbiAgICAgICAgICAgIHZhciBoaWdoID0gYyAtIDB4ZDgwMDsgLy8gdGhlIGhpZ2ggMTAgYml0cy5cclxuICAgICAgICAgICAgaSsrO1xyXG4gICAgICAgICAgICBhc3NlcnQoaSA8IHN0ci5sZW5ndGgsICdTdXJyb2dhdGUgcGFpciBtaXNzaW5nIHRyYWlsIHN1cnJvZ2F0ZS4nKTtcclxuICAgICAgICAgICAgdmFyIGxvdyA9IHN0ci5jaGFyQ29kZUF0KGkpIC0gMHhkYzAwOyAvLyB0aGUgbG93IDEwIGJpdHMuXHJcbiAgICAgICAgICAgIGMgPSAweDEwMDAwICsgKGhpZ2ggPDwgMTApICsgbG93O1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoYyA8IDEyOCkge1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IGM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGMgPCAyMDQ4KSB7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgPj4gNikgfCAxOTI7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGMgPCA2NTUzNikge1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjID4+IDEyKSB8IDIyNDtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoKGMgPj4gNikgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjID4+IDE4KSB8IDI0MDtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoKGMgPj4gMTIpICYgNjMpIHwgMTI4O1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9ICgoYyA+PiA2KSAmIDYzKSB8IDEyODtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyAmIDYzKSB8IDEyODtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gb3V0O1xyXG59O1xyXG4vKipcclxuICogQ2FsY3VsYXRlIGxlbmd0aCB3aXRob3V0IGFjdHVhbGx5IGNvbnZlcnRpbmc7IHVzZWZ1bCBmb3IgZG9pbmcgY2hlYXBlciB2YWxpZGF0aW9uLlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyXHJcbiAqIEByZXR1cm4ge251bWJlcn1cclxuICovXHJcbnZhciBzdHJpbmdMZW5ndGggPSBmdW5jdGlvbiAoc3RyKSB7XHJcbiAgICB2YXIgcCA9IDA7XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIHZhciBjID0gc3RyLmNoYXJDb2RlQXQoaSk7XHJcbiAgICAgICAgaWYgKGMgPCAxMjgpIHtcclxuICAgICAgICAgICAgcCsrO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChjIDwgMjA0OCkge1xyXG4gICAgICAgICAgICBwICs9IDI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGMgPj0gMHhkODAwICYmIGMgPD0gMHhkYmZmKSB7XHJcbiAgICAgICAgICAgIC8vIExlYWQgc3Vycm9nYXRlIG9mIGEgc3Vycm9nYXRlIHBhaXIuICBUaGUgcGFpciB0b2dldGhlciB3aWxsIHRha2UgNCBieXRlcyB0byByZXByZXNlbnQuXHJcbiAgICAgICAgICAgIHAgKz0gNDtcclxuICAgICAgICAgICAgaSsrOyAvLyBza2lwIHRyYWlsIHN1cnJvZ2F0ZS5cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHAgKz0gMztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcDtcclxufTtcblxuZXhwb3J0cy5DT05TVEFOVFMgPSBDT05TVEFOVFM7XG5leHBvcnRzLkRlZmVycmVkID0gRGVmZXJyZWQ7XG5leHBvcnRzLkVycm9yRmFjdG9yeSA9IEVycm9yRmFjdG9yeTtcbmV4cG9ydHMuRmlyZWJhc2VFcnJvciA9IEZpcmViYXNlRXJyb3I7XG5leHBvcnRzLlNoYTEgPSBTaGExO1xuZXhwb3J0cy5hc3NlcnQgPSBhc3NlcnQ7XG5leHBvcnRzLmFzc2VydGlvbkVycm9yID0gYXNzZXJ0aW9uRXJyb3I7XG5leHBvcnRzLmFzeW5jID0gYXN5bmM7XG5leHBvcnRzLmJhc2U2NCA9IGJhc2U2NDtcbmV4cG9ydHMuYmFzZTY0RGVjb2RlID0gYmFzZTY0RGVjb2RlO1xuZXhwb3J0cy5iYXNlNjRFbmNvZGUgPSBiYXNlNjRFbmNvZGU7XG5leHBvcnRzLmNvbnRhaW5zID0gY29udGFpbnM7XG5leHBvcnRzLmNyZWF0ZVN1YnNjcmliZSA9IGNyZWF0ZVN1YnNjcmliZTtcbmV4cG9ydHMuZGVjb2RlID0gZGVjb2RlO1xuZXhwb3J0cy5kZWVwQ29weSA9IGRlZXBDb3B5O1xuZXhwb3J0cy5kZWVwRXh0ZW5kID0gZGVlcEV4dGVuZDtcbmV4cG9ydHMuZXJyb3JQcmVmaXggPSBlcnJvclByZWZpeDtcbmV4cG9ydHMuZ2V0VUEgPSBnZXRVQTtcbmV4cG9ydHMuaXNBZG1pbiA9IGlzQWRtaW47XG5leHBvcnRzLmlzQnJvd3NlciA9IGlzQnJvd3NlcjtcbmV4cG9ydHMuaXNFbXB0eSA9IGlzRW1wdHk7XG5leHBvcnRzLmlzTW9iaWxlQ29yZG92YSA9IGlzTW9iaWxlQ29yZG92YTtcbmV4cG9ydHMuaXNOb2RlID0gaXNOb2RlO1xuZXhwb3J0cy5pc05vZGVTZGsgPSBpc05vZGVTZGs7XG5leHBvcnRzLmlzUmVhY3ROYXRpdmUgPSBpc1JlYWN0TmF0aXZlO1xuZXhwb3J0cy5pc1ZhbGlkRm9ybWF0ID0gaXNWYWxpZEZvcm1hdDtcbmV4cG9ydHMuaXNWYWxpZFRpbWVzdGFtcCA9IGlzVmFsaWRUaW1lc3RhbXA7XG5leHBvcnRzLmlzc3VlZEF0VGltZSA9IGlzc3VlZEF0VGltZTtcbmV4cG9ydHMuanNvbkV2YWwgPSBqc29uRXZhbDtcbmV4cG9ydHMubWFwID0gbWFwO1xuZXhwb3J0cy5xdWVyeXN0cmluZyA9IHF1ZXJ5c3RyaW5nO1xuZXhwb3J0cy5xdWVyeXN0cmluZ0RlY29kZSA9IHF1ZXJ5c3RyaW5nRGVjb2RlO1xuZXhwb3J0cy5zYWZlR2V0ID0gc2FmZUdldDtcbmV4cG9ydHMuc3RyaW5nTGVuZ3RoID0gc3RyaW5nTGVuZ3RoO1xuZXhwb3J0cy5zdHJpbmdUb0J5dGVBcnJheSA9IHN0cmluZ1RvQnl0ZUFycmF5JDE7XG5leHBvcnRzLnN0cmluZ2lmeSA9IHN0cmluZ2lmeTtcbmV4cG9ydHMudmFsaWRhdGVBcmdDb3VudCA9IHZhbGlkYXRlQXJnQ291bnQ7XG5leHBvcnRzLnZhbGlkYXRlQ2FsbGJhY2sgPSB2YWxpZGF0ZUNhbGxiYWNrO1xuZXhwb3J0cy52YWxpZGF0ZUNvbnRleHRPYmplY3QgPSB2YWxpZGF0ZUNvbnRleHRPYmplY3Q7XG5leHBvcnRzLnZhbGlkYXRlTmFtZXNwYWNlID0gdmFsaWRhdGVOYW1lc3BhY2U7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5janMuanMubWFwXG4iLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG5cbnZhciB0c2xpYiA9IHJlcXVpcmUoJ3RzbGliJyk7XG52YXIgdXRpbCA9IHJlcXVpcmUoJ0BmaXJlYmFzZS91dGlsJyk7XG5cbi8qKlxyXG4gKiBDb21wb25lbnQgZm9yIHNlcnZpY2UgbmFtZSBULCBlLmcuIGBhdXRoYCwgYGF1dGgtaW50ZXJuYWxgXHJcbiAqL1xyXG52YXIgQ29tcG9uZW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgLyoqXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIG5hbWUgVGhlIHB1YmxpYyBzZXJ2aWNlIG5hbWUsIGUuZy4gYXBwLCBhdXRoLCBmaXJlc3RvcmUsIGRhdGFiYXNlXHJcbiAgICAgKiBAcGFyYW0gaW5zdGFuY2VGYWN0b3J5IFNlcnZpY2UgZmFjdG9yeSByZXNwb25zaWJsZSBmb3IgY3JlYXRpbmcgdGhlIHB1YmxpYyBpbnRlcmZhY2VcclxuICAgICAqIEBwYXJhbSB0eXBlIHdoZWh0ZXIgdGhlIHNlcnZpY2UgcHJvdmlkZWQgYnkgdGhlIGNvbXBvbmVudCBpcyBwdWJsaWMgb3IgcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBDb21wb25lbnQobmFtZSwgaW5zdGFuY2VGYWN0b3J5LCB0eXBlKSB7XHJcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcclxuICAgICAgICB0aGlzLmluc3RhbmNlRmFjdG9yeSA9IGluc3RhbmNlRmFjdG9yeTtcclxuICAgICAgICB0aGlzLnR5cGUgPSB0eXBlO1xyXG4gICAgICAgIHRoaXMubXVsdGlwbGVJbnN0YW5jZXMgPSBmYWxzZTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBQcm9wZXJ0aWVzIHRvIGJlIGFkZGVkIHRvIHRoZSBzZXJ2aWNlIG5hbWVzcGFjZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuc2VydmljZVByb3BzID0ge307XHJcbiAgICAgICAgdGhpcy5pbnN0YW50aWF0aW9uTW9kZSA9IFwiTEFaWVwiIC8qIExBWlkgKi87XHJcbiAgICB9XHJcbiAgICBDb21wb25lbnQucHJvdG90eXBlLnNldEluc3RhbnRpYXRpb25Nb2RlID0gZnVuY3Rpb24gKG1vZGUpIHtcclxuICAgICAgICB0aGlzLmluc3RhbnRpYXRpb25Nb2RlID0gbW9kZTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH07XHJcbiAgICBDb21wb25lbnQucHJvdG90eXBlLnNldE11bHRpcGxlSW5zdGFuY2VzID0gZnVuY3Rpb24gKG11bHRpcGxlSW5zdGFuY2VzKSB7XHJcbiAgICAgICAgdGhpcy5tdWx0aXBsZUluc3RhbmNlcyA9IG11bHRpcGxlSW5zdGFuY2VzO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfTtcclxuICAgIENvbXBvbmVudC5wcm90b3R5cGUuc2V0U2VydmljZVByb3BzID0gZnVuY3Rpb24gKHByb3BzKSB7XHJcbiAgICAgICAgdGhpcy5zZXJ2aWNlUHJvcHMgPSBwcm9wcztcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH07XHJcbiAgICByZXR1cm4gQ29tcG9uZW50O1xyXG59KCkpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxudmFyIERFRkFVTFRfRU5UUllfTkFNRSA9ICdbREVGQVVMVF0nO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFByb3ZpZGVyIGZvciBpbnN0YW5jZSBmb3Igc2VydmljZSBuYW1lIFQsIGUuZy4gJ2F1dGgnLCAnYXV0aC1pbnRlcm5hbCdcclxuICogTmFtZVNlcnZpY2VNYXBwaW5nW1RdIGlzIGFuIGFsaWFzIGZvciB0aGUgdHlwZSBvZiB0aGUgaW5zdGFuY2VcclxuICovXHJcbnZhciBQcm92aWRlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFByb3ZpZGVyKG5hbWUsIGNvbnRhaW5lcikge1xyXG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXI7XHJcbiAgICAgICAgdGhpcy5jb21wb25lbnQgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuaW5zdGFuY2VzID0gbmV3IE1hcCgpO1xyXG4gICAgICAgIHRoaXMuaW5zdGFuY2VzRGVmZXJyZWQgPSBuZXcgTWFwKCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSBpZGVudGlmaWVyIEEgcHJvdmlkZXIgY2FuIHByb3ZpZGUgbXVsaXRwbGUgaW5zdGFuY2VzIG9mIGEgc2VydmljZVxyXG4gICAgICogaWYgdGhpcy5jb21wb25lbnQubXVsdGlwbGVJbnN0YW5jZXMgaXMgdHJ1ZS5cclxuICAgICAqL1xyXG4gICAgUHJvdmlkZXIucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uIChpZGVudGlmaWVyKSB7XHJcbiAgICAgICAgaWYgKGlkZW50aWZpZXIgPT09IHZvaWQgMCkgeyBpZGVudGlmaWVyID0gREVGQVVMVF9FTlRSWV9OQU1FOyB9XHJcbiAgICAgICAgLy8gaWYgbXVsdGlwbGVJbnN0YW5jZXMgaXMgbm90IHN1cHBvcnRlZCwgdXNlIHRoZSBkZWZhdWx0IG5hbWVcclxuICAgICAgICB2YXIgbm9ybWFsaXplZElkZW50aWZpZXIgPSB0aGlzLm5vcm1hbGl6ZUluc3RhbmNlSWRlbnRpZmllcihpZGVudGlmaWVyKTtcclxuICAgICAgICBpZiAoIXRoaXMuaW5zdGFuY2VzRGVmZXJyZWQuaGFzKG5vcm1hbGl6ZWRJZGVudGlmaWVyKSkge1xyXG4gICAgICAgICAgICB2YXIgZGVmZXJyZWQgPSBuZXcgdXRpbC5EZWZlcnJlZCgpO1xyXG4gICAgICAgICAgICB0aGlzLmluc3RhbmNlc0RlZmVycmVkLnNldChub3JtYWxpemVkSWRlbnRpZmllciwgZGVmZXJyZWQpO1xyXG4gICAgICAgICAgICAvLyBJZiB0aGUgc2VydmljZSBpbnN0YW5jZSBpcyBhdmFpbGFibGUsIHJlc29sdmUgdGhlIHByb21pc2Ugd2l0aCBpdCBpbW1lZGlhdGVseVxyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGluc3RhbmNlID0gdGhpcy5nZXRPckluaXRpYWxpemVTZXJ2aWNlKG5vcm1hbGl6ZWRJZGVudGlmaWVyKTtcclxuICAgICAgICAgICAgICAgIGlmIChpbnN0YW5jZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoaW5zdGFuY2UpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICAvLyB3aGVuIHRoZSBpbnN0YW5jZSBmYWN0b3J5IHRocm93cyBhbiBleGNlcHRpb24gZHVyaW5nIGdldCgpLCBpdCBzaG91bGQgbm90IGNhdXNlXHJcbiAgICAgICAgICAgICAgICAvLyBhIGZhdGFsIGVycm9yLiBXZSBqdXN0IHJldHVybiB0aGUgdW5yZXNvbHZlZCBwcm9taXNlIGluIHRoaXMgY2FzZS5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5pbnN0YW5jZXNEZWZlcnJlZC5nZXQobm9ybWFsaXplZElkZW50aWZpZXIpLnByb21pc2U7XHJcbiAgICB9O1xyXG4gICAgUHJvdmlkZXIucHJvdG90eXBlLmdldEltbWVkaWF0ZSA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XHJcbiAgICAgICAgdmFyIF9hID0gdHNsaWIuX19hc3NpZ24oeyBpZGVudGlmaWVyOiBERUZBVUxUX0VOVFJZX05BTUUsIG9wdGlvbmFsOiBmYWxzZSB9LCBvcHRpb25zKSwgaWRlbnRpZmllciA9IF9hLmlkZW50aWZpZXIsIG9wdGlvbmFsID0gX2Eub3B0aW9uYWw7XHJcbiAgICAgICAgLy8gaWYgbXVsdGlwbGVJbnN0YW5jZXMgaXMgbm90IHN1cHBvcnRlZCwgdXNlIHRoZSBkZWZhdWx0IG5hbWVcclxuICAgICAgICB2YXIgbm9ybWFsaXplZElkZW50aWZpZXIgPSB0aGlzLm5vcm1hbGl6ZUluc3RhbmNlSWRlbnRpZmllcihpZGVudGlmaWVyKTtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICB2YXIgaW5zdGFuY2UgPSB0aGlzLmdldE9ySW5pdGlhbGl6ZVNlcnZpY2Uobm9ybWFsaXplZElkZW50aWZpZXIpO1xyXG4gICAgICAgICAgICBpZiAoIWluc3RhbmNlKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9uYWwpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRocm93IEVycm9yKFwiU2VydmljZSBcIiArIHRoaXMubmFtZSArIFwiIGlzIG5vdCBhdmFpbGFibGVcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGluc3RhbmNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICBpZiAob3B0aW9uYWwpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBQcm92aWRlci5wcm90b3R5cGUuZ2V0Q29tcG9uZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNvbXBvbmVudDtcclxuICAgIH07XHJcbiAgICBQcm92aWRlci5wcm90b3R5cGUuc2V0Q29tcG9uZW50ID0gZnVuY3Rpb24gKGNvbXBvbmVudCkge1xyXG4gICAgICAgIHZhciBlXzEsIF9hO1xyXG4gICAgICAgIGlmIChjb21wb25lbnQubmFtZSAhPT0gdGhpcy5uYW1lKSB7XHJcbiAgICAgICAgICAgIHRocm93IEVycm9yKFwiTWlzbWF0Y2hpbmcgQ29tcG9uZW50IFwiICsgY29tcG9uZW50Lm5hbWUgKyBcIiBmb3IgUHJvdmlkZXIgXCIgKyB0aGlzLm5hbWUgKyBcIi5cIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmNvbXBvbmVudCkge1xyXG4gICAgICAgICAgICB0aHJvdyBFcnJvcihcIkNvbXBvbmVudCBmb3IgXCIgKyB0aGlzLm5hbWUgKyBcIiBoYXMgYWxyZWFkeSBiZWVuIHByb3ZpZGVkXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmNvbXBvbmVudCA9IGNvbXBvbmVudDtcclxuICAgICAgICAvLyBpZiB0aGUgc2VydmljZSBpcyBlYWdlciwgaW5pdGlhbGl6ZSB0aGUgZGVmYXVsdCBpbnN0YW5jZVxyXG4gICAgICAgIGlmIChpc0NvbXBvbmVudEVhZ2VyKGNvbXBvbmVudCkpIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZ2V0T3JJbml0aWFsaXplU2VydmljZShERUZBVUxUX0VOVFJZX05BTUUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICAvLyB3aGVuIHRoZSBpbnN0YW5jZSBmYWN0b3J5IGZvciBhbiBlYWdlciBDb21wb25lbnQgdGhyb3dzIGFuIGV4Y2VwdGlvbiBkdXJpbmcgdGhlIGVhZ2VyXHJcbiAgICAgICAgICAgICAgICAvLyBpbml0aWFsaXphdGlvbiwgaXQgc2hvdWxkIG5vdCBjYXVzZSBhIGZhdGFsIGVycm9yLlxyXG4gICAgICAgICAgICAgICAgLy8gVE9ETzogSW52ZXN0aWdhdGUgaWYgd2UgbmVlZCB0byBtYWtlIGl0IGNvbmZpZ3VyYWJsZSwgYmVjYXVzZSBzb21lIGNvbXBvbmVudCBtYXkgd2FudCB0byBjYXVzZVxyXG4gICAgICAgICAgICAgICAgLy8gYSBmYXRhbCBlcnJvciBpbiB0aGlzIGNhc2U/XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgLy8gQ3JlYXRlIHNlcnZpY2UgaW5zdGFuY2VzIGZvciB0aGUgcGVuZGluZyBwcm9taXNlcyBhbmQgcmVzb2x2ZSB0aGVtXHJcbiAgICAgICAgICAgIC8vIE5PVEU6IGlmIHRoaXMubXVsdGlwbGVJbnN0YW5jZXMgaXMgZmFsc2UsIG9ubHkgdGhlIGRlZmF1bHQgaW5zdGFuY2Ugd2lsbCBiZSBjcmVhdGVkXHJcbiAgICAgICAgICAgIC8vIGFuZCBhbGwgcHJvbWlzZXMgd2l0aCByZXNvbHZlIHdpdGggaXQgcmVnYXJkbGVzcyBvZiB0aGUgaWRlbnRpZmllci5cclxuICAgICAgICAgICAgZm9yICh2YXIgX2IgPSB0c2xpYi5fX3ZhbHVlcyh0aGlzLmluc3RhbmNlc0RlZmVycmVkLmVudHJpZXMoKSksIF9jID0gX2IubmV4dCgpOyAhX2MuZG9uZTsgX2MgPSBfYi5uZXh0KCkpIHtcclxuICAgICAgICAgICAgICAgIHZhciBfZCA9IHRzbGliLl9fcmVhZChfYy52YWx1ZSwgMiksIGluc3RhbmNlSWRlbnRpZmllciA9IF9kWzBdLCBpbnN0YW5jZURlZmVycmVkID0gX2RbMV07XHJcbiAgICAgICAgICAgICAgICB2YXIgbm9ybWFsaXplZElkZW50aWZpZXIgPSB0aGlzLm5vcm1hbGl6ZUluc3RhbmNlSWRlbnRpZmllcihpbnN0YW5jZUlkZW50aWZpZXIpO1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBgZ2V0T3JJbml0aWFsaXplU2VydmljZSgpYCBzaG91bGQgYWx3YXlzIHJldHVybiBhIHZhbGlkIGluc3RhbmNlIHNpbmNlIGEgY29tcG9uZW50IGlzIGd1YXJhbnRlZWQuIHVzZSAhIHRvIG1ha2UgdHlwZXNjcmlwdCBoYXBweS5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgaW5zdGFuY2UgPSB0aGlzLmdldE9ySW5pdGlhbGl6ZVNlcnZpY2Uobm9ybWFsaXplZElkZW50aWZpZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGluc3RhbmNlRGVmZXJyZWQucmVzb2x2ZShpbnN0YW5jZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHdoZW4gdGhlIGluc3RhbmNlIGZhY3RvcnkgdGhyb3dzIGFuIGV4Y2VwdGlvbiwgaXQgc2hvdWxkIG5vdCBjYXVzZVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGEgZmF0YWwgZXJyb3IuIFdlIGp1c3QgbGVhdmUgdGhlIHByb21pc2UgdW5yZXNvbHZlZC5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZV8xXzEpIHsgZV8xID0geyBlcnJvcjogZV8xXzEgfTsgfVxyXG4gICAgICAgIGZpbmFsbHkge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgaWYgKF9jICYmICFfYy5kb25lICYmIChfYSA9IF9iLnJldHVybikpIF9hLmNhbGwoX2IpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8xKSB0aHJvdyBlXzEuZXJyb3I7IH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgUHJvdmlkZXIucHJvdG90eXBlLmNsZWFySW5zdGFuY2UgPSBmdW5jdGlvbiAoaWRlbnRpZmllcikge1xyXG4gICAgICAgIGlmIChpZGVudGlmaWVyID09PSB2b2lkIDApIHsgaWRlbnRpZmllciA9IERFRkFVTFRfRU5UUllfTkFNRTsgfVxyXG4gICAgICAgIHRoaXMuaW5zdGFuY2VzRGVmZXJyZWQuZGVsZXRlKGlkZW50aWZpZXIpO1xyXG4gICAgICAgIHRoaXMuaW5zdGFuY2VzLmRlbGV0ZShpZGVudGlmaWVyKTtcclxuICAgIH07XHJcbiAgICAvLyBhcHAuZGVsZXRlKCkgd2lsbCBjYWxsIHRoaXMgbWV0aG9kIG9uIGV2ZXJ5IHByb3ZpZGVyIHRvIGRlbGV0ZSB0aGUgc2VydmljZXNcclxuICAgIC8vIFRPRE86IHNob3VsZCB3ZSBtYXJrIHRoZSBwcm92aWRlciBhcyBkZWxldGVkP1xyXG4gICAgUHJvdmlkZXIucHJvdG90eXBlLmRlbGV0ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdHNsaWIuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBzZXJ2aWNlcztcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VydmljZXMgPSBBcnJheS5mcm9tKHRoaXMuaW5zdGFuY2VzLnZhbHVlcygpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgUHJvbWlzZS5hbGwoc2VydmljZXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKGZ1bmN0aW9uIChzZXJ2aWNlKSB7IHJldHVybiAnSU5URVJOQUwnIGluIHNlcnZpY2U7IH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKGZ1bmN0aW9uIChzZXJ2aWNlKSB7IHJldHVybiBzZXJ2aWNlLklOVEVSTkFMLmRlbGV0ZSgpOyB9KSldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIFByb3ZpZGVyLnByb3RvdHlwZS5pc0NvbXBvbmVudFNldCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jb21wb25lbnQgIT0gbnVsbDtcclxuICAgIH07XHJcbiAgICBQcm92aWRlci5wcm90b3R5cGUuZ2V0T3JJbml0aWFsaXplU2VydmljZSA9IGZ1bmN0aW9uIChpZGVudGlmaWVyKSB7XHJcbiAgICAgICAgdmFyIGluc3RhbmNlID0gdGhpcy5pbnN0YW5jZXMuZ2V0KGlkZW50aWZpZXIpO1xyXG4gICAgICAgIGlmICghaW5zdGFuY2UgJiYgdGhpcy5jb21wb25lbnQpIHtcclxuICAgICAgICAgICAgaW5zdGFuY2UgPSB0aGlzLmNvbXBvbmVudC5pbnN0YW5jZUZhY3RvcnkodGhpcy5jb250YWluZXIsIG5vcm1hbGl6ZUlkZW50aWZpZXJGb3JGYWN0b3J5KGlkZW50aWZpZXIpKTtcclxuICAgICAgICAgICAgdGhpcy5pbnN0YW5jZXMuc2V0KGlkZW50aWZpZXIsIGluc3RhbmNlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGluc3RhbmNlIHx8IG51bGw7XHJcbiAgICB9O1xyXG4gICAgUHJvdmlkZXIucHJvdG90eXBlLm5vcm1hbGl6ZUluc3RhbmNlSWRlbnRpZmllciA9IGZ1bmN0aW9uIChpZGVudGlmaWVyKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuY29tcG9uZW50KSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbXBvbmVudC5tdWx0aXBsZUluc3RhbmNlcyA/IGlkZW50aWZpZXIgOiBERUZBVUxUX0VOVFJZX05BTUU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gaWRlbnRpZmllcjsgLy8gYXNzdW1lIG11bHRpcGxlIGluc3RhbmNlcyBhcmUgc3VwcG9ydGVkIGJlZm9yZSB0aGUgY29tcG9uZW50IGlzIHByb3ZpZGVkLlxyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICByZXR1cm4gUHJvdmlkZXI7XHJcbn0oKSk7XHJcbi8vIHVuZGVmaW5lZCBzaG91bGQgYmUgcGFzc2VkIHRvIHRoZSBzZXJ2aWNlIGZhY3RvcnkgZm9yIHRoZSBkZWZhdWx0IGluc3RhbmNlXHJcbmZ1bmN0aW9uIG5vcm1hbGl6ZUlkZW50aWZpZXJGb3JGYWN0b3J5KGlkZW50aWZpZXIpIHtcclxuICAgIHJldHVybiBpZGVudGlmaWVyID09PSBERUZBVUxUX0VOVFJZX05BTUUgPyB1bmRlZmluZWQgOiBpZGVudGlmaWVyO1xyXG59XHJcbmZ1bmN0aW9uIGlzQ29tcG9uZW50RWFnZXIoY29tcG9uZW50KSB7XHJcbiAgICByZXR1cm4gY29tcG9uZW50Lmluc3RhbnRpYXRpb25Nb2RlID09PSBcIkVBR0VSXCIgLyogRUFHRVIgKi87XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBDb21wb25lbnRDb250YWluZXIgdGhhdCBwcm92aWRlcyBQcm92aWRlcnMgZm9yIHNlcnZpY2UgbmFtZSBULCBlLmcuIGBhdXRoYCwgYGF1dGgtaW50ZXJuYWxgXHJcbiAqL1xyXG52YXIgQ29tcG9uZW50Q29udGFpbmVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gQ29tcG9uZW50Q29udGFpbmVyKG5hbWUpIHtcclxuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xyXG4gICAgICAgIHRoaXMucHJvdmlkZXJzID0gbmV3IE1hcCgpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGNvbXBvbmVudCBDb21wb25lbnQgYmVpbmcgYWRkZWRcclxuICAgICAqIEBwYXJhbSBvdmVyd3JpdGUgV2hlbiBhIGNvbXBvbmVudCB3aXRoIHRoZSBzYW1lIG5hbWUgaGFzIGFscmVhZHkgYmVlbiByZWdpc3RlcmVkLFxyXG4gICAgICogaWYgb3ZlcndyaXRlIGlzIHRydWU6IG92ZXJ3cml0ZSB0aGUgZXhpc3RpbmcgY29tcG9uZW50IHdpdGggdGhlIG5ldyBjb21wb25lbnQgYW5kIGNyZWF0ZSBhIG5ld1xyXG4gICAgICogcHJvdmlkZXIgd2l0aCB0aGUgbmV3IGNvbXBvbmVudC4gSXQgY2FuIGJlIHVzZWZ1bCBpbiB0ZXN0cyB3aGVyZSB5b3Ugd2FudCB0byB1c2UgZGlmZmVyZW50IG1vY2tzXHJcbiAgICAgKiBmb3IgZGlmZmVyZW50IHRlc3RzLlxyXG4gICAgICogaWYgb3ZlcndyaXRlIGlzIGZhbHNlOiB0aHJvdyBhbiBleGNlcHRpb25cclxuICAgICAqL1xyXG4gICAgQ29tcG9uZW50Q29udGFpbmVyLnByb3RvdHlwZS5hZGRDb21wb25lbnQgPSBmdW5jdGlvbiAoY29tcG9uZW50KSB7XHJcbiAgICAgICAgdmFyIHByb3ZpZGVyID0gdGhpcy5nZXRQcm92aWRlcihjb21wb25lbnQubmFtZSk7XHJcbiAgICAgICAgaWYgKHByb3ZpZGVyLmlzQ29tcG9uZW50U2V0KCkpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ29tcG9uZW50IFwiICsgY29tcG9uZW50Lm5hbWUgKyBcIiBoYXMgYWxyZWFkeSBiZWVuIHJlZ2lzdGVyZWQgd2l0aCBcIiArIHRoaXMubmFtZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHByb3ZpZGVyLnNldENvbXBvbmVudChjb21wb25lbnQpO1xyXG4gICAgfTtcclxuICAgIENvbXBvbmVudENvbnRhaW5lci5wcm90b3R5cGUuYWRkT3JPdmVyd3JpdGVDb21wb25lbnQgPSBmdW5jdGlvbiAoY29tcG9uZW50KSB7XHJcbiAgICAgICAgdmFyIHByb3ZpZGVyID0gdGhpcy5nZXRQcm92aWRlcihjb21wb25lbnQubmFtZSk7XHJcbiAgICAgICAgaWYgKHByb3ZpZGVyLmlzQ29tcG9uZW50U2V0KCkpIHtcclxuICAgICAgICAgICAgLy8gZGVsZXRlIHRoZSBleGlzdGluZyBwcm92aWRlciBmcm9tIHRoZSBjb250YWluZXIsIHNvIHdlIGNhbiByZWdpc3RlciB0aGUgbmV3IGNvbXBvbmVudFxyXG4gICAgICAgICAgICB0aGlzLnByb3ZpZGVycy5kZWxldGUoY29tcG9uZW50Lm5hbWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmFkZENvbXBvbmVudChjb21wb25lbnQpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogZ2V0UHJvdmlkZXIgcHJvdmlkZXMgYSB0eXBlIHNhZmUgaW50ZXJmYWNlIHdoZXJlIGl0IGNhbiBvbmx5IGJlIGNhbGxlZCB3aXRoIGEgZmllbGQgbmFtZVxyXG4gICAgICogcHJlc2VudCBpbiBOYW1lU2VydmljZU1hcHBpbmcgaW50ZXJmYWNlLlxyXG4gICAgICpcclxuICAgICAqIEZpcmViYXNlIFNES3MgcHJvdmlkaW5nIHNlcnZpY2VzIHNob3VsZCBleHRlbmQgTmFtZVNlcnZpY2VNYXBwaW5nIGludGVyZmFjZSB0byByZWdpc3RlclxyXG4gICAgICogdGhlbXNlbHZlcy5cclxuICAgICAqL1xyXG4gICAgQ29tcG9uZW50Q29udGFpbmVyLnByb3RvdHlwZS5nZXRQcm92aWRlciA9IGZ1bmN0aW9uIChuYW1lKSB7XHJcbiAgICAgICAgaWYgKHRoaXMucHJvdmlkZXJzLmhhcyhuYW1lKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcm92aWRlcnMuZ2V0KG5hbWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBjcmVhdGUgYSBQcm92aWRlciBmb3IgYSBzZXJ2aWNlIHRoYXQgaGFzbid0IHJlZ2lzdGVyZWQgd2l0aCBGaXJlYmFzZVxyXG4gICAgICAgIHZhciBwcm92aWRlciA9IG5ldyBQcm92aWRlcihuYW1lLCB0aGlzKTtcclxuICAgICAgICB0aGlzLnByb3ZpZGVycy5zZXQobmFtZSwgcHJvdmlkZXIpO1xyXG4gICAgICAgIHJldHVybiBwcm92aWRlcjtcclxuICAgIH07XHJcbiAgICBDb21wb25lbnRDb250YWluZXIucHJvdG90eXBlLmdldFByb3ZpZGVycyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLnByb3ZpZGVycy52YWx1ZXMoKSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIENvbXBvbmVudENvbnRhaW5lcjtcclxufSgpKTtcblxuZXhwb3J0cy5Db21wb25lbnQgPSBDb21wb25lbnQ7XG5leHBvcnRzLkNvbXBvbmVudENvbnRhaW5lciA9IENvbXBvbmVudENvbnRhaW5lcjtcbmV4cG9ydHMuUHJvdmlkZXIgPSBQcm92aWRlcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmNqcy5qcy5tYXBcbiIsIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcblxudmFyIHRzbGliID0gcmVxdWlyZSgndHNsaWInKTtcbnZhciB1dGlsID0gcmVxdWlyZSgnQGZpcmViYXNlL3V0aWwnKTtcbnZhciBjb21wb25lbnQgPSByZXF1aXJlKCdAZmlyZWJhc2UvY29tcG9uZW50Jyk7XG52YXIgbG9nZ2VyJDEgPSByZXF1aXJlKCdAZmlyZWJhc2UvbG9nZ2VyJyk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG52YXIgX2E7XHJcbnZhciBFUlJPUlMgPSAoX2EgPSB7fSxcclxuICAgIF9hW1wibm8tYXBwXCIgLyogTk9fQVBQICovXSA9IFwiTm8gRmlyZWJhc2UgQXBwICd7JGFwcE5hbWV9JyBoYXMgYmVlbiBjcmVhdGVkIC0gXCIgK1xyXG4gICAgICAgICdjYWxsIEZpcmViYXNlIEFwcC5pbml0aWFsaXplQXBwKCknLFxyXG4gICAgX2FbXCJiYWQtYXBwLW5hbWVcIiAvKiBCQURfQVBQX05BTUUgKi9dID0gXCJJbGxlZ2FsIEFwcCBuYW1lOiAneyRhcHBOYW1lfVwiLFxyXG4gICAgX2FbXCJkdXBsaWNhdGUtYXBwXCIgLyogRFVQTElDQVRFX0FQUCAqL10gPSBcIkZpcmViYXNlIEFwcCBuYW1lZCAneyRhcHBOYW1lfScgYWxyZWFkeSBleGlzdHNcIixcclxuICAgIF9hW1wiYXBwLWRlbGV0ZWRcIiAvKiBBUFBfREVMRVRFRCAqL10gPSBcIkZpcmViYXNlIEFwcCBuYW1lZCAneyRhcHBOYW1lfScgYWxyZWFkeSBkZWxldGVkXCIsXHJcbiAgICBfYVtcImludmFsaWQtYXBwLWFyZ3VtZW50XCIgLyogSU5WQUxJRF9BUFBfQVJHVU1FTlQgKi9dID0gJ2ZpcmViYXNlLnskYXBwTmFtZX0oKSB0YWtlcyBlaXRoZXIgbm8gYXJndW1lbnQgb3IgYSAnICtcclxuICAgICAgICAnRmlyZWJhc2UgQXBwIGluc3RhbmNlLicsXHJcbiAgICBfYSk7XHJcbnZhciBFUlJPUl9GQUNUT1JZID0gbmV3IHV0aWwuRXJyb3JGYWN0b3J5KCdhcHAnLCAnRmlyZWJhc2UnLCBFUlJPUlMpO1xuXG52YXIgbmFtZSA9IFwiQGZpcmViYXNlL2FwcFwiO1xudmFyIHZlcnNpb24gPSBcIjAuNS4wXCI7XG5cbnZhciBuYW1lJDEgPSBcIkBmaXJlYmFzZS9hbmFseXRpY3NcIjtcblxudmFyIG5hbWUkMiA9IFwiQGZpcmViYXNlL2F1dGhcIjtcblxudmFyIG5hbWUkMyA9IFwiQGZpcmViYXNlL2RhdGFiYXNlXCI7XG5cbnZhciBuYW1lJDQgPSBcIkBmaXJlYmFzZS9mdW5jdGlvbnNcIjtcblxudmFyIG5hbWUkNSA9IFwiQGZpcmViYXNlL2luc3RhbGxhdGlvbnNcIjtcblxudmFyIG5hbWUkNiA9IFwiQGZpcmViYXNlL21lc3NhZ2luZ1wiO1xuXG52YXIgbmFtZSQ3ID0gXCJAZmlyZWJhc2UvcGVyZm9ybWFuY2VcIjtcblxudmFyIG5hbWUkOCA9IFwiQGZpcmViYXNlL3JlbW90ZS1jb25maWdcIjtcblxudmFyIG5hbWUkOSA9IFwiQGZpcmViYXNlL3N0b3JhZ2VcIjtcblxudmFyIG5hbWUkYSA9IFwiQGZpcmViYXNlL2ZpcmVzdG9yZVwiO1xuXG52YXIgbmFtZSRiID0gXCJmaXJlYmFzZS13cmFwcGVyXCI7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG52YXIgX2EkMTtcclxudmFyIERFRkFVTFRfRU5UUllfTkFNRSA9ICdbREVGQVVMVF0nO1xyXG52YXIgUExBVEZPUk1fTE9HX1NUUklORyA9IChfYSQxID0ge30sXHJcbiAgICBfYSQxW25hbWVdID0gJ2ZpcmUtY29yZScsXHJcbiAgICBfYSQxW25hbWUkMV0gPSAnZmlyZS1hbmFseXRpY3MnLFxyXG4gICAgX2EkMVtuYW1lJDJdID0gJ2ZpcmUtYXV0aCcsXHJcbiAgICBfYSQxW25hbWUkM10gPSAnZmlyZS1ydGRiJyxcclxuICAgIF9hJDFbbmFtZSQ0XSA9ICdmaXJlLWZuJyxcclxuICAgIF9hJDFbbmFtZSQ1XSA9ICdmaXJlLWlpZCcsXHJcbiAgICBfYSQxW25hbWUkNl0gPSAnZmlyZS1mY20nLFxyXG4gICAgX2EkMVtuYW1lJDddID0gJ2ZpcmUtcGVyZicsXHJcbiAgICBfYSQxW25hbWUkOF0gPSAnZmlyZS1yYycsXHJcbiAgICBfYSQxW25hbWUkOV0gPSAnZmlyZS1nY3MnLFxyXG4gICAgX2EkMVtuYW1lJGFdID0gJ2ZpcmUtZnN0JyxcclxuICAgIF9hJDFbJ2ZpcmUtanMnXSA9ICdmaXJlLWpzJyxcclxuICAgIF9hJDFbbmFtZSRiXSA9ICdmaXJlLWpzLWFsbCcsXHJcbiAgICBfYSQxKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnZhciBsb2dnZXIgPSBuZXcgbG9nZ2VyJDEuTG9nZ2VyKCdAZmlyZWJhc2UvYXBwJyk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogR2xvYmFsIGNvbnRleHQgb2JqZWN0IGZvciBhIGNvbGxlY3Rpb24gb2Ygc2VydmljZXMgdXNpbmdcclxuICogYSBzaGFyZWQgYXV0aGVudGljYXRpb24gc3RhdGUuXHJcbiAqL1xyXG52YXIgRmlyZWJhc2VBcHBJbXBsID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gRmlyZWJhc2VBcHBJbXBsKG9wdGlvbnMsIGNvbmZpZywgZmlyZWJhc2VfKSB7XHJcbiAgICAgICAgdmFyIGVfMSwgX2E7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB0aGlzLmZpcmViYXNlXyA9IGZpcmViYXNlXztcclxuICAgICAgICB0aGlzLmlzRGVsZXRlZF8gPSBmYWxzZTtcclxuICAgICAgICB0aGlzLm5hbWVfID0gY29uZmlnLm5hbWU7XHJcbiAgICAgICAgdGhpcy5hdXRvbWF0aWNEYXRhQ29sbGVjdGlvbkVuYWJsZWRfID1cclxuICAgICAgICAgICAgY29uZmlnLmF1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZCB8fCBmYWxzZTtcclxuICAgICAgICB0aGlzLm9wdGlvbnNfID0gdXRpbC5kZWVwQ29weShvcHRpb25zKTtcclxuICAgICAgICB0aGlzLmNvbnRhaW5lciA9IG5ldyBjb21wb25lbnQuQ29tcG9uZW50Q29udGFpbmVyKGNvbmZpZy5uYW1lKTtcclxuICAgICAgICAvLyBhZGQgaXRzZWxmIHRvIGNvbnRhaW5lclxyXG4gICAgICAgIHRoaXMuX2FkZENvbXBvbmVudChuZXcgY29tcG9uZW50LkNvbXBvbmVudCgnYXBwJywgZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXM7IH0sIFwiUFVCTElDXCIgLyogUFVCTElDICovKSk7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgLy8gcG9wdWxhdGUgQ29tcG9uZW50Q29udGFpbmVyIHdpdGggZXhpc3RpbmcgY29tcG9uZW50c1xyXG4gICAgICAgICAgICBmb3IgKHZhciBfYiA9IHRzbGliLl9fdmFsdWVzKHRoaXMuZmlyZWJhc2VfLklOVEVSTkFMLmNvbXBvbmVudHMudmFsdWVzKCkpLCBfYyA9IF9iLm5leHQoKTsgIV9jLmRvbmU7IF9jID0gX2IubmV4dCgpKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgY29tcG9uZW50JDEgPSBfYy52YWx1ZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2FkZENvbXBvbmVudChjb21wb25lbnQkMSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH1cclxuICAgICAgICBmaW5hbGx5IHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGlmIChfYyAmJiAhX2MuZG9uZSAmJiAoX2EgPSBfYi5yZXR1cm4pKSBfYS5jYWxsKF9iKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEZpcmViYXNlQXBwSW1wbC5wcm90b3R5cGUsIFwiYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdGhpcy5jaGVja0Rlc3Ryb3llZF8oKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkXztcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbCkge1xyXG4gICAgICAgICAgICB0aGlzLmNoZWNrRGVzdHJveWVkXygpO1xyXG4gICAgICAgICAgICB0aGlzLmF1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZF8gPSB2YWw7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoRmlyZWJhc2VBcHBJbXBsLnByb3RvdHlwZSwgXCJuYW1lXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdGhpcy5jaGVja0Rlc3Ryb3llZF8oKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubmFtZV87XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoRmlyZWJhc2VBcHBJbXBsLnByb3RvdHlwZSwgXCJvcHRpb25zXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdGhpcy5jaGVja0Rlc3Ryb3llZF8oKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9uc187XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBGaXJlYmFzZUFwcEltcGwucHJvdG90eXBlLmRlbGV0ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xyXG4gICAgICAgICAgICBfdGhpcy5jaGVja0Rlc3Ryb3llZF8oKTtcclxuICAgICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgX3RoaXMuZmlyZWJhc2VfLklOVEVSTkFMLnJlbW92ZUFwcChfdGhpcy5uYW1lXyk7XHJcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLmFsbChfdGhpcy5jb250YWluZXIuZ2V0UHJvdmlkZXJzKCkubWFwKGZ1bmN0aW9uIChwcm92aWRlcikgeyByZXR1cm4gcHJvdmlkZXIuZGVsZXRlKCk7IH0pKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIF90aGlzLmlzRGVsZXRlZF8gPSB0cnVlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJuIGEgc2VydmljZSBpbnN0YW5jZSBhc3NvY2lhdGVkIHdpdGggdGhpcyBhcHAgKGNyZWF0aW5nIGl0XHJcbiAgICAgKiBvbiBkZW1hbmQpLCBpZGVudGlmaWVkIGJ5IHRoZSBwYXNzZWQgaW5zdGFuY2VJZGVudGlmaWVyLlxyXG4gICAgICpcclxuICAgICAqIE5PVEU6IEN1cnJlbnRseSBzdG9yYWdlIGFuZCBmdW5jdGlvbnMgYXJlIHRoZSBvbmx5IG9uZXMgdGhhdCBhcmUgbGV2ZXJhZ2luZyB0aGlzXHJcbiAgICAgKiBmdW5jdGlvbmFsaXR5LiBUaGV5IGludm9rZSBpdCBieSBjYWxsaW5nOlxyXG4gICAgICpcclxuICAgICAqIGBgYGphdmFzY3JpcHRcclxuICAgICAqIGZpcmViYXNlLmFwcCgpLnN0b3JhZ2UoJ1NUT1JBR0UgQlVDS0VUIElEJylcclxuICAgICAqIGBgYFxyXG4gICAgICpcclxuICAgICAqIFRoZSBzZXJ2aWNlIG5hbWUgaXMgcGFzc2VkIHRvIHRoaXMgYWxyZWFkeVxyXG4gICAgICogQGludGVybmFsXHJcbiAgICAgKi9cclxuICAgIEZpcmViYXNlQXBwSW1wbC5wcm90b3R5cGUuX2dldFNlcnZpY2UgPSBmdW5jdGlvbiAobmFtZSwgaW5zdGFuY2VJZGVudGlmaWVyKSB7XHJcbiAgICAgICAgaWYgKGluc3RhbmNlSWRlbnRpZmllciA9PT0gdm9pZCAwKSB7IGluc3RhbmNlSWRlbnRpZmllciA9IERFRkFVTFRfRU5UUllfTkFNRTsgfVxyXG4gICAgICAgIHRoaXMuY2hlY2tEZXN0cm95ZWRfKCk7XHJcbiAgICAgICAgLy8gZ2V0SW1tZWRpYXRlIHdpbGwgYWx3YXlzIHN1Y2NlZWQgYmVjYXVzZSBfZ2V0U2VydmljZSBpcyBvbmx5IGNhbGxlZCBmb3IgcmVnaXN0ZXJlZCBjb21wb25lbnRzLlxyXG4gICAgICAgIHJldHVybiB0aGlzLmNvbnRhaW5lci5nZXRQcm92aWRlcihuYW1lKS5nZXRJbW1lZGlhdGUoe1xyXG4gICAgICAgICAgICBpZGVudGlmaWVyOiBpbnN0YW5jZUlkZW50aWZpZXJcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJlbW92ZSBhIHNlcnZpY2UgaW5zdGFuY2UgZnJvbSB0aGUgY2FjaGUsIHNvIHdlIHdpbGwgY3JlYXRlIGEgbmV3IGluc3RhbmNlIGZvciB0aGlzIHNlcnZpY2VcclxuICAgICAqIHdoZW4gcGVvcGxlIHRyeSB0byBnZXQgdGhpcyBzZXJ2aWNlIGFnYWluLlxyXG4gICAgICpcclxuICAgICAqIE5PVEU6IGN1cnJlbnRseSBvbmx5IGZpcmVzdG9yZSBpcyB1c2luZyB0aGlzIGZ1bmN0aW9uYWxpdHkgdG8gc3VwcG9ydCBmaXJlc3RvcmUgc2h1dGRvd24uXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIG5hbWUgVGhlIHNlcnZpY2UgbmFtZVxyXG4gICAgICogQHBhcmFtIGluc3RhbmNlSWRlbnRpZmllciBpbnN0YW5jZSBpZGVudGlmaWVyIGluIGNhc2UgbXVsdGlwbGUgaW5zdGFuY2VzIGFyZSBhbGxvd2VkXHJcbiAgICAgKiBAaW50ZXJuYWxcclxuICAgICAqL1xyXG4gICAgRmlyZWJhc2VBcHBJbXBsLnByb3RvdHlwZS5fcmVtb3ZlU2VydmljZUluc3RhbmNlID0gZnVuY3Rpb24gKG5hbWUsIGluc3RhbmNlSWRlbnRpZmllcikge1xyXG4gICAgICAgIGlmIChpbnN0YW5jZUlkZW50aWZpZXIgPT09IHZvaWQgMCkgeyBpbnN0YW5jZUlkZW50aWZpZXIgPSBERUZBVUxUX0VOVFJZX05BTUU7IH1cclxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG4gICAgICAgIHRoaXMuY29udGFpbmVyLmdldFByb3ZpZGVyKG5hbWUpLmNsZWFySW5zdGFuY2UoaW5zdGFuY2VJZGVudGlmaWVyKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSBjb21wb25lbnQgdGhlIGNvbXBvbmVudCBiZWluZyBhZGRlZCB0byB0aGlzIGFwcCdzIGNvbnRhaW5lclxyXG4gICAgICovXHJcbiAgICBGaXJlYmFzZUFwcEltcGwucHJvdG90eXBlLl9hZGRDb21wb25lbnQgPSBmdW5jdGlvbiAoY29tcG9uZW50KSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgdGhpcy5jb250YWluZXIuYWRkQ29tcG9uZW50KGNvbXBvbmVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZyhcIkNvbXBvbmVudCBcIiArIGNvbXBvbmVudC5uYW1lICsgXCIgZmFpbGVkIHRvIHJlZ2lzdGVyIHdpdGggRmlyZWJhc2VBcHAgXCIgKyB0aGlzLm5hbWUsIGUpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBGaXJlYmFzZUFwcEltcGwucHJvdG90eXBlLl9hZGRPck92ZXJ3cml0ZUNvbXBvbmVudCA9IGZ1bmN0aW9uIChjb21wb25lbnQpIHtcclxuICAgICAgICB0aGlzLmNvbnRhaW5lci5hZGRPck92ZXJ3cml0ZUNvbXBvbmVudChjb21wb25lbnQpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogVGhpcyBmdW5jdGlvbiB3aWxsIHRocm93IGFuIEVycm9yIGlmIHRoZSBBcHAgaGFzIGFscmVhZHkgYmVlbiBkZWxldGVkIC1cclxuICAgICAqIHVzZSBiZWZvcmUgcGVyZm9ybWluZyBBUEkgYWN0aW9ucyBvbiB0aGUgQXBwLlxyXG4gICAgICovXHJcbiAgICBGaXJlYmFzZUFwcEltcGwucHJvdG90eXBlLmNoZWNrRGVzdHJveWVkXyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAodGhpcy5pc0RlbGV0ZWRfKSB7XHJcbiAgICAgICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiYXBwLWRlbGV0ZWRcIiAvKiBBUFBfREVMRVRFRCAqLywgeyBhcHBOYW1lOiB0aGlzLm5hbWVfIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICByZXR1cm4gRmlyZWJhc2VBcHBJbXBsO1xyXG59KCkpO1xyXG4vLyBQcmV2ZW50IGRlYWQtY29kZSBlbGltaW5hdGlvbiBvZiB0aGVzZSBtZXRob2RzIHcvbyBpbnZhbGlkIHByb3BlcnR5XHJcbi8vIGNvcHlpbmcuXHJcbihGaXJlYmFzZUFwcEltcGwucHJvdG90eXBlLm5hbWUgJiYgRmlyZWJhc2VBcHBJbXBsLnByb3RvdHlwZS5vcHRpb25zKSB8fFxyXG4gICAgRmlyZWJhc2VBcHBJbXBsLnByb3RvdHlwZS5kZWxldGUgfHxcclxuICAgIGNvbnNvbGUubG9nKCdkYycpO1xuXG52YXIgdmVyc2lvbiQxID0gXCI3LjYuMFwiO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEJlY2F1c2UgYXV0aCBjYW4ndCBzaGFyZSBjb2RlIHdpdGggb3RoZXIgY29tcG9uZW50cywgd2UgYXR0YWNoIHRoZSB1dGlsaXR5IGZ1bmN0aW9uc1xyXG4gKiBpbiBhbiBpbnRlcm5hbCBuYW1lc3BhY2UgdG8gc2hhcmUgY29kZS5cclxuICogVGhpcyBmdW5jdGlvbiByZXR1cm4gYSBmaXJlYmFzZSBuYW1lc3BhY2Ugb2JqZWN0IHdpdGhvdXRcclxuICogYW55IHV0aWxpdHkgZnVuY3Rpb25zLCBzbyBpdCBjYW4gYmUgc2hhcmVkIGJldHdlZW4gdGhlIHJlZ3VsYXIgZmlyZWJhc2VOYW1lc3BhY2UgYW5kXHJcbiAqIHRoZSBsaXRlIHZlcnNpb24uXHJcbiAqL1xyXG5mdW5jdGlvbiBjcmVhdGVGaXJlYmFzZU5hbWVzcGFjZUNvcmUoZmlyZWJhc2VBcHBJbXBsKSB7XHJcbiAgICB2YXIgYXBwcyA9IHt9O1xyXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuICAgIHZhciBjb21wb25lbnRzID0gbmV3IE1hcCgpO1xyXG4gICAgLy8gQSBuYW1lc3BhY2UgaXMgYSBwbGFpbiBKYXZhU2NyaXB0IE9iamVjdC5cclxuICAgIHZhciBuYW1lc3BhY2UgPSB7XHJcbiAgICAgICAgLy8gSGFjayB0byBwcmV2ZW50IEJhYmVsIGZyb20gbW9kaWZ5aW5nIHRoZSBvYmplY3QgcmV0dXJuZWRcclxuICAgICAgICAvLyBhcyB0aGUgZmlyZWJhc2UgbmFtZXNwYWNlLlxyXG4gICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICBfX2VzTW9kdWxlOiB0cnVlLFxyXG4gICAgICAgIGluaXRpYWxpemVBcHA6IGluaXRpYWxpemVBcHAsXHJcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgIGFwcDogYXBwLFxyXG4gICAgICAgIHJlZ2lzdGVyVmVyc2lvbjogcmVnaXN0ZXJWZXJzaW9uLFxyXG4gICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICBhcHBzOiBudWxsLFxyXG4gICAgICAgIFNES19WRVJTSU9OOiB2ZXJzaW9uJDEsXHJcbiAgICAgICAgSU5URVJOQUw6IHtcclxuICAgICAgICAgICAgcmVnaXN0ZXJDb21wb25lbnQ6IHJlZ2lzdGVyQ29tcG9uZW50LFxyXG4gICAgICAgICAgICByZW1vdmVBcHA6IHJlbW92ZUFwcCxcclxuICAgICAgICAgICAgY29tcG9uZW50czogY29tcG9uZW50cyxcclxuICAgICAgICAgICAgdXNlQXNTZXJ2aWNlOiB1c2VBc1NlcnZpY2VcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLy8gSW5qZWN0IGEgY2lyY3VsYXIgZGVmYXVsdCBleHBvcnQgdG8gYWxsb3cgQmFiZWwgdXNlcnMgd2hvIHdlcmUgcHJldmlvdXNseVxyXG4gICAgLy8gdXNpbmc6XHJcbiAgICAvL1xyXG4gICAgLy8gICBpbXBvcnQgZmlyZWJhc2UgZnJvbSAnZmlyZWJhc2UnO1xyXG4gICAgLy8gICB3aGljaCBiZWNvbWVzOiB2YXIgZmlyZWJhc2UgPSByZXF1aXJlKCdmaXJlYmFzZScpLmRlZmF1bHQ7XHJcbiAgICAvL1xyXG4gICAgLy8gaW5zdGVhZCBvZlxyXG4gICAgLy9cclxuICAgIC8vICAgaW1wb3J0ICogYXMgZmlyZWJhc2UgZnJvbSAnZmlyZWJhc2UnO1xyXG4gICAgLy8gICB3aGljaCBiZWNvbWVzOiB2YXIgZmlyZWJhc2UgPSByZXF1aXJlKCdmaXJlYmFzZScpO1xyXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuICAgIG5hbWVzcGFjZVsnZGVmYXVsdCddID0gbmFtZXNwYWNlO1xyXG4gICAgLy8gZmlyZWJhc2UuYXBwcyBpcyBhIHJlYWQtb25seSBnZXR0ZXIuXHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobmFtZXNwYWNlLCAnYXBwcycsIHtcclxuICAgICAgICBnZXQ6IGdldEFwcHNcclxuICAgIH0pO1xyXG4gICAgLyoqXHJcbiAgICAgKiBDYWxsZWQgYnkgQXBwLmRlbGV0ZSgpIC0gYnV0IGJlZm9yZSBhbnkgc2VydmljZXMgYXNzb2NpYXRlZCB3aXRoIHRoZSBBcHBcclxuICAgICAqIGFyZSBkZWxldGVkLlxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiByZW1vdmVBcHAobmFtZSkge1xyXG4gICAgICAgIGRlbGV0ZSBhcHBzW25hbWVdO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgdGhlIEFwcCBvYmplY3QgZm9yIGEgZ2l2ZW4gbmFtZSAob3IgREVGQVVMVCkuXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIGFwcChuYW1lKSB7XHJcbiAgICAgICAgbmFtZSA9IG5hbWUgfHwgREVGQVVMVF9FTlRSWV9OQU1FO1xyXG4gICAgICAgIGlmICghdXRpbC5jb250YWlucyhhcHBzLCBuYW1lKSkge1xyXG4gICAgICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcIm5vLWFwcFwiIC8qIE5PX0FQUCAqLywgeyBhcHBOYW1lOiBuYW1lIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gYXBwc1tuYW1lXTtcclxuICAgIH1cclxuICAgIC8vIEB0cy1pZ25vcmVcclxuICAgIGFwcFsnQXBwJ10gPSBmaXJlYmFzZUFwcEltcGw7XHJcbiAgICBmdW5jdGlvbiBpbml0aWFsaXplQXBwKG9wdGlvbnMsIHJhd0NvbmZpZykge1xyXG4gICAgICAgIGlmIChyYXdDb25maWcgPT09IHZvaWQgMCkgeyByYXdDb25maWcgPSB7fTsgfVxyXG4gICAgICAgIGlmICh0eXBlb2YgcmF3Q29uZmlnICE9PSAnb2JqZWN0JyB8fCByYXdDb25maWcgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgdmFyIG5hbWVfMSA9IHJhd0NvbmZpZztcclxuICAgICAgICAgICAgcmF3Q29uZmlnID0geyBuYW1lOiBuYW1lXzEgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGNvbmZpZyA9IHJhd0NvbmZpZztcclxuICAgICAgICBpZiAoY29uZmlnLm5hbWUgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBjb25maWcubmFtZSA9IERFRkFVTFRfRU5UUllfTkFNRTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIG5hbWUgPSBjb25maWcubmFtZTtcclxuICAgICAgICBpZiAodHlwZW9mIG5hbWUgIT09ICdzdHJpbmcnIHx8ICFuYW1lKSB7XHJcbiAgICAgICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiYmFkLWFwcC1uYW1lXCIgLyogQkFEX0FQUF9OQU1FICovLCB7XHJcbiAgICAgICAgICAgICAgICBhcHBOYW1lOiBTdHJpbmcobmFtZSlcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh1dGlsLmNvbnRhaW5zKGFwcHMsIG5hbWUpKSB7XHJcbiAgICAgICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiZHVwbGljYXRlLWFwcFwiIC8qIERVUExJQ0FURV9BUFAgKi8sIHsgYXBwTmFtZTogbmFtZSB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGFwcCA9IG5ldyBmaXJlYmFzZUFwcEltcGwob3B0aW9ucywgY29uZmlnLCBuYW1lc3BhY2UpO1xyXG4gICAgICAgIGFwcHNbbmFtZV0gPSBhcHA7XHJcbiAgICAgICAgcmV0dXJuIGFwcDtcclxuICAgIH1cclxuICAgIC8qXHJcbiAgICAgKiBSZXR1cm4gYW4gYXJyYXkgb2YgYWxsIHRoZSBub24tZGVsZXRlZCBGaXJlYmFzZUFwcHMuXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIGdldEFwcHMoKSB7XHJcbiAgICAgICAgLy8gTWFrZSBhIGNvcHkgc28gY2FsbGVyIGNhbm5vdCBtdXRhdGUgdGhlIGFwcHMgbGlzdC5cclxuICAgICAgICByZXR1cm4gT2JqZWN0LmtleXMoYXBwcykubWFwKGZ1bmN0aW9uIChuYW1lKSB7IHJldHVybiBhcHBzW25hbWVdOyB9KTtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIHJlZ2lzdGVyQ29tcG9uZW50KGNvbXBvbmVudCkge1xyXG4gICAgICAgIHZhciBlXzEsIF9hO1xyXG4gICAgICAgIHZhciBjb21wb25lbnROYW1lID0gY29tcG9uZW50Lm5hbWU7XHJcbiAgICAgICAgaWYgKGNvbXBvbmVudHMuaGFzKGNvbXBvbmVudE5hbWUpKSB7XHJcbiAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZyhcIlRoZXJlIHdlcmUgbXVsdGlwbGUgYXR0ZW1wdHMgdG8gcmVnaXN0ZXIgY29tcG9uZW50IFwiICsgY29tcG9uZW50TmFtZSArIFwiLlwiKTtcclxuICAgICAgICAgICAgcmV0dXJuIGNvbXBvbmVudC50eXBlID09PSBcIlBVQkxJQ1wiIC8qIFBVQkxJQyAqL1xyXG4gICAgICAgICAgICAgICAgPyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG4gICAgICAgICAgICAgICAgICAgIG5hbWVzcGFjZVtjb21wb25lbnROYW1lXVxyXG4gICAgICAgICAgICAgICAgOiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb21wb25lbnRzLnNldChjb21wb25lbnROYW1lLCBjb21wb25lbnQpO1xyXG4gICAgICAgIC8vIGNyZWF0ZSBzZXJ2aWNlIG5hbWVzcGFjZSBmb3IgcHVibGljIGNvbXBvbmVudHNcclxuICAgICAgICBpZiAoY29tcG9uZW50LnR5cGUgPT09IFwiUFVCTElDXCIgLyogUFVCTElDICovKSB7XHJcbiAgICAgICAgICAgIC8vIFRoZSBTZXJ2aWNlIG5hbWVzcGFjZSBpcyBhbiBhY2Nlc3NvciBmdW5jdGlvbiAuLi5cclxuICAgICAgICAgICAgdmFyIHNlcnZpY2VOYW1lc3BhY2UgPSBmdW5jdGlvbiAoYXBwQXJnKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoYXBwQXJnID09PSB2b2lkIDApIHsgYXBwQXJnID0gYXBwKCk7IH1cclxuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGFwcEFyZ1tjb21wb25lbnROYW1lXSAhPT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIEludmFsaWQgYXJndW1lbnQuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gVGhpcyBoYXBwZW5zIGluIHRoZSBmb2xsb3dpbmcgY2FzZTogZmlyZWJhc2Uuc3RvcmFnZSgnZ3M6LycpXHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJpbnZhbGlkLWFwcC1hcmd1bWVudFwiIC8qIElOVkFMSURfQVBQX0FSR1VNRU5UICovLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFwcE5hbWU6IGNvbXBvbmVudE5hbWVcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIEZvcndhcmQgc2VydmljZSBpbnN0YW5jZSBsb29rdXAgdG8gdGhlIEZpcmViYXNlQXBwLlxyXG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuICAgICAgICAgICAgICAgIHJldHVybiBhcHBBcmdbY29tcG9uZW50TmFtZV0oKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgLy8gLi4uIGFuZCBhIGNvbnRhaW5lciBmb3Igc2VydmljZS1sZXZlbCBwcm9wZXJ0aWVzLlxyXG4gICAgICAgICAgICBpZiAoY29tcG9uZW50LnNlcnZpY2VQcm9wcyAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICB1dGlsLmRlZXBFeHRlbmQoc2VydmljZU5hbWVzcGFjZSwgY29tcG9uZW50LnNlcnZpY2VQcm9wcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuICAgICAgICAgICAgbmFtZXNwYWNlW2NvbXBvbmVudE5hbWVdID0gc2VydmljZU5hbWVzcGFjZTtcclxuICAgICAgICAgICAgLy8gUGF0Y2ggdGhlIEZpcmViYXNlQXBwSW1wbCBwcm90b3R5cGVcclxuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuICAgICAgICAgICAgZmlyZWJhc2VBcHBJbXBsLnByb3RvdHlwZVtjb21wb25lbnROYW1lXSA9XHJcbiAgICAgICAgICAgICAgICAvLyBUT0RPOiBUaGUgZXNsaW50IGRpc2FibGUgY2FuIGJlIHJlbW92ZWQgYW5kIHRoZSAnaWdub3JlUmVzdEFyZ3MnXHJcbiAgICAgICAgICAgICAgICAvLyBvcHRpb24gYWRkZWQgdG8gdGhlIG5vLWV4cGxpY2l0LWFueSBydWxlIHdoZW4gRVNsaW50IHJlbGVhc2VzIGl0LlxyXG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgYXJncyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzW19pXTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNlcnZpY2VGeG4gPSB0aGlzLl9nZXRTZXJ2aWNlLmJpbmQodGhpcywgY29tcG9uZW50TmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNlcnZpY2VGeG4uYXBwbHkodGhpcywgY29tcG9uZW50Lm11bHRpcGxlSW5zdGFuY2VzID8gYXJncyA6IFtdKTtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIC8vIGFkZCB0aGUgY29tcG9uZW50IHRvIGV4aXN0aW5nIGFwcCBpbnN0YW5jZXNcclxuICAgICAgICAgICAgZm9yICh2YXIgX2IgPSB0c2xpYi5fX3ZhbHVlcyhPYmplY3Qua2V5cyhhcHBzKSksIF9jID0gX2IubmV4dCgpOyAhX2MuZG9uZTsgX2MgPSBfYi5uZXh0KCkpIHtcclxuICAgICAgICAgICAgICAgIHZhciBhcHBOYW1lID0gX2MudmFsdWU7XHJcbiAgICAgICAgICAgICAgICBhcHBzW2FwcE5hbWVdLl9hZGRDb21wb25lbnQoY29tcG9uZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZV8xXzEpIHsgZV8xID0geyBlcnJvcjogZV8xXzEgfTsgfVxyXG4gICAgICAgIGZpbmFsbHkge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgaWYgKF9jICYmICFfYy5kb25lICYmIChfYSA9IF9iLnJldHVybikpIF9hLmNhbGwoX2IpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8xKSB0aHJvdyBlXzEuZXJyb3I7IH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGNvbXBvbmVudC50eXBlID09PSBcIlBVQkxJQ1wiIC8qIFBVQkxJQyAqL1xyXG4gICAgICAgICAgICA/IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbiAgICAgICAgICAgICAgICBuYW1lc3BhY2VbY29tcG9uZW50TmFtZV1cclxuICAgICAgICAgICAgOiBudWxsO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gcmVnaXN0ZXJWZXJzaW9uKGxpYnJhcnlLZXlPck5hbWUsIHZlcnNpb24sIHZhcmlhbnQpIHtcclxuICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgLy8gVE9ETzogV2UgY2FuIHVzZSB0aGlzIGNoZWNrIHRvIHdoaXRlbGlzdCBzdHJpbmdzIHdoZW4vaWYgd2Ugc2V0IHVwXHJcbiAgICAgICAgLy8gYSBnb29kIHdoaXRlbGlzdCBzeXN0ZW0uXHJcbiAgICAgICAgdmFyIGxpYnJhcnkgPSAoX2EgPSBQTEFURk9STV9MT0dfU1RSSU5HW2xpYnJhcnlLZXlPck5hbWVdLCAoX2EgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogbGlicmFyeUtleU9yTmFtZSkpO1xyXG4gICAgICAgIGlmICh2YXJpYW50KSB7XHJcbiAgICAgICAgICAgIGxpYnJhcnkgKz0gXCItXCIgKyB2YXJpYW50O1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgbGlicmFyeU1pc21hdGNoID0gbGlicmFyeS5tYXRjaCgvXFxzfFxcLy8pO1xyXG4gICAgICAgIHZhciB2ZXJzaW9uTWlzbWF0Y2ggPSB2ZXJzaW9uLm1hdGNoKC9cXHN8XFwvLyk7XHJcbiAgICAgICAgaWYgKGxpYnJhcnlNaXNtYXRjaCB8fCB2ZXJzaW9uTWlzbWF0Y2gpIHtcclxuICAgICAgICAgICAgdmFyIHdhcm5pbmcgPSBbXHJcbiAgICAgICAgICAgICAgICBcIlVuYWJsZSB0byByZWdpc3RlciBsaWJyYXJ5IFxcXCJcIiArIGxpYnJhcnkgKyBcIlxcXCIgd2l0aCB2ZXJzaW9uIFxcXCJcIiArIHZlcnNpb24gKyBcIlxcXCI6XCJcclxuICAgICAgICAgICAgXTtcclxuICAgICAgICAgICAgaWYgKGxpYnJhcnlNaXNtYXRjaCkge1xyXG4gICAgICAgICAgICAgICAgd2FybmluZy5wdXNoKFwibGlicmFyeSBuYW1lIFxcXCJcIiArIGxpYnJhcnkgKyBcIlxcXCIgY29udGFpbnMgaWxsZWdhbCBjaGFyYWN0ZXJzICh3aGl0ZXNwYWNlIG9yIFxcXCIvXFxcIilcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGxpYnJhcnlNaXNtYXRjaCAmJiB2ZXJzaW9uTWlzbWF0Y2gpIHtcclxuICAgICAgICAgICAgICAgIHdhcm5pbmcucHVzaCgnYW5kJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHZlcnNpb25NaXNtYXRjaCkge1xyXG4gICAgICAgICAgICAgICAgd2FybmluZy5wdXNoKFwidmVyc2lvbiBuYW1lIFxcXCJcIiArIHZlcnNpb24gKyBcIlxcXCIgY29udGFpbnMgaWxsZWdhbCBjaGFyYWN0ZXJzICh3aGl0ZXNwYWNlIG9yIFxcXCIvXFxcIilcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbG9nZ2VyLndhcm4od2FybmluZy5qb2luKCcgJykpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJlZ2lzdGVyQ29tcG9uZW50KG5ldyBjb21wb25lbnQuQ29tcG9uZW50KGxpYnJhcnkgKyBcIi12ZXJzaW9uXCIsIGZ1bmN0aW9uICgpIHsgcmV0dXJuICh7IGxpYnJhcnk6IGxpYnJhcnksIHZlcnNpb246IHZlcnNpb24gfSk7IH0sIFwiVkVSU0lPTlwiIC8qIFZFUlNJT04gKi8pKTtcclxuICAgIH1cclxuICAgIC8vIE1hcCB0aGUgcmVxdWVzdGVkIHNlcnZpY2UgdG8gYSByZWdpc3RlcmVkIHNlcnZpY2UgbmFtZVxyXG4gICAgLy8gKHVzZWQgdG8gbWFwIGF1dGggdG8gc2VydmVyQXV0aCBzZXJ2aWNlIHdoZW4gbmVlZGVkKS5cclxuICAgIGZ1bmN0aW9uIHVzZUFzU2VydmljZShhcHAsIG5hbWUpIHtcclxuICAgICAgICBpZiAobmFtZSA9PT0gJ3NlcnZlckF1dGgnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgdXNlU2VydmljZSA9IG5hbWU7XHJcbiAgICAgICAgcmV0dXJuIHVzZVNlcnZpY2U7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbmFtZXNwYWNlO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogUmV0dXJuIGEgZmlyZWJhc2UgbmFtZXNwYWNlIG9iamVjdC5cclxuICpcclxuICogSW4gcHJvZHVjdGlvbiwgdGhpcyB3aWxsIGJlIGNhbGxlZCBleGFjdGx5IG9uY2UgYW5kIHRoZSByZXN1bHRcclxuICogYXNzaWduZWQgdG8gdGhlICdmaXJlYmFzZScgZ2xvYmFsLiAgSXQgbWF5IGJlIGNhbGxlZCBtdWx0aXBsZSB0aW1lc1xyXG4gKiBpbiB1bml0IHRlc3RzLlxyXG4gKi9cclxuZnVuY3Rpb24gY3JlYXRlRmlyZWJhc2VOYW1lc3BhY2UoKSB7XHJcbiAgICB2YXIgbmFtZXNwYWNlID0gY3JlYXRlRmlyZWJhc2VOYW1lc3BhY2VDb3JlKEZpcmViYXNlQXBwSW1wbCk7XHJcbiAgICBuYW1lc3BhY2UuSU5URVJOQUwgPSB0c2xpYi5fX2Fzc2lnbih0c2xpYi5fX2Fzc2lnbih7fSwgbmFtZXNwYWNlLklOVEVSTkFMKSwgeyBjcmVhdGVGaXJlYmFzZU5hbWVzcGFjZTogY3JlYXRlRmlyZWJhc2VOYW1lc3BhY2UsXHJcbiAgICAgICAgZXh0ZW5kTmFtZXNwYWNlOiBleHRlbmROYW1lc3BhY2UsXHJcbiAgICAgICAgY3JlYXRlU3Vic2NyaWJlOiB1dGlsLmNyZWF0ZVN1YnNjcmliZSxcclxuICAgICAgICBFcnJvckZhY3Rvcnk6IHV0aWwuRXJyb3JGYWN0b3J5LFxyXG4gICAgICAgIGRlZXBFeHRlbmQ6IHV0aWwuZGVlcEV4dGVuZCB9KTtcclxuICAgIC8qKlxyXG4gICAgICogUGF0Y2ggdGhlIHRvcC1sZXZlbCBmaXJlYmFzZSBuYW1lc3BhY2Ugd2l0aCBhZGRpdGlvbmFsIHByb3BlcnRpZXMuXHJcbiAgICAgKlxyXG4gICAgICogZmlyZWJhc2UuSU5URVJOQUwuZXh0ZW5kTmFtZXNwYWNlKClcclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gZXh0ZW5kTmFtZXNwYWNlKHByb3BzKSB7XHJcbiAgICAgICAgdXRpbC5kZWVwRXh0ZW5kKG5hbWVzcGFjZSwgcHJvcHMpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG5hbWVzcGFjZTtcclxufVxyXG52YXIgZmlyZWJhc2UgPSBjcmVhdGVGaXJlYmFzZU5hbWVzcGFjZSgpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxudmFyIFBsYXRmb3JtTG9nZ2VyU2VydmljZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFBsYXRmb3JtTG9nZ2VyU2VydmljZShjb250YWluZXIpIHtcclxuICAgICAgICB0aGlzLmNvbnRhaW5lciA9IGNvbnRhaW5lcjtcclxuICAgIH1cclxuICAgIC8vIEluIGluaXRpYWwgaW1wbGVtZW50YXRpb24sIHRoaXMgd2lsbCBiZSBjYWxsZWQgYnkgaW5zdGFsbGF0aW9ucyBvblxyXG4gICAgLy8gYXV0aCB0b2tlbiByZWZyZXNoLCBhbmQgaW5zdGFsbGF0aW9ucyB3aWxsIHNlbmQgdGhpcyBzdHJpbmcuXHJcbiAgICBQbGF0Zm9ybUxvZ2dlclNlcnZpY2UucHJvdG90eXBlLmdldFBsYXRmb3JtSW5mb1N0cmluZyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgcHJvdmlkZXJzID0gdGhpcy5jb250YWluZXIuZ2V0UHJvdmlkZXJzKCk7XHJcbiAgICAgICAgLy8gTG9vcCB0aHJvdWdoIHByb3ZpZGVycyBhbmQgZ2V0IGxpYnJhcnkvdmVyc2lvbiBwYWlycyBmcm9tIGFueSB0aGF0IGFyZVxyXG4gICAgICAgIC8vIHZlcnNpb24gY29tcG9uZW50cy5cclxuICAgICAgICByZXR1cm4gcHJvdmlkZXJzXHJcbiAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24gKHByb3ZpZGVyKSB7XHJcbiAgICAgICAgICAgIGlmIChpc1ZlcnNpb25TZXJ2aWNlUHJvdmlkZXIocHJvdmlkZXIpKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgc2VydmljZSA9IHByb3ZpZGVyLmdldEltbWVkaWF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHNlcnZpY2UubGlicmFyeSArIFwiL1wiICsgc2VydmljZS52ZXJzaW9uO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAuZmlsdGVyKGZ1bmN0aW9uIChsb2dTdHJpbmcpIHsgcmV0dXJuIGxvZ1N0cmluZzsgfSlcclxuICAgICAgICAgICAgLmpvaW4oJyAnKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gUGxhdGZvcm1Mb2dnZXJTZXJ2aWNlO1xyXG59KCkpO1xyXG4vKipcclxuICpcclxuICogQHBhcmFtIHByb3ZpZGVyIGNoZWNrIGlmIHRoaXMgcHJvdmlkZXIgcHJvdmlkZXMgYSBWZXJzaW9uU2VydmljZVxyXG4gKlxyXG4gKiBOT1RFOiBVc2luZyBQcm92aWRlcjwnYXBwLXZlcnNpb24nPiBpcyBhIGhhY2sgdG8gaW5kaWNhdGUgdGhhdCB0aGUgcHJvdmlkZXJcclxuICogcHJvdmlkZXMgVmVyc2lvblNlcnZpY2UuIFRoZSBwcm92aWRlciBpcyBub3QgbmVjZXNzYXJpbHkgYSAnYXBwLXZlcnNpb24nXHJcbiAqIHByb3ZpZGVyLlxyXG4gKi9cclxuZnVuY3Rpb24gaXNWZXJzaW9uU2VydmljZVByb3ZpZGVyKHByb3ZpZGVyKSB7XHJcbiAgICB2YXIgX2E7XHJcbiAgICB2YXIgY29tcG9uZW50ID0gcHJvdmlkZXIuZ2V0Q29tcG9uZW50KCk7XHJcbiAgICByZXR1cm4gKChfYSA9IGNvbXBvbmVudCkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnR5cGUpID09PSBcIlZFUlNJT05cIiAvKiBWRVJTSU9OICovO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiByZWdpc3RlckNvcmVDb21wb25lbnRzKGZpcmViYXNlLCB2YXJpYW50KSB7XHJcbiAgICBmaXJlYmFzZS5JTlRFUk5BTC5yZWdpc3RlckNvbXBvbmVudChuZXcgY29tcG9uZW50LkNvbXBvbmVudCgncGxhdGZvcm0tbG9nZ2VyJywgZnVuY3Rpb24gKGNvbnRhaW5lcikgeyByZXR1cm4gbmV3IFBsYXRmb3JtTG9nZ2VyU2VydmljZShjb250YWluZXIpOyB9LCBcIlBSSVZBVEVcIiAvKiBQUklWQVRFICovKSk7XHJcbiAgICAvLyBSZWdpc3RlciBgYXBwYCBwYWNrYWdlLlxyXG4gICAgZmlyZWJhc2UucmVnaXN0ZXJWZXJzaW9uKG5hbWUsIHZlcnNpb24sIHZhcmlhbnQpO1xyXG4gICAgLy8gUmVnaXN0ZXIgcGxhdGZvcm0gU0RLIGlkZW50aWZpZXIgKG5vIHZlcnNpb24pLlxyXG4gICAgZmlyZWJhc2UucmVnaXN0ZXJWZXJzaW9uKCdmaXJlLWpzJywgJycpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vLyBGaXJlYmFzZSBMaXRlIGRldGVjdGlvblxyXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG5pZiAodXRpbC5pc0Jyb3dzZXIoKSAmJiBzZWxmLmZpcmViYXNlICE9PSB1bmRlZmluZWQpIHtcclxuICAgIGxvZ2dlci53YXJuKFwiXFxuICAgIFdhcm5pbmc6IEZpcmViYXNlIGlzIGFscmVhZHkgZGVmaW5lZCBpbiB0aGUgZ2xvYmFsIHNjb3BlLiBQbGVhc2UgbWFrZSBzdXJlXFxuICAgIEZpcmViYXNlIGxpYnJhcnkgaXMgb25seSBsb2FkZWQgb25jZS5cXG4gIFwiKTtcclxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxyXG4gICAgdmFyIHNka1ZlcnNpb24gPSBzZWxmLmZpcmViYXNlLlNES19WRVJTSU9OO1xyXG4gICAgaWYgKHNka1ZlcnNpb24gJiYgc2RrVmVyc2lvbi5pbmRleE9mKCdMSVRFJykgPj0gMCkge1xyXG4gICAgICAgIGxvZ2dlci53YXJuKFwiXFxuICAgIFdhcm5pbmc6IFlvdSBhcmUgdHJ5aW5nIHRvIGxvYWQgRmlyZWJhc2Ugd2hpbGUgdXNpbmcgRmlyZWJhc2UgUGVyZm9ybWFuY2Ugc3RhbmRhbG9uZSBzY3JpcHQuXFxuICAgIFlvdSBzaG91bGQgbG9hZCBGaXJlYmFzZSBQZXJmb3JtYW5jZSB3aXRoIHRoaXMgaW5zdGFuY2Ugb2YgRmlyZWJhc2UgdG8gYXZvaWQgbG9hZGluZyBkdXBsaWNhdGUgY29kZS5cXG4gICAgXCIpO1xyXG4gICAgfVxyXG59XHJcbnZhciBpbml0aWFsaXplQXBwID0gZmlyZWJhc2UuaW5pdGlhbGl6ZUFwcDtcclxuLy8gVE9ETzogVGhpcyBkaXNhYmxlIGNhbiBiZSByZW1vdmVkIGFuZCB0aGUgJ2lnbm9yZVJlc3RBcmdzJyBvcHRpb24gYWRkZWQgdG9cclxuLy8gdGhlIG5vLWV4cGxpY2l0LWFueSBydWxlIHdoZW4gRVNsaW50IHJlbGVhc2VzIGl0LlxyXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG5maXJlYmFzZS5pbml0aWFsaXplQXBwID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGFyZ3MgPSBbXTtcclxuICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xyXG4gICAgfVxyXG4gICAgLy8gRW52aXJvbm1lbnQgY2hlY2sgYmVmb3JlIGluaXRpYWxpemluZyBhcHBcclxuICAgIC8vIERvIHRoZSBjaGVjayBpbiBpbml0aWFsaXplQXBwLCBzbyBwZW9wbGUgaGF2ZSBhIGNoYW5jZSB0byBkaXNhYmxlIGl0IGJ5IHNldHRpbmcgbG9nTGV2ZWxcclxuICAgIC8vIGluIEBmaXJlYmFzZS9sb2dnZXJcclxuICAgIGlmICh1dGlsLmlzTm9kZSgpKSB7XHJcbiAgICAgICAgbG9nZ2VyLndhcm4oXCJcXG4gICAgICBXYXJuaW5nOiBUaGlzIGlzIGEgYnJvd3Nlci10YXJnZXRlZCBGaXJlYmFzZSBidW5kbGUgYnV0IGl0IGFwcGVhcnMgaXQgaXMgYmVpbmdcXG4gICAgICBydW4gaW4gYSBOb2RlIGVudmlyb25tZW50LiAgSWYgcnVubmluZyBpbiBhIE5vZGUgZW52aXJvbm1lbnQsIG1ha2Ugc3VyZSB5b3VcXG4gICAgICBhcmUgdXNpbmcgdGhlIGJ1bmRsZSBzcGVjaWZpZWQgYnkgdGhlIFxcXCJtYWluXFxcIiBmaWVsZCBpbiBwYWNrYWdlLmpzb24uXFxuICAgICAgXFxuICAgICAgSWYgeW91IGFyZSB1c2luZyBXZWJwYWNrLCB5b3UgY2FuIHNwZWNpZnkgXFxcIm1haW5cXFwiIGFzIHRoZSBmaXJzdCBpdGVtIGluXFxuICAgICAgXFxcInJlc29sdmUubWFpbkZpZWxkc1xcXCI6XFxuICAgICAgaHR0cHM6Ly93ZWJwYWNrLmpzLm9yZy9jb25maWd1cmF0aW9uL3Jlc29sdmUvI3Jlc29sdmVtYWluZmllbGRzXFxuICAgICAgXFxuICAgICAgSWYgdXNpbmcgUm9sbHVwLCB1c2UgdGhlIHJvbGx1cC1wbHVnaW4tbm9kZS1yZXNvbHZlIHBsdWdpbiBhbmQgc3BlY2lmeSBcXFwibWFpblxcXCJcXG4gICAgICBhcyB0aGUgZmlyc3QgaXRlbSBpbiBcXFwibWFpbkZpZWxkc1xcXCIsIGUuZy4gWydtYWluJywgJ21vZHVsZSddLlxcbiAgICAgIGh0dHBzOi8vZ2l0aHViLmNvbS9yb2xsdXAvcm9sbHVwLXBsdWdpbi1ub2RlLXJlc29sdmVcXG4gICAgICBcIik7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gaW5pdGlhbGl6ZUFwcC5hcHBseSh1bmRlZmluZWQsIGFyZ3MpO1xyXG59O1xyXG52YXIgZmlyZWJhc2UkMSA9IGZpcmViYXNlO1xyXG5yZWdpc3RlckNvcmVDb21wb25lbnRzKGZpcmViYXNlJDEpO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBmaXJlYmFzZSQxO1xuZXhwb3J0cy5maXJlYmFzZSA9IGZpcmViYXNlJDE7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5janMuanMubWFwXG4iLCIndXNlIHN0cmljdCc7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wRGVmYXVsdCAoZXgpIHsgcmV0dXJuIChleCAmJiAodHlwZW9mIGV4ID09PSAnb2JqZWN0JykgJiYgJ2RlZmF1bHQnIGluIGV4KSA/IGV4WydkZWZhdWx0J10gOiBleDsgfVxuXG52YXIgZmlyZWJhc2UgPSBfaW50ZXJvcERlZmF1bHQocmVxdWlyZSgnQGZpcmViYXNlL2FwcCcpKTtcblxudmFyIG5hbWUgPSBcImZpcmViYXNlXCI7XG52YXIgdmVyc2lvbiA9IFwiNy42LjFcIjtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZpcmViYXNlLnJlZ2lzdGVyVmVyc2lvbihuYW1lLCB2ZXJzaW9uLCAnYXBwJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZmlyZWJhc2U7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5janMuanMubWFwXG4iLCJ2YXIgZztcblxuLy8gVGhpcyB3b3JrcyBpbiBub24tc3RyaWN0IG1vZGVcbmcgPSAoZnVuY3Rpb24oKSB7XG5cdHJldHVybiB0aGlzO1xufSkoKTtcblxudHJ5IHtcblx0Ly8gVGhpcyB3b3JrcyBpZiBldmFsIGlzIGFsbG93ZWQgKHNlZSBDU1ApXG5cdGcgPSBnIHx8IG5ldyBGdW5jdGlvbihcInJldHVybiB0aGlzXCIpKCk7XG59IGNhdGNoIChlKSB7XG5cdC8vIFRoaXMgd29ya3MgaWYgdGhlIHdpbmRvdyByZWZlcmVuY2UgaXMgYXZhaWxhYmxlXG5cdGlmICh0eXBlb2Ygd2luZG93ID09PSBcIm9iamVjdFwiKSBnID0gd2luZG93O1xufVxuXG4vLyBnIGNhbiBzdGlsbCBiZSB1bmRlZmluZWQsIGJ1dCBub3RoaW5nIHRvIGRvIGFib3V0IGl0Li4uXG4vLyBXZSByZXR1cm4gdW5kZWZpbmVkLCBpbnN0ZWFkIG9mIG5vdGhpbmcgaGVyZSwgc28gaXQnc1xuLy8gZWFzaWVyIHRvIGhhbmRsZSB0aGlzIGNhc2UuIGlmKCFnbG9iYWwpIHsgLi4ufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGc7XG4iLCIvKiEgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbkxpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZVxyXG50aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4gWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZVxyXG5MaWNlbnNlIGF0IGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG5cclxuVEhJUyBDT0RFIElTIFBST1ZJREVEIE9OIEFOICpBUyBJUyogQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxyXG5LSU5ELCBFSVRIRVIgRVhQUkVTUyBPUiBJTVBMSUVELCBJTkNMVURJTkcgV0lUSE9VVCBMSU1JVEFUSU9OIEFOWSBJTVBMSUVEXHJcbldBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBUSVRMRSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UsXHJcbk1FUkNIQU5UQUJMSVRZIE9SIE5PTi1JTkZSSU5HRU1FTlQuXHJcblxyXG5TZWUgdGhlIEFwYWNoZSBWZXJzaW9uIDIuMCBMaWNlbnNlIGZvciBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnNcclxuYW5kIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqL1xyXG5cclxuZnVuY3Rpb24gX19zcHJlYWRBcnJheXMoKSB7XHJcbiAgICBmb3IgKHZhciBzID0gMCwgaSA9IDAsIGlsID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IGlsOyBpKyspIHMgKz0gYXJndW1lbnRzW2ldLmxlbmd0aDtcclxuICAgIGZvciAodmFyIHIgPSBBcnJheShzKSwgayA9IDAsIGkgPSAwOyBpIDwgaWw7IGkrKylcclxuICAgICAgICBmb3IgKHZhciBhID0gYXJndW1lbnRzW2ldLCBqID0gMCwgamwgPSBhLmxlbmd0aDsgaiA8IGpsOyBqKyssIGsrKylcclxuICAgICAgICAgICAgcltrXSA9IGFbal07XHJcbiAgICByZXR1cm4gcjtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEEgY29udGFpbmVyIGZvciBhbGwgb2YgdGhlIExvZ2dlciBpbnN0YW5jZXNcclxuICovXHJcbnZhciBpbnN0YW5jZXMgPSBbXTtcclxuLyoqXHJcbiAqIFRoZSBKUyBTREsgc3VwcG9ydHMgNSBsb2cgbGV2ZWxzIGFuZCBhbHNvIGFsbG93cyBhIHVzZXIgdGhlIGFiaWxpdHkgdG9cclxuICogc2lsZW5jZSB0aGUgbG9ncyBhbHRvZ2V0aGVyLlxyXG4gKlxyXG4gKiBUaGUgb3JkZXIgaXMgYSBmb2xsb3dzOlxyXG4gKiBERUJVRyA8IFZFUkJPU0UgPCBJTkZPIDwgV0FSTiA8IEVSUk9SXHJcbiAqXHJcbiAqIEFsbCBvZiB0aGUgbG9nIHR5cGVzIGFib3ZlIHRoZSBjdXJyZW50IGxvZyBsZXZlbCB3aWxsIGJlIGNhcHR1cmVkIChpLmUuIGlmXHJcbiAqIHlvdSBzZXQgdGhlIGxvZyBsZXZlbCB0byBgSU5GT2AsIGVycm9ycyB3aWxsIHN0aWxsIGJlIGxvZ2dlZCwgYnV0IGBERUJVR2AgYW5kXHJcbiAqIGBWRVJCT1NFYCBsb2dzIHdpbGwgbm90KVxyXG4gKi9cclxudmFyIExvZ0xldmVsO1xyXG4oZnVuY3Rpb24gKExvZ0xldmVsKSB7XHJcbiAgICBMb2dMZXZlbFtMb2dMZXZlbFtcIkRFQlVHXCJdID0gMF0gPSBcIkRFQlVHXCI7XHJcbiAgICBMb2dMZXZlbFtMb2dMZXZlbFtcIlZFUkJPU0VcIl0gPSAxXSA9IFwiVkVSQk9TRVwiO1xyXG4gICAgTG9nTGV2ZWxbTG9nTGV2ZWxbXCJJTkZPXCJdID0gMl0gPSBcIklORk9cIjtcclxuICAgIExvZ0xldmVsW0xvZ0xldmVsW1wiV0FSTlwiXSA9IDNdID0gXCJXQVJOXCI7XHJcbiAgICBMb2dMZXZlbFtMb2dMZXZlbFtcIkVSUk9SXCJdID0gNF0gPSBcIkVSUk9SXCI7XHJcbiAgICBMb2dMZXZlbFtMb2dMZXZlbFtcIlNJTEVOVFwiXSA9IDVdID0gXCJTSUxFTlRcIjtcclxufSkoTG9nTGV2ZWwgfHwgKExvZ0xldmVsID0ge30pKTtcclxuLyoqXHJcbiAqIFRoZSBkZWZhdWx0IGxvZyBsZXZlbFxyXG4gKi9cclxudmFyIGRlZmF1bHRMb2dMZXZlbCA9IExvZ0xldmVsLklORk87XHJcbi8qKlxyXG4gKiBUaGUgZGVmYXVsdCBsb2cgaGFuZGxlciB3aWxsIGZvcndhcmQgREVCVUcsIFZFUkJPU0UsIElORk8sIFdBUk4sIGFuZCBFUlJPUlxyXG4gKiBtZXNzYWdlcyBvbiB0byB0aGVpciBjb3JyZXNwb25kaW5nIGNvbnNvbGUgY291bnRlcnBhcnRzIChpZiB0aGUgbG9nIG1ldGhvZFxyXG4gKiBpcyBzdXBwb3J0ZWQgYnkgdGhlIGN1cnJlbnQgbG9nIGxldmVsKVxyXG4gKi9cclxudmFyIGRlZmF1bHRMb2dIYW5kbGVyID0gZnVuY3Rpb24gKGluc3RhbmNlLCBsb2dUeXBlKSB7XHJcbiAgICB2YXIgYXJncyA9IFtdO1xyXG4gICAgZm9yICh2YXIgX2kgPSAyOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICBhcmdzW19pIC0gMl0gPSBhcmd1bWVudHNbX2ldO1xyXG4gICAgfVxyXG4gICAgaWYgKGxvZ1R5cGUgPCBpbnN0YW5jZS5sb2dMZXZlbCkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIHZhciBub3cgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XHJcbiAgICBzd2l0Y2ggKGxvZ1R5cGUpIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBCeSBkZWZhdWx0LCBgY29uc29sZS5kZWJ1Z2AgaXMgbm90IGRpc3BsYXllZCBpbiB0aGUgZGV2ZWxvcGVyIGNvbnNvbGUgKGluXHJcbiAgICAgICAgICogY2hyb21lKS4gVG8gYXZvaWQgZm9yY2luZyB1c2VycyB0byBoYXZlIHRvIG9wdC1pbiB0byB0aGVzZSBsb2dzIHR3aWNlXHJcbiAgICAgICAgICogKGkuZS4gb25jZSBmb3IgZmlyZWJhc2UsIGFuZCBvbmNlIGluIHRoZSBjb25zb2xlKSwgd2UgYXJlIHNlbmRpbmcgYERFQlVHYFxyXG4gICAgICAgICAqIGxvZ3MgdG8gdGhlIGBjb25zb2xlLmxvZ2AgZnVuY3Rpb24uXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgY2FzZSBMb2dMZXZlbC5ERUJVRzpcclxuICAgICAgICAgICAgY29uc29sZS5sb2cuYXBwbHkoY29uc29sZSwgX19zcHJlYWRBcnJheXMoW1wiW1wiICsgbm93ICsgXCJdICBcIiArIGluc3RhbmNlLm5hbWUgKyBcIjpcIl0sIGFyZ3MpKTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBMb2dMZXZlbC5WRVJCT1NFOlxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZy5hcHBseShjb25zb2xlLCBfX3NwcmVhZEFycmF5cyhbXCJbXCIgKyBub3cgKyBcIl0gIFwiICsgaW5zdGFuY2UubmFtZSArIFwiOlwiXSwgYXJncykpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIExvZ0xldmVsLklORk86XHJcbiAgICAgICAgICAgIGNvbnNvbGUuaW5mby5hcHBseShjb25zb2xlLCBfX3NwcmVhZEFycmF5cyhbXCJbXCIgKyBub3cgKyBcIl0gIFwiICsgaW5zdGFuY2UubmFtZSArIFwiOlwiXSwgYXJncykpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIExvZ0xldmVsLldBUk46XHJcbiAgICAgICAgICAgIGNvbnNvbGUud2Fybi5hcHBseShjb25zb2xlLCBfX3NwcmVhZEFycmF5cyhbXCJbXCIgKyBub3cgKyBcIl0gIFwiICsgaW5zdGFuY2UubmFtZSArIFwiOlwiXSwgYXJncykpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIExvZ0xldmVsLkVSUk9SOlxyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yLmFwcGx5KGNvbnNvbGUsIF9fc3ByZWFkQXJyYXlzKFtcIltcIiArIG5vdyArIFwiXSAgXCIgKyBpbnN0YW5jZS5uYW1lICsgXCI6XCJdLCBhcmdzKSk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkF0dGVtcHRlZCB0byBsb2cgYSBtZXNzYWdlIHdpdGggYW4gaW52YWxpZCBsb2dUeXBlICh2YWx1ZTogXCIgKyBsb2dUeXBlICsgXCIpXCIpO1xyXG4gICAgfVxyXG59O1xyXG52YXIgTG9nZ2VyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgLyoqXHJcbiAgICAgKiBHaXZlcyB5b3UgYW4gaW5zdGFuY2Ugb2YgYSBMb2dnZXIgdG8gY2FwdHVyZSBtZXNzYWdlcyBhY2NvcmRpbmcgdG9cclxuICAgICAqIEZpcmViYXNlJ3MgbG9nZ2luZyBzY2hlbWUuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIG5hbWUgVGhlIG5hbWUgdGhhdCB0aGUgbG9ncyB3aWxsIGJlIGFzc29jaWF0ZWQgd2l0aFxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBMb2dnZXIobmFtZSkge1xyXG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVGhlIGxvZyBsZXZlbCBvZiB0aGUgZ2l2ZW4gTG9nZ2VyIGluc3RhbmNlLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuX2xvZ0xldmVsID0gZGVmYXVsdExvZ0xldmVsO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRoZSBsb2cgaGFuZGxlciBmb3IgdGhlIExvZ2dlciBpbnN0YW5jZS5cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLl9sb2dIYW5kbGVyID0gZGVmYXVsdExvZ0hhbmRsZXI7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ2FwdHVyZSB0aGUgY3VycmVudCBpbnN0YW5jZSBmb3IgbGF0ZXIgdXNlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgaW5zdGFuY2VzLnB1c2godGhpcyk7XHJcbiAgICB9XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTG9nZ2VyLnByb3RvdHlwZSwgXCJsb2dMZXZlbFwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9sb2dMZXZlbDtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbCkge1xyXG4gICAgICAgICAgICBpZiAoISh2YWwgaW4gTG9nTGV2ZWwpKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdJbnZhbGlkIHZhbHVlIGFzc2lnbmVkIHRvIGBsb2dMZXZlbGAnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLl9sb2dMZXZlbCA9IHZhbDtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShMb2dnZXIucHJvdG90eXBlLCBcImxvZ0hhbmRsZXJcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fbG9nSGFuZGxlcjtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbCkge1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIHZhbCAhPT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVmFsdWUgYXNzaWduZWQgdG8gYGxvZ0hhbmRsZXJgIG11c3QgYmUgYSBmdW5jdGlvbicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuX2xvZ0hhbmRsZXIgPSB2YWw7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICAvKipcclxuICAgICAqIFRoZSBmdW5jdGlvbnMgYmVsb3cgYXJlIGFsbCBiYXNlZCBvbiB0aGUgYGNvbnNvbGVgIGludGVyZmFjZVxyXG4gICAgICovXHJcbiAgICBMb2dnZXIucHJvdG90eXBlLmRlYnVnID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBhcmdzID0gW107XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9sb2dIYW5kbGVyLmFwcGx5KHRoaXMsIF9fc3ByZWFkQXJyYXlzKFt0aGlzLCBMb2dMZXZlbC5ERUJVR10sIGFyZ3MpKTtcclxuICAgIH07XHJcbiAgICBMb2dnZXIucHJvdG90eXBlLmxvZyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgYXJncyA9IFtdO1xyXG4gICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzW19pXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fbG9nSGFuZGxlci5hcHBseSh0aGlzLCBfX3NwcmVhZEFycmF5cyhbdGhpcywgTG9nTGV2ZWwuVkVSQk9TRV0sIGFyZ3MpKTtcclxuICAgIH07XHJcbiAgICBMb2dnZXIucHJvdG90eXBlLmluZm8gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGFyZ3MgPSBbXTtcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICBhcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX2xvZ0hhbmRsZXIuYXBwbHkodGhpcywgX19zcHJlYWRBcnJheXMoW3RoaXMsIExvZ0xldmVsLklORk9dLCBhcmdzKSk7XHJcbiAgICB9O1xyXG4gICAgTG9nZ2VyLnByb3RvdHlwZS53YXJuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBhcmdzID0gW107XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9sb2dIYW5kbGVyLmFwcGx5KHRoaXMsIF9fc3ByZWFkQXJyYXlzKFt0aGlzLCBMb2dMZXZlbC5XQVJOXSwgYXJncykpO1xyXG4gICAgfTtcclxuICAgIExvZ2dlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGFyZ3MgPSBbXTtcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICBhcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX2xvZ0hhbmRsZXIuYXBwbHkodGhpcywgX19zcHJlYWRBcnJheXMoW3RoaXMsIExvZ0xldmVsLkVSUk9SXSwgYXJncykpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBMb2dnZXI7XHJcbn0oKSk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBzZXRMb2dMZXZlbChsZXZlbCkge1xyXG4gICAgaW5zdGFuY2VzLmZvckVhY2goZnVuY3Rpb24gKGluc3QpIHtcclxuICAgICAgICBpbnN0LmxvZ0xldmVsID0gbGV2ZWw7XHJcbiAgICB9KTtcclxufVxuXG5leHBvcnQgeyBMb2dMZXZlbCwgTG9nZ2VyLCBzZXRMb2dMZXZlbCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguZXNtLmpzLm1hcFxuIiwiKGZ1bmN0aW9uIChnbG9iYWwsIGZhY3RvcnkpIHtcbiAgdHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnID8gZmFjdG9yeShleHBvcnRzKSA6XG4gIHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCA/IGRlZmluZShbJ2V4cG9ydHMnXSwgZmFjdG9yeSkgOlxuICAoZ2xvYmFsID0gZ2xvYmFsIHx8IHNlbGYsIGZhY3RvcnkoZ2xvYmFsLmlkYiA9IHt9KSk7XG59KHRoaXMsIGZ1bmN0aW9uIChleHBvcnRzKSB7ICd1c2Ugc3RyaWN0JztcblxuICBmdW5jdGlvbiB0b0FycmF5KGFycikge1xuICAgIHJldHVybiBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcnIpO1xuICB9XG5cbiAgZnVuY3Rpb24gcHJvbWlzaWZ5UmVxdWVzdChyZXF1ZXN0KSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgcmVxdWVzdC5vbnN1Y2Nlc3MgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmVzb2x2ZShyZXF1ZXN0LnJlc3VsdCk7XG4gICAgICB9O1xuXG4gICAgICByZXF1ZXN0Lm9uZXJyb3IgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmVqZWN0KHJlcXVlc3QuZXJyb3IpO1xuICAgICAgfTtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHByb21pc2lmeVJlcXVlc3RDYWxsKG9iaiwgbWV0aG9kLCBhcmdzKSB7XG4gICAgdmFyIHJlcXVlc3Q7XG4gICAgdmFyIHAgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgIHJlcXVlc3QgPSBvYmpbbWV0aG9kXS5hcHBseShvYmosIGFyZ3MpO1xuICAgICAgcHJvbWlzaWZ5UmVxdWVzdChyZXF1ZXN0KS50aGVuKHJlc29sdmUsIHJlamVjdCk7XG4gICAgfSk7XG5cbiAgICBwLnJlcXVlc3QgPSByZXF1ZXN0O1xuICAgIHJldHVybiBwO1xuICB9XG5cbiAgZnVuY3Rpb24gcHJvbWlzaWZ5Q3Vyc29yUmVxdWVzdENhbGwob2JqLCBtZXRob2QsIGFyZ3MpIHtcbiAgICB2YXIgcCA9IHByb21pc2lmeVJlcXVlc3RDYWxsKG9iaiwgbWV0aG9kLCBhcmdzKTtcbiAgICByZXR1cm4gcC50aGVuKGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICBpZiAoIXZhbHVlKSByZXR1cm47XG4gICAgICByZXR1cm4gbmV3IEN1cnNvcih2YWx1ZSwgcC5yZXF1ZXN0KTtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHByb3h5UHJvcGVydGllcyhQcm94eUNsYXNzLCB0YXJnZXRQcm9wLCBwcm9wZXJ0aWVzKSB7XG4gICAgcHJvcGVydGllcy5mb3JFYWNoKGZ1bmN0aW9uKHByb3ApIHtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShQcm94eUNsYXNzLnByb3RvdHlwZSwgcHJvcCwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHJldHVybiB0aGlzW3RhcmdldFByb3BdW3Byb3BdO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uKHZhbCkge1xuICAgICAgICAgIHRoaXNbdGFyZ2V0UHJvcF1bcHJvcF0gPSB2YWw7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gcHJveHlSZXF1ZXN0TWV0aG9kcyhQcm94eUNsYXNzLCB0YXJnZXRQcm9wLCBDb25zdHJ1Y3RvciwgcHJvcGVydGllcykge1xuICAgIHByb3BlcnRpZXMuZm9yRWFjaChmdW5jdGlvbihwcm9wKSB7XG4gICAgICBpZiAoIShwcm9wIGluIENvbnN0cnVjdG9yLnByb3RvdHlwZSkpIHJldHVybjtcbiAgICAgIFByb3h5Q2xhc3MucHJvdG90eXBlW3Byb3BdID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBwcm9taXNpZnlSZXF1ZXN0Q2FsbCh0aGlzW3RhcmdldFByb3BdLCBwcm9wLCBhcmd1bWVudHMpO1xuICAgICAgfTtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHByb3h5TWV0aG9kcyhQcm94eUNsYXNzLCB0YXJnZXRQcm9wLCBDb25zdHJ1Y3RvciwgcHJvcGVydGllcykge1xuICAgIHByb3BlcnRpZXMuZm9yRWFjaChmdW5jdGlvbihwcm9wKSB7XG4gICAgICBpZiAoIShwcm9wIGluIENvbnN0cnVjdG9yLnByb3RvdHlwZSkpIHJldHVybjtcbiAgICAgIFByb3h5Q2xhc3MucHJvdG90eXBlW3Byb3BdID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzW3RhcmdldFByb3BdW3Byb3BdLmFwcGx5KHRoaXNbdGFyZ2V0UHJvcF0sIGFyZ3VtZW50cyk7XG4gICAgICB9O1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gcHJveHlDdXJzb3JSZXF1ZXN0TWV0aG9kcyhQcm94eUNsYXNzLCB0YXJnZXRQcm9wLCBDb25zdHJ1Y3RvciwgcHJvcGVydGllcykge1xuICAgIHByb3BlcnRpZXMuZm9yRWFjaChmdW5jdGlvbihwcm9wKSB7XG4gICAgICBpZiAoIShwcm9wIGluIENvbnN0cnVjdG9yLnByb3RvdHlwZSkpIHJldHVybjtcbiAgICAgIFByb3h5Q2xhc3MucHJvdG90eXBlW3Byb3BdID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBwcm9taXNpZnlDdXJzb3JSZXF1ZXN0Q2FsbCh0aGlzW3RhcmdldFByb3BdLCBwcm9wLCBhcmd1bWVudHMpO1xuICAgICAgfTtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIEluZGV4KGluZGV4KSB7XG4gICAgdGhpcy5faW5kZXggPSBpbmRleDtcbiAgfVxuXG4gIHByb3h5UHJvcGVydGllcyhJbmRleCwgJ19pbmRleCcsIFtcbiAgICAnbmFtZScsXG4gICAgJ2tleVBhdGgnLFxuICAgICdtdWx0aUVudHJ5JyxcbiAgICAndW5pcXVlJ1xuICBdKTtcblxuICBwcm94eVJlcXVlc3RNZXRob2RzKEluZGV4LCAnX2luZGV4JywgSURCSW5kZXgsIFtcbiAgICAnZ2V0JyxcbiAgICAnZ2V0S2V5JyxcbiAgICAnZ2V0QWxsJyxcbiAgICAnZ2V0QWxsS2V5cycsXG4gICAgJ2NvdW50J1xuICBdKTtcblxuICBwcm94eUN1cnNvclJlcXVlc3RNZXRob2RzKEluZGV4LCAnX2luZGV4JywgSURCSW5kZXgsIFtcbiAgICAnb3BlbkN1cnNvcicsXG4gICAgJ29wZW5LZXlDdXJzb3InXG4gIF0pO1xuXG4gIGZ1bmN0aW9uIEN1cnNvcihjdXJzb3IsIHJlcXVlc3QpIHtcbiAgICB0aGlzLl9jdXJzb3IgPSBjdXJzb3I7XG4gICAgdGhpcy5fcmVxdWVzdCA9IHJlcXVlc3Q7XG4gIH1cblxuICBwcm94eVByb3BlcnRpZXMoQ3Vyc29yLCAnX2N1cnNvcicsIFtcbiAgICAnZGlyZWN0aW9uJyxcbiAgICAna2V5JyxcbiAgICAncHJpbWFyeUtleScsXG4gICAgJ3ZhbHVlJ1xuICBdKTtcblxuICBwcm94eVJlcXVlc3RNZXRob2RzKEN1cnNvciwgJ19jdXJzb3InLCBJREJDdXJzb3IsIFtcbiAgICAndXBkYXRlJyxcbiAgICAnZGVsZXRlJ1xuICBdKTtcblxuICAvLyBwcm94eSAnbmV4dCcgbWV0aG9kc1xuICBbJ2FkdmFuY2UnLCAnY29udGludWUnLCAnY29udGludWVQcmltYXJ5S2V5J10uZm9yRWFjaChmdW5jdGlvbihtZXRob2ROYW1lKSB7XG4gICAgaWYgKCEobWV0aG9kTmFtZSBpbiBJREJDdXJzb3IucHJvdG90eXBlKSkgcmV0dXJuO1xuICAgIEN1cnNvci5wcm90b3R5cGVbbWV0aG9kTmFtZV0gPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBjdXJzb3IgPSB0aGlzO1xuICAgICAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCkudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgY3Vyc29yLl9jdXJzb3JbbWV0aG9kTmFtZV0uYXBwbHkoY3Vyc29yLl9jdXJzb3IsIGFyZ3MpO1xuICAgICAgICByZXR1cm4gcHJvbWlzaWZ5UmVxdWVzdChjdXJzb3IuX3JlcXVlc3QpLnRoZW4oZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICBpZiAoIXZhbHVlKSByZXR1cm47XG4gICAgICAgICAgcmV0dXJuIG5ldyBDdXJzb3IodmFsdWUsIGN1cnNvci5fcmVxdWVzdCk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfTtcbiAgfSk7XG5cbiAgZnVuY3Rpb24gT2JqZWN0U3RvcmUoc3RvcmUpIHtcbiAgICB0aGlzLl9zdG9yZSA9IHN0b3JlO1xuICB9XG5cbiAgT2JqZWN0U3RvcmUucHJvdG90eXBlLmNyZWF0ZUluZGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIG5ldyBJbmRleCh0aGlzLl9zdG9yZS5jcmVhdGVJbmRleC5hcHBseSh0aGlzLl9zdG9yZSwgYXJndW1lbnRzKSk7XG4gIH07XG5cbiAgT2JqZWN0U3RvcmUucHJvdG90eXBlLmluZGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIG5ldyBJbmRleCh0aGlzLl9zdG9yZS5pbmRleC5hcHBseSh0aGlzLl9zdG9yZSwgYXJndW1lbnRzKSk7XG4gIH07XG5cbiAgcHJveHlQcm9wZXJ0aWVzKE9iamVjdFN0b3JlLCAnX3N0b3JlJywgW1xuICAgICduYW1lJyxcbiAgICAna2V5UGF0aCcsXG4gICAgJ2luZGV4TmFtZXMnLFxuICAgICdhdXRvSW5jcmVtZW50J1xuICBdKTtcblxuICBwcm94eVJlcXVlc3RNZXRob2RzKE9iamVjdFN0b3JlLCAnX3N0b3JlJywgSURCT2JqZWN0U3RvcmUsIFtcbiAgICAncHV0JyxcbiAgICAnYWRkJyxcbiAgICAnZGVsZXRlJyxcbiAgICAnY2xlYXInLFxuICAgICdnZXQnLFxuICAgICdnZXRBbGwnLFxuICAgICdnZXRLZXknLFxuICAgICdnZXRBbGxLZXlzJyxcbiAgICAnY291bnQnXG4gIF0pO1xuXG4gIHByb3h5Q3Vyc29yUmVxdWVzdE1ldGhvZHMoT2JqZWN0U3RvcmUsICdfc3RvcmUnLCBJREJPYmplY3RTdG9yZSwgW1xuICAgICdvcGVuQ3Vyc29yJyxcbiAgICAnb3BlbktleUN1cnNvcidcbiAgXSk7XG5cbiAgcHJveHlNZXRob2RzKE9iamVjdFN0b3JlLCAnX3N0b3JlJywgSURCT2JqZWN0U3RvcmUsIFtcbiAgICAnZGVsZXRlSW5kZXgnXG4gIF0pO1xuXG4gIGZ1bmN0aW9uIFRyYW5zYWN0aW9uKGlkYlRyYW5zYWN0aW9uKSB7XG4gICAgdGhpcy5fdHggPSBpZGJUcmFuc2FjdGlvbjtcbiAgICB0aGlzLmNvbXBsZXRlID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICBpZGJUcmFuc2FjdGlvbi5vbmNvbXBsZXRlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJlc29sdmUoKTtcbiAgICAgIH07XG4gICAgICBpZGJUcmFuc2FjdGlvbi5vbmVycm9yID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJlamVjdChpZGJUcmFuc2FjdGlvbi5lcnJvcik7XG4gICAgICB9O1xuICAgICAgaWRiVHJhbnNhY3Rpb24ub25hYm9ydCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZWplY3QoaWRiVHJhbnNhY3Rpb24uZXJyb3IpO1xuICAgICAgfTtcbiAgICB9KTtcbiAgfVxuXG4gIFRyYW5zYWN0aW9uLnByb3RvdHlwZS5vYmplY3RTdG9yZSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBuZXcgT2JqZWN0U3RvcmUodGhpcy5fdHgub2JqZWN0U3RvcmUuYXBwbHkodGhpcy5fdHgsIGFyZ3VtZW50cykpO1xuICB9O1xuXG4gIHByb3h5UHJvcGVydGllcyhUcmFuc2FjdGlvbiwgJ190eCcsIFtcbiAgICAnb2JqZWN0U3RvcmVOYW1lcycsXG4gICAgJ21vZGUnXG4gIF0pO1xuXG4gIHByb3h5TWV0aG9kcyhUcmFuc2FjdGlvbiwgJ190eCcsIElEQlRyYW5zYWN0aW9uLCBbXG4gICAgJ2Fib3J0J1xuICBdKTtcblxuICBmdW5jdGlvbiBVcGdyYWRlREIoZGIsIG9sZFZlcnNpb24sIHRyYW5zYWN0aW9uKSB7XG4gICAgdGhpcy5fZGIgPSBkYjtcbiAgICB0aGlzLm9sZFZlcnNpb24gPSBvbGRWZXJzaW9uO1xuICAgIHRoaXMudHJhbnNhY3Rpb24gPSBuZXcgVHJhbnNhY3Rpb24odHJhbnNhY3Rpb24pO1xuICB9XG5cbiAgVXBncmFkZURCLnByb3RvdHlwZS5jcmVhdGVPYmplY3RTdG9yZSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBuZXcgT2JqZWN0U3RvcmUodGhpcy5fZGIuY3JlYXRlT2JqZWN0U3RvcmUuYXBwbHkodGhpcy5fZGIsIGFyZ3VtZW50cykpO1xuICB9O1xuXG4gIHByb3h5UHJvcGVydGllcyhVcGdyYWRlREIsICdfZGInLCBbXG4gICAgJ25hbWUnLFxuICAgICd2ZXJzaW9uJyxcbiAgICAnb2JqZWN0U3RvcmVOYW1lcydcbiAgXSk7XG5cbiAgcHJveHlNZXRob2RzKFVwZ3JhZGVEQiwgJ19kYicsIElEQkRhdGFiYXNlLCBbXG4gICAgJ2RlbGV0ZU9iamVjdFN0b3JlJyxcbiAgICAnY2xvc2UnXG4gIF0pO1xuXG4gIGZ1bmN0aW9uIERCKGRiKSB7XG4gICAgdGhpcy5fZGIgPSBkYjtcbiAgfVxuXG4gIERCLnByb3RvdHlwZS50cmFuc2FjdGlvbiA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBuZXcgVHJhbnNhY3Rpb24odGhpcy5fZGIudHJhbnNhY3Rpb24uYXBwbHkodGhpcy5fZGIsIGFyZ3VtZW50cykpO1xuICB9O1xuXG4gIHByb3h5UHJvcGVydGllcyhEQiwgJ19kYicsIFtcbiAgICAnbmFtZScsXG4gICAgJ3ZlcnNpb24nLFxuICAgICdvYmplY3RTdG9yZU5hbWVzJ1xuICBdKTtcblxuICBwcm94eU1ldGhvZHMoREIsICdfZGInLCBJREJEYXRhYmFzZSwgW1xuICAgICdjbG9zZSdcbiAgXSk7XG5cbiAgLy8gQWRkIGN1cnNvciBpdGVyYXRvcnNcbiAgLy8gVE9ETzogcmVtb3ZlIHRoaXMgb25jZSBicm93c2VycyBkbyB0aGUgcmlnaHQgdGhpbmcgd2l0aCBwcm9taXNlc1xuICBbJ29wZW5DdXJzb3InLCAnb3BlbktleUN1cnNvciddLmZvckVhY2goZnVuY3Rpb24oZnVuY05hbWUpIHtcbiAgICBbT2JqZWN0U3RvcmUsIEluZGV4XS5mb3JFYWNoKGZ1bmN0aW9uKENvbnN0cnVjdG9yKSB7XG4gICAgICAvLyBEb24ndCBjcmVhdGUgaXRlcmF0ZUtleUN1cnNvciBpZiBvcGVuS2V5Q3Vyc29yIGRvZXNuJ3QgZXhpc3QuXG4gICAgICBpZiAoIShmdW5jTmFtZSBpbiBDb25zdHJ1Y3Rvci5wcm90b3R5cGUpKSByZXR1cm47XG5cbiAgICAgIENvbnN0cnVjdG9yLnByb3RvdHlwZVtmdW5jTmFtZS5yZXBsYWNlKCdvcGVuJywgJ2l0ZXJhdGUnKV0gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGFyZ3MgPSB0b0FycmF5KGFyZ3VtZW50cyk7XG4gICAgICAgIHZhciBjYWxsYmFjayA9IGFyZ3NbYXJncy5sZW5ndGggLSAxXTtcbiAgICAgICAgdmFyIG5hdGl2ZU9iamVjdCA9IHRoaXMuX3N0b3JlIHx8IHRoaXMuX2luZGV4O1xuICAgICAgICB2YXIgcmVxdWVzdCA9IG5hdGl2ZU9iamVjdFtmdW5jTmFtZV0uYXBwbHkobmF0aXZlT2JqZWN0LCBhcmdzLnNsaWNlKDAsIC0xKSk7XG4gICAgICAgIHJlcXVlc3Qub25zdWNjZXNzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgY2FsbGJhY2socmVxdWVzdC5yZXN1bHQpO1xuICAgICAgICB9O1xuICAgICAgfTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgLy8gcG9seWZpbGwgZ2V0QWxsXG4gIFtJbmRleCwgT2JqZWN0U3RvcmVdLmZvckVhY2goZnVuY3Rpb24oQ29uc3RydWN0b3IpIHtcbiAgICBpZiAoQ29uc3RydWN0b3IucHJvdG90eXBlLmdldEFsbCkgcmV0dXJuO1xuICAgIENvbnN0cnVjdG9yLnByb3RvdHlwZS5nZXRBbGwgPSBmdW5jdGlvbihxdWVyeSwgY291bnQpIHtcbiAgICAgIHZhciBpbnN0YW5jZSA9IHRoaXM7XG4gICAgICB2YXIgaXRlbXMgPSBbXTtcblxuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUpIHtcbiAgICAgICAgaW5zdGFuY2UuaXRlcmF0ZUN1cnNvcihxdWVyeSwgZnVuY3Rpb24oY3Vyc29yKSB7XG4gICAgICAgICAgaWYgKCFjdXJzb3IpIHtcbiAgICAgICAgICAgIHJlc29sdmUoaXRlbXMpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpdGVtcy5wdXNoKGN1cnNvci52YWx1ZSk7XG5cbiAgICAgICAgICBpZiAoY291bnQgIT09IHVuZGVmaW5lZCAmJiBpdGVtcy5sZW5ndGggPT0gY291bnQpIHtcbiAgICAgICAgICAgIHJlc29sdmUoaXRlbXMpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjdXJzb3IuY29udGludWUoKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9O1xuICB9KTtcblxuICBmdW5jdGlvbiBvcGVuRGIobmFtZSwgdmVyc2lvbiwgdXBncmFkZUNhbGxiYWNrKSB7XG4gICAgdmFyIHAgPSBwcm9taXNpZnlSZXF1ZXN0Q2FsbChpbmRleGVkREIsICdvcGVuJywgW25hbWUsIHZlcnNpb25dKTtcbiAgICB2YXIgcmVxdWVzdCA9IHAucmVxdWVzdDtcblxuICAgIGlmIChyZXF1ZXN0KSB7XG4gICAgICByZXF1ZXN0Lm9udXBncmFkZW5lZWRlZCA9IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgIGlmICh1cGdyYWRlQ2FsbGJhY2spIHtcbiAgICAgICAgICB1cGdyYWRlQ2FsbGJhY2sobmV3IFVwZ3JhZGVEQihyZXF1ZXN0LnJlc3VsdCwgZXZlbnQub2xkVmVyc2lvbiwgcmVxdWVzdC50cmFuc2FjdGlvbikpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH1cblxuICAgIHJldHVybiBwLnRoZW4oZnVuY3Rpb24oZGIpIHtcbiAgICAgIHJldHVybiBuZXcgREIoZGIpO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gZGVsZXRlRGIobmFtZSkge1xuICAgIHJldHVybiBwcm9taXNpZnlSZXF1ZXN0Q2FsbChpbmRleGVkREIsICdkZWxldGVEYXRhYmFzZScsIFtuYW1lXSk7XG4gIH1cblxuICBleHBvcnRzLm9wZW5EYiA9IG9wZW5EYjtcbiAgZXhwb3J0cy5kZWxldGVEYiA9IGRlbGV0ZURiO1xuXG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG5cbn0pKTtcbiIsInZhciBhcGkgPSByZXF1aXJlKFwiIS4uLy4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL2luamVjdFN0eWxlc0ludG9TdHlsZVRhZy5qc1wiKTtcbiAgICAgICAgICAgIHZhciBjb250ZW50ID0gcmVxdWlyZShcIiEhLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9janMuanMhLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2Rpc3QvY2pzLmpzPz9yZWYtLTctMiEuL3N0eWxlcy5zY3NzXCIpO1xuXG4gICAgICAgICAgICBjb250ZW50ID0gY29udGVudC5fX2VzTW9kdWxlID8gY29udGVudC5kZWZhdWx0IDogY29udGVudDtcblxuICAgICAgICAgICAgaWYgKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG4gICAgICAgICAgICB9XG5cbnZhciBvcHRpb25zID0ge307XG5cbm9wdGlvbnMuaW5zZXJ0ID0gXCJoZWFkXCI7XG5vcHRpb25zLnNpbmdsZXRvbiA9IGZhbHNlO1xuXG52YXIgdXBkYXRlID0gYXBpKGNvbnRlbnQsIG9wdGlvbnMpO1xuXG5cblxubW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2FscyB8fCB7fTsiLCJcInVzZSBzdHJpY3RcIjtcblxudmFyIGlzT2xkSUUgPSBmdW5jdGlvbiBpc09sZElFKCkge1xuICB2YXIgbWVtbztcbiAgcmV0dXJuIGZ1bmN0aW9uIG1lbW9yaXplKCkge1xuICAgIGlmICh0eXBlb2YgbWVtbyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIC8vIFRlc3QgZm9yIElFIDw9IDkgYXMgcHJvcG9zZWQgYnkgQnJvd3NlcmhhY2tzXG4gICAgICAvLyBAc2VlIGh0dHA6Ly9icm93c2VyaGFja3MuY29tLyNoYWNrLWU3MWQ4NjkyZjY1MzM0MTczZmVlNzE1YzIyMmNiODA1XG4gICAgICAvLyBUZXN0cyBmb3IgZXhpc3RlbmNlIG9mIHN0YW5kYXJkIGdsb2JhbHMgaXMgdG8gYWxsb3cgc3R5bGUtbG9hZGVyXG4gICAgICAvLyB0byBvcGVyYXRlIGNvcnJlY3RseSBpbnRvIG5vbi1zdGFuZGFyZCBlbnZpcm9ubWVudHNcbiAgICAgIC8vIEBzZWUgaHR0cHM6Ly9naXRodWIuY29tL3dlYnBhY2stY29udHJpYi9zdHlsZS1sb2FkZXIvaXNzdWVzLzE3N1xuICAgICAgbWVtbyA9IEJvb2xlYW4od2luZG93ICYmIGRvY3VtZW50ICYmIGRvY3VtZW50LmFsbCAmJiAhd2luZG93LmF0b2IpO1xuICAgIH1cblxuICAgIHJldHVybiBtZW1vO1xuICB9O1xufSgpO1xuXG52YXIgZ2V0VGFyZ2V0ID0gZnVuY3Rpb24gZ2V0VGFyZ2V0KCkge1xuICB2YXIgbWVtbyA9IHt9O1xuICByZXR1cm4gZnVuY3Rpb24gbWVtb3JpemUodGFyZ2V0KSB7XG4gICAgaWYgKHR5cGVvZiBtZW1vW3RhcmdldF0gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB2YXIgc3R5bGVUYXJnZXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRhcmdldCk7IC8vIFNwZWNpYWwgY2FzZSB0byByZXR1cm4gaGVhZCBvZiBpZnJhbWUgaW5zdGVhZCBvZiBpZnJhbWUgaXRzZWxmXG5cbiAgICAgIGlmICh3aW5kb3cuSFRNTElGcmFtZUVsZW1lbnQgJiYgc3R5bGVUYXJnZXQgaW5zdGFuY2VvZiB3aW5kb3cuSFRNTElGcmFtZUVsZW1lbnQpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAvLyBUaGlzIHdpbGwgdGhyb3cgYW4gZXhjZXB0aW9uIGlmIGFjY2VzcyB0byBpZnJhbWUgaXMgYmxvY2tlZFxuICAgICAgICAgIC8vIGR1ZSB0byBjcm9zcy1vcmlnaW4gcmVzdHJpY3Rpb25zXG4gICAgICAgICAgc3R5bGVUYXJnZXQgPSBzdHlsZVRhcmdldC5jb250ZW50RG9jdW1lbnQuaGVhZDtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIC8vIGlzdGFuYnVsIGlnbm9yZSBuZXh0XG4gICAgICAgICAgc3R5bGVUYXJnZXQgPSBudWxsO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIG1lbW9bdGFyZ2V0XSA9IHN0eWxlVGFyZ2V0O1xuICAgIH1cblxuICAgIHJldHVybiBtZW1vW3RhcmdldF07XG4gIH07XG59KCk7XG5cbnZhciBzdHlsZXNJbkRvbSA9IFtdO1xuXG5mdW5jdGlvbiBnZXRJbmRleEJ5SWRlbnRpZmllcihpZGVudGlmaWVyKSB7XG4gIHZhciByZXN1bHQgPSAtMTtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IHN0eWxlc0luRG9tLmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKHN0eWxlc0luRG9tW2ldLmlkZW50aWZpZXIgPT09IGlkZW50aWZpZXIpIHtcbiAgICAgIHJlc3VsdCA9IGk7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICByZXR1cm4gcmVzdWx0O1xufVxuXG5mdW5jdGlvbiBtb2R1bGVzVG9Eb20obGlzdCwgb3B0aW9ucykge1xuICB2YXIgaWRDb3VudE1hcCA9IHt9O1xuICB2YXIgaWRlbnRpZmllcnMgPSBbXTtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgaXRlbSA9IGxpc3RbaV07XG4gICAgdmFyIGlkID0gb3B0aW9ucy5iYXNlID8gaXRlbVswXSArIG9wdGlvbnMuYmFzZSA6IGl0ZW1bMF07XG4gICAgdmFyIGNvdW50ID0gaWRDb3VudE1hcFtpZF0gfHwgMDtcbiAgICB2YXIgaWRlbnRpZmllciA9IFwiXCIuY29uY2F0KGlkLCBcIiBcIikuY29uY2F0KGNvdW50KTtcbiAgICBpZENvdW50TWFwW2lkXSA9IGNvdW50ICsgMTtcbiAgICB2YXIgaW5kZXggPSBnZXRJbmRleEJ5SWRlbnRpZmllcihpZGVudGlmaWVyKTtcbiAgICB2YXIgb2JqID0ge1xuICAgICAgY3NzOiBpdGVtWzFdLFxuICAgICAgbWVkaWE6IGl0ZW1bMl0sXG4gICAgICBzb3VyY2VNYXA6IGl0ZW1bM11cbiAgICB9O1xuXG4gICAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgICAgc3R5bGVzSW5Eb21baW5kZXhdLnJlZmVyZW5jZXMrKztcbiAgICAgIHN0eWxlc0luRG9tW2luZGV4XS51cGRhdGVyKG9iaik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN0eWxlc0luRG9tLnB1c2goe1xuICAgICAgICBpZGVudGlmaWVyOiBpZGVudGlmaWVyLFxuICAgICAgICB1cGRhdGVyOiBhZGRTdHlsZShvYmosIG9wdGlvbnMpLFxuICAgICAgICByZWZlcmVuY2VzOiAxXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZGVudGlmaWVycy5wdXNoKGlkZW50aWZpZXIpO1xuICB9XG5cbiAgcmV0dXJuIGlkZW50aWZpZXJzO1xufVxuXG5mdW5jdGlvbiBpbnNlcnRTdHlsZUVsZW1lbnQob3B0aW9ucykge1xuICB2YXIgc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuICB2YXIgYXR0cmlidXRlcyA9IG9wdGlvbnMuYXR0cmlidXRlcyB8fCB7fTtcblxuICBpZiAodHlwZW9mIGF0dHJpYnV0ZXMubm9uY2UgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgdmFyIG5vbmNlID0gdHlwZW9mIF9fd2VicGFja19ub25jZV9fICE9PSAndW5kZWZpbmVkJyA/IF9fd2VicGFja19ub25jZV9fIDogbnVsbDtcblxuICAgIGlmIChub25jZSkge1xuICAgICAgYXR0cmlidXRlcy5ub25jZSA9IG5vbmNlO1xuICAgIH1cbiAgfVxuXG4gIE9iamVjdC5rZXlzKGF0dHJpYnV0ZXMpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgIHN0eWxlLnNldEF0dHJpYnV0ZShrZXksIGF0dHJpYnV0ZXNba2V5XSk7XG4gIH0pO1xuXG4gIGlmICh0eXBlb2Ygb3B0aW9ucy5pbnNlcnQgPT09ICdmdW5jdGlvbicpIHtcbiAgICBvcHRpb25zLmluc2VydChzdHlsZSk7XG4gIH0gZWxzZSB7XG4gICAgdmFyIHRhcmdldCA9IGdldFRhcmdldChvcHRpb25zLmluc2VydCB8fCAnaGVhZCcpO1xuXG4gICAgaWYgKCF0YXJnZXQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkNvdWxkbid0IGZpbmQgYSBzdHlsZSB0YXJnZXQuIFRoaXMgcHJvYmFibHkgbWVhbnMgdGhhdCB0aGUgdmFsdWUgZm9yIHRoZSAnaW5zZXJ0JyBwYXJhbWV0ZXIgaXMgaW52YWxpZC5cIik7XG4gICAgfVxuXG4gICAgdGFyZ2V0LmFwcGVuZENoaWxkKHN0eWxlKTtcbiAgfVxuXG4gIHJldHVybiBzdHlsZTtcbn1cblxuZnVuY3Rpb24gcmVtb3ZlU3R5bGVFbGVtZW50KHN0eWxlKSB7XG4gIC8vIGlzdGFuYnVsIGlnbm9yZSBpZlxuICBpZiAoc3R5bGUucGFyZW50Tm9kZSA9PT0gbnVsbCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHN0eWxlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoc3R5bGUpO1xufVxuLyogaXN0YW5idWwgaWdub3JlIG5leHQgICovXG5cblxudmFyIHJlcGxhY2VUZXh0ID0gZnVuY3Rpb24gcmVwbGFjZVRleHQoKSB7XG4gIHZhciB0ZXh0U3RvcmUgPSBbXTtcbiAgcmV0dXJuIGZ1bmN0aW9uIHJlcGxhY2UoaW5kZXgsIHJlcGxhY2VtZW50KSB7XG4gICAgdGV4dFN0b3JlW2luZGV4XSA9IHJlcGxhY2VtZW50O1xuICAgIHJldHVybiB0ZXh0U3RvcmUuZmlsdGVyKEJvb2xlYW4pLmpvaW4oJ1xcbicpO1xuICB9O1xufSgpO1xuXG5mdW5jdGlvbiBhcHBseVRvU2luZ2xldG9uVGFnKHN0eWxlLCBpbmRleCwgcmVtb3ZlLCBvYmopIHtcbiAgdmFyIGNzcyA9IHJlbW92ZSA/ICcnIDogb2JqLm1lZGlhID8gXCJAbWVkaWEgXCIuY29uY2F0KG9iai5tZWRpYSwgXCIge1wiKS5jb25jYXQob2JqLmNzcywgXCJ9XCIpIDogb2JqLmNzczsgLy8gRm9yIG9sZCBJRVxuXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAgKi9cblxuICBpZiAoc3R5bGUuc3R5bGVTaGVldCkge1xuICAgIHN0eWxlLnN0eWxlU2hlZXQuY3NzVGV4dCA9IHJlcGxhY2VUZXh0KGluZGV4LCBjc3MpO1xuICB9IGVsc2Uge1xuICAgIHZhciBjc3NOb2RlID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoY3NzKTtcbiAgICB2YXIgY2hpbGROb2RlcyA9IHN0eWxlLmNoaWxkTm9kZXM7XG5cbiAgICBpZiAoY2hpbGROb2Rlc1tpbmRleF0pIHtcbiAgICAgIHN0eWxlLnJlbW92ZUNoaWxkKGNoaWxkTm9kZXNbaW5kZXhdKTtcbiAgICB9XG5cbiAgICBpZiAoY2hpbGROb2Rlcy5sZW5ndGgpIHtcbiAgICAgIHN0eWxlLmluc2VydEJlZm9yZShjc3NOb2RlLCBjaGlsZE5vZGVzW2luZGV4XSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN0eWxlLmFwcGVuZENoaWxkKGNzc05vZGUpO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBhcHBseVRvVGFnKHN0eWxlLCBvcHRpb25zLCBvYmopIHtcbiAgdmFyIGNzcyA9IG9iai5jc3M7XG4gIHZhciBtZWRpYSA9IG9iai5tZWRpYTtcbiAgdmFyIHNvdXJjZU1hcCA9IG9iai5zb3VyY2VNYXA7XG5cbiAgaWYgKG1lZGlhKSB7XG4gICAgc3R5bGUuc2V0QXR0cmlidXRlKCdtZWRpYScsIG1lZGlhKTtcbiAgfSBlbHNlIHtcbiAgICBzdHlsZS5yZW1vdmVBdHRyaWJ1dGUoJ21lZGlhJyk7XG4gIH1cblxuICBpZiAoc291cmNlTWFwICYmIGJ0b2EpIHtcbiAgICBjc3MgKz0gXCJcXG4vKiMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LFwiLmNvbmNhdChidG9hKHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChKU09OLnN0cmluZ2lmeShzb3VyY2VNYXApKSkpLCBcIiAqL1wiKTtcbiAgfSAvLyBGb3Igb2xkIElFXG5cbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICAqL1xuXG5cbiAgaWYgKHN0eWxlLnN0eWxlU2hlZXQpIHtcbiAgICBzdHlsZS5zdHlsZVNoZWV0LmNzc1RleHQgPSBjc3M7XG4gIH0gZWxzZSB7XG4gICAgd2hpbGUgKHN0eWxlLmZpcnN0Q2hpbGQpIHtcbiAgICAgIHN0eWxlLnJlbW92ZUNoaWxkKHN0eWxlLmZpcnN0Q2hpbGQpO1xuICAgIH1cblxuICAgIHN0eWxlLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNzcykpO1xuICB9XG59XG5cbnZhciBzaW5nbGV0b24gPSBudWxsO1xudmFyIHNpbmdsZXRvbkNvdW50ZXIgPSAwO1xuXG5mdW5jdGlvbiBhZGRTdHlsZShvYmosIG9wdGlvbnMpIHtcbiAgdmFyIHN0eWxlO1xuICB2YXIgdXBkYXRlO1xuICB2YXIgcmVtb3ZlO1xuXG4gIGlmIChvcHRpb25zLnNpbmdsZXRvbikge1xuICAgIHZhciBzdHlsZUluZGV4ID0gc2luZ2xldG9uQ291bnRlcisrO1xuICAgIHN0eWxlID0gc2luZ2xldG9uIHx8IChzaW5nbGV0b24gPSBpbnNlcnRTdHlsZUVsZW1lbnQob3B0aW9ucykpO1xuICAgIHVwZGF0ZSA9IGFwcGx5VG9TaW5nbGV0b25UYWcuYmluZChudWxsLCBzdHlsZSwgc3R5bGVJbmRleCwgZmFsc2UpO1xuICAgIHJlbW92ZSA9IGFwcGx5VG9TaW5nbGV0b25UYWcuYmluZChudWxsLCBzdHlsZSwgc3R5bGVJbmRleCwgdHJ1ZSk7XG4gIH0gZWxzZSB7XG4gICAgc3R5bGUgPSBpbnNlcnRTdHlsZUVsZW1lbnQob3B0aW9ucyk7XG4gICAgdXBkYXRlID0gYXBwbHlUb1RhZy5iaW5kKG51bGwsIHN0eWxlLCBvcHRpb25zKTtcblxuICAgIHJlbW92ZSA9IGZ1bmN0aW9uIHJlbW92ZSgpIHtcbiAgICAgIHJlbW92ZVN0eWxlRWxlbWVudChzdHlsZSk7XG4gICAgfTtcbiAgfVxuXG4gIHVwZGF0ZShvYmopO1xuICByZXR1cm4gZnVuY3Rpb24gdXBkYXRlU3R5bGUobmV3T2JqKSB7XG4gICAgaWYgKG5ld09iaikge1xuICAgICAgaWYgKG5ld09iai5jc3MgPT09IG9iai5jc3MgJiYgbmV3T2JqLm1lZGlhID09PSBvYmoubWVkaWEgJiYgbmV3T2JqLnNvdXJjZU1hcCA9PT0gb2JqLnNvdXJjZU1hcCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHVwZGF0ZShvYmogPSBuZXdPYmopO1xuICAgIH0gZWxzZSB7XG4gICAgICByZW1vdmUoKTtcbiAgICB9XG4gIH07XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGxpc3QsIG9wdGlvbnMpIHtcbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307IC8vIEZvcmNlIHNpbmdsZS10YWcgc29sdXRpb24gb24gSUU2LTksIHdoaWNoIGhhcyBhIGhhcmQgbGltaXQgb24gdGhlICMgb2YgPHN0eWxlPlxuICAvLyB0YWdzIGl0IHdpbGwgYWxsb3cgb24gYSBwYWdlXG5cbiAgaWYgKCFvcHRpb25zLnNpbmdsZXRvbiAmJiB0eXBlb2Ygb3B0aW9ucy5zaW5nbGV0b24gIT09ICdib29sZWFuJykge1xuICAgIG9wdGlvbnMuc2luZ2xldG9uID0gaXNPbGRJRSgpO1xuICB9XG5cbiAgbGlzdCA9IGxpc3QgfHwgW107XG4gIHZhciBsYXN0SWRlbnRpZmllcnMgPSBtb2R1bGVzVG9Eb20obGlzdCwgb3B0aW9ucyk7XG4gIHJldHVybiBmdW5jdGlvbiB1cGRhdGUobmV3TGlzdCkge1xuICAgIG5ld0xpc3QgPSBuZXdMaXN0IHx8IFtdO1xuXG4gICAgaWYgKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChuZXdMaXN0KSAhPT0gJ1tvYmplY3QgQXJyYXldJykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGFzdElkZW50aWZpZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgaWRlbnRpZmllciA9IGxhc3RJZGVudGlmaWVyc1tpXTtcbiAgICAgIHZhciBpbmRleCA9IGdldEluZGV4QnlJZGVudGlmaWVyKGlkZW50aWZpZXIpO1xuICAgICAgc3R5bGVzSW5Eb21baW5kZXhdLnJlZmVyZW5jZXMtLTtcbiAgICB9XG5cbiAgICB2YXIgbmV3TGFzdElkZW50aWZpZXJzID0gbW9kdWxlc1RvRG9tKG5ld0xpc3QsIG9wdGlvbnMpO1xuXG4gICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGxhc3RJZGVudGlmaWVycy5sZW5ndGg7IF9pKyspIHtcbiAgICAgIHZhciBfaWRlbnRpZmllciA9IGxhc3RJZGVudGlmaWVyc1tfaV07XG5cbiAgICAgIHZhciBfaW5kZXggPSBnZXRJbmRleEJ5SWRlbnRpZmllcihfaWRlbnRpZmllcik7XG5cbiAgICAgIGlmIChzdHlsZXNJbkRvbVtfaW5kZXhdLnJlZmVyZW5jZXMgPT09IDApIHtcbiAgICAgICAgc3R5bGVzSW5Eb21bX2luZGV4XS51cGRhdGVyKCk7XG5cbiAgICAgICAgc3R5bGVzSW5Eb20uc3BsaWNlKF9pbmRleCwgMSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgbGFzdElkZW50aWZpZXJzID0gbmV3TGFzdElkZW50aWZpZXJzO1xuICB9O1xufTsiLCIvLyBJbXBvcnRzXG52YXIgX19fQ1NTX0xPQURFUl9BUElfSU1QT1JUX19fID0gcmVxdWlyZShcIi4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9hcGkuanNcIik7XG52YXIgX19fQ1NTX0xPQURFUl9HRVRfVVJMX0lNUE9SVF9fXyA9IHJlcXVpcmUoXCIuLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvZ2V0VXJsLmpzXCIpO1xudmFyIF9fX0NTU19MT0FERVJfVVJMX0lNUE9SVF8wX19fID0gcmVxdWlyZShcIi4uL2Fzc2V0cy9pY29ucy9oYW1idXJnZXJJY29uLnN2Z1wiKTtcbnZhciBfX19DU1NfTE9BREVSX1VSTF9JTVBPUlRfMV9fXyA9IHJlcXVpcmUoXCIuLi9hc3NldHMvaWNvbnMvY3Jvc3NJY29uLnN2Z1wiKTtcbnZhciBfX19DU1NfTE9BREVSX1VSTF9JTVBPUlRfMl9fXyA9IHJlcXVpcmUoXCIuLi9hc3NldHMvaWNvbnMvcHJvamVjdHNMaXN0SWNvbi5zdmdcIik7XG5leHBvcnRzID0gX19fQ1NTX0xPQURFUl9BUElfSU1QT1JUX19fKGZhbHNlKTtcbnZhciBfX19DU1NfTE9BREVSX1VSTF9SRVBMQUNFTUVOVF8wX19fID0gX19fQ1NTX0xPQURFUl9HRVRfVVJMX0lNUE9SVF9fXyhfX19DU1NfTE9BREVSX1VSTF9JTVBPUlRfMF9fXyk7XG52YXIgX19fQ1NTX0xPQURFUl9VUkxfUkVQTEFDRU1FTlRfMV9fXyA9IF9fX0NTU19MT0FERVJfR0VUX1VSTF9JTVBPUlRfX18oX19fQ1NTX0xPQURFUl9VUkxfSU1QT1JUXzFfX18pO1xudmFyIF9fX0NTU19MT0FERVJfVVJMX1JFUExBQ0VNRU5UXzJfX18gPSBfX19DU1NfTE9BREVSX0dFVF9VUkxfSU1QT1JUX19fKF9fX0NTU19MT0FERVJfVVJMX0lNUE9SVF8yX19fKTtcbi8vIE1vZHVsZVxuZXhwb3J0cy5wdXNoKFttb2R1bGUuaWQsIFwiLm1haW5QYW5lbHtkaXNwbGF5OmZsZXg7cG9zaXRpb246YWJzb2x1dGU7YmFja2dyb3VuZC1jb2xvcjpyZ2JhKDI0NiwyNDYsMjQ2LC45KTt0cmFuc2l0aW9uOnJpZ2h0IDFzLGJvdHRvbSAxczstLXdpZHRoOiAyNTBweDstLWhlaWdodDogMjAwcHh9Lm1haW5QYW5lbC5yaWdodHtoZWlnaHQ6MTAwJTt3aWR0aDp2YXIoLS13aWR0aCk7dG9wOjA7cmlnaHQ6Y2FsYyh2YXIoLS13aWR0aCkgKiAtMSl9Lm1haW5QYW5lbC5ib3R0b217ZmxleC1kaXJlY3Rpb246Y29sdW1uO2hlaWdodDp2YXIoLS1oZWlnaHQpO3dpZHRoOjEwMCU7Ym90dG9tOmNhbGModmFyKC0taGVpZ2h0KSAqIC0xKX0ubWFpblBhbmVsLnJpZ2h0Pi5wYW5lbC1jb250ZW50e3dpZHRoOjEwMCV9Lm1haW5QYW5lbC5ib3R0b20+LnBhbmVsLWNvbnRlbnR7ZGlzcGxheTpmbGV4O2hlaWdodDoxMDAlfS5tYWluUGFuZWwucmlnaHQub3BlbntyaWdodDowfS5tYWluUGFuZWwuYm90dG9tLm9wZW57Ym90dG9tOjB9Lm1haW5QYW5lbD4ucGFuZWwtZ3JpcHtiYWNrZ3JvdW5kOiMyYThmYjF9Lm1haW5QYW5lbC5yaWdodD4ucGFuZWwtZ3JpcHtkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO3BhZGRpbmc6MCA1cHg7Y3Vyc29yOmNvbC1yZXNpemV9Lm1haW5QYW5lbC5ib3R0b20+LnBhbmVsLWdyaXB7cGFkZGluZzo1cHggMDtjdXJzb3I6cm93LXJlc2l6ZX0ubWFpblBhbmVsPi5wYW5lbC1ncmlwOjpiZWZvcmV7Y29udGVudDpcXFwiXFxcIjtkaXNwbGF5OmJsb2NrfS5tYWluUGFuZWwucmlnaHQ+LnBhbmVsLWdyaXA6OmJlZm9yZXtoZWlnaHQ6MjdweDtib3JkZXItcmlnaHQ6M3B4IGRvdWJsZSAjZmZmfS5tYWluUGFuZWwuYm90dG9tPi5wYW5lbC1ncmlwOjpiZWZvcmV7d2lkdGg6MjdweDtib3JkZXItdG9wOjNweCBkb3VibGUgI2ZmZjttYXJnaW46YXV0b30ubWFpblBhbmVsPi5wYW5lbC1jb250ZW50Pi5wYW5lbC1oZWFkZXJ7ZGlzcGxheTpmbGV4O2p1c3RpZnktY29udGVudDpzcGFjZS1hcm91bmQ7YWxpZ24taXRlbXM6Y2VudGVyO3RleHQtYWxpZ246Y2VudGVyfS5tYWluUGFuZWwuYm90dG9tPi5wYW5lbC1jb250ZW50Pi5wYW5lbC1oZWFkZXJ7ZmxleC1kaXJlY3Rpb246Y29sdW1ufS5tYWluUGFuZWw+LnBhbmVsLWNvbnRlbnQ+LnBhbmVsLWhlYWRlcj5zcGFue3BhZGRpbmc6LjJyZW07ZmxleC1ncm93OjF9Lm1haW5QYW5lbC5ib3R0b20+LnBhbmVsLWNvbnRlbnQ+LnBhbmVsLWhlYWRlcj5zcGFue3dpZHRoOjM1cHg7d3JpdGluZy1tb2RlOnZlcnRpY2FsLXJsOy13ZWJraXQtd3JpdGluZy1tb2RlOnZlcnRpY2FsLXJsfS5tYWluUGFuZWw+LnBhbmVsLWNvbnRlbnQ+LnBhbmVsLWhlYWRlcj5zcGFuOm5vdCguYWN0aXZlKXtjdXJzb3I6cG9pbnRlcjtiYWNrZ3JvdW5kLWNvbG9yOiNlNGU0ZTR9Lm1haW5QYW5lbC5yaWdodD4ucGFuZWwtY29udGVudD4ucGFuZWwtaGVhZGVyPnNwYW46bm90KC5hY3RpdmUpe2JvcmRlci1ib3R0b206MXB4IHNvbGlkICNhNmE2YTZ9Lm1haW5QYW5lbC5ib3R0b20+LnBhbmVsLWNvbnRlbnQ+LnBhbmVsLWhlYWRlcj5zcGFuOm5vdCguYWN0aXZlKXtib3JkZXItcmlnaHQ6MXB4IHNvbGlkICNhNmE2YTZ9Lm1haW5QYW5lbC5yaWdodD4ucGFuZWwtY29udGVudD4ucGFuZWwtaGVhZGVyPnNwYW46bm90KDpsYXN0LWNoaWxkKXtib3JkZXItcmlnaHQ6MXB4IHNvbGlkICNhNmE2YTZ9Lm1haW5QYW5lbC5ib3R0b20+LnBhbmVsLWNvbnRlbnQ+LnBhbmVsLWhlYWRlcj5zcGFuOm5vdCg6bGFzdC1jaGlsZCl7Ym9yZGVyLWJvdHRvbToxcHggc29saWQgI2E2YTZhNn0ubWFpblBhbmVsPi5wYW5lbC1jb250ZW50Pi5wYW5lbC1ib2R5e2ZsZXgtZ3JvdzoxO3BhZGRpbmc6LjVyZW19Lm1haW5QYW5lbD4ucGFuZWwtY29udGVudD4ucGFuZWwtYm9keT4uaGlkZGVue2Rpc3BsYXk6bm9uZX0jcHJvamVjdHNMaXN0Q29udGFpbmVye2hlaWdodDoxMDAlO3dpZHRoOjEwMCU7cG9zaXRpb246YWJzb2x1dGU7YmFja2dyb3VuZC1jb2xvcjojZmZmfSNwcm9qZWN0c0xpc3RDb250YWluZXI+ZGl2OmZpcnN0LWNoaWxke2Rpc3BsYXk6ZmxleDtqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2VlbjtwYWRkaW5nOjFyZW19I3Byb2plY3RzTGlzdENvbnRhaW5lcj5kaXY6Zmlyc3QtY2hpbGQ+c3Bhbnt3aWR0aDoyMCV9QG1lZGlhKG1heC13aWR0aDogNTAwcHgpeyNjbG9zZVByb2plY3RzTGlzdEJ0bntkaXNwbGF5Om5vbmV9fSNjbG9zZVByb2plY3RzTGlzdEJ0bntmbG9hdDpyaWdodH0jcHJvamVjdHNMaXN0Q29udGFpbmVyPmRpdjpmaXJzdC1jaGlsZD5oNHtvdmVyZmxvdy14OmhpZGRlbjtmb250LXdlaWdodDpub3JtYWw7Zm9udC1zaXplOjEuNnJlbX0jcHJvamVjdHNMaXN0e2Rpc3BsYXk6ZmxleDtmbGV4LXdyYXA6d3JhcDttYXJnaW4tbGVmdDoxcmVtOy0taXRlbXMtaDogNjstLWl0ZW0td2lkdGg6IGNhbGMoKDEwMCUgLyB2YXIoLS1pdGVtcy1oKSkgLSAxcmVtKTstLXJlbWFpbmluZy1pdGVtczogdW5zZXR9QG1lZGlhKG1heC13aWR0aDogMTAwMHB4KXsjcHJvamVjdHNMaXN0ey0taXRlbXMtaDogNX19QG1lZGlhKG1heC13aWR0aDogODAwcHgpeyNwcm9qZWN0c0xpc3R7LS1pdGVtcy1oOiA0fX1AbWVkaWEobWF4LXdpZHRoOiA2MDBweCl7I3Byb2plY3RzTGlzdHstLWl0ZW1zLWg6IDN9fUBtZWRpYShtYXgtd2lkdGg6IDQwMHB4KXsjcHJvamVjdHNMaXN0ey0taXRlbXMtaDogMn19QG1lZGlhKG1heC13aWR0aDogMjgwcHgpeyNwcm9qZWN0c0xpc3R7LS1pdGVtcy1oOiAxfX0jcHJvamVjdHNMaXN0OjphZnRlcntjb250ZW50OlxcXCJcXFwiO2ZsZXgtZ3Jvdzp2YXIoLS1yZW1haW5pbmctaXRlbXMpO3dpZHRoOmNhbGMoKHZhcigtLWl0ZW0td2lkdGgpICsgMXJlbSkgKiB2YXIoLS1yZW1haW5pbmctaXRlbXMpKX0jcHJvamVjdHNMaXN0Pi5lbXB0eS1tc2d7d2lkdGg6MTAwJTttYXJnaW4tdG9wOjNyZW07bWFyZ2luLWJvdHRvbTozcmVtO3RleHQtYWxpZ246Y2VudGVyfS5wcm9qZWN0SXRlbXtmbGV4LWdyb3c6MTt3aWR0aDp2YXIoLS1pdGVtLXdpZHRoKTttYXJnaW4tYm90dG9tOjFyZW07bWFyZ2luLXJpZ2h0OjFyZW07cG9zaXRpb246cmVsYXRpdmU7Y3Vyc29yOnBvaW50ZXI7Zm9udC1mYW1pbHk6aW5oZXJpdDtib3gtc2hhZG93OjJweCAycHggN3B4ICNiMmIyYjJ9LnByb2plY3RJdGVtPmg0e2JhY2tncm91bmQtY29sb3I6I2Y5ZjlmOX0ucHJvamVjdEl0ZW0uY3VycmVudHtjdXJzb3I6YXV0bztvdXRsaW5lOjRweCBzb2xpZCAjN2RhNWI2O2JveC1zaGFkb3c6bm9uZX0ucHJvamVjdEl0ZW0udW5zeW5je29wYWNpdHk6LjV9LnByb2plY3RJdGVtOm5vdCguY3VycmVudCk6aG92ZXJ7Ym94LXNoYWRvdzoycHggMnB4IDdweCAjNmI2YjZifS5wcm9qZWN0SXRlbT4uc2hhcmVkSWNvbntwb3NpdGlvbjphYnNvbHV0ZTt3aWR0aDozMHB4O2hlaWdodDozMHB4O3JpZ2h0OjZweDt0b3A6NnB4O2JhY2tncm91bmQtY29sb3I6I2VlZTtwYWRkaW5nOjVweDtib3JkZXItcmFkaXVzOjUwJX0ucHJvamVjdEl0ZW0+LnRodW1ie2Rpc3BsYXk6YmxvY2s7d2lkdGg6MTAwJTtoZWlnaHQ6MTUwcHg7b2JqZWN0LWZpdDpjb3Zlcn0ucHJvamVjdEl0ZW0+aDR7cGFkZGluZzouNnJlbTtmb250LXdlaWdodDpub3JtYWx9I2xvYWRNb3JlUHJvakJ0bntkaXNwbGF5OmJsb2NrO21hcmdpbjphdXRvfSNtb2RhbERpYWxvZ0NvbnRhaW5lcntqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyO2FsaWduLWl0ZW1zOmNlbnRlcjtwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MDtyaWdodDowO2JvdHRvbTowO2xlZnQ6MH0jbW9kYWxEaWFsb2dDb250YWluZXI+ZGl2e3BhZGRpbmc6MXJlbTtiYWNrZ3JvdW5kLWNvbG9yOiNmZmZ9I21vZGFsRGlhbG9nQ29udGFpbmVyLmdyYXlUcmFuc2x1Y2VudHtiYWNrZ3JvdW5kLWNvbG9yOnJnYmEoMjE2LDIxNiwyMTYsLjgpfSNtb2RhbERpYWxvZ0NvbnRhaW5lci5saWdodE9wYXF1ZXtiYWNrZ3JvdW5kLWNvbG9yOiNmZmZ9I2Nsb3NlTW9kYWxCdG57ZmxvYXQ6cmlnaHR9I21vZGFsRGlhbG9nQ29udGFpbmVyIC5tb2RhbC1tYWluLWJ0bnN7ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmZsZXgtZW5kO2p1c3RpZnktY29udGVudDpmbGV4LWVuZDttYXJnaW4tdG9wOi4zcmVtfSNtb2RhbERpYWxvZ0NvbnRhaW5lciAubW9kYWwtbWFpbi1idG5zPmJ1dHRvbjpub3QoOmZpcnN0LWNoaWxkKXttYXJnaW4tbGVmdDouNXJlbX0jYXV0aG9yaXplRGlhbG9ne2Rpc3BsYXk6ZmxleDtmbGV4LWRpcmVjdGlvbjpjb2x1bW47cGFkZGluZzoxcmVtfSNhdXRob3JpemVEaWFsb2c+aW1ne2FsaWduLXNlbGY6Y2VudGVyfSNhdXRob3JpemVEaWFsb2c+aDJ7Zm9udC1zaXplOjEuNnJlbTt0ZXh0LWFsaWduOmNlbnRlcjtmb250LXdlaWdodDpub3JtYWw7bWFyZ2luLWJvdHRvbToxLjVyZW07bWFyZ2luLXRvcDoxcmVtfSNhdXRob3JpemVEaWFsb2c+ZGl2Omxhc3QtY2hpbGR7ZGlzcGxheTpmbGV4O2ZsZXgtZGlyZWN0aW9uOmNvbHVtbjtmbGV4LWdyb3c6MTtqdXN0aWZ5LWNvbnRlbnQ6ZW5kfSNhdXRob3JpemVEaWFsb2c+ZGl2Omxhc3QtY2hpbGQ+YnV0dG9ue2ZvbnQtc2l6ZToxLjJyZW19I2F1dGhvcml6ZURpYWxvZz5kaXY6bGFzdC1jaGlsZD5idXR0b246bm90KDpsYXN0LWNoaWxkKXttYXJnaW4tYm90dG9tOi40cmVtfSN1cGxvYWRGaWxlRm9ybXtkaXNwbGF5OmZsZXg7ZmxleC1kaXJlY3Rpb246Y29sdW1uO21pbi13aWR0aDoyMDBweDtwYWRkaW5nOjFyZW07YmFja2dyb3VuZC1jb2xvcjojZmZmfSN1cGxvYWRGaWxlRm9ybT5pbnB1dHtmb250LWZhbWlseTppbmhlcml0fSN1cGxvYWRGaWxlRm9ybT5sYWJlbHttYXJnaW4tdG9wOjFyZW07dGV4dC1hbGlnbjpjZW50ZXI7Y3Vyc29yOnBvaW50ZXI7Zm9udC1zaXplOi45cmVtfSN1cGxvYWRGaWxlRm9ybT5idXR0b246bGFzdC1jaGlsZHttYXJnaW4tdG9wOi41cmVtfSNsb2FkaW5nRmlsZXtwYWRkaW5nOjFyZW07dGV4dC1hbGlnbjpjZW50ZXJ9I3NpZGVOYXZDb250YWluZXJ7ZGlzcGxheTpmbGV4O2ZsZXgtZGlyZWN0aW9uOmNvbHVtbjtwb3NpdGlvbjphYnNvbHV0ZTtoZWlnaHQ6MTAwdmg7d2lkdGg6MzE0cHg7dG9wOjA7cmlnaHQ6MDt6LWluZGV4Ojk5OTt0cmFuc2Zvcm06dHJhbnNsYXRlWCgzMTRweCk7YmFja2dyb3VuZC1jb2xvcjojZmZmfSNzaWRlTmF2Q29udGFpbmVyLmFjdGl2ZXt0cmFuc2Zvcm06dHJhbnNsYXRlWCgwKX0uc2lkZS1uYXYtaGVhZGVye3BhZGRpbmctcmlnaHQ6MXJlbTtwYWRkaW5nLWxlZnQ6MXJlbX0jdXNlci1pbmZve2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpmbGV4LWVuZDttYXJnaW4tdG9wOnZhcigtLWhlYWRlci1oZWlnaHQpfSN1c2VyLWluZm8+aW1ne21hcmdpbi1yaWdodDouNnJlbX0jdXNlci1pbmZvPnNwYW57b3ZlcmZsb3cteDpoaWRkZW59I3VzZXItaW5mbz5zcGFuPnNwYW57ZGlzcGxheTpibG9ja30jdXNlci1pbmZvIC5lbWFpbHtmb250LXdlaWdodDpsaWdodGVyfS5zaWRlLW5hdi1ib2R5e2Rpc3BsYXk6ZmxleDtmbGV4LWRpcmVjdGlvbjpjb2x1bW47YWxpZ24taXRlbXM6Y2VudGVyO2ZsZXgtZ3JvdzoxO3BhZGRpbmc6MXJlbTt0ZXh0LWFsaWduOmNlbnRlcn0uc2lkZS1uYXYtYm9keSBidXR0b257d2lkdGg6ODAlfS5zaWRlLW5hdi1ib2R5Pi5zaWRlLW5hdi1zZWN0aW9ue3dpZHRoOjEwMCU7cGFkZGluZy1ib3R0b206MXJlbX0uc2lkZS1uYXYtYm9keT4uc2lkZS1uYXYtc2VjdGlvbi5ncm93e2ZsZXgtZ3JvdzoxfSNzaWRlTmF2VG9nZ2xle3dpZHRoOjI0cHg7aGVpZ2h0OjI0cHg7bWFyZ2luOi40cmVtO2N1cnNvcjpwb2ludGVyO2JvcmRlci1zdHlsZTpub25lO2JhY2tncm91bmQtaW1hZ2U6dXJsKFwiICsgX19fQ1NTX0xPQURFUl9VUkxfUkVQTEFDRU1FTlRfMF9fXyArIFwiKTtiYWNrZ3JvdW5kLXJlcGVhdDpuby1yZXBlYXQ7YmFja2dyb3VuZC1wb3NpdGlvbjpjZW50ZXJ9I3NpZGVOYXZUb2dnbGUuYWN0aXZle2JhY2tncm91bmQtaW1hZ2U6dXJsKFwiICsgX19fQ1NTX0xPQURFUl9VUkxfUkVQTEFDRU1FTlRfMV9fXyArIFwiKX0jc2lkZU5hdkNvbnRhaW5lcisuc2lkZS1uYXYtc2hhZGV7cG9zaXRpb246YWJzb2x1dGU7ei1pbmRleDoxMDtiYWNrZ3JvdW5kLWNvbG9yOiMwMDA7d2lkdGg6MTAwJTtoZWlnaHQ6MTAwdmg7dG9wOjA7b3BhY2l0eTowO2xlZnQ6MTAwJTt0cmFuc2l0aW9uOm9wYWNpdHkgLjI1cyBlYXNlLW91dCxsZWZ0IDBzIGxpbmVhciAuMjVzfSNzaWRlTmF2Q29udGFpbmVyLmFjdGl2ZSsuc2lkZS1uYXYtc2hhZGV7b3BhY2l0eTouNztsZWZ0OjA7dHJhbnNpdGlvbjpvcGFjaXR5IC4yNXMgZWFzZS1vdXQsbGVmdCAwcyBsaW5lYXJ9LnNpZGUtbmF2LWZvb3RlcntwYWRkaW5nOjFyZW07Zm9udC13ZWlnaHQ6bGlnaHRlcn0jY29tbWVudEZvcm0+LmlucHV0c3ttYXJnaW4tYm90dG9tOi44cmVtfSNjb21tZW50Rm9ybT4uaW5wdXRzPnRleHRhcmVhe3dpZHRoOjEwMCU7bWluLWhlaWdodDoxNTBweH0jY29tbWVudEZvcm0uaG9yaXpvbnRhbHtkaXNwbGF5OmZsZXh9I2NvbW1lbnRGb3JtLmhvcml6b250YWw+LmlucHV0c3tmbGV4LWdyb3c6MX0jY29tbWVudEZvcm0uaG9yaXpvbnRhbD4uaW5wdXRzPnRleHRhcmVhe21pbi1oZWlnaHQ6NjBweH0jY29tbWVudEZvcm0+LmlucHV0cz4ubWVtYmVyc3ttYXJnaW4tdG9wOi41cmVtfSNjb21tZW50Rm9ybT4uaW5wdXRzPi5tZW1iZXJzLmhpZGRlbntkaXNwbGF5Om5vbmV9I2NvbW1lbnRGb3JtPi5pbnB1dHM+Lm1lbWJlcnM+cDpmaXJzdC1jaGlsZHtmb250LXdlaWdodDpsaWdodGVyO21hcmdpbi1ib3R0b206LjJyZW19I2NvbW1lbnRGb3JtPi5pbnB1dHM+Lm1lbWJlcnM+c2VsZWN0e3dpZHRoOjEwMCV9I2NvbW1lbnRGb3JtIC5pbmZve21hcmdpbi10b3A6LjFyZW07Zm9udC1zaXplOi43cmVtO2ZvbnQtd2VpZ2h0OmxpZ2h0ZXJ9I2NvbW1lbnRGb3JtPi5mb3JtQnV0dG9uc01vZGVzPi5idXR0b25zQ29udGFpbmVye2Rpc3BsYXk6ZmxleDtqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2Vlbn0jY29tbWVudEZvcm0uaG9yaXpvbnRhbD4uZm9ybUJ1dHRvbnNNb2Rlc3ttYXJnaW4tbGVmdDouNXJlbX0jY29tbWVudEZvcm0uaG9yaXpvbnRhbD4uZm9ybUJ1dHRvbnNNb2Rlcz4uYnV0dG9uc0NvbnRhaW5lcntmbGV4LWRpcmVjdGlvbjpjb2x1bW59I2NvbW1lbnRGb3JtLmhvcml6b250YWw+LmZvcm1CdXR0b25zTW9kZXM+LmJ1dHRvbnNDb250YWluZXI+YnV0dG9ue2hlaWdodDo1MHB4fSNjb21tZW50Rm9ybS5ob3Jpem9udGFsPi5mb3JtQnV0dG9uc01vZGVzPi5idXR0b25zQ29udGFpbmVyPmJ1dHRvbjpmaXJzdC1jaGlsZHttYXJnaW4tdG9wOi42cmVtO29yZGVyOjF9I3NoYXJlUHJvamVjdERpYWxvZ3tkaXNwbGF5OmZsZXg7ZmxleC1kaXJlY3Rpb246Y29sdW1uO3Bvc2l0aW9uOnJlbGF0aXZlO21pbi1oZWlnaHQ6MzUwcHg7bWluLXdpZHRoOjQwMHB4O2JhY2tncm91bmQtY29sb3I6I2ZmZn0jc2hhcmVQcm9qZWN0RGlhbG9nIC50YWJsZS13cmFwcGVye21hcmdpbi10b3A6LjVyZW07bWFyZ2luLWJvdHRvbToxcmVtO2JhY2tncm91bmQtY29sb3I6I2YxZjFmMX0jc2hhcmVQcm9qZWN0RGlhbG9nIC50YWJsZS13cmFwcGVyLmZpeGVkLWhlaWdodHtoZWlnaHQ6MTAwcHg7b3ZlcmZsb3cteTphdXRvfSNzaGFyZVByb2plY3REaWFsb2cgLnRhYmxlLXdyYXBwZXI+dGFibGV7d2lkdGg6MTAwJTtib3JkZXItY29sbGFwc2U6Y29sbGFwc2U7YmFja2dyb3VuZC1jb2xvcjojZWVlfSNzaGFyZVByb2plY3REaWFsb2cgLnRhYmxlLXdyYXBwZXI+LmVtcHR5LW1zZ3tkaXNwbGF5Om5vbmU7aGVpZ2h0OjEwMCU7YWxpZ24taXRlbXM6Y2VudGVyO2p1c3RpZnktY29udGVudDpjZW50ZXI7cGFkZGluZzoxcmVtfSNzaGFyZVByb2plY3REaWFsb2c+LnVzZXJzLWNvbnRhaW5lci5lbXB0eSAuZW1wdHktbXNne2Rpc3BsYXk6ZmxleH0jc2hhcmVQcm9qZWN0RGlhbG9nPi51c2Vycy1jb250YWluZXIuZW1wdHkgdGFibGV7ZGlzcGxheTpub25lfSNzaGFyZVByb2plY3REaWFsb2c+LnVzZXJzLWNvbnRhaW5lci5oaWRkZW57dmlzaWJpbGl0eTpoaWRkZW59I3NoYXJlUHJvamVjdERpYWxvZyB0ZDpsYXN0LWNoaWxke3dpZHRoOjQwcHg7dGV4dC1hbGlnbjpjZW50ZXJ9I3NoYXJlUHJvamVjdERpYWxvZyB0ZDpsYXN0LWNoaWxkPnN2Z3t3aWR0aDoxMnB4O2hlaWdodDoxMnB4fSNzaGFyZVByb2plY3REaWFsb2cgdGQuYWN0aW9uLWJ0bntjdXJzb3I6cG9pbnRlcn0jc2hhcmVQcm9qZWN0RGlhbG9nIHRkLmFjdGlvbi1idG46aG92ZXJ7YmFja2dyb3VuZC1jb2xvcjojZGJkYmRifSNzaGFyZVByb2plY3REaWFsb2cgdHJ7Ym9yZGVyLWJvdHRvbToycHggc29saWQgI2ZmZn0jc2hhcmVQcm9qZWN0RGlhbG9nIHRyLnRvLWRlbGV0ZT50ZDpmaXJzdC1jaGlsZHtvcGFjaXR5Oi40fSNzaGFyZVByb2plY3REaWFsb2cgdGQudXNlci1kYXRhPmltZ3tmbG9hdDpsZWZ0O2hlaWdodDo2NHB4O3dpZHRoOjY0cHg7bWFyZ2luLXJpZ2h0Oi41cmVtfSNzaGFyZVByb2plY3REaWFsb2cgdGQudXNlci1kYXRhPmRpdntkaXNwbGF5OmZsZXg7aGVpZ2h0OjY0cHg7cGFkZGluZzouNHJlbTtmbGV4LWRpcmVjdGlvbjpjb2x1bW47anVzdGlmeS1jb250ZW50OnNwYWNlLWFyb3VuZH0jc2hhcmVQcm9qZWN0RGlhbG9nIHRkLnVzZXItZGF0YT5kaXY+c3BhbjpudGgtY2hpbGQoMil7Zm9udC13ZWlnaHQ6bGlnaHRlcn0jc2hhcmVQcm9qZWN0RGlhbG9nPi5wZW5kaW5nLXVzZXJzIHRkLnVzZXItZGF0YXtwYWRkaW5nOi40cmVtfSNzaGFyZVByb2plY3REaWFsb2c+Zm9ybT5sYWJlbHtkaXNwbGF5OmJsb2NrfSNzaGFyZVByb2plY3REaWFsb2c+Zm9ybT5kaXZ7ZGlzcGxheTpmbGV4fSNzaGFyZVByb2plY3REaWFsb2c+Zm9ybSBpbnB1dHtmbGV4LWdyb3c6MX0jc2hhcmVQcm9qZWN0RGlhbG9nPmZvcm0gYnV0dG9ue3dpZHRoOjYwcHh9I3NoYXJlUHJvamVjdERpYWxvZz4ubG9hZGVyLWNvbnRhaW5lcntkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2p1c3RpZnktY29udGVudDpjZW50ZXI7cG9zaXRpb246YWJzb2x1dGU7d2lkdGg6MTAwJTtoZWlnaHQ6MTAwJTt0b3A6MDtsZWZ0OjA7YmFja2dyb3VuZC1jb2xvcjpyZ2JhKDI1NSwyNTUsMjU1LC43KX0jc2hhcmVQcm9qZWN0RGlhbG9nPi5sb2FkZXItY29udGFpbmVyLmhpZGRlbntkaXNwbGF5Om5vbmV9I3NoYXJlUHJvamVjdERpYWxvZyAuc2hhcmUtbm90aWZpY2F0aW9ue3Bvc2l0aW9uOmFic29sdXRlO2JvdHRvbTowfSNzaGFyZVByb2plY3REaWFsb2cgLnNoYXJlLW5vdGlmaWNhdGlvbi5oaWRkZW57dmlzaWJpbGl0eTpoaWRkZW59ZGl2I3Byb3BzVGFibGVzQ29udGFpbmVye2Rpc3BsYXk6ZmxleH0ubWFpblBhbmVsLnJpZ2h0IGRpdiNwcm9wc1RhYmxlc0NvbnRhaW5lcntmbGV4LWRpcmVjdGlvbjpjb2x1bW59LmRhdGEtdGFibGV7dGV4dC1hbGlnbjpsZWZ0O3dpZHRoOjEwMCV9LmRhdGEtdGFibGU+dGhlYWQgdGh7cGFkZGluZy1sZWZ0Oi4zcmVtO3BhZGRpbmctcmlnaHQ6LjNyZW07YmFja2dyb3VuZC1jb2xvcjojZGRkfS5kYXRhLXRhYmxlPnRib2R5IHRoe3dpZHRoOjUwJTtmb250LXdlaWdodDpub3JtYWx9LmRhdGEtdGFibGUgdGR7Zm9udC13ZWlnaHQ6bGlnaHRlcn0jbWVzc2FnZUNvbnRhaW5lcntwb3NpdGlvbjphYnNvbHV0ZTtwYWRkaW5nOjFyZW07bWF4LXdpZHRoOjMwMHB4O2ZsZXgtZGlyZWN0aW9uOmNvbHVtbjthbGlnbi1pdGVtczpmbGV4LWVuZDtib3R0b206MnJlbTtyaWdodDoycmVtO2JveC1zaGFkb3c6MnB4IDJweCA2cHggI2IyYjJiMn0jbWVzc2FnZUNvbnRhaW5lcj5idXR0b257bWFyZ2luLWJvdHRvbTouNXJlbX0jbWVzc2FnZUNvbnRhaW5lcj5idXR0b24+aW1ne3dpZHRoOjFyZW19I21lc3NhZ2VDb250YWluZXIuc3VjY2Vzc3tiYWNrZ3JvdW5kLWNvbG9yOiNhZWY1YWR9I21lc3NhZ2VDb250YWluZXIuZXJyb3J7YmFja2dyb3VuZC1jb2xvcjojZGM5MzkzfSNtZXNzYWdlQ29udGFpbmVyLndhcm5pbmd7YmFja2dyb3VuZC1jb2xvcjojZWNkYWE0fSN2aWV3cG9ydE1lc3NhZ2V7ZGlzcGxheTpub25lO3Bvc2l0aW9uOmFic29sdXRlO3dpZHRoOjEwMCU7aGVpZ2h0OjEwMCU7dG9wOjA7anVzdGlmeS1jb250ZW50OmNlbnRlcjthbGlnbi1pdGVtczpjZW50ZXI7dGV4dC1hbGlnbjpjZW50ZXI7Zm9udC13ZWlnaHQ6bGlnaHRlcjtiYWNrZ3JvdW5kLWNvbG9yOnJnYmEoMjU1LDI1NSwyNTUsLjk1KX0jdmlld3BvcnRNZXNzYWdlLmFjdGl2ZXtkaXNwbGF5OmZsZXh9I3ZpZXdwb3J0TWVzc2FnZSBwe3BhZGRpbmctYm90dG9tOjFyZW19I3ZpZXdwb3J0TWVzc2FnZSAuYnRucy1jb250YWluZXJ7ZGlzcGxheTpmbGV4O2p1c3RpZnktY29udGVudDpzcGFjZS1hcm91bmR9I25vdGlmaWNhdGlvbnNDb250YWluZXJ7ZGlzcGxheTpub25lO3Bvc2l0aW9uOmFic29sdXRlO3dpZHRoOjQ1MHB4O3RvcDpjYWxjKHZhcigtLWhlYWRlci1oZWlnaHQpICsgMXJlbSk7cmlnaHQ6MXJlbTtvcGFjaXR5OjA7dHJhbnNpdGlvbjpvcGFjaXR5IC4ycyBlYXNlLWluO2JhY2tncm91bmQtY29sb3I6I2Y2ZjZmNjtib3gtc2hhZG93OjAgMCAxMnB4IHJnYmEoMCwwLDAsLjIpfSNub3RpZmljYXRpb25zQ29udGFpbmVyPi5lbXB0eS1tc2d7ZGlzcGxheTpub25lO3BhZGRpbmc6MnJlbSAuOHJlbTt0ZXh0LWFsaWduOmNlbnRlcn0jbm90aWZpY2F0aW9uc0NvbnRhaW5lci5vcGVue2Rpc3BsYXk6dW5zZXQ7b3BhY2l0eToxfSNub3RpZmljYXRpb25zQ29udGFpbmVyLmVtcHR5Pi5ub3RpZmljYXRpb25zLWJvZHl7ZGlzcGxheTpub25lfSNub3RpZmljYXRpb25zQ29udGFpbmVyLmVtcHR5Pi5lbXB0eS1tc2d7ZGlzcGxheTpibG9ja30ubm90aWZpY2F0aW9ucy1oZWFkZXJ7cGFkZGluZzouOHJlbTtiYWNrZ3JvdW5kLWNvbG9yOiNmYmZiZmI7Ym9yZGVyLWJvdHRvbToycHggc29saWQgI2RiZGJkYn0ubm90aWZpY2F0aW9ucy1ib2R5e21heC1oZWlnaHQ6MzUwcHg7b3ZlcmZsb3c6YXV0b30ubm90aWZpY2F0aW9ucy1ib2R5Pmxpe2Rpc3BsYXk6ZmxleDtwYWRkaW5nOi44cmVtO2N1cnNvcjpwb2ludGVyO2JvcmRlci1ib3R0b206MXB4IHNvbGlkICNkYmRiZGJ9Lm5vdGlmaWNhdGlvbnMtYm9keT5saS5wZW5kaW5ne2JhY2tncm91bmQtY29sb3I6I2NiZWFmNX0ubm90aWZpY2F0aW9ucy1ib2R5PmxpLnBlbmRpbmc6aG92ZXJ7YmFja2dyb3VuZC1jb2xvcjojYzJlMGVhfS5ub3RpZmljYXRpb25zLWJvZHk+bGk6aG92ZXJ7YmFja2dyb3VuZC1jb2xvcjojZWFlYWVhfS5ub3RpZmljYXRpb24tdGh1bWJ7aGVpZ2h0OjUwcHg7bWFyZ2luLXJpZ2h0OjFyZW19Lm5vdGlmaWNhdGlvbi1jb250ZW50Pmg0e21hcmdpbi1ib3R0b206LjJyZW07Zm9udC13ZWlnaHQ6NTAwfS5ub3RpZmljYXRpb24tY29udGVudD5we2ZvbnQtd2VpZ2h0OmxpZ2h0ZXJ9I2NvbnRleHRNZW51e3dpZHRoOjEyMHB4O3Bvc2l0aW9uOmFic29sdXRlO3BhZGRpbmctdG9wOi41cmVtO2JhY2tncm91bmQtY29sb3I6I2ZmZjtib3gtc2hhZG93OjJweCAycHggN3B4IHJnYmEoMCwwLDAsLjIpfSNjb250ZXh0TWVudT51bD5saXtwYWRkaW5nOi42cmVtO2N1cnNvcjpwb2ludGVyfSNjb250ZXh0TWVudT51bD5saTpob3ZlcntiYWNrZ3JvdW5kLWNvbG9yOnJnYmEoMCwwLDAsLjIpfS5zZWxlY3RlZHstLWZpbGw6ICNmZmJkMDA7LS1zdHJva2U6ICNlODk4MDc7LS1zdHJva2UtdzogOHB4fS5zZWxlY3RlZC5maWxsLnN0cm9rZT5wYXRoLC5zZWxlY3RlZC5maWxsLnN0cm9rZT5wb2x5Z29uLC5zZWxlY3RlZC5maWxsLnN0cm9rZT5jaXJjbGUsLnNlbGVjdGVkLmZpbGwuc3Ryb2tlPnJlY3R7ZmlsbDp2YXIoLS1maWxsKTtzdHJva2U6dmFyKC0tc3Ryb2tlKTtzdHJva2Utd2lkdGg6dmFyKC0tc3Ryb2tlLXcpfS5zZWxlY3RlZC5zdHJva2U+cGF0aCwuc2VsZWN0ZWQuc3Ryb2tlPnBvbHlsaW5lLC5zZWxlY3RlZC5zdHJva2U+bGluZXtzdHJva2U6dmFyKC0tc3Ryb2tlKTtzdHJva2Utd2lkdGg6dmFyKC0tc3Ryb2tlLXcpfS5zZWxlY3RlZC5maWxsPnBhdGgsLnNlbGVjdGVkLmZpbGw+cG9seWdvbiwuc2VsZWN0ZWQuZmlsbD5jaXJjbGV7ZmlsbDp2YXIoLS1maWxsKX0uc2VsZWN0ZWQuc3Ryb2tlPi5oYXRjaD5saW5le3N0cm9rZTp2YXIoLS1zdHJva2UpO3N0cm9rZS13aWR0aDp2YXIoLS1zdHJva2Utdyl9OnJvb3R7LS1oZWFkZXItaGVpZ2h0OiAyLjVyZW07LS10aGVtZS1ibHVlOiAjMmE4ZmIxOy0tdGhlbWUteWVsbG93OiAjZWE4YzE1fSosKjo6YmVmb3JlLCo6OmFmdGVye2JveC1zaXppbmc6Ym9yZGVyLWJveH1oMSxoMixoMyxoNCxoNSxwe21hcmdpbi10b3A6MDttYXJnaW4tYm90dG9tOjB9dWwsb2x7bGlzdC1zdHlsZS10eXBlOm5vbmU7bWFyZ2luLXRvcDowO21hcmdpbi1ib3R0b206MDtwYWRkaW5nLWxlZnQ6MH1idXR0b257Ym9yZGVyLXN0eWxlOm5vbmU7cGFkZGluZzowO2JhY2tncm91bmQtY29sb3I6dW5zZXR9Ym9keXtkaXNwbGF5OmZsZXg7ZmxleC1kaXJlY3Rpb246Y29sdW1uO21hcmdpbjowO292ZXJmbG93OmhpZGRlbjtjb2xvcjojNTQ1NDU0O2ZvbnQtZmFtaWx5OlxcXCJPc3dhbGRcXFwiLHNhbnMtc2VyaWZ9c3ZnLnN2Zy1sb2FkZXJ7d2lkdGg6MTMwcHg7aGVpZ2h0OjkwcHh9LmJ1dHRvbkJhc2V7cGFkZGluZzouNHJlbTtjdXJzb3I6cG9pbnRlcjtib3JkZXItd2lkdGg6MXB4O2JvcmRlci1zdHlsZTpzb2xpZDtmb250LWZhbWlseTppbmhlcml0fS5idXR0b25CYXNlLnNpZGVze2JvcmRlci10b3Atc3R5bGU6bm9uZTtib3JkZXItYm90dG9tLXN0eWxlOm5vbmV9LmJ1dHRvbkJhc2UubGlnaHR7Y29sb3I6IzM3MzczNztib3JkZXItY29sb3I6I2NmY2ZjZn0uYnV0dG9uQmFzZS5saWdodDpub3QoLmRpc2FibGVkKTpob3ZlcntiYWNrZ3JvdW5kLWNvbG9yOiNlY2VjZWN9LmJ1dHRvbkJhc2UuZW1waGFzaXple2JvcmRlci1jb2xvcjojZTBlMGUwO2JhY2tncm91bmQtY29sb3I6I2QxZjBlY30uYnV0dG9uQmFzZS5lbXBoYXNpemU6bm90KC5kaXNhYmxlZCk6aG92ZXJ7YmFja2dyb3VuZC1jb2xvcjojYWNkM2NlfS5idXR0b25CYXNlLmRhbmdlcntjb2xvcjojZjU1MjUyO2JvcmRlci1jb2xvcjojZmJhNGE0fS5idXR0b25CYXNlLmRhbmdlcjpub3QoLmRpc2FibGVkKTpob3ZlcntiYWNrZ3JvdW5kLWNvbG9yOiNmZmU5ZTl9LmJ1dHRvbkJhc2UuZGlzYWJsZWR7Y3Vyc29yOnVuc2V0O29wYWNpdHk6LjV9YnV0dG9uLmRpc2FibGVkOmZvY3Vze291dGxpbmUtc3R5bGU6bm9uZX0uYnV0dG9uQmFzZS5sb2NrZWR7Y3Vyc29yOnVuc2V0fS5idXR0b25CYXNlLmxvY2tlZDpob3ZlcntiYWNrZ3JvdW5kLWNvbG9yOnVuc2V0fS5pY29uLWJ0bntjdXJzb3I6cG9pbnRlcn1oZWFkZXIgLmljb24tYnRue3BhZGRpbmc6Y2FsYygoKHZhcigtLWhlYWRlci1oZWlnaHQpIC0gMnB4KSAtIDI0cHgpIC8gMik7aGVpZ2h0OmNhbGModmFyKC0taGVhZGVyLWhlaWdodCkgLSAycHgpO3dpZHRoOmNhbGModmFyKC0taGVhZGVyLWhlaWdodCkgLSAycHgpfS5pY29uLWJ0bjpub3QoLmRpc2FibGVkKTpub3QoLmJ0bi10b29sLWVuYWJsZWQpOmhvdmVye2JhY2tncm91bmQtY29sb3I6I2VjZWNlY30uaWNvbi1idG4+c3Zne2Rpc3BsYXk6YmxvY2s7d2lkdGg6MjRweDtoZWlnaHQ6MjRweH0uaWNvbi1idG4uZGlzYWJsZWR7b3BhY2l0eTouMTtjdXJzb3I6YXV0b30uaWNvbi1idG4uaGlkZGVue2Rpc3BsYXk6bm9uZX0uYnRuLXRvb2wtZW5hYmxlZHtiYWNrZ3JvdW5kLWNvbG9yOiM5NmNiZGJ9LmJ0bi1iZy1pbWd7YmFja2dyb3VuZC1yZXBlYXQ6bm8tcmVwZWF0O2JhY2tncm91bmQtcG9zaXRpb24teTpjZW50ZXI7YmFja2dyb3VuZC1wb3NpdGlvbi14Oi44cmVtfS5nb29nbGUtbG9nb3tiYWNrZ3JvdW5kLWltYWdlOnVybChkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LFBITjJaeUIzYVdSMGFEMGlNVGdpSUdobGFXZG9kRDBpTVRnaUlIWnBaWGRDYjNnOUlqQWdNQ0F4T0NBeE9DSWdlRzFzYm5NOUltaDBkSEE2THk5M2QzY3Vkek11YjNKbkx6SXdNREF2YzNabklqNDhkR2wwYkdVK2MzVndaWElnWnp3dmRHbDBiR1UrUEdjZ1ptbHNiQzF5ZFd4bFBTSmxkbVZ1YjJSa0lqNDhjR0YwYUNCa1BTSk5PU0F6TGpRNFl6RXVOamtnTUNBeUxqZ3pMamN6SURNdU5EZ2dNUzR6Tkd3eUxqVTBMVEl1TkRoRE1UTXVORFl1T0RrZ01URXVORE1nTUNBNUlEQWdOUzQwT0NBd0lESXVORFFnTWk0d01pNDVOaUEwTGprMmJESXVPVEVnTWk0eU5rTTBMallnTlM0d05TQTJMall5SURNdU5EZ2dPU0F6TGpRNGVpSWdabWxzYkQwaUkwVkJORE16TlNJdlBqeHdZWFJvSUdROUlrMHhOeTQyTkNBNUxqSmpNQzB1TnpRdExqQTJMVEV1TWpndExqRTVMVEV1T0RSSU9YWXpMak0wYURRdU9UWmpMUzR4TGpnekxTNDJOQ0F5TGpBNExURXVPRFFnTWk0NU1td3lMamcwSURJdU1tTXhMamN0TVM0MU55QXlMalk0TFRNdU9EZ2dNaTQyT0MwMkxqWXllaUlnWm1sc2JEMGlJelF5T0RWR05DSXZQanh3WVhSb0lHUTlJazB6TGpnNElERXdMamM0UVRVdU5UUWdOUzQxTkNBd0lEQWdNU0F6TGpVNElEbGpNQzB1TmpJdU1URXRNUzR5TWk0eU9TMHhMamM0VEM0NU5pQTBMamsyUVRrdU1EQTRJRGt1TURBNElEQWdNQ0F3SURBZ09XTXdJREV1TkRVdU16VWdNaTQ0TWk0NU5pQTBMakEwYkRJdU9USXRNaTR5Tm5vaUlHWnBiR3c5SWlOR1FrSkRNRFVpTHo0OGNHRjBhQ0JrUFNKTk9TQXhPR015TGpReklEQWdOQzQwTnkwdU9DQTFMamsyTFRJdU1UaHNMVEl1T0RRdE1pNHlZeTB1TnpZdU5UTXRNUzQzT0M0NUxUTXVNVEl1T1MweUxqTTRJREF0TkM0MExURXVOVGN0TlM0eE1pMHpMamMwVEM0NU55QXhNeTR3TkVNeUxqUTFJREUxTGprNElEVXVORGdnTVRnZ09TQXhPSG9pSUdacGJHdzlJaU16TkVFNE5UTWlMejQ4Y0dGMGFDQm1hV3hzUFNKdWIyNWxJaUJrUFNKTk1DQXdhREU0ZGpFNFNEQjZJaTgrUEM5blBqd3ZjM1puUGc9PSl9I3NhdmVCdG4uZW5hYmxlZD5zdmcsI25vdGlmaWNhdGlvbkJ0bi5lbmFibGVkPnN2Z3tmaWxsOnZhcigtLXRoZW1lLXllbGxvdyk7dHJhbnNmb3JtOnNjYWxlKDEuMil9I3NhdmVCdG4+c3ZnLnByb2dyZXNzLWljb257ZGlzcGxheTpub25lfSNzYXZlQnRuLnByb2dyZXNzOmhvdmVye2N1cnNvcjphdXRvO2JhY2tncm91bmQtY29sb3I6dW5zZXR9I3NhdmVCdG4ucHJvZ3Jlc3M+c3ZnLnNhdmUtaWNvbntkaXNwbGF5Om5vbmV9I3NhdmVCdG4ucHJvZ3Jlc3M+c3ZnLnByb2dyZXNzLWljb257ZGlzcGxheTpibG9ja31oZWFkZXJ7aGVpZ2h0OnZhcigtLWhlYWRlci1oZWlnaHQpO3BhZGRpbmctcmlnaHQ6OHJlbTthbGlnbi1pdGVtczpzdHJldGNoO3otaW5kZXg6MTtiYWNrZ3JvdW5kLWNvbG9yOiNmNmY2ZjY7Ym9yZGVyLWJvdHRvbToycHggc29saWQgdmFyKC0tdGhlbWUtYmx1ZSl9aGVhZGVyPnNwYW46Zmlyc3QtY2hpbGR7d2lkdGg6NHJlbX1oZWFkZXI+c3BhbjpmaXJzdC1jaGlsZD5pbWd7aGVpZ2h0OjEwMCU7cGFkZGluZzouM3JlbTttYXJnaW46YXV0bztkaXNwbGF5OmJsb2NrfWhlYWRlcj5oMXtwb3NpdGlvbjphYnNvbHV0ZTtyaWdodDoxMDAlfSNwcm9qZWN0c0xpc3RCdG57bWluLXdpZHRoOjEwcmVtO2ZvbnQtc2l6ZToxcmVtO2ZvbnQtd2VpZ2h0Om5vcm1hbH0jcHJvamVjdHNMaXN0QnRuPnNwYW57ZGlzcGxheTppbmxpbmUtYmxvY2s7d2lkdGg6MTAwJTt0ZXh0LWFsaWduOmNlbnRlcn1AbWVkaWEobWF4LXdpZHRoOiA1MDBweCl7I3Byb2plY3RzTGlzdEJ0bntkaXNwbGF5OnVuc2V0O21pbi13aWR0aDp1bnNldDt3aWR0aDoyLjVyZW07Zm9udC1zaXplOjA7Ym9yZGVyLWxlZnQtc3R5bGU6bm9uZTtiYWNrZ3JvdW5kLXJlcGVhdDpuby1yZXBlYXQ7YmFja2dyb3VuZC1wb3NpdGlvbjpjZW50ZXI7YmFja2dyb3VuZC1pbWFnZTp1cmwoXCIgKyBfX19DU1NfTE9BREVSX1VSTF9SRVBMQUNFTUVOVF8yX19fICsgXCIpO2JhY2tncm91bmQtc2l6ZToyNHB4fX0jdG9vbGJhcnNDb250YWluZXJ7ZmxleC1ncm93OjE7anVzdGlmeS1jb250ZW50OmZsZXgtZW5kfSNkcmF3aW5nc0J0bnN7bWluLXdpZHRoOjhyZW07dGV4dC1hbGlnbjpjZW50ZXJ9I2RyYXdpbmdzQnRucz5idXR0b257aGVpZ2h0OmNhbGModmFyKC0taGVhZGVyLWhlaWdodCkgLSAycHgpO3dpZHRoOjEwMCU7Ym9yZGVyLWxlZnQtc3R5bGU6bm9uZX0jZHJhd2luZ3NCdG5zPnVse2ZvbnQtc2l6ZTouOXJlbTtmb250LXdlaWdodDpsaWdodGVyO2N1cnNvcjpwb2ludGVyO2JhY2tncm91bmQtY29sb3I6I2Y2ZjZmNjtib3gtc2hhZG93OjBweCAycHggNXB4ICNiNmI2YjZ9I2RyYXdpbmdzQnRucz51bD5saXtwYWRkaW5nOi40cmVtfSNkcmF3aW5nc0J0bnM+dWw+bGkuYWN0aXZle2JhY2tncm91bmQtY29sb3I6I2MyYzJjMjtjdXJzb3I6YXV0b30jZHJhd2luZ3NCdG5zPnVsPmxpOm5vdCguYWN0aXZlKTpob3ZlcntiYWNrZ3JvdW5kLWNvbG9yOiNkZmRmZGZ9Lmdsb2JhbC1uYXYtYnRuc3tkaXNwbGF5OmZsZXg7cG9zaXRpb246YWJzb2x1dGU7dG9wOjA7cmlnaHQ6MDt6LWluZGV4OjEwMDA7Ym9yZGVyLWxlZnQ6MXB4IHNvbGlkICNjOGM4Yzh9QG1lZGlhKG1heC13aWR0aDogNTAwcHgpe2hlYWRlcntvcmRlcjoxO2JvcmRlci10b3A6MnB4IHNvbGlkIHZhcigtLXRoZW1lLWJsdWUpO2JvcmRlci1ib3R0b206dW5zZXR9aGVhZGVyPnNwYW46Zmlyc3QtY2hpbGR7ZGlzcGxheTpub25lfSN0b29sYmFyc0NvbnRhaW5lcntwb3NpdGlvbjphYnNvbHV0ZTtyaWdodDowfSNkcmF3aW5nc0J0bnM+dWx7Ym94LXNoYWRvdzowcHggLTJweCA3cHggI2I2YjZiNn19LmRyb3Bkb3duLWNvbnRhaW5lcnt6LWluZGV4OjE7cG9zaXRpb246cmVsYXRpdmV9LmRyb3Bkb3duLWNvbnRhaW5lcj4uZHJvcGRvd24tY29udGVudHtkaXNwbGF5OmZsZXg7ZmxleC1kaXJlY3Rpb246Y29sdW1uO3RyYW5zaXRpb246LjZzO3RyYW5zZm9ybTp0cmFuc2xhdGVZKC0xMDAlKTtvcGFjaXR5OjA7ei1pbmRleDotMTtwb3NpdGlvbjphYnNvbHV0ZTtyaWdodDowO2xlZnQ6MDt0b3A6Y2FsYyh2YXIoLS1oZWFkZXItaGVpZ2h0KSAtIDJweCl9LmRyb3Bkb3duLWNvbnRhaW5lci5yZXNwb25zaXZlPi5kcm9wZG93bi1jb250ZW50e2Rpc3BsYXk6aW5saW5lO29wYWNpdHk6dW5zZXQ7ei1pbmRleDp1bnNldDtwb3NpdGlvbjp1bnNldH1AbWVkaWEobWF4LXdpZHRoOiA4MDBweCl7LmRyb3Bkb3duLWNvbnRhaW5lci5yZXNwb25zaXZlPi5kcm9wZG93bi1jb250ZW50e2Rpc3BsYXk6ZmxleDtvcGFjaXR5OjA7ei1pbmRleDotMTtwb3NpdGlvbjphYnNvbHV0ZX19LmRyb3Bkb3duLWNvbnRhaW5lci5vcGVuPi5kcm9wZG93bi1jb250ZW50e3RyYW5zZm9ybTp0cmFuc2xhdGVZKDAlKTtvcGFjaXR5OjF9QG1lZGlhKG1heC13aWR0aDogNTAwcHgpey5kcm9wZG93bi1jb250YWluZXI+LmRyb3Bkb3duLWNvbnRlbnR7dHJhbnNmb3JtOnVuc2V0fS5kcm9wZG93bi1jb250YWluZXIub3Blbj4uZHJvcGRvd24tY29udGVudHt0cmFuc2Zvcm06dHJhbnNsYXRlWShjYWxjKC0xMDAlIC0gMi41cmVtICsgMnB4KSl9fW1haW57cG9zaXRpb246cmVsYXRpdmU7aGVpZ2h0OmNhbGMoMTAwdmggLSB2YXIoLS1oZWFkZXItaGVpZ2h0KSl9I3dvcmtzcGFjZXN7aGVpZ2h0OjEwMCV9LndvcmtzcGFjZXtoZWlnaHQ6MTAwJX1mb3JtIC50b3AtbGFiZWx7bWFyZ2luLWJvdHRvbTouNXJlbX1mb3JtIC5iYXNlLWlucHV0e3BhZGRpbmc6LjRyZW19Zm9ybSAuZXJyb3ItbXNne2ZvbnQtc2l6ZTouOXJlbTtmb250LXdlaWdodDpsaWdodGVyO2NvbG9yOnJlZH1mb3JtIC5lcnJvci1tc2cuaGlkZGVue3Zpc2liaWxpdHk6aGlkZGVufSNyZW5hbWVQcm9qZWN0Rm9ybSAucmVuYW1lLWZvcm0tY29udGVudHtkaXNwbGF5OmZsZXg7d2lkdGg6MTAwJTtmbGV4LWRpcmVjdGlvbjpjb2x1bW59LmRyYXdpbmdzQ29udGFpbmVye2hlaWdodDoxMDAlfS5kcmF3aW5nc0NvbnRhaW5lcj5kaXZ7aGVpZ2h0OjEwMCV9LmRyYXdpbmdzQ29udGFpbmVyPmRpdj5zdmd7aGVpZ2h0OjEwMCU7d2lkdGg6MTAwJX1AbWVkaWEgYWxsIGFuZCAoZGlzcGxheS1tb2RlOiBzdGFuZGFsb25lKXtoZWFkZXJ7Ym9yZGVyLXRvcDoxcHggc29saWQgI2RlZGVkZX19XCIsIFwiXCJdKTtcbi8vIEV4cG9ydHNcbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0cztcbiIsIlwidXNlIHN0cmljdFwiO1xuXG4vKlxuICBNSVQgTGljZW5zZSBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlLnBocFxuICBBdXRob3IgVG9iaWFzIEtvcHBlcnMgQHNva3JhXG4qL1xuLy8gY3NzIGJhc2UgY29kZSwgaW5qZWN0ZWQgYnkgdGhlIGNzcy1sb2FkZXJcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBmdW5jLW5hbWVzXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICh1c2VTb3VyY2VNYXApIHtcbiAgdmFyIGxpc3QgPSBbXTsgLy8gcmV0dXJuIHRoZSBsaXN0IG9mIG1vZHVsZXMgYXMgY3NzIHN0cmluZ1xuXG4gIGxpc3QudG9TdHJpbmcgPSBmdW5jdGlvbiB0b1N0cmluZygpIHtcbiAgICByZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgIHZhciBjb250ZW50ID0gY3NzV2l0aE1hcHBpbmdUb1N0cmluZyhpdGVtLCB1c2VTb3VyY2VNYXApO1xuXG4gICAgICBpZiAoaXRlbVsyXSkge1xuICAgICAgICByZXR1cm4gXCJAbWVkaWEgXCIuY29uY2F0KGl0ZW1bMl0sIFwiIHtcIikuY29uY2F0KGNvbnRlbnQsIFwifVwiKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGNvbnRlbnQ7XG4gICAgfSkuam9pbignJyk7XG4gIH07IC8vIGltcG9ydCBhIGxpc3Qgb2YgbW9kdWxlcyBpbnRvIHRoZSBsaXN0XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBmdW5jLW5hbWVzXG5cblxuICBsaXN0LmkgPSBmdW5jdGlvbiAobW9kdWxlcywgbWVkaWFRdWVyeSwgZGVkdXBlKSB7XG4gICAgaWYgKHR5cGVvZiBtb2R1bGVzID09PSAnc3RyaW5nJykge1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduXG4gICAgICBtb2R1bGVzID0gW1tudWxsLCBtb2R1bGVzLCAnJ11dO1xuICAgIH1cblxuICAgIHZhciBhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzID0ge307XG5cbiAgICBpZiAoZGVkdXBlKSB7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHByZWZlci1kZXN0cnVjdHVyaW5nXG4gICAgICAgIHZhciBpZCA9IHRoaXNbaV1bMF07XG5cbiAgICAgICAgaWYgKGlkICE9IG51bGwpIHtcbiAgICAgICAgICBhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzW2lkXSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgbW9kdWxlcy5sZW5ndGg7IF9pKyspIHtcbiAgICAgIHZhciBpdGVtID0gW10uY29uY2F0KG1vZHVsZXNbX2ldKTtcblxuICAgICAgaWYgKGRlZHVwZSAmJiBhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzW2l0ZW1bMF1dKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb250aW51ZVxuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKG1lZGlhUXVlcnkpIHtcbiAgICAgICAgaWYgKCFpdGVtWzJdKSB7XG4gICAgICAgICAgaXRlbVsyXSA9IG1lZGlhUXVlcnk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaXRlbVsyXSA9IFwiXCIuY29uY2F0KG1lZGlhUXVlcnksIFwiIGFuZCBcIikuY29uY2F0KGl0ZW1bMl0pO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGxpc3QucHVzaChpdGVtKTtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIGxpc3Q7XG59O1xuXG5mdW5jdGlvbiBjc3NXaXRoTWFwcGluZ1RvU3RyaW5nKGl0ZW0sIHVzZVNvdXJjZU1hcCkge1xuICB2YXIgY29udGVudCA9IGl0ZW1bMV0gfHwgJyc7IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBwcmVmZXItZGVzdHJ1Y3R1cmluZ1xuXG4gIHZhciBjc3NNYXBwaW5nID0gaXRlbVszXTtcblxuICBpZiAoIWNzc01hcHBpbmcpIHtcbiAgICByZXR1cm4gY29udGVudDtcbiAgfVxuXG4gIGlmICh1c2VTb3VyY2VNYXAgJiYgdHlwZW9mIGJ0b2EgPT09ICdmdW5jdGlvbicpIHtcbiAgICB2YXIgc291cmNlTWFwcGluZyA9IHRvQ29tbWVudChjc3NNYXBwaW5nKTtcbiAgICB2YXIgc291cmNlVVJMcyA9IGNzc01hcHBpbmcuc291cmNlcy5tYXAoZnVuY3Rpb24gKHNvdXJjZSkge1xuICAgICAgcmV0dXJuIFwiLyojIHNvdXJjZVVSTD1cIi5jb25jYXQoY3NzTWFwcGluZy5zb3VyY2VSb290IHx8ICcnKS5jb25jYXQoc291cmNlLCBcIiAqL1wiKTtcbiAgICB9KTtcbiAgICByZXR1cm4gW2NvbnRlbnRdLmNvbmNhdChzb3VyY2VVUkxzKS5jb25jYXQoW3NvdXJjZU1hcHBpbmddKS5qb2luKCdcXG4nKTtcbiAgfVxuXG4gIHJldHVybiBbY29udGVudF0uam9pbignXFxuJyk7XG59IC8vIEFkYXB0ZWQgZnJvbSBjb252ZXJ0LXNvdXJjZS1tYXAgKE1JVClcblxuXG5mdW5jdGlvbiB0b0NvbW1lbnQoc291cmNlTWFwKSB7XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bmRlZlxuICB2YXIgYmFzZTY0ID0gYnRvYSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoc291cmNlTWFwKSkpKTtcbiAgdmFyIGRhdGEgPSBcInNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTg7YmFzZTY0LFwiLmNvbmNhdChiYXNlNjQpO1xuICByZXR1cm4gXCIvKiMgXCIuY29uY2F0KGRhdGEsIFwiICovXCIpO1xufSIsIlwidXNlIHN0cmljdFwiO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICh1cmwsIG9wdGlvbnMpIHtcbiAgaWYgKCFvcHRpb25zKSB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduXG4gICAgb3B0aW9ucyA9IHt9O1xuICB9IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bmRlcnNjb3JlLWRhbmdsZSwgbm8tcGFyYW0tcmVhc3NpZ25cblxuXG4gIHVybCA9IHVybCAmJiB1cmwuX19lc01vZHVsZSA/IHVybC5kZWZhdWx0IDogdXJsO1xuXG4gIGlmICh0eXBlb2YgdXJsICE9PSAnc3RyaW5nJykge1xuICAgIHJldHVybiB1cmw7XG4gIH0gLy8gSWYgdXJsIGlzIGFscmVhZHkgd3JhcHBlZCBpbiBxdW90ZXMsIHJlbW92ZSB0aGVtXG5cblxuICBpZiAoL15bJ1wiXS4qWydcIl0kLy50ZXN0KHVybCkpIHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICB1cmwgPSB1cmwuc2xpY2UoMSwgLTEpO1xuICB9XG5cbiAgaWYgKG9wdGlvbnMuaGFzaCkge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICAgIHVybCArPSBvcHRpb25zLmhhc2g7XG4gIH0gLy8gU2hvdWxkIHVybCBiZSB3cmFwcGVkP1xuICAvLyBTZWUgaHR0cHM6Ly9kcmFmdHMuY3Nzd2cub3JnL2Nzcy12YWx1ZXMtMy8jdXJsc1xuXG5cbiAgaWYgKC9bXCInKCkgXFx0XFxuXS8udGVzdCh1cmwpIHx8IG9wdGlvbnMubmVlZFF1b3Rlcykge1xuICAgIHJldHVybiBcIlxcXCJcIi5jb25jYXQodXJsLnJlcGxhY2UoL1wiL2csICdcXFxcXCInKS5yZXBsYWNlKC9cXG4vZywgJ1xcXFxuJyksIFwiXFxcIlwiKTtcbiAgfVxuXG4gIHJldHVybiB1cmw7XG59OyIsImV4cG9ydCBkZWZhdWx0IF9fd2VicGFja19wdWJsaWNfcGF0aF9fICsgXCI2YTUxNmZmNWZhYzI4MTM5YTVmMDVjNTkyOTc0YWQ3YS5zdmdcIjsiLCJleHBvcnQgZGVmYXVsdCBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwiZTI2ODRkMjE3YTg4MmFlMDJjODYxYjdmYzUzMTRlNzIuc3ZnXCI7IiwiZXhwb3J0IGRlZmF1bHQgX193ZWJwYWNrX3B1YmxpY19wYXRoX18gKyBcIjY5OTQ4NWFkNDI0ZjY4ZmY5MDY4YTExMWRlYWJhMDQ3LnN2Z1wiOyIsIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcblxuZnVuY3Rpb24gX2ludGVyb3BEZWZhdWx0IChleCkgeyByZXR1cm4gKGV4ICYmICh0eXBlb2YgZXggPT09ICdvYmplY3QnKSAmJiAnZGVmYXVsdCcgaW4gZXgpID8gZXhbJ2RlZmF1bHQnXSA6IGV4OyB9XG5cbnZhciBmaXJlYmFzZSA9IF9pbnRlcm9wRGVmYXVsdChyZXF1aXJlKCdAZmlyZWJhc2UvYXBwJykpO1xudmFyIHRzbGliID0gcmVxdWlyZSgndHNsaWInKTtcbnZhciBsb2dnZXIgPSByZXF1aXJlKCdAZmlyZWJhc2UvbG9nZ2VyJyk7XG52YXIgdXRpbCA9IHJlcXVpcmUoJ0BmaXJlYmFzZS91dGlsJyk7XG52YXIgY29tcG9uZW50ID0gcmVxdWlyZSgnQGZpcmViYXNlL2NvbXBvbmVudCcpO1xudmFyIHdlYmNoYW5uZWxXcmFwcGVyID0gcmVxdWlyZSgnQGZpcmViYXNlL3dlYmNoYW5uZWwtd3JhcHBlcicpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqIFRoZSBzZW12ZXIgKHd3dy5zZW12ZXIub3JnKSB2ZXJzaW9uIG9mIHRoZSBTREsuICovXHJcbnZhciBTREtfVkVSU0lPTiA9IGZpcmViYXNlLlNES19WRVJTSU9OO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxudmFyIGxvZ0NsaWVudCA9IG5ldyBsb2dnZXIuTG9nZ2VyKCdAZmlyZWJhc2UvZmlyZXN0b3JlJyk7XHJcbnZhciBMb2dMZXZlbDtcclxuKGZ1bmN0aW9uIChMb2dMZXZlbCkge1xyXG4gICAgTG9nTGV2ZWxbTG9nTGV2ZWxbXCJERUJVR1wiXSA9IDBdID0gXCJERUJVR1wiO1xyXG4gICAgTG9nTGV2ZWxbTG9nTGV2ZWxbXCJFUlJPUlwiXSA9IDFdID0gXCJFUlJPUlwiO1xyXG4gICAgTG9nTGV2ZWxbTG9nTGV2ZWxbXCJTSUxFTlRcIl0gPSAyXSA9IFwiU0lMRU5UXCI7XHJcbn0pKExvZ0xldmVsIHx8IChMb2dMZXZlbCA9IHt9KSk7XHJcbi8vIEhlbHBlciBtZXRob2RzIGFyZSBuZWVkZWQgYmVjYXVzZSB2YXJpYWJsZXMgY2FuJ3QgYmUgZXhwb3J0ZWQgYXMgcmVhZC93cml0ZVxyXG5mdW5jdGlvbiBnZXRMb2dMZXZlbCgpIHtcclxuICAgIGlmIChsb2dDbGllbnQubG9nTGV2ZWwgPT09IGxvZ2dlci5Mb2dMZXZlbC5ERUJVRykge1xyXG4gICAgICAgIHJldHVybiBMb2dMZXZlbC5ERUJVRztcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGxvZ0NsaWVudC5sb2dMZXZlbCA9PT0gbG9nZ2VyLkxvZ0xldmVsLlNJTEVOVCkge1xyXG4gICAgICAgIHJldHVybiBMb2dMZXZlbC5TSUxFTlQ7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICByZXR1cm4gTG9nTGV2ZWwuRVJST1I7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gc2V0TG9nTGV2ZWwobmV3TGV2ZWwpIHtcclxuICAgIC8qKlxyXG4gICAgICogTWFwIHRoZSBuZXcgbG9nIGxldmVsIHRvIHRoZSBhc3NvY2lhdGVkIEZpcmViYXNlIExvZyBMZXZlbFxyXG4gICAgICovXHJcbiAgICBzd2l0Y2ggKG5ld0xldmVsKSB7XHJcbiAgICAgICAgY2FzZSBMb2dMZXZlbC5ERUJVRzpcclxuICAgICAgICAgICAgbG9nQ2xpZW50LmxvZ0xldmVsID0gbG9nZ2VyLkxvZ0xldmVsLkRFQlVHO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIExvZ0xldmVsLkVSUk9SOlxyXG4gICAgICAgICAgICBsb2dDbGllbnQubG9nTGV2ZWwgPSBsb2dnZXIuTG9nTGV2ZWwuRVJST1I7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgTG9nTGV2ZWwuU0lMRU5UOlxyXG4gICAgICAgICAgICBsb2dDbGllbnQubG9nTGV2ZWwgPSBsb2dnZXIuTG9nTGV2ZWwuU0lMRU5UO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICBsb2dDbGllbnQuZXJyb3IoXCJGaXJlc3RvcmUgKFwiICsgU0RLX1ZFUlNJT04gKyBcIik6IEludmFsaWQgdmFsdWUgcGFzc2VkIHRvIGBzZXRMb2dMZXZlbGBcIik7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gZGVidWcodGFnLCBtc2cpIHtcclxuICAgIHZhciBvYmogPSBbXTtcclxuICAgIGZvciAodmFyIF9pID0gMjsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgb2JqW19pIC0gMl0gPSBhcmd1bWVudHNbX2ldO1xyXG4gICAgfVxyXG4gICAgaWYgKGxvZ0NsaWVudC5sb2dMZXZlbCA8PSBsb2dnZXIuTG9nTGV2ZWwuREVCVUcpIHtcclxuICAgICAgICB2YXIgYXJncyA9IG9iai5tYXAoYXJnVG9TdHJpbmcpO1xyXG4gICAgICAgIGxvZ0NsaWVudC5kZWJ1Zy5hcHBseShsb2dDbGllbnQsIHRzbGliLl9fc3ByZWFkQXJyYXlzKFtcIkZpcmVzdG9yZSAoXCIgKyBTREtfVkVSU0lPTiArIFwiKSBbXCIgKyB0YWcgKyBcIl06IFwiICsgbXNnXSwgYXJncykpO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGVycm9yKG1zZykge1xyXG4gICAgdmFyIG9iaiA9IFtdO1xyXG4gICAgZm9yICh2YXIgX2kgPSAxOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICBvYmpbX2kgLSAxXSA9IGFyZ3VtZW50c1tfaV07XHJcbiAgICB9XHJcbiAgICBpZiAobG9nQ2xpZW50LmxvZ0xldmVsIDw9IGxvZ2dlci5Mb2dMZXZlbC5FUlJPUikge1xyXG4gICAgICAgIHZhciBhcmdzID0gb2JqLm1hcChhcmdUb1N0cmluZyk7XHJcbiAgICAgICAgbG9nQ2xpZW50LmVycm9yLmFwcGx5KGxvZ0NsaWVudCwgdHNsaWIuX19zcHJlYWRBcnJheXMoW1wiRmlyZXN0b3JlIChcIiArIFNES19WRVJTSU9OICsgXCIpOiBcIiArIG1zZ10sIGFyZ3MpKTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogQ29udmVydHMgYW4gYWRkaXRpb25hbCBsb2cgcGFyYW1ldGVyIHRvIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uLlxyXG4gKi9cclxuZnVuY3Rpb24gYXJnVG9TdHJpbmcob2JqKSB7XHJcbiAgICBpZiAodHlwZW9mIG9iaiA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICByZXR1cm4gb2JqO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgdmFyIHBsYXRmb3JtID0gUGxhdGZvcm1TdXBwb3J0LmdldFBsYXRmb3JtKCk7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgcmV0dXJuIHBsYXRmb3JtLmZvcm1hdEpTT04ob2JqKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgLy8gQ29udmVydGluZyB0byBKU09OIGZhaWxlZCwganVzdCBsb2cgdGhlIG9iamVjdCBkaXJlY3RseVxyXG4gICAgICAgICAgICByZXR1cm4gb2JqO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFVuY29uZGl0aW9uYWxseSBmYWlscywgdGhyb3dpbmcgYW4gRXJyb3Igd2l0aCB0aGUgZ2l2ZW4gbWVzc2FnZS5cclxuICpcclxuICogUmV0dXJucyBhbnkgc28gaXQgY2FuIGJlIHVzZWQgaW4gZXhwcmVzc2lvbnM6XHJcbiAqIEBleGFtcGxlXHJcbiAqIGxldCBmdXR1cmVWYXIgPSBmYWlsKCdub3QgaW1wbGVtZW50ZWQgeWV0Jyk7XHJcbiAqL1xyXG5mdW5jdGlvbiBmYWlsKGZhaWx1cmUpIHtcclxuICAgIC8vIExvZyB0aGUgZmFpbHVyZSBpbiBhZGRpdGlvbiB0byB0aHJvdyBhbiBleGNlcHRpb24sIGp1c3QgaW4gY2FzZSB0aGVcclxuICAgIC8vIGV4Y2VwdGlvbiBpcyBzd2FsbG93ZWQuXHJcbiAgICB2YXIgbWVzc2FnZSA9IFwiRklSRVNUT1JFIChcIiArIFNES19WRVJTSU9OICsgXCIpIElOVEVSTkFMIEFTU0VSVElPTiBGQUlMRUQ6IFwiICsgZmFpbHVyZTtcclxuICAgIGVycm9yKG1lc3NhZ2UpO1xyXG4gICAgLy8gTk9URTogV2UgZG9uJ3QgdXNlIEZpcmVzdG9yZUVycm9yIGhlcmUgYmVjYXVzZSB0aGVzZSBhcmUgaW50ZXJuYWwgZmFpbHVyZXNcclxuICAgIC8vIHRoYXQgY2Fubm90IGJlIGhhbmRsZWQgYnkgdGhlIHVzZXIuIChBbHNvIGl0IHdvdWxkIGNyZWF0ZSBhIGNpcmN1bGFyXHJcbiAgICAvLyBkZXBlbmRlbmN5IGJldHdlZW4gdGhlIGVycm9yIGFuZCBhc3NlcnQgbW9kdWxlcyB3aGljaCBkb2Vzbid0IHdvcmsuKVxyXG4gICAgdGhyb3cgbmV3IEVycm9yKG1lc3NhZ2UpO1xyXG59XHJcbi8qKlxyXG4gKiBGYWlscyBpZiB0aGUgZ2l2ZW4gYXNzZXJ0aW9uIGNvbmRpdGlvbiBpcyBmYWxzZSwgdGhyb3dpbmcgYW4gRXJyb3Igd2l0aCB0aGVcclxuICogZ2l2ZW4gbWVzc2FnZSBpZiBpdCBkaWQuXHJcbiAqL1xyXG5mdW5jdGlvbiBhc3NlcnQoYXNzZXJ0aW9uLCBtZXNzYWdlKSB7XHJcbiAgICBpZiAoIWFzc2VydGlvbikge1xyXG4gICAgICAgIGZhaWwobWVzc2FnZSk7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBQcm92aWRlcyBzaW5nbGV0b24gaGVscGVycyB3aGVyZSBzZXR1cCBjb2RlIGNhbiBpbmplY3QgYSBwbGF0Zm9ybSBhdCBydW50aW1lLlxyXG4gKiBzZXRQbGF0Zm9ybSBuZWVkcyB0byBiZSBzZXQgYmVmb3JlIEZpcmVzdG9yZSBpcyB1c2VkIGFuZCBtdXN0IGJlIHNldCBleGFjdGx5XHJcbiAqIG9uY2UuXHJcbiAqL1xyXG52YXIgUGxhdGZvcm1TdXBwb3J0ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gUGxhdGZvcm1TdXBwb3J0KCkge1xyXG4gICAgfVxyXG4gICAgUGxhdGZvcm1TdXBwb3J0LnNldFBsYXRmb3JtID0gZnVuY3Rpb24gKHBsYXRmb3JtKSB7XHJcbiAgICAgICAgaWYgKFBsYXRmb3JtU3VwcG9ydC5wbGF0Zm9ybSkge1xyXG4gICAgICAgICAgICBmYWlsKCdQbGF0Zm9ybSBhbHJlYWR5IGRlZmluZWQnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgUGxhdGZvcm1TdXBwb3J0LnBsYXRmb3JtID0gcGxhdGZvcm07XHJcbiAgICB9O1xyXG4gICAgUGxhdGZvcm1TdXBwb3J0LmdldFBsYXRmb3JtID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICghUGxhdGZvcm1TdXBwb3J0LnBsYXRmb3JtKSB7XHJcbiAgICAgICAgICAgIGZhaWwoJ1BsYXRmb3JtIG5vdCBzZXQnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIFBsYXRmb3JtU3VwcG9ydC5wbGF0Zm9ybTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gUGxhdGZvcm1TdXBwb3J0O1xyXG59KCkpO1xyXG4vKipcclxuICogUmV0dXJucyB0aGUgcmVwcmVzZW50YXRpb24gb2YgYW4gZW1wdHkgXCJwcm90b1wiIGJ5dGUgc3RyaW5nIGZvciB0aGVcclxuICogcGxhdGZvcm0uXHJcbiAqL1xyXG5mdW5jdGlvbiBlbXB0eUJ5dGVTdHJpbmcoKSB7XHJcbiAgICByZXR1cm4gUGxhdGZvcm1TdXBwb3J0LmdldFBsYXRmb3JtKCkuZW1wdHlCeXRlU3RyaW5nO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG52YXIgQ29kZSA9IHtcclxuICAgIC8vIENhdXNlcyBhcmUgY29waWVkIGZyb206XHJcbiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vZ3JwYy9ncnBjL2Jsb2IvYmNlZWM5NGVhNGZjNWYwMDg1ZDgxMjM1ZDhlMWMwNjc5OGRjMzQxYS9pbmNsdWRlL2dycGMlMkIlMkIvaW1wbC9jb2RlZ2VuL3N0YXR1c19jb2RlX2VudW0uaFxyXG4gICAgLyoqIE5vdCBhbiBlcnJvcjsgcmV0dXJuZWQgb24gc3VjY2Vzcy4gKi9cclxuICAgIE9LOiAnb2snLFxyXG4gICAgLyoqIFRoZSBvcGVyYXRpb24gd2FzIGNhbmNlbGxlZCAodHlwaWNhbGx5IGJ5IHRoZSBjYWxsZXIpLiAqL1xyXG4gICAgQ0FOQ0VMTEVEOiAnY2FuY2VsbGVkJyxcclxuICAgIC8qKiBVbmtub3duIGVycm9yIG9yIGFuIGVycm9yIGZyb20gYSBkaWZmZXJlbnQgZXJyb3IgZG9tYWluLiAqL1xyXG4gICAgVU5LTk9XTjogJ3Vua25vd24nLFxyXG4gICAgLyoqXHJcbiAgICAgKiBDbGllbnQgc3BlY2lmaWVkIGFuIGludmFsaWQgYXJndW1lbnQuIE5vdGUgdGhhdCB0aGlzIGRpZmZlcnMgZnJvbVxyXG4gICAgICogRkFJTEVEX1BSRUNPTkRJVElPTi4gSU5WQUxJRF9BUkdVTUVOVCBpbmRpY2F0ZXMgYXJndW1lbnRzIHRoYXQgYXJlXHJcbiAgICAgKiBwcm9ibGVtYXRpYyByZWdhcmRsZXNzIG9mIHRoZSBzdGF0ZSBvZiB0aGUgc3lzdGVtIChlLmcuLCBhIG1hbGZvcm1lZCBmaWxlXHJcbiAgICAgKiBuYW1lKS5cclxuICAgICAqL1xyXG4gICAgSU5WQUxJRF9BUkdVTUVOVDogJ2ludmFsaWQtYXJndW1lbnQnLFxyXG4gICAgLyoqXHJcbiAgICAgKiBEZWFkbGluZSBleHBpcmVkIGJlZm9yZSBvcGVyYXRpb24gY291bGQgY29tcGxldGUuIEZvciBvcGVyYXRpb25zIHRoYXRcclxuICAgICAqIGNoYW5nZSB0aGUgc3RhdGUgb2YgdGhlIHN5c3RlbSwgdGhpcyBlcnJvciBtYXkgYmUgcmV0dXJuZWQgZXZlbiBpZiB0aGVcclxuICAgICAqIG9wZXJhdGlvbiBoYXMgY29tcGxldGVkIHN1Y2Nlc3NmdWxseS4gRm9yIGV4YW1wbGUsIGEgc3VjY2Vzc2Z1bCByZXNwb25zZVxyXG4gICAgICogZnJvbSBhIHNlcnZlciBjb3VsZCBoYXZlIGJlZW4gZGVsYXllZCBsb25nIGVub3VnaCBmb3IgdGhlIGRlYWRsaW5lIHRvXHJcbiAgICAgKiBleHBpcmUuXHJcbiAgICAgKi9cclxuICAgIERFQURMSU5FX0VYQ0VFREVEOiAnZGVhZGxpbmUtZXhjZWVkZWQnLFxyXG4gICAgLyoqIFNvbWUgcmVxdWVzdGVkIGVudGl0eSAoZS5nLiwgZmlsZSBvciBkaXJlY3RvcnkpIHdhcyBub3QgZm91bmQuICovXHJcbiAgICBOT1RfRk9VTkQ6ICdub3QtZm91bmQnLFxyXG4gICAgLyoqXHJcbiAgICAgKiBTb21lIGVudGl0eSB0aGF0IHdlIGF0dGVtcHRlZCB0byBjcmVhdGUgKGUuZy4sIGZpbGUgb3IgZGlyZWN0b3J5KSBhbHJlYWR5XHJcbiAgICAgKiBleGlzdHMuXHJcbiAgICAgKi9cclxuICAgIEFMUkVBRFlfRVhJU1RTOiAnYWxyZWFkeS1leGlzdHMnLFxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgY2FsbGVyIGRvZXMgbm90IGhhdmUgcGVybWlzc2lvbiB0byBleGVjdXRlIHRoZSBzcGVjaWZpZWQgb3BlcmF0aW9uLlxyXG4gICAgICogUEVSTUlTU0lPTl9ERU5JRUQgbXVzdCBub3QgYmUgdXNlZCBmb3IgcmVqZWN0aW9ucyBjYXVzZWQgYnkgZXhoYXVzdGluZ1xyXG4gICAgICogc29tZSByZXNvdXJjZSAodXNlIFJFU09VUkNFX0VYSEFVU1RFRCBpbnN0ZWFkIGZvciB0aG9zZSBlcnJvcnMpLlxyXG4gICAgICogUEVSTUlTU0lPTl9ERU5JRUQgbXVzdCBub3QgYmUgdXNlZCBpZiB0aGUgY2FsbGVyIGNhbiBub3QgYmUgaWRlbnRpZmllZFxyXG4gICAgICogKHVzZSBVTkFVVEhFTlRJQ0FURUQgaW5zdGVhZCBmb3IgdGhvc2UgZXJyb3JzKS5cclxuICAgICAqL1xyXG4gICAgUEVSTUlTU0lPTl9ERU5JRUQ6ICdwZXJtaXNzaW9uLWRlbmllZCcsXHJcbiAgICAvKipcclxuICAgICAqIFRoZSByZXF1ZXN0IGRvZXMgbm90IGhhdmUgdmFsaWQgYXV0aGVudGljYXRpb24gY3JlZGVudGlhbHMgZm9yIHRoZVxyXG4gICAgICogb3BlcmF0aW9uLlxyXG4gICAgICovXHJcbiAgICBVTkFVVEhFTlRJQ0FURUQ6ICd1bmF1dGhlbnRpY2F0ZWQnLFxyXG4gICAgLyoqXHJcbiAgICAgKiBTb21lIHJlc291cmNlIGhhcyBiZWVuIGV4aGF1c3RlZCwgcGVyaGFwcyBhIHBlci11c2VyIHF1b3RhLCBvciBwZXJoYXBzIHRoZVxyXG4gICAgICogZW50aXJlIGZpbGUgc3lzdGVtIGlzIG91dCBvZiBzcGFjZS5cclxuICAgICAqL1xyXG4gICAgUkVTT1VSQ0VfRVhIQVVTVEVEOiAncmVzb3VyY2UtZXhoYXVzdGVkJyxcclxuICAgIC8qKlxyXG4gICAgICogT3BlcmF0aW9uIHdhcyByZWplY3RlZCBiZWNhdXNlIHRoZSBzeXN0ZW0gaXMgbm90IGluIGEgc3RhdGUgcmVxdWlyZWQgZm9yXHJcbiAgICAgKiB0aGUgb3BlcmF0aW9uJ3MgZXhlY3V0aW9uLiBGb3IgZXhhbXBsZSwgZGlyZWN0b3J5IHRvIGJlIGRlbGV0ZWQgbWF5IGJlXHJcbiAgICAgKiBub24tZW1wdHksIGFuIHJtZGlyIG9wZXJhdGlvbiBpcyBhcHBsaWVkIHRvIGEgbm9uLWRpcmVjdG9yeSwgZXRjLlxyXG4gICAgICpcclxuICAgICAqIEEgbGl0bXVzIHRlc3QgdGhhdCBtYXkgaGVscCBhIHNlcnZpY2UgaW1wbGVtZW50b3IgaW4gZGVjaWRpbmdcclxuICAgICAqIGJldHdlZW4gRkFJTEVEX1BSRUNPTkRJVElPTiwgQUJPUlRFRCwgYW5kIFVOQVZBSUxBQkxFOlxyXG4gICAgICogIChhKSBVc2UgVU5BVkFJTEFCTEUgaWYgdGhlIGNsaWVudCBjYW4gcmV0cnkganVzdCB0aGUgZmFpbGluZyBjYWxsLlxyXG4gICAgICogIChiKSBVc2UgQUJPUlRFRCBpZiB0aGUgY2xpZW50IHNob3VsZCByZXRyeSBhdCBhIGhpZ2hlci1sZXZlbFxyXG4gICAgICogICAgICAoZS5nLiwgcmVzdGFydGluZyBhIHJlYWQtbW9kaWZ5LXdyaXRlIHNlcXVlbmNlKS5cclxuICAgICAqICAoYykgVXNlIEZBSUxFRF9QUkVDT05ESVRJT04gaWYgdGhlIGNsaWVudCBzaG91bGQgbm90IHJldHJ5IHVudGlsXHJcbiAgICAgKiAgICAgIHRoZSBzeXN0ZW0gc3RhdGUgaGFzIGJlZW4gZXhwbGljaXRseSBmaXhlZC4gRS5nLiwgaWYgYW4gXCJybWRpclwiXHJcbiAgICAgKiAgICAgIGZhaWxzIGJlY2F1c2UgdGhlIGRpcmVjdG9yeSBpcyBub24tZW1wdHksIEZBSUxFRF9QUkVDT05ESVRJT05cclxuICAgICAqICAgICAgc2hvdWxkIGJlIHJldHVybmVkIHNpbmNlIHRoZSBjbGllbnQgc2hvdWxkIG5vdCByZXRyeSB1bmxlc3NcclxuICAgICAqICAgICAgdGhleSBoYXZlIGZpcnN0IGZpeGVkIHVwIHRoZSBkaXJlY3RvcnkgYnkgZGVsZXRpbmcgZmlsZXMgZnJvbSBpdC5cclxuICAgICAqICAoZCkgVXNlIEZBSUxFRF9QUkVDT05ESVRJT04gaWYgdGhlIGNsaWVudCBwZXJmb3JtcyBjb25kaXRpb25hbFxyXG4gICAgICogICAgICBSRVNUIEdldC9VcGRhdGUvRGVsZXRlIG9uIGEgcmVzb3VyY2UgYW5kIHRoZSByZXNvdXJjZSBvbiB0aGVcclxuICAgICAqICAgICAgc2VydmVyIGRvZXMgbm90IG1hdGNoIHRoZSBjb25kaXRpb24uIEUuZy4sIGNvbmZsaWN0aW5nXHJcbiAgICAgKiAgICAgIHJlYWQtbW9kaWZ5LXdyaXRlIG9uIHRoZSBzYW1lIHJlc291cmNlLlxyXG4gICAgICovXHJcbiAgICBGQUlMRURfUFJFQ09ORElUSU9OOiAnZmFpbGVkLXByZWNvbmRpdGlvbicsXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBvcGVyYXRpb24gd2FzIGFib3J0ZWQsIHR5cGljYWxseSBkdWUgdG8gYSBjb25jdXJyZW5jeSBpc3N1ZSBsaWtlXHJcbiAgICAgKiBzZXF1ZW5jZXIgY2hlY2sgZmFpbHVyZXMsIHRyYW5zYWN0aW9uIGFib3J0cywgZXRjLlxyXG4gICAgICpcclxuICAgICAqIFNlZSBsaXRtdXMgdGVzdCBhYm92ZSBmb3IgZGVjaWRpbmcgYmV0d2VlbiBGQUlMRURfUFJFQ09ORElUSU9OLCBBQk9SVEVELFxyXG4gICAgICogYW5kIFVOQVZBSUxBQkxFLlxyXG4gICAgICovXHJcbiAgICBBQk9SVEVEOiAnYWJvcnRlZCcsXHJcbiAgICAvKipcclxuICAgICAqIE9wZXJhdGlvbiB3YXMgYXR0ZW1wdGVkIHBhc3QgdGhlIHZhbGlkIHJhbmdlLiBFLmcuLCBzZWVraW5nIG9yIHJlYWRpbmdcclxuICAgICAqIHBhc3QgZW5kIG9mIGZpbGUuXHJcbiAgICAgKlxyXG4gICAgICogVW5saWtlIElOVkFMSURfQVJHVU1FTlQsIHRoaXMgZXJyb3IgaW5kaWNhdGVzIGEgcHJvYmxlbSB0aGF0IG1heSBiZSBmaXhlZFxyXG4gICAgICogaWYgdGhlIHN5c3RlbSBzdGF0ZSBjaGFuZ2VzLiBGb3IgZXhhbXBsZSwgYSAzMi1iaXQgZmlsZSBzeXN0ZW0gd2lsbFxyXG4gICAgICogZ2VuZXJhdGUgSU5WQUxJRF9BUkdVTUVOVCBpZiBhc2tlZCB0byByZWFkIGF0IGFuIG9mZnNldCB0aGF0IGlzIG5vdCBpbiB0aGVcclxuICAgICAqIHJhbmdlIFswLDJeMzItMV0sIGJ1dCBpdCB3aWxsIGdlbmVyYXRlIE9VVF9PRl9SQU5HRSBpZiBhc2tlZCB0byByZWFkIGZyb21cclxuICAgICAqIGFuIG9mZnNldCBwYXN0IHRoZSBjdXJyZW50IGZpbGUgc2l6ZS5cclxuICAgICAqXHJcbiAgICAgKiBUaGVyZSBpcyBhIGZhaXIgYml0IG9mIG92ZXJsYXAgYmV0d2VlbiBGQUlMRURfUFJFQ09ORElUSU9OIGFuZFxyXG4gICAgICogT1VUX09GX1JBTkdFLiBXZSByZWNvbW1lbmQgdXNpbmcgT1VUX09GX1JBTkdFICh0aGUgbW9yZSBzcGVjaWZpYyBlcnJvcilcclxuICAgICAqIHdoZW4gaXQgYXBwbGllcyBzbyB0aGF0IGNhbGxlcnMgd2hvIGFyZSBpdGVyYXRpbmcgdGhyb3VnaCBhIHNwYWNlIGNhblxyXG4gICAgICogZWFzaWx5IGxvb2sgZm9yIGFuIE9VVF9PRl9SQU5HRSBlcnJvciB0byBkZXRlY3Qgd2hlbiB0aGV5IGFyZSBkb25lLlxyXG4gICAgICovXHJcbiAgICBPVVRfT0ZfUkFOR0U6ICdvdXQtb2YtcmFuZ2UnLFxyXG4gICAgLyoqIE9wZXJhdGlvbiBpcyBub3QgaW1wbGVtZW50ZWQgb3Igbm90IHN1cHBvcnRlZC9lbmFibGVkIGluIHRoaXMgc2VydmljZS4gKi9cclxuICAgIFVOSU1QTEVNRU5URUQ6ICd1bmltcGxlbWVudGVkJyxcclxuICAgIC8qKlxyXG4gICAgICogSW50ZXJuYWwgZXJyb3JzLiBNZWFucyBzb21lIGludmFyaWFudHMgZXhwZWN0ZWQgYnkgdW5kZXJseWluZyBTeXN0ZW0gaGFzXHJcbiAgICAgKiBiZWVuIGJyb2tlbi4gSWYgeW91IHNlZSBvbmUgb2YgdGhlc2UgZXJyb3JzLCBTb21ldGhpbmcgaXMgdmVyeSBicm9rZW4uXHJcbiAgICAgKi9cclxuICAgIElOVEVSTkFMOiAnaW50ZXJuYWwnLFxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgc2VydmljZSBpcyBjdXJyZW50bHkgdW5hdmFpbGFibGUuIFRoaXMgaXMgYSBtb3N0IGxpa2VseSBhIHRyYW5zaWVudFxyXG4gICAgICogY29uZGl0aW9uIGFuZCBtYXkgYmUgY29ycmVjdGVkIGJ5IHJldHJ5aW5nIHdpdGggYSBiYWNrb2ZmLlxyXG4gICAgICpcclxuICAgICAqIFNlZSBsaXRtdXMgdGVzdCBhYm92ZSBmb3IgZGVjaWRpbmcgYmV0d2VlbiBGQUlMRURfUFJFQ09ORElUSU9OLCBBQk9SVEVELFxyXG4gICAgICogYW5kIFVOQVZBSUxBQkxFLlxyXG4gICAgICovXHJcbiAgICBVTkFWQUlMQUJMRTogJ3VuYXZhaWxhYmxlJyxcclxuICAgIC8qKiBVbnJlY292ZXJhYmxlIGRhdGEgbG9zcyBvciBjb3JydXB0aW9uLiAqL1xyXG4gICAgREFUQV9MT1NTOiAnZGF0YS1sb3NzJ1xyXG59O1xyXG4vKipcclxuICogQW4gZXJyb3IgY2xhc3MgdXNlZCBmb3IgRmlyZXN0b3JlLWdlbmVyYXRlZCBlcnJvcnMuIElkZWFsbHkgd2Ugc2hvdWxkIGJlXHJcbiAqIHVzaW5nIEZpcmViYXNlRXJyb3IsIGJ1dCBpbnRlZ3JhdGluZyB3aXRoIGl0IGlzIG92ZXJseSBhcmR1b3VzIGF0IHRoZSBtb21lbnQsXHJcbiAqIHNvIHdlIGRlZmluZSBvdXIgb3duIGNvbXBhdGlibGUgZXJyb3IgY2xhc3MgKHdpdGggYSBgbmFtZWAgb2YgJ0ZpcmViYXNlRXJyb3InXHJcbiAqIGFuZCBjb21wYXRpYmxlIGBjb2RlYCBhbmQgYG1lc3NhZ2VgIGZpZWxkcy4pXHJcbiAqL1xyXG52YXIgRmlyZXN0b3JlRXJyb3IgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICB0c2xpYi5fX2V4dGVuZHMoRmlyZXN0b3JlRXJyb3IsIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBGaXJlc3RvcmVFcnJvcihjb2RlLCBtZXNzYWdlKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgbWVzc2FnZSkgfHwgdGhpcztcclxuICAgICAgICBfdGhpcy5jb2RlID0gY29kZTtcclxuICAgICAgICBfdGhpcy5tZXNzYWdlID0gbWVzc2FnZTtcclxuICAgICAgICBfdGhpcy5uYW1lID0gJ0ZpcmViYXNlRXJyb3InO1xyXG4gICAgICAgIC8vIEhBQ0s6IFdlIHdyaXRlIGEgdG9TdHJpbmcgcHJvcGVydHkgZGlyZWN0bHkgYmVjYXVzZSBFcnJvciBpcyBub3QgYSByZWFsXHJcbiAgICAgICAgLy8gY2xhc3MgYW5kIHNvIGluaGVyaXRhbmNlIGRvZXMgbm90IHdvcmsgY29ycmVjdGx5LiBXZSBjb3VsZCBhbHRlcm5hdGl2ZWx5XHJcbiAgICAgICAgLy8gZG8gdGhlIHNhbWUgXCJiYWNrLWRvb3IgaW5oZXJpdGFuY2VcIiB0cmljayB0aGF0IEZpcmViYXNlRXJyb3IgZG9lcy5cclxuICAgICAgICBfdGhpcy50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLm5hbWUgKyBcIjogW2NvZGU9XCIgKyBfdGhpcy5jb2RlICsgXCJdOiBcIiArIF90aGlzLm1lc3NhZ2U7IH07XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIEZpcmVzdG9yZUVycm9yO1xyXG59KEVycm9yKSk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogSGVscGVyIGZ1bmN0aW9uIHRvIHByZXZlbnQgaW5zdGFudGlhdGlvbiB0aHJvdWdoIHRoZSBjb25zdHJ1Y3Rvci5cclxuICpcclxuICogVGhpcyBtZXRob2QgY3JlYXRlcyBhIG5ldyBjb25zdHJ1Y3RvciB0aGF0IHRocm93cyB3aGVuIGl0J3MgaW52b2tlZC5cclxuICogVGhlIHByb3RvdHlwZSBvZiB0aGF0IGNvbnN0cnVjdG9yIGlzIHRoZW4gc2V0IHRvIHRoZSBwcm90b3R5cGUgb2YgdGhlIGhpZGRlblxyXG4gKiBcImNsYXNzXCIgdG8gZXhwb3NlIGFsbCB0aGUgcHJvdG90eXBlIG1ldGhvZHMgYW5kIGFsbG93IGZvciBpbnN0YW5jZW9mXHJcbiAqIGNoZWNrcy5cclxuICpcclxuICogVG8gYWxzbyBtYWtlIGFsbCB0aGUgc3RhdGljIG1ldGhvZHMgYXZhaWxhYmxlLCBhbGwgcHJvcGVydGllcyBvZiB0aGVcclxuICogb3JpZ2luYWwgY29uc3RydWN0b3IgYXJlIGNvcGllZCB0byB0aGUgbmV3IGNvbnN0cnVjdG9yLlxyXG4gKi9cclxuZnVuY3Rpb24gbWFrZUNvbnN0cnVjdG9yUHJpdmF0ZShjbHMsIG9wdGlvbmFsTWVzc2FnZSkge1xyXG4gICAgZnVuY3Rpb24gUHVibGljQ29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdmFyIGVycm9yID0gJ1RoaXMgY29uc3RydWN0b3IgaXMgcHJpdmF0ZS4nO1xyXG4gICAgICAgIGlmIChvcHRpb25hbE1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgZXJyb3IgKz0gJyAnO1xyXG4gICAgICAgICAgICBlcnJvciArPSBvcHRpb25hbE1lc3NhZ2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLklOVkFMSURfQVJHVU1FTlQsIGVycm9yKTtcclxuICAgIH1cclxuICAgIC8vIE1ha2Ugc3VyZSBpbnN0YW5jZW9mIGNoZWNrcyB3b3JrIGFuZCBhbGwgbWV0aG9kcyBhcmUgZXhwb3NlZCBvbiB0aGUgcHVibGljXHJcbiAgICAvLyBjb25zdHJ1Y3RvclxyXG4gICAgUHVibGljQ29uc3RydWN0b3IucHJvdG90eXBlID0gY2xzLnByb3RvdHlwZTtcclxuICAgIC8vIENvcHkgYW55IHN0YXRpYyBtZXRob2RzL21lbWJlcnNcclxuICAgIGZvciAodmFyIHN0YXRpY1Byb3BlcnR5IGluIGNscykge1xyXG4gICAgICAgIGlmIChjbHMuaGFzT3duUHJvcGVydHkoc3RhdGljUHJvcGVydHkpKSB7XHJcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbiAgICAgICAgICAgIFB1YmxpY0NvbnN0cnVjdG9yW3N0YXRpY1Byb3BlcnR5XSA9IGNsc1tzdGF0aWNQcm9wZXJ0eV07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuICAgIHJldHVybiBQdWJsaWNDb25zdHJ1Y3RvcjtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gY29udGFpbnMob2JqLCBrZXkpIHtcclxuICAgIHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpO1xyXG59XHJcbi8qKiBSZXR1cm5zIHRoZSBnaXZlbiB2YWx1ZSBpZiBpdCdzIGRlZmluZWQgb3IgdGhlIGRlZmF1bHRWYWx1ZSBvdGhlcndpc2UuICovXHJcbmZ1bmN0aW9uIGRlZmF1bHRlZCh2YWx1ZSwgZGVmYXVsdFZhbHVlKSB7XHJcbiAgICByZXR1cm4gdmFsdWUgIT09IHVuZGVmaW5lZCA/IHZhbHVlIDogZGVmYXVsdFZhbHVlO1xyXG59XHJcbmZ1bmN0aW9uIGZvckVhY2hOdW1iZXIob2JqLCBmbikge1xyXG4gICAgZm9yICh2YXIga2V5IGluIG9iaikge1xyXG4gICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSB7XHJcbiAgICAgICAgICAgIHZhciBudW0gPSBOdW1iZXIoa2V5KTtcclxuICAgICAgICAgICAgaWYgKCFpc05hTihudW0pKSB7XHJcbiAgICAgICAgICAgICAgICBmbihudW0sIG9ialtrZXldKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiB2YWx1ZXMob2JqKSB7XHJcbiAgICB2YXIgdnMgPSBbXTtcclxuICAgIGZvckVhY2gob2JqLCBmdW5jdGlvbiAoXywgdikgeyByZXR1cm4gdnMucHVzaCh2KTsgfSk7XHJcbiAgICByZXR1cm4gdnM7XHJcbn1cclxuZnVuY3Rpb24gZm9yRWFjaChvYmosIGZuKSB7XHJcbiAgICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7XHJcbiAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIHtcclxuICAgICAgICAgICAgZm4oa2V5LCBvYmpba2V5XSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGlzRW1wdHkob2JqKSB7XHJcbiAgICBhc3NlcnQob2JqICE9IG51bGwgJiYgdHlwZW9mIG9iaiA9PT0gJ29iamVjdCcsICdpc0VtcHR5KCkgZXhwZWN0cyBvYmplY3QgcGFyYW1ldGVyLicpO1xyXG4gICAgZm9yICh2YXIga2V5IGluIG9iaikge1xyXG4gICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxufVxyXG5mdW5jdGlvbiBzaGFsbG93Q29weShvYmopIHtcclxuICAgIGFzc2VydChvYmogJiYgdHlwZW9mIG9iaiA9PT0gJ29iamVjdCcsICdzaGFsbG93Q29weSgpIGV4cGVjdHMgb2JqZWN0IHBhcmFtZXRlci4nKTtcclxuICAgIHZhciByZXN1bHQgPSB7fTtcclxuICAgIGZvciAodmFyIGtleSBpbiBvYmopIHtcclxuICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkge1xyXG4gICAgICAgICAgICByZXN1bHRba2V5XSA9IG9ialtrZXldO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiByZXN1bHQ7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBWYWxpZGF0ZXMgdGhhdCBubyBhcmd1bWVudHMgd2VyZSBwYXNzZWQgaW4gdGhlIGludm9jYXRpb24gb2YgZnVuY3Rpb25OYW1lLlxyXG4gKlxyXG4gKiBGb3J3YXJkIHRoZSBtYWdpYyBcImFyZ3VtZW50c1wiIHZhcmlhYmxlIGFzIHNlY29uZCBwYXJhbWV0ZXIgb24gd2hpY2ggdGhlXHJcbiAqIHBhcmFtZXRlciB2YWxpZGF0aW9uIGlzIHBlcmZvcm1lZDpcclxuICogdmFsaWRhdGVOb0FyZ3MoJ215RnVuY3Rpb24nLCBhcmd1bWVudHMpO1xyXG4gKi9cclxuZnVuY3Rpb24gdmFsaWRhdGVOb0FyZ3MoZnVuY3Rpb25OYW1lLCBhcmdzKSB7XHJcbiAgICBpZiAoYXJncy5sZW5ndGggIT09IDApIHtcclxuICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5JTlZBTElEX0FSR1VNRU5ULCBcIkZ1bmN0aW9uIFwiICsgZnVuY3Rpb25OYW1lICsgXCIoKSBkb2VzIG5vdCBzdXBwb3J0IGFyZ3VtZW50cywgXCIgK1xyXG4gICAgICAgICAgICAnYnV0IHdhcyBjYWxsZWQgd2l0aCAnICtcclxuICAgICAgICAgICAgZm9ybWF0UGx1cmFsKGFyZ3MubGVuZ3RoLCAnYXJndW1lbnQnKSArXHJcbiAgICAgICAgICAgICcuJyk7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkYXRlcyB0aGUgaW52b2NhdGlvbiBvZiBmdW5jdGlvbk5hbWUgaGFzIHRoZSBleGFjdCBudW1iZXIgb2YgYXJndW1lbnRzLlxyXG4gKlxyXG4gKiBGb3J3YXJkIHRoZSBtYWdpYyBcImFyZ3VtZW50c1wiIHZhcmlhYmxlIGFzIHNlY29uZCBwYXJhbWV0ZXIgb24gd2hpY2ggdGhlXHJcbiAqIHBhcmFtZXRlciB2YWxpZGF0aW9uIGlzIHBlcmZvcm1lZDpcclxuICogdmFsaWRhdGVFeGFjdE51bWJlck9mQXJncygnbXlGdW5jdGlvbicsIGFyZ3VtZW50cywgMik7XHJcbiAqL1xyXG5mdW5jdGlvbiB2YWxpZGF0ZUV4YWN0TnVtYmVyT2ZBcmdzKGZ1bmN0aW9uTmFtZSwgYXJncywgbnVtYmVyT2ZBcmdzKSB7XHJcbiAgICBpZiAoYXJncy5sZW5ndGggIT09IG51bWJlck9mQXJncykge1xyXG4gICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLklOVkFMSURfQVJHVU1FTlQsIFwiRnVuY3Rpb24gXCIgKyBmdW5jdGlvbk5hbWUgKyBcIigpIHJlcXVpcmVzIFwiICtcclxuICAgICAgICAgICAgZm9ybWF0UGx1cmFsKG51bWJlck9mQXJncywgJ2FyZ3VtZW50JykgK1xyXG4gICAgICAgICAgICAnLCBidXQgd2FzIGNhbGxlZCB3aXRoICcgK1xyXG4gICAgICAgICAgICBmb3JtYXRQbHVyYWwoYXJncy5sZW5ndGgsICdhcmd1bWVudCcpICtcclxuICAgICAgICAgICAgJy4nKTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogVmFsaWRhdGVzIHRoZSBpbnZvY2F0aW9uIG9mIGZ1bmN0aW9uTmFtZSBoYXMgYXQgbGVhc3QgdGhlIHByb3ZpZGVkIG51bWJlciBvZlxyXG4gKiBhcmd1bWVudHMgKGJ1dCBjYW4gaGF2ZSBtYW55IG1vcmUpLlxyXG4gKlxyXG4gKiBGb3J3YXJkIHRoZSBtYWdpYyBcImFyZ3VtZW50c1wiIHZhcmlhYmxlIGFzIHNlY29uZCBwYXJhbWV0ZXIgb24gd2hpY2ggdGhlXHJcbiAqIHBhcmFtZXRlciB2YWxpZGF0aW9uIGlzIHBlcmZvcm1lZDpcclxuICogdmFsaWRhdGVBdExlYXN0TnVtYmVyT2ZBcmdzKCdteUZ1bmN0aW9uJywgYXJndW1lbnRzLCAyKTtcclxuICovXHJcbmZ1bmN0aW9uIHZhbGlkYXRlQXRMZWFzdE51bWJlck9mQXJncyhmdW5jdGlvbk5hbWUsIGFyZ3MsIG1pbk51bWJlck9mQXJncykge1xyXG4gICAgaWYgKGFyZ3MubGVuZ3RoIDwgbWluTnVtYmVyT2ZBcmdzKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuSU5WQUxJRF9BUkdVTUVOVCwgXCJGdW5jdGlvbiBcIiArIGZ1bmN0aW9uTmFtZSArIFwiKCkgcmVxdWlyZXMgYXQgbGVhc3QgXCIgK1xyXG4gICAgICAgICAgICBmb3JtYXRQbHVyYWwobWluTnVtYmVyT2ZBcmdzLCAnYXJndW1lbnQnKSArXHJcbiAgICAgICAgICAgICcsIGJ1dCB3YXMgY2FsbGVkIHdpdGggJyArXHJcbiAgICAgICAgICAgIGZvcm1hdFBsdXJhbChhcmdzLmxlbmd0aCwgJ2FyZ3VtZW50JykgK1xyXG4gICAgICAgICAgICAnLicpO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBWYWxpZGF0ZXMgdGhlIGludm9jYXRpb24gb2YgZnVuY3Rpb25OYW1lIGhhcyBudW1iZXIgb2YgYXJndW1lbnRzIGJldHdlZW5cclxuICogdGhlIHZhbHVlcyBwcm92aWRlZC5cclxuICpcclxuICogRm9yd2FyZCB0aGUgbWFnaWMgXCJhcmd1bWVudHNcIiB2YXJpYWJsZSBhcyBzZWNvbmQgcGFyYW1ldGVyIG9uIHdoaWNoIHRoZVxyXG4gKiBwYXJhbWV0ZXIgdmFsaWRhdGlvbiBpcyBwZXJmb3JtZWQ6XHJcbiAqIHZhbGlkYXRlQmV0d2Vlbk51bWJlck9mQXJncygnbXlGdW5jdGlvbicsIGFyZ3VtZW50cywgMiwgMyk7XHJcbiAqL1xyXG5mdW5jdGlvbiB2YWxpZGF0ZUJldHdlZW5OdW1iZXJPZkFyZ3MoZnVuY3Rpb25OYW1lLCBhcmdzLCBtaW5OdW1iZXJPZkFyZ3MsIG1heE51bWJlck9mQXJncykge1xyXG4gICAgaWYgKGFyZ3MubGVuZ3RoIDwgbWluTnVtYmVyT2ZBcmdzIHx8IGFyZ3MubGVuZ3RoID4gbWF4TnVtYmVyT2ZBcmdzKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuSU5WQUxJRF9BUkdVTUVOVCwgXCJGdW5jdGlvbiBcIiArIGZ1bmN0aW9uTmFtZSArIFwiKCkgcmVxdWlyZXMgYmV0d2VlbiBcIiArIG1pbk51bWJlck9mQXJncyArIFwiIGFuZCBcIiArXHJcbiAgICAgICAgICAgIChtYXhOdW1iZXJPZkFyZ3MgKyBcIiBhcmd1bWVudHMsIGJ1dCB3YXMgY2FsbGVkIHdpdGggXCIpICtcclxuICAgICAgICAgICAgZm9ybWF0UGx1cmFsKGFyZ3MubGVuZ3RoLCAnYXJndW1lbnQnKSArXHJcbiAgICAgICAgICAgICcuJyk7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkYXRlcyB0aGUgcHJvdmlkZWQgYXJndW1lbnQgaXMgYW4gYXJyYXkgYW5kIGhhcyBhcyBsZWFzdCB0aGUgZXhwZWN0ZWRcclxuICogbnVtYmVyIG9mIGVsZW1lbnRzLlxyXG4gKi9cclxuZnVuY3Rpb24gdmFsaWRhdGVOYW1lZEFycmF5QXRMZWFzdE51bWJlck9mRWxlbWVudHMoZnVuY3Rpb25OYW1lLCB2YWx1ZSwgbmFtZSwgbWluTnVtYmVyT2ZFbGVtZW50cykge1xyXG4gICAgaWYgKCEodmFsdWUgaW5zdGFuY2VvZiBBcnJheSkgfHwgdmFsdWUubGVuZ3RoIDwgbWluTnVtYmVyT2ZFbGVtZW50cykge1xyXG4gICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLklOVkFMSURfQVJHVU1FTlQsIFwiRnVuY3Rpb24gXCIgKyBmdW5jdGlvbk5hbWUgKyBcIigpIHJlcXVpcmVzIGl0cyBcIiArIG5hbWUgKyBcIiBhcmd1bWVudCB0byBiZSBhbiBcIiArXHJcbiAgICAgICAgICAgICdhcnJheSB3aXRoIGF0IGxlYXN0ICcgK1xyXG4gICAgICAgICAgICAoZm9ybWF0UGx1cmFsKG1pbk51bWJlck9mRWxlbWVudHMsICdlbGVtZW50JykgKyBcIi5cIikpO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBWYWxpZGF0ZXMgdGhlIHByb3ZpZGVkIHBvc2l0aW9uYWwgYXJndW1lbnQgaGFzIHRoZSBuYXRpdmUgSmF2YVNjcmlwdCB0eXBlXHJcbiAqIHVzaW5nIHR5cGVvZiBjaGVja3MuXHJcbiAqL1xyXG5mdW5jdGlvbiB2YWxpZGF0ZUFyZ1R5cGUoZnVuY3Rpb25OYW1lLCB0eXBlLCBwb3NpdGlvbiwgYXJndW1lbnQpIHtcclxuICAgIHZhbGlkYXRlVHlwZShmdW5jdGlvbk5hbWUsIHR5cGUsIG9yZGluYWwocG9zaXRpb24pICsgXCIgYXJndW1lbnRcIiwgYXJndW1lbnQpO1xyXG59XHJcbi8qKlxyXG4gKiBWYWxpZGF0ZXMgdGhlIHByb3ZpZGVkIGFyZ3VtZW50IGhhcyB0aGUgbmF0aXZlIEphdmFTY3JpcHQgdHlwZSB1c2luZ1xyXG4gKiB0eXBlb2YgY2hlY2tzIG9yIGlzIHVuZGVmaW5lZC5cclxuICovXHJcbmZ1bmN0aW9uIHZhbGlkYXRlT3B0aW9uYWxBcmdUeXBlKGZ1bmN0aW9uTmFtZSwgdHlwZSwgcG9zaXRpb24sIGFyZ3VtZW50KSB7XHJcbiAgICBpZiAoYXJndW1lbnQgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIHZhbGlkYXRlQXJnVHlwZShmdW5jdGlvbk5hbWUsIHR5cGUsIHBvc2l0aW9uLCBhcmd1bWVudCk7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkYXRlcyB0aGUgcHJvdmlkZWQgbmFtZWQgb3B0aW9uIGhhcyB0aGUgbmF0aXZlIEphdmFTY3JpcHQgdHlwZSB1c2luZ1xyXG4gKiB0eXBlb2YgY2hlY2tzLlxyXG4gKi9cclxuZnVuY3Rpb24gdmFsaWRhdGVOYW1lZFR5cGUoZnVuY3Rpb25OYW1lLCB0eXBlLCBvcHRpb25OYW1lLCBhcmd1bWVudCkge1xyXG4gICAgdmFsaWRhdGVUeXBlKGZ1bmN0aW9uTmFtZSwgdHlwZSwgb3B0aW9uTmFtZSArIFwiIG9wdGlvblwiLCBhcmd1bWVudCk7XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkYXRlcyB0aGUgcHJvdmlkZWQgbmFtZWQgb3B0aW9uIGhhcyB0aGUgbmF0aXZlIEphdmFTY3JpcHQgdHlwZSB1c2luZ1xyXG4gKiB0eXBlb2YgY2hlY2tzIG9yIGlzIHVuZGVmaW5lZC5cclxuICovXHJcbmZ1bmN0aW9uIHZhbGlkYXRlTmFtZWRPcHRpb25hbFR5cGUoZnVuY3Rpb25OYW1lLCB0eXBlLCBvcHRpb25OYW1lLCBhcmd1bWVudCkge1xyXG4gICAgaWYgKGFyZ3VtZW50ICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICB2YWxpZGF0ZU5hbWVkVHlwZShmdW5jdGlvbk5hbWUsIHR5cGUsIG9wdGlvbk5hbWUsIGFyZ3VtZW50KTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiB2YWxpZGF0ZUFycmF5RWxlbWVudHMoZnVuY3Rpb25OYW1lLCBvcHRpb25OYW1lLCB0eXBlRGVzY3JpcHRpb24sIGFyZ3VtZW50LCB2YWxpZGF0b3IpIHtcclxuICAgIGlmICghKGFyZ3VtZW50IGluc3RhbmNlb2YgQXJyYXkpKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuSU5WQUxJRF9BUkdVTUVOVCwgXCJGdW5jdGlvbiBcIiArIGZ1bmN0aW9uTmFtZSArIFwiKCkgcmVxdWlyZXMgaXRzIFwiICsgb3B0aW9uTmFtZSArIFwiIFwiICtcclxuICAgICAgICAgICAgKFwib3B0aW9uIHRvIGJlIGFuIGFycmF5LCBidXQgaXQgd2FzOiBcIiArIHZhbHVlRGVzY3JpcHRpb24oYXJndW1lbnQpKSk7XHJcbiAgICB9XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3VtZW50Lmxlbmd0aDsgKytpKSB7XHJcbiAgICAgICAgaWYgKCF2YWxpZGF0b3IoYXJndW1lbnRbaV0pKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLklOVkFMSURfQVJHVU1FTlQsIFwiRnVuY3Rpb24gXCIgKyBmdW5jdGlvbk5hbWUgKyBcIigpIHJlcXVpcmVzIGFsbCBcIiArIG9wdGlvbk5hbWUgKyBcIiBcIiArXHJcbiAgICAgICAgICAgICAgICAoXCJlbGVtZW50cyB0byBiZSBcIiArIHR5cGVEZXNjcmlwdGlvbiArIFwiLCBidXQgdGhlIHZhbHVlIGF0IGluZGV4IFwiICsgaSArIFwiIFwiKSArXHJcbiAgICAgICAgICAgICAgICAoXCJ3YXM6IFwiICsgdmFsdWVEZXNjcmlwdGlvbihhcmd1bWVudFtpXSkpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gdmFsaWRhdGVPcHRpb25hbEFycmF5RWxlbWVudHMoZnVuY3Rpb25OYW1lLCBvcHRpb25OYW1lLCB0eXBlRGVzY3JpcHRpb24sIGFyZ3VtZW50LCB2YWxpZGF0b3IpIHtcclxuICAgIGlmIChhcmd1bWVudCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgdmFsaWRhdGVBcnJheUVsZW1lbnRzKGZ1bmN0aW9uTmFtZSwgb3B0aW9uTmFtZSwgdHlwZURlc2NyaXB0aW9uLCBhcmd1bWVudCwgdmFsaWRhdG9yKTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogVmFsaWRhdGVzIHRoYXQgdGhlIHByb3ZpZGVkIG5hbWVkIG9wdGlvbiBlcXVhbHMgb25lIG9mIHRoZSBleHBlY3RlZCB2YWx1ZXMuXHJcbiAqL1xyXG5mdW5jdGlvbiB2YWxpZGF0ZU5hbWVkUHJvcGVydHlFcXVhbHMoZnVuY3Rpb25OYW1lLCBpbnB1dE5hbWUsIG9wdGlvbk5hbWUsIGlucHV0LCBleHBlY3RlZCkge1xyXG4gICAgdmFyIGV4cGVjdGVkRGVzY3JpcHRpb24gPSBbXTtcclxuICAgIGZvciAodmFyIF9pID0gMCwgZXhwZWN0ZWRfMSA9IGV4cGVjdGVkOyBfaSA8IGV4cGVjdGVkXzEubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgdmFyIHZhbCA9IGV4cGVjdGVkXzFbX2ldO1xyXG4gICAgICAgIGlmICh2YWwgPT09IGlucHV0KSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZXhwZWN0ZWREZXNjcmlwdGlvbi5wdXNoKHZhbHVlRGVzY3JpcHRpb24odmFsKSk7XHJcbiAgICB9XHJcbiAgICB2YXIgYWN0dWFsRGVzY3JpcHRpb24gPSB2YWx1ZURlc2NyaXB0aW9uKGlucHV0KTtcclxuICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLklOVkFMSURfQVJHVU1FTlQsIFwiSW52YWxpZCB2YWx1ZSBcIiArIGFjdHVhbERlc2NyaXB0aW9uICsgXCIgcHJvdmlkZWQgdG8gZnVuY3Rpb24gXCIgKyBmdW5jdGlvbk5hbWUgKyBcIigpIGZvciBvcHRpb24gXCIgK1xyXG4gICAgICAgIChcIlxcXCJcIiArIG9wdGlvbk5hbWUgKyBcIlxcXCIuIEFjY2VwdGFibGUgdmFsdWVzOiBcIiArIGV4cGVjdGVkRGVzY3JpcHRpb24uam9pbignLCAnKSkpO1xyXG59XHJcbi8qKlxyXG4gKiBWYWxpZGF0ZXMgdGhhdCB0aGUgcHJvdmlkZWQgbmFtZWQgb3B0aW9uIGVxdWFscyBvbmUgb2YgdGhlIGV4cGVjdGVkIHZhbHVlcyBvclxyXG4gKiBpcyB1bmRlZmluZWQuXHJcbiAqL1xyXG5mdW5jdGlvbiB2YWxpZGF0ZU5hbWVkT3B0aW9uYWxQcm9wZXJ0eUVxdWFscyhmdW5jdGlvbk5hbWUsIGlucHV0TmFtZSwgb3B0aW9uTmFtZSwgaW5wdXQsIGV4cGVjdGVkKSB7XHJcbiAgICBpZiAoaW5wdXQgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIHZhbGlkYXRlTmFtZWRQcm9wZXJ0eUVxdWFscyhmdW5jdGlvbk5hbWUsIGlucHV0TmFtZSwgb3B0aW9uTmFtZSwgaW5wdXQsIGV4cGVjdGVkKTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogVmFsaWRhdGVzIHRoYXQgdGhlIHByb3ZpZGVkIGFyZ3VtZW50IGlzIGEgdmFsaWQgZW51bS5cclxuICpcclxuICogQHBhcmFtIGZ1bmN0aW9uTmFtZSBGdW5jdGlvbiBtYWtpbmcgdGhlIHZhbGlkYXRpb24gY2FsbC5cclxuICogQHBhcmFtIGVudW1zIEFycmF5IGNvbnRhaW5pbmcgYWxsIHBvc3NpYmxlIHZhbHVlcyBmb3IgdGhlIGVudW0uXHJcbiAqIEBwYXJhbSBwb3NpdGlvbiBQb3NpdGlvbiBvZiB0aGUgYXJndW1lbnQgaW4gYGZ1bmN0aW9uTmFtZWAuXHJcbiAqIEBwYXJhbSBhcmd1bWVudCBBcnVnbWVudCB0byB2YWxpZGF0ZS5cclxuICovXHJcbmZ1bmN0aW9uIHZhbGlkYXRlU3RyaW5nRW51bShmdW5jdGlvbk5hbWUsIGVudW1zLCBwb3NpdGlvbiwgYXJndW1lbnQpIHtcclxuICAgIGlmICghZW51bXMuc29tZShmdW5jdGlvbiAoZWxlbWVudCkgeyByZXR1cm4gZWxlbWVudCA9PT0gYXJndW1lbnQ7IH0pKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuSU5WQUxJRF9BUkdVTUVOVCwgXCJJbnZhbGlkIHZhbHVlIFwiICsgdmFsdWVEZXNjcmlwdGlvbihhcmd1bWVudCkgKyBcIiBwcm92aWRlZCB0byBmdW5jdGlvbiBcIiArXHJcbiAgICAgICAgICAgIChmdW5jdGlvbk5hbWUgKyBcIigpIGZvciBpdHMgXCIgKyBvcmRpbmFsKHBvc2l0aW9uKSArIFwiIGFyZ3VtZW50LiBBY2NlcHRhYmxlIFwiKSArXHJcbiAgICAgICAgICAgIChcInZhbHVlczogXCIgKyBlbnVtcy5qb2luKCcsICcpKSk7XHJcbiAgICB9XHJcbn1cclxuLyoqIEhlbHBlciB0byB2YWxpZGF0ZSB0aGUgdHlwZSBvZiBhIHByb3ZpZGVkIGlucHV0LiAqL1xyXG5mdW5jdGlvbiB2YWxpZGF0ZVR5cGUoZnVuY3Rpb25OYW1lLCB0eXBlLCBpbnB1dE5hbWUsIGlucHV0KSB7XHJcbiAgICB2YXIgdmFsaWQgPSBmYWxzZTtcclxuICAgIGlmICh0eXBlID09PSAnb2JqZWN0Jykge1xyXG4gICAgICAgIHZhbGlkID0gaXNQbGFpbk9iamVjdChpbnB1dCk7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmICh0eXBlID09PSAnbm9uLWVtcHR5IHN0cmluZycpIHtcclxuICAgICAgICB2YWxpZCA9IHR5cGVvZiBpbnB1dCA9PT0gJ3N0cmluZycgJiYgaW5wdXQgIT09ICcnO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgdmFsaWQgPSB0eXBlb2YgaW5wdXQgPT09IHR5cGU7XHJcbiAgICB9XHJcbiAgICBpZiAoIXZhbGlkKSB7XHJcbiAgICAgICAgdmFyIGRlc2NyaXB0aW9uID0gdmFsdWVEZXNjcmlwdGlvbihpbnB1dCk7XHJcbiAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuSU5WQUxJRF9BUkdVTUVOVCwgXCJGdW5jdGlvbiBcIiArIGZ1bmN0aW9uTmFtZSArIFwiKCkgcmVxdWlyZXMgaXRzIFwiICsgaW5wdXROYW1lICsgXCIgXCIgK1xyXG4gICAgICAgICAgICAoXCJ0byBiZSBvZiB0eXBlIFwiICsgdHlwZSArIFwiLCBidXQgaXQgd2FzOiBcIiArIGRlc2NyaXB0aW9uKSk7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIFJldHVybnMgdHJ1ZSBpZiBpdCdzIGEgbm9uLW51bGwgb2JqZWN0IHdpdGhvdXQgYSBjdXN0b20gcHJvdG90eXBlXHJcbiAqIChpLmUuIGV4Y2x1ZGVzIEFycmF5LCBEYXRlLCBldGMuKS5cclxuICovXHJcbmZ1bmN0aW9uIGlzUGxhaW5PYmplY3QoaW5wdXQpIHtcclxuICAgIHJldHVybiAodHlwZW9mIGlucHV0ID09PSAnb2JqZWN0JyAmJlxyXG4gICAgICAgIGlucHV0ICE9PSBudWxsICYmXHJcbiAgICAgICAgKE9iamVjdC5nZXRQcm90b3R5cGVPZihpbnB1dCkgPT09IE9iamVjdC5wcm90b3R5cGUgfHxcclxuICAgICAgICAgICAgT2JqZWN0LmdldFByb3RvdHlwZU9mKGlucHV0KSA9PT0gbnVsbCkpO1xyXG59XHJcbi8qKiBSZXR1cm5zIGEgc3RyaW5nIGRlc2NyaWJpbmcgdGhlIHR5cGUgLyB2YWx1ZSBvZiB0aGUgcHJvdmlkZWQgaW5wdXQuICovXHJcbmZ1bmN0aW9uIHZhbHVlRGVzY3JpcHRpb24oaW5wdXQpIHtcclxuICAgIGlmIChpbnB1dCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgcmV0dXJuICd1bmRlZmluZWQnO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoaW5wdXQgPT09IG51bGwpIHtcclxuICAgICAgICByZXR1cm4gJ251bGwnO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAodHlwZW9mIGlucHV0ID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgIGlmIChpbnB1dC5sZW5ndGggPiAyMCkge1xyXG4gICAgICAgICAgICBpbnB1dCA9IGlucHV0LnN1YnN0cmluZygwLCAyMCkgKyBcIi4uLlwiO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoaW5wdXQpO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAodHlwZW9mIGlucHV0ID09PSAnbnVtYmVyJyB8fCB0eXBlb2YgaW5wdXQgPT09ICdib29sZWFuJykge1xyXG4gICAgICAgIHJldHVybiAnJyArIGlucHV0O1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAodHlwZW9mIGlucHV0ID09PSAnb2JqZWN0Jykge1xyXG4gICAgICAgIGlmIChpbnB1dCBpbnN0YW5jZW9mIEFycmF5KSB7XHJcbiAgICAgICAgICAgIHJldHVybiAnYW4gYXJyYXknO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdmFyIGN1c3RvbU9iamVjdE5hbWUgPSB0cnlHZXRDdXN0b21PYmplY3RUeXBlKGlucHV0KTtcclxuICAgICAgICAgICAgaWYgKGN1c3RvbU9iamVjdE5hbWUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBcImEgY3VzdG9tIFwiICsgY3VzdG9tT2JqZWN0TmFtZSArIFwiIG9iamVjdFwiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICdhbiBvYmplY3QnO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAodHlwZW9mIGlucHV0ID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgcmV0dXJuICdhIGZ1bmN0aW9uJztcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBmYWlsKCdVbmtub3duIHdyb25nIHR5cGU6ICcgKyB0eXBlb2YgaW5wdXQpO1xyXG4gICAgfVxyXG59XHJcbi8qKiBIYWNreSBtZXRob2QgdG8gdHJ5IHRvIGdldCB0aGUgY29uc3RydWN0b3IgbmFtZSBmb3IgYW4gb2JqZWN0LiAqL1xyXG5mdW5jdGlvbiB0cnlHZXRDdXN0b21PYmplY3RUeXBlKGlucHV0KSB7XHJcbiAgICBpZiAoaW5wdXQuY29uc3RydWN0b3IpIHtcclxuICAgICAgICB2YXIgZnVuY05hbWVSZWdleCA9IC9mdW5jdGlvblxccysoW15cXHMoXSspXFxzKlxcKC87XHJcbiAgICAgICAgdmFyIHJlc3VsdHMgPSBmdW5jTmFtZVJlZ2V4LmV4ZWMoaW5wdXQuY29uc3RydWN0b3IudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgaWYgKHJlc3VsdHMgJiYgcmVzdWx0cy5sZW5ndGggPiAxKSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXN1bHRzWzFdO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBudWxsO1xyXG59XHJcbi8qKiBWYWxpZGF0ZXMgdGhlIHByb3ZpZGVkIGFyZ3VtZW50IGlzIGRlZmluZWQuICovXHJcbmZ1bmN0aW9uIHZhbGlkYXRlRGVmaW5lZChmdW5jdGlvbk5hbWUsIHBvc2l0aW9uLCBhcmd1bWVudCkge1xyXG4gICAgaWYgKGFyZ3VtZW50ID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5JTlZBTElEX0FSR1VNRU5ULCBcIkZ1bmN0aW9uIFwiICsgZnVuY3Rpb25OYW1lICsgXCIoKSByZXF1aXJlcyBhIHZhbGlkIFwiICsgb3JkaW5hbChwb3NpdGlvbikgKyBcIiBcIiArXHJcbiAgICAgICAgICAgIFwiYXJndW1lbnQsIGJ1dCBpdCB3YXMgdW5kZWZpbmVkLlwiKTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogVmFsaWRhdGVzIHRoZSBwcm92aWRlZCBwb3NpdGlvbmFsIGFyZ3VtZW50IGlzIGFuIG9iamVjdCwgYW5kIGl0cyBrZXlzIGFuZFxyXG4gKiB2YWx1ZXMgbWF0Y2ggdGhlIGV4cGVjdGVkIGtleXMgYW5kIHR5cGVzIHByb3ZpZGVkIGluIG9wdGlvblR5cGVzLlxyXG4gKi9cclxuZnVuY3Rpb24gdmFsaWRhdGVPcHRpb25OYW1lcyhmdW5jdGlvbk5hbWUsIG9wdGlvbnMsIG9wdGlvbk5hbWVzKSB7XHJcbiAgICBmb3JFYWNoKG9wdGlvbnMsIGZ1bmN0aW9uIChrZXksIF8pIHtcclxuICAgICAgICBpZiAob3B0aW9uTmFtZXMuaW5kZXhPZihrZXkpIDwgMCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5JTlZBTElEX0FSR1VNRU5ULCBcIlVua25vd24gb3B0aW9uICdcIiArIGtleSArIFwiJyBwYXNzZWQgdG8gZnVuY3Rpb24gXCIgKyBmdW5jdGlvbk5hbWUgKyBcIigpLiBcIiArXHJcbiAgICAgICAgICAgICAgICAnQXZhaWxhYmxlIG9wdGlvbnM6ICcgK1xyXG4gICAgICAgICAgICAgICAgb3B0aW9uTmFtZXMuam9pbignLCAnKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn1cclxuLyoqXHJcbiAqIEhlbHBlciBtZXRob2QgdG8gdGhyb3cgYW4gZXJyb3IgdGhhdCB0aGUgcHJvdmlkZWQgYXJndW1lbnQgZGlkIG5vdCBwYXNzXHJcbiAqIGFuIGluc3RhbmNlb2YgY2hlY2suXHJcbiAqL1xyXG5mdW5jdGlvbiBpbnZhbGlkQ2xhc3NFcnJvcihmdW5jdGlvbk5hbWUsIHR5cGUsIHBvc2l0aW9uLCBhcmd1bWVudCkge1xyXG4gICAgdmFyIGRlc2NyaXB0aW9uID0gdmFsdWVEZXNjcmlwdGlvbihhcmd1bWVudCk7XHJcbiAgICByZXR1cm4gbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuSU5WQUxJRF9BUkdVTUVOVCwgXCJGdW5jdGlvbiBcIiArIGZ1bmN0aW9uTmFtZSArIFwiKCkgcmVxdWlyZXMgaXRzIFwiICsgb3JkaW5hbChwb3NpdGlvbikgKyBcIiBcIiArXHJcbiAgICAgICAgKFwiYXJndW1lbnQgdG8gYmUgYSBcIiArIHR5cGUgKyBcIiwgYnV0IGl0IHdhczogXCIgKyBkZXNjcmlwdGlvbikpO1xyXG59XHJcbmZ1bmN0aW9uIHZhbGlkYXRlUG9zaXRpdmVOdW1iZXIoZnVuY3Rpb25OYW1lLCBwb3NpdGlvbiwgbikge1xyXG4gICAgaWYgKG4gPD0gMCkge1xyXG4gICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLklOVkFMSURfQVJHVU1FTlQsIFwiRnVuY3Rpb24gXFxcIlwiICsgZnVuY3Rpb25OYW1lICsgXCIoKVxcXCIgcmVxdWlyZXMgaXRzIFwiICsgb3JkaW5hbChwb3NpdGlvbikgKyBcIiBhcmd1bWVudCB0byBiZSBhIHBvc2l0aXZlIG51bWJlciwgYnV0IGl0IHdhczogXCIgKyBuICsgXCIuXCIpO1xyXG4gICAgfVxyXG59XHJcbi8qKiBDb252ZXJ0cyBhIG51bWJlciB0byBpdHMgZW5nbGlzaCB3b3JkIHJlcHJlc2VudGF0aW9uICovXHJcbmZ1bmN0aW9uIG9yZGluYWwobnVtKSB7XHJcbiAgICBzd2l0Y2ggKG51bSkge1xyXG4gICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgcmV0dXJuICdmaXJzdCc7XHJcbiAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICByZXR1cm4gJ3NlY29uZCc7XHJcbiAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICByZXR1cm4gJ3RoaXJkJztcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICByZXR1cm4gbnVtICsgJ3RoJztcclxuICAgIH1cclxufVxyXG4vKipcclxuICogRm9ybWF0cyB0aGUgZ2l2ZW4gd29yZCBhcyBwbHVyYWwgY29uZGl0aW9uYWxseSBnaXZlbiB0aGUgcHJlY2VkaW5nIG51bWJlci5cclxuICovXHJcbmZ1bmN0aW9uIGZvcm1hdFBsdXJhbChudW0sIHN0cikge1xyXG4gICAgcmV0dXJuIG51bSArIFwiIFwiICsgc3RyICsgKG51bSA9PT0gMSA/ICcnIDogJ3MnKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxudmFyIEF1dG9JZCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEF1dG9JZCgpIHtcclxuICAgIH1cclxuICAgIEF1dG9JZC5uZXdJZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvLyBBbHBoYW51bWVyaWMgY2hhcmFjdGVyc1xyXG4gICAgICAgIHZhciBjaGFycyA9ICdBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSc7XHJcbiAgICAgICAgdmFyIGF1dG9JZCA9ICcnO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMjA7IGkrKykge1xyXG4gICAgICAgICAgICBhdXRvSWQgKz0gY2hhcnMuY2hhckF0KE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGNoYXJzLmxlbmd0aCkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBhc3NlcnQoYXV0b0lkLmxlbmd0aCA9PT0gMjAsICdJbnZhbGlkIGF1dG8gSUQ6ICcgKyBhdXRvSWQpO1xyXG4gICAgICAgIHJldHVybiBhdXRvSWQ7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEF1dG9JZDtcclxufSgpKTtcclxuZnVuY3Rpb24gcHJpbWl0aXZlQ29tcGFyYXRvcihsZWZ0LCByaWdodCkge1xyXG4gICAgaWYgKGxlZnQgPCByaWdodCkge1xyXG4gICAgICAgIHJldHVybiAtMTtcclxuICAgIH1cclxuICAgIGlmIChsZWZ0ID4gcmlnaHQpIHtcclxuICAgICAgICByZXR1cm4gMTtcclxuICAgIH1cclxuICAgIHJldHVybiAwO1xyXG59XHJcbi8qKiBIZWxwZXIgdG8gY29tcGFyZSBudWxsYWJsZSAob3IgdW5kZWZpbmVkLWFibGUpIG9iamVjdHMgdXNpbmcgaXNFcXVhbCgpLiAqL1xyXG5mdW5jdGlvbiBlcXVhbHMobGVmdCwgcmlnaHQpIHtcclxuICAgIGlmIChsZWZ0ICE9PSBudWxsICYmIGxlZnQgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIHJldHVybiAhIShyaWdodCAmJiBsZWZ0LmlzRXF1YWwocmlnaHQpKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIC8vIEhBQ0s6IEV4cGxpY2l0bHkgY2FzdCBzaW5jZSBUeXBlU2NyaXB0J3MgdHlwZSBuYXJyb3dpbmcgYXBwYXJlbnRseSBpc24ndFxyXG4gICAgICAgIC8vIHNtYXJ0IGVub3VnaC5cclxuICAgICAgICByZXR1cm4gbGVmdCA9PT0gcmlnaHQ7XHJcbiAgICB9XHJcbn1cclxuLyoqIEhlbHBlciB0byBjb21wYXJlIGFycmF5cyB1c2luZyBpc0VxdWFsKCkuICovXHJcbmZ1bmN0aW9uIGFycmF5RXF1YWxzKGxlZnQsIHJpZ2h0KSB7XHJcbiAgICBpZiAobGVmdC5sZW5ndGggIT09IHJpZ2h0Lmxlbmd0aCkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVmdC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGlmICghbGVmdFtpXS5pc0VxdWFsKHJpZ2h0W2ldKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRydWU7XHJcbn1cclxuLyoqXHJcbiAqIFJldHVybnMgdGhlIGltbWVkaWF0ZSBsZXhpY29ncmFwaGljYWxseS1mb2xsb3dpbmcgc3RyaW5nLiBUaGlzIGlzIHVzZWZ1bCB0b1xyXG4gKiBjb25zdHJ1Y3QgYW4gaW5jbHVzaXZlIHJhbmdlIGZvciBpbmRleGVkZGIgaXRlcmF0b3JzLlxyXG4gKi9cclxuZnVuY3Rpb24gaW1tZWRpYXRlU3VjY2Vzc29yKHMpIHtcclxuICAgIC8vIFJldHVybiB0aGUgaW5wdXQgc3RyaW5nLCB3aXRoIGFuIGFkZGl0aW9uYWwgTlVMIGJ5dGUgYXBwZW5kZWQuXHJcbiAgICByZXR1cm4gcyArICdcXDAnO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKiogSGVscGVyIGZ1bmN0aW9uIHRvIGFzc2VydCBVaW50OEFycmF5IGlzIGF2YWlsYWJsZSBhdCBydW50aW1lLiAqL1xyXG5mdW5jdGlvbiBhc3NlcnRVaW50OEFycmF5QXZhaWxhYmxlKCkge1xyXG4gICAgaWYgKHR5cGVvZiBVaW50OEFycmF5ID09PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLlVOSU1QTEVNRU5URUQsICdVaW50OEFycmF5cyBhcmUgbm90IGF2YWlsYWJsZSBpbiB0aGlzIGVudmlyb25tZW50LicpO1xyXG4gICAgfVxyXG59XHJcbi8qKiBIZWxwZXIgZnVuY3Rpb24gdG8gYXNzZXJ0IEJhc2U2NCBmdW5jdGlvbnMgYXJlIGF2YWlsYWJsZSBhdCBydW50aW1lLiAqL1xyXG5mdW5jdGlvbiBhc3NlcnRCYXNlNjRBdmFpbGFibGUoKSB7XHJcbiAgICBpZiAoIVBsYXRmb3JtU3VwcG9ydC5nZXRQbGF0Zm9ybSgpLmJhc2U2NEF2YWlsYWJsZSkge1xyXG4gICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLlVOSU1QTEVNRU5URUQsICdCbG9icyBhcmUgdW5hdmFpbGFibGUgaW4gRmlyZXN0b3JlIGluIHRoaXMgZW52aXJvbm1lbnQuJyk7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIEltbXV0YWJsZSBjbGFzcyBob2xkaW5nIGEgYmxvYiAoYmluYXJ5IGRhdGEpLlxyXG4gKiBUaGlzIGNsYXNzIGlzIGRpcmVjdGx5IGV4cG9zZWQgaW4gdGhlIHB1YmxpYyBBUEkuXHJcbiAqXHJcbiAqIE5vdGUgdGhhdCB3aGlsZSB5b3UgY2FuJ3QgaGlkZSB0aGUgY29uc3RydWN0b3IgaW4gSmF2YVNjcmlwdCBjb2RlLCB3ZSBhcmVcclxuICogdXNpbmcgdGhlIGhhY2sgYWJvdmUgdG8gbWFrZSBzdXJlIG5vLW9uZSBvdXRzaWRlIHRoaXMgbW9kdWxlIGNhbiBjYWxsIGl0LlxyXG4gKi9cclxudmFyIEJsb2IgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBCbG9iKGJpbmFyeVN0cmluZykge1xyXG4gICAgICAgIGFzc2VydEJhc2U2NEF2YWlsYWJsZSgpO1xyXG4gICAgICAgIHRoaXMuX2JpbmFyeVN0cmluZyA9IGJpbmFyeVN0cmluZztcclxuICAgIH1cclxuICAgIEJsb2IuZnJvbUJhc2U2NFN0cmluZyA9IGZ1bmN0aW9uIChiYXNlNjQpIHtcclxuICAgICAgICB2YWxpZGF0ZUV4YWN0TnVtYmVyT2ZBcmdzKCdCbG9iLmZyb21CYXNlNjRTdHJpbmcnLCBhcmd1bWVudHMsIDEpO1xyXG4gICAgICAgIHZhbGlkYXRlQXJnVHlwZSgnQmxvYi5mcm9tQmFzZTY0U3RyaW5nJywgJ3N0cmluZycsIDEsIGJhc2U2NCk7XHJcbiAgICAgICAgYXNzZXJ0QmFzZTY0QXZhaWxhYmxlKCk7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgdmFyIGJpbmFyeVN0cmluZyA9IFBsYXRmb3JtU3VwcG9ydC5nZXRQbGF0Zm9ybSgpLmF0b2IoYmFzZTY0KTtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBCbG9iKGJpbmFyeVN0cmluZyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLklOVkFMSURfQVJHVU1FTlQsICdGYWlsZWQgdG8gY29uc3RydWN0IEJsb2IgZnJvbSBCYXNlNjQgc3RyaW5nOiAnICsgZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIEJsb2IuZnJvbVVpbnQ4QXJyYXkgPSBmdW5jdGlvbiAoYXJyYXkpIHtcclxuICAgICAgICB2YWxpZGF0ZUV4YWN0TnVtYmVyT2ZBcmdzKCdCbG9iLmZyb21VaW50OEFycmF5JywgYXJndW1lbnRzLCAxKTtcclxuICAgICAgICBhc3NlcnRVaW50OEFycmF5QXZhaWxhYmxlKCk7XHJcbiAgICAgICAgaWYgKCEoYXJyYXkgaW5zdGFuY2VvZiBVaW50OEFycmF5KSkge1xyXG4gICAgICAgICAgICB0aHJvdyBpbnZhbGlkQ2xhc3NFcnJvcignQmxvYi5mcm9tVWludDhBcnJheScsICdVaW50OEFycmF5JywgMSwgYXJyYXkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBXZSBjYW4ndCBjYWxsIGFycmF5Lm1hcCBkaXJlY3RseSBiZWNhdXNlIGl0IGV4cGVjdHMgdGhlIHJldHVybiB0eXBlIHRvXHJcbiAgICAgICAgLy8gYmUgYSBVaW50OEFycmF5LCB3aGVyZWFzIHdlIGNhbiBjb252ZXJ0IGl0IHRvIGEgcmVndWxhciBhcnJheSBieSBpbnZva2luZ1xyXG4gICAgICAgIC8vIG1hcCBvbiB0aGUgQXJyYXkgcHJvdG90eXBlLlxyXG4gICAgICAgIHZhciBiaW5hcnlTdHJpbmcgPSBBcnJheS5wcm90b3R5cGUubWFwXHJcbiAgICAgICAgICAgIC5jYWxsKGFycmF5LCBmdW5jdGlvbiAoY2hhcikge1xyXG4gICAgICAgICAgICByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZShjaGFyKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAuam9pbignJyk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBCbG9iKGJpbmFyeVN0cmluZyk7XHJcbiAgICB9O1xyXG4gICAgQmxvYi5wcm90b3R5cGUudG9CYXNlNjQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFsaWRhdGVFeGFjdE51bWJlck9mQXJncygnQmxvYi50b0Jhc2U2NCcsIGFyZ3VtZW50cywgMCk7XHJcbiAgICAgICAgYXNzZXJ0QmFzZTY0QXZhaWxhYmxlKCk7XHJcbiAgICAgICAgcmV0dXJuIFBsYXRmb3JtU3VwcG9ydC5nZXRQbGF0Zm9ybSgpLmJ0b2EodGhpcy5fYmluYXJ5U3RyaW5nKTtcclxuICAgIH07XHJcbiAgICBCbG9iLnByb3RvdHlwZS50b1VpbnQ4QXJyYXkgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFsaWRhdGVFeGFjdE51bWJlck9mQXJncygnQmxvYi50b1VpbnQ4QXJyYXknLCBhcmd1bWVudHMsIDApO1xyXG4gICAgICAgIGFzc2VydFVpbnQ4QXJyYXlBdmFpbGFibGUoKTtcclxuICAgICAgICB2YXIgYnVmZmVyID0gbmV3IFVpbnQ4QXJyYXkodGhpcy5fYmluYXJ5U3RyaW5nLmxlbmd0aCk7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLl9iaW5hcnlTdHJpbmcubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgYnVmZmVyW2ldID0gdGhpcy5fYmluYXJ5U3RyaW5nLmNoYXJDb2RlQXQoaSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBidWZmZXI7XHJcbiAgICB9O1xyXG4gICAgQmxvYi5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuICdCbG9iKGJhc2U2NDogJyArIHRoaXMudG9CYXNlNjQoKSArICcpJztcclxuICAgIH07XHJcbiAgICBCbG9iLnByb3RvdHlwZS5pc0VxdWFsID0gZnVuY3Rpb24gKG90aGVyKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2JpbmFyeVN0cmluZyA9PT0gb3RoZXIuX2JpbmFyeVN0cmluZztcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEFjdHVhbGx5IHByaXZhdGUgdG8gSlMgY29uc3VtZXJzIG9mIG91ciBBUEksIHNvIHRoaXMgZnVuY3Rpb24gaXMgcHJlZml4ZWRcclxuICAgICAqIHdpdGggYW4gdW5kZXJzY29yZS5cclxuICAgICAqL1xyXG4gICAgQmxvYi5wcm90b3R5cGUuX2NvbXBhcmVUbyA9IGZ1bmN0aW9uIChvdGhlcikge1xyXG4gICAgICAgIHJldHVybiBwcmltaXRpdmVDb21wYXJhdG9yKHRoaXMuX2JpbmFyeVN0cmluZywgb3RoZXIuX2JpbmFyeVN0cmluZyk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEJsb2I7XHJcbn0oKSk7XHJcbi8vIFB1YmxpYyBpbnN0YW5jZSB0aGF0IGRpc2FsbG93cyBjb25zdHJ1Y3Rpb24gYXQgcnVudGltZS4gVGhpcyBjb25zdHJ1Y3RvciBpc1xyXG4vLyB1c2VkIHdoZW4gZXhwb3J0aW5nIEJsb2Igb24gZmlyZWJhc2UuZmlyZXN0b3JlLkJsb2IgYW5kIHdpbGwgYmUgY2FsbGVkIEJsb2JcclxuLy8gcHVibGljbHkuIEludGVybmFsbHkgd2Ugc3RpbGwgdXNlIEJsb2Igd2hpY2ggaGFzIGEgdHlwZSBjaGVja2VkIHByaXZhdGVcclxuLy8gY29uc3RydWN0b3IuIE5vdGUgdGhhdCBCbG9iIGFuZCBQdWJsaWNCbG9iIGNhbiBiZSB1c2VkIGludGVyY2hhbmdlYWJseSBpblxyXG4vLyBpbnN0YW5jZW9mIGNoZWNrcy5cclxuLy8gRm9yIG91ciBpbnRlcm5hbCBUeXBlU2NyaXB0IGNvZGUgUHVibGljQmxvYiBkb2Vzbid0IGV4aXN0IGFzIGEgdHlwZSwgYW5kIHNvXHJcbi8vIHdlIG5lZWQgdG8gdXNlIEJsb2IgYXMgdHlwZSBhbmQgZXhwb3J0IGl0IHRvby5cclxudmFyIFB1YmxpY0Jsb2IgPSBtYWtlQ29uc3RydWN0b3JQcml2YXRlKEJsb2IsICdVc2UgQmxvYi5mcm9tVWludDhBcnJheSgpIG9yIEJsb2IuZnJvbUJhc2U2NFN0cmluZygpIGluc3RlYWQuJyk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG52YXIgRGF0YWJhc2VJbmZvID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgLyoqXHJcbiAgICAgKiBDb25zdHJ1Y3RzIGEgRGF0YWJhc2VJbmZvIHVzaW5nIHRoZSBwcm92aWRlZCBob3N0LCBkYXRhYmFzZUlkIGFuZFxyXG4gICAgICogcGVyc2lzdGVuY2VLZXkuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGRhdGFiYXNlSWQgVGhlIGRhdGFiYXNlIHRvIHVzZS5cclxuICAgICAqIEBwYXJhbSBwZXJzaXN0ZW5jZUtleSBBIHVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGlzIEZpcmVzdG9yZSdzIGxvY2FsXHJcbiAgICAgKiBzdG9yYWdlICh1c2VkIGluIGNvbmp1bmN0aW9uIHdpdGggdGhlIGRhdGFiYXNlSWQpLlxyXG4gICAgICogQHBhcmFtIGhvc3QgVGhlIEZpcmVzdG9yZSBiYWNrZW5kIGhvc3QgdG8gY29ubmVjdCB0by5cclxuICAgICAqIEBwYXJhbSBzc2wgV2hldGhlciB0byB1c2UgU1NMIHdoZW4gY29ubmVjdGluZy5cclxuICAgICAqIEBwYXJhbSBmb3JjZUxvbmdQb2xsaW5nIFdoZXRoZXIgdG8gdXNlIHRoZSBmb3JjZUxvbmdQb2xsaW5nIG9wdGlvblxyXG4gICAgICogd2hlbiB1c2luZyBXZWJDaGFubmVsIGFzIHRoZSBuZXR3b3JrIHRyYW5zcG9ydC5cclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gRGF0YWJhc2VJbmZvKGRhdGFiYXNlSWQsIHBlcnNpc3RlbmNlS2V5LCBob3N0LCBzc2wsIGZvcmNlTG9uZ1BvbGxpbmcpIHtcclxuICAgICAgICB0aGlzLmRhdGFiYXNlSWQgPSBkYXRhYmFzZUlkO1xyXG4gICAgICAgIHRoaXMucGVyc2lzdGVuY2VLZXkgPSBwZXJzaXN0ZW5jZUtleTtcclxuICAgICAgICB0aGlzLmhvc3QgPSBob3N0O1xyXG4gICAgICAgIHRoaXMuc3NsID0gc3NsO1xyXG4gICAgICAgIHRoaXMuZm9yY2VMb25nUG9sbGluZyA9IGZvcmNlTG9uZ1BvbGxpbmc7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gRGF0YWJhc2VJbmZvO1xyXG59KCkpO1xyXG4vKiogVGhlIGRlZmF1bHQgZGF0YWJhc2UgbmFtZSBmb3IgYSBwcm9qZWN0LiAqL1xyXG52YXIgREVGQVVMVF9EQVRBQkFTRV9OQU1FID0gJyhkZWZhdWx0KSc7XHJcbi8qKiBSZXByZXNlbnRzIHRoZSBkYXRhYmFzZSBJRCBhIEZpcmVzdG9yZSBjbGllbnQgaXMgYXNzb2NpYXRlZCB3aXRoLiAqL1xyXG52YXIgRGF0YWJhc2VJZCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIERhdGFiYXNlSWQocHJvamVjdElkLCBkYXRhYmFzZSkge1xyXG4gICAgICAgIHRoaXMucHJvamVjdElkID0gcHJvamVjdElkO1xyXG4gICAgICAgIHRoaXMuZGF0YWJhc2UgPSBkYXRhYmFzZSA/IGRhdGFiYXNlIDogREVGQVVMVF9EQVRBQkFTRV9OQU1FO1xyXG4gICAgfVxyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KERhdGFiYXNlSWQucHJvdG90eXBlLCBcImlzRGVmYXVsdERhdGFiYXNlXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGF0YWJhc2UgPT09IERFRkFVTFRfREFUQUJBU0VfTkFNRTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIERhdGFiYXNlSWQucHJvdG90eXBlLmlzRXF1YWwgPSBmdW5jdGlvbiAob3RoZXIpIHtcclxuICAgICAgICByZXR1cm4gKG90aGVyIGluc3RhbmNlb2YgRGF0YWJhc2VJZCAmJlxyXG4gICAgICAgICAgICBvdGhlci5wcm9qZWN0SWQgPT09IHRoaXMucHJvamVjdElkICYmXHJcbiAgICAgICAgICAgIG90aGVyLmRhdGFiYXNlID09PSB0aGlzLmRhdGFiYXNlKTtcclxuICAgIH07XHJcbiAgICBEYXRhYmFzZUlkLnByb3RvdHlwZS5jb21wYXJlVG8gPSBmdW5jdGlvbiAob3RoZXIpIHtcclxuICAgICAgICByZXR1cm4gKHByaW1pdGl2ZUNvbXBhcmF0b3IodGhpcy5wcm9qZWN0SWQsIG90aGVyLnByb2plY3RJZCkgfHxcclxuICAgICAgICAgICAgcHJpbWl0aXZlQ29tcGFyYXRvcih0aGlzLmRhdGFiYXNlLCBvdGhlci5kYXRhYmFzZSkpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBEYXRhYmFzZUlkO1xyXG59KCkpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIGBMaXN0ZW5TZXF1ZW5jZWAgaXMgYSBtb25vdG9uaWMgc2VxdWVuY2UuIEl0IGlzIGluaXRpYWxpemVkIHdpdGggYSBtaW5pbXVtIHZhbHVlIHRvXHJcbiAqIGV4Y2VlZC4gQWxsIHN1YnNlcXVlbnQgY2FsbHMgdG8gbmV4dCB3aWxsIHJldHVybiBpbmNyZWFzaW5nIHZhbHVlcy4gSWYgcHJvdmlkZWQgd2l0aCBhXHJcbiAqIGBTZXF1ZW5jZU51bWJlclN5bmNlcmAsIGl0IHdpbGwgYWRkaXRpb25hbGx5IGJ1bXAgaXRzIG5leHQgdmFsdWUgd2hlbiB0b2xkIG9mIGEgbmV3IHZhbHVlLCBhc1xyXG4gKiB3ZWxsIGFzIHdyaXRlIG91dCBzZXF1ZW5jZSBudW1iZXJzIHRoYXQgaXQgcHJvZHVjZXMgdmlhIGBuZXh0KClgLlxyXG4gKi9cclxudmFyIExpc3RlblNlcXVlbmNlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gTGlzdGVuU2VxdWVuY2UocHJldmlvdXNWYWx1ZSwgc2VxdWVuY2VOdW1iZXJTeW5jZXIpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMucHJldmlvdXNWYWx1ZSA9IHByZXZpb3VzVmFsdWU7XHJcbiAgICAgICAgaWYgKHNlcXVlbmNlTnVtYmVyU3luY2VyKSB7XHJcbiAgICAgICAgICAgIHNlcXVlbmNlTnVtYmVyU3luY2VyLnNlcXVlbmNlTnVtYmVySGFuZGxlciA9IGZ1bmN0aW9uIChzZXF1ZW5jZU51bWJlcikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLnNldFByZXZpb3VzVmFsdWUoc2VxdWVuY2VOdW1iZXIpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB0aGlzLndyaXRlTmV3U2VxdWVuY2VOdW1iZXIgPSBmdW5jdGlvbiAoc2VxdWVuY2VOdW1iZXIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBzZXF1ZW5jZU51bWJlclN5bmNlci53cml0ZVNlcXVlbmNlTnVtYmVyKHNlcXVlbmNlTnVtYmVyKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBMaXN0ZW5TZXF1ZW5jZS5wcm90b3R5cGUuc2V0UHJldmlvdXNWYWx1ZSA9IGZ1bmN0aW9uIChleHRlcm5hbFByZXZpb3VzVmFsdWUpIHtcclxuICAgICAgICB0aGlzLnByZXZpb3VzVmFsdWUgPSBNYXRoLm1heChleHRlcm5hbFByZXZpb3VzVmFsdWUsIHRoaXMucHJldmlvdXNWYWx1ZSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucHJldmlvdXNWYWx1ZTtcclxuICAgIH07XHJcbiAgICBMaXN0ZW5TZXF1ZW5jZS5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgbmV4dFZhbHVlID0gKyt0aGlzLnByZXZpb3VzVmFsdWU7XHJcbiAgICAgICAgaWYgKHRoaXMud3JpdGVOZXdTZXF1ZW5jZU51bWJlcikge1xyXG4gICAgICAgICAgICB0aGlzLndyaXRlTmV3U2VxdWVuY2VOdW1iZXIobmV4dFZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG5leHRWYWx1ZTtcclxuICAgIH07XHJcbiAgICBMaXN0ZW5TZXF1ZW5jZS5JTlZBTElEID0gLTE7XHJcbiAgICByZXR1cm4gTGlzdGVuU2VxdWVuY2U7XHJcbn0oKSk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG52YXIgRE9DVU1FTlRfS0VZX05BTUUgPSAnX19uYW1lX18nO1xyXG4vKipcclxuICogUGF0aCByZXByZXNlbnRzIGFuIG9yZGVyZWQgc2VxdWVuY2Ugb2Ygc3RyaW5nIHNlZ21lbnRzLlxyXG4gKi9cclxudmFyIEJhc2VQYXRoID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gQmFzZVBhdGgoc2VnbWVudHMsIG9mZnNldCwgbGVuZ3RoKSB7XHJcbiAgICAgICAgaWYgKG9mZnNldCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIG9mZnNldCA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKG9mZnNldCA+IHNlZ21lbnRzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBmYWlsKCdvZmZzZXQgJyArIG9mZnNldCArICcgb3V0IG9mIHJhbmdlICcgKyBzZWdtZW50cy5sZW5ndGgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAobGVuZ3RoID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgbGVuZ3RoID0gc2VnbWVudHMubGVuZ3RoIC0gb2Zmc2V0O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChsZW5ndGggPiBzZWdtZW50cy5sZW5ndGggLSBvZmZzZXQpIHtcclxuICAgICAgICAgICAgZmFpbCgnbGVuZ3RoICcgKyBsZW5ndGggKyAnIG91dCBvZiByYW5nZSAnICsgKHNlZ21lbnRzLmxlbmd0aCAtIG9mZnNldCkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnNlZ21lbnRzID0gc2VnbWVudHM7XHJcbiAgICAgICAgdGhpcy5vZmZzZXQgPSBvZmZzZXQ7XHJcbiAgICAgICAgdGhpcy5sZW4gPSBsZW5ndGg7XHJcbiAgICB9XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQmFzZVBhdGgucHJvdG90eXBlLCBcImxlbmd0aFwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmxlbjtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIEJhc2VQYXRoLnByb3RvdHlwZS5pc0VxdWFsID0gZnVuY3Rpb24gKG90aGVyKSB7XHJcbiAgICAgICAgcmV0dXJuIEJhc2VQYXRoLmNvbXBhcmF0b3IodGhpcywgb3RoZXIpID09PSAwO1xyXG4gICAgfTtcclxuICAgIEJhc2VQYXRoLnByb3RvdHlwZS5jaGlsZCA9IGZ1bmN0aW9uIChuYW1lT3JQYXRoKSB7XHJcbiAgICAgICAgdmFyIHNlZ21lbnRzID0gdGhpcy5zZWdtZW50cy5zbGljZSh0aGlzLm9mZnNldCwgdGhpcy5saW1pdCgpKTtcclxuICAgICAgICBpZiAobmFtZU9yUGF0aCBpbnN0YW5jZW9mIEJhc2VQYXRoKSB7XHJcbiAgICAgICAgICAgIG5hbWVPclBhdGguZm9yRWFjaChmdW5jdGlvbiAoc2VnbWVudCkge1xyXG4gICAgICAgICAgICAgICAgc2VnbWVudHMucHVzaChzZWdtZW50KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBzZWdtZW50cy5wdXNoKG5hbWVPclBhdGgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3Qoc2VnbWVudHMpO1xyXG4gICAgfTtcclxuICAgIC8qKiBUaGUgaW5kZXggb2Ygb25lIHBhc3QgdGhlIGxhc3Qgc2VnbWVudCBvZiB0aGUgcGF0aC4gKi9cclxuICAgIEJhc2VQYXRoLnByb3RvdHlwZS5saW1pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5vZmZzZXQgKyB0aGlzLmxlbmd0aDtcclxuICAgIH07XHJcbiAgICBCYXNlUGF0aC5wcm90b3R5cGUucG9wRmlyc3QgPSBmdW5jdGlvbiAoc2l6ZSkge1xyXG4gICAgICAgIHNpemUgPSBzaXplID09PSB1bmRlZmluZWQgPyAxIDogc2l6ZTtcclxuICAgICAgICBhc3NlcnQodGhpcy5sZW5ndGggPj0gc2l6ZSwgXCJDYW4ndCBjYWxsIHBvcEZpcnN0KCkgd2l0aCBsZXNzIHNlZ21lbnRzXCIpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNvbnN0cnVjdCh0aGlzLnNlZ21lbnRzLCB0aGlzLm9mZnNldCArIHNpemUsIHRoaXMubGVuZ3RoIC0gc2l6ZSk7XHJcbiAgICB9O1xyXG4gICAgQmFzZVBhdGgucHJvdG90eXBlLnBvcExhc3QgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgYXNzZXJ0KCF0aGlzLmlzRW1wdHkoKSwgXCJDYW4ndCBjYWxsIHBvcExhc3QoKSBvbiBlbXB0eSBwYXRoXCIpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNvbnN0cnVjdCh0aGlzLnNlZ21lbnRzLCB0aGlzLm9mZnNldCwgdGhpcy5sZW5ndGggLSAxKTtcclxuICAgIH07XHJcbiAgICBCYXNlUGF0aC5wcm90b3R5cGUuZmlyc3RTZWdtZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGFzc2VydCghdGhpcy5pc0VtcHR5KCksIFwiQ2FuJ3QgY2FsbCBmaXJzdFNlZ21lbnQoKSBvbiBlbXB0eSBwYXRoXCIpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNlZ21lbnRzW3RoaXMub2Zmc2V0XTtcclxuICAgIH07XHJcbiAgICBCYXNlUGF0aC5wcm90b3R5cGUubGFzdFNlZ21lbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0KHRoaXMubGVuZ3RoIC0gMSk7XHJcbiAgICB9O1xyXG4gICAgQmFzZVBhdGgucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uIChpbmRleCkge1xyXG4gICAgICAgIGFzc2VydChpbmRleCA8IHRoaXMubGVuZ3RoLCAnSW5kZXggb3V0IG9mIHJhbmdlJyk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc2VnbWVudHNbdGhpcy5vZmZzZXQgKyBpbmRleF07XHJcbiAgICB9O1xyXG4gICAgQmFzZVBhdGgucHJvdG90eXBlLmlzRW1wdHkgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubGVuZ3RoID09PSAwO1xyXG4gICAgfTtcclxuICAgIEJhc2VQYXRoLnByb3RvdHlwZS5pc1ByZWZpeE9mID0gZnVuY3Rpb24gKG90aGVyKSB7XHJcbiAgICAgICAgaWYgKG90aGVyLmxlbmd0aCA8IHRoaXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmdldChpKSAhPT0gb3RoZXIuZ2V0KGkpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9O1xyXG4gICAgQmFzZVBhdGgucHJvdG90eXBlLmlzSW1tZWRpYXRlUGFyZW50T2YgPSBmdW5jdGlvbiAocG90ZW50aWFsQ2hpbGQpIHtcclxuICAgICAgICBpZiAodGhpcy5sZW5ndGggKyAxICE9PSBwb3RlbnRpYWxDaGlsZC5sZW5ndGgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuZ2V0KGkpICE9PSBwb3RlbnRpYWxDaGlsZC5nZXQoaSkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH07XHJcbiAgICBCYXNlUGF0aC5wcm90b3R5cGUuZm9yRWFjaCA9IGZ1bmN0aW9uIChmbikge1xyXG4gICAgICAgIGZvciAodmFyIGkgPSB0aGlzLm9mZnNldCwgZW5kID0gdGhpcy5saW1pdCgpOyBpIDwgZW5kOyBpKyspIHtcclxuICAgICAgICAgICAgZm4odGhpcy5zZWdtZW50c1tpXSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIEJhc2VQYXRoLnByb3RvdHlwZS50b0FycmF5ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNlZ21lbnRzLnNsaWNlKHRoaXMub2Zmc2V0LCB0aGlzLmxpbWl0KCkpO1xyXG4gICAgfTtcclxuICAgIEJhc2VQYXRoLmNvbXBhcmF0b3IgPSBmdW5jdGlvbiAocDEsIHAyKSB7XHJcbiAgICAgICAgdmFyIGxlbiA9IE1hdGgubWluKHAxLmxlbmd0aCwgcDIubGVuZ3RoKTtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBsZWZ0ID0gcDEuZ2V0KGkpO1xyXG4gICAgICAgICAgICB2YXIgcmlnaHQgPSBwMi5nZXQoaSk7XHJcbiAgICAgICAgICAgIGlmIChsZWZ0IDwgcmlnaHQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAtMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAobGVmdCA+IHJpZ2h0KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAocDEubGVuZ3RoIDwgcDIubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAtMTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHAxLmxlbmd0aCA+IHAyLmxlbmd0aCkge1xyXG4gICAgICAgICAgICByZXR1cm4gMTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIDA7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEJhc2VQYXRoO1xyXG59KCkpO1xyXG4vKipcclxuICogQSBzbGFzaC1zZXBhcmF0ZWQgcGF0aCBmb3IgbmF2aWdhdGluZyByZXNvdXJjZXMgKGRvY3VtZW50cyBhbmQgY29sbGVjdGlvbnMpXHJcbiAqIHdpdGhpbiBGaXJlc3RvcmUuXHJcbiAqL1xyXG52YXIgUmVzb3VyY2VQYXRoID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgdHNsaWIuX19leHRlbmRzKFJlc291cmNlUGF0aCwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIFJlc291cmNlUGF0aCgpIHtcclxuICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XHJcbiAgICB9XHJcbiAgICBSZXNvdXJjZVBhdGgucHJvdG90eXBlLmNvbnN0cnVjdCA9IGZ1bmN0aW9uIChzZWdtZW50cywgb2Zmc2V0LCBsZW5ndGgpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFJlc291cmNlUGF0aChzZWdtZW50cywgb2Zmc2V0LCBsZW5ndGgpO1xyXG4gICAgfTtcclxuICAgIFJlc291cmNlUGF0aC5wcm90b3R5cGUuY2Fub25pY2FsU3RyaW5nID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vIE5PVEU6IFRoZSBjbGllbnQgaXMgaWdub3JhbnQgb2YgYW55IHBhdGggc2VnbWVudHMgY29udGFpbmluZyBlc2NhcGVcclxuICAgICAgICAvLyBzZXF1ZW5jZXMgKGUuZy4gX19pZDEyM19fKSBhbmQganVzdCBwYXNzZXMgdGhlbSB0aHJvdWdoIHJhdyAodGhleSBleGlzdFxyXG4gICAgICAgIC8vIGZvciBsZWdhY3kgcmVhc29ucyBhbmQgc2hvdWxkIG5vdCBiZSB1c2VkIGZyZXF1ZW50bHkpLlxyXG4gICAgICAgIHJldHVybiB0aGlzLnRvQXJyYXkoKS5qb2luKCcvJyk7XHJcbiAgICB9O1xyXG4gICAgUmVzb3VyY2VQYXRoLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jYW5vbmljYWxTdHJpbmcoKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYSByZXNvdXJjZSBwYXRoIGZyb20gdGhlIGdpdmVuIHNsYXNoLWRlbGltaXRlZCBzdHJpbmcuXHJcbiAgICAgKi9cclxuICAgIFJlc291cmNlUGF0aC5mcm9tU3RyaW5nID0gZnVuY3Rpb24gKHBhdGgpIHtcclxuICAgICAgICAvLyBOT1RFOiBUaGUgY2xpZW50IGlzIGlnbm9yYW50IG9mIGFueSBwYXRoIHNlZ21lbnRzIGNvbnRhaW5pbmcgZXNjYXBlXHJcbiAgICAgICAgLy8gc2VxdWVuY2VzIChlLmcuIF9faWQxMjNfXykgYW5kIGp1c3QgcGFzc2VzIHRoZW0gdGhyb3VnaCByYXcgKHRoZXkgZXhpc3RcclxuICAgICAgICAvLyBmb3IgbGVnYWN5IHJlYXNvbnMgYW5kIHNob3VsZCBub3QgYmUgdXNlZCBmcmVxdWVudGx5KS5cclxuICAgICAgICBpZiAocGF0aC5pbmRleE9mKCcvLycpID49IDApIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuSU5WQUxJRF9BUkdVTUVOVCwgXCJJbnZhbGlkIHBhdGggKFwiICsgcGF0aCArIFwiKS4gUGF0aHMgbXVzdCBub3QgY29udGFpbiAvLyBpbiB0aGVtLlwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gV2UgbWF5IHN0aWxsIGhhdmUgYW4gZW1wdHkgc2VnbWVudCBhdCB0aGUgYmVnaW5uaW5nIG9yIGVuZCBpZiB0aGV5IGhhZCBhXHJcbiAgICAgICAgLy8gbGVhZGluZyBvciB0cmFpbGluZyBzbGFzaCAod2hpY2ggd2UgYWxsb3cpLlxyXG4gICAgICAgIHZhciBzZWdtZW50cyA9IHBhdGguc3BsaXQoJy8nKS5maWx0ZXIoZnVuY3Rpb24gKHNlZ21lbnQpIHsgcmV0dXJuIHNlZ21lbnQubGVuZ3RoID4gMDsgfSk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBSZXNvdXJjZVBhdGgoc2VnbWVudHMpO1xyXG4gICAgfTtcclxuICAgIFJlc291cmNlUGF0aC5FTVBUWV9QQVRIID0gbmV3IFJlc291cmNlUGF0aChbXSk7XHJcbiAgICByZXR1cm4gUmVzb3VyY2VQYXRoO1xyXG59KEJhc2VQYXRoKSk7XHJcbnZhciBpZGVudGlmaWVyUmVnRXhwID0gL15bX2EtekEtWl1bX2EtekEtWjAtOV0qJC87XHJcbi8qKiBBIGRvdC1zZXBhcmF0ZWQgcGF0aCBmb3IgbmF2aWdhdGluZyBzdWItb2JqZWN0cyB3aXRoaW4gYSBkb2N1bWVudC4gKi9cclxudmFyIEZpZWxkUGF0aCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIHRzbGliLl9fZXh0ZW5kcyhGaWVsZFBhdGgsIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBGaWVsZFBhdGgoKSB7XHJcbiAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xyXG4gICAgfVxyXG4gICAgRmllbGRQYXRoLnByb3RvdHlwZS5jb25zdHJ1Y3QgPSBmdW5jdGlvbiAoc2VnbWVudHMsIG9mZnNldCwgbGVuZ3RoKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBGaWVsZFBhdGgoc2VnbWVudHMsIG9mZnNldCwgbGVuZ3RoKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgc3RyaW5nIGNvdWxkIGJlIHVzZWQgYXMgYSBzZWdtZW50IGluIGEgZmllbGQgcGF0aFxyXG4gICAgICogd2l0aG91dCBlc2NhcGluZy5cclxuICAgICAqL1xyXG4gICAgRmllbGRQYXRoLmlzVmFsaWRJZGVudGlmaWVyID0gZnVuY3Rpb24gKHNlZ21lbnQpIHtcclxuICAgICAgICByZXR1cm4gaWRlbnRpZmllclJlZ0V4cC50ZXN0KHNlZ21lbnQpO1xyXG4gICAgfTtcclxuICAgIEZpZWxkUGF0aC5wcm90b3R5cGUuY2Fub25pY2FsU3RyaW5nID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnRvQXJyYXkoKVxyXG4gICAgICAgICAgICAubWFwKGZ1bmN0aW9uIChzdHIpIHtcclxuICAgICAgICAgICAgc3RyID0gc3RyLnJlcGxhY2UoJ1xcXFwnLCAnXFxcXFxcXFwnKS5yZXBsYWNlKCdgJywgJ1xcXFxgJyk7XHJcbiAgICAgICAgICAgIGlmICghRmllbGRQYXRoLmlzVmFsaWRJZGVudGlmaWVyKHN0cikpIHtcclxuICAgICAgICAgICAgICAgIHN0ciA9ICdgJyArIHN0ciArICdgJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gc3RyO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5qb2luKCcuJyk7XHJcbiAgICB9O1xyXG4gICAgRmllbGRQYXRoLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jYW5vbmljYWxTdHJpbmcoKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGlzIGZpZWxkIHJlZmVyZW5jZXMgdGhlIGtleSBvZiBhIGRvY3VtZW50LlxyXG4gICAgICovXHJcbiAgICBGaWVsZFBhdGgucHJvdG90eXBlLmlzS2V5RmllbGQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubGVuZ3RoID09PSAxICYmIHRoaXMuZ2V0KDApID09PSBET0NVTUVOVF9LRVlfTkFNRTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFRoZSBmaWVsZCBkZXNpZ25hdGluZyB0aGUga2V5IG9mIGEgZG9jdW1lbnQuXHJcbiAgICAgKi9cclxuICAgIEZpZWxkUGF0aC5rZXlGaWVsZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gbmV3IEZpZWxkUGF0aChbRE9DVU1FTlRfS0VZX05BTUVdKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFBhcnNlcyBhIGZpZWxkIHN0cmluZyBmcm9tIHRoZSBnaXZlbiBzZXJ2ZXItZm9ybWF0dGVkIHN0cmluZy5cclxuICAgICAqXHJcbiAgICAgKiAtIFNwbGl0dGluZyB0aGUgZW1wdHkgc3RyaW5nIGlzIG5vdCBhbGxvd2VkIChmb3Igbm93IGF0IGxlYXN0KS5cclxuICAgICAqIC0gRW1wdHkgc2VnbWVudHMgd2l0aGluIHRoZSBzdHJpbmcgKGUuZy4gaWYgdGhlcmUgYXJlIHR3byBjb25zZWN1dGl2ZVxyXG4gICAgICogICBzZXBhcmF0b3JzKSBhcmUgbm90IGFsbG93ZWQuXHJcbiAgICAgKlxyXG4gICAgICogVE9ETyhiLzM3MjQ0MTU3KTogd2Ugc2hvdWxkIG1ha2UgdGhpcyBtb3JlIHN0cmljdC4gUmlnaHQgbm93LCBpdCBhbGxvd3NcclxuICAgICAqIG5vbi1pZGVudGlmaWVyIHBhdGggY29tcG9uZW50cywgZXZlbiBpZiB0aGV5IGFyZW4ndCBlc2NhcGVkLlxyXG4gICAgICovXHJcbiAgICBGaWVsZFBhdGguZnJvbVNlcnZlckZvcm1hdCA9IGZ1bmN0aW9uIChwYXRoKSB7XHJcbiAgICAgICAgdmFyIHNlZ21lbnRzID0gW107XHJcbiAgICAgICAgdmFyIGN1cnJlbnQgPSAnJztcclxuICAgICAgICB2YXIgaSA9IDA7XHJcbiAgICAgICAgdmFyIGFkZEN1cnJlbnRTZWdtZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAoY3VycmVudC5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLklOVkFMSURfQVJHVU1FTlQsIFwiSW52YWxpZCBmaWVsZCBwYXRoIChcIiArIHBhdGggKyBcIikuIFBhdGhzIG11c3Qgbm90IGJlIGVtcHR5LCBiZWdpbiBcIiArXHJcbiAgICAgICAgICAgICAgICAgICAgXCJ3aXRoICcuJywgZW5kIHdpdGggJy4nLCBvciBjb250YWluICcuLidcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc2VnbWVudHMucHVzaChjdXJyZW50KTtcclxuICAgICAgICAgICAgY3VycmVudCA9ICcnO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdmFyIGluQmFja3RpY2tzID0gZmFsc2U7XHJcbiAgICAgICAgd2hpbGUgKGkgPCBwYXRoLmxlbmd0aCkge1xyXG4gICAgICAgICAgICB2YXIgYyA9IHBhdGhbaV07XHJcbiAgICAgICAgICAgIGlmIChjID09PSAnXFxcXCcpIHtcclxuICAgICAgICAgICAgICAgIGlmIChpICsgMSA9PT0gcGF0aC5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5JTlZBTElEX0FSR1VNRU5ULCAnUGF0aCBoYXMgdHJhaWxpbmcgZXNjYXBlIGNoYXJhY3RlcjogJyArIHBhdGgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdmFyIG5leHQgPSBwYXRoW2kgKyAxXTtcclxuICAgICAgICAgICAgICAgIGlmICghKG5leHQgPT09ICdcXFxcJyB8fCBuZXh0ID09PSAnLicgfHwgbmV4dCA9PT0gJ2AnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLklOVkFMSURfQVJHVU1FTlQsICdQYXRoIGhhcyBpbnZhbGlkIGVzY2FwZSBzZXF1ZW5jZTogJyArIHBhdGgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY3VycmVudCArPSBuZXh0O1xyXG4gICAgICAgICAgICAgICAgaSArPSAyO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGMgPT09ICdgJykge1xyXG4gICAgICAgICAgICAgICAgaW5CYWNrdGlja3MgPSAhaW5CYWNrdGlja3M7XHJcbiAgICAgICAgICAgICAgICBpKys7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoYyA9PT0gJy4nICYmICFpbkJhY2t0aWNrcykge1xyXG4gICAgICAgICAgICAgICAgYWRkQ3VycmVudFNlZ21lbnQoKTtcclxuICAgICAgICAgICAgICAgIGkrKztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGN1cnJlbnQgKz0gYztcclxuICAgICAgICAgICAgICAgIGkrKztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBhZGRDdXJyZW50U2VnbWVudCgpO1xyXG4gICAgICAgIGlmIChpbkJhY2t0aWNrcykge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5JTlZBTElEX0FSR1VNRU5ULCAnVW50ZXJtaW5hdGVkIGAgaW4gcGF0aDogJyArIHBhdGgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbmV3IEZpZWxkUGF0aChzZWdtZW50cyk7XHJcbiAgICB9O1xyXG4gICAgRmllbGRQYXRoLkVNUFRZX1BBVEggPSBuZXcgRmllbGRQYXRoKFtdKTtcclxuICAgIHJldHVybiBGaWVsZFBhdGg7XHJcbn0oQmFzZVBhdGgpKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnZhciBEb2N1bWVudEtleSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIERvY3VtZW50S2V5KHBhdGgpIHtcclxuICAgICAgICB0aGlzLnBhdGggPSBwYXRoO1xyXG4gICAgICAgIGFzc2VydChEb2N1bWVudEtleS5pc0RvY3VtZW50S2V5KHBhdGgpLCAnSW52YWxpZCBEb2N1bWVudEtleSB3aXRoIGFuIG9kZCBudW1iZXIgb2Ygc2VnbWVudHM6ICcgK1xyXG4gICAgICAgICAgICBwYXRoLnRvQXJyYXkoKS5qb2luKCcvJykpO1xyXG4gICAgfVxyXG4gICAgLyoqIFJldHVybnMgdHJ1ZSBpZiB0aGUgZG9jdW1lbnQgaXMgaW4gdGhlIHNwZWNpZmllZCBjb2xsZWN0aW9uSWQuICovXHJcbiAgICBEb2N1bWVudEtleS5wcm90b3R5cGUuaGFzQ29sbGVjdGlvbklkID0gZnVuY3Rpb24gKGNvbGxlY3Rpb25JZCkge1xyXG4gICAgICAgIHJldHVybiAodGhpcy5wYXRoLmxlbmd0aCA+PSAyICYmXHJcbiAgICAgICAgICAgIHRoaXMucGF0aC5nZXQodGhpcy5wYXRoLmxlbmd0aCAtIDIpID09PSBjb2xsZWN0aW9uSWQpO1xyXG4gICAgfTtcclxuICAgIERvY3VtZW50S2V5LnByb3RvdHlwZS5pc0VxdWFsID0gZnVuY3Rpb24gKG90aGVyKSB7XHJcbiAgICAgICAgcmV0dXJuIChvdGhlciAhPT0gbnVsbCAmJiBSZXNvdXJjZVBhdGguY29tcGFyYXRvcih0aGlzLnBhdGgsIG90aGVyLnBhdGgpID09PSAwKTtcclxuICAgIH07XHJcbiAgICBEb2N1bWVudEtleS5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucGF0aC50b1N0cmluZygpO1xyXG4gICAgfTtcclxuICAgIERvY3VtZW50S2V5LmNvbXBhcmF0b3IgPSBmdW5jdGlvbiAoazEsIGsyKSB7XHJcbiAgICAgICAgcmV0dXJuIFJlc291cmNlUGF0aC5jb21wYXJhdG9yKGsxLnBhdGgsIGsyLnBhdGgpO1xyXG4gICAgfTtcclxuICAgIERvY3VtZW50S2V5LmlzRG9jdW1lbnRLZXkgPSBmdW5jdGlvbiAocGF0aCkge1xyXG4gICAgICAgIHJldHVybiBwYXRoLmxlbmd0aCAlIDIgPT09IDA7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGVzIGFuZCByZXR1cm5zIGEgbmV3IGRvY3VtZW50IGtleSB3aXRoIHRoZSBnaXZlbiBzZWdtZW50cy5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gcGF0aCBUaGUgc2VnbWVudHMgb2YgdGhlIHBhdGggdG8gdGhlIGRvY3VtZW50XHJcbiAgICAgKiBAcmV0dXJuIEEgbmV3IGluc3RhbmNlIG9mIERvY3VtZW50S2V5XHJcbiAgICAgKi9cclxuICAgIERvY3VtZW50S2V5LmZyb21TZWdtZW50cyA9IGZ1bmN0aW9uIChzZWdtZW50cykge1xyXG4gICAgICAgIHJldHVybiBuZXcgRG9jdW1lbnRLZXkobmV3IFJlc291cmNlUGF0aChzZWdtZW50cy5zbGljZSgpKSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGVzIGFuZCByZXR1cm5zIGEgbmV3IGRvY3VtZW50IGtleSB1c2luZyAnLycgdG8gc3BsaXQgdGhlIHN0cmluZyBpbnRvXHJcbiAgICAgKiBzZWdtZW50cy5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gcGF0aCBUaGUgc2xhc2gtc2VwYXJhdGVkIHBhdGggc3RyaW5nIHRvIHRoZSBkb2N1bWVudFxyXG4gICAgICogQHJldHVybiBBIG5ldyBpbnN0YW5jZSBvZiBEb2N1bWVudEtleVxyXG4gICAgICovXHJcbiAgICBEb2N1bWVudEtleS5mcm9tUGF0aFN0cmluZyA9IGZ1bmN0aW9uIChwYXRoKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBEb2N1bWVudEtleShSZXNvdXJjZVBhdGguZnJvbVN0cmluZyhwYXRoKSk7XHJcbiAgICB9O1xyXG4gICAgRG9jdW1lbnRLZXkuRU1QVFkgPSBuZXcgRG9jdW1lbnRLZXkobmV3IFJlc291cmNlUGF0aChbXSkpO1xyXG4gICAgcmV0dXJuIERvY3VtZW50S2V5O1xyXG59KCkpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxudmFyIERlZmVycmVkID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gRGVmZXJyZWQoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB0aGlzLnByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgIF90aGlzLnJlc29sdmUgPSByZXNvbHZlO1xyXG4gICAgICAgICAgICBfdGhpcy5yZWplY3QgPSByZWplY3Q7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gRGVmZXJyZWQ7XHJcbn0oKSk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogV2VsbGtub3duIFwidGltZXJcIiBJRHMgdXNlZCB3aGVuIHNjaGVkdWxpbmcgZGVsYXllZCBvcGVyYXRpb25zIG9uIHRoZVxyXG4gKiBBc3luY1F1ZXVlLiBUaGVzZSBJRHMgY2FuIHRoZW4gYmUgdXNlZCBmcm9tIHRlc3RzIHRvIGNoZWNrIGZvciB0aGUgcHJlc2VuY2VcclxuICogb2Ygb3BlcmF0aW9ucyBvciB0byBydW4gdGhlbSBlYXJseS5cclxuICpcclxuICogVGhlIHN0cmluZyB2YWx1ZXMgYXJlIHVzZWQgd2hlbiBlbmNvZGluZyB0aGVzZSB0aW1lciBJRHMgaW4gSlNPTiBzcGVjIHRlc3RzLlxyXG4gKi9cclxudmFyIFRpbWVySWQ7XHJcbihmdW5jdGlvbiAoVGltZXJJZCkge1xyXG4gICAgLyoqIEFsbCBjYW4gYmUgdXNlZCB3aXRoIHJ1bkRlbGF5ZWRPcGVyYXRpb25zRWFybHkoKSB0byBydW4gYWxsIHRpbWVycy4gKi9cclxuICAgIFRpbWVySWRbXCJBbGxcIl0gPSBcImFsbFwiO1xyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgZm9sbG93aW5nIDQgdGltZXJzIGFyZSB1c2VkIGluIHBlcnNpc3RlbnRfc3RyZWFtLnRzIGZvciB0aGUgbGlzdGVuIGFuZFxyXG4gICAgICogd3JpdGUgc3RyZWFtcy4gVGhlIFwiSWRsZVwiIHRpbWVyIGlzIHVzZWQgdG8gY2xvc2UgdGhlIHN0cmVhbSBkdWUgdG9cclxuICAgICAqIGluYWN0aXZpdHkuIFRoZSBcIkNvbm5lY3Rpb25CYWNrb2ZmXCIgdGltZXIgaXMgdXNlZCB0byByZXN0YXJ0IGEgc3RyZWFtIG9uY2VcclxuICAgICAqIHRoZSBhcHByb3ByaWF0ZSBiYWNrb2ZmIGRlbGF5IGhhcyBlbGFwc2VkLlxyXG4gICAgICovXHJcbiAgICBUaW1lcklkW1wiTGlzdGVuU3RyZWFtSWRsZVwiXSA9IFwibGlzdGVuX3N0cmVhbV9pZGxlXCI7XHJcbiAgICBUaW1lcklkW1wiTGlzdGVuU3RyZWFtQ29ubmVjdGlvbkJhY2tvZmZcIl0gPSBcImxpc3Rlbl9zdHJlYW1fY29ubmVjdGlvbl9iYWNrb2ZmXCI7XHJcbiAgICBUaW1lcklkW1wiV3JpdGVTdHJlYW1JZGxlXCJdID0gXCJ3cml0ZV9zdHJlYW1faWRsZVwiO1xyXG4gICAgVGltZXJJZFtcIldyaXRlU3RyZWFtQ29ubmVjdGlvbkJhY2tvZmZcIl0gPSBcIndyaXRlX3N0cmVhbV9jb25uZWN0aW9uX2JhY2tvZmZcIjtcclxuICAgIC8qKlxyXG4gICAgICogQSB0aW1lciB1c2VkIGluIG9ubGluZV9zdGF0ZV90cmFja2VyLnRzIHRvIHRyYW5zaXRpb24gZnJvbVxyXG4gICAgICogT25saW5lU3RhdGUuVW5rbm93biB0byBPZmZsaW5lIGFmdGVyIGEgc2V0IHRpbWVvdXQsIHJhdGhlciB0aGFuIHdhaXRpbmdcclxuICAgICAqIGluZGVmaW5pdGVseSBmb3Igc3VjY2VzcyBvciBmYWlsdXJlLlxyXG4gICAgICovXHJcbiAgICBUaW1lcklkW1wiT25saW5lU3RhdGVUaW1lb3V0XCJdID0gXCJvbmxpbmVfc3RhdGVfdGltZW91dFwiO1xyXG4gICAgLyoqXHJcbiAgICAgKiBBIHRpbWVyIHVzZWQgdG8gdXBkYXRlIHRoZSBjbGllbnQgbWV0YWRhdGEgaW4gSW5kZXhlZERiLCB3aGljaCBpcyB1c2VkXHJcbiAgICAgKiB0byBkZXRlcm1pbmUgdGhlIHByaW1hcnkgbGVhc2Vob2xkZXIuXHJcbiAgICAgKi9cclxuICAgIFRpbWVySWRbXCJDbGllbnRNZXRhZGF0YVJlZnJlc2hcIl0gPSBcImNsaWVudF9tZXRhZGF0YV9yZWZyZXNoXCI7XHJcbiAgICAvKiogQSB0aW1lciB1c2VkIHRvIHBlcmlvZGljYWxseSBhdHRlbXB0IExSVSBHYXJiYWdlIGNvbGxlY3Rpb24gKi9cclxuICAgIFRpbWVySWRbXCJMcnVHYXJiYWdlQ29sbGVjdGlvblwiXSA9IFwibHJ1X2dhcmJhZ2VfY29sbGVjdGlvblwiO1xyXG4gICAgLyoqXHJcbiAgICAgKiBBIHRpbWVyIHVzZWQgdG8gcmV0cnkgdHJhbnNhY3Rpb25zLiBTaW5jZSB0aGVyZSBjYW4gYmUgbXVsdGlwbGUgY29uY3VycmVudFxyXG4gICAgICogdHJhbnNhY3Rpb25zLCBtdWx0aXBsZSBvZiB0aGVzZSBtYXkgYmUgaW4gdGhlIHF1ZXVlIGF0IGEgZ2l2ZW4gdGltZS5cclxuICAgICAqL1xyXG4gICAgVGltZXJJZFtcIlJldHJ5VHJhbnNhY3Rpb25cIl0gPSBcInJldHJ5X3RyYW5zYWN0aW9uXCI7XHJcbn0pKFRpbWVySWQgfHwgKFRpbWVySWQgPSB7fSkpO1xyXG4vKipcclxuICogUmVwcmVzZW50cyBhbiBvcGVyYXRpb24gc2NoZWR1bGVkIHRvIGJlIHJ1biBpbiB0aGUgZnV0dXJlIG9uIGFuIEFzeW5jUXVldWUuXHJcbiAqXHJcbiAqIEl0IGlzIGNyZWF0ZWQgdmlhIERlbGF5ZWRPcGVyYXRpb24uY3JlYXRlQW5kU2NoZWR1bGUoKS5cclxuICpcclxuICogU3VwcG9ydHMgY2FuY2VsbGF0aW9uICh2aWEgY2FuY2VsKCkpIGFuZCBlYXJseSBleGVjdXRpb24gKHZpYSBza2lwRGVsYXkoKSkuXHJcbiAqL1xyXG52YXIgRGVsYXllZE9wZXJhdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIERlbGF5ZWRPcGVyYXRpb24oYXN5bmNRdWV1ZSwgdGltZXJJZCwgdGFyZ2V0VGltZU1zLCBvcCwgcmVtb3ZhbENhbGxiYWNrKSB7XHJcbiAgICAgICAgdGhpcy5hc3luY1F1ZXVlID0gYXN5bmNRdWV1ZTtcclxuICAgICAgICB0aGlzLnRpbWVySWQgPSB0aW1lcklkO1xyXG4gICAgICAgIHRoaXMudGFyZ2V0VGltZU1zID0gdGFyZ2V0VGltZU1zO1xyXG4gICAgICAgIHRoaXMub3AgPSBvcDtcclxuICAgICAgICB0aGlzLnJlbW92YWxDYWxsYmFjayA9IHJlbW92YWxDYWxsYmFjaztcclxuICAgICAgICB0aGlzLmRlZmVycmVkID0gbmV3IERlZmVycmVkKCk7XHJcbiAgICAgICAgdGhpcy50aGVuID0gdGhpcy5kZWZlcnJlZC5wcm9taXNlLnRoZW4uYmluZCh0aGlzLmRlZmVycmVkLnByb21pc2UpO1xyXG4gICAgICAgIHRoaXMuY2F0Y2ggPSB0aGlzLmRlZmVycmVkLnByb21pc2UuY2F0Y2guYmluZCh0aGlzLmRlZmVycmVkLnByb21pc2UpO1xyXG4gICAgICAgIC8vIEl0J3Mgbm9ybWFsIGZvciB0aGUgZGVmZXJyZWQgcHJvbWlzZSB0byBiZSBjYW5jZWxlZCAoZHVlIHRvIGNhbmNlbGxhdGlvbilcclxuICAgICAgICAvLyBhbmQgc28gd2UgYXR0YWNoIGEgZHVtbXkgY2F0Y2ggY2FsbGJhY2sgdG8gYXZvaWRcclxuICAgICAgICAvLyAnVW5oYW5kbGVkUHJvbWlzZVJlamVjdGlvbldhcm5pbmcnIGxvZyBzcGFtLlxyXG4gICAgICAgIHRoaXMuZGVmZXJyZWQucHJvbWlzZS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7IH0pO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGVzIGFuZCByZXR1cm5zIGEgRGVsYXllZE9wZXJhdGlvbiB0aGF0IGhhcyBiZWVuIHNjaGVkdWxlZCB0byBiZVxyXG4gICAgICogZXhlY3V0ZWQgb24gdGhlIHByb3ZpZGVkIGFzeW5jUXVldWUgYWZ0ZXIgdGhlIHByb3ZpZGVkIGRlbGF5TXMuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGFzeW5jUXVldWUgVGhlIHF1ZXVlIHRvIHNjaGVkdWxlIHRoZSBvcGVyYXRpb24gb24uXHJcbiAgICAgKiBAcGFyYW0gaWQgQSBUaW1lciBJRCBpZGVudGlmeWluZyB0aGUgdHlwZSBvZiBvcGVyYXRpb24gdGhpcyBpcy5cclxuICAgICAqIEBwYXJhbSBkZWxheU1zIFRoZSBkZWxheSAobXMpIGJlZm9yZSB0aGUgb3BlcmF0aW9uIHNob3VsZCBiZSBzY2hlZHVsZWQuXHJcbiAgICAgKiBAcGFyYW0gb3AgVGhlIG9wZXJhdGlvbiB0byBydW4uXHJcbiAgICAgKiBAcGFyYW0gcmVtb3ZhbENhbGxiYWNrIEEgY2FsbGJhY2sgdG8gYmUgY2FsbGVkIHN5bmNocm9ub3VzbHkgb25jZSB0aGVcclxuICAgICAqICAgb3BlcmF0aW9uIGlzIGV4ZWN1dGVkIG9yIGNhbmNlbGVkLCBub3RpZnlpbmcgdGhlIEFzeW5jUXVldWUgdG8gcmVtb3ZlIGl0XHJcbiAgICAgKiAgIGZyb20gaXRzIGRlbGF5ZWRPcGVyYXRpb25zIGxpc3QuXHJcbiAgICAgKiAgIFBPUlRJTkcgTk9URTogVGhpcyBleGlzdHMgdG8gcHJldmVudCBtYWtpbmcgcmVtb3ZlRGVsYXllZE9wZXJhdGlvbigpIGFuZFxyXG4gICAgICogICB0aGUgRGVsYXllZE9wZXJhdGlvbiBjbGFzcyBwdWJsaWMuXHJcbiAgICAgKi9cclxuICAgIERlbGF5ZWRPcGVyYXRpb24uY3JlYXRlQW5kU2NoZWR1bGUgPSBmdW5jdGlvbiAoYXN5bmNRdWV1ZSwgdGltZXJJZCwgZGVsYXlNcywgb3AsIHJlbW92YWxDYWxsYmFjaykge1xyXG4gICAgICAgIHZhciB0YXJnZXRUaW1lID0gRGF0ZS5ub3coKSArIGRlbGF5TXM7XHJcbiAgICAgICAgdmFyIGRlbGF5ZWRPcCA9IG5ldyBEZWxheWVkT3BlcmF0aW9uKGFzeW5jUXVldWUsIHRpbWVySWQsIHRhcmdldFRpbWUsIG9wLCByZW1vdmFsQ2FsbGJhY2spO1xyXG4gICAgICAgIGRlbGF5ZWRPcC5zdGFydChkZWxheU1zKTtcclxuICAgICAgICByZXR1cm4gZGVsYXllZE9wO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogU3RhcnRzIHRoZSB0aW1lci4gVGhpcyBpcyBjYWxsZWQgaW1tZWRpYXRlbHkgYWZ0ZXIgY29uc3RydWN0aW9uIGJ5XHJcbiAgICAgKiBjcmVhdGVBbmRTY2hlZHVsZSgpLlxyXG4gICAgICovXHJcbiAgICBEZWxheWVkT3BlcmF0aW9uLnByb3RvdHlwZS5zdGFydCA9IGZ1bmN0aW9uIChkZWxheU1zKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB0aGlzLnRpbWVySGFuZGxlID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5oYW5kbGVEZWxheUVsYXBzZWQoKTsgfSwgZGVsYXlNcyk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBRdWV1ZXMgdGhlIG9wZXJhdGlvbiB0byBydW4gaW1tZWRpYXRlbHkgKGlmIGl0IGhhc24ndCBhbHJlYWR5IGJlZW4gcnVuIG9yXHJcbiAgICAgKiBjYW5jZWxlZCkuXHJcbiAgICAgKi9cclxuICAgIERlbGF5ZWRPcGVyYXRpb24ucHJvdG90eXBlLnNraXBEZWxheSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5oYW5kbGVEZWxheUVsYXBzZWQoKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIENhbmNlbHMgdGhlIG9wZXJhdGlvbiBpZiBpdCBoYXNuJ3QgYWxyZWFkeSBiZWVuIGV4ZWN1dGVkIG9yIGNhbmNlbGVkLiBUaGVcclxuICAgICAqIHByb21pc2Ugd2lsbCBiZSByZWplY3RlZC5cclxuICAgICAqXHJcbiAgICAgKiBBcyBsb25nIGFzIHRoZSBvcGVyYXRpb24gaGFzIG5vdCB5ZXQgYmVlbiBydW4sIGNhbGxpbmcgY2FuY2VsKCkgcHJvdmlkZXMgYVxyXG4gICAgICogZ3VhcmFudGVlIHRoYXQgdGhlIG9wZXJhdGlvbiB3aWxsIG5vdCBiZSBydW4uXHJcbiAgICAgKi9cclxuICAgIERlbGF5ZWRPcGVyYXRpb24ucHJvdG90eXBlLmNhbmNlbCA9IGZ1bmN0aW9uIChyZWFzb24pIHtcclxuICAgICAgICBpZiAodGhpcy50aW1lckhhbmRsZSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aGlzLmNsZWFyVGltZW91dCgpO1xyXG4gICAgICAgICAgICB0aGlzLmRlZmVycmVkLnJlamVjdChuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5DQU5DRUxMRUQsICdPcGVyYXRpb24gY2FuY2VsbGVkJyArIChyZWFzb24gPyAnOiAnICsgcmVhc29uIDogJycpKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIERlbGF5ZWRPcGVyYXRpb24ucHJvdG90eXBlLmhhbmRsZURlbGF5RWxhcHNlZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKF90aGlzLnRpbWVySGFuZGxlICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5jbGVhclRpbWVvdXQoKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5vcCgpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5kZWZlcnJlZC5yZXNvbHZlKHJlc3VsdCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIERlbGF5ZWRPcGVyYXRpb24ucHJvdG90eXBlLmNsZWFyVGltZW91dCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAodGhpcy50aW1lckhhbmRsZSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aGlzLnJlbW92YWxDYWxsYmFjayh0aGlzKTtcclxuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMudGltZXJIYW5kbGUpO1xyXG4gICAgICAgICAgICB0aGlzLnRpbWVySGFuZGxlID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIERlbGF5ZWRPcGVyYXRpb247XHJcbn0oKSk7XHJcbnZhciBBc3luY1F1ZXVlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gQXN5bmNRdWV1ZSgpIHtcclxuICAgICAgICAvLyBUaGUgbGFzdCBwcm9taXNlIGluIHRoZSBxdWV1ZS5cclxuICAgICAgICB0aGlzLnRhaWwgPSBQcm9taXNlLnJlc29sdmUoKTtcclxuICAgICAgICAvLyBJcyB0aGlzIEFzeW5jUXVldWUgYmVpbmcgc2h1dCBkb3duPyBPbmNlIGl0IGlzIHNldCB0byB0cnVlLCBpdCB3aWxsIG5vdFxyXG4gICAgICAgIC8vIGJlIGNoYW5nZWQgYWdhaW4uXHJcbiAgICAgICAgdGhpcy5faXNTaHV0dGluZ0Rvd24gPSBmYWxzZTtcclxuICAgICAgICAvLyBPcGVyYXRpb25zIHNjaGVkdWxlZCB0byBiZSBxdWV1ZWQgaW4gdGhlIGZ1dHVyZS4gT3BlcmF0aW9ucyBhcmVcclxuICAgICAgICAvLyBhdXRvbWF0aWNhbGx5IHJlbW92ZWQgYWZ0ZXIgdGhleSBhcmUgcnVuIG9yIGNhbmNlbGVkLlxyXG4gICAgICAgIHRoaXMuZGVsYXllZE9wZXJhdGlvbnMgPSBbXTtcclxuICAgICAgICAvLyB2aXNpYmxlIGZvciB0ZXN0aW5nXHJcbiAgICAgICAgdGhpcy5mYWlsdXJlID0gbnVsbDtcclxuICAgICAgICAvLyBGbGFnIHNldCB3aGlsZSB0aGVyZSdzIGFuIG91dHN0YW5kaW5nIEFzeW5jUXVldWUgb3BlcmF0aW9uLCB1c2VkIGZvclxyXG4gICAgICAgIC8vIGFzc2VydGlvbiBzYW5pdHktY2hlY2tzLlxyXG4gICAgICAgIHRoaXMub3BlcmF0aW9uSW5Qcm9ncmVzcyA9IGZhbHNlO1xyXG4gICAgICAgIC8vIExpc3Qgb2YgVGltZXJJZHMgdG8gZmFzdC1mb3J3YXJkIGRlbGF5cyBmb3IuXHJcbiAgICAgICAgdGhpcy50aW1lcklkc1RvU2tpcCA9IFtdO1xyXG4gICAgfVxyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEFzeW5jUXVldWUucHJvdG90eXBlLCBcImlzU2h1dHRpbmdEb3duXCIsIHtcclxuICAgICAgICAvLyBJcyB0aGlzIEFzeW5jUXVldWUgYmVpbmcgc2h1dCBkb3duPyBJZiB0cnVlLCB0aGlzIGluc3RhbmNlIHdpbGwgbm90IGVucXVldWVcclxuICAgICAgICAvLyBhbnkgbmV3IG9wZXJhdGlvbnMsIFByb21pc2VzIGZyb20gZW5xdWV1ZSByZXF1ZXN0cyB3aWxsIG5vdCByZXNvbHZlLlxyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5faXNTaHV0dGluZ0Rvd247XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICAvKipcclxuICAgICAqIEFkZHMgYSBuZXcgb3BlcmF0aW9uIHRvIHRoZSBxdWV1ZSB3aXRob3V0IHdhaXRpbmcgZm9yIGl0IHRvIGNvbXBsZXRlIChpLmUuXHJcbiAgICAgKiB3ZSBpZ25vcmUgdGhlIFByb21pc2UgcmVzdWx0KS5cclxuICAgICAqL1xyXG4gICAgQXN5bmNRdWV1ZS5wcm90b3R5cGUuZW5xdWV1ZUFuZEZvcmdldCA9IGZ1bmN0aW9uIChvcCkge1xyXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZmxvYXRpbmctcHJvbWlzZXNcclxuICAgICAgICB0aGlzLmVucXVldWUob3ApO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmVnYXJkbGVzcyBpZiB0aGUgcXVldWUgaGFzIGluaXRpYWxpemVkIHNodXRkb3duLCBhZGRzIGEgbmV3IG9wZXJhdGlvbiB0byB0aGVcclxuICAgICAqIHF1ZXVlIHdpdGhvdXQgd2FpdGluZyBmb3IgaXQgdG8gY29tcGxldGUgKGkuZS4gd2UgaWdub3JlIHRoZSBQcm9taXNlIHJlc3VsdCkuXHJcbiAgICAgKi9cclxuICAgIEFzeW5jUXVldWUucHJvdG90eXBlLmVucXVldWVBbmRGb3JnZXRFdmVuQWZ0ZXJTaHV0ZG93biA9IGZ1bmN0aW9uIChvcCkge1xyXG4gICAgICAgIHRoaXMudmVyaWZ5Tm90RmFpbGVkKCk7XHJcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1mbG9hdGluZy1wcm9taXNlc1xyXG4gICAgICAgIHRoaXMuZW5xdWV1ZUludGVybmFsKG9wKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJlZ2FyZGxlc3MgaWYgdGhlIHF1ZXVlIGhhcyBpbml0aWFsaXplZCBzaHV0ZG93biwgYWRkcyBhIG5ldyBvcGVyYXRpb24gdG8gdGhlXHJcbiAgICAgKiBxdWV1ZS5cclxuICAgICAqL1xyXG4gICAgQXN5bmNRdWV1ZS5wcm90b3R5cGUuZW5xdWV1ZUV2ZW5BZnRlclNodXRkb3duID0gZnVuY3Rpb24gKG9wKSB7XHJcbiAgICAgICAgdGhpcy52ZXJpZnlOb3RGYWlsZWQoKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5lbnF1ZXVlSW50ZXJuYWwob3ApO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQWRkcyBhIG5ldyBvcGVyYXRpb24gdG8gdGhlIHF1ZXVlIGFuZCBpbml0aWFsaXplIHRoZSBzaHV0IGRvd24gb2YgdGhpcyBxdWV1ZS5cclxuICAgICAqIFJldHVybnMgYSBwcm9taXNlIHRoYXQgd2lsbCBiZSByZXNvbHZlZCB3aGVuIHRoZSBwcm9taXNlIHJldHVybmVkIGJ5IHRoZSBuZXdcclxuICAgICAqIG9wZXJhdGlvbiBpcyAod2l0aCBpdHMgdmFsdWUpLlxyXG4gICAgICogT25jZSB0aGlzIG1ldGhvZCBpcyBjYWxsZWQsIHRoZSBvbmx5IHBvc3NpYmxlIHdheSB0byByZXF1ZXN0IHJ1bm5pbmcgYW4gb3BlcmF0aW9uXHJcbiAgICAgKiBpcyB0aHJvdWdoIGBlbnF1ZXVlQW5kRm9yZ2V0RXZlbkFmdGVyU2h1dGRvd25gLlxyXG4gICAgICovXHJcbiAgICBBc3luY1F1ZXVlLnByb3RvdHlwZS5lbnF1ZXVlQW5kSW5pdGlhdGVTaHV0ZG93biA9IGZ1bmN0aW9uIChvcCkge1xyXG4gICAgICAgIHJldHVybiB0c2xpYi5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy52ZXJpZnlOb3RGYWlsZWQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEhdGhpcy5faXNTaHV0dGluZ0Rvd24pIHJldHVybiBbMyAvKmJyZWFrKi8sIDJdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9pc1NodXR0aW5nRG93biA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuZW5xdWV1ZUV2ZW5BZnRlclNodXRkb3duKG9wKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLmxhYmVsID0gMjtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6IHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBBZGRzIGEgbmV3IG9wZXJhdGlvbiB0byB0aGUgcXVldWUuIFJldHVybnMgYSBwcm9taXNlIHRoYXQgd2lsbCBiZSByZXNvbHZlZFxyXG4gICAgICogd2hlbiB0aGUgcHJvbWlzZSByZXR1cm5lZCBieSB0aGUgbmV3IG9wZXJhdGlvbiBpcyAod2l0aCBpdHMgdmFsdWUpLlxyXG4gICAgICovXHJcbiAgICBBc3luY1F1ZXVlLnByb3RvdHlwZS5lbnF1ZXVlID0gZnVuY3Rpb24gKG9wKSB7XHJcbiAgICAgICAgdGhpcy52ZXJpZnlOb3RGYWlsZWQoKTtcclxuICAgICAgICBpZiAodGhpcy5faXNTaHV0dGluZ0Rvd24pIHtcclxuICAgICAgICAgICAgLy8gUmV0dXJuIGEgUHJvbWlzZSB3aGljaCBuZXZlciByZXNvbHZlcy5cclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7IH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5lbnF1ZXVlSW50ZXJuYWwob3ApO1xyXG4gICAgfTtcclxuICAgIEFzeW5jUXVldWUucHJvdG90eXBlLmVucXVldWVJbnRlcm5hbCA9IGZ1bmN0aW9uIChvcCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIG5ld1RhaWwgPSB0aGlzLnRhaWwudGhlbihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIF90aGlzLm9wZXJhdGlvbkluUHJvZ3Jlc3MgPSB0cnVlO1xyXG4gICAgICAgICAgICByZXR1cm4gb3AoKVxyXG4gICAgICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlcnJvciQxKSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5mYWlsdXJlID0gZXJyb3IkMTtcclxuICAgICAgICAgICAgICAgIF90aGlzLm9wZXJhdGlvbkluUHJvZ3Jlc3MgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHZhciBtZXNzYWdlID0gZXJyb3IkMS5zdGFjayB8fCBlcnJvciQxLm1lc3NhZ2UgfHwgJyc7XHJcbiAgICAgICAgICAgICAgICBlcnJvcignSU5URVJOQUwgVU5IQU5ETEVEIEVSUk9SOiAnLCBtZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgIC8vIEVzY2FwZSB0aGUgcHJvbWlzZSBjaGFpbiBhbmQgdGhyb3cgdGhlIGVycm9yIGdsb2JhbGx5IHNvIHRoYXRcclxuICAgICAgICAgICAgICAgIC8vIGUuZy4gYW55IGdsb2JhbCBjcmFzaCByZXBvcnRpbmcgbGlicmFyeSBkZXRlY3RzIGFuZCByZXBvcnRzIGl0LlxyXG4gICAgICAgICAgICAgICAgLy8gKGJ1dCBub3QgZm9yIHNpbXVsYXRlZCBlcnJvcnMgaW4gb3VyIHRlc3RzIHNpbmNlIHRoaXMgYnJlYWtzIG1vY2hhKVxyXG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuaW5kZXhPZignRmlyZXN0b3JlIFRlc3QgU2ltdWxhdGVkIEVycm9yJykgPCAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IGVycm9yJDE7XHJcbiAgICAgICAgICAgICAgICAgICAgfSwgMCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBSZS10aHJvdyB0aGUgZXJyb3Igc28gdGhhdCB0aGlzLnRhaWwgYmVjb21lcyBhIHJlamVjdGVkIFByb21pc2UgYW5kXHJcbiAgICAgICAgICAgICAgICAvLyBhbGwgZnVydGhlciBhdHRlbXB0cyB0byBjaGFpbiAodmlhIC50aGVuKSB3aWxsIGp1c3Qgc2hvcnQtY2lyY3VpdFxyXG4gICAgICAgICAgICAgICAgLy8gYW5kIHJldHVybiB0aGUgcmVqZWN0ZWQgUHJvbWlzZS5cclxuICAgICAgICAgICAgICAgIHRocm93IGVycm9yJDE7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5vcGVyYXRpb25JblByb2dyZXNzID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLnRhaWwgPSBuZXdUYWlsO1xyXG4gICAgICAgIHJldHVybiBuZXdUYWlsO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogU2NoZWR1bGVzIGFuIG9wZXJhdGlvbiB0byBiZSBxdWV1ZWQgb24gdGhlIEFzeW5jUXVldWUgb25jZSB0aGUgc3BlY2lmaWVkXHJcbiAgICAgKiBgZGVsYXlNc2AgaGFzIGVsYXBzZWQuIFRoZSByZXR1cm5lZCBDYW5jZWxhYmxlUHJvbWlzZSBjYW4gYmUgdXNlZCB0byBjYW5jZWxcclxuICAgICAqIHRoZSBvcGVyYXRpb24gcHJpb3IgdG8gaXRzIHJ1bm5pbmcuXHJcbiAgICAgKi9cclxuICAgIEFzeW5jUXVldWUucHJvdG90eXBlLmVucXVldWVBZnRlckRlbGF5ID0gZnVuY3Rpb24gKHRpbWVySWQsIGRlbGF5TXMsIG9wKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB0aGlzLnZlcmlmeU5vdEZhaWxlZCgpO1xyXG4gICAgICAgIGFzc2VydChkZWxheU1zID49IDAsIFwiQXR0ZW1wdGVkIHRvIHNjaGVkdWxlIGFuIG9wZXJhdGlvbiB3aXRoIGEgbmVnYXRpdmUgZGVsYXkgb2YgXCIgKyBkZWxheU1zKTtcclxuICAgICAgICAvLyBGYXN0LWZvcndhcmQgZGVsYXlzIGZvciB0aW1lcklkcyB0aGF0IGhhdmUgYmVlbiBvdmVycmlkZW4uXHJcbiAgICAgICAgaWYgKHRoaXMudGltZXJJZHNUb1NraXAuaW5kZXhPZih0aW1lcklkKSA+IC0xKSB7XHJcbiAgICAgICAgICAgIGRlbGF5TXMgPSAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgZGVsYXllZE9wID0gRGVsYXllZE9wZXJhdGlvbi5jcmVhdGVBbmRTY2hlZHVsZSh0aGlzLCB0aW1lcklkLCBkZWxheU1zLCBvcCwgZnVuY3Rpb24gKHJlbW92ZWRPcCkge1xyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXMucmVtb3ZlRGVsYXllZE9wZXJhdGlvbihyZW1vdmVkT3ApO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuZGVsYXllZE9wZXJhdGlvbnMucHVzaChkZWxheWVkT3ApO1xyXG4gICAgICAgIHJldHVybiBkZWxheWVkT3A7XHJcbiAgICB9O1xyXG4gICAgQXN5bmNRdWV1ZS5wcm90b3R5cGUudmVyaWZ5Tm90RmFpbGVkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmZhaWx1cmUpIHtcclxuICAgICAgICAgICAgZmFpbCgnQXN5bmNRdWV1ZSBpcyBhbHJlYWR5IGZhaWxlZDogJyArXHJcbiAgICAgICAgICAgICAgICAodGhpcy5mYWlsdXJlLnN0YWNrIHx8IHRoaXMuZmFpbHVyZS5tZXNzYWdlKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogVmVyaWZpZXMgdGhlcmUncyBhbiBvcGVyYXRpb24gY3VycmVudGx5IGluLXByb2dyZXNzIG9uIHRoZSBBc3luY1F1ZXVlLlxyXG4gICAgICogVW5mb3J0dW5hdGVseSB3ZSBjYW4ndCB2ZXJpZnkgdGhhdCB0aGUgcnVubmluZyBjb2RlIGlzIGluIHRoZSBwcm9taXNlIGNoYWluXHJcbiAgICAgKiBvZiB0aGF0IG9wZXJhdGlvbiwgc28gdGhpcyBpc24ndCBhIGZvb2xwcm9vZiBjaGVjaywgYnV0IGl0IHNob3VsZCBiZSBlbm91Z2hcclxuICAgICAqIHRvIGNhdGNoIHNvbWUgYnVncy5cclxuICAgICAqL1xyXG4gICAgQXN5bmNRdWV1ZS5wcm90b3R5cGUudmVyaWZ5T3BlcmF0aW9uSW5Qcm9ncmVzcyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBhc3NlcnQodGhpcy5vcGVyYXRpb25JblByb2dyZXNzLCAndmVyaWZ5T3BJblByb2dyZXNzKCkgY2FsbGVkIHdoZW4gbm8gb3AgaW4gcHJvZ3Jlc3Mgb24gdGhpcyBxdWV1ZS4nKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFdhaXRzIHVudGlsIGFsbCBjdXJyZW50bHkgcXVldWVkIHRhc2tzIGFyZSBmaW5pc2hlZCBleGVjdXRpbmcuIERlbGF5ZWRcclxuICAgICAqIG9wZXJhdGlvbnMgYXJlIG5vdCBydW4uXHJcbiAgICAgKi9cclxuICAgIEFzeW5jUXVldWUucHJvdG90eXBlLmRyYWluID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vIEl0IHNob3VsZCBzdGlsbCBiZSBwb3NzaWJsZSB0byBkcmFpbiB0aGUgcXVldWUgYWZ0ZXIgaXQgaXMgc2h1dHRpbmcgZG93bi5cclxuICAgICAgICByZXR1cm4gdGhpcy5lbnF1ZXVlRXZlbkFmdGVyU2h1dGRvd24oZnVuY3Rpb24gKCkgeyByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7IH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogRm9yIFRlc3RzOiBEZXRlcm1pbmUgaWYgYSBkZWxheWVkIG9wZXJhdGlvbiB3aXRoIGEgcGFydGljdWxhciBUaW1lcklkXHJcbiAgICAgKiBleGlzdHMuXHJcbiAgICAgKi9cclxuICAgIEFzeW5jUXVldWUucHJvdG90eXBlLmNvbnRhaW5zRGVsYXllZE9wZXJhdGlvbiA9IGZ1bmN0aW9uICh0aW1lcklkKSB7XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHRoaXMuZGVsYXllZE9wZXJhdGlvbnM7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBvcCA9IF9hW19pXTtcclxuICAgICAgICAgICAgaWYgKG9wLnRpbWVySWQgPT09IHRpbWVySWQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEZvciBUZXN0czogUnVucyBzb21lIG9yIGFsbCBkZWxheWVkIG9wZXJhdGlvbnMgZWFybHkuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGxhc3RUaW1lcklkIERlbGF5ZWQgb3BlcmF0aW9ucyB1cCB0byBhbmQgaW5jbHVkaW5nIHRoaXMgVGltZXJJZCB3aWxsXHJcbiAgICAgKiAgYmUgZHJhaW5lZC4gVGhyb3dzIGlmIG5vIHN1Y2ggb3BlcmF0aW9uIGV4aXN0cy4gUGFzcyBUaW1lcklkLkFsbCB0byBydW5cclxuICAgICAqICBhbGwgZGVsYXllZCBvcGVyYXRpb25zLlxyXG4gICAgICogQHJldHVybnMgYSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgb25jZSBhbGwgb3BlcmF0aW9ucyBoYXZlIGJlZW4gcnVuLlxyXG4gICAgICovXHJcbiAgICBBc3luY1F1ZXVlLnByb3RvdHlwZS5ydW5EZWxheWVkT3BlcmF0aW9uc0Vhcmx5ID0gZnVuY3Rpb24gKGxhc3RUaW1lcklkKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICAvLyBOb3RlIHRoYXQgZHJhaW5pbmcgbWF5IGdlbmVyYXRlIG1vcmUgZGVsYXllZCBvcHMsIHNvIHdlIGRvIHRoYXQgZmlyc3QuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZHJhaW4oKS50aGVuKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgYXNzZXJ0KGxhc3RUaW1lcklkID09PSBUaW1lcklkLkFsbCB8fFxyXG4gICAgICAgICAgICAgICAgX3RoaXMuY29udGFpbnNEZWxheWVkT3BlcmF0aW9uKGxhc3RUaW1lcklkKSwgXCJBdHRlbXB0ZWQgdG8gZHJhaW4gdG8gbWlzc2luZyBvcGVyYXRpb24gXCIgKyBsYXN0VGltZXJJZCk7XHJcbiAgICAgICAgICAgIC8vIFJ1biBvcHMgaW4gdGhlIHNhbWUgb3JkZXIgdGhleSdkIHJ1biBpZiB0aGV5IHJhbiBuYXR1cmFsbHkuXHJcbiAgICAgICAgICAgIF90aGlzLmRlbGF5ZWRPcGVyYXRpb25zLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHsgcmV0dXJuIGEudGFyZ2V0VGltZU1zIC0gYi50YXJnZXRUaW1lTXM7IH0pO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gX3RoaXMuZGVsYXllZE9wZXJhdGlvbnM7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgb3AgPSBfYVtfaV07XHJcbiAgICAgICAgICAgICAgICBvcC5za2lwRGVsYXkoKTtcclxuICAgICAgICAgICAgICAgIGlmIChsYXN0VGltZXJJZCAhPT0gVGltZXJJZC5BbGwgJiYgb3AudGltZXJJZCA9PT0gbGFzdFRpbWVySWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXMuZHJhaW4oKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEZvciBUZXN0czogU2tpcCBhbGwgc3Vic2VxdWVudCBkZWxheXMgZm9yIGEgdGltZXIgaWQuXHJcbiAgICAgKi9cclxuICAgIEFzeW5jUXVldWUucHJvdG90eXBlLnNraXBEZWxheXNGb3JUaW1lcklkID0gZnVuY3Rpb24gKHRpbWVySWQpIHtcclxuICAgICAgICB0aGlzLnRpbWVySWRzVG9Ta2lwLnB1c2godGltZXJJZCk7XHJcbiAgICB9O1xyXG4gICAgLyoqIENhbGxlZCBvbmNlIGEgRGVsYXllZE9wZXJhdGlvbiBpcyBydW4gb3IgY2FuY2VsZWQuICovXHJcbiAgICBBc3luY1F1ZXVlLnByb3RvdHlwZS5yZW1vdmVEZWxheWVkT3BlcmF0aW9uID0gZnVuY3Rpb24gKG9wKSB7XHJcbiAgICAgICAgLy8gTk9URTogaW5kZXhPZiAvIHNsaWNlIGFyZSBPKG4pLCBidXQgZGVsYXllZE9wZXJhdGlvbnMgaXMgZXhwZWN0ZWQgdG8gYmUgc21hbGwuXHJcbiAgICAgICAgdmFyIGluZGV4ID0gdGhpcy5kZWxheWVkT3BlcmF0aW9ucy5pbmRleE9mKG9wKTtcclxuICAgICAgICBhc3NlcnQoaW5kZXggPj0gMCwgJ0RlbGF5ZWQgb3BlcmF0aW9uIG5vdCBmb3VuZC4nKTtcclxuICAgICAgICB0aGlzLmRlbGF5ZWRPcGVyYXRpb25zLnNwbGljZShpbmRleCwgMSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEFzeW5jUXVldWU7XHJcbn0oKSk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG52YXIgZXNjYXBlQ2hhciA9ICdcXHUwMDAxJztcclxudmFyIGVuY29kZWRTZXBhcmF0b3JDaGFyID0gJ1xcdTAwMDEnO1xyXG52YXIgZW5jb2RlZE51bCA9ICdcXHUwMDEwJztcclxudmFyIGVuY29kZWRFc2NhcGUgPSAnXFx1MDAxMSc7XHJcbi8qKlxyXG4gKiBFbmNvZGVzIGEgcmVzb3VyY2UgcGF0aCBpbnRvIGEgSW5kZXhlZERiLWNvbXBhdGlibGUgc3RyaW5nIGZvcm0uXHJcbiAqL1xyXG5mdW5jdGlvbiBlbmNvZGUocGF0aCkge1xyXG4gICAgdmFyIHJlc3VsdCA9ICcnO1xyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwYXRoLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgaWYgKHJlc3VsdC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdCA9IGVuY29kZVNlcGFyYXRvcihyZXN1bHQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXN1bHQgPSBlbmNvZGVTZWdtZW50KHBhdGguZ2V0KGkpLCByZXN1bHQpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGVuY29kZVNlcGFyYXRvcihyZXN1bHQpO1xyXG59XHJcbi8qKiBFbmNvZGVzIGEgc2luZ2xlIHNlZ21lbnQgb2YgYSByZXNvdXJjZSBwYXRoIGludG8gdGhlIGdpdmVuIHJlc3VsdCAqL1xyXG5mdW5jdGlvbiBlbmNvZGVTZWdtZW50KHNlZ21lbnQsIHJlc3VsdEJ1Zikge1xyXG4gICAgdmFyIHJlc3VsdCA9IHJlc3VsdEJ1ZjtcclxuICAgIHZhciBsZW5ndGggPSBzZWdtZW50Lmxlbmd0aDtcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcclxuICAgICAgICB2YXIgYyA9IHNlZ21lbnQuY2hhckF0KGkpO1xyXG4gICAgICAgIHN3aXRjaCAoYykge1xyXG4gICAgICAgICAgICBjYXNlICdcXDAnOlxyXG4gICAgICAgICAgICAgICAgcmVzdWx0ICs9IGVzY2FwZUNoYXIgKyBlbmNvZGVkTnVsO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgZXNjYXBlQ2hhcjpcclxuICAgICAgICAgICAgICAgIHJlc3VsdCArPSBlc2NhcGVDaGFyICsgZW5jb2RlZEVzY2FwZTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgcmVzdWx0ICs9IGM7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG4vKiogRW5jb2RlcyBhIHBhdGggc2VwYXJhdG9yIGludG8gdGhlIGdpdmVuIHJlc3VsdCAqL1xyXG5mdW5jdGlvbiBlbmNvZGVTZXBhcmF0b3IocmVzdWx0KSB7XHJcbiAgICByZXR1cm4gcmVzdWx0ICsgZXNjYXBlQ2hhciArIGVuY29kZWRTZXBhcmF0b3JDaGFyO1xyXG59XHJcbi8qKlxyXG4gKiBEZWNvZGVzIHRoZSBnaXZlbiBJbmRleGVkRGItY29tcGF0aWJsZSBzdHJpbmcgZm9ybSBvZiBhIHJlc291cmNlIHBhdGggaW50b1xyXG4gKiBhIFJlc291cmNlUGF0aCBpbnN0YW5jZS4gTm90ZSB0aGF0IHRoaXMgbWV0aG9kIGlzIG5vdCBzdWl0YWJsZSBmb3IgdXNlIHdpdGhcclxuICogZGVjb2RpbmcgcmVzb3VyY2UgbmFtZXMgZnJvbSB0aGUgc2VydmVyOyB0aG9zZSBhcmUgT25lIFBsYXRmb3JtIGZvcm1hdFxyXG4gKiBzdHJpbmdzLlxyXG4gKi9cclxuZnVuY3Rpb24gZGVjb2RlKHBhdGgpIHtcclxuICAgIC8vIEV2ZW50IHRoZSBlbXB0eSBwYXRoIG11c3QgZW5jb2RlIGFzIGEgcGF0aCBvZiBhdCBsZWFzdCBsZW5ndGggMi4gQSBwYXRoXHJcbiAgICAvLyB3aXRoIGV4YWN0bHkgMiBtdXN0IGJlIHRoZSBlbXB0eSBwYXRoLlxyXG4gICAgdmFyIGxlbmd0aCA9IHBhdGgubGVuZ3RoO1xyXG4gICAgYXNzZXJ0KGxlbmd0aCA+PSAyLCAnSW52YWxpZCBwYXRoICcgKyBwYXRoKTtcclxuICAgIGlmIChsZW5ndGggPT09IDIpIHtcclxuICAgICAgICBhc3NlcnQocGF0aC5jaGFyQXQoMCkgPT09IGVzY2FwZUNoYXIgJiYgcGF0aC5jaGFyQXQoMSkgPT09IGVuY29kZWRTZXBhcmF0b3JDaGFyLCAnTm9uLWVtcHR5IHBhdGggJyArIHBhdGggKyAnIGhhZCBsZW5ndGggMicpO1xyXG4gICAgICAgIHJldHVybiBSZXNvdXJjZVBhdGguRU1QVFlfUEFUSDtcclxuICAgIH1cclxuICAgIC8vIEVzY2FwZSBjaGFyYWN0ZXJzIGNhbm5vdCBleGlzdCBwYXN0IHRoZSBzZWNvbmQtdG8tbGFzdCBwb3NpdGlvbiBpbiB0aGVcclxuICAgIC8vIHNvdXJjZSB2YWx1ZS5cclxuICAgIHZhciBsYXN0UmVhc29uYWJsZUVzY2FwZUluZGV4ID0gbGVuZ3RoIC0gMjtcclxuICAgIHZhciBzZWdtZW50cyA9IFtdO1xyXG4gICAgdmFyIHNlZ21lbnRCdWlsZGVyID0gJyc7XHJcbiAgICBmb3IgKHZhciBzdGFydCA9IDA7IHN0YXJ0IDwgbGVuZ3RoOykge1xyXG4gICAgICAgIC8vIFRoZSBsYXN0IHR3byBjaGFyYWN0ZXJzIG9mIGEgdmFsaWQgZW5jb2RlZCBwYXRoIG11c3QgYmUgYSBzZXBhcmF0b3IsIHNvXHJcbiAgICAgICAgLy8gdGhlcmUgbXVzdCBiZSBhbiBlbmQgdG8gdGhpcyBzZWdtZW50LlxyXG4gICAgICAgIHZhciBlbmQgPSBwYXRoLmluZGV4T2YoZXNjYXBlQ2hhciwgc3RhcnQpO1xyXG4gICAgICAgIGlmIChlbmQgPCAwIHx8IGVuZCA+IGxhc3RSZWFzb25hYmxlRXNjYXBlSW5kZXgpIHtcclxuICAgICAgICAgICAgZmFpbCgnSW52YWxpZCBlbmNvZGVkIHJlc291cmNlIHBhdGg6IFwiJyArIHBhdGggKyAnXCInKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIG5leHQgPSBwYXRoLmNoYXJBdChlbmQgKyAxKTtcclxuICAgICAgICBzd2l0Y2ggKG5leHQpIHtcclxuICAgICAgICAgICAgY2FzZSBlbmNvZGVkU2VwYXJhdG9yQ2hhcjpcclxuICAgICAgICAgICAgICAgIHZhciBjdXJyZW50UGllY2UgPSBwYXRoLnN1YnN0cmluZyhzdGFydCwgZW5kKTtcclxuICAgICAgICAgICAgICAgIHZhciBzZWdtZW50ID0gdm9pZCAwO1xyXG4gICAgICAgICAgICAgICAgaWYgKHNlZ21lbnRCdWlsZGVyLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIEF2b2lkIGNvcHlpbmcgZm9yIHRoZSBjb21tb24gY2FzZSBvZiBhIHNlZ21lbnQgdGhhdCBleGNsdWRlcyBcXDBcclxuICAgICAgICAgICAgICAgICAgICAvLyBhbmQgXFwwMDFcclxuICAgICAgICAgICAgICAgICAgICBzZWdtZW50ID0gY3VycmVudFBpZWNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VnbWVudEJ1aWxkZXIgKz0gY3VycmVudFBpZWNlO1xyXG4gICAgICAgICAgICAgICAgICAgIHNlZ21lbnQgPSBzZWdtZW50QnVpbGRlcjtcclxuICAgICAgICAgICAgICAgICAgICBzZWdtZW50QnVpbGRlciA9ICcnO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgc2VnbWVudHMucHVzaChzZWdtZW50KTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIGVuY29kZWROdWw6XHJcbiAgICAgICAgICAgICAgICBzZWdtZW50QnVpbGRlciArPSBwYXRoLnN1YnN0cmluZyhzdGFydCwgZW5kKTtcclxuICAgICAgICAgICAgICAgIHNlZ21lbnRCdWlsZGVyICs9ICdcXDAnO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgZW5jb2RlZEVzY2FwZTpcclxuICAgICAgICAgICAgICAgIC8vIFRoZSBlc2NhcGUgY2hhcmFjdGVyIGNhbiBiZSB1c2VkIGluIHRoZSBvdXRwdXQgdG8gZW5jb2RlIGl0c2VsZi5cclxuICAgICAgICAgICAgICAgIHNlZ21lbnRCdWlsZGVyICs9IHBhdGguc3Vic3RyaW5nKHN0YXJ0LCBlbmQgKyAxKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgZmFpbCgnSW52YWxpZCBlbmNvZGVkIHJlc291cmNlIHBhdGg6IFwiJyArIHBhdGggKyAnXCInKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgc3RhcnQgPSBlbmQgKyAyO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG5ldyBSZXNvdXJjZVBhdGgoc2VnbWVudHMpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG52YXIgVGltZXN0YW1wID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gVGltZXN0YW1wKHNlY29uZHMsIG5hbm9zZWNvbmRzKSB7XHJcbiAgICAgICAgdGhpcy5zZWNvbmRzID0gc2Vjb25kcztcclxuICAgICAgICB0aGlzLm5hbm9zZWNvbmRzID0gbmFub3NlY29uZHM7XHJcbiAgICAgICAgaWYgKG5hbm9zZWNvbmRzIDwgMCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5JTlZBTElEX0FSR1VNRU5ULCAnVGltZXN0YW1wIG5hbm9zZWNvbmRzIG91dCBvZiByYW5nZTogJyArIG5hbm9zZWNvbmRzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG5hbm9zZWNvbmRzID49IDFlOSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5JTlZBTElEX0FSR1VNRU5ULCAnVGltZXN0YW1wIG5hbm9zZWNvbmRzIG91dCBvZiByYW5nZTogJyArIG5hbm9zZWNvbmRzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gTWlkbmlnaHQgYXQgdGhlIGJlZ2lubmluZyBvZiAxLzEvMSBpcyB0aGUgZWFybGllc3QgRmlyZXN0b3JlIHN1cHBvcnRzLlxyXG4gICAgICAgIGlmIChzZWNvbmRzIDwgLTYyMTM1NTk2ODAwKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLklOVkFMSURfQVJHVU1FTlQsICdUaW1lc3RhbXAgc2Vjb25kcyBvdXQgb2YgcmFuZ2U6ICcgKyBzZWNvbmRzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gVGhpcyB3aWxsIGJyZWFrIGluIHRoZSB5ZWFyIDEwLDAwMC5cclxuICAgICAgICBpZiAoc2Vjb25kcyA+PSAyNTM0MDIzMDA4MDApIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuSU5WQUxJRF9BUkdVTUVOVCwgJ1RpbWVzdGFtcCBzZWNvbmRzIG91dCBvZiByYW5nZTogJyArIHNlY29uZHMpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIFRpbWVzdGFtcC5ub3cgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIFRpbWVzdGFtcC5mcm9tTWlsbGlzKERhdGUubm93KCkpO1xyXG4gICAgfTtcclxuICAgIFRpbWVzdGFtcC5mcm9tRGF0ZSA9IGZ1bmN0aW9uIChkYXRlKSB7XHJcbiAgICAgICAgcmV0dXJuIFRpbWVzdGFtcC5mcm9tTWlsbGlzKGRhdGUuZ2V0VGltZSgpKTtcclxuICAgIH07XHJcbiAgICBUaW1lc3RhbXAuZnJvbU1pbGxpcyA9IGZ1bmN0aW9uIChtaWxsaXNlY29uZHMpIHtcclxuICAgICAgICB2YXIgc2Vjb25kcyA9IE1hdGguZmxvb3IobWlsbGlzZWNvbmRzIC8gMTAwMCk7XHJcbiAgICAgICAgdmFyIG5hbm9zID0gKG1pbGxpc2Vjb25kcyAtIHNlY29uZHMgKiAxMDAwKSAqIDFlNjtcclxuICAgICAgICByZXR1cm4gbmV3IFRpbWVzdGFtcChzZWNvbmRzLCBuYW5vcyk7XHJcbiAgICB9O1xyXG4gICAgVGltZXN0YW1wLnByb3RvdHlwZS50b0RhdGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBEYXRlKHRoaXMudG9NaWxsaXMoKSk7XHJcbiAgICB9O1xyXG4gICAgVGltZXN0YW1wLnByb3RvdHlwZS50b01pbGxpcyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zZWNvbmRzICogMTAwMCArIHRoaXMubmFub3NlY29uZHMgLyAxZTY7XHJcbiAgICB9O1xyXG4gICAgVGltZXN0YW1wLnByb3RvdHlwZS5fY29tcGFyZVRvID0gZnVuY3Rpb24gKG90aGVyKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuc2Vjb25kcyA9PT0gb3RoZXIuc2Vjb25kcykge1xyXG4gICAgICAgICAgICByZXR1cm4gcHJpbWl0aXZlQ29tcGFyYXRvcih0aGlzLm5hbm9zZWNvbmRzLCBvdGhlci5uYW5vc2Vjb25kcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBwcmltaXRpdmVDb21wYXJhdG9yKHRoaXMuc2Vjb25kcywgb3RoZXIuc2Vjb25kcyk7XHJcbiAgICB9O1xyXG4gICAgVGltZXN0YW1wLnByb3RvdHlwZS5pc0VxdWFsID0gZnVuY3Rpb24gKG90aGVyKSB7XHJcbiAgICAgICAgcmV0dXJuIChvdGhlci5zZWNvbmRzID09PSB0aGlzLnNlY29uZHMgJiYgb3RoZXIubmFub3NlY29uZHMgPT09IHRoaXMubmFub3NlY29uZHMpO1xyXG4gICAgfTtcclxuICAgIFRpbWVzdGFtcC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuICgnVGltZXN0YW1wKHNlY29uZHM9JyArXHJcbiAgICAgICAgICAgIHRoaXMuc2Vjb25kcyArXHJcbiAgICAgICAgICAgICcsIG5hbm9zZWNvbmRzPScgK1xyXG4gICAgICAgICAgICB0aGlzLm5hbm9zZWNvbmRzICtcclxuICAgICAgICAgICAgJyknKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gVGltZXN0YW1wO1xyXG59KCkpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEEgdmVyc2lvbiBvZiBhIGRvY3VtZW50IGluIEZpcmVzdG9yZS4gVGhpcyBjb3JyZXNwb25kcyB0byB0aGUgdmVyc2lvblxyXG4gKiB0aW1lc3RhbXAsIHN1Y2ggYXMgdXBkYXRlX3RpbWUgb3IgcmVhZF90aW1lLlxyXG4gKi9cclxudmFyIFNuYXBzaG90VmVyc2lvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFNuYXBzaG90VmVyc2lvbih0aW1lc3RhbXApIHtcclxuICAgICAgICB0aGlzLnRpbWVzdGFtcCA9IHRpbWVzdGFtcDtcclxuICAgIH1cclxuICAgIC8vIFRPRE8oYi8zNDE3NjM0NCk6IE9uY2Ugd2Ugbm8gbG9uZ2VyIG5lZWQgdG8gdXNlIHRoZSBvbGQgYWxwaGEgcHJvdG9zLFxyXG4gICAgLy8gZGVsZXRlIHRoaXMgY29uc3RydWN0b3IgYW5kIHVzZSBhIHRpbWVzdGFtcC1iYWNrZWQgdmVyc2lvbiBldmVyeXdoZXJlLlxyXG4gICAgU25hcHNob3RWZXJzaW9uLmZyb21NaWNyb3NlY29uZHMgPSBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICB2YXIgc2Vjb25kcyA9IE1hdGguZmxvb3IodmFsdWUgLyAxZTYpO1xyXG4gICAgICAgIHZhciBuYW5vcyA9ICh2YWx1ZSAlIDFlNikgKiAxZTM7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBTbmFwc2hvdFZlcnNpb24obmV3IFRpbWVzdGFtcChzZWNvbmRzLCBuYW5vcykpO1xyXG4gICAgfTtcclxuICAgIFNuYXBzaG90VmVyc2lvbi5mcm9tVGltZXN0YW1wID0gZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBTbmFwc2hvdFZlcnNpb24odmFsdWUpO1xyXG4gICAgfTtcclxuICAgIFNuYXBzaG90VmVyc2lvbi5mb3JEZWxldGVkRG9jID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBTbmFwc2hvdFZlcnNpb24uTUlOO1xyXG4gICAgfTtcclxuICAgIFNuYXBzaG90VmVyc2lvbi5wcm90b3R5cGUuY29tcGFyZVRvID0gZnVuY3Rpb24gKG90aGVyKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudGltZXN0YW1wLl9jb21wYXJlVG8ob3RoZXIudGltZXN0YW1wKTtcclxuICAgIH07XHJcbiAgICBTbmFwc2hvdFZlcnNpb24ucHJvdG90eXBlLmlzRXF1YWwgPSBmdW5jdGlvbiAob3RoZXIpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy50aW1lc3RhbXAuaXNFcXVhbChvdGhlci50aW1lc3RhbXApO1xyXG4gICAgfTtcclxuICAgIC8qKiBSZXR1cm5zIGEgbnVtYmVyIHJlcHJlc2VudGF0aW9uIG9mIHRoZSB2ZXJzaW9uIGZvciB1c2UgaW4gc3BlYyB0ZXN0cy4gKi9cclxuICAgIFNuYXBzaG90VmVyc2lvbi5wcm90b3R5cGUudG9NaWNyb3NlY29uZHMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy8gQ29udmVydCB0byBtaWNyb3NlY29uZHMuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMudGltZXN0YW1wLnNlY29uZHMgKiAxZTYgKyB0aGlzLnRpbWVzdGFtcC5uYW5vc2Vjb25kcyAvIDEwMDA7XHJcbiAgICB9O1xyXG4gICAgU25hcHNob3RWZXJzaW9uLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gJ1NuYXBzaG90VmVyc2lvbignICsgdGhpcy50aW1lc3RhbXAudG9TdHJpbmcoKSArICcpJztcclxuICAgIH07XHJcbiAgICBTbmFwc2hvdFZlcnNpb24ucHJvdG90eXBlLnRvVGltZXN0YW1wID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnRpbWVzdGFtcDtcclxuICAgIH07XHJcbiAgICBTbmFwc2hvdFZlcnNpb24uTUlOID0gbmV3IFNuYXBzaG90VmVyc2lvbihuZXcgVGltZXN0YW1wKDAsIDApKTtcclxuICAgIHJldHVybiBTbmFwc2hvdFZlcnNpb247XHJcbn0oKSk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vLyBBbiBpbW11dGFibGUgc29ydGVkIG1hcCBpbXBsZW1lbnRhdGlvbiwgYmFzZWQgb24gYSBMZWZ0LWxlYW5pbmcgUmVkLUJsYWNrXHJcbi8vIHRyZWUuXHJcbnZhciBTb3J0ZWRNYXAgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBTb3J0ZWRNYXAoY29tcGFyYXRvciwgcm9vdCkge1xyXG4gICAgICAgIHRoaXMuY29tcGFyYXRvciA9IGNvbXBhcmF0b3I7XHJcbiAgICAgICAgdGhpcy5yb290ID0gcm9vdCA/IHJvb3QgOiBMTFJCTm9kZS5FTVBUWTtcclxuICAgIH1cclxuICAgIC8vIFJldHVybnMgYSBjb3B5IG9mIHRoZSBtYXAsIHdpdGggdGhlIHNwZWNpZmllZCBrZXkvdmFsdWUgYWRkZWQgb3IgcmVwbGFjZWQuXHJcbiAgICBTb3J0ZWRNYXAucHJvdG90eXBlLmluc2VydCA9IGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBTb3J0ZWRNYXAodGhpcy5jb21wYXJhdG9yLCB0aGlzLnJvb3RcclxuICAgICAgICAgICAgLmluc2VydChrZXksIHZhbHVlLCB0aGlzLmNvbXBhcmF0b3IpXHJcbiAgICAgICAgICAgIC5jb3B5KG51bGwsIG51bGwsIExMUkJOb2RlLkJMQUNLLCBudWxsLCBudWxsKSk7XHJcbiAgICB9O1xyXG4gICAgLy8gUmV0dXJucyBhIGNvcHkgb2YgdGhlIG1hcCwgd2l0aCB0aGUgc3BlY2lmaWVkIGtleSByZW1vdmVkLlxyXG4gICAgU29ydGVkTWFwLnByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBTb3J0ZWRNYXAodGhpcy5jb21wYXJhdG9yLCB0aGlzLnJvb3RcclxuICAgICAgICAgICAgLnJlbW92ZShrZXksIHRoaXMuY29tcGFyYXRvcilcclxuICAgICAgICAgICAgLmNvcHkobnVsbCwgbnVsbCwgTExSQk5vZGUuQkxBQ0ssIG51bGwsIG51bGwpKTtcclxuICAgIH07XHJcbiAgICAvLyBSZXR1cm5zIHRoZSB2YWx1ZSBvZiB0aGUgbm9kZSB3aXRoIHRoZSBnaXZlbiBrZXksIG9yIG51bGwuXHJcbiAgICBTb3J0ZWRNYXAucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICB2YXIgbm9kZSA9IHRoaXMucm9vdDtcclxuICAgICAgICB3aGlsZSAoIW5vZGUuaXNFbXB0eSgpKSB7XHJcbiAgICAgICAgICAgIHZhciBjbXAgPSB0aGlzLmNvbXBhcmF0b3Ioa2V5LCBub2RlLmtleSk7XHJcbiAgICAgICAgICAgIGlmIChjbXAgPT09IDApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBub2RlLnZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGNtcCA8IDApIHtcclxuICAgICAgICAgICAgICAgIG5vZGUgPSBub2RlLmxlZnQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoY21wID4gMCkge1xyXG4gICAgICAgICAgICAgICAgbm9kZSA9IG5vZGUucmlnaHQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9O1xyXG4gICAgLy8gUmV0dXJucyB0aGUgaW5kZXggb2YgdGhlIGVsZW1lbnQgaW4gdGhpcyBzb3J0ZWQgbWFwLCBvciAtMSBpZiBpdCBkb2Vzbid0XHJcbiAgICAvLyBleGlzdC5cclxuICAgIFNvcnRlZE1hcC5wcm90b3R5cGUuaW5kZXhPZiA9IGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICAvLyBOdW1iZXIgb2Ygbm9kZXMgdGhhdCB3ZXJlIHBydW5lZCB3aGVuIGRlc2NlbmRpbmcgcmlnaHRcclxuICAgICAgICB2YXIgcHJ1bmVkTm9kZXMgPSAwO1xyXG4gICAgICAgIHZhciBub2RlID0gdGhpcy5yb290O1xyXG4gICAgICAgIHdoaWxlICghbm9kZS5pc0VtcHR5KCkpIHtcclxuICAgICAgICAgICAgdmFyIGNtcCA9IHRoaXMuY29tcGFyYXRvcihrZXksIG5vZGUua2V5KTtcclxuICAgICAgICAgICAgaWYgKGNtcCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHBydW5lZE5vZGVzICsgbm9kZS5sZWZ0LnNpemU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoY21wIDwgMCkge1xyXG4gICAgICAgICAgICAgICAgbm9kZSA9IG5vZGUubGVmdDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIENvdW50IGFsbCBub2RlcyBsZWZ0IG9mIHRoZSBub2RlIHBsdXMgdGhlIG5vZGUgaXRzZWxmXHJcbiAgICAgICAgICAgICAgICBwcnVuZWROb2RlcyArPSBub2RlLmxlZnQuc2l6ZSArIDE7XHJcbiAgICAgICAgICAgICAgICBub2RlID0gbm9kZS5yaWdodDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBOb2RlIG5vdCBmb3VuZFxyXG4gICAgICAgIHJldHVybiAtMTtcclxuICAgIH07XHJcbiAgICBTb3J0ZWRNYXAucHJvdG90eXBlLmlzRW1wdHkgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucm9vdC5pc0VtcHR5KCk7XHJcbiAgICB9O1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFNvcnRlZE1hcC5wcm90b3R5cGUsIFwic2l6ZVwiLCB7XHJcbiAgICAgICAgLy8gUmV0dXJucyB0aGUgdG90YWwgbnVtYmVyIG9mIG5vZGVzIGluIHRoZSBtYXAuXHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJvb3Quc2l6ZTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIC8vIFJldHVybnMgdGhlIG1pbmltdW0ga2V5IGluIHRoZSBtYXAuXHJcbiAgICBTb3J0ZWRNYXAucHJvdG90eXBlLm1pbktleSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5yb290Lm1pbktleSgpO1xyXG4gICAgfTtcclxuICAgIC8vIFJldHVybnMgdGhlIG1heGltdW0ga2V5IGluIHRoZSBtYXAuXHJcbiAgICBTb3J0ZWRNYXAucHJvdG90eXBlLm1heEtleSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5yb290Lm1heEtleSgpO1xyXG4gICAgfTtcclxuICAgIC8vIFRyYXZlcnNlcyB0aGUgbWFwIGluIGtleSBvcmRlciBhbmQgY2FsbHMgdGhlIHNwZWNpZmllZCBhY3Rpb24gZnVuY3Rpb25cclxuICAgIC8vIGZvciBlYWNoIGtleS92YWx1ZSBwYWlyLiBJZiBhY3Rpb24gcmV0dXJucyB0cnVlLCB0cmF2ZXJzYWwgaXMgYWJvcnRlZC5cclxuICAgIC8vIFJldHVybnMgdGhlIGZpcnN0IHRydXRoeSB2YWx1ZSByZXR1cm5lZCBieSBhY3Rpb24sIG9yIHRoZSBsYXN0IGZhbHNleVxyXG4gICAgLy8gdmFsdWUgcmV0dXJuZWQgYnkgYWN0aW9uLlxyXG4gICAgU29ydGVkTWFwLnByb3RvdHlwZS5pbm9yZGVyVHJhdmVyc2FsID0gZnVuY3Rpb24gKGFjdGlvbikge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnJvb3QuaW5vcmRlclRyYXZlcnNhbChhY3Rpb24pO1xyXG4gICAgfTtcclxuICAgIFNvcnRlZE1hcC5wcm90b3R5cGUuZm9yRWFjaCA9IGZ1bmN0aW9uIChmbikge1xyXG4gICAgICAgIHRoaXMuaW5vcmRlclRyYXZlcnNhbChmdW5jdGlvbiAoaywgdikge1xyXG4gICAgICAgICAgICBmbihrLCB2KTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIFNvcnRlZE1hcC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGRlc2NyaXB0aW9ucyA9IFtdO1xyXG4gICAgICAgIHRoaXMuaW5vcmRlclRyYXZlcnNhbChmdW5jdGlvbiAoaywgdikge1xyXG4gICAgICAgICAgICBkZXNjcmlwdGlvbnMucHVzaChrICsgXCI6XCIgKyB2KTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBcIntcIiArIGRlc2NyaXB0aW9ucy5qb2luKCcsICcpICsgXCJ9XCI7XHJcbiAgICB9O1xyXG4gICAgLy8gVHJhdmVyc2VzIHRoZSBtYXAgaW4gcmV2ZXJzZSBrZXkgb3JkZXIgYW5kIGNhbGxzIHRoZSBzcGVjaWZpZWQgYWN0aW9uXHJcbiAgICAvLyBmdW5jdGlvbiBmb3IgZWFjaCBrZXkvdmFsdWUgcGFpci4gSWYgYWN0aW9uIHJldHVybnMgdHJ1ZSwgdHJhdmVyc2FsIGlzXHJcbiAgICAvLyBhYm9ydGVkLlxyXG4gICAgLy8gUmV0dXJucyB0aGUgZmlyc3QgdHJ1dGh5IHZhbHVlIHJldHVybmVkIGJ5IGFjdGlvbiwgb3IgdGhlIGxhc3QgZmFsc2V5XHJcbiAgICAvLyB2YWx1ZSByZXR1cm5lZCBieSBhY3Rpb24uXHJcbiAgICBTb3J0ZWRNYXAucHJvdG90eXBlLnJldmVyc2VUcmF2ZXJzYWwgPSBmdW5jdGlvbiAoYWN0aW9uKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucm9vdC5yZXZlcnNlVHJhdmVyc2FsKGFjdGlvbik7XHJcbiAgICB9O1xyXG4gICAgLy8gUmV0dXJucyBhbiBpdGVyYXRvciBvdmVyIHRoZSBTb3J0ZWRNYXAuXHJcbiAgICBTb3J0ZWRNYXAucHJvdG90eXBlLmdldEl0ZXJhdG9yID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgU29ydGVkTWFwSXRlcmF0b3IodGhpcy5yb290LCBudWxsLCB0aGlzLmNvbXBhcmF0b3IsIGZhbHNlKTtcclxuICAgIH07XHJcbiAgICBTb3J0ZWRNYXAucHJvdG90eXBlLmdldEl0ZXJhdG9yRnJvbSA9IGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFNvcnRlZE1hcEl0ZXJhdG9yKHRoaXMucm9vdCwga2V5LCB0aGlzLmNvbXBhcmF0b3IsIGZhbHNlKTtcclxuICAgIH07XHJcbiAgICBTb3J0ZWRNYXAucHJvdG90eXBlLmdldFJldmVyc2VJdGVyYXRvciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFNvcnRlZE1hcEl0ZXJhdG9yKHRoaXMucm9vdCwgbnVsbCwgdGhpcy5jb21wYXJhdG9yLCB0cnVlKTtcclxuICAgIH07XHJcbiAgICBTb3J0ZWRNYXAucHJvdG90eXBlLmdldFJldmVyc2VJdGVyYXRvckZyb20gPSBmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBTb3J0ZWRNYXBJdGVyYXRvcih0aGlzLnJvb3QsIGtleSwgdGhpcy5jb21wYXJhdG9yLCB0cnVlKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gU29ydGVkTWFwO1xyXG59KCkpOyAvLyBlbmQgU29ydGVkTWFwXHJcbi8vIEFuIGl0ZXJhdG9yIG92ZXIgYW4gTExSQk5vZGUuXHJcbnZhciBTb3J0ZWRNYXBJdGVyYXRvciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFNvcnRlZE1hcEl0ZXJhdG9yKG5vZGUsIHN0YXJ0S2V5LCBjb21wYXJhdG9yLCBpc1JldmVyc2UpIHtcclxuICAgICAgICB0aGlzLmlzUmV2ZXJzZSA9IGlzUmV2ZXJzZTtcclxuICAgICAgICB0aGlzLm5vZGVTdGFjayA9IFtdO1xyXG4gICAgICAgIHZhciBjbXAgPSAxO1xyXG4gICAgICAgIHdoaWxlICghbm9kZS5pc0VtcHR5KCkpIHtcclxuICAgICAgICAgICAgY21wID0gc3RhcnRLZXkgPyBjb21wYXJhdG9yKG5vZGUua2V5LCBzdGFydEtleSkgOiAxO1xyXG4gICAgICAgICAgICAvLyBmbGlwIHRoZSBjb21wYXJpc29uIGlmIHdlJ3JlIGdvaW5nIGluIHJldmVyc2VcclxuICAgICAgICAgICAgaWYgKGlzUmV2ZXJzZSkge1xyXG4gICAgICAgICAgICAgICAgY21wICo9IC0xO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChjbXAgPCAwKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBUaGlzIG5vZGUgaXMgbGVzcyB0aGFuIG91ciBzdGFydCBrZXkuIGlnbm9yZSBpdFxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNSZXZlcnNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbm9kZSA9IG5vZGUubGVmdDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIG5vZGUgPSBub2RlLnJpZ2h0O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGNtcCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgLy8gVGhpcyBub2RlIGlzIGV4YWN0bHkgZXF1YWwgdG8gb3VyIHN0YXJ0IGtleS4gUHVzaCBpdCBvbiB0aGUgc3RhY2ssXHJcbiAgICAgICAgICAgICAgICAvLyBidXQgc3RvcCBpdGVyYXRpbmc7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm5vZGVTdGFjay5wdXNoKG5vZGUpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBUaGlzIG5vZGUgaXMgZ3JlYXRlciB0aGFuIG91ciBzdGFydCBrZXksIGFkZCBpdCB0byB0aGUgc3RhY2sgYW5kIG1vdmVcclxuICAgICAgICAgICAgICAgIC8vIHRvIHRoZSBuZXh0IG9uZVxyXG4gICAgICAgICAgICAgICAgdGhpcy5ub2RlU3RhY2sucHVzaChub2RlKTtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzUmV2ZXJzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG5vZGUgPSBub2RlLnJpZ2h0O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbm9kZSA9IG5vZGUubGVmdDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIFNvcnRlZE1hcEl0ZXJhdG9yLnByb3RvdHlwZS5nZXROZXh0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGFzc2VydCh0aGlzLm5vZGVTdGFjay5sZW5ndGggPiAwLCAnZ2V0TmV4dCgpIGNhbGxlZCBvbiBpdGVyYXRvciB3aGVuIGhhc05leHQoKSBpcyBmYWxzZS4nKTtcclxuICAgICAgICB2YXIgbm9kZSA9IHRoaXMubm9kZVN0YWNrLnBvcCgpO1xyXG4gICAgICAgIHZhciByZXN1bHQgPSB7IGtleTogbm9kZS5rZXksIHZhbHVlOiBub2RlLnZhbHVlIH07XHJcbiAgICAgICAgaWYgKHRoaXMuaXNSZXZlcnNlKSB7XHJcbiAgICAgICAgICAgIG5vZGUgPSBub2RlLmxlZnQ7XHJcbiAgICAgICAgICAgIHdoaWxlICghbm9kZS5pc0VtcHR5KCkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubm9kZVN0YWNrLnB1c2gobm9kZSk7XHJcbiAgICAgICAgICAgICAgICBub2RlID0gbm9kZS5yaWdodDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgbm9kZSA9IG5vZGUucmlnaHQ7XHJcbiAgICAgICAgICAgIHdoaWxlICghbm9kZS5pc0VtcHR5KCkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubm9kZVN0YWNrLnB1c2gobm9kZSk7XHJcbiAgICAgICAgICAgICAgICBub2RlID0gbm9kZS5sZWZ0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9O1xyXG4gICAgU29ydGVkTWFwSXRlcmF0b3IucHJvdG90eXBlLmhhc05leHQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubm9kZVN0YWNrLmxlbmd0aCA+IDA7XHJcbiAgICB9O1xyXG4gICAgU29ydGVkTWFwSXRlcmF0b3IucHJvdG90eXBlLnBlZWsgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMubm9kZVN0YWNrLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIG5vZGUgPSB0aGlzLm5vZGVTdGFja1t0aGlzLm5vZGVTdGFjay5sZW5ndGggLSAxXTtcclxuICAgICAgICByZXR1cm4geyBrZXk6IG5vZGUua2V5LCB2YWx1ZTogbm9kZS52YWx1ZSB9O1xyXG4gICAgfTtcclxuICAgIHJldHVybiBTb3J0ZWRNYXBJdGVyYXRvcjtcclxufSgpKTsgLy8gZW5kIFNvcnRlZE1hcEl0ZXJhdG9yXHJcbi8vIFJlcHJlc2VudHMgYSBub2RlIGluIGEgTGVmdC1sZWFuaW5nIFJlZC1CbGFjayB0cmVlLlxyXG52YXIgTExSQk5vZGUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBMTFJCTm9kZShrZXksIHZhbHVlLCBjb2xvciwgbGVmdCwgcmlnaHQpIHtcclxuICAgICAgICB0aGlzLmtleSA9IGtleTtcclxuICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XHJcbiAgICAgICAgdGhpcy5jb2xvciA9IGNvbG9yICE9IG51bGwgPyBjb2xvciA6IExMUkJOb2RlLlJFRDtcclxuICAgICAgICB0aGlzLmxlZnQgPSBsZWZ0ICE9IG51bGwgPyBsZWZ0IDogTExSQk5vZGUuRU1QVFk7XHJcbiAgICAgICAgdGhpcy5yaWdodCA9IHJpZ2h0ICE9IG51bGwgPyByaWdodCA6IExMUkJOb2RlLkVNUFRZO1xyXG4gICAgICAgIHRoaXMuc2l6ZSA9IHRoaXMubGVmdC5zaXplICsgMSArIHRoaXMucmlnaHQuc2l6ZTtcclxuICAgIH1cclxuICAgIC8vIFJldHVybnMgYSBjb3B5IG9mIHRoZSBjdXJyZW50IG5vZGUsIG9wdGlvbmFsbHkgcmVwbGFjaW5nIHBpZWNlcyBvZiBpdC5cclxuICAgIExMUkJOb2RlLnByb3RvdHlwZS5jb3B5ID0gZnVuY3Rpb24gKGtleSwgdmFsdWUsIGNvbG9yLCBsZWZ0LCByaWdodCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgTExSQk5vZGUoa2V5ICE9IG51bGwgPyBrZXkgOiB0aGlzLmtleSwgdmFsdWUgIT0gbnVsbCA/IHZhbHVlIDogdGhpcy52YWx1ZSwgY29sb3IgIT0gbnVsbCA/IGNvbG9yIDogdGhpcy5jb2xvciwgbGVmdCAhPSBudWxsID8gbGVmdCA6IHRoaXMubGVmdCwgcmlnaHQgIT0gbnVsbCA/IHJpZ2h0IDogdGhpcy5yaWdodCk7XHJcbiAgICB9O1xyXG4gICAgTExSQk5vZGUucHJvdG90eXBlLmlzRW1wdHkgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfTtcclxuICAgIC8vIFRyYXZlcnNlcyB0aGUgdHJlZSBpbiBrZXkgb3JkZXIgYW5kIGNhbGxzIHRoZSBzcGVjaWZpZWQgYWN0aW9uIGZ1bmN0aW9uXHJcbiAgICAvLyBmb3IgZWFjaCBub2RlLiBJZiBhY3Rpb24gcmV0dXJucyB0cnVlLCB0cmF2ZXJzYWwgaXMgYWJvcnRlZC5cclxuICAgIC8vIFJldHVybnMgdGhlIGZpcnN0IHRydXRoeSB2YWx1ZSByZXR1cm5lZCBieSBhY3Rpb24sIG9yIHRoZSBsYXN0IGZhbHNleVxyXG4gICAgLy8gdmFsdWUgcmV0dXJuZWQgYnkgYWN0aW9uLlxyXG4gICAgTExSQk5vZGUucHJvdG90eXBlLmlub3JkZXJUcmF2ZXJzYWwgPSBmdW5jdGlvbiAoYWN0aW9uKSB7XHJcbiAgICAgICAgcmV0dXJuICh0aGlzLmxlZnQuaW5vcmRlclRyYXZlcnNhbChhY3Rpb24pIHx8XHJcbiAgICAgICAgICAgIGFjdGlvbih0aGlzLmtleSwgdGhpcy52YWx1ZSkgfHxcclxuICAgICAgICAgICAgdGhpcy5yaWdodC5pbm9yZGVyVHJhdmVyc2FsKGFjdGlvbikpO1xyXG4gICAgfTtcclxuICAgIC8vIFRyYXZlcnNlcyB0aGUgdHJlZSBpbiByZXZlcnNlIGtleSBvcmRlciBhbmQgY2FsbHMgdGhlIHNwZWNpZmllZCBhY3Rpb25cclxuICAgIC8vIGZ1bmN0aW9uIGZvciBlYWNoIG5vZGUuIElmIGFjdGlvbiByZXR1cm5zIHRydWUsIHRyYXZlcnNhbCBpcyBhYm9ydGVkLlxyXG4gICAgLy8gUmV0dXJucyB0aGUgZmlyc3QgdHJ1dGh5IHZhbHVlIHJldHVybmVkIGJ5IGFjdGlvbiwgb3IgdGhlIGxhc3QgZmFsc2V5XHJcbiAgICAvLyB2YWx1ZSByZXR1cm5lZCBieSBhY3Rpb24uXHJcbiAgICBMTFJCTm9kZS5wcm90b3R5cGUucmV2ZXJzZVRyYXZlcnNhbCA9IGZ1bmN0aW9uIChhY3Rpb24pIHtcclxuICAgICAgICByZXR1cm4gKHRoaXMucmlnaHQucmV2ZXJzZVRyYXZlcnNhbChhY3Rpb24pIHx8XHJcbiAgICAgICAgICAgIGFjdGlvbih0aGlzLmtleSwgdGhpcy52YWx1ZSkgfHxcclxuICAgICAgICAgICAgdGhpcy5sZWZ0LnJldmVyc2VUcmF2ZXJzYWwoYWN0aW9uKSk7XHJcbiAgICB9O1xyXG4gICAgLy8gUmV0dXJucyB0aGUgbWluaW11bSBub2RlIGluIHRoZSB0cmVlLlxyXG4gICAgTExSQk5vZGUucHJvdG90eXBlLm1pbiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAodGhpcy5sZWZ0LmlzRW1wdHkoKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmxlZnQubWluKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8vIFJldHVybnMgdGhlIG1heGltdW0ga2V5IGluIHRoZSB0cmVlLlxyXG4gICAgTExSQk5vZGUucHJvdG90eXBlLm1pbktleSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5taW4oKS5rZXk7XHJcbiAgICB9O1xyXG4gICAgLy8gUmV0dXJucyB0aGUgbWF4aW11bSBrZXkgaW4gdGhlIHRyZWUuXHJcbiAgICBMTFJCTm9kZS5wcm90b3R5cGUubWF4S2V5ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICh0aGlzLnJpZ2h0LmlzRW1wdHkoKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5rZXk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yaWdodC5tYXhLZXkoKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLy8gUmV0dXJucyBuZXcgdHJlZSwgd2l0aCB0aGUga2V5L3ZhbHVlIGFkZGVkLlxyXG4gICAgTExSQk5vZGUucHJvdG90eXBlLmluc2VydCA9IGZ1bmN0aW9uIChrZXksIHZhbHVlLCBjb21wYXJhdG9yKSB7XHJcbiAgICAgICAgdmFyIG4gPSB0aGlzO1xyXG4gICAgICAgIHZhciBjbXAgPSBjb21wYXJhdG9yKGtleSwgbi5rZXkpO1xyXG4gICAgICAgIGlmIChjbXAgPCAwKSB7XHJcbiAgICAgICAgICAgIG4gPSBuLmNvcHkobnVsbCwgbnVsbCwgbnVsbCwgbi5sZWZ0Lmluc2VydChrZXksIHZhbHVlLCBjb21wYXJhdG9yKSwgbnVsbCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGNtcCA9PT0gMCkge1xyXG4gICAgICAgICAgICBuID0gbi5jb3B5KG51bGwsIHZhbHVlLCBudWxsLCBudWxsLCBudWxsKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIG4gPSBuLmNvcHkobnVsbCwgbnVsbCwgbnVsbCwgbnVsbCwgbi5yaWdodC5pbnNlcnQoa2V5LCB2YWx1ZSwgY29tcGFyYXRvcikpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbi5maXhVcCgpO1xyXG4gICAgfTtcclxuICAgIExMUkJOb2RlLnByb3RvdHlwZS5yZW1vdmVNaW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMubGVmdC5pc0VtcHR5KCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIExMUkJOb2RlLkVNUFRZO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgbiA9IHRoaXM7XHJcbiAgICAgICAgaWYgKCFuLmxlZnQuaXNSZWQoKSAmJiAhbi5sZWZ0LmxlZnQuaXNSZWQoKSkge1xyXG4gICAgICAgICAgICBuID0gbi5tb3ZlUmVkTGVmdCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBuID0gbi5jb3B5KG51bGwsIG51bGwsIG51bGwsIG4ubGVmdC5yZW1vdmVNaW4oKSwgbnVsbCk7XHJcbiAgICAgICAgcmV0dXJuIG4uZml4VXAoKTtcclxuICAgIH07XHJcbiAgICAvLyBSZXR1cm5zIG5ldyB0cmVlLCB3aXRoIHRoZSBzcGVjaWZpZWQgaXRlbSByZW1vdmVkLlxyXG4gICAgTExSQk5vZGUucHJvdG90eXBlLnJlbW92ZSA9IGZ1bmN0aW9uIChrZXksIGNvbXBhcmF0b3IpIHtcclxuICAgICAgICB2YXIgc21hbGxlc3Q7XHJcbiAgICAgICAgdmFyIG4gPSB0aGlzO1xyXG4gICAgICAgIGlmIChjb21wYXJhdG9yKGtleSwgbi5rZXkpIDwgMCkge1xyXG4gICAgICAgICAgICBpZiAoIW4ubGVmdC5pc0VtcHR5KCkgJiYgIW4ubGVmdC5pc1JlZCgpICYmICFuLmxlZnQubGVmdC5pc1JlZCgpKSB7XHJcbiAgICAgICAgICAgICAgICBuID0gbi5tb3ZlUmVkTGVmdCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG4gPSBuLmNvcHkobnVsbCwgbnVsbCwgbnVsbCwgbi5sZWZ0LnJlbW92ZShrZXksIGNvbXBhcmF0b3IpLCBudWxsKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGlmIChuLmxlZnQuaXNSZWQoKSkge1xyXG4gICAgICAgICAgICAgICAgbiA9IG4ucm90YXRlUmlnaHQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoIW4ucmlnaHQuaXNFbXB0eSgpICYmICFuLnJpZ2h0LmlzUmVkKCkgJiYgIW4ucmlnaHQubGVmdC5pc1JlZCgpKSB7XHJcbiAgICAgICAgICAgICAgICBuID0gbi5tb3ZlUmVkUmlnaHQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoY29tcGFyYXRvcihrZXksIG4ua2V5KSA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKG4ucmlnaHQuaXNFbXB0eSgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIExMUkJOb2RlLkVNUFRZO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc21hbGxlc3QgPSBuLnJpZ2h0Lm1pbigpO1xyXG4gICAgICAgICAgICAgICAgICAgIG4gPSBuLmNvcHkoc21hbGxlc3Qua2V5LCBzbWFsbGVzdC52YWx1ZSwgbnVsbCwgbnVsbCwgbi5yaWdodC5yZW1vdmVNaW4oKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbiA9IG4uY29weShudWxsLCBudWxsLCBudWxsLCBudWxsLCBuLnJpZ2h0LnJlbW92ZShrZXksIGNvbXBhcmF0b3IpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG4uZml4VXAoKTtcclxuICAgIH07XHJcbiAgICBMTFJCTm9kZS5wcm90b3R5cGUuaXNSZWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY29sb3I7XHJcbiAgICB9O1xyXG4gICAgLy8gUmV0dXJucyBuZXcgdHJlZSBhZnRlciBwZXJmb3JtaW5nIGFueSBuZWVkZWQgcm90YXRpb25zLlxyXG4gICAgTExSQk5vZGUucHJvdG90eXBlLmZpeFVwID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBuID0gdGhpcztcclxuICAgICAgICBpZiAobi5yaWdodC5pc1JlZCgpICYmICFuLmxlZnQuaXNSZWQoKSkge1xyXG4gICAgICAgICAgICBuID0gbi5yb3RhdGVMZWZ0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChuLmxlZnQuaXNSZWQoKSAmJiBuLmxlZnQubGVmdC5pc1JlZCgpKSB7XHJcbiAgICAgICAgICAgIG4gPSBuLnJvdGF0ZVJpZ2h0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChuLmxlZnQuaXNSZWQoKSAmJiBuLnJpZ2h0LmlzUmVkKCkpIHtcclxuICAgICAgICAgICAgbiA9IG4uY29sb3JGbGlwKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBuO1xyXG4gICAgfTtcclxuICAgIExMUkJOb2RlLnByb3RvdHlwZS5tb3ZlUmVkTGVmdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgbiA9IHRoaXMuY29sb3JGbGlwKCk7XHJcbiAgICAgICAgaWYgKG4ucmlnaHQubGVmdC5pc1JlZCgpKSB7XHJcbiAgICAgICAgICAgIG4gPSBuLmNvcHkobnVsbCwgbnVsbCwgbnVsbCwgbnVsbCwgbi5yaWdodC5yb3RhdGVSaWdodCgpKTtcclxuICAgICAgICAgICAgbiA9IG4ucm90YXRlTGVmdCgpO1xyXG4gICAgICAgICAgICBuID0gbi5jb2xvckZsaXAoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG47XHJcbiAgICB9O1xyXG4gICAgTExSQk5vZGUucHJvdG90eXBlLm1vdmVSZWRSaWdodCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgbiA9IHRoaXMuY29sb3JGbGlwKCk7XHJcbiAgICAgICAgaWYgKG4ubGVmdC5sZWZ0LmlzUmVkKCkpIHtcclxuICAgICAgICAgICAgbiA9IG4ucm90YXRlUmlnaHQoKTtcclxuICAgICAgICAgICAgbiA9IG4uY29sb3JGbGlwKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBuO1xyXG4gICAgfTtcclxuICAgIExMUkJOb2RlLnByb3RvdHlwZS5yb3RhdGVMZWZ0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBubCA9IHRoaXMuY29weShudWxsLCBudWxsLCBMTFJCTm9kZS5SRUQsIG51bGwsIHRoaXMucmlnaHQubGVmdCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucmlnaHQuY29weShudWxsLCBudWxsLCB0aGlzLmNvbG9yLCBubCwgbnVsbCk7XHJcbiAgICB9O1xyXG4gICAgTExSQk5vZGUucHJvdG90eXBlLnJvdGF0ZVJpZ2h0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBuciA9IHRoaXMuY29weShudWxsLCBudWxsLCBMTFJCTm9kZS5SRUQsIHRoaXMubGVmdC5yaWdodCwgbnVsbCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubGVmdC5jb3B5KG51bGwsIG51bGwsIHRoaXMuY29sb3IsIG51bGwsIG5yKTtcclxuICAgIH07XHJcbiAgICBMTFJCTm9kZS5wcm90b3R5cGUuY29sb3JGbGlwID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBsZWZ0ID0gdGhpcy5sZWZ0LmNvcHkobnVsbCwgbnVsbCwgIXRoaXMubGVmdC5jb2xvciwgbnVsbCwgbnVsbCk7XHJcbiAgICAgICAgdmFyIHJpZ2h0ID0gdGhpcy5yaWdodC5jb3B5KG51bGwsIG51bGwsICF0aGlzLnJpZ2h0LmNvbG9yLCBudWxsLCBudWxsKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5jb3B5KG51bGwsIG51bGwsICF0aGlzLmNvbG9yLCBsZWZ0LCByaWdodCk7XHJcbiAgICB9O1xyXG4gICAgLy8gRm9yIHRlc3RpbmcuXHJcbiAgICBMTFJCTm9kZS5wcm90b3R5cGUuY2hlY2tNYXhEZXB0aCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgYmxhY2tEZXB0aCA9IHRoaXMuY2hlY2soKTtcclxuICAgICAgICBpZiAoTWF0aC5wb3coMi4wLCBibGFja0RlcHRoKSA8PSB0aGlzLnNpemUgKyAxKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvLyBJbiBhIGJhbGFuY2VkIFJCIHRyZWUsIHRoZSBibGFjay1kZXB0aCAobnVtYmVyIG9mIGJsYWNrIG5vZGVzKSBmcm9tIHJvb3QgdG9cclxuICAgIC8vIGxlYXZlcyBpcyBlcXVhbCBvbiBib3RoIHNpZGVzLiAgVGhpcyBmdW5jdGlvbiB2ZXJpZmllcyB0aGF0IG9yIGFzc2VydHMuXHJcbiAgICBMTFJCTm9kZS5wcm90b3R5cGUuY2hlY2sgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNSZWQoKSAmJiB0aGlzLmxlZnQuaXNSZWQoKSkge1xyXG4gICAgICAgICAgICB0aHJvdyBmYWlsKCdSZWQgbm9kZSBoYXMgcmVkIGNoaWxkKCcgKyB0aGlzLmtleSArICcsJyArIHRoaXMudmFsdWUgKyAnKScpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5yaWdodC5pc1JlZCgpKSB7XHJcbiAgICAgICAgICAgIHRocm93IGZhaWwoJ1JpZ2h0IGNoaWxkIG9mICgnICsgdGhpcy5rZXkgKyAnLCcgKyB0aGlzLnZhbHVlICsgJykgaXMgcmVkJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBibGFja0RlcHRoID0gdGhpcy5sZWZ0LmNoZWNrKCk7XHJcbiAgICAgICAgaWYgKGJsYWNrRGVwdGggIT09IHRoaXMucmlnaHQuY2hlY2soKSkge1xyXG4gICAgICAgICAgICB0aHJvdyBmYWlsKCdCbGFjayBkZXB0aHMgZGlmZmVyJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gYmxhY2tEZXB0aCArICh0aGlzLmlzUmVkKCkgPyAwIDogMSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8vIEVtcHR5IG5vZGUgaXMgc2hhcmVkIGJldHdlZW4gYWxsIExMUkIgdHJlZXMuXHJcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG4gICAgTExSQk5vZGUuRU1QVFkgPSBudWxsO1xyXG4gICAgTExSQk5vZGUuUkVEID0gdHJ1ZTtcclxuICAgIExMUkJOb2RlLkJMQUNLID0gZmFsc2U7XHJcbiAgICByZXR1cm4gTExSQk5vZGU7XHJcbn0oKSk7IC8vIGVuZCBMTFJCTm9kZVxyXG4vLyBSZXByZXNlbnRzIGFuIGVtcHR5IG5vZGUgKGEgbGVhZiBub2RlIGluIHRoZSBSZWQtQmxhY2sgVHJlZSkuXHJcbnZhciBMTFJCRW1wdHlOb2RlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gTExSQkVtcHR5Tm9kZSgpIHtcclxuICAgICAgICB0aGlzLnNpemUgPSAwO1xyXG4gICAgfVxyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KExMUkJFbXB0eU5vZGUucHJvdG90eXBlLCBcImtleVwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHRocm93IGZhaWwoJ0xMUkJFbXB0eU5vZGUgaGFzIG5vIGtleS4nKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShMTFJCRW1wdHlOb2RlLnByb3RvdHlwZSwgXCJ2YWx1ZVwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHRocm93IGZhaWwoJ0xMUkJFbXB0eU5vZGUgaGFzIG5vIHZhbHVlLicpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KExMUkJFbXB0eU5vZGUucHJvdG90eXBlLCBcImNvbG9yXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdGhyb3cgZmFpbCgnTExSQkVtcHR5Tm9kZSBoYXMgbm8gY29sb3IuJyk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTExSQkVtcHR5Tm9kZS5wcm90b3R5cGUsIFwibGVmdFwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHRocm93IGZhaWwoJ0xMUkJFbXB0eU5vZGUgaGFzIG5vIGxlZnQgY2hpbGQuJyk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTExSQkVtcHR5Tm9kZS5wcm90b3R5cGUsIFwicmlnaHRcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB0aHJvdyBmYWlsKCdMTFJCRW1wdHlOb2RlIGhhcyBubyByaWdodCBjaGlsZC4nKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIC8vIFJldHVybnMgYSBjb3B5IG9mIHRoZSBjdXJyZW50IG5vZGUuXHJcbiAgICBMTFJCRW1wdHlOb2RlLnByb3RvdHlwZS5jb3B5ID0gZnVuY3Rpb24gKGtleSwgdmFsdWUsIGNvbG9yLCBsZWZ0LCByaWdodCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfTtcclxuICAgIC8vIFJldHVybnMgYSBjb3B5IG9mIHRoZSB0cmVlLCB3aXRoIHRoZSBzcGVjaWZpZWQga2V5L3ZhbHVlIGFkZGVkLlxyXG4gICAgTExSQkVtcHR5Tm9kZS5wcm90b3R5cGUuaW5zZXJ0ID0gZnVuY3Rpb24gKGtleSwgdmFsdWUsIGNvbXBhcmF0b3IpIHtcclxuICAgICAgICByZXR1cm4gbmV3IExMUkJOb2RlKGtleSwgdmFsdWUpO1xyXG4gICAgfTtcclxuICAgIC8vIFJldHVybnMgYSBjb3B5IG9mIHRoZSB0cmVlLCB3aXRoIHRoZSBzcGVjaWZpZWQga2V5IHJlbW92ZWQuXHJcbiAgICBMTFJCRW1wdHlOb2RlLnByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbiAoa2V5LCBjb21wYXJhdG9yKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9O1xyXG4gICAgTExSQkVtcHR5Tm9kZS5wcm90b3R5cGUuaXNFbXB0eSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH07XHJcbiAgICBMTFJCRW1wdHlOb2RlLnByb3RvdHlwZS5pbm9yZGVyVHJhdmVyc2FsID0gZnVuY3Rpb24gKGFjdGlvbikge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH07XHJcbiAgICBMTFJCRW1wdHlOb2RlLnByb3RvdHlwZS5yZXZlcnNlVHJhdmVyc2FsID0gZnVuY3Rpb24gKGFjdGlvbikge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH07XHJcbiAgICBMTFJCRW1wdHlOb2RlLnByb3RvdHlwZS5taW5LZXkgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9O1xyXG4gICAgTExSQkVtcHR5Tm9kZS5wcm90b3R5cGUubWF4S2V5ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfTtcclxuICAgIExMUkJFbXB0eU5vZGUucHJvdG90eXBlLmlzUmVkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH07XHJcbiAgICAvLyBGb3IgdGVzdGluZy5cclxuICAgIExMUkJFbXB0eU5vZGUucHJvdG90eXBlLmNoZWNrTWF4RGVwdGggPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9O1xyXG4gICAgTExSQkVtcHR5Tm9kZS5wcm90b3R5cGUuY2hlY2sgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIDA7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIExMUkJFbXB0eU5vZGU7XHJcbn0oKSk7IC8vIGVuZCBMTFJCRW1wdHlOb2RlXHJcbkxMUkJOb2RlLkVNUFRZID0gbmV3IExMUkJFbXB0eU5vZGUoKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBTb3J0ZWRTZXQgaXMgYW4gaW1tdXRhYmxlIChjb3B5LW9uLXdyaXRlKSBjb2xsZWN0aW9uIHRoYXQgaG9sZHMgZWxlbWVudHNcclxuICogaW4gb3JkZXIgc3BlY2lmaWVkIGJ5IHRoZSBwcm92aWRlZCBjb21wYXJhdG9yLlxyXG4gKlxyXG4gKiBOT1RFOiBpZiBwcm92aWRlZCBjb21wYXJhdG9yIHJldHVybnMgMCBmb3IgdHdvIGVsZW1lbnRzLCB3ZSBjb25zaWRlciB0aGVtIHRvXHJcbiAqIGJlIGVxdWFsIVxyXG4gKi9cclxudmFyIFNvcnRlZFNldCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFNvcnRlZFNldChjb21wYXJhdG9yKSB7XHJcbiAgICAgICAgdGhpcy5jb21wYXJhdG9yID0gY29tcGFyYXRvcjtcclxuICAgICAgICB0aGlzLmRhdGEgPSBuZXcgU29ydGVkTWFwKHRoaXMuY29tcGFyYXRvcik7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYSBTb3J0ZWRTZXQgZnJvbSB0aGUga2V5cyBvZiB0aGUgbWFwLlxyXG4gICAgICogVGhpcyBpcyBjdXJyZW50bHkgaW1wbGVtZW50ZWQgYXMgYW4gTyhuKSBjb3B5LlxyXG4gICAgICovXHJcbiAgICBTb3J0ZWRTZXQuZnJvbU1hcEtleXMgPSBmdW5jdGlvbiAobWFwKSB7XHJcbiAgICAgICAgdmFyIGtleXMgPSBuZXcgU29ydGVkU2V0KG1hcC5jb21wYXJhdG9yKTtcclxuICAgICAgICBtYXAuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgICAgICAgIGtleXMgPSBrZXlzLmFkZChrZXkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBrZXlzO1xyXG4gICAgfTtcclxuICAgIFNvcnRlZFNldC5wcm90b3R5cGUuaGFzID0gZnVuY3Rpb24gKGVsZW0pIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5kYXRhLmdldChlbGVtKSAhPT0gbnVsbDtcclxuICAgIH07XHJcbiAgICBTb3J0ZWRTZXQucHJvdG90eXBlLmZpcnN0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRhdGEubWluS2V5KCk7XHJcbiAgICB9O1xyXG4gICAgU29ydGVkU2V0LnByb3RvdHlwZS5sYXN0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRhdGEubWF4S2V5KCk7XHJcbiAgICB9O1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFNvcnRlZFNldC5wcm90b3R5cGUsIFwic2l6ZVwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRhdGEuc2l6ZTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIFNvcnRlZFNldC5wcm90b3R5cGUuaW5kZXhPZiA9IGZ1bmN0aW9uIChlbGVtKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YS5pbmRleE9mKGVsZW0pO1xyXG4gICAgfTtcclxuICAgIC8qKiBJdGVyYXRlcyBlbGVtZW50cyBpbiBvcmRlciBkZWZpbmVkIGJ5IFwiY29tcGFyYXRvclwiICovXHJcbiAgICBTb3J0ZWRTZXQucHJvdG90eXBlLmZvckVhY2ggPSBmdW5jdGlvbiAoY2IpIHtcclxuICAgICAgICB0aGlzLmRhdGEuaW5vcmRlclRyYXZlcnNhbChmdW5jdGlvbiAoaywgdikge1xyXG4gICAgICAgICAgICBjYihrKTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKiBJdGVyYXRlcyBvdmVyIGBlbGVtYHMgc3VjaCB0aGF0OiByYW5nZVswXSA8PSBlbGVtIDwgcmFuZ2VbMV0uICovXHJcbiAgICBTb3J0ZWRTZXQucHJvdG90eXBlLmZvckVhY2hJblJhbmdlID0gZnVuY3Rpb24gKHJhbmdlLCBjYikge1xyXG4gICAgICAgIHZhciBpdGVyID0gdGhpcy5kYXRhLmdldEl0ZXJhdG9yRnJvbShyYW5nZVswXSk7XHJcbiAgICAgICAgd2hpbGUgKGl0ZXIuaGFzTmV4dCgpKSB7XHJcbiAgICAgICAgICAgIHZhciBlbGVtID0gaXRlci5nZXROZXh0KCk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbXBhcmF0b3IoZWxlbS5rZXksIHJhbmdlWzFdKSA+PSAwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2IoZWxlbS5rZXkpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEl0ZXJhdGVzIG92ZXIgYGVsZW1gcyBzdWNoIHRoYXQ6IHN0YXJ0IDw9IGVsZW0gdW50aWwgZmFsc2UgaXMgcmV0dXJuZWQuXHJcbiAgICAgKi9cclxuICAgIFNvcnRlZFNldC5wcm90b3R5cGUuZm9yRWFjaFdoaWxlID0gZnVuY3Rpb24gKGNiLCBzdGFydCkge1xyXG4gICAgICAgIHZhciBpdGVyO1xyXG4gICAgICAgIGlmIChzdGFydCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGl0ZXIgPSB0aGlzLmRhdGEuZ2V0SXRlcmF0b3JGcm9tKHN0YXJ0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGl0ZXIgPSB0aGlzLmRhdGEuZ2V0SXRlcmF0b3IoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgd2hpbGUgKGl0ZXIuaGFzTmV4dCgpKSB7XHJcbiAgICAgICAgICAgIHZhciBlbGVtID0gaXRlci5nZXROZXh0KCk7XHJcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSBjYihlbGVtLmtleSk7XHJcbiAgICAgICAgICAgIGlmICghcmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqIEZpbmRzIHRoZSBsZWFzdCBlbGVtZW50IGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0byBgZWxlbWAuICovXHJcbiAgICBTb3J0ZWRTZXQucHJvdG90eXBlLmZpcnN0QWZ0ZXJPckVxdWFsID0gZnVuY3Rpb24gKGVsZW0pIHtcclxuICAgICAgICB2YXIgaXRlciA9IHRoaXMuZGF0YS5nZXRJdGVyYXRvckZyb20oZWxlbSk7XHJcbiAgICAgICAgcmV0dXJuIGl0ZXIuaGFzTmV4dCgpID8gaXRlci5nZXROZXh0KCkua2V5IDogbnVsbDtcclxuICAgIH07XHJcbiAgICBTb3J0ZWRTZXQucHJvdG90eXBlLmdldEl0ZXJhdG9yID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgU29ydGVkU2V0SXRlcmF0b3IodGhpcy5kYXRhLmdldEl0ZXJhdG9yKCkpO1xyXG4gICAgfTtcclxuICAgIFNvcnRlZFNldC5wcm90b3R5cGUuZ2V0SXRlcmF0b3JGcm9tID0gZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgIHJldHVybiBuZXcgU29ydGVkU2V0SXRlcmF0b3IodGhpcy5kYXRhLmdldEl0ZXJhdG9yRnJvbShrZXkpKTtcclxuICAgIH07XHJcbiAgICAvKiogSW5zZXJ0cyBvciB1cGRhdGVzIGFuIGVsZW1lbnQgKi9cclxuICAgIFNvcnRlZFNldC5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24gKGVsZW0pIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jb3B5KHRoaXMuZGF0YS5yZW1vdmUoZWxlbSkuaW5zZXJ0KGVsZW0sIHRydWUpKTtcclxuICAgIH07XHJcbiAgICAvKiogRGVsZXRlcyBhbiBlbGVtZW50ICovXHJcbiAgICBTb3J0ZWRTZXQucHJvdG90eXBlLmRlbGV0ZSA9IGZ1bmN0aW9uIChlbGVtKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmhhcyhlbGVtKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY29weSh0aGlzLmRhdGEucmVtb3ZlKGVsZW0pKTtcclxuICAgIH07XHJcbiAgICBTb3J0ZWRTZXQucHJvdG90eXBlLmlzRW1wdHkgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YS5pc0VtcHR5KCk7XHJcbiAgICB9O1xyXG4gICAgU29ydGVkU2V0LnByb3RvdHlwZS51bmlvbldpdGggPSBmdW5jdGlvbiAob3RoZXIpIHtcclxuICAgICAgICB2YXIgcmVzdWx0ID0gdGhpcztcclxuICAgICAgICBvdGhlci5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdCA9IHJlc3VsdC5hZGQoZWxlbSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH07XHJcbiAgICBTb3J0ZWRTZXQucHJvdG90eXBlLmlzRXF1YWwgPSBmdW5jdGlvbiAob3RoZXIpIHtcclxuICAgICAgICBpZiAoIShvdGhlciBpbnN0YW5jZW9mIFNvcnRlZFNldCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5zaXplICE9PSBvdGhlci5zaXplKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIHRoaXNJdCA9IHRoaXMuZGF0YS5nZXRJdGVyYXRvcigpO1xyXG4gICAgICAgIHZhciBvdGhlckl0ID0gb3RoZXIuZGF0YS5nZXRJdGVyYXRvcigpO1xyXG4gICAgICAgIHdoaWxlICh0aGlzSXQuaGFzTmV4dCgpKSB7XHJcbiAgICAgICAgICAgIHZhciB0aGlzRWxlbSA9IHRoaXNJdC5nZXROZXh0KCkua2V5O1xyXG4gICAgICAgICAgICB2YXIgb3RoZXJFbGVtID0gb3RoZXJJdC5nZXROZXh0KCkua2V5O1xyXG4gICAgICAgICAgICBpZiAodGhpcy5jb21wYXJhdG9yKHRoaXNFbGVtLCBvdGhlckVsZW0pICE9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9O1xyXG4gICAgU29ydGVkU2V0LnByb3RvdHlwZS50b0FycmF5ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciByZXMgPSBbXTtcclxuICAgICAgICB0aGlzLmZvckVhY2goZnVuY3Rpb24gKHRhcmdldElkKSB7XHJcbiAgICAgICAgICAgIHJlcy5wdXNoKHRhcmdldElkKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gcmVzO1xyXG4gICAgfTtcclxuICAgIFNvcnRlZFNldC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHJlc3VsdCA9IFtdO1xyXG4gICAgICAgIHRoaXMuZm9yRWFjaChmdW5jdGlvbiAoZWxlbSkgeyByZXR1cm4gcmVzdWx0LnB1c2goZWxlbSk7IH0pO1xyXG4gICAgICAgIHJldHVybiAnU29ydGVkU2V0KCcgKyByZXN1bHQudG9TdHJpbmcoKSArICcpJztcclxuICAgIH07XHJcbiAgICBTb3J0ZWRTZXQucHJvdG90eXBlLmNvcHkgPSBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgIHZhciByZXN1bHQgPSBuZXcgU29ydGVkU2V0KHRoaXMuY29tcGFyYXRvcik7XHJcbiAgICAgICAgcmVzdWx0LmRhdGEgPSBkYXRhO1xyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFNvcnRlZFNldDtcclxufSgpKTtcclxudmFyIFNvcnRlZFNldEl0ZXJhdG9yID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gU29ydGVkU2V0SXRlcmF0b3IoaXRlcikge1xyXG4gICAgICAgIHRoaXMuaXRlciA9IGl0ZXI7XHJcbiAgICB9XHJcbiAgICBTb3J0ZWRTZXRJdGVyYXRvci5wcm90b3R5cGUuZ2V0TmV4dCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5pdGVyLmdldE5leHQoKS5rZXk7XHJcbiAgICB9O1xyXG4gICAgU29ydGVkU2V0SXRlcmF0b3IucHJvdG90eXBlLmhhc05leHQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaXRlci5oYXNOZXh0KCk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFNvcnRlZFNldEl0ZXJhdG9yO1xyXG59KCkpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxudmFyIEVNUFRZX01BWUJFX0RPQ1VNRU5UX01BUCA9IG5ldyBTb3J0ZWRNYXAoRG9jdW1lbnRLZXkuY29tcGFyYXRvcik7XHJcbmZ1bmN0aW9uIG1heWJlRG9jdW1lbnRNYXAoKSB7XHJcbiAgICByZXR1cm4gRU1QVFlfTUFZQkVfRE9DVU1FTlRfTUFQO1xyXG59XHJcbmZ1bmN0aW9uIG51bGxhYmxlTWF5YmVEb2N1bWVudE1hcCgpIHtcclxuICAgIHJldHVybiBtYXliZURvY3VtZW50TWFwKCk7XHJcbn1cclxudmFyIEVNUFRZX0RPQ1VNRU5UX01BUCA9IG5ldyBTb3J0ZWRNYXAoRG9jdW1lbnRLZXkuY29tcGFyYXRvcik7XHJcbmZ1bmN0aW9uIGRvY3VtZW50TWFwKCkge1xyXG4gICAgcmV0dXJuIEVNUFRZX0RPQ1VNRU5UX01BUDtcclxufVxyXG52YXIgRU1QVFlfRE9DVU1FTlRfVkVSU0lPTl9NQVAgPSBuZXcgU29ydGVkTWFwKERvY3VtZW50S2V5LmNvbXBhcmF0b3IpO1xyXG5mdW5jdGlvbiBkb2N1bWVudFZlcnNpb25NYXAoKSB7XHJcbiAgICByZXR1cm4gRU1QVFlfRE9DVU1FTlRfVkVSU0lPTl9NQVA7XHJcbn1cclxudmFyIEVNUFRZX0RPQ1VNRU5UX0tFWV9TRVQgPSBuZXcgU29ydGVkU2V0KERvY3VtZW50S2V5LmNvbXBhcmF0b3IpO1xyXG5mdW5jdGlvbiBkb2N1bWVudEtleVNldCgpIHtcclxuICAgIHZhciBrZXlzID0gW107XHJcbiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgIGtleXNbX2ldID0gYXJndW1lbnRzW19pXTtcclxuICAgIH1cclxuICAgIHZhciBzZXQgPSBFTVBUWV9ET0NVTUVOVF9LRVlfU0VUO1xyXG4gICAgZm9yICh2YXIgX2EgPSAwLCBrZXlzXzEgPSBrZXlzOyBfYSA8IGtleXNfMS5sZW5ndGg7IF9hKyspIHtcclxuICAgICAgICB2YXIga2V5ID0ga2V5c18xW19hXTtcclxuICAgICAgICBzZXQgPSBzZXQuYWRkKGtleSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gc2V0O1xyXG59XHJcbnZhciBFTVBUWV9UQVJHRVRfSURfU0VUID0gbmV3IFNvcnRlZFNldChwcmltaXRpdmVDb21wYXJhdG9yKTtcclxuZnVuY3Rpb24gdGFyZ2V0SWRTZXQoKSB7XHJcbiAgICByZXR1cm4gRU1QVFlfVEFSR0VUX0lEX1NFVDtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxudmFyIEJBVENISURfVU5LTk9XTiA9IC0xO1xyXG4vKipcclxuICogQSBiYXRjaCBvZiBtdXRhdGlvbnMgdGhhdCB3aWxsIGJlIHNlbnQgYXMgb25lIHVuaXQgdG8gdGhlIGJhY2tlbmQuXHJcbiAqL1xyXG52YXIgTXV0YXRpb25CYXRjaCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIGJhdGNoSWQgVGhlIHVuaXF1ZSBJRCBvZiB0aGlzIG11dGF0aW9uIGJhdGNoLlxyXG4gICAgICogQHBhcmFtIGxvY2FsV3JpdGVUaW1lIFRoZSBvcmlnaW5hbCB3cml0ZSB0aW1lIG9mIHRoaXMgbXV0YXRpb24uXHJcbiAgICAgKiBAcGFyYW0gYmFzZU11dGF0aW9ucyBNdXRhdGlvbnMgdGhhdCBhcmUgdXNlZCB0byBwb3B1bGF0ZSB0aGUgYmFzZVxyXG4gICAgICogdmFsdWVzIHdoZW4gdGhpcyBtdXRhdGlvbiBpcyBhcHBsaWVkIGxvY2FsbHkuIFRoaXMgY2FuIGJlIHVzZWQgdG8gbG9jYWxseVxyXG4gICAgICogb3ZlcndyaXRlIHZhbHVlcyB0aGF0IGFyZSBwZXJzaXN0ZWQgaW4gdGhlIHJlbW90ZSBkb2N1bWVudCBjYWNoZS4gQmFzZVxyXG4gICAgICogbXV0YXRpb25zIGFyZSBuZXZlciBzZW50IHRvIHRoZSBiYWNrZW5kLlxyXG4gICAgICogQHBhcmFtIG11dGF0aW9ucyBUaGUgdXNlci1wcm92aWRlZCBtdXRhdGlvbnMgaW4gdGhpcyBtdXRhdGlvbiBiYXRjaC5cclxuICAgICAqIFVzZXItcHJvdmlkZWQgbXV0YXRpb25zIGFyZSBhcHBsaWVkIGJvdGggbG9jYWxseSBhbmQgcmVtb3RlbHkgb24gdGhlXHJcbiAgICAgKiBiYWNrZW5kLlxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBNdXRhdGlvbkJhdGNoKGJhdGNoSWQsIGxvY2FsV3JpdGVUaW1lLCBiYXNlTXV0YXRpb25zLCBtdXRhdGlvbnMpIHtcclxuICAgICAgICB0aGlzLmJhdGNoSWQgPSBiYXRjaElkO1xyXG4gICAgICAgIHRoaXMubG9jYWxXcml0ZVRpbWUgPSBsb2NhbFdyaXRlVGltZTtcclxuICAgICAgICB0aGlzLmJhc2VNdXRhdGlvbnMgPSBiYXNlTXV0YXRpb25zO1xyXG4gICAgICAgIHRoaXMubXV0YXRpb25zID0gbXV0YXRpb25zO1xyXG4gICAgICAgIGFzc2VydChtdXRhdGlvbnMubGVuZ3RoID4gMCwgJ0Nhbm5vdCBjcmVhdGUgYW4gZW1wdHkgbXV0YXRpb24gYmF0Y2gnKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQXBwbGllcyBhbGwgdGhlIG11dGF0aW9ucyBpbiB0aGlzIE11dGF0aW9uQmF0Y2ggdG8gdGhlIHNwZWNpZmllZCBkb2N1bWVudFxyXG4gICAgICogdG8gY3JlYXRlIGEgbmV3IHJlbW90ZSBkb2N1bWVudFxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBkb2NLZXkgVGhlIGtleSBvZiB0aGUgZG9jdW1lbnQgdG8gYXBwbHkgbXV0YXRpb25zIHRvLlxyXG4gICAgICogQHBhcmFtIG1heWJlRG9jIFRoZSBkb2N1bWVudCB0byBhcHBseSBtdXRhdGlvbnMgdG8uXHJcbiAgICAgKiBAcGFyYW0gYmF0Y2hSZXN1bHQgVGhlIHJlc3VsdCBvZiBhcHBseWluZyB0aGUgTXV0YXRpb25CYXRjaCB0byB0aGVcclxuICAgICAqIGJhY2tlbmQuXHJcbiAgICAgKi9cclxuICAgIE11dGF0aW9uQmF0Y2gucHJvdG90eXBlLmFwcGx5VG9SZW1vdGVEb2N1bWVudCA9IGZ1bmN0aW9uIChkb2NLZXksIG1heWJlRG9jLCBiYXRjaFJlc3VsdCkge1xyXG4gICAgICAgIGlmIChtYXliZURvYykge1xyXG4gICAgICAgICAgICBhc3NlcnQobWF5YmVEb2Mua2V5LmlzRXF1YWwoZG9jS2V5KSwgXCJhcHBseVRvUmVtb3RlRG9jdW1lbnQ6IGtleSBcIiArIGRvY0tleSArIFwiIHNob3VsZCBtYXRjaCBtYXliZURvYyBrZXlcXG4gICAgICAgIFwiICsgbWF5YmVEb2Mua2V5KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIG11dGF0aW9uUmVzdWx0cyA9IGJhdGNoUmVzdWx0Lm11dGF0aW9uUmVzdWx0cztcclxuICAgICAgICBhc3NlcnQobXV0YXRpb25SZXN1bHRzLmxlbmd0aCA9PT0gdGhpcy5tdXRhdGlvbnMubGVuZ3RoLCBcIk1pc21hdGNoIGJldHdlZW4gbXV0YXRpb25zIGxlbmd0aFxcbiAgICAgIChcIiArIHRoaXMubXV0YXRpb25zLmxlbmd0aCArIFwiKSBhbmQgbXV0YXRpb24gcmVzdWx0cyBsZW5ndGhcXG4gICAgICAoXCIgKyBtdXRhdGlvblJlc3VsdHMubGVuZ3RoICsgXCIpLlwiKTtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubXV0YXRpb25zLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBtdXRhdGlvbiA9IHRoaXMubXV0YXRpb25zW2ldO1xyXG4gICAgICAgICAgICBpZiAobXV0YXRpb24ua2V5LmlzRXF1YWwoZG9jS2V5KSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG11dGF0aW9uUmVzdWx0ID0gbXV0YXRpb25SZXN1bHRzW2ldO1xyXG4gICAgICAgICAgICAgICAgbWF5YmVEb2MgPSBtdXRhdGlvbi5hcHBseVRvUmVtb3RlRG9jdW1lbnQobWF5YmVEb2MsIG11dGF0aW9uUmVzdWx0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbWF5YmVEb2M7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBDb21wdXRlcyB0aGUgbG9jYWwgdmlldyBvZiBhIGRvY3VtZW50IGdpdmVuIGFsbCB0aGUgbXV0YXRpb25zIGluIHRoaXNcclxuICAgICAqIGJhdGNoLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBkb2NLZXkgVGhlIGtleSBvZiB0aGUgZG9jdW1lbnQgdG8gYXBwbHkgbXV0YXRpb25zIHRvLlxyXG4gICAgICogQHBhcmFtIG1heWJlRG9jIFRoZSBkb2N1bWVudCB0byBhcHBseSBtdXRhdGlvbnMgdG8uXHJcbiAgICAgKi9cclxuICAgIE11dGF0aW9uQmF0Y2gucHJvdG90eXBlLmFwcGx5VG9Mb2NhbFZpZXcgPSBmdW5jdGlvbiAoZG9jS2V5LCBtYXliZURvYykge1xyXG4gICAgICAgIGlmIChtYXliZURvYykge1xyXG4gICAgICAgICAgICBhc3NlcnQobWF5YmVEb2Mua2V5LmlzRXF1YWwoZG9jS2V5KSwgXCJhcHBseVRvTG9jYWxEb2N1bWVudDoga2V5IFwiICsgZG9jS2V5ICsgXCIgc2hvdWxkIG1hdGNoIG1heWJlRG9jIGtleVxcbiAgICAgICAgXCIgKyBtYXliZURvYy5rZXkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBGaXJzdCwgYXBwbHkgdGhlIGJhc2Ugc3RhdGUuIFRoaXMgYWxsb3dzIHVzIHRvIGFwcGx5IG5vbi1pZGVtcG90ZW50XHJcbiAgICAgICAgLy8gdHJhbnNmb3JtIGFnYWluc3QgYSBjb25zaXN0ZW50IHNldCBvZiB2YWx1ZXMuXHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHRoaXMuYmFzZU11dGF0aW9uczsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgdmFyIG11dGF0aW9uID0gX2FbX2ldO1xyXG4gICAgICAgICAgICBpZiAobXV0YXRpb24ua2V5LmlzRXF1YWwoZG9jS2V5KSkge1xyXG4gICAgICAgICAgICAgICAgbWF5YmVEb2MgPSBtdXRhdGlvbi5hcHBseVRvTG9jYWxWaWV3KG1heWJlRG9jLCBtYXliZURvYywgdGhpcy5sb2NhbFdyaXRlVGltZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGJhc2VEb2MgPSBtYXliZURvYztcclxuICAgICAgICAvLyBTZWNvbmQsIGFwcGx5IGFsbCB1c2VyLXByb3ZpZGVkIG11dGF0aW9ucy5cclxuICAgICAgICBmb3IgKHZhciBfYiA9IDAsIF9jID0gdGhpcy5tdXRhdGlvbnM7IF9iIDwgX2MubGVuZ3RoOyBfYisrKSB7XHJcbiAgICAgICAgICAgIHZhciBtdXRhdGlvbiA9IF9jW19iXTtcclxuICAgICAgICAgICAgaWYgKG11dGF0aW9uLmtleS5pc0VxdWFsKGRvY0tleSkpIHtcclxuICAgICAgICAgICAgICAgIG1heWJlRG9jID0gbXV0YXRpb24uYXBwbHlUb0xvY2FsVmlldyhtYXliZURvYywgYmFzZURvYywgdGhpcy5sb2NhbFdyaXRlVGltZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG1heWJlRG9jO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQ29tcHV0ZXMgdGhlIGxvY2FsIHZpZXcgZm9yIGFsbCBwcm92aWRlZCBkb2N1bWVudHMgZ2l2ZW4gdGhlIG11dGF0aW9ucyBpblxyXG4gICAgICogdGhpcyBiYXRjaC5cclxuICAgICAqL1xyXG4gICAgTXV0YXRpb25CYXRjaC5wcm90b3R5cGUuYXBwbHlUb0xvY2FsRG9jdW1lbnRTZXQgPSBmdW5jdGlvbiAobWF5YmVEb2NzKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICAvLyBUT0RPKG1yc2NobWlkdCk6IFRoaXMgaW1wbGVtZW50YXRpb24gaXMgTyhuXjIpLiBJZiB3ZSBhcHBseSB0aGUgbXV0YXRpb25zXHJcbiAgICAgICAgLy8gZGlyZWN0bHkgKGFzIGRvbmUgaW4gYGFwcGx5VG9Mb2NhbFZpZXcoKWApLCB3ZSBjYW4gcmVkdWNlIHRoZSBjb21wbGV4aXR5XHJcbiAgICAgICAgLy8gdG8gTyhuKS5cclxuICAgICAgICB2YXIgbXV0YXRlZERvY3VtZW50cyA9IG1heWJlRG9jcztcclxuICAgICAgICB0aGlzLm11dGF0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uIChtKSB7XHJcbiAgICAgICAgICAgIHZhciBtdXRhdGVkRG9jdW1lbnQgPSBfdGhpcy5hcHBseVRvTG9jYWxWaWV3KG0ua2V5LCBtYXliZURvY3MuZ2V0KG0ua2V5KSk7XHJcbiAgICAgICAgICAgIGlmIChtdXRhdGVkRG9jdW1lbnQpIHtcclxuICAgICAgICAgICAgICAgIG11dGF0ZWREb2N1bWVudHMgPSBtdXRhdGVkRG9jdW1lbnRzLmluc2VydChtLmtleSwgbXV0YXRlZERvY3VtZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBtdXRhdGVkRG9jdW1lbnRzO1xyXG4gICAgfTtcclxuICAgIE11dGF0aW9uQmF0Y2gucHJvdG90eXBlLmtleXMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubXV0YXRpb25zLnJlZHVjZShmdW5jdGlvbiAoa2V5cywgbSkgeyByZXR1cm4ga2V5cy5hZGQobS5rZXkpOyB9LCBkb2N1bWVudEtleVNldCgpKTtcclxuICAgIH07XHJcbiAgICBNdXRhdGlvbkJhdGNoLnByb3RvdHlwZS5pc0VxdWFsID0gZnVuY3Rpb24gKG90aGVyKSB7XHJcbiAgICAgICAgcmV0dXJuICh0aGlzLmJhdGNoSWQgPT09IG90aGVyLmJhdGNoSWQgJiZcclxuICAgICAgICAgICAgYXJyYXlFcXVhbHModGhpcy5tdXRhdGlvbnMsIG90aGVyLm11dGF0aW9ucykgJiZcclxuICAgICAgICAgICAgYXJyYXlFcXVhbHModGhpcy5iYXNlTXV0YXRpb25zLCBvdGhlci5iYXNlTXV0YXRpb25zKSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIE11dGF0aW9uQmF0Y2g7XHJcbn0oKSk7XHJcbi8qKiBUaGUgcmVzdWx0IG9mIGFwcGx5aW5nIGEgbXV0YXRpb24gYmF0Y2ggdG8gdGhlIGJhY2tlbmQuICovXHJcbnZhciBNdXRhdGlvbkJhdGNoUmVzdWx0ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gTXV0YXRpb25CYXRjaFJlc3VsdChiYXRjaCwgY29tbWl0VmVyc2lvbiwgbXV0YXRpb25SZXN1bHRzLCBzdHJlYW1Ub2tlbiwgXHJcbiAgICAvKipcclxuICAgICAqIEEgcHJlLWNvbXB1dGVkIG1hcHBpbmcgZnJvbSBlYWNoIG11dGF0ZWQgZG9jdW1lbnQgdG8gdGhlIHJlc3VsdGluZ1xyXG4gICAgICogdmVyc2lvbi5cclxuICAgICAqL1xyXG4gICAgZG9jVmVyc2lvbnMpIHtcclxuICAgICAgICB0aGlzLmJhdGNoID0gYmF0Y2g7XHJcbiAgICAgICAgdGhpcy5jb21taXRWZXJzaW9uID0gY29tbWl0VmVyc2lvbjtcclxuICAgICAgICB0aGlzLm11dGF0aW9uUmVzdWx0cyA9IG11dGF0aW9uUmVzdWx0cztcclxuICAgICAgICB0aGlzLnN0cmVhbVRva2VuID0gc3RyZWFtVG9rZW47XHJcbiAgICAgICAgdGhpcy5kb2NWZXJzaW9ucyA9IGRvY1ZlcnNpb25zO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGVzIGEgbmV3IE11dGF0aW9uQmF0Y2hSZXN1bHQgZm9yIHRoZSBnaXZlbiBiYXRjaCBhbmQgcmVzdWx0cy4gVGhlcmVcclxuICAgICAqIG11c3QgYmUgb25lIHJlc3VsdCBmb3IgZWFjaCBtdXRhdGlvbiBpbiB0aGUgYmF0Y2guIFRoaXMgc3RhdGljIGZhY3RvcnlcclxuICAgICAqIGNhY2hlcyBhIGRvY3VtZW50PT52ZXJzaW9uIG1hcHBpbmcgKGRvY1ZlcnNpb25zKS5cclxuICAgICAqL1xyXG4gICAgTXV0YXRpb25CYXRjaFJlc3VsdC5mcm9tID0gZnVuY3Rpb24gKGJhdGNoLCBjb21taXRWZXJzaW9uLCByZXN1bHRzLCBzdHJlYW1Ub2tlbikge1xyXG4gICAgICAgIGFzc2VydChiYXRjaC5tdXRhdGlvbnMubGVuZ3RoID09PSByZXN1bHRzLmxlbmd0aCwgJ011dGF0aW9ucyBzZW50ICcgK1xyXG4gICAgICAgICAgICBiYXRjaC5tdXRhdGlvbnMubGVuZ3RoICtcclxuICAgICAgICAgICAgJyBtdXN0IGVxdWFsIHJlc3VsdHMgcmVjZWl2ZWQgJyArXHJcbiAgICAgICAgICAgIHJlc3VsdHMubGVuZ3RoKTtcclxuICAgICAgICB2YXIgdmVyc2lvbk1hcCA9IGRvY3VtZW50VmVyc2lvbk1hcCgpO1xyXG4gICAgICAgIHZhciBtdXRhdGlvbnMgPSBiYXRjaC5tdXRhdGlvbnM7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtdXRhdGlvbnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdmVyc2lvbk1hcCA9IHZlcnNpb25NYXAuaW5zZXJ0KG11dGF0aW9uc1tpXS5rZXksIHJlc3VsdHNbaV0udmVyc2lvbik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBuZXcgTXV0YXRpb25CYXRjaFJlc3VsdChiYXRjaCwgY29tbWl0VmVyc2lvbiwgcmVzdWx0cywgc3RyZWFtVG9rZW4sIHZlcnNpb25NYXApO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBNdXRhdGlvbkJhdGNoUmVzdWx0O1xyXG59KCkpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFBlcnNpc3RlbmNlUHJvbWlzZTw+IGlzIGVzc2VudGlhbGx5IGEgcmUtaW1wbGVtZW50YXRpb24gb2YgUHJvbWlzZTw+IGV4Y2VwdFxyXG4gKiBpdCBoYXMgYSAubmV4dCgpIG1ldGhvZCBpbnN0ZWFkIG9mIC50aGVuKCkgYW5kIC5uZXh0KCkgYW5kIC5jYXRjaCgpIGNhbGxiYWNrc1xyXG4gKiBhcmUgZXhlY3V0ZWQgc3luY2hyb25vdXNseSB3aGVuIGEgUGVyc2lzdGVuY2VQcm9taXNlIHJlc29sdmVzIHJhdGhlciB0aGFuXHJcbiAqIGFzeW5jaHJvbm91c2x5IChQcm9taXNlPD4gaW1wbGVtZW50YXRpb25zIHVzZSBzZXRJbW1lZGlhdGUoKSBvciBzaW1pbGFyKS5cclxuICpcclxuICogVGhpcyBpcyBuZWNlc3NhcnkgdG8gaW50ZXJvcGVyYXRlIHdpdGggSW5kZXhlZERCIHdoaWNoIHdpbGwgYXV0b21hdGljYWxseVxyXG4gKiBjb21taXQgdHJhbnNhY3Rpb25zIGlmIGNvbnRyb2wgaXMgcmV0dXJuZWQgdG8gdGhlIGV2ZW50IGxvb3Agd2l0aG91dFxyXG4gKiBzeW5jaHJvbm91c2x5IGluaXRpYXRpbmcgYW5vdGhlciBvcGVyYXRpb24gb24gdGhlIHRyYW5zYWN0aW9uLlxyXG4gKlxyXG4gKiBOT1RFOiAudGhlbigpIGFuZCAuY2F0Y2goKSBvbmx5IGFsbG93IGEgc2luZ2xlIGNvbnN1bWVyLCB1bmxpa2Ugbm9ybWFsXHJcbiAqIFByb21pc2VzLlxyXG4gKi9cclxudmFyIFBlcnNpc3RlbmNlUHJvbWlzZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFBlcnNpc3RlbmNlUHJvbWlzZShjYWxsYmFjaykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgLy8gTk9URTogbmV4dC9jYXRjaENhbGxiYWNrIHdpbGwgYWx3YXlzIHBvaW50IHRvIG91ciBvd24gd3JhcHBlciBmdW5jdGlvbnMsXHJcbiAgICAgICAgLy8gbm90IHRoZSB1c2VyJ3MgcmF3IG5leHQoKSBvciBjYXRjaCgpIGNhbGxiYWNrcy5cclxuICAgICAgICB0aGlzLm5leHRDYWxsYmFjayA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5jYXRjaENhbGxiYWNrID0gbnVsbDtcclxuICAgICAgICAvLyBXaGVuIHRoZSBvcGVyYXRpb24gcmVzb2x2ZXMsIHdlJ2xsIHNldCByZXN1bHQgb3IgZXJyb3IgYW5kIG1hcmsgaXNEb25lLlxyXG4gICAgICAgIHRoaXMucmVzdWx0ID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIHRoaXMuZXJyb3IgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgdGhpcy5pc0RvbmUgPSBmYWxzZTtcclxuICAgICAgICAvLyBTZXQgdG8gdHJ1ZSB3aGVuIC50aGVuKCkgb3IgLmNhdGNoKCkgYXJlIGNhbGxlZCBhbmQgcHJldmVudHMgYWRkaXRpb25hbFxyXG4gICAgICAgIC8vIGNoYWluaW5nLlxyXG4gICAgICAgIHRoaXMuY2FsbGJhY2tBdHRhY2hlZCA9IGZhbHNlO1xyXG4gICAgICAgIGNhbGxiYWNrKGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgICAgICBfdGhpcy5pc0RvbmUgPSB0cnVlO1xyXG4gICAgICAgICAgICBfdGhpcy5yZXN1bHQgPSB2YWx1ZTtcclxuICAgICAgICAgICAgaWYgKF90aGlzLm5leHRDYWxsYmFjaykge1xyXG4gICAgICAgICAgICAgICAgLy8gdmFsdWUgc2hvdWxkIGJlIGRlZmluZWQgdW5sZXNzIFQgaXMgVm9pZCwgYnV0IHdlIGNhbid0IGV4cHJlc3NcclxuICAgICAgICAgICAgICAgIC8vIHRoYXQgaW4gdGhlIHR5cGUgc3lzdGVtLlxyXG4gICAgICAgICAgICAgICAgX3RoaXMubmV4dENhbGxiYWNrKHZhbHVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgICAgICBfdGhpcy5pc0RvbmUgPSB0cnVlO1xyXG4gICAgICAgICAgICBfdGhpcy5lcnJvciA9IGVycm9yO1xyXG4gICAgICAgICAgICBpZiAoX3RoaXMuY2F0Y2hDYWxsYmFjaykge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuY2F0Y2hDYWxsYmFjayhlcnJvcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIFBlcnNpc3RlbmNlUHJvbWlzZS5wcm90b3R5cGUuY2F0Y2ggPSBmdW5jdGlvbiAoZm4pIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5uZXh0KHVuZGVmaW5lZCwgZm4pO1xyXG4gICAgfTtcclxuICAgIFBlcnNpc3RlbmNlUHJvbWlzZS5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uIChuZXh0Rm4sIGNhdGNoRm4pIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIGlmICh0aGlzLmNhbGxiYWNrQXR0YWNoZWQpIHtcclxuICAgICAgICAgICAgZmFpbCgnQ2FsbGVkIG5leHQoKSBvciBjYXRjaCgpIHR3aWNlIGZvciBQZXJzaXN0ZW5jZVByb21pc2UnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jYWxsYmFja0F0dGFjaGVkID0gdHJ1ZTtcclxuICAgICAgICBpZiAodGhpcy5pc0RvbmUpIHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLmVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy53cmFwU3VjY2VzcyhuZXh0Rm4sIHRoaXMucmVzdWx0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLndyYXBGYWlsdXJlKGNhdGNoRm4sIHRoaXMuZXJyb3IpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFBlcnNpc3RlbmNlUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5uZXh0Q2FsbGJhY2sgPSBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICBfdGhpcy53cmFwU3VjY2VzcyhuZXh0Rm4sIHZhbHVlKS5uZXh0KHJlc29sdmUsIHJlamVjdCk7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuY2F0Y2hDYWxsYmFjayA9IGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgIF90aGlzLndyYXBGYWlsdXJlKGNhdGNoRm4sIGVycm9yKS5uZXh0KHJlc29sdmUsIHJlamVjdCk7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgUGVyc2lzdGVuY2VQcm9taXNlLnByb3RvdHlwZS50b1Byb21pc2UgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICBfdGhpcy5uZXh0KHJlc29sdmUsIHJlamVjdCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgUGVyc2lzdGVuY2VQcm9taXNlLnByb3RvdHlwZS53cmFwVXNlckZ1bmN0aW9uID0gZnVuY3Rpb24gKGZuKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IGZuKCk7XHJcbiAgICAgICAgICAgIGlmIChyZXN1bHQgaW5zdGFuY2VvZiBQZXJzaXN0ZW5jZVByb21pc2UpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUocmVzdWx0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlamVjdChlKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgUGVyc2lzdGVuY2VQcm9taXNlLnByb3RvdHlwZS53cmFwU3VjY2VzcyA9IGZ1bmN0aW9uIChuZXh0Rm4sIHZhbHVlKSB7XHJcbiAgICAgICAgaWYgKG5leHRGbikge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy53cmFwVXNlckZ1bmN0aW9uKGZ1bmN0aW9uICgpIHsgcmV0dXJuIG5leHRGbih2YWx1ZSk7IH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gSWYgdGhlcmUncyBubyBuZXh0Rm4sIHRoZW4gUiBtdXN0IGJlIHRoZSBzYW1lIGFzIFRcclxuICAgICAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKHZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgUGVyc2lzdGVuY2VQcm9taXNlLnByb3RvdHlwZS53cmFwRmFpbHVyZSA9IGZ1bmN0aW9uIChjYXRjaEZuLCBlcnJvcikge1xyXG4gICAgICAgIGlmIChjYXRjaEZuKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLndyYXBVc2VyRnVuY3Rpb24oZnVuY3Rpb24gKCkgeyByZXR1cm4gY2F0Y2hGbihlcnJvcik7IH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZWplY3QoZXJyb3IpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSA9IGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFBlcnNpc3RlbmNlUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgIHJlc29sdmUocmVzdWx0KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBQZXJzaXN0ZW5jZVByb21pc2UucmVqZWN0ID0gZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQZXJzaXN0ZW5jZVByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICByZWplY3QoZXJyb3IpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIFBlcnNpc3RlbmNlUHJvbWlzZS53YWl0Rm9yID0gZnVuY3Rpb24gKFxyXG4gICAgLy8gQWNjZXB0IGFsbCBQcm9taXNlIHR5cGVzIGluIHdhaXRGb3IoKS5cclxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbiAgICBhbGwpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFBlcnNpc3RlbmNlUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgIHZhciBleHBlY3RlZENvdW50ID0gMDtcclxuICAgICAgICAgICAgdmFyIHJlc29sdmVkQ291bnQgPSAwO1xyXG4gICAgICAgICAgICB2YXIgZG9uZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICBhbGwuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgKytleHBlY3RlZENvdW50O1xyXG4gICAgICAgICAgICAgICAgZWxlbWVudC5uZXh0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICArK3Jlc29sdmVkQ291bnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRvbmUgJiYgcmVzb2x2ZWRDb3VudCA9PT0gZXhwZWN0ZWRDb3VudCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGVycikgeyByZXR1cm4gcmVqZWN0KGVycik7IH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgZG9uZSA9IHRydWU7XHJcbiAgICAgICAgICAgIGlmIChyZXNvbHZlZENvdW50ID09PSBleHBlY3RlZENvdW50KSB7XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEdpdmVuIGFuIGFycmF5IG9mIHByZWRpY2F0ZSBmdW5jdGlvbnMgdGhhdCBhc3luY2hyb25vdXNseSBldmFsdWF0ZSB0byBhXHJcbiAgICAgKiBib29sZWFuLCBpbXBsZW1lbnRzIGEgc2hvcnQtY2lyY3VpdGluZyBgb3JgIGJldHdlZW4gdGhlIHJlc3VsdHMuIFByZWRpY2F0ZXNcclxuICAgICAqIHdpbGwgYmUgZXZhbHVhdGVkIHVudGlsIG9uZSBvZiB0aGVtIHJldHVybnMgYHRydWVgLCB0aGVuIHN0b3AuIFRoZSBmaW5hbFxyXG4gICAgICogcmVzdWx0IHdpbGwgYmUgd2hldGhlciBhbnkgb2YgdGhlbSByZXR1cm5lZCBgdHJ1ZWAuXHJcbiAgICAgKi9cclxuICAgIFBlcnNpc3RlbmNlUHJvbWlzZS5vciA9IGZ1bmN0aW9uIChwcmVkaWNhdGVzKSB7XHJcbiAgICAgICAgdmFyIHAgPSBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZShmYWxzZSk7XHJcbiAgICAgICAgdmFyIF9sb29wXzEgPSBmdW5jdGlvbiAocHJlZGljYXRlKSB7XHJcbiAgICAgICAgICAgIHAgPSBwLm5leHQoZnVuY3Rpb24gKGlzVHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGlzVHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZShpc1RydWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHByZWRpY2F0ZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgcHJlZGljYXRlc18xID0gcHJlZGljYXRlczsgX2kgPCBwcmVkaWNhdGVzXzEubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBwcmVkaWNhdGUgPSBwcmVkaWNhdGVzXzFbX2ldO1xyXG4gICAgICAgICAgICBfbG9vcF8xKHByZWRpY2F0ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBwO1xyXG4gICAgfTtcclxuICAgIFBlcnNpc3RlbmNlUHJvbWlzZS5mb3JFYWNoID0gZnVuY3Rpb24gKGNvbGxlY3Rpb24sIGYpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhciBwcm9taXNlcyA9IFtdO1xyXG4gICAgICAgIGNvbGxlY3Rpb24uZm9yRWFjaChmdW5jdGlvbiAociwgcykge1xyXG4gICAgICAgICAgICBwcm9taXNlcy5wdXNoKGYuY2FsbChfdGhpcywgciwgcykpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiB0aGlzLndhaXRGb3IocHJvbWlzZXMpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2U7XHJcbn0oKSk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG52YXIgTE9HX1RBRyA9ICdTaW1wbGVEYic7XHJcbi8qKlxyXG4gKiBUaGUgbWF4aW11bSBudW1iZXIgb2YgcmV0cnkgYXR0ZW1wdHMgZm9yIGFuIEluZGV4ZWREYiB0cmFuc2FjdGlvbiB0aGF0IGZhaWxzXHJcbiAqIHdpdGggYSBET01FeGNlcHRpb24uXHJcbiAqL1xyXG52YXIgVFJBTlNBQ1RJT05fUkVUUllfQ09VTlQgPSAzO1xyXG4vKipcclxuICogUHJvdmlkZXMgYSB3cmFwcGVyIGFyb3VuZCBJbmRleGVkRGIgd2l0aCBhIHNpbXBsaWZpZWQgaW50ZXJmYWNlIHRoYXQgdXNlc1xyXG4gKiBQcm9taXNlLWxpa2UgcmV0dXJuIHZhbHVlcyB0byBjaGFpbiBvcGVyYXRpb25zLiBSZWFsIHByb21pc2VzIGNhbm5vdCBiZSB1c2VkXHJcbiAqIHNpbmNlIC50aGVuKCkgY29udGludWF0aW9ucyBhcmUgZXhlY3V0ZWQgYXN5bmNocm9ub3VzbHkgKGUuZy4gdmlhXHJcbiAqIC5zZXRJbW1lZGlhdGUpLCB3aGljaCB3b3VsZCBjYXVzZSBJbmRleGVkREIgdG8gZW5kIHRoZSB0cmFuc2FjdGlvbi5cclxuICogU2VlIFBlcnNpc3RlbmNlUHJvbWlzZSBmb3IgbW9yZSBkZXRhaWxzLlxyXG4gKi9cclxudmFyIFNpbXBsZURiID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gU2ltcGxlRGIoZGIpIHtcclxuICAgICAgICB0aGlzLmRiID0gZGI7XHJcbiAgICAgICAgdmFyIGlPU1ZlcnNpb24gPSBTaW1wbGVEYi5nZXRJT1NWZXJzaW9uKHV0aWwuZ2V0VUEoKSk7XHJcbiAgICAgICAgLy8gTk9URTogQWNjb3JkaW5nIHRvIGh0dHBzOi8vYnVncy53ZWJraXQub3JnL3Nob3dfYnVnLmNnaT9pZD0xOTcwNTAsIHRoZVxyXG4gICAgICAgIC8vIGJ1ZyB3ZSdyZSBjaGVja2luZyBmb3Igc2hvdWxkIGV4aXN0IGluIGlPUyA+PSAxMi4yIGFuZCA8IDEzLCBidXQgZm9yXHJcbiAgICAgICAgLy8gd2hhdGV2ZXIgcmVhc29uIGl0J3MgbXVjaCBoYXJkZXIgdG8gaGl0IGFmdGVyIDEyLjIgc28gd2Ugb25seSBwcm9hY3RpdmVseVxyXG4gICAgICAgIC8vIGxvZyBvbiAxMi4yLlxyXG4gICAgICAgIGlmIChpT1NWZXJzaW9uID09PSAxMi4yKSB7XHJcbiAgICAgICAgICAgIGVycm9yKCdGaXJlc3RvcmUgcGVyc2lzdGVuY2Ugc3VmZmVycyBmcm9tIGEgYnVnIGluIGlPUyAxMi4yICcgK1xyXG4gICAgICAgICAgICAgICAgJ1NhZmFyaSB0aGF0IG1heSBjYXVzZSB5b3VyIGFwcCB0byBzdG9wIHdvcmtpbmcuIFNlZSAnICtcclxuICAgICAgICAgICAgICAgICdodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3EvNTY0OTYyOTYvMTEwOTE1IGZvciBkZXRhaWxzICcgK1xyXG4gICAgICAgICAgICAgICAgJ2FuZCBhIHBvdGVudGlhbCB3b3JrYXJvdW5kLicpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogT3BlbnMgdGhlIHNwZWNpZmllZCBkYXRhYmFzZSwgY3JlYXRpbmcgb3IgdXBncmFkaW5nIGl0IGlmIG5lY2Vzc2FyeS5cclxuICAgICAqXHJcbiAgICAgKiBOb3RlIHRoYXQgYHZlcnNpb25gIG11c3Qgbm90IGJlIGEgZG93bmdyYWRlLiBJbmRleGVkREIgZG9lcyBub3Qgc3VwcG9ydCBkb3duZ3JhZGluZyB0aGUgc2NoZW1hXHJcbiAgICAgKiB2ZXJzaW9uLiBXZSBjdXJyZW50bHkgZG8gbm90IHN1cHBvcnQgYW55IHdheSB0byBkbyB2ZXJzaW9uaW5nIG91dHNpZGUgb2YgSW5kZXhlZERCJ3MgdmVyc2lvbmluZ1xyXG4gICAgICogbWVjaGFuaXNtLCBhcyBvbmx5IHZlcnNpb24tdXBncmFkZSB0cmFuc2FjdGlvbnMgYXJlIGFsbG93ZWQgdG8gZG8gdGhpbmdzIGxpa2UgY3JlYXRlXHJcbiAgICAgKiBvYmplY3RzdG9yZXMuXHJcbiAgICAgKi9cclxuICAgIFNpbXBsZURiLm9wZW5PckNyZWF0ZSA9IGZ1bmN0aW9uIChuYW1lLCB2ZXJzaW9uLCBzY2hlbWFDb252ZXJ0ZXIpIHtcclxuICAgICAgICBhc3NlcnQoU2ltcGxlRGIuaXNBdmFpbGFibGUoKSwgJ0luZGV4ZWREQiBub3Qgc3VwcG9ydGVkIGluIGN1cnJlbnQgZW52aXJvbm1lbnQuJyk7XHJcbiAgICAgICAgZGVidWcoTE9HX1RBRywgJ09wZW5pbmcgZGF0YWJhc2U6JywgbmFtZSk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQZXJzaXN0ZW5jZVByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICAvLyBUT0RPKG1pa2VsZWhlbik6IEludmVzdGlnYXRlIGJyb3dzZXIgY29tcGF0aWJpbGl0eS5cclxuICAgICAgICAgICAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0luZGV4ZWREQl9BUEkvVXNpbmdfSW5kZXhlZERCXHJcbiAgICAgICAgICAgIC8vIHN1Z2dlc3RzIElFOSBhbmQgb2xkZXIgV2ViS2l0IGJyb3dzZXJzIGhhbmRsZSB1cGdyYWRlXHJcbiAgICAgICAgICAgIC8vIGRpZmZlcmVudGx5LiBUaGV5IGV4cGVjdCBzZXRWZXJzaW9uLCBhcyBkZXNjcmliZWQgaGVyZTpcclxuICAgICAgICAgICAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0lEQlZlcnNpb25DaGFuZ2VSZXF1ZXN0L3NldFZlcnNpb25cclxuICAgICAgICAgICAgdmFyIHJlcXVlc3QgPSB3aW5kb3cuaW5kZXhlZERCLm9wZW4obmFtZSwgdmVyc2lvbik7XHJcbiAgICAgICAgICAgIHJlcXVlc3Qub25zdWNjZXNzID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZGIgPSBldmVudC50YXJnZXQucmVzdWx0O1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZShuZXcgU2ltcGxlRGIoZGIpKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgcmVxdWVzdC5vbmJsb2NrZWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICByZWplY3QobmV3IEZpcmVzdG9yZUVycm9yKENvZGUuRkFJTEVEX1BSRUNPTkRJVElPTiwgJ0Nhbm5vdCB1cGdyYWRlIEluZGV4ZWREQiBzY2hlbWEgd2hpbGUgYW5vdGhlciB0YWIgaXMgb3Blbi4gJyArXHJcbiAgICAgICAgICAgICAgICAgICAgJ0Nsb3NlIGFsbCB0YWJzIHRoYXQgYWNjZXNzIEZpcmVzdG9yZSBhbmQgcmVsb2FkIHRoaXMgcGFnZSB0byBwcm9jZWVkLicpKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgcmVxdWVzdC5vbmVycm9yID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZXJyb3IgPSBldmVudC50YXJnZXQuZXJyb3I7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IubmFtZSA9PT0gJ1ZlcnNpb25FcnJvcicpIHtcclxuICAgICAgICAgICAgICAgICAgICByZWplY3QobmV3IEZpcmVzdG9yZUVycm9yKENvZGUuRkFJTEVEX1BSRUNPTkRJVElPTiwgJ0EgbmV3ZXIgdmVyc2lvbiBvZiB0aGUgRmlyZXN0b3JlIFNESyB3YXMgcHJldmlvdXNseSB1c2VkIGFuZCBzbyB0aGUgcGVyc2lzdGVkICcgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnZGF0YSBpcyBub3QgY29tcGF0aWJsZSB3aXRoIHRoZSB2ZXJzaW9uIG9mIHRoZSBTREsgeW91IGFyZSBub3cgdXNpbmcuIFRoZSBTREsgJyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICd3aWxsIG9wZXJhdGUgd2l0aCBwZXJzaXN0ZW5jZSBkaXNhYmxlZC4gSWYgeW91IG5lZWQgcGVyc2lzdGVuY2UsIHBsZWFzZSAnICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ3JlLXVwZ3JhZGUgdG8gYSBuZXdlciB2ZXJzaW9uIG9mIHRoZSBTREsgb3IgZWxzZSBjbGVhciB0aGUgcGVyc2lzdGVkIEluZGV4ZWREQiAnICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ2RhdGEgZm9yIHlvdXIgYXBwIHRvIHN0YXJ0IGZyZXNoLicpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChlcnJvcik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHJlcXVlc3Qub251cGdyYWRlbmVlZGVkID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICBkZWJ1ZyhMT0dfVEFHLCAnRGF0YWJhc2UgXCInICsgbmFtZSArICdcIiByZXF1aXJlcyB1cGdyYWRlIGZyb20gdmVyc2lvbjonLCBldmVudC5vbGRWZXJzaW9uKTtcclxuICAgICAgICAgICAgICAgIHZhciBkYiA9IGV2ZW50LnRhcmdldC5yZXN1bHQ7XHJcbiAgICAgICAgICAgICAgICBzY2hlbWFDb252ZXJ0ZXJcclxuICAgICAgICAgICAgICAgICAgICAuY3JlYXRlT3JVcGdyYWRlKGRiLCByZXF1ZXN0LnRyYW5zYWN0aW9uLCBldmVudC5vbGRWZXJzaW9uLCBTQ0hFTUFfVkVSU0lPTilcclxuICAgICAgICAgICAgICAgICAgICAubmV4dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVidWcoTE9HX1RBRywgJ0RhdGFiYXNlIHVwZ3JhZGUgdG8gdmVyc2lvbiAnICsgU0NIRU1BX1ZFUlNJT04gKyAnIGNvbXBsZXRlJyk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9KS50b1Byb21pc2UoKTtcclxuICAgIH07XHJcbiAgICAvKiogRGVsZXRlcyB0aGUgc3BlY2lmaWVkIGRhdGFiYXNlLiAqL1xyXG4gICAgU2ltcGxlRGIuZGVsZXRlID0gZnVuY3Rpb24gKG5hbWUpIHtcclxuICAgICAgICBkZWJ1ZyhMT0dfVEFHLCAnUmVtb3ZpbmcgZGF0YWJhc2U6JywgbmFtZSk7XHJcbiAgICAgICAgcmV0dXJuIHdyYXBSZXF1ZXN0KHdpbmRvdy5pbmRleGVkREIuZGVsZXRlRGF0YWJhc2UobmFtZSkpLnRvUHJvbWlzZSgpO1xyXG4gICAgfTtcclxuICAgIC8qKiBSZXR1cm5zIHRydWUgaWYgSW5kZXhlZERCIGlzIGF2YWlsYWJsZSBpbiB0aGUgY3VycmVudCBlbnZpcm9ubWVudC4gKi9cclxuICAgIFNpbXBsZURiLmlzQXZhaWxhYmxlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSAndW5kZWZpbmVkJyB8fCB3aW5kb3cuaW5kZXhlZERCID09IG51bGwpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoU2ltcGxlRGIuaXNNb2NrUGVyc2lzdGVuY2UoKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gSW4gc29tZSBOb2RlIGVudmlyb25tZW50cywgYHdpbmRvd2AgaXMgZGVmaW5lZCwgYnV0IGB3aW5kb3cubmF2aWdhdG9yYCBpc1xyXG4gICAgICAgIC8vIG5vdC4gV2UgZG9uJ3Qgc3VwcG9ydCBJbmRleGVkREIgcGVyc2lzdGVuY2UgaW4gTm9kZSBpZiB0aGVcclxuICAgICAgICAvLyBpc01vY2tQZXJzaXN0ZW5jZSgpIGNoZWNrIGFib3ZlIHJldHVybnMgZmFsc2UuXHJcbiAgICAgICAgaWYgKHdpbmRvdy5uYXZpZ2F0b3IgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFdlIGV4dGVuc2l2ZWx5IHVzZSBpbmRleGVkIGFycmF5IHZhbHVlcyBhbmQgY29tcG91bmQga2V5cyxcclxuICAgICAgICAvLyB3aGljaCBJRSBhbmQgRWRnZSBkbyBub3Qgc3VwcG9ydC4gSG93ZXZlciwgdGhleSBzdGlsbCBoYXZlIGluZGV4ZWREQlxyXG4gICAgICAgIC8vIGRlZmluZWQgb24gdGhlIHdpbmRvdywgc28gd2UgbmVlZCB0byBjaGVjayBmb3IgdGhlbSBoZXJlIGFuZCBtYWtlIHN1cmVcclxuICAgICAgICAvLyB0byByZXR1cm4gdGhhdCBwZXJzaXN0ZW5jZSBpcyBub3QgZW5hYmxlZCBmb3IgdGhvc2UgYnJvd3NlcnMuXHJcbiAgICAgICAgLy8gRm9yIHRyYWNraW5nIHN1cHBvcnQgb2YgdGhpcyBmZWF0dXJlLCBzZWUgaGVyZTpcclxuICAgICAgICAvLyBodHRwczovL2RldmVsb3Blci5taWNyb3NvZnQuY29tL2VuLXVzL21pY3Jvc29mdC1lZGdlL3BsYXRmb3JtL3N0YXR1cy9pbmRleGVkZGJhcnJheXNhbmRtdWx0aWVudHJ5c3VwcG9ydC9cclxuICAgICAgICAvLyBDaGVjayB0aGUgVUEgc3RyaW5nIHRvIGZpbmQgb3V0IHRoZSBicm93c2VyLlxyXG4gICAgICAgIHZhciB1YSA9IHV0aWwuZ2V0VUEoKTtcclxuICAgICAgICAvLyBJRSAxMFxyXG4gICAgICAgIC8vIHVhID0gJ01vemlsbGEvNS4wIChjb21wYXRpYmxlOyBNU0lFIDEwLjA7IFdpbmRvd3MgTlQgNi4yOyBUcmlkZW50LzYuMCknO1xyXG4gICAgICAgIC8vIElFIDExXHJcbiAgICAgICAgLy8gdWEgPSAnTW96aWxsYS81LjAgKFdpbmRvd3MgTlQgNi4zOyBUcmlkZW50LzcuMDsgcnY6MTEuMCkgbGlrZSBHZWNrbyc7XHJcbiAgICAgICAgLy8gRWRnZVxyXG4gICAgICAgIC8vIHVhID0gJ01vemlsbGEvNS4wIChXaW5kb3dzIE5UIDEwLjA7IFdPVzY0KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLFxyXG4gICAgICAgIC8vIGxpa2UgR2Vja28pIENocm9tZS8zOS4wLjIxNzEuNzEgU2FmYXJpLzUzNy4zNiBFZGdlLzEyLjAnO1xyXG4gICAgICAgIC8vIGlPUyBTYWZhcmk6IERpc2FibGUgZm9yIHVzZXJzIHJ1bm5pbmcgaU9TIHZlcnNpb24gPCAxMC5cclxuICAgICAgICB2YXIgaU9TVmVyc2lvbiA9IFNpbXBsZURiLmdldElPU1ZlcnNpb24odWEpO1xyXG4gICAgICAgIHZhciBpc1Vuc3VwcG9ydGVkSU9TID0gMCA8IGlPU1ZlcnNpb24gJiYgaU9TVmVyc2lvbiA8IDEwO1xyXG4gICAgICAgIC8vIEFuZHJvaWQgYnJvd3NlcjogRGlzYWJsZSBmb3IgdXNlcnNlIHJ1bm5pbmcgdmVyc2lvbiA8IDQuNS5cclxuICAgICAgICB2YXIgYW5kcm9pZFZlcnNpb24gPSBTaW1wbGVEYi5nZXRBbmRyb2lkVmVyc2lvbih1YSk7XHJcbiAgICAgICAgdmFyIGlzVW5zdXBwb3J0ZWRBbmRyb2lkID0gMCA8IGFuZHJvaWRWZXJzaW9uICYmIGFuZHJvaWRWZXJzaW9uIDwgNC41O1xyXG4gICAgICAgIGlmICh1YS5pbmRleE9mKCdNU0lFICcpID4gMCB8fFxyXG4gICAgICAgICAgICB1YS5pbmRleE9mKCdUcmlkZW50LycpID4gMCB8fFxyXG4gICAgICAgICAgICB1YS5pbmRleE9mKCdFZGdlLycpID4gMCB8fFxyXG4gICAgICAgICAgICBpc1Vuc3VwcG9ydGVkSU9TIHx8XHJcbiAgICAgICAgICAgIGlzVW5zdXBwb3J0ZWRBbmRyb2lkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgYmFja2luZyBJbmRleGVkREIgc3RvcmUgaXMgdGhlIE5vZGUgSW5kZXhlZERCU2hpbVxyXG4gICAgICogKHNlZSBodHRwczovL2dpdGh1Yi5jb20vYXhlbWNsaW9uL0luZGV4ZWREQlNoaW0pLlxyXG4gICAgICovXHJcbiAgICBTaW1wbGVEYi5pc01vY2tQZXJzaXN0ZW5jZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgcmV0dXJuICh0eXBlb2YgcHJvY2VzcyAhPT0gJ3VuZGVmaW5lZCcgJiZcclxuICAgICAgICAgICAgKChfYSA9IHByb2Nlc3MuZW52KSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuVVNFX01PQ0tfUEVSU0lTVEVOQ0UpID09PSAnWUVTJyk7XHJcbiAgICB9O1xyXG4gICAgLyoqIEhlbHBlciB0byBnZXQgYSB0eXBlZCBTaW1wbGVEYlN0b3JlIGZyb20gYSB0cmFuc2FjdGlvbi4gKi9cclxuICAgIFNpbXBsZURiLmdldFN0b3JlID0gZnVuY3Rpb24gKHR4biwgc3RvcmUpIHtcclxuICAgICAgICByZXR1cm4gdHhuLnN0b3JlKHN0b3JlKTtcclxuICAgIH07XHJcbiAgICAvLyB2aXNpYmxlIGZvciB0ZXN0aW5nXHJcbiAgICAvKiogUGFyc2UgVXNlciBBZ2VudCB0byBkZXRlcm1pbmUgaU9TIHZlcnNpb24uIFJldHVybnMgLTEgaWYgbm90IGZvdW5kLiAqL1xyXG4gICAgU2ltcGxlRGIuZ2V0SU9TVmVyc2lvbiA9IGZ1bmN0aW9uICh1YSkge1xyXG4gICAgICAgIHZhciBpT1NWZXJzaW9uUmVnZXggPSB1YS5tYXRjaCgvaSg/OnBob25lfHBhZHxwb2QpIG9zIChbXFxkX10rKS9pKTtcclxuICAgICAgICB2YXIgdmVyc2lvbiA9IGlPU1ZlcnNpb25SZWdleFxyXG4gICAgICAgICAgICA/IGlPU1ZlcnNpb25SZWdleFsxXVxyXG4gICAgICAgICAgICAgICAgLnNwbGl0KCdfJylcclxuICAgICAgICAgICAgICAgIC5zbGljZSgwLCAyKVxyXG4gICAgICAgICAgICAgICAgLmpvaW4oJy4nKVxyXG4gICAgICAgICAgICA6ICctMSc7XHJcbiAgICAgICAgcmV0dXJuIE51bWJlcih2ZXJzaW9uKTtcclxuICAgIH07XHJcbiAgICAvLyB2aXNpYmxlIGZvciB0ZXN0aW5nXHJcbiAgICAvKiogUGFyc2UgVXNlciBBZ2VudCB0byBkZXRlcm1pbmUgQW5kcm9pZCB2ZXJzaW9uLiBSZXR1cm5zIC0xIGlmIG5vdCBmb3VuZC4gKi9cclxuICAgIFNpbXBsZURiLmdldEFuZHJvaWRWZXJzaW9uID0gZnVuY3Rpb24gKHVhKSB7XHJcbiAgICAgICAgdmFyIGFuZHJvaWRWZXJzaW9uUmVnZXggPSB1YS5tYXRjaCgvQW5kcm9pZCAoW1xcZC5dKykvaSk7XHJcbiAgICAgICAgdmFyIHZlcnNpb24gPSBhbmRyb2lkVmVyc2lvblJlZ2V4XHJcbiAgICAgICAgICAgID8gYW5kcm9pZFZlcnNpb25SZWdleFsxXVxyXG4gICAgICAgICAgICAgICAgLnNwbGl0KCcuJylcclxuICAgICAgICAgICAgICAgIC5zbGljZSgwLCAyKVxyXG4gICAgICAgICAgICAgICAgLmpvaW4oJy4nKVxyXG4gICAgICAgICAgICA6ICctMSc7XHJcbiAgICAgICAgcmV0dXJuIE51bWJlcih2ZXJzaW9uKTtcclxuICAgIH07XHJcbiAgICBTaW1wbGVEYi5wcm90b3R5cGUuc2V0VmVyc2lvbkNoYW5nZUxpc3RlbmVyID0gZnVuY3Rpb24gKHZlcnNpb25DaGFuZ2VMaXN0ZW5lcikge1xyXG4gICAgICAgIHRoaXMuZGIub252ZXJzaW9uY2hhbmdlID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIHJldHVybiB2ZXJzaW9uQ2hhbmdlTGlzdGVuZXIoZXZlbnQpO1xyXG4gICAgICAgIH07XHJcbiAgICB9O1xyXG4gICAgU2ltcGxlRGIucHJvdG90eXBlLnJ1blRyYW5zYWN0aW9uID0gZnVuY3Rpb24gKG1vZGUsIG9iamVjdFN0b3JlcywgdHJhbnNhY3Rpb25Gbikge1xyXG4gICAgICAgIHJldHVybiB0c2xpYi5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHJlYWRvbmx5LCBpZGVtcG90ZW50LCBhdHRlbXB0TnVtYmVyLCBfbG9vcF8xLCB0aGlzXzEsIHN0YXRlXzE7XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYi5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRvbmx5ID0gbW9kZS5zdGFydHNXaXRoKCdyZWFkb25seScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZGVtcG90ZW50ID0gbW9kZS5lbmRzV2l0aCgnaWRlbXBvdGVudCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhdHRlbXB0TnVtYmVyID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2xvb3BfMSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0cmFuc2FjdGlvbiwgdHJhbnNhY3Rpb25GblJlc3VsdCwgZXJyb3JfMSwgcmV0cnlhYmxlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRzbGliLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKythdHRlbXB0TnVtYmVyO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb24gPSBTaW1wbGVEYlRyYW5zYWN0aW9uLm9wZW4odGhpc18xLmRiLCByZWFkb25seSA/ICdyZWFkb25seScgOiAncmVhZHdyaXRlJywgb2JqZWN0U3RvcmVzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9hLmxhYmVsID0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2EudHJ5cy5wdXNoKFsxLCAzLCAsIDRdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uRm5SZXN1bHQgPSB0cmFuc2FjdGlvbkZuKHRyYW5zYWN0aW9uKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBBYm9ydCB0aGUgdHJhbnNhY3Rpb24gaWYgdGhlcmUgd2FzIGFuIGVycm9yLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uLmFib3J0KGVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBXZSBjYW5ub3QgYWN0dWFsbHkgcmVjb3ZlciwgYW5kIGNhbGxpbmcgYGFib3J0KClgIHdpbGwgY2F1c2UgdGhlIHRyYW5zYWN0aW9uJ3NcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb21wbGV0aW9uIHByb21pc2UgdG8gYmUgcmVqZWN0ZWQuIFRoaXMgaW4gdHVybiBtZWFucyB0aGF0IHdlIHdvbid0IHVzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGB0cmFuc2FjdGlvbkZuUmVzdWx0YCBiZWxvdy4gV2UgcmV0dXJuIGEgcmVqZWN0aW9uIGhlcmUgc28gdGhhdCB3ZSBkb24ndCBhZGQgdGhlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcG9zc2liaWxpdHkgb2YgcmV0dXJuaW5nIGB2b2lkYCB0byB0aGUgdHlwZSBvZiBgdHJhbnNhY3Rpb25GblJlc3VsdGAuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZWplY3QoZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudG9Qcm9taXNlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBBcyBub3RlZCBhYm92ZSwgZXJyb3JzIGFyZSBwcm9wYWdhdGVkIGJ5IGFib3J0aW5nIHRoZSB0cmFuc2FjdGlvbi4gU29cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdlIHN3YWxsb3cgYW55IGVycm9yIGhlcmUgdG8gYXZvaWQgdGhlIGJyb3dzZXIgbG9nZ2luZyBpdCBhcyB1bmhhbmRsZWQuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2FjdGlvbkZuUmVzdWx0LmNhdGNoKGZ1bmN0aW9uICgpIHsgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBXYWl0IGZvciB0aGUgdHJhbnNhY3Rpb24gdG8gY29tcGxldGUgKGkuZS4gSW5kZXhlZERiJ3Mgb25zdWNjZXNzIGV2ZW50IHRvXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBmaXJlKSwgYnV0IHN0aWxsIHJldHVybiB0aGUgb3JpZ2luYWwgdHJhbnNhY3Rpb25GblJlc3VsdCBiYWNrIHRvIHRoZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2FsbGVyLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdHJhbnNhY3Rpb24uY29tcGxldGlvblByb21pc2VdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBXYWl0IGZvciB0aGUgdHJhbnNhY3Rpb24gdG8gY29tcGxldGUgKGkuZS4gSW5kZXhlZERiJ3Mgb25zdWNjZXNzIGV2ZW50IHRvXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBmaXJlKSwgYnV0IHN0aWxsIHJldHVybiB0aGUgb3JpZ2luYWwgdHJhbnNhY3Rpb25GblJlc3VsdCBiYWNrIHRvIHRoZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2FsbGVyLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHsgdmFsdWU6IHRyYW5zYWN0aW9uRm5SZXN1bHQgfV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yXzEgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXRyeWFibGUgPSBpZGVtcG90ZW50ICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JfMS5uYW1lICE9PSAnRmlyZWJhc2VFcnJvcicgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRlbXB0TnVtYmVyIDwgVFJBTlNBQ1RJT05fUkVUUllfQ09VTlQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWJ1ZyhMT0dfVEFHLCAnVHJhbnNhY3Rpb24gZmFpbGVkIHdpdGggZXJyb3I6ICVzLiBSZXRyeWluZzogJXMuJywgZXJyb3JfMS5tZXNzYWdlLCByZXRyeWFibGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFyZXRyeWFibGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgeyB2YWx1ZTogUHJvbWlzZS5yZWplY3QoZXJyb3JfMSkgfV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCA0XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0OiByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNfMSA9IHRoaXM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLmxhYmVsID0gMTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNSAvKnlpZWxkKiovLCBfbG9vcF8xKCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVfMSA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBzdGF0ZV8xID09PSBcIm9iamVjdFwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHN0YXRlXzEudmFsdWVdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCAxXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6IHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgU2ltcGxlRGIucHJvdG90eXBlLmNsb3NlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuZGIuY2xvc2UoKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gU2ltcGxlRGI7XHJcbn0oKSk7XHJcbi8qKlxyXG4gKiBBIGNvbnRyb2xsZXIgZm9yIGl0ZXJhdGluZyBvdmVyIGEga2V5IHJhbmdlIG9yIGluZGV4LiBJdCBhbGxvd3MgYW4gaXRlcmF0ZVxyXG4gKiBjYWxsYmFjayB0byBkZWxldGUgdGhlIGN1cnJlbnRseS1yZWZlcmVuY2VkIG9iamVjdCwgb3IganVtcCB0byBhIG5ldyBrZXlcclxuICogd2l0aGluIHRoZSBrZXkgcmFuZ2Ugb3IgaW5kZXguXHJcbiAqL1xyXG52YXIgSXRlcmF0aW9uQ29udHJvbGxlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEl0ZXJhdGlvbkNvbnRyb2xsZXIoZGJDdXJzb3IpIHtcclxuICAgICAgICB0aGlzLmRiQ3Vyc29yID0gZGJDdXJzb3I7XHJcbiAgICAgICAgdGhpcy5zaG91bGRTdG9wID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5uZXh0S2V5ID0gbnVsbDtcclxuICAgIH1cclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShJdGVyYXRpb25Db250cm9sbGVyLnByb3RvdHlwZSwgXCJpc0RvbmVcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zaG91bGRTdG9wO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEl0ZXJhdGlvbkNvbnRyb2xsZXIucHJvdG90eXBlLCBcInNraXBUb0tleVwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm5leHRLZXk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoSXRlcmF0aW9uQ29udHJvbGxlci5wcm90b3R5cGUsIFwiY3Vyc29yXCIsIHtcclxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgICAgICB0aGlzLmRiQ3Vyc29yID0gdmFsdWU7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICAvKipcclxuICAgICAqIFRoaXMgZnVuY3Rpb24gY2FuIGJlIGNhbGxlZCB0byBzdG9wIGl0ZXJhdGlvbiBhdCBhbnkgcG9pbnQuXHJcbiAgICAgKi9cclxuICAgIEl0ZXJhdGlvbkNvbnRyb2xsZXIucHJvdG90eXBlLmRvbmUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5zaG91bGRTdG9wID0gdHJ1ZTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFRoaXMgZnVuY3Rpb24gY2FuIGJlIGNhbGxlZCB0byBza2lwIHRvIHRoYXQgbmV4dCBrZXksIHdoaWNoIGNvdWxkIGJlXHJcbiAgICAgKiBhbiBpbmRleCBvciBhIHByaW1hcnkga2V5LlxyXG4gICAgICovXHJcbiAgICBJdGVyYXRpb25Db250cm9sbGVyLnByb3RvdHlwZS5za2lwID0gZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgIHRoaXMubmV4dEtleSA9IGtleTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIERlbGV0ZSB0aGUgY3VycmVudCBjdXJzb3IgdmFsdWUgZnJvbSB0aGUgb2JqZWN0IHN0b3JlLlxyXG4gICAgICpcclxuICAgICAqIE5PVEU6IFlvdSBDQU5OT1QgZG8gdGhpcyB3aXRoIGEga2V5c09ubHkgcXVlcnkuXHJcbiAgICAgKi9cclxuICAgIEl0ZXJhdGlvbkNvbnRyb2xsZXIucHJvdG90eXBlLmRlbGV0ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gd3JhcFJlcXVlc3QodGhpcy5kYkN1cnNvci5kZWxldGUoKSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEl0ZXJhdGlvbkNvbnRyb2xsZXI7XHJcbn0oKSk7XHJcbi8qKlxyXG4gKiBXcmFwcyBhbiBJREJUcmFuc2FjdGlvbiBhbmQgZXhwb3NlcyBhIHN0b3JlKCkgbWV0aG9kIHRvIGdldCBhIGhhbmRsZSB0byBhXHJcbiAqIHNwZWNpZmljIG9iamVjdCBzdG9yZS5cclxuICovXHJcbnZhciBTaW1wbGVEYlRyYW5zYWN0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gU2ltcGxlRGJUcmFuc2FjdGlvbih0cmFuc2FjdGlvbikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy50cmFuc2FjdGlvbiA9IHRyYW5zYWN0aW9uO1xyXG4gICAgICAgIHRoaXMuYWJvcnRlZCA9IGZhbHNlO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHdpdGggdGhlIHJlc3VsdCBvZiB0aGUgSW5kZXhlZERiIHRyYW5zYWN0aW9uLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuY29tcGxldGlvbkRlZmVycmVkID0gbmV3IERlZmVycmVkKCk7XHJcbiAgICAgICAgdGhpcy50cmFuc2FjdGlvbi5vbmNvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBfdGhpcy5jb21wbGV0aW9uRGVmZXJyZWQucmVzb2x2ZSgpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy50cmFuc2FjdGlvbi5vbmFib3J0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAodHJhbnNhY3Rpb24uZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLmNvbXBsZXRpb25EZWZlcnJlZC5yZWplY3QodHJhbnNhY3Rpb24uZXJyb3IpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuY29tcGxldGlvbkRlZmVycmVkLnJlc29sdmUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy50cmFuc2FjdGlvbi5vbmVycm9yID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIHZhciBlcnJvciA9IGNoZWNrRm9yQW5kUmVwb3J0aU9TRXJyb3IoZXZlbnQudGFyZ2V0LmVycm9yKTtcclxuICAgICAgICAgICAgX3RoaXMuY29tcGxldGlvbkRlZmVycmVkLnJlamVjdChlcnJvcik7XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIFNpbXBsZURiVHJhbnNhY3Rpb24ub3BlbiA9IGZ1bmN0aW9uIChkYiwgbW9kZSwgb2JqZWN0U3RvcmVOYW1lcykge1xyXG4gICAgICAgIHJldHVybiBuZXcgU2ltcGxlRGJUcmFuc2FjdGlvbihkYi50cmFuc2FjdGlvbihvYmplY3RTdG9yZU5hbWVzLCBtb2RlKSk7XHJcbiAgICB9O1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFNpbXBsZURiVHJhbnNhY3Rpb24ucHJvdG90eXBlLCBcImNvbXBsZXRpb25Qcm9taXNlXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29tcGxldGlvbkRlZmVycmVkLnByb21pc2U7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBTaW1wbGVEYlRyYW5zYWN0aW9uLnByb3RvdHlwZS5hYm9ydCA9IGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgIGlmIChlcnJvcikge1xyXG4gICAgICAgICAgICB0aGlzLmNvbXBsZXRpb25EZWZlcnJlZC5yZWplY3QoZXJyb3IpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIXRoaXMuYWJvcnRlZCkge1xyXG4gICAgICAgICAgICBkZWJ1ZyhMT0dfVEFHLCAnQWJvcnRpbmcgdHJhbnNhY3Rpb246JywgZXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ0NsaWVudC1pbml0aWF0ZWQgYWJvcnQnKTtcclxuICAgICAgICAgICAgdGhpcy5hYm9ydGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgdGhpcy50cmFuc2FjdGlvbi5hYm9ydCgpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgYSBTaW1wbGVEYlN0b3JlPEtleVR5cGUsIFZhbHVlVHlwZT4gZm9yIHRoZSBzcGVjaWZpZWQgc3RvcmUuIEFsbFxyXG4gICAgICogb3BlcmF0aW9ucyBwZXJmb3JtZWQgb24gdGhlIFNpbXBsZURiU3RvcmUgaGFwcGVuIHdpdGhpbiB0aGUgY29udGV4dCBvZiB0aGlzXHJcbiAgICAgKiB0cmFuc2FjdGlvbiBhbmQgaXQgY2Fubm90IGJlIHVzZWQgYW55bW9yZSBvbmNlIHRoZSB0cmFuc2FjdGlvbiBpc1xyXG4gICAgICogY29tcGxldGVkLlxyXG4gICAgICpcclxuICAgICAqIE5vdGUgdGhhdCB3ZSBjYW4ndCBhY3R1YWxseSBlbmZvcmNlIHRoYXQgdGhlIEtleVR5cGUgYW5kIFZhbHVlVHlwZSBhcmVcclxuICAgICAqIGNvcnJlY3QsIGJ1dCB0aGV5IGFsbG93IHR5cGUgc2FmZXR5IHRocm91Z2ggdGhlIHJlc3Qgb2YgdGhlIGNvbnN1bWluZyBjb2RlLlxyXG4gICAgICovXHJcbiAgICBTaW1wbGVEYlRyYW5zYWN0aW9uLnByb3RvdHlwZS5zdG9yZSA9IGZ1bmN0aW9uIChzdG9yZU5hbWUpIHtcclxuICAgICAgICB2YXIgc3RvcmUgPSB0aGlzLnRyYW5zYWN0aW9uLm9iamVjdFN0b3JlKHN0b3JlTmFtZSk7XHJcbiAgICAgICAgYXNzZXJ0KCEhc3RvcmUsICdPYmplY3Qgc3RvcmUgbm90IHBhcnQgb2YgdHJhbnNhY3Rpb246ICcgKyBzdG9yZU5hbWUpO1xyXG4gICAgICAgIHJldHVybiBuZXcgU2ltcGxlRGJTdG9yZShzdG9yZSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFNpbXBsZURiVHJhbnNhY3Rpb247XHJcbn0oKSk7XHJcbi8qKlxyXG4gKiBBIHdyYXBwZXIgYXJvdW5kIGFuIElEQk9iamVjdFN0b3JlIHByb3ZpZGluZyBhbiBBUEkgdGhhdDpcclxuICpcclxuICogMSkgSGFzIGdlbmVyaWMgS2V5VHlwZSAvIFZhbHVlVHlwZSBwYXJhbWV0ZXJzIHRvIHByb3ZpZGUgc3Ryb25nbHktdHlwZWRcclxuICogbWV0aG9kcyBmb3IgYWN0aW5nIGFnYWluc3QgdGhlIG9iamVjdCBzdG9yZS5cclxuICogMikgRGVhbHMgd2l0aCBJbmRleGVkREIncyBvbnN1Y2Nlc3MgLyBvbmVycm9yIGV2ZW50IGNhbGxiYWNrcywgbWFraW5nIGV2ZXJ5XHJcbiAqIG1ldGhvZCByZXR1cm4gYSBQZXJzaXN0ZW5jZVByb21pc2UgaW5zdGVhZC5cclxuICogMykgUHJvdmlkZXMgYSBoaWdoZXItbGV2ZWwgQVBJIHRvIGF2b2lkIG5lZWRpbmcgdG8gZG8gZXhjZXNzaXZlIHdyYXBwaW5nIG9mXHJcbiAqIGludGVybWVkaWF0ZSBJbmRleGVkREIgdHlwZXMgKElEQkN1cnNvcldpdGhWYWx1ZSwgZXRjLilcclxuICovXHJcbnZhciBTaW1wbGVEYlN0b3JlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gU2ltcGxlRGJTdG9yZShzdG9yZSkge1xyXG4gICAgICAgIHRoaXMuc3RvcmUgPSBzdG9yZTtcclxuICAgIH1cclxuICAgIFNpbXBsZURiU3RvcmUucHJvdG90eXBlLnB1dCA9IGZ1bmN0aW9uIChrZXlPclZhbHVlLCB2YWx1ZSkge1xyXG4gICAgICAgIHZhciByZXF1ZXN0O1xyXG4gICAgICAgIGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGRlYnVnKExPR19UQUcsICdQVVQnLCB0aGlzLnN0b3JlLm5hbWUsIGtleU9yVmFsdWUsIHZhbHVlKTtcclxuICAgICAgICAgICAgcmVxdWVzdCA9IHRoaXMuc3RvcmUucHV0KHZhbHVlLCBrZXlPclZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGRlYnVnKExPR19UQUcsICdQVVQnLCB0aGlzLnN0b3JlLm5hbWUsICc8YXV0by1rZXk+Jywga2V5T3JWYWx1ZSk7XHJcbiAgICAgICAgICAgIHJlcXVlc3QgPSB0aGlzLnN0b3JlLnB1dChrZXlPclZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHdyYXBSZXF1ZXN0KHJlcXVlc3QpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQWRkcyBhIG5ldyB2YWx1ZSBpbnRvIGFuIE9iamVjdCBTdG9yZSBhbmQgcmV0dXJucyB0aGUgbmV3IGtleS4gU2ltaWxhciB0b1xyXG4gICAgICogSW5kZXhlZERiJ3MgYGFkZCgpYCwgdGhpcyBtZXRob2Qgd2lsbCBmYWlsIG9uIHByaW1hcnkga2V5IGNvbGxpc2lvbnMuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHZhbHVlIFRoZSBvYmplY3QgdG8gd3JpdGUuXHJcbiAgICAgKiBAcmV0dXJuIFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIGFkZC5cclxuICAgICAqL1xyXG4gICAgU2ltcGxlRGJTdG9yZS5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgICAgZGVidWcoTE9HX1RBRywgJ0FERCcsIHRoaXMuc3RvcmUubmFtZSwgdmFsdWUsIHZhbHVlKTtcclxuICAgICAgICB2YXIgcmVxdWVzdCA9IHRoaXMuc3RvcmUuYWRkKHZhbHVlKTtcclxuICAgICAgICByZXR1cm4gd3JhcFJlcXVlc3QocmVxdWVzdCk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBHZXRzIHRoZSBvYmplY3Qgd2l0aCB0aGUgc3BlY2lmaWVkIGtleSBmcm9tIHRoZSBzcGVjaWZpZWQgc3RvcmUsIG9yIG51bGxcclxuICAgICAqIGlmIG5vIG9iamVjdCBleGlzdHMgd2l0aCB0aGUgc3BlY2lmaWVkIGtleS5cclxuICAgICAqXHJcbiAgICAgKiBAa2V5IFRoZSBrZXkgb2YgdGhlIG9iamVjdCB0byBnZXQuXHJcbiAgICAgKiBAcmV0dXJuIFRoZSBvYmplY3Qgd2l0aCB0aGUgc3BlY2lmaWVkIGtleSBvciBudWxsIGlmIG5vIG9iamVjdCBleGlzdHMuXHJcbiAgICAgKi9cclxuICAgIFNpbXBsZURiU3RvcmUucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhciByZXF1ZXN0ID0gdGhpcy5zdG9yZS5nZXQoa2V5KTtcclxuICAgICAgICAvLyBXZSdyZSBkb2luZyBhbiB1bnNhZmUgY2FzdCB0byBWYWx1ZVR5cGUuXHJcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuICAgICAgICByZXR1cm4gd3JhcFJlcXVlc3QocmVxdWVzdCkubmV4dChmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgIC8vIE5vcm1hbGl6ZSBub25leGlzdGVuY2UgdG8gbnVsbC5cclxuICAgICAgICAgICAgaWYgKHJlc3VsdCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGRlYnVnKExPR19UQUcsICdHRVQnLCBfdGhpcy5zdG9yZS5uYW1lLCBrZXksIHJlc3VsdCk7XHJcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgU2ltcGxlRGJTdG9yZS5wcm90b3R5cGUuZGVsZXRlID0gZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgIGRlYnVnKExPR19UQUcsICdERUxFVEUnLCB0aGlzLnN0b3JlLm5hbWUsIGtleSk7XHJcbiAgICAgICAgdmFyIHJlcXVlc3QgPSB0aGlzLnN0b3JlLmRlbGV0ZShrZXkpO1xyXG4gICAgICAgIHJldHVybiB3cmFwUmVxdWVzdChyZXF1ZXN0KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIElmIHdlIGV2ZXIgbmVlZCBtb3JlIG9mIHRoZSBjb3VudCB2YXJpYW50cywgd2UgY2FuIGFkZCBvdmVybG9hZHMuIEZvciBub3csXHJcbiAgICAgKiBhbGwgd2UgbmVlZCBpcyB0byBjb3VudCBldmVyeXRoaW5nIGluIGEgc3RvcmUuXHJcbiAgICAgKlxyXG4gICAgICogUmV0dXJucyB0aGUgbnVtYmVyIG9mIHJvd3MgaW4gdGhlIHN0b3JlLlxyXG4gICAgICovXHJcbiAgICBTaW1wbGVEYlN0b3JlLnByb3RvdHlwZS5jb3VudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBkZWJ1ZyhMT0dfVEFHLCAnQ09VTlQnLCB0aGlzLnN0b3JlLm5hbWUpO1xyXG4gICAgICAgIHZhciByZXF1ZXN0ID0gdGhpcy5zdG9yZS5jb3VudCgpO1xyXG4gICAgICAgIHJldHVybiB3cmFwUmVxdWVzdChyZXF1ZXN0KTtcclxuICAgIH07XHJcbiAgICBTaW1wbGVEYlN0b3JlLnByb3RvdHlwZS5sb2FkQWxsID0gZnVuY3Rpb24gKGluZGV4T3JSYW5nZSwgcmFuZ2UpIHtcclxuICAgICAgICB2YXIgY3Vyc29yID0gdGhpcy5jdXJzb3IodGhpcy5vcHRpb25zKGluZGV4T3JSYW5nZSwgcmFuZ2UpKTtcclxuICAgICAgICB2YXIgcmVzdWx0cyA9IFtdO1xyXG4gICAgICAgIHJldHVybiB0aGlzLml0ZXJhdGVDdXJzb3IoY3Vyc29yLCBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xyXG4gICAgICAgICAgICByZXN1bHRzLnB1c2godmFsdWUpO1xyXG4gICAgICAgIH0pLm5leHQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0cztcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBTaW1wbGVEYlN0b3JlLnByb3RvdHlwZS5kZWxldGVBbGwgPSBmdW5jdGlvbiAoaW5kZXhPclJhbmdlLCByYW5nZSkge1xyXG4gICAgICAgIGRlYnVnKExPR19UQUcsICdERUxFVEUgQUxMJywgdGhpcy5zdG9yZS5uYW1lKTtcclxuICAgICAgICB2YXIgb3B0aW9ucyA9IHRoaXMub3B0aW9ucyhpbmRleE9yUmFuZ2UsIHJhbmdlKTtcclxuICAgICAgICBvcHRpb25zLmtleXNPbmx5ID0gZmFsc2U7XHJcbiAgICAgICAgdmFyIGN1cnNvciA9IHRoaXMuY3Vyc29yKG9wdGlvbnMpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLml0ZXJhdGVDdXJzb3IoY3Vyc29yLCBmdW5jdGlvbiAoa2V5LCB2YWx1ZSwgY29udHJvbCkge1xyXG4gICAgICAgICAgICAvLyBOT1RFOiBDYWxsaW5nIGRlbGV0ZSgpIG9uIGEgY3Vyc29yIGlzIGRvY3VtZW50ZWQgYXMgbW9yZSBlZmZpY2llbnQgdGhhblxyXG4gICAgICAgICAgICAvLyBjYWxsaW5nIGRlbGV0ZSgpIG9uIGFuIG9iamVjdCBzdG9yZSB3aXRoIGEgc2luZ2xlIGtleVxyXG4gICAgICAgICAgICAvLyAoaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0lEQk9iamVjdFN0b3JlL2RlbGV0ZSksXHJcbiAgICAgICAgICAgIC8vIGhvd2V2ZXIsIHRoaXMgcmVxdWlyZXMgdXMgKm5vdCogdG8gdXNlIGEga2V5c09ubHkgY3Vyc29yXHJcbiAgICAgICAgICAgIC8vIChodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvSURCQ3Vyc29yL2RlbGV0ZSkuIFdlXHJcbiAgICAgICAgICAgIC8vIG1heSB3YW50IHRvIGNvbXBhcmUgdGhlIHBlcmZvcm1hbmNlIG9mIGVhY2ggbWV0aG9kLlxyXG4gICAgICAgICAgICByZXR1cm4gY29udHJvbC5kZWxldGUoKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBTaW1wbGVEYlN0b3JlLnByb3RvdHlwZS5pdGVyYXRlID0gZnVuY3Rpb24gKG9wdGlvbnNPckNhbGxiYWNrLCBjYWxsYmFjaykge1xyXG4gICAgICAgIHZhciBvcHRpb25zO1xyXG4gICAgICAgIGlmICghY2FsbGJhY2spIHtcclxuICAgICAgICAgICAgb3B0aW9ucyA9IHt9O1xyXG4gICAgICAgICAgICBjYWxsYmFjayA9IG9wdGlvbnNPckNhbGxiYWNrO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnNPckNhbGxiYWNrO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgY3Vyc29yID0gdGhpcy5jdXJzb3Iob3B0aW9ucyk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaXRlcmF0ZUN1cnNvcihjdXJzb3IsIGNhbGxiYWNrKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEl0ZXJhdGVzIG92ZXIgYSBzdG9yZSwgYnV0IHdhaXRzIGZvciB0aGUgZ2l2ZW4gY2FsbGJhY2sgdG8gY29tcGxldGUgZm9yXHJcbiAgICAgKiBlYWNoIGVudHJ5IGJlZm9yZSBpdGVyYXRpbmcgdGhlIG5leHQgZW50cnkuIFRoaXMgYWxsb3dzIHRoZSBjYWxsYmFjayB0byBkb1xyXG4gICAgICogYXN5bmNocm9ub3VzIHdvcmsgdG8gZGV0ZXJtaW5lIGlmIHRoaXMgaXRlcmF0aW9uIHNob3VsZCBjb250aW51ZS5cclxuICAgICAqXHJcbiAgICAgKiBUaGUgcHJvdmlkZWQgY2FsbGJhY2sgc2hvdWxkIHJldHVybiBgdHJ1ZWAgdG8gY29udGludWUgaXRlcmF0aW9uLCBhbmRcclxuICAgICAqIGBmYWxzZWAgb3RoZXJ3aXNlLlxyXG4gICAgICovXHJcbiAgICBTaW1wbGVEYlN0b3JlLnByb3RvdHlwZS5pdGVyYXRlU2VyaWFsID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgdmFyIGN1cnNvclJlcXVlc3QgPSB0aGlzLmN1cnNvcih7fSk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQZXJzaXN0ZW5jZVByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICBjdXJzb3JSZXF1ZXN0Lm9uZXJyb3IgPSBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgIHZhciBlcnJvciA9IGNoZWNrRm9yQW5kUmVwb3J0aU9TRXJyb3IoZXZlbnQudGFyZ2V0LmVycm9yKTtcclxuICAgICAgICAgICAgICAgIHJlamVjdChlcnJvcik7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGN1cnNvclJlcXVlc3Qub25zdWNjZXNzID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgY3Vyc29yID0gZXZlbnQudGFyZ2V0LnJlc3VsdDtcclxuICAgICAgICAgICAgICAgIGlmICghY3Vyc29yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhbGxiYWNrKGN1cnNvci5wcmltYXJ5S2V5LCBjdXJzb3IudmFsdWUpLm5leHQoZnVuY3Rpb24gKHNob3VsZENvbnRpbnVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNob3VsZENvbnRpbnVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnNvci5jb250aW51ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIFNpbXBsZURiU3RvcmUucHJvdG90eXBlLml0ZXJhdGVDdXJzb3IgPSBmdW5jdGlvbiAoY3Vyc29yUmVxdWVzdCwgZm4pIHtcclxuICAgICAgICB2YXIgcmVzdWx0cyA9IFtdO1xyXG4gICAgICAgIHJldHVybiBuZXcgUGVyc2lzdGVuY2VQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgY3Vyc29yUmVxdWVzdC5vbmVycm9yID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICByZWplY3QoZXZlbnQudGFyZ2V0LmVycm9yKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgY3Vyc29yUmVxdWVzdC5vbnN1Y2Nlc3MgPSBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgIHZhciBjdXJzb3IgPSBldmVudC50YXJnZXQucmVzdWx0O1xyXG4gICAgICAgICAgICAgICAgaWYgKCFjdXJzb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdmFyIGNvbnRyb2xsZXIgPSBuZXcgSXRlcmF0aW9uQ29udHJvbGxlcihjdXJzb3IpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHVzZXJSZXN1bHQgPSBmbihjdXJzb3IucHJpbWFyeUtleSwgY3Vyc29yLnZhbHVlLCBjb250cm9sbGVyKTtcclxuICAgICAgICAgICAgICAgIGlmICh1c2VyUmVzdWx0IGluc3RhbmNlb2YgUGVyc2lzdGVuY2VQcm9taXNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHVzZXJQcm9taXNlID0gdXNlclJlc3VsdC5jYXRjaChmdW5jdGlvbiAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuZG9uZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlamVjdChlcnIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdHMucHVzaCh1c2VyUHJvbWlzZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoY29udHJvbGxlci5pc0RvbmUpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChjb250cm9sbGVyLnNraXBUb0tleSA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGN1cnNvci5jb250aW51ZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY3Vyc29yLmNvbnRpbnVlKGNvbnRyb2xsZXIuc2tpcFRvS2V5KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9KS5uZXh0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS53YWl0Rm9yKHJlc3VsdHMpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIFNpbXBsZURiU3RvcmUucHJvdG90eXBlLm9wdGlvbnMgPSBmdW5jdGlvbiAoaW5kZXhPclJhbmdlLCByYW5nZSkge1xyXG4gICAgICAgIHZhciBpbmRleE5hbWUgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgaWYgKGluZGV4T3JSYW5nZSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgaW5kZXhPclJhbmdlID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICAgICAgaW5kZXhOYW1lID0gaW5kZXhPclJhbmdlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgYXNzZXJ0KHJhbmdlID09PSB1bmRlZmluZWQsICczcmQgYXJndW1lbnQgbXVzdCBub3QgYmUgZGVmaW5lZCBpZiAybmQgaXMgYSByYW5nZS4nKTtcclxuICAgICAgICAgICAgICAgIHJhbmdlID0gaW5kZXhPclJhbmdlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB7IGluZGV4OiBpbmRleE5hbWUsIHJhbmdlOiByYW5nZSB9O1xyXG4gICAgfTtcclxuICAgIFNpbXBsZURiU3RvcmUucHJvdG90eXBlLmN1cnNvciA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XHJcbiAgICAgICAgdmFyIGRpcmVjdGlvbiA9ICduZXh0JztcclxuICAgICAgICBpZiAob3B0aW9ucy5yZXZlcnNlKSB7XHJcbiAgICAgICAgICAgIGRpcmVjdGlvbiA9ICdwcmV2JztcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG9wdGlvbnMuaW5kZXgpIHtcclxuICAgICAgICAgICAgdmFyIGluZGV4ID0gdGhpcy5zdG9yZS5pbmRleChvcHRpb25zLmluZGV4KTtcclxuICAgICAgICAgICAgaWYgKG9wdGlvbnMua2V5c09ubHkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBpbmRleC5vcGVuS2V5Q3Vyc29yKG9wdGlvbnMucmFuZ2UsIGRpcmVjdGlvbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gaW5kZXgub3BlbkN1cnNvcihvcHRpb25zLnJhbmdlLCBkaXJlY3Rpb24pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zdG9yZS5vcGVuQ3Vyc29yKG9wdGlvbnMucmFuZ2UsIGRpcmVjdGlvbik7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHJldHVybiBTaW1wbGVEYlN0b3JlO1xyXG59KCkpO1xyXG4vKipcclxuICogV3JhcHMgYW4gSURCUmVxdWVzdCBpbiBhIFBlcnNpc3RlbmNlUHJvbWlzZSwgdXNpbmcgdGhlIG9uc3VjY2VzcyAvIG9uZXJyb3JcclxuICogaGFuZGxlcnMgdG8gcmVzb2x2ZSAvIHJlamVjdCB0aGUgUGVyc2lzdGVuY2VQcm9taXNlIGFzIGFwcHJvcHJpYXRlLlxyXG4gKi9cclxuZnVuY3Rpb24gd3JhcFJlcXVlc3QocmVxdWVzdCkge1xyXG4gICAgcmV0dXJuIG5ldyBQZXJzaXN0ZW5jZVByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgIHJlcXVlc3Qub25zdWNjZXNzID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSBldmVudC50YXJnZXQucmVzdWx0O1xyXG4gICAgICAgICAgICByZXNvbHZlKHJlc3VsdCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXF1ZXN0Lm9uZXJyb3IgPSBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgdmFyIGVycm9yID0gY2hlY2tGb3JBbmRSZXBvcnRpT1NFcnJvcihldmVudC50YXJnZXQuZXJyb3IpO1xyXG4gICAgICAgICAgICByZWplY3QoZXJyb3IpO1xyXG4gICAgICAgIH07XHJcbiAgICB9KTtcclxufVxyXG4vLyBHdWFyZCBzbyB3ZSBvbmx5IHJlcG9ydCB0aGUgZXJyb3Igb25jZS5cclxudmFyIHJlcG9ydGVkSU9TRXJyb3IgPSBmYWxzZTtcclxuZnVuY3Rpb24gY2hlY2tGb3JBbmRSZXBvcnRpT1NFcnJvcihlcnJvcikge1xyXG4gICAgdmFyIGlPU1ZlcnNpb24gPSBTaW1wbGVEYi5nZXRJT1NWZXJzaW9uKHV0aWwuZ2V0VUEoKSk7XHJcbiAgICBpZiAoaU9TVmVyc2lvbiA+PSAxMi4yICYmIGlPU1ZlcnNpb24gPCAxMykge1xyXG4gICAgICAgIHZhciBJT1NfRVJST1IgPSAnQW4gaW50ZXJuYWwgZXJyb3Igd2FzIGVuY291bnRlcmVkIGluIHRoZSBJbmRleGVkIERhdGFiYXNlIHNlcnZlcic7XHJcbiAgICAgICAgaWYgKGVycm9yLm1lc3NhZ2UuaW5kZXhPZihJT1NfRVJST1IpID49IDApIHtcclxuICAgICAgICAgICAgLy8gV3JhcCBlcnJvciBpbiBhIG1vcmUgZGVzY3JpcHRpdmUgb25lLlxyXG4gICAgICAgICAgICB2YXIgbmV3RXJyb3JfMSA9IG5ldyBGaXJlc3RvcmVFcnJvcignaW50ZXJuYWwnLCBcIklPU19JTkRFWEVEREJfQlVHMTogSW5kZXhlZERiIGhhcyB0aHJvd24gJ1wiICsgSU9TX0VSUk9SICsgXCInLiBUaGlzIGlzIGxpa2VseSBcIiArXHJcbiAgICAgICAgICAgICAgICBcImR1ZSB0byBhbiB1bmF2b2lkYWJsZSBidWcgaW4gaU9TLiBTZWUgaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xLzU2NDk2Mjk2LzExMDkxNSBcIiArXHJcbiAgICAgICAgICAgICAgICBcImZvciBkZXRhaWxzIGFuZCBhIHBvdGVudGlhbCB3b3JrYXJvdW5kLlwiKTtcclxuICAgICAgICAgICAgaWYgKCFyZXBvcnRlZElPU0Vycm9yKSB7XHJcbiAgICAgICAgICAgICAgICByZXBvcnRlZElPU0Vycm9yID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIC8vIFRocm93IGEgZ2xvYmFsIGV4Y2VwdGlvbiBvdXRzaWRlIG9mIHRoaXMgcHJvbWlzZSBjaGFpbiwgZm9yIHRoZSB1c2VyIHRvXHJcbiAgICAgICAgICAgICAgICAvLyBwb3RlbnRpYWxseSBjYXRjaC5cclxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ld0Vycm9yXzE7XHJcbiAgICAgICAgICAgICAgICB9LCAwKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gbmV3RXJyb3JfMTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZXJyb3I7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKiBBIG11dGF0aW9uIHF1ZXVlIGZvciBhIHNwZWNpZmljIHVzZXIsIGJhY2tlZCBieSBJbmRleGVkREIuICovXHJcbnZhciBJbmRleGVkRGJNdXRhdGlvblF1ZXVlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gSW5kZXhlZERiTXV0YXRpb25RdWV1ZShcclxuICAgIC8qKlxyXG4gICAgICogVGhlIG5vcm1hbGl6ZWQgdXNlcklkIChlLmcuIG51bGwgVUlEID0+IFwiXCIgdXNlcklkKSB1c2VkIHRvIHN0b3JlIC9cclxuICAgICAqIHJldHJpZXZlIG11dGF0aW9ucy5cclxuICAgICAqL1xyXG4gICAgdXNlcklkLCBzZXJpYWxpemVyLCBpbmRleE1hbmFnZXIsIHJlZmVyZW5jZURlbGVnYXRlKSB7XHJcbiAgICAgICAgdGhpcy51c2VySWQgPSB1c2VySWQ7XHJcbiAgICAgICAgdGhpcy5zZXJpYWxpemVyID0gc2VyaWFsaXplcjtcclxuICAgICAgICB0aGlzLmluZGV4TWFuYWdlciA9IGluZGV4TWFuYWdlcjtcclxuICAgICAgICB0aGlzLnJlZmVyZW5jZURlbGVnYXRlID0gcmVmZXJlbmNlRGVsZWdhdGU7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ2FjaGVzIHRoZSBkb2N1bWVudCBrZXlzIGZvciBwZW5kaW5nIG11dGF0aW9uIGJhdGNoZXMuIElmIHRoZSBtdXRhdGlvblxyXG4gICAgICAgICAqIGhhcyBiZWVuIHJlbW92ZWQgZnJvbSBJbmRleGVkRGIsIHRoZSBjYWNoZWQgdmFsdWUgbWF5IGNvbnRpbnVlIHRvXHJcbiAgICAgICAgICogYmUgdXNlZCB0byByZXRyaWV2ZSB0aGUgYmF0Y2gncyBkb2N1bWVudCBrZXlzLiBUbyByZW1vdmUgYSBjYWNoZWQgdmFsdWVcclxuICAgICAgICAgKiBsb2NhbGx5LCBgcmVtb3ZlQ2FjaGVkTXV0YXRpb25LZXlzKClgIHNob3VsZCBiZSBpbnZva2VkIGVpdGhlciBkaXJlY3RseVxyXG4gICAgICAgICAqIG9yIHRocm91Z2ggYHJlbW92ZU11dGF0aW9uQmF0Y2hlcygpYC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFdpdGggbXVsdGktdGFiLCB3aGVuIHRoZSBwcmltYXJ5IGNsaWVudCBhY2tub3dsZWRnZXMgb3IgcmVqZWN0cyBhIG11dGF0aW9uLFxyXG4gICAgICAgICAqIHRoaXMgY2FjaGUgaXMgdXNlZCBieSBzZWNvbmRhcnkgY2xpZW50cyB0byBpbnZhbGlkYXRlIHRoZSBsb2NhbFxyXG4gICAgICAgICAqIHZpZXcgb2YgdGhlIGRvY3VtZW50cyB0aGF0IHdlcmUgcHJldmlvdXNseSBhZmZlY3RlZCBieSB0aGUgbXV0YXRpb24uXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS10YWIgb25seS5cclxuICAgICAgICB0aGlzLmRvY3VtZW50S2V5c0J5QmF0Y2hJZCA9IHt9O1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGVzIGEgbmV3IG11dGF0aW9uIHF1ZXVlIGZvciB0aGUgZ2l2ZW4gdXNlci5cclxuICAgICAqIEBwYXJhbSB1c2VyIFRoZSB1c2VyIGZvciB3aGljaCB0byBjcmVhdGUgYSBtdXRhdGlvbiBxdWV1ZS5cclxuICAgICAqIEBwYXJhbSBzZXJpYWxpemVyIFRoZSBzZXJpYWxpemVyIHRvIHVzZSB3aGVuIHBlcnNpc3RpbmcgdG8gSW5kZXhlZERiLlxyXG4gICAgICovXHJcbiAgICBJbmRleGVkRGJNdXRhdGlvblF1ZXVlLmZvclVzZXIgPSBmdW5jdGlvbiAodXNlciwgc2VyaWFsaXplciwgaW5kZXhNYW5hZ2VyLCByZWZlcmVuY2VEZWxlZ2F0ZSkge1xyXG4gICAgICAgIC8vIFRPRE8obWNnKTogRmlndXJlIG91dCB3aGF0IGNvbnN0cmFpbnRzIHRoZXJlIGFyZSBvbiB1c2VySURzXHJcbiAgICAgICAgLy8gSW4gcGFydGljdWxhciwgYXJlIHRoZXJlIGFueSByZXNlcnZlZCBjaGFyYWN0ZXJzPyBhcmUgZW1wdHkgaWRzIGFsbG93ZWQ/XHJcbiAgICAgICAgLy8gRm9yIHRoZSBtb21lbnQgc3RvcmUgdGhlc2UgdG9nZXRoZXIgaW4gdGhlIHNhbWUgbXV0YXRpb25zIHRhYmxlIGFzc3VtaW5nXHJcbiAgICAgICAgLy8gdGhhdCBlbXB0eSB1c2VySURzIGFyZW4ndCBhbGxvd2VkLlxyXG4gICAgICAgIGFzc2VydCh1c2VyLnVpZCAhPT0gJycsICdVc2VySUQgbXVzdCBub3QgYmUgYW4gZW1wdHkgc3RyaW5nLicpO1xyXG4gICAgICAgIHZhciB1c2VySWQgPSB1c2VyLmlzQXV0aGVudGljYXRlZCgpID8gdXNlci51aWQgOiAnJztcclxuICAgICAgICByZXR1cm4gbmV3IEluZGV4ZWREYk11dGF0aW9uUXVldWUodXNlcklkLCBzZXJpYWxpemVyLCBpbmRleE1hbmFnZXIsIHJlZmVyZW5jZURlbGVnYXRlKTtcclxuICAgIH07XHJcbiAgICBJbmRleGVkRGJNdXRhdGlvblF1ZXVlLnByb3RvdHlwZS5jaGVja0VtcHR5ID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uKSB7XHJcbiAgICAgICAgdmFyIGVtcHR5ID0gdHJ1ZTtcclxuICAgICAgICB2YXIgcmFuZ2UgPSBJREJLZXlSYW5nZS5ib3VuZChbdGhpcy51c2VySWQsIE51bWJlci5ORUdBVElWRV9JTkZJTklUWV0sIFt0aGlzLnVzZXJJZCwgTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZXSk7XHJcbiAgICAgICAgcmV0dXJuIG11dGF0aW9uc1N0b3JlKHRyYW5zYWN0aW9uKVxyXG4gICAgICAgICAgICAuaXRlcmF0ZSh7IGluZGV4OiBEYk11dGF0aW9uQmF0Y2gudXNlck11dGF0aW9uc0luZGV4LCByYW5nZTogcmFuZ2UgfSwgZnVuY3Rpb24gKGtleSwgdmFsdWUsIGNvbnRyb2wpIHtcclxuICAgICAgICAgICAgZW1wdHkgPSBmYWxzZTtcclxuICAgICAgICAgICAgY29udHJvbC5kb25lKCk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKCkgeyByZXR1cm4gZW1wdHk7IH0pO1xyXG4gICAgfTtcclxuICAgIEluZGV4ZWREYk11dGF0aW9uUXVldWUucHJvdG90eXBlLmFja25vd2xlZGdlQmF0Y2ggPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24sIGJhdGNoLCBzdHJlYW1Ub2tlbikge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldE11dGF0aW9uUXVldWVNZXRhZGF0YSh0cmFuc2FjdGlvbikubmV4dChmdW5jdGlvbiAobWV0YWRhdGEpIHtcclxuICAgICAgICAgICAgbWV0YWRhdGEubGFzdFN0cmVhbVRva2VuID0gY29udmVydFN0cmVhbVRva2VuKHN0cmVhbVRva2VuKTtcclxuICAgICAgICAgICAgcmV0dXJuIG11dGF0aW9uUXVldWVzU3RvcmUodHJhbnNhY3Rpb24pLnB1dChtZXRhZGF0YSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgSW5kZXhlZERiTXV0YXRpb25RdWV1ZS5wcm90b3R5cGUuZ2V0TGFzdFN0cmVhbVRva2VuID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0TXV0YXRpb25RdWV1ZU1ldGFkYXRhKHRyYW5zYWN0aW9uKS5uZXh0KGZ1bmN0aW9uIChtZXRhZGF0YSkgeyByZXR1cm4gbWV0YWRhdGEubGFzdFN0cmVhbVRva2VuOyB9KTtcclxuICAgIH07XHJcbiAgICBJbmRleGVkRGJNdXRhdGlvblF1ZXVlLnByb3RvdHlwZS5zZXRMYXN0U3RyZWFtVG9rZW4gPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24sIHN0cmVhbVRva2VuKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0TXV0YXRpb25RdWV1ZU1ldGFkYXRhKHRyYW5zYWN0aW9uKS5uZXh0KGZ1bmN0aW9uIChtZXRhZGF0YSkge1xyXG4gICAgICAgICAgICBtZXRhZGF0YS5sYXN0U3RyZWFtVG9rZW4gPSBjb252ZXJ0U3RyZWFtVG9rZW4oc3RyZWFtVG9rZW4pO1xyXG4gICAgICAgICAgICByZXR1cm4gbXV0YXRpb25RdWV1ZXNTdG9yZSh0cmFuc2FjdGlvbikucHV0KG1ldGFkYXRhKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBJbmRleGVkRGJNdXRhdGlvblF1ZXVlLnByb3RvdHlwZS5hZGRNdXRhdGlvbkJhdGNoID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCBsb2NhbFdyaXRlVGltZSwgYmFzZU11dGF0aW9ucywgbXV0YXRpb25zKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgZG9jdW1lbnRTdG9yZSA9IGRvY3VtZW50TXV0YXRpb25zU3RvcmUodHJhbnNhY3Rpb24pO1xyXG4gICAgICAgIHZhciBtdXRhdGlvblN0b3JlID0gbXV0YXRpb25zU3RvcmUodHJhbnNhY3Rpb24pO1xyXG4gICAgICAgIC8vIFRoZSBJbmRleGVkRGIgaW1wbGVtZW50YXRpb24gaW4gQ2hyb21lIChhbmQgRmlyZWZveCkgZG9lcyBub3QgaGFuZGxlXHJcbiAgICAgICAgLy8gY29tcG91bmQgaW5kaWNlcyB0aGF0IGluY2x1ZGUgYXV0by1nZW5lcmF0ZWQga2V5cyBjb3JyZWN0bHkuIFRvIGVuc3VyZVxyXG4gICAgICAgIC8vIHRoYXQgdGhlIGluZGV4IGVudHJ5IGlzIGFkZGVkIGNvcnJlY3RseSBpbiBhbGwgYnJvd3NlcnMsIHdlIHBlcmZvcm0gdHdvXHJcbiAgICAgICAgLy8gd3JpdGVzOiBUaGUgZmlyc3Qgd3JpdGUgaXMgdXNlZCB0byByZXRyaWV2ZSB0aGUgbmV4dCBhdXRvLWdlbmVyYXRlZCBCYXRjaFxyXG4gICAgICAgIC8vIElELCBhbmQgdGhlIHNlY29uZCB3cml0ZSBwb3B1bGF0ZXMgdGhlIGluZGV4IGFuZCBzdG9yZXMgdGhlIGFjdHVhbFxyXG4gICAgICAgIC8vIG11dGF0aW9uIGJhdGNoLlxyXG4gICAgICAgIC8vIFNlZTogaHR0cHM6Ly9idWdzLmNocm9taXVtLm9yZy9wL2Nocm9taXVtL2lzc3Vlcy9kZXRhaWw/aWQ9NzAxOTcyXHJcbiAgICAgICAgLy8gV2Ugd3JpdGUgYW4gZW1wdHkgb2JqZWN0IHRvIG9idGFpbiBrZXlcclxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG4gICAgICAgIHJldHVybiBtdXRhdGlvblN0b3JlLmFkZCh7fSkubmV4dChmdW5jdGlvbiAoYmF0Y2hJZCkge1xyXG4gICAgICAgICAgICBhc3NlcnQodHlwZW9mIGJhdGNoSWQgPT09ICdudW1iZXInLCAnQXV0by1nZW5lcmF0ZWQga2V5IGlzIG5vdCBhIG51bWJlcicpO1xyXG4gICAgICAgICAgICB2YXIgYmF0Y2ggPSBuZXcgTXV0YXRpb25CYXRjaChiYXRjaElkLCBsb2NhbFdyaXRlVGltZSwgYmFzZU11dGF0aW9ucywgbXV0YXRpb25zKTtcclxuICAgICAgICAgICAgdmFyIGRiQmF0Y2ggPSBfdGhpcy5zZXJpYWxpemVyLnRvRGJNdXRhdGlvbkJhdGNoKF90aGlzLnVzZXJJZCwgYmF0Y2gpO1xyXG4gICAgICAgICAgICB2YXIgcHJvbWlzZXMgPSBbXTtcclxuICAgICAgICAgICAgdmFyIGNvbGxlY3Rpb25QYXJlbnRzID0gbmV3IFNvcnRlZFNldChmdW5jdGlvbiAobCwgcikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHByaW1pdGl2ZUNvbXBhcmF0b3IobC5jYW5vbmljYWxTdHJpbmcoKSwgci5jYW5vbmljYWxTdHJpbmcoKSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIG11dGF0aW9uc18xID0gbXV0YXRpb25zOyBfaSA8IG11dGF0aW9uc18xLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIG11dGF0aW9uID0gbXV0YXRpb25zXzFbX2ldO1xyXG4gICAgICAgICAgICAgICAgdmFyIGluZGV4S2V5ID0gRGJEb2N1bWVudE11dGF0aW9uLmtleShfdGhpcy51c2VySWQsIG11dGF0aW9uLmtleS5wYXRoLCBiYXRjaElkKTtcclxuICAgICAgICAgICAgICAgIGNvbGxlY3Rpb25QYXJlbnRzID0gY29sbGVjdGlvblBhcmVudHMuYWRkKG11dGF0aW9uLmtleS5wYXRoLnBvcExhc3QoKSk7XHJcbiAgICAgICAgICAgICAgICBwcm9taXNlcy5wdXNoKG11dGF0aW9uU3RvcmUucHV0KGRiQmF0Y2gpKTtcclxuICAgICAgICAgICAgICAgIHByb21pc2VzLnB1c2goZG9jdW1lbnRTdG9yZS5wdXQoaW5kZXhLZXksIERiRG9jdW1lbnRNdXRhdGlvbi5QTEFDRUhPTERFUikpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbGxlY3Rpb25QYXJlbnRzLmZvckVhY2goZnVuY3Rpb24gKHBhcmVudCkge1xyXG4gICAgICAgICAgICAgICAgcHJvbWlzZXMucHVzaChfdGhpcy5pbmRleE1hbmFnZXIuYWRkVG9Db2xsZWN0aW9uUGFyZW50SW5kZXgodHJhbnNhY3Rpb24sIHBhcmVudCkpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdHJhbnNhY3Rpb24uYWRkT25Db21taXR0ZWRMaXN0ZW5lcihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5kb2N1bWVudEtleXNCeUJhdGNoSWRbYmF0Y2hJZF0gPSBiYXRjaC5rZXlzKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLndhaXRGb3IocHJvbWlzZXMpLm5leHQoZnVuY3Rpb24gKCkgeyByZXR1cm4gYmF0Y2g7IH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIEluZGV4ZWREYk11dGF0aW9uUXVldWUucHJvdG90eXBlLmxvb2t1cE11dGF0aW9uQmF0Y2ggPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24sIGJhdGNoSWQpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiBtdXRhdGlvbnNTdG9yZSh0cmFuc2FjdGlvbilcclxuICAgICAgICAgICAgLmdldChiYXRjaElkKVxyXG4gICAgICAgICAgICAubmV4dChmdW5jdGlvbiAoZGJCYXRjaCkge1xyXG4gICAgICAgICAgICBpZiAoZGJCYXRjaCkge1xyXG4gICAgICAgICAgICAgICAgYXNzZXJ0KGRiQmF0Y2gudXNlcklkID09PSBfdGhpcy51c2VySWQsIFwiVW5leHBlY3RlZCB1c2VyICdcIiArIGRiQmF0Y2gudXNlcklkICsgXCInIGZvciBtdXRhdGlvbiBiYXRjaCBcIiArIGJhdGNoSWQpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLnNlcmlhbGl6ZXIuZnJvbURiTXV0YXRpb25CYXRjaChkYkJhdGNoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBJbmRleGVkRGJNdXRhdGlvblF1ZXVlLnByb3RvdHlwZS5sb29rdXBNdXRhdGlvbktleXMgPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24sIGJhdGNoSWQpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIGlmICh0aGlzLmRvY3VtZW50S2V5c0J5QmF0Y2hJZFtiYXRjaElkXSkge1xyXG4gICAgICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUodGhpcy5kb2N1bWVudEtleXNCeUJhdGNoSWRbYmF0Y2hJZF0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubG9va3VwTXV0YXRpb25CYXRjaCh0cmFuc2FjdGlvbiwgYmF0Y2hJZCkubmV4dChmdW5jdGlvbiAoYmF0Y2gpIHtcclxuICAgICAgICAgICAgICAgIGlmIChiYXRjaCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBrZXlzID0gYmF0Y2gua2V5cygpO1xyXG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmRvY3VtZW50S2V5c0J5QmF0Y2hJZFtiYXRjaElkXSA9IGtleXM7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGtleXM7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIEluZGV4ZWREYk11dGF0aW9uUXVldWUucHJvdG90eXBlLmdldE5leHRNdXRhdGlvbkJhdGNoQWZ0ZXJCYXRjaElkID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCBiYXRjaElkKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgbmV4dEJhdGNoSWQgPSBiYXRjaElkICsgMTtcclxuICAgICAgICB2YXIgcmFuZ2UgPSBJREJLZXlSYW5nZS5sb3dlckJvdW5kKFt0aGlzLnVzZXJJZCwgbmV4dEJhdGNoSWRdKTtcclxuICAgICAgICB2YXIgZm91bmRCYXRjaCA9IG51bGw7XHJcbiAgICAgICAgcmV0dXJuIG11dGF0aW9uc1N0b3JlKHRyYW5zYWN0aW9uKVxyXG4gICAgICAgICAgICAuaXRlcmF0ZSh7IGluZGV4OiBEYk11dGF0aW9uQmF0Y2gudXNlck11dGF0aW9uc0luZGV4LCByYW5nZTogcmFuZ2UgfSwgZnVuY3Rpb24gKGtleSwgZGJCYXRjaCwgY29udHJvbCkge1xyXG4gICAgICAgICAgICBpZiAoZGJCYXRjaC51c2VySWQgPT09IF90aGlzLnVzZXJJZCkge1xyXG4gICAgICAgICAgICAgICAgYXNzZXJ0KGRiQmF0Y2guYmF0Y2hJZCA+PSBuZXh0QmF0Y2hJZCwgJ1Nob3VsZCBoYXZlIGZvdW5kIG11dGF0aW9uIGFmdGVyICcgKyBuZXh0QmF0Y2hJZCk7XHJcbiAgICAgICAgICAgICAgICBmb3VuZEJhdGNoID0gX3RoaXMuc2VyaWFsaXplci5mcm9tRGJNdXRhdGlvbkJhdGNoKGRiQmF0Y2gpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnRyb2wuZG9uZSgpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIGZvdW5kQmF0Y2g7IH0pO1xyXG4gICAgfTtcclxuICAgIEluZGV4ZWREYk11dGF0aW9uUXVldWUucHJvdG90eXBlLmdldEhpZ2hlc3RVbmFja25vd2xlZGdlZEJhdGNoSWQgPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24pIHtcclxuICAgICAgICB2YXIgcmFuZ2UgPSBJREJLZXlSYW5nZS51cHBlckJvdW5kKFtcclxuICAgICAgICAgICAgdGhpcy51c2VySWQsXHJcbiAgICAgICAgICAgIE51bWJlci5QT1NJVElWRV9JTkZJTklUWVxyXG4gICAgICAgIF0pO1xyXG4gICAgICAgIHZhciBiYXRjaElkID0gQkFUQ0hJRF9VTktOT1dOO1xyXG4gICAgICAgIHJldHVybiBtdXRhdGlvbnNTdG9yZSh0cmFuc2FjdGlvbilcclxuICAgICAgICAgICAgLml0ZXJhdGUoeyBpbmRleDogRGJNdXRhdGlvbkJhdGNoLnVzZXJNdXRhdGlvbnNJbmRleCwgcmFuZ2U6IHJhbmdlLCByZXZlcnNlOiB0cnVlIH0sIGZ1bmN0aW9uIChrZXksIGRiQmF0Y2gsIGNvbnRyb2wpIHtcclxuICAgICAgICAgICAgYmF0Y2hJZCA9IGRiQmF0Y2guYmF0Y2hJZDtcclxuICAgICAgICAgICAgY29udHJvbC5kb25lKCk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKCkgeyByZXR1cm4gYmF0Y2hJZDsgfSk7XHJcbiAgICB9O1xyXG4gICAgSW5kZXhlZERiTXV0YXRpb25RdWV1ZS5wcm90b3R5cGUuZ2V0QWxsTXV0YXRpb25CYXRjaGVzID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgcmFuZ2UgPSBJREJLZXlSYW5nZS5ib3VuZChbdGhpcy51c2VySWQsIEJBVENISURfVU5LTk9XTl0sIFt0aGlzLnVzZXJJZCwgTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZXSk7XHJcbiAgICAgICAgcmV0dXJuIG11dGF0aW9uc1N0b3JlKHRyYW5zYWN0aW9uKVxyXG4gICAgICAgICAgICAubG9hZEFsbChEYk11dGF0aW9uQmF0Y2gudXNlck11dGF0aW9uc0luZGV4LCByYW5nZSlcclxuICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKGRiQmF0Y2hlcykge1xyXG4gICAgICAgICAgICByZXR1cm4gZGJCYXRjaGVzLm1hcChmdW5jdGlvbiAoZGJCYXRjaCkgeyByZXR1cm4gX3RoaXMuc2VyaWFsaXplci5mcm9tRGJNdXRhdGlvbkJhdGNoKGRiQmF0Y2gpOyB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBJbmRleGVkRGJNdXRhdGlvblF1ZXVlLnByb3RvdHlwZS5nZXRBbGxNdXRhdGlvbkJhdGNoZXNBZmZlY3RpbmdEb2N1bWVudEtleSA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwgZG9jdW1lbnRLZXkpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIC8vIFNjYW4gdGhlIGRvY3VtZW50LW11dGF0aW9uIGluZGV4IHN0YXJ0aW5nIHdpdGggYSBwcmVmaXggc3RhcnRpbmcgd2l0aFxyXG4gICAgICAgIC8vIHRoZSBnaXZlbiBkb2N1bWVudEtleS5cclxuICAgICAgICB2YXIgaW5kZXhQcmVmaXggPSBEYkRvY3VtZW50TXV0YXRpb24ucHJlZml4Rm9yUGF0aCh0aGlzLnVzZXJJZCwgZG9jdW1lbnRLZXkucGF0aCk7XHJcbiAgICAgICAgdmFyIGluZGV4U3RhcnQgPSBJREJLZXlSYW5nZS5sb3dlckJvdW5kKGluZGV4UHJlZml4KTtcclxuICAgICAgICB2YXIgcmVzdWx0cyA9IFtdO1xyXG4gICAgICAgIHJldHVybiBkb2N1bWVudE11dGF0aW9uc1N0b3JlKHRyYW5zYWN0aW9uKVxyXG4gICAgICAgICAgICAuaXRlcmF0ZSh7IHJhbmdlOiBpbmRleFN0YXJ0IH0sIGZ1bmN0aW9uIChpbmRleEtleSwgXywgY29udHJvbCkge1xyXG4gICAgICAgICAgICB2YXIgdXNlcklEID0gaW5kZXhLZXlbMF0sIGVuY29kZWRQYXRoID0gaW5kZXhLZXlbMV0sIGJhdGNoSWQgPSBpbmRleEtleVsyXTtcclxuICAgICAgICAgICAgLy8gT25seSBjb25zaWRlciByb3dzIG1hdGNoaW5nIGV4YWN0bHkgdGhlIHNwZWNpZmljIGtleSBvZlxyXG4gICAgICAgICAgICAvLyBpbnRlcmVzdC4gTm90ZSB0aGF0IGJlY2F1c2Ugd2Ugb3JkZXIgYnkgcGF0aCBmaXJzdCwgYW5kIHdlXHJcbiAgICAgICAgICAgIC8vIG9yZGVyIHRlcm1pbmF0b3JzIGJlZm9yZSBwYXRoIHNlcGFyYXRvcnMsIHdlJ2xsIGVuY291bnRlciBhbGxcclxuICAgICAgICAgICAgLy8gdGhlIGluZGV4IHJvd3MgZm9yIGRvY3VtZW50S2V5IGNvbnRpZ3VvdXNseS4gSW4gcGFydGljdWxhciwgYWxsXHJcbiAgICAgICAgICAgIC8vIHRoZSByb3dzIGZvciBkb2N1bWVudEtleSB3aWxsIG9jY3VyIGJlZm9yZSBhbnkgcm93cyBmb3JcclxuICAgICAgICAgICAgLy8gZG9jdW1lbnRzIG5lc3RlZCBpbiBhIHN1YmNvbGxlY3Rpb24gYmVuZWF0aCBkb2N1bWVudEtleSBzbyB3ZVxyXG4gICAgICAgICAgICAvLyBjYW4gc3RvcCBhcyBzb29uIGFzIHdlIGhpdCBhbnkgc3VjaCByb3cuXHJcbiAgICAgICAgICAgIHZhciBwYXRoID0gZGVjb2RlKGVuY29kZWRQYXRoKTtcclxuICAgICAgICAgICAgaWYgKHVzZXJJRCAhPT0gX3RoaXMudXNlcklkIHx8ICFkb2N1bWVudEtleS5wYXRoLmlzRXF1YWwocGF0aCkpIHtcclxuICAgICAgICAgICAgICAgIGNvbnRyb2wuZG9uZSgpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIExvb2sgdXAgdGhlIG11dGF0aW9uIGJhdGNoIGluIHRoZSBzdG9yZS5cclxuICAgICAgICAgICAgcmV0dXJuIG11dGF0aW9uc1N0b3JlKHRyYW5zYWN0aW9uKVxyXG4gICAgICAgICAgICAgICAgLmdldChiYXRjaElkKVxyXG4gICAgICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKG11dGF0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIW11dGF0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZmFpbCgnRGFuZ2xpbmcgZG9jdW1lbnQtbXV0YXRpb24gcmVmZXJlbmNlIGZvdW5kOiAnICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXhLZXkgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnIHdoaWNoIHBvaW50cyB0byAnICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmF0Y2hJZCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBhc3NlcnQobXV0YXRpb24udXNlcklkID09PSBfdGhpcy51c2VySWQsIFwiVW5leHBlY3RlZCB1c2VyICdcIiArIG11dGF0aW9uLnVzZXJJZCArIFwiJyBmb3IgbXV0YXRpb24gYmF0Y2ggXCIgKyBiYXRjaElkKTtcclxuICAgICAgICAgICAgICAgIHJlc3VsdHMucHVzaChfdGhpcy5zZXJpYWxpemVyLmZyb21EYk11dGF0aW9uQmF0Y2gobXV0YXRpb24pKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKCkgeyByZXR1cm4gcmVzdWx0czsgfSk7XHJcbiAgICB9O1xyXG4gICAgSW5kZXhlZERiTXV0YXRpb25RdWV1ZS5wcm90b3R5cGUuZ2V0QWxsTXV0YXRpb25CYXRjaGVzQWZmZWN0aW5nRG9jdW1lbnRLZXlzID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCBkb2N1bWVudEtleXMpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhciB1bmlxdWVCYXRjaElEcyA9IG5ldyBTb3J0ZWRTZXQocHJpbWl0aXZlQ29tcGFyYXRvcik7XHJcbiAgICAgICAgdmFyIHByb21pc2VzID0gW107XHJcbiAgICAgICAgZG9jdW1lbnRLZXlzLmZvckVhY2goZnVuY3Rpb24gKGRvY3VtZW50S2V5KSB7XHJcbiAgICAgICAgICAgIHZhciBpbmRleFN0YXJ0ID0gRGJEb2N1bWVudE11dGF0aW9uLnByZWZpeEZvclBhdGgoX3RoaXMudXNlcklkLCBkb2N1bWVudEtleS5wYXRoKTtcclxuICAgICAgICAgICAgdmFyIHJhbmdlID0gSURCS2V5UmFuZ2UubG93ZXJCb3VuZChpbmRleFN0YXJ0KTtcclxuICAgICAgICAgICAgdmFyIHByb21pc2UgPSBkb2N1bWVudE11dGF0aW9uc1N0b3JlKHRyYW5zYWN0aW9uKS5pdGVyYXRlKHsgcmFuZ2U6IHJhbmdlIH0sIGZ1bmN0aW9uIChpbmRleEtleSwgXywgY29udHJvbCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHVzZXJJRCA9IGluZGV4S2V5WzBdLCBlbmNvZGVkUGF0aCA9IGluZGV4S2V5WzFdLCBiYXRjaElEID0gaW5kZXhLZXlbMl07XHJcbiAgICAgICAgICAgICAgICAvLyBPbmx5IGNvbnNpZGVyIHJvd3MgbWF0Y2hpbmcgZXhhY3RseSB0aGUgc3BlY2lmaWMga2V5IG9mXHJcbiAgICAgICAgICAgICAgICAvLyBpbnRlcmVzdC4gTm90ZSB0aGF0IGJlY2F1c2Ugd2Ugb3JkZXIgYnkgcGF0aCBmaXJzdCwgYW5kIHdlXHJcbiAgICAgICAgICAgICAgICAvLyBvcmRlciB0ZXJtaW5hdG9ycyBiZWZvcmUgcGF0aCBzZXBhcmF0b3JzLCB3ZSdsbCBlbmNvdW50ZXIgYWxsXHJcbiAgICAgICAgICAgICAgICAvLyB0aGUgaW5kZXggcm93cyBmb3IgZG9jdW1lbnRLZXkgY29udGlndW91c2x5LiBJbiBwYXJ0aWN1bGFyLCBhbGxcclxuICAgICAgICAgICAgICAgIC8vIHRoZSByb3dzIGZvciBkb2N1bWVudEtleSB3aWxsIG9jY3VyIGJlZm9yZSBhbnkgcm93cyBmb3JcclxuICAgICAgICAgICAgICAgIC8vIGRvY3VtZW50cyBuZXN0ZWQgaW4gYSBzdWJjb2xsZWN0aW9uIGJlbmVhdGggZG9jdW1lbnRLZXkgc28gd2VcclxuICAgICAgICAgICAgICAgIC8vIGNhbiBzdG9wIGFzIHNvb24gYXMgd2UgaGl0IGFueSBzdWNoIHJvdy5cclxuICAgICAgICAgICAgICAgIHZhciBwYXRoID0gZGVjb2RlKGVuY29kZWRQYXRoKTtcclxuICAgICAgICAgICAgICAgIGlmICh1c2VySUQgIT09IF90aGlzLnVzZXJJZCB8fCAhZG9jdW1lbnRLZXkucGF0aC5pc0VxdWFsKHBhdGgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbC5kb25lKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdW5pcXVlQmF0Y2hJRHMgPSB1bmlxdWVCYXRjaElEcy5hZGQoYmF0Y2hJRCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBwcm9taXNlcy5wdXNoKHByb21pc2UpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2Uud2FpdEZvcihwcm9taXNlcykubmV4dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5sb29rdXBNdXRhdGlvbkJhdGNoZXModHJhbnNhY3Rpb24sIHVuaXF1ZUJhdGNoSURzKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBJbmRleGVkRGJNdXRhdGlvblF1ZXVlLnByb3RvdHlwZS5nZXRBbGxNdXRhdGlvbkJhdGNoZXNBZmZlY3RpbmdRdWVyeSA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwgcXVlcnkpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIGFzc2VydCghcXVlcnkuaXNEb2N1bWVudFF1ZXJ5KCksIFwiRG9jdW1lbnQgcXVlcmllcyBzaG91bGRuJ3QgZ28gZG93biB0aGlzIHBhdGhcIik7XHJcbiAgICAgICAgYXNzZXJ0KCFxdWVyeS5pc0NvbGxlY3Rpb25Hcm91cFF1ZXJ5KCksICdDb2xsZWN0aW9uR3JvdXAgcXVlcmllcyBzaG91bGQgYmUgaGFuZGxlZCBpbiBMb2NhbERvY3VtZW50c1ZpZXcnKTtcclxuICAgICAgICB2YXIgcXVlcnlQYXRoID0gcXVlcnkucGF0aDtcclxuICAgICAgICB2YXIgaW1tZWRpYXRlQ2hpbGRyZW5MZW5ndGggPSBxdWVyeVBhdGgubGVuZ3RoICsgMTtcclxuICAgICAgICAvLyBUT0RPKG1jZyk6IEFjdHVhbGx5IGltcGxlbWVudCBhIHNpbmdsZS1jb2xsZWN0aW9uIHF1ZXJ5XHJcbiAgICAgICAgLy9cclxuICAgICAgICAvLyBUaGlzIGlzIGFjdHVhbGx5IGV4ZWN1dGluZyBhbiBhbmNlc3RvciBxdWVyeSwgdHJhdmVyc2luZyB0aGUgd2hvbGVcclxuICAgICAgICAvLyBzdWJ0cmVlIGJlbG93IHRoZSBjb2xsZWN0aW9uIHdoaWNoIGNhbiBiZSBob3JyaWZpY2FsbHkgaW5lZmZpY2llbnQgZm9yXHJcbiAgICAgICAgLy8gc29tZSBzdHJ1Y3R1cmVzLiBUaGUgcmlnaHQgd2F5IHRvIHNvbHZlIHRoaXMgaXMgdG8gaW1wbGVtZW50IHRoZSBmdWxsXHJcbiAgICAgICAgLy8gdmFsdWUgaW5kZXgsIGJ1dCB0aGF0J3Mgbm90IGluIHRoZSBjYXJkcyBpbiB0aGUgbmVhciBmdXR1cmUgc28gdGhpcyBpc1xyXG4gICAgICAgIC8vIHRoZSBiZXN0IHdlIGNhbiBkbyBmb3IgdGhlIG1vbWVudC5cclxuICAgICAgICAvL1xyXG4gICAgICAgIC8vIFNpbmNlIHdlIGRvbid0IHlldCBpbmRleCB0aGUgYWN0dWFsIHByb3BlcnRpZXMgaW4gdGhlIG11dGF0aW9ucywgb3VyXHJcbiAgICAgICAgLy8gY3VycmVudCBhcHByb2FjaCBpcyB0byBqdXN0IHJldHVybiBhbGwgbXV0YXRpb24gYmF0Y2hlcyB0aGF0IGFmZmVjdFxyXG4gICAgICAgIC8vIGRvY3VtZW50cyBpbiB0aGUgY29sbGVjdGlvbiBiZWluZyBxdWVyaWVkLlxyXG4gICAgICAgIHZhciBpbmRleFByZWZpeCA9IERiRG9jdW1lbnRNdXRhdGlvbi5wcmVmaXhGb3JQYXRoKHRoaXMudXNlcklkLCBxdWVyeVBhdGgpO1xyXG4gICAgICAgIHZhciBpbmRleFN0YXJ0ID0gSURCS2V5UmFuZ2UubG93ZXJCb3VuZChpbmRleFByZWZpeCk7XHJcbiAgICAgICAgLy8gQ29sbGVjdCB1cCB1bmlxdWUgYmF0Y2hJRHMgZW5jb3VudGVyZWQgZHVyaW5nIGEgc2NhbiBvZiB0aGUgaW5kZXguIFVzZSBhXHJcbiAgICAgICAgLy8gU29ydGVkU2V0IHRvIGFjY3VtdWxhdGUgYmF0Y2ggSURzIHNvIHRoZXkgY2FuIGJlIHRyYXZlcnNlZCBpbiBvcmRlciBpbiBhXHJcbiAgICAgICAgLy8gc2NhbiBvZiB0aGUgbWFpbiB0YWJsZS5cclxuICAgICAgICB2YXIgdW5pcXVlQmF0Y2hJRHMgPSBuZXcgU29ydGVkU2V0KHByaW1pdGl2ZUNvbXBhcmF0b3IpO1xyXG4gICAgICAgIHJldHVybiBkb2N1bWVudE11dGF0aW9uc1N0b3JlKHRyYW5zYWN0aW9uKVxyXG4gICAgICAgICAgICAuaXRlcmF0ZSh7IHJhbmdlOiBpbmRleFN0YXJ0IH0sIGZ1bmN0aW9uIChpbmRleEtleSwgXywgY29udHJvbCkge1xyXG4gICAgICAgICAgICB2YXIgdXNlcklEID0gaW5kZXhLZXlbMF0sIGVuY29kZWRQYXRoID0gaW5kZXhLZXlbMV0sIGJhdGNoSUQgPSBpbmRleEtleVsyXTtcclxuICAgICAgICAgICAgdmFyIHBhdGggPSBkZWNvZGUoZW5jb2RlZFBhdGgpO1xyXG4gICAgICAgICAgICBpZiAodXNlcklEICE9PSBfdGhpcy51c2VySWQgfHwgIXF1ZXJ5UGF0aC5pc1ByZWZpeE9mKHBhdGgpKSB7XHJcbiAgICAgICAgICAgICAgICBjb250cm9sLmRvbmUoKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBSb3dzIHdpdGggZG9jdW1lbnQga2V5cyBtb3JlIHRoYW4gb25lIHNlZ21lbnQgbG9uZ2VyIHRoYW4gdGhlXHJcbiAgICAgICAgICAgIC8vIHF1ZXJ5IHBhdGggY2FuJ3QgYmUgbWF0Y2hlcy4gRm9yIGV4YW1wbGUsIGEgcXVlcnkgb24gJ3Jvb21zJ1xyXG4gICAgICAgICAgICAvLyBjYW4ndCBtYXRjaCB0aGUgZG9jdW1lbnQgL3Jvb21zL2FiYy9tZXNzYWdlcy94eXguXHJcbiAgICAgICAgICAgIC8vIFRPRE8obWNnKTogd2UnbGwgbmVlZCBhIGRpZmZlcmVudCBzY2FubmVyIHdoZW4gd2UgaW1wbGVtZW50XHJcbiAgICAgICAgICAgIC8vIGFuY2VzdG9yIHF1ZXJpZXMuXHJcbiAgICAgICAgICAgIGlmIChwYXRoLmxlbmd0aCAhPT0gaW1tZWRpYXRlQ2hpbGRyZW5MZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB1bmlxdWVCYXRjaElEcyA9IHVuaXF1ZUJhdGNoSURzLmFkZChiYXRjaElEKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAubmV4dChmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5sb29rdXBNdXRhdGlvbkJhdGNoZXModHJhbnNhY3Rpb24sIHVuaXF1ZUJhdGNoSURzKTsgfSk7XHJcbiAgICB9O1xyXG4gICAgSW5kZXhlZERiTXV0YXRpb25RdWV1ZS5wcm90b3R5cGUubG9va3VwTXV0YXRpb25CYXRjaGVzID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCBiYXRjaElEcykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIHJlc3VsdHMgPSBbXTtcclxuICAgICAgICB2YXIgcHJvbWlzZXMgPSBbXTtcclxuICAgICAgICAvLyBUT0RPKHJvY2t3b29kKTogSW1wbGVtZW50IHRoaXMgdXNpbmcgaXRlcmF0ZS5cclxuICAgICAgICBiYXRjaElEcy5mb3JFYWNoKGZ1bmN0aW9uIChiYXRjaElkKSB7XHJcbiAgICAgICAgICAgIHByb21pc2VzLnB1c2gobXV0YXRpb25zU3RvcmUodHJhbnNhY3Rpb24pXHJcbiAgICAgICAgICAgICAgICAuZ2V0KGJhdGNoSWQpXHJcbiAgICAgICAgICAgICAgICAubmV4dChmdW5jdGlvbiAobXV0YXRpb24pIHtcclxuICAgICAgICAgICAgICAgIGlmIChtdXRhdGlvbiA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IGZhaWwoJ0RhbmdsaW5nIGRvY3VtZW50LW11dGF0aW9uIHJlZmVyZW5jZSBmb3VuZCwgJyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICd3aGljaCBwb2ludHMgdG8gJyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhdGNoSWQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYXNzZXJ0KG11dGF0aW9uLnVzZXJJZCA9PT0gX3RoaXMudXNlcklkLCBcIlVuZXhwZWN0ZWQgdXNlciAnXCIgKyBtdXRhdGlvbi51c2VySWQgKyBcIicgZm9yIG11dGF0aW9uIGJhdGNoIFwiICsgYmF0Y2hJZCk7XHJcbiAgICAgICAgICAgICAgICByZXN1bHRzLnB1c2goX3RoaXMuc2VyaWFsaXplci5mcm9tRGJNdXRhdGlvbkJhdGNoKG11dGF0aW9uKSk7XHJcbiAgICAgICAgICAgIH0pKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLndhaXRGb3IocHJvbWlzZXMpLm5leHQoZnVuY3Rpb24gKCkgeyByZXR1cm4gcmVzdWx0czsgfSk7XHJcbiAgICB9O1xyXG4gICAgSW5kZXhlZERiTXV0YXRpb25RdWV1ZS5wcm90b3R5cGUucmVtb3ZlTXV0YXRpb25CYXRjaCA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwgYmF0Y2gpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiByZW1vdmVNdXRhdGlvbkJhdGNoKHRyYW5zYWN0aW9uLnNpbXBsZURiVHJhbnNhY3Rpb24sIHRoaXMudXNlcklkLCBiYXRjaCkubmV4dChmdW5jdGlvbiAocmVtb3ZlZERvY3VtZW50cykge1xyXG4gICAgICAgICAgICB0cmFuc2FjdGlvbi5hZGRPbkNvbW1pdHRlZExpc3RlbmVyKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLnJlbW92ZUNhY2hlZE11dGF0aW9uS2V5cyhiYXRjaC5iYXRjaElkKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UuZm9yRWFjaChyZW1vdmVkRG9jdW1lbnRzLCBmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMucmVmZXJlbmNlRGVsZWdhdGUucmVtb3ZlTXV0YXRpb25SZWZlcmVuY2UodHJhbnNhY3Rpb24sIGtleSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIEluZGV4ZWREYk11dGF0aW9uUXVldWUucHJvdG90eXBlLnJlbW92ZUNhY2hlZE11dGF0aW9uS2V5cyA9IGZ1bmN0aW9uIChiYXRjaElkKSB7XHJcbiAgICAgICAgZGVsZXRlIHRoaXMuZG9jdW1lbnRLZXlzQnlCYXRjaElkW2JhdGNoSWRdO1xyXG4gICAgfTtcclxuICAgIEluZGV4ZWREYk11dGF0aW9uUXVldWUucHJvdG90eXBlLnBlcmZvcm1Db25zaXN0ZW5jeUNoZWNrID0gZnVuY3Rpb24gKHR4bikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY2hlY2tFbXB0eSh0eG4pLm5leHQoZnVuY3Rpb24gKGVtcHR5KSB7XHJcbiAgICAgICAgICAgIGlmICghZW1wdHkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIFZlcmlmeSB0aGF0IHRoZXJlIGFyZSBubyBlbnRyaWVzIGluIHRoZSBkb2N1bWVudE11dGF0aW9ucyBpbmRleCBpZlxyXG4gICAgICAgICAgICAvLyB0aGUgcXVldWUgaXMgZW1wdHkuXHJcbiAgICAgICAgICAgIHZhciBzdGFydFJhbmdlID0gSURCS2V5UmFuZ2UubG93ZXJCb3VuZChEYkRvY3VtZW50TXV0YXRpb24ucHJlZml4Rm9yVXNlcihfdGhpcy51c2VySWQpKTtcclxuICAgICAgICAgICAgdmFyIGRhbmdsaW5nTXV0YXRpb25SZWZlcmVuY2VzID0gW107XHJcbiAgICAgICAgICAgIHJldHVybiBkb2N1bWVudE11dGF0aW9uc1N0b3JlKHR4bilcclxuICAgICAgICAgICAgICAgIC5pdGVyYXRlKHsgcmFuZ2U6IHN0YXJ0UmFuZ2UgfSwgZnVuY3Rpb24gKGtleSwgXywgY29udHJvbCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHVzZXJJRCA9IGtleVswXTtcclxuICAgICAgICAgICAgICAgIGlmICh1c2VySUQgIT09IF90aGlzLnVzZXJJZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2wuZG9uZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBwYXRoID0gZGVjb2RlKGtleVsxXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZGFuZ2xpbmdNdXRhdGlvblJlZmVyZW5jZXMucHVzaChwYXRoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGFzc2VydChkYW5nbGluZ011dGF0aW9uUmVmZXJlbmNlcy5sZW5ndGggPT09IDAsICdEb2N1bWVudCBsZWFrIC0tIGRldGVjdGVkIGRhbmdsaW5nIG11dGF0aW9uIHJlZmVyZW5jZXMgd2hlbiBxdWV1ZSBpcyBlbXB0eS4gJyArXHJcbiAgICAgICAgICAgICAgICAgICAgJ0RhbmdsaW5nIGtleXM6ICcgK1xyXG4gICAgICAgICAgICAgICAgICAgIGRhbmdsaW5nTXV0YXRpb25SZWZlcmVuY2VzLm1hcChmdW5jdGlvbiAocCkgeyByZXR1cm4gcC5jYW5vbmljYWxTdHJpbmcoKTsgfSkpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBJbmRleGVkRGJNdXRhdGlvblF1ZXVlLnByb3RvdHlwZS5jb250YWluc0tleSA9IGZ1bmN0aW9uICh0eG4sIGtleSkge1xyXG4gICAgICAgIHJldHVybiBtdXRhdGlvblF1ZXVlQ29udGFpbnNLZXkodHhuLCB0aGlzLnVzZXJJZCwga2V5KTtcclxuICAgIH07XHJcbiAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLXRhYiBvbmx5IChzdGF0ZSBpcyBoZWxkIGluIG1lbW9yeSBpbiBvdGhlciBjbGllbnRzKS5cclxuICAgIC8qKiBSZXR1cm5zIHRoZSBtdXRhdGlvbiBxdWV1ZSdzIG1ldGFkYXRhIGZyb20gSW5kZXhlZERiLiAqL1xyXG4gICAgSW5kZXhlZERiTXV0YXRpb25RdWV1ZS5wcm90b3R5cGUuZ2V0TXV0YXRpb25RdWV1ZU1ldGFkYXRhID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICByZXR1cm4gbXV0YXRpb25RdWV1ZXNTdG9yZSh0cmFuc2FjdGlvbilcclxuICAgICAgICAgICAgLmdldCh0aGlzLnVzZXJJZClcclxuICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKG1ldGFkYXRhKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAobWV0YWRhdGEgfHxcclxuICAgICAgICAgICAgICAgIG5ldyBEYk11dGF0aW9uUXVldWUoX3RoaXMudXNlcklkLCBCQVRDSElEX1VOS05PV04sIFxyXG4gICAgICAgICAgICAgICAgLypsYXN0U3RyZWFtVG9rZW49Ki8gJycpKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gSW5kZXhlZERiTXV0YXRpb25RdWV1ZTtcclxufSgpKTtcclxuLyoqXHJcbiAqIEByZXR1cm4gdHJ1ZSBpZiB0aGUgbXV0YXRpb24gcXVldWUgZm9yIHRoZSBnaXZlbiB1c2VyIGNvbnRhaW5zIGEgcGVuZGluZ1xyXG4gKiAgICAgICAgIG11dGF0aW9uIGZvciB0aGUgZ2l2ZW4ga2V5LlxyXG4gKi9cclxuZnVuY3Rpb24gbXV0YXRpb25RdWV1ZUNvbnRhaW5zS2V5KHR4biwgdXNlcklkLCBrZXkpIHtcclxuICAgIHZhciBpbmRleEtleSA9IERiRG9jdW1lbnRNdXRhdGlvbi5wcmVmaXhGb3JQYXRoKHVzZXJJZCwga2V5LnBhdGgpO1xyXG4gICAgdmFyIGVuY29kZWRQYXRoID0gaW5kZXhLZXlbMV07XHJcbiAgICB2YXIgc3RhcnRSYW5nZSA9IElEQktleVJhbmdlLmxvd2VyQm91bmQoaW5kZXhLZXkpO1xyXG4gICAgdmFyIGNvbnRhaW5zS2V5ID0gZmFsc2U7XHJcbiAgICByZXR1cm4gZG9jdW1lbnRNdXRhdGlvbnNTdG9yZSh0eG4pXHJcbiAgICAgICAgLml0ZXJhdGUoeyByYW5nZTogc3RhcnRSYW5nZSwga2V5c09ubHk6IHRydWUgfSwgZnVuY3Rpb24gKGtleSwgdmFsdWUsIGNvbnRyb2wpIHtcclxuICAgICAgICB2YXIgdXNlcklEID0ga2V5WzBdLCBrZXlQYXRoID0ga2V5WzFdLCAvKmJhdGNoSUQqLyBfID0ga2V5WzJdO1xyXG4gICAgICAgIGlmICh1c2VySUQgPT09IHVzZXJJZCAmJiBrZXlQYXRoID09PSBlbmNvZGVkUGF0aCkge1xyXG4gICAgICAgICAgICBjb250YWluc0tleSA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnRyb2wuZG9uZSgpO1xyXG4gICAgfSlcclxuICAgICAgICAubmV4dChmdW5jdGlvbiAoKSB7IHJldHVybiBjb250YWluc0tleTsgfSk7XHJcbn1cclxuLyoqIFJldHVybnMgdHJ1ZSBpZiBhbnkgbXV0YXRpb24gcXVldWUgY29udGFpbnMgdGhlIGdpdmVuIGRvY3VtZW50LiAqL1xyXG5mdW5jdGlvbiBtdXRhdGlvblF1ZXVlc0NvbnRhaW5LZXkodHhuLCBkb2NLZXkpIHtcclxuICAgIHZhciBmb3VuZCA9IGZhbHNlO1xyXG4gICAgcmV0dXJuIG11dGF0aW9uUXVldWVzU3RvcmUodHhuKVxyXG4gICAgICAgIC5pdGVyYXRlU2VyaWFsKGZ1bmN0aW9uICh1c2VySWQpIHtcclxuICAgICAgICByZXR1cm4gbXV0YXRpb25RdWV1ZUNvbnRhaW5zS2V5KHR4biwgdXNlcklkLCBkb2NLZXkpLm5leHQoZnVuY3Rpb24gKGNvbnRhaW5zS2V5KSB7XHJcbiAgICAgICAgICAgIGlmIChjb250YWluc0tleSkge1xyXG4gICAgICAgICAgICAgICAgZm91bmQgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSghY29udGFpbnNLZXkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSlcclxuICAgICAgICAubmV4dChmdW5jdGlvbiAoKSB7IHJldHVybiBmb3VuZDsgfSk7XHJcbn1cclxuLyoqXHJcbiAqIERlbGV0ZSBhIG11dGF0aW9uIGJhdGNoIGFuZCB0aGUgYXNzb2NpYXRlZCBkb2N1bWVudCBtdXRhdGlvbnMuXHJcbiAqIEByZXR1cm4gQSBQZXJzaXN0ZW5jZVByb21pc2Ugb2YgdGhlIGRvY3VtZW50IG11dGF0aW9ucyB0aGF0IHdlcmUgcmVtb3ZlZC5cclxuICovXHJcbmZ1bmN0aW9uIHJlbW92ZU11dGF0aW9uQmF0Y2godHhuLCB1c2VySWQsIGJhdGNoKSB7XHJcbiAgICB2YXIgbXV0YXRpb25TdG9yZSA9IHR4bi5zdG9yZShEYk11dGF0aW9uQmF0Y2guc3RvcmUpO1xyXG4gICAgdmFyIGluZGV4VHhuID0gdHhuLnN0b3JlKERiRG9jdW1lbnRNdXRhdGlvbi5zdG9yZSk7XHJcbiAgICB2YXIgcHJvbWlzZXMgPSBbXTtcclxuICAgIHZhciByYW5nZSA9IElEQktleVJhbmdlLm9ubHkoYmF0Y2guYmF0Y2hJZCk7XHJcbiAgICB2YXIgbnVtRGVsZXRlZCA9IDA7XHJcbiAgICB2YXIgcmVtb3ZlUHJvbWlzZSA9IG11dGF0aW9uU3RvcmUuaXRlcmF0ZSh7IHJhbmdlOiByYW5nZSB9LCBmdW5jdGlvbiAoa2V5LCB2YWx1ZSwgY29udHJvbCkge1xyXG4gICAgICAgIG51bURlbGV0ZWQrKztcclxuICAgICAgICByZXR1cm4gY29udHJvbC5kZWxldGUoKTtcclxuICAgIH0pO1xyXG4gICAgcHJvbWlzZXMucHVzaChyZW1vdmVQcm9taXNlLm5leHQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGFzc2VydChudW1EZWxldGVkID09PSAxLCAnRGFuZ2xpbmcgZG9jdW1lbnQtbXV0YXRpb24gcmVmZXJlbmNlIGZvdW5kOiBNaXNzaW5nIGJhdGNoICcgK1xyXG4gICAgICAgICAgICBiYXRjaC5iYXRjaElkKTtcclxuICAgIH0pKTtcclxuICAgIHZhciByZW1vdmVkRG9jdW1lbnRzID0gW107XHJcbiAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gYmF0Y2gubXV0YXRpb25zOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgIHZhciBtdXRhdGlvbiA9IF9hW19pXTtcclxuICAgICAgICB2YXIgaW5kZXhLZXkgPSBEYkRvY3VtZW50TXV0YXRpb24ua2V5KHVzZXJJZCwgbXV0YXRpb24ua2V5LnBhdGgsIGJhdGNoLmJhdGNoSWQpO1xyXG4gICAgICAgIHByb21pc2VzLnB1c2goaW5kZXhUeG4uZGVsZXRlKGluZGV4S2V5KSk7XHJcbiAgICAgICAgcmVtb3ZlZERvY3VtZW50cy5wdXNoKG11dGF0aW9uLmtleSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLndhaXRGb3IocHJvbWlzZXMpLm5leHQoZnVuY3Rpb24gKCkgeyByZXR1cm4gcmVtb3ZlZERvY3VtZW50czsgfSk7XHJcbn1cclxuZnVuY3Rpb24gY29udmVydFN0cmVhbVRva2VuKHRva2VuKSB7XHJcbiAgICBpZiAodG9rZW4gaW5zdGFuY2VvZiBVaW50OEFycmF5KSB7XHJcbiAgICAgICAgLy8gVE9ETyhiLzc4NzcxNDAzKTogQ29udmVydCB0b2tlbnMgdG8gc3RyaW5ncyBkdXJpbmcgZGVzZXJpYWxpemF0aW9uXHJcbiAgICAgICAgYXNzZXJ0KFNpbXBsZURiLmlzTW9ja1BlcnNpc3RlbmNlKCksICdQZXJzaXN0aW5nIG5vbi1zdHJpbmcgc3RyZWFtIHRva2VucyBpcyBvbmx5IHN1cHBvcnRlZCB3aXRoIG1vY2sgcGVyc2lzdGVuY2UuJyk7XHJcbiAgICAgICAgcmV0dXJuIHRva2VuLnRvU3RyaW5nKCk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICByZXR1cm4gdG9rZW47XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIEhlbHBlciB0byBnZXQgYSB0eXBlZCBTaW1wbGVEYlN0b3JlIGZvciB0aGUgbXV0YXRpb25zIG9iamVjdCBzdG9yZS5cclxuICovXHJcbmZ1bmN0aW9uIG11dGF0aW9uc1N0b3JlKHR4bikge1xyXG4gICAgcmV0dXJuIEluZGV4ZWREYlBlcnNpc3RlbmNlLmdldFN0b3JlKHR4biwgRGJNdXRhdGlvbkJhdGNoLnN0b3JlKTtcclxufVxyXG4vKipcclxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSBtdXRhdGlvblF1ZXVlcyBvYmplY3Qgc3RvcmUuXHJcbiAqL1xyXG5mdW5jdGlvbiBkb2N1bWVudE11dGF0aW9uc1N0b3JlKHR4bikge1xyXG4gICAgcmV0dXJuIEluZGV4ZWREYlBlcnNpc3RlbmNlLmdldFN0b3JlKHR4biwgRGJEb2N1bWVudE11dGF0aW9uLnN0b3JlKTtcclxufVxyXG4vKipcclxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSBtdXRhdGlvblF1ZXVlcyBvYmplY3Qgc3RvcmUuXHJcbiAqL1xyXG5mdW5jdGlvbiBtdXRhdGlvblF1ZXVlc1N0b3JlKHR4bikge1xyXG4gICAgcmV0dXJuIEluZGV4ZWREYlBlcnNpc3RlbmNlLmdldFN0b3JlKHR4biwgRGJNdXRhdGlvblF1ZXVlLnN0b3JlKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxudmFyIFJFU0VSVkVEX0JJVFMgPSAxO1xyXG52YXIgR2VuZXJhdG9ySWRzO1xyXG4oZnVuY3Rpb24gKEdlbmVyYXRvcklkcykge1xyXG4gICAgR2VuZXJhdG9ySWRzW0dlbmVyYXRvcklkc1tcIlF1ZXJ5Q2FjaGVcIl0gPSAwXSA9IFwiUXVlcnlDYWNoZVwiO1xyXG4gICAgR2VuZXJhdG9ySWRzW0dlbmVyYXRvcklkc1tcIlN5bmNFbmdpbmVcIl0gPSAxXSA9IFwiU3luY0VuZ2luZVwiOyAvLyBUaGUgdGFyZ2V0IElEcyBmb3IgbGltYm8gZGV0ZWN0aW9uIGFyZSBvZGQgKGVuZCBpbiAxKS5cclxufSkoR2VuZXJhdG9ySWRzIHx8IChHZW5lcmF0b3JJZHMgPSB7fSkpO1xyXG4vKipcclxuICogR2VuZXJhdGVzIG1vbm90b25pY2FsbHkgaW5jcmVhc2luZyB0YXJnZXQgSURzIGZvciBzZW5kaW5nIHRhcmdldHMgdG8gdGhlXHJcbiAqIHdhdGNoIHN0cmVhbS5cclxuICpcclxuICogVGhlIGNsaWVudCBjb25zdHJ1Y3RzIHR3byBnZW5lcmF0b3JzLCBvbmUgZm9yIHRoZSBxdWVyeSBjYWNoZSAodmlhXHJcbiAqIGZvclF1ZXJ5Q2FjaGUoKSksIGFuZCBvbmUgZm9yIGxpbWJvIGRvY3VtZW50cyAodmlhIGZvclN5bmNFbmdpbmUoKSkuIFRoZXNlXHJcbiAqIHR3byBnZW5lcmF0b3JzIHByb2R1Y2Ugbm9uLW92ZXJsYXBwaW5nIElEcyAoYnkgdXNpbmcgZXZlbiBhbmQgb2RkIElEc1xyXG4gKiByZXNwZWN0aXZlbHkpLlxyXG4gKlxyXG4gKiBCeSBzZXBhcmF0aW5nIHRoZSB0YXJnZXQgSUQgc3BhY2UsIHRoZSBxdWVyeSBjYWNoZSBjYW4gZ2VuZXJhdGUgdGFyZ2V0IElEc1xyXG4gKiB0aGF0IHBlcnNpc3QgYWNyb3NzIGNsaWVudCByZXN0YXJ0cywgd2hpbGUgc3luYyBlbmdpbmUgY2FuIGluZGVwZW5kZW50bHlcclxuICogZ2VuZXJhdGUgaW4tbWVtb3J5IHRhcmdldCBJRHMgdGhhdCBhcmUgdHJhbnNpZW50IGFuZCBjYW4gYmUgcmV1c2VkIGFmdGVyIGFcclxuICogcmVzdGFydC5cclxuICovXHJcbi8vIFRPRE8obXJzY2htaWR0KTogRXhwbG9yZSByZW1vdmluZyB0aGlzIGNsYXNzIGluIGZhdm9yIG9mIGdlbmVyYXRpbmcgdGhlc2UgSURzXHJcbi8vIGRpcmVjdGx5IGluIFN5bmNFbmdpbmUgYW5kIExvY2FsU3RvcmUuXHJcbnZhciBUYXJnZXRJZEdlbmVyYXRvciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIC8qKlxyXG4gICAgICogSW5zdGFudGlhdGVzIGEgbmV3IFRhcmdldElkR2VuZXJhdG9yLiBJZiBhIHNlZWQgaXMgcHJvdmlkZWQsIHRoZSBnZW5lcmF0b3JcclxuICAgICAqIHdpbGwgdXNlIHRoZSBzZWVkIHZhbHVlIGFzIHRoZSBuZXh0IHRhcmdldCBJRC5cclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gVGFyZ2V0SWRHZW5lcmF0b3IoZ2VuZXJhdG9ySWQsIHNlZWQpIHtcclxuICAgICAgICB0aGlzLmdlbmVyYXRvcklkID0gZ2VuZXJhdG9ySWQ7XHJcbiAgICAgICAgYXNzZXJ0KChnZW5lcmF0b3JJZCAmIFJFU0VSVkVEX0JJVFMpID09PSBnZW5lcmF0b3JJZCwgXCJHZW5lcmF0b3IgSUQgXCIgKyBnZW5lcmF0b3JJZCArIFwiIGNvbnRhaW5zIG1vcmUgdGhhbiBcIiArIFJFU0VSVkVEX0JJVFMgKyBcIiByZXNlcnZlZCBiaXRzXCIpO1xyXG4gICAgICAgIHRoaXMuc2VlayhzZWVkICE9PSB1bmRlZmluZWQgPyBzZWVkIDogdGhpcy5nZW5lcmF0b3JJZCk7XHJcbiAgICB9XHJcbiAgICBUYXJnZXRJZEdlbmVyYXRvci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgbmV4dElkID0gdGhpcy5uZXh0SWQ7XHJcbiAgICAgICAgdGhpcy5uZXh0SWQgKz0gMSA8PCBSRVNFUlZFRF9CSVRTO1xyXG4gICAgICAgIHJldHVybiBuZXh0SWQ7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSBJRCB0aGF0IGZvbGxvd3MgdGhlIGdpdmVuIElELiBTdWJzZXF1ZW50IGNhbGxzIHRvIGBuZXh0KClgXHJcbiAgICAgKiB1c2UgdGhlIG5ld2x5IHJldHVybmVkIHRhcmdldCBJRCBhcyB0aGVpciBiYXNlLlxyXG4gICAgICovXHJcbiAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLXRhYiBvbmx5LlxyXG4gICAgVGFyZ2V0SWRHZW5lcmF0b3IucHJvdG90eXBlLmFmdGVyID0gZnVuY3Rpb24gKHRhcmdldElkKSB7XHJcbiAgICAgICAgdGhpcy5zZWVrKHRhcmdldElkICsgKDEgPDwgUkVTRVJWRURfQklUUykpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLm5leHQoKTtcclxuICAgIH07XHJcbiAgICBUYXJnZXRJZEdlbmVyYXRvci5wcm90b3R5cGUuc2VlayA9IGZ1bmN0aW9uICh0YXJnZXRJZCkge1xyXG4gICAgICAgIGFzc2VydCgodGFyZ2V0SWQgJiBSRVNFUlZFRF9CSVRTKSA9PT0gdGhpcy5nZW5lcmF0b3JJZCwgJ0Nhbm5vdCBzdXBwbHkgdGFyZ2V0IElEIGZyb20gZGlmZmVyZW50IGdlbmVyYXRvciBJRCcpO1xyXG4gICAgICAgIHRoaXMubmV4dElkID0gdGFyZ2V0SWQ7XHJcbiAgICB9O1xyXG4gICAgVGFyZ2V0SWRHZW5lcmF0b3IuZm9yVGFyZ2V0Q2FjaGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy8gV2Ugc2VlZCB0aGUgcXVlcnkgY2FjaGUgZ2VuZXJhdG9yIHRvIHJldHVybiAnMicgYXMgaXRzIGZpcnN0IElELCBhcyB0aGVyZVxyXG4gICAgICAgIC8vIGlzIG5vIGRpZmZlcmVudGlhdGlvbiBpbiB0aGUgcHJvdG9jb2wgbGF5ZXIgYmV0d2VlbiBhbiB1bnNldCBudW1iZXIgYW5kXHJcbiAgICAgICAgLy8gdGhlIG51bWJlciAnMCcuIElmIHdlIHdlcmUgdG8gc2VudCBhIHRhcmdldCB3aXRoIHRhcmdldCBJRCAnMCcsIHRoZVxyXG4gICAgICAgIC8vIGJhY2tlbmQgd291bGQgY29uc2lkZXIgaXQgdW5zZXQgYW5kIHJlcGxhY2UgaXQgd2l0aCBpdHMgb3duIElELlxyXG4gICAgICAgIHZhciB0YXJnZXRJZEdlbmVyYXRvciA9IG5ldyBUYXJnZXRJZEdlbmVyYXRvcihHZW5lcmF0b3JJZHMuUXVlcnlDYWNoZSwgMik7XHJcbiAgICAgICAgcmV0dXJuIHRhcmdldElkR2VuZXJhdG9yO1xyXG4gICAgfTtcclxuICAgIFRhcmdldElkR2VuZXJhdG9yLmZvclN5bmNFbmdpbmUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy8gU3luYyBlbmdpbmUgYXNzaWducyB0YXJnZXQgSURzIGZvciBsaW1ibyBkb2N1bWVudCBkZXRlY3Rpb24uXHJcbiAgICAgICAgcmV0dXJuIG5ldyBUYXJnZXRJZEdlbmVyYXRvcihHZW5lcmF0b3JJZHMuU3luY0VuZ2luZSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFRhcmdldElkR2VuZXJhdG9yO1xyXG59KCkpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxudmFyIEluZGV4ZWREYlRhcmdldENhY2hlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gSW5kZXhlZERiVGFyZ2V0Q2FjaGUocmVmZXJlbmNlRGVsZWdhdGUsIHNlcmlhbGl6ZXIpIHtcclxuICAgICAgICB0aGlzLnJlZmVyZW5jZURlbGVnYXRlID0gcmVmZXJlbmNlRGVsZWdhdGU7XHJcbiAgICAgICAgdGhpcy5zZXJpYWxpemVyID0gc2VyaWFsaXplcjtcclxuICAgICAgICAvLyBQT1JUSU5HIE5PVEU6IFdlIGRvbid0IGNhY2hlIGdsb2JhbCBtZXRhZGF0YSBmb3IgdGhlIHRhcmdldCBjYWNoZSwgc2luY2VcclxuICAgICAgICAvLyBzb21lIG9mIGl0IChpbiBwYXJ0aWN1bGFyIGBoaWdoZXN0VGFyZ2V0SWRgKSBjYW4gYmUgbW9kaWZpZWQgYnkgc2Vjb25kYXJ5XHJcbiAgICAgICAgLy8gdGFicy4gV2UgY291bGQgcGVyaGFwcyBiZSBtb3JlIGdyYW51bGFyIChhbmQgZS5nLiBzdGlsbCBjYWNoZVxyXG4gICAgICAgIC8vIGBsYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uYCBpbiBtZW1vcnkpIGJ1dCBmb3Igc2ltcGxpY2l0eSB3ZSBjdXJyZW50bHkgZ29cclxuICAgICAgICAvLyB0byBJbmRleGVkRGIgd2hlbmV2ZXIgd2UgbmVlZCB0byByZWFkIG1ldGFkYXRhLiBXZSBjYW4gcmV2aXNpdCBpZiBpdCB0dXJuc1xyXG4gICAgICAgIC8vIG91dCB0byBoYXZlIGEgbWVhbmluZ2Z1bCBwZXJmb3JtYW5jZSBpbXBhY3QuXHJcbiAgICAgICAgdGhpcy50YXJnZXRJZEdlbmVyYXRvciA9IFRhcmdldElkR2VuZXJhdG9yLmZvclRhcmdldENhY2hlKCk7XHJcbiAgICB9XHJcbiAgICBJbmRleGVkRGJUYXJnZXRDYWNoZS5wcm90b3R5cGUuYWxsb2NhdGVUYXJnZXRJZCA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucmV0cmlldmVNZXRhZGF0YSh0cmFuc2FjdGlvbikubmV4dChmdW5jdGlvbiAobWV0YWRhdGEpIHtcclxuICAgICAgICAgICAgbWV0YWRhdGEuaGlnaGVzdFRhcmdldElkID0gX3RoaXMudGFyZ2V0SWRHZW5lcmF0b3IuYWZ0ZXIobWV0YWRhdGEuaGlnaGVzdFRhcmdldElkKTtcclxuICAgICAgICAgICAgcmV0dXJuIF90aGlzLnNhdmVNZXRhZGF0YSh0cmFuc2FjdGlvbiwgbWV0YWRhdGEpLm5leHQoZnVuY3Rpb24gKCkgeyByZXR1cm4gbWV0YWRhdGEuaGlnaGVzdFRhcmdldElkOyB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBJbmRleGVkRGJUYXJnZXRDYWNoZS5wcm90b3R5cGUuZ2V0TGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbiA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbikge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnJldHJpZXZlTWV0YWRhdGEodHJhbnNhY3Rpb24pLm5leHQoZnVuY3Rpb24gKG1ldGFkYXRhKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBTbmFwc2hvdFZlcnNpb24uZnJvbVRpbWVzdGFtcChuZXcgVGltZXN0YW1wKG1ldGFkYXRhLmxhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24uc2Vjb25kcywgbWV0YWRhdGEubGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbi5uYW5vc2Vjb25kcykpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIEluZGV4ZWREYlRhcmdldENhY2hlLnByb3RvdHlwZS5nZXRIaWdoZXN0U2VxdWVuY2VOdW1iZXIgPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24pIHtcclxuICAgICAgICByZXR1cm4gZ2V0SGlnaGVzdExpc3RlblNlcXVlbmNlTnVtYmVyKHRyYW5zYWN0aW9uLnNpbXBsZURiVHJhbnNhY3Rpb24pO1xyXG4gICAgfTtcclxuICAgIEluZGV4ZWREYlRhcmdldENhY2hlLnByb3RvdHlwZS5zZXRUYXJnZXRzTWV0YWRhdGEgPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24sIGhpZ2hlc3RMaXN0ZW5TZXF1ZW5jZU51bWJlciwgbGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucmV0cmlldmVNZXRhZGF0YSh0cmFuc2FjdGlvbikubmV4dChmdW5jdGlvbiAobWV0YWRhdGEpIHtcclxuICAgICAgICAgICAgbWV0YWRhdGEuaGlnaGVzdExpc3RlblNlcXVlbmNlTnVtYmVyID0gaGlnaGVzdExpc3RlblNlcXVlbmNlTnVtYmVyO1xyXG4gICAgICAgICAgICBpZiAobGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbikge1xyXG4gICAgICAgICAgICAgICAgbWV0YWRhdGEubGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbiA9IGxhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24udG9UaW1lc3RhbXAoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoaGlnaGVzdExpc3RlblNlcXVlbmNlTnVtYmVyID4gbWV0YWRhdGEuaGlnaGVzdExpc3RlblNlcXVlbmNlTnVtYmVyKSB7XHJcbiAgICAgICAgICAgICAgICBtZXRhZGF0YS5oaWdoZXN0TGlzdGVuU2VxdWVuY2VOdW1iZXIgPSBoaWdoZXN0TGlzdGVuU2VxdWVuY2VOdW1iZXI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIF90aGlzLnNhdmVNZXRhZGF0YSh0cmFuc2FjdGlvbiwgbWV0YWRhdGEpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIEluZGV4ZWREYlRhcmdldENhY2hlLnByb3RvdHlwZS5hZGRUYXJnZXREYXRhID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCB0YXJnZXREYXRhKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICByZXR1cm4gdGhpcy5zYXZlVGFyZ2V0RGF0YSh0cmFuc2FjdGlvbiwgdGFyZ2V0RGF0YSkubmV4dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5yZXRyaWV2ZU1ldGFkYXRhKHRyYW5zYWN0aW9uKS5uZXh0KGZ1bmN0aW9uIChtZXRhZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgbWV0YWRhdGEudGFyZ2V0Q291bnQgKz0gMTtcclxuICAgICAgICAgICAgICAgIF90aGlzLnVwZGF0ZU1ldGFkYXRhRnJvbVRhcmdldERhdGEodGFyZ2V0RGF0YSwgbWV0YWRhdGEpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLnNhdmVNZXRhZGF0YSh0cmFuc2FjdGlvbiwgbWV0YWRhdGEpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBJbmRleGVkRGJUYXJnZXRDYWNoZS5wcm90b3R5cGUudXBkYXRlVGFyZ2V0RGF0YSA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwgdGFyZ2V0RGF0YSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNhdmVUYXJnZXREYXRhKHRyYW5zYWN0aW9uLCB0YXJnZXREYXRhKTtcclxuICAgIH07XHJcbiAgICBJbmRleGVkRGJUYXJnZXRDYWNoZS5wcm90b3R5cGUucmVtb3ZlVGFyZ2V0RGF0YSA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwgdGFyZ2V0RGF0YSkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucmVtb3ZlTWF0Y2hpbmdLZXlzRm9yVGFyZ2V0SWQodHJhbnNhY3Rpb24sIHRhcmdldERhdGEudGFyZ2V0SWQpXHJcbiAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRhcmdldHNTdG9yZSh0cmFuc2FjdGlvbikuZGVsZXRlKHRhcmdldERhdGEudGFyZ2V0SWQpOyB9KVxyXG4gICAgICAgICAgICAubmV4dChmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5yZXRyaWV2ZU1ldGFkYXRhKHRyYW5zYWN0aW9uKTsgfSlcclxuICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKG1ldGFkYXRhKSB7XHJcbiAgICAgICAgICAgIGFzc2VydChtZXRhZGF0YS50YXJnZXRDb3VudCA+IDAsICdSZW1vdmluZyBmcm9tIGFuIGVtcHR5IHRhcmdldCBjYWNoZScpO1xyXG4gICAgICAgICAgICBtZXRhZGF0YS50YXJnZXRDb3VudCAtPSAxO1xyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXMuc2F2ZU1ldGFkYXRhKHRyYW5zYWN0aW9uLCBtZXRhZGF0YSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBEcm9wcyBhbnkgdGFyZ2V0cyB3aXRoIHNlcXVlbmNlIG51bWJlciBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gdGhlIHVwcGVyIGJvdW5kLCBleGNlcHRpbmcgdGhvc2VcclxuICAgICAqIHByZXNlbnQgaW4gYGFjdGl2ZVRhcmdldElkc2AuIERvY3VtZW50IGFzc29jaWF0aW9ucyBmb3IgdGhlIHJlbW92ZWQgdGFyZ2V0cyBhcmUgYWxzbyByZW1vdmVkLlxyXG4gICAgICogUmV0dXJucyB0aGUgbnVtYmVyIG9mIHRhcmdldHMgcmVtb3ZlZC5cclxuICAgICAqL1xyXG4gICAgSW5kZXhlZERiVGFyZ2V0Q2FjaGUucHJvdG90eXBlLnJlbW92ZVRhcmdldHMgPSBmdW5jdGlvbiAodHhuLCB1cHBlckJvdW5kLCBhY3RpdmVUYXJnZXRJZHMpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhciBjb3VudCA9IDA7XHJcbiAgICAgICAgdmFyIHByb21pc2VzID0gW107XHJcbiAgICAgICAgcmV0dXJuIHRhcmdldHNTdG9yZSh0eG4pXHJcbiAgICAgICAgICAgIC5pdGVyYXRlKGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XHJcbiAgICAgICAgICAgIHZhciB0YXJnZXREYXRhID0gX3RoaXMuc2VyaWFsaXplci5mcm9tRGJUYXJnZXQodmFsdWUpO1xyXG4gICAgICAgICAgICBpZiAodGFyZ2V0RGF0YS5zZXF1ZW5jZU51bWJlciA8PSB1cHBlckJvdW5kICYmXHJcbiAgICAgICAgICAgICAgICBhY3RpdmVUYXJnZXRJZHMuZ2V0KHRhcmdldERhdGEudGFyZ2V0SWQpID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICBjb3VudCsrO1xyXG4gICAgICAgICAgICAgICAgcHJvbWlzZXMucHVzaChfdGhpcy5yZW1vdmVUYXJnZXREYXRhKHR4biwgdGFyZ2V0RGF0YSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKCkgeyByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLndhaXRGb3IocHJvbWlzZXMpOyB9KVxyXG4gICAgICAgICAgICAubmV4dChmdW5jdGlvbiAoKSB7IHJldHVybiBjb3VudDsgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBDYWxsIHByb3ZpZGVkIGZ1bmN0aW9uIHdpdGggZWFjaCBgVGFyZ2V0RGF0YWAgdGhhdCB3ZSBoYXZlIGNhY2hlZC5cclxuICAgICAqL1xyXG4gICAgSW5kZXhlZERiVGFyZ2V0Q2FjaGUucHJvdG90eXBlLmZvckVhY2hUYXJnZXQgPSBmdW5jdGlvbiAodHhuLCBmKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICByZXR1cm4gdGFyZ2V0c1N0b3JlKHR4bikuaXRlcmF0ZShmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xyXG4gICAgICAgICAgICB2YXIgdGFyZ2V0RGF0YSA9IF90aGlzLnNlcmlhbGl6ZXIuZnJvbURiVGFyZ2V0KHZhbHVlKTtcclxuICAgICAgICAgICAgZih0YXJnZXREYXRhKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBJbmRleGVkRGJUYXJnZXRDYWNoZS5wcm90b3R5cGUucmV0cmlldmVNZXRhZGF0YSA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbikge1xyXG4gICAgICAgIHJldHVybiByZXRyaWV2ZU1ldGFkYXRhKHRyYW5zYWN0aW9uLnNpbXBsZURiVHJhbnNhY3Rpb24pO1xyXG4gICAgfTtcclxuICAgIEluZGV4ZWREYlRhcmdldENhY2hlLnByb3RvdHlwZS5zYXZlTWV0YWRhdGEgPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24sIG1ldGFkYXRhKSB7XHJcbiAgICAgICAgcmV0dXJuIGdsb2JhbFRhcmdldFN0b3JlKHRyYW5zYWN0aW9uKS5wdXQoRGJUYXJnZXRHbG9iYWwua2V5LCBtZXRhZGF0YSk7XHJcbiAgICB9O1xyXG4gICAgSW5kZXhlZERiVGFyZ2V0Q2FjaGUucHJvdG90eXBlLnNhdmVUYXJnZXREYXRhID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCB0YXJnZXREYXRhKSB7XHJcbiAgICAgICAgcmV0dXJuIHRhcmdldHNTdG9yZSh0cmFuc2FjdGlvbikucHV0KHRoaXMuc2VyaWFsaXplci50b0RiVGFyZ2V0KHRhcmdldERhdGEpKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEluLXBsYWNlIHVwZGF0ZXMgdGhlIHByb3ZpZGVkIG1ldGFkYXRhIHRvIGFjY291bnQgZm9yIHZhbHVlcyBpbiB0aGUgZ2l2ZW5cclxuICAgICAqIFRhcmdldERhdGEuIFNhdmluZyBpcyBkb25lIHNlcGFyYXRlbHkuIFJldHVybnMgdHJ1ZSBpZiB0aGVyZSB3ZXJlIGFueVxyXG4gICAgICogY2hhbmdlcyB0byB0aGUgbWV0YWRhdGEuXHJcbiAgICAgKi9cclxuICAgIEluZGV4ZWREYlRhcmdldENhY2hlLnByb3RvdHlwZS51cGRhdGVNZXRhZGF0YUZyb21UYXJnZXREYXRhID0gZnVuY3Rpb24gKHRhcmdldERhdGEsIG1ldGFkYXRhKSB7XHJcbiAgICAgICAgdmFyIHVwZGF0ZWQgPSBmYWxzZTtcclxuICAgICAgICBpZiAodGFyZ2V0RGF0YS50YXJnZXRJZCA+IG1ldGFkYXRhLmhpZ2hlc3RUYXJnZXRJZCkge1xyXG4gICAgICAgICAgICBtZXRhZGF0YS5oaWdoZXN0VGFyZ2V0SWQgPSB0YXJnZXREYXRhLnRhcmdldElkO1xyXG4gICAgICAgICAgICB1cGRhdGVkID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRhcmdldERhdGEuc2VxdWVuY2VOdW1iZXIgPiBtZXRhZGF0YS5oaWdoZXN0TGlzdGVuU2VxdWVuY2VOdW1iZXIpIHtcclxuICAgICAgICAgICAgbWV0YWRhdGEuaGlnaGVzdExpc3RlblNlcXVlbmNlTnVtYmVyID0gdGFyZ2V0RGF0YS5zZXF1ZW5jZU51bWJlcjtcclxuICAgICAgICAgICAgdXBkYXRlZCA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB1cGRhdGVkO1xyXG4gICAgfTtcclxuICAgIEluZGV4ZWREYlRhcmdldENhY2hlLnByb3RvdHlwZS5nZXRUYXJnZXRDb3VudCA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbikge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnJldHJpZXZlTWV0YWRhdGEodHJhbnNhY3Rpb24pLm5leHQoZnVuY3Rpb24gKG1ldGFkYXRhKSB7IHJldHVybiBtZXRhZGF0YS50YXJnZXRDb3VudDsgfSk7XHJcbiAgICB9O1xyXG4gICAgSW5kZXhlZERiVGFyZ2V0Q2FjaGUucHJvdG90eXBlLmdldFRhcmdldERhdGEgPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24sIHRhcmdldCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgLy8gSXRlcmF0aW5nIGJ5IHRoZSBjYW5vbmljYWxJZCBtYXkgeWllbGQgbW9yZSB0aGFuIG9uZSByZXN1bHQgYmVjYXVzZVxyXG4gICAgICAgIC8vIGNhbm9uaWNhbElkIHZhbHVlcyBhcmUgbm90IHJlcXVpcmVkIHRvIGJlIHVuaXF1ZSBwZXIgdGFyZ2V0LiBUaGlzIHF1ZXJ5XHJcbiAgICAgICAgLy8gZGVwZW5kcyBvbiB0aGUgcXVlcnlUYXJnZXRzIGluZGV4IHRvIGJlIGVmZmljaWVudC5cclxuICAgICAgICB2YXIgY2Fub25pY2FsSWQgPSB0YXJnZXQuY2Fub25pY2FsSWQoKTtcclxuICAgICAgICB2YXIgcmFuZ2UgPSBJREJLZXlSYW5nZS5ib3VuZChbY2Fub25pY2FsSWQsIE51bWJlci5ORUdBVElWRV9JTkZJTklUWV0sIFtjYW5vbmljYWxJZCwgTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZXSk7XHJcbiAgICAgICAgdmFyIHJlc3VsdCA9IG51bGw7XHJcbiAgICAgICAgcmV0dXJuIHRhcmdldHNTdG9yZSh0cmFuc2FjdGlvbilcclxuICAgICAgICAgICAgLml0ZXJhdGUoeyByYW5nZTogcmFuZ2UsIGluZGV4OiBEYlRhcmdldC5xdWVyeVRhcmdldHNJbmRleE5hbWUgfSwgZnVuY3Rpb24gKGtleSwgdmFsdWUsIGNvbnRyb2wpIHtcclxuICAgICAgICAgICAgdmFyIGZvdW5kID0gX3RoaXMuc2VyaWFsaXplci5mcm9tRGJUYXJnZXQodmFsdWUpO1xyXG4gICAgICAgICAgICAvLyBBZnRlciBmaW5kaW5nIGEgcG90ZW50aWFsIG1hdGNoLCBjaGVjayB0aGF0IHRoZSB0YXJnZXQgaXNcclxuICAgICAgICAgICAgLy8gYWN0dWFsbHkgZXF1YWwgdG8gdGhlIHJlcXVlc3RlZCB0YXJnZXQuXHJcbiAgICAgICAgICAgIGlmICh0YXJnZXQuaXNFcXVhbChmb3VuZC50YXJnZXQpKSB7XHJcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBmb3VuZDtcclxuICAgICAgICAgICAgICAgIGNvbnRyb2wuZG9uZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKCkgeyByZXR1cm4gcmVzdWx0OyB9KTtcclxuICAgIH07XHJcbiAgICBJbmRleGVkRGJUYXJnZXRDYWNoZS5wcm90b3R5cGUuYWRkTWF0Y2hpbmdLZXlzID0gZnVuY3Rpb24gKHR4biwga2V5cywgdGFyZ2V0SWQpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIC8vIFBPUlRJTkcgTk9URTogVGhlIHJldmVyc2UgaW5kZXggKGRvY3VtZW50c1RhcmdldHMpIGlzIG1haW50YWluZWQgYnlcclxuICAgICAgICAvLyBJbmRleGVkRGIuXHJcbiAgICAgICAgdmFyIHByb21pc2VzID0gW107XHJcbiAgICAgICAgdmFyIHN0b3JlID0gZG9jdW1lbnRUYXJnZXRTdG9yZSh0eG4pO1xyXG4gICAgICAgIGtleXMuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgICAgICAgIHZhciBwYXRoID0gZW5jb2RlKGtleS5wYXRoKTtcclxuICAgICAgICAgICAgcHJvbWlzZXMucHVzaChzdG9yZS5wdXQobmV3IERiVGFyZ2V0RG9jdW1lbnQodGFyZ2V0SWQsIHBhdGgpKSk7XHJcbiAgICAgICAgICAgIHByb21pc2VzLnB1c2goX3RoaXMucmVmZXJlbmNlRGVsZWdhdGUuYWRkUmVmZXJlbmNlKHR4biwga2V5KSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS53YWl0Rm9yKHByb21pc2VzKTtcclxuICAgIH07XHJcbiAgICBJbmRleGVkRGJUYXJnZXRDYWNoZS5wcm90b3R5cGUucmVtb3ZlTWF0Y2hpbmdLZXlzID0gZnVuY3Rpb24gKHR4biwga2V5cywgdGFyZ2V0SWQpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIC8vIFBPUlRJTkcgTk9URTogVGhlIHJldmVyc2UgaW5kZXggKGRvY3VtZW50c1RhcmdldHMpIGlzIG1haW50YWluZWQgYnlcclxuICAgICAgICAvLyBJbmRleGVkRGIuXHJcbiAgICAgICAgdmFyIHN0b3JlID0gZG9jdW1lbnRUYXJnZXRTdG9yZSh0eG4pO1xyXG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UuZm9yRWFjaChrZXlzLCBmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgICAgICAgIHZhciBwYXRoID0gZW5jb2RlKGtleS5wYXRoKTtcclxuICAgICAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS53YWl0Rm9yKFtcclxuICAgICAgICAgICAgICAgIHN0b3JlLmRlbGV0ZShbdGFyZ2V0SWQsIHBhdGhdKSxcclxuICAgICAgICAgICAgICAgIF90aGlzLnJlZmVyZW5jZURlbGVnYXRlLnJlbW92ZVJlZmVyZW5jZSh0eG4sIGtleSlcclxuICAgICAgICAgICAgXSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgSW5kZXhlZERiVGFyZ2V0Q2FjaGUucHJvdG90eXBlLnJlbW92ZU1hdGNoaW5nS2V5c0ZvclRhcmdldElkID0gZnVuY3Rpb24gKHR4biwgdGFyZ2V0SWQpIHtcclxuICAgICAgICB2YXIgc3RvcmUgPSBkb2N1bWVudFRhcmdldFN0b3JlKHR4bik7XHJcbiAgICAgICAgdmFyIHJhbmdlID0gSURCS2V5UmFuZ2UuYm91bmQoW3RhcmdldElkXSwgW3RhcmdldElkICsgMV0sIFxyXG4gICAgICAgIC8qbG93ZXJPcGVuPSovIGZhbHNlLCBcclxuICAgICAgICAvKnVwcGVyT3Blbj0qLyB0cnVlKTtcclxuICAgICAgICByZXR1cm4gc3RvcmUuZGVsZXRlKHJhbmdlKTtcclxuICAgIH07XHJcbiAgICBJbmRleGVkRGJUYXJnZXRDYWNoZS5wcm90b3R5cGUuZ2V0TWF0Y2hpbmdLZXlzRm9yVGFyZ2V0SWQgPSBmdW5jdGlvbiAodHhuLCB0YXJnZXRJZCkge1xyXG4gICAgICAgIHZhciByYW5nZSA9IElEQktleVJhbmdlLmJvdW5kKFt0YXJnZXRJZF0sIFt0YXJnZXRJZCArIDFdLCBcclxuICAgICAgICAvKmxvd2VyT3Blbj0qLyBmYWxzZSwgXHJcbiAgICAgICAgLyp1cHBlck9wZW49Ki8gdHJ1ZSk7XHJcbiAgICAgICAgdmFyIHN0b3JlID0gZG9jdW1lbnRUYXJnZXRTdG9yZSh0eG4pO1xyXG4gICAgICAgIHZhciByZXN1bHQgPSBkb2N1bWVudEtleVNldCgpO1xyXG4gICAgICAgIHJldHVybiBzdG9yZVxyXG4gICAgICAgICAgICAuaXRlcmF0ZSh7IHJhbmdlOiByYW5nZSwga2V5c09ubHk6IHRydWUgfSwgZnVuY3Rpb24gKGtleSwgXywgY29udHJvbCkge1xyXG4gICAgICAgICAgICB2YXIgcGF0aCA9IGRlY29kZShrZXlbMV0pO1xyXG4gICAgICAgICAgICB2YXIgZG9jS2V5ID0gbmV3IERvY3VtZW50S2V5KHBhdGgpO1xyXG4gICAgICAgICAgICByZXN1bHQgPSByZXN1bHQuYWRkKGRvY0tleSk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKCkgeyByZXR1cm4gcmVzdWx0OyB9KTtcclxuICAgIH07XHJcbiAgICBJbmRleGVkRGJUYXJnZXRDYWNoZS5wcm90b3R5cGUuY29udGFpbnNLZXkgPSBmdW5jdGlvbiAodHhuLCBrZXkpIHtcclxuICAgICAgICB2YXIgcGF0aCA9IGVuY29kZShrZXkucGF0aCk7XHJcbiAgICAgICAgdmFyIHJhbmdlID0gSURCS2V5UmFuZ2UuYm91bmQoW3BhdGhdLCBbaW1tZWRpYXRlU3VjY2Vzc29yKHBhdGgpXSwgXHJcbiAgICAgICAgLypsb3dlck9wZW49Ki8gZmFsc2UsIFxyXG4gICAgICAgIC8qdXBwZXJPcGVuPSovIHRydWUpO1xyXG4gICAgICAgIHZhciBjb3VudCA9IDA7XHJcbiAgICAgICAgcmV0dXJuIGRvY3VtZW50VGFyZ2V0U3RvcmUodHhuKVxyXG4gICAgICAgICAgICAuaXRlcmF0ZSh7XHJcbiAgICAgICAgICAgIGluZGV4OiBEYlRhcmdldERvY3VtZW50LmRvY3VtZW50VGFyZ2V0c0luZGV4LFxyXG4gICAgICAgICAgICBrZXlzT25seTogdHJ1ZSxcclxuICAgICAgICAgICAgcmFuZ2U6IHJhbmdlXHJcbiAgICAgICAgfSwgZnVuY3Rpb24gKF9hLCBfLCBjb250cm9sKSB7XHJcbiAgICAgICAgICAgIHZhciB0YXJnZXRJZCA9IF9hWzBdLCBwYXRoID0gX2FbMV07XHJcbiAgICAgICAgICAgIC8vIEhhdmluZyBhIHNlbnRpbmVsIHJvdyBmb3IgYSBkb2N1bWVudCBkb2VzIG5vdCBjb3VudCBhcyBjb250YWluaW5nIHRoYXQgZG9jdW1lbnQ7XHJcbiAgICAgICAgICAgIC8vIEZvciB0aGUgdGFyZ2V0IGNhY2hlLCBjb250YWluaW5nIHRoZSBkb2N1bWVudCBtZWFucyB0aGUgZG9jdW1lbnQgaXMgcGFydCBvZiBzb21lXHJcbiAgICAgICAgICAgIC8vIHRhcmdldC5cclxuICAgICAgICAgICAgaWYgKHRhcmdldElkICE9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBjb3VudCsrO1xyXG4gICAgICAgICAgICAgICAgY29udHJvbC5kb25lKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAubmV4dChmdW5jdGlvbiAoKSB7IHJldHVybiBjb3VudCA+IDA7IH0pO1xyXG4gICAgfTtcclxuICAgIEluZGV4ZWREYlRhcmdldENhY2hlLnByb3RvdHlwZS5nZXRUYXJnZXREYXRhRm9yVGFyZ2V0ID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCB0YXJnZXRJZCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIHRhcmdldHNTdG9yZSh0cmFuc2FjdGlvbilcclxuICAgICAgICAgICAgLmdldCh0YXJnZXRJZClcclxuICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKGZvdW5kKSB7XHJcbiAgICAgICAgICAgIGlmIChmb3VuZCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLnNlcmlhbGl6ZXIuZnJvbURiVGFyZ2V0KGZvdW5kKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEluZGV4ZWREYlRhcmdldENhY2hlO1xyXG59KCkpO1xyXG4vKipcclxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSBxdWVyaWVzIG9iamVjdCBzdG9yZS5cclxuICovXHJcbmZ1bmN0aW9uIHRhcmdldHNTdG9yZSh0eG4pIHtcclxuICAgIHJldHVybiBJbmRleGVkRGJQZXJzaXN0ZW5jZS5nZXRTdG9yZSh0eG4sIERiVGFyZ2V0LnN0b3JlKTtcclxufVxyXG4vKipcclxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSB0YXJnZXQgZ2xvYmFscyBvYmplY3Qgc3RvcmUuXHJcbiAqL1xyXG5mdW5jdGlvbiBnbG9iYWxUYXJnZXRTdG9yZSh0eG4pIHtcclxuICAgIHJldHVybiBJbmRleGVkRGJQZXJzaXN0ZW5jZS5nZXRTdG9yZSh0eG4sIERiVGFyZ2V0R2xvYmFsLnN0b3JlKTtcclxufVxyXG5mdW5jdGlvbiByZXRyaWV2ZU1ldGFkYXRhKHR4bikge1xyXG4gICAgdmFyIGdsb2JhbFN0b3JlID0gU2ltcGxlRGIuZ2V0U3RvcmUodHhuLCBEYlRhcmdldEdsb2JhbC5zdG9yZSk7XHJcbiAgICByZXR1cm4gZ2xvYmFsU3RvcmUuZ2V0KERiVGFyZ2V0R2xvYmFsLmtleSkubmV4dChmdW5jdGlvbiAobWV0YWRhdGEpIHtcclxuICAgICAgICBhc3NlcnQobWV0YWRhdGEgIT09IG51bGwsICdNaXNzaW5nIG1ldGFkYXRhIHJvdy4nKTtcclxuICAgICAgICByZXR1cm4gbWV0YWRhdGE7XHJcbiAgICB9KTtcclxufVxyXG5mdW5jdGlvbiBnZXRIaWdoZXN0TGlzdGVuU2VxdWVuY2VOdW1iZXIodHhuKSB7XHJcbiAgICByZXR1cm4gcmV0cmlldmVNZXRhZGF0YSh0eG4pLm5leHQoZnVuY3Rpb24gKHRhcmdldEdsb2JhbCkgeyByZXR1cm4gdGFyZ2V0R2xvYmFsLmhpZ2hlc3RMaXN0ZW5TZXF1ZW5jZU51bWJlcjsgfSk7XHJcbn1cclxuLyoqXHJcbiAqIEhlbHBlciB0byBnZXQgYSB0eXBlZCBTaW1wbGVEYlN0b3JlIGZvciB0aGUgZG9jdW1lbnQgdGFyZ2V0IG9iamVjdCBzdG9yZS5cclxuICovXHJcbmZ1bmN0aW9uIGRvY3VtZW50VGFyZ2V0U3RvcmUodHhuKSB7XHJcbiAgICByZXR1cm4gSW5kZXhlZERiUGVyc2lzdGVuY2UuZ2V0U3RvcmUodHhuLCBEYlRhcmdldERvY3VtZW50LnN0b3JlKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFByb3ZpZGVzIGEgc2V0IG9mIGZpZWxkcyB0aGF0IGNhbiBiZSB1c2VkIHRvIHBhcnRpYWxseSBwYXRjaCBhIGRvY3VtZW50LlxyXG4gKiBGaWVsZE1hc2sgaXMgdXNlZCBpbiBjb25qdW5jdGlvbiB3aXRoIE9iamVjdFZhbHVlLlxyXG4gKiBFeGFtcGxlczpcclxuICogICBmb28gLSBPdmVyd3JpdGVzIGZvbyBlbnRpcmVseSB3aXRoIHRoZSBwcm92aWRlZCB2YWx1ZS4gSWYgZm9vIGlzIG5vdFxyXG4gKiAgICAgICAgIHByZXNlbnQgaW4gdGhlIGNvbXBhbmlvbiBPYmplY3RWYWx1ZSwgdGhlIGZpZWxkIGlzIGRlbGV0ZWQuXHJcbiAqICAgZm9vLmJhciAtIE92ZXJ3cml0ZXMgb25seSB0aGUgZmllbGQgYmFyIG9mIHRoZSBvYmplY3QgZm9vLlxyXG4gKiAgICAgICAgICAgICBJZiBmb28gaXMgbm90IGFuIG9iamVjdCwgZm9vIGlzIHJlcGxhY2VkIHdpdGggYW4gb2JqZWN0XHJcbiAqICAgICAgICAgICAgIGNvbnRhaW5pbmcgZm9vXHJcbiAqL1xyXG52YXIgRmllbGRNYXNrID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gRmllbGRNYXNrKGZpZWxkcykge1xyXG4gICAgICAgIHRoaXMuZmllbGRzID0gZmllbGRzO1xyXG4gICAgICAgIC8vIFRPRE8oZGltb25kKTogdmFsaWRhdGlvbiBvZiBGaWVsZE1hc2tcclxuICAgIH1cclxuICAgIEZpZWxkTWFzay5mcm9tU2V0ID0gZnVuY3Rpb24gKGZpZWxkcykge1xyXG4gICAgICAgIHJldHVybiBuZXcgRmllbGRNYXNrKGZpZWxkcyk7XHJcbiAgICB9O1xyXG4gICAgRmllbGRNYXNrLmZyb21BcnJheSA9IGZ1bmN0aW9uIChmaWVsZHMpIHtcclxuICAgICAgICB2YXIgZmllbGRzQXNTZXQgPSBuZXcgU29ydGVkU2V0KEZpZWxkUGF0aC5jb21wYXJhdG9yKTtcclxuICAgICAgICBmaWVsZHMuZm9yRWFjaChmdW5jdGlvbiAoZmllbGRQYXRoKSB7IHJldHVybiAoZmllbGRzQXNTZXQgPSBmaWVsZHNBc1NldC5hZGQoZmllbGRQYXRoKSk7IH0pO1xyXG4gICAgICAgIHJldHVybiBuZXcgRmllbGRNYXNrKGZpZWxkc0FzU2V0KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFZlcmlmaWVzIHRoYXQgYGZpZWxkUGF0aGAgaXMgaW5jbHVkZWQgYnkgYXQgbGVhc3Qgb25lIGZpZWxkIGluIHRoaXMgZmllbGRcclxuICAgICAqIG1hc2suXHJcbiAgICAgKlxyXG4gICAgICogVGhpcyBpcyBhbiBPKG4pIG9wZXJhdGlvbiwgd2hlcmUgYG5gIGlzIHRoZSBzaXplIG9mIHRoZSBmaWVsZCBtYXNrLlxyXG4gICAgICovXHJcbiAgICBGaWVsZE1hc2sucHJvdG90eXBlLmNvdmVycyA9IGZ1bmN0aW9uIChmaWVsZFBhdGgpIHtcclxuICAgICAgICB2YXIgZm91bmQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmZpZWxkcy5mb3JFYWNoKGZ1bmN0aW9uIChmaWVsZE1hc2tQYXRoKSB7XHJcbiAgICAgICAgICAgIGlmIChmaWVsZE1hc2tQYXRoLmlzUHJlZml4T2YoZmllbGRQYXRoKSkge1xyXG4gICAgICAgICAgICAgICAgZm91bmQgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIGZvdW5kO1xyXG4gICAgfTtcclxuICAgIEZpZWxkTWFzay5wcm90b3R5cGUuaXNFcXVhbCA9IGZ1bmN0aW9uIChvdGhlcikge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmZpZWxkcy5pc0VxdWFsKG90aGVyLmZpZWxkcyk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEZpZWxkTWFzaztcclxufSgpKTtcclxuLyoqIEEgZmllbGQgcGF0aCBhbmQgdGhlIFRyYW5zZm9ybU9wZXJhdGlvbiB0byBwZXJmb3JtIHVwb24gaXQuICovXHJcbnZhciBGaWVsZFRyYW5zZm9ybSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEZpZWxkVHJhbnNmb3JtKGZpZWxkLCB0cmFuc2Zvcm0pIHtcclxuICAgICAgICB0aGlzLmZpZWxkID0gZmllbGQ7XHJcbiAgICAgICAgdGhpcy50cmFuc2Zvcm0gPSB0cmFuc2Zvcm07XHJcbiAgICB9XHJcbiAgICBGaWVsZFRyYW5zZm9ybS5wcm90b3R5cGUuaXNFcXVhbCA9IGZ1bmN0aW9uIChvdGhlcikge1xyXG4gICAgICAgIHJldHVybiAodGhpcy5maWVsZC5pc0VxdWFsKG90aGVyLmZpZWxkKSAmJiB0aGlzLnRyYW5zZm9ybS5pc0VxdWFsKG90aGVyLnRyYW5zZm9ybSkpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBGaWVsZFRyYW5zZm9ybTtcclxufSgpKTtcclxuLyoqIFRoZSByZXN1bHQgb2Ygc3VjY2Vzc2Z1bGx5IGFwcGx5aW5nIGEgbXV0YXRpb24gdG8gdGhlIGJhY2tlbmQuICovXHJcbnZhciBNdXRhdGlvblJlc3VsdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIE11dGF0aW9uUmVzdWx0KFxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgdmVyc2lvbiBhdCB3aGljaCB0aGUgbXV0YXRpb24gd2FzIGNvbW1pdHRlZDpcclxuICAgICAqXHJcbiAgICAgKiAtIEZvciBtb3N0IG9wZXJhdGlvbnMsIHRoaXMgaXMgdGhlIHVwZGF0ZVRpbWUgaW4gdGhlIFdyaXRlUmVzdWx0LlxyXG4gICAgICogLSBGb3IgZGVsZXRlcywgdGhlIGNvbW1pdFRpbWUgb2YgdGhlIFdyaXRlUmVzcG9uc2UgKGJlY2F1c2UgZGVsZXRlcyBhcmVcclxuICAgICAqICAgbm90IHN0b3JlZCBhbmQgaGF2ZSBubyB1cGRhdGVUaW1lKS5cclxuICAgICAqXHJcbiAgICAgKiBOb3RlIHRoYXQgdGhlc2UgdmVyc2lvbnMgY2FuIGJlIGRpZmZlcmVudDogTm8tb3Agd3JpdGVzIHdpbGwgbm90IGNoYW5nZVxyXG4gICAgICogdGhlIHVwZGF0ZVRpbWUgZXZlbiB0aG91Z2ggdGhlIGNvbW1pdFRpbWUgYWR2YW5jZXMuXHJcbiAgICAgKi9cclxuICAgIHZlcnNpb24sIFxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgcmVzdWx0aW5nIGZpZWxkcyByZXR1cm5lZCBmcm9tIHRoZSBiYWNrZW5kIGFmdGVyIGFcclxuICAgICAqIFRyYW5zZm9ybU11dGF0aW9uIGhhcyBiZWVuIGNvbW1pdHRlZC4gQ29udGFpbnMgb25lIEZpZWxkVmFsdWUgZm9yIGVhY2hcclxuICAgICAqIEZpZWxkVHJhbnNmb3JtIHRoYXQgd2FzIGluIHRoZSBtdXRhdGlvbi5cclxuICAgICAqXHJcbiAgICAgKiBXaWxsIGJlIG51bGwgaWYgdGhlIG11dGF0aW9uIHdhcyBub3QgYSBUcmFuc2Zvcm1NdXRhdGlvbi5cclxuICAgICAqL1xyXG4gICAgdHJhbnNmb3JtUmVzdWx0cykge1xyXG4gICAgICAgIHRoaXMudmVyc2lvbiA9IHZlcnNpb247XHJcbiAgICAgICAgdGhpcy50cmFuc2Zvcm1SZXN1bHRzID0gdHJhbnNmb3JtUmVzdWx0cztcclxuICAgIH1cclxuICAgIHJldHVybiBNdXRhdGlvblJlc3VsdDtcclxufSgpKTtcclxudmFyIE11dGF0aW9uVHlwZTtcclxuKGZ1bmN0aW9uIChNdXRhdGlvblR5cGUpIHtcclxuICAgIE11dGF0aW9uVHlwZVtNdXRhdGlvblR5cGVbXCJTZXRcIl0gPSAwXSA9IFwiU2V0XCI7XHJcbiAgICBNdXRhdGlvblR5cGVbTXV0YXRpb25UeXBlW1wiUGF0Y2hcIl0gPSAxXSA9IFwiUGF0Y2hcIjtcclxuICAgIE11dGF0aW9uVHlwZVtNdXRhdGlvblR5cGVbXCJUcmFuc2Zvcm1cIl0gPSAyXSA9IFwiVHJhbnNmb3JtXCI7XHJcbiAgICBNdXRhdGlvblR5cGVbTXV0YXRpb25UeXBlW1wiRGVsZXRlXCJdID0gM10gPSBcIkRlbGV0ZVwiO1xyXG59KShNdXRhdGlvblR5cGUgfHwgKE11dGF0aW9uVHlwZSA9IHt9KSk7XHJcbi8qKlxyXG4gKiBFbmNvZGVzIGEgcHJlY29uZGl0aW9uIGZvciBhIG11dGF0aW9uLiBUaGlzIGZvbGxvd3MgdGhlIG1vZGVsIHRoYXQgdGhlXHJcbiAqIGJhY2tlbmQgYWNjZXB0cyB3aXRoIHRoZSBzcGVjaWFsIGNhc2Ugb2YgYW4gZXhwbGljaXQgXCJlbXB0eVwiIHByZWNvbmRpdGlvblxyXG4gKiAobWVhbmluZyBubyBwcmVjb25kaXRpb24pLlxyXG4gKi9cclxudmFyIFByZWNvbmRpdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFByZWNvbmRpdGlvbih1cGRhdGVUaW1lLCBleGlzdHMpIHtcclxuICAgICAgICB0aGlzLnVwZGF0ZVRpbWUgPSB1cGRhdGVUaW1lO1xyXG4gICAgICAgIHRoaXMuZXhpc3RzID0gZXhpc3RzO1xyXG4gICAgICAgIGFzc2VydCh1cGRhdGVUaW1lID09PSB1bmRlZmluZWQgfHwgZXhpc3RzID09PSB1bmRlZmluZWQsICdQcmVjb25kaXRpb24gY2FuIHNwZWNpZnkgXCJleGlzdHNcIiBvciBcInVwZGF0ZVRpbWVcIiBidXQgbm90IGJvdGgnKTtcclxuICAgIH1cclxuICAgIC8qKiBDcmVhdGVzIGEgbmV3IFByZWNvbmRpdGlvbiB3aXRoIGFuIGV4aXN0cyBmbGFnLiAqL1xyXG4gICAgUHJlY29uZGl0aW9uLmV4aXN0cyA9IGZ1bmN0aW9uIChleGlzdHMpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFByZWNvbmRpdGlvbih1bmRlZmluZWQsIGV4aXN0cyk7XHJcbiAgICB9O1xyXG4gICAgLyoqIENyZWF0ZXMgYSBuZXcgUHJlY29uZGl0aW9uIGJhc2VkIG9uIGEgdmVyc2lvbiBhIGRvY3VtZW50IGV4aXN0cyBhdC4gKi9cclxuICAgIFByZWNvbmRpdGlvbi51cGRhdGVUaW1lID0gZnVuY3Rpb24gKHZlcnNpb24pIHtcclxuICAgICAgICByZXR1cm4gbmV3IFByZWNvbmRpdGlvbih2ZXJzaW9uKTtcclxuICAgIH07XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoUHJlY29uZGl0aW9uLnByb3RvdHlwZSwgXCJpc05vbmVcIiwge1xyXG4gICAgICAgIC8qKiBSZXR1cm5zIHdoZXRoZXIgdGhpcyBQcmVjb25kaXRpb24gaXMgZW1wdHkuICovXHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnVwZGF0ZVRpbWUgPT09IHVuZGVmaW5lZCAmJiB0aGlzLmV4aXN0cyA9PT0gdW5kZWZpbmVkO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhlIHByZWNvbmRpdGlvbnMgaXMgdmFsaWQgZm9yIHRoZSBnaXZlbiBkb2N1bWVudFxyXG4gICAgICogKG9yIG51bGwgaWYgbm8gZG9jdW1lbnQgaXMgYXZhaWxhYmxlKS5cclxuICAgICAqL1xyXG4gICAgUHJlY29uZGl0aW9uLnByb3RvdHlwZS5pc1ZhbGlkRm9yID0gZnVuY3Rpb24gKG1heWJlRG9jKSB7XHJcbiAgICAgICAgaWYgKHRoaXMudXBkYXRlVGltZSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAobWF5YmVEb2MgaW5zdGFuY2VvZiBEb2N1bWVudCAmJlxyXG4gICAgICAgICAgICAgICAgbWF5YmVEb2MudmVyc2lvbi5pc0VxdWFsKHRoaXMudXBkYXRlVGltZSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh0aGlzLmV4aXN0cyAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmV4aXN0cyA9PT0gbWF5YmVEb2MgaW5zdGFuY2VvZiBEb2N1bWVudDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGFzc2VydCh0aGlzLmlzTm9uZSwgJ1ByZWNvbmRpdGlvbiBzaG91bGQgYmUgZW1wdHknKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFByZWNvbmRpdGlvbi5wcm90b3R5cGUuaXNFcXVhbCA9IGZ1bmN0aW9uIChvdGhlcikge1xyXG4gICAgICAgIHJldHVybiAoZXF1YWxzKHRoaXMudXBkYXRlVGltZSwgb3RoZXIudXBkYXRlVGltZSkgJiZcclxuICAgICAgICAgICAgdGhpcy5leGlzdHMgPT09IG90aGVyLmV4aXN0cyk7XHJcbiAgICB9O1xyXG4gICAgUHJlY29uZGl0aW9uLk5PTkUgPSBuZXcgUHJlY29uZGl0aW9uKCk7XHJcbiAgICByZXR1cm4gUHJlY29uZGl0aW9uO1xyXG59KCkpO1xyXG4vKipcclxuICogQSBtdXRhdGlvbiBkZXNjcmliZXMgYSBzZWxmLWNvbnRhaW5lZCBjaGFuZ2UgdG8gYSBkb2N1bWVudC4gTXV0YXRpb25zIGNhblxyXG4gKiBjcmVhdGUsIHJlcGxhY2UsIGRlbGV0ZSwgYW5kIHVwZGF0ZSBzdWJzZXRzIG9mIGRvY3VtZW50cy5cclxuICpcclxuICogTXV0YXRpb25zIG5vdCBvbmx5IGFjdCBvbiB0aGUgdmFsdWUgb2YgdGhlIGRvY3VtZW50IGJ1dCBhbHNvIGl0IHZlcnNpb24uXHJcbiAqXHJcbiAqIEZvciBsb2NhbCBtdXRhdGlvbnMgKG11dGF0aW9ucyB0aGF0IGhhdmVuJ3QgYmVlbiBjb21taXR0ZWQgeWV0KSwgd2UgcHJlc2VydmVcclxuICogdGhlIGV4aXN0aW5nIHZlcnNpb24gZm9yIFNldCwgUGF0Y2gsIGFuZCBUcmFuc2Zvcm0gbXV0YXRpb25zLiBGb3IgRGVsZXRlXHJcbiAqIG11dGF0aW9ucywgd2UgcmVzZXQgdGhlIHZlcnNpb24gdG8gMC5cclxuICpcclxuICogSGVyZSdzIHRoZSBleHBlY3RlZCB0cmFuc2l0aW9uIHRhYmxlLlxyXG4gKlxyXG4gKiBNVVRBVElPTiAgICAgICAgICAgQVBQTElFRCBUTyAgICAgICAgICAgIFJFU1VMVFMgSU5cclxuICpcclxuICogU2V0TXV0YXRpb24gICAgICAgIERvY3VtZW50KHYzKSAgICAgICAgICBEb2N1bWVudCh2MylcclxuICogU2V0TXV0YXRpb24gICAgICAgIE5vRG9jdW1lbnQodjMpICAgICAgICBEb2N1bWVudCh2MClcclxuICogU2V0TXV0YXRpb24gICAgICAgIG51bGwgICAgICAgICAgICAgICAgICBEb2N1bWVudCh2MClcclxuICogUGF0Y2hNdXRhdGlvbiAgICAgIERvY3VtZW50KHYzKSAgICAgICAgICBEb2N1bWVudCh2MylcclxuICogUGF0Y2hNdXRhdGlvbiAgICAgIE5vRG9jdW1lbnQodjMpICAgICAgICBOb0RvY3VtZW50KHYzKVxyXG4gKiBQYXRjaE11dGF0aW9uICAgICAgbnVsbCAgICAgICAgICAgICAgICAgIG51bGxcclxuICogVHJhbnNmb3JtTXV0YXRpb24gIERvY3VtZW50KHYzKSAgICAgICAgICBEb2N1bWVudCh2MylcclxuICogVHJhbnNmb3JtTXV0YXRpb24gIE5vRG9jdW1lbnQodjMpICAgICAgICBOb0RvY3VtZW50KHYzKVxyXG4gKiBUcmFuc2Zvcm1NdXRhdGlvbiAgbnVsbCAgICAgICAgICAgICAgICAgIG51bGxcclxuICogRGVsZXRlTXV0YXRpb24gICAgIERvY3VtZW50KHYzKSAgICAgICAgICBOb0RvY3VtZW50KHYwKVxyXG4gKiBEZWxldGVNdXRhdGlvbiAgICAgTm9Eb2N1bWVudCh2MykgICAgICAgIE5vRG9jdW1lbnQodjApXHJcbiAqIERlbGV0ZU11dGF0aW9uICAgICBudWxsICAgICAgICAgICAgICAgICAgTm9Eb2N1bWVudCh2MClcclxuICpcclxuICogRm9yIGFja25vd2xlZGdlZCBtdXRhdGlvbnMsIHdlIHVzZSB0aGUgdXBkYXRlVGltZSBvZiB0aGUgV3JpdGVSZXNwb25zZSBhc1xyXG4gKiB0aGUgcmVzdWx0aW5nIHZlcnNpb24gZm9yIFNldCwgUGF0Y2gsIGFuZCBUcmFuc2Zvcm0gbXV0YXRpb25zLiBBcyBkZWxldGVzXHJcbiAqIGhhdmUgbm8gZXhwbGljaXQgdXBkYXRlIHRpbWUsIHdlIHVzZSB0aGUgY29tbWl0VGltZSBvZiB0aGUgV3JpdGVSZXNwb25zZSBmb3JcclxuICogRGVsZXRlIG11dGF0aW9ucy5cclxuICpcclxuICogSWYgYSBtdXRhdGlvbiBpcyBhY2tub3dsZWRnZWQgYnkgdGhlIGJhY2tlbmQgYnV0IGZhaWxzIHRoZSBwcmVjb25kaXRpb24gY2hlY2tcclxuICogbG9jYWxseSwgd2UgcmV0dXJuIGFuIGBVbmtub3duRG9jdW1lbnRgIGFuZCByZWx5IG9uIFdhdGNoIHRvIHNlbmQgdXMgdGhlXHJcbiAqIHVwZGF0ZWQgdmVyc2lvbi5cclxuICpcclxuICogTm90ZSB0aGF0IFRyYW5zZm9ybU11dGF0aW9ucyBkb24ndCBjcmVhdGUgRG9jdW1lbnRzIChpbiB0aGUgY2FzZSBvZiBiZWluZ1xyXG4gKiBhcHBsaWVkIHRvIGEgTm9Eb2N1bWVudCksIGV2ZW4gdGhvdWdoIHRoZXkgd291bGQgb24gdGhlIGJhY2tlbmQuIFRoaXMgaXNcclxuICogYmVjYXVzZSB0aGUgY2xpZW50IGFsd2F5cyBjb21iaW5lcyB0aGUgVHJhbnNmb3JtTXV0YXRpb24gd2l0aCBhIFNldE11dGF0aW9uXHJcbiAqIG9yIFBhdGNoTXV0YXRpb24gYW5kIHdlIG9ubHkgd2FudCB0byBhcHBseSB0aGUgdHJhbnNmb3JtIGlmIHRoZSBwcmlvclxyXG4gKiBtdXRhdGlvbiByZXN1bHRlZCBpbiBhIERvY3VtZW50IChhbHdheXMgdHJ1ZSBmb3IgYSBTZXRNdXRhdGlvbiwgYnV0IG5vdFxyXG4gKiBuZWNlc3NhcmlseSBmb3IgYSBQYXRjaE11dGF0aW9uKS5cclxuICpcclxuICogIyMgU3ViY2xhc3NpbmcgTm90ZXNcclxuICpcclxuICogU3ViY2xhc3NlcyBvZiBNdXRhdGlvbiBuZWVkIHRvIGltcGxlbWVudCBhcHBseVRvUmVtb3RlRG9jdW1lbnQoKSBhbmRcclxuICogYXBwbHlUb0xvY2FsVmlldygpIHRvIGltcGxlbWVudCB0aGUgYWN0dWFsIGJlaGF2aW9yIG9mIGFwcGx5aW5nIHRoZSBtdXRhdGlvblxyXG4gKiB0byBzb21lIHNvdXJjZSBkb2N1bWVudC5cclxuICovXHJcbnZhciBNdXRhdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIE11dGF0aW9uKCkge1xyXG4gICAgfVxyXG4gICAgTXV0YXRpb24ucHJvdG90eXBlLnZlcmlmeUtleU1hdGNoZXMgPSBmdW5jdGlvbiAobWF5YmVEb2MpIHtcclxuICAgICAgICBpZiAobWF5YmVEb2MgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICBhc3NlcnQobWF5YmVEb2Mua2V5LmlzRXF1YWwodGhpcy5rZXkpLCAnQ2FuIG9ubHkgYXBwbHkgYSBtdXRhdGlvbiB0byBhIGRvY3VtZW50IHdpdGggdGhlIHNhbWUga2V5Jyk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0aGUgdmVyc2lvbiBmcm9tIHRoZSBnaXZlbiBkb2N1bWVudCBmb3IgdXNlIGFzIHRoZSByZXN1bHQgb2YgYVxyXG4gICAgICogbXV0YXRpb24uIE11dGF0aW9ucyBhcmUgZGVmaW5lZCB0byByZXR1cm4gdGhlIHZlcnNpb24gb2YgdGhlIGJhc2UgZG9jdW1lbnRcclxuICAgICAqIG9ubHkgaWYgaXQgaXMgYW4gZXhpc3RpbmcgZG9jdW1lbnQuIERlbGV0ZWQgYW5kIHVua25vd24gZG9jdW1lbnRzIGhhdmUgYVxyXG4gICAgICogcG9zdC1tdXRhdGlvbiB2ZXJzaW9uIG9mIFNuYXBzaG90VmVyc2lvbi5NSU4uXHJcbiAgICAgKi9cclxuICAgIE11dGF0aW9uLmdldFBvc3RNdXRhdGlvblZlcnNpb24gPSBmdW5jdGlvbiAobWF5YmVEb2MpIHtcclxuICAgICAgICBpZiAobWF5YmVEb2MgaW5zdGFuY2VvZiBEb2N1bWVudCkge1xyXG4gICAgICAgICAgICByZXR1cm4gbWF5YmVEb2MudmVyc2lvbjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBTbmFwc2hvdFZlcnNpb24uTUlOO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICByZXR1cm4gTXV0YXRpb247XHJcbn0oKSk7XHJcbi8qKlxyXG4gKiBBIG11dGF0aW9uIHRoYXQgY3JlYXRlcyBvciByZXBsYWNlcyB0aGUgZG9jdW1lbnQgYXQgdGhlIGdpdmVuIGtleSB3aXRoIHRoZVxyXG4gKiBvYmplY3QgdmFsdWUgY29udGVudHMuXHJcbiAqL1xyXG52YXIgU2V0TXV0YXRpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICB0c2xpYi5fX2V4dGVuZHMoU2V0TXV0YXRpb24sIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBTZXRNdXRhdGlvbihrZXksIHZhbHVlLCBwcmVjb25kaXRpb24pIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xyXG4gICAgICAgIF90aGlzLmtleSA9IGtleTtcclxuICAgICAgICBfdGhpcy52YWx1ZSA9IHZhbHVlO1xyXG4gICAgICAgIF90aGlzLnByZWNvbmRpdGlvbiA9IHByZWNvbmRpdGlvbjtcclxuICAgICAgICBfdGhpcy50eXBlID0gTXV0YXRpb25UeXBlLlNldDtcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICBTZXRNdXRhdGlvbi5wcm90b3R5cGUuYXBwbHlUb1JlbW90ZURvY3VtZW50ID0gZnVuY3Rpb24gKG1heWJlRG9jLCBtdXRhdGlvblJlc3VsdCkge1xyXG4gICAgICAgIHRoaXMudmVyaWZ5S2V5TWF0Y2hlcyhtYXliZURvYyk7XHJcbiAgICAgICAgYXNzZXJ0KG11dGF0aW9uUmVzdWx0LnRyYW5zZm9ybVJlc3VsdHMgPT0gbnVsbCwgJ1RyYW5zZm9ybSByZXN1bHRzIHJlY2VpdmVkIGJ5IFNldE11dGF0aW9uLicpO1xyXG4gICAgICAgIC8vIFVubGlrZSBhcHBseVRvTG9jYWxWaWV3LCBpZiB3ZSdyZSBhcHBseWluZyBhIG11dGF0aW9uIHRvIGEgcmVtb3RlXHJcbiAgICAgICAgLy8gZG9jdW1lbnQgdGhlIHNlcnZlciBoYXMgYWNjZXB0ZWQgdGhlIG11dGF0aW9uIHNvIHRoZSBwcmVjb25kaXRpb24gbXVzdFxyXG4gICAgICAgIC8vIGhhdmUgaGVsZC5cclxuICAgICAgICB2YXIgdmVyc2lvbiA9IG11dGF0aW9uUmVzdWx0LnZlcnNpb247XHJcbiAgICAgICAgcmV0dXJuIG5ldyBEb2N1bWVudCh0aGlzLmtleSwgdmVyc2lvbiwge1xyXG4gICAgICAgICAgICBoYXNDb21taXR0ZWRNdXRhdGlvbnM6IHRydWVcclxuICAgICAgICB9LCB0aGlzLnZhbHVlKTtcclxuICAgIH07XHJcbiAgICBTZXRNdXRhdGlvbi5wcm90b3R5cGUuYXBwbHlUb0xvY2FsVmlldyA9IGZ1bmN0aW9uIChtYXliZURvYywgYmFzZURvYywgbG9jYWxXcml0ZVRpbWUpIHtcclxuICAgICAgICB0aGlzLnZlcmlmeUtleU1hdGNoZXMobWF5YmVEb2MpO1xyXG4gICAgICAgIGlmICghdGhpcy5wcmVjb25kaXRpb24uaXNWYWxpZEZvcihtYXliZURvYykpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG1heWJlRG9jO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgdmVyc2lvbiA9IE11dGF0aW9uLmdldFBvc3RNdXRhdGlvblZlcnNpb24obWF5YmVEb2MpO1xyXG4gICAgICAgIHJldHVybiBuZXcgRG9jdW1lbnQodGhpcy5rZXksIHZlcnNpb24sIHtcclxuICAgICAgICAgICAgaGFzTG9jYWxNdXRhdGlvbnM6IHRydWVcclxuICAgICAgICB9LCB0aGlzLnZhbHVlKTtcclxuICAgIH07XHJcbiAgICBTZXRNdXRhdGlvbi5wcm90b3R5cGUuZXh0cmFjdEJhc2VWYWx1ZSA9IGZ1bmN0aW9uIChtYXliZURvYykge1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfTtcclxuICAgIFNldE11dGF0aW9uLnByb3RvdHlwZS5pc0VxdWFsID0gZnVuY3Rpb24gKG90aGVyKSB7XHJcbiAgICAgICAgcmV0dXJuIChvdGhlciBpbnN0YW5jZW9mIFNldE11dGF0aW9uICYmXHJcbiAgICAgICAgICAgIHRoaXMua2V5LmlzRXF1YWwob3RoZXIua2V5KSAmJlxyXG4gICAgICAgICAgICB0aGlzLnZhbHVlLmlzRXF1YWwob3RoZXIudmFsdWUpICYmXHJcbiAgICAgICAgICAgIHRoaXMucHJlY29uZGl0aW9uLmlzRXF1YWwob3RoZXIucHJlY29uZGl0aW9uKSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFNldE11dGF0aW9uO1xyXG59KE11dGF0aW9uKSk7XHJcbi8qKlxyXG4gKiBBIG11dGF0aW9uIHRoYXQgbW9kaWZpZXMgZmllbGRzIG9mIHRoZSBkb2N1bWVudCBhdCB0aGUgZ2l2ZW4ga2V5IHdpdGggdGhlXHJcbiAqIGdpdmVuIHZhbHVlcy4gVGhlIHZhbHVlcyBhcmUgYXBwbGllZCB0aHJvdWdoIGEgZmllbGQgbWFzazpcclxuICpcclxuICogICogV2hlbiBhIGZpZWxkIGlzIGluIGJvdGggdGhlIG1hc2sgYW5kIHRoZSB2YWx1ZXMsIHRoZSBjb3JyZXNwb25kaW5nIGZpZWxkXHJcbiAqICAgIGlzIHVwZGF0ZWQuXHJcbiAqICAqIFdoZW4gYSBmaWVsZCBpcyBpbiBuZWl0aGVyIHRoZSBtYXNrIG5vciB0aGUgdmFsdWVzLCB0aGUgY29ycmVzcG9uZGluZ1xyXG4gKiAgICBmaWVsZCBpcyB1bm1vZGlmaWVkLlxyXG4gKiAgKiBXaGVuIGEgZmllbGQgaXMgaW4gdGhlIG1hc2sgYnV0IG5vdCBpbiB0aGUgdmFsdWVzLCB0aGUgY29ycmVzcG9uZGluZyBmaWVsZFxyXG4gKiAgICBpcyBkZWxldGVkLlxyXG4gKiAgKiBXaGVuIGEgZmllbGQgaXMgbm90IGluIHRoZSBtYXNrIGJ1dCBpcyBpbiB0aGUgdmFsdWVzLCB0aGUgdmFsdWVzIG1hcCBpc1xyXG4gKiAgICBpZ25vcmVkLlxyXG4gKi9cclxudmFyIFBhdGNoTXV0YXRpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICB0c2xpYi5fX2V4dGVuZHMoUGF0Y2hNdXRhdGlvbiwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIFBhdGNoTXV0YXRpb24oa2V5LCBkYXRhLCBmaWVsZE1hc2ssIHByZWNvbmRpdGlvbikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMua2V5ID0ga2V5O1xyXG4gICAgICAgIF90aGlzLmRhdGEgPSBkYXRhO1xyXG4gICAgICAgIF90aGlzLmZpZWxkTWFzayA9IGZpZWxkTWFzaztcclxuICAgICAgICBfdGhpcy5wcmVjb25kaXRpb24gPSBwcmVjb25kaXRpb247XHJcbiAgICAgICAgX3RoaXMudHlwZSA9IE11dGF0aW9uVHlwZS5QYXRjaDtcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICBQYXRjaE11dGF0aW9uLnByb3RvdHlwZS5hcHBseVRvUmVtb3RlRG9jdW1lbnQgPSBmdW5jdGlvbiAobWF5YmVEb2MsIG11dGF0aW9uUmVzdWx0KSB7XHJcbiAgICAgICAgdGhpcy52ZXJpZnlLZXlNYXRjaGVzKG1heWJlRG9jKTtcclxuICAgICAgICBhc3NlcnQobXV0YXRpb25SZXN1bHQudHJhbnNmb3JtUmVzdWx0cyA9PSBudWxsLCAnVHJhbnNmb3JtIHJlc3VsdHMgcmVjZWl2ZWQgYnkgUGF0Y2hNdXRhdGlvbi4nKTtcclxuICAgICAgICBpZiAoIXRoaXMucHJlY29uZGl0aW9uLmlzVmFsaWRGb3IobWF5YmVEb2MpKSB7XHJcbiAgICAgICAgICAgIC8vIFNpbmNlIHRoZSBtdXRhdGlvbiB3YXMgbm90IHJlamVjdGVkLCB3ZSBrbm93IHRoYXQgdGhlICBwcmVjb25kaXRpb25cclxuICAgICAgICAgICAgLy8gbWF0Y2hlZCBvbiB0aGUgYmFja2VuZC4gV2UgdGhlcmVmb3JlIG11c3Qgbm90IGhhdmUgdGhlIGV4cGVjdGVkIHZlcnNpb25cclxuICAgICAgICAgICAgLy8gb2YgdGhlIGRvY3VtZW50IGluIG91ciBjYWNoZSBhbmQgcmV0dXJuIGFuIFVua25vd25Eb2N1bWVudCB3aXRoIHRoZVxyXG4gICAgICAgICAgICAvLyBrbm93biB1cGRhdGVUaW1lLlxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFVua25vd25Eb2N1bWVudCh0aGlzLmtleSwgbXV0YXRpb25SZXN1bHQudmVyc2lvbik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBuZXdEYXRhID0gdGhpcy5wYXRjaERvY3VtZW50KG1heWJlRG9jKTtcclxuICAgICAgICByZXR1cm4gbmV3IERvY3VtZW50KHRoaXMua2V5LCBtdXRhdGlvblJlc3VsdC52ZXJzaW9uLCB7XHJcbiAgICAgICAgICAgIGhhc0NvbW1pdHRlZE11dGF0aW9uczogdHJ1ZVxyXG4gICAgICAgIH0sIG5ld0RhdGEpO1xyXG4gICAgfTtcclxuICAgIFBhdGNoTXV0YXRpb24ucHJvdG90eXBlLmFwcGx5VG9Mb2NhbFZpZXcgPSBmdW5jdGlvbiAobWF5YmVEb2MsIGJhc2VEb2MsIGxvY2FsV3JpdGVUaW1lKSB7XHJcbiAgICAgICAgdGhpcy52ZXJpZnlLZXlNYXRjaGVzKG1heWJlRG9jKTtcclxuICAgICAgICBpZiAoIXRoaXMucHJlY29uZGl0aW9uLmlzVmFsaWRGb3IobWF5YmVEb2MpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBtYXliZURvYztcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIHZlcnNpb24gPSBNdXRhdGlvbi5nZXRQb3N0TXV0YXRpb25WZXJzaW9uKG1heWJlRG9jKTtcclxuICAgICAgICB2YXIgbmV3RGF0YSA9IHRoaXMucGF0Y2hEb2N1bWVudChtYXliZURvYyk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBEb2N1bWVudCh0aGlzLmtleSwgdmVyc2lvbiwge1xyXG4gICAgICAgICAgICBoYXNMb2NhbE11dGF0aW9uczogdHJ1ZVxyXG4gICAgICAgIH0sIG5ld0RhdGEpO1xyXG4gICAgfTtcclxuICAgIFBhdGNoTXV0YXRpb24ucHJvdG90eXBlLmV4dHJhY3RCYXNlVmFsdWUgPSBmdW5jdGlvbiAobWF5YmVEb2MpIHtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH07XHJcbiAgICBQYXRjaE11dGF0aW9uLnByb3RvdHlwZS5pc0VxdWFsID0gZnVuY3Rpb24gKG90aGVyKSB7XHJcbiAgICAgICAgcmV0dXJuIChvdGhlciBpbnN0YW5jZW9mIFBhdGNoTXV0YXRpb24gJiZcclxuICAgICAgICAgICAgdGhpcy5rZXkuaXNFcXVhbChvdGhlci5rZXkpICYmXHJcbiAgICAgICAgICAgIHRoaXMuZmllbGRNYXNrLmlzRXF1YWwob3RoZXIuZmllbGRNYXNrKSAmJlxyXG4gICAgICAgICAgICB0aGlzLnByZWNvbmRpdGlvbi5pc0VxdWFsKG90aGVyLnByZWNvbmRpdGlvbikpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUGF0Y2hlcyB0aGUgZGF0YSBvZiBkb2N1bWVudCBpZiBhdmFpbGFibGUgb3IgY3JlYXRlcyBhIG5ldyBkb2N1bWVudC4gTm90ZVxyXG4gICAgICogdGhhdCB0aGlzIGRvZXMgbm90IGNoZWNrIHdoZXRoZXIgb3Igbm90IHRoZSBwcmVjb25kaXRpb24gb2YgdGhpcyBwYXRjaFxyXG4gICAgICogaG9sZHMuXHJcbiAgICAgKi9cclxuICAgIFBhdGNoTXV0YXRpb24ucHJvdG90eXBlLnBhdGNoRG9jdW1lbnQgPSBmdW5jdGlvbiAobWF5YmVEb2MpIHtcclxuICAgICAgICB2YXIgZGF0YTtcclxuICAgICAgICBpZiAobWF5YmVEb2MgaW5zdGFuY2VvZiBEb2N1bWVudCkge1xyXG4gICAgICAgICAgICBkYXRhID0gbWF5YmVEb2MuZGF0YSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgZGF0YSA9IE9iamVjdFZhbHVlLkVNUFRZO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5wYXRjaE9iamVjdChkYXRhKTtcclxuICAgIH07XHJcbiAgICBQYXRjaE11dGF0aW9uLnByb3RvdHlwZS5wYXRjaE9iamVjdCA9IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB0aGlzLmZpZWxkTWFzay5maWVsZHMuZm9yRWFjaChmdW5jdGlvbiAoZmllbGRQYXRoKSB7XHJcbiAgICAgICAgICAgIGlmICghZmllbGRQYXRoLmlzRW1wdHkoKSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG5ld1ZhbHVlID0gX3RoaXMuZGF0YS5maWVsZChmaWVsZFBhdGgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKG5ld1ZhbHVlICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YSA9IGRhdGEuc2V0KGZpZWxkUGF0aCwgbmV3VmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YSA9IGRhdGEuZGVsZXRlKGZpZWxkUGF0aCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gZGF0YTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gUGF0Y2hNdXRhdGlvbjtcclxufShNdXRhdGlvbikpO1xyXG4vKipcclxuICogQSBtdXRhdGlvbiB0aGF0IG1vZGlmaWVzIHNwZWNpZmljIGZpZWxkcyBvZiB0aGUgZG9jdW1lbnQgd2l0aCB0cmFuc2Zvcm1cclxuICogb3BlcmF0aW9ucy4gQ3VycmVudGx5IHRoZSBvbmx5IHN1cHBvcnRlZCB0cmFuc2Zvcm0gaXMgYSBzZXJ2ZXIgdGltZXN0YW1wLCBidXRcclxuICogSVAgQWRkcmVzcywgaW5jcmVtZW50KG4pLCBldGMuIGNvdWxkIGJlIHN1cHBvcnRlZCBpbiB0aGUgZnV0dXJlLlxyXG4gKlxyXG4gKiBJdCBpcyBzb21ld2hhdCBzaW1pbGFyIHRvIGEgUGF0Y2hNdXRhdGlvbiBpbiB0aGF0IGl0IHBhdGNoZXMgc3BlY2lmaWMgZmllbGRzXHJcbiAqIGFuZCBoYXMgbm8gZWZmZWN0IHdoZW4gYXBwbGllZCB0byBhIG51bGwgb3IgTm9Eb2N1bWVudCAoc2VlIGNvbW1lbnQgb25cclxuICogTXV0YXRpb24gZm9yIHJhdGlvbmFsZSkuXHJcbiAqL1xyXG52YXIgVHJhbnNmb3JtTXV0YXRpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICB0c2xpYi5fX2V4dGVuZHMoVHJhbnNmb3JtTXV0YXRpb24sIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBUcmFuc2Zvcm1NdXRhdGlvbihrZXksIGZpZWxkVHJhbnNmb3Jtcykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMua2V5ID0ga2V5O1xyXG4gICAgICAgIF90aGlzLmZpZWxkVHJhbnNmb3JtcyA9IGZpZWxkVHJhbnNmb3JtcztcclxuICAgICAgICBfdGhpcy50eXBlID0gTXV0YXRpb25UeXBlLlRyYW5zZm9ybTtcclxuICAgICAgICAvLyBOT1RFOiBXZSBzZXQgYSBwcmVjb25kaXRpb24gb2YgZXhpc3RzOiB0cnVlIGFzIGEgc2FmZXR5LWNoZWNrLCBzaW5jZSB3ZVxyXG4gICAgICAgIC8vIGFsd2F5cyBjb21iaW5lIFRyYW5zZm9ybU11dGF0aW9ucyB3aXRoIGEgU2V0TXV0YXRpb24gb3IgUGF0Y2hNdXRhdGlvbiB3aGljaFxyXG4gICAgICAgIC8vIChpZiBzdWNjZXNzZnVsKSBzaG91bGQgZW5kIHVwIHdpdGggYW4gZXhpc3RpbmcgZG9jdW1lbnQuXHJcbiAgICAgICAgX3RoaXMucHJlY29uZGl0aW9uID0gUHJlY29uZGl0aW9uLmV4aXN0cyh0cnVlKTtcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICBUcmFuc2Zvcm1NdXRhdGlvbi5wcm90b3R5cGUuYXBwbHlUb1JlbW90ZURvY3VtZW50ID0gZnVuY3Rpb24gKG1heWJlRG9jLCBtdXRhdGlvblJlc3VsdCkge1xyXG4gICAgICAgIHRoaXMudmVyaWZ5S2V5TWF0Y2hlcyhtYXliZURvYyk7XHJcbiAgICAgICAgYXNzZXJ0KG11dGF0aW9uUmVzdWx0LnRyYW5zZm9ybVJlc3VsdHMgIT0gbnVsbCwgJ1RyYW5zZm9ybSByZXN1bHRzIG1pc3NpbmcgZm9yIFRyYW5zZm9ybU11dGF0aW9uLicpO1xyXG4gICAgICAgIGlmICghdGhpcy5wcmVjb25kaXRpb24uaXNWYWxpZEZvcihtYXliZURvYykpIHtcclxuICAgICAgICAgICAgLy8gU2luY2UgdGhlIG11dGF0aW9uIHdhcyBub3QgcmVqZWN0ZWQsIHdlIGtub3cgdGhhdCB0aGUgIHByZWNvbmRpdGlvblxyXG4gICAgICAgICAgICAvLyBtYXRjaGVkIG9uIHRoZSBiYWNrZW5kLiBXZSB0aGVyZWZvcmUgbXVzdCBub3QgaGF2ZSB0aGUgZXhwZWN0ZWQgdmVyc2lvblxyXG4gICAgICAgICAgICAvLyBvZiB0aGUgZG9jdW1lbnQgaW4gb3VyIGNhY2hlIGFuZCByZXR1cm4gYW4gVW5rbm93bkRvY3VtZW50IHdpdGggdGhlXHJcbiAgICAgICAgICAgIC8vIGtub3duIHVwZGF0ZVRpbWUuXHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgVW5rbm93bkRvY3VtZW50KHRoaXMua2V5LCBtdXRhdGlvblJlc3VsdC52ZXJzaW9uKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGRvYyA9IHRoaXMucmVxdWlyZURvY3VtZW50KG1heWJlRG9jKTtcclxuICAgICAgICB2YXIgdHJhbnNmb3JtUmVzdWx0cyA9IHRoaXMuc2VydmVyVHJhbnNmb3JtUmVzdWx0cyhtYXliZURvYywgbXV0YXRpb25SZXN1bHQudHJhbnNmb3JtUmVzdWx0cyk7XHJcbiAgICAgICAgdmFyIHZlcnNpb24gPSBtdXRhdGlvblJlc3VsdC52ZXJzaW9uO1xyXG4gICAgICAgIHZhciBuZXdEYXRhID0gdGhpcy50cmFuc2Zvcm1PYmplY3QoZG9jLmRhdGEoKSwgdHJhbnNmb3JtUmVzdWx0cyk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBEb2N1bWVudCh0aGlzLmtleSwgdmVyc2lvbiwge1xyXG4gICAgICAgICAgICBoYXNDb21taXR0ZWRNdXRhdGlvbnM6IHRydWVcclxuICAgICAgICB9LCBuZXdEYXRhKTtcclxuICAgIH07XHJcbiAgICBUcmFuc2Zvcm1NdXRhdGlvbi5wcm90b3R5cGUuYXBwbHlUb0xvY2FsVmlldyA9IGZ1bmN0aW9uIChtYXliZURvYywgYmFzZURvYywgbG9jYWxXcml0ZVRpbWUpIHtcclxuICAgICAgICB0aGlzLnZlcmlmeUtleU1hdGNoZXMobWF5YmVEb2MpO1xyXG4gICAgICAgIGlmICghdGhpcy5wcmVjb25kaXRpb24uaXNWYWxpZEZvcihtYXliZURvYykpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG1heWJlRG9jO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgZG9jID0gdGhpcy5yZXF1aXJlRG9jdW1lbnQobWF5YmVEb2MpO1xyXG4gICAgICAgIHZhciB0cmFuc2Zvcm1SZXN1bHRzID0gdGhpcy5sb2NhbFRyYW5zZm9ybVJlc3VsdHMobG9jYWxXcml0ZVRpbWUsIG1heWJlRG9jLCBiYXNlRG9jKTtcclxuICAgICAgICB2YXIgbmV3RGF0YSA9IHRoaXMudHJhbnNmb3JtT2JqZWN0KGRvYy5kYXRhKCksIHRyYW5zZm9ybVJlc3VsdHMpO1xyXG4gICAgICAgIHJldHVybiBuZXcgRG9jdW1lbnQodGhpcy5rZXksIGRvYy52ZXJzaW9uLCB7XHJcbiAgICAgICAgICAgIGhhc0xvY2FsTXV0YXRpb25zOiB0cnVlXHJcbiAgICAgICAgfSwgbmV3RGF0YSk7XHJcbiAgICB9O1xyXG4gICAgVHJhbnNmb3JtTXV0YXRpb24ucHJvdG90eXBlLmV4dHJhY3RCYXNlVmFsdWUgPSBmdW5jdGlvbiAobWF5YmVEb2MpIHtcclxuICAgICAgICB2YXIgYmFzZU9iamVjdCA9IG51bGw7XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHRoaXMuZmllbGRUcmFuc2Zvcm1zOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICB2YXIgZmllbGRUcmFuc2Zvcm0gPSBfYVtfaV07XHJcbiAgICAgICAgICAgIHZhciBleGlzdGluZ1ZhbHVlID0gbWF5YmVEb2MgaW5zdGFuY2VvZiBEb2N1bWVudFxyXG4gICAgICAgICAgICAgICAgPyBtYXliZURvYy5maWVsZChmaWVsZFRyYW5zZm9ybS5maWVsZClcclxuICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICB2YXIgY29lcmNlZFZhbHVlID0gZmllbGRUcmFuc2Zvcm0udHJhbnNmb3JtLmNvbXB1dGVCYXNlVmFsdWUoZXhpc3RpbmdWYWx1ZSB8fCBudWxsKTtcclxuICAgICAgICAgICAgaWYgKGNvZXJjZWRWYWx1ZSAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoYmFzZU9iamVjdCA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYmFzZU9iamVjdCA9IE9iamVjdFZhbHVlLkVNUFRZLnNldChmaWVsZFRyYW5zZm9ybS5maWVsZCwgY29lcmNlZFZhbHVlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGJhc2VPYmplY3QgPSBiYXNlT2JqZWN0LnNldChmaWVsZFRyYW5zZm9ybS5maWVsZCwgY29lcmNlZFZhbHVlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gYmFzZU9iamVjdDtcclxuICAgIH07XHJcbiAgICBUcmFuc2Zvcm1NdXRhdGlvbi5wcm90b3R5cGUuaXNFcXVhbCA9IGZ1bmN0aW9uIChvdGhlcikge1xyXG4gICAgICAgIHJldHVybiAob3RoZXIgaW5zdGFuY2VvZiBUcmFuc2Zvcm1NdXRhdGlvbiAmJlxyXG4gICAgICAgICAgICB0aGlzLmtleS5pc0VxdWFsKG90aGVyLmtleSkgJiZcclxuICAgICAgICAgICAgYXJyYXlFcXVhbHModGhpcy5maWVsZFRyYW5zZm9ybXMsIG90aGVyLmZpZWxkVHJhbnNmb3JtcykgJiZcclxuICAgICAgICAgICAgdGhpcy5wcmVjb25kaXRpb24uaXNFcXVhbChvdGhlci5wcmVjb25kaXRpb24pKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEFzc2VydHMgdGhhdCB0aGUgZ2l2ZW4gTWF5YmVEb2N1bWVudCBpcyBhY3R1YWxseSBhIERvY3VtZW50IGFuZCB2ZXJpZmllc1xyXG4gICAgICogdGhhdCBpdCBtYXRjaGVzIHRoZSBrZXkgZm9yIHRoaXMgbXV0YXRpb24uIFNpbmNlIHdlIG9ubHkgc3VwcG9ydFxyXG4gICAgICogdHJhbnNmb3JtYXRpb25zIHdpdGggcHJlY29uZGl0aW9uIGV4aXN0cyB0aGlzIG1ldGhvZCBpcyBndWFyYW50ZWVkIHRvIGJlXHJcbiAgICAgKiBzYWZlLlxyXG4gICAgICovXHJcbiAgICBUcmFuc2Zvcm1NdXRhdGlvbi5wcm90b3R5cGUucmVxdWlyZURvY3VtZW50ID0gZnVuY3Rpb24gKG1heWJlRG9jKSB7XHJcbiAgICAgICAgYXNzZXJ0KG1heWJlRG9jIGluc3RhbmNlb2YgRG9jdW1lbnQsICdVbmtub3duIE1heWJlRG9jdW1lbnQgdHlwZSAnICsgbWF5YmVEb2MpO1xyXG4gICAgICAgIGFzc2VydChtYXliZURvYy5rZXkuaXNFcXVhbCh0aGlzLmtleSksICdDYW4gb25seSB0cmFuc2Zvcm0gYSBkb2N1bWVudCB3aXRoIHRoZSBzYW1lIGtleScpO1xyXG4gICAgICAgIHJldHVybiBtYXliZURvYztcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYSBsaXN0IG9mIFwidHJhbnNmb3JtIHJlc3VsdHNcIiAoYSB0cmFuc2Zvcm0gcmVzdWx0IGlzIGEgZmllbGQgdmFsdWVcclxuICAgICAqIHJlcHJlc2VudGluZyB0aGUgcmVzdWx0IG9mIGFwcGx5aW5nIGEgdHJhbnNmb3JtKSBmb3IgdXNlIGFmdGVyIGFcclxuICAgICAqIFRyYW5zZm9ybU11dGF0aW9uIGhhcyBiZWVuIGFja25vd2xlZGdlZCBieSB0aGUgc2VydmVyLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBiYXNlRG9jIFRoZSBkb2N1bWVudCBwcmlvciB0byBhcHBseWluZyB0aGlzIG11dGF0aW9uIGJhdGNoLlxyXG4gICAgICogQHBhcmFtIHNlcnZlclRyYW5zZm9ybVJlc3VsdHMgVGhlIHRyYW5zZm9ybSByZXN1bHRzIHJlY2VpdmVkIGJ5IHRoZSBzZXJ2ZXIuXHJcbiAgICAgKiBAcmV0dXJuIFRoZSB0cmFuc2Zvcm0gcmVzdWx0cyBsaXN0LlxyXG4gICAgICovXHJcbiAgICBUcmFuc2Zvcm1NdXRhdGlvbi5wcm90b3R5cGUuc2VydmVyVHJhbnNmb3JtUmVzdWx0cyA9IGZ1bmN0aW9uIChiYXNlRG9jLCBzZXJ2ZXJUcmFuc2Zvcm1SZXN1bHRzKSB7XHJcbiAgICAgICAgdmFyIHRyYW5zZm9ybVJlc3VsdHMgPSBbXTtcclxuICAgICAgICBhc3NlcnQodGhpcy5maWVsZFRyYW5zZm9ybXMubGVuZ3RoID09PSBzZXJ2ZXJUcmFuc2Zvcm1SZXN1bHRzLmxlbmd0aCwgXCJzZXJ2ZXIgdHJhbnNmb3JtIHJlc3VsdCBjb3VudCAoXCIgKyBzZXJ2ZXJUcmFuc2Zvcm1SZXN1bHRzLmxlbmd0aCArIFwiKSBcIiArXHJcbiAgICAgICAgICAgIChcInNob3VsZCBtYXRjaCBmaWVsZCB0cmFuc2Zvcm0gY291bnQgKFwiICsgdGhpcy5maWVsZFRyYW5zZm9ybXMubGVuZ3RoICsgXCIpXCIpKTtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNlcnZlclRyYW5zZm9ybVJlc3VsdHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdmFyIGZpZWxkVHJhbnNmb3JtID0gdGhpcy5maWVsZFRyYW5zZm9ybXNbaV07XHJcbiAgICAgICAgICAgIHZhciB0cmFuc2Zvcm0gPSBmaWVsZFRyYW5zZm9ybS50cmFuc2Zvcm07XHJcbiAgICAgICAgICAgIHZhciBwcmV2aW91c1ZhbHVlID0gbnVsbDtcclxuICAgICAgICAgICAgaWYgKGJhc2VEb2MgaW5zdGFuY2VvZiBEb2N1bWVudCkge1xyXG4gICAgICAgICAgICAgICAgcHJldmlvdXNWYWx1ZSA9IGJhc2VEb2MuZmllbGQoZmllbGRUcmFuc2Zvcm0uZmllbGQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRyYW5zZm9ybVJlc3VsdHMucHVzaCh0cmFuc2Zvcm0uYXBwbHlUb1JlbW90ZURvY3VtZW50KHByZXZpb3VzVmFsdWUsIHNlcnZlclRyYW5zZm9ybVJlc3VsdHNbaV0pKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRyYW5zZm9ybVJlc3VsdHM7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGVzIGEgbGlzdCBvZiBcInRyYW5zZm9ybSByZXN1bHRzXCIgKGEgdHJhbnNmb3JtIHJlc3VsdCBpcyBhIGZpZWxkIHZhbHVlXHJcbiAgICAgKiByZXByZXNlbnRpbmcgdGhlIHJlc3VsdCBvZiBhcHBseWluZyBhIHRyYW5zZm9ybSkgZm9yIHVzZSB3aGVuIGFwcGx5aW5nIGFcclxuICAgICAqIFRyYW5zZm9ybU11dGF0aW9uIGxvY2FsbHkuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGxvY2FsV3JpdGVUaW1lIFRoZSBsb2NhbCB0aW1lIG9mIHRoZSB0cmFuc2Zvcm0gbXV0YXRpb24gKHVzZWQgdG9cclxuICAgICAqICAgICBnZW5lcmF0ZSBTZXJ2ZXJUaW1lc3RhbXBWYWx1ZXMpLlxyXG4gICAgICogQHBhcmFtIG1heWJlRG9jIFRoZSBjdXJyZW50IHN0YXRlIG9mIHRoZSBkb2N1bWVudCBhZnRlciBhcHBseWluZyBhbGxcclxuICAgICAqICAgICBwcmV2aW91cyBtdXRhdGlvbnMuXHJcbiAgICAgKiBAcGFyYW0gYmFzZURvYyBUaGUgZG9jdW1lbnQgcHJpb3IgdG8gYXBwbHlpbmcgdGhpcyBtdXRhdGlvbiBiYXRjaC5cclxuICAgICAqIEByZXR1cm4gVGhlIHRyYW5zZm9ybSByZXN1bHRzIGxpc3QuXHJcbiAgICAgKi9cclxuICAgIFRyYW5zZm9ybU11dGF0aW9uLnByb3RvdHlwZS5sb2NhbFRyYW5zZm9ybVJlc3VsdHMgPSBmdW5jdGlvbiAobG9jYWxXcml0ZVRpbWUsIG1heWJlRG9jLCBiYXNlRG9jKSB7XHJcbiAgICAgICAgdmFyIHRyYW5zZm9ybVJlc3VsdHMgPSBbXTtcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gdGhpcy5maWVsZFRyYW5zZm9ybXM7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBmaWVsZFRyYW5zZm9ybSA9IF9hW19pXTtcclxuICAgICAgICAgICAgdmFyIHRyYW5zZm9ybSA9IGZpZWxkVHJhbnNmb3JtLnRyYW5zZm9ybTtcclxuICAgICAgICAgICAgdmFyIHByZXZpb3VzVmFsdWUgPSBudWxsO1xyXG4gICAgICAgICAgICBpZiAobWF5YmVEb2MgaW5zdGFuY2VvZiBEb2N1bWVudCkge1xyXG4gICAgICAgICAgICAgICAgcHJldmlvdXNWYWx1ZSA9IG1heWJlRG9jLmZpZWxkKGZpZWxkVHJhbnNmb3JtLmZpZWxkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAocHJldmlvdXNWYWx1ZSA9PT0gbnVsbCAmJiBiYXNlRG9jIGluc3RhbmNlb2YgRG9jdW1lbnQpIHtcclxuICAgICAgICAgICAgICAgIC8vIElmIHRoZSBjdXJyZW50IGRvY3VtZW50IGRvZXMgbm90IGNvbnRhaW4gYSB2YWx1ZSBmb3IgdGhlIG11dGF0ZWRcclxuICAgICAgICAgICAgICAgIC8vIGZpZWxkLCB1c2UgdGhlIHZhbHVlIHRoYXQgZXhpc3RlZCBiZWZvcmUgYXBwbHlpbmcgdGhpcyBtdXRhdGlvblxyXG4gICAgICAgICAgICAgICAgLy8gYmF0Y2guIFRoaXMgc29sdmVzIGFuIGVkZ2UgY2FzZSB3aGVyZSBhIFBhdGNoTXV0YXRpb24gY2xlYXJzIHRoZVxyXG4gICAgICAgICAgICAgICAgLy8gdmFsdWVzIGluIGEgbmVzdGVkIG1hcCBiZWZvcmUgdGhlIFRyYW5zZm9ybU11dGF0aW9uIGlzIGFwcGxpZWQuXHJcbiAgICAgICAgICAgICAgICBwcmV2aW91c1ZhbHVlID0gYmFzZURvYy5maWVsZChmaWVsZFRyYW5zZm9ybS5maWVsZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdHJhbnNmb3JtUmVzdWx0cy5wdXNoKHRyYW5zZm9ybS5hcHBseVRvTG9jYWxWaWV3KHByZXZpb3VzVmFsdWUsIGxvY2FsV3JpdGVUaW1lKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0cmFuc2Zvcm1SZXN1bHRzO1xyXG4gICAgfTtcclxuICAgIFRyYW5zZm9ybU11dGF0aW9uLnByb3RvdHlwZS50cmFuc2Zvcm1PYmplY3QgPSBmdW5jdGlvbiAoZGF0YSwgdHJhbnNmb3JtUmVzdWx0cykge1xyXG4gICAgICAgIGFzc2VydCh0cmFuc2Zvcm1SZXN1bHRzLmxlbmd0aCA9PT0gdGhpcy5maWVsZFRyYW5zZm9ybXMubGVuZ3RoLCAnVHJhbnNmb3JtUmVzdWx0cyBsZW5ndGggbWlzbWF0Y2guJyk7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmZpZWxkVHJhbnNmb3Jtcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB2YXIgZmllbGRUcmFuc2Zvcm0gPSB0aGlzLmZpZWxkVHJhbnNmb3Jtc1tpXTtcclxuICAgICAgICAgICAgdmFyIGZpZWxkUGF0aCA9IGZpZWxkVHJhbnNmb3JtLmZpZWxkO1xyXG4gICAgICAgICAgICBkYXRhID0gZGF0YS5zZXQoZmllbGRQYXRoLCB0cmFuc2Zvcm1SZXN1bHRzW2ldKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGRhdGE7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFRyYW5zZm9ybU11dGF0aW9uO1xyXG59KE11dGF0aW9uKSk7XHJcbi8qKiBBIG11dGF0aW9uIHRoYXQgZGVsZXRlcyB0aGUgZG9jdW1lbnQgYXQgdGhlIGdpdmVuIGtleS4gKi9cclxudmFyIERlbGV0ZU11dGF0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgdHNsaWIuX19leHRlbmRzKERlbGV0ZU11dGF0aW9uLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gRGVsZXRlTXV0YXRpb24oa2V5LCBwcmVjb25kaXRpb24pIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xyXG4gICAgICAgIF90aGlzLmtleSA9IGtleTtcclxuICAgICAgICBfdGhpcy5wcmVjb25kaXRpb24gPSBwcmVjb25kaXRpb247XHJcbiAgICAgICAgX3RoaXMudHlwZSA9IE11dGF0aW9uVHlwZS5EZWxldGU7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgRGVsZXRlTXV0YXRpb24ucHJvdG90eXBlLmFwcGx5VG9SZW1vdGVEb2N1bWVudCA9IGZ1bmN0aW9uIChtYXliZURvYywgbXV0YXRpb25SZXN1bHQpIHtcclxuICAgICAgICB0aGlzLnZlcmlmeUtleU1hdGNoZXMobWF5YmVEb2MpO1xyXG4gICAgICAgIGFzc2VydChtdXRhdGlvblJlc3VsdC50cmFuc2Zvcm1SZXN1bHRzID09IG51bGwsICdUcmFuc2Zvcm0gcmVzdWx0cyByZWNlaXZlZCBieSBEZWxldGVNdXRhdGlvbi4nKTtcclxuICAgICAgICAvLyBVbmxpa2UgYXBwbHlUb0xvY2FsVmlldywgaWYgd2UncmUgYXBwbHlpbmcgYSBtdXRhdGlvbiB0byBhIHJlbW90ZVxyXG4gICAgICAgIC8vIGRvY3VtZW50IHRoZSBzZXJ2ZXIgaGFzIGFjY2VwdGVkIHRoZSBtdXRhdGlvbiBzbyB0aGUgcHJlY29uZGl0aW9uIG11c3RcclxuICAgICAgICAvLyBoYXZlIGhlbGQuXHJcbiAgICAgICAgcmV0dXJuIG5ldyBOb0RvY3VtZW50KHRoaXMua2V5LCBtdXRhdGlvblJlc3VsdC52ZXJzaW9uLCB7XHJcbiAgICAgICAgICAgIGhhc0NvbW1pdHRlZE11dGF0aW9uczogdHJ1ZVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIERlbGV0ZU11dGF0aW9uLnByb3RvdHlwZS5hcHBseVRvTG9jYWxWaWV3ID0gZnVuY3Rpb24gKG1heWJlRG9jLCBiYXNlRG9jLCBsb2NhbFdyaXRlVGltZSkge1xyXG4gICAgICAgIHRoaXMudmVyaWZ5S2V5TWF0Y2hlcyhtYXliZURvYyk7XHJcbiAgICAgICAgaWYgKCF0aGlzLnByZWNvbmRpdGlvbi5pc1ZhbGlkRm9yKG1heWJlRG9jKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbWF5YmVEb2M7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChtYXliZURvYykge1xyXG4gICAgICAgICAgICBhc3NlcnQobWF5YmVEb2Mua2V5LmlzRXF1YWwodGhpcy5rZXkpLCAnQ2FuIG9ubHkgYXBwbHkgbXV0YXRpb24gdG8gZG9jdW1lbnQgd2l0aCBzYW1lIGtleScpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbmV3IE5vRG9jdW1lbnQodGhpcy5rZXksIFNuYXBzaG90VmVyc2lvbi5mb3JEZWxldGVkRG9jKCkpO1xyXG4gICAgfTtcclxuICAgIERlbGV0ZU11dGF0aW9uLnByb3RvdHlwZS5leHRyYWN0QmFzZVZhbHVlID0gZnVuY3Rpb24gKG1heWJlRG9jKSB7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9O1xyXG4gICAgRGVsZXRlTXV0YXRpb24ucHJvdG90eXBlLmlzRXF1YWwgPSBmdW5jdGlvbiAob3RoZXIpIHtcclxuICAgICAgICByZXR1cm4gKG90aGVyIGluc3RhbmNlb2YgRGVsZXRlTXV0YXRpb24gJiZcclxuICAgICAgICAgICAgdGhpcy5rZXkuaXNFcXVhbChvdGhlci5rZXkpICYmXHJcbiAgICAgICAgICAgIHRoaXMucHJlY29uZGl0aW9uLmlzRXF1YWwob3RoZXIucHJlY29uZGl0aW9uKSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIERlbGV0ZU11dGF0aW9uO1xyXG59KE11dGF0aW9uKSk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG52YXIgVHlwZU9yZGVyO1xyXG4oZnVuY3Rpb24gKFR5cGVPcmRlcikge1xyXG4gICAgLy8gVGhpcyBvcmRlciBpcyBkZWZpbmVkIGJ5IHRoZSBiYWNrZW5kLlxyXG4gICAgVHlwZU9yZGVyW1R5cGVPcmRlcltcIk51bGxWYWx1ZVwiXSA9IDBdID0gXCJOdWxsVmFsdWVcIjtcclxuICAgIFR5cGVPcmRlcltUeXBlT3JkZXJbXCJCb29sZWFuVmFsdWVcIl0gPSAxXSA9IFwiQm9vbGVhblZhbHVlXCI7XHJcbiAgICBUeXBlT3JkZXJbVHlwZU9yZGVyW1wiTnVtYmVyVmFsdWVcIl0gPSAyXSA9IFwiTnVtYmVyVmFsdWVcIjtcclxuICAgIFR5cGVPcmRlcltUeXBlT3JkZXJbXCJUaW1lc3RhbXBWYWx1ZVwiXSA9IDNdID0gXCJUaW1lc3RhbXBWYWx1ZVwiO1xyXG4gICAgVHlwZU9yZGVyW1R5cGVPcmRlcltcIlN0cmluZ1ZhbHVlXCJdID0gNF0gPSBcIlN0cmluZ1ZhbHVlXCI7XHJcbiAgICBUeXBlT3JkZXJbVHlwZU9yZGVyW1wiQmxvYlZhbHVlXCJdID0gNV0gPSBcIkJsb2JWYWx1ZVwiO1xyXG4gICAgVHlwZU9yZGVyW1R5cGVPcmRlcltcIlJlZlZhbHVlXCJdID0gNl0gPSBcIlJlZlZhbHVlXCI7XHJcbiAgICBUeXBlT3JkZXJbVHlwZU9yZGVyW1wiR2VvUG9pbnRWYWx1ZVwiXSA9IDddID0gXCJHZW9Qb2ludFZhbHVlXCI7XHJcbiAgICBUeXBlT3JkZXJbVHlwZU9yZGVyW1wiQXJyYXlWYWx1ZVwiXSA9IDhdID0gXCJBcnJheVZhbHVlXCI7XHJcbiAgICBUeXBlT3JkZXJbVHlwZU9yZGVyW1wiT2JqZWN0VmFsdWVcIl0gPSA5XSA9IFwiT2JqZWN0VmFsdWVcIjtcclxufSkoVHlwZU9yZGVyIHx8IChUeXBlT3JkZXIgPSB7fSkpO1xyXG4vKiogRGVmaW5lcyB0aGUgcmV0dXJuIHZhbHVlIGZvciBwZW5kaW5nIHNlcnZlciB0aW1lc3RhbXBzLiAqL1xyXG52YXIgU2VydmVyVGltZXN0YW1wQmVoYXZpb3I7XHJcbihmdW5jdGlvbiAoU2VydmVyVGltZXN0YW1wQmVoYXZpb3IpIHtcclxuICAgIFNlcnZlclRpbWVzdGFtcEJlaGF2aW9yW1NlcnZlclRpbWVzdGFtcEJlaGF2aW9yW1wiRGVmYXVsdFwiXSA9IDBdID0gXCJEZWZhdWx0XCI7XHJcbiAgICBTZXJ2ZXJUaW1lc3RhbXBCZWhhdmlvcltTZXJ2ZXJUaW1lc3RhbXBCZWhhdmlvcltcIkVzdGltYXRlXCJdID0gMV0gPSBcIkVzdGltYXRlXCI7XHJcbiAgICBTZXJ2ZXJUaW1lc3RhbXBCZWhhdmlvcltTZXJ2ZXJUaW1lc3RhbXBCZWhhdmlvcltcIlByZXZpb3VzXCJdID0gMl0gPSBcIlByZXZpb3VzXCI7XHJcbn0pKFNlcnZlclRpbWVzdGFtcEJlaGF2aW9yIHx8IChTZXJ2ZXJUaW1lc3RhbXBCZWhhdmlvciA9IHt9KSk7XHJcbi8qKiBIb2xkcyBwcm9wZXJ0aWVzIHRoYXQgZGVmaW5lIGZpZWxkIHZhbHVlIGRlc2VyaWFsaXphdGlvbiBvcHRpb25zLiAqL1xyXG52YXIgRmllbGRWYWx1ZU9wdGlvbnMgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBGaWVsZFZhbHVlT3B0aW9ucyhzZXJ2ZXJUaW1lc3RhbXBCZWhhdmlvciwgdGltZXN0YW1wc0luU25hcHNob3RzKSB7XHJcbiAgICAgICAgdGhpcy5zZXJ2ZXJUaW1lc3RhbXBCZWhhdmlvciA9IHNlcnZlclRpbWVzdGFtcEJlaGF2aW9yO1xyXG4gICAgICAgIHRoaXMudGltZXN0YW1wc0luU25hcHNob3RzID0gdGltZXN0YW1wc0luU25hcHNob3RzO1xyXG4gICAgfVxyXG4gICAgRmllbGRWYWx1ZU9wdGlvbnMuZnJvbVNuYXBzaG90T3B0aW9ucyA9IGZ1bmN0aW9uIChvcHRpb25zLCB0aW1lc3RhbXBzSW5TbmFwc2hvdHMpIHtcclxuICAgICAgICBzd2l0Y2ggKG9wdGlvbnMuc2VydmVyVGltZXN0YW1wcykge1xyXG4gICAgICAgICAgICBjYXNlICdlc3RpbWF0ZSc6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEZpZWxkVmFsdWVPcHRpb25zKFNlcnZlclRpbWVzdGFtcEJlaGF2aW9yLkVzdGltYXRlLCB0aW1lc3RhbXBzSW5TbmFwc2hvdHMpO1xyXG4gICAgICAgICAgICBjYXNlICdwcmV2aW91cyc6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEZpZWxkVmFsdWVPcHRpb25zKFNlcnZlclRpbWVzdGFtcEJlaGF2aW9yLlByZXZpb3VzLCB0aW1lc3RhbXBzSW5TbmFwc2hvdHMpO1xyXG4gICAgICAgICAgICBjYXNlICdub25lJzogLy8gRmFsbC10aHJvdWdoIGludGVuZGVkLlxyXG4gICAgICAgICAgICBjYXNlIHVuZGVmaW5lZDpcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRmllbGRWYWx1ZU9wdGlvbnMoU2VydmVyVGltZXN0YW1wQmVoYXZpb3IuRGVmYXVsdCwgdGltZXN0YW1wc0luU25hcHNob3RzKTtcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWlsKCdmcm9tU25hcHNob3RPcHRpb25zKCkgY2FsbGVkIHdpdGggaW52YWxpZCBvcHRpb25zLicpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICByZXR1cm4gRmllbGRWYWx1ZU9wdGlvbnM7XHJcbn0oKSk7XHJcbi8qKlxyXG4gKiBBIGZpZWxkIHZhbHVlIHJlcHJlc2VudHMgYSBkYXRhdHlwZSBhcyBzdG9yZWQgYnkgRmlyZXN0b3JlLlxyXG4gKi9cclxudmFyIEZpZWxkVmFsdWUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBGaWVsZFZhbHVlKCkge1xyXG4gICAgfVxyXG4gICAgRmllbGRWYWx1ZS5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHZhbCA9IHRoaXMudmFsdWUoKTtcclxuICAgICAgICByZXR1cm4gdmFsID09PSBudWxsID8gJ251bGwnIDogdmFsLnRvU3RyaW5nKCk7XHJcbiAgICB9O1xyXG4gICAgRmllbGRWYWx1ZS5wcm90b3R5cGUuZGVmYXVsdENvbXBhcmVUbyA9IGZ1bmN0aW9uIChvdGhlcikge1xyXG4gICAgICAgIGFzc2VydCh0aGlzLnR5cGVPcmRlciAhPT0gb3RoZXIudHlwZU9yZGVyLCAnRGVmYXVsdCBjb21wYXJlVG8gc2hvdWxkIG5vdCBiZSB1c2VkIGZvciB2YWx1ZXMgb2Ygc2FtZSB0eXBlLicpO1xyXG4gICAgICAgIHZhciBjbXAgPSBwcmltaXRpdmVDb21wYXJhdG9yKHRoaXMudHlwZU9yZGVyLCBvdGhlci50eXBlT3JkZXIpO1xyXG4gICAgICAgIHJldHVybiBjbXA7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEZpZWxkVmFsdWU7XHJcbn0oKSk7XHJcbnZhciBOdWxsVmFsdWUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICB0c2xpYi5fX2V4dGVuZHMoTnVsbFZhbHVlLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gTnVsbFZhbHVlKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMudHlwZU9yZGVyID0gVHlwZU9yZGVyLk51bGxWYWx1ZTtcclxuICAgICAgICAvLyBpbnRlcm5hbFZhbHVlIGlzIHVudXNlZCBidXQgd2UgYWRkIGl0IHRvIHdvcmsgYXJvdW5kXHJcbiAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL01pY3Jvc29mdC9UeXBlU2NyaXB0L2lzc3Vlcy8xNTU4NVxyXG4gICAgICAgIF90aGlzLmludGVybmFsVmFsdWUgPSBudWxsO1xyXG4gICAgICAgIHJldHVybiBfdGhpcztcclxuICAgIH1cclxuICAgIE51bGxWYWx1ZS5wcm90b3R5cGUudmFsdWUgPSBmdW5jdGlvbiAob3B0aW9ucykge1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfTtcclxuICAgIE51bGxWYWx1ZS5wcm90b3R5cGUuaXNFcXVhbCA9IGZ1bmN0aW9uIChvdGhlcikge1xyXG4gICAgICAgIHJldHVybiBvdGhlciBpbnN0YW5jZW9mIE51bGxWYWx1ZTtcclxuICAgIH07XHJcbiAgICBOdWxsVmFsdWUucHJvdG90eXBlLmNvbXBhcmVUbyA9IGZ1bmN0aW9uIChvdGhlcikge1xyXG4gICAgICAgIGlmIChvdGhlciBpbnN0YW5jZW9mIE51bGxWYWx1ZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGVmYXVsdENvbXBhcmVUbyhvdGhlcik7XHJcbiAgICB9O1xyXG4gICAgTnVsbFZhbHVlLklOU1RBTkNFID0gbmV3IE51bGxWYWx1ZSgpO1xyXG4gICAgcmV0dXJuIE51bGxWYWx1ZTtcclxufShGaWVsZFZhbHVlKSk7XHJcbnZhciBCb29sZWFuVmFsdWUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICB0c2xpYi5fX2V4dGVuZHMoQm9vbGVhblZhbHVlLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gQm9vbGVhblZhbHVlKGludGVybmFsVmFsdWUpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xyXG4gICAgICAgIF90aGlzLmludGVybmFsVmFsdWUgPSBpbnRlcm5hbFZhbHVlO1xyXG4gICAgICAgIF90aGlzLnR5cGVPcmRlciA9IFR5cGVPcmRlci5Cb29sZWFuVmFsdWU7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgQm9vbGVhblZhbHVlLnByb3RvdHlwZS52YWx1ZSA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaW50ZXJuYWxWYWx1ZTtcclxuICAgIH07XHJcbiAgICBCb29sZWFuVmFsdWUucHJvdG90eXBlLmlzRXF1YWwgPSBmdW5jdGlvbiAob3RoZXIpIHtcclxuICAgICAgICByZXR1cm4gKG90aGVyIGluc3RhbmNlb2YgQm9vbGVhblZhbHVlICYmXHJcbiAgICAgICAgICAgIHRoaXMuaW50ZXJuYWxWYWx1ZSA9PT0gb3RoZXIuaW50ZXJuYWxWYWx1ZSk7XHJcbiAgICB9O1xyXG4gICAgQm9vbGVhblZhbHVlLnByb3RvdHlwZS5jb21wYXJlVG8gPSBmdW5jdGlvbiAob3RoZXIpIHtcclxuICAgICAgICBpZiAob3RoZXIgaW5zdGFuY2VvZiBCb29sZWFuVmFsdWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHByaW1pdGl2ZUNvbXBhcmF0b3IodGhpcywgb3RoZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5kZWZhdWx0Q29tcGFyZVRvKG90aGVyKTtcclxuICAgIH07XHJcbiAgICBCb29sZWFuVmFsdWUub2YgPSBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICByZXR1cm4gdmFsdWUgPyBCb29sZWFuVmFsdWUuVFJVRSA6IEJvb2xlYW5WYWx1ZS5GQUxTRTtcclxuICAgIH07XHJcbiAgICBCb29sZWFuVmFsdWUuVFJVRSA9IG5ldyBCb29sZWFuVmFsdWUodHJ1ZSk7XHJcbiAgICBCb29sZWFuVmFsdWUuRkFMU0UgPSBuZXcgQm9vbGVhblZhbHVlKGZhbHNlKTtcclxuICAgIHJldHVybiBCb29sZWFuVmFsdWU7XHJcbn0oRmllbGRWYWx1ZSkpO1xyXG4vKiogQmFzZSBjbGFzcyBmb3IgSW50ZWdlclZhbHVlIGFuZCBEb3VibGVWYWx1ZS4gKi9cclxudmFyIE51bWJlclZhbHVlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgdHNsaWIuX19leHRlbmRzKE51bWJlclZhbHVlLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gTnVtYmVyVmFsdWUoaW50ZXJuYWxWYWx1ZSkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMuaW50ZXJuYWxWYWx1ZSA9IGludGVybmFsVmFsdWU7XHJcbiAgICAgICAgX3RoaXMudHlwZU9yZGVyID0gVHlwZU9yZGVyLk51bWJlclZhbHVlO1xyXG4gICAgICAgIHJldHVybiBfdGhpcztcclxuICAgIH1cclxuICAgIE51bWJlclZhbHVlLnByb3RvdHlwZS52YWx1ZSA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaW50ZXJuYWxWYWx1ZTtcclxuICAgIH07XHJcbiAgICBOdW1iZXJWYWx1ZS5wcm90b3R5cGUuY29tcGFyZVRvID0gZnVuY3Rpb24gKG90aGVyKSB7XHJcbiAgICAgICAgaWYgKG90aGVyIGluc3RhbmNlb2YgTnVtYmVyVmFsdWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bWVyaWNDb21wYXJhdG9yKHRoaXMuaW50ZXJuYWxWYWx1ZSwgb3RoZXIuaW50ZXJuYWxWYWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLmRlZmF1bHRDb21wYXJlVG8ob3RoZXIpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBOdW1iZXJWYWx1ZTtcclxufShGaWVsZFZhbHVlKSk7XHJcbi8qKiBVdGlsaXR5IGZ1bmN0aW9uIHRvIGNvbXBhcmUgZG91YmxlcyAodXNpbmcgRmlyZXN0b3JlIHNlbWFudGljcyBmb3IgTmFOKS4gKi9cclxuZnVuY3Rpb24gbnVtZXJpY0NvbXBhcmF0b3IobGVmdCwgcmlnaHQpIHtcclxuICAgIGlmIChsZWZ0IDwgcmlnaHQpIHtcclxuICAgICAgICByZXR1cm4gLTE7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChsZWZ0ID4gcmlnaHQpIHtcclxuICAgICAgICByZXR1cm4gMTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGxlZnQgPT09IHJpZ2h0KSB7XHJcbiAgICAgICAgcmV0dXJuIDA7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICAvLyBvbmUgb3IgYm90aCBhcmUgTmFOLlxyXG4gICAgICAgIGlmIChpc05hTihsZWZ0KSkge1xyXG4gICAgICAgICAgICByZXR1cm4gaXNOYU4ocmlnaHQpID8gMCA6IC0xO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIDE7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBVdGlsaXR5IGZ1bmN0aW9uIHRvIGNoZWNrIG51bWJlcnMgZm9yIGVxdWFsaXR5IHVzaW5nIEZpcmVzdG9yZSBzZW1hbnRpY3NcclxuICogKE5hTiA9PT0gTmFOLCAtMC4wICE9PSAwLjApLlxyXG4gKi9cclxuZnVuY3Rpb24gbnVtZXJpY0VxdWFscyhsZWZ0LCByaWdodCkge1xyXG4gICAgLy8gSW1wbGVtZW50ZWQgYmFzZWQgb24gT2JqZWN0LmlzKCkgcG9seWZpbGwgZnJvbVxyXG4gICAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvT2JqZWN0L2lzXHJcbiAgICBpZiAobGVmdCA9PT0gcmlnaHQpIHtcclxuICAgICAgICAvLyArMCAhPSAtMFxyXG4gICAgICAgIHJldHVybiBsZWZ0ICE9PSAwIHx8IDEgLyBsZWZ0ID09PSAxIC8gcmlnaHQ7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICAvLyBOYU4gPT0gTmFOXHJcbiAgICAgICAgcmV0dXJuIGxlZnQgIT09IGxlZnQgJiYgcmlnaHQgIT09IHJpZ2h0O1xyXG4gICAgfVxyXG59XHJcbnZhciBJbnRlZ2VyVmFsdWUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICB0c2xpYi5fX2V4dGVuZHMoSW50ZWdlclZhbHVlLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gSW50ZWdlclZhbHVlKCkge1xyXG4gICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcclxuICAgIH1cclxuICAgIEludGVnZXJWYWx1ZS5wcm90b3R5cGUuaXNFcXVhbCA9IGZ1bmN0aW9uIChvdGhlcikge1xyXG4gICAgICAgIC8vIE5PVEU6IERvdWJsZVZhbHVlIGFuZCBJbnRlZ2VyVmFsdWUgaW5zdGFuY2VzIG1heSBjb21wYXJlVG8oKSB0aGUgc2FtZSxcclxuICAgICAgICAvLyBidXQgdGhhdCBkb2Vzbid0IG1ha2UgdGhlbSBlcXVhbCB2aWEgaXNFcXVhbCgpLlxyXG4gICAgICAgIGlmIChvdGhlciBpbnN0YW5jZW9mIEludGVnZXJWYWx1ZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVtZXJpY0VxdWFscyh0aGlzLmludGVybmFsVmFsdWUsIG90aGVyLmludGVybmFsVmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICByZXR1cm4gSW50ZWdlclZhbHVlO1xyXG59KE51bWJlclZhbHVlKSk7XHJcbnZhciBEb3VibGVWYWx1ZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIHRzbGliLl9fZXh0ZW5kcyhEb3VibGVWYWx1ZSwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIERvdWJsZVZhbHVlKCkge1xyXG4gICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcclxuICAgIH1cclxuICAgIERvdWJsZVZhbHVlLnByb3RvdHlwZS5pc0VxdWFsID0gZnVuY3Rpb24gKG90aGVyKSB7XHJcbiAgICAgICAgLy8gTk9URTogRG91YmxlVmFsdWUgYW5kIEludGVnZXJWYWx1ZSBpbnN0YW5jZXMgbWF5IGNvbXBhcmVUbygpIHRoZSBzYW1lLFxyXG4gICAgICAgIC8vIGJ1dCB0aGF0IGRvZXNuJ3QgbWFrZSB0aGVtIGVxdWFsIHZpYSBpc0VxdWFsKCkuXHJcbiAgICAgICAgaWYgKG90aGVyIGluc3RhbmNlb2YgRG91YmxlVmFsdWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bWVyaWNFcXVhbHModGhpcy5pbnRlcm5hbFZhbHVlLCBvdGhlci5pbnRlcm5hbFZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgRG91YmxlVmFsdWUuTkFOID0gbmV3IERvdWJsZVZhbHVlKE5hTik7XHJcbiAgICBEb3VibGVWYWx1ZS5QT1NJVElWRV9JTkZJTklUWSA9IG5ldyBEb3VibGVWYWx1ZShJbmZpbml0eSk7XHJcbiAgICBEb3VibGVWYWx1ZS5ORUdBVElWRV9JTkZJTklUWSA9IG5ldyBEb3VibGVWYWx1ZSgtSW5maW5pdHkpO1xyXG4gICAgcmV0dXJuIERvdWJsZVZhbHVlO1xyXG59KE51bWJlclZhbHVlKSk7XHJcbi8vIFRPRE8oYi8zNzI2Nzg4NSk6IEFkZCB0cnVuY2F0aW9uIHN1cHBvcnRcclxudmFyIFN0cmluZ1ZhbHVlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgdHNsaWIuX19leHRlbmRzKFN0cmluZ1ZhbHVlLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gU3RyaW5nVmFsdWUoaW50ZXJuYWxWYWx1ZSkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMuaW50ZXJuYWxWYWx1ZSA9IGludGVybmFsVmFsdWU7XHJcbiAgICAgICAgX3RoaXMudHlwZU9yZGVyID0gVHlwZU9yZGVyLlN0cmluZ1ZhbHVlO1xyXG4gICAgICAgIHJldHVybiBfdGhpcztcclxuICAgIH1cclxuICAgIFN0cmluZ1ZhbHVlLnByb3RvdHlwZS52YWx1ZSA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaW50ZXJuYWxWYWx1ZTtcclxuICAgIH07XHJcbiAgICBTdHJpbmdWYWx1ZS5wcm90b3R5cGUuaXNFcXVhbCA9IGZ1bmN0aW9uIChvdGhlcikge1xyXG4gICAgICAgIHJldHVybiAob3RoZXIgaW5zdGFuY2VvZiBTdHJpbmdWYWx1ZSAmJiB0aGlzLmludGVybmFsVmFsdWUgPT09IG90aGVyLmludGVybmFsVmFsdWUpO1xyXG4gICAgfTtcclxuICAgIFN0cmluZ1ZhbHVlLnByb3RvdHlwZS5jb21wYXJlVG8gPSBmdW5jdGlvbiAob3RoZXIpIHtcclxuICAgICAgICBpZiAob3RoZXIgaW5zdGFuY2VvZiBTdHJpbmdWYWx1ZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gcHJpbWl0aXZlQ29tcGFyYXRvcih0aGlzLmludGVybmFsVmFsdWUsIG90aGVyLmludGVybmFsVmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5kZWZhdWx0Q29tcGFyZVRvKG90aGVyKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gU3RyaW5nVmFsdWU7XHJcbn0oRmllbGRWYWx1ZSkpO1xyXG52YXIgVGltZXN0YW1wVmFsdWUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICB0c2xpYi5fX2V4dGVuZHMoVGltZXN0YW1wVmFsdWUsIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBUaW1lc3RhbXBWYWx1ZShpbnRlcm5hbFZhbHVlKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcclxuICAgICAgICBfdGhpcy5pbnRlcm5hbFZhbHVlID0gaW50ZXJuYWxWYWx1ZTtcclxuICAgICAgICBfdGhpcy50eXBlT3JkZXIgPSBUeXBlT3JkZXIuVGltZXN0YW1wVmFsdWU7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgVGltZXN0YW1wVmFsdWUucHJvdG90eXBlLnZhbHVlID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcclxuICAgICAgICBpZiAoIW9wdGlvbnMgfHwgb3B0aW9ucy50aW1lc3RhbXBzSW5TbmFwc2hvdHMpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaW50ZXJuYWxWYWx1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmludGVybmFsVmFsdWUudG9EYXRlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFRpbWVzdGFtcFZhbHVlLnByb3RvdHlwZS5pc0VxdWFsID0gZnVuY3Rpb24gKG90aGVyKSB7XHJcbiAgICAgICAgcmV0dXJuIChvdGhlciBpbnN0YW5jZW9mIFRpbWVzdGFtcFZhbHVlICYmXHJcbiAgICAgICAgICAgIHRoaXMuaW50ZXJuYWxWYWx1ZS5pc0VxdWFsKG90aGVyLmludGVybmFsVmFsdWUpKTtcclxuICAgIH07XHJcbiAgICBUaW1lc3RhbXBWYWx1ZS5wcm90b3R5cGUuY29tcGFyZVRvID0gZnVuY3Rpb24gKG90aGVyKSB7XHJcbiAgICAgICAgaWYgKG90aGVyIGluc3RhbmNlb2YgVGltZXN0YW1wVmFsdWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaW50ZXJuYWxWYWx1ZS5fY29tcGFyZVRvKG90aGVyLmludGVybmFsVmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChvdGhlciBpbnN0YW5jZW9mIFNlcnZlclRpbWVzdGFtcFZhbHVlKSB7XHJcbiAgICAgICAgICAgIC8vIENvbmNyZXRlIHRpbWVzdGFtcHMgY29tZSBiZWZvcmUgc2VydmVyIHRpbWVzdGFtcHMuXHJcbiAgICAgICAgICAgIHJldHVybiAtMTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRlZmF1bHRDb21wYXJlVG8ob3RoZXIpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICByZXR1cm4gVGltZXN0YW1wVmFsdWU7XHJcbn0oRmllbGRWYWx1ZSkpO1xyXG4vKipcclxuICogUmVwcmVzZW50cyBhIGxvY2FsbHktYXBwbGllZCBTZXJ2ZXJUaW1lc3RhbXAuXHJcbiAqXHJcbiAqIE5vdGVzOlxyXG4gKiAtIFNlcnZlclRpbWVzdGFtcFZhbHVlIGluc3RhbmNlcyBhcmUgY3JlYXRlZCBhcyB0aGUgcmVzdWx0IG9mIGFwcGx5aW5nIGFcclxuICogICBUcmFuc2Zvcm1NdXRhdGlvbiAoc2VlIFRyYW5zZm9ybU11dGF0aW9uLmFwcGx5VG8oKSkuIFRoZXkgY2FuIG9ubHkgZXhpc3QgaW5cclxuICogICB0aGUgbG9jYWwgdmlldyBvZiBhIGRvY3VtZW50LiBUaGVyZWZvcmUgdGhleSBkbyBub3QgbmVlZCB0byBiZSBwYXJzZWQgb3JcclxuICogICBzZXJpYWxpemVkLlxyXG4gKiAtIFdoZW4gZXZhbHVhdGVkIGxvY2FsbHkgKGUuZy4gZm9yIHNuYXBzaG90LmRhdGEoKSksIHRoZXkgYnkgZGVmYXVsdFxyXG4gKiAgIGV2YWx1YXRlIHRvIGBudWxsYC4gVGhpcyBiZWhhdmlvciBjYW4gYmUgY29uZmlndXJlZCBieSBwYXNzaW5nIGN1c3RvbVxyXG4gKiAgIEZpZWxkVmFsdWVPcHRpb25zIHRvIHZhbHVlKCkuXHJcbiAqIC0gV2l0aCByZXNwZWN0IHRvIG90aGVyIFNlcnZlclRpbWVzdGFtcFZhbHVlcywgdGhleSBzb3J0IGJ5IHRoZWlyXHJcbiAqICAgbG9jYWxXcml0ZVRpbWUuXHJcbiAqL1xyXG52YXIgU2VydmVyVGltZXN0YW1wVmFsdWUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICB0c2xpYi5fX2V4dGVuZHMoU2VydmVyVGltZXN0YW1wVmFsdWUsIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBTZXJ2ZXJUaW1lc3RhbXBWYWx1ZShsb2NhbFdyaXRlVGltZSwgcHJldmlvdXNWYWx1ZSkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMubG9jYWxXcml0ZVRpbWUgPSBsb2NhbFdyaXRlVGltZTtcclxuICAgICAgICBfdGhpcy5wcmV2aW91c1ZhbHVlID0gcHJldmlvdXNWYWx1ZTtcclxuICAgICAgICBfdGhpcy50eXBlT3JkZXIgPSBUeXBlT3JkZXIuVGltZXN0YW1wVmFsdWU7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgU2VydmVyVGltZXN0YW1wVmFsdWUucHJvdG90eXBlLnZhbHVlID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcclxuICAgICAgICBpZiAob3B0aW9ucyAmJlxyXG4gICAgICAgICAgICBvcHRpb25zLnNlcnZlclRpbWVzdGFtcEJlaGF2aW9yID09PSBTZXJ2ZXJUaW1lc3RhbXBCZWhhdmlvci5Fc3RpbWF0ZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFRpbWVzdGFtcFZhbHVlKHRoaXMubG9jYWxXcml0ZVRpbWUpLnZhbHVlKG9wdGlvbnMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChvcHRpb25zICYmXHJcbiAgICAgICAgICAgIG9wdGlvbnMuc2VydmVyVGltZXN0YW1wQmVoYXZpb3IgPT09IFNlcnZlclRpbWVzdGFtcEJlaGF2aW9yLlByZXZpb3VzKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByZXZpb3VzVmFsdWUgPyB0aGlzLnByZXZpb3VzVmFsdWUudmFsdWUob3B0aW9ucykgOiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFNlcnZlclRpbWVzdGFtcFZhbHVlLnByb3RvdHlwZS5pc0VxdWFsID0gZnVuY3Rpb24gKG90aGVyKSB7XHJcbiAgICAgICAgcmV0dXJuIChvdGhlciBpbnN0YW5jZW9mIFNlcnZlclRpbWVzdGFtcFZhbHVlICYmXHJcbiAgICAgICAgICAgIHRoaXMubG9jYWxXcml0ZVRpbWUuaXNFcXVhbChvdGhlci5sb2NhbFdyaXRlVGltZSkpO1xyXG4gICAgfTtcclxuICAgIFNlcnZlclRpbWVzdGFtcFZhbHVlLnByb3RvdHlwZS5jb21wYXJlVG8gPSBmdW5jdGlvbiAob3RoZXIpIHtcclxuICAgICAgICBpZiAob3RoZXIgaW5zdGFuY2VvZiBTZXJ2ZXJUaW1lc3RhbXBWYWx1ZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5sb2NhbFdyaXRlVGltZS5fY29tcGFyZVRvKG90aGVyLmxvY2FsV3JpdGVUaW1lKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAob3RoZXIgaW5zdGFuY2VvZiBUaW1lc3RhbXBWYWx1ZSkge1xyXG4gICAgICAgICAgICAvLyBTZXJ2ZXIgdGltZXN0YW1wcyBjb21lIGFmdGVyIGFsbCBjb25jcmV0ZSB0aW1lc3RhbXBzLlxyXG4gICAgICAgICAgICByZXR1cm4gMTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRlZmF1bHRDb21wYXJlVG8ob3RoZXIpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBTZXJ2ZXJUaW1lc3RhbXBWYWx1ZS5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuICc8U2VydmVyVGltZXN0YW1wIGxvY2FsVGltZT0nICsgdGhpcy5sb2NhbFdyaXRlVGltZS50b1N0cmluZygpICsgJz4nO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBTZXJ2ZXJUaW1lc3RhbXBWYWx1ZTtcclxufShGaWVsZFZhbHVlKSk7XHJcbnZhciBCbG9iVmFsdWUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICB0c2xpYi5fX2V4dGVuZHMoQmxvYlZhbHVlLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gQmxvYlZhbHVlKGludGVybmFsVmFsdWUpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xyXG4gICAgICAgIF90aGlzLmludGVybmFsVmFsdWUgPSBpbnRlcm5hbFZhbHVlO1xyXG4gICAgICAgIF90aGlzLnR5cGVPcmRlciA9IFR5cGVPcmRlci5CbG9iVmFsdWU7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgQmxvYlZhbHVlLnByb3RvdHlwZS52YWx1ZSA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaW50ZXJuYWxWYWx1ZTtcclxuICAgIH07XHJcbiAgICBCbG9iVmFsdWUucHJvdG90eXBlLmlzRXF1YWwgPSBmdW5jdGlvbiAob3RoZXIpIHtcclxuICAgICAgICByZXR1cm4gKG90aGVyIGluc3RhbmNlb2YgQmxvYlZhbHVlICYmXHJcbiAgICAgICAgICAgIHRoaXMuaW50ZXJuYWxWYWx1ZS5pc0VxdWFsKG90aGVyLmludGVybmFsVmFsdWUpKTtcclxuICAgIH07XHJcbiAgICBCbG9iVmFsdWUucHJvdG90eXBlLmNvbXBhcmVUbyA9IGZ1bmN0aW9uIChvdGhlcikge1xyXG4gICAgICAgIGlmIChvdGhlciBpbnN0YW5jZW9mIEJsb2JWYWx1ZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pbnRlcm5hbFZhbHVlLl9jb21wYXJlVG8ob3RoZXIuaW50ZXJuYWxWYWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLmRlZmF1bHRDb21wYXJlVG8ob3RoZXIpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBCbG9iVmFsdWU7XHJcbn0oRmllbGRWYWx1ZSkpO1xyXG52YXIgUmVmVmFsdWUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICB0c2xpYi5fX2V4dGVuZHMoUmVmVmFsdWUsIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBSZWZWYWx1ZShkYXRhYmFzZUlkLCBrZXkpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xyXG4gICAgICAgIF90aGlzLmRhdGFiYXNlSWQgPSBkYXRhYmFzZUlkO1xyXG4gICAgICAgIF90aGlzLmtleSA9IGtleTtcclxuICAgICAgICBfdGhpcy50eXBlT3JkZXIgPSBUeXBlT3JkZXIuUmVmVmFsdWU7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgUmVmVmFsdWUucHJvdG90eXBlLnZhbHVlID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5rZXk7XHJcbiAgICB9O1xyXG4gICAgUmVmVmFsdWUucHJvdG90eXBlLmlzRXF1YWwgPSBmdW5jdGlvbiAob3RoZXIpIHtcclxuICAgICAgICBpZiAob3RoZXIgaW5zdGFuY2VvZiBSZWZWYWx1ZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gKHRoaXMua2V5LmlzRXF1YWwob3RoZXIua2V5KSAmJiB0aGlzLmRhdGFiYXNlSWQuaXNFcXVhbChvdGhlci5kYXRhYmFzZUlkKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFJlZlZhbHVlLnByb3RvdHlwZS5jb21wYXJlVG8gPSBmdW5jdGlvbiAob3RoZXIpIHtcclxuICAgICAgICBpZiAob3RoZXIgaW5zdGFuY2VvZiBSZWZWYWx1ZSkge1xyXG4gICAgICAgICAgICB2YXIgY21wID0gdGhpcy5kYXRhYmFzZUlkLmNvbXBhcmVUbyhvdGhlci5kYXRhYmFzZUlkKTtcclxuICAgICAgICAgICAgcmV0dXJuIGNtcCAhPT0gMCA/IGNtcCA6IERvY3VtZW50S2V5LmNvbXBhcmF0b3IodGhpcy5rZXksIG90aGVyLmtleSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLmRlZmF1bHRDb21wYXJlVG8ob3RoZXIpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBSZWZWYWx1ZTtcclxufShGaWVsZFZhbHVlKSk7XHJcbnZhciBHZW9Qb2ludFZhbHVlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgdHNsaWIuX19leHRlbmRzKEdlb1BvaW50VmFsdWUsIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBHZW9Qb2ludFZhbHVlKGludGVybmFsVmFsdWUpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xyXG4gICAgICAgIF90aGlzLmludGVybmFsVmFsdWUgPSBpbnRlcm5hbFZhbHVlO1xyXG4gICAgICAgIF90aGlzLnR5cGVPcmRlciA9IFR5cGVPcmRlci5HZW9Qb2ludFZhbHVlO1xyXG4gICAgICAgIHJldHVybiBfdGhpcztcclxuICAgIH1cclxuICAgIEdlb1BvaW50VmFsdWUucHJvdG90eXBlLnZhbHVlID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5pbnRlcm5hbFZhbHVlO1xyXG4gICAgfTtcclxuICAgIEdlb1BvaW50VmFsdWUucHJvdG90eXBlLmlzRXF1YWwgPSBmdW5jdGlvbiAob3RoZXIpIHtcclxuICAgICAgICByZXR1cm4gKG90aGVyIGluc3RhbmNlb2YgR2VvUG9pbnRWYWx1ZSAmJlxyXG4gICAgICAgICAgICB0aGlzLmludGVybmFsVmFsdWUuaXNFcXVhbChvdGhlci5pbnRlcm5hbFZhbHVlKSk7XHJcbiAgICB9O1xyXG4gICAgR2VvUG9pbnRWYWx1ZS5wcm90b3R5cGUuY29tcGFyZVRvID0gZnVuY3Rpb24gKG90aGVyKSB7XHJcbiAgICAgICAgaWYgKG90aGVyIGluc3RhbmNlb2YgR2VvUG9pbnRWYWx1ZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pbnRlcm5hbFZhbHVlLl9jb21wYXJlVG8ob3RoZXIuaW50ZXJuYWxWYWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLmRlZmF1bHRDb21wYXJlVG8ob3RoZXIpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBHZW9Qb2ludFZhbHVlO1xyXG59KEZpZWxkVmFsdWUpKTtcclxudmFyIE9iamVjdFZhbHVlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgdHNsaWIuX19leHRlbmRzKE9iamVjdFZhbHVlLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gT2JqZWN0VmFsdWUoaW50ZXJuYWxWYWx1ZSkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMuaW50ZXJuYWxWYWx1ZSA9IGludGVybmFsVmFsdWU7XHJcbiAgICAgICAgX3RoaXMudHlwZU9yZGVyID0gVHlwZU9yZGVyLk9iamVjdFZhbHVlO1xyXG4gICAgICAgIHJldHVybiBfdGhpcztcclxuICAgIH1cclxuICAgIE9iamVjdFZhbHVlLnByb3RvdHlwZS52YWx1ZSA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XHJcbiAgICAgICAgdmFyIHJlc3VsdCA9IHt9O1xyXG4gICAgICAgIHRoaXMuaW50ZXJuYWxWYWx1ZS5pbm9yZGVyVHJhdmVyc2FsKGZ1bmN0aW9uIChrZXksIHZhbCkge1xyXG4gICAgICAgICAgICByZXN1bHRba2V5XSA9IHZhbC52YWx1ZShvcHRpb25zKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfTtcclxuICAgIE9iamVjdFZhbHVlLnByb3RvdHlwZS5mb3JFYWNoID0gZnVuY3Rpb24gKGFjdGlvbikge1xyXG4gICAgICAgIHRoaXMuaW50ZXJuYWxWYWx1ZS5pbm9yZGVyVHJhdmVyc2FsKGFjdGlvbik7XHJcbiAgICB9O1xyXG4gICAgT2JqZWN0VmFsdWUucHJvdG90eXBlLmlzRXF1YWwgPSBmdW5jdGlvbiAob3RoZXIpIHtcclxuICAgICAgICBpZiAob3RoZXIgaW5zdGFuY2VvZiBPYmplY3RWYWx1ZSkge1xyXG4gICAgICAgICAgICB2YXIgaXQxID0gdGhpcy5pbnRlcm5hbFZhbHVlLmdldEl0ZXJhdG9yKCk7XHJcbiAgICAgICAgICAgIHZhciBpdDIgPSBvdGhlci5pbnRlcm5hbFZhbHVlLmdldEl0ZXJhdG9yKCk7XHJcbiAgICAgICAgICAgIHdoaWxlIChpdDEuaGFzTmV4dCgpICYmIGl0Mi5oYXNOZXh0KCkpIHtcclxuICAgICAgICAgICAgICAgIHZhciBuZXh0MSA9IGl0MS5nZXROZXh0KCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgbmV4dDIgPSBpdDIuZ2V0TmV4dCgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKG5leHQxLmtleSAhPT0gbmV4dDIua2V5IHx8ICFuZXh0MS52YWx1ZS5pc0VxdWFsKG5leHQyLnZhbHVlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gIWl0MS5oYXNOZXh0KCkgJiYgIWl0Mi5oYXNOZXh0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH07XHJcbiAgICBPYmplY3RWYWx1ZS5wcm90b3R5cGUuY29tcGFyZVRvID0gZnVuY3Rpb24gKG90aGVyKSB7XHJcbiAgICAgICAgaWYgKG90aGVyIGluc3RhbmNlb2YgT2JqZWN0VmFsdWUpIHtcclxuICAgICAgICAgICAgdmFyIGl0MSA9IHRoaXMuaW50ZXJuYWxWYWx1ZS5nZXRJdGVyYXRvcigpO1xyXG4gICAgICAgICAgICB2YXIgaXQyID0gb3RoZXIuaW50ZXJuYWxWYWx1ZS5nZXRJdGVyYXRvcigpO1xyXG4gICAgICAgICAgICB3aGlsZSAoaXQxLmhhc05leHQoKSAmJiBpdDIuaGFzTmV4dCgpKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbmV4dDEgPSBpdDEuZ2V0TmV4dCgpO1xyXG4gICAgICAgICAgICAgICAgdmFyIG5leHQyID0gaXQyLmdldE5leHQoKTtcclxuICAgICAgICAgICAgICAgIHZhciBjbXAgPSBwcmltaXRpdmVDb21wYXJhdG9yKG5leHQxLmtleSwgbmV4dDIua2V5KSB8fFxyXG4gICAgICAgICAgICAgICAgICAgIG5leHQxLnZhbHVlLmNvbXBhcmVUbyhuZXh0Mi52YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoY21wKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNtcDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBPbmx5IGVxdWFsIGlmIGJvdGggaXRlcmF0b3JzIGFyZSBleGhhdXN0ZWRcclxuICAgICAgICAgICAgcmV0dXJuIHByaW1pdGl2ZUNvbXBhcmF0b3IoaXQxLmhhc05leHQoKSwgaXQyLmhhc05leHQoKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kZWZhdWx0Q29tcGFyZVRvKG90aGVyKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgT2JqZWN0VmFsdWUucHJvdG90eXBlLnNldCA9IGZ1bmN0aW9uIChwYXRoLCB0bykge1xyXG4gICAgICAgIGFzc2VydCghcGF0aC5pc0VtcHR5KCksICdDYW5ub3Qgc2V0IGZpZWxkIGZvciBlbXB0eSBwYXRoIG9uIE9iamVjdFZhbHVlJyk7XHJcbiAgICAgICAgaWYgKHBhdGgubGVuZ3RoID09PSAxKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNldENoaWxkKHBhdGguZmlyc3RTZWdtZW50KCksIHRvKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHZhciBjaGlsZCA9IHRoaXMuY2hpbGQocGF0aC5maXJzdFNlZ21lbnQoKSk7XHJcbiAgICAgICAgICAgIGlmICghKGNoaWxkIGluc3RhbmNlb2YgT2JqZWN0VmFsdWUpKSB7XHJcbiAgICAgICAgICAgICAgICBjaGlsZCA9IE9iamVjdFZhbHVlLkVNUFRZO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciBuZXdDaGlsZCA9IGNoaWxkLnNldChwYXRoLnBvcEZpcnN0KCksIHRvKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2V0Q2hpbGQocGF0aC5maXJzdFNlZ21lbnQoKSwgbmV3Q2hpbGQpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBPYmplY3RWYWx1ZS5wcm90b3R5cGUuZGVsZXRlID0gZnVuY3Rpb24gKHBhdGgpIHtcclxuICAgICAgICBhc3NlcnQoIXBhdGguaXNFbXB0eSgpLCAnQ2Fubm90IGRlbGV0ZSBmaWVsZCBmb3IgZW1wdHkgcGF0aCBvbiBPYmplY3RWYWx1ZScpO1xyXG4gICAgICAgIGlmIChwYXRoLmxlbmd0aCA9PT0gMSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IE9iamVjdFZhbHVlKHRoaXMuaW50ZXJuYWxWYWx1ZS5yZW1vdmUocGF0aC5maXJzdFNlZ21lbnQoKSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gbmVzdGVkIGZpZWxkXHJcbiAgICAgICAgICAgIHZhciBjaGlsZCA9IHRoaXMuY2hpbGQocGF0aC5maXJzdFNlZ21lbnQoKSk7XHJcbiAgICAgICAgICAgIGlmIChjaGlsZCBpbnN0YW5jZW9mIE9iamVjdFZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbmV3Q2hpbGQgPSBjaGlsZC5kZWxldGUocGF0aC5wb3BGaXJzdCgpKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgT2JqZWN0VmFsdWUodGhpcy5pbnRlcm5hbFZhbHVlLmluc2VydChwYXRoLmZpcnN0U2VnbWVudCgpLCBuZXdDaGlsZCkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gRG9uJ3QgYWN0dWFsbHkgY2hhbmdlIGEgcHJpbWl0aXZlIHZhbHVlIHRvIGFuIG9iamVjdCBmb3IgYSBkZWxldGVcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIE9iamVjdFZhbHVlLnByb3RvdHlwZS5jb250YWlucyA9IGZ1bmN0aW9uIChwYXRoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZmllbGQocGF0aCkgIT09IG51bGw7XHJcbiAgICB9O1xyXG4gICAgT2JqZWN0VmFsdWUucHJvdG90eXBlLmZpZWxkID0gZnVuY3Rpb24gKHBhdGgpIHtcclxuICAgICAgICBhc3NlcnQoIXBhdGguaXNFbXB0eSgpLCBcIkNhbid0IGdldCBmaWVsZCBvZiBlbXB0eSBwYXRoXCIpO1xyXG4gICAgICAgIHZhciBmaWVsZCA9IHRoaXM7XHJcbiAgICAgICAgcGF0aC5mb3JFYWNoKGZ1bmN0aW9uIChwYXRoU2VnbWVudCkge1xyXG4gICAgICAgICAgICBpZiAoZmllbGQgaW5zdGFuY2VvZiBPYmplY3RWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgZmllbGQgPSBmaWVsZC5pbnRlcm5hbFZhbHVlLmdldChwYXRoU2VnbWVudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBmaWVsZCA9IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gZmllbGQ7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIGEgRmllbGRNYXNrIGJ1aWx0IGZyb20gYWxsIEZpZWxkUGF0aHMgc3RhcnRpbmcgZnJvbSB0aGlzIE9iamVjdFZhbHVlLFxyXG4gICAgICogaW5jbHVkaW5nIHBhdGhzIGZyb20gbmVzdGVkIG9iamVjdHMuXHJcbiAgICAgKi9cclxuICAgIE9iamVjdFZhbHVlLnByb3RvdHlwZS5maWVsZE1hc2sgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGZpZWxkcyA9IG5ldyBTb3J0ZWRTZXQoRmllbGRQYXRoLmNvbXBhcmF0b3IpO1xyXG4gICAgICAgIHRoaXMuaW50ZXJuYWxWYWx1ZS5mb3JFYWNoKGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XHJcbiAgICAgICAgICAgIHZhciBjdXJyZW50UGF0aCA9IG5ldyBGaWVsZFBhdGgoW2tleV0pO1xyXG4gICAgICAgICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBPYmplY3RWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG5lc3RlZE1hc2sgPSB2YWx1ZS5maWVsZE1hc2soKTtcclxuICAgICAgICAgICAgICAgIHZhciBuZXN0ZWRGaWVsZHMgPSBuZXN0ZWRNYXNrLmZpZWxkcztcclxuICAgICAgICAgICAgICAgIGlmIChuZXN0ZWRGaWVsZHMuaXNFbXB0eSgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gUHJlc2VydmUgdGhlIGVtcHR5IG1hcCBieSBhZGRpbmcgaXQgdG8gdGhlIEZpZWxkTWFzay5cclxuICAgICAgICAgICAgICAgICAgICBmaWVsZHMgPSBmaWVsZHMuYWRkKGN1cnJlbnRQYXRoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIEZvciBuZXN0ZWQgYW5kIG5vbi1lbXB0eSBPYmplY3RWYWx1ZXMsIGFkZCB0aGUgRmllbGRQYXRoIG9mIHRoZVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGxlYWYgbm9kZXMuXHJcbiAgICAgICAgICAgICAgICAgICAgbmVzdGVkRmllbGRzLmZvckVhY2goZnVuY3Rpb24gKG5lc3RlZFBhdGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRzID0gZmllbGRzLmFkZChjdXJyZW50UGF0aC5jaGlsZChuZXN0ZWRQYXRoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBmaWVsZHMgPSBmaWVsZHMuYWRkKGN1cnJlbnRQYXRoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBGaWVsZE1hc2suZnJvbVNldChmaWVsZHMpO1xyXG4gICAgfTtcclxuICAgIE9iamVjdFZhbHVlLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5pbnRlcm5hbFZhbHVlLnRvU3RyaW5nKCk7XHJcbiAgICB9O1xyXG4gICAgT2JqZWN0VmFsdWUucHJvdG90eXBlLmNoaWxkID0gZnVuY3Rpb24gKGNoaWxkTmFtZSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmludGVybmFsVmFsdWUuZ2V0KGNoaWxkTmFtZSkgfHwgdW5kZWZpbmVkO1xyXG4gICAgfTtcclxuICAgIE9iamVjdFZhbHVlLnByb3RvdHlwZS5zZXRDaGlsZCA9IGZ1bmN0aW9uIChjaGlsZE5hbWUsIHZhbHVlKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBPYmplY3RWYWx1ZSh0aGlzLmludGVybmFsVmFsdWUuaW5zZXJ0KGNoaWxkTmFtZSwgdmFsdWUpKTtcclxuICAgIH07XHJcbiAgICBPYmplY3RWYWx1ZS5FTVBUWSA9IG5ldyBPYmplY3RWYWx1ZShuZXcgU29ydGVkTWFwKHByaW1pdGl2ZUNvbXBhcmF0b3IpKTtcclxuICAgIHJldHVybiBPYmplY3RWYWx1ZTtcclxufShGaWVsZFZhbHVlKSk7XHJcbnZhciBBcnJheVZhbHVlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgdHNsaWIuX19leHRlbmRzKEFycmF5VmFsdWUsIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBBcnJheVZhbHVlKGludGVybmFsVmFsdWUpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xyXG4gICAgICAgIF90aGlzLmludGVybmFsVmFsdWUgPSBpbnRlcm5hbFZhbHVlO1xyXG4gICAgICAgIF90aGlzLnR5cGVPcmRlciA9IFR5cGVPcmRlci5BcnJheVZhbHVlO1xyXG4gICAgICAgIHJldHVybiBfdGhpcztcclxuICAgIH1cclxuICAgIEFycmF5VmFsdWUucHJvdG90eXBlLnZhbHVlID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5pbnRlcm5hbFZhbHVlLm1hcChmdW5jdGlvbiAodikgeyByZXR1cm4gdi52YWx1ZShvcHRpb25zKTsgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhlIGdpdmVuIHZhbHVlIGlzIGNvbnRhaW5lZCBpbiB0aGlzIGFycmF5LlxyXG4gICAgICovXHJcbiAgICBBcnJheVZhbHVlLnByb3RvdHlwZS5jb250YWlucyA9IGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSB0aGlzLmludGVybmFsVmFsdWU7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBlbGVtZW50ID0gX2FbX2ldO1xyXG4gICAgICAgICAgICBpZiAoZWxlbWVudC5pc0VxdWFsKHZhbHVlKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfTtcclxuICAgIEFycmF5VmFsdWUucHJvdG90eXBlLmZvckVhY2ggPSBmdW5jdGlvbiAoYWN0aW9uKSB7XHJcbiAgICAgICAgdGhpcy5pbnRlcm5hbFZhbHVlLmZvckVhY2goYWN0aW9uKTtcclxuICAgIH07XHJcbiAgICBBcnJheVZhbHVlLnByb3RvdHlwZS5pc0VxdWFsID0gZnVuY3Rpb24gKG90aGVyKSB7XHJcbiAgICAgICAgaWYgKG90aGVyIGluc3RhbmNlb2YgQXJyYXlWYWx1ZSkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5pbnRlcm5hbFZhbHVlLmxlbmd0aCAhPT0gb3RoZXIuaW50ZXJuYWxWYWx1ZS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuaW50ZXJuYWxWYWx1ZS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmludGVybmFsVmFsdWVbaV0uaXNFcXVhbChvdGhlci5pbnRlcm5hbFZhbHVlW2ldKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfTtcclxuICAgIEFycmF5VmFsdWUucHJvdG90eXBlLmNvbXBhcmVUbyA9IGZ1bmN0aW9uIChvdGhlcikge1xyXG4gICAgICAgIGlmIChvdGhlciBpbnN0YW5jZW9mIEFycmF5VmFsdWUpIHtcclxuICAgICAgICAgICAgdmFyIG1pbkxlbmd0aCA9IE1hdGgubWluKHRoaXMuaW50ZXJuYWxWYWx1ZS5sZW5ndGgsIG90aGVyLmludGVybmFsVmFsdWUubGVuZ3RoKTtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtaW5MZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGNtcCA9IHRoaXMuaW50ZXJuYWxWYWx1ZVtpXS5jb21wYXJlVG8ob3RoZXIuaW50ZXJuYWxWYWx1ZVtpXSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoY21wKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNtcDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gcHJpbWl0aXZlQ29tcGFyYXRvcih0aGlzLmludGVybmFsVmFsdWUubGVuZ3RoLCBvdGhlci5pbnRlcm5hbFZhbHVlLmxlbmd0aCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kZWZhdWx0Q29tcGFyZVRvKG90aGVyKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgQXJyYXlWYWx1ZS5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGRlc2NyaXB0aW9ucyA9IHRoaXMuaW50ZXJuYWxWYWx1ZS5tYXAoZnVuY3Rpb24gKHYpIHsgcmV0dXJuIHYudG9TdHJpbmcoKTsgfSk7XHJcbiAgICAgICAgcmV0dXJuIFwiW1wiICsgZGVzY3JpcHRpb25zLmpvaW4oJywnKSArIFwiXVwiO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBBcnJheVZhbHVlO1xyXG59KEZpZWxkVmFsdWUpKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBUaGUgcmVzdWx0IG9mIGEgbG9va3VwIGZvciBhIGdpdmVuIHBhdGggbWF5IGJlIGFuIGV4aXN0aW5nIGRvY3VtZW50IG9yIGFcclxuICogbWFya2VyIHRoYXQgdGhpcyBkb2N1bWVudCBkb2VzIG5vdCBleGlzdCBhdCBhIGdpdmVuIHZlcnNpb24uXHJcbiAqL1xyXG52YXIgTWF5YmVEb2N1bWVudCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIE1heWJlRG9jdW1lbnQoa2V5LCB2ZXJzaW9uKSB7XHJcbiAgICAgICAgdGhpcy5rZXkgPSBrZXk7XHJcbiAgICAgICAgdGhpcy52ZXJzaW9uID0gdmVyc2lvbjtcclxuICAgIH1cclxuICAgIE1heWJlRG9jdW1lbnQuY29tcGFyZUJ5S2V5ID0gZnVuY3Rpb24gKGQxLCBkMikge1xyXG4gICAgICAgIHJldHVybiBEb2N1bWVudEtleS5jb21wYXJhdG9yKGQxLmtleSwgZDIua2V5KTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gTWF5YmVEb2N1bWVudDtcclxufSgpKTtcclxuLyoqXHJcbiAqIFJlcHJlc2VudHMgYSBkb2N1bWVudCBpbiBGaXJlc3RvcmUgd2l0aCBhIGtleSwgdmVyc2lvbiwgZGF0YSBhbmQgd2hldGhlciB0aGVcclxuICogZGF0YSBoYXMgbG9jYWwgbXV0YXRpb25zIGFwcGxpZWQgdG8gaXQuXHJcbiAqL1xyXG52YXIgRG9jdW1lbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICB0c2xpYi5fX2V4dGVuZHMoRG9jdW1lbnQsIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBEb2N1bWVudChrZXksIHZlcnNpb24sIG9wdGlvbnMsIG9iamVjdFZhbHVlLCBwcm90bywgY29udmVydGVyKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywga2V5LCB2ZXJzaW9uKSB8fCB0aGlzO1xyXG4gICAgICAgIF90aGlzLm9iamVjdFZhbHVlID0gb2JqZWN0VmFsdWU7XHJcbiAgICAgICAgX3RoaXMucHJvdG8gPSBwcm90bztcclxuICAgICAgICBfdGhpcy5jb252ZXJ0ZXIgPSBjb252ZXJ0ZXI7XHJcbiAgICAgICAgYXNzZXJ0KF90aGlzLm9iamVjdFZhbHVlICE9PSB1bmRlZmluZWQgfHxcclxuICAgICAgICAgICAgKF90aGlzLnByb3RvICE9PSB1bmRlZmluZWQgJiYgX3RoaXMuY29udmVydGVyICE9PSB1bmRlZmluZWQpLCAnSWYgb2JqZWN0VmFsdWUgaXMgbm90IGRlZmluZWQsIHByb3RvIGFuZCBjb252ZXJ0ZXIgbmVlZCB0byBiZSBzZXQuJyk7XHJcbiAgICAgICAgX3RoaXMuaGFzTG9jYWxNdXRhdGlvbnMgPSAhIW9wdGlvbnMuaGFzTG9jYWxNdXRhdGlvbnM7XHJcbiAgICAgICAgX3RoaXMuaGFzQ29tbWl0dGVkTXV0YXRpb25zID0gISFvcHRpb25zLmhhc0NvbW1pdHRlZE11dGF0aW9ucztcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICBEb2N1bWVudC5wcm90b3R5cGUuZmllbGQgPSBmdW5jdGlvbiAocGF0aCkge1xyXG4gICAgICAgIGlmICh0aGlzLm9iamVjdFZhbHVlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm9iamVjdFZhbHVlLmZpZWxkKHBhdGgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLmZpZWxkVmFsdWVDYWNoZSkge1xyXG4gICAgICAgICAgICAgICAgLy8gVE9ETyhiLzEzNjA5MDQ0NSk6IFJlbW92ZSB0aGUgY2FjaGUgd2hlbiBgZ2V0RmllbGRgIGlzIG5vIGxvbmdlclxyXG4gICAgICAgICAgICAgICAgLy8gY2FsbGVkIGR1cmluZyBRdWVyeSBvcmRlcmluZy5cclxuICAgICAgICAgICAgICAgIHRoaXMuZmllbGRWYWx1ZUNhY2hlID0gbmV3IE1hcCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciBjYW5vbmljYWxQYXRoID0gcGF0aC5jYW5vbmljYWxTdHJpbmcoKTtcclxuICAgICAgICAgICAgdmFyIGZpZWxkVmFsdWUgPSB0aGlzLmZpZWxkVmFsdWVDYWNoZS5nZXQoY2Fub25pY2FsUGF0aCk7XHJcbiAgICAgICAgICAgIGlmIChmaWVsZFZhbHVlID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIC8vIEluc3RlYWQgb2YgZGVzZXJpYWxpemluZyB0aGUgZnVsbCBEb2N1bWVudCBwcm90bywgd2Ugb25seVxyXG4gICAgICAgICAgICAgICAgLy8gZGVzZXJpYWxpemUgdGhlIHZhbHVlIGF0IHRoZSByZXF1ZXN0ZWQgZmllbGQgcGF0aC4gVGhpcyBzcGVlZHMgdXBcclxuICAgICAgICAgICAgICAgIC8vIFF1ZXJ5IGV4ZWN1dGlvbiBhcyBxdWVyeSBmaWx0ZXJzIGNhbiBkaXNjYXJkIGRvY3VtZW50cyBiYXNlZCBvbiBhXHJcbiAgICAgICAgICAgICAgICAvLyBzaW5nbGUgZmllbGQuXHJcbiAgICAgICAgICAgICAgICB2YXIgcHJvdG9WYWx1ZSA9IHRoaXMuZ2V0UHJvdG9GaWVsZChwYXRoKTtcclxuICAgICAgICAgICAgICAgIGlmIChwcm90b1ZhbHVlID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBmaWVsZFZhbHVlID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGZpZWxkVmFsdWUgPSB0aGlzLmNvbnZlcnRlcihwcm90b1ZhbHVlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMuZmllbGRWYWx1ZUNhY2hlLnNldChjYW5vbmljYWxQYXRoLCBmaWVsZFZhbHVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gZmllbGRWYWx1ZTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgRG9jdW1lbnQucHJvdG90eXBlLmRhdGEgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBpZiAoIXRoaXMub2JqZWN0VmFsdWUpIHtcclxuICAgICAgICAgICAgdmFyIHJlc3VsdF8xID0gT2JqZWN0VmFsdWUuRU1QVFk7XHJcbiAgICAgICAgICAgIGZvckVhY2godGhpcy5wcm90by5maWVsZHMgfHwge30sIGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICByZXN1bHRfMSA9IHJlc3VsdF8xLnNldChuZXcgRmllbGRQYXRoKFtrZXldKSwgX3RoaXMuY29udmVydGVyKHZhbHVlKSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB0aGlzLm9iamVjdFZhbHVlID0gcmVzdWx0XzE7XHJcbiAgICAgICAgICAgIC8vIE9uY2Ugb2JqZWN0VmFsdWUgaXMgY29tcHV0ZWQsIHZhbHVlcyBpbnNpZGUgdGhlIGZpZWxkVmFsdWVDYWNoZSBhcmUgbm9cclxuICAgICAgICAgICAgLy8gbG9uZ2VyIGFjY2Vzc2VkLlxyXG4gICAgICAgICAgICB0aGlzLmZpZWxkVmFsdWVDYWNoZSA9IHVuZGVmaW5lZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMub2JqZWN0VmFsdWU7XHJcbiAgICB9O1xyXG4gICAgRG9jdW1lbnQucHJvdG90eXBlLnZhbHVlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRhdGEoKS52YWx1ZSgpO1xyXG4gICAgfTtcclxuICAgIERvY3VtZW50LnByb3RvdHlwZS5pc0VxdWFsID0gZnVuY3Rpb24gKG90aGVyKSB7XHJcbiAgICAgICAgcmV0dXJuIChvdGhlciBpbnN0YW5jZW9mIERvY3VtZW50ICYmXHJcbiAgICAgICAgICAgIHRoaXMua2V5LmlzRXF1YWwob3RoZXIua2V5KSAmJlxyXG4gICAgICAgICAgICB0aGlzLnZlcnNpb24uaXNFcXVhbChvdGhlci52ZXJzaW9uKSAmJlxyXG4gICAgICAgICAgICB0aGlzLmhhc0xvY2FsTXV0YXRpb25zID09PSBvdGhlci5oYXNMb2NhbE11dGF0aW9ucyAmJlxyXG4gICAgICAgICAgICB0aGlzLmhhc0NvbW1pdHRlZE11dGF0aW9ucyA9PT0gb3RoZXIuaGFzQ29tbWl0dGVkTXV0YXRpb25zICYmXHJcbiAgICAgICAgICAgIHRoaXMuZGF0YSgpLmlzRXF1YWwob3RoZXIuZGF0YSgpKSk7XHJcbiAgICB9O1xyXG4gICAgRG9jdW1lbnQucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiAoXCJEb2N1bWVudChcIiArIHRoaXMua2V5ICsgXCIsIFwiICsgdGhpcy52ZXJzaW9uICsgXCIsIFwiICsgdGhpcy5kYXRhKCkudG9TdHJpbmcoKSArIFwiLCBcIiArXHJcbiAgICAgICAgICAgIChcIntoYXNMb2NhbE11dGF0aW9uczogXCIgKyB0aGlzLmhhc0xvY2FsTXV0YXRpb25zICsgXCJ9KSwgXCIpICtcclxuICAgICAgICAgICAgKFwie2hhc0NvbW1pdHRlZE11dGF0aW9uczogXCIgKyB0aGlzLmhhc0NvbW1pdHRlZE11dGF0aW9ucyArIFwifSlcIikpO1xyXG4gICAgfTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShEb2N1bWVudC5wcm90b3R5cGUsIFwiaGFzUGVuZGluZ1dyaXRlc1wiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmhhc0xvY2FsTXV0YXRpb25zIHx8IHRoaXMuaGFzQ29tbWl0dGVkTXV0YXRpb25zO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSBuZXN0ZWQgUHJvdG9idWYgdmFsdWUgZm9yICdwYXRoYC4gQ2FuIG9ubHkgYmUgY2FsbGVkIGlmXHJcbiAgICAgKiBgcHJvdG9gIHdhcyBwcm92aWRlZCBhdCBjb25zdHJ1Y3Rpb24gdGltZS5cclxuICAgICAqL1xyXG4gICAgRG9jdW1lbnQucHJvdG90eXBlLmdldFByb3RvRmllbGQgPSBmdW5jdGlvbiAocGF0aCkge1xyXG4gICAgICAgIGFzc2VydCh0aGlzLnByb3RvICE9PSB1bmRlZmluZWQsICdDYW4gb25seSBjYWxsIGdldFByb3RvRmllbGQoKSB3aGVuIHByb3RvIGlzIGRlZmluZWQnKTtcclxuICAgICAgICB2YXIgcHJvdG9WYWx1ZSA9IHRoaXMucHJvdG8uZmllbGRzXHJcbiAgICAgICAgICAgID8gdGhpcy5wcm90by5maWVsZHNbcGF0aC5maXJzdFNlZ21lbnQoKV1cclxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBwYXRoLmxlbmd0aDsgKytpKSB7XHJcbiAgICAgICAgICAgIGlmICghcHJvdG9WYWx1ZSB8fCAhcHJvdG9WYWx1ZS5tYXBWYWx1ZSB8fCAhcHJvdG9WYWx1ZS5tYXBWYWx1ZS5maWVsZHMpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcHJvdG9WYWx1ZSA9IHByb3RvVmFsdWUubWFwVmFsdWUuZmllbGRzW3BhdGguZ2V0KGkpXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHByb3RvVmFsdWU7XHJcbiAgICB9O1xyXG4gICAgRG9jdW1lbnQuY29tcGFyZUJ5RmllbGQgPSBmdW5jdGlvbiAoZmllbGQsIGQxLCBkMikge1xyXG4gICAgICAgIHZhciB2MSA9IGQxLmZpZWxkKGZpZWxkKTtcclxuICAgICAgICB2YXIgdjIgPSBkMi5maWVsZChmaWVsZCk7XHJcbiAgICAgICAgaWYgKHYxICE9PSBudWxsICYmIHYyICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB2MS5jb21wYXJlVG8odjIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhaWwoXCJUcnlpbmcgdG8gY29tcGFyZSBkb2N1bWVudHMgb24gZmllbGRzIHRoYXQgZG9uJ3QgZXhpc3RcIik7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHJldHVybiBEb2N1bWVudDtcclxufShNYXliZURvY3VtZW50KSk7XHJcbi8qKlxyXG4gKiBBIGNsYXNzIHJlcHJlc2VudGluZyBhIGRlbGV0ZWQgZG9jdW1lbnQuXHJcbiAqIFZlcnNpb24gaXMgc2V0IHRvIDAgaWYgd2UgZG9uJ3QgcG9pbnQgdG8gYW55IHNwZWNpZmljIHRpbWUsIG90aGVyd2lzZSBpdFxyXG4gKiBkZW5vdGVzIHRpbWUgd2Uga25vdyBpdCBkaWRuJ3QgZXhpc3QgYXQuXHJcbiAqL1xyXG52YXIgTm9Eb2N1bWVudCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIHRzbGliLl9fZXh0ZW5kcyhOb0RvY3VtZW50LCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gTm9Eb2N1bWVudChrZXksIHZlcnNpb24sIG9wdGlvbnMpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBrZXksIHZlcnNpb24pIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMuaGFzQ29tbWl0dGVkTXV0YXRpb25zID0gISEob3B0aW9ucyAmJiBvcHRpb25zLmhhc0NvbW1pdHRlZE11dGF0aW9ucyk7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgTm9Eb2N1bWVudC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIFwiTm9Eb2N1bWVudChcIiArIHRoaXMua2V5ICsgXCIsIFwiICsgdGhpcy52ZXJzaW9uICsgXCIpXCI7XHJcbiAgICB9O1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5vRG9jdW1lbnQucHJvdG90eXBlLCBcImhhc1BlbmRpbmdXcml0ZXNcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5oYXNDb21taXR0ZWRNdXRhdGlvbnM7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBOb0RvY3VtZW50LnByb3RvdHlwZS5pc0VxdWFsID0gZnVuY3Rpb24gKG90aGVyKSB7XHJcbiAgICAgICAgcmV0dXJuIChvdGhlciBpbnN0YW5jZW9mIE5vRG9jdW1lbnQgJiZcclxuICAgICAgICAgICAgb3RoZXIuaGFzQ29tbWl0dGVkTXV0YXRpb25zID09PSB0aGlzLmhhc0NvbW1pdHRlZE11dGF0aW9ucyAmJlxyXG4gICAgICAgICAgICBvdGhlci52ZXJzaW9uLmlzRXF1YWwodGhpcy52ZXJzaW9uKSAmJlxyXG4gICAgICAgICAgICBvdGhlci5rZXkuaXNFcXVhbCh0aGlzLmtleSkpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBOb0RvY3VtZW50O1xyXG59KE1heWJlRG9jdW1lbnQpKTtcclxuLyoqXHJcbiAqIEEgY2xhc3MgcmVwcmVzZW50aW5nIGFuIGV4aXN0aW5nIGRvY3VtZW50IHdob3NlIGRhdGEgaXMgdW5rbm93biAoZS5nLiBhXHJcbiAqIGRvY3VtZW50IHRoYXQgd2FzIHVwZGF0ZWQgd2l0aG91dCBhIGtub3duIGJhc2UgZG9jdW1lbnQpLlxyXG4gKi9cclxudmFyIFVua25vd25Eb2N1bWVudCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIHRzbGliLl9fZXh0ZW5kcyhVbmtub3duRG9jdW1lbnQsIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBVbmtub3duRG9jdW1lbnQoKSB7XHJcbiAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xyXG4gICAgfVxyXG4gICAgVW5rbm93bkRvY3VtZW50LnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gXCJVbmtub3duRG9jdW1lbnQoXCIgKyB0aGlzLmtleSArIFwiLCBcIiArIHRoaXMudmVyc2lvbiArIFwiKVwiO1xyXG4gICAgfTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShVbmtub3duRG9jdW1lbnQucHJvdG90eXBlLCBcImhhc1BlbmRpbmdXcml0ZXNcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIFVua25vd25Eb2N1bWVudC5wcm90b3R5cGUuaXNFcXVhbCA9IGZ1bmN0aW9uIChvdGhlcikge1xyXG4gICAgICAgIHJldHVybiAob3RoZXIgaW5zdGFuY2VvZiBVbmtub3duRG9jdW1lbnQgJiZcclxuICAgICAgICAgICAgb3RoZXIudmVyc2lvbi5pc0VxdWFsKHRoaXMudmVyc2lvbikgJiZcclxuICAgICAgICAgICAgb3RoZXIua2V5LmlzRXF1YWwodGhpcy5rZXkpKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gVW5rbm93bkRvY3VtZW50O1xyXG59KE1heWJlRG9jdW1lbnQpKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBBIG1hcCBpbXBsZW1lbnRhdGlvbiB0aGF0IHVzZXMgb2JqZWN0cyBhcyBrZXlzLiBPYmplY3RzIG11c3QgaW1wbGVtZW50IHRoZVxyXG4gKiBFcXVhdGFibGUgaW50ZXJmYWNlIGFuZCBtdXN0IGJlIGltbXV0YWJsZS4gRW50cmllcyBpbiB0aGUgbWFwIGFyZSBzdG9yZWRcclxuICogdG9nZXRoZXIgd2l0aCB0aGUga2V5IGJlaW5nIHByb2R1Y2VkIGZyb20gdGhlIG1hcEtleUZuLiBUaGlzIG1hcFxyXG4gKiBhdXRvbWF0aWNhbGx5IGhhbmRsZXMgY29sbGlzaW9ucyBvZiBrZXlzLlxyXG4gKi9cclxudmFyIE9iamVjdE1hcCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIE9iamVjdE1hcChtYXBLZXlGbikge1xyXG4gICAgICAgIHRoaXMubWFwS2V5Rm4gPSBtYXBLZXlGbjtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBUaGUgaW5uZXIgbWFwIGZvciBhIGtleSAtPiB2YWx1ZSBwYWlyLiBEdWUgdG8gdGhlIHBvc3NpYmlsaXR5IG9mXHJcbiAgICAgICAgICogY29sbGlzaW9ucyB3ZSBrZWVwIGEgbGlzdCBvZiBlbnRyaWVzIHRoYXQgd2UgZG8gYSBsaW5lYXIgc2VhcmNoIHRocm91Z2hcclxuICAgICAgICAgKiB0byBmaW5kIGFuIGFjdHVhbCBtYXRjaC4gTm90ZSB0aGF0IGNvbGxpc2lvbnMgc2hvdWxkIGJlIHJhcmUsIHNvIHdlIHN0aWxsXHJcbiAgICAgICAgICogZXhwZWN0IG5lYXIgY29uc3RhbnQgdGltZSBsb29rdXBzIGluIHByYWN0aWNlLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuaW5uZXIgPSB7fTtcclxuICAgIH1cclxuICAgIC8qKiBHZXQgYSB2YWx1ZSBmb3IgdGhpcyBrZXksIG9yIHVuZGVmaW5lZCBpZiBpdCBkb2VzIG5vdCBleGlzdC4gKi9cclxuICAgIE9iamVjdE1hcC5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgIHZhciBpZCA9IHRoaXMubWFwS2V5Rm4oa2V5KTtcclxuICAgICAgICB2YXIgbWF0Y2hlcyA9IHRoaXMuaW5uZXJbaWRdO1xyXG4gICAgICAgIGlmIChtYXRjaGVzID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBtYXRjaGVzXzEgPSBtYXRjaGVzOyBfaSA8IG1hdGNoZXNfMS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgdmFyIF9hID0gbWF0Y2hlc18xW19pXSwgb3RoZXJLZXkgPSBfYVswXSwgdmFsdWUgPSBfYVsxXTtcclxuICAgICAgICAgICAgaWYgKG90aGVyS2V5LmlzRXF1YWwoa2V5KSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICB9O1xyXG4gICAgT2JqZWN0TWFwLnByb3RvdHlwZS5oYXMgPSBmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0KGtleSkgIT09IHVuZGVmaW5lZDtcclxuICAgIH07XHJcbiAgICAvKiogUHV0IHRoaXMga2V5IGFuZCB2YWx1ZSBpbiB0aGUgbWFwLiAqL1xyXG4gICAgT2JqZWN0TWFwLnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xyXG4gICAgICAgIHZhciBpZCA9IHRoaXMubWFwS2V5Rm4oa2V5KTtcclxuICAgICAgICB2YXIgbWF0Y2hlcyA9IHRoaXMuaW5uZXJbaWRdO1xyXG4gICAgICAgIGlmIChtYXRjaGVzID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5pbm5lcltpZF0gPSBbW2tleSwgdmFsdWVdXTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1hdGNoZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKG1hdGNoZXNbaV1bMF0uaXNFcXVhbChrZXkpKSB7XHJcbiAgICAgICAgICAgICAgICBtYXRjaGVzW2ldID0gW2tleSwgdmFsdWVdO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIG1hdGNoZXMucHVzaChba2V5LCB2YWx1ZV0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmVtb3ZlIHRoaXMga2V5IGZyb20gdGhlIG1hcC4gUmV0dXJucyBhIGJvb2xlYW4gaWYgYW55dGhpbmcgd2FzIGRlbGV0ZWQuXHJcbiAgICAgKi9cclxuICAgIE9iamVjdE1hcC5wcm90b3R5cGUuZGVsZXRlID0gZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgIHZhciBpZCA9IHRoaXMubWFwS2V5Rm4oa2V5KTtcclxuICAgICAgICB2YXIgbWF0Y2hlcyA9IHRoaXMuaW5uZXJbaWRdO1xyXG4gICAgICAgIGlmIChtYXRjaGVzID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1hdGNoZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKG1hdGNoZXNbaV1bMF0uaXNFcXVhbChrZXkpKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAobWF0Y2hlcy5sZW5ndGggPT09IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5pbm5lcltpZF07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBtYXRjaGVzLnNwbGljZShpLCAxKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH07XHJcbiAgICBPYmplY3RNYXAucHJvdG90eXBlLmZvckVhY2ggPSBmdW5jdGlvbiAoZm4pIHtcclxuICAgICAgICBmb3JFYWNoKHRoaXMuaW5uZXIsIGZ1bmN0aW9uIChfLCBlbnRyaWVzKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgZW50cmllc18xID0gZW50cmllczsgX2kgPCBlbnRyaWVzXzEubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgX2EgPSBlbnRyaWVzXzFbX2ldLCBrID0gX2FbMF0sIHYgPSBfYVsxXTtcclxuICAgICAgICAgICAgICAgIGZuKGssIHYpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgT2JqZWN0TWFwLnByb3RvdHlwZS5pc0VtcHR5ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBpc0VtcHR5KHRoaXMuaW5uZXIpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBPYmplY3RNYXA7XHJcbn0oKSk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQW4gaW4tbWVtb3J5IGJ1ZmZlciBvZiBlbnRyaWVzIHRvIGJlIHdyaXR0ZW4gdG8gYSBSZW1vdGVEb2N1bWVudENhY2hlLlxyXG4gKiBJdCBjYW4gYmUgdXNlZCB0byBiYXRjaCB1cCBhIHNldCBvZiBjaGFuZ2VzIHRvIGJlIHdyaXR0ZW4gdG8gdGhlIGNhY2hlLCBidXRcclxuICogYWRkaXRpb25hbGx5IHN1cHBvcnRzIHJlYWRpbmcgZW50cmllcyBiYWNrIHdpdGggdGhlIGBnZXRFbnRyeSgpYCBtZXRob2QsXHJcbiAqIGZhbGxpbmcgYmFjayB0byB0aGUgdW5kZXJseWluZyBSZW1vdGVEb2N1bWVudENhY2hlIGlmIG5vIGVudHJ5IGlzXHJcbiAqIGJ1ZmZlcmVkLlxyXG4gKlxyXG4gKiBFbnRyaWVzIGFkZGVkIHRvIHRoZSBjYWNoZSAqbXVzdCogYmUgcmVhZCBmaXJzdC4gVGhpcyBpcyB0byBmYWNpbGl0YXRlXHJcbiAqIGNhbGN1bGF0aW5nIHRoZSBzaXplIGRlbHRhIG9mIHRoZSBwZW5kaW5nIGNoYW5nZXMuXHJcbiAqXHJcbiAqIFBPUlRJTkcgTk9URTogVGhpcyBjbGFzcyB3YXMgaW1wbGVtZW50ZWQgdGhlbiByZW1vdmVkIGZyb20gb3RoZXIgcGxhdGZvcm1zLlxyXG4gKiBJZiBieXRlLWNvdW50aW5nIGVuZHMgdXAgYmVpbmcgbmVlZGVkIG9uIHRoZSBvdGhlciBwbGF0Zm9ybXMsIGNvbnNpZGVyXHJcbiAqIHBvcnRpbmcgdGhpcyBjbGFzcyBhcyBwYXJ0IG9mIHRoYXQgaW1wbGVtZW50YXRpb24gd29yay5cclxuICovXHJcbnZhciBSZW1vdGVEb2N1bWVudENoYW5nZUJ1ZmZlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFJlbW90ZURvY3VtZW50Q2hhbmdlQnVmZmVyKCkge1xyXG4gICAgICAgIC8vIEEgbWFwcGluZyBvZiBkb2N1bWVudCBrZXkgdG8gdGhlIG5ldyBjYWNoZSBlbnRyeSB0aGF0IHNob3VsZCBiZSB3cml0dGVuIChvciBudWxsIGlmIGFueVxyXG4gICAgICAgIC8vIGV4aXN0aW5nIGNhY2hlIGVudHJ5IHNob3VsZCBiZSByZW1vdmVkKS5cclxuICAgICAgICB0aGlzLmNoYW5nZXMgPSBuZXcgT2JqZWN0TWFwKGZ1bmN0aW9uIChrZXkpIHsgcmV0dXJuIGtleS50b1N0cmluZygpOyB9KTtcclxuICAgICAgICB0aGlzLmNoYW5nZXNBcHBsaWVkID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoUmVtb3RlRG9jdW1lbnRDaGFuZ2VCdWZmZXIucHJvdG90eXBlLCBcInJlYWRUaW1lXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgYXNzZXJ0KHRoaXMuX3JlYWRUaW1lICE9PSB1bmRlZmluZWQsICdSZWFkIHRpbWUgaXMgbm90IHNldC4gQWxsIHJlbW92ZUVudHJ5KCkgY2FsbHMgbXVzdCBpbmNsdWRlIGEgcmVhZFRpbWUgaWYgYHRyYWNrUmVtb3ZhbHNgIGlzIHVzZWQuJyk7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9yZWFkVGltZTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgICAgICAgIC8vIFJpZ2h0IG5vdyAoZm9yIHNpbXBsaWNpdHkpIHdlIGp1c3QgdHJhY2sgYSBzaW5nbGUgcmVhZFRpbWUgZm9yIGFsbCB0aGVcclxuICAgICAgICAgICAgLy8gYWRkZWQgZW50cmllcyBzaW5jZSB3ZSBleHBlY3QgdGhlbSB0byBhbGwgYmUgdGhlIHNhbWUsIGJ1dCB3ZSBjb3VsZFxyXG4gICAgICAgICAgICAvLyByZXdvcmsgdG8gc3RvcmUgcGVyLWVudHJ5IHJlYWRUaW1lcyBpZiBuZWNlc3NhcnkuXHJcbiAgICAgICAgICAgIGFzc2VydCh0aGlzLl9yZWFkVGltZSA9PT0gdW5kZWZpbmVkIHx8IHRoaXMuX3JlYWRUaW1lLmlzRXF1YWwodmFsdWUpLCAnQWxsIGNoYW5nZXMgaW4gYSBSZW1vdGVEb2N1bWVudENoYW5nZUJ1ZmZlciBtdXN0IGhhdmUgdGhlIHNhbWUgcmVhZCB0aW1lJyk7XHJcbiAgICAgICAgICAgIHRoaXMuX3JlYWRUaW1lID0gdmFsdWU7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICAvKipcclxuICAgICAqIEJ1ZmZlcnMgYSBgUmVtb3RlRG9jdW1lbnRDYWNoZS5hZGRFbnRyeSgpYCBjYWxsLlxyXG4gICAgICpcclxuICAgICAqIFlvdSBjYW4gb25seSBtb2RpZnkgZG9jdW1lbnRzIHRoYXQgaGF2ZSBhbHJlYWR5IGJlZW4gcmV0cmlldmVkIHZpYVxyXG4gICAgICogYGdldEVudHJ5KCkvZ2V0RW50cmllcygpYCAoZW5mb3JjZWQgdmlhIEluZGV4ZWREYnMgYGFwcGx5KClgKS5cclxuICAgICAqL1xyXG4gICAgUmVtb3RlRG9jdW1lbnRDaGFuZ2VCdWZmZXIucHJvdG90eXBlLmFkZEVudHJ5ID0gZnVuY3Rpb24gKG1heWJlRG9jdW1lbnQsIHJlYWRUaW1lKSB7XHJcbiAgICAgICAgdGhpcy5hc3NlcnROb3RBcHBsaWVkKCk7XHJcbiAgICAgICAgdGhpcy5yZWFkVGltZSA9IHJlYWRUaW1lO1xyXG4gICAgICAgIHRoaXMuY2hhbmdlcy5zZXQobWF5YmVEb2N1bWVudC5rZXksIG1heWJlRG9jdW1lbnQpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQnVmZmVycyBhIGBSZW1vdGVEb2N1bWVudENhY2hlLnJlbW92ZUVudHJ5KClgIGNhbGwuXHJcbiAgICAgKlxyXG4gICAgICogWW91IGNhbiBvbmx5IHJlbW92ZSBkb2N1bWVudHMgdGhhdCBoYXZlIGFscmVhZHkgYmVlbiByZXRyaWV2ZWQgdmlhXHJcbiAgICAgKiBgZ2V0RW50cnkoKS9nZXRFbnRyaWVzKClgIChlbmZvcmNlZCB2aWEgSW5kZXhlZERicyBgYXBwbHkoKWApLlxyXG4gICAgICovXHJcbiAgICBSZW1vdGVEb2N1bWVudENoYW5nZUJ1ZmZlci5wcm90b3R5cGUucmVtb3ZlRW50cnkgPSBmdW5jdGlvbiAoa2V5LCByZWFkVGltZSkge1xyXG4gICAgICAgIHRoaXMuYXNzZXJ0Tm90QXBwbGllZCgpO1xyXG4gICAgICAgIGlmIChyZWFkVGltZSkge1xyXG4gICAgICAgICAgICB0aGlzLnJlYWRUaW1lID0gcmVhZFRpbWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuY2hhbmdlcy5zZXQoa2V5LCBudWxsKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIExvb2tzIHVwIGFuIGVudHJ5IGluIHRoZSBjYWNoZS4gVGhlIGJ1ZmZlcmVkIGNoYW5nZXMgd2lsbCBmaXJzdCBiZSBjaGVja2VkLFxyXG4gICAgICogYW5kIGlmIG5vIGJ1ZmZlcmVkIGNoYW5nZSBhcHBsaWVzLCB0aGlzIHdpbGwgZm9yd2FyZCB0b1xyXG4gICAgICogYFJlbW90ZURvY3VtZW50Q2FjaGUuZ2V0RW50cnkoKWAuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHRyYW5zYWN0aW9uIFRoZSB0cmFuc2FjdGlvbiBpbiB3aGljaCB0byBwZXJmb3JtIGFueSBwZXJzaXN0ZW5jZVxyXG4gICAgICogICAgIG9wZXJhdGlvbnMuXHJcbiAgICAgKiBAcGFyYW0gZG9jdW1lbnRLZXkgVGhlIGtleSBvZiB0aGUgZW50cnkgdG8gbG9vayB1cC5cclxuICAgICAqIEByZXR1cm4gVGhlIGNhY2hlZCBEb2N1bWVudCBvciBOb0RvY3VtZW50IGVudHJ5LCBvciBudWxsIGlmIHdlIGhhdmUgbm90aGluZ1xyXG4gICAgICogY2FjaGVkLlxyXG4gICAgICovXHJcbiAgICBSZW1vdGVEb2N1bWVudENoYW5nZUJ1ZmZlci5wcm90b3R5cGUuZ2V0RW50cnkgPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24sIGRvY3VtZW50S2V5KSB7XHJcbiAgICAgICAgdGhpcy5hc3NlcnROb3RBcHBsaWVkKCk7XHJcbiAgICAgICAgdmFyIGJ1ZmZlcmVkRW50cnkgPSB0aGlzLmNoYW5nZXMuZ2V0KGRvY3VtZW50S2V5KTtcclxuICAgICAgICBpZiAoYnVmZmVyZWRFbnRyeSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZShidWZmZXJlZEVudHJ5KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldEZyb21DYWNoZSh0cmFuc2FjdGlvbiwgZG9jdW1lbnRLZXkpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIExvb2tzIHVwIHNldmVyYWwgZW50cmllcyBpbiB0aGUgY2FjaGUsIGZvcndhcmRpbmcgdG9cclxuICAgICAqIGBSZW1vdGVEb2N1bWVudENhY2hlLmdldEVudHJ5KClgLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB0cmFuc2FjdGlvbiBUaGUgdHJhbnNhY3Rpb24gaW4gd2hpY2ggdG8gcGVyZm9ybSBhbnkgcGVyc2lzdGVuY2VcclxuICAgICAqICAgICBvcGVyYXRpb25zLlxyXG4gICAgICogQHBhcmFtIGRvY3VtZW50S2V5cyBUaGUga2V5cyBvZiB0aGUgZW50cmllcyB0byBsb29rIHVwLlxyXG4gICAgICogQHJldHVybiBBIG1hcCBvZiBjYWNoZWQgYERvY3VtZW50YHMgb3IgYE5vRG9jdW1lbnRgcywgaW5kZXhlZCBieSBrZXkuIElmIGFuXHJcbiAgICAgKiAgICAgZW50cnkgY2Fubm90IGJlIGZvdW5kLCB0aGUgY29ycmVzcG9uZGluZyBrZXkgd2lsbCBiZSBtYXBwZWQgdG8gYSBudWxsXHJcbiAgICAgKiAgICAgdmFsdWUuXHJcbiAgICAgKi9cclxuICAgIFJlbW90ZURvY3VtZW50Q2hhbmdlQnVmZmVyLnByb3RvdHlwZS5nZXRFbnRyaWVzID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCBkb2N1bWVudEtleXMpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRBbGxGcm9tQ2FjaGUodHJhbnNhY3Rpb24sIGRvY3VtZW50S2V5cyk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBBcHBsaWVzIGJ1ZmZlcmVkIGNoYW5nZXMgdG8gdGhlIHVuZGVybHlpbmcgUmVtb3RlRG9jdW1lbnRDYWNoZSwgdXNpbmdcclxuICAgICAqIHRoZSBwcm92aWRlZCB0cmFuc2FjdGlvbi5cclxuICAgICAqL1xyXG4gICAgUmVtb3RlRG9jdW1lbnRDaGFuZ2VCdWZmZXIucHJvdG90eXBlLmFwcGx5ID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uKSB7XHJcbiAgICAgICAgdGhpcy5hc3NlcnROb3RBcHBsaWVkKCk7XHJcbiAgICAgICAgdGhpcy5jaGFuZ2VzQXBwbGllZCA9IHRydWU7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYXBwbHlDaGFuZ2VzKHRyYW5zYWN0aW9uKTtcclxuICAgIH07XHJcbiAgICAvKiogSGVscGVyIHRvIGFzc2VydCB0aGlzLmNoYW5nZXMgaXMgbm90IG51bGwgICovXHJcbiAgICBSZW1vdGVEb2N1bWVudENoYW5nZUJ1ZmZlci5wcm90b3R5cGUuYXNzZXJ0Tm90QXBwbGllZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBhc3NlcnQoIXRoaXMuY2hhbmdlc0FwcGxpZWQsICdDaGFuZ2VzIGhhdmUgYWxyZWFkeSBiZWVuIGFwcGxpZWQuJyk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFJlbW90ZURvY3VtZW50Q2hhbmdlQnVmZmVyO1xyXG59KCkpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxudmFyIEluZGV4ZWREYlJlbW90ZURvY3VtZW50Q2FjaGUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSB7TG9jYWxTZXJpYWxpemVyfSBzZXJpYWxpemVyIFRoZSBkb2N1bWVudCBzZXJpYWxpemVyLlxyXG4gICAgICogQHBhcmFtIHtJbmRleE1hbmFnZXJ9IGluZGV4TWFuYWdlciBUaGUgcXVlcnkgaW5kZXhlcyB0aGF0IG5lZWQgdG8gYmUgbWFpbnRhaW5lZC5cclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gSW5kZXhlZERiUmVtb3RlRG9jdW1lbnRDYWNoZShzZXJpYWxpemVyLCBpbmRleE1hbmFnZXIpIHtcclxuICAgICAgICB0aGlzLnNlcmlhbGl6ZXIgPSBzZXJpYWxpemVyO1xyXG4gICAgICAgIHRoaXMuaW5kZXhNYW5hZ2VyID0gaW5kZXhNYW5hZ2VyO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBBZGRzIHRoZSBzdXBwbGllZCBlbnRyaWVzIHRvIHRoZSBjYWNoZS5cclxuICAgICAqXHJcbiAgICAgKiBBbGwgY2FsbHMgb2YgYGFkZEVudHJ5YCBhcmUgcmVxdWlyZWQgdG8gZ28gdGhyb3VnaCB0aGUgUmVtb3RlRG9jdW1lbnRDaGFuZ2VCdWZmZXJcclxuICAgICAqIHJldHVybmVkIGJ5IGBuZXdDaGFuZ2VCdWZmZXIoKWAgdG8gZW5zdXJlIHByb3BlciBhY2NvdW50aW5nIG9mIG1ldGFkYXRhLlxyXG4gICAgICovXHJcbiAgICBJbmRleGVkRGJSZW1vdGVEb2N1bWVudENhY2hlLnByb3RvdHlwZS5hZGRFbnRyeSA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwga2V5LCBkb2MpIHtcclxuICAgICAgICB2YXIgZG9jdW1lbnRTdG9yZSA9IHJlbW90ZURvY3VtZW50c1N0b3JlKHRyYW5zYWN0aW9uKTtcclxuICAgICAgICByZXR1cm4gZG9jdW1lbnRTdG9yZS5wdXQoZGJLZXkoa2V5KSwgZG9jKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJlbW92ZXMgYSBkb2N1bWVudCBmcm9tIHRoZSBjYWNoZS5cclxuICAgICAqXHJcbiAgICAgKiBBbGwgY2FsbHMgb2YgYHJlbW92ZUVudHJ5YCAgYXJlIHJlcXVpcmVkIHRvIGdvIHRocm91Z2ggdGhlIFJlbW90ZURvY3VtZW50Q2hhbmdlQnVmZmVyXHJcbiAgICAgKiByZXR1cm5lZCBieSBgbmV3Q2hhbmdlQnVmZmVyKClgIHRvIGVuc3VyZSBwcm9wZXIgYWNjb3VudGluZyBvZiBtZXRhZGF0YS5cclxuICAgICAqL1xyXG4gICAgSW5kZXhlZERiUmVtb3RlRG9jdW1lbnRDYWNoZS5wcm90b3R5cGUucmVtb3ZlRW50cnkgPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24sIGRvY3VtZW50S2V5KSB7XHJcbiAgICAgICAgdmFyIHN0b3JlID0gcmVtb3RlRG9jdW1lbnRzU3RvcmUodHJhbnNhY3Rpb24pO1xyXG4gICAgICAgIHZhciBrZXkgPSBkYktleShkb2N1bWVudEtleSk7XHJcbiAgICAgICAgcmV0dXJuIHN0b3JlLmRlbGV0ZShrZXkpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogVXBkYXRlcyB0aGUgY3VycmVudCBjYWNoZSBzaXplLlxyXG4gICAgICpcclxuICAgICAqIENhbGxlcnMgdG8gYGFkZEVudHJ5KClgIGFuZCBgcmVtb3ZlRW50cnkoKWAgKm11c3QqIGNhbGwgdGhpcyBhZnRlcndhcmRzIHRvIHVwZGF0ZSB0aGVcclxuICAgICAqIGNhY2hlJ3MgbWV0YWRhdGEuXHJcbiAgICAgKi9cclxuICAgIEluZGV4ZWREYlJlbW90ZURvY3VtZW50Q2FjaGUucHJvdG90eXBlLnVwZGF0ZU1ldGFkYXRhID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCBzaXplRGVsdGEpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldE1ldGFkYXRhKHRyYW5zYWN0aW9uKS5uZXh0KGZ1bmN0aW9uIChtZXRhZGF0YSkge1xyXG4gICAgICAgICAgICBtZXRhZGF0YS5ieXRlU2l6ZSArPSBzaXplRGVsdGE7XHJcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5zZXRNZXRhZGF0YSh0cmFuc2FjdGlvbiwgbWV0YWRhdGEpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIEluZGV4ZWREYlJlbW90ZURvY3VtZW50Q2FjaGUucHJvdG90eXBlLmdldEVudHJ5ID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCBkb2N1bWVudEtleSkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIHJlbW90ZURvY3VtZW50c1N0b3JlKHRyYW5zYWN0aW9uKVxyXG4gICAgICAgICAgICAuZ2V0KGRiS2V5KGRvY3VtZW50S2V5KSlcclxuICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKGRiUmVtb3RlRG9jKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5tYXliZURlY29kZURvY3VtZW50KGRiUmVtb3RlRG9jKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIExvb2tzIHVwIGFuIGVudHJ5IGluIHRoZSBjYWNoZS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gZG9jdW1lbnRLZXkgVGhlIGtleSBvZiB0aGUgZW50cnkgdG8gbG9vayB1cC5cclxuICAgICAqIEByZXR1cm4gVGhlIGNhY2hlZCBNYXliZURvY3VtZW50IGVudHJ5IGFuZCBpdHMgc2l6ZSwgb3IgbnVsbCBpZiB3ZSBoYXZlIG5vdGhpbmcgY2FjaGVkLlxyXG4gICAgICovXHJcbiAgICBJbmRleGVkRGJSZW1vdGVEb2N1bWVudENhY2hlLnByb3RvdHlwZS5nZXRTaXplZEVudHJ5ID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCBkb2N1bWVudEtleSkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIHJlbW90ZURvY3VtZW50c1N0b3JlKHRyYW5zYWN0aW9uKVxyXG4gICAgICAgICAgICAuZ2V0KGRiS2V5KGRvY3VtZW50S2V5KSlcclxuICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKGRiUmVtb3RlRG9jKSB7XHJcbiAgICAgICAgICAgIHZhciBkb2MgPSBfdGhpcy5tYXliZURlY29kZURvY3VtZW50KGRiUmVtb3RlRG9jKTtcclxuICAgICAgICAgICAgcmV0dXJuIGRvY1xyXG4gICAgICAgICAgICAgICAgPyB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWF5YmVEb2N1bWVudDogZG9jLFxyXG4gICAgICAgICAgICAgICAgICAgIHNpemU6IGRiRG9jdW1lbnRTaXplKGRiUmVtb3RlRG9jKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgOiBudWxsO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIEluZGV4ZWREYlJlbW90ZURvY3VtZW50Q2FjaGUucHJvdG90eXBlLmdldEVudHJpZXMgPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24sIGRvY3VtZW50S2V5cykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIHJlc3VsdHMgPSBudWxsYWJsZU1heWJlRG9jdW1lbnRNYXAoKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5mb3JFYWNoRGJFbnRyeSh0cmFuc2FjdGlvbiwgZG9jdW1lbnRLZXlzLCBmdW5jdGlvbiAoa2V5LCBkYlJlbW90ZURvYykge1xyXG4gICAgICAgICAgICB2YXIgZG9jID0gX3RoaXMubWF5YmVEZWNvZGVEb2N1bWVudChkYlJlbW90ZURvYyk7XHJcbiAgICAgICAgICAgIHJlc3VsdHMgPSByZXN1bHRzLmluc2VydChrZXksIGRvYyk7XHJcbiAgICAgICAgfSkubmV4dChmdW5jdGlvbiAoKSB7IHJldHVybiByZXN1bHRzOyB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIExvb2tzIHVwIHNldmVyYWwgZW50cmllcyBpbiB0aGUgY2FjaGUuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGRvY3VtZW50S2V5cyBUaGUgc2V0IG9mIGtleXMgZW50cmllcyB0byBsb29rIHVwLlxyXG4gICAgICogQHJldHVybiBBIG1hcCBvZiBNYXliZURvY3VtZW50cyBpbmRleGVkIGJ5IGtleSAoaWYgYSBkb2N1bWVudCBjYW5ub3QgYmVcclxuICAgICAqICAgICBmb3VuZCwgdGhlIGtleSB3aWxsIGJlIG1hcHBlZCB0byBudWxsKSBhbmQgYSBtYXAgb2Ygc2l6ZXMgaW5kZXhlZCBieVxyXG4gICAgICogICAgIGtleSAoemVybyBpZiB0aGUga2V5IGNhbm5vdCBiZSBmb3VuZCkuXHJcbiAgICAgKi9cclxuICAgIEluZGV4ZWREYlJlbW90ZURvY3VtZW50Q2FjaGUucHJvdG90eXBlLmdldFNpemVkRW50cmllcyA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwgZG9jdW1lbnRLZXlzKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgcmVzdWx0cyA9IG51bGxhYmxlTWF5YmVEb2N1bWVudE1hcCgpO1xyXG4gICAgICAgIHZhciBzaXplTWFwID0gbmV3IFNvcnRlZE1hcChEb2N1bWVudEtleS5jb21wYXJhdG9yKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5mb3JFYWNoRGJFbnRyeSh0cmFuc2FjdGlvbiwgZG9jdW1lbnRLZXlzLCBmdW5jdGlvbiAoa2V5LCBkYlJlbW90ZURvYykge1xyXG4gICAgICAgICAgICB2YXIgZG9jID0gX3RoaXMubWF5YmVEZWNvZGVEb2N1bWVudChkYlJlbW90ZURvYyk7XHJcbiAgICAgICAgICAgIGlmIChkb2MpIHtcclxuICAgICAgICAgICAgICAgIHJlc3VsdHMgPSByZXN1bHRzLmluc2VydChrZXksIGRvYyk7XHJcbiAgICAgICAgICAgICAgICBzaXplTWFwID0gc2l6ZU1hcC5pbnNlcnQoa2V5LCBkYkRvY3VtZW50U2l6ZShkYlJlbW90ZURvYykpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0cyA9IHJlc3VsdHMuaW5zZXJ0KGtleSwgbnVsbCk7XHJcbiAgICAgICAgICAgICAgICBzaXplTWFwID0gc2l6ZU1hcC5pbnNlcnQoa2V5LCAwKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pLm5leHQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4geyBtYXliZURvY3VtZW50czogcmVzdWx0cywgc2l6ZU1hcDogc2l6ZU1hcCB9O1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIEluZGV4ZWREYlJlbW90ZURvY3VtZW50Q2FjaGUucHJvdG90eXBlLmZvckVhY2hEYkVudHJ5ID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCBkb2N1bWVudEtleXMsIGNhbGxiYWNrKSB7XHJcbiAgICAgICAgaWYgKGRvY3VtZW50S2V5cy5pc0VtcHR5KCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciByYW5nZSA9IElEQktleVJhbmdlLmJvdW5kKGRvY3VtZW50S2V5cy5maXJzdCgpLnBhdGgudG9BcnJheSgpLCBkb2N1bWVudEtleXMubGFzdCgpLnBhdGgudG9BcnJheSgpKTtcclxuICAgICAgICB2YXIga2V5SXRlciA9IGRvY3VtZW50S2V5cy5nZXRJdGVyYXRvcigpO1xyXG4gICAgICAgIHZhciBuZXh0S2V5ID0ga2V5SXRlci5nZXROZXh0KCk7XHJcbiAgICAgICAgcmV0dXJuIHJlbW90ZURvY3VtZW50c1N0b3JlKHRyYW5zYWN0aW9uKVxyXG4gICAgICAgICAgICAuaXRlcmF0ZSh7IHJhbmdlOiByYW5nZSB9LCBmdW5jdGlvbiAocG90ZW50aWFsS2V5UmF3LCBkYlJlbW90ZURvYywgY29udHJvbCkge1xyXG4gICAgICAgICAgICB2YXIgcG90ZW50aWFsS2V5ID0gRG9jdW1lbnRLZXkuZnJvbVNlZ21lbnRzKHBvdGVudGlhbEtleVJhdyk7XHJcbiAgICAgICAgICAgIC8vIEdvIHRocm91Z2gga2V5cyBub3QgZm91bmQgaW4gY2FjaGUuXHJcbiAgICAgICAgICAgIHdoaWxlIChuZXh0S2V5ICYmIERvY3VtZW50S2V5LmNvbXBhcmF0b3IobmV4dEtleSwgcG90ZW50aWFsS2V5KSA8IDApIHtcclxuICAgICAgICAgICAgICAgIGNhbGxiYWNrKG5leHRLZXksIG51bGwpO1xyXG4gICAgICAgICAgICAgICAgbmV4dEtleSA9IGtleUl0ZXIuZ2V0TmV4dCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChuZXh0S2V5ICYmIG5leHRLZXkuaXNFcXVhbChwb3RlbnRpYWxLZXkpKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBLZXkgZm91bmQgaW4gY2FjaGUuXHJcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhuZXh0S2V5LCBkYlJlbW90ZURvYyk7XHJcbiAgICAgICAgICAgICAgICBuZXh0S2V5ID0ga2V5SXRlci5oYXNOZXh0KCkgPyBrZXlJdGVyLmdldE5leHQoKSA6IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gU2tpcCB0byB0aGUgbmV4dCBrZXkgKGlmIHRoZXJlIGlzIG9uZSkuXHJcbiAgICAgICAgICAgIGlmIChuZXh0S2V5KSB7XHJcbiAgICAgICAgICAgICAgICBjb250cm9sLnNraXAobmV4dEtleS5wYXRoLnRvQXJyYXkoKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb250cm9sLmRvbmUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgLy8gVGhlIHJlc3Qgb2YgdGhlIGtleXMgYXJlIG5vdCBpbiB0aGUgY2FjaGUuIE9uZSBjYXNlIHdoZXJlIGBpdGVyYXRlYFxyXG4gICAgICAgICAgICAvLyBhYm92ZSB3b24ndCBnbyB0aHJvdWdoIHRoZW0gaXMgd2hlbiB0aGUgY2FjaGUgaXMgZW1wdHkuXHJcbiAgICAgICAgICAgIHdoaWxlIChuZXh0S2V5KSB7XHJcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhuZXh0S2V5LCBudWxsKTtcclxuICAgICAgICAgICAgICAgIG5leHRLZXkgPSBrZXlJdGVyLmhhc05leHQoKSA/IGtleUl0ZXIuZ2V0TmV4dCgpIDogbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIEluZGV4ZWREYlJlbW90ZURvY3VtZW50Q2FjaGUucHJvdG90eXBlLmdldERvY3VtZW50c01hdGNoaW5nUXVlcnkgPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24sIHF1ZXJ5LCBzaW5jZVJlYWRUaW1lKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBhc3NlcnQoIXF1ZXJ5LmlzQ29sbGVjdGlvbkdyb3VwUXVlcnkoKSwgJ0NvbGxlY3Rpb25Hcm91cCBxdWVyaWVzIHNob3VsZCBiZSBoYW5kbGVkIGluIExvY2FsRG9jdW1lbnRzVmlldycpO1xyXG4gICAgICAgIHZhciByZXN1bHRzID0gZG9jdW1lbnRNYXAoKTtcclxuICAgICAgICB2YXIgaW1tZWRpYXRlQ2hpbGRyZW5QYXRoTGVuZ3RoID0gcXVlcnkucGF0aC5sZW5ndGggKyAxO1xyXG4gICAgICAgIHZhciBpdGVyYXRpb25PcHRpb25zID0ge307XHJcbiAgICAgICAgaWYgKHNpbmNlUmVhZFRpbWUuaXNFcXVhbChTbmFwc2hvdFZlcnNpb24uTUlOKSkge1xyXG4gICAgICAgICAgICAvLyBEb2N1bWVudHMgYXJlIG9yZGVyZWQgYnkga2V5LCBzbyB3ZSBjYW4gdXNlIGEgcHJlZml4IHNjYW4gdG8gbmFycm93XHJcbiAgICAgICAgICAgIC8vIGRvd24gdGhlIGRvY3VtZW50cyB3ZSBuZWVkIHRvIG1hdGNoIHRoZSBxdWVyeSBhZ2FpbnN0LlxyXG4gICAgICAgICAgICB2YXIgc3RhcnRLZXkgPSBxdWVyeS5wYXRoLnRvQXJyYXkoKTtcclxuICAgICAgICAgICAgaXRlcmF0aW9uT3B0aW9ucy5yYW5nZSA9IElEQktleVJhbmdlLmxvd2VyQm91bmQoc3RhcnRLZXkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gRXhlY3V0ZSBhbiBpbmRleC1mcmVlIHF1ZXJ5IGFuZCBmaWx0ZXIgYnkgcmVhZCB0aW1lLiBUaGlzIGlzIHNhZmVcclxuICAgICAgICAgICAgLy8gc2luY2UgYWxsIGRvY3VtZW50IGNoYW5nZXMgdG8gcXVlcmllcyB0aGF0IGhhdmUgYVxyXG4gICAgICAgICAgICAvLyBsYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uIChgc2luY2VSZWFkVGltZWApIGhhdmUgYSByZWFkIHRpbWUgc2V0LlxyXG4gICAgICAgICAgICB2YXIgY29sbGVjdGlvbktleSA9IHF1ZXJ5LnBhdGgudG9BcnJheSgpO1xyXG4gICAgICAgICAgICB2YXIgcmVhZFRpbWVLZXkgPSB0aGlzLnNlcmlhbGl6ZXIudG9EYlRpbWVzdGFtcEtleShzaW5jZVJlYWRUaW1lKTtcclxuICAgICAgICAgICAgaXRlcmF0aW9uT3B0aW9ucy5yYW5nZSA9IElEQktleVJhbmdlLmxvd2VyQm91bmQoW2NvbGxlY3Rpb25LZXksIHJlYWRUaW1lS2V5XSwgXHJcbiAgICAgICAgICAgIC8qIG9wZW49ICovIHRydWUpO1xyXG4gICAgICAgICAgICBpdGVyYXRpb25PcHRpb25zLmluZGV4ID0gRGJSZW1vdGVEb2N1bWVudC5jb2xsZWN0aW9uUmVhZFRpbWVJbmRleDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlbW90ZURvY3VtZW50c1N0b3JlKHRyYW5zYWN0aW9uKVxyXG4gICAgICAgICAgICAuaXRlcmF0ZShpdGVyYXRpb25PcHRpb25zLCBmdW5jdGlvbiAoa2V5LCBkYlJlbW90ZURvYywgY29udHJvbCkge1xyXG4gICAgICAgICAgICAvLyBUaGUgcXVlcnkgaXMgYWN0dWFsbHkgcmV0dXJuaW5nIGFueSBwYXRoIHRoYXQgc3RhcnRzIHdpdGggdGhlIHF1ZXJ5XHJcbiAgICAgICAgICAgIC8vIHBhdGggcHJlZml4IHdoaWNoIG1heSBpbmNsdWRlIGRvY3VtZW50cyBpbiBzdWJjb2xsZWN0aW9ucy4gRm9yXHJcbiAgICAgICAgICAgIC8vIGV4YW1wbGUsIGEgcXVlcnkgb24gJ3Jvb21zJyB3aWxsIHJldHVybiByb29tcy9hYmMvbWVzc2FnZXMveHl4IGJ1dCB3ZVxyXG4gICAgICAgICAgICAvLyBzaG91bGRuJ3QgbWF0Y2ggaXQuIEZpeCB0aGlzIGJ5IGRpc2NhcmRpbmcgcm93cyB3aXRoIGRvY3VtZW50IGtleXNcclxuICAgICAgICAgICAgLy8gbW9yZSB0aGFuIG9uZSBzZWdtZW50IGxvbmdlciB0aGFuIHRoZSBxdWVyeSBwYXRoLlxyXG4gICAgICAgICAgICBpZiAoa2V5Lmxlbmd0aCAhPT0gaW1tZWRpYXRlQ2hpbGRyZW5QYXRoTGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIG1heWJlRG9jID0gX3RoaXMuc2VyaWFsaXplci5mcm9tRGJSZW1vdGVEb2N1bWVudChkYlJlbW90ZURvYyk7XHJcbiAgICAgICAgICAgIGlmICghcXVlcnkucGF0aC5pc1ByZWZpeE9mKG1heWJlRG9jLmtleS5wYXRoKSkge1xyXG4gICAgICAgICAgICAgICAgY29udHJvbC5kb25lKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAobWF5YmVEb2MgaW5zdGFuY2VvZiBEb2N1bWVudCAmJiBxdWVyeS5tYXRjaGVzKG1heWJlRG9jKSkge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0cyA9IHJlc3VsdHMuaW5zZXJ0KG1heWJlRG9jLmtleSwgbWF5YmVEb2MpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKCkgeyByZXR1cm4gcmVzdWx0czsgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSBzZXQgb2YgZG9jdW1lbnRzIHRoYXQgaGF2ZSBiZWVuIHVwZGF0ZWQgc2luY2UgdGhlIHNwZWNpZmllZCByZWFkXHJcbiAgICAgKiB0aW1lLlxyXG4gICAgICovXHJcbiAgICAvLyBQT1JUSU5HIE5PVEU6IFRoaXMgaXMgb25seSB1c2VkIGZvciBtdWx0aS10YWIgc3luY2hyb25pemF0aW9uLlxyXG4gICAgSW5kZXhlZERiUmVtb3RlRG9jdW1lbnRDYWNoZS5wcm90b3R5cGUuZ2V0TmV3RG9jdW1lbnRDaGFuZ2VzID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCBzaW5jZVJlYWRUaW1lKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgY2hhbmdlZERvY3MgPSBtYXliZURvY3VtZW50TWFwKCk7XHJcbiAgICAgICAgdmFyIGxhc3RSZWFkVGltZSA9IHRoaXMuc2VyaWFsaXplci50b0RiVGltZXN0YW1wS2V5KHNpbmNlUmVhZFRpbWUpO1xyXG4gICAgICAgIHZhciBkb2N1bWVudHNTdG9yZSA9IHJlbW90ZURvY3VtZW50c1N0b3JlKHRyYW5zYWN0aW9uKTtcclxuICAgICAgICB2YXIgcmFuZ2UgPSBJREJLZXlSYW5nZS5sb3dlckJvdW5kKGxhc3RSZWFkVGltZSwgdHJ1ZSk7XHJcbiAgICAgICAgcmV0dXJuIGRvY3VtZW50c1N0b3JlXHJcbiAgICAgICAgICAgIC5pdGVyYXRlKHsgaW5kZXg6IERiUmVtb3RlRG9jdW1lbnQucmVhZFRpbWVJbmRleCwgcmFuZ2U6IHJhbmdlIH0sIGZ1bmN0aW9uIChfLCBkYlJlbW90ZURvYykge1xyXG4gICAgICAgICAgICAvLyBVbmxpa2UgYGdldEVudHJ5KClgIGFuZCBvdGhlcnMsIGBnZXROZXdEb2N1bWVudENoYW5nZXMoKWAgcGFyc2VzXHJcbiAgICAgICAgICAgIC8vIHRoZSBkb2N1bWVudHMgZGlyZWN0bHkgc2luY2Ugd2Ugd2FudCB0byBrZWVwIHNlbnRpbmVsIGRlbGV0ZXMuXHJcbiAgICAgICAgICAgIHZhciBkb2MgPSBfdGhpcy5zZXJpYWxpemVyLmZyb21EYlJlbW90ZURvY3VtZW50KGRiUmVtb3RlRG9jKTtcclxuICAgICAgICAgICAgY2hhbmdlZERvY3MgPSBjaGFuZ2VkRG9jcy5pbnNlcnQoZG9jLmtleSwgZG9jKTtcclxuICAgICAgICAgICAgbGFzdFJlYWRUaW1lID0gZGJSZW1vdGVEb2MucmVhZFRpbWU7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgY2hhbmdlZERvY3M6IGNoYW5nZWREb2NzLFxyXG4gICAgICAgICAgICAgICAgcmVhZFRpbWU6IF90aGlzLnNlcmlhbGl6ZXIuZnJvbURiVGltZXN0YW1wS2V5KGxhc3RSZWFkVGltZSlcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdGhlIGxhc3QgZG9jdW1lbnQgdGhhdCBoYXMgY2hhbmdlZCwgYXMgd2VsbCBhcyB0aGUgcmVhZCB0aW1lIG9mIHRoZVxyXG4gICAgICogbGFzdCBjaGFuZ2UuIElmIG5vIGRvY3VtZW50IGhhcyBjaGFuZ2VkLCByZXR1cm5zIFNuYXBzaG90VmVyc2lvbi5NSU4uXHJcbiAgICAgKi9cclxuICAgIC8vIFBPUlRJTkcgTk9URTogVGhpcyBpcyBvbmx5IHVzZWQgZm9yIG11bHRpLXRhYiBzeW5jaHJvbml6YXRpb24uXHJcbiAgICBJbmRleGVkRGJSZW1vdGVEb2N1bWVudENhY2hlLnByb3RvdHlwZS5nZXRMYXN0RG9jdW1lbnRDaGFuZ2UgPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24pIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhciBkb2N1bWVudHNTdG9yZSA9IHJlbW90ZURvY3VtZW50c1N0b3JlKHRyYW5zYWN0aW9uKTtcclxuICAgICAgICAvLyBJZiB0aGVyZSBhcmUgbm8gZXhpc3RpbmcgZW50cmllcywgd2UgcmV0dXJuIFNuYXBzaG90VmVyc2lvbi5NSU4uXHJcbiAgICAgICAgdmFyIHJlYWRUaW1lID0gU25hcHNob3RWZXJzaW9uLk1JTjtcclxuICAgICAgICB2YXIgY2hhbmdlZERvYztcclxuICAgICAgICByZXR1cm4gZG9jdW1lbnRzU3RvcmVcclxuICAgICAgICAgICAgLml0ZXJhdGUoeyBpbmRleDogRGJSZW1vdGVEb2N1bWVudC5yZWFkVGltZUluZGV4LCByZXZlcnNlOiB0cnVlIH0sIGZ1bmN0aW9uIChrZXksIGRiUmVtb3RlRG9jLCBjb250cm9sKSB7XHJcbiAgICAgICAgICAgIGNoYW5nZWREb2MgPSBfdGhpcy5zZXJpYWxpemVyLmZyb21EYlJlbW90ZURvY3VtZW50KGRiUmVtb3RlRG9jKTtcclxuICAgICAgICAgICAgaWYgKGRiUmVtb3RlRG9jLnJlYWRUaW1lKSB7XHJcbiAgICAgICAgICAgICAgICByZWFkVGltZSA9IF90aGlzLnNlcmlhbGl6ZXIuZnJvbURiVGltZXN0YW1wS2V5KGRiUmVtb3RlRG9jLnJlYWRUaW1lKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb250cm9sLmRvbmUoKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAubmV4dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7IGNoYW5nZWREb2M6IGNoYW5nZWREb2MsIHJlYWRUaW1lOiByZWFkVGltZSB9O1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIEluZGV4ZWREYlJlbW90ZURvY3VtZW50Q2FjaGUucHJvdG90eXBlLm5ld0NoYW5nZUJ1ZmZlciA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBJbmRleGVkRGJSZW1vdGVEb2N1bWVudENhY2hlLlJlbW90ZURvY3VtZW50Q2hhbmdlQnVmZmVyKHRoaXMsICEhb3B0aW9ucyAmJiBvcHRpb25zLnRyYWNrUmVtb3ZhbHMpO1xyXG4gICAgfTtcclxuICAgIEluZGV4ZWREYlJlbW90ZURvY3VtZW50Q2FjaGUucHJvdG90eXBlLmdldFNpemUgPSBmdW5jdGlvbiAodHhuKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0TWV0YWRhdGEodHhuKS5uZXh0KGZ1bmN0aW9uIChtZXRhZGF0YSkgeyByZXR1cm4gbWV0YWRhdGEuYnl0ZVNpemU7IH0pO1xyXG4gICAgfTtcclxuICAgIEluZGV4ZWREYlJlbW90ZURvY3VtZW50Q2FjaGUucHJvdG90eXBlLmdldE1ldGFkYXRhID0gZnVuY3Rpb24gKHR4bikge1xyXG4gICAgICAgIHJldHVybiBkb2N1bWVudEdsb2JhbFN0b3JlKHR4bilcclxuICAgICAgICAgICAgLmdldChEYlJlbW90ZURvY3VtZW50R2xvYmFsLmtleSlcclxuICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKG1ldGFkYXRhKSB7XHJcbiAgICAgICAgICAgIGFzc2VydCghIW1ldGFkYXRhLCAnTWlzc2luZyBkb2N1bWVudCBjYWNoZSBtZXRhZGF0YScpO1xyXG4gICAgICAgICAgICByZXR1cm4gbWV0YWRhdGE7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgSW5kZXhlZERiUmVtb3RlRG9jdW1lbnRDYWNoZS5wcm90b3R5cGUuc2V0TWV0YWRhdGEgPSBmdW5jdGlvbiAodHhuLCBtZXRhZGF0YSkge1xyXG4gICAgICAgIHJldHVybiBkb2N1bWVudEdsb2JhbFN0b3JlKHR4bikucHV0KERiUmVtb3RlRG9jdW1lbnRHbG9iYWwua2V5LCBtZXRhZGF0YSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBEZWNvZGVzIGByZW1vdGVEb2NgIGFuZCByZXR1cm5zIHRoZSBkb2N1bWVudCAob3IgbnVsbCwgaWYgdGhlIGRvY3VtZW50XHJcbiAgICAgKiBjb3JyZXNwb25kcyB0byB0aGUgZm9ybWF0IHVzZWQgZm9yIHNlbnRpbmVsIGRlbGV0ZXMpLlxyXG4gICAgICovXHJcbiAgICBJbmRleGVkRGJSZW1vdGVEb2N1bWVudENhY2hlLnByb3RvdHlwZS5tYXliZURlY29kZURvY3VtZW50ID0gZnVuY3Rpb24gKGRiUmVtb3RlRG9jKSB7XHJcbiAgICAgICAgaWYgKGRiUmVtb3RlRG9jKSB7XHJcbiAgICAgICAgICAgIHZhciBkb2MgPSB0aGlzLnNlcmlhbGl6ZXIuZnJvbURiUmVtb3RlRG9jdW1lbnQoZGJSZW1vdGVEb2MpO1xyXG4gICAgICAgICAgICBpZiAoZG9jIGluc3RhbmNlb2YgTm9Eb2N1bWVudCAmJlxyXG4gICAgICAgICAgICAgICAgZG9jLnZlcnNpb24uaXNFcXVhbChTbmFwc2hvdFZlcnNpb24uZm9yRGVsZXRlZERvYygpKSkge1xyXG4gICAgICAgICAgICAgICAgLy8gVGhlIGRvY3VtZW50IGlzIGEgc2VudGluZWwgcmVtb3ZhbCBhbmQgc2hvdWxkIG9ubHkgYmUgdXNlZCBpbiB0aGVcclxuICAgICAgICAgICAgICAgIC8vIGBnZXROZXdEb2N1bWVudENoYW5nZXMoKWAuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gZG9jO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEhhbmRsZXMgdGhlIGRldGFpbHMgb2YgYWRkaW5nIGFuZCB1cGRhdGluZyBkb2N1bWVudHMgaW4gdGhlIEluZGV4ZWREYlJlbW90ZURvY3VtZW50Q2FjaGUuXHJcbiAgICAgKlxyXG4gICAgICogVW5saWtlIHRoZSBNZW1vcnlSZW1vdGVEb2N1bWVudENoYW5nZUJ1ZmZlciwgdGhlIEluZGV4ZWREYiBpbXBsZW1lbnRhdGlvbiBjb21wdXRlcyB0aGUgc2l6ZVxyXG4gICAgICogZGVsdGEgZm9yIGFsbCBzdWJtaXR0ZWQgY2hhbmdlcy4gVGhpcyBhdm9pZHMgaGF2aW5nIHRvIHJlLXJlYWQgYWxsIGRvY3VtZW50cyBmcm9tIEluZGV4ZWREYlxyXG4gICAgICogd2hlbiB3ZSBhcHBseSB0aGUgY2hhbmdlcy5cclxuICAgICAqL1xyXG4gICAgSW5kZXhlZERiUmVtb3RlRG9jdW1lbnRDYWNoZS5SZW1vdGVEb2N1bWVudENoYW5nZUJ1ZmZlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgICAgICB0c2xpYi5fX2V4dGVuZHMoY2xhc3NfMSwgX3N1cGVyKTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAcGFyYW0gZG9jdW1lbnRDYWNoZSBUaGUgSW5kZXhlZERiUmVtb3RlRG9jdW1lbnRDYWNoZSB0byBhcHBseSB0aGUgY2hhbmdlcyB0by5cclxuICAgICAgICAgKiBAcGFyYW0gdHJhY2tSZW1vdmFscyBXaGV0aGVyIHRvIGNyZWF0ZSBzZW50aW5lbCBkZWxldGVzIHRoYXQgY2FuIGJlIHRyYWNrZWQgYnlcclxuICAgICAgICAgKiBgZ2V0TmV3RG9jdW1lbnRDaGFuZ2VzKClgLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIGNsYXNzXzEoZG9jdW1lbnRDYWNoZSwgdHJhY2tSZW1vdmFscykge1xyXG4gICAgICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xyXG4gICAgICAgICAgICBfdGhpcy5kb2N1bWVudENhY2hlID0gZG9jdW1lbnRDYWNoZTtcclxuICAgICAgICAgICAgX3RoaXMudHJhY2tSZW1vdmFscyA9IHRyYWNrUmVtb3ZhbHM7XHJcbiAgICAgICAgICAgIC8vIEEgbWFwIG9mIGRvY3VtZW50IHNpemVzIHByaW9yIHRvIGFwcGx5aW5nIHRoZSBjaGFuZ2VzIGluIHRoaXMgYnVmZmVyLlxyXG4gICAgICAgICAgICBfdGhpcy5kb2N1bWVudFNpemVzID0gbmV3IE9iamVjdE1hcChmdW5jdGlvbiAoa2V5KSB7IHJldHVybiBrZXkudG9TdHJpbmcoKTsgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiBfdGhpcztcclxuICAgICAgICB9XHJcbiAgICAgICAgY2xhc3NfMS5wcm90b3R5cGUuYXBwbHlDaGFuZ2VzID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uKSB7XHJcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgICAgIHZhciBwcm9taXNlcyA9IFtdO1xyXG4gICAgICAgICAgICB2YXIgc2l6ZURlbHRhID0gMDtcclxuICAgICAgICAgICAgdmFyIGNvbGxlY3Rpb25QYXJlbnRzID0gbmV3IFNvcnRlZFNldChmdW5jdGlvbiAobCwgcikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHByaW1pdGl2ZUNvbXBhcmF0b3IobC5jYW5vbmljYWxTdHJpbmcoKSwgci5jYW5vbmljYWxTdHJpbmcoKSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB0aGlzLmNoYW5nZXMuZm9yRWFjaChmdW5jdGlvbiAoa2V5LCBtYXliZURvY3VtZW50KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcHJldmlvdXNTaXplID0gX3RoaXMuZG9jdW1lbnRTaXplcy5nZXQoa2V5KTtcclxuICAgICAgICAgICAgICAgIGFzc2VydChwcmV2aW91c1NpemUgIT09IHVuZGVmaW5lZCwgXCJDYW5ub3QgbW9kaWZ5IGEgZG9jdW1lbnQgdGhhdCB3YXNuJ3QgcmVhZCAoZm9yIFwiICsga2V5ICsgXCIpXCIpO1xyXG4gICAgICAgICAgICAgICAgaWYgKG1heWJlRG9jdW1lbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICBhc3NlcnQoIV90aGlzLnJlYWRUaW1lLmlzRXF1YWwoU25hcHNob3RWZXJzaW9uLk1JTiksICdDYW5ub3QgYWRkIGEgZG9jdW1lbnQgd2l0aCBhIHJlYWQgdGltZSBvZiB6ZXJvJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRvYyA9IF90aGlzLmRvY3VtZW50Q2FjaGUuc2VyaWFsaXplci50b0RiUmVtb3RlRG9jdW1lbnQobWF5YmVEb2N1bWVudCwgX3RoaXMucmVhZFRpbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbGxlY3Rpb25QYXJlbnRzID0gY29sbGVjdGlvblBhcmVudHMuYWRkKGtleS5wYXRoLnBvcExhc3QoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNpemUgPSBkYkRvY3VtZW50U2l6ZShkb2MpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNpemVEZWx0YSArPSBzaXplIC0gcHJldmlvdXNTaXplO1xyXG4gICAgICAgICAgICAgICAgICAgIHByb21pc2VzLnB1c2goX3RoaXMuZG9jdW1lbnRDYWNoZS5hZGRFbnRyeSh0cmFuc2FjdGlvbiwga2V5LCBkb2MpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHNpemVEZWx0YSAtPSBwcmV2aW91c1NpemU7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLnRyYWNrUmVtb3ZhbHMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSW4gb3JkZXIgdG8gdHJhY2sgcmVtb3ZhbHMsIHdlIHN0b3JlIGEgXCJzZW50aW5lbCBkZWxldGVcIiBpbiB0aGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVtb3RlRG9jdW1lbnRDYWNoZS4gVGhpcyBlbnRyeSBpcyByZXByZXNlbnRlZCBieSBhIE5vRG9jdW1lbnRcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gd2l0aCBhIHZlcnNpb24gb2YgMCBhbmQgaWdub3JlZCBieSBgbWF5YmVEZWNvZGVEb2N1bWVudCgpYCBidXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gcHJlc2VydmVkIGluIGBnZXROZXdEb2N1bWVudENoYW5nZXMoKWAuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkZWxldGVkRG9jID0gX3RoaXMuZG9jdW1lbnRDYWNoZS5zZXJpYWxpemVyLnRvRGJSZW1vdGVEb2N1bWVudChuZXcgTm9Eb2N1bWVudChrZXksIFNuYXBzaG90VmVyc2lvbi5mb3JEZWxldGVkRG9jKCkpLCBfdGhpcy5yZWFkVGltZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb21pc2VzLnB1c2goX3RoaXMuZG9jdW1lbnRDYWNoZS5hZGRFbnRyeSh0cmFuc2FjdGlvbiwga2V5LCBkZWxldGVkRG9jKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9taXNlcy5wdXNoKF90aGlzLmRvY3VtZW50Q2FjaGUucmVtb3ZlRW50cnkodHJhbnNhY3Rpb24sIGtleSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGNvbGxlY3Rpb25QYXJlbnRzLmZvckVhY2goZnVuY3Rpb24gKHBhcmVudCkge1xyXG4gICAgICAgICAgICAgICAgcHJvbWlzZXMucHVzaChfdGhpcy5kb2N1bWVudENhY2hlLmluZGV4TWFuYWdlci5hZGRUb0NvbGxlY3Rpb25QYXJlbnRJbmRleCh0cmFuc2FjdGlvbiwgcGFyZW50KSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBwcm9taXNlcy5wdXNoKHRoaXMuZG9jdW1lbnRDYWNoZS51cGRhdGVNZXRhZGF0YSh0cmFuc2FjdGlvbiwgc2l6ZURlbHRhKSk7XHJcbiAgICAgICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2Uud2FpdEZvcihwcm9taXNlcyk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBjbGFzc18xLnByb3RvdHlwZS5nZXRGcm9tQ2FjaGUgPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24sIGRvY3VtZW50S2V5KSB7XHJcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgICAgIC8vIFJlY29yZCB0aGUgc2l6ZSBvZiBldmVyeXRoaW5nIHdlIGxvYWQgZnJvbSB0aGUgY2FjaGUgc28gd2UgY2FuIGNvbXB1dGUgYSBkZWx0YSBsYXRlci5cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZG9jdW1lbnRDYWNoZVxyXG4gICAgICAgICAgICAgICAgLmdldFNpemVkRW50cnkodHJhbnNhY3Rpb24sIGRvY3VtZW50S2V5KVxyXG4gICAgICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKGdldFJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGdldFJlc3VsdCA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmRvY3VtZW50U2l6ZXMuc2V0KGRvY3VtZW50S2V5LCAwKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmRvY3VtZW50U2l6ZXMuc2V0KGRvY3VtZW50S2V5LCBnZXRSZXN1bHQuc2l6ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGdldFJlc3VsdC5tYXliZURvY3VtZW50O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIGNsYXNzXzEucHJvdG90eXBlLmdldEFsbEZyb21DYWNoZSA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwgZG9jdW1lbnRLZXlzKSB7XHJcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgICAgIC8vIFJlY29yZCB0aGUgc2l6ZSBvZiBldmVyeXRoaW5nIHdlIGxvYWQgZnJvbSB0aGUgY2FjaGUgc28gd2UgY2FuIGNvbXB1dGVcclxuICAgICAgICAgICAgLy8gYSBkZWx0YSBsYXRlci5cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZG9jdW1lbnRDYWNoZVxyXG4gICAgICAgICAgICAgICAgLmdldFNpemVkRW50cmllcyh0cmFuc2FjdGlvbiwgZG9jdW1lbnRLZXlzKVxyXG4gICAgICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbWF5YmVEb2N1bWVudHMgPSBfYS5tYXliZURvY3VtZW50cywgc2l6ZU1hcCA9IF9hLnNpemVNYXA7XHJcbiAgICAgICAgICAgICAgICAvLyBOb3RlOiBgZ2V0QWxsRnJvbUNhY2hlYCByZXR1cm5zIHR3byBtYXBzIGluc3RlYWQgb2YgYSBzaW5nbGUgbWFwIGZyb21cclxuICAgICAgICAgICAgICAgIC8vIGtleXMgdG8gYERvY3VtZW50U2l6ZUVudHJ5YHMuIFRoaXMgaXMgdG8gYWxsb3cgcmV0dXJuaW5nIHRoZVxyXG4gICAgICAgICAgICAgICAgLy8gYE51bGxhYmxlTWF5YmVEb2N1bWVudE1hcGAgZGlyZWN0bHksIHdpdGhvdXQgYSBjb252ZXJzaW9uLlxyXG4gICAgICAgICAgICAgICAgc2l6ZU1hcC5mb3JFYWNoKGZ1bmN0aW9uIChkb2N1bWVudEtleSwgc2l6ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmRvY3VtZW50U2l6ZXMuc2V0KGRvY3VtZW50S2V5LCBzaXplKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG1heWJlRG9jdW1lbnRzO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiBjbGFzc18xO1xyXG4gICAgfShSZW1vdGVEb2N1bWVudENoYW5nZUJ1ZmZlcikpO1xyXG4gICAgcmV0dXJuIEluZGV4ZWREYlJlbW90ZURvY3VtZW50Q2FjaGU7XHJcbn0oKSk7XHJcbmZ1bmN0aW9uIGRvY3VtZW50R2xvYmFsU3RvcmUodHhuKSB7XHJcbiAgICByZXR1cm4gSW5kZXhlZERiUGVyc2lzdGVuY2UuZ2V0U3RvcmUodHhuLCBEYlJlbW90ZURvY3VtZW50R2xvYmFsLnN0b3JlKTtcclxufVxyXG4vKipcclxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSByZW1vdGVEb2N1bWVudHMgb2JqZWN0IHN0b3JlLlxyXG4gKi9cclxuZnVuY3Rpb24gcmVtb3RlRG9jdW1lbnRzU3RvcmUodHhuKSB7XHJcbiAgICByZXR1cm4gSW5kZXhlZERiUGVyc2lzdGVuY2UuZ2V0U3RvcmUodHhuLCBEYlJlbW90ZURvY3VtZW50LnN0b3JlKTtcclxufVxyXG5mdW5jdGlvbiBkYktleShkb2NLZXkpIHtcclxuICAgIHJldHVybiBkb2NLZXkucGF0aC50b0FycmF5KCk7XHJcbn1cclxuLyoqXHJcbiAqIFJldHJ1c24gYW4gYXBwcm94aW1hdGUgc2l6ZSBmb3IgdGhlIGdpdmVuIGRvY3VtZW50LlxyXG4gKi9cclxuZnVuY3Rpb24gZGJEb2N1bWVudFNpemUoZG9jKSB7XHJcbiAgICB2YXIgdmFsdWU7XHJcbiAgICBpZiAoZG9jLmRvY3VtZW50KSB7XHJcbiAgICAgICAgdmFsdWUgPSBkb2MuZG9jdW1lbnQ7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChkb2MudW5rbm93bkRvY3VtZW50KSB7XHJcbiAgICAgICAgdmFsdWUgPSBkb2MudW5rbm93bkRvY3VtZW50O1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoZG9jLm5vRG9jdW1lbnQpIHtcclxuICAgICAgICB2YWx1ZSA9IGRvYy5ub0RvY3VtZW50O1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgdGhyb3cgZmFpbCgnVW5rbm93biByZW1vdGUgZG9jdW1lbnQgdHlwZScpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHZhbHVlKS5sZW5ndGg7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBBbiBpbi1tZW1vcnkgaW1wbGVtZW50YXRpb24gb2YgSW5kZXhNYW5hZ2VyLlxyXG4gKi9cclxudmFyIE1lbW9yeUluZGV4TWFuYWdlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIE1lbW9yeUluZGV4TWFuYWdlcigpIHtcclxuICAgICAgICB0aGlzLmNvbGxlY3Rpb25QYXJlbnRJbmRleCA9IG5ldyBNZW1vcnlDb2xsZWN0aW9uUGFyZW50SW5kZXgoKTtcclxuICAgIH1cclxuICAgIE1lbW9yeUluZGV4TWFuYWdlci5wcm90b3R5cGUuYWRkVG9Db2xsZWN0aW9uUGFyZW50SW5kZXggPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24sIGNvbGxlY3Rpb25QYXRoKSB7XHJcbiAgICAgICAgdGhpcy5jb2xsZWN0aW9uUGFyZW50SW5kZXguYWRkKGNvbGxlY3Rpb25QYXRoKTtcclxuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoKTtcclxuICAgIH07XHJcbiAgICBNZW1vcnlJbmRleE1hbmFnZXIucHJvdG90eXBlLmdldENvbGxlY3Rpb25QYXJlbnRzID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCBjb2xsZWN0aW9uSWQpIHtcclxuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUodGhpcy5jb2xsZWN0aW9uUGFyZW50SW5kZXguZ2V0RW50cmllcyhjb2xsZWN0aW9uSWQpKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gTWVtb3J5SW5kZXhNYW5hZ2VyO1xyXG59KCkpO1xyXG4vKipcclxuICogSW50ZXJuYWwgaW1wbGVtZW50YXRpb24gb2YgdGhlIGNvbGxlY3Rpb24tcGFyZW50IGluZGV4IGV4cG9zZWQgYnkgTWVtb3J5SW5kZXhNYW5hZ2VyLlxyXG4gKiBBbHNvIHVzZWQgZm9yIGluLW1lbW9yeSBjYWNoaW5nIGJ5IEluZGV4ZWREYkluZGV4TWFuYWdlciBhbmQgaW5pdGlhbCBpbmRleCBwb3B1bGF0aW9uXHJcbiAqIGluIGluZGV4ZWRkYl9zY2hlbWEudHNcclxuICovXHJcbnZhciBNZW1vcnlDb2xsZWN0aW9uUGFyZW50SW5kZXggPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBNZW1vcnlDb2xsZWN0aW9uUGFyZW50SW5kZXgoKSB7XHJcbiAgICAgICAgdGhpcy5pbmRleCA9IHt9O1xyXG4gICAgfVxyXG4gICAgLy8gUmV0dXJucyBmYWxzZSBpZiB0aGUgZW50cnkgYWxyZWFkeSBleGlzdGVkLlxyXG4gICAgTWVtb3J5Q29sbGVjdGlvblBhcmVudEluZGV4LnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbiAoY29sbGVjdGlvblBhdGgpIHtcclxuICAgICAgICBhc3NlcnQoY29sbGVjdGlvblBhdGgubGVuZ3RoICUgMiA9PT0gMSwgJ0V4cGVjdGVkIGEgY29sbGVjdGlvbiBwYXRoLicpO1xyXG4gICAgICAgIHZhciBjb2xsZWN0aW9uSWQgPSBjb2xsZWN0aW9uUGF0aC5sYXN0U2VnbWVudCgpO1xyXG4gICAgICAgIHZhciBwYXJlbnRQYXRoID0gY29sbGVjdGlvblBhdGgucG9wTGFzdCgpO1xyXG4gICAgICAgIHZhciBleGlzdGluZ1BhcmVudHMgPSB0aGlzLmluZGV4W2NvbGxlY3Rpb25JZF0gfHxcclxuICAgICAgICAgICAgbmV3IFNvcnRlZFNldChSZXNvdXJjZVBhdGguY29tcGFyYXRvcik7XHJcbiAgICAgICAgdmFyIGFkZGVkID0gIWV4aXN0aW5nUGFyZW50cy5oYXMocGFyZW50UGF0aCk7XHJcbiAgICAgICAgdGhpcy5pbmRleFtjb2xsZWN0aW9uSWRdID0gZXhpc3RpbmdQYXJlbnRzLmFkZChwYXJlbnRQYXRoKTtcclxuICAgICAgICByZXR1cm4gYWRkZWQ7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5Q29sbGVjdGlvblBhcmVudEluZGV4LnByb3RvdHlwZS5oYXMgPSBmdW5jdGlvbiAoY29sbGVjdGlvblBhdGgpIHtcclxuICAgICAgICB2YXIgY29sbGVjdGlvbklkID0gY29sbGVjdGlvblBhdGgubGFzdFNlZ21lbnQoKTtcclxuICAgICAgICB2YXIgcGFyZW50UGF0aCA9IGNvbGxlY3Rpb25QYXRoLnBvcExhc3QoKTtcclxuICAgICAgICB2YXIgZXhpc3RpbmdQYXJlbnRzID0gdGhpcy5pbmRleFtjb2xsZWN0aW9uSWRdO1xyXG4gICAgICAgIHJldHVybiBleGlzdGluZ1BhcmVudHMgJiYgZXhpc3RpbmdQYXJlbnRzLmhhcyhwYXJlbnRQYXRoKTtcclxuICAgIH07XHJcbiAgICBNZW1vcnlDb2xsZWN0aW9uUGFyZW50SW5kZXgucHJvdG90eXBlLmdldEVudHJpZXMgPSBmdW5jdGlvbiAoY29sbGVjdGlvbklkKSB7XHJcbiAgICAgICAgdmFyIHBhcmVudFBhdGhzID0gdGhpcy5pbmRleFtjb2xsZWN0aW9uSWRdIHx8XHJcbiAgICAgICAgICAgIG5ldyBTb3J0ZWRTZXQoUmVzb3VyY2VQYXRoLmNvbXBhcmF0b3IpO1xyXG4gICAgICAgIHJldHVybiBwYXJlbnRQYXRocy50b0FycmF5KCk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIE1lbW9yeUNvbGxlY3Rpb25QYXJlbnRJbmRleDtcclxufSgpKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBTY2hlbWEgVmVyc2lvbiBmb3IgdGhlIFdlYiBjbGllbnQ6XHJcbiAqIDEuIEluaXRpYWwgdmVyc2lvbiBpbmNsdWRpbmcgTXV0YXRpb24gUXVldWUsIFF1ZXJ5IENhY2hlLCBhbmQgUmVtb3RlIERvY3VtZW50XHJcbiAqICAgIENhY2hlXHJcbiAqIDIuIFVzZWQgdG8gZW5zdXJlIGEgdGFyZ2V0R2xvYmFsIG9iamVjdCBleGlzdHMgYW5kIGFkZCB0YXJnZXRDb3VudCB0byBpdC4gTm9cclxuICogICAgbG9uZ2VyIHJlcXVpcmVkIGJlY2F1c2UgbWlncmF0aW9uIDMgdW5jb25kaXRpb25hbGx5IGNsZWFycyBpdC5cclxuICogMy4gRHJvcHBlZCBhbmQgcmUtY3JlYXRlZCBRdWVyeSBDYWNoZSB0byBkZWFsIHdpdGggY2FjaGUgY29ycnVwdGlvbiByZWxhdGVkXHJcbiAqICAgIHRvIGxpbWJvIHJlc29sdXRpb24uIEFkZHJlc3Nlc1xyXG4gKiAgICBodHRwczovL2dpdGh1Yi5jb20vZmlyZWJhc2UvZmlyZWJhc2UtaW9zLXNkay9pc3N1ZXMvMTU0OFxyXG4gKiA0LiBNdWx0aS1UYWIgU3VwcG9ydC5cclxuICogNS4gUmVtb3ZhbCBvZiBoZWxkIHdyaXRlIGFja3MuXHJcbiAqIDYuIENyZWF0ZSBkb2N1bWVudCBnbG9iYWwgZm9yIHRyYWNraW5nIGRvY3VtZW50IGNhY2hlIHNpemUuXHJcbiAqIDcuIEVuc3VyZSBldmVyeSBjYWNoZWQgZG9jdW1lbnQgaGFzIGEgc2VudGluZWwgcm93IHdpdGggYSBzZXF1ZW5jZSBudW1iZXIuXHJcbiAqIDguIEFkZCBjb2xsZWN0aW9uLXBhcmVudCBpbmRleCBmb3IgQ29sbGVjdGlvbiBHcm91cCBxdWVyaWVzLlxyXG4gKiA5LiBDaGFuZ2UgUmVtb3RlRG9jdW1lbnRDaGFuZ2VzIHN0b3JlIHRvIGJlIGtleWVkIGJ5IHJlYWRUaW1lIHJhdGhlciB0aGFuXHJcbiAqICAgIGFuIGF1dG8taW5jcmVtZW50aW5nIElELiBUaGlzIGlzIHJlcXVpcmVkIGZvciBJbmRleC1GcmVlIHF1ZXJpZXMuXHJcbiAqL1xyXG52YXIgU0NIRU1BX1ZFUlNJT04gPSA5O1xyXG4vKiogUGVyZm9ybXMgZGF0YWJhc2UgY3JlYXRpb24gYW5kIHNjaGVtYSB1cGdyYWRlcy4gKi9cclxudmFyIFNjaGVtYUNvbnZlcnRlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFNjaGVtYUNvbnZlcnRlcihzZXJpYWxpemVyKSB7XHJcbiAgICAgICAgdGhpcy5zZXJpYWxpemVyID0gc2VyaWFsaXplcjtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogUGVyZm9ybXMgZGF0YWJhc2UgY3JlYXRpb24gYW5kIHNjaGVtYSB1cGdyYWRlcy5cclxuICAgICAqXHJcbiAgICAgKiBOb3RlIHRoYXQgaW4gcHJvZHVjdGlvbiwgdGhpcyBtZXRob2QgaXMgb25seSBldmVyIHVzZWQgdG8gdXBncmFkZSB0aGUgc2NoZW1hXHJcbiAgICAgKiB0byBTQ0hFTUFfVkVSU0lPTi4gRGlmZmVyZW50IHZhbHVlcyBvZiB0b1ZlcnNpb24gYXJlIG9ubHkgdXNlZCBmb3IgdGVzdGluZ1xyXG4gICAgICogYW5kIGxvY2FsIGZlYXR1cmUgZGV2ZWxvcG1lbnQuXHJcbiAgICAgKi9cclxuICAgIFNjaGVtYUNvbnZlcnRlci5wcm90b3R5cGUuY3JlYXRlT3JVcGdyYWRlID0gZnVuY3Rpb24gKGRiLCB0eG4sIGZyb21WZXJzaW9uLCB0b1ZlcnNpb24pIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIGFzc2VydChmcm9tVmVyc2lvbiA8IHRvVmVyc2lvbiAmJlxyXG4gICAgICAgICAgICBmcm9tVmVyc2lvbiA+PSAwICYmXHJcbiAgICAgICAgICAgIHRvVmVyc2lvbiA8PSBTQ0hFTUFfVkVSU0lPTiwgXCJVbmV4cGVjdGVkIHNjaGVtYSB1cGdyYWRlIGZyb20gdlwiICsgZnJvbVZlcnNpb24gKyBcIiB0byB2e3RvVmVyc2lvbn0uXCIpO1xyXG4gICAgICAgIHZhciBzaW1wbGVEYlRyYW5zYWN0aW9uID0gbmV3IFNpbXBsZURiVHJhbnNhY3Rpb24odHhuKTtcclxuICAgICAgICBpZiAoZnJvbVZlcnNpb24gPCAxICYmIHRvVmVyc2lvbiA+PSAxKSB7XHJcbiAgICAgICAgICAgIGNyZWF0ZVByaW1hcnlDbGllbnRTdG9yZShkYik7XHJcbiAgICAgICAgICAgIGNyZWF0ZU11dGF0aW9uUXVldWUoZGIpO1xyXG4gICAgICAgICAgICBjcmVhdGVRdWVyeUNhY2hlKGRiKTtcclxuICAgICAgICAgICAgY3JlYXRlUmVtb3RlRG9jdW1lbnRDYWNoZShkYik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIE1pZ3JhdGlvbiAyIHRvIHBvcHVsYXRlIHRoZSB0YXJnZXRHbG9iYWwgb2JqZWN0IG5vIGxvbmdlciBuZWVkZWQgc2luY2VcclxuICAgICAgICAvLyBtaWdyYXRpb24gMyB1bmNvbmRpdGlvbmFsbHkgY2xlYXJzIGl0LlxyXG4gICAgICAgIHZhciBwID0gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoKTtcclxuICAgICAgICBpZiAoZnJvbVZlcnNpb24gPCAzICYmIHRvVmVyc2lvbiA+PSAzKSB7XHJcbiAgICAgICAgICAgIC8vIEJyYW5kIG5ldyBjbGllbnRzIGRvbid0IG5lZWQgdG8gZHJvcCBhbmQgcmVjcmVhdGUtLW9ubHkgY2xpZW50cyB0aGF0XHJcbiAgICAgICAgICAgIC8vIHBvdGVudGlhbGx5IGhhdmUgY29ycnVwdCBkYXRhLlxyXG4gICAgICAgICAgICBpZiAoZnJvbVZlcnNpb24gIT09IDApIHtcclxuICAgICAgICAgICAgICAgIGRyb3BRdWVyeUNhY2hlKGRiKTtcclxuICAgICAgICAgICAgICAgIGNyZWF0ZVF1ZXJ5Q2FjaGUoZGIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHAgPSBwLm5leHQoZnVuY3Rpb24gKCkgeyByZXR1cm4gd3JpdGVFbXB0eVRhcmdldEdsb2JhbEVudHJ5KHNpbXBsZURiVHJhbnNhY3Rpb24pOyB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGZyb21WZXJzaW9uIDwgNCAmJiB0b1ZlcnNpb24gPj0gNCkge1xyXG4gICAgICAgICAgICBpZiAoZnJvbVZlcnNpb24gIT09IDApIHtcclxuICAgICAgICAgICAgICAgIC8vIFNjaGVtYSB2ZXJzaW9uIDMgdXNlcyBhdXRvLWdlbmVyYXRlZCBrZXlzIHRvIGdlbmVyYXRlIGdsb2JhbGx5IHVuaXF1ZVxyXG4gICAgICAgICAgICAgICAgLy8gbXV0YXRpb24gYmF0Y2ggSURzICh0aGlzIHdhcyBwcmV2aW91c2x5IGVuc3VyZWQgaW50ZXJuYWxseSBieSB0aGVcclxuICAgICAgICAgICAgICAgIC8vIGNsaWVudCkuIFRvIG1pZ3JhdGUgdG8gdGhlIG5ldyBzY2hlbWEsIHdlIGhhdmUgdG8gcmVhZCBhbGwgbXV0YXRpb25zXHJcbiAgICAgICAgICAgICAgICAvLyBhbmQgd3JpdGUgdGhlbSBiYWNrIG91dC4gV2UgcHJlc2VydmUgdGhlIGV4aXN0aW5nIGJhdGNoIElEcyB0byBndWFyYW50ZWVcclxuICAgICAgICAgICAgICAgIC8vIGNvbnNpc3RlbmN5IHdpdGggb3RoZXIgb2JqZWN0IHN0b3Jlcy4gQW55IGZ1cnRoZXIgbXV0YXRpb24gYmF0Y2ggSURzIHdpbGxcclxuICAgICAgICAgICAgICAgIC8vIGJlIGF1dG8tZ2VuZXJhdGVkLlxyXG4gICAgICAgICAgICAgICAgcCA9IHAubmV4dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHVwZ3JhZGVNdXRhdGlvbkJhdGNoU2NoZW1hQW5kTWlncmF0ZURhdGEoZGIsIHNpbXBsZURiVHJhbnNhY3Rpb24pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcCA9IHAubmV4dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBjcmVhdGVDbGllbnRNZXRhZGF0YVN0b3JlKGRiKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChmcm9tVmVyc2lvbiA8IDUgJiYgdG9WZXJzaW9uID49IDUpIHtcclxuICAgICAgICAgICAgcCA9IHAubmV4dChmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5yZW1vdmVBY2tub3dsZWRnZWRNdXRhdGlvbnMoc2ltcGxlRGJUcmFuc2FjdGlvbik7IH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZnJvbVZlcnNpb24gPCA2ICYmIHRvVmVyc2lvbiA+PSA2KSB7XHJcbiAgICAgICAgICAgIHAgPSBwLm5leHQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgY3JlYXRlRG9jdW1lbnRHbG9iYWxTdG9yZShkYik7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuYWRkRG9jdW1lbnRHbG9iYWwoc2ltcGxlRGJUcmFuc2FjdGlvbik7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZnJvbVZlcnNpb24gPCA3ICYmIHRvVmVyc2lvbiA+PSA3KSB7XHJcbiAgICAgICAgICAgIHAgPSBwLm5leHQoZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMuZW5zdXJlU2VxdWVuY2VOdW1iZXJzKHNpbXBsZURiVHJhbnNhY3Rpb24pOyB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGZyb21WZXJzaW9uIDwgOCAmJiB0b1ZlcnNpb24gPj0gOCkge1xyXG4gICAgICAgICAgICBwID0gcC5uZXh0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5jcmVhdGVDb2xsZWN0aW9uUGFyZW50SW5kZXgoZGIsIHNpbXBsZURiVHJhbnNhY3Rpb24pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGZyb21WZXJzaW9uIDwgOSAmJiB0b1ZlcnNpb24gPj0gOSkge1xyXG4gICAgICAgICAgICBwID0gcC5uZXh0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIC8vIE11bHRpLVRhYiB1c2VkIHRvIG1hbmFnZSBpdHMgb3duIGNoYW5nZWxvZywgYnV0IHRoaXMgaGFzIGJlZW4gbW92ZWRcclxuICAgICAgICAgICAgICAgIC8vIHRvIHRoZSBEYlJlbW90ZURvY3VtZW50IG9iamVjdCBzdG9yZSBpdHNlbGYuIFNpbmNlIHRoZSBwcmV2aW91cyBjaGFuZ2VcclxuICAgICAgICAgICAgICAgIC8vIGxvZyBvbmx5IGNvbnRhaW5lZCB0cmFuc2llbnQgZGF0YSwgd2UgY2FuIGRyb3AgaXRzIG9iamVjdCBzdG9yZS5cclxuICAgICAgICAgICAgICAgIGRyb3BSZW1vdGVEb2N1bWVudENoYW5nZXNTdG9yZShkYik7XHJcbiAgICAgICAgICAgICAgICBjcmVhdGVSZW1vdGVEb2N1bWVudFJlYWRUaW1lSW5kZXgodHhuKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBwO1xyXG4gICAgfTtcclxuICAgIFNjaGVtYUNvbnZlcnRlci5wcm90b3R5cGUuYWRkRG9jdW1lbnRHbG9iYWwgPSBmdW5jdGlvbiAodHhuKSB7XHJcbiAgICAgICAgdmFyIGJ5dGVDb3VudCA9IDA7XHJcbiAgICAgICAgcmV0dXJuIHR4blxyXG4gICAgICAgICAgICAuc3RvcmUoRGJSZW1vdGVEb2N1bWVudC5zdG9yZSlcclxuICAgICAgICAgICAgLml0ZXJhdGUoZnVuY3Rpb24gKF8sIGRvYykge1xyXG4gICAgICAgICAgICBieXRlQ291bnQgKz0gZGJEb2N1bWVudFNpemUoZG9jKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAubmV4dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBtZXRhZGF0YSA9IG5ldyBEYlJlbW90ZURvY3VtZW50R2xvYmFsKGJ5dGVDb3VudCk7XHJcbiAgICAgICAgICAgIHJldHVybiB0eG5cclxuICAgICAgICAgICAgICAgIC5zdG9yZShEYlJlbW90ZURvY3VtZW50R2xvYmFsLnN0b3JlKVxyXG4gICAgICAgICAgICAgICAgLnB1dChEYlJlbW90ZURvY3VtZW50R2xvYmFsLmtleSwgbWV0YWRhdGEpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIFNjaGVtYUNvbnZlcnRlci5wcm90b3R5cGUucmVtb3ZlQWNrbm93bGVkZ2VkTXV0YXRpb25zID0gZnVuY3Rpb24gKHR4bikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIHF1ZXVlc1N0b3JlID0gdHhuLnN0b3JlKERiTXV0YXRpb25RdWV1ZS5zdG9yZSk7XHJcbiAgICAgICAgdmFyIG11dGF0aW9uc1N0b3JlID0gdHhuLnN0b3JlKERiTXV0YXRpb25CYXRjaC5zdG9yZSk7XHJcbiAgICAgICAgcmV0dXJuIHF1ZXVlc1N0b3JlLmxvYWRBbGwoKS5uZXh0KGZ1bmN0aW9uIChxdWV1ZXMpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5mb3JFYWNoKHF1ZXVlcywgZnVuY3Rpb24gKHF1ZXVlKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcmFuZ2UgPSBJREJLZXlSYW5nZS5ib3VuZChbcXVldWUudXNlcklkLCBCQVRDSElEX1VOS05PV05dLCBbcXVldWUudXNlcklkLCBxdWV1ZS5sYXN0QWNrbm93bGVkZ2VkQmF0Y2hJZF0pO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG11dGF0aW9uc1N0b3JlXHJcbiAgICAgICAgICAgICAgICAgICAgLmxvYWRBbGwoRGJNdXRhdGlvbkJhdGNoLnVzZXJNdXRhdGlvbnNJbmRleCwgcmFuZ2UpXHJcbiAgICAgICAgICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKGRiQmF0Y2hlcykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UuZm9yRWFjaChkYkJhdGNoZXMsIGZ1bmN0aW9uIChkYkJhdGNoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFzc2VydChkYkJhdGNoLnVzZXJJZCA9PT0gcXVldWUudXNlcklkLCBcIkNhbm5vdCBwcm9jZXNzIGJhdGNoIFwiICsgZGJCYXRjaC5iYXRjaElkICsgXCIgZnJvbSB1bmV4cGVjdGVkIHVzZXJcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBiYXRjaCA9IF90aGlzLnNlcmlhbGl6ZXIuZnJvbURiTXV0YXRpb25CYXRjaChkYkJhdGNoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlbW92ZU11dGF0aW9uQmF0Y2godHhuLCBxdWV1ZS51c2VySWQsIGJhdGNoKS5uZXh0KGZ1bmN0aW9uICgpIHsgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBFbnN1cmVzIHRoYXQgZXZlcnkgZG9jdW1lbnQgaW4gdGhlIHJlbW90ZSBkb2N1bWVudCBjYWNoZSBoYXMgYSBjb3JyZXNwb25kaW5nIHNlbnRpbmVsIHJvd1xyXG4gICAgICogd2l0aCBhIHNlcXVlbmNlIG51bWJlci4gTWlzc2luZyByb3dzIGFyZSBnaXZlbiB0aGUgbW9zdCByZWNlbnRseSB1c2VkIHNlcXVlbmNlIG51bWJlci5cclxuICAgICAqL1xyXG4gICAgU2NoZW1hQ29udmVydGVyLnByb3RvdHlwZS5lbnN1cmVTZXF1ZW5jZU51bWJlcnMgPSBmdW5jdGlvbiAodHhuKSB7XHJcbiAgICAgICAgdmFyIGRvY3VtZW50VGFyZ2V0U3RvcmUgPSB0eG4uc3RvcmUoRGJUYXJnZXREb2N1bWVudC5zdG9yZSk7XHJcbiAgICAgICAgdmFyIGRvY3VtZW50c1N0b3JlID0gdHhuLnN0b3JlKERiUmVtb3RlRG9jdW1lbnQuc3RvcmUpO1xyXG4gICAgICAgIHJldHVybiBnZXRIaWdoZXN0TGlzdGVuU2VxdWVuY2VOdW1iZXIodHhuKS5uZXh0KGZ1bmN0aW9uIChjdXJyZW50U2VxdWVuY2VOdW1iZXIpIHtcclxuICAgICAgICAgICAgdmFyIHdyaXRlU2VudGluZWxLZXkgPSBmdW5jdGlvbiAocGF0aCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRvY3VtZW50VGFyZ2V0U3RvcmUucHV0KG5ldyBEYlRhcmdldERvY3VtZW50KDAsIGVuY29kZShwYXRoKSwgY3VycmVudFNlcXVlbmNlTnVtYmVyKSk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHZhciBwcm9taXNlcyA9IFtdO1xyXG4gICAgICAgICAgICByZXR1cm4gZG9jdW1lbnRzU3RvcmVcclxuICAgICAgICAgICAgICAgIC5pdGVyYXRlKGZ1bmN0aW9uIChrZXksIGRvYykge1xyXG4gICAgICAgICAgICAgICAgdmFyIHBhdGggPSBuZXcgUmVzb3VyY2VQYXRoKGtleSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgZG9jU2VudGluZWxLZXkgPSBzZW50aW5lbEtleShwYXRoKTtcclxuICAgICAgICAgICAgICAgIHByb21pc2VzLnB1c2goZG9jdW1lbnRUYXJnZXRTdG9yZS5nZXQoZG9jU2VudGluZWxLZXkpLm5leHQoZnVuY3Rpb24gKG1heWJlU2VudGluZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIW1heWJlU2VudGluZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdyaXRlU2VudGluZWxLZXkocGF0aCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAubmV4dChmdW5jdGlvbiAoKSB7IHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2Uud2FpdEZvcihwcm9taXNlcyk7IH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIFNjaGVtYUNvbnZlcnRlci5wcm90b3R5cGUuY3JlYXRlQ29sbGVjdGlvblBhcmVudEluZGV4ID0gZnVuY3Rpb24gKGRiLCB0eG4pIHtcclxuICAgICAgICAvLyBDcmVhdGUgdGhlIGluZGV4LlxyXG4gICAgICAgIGRiLmNyZWF0ZU9iamVjdFN0b3JlKERiQ29sbGVjdGlvblBhcmVudC5zdG9yZSwge1xyXG4gICAgICAgICAgICBrZXlQYXRoOiBEYkNvbGxlY3Rpb25QYXJlbnQua2V5UGF0aFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHZhciBjb2xsZWN0aW9uUGFyZW50c1N0b3JlID0gdHhuLnN0b3JlKERiQ29sbGVjdGlvblBhcmVudC5zdG9yZSk7XHJcbiAgICAgICAgLy8gSGVscGVyIHRvIGFkZCBhbiBpbmRleCBlbnRyeSBpZmYgd2UgaGF2ZW4ndCBhbHJlYWR5IHdyaXR0ZW4gaXQuXHJcbiAgICAgICAgdmFyIGNhY2hlID0gbmV3IE1lbW9yeUNvbGxlY3Rpb25QYXJlbnRJbmRleCgpO1xyXG4gICAgICAgIHZhciBhZGRFbnRyeSA9IGZ1bmN0aW9uIChjb2xsZWN0aW9uUGF0aCkge1xyXG4gICAgICAgICAgICBpZiAoY2FjaGUuYWRkKGNvbGxlY3Rpb25QYXRoKSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGNvbGxlY3Rpb25JZCA9IGNvbGxlY3Rpb25QYXRoLmxhc3RTZWdtZW50KCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgcGFyZW50UGF0aCA9IGNvbGxlY3Rpb25QYXRoLnBvcExhc3QoKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBjb2xsZWN0aW9uUGFyZW50c1N0b3JlLnB1dCh7XHJcbiAgICAgICAgICAgICAgICAgICAgY29sbGVjdGlvbklkOiBjb2xsZWN0aW9uSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50OiBlbmNvZGUocGFyZW50UGF0aClcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvLyBJbmRleCBleGlzdGluZyByZW1vdGUgZG9jdW1lbnRzLlxyXG4gICAgICAgIHJldHVybiB0eG5cclxuICAgICAgICAgICAgLnN0b3JlKERiUmVtb3RlRG9jdW1lbnQuc3RvcmUpXHJcbiAgICAgICAgICAgIC5pdGVyYXRlKHsga2V5c09ubHk6IHRydWUgfSwgZnVuY3Rpb24gKHBhdGhTZWdtZW50cywgXykge1xyXG4gICAgICAgICAgICB2YXIgcGF0aCA9IG5ldyBSZXNvdXJjZVBhdGgocGF0aFNlZ21lbnRzKTtcclxuICAgICAgICAgICAgcmV0dXJuIGFkZEVudHJ5KHBhdGgucG9wTGFzdCgpKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAubmV4dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIC8vIEluZGV4IGV4aXN0aW5nIG11dGF0aW9ucy5cclxuICAgICAgICAgICAgcmV0dXJuIHR4blxyXG4gICAgICAgICAgICAgICAgLnN0b3JlKERiRG9jdW1lbnRNdXRhdGlvbi5zdG9yZSlcclxuICAgICAgICAgICAgICAgIC5pdGVyYXRlKHsga2V5c09ubHk6IHRydWUgfSwgZnVuY3Rpb24gKF9hLCBfKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdXNlcklEID0gX2FbMF0sIGVuY29kZWRQYXRoID0gX2FbMV0sIGJhdGNoSWQgPSBfYVsyXTtcclxuICAgICAgICAgICAgICAgIHZhciBwYXRoID0gZGVjb2RlKGVuY29kZWRQYXRoKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBhZGRFbnRyeShwYXRoLnBvcExhc3QoKSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBTY2hlbWFDb252ZXJ0ZXI7XHJcbn0oKSk7XHJcbmZ1bmN0aW9uIHNlbnRpbmVsS2V5KHBhdGgpIHtcclxuICAgIHJldHVybiBbMCwgZW5jb2RlKHBhdGgpXTtcclxufVxyXG4vKipcclxuICogV3JhcHBlciBjbGFzcyB0byBzdG9yZSB0aW1lc3RhbXBzIChzZWNvbmRzIGFuZCBuYW5vcykgaW4gSW5kZXhlZERiIG9iamVjdHMuXHJcbiAqL1xyXG52YXIgRGJUaW1lc3RhbXAgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBEYlRpbWVzdGFtcChzZWNvbmRzLCBuYW5vc2Vjb25kcykge1xyXG4gICAgICAgIHRoaXMuc2Vjb25kcyA9IHNlY29uZHM7XHJcbiAgICAgICAgdGhpcy5uYW5vc2Vjb25kcyA9IG5hbm9zZWNvbmRzO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIERiVGltZXN0YW1wO1xyXG59KCkpO1xyXG4vKipcclxuICogQSBzaW5nbGV0b24gb2JqZWN0IHRvIGJlIHN0b3JlZCBpbiB0aGUgJ293bmVyJyBzdG9yZSBpbiBJbmRleGVkRGIuXHJcbiAqXHJcbiAqIEEgZ2l2ZW4gZGF0YWJhc2UgY2FuIGhhdmUgYSBzaW5nbGUgcHJpbWFyeSB0YWIgYXNzaWduZWQgYXQgYSBnaXZlbiB0aW1lLiBUaGF0XHJcbiAqIHRhYiBtdXN0IHZhbGlkYXRlIHRoYXQgaXQgaXMgc3RpbGwgaG9sZGluZyB0aGUgcHJpbWFyeSBsZWFzZSBiZWZvcmUgZXZlcnlcclxuICogb3BlcmF0aW9uIHRoYXQgcmVxdWlyZXMgbG9ja2VkIGFjY2Vzcy4gVGhlIHByaW1hcnkgdGFiIHNob3VsZCByZWd1bGFybHlcclxuICogd3JpdGUgYW4gdXBkYXRlZCB0aW1lc3RhbXAgdG8gdGhpcyBsZWFzZSB0byBwcmV2ZW50IG90aGVyIHRhYnMgZnJvbVxyXG4gKiBcInN0ZWFsaW5nXCIgdGhlIHByaW1hcnkgbGVhc2VcclxuICovXHJcbnZhciBEYlByaW1hcnlDbGllbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBEYlByaW1hcnlDbGllbnQob3duZXJJZCwgXHJcbiAgICAvKiogV2hldGhlciB0byBhbGxvdyBzaGFyZWQgYWNjZXNzIGZyb20gbXVsdGlwbGUgdGFicy4gKi9cclxuICAgIGFsbG93VGFiU3luY2hyb25pemF0aW9uLCBsZWFzZVRpbWVzdGFtcE1zKSB7XHJcbiAgICAgICAgdGhpcy5vd25lcklkID0gb3duZXJJZDtcclxuICAgICAgICB0aGlzLmFsbG93VGFiU3luY2hyb25pemF0aW9uID0gYWxsb3dUYWJTeW5jaHJvbml6YXRpb247XHJcbiAgICAgICAgdGhpcy5sZWFzZVRpbWVzdGFtcE1zID0gbGVhc2VUaW1lc3RhbXBNcztcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogTmFtZSBvZiB0aGUgSW5kZXhlZERiIG9iamVjdCBzdG9yZS5cclxuICAgICAqXHJcbiAgICAgKiBOb3RlIHRoYXQgdGhlIG5hbWUgJ293bmVyJyBpcyBjaG9zZW4gdG8gZW5zdXJlIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5IHdpdGhcclxuICAgICAqIG9sZGVyIGNsaWVudHMgdGhhdCBvbmx5IHN1cHBvcnRlZCBzaW5nbGUgbG9ja2VkIGFjY2VzcyB0byB0aGUgcGVyc2lzdGVuY2VcclxuICAgICAqIGxheWVyLlxyXG4gICAgICovXHJcbiAgICBEYlByaW1hcnlDbGllbnQuc3RvcmUgPSAnb3duZXInO1xyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUga2V5IHN0cmluZyB1c2VkIGZvciB0aGUgc2luZ2xlIG9iamVjdCB0aGF0IGV4aXN0cyBpbiB0aGVcclxuICAgICAqIERiUHJpbWFyeUNsaWVudCBzdG9yZS5cclxuICAgICAqL1xyXG4gICAgRGJQcmltYXJ5Q2xpZW50LmtleSA9ICdvd25lcic7XHJcbiAgICByZXR1cm4gRGJQcmltYXJ5Q2xpZW50O1xyXG59KCkpO1xyXG5mdW5jdGlvbiBjcmVhdGVQcmltYXJ5Q2xpZW50U3RvcmUoZGIpIHtcclxuICAgIGRiLmNyZWF0ZU9iamVjdFN0b3JlKERiUHJpbWFyeUNsaWVudC5zdG9yZSk7XHJcbn1cclxuLyoqXHJcbiAqIEFuIG9iamVjdCB0byBiZSBzdG9yZWQgaW4gdGhlICdtdXRhdGlvblF1ZXVlcycgc3RvcmUgaW4gSW5kZXhlZERiLlxyXG4gKlxyXG4gKiBFYWNoIHVzZXIgZ2V0cyBhIHNpbmdsZSBxdWV1ZSBvZiBNdXRhdGlvbkJhdGNoZXMgdG8gYXBwbHkgdG8gdGhlIHNlcnZlci5cclxuICogRGJNdXRhdGlvblF1ZXVlIHRyYWNrcyB0aGUgbWV0YWRhdGEgYWJvdXQgdGhlIHF1ZXVlLlxyXG4gKi9cclxudmFyIERiTXV0YXRpb25RdWV1ZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIERiTXV0YXRpb25RdWV1ZShcclxuICAgIC8qKlxyXG4gICAgICogVGhlIG5vcm1hbGl6ZWQgdXNlciBJRCB0byB3aGljaCB0aGlzIHF1ZXVlIGJlbG9uZ3MuXHJcbiAgICAgKi9cclxuICAgIHVzZXJJZCwgXHJcbiAgICAvKipcclxuICAgICAqIEFuIGlkZW50aWZpZXIgZm9yIHRoZSBoaWdoZXN0IG51bWJlcmVkIGJhdGNoIHRoYXQgaGFzIGJlZW4gYWNrbm93bGVkZ2VkXHJcbiAgICAgKiBieSB0aGUgc2VydmVyLiBBbGwgTXV0YXRpb25CYXRjaGVzIGluIHRoaXMgcXVldWUgd2l0aCBiYXRjaElkcyBsZXNzXHJcbiAgICAgKiB0aGFuIG9yIGVxdWFsIHRvIHRoaXMgdmFsdWUgYXJlIGNvbnNpZGVyZWQgdG8gaGF2ZSBiZWVuIGFja25vd2xlZGdlZCBieVxyXG4gICAgICogdGhlIHNlcnZlci5cclxuICAgICAqXHJcbiAgICAgKiBOT1RFOiB0aGlzIGlzIGRlcHJlY2F0ZWQgYW5kIG5vIGxvbmdlciB1c2VkIGJ5IHRoZSBjb2RlLlxyXG4gICAgICovXHJcbiAgICBsYXN0QWNrbm93bGVkZ2VkQmF0Y2hJZCwgXHJcbiAgICAvKipcclxuICAgICAqIEEgc3RyZWFtIHRva2VuIHRoYXQgd2FzIHByZXZpb3VzbHkgc2VudCBieSB0aGUgc2VydmVyLlxyXG4gICAgICpcclxuICAgICAqIFNlZSBTdHJlYW1pbmdXcml0ZVJlcXVlc3QgaW4gZGF0YXN0b3JlLnByb3RvIGZvciBtb3JlIGRldGFpbHMgYWJvdXRcclxuICAgICAqIHVzYWdlLlxyXG4gICAgICpcclxuICAgICAqIEFmdGVyIHNlbmRpbmcgdGhpcyB0b2tlbiwgZWFybGllciB0b2tlbnMgbWF5IG5vdCBiZSB1c2VkIGFueW1vcmUgc29cclxuICAgICAqIG9ubHkgYSBzaW5nbGUgc3RyZWFtIHRva2VuIGlzIHJldGFpbmVkLlxyXG4gICAgICovXHJcbiAgICBsYXN0U3RyZWFtVG9rZW4pIHtcclxuICAgICAgICB0aGlzLnVzZXJJZCA9IHVzZXJJZDtcclxuICAgICAgICB0aGlzLmxhc3RBY2tub3dsZWRnZWRCYXRjaElkID0gbGFzdEFja25vd2xlZGdlZEJhdGNoSWQ7XHJcbiAgICAgICAgdGhpcy5sYXN0U3RyZWFtVG9rZW4gPSBsYXN0U3RyZWFtVG9rZW47XHJcbiAgICB9XHJcbiAgICAvKiogTmFtZSBvZiB0aGUgSW5kZXhlZERiIG9iamVjdCBzdG9yZS4gICovXHJcbiAgICBEYk11dGF0aW9uUXVldWUuc3RvcmUgPSAnbXV0YXRpb25RdWV1ZXMnO1xyXG4gICAgLyoqIEtleXMgYXJlIGF1dG9tYXRpY2FsbHkgYXNzaWduZWQgdmlhIHRoZSB1c2VySWQgcHJvcGVydHkuICovXHJcbiAgICBEYk11dGF0aW9uUXVldWUua2V5UGF0aCA9ICd1c2VySWQnO1xyXG4gICAgcmV0dXJuIERiTXV0YXRpb25RdWV1ZTtcclxufSgpKTtcclxuLyoqXHJcbiAqIEFuIG9iamVjdCB0byBiZSBzdG9yZWQgaW4gdGhlICdtdXRhdGlvbnMnIHN0b3JlIGluIEluZGV4ZWREYi5cclxuICpcclxuICogUmVwcmVzZW50cyBhIGJhdGNoIG9mIHVzZXItbGV2ZWwgbXV0YXRpb25zIGludGVuZGVkIHRvIGJlIHNlbnQgdG8gdGhlIHNlcnZlclxyXG4gKiBpbiBhIHNpbmdsZSB3cml0ZS4gRWFjaCB1c2VyLWxldmVsIGJhdGNoIGdldHMgYSBzZXBhcmF0ZSBEYk11dGF0aW9uQmF0Y2hcclxuICogd2l0aCBhIG5ldyBiYXRjaElkLlxyXG4gKi9cclxudmFyIERiTXV0YXRpb25CYXRjaCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIERiTXV0YXRpb25CYXRjaChcclxuICAgIC8qKlxyXG4gICAgICogVGhlIG5vcm1hbGl6ZWQgdXNlciBJRCB0byB3aGljaCB0aGlzIGJhdGNoIGJlbG9uZ3MuXHJcbiAgICAgKi9cclxuICAgIHVzZXJJZCwgXHJcbiAgICAvKipcclxuICAgICAqIEFuIGlkZW50aWZpZXIgZm9yIHRoaXMgYmF0Y2gsIGFsbG9jYXRlZCB1c2luZyBhbiBhdXRvLWdlbmVyYXRlZCBrZXkuXHJcbiAgICAgKi9cclxuICAgIGJhdGNoSWQsIFxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgbG9jYWwgd3JpdGUgdGltZSBvZiB0aGUgYmF0Y2gsIHN0b3JlZCBhcyBtaWxsaXNlY29uZHMgc2luY2UgdGhlXHJcbiAgICAgKiBlcG9jaC5cclxuICAgICAqL1xyXG4gICAgbG9jYWxXcml0ZVRpbWVNcywgXHJcbiAgICAvKipcclxuICAgICAqIEEgbGlzdCBvZiBcIm11dGF0aW9uc1wiIHRoYXQgcmVwcmVzZW50IGEgcGFydGlhbCBiYXNlIHN0YXRlIGZyb20gd2hlbiB0aGlzXHJcbiAgICAgKiB3cml0ZSBiYXRjaCB3YXMgaW5pdGlhbGx5IGNyZWF0ZWQuIER1cmluZyBsb2NhbCBhcHBsaWNhdGlvbiBvZiB0aGUgd3JpdGVcclxuICAgICAqIGJhdGNoLCB0aGVzZSBiYXNlTXV0YXRpb25zIGFyZSBhcHBsaWVkIHByaW9yIHRvIHRoZSByZWFsIHdyaXRlcyBpbiBvcmRlclxyXG4gICAgICogdG8gb3ZlcnJpZGUgY2VydGFpbiBkb2N1bWVudCBmaWVsZHMgZnJvbSB0aGUgcmVtb3RlIGRvY3VtZW50IGNhY2hlLiBUaGlzXHJcbiAgICAgKiBpcyBuZWNlc3NhcnkgaW4gdGhlIGNhc2Ugb2Ygbm9uLWlkZW1wb3RlbnQgd3JpdGVzIChlLmcuIGBpbmNyZW1lbnQoKWBcclxuICAgICAqIHRyYW5zZm9ybXMpIHRvIG1ha2Ugc3VyZSB0aGF0IHRoZSBsb2NhbCB2aWV3IG9mIHRoZSBtb2RpZmllZCBkb2N1bWVudHNcclxuICAgICAqIGRvZXNuJ3QgZmxpY2tlciBpZiB0aGUgcmVtb3RlIGRvY3VtZW50IGNhY2hlIHJlY2VpdmVzIHRoZSByZXN1bHQgb2YgdGhlXHJcbiAgICAgKiBub24taWRlbXBvdGVudCB3cml0ZSBiZWZvcmUgdGhlIHdyaXRlIGlzIHJlbW92ZWQgZnJvbSB0aGUgcXVldWUuXHJcbiAgICAgKlxyXG4gICAgICogVGhlc2UgbXV0YXRpb25zIGFyZSBuZXZlciBzZW50IHRvIHRoZSBiYWNrZW5kLlxyXG4gICAgICovXHJcbiAgICBiYXNlTXV0YXRpb25zLCBcclxuICAgIC8qKlxyXG4gICAgICogQSBsaXN0IG9mIG11dGF0aW9ucyB0byBhcHBseS4gQWxsIG11dGF0aW9ucyB3aWxsIGJlIGFwcGxpZWQgYXRvbWljYWxseS5cclxuICAgICAqXHJcbiAgICAgKiBNdXRhdGlvbnMgYXJlIHNlcmlhbGl6ZWQgdmlhIEpzb25Qcm90b1NlcmlhbGl6ZXIudG9NdXRhdGlvbigpLlxyXG4gICAgICovXHJcbiAgICBtdXRhdGlvbnMpIHtcclxuICAgICAgICB0aGlzLnVzZXJJZCA9IHVzZXJJZDtcclxuICAgICAgICB0aGlzLmJhdGNoSWQgPSBiYXRjaElkO1xyXG4gICAgICAgIHRoaXMubG9jYWxXcml0ZVRpbWVNcyA9IGxvY2FsV3JpdGVUaW1lTXM7XHJcbiAgICAgICAgdGhpcy5iYXNlTXV0YXRpb25zID0gYmFzZU11dGF0aW9ucztcclxuICAgICAgICB0aGlzLm11dGF0aW9ucyA9IG11dGF0aW9ucztcclxuICAgIH1cclxuICAgIC8qKiBOYW1lIG9mIHRoZSBJbmRleGVkRGIgb2JqZWN0IHN0b3JlLiAgKi9cclxuICAgIERiTXV0YXRpb25CYXRjaC5zdG9yZSA9ICdtdXRhdGlvbnMnO1xyXG4gICAgLyoqIEtleXMgYXJlIGF1dG9tYXRpY2FsbHkgYXNzaWduZWQgdmlhIHRoZSB1c2VySWQsIGJhdGNoSWQgcHJvcGVydGllcy4gKi9cclxuICAgIERiTXV0YXRpb25CYXRjaC5rZXlQYXRoID0gJ2JhdGNoSWQnO1xyXG4gICAgLyoqIFRoZSBpbmRleCBuYW1lIGZvciBsb29rdXAgb2YgbXV0YXRpb25zIGJ5IHVzZXIuICovXHJcbiAgICBEYk11dGF0aW9uQmF0Y2gudXNlck11dGF0aW9uc0luZGV4ID0gJ3VzZXJNdXRhdGlvbnNJbmRleCc7XHJcbiAgICAvKiogVGhlIHVzZXIgbXV0YXRpb25zIGluZGV4IGlzIGtleWVkIGJ5IFt1c2VySWQsIGJhdGNoSWRdIHBhaXJzLiAqL1xyXG4gICAgRGJNdXRhdGlvbkJhdGNoLnVzZXJNdXRhdGlvbnNLZXlQYXRoID0gWyd1c2VySWQnLCAnYmF0Y2hJZCddO1xyXG4gICAgcmV0dXJuIERiTXV0YXRpb25CYXRjaDtcclxufSgpKTtcclxuZnVuY3Rpb24gY3JlYXRlTXV0YXRpb25RdWV1ZShkYikge1xyXG4gICAgZGIuY3JlYXRlT2JqZWN0U3RvcmUoRGJNdXRhdGlvblF1ZXVlLnN0b3JlLCB7XHJcbiAgICAgICAga2V5UGF0aDogRGJNdXRhdGlvblF1ZXVlLmtleVBhdGhcclxuICAgIH0pO1xyXG4gICAgdmFyIG11dGF0aW9uQmF0Y2hlc1N0b3JlID0gZGIuY3JlYXRlT2JqZWN0U3RvcmUoRGJNdXRhdGlvbkJhdGNoLnN0b3JlLCB7XHJcbiAgICAgICAga2V5UGF0aDogRGJNdXRhdGlvbkJhdGNoLmtleVBhdGgsXHJcbiAgICAgICAgYXV0b0luY3JlbWVudDogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBtdXRhdGlvbkJhdGNoZXNTdG9yZS5jcmVhdGVJbmRleChEYk11dGF0aW9uQmF0Y2gudXNlck11dGF0aW9uc0luZGV4LCBEYk11dGF0aW9uQmF0Y2gudXNlck11dGF0aW9uc0tleVBhdGgsIHsgdW5pcXVlOiB0cnVlIH0pO1xyXG4gICAgZGIuY3JlYXRlT2JqZWN0U3RvcmUoRGJEb2N1bWVudE11dGF0aW9uLnN0b3JlKTtcclxufVxyXG4vKipcclxuICogVXBncmFkZSBmdW5jdGlvbiB0byBtaWdyYXRlIHRoZSAnbXV0YXRpb25zJyBzdG9yZSBmcm9tIFYxIHRvIFYzLiBMb2Fkc1xyXG4gKiBhbmQgcmV3cml0ZXMgYWxsIGRhdGEuXHJcbiAqL1xyXG5mdW5jdGlvbiB1cGdyYWRlTXV0YXRpb25CYXRjaFNjaGVtYUFuZE1pZ3JhdGVEYXRhKGRiLCB0eG4pIHtcclxuICAgIHZhciB2MU11dGF0aW9uc1N0b3JlID0gdHhuLnN0b3JlKERiTXV0YXRpb25CYXRjaC5zdG9yZSk7XHJcbiAgICByZXR1cm4gdjFNdXRhdGlvbnNTdG9yZS5sb2FkQWxsKCkubmV4dChmdW5jdGlvbiAoZXhpc3RpbmdNdXRhdGlvbnMpIHtcclxuICAgICAgICBkYi5kZWxldGVPYmplY3RTdG9yZShEYk11dGF0aW9uQmF0Y2guc3RvcmUpO1xyXG4gICAgICAgIHZhciBtdXRhdGlvbnNTdG9yZSA9IGRiLmNyZWF0ZU9iamVjdFN0b3JlKERiTXV0YXRpb25CYXRjaC5zdG9yZSwge1xyXG4gICAgICAgICAgICBrZXlQYXRoOiBEYk11dGF0aW9uQmF0Y2gua2V5UGF0aCxcclxuICAgICAgICAgICAgYXV0b0luY3JlbWVudDogdHJ1ZVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIG11dGF0aW9uc1N0b3JlLmNyZWF0ZUluZGV4KERiTXV0YXRpb25CYXRjaC51c2VyTXV0YXRpb25zSW5kZXgsIERiTXV0YXRpb25CYXRjaC51c2VyTXV0YXRpb25zS2V5UGF0aCwgeyB1bmlxdWU6IHRydWUgfSk7XHJcbiAgICAgICAgdmFyIHYzTXV0YXRpb25zU3RvcmUgPSB0eG4uc3RvcmUoRGJNdXRhdGlvbkJhdGNoLnN0b3JlKTtcclxuICAgICAgICB2YXIgd3JpdGVBbGwgPSBleGlzdGluZ011dGF0aW9ucy5tYXAoZnVuY3Rpb24gKG11dGF0aW9uKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB2M011dGF0aW9uc1N0b3JlLnB1dChtdXRhdGlvbik7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS53YWl0Rm9yKHdyaXRlQWxsKTtcclxuICAgIH0pO1xyXG59XHJcbi8qKlxyXG4gKiBBbiBvYmplY3QgdG8gYmUgc3RvcmVkIGluIHRoZSAnZG9jdW1lbnRNdXRhdGlvbnMnIHN0b3JlIGluIEluZGV4ZWREYi5cclxuICpcclxuICogQSBtYW51YWxseSBtYWludGFpbmVkIGluZGV4IG9mIGFsbCB0aGUgbXV0YXRpb24gYmF0Y2hlcyB0aGF0IGFmZmVjdCBhIGdpdmVuXHJcbiAqIGRvY3VtZW50IGtleS4gVGhlIHJvd3MgaW4gdGhpcyB0YWJsZSBhcmUgcmVmZXJlbmNlcyBiYXNlZCBvbiB0aGUgY29udGVudHMgb2ZcclxuICogRGJNdXRhdGlvbkJhdGNoLm11dGF0aW9ucy5cclxuICovXHJcbnZhciBEYkRvY3VtZW50TXV0YXRpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBEYkRvY3VtZW50TXV0YXRpb24oKSB7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYSBbdXNlcklkXSBrZXkgZm9yIHVzZSBpbiB0aGUgRGJEb2N1bWVudE11dGF0aW9ucyBpbmRleCB0byBpdGVyYXRlXHJcbiAgICAgKiBvdmVyIGFsbCBvZiBhIHVzZXIncyBkb2N1bWVudCBtdXRhdGlvbnMuXHJcbiAgICAgKi9cclxuICAgIERiRG9jdW1lbnRNdXRhdGlvbi5wcmVmaXhGb3JVc2VyID0gZnVuY3Rpb24gKHVzZXJJZCkge1xyXG4gICAgICAgIHJldHVybiBbdXNlcklkXTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYSBbdXNlcklkLCBlbmNvZGVkUGF0aF0ga2V5IGZvciB1c2UgaW4gdGhlIERiRG9jdW1lbnRNdXRhdGlvbnNcclxuICAgICAqIGluZGV4IHRvIGl0ZXJhdGUgb3ZlciBhbGwgYXQgZG9jdW1lbnQgbXV0YXRpb25zIGZvciBhIGdpdmVuIHBhdGggb3IgbG93ZXIuXHJcbiAgICAgKi9cclxuICAgIERiRG9jdW1lbnRNdXRhdGlvbi5wcmVmaXhGb3JQYXRoID0gZnVuY3Rpb24gKHVzZXJJZCwgcGF0aCkge1xyXG4gICAgICAgIHJldHVybiBbdXNlcklkLCBlbmNvZGUocGF0aCldO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhIGZ1bGwgaW5kZXgga2V5IG9mIFt1c2VySWQsIGVuY29kZWRQYXRoLCBiYXRjaElkXSBmb3IgaW5zZXJ0aW5nXHJcbiAgICAgKiBhbmQgZGVsZXRpbmcgaW50byB0aGUgRGJEb2N1bWVudE11dGF0aW9ucyBpbmRleC5cclxuICAgICAqL1xyXG4gICAgRGJEb2N1bWVudE11dGF0aW9uLmtleSA9IGZ1bmN0aW9uICh1c2VySWQsIHBhdGgsIGJhdGNoSWQpIHtcclxuICAgICAgICByZXR1cm4gW3VzZXJJZCwgZW5jb2RlKHBhdGgpLCBiYXRjaElkXTtcclxuICAgIH07XHJcbiAgICBEYkRvY3VtZW50TXV0YXRpb24uc3RvcmUgPSAnZG9jdW1lbnRNdXRhdGlvbnMnO1xyXG4gICAgLyoqXHJcbiAgICAgKiBCZWNhdXNlIHdlIHN0b3JlIGFsbCB0aGUgdXNlZnVsIGluZm9ybWF0aW9uIGZvciB0aGlzIHN0b3JlIGluIHRoZSBrZXksXHJcbiAgICAgKiB0aGVyZSBpcyBubyB1c2VmdWwgaW5mb3JtYXRpb24gdG8gc3RvcmUgYXMgdGhlIHZhbHVlLiBUaGUgcmF3ICh1bmVuY29kZWQpXHJcbiAgICAgKiBwYXRoIGNhbm5vdCBiZSBzdG9yZWQgYmVjYXVzZSBJbmRleGVkRGIgZG9lc24ndCBzdG9yZSBwcm90b3R5cGVcclxuICAgICAqIGluZm9ybWF0aW9uLlxyXG4gICAgICovXHJcbiAgICBEYkRvY3VtZW50TXV0YXRpb24uUExBQ0VIT0xERVIgPSBuZXcgRGJEb2N1bWVudE11dGF0aW9uKCk7XHJcbiAgICByZXR1cm4gRGJEb2N1bWVudE11dGF0aW9uO1xyXG59KCkpO1xyXG5mdW5jdGlvbiBjcmVhdGVSZW1vdGVEb2N1bWVudENhY2hlKGRiKSB7XHJcbiAgICBkYi5jcmVhdGVPYmplY3RTdG9yZShEYlJlbW90ZURvY3VtZW50LnN0b3JlKTtcclxufVxyXG4vKipcclxuICogUmVwcmVzZW50cyB0aGUga25vd24gYWJzZW5jZSBvZiBhIGRvY3VtZW50IGF0IGEgcGFydGljdWxhciB2ZXJzaW9uLlxyXG4gKiBTdG9yZWQgaW4gSW5kZXhlZERiIGFzIHBhcnQgb2YgYSBEYlJlbW90ZURvY3VtZW50IG9iamVjdC5cclxuICovXHJcbnZhciBEYk5vRG9jdW1lbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBEYk5vRG9jdW1lbnQocGF0aCwgcmVhZFRpbWUpIHtcclxuICAgICAgICB0aGlzLnBhdGggPSBwYXRoO1xyXG4gICAgICAgIHRoaXMucmVhZFRpbWUgPSByZWFkVGltZTtcclxuICAgIH1cclxuICAgIHJldHVybiBEYk5vRG9jdW1lbnQ7XHJcbn0oKSk7XHJcbi8qKlxyXG4gKiBSZXByZXNlbnRzIGEgZG9jdW1lbnQgdGhhdCBpcyBrbm93biB0byBleGlzdCBidXQgd2hvc2UgZGF0YSBpcyB1bmtub3duLlxyXG4gKiBTdG9yZWQgaW4gSW5kZXhlZERiIGFzIHBhcnQgb2YgYSBEYlJlbW90ZURvY3VtZW50IG9iamVjdC5cclxuICovXHJcbnZhciBEYlVua25vd25Eb2N1bWVudCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIERiVW5rbm93bkRvY3VtZW50KHBhdGgsIHZlcnNpb24pIHtcclxuICAgICAgICB0aGlzLnBhdGggPSBwYXRoO1xyXG4gICAgICAgIHRoaXMudmVyc2lvbiA9IHZlcnNpb247XHJcbiAgICB9XHJcbiAgICByZXR1cm4gRGJVbmtub3duRG9jdW1lbnQ7XHJcbn0oKSk7XHJcbi8qKlxyXG4gKiBBbiBvYmplY3QgdG8gYmUgc3RvcmVkIGluIHRoZSAncmVtb3RlRG9jdW1lbnRzJyBzdG9yZSBpbiBJbmRleGVkRGIuXHJcbiAqIEl0IHJlcHJlc2VudHMgZWl0aGVyOlxyXG4gKlxyXG4gKiAtIEEgY29tcGxldGUgZG9jdW1lbnQuXHJcbiAqIC0gQSBcIm5vIGRvY3VtZW50XCIgcmVwcmVzZW50aW5nIGEgZG9jdW1lbnQgdGhhdCBpcyBrbm93biBub3QgdG8gZXhpc3QgKGF0XHJcbiAqIHNvbWUgdmVyc2lvbikuXHJcbiAqIC0gQW4gXCJ1bmtub3duIGRvY3VtZW50XCIgcmVwcmVzZW50aW5nIGEgZG9jdW1lbnQgdGhhdCBpcyBrbm93biB0byBleGlzdCAoYXRcclxuICogc29tZSB2ZXJzaW9uKSBidXQgd2hvc2UgY29udGVudHMgYXJlIHVua25vd24uXHJcbiAqXHJcbiAqIE5vdGU6IFRoaXMgaXMgdGhlIHBlcnNpc3RlZCBlcXVpdmFsZW50IG9mIGEgTWF5YmVEb2N1bWVudCBhbmQgY291bGQgcGVyaGFwc1xyXG4gKiBiZSBtYWRlIG1vcmUgZ2VuZXJhbCBpZiBuZWNlc3NhcnkuXHJcbiAqL1xyXG52YXIgRGJSZW1vdGVEb2N1bWVudCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIC8vIFRPRE86IFdlIGFyZSBjdXJyZW50bHkgc3RvcmluZyBmdWxsIGRvY3VtZW50IGtleXMgYWxtb3N0IHRocmVlIHRpbWVzXHJcbiAgICAvLyAob25jZSBhcyBwYXJ0IG9mIHRoZSBwcmltYXJ5IGtleSwgb25jZSAtIHBhcnRseSAtIGFzIGBwYXJlbnRQYXRoYCBhbmQgb25jZVxyXG4gICAgLy8gaW5zaWRlIHRoZSBlbmNvZGVkIGRvY3VtZW50cykuIER1cmluZyBvdXIgbmV4dCBtaWdyYXRpb24sIHdlIHNob3VsZFxyXG4gICAgLy8gcmV3cml0ZSB0aGUgcHJpbWFyeSBrZXkgYXMgcGFyZW50UGF0aCArIGRvY3VtZW50IElEIHdoaWNoIHdvdWxkIGFsbG93IHVzXHJcbiAgICAvLyB0byBkcm9wIG9uZSB2YWx1ZS5cclxuICAgIGZ1bmN0aW9uIERiUmVtb3RlRG9jdW1lbnQoXHJcbiAgICAvKipcclxuICAgICAqIFNldCB0byBhbiBpbnN0YW5jZSBvZiBEYlVua25vd25Eb2N1bWVudCBpZiB0aGUgZGF0YSBmb3IgYSBkb2N1bWVudCBpc1xyXG4gICAgICogbm90IGtub3duLCBidXQgaXQgaXMga25vd24gdGhhdCBhIGRvY3VtZW50IGV4aXN0cyBhdCB0aGUgc3BlY2lmaWVkXHJcbiAgICAgKiB2ZXJzaW9uIChlLmcuIGl0IGhhZCBhIHN1Y2Nlc3NmdWwgdXBkYXRlIGFwcGxpZWQgdG8gaXQpXHJcbiAgICAgKi9cclxuICAgIHVua25vd25Eb2N1bWVudCwgXHJcbiAgICAvKipcclxuICAgICAqIFNldCB0byBhbiBpbnN0YW5jZSBvZiBhIERiTm9Eb2N1bWVudCBpZiBpdCBpcyBrbm93biB0aGF0IG5vIGRvY3VtZW50XHJcbiAgICAgKiBleGlzdHMuXHJcbiAgICAgKi9cclxuICAgIG5vRG9jdW1lbnQsIFxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXQgdG8gYW4gaW5zdGFuY2Ugb2YgYSBEb2N1bWVudCBpZiB0aGVyZSdzIGEgY2FjaGVkIHZlcnNpb24gb2YgdGhlXHJcbiAgICAgKiBkb2N1bWVudC5cclxuICAgICAqL1xyXG4gICAgZG9jdW1lbnQsIFxyXG4gICAgLyoqXHJcbiAgICAgKiBEb2N1bWVudHMgdGhhdCB3ZXJlIHdyaXR0ZW4gdG8gdGhlIHJlbW90ZSBkb2N1bWVudCBzdG9yZSBiYXNlZCBvblxyXG4gICAgICogYSB3cml0ZSBhY2tub3dsZWRnbWVudCBhcmUgbWFya2VkIHdpdGggYGhhc0NvbW1pdHRlZE11dGF0aW9uc2AuIFRoZXNlXHJcbiAgICAgKiBkb2N1bWVudHMgYXJlIHBvdGVudGlhbGx5IGluY29uc2lzdGVudCB3aXRoIHRoZSBiYWNrZW5kJ3MgY29weSBhbmQgdXNlXHJcbiAgICAgKiB0aGUgd3JpdGUncyBjb21taXQgdmVyc2lvbiBhcyB0aGVpciBkb2N1bWVudCB2ZXJzaW9uLlxyXG4gICAgICovXHJcbiAgICBoYXNDb21taXR0ZWRNdXRhdGlvbnMsIFxyXG4gICAgLyoqXHJcbiAgICAgKiBXaGVuIHRoZSBkb2N1bWVudCB3YXMgcmVhZCBmcm9tIHRoZSBiYWNrZW5kLiBVbmRlZmluZWQgZm9yIGRhdGEgd3JpdHRlblxyXG4gICAgICogcHJpb3IgdG8gc2NoZW1hIHZlcnNpb24gOS5cclxuICAgICAqL1xyXG4gICAgcmVhZFRpbWUsIFxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgcGF0aCBvZiB0aGUgY29sbGVjdGlvbiB0aGlzIGRvY3VtZW50IGlzIHBhcnQgb2YuIFVuZGVmaW5lZCBmb3IgZGF0YVxyXG4gICAgICogd3JpdHRlbiBwcmlvciB0byBzY2hlbWEgdmVyc2lvbiA5LlxyXG4gICAgICovXHJcbiAgICBwYXJlbnRQYXRoKSB7XHJcbiAgICAgICAgdGhpcy51bmtub3duRG9jdW1lbnQgPSB1bmtub3duRG9jdW1lbnQ7XHJcbiAgICAgICAgdGhpcy5ub0RvY3VtZW50ID0gbm9Eb2N1bWVudDtcclxuICAgICAgICB0aGlzLmRvY3VtZW50ID0gZG9jdW1lbnQ7XHJcbiAgICAgICAgdGhpcy5oYXNDb21taXR0ZWRNdXRhdGlvbnMgPSBoYXNDb21taXR0ZWRNdXRhdGlvbnM7XHJcbiAgICAgICAgdGhpcy5yZWFkVGltZSA9IHJlYWRUaW1lO1xyXG4gICAgICAgIHRoaXMucGFyZW50UGF0aCA9IHBhcmVudFBhdGg7XHJcbiAgICB9XHJcbiAgICBEYlJlbW90ZURvY3VtZW50LnN0b3JlID0gJ3JlbW90ZURvY3VtZW50cyc7XHJcbiAgICAvKipcclxuICAgICAqIEFuIGluZGV4IHRoYXQgcHJvdmlkZXMgYWNjZXNzIHRvIGFsbCBlbnRyaWVzIHNvcnRlZCBieSByZWFkIHRpbWUgKHdoaWNoXHJcbiAgICAgKiBjb3JyZXNwb25kcyB0byB0aGUgbGFzdCBtb2RpZmljYXRpb24gdGltZSBvZiBlYWNoIHJvdykuXHJcbiAgICAgKlxyXG4gICAgICogVGhpcyBpbmRleCBpcyB1c2VkIHRvIHByb3ZpZGUgYSBjaGFuZ2Vsb2cgZm9yIE11bHRpLVRhYi5cclxuICAgICAqL1xyXG4gICAgRGJSZW1vdGVEb2N1bWVudC5yZWFkVGltZUluZGV4ID0gJ3JlYWRUaW1lSW5kZXgnO1xyXG4gICAgRGJSZW1vdGVEb2N1bWVudC5yZWFkVGltZUluZGV4UGF0aCA9ICdyZWFkVGltZSc7XHJcbiAgICAvKipcclxuICAgICAqIEFuIGluZGV4IHRoYXQgcHJvdmlkZXMgYWNjZXNzIHRvIGRvY3VtZW50cyBpbiBhIGNvbGxlY3Rpb24gc29ydGVkIGJ5IHJlYWRcclxuICAgICAqIHRpbWUuXHJcbiAgICAgKlxyXG4gICAgICogVGhpcyBpbmRleCBpcyB1c2VkIHRvIGFsbG93IHRoZSBSZW1vdGVEb2N1bWVudENhY2hlIHRvIGZldGNoIG5ld2x5IGNoYW5nZWRcclxuICAgICAqIGRvY3VtZW50cyBpbiBhIGNvbGxlY3Rpb24uXHJcbiAgICAgKi9cclxuICAgIERiUmVtb3RlRG9jdW1lbnQuY29sbGVjdGlvblJlYWRUaW1lSW5kZXggPSAnY29sbGVjdGlvblJlYWRUaW1lSW5kZXgnO1xyXG4gICAgRGJSZW1vdGVEb2N1bWVudC5jb2xsZWN0aW9uUmVhZFRpbWVJbmRleFBhdGggPSBbJ3BhcmVudFBhdGgnLCAncmVhZFRpbWUnXTtcclxuICAgIHJldHVybiBEYlJlbW90ZURvY3VtZW50O1xyXG59KCkpO1xyXG4vKipcclxuICogQ29udGFpbnMgYSBzaW5nbGUgZW50cnkgdGhhdCBoYXMgbWV0YWRhdGEgYWJvdXQgdGhlIHJlbW90ZSBkb2N1bWVudCBjYWNoZS5cclxuICovXHJcbnZhciBEYlJlbW90ZURvY3VtZW50R2xvYmFsID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0gYnl0ZVNpemUgQXBwcm94aW1hdGVseSB0aGUgdG90YWwgc2l6ZSBpbiBieXRlcyBvZiBhbGwgdGhlIGRvY3VtZW50cyBpbiB0aGUgZG9jdW1lbnRcclxuICAgICAqIGNhY2hlLlxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBEYlJlbW90ZURvY3VtZW50R2xvYmFsKGJ5dGVTaXplKSB7XHJcbiAgICAgICAgdGhpcy5ieXRlU2l6ZSA9IGJ5dGVTaXplO1xyXG4gICAgfVxyXG4gICAgRGJSZW1vdGVEb2N1bWVudEdsb2JhbC5zdG9yZSA9ICdyZW1vdGVEb2N1bWVudEdsb2JhbCc7XHJcbiAgICBEYlJlbW90ZURvY3VtZW50R2xvYmFsLmtleSA9ICdyZW1vdGVEb2N1bWVudEdsb2JhbEtleSc7XHJcbiAgICByZXR1cm4gRGJSZW1vdGVEb2N1bWVudEdsb2JhbDtcclxufSgpKTtcclxuZnVuY3Rpb24gY3JlYXRlRG9jdW1lbnRHbG9iYWxTdG9yZShkYikge1xyXG4gICAgZGIuY3JlYXRlT2JqZWN0U3RvcmUoRGJSZW1vdGVEb2N1bWVudEdsb2JhbC5zdG9yZSk7XHJcbn1cclxuLyoqXHJcbiAqIEFuIG9iamVjdCB0byBiZSBzdG9yZWQgaW4gdGhlICd0YXJnZXRzJyBzdG9yZSBpbiBJbmRleGVkRGIuXHJcbiAqXHJcbiAqIFRoaXMgaXMgYmFzZWQgb24gYW5kIHNob3VsZCBiZSBrZXB0IGluIHN5bmMgd2l0aCB0aGUgcHJvdG8gdXNlZCBpbiB0aGUgaU9TXHJcbiAqIGNsaWVudC5cclxuICpcclxuICogRWFjaCBxdWVyeSB0aGUgY2xpZW50IGxpc3RlbnMgdG8gYWdhaW5zdCB0aGUgc2VydmVyIGlzIHRyYWNrZWQgb24gZGlzayBzb1xyXG4gKiB0aGF0IHRoZSBxdWVyeSBjYW4gYmUgZWZmaWNpZW50bHkgcmVzdW1lZCBvbiByZXN0YXJ0LlxyXG4gKi9cclxudmFyIERiVGFyZ2V0ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gRGJUYXJnZXQoXHJcbiAgICAvKipcclxuICAgICAqIEFuIGF1dG8tZ2VuZXJhdGVkIHNlcXVlbnRpYWwgbnVtZXJpYyBpZGVudGlmaWVyIGZvciB0aGUgcXVlcnkuXHJcbiAgICAgKlxyXG4gICAgICogUXVlcmllcyBhcmUgc3RvcmVkIHVzaW5nIHRoZWlyIGNhbm9uaWNhbElkIGFzIHRoZSBrZXksIGJ1dCB0aGVzZVxyXG4gICAgICogY2Fub25pY2FsSWRzIGNhbiBiZSBxdWl0ZSBsb25nIHNvIHdlIGFkZGl0aW9uYWxseSBhc3NpZ24gYSB1bmlxdWVcclxuICAgICAqIHF1ZXJ5SWQgd2hpY2ggY2FuIGJlIHVzZWQgYnkgcmVmZXJlbmNlZCBkYXRhIHN0cnVjdHVyZXMgKGUuZy5cclxuICAgICAqIGluZGV4ZXMpIHRvIG1pbmltaXplIHRoZSBvbi1kaXNrIGNvc3QuXHJcbiAgICAgKi9cclxuICAgIHRhcmdldElkLCBcclxuICAgIC8qKlxyXG4gICAgICogVGhlIGNhbm9uaWNhbCBzdHJpbmcgcmVwcmVzZW50aW5nIHRoaXMgcXVlcnkuIFRoaXMgaXMgbm90IHVuaXF1ZS5cclxuICAgICAqL1xyXG4gICAgY2Fub25pY2FsSWQsIFxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgbGFzdCByZWFkVGltZSByZWNlaXZlZCBmcm9tIHRoZSBXYXRjaCBTZXJ2aWNlIGZvciB0aGlzIHF1ZXJ5LlxyXG4gICAgICpcclxuICAgICAqIFRoaXMgaXMgdGhlIHNhbWUgdmFsdWUgYXMgVGFyZ2V0Q2hhbmdlLnJlYWRfdGltZSBpbiB0aGUgcHJvdG9zLlxyXG4gICAgICovXHJcbiAgICByZWFkVGltZSwgXHJcbiAgICAvKipcclxuICAgICAqIEFuIG9wYXF1ZSwgc2VydmVyLWFzc2lnbmVkIHRva2VuIHRoYXQgYWxsb3dzIHdhdGNoaW5nIGEgcXVlcnkgdG8gYmVcclxuICAgICAqIHJlc3VtZWQgYWZ0ZXIgZGlzY29ubmVjdGluZyB3aXRob3V0IHJldHJhbnNtaXR0aW5nIGFsbCB0aGUgZGF0YVxyXG4gICAgICogdGhhdCBtYXRjaGVzIHRoZSBxdWVyeS4gVGhlIHJlc3VtZSB0b2tlbiBlc3NlbnRpYWxseSBpZGVudGlmaWVzIGFcclxuICAgICAqIHBvaW50IGluIHRpbWUgZnJvbSB3aGljaCB0aGUgc2VydmVyIHNob3VsZCByZXN1bWUgc2VuZGluZyByZXN1bHRzLlxyXG4gICAgICpcclxuICAgICAqIFRoaXMgaXMgcmVsYXRlZCB0byB0aGUgc25hcHNob3RWZXJzaW9uIGluIHRoYXQgdGhlIHJlc3VtZVRva2VuXHJcbiAgICAgKiBlZmZlY3RpdmVseSBhbHNvIGVuY29kZXMgdGhhdCB2YWx1ZSwgYnV0IHRoZSByZXN1bWVUb2tlbiBpcyBvcGFxdWVcclxuICAgICAqIGFuZCBzb21ldGltZXMgZW5jb2RlcyBhZGRpdGlvbmFsIGluZm9ybWF0aW9uLlxyXG4gICAgICpcclxuICAgICAqIEEgY29uc2VxdWVuY2Ugb2YgdGhpcyBpcyB0aGF0IHRoZSByZXN1bWVUb2tlbiBzaG91bGQgYmUgdXNlZCB3aGVuXHJcbiAgICAgKiBhc2tpbmcgdGhlIHNlcnZlciB0byByZWFzb24gYWJvdXQgd2hlcmUgdGhpcyBjbGllbnQgaXMgaW4gdGhlIHdhdGNoXHJcbiAgICAgKiBzdHJlYW0sIGJ1dCB0aGUgY2xpZW50IHNob3VsZCB1c2UgdGhlIHNuYXBzaG90VmVyc2lvbiBmb3IgaXRzIG93blxyXG4gICAgICogcHVycG9zZXMuXHJcbiAgICAgKlxyXG4gICAgICogVGhpcyBpcyB0aGUgc2FtZSB2YWx1ZSBhcyBUYXJnZXRDaGFuZ2UucmVzdW1lX3Rva2VuIGluIHRoZSBwcm90b3MuXHJcbiAgICAgKi9cclxuICAgIHJlc3VtZVRva2VuLCBcclxuICAgIC8qKlxyXG4gICAgICogQSBzZXF1ZW5jZSBudW1iZXIgcmVwcmVzZW50aW5nIHRoZSBsYXN0IHRpbWUgdGhpcyBxdWVyeSB3YXNcclxuICAgICAqIGxpc3RlbmVkIHRvLCB1c2VkIGZvciBnYXJiYWdlIGNvbGxlY3Rpb24gcHVycG9zZXMuXHJcbiAgICAgKlxyXG4gICAgICogQ29udmVudGlvbmFsbHkgdGhpcyB3b3VsZCBiZSBhIHRpbWVzdGFtcCB2YWx1ZSwgYnV0IGRldmljZS1sb2NhbFxyXG4gICAgICogY2xvY2tzIGFyZSB1bnJlbGlhYmxlIGFuZCB0aGV5IG11c3QgYmUgYWJsZSB0byBjcmVhdGUgbmV3IGxpc3RlbnNcclxuICAgICAqIGV2ZW4gd2hpbGUgZGlzY29ubmVjdGVkLiBJbnN0ZWFkIHRoaXMgc2hvdWxkIGJlIGEgbW9ub3RvbmljYWxseVxyXG4gICAgICogaW5jcmVhc2luZyBudW1iZXIgdGhhdCdzIGluY3JlbWVudGVkIG9uIGVhY2ggbGlzdGVuIGNhbGwuXHJcbiAgICAgKlxyXG4gICAgICogVGhpcyBpcyBkaWZmZXJlbnQgZnJvbSB0aGUgcXVlcnlJZCBzaW5jZSB0aGUgcXVlcnlJZCBpcyBhblxyXG4gICAgICogaW1tdXRhYmxlIGlkZW50aWZpZXIgYXNzaWduZWQgdG8gdGhlIFF1ZXJ5IG9uIGZpcnN0IHVzZSB3aGlsZVxyXG4gICAgICogbGFzdExpc3RlblNlcXVlbmNlTnVtYmVyIGlzIHVwZGF0ZWQgZXZlcnkgdGltZSB0aGUgcXVlcnkgaXNcclxuICAgICAqIGxpc3RlbmVkIHRvLlxyXG4gICAgICovXHJcbiAgICBsYXN0TGlzdGVuU2VxdWVuY2VOdW1iZXIsIFxyXG4gICAgLyoqXHJcbiAgICAgKiBEZW5vdGVzIHRoZSBtYXhpbXVtIHNuYXBzaG90IHZlcnNpb24gYXQgd2hpY2ggdGhlIGFzc29jaWF0ZWQgcXVlcnkgdmlld1xyXG4gICAgICogY29udGFpbmVkIG5vIGxpbWJvIGRvY3VtZW50cy4gIFVuZGVmaW5lZCBmb3IgZGF0YSB3cml0dGVuIHByaW9yIHRvXHJcbiAgICAgKiBzY2hlbWEgdmVyc2lvbiA5LlxyXG4gICAgICovXHJcbiAgICBsYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uLCBcclxuICAgIC8qKlxyXG4gICAgICogVGhlIHF1ZXJ5IGZvciB0aGlzIHRhcmdldC5cclxuICAgICAqXHJcbiAgICAgKiBCZWNhdXNlIGNhbm9uaWNhbCBpZHMgYXJlIG5vdCB1bmlxdWUgd2UgbXVzdCBzdG9yZSB0aGUgYWN0dWFsIHF1ZXJ5LiBXZVxyXG4gICAgICogdXNlIHRoZSBwcm90byB0byBoYXZlIGFuIG9iamVjdCB3ZSBjYW4gcGVyc2lzdCB3aXRob3V0IGhhdmluZyB0b1xyXG4gICAgICogZHVwbGljYXRlIHRyYW5zbGF0aW9uIGxvZ2ljIHRvIGFuZCBmcm9tIGEgYFF1ZXJ5YCBvYmplY3QuXHJcbiAgICAgKi9cclxuICAgIHF1ZXJ5KSB7XHJcbiAgICAgICAgdGhpcy50YXJnZXRJZCA9IHRhcmdldElkO1xyXG4gICAgICAgIHRoaXMuY2Fub25pY2FsSWQgPSBjYW5vbmljYWxJZDtcclxuICAgICAgICB0aGlzLnJlYWRUaW1lID0gcmVhZFRpbWU7XHJcbiAgICAgICAgdGhpcy5yZXN1bWVUb2tlbiA9IHJlc3VtZVRva2VuO1xyXG4gICAgICAgIHRoaXMubGFzdExpc3RlblNlcXVlbmNlTnVtYmVyID0gbGFzdExpc3RlblNlcXVlbmNlTnVtYmVyO1xyXG4gICAgICAgIHRoaXMubGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbiA9IGxhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb247XHJcbiAgICAgICAgdGhpcy5xdWVyeSA9IHF1ZXJ5O1xyXG4gICAgfVxyXG4gICAgRGJUYXJnZXQuc3RvcmUgPSAndGFyZ2V0cyc7XHJcbiAgICAvKiogS2V5cyBhcmUgYXV0b21hdGljYWxseSBhc3NpZ25lZCB2aWEgdGhlIHRhcmdldElkIHByb3BlcnR5LiAqL1xyXG4gICAgRGJUYXJnZXQua2V5UGF0aCA9ICd0YXJnZXRJZCc7XHJcbiAgICAvKiogVGhlIG5hbWUgb2YgdGhlIHF1ZXJ5VGFyZ2V0cyBpbmRleC4gKi9cclxuICAgIERiVGFyZ2V0LnF1ZXJ5VGFyZ2V0c0luZGV4TmFtZSA9ICdxdWVyeVRhcmdldHNJbmRleCc7XHJcbiAgICAvKipcclxuICAgICAqIFRoZSBpbmRleCBvZiBhbGwgY2Fub25pY2FsSWRzIHRvIHRoZSB0YXJnZXRzIHRoYXQgdGhleSBtYXRjaC4gVGhpcyBpcyBub3RcclxuICAgICAqIGEgdW5pcXVlIG1hcHBpbmcgYmVjYXVzZSBjYW5vbmljYWxJZCBkb2VzIG5vdCBwcm9taXNlIGEgdW5pcXVlIG5hbWUgZm9yIGFsbFxyXG4gICAgICogcG9zc2libGUgcXVlcmllcywgc28gd2UgYXBwZW5kIHRoZSB0YXJnZXRJZCB0byBtYWtlIHRoZSBtYXBwaW5nIHVuaXF1ZS5cclxuICAgICAqL1xyXG4gICAgRGJUYXJnZXQucXVlcnlUYXJnZXRzS2V5UGF0aCA9IFsnY2Fub25pY2FsSWQnLCAndGFyZ2V0SWQnXTtcclxuICAgIHJldHVybiBEYlRhcmdldDtcclxufSgpKTtcclxuLyoqXHJcbiAqIEFuIG9iamVjdCByZXByZXNlbnRpbmcgYW4gYXNzb2NpYXRpb24gYmV0d2VlbiBhIHRhcmdldCBhbmQgYSBkb2N1bWVudCwgb3IgYVxyXG4gKiBzZW50aW5lbCByb3cgbWFya2luZyB0aGUgbGFzdCBzZXF1ZW5jZSBudW1iZXIgYXQgd2hpY2ggYSBkb2N1bWVudCB3YXMgdXNlZC5cclxuICogRWFjaCBkb2N1bWVudCBjYWNoZWQgbXVzdCBoYXZlIGEgY29ycmVzcG9uZGluZyBzZW50aW5lbCByb3cgYmVmb3JlIGxydVxyXG4gKiBnYXJiYWdlIGNvbGxlY3Rpb24gaXMgZW5hYmxlZC5cclxuICpcclxuICogVGhlIHRhcmdldCBhc3NvY2lhdGlvbnMgYW5kIHNlbnRpbmVsIHJvd3MgYXJlIGNvLWxvY2F0ZWQgc28gdGhhdCBvcnBoYW5lZFxyXG4gKiBkb2N1bWVudHMgYW5kIHRoZWlyIHNlcXVlbmNlIG51bWJlcnMgY2FuIGJlIGlkZW50aWZpZWQgZWZmaWNpZW50bHkgdmlhIGEgc2NhblxyXG4gKiBvZiB0aGlzIHN0b3JlLlxyXG4gKi9cclxudmFyIERiVGFyZ2V0RG9jdW1lbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBEYlRhcmdldERvY3VtZW50KFxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgdGFyZ2V0SWQgaWRlbnRpZnlpbmcgYSB0YXJnZXQgb3IgMCBmb3IgYSBzZW50aW5lbCByb3cuXHJcbiAgICAgKi9cclxuICAgIHRhcmdldElkLCBcclxuICAgIC8qKlxyXG4gICAgICogVGhlIHBhdGggdG8gdGhlIGRvY3VtZW50LCBhcyBlbmNvZGVkIGluIHRoZSBrZXkuXHJcbiAgICAgKi9cclxuICAgIHBhdGgsIFxyXG4gICAgLyoqXHJcbiAgICAgKiBJZiB0aGlzIGlzIGEgc2VudGluZWwgcm93LCB0aGlzIHNob3VsZCBiZSB0aGUgc2VxdWVuY2UgbnVtYmVyIG9mIHRoZSBsYXN0XHJcbiAgICAgKiB0aW1lIHRoZSBkb2N1bWVudCBzcGVjaWZpZWQgYnkgYHBhdGhgIHdhcyB1c2VkLiBPdGhlcndpc2UsIGl0IHNob3VsZCBiZVxyXG4gICAgICogYHVuZGVmaW5lZGAuXHJcbiAgICAgKi9cclxuICAgIHNlcXVlbmNlTnVtYmVyKSB7XHJcbiAgICAgICAgdGhpcy50YXJnZXRJZCA9IHRhcmdldElkO1xyXG4gICAgICAgIHRoaXMucGF0aCA9IHBhdGg7XHJcbiAgICAgICAgdGhpcy5zZXF1ZW5jZU51bWJlciA9IHNlcXVlbmNlTnVtYmVyO1xyXG4gICAgICAgIGFzc2VydCgodGFyZ2V0SWQgPT09IDApID09PSAoc2VxdWVuY2VOdW1iZXIgIT09IHVuZGVmaW5lZCksICdBIHRhcmdldC1kb2N1bWVudCByb3cgbXVzdCBlaXRoZXIgaGF2ZSB0YXJnZXRJZCA9PSAwIGFuZCBhIGRlZmluZWQgc2VxdWVuY2UgbnVtYmVyLCBvciBhIG5vbi16ZXJvIHRhcmdldElkIGFuZCBubyBzZXF1ZW5jZSBudW1iZXInKTtcclxuICAgIH1cclxuICAgIC8qKiBOYW1lIG9mIHRoZSBJbmRleGVkRGIgb2JqZWN0IHN0b3JlLiAgKi9cclxuICAgIERiVGFyZ2V0RG9jdW1lbnQuc3RvcmUgPSAndGFyZ2V0RG9jdW1lbnRzJztcclxuICAgIC8qKiBLZXlzIGFyZSBhdXRvbWF0aWNhbGx5IGFzc2lnbmVkIHZpYSB0aGUgdGFyZ2V0SWQsIHBhdGggcHJvcGVydGllcy4gKi9cclxuICAgIERiVGFyZ2V0RG9jdW1lbnQua2V5UGF0aCA9IFsndGFyZ2V0SWQnLCAncGF0aCddO1xyXG4gICAgLyoqIFRoZSBpbmRleCBuYW1lIGZvciB0aGUgcmV2ZXJzZSBpbmRleC4gKi9cclxuICAgIERiVGFyZ2V0RG9jdW1lbnQuZG9jdW1lbnRUYXJnZXRzSW5kZXggPSAnZG9jdW1lbnRUYXJnZXRzSW5kZXgnO1xyXG4gICAgLyoqIFdlIGFsc28gbmVlZCB0byBjcmVhdGUgdGhlIHJldmVyc2UgaW5kZXggZm9yIHRoZXNlIHByb3BlcnRpZXMuICovXHJcbiAgICBEYlRhcmdldERvY3VtZW50LmRvY3VtZW50VGFyZ2V0c0tleVBhdGggPSBbJ3BhdGgnLCAndGFyZ2V0SWQnXTtcclxuICAgIHJldHVybiBEYlRhcmdldERvY3VtZW50O1xyXG59KCkpO1xyXG4vKipcclxuICogQSByZWNvcmQgb2YgZ2xvYmFsIHN0YXRlIHRyYWNrZWQgYWNyb3NzIGFsbCBUYXJnZXRzLCB0cmFja2VkIHNlcGFyYXRlbHlcclxuICogdG8gYXZvaWQgdGhlIG5lZWQgZm9yIGV4dHJhIGluZGV4ZXMuXHJcbiAqXHJcbiAqIFRoaXMgc2hvdWxkIGJlIGtlcHQgaW4tc3luYyB3aXRoIHRoZSBwcm90byB1c2VkIGluIHRoZSBpT1MgY2xpZW50LlxyXG4gKi9cclxudmFyIERiVGFyZ2V0R2xvYmFsID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gRGJUYXJnZXRHbG9iYWwoXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBoaWdoZXN0IG51bWJlcmVkIHRhcmdldCBpZCBhY3Jvc3MgYWxsIHRhcmdldHMuXHJcbiAgICAgKlxyXG4gICAgICogU2VlIERiVGFyZ2V0LnRhcmdldElkLlxyXG4gICAgICovXHJcbiAgICBoaWdoZXN0VGFyZ2V0SWQsIFxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgaGlnaGVzdCBudW1iZXJlZCBsYXN0TGlzdGVuU2VxdWVuY2VOdW1iZXIgYWNyb3NzIGFsbCB0YXJnZXRzLlxyXG4gICAgICpcclxuICAgICAqIFNlZSBEYlRhcmdldC5sYXN0TGlzdGVuU2VxdWVuY2VOdW1iZXIuXHJcbiAgICAgKi9cclxuICAgIGhpZ2hlc3RMaXN0ZW5TZXF1ZW5jZU51bWJlciwgXHJcbiAgICAvKipcclxuICAgICAqIEEgZ2xvYmFsIHNuYXBzaG90IHZlcnNpb24gcmVwcmVzZW50aW5nIHRoZSBsYXN0IGNvbnNpc3RlbnQgc25hcHNob3Qgd2VcclxuICAgICAqIHJlY2VpdmVkIGZyb20gdGhlIGJhY2tlbmQuIFRoaXMgaXMgbW9ub3RvbmljYWxseSBpbmNyZWFzaW5nIGFuZCBhbnlcclxuICAgICAqIHNuYXBzaG90cyByZWNlaXZlZCBmcm9tIHRoZSBiYWNrZW5kIHByaW9yIHRvIHRoaXMgdmVyc2lvbiAoZS5nLiBmb3JcclxuICAgICAqIHRhcmdldHMgcmVzdW1lZCB3aXRoIGEgcmVzdW1lVG9rZW4pIHNob3VsZCBiZSBzdXBwcmVzc2VkIChidWZmZXJlZClcclxuICAgICAqIHVudGlsIHRoZSBiYWNrZW5kIGhhcyBjYXVnaHQgdXAgdG8gdGhpcyBzbmFwc2hvdCB2ZXJzaW9uIGFnYWluLiBUaGlzXHJcbiAgICAgKiBwcmV2ZW50cyBvdXIgY2FjaGUgZnJvbSBldmVyIGdvaW5nIGJhY2t3YXJkcyBpbiB0aW1lLlxyXG4gICAgICovXHJcbiAgICBsYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uLCBcclxuICAgIC8qKlxyXG4gICAgICogVGhlIG51bWJlciBvZiB0YXJnZXRzIHBlcnNpc3RlZC5cclxuICAgICAqL1xyXG4gICAgdGFyZ2V0Q291bnQpIHtcclxuICAgICAgICB0aGlzLmhpZ2hlc3RUYXJnZXRJZCA9IGhpZ2hlc3RUYXJnZXRJZDtcclxuICAgICAgICB0aGlzLmhpZ2hlc3RMaXN0ZW5TZXF1ZW5jZU51bWJlciA9IGhpZ2hlc3RMaXN0ZW5TZXF1ZW5jZU51bWJlcjtcclxuICAgICAgICB0aGlzLmxhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24gPSBsYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uO1xyXG4gICAgICAgIHRoaXMudGFyZ2V0Q291bnQgPSB0YXJnZXRDb3VudDtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogVGhlIGtleSBzdHJpbmcgdXNlZCBmb3IgdGhlIHNpbmdsZSBvYmplY3QgdGhhdCBleGlzdHMgaW4gdGhlXHJcbiAgICAgKiBEYlRhcmdldEdsb2JhbCBzdG9yZS5cclxuICAgICAqL1xyXG4gICAgRGJUYXJnZXRHbG9iYWwua2V5ID0gJ3RhcmdldEdsb2JhbEtleSc7XHJcbiAgICBEYlRhcmdldEdsb2JhbC5zdG9yZSA9ICd0YXJnZXRHbG9iYWwnO1xyXG4gICAgcmV0dXJuIERiVGFyZ2V0R2xvYmFsO1xyXG59KCkpO1xyXG4vKipcclxuICogQW4gb2JqZWN0IHJlcHJlc2VudGluZyBhbiBhc3NvY2lhdGlvbiBiZXR3ZWVuIGEgQ29sbGVjdGlvbiBpZCAoZS5nLiAnbWVzc2FnZXMnKVxyXG4gKiB0byBhIHBhcmVudCBwYXRoIChlLmcuICcvY2hhdHMvMTIzJykgdGhhdCBjb250YWlucyBpdCBhcyBhIChzdWIpY29sbGVjdGlvbi5cclxuICogVGhpcyBpcyB1c2VkIHRvIGVmZmljaWVudGx5IGZpbmQgYWxsIGNvbGxlY3Rpb25zIHRvIHF1ZXJ5IHdoZW4gcGVyZm9ybWluZ1xyXG4gKiBhIENvbGxlY3Rpb24gR3JvdXAgcXVlcnkuXHJcbiAqL1xyXG52YXIgRGJDb2xsZWN0aW9uUGFyZW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gRGJDb2xsZWN0aW9uUGFyZW50KFxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgY29sbGVjdGlvbklkIChlLmcuICdtZXNzYWdlcycpXHJcbiAgICAgKi9cclxuICAgIGNvbGxlY3Rpb25JZCwgXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBwYXRoIHRvIHRoZSBwYXJlbnQgKGVpdGhlciBhIGRvY3VtZW50IGxvY2F0aW9uIG9yIGFuIGVtcHR5IHBhdGggZm9yXHJcbiAgICAgKiBhIHJvb3QtbGV2ZWwgY29sbGVjdGlvbikuXHJcbiAgICAgKi9cclxuICAgIHBhcmVudCkge1xyXG4gICAgICAgIHRoaXMuY29sbGVjdGlvbklkID0gY29sbGVjdGlvbklkO1xyXG4gICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xyXG4gICAgfVxyXG4gICAgLyoqIE5hbWUgb2YgdGhlIEluZGV4ZWREYiBvYmplY3Qgc3RvcmUuICovXHJcbiAgICBEYkNvbGxlY3Rpb25QYXJlbnQuc3RvcmUgPSAnY29sbGVjdGlvblBhcmVudHMnO1xyXG4gICAgLyoqIEtleXMgYXJlIGF1dG9tYXRpY2FsbHkgYXNzaWduZWQgdmlhIHRoZSBjb2xsZWN0aW9uSWQsIHBhcmVudCBwcm9wZXJ0aWVzLiAqL1xyXG4gICAgRGJDb2xsZWN0aW9uUGFyZW50LmtleVBhdGggPSBbJ2NvbGxlY3Rpb25JZCcsICdwYXJlbnQnXTtcclxuICAgIHJldHVybiBEYkNvbGxlY3Rpb25QYXJlbnQ7XHJcbn0oKSk7XHJcbmZ1bmN0aW9uIGNyZWF0ZVF1ZXJ5Q2FjaGUoZGIpIHtcclxuICAgIHZhciB0YXJnZXREb2N1bWVudHNTdG9yZSA9IGRiLmNyZWF0ZU9iamVjdFN0b3JlKERiVGFyZ2V0RG9jdW1lbnQuc3RvcmUsIHtcclxuICAgICAgICBrZXlQYXRoOiBEYlRhcmdldERvY3VtZW50LmtleVBhdGhcclxuICAgIH0pO1xyXG4gICAgdGFyZ2V0RG9jdW1lbnRzU3RvcmUuY3JlYXRlSW5kZXgoRGJUYXJnZXREb2N1bWVudC5kb2N1bWVudFRhcmdldHNJbmRleCwgRGJUYXJnZXREb2N1bWVudC5kb2N1bWVudFRhcmdldHNLZXlQYXRoLCB7IHVuaXF1ZTogdHJ1ZSB9KTtcclxuICAgIHZhciB0YXJnZXRTdG9yZSA9IGRiLmNyZWF0ZU9iamVjdFN0b3JlKERiVGFyZ2V0LnN0b3JlLCB7XHJcbiAgICAgICAga2V5UGF0aDogRGJUYXJnZXQua2V5UGF0aFxyXG4gICAgfSk7XHJcbiAgICAvLyBOT1RFOiBUaGlzIGlzIHVuaXF1ZSBvbmx5IGJlY2F1c2UgdGhlIFRhcmdldElkIGlzIHRoZSBzdWZmaXguXHJcbiAgICB0YXJnZXRTdG9yZS5jcmVhdGVJbmRleChEYlRhcmdldC5xdWVyeVRhcmdldHNJbmRleE5hbWUsIERiVGFyZ2V0LnF1ZXJ5VGFyZ2V0c0tleVBhdGgsIHsgdW5pcXVlOiB0cnVlIH0pO1xyXG4gICAgZGIuY3JlYXRlT2JqZWN0U3RvcmUoRGJUYXJnZXRHbG9iYWwuc3RvcmUpO1xyXG59XHJcbmZ1bmN0aW9uIGRyb3BRdWVyeUNhY2hlKGRiKSB7XHJcbiAgICBkYi5kZWxldGVPYmplY3RTdG9yZShEYlRhcmdldERvY3VtZW50LnN0b3JlKTtcclxuICAgIGRiLmRlbGV0ZU9iamVjdFN0b3JlKERiVGFyZ2V0LnN0b3JlKTtcclxuICAgIGRiLmRlbGV0ZU9iamVjdFN0b3JlKERiVGFyZ2V0R2xvYmFsLnN0b3JlKTtcclxufVxyXG5mdW5jdGlvbiBkcm9wUmVtb3RlRG9jdW1lbnRDaGFuZ2VzU3RvcmUoZGIpIHtcclxuICAgIGlmIChkYi5vYmplY3RTdG9yZU5hbWVzLmNvbnRhaW5zKCdyZW1vdGVEb2N1bWVudENoYW5nZXMnKSkge1xyXG4gICAgICAgIGRiLmRlbGV0ZU9iamVjdFN0b3JlKCdyZW1vdGVEb2N1bWVudENoYW5nZXMnKTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogQ3JlYXRlcyB0aGUgdGFyZ2V0IGdsb2JhbCBzaW5nbGV0b24gcm93LlxyXG4gKlxyXG4gKiBAcGFyYW0ge0lEQlRyYW5zYWN0aW9ufSB0eG4gVGhlIHZlcnNpb24gdXBncmFkZSB0cmFuc2FjdGlvbiBmb3IgaW5kZXhlZGRiXHJcbiAqL1xyXG5mdW5jdGlvbiB3cml0ZUVtcHR5VGFyZ2V0R2xvYmFsRW50cnkodHhuKSB7XHJcbiAgICB2YXIgZ2xvYmFsU3RvcmUgPSB0eG4uc3RvcmUoRGJUYXJnZXRHbG9iYWwuc3RvcmUpO1xyXG4gICAgdmFyIG1ldGFkYXRhID0gbmV3IERiVGFyZ2V0R2xvYmFsKFxyXG4gICAgLypoaWdoZXN0VGFyZ2V0SWQ9Ki8gMCwgXHJcbiAgICAvKmxhc3RMaXN0ZW5TZXF1ZW5jZU51bWJlcj0qLyAwLCBTbmFwc2hvdFZlcnNpb24uTUlOLnRvVGltZXN0YW1wKCksIFxyXG4gICAgLyp0YXJnZXRDb3VudD0qLyAwKTtcclxuICAgIHJldHVybiBnbG9iYWxTdG9yZS5wdXQoRGJUYXJnZXRHbG9iYWwua2V5LCBtZXRhZGF0YSk7XHJcbn1cclxuLyoqXHJcbiAqIENyZWF0ZXMgaW5kaWNlcyBvbiB0aGUgUmVtb3RlRG9jdW1lbnRzIHN0b3JlIHVzZWQgZm9yIGJvdGggbXVsdGktdGFiXHJcbiAqIGFuZCBJbmRleC1GcmVlIHF1ZXJpZXMuXHJcbiAqL1xyXG5mdW5jdGlvbiBjcmVhdGVSZW1vdGVEb2N1bWVudFJlYWRUaW1lSW5kZXgodHhuKSB7XHJcbiAgICB2YXIgcmVtb3RlRG9jdW1lbnRTdG9yZSA9IHR4bi5vYmplY3RTdG9yZShEYlJlbW90ZURvY3VtZW50LnN0b3JlKTtcclxuICAgIHJlbW90ZURvY3VtZW50U3RvcmUuY3JlYXRlSW5kZXgoRGJSZW1vdGVEb2N1bWVudC5yZWFkVGltZUluZGV4LCBEYlJlbW90ZURvY3VtZW50LnJlYWRUaW1lSW5kZXhQYXRoLCB7IHVuaXF1ZTogZmFsc2UgfSk7XHJcbiAgICByZW1vdGVEb2N1bWVudFN0b3JlLmNyZWF0ZUluZGV4KERiUmVtb3RlRG9jdW1lbnQuY29sbGVjdGlvblJlYWRUaW1lSW5kZXgsIERiUmVtb3RlRG9jdW1lbnQuY29sbGVjdGlvblJlYWRUaW1lSW5kZXhQYXRoLCB7IHVuaXF1ZTogZmFsc2UgfSk7XHJcbn1cclxuLyoqXHJcbiAqIEEgcmVjb3JkIG9mIHRoZSBtZXRhZGF0YSBzdGF0ZSBvZiBlYWNoIGNsaWVudC5cclxuICpcclxuICogUE9SVElORyBOT1RFOiBUaGlzIGlzIHVzZWQgdG8gc3luY2hyb25pemUgbXVsdGktdGFiIHN0YXRlIGFuZCBkb2VzIG5vdCBuZWVkXHJcbiAqIHRvIGJlIHBvcnRlZCB0byBpT1Mgb3IgQW5kcm9pZC5cclxuICovXHJcbnZhciBEYkNsaWVudE1ldGFkYXRhID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gRGJDbGllbnRNZXRhZGF0YShcclxuICAgIC8vIE5vdGU6IFByZXZpb3VzIHNjaGVtYSB2ZXJzaW9ucyBpbmNsdWRlZCBhIGZpZWxkXHJcbiAgICAvLyBcImxhc3RQcm9jZXNzZWREb2N1bWVudENoYW5nZUlkXCIuIERvbid0IHVzZSBhbnltb3JlLlxyXG4gICAgLyoqIFRoZSBhdXRvLWdlbmVyYXRlZCBjbGllbnQgaWQgYXNzaWduZWQgYXQgY2xpZW50IHN0YXJ0dXAuICovXHJcbiAgICBjbGllbnRJZCwgXHJcbiAgICAvKiogVGhlIGxhc3QgdGltZSB0aGlzIHN0YXRlIHdhcyB1cGRhdGVkLiAqL1xyXG4gICAgdXBkYXRlVGltZU1zLCBcclxuICAgIC8qKiBXaGV0aGVyIHRoZSBjbGllbnQncyBuZXR3b3JrIGNvbm5lY3Rpb24gaXMgZW5hYmxlZC4gKi9cclxuICAgIG5ldHdvcmtFbmFibGVkLCBcclxuICAgIC8qKiBXaGV0aGVyIHRoaXMgY2xpZW50IGlzIHJ1bm5pbmcgaW4gYSBmb3JlZ3JvdW5kIHRhYi4gKi9cclxuICAgIGluRm9yZWdyb3VuZCkge1xyXG4gICAgICAgIHRoaXMuY2xpZW50SWQgPSBjbGllbnRJZDtcclxuICAgICAgICB0aGlzLnVwZGF0ZVRpbWVNcyA9IHVwZGF0ZVRpbWVNcztcclxuICAgICAgICB0aGlzLm5ldHdvcmtFbmFibGVkID0gbmV0d29ya0VuYWJsZWQ7XHJcbiAgICAgICAgdGhpcy5pbkZvcmVncm91bmQgPSBpbkZvcmVncm91bmQ7XHJcbiAgICB9XHJcbiAgICAvKiogTmFtZSBvZiB0aGUgSW5kZXhlZERiIG9iamVjdCBzdG9yZS4gKi9cclxuICAgIERiQ2xpZW50TWV0YWRhdGEuc3RvcmUgPSAnY2xpZW50TWV0YWRhdGEnO1xyXG4gICAgLyoqIEtleXMgYXJlIGF1dG9tYXRpY2FsbHkgYXNzaWduZWQgdmlhIHRoZSBjbGllbnRJZCBwcm9wZXJ0aWVzLiAqL1xyXG4gICAgRGJDbGllbnRNZXRhZGF0YS5rZXlQYXRoID0gJ2NsaWVudElkJztcclxuICAgIHJldHVybiBEYkNsaWVudE1ldGFkYXRhO1xyXG59KCkpO1xyXG5mdW5jdGlvbiBjcmVhdGVDbGllbnRNZXRhZGF0YVN0b3JlKGRiKSB7XHJcbiAgICBkYi5jcmVhdGVPYmplY3RTdG9yZShEYkNsaWVudE1ldGFkYXRhLnN0b3JlLCB7XHJcbiAgICAgICAga2V5UGF0aDogRGJDbGllbnRNZXRhZGF0YS5rZXlQYXRoXHJcbiAgICB9KTtcclxufVxyXG4vLyBWaXNpYmxlIGZvciB0ZXN0aW5nXHJcbnZhciBWMV9TVE9SRVMgPSBbXHJcbiAgICBEYk11dGF0aW9uUXVldWUuc3RvcmUsXHJcbiAgICBEYk11dGF0aW9uQmF0Y2guc3RvcmUsXHJcbiAgICBEYkRvY3VtZW50TXV0YXRpb24uc3RvcmUsXHJcbiAgICBEYlJlbW90ZURvY3VtZW50LnN0b3JlLFxyXG4gICAgRGJUYXJnZXQuc3RvcmUsXHJcbiAgICBEYlByaW1hcnlDbGllbnQuc3RvcmUsXHJcbiAgICBEYlRhcmdldEdsb2JhbC5zdG9yZSxcclxuICAgIERiVGFyZ2V0RG9jdW1lbnQuc3RvcmVcclxuXTtcclxuLy8gVjIgaXMgbm8gbG9uZ2VyIHVzYWJsZSAoc2VlIGNvbW1lbnQgYXQgdG9wIG9mIGZpbGUpXHJcbi8vIFZpc2libGUgZm9yIHRlc3RpbmdcclxudmFyIFYzX1NUT1JFUyA9IFYxX1NUT1JFUztcclxuLy8gVmlzaWJsZSBmb3IgdGVzdGluZ1xyXG4vLyBOb3RlOiBEYlJlbW90ZURvY3VtZW50Q2hhbmdlcyBpcyBubyBsb25nZXIgdXNlZCBhbmQgZHJvcHBlZCB3aXRoIHY5LlxyXG52YXIgVjRfU1RPUkVTID0gdHNsaWIuX19zcHJlYWRBcnJheXMoVjNfU1RPUkVTLCBbRGJDbGllbnRNZXRhZGF0YS5zdG9yZV0pO1xyXG4vLyBWNSBkb2VzIG5vdCBjaGFuZ2UgdGhlIHNldCBvZiBzdG9yZXMuXHJcbnZhciBWNl9TVE9SRVMgPSB0c2xpYi5fX3NwcmVhZEFycmF5cyhWNF9TVE9SRVMsIFtEYlJlbW90ZURvY3VtZW50R2xvYmFsLnN0b3JlXSk7XHJcbi8vIFY3IGRvZXMgbm90IGNoYW5nZSB0aGUgc2V0IG9mIHN0b3Jlcy5cclxudmFyIFY4X1NUT1JFUyA9IHRzbGliLl9fc3ByZWFkQXJyYXlzKFY2X1NUT1JFUywgW0RiQ29sbGVjdGlvblBhcmVudC5zdG9yZV0pO1xyXG4vLyBWOSBkb2VzIG5vdCBjaGFuZ2UgdGhlIHNldCBvZiBzdG9yZXMuXHJcbi8qKlxyXG4gKiBUaGUgbGlzdCBvZiBhbGwgZGVmYXVsdCBJbmRleGVkREIgc3RvcmVzIHVzZWQgdGhyb3VnaG91dCB0aGUgU0RLLiBUaGlzIGlzXHJcbiAqIHVzZWQgd2hlbiBjcmVhdGluZyB0cmFuc2FjdGlvbnMgc28gdGhhdCBhY2Nlc3MgYWNyb3NzIGFsbCBzdG9yZXMgaXMgZG9uZVxyXG4gKiBhdG9taWNhbGx5LlxyXG4gKi9cclxudmFyIEFMTF9TVE9SRVMgPSBWOF9TVE9SRVM7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQSBwZXJzaXN0ZWQgaW1wbGVtZW50YXRpb24gb2YgSW5kZXhNYW5hZ2VyLlxyXG4gKi9cclxudmFyIEluZGV4ZWREYkluZGV4TWFuYWdlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEluZGV4ZWREYkluZGV4TWFuYWdlcigpIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBBbiBpbi1tZW1vcnkgY29weSBvZiB0aGUgaW5kZXggZW50cmllcyB3ZSd2ZSBhbHJlYWR5IHdyaXR0ZW4gc2luY2UgdGhlIFNES1xyXG4gICAgICAgICAqIGxhdW5jaGVkLiBVc2VkIHRvIGF2b2lkIHJlLXdyaXRpbmcgdGhlIHNhbWUgZW50cnkgcmVwZWF0ZWRseS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFRoaXMgaXMgKk5PVCogYSBjb21wbGV0ZSBjYWNoZSBvZiB3aGF0J3MgaW4gcGVyc2lzdGVuY2UgYW5kIHNvIGNhbiBuZXZlciBiZSB1c2VkIHRvXHJcbiAgICAgICAgICogc2F0aXNmeSByZWFkcy5cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLmNvbGxlY3Rpb25QYXJlbnRzQ2FjaGUgPSBuZXcgTWVtb3J5Q29sbGVjdGlvblBhcmVudEluZGV4KCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEFkZHMgYSBuZXcgZW50cnkgdG8gdGhlIGNvbGxlY3Rpb24gcGFyZW50IGluZGV4LlxyXG4gICAgICpcclxuICAgICAqIFJlcGVhdGVkIGNhbGxzIGZvciB0aGUgc2FtZSBjb2xsZWN0aW9uUGF0aCBzaG91bGQgYmUgYXZvaWRlZCB3aXRoaW4gYVxyXG4gICAgICogdHJhbnNhY3Rpb24gYXMgSW5kZXhlZERiSW5kZXhNYW5hZ2VyIG9ubHkgY2FjaGVzIHdyaXRlcyBvbmNlIGEgdHJhbnNhY3Rpb25cclxuICAgICAqIGhhcyBiZWVuIGNvbW1pdHRlZC5cclxuICAgICAqL1xyXG4gICAgSW5kZXhlZERiSW5kZXhNYW5hZ2VyLnByb3RvdHlwZS5hZGRUb0NvbGxlY3Rpb25QYXJlbnRJbmRleCA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwgY29sbGVjdGlvblBhdGgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIGFzc2VydChjb2xsZWN0aW9uUGF0aC5sZW5ndGggJSAyID09PSAxLCAnRXhwZWN0ZWQgYSBjb2xsZWN0aW9uIHBhdGguJyk7XHJcbiAgICAgICAgaWYgKCF0aGlzLmNvbGxlY3Rpb25QYXJlbnRzQ2FjaGUuaGFzKGNvbGxlY3Rpb25QYXRoKSkge1xyXG4gICAgICAgICAgICB2YXIgY29sbGVjdGlvbklkID0gY29sbGVjdGlvblBhdGgubGFzdFNlZ21lbnQoKTtcclxuICAgICAgICAgICAgdmFyIHBhcmVudFBhdGggPSBjb2xsZWN0aW9uUGF0aC5wb3BMYXN0KCk7XHJcbiAgICAgICAgICAgIHRyYW5zYWN0aW9uLmFkZE9uQ29tbWl0dGVkTGlzdGVuZXIoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgLy8gQWRkIHRoZSBjb2xsZWN0aW9uIHRvIHRoZSBpbiBtZW1vcnkgY2FjaGUgb25seSBpZiB0aGUgdHJhbnNhY3Rpb24gd2FzXHJcbiAgICAgICAgICAgICAgICAvLyBzdWNjZXNzZnVsbHkgY29tbWl0dGVkLlxyXG4gICAgICAgICAgICAgICAgX3RoaXMuY29sbGVjdGlvblBhcmVudHNDYWNoZS5hZGQoY29sbGVjdGlvblBhdGgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdmFyIGNvbGxlY3Rpb25QYXJlbnQgPSB7XHJcbiAgICAgICAgICAgICAgICBjb2xsZWN0aW9uSWQ6IGNvbGxlY3Rpb25JZCxcclxuICAgICAgICAgICAgICAgIHBhcmVudDogZW5jb2RlKHBhcmVudFBhdGgpXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHJldHVybiBjb2xsZWN0aW9uUGFyZW50c1N0b3JlKHRyYW5zYWN0aW9uKS5wdXQoY29sbGVjdGlvblBhcmVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgfTtcclxuICAgIEluZGV4ZWREYkluZGV4TWFuYWdlci5wcm90b3R5cGUuZ2V0Q29sbGVjdGlvblBhcmVudHMgPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24sIGNvbGxlY3Rpb25JZCkge1xyXG4gICAgICAgIHZhciBwYXJlbnRQYXRocyA9IFtdO1xyXG4gICAgICAgIHZhciByYW5nZSA9IElEQktleVJhbmdlLmJvdW5kKFtjb2xsZWN0aW9uSWQsICcnXSwgW2ltbWVkaWF0ZVN1Y2Nlc3Nvcihjb2xsZWN0aW9uSWQpLCAnJ10sIFxyXG4gICAgICAgIC8qbG93ZXJPcGVuPSovIGZhbHNlLCBcclxuICAgICAgICAvKnVwcGVyT3Blbj0qLyB0cnVlKTtcclxuICAgICAgICByZXR1cm4gY29sbGVjdGlvblBhcmVudHNTdG9yZSh0cmFuc2FjdGlvbilcclxuICAgICAgICAgICAgLmxvYWRBbGwocmFuZ2UpXHJcbiAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uIChlbnRyaWVzKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgZW50cmllc18xID0gZW50cmllczsgX2kgPCBlbnRyaWVzXzEubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZW50cnkgPSBlbnRyaWVzXzFbX2ldO1xyXG4gICAgICAgICAgICAgICAgLy8gVGhpcyBjb2xsZWN0aW9uSWQgZ3VhcmQgc2hvdWxkbid0IGJlIG5lY2Vzc2FyeSAoYW5kIGlzbid0IGFzIGxvbmdcclxuICAgICAgICAgICAgICAgIC8vIGFzIHdlJ3JlIHJ1bm5pbmcgaW4gYSByZWFsIGJyb3dzZXIpLCBidXQgdGhlcmUncyBhIGJ1ZyBpblxyXG4gICAgICAgICAgICAgICAgLy8gaW5kZXhlZGRic2hpbSB0aGF0IGJyZWFrcyBvdXIgcmFuZ2UgaW4gb3VyIHRlc3RzIHJ1bm5pbmcgaW4gbm9kZTpcclxuICAgICAgICAgICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9heGVtY2xpb24vSW5kZXhlZERCU2hpbS9pc3N1ZXMvMzM0XHJcbiAgICAgICAgICAgICAgICBpZiAoZW50cnkuY29sbGVjdGlvbklkICE9PSBjb2xsZWN0aW9uSWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHBhcmVudFBhdGhzLnB1c2goZGVjb2RlKGVudHJ5LnBhcmVudCkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBwYXJlbnRQYXRocztcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gSW5kZXhlZERiSW5kZXhNYW5hZ2VyO1xyXG59KCkpO1xyXG4vKipcclxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSBjb2xsZWN0aW9uUGFyZW50c1xyXG4gKiBkb2N1bWVudCBzdG9yZS5cclxuICovXHJcbmZ1bmN0aW9uIGNvbGxlY3Rpb25QYXJlbnRzU3RvcmUodHhuKSB7XHJcbiAgICByZXR1cm4gSW5kZXhlZERiUGVyc2lzdGVuY2UuZ2V0U3RvcmUodHhuLCBEYkNvbGxlY3Rpb25QYXJlbnQuc3RvcmUpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKiogQW4gZW51bWVyYXRpb24gb2YgdGhlIGRpZmZlcmVudCBwdXJwb3NlcyB3ZSBoYXZlIGZvciB0YXJnZXRzLiAqL1xyXG52YXIgVGFyZ2V0UHVycG9zZTtcclxuKGZ1bmN0aW9uIChUYXJnZXRQdXJwb3NlKSB7XHJcbiAgICAvKiogQSByZWd1bGFyLCBub3JtYWwgcXVlcnkgdGFyZ2V0LiAqL1xyXG4gICAgVGFyZ2V0UHVycG9zZVtUYXJnZXRQdXJwb3NlW1wiTGlzdGVuXCJdID0gMF0gPSBcIkxpc3RlblwiO1xyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgcXVlcnkgdGFyZ2V0IHdhcyB1c2VkIHRvIHJlZmlsbCBhIHF1ZXJ5IGFmdGVyIGFuIGV4aXN0ZW5jZSBmaWx0ZXIgbWlzbWF0Y2guXHJcbiAgICAgKi9cclxuICAgIFRhcmdldFB1cnBvc2VbVGFyZ2V0UHVycG9zZVtcIkV4aXN0ZW5jZUZpbHRlck1pc21hdGNoXCJdID0gMV0gPSBcIkV4aXN0ZW5jZUZpbHRlck1pc21hdGNoXCI7XHJcbiAgICAvKiogVGhlIHF1ZXJ5IHRhcmdldCB3YXMgdXNlZCB0byByZXNvbHZlIGEgbGltYm8gZG9jdW1lbnQuICovXHJcbiAgICBUYXJnZXRQdXJwb3NlW1RhcmdldFB1cnBvc2VbXCJMaW1ib1Jlc29sdXRpb25cIl0gPSAyXSA9IFwiTGltYm9SZXNvbHV0aW9uXCI7XHJcbn0pKFRhcmdldFB1cnBvc2UgfHwgKFRhcmdldFB1cnBvc2UgPSB7fSkpO1xyXG4vKipcclxuICogQW4gaW1tdXRhYmxlIHNldCBvZiBtZXRhZGF0YSB0aGF0IHRoZSBsb2NhbCBzdG9yZSB0cmFja3MgZm9yIGVhY2ggdGFyZ2V0LlxyXG4gKi9cclxudmFyIFRhcmdldERhdGEgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBUYXJnZXREYXRhKFxyXG4gICAgLyoqIFRoZSB0YXJnZXQgYmVpbmcgbGlzdGVuZWQgdG8uICovXHJcbiAgICB0YXJnZXQsIFxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgdGFyZ2V0IElEIHRvIHdoaWNoIHRoZSB0YXJnZXQgY29ycmVzcG9uZHM7IEFzc2lnbmVkIGJ5IHRoZVxyXG4gICAgICogTG9jYWxTdG9yZSBmb3IgdXNlciBsaXN0ZW5zIGFuZCBieSB0aGUgU3luY0VuZ2luZSBmb3IgbGltYm8gd2F0Y2hlcy5cclxuICAgICAqL1xyXG4gICAgdGFyZ2V0SWQsIFxyXG4gICAgLyoqIFRoZSBwdXJwb3NlIG9mIHRoZSB0YXJnZXQuICovXHJcbiAgICBwdXJwb3NlLCBcclxuICAgIC8qKlxyXG4gICAgICogVGhlIHNlcXVlbmNlIG51bWJlciBvZiB0aGUgbGFzdCB0cmFuc2FjdGlvbiBkdXJpbmcgd2hpY2ggdGhpcyB0YXJnZXQgZGF0YVxyXG4gICAgICogd2FzIG1vZGlmaWVkLlxyXG4gICAgICovXHJcbiAgICBzZXF1ZW5jZU51bWJlciwgXHJcbiAgICAvKiogVGhlIGxhdGVzdCBzbmFwc2hvdCB2ZXJzaW9uIHNlZW4gZm9yIHRoaXMgdGFyZ2V0LiAqL1xyXG4gICAgc25hcHNob3RWZXJzaW9uLCBcclxuICAgIC8qKlxyXG4gICAgICogVGhlIG1heGltdW0gc25hcHNob3QgdmVyc2lvbiBhdCB3aGljaCB0aGUgYXNzb2NpYXRlZCB2aWV3XHJcbiAgICAgKiBjb250YWluZWQgbm8gbGltYm8gZG9jdW1lbnRzLlxyXG4gICAgICovXHJcbiAgICBsYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uLCBcclxuICAgIC8qKlxyXG4gICAgICogQW4gb3BhcXVlLCBzZXJ2ZXItYXNzaWduZWQgdG9rZW4gdGhhdCBhbGxvd3Mgd2F0Y2hpbmcgYSB0YXJnZXQgdG8gYmVcclxuICAgICAqIHJlc3VtZWQgYWZ0ZXIgZGlzY29ubmVjdGluZyB3aXRob3V0IHJldHJhbnNtaXR0aW5nIGFsbCB0aGUgZGF0YSB0aGF0XHJcbiAgICAgKiBtYXRjaGVzIHRoZSB0YXJnZXQuIFRoZSByZXN1bWUgdG9rZW4gZXNzZW50aWFsbHkgaWRlbnRpZmllcyBhIHBvaW50IGluXHJcbiAgICAgKiB0aW1lIGZyb20gd2hpY2ggdGhlIHNlcnZlciBzaG91bGQgcmVzdW1lIHNlbmRpbmcgcmVzdWx0cy5cclxuICAgICAqL1xyXG4gICAgcmVzdW1lVG9rZW4pIHtcclxuICAgICAgICBpZiAoc25hcHNob3RWZXJzaW9uID09PSB2b2lkIDApIHsgc25hcHNob3RWZXJzaW9uID0gU25hcHNob3RWZXJzaW9uLk1JTjsgfVxyXG4gICAgICAgIGlmIChsYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uID09PSB2b2lkIDApIHsgbGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbiA9IFNuYXBzaG90VmVyc2lvbi5NSU47IH1cclxuICAgICAgICBpZiAocmVzdW1lVG9rZW4gPT09IHZvaWQgMCkgeyByZXN1bWVUb2tlbiA9IGVtcHR5Qnl0ZVN0cmluZygpOyB9XHJcbiAgICAgICAgdGhpcy50YXJnZXQgPSB0YXJnZXQ7XHJcbiAgICAgICAgdGhpcy50YXJnZXRJZCA9IHRhcmdldElkO1xyXG4gICAgICAgIHRoaXMucHVycG9zZSA9IHB1cnBvc2U7XHJcbiAgICAgICAgdGhpcy5zZXF1ZW5jZU51bWJlciA9IHNlcXVlbmNlTnVtYmVyO1xyXG4gICAgICAgIHRoaXMuc25hcHNob3RWZXJzaW9uID0gc25hcHNob3RWZXJzaW9uO1xyXG4gICAgICAgIHRoaXMubGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbiA9IGxhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb247XHJcbiAgICAgICAgdGhpcy5yZXN1bWVUb2tlbiA9IHJlc3VtZVRva2VuO1xyXG4gICAgfVxyXG4gICAgLyoqIENyZWF0ZXMgYSBuZXcgdGFyZ2V0IGRhdGEgaW5zdGFuY2Ugd2l0aCBhbiB1cGRhdGVkIHNlcXVlbmNlIG51bWJlci4gKi9cclxuICAgIFRhcmdldERhdGEucHJvdG90eXBlLndpdGhTZXF1ZW5jZU51bWJlciA9IGZ1bmN0aW9uIChzZXF1ZW5jZU51bWJlcikge1xyXG4gICAgICAgIHJldHVybiBuZXcgVGFyZ2V0RGF0YSh0aGlzLnRhcmdldCwgdGhpcy50YXJnZXRJZCwgdGhpcy5wdXJwb3NlLCBzZXF1ZW5jZU51bWJlciwgdGhpcy5zbmFwc2hvdFZlcnNpb24sIHRoaXMubGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbiwgdGhpcy5yZXN1bWVUb2tlbik7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGVzIGEgbmV3IHRhcmdldCBkYXRhIGluc3RhbmNlIHdpdGggYW4gdXBkYXRlZCByZXN1bWUgdG9rZW4gYW5kXHJcbiAgICAgKiBzbmFwc2hvdCB2ZXJzaW9uLlxyXG4gICAgICovXHJcbiAgICBUYXJnZXREYXRhLnByb3RvdHlwZS53aXRoUmVzdW1lVG9rZW4gPSBmdW5jdGlvbiAocmVzdW1lVG9rZW4sIHNuYXBzaG90VmVyc2lvbikge1xyXG4gICAgICAgIHJldHVybiBuZXcgVGFyZ2V0RGF0YSh0aGlzLnRhcmdldCwgdGhpcy50YXJnZXRJZCwgdGhpcy5wdXJwb3NlLCB0aGlzLnNlcXVlbmNlTnVtYmVyLCBzbmFwc2hvdFZlcnNpb24sIHRoaXMubGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbiwgcmVzdW1lVG9rZW4pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhIG5ldyB0YXJnZXQgZGF0YSBpbnN0YW5jZSB3aXRoIGFuIHVwZGF0ZWQgbGFzdCBsaW1ibyBmcmVlXHJcbiAgICAgKiBzbmFwc2hvdCB2ZXJzaW9uIG51bWJlci5cclxuICAgICAqL1xyXG4gICAgVGFyZ2V0RGF0YS5wcm90b3R5cGUud2l0aExhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24gPSBmdW5jdGlvbiAobGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbikge1xyXG4gICAgICAgIHJldHVybiBuZXcgVGFyZ2V0RGF0YSh0aGlzLnRhcmdldCwgdGhpcy50YXJnZXRJZCwgdGhpcy5wdXJwb3NlLCB0aGlzLnNlcXVlbmNlTnVtYmVyLCB0aGlzLnNuYXBzaG90VmVyc2lvbiwgbGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbiwgdGhpcy5yZXN1bWVUb2tlbik7XHJcbiAgICB9O1xyXG4gICAgVGFyZ2V0RGF0YS5wcm90b3R5cGUuaXNFcXVhbCA9IGZ1bmN0aW9uIChvdGhlcikge1xyXG4gICAgICAgIHJldHVybiAodGhpcy50YXJnZXRJZCA9PT0gb3RoZXIudGFyZ2V0SWQgJiZcclxuICAgICAgICAgICAgdGhpcy5wdXJwb3NlID09PSBvdGhlci5wdXJwb3NlICYmXHJcbiAgICAgICAgICAgIHRoaXMuc2VxdWVuY2VOdW1iZXIgPT09IG90aGVyLnNlcXVlbmNlTnVtYmVyICYmXHJcbiAgICAgICAgICAgIHRoaXMuc25hcHNob3RWZXJzaW9uLmlzRXF1YWwob3RoZXIuc25hcHNob3RWZXJzaW9uKSAmJlxyXG4gICAgICAgICAgICB0aGlzLmxhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24uaXNFcXVhbChvdGhlci5sYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uKSAmJlxyXG4gICAgICAgICAgICB0aGlzLnJlc3VtZVRva2VuID09PSBvdGhlci5yZXN1bWVUb2tlbiAmJlxyXG4gICAgICAgICAgICB0aGlzLnRhcmdldC5pc0VxdWFsKG90aGVyLnRhcmdldCkpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBUYXJnZXREYXRhO1xyXG59KCkpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqIFNlcmlhbGl6ZXIgZm9yIHZhbHVlcyBzdG9yZWQgaW4gdGhlIExvY2FsU3RvcmUuICovXHJcbnZhciBMb2NhbFNlcmlhbGl6ZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBMb2NhbFNlcmlhbGl6ZXIocmVtb3RlU2VyaWFsaXplcikge1xyXG4gICAgICAgIHRoaXMucmVtb3RlU2VyaWFsaXplciA9IHJlbW90ZVNlcmlhbGl6ZXI7XHJcbiAgICB9XHJcbiAgICAvKiogRGVjb2RlcyBhIHJlbW90ZSBkb2N1bWVudCBmcm9tIHN0b3JhZ2UgbG9jYWxseSB0byBhIERvY3VtZW50LiAqL1xyXG4gICAgTG9jYWxTZXJpYWxpemVyLnByb3RvdHlwZS5mcm9tRGJSZW1vdGVEb2N1bWVudCA9IGZ1bmN0aW9uIChyZW1vdGVEb2MpIHtcclxuICAgICAgICBpZiAocmVtb3RlRG9jLmRvY3VtZW50KSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJlbW90ZVNlcmlhbGl6ZXIuZnJvbURvY3VtZW50KHJlbW90ZURvYy5kb2N1bWVudCwgISFyZW1vdGVEb2MuaGFzQ29tbWl0dGVkTXV0YXRpb25zKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAocmVtb3RlRG9jLm5vRG9jdW1lbnQpIHtcclxuICAgICAgICAgICAgdmFyIGtleSA9IERvY3VtZW50S2V5LmZyb21TZWdtZW50cyhyZW1vdGVEb2Mubm9Eb2N1bWVudC5wYXRoKTtcclxuICAgICAgICAgICAgdmFyIHZlcnNpb24gPSB0aGlzLmZyb21EYlRpbWVzdGFtcChyZW1vdGVEb2Mubm9Eb2N1bWVudC5yZWFkVGltZSk7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgTm9Eb2N1bWVudChrZXksIHZlcnNpb24sIHtcclxuICAgICAgICAgICAgICAgIGhhc0NvbW1pdHRlZE11dGF0aW9uczogISFyZW1vdGVEb2MuaGFzQ29tbWl0dGVkTXV0YXRpb25zXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChyZW1vdGVEb2MudW5rbm93bkRvY3VtZW50KSB7XHJcbiAgICAgICAgICAgIHZhciBrZXkgPSBEb2N1bWVudEtleS5mcm9tU2VnbWVudHMocmVtb3RlRG9jLnVua25vd25Eb2N1bWVudC5wYXRoKTtcclxuICAgICAgICAgICAgdmFyIHZlcnNpb24gPSB0aGlzLmZyb21EYlRpbWVzdGFtcChyZW1vdGVEb2MudW5rbm93bkRvY3VtZW50LnZlcnNpb24pO1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFVua25vd25Eb2N1bWVudChrZXksIHZlcnNpb24pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhaWwoJ1VuZXhwZWN0ZWQgRGJSZW1vdGVEb2N1bWVudCcpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKiogRW5jb2RlcyBhIGRvY3VtZW50IGZvciBzdG9yYWdlIGxvY2FsbHkuICovXHJcbiAgICBMb2NhbFNlcmlhbGl6ZXIucHJvdG90eXBlLnRvRGJSZW1vdGVEb2N1bWVudCA9IGZ1bmN0aW9uIChtYXliZURvYywgcmVhZFRpbWUpIHtcclxuICAgICAgICB2YXIgZGJSZWFkVGltZSA9IHRoaXMudG9EYlRpbWVzdGFtcEtleShyZWFkVGltZSk7XHJcbiAgICAgICAgdmFyIHBhcmVudFBhdGggPSBtYXliZURvYy5rZXkucGF0aC5wb3BMYXN0KCkudG9BcnJheSgpO1xyXG4gICAgICAgIGlmIChtYXliZURvYyBpbnN0YW5jZW9mIERvY3VtZW50KSB7XHJcbiAgICAgICAgICAgIHZhciBkb2MgPSBtYXliZURvYy5wcm90b1xyXG4gICAgICAgICAgICAgICAgPyBtYXliZURvYy5wcm90b1xyXG4gICAgICAgICAgICAgICAgOiB0aGlzLnJlbW90ZVNlcmlhbGl6ZXIudG9Eb2N1bWVudChtYXliZURvYyk7XHJcbiAgICAgICAgICAgIHZhciBoYXNDb21taXR0ZWRNdXRhdGlvbnMgPSBtYXliZURvYy5oYXNDb21taXR0ZWRNdXRhdGlvbnM7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgRGJSZW1vdGVEb2N1bWVudChcclxuICAgICAgICAgICAgLyogdW5rbm93bkRvY3VtZW50PSAqLyBudWxsLCBcclxuICAgICAgICAgICAgLyogbm9Eb2N1bWVudD0gKi8gbnVsbCwgZG9jLCBoYXNDb21taXR0ZWRNdXRhdGlvbnMsIGRiUmVhZFRpbWUsIHBhcmVudFBhdGgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChtYXliZURvYyBpbnN0YW5jZW9mIE5vRG9jdW1lbnQpIHtcclxuICAgICAgICAgICAgdmFyIHBhdGggPSBtYXliZURvYy5rZXkucGF0aC50b0FycmF5KCk7XHJcbiAgICAgICAgICAgIHZhciByZWFkVGltZV8xID0gdGhpcy50b0RiVGltZXN0YW1wKG1heWJlRG9jLnZlcnNpb24pO1xyXG4gICAgICAgICAgICB2YXIgaGFzQ29tbWl0dGVkTXV0YXRpb25zID0gbWF5YmVEb2MuaGFzQ29tbWl0dGVkTXV0YXRpb25zO1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IERiUmVtb3RlRG9jdW1lbnQoXHJcbiAgICAgICAgICAgIC8qIHVua25vd25Eb2N1bWVudD0gKi8gbnVsbCwgbmV3IERiTm9Eb2N1bWVudChwYXRoLCByZWFkVGltZV8xKSwgXHJcbiAgICAgICAgICAgIC8qIGRvY3VtZW50PSAqLyBudWxsLCBoYXNDb21taXR0ZWRNdXRhdGlvbnMsIGRiUmVhZFRpbWUsIHBhcmVudFBhdGgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChtYXliZURvYyBpbnN0YW5jZW9mIFVua25vd25Eb2N1bWVudCkge1xyXG4gICAgICAgICAgICB2YXIgcGF0aCA9IG1heWJlRG9jLmtleS5wYXRoLnRvQXJyYXkoKTtcclxuICAgICAgICAgICAgdmFyIHJlYWRUaW1lXzIgPSB0aGlzLnRvRGJUaW1lc3RhbXAobWF5YmVEb2MudmVyc2lvbik7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgRGJSZW1vdGVEb2N1bWVudChuZXcgRGJVbmtub3duRG9jdW1lbnQocGF0aCwgcmVhZFRpbWVfMiksIFxyXG4gICAgICAgICAgICAvKiBub0RvY3VtZW50PSAqLyBudWxsLCBcclxuICAgICAgICAgICAgLyogZG9jdW1lbnQ9ICovIG51bGwsIFxyXG4gICAgICAgICAgICAvKiBoYXNDb21taXR0ZWRNdXRhdGlvbnM9ICovIHRydWUsIGRiUmVhZFRpbWUsIHBhcmVudFBhdGgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhaWwoJ1VuZXhwZWN0ZWQgTWF5YmVEb2N1bWVudCcpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBMb2NhbFNlcmlhbGl6ZXIucHJvdG90eXBlLnRvRGJUaW1lc3RhbXBLZXkgPSBmdW5jdGlvbiAoc25hcHNob3RWZXJzaW9uKSB7XHJcbiAgICAgICAgdmFyIHRpbWVzdGFtcCA9IHNuYXBzaG90VmVyc2lvbi50b1RpbWVzdGFtcCgpO1xyXG4gICAgICAgIHJldHVybiBbdGltZXN0YW1wLnNlY29uZHMsIHRpbWVzdGFtcC5uYW5vc2Vjb25kc107XHJcbiAgICB9O1xyXG4gICAgTG9jYWxTZXJpYWxpemVyLnByb3RvdHlwZS5mcm9tRGJUaW1lc3RhbXBLZXkgPSBmdW5jdGlvbiAoZGJUaW1lc3RhbXBLZXkpIHtcclxuICAgICAgICB2YXIgdGltZXN0YW1wID0gbmV3IFRpbWVzdGFtcChkYlRpbWVzdGFtcEtleVswXSwgZGJUaW1lc3RhbXBLZXlbMV0pO1xyXG4gICAgICAgIHJldHVybiBTbmFwc2hvdFZlcnNpb24uZnJvbVRpbWVzdGFtcCh0aW1lc3RhbXApO1xyXG4gICAgfTtcclxuICAgIExvY2FsU2VyaWFsaXplci5wcm90b3R5cGUudG9EYlRpbWVzdGFtcCA9IGZ1bmN0aW9uIChzbmFwc2hvdFZlcnNpb24pIHtcclxuICAgICAgICB2YXIgdGltZXN0YW1wID0gc25hcHNob3RWZXJzaW9uLnRvVGltZXN0YW1wKCk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBEYlRpbWVzdGFtcCh0aW1lc3RhbXAuc2Vjb25kcywgdGltZXN0YW1wLm5hbm9zZWNvbmRzKTtcclxuICAgIH07XHJcbiAgICBMb2NhbFNlcmlhbGl6ZXIucHJvdG90eXBlLmZyb21EYlRpbWVzdGFtcCA9IGZ1bmN0aW9uIChkYlRpbWVzdGFtcCkge1xyXG4gICAgICAgIHZhciB0aW1lc3RhbXAgPSBuZXcgVGltZXN0YW1wKGRiVGltZXN0YW1wLnNlY29uZHMsIGRiVGltZXN0YW1wLm5hbm9zZWNvbmRzKTtcclxuICAgICAgICByZXR1cm4gU25hcHNob3RWZXJzaW9uLmZyb21UaW1lc3RhbXAodGltZXN0YW1wKTtcclxuICAgIH07XHJcbiAgICAvKiogRW5jb2RlcyBhIGJhdGNoIG9mIG11dGF0aW9ucyBpbnRvIGEgRGJNdXRhdGlvbkJhdGNoIGZvciBsb2NhbCBzdG9yYWdlLiAqL1xyXG4gICAgTG9jYWxTZXJpYWxpemVyLnByb3RvdHlwZS50b0RiTXV0YXRpb25CYXRjaCA9IGZ1bmN0aW9uICh1c2VySWQsIGJhdGNoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgc2VyaWFsaXplZEJhc2VNdXRhdGlvbnMgPSBiYXRjaC5iYXNlTXV0YXRpb25zLm1hcChmdW5jdGlvbiAobSkge1xyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXMucmVtb3RlU2VyaWFsaXplci50b011dGF0aW9uKG0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHZhciBzZXJpYWxpemVkTXV0YXRpb25zID0gYmF0Y2gubXV0YXRpb25zLm1hcChmdW5jdGlvbiAobSkge1xyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXMucmVtb3RlU2VyaWFsaXplci50b011dGF0aW9uKG0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBuZXcgRGJNdXRhdGlvbkJhdGNoKHVzZXJJZCwgYmF0Y2guYmF0Y2hJZCwgYmF0Y2gubG9jYWxXcml0ZVRpbWUudG9NaWxsaXMoKSwgc2VyaWFsaXplZEJhc2VNdXRhdGlvbnMsIHNlcmlhbGl6ZWRNdXRhdGlvbnMpO1xyXG4gICAgfTtcclxuICAgIC8qKiBEZWNvZGVzIGEgRGJNdXRhdGlvbkJhdGNoIGludG8gYSBNdXRhdGlvbkJhdGNoICovXHJcbiAgICBMb2NhbFNlcmlhbGl6ZXIucHJvdG90eXBlLmZyb21EYk11dGF0aW9uQmF0Y2ggPSBmdW5jdGlvbiAoZGJCYXRjaCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIGJhc2VNdXRhdGlvbnMgPSAoZGJCYXRjaC5iYXNlTXV0YXRpb25zIHx8IFtdKS5tYXAoZnVuY3Rpb24gKG0pIHtcclxuICAgICAgICAgICAgcmV0dXJuIF90aGlzLnJlbW90ZVNlcmlhbGl6ZXIuZnJvbU11dGF0aW9uKG0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHZhciBtdXRhdGlvbnMgPSBkYkJhdGNoLm11dGF0aW9ucy5tYXAoZnVuY3Rpb24gKG0pIHtcclxuICAgICAgICAgICAgcmV0dXJuIF90aGlzLnJlbW90ZVNlcmlhbGl6ZXIuZnJvbU11dGF0aW9uKG0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHZhciB0aW1lc3RhbXAgPSBUaW1lc3RhbXAuZnJvbU1pbGxpcyhkYkJhdGNoLmxvY2FsV3JpdGVUaW1lTXMpO1xyXG4gICAgICAgIHJldHVybiBuZXcgTXV0YXRpb25CYXRjaChkYkJhdGNoLmJhdGNoSWQsIHRpbWVzdGFtcCwgYmFzZU11dGF0aW9ucywgbXV0YXRpb25zKTtcclxuICAgIH07XHJcbiAgICAvKlxyXG4gICAgICogRW5jb2RlcyBhIHNldCBvZiBkb2N1bWVudCBrZXlzIGludG8gYW4gYXJyYXkgb2YgRW5jb2RlZFJlc291cmNlUGF0aHMuXHJcbiAgICAgKi9cclxuICAgIExvY2FsU2VyaWFsaXplci5wcm90b3R5cGUudG9EYlJlc291cmNlUGF0aHMgPSBmdW5jdGlvbiAoa2V5cykge1xyXG4gICAgICAgIHZhciBlbmNvZGVkS2V5cyA9IFtdO1xyXG4gICAgICAgIGtleXMuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgICAgICAgIGVuY29kZWRLZXlzLnB1c2goZW5jb2RlKGtleS5wYXRoKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIGVuY29kZWRLZXlzO1xyXG4gICAgfTtcclxuICAgIC8qKiBEZWNvZGVzIGFuIGFycmF5IG9mIEVuY29kZWRSZXNvdXJjZVBhdGhzIGludG8gYSBzZXQgb2YgZG9jdW1lbnQga2V5cy4gKi9cclxuICAgIExvY2FsU2VyaWFsaXplci5wcm90b3R5cGUuZnJvbURiUmVzb3VyY2VQYXRocyA9IGZ1bmN0aW9uIChlbmNvZGVkUGF0aHMpIHtcclxuICAgICAgICB2YXIga2V5cyA9IGRvY3VtZW50S2V5U2V0KCk7XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBlbmNvZGVkUGF0aHNfMSA9IGVuY29kZWRQYXRoczsgX2kgPCBlbmNvZGVkUGF0aHNfMS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgdmFyIGRvY3VtZW50S2V5ID0gZW5jb2RlZFBhdGhzXzFbX2ldO1xyXG4gICAgICAgICAgICBrZXlzID0ga2V5cy5hZGQobmV3IERvY3VtZW50S2V5KGRlY29kZShkb2N1bWVudEtleSkpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGtleXM7XHJcbiAgICB9O1xyXG4gICAgLyoqIERlY29kZXMgYSBEYlRhcmdldCBpbnRvIFRhcmdldERhdGEgKi9cclxuICAgIExvY2FsU2VyaWFsaXplci5wcm90b3R5cGUuZnJvbURiVGFyZ2V0ID0gZnVuY3Rpb24gKGRiVGFyZ2V0KSB7XHJcbiAgICAgICAgdmFyIHZlcnNpb24gPSB0aGlzLmZyb21EYlRpbWVzdGFtcChkYlRhcmdldC5yZWFkVGltZSk7XHJcbiAgICAgICAgdmFyIGxhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24gPSBkYlRhcmdldC5sYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uICE9PSB1bmRlZmluZWRcclxuICAgICAgICAgICAgPyB0aGlzLmZyb21EYlRpbWVzdGFtcChkYlRhcmdldC5sYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uKVxyXG4gICAgICAgICAgICA6IFNuYXBzaG90VmVyc2lvbi5NSU47XHJcbiAgICAgICAgLy8gVE9ETyhiLzE0MDU3MzQ4Nik6IENvbnZlcnQgdG8gcGxhdGZvcm0gcmVwcmVzZW50YXRpb25cclxuICAgICAgICB2YXIgcmVzdW1lVG9rZW4gPSBkYlRhcmdldC5yZXN1bWVUb2tlbjtcclxuICAgICAgICB2YXIgdGFyZ2V0O1xyXG4gICAgICAgIGlmIChpc0RvY3VtZW50UXVlcnkoZGJUYXJnZXQucXVlcnkpKSB7XHJcbiAgICAgICAgICAgIHRhcmdldCA9IHRoaXMucmVtb3RlU2VyaWFsaXplci5mcm9tRG9jdW1lbnRzVGFyZ2V0KGRiVGFyZ2V0LnF1ZXJ5KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRhcmdldCA9IHRoaXMucmVtb3RlU2VyaWFsaXplci5mcm9tUXVlcnlUYXJnZXQoZGJUYXJnZXQucXVlcnkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbmV3IFRhcmdldERhdGEodGFyZ2V0LCBkYlRhcmdldC50YXJnZXRJZCwgVGFyZ2V0UHVycG9zZS5MaXN0ZW4sIGRiVGFyZ2V0Lmxhc3RMaXN0ZW5TZXF1ZW5jZU51bWJlciwgdmVyc2lvbiwgbGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbiwgcmVzdW1lVG9rZW4pO1xyXG4gICAgfTtcclxuICAgIC8qKiBFbmNvZGVzIFRhcmdldERhdGEgaW50byBhIERiVGFyZ2V0IGZvciBzdG9yYWdlIGxvY2FsbHkuICovXHJcbiAgICBMb2NhbFNlcmlhbGl6ZXIucHJvdG90eXBlLnRvRGJUYXJnZXQgPSBmdW5jdGlvbiAodGFyZ2V0RGF0YSkge1xyXG4gICAgICAgIGFzc2VydChUYXJnZXRQdXJwb3NlLkxpc3RlbiA9PT0gdGFyZ2V0RGF0YS5wdXJwb3NlLCAnT25seSBxdWVyaWVzIHdpdGggcHVycG9zZSAnICtcclxuICAgICAgICAgICAgVGFyZ2V0UHVycG9zZS5MaXN0ZW4gK1xyXG4gICAgICAgICAgICAnIG1heSBiZSBzdG9yZWQsIGdvdCAnICtcclxuICAgICAgICAgICAgdGFyZ2V0RGF0YS5wdXJwb3NlKTtcclxuICAgICAgICB2YXIgZGJUaW1lc3RhbXAgPSB0aGlzLnRvRGJUaW1lc3RhbXAodGFyZ2V0RGF0YS5zbmFwc2hvdFZlcnNpb24pO1xyXG4gICAgICAgIHZhciBkYkxhc3RMaW1ib0ZyZWVUaW1lc3RhbXAgPSB0aGlzLnRvRGJUaW1lc3RhbXAodGFyZ2V0RGF0YS5sYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uKTtcclxuICAgICAgICB2YXIgcXVlcnlQcm90bztcclxuICAgICAgICBpZiAodGFyZ2V0RGF0YS50YXJnZXQuaXNEb2N1bWVudFF1ZXJ5KCkpIHtcclxuICAgICAgICAgICAgcXVlcnlQcm90byA9IHRoaXMucmVtb3RlU2VyaWFsaXplci50b0RvY3VtZW50c1RhcmdldCh0YXJnZXREYXRhLnRhcmdldCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBxdWVyeVByb3RvID0gdGhpcy5yZW1vdGVTZXJpYWxpemVyLnRvUXVlcnlUYXJnZXQodGFyZ2V0RGF0YS50YXJnZXQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgcmVzdW1lVG9rZW47XHJcbiAgICAgICAgaWYgKHRhcmdldERhdGEucmVzdW1lVG9rZW4gaW5zdGFuY2VvZiBVaW50OEFycmF5KSB7XHJcbiAgICAgICAgICAgIC8vIFRPRE8oYi83ODc3MTQwMyk6IENvbnZlcnQgdG9rZW5zIHRvIHN0cmluZ3MgZHVyaW5nIGRlc2VyaWFsaXphdGlvblxyXG4gICAgICAgICAgICBhc3NlcnQoU2ltcGxlRGIuaXNNb2NrUGVyc2lzdGVuY2UoKSwgJ1BlcnNpc3Rpbmcgbm9uLXN0cmluZyBzdHJlYW0gdG9rZW5zIGlzIG9ubHkgc3VwcG9ydGVkIHdpdGggbW9jayBwZXJzaXN0ZW5jZSAuJyk7XHJcbiAgICAgICAgICAgIHJlc3VtZVRva2VuID0gdGFyZ2V0RGF0YS5yZXN1bWVUb2tlbi50b1N0cmluZygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmVzdW1lVG9rZW4gPSB0YXJnZXREYXRhLnJlc3VtZVRva2VuO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBsYXN0TGlzdGVuU2VxdWVuY2VOdW1iZXIgaXMgYWx3YXlzIDAgdW50aWwgd2UgZG8gcmVhbCBHQy5cclxuICAgICAgICByZXR1cm4gbmV3IERiVGFyZ2V0KHRhcmdldERhdGEudGFyZ2V0SWQsIHRhcmdldERhdGEudGFyZ2V0LmNhbm9uaWNhbElkKCksIGRiVGltZXN0YW1wLCByZXN1bWVUb2tlbiwgdGFyZ2V0RGF0YS5zZXF1ZW5jZU51bWJlciwgZGJMYXN0TGltYm9GcmVlVGltZXN0YW1wLCBxdWVyeVByb3RvKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gTG9jYWxTZXJpYWxpemVyO1xyXG59KCkpO1xyXG4vKipcclxuICogQSBoZWxwZXIgZnVuY3Rpb24gZm9yIGZpZ3VyaW5nIG91dCB3aGF0IGtpbmQgb2YgcXVlcnkgaGFzIGJlZW4gc3RvcmVkLlxyXG4gKi9cclxuZnVuY3Rpb24gaXNEb2N1bWVudFF1ZXJ5KGRiUXVlcnkpIHtcclxuICAgIHJldHVybiBkYlF1ZXJ5LmRvY3VtZW50cyAhPT0gdW5kZWZpbmVkO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBidWZmZXJFbnRyeUNvbXBhcmF0b3IoX2EsIF9iKSB7XHJcbiAgICB2YXIgYVNlcXVlbmNlID0gX2FbMF0sIGFJbmRleCA9IF9hWzFdO1xyXG4gICAgdmFyIGJTZXF1ZW5jZSA9IF9iWzBdLCBiSW5kZXggPSBfYlsxXTtcclxuICAgIHZhciBzZXFDbXAgPSBwcmltaXRpdmVDb21wYXJhdG9yKGFTZXF1ZW5jZSwgYlNlcXVlbmNlKTtcclxuICAgIGlmIChzZXFDbXAgPT09IDApIHtcclxuICAgICAgICAvLyBUaGlzIG9yZGVyIGRvZXNuJ3QgbWF0dGVyLCBidXQgd2UgY2FuIGJpYXMgYWdhaW5zdCBjaHVybiBieSBzb3J0aW5nXHJcbiAgICAgICAgLy8gZW50cmllcyBjcmVhdGVkIGVhcmxpZXIgYXMgbGVzcyB0aGFuIG5ld2VyIGVudHJpZXMuXHJcbiAgICAgICAgcmV0dXJuIHByaW1pdGl2ZUNvbXBhcmF0b3IoYUluZGV4LCBiSW5kZXgpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIHNlcUNtcDtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogVXNlZCB0byBjYWxjdWxhdGUgdGhlIG50aCBzZXF1ZW5jZSBudW1iZXIuIEtlZXBzIGEgcm9sbGluZyBidWZmZXIgb2YgdGhlXHJcbiAqIGxvd2VzdCBuIHZhbHVlcyBwYXNzZWQgdG8gYGFkZEVsZW1lbnRgLCBhbmQgZmluYWxseSByZXBvcnRzIHRoZSBsYXJnZXN0IG9mXHJcbiAqIHRoZW0gaW4gYG1heFZhbHVlYC5cclxuICovXHJcbnZhciBSb2xsaW5nU2VxdWVuY2VOdW1iZXJCdWZmZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBSb2xsaW5nU2VxdWVuY2VOdW1iZXJCdWZmZXIobWF4RWxlbWVudHMpIHtcclxuICAgICAgICB0aGlzLm1heEVsZW1lbnRzID0gbWF4RWxlbWVudHM7XHJcbiAgICAgICAgdGhpcy5idWZmZXIgPSBuZXcgU29ydGVkU2V0KGJ1ZmZlckVudHJ5Q29tcGFyYXRvcik7XHJcbiAgICAgICAgdGhpcy5wcmV2aW91c0luZGV4ID0gMDtcclxuICAgIH1cclxuICAgIFJvbGxpbmdTZXF1ZW5jZU51bWJlckJ1ZmZlci5wcm90b3R5cGUubmV4dEluZGV4ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiArK3RoaXMucHJldmlvdXNJbmRleDtcclxuICAgIH07XHJcbiAgICBSb2xsaW5nU2VxdWVuY2VOdW1iZXJCdWZmZXIucHJvdG90eXBlLmFkZEVsZW1lbnQgPSBmdW5jdGlvbiAoc2VxdWVuY2VOdW1iZXIpIHtcclxuICAgICAgICB2YXIgZW50cnkgPSBbc2VxdWVuY2VOdW1iZXIsIHRoaXMubmV4dEluZGV4KCldO1xyXG4gICAgICAgIGlmICh0aGlzLmJ1ZmZlci5zaXplIDwgdGhpcy5tYXhFbGVtZW50cykge1xyXG4gICAgICAgICAgICB0aGlzLmJ1ZmZlciA9IHRoaXMuYnVmZmVyLmFkZChlbnRyeSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB2YXIgaGlnaGVzdFZhbHVlID0gdGhpcy5idWZmZXIubGFzdCgpO1xyXG4gICAgICAgICAgICBpZiAoYnVmZmVyRW50cnlDb21wYXJhdG9yKGVudHJ5LCBoaWdoZXN0VmFsdWUpIDwgMCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5idWZmZXIgPSB0aGlzLmJ1ZmZlci5kZWxldGUoaGlnaGVzdFZhbHVlKS5hZGQoZW50cnkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShSb2xsaW5nU2VxdWVuY2VOdW1iZXJCdWZmZXIucHJvdG90eXBlLCBcIm1heFZhbHVlXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgLy8gR3VhcmFudGVlZCB0byBiZSBub24tZW1wdHkuIElmIHdlIGRlY2lkZSB3ZSBhcmUgbm90IGNvbGxlY3RpbmcgYW55XHJcbiAgICAgICAgICAgIC8vIHNlcXVlbmNlIG51bWJlcnMsIG50aFNlcXVlbmNlTnVtYmVyIGJlbG93IHNob3J0LWNpcmN1aXRzLiBJZiB3ZSBoYXZlXHJcbiAgICAgICAgICAgIC8vIGRlY2lkZWQgdGhhdCB3ZSBhcmUgY29sbGVjdGluZyBuIHNlcXVlbmNlIG51bWJlcnMsIGl0J3MgYmVjYXVzZSBuIGlzIHNvbWVcclxuICAgICAgICAgICAgLy8gcGVyY2VudGFnZSBvZiB0aGUgZXhpc3Rpbmcgc2VxdWVuY2UgbnVtYmVycy4gVGhhdCBtZWFucyB3ZSBzaG91bGQgbmV2ZXJcclxuICAgICAgICAgICAgLy8gYmUgaW4gYSBzaXR1YXRpb24gd2hlcmUgd2UgYXJlIGNvbGxlY3Rpbmcgc2VxdWVuY2UgbnVtYmVycyBidXQgZG9uJ3RcclxuICAgICAgICAgICAgLy8gYWN0dWFsbHkgaGF2ZSBhbnkuXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmJ1ZmZlci5sYXN0KClbMF07XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gUm9sbGluZ1NlcXVlbmNlTnVtYmVyQnVmZmVyO1xyXG59KCkpO1xyXG52YXIgR0NfRElEX05PVF9SVU4gPSB7XHJcbiAgICBkaWRSdW46IGZhbHNlLFxyXG4gICAgc2VxdWVuY2VOdW1iZXJzQ29sbGVjdGVkOiAwLFxyXG4gICAgdGFyZ2V0c1JlbW92ZWQ6IDAsXHJcbiAgICBkb2N1bWVudHNSZW1vdmVkOiAwXHJcbn07XHJcbnZhciBMcnVQYXJhbXMgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBMcnVQYXJhbXMoXHJcbiAgICAvLyBXaGVuIHdlIGF0dGVtcHQgdG8gY29sbGVjdCwgd2Ugd2lsbCBvbmx5IGRvIHNvIGlmIHRoZSBjYWNoZSBzaXplIGlzIGdyZWF0ZXIgdGhhbiB0aGlzXHJcbiAgICAvLyB0aHJlc2hvbGQuIFBhc3NpbmcgYENPTExFQ1RJT05fRElTQUJMRURgIGhlcmUgd2lsbCBjYXVzZSBjb2xsZWN0aW9uIHRvIGFsd2F5cyBiZSBza2lwcGVkLlxyXG4gICAgY2FjaGVTaXplQ29sbGVjdGlvblRocmVzaG9sZCwgXHJcbiAgICAvLyBUaGUgcGVyY2VudGFnZSBvZiBzZXF1ZW5jZSBudW1iZXJzIHRoYXQgd2Ugd2lsbCBhdHRlbXB0IHRvIGNvbGxlY3RcclxuICAgIHBlcmNlbnRpbGVUb0NvbGxlY3QsIFxyXG4gICAgLy8gQSBjYXAgb24gdGhlIHRvdGFsIG51bWJlciBvZiBzZXF1ZW5jZSBudW1iZXJzIHRoYXQgd2lsbCBiZSBjb2xsZWN0ZWQuIFRoaXMgcHJldmVudHNcclxuICAgIC8vIHVzIGZyb20gY29sbGVjdGluZyBhIGh1Z2UgbnVtYmVyIG9mIHNlcXVlbmNlIG51bWJlcnMgaWYgdGhlIGNhY2hlIGhhcyBncm93biB2ZXJ5IGxhcmdlLlxyXG4gICAgbWF4aW11bVNlcXVlbmNlTnVtYmVyc1RvQ29sbGVjdCkge1xyXG4gICAgICAgIHRoaXMuY2FjaGVTaXplQ29sbGVjdGlvblRocmVzaG9sZCA9IGNhY2hlU2l6ZUNvbGxlY3Rpb25UaHJlc2hvbGQ7XHJcbiAgICAgICAgdGhpcy5wZXJjZW50aWxlVG9Db2xsZWN0ID0gcGVyY2VudGlsZVRvQ29sbGVjdDtcclxuICAgICAgICB0aGlzLm1heGltdW1TZXF1ZW5jZU51bWJlcnNUb0NvbGxlY3QgPSBtYXhpbXVtU2VxdWVuY2VOdW1iZXJzVG9Db2xsZWN0O1xyXG4gICAgfVxyXG4gICAgTHJ1UGFyYW1zLndpdGhDYWNoZVNpemUgPSBmdW5jdGlvbiAoY2FjaGVTaXplKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBMcnVQYXJhbXMoY2FjaGVTaXplLCBMcnVQYXJhbXMuREVGQVVMVF9DT0xMRUNUSU9OX1BFUkNFTlRJTEUsIExydVBhcmFtcy5ERUZBVUxUX01BWF9TRVFVRU5DRV9OVU1CRVJTX1RPX0NPTExFQ1QpO1xyXG4gICAgfTtcclxuICAgIExydVBhcmFtcy5DT0xMRUNUSU9OX0RJU0FCTEVEID0gLTE7XHJcbiAgICBMcnVQYXJhbXMuTUlOSU1VTV9DQUNIRV9TSVpFX0JZVEVTID0gMSAqIDEwMjQgKiAxMDI0O1xyXG4gICAgTHJ1UGFyYW1zLkRFRkFVTFRfQ0FDSEVfU0laRV9CWVRFUyA9IDQwICogMTAyNCAqIDEwMjQ7XHJcbiAgICBMcnVQYXJhbXMuREVGQVVMVF9DT0xMRUNUSU9OX1BFUkNFTlRJTEUgPSAxMDtcclxuICAgIExydVBhcmFtcy5ERUZBVUxUX01BWF9TRVFVRU5DRV9OVU1CRVJTX1RPX0NPTExFQ1QgPSAxMDAwO1xyXG4gICAgTHJ1UGFyYW1zLkRFRkFVTFQgPSBuZXcgTHJ1UGFyYW1zKExydVBhcmFtcy5ERUZBVUxUX0NBQ0hFX1NJWkVfQllURVMsIExydVBhcmFtcy5ERUZBVUxUX0NPTExFQ1RJT05fUEVSQ0VOVElMRSwgTHJ1UGFyYW1zLkRFRkFVTFRfTUFYX1NFUVVFTkNFX05VTUJFUlNfVE9fQ09MTEVDVCk7XHJcbiAgICBMcnVQYXJhbXMuRElTQUJMRUQgPSBuZXcgTHJ1UGFyYW1zKExydVBhcmFtcy5DT0xMRUNUSU9OX0RJU0FCTEVELCAwLCAwKTtcclxuICAgIHJldHVybiBMcnVQYXJhbXM7XHJcbn0oKSk7XHJcbi8qKiBIb3cgbG9uZyB3ZSB3YWl0IHRvIHRyeSBydW5uaW5nIExSVSBHQyBhZnRlciBTREsgaW5pdGlhbGl6YXRpb24uICovXHJcbnZhciBJTklUSUFMX0dDX0RFTEFZX01TID0gMSAqIDYwICogMTAwMDtcclxuLyoqIE1pbmltdW0gYW1vdW50IG9mIHRpbWUgYmV0d2VlbiBHQyBjaGVja3MsIGFmdGVyIHRoZSBmaXJzdCBvbmUuICovXHJcbnZhciBSRUdVTEFSX0dDX0RFTEFZX01TID0gNSAqIDYwICogMTAwMDtcclxuLyoqXHJcbiAqIFRoaXMgY2xhc3MgaXMgcmVzcG9uc2libGUgZm9yIHRoZSBzY2hlZHVsaW5nIG9mIExSVSBnYXJiYWdlIGNvbGxlY3Rpb24uIEl0IGhhbmRsZXMgY2hlY2tpbmdcclxuICogd2hldGhlciBvciBub3QgR0MgaXMgZW5hYmxlZCwgYXMgd2VsbCBhcyB3aGljaCBkZWxheSB0byB1c2UgYmVmb3JlIHRoZSBuZXh0IHJ1bi5cclxuICovXHJcbnZhciBMcnVTY2hlZHVsZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBMcnVTY2hlZHVsZXIoZ2FyYmFnZUNvbGxlY3RvciwgYXN5bmNRdWV1ZSwgbG9jYWxTdG9yZSkge1xyXG4gICAgICAgIHRoaXMuZ2FyYmFnZUNvbGxlY3RvciA9IGdhcmJhZ2VDb2xsZWN0b3I7XHJcbiAgICAgICAgdGhpcy5hc3luY1F1ZXVlID0gYXN5bmNRdWV1ZTtcclxuICAgICAgICB0aGlzLmxvY2FsU3RvcmUgPSBsb2NhbFN0b3JlO1xyXG4gICAgICAgIHRoaXMuaGFzUnVuID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5nY1Rhc2sgPSBudWxsO1xyXG4gICAgfVxyXG4gICAgTHJ1U2NoZWR1bGVyLnByb3RvdHlwZS5zdGFydCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBhc3NlcnQodGhpcy5nY1Rhc2sgPT09IG51bGwsICdDYW5ub3Qgc3RhcnQgYW4gYWxyZWFkeSBzdGFydGVkIExydVNjaGVkdWxlcicpO1xyXG4gICAgICAgIGlmICh0aGlzLmdhcmJhZ2VDb2xsZWN0b3IucGFyYW1zLmNhY2hlU2l6ZUNvbGxlY3Rpb25UaHJlc2hvbGQgIT09XHJcbiAgICAgICAgICAgIExydVBhcmFtcy5DT0xMRUNUSU9OX0RJU0FCTEVEKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2NoZWR1bGVHQygpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBMcnVTY2hlZHVsZXIucHJvdG90eXBlLnN0b3AgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZ2NUYXNrKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZ2NUYXNrLmNhbmNlbCgpO1xyXG4gICAgICAgICAgICB0aGlzLmdjVGFzayA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShMcnVTY2hlZHVsZXIucHJvdG90eXBlLCBcInN0YXJ0ZWRcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nY1Rhc2sgIT09IG51bGw7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBMcnVTY2hlZHVsZXIucHJvdG90eXBlLnNjaGVkdWxlR0MgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBhc3NlcnQodGhpcy5nY1Rhc2sgPT09IG51bGwsICdDYW5ub3Qgc2NoZWR1bGUgR0Mgd2hpbGUgYSB0YXNrIGlzIHBlbmRpbmcnKTtcclxuICAgICAgICB2YXIgZGVsYXkgPSB0aGlzLmhhc1J1biA/IFJFR1VMQVJfR0NfREVMQVlfTVMgOiBJTklUSUFMX0dDX0RFTEFZX01TO1xyXG4gICAgICAgIGRlYnVnKCdMcnVHYXJiYWdlQ29sbGVjdG9yJywgXCJHYXJiYWdlIGNvbGxlY3Rpb24gc2NoZWR1bGVkIGluIFwiICsgZGVsYXkgKyBcIm1zXCIpO1xyXG4gICAgICAgIHRoaXMuZ2NUYXNrID0gdGhpcy5hc3luY1F1ZXVlLmVucXVldWVBZnRlckRlbGF5KFRpbWVySWQuTHJ1R2FyYmFnZUNvbGxlY3Rpb24sIGRlbGF5LCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIF90aGlzLmdjVGFzayA9IG51bGw7XHJcbiAgICAgICAgICAgIF90aGlzLmhhc1J1biA9IHRydWU7XHJcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5sb2NhbFN0b3JlXHJcbiAgICAgICAgICAgICAgICAuY29sbGVjdEdhcmJhZ2UoX3RoaXMuZ2FyYmFnZUNvbGxlY3RvcilcclxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLnNjaGVkdWxlR0MoKTsgfSlcclxuICAgICAgICAgICAgICAgIC5jYXRjaChpZ25vcmVJZlByaW1hcnlMZWFzZUxvc3MpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBMcnVTY2hlZHVsZXI7XHJcbn0oKSk7XHJcbi8qKiBJbXBsZW1lbnRzIHRoZSBzdGVwcyBmb3IgTFJVIGdhcmJhZ2UgY29sbGVjdGlvbi4gKi9cclxudmFyIExydUdhcmJhZ2VDb2xsZWN0b3IgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBMcnVHYXJiYWdlQ29sbGVjdG9yKGRlbGVnYXRlLCBwYXJhbXMpIHtcclxuICAgICAgICB0aGlzLmRlbGVnYXRlID0gZGVsZWdhdGU7XHJcbiAgICAgICAgdGhpcy5wYXJhbXMgPSBwYXJhbXM7XHJcbiAgICB9XHJcbiAgICAvKiogR2l2ZW4gYSBwZXJjZW50aWxlIG9mIHRhcmdldCB0byBjb2xsZWN0LCByZXR1cm5zIHRoZSBudW1iZXIgb2YgdGFyZ2V0cyB0byBjb2xsZWN0LiAqL1xyXG4gICAgTHJ1R2FyYmFnZUNvbGxlY3Rvci5wcm90b3R5cGUuY2FsY3VsYXRlVGFyZ2V0Q291bnQgPSBmdW5jdGlvbiAodHhuLCBwZXJjZW50aWxlKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGVsZWdhdGUuZ2V0U2VxdWVuY2VOdW1iZXJDb3VudCh0eG4pLm5leHQoZnVuY3Rpb24gKHRhcmdldENvdW50KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBNYXRoLmZsb29yKChwZXJjZW50aWxlIC8gMTAwLjApICogdGFyZ2V0Q291bnQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKiBSZXR1cm5zIHRoZSBudGggc2VxdWVuY2UgbnVtYmVyLCBjb3VudGluZyBpbiBvcmRlciBmcm9tIHRoZSBzbWFsbGVzdC4gKi9cclxuICAgIExydUdhcmJhZ2VDb2xsZWN0b3IucHJvdG90eXBlLm50aFNlcXVlbmNlTnVtYmVyID0gZnVuY3Rpb24gKHR4biwgbikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgaWYgKG4gPT09IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKExpc3RlblNlcXVlbmNlLklOVkFMSUQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgYnVmZmVyID0gbmV3IFJvbGxpbmdTZXF1ZW5jZU51bWJlckJ1ZmZlcihuKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5kZWxlZ2F0ZVxyXG4gICAgICAgICAgICAuZm9yRWFjaFRhcmdldCh0eG4sIGZ1bmN0aW9uICh0YXJnZXQpIHsgcmV0dXJuIGJ1ZmZlci5hZGRFbGVtZW50KHRhcmdldC5zZXF1ZW5jZU51bWJlcik7IH0pXHJcbiAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIF90aGlzLmRlbGVnYXRlLmZvckVhY2hPcnBoYW5lZERvY3VtZW50U2VxdWVuY2VOdW1iZXIodHhuLCBmdW5jdGlvbiAoc2VxdWVuY2VOdW1iZXIpIHsgcmV0dXJuIGJ1ZmZlci5hZGRFbGVtZW50KHNlcXVlbmNlTnVtYmVyKTsgfSk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKCkgeyByZXR1cm4gYnVmZmVyLm1heFZhbHVlOyB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJlbW92ZXMgdGFyZ2V0cyB3aXRoIGEgc2VxdWVuY2UgbnVtYmVyIGVxdWFsIHRvIG9yIGxlc3MgdGhhbiB0aGUgZ2l2ZW4gdXBwZXIgYm91bmQsIGFuZCByZW1vdmVzXHJcbiAgICAgKiBkb2N1bWVudCBhc3NvY2lhdGlvbnMgd2l0aCB0aG9zZSB0YXJnZXRzLlxyXG4gICAgICovXHJcbiAgICBMcnVHYXJiYWdlQ29sbGVjdG9yLnByb3RvdHlwZS5yZW1vdmVUYXJnZXRzID0gZnVuY3Rpb24gKHR4biwgdXBwZXJCb3VuZCwgYWN0aXZlVGFyZ2V0SWRzKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGVsZWdhdGUucmVtb3ZlVGFyZ2V0cyh0eG4sIHVwcGVyQm91bmQsIGFjdGl2ZVRhcmdldElkcyk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZW1vdmVzIGRvY3VtZW50cyB0aGF0IGhhdmUgYSBzZXF1ZW5jZSBudW1iZXIgZXF1YWwgdG8gb3IgbGVzcyB0aGFuIHRoZSB1cHBlciBib3VuZCBhbmQgYXJlIG5vdFxyXG4gICAgICogb3RoZXJ3aXNlIHBpbm5lZC5cclxuICAgICAqL1xyXG4gICAgTHJ1R2FyYmFnZUNvbGxlY3Rvci5wcm90b3R5cGUucmVtb3ZlT3JwaGFuZWREb2N1bWVudHMgPSBmdW5jdGlvbiAodHhuLCB1cHBlckJvdW5kKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGVsZWdhdGUucmVtb3ZlT3JwaGFuZWREb2N1bWVudHModHhuLCB1cHBlckJvdW5kKTtcclxuICAgIH07XHJcbiAgICBMcnVHYXJiYWdlQ29sbGVjdG9yLnByb3RvdHlwZS5jb2xsZWN0ID0gZnVuY3Rpb24gKHR4biwgYWN0aXZlVGFyZ2V0SWRzKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBpZiAodGhpcy5wYXJhbXMuY2FjaGVTaXplQ29sbGVjdGlvblRocmVzaG9sZCA9PT0gTHJ1UGFyYW1zLkNPTExFQ1RJT05fRElTQUJMRUQpIHtcclxuICAgICAgICAgICAgZGVidWcoJ0xydUdhcmJhZ2VDb2xsZWN0b3InLCAnR2FyYmFnZSBjb2xsZWN0aW9uIHNraXBwZWQ7IGRpc2FibGVkJyk7XHJcbiAgICAgICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZShHQ19ESURfTk9UX1JVTik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLmdldENhY2hlU2l6ZSh0eG4pLm5leHQoZnVuY3Rpb24gKGNhY2hlU2l6ZSkge1xyXG4gICAgICAgICAgICBpZiAoY2FjaGVTaXplIDwgX3RoaXMucGFyYW1zLmNhY2hlU2l6ZUNvbGxlY3Rpb25UaHJlc2hvbGQpIHtcclxuICAgICAgICAgICAgICAgIGRlYnVnKCdMcnVHYXJiYWdlQ29sbGVjdG9yJywgXCJHYXJiYWdlIGNvbGxlY3Rpb24gc2tpcHBlZDsgQ2FjaGUgc2l6ZSBcIiArIGNhY2hlU2l6ZSArIFwiIFwiICtcclxuICAgICAgICAgICAgICAgICAgICAoXCJpcyBsb3dlciB0aGFuIHRocmVzaG9sZCBcIiArIF90aGlzLnBhcmFtcy5jYWNoZVNpemVDb2xsZWN0aW9uVGhyZXNob2xkKSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gR0NfRElEX05PVF9SVU47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMucnVuR2FyYmFnZUNvbGxlY3Rpb24odHhuLCBhY3RpdmVUYXJnZXRJZHMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgTHJ1R2FyYmFnZUNvbGxlY3Rvci5wcm90b3R5cGUuZ2V0Q2FjaGVTaXplID0gZnVuY3Rpb24gKHR4bikge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRlbGVnYXRlLmdldENhY2hlU2l6ZSh0eG4pO1xyXG4gICAgfTtcclxuICAgIExydUdhcmJhZ2VDb2xsZWN0b3IucHJvdG90eXBlLnJ1bkdhcmJhZ2VDb2xsZWN0aW9uID0gZnVuY3Rpb24gKHR4biwgYWN0aXZlVGFyZ2V0SWRzKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgdXBwZXJCb3VuZFNlcXVlbmNlTnVtYmVyO1xyXG4gICAgICAgIHZhciBzZXF1ZW5jZU51bWJlcnNUb0NvbGxlY3QsIHRhcmdldHNSZW1vdmVkO1xyXG4gICAgICAgIC8vIFRpbWVzdGFtcHMgZm9yIHZhcmlvdXMgcGllY2VzIG9mIHRoZSBwcm9jZXNzXHJcbiAgICAgICAgdmFyIGNvdW50ZWRUYXJnZXRzVHMsIGZvdW5kVXBwZXJCb3VuZFRzLCByZW1vdmVkVGFyZ2V0c1RzLCByZW1vdmVkRG9jdW1lbnRzVHM7XHJcbiAgICAgICAgdmFyIHN0YXJ0VHMgPSBEYXRlLm5vdygpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNhbGN1bGF0ZVRhcmdldENvdW50KHR4biwgdGhpcy5wYXJhbXMucGVyY2VudGlsZVRvQ29sbGVjdClcclxuICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKHNlcXVlbmNlTnVtYmVycykge1xyXG4gICAgICAgICAgICAvLyBDYXAgYXQgdGhlIGNvbmZpZ3VyZWQgbWF4XHJcbiAgICAgICAgICAgIGlmIChzZXF1ZW5jZU51bWJlcnMgPiBfdGhpcy5wYXJhbXMubWF4aW11bVNlcXVlbmNlTnVtYmVyc1RvQ29sbGVjdCkge1xyXG4gICAgICAgICAgICAgICAgZGVidWcoJ0xydUdhcmJhZ2VDb2xsZWN0b3InLCAnQ2FwcGluZyBzZXF1ZW5jZSBudW1iZXJzIHRvIGNvbGxlY3QgZG93biAnICtcclxuICAgICAgICAgICAgICAgICAgICAoXCJ0byB0aGUgbWF4aW11bSBvZiBcIiArIF90aGlzLnBhcmFtcy5tYXhpbXVtU2VxdWVuY2VOdW1iZXJzVG9Db2xsZWN0ICsgXCIgXCIpICtcclxuICAgICAgICAgICAgICAgICAgICAoXCJmcm9tIFwiICsgc2VxdWVuY2VOdW1iZXJzKSk7XHJcbiAgICAgICAgICAgICAgICBzZXF1ZW5jZU51bWJlcnNUb0NvbGxlY3QgPSBfdGhpcy5wYXJhbXNcclxuICAgICAgICAgICAgICAgICAgICAubWF4aW11bVNlcXVlbmNlTnVtYmVyc1RvQ29sbGVjdDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHNlcXVlbmNlTnVtYmVyc1RvQ29sbGVjdCA9IHNlcXVlbmNlTnVtYmVycztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb3VudGVkVGFyZ2V0c1RzID0gRGF0ZS5ub3coKTtcclxuICAgICAgICAgICAgcmV0dXJuIF90aGlzLm50aFNlcXVlbmNlTnVtYmVyKHR4biwgc2VxdWVuY2VOdW1iZXJzVG9Db2xsZWN0KTtcclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAubmV4dChmdW5jdGlvbiAodXBwZXJCb3VuZCkge1xyXG4gICAgICAgICAgICB1cHBlckJvdW5kU2VxdWVuY2VOdW1iZXIgPSB1cHBlckJvdW5kO1xyXG4gICAgICAgICAgICBmb3VuZFVwcGVyQm91bmRUcyA9IERhdGUubm93KCk7XHJcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5yZW1vdmVUYXJnZXRzKHR4biwgdXBwZXJCb3VuZFNlcXVlbmNlTnVtYmVyLCBhY3RpdmVUYXJnZXRJZHMpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uIChudW1UYXJnZXRzUmVtb3ZlZCkge1xyXG4gICAgICAgICAgICB0YXJnZXRzUmVtb3ZlZCA9IG51bVRhcmdldHNSZW1vdmVkO1xyXG4gICAgICAgICAgICByZW1vdmVkVGFyZ2V0c1RzID0gRGF0ZS5ub3coKTtcclxuICAgICAgICAgICAgcmV0dXJuIF90aGlzLnJlbW92ZU9ycGhhbmVkRG9jdW1lbnRzKHR4biwgdXBwZXJCb3VuZFNlcXVlbmNlTnVtYmVyKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAubmV4dChmdW5jdGlvbiAoZG9jdW1lbnRzUmVtb3ZlZCkge1xyXG4gICAgICAgICAgICByZW1vdmVkRG9jdW1lbnRzVHMgPSBEYXRlLm5vdygpO1xyXG4gICAgICAgICAgICBpZiAoZ2V0TG9nTGV2ZWwoKSA8PSBMb2dMZXZlbC5ERUJVRykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGRlc2MgPSAnTFJVIEdhcmJhZ2UgQ29sbGVjdGlvblxcbicgK1xyXG4gICAgICAgICAgICAgICAgICAgIChcIlxcdENvdW50ZWQgdGFyZ2V0cyBpbiBcIiArIChjb3VudGVkVGFyZ2V0c1RzIC0gc3RhcnRUcykgKyBcIm1zXFxuXCIpICtcclxuICAgICAgICAgICAgICAgICAgICAoXCJcXHREZXRlcm1pbmVkIGxlYXN0IHJlY2VudGx5IHVzZWQgXCIgKyBzZXF1ZW5jZU51bWJlcnNUb0NvbGxlY3QgKyBcIiBpbiBcIikgK1xyXG4gICAgICAgICAgICAgICAgICAgIChmb3VuZFVwcGVyQm91bmRUcyAtIGNvdW50ZWRUYXJnZXRzVHMgKyBcIm1zXFxuXCIpICtcclxuICAgICAgICAgICAgICAgICAgICAoXCJcXHRSZW1vdmVkIFwiICsgdGFyZ2V0c1JlbW92ZWQgKyBcIiB0YXJnZXRzIGluIFwiKSArXHJcbiAgICAgICAgICAgICAgICAgICAgKHJlbW92ZWRUYXJnZXRzVHMgLSBmb3VuZFVwcGVyQm91bmRUcyArIFwibXNcXG5cIikgK1xyXG4gICAgICAgICAgICAgICAgICAgIChcIlxcdFJlbW92ZWQgXCIgKyBkb2N1bWVudHNSZW1vdmVkICsgXCIgZG9jdW1lbnRzIGluIFwiKSArXHJcbiAgICAgICAgICAgICAgICAgICAgKHJlbW92ZWREb2N1bWVudHNUcyAtIHJlbW92ZWRUYXJnZXRzVHMgKyBcIm1zXFxuXCIpICtcclxuICAgICAgICAgICAgICAgICAgICAoXCJUb3RhbCBEdXJhdGlvbjogXCIgKyAocmVtb3ZlZERvY3VtZW50c1RzIC0gc3RhcnRUcykgKyBcIm1zXCIpO1xyXG4gICAgICAgICAgICAgICAgZGVidWcoJ0xydUdhcmJhZ2VDb2xsZWN0b3InLCBkZXNjKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoe1xyXG4gICAgICAgICAgICAgICAgZGlkUnVuOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgc2VxdWVuY2VOdW1iZXJzQ29sbGVjdGVkOiBzZXF1ZW5jZU51bWJlcnNUb0NvbGxlY3QsXHJcbiAgICAgICAgICAgICAgICB0YXJnZXRzUmVtb3ZlZDogdGFyZ2V0c1JlbW92ZWQsXHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudHNSZW1vdmVkOiBkb2N1bWVudHNSZW1vdmVkXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBMcnVHYXJiYWdlQ29sbGVjdG9yO1xyXG59KCkpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEEgYmFzZSBjbGFzcyByZXByZXNlbnRpbmcgYSBwZXJzaXN0ZW5jZSB0cmFuc2FjdGlvbiwgZW5jYXBzdWxhdGluZyBib3RoIHRoZVxyXG4gKiB0cmFuc2FjdGlvbidzIHNlcXVlbmNlIG51bWJlcnMgYXMgd2VsbCBhcyBhIGxpc3Qgb2Ygb25Db21taXR0ZWQgbGlzdGVuZXJzLlxyXG4gKlxyXG4gKiBXaGVuIHlvdSBjYWxsIFBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKCksIGl0IHdpbGwgY3JlYXRlIGEgdHJhbnNhY3Rpb24gYW5kXHJcbiAqIHBhc3MgaXQgdG8geW91ciBjYWxsYmFjay4gWW91IHRoZW4gcGFzcyBpdCB0byBhbnkgbWV0aG9kIHRoYXQgb3BlcmF0ZXNcclxuICogb24gcGVyc2lzdGVuY2UuXHJcbiAqL1xyXG52YXIgUGVyc2lzdGVuY2VUcmFuc2FjdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFBlcnNpc3RlbmNlVHJhbnNhY3Rpb24oKSB7XHJcbiAgICAgICAgdGhpcy5vbkNvbW1pdHRlZExpc3RlbmVycyA9IFtdO1xyXG4gICAgfVxyXG4gICAgUGVyc2lzdGVuY2VUcmFuc2FjdGlvbi5wcm90b3R5cGUuYWRkT25Db21taXR0ZWRMaXN0ZW5lciA9IGZ1bmN0aW9uIChsaXN0ZW5lcikge1xyXG4gICAgICAgIHRoaXMub25Db21taXR0ZWRMaXN0ZW5lcnMucHVzaChsaXN0ZW5lcik7XHJcbiAgICB9O1xyXG4gICAgUGVyc2lzdGVuY2VUcmFuc2FjdGlvbi5wcm90b3R5cGUucmFpc2VPbkNvbW1pdHRlZEV2ZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMub25Db21taXR0ZWRMaXN0ZW5lcnMuZm9yRWFjaChmdW5jdGlvbiAobGlzdGVuZXIpIHsgcmV0dXJuIGxpc3RlbmVyKCk7IH0pO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBQZXJzaXN0ZW5jZVRyYW5zYWN0aW9uO1xyXG59KCkpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxudmFyIExPR19UQUckMSA9ICdJbmRleGVkRGJQZXJzaXN0ZW5jZSc7XHJcbi8qKlxyXG4gKiBPbGRlc3QgYWNjZXB0YWJsZSBhZ2UgaW4gbWlsbGlzZWNvbmRzIGZvciBjbGllbnQgbWV0YWRhdGEgYmVmb3JlIHRoZSBjbGllbnRcclxuICogaXMgY29uc2lkZXJlZCBpbmFjdGl2ZSBhbmQgaXRzIGFzc29jaWF0ZWQgZGF0YSBpcyBnYXJiYWdlIGNvbGxlY3RlZC5cclxuICovXHJcbnZhciBNQVhfQ0xJRU5UX0FHRV9NUyA9IDMwICogNjAgKiAxMDAwOyAvLyAzMCBtaW51dGVzXHJcbi8qKlxyXG4gKiBPbGRlc3QgYWNjZXB0YWJsZSBtZXRhZGF0YSBhZ2UgZm9yIGNsaWVudHMgdGhhdCBtYXkgcGFydGljaXBhdGUgaW4gdGhlXHJcbiAqIHByaW1hcnkgbGVhc2UgZWxlY3Rpb24uIENsaWVudHMgdGhhdCBoYXZlIG5vdCB1cGRhdGVkIHRoZWlyIGNsaWVudCBtZXRhZGF0YVxyXG4gKiB3aXRoaW4gNSBzZWNvbmRzIGFyZSBub3QgZWxpZ2libGUgdG8gcmVjZWl2ZSBhIHByaW1hcnkgbGVhc2UuXHJcbiAqL1xyXG52YXIgTUFYX1BSSU1BUllfRUxJR0lCTEVfQUdFX01TID0gNTAwMDtcclxuLyoqXHJcbiAqIFRoZSBpbnRlcnZhbCBhdCB3aGljaCBjbGllbnRzIHdpbGwgdXBkYXRlIHRoZWlyIG1ldGFkYXRhLCBpbmNsdWRpbmdcclxuICogcmVmcmVzaGluZyB0aGVpciBwcmltYXJ5IGxlYXNlIGlmIGhlbGQgb3IgcG90ZW50aWFsbHkgdHJ5aW5nIHRvIGFjcXVpcmUgaXQgaWZcclxuICogbm90IGhlbGQuXHJcbiAqXHJcbiAqIFByaW1hcnkgY2xpZW50cyBtYXkgb3Bwb3J0dW5pc3RpY2FsbHkgcmVmcmVzaCB0aGVpciBtZXRhZGF0YSBlYXJsaWVyXHJcbiAqIGlmIHRoZXkncmUgYWxyZWFkeSBwZXJmb3JtaW5nIGFuIEluZGV4ZWREQiBvcGVyYXRpb24uXHJcbiAqL1xyXG52YXIgQ0xJRU5UX01FVEFEQVRBX1JFRlJFU0hfSU5URVJWQUxfTVMgPSA0MDAwO1xyXG4vKiogVXNlci1mYWNpbmcgZXJyb3Igd2hlbiB0aGUgcHJpbWFyeSBsZWFzZSBpcyByZXF1aXJlZCBidXQgbm90IGF2YWlsYWJsZS4gKi9cclxudmFyIFBSSU1BUllfTEVBU0VfTE9TVF9FUlJPUl9NU0cgPSAnVGhlIGN1cnJlbnQgdGFiIGlzIG5vdCBpbiB0aGUgcmVxdWlyZWQgc3RhdGUgdG8gcGVyZm9ybSB0aGlzIG9wZXJhdGlvbi4gJyArXHJcbiAgICAnSXQgbWlnaHQgYmUgbmVjZXNzYXJ5IHRvIHJlZnJlc2ggdGhlIGJyb3dzZXIgdGFiLic7XHJcbnZhciBQUklNQVJZX0xFQVNFX0VYQ0xVU0lWRV9FUlJPUl9NU0cgPSAnQW5vdGhlciB0YWIgaGFzIGV4Y2x1c2l2ZSBhY2Nlc3MgdG8gdGhlIHBlcnNpc3RlbmNlIGxheWVyLiAnICtcclxuICAgICdUbyBhbGxvdyBzaGFyZWQgYWNjZXNzLCBtYWtlIHN1cmUgdG8gaW52b2tlICcgK1xyXG4gICAgJ2BlbmFibGVQZXJzaXN0ZW5jZSgpYCB3aXRoIGBzeW5jaHJvbml6ZVRhYnM6dHJ1ZWAgaW4gYWxsIHRhYnMuJztcclxudmFyIFVOU1VQUE9SVEVEX1BMQVRGT1JNX0VSUk9SX01TRyA9ICdUaGlzIHBsYXRmb3JtIGlzIGVpdGhlciBtaXNzaW5nJyArXHJcbiAgICAnIEluZGV4ZWREQiBvciBpcyBrbm93biB0byBoYXZlIGFuIGluY29tcGxldGUgaW1wbGVtZW50YXRpb24uIE9mZmxpbmUnICtcclxuICAgICcgcGVyc2lzdGVuY2UgaGFzIGJlZW4gZGlzYWJsZWQuJztcclxuLy8gVGhlIGZvcm1hdCBvZiB0aGUgTG9jYWxTdG9yYWdlIGtleSB0aGF0IHN0b3JlcyB6b21iaWVkIGNsaWVudCBpczpcclxuLy8gICAgIGZpcmVzdG9yZV96b21iaWVfPHBlcnNpc3RlbmNlX3ByZWZpeD5fPGluc3RhbmNlX2tleT5cclxudmFyIFpPTUJJRURfQ0xJRU5UU19LRVlfUFJFRklYID0gJ2ZpcmVzdG9yZV96b21iaWUnO1xyXG52YXIgSW5kZXhlZERiVHJhbnNhY3Rpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICB0c2xpYi5fX2V4dGVuZHMoSW5kZXhlZERiVHJhbnNhY3Rpb24sIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBJbmRleGVkRGJUcmFuc2FjdGlvbihzaW1wbGVEYlRyYW5zYWN0aW9uLCBjdXJyZW50U2VxdWVuY2VOdW1iZXIpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xyXG4gICAgICAgIF90aGlzLnNpbXBsZURiVHJhbnNhY3Rpb24gPSBzaW1wbGVEYlRyYW5zYWN0aW9uO1xyXG4gICAgICAgIF90aGlzLmN1cnJlbnRTZXF1ZW5jZU51bWJlciA9IGN1cnJlbnRTZXF1ZW5jZU51bWJlcjtcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gSW5kZXhlZERiVHJhbnNhY3Rpb247XHJcbn0oUGVyc2lzdGVuY2VUcmFuc2FjdGlvbikpO1xyXG4vKipcclxuICogQW4gSW5kZXhlZERCLWJhY2tlZCBpbnN0YW5jZSBvZiBQZXJzaXN0ZW5jZS4gRGF0YSBpcyBzdG9yZWQgcGVyc2lzdGVudGx5XHJcbiAqIGFjcm9zcyBzZXNzaW9ucy5cclxuICpcclxuICogT24gV2ViIG9ubHksIHRoZSBGaXJlc3RvcmUgU0RLcyBzdXBwb3J0IHNoYXJlZCBhY2Nlc3MgdG8gaXRzIHBlcnNpc3RlbmNlXHJcbiAqIGxheWVyLiBUaGlzIGFsbG93cyBtdWx0aXBsZSBicm93c2VyIHRhYnMgdG8gcmVhZCBhbmQgd3JpdGUgdG8gSW5kZXhlZERiIGFuZFxyXG4gKiB0byBzeW5jaHJvbml6ZSBzdGF0ZSBldmVuIHdpdGhvdXQgbmV0d29yayBjb25uZWN0aXZpdHkuIFNoYXJlZCBhY2Nlc3MgaXNcclxuICogY3VycmVudGx5IG9wdGlvbmFsIGFuZCBub3QgZW5hYmxlZCB1bmxlc3MgYWxsIGNsaWVudHMgaW52b2tlXHJcbiAqIGBlbmFibGVQZXJzaXN0ZW5jZSgpYCB3aXRoIGB7c3luY2hyb25pemVUYWJzOnRydWV9YC5cclxuICpcclxuICogSW4gbXVsdGktdGFiIG1vZGUsIGlmIG11bHRpcGxlIGNsaWVudHMgYXJlIGFjdGl2ZSBhdCB0aGUgc2FtZSB0aW1lLCB0aGUgU0RLXHJcbiAqIHdpbGwgZGVzaWduYXRlIG9uZSBjbGllbnQgYXMgdGhlIOKAnHByaW1hcnkgY2xpZW504oCdLiBBbiBlZmZvcnQgaXMgbWFkZSB0byBwaWNrXHJcbiAqIGEgdmlzaWJsZSwgbmV0d29yay1jb25uZWN0ZWQgYW5kIGFjdGl2ZSBjbGllbnQsIGFuZCB0aGlzIGNsaWVudCBpc1xyXG4gKiByZXNwb25zaWJsZSBmb3IgbGV0dGluZyBvdGhlciBjbGllbnRzIGtub3cgYWJvdXQgaXRzIHByZXNlbmNlLiBUaGUgcHJpbWFyeVxyXG4gKiBjbGllbnQgd3JpdGVzIGEgdW5pcXVlIGNsaWVudC1nZW5lcmF0ZWQgaWRlbnRpZmllciAodGhlIGNsaWVudCBJRCkgdG9cclxuICogSW5kZXhlZERi4oCZcyDigJxvd25lcuKAnSBzdG9yZSBldmVyeSA0IHNlY29uZHMuIElmIHRoZSBwcmltYXJ5IGNsaWVudCBmYWlscyB0b1xyXG4gKiB1cGRhdGUgdGhpcyBlbnRyeSwgYW5vdGhlciBjbGllbnQgY2FuIGFjcXVpcmUgdGhlIGxlYXNlIGFuZCB0YWtlIG92ZXIgYXNcclxuICogcHJpbWFyeS5cclxuICpcclxuICogU29tZSBwZXJzaXN0ZW5jZSBvcGVyYXRpb25zIGluIHRoZSBTREsgYXJlIGRlc2lnbmF0ZWQgYXMgcHJpbWFyeS1jbGllbnQgb25seVxyXG4gKiBvcGVyYXRpb25zLiBUaGlzIGluY2x1ZGVzIHRoZSBhY2tub3dsZWRnbWVudCBvZiBtdXRhdGlvbnMgYW5kIGFsbCB1cGRhdGVzIG9mXHJcbiAqIHJlbW90ZSBkb2N1bWVudHMuIFRoZSBlZmZlY3RzIG9mIHRoZXNlIG9wZXJhdGlvbnMgYXJlIHdyaXR0ZW4gdG8gcGVyc2lzdGVuY2VcclxuICogYW5kIHRoZW4gYnJvYWRjYXN0IHRvIG90aGVyIHRhYnMgdmlhIExvY2FsU3RvcmFnZSAoc2VlXHJcbiAqIGBXZWJTdG9yYWdlU2hhcmVkQ2xpZW50U3RhdGVgKSwgd2hpY2ggdGhlbiByZWZyZXNoIHRoZWlyIHN0YXRlIGZyb21cclxuICogcGVyc2lzdGVuY2UuXHJcbiAqXHJcbiAqIFNpbWlsYXJseSwgdGhlIHByaW1hcnkgY2xpZW50IGxpc3RlbnMgdG8gbm90aWZpY2F0aW9ucyBzZW50IGJ5IHNlY29uZGFyeVxyXG4gKiBjbGllbnRzIHRvIGRpc2NvdmVyIHBlcnNpc3RlbmNlIGNoYW5nZXMgd3JpdHRlbiBieSBzZWNvbmRhcnkgY2xpZW50cywgc3VjaCBhc1xyXG4gKiB0aGUgYWRkaXRpb24gb2YgbmV3IG11dGF0aW9ucyBhbmQgcXVlcnkgdGFyZ2V0cy5cclxuICpcclxuICogSWYgbXVsdGktdGFiIGlzIG5vdCBlbmFibGVkIGFuZCBhbm90aGVyIHRhYiBhbHJlYWR5IG9idGFpbmVkIHRoZSBwcmltYXJ5XHJcbiAqIGxlYXNlLCBJbmRleGVkRGJQZXJzaXN0ZW5jZSBlbnRlcnMgYSBmYWlsZWQgc3RhdGUgYW5kIGFsbCBzdWJzZXF1ZW50XHJcbiAqIG9wZXJhdGlvbnMgd2lsbCBhdXRvbWF0aWNhbGx5IGZhaWwuXHJcbiAqXHJcbiAqIEFkZGl0aW9uYWxseSwgdGhlcmUgaXMgYW4gb3B0aW1pemF0aW9uIHNvIHRoYXQgd2hlbiBhIHRhYiBpcyBjbG9zZWQsIHRoZVxyXG4gKiBwcmltYXJ5IGxlYXNlIGlzIHJlbGVhc2VkIGltbWVkaWF0ZWx5ICh0aGlzIGlzIGVzcGVjaWFsbHkgaW1wb3J0YW50IHRvIG1ha2VcclxuICogc3VyZSB0aGF0IGEgcmVmcmVzaGVkIHRhYiBpcyBhYmxlIHRvIGltbWVkaWF0ZWx5IHJlLWFjcXVpcmUgdGhlIHByaW1hcnlcclxuICogbGVhc2UpLiBVbmZvcnR1bmF0ZWx5LCBJbmRleGVkREIgY2Fubm90IGJlIHJlbGlhYmx5IHVzZWQgaW4gd2luZG93LnVubG9hZFxyXG4gKiBzaW5jZSBpdCBpcyBhbiBhc3luY2hyb25vdXMgQVBJLiBTbyBpbiBhZGRpdGlvbiB0byBhdHRlbXB0aW5nIHRvIGdpdmUgdXAgdGhlXHJcbiAqIGxlYXNlLCB0aGUgbGVhc2Vob2xkZXIgd3JpdGVzIGl0cyBjbGllbnQgSUQgdG8gYSBcInpvbWJpZWRDbGllbnRcIiBlbnRyeSBpblxyXG4gKiBMb2NhbFN0b3JhZ2Ugd2hpY2ggYWN0cyBhcyBhbiBpbmRpY2F0b3IgdGhhdCBhbm90aGVyIHRhYiBzaG91bGQgZ28gYWhlYWQgYW5kXHJcbiAqIHRha2UgdGhlIHByaW1hcnkgbGVhc2UgaW1tZWRpYXRlbHkgcmVnYXJkbGVzcyBvZiB0aGUgY3VycmVudCBsZWFzZSB0aW1lc3RhbXAuXHJcbiAqXHJcbiAqIFRPRE8oYi8xMTQyMjYyMzQpOiBSZW1vdmUgYHN5bmNocm9uaXplVGFic2Agc2VjdGlvbiB3aGVuIG11bHRpLXRhYiBpcyBub1xyXG4gKiBsb25nZXIgb3B0aW9uYWwuXHJcbiAqL1xyXG52YXIgSW5kZXhlZERiUGVyc2lzdGVuY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBJbmRleGVkRGJQZXJzaXN0ZW5jZShhbGxvd1RhYlN5bmNocm9uaXphdGlvbiwgcGVyc2lzdGVuY2VLZXksIGNsaWVudElkLCBwbGF0Zm9ybSwgbHJ1UGFyYW1zLCBxdWV1ZSwgc2VyaWFsaXplciwgc2VxdWVuY2VOdW1iZXJTeW5jZXIpIHtcclxuICAgICAgICB0aGlzLmFsbG93VGFiU3luY2hyb25pemF0aW9uID0gYWxsb3dUYWJTeW5jaHJvbml6YXRpb247XHJcbiAgICAgICAgdGhpcy5wZXJzaXN0ZW5jZUtleSA9IHBlcnNpc3RlbmNlS2V5O1xyXG4gICAgICAgIHRoaXMuY2xpZW50SWQgPSBjbGllbnRJZDtcclxuICAgICAgICB0aGlzLnF1ZXVlID0gcXVldWU7XHJcbiAgICAgICAgdGhpcy5zZXF1ZW5jZU51bWJlclN5bmNlciA9IHNlcXVlbmNlTnVtYmVyU3luY2VyO1xyXG4gICAgICAgIHRoaXMuX3N0YXJ0ZWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmlzUHJpbWFyeSA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMubmV0d29ya0VuYWJsZWQgPSB0cnVlO1xyXG4gICAgICAgIC8qKiBPdXIgd2luZG93LnVubG9hZCBoYW5kbGVyLCBpZiByZWdpc3RlcmVkLiAqL1xyXG4gICAgICAgIHRoaXMud2luZG93VW5sb2FkSGFuZGxlciA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5pbkZvcmVncm91bmQgPSBmYWxzZTtcclxuICAgICAgICAvKiogT3VyICd2aXNpYmlsaXR5Y2hhbmdlJyBsaXN0ZW5lciBpZiByZWdpc3RlcmVkLiAqL1xyXG4gICAgICAgIHRoaXMuZG9jdW1lbnRWaXNpYmlsaXR5SGFuZGxlciA9IG51bGw7XHJcbiAgICAgICAgLyoqIFRoZSBjbGllbnQgbWV0YWRhdGEgcmVmcmVzaCB0YXNrLiAqL1xyXG4gICAgICAgIHRoaXMuY2xpZW50TWV0YWRhdGFSZWZyZXNoZXIgPSBudWxsO1xyXG4gICAgICAgIC8qKiBUaGUgbGFzdCB0aW1lIHdlIGdhcmJhZ2UgY29sbGVjdGVkIHRoZSBjbGllbnQgbWV0YWRhdGEgb2JqZWN0IHN0b3JlLiAqL1xyXG4gICAgICAgIHRoaXMubGFzdEdhcmJhZ2VDb2xsZWN0aW9uVGltZSA9IE51bWJlci5ORUdBVElWRV9JTkZJTklUWTtcclxuICAgICAgICAvKiogQSBsaXN0ZW5lciB0byBub3RpZnkgb24gcHJpbWFyeSBzdGF0ZSBjaGFuZ2VzLiAqL1xyXG4gICAgICAgIHRoaXMucHJpbWFyeVN0YXRlTGlzdGVuZXIgPSBmdW5jdGlvbiAoXykgeyByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7IH07XHJcbiAgICAgICAgdGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZSA9IG5ldyBJbmRleGVkRGJMcnVEZWxlZ2F0ZSh0aGlzLCBscnVQYXJhbXMpO1xyXG4gICAgICAgIHRoaXMuZGJOYW1lID0gcGVyc2lzdGVuY2VLZXkgKyBJbmRleGVkRGJQZXJzaXN0ZW5jZS5NQUlOX0RBVEFCQVNFO1xyXG4gICAgICAgIHRoaXMuc2VyaWFsaXplciA9IG5ldyBMb2NhbFNlcmlhbGl6ZXIoc2VyaWFsaXplcik7XHJcbiAgICAgICAgdGhpcy5kb2N1bWVudCA9IHBsYXRmb3JtLmRvY3VtZW50O1xyXG4gICAgICAgIHRoaXMudGFyZ2V0Q2FjaGUgPSBuZXcgSW5kZXhlZERiVGFyZ2V0Q2FjaGUodGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZSwgdGhpcy5zZXJpYWxpemVyKTtcclxuICAgICAgICB0aGlzLmluZGV4TWFuYWdlciA9IG5ldyBJbmRleGVkRGJJbmRleE1hbmFnZXIoKTtcclxuICAgICAgICB0aGlzLnJlbW90ZURvY3VtZW50Q2FjaGUgPSBuZXcgSW5kZXhlZERiUmVtb3RlRG9jdW1lbnRDYWNoZSh0aGlzLnNlcmlhbGl6ZXIsIHRoaXMuaW5kZXhNYW5hZ2VyKTtcclxuICAgICAgICBpZiAocGxhdGZvcm0ud2luZG93ICYmIHBsYXRmb3JtLndpbmRvdy5sb2NhbFN0b3JhZ2UpIHtcclxuICAgICAgICAgICAgdGhpcy53aW5kb3cgPSBwbGF0Zm9ybS53aW5kb3c7XHJcbiAgICAgICAgICAgIHRoaXMud2ViU3RvcmFnZSA9IHRoaXMud2luZG93LmxvY2FsU3RvcmFnZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLlVOSU1QTEVNRU5URUQsICdJbmRleGVkREIgcGVyc2lzdGVuY2UgaXMgb25seSBhdmFpbGFibGUgb24gcGxhdGZvcm1zIHRoYXQgc3VwcG9ydCBMb2NhbFN0b3JhZ2UuJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgSW5kZXhlZERiUGVyc2lzdGVuY2UuZ2V0U3RvcmUgPSBmdW5jdGlvbiAodHhuLCBzdG9yZSkge1xyXG4gICAgICAgIGlmICh0eG4gaW5zdGFuY2VvZiBJbmRleGVkRGJUcmFuc2FjdGlvbikge1xyXG4gICAgICAgICAgICByZXR1cm4gU2ltcGxlRGIuZ2V0U3RvcmUodHhuLnNpbXBsZURiVHJhbnNhY3Rpb24sIHN0b3JlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRocm93IGZhaWwoJ0luZGV4ZWREYlBlcnNpc3RlbmNlIG11c3QgdXNlIGluc3RhbmNlcyBvZiBJbmRleGVkRGJUcmFuc2FjdGlvbicpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBJbmRleGVkRGJQZXJzaXN0ZW5jZS5jcmVhdGVJbmRleGVkRGJQZXJzaXN0ZW5jZSA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XHJcbiAgICAgICAgcmV0dXJuIHRzbGliLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgcGVyc2lzdGVuY2U7XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYi5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghSW5kZXhlZERiUGVyc2lzdGVuY2UuaXNBdmFpbGFibGUoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuVU5JTVBMRU1FTlRFRCwgVU5TVVBQT1JURURfUExBVEZPUk1fRVJST1JfTVNHKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwZXJzaXN0ZW5jZSA9IG5ldyBJbmRleGVkRGJQZXJzaXN0ZW5jZShvcHRpb25zLmFsbG93VGFiU3luY2hyb25pemF0aW9uLCBvcHRpb25zLnBlcnNpc3RlbmNlS2V5LCBvcHRpb25zLmNsaWVudElkLCBvcHRpb25zLnBsYXRmb3JtLCBvcHRpb25zLmxydVBhcmFtcywgb3B0aW9ucy5xdWV1ZSwgb3B0aW9ucy5zZXJpYWxpemVyLCBvcHRpb25zLnNlcXVlbmNlTnVtYmVyU3luY2VyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgcGVyc2lzdGVuY2Uuc3RhcnQoKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBwZXJzaXN0ZW5jZV07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQXR0ZW1wdCB0byBzdGFydCBJbmRleGVkRGIgcGVyc2lzdGVuY2UuXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybiB7UHJvbWlzZTx2b2lkPn0gV2hldGhlciBwZXJzaXN0ZW5jZSB3YXMgZW5hYmxlZC5cclxuICAgICAqL1xyXG4gICAgSW5kZXhlZERiUGVyc2lzdGVuY2UucHJvdG90eXBlLnN0YXJ0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgYXNzZXJ0KCF0aGlzLnN0YXJ0ZWQsICdJbmRleGVkRGJQZXJzaXN0ZW5jZSBkb3VibGUtc3RhcnRlZCEnKTtcclxuICAgICAgICBhc3NlcnQodGhpcy53aW5kb3cgIT09IG51bGwsIFwiRXhwZWN0ZWQgJ3dpbmRvdycgdG8gYmUgZGVmaW5lZFwiKTtcclxuICAgICAgICByZXR1cm4gU2ltcGxlRGIub3Blbk9yQ3JlYXRlKHRoaXMuZGJOYW1lLCBTQ0hFTUFfVkVSU0lPTiwgbmV3IFNjaGVtYUNvbnZlcnRlcih0aGlzLnNlcmlhbGl6ZXIpKVxyXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoZGIpIHtcclxuICAgICAgICAgICAgX3RoaXMuc2ltcGxlRGIgPSBkYjtcclxuICAgICAgICAgICAgLy8gTk9URTogVGhpcyBpcyBleHBlY3RlZCB0byBmYWlsIHNvbWV0aW1lcyAoaW4gdGhlIGNhc2Ugb2YgYW5vdGhlciB0YWIgYWxyZWFkeVxyXG4gICAgICAgICAgICAvLyBoYXZpbmcgdGhlIHBlcnNpc3RlbmNlIGxvY2spLCBzbyBpdCdzIHRoZSBmaXJzdCB0aGluZyB3ZSBzaG91bGQgZG8uXHJcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy51cGRhdGVDbGllbnRNZXRhZGF0YUFuZFRyeUJlY29tZVByaW1hcnkoKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIF90aGlzLmF0dGFjaFZpc2liaWxpdHlIYW5kbGVyKCk7XHJcbiAgICAgICAgICAgIF90aGlzLmF0dGFjaFdpbmRvd1VubG9hZEhvb2soKTtcclxuICAgICAgICAgICAgX3RoaXMuc2NoZWR1bGVDbGllbnRNZXRhZGF0YUFuZFByaW1hcnlMZWFzZVJlZnJlc2hlcygpO1xyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXMuc2ltcGxlRGIucnVuVHJhbnNhY3Rpb24oJ3JlYWRvbmx5LWlkZW1wb3RlbnQnLCBbRGJUYXJnZXRHbG9iYWwuc3RvcmVdLCBmdW5jdGlvbiAodHhuKSB7IHJldHVybiBnZXRIaWdoZXN0TGlzdGVuU2VxdWVuY2VOdW1iZXIodHhuKTsgfSk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKGhpZ2hlc3RMaXN0ZW5TZXF1ZW5jZU51bWJlcikge1xyXG4gICAgICAgICAgICBfdGhpcy5saXN0ZW5TZXF1ZW5jZSA9IG5ldyBMaXN0ZW5TZXF1ZW5jZShoaWdoZXN0TGlzdGVuU2VxdWVuY2VOdW1iZXIsIF90aGlzLnNlcXVlbmNlTnVtYmVyU3luY2VyKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIF90aGlzLl9zdGFydGVkID0gdHJ1ZTtcclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKHJlYXNvbikge1xyXG4gICAgICAgICAgICBfdGhpcy5zaW1wbGVEYiAmJiBfdGhpcy5zaW1wbGVEYi5jbG9zZSgpO1xyXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QocmVhc29uKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBJbmRleGVkRGJQZXJzaXN0ZW5jZS5wcm90b3R5cGUuc2V0UHJpbWFyeVN0YXRlTGlzdGVuZXIgPSBmdW5jdGlvbiAocHJpbWFyeVN0YXRlTGlzdGVuZXIpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMucHJpbWFyeVN0YXRlTGlzdGVuZXIgPSBmdW5jdGlvbiAocHJpbWFyeVN0YXRlKSB7IHJldHVybiB0c2xpYi5fX2F3YWl0ZXIoX3RoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYi5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnN0YXJ0ZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgcHJpbWFyeVN0YXRlTGlzdGVuZXIocHJpbWFyeVN0YXRlKV07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pOyB9O1xyXG4gICAgICAgIHJldHVybiBwcmltYXJ5U3RhdGVMaXN0ZW5lcih0aGlzLmlzUHJpbWFyeSk7XHJcbiAgICB9O1xyXG4gICAgSW5kZXhlZERiUGVyc2lzdGVuY2UucHJvdG90eXBlLnNldERhdGFiYXNlRGVsZXRlZExpc3RlbmVyID0gZnVuY3Rpb24gKGRhdGFiYXNlRGVsZXRlZExpc3RlbmVyKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB0aGlzLnNpbXBsZURiLnNldFZlcnNpb25DaGFuZ2VMaXN0ZW5lcihmdW5jdGlvbiAoZXZlbnQpIHsgcmV0dXJuIHRzbGliLl9fYXdhaXRlcihfdGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEoZXZlbnQubmV3VmVyc2lvbiA9PT0gbnVsbCkpIHJldHVybiBbMyAvKmJyZWFrKi8sIDJdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBkYXRhYmFzZURlbGV0ZWRMaXN0ZW5lcigpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSAyO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTsgfSk7XHJcbiAgICB9O1xyXG4gICAgSW5kZXhlZERiUGVyc2lzdGVuY2UucHJvdG90eXBlLnNldE5ldHdvcmtFbmFibGVkID0gZnVuY3Rpb24gKG5ldHdvcmtFbmFibGVkKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBpZiAodGhpcy5uZXR3b3JrRW5hYmxlZCAhPT0gbmV0d29ya0VuYWJsZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5uZXR3b3JrRW5hYmxlZCA9IG5ldHdvcmtFbmFibGVkO1xyXG4gICAgICAgICAgICAvLyBTY2hlZHVsZSBhIHByaW1hcnkgbGVhc2UgcmVmcmVzaCBmb3IgaW1tZWRpYXRlIGV4ZWN1dGlvbi4gVGhlIGV2ZW50dWFsXHJcbiAgICAgICAgICAgIC8vIGxlYXNlIHVwZGF0ZSB3aWxsIGJlIHByb3BhZ2F0ZWQgdmlhIGBwcmltYXJ5U3RhdGVMaXN0ZW5lcmAuXHJcbiAgICAgICAgICAgIHRoaXMucXVldWUuZW5xdWV1ZUFuZEZvcmdldChmdW5jdGlvbiAoKSB7IHJldHVybiB0c2xpYi5fX2F3YWl0ZXIoX3RoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHNsaWIuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuc3RhcnRlZCkgcmV0dXJuIFszIC8qYnJlYWsqLywgMl07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLnVwZGF0ZUNsaWVudE1ldGFkYXRhQW5kVHJ5QmVjb21lUHJpbWFyeSgpXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSAyO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI6IHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7IH0pO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFVwZGF0ZXMgdGhlIGNsaWVudCBtZXRhZGF0YSBpbiBJbmRleGVkRGIgYW5kIGF0dGVtcHRzIHRvIGVpdGhlciBvYnRhaW4gb3JcclxuICAgICAqIGV4dGVuZCB0aGUgcHJpbWFyeSBsZWFzZSBmb3IgdGhlIGxvY2FsIGNsaWVudC4gQXN5bmNocm9ub3VzbHkgbm90aWZpZXMgdGhlXHJcbiAgICAgKiBwcmltYXJ5IHN0YXRlIGxpc3RlbmVyIGlmIHRoZSBjbGllbnQgZWl0aGVyIG5ld2x5IG9idGFpbmVkIG9yIHJlbGVhc2VkIGl0c1xyXG4gICAgICogcHJpbWFyeSBsZWFzZS5cclxuICAgICAqL1xyXG4gICAgSW5kZXhlZERiUGVyc2lzdGVuY2UucHJvdG90eXBlLnVwZGF0ZUNsaWVudE1ldGFkYXRhQW5kVHJ5QmVjb21lUHJpbWFyeSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNpbXBsZURiXHJcbiAgICAgICAgICAgIC5ydW5UcmFuc2FjdGlvbigncmVhZHdyaXRlLWlkZW1wb3RlbnQnLCBBTExfU1RPUkVTLCBmdW5jdGlvbiAodHhuKSB7XHJcbiAgICAgICAgICAgIHZhciBtZXRhZGF0YVN0b3JlID0gY2xpZW50TWV0YWRhdGFTdG9yZSh0eG4pO1xyXG4gICAgICAgICAgICByZXR1cm4gbWV0YWRhdGFTdG9yZVxyXG4gICAgICAgICAgICAgICAgLnB1dChuZXcgRGJDbGllbnRNZXRhZGF0YShfdGhpcy5jbGllbnRJZCwgRGF0ZS5ub3coKSwgX3RoaXMubmV0d29ya0VuYWJsZWQsIF90aGlzLmluRm9yZWdyb3VuZCkpXHJcbiAgICAgICAgICAgICAgICAubmV4dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoX3RoaXMuaXNQcmltYXJ5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLnZlcmlmeVByaW1hcnlMZWFzZSh0eG4pLm5leHQoZnVuY3Rpb24gKHN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFzdWNjZXNzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5pc1ByaW1hcnkgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnF1ZXVlLmVucXVldWVBbmRGb3JnZXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5wcmltYXJ5U3RhdGVMaXN0ZW5lcihmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMuY2FuQWN0QXNQcmltYXJ5KHR4bik7IH0pXHJcbiAgICAgICAgICAgICAgICAubmV4dChmdW5jdGlvbiAoY2FuQWN0QXNQcmltYXJ5KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoX3RoaXMuaXNQcmltYXJ5ICYmICFjYW5BY3RBc1ByaW1hcnkpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMucmVsZWFzZVByaW1hcnlMZWFzZUlmSGVsZCh0eG4pLm5leHQoZnVuY3Rpb24gKCkgeyByZXR1cm4gZmFsc2U7IH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoY2FuQWN0QXNQcmltYXJ5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLmFjcXVpcmVPckV4dGVuZFByaW1hcnlMZWFzZSh0eG4pLm5leHQoZnVuY3Rpb24gKCkgeyByZXR1cm4gdHJ1ZTsgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gLyogY2FuQWN0QXNQcmltYXJ5PSAqLyBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIGlmICghX3RoaXMuYWxsb3dUYWJTeW5jaHJvbml6YXRpb24pIHtcclxuICAgICAgICAgICAgICAgIHRocm93IGU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZGVidWcoTE9HX1RBRyQxLCAnUmVsZWFzaW5nIG93bmVyIGxlYXNlIGFmdGVyIGVycm9yIGR1cmluZyBsZWFzZSByZWZyZXNoJywgZSk7XHJcbiAgICAgICAgICAgIHJldHVybiAvKiBpc1ByaW1hcnk9ICovIGZhbHNlO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChpc1ByaW1hcnkpIHtcclxuICAgICAgICAgICAgaWYgKF90aGlzLmlzUHJpbWFyeSAhPT0gaXNQcmltYXJ5KSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5xdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMucHJpbWFyeVN0YXRlTGlzdGVuZXIoaXNQcmltYXJ5KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIF90aGlzLmlzUHJpbWFyeSA9IGlzUHJpbWFyeTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBJbmRleGVkRGJQZXJzaXN0ZW5jZS5wcm90b3R5cGUudmVyaWZ5UHJpbWFyeUxlYXNlID0gZnVuY3Rpb24gKHR4bikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIHN0b3JlID0gcHJpbWFyeUNsaWVudFN0b3JlKHR4bik7XHJcbiAgICAgICAgcmV0dXJuIHN0b3JlLmdldChEYlByaW1hcnlDbGllbnQua2V5KS5uZXh0KGZ1bmN0aW9uIChwcmltYXJ5Q2xpZW50KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZShfdGhpcy5pc0xvY2FsQ2xpZW50KHByaW1hcnlDbGllbnQpKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBJbmRleGVkRGJQZXJzaXN0ZW5jZS5wcm90b3R5cGUucmVtb3ZlQ2xpZW50TWV0YWRhdGEgPSBmdW5jdGlvbiAodHhuKSB7XHJcbiAgICAgICAgdmFyIG1ldGFkYXRhU3RvcmUgPSBjbGllbnRNZXRhZGF0YVN0b3JlKHR4bik7XHJcbiAgICAgICAgcmV0dXJuIG1ldGFkYXRhU3RvcmUuZGVsZXRlKHRoaXMuY2xpZW50SWQpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogSWYgdGhlIGdhcmJhZ2UgY29sbGVjdGlvbiB0aHJlc2hvbGQgaGFzIHBhc3NlZCwgcHJ1bmVzIHRoZVxyXG4gICAgICogUmVtb3RlRG9jdW1lbnRDaGFuZ2VzIGFuZCB0aGUgQ2xpZW50TWV0YWRhdGEgc3RvcmUgYmFzZWQgb24gdGhlIGxhc3QgdXBkYXRlXHJcbiAgICAgKiB0aW1lIG9mIGFsbCBjbGllbnRzLlxyXG4gICAgICovXHJcbiAgICBJbmRleGVkRGJQZXJzaXN0ZW5jZS5wcm90b3R5cGUubWF5YmVHYXJiYWdlQ29sbGVjdE11bHRpQ2xpZW50U3RhdGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRzbGliLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgaW5hY3RpdmVDbGllbnRzO1xyXG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgICAgICByZXR1cm4gdHNsaWIuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoISh0aGlzLmlzUHJpbWFyeSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIXRoaXMuaXNXaXRoaW5BZ2UodGhpcy5sYXN0R2FyYmFnZUNvbGxlY3Rpb25UaW1lLCBNQVhfQ0xJRU5UX0FHRV9NUykpKSByZXR1cm4gWzMgLypicmVhayovLCAyXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sYXN0R2FyYmFnZUNvbGxlY3Rpb25UaW1lID0gRGF0ZS5ub3coKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5ydW5UcmFuc2FjdGlvbignbWF5YmVHYXJiYWdlQ29sbGVjdE11bHRpQ2xpZW50U3RhdGUnLCAncmVhZHdyaXRlLXByaW1hcnktaWRlbXBvdGVudCcsIGZ1bmN0aW9uICh0eG4pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWV0YWRhdGFTdG9yZSA9IEluZGV4ZWREYlBlcnNpc3RlbmNlLmdldFN0b3JlKHR4biwgRGJDbGllbnRNZXRhZGF0YS5zdG9yZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1ldGFkYXRhU3RvcmUubG9hZEFsbCgpLm5leHQoZnVuY3Rpb24gKGV4aXN0aW5nQ2xpZW50cykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYWN0aXZlID0gX3RoaXMuZmlsdGVyQWN0aXZlQ2xpZW50cyhleGlzdGluZ0NsaWVudHMsIE1BWF9DTElFTlRfQUdFX01TKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGluYWN0aXZlID0gZXhpc3RpbmdDbGllbnRzLmZpbHRlcihmdW5jdGlvbiAoY2xpZW50KSB7IHJldHVybiBhY3RpdmUuaW5kZXhPZihjbGllbnQpID09PSAtMTsgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIERlbGV0ZSBtZXRhZGF0YSBmb3IgY2xpZW50cyB0aGF0IGFyZSBubyBsb25nZXIgY29uc2lkZXJlZCBhY3RpdmUuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UuZm9yRWFjaChpbmFjdGl2ZSwgZnVuY3Rpb24gKGluYWN0aXZlQ2xpZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWV0YWRhdGFTdG9yZS5kZWxldGUoaW5hY3RpdmVDbGllbnQuY2xpZW50SWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KS5uZXh0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIGluYWN0aXZlOyB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGluYWN0aXZlQ2xpZW50cyA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRGVsZXRlIHBvdGVudGlhbCBsZWZ0b3ZlciBlbnRyaWVzIHRoYXQgbWF5IGNvbnRpbnVlIHRvIG1hcmsgdGhlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGluYWN0aXZlIGNsaWVudHMgYXMgem9tYmllZCBpbiBMb2NhbFN0b3JhZ2UuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIElkZWFsbHkgd2UnZCBkZWxldGUgdGhlIEluZGV4ZWREYiBhbmQgTG9jYWxTdG9yYWdlIHpvbWJpZSBlbnRyaWVzIGZvclxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGUgY2xpZW50IGF0b21pY2FsbHksIGJ1dCB3ZSBjYW4ndC4gU28gd2Ugb3B0IHRvIGRlbGV0ZSB0aGUgSW5kZXhlZERiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVudHJpZXMgZmlyc3QgdG8gYXZvaWQgcG90ZW50aWFsbHkgcmV2aXZpbmcgYSB6b21iaWVkIGNsaWVudC5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5hY3RpdmVDbGllbnRzLmZvckVhY2goZnVuY3Rpb24gKGluYWN0aXZlQ2xpZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy53aW5kb3cubG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oX3RoaXMuem9tYmllZENsaWVudExvY2FsU3RvcmFnZUtleShpbmFjdGl2ZUNsaWVudC5jbGllbnRJZCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSAyO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFNjaGVkdWxlcyBhIHJlY3VycmluZyB0aW1lciB0byB1cGRhdGUgdGhlIGNsaWVudCBtZXRhZGF0YSBhbmQgdG8gZWl0aGVyXHJcbiAgICAgKiBleHRlbmQgb3IgYWNxdWlyZSB0aGUgcHJpbWFyeSBsZWFzZSBpZiB0aGUgY2xpZW50IGlzIGVsaWdpYmxlLlxyXG4gICAgICovXHJcbiAgICBJbmRleGVkRGJQZXJzaXN0ZW5jZS5wcm90b3R5cGUuc2NoZWR1bGVDbGllbnRNZXRhZGF0YUFuZFByaW1hcnlMZWFzZVJlZnJlc2hlcyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMuY2xpZW50TWV0YWRhdGFSZWZyZXNoZXIgPSB0aGlzLnF1ZXVlLmVucXVldWVBZnRlckRlbGF5KFRpbWVySWQuQ2xpZW50TWV0YWRhdGFSZWZyZXNoLCBDTElFTlRfTUVUQURBVEFfUkVGUkVTSF9JTlRFUlZBTF9NUywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXMudXBkYXRlQ2xpZW50TWV0YWRhdGFBbmRUcnlCZWNvbWVQcmltYXJ5KClcclxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLm1heWJlR2FyYmFnZUNvbGxlY3RNdWx0aUNsaWVudFN0YXRlKCk7IH0pXHJcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5zY2hlZHVsZUNsaWVudE1ldGFkYXRhQW5kUHJpbWFyeUxlYXNlUmVmcmVzaGVzKCk7IH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKiBDaGVja3Mgd2hldGhlciBgY2xpZW50YCBpcyB0aGUgbG9jYWwgY2xpZW50LiAqL1xyXG4gICAgSW5kZXhlZERiUGVyc2lzdGVuY2UucHJvdG90eXBlLmlzTG9jYWxDbGllbnQgPSBmdW5jdGlvbiAoY2xpZW50KSB7XHJcbiAgICAgICAgcmV0dXJuIGNsaWVudCA/IGNsaWVudC5vd25lcklkID09PSB0aGlzLmNsaWVudElkIDogZmFsc2U7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBFdmFsdWF0ZSB0aGUgc3RhdGUgb2YgYWxsIGFjdGl2ZSBjbGllbnRzIGFuZCBkZXRlcm1pbmUgd2hldGhlciB0aGUgbG9jYWxcclxuICAgICAqIGNsaWVudCBpcyBvciBjYW4gYWN0IGFzIHRoZSBob2xkZXIgb2YgdGhlIHByaW1hcnkgbGVhc2UuIFJldHVybnMgd2hldGhlclxyXG4gICAgICogdGhlIGNsaWVudCBpcyBlbGlnaWJsZSBmb3IgdGhlIGxlYXNlLCBidXQgZG9lcyBub3QgYWN0dWFsbHkgYWNxdWlyZSBpdC5cclxuICAgICAqIE1heSByZXR1cm4gJ2ZhbHNlJyBldmVuIGlmIHRoZXJlIGlzIG5vIGFjdGl2ZSBsZWFzZWhvbGRlciBhbmQgYW5vdGhlclxyXG4gICAgICogKGZvcmVncm91bmQpIGNsaWVudCBzaG91bGQgYmVjb21lIGxlYXNlaG9sZGVyIGluc3RlYWQuXHJcbiAgICAgKi9cclxuICAgIEluZGV4ZWREYlBlcnNpc3RlbmNlLnByb3RvdHlwZS5jYW5BY3RBc1ByaW1hcnkgPSBmdW5jdGlvbiAodHhuKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgc3RvcmUgPSBwcmltYXJ5Q2xpZW50U3RvcmUodHhuKTtcclxuICAgICAgICByZXR1cm4gc3RvcmVcclxuICAgICAgICAgICAgLmdldChEYlByaW1hcnlDbGllbnQua2V5KVxyXG4gICAgICAgICAgICAubmV4dChmdW5jdGlvbiAoY3VycmVudFByaW1hcnkpIHtcclxuICAgICAgICAgICAgdmFyIGN1cnJlbnRMZWFzZUlzVmFsaWQgPSBjdXJyZW50UHJpbWFyeSAhPT0gbnVsbCAmJlxyXG4gICAgICAgICAgICAgICAgX3RoaXMuaXNXaXRoaW5BZ2UoY3VycmVudFByaW1hcnkubGVhc2VUaW1lc3RhbXBNcywgTUFYX1BSSU1BUllfRUxJR0lCTEVfQUdFX01TKSAmJlxyXG4gICAgICAgICAgICAgICAgIV90aGlzLmlzQ2xpZW50Wm9tYmllZChjdXJyZW50UHJpbWFyeS5vd25lcklkKTtcclxuICAgICAgICAgICAgLy8gQSBjbGllbnQgaXMgZWxpZ2libGUgZm9yIHRoZSBwcmltYXJ5IGxlYXNlIGlmOlxyXG4gICAgICAgICAgICAvLyAtIGl0cyBuZXR3b3JrIGlzIGVuYWJsZWQgYW5kIHRoZSBjbGllbnQncyB0YWIgaXMgaW4gdGhlIGZvcmVncm91bmQuXHJcbiAgICAgICAgICAgIC8vIC0gaXRzIG5ldHdvcmsgaXMgZW5hYmxlZCBhbmQgbm8gb3RoZXIgY2xpZW50J3MgdGFiIGlzIGluIHRoZVxyXG4gICAgICAgICAgICAvLyAgIGZvcmVncm91bmQuXHJcbiAgICAgICAgICAgIC8vIC0gZXZlcnkgY2xpZW50cyBuZXR3b3JrIGlzIGRpc2FibGVkIGFuZCB0aGUgY2xpZW50J3MgdGFiIGlzIGluIHRoZVxyXG4gICAgICAgICAgICAvLyAgIGZvcmVncm91bmQuXHJcbiAgICAgICAgICAgIC8vIC0gZXZlcnkgY2xpZW50cyBuZXR3b3JrIGlzIGRpc2FibGVkIGFuZCBubyBvdGhlciBjbGllbnQncyB0YWIgaXMgaW5cclxuICAgICAgICAgICAgLy8gICB0aGUgZm9yZWdyb3VuZC5cclxuICAgICAgICAgICAgaWYgKGN1cnJlbnRMZWFzZUlzVmFsaWQpIHtcclxuICAgICAgICAgICAgICAgIGlmIChfdGhpcy5pc0xvY2FsQ2xpZW50KGN1cnJlbnRQcmltYXJ5KSAmJiBfdGhpcy5uZXR3b3JrRW5hYmxlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKCFfdGhpcy5pc0xvY2FsQ2xpZW50KGN1cnJlbnRQcmltYXJ5KSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghY3VycmVudFByaW1hcnkuYWxsb3dUYWJTeW5jaHJvbml6YXRpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRmFpbCB0aGUgYGNhbkFjdEFzUHJpbWFyeWAgY2hlY2sgaWYgdGhlIGN1cnJlbnQgbGVhc2Vob2xkZXIgaGFzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIG5vdCBvcHRlZCBpbnRvIG11bHRpLXRhYiBzeW5jaHJvbml6YXRpb24uIElmIHRoaXMgaGFwcGVucyBhdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjbGllbnQgc3RhcnR1cCwgd2UgcmVqZWN0IHRoZSBQcm9taXNlIHJldHVybmVkIGJ5XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGBlbmFibGVQZXJzaXN0ZW5jZSgpYCBhbmQgdGhlIHVzZXIgY2FuIGNvbnRpbnVlIHRvIHVzZSBGaXJlc3RvcmVcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gd2l0aCBpbi1tZW1vcnkgcGVyc2lzdGVuY2UuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIHRoaXMgZmFpbHMgZHVyaW5nIGEgbGVhc2UgcmVmcmVzaCwgd2Ugd2lsbCBpbnN0ZWFkIGJsb2NrIHRoZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBBc3luY1F1ZXVlIGZyb20gZXhlY3V0aW5nIGZ1cnRoZXIgb3BlcmF0aW9ucy4gTm90ZSB0aGF0IHRoaXMgaXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYWNjZXB0YWJsZSBzaW5jZSBtaXhpbmcgJiBtYXRjaGluZyBkaWZmZXJlbnQgYHN5bmNocm9uaXplVGFic2BcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0dGluZ3MgaXMgbm90IHN1cHBvcnRlZC5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy9cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVE9ETyhiLzExNDIyNjIzNCk6IFJlbW92ZSB0aGlzIGNoZWNrIHdoZW4gYHN5bmNocm9uaXplVGFic2AgY2FuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIG5vIGxvbmdlciBiZSB0dXJuZWQgb2ZmLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5GQUlMRURfUFJFQ09ORElUSU9OLCBQUklNQVJZX0xFQVNFX0VYQ0xVU0lWRV9FUlJPUl9NU0cpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKF90aGlzLm5ldHdvcmtFbmFibGVkICYmIF90aGlzLmluRm9yZWdyb3VuZCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGNsaWVudE1ldGFkYXRhU3RvcmUodHhuKVxyXG4gICAgICAgICAgICAgICAgLmxvYWRBbGwoKVxyXG4gICAgICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKGV4aXN0aW5nQ2xpZW50cykge1xyXG4gICAgICAgICAgICAgICAgLy8gUHJvY2VzcyBhbGwgZXhpc3RpbmcgY2xpZW50cyBhbmQgZGV0ZXJtaW5lIHdoZXRoZXIgYXQgbGVhc3Qgb25lIG9mXHJcbiAgICAgICAgICAgICAgICAvLyB0aGVtIGlzIGJldHRlciBzdWl0ZWQgdG8gb2J0YWluIHRoZSBwcmltYXJ5IGxlYXNlLlxyXG4gICAgICAgICAgICAgICAgdmFyIHByZWZlcnJlZENhbmRpZGF0ZSA9IF90aGlzLmZpbHRlckFjdGl2ZUNsaWVudHMoZXhpc3RpbmdDbGllbnRzLCBNQVhfUFJJTUFSWV9FTElHSUJMRV9BR0VfTVMpLmZpbmQoZnVuY3Rpb24gKG90aGVyQ2xpZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLmNsaWVudElkICE9PSBvdGhlckNsaWVudC5jbGllbnRJZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgb3RoZXJDbGllbnRIYXNCZXR0ZXJOZXR3b3JrU3RhdGUgPSAhX3RoaXMubmV0d29ya0VuYWJsZWQgJiYgb3RoZXJDbGllbnQubmV0d29ya0VuYWJsZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvdGhlckNsaWVudEhhc0JldHRlclZpc2liaWxpdHkgPSAhX3RoaXMuaW5Gb3JlZ3JvdW5kICYmIG90aGVyQ2xpZW50LmluRm9yZWdyb3VuZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG90aGVyQ2xpZW50SGFzU2FtZU5ldHdvcmtTdGF0ZSA9IF90aGlzLm5ldHdvcmtFbmFibGVkID09PSBvdGhlckNsaWVudC5uZXR3b3JrRW5hYmxlZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG90aGVyQ2xpZW50SGFzQmV0dGVyTmV0d29ya1N0YXRlIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAob3RoZXJDbGllbnRIYXNCZXR0ZXJWaXNpYmlsaXR5ICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3RoZXJDbGllbnRIYXNTYW1lTmV0d29ya1N0YXRlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcHJlZmVycmVkQ2FuZGlkYXRlID09PSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uIChjYW5BY3RBc1ByaW1hcnkpIHtcclxuICAgICAgICAgICAgaWYgKF90aGlzLmlzUHJpbWFyeSAhPT0gY2FuQWN0QXNQcmltYXJ5KSB7XHJcbiAgICAgICAgICAgICAgICBkZWJ1ZyhMT0dfVEFHJDEsIFwiQ2xpZW50IFwiICsgKGNhbkFjdEFzUHJpbWFyeSA/ICdpcycgOiAnaXMgbm90JykgKyBcIiBlbGlnaWJsZSBmb3IgYSBwcmltYXJ5IGxlYXNlLlwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gY2FuQWN0QXNQcmltYXJ5O1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIEluZGV4ZWREYlBlcnNpc3RlbmNlLnByb3RvdHlwZS5zaHV0ZG93biA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdHNsaWIuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYi5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoZSBzaHV0ZG93bigpIG9wZXJhdGlvbnMgYXJlIGlkZW1wb3RlbnQgYW5kIGNhbiBiZSBjYWxsZWQgZXZlbiB3aGVuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHN0YXJ0KCkgYWJvcnRlZCAoZS5nLiBiZWNhdXNlIGl0IGNvdWxkbid0IGFjcXVpcmUgdGhlIHBlcnNpc3RlbmNlIGxlYXNlKS5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fc3RhcnRlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1hcmtDbGllbnRab21iaWVkKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmNsaWVudE1ldGFkYXRhUmVmcmVzaGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNsaWVudE1ldGFkYXRhUmVmcmVzaGVyLmNhbmNlbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jbGllbnRNZXRhZGF0YVJlZnJlc2hlciA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZXRhY2hWaXNpYmlsaXR5SGFuZGxlcigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRldGFjaFdpbmRvd1VubG9hZEhvb2soKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5zaW1wbGVEYi5ydW5UcmFuc2FjdGlvbigncmVhZHdyaXRlLWlkZW1wb3RlbnQnLCBbRGJQcmltYXJ5Q2xpZW50LnN0b3JlLCBEYkNsaWVudE1ldGFkYXRhLnN0b3JlXSwgZnVuY3Rpb24gKHR4bikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5yZWxlYXNlUHJpbWFyeUxlYXNlSWZIZWxkKHR4bikubmV4dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5yZW1vdmVDbGllbnRNZXRhZGF0YSh0eG4pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNpbXBsZURiLmNsb3NlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlbW92ZSB0aGUgZW50cnkgbWFya2luZyB0aGUgY2xpZW50IGFzIHpvbWJpZWQgZnJvbSBMb2NhbFN0b3JhZ2Ugc2luY2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gd2Ugc3VjY2Vzc2Z1bGx5IGRlbGV0ZWQgaXRzIG1ldGFkYXRhIGZyb20gSW5kZXhlZERiLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUNsaWVudFpvbWJpZWRFbnRyeSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyBjbGllbnRzIHRoYXQgYXJlIG5vdCB6b21iaWVkIGFuZCBoYXZlIGFuIHVwZGF0ZVRpbWUgd2l0aGluIHRoZVxyXG4gICAgICogcHJvdmlkZWQgdGhyZXNob2xkLlxyXG4gICAgICovXHJcbiAgICBJbmRleGVkRGJQZXJzaXN0ZW5jZS5wcm90b3R5cGUuZmlsdGVyQWN0aXZlQ2xpZW50cyA9IGZ1bmN0aW9uIChjbGllbnRzLCBhY3Rpdml0eVRocmVzaG9sZE1zKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICByZXR1cm4gY2xpZW50cy5maWx0ZXIoZnVuY3Rpb24gKGNsaWVudCkge1xyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXMuaXNXaXRoaW5BZ2UoY2xpZW50LnVwZGF0ZVRpbWVNcywgYWN0aXZpdHlUaHJlc2hvbGRNcykgJiZcclxuICAgICAgICAgICAgICAgICFfdGhpcy5pc0NsaWVudFpvbWJpZWQoY2xpZW50LmNsaWVudElkKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBJbmRleGVkRGJQZXJzaXN0ZW5jZS5wcm90b3R5cGUuZ2V0QWN0aXZlQ2xpZW50cyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNpbXBsZURiLnJ1blRyYW5zYWN0aW9uKCdyZWFkb25seS1pZGVtcG90ZW50JywgW0RiQ2xpZW50TWV0YWRhdGEuc3RvcmVdLCBmdW5jdGlvbiAodHhuKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBjbGllbnRNZXRhZGF0YVN0b3JlKHR4bilcclxuICAgICAgICAgICAgICAgIC5sb2FkQWxsKClcclxuICAgICAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uIChjbGllbnRzKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuZmlsdGVyQWN0aXZlQ2xpZW50cyhjbGllbnRzLCBNQVhfQ0xJRU5UX0FHRV9NUykubWFwKGZ1bmN0aW9uIChjbGllbnRNZXRhZGF0YSkgeyByZXR1cm4gY2xpZW50TWV0YWRhdGEuY2xpZW50SWQ7IH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBJbmRleGVkRGJQZXJzaXN0ZW5jZS5jbGVhclBlcnNpc3RlbmNlID0gZnVuY3Rpb24gKHBlcnNpc3RlbmNlS2V5KSB7XHJcbiAgICAgICAgcmV0dXJuIHRzbGliLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgZGJOYW1lO1xyXG4gICAgICAgICAgICByZXR1cm4gdHNsaWIuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIUluZGV4ZWREYlBlcnNpc3RlbmNlLmlzQXZhaWxhYmxlKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBQcm9taXNlLnJlc29sdmUoKV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZGJOYW1lID0gcGVyc2lzdGVuY2VLZXkgKyBJbmRleGVkRGJQZXJzaXN0ZW5jZS5NQUlOX0RBVEFCQVNFO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBTaW1wbGVEYi5kZWxldGUoZGJOYW1lKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEluZGV4ZWREYlBlcnNpc3RlbmNlLnByb3RvdHlwZSwgXCJzdGFydGVkXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3N0YXJ0ZWQ7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBJbmRleGVkRGJQZXJzaXN0ZW5jZS5wcm90b3R5cGUuZ2V0TXV0YXRpb25RdWV1ZSA9IGZ1bmN0aW9uICh1c2VyKSB7XHJcbiAgICAgICAgYXNzZXJ0KHRoaXMuc3RhcnRlZCwgJ0Nhbm5vdCBpbml0aWFsaXplIE11dGF0aW9uUXVldWUgYmVmb3JlIHBlcnNpc3RlbmNlIGlzIHN0YXJ0ZWQuJyk7XHJcbiAgICAgICAgcmV0dXJuIEluZGV4ZWREYk11dGF0aW9uUXVldWUuZm9yVXNlcih1c2VyLCB0aGlzLnNlcmlhbGl6ZXIsIHRoaXMuaW5kZXhNYW5hZ2VyLCB0aGlzLnJlZmVyZW5jZURlbGVnYXRlKTtcclxuICAgIH07XHJcbiAgICBJbmRleGVkRGJQZXJzaXN0ZW5jZS5wcm90b3R5cGUuZ2V0VGFyZ2V0Q2FjaGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgYXNzZXJ0KHRoaXMuc3RhcnRlZCwgJ0Nhbm5vdCBpbml0aWFsaXplIFRhcmdldENhY2hlIGJlZm9yZSBwZXJzaXN0ZW5jZSBpcyBzdGFydGVkLicpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnRhcmdldENhY2hlO1xyXG4gICAgfTtcclxuICAgIEluZGV4ZWREYlBlcnNpc3RlbmNlLnByb3RvdHlwZS5nZXRSZW1vdGVEb2N1bWVudENhY2hlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGFzc2VydCh0aGlzLnN0YXJ0ZWQsICdDYW5ub3QgaW5pdGlhbGl6ZSBSZW1vdGVEb2N1bWVudENhY2hlIGJlZm9yZSBwZXJzaXN0ZW5jZSBpcyBzdGFydGVkLicpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnJlbW90ZURvY3VtZW50Q2FjaGU7XHJcbiAgICB9O1xyXG4gICAgSW5kZXhlZERiUGVyc2lzdGVuY2UucHJvdG90eXBlLmdldEluZGV4TWFuYWdlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBhc3NlcnQodGhpcy5zdGFydGVkLCAnQ2Fubm90IGluaXRpYWxpemUgSW5kZXhNYW5hZ2VyIGJlZm9yZSBwZXJzaXN0ZW5jZSBpcyBzdGFydGVkLicpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmluZGV4TWFuYWdlcjtcclxuICAgIH07XHJcbiAgICBJbmRleGVkRGJQZXJzaXN0ZW5jZS5wcm90b3R5cGUucnVuVHJhbnNhY3Rpb24gPSBmdW5jdGlvbiAoYWN0aW9uLCBtb2RlLCB0cmFuc2FjdGlvbk9wZXJhdGlvbikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgZGVidWcoTE9HX1RBRyQxLCAnU3RhcnRpbmcgdHJhbnNhY3Rpb246JywgYWN0aW9uKTtcclxuICAgICAgICAvLyBUT0RPKHNjaG1pZHQtc2ViYXN0aWFuKTogU2ltcGxpZnkgb25jZSBhbGwgdHJhbnNhY3Rpb25zIGFyZSBpZGVtcG90ZW50LlxyXG4gICAgICAgIHZhciBpZGVtcG90ZW50ID0gbW9kZS5lbmRzV2l0aCgnaWRlbXBvdGVudCcpO1xyXG4gICAgICAgIHZhciByZWFkb25seSA9IG1vZGUuc3RhcnRzV2l0aCgncmVhZG9ubHknKTtcclxuICAgICAgICB2YXIgc2ltcGxlRGJNb2RlID0gcmVhZG9ubHlcclxuICAgICAgICAgICAgPyBpZGVtcG90ZW50XHJcbiAgICAgICAgICAgICAgICA/ICdyZWFkb25seS1pZGVtcG90ZW50J1xyXG4gICAgICAgICAgICAgICAgOiAncmVhZG9ubHknXHJcbiAgICAgICAgICAgIDogaWRlbXBvdGVudFxyXG4gICAgICAgICAgICAgICAgPyAncmVhZHdyaXRlLWlkZW1wb3RlbnQnXHJcbiAgICAgICAgICAgICAgICA6ICdyZWFkd3JpdGUnO1xyXG4gICAgICAgIHZhciBwZXJzaXN0ZW5jZVRyYW5zYWN0aW9uO1xyXG4gICAgICAgIC8vIERvIGFsbCB0cmFuc2FjdGlvbnMgYXMgcmVhZHdyaXRlIGFnYWluc3QgYWxsIG9iamVjdCBzdG9yZXMsIHNpbmNlIHdlXHJcbiAgICAgICAgLy8gYXJlIHRoZSBvbmx5IHJlYWRlci93cml0ZXIuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc2ltcGxlRGJcclxuICAgICAgICAgICAgLnJ1blRyYW5zYWN0aW9uKHNpbXBsZURiTW9kZSwgQUxMX1NUT1JFUywgZnVuY3Rpb24gKHNpbXBsZURiVHhuKSB7XHJcbiAgICAgICAgICAgIHBlcnNpc3RlbmNlVHJhbnNhY3Rpb24gPSBuZXcgSW5kZXhlZERiVHJhbnNhY3Rpb24oc2ltcGxlRGJUeG4sIF90aGlzLmxpc3RlblNlcXVlbmNlLm5leHQoKSk7XHJcbiAgICAgICAgICAgIGlmIChtb2RlID09PSAncmVhZHdyaXRlLXByaW1hcnknIHx8XHJcbiAgICAgICAgICAgICAgICBtb2RlID09PSAncmVhZHdyaXRlLXByaW1hcnktaWRlbXBvdGVudCcpIHtcclxuICAgICAgICAgICAgICAgIC8vIFdoaWxlIHdlIG1lcmVseSB2ZXJpZnkgdGhhdCB3ZSBoYXZlIChvciBjYW4gYWNxdWlyZSkgdGhlIGxlYXNlXHJcbiAgICAgICAgICAgICAgICAvLyBpbW1lZGlhdGVseSwgd2Ugd2FpdCB0byBleHRlbmQgdGhlIHByaW1hcnkgbGVhc2UgdW50aWwgYWZ0ZXJcclxuICAgICAgICAgICAgICAgIC8vIGV4ZWN1dGluZyB0cmFuc2FjdGlvbk9wZXJhdGlvbigpLiBUaGlzIGVuc3VyZXMgdGhhdCBldmVuIGlmIHRoZVxyXG4gICAgICAgICAgICAgICAgLy8gdHJhbnNhY3Rpb25PcGVyYXRpb24gdGFrZXMgYSBsb25nIHRpbWUsIHdlJ2xsIHVzZSBhIHJlY2VudFxyXG4gICAgICAgICAgICAgICAgLy8gbGVhc2VUaW1lc3RhbXBNcyBpbiB0aGUgZXh0ZW5kZWQgKG9yIG5ld2x5IGFjcXVpcmVkKSBsZWFzZS5cclxuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy52ZXJpZnlQcmltYXJ5TGVhc2Uoc2ltcGxlRGJUeG4pXHJcbiAgICAgICAgICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKGhvbGRzUHJpbWFyeUxlYXNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGhvbGRzUHJpbWFyeUxlYXNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAvKiBob2xkc1ByaW1hcnlMZWFzZT0gKi8gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLmNhbkFjdEFzUHJpbWFyeShzaW1wbGVEYlR4bik7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uIChob2xkc1ByaW1hcnlMZWFzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghaG9sZHNQcmltYXJ5TGVhc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3IoXCJGYWlsZWQgdG8gb2J0YWluIHByaW1hcnkgbGVhc2UgZm9yIGFjdGlvbiAnXCIgKyBhY3Rpb24gKyBcIicuXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5pc1ByaW1hcnkgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMucXVldWUuZW5xdWV1ZUFuZEZvcmdldChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMucHJpbWFyeVN0YXRlTGlzdGVuZXIoZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuRkFJTEVEX1BSRUNPTkRJVElPTiwgUFJJTUFSWV9MRUFTRV9MT1NUX0VSUk9SX01TRyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cmFuc2FjdGlvbk9wZXJhdGlvbihwZXJzaXN0ZW5jZVRyYW5zYWN0aW9uKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5hY3F1aXJlT3JFeHRlbmRQcmltYXJ5TGVhc2Uoc2ltcGxlRGJUeG4pLm5leHQoZnVuY3Rpb24gKCkgeyByZXR1cm4gcmVzdWx0OyB9KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLnZlcmlmeUFsbG93VGFiU3luY2hyb25pemF0aW9uKHNpbXBsZURiVHhuKS5uZXh0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJhbnNhY3Rpb25PcGVyYXRpb24ocGVyc2lzdGVuY2VUcmFuc2FjdGlvbik7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgcGVyc2lzdGVuY2VUcmFuc2FjdGlvbi5yYWlzZU9uQ29tbWl0dGVkRXZlbnQoKTtcclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFZlcmlmaWVzIHRoYXQgdGhlIGN1cnJlbnQgdGFiIGlzIHRoZSBwcmltYXJ5IGxlYXNlaG9sZGVyIG9yIGFsdGVybmF0aXZlbHlcclxuICAgICAqIHRoYXQgdGhlIGxlYXNlaG9sZGVyIGhhcyBvcHRlZCBpbnRvIG11bHRpLXRhYiBzeW5jaHJvbml6YXRpb24uXHJcbiAgICAgKi9cclxuICAgIC8vIFRPRE8oYi8xMTQyMjYyMzQpOiBSZW1vdmUgdGhpcyBjaGVjayB3aGVuIGBzeW5jaHJvbml6ZVRhYnNgIGNhbiBubyBsb25nZXJcclxuICAgIC8vIGJlIHR1cm5lZCBvZmYuXHJcbiAgICBJbmRleGVkRGJQZXJzaXN0ZW5jZS5wcm90b3R5cGUudmVyaWZ5QWxsb3dUYWJTeW5jaHJvbml6YXRpb24gPSBmdW5jdGlvbiAodHhuKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgc3RvcmUgPSBwcmltYXJ5Q2xpZW50U3RvcmUodHhuKTtcclxuICAgICAgICByZXR1cm4gc3RvcmUuZ2V0KERiUHJpbWFyeUNsaWVudC5rZXkpLm5leHQoZnVuY3Rpb24gKGN1cnJlbnRQcmltYXJ5KSB7XHJcbiAgICAgICAgICAgIHZhciBjdXJyZW50TGVhc2VJc1ZhbGlkID0gY3VycmVudFByaW1hcnkgIT09IG51bGwgJiZcclxuICAgICAgICAgICAgICAgIF90aGlzLmlzV2l0aGluQWdlKGN1cnJlbnRQcmltYXJ5LmxlYXNlVGltZXN0YW1wTXMsIE1BWF9QUklNQVJZX0VMSUdJQkxFX0FHRV9NUykgJiZcclxuICAgICAgICAgICAgICAgICFfdGhpcy5pc0NsaWVudFpvbWJpZWQoY3VycmVudFByaW1hcnkub3duZXJJZCk7XHJcbiAgICAgICAgICAgIGlmIChjdXJyZW50TGVhc2VJc1ZhbGlkICYmICFfdGhpcy5pc0xvY2FsQ2xpZW50KGN1cnJlbnRQcmltYXJ5KSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFjdXJyZW50UHJpbWFyeS5hbGxvd1RhYlN5bmNocm9uaXphdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLkZBSUxFRF9QUkVDT05ESVRJT04sIFBSSU1BUllfTEVBU0VfRVhDTFVTSVZFX0VSUk9SX01TRyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIE9idGFpbnMgb3IgZXh0ZW5kcyB0aGUgbmV3IHByaW1hcnkgbGVhc2UgZm9yIHRoZSBsb2NhbCBjbGllbnQuIFRoaXNcclxuICAgICAqIG1ldGhvZCBkb2VzIG5vdCB2ZXJpZnkgdGhhdCB0aGUgY2xpZW50IGlzIGVsaWdpYmxlIGZvciB0aGlzIGxlYXNlLlxyXG4gICAgICovXHJcbiAgICBJbmRleGVkRGJQZXJzaXN0ZW5jZS5wcm90b3R5cGUuYWNxdWlyZU9yRXh0ZW5kUHJpbWFyeUxlYXNlID0gZnVuY3Rpb24gKHR4bikge1xyXG4gICAgICAgIHZhciBuZXdQcmltYXJ5ID0gbmV3IERiUHJpbWFyeUNsaWVudCh0aGlzLmNsaWVudElkLCB0aGlzLmFsbG93VGFiU3luY2hyb25pemF0aW9uLCBEYXRlLm5vdygpKTtcclxuICAgICAgICByZXR1cm4gcHJpbWFyeUNsaWVudFN0b3JlKHR4bikucHV0KERiUHJpbWFyeUNsaWVudC5rZXksIG5ld1ByaW1hcnkpO1xyXG4gICAgfTtcclxuICAgIEluZGV4ZWREYlBlcnNpc3RlbmNlLmlzQXZhaWxhYmxlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBTaW1wbGVEYi5pc0F2YWlsYWJsZSgpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogR2VuZXJhdGVzIGEgc3RyaW5nIHVzZWQgYXMgYSBwcmVmaXggd2hlbiBzdG9yaW5nIGRhdGEgaW4gSW5kZXhlZERCIGFuZFxyXG4gICAgICogTG9jYWxTdG9yYWdlLlxyXG4gICAgICovXHJcbiAgICBJbmRleGVkRGJQZXJzaXN0ZW5jZS5idWlsZFN0b3JhZ2VQcmVmaXggPSBmdW5jdGlvbiAoZGF0YWJhc2VJbmZvKSB7XHJcbiAgICAgICAgLy8gVXNlIHR3byBkaWZmZXJlbnQgcHJlZml4IGZvcm1hdHM6XHJcbiAgICAgICAgLy9cclxuICAgICAgICAvLyAgICogZmlyZXN0b3JlIC8gcGVyc2lzdGVuY2VLZXkgLyBwcm9qZWN0SUQgLiBkYXRhYmFzZUlEIC8gLi4uXHJcbiAgICAgICAgLy8gICAqIGZpcmVzdG9yZSAvIHBlcnNpc3RlbmNlS2V5IC8gcHJvamVjdElEIC8gLi4uXHJcbiAgICAgICAgLy9cclxuICAgICAgICAvLyBwcm9qZWN0SURzIGFyZSBETlMtY29tcGF0aWJsZSBuYW1lcyBhbmQgY2Fubm90IGNvbnRhaW4gZG90c1xyXG4gICAgICAgIC8vIHNvIHRoZXJlJ3Mgbm8gZGFuZ2VyIG9mIGNvbGxpc2lvbnMuXHJcbiAgICAgICAgdmFyIGRhdGFiYXNlID0gZGF0YWJhc2VJbmZvLmRhdGFiYXNlSWQucHJvamVjdElkO1xyXG4gICAgICAgIGlmICghZGF0YWJhc2VJbmZvLmRhdGFiYXNlSWQuaXNEZWZhdWx0RGF0YWJhc2UpIHtcclxuICAgICAgICAgICAgZGF0YWJhc2UgKz0gJy4nICsgZGF0YWJhc2VJbmZvLmRhdGFiYXNlSWQuZGF0YWJhc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiAnZmlyZXN0b3JlLycgKyBkYXRhYmFzZUluZm8ucGVyc2lzdGVuY2VLZXkgKyAnLycgKyBkYXRhYmFzZSArICcvJztcclxuICAgIH07XHJcbiAgICAvKiogQ2hlY2tzIHRoZSBwcmltYXJ5IGxlYXNlIGFuZCByZW1vdmVzIGl0IGlmIHdlIGFyZSB0aGUgY3VycmVudCBwcmltYXJ5LiAqL1xyXG4gICAgSW5kZXhlZERiUGVyc2lzdGVuY2UucHJvdG90eXBlLnJlbGVhc2VQcmltYXJ5TGVhc2VJZkhlbGQgPSBmdW5jdGlvbiAodHhuKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgc3RvcmUgPSBwcmltYXJ5Q2xpZW50U3RvcmUodHhuKTtcclxuICAgICAgICByZXR1cm4gc3RvcmUuZ2V0KERiUHJpbWFyeUNsaWVudC5rZXkpLm5leHQoZnVuY3Rpb24gKHByaW1hcnlDbGllbnQpIHtcclxuICAgICAgICAgICAgaWYgKF90aGlzLmlzTG9jYWxDbGllbnQocHJpbWFyeUNsaWVudCkpIHtcclxuICAgICAgICAgICAgICAgIGRlYnVnKExPR19UQUckMSwgJ1JlbGVhc2luZyBwcmltYXJ5IGxlYXNlLicpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHN0b3JlLmRlbGV0ZShEYlByaW1hcnlDbGllbnQua2V5KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqIFZlcmlmaWVzIHRoYXQgYHVwZGF0ZVRpbWVNc2AgaXMgd2l0aGluIGBtYXhBZ2VNc2AuICovXHJcbiAgICBJbmRleGVkRGJQZXJzaXN0ZW5jZS5wcm90b3R5cGUuaXNXaXRoaW5BZ2UgPSBmdW5jdGlvbiAodXBkYXRlVGltZU1zLCBtYXhBZ2VNcykge1xyXG4gICAgICAgIHZhciBub3cgPSBEYXRlLm5vdygpO1xyXG4gICAgICAgIHZhciBtaW5BY2NlcHRhYmxlID0gbm93IC0gbWF4QWdlTXM7XHJcbiAgICAgICAgdmFyIG1heEFjY2VwdGFibGUgPSBub3c7XHJcbiAgICAgICAgaWYgKHVwZGF0ZVRpbWVNcyA8IG1pbkFjY2VwdGFibGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh1cGRhdGVUaW1lTXMgPiBtYXhBY2NlcHRhYmxlKSB7XHJcbiAgICAgICAgICAgIGVycm9yKFwiRGV0ZWN0ZWQgYW4gdXBkYXRlIHRpbWUgdGhhdCBpcyBpbiB0aGUgZnV0dXJlOiBcIiArIHVwZGF0ZVRpbWVNcyArIFwiID4gXCIgKyBtYXhBY2NlcHRhYmxlKTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH07XHJcbiAgICBJbmRleGVkRGJQZXJzaXN0ZW5jZS5wcm90b3R5cGUuYXR0YWNoVmlzaWJpbGl0eUhhbmRsZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBpZiAodGhpcy5kb2N1bWVudCAhPT0gbnVsbCAmJlxyXG4gICAgICAgICAgICB0eXBlb2YgdGhpcy5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZG9jdW1lbnRWaXNpYmlsaXR5SGFuZGxlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLnF1ZXVlLmVucXVldWVBbmRGb3JnZXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmluRm9yZWdyb3VuZCA9IF90aGlzLmRvY3VtZW50LnZpc2liaWxpdHlTdGF0ZSA9PT0gJ3Zpc2libGUnO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy51cGRhdGVDbGllbnRNZXRhZGF0YUFuZFRyeUJlY29tZVByaW1hcnkoKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB0aGlzLmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3Zpc2liaWxpdHljaGFuZ2UnLCB0aGlzLmRvY3VtZW50VmlzaWJpbGl0eUhhbmRsZXIpO1xyXG4gICAgICAgICAgICB0aGlzLmluRm9yZWdyb3VuZCA9IHRoaXMuZG9jdW1lbnQudmlzaWJpbGl0eVN0YXRlID09PSAndmlzaWJsZSc7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIEluZGV4ZWREYlBlcnNpc3RlbmNlLnByb3RvdHlwZS5kZXRhY2hWaXNpYmlsaXR5SGFuZGxlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAodGhpcy5kb2N1bWVudFZpc2liaWxpdHlIYW5kbGVyKSB7XHJcbiAgICAgICAgICAgIGFzc2VydCh0aGlzLmRvY3VtZW50ICE9PSBudWxsICYmXHJcbiAgICAgICAgICAgICAgICB0eXBlb2YgdGhpcy5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyID09PSAnZnVuY3Rpb24nLCBcIkV4cGVjdGVkICdkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyJyB0byBiZSBhIGZ1bmN0aW9uXCIpO1xyXG4gICAgICAgICAgICB0aGlzLmRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Zpc2liaWxpdHljaGFuZ2UnLCB0aGlzLmRvY3VtZW50VmlzaWJpbGl0eUhhbmRsZXIpO1xyXG4gICAgICAgICAgICB0aGlzLmRvY3VtZW50VmlzaWJpbGl0eUhhbmRsZXIgPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEF0dGFjaGVzIGEgd2luZG93LnVubG9hZCBoYW5kbGVyIHRoYXQgd2lsbCBzeW5jaHJvbm91c2x5IHdyaXRlIG91clxyXG4gICAgICogY2xpZW50SWQgdG8gYSBcInpvbWJpZSBjbGllbnQgaWRcIiBsb2NhdGlvbiBpbiBMb2NhbFN0b3JhZ2UuIFRoaXMgY2FuIGJlIHVzZWRcclxuICAgICAqIGJ5IHRhYnMgdHJ5aW5nIHRvIGFjcXVpcmUgdGhlIHByaW1hcnkgbGVhc2UgdG8gZGV0ZXJtaW5lIHRoYXQgdGhlIGxlYXNlXHJcbiAgICAgKiBpcyBubyBsb25nZXIgdmFsaWQgZXZlbiBpZiB0aGUgdGltZXN0YW1wIGlzIHJlY2VudC4gVGhpcyBpcyBwYXJ0aWN1bGFybHlcclxuICAgICAqIGltcG9ydGFudCBmb3IgdGhlIHJlZnJlc2ggY2FzZSAoc28gdGhlIHRhYiBjb3JyZWN0bHkgcmUtYWNxdWlyZXMgdGhlXHJcbiAgICAgKiBwcmltYXJ5IGxlYXNlKS4gTG9jYWxTdG9yYWdlIGlzIHVzZWQgZm9yIHRoaXMgcmF0aGVyIHRoYW4gSW5kZXhlZERiIGJlY2F1c2VcclxuICAgICAqIGl0IGlzIGEgc3luY2hyb25vdXMgQVBJIGFuZCBzbyBjYW4gYmUgdXNlZCByZWxpYWJseSBmcm9tICBhbiB1bmxvYWRcclxuICAgICAqIGhhbmRsZXIuXHJcbiAgICAgKi9cclxuICAgIEluZGV4ZWREYlBlcnNpc3RlbmNlLnByb3RvdHlwZS5hdHRhY2hXaW5kb3dVbmxvYWRIb29rID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLndpbmRvdy5hZGRFdmVudExpc3RlbmVyID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgIHRoaXMud2luZG93VW5sb2FkSGFuZGxlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIC8vIE5vdGU6IEluIHRoZW9yeSwgdGhpcyBzaG91bGQgYmUgc2NoZWR1bGVkIG9uIHRoZSBBc3luY1F1ZXVlIHNpbmNlIGl0XHJcbiAgICAgICAgICAgICAgICAvLyBhY2Nlc3NlcyBpbnRlcm5hbCBzdGF0ZS4gV2UgZXhlY3V0ZSB0aGlzIGNvZGUgZGlyZWN0bHkgZHVyaW5nIHNodXRkb3duXHJcbiAgICAgICAgICAgICAgICAvLyB0byBtYWtlIHN1cmUgaXQgZ2V0cyBhIGNoYW5jZSB0byBydW4uXHJcbiAgICAgICAgICAgICAgICBfdGhpcy5tYXJrQ2xpZW50Wm9tYmllZCgpO1xyXG4gICAgICAgICAgICAgICAgX3RoaXMucXVldWUuZW5xdWV1ZUFuZEZvcmdldChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gQXR0ZW1wdCBncmFjZWZ1bCBzaHV0ZG93biAoaW5jbHVkaW5nIHJlbGVhc2luZyBvdXIgcHJpbWFyeSBsZWFzZSksXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gYnV0IHRoZXJlJ3Mgbm8gZ3VhcmFudGVlIGl0IHdpbGwgY29tcGxldGUuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLnNodXRkb3duKCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgdGhpcy53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigndW5sb2FkJywgdGhpcy53aW5kb3dVbmxvYWRIYW5kbGVyKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgSW5kZXhlZERiUGVyc2lzdGVuY2UucHJvdG90eXBlLmRldGFjaFdpbmRvd1VubG9hZEhvb2sgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMud2luZG93VW5sb2FkSGFuZGxlcikge1xyXG4gICAgICAgICAgICBhc3NlcnQodHlwZW9mIHRoaXMud2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIgPT09ICdmdW5jdGlvbicsIFwiRXhwZWN0ZWQgJ3dpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyJyB0byBiZSBhIGZ1bmN0aW9uXCIpO1xyXG4gICAgICAgICAgICB0aGlzLndpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCd1bmxvYWQnLCB0aGlzLndpbmRvd1VubG9hZEhhbmRsZXIpO1xyXG4gICAgICAgICAgICB0aGlzLndpbmRvd1VubG9hZEhhbmRsZXIgPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgd2hldGhlciBhIGNsaWVudCBpcyBcInpvbWJpZWRcIiBiYXNlZCBvbiBpdHMgTG9jYWxTdG9yYWdlIGVudHJ5LlxyXG4gICAgICogQ2xpZW50cyBiZWNvbWUgem9tYmllZCB3aGVuIHRoZWlyIHRhYiBjbG9zZXMgd2l0aG91dCBydW5uaW5nIGFsbCBvZiB0aGVcclxuICAgICAqIGNsZWFudXAgbG9naWMgaW4gYHNodXRkb3duKClgLlxyXG4gICAgICovXHJcbiAgICBJbmRleGVkRGJQZXJzaXN0ZW5jZS5wcm90b3R5cGUuaXNDbGllbnRab21iaWVkID0gZnVuY3Rpb24gKGNsaWVudElkKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgdmFyIGlzWm9tYmllZCA9IHRoaXMud2ViU3RvcmFnZS5nZXRJdGVtKHRoaXMuem9tYmllZENsaWVudExvY2FsU3RvcmFnZUtleShjbGllbnRJZCkpICE9PVxyXG4gICAgICAgICAgICAgICAgbnVsbDtcclxuICAgICAgICAgICAgZGVidWcoTE9HX1RBRyQxLCBcIkNsaWVudCAnXCIgKyBjbGllbnRJZCArIFwiJyBcIiArIChpc1pvbWJpZWQgPyAnaXMnIDogJ2lzIG5vdCcpICsgXCIgem9tYmllZCBpbiBMb2NhbFN0b3JhZ2VcIik7XHJcbiAgICAgICAgICAgIHJldHVybiBpc1pvbWJpZWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIC8vIEdyYWNlZnVsbHkgaGFuZGxlIGlmIExvY2FsU3RvcmFnZSBpc24ndCB3b3JraW5nLlxyXG4gICAgICAgICAgICBlcnJvcihMT0dfVEFHJDEsICdGYWlsZWQgdG8gZ2V0IHpvbWJpZWQgY2xpZW50IGlkLicsIGUpO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmVjb3JkIGNsaWVudCBhcyB6b21iaWVkIChhIGNsaWVudCB0aGF0IGhhZCBpdHMgdGFiIGNsb3NlZCkuIFpvbWJpZWRcclxuICAgICAqIGNsaWVudHMgYXJlIGlnbm9yZWQgZHVyaW5nIHByaW1hcnkgdGFiIHNlbGVjdGlvbi5cclxuICAgICAqL1xyXG4gICAgSW5kZXhlZERiUGVyc2lzdGVuY2UucHJvdG90eXBlLm1hcmtDbGllbnRab21iaWVkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHRoaXMud2ViU3RvcmFnZS5zZXRJdGVtKHRoaXMuem9tYmllZENsaWVudExvY2FsU3RvcmFnZUtleSh0aGlzLmNsaWVudElkKSwgU3RyaW5nKERhdGUubm93KCkpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgLy8gR3JhY2VmdWxseSBoYW5kbGUgaWYgTG9jYWxTdG9yYWdlIGlzbid0IGF2YWlsYWJsZSAvIHdvcmtpbmcuXHJcbiAgICAgICAgICAgIGVycm9yKCdGYWlsZWQgdG8gc2V0IHpvbWJpZSBjbGllbnQgaWQuJywgZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKiBSZW1vdmVzIHRoZSB6b21iaWVkIGNsaWVudCBlbnRyeSBpZiBpdCBleGlzdHMuICovXHJcbiAgICBJbmRleGVkRGJQZXJzaXN0ZW5jZS5wcm90b3R5cGUucmVtb3ZlQ2xpZW50Wm9tYmllZEVudHJ5ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHRoaXMud2ViU3RvcmFnZS5yZW1vdmVJdGVtKHRoaXMuem9tYmllZENsaWVudExvY2FsU3RvcmFnZUtleSh0aGlzLmNsaWVudElkKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIC8vIElnbm9yZVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBJbmRleGVkRGJQZXJzaXN0ZW5jZS5wcm90b3R5cGUuem9tYmllZENsaWVudExvY2FsU3RvcmFnZUtleSA9IGZ1bmN0aW9uIChjbGllbnRJZCkge1xyXG4gICAgICAgIHJldHVybiBaT01CSUVEX0NMSUVOVFNfS0VZX1BSRUZJWCArIFwiX1wiICsgdGhpcy5wZXJzaXN0ZW5jZUtleSArIFwiX1wiICsgY2xpZW50SWQ7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgbmFtZSBvZiB0aGUgbWFpbiAoYW5kIGN1cnJlbnRseSBvbmx5KSBJbmRleGVkREIgZGF0YWJhc2UuIHRoaXMgbmFtZSBpc1xyXG4gICAgICogYXBwZW5kZWQgdG8gdGhlIHByZWZpeCBwcm92aWRlZCB0byB0aGUgSW5kZXhlZERiUGVyc2lzdGVuY2UgY29uc3RydWN0b3IuXHJcbiAgICAgKi9cclxuICAgIEluZGV4ZWREYlBlcnNpc3RlbmNlLk1BSU5fREFUQUJBU0UgPSAnbWFpbic7XHJcbiAgICByZXR1cm4gSW5kZXhlZERiUGVyc2lzdGVuY2U7XHJcbn0oKSk7XHJcbmZ1bmN0aW9uIGlzUHJpbWFyeUxlYXNlTG9zdEVycm9yKGVycikge1xyXG4gICAgcmV0dXJuIChlcnIuY29kZSA9PT0gQ29kZS5GQUlMRURfUFJFQ09ORElUSU9OICYmXHJcbiAgICAgICAgZXJyLm1lc3NhZ2UgPT09IFBSSU1BUllfTEVBU0VfTE9TVF9FUlJPUl9NU0cpO1xyXG59XHJcbi8qKlxyXG4gKiBWZXJpZmllcyB0aGUgZXJyb3IgdGhyb3duIGJ5IGEgTG9jYWxTdG9yZSBvcGVyYXRpb24uIElmIGEgTG9jYWxTdG9yZVxyXG4gKiBvcGVyYXRpb24gZmFpbHMgYmVjYXVzZSB0aGUgcHJpbWFyeSBsZWFzZSBoYXMgYmVlbiB0YWtlbiBieSBhbm90aGVyIGNsaWVudCxcclxuICogd2UgaWdub3JlIHRoZSBlcnJvciAodGhlIHBlcnNpc3RlbmNlIGxheWVyIHdpbGwgaW1tZWRpYXRlbHkgY2FsbFxyXG4gKiBgYXBwbHlQcmltYXJ5TGVhc2VgIHRvIHByb3BhZ2F0ZSB0aGUgcHJpbWFyeSBzdGF0ZSBjaGFuZ2UpLiBBbGwgb3RoZXIgZXJyb3JzXHJcbiAqIGFyZSByZS10aHJvd24uXHJcbiAqXHJcbiAqIEBwYXJhbSBlcnIgQW4gZXJyb3IgcmV0dXJuZWQgYnkgYSBMb2NhbFN0b3JlIG9wZXJhdGlvbi5cclxuICogQHJldHVybiBBIFByb21pc2UgdGhhdCByZXNvbHZlcyBhZnRlciB3ZSByZWNvdmVyZWQsIG9yIHRoZSBvcmlnaW5hbCBlcnJvci5cclxuICovXHJcbmZ1bmN0aW9uIGlnbm9yZUlmUHJpbWFyeUxlYXNlTG9zcyhlcnIpIHtcclxuICAgIHJldHVybiB0c2xpYi5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdHNsaWIuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgIGlmIChpc1ByaW1hcnlMZWFzZUxvc3RFcnJvcihlcnIpKSB7XHJcbiAgICAgICAgICAgICAgICBkZWJ1ZyhMT0dfVEFHJDEsICdVbmV4cGVjdGVkbHkgbG9zdCBwcmltYXJ5IGxlYXNlJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBlcnI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn1cclxuLyoqXHJcbiAqIEhlbHBlciB0byBnZXQgYSB0eXBlZCBTaW1wbGVEYlN0b3JlIGZvciB0aGUgcHJpbWFyeSBjbGllbnQgb2JqZWN0IHN0b3JlLlxyXG4gKi9cclxuZnVuY3Rpb24gcHJpbWFyeUNsaWVudFN0b3JlKHR4bikge1xyXG4gICAgcmV0dXJuIHR4bi5zdG9yZShEYlByaW1hcnlDbGllbnQuc3RvcmUpO1xyXG59XHJcbi8qKlxyXG4gKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmb3IgdGhlIGNsaWVudCBtZXRhZGF0YSBvYmplY3Qgc3RvcmUuXHJcbiAqL1xyXG5mdW5jdGlvbiBjbGllbnRNZXRhZGF0YVN0b3JlKHR4bikge1xyXG4gICAgcmV0dXJuIHR4bi5zdG9yZShEYkNsaWVudE1ldGFkYXRhLnN0b3JlKTtcclxufVxyXG4vKiogUHJvdmlkZXMgTFJVIGZ1bmN0aW9uYWxpdHkgZm9yIEluZGV4ZWREQiBwZXJzaXN0ZW5jZS4gKi9cclxudmFyIEluZGV4ZWREYkxydURlbGVnYXRlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gSW5kZXhlZERiTHJ1RGVsZWdhdGUoZGIsIHBhcmFtcykge1xyXG4gICAgICAgIHRoaXMuZGIgPSBkYjtcclxuICAgICAgICB0aGlzLmluTWVtb3J5UGlucyA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5nYXJiYWdlQ29sbGVjdG9yID0gbmV3IExydUdhcmJhZ2VDb2xsZWN0b3IodGhpcywgcGFyYW1zKTtcclxuICAgIH1cclxuICAgIEluZGV4ZWREYkxydURlbGVnYXRlLnByb3RvdHlwZS5nZXRTZXF1ZW5jZU51bWJlckNvdW50ID0gZnVuY3Rpb24gKHR4bikge1xyXG4gICAgICAgIHZhciBkb2NDb3VudFByb21pc2UgPSB0aGlzLm9ycGhhbmVkRG9jbWVudENvdW50KHR4bik7XHJcbiAgICAgICAgdmFyIHRhcmdldENvdW50UHJvbWlzZSA9IHRoaXMuZGIuZ2V0VGFyZ2V0Q2FjaGUoKS5nZXRUYXJnZXRDb3VudCh0eG4pO1xyXG4gICAgICAgIHJldHVybiB0YXJnZXRDb3VudFByb21pc2UubmV4dChmdW5jdGlvbiAodGFyZ2V0Q291bnQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGRvY0NvdW50UHJvbWlzZS5uZXh0KGZ1bmN0aW9uIChkb2NDb3VudCkgeyByZXR1cm4gdGFyZ2V0Q291bnQgKyBkb2NDb3VudDsgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgSW5kZXhlZERiTHJ1RGVsZWdhdGUucHJvdG90eXBlLm9ycGhhbmVkRG9jbWVudENvdW50ID0gZnVuY3Rpb24gKHR4bikge1xyXG4gICAgICAgIHZhciBvcnBoYW5lZENvdW50ID0gMDtcclxuICAgICAgICByZXR1cm4gdGhpcy5mb3JFYWNoT3JwaGFuZWREb2N1bWVudFNlcXVlbmNlTnVtYmVyKHR4biwgZnVuY3Rpb24gKF8pIHtcclxuICAgICAgICAgICAgb3JwaGFuZWRDb3VudCsrO1xyXG4gICAgICAgIH0pLm5leHQoZnVuY3Rpb24gKCkgeyByZXR1cm4gb3JwaGFuZWRDb3VudDsgfSk7XHJcbiAgICB9O1xyXG4gICAgSW5kZXhlZERiTHJ1RGVsZWdhdGUucHJvdG90eXBlLmZvckVhY2hUYXJnZXQgPSBmdW5jdGlvbiAodHhuLCBmKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGIuZ2V0VGFyZ2V0Q2FjaGUoKS5mb3JFYWNoVGFyZ2V0KHR4biwgZik7XHJcbiAgICB9O1xyXG4gICAgSW5kZXhlZERiTHJ1RGVsZWdhdGUucHJvdG90eXBlLmZvckVhY2hPcnBoYW5lZERvY3VtZW50U2VxdWVuY2VOdW1iZXIgPSBmdW5jdGlvbiAodHhuLCBmKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZm9yRWFjaE9ycGhhbmVkRG9jdW1lbnQodHhuLCBmdW5jdGlvbiAoZG9jS2V5LCBzZXF1ZW5jZU51bWJlcikge1xyXG4gICAgICAgICAgICByZXR1cm4gZihzZXF1ZW5jZU51bWJlcik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgSW5kZXhlZERiTHJ1RGVsZWdhdGUucHJvdG90eXBlLnNldEluTWVtb3J5UGlucyA9IGZ1bmN0aW9uIChpbk1lbW9yeVBpbnMpIHtcclxuICAgICAgICB0aGlzLmluTWVtb3J5UGlucyA9IGluTWVtb3J5UGlucztcclxuICAgIH07XHJcbiAgICBJbmRleGVkRGJMcnVEZWxlZ2F0ZS5wcm90b3R5cGUuYWRkUmVmZXJlbmNlID0gZnVuY3Rpb24gKHR4biwga2V5KSB7XHJcbiAgICAgICAgcmV0dXJuIHdyaXRlU2VudGluZWxLZXkodHhuLCBrZXkpO1xyXG4gICAgfTtcclxuICAgIEluZGV4ZWREYkxydURlbGVnYXRlLnByb3RvdHlwZS5yZW1vdmVSZWZlcmVuY2UgPSBmdW5jdGlvbiAodHhuLCBrZXkpIHtcclxuICAgICAgICByZXR1cm4gd3JpdGVTZW50aW5lbEtleSh0eG4sIGtleSk7XHJcbiAgICB9O1xyXG4gICAgSW5kZXhlZERiTHJ1RGVsZWdhdGUucHJvdG90eXBlLnJlbW92ZVRhcmdldHMgPSBmdW5jdGlvbiAodHhuLCB1cHBlckJvdW5kLCBhY3RpdmVUYXJnZXRJZHMpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5kYlxyXG4gICAgICAgICAgICAuZ2V0VGFyZ2V0Q2FjaGUoKVxyXG4gICAgICAgICAgICAucmVtb3ZlVGFyZ2V0cyh0eG4sIHVwcGVyQm91bmQsIGFjdGl2ZVRhcmdldElkcyk7XHJcbiAgICB9O1xyXG4gICAgSW5kZXhlZERiTHJ1RGVsZWdhdGUucHJvdG90eXBlLnJlbW92ZU11dGF0aW9uUmVmZXJlbmNlID0gZnVuY3Rpb24gKHR4biwga2V5KSB7XHJcbiAgICAgICAgcmV0dXJuIHdyaXRlU2VudGluZWxLZXkodHhuLCBrZXkpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0cnVlIGlmIGFueXRoaW5nIHdvdWxkIHByZXZlbnQgdGhpcyBkb2N1bWVudCBmcm9tIGJlaW5nIGdhcmJhZ2VcclxuICAgICAqIGNvbGxlY3RlZCwgZ2l2ZW4gdGhhdCB0aGUgZG9jdW1lbnQgaW4gcXVlc3Rpb24gaXMgbm90IHByZXNlbnQgaW4gYW55XHJcbiAgICAgKiB0YXJnZXRzIGFuZCBoYXMgYSBzZXF1ZW5jZSBudW1iZXIgbGVzcyB0aGFuIG9yIGVxdWFsIHRvIHRoZSB1cHBlciBib3VuZCBmb3JcclxuICAgICAqIHRoZSBjb2xsZWN0aW9uIHJ1bi5cclxuICAgICAqL1xyXG4gICAgSW5kZXhlZERiTHJ1RGVsZWdhdGUucHJvdG90eXBlLmlzUGlubmVkID0gZnVuY3Rpb24gKHR4biwgZG9jS2V5KSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaW5NZW1vcnlQaW5zLmNvbnRhaW5zS2V5KGRvY0tleSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKHRydWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIG11dGF0aW9uUXVldWVzQ29udGFpbktleSh0eG4sIGRvY0tleSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIEluZGV4ZWREYkxydURlbGVnYXRlLnByb3RvdHlwZS5yZW1vdmVPcnBoYW5lZERvY3VtZW50cyA9IGZ1bmN0aW9uICh0eG4sIHVwcGVyQm91bmQpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhciBkb2N1bWVudENhY2hlID0gdGhpcy5kYi5nZXRSZW1vdGVEb2N1bWVudENhY2hlKCk7XHJcbiAgICAgICAgdmFyIGNoYW5nZUJ1ZmZlciA9IGRvY3VtZW50Q2FjaGUubmV3Q2hhbmdlQnVmZmVyKCk7XHJcbiAgICAgICAgdmFyIHByb21pc2VzID0gW107XHJcbiAgICAgICAgdmFyIGRvY3VtZW50Q291bnQgPSAwO1xyXG4gICAgICAgIHZhciBpdGVyYXRpb24gPSB0aGlzLmZvckVhY2hPcnBoYW5lZERvY3VtZW50KHR4biwgZnVuY3Rpb24gKGRvY0tleSwgc2VxdWVuY2VOdW1iZXIpIHtcclxuICAgICAgICAgICAgaWYgKHNlcXVlbmNlTnVtYmVyIDw9IHVwcGVyQm91bmQpIHtcclxuICAgICAgICAgICAgICAgIHZhciBwID0gX3RoaXMuaXNQaW5uZWQodHhuLCBkb2NLZXkpLm5leHQoZnVuY3Rpb24gKGlzUGlubmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFpc1Bpbm5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudENvdW50Kys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE91ciBzaXplIGFjY291bnRpbmcgcmVxdWlyZXMgdXMgdG8gcmVhZCBhbGwgZG9jdW1lbnRzIGJlZm9yZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyByZW1vdmluZyB0aGVtLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2hhbmdlQnVmZmVyLmdldEVudHJ5KHR4biwgZG9jS2V5KS5uZXh0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZUJ1ZmZlci5yZW1vdmVFbnRyeShkb2NLZXkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRvY3VtZW50VGFyZ2V0U3RvcmUodHhuKS5kZWxldGUoc2VudGluZWxLZXkkMShkb2NLZXkpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBwcm9taXNlcy5wdXNoKHApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIGl0ZXJhdGlvblxyXG4gICAgICAgICAgICAubmV4dChmdW5jdGlvbiAoKSB7IHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2Uud2FpdEZvcihwcm9taXNlcyk7IH0pXHJcbiAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIGNoYW5nZUJ1ZmZlci5hcHBseSh0eG4pOyB9KVxyXG4gICAgICAgICAgICAubmV4dChmdW5jdGlvbiAoKSB7IHJldHVybiBkb2N1bWVudENvdW50OyB9KTtcclxuICAgIH07XHJcbiAgICBJbmRleGVkRGJMcnVEZWxlZ2F0ZS5wcm90b3R5cGUucmVtb3ZlVGFyZ2V0ID0gZnVuY3Rpb24gKHR4biwgdGFyZ2V0RGF0YSkge1xyXG4gICAgICAgIHZhciB1cGRhdGVkID0gdGFyZ2V0RGF0YS53aXRoU2VxdWVuY2VOdW1iZXIodHhuLmN1cnJlbnRTZXF1ZW5jZU51bWJlcik7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGIuZ2V0VGFyZ2V0Q2FjaGUoKS51cGRhdGVUYXJnZXREYXRhKHR4biwgdXBkYXRlZCk7XHJcbiAgICB9O1xyXG4gICAgSW5kZXhlZERiTHJ1RGVsZWdhdGUucHJvdG90eXBlLnVwZGF0ZUxpbWJvRG9jdW1lbnQgPSBmdW5jdGlvbiAodHhuLCBrZXkpIHtcclxuICAgICAgICByZXR1cm4gd3JpdGVTZW50aW5lbEtleSh0eG4sIGtleSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBDYWxsIHByb3ZpZGVkIGZ1bmN0aW9uIGZvciBlYWNoIGRvY3VtZW50IGluIHRoZSBjYWNoZSB0aGF0IGlzICdvcnBoYW5lZCcuIE9ycGhhbmVkXHJcbiAgICAgKiBtZWFucyBub3QgYSBwYXJ0IG9mIGFueSB0YXJnZXQsIHNvIHRoZSBvbmx5IGVudHJ5IGluIHRoZSB0YXJnZXQtZG9jdW1lbnQgaW5kZXggZm9yXHJcbiAgICAgKiB0aGF0IGRvY3VtZW50IHdpbGwgYmUgdGhlIHNlbnRpbmVsIHJvdyAodGFyZ2V0SWQgMCksIHdoaWNoIHdpbGwgYWxzbyBoYXZlIHRoZSBzZXF1ZW5jZVxyXG4gICAgICogbnVtYmVyIGZvciB0aGUgbGFzdCB0aW1lIHRoZSBkb2N1bWVudCB3YXMgYWNjZXNzZWQuXHJcbiAgICAgKi9cclxuICAgIEluZGV4ZWREYkxydURlbGVnYXRlLnByb3RvdHlwZS5mb3JFYWNoT3JwaGFuZWREb2N1bWVudCA9IGZ1bmN0aW9uICh0eG4sIGYpIHtcclxuICAgICAgICB2YXIgc3RvcmUgPSBkb2N1bWVudFRhcmdldFN0b3JlKHR4bik7XHJcbiAgICAgICAgdmFyIG5leHRUb1JlcG9ydCA9IExpc3RlblNlcXVlbmNlLklOVkFMSUQ7XHJcbiAgICAgICAgdmFyIG5leHRQYXRoO1xyXG4gICAgICAgIHJldHVybiBzdG9yZVxyXG4gICAgICAgICAgICAuaXRlcmF0ZSh7XHJcbiAgICAgICAgICAgIGluZGV4OiBEYlRhcmdldERvY3VtZW50LmRvY3VtZW50VGFyZ2V0c0luZGV4XHJcbiAgICAgICAgfSwgZnVuY3Rpb24gKF9hLCBfYikge1xyXG4gICAgICAgICAgICB2YXIgdGFyZ2V0SWQgPSBfYVswXSwgZG9jS2V5ID0gX2FbMV07XHJcbiAgICAgICAgICAgIHZhciBwYXRoID0gX2IucGF0aCwgc2VxdWVuY2VOdW1iZXIgPSBfYi5zZXF1ZW5jZU51bWJlcjtcclxuICAgICAgICAgICAgaWYgKHRhcmdldElkID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBpZiBuZXh0VG9SZXBvcnQgaXMgdmFsaWQsIHJlcG9ydCBpdCwgdGhpcyBpcyBhIG5ldyBrZXkgc28gdGhlXHJcbiAgICAgICAgICAgICAgICAvLyBsYXN0IG9uZSBtdXN0IG5vdCBiZSBhIG1lbWJlciBvZiBhbnkgdGFyZ2V0cy5cclxuICAgICAgICAgICAgICAgIGlmIChuZXh0VG9SZXBvcnQgIT09IExpc3RlblNlcXVlbmNlLklOVkFMSUQpIHtcclxuICAgICAgICAgICAgICAgICAgICBmKG5ldyBEb2N1bWVudEtleShkZWNvZGUobmV4dFBhdGgpKSwgbmV4dFRvUmVwb3J0KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIHNldCBuZXh0VG9SZXBvcnQgdG8gYmUgdGhpcyBzZXF1ZW5jZSBudW1iZXIuIEl0J3MgdGhlIG5leHQgb25lIHdlXHJcbiAgICAgICAgICAgICAgICAvLyBtaWdodCByZXBvcnQsIGlmIHdlIGRvbid0IGZpbmQgYW55IHRhcmdldHMgZm9yIHRoaXMgZG9jdW1lbnQuXHJcbiAgICAgICAgICAgICAgICAvLyBOb3RlIHRoYXQgdGhlIHNlcXVlbmNlIG51bWJlciBtdXN0IGJlIGRlZmluZWQgd2hlbiB0aGUgdGFyZ2V0SWRcclxuICAgICAgICAgICAgICAgIC8vIGlzIDAuXHJcbiAgICAgICAgICAgICAgICBuZXh0VG9SZXBvcnQgPSBzZXF1ZW5jZU51bWJlcjtcclxuICAgICAgICAgICAgICAgIG5leHRQYXRoID0gcGF0aDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIHNldCBuZXh0VG9SZXBvcnQgdG8gYmUgaW52YWxpZCwgd2Uga25vdyB3ZSBkb24ndCBuZWVkIHRvIHJlcG9ydFxyXG4gICAgICAgICAgICAgICAgLy8gdGhpcyBvbmUgc2luY2Ugd2UgZm91bmQgYSB0YXJnZXQgZm9yIGl0LlxyXG4gICAgICAgICAgICAgICAgbmV4dFRvUmVwb3J0ID0gTGlzdGVuU2VxdWVuY2UuSU5WQUxJRDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgLy8gU2luY2Ugd2UgcmVwb3J0IHNlcXVlbmNlIG51bWJlcnMgYWZ0ZXIgZ2V0dGluZyB0byB0aGUgbmV4dCBrZXksIHdlXHJcbiAgICAgICAgICAgIC8vIG5lZWQgdG8gY2hlY2sgaWYgdGhlIGxhc3Qga2V5IHdlIGl0ZXJhdGVkIG92ZXIgd2FzIGFuIG9ycGhhbmVkXHJcbiAgICAgICAgICAgIC8vIGRvY3VtZW50IGFuZCByZXBvcnQgaXQuXHJcbiAgICAgICAgICAgIGlmIChuZXh0VG9SZXBvcnQgIT09IExpc3RlblNlcXVlbmNlLklOVkFMSUQpIHtcclxuICAgICAgICAgICAgICAgIGYobmV3IERvY3VtZW50S2V5KGRlY29kZShuZXh0UGF0aCkpLCBuZXh0VG9SZXBvcnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgSW5kZXhlZERiTHJ1RGVsZWdhdGUucHJvdG90eXBlLmdldENhY2hlU2l6ZSA9IGZ1bmN0aW9uICh0eG4pIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5kYi5nZXRSZW1vdGVEb2N1bWVudENhY2hlKCkuZ2V0U2l6ZSh0eG4pO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBJbmRleGVkRGJMcnVEZWxlZ2F0ZTtcclxufSgpKTtcclxuZnVuY3Rpb24gc2VudGluZWxLZXkkMShrZXkpIHtcclxuICAgIHJldHVybiBbMCwgZW5jb2RlKGtleS5wYXRoKV07XHJcbn1cclxuLyoqXHJcbiAqIEByZXR1cm4gQSB2YWx1ZSBzdWl0YWJsZSBmb3Igd3JpdGluZyBhIHNlbnRpbmVsIHJvdyBpbiB0aGUgdGFyZ2V0LWRvY3VtZW50XHJcbiAqIHN0b3JlLlxyXG4gKi9cclxuZnVuY3Rpb24gc2VudGluZWxSb3coa2V5LCBzZXF1ZW5jZU51bWJlcikge1xyXG4gICAgcmV0dXJuIG5ldyBEYlRhcmdldERvY3VtZW50KDAsIGVuY29kZShrZXkucGF0aCksIHNlcXVlbmNlTnVtYmVyKTtcclxufVxyXG5mdW5jdGlvbiB3cml0ZVNlbnRpbmVsS2V5KHR4biwga2V5KSB7XHJcbiAgICByZXR1cm4gZG9jdW1lbnRUYXJnZXRTdG9yZSh0eG4pLnB1dChzZW50aW5lbFJvdyhrZXksIHR4bi5jdXJyZW50U2VxdWVuY2VOdW1iZXIpKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLy8gVW50eXBlZCBOdW1iZXIgYWxpYXMgd2UgY2FuIHVzZSB0byBjaGVjayBmb3IgRVM2IG1ldGhvZHMgLyBwcm9wZXJ0aWVzLlxyXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG52YXIgTnVtYmVyQXNBbnkgPSBOdW1iZXI7XHJcbi8qKlxyXG4gKiBNaW5pbXVtIHNhZmUgaW50ZWdlciBpbiBKYXZhc2NyaXB0IGJlY2F1c2Ugb2YgZmxvYXRpbmcgcG9pbnQgcHJlY2lzaW9uLlxyXG4gKiBBZGRlZCB0byBub3QgcmVseSBvbiBFUzYgZmVhdHVyZXMuXHJcbiAqL1xyXG52YXIgTUlOX1NBRkVfSU5URUdFUiA9IE51bWJlckFzQW55Lk1JTl9TQUZFX0lOVEVHRVIgfHwgLShNYXRoLnBvdygyLCA1MykgLSAxKTtcclxuLyoqXHJcbiAqIE1heGltdW0gc2FmZSBpbnRlZ2VyIGluIEphdmFzY3JpcHQgYmVjYXVzZSBvZiBmbG9hdGluZyBwb2ludCBwcmVjaXNpb24uXHJcbiAqIEFkZGVkIHRvIG5vdCByZWx5IG9uIEVTNiBmZWF0dXJlcy5cclxuICovXHJcbnZhciBNQVhfU0FGRV9JTlRFR0VSID0gTnVtYmVyQXNBbnkuTUFYX1NBRkVfSU5URUdFUiB8fCBNYXRoLnBvdygyLCA1MykgLSAxO1xyXG4vKipcclxuICogUmV0dXJucyB3aGV0aGVyIGFuIG51bWJlciBpcyBhbiBpbnRlZ2VyLCB1c2VzIG5hdGl2ZSBpbXBsZW1lbnRhdGlvbiBpZlxyXG4gKiBhdmFpbGFibGUuXHJcbiAqIEFkZGVkIHRvIG5vdCByZWx5IG9uIEVTNiBmZWF0dXJlcy5cclxuICogQHBhcmFtIHZhbHVlIFRoZSB2YWx1ZSB0byB0ZXN0IGZvciBiZWluZyBhbiBpbnRlZ2VyXHJcbiAqL1xyXG52YXIgaXNJbnRlZ2VyID0gTnVtYmVyQXNBbnkuaXNJbnRlZ2VyIHx8XHJcbiAgICAoZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicgJiZcclxuICAgICAgICAgICAgaXNGaW5pdGUodmFsdWUpICYmXHJcbiAgICAgICAgICAgIE1hdGguZmxvb3IodmFsdWUpID09PSB2YWx1ZTtcclxuICAgIH0pO1xyXG4vKipcclxuICogUmV0dXJucyB3aGV0aGVyIGEgdmFyaWFibGUgaXMgZWl0aGVyIHVuZGVmaW5lZCBvciBudWxsLlxyXG4gKi9cclxuZnVuY3Rpb24gaXNOdWxsT3JVbmRlZmluZWQodmFsdWUpIHtcclxuICAgIHJldHVybiB2YWx1ZSA9PT0gbnVsbCB8fCB2YWx1ZSA9PT0gdW5kZWZpbmVkO1xyXG59XHJcbi8qKlxyXG4gKiBSZXR1cm5zIHdoZXRoZXIgYSB2YWx1ZSBpcyBhbiBpbnRlZ2VyIGFuZCBpbiB0aGUgc2FmZSBpbnRlZ2VyIHJhbmdlXHJcbiAqIEBwYXJhbSB2YWx1ZSBUaGUgdmFsdWUgdG8gdGVzdCBmb3IgYmVpbmcgYW4gaW50ZWdlciBhbmQgaW4gdGhlIHNhZmUgcmFuZ2VcclxuICovXHJcbmZ1bmN0aW9uIGlzU2FmZUludGVnZXIodmFsdWUpIHtcclxuICAgIHJldHVybiAoaXNJbnRlZ2VyKHZhbHVlKSAmJlxyXG4gICAgICAgIHZhbHVlIDw9IE1BWF9TQUZFX0lOVEVHRVIgJiZcclxuICAgICAgICB2YWx1ZSA+PSBNSU5fU0FGRV9JTlRFR0VSKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEEgVGFyZ2V0IHJlcHJlc2VudHMgdGhlIFdhdGNoVGFyZ2V0IHJlcHJlc2VudGF0aW9uIG9mIGEgUXVlcnksIHdoaWNoIGlzIHVzZWRcclxuICogYnkgdGhlIExvY2FsU3RvcmUgYW5kIHRoZSBSZW1vdGVTdG9yZSB0byBrZWVwIHRyYWNrIG9mIGFuZCB0byBleGVjdXRlXHJcbiAqIGJhY2tlbmQgcXVlcmllcy4gV2hpbGUgYSBRdWVyeSBjYW4gcmVwcmVzZW50IG11bHRpcGxlIFRhcmdldHMsIGVhY2ggVGFyZ2V0c1xyXG4gKiBtYXBzIHRvIGEgc2luZ2xlIFdhdGNoVGFyZ2V0IGluIFJlbW90ZVN0b3JlIGFuZCBhIHNpbmdsZSBUYXJnZXREYXRhIGVudHJ5XHJcbiAqIGluIHBlcnNpc3RlbmNlLlxyXG4gKi9cclxudmFyIFRhcmdldCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIC8qKlxyXG4gICAgICogSW5pdGlhbGl6ZXMgYSBUYXJnZXQgd2l0aCBhIHBhdGggYW5kIG9wdGlvbmFsIGFkZGl0aW9uYWwgcXVlcnkgY29uc3RyYWludHMuXHJcbiAgICAgKiBQYXRoIG11c3QgY3VycmVudGx5IGJlIGVtcHR5IGlmIHRoaXMgaXMgYSBjb2xsZWN0aW9uIGdyb3VwIHF1ZXJ5LlxyXG4gICAgICpcclxuICAgICAqIE5PVEU6IHlvdSBzaG91bGQgYWx3YXlzIGNvbnN0cnVjdCBgVGFyZ2V0YCBmcm9tIGBRdWVyeS50b1RhcmdldGAgaW5zdGVhZCBvZlxyXG4gICAgICogdXNpbmcgdGhpcyBjb25zdHJ1Y3RvciwgYmVjYXVzZSBgUXVlcnlgIHByb3ZpZGVzIGFuIGltcGxpY2l0IGBvcmRlckJ5YFxyXG4gICAgICogcHJvcGVydHkuXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIFRhcmdldChwYXRoLCBjb2xsZWN0aW9uR3JvdXAsIG9yZGVyQnksIGZpbHRlcnMsIGxpbWl0LCBzdGFydEF0LCBlbmRBdCkge1xyXG4gICAgICAgIGlmIChjb2xsZWN0aW9uR3JvdXAgPT09IHZvaWQgMCkgeyBjb2xsZWN0aW9uR3JvdXAgPSBudWxsOyB9XHJcbiAgICAgICAgaWYgKG9yZGVyQnkgPT09IHZvaWQgMCkgeyBvcmRlckJ5ID0gW107IH1cclxuICAgICAgICBpZiAoZmlsdGVycyA9PT0gdm9pZCAwKSB7IGZpbHRlcnMgPSBbXTsgfVxyXG4gICAgICAgIGlmIChsaW1pdCA9PT0gdm9pZCAwKSB7IGxpbWl0ID0gbnVsbDsgfVxyXG4gICAgICAgIGlmIChzdGFydEF0ID09PSB2b2lkIDApIHsgc3RhcnRBdCA9IG51bGw7IH1cclxuICAgICAgICBpZiAoZW5kQXQgPT09IHZvaWQgMCkgeyBlbmRBdCA9IG51bGw7IH1cclxuICAgICAgICB0aGlzLnBhdGggPSBwYXRoO1xyXG4gICAgICAgIHRoaXMuY29sbGVjdGlvbkdyb3VwID0gY29sbGVjdGlvbkdyb3VwO1xyXG4gICAgICAgIHRoaXMub3JkZXJCeSA9IG9yZGVyQnk7XHJcbiAgICAgICAgdGhpcy5maWx0ZXJzID0gZmlsdGVycztcclxuICAgICAgICB0aGlzLmxpbWl0ID0gbGltaXQ7XHJcbiAgICAgICAgdGhpcy5zdGFydEF0ID0gc3RhcnRBdDtcclxuICAgICAgICB0aGlzLmVuZEF0ID0gZW5kQXQ7XHJcbiAgICAgICAgdGhpcy5tZW1vaXplZENhbm9uaWNhbElkID0gbnVsbDtcclxuICAgIH1cclxuICAgIFRhcmdldC5wcm90b3R5cGUuY2Fub25pY2FsSWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMubWVtb2l6ZWRDYW5vbmljYWxJZCA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICB2YXIgY2Fub25pY2FsSWQgPSB0aGlzLnBhdGguY2Fub25pY2FsU3RyaW5nKCk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbGxlY3Rpb25Hcm91cCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgY2Fub25pY2FsSWQgKz0gJ3xjZzonICsgdGhpcy5jb2xsZWN0aW9uR3JvdXA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2Fub25pY2FsSWQgKz0gJ3xmOic7XHJcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSB0aGlzLmZpbHRlcnM7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZmlsdGVyID0gX2FbX2ldO1xyXG4gICAgICAgICAgICAgICAgY2Fub25pY2FsSWQgKz0gZmlsdGVyLmNhbm9uaWNhbElkKCk7XHJcbiAgICAgICAgICAgICAgICBjYW5vbmljYWxJZCArPSAnLCc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2Fub25pY2FsSWQgKz0gJ3xvYjonO1xyXG4gICAgICAgICAgICAvLyBUT0RPKGRpbW9uZCk6IG1ha2UgdGhpcyBjb2xsaXNpb24gcmVzaXN0YW50XHJcbiAgICAgICAgICAgIGZvciAodmFyIF9iID0gMCwgX2MgPSB0aGlzLm9yZGVyQnk7IF9iIDwgX2MubGVuZ3RoOyBfYisrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgb3JkZXJCeSA9IF9jW19iXTtcclxuICAgICAgICAgICAgICAgIGNhbm9uaWNhbElkICs9IG9yZGVyQnkuY2Fub25pY2FsSWQoKTtcclxuICAgICAgICAgICAgICAgIGNhbm9uaWNhbElkICs9ICcsJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoIWlzTnVsbE9yVW5kZWZpbmVkKHRoaXMubGltaXQpKSB7XHJcbiAgICAgICAgICAgICAgICBjYW5vbmljYWxJZCArPSAnfGw6JztcclxuICAgICAgICAgICAgICAgIGNhbm9uaWNhbElkICs9IHRoaXMubGltaXQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHRoaXMuc3RhcnRBdCkge1xyXG4gICAgICAgICAgICAgICAgY2Fub25pY2FsSWQgKz0gJ3xsYjonO1xyXG4gICAgICAgICAgICAgICAgY2Fub25pY2FsSWQgKz0gdGhpcy5zdGFydEF0LmNhbm9uaWNhbElkKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHRoaXMuZW5kQXQpIHtcclxuICAgICAgICAgICAgICAgIGNhbm9uaWNhbElkICs9ICd8dWI6JztcclxuICAgICAgICAgICAgICAgIGNhbm9uaWNhbElkICs9IHRoaXMuZW5kQXQuY2Fub25pY2FsSWQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLm1lbW9pemVkQ2Fub25pY2FsSWQgPSBjYW5vbmljYWxJZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubWVtb2l6ZWRDYW5vbmljYWxJZDtcclxuICAgIH07XHJcbiAgICBUYXJnZXQucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBzdHIgPSB0aGlzLnBhdGguY2Fub25pY2FsU3RyaW5nKCk7XHJcbiAgICAgICAgaWYgKHRoaXMuY29sbGVjdGlvbkdyb3VwICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHN0ciArPSAnIGNvbGxlY3Rpb25Hcm91cD0nICsgdGhpcy5jb2xsZWN0aW9uR3JvdXA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmZpbHRlcnMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBzdHIgKz0gXCIsIGZpbHRlcnM6IFtcIiArIHRoaXMuZmlsdGVycy5qb2luKCcsICcpICsgXCJdXCI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghaXNOdWxsT3JVbmRlZmluZWQodGhpcy5saW1pdCkpIHtcclxuICAgICAgICAgICAgc3RyICs9ICcsIGxpbWl0OiAnICsgdGhpcy5saW1pdDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMub3JkZXJCeS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIHN0ciArPSBcIiwgb3JkZXJCeTogW1wiICsgdGhpcy5vcmRlckJ5LmpvaW4oJywgJykgKyBcIl1cIjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuc3RhcnRBdCkge1xyXG4gICAgICAgICAgICBzdHIgKz0gJywgc3RhcnRBdDogJyArIHRoaXMuc3RhcnRBdC5jYW5vbmljYWxJZCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5lbmRBdCkge1xyXG4gICAgICAgICAgICBzdHIgKz0gJywgZW5kQXQ6ICcgKyB0aGlzLmVuZEF0LmNhbm9uaWNhbElkKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBcIlRhcmdldChcIiArIHN0ciArIFwiKVwiO1xyXG4gICAgfTtcclxuICAgIFRhcmdldC5wcm90b3R5cGUuaXNFcXVhbCA9IGZ1bmN0aW9uIChvdGhlcikge1xyXG4gICAgICAgIGlmICh0aGlzLmxpbWl0ICE9PSBvdGhlci5saW1pdCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLm9yZGVyQnkubGVuZ3RoICE9PSBvdGhlci5vcmRlckJ5Lmxlbmd0aCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5vcmRlckJ5Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5vcmRlckJ5W2ldLmlzRXF1YWwob3RoZXIub3JkZXJCeVtpXSkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5maWx0ZXJzLmxlbmd0aCAhPT0gb3RoZXIuZmlsdGVycy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuZmlsdGVycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuZmlsdGVyc1tpXS5pc0VxdWFsKG90aGVyLmZpbHRlcnNbaV0pKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuY29sbGVjdGlvbkdyb3VwICE9PSBvdGhlci5jb2xsZWN0aW9uR3JvdXApIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIXRoaXMucGF0aC5pc0VxdWFsKG90aGVyLnBhdGgpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuc3RhcnRBdCAhPT0gbnVsbFxyXG4gICAgICAgICAgICA/ICF0aGlzLnN0YXJ0QXQuaXNFcXVhbChvdGhlci5zdGFydEF0KVxyXG4gICAgICAgICAgICA6IG90aGVyLnN0YXJ0QXQgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5lbmRBdCAhPT0gbnVsbFxyXG4gICAgICAgICAgICA/IHRoaXMuZW5kQXQuaXNFcXVhbChvdGhlci5lbmRBdClcclxuICAgICAgICAgICAgOiBvdGhlci5lbmRBdCA9PT0gbnVsbDtcclxuICAgIH07XHJcbiAgICBUYXJnZXQucHJvdG90eXBlLmlzRG9jdW1lbnRRdWVyeSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gKERvY3VtZW50S2V5LmlzRG9jdW1lbnRLZXkodGhpcy5wYXRoKSAmJlxyXG4gICAgICAgICAgICB0aGlzLmNvbGxlY3Rpb25Hcm91cCA9PT0gbnVsbCAmJlxyXG4gICAgICAgICAgICB0aGlzLmZpbHRlcnMubGVuZ3RoID09PSAwKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gVGFyZ2V0O1xyXG59KCkpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxudmFyIExpbWl0VHlwZTtcclxuKGZ1bmN0aW9uIChMaW1pdFR5cGUpIHtcclxuICAgIExpbWl0VHlwZVtcIkZpcnN0XCJdID0gXCJGXCI7XHJcbiAgICBMaW1pdFR5cGVbXCJMYXN0XCJdID0gXCJMXCI7XHJcbn0pKExpbWl0VHlwZSB8fCAoTGltaXRUeXBlID0ge30pKTtcclxuLyoqXHJcbiAqIFF1ZXJ5IGVuY2Fwc3VsYXRlcyBhbGwgdGhlIHF1ZXJ5IGF0dHJpYnV0ZXMgd2Ugc3VwcG9ydCBpbiB0aGUgU0RLLiBJdCBjYW5cclxuICogYmUgcnVuIGFnYWluc3QgdGhlIExvY2FsU3RvcmUsIGFzIHdlbGwgYXMgYmUgY29udmVydGVkIHRvIGEgYFRhcmdldGAgdG9cclxuICogcXVlcnkgdGhlIFJlbW90ZVN0b3JlIHJlc3VsdHMuXHJcbiAqL1xyXG52YXIgUXVlcnkgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICAvKipcclxuICAgICAqIEluaXRpYWxpemVzIGEgUXVlcnkgd2l0aCBhIHBhdGggYW5kIG9wdGlvbmFsIGFkZGl0aW9uYWwgcXVlcnkgY29uc3RyYWludHMuXHJcbiAgICAgKiBQYXRoIG11c3QgY3VycmVudGx5IGJlIGVtcHR5IGlmIHRoaXMgaXMgYSBjb2xsZWN0aW9uIGdyb3VwIHF1ZXJ5LlxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBRdWVyeShwYXRoLCBjb2xsZWN0aW9uR3JvdXAsIGV4cGxpY2l0T3JkZXJCeSwgZmlsdGVycywgbGltaXQsIGxpbWl0VHlwZSwgc3RhcnRBdCwgZW5kQXQpIHtcclxuICAgICAgICBpZiAoY29sbGVjdGlvbkdyb3VwID09PSB2b2lkIDApIHsgY29sbGVjdGlvbkdyb3VwID0gbnVsbDsgfVxyXG4gICAgICAgIGlmIChleHBsaWNpdE9yZGVyQnkgPT09IHZvaWQgMCkgeyBleHBsaWNpdE9yZGVyQnkgPSBbXTsgfVxyXG4gICAgICAgIGlmIChmaWx0ZXJzID09PSB2b2lkIDApIHsgZmlsdGVycyA9IFtdOyB9XHJcbiAgICAgICAgaWYgKGxpbWl0ID09PSB2b2lkIDApIHsgbGltaXQgPSBudWxsOyB9XHJcbiAgICAgICAgaWYgKGxpbWl0VHlwZSA9PT0gdm9pZCAwKSB7IGxpbWl0VHlwZSA9IExpbWl0VHlwZS5GaXJzdDsgfVxyXG4gICAgICAgIGlmIChzdGFydEF0ID09PSB2b2lkIDApIHsgc3RhcnRBdCA9IG51bGw7IH1cclxuICAgICAgICBpZiAoZW5kQXQgPT09IHZvaWQgMCkgeyBlbmRBdCA9IG51bGw7IH1cclxuICAgICAgICB0aGlzLnBhdGggPSBwYXRoO1xyXG4gICAgICAgIHRoaXMuY29sbGVjdGlvbkdyb3VwID0gY29sbGVjdGlvbkdyb3VwO1xyXG4gICAgICAgIHRoaXMuZXhwbGljaXRPcmRlckJ5ID0gZXhwbGljaXRPcmRlckJ5O1xyXG4gICAgICAgIHRoaXMuZmlsdGVycyA9IGZpbHRlcnM7XHJcbiAgICAgICAgdGhpcy5saW1pdCA9IGxpbWl0O1xyXG4gICAgICAgIHRoaXMubGltaXRUeXBlID0gbGltaXRUeXBlO1xyXG4gICAgICAgIHRoaXMuc3RhcnRBdCA9IHN0YXJ0QXQ7XHJcbiAgICAgICAgdGhpcy5lbmRBdCA9IGVuZEF0O1xyXG4gICAgICAgIHRoaXMubWVtb2l6ZWRPcmRlckJ5ID0gbnVsbDtcclxuICAgICAgICAvLyBUaGUgY29ycmVzcG9uZGluZyBgVGFyZ2V0YCBvZiB0aGlzIGBRdWVyeWAgaW5zdGFuY2UuXHJcbiAgICAgICAgdGhpcy5tZW1vaXplZFRhcmdldCA9IG51bGw7XHJcbiAgICAgICAgaWYgKHRoaXMuc3RhcnRBdCkge1xyXG4gICAgICAgICAgICB0aGlzLmFzc2VydFZhbGlkQm91bmQodGhpcy5zdGFydEF0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuZW5kQXQpIHtcclxuICAgICAgICAgICAgdGhpcy5hc3NlcnRWYWxpZEJvdW5kKHRoaXMuZW5kQXQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIFF1ZXJ5LmF0UGF0aCA9IGZ1bmN0aW9uIChwYXRoKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBRdWVyeShwYXRoKTtcclxuICAgIH07XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoUXVlcnkucHJvdG90eXBlLCBcIm9yZGVyQnlcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5tZW1vaXplZE9yZGVyQnkgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIHZhciBpbmVxdWFsaXR5RmllbGQgPSB0aGlzLmdldEluZXF1YWxpdHlGaWx0ZXJGaWVsZCgpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGZpcnN0T3JkZXJCeUZpZWxkID0gdGhpcy5nZXRGaXJzdE9yZGVyQnlGaWVsZCgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGluZXF1YWxpdHlGaWVsZCAhPT0gbnVsbCAmJiBmaXJzdE9yZGVyQnlGaWVsZCA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIEluIG9yZGVyIHRvIGltcGxpY2l0bHkgYWRkIGtleSBvcmRlcmluZywgd2UgbXVzdCBhbHNvIGFkZCB0aGVcclxuICAgICAgICAgICAgICAgICAgICAvLyBpbmVxdWFsaXR5IGZpbHRlciBmaWVsZCBmb3IgaXQgdG8gYmUgYSB2YWxpZCBxdWVyeS5cclxuICAgICAgICAgICAgICAgICAgICAvLyBOb3RlIHRoYXQgdGhlIGRlZmF1bHQgaW5lcXVhbGl0eSBmaWVsZCBhbmQga2V5IG9yZGVyaW5nIGlzIGFzY2VuZGluZy5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoaW5lcXVhbGl0eUZpZWxkLmlzS2V5RmllbGQoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1lbW9pemVkT3JkZXJCeSA9IFtLRVlfT1JERVJJTkdfQVNDXTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWVtb2l6ZWRPcmRlckJ5ID0gW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE9yZGVyQnkoaW5lcXVhbGl0eUZpZWxkKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIEtFWV9PUkRFUklOR19BU0NcclxuICAgICAgICAgICAgICAgICAgICAgICAgXTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBhc3NlcnQoaW5lcXVhbGl0eUZpZWxkID09PSBudWxsIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIChmaXJzdE9yZGVyQnlGaWVsZCAhPT0gbnVsbCAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5lcXVhbGl0eUZpZWxkLmlzRXF1YWwoZmlyc3RPcmRlckJ5RmllbGQpKSwgJ0ZpcnN0IG9yZGVyQnkgc2hvdWxkIG1hdGNoIGluZXF1YWxpdHkgZmllbGQuJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tZW1vaXplZE9yZGVyQnkgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZm91bmRLZXlPcmRlcmluZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSB0aGlzLmV4cGxpY2l0T3JkZXJCeTsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9yZGVyQnkgPSBfYVtfaV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWVtb2l6ZWRPcmRlckJ5LnB1c2gob3JkZXJCeSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcmRlckJ5LmZpZWxkLmlzS2V5RmllbGQoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm91bmRLZXlPcmRlcmluZyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFmb3VuZEtleU9yZGVyaW5nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoZSBvcmRlciBvZiB0aGUgaW1wbGljaXQga2V5IG9yZGVyaW5nIGFsd2F5cyBtYXRjaGVzIHRoZSBsYXN0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGV4cGxpY2l0IG9yZGVyIGJ5XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsYXN0RGlyZWN0aW9uID0gdGhpcy5leHBsaWNpdE9yZGVyQnkubGVuZ3RoID4gMFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB0aGlzLmV4cGxpY2l0T3JkZXJCeVt0aGlzLmV4cGxpY2l0T3JkZXJCeS5sZW5ndGggLSAxXS5kaXJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogRGlyZWN0aW9uLkFTQ0VORElORztcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tZW1vaXplZE9yZGVyQnkucHVzaChsYXN0RGlyZWN0aW9uID09PSBEaXJlY3Rpb24uQVNDRU5ESU5HXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IEtFWV9PUkRFUklOR19BU0NcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogS0VZX09SREVSSU5HX0RFU0MpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5tZW1vaXplZE9yZGVyQnk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBRdWVyeS5wcm90b3R5cGUuYWRkRmlsdGVyID0gZnVuY3Rpb24gKGZpbHRlcikge1xyXG4gICAgICAgIGFzc2VydCh0aGlzLmdldEluZXF1YWxpdHlGaWx0ZXJGaWVsZCgpID09IG51bGwgfHxcclxuICAgICAgICAgICAgIShmaWx0ZXIgaW5zdGFuY2VvZiBGaWVsZEZpbHRlcikgfHxcclxuICAgICAgICAgICAgIWZpbHRlci5pc0luZXF1YWxpdHkoKSB8fFxyXG4gICAgICAgICAgICBmaWx0ZXIuZmllbGQuaXNFcXVhbCh0aGlzLmdldEluZXF1YWxpdHlGaWx0ZXJGaWVsZCgpKSwgJ1F1ZXJ5IG11c3Qgb25seSBoYXZlIG9uZSBpbmVxdWFsaXR5IGZpZWxkLicpO1xyXG4gICAgICAgIGFzc2VydCghdGhpcy5pc0RvY3VtZW50UXVlcnkoKSwgJ05vIGZpbHRlcmluZyBhbGxvd2VkIGZvciBkb2N1bWVudCBxdWVyeScpO1xyXG4gICAgICAgIHZhciBuZXdGaWx0ZXJzID0gdGhpcy5maWx0ZXJzLmNvbmNhdChbZmlsdGVyXSk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBRdWVyeSh0aGlzLnBhdGgsIHRoaXMuY29sbGVjdGlvbkdyb3VwLCB0aGlzLmV4cGxpY2l0T3JkZXJCeS5zbGljZSgpLCBuZXdGaWx0ZXJzLCB0aGlzLmxpbWl0LCB0aGlzLmxpbWl0VHlwZSwgdGhpcy5zdGFydEF0LCB0aGlzLmVuZEF0KTtcclxuICAgIH07XHJcbiAgICBRdWVyeS5wcm90b3R5cGUuYWRkT3JkZXJCeSA9IGZ1bmN0aW9uIChvcmRlckJ5KSB7XHJcbiAgICAgICAgYXNzZXJ0KCF0aGlzLnN0YXJ0QXQgJiYgIXRoaXMuZW5kQXQsICdCb3VuZHMgbXVzdCBiZSBzZXQgYWZ0ZXIgb3JkZXJCeScpO1xyXG4gICAgICAgIC8vIFRPRE8oZGltb25kKTogdmFsaWRhdGUgdGhhdCBvcmRlckJ5IGRvZXMgbm90IGxpc3QgdGhlIHNhbWUga2V5IHR3aWNlLlxyXG4gICAgICAgIHZhciBuZXdPcmRlckJ5ID0gdGhpcy5leHBsaWNpdE9yZGVyQnkuY29uY2F0KFtvcmRlckJ5XSk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBRdWVyeSh0aGlzLnBhdGgsIHRoaXMuY29sbGVjdGlvbkdyb3VwLCBuZXdPcmRlckJ5LCB0aGlzLmZpbHRlcnMuc2xpY2UoKSwgdGhpcy5saW1pdCwgdGhpcy5saW1pdFR5cGUsIHRoaXMuc3RhcnRBdCwgdGhpcy5lbmRBdCk7XHJcbiAgICB9O1xyXG4gICAgUXVlcnkucHJvdG90eXBlLndpdGhMaW1pdFRvRmlyc3QgPSBmdW5jdGlvbiAobGltaXQpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFF1ZXJ5KHRoaXMucGF0aCwgdGhpcy5jb2xsZWN0aW9uR3JvdXAsIHRoaXMuZXhwbGljaXRPcmRlckJ5LnNsaWNlKCksIHRoaXMuZmlsdGVycy5zbGljZSgpLCBsaW1pdCwgTGltaXRUeXBlLkZpcnN0LCB0aGlzLnN0YXJ0QXQsIHRoaXMuZW5kQXQpO1xyXG4gICAgfTtcclxuICAgIFF1ZXJ5LnByb3RvdHlwZS53aXRoTGltaXRUb0xhc3QgPSBmdW5jdGlvbiAobGltaXQpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFF1ZXJ5KHRoaXMucGF0aCwgdGhpcy5jb2xsZWN0aW9uR3JvdXAsIHRoaXMuZXhwbGljaXRPcmRlckJ5LnNsaWNlKCksIHRoaXMuZmlsdGVycy5zbGljZSgpLCBsaW1pdCwgTGltaXRUeXBlLkxhc3QsIHRoaXMuc3RhcnRBdCwgdGhpcy5lbmRBdCk7XHJcbiAgICB9O1xyXG4gICAgUXVlcnkucHJvdG90eXBlLndpdGhTdGFydEF0ID0gZnVuY3Rpb24gKGJvdW5kKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBRdWVyeSh0aGlzLnBhdGgsIHRoaXMuY29sbGVjdGlvbkdyb3VwLCB0aGlzLmV4cGxpY2l0T3JkZXJCeS5zbGljZSgpLCB0aGlzLmZpbHRlcnMuc2xpY2UoKSwgdGhpcy5saW1pdCwgdGhpcy5saW1pdFR5cGUsIGJvdW5kLCB0aGlzLmVuZEF0KTtcclxuICAgIH07XHJcbiAgICBRdWVyeS5wcm90b3R5cGUud2l0aEVuZEF0ID0gZnVuY3Rpb24gKGJvdW5kKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBRdWVyeSh0aGlzLnBhdGgsIHRoaXMuY29sbGVjdGlvbkdyb3VwLCB0aGlzLmV4cGxpY2l0T3JkZXJCeS5zbGljZSgpLCB0aGlzLmZpbHRlcnMuc2xpY2UoKSwgdGhpcy5saW1pdCwgdGhpcy5saW1pdFR5cGUsIHRoaXMuc3RhcnRBdCwgYm91bmQpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogSGVscGVyIHRvIGNvbnZlcnQgYSBjb2xsZWN0aW9uIGdyb3VwIHF1ZXJ5IGludG8gYSBjb2xsZWN0aW9uIHF1ZXJ5IGF0IGFcclxuICAgICAqIHNwZWNpZmljIHBhdGguIFRoaXMgaXMgdXNlZCB3aGVuIGV4ZWN1dGluZyBjb2xsZWN0aW9uIGdyb3VwIHF1ZXJpZXMsIHNpbmNlXHJcbiAgICAgKiB3ZSBoYXZlIHRvIHNwbGl0IHRoZSBxdWVyeSBpbnRvIGEgc2V0IG9mIGNvbGxlY3Rpb24gcXVlcmllcyBhdCBtdWx0aXBsZVxyXG4gICAgICogcGF0aHMuXHJcbiAgICAgKi9cclxuICAgIFF1ZXJ5LnByb3RvdHlwZS5hc0NvbGxlY3Rpb25RdWVyeUF0UGF0aCA9IGZ1bmN0aW9uIChwYXRoKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBRdWVyeShwYXRoLCBcclxuICAgICAgICAvKmNvbGxlY3Rpb25Hcm91cD0qLyBudWxsLCB0aGlzLmV4cGxpY2l0T3JkZXJCeS5zbGljZSgpLCB0aGlzLmZpbHRlcnMuc2xpY2UoKSwgdGhpcy5saW1pdCwgdGhpcy5saW1pdFR5cGUsIHRoaXMuc3RhcnRBdCwgdGhpcy5lbmRBdCk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhpcyBxdWVyeSBkb2VzIG5vdCBzcGVjaWZ5IGFueSBxdWVyeSBjb25zdHJhaW50cyB0aGF0XHJcbiAgICAgKiBjb3VsZCByZW1vdmUgcmVzdWx0cy5cclxuICAgICAqL1xyXG4gICAgUXVlcnkucHJvdG90eXBlLm1hdGNoZXNBbGxEb2N1bWVudHMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuICh0aGlzLmZpbHRlcnMubGVuZ3RoID09PSAwICYmXHJcbiAgICAgICAgICAgIHRoaXMubGltaXQgPT09IG51bGwgJiZcclxuICAgICAgICAgICAgdGhpcy5zdGFydEF0ID09IG51bGwgJiZcclxuICAgICAgICAgICAgdGhpcy5lbmRBdCA9PSBudWxsICYmXHJcbiAgICAgICAgICAgICh0aGlzLmV4cGxpY2l0T3JkZXJCeS5sZW5ndGggPT09IDAgfHxcclxuICAgICAgICAgICAgICAgICh0aGlzLmV4cGxpY2l0T3JkZXJCeS5sZW5ndGggPT09IDEgJiZcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmV4cGxpY2l0T3JkZXJCeVswXS5maWVsZC5pc0tleUZpZWxkKCkpKSk7XHJcbiAgICB9O1xyXG4gICAgLy8gVE9ETyhiLzI5MTgzMTY1KTogVGhpcyBpcyB1c2VkIHRvIGdldCBhIHVuaXF1ZSBzdHJpbmcgZnJvbSBhIHF1ZXJ5IHRvLCBmb3JcclxuICAgIC8vIGV4YW1wbGUsIHVzZSBhcyBhIGRpY3Rpb25hcnkga2V5LCBidXQgdGhlIGltcGxlbWVudGF0aW9uIGlzIHN1YmplY3QgdG9cclxuICAgIC8vIGNvbGxpc2lvbnMuIE1ha2UgaXQgY29sbGlzaW9uLWZyZWUuXHJcbiAgICBRdWVyeS5wcm90b3R5cGUuY2Fub25pY2FsSWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudG9UYXJnZXQoKS5jYW5vbmljYWxJZCgpICsgXCJ8bHQ6XCIgKyB0aGlzLmxpbWl0VHlwZTtcclxuICAgIH07XHJcbiAgICBRdWVyeS5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIFwiUXVlcnkodGFyZ2V0PVwiICsgdGhpcy50b1RhcmdldCgpLnRvU3RyaW5nKCkgKyBcIjsgbGltaXRUeXBlPVwiICsgdGhpcy5saW1pdFR5cGUgKyBcIilcIjtcclxuICAgIH07XHJcbiAgICBRdWVyeS5wcm90b3R5cGUuaXNFcXVhbCA9IGZ1bmN0aW9uIChvdGhlcikge1xyXG4gICAgICAgIHJldHVybiAodGhpcy50b1RhcmdldCgpLmlzRXF1YWwob3RoZXIudG9UYXJnZXQoKSkgJiZcclxuICAgICAgICAgICAgdGhpcy5saW1pdFR5cGUgPT09IG90aGVyLmxpbWl0VHlwZSk7XHJcbiAgICB9O1xyXG4gICAgUXVlcnkucHJvdG90eXBlLmRvY0NvbXBhcmF0b3IgPSBmdW5jdGlvbiAoZDEsIGQyKSB7XHJcbiAgICAgICAgdmFyIGNvbXBhcmVkT25LZXlGaWVsZCA9IGZhbHNlO1xyXG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSB0aGlzLm9yZGVyQnk7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBvcmRlckJ5ID0gX2FbX2ldO1xyXG4gICAgICAgICAgICB2YXIgY29tcCA9IG9yZGVyQnkuY29tcGFyZShkMSwgZDIpO1xyXG4gICAgICAgICAgICBpZiAoY29tcCAhPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbXA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29tcGFyZWRPbktleUZpZWxkID0gY29tcGFyZWRPbktleUZpZWxkIHx8IG9yZGVyQnkuZmllbGQuaXNLZXlGaWVsZCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBBc3NlcnQgdGhhdCB3ZSBhY3R1YWxseSBjb21wYXJlZCBieSBrZXlcclxuICAgICAgICBhc3NlcnQoY29tcGFyZWRPbktleUZpZWxkLCBcIm9yZGVyQnkgdXNlZCB0aGF0IGRvZXNuJ3QgY29tcGFyZSBvbiBrZXkgZmllbGRcIik7XHJcbiAgICAgICAgcmV0dXJuIDA7XHJcbiAgICB9O1xyXG4gICAgUXVlcnkucHJvdG90eXBlLm1hdGNoZXMgPSBmdW5jdGlvbiAoZG9jKSB7XHJcbiAgICAgICAgcmV0dXJuICh0aGlzLm1hdGNoZXNQYXRoQW5kQ29sbGVjdGlvbkdyb3VwKGRvYykgJiZcclxuICAgICAgICAgICAgdGhpcy5tYXRjaGVzT3JkZXJCeShkb2MpICYmXHJcbiAgICAgICAgICAgIHRoaXMubWF0Y2hlc0ZpbHRlcnMoZG9jKSAmJlxyXG4gICAgICAgICAgICB0aGlzLm1hdGNoZXNCb3VuZHMoZG9jKSk7XHJcbiAgICB9O1xyXG4gICAgUXVlcnkucHJvdG90eXBlLmhhc0xpbWl0VG9GaXJzdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gIWlzTnVsbE9yVW5kZWZpbmVkKHRoaXMubGltaXQpICYmIHRoaXMubGltaXRUeXBlID09PSBMaW1pdFR5cGUuRmlyc3Q7XHJcbiAgICB9O1xyXG4gICAgUXVlcnkucHJvdG90eXBlLmhhc0xpbWl0VG9MYXN0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiAhaXNOdWxsT3JVbmRlZmluZWQodGhpcy5saW1pdCkgJiYgdGhpcy5saW1pdFR5cGUgPT09IExpbWl0VHlwZS5MYXN0O1xyXG4gICAgfTtcclxuICAgIFF1ZXJ5LnByb3RvdHlwZS5nZXRGaXJzdE9yZGVyQnlGaWVsZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5leHBsaWNpdE9yZGVyQnkubGVuZ3RoID4gMFxyXG4gICAgICAgICAgICA/IHRoaXMuZXhwbGljaXRPcmRlckJ5WzBdLmZpZWxkXHJcbiAgICAgICAgICAgIDogbnVsbDtcclxuICAgIH07XHJcbiAgICBRdWVyeS5wcm90b3R5cGUuZ2V0SW5lcXVhbGl0eUZpbHRlckZpZWxkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSB0aGlzLmZpbHRlcnM7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBmaWx0ZXIgPSBfYVtfaV07XHJcbiAgICAgICAgICAgIGlmIChmaWx0ZXIgaW5zdGFuY2VvZiBGaWVsZEZpbHRlciAmJiBmaWx0ZXIuaXNJbmVxdWFsaXR5KCkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmaWx0ZXIuZmllbGQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9O1xyXG4gICAgLy8gQ2hlY2tzIGlmIGFueSBvZiB0aGUgcHJvdmlkZWQgT3BlcmF0b3JzIGFyZSBpbmNsdWRlZCBpbiB0aGUgcXVlcnkgYW5kXHJcbiAgICAvLyByZXR1cm5zIHRoZSBmaXJzdCBvbmUgdGhhdCBpcywgb3IgbnVsbCBpZiBub25lIGFyZS5cclxuICAgIFF1ZXJ5LnByb3RvdHlwZS5maW5kRmlsdGVyT3BlcmF0b3IgPSBmdW5jdGlvbiAob3BlcmF0b3JzKSB7XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHRoaXMuZmlsdGVyczsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgdmFyIGZpbHRlciA9IF9hW19pXTtcclxuICAgICAgICAgICAgaWYgKGZpbHRlciBpbnN0YW5jZW9mIEZpZWxkRmlsdGVyKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAob3BlcmF0b3JzLmluZGV4T2YoZmlsdGVyLm9wKSA+PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZpbHRlci5vcDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH07XHJcbiAgICBRdWVyeS5wcm90b3R5cGUuaXNEb2N1bWVudFF1ZXJ5ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnRvVGFyZ2V0KCkuaXNEb2N1bWVudFF1ZXJ5KCk7XHJcbiAgICB9O1xyXG4gICAgUXVlcnkucHJvdG90eXBlLmlzQ29sbGVjdGlvbkdyb3VwUXVlcnkgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY29sbGVjdGlvbkdyb3VwICE9PSBudWxsO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQ29udmVydHMgdGhpcyBgUXVlcnlgIGluc3RhbmNlIHRvIGl0J3MgY29ycmVzcG9uZGluZyBgVGFyZ2V0YFxyXG4gICAgICogcmVwcmVzZW50YXRpb24uXHJcbiAgICAgKi9cclxuICAgIFF1ZXJ5LnByb3RvdHlwZS50b1RhcmdldCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoIXRoaXMubWVtb2l6ZWRUYXJnZXQpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMubGltaXRUeXBlID09PSBMaW1pdFR5cGUuRmlyc3QpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubWVtb2l6ZWRUYXJnZXQgPSBuZXcgVGFyZ2V0KHRoaXMucGF0aCwgdGhpcy5jb2xsZWN0aW9uR3JvdXAsIHRoaXMub3JkZXJCeSwgdGhpcy5maWx0ZXJzLCB0aGlzLmxpbWl0LCB0aGlzLnN0YXJ0QXQsIHRoaXMuZW5kQXQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gRmxpcCB0aGUgb3JkZXJCeSBkaXJlY3Rpb25zIHNpbmNlIHdlIHdhbnQgdGhlIGxhc3QgcmVzdWx0c1xyXG4gICAgICAgICAgICAgICAgdmFyIG9yZGVyQnlzID0gW107XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gdGhpcy5vcmRlckJ5OyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBvcmRlckJ5ID0gX2FbX2ldO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBkaXIgPSBvcmRlckJ5LmRpciA9PT0gRGlyZWN0aW9uLkRFU0NFTkRJTkdcclxuICAgICAgICAgICAgICAgICAgICAgICAgPyBEaXJlY3Rpb24uQVNDRU5ESU5HXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDogRGlyZWN0aW9uLkRFU0NFTkRJTkc7XHJcbiAgICAgICAgICAgICAgICAgICAgb3JkZXJCeXMucHVzaChuZXcgT3JkZXJCeShvcmRlckJ5LmZpZWxkLCBkaXIpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIFdlIG5lZWQgdG8gc3dhcCB0aGUgY3Vyc29ycyB0byBtYXRjaCB0aGUgbm93LWZsaXBwZWQgcXVlcnkgb3JkZXJpbmcuXHJcbiAgICAgICAgICAgICAgICB2YXIgc3RhcnRBdCA9IHRoaXMuZW5kQXRcclxuICAgICAgICAgICAgICAgICAgICA/IG5ldyBCb3VuZCh0aGlzLmVuZEF0LnBvc2l0aW9uLCAhdGhpcy5lbmRBdC5iZWZvcmUpXHJcbiAgICAgICAgICAgICAgICAgICAgOiBudWxsO1xyXG4gICAgICAgICAgICAgICAgdmFyIGVuZEF0ID0gdGhpcy5zdGFydEF0XHJcbiAgICAgICAgICAgICAgICAgICAgPyBuZXcgQm91bmQodGhpcy5zdGFydEF0LnBvc2l0aW9uLCAhdGhpcy5zdGFydEF0LmJlZm9yZSlcclxuICAgICAgICAgICAgICAgICAgICA6IG51bGw7XHJcbiAgICAgICAgICAgICAgICAvLyBOb3cgcmV0dXJuIGFzIGEgTGltaXRUeXBlLkZpcnN0IHF1ZXJ5LlxyXG4gICAgICAgICAgICAgICAgdGhpcy5tZW1vaXplZFRhcmdldCA9IG5ldyBUYXJnZXQodGhpcy5wYXRoLCB0aGlzLmNvbGxlY3Rpb25Hcm91cCwgb3JkZXJCeXMsIHRoaXMuZmlsdGVycywgdGhpcy5saW1pdCwgc3RhcnRBdCwgZW5kQXQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLm1lbW9pemVkVGFyZ2V0O1xyXG4gICAgfTtcclxuICAgIFF1ZXJ5LnByb3RvdHlwZS5tYXRjaGVzUGF0aEFuZENvbGxlY3Rpb25Hcm91cCA9IGZ1bmN0aW9uIChkb2MpIHtcclxuICAgICAgICB2YXIgZG9jUGF0aCA9IGRvYy5rZXkucGF0aDtcclxuICAgICAgICBpZiAodGhpcy5jb2xsZWN0aW9uR3JvdXAgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgLy8gTk9URTogdGhpcy5wYXRoIGlzIGN1cnJlbnRseSBhbHdheXMgZW1wdHkgc2luY2Ugd2UgZG9uJ3QgZXhwb3NlIENvbGxlY3Rpb25cclxuICAgICAgICAgICAgLy8gR3JvdXAgcXVlcmllcyByb290ZWQgYXQgYSBkb2N1bWVudCBwYXRoIHlldC5cclxuICAgICAgICAgICAgcmV0dXJuIChkb2Mua2V5Lmhhc0NvbGxlY3Rpb25JZCh0aGlzLmNvbGxlY3Rpb25Hcm91cCkgJiZcclxuICAgICAgICAgICAgICAgIHRoaXMucGF0aC5pc1ByZWZpeE9mKGRvY1BhdGgpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoRG9jdW1lbnRLZXkuaXNEb2N1bWVudEtleSh0aGlzLnBhdGgpKSB7XHJcbiAgICAgICAgICAgIC8vIGV4YWN0IG1hdGNoIGZvciBkb2N1bWVudCBxdWVyaWVzXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnBhdGguaXNFcXVhbChkb2NQYXRoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIHNoYWxsb3cgYW5jZXN0b3IgcXVlcmllcyBieSBkZWZhdWx0XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnBhdGguaXNJbW1lZGlhdGVQYXJlbnRPZihkb2NQYXRoKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBBIGRvY3VtZW50IG11c3QgaGF2ZSBhIHZhbHVlIGZvciBldmVyeSBvcmRlcmluZyBjbGF1c2UgaW4gb3JkZXIgdG8gc2hvdyB1cFxyXG4gICAgICogaW4gdGhlIHJlc3VsdHMuXHJcbiAgICAgKi9cclxuICAgIFF1ZXJ5LnByb3RvdHlwZS5tYXRjaGVzT3JkZXJCeSA9IGZ1bmN0aW9uIChkb2MpIHtcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gdGhpcy5leHBsaWNpdE9yZGVyQnk7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBvcmRlckJ5ID0gX2FbX2ldO1xyXG4gICAgICAgICAgICAvLyBvcmRlciBieSBrZXkgYWx3YXlzIG1hdGNoZXNcclxuICAgICAgICAgICAgaWYgKCFvcmRlckJ5LmZpZWxkLmlzS2V5RmllbGQoKSAmJiBkb2MuZmllbGQob3JkZXJCeS5maWVsZCkgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH07XHJcbiAgICBRdWVyeS5wcm90b3R5cGUubWF0Y2hlc0ZpbHRlcnMgPSBmdW5jdGlvbiAoZG9jKSB7XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHRoaXMuZmlsdGVyczsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgdmFyIGZpbHRlciA9IF9hW19pXTtcclxuICAgICAgICAgICAgaWYgKCFmaWx0ZXIubWF0Y2hlcyhkb2MpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBNYWtlcyBzdXJlIGEgZG9jdW1lbnQgaXMgd2l0aGluIHRoZSBib3VuZHMsIGlmIHByb3ZpZGVkLlxyXG4gICAgICovXHJcbiAgICBRdWVyeS5wcm90b3R5cGUubWF0Y2hlc0JvdW5kcyA9IGZ1bmN0aW9uIChkb2MpIHtcclxuICAgICAgICBpZiAodGhpcy5zdGFydEF0ICYmICF0aGlzLnN0YXJ0QXQuc29ydHNCZWZvcmVEb2N1bWVudCh0aGlzLm9yZGVyQnksIGRvYykpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5lbmRBdCAmJiB0aGlzLmVuZEF0LnNvcnRzQmVmb3JlRG9jdW1lbnQodGhpcy5vcmRlckJ5LCBkb2MpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9O1xyXG4gICAgUXVlcnkucHJvdG90eXBlLmFzc2VydFZhbGlkQm91bmQgPSBmdW5jdGlvbiAoYm91bmQpIHtcclxuICAgICAgICBhc3NlcnQoYm91bmQucG9zaXRpb24ubGVuZ3RoIDw9IHRoaXMub3JkZXJCeS5sZW5ndGgsICdCb3VuZCBpcyBsb25nZXIgdGhhbiBvcmRlckJ5Jyk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFF1ZXJ5O1xyXG59KCkpO1xyXG52YXIgRmlsdGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gRmlsdGVyKCkge1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIEZpbHRlcjtcclxufSgpKTtcclxudmFyIE9wZXJhdG9yID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gT3BlcmF0b3IobmFtZSkge1xyXG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XHJcbiAgICB9XHJcbiAgICBPcGVyYXRvci5mcm9tU3RyaW5nID0gZnVuY3Rpb24gKG9wKSB7XHJcbiAgICAgICAgc3dpdGNoIChvcCkge1xyXG4gICAgICAgICAgICBjYXNlICc8JzpcclxuICAgICAgICAgICAgICAgIHJldHVybiBPcGVyYXRvci5MRVNTX1RIQU47XHJcbiAgICAgICAgICAgIGNhc2UgJzw9JzpcclxuICAgICAgICAgICAgICAgIHJldHVybiBPcGVyYXRvci5MRVNTX1RIQU5fT1JfRVFVQUw7XHJcbiAgICAgICAgICAgIGNhc2UgJz09JzpcclxuICAgICAgICAgICAgICAgIHJldHVybiBPcGVyYXRvci5FUVVBTDtcclxuICAgICAgICAgICAgY2FzZSAnPj0nOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIE9wZXJhdG9yLkdSRUFURVJfVEhBTl9PUl9FUVVBTDtcclxuICAgICAgICAgICAgY2FzZSAnPic6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gT3BlcmF0b3IuR1JFQVRFUl9USEFOO1xyXG4gICAgICAgICAgICBjYXNlICdhcnJheS1jb250YWlucyc6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gT3BlcmF0b3IuQVJSQVlfQ09OVEFJTlM7XHJcbiAgICAgICAgICAgIGNhc2UgJ2luJzpcclxuICAgICAgICAgICAgICAgIHJldHVybiBPcGVyYXRvci5JTjtcclxuICAgICAgICAgICAgY2FzZSAnYXJyYXktY29udGFpbnMtYW55JzpcclxuICAgICAgICAgICAgICAgIHJldHVybiBPcGVyYXRvci5BUlJBWV9DT05UQUlOU19BTlk7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFpbCgnVW5rbm93biBGaWVsZEZpbHRlciBvcGVyYXRvcjogJyArIG9wKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgT3BlcmF0b3IucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm5hbWU7XHJcbiAgICB9O1xyXG4gICAgT3BlcmF0b3IucHJvdG90eXBlLmlzRXF1YWwgPSBmdW5jdGlvbiAob3RoZXIpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5uYW1lID09PSBvdGhlci5uYW1lO1xyXG4gICAgfTtcclxuICAgIE9wZXJhdG9yLkxFU1NfVEhBTiA9IG5ldyBPcGVyYXRvcignPCcpO1xyXG4gICAgT3BlcmF0b3IuTEVTU19USEFOX09SX0VRVUFMID0gbmV3IE9wZXJhdG9yKCc8PScpO1xyXG4gICAgT3BlcmF0b3IuRVFVQUwgPSBuZXcgT3BlcmF0b3IoJz09Jyk7XHJcbiAgICBPcGVyYXRvci5HUkVBVEVSX1RIQU4gPSBuZXcgT3BlcmF0b3IoJz4nKTtcclxuICAgIE9wZXJhdG9yLkdSRUFURVJfVEhBTl9PUl9FUVVBTCA9IG5ldyBPcGVyYXRvcignPj0nKTtcclxuICAgIE9wZXJhdG9yLkFSUkFZX0NPTlRBSU5TID0gbmV3IE9wZXJhdG9yKCdhcnJheS1jb250YWlucycpO1xyXG4gICAgT3BlcmF0b3IuSU4gPSBuZXcgT3BlcmF0b3IoJ2luJyk7XHJcbiAgICBPcGVyYXRvci5BUlJBWV9DT05UQUlOU19BTlkgPSBuZXcgT3BlcmF0b3IoJ2FycmF5LWNvbnRhaW5zLWFueScpO1xyXG4gICAgcmV0dXJuIE9wZXJhdG9yO1xyXG59KCkpO1xyXG52YXIgRmllbGRGaWx0ZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICB0c2xpYi5fX2V4dGVuZHMoRmllbGRGaWx0ZXIsIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBGaWVsZEZpbHRlcihmaWVsZCwgb3AsIHZhbHVlKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcclxuICAgICAgICBfdGhpcy5maWVsZCA9IGZpZWxkO1xyXG4gICAgICAgIF90aGlzLm9wID0gb3A7XHJcbiAgICAgICAgX3RoaXMudmFsdWUgPSB2YWx1ZTtcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYSBmaWx0ZXIgYmFzZWQgb24gdGhlIHByb3ZpZGVkIGFyZ3VtZW50cy5cclxuICAgICAqL1xyXG4gICAgRmllbGRGaWx0ZXIuY3JlYXRlID0gZnVuY3Rpb24gKGZpZWxkLCBvcCwgdmFsdWUpIHtcclxuICAgICAgICBpZiAoZmllbGQuaXNLZXlGaWVsZCgpKSB7XHJcbiAgICAgICAgICAgIGlmIChvcCA9PT0gT3BlcmF0b3IuSU4pIHtcclxuICAgICAgICAgICAgICAgIGFzc2VydCh2YWx1ZSBpbnN0YW5jZW9mIEFycmF5VmFsdWUsICdDb21wYXJpbmcgb24ga2V5IHdpdGggSU4sIGJ1dCBmaWx0ZXIgdmFsdWUgbm90IGFuIEFycmF5VmFsdWUnKTtcclxuICAgICAgICAgICAgICAgIGFzc2VydCh2YWx1ZS5pbnRlcm5hbFZhbHVlLmV2ZXJ5KGZ1bmN0aW9uIChlbGVtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVsZW0gaW5zdGFuY2VvZiBSZWZWYWx1ZTtcclxuICAgICAgICAgICAgICAgIH0pLCAnQ29tcGFyaW5nIG9uIGtleSB3aXRoIElOLCBidXQgYW4gYXJyYXkgdmFsdWUgd2FzIG5vdCBhIFJlZlZhbHVlJyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEtleUZpZWxkSW5GaWx0ZXIoZmllbGQsIHZhbHVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGFzc2VydCh2YWx1ZSBpbnN0YW5jZW9mIFJlZlZhbHVlLCAnQ29tcGFyaW5nIG9uIGtleSwgYnV0IGZpbHRlciB2YWx1ZSBub3QgYSBSZWZWYWx1ZScpO1xyXG4gICAgICAgICAgICAgICAgYXNzZXJ0KG9wICE9PSBPcGVyYXRvci5BUlJBWV9DT05UQUlOUyAmJiBvcCAhPT0gT3BlcmF0b3IuQVJSQVlfQ09OVEFJTlNfQU5ZLCBcIidcIiArIG9wLnRvU3RyaW5nKCkgKyBcIicgcXVlcmllcyBkb24ndCBtYWtlIHNlbnNlIG9uIGRvY3VtZW50IGtleXMuXCIpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBLZXlGaWVsZEZpbHRlcihmaWVsZCwgb3AsIHZhbHVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh2YWx1ZS5pc0VxdWFsKE51bGxWYWx1ZS5JTlNUQU5DRSkpIHtcclxuICAgICAgICAgICAgaWYgKG9wICE9PSBPcGVyYXRvci5FUVVBTCkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuSU5WQUxJRF9BUkdVTUVOVCwgJ0ludmFsaWQgcXVlcnkuIE51bGwgc3VwcG9ydHMgb25seSBlcXVhbGl0eSBjb21wYXJpc29ucy4nKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEZpZWxkRmlsdGVyKGZpZWxkLCBvcCwgdmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh2YWx1ZS5pc0VxdWFsKERvdWJsZVZhbHVlLk5BTikpIHtcclxuICAgICAgICAgICAgaWYgKG9wICE9PSBPcGVyYXRvci5FUVVBTCkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuSU5WQUxJRF9BUkdVTUVOVCwgJ0ludmFsaWQgcXVlcnkuIE5hTiBzdXBwb3J0cyBvbmx5IGVxdWFsaXR5IGNvbXBhcmlzb25zLicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgRmllbGRGaWx0ZXIoZmllbGQsIG9wLCB2YWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKG9wID09PSBPcGVyYXRvci5BUlJBWV9DT05UQUlOUykge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEFycmF5Q29udGFpbnNGaWx0ZXIoZmllbGQsIHZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAob3AgPT09IE9wZXJhdG9yLklOKSB7XHJcbiAgICAgICAgICAgIGFzc2VydCh2YWx1ZSBpbnN0YW5jZW9mIEFycmF5VmFsdWUsICdJTiBmaWx0ZXIgaGFzIGludmFsaWQgdmFsdWU6ICcgKyB2YWx1ZS50b1N0cmluZygpKTtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBJbkZpbHRlcihmaWVsZCwgdmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChvcCA9PT0gT3BlcmF0b3IuQVJSQVlfQ09OVEFJTlNfQU5ZKSB7XHJcbiAgICAgICAgICAgIGFzc2VydCh2YWx1ZSBpbnN0YW5jZW9mIEFycmF5VmFsdWUsICdBUlJBWV9DT05UQUlOU19BTlkgZmlsdGVyIGhhcyBpbnZhbGlkIHZhbHVlOiAnICsgdmFsdWUudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgQXJyYXlDb250YWluc0FueUZpbHRlcihmaWVsZCwgdmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBGaWVsZEZpbHRlcihmaWVsZCwgb3AsIHZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgRmllbGRGaWx0ZXIucHJvdG90eXBlLm1hdGNoZXMgPSBmdW5jdGlvbiAoZG9jKSB7XHJcbiAgICAgICAgdmFyIG90aGVyID0gZG9jLmZpZWxkKHRoaXMuZmllbGQpO1xyXG4gICAgICAgIC8vIE9ubHkgY29tcGFyZSB0eXBlcyB3aXRoIG1hdGNoaW5nIGJhY2tlbmQgb3JkZXIgKHN1Y2ggYXMgZG91YmxlIGFuZCBpbnQpLlxyXG4gICAgICAgIHJldHVybiAob3RoZXIgIT09IG51bGwgJiZcclxuICAgICAgICAgICAgdGhpcy52YWx1ZS50eXBlT3JkZXIgPT09IG90aGVyLnR5cGVPcmRlciAmJlxyXG4gICAgICAgICAgICB0aGlzLm1hdGNoZXNDb21wYXJpc29uKG90aGVyLmNvbXBhcmVUbyh0aGlzLnZhbHVlKSkpO1xyXG4gICAgfTtcclxuICAgIEZpZWxkRmlsdGVyLnByb3RvdHlwZS5tYXRjaGVzQ29tcGFyaXNvbiA9IGZ1bmN0aW9uIChjb21wYXJpc29uKSB7XHJcbiAgICAgICAgc3dpdGNoICh0aGlzLm9wKSB7XHJcbiAgICAgICAgICAgIGNhc2UgT3BlcmF0b3IuTEVTU19USEFOOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbXBhcmlzb24gPCAwO1xyXG4gICAgICAgICAgICBjYXNlIE9wZXJhdG9yLkxFU1NfVEhBTl9PUl9FUVVBTDpcclxuICAgICAgICAgICAgICAgIHJldHVybiBjb21wYXJpc29uIDw9IDA7XHJcbiAgICAgICAgICAgIGNhc2UgT3BlcmF0b3IuRVFVQUw6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY29tcGFyaXNvbiA9PT0gMDtcclxuICAgICAgICAgICAgY2FzZSBPcGVyYXRvci5HUkVBVEVSX1RIQU46XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY29tcGFyaXNvbiA+IDA7XHJcbiAgICAgICAgICAgIGNhc2UgT3BlcmF0b3IuR1JFQVRFUl9USEFOX09SX0VRVUFMOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbXBhcmlzb24gPj0gMDtcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWlsKCdVbmtub3duIEZpZWxkRmlsdGVyIG9wZXJhdG9yOiAnICsgdGhpcy5vcCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIEZpZWxkRmlsdGVyLnByb3RvdHlwZS5pc0luZXF1YWxpdHkgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIChbXHJcbiAgICAgICAgICAgIE9wZXJhdG9yLkxFU1NfVEhBTixcclxuICAgICAgICAgICAgT3BlcmF0b3IuTEVTU19USEFOX09SX0VRVUFMLFxyXG4gICAgICAgICAgICBPcGVyYXRvci5HUkVBVEVSX1RIQU4sXHJcbiAgICAgICAgICAgIE9wZXJhdG9yLkdSRUFURVJfVEhBTl9PUl9FUVVBTFxyXG4gICAgICAgIF0uaW5kZXhPZih0aGlzLm9wKSA+PSAwKTtcclxuICAgIH07XHJcbiAgICBGaWVsZEZpbHRlci5wcm90b3R5cGUuY2Fub25pY2FsSWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy8gVE9ETyhiLzI5MTgzMTY1KTogVGVjaG5pY2FsbHksIHRoaXMgd29uJ3QgYmUgdW5pcXVlIGlmIHR3byB2YWx1ZXMgaGF2ZVxyXG4gICAgICAgIC8vIHRoZSBzYW1lIGRlc2NyaXB0aW9uLCBzdWNoIGFzIHRoZSBpbnQgMyBhbmQgdGhlIHN0cmluZyBcIjNcIi4gU28gd2Ugc2hvdWxkXHJcbiAgICAgICAgLy8gYWRkIHRoZSB0eXBlcyBpbiBoZXJlIHNvbWVob3csIHRvby5cclxuICAgICAgICByZXR1cm4gKHRoaXMuZmllbGQuY2Fub25pY2FsU3RyaW5nKCkgKyB0aGlzLm9wLnRvU3RyaW5nKCkgKyB0aGlzLnZhbHVlLnRvU3RyaW5nKCkpO1xyXG4gICAgfTtcclxuICAgIEZpZWxkRmlsdGVyLnByb3RvdHlwZS5pc0VxdWFsID0gZnVuY3Rpb24gKG90aGVyKSB7XHJcbiAgICAgICAgaWYgKG90aGVyIGluc3RhbmNlb2YgRmllbGRGaWx0ZXIpIHtcclxuICAgICAgICAgICAgcmV0dXJuICh0aGlzLm9wLmlzRXF1YWwob3RoZXIub3ApICYmXHJcbiAgICAgICAgICAgICAgICB0aGlzLmZpZWxkLmlzRXF1YWwob3RoZXIuZmllbGQpICYmXHJcbiAgICAgICAgICAgICAgICB0aGlzLnZhbHVlLmlzRXF1YWwob3RoZXIudmFsdWUpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgRmllbGRGaWx0ZXIucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmZpZWxkLmNhbm9uaWNhbFN0cmluZygpICsgXCIgXCIgKyB0aGlzLm9wICsgXCIgXCIgKyB0aGlzLnZhbHVlLnZhbHVlKCk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEZpZWxkRmlsdGVyO1xyXG59KEZpbHRlcikpO1xyXG4vKiogRmlsdGVyIHRoYXQgbWF0Y2hlcyBvbiBrZXkgZmllbGRzIChpLmUuICdfX25hbWVfXycpLiAqL1xyXG52YXIgS2V5RmllbGRGaWx0ZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICB0c2xpYi5fX2V4dGVuZHMoS2V5RmllbGRGaWx0ZXIsIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBLZXlGaWVsZEZpbHRlcigpIHtcclxuICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XHJcbiAgICB9XHJcbiAgICBLZXlGaWVsZEZpbHRlci5wcm90b3R5cGUubWF0Y2hlcyA9IGZ1bmN0aW9uIChkb2MpIHtcclxuICAgICAgICB2YXIgcmVmVmFsdWUgPSB0aGlzLnZhbHVlO1xyXG4gICAgICAgIHZhciBjb21wYXJpc29uID0gRG9jdW1lbnRLZXkuY29tcGFyYXRvcihkb2Mua2V5LCByZWZWYWx1ZS5rZXkpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLm1hdGNoZXNDb21wYXJpc29uKGNvbXBhcmlzb24pO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBLZXlGaWVsZEZpbHRlcjtcclxufShGaWVsZEZpbHRlcikpO1xyXG4vKiogRmlsdGVyIHRoYXQgbWF0Y2hlcyBvbiBrZXkgZmllbGRzIHdpdGhpbiBhbiBhcnJheS4gKi9cclxudmFyIEtleUZpZWxkSW5GaWx0ZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICB0c2xpYi5fX2V4dGVuZHMoS2V5RmllbGRJbkZpbHRlciwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIEtleUZpZWxkSW5GaWx0ZXIoZmllbGQsIHZhbHVlKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgZmllbGQsIE9wZXJhdG9yLklOLCB2YWx1ZSkgfHwgdGhpcztcclxuICAgICAgICBfdGhpcy52YWx1ZSA9IHZhbHVlO1xyXG4gICAgICAgIHJldHVybiBfdGhpcztcclxuICAgIH1cclxuICAgIEtleUZpZWxkSW5GaWx0ZXIucHJvdG90eXBlLm1hdGNoZXMgPSBmdW5jdGlvbiAoZG9jKSB7XHJcbiAgICAgICAgdmFyIGFycmF5VmFsdWUgPSB0aGlzLnZhbHVlO1xyXG4gICAgICAgIHJldHVybiBhcnJheVZhbHVlLmludGVybmFsVmFsdWUuc29tZShmdW5jdGlvbiAocmVmVmFsdWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGRvYy5rZXkuaXNFcXVhbChyZWZWYWx1ZS5rZXkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBLZXlGaWVsZEluRmlsdGVyO1xyXG59KEZpZWxkRmlsdGVyKSk7XHJcbi8qKiBBIEZpbHRlciB0aGF0IGltcGxlbWVudHMgdGhlIGFycmF5LWNvbnRhaW5zIG9wZXJhdG9yLiAqL1xyXG52YXIgQXJyYXlDb250YWluc0ZpbHRlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIHRzbGliLl9fZXh0ZW5kcyhBcnJheUNvbnRhaW5zRmlsdGVyLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gQXJyYXlDb250YWluc0ZpbHRlcihmaWVsZCwgdmFsdWUpIHtcclxuICAgICAgICByZXR1cm4gX3N1cGVyLmNhbGwodGhpcywgZmllbGQsIE9wZXJhdG9yLkFSUkFZX0NPTlRBSU5TLCB2YWx1ZSkgfHwgdGhpcztcclxuICAgIH1cclxuICAgIEFycmF5Q29udGFpbnNGaWx0ZXIucHJvdG90eXBlLm1hdGNoZXMgPSBmdW5jdGlvbiAoZG9jKSB7XHJcbiAgICAgICAgdmFyIG90aGVyID0gZG9jLmZpZWxkKHRoaXMuZmllbGQpO1xyXG4gICAgICAgIHJldHVybiBvdGhlciBpbnN0YW5jZW9mIEFycmF5VmFsdWUgJiYgb3RoZXIuY29udGFpbnModGhpcy52YWx1ZSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEFycmF5Q29udGFpbnNGaWx0ZXI7XHJcbn0oRmllbGRGaWx0ZXIpKTtcclxuLyoqIEEgRmlsdGVyIHRoYXQgaW1wbGVtZW50cyB0aGUgSU4gb3BlcmF0b3IuICovXHJcbnZhciBJbkZpbHRlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIHRzbGliLl9fZXh0ZW5kcyhJbkZpbHRlciwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIEluRmlsdGVyKGZpZWxkLCB2YWx1ZSkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGZpZWxkLCBPcGVyYXRvci5JTiwgdmFsdWUpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMudmFsdWUgPSB2YWx1ZTtcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICBJbkZpbHRlci5wcm90b3R5cGUubWF0Y2hlcyA9IGZ1bmN0aW9uIChkb2MpIHtcclxuICAgICAgICB2YXIgYXJyYXlWYWx1ZSA9IHRoaXMudmFsdWU7XHJcbiAgICAgICAgdmFyIG90aGVyID0gZG9jLmZpZWxkKHRoaXMuZmllbGQpO1xyXG4gICAgICAgIHJldHVybiBvdGhlciAhPT0gbnVsbCAmJiBhcnJheVZhbHVlLmNvbnRhaW5zKG90aGVyKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gSW5GaWx0ZXI7XHJcbn0oRmllbGRGaWx0ZXIpKTtcclxuLyoqIEEgRmlsdGVyIHRoYXQgaW1wbGVtZW50cyB0aGUgYXJyYXktY29udGFpbnMtYW55IG9wZXJhdG9yLiAqL1xyXG52YXIgQXJyYXlDb250YWluc0FueUZpbHRlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIHRzbGliLl9fZXh0ZW5kcyhBcnJheUNvbnRhaW5zQW55RmlsdGVyLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gQXJyYXlDb250YWluc0FueUZpbHRlcihmaWVsZCwgdmFsdWUpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBmaWVsZCwgT3BlcmF0b3IuQVJSQVlfQ09OVEFJTlNfQU5ZLCB2YWx1ZSkgfHwgdGhpcztcclxuICAgICAgICBfdGhpcy52YWx1ZSA9IHZhbHVlO1xyXG4gICAgICAgIHJldHVybiBfdGhpcztcclxuICAgIH1cclxuICAgIEFycmF5Q29udGFpbnNBbnlGaWx0ZXIucHJvdG90eXBlLm1hdGNoZXMgPSBmdW5jdGlvbiAoZG9jKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgb3RoZXIgPSBkb2MuZmllbGQodGhpcy5maWVsZCk7XHJcbiAgICAgICAgcmV0dXJuIChvdGhlciBpbnN0YW5jZW9mIEFycmF5VmFsdWUgJiZcclxuICAgICAgICAgICAgb3RoZXIuaW50ZXJuYWxWYWx1ZS5zb21lKGZ1bmN0aW9uIChsaHNFbGVtKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMudmFsdWUuY29udGFpbnMobGhzRWxlbSk7XHJcbiAgICAgICAgICAgIH0pKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gQXJyYXlDb250YWluc0FueUZpbHRlcjtcclxufShGaWVsZEZpbHRlcikpO1xyXG4vKipcclxuICogVGhlIGRpcmVjdGlvbiBvZiBzb3J0aW5nIGluIGFuIG9yZGVyIGJ5LlxyXG4gKi9cclxudmFyIERpcmVjdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIERpcmVjdGlvbihuYW1lKSB7XHJcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcclxuICAgIH1cclxuICAgIERpcmVjdGlvbi5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubmFtZTtcclxuICAgIH07XHJcbiAgICBEaXJlY3Rpb24uQVNDRU5ESU5HID0gbmV3IERpcmVjdGlvbignYXNjJyk7XHJcbiAgICBEaXJlY3Rpb24uREVTQ0VORElORyA9IG5ldyBEaXJlY3Rpb24oJ2Rlc2MnKTtcclxuICAgIHJldHVybiBEaXJlY3Rpb247XHJcbn0oKSk7XHJcbi8qKlxyXG4gKiBSZXByZXNlbnRzIGEgYm91bmQgb2YgYSBxdWVyeS5cclxuICpcclxuICogVGhlIGJvdW5kIGlzIHNwZWNpZmllZCB3aXRoIHRoZSBnaXZlbiBjb21wb25lbnRzIHJlcHJlc2VudGluZyBhIHBvc2l0aW9uIGFuZFxyXG4gKiB3aGV0aGVyIGl0J3MganVzdCBiZWZvcmUgb3IganVzdCBhZnRlciB0aGUgcG9zaXRpb24gKHJlbGF0aXZlIHRvIHdoYXRldmVyIHRoZVxyXG4gKiBxdWVyeSBvcmRlciBpcykuXHJcbiAqXHJcbiAqIFRoZSBwb3NpdGlvbiByZXByZXNlbnRzIGEgbG9naWNhbCBpbmRleCBwb3NpdGlvbiBmb3IgYSBxdWVyeS4gSXQncyBhIHByZWZpeFxyXG4gKiBvZiB2YWx1ZXMgZm9yIHRoZSAocG90ZW50aWFsbHkgaW1wbGljaXQpIG9yZGVyIGJ5IGNsYXVzZXMgb2YgYSBxdWVyeS5cclxuICpcclxuICogQm91bmQgcHJvdmlkZXMgYSBmdW5jdGlvbiB0byBkZXRlcm1pbmUgd2hldGhlciBhIGRvY3VtZW50IGNvbWVzIGJlZm9yZSBvclxyXG4gKiBhZnRlciBhIGJvdW5kLiBUaGlzIGlzIGluZmx1ZW5jZWQgYnkgd2hldGhlciB0aGUgcG9zaXRpb24gaXMganVzdCBiZWZvcmUgb3JcclxuICoganVzdCBhZnRlciB0aGUgcHJvdmlkZWQgdmFsdWVzLlxyXG4gKi9cclxudmFyIEJvdW5kID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gQm91bmQocG9zaXRpb24sIGJlZm9yZSkge1xyXG4gICAgICAgIHRoaXMucG9zaXRpb24gPSBwb3NpdGlvbjtcclxuICAgICAgICB0aGlzLmJlZm9yZSA9IGJlZm9yZTtcclxuICAgIH1cclxuICAgIEJvdW5kLnByb3RvdHlwZS5jYW5vbmljYWxJZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvLyBUT0RPKGIvMjkxODMxNjUpOiBNYWtlIHRoaXMgY29sbGlzaW9uIHJvYnVzdC5cclxuICAgICAgICB2YXIgY2Fub25pY2FsSWQgPSB0aGlzLmJlZm9yZSA/ICdiOicgOiAnYTonO1xyXG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSB0aGlzLnBvc2l0aW9uOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICB2YXIgY29tcG9uZW50ID0gX2FbX2ldO1xyXG4gICAgICAgICAgICBjYW5vbmljYWxJZCArPSBjb21wb25lbnQudG9TdHJpbmcoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGNhbm9uaWNhbElkO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0cnVlIGlmIGEgZG9jdW1lbnQgc29ydHMgYmVmb3JlIGEgYm91bmQgdXNpbmcgdGhlIHByb3ZpZGVkIHNvcnRcclxuICAgICAqIG9yZGVyLlxyXG4gICAgICovXHJcbiAgICBCb3VuZC5wcm90b3R5cGUuc29ydHNCZWZvcmVEb2N1bWVudCA9IGZ1bmN0aW9uIChvcmRlckJ5LCBkb2MpIHtcclxuICAgICAgICBhc3NlcnQodGhpcy5wb3NpdGlvbi5sZW5ndGggPD0gb3JkZXJCeS5sZW5ndGgsIFwiQm91bmQgaGFzIG1vcmUgY29tcG9uZW50cyB0aGFuIHF1ZXJ5J3Mgb3JkZXJCeVwiKTtcclxuICAgICAgICB2YXIgY29tcGFyaXNvbiA9IDA7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnBvc2l0aW9uLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBvcmRlckJ5Q29tcG9uZW50ID0gb3JkZXJCeVtpXTtcclxuICAgICAgICAgICAgdmFyIGNvbXBvbmVudCA9IHRoaXMucG9zaXRpb25baV07XHJcbiAgICAgICAgICAgIGlmIChvcmRlckJ5Q29tcG9uZW50LmZpZWxkLmlzS2V5RmllbGQoKSkge1xyXG4gICAgICAgICAgICAgICAgYXNzZXJ0KGNvbXBvbmVudCBpbnN0YW5jZW9mIFJlZlZhbHVlLCAnQm91bmQgaGFzIGEgbm9uLWtleSB2YWx1ZSB3aGVyZSB0aGUga2V5IHBhdGggaXMgYmVpbmcgdXNlZC4nKTtcclxuICAgICAgICAgICAgICAgIGNvbXBhcmlzb24gPSBEb2N1bWVudEtleS5jb21wYXJhdG9yKGNvbXBvbmVudC5rZXksIGRvYy5rZXkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdmFyIGRvY1ZhbHVlID0gZG9jLmZpZWxkKG9yZGVyQnlDb21wb25lbnQuZmllbGQpO1xyXG4gICAgICAgICAgICAgICAgYXNzZXJ0KGRvY1ZhbHVlICE9PSBudWxsLCAnRmllbGQgc2hvdWxkIGV4aXN0IHNpbmNlIGRvY3VtZW50IG1hdGNoZWQgdGhlIG9yZGVyQnkgYWxyZWFkeS4nKTtcclxuICAgICAgICAgICAgICAgIGNvbXBhcmlzb24gPSBjb21wb25lbnQuY29tcGFyZVRvKGRvY1ZhbHVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAob3JkZXJCeUNvbXBvbmVudC5kaXIgPT09IERpcmVjdGlvbi5ERVNDRU5ESU5HKSB7XHJcbiAgICAgICAgICAgICAgICBjb21wYXJpc29uID0gY29tcGFyaXNvbiAqIC0xO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChjb21wYXJpc29uICE9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5iZWZvcmUgPyBjb21wYXJpc29uIDw9IDAgOiBjb21wYXJpc29uIDwgMDtcclxuICAgIH07XHJcbiAgICBCb3VuZC5wcm90b3R5cGUuaXNFcXVhbCA9IGZ1bmN0aW9uIChvdGhlcikge1xyXG4gICAgICAgIGlmIChvdGhlciA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmJlZm9yZSAhPT0gb3RoZXIuYmVmb3JlIHx8XHJcbiAgICAgICAgICAgIHRoaXMucG9zaXRpb24ubGVuZ3RoICE9PSBvdGhlci5wb3NpdGlvbi5sZW5ndGgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMucG9zaXRpb24ubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdmFyIHRoaXNQb3NpdGlvbiA9IHRoaXMucG9zaXRpb25baV07XHJcbiAgICAgICAgICAgIHZhciBvdGhlclBvc2l0aW9uID0gb3RoZXIucG9zaXRpb25baV07XHJcbiAgICAgICAgICAgIGlmICghdGhpc1Bvc2l0aW9uLmlzRXF1YWwob3RoZXJQb3NpdGlvbikpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gQm91bmQ7XHJcbn0oKSk7XHJcbi8qKlxyXG4gKiBBbiBvcmRlcmluZyBvbiBhIGZpZWxkLCBpbiBzb21lIERpcmVjdGlvbi4gRGlyZWN0aW9uIGRlZmF1bHRzIHRvIEFTQ0VORElORy5cclxuICovXHJcbnZhciBPcmRlckJ5ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gT3JkZXJCeShmaWVsZCwgZGlyKSB7XHJcbiAgICAgICAgdGhpcy5maWVsZCA9IGZpZWxkO1xyXG4gICAgICAgIGlmIChkaXIgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBkaXIgPSBEaXJlY3Rpb24uQVNDRU5ESU5HO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmRpciA9IGRpcjtcclxuICAgICAgICB0aGlzLmlzS2V5T3JkZXJCeSA9IGZpZWxkLmlzS2V5RmllbGQoKTtcclxuICAgIH1cclxuICAgIE9yZGVyQnkucHJvdG90eXBlLmNvbXBhcmUgPSBmdW5jdGlvbiAoZDEsIGQyKSB7XHJcbiAgICAgICAgdmFyIGNvbXBhcmlzb24gPSB0aGlzLmlzS2V5T3JkZXJCeVxyXG4gICAgICAgICAgICA/IERvY3VtZW50LmNvbXBhcmVCeUtleShkMSwgZDIpXHJcbiAgICAgICAgICAgIDogRG9jdW1lbnQuY29tcGFyZUJ5RmllbGQodGhpcy5maWVsZCwgZDEsIGQyKTtcclxuICAgICAgICBzd2l0Y2ggKHRoaXMuZGlyKSB7XHJcbiAgICAgICAgICAgIGNhc2UgRGlyZWN0aW9uLkFTQ0VORElORzpcclxuICAgICAgICAgICAgICAgIHJldHVybiBjb21wYXJpc29uO1xyXG4gICAgICAgICAgICBjYXNlIERpcmVjdGlvbi5ERVNDRU5ESU5HOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIC0xICogY29tcGFyaXNvbjtcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWlsKCdVbmtub3duIGRpcmVjdGlvbjogJyArIHRoaXMuZGlyKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgT3JkZXJCeS5wcm90b3R5cGUuY2Fub25pY2FsSWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy8gVE9ETyhiLzI5MTgzMTY1KTogTWFrZSB0aGlzIGNvbGxpc2lvbiByb2J1c3QuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZmllbGQuY2Fub25pY2FsU3RyaW5nKCkgKyB0aGlzLmRpci50b1N0cmluZygpO1xyXG4gICAgfTtcclxuICAgIE9yZGVyQnkucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmZpZWxkLmNhbm9uaWNhbFN0cmluZygpICsgXCIgKFwiICsgdGhpcy5kaXIgKyBcIilcIjtcclxuICAgIH07XHJcbiAgICBPcmRlckJ5LnByb3RvdHlwZS5pc0VxdWFsID0gZnVuY3Rpb24gKG90aGVyKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGlyID09PSBvdGhlci5kaXIgJiYgdGhpcy5maWVsZC5pc0VxdWFsKG90aGVyLmZpZWxkKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gT3JkZXJCeTtcclxufSgpKTtcclxudmFyIEtFWV9PUkRFUklOR19BU0MgPSBuZXcgT3JkZXJCeShGaWVsZFBhdGgua2V5RmllbGQoKSwgRGlyZWN0aW9uLkFTQ0VORElORyk7XHJcbnZhciBLRVlfT1JERVJJTkdfREVTQyA9IG5ldyBPcmRlckJ5KEZpZWxkUGF0aC5rZXlGaWVsZCgpLCBEaXJlY3Rpb24uREVTQ0VORElORyk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vLyBUT09EKGIvMTQwOTM4NTEyKTogRHJvcCBTaW1wbGVRdWVyeUVuZ2luZSBhbmQgcmVuYW1lIEluZGV4RnJlZVF1ZXJ5RW5naW5lLlxyXG4vKipcclxuICogQSBxdWVyeSBlbmdpbmUgdGhhdCB0YWtlcyBhZHZhbnRhZ2Ugb2YgdGhlIHRhcmdldCBkb2N1bWVudCBtYXBwaW5nIGluIHRoZVxyXG4gKiBRdWVyeUNhY2hlLiBUaGUgSW5kZXhGcmVlUXVlcnlFbmdpbmUgb3B0aW1pemVzIHF1ZXJ5IGV4ZWN1dGlvbiBieSBvbmx5XHJcbiAqIHJlYWRpbmcgdGhlIGRvY3VtZW50cyB0aGF0IHByZXZpb3VzbHkgbWF0Y2hlZCBhIHF1ZXJ5IHBsdXMgYW55IGRvY3VtZW50cyB0aGF0IHdlcmVcclxuICogZWRpdGVkIGFmdGVyIHRoZSBxdWVyeSB3YXMgbGFzdCBsaXN0ZW5lZCB0by5cclxuICpcclxuICogVGhlcmUgYXJlIHNvbWUgY2FzZXMgd2hlcmUgSW5kZXgtRnJlZSBxdWVyaWVzIGFyZSBub3QgZ3VhcmFudGVlZCB0byBwcm9kdWNlXHJcbiAqIHRoZSBzYW1lIHJlc3VsdHMgYXMgZnVsbCBjb2xsZWN0aW9uIHNjYW5zLiBJbiB0aGVzZSBjYXNlcywgdGhlXHJcbiAqIEluZGV4RnJlZVF1ZXJ5RW5naW5lIGZhbGxzIGJhY2sgdG8gZnVsbCBxdWVyeSBwcm9jZXNzaW5nLiBUaGVzZSBjYXNlcyBhcmU6XHJcbiAqXHJcbiAqIC0gTGltaXQgcXVlcmllcyB3aGVyZSBhIGRvY3VtZW50IHRoYXQgbWF0Y2hlZCB0aGUgcXVlcnkgcHJldmlvdXNseSBubyBsb25nZXJcclxuICogICBtYXRjaGVzIHRoZSBxdWVyeS5cclxuICpcclxuICogLSBMaW1pdCBxdWVyaWVzIHdoZXJlIGEgZG9jdW1lbnQgZWRpdCBtYXkgY2F1c2UgdGhlIGRvY3VtZW50IHRvIHNvcnQgYmVsb3dcclxuICogICBhbm90aGVyIGRvY3VtZW50IHRoYXQgaXMgaW4gdGhlIGxvY2FsIGNhY2hlLlxyXG4gKlxyXG4gKiAtIFF1ZXJpZXMgdGhhdCBoYXZlIG5ldmVyIGJlZW4gQ1VSUkVOVCBvciBmcmVlIG9mIExpbWJvIGRvY3VtZW50cy5cclxuICovXHJcbnZhciBJbmRleEZyZWVRdWVyeUVuZ2luZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEluZGV4RnJlZVF1ZXJ5RW5naW5lKCkge1xyXG4gICAgfVxyXG4gICAgSW5kZXhGcmVlUXVlcnlFbmdpbmUucHJvdG90eXBlLnNldExvY2FsRG9jdW1lbnRzVmlldyA9IGZ1bmN0aW9uIChsb2NhbERvY3VtZW50cykge1xyXG4gICAgICAgIHRoaXMubG9jYWxEb2N1bWVudHNWaWV3ID0gbG9jYWxEb2N1bWVudHM7XHJcbiAgICB9O1xyXG4gICAgSW5kZXhGcmVlUXVlcnlFbmdpbmUucHJvdG90eXBlLmdldERvY3VtZW50c01hdGNoaW5nUXVlcnkgPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24sIHF1ZXJ5LCBsYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uLCByZW1vdGVLZXlzKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBhc3NlcnQodGhpcy5sb2NhbERvY3VtZW50c1ZpZXcgIT09IHVuZGVmaW5lZCwgJ3NldExvY2FsRG9jdW1lbnRzVmlldygpIG5vdCBjYWxsZWQnKTtcclxuICAgICAgICAvLyBRdWVyaWVzIHRoYXQgbWF0Y2ggYWxsIGRvY3VtZW50cyBkb24ndCBiZW5lZml0IGZyb20gdXNpbmdcclxuICAgICAgICAvLyBJbmRleEZyZWVRdWVyaWVzLiBJdCBpcyBtb3JlIGVmZmljaWVudCB0byBzY2FuIGFsbCBkb2N1bWVudHMgaW4gYVxyXG4gICAgICAgIC8vIGNvbGxlY3Rpb24sIHJhdGhlciB0aGFuIHRvIHBlcmZvcm0gaW5kaXZpZHVhbCBsb29rdXBzLlxyXG4gICAgICAgIGlmIChxdWVyeS5tYXRjaGVzQWxsRG9jdW1lbnRzKCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZXhlY3V0ZUZ1bGxDb2xsZWN0aW9uU2Nhbih0cmFuc2FjdGlvbiwgcXVlcnkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBRdWVyaWVzIHRoYXQgaGF2ZSBuZXZlciBzZWVuIGEgc25hcHNob3Qgd2l0aG91dCBsaW1ibyBmcmVlIGRvY3VtZW50c1xyXG4gICAgICAgIC8vIHNob3VsZCBhbHNvIGJlIHJ1biBhcyBhIGZ1bGwgY29sbGVjdGlvbiBzY2FuLlxyXG4gICAgICAgIGlmIChsYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uLmlzRXF1YWwoU25hcHNob3RWZXJzaW9uLk1JTikpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZXhlY3V0ZUZ1bGxDb2xsZWN0aW9uU2Nhbih0cmFuc2FjdGlvbiwgcXVlcnkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5sb2NhbERvY3VtZW50c1ZpZXcuZ2V0RG9jdW1lbnRzKHRyYW5zYWN0aW9uLCByZW1vdGVLZXlzKS5uZXh0KGZ1bmN0aW9uIChkb2N1bWVudHMpIHtcclxuICAgICAgICAgICAgdmFyIHByZXZpb3VzUmVzdWx0cyA9IF90aGlzLmFwcGx5UXVlcnkocXVlcnksIGRvY3VtZW50cyk7XHJcbiAgICAgICAgICAgIGlmICgocXVlcnkuaGFzTGltaXRUb0ZpcnN0KCkgfHwgcXVlcnkuaGFzTGltaXRUb0xhc3QoKSkgJiZcclxuICAgICAgICAgICAgICAgIF90aGlzLm5lZWRzUmVmaWxsKHF1ZXJ5LmxpbWl0VHlwZSwgcHJldmlvdXNSZXN1bHRzLCByZW1vdGVLZXlzLCBsYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLmV4ZWN1dGVGdWxsQ29sbGVjdGlvblNjYW4odHJhbnNhY3Rpb24sIHF1ZXJ5KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoZ2V0TG9nTGV2ZWwoKSA8PSBMb2dMZXZlbC5ERUJVRykge1xyXG4gICAgICAgICAgICAgICAgZGVidWcoJ0luZGV4RnJlZVF1ZXJ5RW5naW5lJywgJ1JlLXVzaW5nIHByZXZpb3VzIHJlc3VsdCBmcm9tICVzIHRvIGV4ZWN1dGUgcXVlcnk6ICVzJywgbGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbi50b1N0cmluZygpLCBxdWVyeS50b1N0cmluZygpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBSZXRyaWV2ZSBhbGwgcmVzdWx0cyBmb3IgZG9jdW1lbnRzIHRoYXQgd2VyZSB1cGRhdGVkIHNpbmNlIHRoZSBsYXN0XHJcbiAgICAgICAgICAgIC8vIGxpbWJvLWRvY3VtZW50IGZyZWUgcmVtb3RlIHNuYXBzaG90LlxyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXMubG9jYWxEb2N1bWVudHNWaWV3LmdldERvY3VtZW50c01hdGNoaW5nUXVlcnkodHJhbnNhY3Rpb24sIHF1ZXJ5LCBsYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uKS5uZXh0KGZ1bmN0aW9uICh1cGRhdGVkUmVzdWx0cykge1xyXG4gICAgICAgICAgICAgICAgLy8gV2UgbWVyZ2UgYHByZXZpb3VzUmVzdWx0c2AgaW50byBgdXBkYXRlUmVzdWx0c2AsIHNpbmNlXHJcbiAgICAgICAgICAgICAgICAvLyBgdXBkYXRlUmVzdWx0c2AgaXMgYWxyZWFkeSBhIERvY3VtZW50TWFwLiBJZiBhIGRvY3VtZW50IGlzXHJcbiAgICAgICAgICAgICAgICAvLyBjb250YWluZWQgaW4gYm90aCBsaXN0cywgdGhlbiBpdHMgY29udGVudHMgYXJlIHRoZSBzYW1lLlxyXG4gICAgICAgICAgICAgICAgcHJldmlvdXNSZXN1bHRzLmZvckVhY2goZnVuY3Rpb24gKGRvYykge1xyXG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZWRSZXN1bHRzID0gdXBkYXRlZFJlc3VsdHMuaW5zZXJ0KGRvYy5rZXksIGRvYyk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB1cGRhdGVkUmVzdWx0cztcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqIEFwcGxpZXMgdGhlIHF1ZXJ5IGZpbHRlciBhbmQgc29ydGluZyB0byB0aGUgcHJvdmlkZWQgZG9jdW1lbnRzLiAgKi9cclxuICAgIEluZGV4RnJlZVF1ZXJ5RW5naW5lLnByb3RvdHlwZS5hcHBseVF1ZXJ5ID0gZnVuY3Rpb24gKHF1ZXJ5LCBkb2N1bWVudHMpIHtcclxuICAgICAgICAvLyBTb3J0IHRoZSBkb2N1bWVudHMgYW5kIHJlLWFwcGx5IHRoZSBxdWVyeSBmaWx0ZXIgc2luY2UgcHJldmlvdXNseVxyXG4gICAgICAgIC8vIG1hdGNoaW5nIGRvY3VtZW50cyBkbyBub3QgbmVjZXNzYXJpbHkgc3RpbGwgbWF0Y2ggdGhlIHF1ZXJ5LlxyXG4gICAgICAgIHZhciBxdWVyeVJlc3VsdHMgPSBuZXcgU29ydGVkU2V0KGZ1bmN0aW9uIChkMSwgZDIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHF1ZXJ5LmRvY0NvbXBhcmF0b3IoZDEsIGQyKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBkb2N1bWVudHMuZm9yRWFjaChmdW5jdGlvbiAoXywgbWF5YmVEb2MpIHtcclxuICAgICAgICAgICAgaWYgKG1heWJlRG9jIGluc3RhbmNlb2YgRG9jdW1lbnQgJiYgcXVlcnkubWF0Y2hlcyhtYXliZURvYykpIHtcclxuICAgICAgICAgICAgICAgIHF1ZXJ5UmVzdWx0cyA9IHF1ZXJ5UmVzdWx0cy5hZGQobWF5YmVEb2MpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHF1ZXJ5UmVzdWx0cztcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIERldGVybWluZXMgaWYgYSBsaW1pdCBxdWVyeSBuZWVkcyB0byBiZSByZWZpbGxlZCBmcm9tIGNhY2hlLCBtYWtpbmcgaXRcclxuICAgICAqIGluZWxpZ2libGUgZm9yIGluZGV4LWZyZWUgZXhlY3V0aW9uLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBzb3J0ZWRQcmV2aW91c1Jlc3VsdHMgVGhlIGRvY3VtZW50cyB0aGF0IG1hdGNoZWQgdGhlIHF1ZXJ5IHdoZW4gaXRcclxuICAgICAqIHdhcyBsYXN0IHN5bmNocm9uaXplZCwgc29ydGVkIGJ5IHRoZSBxdWVyeSdzIGNvbXBhcmF0b3IuXHJcbiAgICAgKiBAcGFyYW0gcmVtb3RlS2V5cyBUaGUgZG9jdW1lbnQga2V5cyB0aGF0IG1hdGNoZWQgdGhlIHF1ZXJ5IGF0IHRoZSBsYXN0XHJcbiAgICAgKiBzbmFwc2hvdC5cclxuICAgICAqIEBwYXJhbSBsaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24gVGhlIHZlcnNpb24gb2YgdGhlIHNuYXBzaG90IHdoZW4gdGhlIHF1ZXJ5XHJcbiAgICAgKiB3YXMgbGFzdCBzeW5jaHJvbml6ZWQuXHJcbiAgICAgKi9cclxuICAgIEluZGV4RnJlZVF1ZXJ5RW5naW5lLnByb3RvdHlwZS5uZWVkc1JlZmlsbCA9IGZ1bmN0aW9uIChsaW1pdFR5cGUsIHNvcnRlZFByZXZpb3VzUmVzdWx0cywgcmVtb3RlS2V5cywgbGltYm9GcmVlU25hcHNob3RWZXJzaW9uKSB7XHJcbiAgICAgICAgLy8gVGhlIHF1ZXJ5IG5lZWRzIHRvIGJlIHJlZmlsbGVkIGlmIGEgcHJldmlvdXNseSBtYXRjaGluZyBkb2N1bWVudCBub1xyXG4gICAgICAgIC8vIGxvbmdlciBtYXRjaGVzLlxyXG4gICAgICAgIGlmIChyZW1vdGVLZXlzLnNpemUgIT09IHNvcnRlZFByZXZpb3VzUmVzdWx0cy5zaXplKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBMaW1pdCBxdWVyaWVzIGFyZSBub3QgZWxpZ2libGUgZm9yIGluZGV4LWZyZWUgcXVlcnkgZXhlY3V0aW9uIGlmIHRoZXJlIGlzXHJcbiAgICAgICAgLy8gYSBwb3RlbnRpYWwgdGhhdCBhbiBvbGRlciBkb2N1bWVudCBmcm9tIGNhY2hlIG5vdyBzb3J0cyBiZWZvcmUgYSBkb2N1bWVudFxyXG4gICAgICAgIC8vIHRoYXQgd2FzIHByZXZpb3VzbHkgcGFydCBvZiB0aGUgbGltaXQuIFRoaXMsIGhvd2V2ZXIsIGNhbiBvbmx5IGhhcHBlbiBpZlxyXG4gICAgICAgIC8vIHRoZSBkb2N1bWVudCBhdCB0aGUgZWRnZSBvZiB0aGUgbGltaXQgZ29lcyBvdXQgb2YgbGltaXQuXHJcbiAgICAgICAgLy8gSWYgYSBkb2N1bWVudCB0aGF0IGlzIG5vdCB0aGUgbGltaXQgYm91bmRhcnkgc29ydHMgZGlmZmVyZW50bHksXHJcbiAgICAgICAgLy8gdGhlIGJvdW5kYXJ5IG9mIHRoZSBsaW1pdCBpdHNlbGYgZGlkIG5vdCBjaGFuZ2UgYW5kIGRvY3VtZW50cyBmcm9tIGNhY2hlXHJcbiAgICAgICAgLy8gd2lsbCBjb250aW51ZSB0byBiZSBcInJlamVjdGVkXCIgYnkgdGhpcyBib3VuZGFyeS4gVGhlcmVmb3JlLCB3ZSBjYW4gaWdub3JlXHJcbiAgICAgICAgLy8gYW55IG1vZGlmaWNhdGlvbnMgdGhhdCBkb24ndCBhZmZlY3QgdGhlIGxhc3QgZG9jdW1lbnQuXHJcbiAgICAgICAgdmFyIGRvY0F0TGltaXRFZGdlID0gbGltaXRUeXBlID09PSBMaW1pdFR5cGUuRmlyc3RcclxuICAgICAgICAgICAgPyBzb3J0ZWRQcmV2aW91c1Jlc3VsdHMubGFzdCgpXHJcbiAgICAgICAgICAgIDogc29ydGVkUHJldmlvdXNSZXN1bHRzLmZpcnN0KCk7XHJcbiAgICAgICAgaWYgKCFkb2NBdExpbWl0RWRnZSkge1xyXG4gICAgICAgICAgICAvLyBXZSBkb24ndCBuZWVkIHRvIHJlZmlsbCB0aGUgcXVlcnkgaWYgdGhlcmUgd2VyZSBhbHJlYWR5IG5vIGRvY3VtZW50cy5cclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gKGRvY0F0TGltaXRFZGdlLmhhc1BlbmRpbmdXcml0ZXMgfHxcclxuICAgICAgICAgICAgZG9jQXRMaW1pdEVkZ2UudmVyc2lvbi5jb21wYXJlVG8obGltYm9GcmVlU25hcHNob3RWZXJzaW9uKSA+IDApO1xyXG4gICAgfTtcclxuICAgIEluZGV4RnJlZVF1ZXJ5RW5naW5lLnByb3RvdHlwZS5leGVjdXRlRnVsbENvbGxlY3Rpb25TY2FuID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCBxdWVyeSkge1xyXG4gICAgICAgIGlmIChnZXRMb2dMZXZlbCgpIDw9IExvZ0xldmVsLkRFQlVHKSB7XHJcbiAgICAgICAgICAgIGRlYnVnKCdJbmRleEZyZWVRdWVyeUVuZ2luZScsICdVc2luZyBmdWxsIGNvbGxlY3Rpb24gc2NhbiB0byBleGVjdXRlIHF1ZXJ5OiAlcycsIHF1ZXJ5LnRvU3RyaW5nKCkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5sb2NhbERvY3VtZW50c1ZpZXcuZ2V0RG9jdW1lbnRzTWF0Y2hpbmdRdWVyeSh0cmFuc2FjdGlvbiwgcXVlcnksIFNuYXBzaG90VmVyc2lvbi5NSU4pO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBJbmRleEZyZWVRdWVyeUVuZ2luZTtcclxufSgpKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBBIHJlYWRvbmx5IHZpZXcgb2YgdGhlIGxvY2FsIHN0YXRlIG9mIGFsbCBkb2N1bWVudHMgd2UncmUgdHJhY2tpbmcgKGkuZS4gd2VcclxuICogaGF2ZSBhIGNhY2hlZCB2ZXJzaW9uIGluIHJlbW90ZURvY3VtZW50Q2FjaGUgb3IgbG9jYWwgbXV0YXRpb25zIGZvciB0aGVcclxuICogZG9jdW1lbnQpLiBUaGUgdmlldyBpcyBjb21wdXRlZCBieSBhcHBseWluZyB0aGUgbXV0YXRpb25zIGluIHRoZVxyXG4gKiBNdXRhdGlvblF1ZXVlIHRvIHRoZSBSZW1vdGVEb2N1bWVudENhY2hlLlxyXG4gKi9cclxudmFyIExvY2FsRG9jdW1lbnRzVmlldyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIExvY2FsRG9jdW1lbnRzVmlldyhyZW1vdGVEb2N1bWVudENhY2hlLCBtdXRhdGlvblF1ZXVlLCBpbmRleE1hbmFnZXIpIHtcclxuICAgICAgICB0aGlzLnJlbW90ZURvY3VtZW50Q2FjaGUgPSByZW1vdGVEb2N1bWVudENhY2hlO1xyXG4gICAgICAgIHRoaXMubXV0YXRpb25RdWV1ZSA9IG11dGF0aW9uUXVldWU7XHJcbiAgICAgICAgdGhpcy5pbmRleE1hbmFnZXIgPSBpbmRleE1hbmFnZXI7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEdldCB0aGUgbG9jYWwgdmlldyBvZiB0aGUgZG9jdW1lbnQgaWRlbnRpZmllZCBieSBga2V5YC5cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJuIExvY2FsIHZpZXcgb2YgdGhlIGRvY3VtZW50IG9yIG51bGwgaWYgd2UgZG9uJ3QgaGF2ZSBhbnkgY2FjaGVkXHJcbiAgICAgKiBzdGF0ZSBmb3IgaXQuXHJcbiAgICAgKi9cclxuICAgIExvY2FsRG9jdW1lbnRzVmlldy5wcm90b3R5cGUuZ2V0RG9jdW1lbnQgPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24sIGtleSkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubXV0YXRpb25RdWV1ZVxyXG4gICAgICAgICAgICAuZ2V0QWxsTXV0YXRpb25CYXRjaGVzQWZmZWN0aW5nRG9jdW1lbnRLZXkodHJhbnNhY3Rpb24sIGtleSlcclxuICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKGJhdGNoZXMpIHsgcmV0dXJuIF90aGlzLmdldERvY3VtZW50SW50ZXJuYWwodHJhbnNhY3Rpb24sIGtleSwgYmF0Y2hlcyk7IH0pO1xyXG4gICAgfTtcclxuICAgIC8qKiBJbnRlcm5hbCB2ZXJzaW9uIG9mIGBnZXREb2N1bWVudGAgdGhhdCBhbGxvd3MgcmV1c2luZyBiYXRjaGVzLiAqL1xyXG4gICAgTG9jYWxEb2N1bWVudHNWaWV3LnByb3RvdHlwZS5nZXREb2N1bWVudEludGVybmFsID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCBrZXksIGluQmF0Y2hlcykge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnJlbW90ZURvY3VtZW50Q2FjaGUuZ2V0RW50cnkodHJhbnNhY3Rpb24sIGtleSkubmV4dChmdW5jdGlvbiAoZG9jKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgaW5CYXRjaGVzXzEgPSBpbkJhdGNoZXM7IF9pIDwgaW5CYXRjaGVzXzEubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYmF0Y2ggPSBpbkJhdGNoZXNfMVtfaV07XHJcbiAgICAgICAgICAgICAgICBkb2MgPSBiYXRjaC5hcHBseVRvTG9jYWxWaWV3KGtleSwgZG9jKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gZG9jO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8vIFJldHVybnMgdGhlIHZpZXcgb2YgdGhlIGdpdmVuIGBkb2NzYCBhcyB0aGV5IHdvdWxkIGFwcGVhciBhZnRlciBhcHBseWluZ1xyXG4gICAgLy8gYWxsIG11dGF0aW9ucyBpbiB0aGUgZ2l2ZW4gYGJhdGNoZXNgLlxyXG4gICAgTG9jYWxEb2N1bWVudHNWaWV3LnByb3RvdHlwZS5hcHBseUxvY2FsTXV0YXRpb25zVG9Eb2N1bWVudHMgPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24sIGRvY3MsIGJhdGNoZXMpIHtcclxuICAgICAgICB2YXIgcmVzdWx0cyA9IG51bGxhYmxlTWF5YmVEb2N1bWVudE1hcCgpO1xyXG4gICAgICAgIGRvY3MuZm9yRWFjaChmdW5jdGlvbiAoa2V5LCBsb2NhbFZpZXcpIHtcclxuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBiYXRjaGVzXzEgPSBiYXRjaGVzOyBfaSA8IGJhdGNoZXNfMS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgICAgIHZhciBiYXRjaCA9IGJhdGNoZXNfMVtfaV07XHJcbiAgICAgICAgICAgICAgICBsb2NhbFZpZXcgPSBiYXRjaC5hcHBseVRvTG9jYWxWaWV3KGtleSwgbG9jYWxWaWV3KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXN1bHRzID0gcmVzdWx0cy5pbnNlcnQoa2V5LCBsb2NhbFZpZXcpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiByZXN1bHRzO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogR2V0cyB0aGUgbG9jYWwgdmlldyBvZiB0aGUgZG9jdW1lbnRzIGlkZW50aWZpZWQgYnkgYGtleXNgLlxyXG4gICAgICpcclxuICAgICAqIElmIHdlIGRvbid0IGhhdmUgY2FjaGVkIHN0YXRlIGZvciBhIGRvY3VtZW50IGluIGBrZXlzYCwgYSBOb0RvY3VtZW50IHdpbGxcclxuICAgICAqIGJlIHN0b3JlZCBmb3IgdGhhdCBrZXkgaW4gdGhlIHJlc3VsdGluZyBzZXQuXHJcbiAgICAgKi9cclxuICAgIExvY2FsRG9jdW1lbnRzVmlldy5wcm90b3R5cGUuZ2V0RG9jdW1lbnRzID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCBrZXlzKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICByZXR1cm4gdGhpcy5yZW1vdGVEb2N1bWVudENhY2hlXHJcbiAgICAgICAgICAgIC5nZXRFbnRyaWVzKHRyYW5zYWN0aW9uLCBrZXlzKVxyXG4gICAgICAgICAgICAubmV4dChmdW5jdGlvbiAoZG9jcykgeyByZXR1cm4gX3RoaXMuZ2V0TG9jYWxWaWV3T2ZEb2N1bWVudHModHJhbnNhY3Rpb24sIGRvY3MpOyB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFNpbWlsYXIgdG8gYGdldERvY3VtZW50c2AsIGJ1dCBjcmVhdGVzIHRoZSBsb2NhbCB2aWV3IGZyb20gdGhlIGdpdmVuXHJcbiAgICAgKiBgYmFzZURvY3NgIHdpdGhvdXQgcmV0cmlldmluZyBkb2N1bWVudHMgZnJvbSB0aGUgbG9jYWwgc3RvcmUuXHJcbiAgICAgKi9cclxuICAgIExvY2FsRG9jdW1lbnRzVmlldy5wcm90b3R5cGUuZ2V0TG9jYWxWaWV3T2ZEb2N1bWVudHMgPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24sIGJhc2VEb2NzKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICByZXR1cm4gdGhpcy5tdXRhdGlvblF1ZXVlXHJcbiAgICAgICAgICAgIC5nZXRBbGxNdXRhdGlvbkJhdGNoZXNBZmZlY3RpbmdEb2N1bWVudEtleXModHJhbnNhY3Rpb24sIGJhc2VEb2NzKVxyXG4gICAgICAgICAgICAubmV4dChmdW5jdGlvbiAoYmF0Y2hlcykge1xyXG4gICAgICAgICAgICB2YXIgZG9jcyA9IF90aGlzLmFwcGx5TG9jYWxNdXRhdGlvbnNUb0RvY3VtZW50cyh0cmFuc2FjdGlvbiwgYmFzZURvY3MsIGJhdGNoZXMpO1xyXG4gICAgICAgICAgICB2YXIgcmVzdWx0cyA9IG1heWJlRG9jdW1lbnRNYXAoKTtcclxuICAgICAgICAgICAgZG9jcy5mb3JFYWNoKGZ1bmN0aW9uIChrZXksIG1heWJlRG9jKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBUT0RPKGh0dHA6Ly9iLzMyMjc1Mzc4KTogRG9uJ3QgY29uZmxhdGUgbWlzc2luZyAvIGRlbGV0ZWQuXHJcbiAgICAgICAgICAgICAgICBpZiAoIW1heWJlRG9jKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWF5YmVEb2MgPSBuZXcgTm9Eb2N1bWVudChrZXksIFNuYXBzaG90VmVyc2lvbi5mb3JEZWxldGVkRG9jKCkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmVzdWx0cyA9IHJlc3VsdHMuaW5zZXJ0KGtleSwgbWF5YmVEb2MpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdHM7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBQZXJmb3JtcyBhIHF1ZXJ5IGFnYWluc3QgdGhlIGxvY2FsIHZpZXcgb2YgYWxsIGRvY3VtZW50cy5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gdHJhbnNhY3Rpb24gVGhlIHBlcnNpc3RlbmNlIHRyYW5zYWN0aW9uLlxyXG4gICAgICogQHBhcmFtIHF1ZXJ5IFRoZSBxdWVyeSB0byBtYXRjaCBkb2N1bWVudHMgYWdhaW5zdC5cclxuICAgICAqIEBwYXJhbSBzaW5jZVJlYWRUaW1lIElmIG5vdCBzZXQgdG8gU25hcHNob3RWZXJzaW9uLk1JTiwgcmV0dXJuIG9ubHlcclxuICAgICAqICAgICBkb2N1bWVudHMgdGhhdCBoYXZlIGJlZW4gcmVhZCBzaW5jZSB0aGlzIHNuYXBzaG90IHZlcnNpb24gKGV4Y2x1c2l2ZSkuXHJcbiAgICAgKi9cclxuICAgIExvY2FsRG9jdW1lbnRzVmlldy5wcm90b3R5cGUuZ2V0RG9jdW1lbnRzTWF0Y2hpbmdRdWVyeSA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwgcXVlcnksIHNpbmNlUmVhZFRpbWUpIHtcclxuICAgICAgICBpZiAocXVlcnkuaXNEb2N1bWVudFF1ZXJ5KCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0RG9jdW1lbnRzTWF0Y2hpbmdEb2N1bWVudFF1ZXJ5KHRyYW5zYWN0aW9uLCBxdWVyeS5wYXRoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAocXVlcnkuaXNDb2xsZWN0aW9uR3JvdXBRdWVyeSgpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldERvY3VtZW50c01hdGNoaW5nQ29sbGVjdGlvbkdyb3VwUXVlcnkodHJhbnNhY3Rpb24sIHF1ZXJ5LCBzaW5jZVJlYWRUaW1lKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldERvY3VtZW50c01hdGNoaW5nQ29sbGVjdGlvblF1ZXJ5KHRyYW5zYWN0aW9uLCBxdWVyeSwgc2luY2VSZWFkVGltZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIExvY2FsRG9jdW1lbnRzVmlldy5wcm90b3R5cGUuZ2V0RG9jdW1lbnRzTWF0Y2hpbmdEb2N1bWVudFF1ZXJ5ID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCBkb2NQYXRoKSB7XHJcbiAgICAgICAgLy8gSnVzdCBkbyBhIHNpbXBsZSBkb2N1bWVudCBsb29rdXAuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0RG9jdW1lbnQodHJhbnNhY3Rpb24sIG5ldyBEb2N1bWVudEtleShkb2NQYXRoKSkubmV4dChmdW5jdGlvbiAobWF5YmVEb2MpIHtcclxuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IGRvY3VtZW50TWFwKCk7XHJcbiAgICAgICAgICAgIGlmIChtYXliZURvYyBpbnN0YW5jZW9mIERvY3VtZW50KSB7XHJcbiAgICAgICAgICAgICAgICByZXN1bHQgPSByZXN1bHQuaW5zZXJ0KG1heWJlRG9jLmtleSwgbWF5YmVEb2MpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgTG9jYWxEb2N1bWVudHNWaWV3LnByb3RvdHlwZS5nZXREb2N1bWVudHNNYXRjaGluZ0NvbGxlY3Rpb25Hcm91cFF1ZXJ5ID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCBxdWVyeSwgc2luY2VSZWFkVGltZSkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgYXNzZXJ0KHF1ZXJ5LnBhdGguaXNFbXB0eSgpLCAnQ3VycmVudGx5IHdlIG9ubHkgc3VwcG9ydCBjb2xsZWN0aW9uIGdyb3VwIHF1ZXJpZXMgYXQgdGhlIHJvb3QuJyk7XHJcbiAgICAgICAgdmFyIGNvbGxlY3Rpb25JZCA9IHF1ZXJ5LmNvbGxlY3Rpb25Hcm91cDtcclxuICAgICAgICB2YXIgcmVzdWx0cyA9IGRvY3VtZW50TWFwKCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5kZXhNYW5hZ2VyXHJcbiAgICAgICAgICAgIC5nZXRDb2xsZWN0aW9uUGFyZW50cyh0cmFuc2FjdGlvbiwgY29sbGVjdGlvbklkKVxyXG4gICAgICAgICAgICAubmV4dChmdW5jdGlvbiAocGFyZW50cykge1xyXG4gICAgICAgICAgICAvLyBQZXJmb3JtIGEgY29sbGVjdGlvbiBxdWVyeSBhZ2FpbnN0IGVhY2ggcGFyZW50IHRoYXQgY29udGFpbnMgdGhlXHJcbiAgICAgICAgICAgIC8vIGNvbGxlY3Rpb25JZCBhbmQgYWdncmVnYXRlIHRoZSByZXN1bHRzLlxyXG4gICAgICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLmZvckVhY2gocGFyZW50cywgZnVuY3Rpb24gKHBhcmVudCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGNvbGxlY3Rpb25RdWVyeSA9IHF1ZXJ5LmFzQ29sbGVjdGlvblF1ZXJ5QXRQYXRoKHBhcmVudC5jaGlsZChjb2xsZWN0aW9uSWQpKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5nZXREb2N1bWVudHNNYXRjaGluZ0NvbGxlY3Rpb25RdWVyeSh0cmFuc2FjdGlvbiwgY29sbGVjdGlvblF1ZXJ5LCBzaW5jZVJlYWRUaW1lKS5uZXh0KGZ1bmN0aW9uIChyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgci5mb3JFYWNoKGZ1bmN0aW9uIChrZXksIGRvYykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRzID0gcmVzdWx0cy5pbnNlcnQoa2V5LCBkb2MpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pLm5leHQoZnVuY3Rpb24gKCkgeyByZXR1cm4gcmVzdWx0czsgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgTG9jYWxEb2N1bWVudHNWaWV3LnByb3RvdHlwZS5nZXREb2N1bWVudHNNYXRjaGluZ0NvbGxlY3Rpb25RdWVyeSA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwgcXVlcnksIHNpbmNlUmVhZFRpbWUpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIC8vIFF1ZXJ5IHRoZSByZW1vdGUgZG9jdW1lbnRzIGFuZCBvdmVybGF5IG11dGF0aW9ucy5cclxuICAgICAgICB2YXIgcmVzdWx0cztcclxuICAgICAgICB2YXIgbXV0YXRpb25CYXRjaGVzO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnJlbW90ZURvY3VtZW50Q2FjaGVcclxuICAgICAgICAgICAgLmdldERvY3VtZW50c01hdGNoaW5nUXVlcnkodHJhbnNhY3Rpb24sIHF1ZXJ5LCBzaW5jZVJlYWRUaW1lKVxyXG4gICAgICAgICAgICAubmV4dChmdW5jdGlvbiAocXVlcnlSZXN1bHRzKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdHMgPSBxdWVyeVJlc3VsdHM7XHJcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5tdXRhdGlvblF1ZXVlLmdldEFsbE11dGF0aW9uQmF0Y2hlc0FmZmVjdGluZ1F1ZXJ5KHRyYW5zYWN0aW9uLCBxdWVyeSk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKG1hdGNoaW5nTXV0YXRpb25CYXRjaGVzKSB7XHJcbiAgICAgICAgICAgIG11dGF0aW9uQmF0Y2hlcyA9IG1hdGNoaW5nTXV0YXRpb25CYXRjaGVzO1xyXG4gICAgICAgICAgICAvLyBJdCBpcyBwb3NzaWJsZSB0aGF0IGEgUGF0Y2hNdXRhdGlvbiBjYW4gbWFrZSBhIGRvY3VtZW50IG1hdGNoIGEgcXVlcnksIGV2ZW4gaWZcclxuICAgICAgICAgICAgLy8gdGhlIHZlcnNpb24gaW4gdGhlIFJlbW90ZURvY3VtZW50Q2FjaGUgaXMgbm90IGEgbWF0Y2ggeWV0ICh3YWl0aW5nIGZvciBzZXJ2ZXJcclxuICAgICAgICAgICAgLy8gdG8gYWNrKS4gVG8gaGFuZGxlIHRoaXMsIHdlIGZpbmQgYWxsIGRvY3VtZW50IGtleXMgYWZmZWN0ZWQgYnkgdGhlIFBhdGNoTXV0YXRpb25zXHJcbiAgICAgICAgICAgIC8vIHRoYXQgYXJlIG5vdCBpbiBgcmVzdWx0YCB5ZXQsIGFuZCBiYWNrIGZpbGwgdGhlbSB2aWEgYHJlbW90ZURvY3VtZW50Q2FjaGUuZ2V0RW50cmllc2AsXHJcbiAgICAgICAgICAgIC8vIG90aGVyd2lzZSB0aG9zZSBgUGF0Y2hNdXRhdGlvbnNgIHdpbGwgYmUgaWdub3JlZCBiZWNhdXNlIG5vIGJhc2UgZG9jdW1lbnQgY2FuIGJlIGZvdW5kLFxyXG4gICAgICAgICAgICAvLyBhbmQgbGVhZCB0byBtaXNzaW5nIHJlc3VsdCBmb3IgdGhlIHF1ZXJ5LlxyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXMuYWRkTWlzc2luZ0Jhc2VEb2N1bWVudHModHJhbnNhY3Rpb24sIG11dGF0aW9uQmF0Y2hlcywgcmVzdWx0cykubmV4dChmdW5jdGlvbiAobWVyZ2VkRG9jdW1lbnRzKSB7XHJcbiAgICAgICAgICAgICAgICByZXN1bHRzID0gbWVyZ2VkRG9jdW1lbnRzO1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBtdXRhdGlvbkJhdGNoZXNfMSA9IG11dGF0aW9uQmF0Y2hlczsgX2kgPCBtdXRhdGlvbkJhdGNoZXNfMS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgYmF0Y2ggPSBtdXRhdGlvbkJhdGNoZXNfMVtfaV07XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgX2EgPSAwLCBfYiA9IGJhdGNoLm11dGF0aW9uczsgX2EgPCBfYi5sZW5ndGg7IF9hKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG11dGF0aW9uID0gX2JbX2FdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIga2V5ID0gbXV0YXRpb24ua2V5O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYmFzZURvYyA9IHJlc3VsdHMuZ2V0KGtleSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtdXRhdGVkRG9jID0gbXV0YXRpb24uYXBwbHlUb0xvY2FsVmlldyhiYXNlRG9jLCBiYXNlRG9jLCBiYXRjaC5sb2NhbFdyaXRlVGltZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtdXRhdGVkRG9jIGluc3RhbmNlb2YgRG9jdW1lbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdHMgPSByZXN1bHRzLmluc2VydChrZXksIG11dGF0ZWREb2MpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0cyA9IHJlc3VsdHMucmVtb3ZlKGtleSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgLy8gRmluYWxseSwgZmlsdGVyIG91dCBhbnkgZG9jdW1lbnRzIHRoYXQgZG9uJ3QgYWN0dWFsbHkgbWF0Y2hcclxuICAgICAgICAgICAgLy8gdGhlIHF1ZXJ5LlxyXG4gICAgICAgICAgICByZXN1bHRzLmZvckVhY2goZnVuY3Rpb24gKGtleSwgZG9jKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXF1ZXJ5Lm1hdGNoZXMoZG9jKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdHMgPSByZXN1bHRzLnJlbW92ZShrZXkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdHM7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgTG9jYWxEb2N1bWVudHNWaWV3LnByb3RvdHlwZS5hZGRNaXNzaW5nQmFzZURvY3VtZW50cyA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwgbWF0Y2hpbmdNdXRhdGlvbkJhdGNoZXMsIGV4aXN0aW5nRG9jdW1lbnRzKSB7XHJcbiAgICAgICAgdmFyIG1pc3NpbmdCYXNlRG9jRW50cmllc0ZvclBhdGNoaW5nID0gZG9jdW1lbnRLZXlTZXQoKTtcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIG1hdGNoaW5nTXV0YXRpb25CYXRjaGVzXzEgPSBtYXRjaGluZ011dGF0aW9uQmF0Y2hlczsgX2kgPCBtYXRjaGluZ011dGF0aW9uQmF0Y2hlc18xLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICB2YXIgYmF0Y2ggPSBtYXRjaGluZ011dGF0aW9uQmF0Y2hlc18xW19pXTtcclxuICAgICAgICAgICAgZm9yICh2YXIgX2EgPSAwLCBfYiA9IGJhdGNoLm11dGF0aW9uczsgX2EgPCBfYi5sZW5ndGg7IF9hKyspIHtcclxuICAgICAgICAgICAgICAgIHZhciBtdXRhdGlvbiA9IF9iW19hXTtcclxuICAgICAgICAgICAgICAgIGlmIChtdXRhdGlvbiBpbnN0YW5jZW9mIFBhdGNoTXV0YXRpb24gJiZcclxuICAgICAgICAgICAgICAgICAgICBleGlzdGluZ0RvY3VtZW50cy5nZXQobXV0YXRpb24ua2V5KSA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG1pc3NpbmdCYXNlRG9jRW50cmllc0ZvclBhdGNoaW5nID0gbWlzc2luZ0Jhc2VEb2NFbnRyaWVzRm9yUGF0Y2hpbmcuYWRkKG11dGF0aW9uLmtleSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIG1lcmdlZERvY3VtZW50cyA9IGV4aXN0aW5nRG9jdW1lbnRzO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnJlbW90ZURvY3VtZW50Q2FjaGVcclxuICAgICAgICAgICAgLmdldEVudHJpZXModHJhbnNhY3Rpb24sIG1pc3NpbmdCYXNlRG9jRW50cmllc0ZvclBhdGNoaW5nKVxyXG4gICAgICAgICAgICAubmV4dChmdW5jdGlvbiAobWlzc2luZ0Jhc2VEb2NzKSB7XHJcbiAgICAgICAgICAgIG1pc3NpbmdCYXNlRG9jcy5mb3JFYWNoKGZ1bmN0aW9uIChrZXksIGRvYykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGRvYyAhPT0gbnVsbCAmJiBkb2MgaW5zdGFuY2VvZiBEb2N1bWVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG1lcmdlZERvY3VtZW50cyA9IG1lcmdlZERvY3VtZW50cy5pbnNlcnQoa2V5LCBkb2MpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIG1lcmdlZERvY3VtZW50cztcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gTG9jYWxEb2N1bWVudHNWaWV3O1xyXG59KCkpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEEgY29sbGVjdGlvbiBvZiByZWZlcmVuY2VzIHRvIGEgZG9jdW1lbnQgZnJvbSBzb21lIGtpbmQgb2YgbnVtYmVyZWQgZW50aXR5XHJcbiAqIChlaXRoZXIgYSB0YXJnZXQgSUQgb3IgYmF0Y2ggSUQpLiBBcyByZWZlcmVuY2VzIGFyZSBhZGRlZCB0byBvciByZW1vdmVkIGZyb21cclxuICogdGhlIHNldCBjb3JyZXNwb25kaW5nIGV2ZW50cyBhcmUgZW1pdHRlZCB0byBhIHJlZ2lzdGVyZWQgZ2FyYmFnZSBjb2xsZWN0b3IuXHJcbiAqXHJcbiAqIEVhY2ggcmVmZXJlbmNlIGlzIHJlcHJlc2VudGVkIGJ5IGEgRG9jdW1lbnRSZWZlcmVuY2Ugb2JqZWN0LiBFYWNoIG9mIHRoZW1cclxuICogY29udGFpbnMgZW5vdWdoIGluZm9ybWF0aW9uIHRvIHVuaXF1ZWx5IGlkZW50aWZ5IHRoZSByZWZlcmVuY2UuIFRoZXkgYXJlIGFsbFxyXG4gKiBzdG9yZWQgcHJpbWFyaWx5IGluIGEgc2V0IHNvcnRlZCBieSBrZXkuIEEgZG9jdW1lbnQgaXMgY29uc2lkZXJlZCBnYXJiYWdlIGlmXHJcbiAqIHRoZXJlJ3Mgbm8gcmVmZXJlbmNlcyBpbiB0aGF0IHNldCAodGhpcyBjYW4gYmUgZWZmaWNpZW50bHkgY2hlY2tlZCB0aGFua3MgdG9cclxuICogc29ydGluZyBieSBrZXkpLlxyXG4gKlxyXG4gKiBSZWZlcmVuY2VTZXQgYWxzbyBrZWVwcyBhIHNlY29uZGFyeSBzZXQgdGhhdCBjb250YWlucyByZWZlcmVuY2VzIHNvcnRlZCBieVxyXG4gKiBJRHMuIFRoaXMgb25lIGlzIHVzZWQgdG8gZWZmaWNpZW50bHkgaW1wbGVtZW50IHJlbW92YWwgb2YgYWxsIHJlZmVyZW5jZXMgYnlcclxuICogc29tZSB0YXJnZXQgSUQuXHJcbiAqL1xyXG52YXIgUmVmZXJlbmNlU2V0ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gUmVmZXJlbmNlU2V0KCkge1xyXG4gICAgICAgIC8vIEEgc2V0IG9mIG91dHN0YW5kaW5nIHJlZmVyZW5jZXMgdG8gYSBkb2N1bWVudCBzb3J0ZWQgYnkga2V5LlxyXG4gICAgICAgIHRoaXMucmVmc0J5S2V5ID0gbmV3IFNvcnRlZFNldChEb2NSZWZlcmVuY2UuY29tcGFyZUJ5S2V5KTtcclxuICAgICAgICAvLyBBIHNldCBvZiBvdXRzdGFuZGluZyByZWZlcmVuY2VzIHRvIGEgZG9jdW1lbnQgc29ydGVkIGJ5IHRhcmdldCBpZC5cclxuICAgICAgICB0aGlzLnJlZnNCeVRhcmdldCA9IG5ldyBTb3J0ZWRTZXQoRG9jUmVmZXJlbmNlLmNvbXBhcmVCeVRhcmdldElkKTtcclxuICAgIH1cclxuICAgIC8qKiBSZXR1cm5zIHRydWUgaWYgdGhlIHJlZmVyZW5jZSBzZXQgY29udGFpbnMgbm8gcmVmZXJlbmNlcy4gKi9cclxuICAgIFJlZmVyZW5jZVNldC5wcm90b3R5cGUuaXNFbXB0eSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5yZWZzQnlLZXkuaXNFbXB0eSgpO1xyXG4gICAgfTtcclxuICAgIC8qKiBBZGRzIGEgcmVmZXJlbmNlIHRvIHRoZSBnaXZlbiBkb2N1bWVudCBrZXkgZm9yIHRoZSBnaXZlbiBJRC4gKi9cclxuICAgIFJlZmVyZW5jZVNldC5wcm90b3R5cGUuYWRkUmVmZXJlbmNlID0gZnVuY3Rpb24gKGtleSwgaWQpIHtcclxuICAgICAgICB2YXIgcmVmID0gbmV3IERvY1JlZmVyZW5jZShrZXksIGlkKTtcclxuICAgICAgICB0aGlzLnJlZnNCeUtleSA9IHRoaXMucmVmc0J5S2V5LmFkZChyZWYpO1xyXG4gICAgICAgIHRoaXMucmVmc0J5VGFyZ2V0ID0gdGhpcy5yZWZzQnlUYXJnZXQuYWRkKHJlZik7XHJcbiAgICB9O1xyXG4gICAgLyoqIEFkZCByZWZlcmVuY2VzIHRvIHRoZSBnaXZlbiBkb2N1bWVudCBrZXlzIGZvciB0aGUgZ2l2ZW4gSUQuICovXHJcbiAgICBSZWZlcmVuY2VTZXQucHJvdG90eXBlLmFkZFJlZmVyZW5jZXMgPSBmdW5jdGlvbiAoa2V5cywgaWQpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIGtleXMuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IHJldHVybiBfdGhpcy5hZGRSZWZlcmVuY2Uoa2V5LCBpZCk7IH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmVtb3ZlcyBhIHJlZmVyZW5jZSB0byB0aGUgZ2l2ZW4gZG9jdW1lbnQga2V5IGZvciB0aGUgZ2l2ZW5cclxuICAgICAqIElELlxyXG4gICAgICovXHJcbiAgICBSZWZlcmVuY2VTZXQucHJvdG90eXBlLnJlbW92ZVJlZmVyZW5jZSA9IGZ1bmN0aW9uIChrZXksIGlkKSB7XHJcbiAgICAgICAgdGhpcy5yZW1vdmVSZWYobmV3IERvY1JlZmVyZW5jZShrZXksIGlkKSk7XHJcbiAgICB9O1xyXG4gICAgUmVmZXJlbmNlU2V0LnByb3RvdHlwZS5yZW1vdmVSZWZlcmVuY2VzID0gZnVuY3Rpb24gKGtleXMsIGlkKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBrZXlzLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyByZXR1cm4gX3RoaXMucmVtb3ZlUmVmZXJlbmNlKGtleSwgaWQpOyB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIENsZWFycyBhbGwgcmVmZXJlbmNlcyB3aXRoIGEgZ2l2ZW4gSUQuIENhbGxzIHJlbW92ZVJlZigpIGZvciBlYWNoIGtleVxyXG4gICAgICogcmVtb3ZlZC5cclxuICAgICAqL1xyXG4gICAgUmVmZXJlbmNlU2V0LnByb3RvdHlwZS5yZW1vdmVSZWZlcmVuY2VzRm9ySWQgPSBmdW5jdGlvbiAoaWQpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhciBlbXB0eUtleSA9IERvY3VtZW50S2V5LkVNUFRZO1xyXG4gICAgICAgIHZhciBzdGFydFJlZiA9IG5ldyBEb2NSZWZlcmVuY2UoZW1wdHlLZXksIGlkKTtcclxuICAgICAgICB2YXIgZW5kUmVmID0gbmV3IERvY1JlZmVyZW5jZShlbXB0eUtleSwgaWQgKyAxKTtcclxuICAgICAgICB2YXIga2V5cyA9IFtdO1xyXG4gICAgICAgIHRoaXMucmVmc0J5VGFyZ2V0LmZvckVhY2hJblJhbmdlKFtzdGFydFJlZiwgZW5kUmVmXSwgZnVuY3Rpb24gKHJlZikge1xyXG4gICAgICAgICAgICBfdGhpcy5yZW1vdmVSZWYocmVmKTtcclxuICAgICAgICAgICAga2V5cy5wdXNoKHJlZi5rZXkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBrZXlzO1xyXG4gICAgfTtcclxuICAgIFJlZmVyZW5jZVNldC5wcm90b3R5cGUucmVtb3ZlQWxsUmVmZXJlbmNlcyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMucmVmc0J5S2V5LmZvckVhY2goZnVuY3Rpb24gKHJlZikgeyByZXR1cm4gX3RoaXMucmVtb3ZlUmVmKHJlZik7IH0pO1xyXG4gICAgfTtcclxuICAgIFJlZmVyZW5jZVNldC5wcm90b3R5cGUucmVtb3ZlUmVmID0gZnVuY3Rpb24gKHJlZikge1xyXG4gICAgICAgIHRoaXMucmVmc0J5S2V5ID0gdGhpcy5yZWZzQnlLZXkuZGVsZXRlKHJlZik7XHJcbiAgICAgICAgdGhpcy5yZWZzQnlUYXJnZXQgPSB0aGlzLnJlZnNCeVRhcmdldC5kZWxldGUocmVmKTtcclxuICAgIH07XHJcbiAgICBSZWZlcmVuY2VTZXQucHJvdG90eXBlLnJlZmVyZW5jZXNGb3JJZCA9IGZ1bmN0aW9uIChpZCkge1xyXG4gICAgICAgIHZhciBlbXB0eUtleSA9IERvY3VtZW50S2V5LkVNUFRZO1xyXG4gICAgICAgIHZhciBzdGFydFJlZiA9IG5ldyBEb2NSZWZlcmVuY2UoZW1wdHlLZXksIGlkKTtcclxuICAgICAgICB2YXIgZW5kUmVmID0gbmV3IERvY1JlZmVyZW5jZShlbXB0eUtleSwgaWQgKyAxKTtcclxuICAgICAgICB2YXIga2V5cyA9IGRvY3VtZW50S2V5U2V0KCk7XHJcbiAgICAgICAgdGhpcy5yZWZzQnlUYXJnZXQuZm9yRWFjaEluUmFuZ2UoW3N0YXJ0UmVmLCBlbmRSZWZdLCBmdW5jdGlvbiAocmVmKSB7XHJcbiAgICAgICAgICAgIGtleXMgPSBrZXlzLmFkZChyZWYua2V5KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4ga2V5cztcclxuICAgIH07XHJcbiAgICBSZWZlcmVuY2VTZXQucHJvdG90eXBlLmNvbnRhaW5zS2V5ID0gZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgIHZhciByZWYgPSBuZXcgRG9jUmVmZXJlbmNlKGtleSwgMCk7XHJcbiAgICAgICAgdmFyIGZpcnN0UmVmID0gdGhpcy5yZWZzQnlLZXkuZmlyc3RBZnRlck9yRXF1YWwocmVmKTtcclxuICAgICAgICByZXR1cm4gZmlyc3RSZWYgIT09IG51bGwgJiYga2V5LmlzRXF1YWwoZmlyc3RSZWYua2V5KTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gUmVmZXJlbmNlU2V0O1xyXG59KCkpO1xyXG52YXIgRG9jUmVmZXJlbmNlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gRG9jUmVmZXJlbmNlKGtleSwgdGFyZ2V0T3JCYXRjaElkKSB7XHJcbiAgICAgICAgdGhpcy5rZXkgPSBrZXk7XHJcbiAgICAgICAgdGhpcy50YXJnZXRPckJhdGNoSWQgPSB0YXJnZXRPckJhdGNoSWQ7XHJcbiAgICB9XHJcbiAgICAvKiogQ29tcGFyZSBieSBrZXkgdGhlbiBieSBJRCAqL1xyXG4gICAgRG9jUmVmZXJlbmNlLmNvbXBhcmVCeUtleSA9IGZ1bmN0aW9uIChsZWZ0LCByaWdodCkge1xyXG4gICAgICAgIHJldHVybiAoRG9jdW1lbnRLZXkuY29tcGFyYXRvcihsZWZ0LmtleSwgcmlnaHQua2V5KSB8fFxyXG4gICAgICAgICAgICBwcmltaXRpdmVDb21wYXJhdG9yKGxlZnQudGFyZ2V0T3JCYXRjaElkLCByaWdodC50YXJnZXRPckJhdGNoSWQpKTtcclxuICAgIH07XHJcbiAgICAvKiogQ29tcGFyZSBieSBJRCB0aGVuIGJ5IGtleSAqL1xyXG4gICAgRG9jUmVmZXJlbmNlLmNvbXBhcmVCeVRhcmdldElkID0gZnVuY3Rpb24gKGxlZnQsIHJpZ2h0KSB7XHJcbiAgICAgICAgcmV0dXJuIChwcmltaXRpdmVDb21wYXJhdG9yKGxlZnQudGFyZ2V0T3JCYXRjaElkLCByaWdodC50YXJnZXRPckJhdGNoSWQpIHx8XHJcbiAgICAgICAgICAgIERvY3VtZW50S2V5LmNvbXBhcmF0b3IobGVmdC5rZXksIHJpZ2h0LmtleSkpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBEb2NSZWZlcmVuY2U7XHJcbn0oKSk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG52YXIgTE9HX1RBRyQyID0gJ0xvY2FsU3RvcmUnO1xyXG4vKipcclxuICogTG9jYWwgc3RvcmFnZSBpbiB0aGUgRmlyZXN0b3JlIGNsaWVudC4gQ29vcmRpbmF0ZXMgcGVyc2lzdGVuY2UgY29tcG9uZW50c1xyXG4gKiBsaWtlIHRoZSBtdXRhdGlvbiBxdWV1ZSBhbmQgcmVtb3RlIGRvY3VtZW50IGNhY2hlIHRvIHByZXNlbnQgYVxyXG4gKiBsYXRlbmN5LWNvbXBlbnNhdGVkIHZpZXcgb2Ygc3RvcmVkIGRhdGEuXHJcbiAqXHJcbiAqIFRoZSBMb2NhbFN0b3JlIGlzIHJlc3BvbnNpYmxlIGZvciBhY2NlcHRpbmcgbXV0YXRpb25zIGZyb20gdGhlIFN5bmMgRW5naW5lLlxyXG4gKiBXcml0ZXMgZnJvbSB0aGUgY2xpZW50IGFyZSBwdXQgaW50byBhIHF1ZXVlIGFzIHByb3Zpc2lvbmFsIE11dGF0aW9ucyB1bnRpbFxyXG4gKiB0aGV5IGFyZSBwcm9jZXNzZWQgYnkgdGhlIFJlbW90ZVN0b3JlIGFuZCBjb25maXJtZWQgYXMgaGF2aW5nIGJlZW4gd3JpdHRlblxyXG4gKiB0byB0aGUgc2VydmVyLlxyXG4gKlxyXG4gKiBUaGUgbG9jYWwgc3RvcmUgcHJvdmlkZXMgdGhlIGxvY2FsIHZlcnNpb24gb2YgZG9jdW1lbnRzIHRoYXQgaGF2ZSBiZWVuXHJcbiAqIG1vZGlmaWVkIGxvY2FsbHkuIEl0IG1haW50YWlucyB0aGUgY29uc3RyYWludDpcclxuICpcclxuICogICBMb2NhbERvY3VtZW50ID0gUmVtb3RlRG9jdW1lbnQgKyBBY3RpdmUoTG9jYWxNdXRhdGlvbnMpXHJcbiAqXHJcbiAqIChBY3RpdmUgbXV0YXRpb25zIGFyZSB0aG9zZSB0aGF0IGFyZSBlbnF1ZXVlZCBhbmQgaGF2ZSBub3QgYmVlbiBwcmV2aW91c2x5XHJcbiAqIGFja25vd2xlZGdlZCBvciByZWplY3RlZCkuXHJcbiAqXHJcbiAqIFRoZSBSZW1vdGVEb2N1bWVudCAoXCJncm91bmQgdHJ1dGhcIikgc3RhdGUgaXMgcHJvdmlkZWQgdmlhIHRoZVxyXG4gKiBhcHBseUNoYW5nZUJhdGNoIG1ldGhvZC4gSXQgd2lsbCBiZSBzb21lIHZlcnNpb24gb2YgYSBzZXJ2ZXItcHJvdmlkZWRcclxuICogZG9jdW1lbnQgT1Igd2lsbCBiZSBhIHNlcnZlci1wcm92aWRlZCBkb2N1bWVudCBQTFVTIGFja25vd2xlZGdlZCBtdXRhdGlvbnM6XHJcbiAqXHJcbiAqICAgUmVtb3RlRG9jdW1lbnQnID0gUmVtb3RlRG9jdW1lbnQgKyBBY2tub3dsZWRnZWQoTG9jYWxNdXRhdGlvbnMpXHJcbiAqXHJcbiAqIE5vdGUgdGhhdCB0aGlzIFwiZGlydHlcIiB2ZXJzaW9uIG9mIGEgUmVtb3RlRG9jdW1lbnQgd2lsbCBub3QgYmUgaWRlbnRpY2FsIHRvIGFcclxuICogc2VydmVyIGJhc2UgdmVyc2lvbiwgc2luY2UgaXQgaGFzIExvY2FsTXV0YXRpb25zIGFkZGVkIHRvIGl0IHBlbmRpbmcgZ2V0dGluZ1xyXG4gKiBhbiBhdXRob3JpdGF0aXZlIGNvcHkgZnJvbSB0aGUgc2VydmVyLlxyXG4gKlxyXG4gKiBTaW5jZSBMb2NhbE11dGF0aW9ucyBjYW4gYmUgcmVqZWN0ZWQgYnkgdGhlIHNlcnZlciwgd2UgaGF2ZSB0byBiZSBhYmxlIHRvXHJcbiAqIHJldmVydCBhIExvY2FsTXV0YXRpb24gdGhhdCBoYXMgYWxyZWFkeSBiZWVuIGFwcGxpZWQgdG8gdGhlIExvY2FsRG9jdW1lbnRcclxuICogKHR5cGljYWxseSBkb25lIGJ5IHJlcGxheWluZyBhbGwgcmVtYWluaW5nIExvY2FsTXV0YXRpb25zIHRvIHRoZVxyXG4gKiBSZW1vdGVEb2N1bWVudCB0byByZS1hcHBseSkuXHJcbiAqXHJcbiAqIFRoZSBMb2NhbFN0b3JlIGlzIHJlc3BvbnNpYmxlIGZvciB0aGUgZ2FyYmFnZSBjb2xsZWN0aW9uIG9mIHRoZSBkb2N1bWVudHMgaXRcclxuICogY29udGFpbnMuIEZvciBub3csIGl0IGV2ZXJ5IGRvYyByZWZlcmVuY2VkIGJ5IGEgdmlldywgdGhlIG11dGF0aW9uIHF1ZXVlLCBvclxyXG4gKiB0aGUgUmVtb3RlU3RvcmUuXHJcbiAqXHJcbiAqIEl0IGFsc28gbWFpbnRhaW5zIHRoZSBwZXJzaXN0ZW5jZSBvZiBtYXBwaW5nIHF1ZXJpZXMgdG8gcmVzdW1lIHRva2VucyBhbmRcclxuICogdGFyZ2V0IGlkcy4gSXQgbmVlZHMgdG8ga25vdyB0aGlzIGRhdGEgYWJvdXQgcXVlcmllcyB0byBwcm9wZXJseSBrbm93IHdoYXRcclxuICogZG9jcyBpdCB3b3VsZCBiZSBhbGxvd2VkIHRvIGdhcmJhZ2UgY29sbGVjdC5cclxuICpcclxuICogVGhlIExvY2FsU3RvcmUgbXVzdCBiZSBhYmxlIHRvIGVmZmljaWVudGx5IGV4ZWN1dGUgcXVlcmllcyBhZ2FpbnN0IGl0cyBsb2NhbFxyXG4gKiBjYWNoZSBvZiB0aGUgZG9jdW1lbnRzLCB0byBwcm92aWRlIHRoZSBpbml0aWFsIHNldCBvZiByZXN1bHRzIGJlZm9yZSBhbnlcclxuICogcmVtb3RlIGNoYW5nZXMgaGF2ZSBiZWVuIHJlY2VpdmVkLlxyXG4gKlxyXG4gKiBOb3RlOiBJbiBUeXBlU2NyaXB0LCBtb3N0IG1ldGhvZHMgcmV0dXJuIFByb21pc2VzIHNpbmNlIHRoZSBpbXBsZW1lbnRhdGlvblxyXG4gKiBtYXkgcmVseSBvbiBmZXRjaGluZyBkYXRhIGZyb20gSW5kZXhlZERCIHdoaWNoIGlzIGFzeW5jLlxyXG4gKiBUaGVzZSBQcm9taXNlcyB3aWxsIG9ubHkgYmUgcmVqZWN0ZWQgb24gYW4gSS9PIGVycm9yIG9yIG90aGVyIGludGVybmFsXHJcbiAqICh1bmV4cGVjdGVkKSBmYWlsdXJlIChlLmcuIGZhaWxlZCBhc3NlcnQpIGFuZCBhbHdheXMgcmVwcmVzZW50IGFuXHJcbiAqIHVucmVjb3ZlcmFibGUgZXJyb3IgKHNob3VsZCBiZSBjYXVnaHQgLyByZXBvcnRlZCBieSB0aGUgYXN5bmNfcXVldWUpLlxyXG4gKi9cclxudmFyIExvY2FsU3RvcmUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBMb2NhbFN0b3JlKFxyXG4gICAgLyoqIE1hbmFnZXMgb3VyIGluLW1lbW9yeSBvciBkdXJhYmxlIHBlcnNpc3RlbmNlLiAqL1xyXG4gICAgcGVyc2lzdGVuY2UsIHF1ZXJ5RW5naW5lLCBpbml0aWFsVXNlcikge1xyXG4gICAgICAgIHRoaXMucGVyc2lzdGVuY2UgPSBwZXJzaXN0ZW5jZTtcclxuICAgICAgICB0aGlzLnF1ZXJ5RW5naW5lID0gcXVlcnlFbmdpbmU7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVGhlIHNldCBvZiBkb2N1bWVudCByZWZlcmVuY2VzIG1haW50YWluZWQgYnkgYW55IGxvY2FsIHZpZXdzLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMubG9jYWxWaWV3UmVmZXJlbmNlcyA9IG5ldyBSZWZlcmVuY2VTZXQoKTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBNYXBzIGEgdGFyZ2V0SUQgdG8gZGF0YSBhYm91dCBpdHMgdGFyZ2V0LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogUE9SVElORyBOT1RFOiBXZSBhcmUgdXNpbmcgYW4gaW1tdXRhYmxlIGRhdGEgc3RydWN0dXJlIG9uIFdlYiB0byBtYWtlIHJlLXJ1bnNcclxuICAgICAgICAgKiBvZiBgYXBwbHlSZW1vdGVFdmVudCgpYCBpZGVtcG90ZW50LlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMudGFyZ2V0RGF0YUJ5VGFyZ2V0ID0gbmV3IFNvcnRlZE1hcChwcmltaXRpdmVDb21wYXJhdG9yKTtcclxuICAgICAgICAvKiogTWFwcyBhIHRhcmdldCB0byBpdHMgdGFyZ2V0SUQuICovXHJcbiAgICAgICAgLy8gVE9ETyh3dWFuZHkpOiBFdmFsdWF0ZSBpZiBUYXJnZXRJZCBjYW4gYmUgcGFydCBvZiBUYXJnZXQuXHJcbiAgICAgICAgdGhpcy50YXJnZXRJZEJ5VGFyZ2V0ID0gbmV3IE9iamVjdE1hcChmdW5jdGlvbiAodCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdC5jYW5vbmljYWxJZCgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRoZSByZWFkIHRpbWUgb2YgdGhlIGxhc3QgZW50cnkgcHJvY2Vzc2VkIGJ5IGBnZXROZXdEb2N1bWVudENoYW5nZXMoKWAuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBQT1JUSU5HIE5PVEU6IFRoaXMgaXMgb25seSB1c2VkIGZvciBtdWx0aS10YWIgc3luY2hyb25pemF0aW9uLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMubGFzdERvY3VtZW50Q2hhbmdlUmVhZFRpbWUgPSBTbmFwc2hvdFZlcnNpb24uTUlOO1xyXG4gICAgICAgIGFzc2VydChwZXJzaXN0ZW5jZS5zdGFydGVkLCAnTG9jYWxTdG9yZSB3YXMgcGFzc2VkIGFuIHVuc3RhcnRlZCBwZXJzaXN0ZW5jZSBpbXBsZW1lbnRhdGlvbicpO1xyXG4gICAgICAgIHRoaXMucGVyc2lzdGVuY2UucmVmZXJlbmNlRGVsZWdhdGUuc2V0SW5NZW1vcnlQaW5zKHRoaXMubG9jYWxWaWV3UmVmZXJlbmNlcyk7XHJcbiAgICAgICAgdGhpcy5tdXRhdGlvblF1ZXVlID0gcGVyc2lzdGVuY2UuZ2V0TXV0YXRpb25RdWV1ZShpbml0aWFsVXNlcik7XHJcbiAgICAgICAgdGhpcy5yZW1vdGVEb2N1bWVudHMgPSBwZXJzaXN0ZW5jZS5nZXRSZW1vdGVEb2N1bWVudENhY2hlKCk7XHJcbiAgICAgICAgdGhpcy50YXJnZXRDYWNoZSA9IHBlcnNpc3RlbmNlLmdldFRhcmdldENhY2hlKCk7XHJcbiAgICAgICAgdGhpcy5sb2NhbERvY3VtZW50cyA9IG5ldyBMb2NhbERvY3VtZW50c1ZpZXcodGhpcy5yZW1vdGVEb2N1bWVudHMsIHRoaXMubXV0YXRpb25RdWV1ZSwgdGhpcy5wZXJzaXN0ZW5jZS5nZXRJbmRleE1hbmFnZXIoKSk7XHJcbiAgICAgICAgdGhpcy5xdWVyeUVuZ2luZS5zZXRMb2NhbERvY3VtZW50c1ZpZXcodGhpcy5sb2NhbERvY3VtZW50cyk7XHJcbiAgICB9XHJcbiAgICAvKiogU3RhcnRzIHRoZSBMb2NhbFN0b3JlLiAqL1xyXG4gICAgTG9jYWxTdG9yZS5wcm90b3R5cGUuc3RhcnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc3luY2hyb25pemVMYXN0RG9jdW1lbnRDaGFuZ2VSZWFkVGltZSgpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogVGVsbHMgdGhlIExvY2FsU3RvcmUgdGhhdCB0aGUgY3VycmVudGx5IGF1dGhlbnRpY2F0ZWQgdXNlciBoYXMgY2hhbmdlZC5cclxuICAgICAqXHJcbiAgICAgKiBJbiByZXNwb25zZSB0aGUgbG9jYWwgc3RvcmUgc3dpdGNoZXMgdGhlIG11dGF0aW9uIHF1ZXVlIHRvIHRoZSBuZXcgdXNlciBhbmRcclxuICAgICAqIHJldHVybnMgYW55IHJlc3VsdGluZyBkb2N1bWVudCBjaGFuZ2VzLlxyXG4gICAgICovXHJcbiAgICAvLyBQT1JUSU5HIE5PVEU6IEFuZHJvaWQgYW5kIGlPUyBvbmx5IHJldHVybiB0aGUgZG9jdW1lbnRzIGFmZmVjdGVkIGJ5IHRoZVxyXG4gICAgLy8gY2hhbmdlLlxyXG4gICAgTG9jYWxTdG9yZS5wcm90b3R5cGUuaGFuZGxlVXNlckNoYW5nZSA9IGZ1bmN0aW9uICh1c2VyKSB7XHJcbiAgICAgICAgcmV0dXJuIHRzbGliLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgbmV3TXV0YXRpb25RdWV1ZSwgbmV3TG9jYWxEb2N1bWVudHMsIHJlc3VsdDtcclxuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3TXV0YXRpb25RdWV1ZSA9IHRoaXMubXV0YXRpb25RdWV1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3TG9jYWxEb2N1bWVudHMgPSB0aGlzLmxvY2FsRG9jdW1lbnRzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKCdIYW5kbGUgdXNlciBjaGFuZ2UnLCAncmVhZG9ubHktaWRlbXBvdGVudCcsIGZ1bmN0aW9uICh0eG4pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTd2FwIG91dCB0aGUgbXV0YXRpb24gcXVldWUsIGdyYWJiaW5nIHRoZSBwZW5kaW5nIG11dGF0aW9uIGJhdGNoZXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBiZWZvcmUgYW5kIGFmdGVyLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvbGRCYXRjaGVzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5tdXRhdGlvblF1ZXVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5nZXRBbGxNdXRhdGlvbkJhdGNoZXModHhuKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubmV4dChmdW5jdGlvbiAocHJvbWlzZWRPbGRCYXRjaGVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9sZEJhdGNoZXMgPSBwcm9taXNlZE9sZEJhdGNoZXM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld011dGF0aW9uUXVldWUgPSBfdGhpcy5wZXJzaXN0ZW5jZS5nZXRNdXRhdGlvblF1ZXVlKHVzZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBSZWNyZWF0ZSBvdXIgTG9jYWxEb2N1bWVudHNWaWV3IHVzaW5nIHRoZSBuZXdcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTXV0YXRpb25RdWV1ZS5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3TG9jYWxEb2N1bWVudHMgPSBuZXcgTG9jYWxEb2N1bWVudHNWaWV3KF90aGlzLnJlbW90ZURvY3VtZW50cywgbmV3TXV0YXRpb25RdWV1ZSwgX3RoaXMucGVyc2lzdGVuY2UuZ2V0SW5kZXhNYW5hZ2VyKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3TXV0YXRpb25RdWV1ZS5nZXRBbGxNdXRhdGlvbkJhdGNoZXModHhuKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubmV4dChmdW5jdGlvbiAobmV3QmF0Y2hlcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVtb3ZlZEJhdGNoSWRzID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhZGRlZEJhdGNoSWRzID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFVuaW9uIHRoZSBvbGQvbmV3IGNoYW5nZWQga2V5cy5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNoYW5nZWRLZXlzID0gZG9jdW1lbnRLZXlTZXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBvbGRCYXRjaGVzXzEgPSBvbGRCYXRjaGVzOyBfaSA8IG9sZEJhdGNoZXNfMS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBiYXRjaCA9IG9sZEJhdGNoZXNfMVtfaV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW1vdmVkQmF0Y2hJZHMucHVzaChiYXRjaC5iYXRjaElkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIF9hID0gMCwgX2IgPSBiYXRjaC5tdXRhdGlvbnM7IF9hIDwgX2IubGVuZ3RoOyBfYSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG11dGF0aW9uID0gX2JbX2FdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZWRLZXlzID0gY2hhbmdlZEtleXMuYWRkKG11dGF0aW9uLmtleSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgX2MgPSAwLCBuZXdCYXRjaGVzXzEgPSBuZXdCYXRjaGVzOyBfYyA8IG5ld0JhdGNoZXNfMS5sZW5ndGg7IF9jKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBiYXRjaCA9IG5ld0JhdGNoZXNfMVtfY107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGRlZEJhdGNoSWRzLnB1c2goYmF0Y2guYmF0Y2hJZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBfZCA9IDAsIF9lID0gYmF0Y2gubXV0YXRpb25zOyBfZCA8IF9lLmxlbmd0aDsgX2QrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtdXRhdGlvbiA9IF9lW19kXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VkS2V5cyA9IGNoYW5nZWRLZXlzLmFkZChtdXRhdGlvbi5rZXkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJldHVybiB0aGUgc2V0IG9mIGFsbCAocG90ZW50aWFsbHkpIGNoYW5nZWQgZG9jdW1lbnRzIGFuZCB0aGUgbGlzdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBvZiBtdXRhdGlvbiBiYXRjaCBJRHMgdGhhdCB3ZXJlIGFmZmVjdGVkIGJ5IGNoYW5nZS5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ld0xvY2FsRG9jdW1lbnRzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZ2V0RG9jdW1lbnRzKHR4biwgY2hhbmdlZEtleXMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubmV4dChmdW5jdGlvbiAoYWZmZWN0ZWREb2N1bWVudHMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWZmZWN0ZWREb2N1bWVudHM6IGFmZmVjdGVkRG9jdW1lbnRzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZWRCYXRjaElkczogcmVtb3ZlZEJhdGNoSWRzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZGVkQmF0Y2hJZHM6IGFkZGVkQmF0Y2hJZHNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm11dGF0aW9uUXVldWUgPSBuZXdNdXRhdGlvblF1ZXVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvY2FsRG9jdW1lbnRzID0gbmV3TG9jYWxEb2N1bWVudHM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucXVlcnlFbmdpbmUuc2V0TG9jYWxEb2N1bWVudHNWaWV3KHRoaXMubG9jYWxEb2N1bWVudHMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgcmVzdWx0XTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyogQWNjZXB0IGxvY2FsbHkgZ2VuZXJhdGVkIE11dGF0aW9ucyBhbmQgY29tbWl0IHRoZW0gdG8gc3RvcmFnZS4gKi9cclxuICAgIExvY2FsU3RvcmUucHJvdG90eXBlLmxvY2FsV3JpdGUgPSBmdW5jdGlvbiAobXV0YXRpb25zKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgbG9jYWxXcml0ZVRpbWUgPSBUaW1lc3RhbXAubm93KCk7XHJcbiAgICAgICAgdmFyIGtleXMgPSBtdXRhdGlvbnMucmVkdWNlKGZ1bmN0aW9uIChrZXlzLCBtKSB7IHJldHVybiBrZXlzLmFkZChtLmtleSk7IH0sIGRvY3VtZW50S2V5U2V0KCkpO1xyXG4gICAgICAgIHZhciBleGlzdGluZ0RvY3M7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucGVyc2lzdGVuY2VcclxuICAgICAgICAgICAgLnJ1blRyYW5zYWN0aW9uKCdMb2NhbGx5IHdyaXRlIG11dGF0aW9ucycsICdyZWFkd3JpdGUtaWRlbXBvdGVudCcsIGZ1bmN0aW9uICh0eG4pIHtcclxuICAgICAgICAgICAgLy8gTG9hZCBhbmQgYXBwbHkgYWxsIGV4aXN0aW5nIG11dGF0aW9ucy4gVGhpcyBsZXRzIHVzIGNvbXB1dGUgdGhlXHJcbiAgICAgICAgICAgIC8vIGN1cnJlbnQgYmFzZSBzdGF0ZSBmb3IgYWxsIG5vbi1pZGVtcG90ZW50IHRyYW5zZm9ybXMgYmVmb3JlIGFwcGx5aW5nXHJcbiAgICAgICAgICAgIC8vIGFueSBhZGRpdGlvbmFsIHVzZXItcHJvdmlkZWQgd3JpdGVzLlxyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXMubG9jYWxEb2N1bWVudHMuZ2V0RG9jdW1lbnRzKHR4biwga2V5cykubmV4dChmdW5jdGlvbiAoZG9jcykge1xyXG4gICAgICAgICAgICAgICAgZXhpc3RpbmdEb2NzID0gZG9jcztcclxuICAgICAgICAgICAgICAgIC8vIEZvciBub24taWRlbXBvdGVudCBtdXRhdGlvbnMgKHN1Y2ggYXMgYEZpZWxkVmFsdWUuaW5jcmVtZW50KClgKSxcclxuICAgICAgICAgICAgICAgIC8vIHdlIHJlY29yZCB0aGUgYmFzZSBzdGF0ZSBpbiBhIHNlcGFyYXRlIHBhdGNoIG11dGF0aW9uLiBUaGlzIGlzXHJcbiAgICAgICAgICAgICAgICAvLyBsYXRlciB1c2VkIHRvIGd1YXJhbnRlZSBjb25zaXN0ZW50IHZhbHVlcyBhbmQgcHJldmVudHMgZmxpY2tlclxyXG4gICAgICAgICAgICAgICAgLy8gZXZlbiBpZiB0aGUgYmFja2VuZCBzZW5kcyB1cyBhbiB1cGRhdGUgdGhhdCBhbHJlYWR5IGluY2x1ZGVzIG91clxyXG4gICAgICAgICAgICAgICAgLy8gdHJhbnNmb3JtLlxyXG4gICAgICAgICAgICAgICAgdmFyIGJhc2VNdXRhdGlvbnMgPSBbXTtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgbXV0YXRpb25zXzEgPSBtdXRhdGlvbnM7IF9pIDwgbXV0YXRpb25zXzEubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG11dGF0aW9uID0gbXV0YXRpb25zXzFbX2ldO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBiYXNlVmFsdWUgPSBtdXRhdGlvbi5leHRyYWN0QmFzZVZhbHVlKGV4aXN0aW5nRG9jcy5nZXQobXV0YXRpb24ua2V5KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGJhc2VWYWx1ZSAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5PVEU6IFRoZSBiYXNlIHN0YXRlIHNob3VsZCBvbmx5IGJlIGFwcGxpZWQgaWYgdGhlcmUncyBzb21lXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGV4aXN0aW5nIGRvY3VtZW50IHRvIG92ZXJyaWRlLCBzbyB1c2UgYSBQcmVjb25kaXRpb24gb2ZcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXhpc3RzPXRydWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmFzZU11dGF0aW9ucy5wdXNoKG5ldyBQYXRjaE11dGF0aW9uKG11dGF0aW9uLmtleSwgYmFzZVZhbHVlLCBiYXNlVmFsdWUuZmllbGRNYXNrKCksIFByZWNvbmRpdGlvbi5leGlzdHModHJ1ZSkpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMubXV0YXRpb25RdWV1ZS5hZGRNdXRhdGlvbkJhdGNoKHR4biwgbG9jYWxXcml0ZVRpbWUsIGJhc2VNdXRhdGlvbnMsIG11dGF0aW9ucyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChiYXRjaCkge1xyXG4gICAgICAgICAgICB2YXIgY2hhbmdlcyA9IGJhdGNoLmFwcGx5VG9Mb2NhbERvY3VtZW50U2V0KGV4aXN0aW5nRG9jcyk7XHJcbiAgICAgICAgICAgIHJldHVybiB7IGJhdGNoSWQ6IGJhdGNoLmJhdGNoSWQsIGNoYW5nZXM6IGNoYW5nZXMgfTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKiogUmV0dXJucyB0aGUgbG9jYWwgdmlldyBvZiB0aGUgZG9jdW1lbnRzIGFmZmVjdGVkIGJ5IGEgbXV0YXRpb24gYmF0Y2guICovXHJcbiAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLXRhYiBvbmx5LlxyXG4gICAgTG9jYWxTdG9yZS5wcm90b3R5cGUubG9va3VwTXV0YXRpb25Eb2N1bWVudHMgPSBmdW5jdGlvbiAoYmF0Y2hJZCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oJ0xvb2t1cCBtdXRhdGlvbiBkb2N1bWVudHMnLCAncmVhZG9ubHktaWRlbXBvdGVudCcsIGZ1bmN0aW9uICh0eG4pIHtcclxuICAgICAgICAgICAgcmV0dXJuIF90aGlzLm11dGF0aW9uUXVldWVcclxuICAgICAgICAgICAgICAgIC5sb29rdXBNdXRhdGlvbktleXModHhuLCBiYXRjaElkKVxyXG4gICAgICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKGtleXMpIHtcclxuICAgICAgICAgICAgICAgIGlmIChrZXlzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLmxvY2FsRG9jdW1lbnRzLmdldERvY3VtZW50cyh0eG4sIGtleXMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKG51bGwpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEFja25vd2xlZGdlIHRoZSBnaXZlbiBiYXRjaC5cclxuICAgICAqXHJcbiAgICAgKiBPbiB0aGUgaGFwcHkgcGF0aCB3aGVuIGEgYmF0Y2ggaXMgYWNrbm93bGVkZ2VkLCB0aGUgbG9jYWwgc3RvcmUgd2lsbFxyXG4gICAgICpcclxuICAgICAqICArIHJlbW92ZSB0aGUgYmF0Y2ggZnJvbSB0aGUgbXV0YXRpb24gcXVldWU7XHJcbiAgICAgKiAgKyBhcHBseSB0aGUgY2hhbmdlcyB0byB0aGUgcmVtb3RlIGRvY3VtZW50IGNhY2hlO1xyXG4gICAgICogICsgcmVjYWxjdWxhdGUgdGhlIGxhdGVuY3kgY29tcGVuc2F0ZWQgdmlldyBpbXBsaWVkIGJ5IHRob3NlIGNoYW5nZXMgKHRoZXJlXHJcbiAgICAgKiAgICBtYXkgYmUgbXV0YXRpb25zIGluIHRoZSBxdWV1ZSB0aGF0IGFmZmVjdCB0aGUgZG9jdW1lbnRzIGJ1dCBoYXZlbid0IGJlZW5cclxuICAgICAqICAgIGFja25vd2xlZGdlZCB5ZXQpOyBhbmRcclxuICAgICAqICArIGdpdmUgdGhlIGNoYW5nZWQgZG9jdW1lbnRzIGJhY2sgdGhlIHN5bmMgZW5naW5lXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybnMgVGhlIHJlc3VsdGluZyAobW9kaWZpZWQpIGRvY3VtZW50cy5cclxuICAgICAqL1xyXG4gICAgTG9jYWxTdG9yZS5wcm90b3R5cGUuYWNrbm93bGVkZ2VCYXRjaCA9IGZ1bmN0aW9uIChiYXRjaFJlc3VsdCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oJ0Fja25vd2xlZGdlIGJhdGNoJywgJ3JlYWR3cml0ZS1wcmltYXJ5LWlkZW1wb3RlbnQnLCBmdW5jdGlvbiAodHhuKSB7XHJcbiAgICAgICAgICAgIHZhciBhZmZlY3RlZCA9IGJhdGNoUmVzdWx0LmJhdGNoLmtleXMoKTtcclxuICAgICAgICAgICAgdmFyIGRvY3VtZW50QnVmZmVyID0gX3RoaXMucmVtb3RlRG9jdW1lbnRzLm5ld0NoYW5nZUJ1ZmZlcih7XHJcbiAgICAgICAgICAgICAgICB0cmFja1JlbW92YWxzOiB0cnVlIC8vIE1ha2Ugc3VyZSBkb2N1bWVudCByZW1vdmFscyBzaG93IHVwIGluIGBnZXROZXdEb2N1bWVudENoYW5nZXMoKWBcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5tdXRhdGlvblF1ZXVlXHJcbiAgICAgICAgICAgICAgICAuYWNrbm93bGVkZ2VCYXRjaCh0eG4sIGJhdGNoUmVzdWx0LmJhdGNoLCBiYXRjaFJlc3VsdC5zdHJlYW1Ub2tlbilcclxuICAgICAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5hcHBseVdyaXRlVG9SZW1vdGVEb2N1bWVudHModHhuLCBiYXRjaFJlc3VsdCwgZG9jdW1lbnRCdWZmZXIpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKCkgeyByZXR1cm4gZG9jdW1lbnRCdWZmZXIuYXBwbHkodHhuKTsgfSlcclxuICAgICAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLm11dGF0aW9uUXVldWUucGVyZm9ybUNvbnNpc3RlbmN5Q2hlY2sodHhuKTsgfSlcclxuICAgICAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLmxvY2FsRG9jdW1lbnRzLmdldERvY3VtZW50cyh0eG4sIGFmZmVjdGVkKTsgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZW1vdmUgbXV0YXRpb25zIGZyb20gdGhlIE11dGF0aW9uUXVldWUgZm9yIHRoZSBzcGVjaWZpZWQgYmF0Y2g7XHJcbiAgICAgKiBMb2NhbERvY3VtZW50cyB3aWxsIGJlIHJlY2FsY3VsYXRlZC5cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyBUaGUgcmVzdWx0aW5nIG1vZGlmaWVkIGRvY3VtZW50cy5cclxuICAgICAqL1xyXG4gICAgTG9jYWxTdG9yZS5wcm90b3R5cGUucmVqZWN0QmF0Y2ggPSBmdW5jdGlvbiAoYmF0Y2hJZCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oJ1JlamVjdCBiYXRjaCcsICdyZWFkd3JpdGUtcHJpbWFyeS1pZGVtcG90ZW50JywgZnVuY3Rpb24gKHR4bikge1xyXG4gICAgICAgICAgICB2YXIgYWZmZWN0ZWRLZXlzO1xyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXMubXV0YXRpb25RdWV1ZVxyXG4gICAgICAgICAgICAgICAgLmxvb2t1cE11dGF0aW9uQmF0Y2godHhuLCBiYXRjaElkKVxyXG4gICAgICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKGJhdGNoKSB7XHJcbiAgICAgICAgICAgICAgICBhc3NlcnQoYmF0Y2ggIT09IG51bGwsICdBdHRlbXB0IHRvIHJlamVjdCBub25leGlzdGVudCBiYXRjaCEnKTtcclxuICAgICAgICAgICAgICAgIGFmZmVjdGVkS2V5cyA9IGJhdGNoLmtleXMoKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5tdXRhdGlvblF1ZXVlLnJlbW92ZU11dGF0aW9uQmF0Y2godHhuLCBiYXRjaCk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAubmV4dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMubXV0YXRpb25RdWV1ZS5wZXJmb3JtQ29uc2lzdGVuY3lDaGVjayh0eG4pO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLmxvY2FsRG9jdW1lbnRzLmdldERvY3VtZW50cyh0eG4sIGFmZmVjdGVkS2V5cyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0aGUgbGFyZ2VzdCAobGF0ZXN0KSBiYXRjaCBpZCBpbiBtdXRhdGlvbiBxdWV1ZSB0aGF0IGlzIHBlbmRpbmcgc2VydmVyIHJlc3BvbnNlLlxyXG4gICAgICogUmV0dXJucyBgQkFUQ0hJRF9VTktOT1dOYCBpZiB0aGUgcXVldWUgaXMgZW1wdHkuXHJcbiAgICAgKi9cclxuICAgIExvY2FsU3RvcmUucHJvdG90eXBlLmdldEhpZ2hlc3RVbmFja25vd2xlZGdlZEJhdGNoSWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICByZXR1cm4gdGhpcy5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbignR2V0IGhpZ2hlc3QgdW5hY2tub3dsZWRnZWQgYmF0Y2ggaWQnLCAncmVhZG9ubHktaWRlbXBvdGVudCcsIGZ1bmN0aW9uICh0eG4pIHtcclxuICAgICAgICAgICAgcmV0dXJuIF90aGlzLm11dGF0aW9uUXVldWUuZ2V0SGlnaGVzdFVuYWNrbm93bGVkZ2VkQmF0Y2hJZCh0eG4pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKiBSZXR1cm5zIHRoZSBsYXN0IHJlY29yZGVkIHN0cmVhbSB0b2tlbiBmb3IgdGhlIGN1cnJlbnQgdXNlci4gKi9cclxuICAgIExvY2FsU3RvcmUucHJvdG90eXBlLmdldExhc3RTdHJlYW1Ub2tlbiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKCdHZXQgbGFzdCBzdHJlYW0gdG9rZW4nLCAncmVhZG9ubHktaWRlbXBvdGVudCcsIGZ1bmN0aW9uICh0eG4pIHtcclxuICAgICAgICAgICAgcmV0dXJuIF90aGlzLm11dGF0aW9uUXVldWUuZ2V0TGFzdFN0cmVhbVRva2VuKHR4bik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBTZXRzIHRoZSBzdHJlYW0gdG9rZW4gZm9yIHRoZSBjdXJyZW50IHVzZXIgd2l0aG91dCBhY2tub3dsZWRnaW5nIGFueVxyXG4gICAgICogbXV0YXRpb24gYmF0Y2guIFRoaXMgaXMgdXN1YWxseSBvbmx5IHVzZWZ1bCBhZnRlciBhIHN0cmVhbSBoYW5kc2hha2Ugb3IgaW5cclxuICAgICAqIHJlc3BvbnNlIHRvIGFuIGVycm9yIHRoYXQgcmVxdWlyZXMgY2xlYXJpbmcgdGhlIHN0cmVhbSB0b2tlbi5cclxuICAgICAqL1xyXG4gICAgTG9jYWxTdG9yZS5wcm90b3R5cGUuc2V0TGFzdFN0cmVhbVRva2VuID0gZnVuY3Rpb24gKHN0cmVhbVRva2VuKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICByZXR1cm4gdGhpcy5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbignU2V0IGxhc3Qgc3RyZWFtIHRva2VuJywgJ3JlYWR3cml0ZS1wcmltYXJ5LWlkZW1wb3RlbnQnLCBmdW5jdGlvbiAodHhuKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5tdXRhdGlvblF1ZXVlLnNldExhc3RTdHJlYW1Ub2tlbih0eG4sIHN0cmVhbVRva2VuKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdGhlIGxhc3QgY29uc2lzdGVudCBzbmFwc2hvdCBwcm9jZXNzZWQgKHVzZWQgYnkgdGhlIFJlbW90ZVN0b3JlIHRvXHJcbiAgICAgKiBkZXRlcm1pbmUgd2hldGhlciB0byBidWZmZXIgaW5jb21pbmcgc25hcHNob3RzIGZyb20gdGhlIGJhY2tlbmQpLlxyXG4gICAgICovXHJcbiAgICBMb2NhbFN0b3JlLnByb3RvdHlwZS5nZXRMYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oJ0dldCBsYXN0IHJlbW90ZSBzbmFwc2hvdCB2ZXJzaW9uJywgJ3JlYWRvbmx5LWlkZW1wb3RlbnQnLCBmdW5jdGlvbiAodHhuKSB7IHJldHVybiBfdGhpcy50YXJnZXRDYWNoZS5nZXRMYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uKHR4bik7IH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogVXBkYXRlIHRoZSBcImdyb3VuZC1zdGF0ZVwiIChyZW1vdGUpIGRvY3VtZW50cy4gV2UgYXNzdW1lIHRoYXQgdGhlIHJlbW90ZVxyXG4gICAgICogZXZlbnQgcmVmbGVjdHMgYW55IHdyaXRlIGJhdGNoZXMgdGhhdCBoYXZlIGJlZW4gYWNrbm93bGVkZ2VkIG9yIHJlamVjdGVkXHJcbiAgICAgKiAoaS5lLiB3ZSBkbyBub3QgcmUtYXBwbHkgbG9jYWwgbXV0YXRpb25zIHRvIHVwZGF0ZXMgZnJvbSB0aGlzIGV2ZW50KS5cclxuICAgICAqXHJcbiAgICAgKiBMb2NhbERvY3VtZW50cyBhcmUgcmUtY2FsY3VsYXRlZCBpZiB0aGVyZSBhcmUgcmVtYWluaW5nIG11dGF0aW9ucyBpbiB0aGVcclxuICAgICAqIHF1ZXVlLlxyXG4gICAgICovXHJcbiAgICBMb2NhbFN0b3JlLnByb3RvdHlwZS5hcHBseVJlbW90ZUV2ZW50ID0gZnVuY3Rpb24gKHJlbW90ZUV2ZW50KSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgcmVtb3RlVmVyc2lvbiA9IHJlbW90ZUV2ZW50LnNuYXBzaG90VmVyc2lvbjtcclxuICAgICAgICB2YXIgbmV3VGFyZ2V0RGF0YUJ5VGFyZ2V0TWFwID0gdGhpcy50YXJnZXREYXRhQnlUYXJnZXQ7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucGVyc2lzdGVuY2VcclxuICAgICAgICAgICAgLnJ1blRyYW5zYWN0aW9uKCdBcHBseSByZW1vdGUgZXZlbnQnLCAncmVhZHdyaXRlLXByaW1hcnktaWRlbXBvdGVudCcsIGZ1bmN0aW9uICh0eG4pIHtcclxuICAgICAgICAgICAgdmFyIGRvY3VtZW50QnVmZmVyID0gX3RoaXMucmVtb3RlRG9jdW1lbnRzLm5ld0NoYW5nZUJ1ZmZlcih7XHJcbiAgICAgICAgICAgICAgICB0cmFja1JlbW92YWxzOiB0cnVlIC8vIE1ha2Ugc3VyZSBkb2N1bWVudCByZW1vdmFscyBzaG93IHVwIGluIGBnZXROZXdEb2N1bWVudENoYW5nZXMoKWBcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIC8vIFJlc2V0IG5ld1RhcmdldERhdGFCeVRhcmdldE1hcCBpbiBjYXNlIHRoaXMgdHJhbnNhY3Rpb24gZ2V0cyByZS1ydW4uXHJcbiAgICAgICAgICAgIG5ld1RhcmdldERhdGFCeVRhcmdldE1hcCA9IF90aGlzLnRhcmdldERhdGFCeVRhcmdldDtcclxuICAgICAgICAgICAgdmFyIHByb21pc2VzID0gW107XHJcbiAgICAgICAgICAgIGZvckVhY2hOdW1iZXIocmVtb3RlRXZlbnQudGFyZ2V0Q2hhbmdlcywgZnVuY3Rpb24gKHRhcmdldElkLCBjaGFuZ2UpIHtcclxuICAgICAgICAgICAgICAgIHZhciBvbGRUYXJnZXREYXRhID0gbmV3VGFyZ2V0RGF0YUJ5VGFyZ2V0TWFwLmdldCh0YXJnZXRJZCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoIW9sZFRhcmdldERhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBPbmx5IHVwZGF0ZSB0aGUgcmVtb3RlIGtleXMgaWYgdGhlIHRhcmdldCBpcyBzdGlsbCBhY3RpdmUuIFRoaXNcclxuICAgICAgICAgICAgICAgIC8vIGVuc3VyZXMgdGhhdCB3ZSBjYW4gcGVyc2lzdCB0aGUgdXBkYXRlZCB0YXJnZXQgZGF0YSBhbG9uZyB3aXRoXHJcbiAgICAgICAgICAgICAgICAvLyB0aGUgdXBkYXRlZCBhc3NpZ25tZW50LlxyXG4gICAgICAgICAgICAgICAgcHJvbWlzZXMucHVzaChfdGhpcy50YXJnZXRDYWNoZVxyXG4gICAgICAgICAgICAgICAgICAgIC5yZW1vdmVNYXRjaGluZ0tleXModHhuLCBjaGFuZ2UucmVtb3ZlZERvY3VtZW50cywgdGFyZ2V0SWQpXHJcbiAgICAgICAgICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy50YXJnZXRDYWNoZS5hZGRNYXRjaGluZ0tleXModHhuLCBjaGFuZ2UuYWRkZWREb2N1bWVudHMsIHRhcmdldElkKTtcclxuICAgICAgICAgICAgICAgIH0pKTtcclxuICAgICAgICAgICAgICAgIHZhciByZXN1bWVUb2tlbiA9IGNoYW5nZS5yZXN1bWVUb2tlbjtcclxuICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSB0aGUgcmVzdW1lIHRva2VuIGlmIHRoZSBjaGFuZ2UgaW5jbHVkZXMgb25lLlxyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3VtZVRva2VuLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbmV3VGFyZ2V0RGF0YSA9IG9sZFRhcmdldERhdGFcclxuICAgICAgICAgICAgICAgICAgICAgICAgLndpdGhSZXN1bWVUb2tlbihyZXN1bWVUb2tlbiwgcmVtb3RlVmVyc2lvbilcclxuICAgICAgICAgICAgICAgICAgICAgICAgLndpdGhTZXF1ZW5jZU51bWJlcih0eG4uY3VycmVudFNlcXVlbmNlTnVtYmVyKTtcclxuICAgICAgICAgICAgICAgICAgICBuZXdUYXJnZXREYXRhQnlUYXJnZXRNYXAgPSBuZXdUYXJnZXREYXRhQnlUYXJnZXRNYXAuaW5zZXJ0KHRhcmdldElkLCBuZXdUYXJnZXREYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBVcGRhdGUgdGhlIHRhcmdldCBkYXRhIGlmIHRoZXJlIGFyZSB0YXJnZXQgY2hhbmdlcyAob3IgaWZcclxuICAgICAgICAgICAgICAgICAgICAvLyBzdWZmaWNpZW50IHRpbWUgaGFzIHBhc3NlZCBzaW5jZSB0aGUgbGFzdCB1cGRhdGUpLlxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChMb2NhbFN0b3JlLnNob3VsZFBlcnNpc3RUYXJnZXREYXRhKG9sZFRhcmdldERhdGEsIG5ld1RhcmdldERhdGEsIGNoYW5nZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvbWlzZXMucHVzaChfdGhpcy50YXJnZXRDYWNoZS51cGRhdGVUYXJnZXREYXRhKHR4biwgbmV3VGFyZ2V0RGF0YSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHZhciBjaGFuZ2VkRG9jcyA9IG1heWJlRG9jdW1lbnRNYXAoKTtcclxuICAgICAgICAgICAgdmFyIHVwZGF0ZWRLZXlzID0gZG9jdW1lbnRLZXlTZXQoKTtcclxuICAgICAgICAgICAgcmVtb3RlRXZlbnQuZG9jdW1lbnRVcGRhdGVzLmZvckVhY2goZnVuY3Rpb24gKGtleSwgZG9jKSB7XHJcbiAgICAgICAgICAgICAgICB1cGRhdGVkS2V5cyA9IHVwZGF0ZWRLZXlzLmFkZChrZXkpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgLy8gRWFjaCBsb29wIGl0ZXJhdGlvbiBvbmx5IGFmZmVjdHMgaXRzIFwib3duXCIgZG9jLCBzbyBpdCdzIHNhZmUgdG8gZ2V0IGFsbCB0aGUgcmVtb3RlXHJcbiAgICAgICAgICAgIC8vIGRvY3VtZW50cyBpbiBhZHZhbmNlIGluIGEgc2luZ2xlIGNhbGwuXHJcbiAgICAgICAgICAgIHByb21pc2VzLnB1c2goZG9jdW1lbnRCdWZmZXIuZ2V0RW50cmllcyh0eG4sIHVwZGF0ZWRLZXlzKS5uZXh0KGZ1bmN0aW9uIChleGlzdGluZ0RvY3MpIHtcclxuICAgICAgICAgICAgICAgIHJlbW90ZUV2ZW50LmRvY3VtZW50VXBkYXRlcy5mb3JFYWNoKGZ1bmN0aW9uIChrZXksIGRvYykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBleGlzdGluZ0RvYyA9IGV4aXN0aW5nRG9jcy5nZXQoa2V5KTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBOb3RlOiBUaGUgb3JkZXIgb2YgdGhlIHN0ZXBzIGJlbG93IGlzIGltcG9ydGFudCwgc2luY2Ugd2Ugd2FudFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIHRvIGVuc3VyZSB0aGF0IHJlamVjdGVkIGxpbWJvIHJlc29sdXRpb25zICh3aGljaCBmYWJyaWNhdGVcclxuICAgICAgICAgICAgICAgICAgICAvLyBOb0RvY3VtZW50cyB3aXRoIFNuYXBzaG90VmVyc2lvbi5NSU4pIG5ldmVyIGFkZCBkb2N1bWVudHMgdG9cclxuICAgICAgICAgICAgICAgICAgICAvLyBjYWNoZS5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoZG9jIGluc3RhbmNlb2YgTm9Eb2N1bWVudCAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkb2MudmVyc2lvbi5pc0VxdWFsKFNuYXBzaG90VmVyc2lvbi5NSU4pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5vRG9jdW1lbnRzIHdpdGggU25hcHNob3RWZXJzaW9uLk1JTiBhcmUgdXNlZCBpbiBtYW51ZmFjdHVyZWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXZlbnRzLiBXZSByZW1vdmUgdGhlc2UgZG9jdW1lbnRzIGZyb20gY2FjaGUgc2luY2Ugd2UgbG9zdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBhY2Nlc3MuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50QnVmZmVyLnJlbW92ZUVudHJ5KGtleSwgcmVtb3RlVmVyc2lvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZWREb2NzID0gY2hhbmdlZERvY3MuaW5zZXJ0KGtleSwgZG9jKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoZXhpc3RpbmdEb2MgPT0gbnVsbCB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkb2MudmVyc2lvbi5jb21wYXJlVG8oZXhpc3RpbmdEb2MudmVyc2lvbikgPiAwIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIChkb2MudmVyc2lvbi5jb21wYXJlVG8oZXhpc3RpbmdEb2MudmVyc2lvbikgPT09IDAgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4aXN0aW5nRG9jLmhhc1BlbmRpbmdXcml0ZXMpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFzc2VydCghU25hcHNob3RWZXJzaW9uLk1JTi5pc0VxdWFsKHJlbW90ZVZlcnNpb24pLCAnQ2Fubm90IGFkZCBhIGRvY3VtZW50IHdoZW4gdGhlIHJlbW90ZSB2ZXJzaW9uIGlzIHplcm8nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnRCdWZmZXIuYWRkRW50cnkoZG9jLCByZW1vdGVWZXJzaW9uKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlZERvY3MgPSBjaGFuZ2VkRG9jcy5pbnNlcnQoa2V5LCBkb2MpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVidWcoTE9HX1RBRyQyLCAnSWdub3Jpbmcgb3V0ZGF0ZWQgd2F0Y2ggdXBkYXRlIGZvciAnLCBrZXksICcuIEN1cnJlbnQgdmVyc2lvbjonLCBleGlzdGluZ0RvYy52ZXJzaW9uLCAnIFdhdGNoIHZlcnNpb246JywgZG9jLnZlcnNpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAocmVtb3RlRXZlbnQucmVzb2x2ZWRMaW1ib0RvY3VtZW50cy5oYXMoa2V5KSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9taXNlcy5wdXNoKF90aGlzLnBlcnNpc3RlbmNlLnJlZmVyZW5jZURlbGVnYXRlLnVwZGF0ZUxpbWJvRG9jdW1lbnQodHhuLCBrZXkpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgICAgICAvLyBIQUNLOiBUaGUgb25seSByZWFzb24gd2UgYWxsb3cgYSBudWxsIHNuYXBzaG90IHZlcnNpb24gaXMgc28gdGhhdCB3ZVxyXG4gICAgICAgICAgICAvLyBjYW4gc3ludGhlc2l6ZSByZW1vdGUgZXZlbnRzIHdoZW4gd2UgZ2V0IHBlcm1pc3Npb24gZGVuaWVkIGVycm9ycyB3aGlsZVxyXG4gICAgICAgICAgICAvLyB0cnlpbmcgdG8gcmVzb2x2ZSB0aGUgc3RhdGUgb2YgYSBsb2NhbGx5IGNhY2hlZCBkb2N1bWVudCB0aGF0IGlzIGluXHJcbiAgICAgICAgICAgIC8vIGxpbWJvLlxyXG4gICAgICAgICAgICBpZiAoIXJlbW90ZVZlcnNpb24uaXNFcXVhbChTbmFwc2hvdFZlcnNpb24uTUlOKSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHVwZGF0ZVJlbW90ZVZlcnNpb24gPSBfdGhpcy50YXJnZXRDYWNoZVxyXG4gICAgICAgICAgICAgICAgICAgIC5nZXRMYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uKHR4bilcclxuICAgICAgICAgICAgICAgICAgICAubmV4dChmdW5jdGlvbiAobGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIGFzc2VydChyZW1vdGVWZXJzaW9uLmNvbXBhcmVUbyhsYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uKSA+PSAwLCAnV2F0Y2ggc3RyZWFtIHJldmVydGVkIHRvIHByZXZpb3VzIHNuYXBzaG90Pz8gJyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlbW90ZVZlcnNpb24gK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnIDwgJyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy50YXJnZXRDYWNoZS5zZXRUYXJnZXRzTWV0YWRhdGEodHhuLCB0eG4uY3VycmVudFNlcXVlbmNlTnVtYmVyLCByZW1vdGVWZXJzaW9uKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgcHJvbWlzZXMucHVzaCh1cGRhdGVSZW1vdGVWZXJzaW9uKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLndhaXRGb3IocHJvbWlzZXMpXHJcbiAgICAgICAgICAgICAgICAubmV4dChmdW5jdGlvbiAoKSB7IHJldHVybiBkb2N1bWVudEJ1ZmZlci5hcHBseSh0eG4pOyB9KVxyXG4gICAgICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLmxvY2FsRG9jdW1lbnRzLmdldExvY2FsVmlld09mRG9jdW1lbnRzKHR4biwgY2hhbmdlZERvY3MpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoY2hhbmdlZERvY3MpIHtcclxuICAgICAgICAgICAgX3RoaXMudGFyZ2V0RGF0YUJ5VGFyZ2V0ID0gbmV3VGFyZ2V0RGF0YUJ5VGFyZ2V0TWFwO1xyXG4gICAgICAgICAgICByZXR1cm4gY2hhbmdlZERvY3M7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhlIG5ld1RhcmdldERhdGEgc2hvdWxkIGJlIHBlcnNpc3RlZCBkdXJpbmcgYW4gdXBkYXRlIG9mXHJcbiAgICAgKiBhbiBhY3RpdmUgdGFyZ2V0LiBUYXJnZXREYXRhIHNob3VsZCBhbHdheXMgYmUgcGVyc2lzdGVkIHdoZW4gYSB0YXJnZXQgaXNcclxuICAgICAqIGJlaW5nIHJlbGVhc2VkIGFuZCBzaG91bGQgbm90IGNhbGwgdGhpcyBmdW5jdGlvbi5cclxuICAgICAqXHJcbiAgICAgKiBXaGlsZSB0aGUgdGFyZ2V0IGlzIGFjdGl2ZSwgVGFyZ2V0RGF0YSB1cGRhdGVzIGNhbiBiZSBvbWl0dGVkIHdoZW4gbm90aGluZ1xyXG4gICAgICogYWJvdXQgdGhlIHRhcmdldCBoYXMgY2hhbmdlZCBleGNlcHQgbWV0YWRhdGEgbGlrZSB0aGUgcmVzdW1lIHRva2VuIG9yXHJcbiAgICAgKiBzbmFwc2hvdCB2ZXJzaW9uLiBPY2Nhc2lvbmFsbHkgaXQncyB3b3J0aCB0aGUgZXh0cmEgd3JpdGUgdG8gcHJldmVudCB0aGVzZVxyXG4gICAgICogdmFsdWVzIGZyb20gZ2V0dGluZyB0b28gc3RhbGUgYWZ0ZXIgYSBjcmFzaCwgYnV0IHRoaXMgZG9lc24ndCBoYXZlIHRvIGJlXHJcbiAgICAgKiB0b28gZnJlcXVlbnQuXHJcbiAgICAgKi9cclxuICAgIExvY2FsU3RvcmUuc2hvdWxkUGVyc2lzdFRhcmdldERhdGEgPSBmdW5jdGlvbiAob2xkVGFyZ2V0RGF0YSwgbmV3VGFyZ2V0RGF0YSwgY2hhbmdlKSB7XHJcbiAgICAgICAgYXNzZXJ0KG5ld1RhcmdldERhdGEucmVzdW1lVG9rZW4ubGVuZ3RoID4gMCwgJ0F0dGVtcHRlZCB0byBwZXJzaXN0IHRhcmdldCBkYXRhIHdpdGggbm8gcmVzdW1lIHRva2VuJyk7XHJcbiAgICAgICAgLy8gQWx3YXlzIHBlcnNpc3QgdGFyZ2V0IGRhdGEgaWYgd2UgZG9uJ3QgYWxyZWFkeSBoYXZlIGEgcmVzdW1lIHRva2VuLlxyXG4gICAgICAgIGlmIChvbGRUYXJnZXREYXRhLnJlc3VtZVRva2VuLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gRG9uJ3QgYWxsb3cgcmVzdW1lIHRva2VuIGNoYW5nZXMgdG8gYmUgYnVmZmVyZWQgaW5kZWZpbml0ZWx5LiBUaGlzXHJcbiAgICAgICAgLy8gYWxsb3dzIHVzIHRvIGJlIHJlYXNvbmFibHkgdXAtdG8tZGF0ZSBhZnRlciBhIGNyYXNoIGFuZCBhdm9pZHMgbmVlZGluZ1xyXG4gICAgICAgIC8vIHRvIGxvb3Agb3ZlciBhbGwgYWN0aXZlIHF1ZXJpZXMgb24gc2h1dGRvd24uIEVzcGVjaWFsbHkgaW4gdGhlIGJyb3dzZXJcclxuICAgICAgICAvLyB3ZSBtYXkgbm90IGdldCB0aW1lIHRvIGRvIGFueXRoaW5nIGludGVyZXN0aW5nIHdoaWxlIHRoZSBjdXJyZW50IHRhYiBpc1xyXG4gICAgICAgIC8vIGNsb3NpbmcuXHJcbiAgICAgICAgdmFyIHRpbWVEZWx0YSA9IG5ld1RhcmdldERhdGEuc25hcHNob3RWZXJzaW9uLnRvTWljcm9zZWNvbmRzKCkgLVxyXG4gICAgICAgICAgICBvbGRUYXJnZXREYXRhLnNuYXBzaG90VmVyc2lvbi50b01pY3Jvc2Vjb25kcygpO1xyXG4gICAgICAgIGlmICh0aW1lRGVsdGEgPj0gdGhpcy5SRVNVTUVfVE9LRU5fTUFYX0FHRV9NSUNST1MpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIE90aGVyd2lzZSBpZiB0aGUgb25seSB0aGluZyB0aGF0IGhhcyBjaGFuZ2VkIGFib3V0IGEgdGFyZ2V0IGlzIGl0cyByZXN1bWVcclxuICAgICAgICAvLyB0b2tlbiBpdCdzIG5vdCB3b3J0aCBwZXJzaXN0aW5nLiBOb3RlIHRoYXQgdGhlIFJlbW90ZVN0b3JlIGtlZXBzIGFuXHJcbiAgICAgICAgLy8gaW4tbWVtb3J5IHZpZXcgb2YgdGhlIGN1cnJlbnRseSBhY3RpdmUgdGFyZ2V0cyB3aGljaCBpbmNsdWRlcyB0aGUgY3VycmVudFxyXG4gICAgICAgIC8vIHJlc3VtZSB0b2tlbiwgc28gc3RyZWFtIGZhaWx1cmUgb3IgdXNlciBjaGFuZ2VzIHdpbGwgc3RpbGwgdXNlIGFuXHJcbiAgICAgICAgLy8gdXAtdG8tZGF0ZSByZXN1bWUgdG9rZW4gcmVnYXJkbGVzcyBvZiB3aGF0IHdlIGRvIGhlcmUuXHJcbiAgICAgICAgdmFyIGNoYW5nZXMgPSBjaGFuZ2UuYWRkZWREb2N1bWVudHMuc2l6ZSArXHJcbiAgICAgICAgICAgIGNoYW5nZS5tb2RpZmllZERvY3VtZW50cy5zaXplICtcclxuICAgICAgICAgICAgY2hhbmdlLnJlbW92ZWREb2N1bWVudHMuc2l6ZTtcclxuICAgICAgICByZXR1cm4gY2hhbmdlcyA+IDA7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBOb3RpZnkgbG9jYWwgc3RvcmUgb2YgdGhlIGNoYW5nZWQgdmlld3MgdG8gbG9jYWxseSBwaW4gZG9jdW1lbnRzLlxyXG4gICAgICovXHJcbiAgICBMb2NhbFN0b3JlLnByb3RvdHlwZS5ub3RpZnlMb2NhbFZpZXdDaGFuZ2VzID0gZnVuY3Rpb24gKHZpZXdDaGFuZ2VzKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIHZpZXdDaGFuZ2VzXzEgPSB2aWV3Q2hhbmdlczsgX2kgPCB2aWV3Q2hhbmdlc18xLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICB2YXIgdmlld0NoYW5nZSA9IHZpZXdDaGFuZ2VzXzFbX2ldO1xyXG4gICAgICAgICAgICB2YXIgdGFyZ2V0SWQgPSB2aWV3Q2hhbmdlLnRhcmdldElkO1xyXG4gICAgICAgICAgICB0aGlzLmxvY2FsVmlld1JlZmVyZW5jZXMuYWRkUmVmZXJlbmNlcyh2aWV3Q2hhbmdlLmFkZGVkS2V5cywgdGFyZ2V0SWQpO1xyXG4gICAgICAgICAgICB0aGlzLmxvY2FsVmlld1JlZmVyZW5jZXMucmVtb3ZlUmVmZXJlbmNlcyh2aWV3Q2hhbmdlLnJlbW92ZWRLZXlzLCB0YXJnZXRJZCk7XHJcbiAgICAgICAgICAgIGlmICghdmlld0NoYW5nZS5mcm9tQ2FjaGUpIHtcclxuICAgICAgICAgICAgICAgIHZhciB0YXJnZXREYXRhID0gdGhpcy50YXJnZXREYXRhQnlUYXJnZXQuZ2V0KHRhcmdldElkKTtcclxuICAgICAgICAgICAgICAgIGFzc2VydCh0YXJnZXREYXRhICE9PSBudWxsLCBcIkNhbid0IHNldCBsaW1iby1mcmVlIHNuYXBzaG90IHZlcnNpb24gZm9yIHVua25vd24gdGFyZ2V0OiBcIiArIHRhcmdldElkKTtcclxuICAgICAgICAgICAgICAgIC8vIEFkdmFuY2UgdGhlIGxhc3QgbGltYm8gZnJlZSBzbmFwc2hvdCB2ZXJzaW9uXHJcbiAgICAgICAgICAgICAgICB2YXIgbGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbiA9IHRhcmdldERhdGEuc25hcHNob3RWZXJzaW9uO1xyXG4gICAgICAgICAgICAgICAgdmFyIHVwZGF0ZWRUYXJnZXREYXRhID0gdGFyZ2V0RGF0YS53aXRoTGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbihsYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uKTtcclxuICAgICAgICAgICAgICAgIHRoaXMudGFyZ2V0RGF0YUJ5VGFyZ2V0ID0gdGhpcy50YXJnZXREYXRhQnlUYXJnZXQuaW5zZXJ0KHRhcmdldElkLCB1cGRhdGVkVGFyZ2V0RGF0YSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oJ25vdGlmeUxvY2FsVmlld0NoYW5nZXMnLCAncmVhZHdyaXRlLWlkZW1wb3RlbnQnLCBmdW5jdGlvbiAodHhuKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UuZm9yRWFjaCh2aWV3Q2hhbmdlcywgZnVuY3Rpb24gKHZpZXdDaGFuZ2UpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UuZm9yRWFjaCh2aWV3Q2hhbmdlLnJlbW92ZWRLZXlzLCBmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLnBlcnNpc3RlbmNlLnJlZmVyZW5jZURlbGVnYXRlLnJlbW92ZVJlZmVyZW5jZSh0eG4sIGtleSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBHZXRzIHRoZSBtdXRhdGlvbiBiYXRjaCBhZnRlciB0aGUgcGFzc2VkIGluIGJhdGNoSWQgaW4gdGhlIG11dGF0aW9uIHF1ZXVlXHJcbiAgICAgKiBvciBudWxsIGlmIGVtcHR5LlxyXG4gICAgICogQHBhcmFtIGFmdGVyQmF0Y2hJZCBJZiBwcm92aWRlZCwgdGhlIGJhdGNoIHRvIHNlYXJjaCBhZnRlci5cclxuICAgICAqIEByZXR1cm5zIFRoZSBuZXh0IG11dGF0aW9uIG9yIG51bGwgaWYgdGhlcmUgd2Fzbid0IG9uZS5cclxuICAgICAqL1xyXG4gICAgTG9jYWxTdG9yZS5wcm90b3R5cGUubmV4dE11dGF0aW9uQmF0Y2ggPSBmdW5jdGlvbiAoYWZ0ZXJCYXRjaElkKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICByZXR1cm4gdGhpcy5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbignR2V0IG5leHQgbXV0YXRpb24gYmF0Y2gnLCAncmVhZG9ubHktaWRlbXBvdGVudCcsIGZ1bmN0aW9uICh0eG4pIHtcclxuICAgICAgICAgICAgaWYgKGFmdGVyQmF0Y2hJZCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICBhZnRlckJhdGNoSWQgPSBCQVRDSElEX1VOS05PV047XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIF90aGlzLm11dGF0aW9uUXVldWUuZ2V0TmV4dE11dGF0aW9uQmF0Y2hBZnRlckJhdGNoSWQodHhuLCBhZnRlckJhdGNoSWQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmVhZCB0aGUgY3VycmVudCB2YWx1ZSBvZiBhIERvY3VtZW50IHdpdGggYSBnaXZlbiBrZXkgb3IgbnVsbCBpZiBub3RcclxuICAgICAqIGZvdW5kIC0gdXNlZCBmb3IgdGVzdGluZy5cclxuICAgICAqL1xyXG4gICAgTG9jYWxTdG9yZS5wcm90b3R5cGUucmVhZERvY3VtZW50ID0gZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oJ3JlYWQgZG9jdW1lbnQnLCAncmVhZG9ubHktaWRlbXBvdGVudCcsIGZ1bmN0aW9uICh0eG4pIHtcclxuICAgICAgICAgICAgcmV0dXJuIF90aGlzLmxvY2FsRG9jdW1lbnRzLmdldERvY3VtZW50KHR4biwga2V5KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEFzc2lnbnMgdGhlIGdpdmVuIHRhcmdldCBhbiBpbnRlcm5hbCBJRCBzbyB0aGF0IGl0cyByZXN1bHRzIGNhbiBiZSBwaW5uZWQgc29cclxuICAgICAqIHRoZXkgZG9uJ3QgZ2V0IEdDJ2QuIEEgdGFyZ2V0IG11c3QgYmUgYWxsb2NhdGVkIGluIHRoZSBsb2NhbCBzdG9yZSBiZWZvcmVcclxuICAgICAqIHRoZSBzdG9yZSBjYW4gYmUgdXNlZCB0byBtYW5hZ2UgaXRzIHZpZXcuXHJcbiAgICAgKlxyXG4gICAgICogQWxsb2NhdGluZyBhbiBhbHJlYWR5IGFsbG9jYXRlZCBgVGFyZ2V0YCB3aWxsIHJldHVybiB0aGUgZXhpc3RpbmcgYFRhcmdldERhdGFgXHJcbiAgICAgKiBmb3IgdGhhdCBgVGFyZ2V0YC5cclxuICAgICAqL1xyXG4gICAgTG9jYWxTdG9yZS5wcm90b3R5cGUuYWxsb2NhdGVUYXJnZXQgPSBmdW5jdGlvbiAodGFyZ2V0KSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICByZXR1cm4gdGhpcy5wZXJzaXN0ZW5jZVxyXG4gICAgICAgICAgICAucnVuVHJhbnNhY3Rpb24oJ0FsbG9jYXRlIHRhcmdldCcsICdyZWFkd3JpdGUtaWRlbXBvdGVudCcsIGZ1bmN0aW9uICh0eG4pIHtcclxuICAgICAgICAgICAgdmFyIHRhcmdldERhdGE7XHJcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy50YXJnZXRDYWNoZVxyXG4gICAgICAgICAgICAgICAgLmdldFRhcmdldERhdGEodHhuLCB0YXJnZXQpXHJcbiAgICAgICAgICAgICAgICAubmV4dChmdW5jdGlvbiAoY2FjaGVkKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoY2FjaGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gVGhpcyB0YXJnZXQgaGFzIGJlZW4gbGlzdGVuZWQgdG8gcHJldmlvdXNseSwgc28gcmV1c2UgdGhlXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gcHJldmlvdXMgdGFyZ2V0SUQuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gVE9ETyhtY2cpOiBmcmVzaGVuIGxhc3QgYWNjZXNzZWQgZGF0ZT9cclxuICAgICAgICAgICAgICAgICAgICB0YXJnZXREYXRhID0gY2FjaGVkO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSh0YXJnZXREYXRhKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy50YXJnZXRDYWNoZS5hbGxvY2F0ZVRhcmdldElkKHR4bikubmV4dChmdW5jdGlvbiAodGFyZ2V0SWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0RGF0YSA9IG5ldyBUYXJnZXREYXRhKHRhcmdldCwgdGFyZ2V0SWQsIFRhcmdldFB1cnBvc2UuTGlzdGVuLCB0eG4uY3VycmVudFNlcXVlbmNlTnVtYmVyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLnRhcmdldENhY2hlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYWRkVGFyZ2V0RGF0YSh0eG4sIHRhcmdldERhdGEpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAubmV4dChmdW5jdGlvbiAoKSB7IHJldHVybiB0YXJnZXREYXRhOyB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHRhcmdldERhdGEpIHtcclxuICAgICAgICAgICAgaWYgKF90aGlzLnRhcmdldERhdGFCeVRhcmdldC5nZXQodGFyZ2V0RGF0YS50YXJnZXRJZCkgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLnRhcmdldERhdGFCeVRhcmdldCA9IF90aGlzLnRhcmdldERhdGFCeVRhcmdldC5pbnNlcnQodGFyZ2V0RGF0YS50YXJnZXRJZCwgdGFyZ2V0RGF0YSk7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy50YXJnZXRJZEJ5VGFyZ2V0LnNldCh0YXJnZXQsIHRhcmdldERhdGEudGFyZ2V0SWQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB0YXJnZXREYXRhO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0aGUgVGFyZ2V0RGF0YSBhcyBzZWVuIGJ5IHRoZSBMb2NhbFN0b3JlLCBpbmNsdWRpbmcgdXBkYXRlcyB0aGF0IG1heVxyXG4gICAgICogaGF2ZSBub3QgeWV0IGJlZW4gcGVyc2lzdGVkIHRvIHRoZSBUYXJnZXRDYWNoZS5cclxuICAgICAqL1xyXG4gICAgLy8gVmlzaWJsZSBmb3IgdGVzdGluZy5cclxuICAgIExvY2FsU3RvcmUucHJvdG90eXBlLmdldFRhcmdldERhdGEgPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24sIHRhcmdldCkge1xyXG4gICAgICAgIHZhciB0YXJnZXRJZCA9IHRoaXMudGFyZ2V0SWRCeVRhcmdldC5nZXQodGFyZ2V0KTtcclxuICAgICAgICBpZiAodGFyZ2V0SWQgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUodGhpcy50YXJnZXREYXRhQnlUYXJnZXQuZ2V0KHRhcmdldElkKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy50YXJnZXRDYWNoZS5nZXRUYXJnZXREYXRhKHRyYW5zYWN0aW9uLCB0YXJnZXQpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFVucGluIGFsbCB0aGUgZG9jdW1lbnRzIGFzc29jaWF0ZWQgd2l0aCB0aGUgZ2l2ZW4gdGFyZ2V0LiBJZlxyXG4gICAgICogYGtlZXBQZXJzaXN0ZWRUYXJnZXREYXRhYCBpcyBzZXQgdG8gZmFsc2UgYW5kIEVhZ2VyIEdDIGVuYWJsZWQsIHRoZSBtZXRob2RcclxuICAgICAqIGRpcmVjdGx5IHJlbW92ZXMgdGhlIGFzc29jaWF0ZWQgdGFyZ2V0IGRhdGEgZnJvbSB0aGUgdGFyZ2V0IGNhY2hlLlxyXG4gICAgICpcclxuICAgICAqIFJlbGVhc2luZyBhIG5vbi1leGlzdGluZyBgVGFyZ2V0YCBpcyBhIG5vLW9wLlxyXG4gICAgICovXHJcbiAgICAvLyBQT1JUSU5HIE5PVEU6IGBrZWVwUGVyc2lzdGVkVGFyZ2V0RGF0YWAgaXMgbXVsdGktdGFiIG9ubHkuXHJcbiAgICBMb2NhbFN0b3JlLnByb3RvdHlwZS5yZWxlYXNlVGFyZ2V0ID0gZnVuY3Rpb24gKHRhcmdldElkLCBrZWVwUGVyc2lzdGVkVGFyZ2V0RGF0YSkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIHRhcmdldERhdGEgPSB0aGlzLnRhcmdldERhdGFCeVRhcmdldC5nZXQodGFyZ2V0SWQpO1xyXG4gICAgICAgIGFzc2VydCh0YXJnZXREYXRhICE9PSBudWxsLCBcIlRyaWVkIHRvIHJlbGVhc2Ugbm9uZXhpc3RlbnQgdGFyZ2V0OiBcIiArIHRhcmdldElkKTtcclxuICAgICAgICB2YXIgbW9kZSA9IGtlZXBQZXJzaXN0ZWRUYXJnZXREYXRhXHJcbiAgICAgICAgICAgID8gJ3JlYWR3cml0ZS1pZGVtcG90ZW50J1xyXG4gICAgICAgICAgICA6ICdyZWFkd3JpdGUtcHJpbWFyeS1pZGVtcG90ZW50JztcclxuICAgICAgICByZXR1cm4gdGhpcy5wZXJzaXN0ZW5jZVxyXG4gICAgICAgICAgICAucnVuVHJhbnNhY3Rpb24oJ1JlbGVhc2UgdGFyZ2V0JywgbW9kZSwgZnVuY3Rpb24gKHR4bikge1xyXG4gICAgICAgICAgICAvLyBSZWZlcmVuY2VzIGZvciBkb2N1bWVudHMgc2VudCB2aWEgV2F0Y2ggYXJlIGF1dG9tYXRpY2FsbHkgcmVtb3ZlZFxyXG4gICAgICAgICAgICAvLyB3aGVuIHdlIGRlbGV0ZSBhIHRhcmdldCdzIGRhdGEgZnJvbSB0aGUgcmVmZXJlbmNlIGRlbGVnYXRlLlxyXG4gICAgICAgICAgICAvLyBTaW5jZSB0aGlzIGRvZXMgbm90IHJlbW92ZSByZWZlcmVuY2VzIGZvciBsb2NhbGx5IG11dGF0ZWQgZG9jdW1lbnRzLFxyXG4gICAgICAgICAgICAvLyB3ZSBoYXZlIHRvIHJlbW92ZSB0aGUgdGFyZ2V0IGFzc29jaWF0aW9ucyBmb3IgdGhlc2UgZG9jdW1lbnRzXHJcbiAgICAgICAgICAgIC8vIG1hbnVhbGx5LlxyXG4gICAgICAgICAgICAvLyBUaGlzIG9wZXJhdGlvbiBuZWVkcyB0byBiZSBydW4gaW5zaWRlIHRoZSB0cmFuc2FjdGlvbiBzaW5jZSBFYWdlckdDXHJcbiAgICAgICAgICAgIC8vIHVzZXMgdGhlIGxvY2FsIHZpZXcgcmVmZXJlbmNlcyBkdXJpbmcgdGhlIHRyYW5zYWN0aW9uJ3MgY29tbWl0LlxyXG4gICAgICAgICAgICAvLyBGb3J0dW5hdGVseSwgdGhlIG9wZXJhdGlvbiBpcyBzYWZlIHRvIGJlIHJlLXJ1biBpbiBjYXNlIHRoZVxyXG4gICAgICAgICAgICAvLyB0cmFuc2FjdGlvbiBmYWlscyBzaW5jZSB0aGVyZSBhcmUgbm8gc2lkZSBlZmZlY3RzIGlmIHRoZSB0YXJnZXQgaGFzXHJcbiAgICAgICAgICAgIC8vIGFscmVhZHkgYmVlbiByZW1vdmVkLlxyXG4gICAgICAgICAgICB2YXIgcmVtb3ZlZCA9IF90aGlzLmxvY2FsVmlld1JlZmVyZW5jZXMucmVtb3ZlUmVmZXJlbmNlc0ZvcklkKHRhcmdldElkKTtcclxuICAgICAgICAgICAgaWYgKCFrZWVwUGVyc2lzdGVkVGFyZ2V0RGF0YSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5mb3JFYWNoKHJlbW92ZWQsIGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMucGVyc2lzdGVuY2UucmVmZXJlbmNlRGVsZWdhdGUucmVtb3ZlUmVmZXJlbmNlKHR4biwga2V5KTtcclxuICAgICAgICAgICAgICAgIH0pLm5leHQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnBlcnNpc3RlbmNlLnJlZmVyZW5jZURlbGVnYXRlLnJlbW92ZVRhcmdldCh0eG4sIHRhcmdldERhdGEpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgX3RoaXMudGFyZ2V0RGF0YUJ5VGFyZ2V0ID0gX3RoaXMudGFyZ2V0RGF0YUJ5VGFyZ2V0LnJlbW92ZSh0YXJnZXRJZCk7XHJcbiAgICAgICAgICAgIF90aGlzLnRhcmdldElkQnlUYXJnZXQuZGVsZXRlKHRhcmdldERhdGEudGFyZ2V0KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJ1bnMgdGhlIHNwZWNpZmllZCBxdWVyeSBhZ2FpbnN0IHRoZSBsb2NhbCBzdG9yZSBhbmQgcmV0dXJucyB0aGUgcmVzdWx0cyxcclxuICAgICAqIHBvdGVudGlhbGx5IHRha2luZyBhZHZhbnRhZ2Ugb2YgcXVlcnkgZGF0YSBmcm9tIHByZXZpb3VzIGV4ZWN1dGlvbnMgKHN1Y2hcclxuICAgICAqIGFzIHRoZSBzZXQgb2YgcmVtb3RlIGtleXMpLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB1c2VQcmV2aW91c1Jlc3VsdHMgV2hldGhlciByZXN1bHRzIGZyb20gcHJldmlvdXMgZXhlY3V0aW9ucyBjYW5cclxuICAgICAqIGJlIHVzZWQgdG8gb3B0aW1pemUgdGhpcyBxdWVyeSBleGVjdXRpb24uXHJcbiAgICAgKi9cclxuICAgIExvY2FsU3RvcmUucHJvdG90eXBlLmV4ZWN1dGVRdWVyeSA9IGZ1bmN0aW9uIChxdWVyeSwgdXNlUHJldmlvdXNSZXN1bHRzKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgbGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbiA9IFNuYXBzaG90VmVyc2lvbi5NSU47XHJcbiAgICAgICAgdmFyIHJlbW90ZUtleXMgPSBkb2N1bWVudEtleVNldCgpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKCdFeGVjdXRlIHF1ZXJ5JywgJ3JlYWRvbmx5LWlkZW1wb3RlbnQnLCBmdW5jdGlvbiAodHhuKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5nZXRUYXJnZXREYXRhKHR4biwgcXVlcnkudG9UYXJnZXQoKSlcclxuICAgICAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uICh0YXJnZXREYXRhKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGFyZ2V0RGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24gPVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXREYXRhLmxhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb247XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLnRhcmdldENhY2hlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5nZXRNYXRjaGluZ0tleXNGb3JUYXJnZXRJZCh0eG4sIHRhcmdldERhdGEudGFyZ2V0SWQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3RlS2V5cyA9IHJlc3VsdDtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5xdWVyeUVuZ2luZS5nZXREb2N1bWVudHNNYXRjaGluZ1F1ZXJ5KHR4biwgcXVlcnksIHVzZVByZXZpb3VzUmVzdWx0c1xyXG4gICAgICAgICAgICAgICAgICAgID8gbGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvblxyXG4gICAgICAgICAgICAgICAgICAgIDogU25hcHNob3RWZXJzaW9uLk1JTiwgdXNlUHJldmlvdXNSZXN1bHRzID8gcmVtb3RlS2V5cyA6IGRvY3VtZW50S2V5U2V0KCkpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKGRvY3VtZW50cykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgZG9jdW1lbnRzOiBkb2N1bWVudHMsIHJlbW90ZUtleXM6IHJlbW90ZUtleXMgfTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSBrZXlzIG9mIHRoZSBkb2N1bWVudHMgdGhhdCBhcmUgYXNzb2NpYXRlZCB3aXRoIHRoZSBnaXZlblxyXG4gICAgICogdGFyZ2V0IGlkIGluIHRoZSByZW1vdGUgdGFibGUuXHJcbiAgICAgKi9cclxuICAgIExvY2FsU3RvcmUucHJvdG90eXBlLnJlbW90ZURvY3VtZW50S2V5cyA9IGZ1bmN0aW9uICh0YXJnZXRJZCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oJ1JlbW90ZSBkb2N1bWVudCBrZXlzJywgJ3JlYWRvbmx5LWlkZW1wb3RlbnQnLCBmdW5jdGlvbiAodHhuKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy50YXJnZXRDYWNoZS5nZXRNYXRjaGluZ0tleXNGb3JUYXJnZXRJZCh0eG4sIHRhcmdldElkKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLXRhYiBvbmx5LlxyXG4gICAgTG9jYWxTdG9yZS5wcm90b3R5cGUuZ2V0QWN0aXZlQ2xpZW50cyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5wZXJzaXN0ZW5jZS5nZXRBY3RpdmVDbGllbnRzKCk7XHJcbiAgICB9O1xyXG4gICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS10YWIgb25seS5cclxuICAgIExvY2FsU3RvcmUucHJvdG90eXBlLnJlbW92ZUNhY2hlZE11dGF0aW9uQmF0Y2hNZXRhZGF0YSA9IGZ1bmN0aW9uIChiYXRjaElkKSB7XHJcbiAgICAgICAgdGhpcy5tdXRhdGlvblF1ZXVlLnJlbW92ZUNhY2hlZE11dGF0aW9uS2V5cyhiYXRjaElkKTtcclxuICAgIH07XHJcbiAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLXRhYiBvbmx5LlxyXG4gICAgTG9jYWxTdG9yZS5wcm90b3R5cGUuc2V0TmV0d29ya0VuYWJsZWQgPSBmdW5jdGlvbiAobmV0d29ya0VuYWJsZWQpIHtcclxuICAgICAgICB0aGlzLnBlcnNpc3RlbmNlLnNldE5ldHdvcmtFbmFibGVkKG5ldHdvcmtFbmFibGVkKTtcclxuICAgIH07XHJcbiAgICBMb2NhbFN0b3JlLnByb3RvdHlwZS5hcHBseVdyaXRlVG9SZW1vdGVEb2N1bWVudHMgPSBmdW5jdGlvbiAodHhuLCBiYXRjaFJlc3VsdCwgZG9jdW1lbnRCdWZmZXIpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhciBiYXRjaCA9IGJhdGNoUmVzdWx0LmJhdGNoO1xyXG4gICAgICAgIHZhciBkb2NLZXlzID0gYmF0Y2gua2V5cygpO1xyXG4gICAgICAgIHZhciBwcm9taXNlQ2hhaW4gPSBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgICAgIGRvY0tleXMuZm9yRWFjaChmdW5jdGlvbiAoZG9jS2V5KSB7XHJcbiAgICAgICAgICAgIHByb21pc2VDaGFpbiA9IHByb21pc2VDaGFpblxyXG4gICAgICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRvY3VtZW50QnVmZmVyLmdldEVudHJ5KHR4biwgZG9jS2V5KTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uIChyZW1vdGVEb2MpIHtcclxuICAgICAgICAgICAgICAgIHZhciBkb2MgPSByZW1vdGVEb2M7XHJcbiAgICAgICAgICAgICAgICB2YXIgYWNrVmVyc2lvbiA9IGJhdGNoUmVzdWx0LmRvY1ZlcnNpb25zLmdldChkb2NLZXkpO1xyXG4gICAgICAgICAgICAgICAgYXNzZXJ0KGFja1ZlcnNpb24gIT09IG51bGwsICdhY2tWZXJzaW9ucyBzaG91bGQgY29udGFpbiBldmVyeSBkb2MgaW4gdGhlIHdyaXRlLicpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFkb2MgfHwgZG9jLnZlcnNpb24uY29tcGFyZVRvKGFja1ZlcnNpb24pIDwgMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRvYyA9IGJhdGNoLmFwcGx5VG9SZW1vdGVEb2N1bWVudChkb2NLZXksIGRvYywgYmF0Y2hSZXN1bHQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghZG9jKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFzc2VydCghcmVtb3RlRG9jLCAnTXV0YXRpb24gYmF0Y2ggJyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXRjaCArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnIGFwcGxpZWQgdG8gZG9jdW1lbnQgJyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW1vdGVEb2MgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJyByZXN1bHRlZCBpbiBudWxsJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBXZSB1c2UgdGhlIGNvbW1pdFZlcnNpb24gYXMgdGhlIHJlYWRUaW1lIHJhdGhlciB0aGFuIHRoZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBkb2N1bWVudCdzIHVwZGF0ZVRpbWUgc2luY2UgdGhlIHVwZGF0ZVRpbWUgaXMgbm90IGFkdmFuY2VkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGZvciB1cGRhdGVzIHRoYXQgZG8gbm90IG1vZGlmeSB0aGUgdW5kZXJseWluZyBkb2N1bWVudC5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnRCdWZmZXIuYWRkRW50cnkoZG9jLCBiYXRjaFJlc3VsdC5jb21taXRWZXJzaW9uKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBwcm9taXNlQ2hhaW4ubmV4dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5tdXRhdGlvblF1ZXVlLnJlbW92ZU11dGF0aW9uQmF0Y2godHhuLCBiYXRjaCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgTG9jYWxTdG9yZS5wcm90b3R5cGUuY29sbGVjdEdhcmJhZ2UgPSBmdW5jdGlvbiAoZ2FyYmFnZUNvbGxlY3Rvcikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oJ0NvbGxlY3QgZ2FyYmFnZScsICdyZWFkd3JpdGUtcHJpbWFyeS1pZGVtcG90ZW50JywgZnVuY3Rpb24gKHR4bikgeyByZXR1cm4gZ2FyYmFnZUNvbGxlY3Rvci5jb2xsZWN0KHR4biwgX3RoaXMudGFyZ2V0RGF0YUJ5VGFyZ2V0KTsgfSk7XHJcbiAgICB9O1xyXG4gICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS10YWIgb25seS5cclxuICAgIExvY2FsU3RvcmUucHJvdG90eXBlLmdldFRhcmdldCA9IGZ1bmN0aW9uICh0YXJnZXRJZCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIGNhY2hlZFRhcmdldERhdGEgPSB0aGlzLnRhcmdldERhdGFCeVRhcmdldC5nZXQodGFyZ2V0SWQpO1xyXG4gICAgICAgIGlmIChjYWNoZWRUYXJnZXREYXRhKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoY2FjaGVkVGFyZ2V0RGF0YS50YXJnZXQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oJ0dldCB0YXJnZXQgZGF0YScsICdyZWFkb25seS1pZGVtcG90ZW50JywgZnVuY3Rpb24gKHR4bikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLnRhcmdldENhY2hlXHJcbiAgICAgICAgICAgICAgICAgICAgLmdldFRhcmdldERhdGFGb3JUYXJnZXQodHhuLCB0YXJnZXRJZClcclxuICAgICAgICAgICAgICAgICAgICAubmV4dChmdW5jdGlvbiAodGFyZ2V0RGF0YSkgeyByZXR1cm4gKHRhcmdldERhdGEgPyB0YXJnZXREYXRhLnRhcmdldCA6IG51bGwpOyB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0aGUgc2V0IG9mIGRvY3VtZW50cyB0aGF0IGhhdmUgYmVlbiB1cGRhdGVkIHNpbmNlIHRoZSBsYXN0IGNhbGwuXHJcbiAgICAgKiBJZiB0aGlzIGlzIHRoZSBmaXJzdCBjYWxsLCByZXR1cm5zIHRoZSBzZXQgb2YgY2hhbmdlcyBzaW5jZSBjbGllbnRcclxuICAgICAqIGluaXRpYWxpemF0aW9uLiBGdXJ0aGVyIGludm9jYXRpb25zIHdpbGwgcmV0dXJuIGRvY3VtZW50IGNoYW5nZXMgc2luY2VcclxuICAgICAqIHRoZSBwb2ludCBvZiByZWplY3Rpb24uXHJcbiAgICAgKi9cclxuICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktdGFiIG9ubHkuXHJcbiAgICBMb2NhbFN0b3JlLnByb3RvdHlwZS5nZXROZXdEb2N1bWVudENoYW5nZXMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICByZXR1cm4gdGhpcy5wZXJzaXN0ZW5jZVxyXG4gICAgICAgICAgICAucnVuVHJhbnNhY3Rpb24oJ0dldCBuZXcgZG9jdW1lbnQgY2hhbmdlcycsICdyZWFkb25seS1pZGVtcG90ZW50JywgZnVuY3Rpb24gKHR4bikge1xyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXMucmVtb3RlRG9jdW1lbnRzLmdldE5ld0RvY3VtZW50Q2hhbmdlcyh0eG4sIF90aGlzLmxhc3REb2N1bWVudENoYW5nZVJlYWRUaW1lKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgdmFyIGNoYW5nZWREb2NzID0gX2EuY2hhbmdlZERvY3MsIHJlYWRUaW1lID0gX2EucmVhZFRpbWU7XHJcbiAgICAgICAgICAgIF90aGlzLmxhc3REb2N1bWVudENoYW5nZVJlYWRUaW1lID0gcmVhZFRpbWU7XHJcbiAgICAgICAgICAgIHJldHVybiBjaGFuZ2VkRG9jcztcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJlYWRzIHRoZSBuZXdlc3QgZG9jdW1lbnQgY2hhbmdlIGZyb20gcGVyc2lzdGVuY2UgYW5kIGZvcndhcmRzIHRoZSBpbnRlcm5hbFxyXG4gICAgICogc3luY2hyb25pemF0aW9uIG1hcmtlciBzbyB0aGF0IGNhbGxzIHRvIGBnZXROZXdEb2N1bWVudENoYW5nZXMoKWBcclxuICAgICAqIG9ubHkgcmV0dXJuIGNoYW5nZXMgdGhhdCBoYXBwZW5lZCBhZnRlciBjbGllbnQgaW5pdGlhbGl6YXRpb24uXHJcbiAgICAgKi9cclxuICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktdGFiIG9ubHkuXHJcbiAgICBMb2NhbFN0b3JlLnByb3RvdHlwZS5zeW5jaHJvbml6ZUxhc3REb2N1bWVudENoYW5nZVJlYWRUaW1lID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0c2xpYi5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHJlbW90ZURvY3VtZW50Q2FjaGVfMTtcclxuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucmVtb3RlRG9jdW1lbnRzIGluc3RhbmNlb2YgSW5kZXhlZERiUmVtb3RlRG9jdW1lbnRDYWNoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlbW90ZURvY3VtZW50Q2FjaGVfMSA9IHRoaXMucmVtb3RlRG9jdW1lbnRzO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0aGlzLnBlcnNpc3RlbmNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAucnVuVHJhbnNhY3Rpb24oJ1N5bmNocm9uaXplIGxhc3QgZG9jdW1lbnQgY2hhbmdlIHJlYWQgdGltZScsICdyZWFkb25seS1pZGVtcG90ZW50JywgZnVuY3Rpb24gKHR4bikgeyByZXR1cm4gcmVtb3RlRG9jdW1lbnRDYWNoZV8xLmdldExhc3REb2N1bWVudENoYW5nZSh0eG4pOyB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVhZFRpbWUgPSBfYS5yZWFkVGltZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmxhc3REb2N1bWVudENoYW5nZVJlYWRUaW1lID0gcmVhZFRpbWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgbWF4aW11bSB0aW1lIHRvIGxlYXZlIGEgcmVzdW1lIHRva2VuIGJ1ZmZlcmVkIHdpdGhvdXQgd3JpdGluZyBpdCBvdXQuXHJcbiAgICAgKiBUaGlzIHZhbHVlIGlzIGFyYml0cmFyeTogaXQncyBsb25nIGVub3VnaCB0byBhdm9pZCBzZXZlcmFsIHdyaXRlc1xyXG4gICAgICogKHBvc3NpYmx5IGluZGVmaW5pdGVseSBpZiB1cGRhdGVzIGNvbWUgbW9yZSBmcmVxdWVudGx5IHRoYW4gdGhpcykgYnV0XHJcbiAgICAgKiBzaG9ydCBlbm91Z2ggdGhhdCByZXN0YXJ0aW5nIGFmdGVyIGNyYXNoaW5nIHdpbGwgc3RpbGwgaGF2ZSBhIHByZXR0eVxyXG4gICAgICogcmVjZW50IHJlc3VtZSB0b2tlbi5cclxuICAgICAqL1xyXG4gICAgTG9jYWxTdG9yZS5SRVNVTUVfVE9LRU5fTUFYX0FHRV9NSUNST1MgPSA1ICogNjAgKiAxZTY7XHJcbiAgICByZXR1cm4gTG9jYWxTdG9yZTtcclxufSgpKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnZhciBNZW1vcnlNdXRhdGlvblF1ZXVlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gTWVtb3J5TXV0YXRpb25RdWV1ZShpbmRleE1hbmFnZXIsIHJlZmVyZW5jZURlbGVnYXRlKSB7XHJcbiAgICAgICAgdGhpcy5pbmRleE1hbmFnZXIgPSBpbmRleE1hbmFnZXI7XHJcbiAgICAgICAgdGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZSA9IHJlZmVyZW5jZURlbGVnYXRlO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRoZSBzZXQgb2YgYWxsIG11dGF0aW9ucyB0aGF0IGhhdmUgYmVlbiBzZW50IGJ1dCBub3QgeWV0IGJlZW4gYXBwbGllZCB0b1xyXG4gICAgICAgICAqIHRoZSBiYWNrZW5kLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMubXV0YXRpb25RdWV1ZSA9IFtdO1xyXG4gICAgICAgIC8qKiBOZXh0IHZhbHVlIHRvIHVzZSB3aGVuIGFzc2lnbmluZyBzZXF1ZW50aWFsIElEcyB0byBlYWNoIG11dGF0aW9uIGJhdGNoLiAqL1xyXG4gICAgICAgIHRoaXMubmV4dEJhdGNoSWQgPSAxO1xyXG4gICAgICAgIC8qKiBUaGUgbGFzdCByZWNlaXZlZCBzdHJlYW0gdG9rZW4gZnJvbSB0aGUgc2VydmVyLCB1c2VkIHRvIGFja25vd2xlZGdlIHdoaWNoXHJcbiAgICAgICAgICogcmVzcG9uc2VzIHRoZSBjbGllbnQgaGFzIHByb2Nlc3NlZC4gU3RyZWFtIHRva2VucyBhcmUgb3BhcXVlIGNoZWNrcG9pbnRcclxuICAgICAgICAgKiBtYXJrZXJzIHdob3NlIG9ubHkgcmVhbCB2YWx1ZSBpcyB0aGVpciBpbmNsdXNpb24gaW4gdGhlIG5leHQgcmVxdWVzdC5cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLmxhc3RTdHJlYW1Ub2tlbiA9IGVtcHR5Qnl0ZVN0cmluZygpO1xyXG4gICAgICAgIC8qKiBBbiBvcmRlcmVkIG1hcHBpbmcgYmV0d2VlbiBkb2N1bWVudHMgYW5kIHRoZSBtdXRhdGlvbnMgYmF0Y2ggSURzLiAqL1xyXG4gICAgICAgIHRoaXMuYmF0Y2hlc0J5RG9jdW1lbnRLZXkgPSBuZXcgU29ydGVkU2V0KERvY1JlZmVyZW5jZS5jb21wYXJlQnlLZXkpO1xyXG4gICAgfVxyXG4gICAgTWVtb3J5TXV0YXRpb25RdWV1ZS5wcm90b3R5cGUuY2hlY2tFbXB0eSA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbikge1xyXG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSh0aGlzLm11dGF0aW9uUXVldWUubGVuZ3RoID09PSAwKTtcclxuICAgIH07XHJcbiAgICBNZW1vcnlNdXRhdGlvblF1ZXVlLnByb3RvdHlwZS5hY2tub3dsZWRnZUJhdGNoID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCBiYXRjaCwgc3RyZWFtVG9rZW4pIHtcclxuICAgICAgICB2YXIgYmF0Y2hJZCA9IGJhdGNoLmJhdGNoSWQ7XHJcbiAgICAgICAgdmFyIGJhdGNoSW5kZXggPSB0aGlzLmluZGV4T2ZFeGlzdGluZ0JhdGNoSWQoYmF0Y2hJZCwgJ2Fja25vd2xlZGdlZCcpO1xyXG4gICAgICAgIGFzc2VydChiYXRjaEluZGV4ID09PSAwLCAnQ2FuIG9ubHkgYWNrbm93bGVkZ2UgdGhlIGZpcnN0IGJhdGNoIGluIHRoZSBtdXRhdGlvbiBxdWV1ZScpO1xyXG4gICAgICAgIC8vIFZlcmlmeSB0aGF0IHRoZSBiYXRjaCBpbiB0aGUgcXVldWUgaXMgdGhlIG9uZSB0byBiZSBhY2tub3dsZWRnZWQuXHJcbiAgICAgICAgdmFyIGNoZWNrID0gdGhpcy5tdXRhdGlvblF1ZXVlW2JhdGNoSW5kZXhdO1xyXG4gICAgICAgIGFzc2VydChiYXRjaElkID09PSBjaGVjay5iYXRjaElkLCAnUXVldWUgb3JkZXJpbmcgZmFpbHVyZTogZXhwZWN0ZWQgYmF0Y2ggJyArXHJcbiAgICAgICAgICAgIGJhdGNoSWQgK1xyXG4gICAgICAgICAgICAnLCBnb3QgYmF0Y2ggJyArXHJcbiAgICAgICAgICAgIGNoZWNrLmJhdGNoSWQpO1xyXG4gICAgICAgIHRoaXMubGFzdFN0cmVhbVRva2VuID0gc3RyZWFtVG9rZW47XHJcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5TXV0YXRpb25RdWV1ZS5wcm90b3R5cGUuZ2V0TGFzdFN0cmVhbVRva2VuID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uKSB7XHJcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKHRoaXMubGFzdFN0cmVhbVRva2VuKTtcclxuICAgIH07XHJcbiAgICBNZW1vcnlNdXRhdGlvblF1ZXVlLnByb3RvdHlwZS5zZXRMYXN0U3RyZWFtVG9rZW4gPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24sIHN0cmVhbVRva2VuKSB7XHJcbiAgICAgICAgdGhpcy5sYXN0U3RyZWFtVG9rZW4gPSBzdHJlYW1Ub2tlbjtcclxuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoKTtcclxuICAgIH07XHJcbiAgICBNZW1vcnlNdXRhdGlvblF1ZXVlLnByb3RvdHlwZS5hZGRNdXRhdGlvbkJhdGNoID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCBsb2NhbFdyaXRlVGltZSwgYmFzZU11dGF0aW9ucywgbXV0YXRpb25zKSB7XHJcbiAgICAgICAgYXNzZXJ0KG11dGF0aW9ucy5sZW5ndGggIT09IDAsICdNdXRhdGlvbiBiYXRjaGVzIHNob3VsZCBub3QgYmUgZW1wdHknKTtcclxuICAgICAgICB2YXIgYmF0Y2hJZCA9IHRoaXMubmV4dEJhdGNoSWQ7XHJcbiAgICAgICAgdGhpcy5uZXh0QmF0Y2hJZCsrO1xyXG4gICAgICAgIGlmICh0aGlzLm11dGF0aW9uUXVldWUubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICB2YXIgcHJpb3IgPSB0aGlzLm11dGF0aW9uUXVldWVbdGhpcy5tdXRhdGlvblF1ZXVlLmxlbmd0aCAtIDFdO1xyXG4gICAgICAgICAgICBhc3NlcnQocHJpb3IuYmF0Y2hJZCA8IGJhdGNoSWQsICdNdXRhdGlvbiBiYXRjaElEcyBtdXN0IGJlIG1vbm90b25pY2FsbHkgaW5jcmVhc2luZyBvcmRlcicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgYmF0Y2ggPSBuZXcgTXV0YXRpb25CYXRjaChiYXRjaElkLCBsb2NhbFdyaXRlVGltZSwgYmFzZU11dGF0aW9ucywgbXV0YXRpb25zKTtcclxuICAgICAgICB0aGlzLm11dGF0aW9uUXVldWUucHVzaChiYXRjaCk7XHJcbiAgICAgICAgLy8gVHJhY2sgcmVmZXJlbmNlcyBieSBkb2N1bWVudCBrZXkgYW5kIGluZGV4IGNvbGxlY3Rpb24gcGFyZW50cy5cclxuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIG11dGF0aW9uc18xID0gbXV0YXRpb25zOyBfaSA8IG11dGF0aW9uc18xLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICB2YXIgbXV0YXRpb24gPSBtdXRhdGlvbnNfMVtfaV07XHJcbiAgICAgICAgICAgIHRoaXMuYmF0Y2hlc0J5RG9jdW1lbnRLZXkgPSB0aGlzLmJhdGNoZXNCeURvY3VtZW50S2V5LmFkZChuZXcgRG9jUmVmZXJlbmNlKG11dGF0aW9uLmtleSwgYmF0Y2hJZCkpO1xyXG4gICAgICAgICAgICB0aGlzLmluZGV4TWFuYWdlci5hZGRUb0NvbGxlY3Rpb25QYXJlbnRJbmRleCh0cmFuc2FjdGlvbiwgbXV0YXRpb24ua2V5LnBhdGgucG9wTGFzdCgpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKGJhdGNoKTtcclxuICAgIH07XHJcbiAgICBNZW1vcnlNdXRhdGlvblF1ZXVlLnByb3RvdHlwZS5sb29rdXBNdXRhdGlvbkJhdGNoID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCBiYXRjaElkKSB7XHJcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKHRoaXMuZmluZE11dGF0aW9uQmF0Y2goYmF0Y2hJZCkpO1xyXG4gICAgfTtcclxuICAgIE1lbW9yeU11dGF0aW9uUXVldWUucHJvdG90eXBlLmxvb2t1cE11dGF0aW9uS2V5cyA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwgYmF0Y2hJZCkge1xyXG4gICAgICAgIHZhciBtdXRhdGlvbkJhdGNoID0gdGhpcy5maW5kTXV0YXRpb25CYXRjaChiYXRjaElkKTtcclxuICAgICAgICBhc3NlcnQobXV0YXRpb25CYXRjaCAhPSBudWxsLCAnRmFpbGVkIHRvIGZpbmQgbG9jYWwgbXV0YXRpb24gYmF0Y2guJyk7XHJcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKG11dGF0aW9uQmF0Y2gua2V5cygpKTtcclxuICAgIH07XHJcbiAgICBNZW1vcnlNdXRhdGlvblF1ZXVlLnByb3RvdHlwZS5nZXROZXh0TXV0YXRpb25CYXRjaEFmdGVyQmF0Y2hJZCA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwgYmF0Y2hJZCkge1xyXG4gICAgICAgIHZhciBuZXh0QmF0Y2hJZCA9IGJhdGNoSWQgKyAxO1xyXG4gICAgICAgIC8vIFRoZSByZXF1ZXN0ZWQgYmF0Y2hJZCBtYXkgc3RpbGwgYmUgb3V0IG9mIHJhbmdlIHNvIG5vcm1hbGl6ZSBpdCB0byB0aGVcclxuICAgICAgICAvLyBzdGFydCBvZiB0aGUgcXVldWUuXHJcbiAgICAgICAgdmFyIHJhd0luZGV4ID0gdGhpcy5pbmRleE9mQmF0Y2hJZChuZXh0QmF0Y2hJZCk7XHJcbiAgICAgICAgdmFyIGluZGV4ID0gcmF3SW5kZXggPCAwID8gMCA6IHJhd0luZGV4O1xyXG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSh0aGlzLm11dGF0aW9uUXVldWUubGVuZ3RoID4gaW5kZXggPyB0aGlzLm11dGF0aW9uUXVldWVbaW5kZXhdIDogbnVsbCk7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5TXV0YXRpb25RdWV1ZS5wcm90b3R5cGUuZ2V0SGlnaGVzdFVuYWNrbm93bGVkZ2VkQmF0Y2hJZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUodGhpcy5tdXRhdGlvblF1ZXVlLmxlbmd0aCA9PT0gMCA/IEJBVENISURfVU5LTk9XTiA6IHRoaXMubmV4dEJhdGNoSWQgLSAxKTtcclxuICAgIH07XHJcbiAgICBNZW1vcnlNdXRhdGlvblF1ZXVlLnByb3RvdHlwZS5nZXRBbGxNdXRhdGlvbkJhdGNoZXMgPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24pIHtcclxuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUodGhpcy5tdXRhdGlvblF1ZXVlLnNsaWNlKCkpO1xyXG4gICAgfTtcclxuICAgIE1lbW9yeU11dGF0aW9uUXVldWUucHJvdG90eXBlLmdldEFsbE11dGF0aW9uQmF0Y2hlc0FmZmVjdGluZ0RvY3VtZW50S2V5ID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCBkb2N1bWVudEtleSkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIHN0YXJ0ID0gbmV3IERvY1JlZmVyZW5jZShkb2N1bWVudEtleSwgMCk7XHJcbiAgICAgICAgdmFyIGVuZCA9IG5ldyBEb2NSZWZlcmVuY2UoZG9jdW1lbnRLZXksIE51bWJlci5QT1NJVElWRV9JTkZJTklUWSk7XHJcbiAgICAgICAgdmFyIHJlc3VsdCA9IFtdO1xyXG4gICAgICAgIHRoaXMuYmF0Y2hlc0J5RG9jdW1lbnRLZXkuZm9yRWFjaEluUmFuZ2UoW3N0YXJ0LCBlbmRdLCBmdW5jdGlvbiAocmVmKSB7XHJcbiAgICAgICAgICAgIGFzc2VydChkb2N1bWVudEtleS5pc0VxdWFsKHJlZi5rZXkpLCBcIlNob3VsZCBvbmx5IGl0ZXJhdGUgb3ZlciBhIHNpbmdsZSBrZXkncyBiYXRjaGVzXCIpO1xyXG4gICAgICAgICAgICB2YXIgYmF0Y2ggPSBfdGhpcy5maW5kTXV0YXRpb25CYXRjaChyZWYudGFyZ2V0T3JCYXRjaElkKTtcclxuICAgICAgICAgICAgYXNzZXJ0KGJhdGNoICE9PSBudWxsLCAnQmF0Y2hlcyBpbiB0aGUgaW5kZXggbXVzdCBleGlzdCBpbiB0aGUgbWFpbiB0YWJsZScpO1xyXG4gICAgICAgICAgICByZXN1bHQucHVzaChiYXRjaCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKHJlc3VsdCk7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5TXV0YXRpb25RdWV1ZS5wcm90b3R5cGUuZ2V0QWxsTXV0YXRpb25CYXRjaGVzQWZmZWN0aW5nRG9jdW1lbnRLZXlzID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCBkb2N1bWVudEtleXMpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhciB1bmlxdWVCYXRjaElEcyA9IG5ldyBTb3J0ZWRTZXQocHJpbWl0aXZlQ29tcGFyYXRvcik7XHJcbiAgICAgICAgZG9jdW1lbnRLZXlzLmZvckVhY2goZnVuY3Rpb24gKGRvY3VtZW50S2V5KSB7XHJcbiAgICAgICAgICAgIHZhciBzdGFydCA9IG5ldyBEb2NSZWZlcmVuY2UoZG9jdW1lbnRLZXksIDApO1xyXG4gICAgICAgICAgICB2YXIgZW5kID0gbmV3IERvY1JlZmVyZW5jZShkb2N1bWVudEtleSwgTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZKTtcclxuICAgICAgICAgICAgX3RoaXMuYmF0Y2hlc0J5RG9jdW1lbnRLZXkuZm9yRWFjaEluUmFuZ2UoW3N0YXJ0LCBlbmRdLCBmdW5jdGlvbiAocmVmKSB7XHJcbiAgICAgICAgICAgICAgICBhc3NlcnQoZG9jdW1lbnRLZXkuaXNFcXVhbChyZWYua2V5KSwgXCJGb3IgZWFjaCBrZXksIHNob3VsZCBvbmx5IGl0ZXJhdGUgb3ZlciBhIHNpbmdsZSBrZXkncyBiYXRjaGVzXCIpO1xyXG4gICAgICAgICAgICAgICAgdW5pcXVlQmF0Y2hJRHMgPSB1bmlxdWVCYXRjaElEcy5hZGQocmVmLnRhcmdldE9yQmF0Y2hJZCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSh0aGlzLmZpbmRNdXRhdGlvbkJhdGNoZXModW5pcXVlQmF0Y2hJRHMpKTtcclxuICAgIH07XHJcbiAgICBNZW1vcnlNdXRhdGlvblF1ZXVlLnByb3RvdHlwZS5nZXRBbGxNdXRhdGlvbkJhdGNoZXNBZmZlY3RpbmdRdWVyeSA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwgcXVlcnkpIHtcclxuICAgICAgICBhc3NlcnQoIXF1ZXJ5LmlzQ29sbGVjdGlvbkdyb3VwUXVlcnkoKSwgJ0NvbGxlY3Rpb25Hcm91cCBxdWVyaWVzIHNob3VsZCBiZSBoYW5kbGVkIGluIExvY2FsRG9jdW1lbnRzVmlldycpO1xyXG4gICAgICAgIC8vIFVzZSB0aGUgcXVlcnkgcGF0aCBhcyBhIHByZWZpeCBmb3IgdGVzdGluZyBpZiBhIGRvY3VtZW50IG1hdGNoZXMgdGhlXHJcbiAgICAgICAgLy8gcXVlcnkuXHJcbiAgICAgICAgdmFyIHByZWZpeCA9IHF1ZXJ5LnBhdGg7XHJcbiAgICAgICAgdmFyIGltbWVkaWF0ZUNoaWxkcmVuUGF0aExlbmd0aCA9IHByZWZpeC5sZW5ndGggKyAxO1xyXG4gICAgICAgIC8vIENvbnN0cnVjdCBhIGRvY3VtZW50IHJlZmVyZW5jZSBmb3IgYWN0dWFsbHkgc2Nhbm5pbmcgdGhlIGluZGV4LiBVbmxpa2VcclxuICAgICAgICAvLyB0aGUgcHJlZml4IHRoZSBkb2N1bWVudCBrZXkgaW4gdGhpcyByZWZlcmVuY2UgbXVzdCBoYXZlIGFuIGV2ZW4gbnVtYmVyIG9mXHJcbiAgICAgICAgLy8gc2VnbWVudHMuIFRoZSBlbXB0eSBzZWdtZW50IGNhbiBiZSB1c2VkIGEgc3VmZml4IG9mIHRoZSBxdWVyeSBwYXRoXHJcbiAgICAgICAgLy8gYmVjYXVzZSBpdCBwcmVjZWRlcyBhbGwgb3RoZXIgc2VnbWVudHMgaW4gYW4gb3JkZXJlZCB0cmF2ZXJzYWwuXHJcbiAgICAgICAgdmFyIHN0YXJ0UGF0aCA9IHByZWZpeDtcclxuICAgICAgICBpZiAoIURvY3VtZW50S2V5LmlzRG9jdW1lbnRLZXkoc3RhcnRQYXRoKSkge1xyXG4gICAgICAgICAgICBzdGFydFBhdGggPSBzdGFydFBhdGguY2hpbGQoJycpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgc3RhcnQgPSBuZXcgRG9jUmVmZXJlbmNlKG5ldyBEb2N1bWVudEtleShzdGFydFBhdGgpLCAwKTtcclxuICAgICAgICAvLyBGaW5kIHVuaXF1ZSBiYXRjaElEcyByZWZlcmVuY2VkIGJ5IGFsbCBkb2N1bWVudHMgcG90ZW50aWFsbHkgbWF0Y2hpbmcgdGhlXHJcbiAgICAgICAgLy8gcXVlcnkuXHJcbiAgICAgICAgdmFyIHVuaXF1ZUJhdGNoSURzID0gbmV3IFNvcnRlZFNldChwcmltaXRpdmVDb21wYXJhdG9yKTtcclxuICAgICAgICB0aGlzLmJhdGNoZXNCeURvY3VtZW50S2V5LmZvckVhY2hXaGlsZShmdW5jdGlvbiAocmVmKSB7XHJcbiAgICAgICAgICAgIHZhciByb3dLZXlQYXRoID0gcmVmLmtleS5wYXRoO1xyXG4gICAgICAgICAgICBpZiAoIXByZWZpeC5pc1ByZWZpeE9mKHJvd0tleVBhdGgpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBSb3dzIHdpdGggZG9jdW1lbnQga2V5cyBtb3JlIHRoYW4gb25lIHNlZ21lbnQgbG9uZ2VyIHRoYW4gdGhlIHF1ZXJ5XHJcbiAgICAgICAgICAgICAgICAvLyBwYXRoIGNhbid0IGJlIG1hdGNoZXMuIEZvciBleGFtcGxlLCBhIHF1ZXJ5IG9uICdyb29tcycgY2FuJ3QgbWF0Y2hcclxuICAgICAgICAgICAgICAgIC8vIHRoZSBkb2N1bWVudCAvcm9vbXMvYWJjL21lc3NhZ2VzL3h5eC5cclxuICAgICAgICAgICAgICAgIC8vIFRPRE8obWNnKTogd2UnbGwgbmVlZCBhIGRpZmZlcmVudCBzY2FubmVyIHdoZW4gd2UgaW1wbGVtZW50XHJcbiAgICAgICAgICAgICAgICAvLyBhbmNlc3RvciBxdWVyaWVzLlxyXG4gICAgICAgICAgICAgICAgaWYgKHJvd0tleVBhdGgubGVuZ3RoID09PSBpbW1lZGlhdGVDaGlsZHJlblBhdGhMZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICB1bmlxdWVCYXRjaElEcyA9IHVuaXF1ZUJhdGNoSURzLmFkZChyZWYudGFyZ2V0T3JCYXRjaElkKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSwgc3RhcnQpO1xyXG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSh0aGlzLmZpbmRNdXRhdGlvbkJhdGNoZXModW5pcXVlQmF0Y2hJRHMpKTtcclxuICAgIH07XHJcbiAgICBNZW1vcnlNdXRhdGlvblF1ZXVlLnByb3RvdHlwZS5maW5kTXV0YXRpb25CYXRjaGVzID0gZnVuY3Rpb24gKGJhdGNoSURzKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICAvLyBDb25zdHJ1Y3QgYW4gYXJyYXkgb2YgbWF0Y2hpbmcgYmF0Y2hlcywgc29ydGVkIGJ5IGJhdGNoSUQgdG8gZW5zdXJlIHRoYXRcclxuICAgICAgICAvLyBtdWx0aXBsZSBtdXRhdGlvbnMgYWZmZWN0aW5nIHRoZSBzYW1lIGRvY3VtZW50IGtleSBhcmUgYXBwbGllZCBpbiBvcmRlci5cclxuICAgICAgICB2YXIgcmVzdWx0ID0gW107XHJcbiAgICAgICAgYmF0Y2hJRHMuZm9yRWFjaChmdW5jdGlvbiAoYmF0Y2hJZCkge1xyXG4gICAgICAgICAgICB2YXIgYmF0Y2ggPSBfdGhpcy5maW5kTXV0YXRpb25CYXRjaChiYXRjaElkKTtcclxuICAgICAgICAgICAgaWYgKGJhdGNoICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICByZXN1bHQucHVzaChiYXRjaCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfTtcclxuICAgIE1lbW9yeU11dGF0aW9uUXVldWUucHJvdG90eXBlLnJlbW92ZU11dGF0aW9uQmF0Y2ggPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24sIGJhdGNoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICAvLyBGaW5kIHRoZSBwb3NpdGlvbiBvZiB0aGUgZmlyc3QgYmF0Y2ggZm9yIHJlbW92YWwuIFRoaXMgbmVlZCBub3QgYmUgdGhlXHJcbiAgICAgICAgLy8gZmlyc3QgZW50cnkgaW4gdGhlIHF1ZXVlLlxyXG4gICAgICAgIHZhciBiYXRjaEluZGV4ID0gdGhpcy5pbmRleE9mRXhpc3RpbmdCYXRjaElkKGJhdGNoLmJhdGNoSWQsICdyZW1vdmVkJyk7XHJcbiAgICAgICAgYXNzZXJ0KGJhdGNoSW5kZXggPT09IDAsICdDYW4gb25seSByZW1vdmUgdGhlIGZpcnN0IGVudHJ5IG9mIHRoZSBtdXRhdGlvbiBxdWV1ZScpO1xyXG4gICAgICAgIHRoaXMubXV0YXRpb25RdWV1ZS5zaGlmdCgpO1xyXG4gICAgICAgIHZhciByZWZlcmVuY2VzID0gdGhpcy5iYXRjaGVzQnlEb2N1bWVudEtleTtcclxuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLmZvckVhY2goYmF0Y2gubXV0YXRpb25zLCBmdW5jdGlvbiAobXV0YXRpb24pIHtcclxuICAgICAgICAgICAgdmFyIHJlZiA9IG5ldyBEb2NSZWZlcmVuY2UobXV0YXRpb24ua2V5LCBiYXRjaC5iYXRjaElkKTtcclxuICAgICAgICAgICAgcmVmZXJlbmNlcyA9IHJlZmVyZW5jZXMuZGVsZXRlKHJlZik7XHJcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZS5yZW1vdmVNdXRhdGlvblJlZmVyZW5jZSh0cmFuc2FjdGlvbiwgbXV0YXRpb24ua2V5KTtcclxuICAgICAgICB9KS5uZXh0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgX3RoaXMuYmF0Y2hlc0J5RG9jdW1lbnRLZXkgPSByZWZlcmVuY2VzO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIE1lbW9yeU11dGF0aW9uUXVldWUucHJvdG90eXBlLnJlbW92ZUNhY2hlZE11dGF0aW9uS2V5cyA9IGZ1bmN0aW9uIChiYXRjaElkKSB7XHJcbiAgICAgICAgLy8gTm8tb3Agc2luY2UgdGhlIG1lbW9yeSBtdXRhdGlvbiBxdWV1ZSBkb2VzIG5vdCBtYWludGFpbiBhIHNlcGFyYXRlIGNhY2hlLlxyXG4gICAgfTtcclxuICAgIE1lbW9yeU11dGF0aW9uUXVldWUucHJvdG90eXBlLmNvbnRhaW5zS2V5ID0gZnVuY3Rpb24gKHR4biwga2V5KSB7XHJcbiAgICAgICAgdmFyIHJlZiA9IG5ldyBEb2NSZWZlcmVuY2Uoa2V5LCAwKTtcclxuICAgICAgICB2YXIgZmlyc3RSZWYgPSB0aGlzLmJhdGNoZXNCeURvY3VtZW50S2V5LmZpcnN0QWZ0ZXJPckVxdWFsKHJlZik7XHJcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKGtleS5pc0VxdWFsKGZpcnN0UmVmICYmIGZpcnN0UmVmLmtleSkpO1xyXG4gICAgfTtcclxuICAgIE1lbW9yeU11dGF0aW9uUXVldWUucHJvdG90eXBlLnBlcmZvcm1Db25zaXN0ZW5jeUNoZWNrID0gZnVuY3Rpb24gKHR4bikge1xyXG4gICAgICAgIGlmICh0aGlzLm11dGF0aW9uUXVldWUubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIGFzc2VydCh0aGlzLmJhdGNoZXNCeURvY3VtZW50S2V5LmlzRW1wdHkoKSwgJ0RvY3VtZW50IGxlYWsgLS0gZGV0ZWN0ZWQgZGFuZ2xpbmcgbXV0YXRpb24gcmVmZXJlbmNlcyB3aGVuIHF1ZXVlIGlzIGVtcHR5LicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEZpbmRzIHRoZSBpbmRleCBvZiB0aGUgZ2l2ZW4gYmF0Y2hJZCBpbiB0aGUgbXV0YXRpb24gcXVldWUgYW5kIGFzc2VydHMgdGhhdFxyXG4gICAgICogdGhlIHJlc3VsdGluZyBpbmRleCBpcyB3aXRoaW4gdGhlIGJvdW5kcyBvZiB0aGUgcXVldWUuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGJhdGNoSWQgVGhlIGJhdGNoSWQgdG8gc2VhcmNoIGZvclxyXG4gICAgICogQHBhcmFtIGFjdGlvbiBBIGRlc2NyaXB0aW9uIG9mIHdoYXQgdGhlIGNhbGxlciBpcyBkb2luZywgcGhyYXNlZCBpbiBwYXNzaXZlXHJcbiAgICAgKiBmb3JtIChlLmcuIFwiYWNrbm93bGVkZ2VkXCIgaW4gYSByb3V0aW5lIHRoYXQgYWNrbm93bGVkZ2VzIGJhdGNoZXMpLlxyXG4gICAgICovXHJcbiAgICBNZW1vcnlNdXRhdGlvblF1ZXVlLnByb3RvdHlwZS5pbmRleE9mRXhpc3RpbmdCYXRjaElkID0gZnVuY3Rpb24gKGJhdGNoSWQsIGFjdGlvbikge1xyXG4gICAgICAgIHZhciBpbmRleCA9IHRoaXMuaW5kZXhPZkJhdGNoSWQoYmF0Y2hJZCk7XHJcbiAgICAgICAgYXNzZXJ0KGluZGV4ID49IDAgJiYgaW5kZXggPCB0aGlzLm11dGF0aW9uUXVldWUubGVuZ3RoLCAnQmF0Y2hlcyBtdXN0IGV4aXN0IHRvIGJlICcgKyBhY3Rpb24pO1xyXG4gICAgICAgIHJldHVybiBpbmRleDtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEZpbmRzIHRoZSBpbmRleCBvZiB0aGUgZ2l2ZW4gYmF0Y2hJZCBpbiB0aGUgbXV0YXRpb24gcXVldWUuIFRoaXMgb3BlcmF0aW9uXHJcbiAgICAgKiBpcyBPKDEpLlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm4gVGhlIGNvbXB1dGVkIGluZGV4IG9mIHRoZSBiYXRjaCB3aXRoIHRoZSBnaXZlbiBiYXRjaElkLCBiYXNlZCBvblxyXG4gICAgICogdGhlIHN0YXRlIG9mIHRoZSBxdWV1ZS4gTm90ZSB0aGlzIGluZGV4IGNhbiBiZSBuZWdhdGl2ZSBpZiB0aGUgcmVxdWVzdGVkXHJcbiAgICAgKiBiYXRjaElkIGhhcyBhbHJlYWR5IGJlZW4gcmVtdm9lZCBmcm9tIHRoZSBxdWV1ZSBvciBwYXN0IHRoZSBlbmQgb2YgdGhlXHJcbiAgICAgKiBxdWV1ZSBpZiB0aGUgYmF0Y2hJZCBpcyBsYXJnZXIgdGhhbiB0aGUgbGFzdCBhZGRlZCBiYXRjaC5cclxuICAgICAqL1xyXG4gICAgTWVtb3J5TXV0YXRpb25RdWV1ZS5wcm90b3R5cGUuaW5kZXhPZkJhdGNoSWQgPSBmdW5jdGlvbiAoYmF0Y2hJZCkge1xyXG4gICAgICAgIGlmICh0aGlzLm11dGF0aW9uUXVldWUubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIC8vIEFzIGFuIGluZGV4IHRoaXMgaXMgcGFzdCB0aGUgZW5kIG9mIHRoZSBxdWV1ZVxyXG4gICAgICAgICAgICByZXR1cm4gMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gRXhhbWluZSB0aGUgZnJvbnQgb2YgdGhlIHF1ZXVlIHRvIGZpZ3VyZSBvdXQgdGhlIGRpZmZlcmVuY2UgYmV0d2VlbiB0aGVcclxuICAgICAgICAvLyBiYXRjaElkIGFuZCBpbmRleGVzIGluIHRoZSBhcnJheS4gTm90ZSB0aGF0IHNpbmNlIHRoZSBxdWV1ZSBpcyBvcmRlcmVkXHJcbiAgICAgICAgLy8gYnkgYmF0Y2hJZCwgaWYgdGhlIGZpcnN0IGJhdGNoIGhhcyBhIGxhcmdlciBiYXRjaElkIHRoZW4gdGhlIHJlcXVlc3RlZFxyXG4gICAgICAgIC8vIGJhdGNoSWQgZG9lc24ndCBleGlzdCBpbiB0aGUgcXVldWUuXHJcbiAgICAgICAgdmFyIGZpcnN0QmF0Y2hJZCA9IHRoaXMubXV0YXRpb25RdWV1ZVswXS5iYXRjaElkO1xyXG4gICAgICAgIHJldHVybiBiYXRjaElkIC0gZmlyc3RCYXRjaElkO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQSB2ZXJzaW9uIG9mIGxvb2t1cE11dGF0aW9uQmF0Y2ggdGhhdCBkb2Vzbid0IHJldHVybiBhIHByb21pc2UsIHRoaXMgbWFrZXNcclxuICAgICAqIG90aGVyIGZ1bmN0aW9ucyB0aGF0IHVzZXMgdGhpcyBjb2RlIGVhc2llciB0byByZWFkIGFuZCBtb3JlIGVmZmljZW50LlxyXG4gICAgICovXHJcbiAgICBNZW1vcnlNdXRhdGlvblF1ZXVlLnByb3RvdHlwZS5maW5kTXV0YXRpb25CYXRjaCA9IGZ1bmN0aW9uIChiYXRjaElkKSB7XHJcbiAgICAgICAgdmFyIGluZGV4ID0gdGhpcy5pbmRleE9mQmF0Y2hJZChiYXRjaElkKTtcclxuICAgICAgICBpZiAoaW5kZXggPCAwIHx8IGluZGV4ID49IHRoaXMubXV0YXRpb25RdWV1ZS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBiYXRjaCA9IHRoaXMubXV0YXRpb25RdWV1ZVtpbmRleF07XHJcbiAgICAgICAgYXNzZXJ0KGJhdGNoLmJhdGNoSWQgPT09IGJhdGNoSWQsICdJZiBmb3VuZCBiYXRjaCBtdXN0IG1hdGNoJyk7XHJcbiAgICAgICAgcmV0dXJuIGJhdGNoO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBNZW1vcnlNdXRhdGlvblF1ZXVlO1xyXG59KCkpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gZG9jdW1lbnRFbnRyeU1hcCgpIHtcclxuICAgIHJldHVybiBuZXcgU29ydGVkTWFwKERvY3VtZW50S2V5LmNvbXBhcmF0b3IpO1xyXG59XHJcbnZhciBNZW1vcnlSZW1vdGVEb2N1bWVudENhY2hlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0gc2l6ZXIgVXNlZCB0byBhc3Nlc3MgdGhlIHNpemUgb2YgYSBkb2N1bWVudC4gRm9yIGVhZ2VyIEdDLCB0aGlzIGlzIGV4cGVjdGVkIHRvIGp1c3RcclxuICAgICAqIHJldHVybiAwIHRvIGF2b2lkIHVubmVjZXNzYXJpbHkgZG9pbmcgdGhlIHdvcmsgb2YgY2FsY3VsYXRpbmcgdGhlIHNpemUuXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIE1lbW9yeVJlbW90ZURvY3VtZW50Q2FjaGUoaW5kZXhNYW5hZ2VyLCBzaXplcikge1xyXG4gICAgICAgIHRoaXMuaW5kZXhNYW5hZ2VyID0gaW5kZXhNYW5hZ2VyO1xyXG4gICAgICAgIHRoaXMuc2l6ZXIgPSBzaXplcjtcclxuICAgICAgICAvKiogVW5kZXJseWluZyBjYWNoZSBvZiBkb2N1bWVudHMgYW5kIHRoZWlyIHJlYWQgdGltZXMuICovXHJcbiAgICAgICAgdGhpcy5kb2NzID0gZG9jdW1lbnRFbnRyeU1hcCgpO1xyXG4gICAgICAgIC8qKiBTaXplIG9mIGFsbCBjYWNoZWQgZG9jdW1lbnRzLiAqL1xyXG4gICAgICAgIHRoaXMuc2l6ZSA9IDA7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEFkZHMgdGhlIHN1cHBsaWVkIGVudHJ5IHRvIHRoZSBjYWNoZSBhbmQgdXBkYXRlcyB0aGUgY2FjaGUgc2l6ZSBhcyBhcHByb3ByaWF0ZS5cclxuICAgICAqXHJcbiAgICAgKiBBbGwgY2FsbHMgb2YgYGFkZEVudHJ5YCAgYXJlIHJlcXVpcmVkIHRvIGdvIHRocm91Z2ggdGhlIFJlbW90ZURvY3VtZW50Q2hhbmdlQnVmZmVyXHJcbiAgICAgKiByZXR1cm5lZCBieSBgbmV3Q2hhbmdlQnVmZmVyKClgLlxyXG4gICAgICovXHJcbiAgICBNZW1vcnlSZW1vdGVEb2N1bWVudENhY2hlLnByb3RvdHlwZS5hZGRFbnRyeSA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwgZG9jLCByZWFkVGltZSkge1xyXG4gICAgICAgIGFzc2VydCghcmVhZFRpbWUuaXNFcXVhbChTbmFwc2hvdFZlcnNpb24uTUlOKSwgJ0Nhbm5vdCBhZGQgYSBkb2N1bWVudCB3aXRoIGEgcmVhZCB0aW1lIG9mIHplcm8nKTtcclxuICAgICAgICB2YXIga2V5ID0gZG9jLmtleTtcclxuICAgICAgICB2YXIgZW50cnkgPSB0aGlzLmRvY3MuZ2V0KGtleSk7XHJcbiAgICAgICAgdmFyIHByZXZpb3VzU2l6ZSA9IGVudHJ5ID8gZW50cnkuc2l6ZSA6IDA7XHJcbiAgICAgICAgdmFyIGN1cnJlbnRTaXplID0gdGhpcy5zaXplcihkb2MpO1xyXG4gICAgICAgIHRoaXMuZG9jcyA9IHRoaXMuZG9jcy5pbnNlcnQoa2V5LCB7XHJcbiAgICAgICAgICAgIG1heWJlRG9jdW1lbnQ6IGRvYyxcclxuICAgICAgICAgICAgc2l6ZTogY3VycmVudFNpemUsXHJcbiAgICAgICAgICAgIHJlYWRUaW1lOiByZWFkVGltZVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuc2l6ZSArPSBjdXJyZW50U2l6ZSAtIHByZXZpb3VzU2l6ZTtcclxuICAgICAgICByZXR1cm4gdGhpcy5pbmRleE1hbmFnZXIuYWRkVG9Db2xsZWN0aW9uUGFyZW50SW5kZXgodHJhbnNhY3Rpb24sIGtleS5wYXRoLnBvcExhc3QoKSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZW1vdmVzIHRoZSBzcGVjaWZpZWQgZW50cnkgZnJvbSB0aGUgY2FjaGUgYW5kIHVwZGF0ZXMgdGhlIGNhY2hlIHNpemUgYXMgYXBwcm9wcmlhdGUuXHJcbiAgICAgKlxyXG4gICAgICogQWxsIGNhbGxzIG9mIGByZW1vdmVFbnRyeWAgYXJlIHJlcXVpcmVkIHRvIGdvIHRocm91Z2ggdGhlIFJlbW90ZURvY3VtZW50Q2hhbmdlQnVmZmVyXHJcbiAgICAgKiByZXR1cm5lZCBieSBgbmV3Q2hhbmdlQnVmZmVyKClgLlxyXG4gICAgICovXHJcbiAgICBNZW1vcnlSZW1vdGVEb2N1bWVudENhY2hlLnByb3RvdHlwZS5yZW1vdmVFbnRyeSA9IGZ1bmN0aW9uIChkb2N1bWVudEtleSkge1xyXG4gICAgICAgIHZhciBlbnRyeSA9IHRoaXMuZG9jcy5nZXQoZG9jdW1lbnRLZXkpO1xyXG4gICAgICAgIGlmIChlbnRyeSkge1xyXG4gICAgICAgICAgICB0aGlzLmRvY3MgPSB0aGlzLmRvY3MucmVtb3ZlKGRvY3VtZW50S2V5KTtcclxuICAgICAgICAgICAgdGhpcy5zaXplIC09IGVudHJ5LnNpemU7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIE1lbW9yeVJlbW90ZURvY3VtZW50Q2FjaGUucHJvdG90eXBlLmdldEVudHJ5ID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCBkb2N1bWVudEtleSkge1xyXG4gICAgICAgIHZhciBlbnRyeSA9IHRoaXMuZG9jcy5nZXQoZG9jdW1lbnRLZXkpO1xyXG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZShlbnRyeSA/IGVudHJ5Lm1heWJlRG9jdW1lbnQgOiBudWxsKTtcclxuICAgIH07XHJcbiAgICBNZW1vcnlSZW1vdGVEb2N1bWVudENhY2hlLnByb3RvdHlwZS5nZXRFbnRyaWVzID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCBkb2N1bWVudEtleXMpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhciByZXN1bHRzID0gbnVsbGFibGVNYXliZURvY3VtZW50TWFwKCk7XHJcbiAgICAgICAgZG9jdW1lbnRLZXlzLmZvckVhY2goZnVuY3Rpb24gKGRvY3VtZW50S2V5KSB7XHJcbiAgICAgICAgICAgIHZhciBlbnRyeSA9IF90aGlzLmRvY3MuZ2V0KGRvY3VtZW50S2V5KTtcclxuICAgICAgICAgICAgcmVzdWx0cyA9IHJlc3VsdHMuaW5zZXJ0KGRvY3VtZW50S2V5LCBlbnRyeSA/IGVudHJ5Lm1heWJlRG9jdW1lbnQgOiBudWxsKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUocmVzdWx0cyk7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5UmVtb3RlRG9jdW1lbnRDYWNoZS5wcm90b3R5cGUuZ2V0RG9jdW1lbnRzTWF0Y2hpbmdRdWVyeSA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwgcXVlcnksIHNpbmNlUmVhZFRpbWUpIHtcclxuICAgICAgICBhc3NlcnQoIXF1ZXJ5LmlzQ29sbGVjdGlvbkdyb3VwUXVlcnkoKSwgJ0NvbGxlY3Rpb25Hcm91cCBxdWVyaWVzIHNob3VsZCBiZSBoYW5kbGVkIGluIExvY2FsRG9jdW1lbnRzVmlldycpO1xyXG4gICAgICAgIHZhciByZXN1bHRzID0gZG9jdW1lbnRNYXAoKTtcclxuICAgICAgICAvLyBEb2N1bWVudHMgYXJlIG9yZGVyZWQgYnkga2V5LCBzbyB3ZSBjYW4gdXNlIGEgcHJlZml4IHNjYW4gdG8gbmFycm93IGRvd25cclxuICAgICAgICAvLyB0aGUgZG9jdW1lbnRzIHdlIG5lZWQgdG8gbWF0Y2ggdGhlIHF1ZXJ5IGFnYWluc3QuXHJcbiAgICAgICAgdmFyIHByZWZpeCA9IG5ldyBEb2N1bWVudEtleShxdWVyeS5wYXRoLmNoaWxkKCcnKSk7XHJcbiAgICAgICAgdmFyIGl0ZXJhdG9yID0gdGhpcy5kb2NzLmdldEl0ZXJhdG9yRnJvbShwcmVmaXgpO1xyXG4gICAgICAgIHdoaWxlIChpdGVyYXRvci5oYXNOZXh0KCkpIHtcclxuICAgICAgICAgICAgdmFyIF9hID0gaXRlcmF0b3IuZ2V0TmV4dCgpLCBrZXkgPSBfYS5rZXksIF9iID0gX2EudmFsdWUsIG1heWJlRG9jdW1lbnQgPSBfYi5tYXliZURvY3VtZW50LCByZWFkVGltZSA9IF9iLnJlYWRUaW1lO1xyXG4gICAgICAgICAgICBpZiAoIXF1ZXJ5LnBhdGguaXNQcmVmaXhPZihrZXkucGF0aCkpIHtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChyZWFkVGltZS5jb21wYXJlVG8oc2luY2VSZWFkVGltZSkgPD0gMCkge1xyXG4gICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKG1heWJlRG9jdW1lbnQgaW5zdGFuY2VvZiBEb2N1bWVudCAmJiBxdWVyeS5tYXRjaGVzKG1heWJlRG9jdW1lbnQpKSB7XHJcbiAgICAgICAgICAgICAgICByZXN1bHRzID0gcmVzdWx0cy5pbnNlcnQobWF5YmVEb2N1bWVudC5rZXksIG1heWJlRG9jdW1lbnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZShyZXN1bHRzKTtcclxuICAgIH07XHJcbiAgICBNZW1vcnlSZW1vdGVEb2N1bWVudENhY2hlLnByb3RvdHlwZS5mb3JFYWNoRG9jdW1lbnRLZXkgPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24sIGYpIHtcclxuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLmZvckVhY2godGhpcy5kb2NzLCBmdW5jdGlvbiAoa2V5KSB7IHJldHVybiBmKGtleSk7IH0pO1xyXG4gICAgfTtcclxuICAgIE1lbW9yeVJlbW90ZURvY3VtZW50Q2FjaGUucHJvdG90eXBlLmdldE5ld0RvY3VtZW50Q2hhbmdlcyA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwgc2luY2VSZWFkVGltZSkge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcignZ2V0TmV3RG9jdW1lbnRDaGFuZ2VzKCkgaXMgbm90IHN1cHBvcnRlZCB3aXRoIE1lbW9yeVBlcnNpc3RlbmNlJyk7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5UmVtb3RlRG9jdW1lbnRDYWNoZS5wcm90b3R5cGUubmV3Q2hhbmdlQnVmZmVyID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcclxuICAgICAgICAvLyBgdHJhY2tSZW1vdmFsc2AgaXMgaWdub3JlcyBzaW5jZSB0aGUgTWVtb3J5UmVtb3RlRG9jdW1lbnRDYWNoZSBrZWVwc1xyXG4gICAgICAgIC8vIGEgc2VwYXJhdGUgY2hhbmdlbG9nIGFuZCBkb2VzIG5vdCBuZWVkIHNwZWNpYWwgaGFuZGxpbmcgZm9yIHJlbW92YWxzLlxyXG4gICAgICAgIHJldHVybiBuZXcgTWVtb3J5UmVtb3RlRG9jdW1lbnRDYWNoZS5SZW1vdGVEb2N1bWVudENoYW5nZUJ1ZmZlcih0aGlzKTtcclxuICAgIH07XHJcbiAgICBNZW1vcnlSZW1vdGVEb2N1bWVudENhY2hlLnByb3RvdHlwZS5nZXRTaXplID0gZnVuY3Rpb24gKHR4bikge1xyXG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSh0aGlzLnNpemUpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogSGFuZGxlcyB0aGUgZGV0YWlscyBvZiBhZGRpbmcgYW5kIHVwZGF0aW5nIGRvY3VtZW50cyBpbiB0aGUgTWVtb3J5UmVtb3RlRG9jdW1lbnRDYWNoZS5cclxuICAgICAqL1xyXG4gICAgTWVtb3J5UmVtb3RlRG9jdW1lbnRDYWNoZS5SZW1vdGVEb2N1bWVudENoYW5nZUJ1ZmZlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgICAgICB0c2xpYi5fX2V4dGVuZHMoY2xhc3NfMSwgX3N1cGVyKTtcclxuICAgICAgICBmdW5jdGlvbiBjbGFzc18xKGRvY3VtZW50Q2FjaGUpIHtcclxuICAgICAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcclxuICAgICAgICAgICAgX3RoaXMuZG9jdW1lbnRDYWNoZSA9IGRvY3VtZW50Q2FjaGU7XHJcbiAgICAgICAgICAgIHJldHVybiBfdGhpcztcclxuICAgICAgICB9XHJcbiAgICAgICAgY2xhc3NfMS5wcm90b3R5cGUuYXBwbHlDaGFuZ2VzID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uKSB7XHJcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgICAgIHZhciBwcm9taXNlcyA9IFtdO1xyXG4gICAgICAgICAgICB0aGlzLmNoYW5nZXMuZm9yRWFjaChmdW5jdGlvbiAoa2V5LCBkb2MpIHtcclxuICAgICAgICAgICAgICAgIGlmIChkb2MpIHtcclxuICAgICAgICAgICAgICAgICAgICBwcm9taXNlcy5wdXNoKF90aGlzLmRvY3VtZW50Q2FjaGUuYWRkRW50cnkodHJhbnNhY3Rpb24sIGRvYywgX3RoaXMucmVhZFRpbWUpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmRvY3VtZW50Q2FjaGUucmVtb3ZlRW50cnkoa2V5KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2Uud2FpdEZvcihwcm9taXNlcyk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBjbGFzc18xLnByb3RvdHlwZS5nZXRGcm9tQ2FjaGUgPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24sIGRvY3VtZW50S2V5KSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRvY3VtZW50Q2FjaGUuZ2V0RW50cnkodHJhbnNhY3Rpb24sIGRvY3VtZW50S2V5KTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIGNsYXNzXzEucHJvdG90eXBlLmdldEFsbEZyb21DYWNoZSA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwgZG9jdW1lbnRLZXlzKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRvY3VtZW50Q2FjaGUuZ2V0RW50cmllcyh0cmFuc2FjdGlvbiwgZG9jdW1lbnRLZXlzKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiBjbGFzc18xO1xyXG4gICAgfShSZW1vdGVEb2N1bWVudENoYW5nZUJ1ZmZlcikpO1xyXG4gICAgcmV0dXJuIE1lbW9yeVJlbW90ZURvY3VtZW50Q2FjaGU7XHJcbn0oKSk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG52YXIgTWVtb3J5VGFyZ2V0Q2FjaGUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBNZW1vcnlUYXJnZXRDYWNoZShwZXJzaXN0ZW5jZSkge1xyXG4gICAgICAgIHRoaXMucGVyc2lzdGVuY2UgPSBwZXJzaXN0ZW5jZTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBNYXBzIGEgdGFyZ2V0IHRvIHRoZSBkYXRhIGFib3V0IHRoYXQgdGFyZ2V0XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy50YXJnZXRzID0gbmV3IE9iamVjdE1hcChmdW5jdGlvbiAodCkgeyByZXR1cm4gdC5jYW5vbmljYWxJZCgpOyB9KTtcclxuICAgICAgICAvKiogVGhlIGxhc3QgcmVjZWl2ZWQgc25hcHNob3QgdmVyc2lvbi4gKi9cclxuICAgICAgICB0aGlzLmxhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24gPSBTbmFwc2hvdFZlcnNpb24uTUlOO1xyXG4gICAgICAgIC8qKiBUaGUgaGlnaGVzdCBudW1iZXJlZCB0YXJnZXQgSUQgZW5jb3VudGVyZWQuICovXHJcbiAgICAgICAgdGhpcy5oaWdoZXN0VGFyZ2V0SWQgPSAwO1xyXG4gICAgICAgIC8qKiBUaGUgaGlnaGVzdCBzZXF1ZW5jZSBudW1iZXIgZW5jb3VudGVyZWQuICovXHJcbiAgICAgICAgdGhpcy5oaWdoZXN0U2VxdWVuY2VOdW1iZXIgPSAwO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEEgb3JkZXJlZCBiaWRpcmVjdGlvbmFsIG1hcHBpbmcgYmV0d2VlbiBkb2N1bWVudHMgYW5kIHRoZSByZW1vdGUgdGFyZ2V0XHJcbiAgICAgICAgICogSURzLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMucmVmZXJlbmNlcyA9IG5ldyBSZWZlcmVuY2VTZXQoKTtcclxuICAgICAgICB0aGlzLnRhcmdldENvdW50ID0gMDtcclxuICAgICAgICB0aGlzLnRhcmdldElkR2VuZXJhdG9yID0gVGFyZ2V0SWRHZW5lcmF0b3IuZm9yVGFyZ2V0Q2FjaGUoKTtcclxuICAgIH1cclxuICAgIE1lbW9yeVRhcmdldENhY2hlLnByb3RvdHlwZS5mb3JFYWNoVGFyZ2V0ID0gZnVuY3Rpb24gKHR4biwgZikge1xyXG4gICAgICAgIHRoaXMudGFyZ2V0cy5mb3JFYWNoKGZ1bmN0aW9uIChfLCB0YXJnZXREYXRhKSB7IHJldHVybiBmKHRhcmdldERhdGEpOyB9KTtcclxuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoKTtcclxuICAgIH07XHJcbiAgICBNZW1vcnlUYXJnZXRDYWNoZS5wcm90b3R5cGUuZ2V0TGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbiA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbikge1xyXG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSh0aGlzLmxhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24pO1xyXG4gICAgfTtcclxuICAgIE1lbW9yeVRhcmdldENhY2hlLnByb3RvdHlwZS5nZXRIaWdoZXN0U2VxdWVuY2VOdW1iZXIgPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24pIHtcclxuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUodGhpcy5oaWdoZXN0U2VxdWVuY2VOdW1iZXIpO1xyXG4gICAgfTtcclxuICAgIE1lbW9yeVRhcmdldENhY2hlLnByb3RvdHlwZS5hbGxvY2F0ZVRhcmdldElkID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uKSB7XHJcbiAgICAgICAgdmFyIG5leHRUYXJnZXRJZCA9IHRoaXMudGFyZ2V0SWRHZW5lcmF0b3IuYWZ0ZXIodGhpcy5oaWdoZXN0VGFyZ2V0SWQpO1xyXG4gICAgICAgIHRoaXMuaGlnaGVzdFRhcmdldElkID0gbmV4dFRhcmdldElkO1xyXG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZShuZXh0VGFyZ2V0SWQpO1xyXG4gICAgfTtcclxuICAgIE1lbW9yeVRhcmdldENhY2hlLnByb3RvdHlwZS5zZXRUYXJnZXRzTWV0YWRhdGEgPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24sIGhpZ2hlc3RMaXN0ZW5TZXF1ZW5jZU51bWJlciwgbGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbikge1xyXG4gICAgICAgIGlmIChsYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uKSB7XHJcbiAgICAgICAgICAgIHRoaXMubGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbiA9IGxhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb247XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChoaWdoZXN0TGlzdGVuU2VxdWVuY2VOdW1iZXIgPiB0aGlzLmhpZ2hlc3RTZXF1ZW5jZU51bWJlcikge1xyXG4gICAgICAgICAgICB0aGlzLmhpZ2hlc3RTZXF1ZW5jZU51bWJlciA9IGhpZ2hlc3RMaXN0ZW5TZXF1ZW5jZU51bWJlcjtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5VGFyZ2V0Q2FjaGUucHJvdG90eXBlLnNhdmVUYXJnZXREYXRhID0gZnVuY3Rpb24gKHRhcmdldERhdGEpIHtcclxuICAgICAgICB0aGlzLnRhcmdldHMuc2V0KHRhcmdldERhdGEudGFyZ2V0LCB0YXJnZXREYXRhKTtcclxuICAgICAgICB2YXIgdGFyZ2V0SWQgPSB0YXJnZXREYXRhLnRhcmdldElkO1xyXG4gICAgICAgIGlmICh0YXJnZXRJZCA+IHRoaXMuaGlnaGVzdFRhcmdldElkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaGlnaGVzdFRhcmdldElkID0gdGFyZ2V0SWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0YXJnZXREYXRhLnNlcXVlbmNlTnVtYmVyID4gdGhpcy5oaWdoZXN0U2VxdWVuY2VOdW1iZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5oaWdoZXN0U2VxdWVuY2VOdW1iZXIgPSB0YXJnZXREYXRhLnNlcXVlbmNlTnVtYmVyO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBNZW1vcnlUYXJnZXRDYWNoZS5wcm90b3R5cGUuYWRkVGFyZ2V0RGF0YSA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwgdGFyZ2V0RGF0YSkge1xyXG4gICAgICAgIGFzc2VydCghdGhpcy50YXJnZXRzLmhhcyh0YXJnZXREYXRhLnRhcmdldCksICdBZGRpbmcgYSB0YXJnZXQgdGhhdCBhbHJlYWR5IGV4aXN0cycpO1xyXG4gICAgICAgIHRoaXMuc2F2ZVRhcmdldERhdGEodGFyZ2V0RGF0YSk7XHJcbiAgICAgICAgdGhpcy50YXJnZXRDb3VudCArPSAxO1xyXG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgfTtcclxuICAgIE1lbW9yeVRhcmdldENhY2hlLnByb3RvdHlwZS51cGRhdGVUYXJnZXREYXRhID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCB0YXJnZXREYXRhKSB7XHJcbiAgICAgICAgYXNzZXJ0KHRoaXMudGFyZ2V0cy5oYXModGFyZ2V0RGF0YS50YXJnZXQpLCAnVXBkYXRpbmcgYSBub24tZXhpc3RlbnQgdGFyZ2V0Jyk7XHJcbiAgICAgICAgdGhpcy5zYXZlVGFyZ2V0RGF0YSh0YXJnZXREYXRhKTtcclxuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoKTtcclxuICAgIH07XHJcbiAgICBNZW1vcnlUYXJnZXRDYWNoZS5wcm90b3R5cGUucmVtb3ZlVGFyZ2V0RGF0YSA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwgdGFyZ2V0RGF0YSkge1xyXG4gICAgICAgIGFzc2VydCh0aGlzLnRhcmdldENvdW50ID4gMCwgJ1JlbW92aW5nIGEgdGFyZ2V0IGZyb20gYW4gZW1wdHkgY2FjaGUnKTtcclxuICAgICAgICBhc3NlcnQodGhpcy50YXJnZXRzLmhhcyh0YXJnZXREYXRhLnRhcmdldCksICdSZW1vdmluZyBhIG5vbi1leGlzdGVudCB0YXJnZXQgZnJvbSB0aGUgY2FjaGUnKTtcclxuICAgICAgICB0aGlzLnRhcmdldHMuZGVsZXRlKHRhcmdldERhdGEudGFyZ2V0KTtcclxuICAgICAgICB0aGlzLnJlZmVyZW5jZXMucmVtb3ZlUmVmZXJlbmNlc0ZvcklkKHRhcmdldERhdGEudGFyZ2V0SWQpO1xyXG4gICAgICAgIHRoaXMudGFyZ2V0Q291bnQgLT0gMTtcclxuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoKTtcclxuICAgIH07XHJcbiAgICBNZW1vcnlUYXJnZXRDYWNoZS5wcm90b3R5cGUucmVtb3ZlVGFyZ2V0cyA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwgdXBwZXJCb3VuZCwgYWN0aXZlVGFyZ2V0SWRzKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgY291bnQgPSAwO1xyXG4gICAgICAgIHZhciByZW1vdmFscyA9IFtdO1xyXG4gICAgICAgIHRoaXMudGFyZ2V0cy5mb3JFYWNoKGZ1bmN0aW9uIChrZXksIHRhcmdldERhdGEpIHtcclxuICAgICAgICAgICAgaWYgKHRhcmdldERhdGEuc2VxdWVuY2VOdW1iZXIgPD0gdXBwZXJCb3VuZCAmJlxyXG4gICAgICAgICAgICAgICAgYWN0aXZlVGFyZ2V0SWRzLmdldCh0YXJnZXREYXRhLnRhcmdldElkKSA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMudGFyZ2V0cy5kZWxldGUoa2V5KTtcclxuICAgICAgICAgICAgICAgIHJlbW92YWxzLnB1c2goX3RoaXMucmVtb3ZlTWF0Y2hpbmdLZXlzRm9yVGFyZ2V0SWQodHJhbnNhY3Rpb24sIHRhcmdldERhdGEudGFyZ2V0SWQpKTtcclxuICAgICAgICAgICAgICAgIGNvdW50Kys7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLndhaXRGb3IocmVtb3ZhbHMpLm5leHQoZnVuY3Rpb24gKCkgeyByZXR1cm4gY291bnQ7IH0pO1xyXG4gICAgfTtcclxuICAgIE1lbW9yeVRhcmdldENhY2hlLnByb3RvdHlwZS5nZXRUYXJnZXRDb3VudCA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbikge1xyXG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSh0aGlzLnRhcmdldENvdW50KTtcclxuICAgIH07XHJcbiAgICBNZW1vcnlUYXJnZXRDYWNoZS5wcm90b3R5cGUuZ2V0VGFyZ2V0RGF0YSA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwgdGFyZ2V0KSB7XHJcbiAgICAgICAgdmFyIHRhcmdldERhdGEgPSB0aGlzLnRhcmdldHMuZ2V0KHRhcmdldCkgfHwgbnVsbDtcclxuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUodGFyZ2V0RGF0YSk7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5VGFyZ2V0Q2FjaGUucHJvdG90eXBlLmdldFRhcmdldERhdGFGb3JUYXJnZXQgPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24sIHRhcmdldElkKSB7XHJcbiAgICAgICAgLy8gVGhpcyBtZXRob2QgaXMgb25seSBuZWVkZWQgZm9yIG11bHRpLXRhYiBhbmQgd2UgY2FuJ3QgaW1wbGVtZW50IGl0XHJcbiAgICAgICAgLy8gZWZmaWNpZW50bHkgd2l0aG91dCBhZGRpdGlvbmFsIGRhdGEgc3RydWN0dXJlcy5cclxuICAgICAgICByZXR1cm4gZmFpbCgnTm90IHlldCBpbXBsZW1lbnRlZC4nKTtcclxuICAgIH07XHJcbiAgICBNZW1vcnlUYXJnZXRDYWNoZS5wcm90b3R5cGUuYWRkTWF0Y2hpbmdLZXlzID0gZnVuY3Rpb24gKHR4biwga2V5cywgdGFyZ2V0SWQpIHtcclxuICAgICAgICB0aGlzLnJlZmVyZW5jZXMuYWRkUmVmZXJlbmNlcyhrZXlzLCB0YXJnZXRJZCk7XHJcbiAgICAgICAgdmFyIHJlZmVyZW5jZURlbGVnYXRlID0gdGhpcy5wZXJzaXN0ZW5jZS5yZWZlcmVuY2VEZWxlZ2F0ZTtcclxuICAgICAgICB2YXIgcHJvbWlzZXMgPSBbXTtcclxuICAgICAgICBpZiAocmVmZXJlbmNlRGVsZWdhdGUpIHtcclxuICAgICAgICAgICAga2V5cy5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICAgICAgICAgIHByb21pc2VzLnB1c2gocmVmZXJlbmNlRGVsZWdhdGUuYWRkUmVmZXJlbmNlKHR4biwga2V5KSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLndhaXRGb3IocHJvbWlzZXMpO1xyXG4gICAgfTtcclxuICAgIE1lbW9yeVRhcmdldENhY2hlLnByb3RvdHlwZS5yZW1vdmVNYXRjaGluZ0tleXMgPSBmdW5jdGlvbiAodHhuLCBrZXlzLCB0YXJnZXRJZCkge1xyXG4gICAgICAgIHRoaXMucmVmZXJlbmNlcy5yZW1vdmVSZWZlcmVuY2VzKGtleXMsIHRhcmdldElkKTtcclxuICAgICAgICB2YXIgcmVmZXJlbmNlRGVsZWdhdGUgPSB0aGlzLnBlcnNpc3RlbmNlLnJlZmVyZW5jZURlbGVnYXRlO1xyXG4gICAgICAgIHZhciBwcm9taXNlcyA9IFtdO1xyXG4gICAgICAgIGlmIChyZWZlcmVuY2VEZWxlZ2F0ZSkge1xyXG4gICAgICAgICAgICBrZXlzLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgICAgICAgICAgcHJvbWlzZXMucHVzaChyZWZlcmVuY2VEZWxlZ2F0ZS5yZW1vdmVSZWZlcmVuY2UodHhuLCBrZXkpKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2Uud2FpdEZvcihwcm9taXNlcyk7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5VGFyZ2V0Q2FjaGUucHJvdG90eXBlLnJlbW92ZU1hdGNoaW5nS2V5c0ZvclRhcmdldElkID0gZnVuY3Rpb24gKHR4biwgdGFyZ2V0SWQpIHtcclxuICAgICAgICB0aGlzLnJlZmVyZW5jZXMucmVtb3ZlUmVmZXJlbmNlc0ZvcklkKHRhcmdldElkKTtcclxuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoKTtcclxuICAgIH07XHJcbiAgICBNZW1vcnlUYXJnZXRDYWNoZS5wcm90b3R5cGUuZ2V0TWF0Y2hpbmdLZXlzRm9yVGFyZ2V0SWQgPSBmdW5jdGlvbiAodHhuLCB0YXJnZXRJZCkge1xyXG4gICAgICAgIHZhciBtYXRjaGluZ0tleXMgPSB0aGlzLnJlZmVyZW5jZXMucmVmZXJlbmNlc0ZvcklkKHRhcmdldElkKTtcclxuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUobWF0Y2hpbmdLZXlzKTtcclxuICAgIH07XHJcbiAgICBNZW1vcnlUYXJnZXRDYWNoZS5wcm90b3R5cGUuY29udGFpbnNLZXkgPSBmdW5jdGlvbiAodHhuLCBrZXkpIHtcclxuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUodGhpcy5yZWZlcmVuY2VzLmNvbnRhaW5zS2V5KGtleSkpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBNZW1vcnlUYXJnZXRDYWNoZTtcclxufSgpKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnZhciBMT0dfVEFHJDMgPSAnTWVtb3J5UGVyc2lzdGVuY2UnO1xyXG4vKipcclxuICogQSBtZW1vcnktYmFja2VkIGluc3RhbmNlIG9mIFBlcnNpc3RlbmNlLiBEYXRhIGlzIHN0b3JlZCBvbmx5IGluIFJBTSBhbmRcclxuICogbm90IHBlcnNpc3RlZCBhY3Jvc3Mgc2Vzc2lvbnMuXHJcbiAqL1xyXG52YXIgTWVtb3J5UGVyc2lzdGVuY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICAvKipcclxuICAgICAqIFRoZSBjb25zdHJ1Y3RvciBhY2NlcHRzIGEgZmFjdG9yeSBmb3IgY3JlYXRpbmcgYSByZWZlcmVuY2UgZGVsZWdhdGUuIFRoaXNcclxuICAgICAqIGFsbG93cyBib3RoIHRoZSBkZWxlZ2F0ZSBhbmQgdGhpcyBpbnN0YW5jZSB0byBoYXZlIHN0cm9uZyByZWZlcmVuY2VzIHRvXHJcbiAgICAgKiBlYWNoIG90aGVyIHdpdGhvdXQgaGF2aW5nIG51bGxhYmxlIGZpZWxkcyB0aGF0IHdvdWxkIHRoZW4gbmVlZCB0byBiZVxyXG4gICAgICogY2hlY2tlZCBvciBhc3NlcnRlZCBvbiBldmVyeSBhY2Nlc3MuXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIE1lbW9yeVBlcnNpc3RlbmNlKGNsaWVudElkLCByZWZlcmVuY2VEZWxlZ2F0ZUZhY3RvcnkpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMuY2xpZW50SWQgPSBjbGllbnRJZDtcclxuICAgICAgICB0aGlzLm11dGF0aW9uUXVldWVzID0ge307XHJcbiAgICAgICAgdGhpcy5saXN0ZW5TZXF1ZW5jZSA9IG5ldyBMaXN0ZW5TZXF1ZW5jZSgwKTtcclxuICAgICAgICB0aGlzLl9zdGFydGVkID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5fc3RhcnRlZCA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZSA9IHJlZmVyZW5jZURlbGVnYXRlRmFjdG9yeSh0aGlzKTtcclxuICAgICAgICB0aGlzLnRhcmdldENhY2hlID0gbmV3IE1lbW9yeVRhcmdldENhY2hlKHRoaXMpO1xyXG4gICAgICAgIHZhciBzaXplciA9IGZ1bmN0aW9uIChkb2MpIHtcclxuICAgICAgICAgICAgcmV0dXJuIF90aGlzLnJlZmVyZW5jZURlbGVnYXRlLmRvY3VtZW50U2l6ZShkb2MpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5pbmRleE1hbmFnZXIgPSBuZXcgTWVtb3J5SW5kZXhNYW5hZ2VyKCk7XHJcbiAgICAgICAgdGhpcy5yZW1vdGVEb2N1bWVudENhY2hlID0gbmV3IE1lbW9yeVJlbW90ZURvY3VtZW50Q2FjaGUodGhpcy5pbmRleE1hbmFnZXIsIHNpemVyKTtcclxuICAgIH1cclxuICAgIE1lbW9yeVBlcnNpc3RlbmNlLmNyZWF0ZUxydVBlcnNpc3RlbmNlID0gZnVuY3Rpb24gKGNsaWVudElkLCBzZXJpYWxpemVyLCBwYXJhbXMpIHtcclxuICAgICAgICB2YXIgZmFjdG9yeSA9IGZ1bmN0aW9uIChwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgTWVtb3J5THJ1RGVsZWdhdGUocCwgbmV3IExvY2FsU2VyaWFsaXplcihzZXJpYWxpemVyKSwgcGFyYW1zKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiBuZXcgTWVtb3J5UGVyc2lzdGVuY2UoY2xpZW50SWQsIGZhY3RvcnkpO1xyXG4gICAgfTtcclxuICAgIE1lbW9yeVBlcnNpc3RlbmNlLmNyZWF0ZUVhZ2VyUGVyc2lzdGVuY2UgPSBmdW5jdGlvbiAoY2xpZW50SWQpIHtcclxuICAgICAgICB2YXIgZmFjdG9yeSA9IGZ1bmN0aW9uIChwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgTWVtb3J5RWFnZXJEZWxlZ2F0ZShwKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiBuZXcgTWVtb3J5UGVyc2lzdGVuY2UoY2xpZW50SWQsIGZhY3RvcnkpO1xyXG4gICAgfTtcclxuICAgIE1lbW9yeVBlcnNpc3RlbmNlLnByb3RvdHlwZS5zaHV0ZG93biA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvLyBObyBkdXJhYmxlIHN0YXRlIHRvIGVuc3VyZSBpcyBjbG9zZWQgb24gc2h1dGRvd24uXHJcbiAgICAgICAgdGhpcy5fc3RhcnRlZCA9IGZhbHNlO1xyXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcclxuICAgIH07XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTWVtb3J5UGVyc2lzdGVuY2UucHJvdG90eXBlLCBcInN0YXJ0ZWRcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fc3RhcnRlZDtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE1lbW9yeVBlcnNpc3RlbmNlLnByb3RvdHlwZS5nZXRBY3RpdmVDbGllbnRzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0c2xpYi5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIFt0aGlzLmNsaWVudElkXV07XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIE1lbW9yeVBlcnNpc3RlbmNlLnByb3RvdHlwZS5zZXRQcmltYXJ5U3RhdGVMaXN0ZW5lciA9IGZ1bmN0aW9uIChwcmltYXJ5U3RhdGVMaXN0ZW5lcikge1xyXG4gICAgICAgIC8vIEFsbCBjbGllbnRzIHVzaW5nIG1lbW9yeSBwZXJzaXN0ZW5jZSBhY3QgYXMgcHJpbWFyeS5cclxuICAgICAgICByZXR1cm4gcHJpbWFyeVN0YXRlTGlzdGVuZXIodHJ1ZSk7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5UGVyc2lzdGVuY2UucHJvdG90eXBlLnNldERhdGFiYXNlRGVsZXRlZExpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vIE5vIG9wLlxyXG4gICAgfTtcclxuICAgIE1lbW9yeVBlcnNpc3RlbmNlLnByb3RvdHlwZS5zZXROZXR3b3JrRW5hYmxlZCA9IGZ1bmN0aW9uIChuZXR3b3JrRW5hYmxlZCkge1xyXG4gICAgICAgIC8vIE5vIG9wLlxyXG4gICAgfTtcclxuICAgIE1lbW9yeVBlcnNpc3RlbmNlLnByb3RvdHlwZS5nZXRJbmRleE1hbmFnZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5kZXhNYW5hZ2VyO1xyXG4gICAgfTtcclxuICAgIE1lbW9yeVBlcnNpc3RlbmNlLnByb3RvdHlwZS5nZXRNdXRhdGlvblF1ZXVlID0gZnVuY3Rpb24gKHVzZXIpIHtcclxuICAgICAgICB2YXIgcXVldWUgPSB0aGlzLm11dGF0aW9uUXVldWVzW3VzZXIudG9LZXkoKV07XHJcbiAgICAgICAgaWYgKCFxdWV1ZSkge1xyXG4gICAgICAgICAgICBxdWV1ZSA9IG5ldyBNZW1vcnlNdXRhdGlvblF1ZXVlKHRoaXMuaW5kZXhNYW5hZ2VyLCB0aGlzLnJlZmVyZW5jZURlbGVnYXRlKTtcclxuICAgICAgICAgICAgdGhpcy5tdXRhdGlvblF1ZXVlc1t1c2VyLnRvS2V5KCldID0gcXVldWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBxdWV1ZTtcclxuICAgIH07XHJcbiAgICBNZW1vcnlQZXJzaXN0ZW5jZS5wcm90b3R5cGUuZ2V0VGFyZ2V0Q2FjaGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudGFyZ2V0Q2FjaGU7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5UGVyc2lzdGVuY2UucHJvdG90eXBlLmdldFJlbW90ZURvY3VtZW50Q2FjaGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucmVtb3RlRG9jdW1lbnRDYWNoZTtcclxuICAgIH07XHJcbiAgICBNZW1vcnlQZXJzaXN0ZW5jZS5wcm90b3R5cGUucnVuVHJhbnNhY3Rpb24gPSBmdW5jdGlvbiAoYWN0aW9uLCBtb2RlLCB0cmFuc2FjdGlvbk9wZXJhdGlvbikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgZGVidWcoTE9HX1RBRyQzLCAnU3RhcnRpbmcgdHJhbnNhY3Rpb246JywgYWN0aW9uKTtcclxuICAgICAgICB2YXIgdHhuID0gbmV3IE1lbW9yeVRyYW5zYWN0aW9uKHRoaXMubGlzdGVuU2VxdWVuY2UubmV4dCgpKTtcclxuICAgICAgICB0aGlzLnJlZmVyZW5jZURlbGVnYXRlLm9uVHJhbnNhY3Rpb25TdGFydGVkKCk7XHJcbiAgICAgICAgcmV0dXJuIHRyYW5zYWN0aW9uT3BlcmF0aW9uKHR4bilcclxuICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXMucmVmZXJlbmNlRGVsZWdhdGVcclxuICAgICAgICAgICAgICAgIC5vblRyYW5zYWN0aW9uQ29tbWl0dGVkKHR4bilcclxuICAgICAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIHJlc3VsdDsgfSk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLnRvUHJvbWlzZSgpXHJcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgdHhuLnJhaXNlT25Db21taXR0ZWRFdmVudCgpO1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIE1lbW9yeVBlcnNpc3RlbmNlLnByb3RvdHlwZS5tdXRhdGlvblF1ZXVlc0NvbnRhaW5LZXkgPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24sIGtleSkge1xyXG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2Uub3IodmFsdWVzKHRoaXMubXV0YXRpb25RdWV1ZXMpXHJcbiAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24gKHF1ZXVlKSB7IHJldHVybiBmdW5jdGlvbiAoKSB7IHJldHVybiBxdWV1ZS5jb250YWluc0tleSh0cmFuc2FjdGlvbiwga2V5KTsgfTsgfSkpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBNZW1vcnlQZXJzaXN0ZW5jZTtcclxufSgpKTtcclxuLyoqXHJcbiAqIE1lbW9yeSBwZXJzaXN0ZW5jZSBpcyBub3QgYWN0dWFsbHkgdHJhbnNhY3Rpb25hbCwgYnV0IGZ1dHVyZSBpbXBsZW1lbnRhdGlvbnNcclxuICogbWF5IGhhdmUgdHJhbnNhY3Rpb24tc2NvcGVkIHN0YXRlLlxyXG4gKi9cclxudmFyIE1lbW9yeVRyYW5zYWN0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgdHNsaWIuX19leHRlbmRzKE1lbW9yeVRyYW5zYWN0aW9uLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gTWVtb3J5VHJhbnNhY3Rpb24oY3VycmVudFNlcXVlbmNlTnVtYmVyKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcclxuICAgICAgICBfdGhpcy5jdXJyZW50U2VxdWVuY2VOdW1iZXIgPSBjdXJyZW50U2VxdWVuY2VOdW1iZXI7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIE1lbW9yeVRyYW5zYWN0aW9uO1xyXG59KFBlcnNpc3RlbmNlVHJhbnNhY3Rpb24pKTtcclxudmFyIE1lbW9yeUVhZ2VyRGVsZWdhdGUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBNZW1vcnlFYWdlckRlbGVnYXRlKHBlcnNpc3RlbmNlKSB7XHJcbiAgICAgICAgdGhpcy5wZXJzaXN0ZW5jZSA9IHBlcnNpc3RlbmNlO1xyXG4gICAgICAgIHRoaXMuaW5NZW1vcnlQaW5zID0gbnVsbDtcclxuICAgICAgICB0aGlzLl9vcnBoYW5lZERvY3VtZW50cyA9IG51bGw7XHJcbiAgICB9XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTWVtb3J5RWFnZXJEZWxlZ2F0ZS5wcm90b3R5cGUsIFwib3JwaGFuZWREb2N1bWVudHNcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuX29ycGhhbmVkRG9jdW1lbnRzKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBmYWlsKCdvcnBoYW5lZERvY3VtZW50cyBpcyBvbmx5IHZhbGlkIGR1cmluZyBhIHRyYW5zYWN0aW9uLicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX29ycGhhbmVkRG9jdW1lbnRzO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBNZW1vcnlFYWdlckRlbGVnYXRlLnByb3RvdHlwZS5zZXRJbk1lbW9yeVBpbnMgPSBmdW5jdGlvbiAoaW5NZW1vcnlQaW5zKSB7XHJcbiAgICAgICAgdGhpcy5pbk1lbW9yeVBpbnMgPSBpbk1lbW9yeVBpbnM7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5RWFnZXJEZWxlZ2F0ZS5wcm90b3R5cGUuYWRkUmVmZXJlbmNlID0gZnVuY3Rpb24gKHR4biwga2V5KSB7XHJcbiAgICAgICAgdGhpcy5vcnBoYW5lZERvY3VtZW50cy5kZWxldGUoa2V5KTtcclxuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoKTtcclxuICAgIH07XHJcbiAgICBNZW1vcnlFYWdlckRlbGVnYXRlLnByb3RvdHlwZS5yZW1vdmVSZWZlcmVuY2UgPSBmdW5jdGlvbiAodHhuLCBrZXkpIHtcclxuICAgICAgICB0aGlzLm9ycGhhbmVkRG9jdW1lbnRzLmFkZChrZXkpO1xyXG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgfTtcclxuICAgIE1lbW9yeUVhZ2VyRGVsZWdhdGUucHJvdG90eXBlLnJlbW92ZU11dGF0aW9uUmVmZXJlbmNlID0gZnVuY3Rpb24gKHR4biwga2V5KSB7XHJcbiAgICAgICAgdGhpcy5vcnBoYW5lZERvY3VtZW50cy5hZGQoa2V5KTtcclxuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoKTtcclxuICAgIH07XHJcbiAgICBNZW1vcnlFYWdlckRlbGVnYXRlLnByb3RvdHlwZS5yZW1vdmVUYXJnZXQgPSBmdW5jdGlvbiAodHhuLCB0YXJnZXREYXRhKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgY2FjaGUgPSB0aGlzLnBlcnNpc3RlbmNlLmdldFRhcmdldENhY2hlKCk7XHJcbiAgICAgICAgcmV0dXJuIGNhY2hlXHJcbiAgICAgICAgICAgIC5nZXRNYXRjaGluZ0tleXNGb3JUYXJnZXRJZCh0eG4sIHRhcmdldERhdGEudGFyZ2V0SWQpXHJcbiAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uIChrZXlzKSB7XHJcbiAgICAgICAgICAgIGtleXMuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IHJldHVybiBfdGhpcy5vcnBoYW5lZERvY3VtZW50cy5hZGQoa2V5KTsgfSk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKCkgeyByZXR1cm4gY2FjaGUucmVtb3ZlVGFyZ2V0RGF0YSh0eG4sIHRhcmdldERhdGEpOyB9KTtcclxuICAgIH07XHJcbiAgICBNZW1vcnlFYWdlckRlbGVnYXRlLnByb3RvdHlwZS5vblRyYW5zYWN0aW9uU3RhcnRlZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLl9vcnBoYW5lZERvY3VtZW50cyA9IG5ldyBTZXQoKTtcclxuICAgIH07XHJcbiAgICBNZW1vcnlFYWdlckRlbGVnYXRlLnByb3RvdHlwZS5vblRyYW5zYWN0aW9uQ29tbWl0dGVkID0gZnVuY3Rpb24gKHR4bikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgLy8gUmVtb3ZlIG5ld2x5IG9ycGhhbmVkIGRvY3VtZW50cy5cclxuICAgICAgICB2YXIgY2FjaGUgPSB0aGlzLnBlcnNpc3RlbmNlLmdldFJlbW90ZURvY3VtZW50Q2FjaGUoKTtcclxuICAgICAgICB2YXIgY2hhbmdlQnVmZmVyID0gY2FjaGUubmV3Q2hhbmdlQnVmZmVyKCk7XHJcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5mb3JFYWNoKHRoaXMub3JwaGFuZWREb2N1bWVudHMsIGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIF90aGlzLmlzUmVmZXJlbmNlZCh0eG4sIGtleSkubmV4dChmdW5jdGlvbiAoaXNSZWZlcmVuY2VkKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWlzUmVmZXJlbmNlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNoYW5nZUJ1ZmZlci5yZW1vdmVFbnRyeShrZXkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KS5uZXh0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgX3RoaXMuX29ycGhhbmVkRG9jdW1lbnRzID0gbnVsbDtcclxuICAgICAgICAgICAgcmV0dXJuIGNoYW5nZUJ1ZmZlci5hcHBseSh0eG4pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIE1lbW9yeUVhZ2VyRGVsZWdhdGUucHJvdG90eXBlLnVwZGF0ZUxpbWJvRG9jdW1lbnQgPSBmdW5jdGlvbiAodHhuLCBrZXkpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmlzUmVmZXJlbmNlZCh0eG4sIGtleSkubmV4dChmdW5jdGlvbiAoaXNSZWZlcmVuY2VkKSB7XHJcbiAgICAgICAgICAgIGlmIChpc1JlZmVyZW5jZWQpIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLm9ycGhhbmVkRG9jdW1lbnRzLmRlbGV0ZShrZXkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMub3JwaGFuZWREb2N1bWVudHMuYWRkKGtleSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBNZW1vcnlFYWdlckRlbGVnYXRlLnByb3RvdHlwZS5kb2N1bWVudFNpemUgPSBmdW5jdGlvbiAoZG9jKSB7XHJcbiAgICAgICAgLy8gRm9yIGVhZ2VyIEdDLCB3ZSBkb24ndCBjYXJlIGFib3V0IHRoZSBkb2N1bWVudCBzaXplLCB0aGVyZSBhcmUgbm8gc2l6ZSB0aHJlc2hvbGRzLlxyXG4gICAgICAgIHJldHVybiAwO1xyXG4gICAgfTtcclxuICAgIE1lbW9yeUVhZ2VyRGVsZWdhdGUucHJvdG90eXBlLmlzUmVmZXJlbmNlZCA9IGZ1bmN0aW9uICh0eG4sIGtleSkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5vcihbXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLnBlcnNpc3RlbmNlLmdldFRhcmdldENhY2hlKCkuY29udGFpbnNLZXkodHhuLCBrZXkpOyB9LFxyXG4gICAgICAgICAgICBmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5wZXJzaXN0ZW5jZS5tdXRhdGlvblF1ZXVlc0NvbnRhaW5LZXkodHhuLCBrZXkpOyB9LFxyXG4gICAgICAgICAgICBmdW5jdGlvbiAoKSB7IHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZShfdGhpcy5pbk1lbW9yeVBpbnMuY29udGFpbnNLZXkoa2V5KSk7IH1cclxuICAgICAgICBdKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gTWVtb3J5RWFnZXJEZWxlZ2F0ZTtcclxufSgpKTtcclxudmFyIE1lbW9yeUxydURlbGVnYXRlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gTWVtb3J5THJ1RGVsZWdhdGUocGVyc2lzdGVuY2UsIHNlcmlhbGl6ZXIsIGxydVBhcmFtcykge1xyXG4gICAgICAgIHRoaXMucGVyc2lzdGVuY2UgPSBwZXJzaXN0ZW5jZTtcclxuICAgICAgICB0aGlzLnNlcmlhbGl6ZXIgPSBzZXJpYWxpemVyO1xyXG4gICAgICAgIHRoaXMuaW5NZW1vcnlQaW5zID0gbnVsbDtcclxuICAgICAgICB0aGlzLm9ycGhhbmVkU2VxdWVuY2VOdW1iZXJzID0gbmV3IE9iamVjdE1hcChmdW5jdGlvbiAoaykgeyByZXR1cm4gZW5jb2RlKGsucGF0aCk7IH0pO1xyXG4gICAgICAgIHRoaXMuZ2FyYmFnZUNvbGxlY3RvciA9IG5ldyBMcnVHYXJiYWdlQ29sbGVjdG9yKHRoaXMsIGxydVBhcmFtcyk7XHJcbiAgICB9XHJcbiAgICAvLyBOby1vcHMsIHByZXNlbnQgc28gbWVtb3J5IHBlcnNpc3RlbmNlIGRvZXNuJ3QgaGF2ZSB0byBjYXJlIHdoaWNoIGRlbGVnYXRlXHJcbiAgICAvLyBpdCBoYXMuXHJcbiAgICBNZW1vcnlMcnVEZWxlZ2F0ZS5wcm90b3R5cGUub25UcmFuc2FjdGlvblN0YXJ0ZWQgPSBmdW5jdGlvbiAoKSB7IH07XHJcbiAgICBNZW1vcnlMcnVEZWxlZ2F0ZS5wcm90b3R5cGUub25UcmFuc2FjdGlvbkNvbW1pdHRlZCA9IGZ1bmN0aW9uICh0eG4pIHtcclxuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoKTtcclxuICAgIH07XHJcbiAgICBNZW1vcnlMcnVEZWxlZ2F0ZS5wcm90b3R5cGUuZm9yRWFjaFRhcmdldCA9IGZ1bmN0aW9uICh0eG4sIGYpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5wZXJzaXN0ZW5jZS5nZXRUYXJnZXRDYWNoZSgpLmZvckVhY2hUYXJnZXQodHhuLCBmKTtcclxuICAgIH07XHJcbiAgICBNZW1vcnlMcnVEZWxlZ2F0ZS5wcm90b3R5cGUuZ2V0U2VxdWVuY2VOdW1iZXJDb3VudCA9IGZ1bmN0aW9uICh0eG4pIHtcclxuICAgICAgICB2YXIgZG9jQ291bnRQcm9taXNlID0gdGhpcy5vcnBoYW5lZERvY3VtZW50Q291bnQodHhuKTtcclxuICAgICAgICB2YXIgdGFyZ2V0Q291bnRQcm9taXNlID0gdGhpcy5wZXJzaXN0ZW5jZVxyXG4gICAgICAgICAgICAuZ2V0VGFyZ2V0Q2FjaGUoKVxyXG4gICAgICAgICAgICAuZ2V0VGFyZ2V0Q291bnQodHhuKTtcclxuICAgICAgICByZXR1cm4gdGFyZ2V0Q291bnRQcm9taXNlLm5leHQoZnVuY3Rpb24gKHRhcmdldENvdW50KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBkb2NDb3VudFByb21pc2UubmV4dChmdW5jdGlvbiAoZG9jQ291bnQpIHsgcmV0dXJuIHRhcmdldENvdW50ICsgZG9jQ291bnQ7IH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIE1lbW9yeUxydURlbGVnYXRlLnByb3RvdHlwZS5vcnBoYW5lZERvY3VtZW50Q291bnQgPSBmdW5jdGlvbiAodHhuKSB7XHJcbiAgICAgICAgdmFyIG9ycGhhbmVkQ291bnQgPSAwO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmZvckVhY2hPcnBoYW5lZERvY3VtZW50U2VxdWVuY2VOdW1iZXIodHhuLCBmdW5jdGlvbiAoXykge1xyXG4gICAgICAgICAgICBvcnBoYW5lZENvdW50Kys7XHJcbiAgICAgICAgfSkubmV4dChmdW5jdGlvbiAoKSB7IHJldHVybiBvcnBoYW5lZENvdW50OyB9KTtcclxuICAgIH07XHJcbiAgICBNZW1vcnlMcnVEZWxlZ2F0ZS5wcm90b3R5cGUuZm9yRWFjaE9ycGhhbmVkRG9jdW1lbnRTZXF1ZW5jZU51bWJlciA9IGZ1bmN0aW9uICh0eG4sIGYpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UuZm9yRWFjaCh0aGlzLm9ycGhhbmVkU2VxdWVuY2VOdW1iZXJzLCBmdW5jdGlvbiAoa2V5LCBzZXF1ZW5jZU51bWJlcikge1xyXG4gICAgICAgICAgICAvLyBQYXNzIGluIHRoZSBleGFjdCBzZXF1ZW5jZSBudW1iZXIgYXMgdGhlIHVwcGVyIGJvdW5kIHNvIHdlIGtub3cgaXQgd29uJ3QgYmUgcGlubmVkIGJ5XHJcbiAgICAgICAgICAgIC8vIGJlaW5nIHRvbyByZWNlbnQuXHJcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5pc1Bpbm5lZCh0eG4sIGtleSwgc2VxdWVuY2VOdW1iZXIpLm5leHQoZnVuY3Rpb24gKGlzUGlubmVkKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWlzUGlubmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGYoc2VxdWVuY2VOdW1iZXIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIE1lbW9yeUxydURlbGVnYXRlLnByb3RvdHlwZS5zZXRJbk1lbW9yeVBpbnMgPSBmdW5jdGlvbiAoaW5NZW1vcnlQaW5zKSB7XHJcbiAgICAgICAgdGhpcy5pbk1lbW9yeVBpbnMgPSBpbk1lbW9yeVBpbnM7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5THJ1RGVsZWdhdGUucHJvdG90eXBlLnJlbW92ZVRhcmdldHMgPSBmdW5jdGlvbiAodHhuLCB1cHBlckJvdW5kLCBhY3RpdmVUYXJnZXRJZHMpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5wZXJzaXN0ZW5jZVxyXG4gICAgICAgICAgICAuZ2V0VGFyZ2V0Q2FjaGUoKVxyXG4gICAgICAgICAgICAucmVtb3ZlVGFyZ2V0cyh0eG4sIHVwcGVyQm91bmQsIGFjdGl2ZVRhcmdldElkcyk7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5THJ1RGVsZWdhdGUucHJvdG90eXBlLnJlbW92ZU9ycGhhbmVkRG9jdW1lbnRzID0gZnVuY3Rpb24gKHR4biwgdXBwZXJCb3VuZCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIGNvdW50ID0gMDtcclxuICAgICAgICB2YXIgY2FjaGUgPSB0aGlzLnBlcnNpc3RlbmNlLmdldFJlbW90ZURvY3VtZW50Q2FjaGUoKTtcclxuICAgICAgICB2YXIgY2hhbmdlQnVmZmVyID0gY2FjaGUubmV3Q2hhbmdlQnVmZmVyKCk7XHJcbiAgICAgICAgdmFyIHAgPSBjYWNoZS5mb3JFYWNoRG9jdW1lbnRLZXkodHhuLCBmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5pc1Bpbm5lZCh0eG4sIGtleSwgdXBwZXJCb3VuZCkubmV4dChmdW5jdGlvbiAoaXNQaW5uZWQpIHtcclxuICAgICAgICAgICAgICAgIGlmICghaXNQaW5uZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb3VudCsrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNoYW5nZUJ1ZmZlci5yZW1vdmVFbnRyeShrZXkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gcC5uZXh0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIGNoYW5nZUJ1ZmZlci5hcHBseSh0eG4pOyB9KS5uZXh0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIGNvdW50OyB9KTtcclxuICAgIH07XHJcbiAgICBNZW1vcnlMcnVEZWxlZ2F0ZS5wcm90b3R5cGUucmVtb3ZlTXV0YXRpb25SZWZlcmVuY2UgPSBmdW5jdGlvbiAodHhuLCBrZXkpIHtcclxuICAgICAgICB0aGlzLm9ycGhhbmVkU2VxdWVuY2VOdW1iZXJzLnNldChrZXksIHR4bi5jdXJyZW50U2VxdWVuY2VOdW1iZXIpO1xyXG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgfTtcclxuICAgIE1lbW9yeUxydURlbGVnYXRlLnByb3RvdHlwZS5yZW1vdmVUYXJnZXQgPSBmdW5jdGlvbiAodHhuLCB0YXJnZXREYXRhKSB7XHJcbiAgICAgICAgdmFyIHVwZGF0ZWQgPSB0YXJnZXREYXRhLndpdGhTZXF1ZW5jZU51bWJlcih0eG4uY3VycmVudFNlcXVlbmNlTnVtYmVyKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5wZXJzaXN0ZW5jZS5nZXRUYXJnZXRDYWNoZSgpLnVwZGF0ZVRhcmdldERhdGEodHhuLCB1cGRhdGVkKTtcclxuICAgIH07XHJcbiAgICBNZW1vcnlMcnVEZWxlZ2F0ZS5wcm90b3R5cGUuYWRkUmVmZXJlbmNlID0gZnVuY3Rpb24gKHR4biwga2V5KSB7XHJcbiAgICAgICAgdGhpcy5vcnBoYW5lZFNlcXVlbmNlTnVtYmVycy5zZXQoa2V5LCB0eG4uY3VycmVudFNlcXVlbmNlTnVtYmVyKTtcclxuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoKTtcclxuICAgIH07XHJcbiAgICBNZW1vcnlMcnVEZWxlZ2F0ZS5wcm90b3R5cGUucmVtb3ZlUmVmZXJlbmNlID0gZnVuY3Rpb24gKHR4biwga2V5KSB7XHJcbiAgICAgICAgdGhpcy5vcnBoYW5lZFNlcXVlbmNlTnVtYmVycy5zZXQoa2V5LCB0eG4uY3VycmVudFNlcXVlbmNlTnVtYmVyKTtcclxuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoKTtcclxuICAgIH07XHJcbiAgICBNZW1vcnlMcnVEZWxlZ2F0ZS5wcm90b3R5cGUudXBkYXRlTGltYm9Eb2N1bWVudCA9IGZ1bmN0aW9uICh0eG4sIGtleSkge1xyXG4gICAgICAgIHRoaXMub3JwaGFuZWRTZXF1ZW5jZU51bWJlcnMuc2V0KGtleSwgdHhuLmN1cnJlbnRTZXF1ZW5jZU51bWJlcik7XHJcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5THJ1RGVsZWdhdGUucHJvdG90eXBlLmRvY3VtZW50U2l6ZSA9IGZ1bmN0aW9uIChtYXliZURvYykge1xyXG4gICAgICAgIHZhciByZW1vdGVEb2N1bWVudCA9IHRoaXMuc2VyaWFsaXplci50b0RiUmVtb3RlRG9jdW1lbnQobWF5YmVEb2MsIG1heWJlRG9jLnZlcnNpb24pO1xyXG4gICAgICAgIHZhciB2YWx1ZTtcclxuICAgICAgICBpZiAocmVtb3RlRG9jdW1lbnQuZG9jdW1lbnQpIHtcclxuICAgICAgICAgICAgdmFsdWUgPSByZW1vdGVEb2N1bWVudC5kb2N1bWVudDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAocmVtb3RlRG9jdW1lbnQudW5rbm93bkRvY3VtZW50KSB7XHJcbiAgICAgICAgICAgIHZhbHVlID0gcmVtb3RlRG9jdW1lbnQudW5rbm93bkRvY3VtZW50O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChyZW1vdGVEb2N1bWVudC5ub0RvY3VtZW50KSB7XHJcbiAgICAgICAgICAgIHZhbHVlID0gcmVtb3RlRG9jdW1lbnQubm9Eb2N1bWVudDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRocm93IGZhaWwoJ1Vua25vd24gcmVtb3RlIGRvY3VtZW50IHR5cGUnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHZhbHVlKS5sZW5ndGg7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5THJ1RGVsZWdhdGUucHJvdG90eXBlLmlzUGlubmVkID0gZnVuY3Rpb24gKHR4biwga2V5LCB1cHBlckJvdW5kKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLm9yKFtcclxuICAgICAgICAgICAgZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMucGVyc2lzdGVuY2UubXV0YXRpb25RdWV1ZXNDb250YWluS2V5KHR4biwga2V5KTsgfSxcclxuICAgICAgICAgICAgZnVuY3Rpb24gKCkgeyByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoX3RoaXMuaW5NZW1vcnlQaW5zLmNvbnRhaW5zS2V5KGtleSkpOyB9LFxyXG4gICAgICAgICAgICBmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5wZXJzaXN0ZW5jZS5nZXRUYXJnZXRDYWNoZSgpLmNvbnRhaW5zS2V5KHR4biwga2V5KTsgfSxcclxuICAgICAgICAgICAgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG9ycGhhbmVkQXQgPSBfdGhpcy5vcnBoYW5lZFNlcXVlbmNlTnVtYmVycy5nZXQoa2V5KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZShvcnBoYW5lZEF0ICE9PSB1bmRlZmluZWQgJiYgb3JwaGFuZWRBdCA+IHVwcGVyQm91bmQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgXSk7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5THJ1RGVsZWdhdGUucHJvdG90eXBlLmdldENhY2hlU2l6ZSA9IGZ1bmN0aW9uICh0eG4pIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5wZXJzaXN0ZW5jZS5nZXRSZW1vdGVEb2N1bWVudENhY2hlKCkuZ2V0U2l6ZSh0eG4pO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBNZW1vcnlMcnVEZWxlZ2F0ZTtcclxufSgpKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnZhciBMT0dfVEFHJDQgPSAnRXhwb25lbnRpYWxCYWNrb2ZmJztcclxuLyoqXHJcbiAqIEluaXRpYWwgYmFja29mZiB0aW1lIGluIG1pbGxpc2Vjb25kcyBhZnRlciBhbiBlcnJvci5cclxuICogU2V0IHRvIDFzIGFjY29yZGluZyB0byBodHRwczovL2Nsb3VkLmdvb2dsZS5jb20vYXBpcy9kZXNpZ24vZXJyb3JzLlxyXG4gKi9cclxudmFyIERFRkFVTFRfQkFDS09GRl9JTklUSUFMX0RFTEFZX01TID0gMTAwMDtcclxudmFyIERFRkFVTFRfQkFDS09GRl9GQUNUT1IgPSAxLjU7XHJcbi8qKiBNYXhpbXVtIGJhY2tvZmYgdGltZSBpbiBtaWxsaXNlY29uZHMgKi9cclxudmFyIERFRkFVTFRfQkFDS09GRl9NQVhfREVMQVlfTVMgPSA2MCAqIDEwMDA7XHJcbi8qKlxyXG4gKiBBIGhlbHBlciBmb3IgcnVubmluZyBkZWxheWVkIHRhc2tzIGZvbGxvd2luZyBhbiBleHBvbmVudGlhbCBiYWNrb2ZmIGN1cnZlXHJcbiAqIGJldHdlZW4gYXR0ZW1wdHMuXHJcbiAqXHJcbiAqIEVhY2ggZGVsYXkgaXMgbWFkZSB1cCBvZiBhIFwiYmFzZVwiIGRlbGF5IHdoaWNoIGZvbGxvd3MgdGhlIGV4cG9uZW50aWFsXHJcbiAqIGJhY2tvZmYgY3VydmUsIGFuZCBhICsvLSA1MCUgXCJqaXR0ZXJcIiB0aGF0IGlzIGNhbGN1bGF0ZWQgYW5kIGFkZGVkIHRvIHRoZVxyXG4gKiBiYXNlIGRlbGF5LiBUaGlzIHByZXZlbnRzIGNsaWVudHMgZnJvbSBhY2NpZGVudGFsbHkgc3luY2hyb25pemluZyB0aGVpclxyXG4gKiBkZWxheXMgY2F1c2luZyBzcGlrZXMgb2YgbG9hZCB0byB0aGUgYmFja2VuZC5cclxuICovXHJcbnZhciBFeHBvbmVudGlhbEJhY2tvZmYgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBFeHBvbmVudGlhbEJhY2tvZmYoXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBBc3luY1F1ZXVlIHRvIHJ1biBiYWNrb2ZmIG9wZXJhdGlvbnMgb24uXHJcbiAgICAgKi9cclxuICAgIHF1ZXVlLCBcclxuICAgIC8qKlxyXG4gICAgICogVGhlIElEIHRvIHVzZSB3aGVuIHNjaGVkdWxpbmcgYmFja29mZiBvcGVyYXRpb25zIG9uIHRoZSBBc3luY1F1ZXVlLlxyXG4gICAgICovXHJcbiAgICB0aW1lcklkLCBcclxuICAgIC8qKlxyXG4gICAgICogVGhlIGluaXRpYWwgZGVsYXkgKHVzZWQgYXMgdGhlIGJhc2UgZGVsYXkgb24gdGhlIGZpcnN0IHJldHJ5IGF0dGVtcHQpLlxyXG4gICAgICogTm90ZSB0aGF0IGppdHRlciB3aWxsIHN0aWxsIGJlIGFwcGxpZWQsIHNvIHRoZSBhY3R1YWwgZGVsYXkgY291bGQgYmUgYXNcclxuICAgICAqIGxpdHRsZSBhcyAwLjUqaW5pdGlhbERlbGF5TXMuXHJcbiAgICAgKi9cclxuICAgIGluaXRpYWxEZWxheU1zLCBcclxuICAgIC8qKlxyXG4gICAgICogVGhlIG11bHRpcGxpZXIgdG8gdXNlIHRvIGRldGVybWluZSB0aGUgZXh0ZW5kZWQgYmFzZSBkZWxheSBhZnRlciBlYWNoXHJcbiAgICAgKiBhdHRlbXB0LlxyXG4gICAgICovXHJcbiAgICBiYWNrb2ZmRmFjdG9yLCBcclxuICAgIC8qKlxyXG4gICAgICogVGhlIG1heGltdW0gYmFzZSBkZWxheSBhZnRlciB3aGljaCBubyBmdXJ0aGVyIGJhY2tvZmYgaXMgcGVyZm9ybWVkLlxyXG4gICAgICogTm90ZSB0aGF0IGppdHRlciB3aWxsIHN0aWxsIGJlIGFwcGxpZWQsIHNvIHRoZSBhY3R1YWwgZGVsYXkgY291bGQgYmUgYXNcclxuICAgICAqIG11Y2ggYXMgMS41Km1heERlbGF5TXMuXHJcbiAgICAgKi9cclxuICAgIG1heERlbGF5TXMpIHtcclxuICAgICAgICBpZiAoaW5pdGlhbERlbGF5TXMgPT09IHZvaWQgMCkgeyBpbml0aWFsRGVsYXlNcyA9IERFRkFVTFRfQkFDS09GRl9JTklUSUFMX0RFTEFZX01TOyB9XHJcbiAgICAgICAgaWYgKGJhY2tvZmZGYWN0b3IgPT09IHZvaWQgMCkgeyBiYWNrb2ZmRmFjdG9yID0gREVGQVVMVF9CQUNLT0ZGX0ZBQ1RPUjsgfVxyXG4gICAgICAgIGlmIChtYXhEZWxheU1zID09PSB2b2lkIDApIHsgbWF4RGVsYXlNcyA9IERFRkFVTFRfQkFDS09GRl9NQVhfREVMQVlfTVM7IH1cclxuICAgICAgICB0aGlzLnF1ZXVlID0gcXVldWU7XHJcbiAgICAgICAgdGhpcy50aW1lcklkID0gdGltZXJJZDtcclxuICAgICAgICB0aGlzLmluaXRpYWxEZWxheU1zID0gaW5pdGlhbERlbGF5TXM7XHJcbiAgICAgICAgdGhpcy5iYWNrb2ZmRmFjdG9yID0gYmFja29mZkZhY3RvcjtcclxuICAgICAgICB0aGlzLm1heERlbGF5TXMgPSBtYXhEZWxheU1zO1xyXG4gICAgICAgIHRoaXMuY3VycmVudEJhc2VNcyA9IDA7XHJcbiAgICAgICAgdGhpcy50aW1lclByb21pc2UgPSBudWxsO1xyXG4gICAgICAgIC8qKiBUaGUgbGFzdCBiYWNrb2ZmIGF0dGVtcHQsIGFzIGVwb2NoIG1pbGxpc2Vjb25kcy4gKi9cclxuICAgICAgICB0aGlzLmxhc3RBdHRlbXB0VGltZSA9IERhdGUubm93KCk7XHJcbiAgICAgICAgdGhpcy5yZXNldCgpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXNldHMgdGhlIGJhY2tvZmYgZGVsYXkuXHJcbiAgICAgKlxyXG4gICAgICogVGhlIHZlcnkgbmV4dCBiYWNrb2ZmQW5kV2FpdCgpIHdpbGwgaGF2ZSBubyBkZWxheS4gSWYgaXQgaXMgY2FsbGVkIGFnYWluXHJcbiAgICAgKiAoaS5lLiBkdWUgdG8gYW4gZXJyb3IpLCBpbml0aWFsRGVsYXlNcyAocGx1cyBqaXR0ZXIpIHdpbGwgYmUgdXNlZCwgYW5kXHJcbiAgICAgKiBzdWJzZXF1ZW50IG9uZXMgd2lsbCBpbmNyZWFzZSBhY2NvcmRpbmcgdG8gdGhlIGJhY2tvZmZGYWN0b3IuXHJcbiAgICAgKi9cclxuICAgIEV4cG9uZW50aWFsQmFja29mZi5wcm90b3R5cGUucmVzZXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5jdXJyZW50QmFzZU1zID0gMDtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJlc2V0cyB0aGUgYmFja29mZiBkZWxheSB0byB0aGUgbWF4aW11bSBkZWxheSAoZS5nLiBmb3IgdXNlIGFmdGVyIGFcclxuICAgICAqIFJFU09VUkNFX0VYSEFVU1RFRCBlcnJvcikuXHJcbiAgICAgKi9cclxuICAgIEV4cG9uZW50aWFsQmFja29mZi5wcm90b3R5cGUucmVzZXRUb01heCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmN1cnJlbnRCYXNlTXMgPSB0aGlzLm1heERlbGF5TXM7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIGFmdGVyIGN1cnJlbnREZWxheU1zLCBhbmQgaW5jcmVhc2VzIHRoZVxyXG4gICAgICogZGVsYXkgZm9yIGFueSBzdWJzZXF1ZW50IGF0dGVtcHRzLiBJZiB0aGVyZSB3YXMgYSBwZW5kaW5nIGJhY2tvZmYgb3BlcmF0aW9uXHJcbiAgICAgKiBhbHJlYWR5LCBpdCB3aWxsIGJlIGNhbmNlbGVkLlxyXG4gICAgICovXHJcbiAgICBFeHBvbmVudGlhbEJhY2tvZmYucHJvdG90eXBlLmJhY2tvZmZBbmRSdW4gPSBmdW5jdGlvbiAob3ApIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIC8vIENhbmNlbCBhbnkgcGVuZGluZyBiYWNrb2ZmIG9wZXJhdGlvbi5cclxuICAgICAgICB0aGlzLmNhbmNlbCgpO1xyXG4gICAgICAgIC8vIEZpcnN0IHNjaGVkdWxlIHVzaW5nIHRoZSBjdXJyZW50IGJhc2UgKHdoaWNoIG1heSBiZSAwIGFuZCBzaG91bGQgYmVcclxuICAgICAgICAvLyBob25vcmVkIGFzIHN1Y2gpLlxyXG4gICAgICAgIHZhciBkZXNpcmVkRGVsYXlXaXRoSml0dGVyTXMgPSBNYXRoLmZsb29yKHRoaXMuY3VycmVudEJhc2VNcyArIHRoaXMuaml0dGVyRGVsYXlNcygpKTtcclxuICAgICAgICAvLyBHdWFyZCBhZ2FpbnN0IGxhc3RBdHRlbXB0VGltZSBiZWluZyBpbiB0aGUgZnV0dXJlIGR1ZSB0byBhIGNsb2NrIGNoYW5nZS5cclxuICAgICAgICB2YXIgZGVsYXlTb0Zhck1zID0gTWF0aC5tYXgoMCwgRGF0ZS5ub3coKSAtIHRoaXMubGFzdEF0dGVtcHRUaW1lKTtcclxuICAgICAgICAvLyBHdWFyZCBhZ2FpbnN0IHRoZSBiYWNrb2ZmIGRlbGF5IGFscmVhZHkgYmVpbmcgcGFzdC5cclxuICAgICAgICB2YXIgcmVtYWluaW5nRGVsYXlNcyA9IE1hdGgubWF4KDAsIGRlc2lyZWREZWxheVdpdGhKaXR0ZXJNcyAtIGRlbGF5U29GYXJNcyk7XHJcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudEJhc2VNcyA+IDApIHtcclxuICAgICAgICAgICAgZGVidWcoTE9HX1RBRyQ0LCBcIkJhY2tpbmcgb2ZmIGZvciBcIiArIHJlbWFpbmluZ0RlbGF5TXMgKyBcIiBtcyBcIiArXHJcbiAgICAgICAgICAgICAgICAoXCIoYmFzZSBkZWxheTogXCIgKyB0aGlzLmN1cnJlbnRCYXNlTXMgKyBcIiBtcywgXCIpICtcclxuICAgICAgICAgICAgICAgIChcImRlbGF5IHdpdGggaml0dGVyOiBcIiArIGRlc2lyZWREZWxheVdpdGhKaXR0ZXJNcyArIFwiIG1zLCBcIikgK1xyXG4gICAgICAgICAgICAgICAgKFwibGFzdCBhdHRlbXB0OiBcIiArIGRlbGF5U29GYXJNcyArIFwiIG1zIGFnbylcIikpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnRpbWVyUHJvbWlzZSA9IHRoaXMucXVldWUuZW5xdWV1ZUFmdGVyRGVsYXkodGhpcy50aW1lcklkLCByZW1haW5pbmdEZWxheU1zLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIF90aGlzLmxhc3RBdHRlbXB0VGltZSA9IERhdGUubm93KCk7XHJcbiAgICAgICAgICAgIHJldHVybiBvcCgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIEFwcGx5IGJhY2tvZmYgZmFjdG9yIHRvIGRldGVybWluZSBuZXh0IGRlbGF5IGFuZCBlbnN1cmUgaXQgaXMgd2l0aGluXHJcbiAgICAgICAgLy8gYm91bmRzLlxyXG4gICAgICAgIHRoaXMuY3VycmVudEJhc2VNcyAqPSB0aGlzLmJhY2tvZmZGYWN0b3I7XHJcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudEJhc2VNcyA8IHRoaXMuaW5pdGlhbERlbGF5TXMpIHtcclxuICAgICAgICAgICAgdGhpcy5jdXJyZW50QmFzZU1zID0gdGhpcy5pbml0aWFsRGVsYXlNcztcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudEJhc2VNcyA+IHRoaXMubWF4RGVsYXlNcykge1xyXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRCYXNlTXMgPSB0aGlzLm1heERlbGF5TXM7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIEV4cG9uZW50aWFsQmFja29mZi5wcm90b3R5cGUuY2FuY2VsID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICh0aGlzLnRpbWVyUHJvbWlzZSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aGlzLnRpbWVyUHJvbWlzZS5jYW5jZWwoKTtcclxuICAgICAgICAgICAgdGhpcy50aW1lclByb21pc2UgPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKiogUmV0dXJucyBhIHJhbmRvbSB2YWx1ZSBpbiB0aGUgcmFuZ2UgWy1jdXJyZW50QmFzZU1zLzIsIGN1cnJlbnRCYXNlTXMvMl0gKi9cclxuICAgIEV4cG9uZW50aWFsQmFja29mZi5wcm90b3R5cGUuaml0dGVyRGVsYXlNcyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gKE1hdGgucmFuZG9tKCkgLSAwLjUpICogdGhpcy5jdXJyZW50QmFzZU1zO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBFeHBvbmVudGlhbEJhY2tvZmY7XHJcbn0oKSk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG52YXIgTE9HX1RBRyQ1ID0gJ1BlcnNpc3RlbnRTdHJlYW0nO1xyXG4vKipcclxuICogUGVyc2lzdGVudFN0cmVhbSBjYW4gYmUgaW4gb25lIG9mIDUgc3RhdGVzIChlYWNoIGRlc2NyaWJlZCBpbiBkZXRhaWwgYmVsb3cpXHJcbiAqIGJhc2VkIG9uIHRoZSBmb2xsb3dpbmcgc3RhdGUgdHJhbnNpdGlvbiBkaWFncmFtOlxyXG4gKlxyXG4gKiAgICAgICAgICBzdGFydCgpIGNhbGxlZCAgICAgICAgICAgICBhdXRoICYgY29ubmVjdGlvbiBzdWNjZWVkZWRcclxuICogSU5JVElBTCAtLS0tLS0tLS0tLS0tLS0tPiBTVEFSVElORyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4gT1BFTlxyXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXiAgfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxyXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAgfCAgICAgICAgICAgICAgICAgICAgZXJyb3Igb2NjdXJyZWQgfFxyXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAgXFwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLXYtLS0tLS9cclxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcclxuICogICAgICAgICAgICAgICAgICAgIGJhY2tvZmYgIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcclxuICogICAgICAgICAgICAgICAgICAgIGVsYXBzZWQgIHwgICAgICAgICAgICAgIHN0YXJ0KCkgY2FsbGVkICAgIHxcclxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcLS0tIEJBQ0tPRkYgPC0tLS0tLS0tLS0tLS0tLS0gRVJST1JcclxuICpcclxuICogW2FueSBzdGF0ZV0gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+IElOSVRJQUxcclxuICogICAgICAgICAgICAgICBzdG9wKCkgY2FsbGVkIG9yXHJcbiAqICAgICAgICAgICAgICAgaWRsZSB0aW1lciBleHBpcmVkXHJcbiAqL1xyXG52YXIgUGVyc2lzdGVudFN0cmVhbVN0YXRlO1xyXG4oZnVuY3Rpb24gKFBlcnNpc3RlbnRTdHJlYW1TdGF0ZSkge1xyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgc3RyZWFtaW5nIFJQQyBpcyBub3QgeWV0IHJ1bm5pbmcgYW5kIHRoZXJlJ3Mgbm8gZXJyb3IgY29uZGl0aW9uLlxyXG4gICAgICogQ2FsbGluZyBzdGFydCgpIHdpbGwgc3RhcnQgdGhlIHN0cmVhbSBpbW1lZGlhdGVseSB3aXRob3V0IGJhY2tvZmYuXHJcbiAgICAgKiBXaGlsZSBpbiB0aGlzIHN0YXRlIGlzU3RhcnRlZCgpIHdpbGwgcmV0dXJuIGZhbHNlLlxyXG4gICAgICovXHJcbiAgICBQZXJzaXN0ZW50U3RyZWFtU3RhdGVbUGVyc2lzdGVudFN0cmVhbVN0YXRlW1wiSW5pdGlhbFwiXSA9IDBdID0gXCJJbml0aWFsXCI7XHJcbiAgICAvKipcclxuICAgICAqIFRoZSBzdHJlYW0gaXMgc3RhcnRpbmcsIGVpdGhlciB3YWl0aW5nIGZvciBhbiBhdXRoIHRva2VuIG9yIGZvciB0aGUgc3RyZWFtXHJcbiAgICAgKiB0byBzdWNjZXNzZnVsbHkgb3Blbi4gV2hpbGUgaW4gdGhpcyBzdGF0ZSwgaXNTdGFydGVkKCkgd2lsbCByZXR1cm4gdHJ1ZSBidXRcclxuICAgICAqIGlzT3BlbigpIHdpbGwgcmV0dXJuIGZhbHNlLlxyXG4gICAgICovXHJcbiAgICBQZXJzaXN0ZW50U3RyZWFtU3RhdGVbUGVyc2lzdGVudFN0cmVhbVN0YXRlW1wiU3RhcnRpbmdcIl0gPSAxXSA9IFwiU3RhcnRpbmdcIjtcclxuICAgIC8qKlxyXG4gICAgICogVGhlIHN0cmVhbWluZyBSUEMgaXMgdXAgYW5kIHJ1bm5pbmcuIFJlcXVlc3RzIGFuZCByZXNwb25zZXMgY2FuIGZsb3dcclxuICAgICAqIGZyZWVseS4gQm90aCBpc1N0YXJ0ZWQoKSBhbmQgaXNPcGVuKCkgd2lsbCByZXR1cm4gdHJ1ZS5cclxuICAgICAqL1xyXG4gICAgUGVyc2lzdGVudFN0cmVhbVN0YXRlW1BlcnNpc3RlbnRTdHJlYW1TdGF0ZVtcIk9wZW5cIl0gPSAyXSA9IFwiT3BlblwiO1xyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgc3RyZWFtIGVuY291bnRlcmVkIGFuIGVycm9yLiBUaGUgbmV4dCBzdGFydCBhdHRlbXB0IHdpbGwgYmFjayBvZmYuXHJcbiAgICAgKiBXaGlsZSBpbiB0aGlzIHN0YXRlIGlzU3RhcnRlZCgpIHdpbGwgcmV0dXJuIGZhbHNlLlxyXG4gICAgICovXHJcbiAgICBQZXJzaXN0ZW50U3RyZWFtU3RhdGVbUGVyc2lzdGVudFN0cmVhbVN0YXRlW1wiRXJyb3JcIl0gPSAzXSA9IFwiRXJyb3JcIjtcclxuICAgIC8qKlxyXG4gICAgICogQW4gaW4tYmV0d2VlbiBzdGF0ZSBhZnRlciBhbiBlcnJvciB3aGVyZSB0aGUgc3RyZWFtIGlzIHdhaXRpbmcgYmVmb3JlXHJcbiAgICAgKiByZS1zdGFydGluZy4gQWZ0ZXIgd2FpdGluZyBpcyBjb21wbGV0ZSwgdGhlIHN0cmVhbSB3aWxsIHRyeSB0byBvcGVuLlxyXG4gICAgICogV2hpbGUgaW4gdGhpcyBzdGF0ZSBpc1N0YXJ0ZWQoKSB3aWxsIHJldHVybiB0cnVlIGJ1dCBpc09wZW4oKSB3aWxsIHJldHVyblxyXG4gICAgICogZmFsc2UuXHJcbiAgICAgKi9cclxuICAgIFBlcnNpc3RlbnRTdHJlYW1TdGF0ZVtQZXJzaXN0ZW50U3RyZWFtU3RhdGVbXCJCYWNrb2ZmXCJdID0gNF0gPSBcIkJhY2tvZmZcIjtcclxufSkoUGVyc2lzdGVudFN0cmVhbVN0YXRlIHx8IChQZXJzaXN0ZW50U3RyZWFtU3RhdGUgPSB7fSkpO1xyXG4vKiogVGhlIHRpbWUgYSBzdHJlYW0gc3RheXMgb3BlbiBhZnRlciBpdCBpcyBtYXJrZWQgaWRsZS4gKi9cclxudmFyIElETEVfVElNRU9VVF9NUyA9IDYwICogMTAwMDtcclxuLyoqXHJcbiAqIEEgUGVyc2lzdGVudFN0cmVhbSBpcyBhbiBhYnN0cmFjdCBiYXNlIGNsYXNzIHRoYXQgcmVwcmVzZW50cyBhIHN0cmVhbWluZyBSUENcclxuICogdG8gdGhlIEZpcmVzdG9yZSBiYWNrZW5kLiBJdCdzIGJ1aWx0IG9uIHRvcCBvZiB0aGUgY29ubmVjdGlvbnMgb3duIHN1cHBvcnRcclxuICogZm9yIHN0cmVhbWluZyBSUENzLCBhbmQgYWRkcyBzZXZlcmFsIGNyaXRpY2FsIGZlYXR1cmVzIGZvciBvdXIgY2xpZW50czpcclxuICpcclxuICogICAtIEV4cG9uZW50aWFsIGJhY2tvZmYgb24gZmFpbHVyZVxyXG4gKiAgIC0gQXV0aGVudGljYXRpb24gdmlhIENyZWRlbnRpYWxzUHJvdmlkZXJcclxuICogICAtIERpc3BhdGNoaW5nIGFsbCBjYWxsYmFja3MgaW50byB0aGUgc2hhcmVkIHdvcmtlciBxdWV1ZVxyXG4gKiAgIC0gQ2xvc2luZyBpZGxlIHN0cmVhbXMgYWZ0ZXIgNjAgc2Vjb25kcyBvZiBpbmFjdGl2aXR5XHJcbiAqXHJcbiAqIFN1YmNsYXNzZXMgb2YgUGVyc2lzdGVudFN0cmVhbSBpbXBsZW1lbnQgc2VyaWFsaXphdGlvbiBvZiBtb2RlbHMgdG8gYW5kXHJcbiAqIGZyb20gdGhlIEpTT04gcmVwcmVzZW50YXRpb24gb2YgdGhlIHByb3RvY29sIGJ1ZmZlcnMgZm9yIGEgc3BlY2lmaWNcclxuICogc3RyZWFtaW5nIFJQQy5cclxuICpcclxuICogIyMgU3RhcnRpbmcgYW5kIFN0b3BwaW5nXHJcbiAqXHJcbiAqIFN0cmVhbWluZyBSUENzIGFyZSBzdGF0ZWZ1bCBhbmQgbmVlZCB0byBiZSBzdGFydCgpZWQgYmVmb3JlIG1lc3NhZ2VzIGNhblxyXG4gKiBiZSBzZW50IGFuZCByZWNlaXZlZC4gVGhlIFBlcnNpc3RlbnRTdHJlYW0gd2lsbCBjYWxsIHRoZSBvbk9wZW4oKSBmdW5jdGlvblxyXG4gKiBvZiB0aGUgbGlzdGVuZXIgb25jZSB0aGUgc3RyZWFtIGlzIHJlYWR5IHRvIGFjY2VwdCByZXF1ZXN0cy5cclxuICpcclxuICogU2hvdWxkIGEgc3RhcnQoKSBmYWlsLCBQZXJzaXN0ZW50U3RyZWFtIHdpbGwgY2FsbCB0aGUgcmVnaXN0ZXJlZCBvbkNsb3NlKClcclxuICogbGlzdGVuZXIgd2l0aCBhIEZpcmVzdG9yZUVycm9yIGluZGljYXRpbmcgd2hhdCB3ZW50IHdyb25nLlxyXG4gKlxyXG4gKiBBIFBlcnNpc3RlbnRTdHJlYW0gY2FuIGJlIHN0YXJ0ZWQgYW5kIHN0b3BwZWQgcmVwZWF0ZWRseS5cclxuICpcclxuICogR2VuZXJpYyB0eXBlczpcclxuICogIFNlbmRUeXBlOiBUaGUgdHlwZSBvZiB0aGUgb3V0Z29pbmcgbWVzc2FnZSBvZiB0aGUgdW5kZXJseWluZ1xyXG4gKiAgICBjb25uZWN0aW9uIHN0cmVhbVxyXG4gKiAgUmVjZWl2ZVR5cGU6IFRoZSB0eXBlIG9mIHRoZSBpbmNvbWluZyBtZXNzYWdlIG9mIHRoZSB1bmRlcmx5aW5nXHJcbiAqICAgIGNvbm5lY3Rpb24gc3RyZWFtXHJcbiAqICBMaXN0ZW5lclR5cGU6IFRoZSB0eXBlIG9mIHRoZSBsaXN0ZW5lciB0aGF0IHdpbGwgYmUgdXNlZCBmb3IgY2FsbGJhY2tzXHJcbiAqL1xyXG52YXIgUGVyc2lzdGVudFN0cmVhbSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFBlcnNpc3RlbnRTdHJlYW0ocXVldWUsIGNvbm5lY3Rpb25UaW1lcklkLCBpZGxlVGltZXJJZCwgY29ubmVjdGlvbiwgY3JlZGVudGlhbHNQcm92aWRlciwgbGlzdGVuZXIpIHtcclxuICAgICAgICB0aGlzLnF1ZXVlID0gcXVldWU7XHJcbiAgICAgICAgdGhpcy5pZGxlVGltZXJJZCA9IGlkbGVUaW1lcklkO1xyXG4gICAgICAgIHRoaXMuY29ubmVjdGlvbiA9IGNvbm5lY3Rpb247XHJcbiAgICAgICAgdGhpcy5jcmVkZW50aWFsc1Byb3ZpZGVyID0gY3JlZGVudGlhbHNQcm92aWRlcjtcclxuICAgICAgICB0aGlzLmxpc3RlbmVyID0gbGlzdGVuZXI7XHJcbiAgICAgICAgdGhpcy5zdGF0ZSA9IFBlcnNpc3RlbnRTdHJlYW1TdGF0ZS5Jbml0aWFsO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEEgY2xvc2UgY291bnQgdGhhdCdzIGluY3JlbWVudGVkIGV2ZXJ5IHRpbWUgdGhlIHN0cmVhbSBpcyBjbG9zZWQ7IHVzZWQgYnlcclxuICAgICAgICAgKiBnZXRDbG9zZUd1YXJkZWREaXNwYXRjaGVyKCkgdG8gaW52YWxpZGF0ZSBjYWxsYmFja3MgdGhhdCBoYXBwZW4gYWZ0ZXJcclxuICAgICAgICAgKiBjbG9zZS5cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLmNsb3NlQ291bnQgPSAwO1xyXG4gICAgICAgIHRoaXMuaWRsZVRpbWVyID0gbnVsbDtcclxuICAgICAgICB0aGlzLnN0cmVhbSA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5iYWNrb2ZmID0gbmV3IEV4cG9uZW50aWFsQmFja29mZihxdWV1ZSwgY29ubmVjdGlvblRpbWVySWQpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgc3RhcnQoKSBoYXMgYmVlbiBjYWxsZWQgYW5kIG5vIGVycm9yIGhhcyBvY2N1cnJlZC4gVHJ1ZVxyXG4gICAgICogaW5kaWNhdGVzIHRoZSBzdHJlYW0gaXMgb3BlbiBvciBpbiB0aGUgcHJvY2VzcyBvZiBvcGVuaW5nICh3aGljaFxyXG4gICAgICogZW5jb21wYXNzZXMgcmVzcGVjdGluZyBiYWNrb2ZmLCBnZXR0aW5nIGF1dGggdG9rZW5zLCBhbmQgc3RhcnRpbmcgdGhlXHJcbiAgICAgKiBhY3R1YWwgUlBDKS4gVXNlIGlzT3BlbigpIHRvIGRldGVybWluZSBpZiB0aGUgc3RyZWFtIGlzIG9wZW4gYW5kIHJlYWR5IGZvclxyXG4gICAgICogb3V0Ym91bmQgcmVxdWVzdHMuXHJcbiAgICAgKi9cclxuICAgIFBlcnNpc3RlbnRTdHJlYW0ucHJvdG90eXBlLmlzU3RhcnRlZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gKHRoaXMuc3RhdGUgPT09IFBlcnNpc3RlbnRTdHJlYW1TdGF0ZS5TdGFydGluZyB8fFxyXG4gICAgICAgICAgICB0aGlzLnN0YXRlID09PSBQZXJzaXN0ZW50U3RyZWFtU3RhdGUuT3BlbiB8fFxyXG4gICAgICAgICAgICB0aGlzLnN0YXRlID09PSBQZXJzaXN0ZW50U3RyZWFtU3RhdGUuQmFja29mZik7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhlIHVuZGVybHlpbmcgUlBDIGlzIG9wZW4gKHRoZSBvbk9wZW4oKSBsaXN0ZW5lciBoYXMgYmVlblxyXG4gICAgICogY2FsbGVkKSBhbmQgdGhlIHN0cmVhbSBpcyByZWFkeSBmb3Igb3V0Ym91bmQgcmVxdWVzdHMuXHJcbiAgICAgKi9cclxuICAgIFBlcnNpc3RlbnRTdHJlYW0ucHJvdG90eXBlLmlzT3BlbiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZSA9PT0gUGVyc2lzdGVudFN0cmVhbVN0YXRlLk9wZW47XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBTdGFydHMgdGhlIFJQQy4gT25seSBhbGxvd2VkIGlmIGlzU3RhcnRlZCgpIHJldHVybnMgZmFsc2UuIFRoZSBzdHJlYW0gaXNcclxuICAgICAqIG5vdCBpbW1lZGlhdGVseSByZWFkeSBmb3IgdXNlOiBvbk9wZW4oKSB3aWxsIGJlIGludm9rZWQgd2hlbiB0aGUgUlBDIGlzXHJcbiAgICAgKiByZWFkeSBmb3Igb3V0Ym91bmQgcmVxdWVzdHMsIGF0IHdoaWNoIHBvaW50IGlzT3BlbigpIHdpbGwgcmV0dXJuIHRydWUuXHJcbiAgICAgKlxyXG4gICAgICogV2hlbiBzdGFydCByZXR1cm5zLCBpc1N0YXJ0ZWQoKSB3aWxsIHJldHVybiB0cnVlLlxyXG4gICAgICovXHJcbiAgICBQZXJzaXN0ZW50U3RyZWFtLnByb3RvdHlwZS5zdGFydCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAodGhpcy5zdGF0ZSA9PT0gUGVyc2lzdGVudFN0cmVhbVN0YXRlLkVycm9yKSB7XHJcbiAgICAgICAgICAgIHRoaXMucGVyZm9ybUJhY2tvZmYoKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBhc3NlcnQodGhpcy5zdGF0ZSA9PT0gUGVyc2lzdGVudFN0cmVhbVN0YXRlLkluaXRpYWwsICdBbHJlYWR5IHN0YXJ0ZWQnKTtcclxuICAgICAgICB0aGlzLmF1dGgoKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFN0b3BzIHRoZSBSUEMuIFRoaXMgY2FsbCBpcyBpZGVtcG90ZW50IGFuZCBhbGxvd2VkIHJlZ2FyZGxlc3Mgb2YgdGhlXHJcbiAgICAgKiBjdXJyZW50IGlzU3RhcnRlZCgpIHN0YXRlLlxyXG4gICAgICpcclxuICAgICAqIFdoZW4gc3RvcCByZXR1cm5zLCBpc1N0YXJ0ZWQoKSBhbmQgaXNPcGVuKCkgd2lsbCBib3RoIHJldHVybiBmYWxzZS5cclxuICAgICAqL1xyXG4gICAgUGVyc2lzdGVudFN0cmVhbS5wcm90b3R5cGUuc3RvcCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdHNsaWIuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYi5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5pc1N0YXJ0ZWQoKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgMl07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuY2xvc2UoUGVyc2lzdGVudFN0cmVhbVN0YXRlLkluaXRpYWwpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSAyO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEFmdGVyIGFuIGVycm9yIHRoZSBzdHJlYW0gd2lsbCB1c3VhbGx5IGJhY2sgb2ZmIG9uIHRoZSBuZXh0IGF0dGVtcHQgdG9cclxuICAgICAqIHN0YXJ0IGl0LiBJZiB0aGUgZXJyb3Igd2FycmFudHMgYW4gaW1tZWRpYXRlIHJlc3RhcnQgb2YgdGhlIHN0cmVhbSwgdGhlXHJcbiAgICAgKiBzZW5kZXIgY2FuIHVzZSB0aGlzIHRvIGluZGljYXRlIHRoYXQgdGhlIHJlY2VpdmVyIHNob3VsZCBub3QgYmFjayBvZmYuXHJcbiAgICAgKlxyXG4gICAgICogRWFjaCBlcnJvciB3aWxsIGNhbGwgdGhlIG9uQ2xvc2UoKSBsaXN0ZW5lci4gVGhhdCBmdW5jdGlvbiBjYW4gZGVjaWRlIHRvXHJcbiAgICAgKiBpbmhpYml0IGJhY2tvZmYgaWYgcmVxdWlyZWQuXHJcbiAgICAgKi9cclxuICAgIFBlcnNpc3RlbnRTdHJlYW0ucHJvdG90eXBlLmluaGliaXRCYWNrb2ZmID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGFzc2VydCghdGhpcy5pc1N0YXJ0ZWQoKSwgJ0NhbiBvbmx5IGluaGliaXQgYmFja29mZiBpbiBhIHN0b3BwZWQgc3RhdGUnKTtcclxuICAgICAgICB0aGlzLnN0YXRlID0gUGVyc2lzdGVudFN0cmVhbVN0YXRlLkluaXRpYWw7XHJcbiAgICAgICAgdGhpcy5iYWNrb2ZmLnJlc2V0KCk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBNYXJrcyB0aGlzIHN0cmVhbSBhcyBpZGxlLiBJZiBubyBmdXJ0aGVyIGFjdGlvbnMgYXJlIHBlcmZvcm1lZCBvbiB0aGVcclxuICAgICAqIHN0cmVhbSBmb3Igb25lIG1pbnV0ZSwgdGhlIHN0cmVhbSB3aWxsIGF1dG9tYXRpY2FsbHkgY2xvc2UgaXRzZWxmIGFuZFxyXG4gICAgICogbm90aWZ5IHRoZSBzdHJlYW0ncyBvbkNsb3NlKCkgaGFuZGxlciB3aXRoIFN0YXR1cy5PSy4gVGhlIHN0cmVhbSB3aWxsIHRoZW5cclxuICAgICAqIGJlIGluIGEgIWlzU3RhcnRlZCgpIHN0YXRlLCByZXF1aXJpbmcgdGhlIGNhbGxlciB0byBzdGFydCB0aGUgc3RyZWFtIGFnYWluXHJcbiAgICAgKiBiZWZvcmUgZnVydGhlciB1c2UuXHJcbiAgICAgKlxyXG4gICAgICogT25seSBzdHJlYW1zIHRoYXQgYXJlIGluIHN0YXRlICdPcGVuJyBjYW4gYmUgbWFya2VkIGlkbGUsIGFzIGFsbCBvdGhlclxyXG4gICAgICogc3RhdGVzIGltcGx5IHBlbmRpbmcgbmV0d29yayBvcGVyYXRpb25zLlxyXG4gICAgICovXHJcbiAgICBQZXJzaXN0ZW50U3RyZWFtLnByb3RvdHlwZS5tYXJrSWRsZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIC8vIFN0YXJ0cyB0aGUgaWRsZSB0aW1lIGlmIHdlIGFyZSBpbiBzdGF0ZSAnT3BlbicgYW5kIGFyZSBub3QgeWV0IGFscmVhZHlcclxuICAgICAgICAvLyBydW5uaW5nIGEgdGltZXIgKGluIHdoaWNoIGNhc2UgdGhlIHByZXZpb3VzIGlkbGUgdGltZW91dCBzdGlsbCBhcHBsaWVzKS5cclxuICAgICAgICBpZiAodGhpcy5pc09wZW4oKSAmJiB0aGlzLmlkbGVUaW1lciA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aGlzLmlkbGVUaW1lciA9IHRoaXMucXVldWUuZW5xdWV1ZUFmdGVyRGVsYXkodGhpcy5pZGxlVGltZXJJZCwgSURMRV9USU1FT1VUX01TLCBmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5oYW5kbGVJZGxlQ2xvc2VUaW1lcigpOyB9KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqIFNlbmRzIGEgbWVzc2FnZSB0byB0aGUgdW5kZXJseWluZyBzdHJlYW0uICovXHJcbiAgICBQZXJzaXN0ZW50U3RyZWFtLnByb3RvdHlwZS5zZW5kUmVxdWVzdCA9IGZ1bmN0aW9uIChtc2cpIHtcclxuICAgICAgICB0aGlzLmNhbmNlbElkbGVDaGVjaygpO1xyXG4gICAgICAgIHRoaXMuc3RyZWFtLnNlbmQobXNnKTtcclxuICAgIH07XHJcbiAgICAvKiogQ2FsbGVkIGJ5IHRoZSBpZGxlIHRpbWVyIHdoZW4gdGhlIHN0cmVhbSBzaG91bGQgY2xvc2UgZHVlIHRvIGluYWN0aXZpdHkuICovXHJcbiAgICBQZXJzaXN0ZW50U3RyZWFtLnByb3RvdHlwZS5oYW5kbGVJZGxlQ2xvc2VUaW1lciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdHNsaWIuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYi5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzT3BlbigpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gV2hlbiB0aW1pbmcgb3V0IGFuIGlkbGUgc3RyZWFtIHRoZXJlJ3Mgbm8gcmVhc29uIHRvIGZvcmNlIHRoZSBzdHJlYW0gaW50byBiYWNrb2ZmIHdoZW5cclxuICAgICAgICAgICAgICAgICAgICAvLyBpdCByZXN0YXJ0cyBzbyBzZXQgdGhlIHN0cmVhbSBzdGF0ZSB0byBJbml0aWFsIGluc3RlYWQgb2YgRXJyb3IuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMuY2xvc2UoUGVyc2lzdGVudFN0cmVhbVN0YXRlLkluaXRpYWwpXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqIE1hcmtzIHRoZSBzdHJlYW0gYXMgYWN0aXZlIGFnYWluLiAqL1xyXG4gICAgUGVyc2lzdGVudFN0cmVhbS5wcm90b3R5cGUuY2FuY2VsSWRsZUNoZWNrID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmlkbGVUaW1lcikge1xyXG4gICAgICAgICAgICB0aGlzLmlkbGVUaW1lci5jYW5jZWwoKTtcclxuICAgICAgICAgICAgdGhpcy5pZGxlVGltZXIgPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIENsb3NlcyB0aGUgc3RyZWFtIGFuZCBjbGVhbnMgdXAgYXMgbmVjZXNzYXJ5OlxyXG4gICAgICpcclxuICAgICAqICogY2xvc2VzIHRoZSB1bmRlcmx5aW5nIEdSUEMgc3RyZWFtO1xyXG4gICAgICogKiBjYWxscyB0aGUgb25DbG9zZSBoYW5kbGVyIHdpdGggdGhlIGdpdmVuICdlcnJvcic7XHJcbiAgICAgKiAqIHNldHMgaW50ZXJuYWwgc3RyZWFtIHN0YXRlIHRvICdmaW5hbFN0YXRlJztcclxuICAgICAqICogYWRqdXN0cyB0aGUgYmFja29mZiB0aW1lciBiYXNlZCBvbiB0aGUgZXJyb3JcclxuICAgICAqXHJcbiAgICAgKiBBIG5ldyBzdHJlYW0gY2FuIGJlIG9wZW5lZCBieSBjYWxsaW5nIHN0YXJ0KCkuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGZpbmFsU3RhdGUgdGhlIGludGVuZGVkIHN0YXRlIG9mIHRoZSBzdHJlYW0gYWZ0ZXIgY2xvc2luZy5cclxuICAgICAqIEBwYXJhbSBlcnJvciB0aGUgZXJyb3IgdGhlIGNvbm5lY3Rpb24gd2FzIGNsb3NlZCB3aXRoLlxyXG4gICAgICovXHJcbiAgICBQZXJzaXN0ZW50U3RyZWFtLnByb3RvdHlwZS5jbG9zZSA9IGZ1bmN0aW9uIChmaW5hbFN0YXRlLCBlcnJvciQxKSB7XHJcbiAgICAgICAgcmV0dXJuIHRzbGliLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHNsaWIuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhc3NlcnQodGhpcy5pc1N0YXJ0ZWQoKSwgJ09ubHkgc3RhcnRlZCBzdHJlYW1zIHNob3VsZCBiZSBjbG9zZWQuJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFzc2VydChmaW5hbFN0YXRlID09PSBQZXJzaXN0ZW50U3RyZWFtU3RhdGUuRXJyb3IgfHwgaXNOdWxsT3JVbmRlZmluZWQoZXJyb3IkMSksIFwiQ2FuJ3QgcHJvdmlkZSBhbiBlcnJvciB3aGVuIG5vdCBpbiBhbiBlcnJvciBzdGF0ZS5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENhbmNlbCBhbnkgb3V0c3RhbmRpbmcgdGltZXJzICh0aGV5J3JlIGd1YXJhbnRlZWQgbm90IHRvIGV4ZWN1dGUpLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNhbmNlbElkbGVDaGVjaygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmJhY2tvZmYuY2FuY2VsKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEludmFsaWRhdGVzIGFueSBzdHJlYW0tcmVsYXRlZCBjYWxsYmFja3MgKGUuZy4gZnJvbSBhdXRoIG9yIHRoZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB1bmRlcmx5aW5nIHN0cmVhbSksIGd1YXJhbnRlZWluZyB0aGV5IHdvbid0IGV4ZWN1dGUuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2VDb3VudCsrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZmluYWxTdGF0ZSAhPT0gUGVyc2lzdGVudFN0cmVhbVN0YXRlLkVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGlzIGlzIGFuIGludGVudGlvbmFsIGNsb3NlIGVuc3VyZSB3ZSBkb24ndCBkZWxheSBvdXIgbmV4dCBjb25uZWN0aW9uIGF0dGVtcHQuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmJhY2tvZmYucmVzZXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChlcnJvciQxICYmIGVycm9yJDEuY29kZSA9PT0gQ29kZS5SRVNPVVJDRV9FWEhBVVNURUQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIExvZyB0aGUgZXJyb3IuIChQcm9iYWJseSBlaXRoZXIgJ3F1b3RhIGV4Y2VlZGVkJyBvciAnbWF4IHF1ZXVlIGxlbmd0aCByZWFjaGVkJy4pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvcihlcnJvciQxLnRvU3RyaW5nKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3IoJ1VzaW5nIG1heGltdW0gYmFja29mZiBkZWxheSB0byBwcmV2ZW50IG92ZXJsb2FkaW5nIHRoZSBiYWNrZW5kLicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5iYWNrb2ZmLnJlc2V0VG9NYXgoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChlcnJvciQxICYmIGVycm9yJDEuY29kZSA9PT0gQ29kZS5VTkFVVEhFTlRJQ0FURUQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFwidW5hdXRoZW50aWNhdGVkXCIgZXJyb3IgbWVhbnMgdGhlIHRva2VuIHdhcyByZWplY3RlZC4gVHJ5IGZvcmNlIHJlZnJlc2hpbmcgaXQgaW4gY2FzZSBpdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8ganVzdCBleHBpcmVkLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jcmVkZW50aWFsc1Byb3ZpZGVyLmludmFsaWRhdGVUb2tlbigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENsZWFuIHVwIHRoZSB1bmRlcmx5aW5nIHN0cmVhbSBiZWNhdXNlIHdlIGFyZSBubyBsb25nZXIgaW50ZXJlc3RlZCBpbiBldmVudHMuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnN0cmVhbSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50ZWFyRG93bigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdHJlYW0uY2xvc2UoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RyZWFtID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGlzIHN0YXRlIG11c3QgYmUgYXNzaWduZWQgYmVmb3JlIGNhbGxpbmcgb25DbG9zZSgpIHRvIGFsbG93IHRoZSBjYWxsYmFjayB0b1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBpbmhpYml0IGJhY2tvZmYgb3Igb3RoZXJ3aXNlIG1hbmlwdWxhdGUgdGhlIHN0YXRlIGluIGl0cyBub24tc3RhcnRlZCBzdGF0ZS5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IGZpbmFsU3RhdGU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5vdGlmeSB0aGUgbGlzdGVuZXIgdGhhdCB0aGUgc3RyZWFtIGNsb3NlZC5cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5saXN0ZW5lci5vbkNsb3NlKGVycm9yJDEpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5vdGlmeSB0aGUgbGlzdGVuZXIgdGhhdCB0aGUgc3RyZWFtIGNsb3NlZC5cclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQ2FuIGJlIG92ZXJyaWRkZW4gdG8gcGVyZm9ybSBhZGRpdGlvbmFsIGNsZWFudXAgYmVmb3JlIHRoZSBzdHJlYW0gaXMgY2xvc2VkLlxyXG4gICAgICogQ2FsbGluZyBzdXBlci50ZWFyRG93bigpIGlzIG5vdCByZXF1aXJlZC5cclxuICAgICAqL1xyXG4gICAgUGVyc2lzdGVudFN0cmVhbS5wcm90b3R5cGUudGVhckRvd24gPSBmdW5jdGlvbiAoKSB7IH07XHJcbiAgICBQZXJzaXN0ZW50U3RyZWFtLnByb3RvdHlwZS5hdXRoID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgYXNzZXJ0KHRoaXMuc3RhdGUgPT09IFBlcnNpc3RlbnRTdHJlYW1TdGF0ZS5Jbml0aWFsLCAnTXVzdCBiZSBpbiBpbml0aWFsIHN0YXRlIHRvIGF1dGgnKTtcclxuICAgICAgICB0aGlzLnN0YXRlID0gUGVyc2lzdGVudFN0cmVhbVN0YXRlLlN0YXJ0aW5nO1xyXG4gICAgICAgIHZhciBkaXNwYXRjaElmTm90Q2xvc2VkID0gdGhpcy5nZXRDbG9zZUd1YXJkZWREaXNwYXRjaGVyKHRoaXMuY2xvc2VDb3VudCk7XHJcbiAgICAgICAgLy8gVE9ETyhtaWtlbGVoZW4pOiBKdXN0IHVzZSBkaXNwYXRjaElmTm90Q2xvc2VkLCBidXQgc2VlIFRPRE8gYmVsb3cuXHJcbiAgICAgICAgdmFyIGNsb3NlQ291bnQgPSB0aGlzLmNsb3NlQ291bnQ7XHJcbiAgICAgICAgdGhpcy5jcmVkZW50aWFsc1Byb3ZpZGVyLmdldFRva2VuKCkudGhlbihmdW5jdGlvbiAodG9rZW4pIHtcclxuICAgICAgICAgICAgLy8gU3RyZWFtIGNhbiBiZSBzdG9wcGVkIHdoaWxlIHdhaXRpbmcgZm9yIGF1dGhlbnRpY2F0aW9uLlxyXG4gICAgICAgICAgICAvLyBUT0RPKG1pa2VsZWhlbik6IFdlIHJlYWxseSBzaG91bGQganVzdCB1c2UgZGlzcGF0Y2hJZk5vdENsb3NlZFxyXG4gICAgICAgICAgICAvLyBhbmQgbGV0IHRoaXMgZGlzcGF0Y2ggb250byB0aGUgcXVldWUsIGJ1dCB0aGF0IG9wZW5lZCBhIHNwZWMgdGVzdCBjYW5cclxuICAgICAgICAgICAgLy8gb2Ygd29ybXMgdGhhdCBJIGRvbid0IHdhbnQgdG8gZGVhbCB3aXRoIGluIHRoaXMgUFIuXHJcbiAgICAgICAgICAgIGlmIChfdGhpcy5jbG9zZUNvdW50ID09PSBjbG9zZUNvdW50KSB7XHJcbiAgICAgICAgICAgICAgICAvLyBOb3JtYWxseSB3ZSdkIGhhdmUgdG8gc2NoZWR1bGUgdGhlIGNhbGxiYWNrIG9uIHRoZSBBc3luY1F1ZXVlLlxyXG4gICAgICAgICAgICAgICAgLy8gSG93ZXZlciwgdGhlIGZvbGxvd2luZyBjYWxscyBhcmUgc2FmZSB0byBiZSBjYWxsZWQgb3V0c2lkZSB0aGVcclxuICAgICAgICAgICAgICAgIC8vIEFzeW5jUXVldWUgc2luY2UgdGhleSBkb24ndCBjaGFpbiBhc3luY2hyb25vdXMgY2FsbHNcclxuICAgICAgICAgICAgICAgIF90aGlzLnN0YXJ0U3RyZWFtKHRva2VuKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgICAgICBkaXNwYXRjaElmTm90Q2xvc2VkKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHZhciBycGNFcnJvciA9IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLlVOS05PV04sICdGZXRjaGluZyBhdXRoIHRva2VuIGZhaWxlZDogJyArIGVycm9yLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLmhhbmRsZVN0cmVhbUNsb3NlKHJwY0Vycm9yKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgUGVyc2lzdGVudFN0cmVhbS5wcm90b3R5cGUuc3RhcnRTdHJlYW0gPSBmdW5jdGlvbiAodG9rZW4pIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIGFzc2VydCh0aGlzLnN0YXRlID09PSBQZXJzaXN0ZW50U3RyZWFtU3RhdGUuU3RhcnRpbmcsICdUcnlpbmcgdG8gc3RhcnQgc3RyZWFtIGluIGEgbm9uLXN0YXJ0aW5nIHN0YXRlJyk7XHJcbiAgICAgICAgdmFyIGRpc3BhdGNoSWZOb3RDbG9zZWQgPSB0aGlzLmdldENsb3NlR3VhcmRlZERpc3BhdGNoZXIodGhpcy5jbG9zZUNvdW50KTtcclxuICAgICAgICB0aGlzLnN0cmVhbSA9IHRoaXMuc3RhcnRScGModG9rZW4pO1xyXG4gICAgICAgIHRoaXMuc3RyZWFtLm9uT3BlbihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGRpc3BhdGNoSWZOb3RDbG9zZWQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgYXNzZXJ0KF90aGlzLnN0YXRlID09PSBQZXJzaXN0ZW50U3RyZWFtU3RhdGUuU3RhcnRpbmcsICdFeHBlY3RlZCBzdHJlYW0gdG8gYmUgaW4gc3RhdGUgU3RhcnRpbmcsIGJ1dCB3YXMgJyArIF90aGlzLnN0YXRlKTtcclxuICAgICAgICAgICAgICAgIF90aGlzLnN0YXRlID0gUGVyc2lzdGVudFN0cmVhbVN0YXRlLk9wZW47XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMubGlzdGVuZXIub25PcGVuKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuc3RyZWFtLm9uQ2xvc2UoZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGRpc3BhdGNoSWZOb3RDbG9zZWQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLmhhbmRsZVN0cmVhbUNsb3NlKGVycm9yKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5zdHJlYW0ub25NZXNzYWdlKGZ1bmN0aW9uIChtc2cpIHtcclxuICAgICAgICAgICAgZGlzcGF0Y2hJZk5vdENsb3NlZChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMub25NZXNzYWdlKG1zZyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIFBlcnNpc3RlbnRTdHJlYW0ucHJvdG90eXBlLnBlcmZvcm1CYWNrb2ZmID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgYXNzZXJ0KHRoaXMuc3RhdGUgPT09IFBlcnNpc3RlbnRTdHJlYW1TdGF0ZS5FcnJvciwgJ1Nob3VsZCBvbmx5IHBlcmZvcm0gYmFja29mZiB3aGVuIGluIEVycm9yIHN0YXRlJyk7XHJcbiAgICAgICAgdGhpcy5zdGF0ZSA9IFBlcnNpc3RlbnRTdHJlYW1TdGF0ZS5CYWNrb2ZmO1xyXG4gICAgICAgIHRoaXMuYmFja29mZi5iYWNrb2ZmQW5kUnVuKGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRzbGliLl9fYXdhaXRlcihfdGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgYXNzZXJ0KHRoaXMuc3RhdGUgPT09IFBlcnNpc3RlbnRTdHJlYW1TdGF0ZS5CYWNrb2ZmLCAnQmFja29mZiBlbGFwc2VkIGJ1dCBzdGF0ZSBpcyBub3c6ICcgKyB0aGlzLnN0YXRlKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBQZXJzaXN0ZW50U3RyZWFtU3RhdGUuSW5pdGlhbDtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3RhcnQoKTtcclxuICAgICAgICAgICAgICAgIGFzc2VydCh0aGlzLmlzU3RhcnRlZCgpLCAnUGVyc2lzdGVudFN0cmVhbSBzaG91bGQgaGF2ZSBzdGFydGVkJyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pOyB9KTtcclxuICAgIH07XHJcbiAgICAvLyBWaXNpYmxlIGZvciB0ZXN0c1xyXG4gICAgUGVyc2lzdGVudFN0cmVhbS5wcm90b3R5cGUuaGFuZGxlU3RyZWFtQ2xvc2UgPSBmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICBhc3NlcnQodGhpcy5pc1N0YXJ0ZWQoKSwgXCJDYW4ndCBoYW5kbGUgc2VydmVyIGNsb3NlIG9uIG5vbi1zdGFydGVkIHN0cmVhbVwiKTtcclxuICAgICAgICBkZWJ1ZyhMT0dfVEFHJDUsIFwiY2xvc2Ugd2l0aCBlcnJvcjogXCIgKyBlcnJvcik7XHJcbiAgICAgICAgdGhpcy5zdHJlYW0gPSBudWxsO1xyXG4gICAgICAgIC8vIEluIHRoZW9yeSB0aGUgc3RyZWFtIGNvdWxkIGNsb3NlIGNsZWFubHksIGhvd2V2ZXIsIGluIG91ciBjdXJyZW50IG1vZGVsXHJcbiAgICAgICAgLy8gd2UgbmV2ZXIgZXhwZWN0IHRoaXMgdG8gaGFwcGVuIGJlY2F1c2UgaWYgd2Ugc3RvcCBhIHN0cmVhbSBvdXJzZWx2ZXMsXHJcbiAgICAgICAgLy8gdGhpcyBjYWxsYmFjayB3aWxsIG5ldmVyIGJlIGNhbGxlZC4gVG8gcHJldmVudCBjYXNlcyB3aGVyZSB3ZSByZXRyeVxyXG4gICAgICAgIC8vIHdpdGhvdXQgYSBiYWNrb2ZmIGFjY2lkZW50YWxseSwgd2Ugc2V0IHRoZSBzdHJlYW0gdG8gZXJyb3IgaW4gYWxsIGNhc2VzLlxyXG4gICAgICAgIHJldHVybiB0aGlzLmNsb3NlKFBlcnNpc3RlbnRTdHJlYW1TdGF0ZS5FcnJvciwgZXJyb3IpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyBhIFwiZGlzcGF0Y2hlclwiIGZ1bmN0aW9uIHRoYXQgZGlzcGF0Y2hlcyBvcGVyYXRpb25zIG9udG8gdGhlXHJcbiAgICAgKiBBc3luY1F1ZXVlIGJ1dCBvbmx5IHJ1bnMgdGhlbSBpZiBjbG9zZUNvdW50IHJlbWFpbnMgdW5jaGFuZ2VkLiBUaGlzIGFsbG93c1xyXG4gICAgICogdXMgdG8gdHVybiBhdXRoIC8gc3RyZWFtIGNhbGxiYWNrcyBpbnRvIG5vLW9wcyBpZiB0aGUgc3RyZWFtIGlzIGNsb3NlZCAvXHJcbiAgICAgKiByZS1vcGVuZWQsIGV0Yy5cclxuICAgICAqL1xyXG4gICAgUGVyc2lzdGVudFN0cmVhbS5wcm90b3R5cGUuZ2V0Q2xvc2VHdWFyZGVkRGlzcGF0Y2hlciA9IGZ1bmN0aW9uIChzdGFydENsb3NlQ291bnQpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoZm4pIHtcclxuICAgICAgICAgICAgX3RoaXMucXVldWUuZW5xdWV1ZUFuZEZvcmdldChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoX3RoaXMuY2xvc2VDb3VudCA9PT0gc3RhcnRDbG9zZUNvdW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZuKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBkZWJ1ZyhMT0dfVEFHJDUsICdzdHJlYW0gY2FsbGJhY2sgc2tpcHBlZCBieSBnZXRDbG9zZUd1YXJkZWREaXNwYXRjaGVyLicpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gUGVyc2lzdGVudFN0cmVhbTtcclxufSgpKTtcclxuLyoqXHJcbiAqIEEgUGVyc2lzdGVudFN0cmVhbSB0aGF0IGltcGxlbWVudHMgdGhlIExpc3RlbiBSUEMuXHJcbiAqXHJcbiAqIE9uY2UgdGhlIExpc3RlbiBzdHJlYW0gaGFzIGNhbGxlZCB0aGUgb25PcGVuKCkgbGlzdGVuZXIsIGFueSBudW1iZXIgb2ZcclxuICogbGlzdGVuKCkgYW5kIHVubGlzdGVuKCkgY2FsbHMgY2FuIGJlIG1hZGUgdG8gY29udHJvbCB3aGF0IGNoYW5nZXMgd2lsbCBiZVxyXG4gKiBzZW50IGZyb20gdGhlIHNlcnZlciBmb3IgTGlzdGVuUmVzcG9uc2VzLlxyXG4gKi9cclxudmFyIFBlcnNpc3RlbnRMaXN0ZW5TdHJlYW0gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICB0c2xpYi5fX2V4dGVuZHMoUGVyc2lzdGVudExpc3RlblN0cmVhbSwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIFBlcnNpc3RlbnRMaXN0ZW5TdHJlYW0ocXVldWUsIGNvbm5lY3Rpb24sIGNyZWRlbnRpYWxzLCBzZXJpYWxpemVyLCBsaXN0ZW5lcikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHF1ZXVlLCBUaW1lcklkLkxpc3RlblN0cmVhbUNvbm5lY3Rpb25CYWNrb2ZmLCBUaW1lcklkLkxpc3RlblN0cmVhbUlkbGUsIGNvbm5lY3Rpb24sIGNyZWRlbnRpYWxzLCBsaXN0ZW5lcikgfHwgdGhpcztcclxuICAgICAgICBfdGhpcy5zZXJpYWxpemVyID0gc2VyaWFsaXplcjtcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICBQZXJzaXN0ZW50TGlzdGVuU3RyZWFtLnByb3RvdHlwZS5zdGFydFJwYyA9IGZ1bmN0aW9uICh0b2tlbikge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNvbm5lY3Rpb24ub3BlblN0cmVhbSgnTGlzdGVuJywgdG9rZW4pO1xyXG4gICAgfTtcclxuICAgIFBlcnNpc3RlbnRMaXN0ZW5TdHJlYW0ucHJvdG90eXBlLm9uTWVzc2FnZSA9IGZ1bmN0aW9uICh3YXRjaENoYW5nZVByb3RvKSB7XHJcbiAgICAgICAgLy8gQSBzdWNjZXNzZnVsIHJlc3BvbnNlIG1lYW5zIHRoZSBzdHJlYW0gaXMgaGVhbHRoeVxyXG4gICAgICAgIHRoaXMuYmFja29mZi5yZXNldCgpO1xyXG4gICAgICAgIHZhciB3YXRjaENoYW5nZSA9IHRoaXMuc2VyaWFsaXplci5mcm9tV2F0Y2hDaGFuZ2Uod2F0Y2hDaGFuZ2VQcm90byk7XHJcbiAgICAgICAgdmFyIHNuYXBzaG90ID0gdGhpcy5zZXJpYWxpemVyLnZlcnNpb25Gcm9tTGlzdGVuUmVzcG9uc2Uod2F0Y2hDaGFuZ2VQcm90byk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubGlzdGVuZXIub25XYXRjaENoYW5nZSh3YXRjaENoYW5nZSwgc25hcHNob3QpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmVnaXN0ZXJzIGludGVyZXN0IGluIHRoZSByZXN1bHRzIG9mIHRoZSBnaXZlbiB0YXJnZXQuIElmIHRoZSB0YXJnZXRcclxuICAgICAqIGluY2x1ZGVzIGEgcmVzdW1lVG9rZW4gaXQgd2lsbCBiZSBpbmNsdWRlZCBpbiB0aGUgcmVxdWVzdC4gUmVzdWx0cyB0aGF0XHJcbiAgICAgKiBhZmZlY3QgdGhlIHRhcmdldCB3aWxsIGJlIHN0cmVhbWVkIGJhY2sgYXMgV2F0Y2hDaGFuZ2UgbWVzc2FnZXMgdGhhdFxyXG4gICAgICogcmVmZXJlbmNlIHRoZSB0YXJnZXRJZC5cclxuICAgICAqL1xyXG4gICAgUGVyc2lzdGVudExpc3RlblN0cmVhbS5wcm90b3R5cGUud2F0Y2ggPSBmdW5jdGlvbiAodGFyZ2V0RGF0YSkge1xyXG4gICAgICAgIHZhciByZXF1ZXN0ID0ge307XHJcbiAgICAgICAgcmVxdWVzdC5kYXRhYmFzZSA9IHRoaXMuc2VyaWFsaXplci5lbmNvZGVkRGF0YWJhc2VJZDtcclxuICAgICAgICByZXF1ZXN0LmFkZFRhcmdldCA9IHRoaXMuc2VyaWFsaXplci50b1RhcmdldCh0YXJnZXREYXRhKTtcclxuICAgICAgICB2YXIgbGFiZWxzID0gdGhpcy5zZXJpYWxpemVyLnRvTGlzdGVuUmVxdWVzdExhYmVscyh0YXJnZXREYXRhKTtcclxuICAgICAgICBpZiAobGFiZWxzKSB7XHJcbiAgICAgICAgICAgIHJlcXVlc3QubGFiZWxzID0gbGFiZWxzO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnNlbmRSZXF1ZXN0KHJlcXVlc3QpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogVW5yZWdpc3RlcnMgaW50ZXJlc3QgaW4gdGhlIHJlc3VsdHMgb2YgdGhlIHRhcmdldCBhc3NvY2lhdGVkIHdpdGggdGhlXHJcbiAgICAgKiBnaXZlbiB0YXJnZXRJZC5cclxuICAgICAqL1xyXG4gICAgUGVyc2lzdGVudExpc3RlblN0cmVhbS5wcm90b3R5cGUudW53YXRjaCA9IGZ1bmN0aW9uICh0YXJnZXRJZCkge1xyXG4gICAgICAgIHZhciByZXF1ZXN0ID0ge307XHJcbiAgICAgICAgcmVxdWVzdC5kYXRhYmFzZSA9IHRoaXMuc2VyaWFsaXplci5lbmNvZGVkRGF0YWJhc2VJZDtcclxuICAgICAgICByZXF1ZXN0LnJlbW92ZVRhcmdldCA9IHRhcmdldElkO1xyXG4gICAgICAgIHRoaXMuc2VuZFJlcXVlc3QocmVxdWVzdCk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFBlcnNpc3RlbnRMaXN0ZW5TdHJlYW07XHJcbn0oUGVyc2lzdGVudFN0cmVhbSkpO1xyXG4vKipcclxuICogQSBTdHJlYW0gdGhhdCBpbXBsZW1lbnRzIHRoZSBXcml0ZSBSUEMuXHJcbiAqXHJcbiAqIFRoZSBXcml0ZSBSUEMgcmVxdWlyZXMgdGhlIGNhbGxlciB0byBtYWludGFpbiBzcGVjaWFsIHN0cmVhbVRva2VuXHJcbiAqIHN0YXRlIGluIGJldHdlZW4gY2FsbHMsIHRvIGhlbHAgdGhlIHNlcnZlciB1bmRlcnN0YW5kIHdoaWNoIHJlc3BvbnNlcyB0aGVcclxuICogY2xpZW50IGhhcyBwcm9jZXNzZWQgYnkgdGhlIHRpbWUgdGhlIG5leHQgcmVxdWVzdCBpcyBtYWRlLiBFdmVyeSByZXNwb25zZVxyXG4gKiB3aWxsIGNvbnRhaW4gYSBzdHJlYW1Ub2tlbjsgdGhpcyB2YWx1ZSBtdXN0IGJlIHBhc3NlZCB0byB0aGUgbmV4dFxyXG4gKiByZXF1ZXN0LlxyXG4gKlxyXG4gKiBBZnRlciBjYWxsaW5nIHN0YXJ0KCkgb24gdGhpcyBzdHJlYW0sIHRoZSBuZXh0IHJlcXVlc3QgbXVzdCBiZSBhIGhhbmRzaGFrZSxcclxuICogY29udGFpbmluZyB3aGF0ZXZlciBzdHJlYW1Ub2tlbiBpcyBvbiBoYW5kLiBPbmNlIGEgcmVzcG9uc2UgdG8gdGhpc1xyXG4gKiByZXF1ZXN0IGlzIHJlY2VpdmVkLCBhbGwgcGVuZGluZyBtdXRhdGlvbnMgbWF5IGJlIHN1Ym1pdHRlZC4gV2hlblxyXG4gKiBzdWJtaXR0aW5nIG11bHRpcGxlIGJhdGNoZXMgb2YgbXV0YXRpb25zIGF0IHRoZSBzYW1lIHRpbWUsIGl0J3NcclxuICogb2theSB0byB1c2UgdGhlIHNhbWUgc3RyZWFtVG9rZW4gZm9yIHRoZSBjYWxscyB0byB3cml0ZU11dGF0aW9ucy5cclxuICpcclxuICogVE9ETyhiLzMzMjcxMjM1KTogVXNlIHByb3RvIHR5cGVzXHJcbiAqL1xyXG52YXIgUGVyc2lzdGVudFdyaXRlU3RyZWFtID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgdHNsaWIuX19leHRlbmRzKFBlcnNpc3RlbnRXcml0ZVN0cmVhbSwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIFBlcnNpc3RlbnRXcml0ZVN0cmVhbShxdWV1ZSwgY29ubmVjdGlvbiwgY3JlZGVudGlhbHMsIHNlcmlhbGl6ZXIsIGxpc3RlbmVyKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcXVldWUsIFRpbWVySWQuV3JpdGVTdHJlYW1Db25uZWN0aW9uQmFja29mZiwgVGltZXJJZC5Xcml0ZVN0cmVhbUlkbGUsIGNvbm5lY3Rpb24sIGNyZWRlbnRpYWxzLCBsaXN0ZW5lcikgfHwgdGhpcztcclxuICAgICAgICBfdGhpcy5zZXJpYWxpemVyID0gc2VyaWFsaXplcjtcclxuICAgICAgICBfdGhpcy5oYW5kc2hha2VDb21wbGV0ZV8gPSBmYWxzZTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBUaGUgbGFzdCByZWNlaXZlZCBzdHJlYW0gdG9rZW4gZnJvbSB0aGUgc2VydmVyLCB1c2VkIHRvIGFja25vd2xlZGdlIHdoaWNoXHJcbiAgICAgICAgICogcmVzcG9uc2VzIHRoZSBjbGllbnQgaGFzIHByb2Nlc3NlZC4gU3RyZWFtIHRva2VucyBhcmUgb3BhcXVlIGNoZWNrcG9pbnRcclxuICAgICAgICAgKiBtYXJrZXJzIHdob3NlIG9ubHkgcmVhbCB2YWx1ZSBpcyB0aGVpciBpbmNsdXNpb24gaW4gdGhlIG5leHQgcmVxdWVzdC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFBlcnNpc3RlbnRXcml0ZVN0cmVhbSBtYW5hZ2VzIHByb3BhZ2F0aW5nIHRoaXMgdmFsdWUgZnJvbSByZXNwb25zZXMgdG8gdGhlXHJcbiAgICAgICAgICogbmV4dCByZXF1ZXN0LlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIF90aGlzLmxhc3RTdHJlYW1Ub2tlbiA9IGVtcHR5Qnl0ZVN0cmluZygpO1xyXG4gICAgICAgIHJldHVybiBfdGhpcztcclxuICAgIH1cclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShQZXJzaXN0ZW50V3JpdGVTdHJlYW0ucHJvdG90eXBlLCBcImhhbmRzaGFrZUNvbXBsZXRlXCIsIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBUcmFja3Mgd2hldGhlciBvciBub3QgYSBoYW5kc2hha2UgaGFzIGJlZW4gc3VjY2Vzc2Z1bGx5IGV4Y2hhbmdlZCBhbmRcclxuICAgICAgICAgKiB0aGUgc3RyZWFtIGlzIHJlYWR5IHRvIGFjY2VwdCBtdXRhdGlvbnMuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmhhbmRzaGFrZUNvbXBsZXRlXztcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIC8vIE92ZXJyaWRlIG9mIFBlcnNpc3RlbnRTdHJlYW0uc3RhcnRcclxuICAgIFBlcnNpc3RlbnRXcml0ZVN0cmVhbS5wcm90b3R5cGUuc3RhcnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5oYW5kc2hha2VDb21wbGV0ZV8gPSBmYWxzZTtcclxuICAgICAgICBfc3VwZXIucHJvdG90eXBlLnN0YXJ0LmNhbGwodGhpcyk7XHJcbiAgICB9O1xyXG4gICAgUGVyc2lzdGVudFdyaXRlU3RyZWFtLnByb3RvdHlwZS50ZWFyRG93biA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAodGhpcy5oYW5kc2hha2VDb21wbGV0ZV8pIHtcclxuICAgICAgICAgICAgdGhpcy53cml0ZU11dGF0aW9ucyhbXSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFBlcnNpc3RlbnRXcml0ZVN0cmVhbS5wcm90b3R5cGUuc3RhcnRScGMgPSBmdW5jdGlvbiAodG9rZW4pIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jb25uZWN0aW9uLm9wZW5TdHJlYW0oJ1dyaXRlJywgdG9rZW4pO1xyXG4gICAgfTtcclxuICAgIFBlcnNpc3RlbnRXcml0ZVN0cmVhbS5wcm90b3R5cGUub25NZXNzYWdlID0gZnVuY3Rpb24gKHJlc3BvbnNlUHJvdG8pIHtcclxuICAgICAgICAvLyBBbHdheXMgY2FwdHVyZSB0aGUgbGFzdCBzdHJlYW0gdG9rZW4uXHJcbiAgICAgICAgYXNzZXJ0KCEhcmVzcG9uc2VQcm90by5zdHJlYW1Ub2tlbiwgJ0dvdCBhIHdyaXRlIHJlc3BvbnNlIHdpdGhvdXQgYSBzdHJlYW0gdG9rZW4nKTtcclxuICAgICAgICB0aGlzLmxhc3RTdHJlYW1Ub2tlbiA9IHJlc3BvbnNlUHJvdG8uc3RyZWFtVG9rZW47XHJcbiAgICAgICAgaWYgKCF0aGlzLmhhbmRzaGFrZUNvbXBsZXRlXykge1xyXG4gICAgICAgICAgICAvLyBUaGUgZmlyc3QgcmVzcG9uc2UgaXMgYWx3YXlzIHRoZSBoYW5kc2hha2UgcmVzcG9uc2VcclxuICAgICAgICAgICAgYXNzZXJ0KCFyZXNwb25zZVByb3RvLndyaXRlUmVzdWx0cyB8fCByZXNwb25zZVByb3RvLndyaXRlUmVzdWx0cy5sZW5ndGggPT09IDAsICdHb3QgbXV0YXRpb24gcmVzdWx0cyBmb3IgaGFuZHNoYWtlJyk7XHJcbiAgICAgICAgICAgIHRoaXMuaGFuZHNoYWtlQ29tcGxldGVfID0gdHJ1ZTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubGlzdGVuZXIub25IYW5kc2hha2VDb21wbGV0ZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gQSBzdWNjZXNzZnVsIGZpcnN0IHdyaXRlIHJlc3BvbnNlIG1lYW5zIHRoZSBzdHJlYW0gaXMgaGVhbHRoeSxcclxuICAgICAgICAgICAgLy8gTm90ZSwgdGhhdCB3ZSBjb3VsZCBjb25zaWRlciBhIHN1Y2Nlc3NmdWwgaGFuZHNoYWtlIGhlYWx0aHksIGhvd2V2ZXIsXHJcbiAgICAgICAgICAgIC8vIHRoZSB3cml0ZSBpdHNlbGYgbWlnaHQgYmUgY2F1c2luZyBhbiBlcnJvciB3ZSB3YW50IHRvIGJhY2sgb2ZmIGZyb20uXHJcbiAgICAgICAgICAgIHRoaXMuYmFja29mZi5yZXNldCgpO1xyXG4gICAgICAgICAgICB2YXIgcmVzdWx0cyA9IHRoaXMuc2VyaWFsaXplci5mcm9tV3JpdGVSZXN1bHRzKHJlc3BvbnNlUHJvdG8ud3JpdGVSZXN1bHRzLCByZXNwb25zZVByb3RvLmNvbW1pdFRpbWUpO1xyXG4gICAgICAgICAgICB2YXIgY29tbWl0VmVyc2lvbiA9IHRoaXMuc2VyaWFsaXplci5mcm9tVmVyc2lvbihyZXNwb25zZVByb3RvLmNvbW1pdFRpbWUpO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5saXN0ZW5lci5vbk11dGF0aW9uUmVzdWx0KGNvbW1pdFZlcnNpb24sIHJlc3VsdHMpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFNlbmRzIGFuIGluaXRpYWwgc3RyZWFtVG9rZW4gdG8gdGhlIHNlcnZlciwgcGVyZm9ybWluZyB0aGUgaGFuZHNoYWtlXHJcbiAgICAgKiByZXF1aXJlZCB0byBtYWtlIHRoZSBTdHJlYW1pbmdXcml0ZSBSUEMgd29yay4gU3Vic2VxdWVudFxyXG4gICAgICogY2FsbHMgc2hvdWxkIHdhaXQgdW50aWwgb25IYW5kc2hha2VDb21wbGV0ZSB3YXMgY2FsbGVkLlxyXG4gICAgICovXHJcbiAgICBQZXJzaXN0ZW50V3JpdGVTdHJlYW0ucHJvdG90eXBlLndyaXRlSGFuZHNoYWtlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGFzc2VydCh0aGlzLmlzT3BlbigpLCAnV3JpdGluZyBoYW5kc2hha2UgcmVxdWlyZXMgYW4gb3BlbmVkIHN0cmVhbScpO1xyXG4gICAgICAgIGFzc2VydCghdGhpcy5oYW5kc2hha2VDb21wbGV0ZV8sICdIYW5kc2hha2UgYWxyZWFkeSBjb21wbGV0ZWQnKTtcclxuICAgICAgICAvLyBUT0RPKGRpbW9uZCk6IFN1cHBvcnQgc3RyZWFtIHJlc3VtcHRpb24uIFdlIGludGVudGlvbmFsbHkgZG8gbm90IHNldCB0aGVcclxuICAgICAgICAvLyBzdHJlYW0gdG9rZW4gb24gdGhlIGhhbmRzaGFrZSwgaWdub3JpbmcgYW55IHN0cmVhbSB0b2tlbiB3ZSBtaWdodCBoYXZlLlxyXG4gICAgICAgIHZhciByZXF1ZXN0ID0ge307XHJcbiAgICAgICAgcmVxdWVzdC5kYXRhYmFzZSA9IHRoaXMuc2VyaWFsaXplci5lbmNvZGVkRGF0YWJhc2VJZDtcclxuICAgICAgICB0aGlzLnNlbmRSZXF1ZXN0KHJlcXVlc3QpO1xyXG4gICAgfTtcclxuICAgIC8qKiBTZW5kcyBhIGdyb3VwIG9mIG11dGF0aW9ucyB0byB0aGUgRmlyZXN0b3JlIGJhY2tlbmQgdG8gYXBwbHkuICovXHJcbiAgICBQZXJzaXN0ZW50V3JpdGVTdHJlYW0ucHJvdG90eXBlLndyaXRlTXV0YXRpb25zID0gZnVuY3Rpb24gKG11dGF0aW9ucykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgYXNzZXJ0KHRoaXMuaXNPcGVuKCksICdXcml0aW5nIG11dGF0aW9ucyByZXF1aXJlcyBhbiBvcGVuZWQgc3RyZWFtJyk7XHJcbiAgICAgICAgYXNzZXJ0KHRoaXMuaGFuZHNoYWtlQ29tcGxldGVfLCAnSGFuZHNoYWtlIG11c3QgYmUgY29tcGxldGUgYmVmb3JlIHdyaXRpbmcgbXV0YXRpb25zJyk7XHJcbiAgICAgICAgYXNzZXJ0KHRoaXMubGFzdFN0cmVhbVRva2VuLmxlbmd0aCA+IDAsICdUcnlpbmcgdG8gd3JpdGUgbXV0YXRpb24gd2l0aG91dCBhIHRva2VuJyk7XHJcbiAgICAgICAgdmFyIHJlcXVlc3QgPSB7XHJcbiAgICAgICAgICAgIC8vIFByb3RvcyBhcmUgdHlwZWQgd2l0aCBzdHJpbmcsIGJ1dCB3ZSBzdXBwb3J0IFVJbnQ4QXJyYXkgb24gTm9kZVxyXG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG4gICAgICAgICAgICBzdHJlYW1Ub2tlbjogdGhpcy5sYXN0U3RyZWFtVG9rZW4sXHJcbiAgICAgICAgICAgIHdyaXRlczogbXV0YXRpb25zLm1hcChmdW5jdGlvbiAobXV0YXRpb24pIHsgcmV0dXJuIF90aGlzLnNlcmlhbGl6ZXIudG9NdXRhdGlvbihtdXRhdGlvbik7IH0pXHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLnNlbmRSZXF1ZXN0KHJlcXVlc3QpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBQZXJzaXN0ZW50V3JpdGVTdHJlYW07XHJcbn0oUGVyc2lzdGVudFN0cmVhbSkpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIERhdGFzdG9yZSBpcyBhIHdyYXBwZXIgYXJvdW5kIHRoZSBleHRlcm5hbCBHb29nbGUgQ2xvdWQgRGF0YXN0b3JlIGdycGMgQVBJLFxyXG4gKiB3aGljaCBwcm92aWRlcyBhbiBpbnRlcmZhY2UgdGhhdCBpcyBtb3JlIGNvbnZlbmllbnQgZm9yIHRoZSByZXN0IG9mIHRoZVxyXG4gKiBjbGllbnQgU0RLIGFyY2hpdGVjdHVyZSB0byBjb25zdW1lLlxyXG4gKi9cclxudmFyIERhdGFzdG9yZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIERhdGFzdG9yZShxdWV1ZSwgY29ubmVjdGlvbiwgY3JlZGVudGlhbHMsIHNlcmlhbGl6ZXIpIHtcclxuICAgICAgICB0aGlzLnF1ZXVlID0gcXVldWU7XHJcbiAgICAgICAgdGhpcy5jb25uZWN0aW9uID0gY29ubmVjdGlvbjtcclxuICAgICAgICB0aGlzLmNyZWRlbnRpYWxzID0gY3JlZGVudGlhbHM7XHJcbiAgICAgICAgdGhpcy5zZXJpYWxpemVyID0gc2VyaWFsaXplcjtcclxuICAgIH1cclxuICAgIERhdGFzdG9yZS5wcm90b3R5cGUubmV3UGVyc2lzdGVudFdyaXRlU3RyZWFtID0gZnVuY3Rpb24gKGxpc3RlbmVyKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQZXJzaXN0ZW50V3JpdGVTdHJlYW0odGhpcy5xdWV1ZSwgdGhpcy5jb25uZWN0aW9uLCB0aGlzLmNyZWRlbnRpYWxzLCB0aGlzLnNlcmlhbGl6ZXIsIGxpc3RlbmVyKTtcclxuICAgIH07XHJcbiAgICBEYXRhc3RvcmUucHJvdG90eXBlLm5ld1BlcnNpc3RlbnRXYXRjaFN0cmVhbSA9IGZ1bmN0aW9uIChsaXN0ZW5lcikge1xyXG4gICAgICAgIHJldHVybiBuZXcgUGVyc2lzdGVudExpc3RlblN0cmVhbSh0aGlzLnF1ZXVlLCB0aGlzLmNvbm5lY3Rpb24sIHRoaXMuY3JlZGVudGlhbHMsIHRoaXMuc2VyaWFsaXplciwgbGlzdGVuZXIpO1xyXG4gICAgfTtcclxuICAgIERhdGFzdG9yZS5wcm90b3R5cGUuY29tbWl0ID0gZnVuY3Rpb24gKG11dGF0aW9ucykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIHBhcmFtcyA9IHtcclxuICAgICAgICAgICAgZGF0YWJhc2U6IHRoaXMuc2VyaWFsaXplci5lbmNvZGVkRGF0YWJhc2VJZCxcclxuICAgICAgICAgICAgd3JpdGVzOiBtdXRhdGlvbnMubWFwKGZ1bmN0aW9uIChtKSB7IHJldHVybiBfdGhpcy5zZXJpYWxpemVyLnRvTXV0YXRpb24obSk7IH0pXHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gdGhpcy5pbnZva2VSUEMoJ0NvbW1pdCcsIHBhcmFtcykudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgcmV0dXJuIF90aGlzLnNlcmlhbGl6ZXIuZnJvbVdyaXRlUmVzdWx0cyhyZXNwb25zZS53cml0ZVJlc3VsdHMsIHJlc3BvbnNlLmNvbW1pdFRpbWUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIERhdGFzdG9yZS5wcm90b3R5cGUubG9va3VwID0gZnVuY3Rpb24gKGtleXMpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhciBwYXJhbXMgPSB7XHJcbiAgICAgICAgICAgIGRhdGFiYXNlOiB0aGlzLnNlcmlhbGl6ZXIuZW5jb2RlZERhdGFiYXNlSWQsXHJcbiAgICAgICAgICAgIGRvY3VtZW50czoga2V5cy5tYXAoZnVuY3Rpb24gKGspIHsgcmV0dXJuIF90aGlzLnNlcmlhbGl6ZXIudG9OYW1lKGspOyB9KVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaW52b2tlU3RyZWFtaW5nUlBDKCdCYXRjaEdldERvY3VtZW50cycsIHBhcmFtcykudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgdmFyIGRvY3MgPSBtYXliZURvY3VtZW50TWFwKCk7XHJcbiAgICAgICAgICAgIHJlc3BvbnNlLmZvckVhY2goZnVuY3Rpb24gKHByb3RvKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZG9jID0gX3RoaXMuc2VyaWFsaXplci5mcm9tTWF5YmVEb2N1bWVudChwcm90byk7XHJcbiAgICAgICAgICAgICAgICBkb2NzID0gZG9jcy5pbnNlcnQoZG9jLmtleSwgZG9jKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSBbXTtcclxuICAgICAgICAgICAga2V5cy5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICAgICAgICAgIHZhciBkb2MgPSBkb2NzLmdldChrZXkpO1xyXG4gICAgICAgICAgICAgICAgYXNzZXJ0KCEhZG9jLCAnTWlzc2luZyBlbnRpdHkgaW4gd3JpdGUgcmVzcG9uc2UgZm9yICcgKyBrZXkpO1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0LnB1c2goZG9jKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqIEdldHMgYW4gYXV0aCB0b2tlbiBhbmQgaW52b2tlcyB0aGUgcHJvdmlkZWQgUlBDLiAqL1xyXG4gICAgRGF0YXN0b3JlLnByb3RvdHlwZS5pbnZva2VSUEMgPSBmdW5jdGlvbiAocnBjTmFtZSwgcmVxdWVzdCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY3JlZGVudGlhbHNcclxuICAgICAgICAgICAgLmdldFRva2VuKClcclxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHRva2VuKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5jb25uZWN0aW9uLmludm9rZVJQQyhycGNOYW1lLCByZXF1ZXN0LCB0b2tlbik7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgICAgICBpZiAoZXJyb3IuY29kZSA9PT0gQ29kZS5VTkFVVEhFTlRJQ0FURUQpIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLmNyZWRlbnRpYWxzLmludmFsaWRhdGVUb2tlbigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRocm93IGVycm9yO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKiBHZXRzIGFuIGF1dGggdG9rZW4gYW5kIGludm9rZXMgdGhlIHByb3ZpZGVkIFJQQyB3aXRoIHN0cmVhbWVkIHJlc3VsdHMuICovXHJcbiAgICBEYXRhc3RvcmUucHJvdG90eXBlLmludm9rZVN0cmVhbWluZ1JQQyA9IGZ1bmN0aW9uIChycGNOYW1lLCByZXF1ZXN0KSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICByZXR1cm4gdGhpcy5jcmVkZW50aWFsc1xyXG4gICAgICAgICAgICAuZ2V0VG9rZW4oKVxyXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAodG9rZW4pIHtcclxuICAgICAgICAgICAgcmV0dXJuIF90aGlzLmNvbm5lY3Rpb24uaW52b2tlU3RyZWFtaW5nUlBDKHJwY05hbWUsIHJlcXVlc3QsIHRva2VuKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGlmIChlcnJvci5jb2RlID09PSBDb2RlLlVOQVVUSEVOVElDQVRFRCkge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuY3JlZGVudGlhbHMuaW52YWxpZGF0ZVRva2VuKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIERhdGFzdG9yZTtcclxufSgpKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBJbnRlcm5hbCB0cmFuc2FjdGlvbiBvYmplY3QgcmVzcG9uc2libGUgZm9yIGFjY3VtdWxhdGluZyB0aGUgbXV0YXRpb25zIHRvXHJcbiAqIHBlcmZvcm0gYW5kIHRoZSBiYXNlIHZlcnNpb25zIGZvciBhbnkgZG9jdW1lbnRzIHJlYWQuXHJcbiAqL1xyXG52YXIgVHJhbnNhY3Rpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBUcmFuc2FjdGlvbihkYXRhc3RvcmUpIHtcclxuICAgICAgICB0aGlzLmRhdGFzdG9yZSA9IGRhdGFzdG9yZTtcclxuICAgICAgICAvLyBUaGUgdmVyc2lvbiBvZiBlYWNoIGRvY3VtZW50IHRoYXQgd2FzIHJlYWQgZHVyaW5nIHRoaXMgdHJhbnNhY3Rpb24uXHJcbiAgICAgICAgdGhpcy5yZWFkVmVyc2lvbnMgPSBkb2N1bWVudFZlcnNpb25NYXAoKTtcclxuICAgICAgICB0aGlzLm11dGF0aW9ucyA9IFtdO1xyXG4gICAgICAgIHRoaXMuY29tbWl0dGVkID0gZmFsc2U7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQSBkZWZlcnJlZCB1c2FnZSBlcnJvciB0aGF0IG9jY3VycmVkIHByZXZpb3VzbHkgaW4gdGhpcyB0cmFuc2FjdGlvbiB0aGF0XHJcbiAgICAgICAgICogd2lsbCBjYXVzZSB0aGUgdHJhbnNhY3Rpb24gdG8gZmFpbCBvbmNlIGl0IGFjdHVhbGx5IGNvbW1pdHMuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5sYXN0V3JpdGVFcnJvciA9IG51bGw7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogU2V0IG9mIGRvY3VtZW50cyB0aGF0IGhhdmUgYmVlbiB3cml0dGVuIGluIHRoZSB0cmFuc2FjdGlvbi5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFdoZW4gdGhlcmUncyBtb3JlIHRoYW4gb25lIHdyaXRlIHRvIHRoZSBzYW1lIGtleSBpbiBhIHRyYW5zYWN0aW9uLCBhbnlcclxuICAgICAgICAgKiB3cml0ZXMgYWZ0ZXIgaHRlIGZpcnN0IGFyZSBoYW5kbGVkIGRpZmZlcmVudGx5LlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMud3JpdHRlbkRvY3MgPSBuZXcgU2V0KCk7XHJcbiAgICB9XHJcbiAgICBUcmFuc2FjdGlvbi5wcm90b3R5cGUubG9va3VwID0gZnVuY3Rpb24gKGtleXMpIHtcclxuICAgICAgICByZXR1cm4gdHNsaWIuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBkb2NzO1xyXG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgICAgICByZXR1cm4gdHNsaWIuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVuc3VyZUNvbW1pdE5vdENhbGxlZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5tdXRhdGlvbnMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuSU5WQUxJRF9BUkdVTUVOVCwgJ0ZpcmVzdG9yZSB0cmFuc2FjdGlvbnMgcmVxdWlyZSBhbGwgcmVhZHMgdG8gYmUgZXhlY3V0ZWQgYmVmb3JlIGFsbCB3cml0ZXMuJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5kYXRhc3RvcmUubG9va3VwKGtleXMpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3MgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3MuZm9yRWFjaChmdW5jdGlvbiAoZG9jKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZG9jIGluc3RhbmNlb2YgTm9Eb2N1bWVudCB8fCBkb2MgaW5zdGFuY2VvZiBEb2N1bWVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnJlY29yZFZlcnNpb24oZG9jKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZhaWwoJ0RvY3VtZW50IGluIGEgdHJhbnNhY3Rpb24gd2FzIGEgJyArIGRvYy5jb25zdHJ1Y3Rvci5uYW1lKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBkb2NzXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgVHJhbnNhY3Rpb24ucHJvdG90eXBlLnNldCA9IGZ1bmN0aW9uIChrZXksIGRhdGEpIHtcclxuICAgICAgICB0aGlzLndyaXRlKGRhdGEudG9NdXRhdGlvbnMoa2V5LCB0aGlzLnByZWNvbmRpdGlvbihrZXkpKSk7XHJcbiAgICAgICAgdGhpcy53cml0dGVuRG9jcy5hZGQoa2V5KTtcclxuICAgIH07XHJcbiAgICBUcmFuc2FjdGlvbi5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKGtleSwgZGF0YSkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHRoaXMud3JpdGUoZGF0YS50b011dGF0aW9ucyhrZXksIHRoaXMucHJlY29uZGl0aW9uRm9yVXBkYXRlKGtleSkpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgdGhpcy5sYXN0V3JpdGVFcnJvciA9IGU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMud3JpdHRlbkRvY3MuYWRkKGtleSk7XHJcbiAgICB9O1xyXG4gICAgVHJhbnNhY3Rpb24ucHJvdG90eXBlLmRlbGV0ZSA9IGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICB0aGlzLndyaXRlKFtuZXcgRGVsZXRlTXV0YXRpb24oa2V5LCB0aGlzLnByZWNvbmRpdGlvbihrZXkpKV0pO1xyXG4gICAgICAgIHRoaXMud3JpdHRlbkRvY3MuYWRkKGtleSk7XHJcbiAgICB9O1xyXG4gICAgVHJhbnNhY3Rpb24ucHJvdG90eXBlLmNvbW1pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdHNsaWIuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciB1bndyaXR0ZW47XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYi5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZW5zdXJlQ29tbWl0Tm90Q2FsbGVkKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmxhc3RXcml0ZUVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyB0aGlzLmxhc3RXcml0ZUVycm9yO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVud3JpdHRlbiA9IHRoaXMucmVhZFZlcnNpb25zO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBGb3IgZWFjaCBtdXRhdGlvbiwgbm90ZSB0aGF0IHRoZSBkb2Mgd2FzIHdyaXR0ZW4uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubXV0YXRpb25zLmZvckVhY2goZnVuY3Rpb24gKG11dGF0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bndyaXR0ZW4gPSB1bndyaXR0ZW4ucmVtb3ZlKG11dGF0aW9uLmtleSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXVud3JpdHRlbi5pc0VtcHR5KCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLklOVkFMSURfQVJHVU1FTlQsICdFdmVyeSBkb2N1bWVudCByZWFkIGluIGEgdHJhbnNhY3Rpb24gbXVzdCBhbHNvIGJlIHdyaXR0ZW4uJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5kYXRhc3RvcmUuY29tbWl0KHRoaXMubXV0YXRpb25zKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29tbWl0dGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBUcmFuc2FjdGlvbi5wcm90b3R5cGUucmVjb3JkVmVyc2lvbiA9IGZ1bmN0aW9uIChkb2MpIHtcclxuICAgICAgICB2YXIgZG9jVmVyc2lvbjtcclxuICAgICAgICBpZiAoZG9jIGluc3RhbmNlb2YgRG9jdW1lbnQpIHtcclxuICAgICAgICAgICAgZG9jVmVyc2lvbiA9IGRvYy52ZXJzaW9uO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChkb2MgaW5zdGFuY2VvZiBOb0RvY3VtZW50KSB7XHJcbiAgICAgICAgICAgIC8vIEZvciBkZWxldGVkIGRvY3MsIHdlIG11c3QgdXNlIGJhc2VWZXJzaW9uIDAgd2hlbiB3ZSBvdmVyd3JpdGUgdGhlbS5cclxuICAgICAgICAgICAgZG9jVmVyc2lvbiA9IFNuYXBzaG90VmVyc2lvbi5mb3JEZWxldGVkRG9jKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aHJvdyBmYWlsKCdEb2N1bWVudCBpbiBhIHRyYW5zYWN0aW9uIHdhcyBhICcgKyBkb2MuY29uc3RydWN0b3IubmFtZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBleGlzdGluZ1ZlcnNpb24gPSB0aGlzLnJlYWRWZXJzaW9ucy5nZXQoZG9jLmtleSk7XHJcbiAgICAgICAgaWYgKGV4aXN0aW5nVmVyc2lvbiAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBpZiAoIWRvY1ZlcnNpb24uaXNFcXVhbChleGlzdGluZ1ZlcnNpb24pKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBUaGlzIHRyYW5zYWN0aW9uIHdpbGwgZmFpbCBubyBtYXR0ZXIgd2hhdC5cclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLkFCT1JURUQsICdEb2N1bWVudCB2ZXJzaW9uIGNoYW5nZWQgYmV0d2VlbiB0d28gcmVhZHMuJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVhZFZlcnNpb25zID0gdGhpcy5yZWFkVmVyc2lvbnMuaW5zZXJ0KGRvYy5rZXksIGRvY1ZlcnNpb24pO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdGhlIHZlcnNpb24gb2YgdGhpcyBkb2N1bWVudCB3aGVuIGl0IHdhcyByZWFkIGluIHRoaXMgdHJhbnNhY3Rpb24sXHJcbiAgICAgKiBhcyBhIHByZWNvbmRpdGlvbiwgb3Igbm8gcHJlY29uZGl0aW9uIGlmIGl0IHdhcyBub3QgcmVhZC5cclxuICAgICAqL1xyXG4gICAgVHJhbnNhY3Rpb24ucHJvdG90eXBlLnByZWNvbmRpdGlvbiA9IGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICB2YXIgdmVyc2lvbiA9IHRoaXMucmVhZFZlcnNpb25zLmdldChrZXkpO1xyXG4gICAgICAgIGlmICghdGhpcy53cml0dGVuRG9jcy5oYXMoa2V5KSAmJiB2ZXJzaW9uKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBQcmVjb25kaXRpb24udXBkYXRlVGltZSh2ZXJzaW9uKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBQcmVjb25kaXRpb24uTk9ORTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSBwcmVjb25kaXRpb24gZm9yIGEgZG9jdW1lbnQgaWYgdGhlIG9wZXJhdGlvbiBpcyBhbiB1cGRhdGUuXHJcbiAgICAgKi9cclxuICAgIFRyYW5zYWN0aW9uLnByb3RvdHlwZS5wcmVjb25kaXRpb25Gb3JVcGRhdGUgPSBmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgICAgdmFyIHZlcnNpb24gPSB0aGlzLnJlYWRWZXJzaW9ucy5nZXQoa2V5KTtcclxuICAgICAgICAvLyBUaGUgZmlyc3QgdGltZSBhIGRvY3VtZW50IGlzIHdyaXR0ZW4sIHdlIHdhbnQgdG8gdGFrZSBpbnRvIGFjY291bnQgdGhlXHJcbiAgICAgICAgLy8gcmVhZCB0aW1lIGFuZCBleGlzdGVuY2VcclxuICAgICAgICBpZiAoIXRoaXMud3JpdHRlbkRvY3MuaGFzKGtleSkgJiYgdmVyc2lvbikge1xyXG4gICAgICAgICAgICBpZiAodmVyc2lvbi5pc0VxdWFsKFNuYXBzaG90VmVyc2lvbi5mb3JEZWxldGVkRG9jKCkpKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBUaGUgZG9jdW1lbnQgZG9lc24ndCBleGlzdCwgc28gZmFpbCB0aGUgdHJhbnNhY3Rpb24uXHJcbiAgICAgICAgICAgICAgICAvLyBUaGlzIGhhcyB0byBiZSB2YWxpZGF0ZWQgbG9jYWxseSBiZWNhdXNlIHlvdSBjYW4ndCBzZW5kIGFcclxuICAgICAgICAgICAgICAgIC8vIHByZWNvbmRpdGlvbiB0aGF0IGEgZG9jdW1lbnQgZG9lcyBub3QgZXhpc3Qgd2l0aG91dCBjaGFuZ2luZyB0aGVcclxuICAgICAgICAgICAgICAgIC8vIHNlbWFudGljcyBvZiB0aGUgYmFja2VuZCB3cml0ZSB0byBiZSBhbiBpbnNlcnQuIFRoaXMgaXMgdGhlIHJldmVyc2VcclxuICAgICAgICAgICAgICAgIC8vIG9mIHdoYXQgd2Ugd2FudCwgc2luY2Ugd2Ugd2FudCB0byBhc3NlcnQgdGhhdCB0aGUgZG9jdW1lbnQgZG9lc24ndFxyXG4gICAgICAgICAgICAgICAgLy8gZXhpc3QgYnV0IHRoZW4gc2VuZCB0aGUgdXBkYXRlIGFuZCBoYXZlIGl0IGZhaWwuIFNpbmNlIHdlIGNhbid0XHJcbiAgICAgICAgICAgICAgICAvLyBleHByZXNzIHRoYXQgdG8gdGhlIGJhY2tlbmQsIHdlIGhhdmUgdG8gdmFsaWRhdGUgbG9jYWxseS5cclxuICAgICAgICAgICAgICAgIC8vIE5vdGU6IHRoaXMgY2FuIGNoYW5nZSBvbmNlIHdlIGNhbiBzZW5kIHNlcGFyYXRlIHZlcmlmeSB3cml0ZXMgaW4gdGhlXHJcbiAgICAgICAgICAgICAgICAvLyB0cmFuc2FjdGlvbi5cclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLklOVkFMSURfQVJHVU1FTlQsIFwiQ2FuJ3QgdXBkYXRlIGEgZG9jdW1lbnQgdGhhdCBkb2Vzbid0IGV4aXN0LlwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBEb2N1bWVudCBleGlzdHMsIGJhc2UgcHJlY29uZGl0aW9uIG9uIGRvY3VtZW50IHVwZGF0ZSB0aW1lLlxyXG4gICAgICAgICAgICByZXR1cm4gUHJlY29uZGl0aW9uLnVwZGF0ZVRpbWUodmVyc2lvbik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBEb2N1bWVudCB3YXMgbm90IHJlYWQsIHNvIHdlIGp1c3QgdXNlIHRoZSBwcmVjb25kaXRpb25zIGZvciBhIGJsaW5kXHJcbiAgICAgICAgICAgIC8vIHVwZGF0ZS5cclxuICAgICAgICAgICAgcmV0dXJuIFByZWNvbmRpdGlvbi5leGlzdHModHJ1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFRyYW5zYWN0aW9uLnByb3RvdHlwZS53cml0ZSA9IGZ1bmN0aW9uIChtdXRhdGlvbnMpIHtcclxuICAgICAgICB0aGlzLmVuc3VyZUNvbW1pdE5vdENhbGxlZCgpO1xyXG4gICAgICAgIHRoaXMubXV0YXRpb25zID0gdGhpcy5tdXRhdGlvbnMuY29uY2F0KG11dGF0aW9ucyk7XHJcbiAgICB9O1xyXG4gICAgVHJhbnNhY3Rpb24ucHJvdG90eXBlLmVuc3VyZUNvbW1pdE5vdENhbGxlZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBhc3NlcnQoIXRoaXMuY29tbWl0dGVkLCAnQSB0cmFuc2FjdGlvbiBvYmplY3QgY2Fubm90IGJlIHVzZWQgYWZ0ZXIgaXRzIHVwZGF0ZSBjYWxsYmFjayBoYXMgYmVlbiBpbnZva2VkLicpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBUcmFuc2FjdGlvbjtcclxufSgpKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBEZXNjcmliZXMgdGhlIG9ubGluZSBzdGF0ZSBvZiB0aGUgRmlyZXN0b3JlIGNsaWVudC4gTm90ZSB0aGF0IHRoaXMgZG9lcyBub3RcclxuICogaW5kaWNhdGUgd2hldGhlciBvciBub3QgdGhlIHJlbW90ZSBzdG9yZSBpcyB0cnlpbmcgdG8gY29ubmVjdCBvciBub3QuIFRoaXMgaXNcclxuICogcHJpbWFyaWx5IHVzZWQgYnkgdGhlIFZpZXcgLyBFdmVudE1hbmFnZXIgY29kZSB0byBjaGFuZ2UgdGhlaXIgYmVoYXZpb3Igd2hpbGVcclxuICogb2ZmbGluZSAoZS5nLiBnZXQoKSBjYWxscyBzaG91bGRuJ3Qgd2FpdCBmb3IgZGF0YSBmcm9tIHRoZSBzZXJ2ZXIgYW5kXHJcbiAqIHNuYXBzaG90IGV2ZW50cyBzaG91bGQgc2V0IG1ldGFkYXRhLmlzRnJvbUNhY2hlPXRydWUpLlxyXG4gKi9cclxudmFyIE9ubGluZVN0YXRlO1xyXG4oZnVuY3Rpb24gKE9ubGluZVN0YXRlKSB7XHJcbiAgICAvKipcclxuICAgICAqIFRoZSBGaXJlc3RvcmUgY2xpZW50IGlzIGluIGFuIHVua25vd24gb25saW5lIHN0YXRlLiBUaGlzIG1lYW5zIHRoZSBjbGllbnRcclxuICAgICAqIGlzIGVpdGhlciBub3QgYWN0aXZlbHkgdHJ5aW5nIHRvIGVzdGFibGlzaCBhIGNvbm5lY3Rpb24gb3IgaXQgaXMgY3VycmVudGx5XHJcbiAgICAgKiB0cnlpbmcgdG8gZXN0YWJsaXNoIGEgY29ubmVjdGlvbiwgYnV0IGl0IGhhcyBub3Qgc3VjY2VlZGVkIG9yIGZhaWxlZCB5ZXQuXHJcbiAgICAgKiBIaWdoZXItbGV2ZWwgY29tcG9uZW50cyBzaG91bGQgbm90IG9wZXJhdGUgaW4gb2ZmbGluZSBtb2RlLlxyXG4gICAgICovXHJcbiAgICBPbmxpbmVTdGF0ZVtPbmxpbmVTdGF0ZVtcIlVua25vd25cIl0gPSAwXSA9IFwiVW5rbm93blwiO1xyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgY2xpZW50IGlzIGNvbm5lY3RlZCBhbmQgdGhlIGNvbm5lY3Rpb25zIGFyZSBoZWFsdGh5LiBUaGlzIHN0YXRlIGlzXHJcbiAgICAgKiByZWFjaGVkIGFmdGVyIGEgc3VjY2Vzc2Z1bCBjb25uZWN0aW9uIGFuZCB0aGVyZSBoYXMgYmVlbiBhdCBsZWFzdCBvbmVcclxuICAgICAqIHN1Y2Nlc3NmdWwgbWVzc2FnZSByZWNlaXZlZCBmcm9tIHRoZSBiYWNrZW5kcy5cclxuICAgICAqL1xyXG4gICAgT25saW5lU3RhdGVbT25saW5lU3RhdGVbXCJPbmxpbmVcIl0gPSAxXSA9IFwiT25saW5lXCI7XHJcbiAgICAvKipcclxuICAgICAqIFRoZSBjbGllbnQgaXMgZWl0aGVyIHRyeWluZyB0byBlc3RhYmxpc2ggYSBjb25uZWN0aW9uIGJ1dCBmYWlsaW5nLCBvciBpdFxyXG4gICAgICogaGFzIGJlZW4gZXhwbGljaXRseSBtYXJrZWQgb2ZmbGluZSB2aWEgYSBjYWxsIHRvIGRpc2FibGVOZXR3b3JrKCkuXHJcbiAgICAgKiBIaWdoZXItbGV2ZWwgY29tcG9uZW50cyBzaG91bGQgb3BlcmF0ZSBpbiBvZmZsaW5lIG1vZGUuXHJcbiAgICAgKi9cclxuICAgIE9ubGluZVN0YXRlW09ubGluZVN0YXRlW1wiT2ZmbGluZVwiXSA9IDJdID0gXCJPZmZsaW5lXCI7XHJcbn0pKE9ubGluZVN0YXRlIHx8IChPbmxpbmVTdGF0ZSA9IHt9KSk7XHJcbi8qKiBUaGUgc291cmNlIG9mIGFuIG9ubGluZSBzdGF0ZSBldmVudC4gKi9cclxudmFyIE9ubGluZVN0YXRlU291cmNlO1xyXG4oZnVuY3Rpb24gKE9ubGluZVN0YXRlU291cmNlKSB7XHJcbiAgICBPbmxpbmVTdGF0ZVNvdXJjZVtPbmxpbmVTdGF0ZVNvdXJjZVtcIlJlbW90ZVN0b3JlXCJdID0gMF0gPSBcIlJlbW90ZVN0b3JlXCI7XHJcbiAgICBPbmxpbmVTdGF0ZVNvdXJjZVtPbmxpbmVTdGF0ZVNvdXJjZVtcIlNoYXJlZENsaWVudFN0YXRlXCJdID0gMV0gPSBcIlNoYXJlZENsaWVudFN0YXRlXCI7XHJcbn0pKE9ubGluZVN0YXRlU291cmNlIHx8IChPbmxpbmVTdGF0ZVNvdXJjZSA9IHt9KSk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG52YXIgTE9HX1RBRyQ2ID0gJ09ubGluZVN0YXRlVHJhY2tlcic7XHJcbi8vIFRvIGRlYWwgd2l0aCB0cmFuc2llbnQgZmFpbHVyZXMsIHdlIGFsbG93IG11bHRpcGxlIHN0cmVhbSBhdHRlbXB0cyBiZWZvcmVcclxuLy8gZ2l2aW5nIHVwIGFuZCB0cmFuc2l0aW9uaW5nIGZyb20gT25saW5lU3RhdGUuVW5rbm93biB0byBPZmZsaW5lLlxyXG4vLyBUT0RPKG1pa2VsZWhlbik6IFRoaXMgdXNlZCB0byBiZSBzZXQgdG8gMiBhcyBhIG1pdGlnYXRpb24gZm9yIGIvNjYyMjgzOTQuXHJcbi8vIEBqZGltb25kIHRoaW5rcyB0aGF0IGJ1ZyBpcyBzdWZmaWNpZW50bHkgZml4ZWQgc28gdGhhdCB3ZSBjYW4gc2V0IHRoaXMgYmFja1xyXG4vLyB0byAxLiBJZiB0aGF0IHdvcmtzIG9rYXksIHdlIGNvdWxkIHBvdGVudGlhbGx5IHJlbW92ZSB0aGlzIGxvZ2ljIGVudGlyZWx5LlxyXG52YXIgTUFYX1dBVENIX1NUUkVBTV9GQUlMVVJFUyA9IDE7XHJcbi8vIFRvIGRlYWwgd2l0aCBzdHJlYW0gYXR0ZW1wdHMgdGhhdCBkb24ndCBzdWNjZWVkIG9yIGZhaWwgaW4gYSB0aW1lbHkgbWFubmVyLFxyXG4vLyB3ZSBoYXZlIGEgdGltZW91dCBmb3IgT25saW5lU3RhdGUgdG8gcmVhY2ggT25saW5lIG9yIE9mZmxpbmUuXHJcbi8vIElmIHRoZSB0aW1lb3V0IGlzIHJlYWNoZWQsIHdlIHRyYW5zaXRpb24gdG8gT2ZmbGluZSByYXRoZXIgdGhhbiB3YWl0aW5nXHJcbi8vIGluZGVmaW5pdGVseS5cclxudmFyIE9OTElORV9TVEFURV9USU1FT1VUX01TID0gMTAgKiAxMDAwO1xyXG4vKipcclxuICogQSBjb21wb25lbnQgdXNlZCBieSB0aGUgUmVtb3RlU3RvcmUgdG8gdHJhY2sgdGhlIE9ubGluZVN0YXRlICh0aGF0IGlzLFxyXG4gKiB3aGV0aGVyIG9yIG5vdCB0aGUgY2xpZW50IGFzIGEgd2hvbGUgc2hvdWxkIGJlIGNvbnNpZGVyZWQgdG8gYmUgb25saW5lIG9yXHJcbiAqIG9mZmxpbmUpLCBpbXBsZW1lbnRpbmcgdGhlIGFwcHJvcHJpYXRlIGhldXJpc3RpY3MuXHJcbiAqXHJcbiAqIEluIHBhcnRpY3VsYXIsIHdoZW4gdGhlIGNsaWVudCBpcyB0cnlpbmcgdG8gY29ubmVjdCB0byB0aGUgYmFja2VuZCwgd2VcclxuICogYWxsb3cgdXAgdG8gTUFYX1dBVENIX1NUUkVBTV9GQUlMVVJFUyB3aXRoaW4gT05MSU5FX1NUQVRFX1RJTUVPVVRfTVMgZm9yXHJcbiAqIGEgY29ubmVjdGlvbiB0byBzdWNjZWVkLiBJZiB3ZSBoYXZlIHRvbyBtYW55IGZhaWx1cmVzIG9yIHRoZSB0aW1lb3V0IGVsYXBzZXMsXHJcbiAqIHRoZW4gd2Ugc2V0IHRoZSBPbmxpbmVTdGF0ZSB0byBPZmZsaW5lLCBhbmQgdGhlIGNsaWVudCB3aWxsIGJlaGF2ZSBhcyBpZlxyXG4gKiBpdCBpcyBvZmZsaW5lIChnZXQoKXMgd2lsbCByZXR1cm4gY2FjaGVkIGRhdGEsIGV0Yy4pLlxyXG4gKi9cclxudmFyIE9ubGluZVN0YXRlVHJhY2tlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIE9ubGluZVN0YXRlVHJhY2tlcihhc3luY1F1ZXVlLCBvbmxpbmVTdGF0ZUhhbmRsZXIpIHtcclxuICAgICAgICB0aGlzLmFzeW5jUXVldWUgPSBhc3luY1F1ZXVlO1xyXG4gICAgICAgIHRoaXMub25saW5lU3RhdGVIYW5kbGVyID0gb25saW5lU3RhdGVIYW5kbGVyO1xyXG4gICAgICAgIC8qKiBUaGUgY3VycmVudCBPbmxpbmVTdGF0ZS4gKi9cclxuICAgICAgICB0aGlzLnN0YXRlID0gT25saW5lU3RhdGUuVW5rbm93bjtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBBIGNvdW50IG9mIGNvbnNlY3V0aXZlIGZhaWx1cmVzIHRvIG9wZW4gdGhlIHN0cmVhbS4gSWYgaXQgcmVhY2hlcyB0aGVcclxuICAgICAgICAgKiBtYXhpbXVtIGRlZmluZWQgYnkgTUFYX1dBVENIX1NUUkVBTV9GQUlMVVJFUywgd2UnbGwgc2V0IHRoZSBPbmxpbmVTdGF0ZSB0b1xyXG4gICAgICAgICAqIE9mZmxpbmUuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy53YXRjaFN0cmVhbUZhaWx1cmVzID0gMDtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBBIHRpbWVyIHRoYXQgZWxhcHNlcyBhZnRlciBPTkxJTkVfU1RBVEVfVElNRU9VVF9NUywgYXQgd2hpY2ggcG9pbnQgd2VcclxuICAgICAgICAgKiB0cmFuc2l0aW9uIGZyb20gT25saW5lU3RhdGUuVW5rbm93biB0byBPbmxpbmVTdGF0ZS5PZmZsaW5lIHdpdGhvdXQgd2FpdGluZ1xyXG4gICAgICAgICAqIGZvciB0aGUgc3RyZWFtIHRvIGFjdHVhbGx5IGZhaWwgKE1BWF9XQVRDSF9TVFJFQU1fRkFJTFVSRVMgdGltZXMpLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMub25saW5lU3RhdGVUaW1lciA9IG51bGw7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogV2hldGhlciB0aGUgY2xpZW50IHNob3VsZCBsb2cgYSB3YXJuaW5nIG1lc3NhZ2UgaWYgaXQgZmFpbHMgdG8gY29ubmVjdCB0b1xyXG4gICAgICAgICAqIHRoZSBiYWNrZW5kIChpbml0aWFsbHkgdHJ1ZSwgY2xlYXJlZCBhZnRlciBhIHN1Y2Nlc3NmdWwgc3RyZWFtLCBvciBpZiB3ZSd2ZVxyXG4gICAgICAgICAqIGxvZ2dlZCB0aGUgbWVzc2FnZSBhbHJlYWR5KS5cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLnNob3VsZFdhcm5DbGllbnRJc09mZmxpbmUgPSB0cnVlO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBDYWxsZWQgYnkgUmVtb3RlU3RvcmUgd2hlbiBhIHdhdGNoIHN0cmVhbSBpcyBzdGFydGVkIChpbmNsdWRpbmcgb24gZWFjaFxyXG4gICAgICogYmFja29mZiBhdHRlbXB0KS5cclxuICAgICAqXHJcbiAgICAgKiBJZiB0aGlzIGlzIHRoZSBmaXJzdCBhdHRlbXB0LCBpdCBzZXRzIHRoZSBPbmxpbmVTdGF0ZSB0byBVbmtub3duIGFuZCBzdGFydHNcclxuICAgICAqIHRoZSBvbmxpbmVTdGF0ZVRpbWVyLlxyXG4gICAgICovXHJcbiAgICBPbmxpbmVTdGF0ZVRyYWNrZXIucHJvdG90eXBlLmhhbmRsZVdhdGNoU3RyZWFtU3RhcnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBpZiAodGhpcy53YXRjaFN0cmVhbUZhaWx1cmVzID09PSAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0QW5kQnJvYWRjYXN0KE9ubGluZVN0YXRlLlVua25vd24pO1xyXG4gICAgICAgICAgICBhc3NlcnQodGhpcy5vbmxpbmVTdGF0ZVRpbWVyID09PSBudWxsLCBcIm9ubGluZVN0YXRlVGltZXIgc2hvdWxkbid0IGJlIHN0YXJ0ZWQgeWV0XCIpO1xyXG4gICAgICAgICAgICB0aGlzLm9ubGluZVN0YXRlVGltZXIgPSB0aGlzLmFzeW5jUXVldWUuZW5xdWV1ZUFmdGVyRGVsYXkoVGltZXJJZC5PbmxpbmVTdGF0ZVRpbWVvdXQsIE9OTElORV9TVEFURV9USU1FT1VUX01TLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5vbmxpbmVTdGF0ZVRpbWVyID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIGFzc2VydChfdGhpcy5zdGF0ZSA9PT0gT25saW5lU3RhdGUuVW5rbm93biwgJ1RpbWVyIHNob3VsZCBiZSBjYW5jZWxlZCBpZiB3ZSB0cmFuc2l0aW9uZWQgdG8gYSBkaWZmZXJlbnQgc3RhdGUuJyk7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5sb2dDbGllbnRPZmZsaW5lV2FybmluZ0lmTmVjZXNzYXJ5KFwiQmFja2VuZCBkaWRuJ3QgcmVzcG9uZCB3aXRoaW4gXCIgKyBPTkxJTkVfU1RBVEVfVElNRU9VVF9NUyAvIDEwMDAgKyBcIiBcIiArXHJcbiAgICAgICAgICAgICAgICAgICAgXCJzZWNvbmRzLlwiKTtcclxuICAgICAgICAgICAgICAgIF90aGlzLnNldEFuZEJyb2FkY2FzdChPbmxpbmVTdGF0ZS5PZmZsaW5lKTtcclxuICAgICAgICAgICAgICAgIC8vIE5PVEU6IGhhbmRsZVdhdGNoU3RyZWFtRmFpbHVyZSgpIHdpbGwgY29udGludWUgdG8gaW5jcmVtZW50XHJcbiAgICAgICAgICAgICAgICAvLyB3YXRjaFN0cmVhbUZhaWx1cmVzIGV2ZW4gdGhvdWdoIHdlIGFyZSBhbHJlYWR5IG1hcmtlZCBPZmZsaW5lLFxyXG4gICAgICAgICAgICAgICAgLy8gYnV0IHRoaXMgaXMgbm9uLWhhcm1mdWwuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFVwZGF0ZXMgb3VyIE9ubGluZVN0YXRlIGFzIGFwcHJvcHJpYXRlIGFmdGVyIHRoZSB3YXRjaCBzdHJlYW0gcmVwb3J0cyBhXHJcbiAgICAgKiBmYWlsdXJlLiBUaGUgZmlyc3QgZmFpbHVyZSBtb3ZlcyB1cyB0byB0aGUgJ1Vua25vd24nIHN0YXRlLiBXZSB0aGVuIG1heVxyXG4gICAgICogYWxsb3cgbXVsdGlwbGUgZmFpbHVyZXMgKGJhc2VkIG9uIE1BWF9XQVRDSF9TVFJFQU1fRkFJTFVSRVMpIGJlZm9yZSB3ZVxyXG4gICAgICogYWN0dWFsbHkgdHJhbnNpdGlvbiB0byB0aGUgJ09mZmxpbmUnIHN0YXRlLlxyXG4gICAgICovXHJcbiAgICBPbmxpbmVTdGF0ZVRyYWNrZXIucHJvdG90eXBlLmhhbmRsZVdhdGNoU3RyZWFtRmFpbHVyZSA9IGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgIGlmICh0aGlzLnN0YXRlID09PSBPbmxpbmVTdGF0ZS5PbmxpbmUpIHtcclxuICAgICAgICAgICAgdGhpcy5zZXRBbmRCcm9hZGNhc3QoT25saW5lU3RhdGUuVW5rbm93bik7XHJcbiAgICAgICAgICAgIC8vIFRvIGdldCB0byBPbmxpbmVTdGF0ZS5PbmxpbmUsIHNldCgpIG11c3QgaGF2ZSBiZWVuIGNhbGxlZCB3aGljaCB3b3VsZFxyXG4gICAgICAgICAgICAvLyBoYXZlIHJlc2V0IG91ciBoZXVyaXN0aWNzLlxyXG4gICAgICAgICAgICBhc3NlcnQodGhpcy53YXRjaFN0cmVhbUZhaWx1cmVzID09PSAwLCAnd2F0Y2hTdHJlYW1GYWlsdXJlcyBtdXN0IGJlIDAnKTtcclxuICAgICAgICAgICAgYXNzZXJ0KHRoaXMub25saW5lU3RhdGVUaW1lciA9PT0gbnVsbCwgJ29ubGluZVN0YXRlVGltZXIgbXVzdCBiZSBudWxsJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLndhdGNoU3RyZWFtRmFpbHVyZXMrKztcclxuICAgICAgICAgICAgaWYgKHRoaXMud2F0Y2hTdHJlYW1GYWlsdXJlcyA+PSBNQVhfV0FUQ0hfU1RSRUFNX0ZBSUxVUkVTKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNsZWFyT25saW5lU3RhdGVUaW1lcigpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5sb2dDbGllbnRPZmZsaW5lV2FybmluZ0lmTmVjZXNzYXJ5KFwiQ29ubmVjdGlvbiBmYWlsZWQgXCIgKyBNQVhfV0FUQ0hfU1RSRUFNX0ZBSUxVUkVTICsgXCIgXCIgK1xyXG4gICAgICAgICAgICAgICAgICAgIChcInRpbWVzLiBNb3N0IHJlY2VudCBlcnJvcjogXCIgKyBlcnJvci50b1N0cmluZygpKSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldEFuZEJyb2FkY2FzdChPbmxpbmVTdGF0ZS5PZmZsaW5lKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEV4cGxpY2l0bHkgc2V0cyB0aGUgT25saW5lU3RhdGUgdG8gdGhlIHNwZWNpZmllZCBzdGF0ZS5cclxuICAgICAqXHJcbiAgICAgKiBOb3RlIHRoYXQgdGhpcyByZXNldHMgb3VyIHRpbWVycyAvIGZhaWx1cmUgY291bnRlcnMsIGV0Yy4gdXNlZCBieSBvdXJcclxuICAgICAqIE9mZmxpbmUgaGV1cmlzdGljcywgc28gbXVzdCBub3QgYmUgdXNlZCBpbiBwbGFjZSBvZlxyXG4gICAgICogaGFuZGxlV2F0Y2hTdHJlYW1TdGFydCgpIGFuZCBoYW5kbGVXYXRjaFN0cmVhbUZhaWx1cmUoKS5cclxuICAgICAqL1xyXG4gICAgT25saW5lU3RhdGVUcmFja2VyLnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAobmV3U3RhdGUpIHtcclxuICAgICAgICB0aGlzLmNsZWFyT25saW5lU3RhdGVUaW1lcigpO1xyXG4gICAgICAgIHRoaXMud2F0Y2hTdHJlYW1GYWlsdXJlcyA9IDA7XHJcbiAgICAgICAgaWYgKG5ld1N0YXRlID09PSBPbmxpbmVTdGF0ZS5PbmxpbmUpIHtcclxuICAgICAgICAgICAgLy8gV2UndmUgY29ubmVjdGVkIHRvIHdhdGNoIGF0IGxlYXN0IG9uY2UuIERvbid0IHdhcm4gdGhlIGRldmVsb3BlclxyXG4gICAgICAgICAgICAvLyBhYm91dCBiZWluZyBvZmZsaW5lIGdvaW5nIGZvcndhcmQuXHJcbiAgICAgICAgICAgIHRoaXMuc2hvdWxkV2FybkNsaWVudElzT2ZmbGluZSA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnNldEFuZEJyb2FkY2FzdChuZXdTdGF0ZSk7XHJcbiAgICB9O1xyXG4gICAgT25saW5lU3RhdGVUcmFja2VyLnByb3RvdHlwZS5zZXRBbmRCcm9hZGNhc3QgPSBmdW5jdGlvbiAobmV3U3RhdGUpIHtcclxuICAgICAgICBpZiAobmV3U3RhdGUgIT09IHRoaXMuc3RhdGUpIHtcclxuICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IG5ld1N0YXRlO1xyXG4gICAgICAgICAgICB0aGlzLm9ubGluZVN0YXRlSGFuZGxlcihuZXdTdGF0ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIE9ubGluZVN0YXRlVHJhY2tlci5wcm90b3R5cGUubG9nQ2xpZW50T2ZmbGluZVdhcm5pbmdJZk5lY2Vzc2FyeSA9IGZ1bmN0aW9uIChkZXRhaWxzKSB7XHJcbiAgICAgICAgdmFyIG1lc3NhZ2UgPSBcIkNvdWxkIG5vdCByZWFjaCBDbG91ZCBGaXJlc3RvcmUgYmFja2VuZC4gXCIgKyBkZXRhaWxzICsgXCJcXG5cIiArXHJcbiAgICAgICAgICAgIFwiVGhpcyB0eXBpY2FsbHkgaW5kaWNhdGVzIHRoYXQgeW91ciBkZXZpY2UgZG9lcyBub3QgaGF2ZSBhIGhlYWx0aHkgXCIgK1xyXG4gICAgICAgICAgICBcIkludGVybmV0IGNvbm5lY3Rpb24gYXQgdGhlIG1vbWVudC4gVGhlIGNsaWVudCB3aWxsIG9wZXJhdGUgaW4gb2ZmbGluZSBcIiArXHJcbiAgICAgICAgICAgIFwibW9kZSB1bnRpbCBpdCBpcyBhYmxlIHRvIHN1Y2Nlc3NmdWxseSBjb25uZWN0IHRvIHRoZSBiYWNrZW5kLlwiO1xyXG4gICAgICAgIGlmICh0aGlzLnNob3VsZFdhcm5DbGllbnRJc09mZmxpbmUpIHtcclxuICAgICAgICAgICAgZXJyb3IobWVzc2FnZSk7XHJcbiAgICAgICAgICAgIHRoaXMuc2hvdWxkV2FybkNsaWVudElzT2ZmbGluZSA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgZGVidWcoTE9HX1RBRyQ2LCBtZXNzYWdlKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgT25saW5lU3RhdGVUcmFja2VyLnByb3RvdHlwZS5jbGVhck9ubGluZVN0YXRlVGltZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMub25saW5lU3RhdGVUaW1lciAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aGlzLm9ubGluZVN0YXRlVGltZXIuY2FuY2VsKCk7XHJcbiAgICAgICAgICAgIHRoaXMub25saW5lU3RhdGVUaW1lciA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHJldHVybiBPbmxpbmVTdGF0ZVRyYWNrZXI7XHJcbn0oKSk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogRXJyb3IgQ29kZXMgZGVzY3JpYmluZyB0aGUgZGlmZmVyZW50IHdheXMgR1JQQyBjYW4gZmFpbC4gVGhlc2UgYXJlIGNvcGllZFxyXG4gKiBkaXJlY3RseSBmcm9tIEdSUEMncyBzb3VyY2VzIGhlcmU6XHJcbiAqXHJcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9ncnBjL2dycGMvYmxvYi9iY2VlYzk0ZWE0ZmM1ZjAwODVkODEyMzVkOGUxYzA2Nzk4ZGMzNDFhL2luY2x1ZGUvZ3JwYyUyQiUyQi9pbXBsL2NvZGVnZW4vc3RhdHVzX2NvZGVfZW51bS5oXHJcbiAqXHJcbiAqIEltcG9ydGFudCEgVGhlIG5hbWVzIG9mIHRoZXNlIGlkZW50aWZpZXJzIG1hdHRlciBiZWNhdXNlIHRoZSBzdHJpbmcgZm9ybXNcclxuICogYXJlIHVzZWQgZm9yIHJldmVyc2UgbG9va3VwcyBmcm9tIHRoZSB3ZWJjaGFubmVsIHN0cmVhbS4gRG8gTk9UIGNoYW5nZSB0aGVcclxuICogbmFtZXMgb2YgdGhlc2UgaWRlbnRpZmllcnMuXHJcbiAqL1xyXG52YXIgUnBjQ29kZTtcclxuKGZ1bmN0aW9uIChScGNDb2RlKSB7XHJcbiAgICBScGNDb2RlW1JwY0NvZGVbXCJPS1wiXSA9IDBdID0gXCJPS1wiO1xyXG4gICAgUnBjQ29kZVtScGNDb2RlW1wiQ0FOQ0VMTEVEXCJdID0gMV0gPSBcIkNBTkNFTExFRFwiO1xyXG4gICAgUnBjQ29kZVtScGNDb2RlW1wiVU5LTk9XTlwiXSA9IDJdID0gXCJVTktOT1dOXCI7XHJcbiAgICBScGNDb2RlW1JwY0NvZGVbXCJJTlZBTElEX0FSR1VNRU5UXCJdID0gM10gPSBcIklOVkFMSURfQVJHVU1FTlRcIjtcclxuICAgIFJwY0NvZGVbUnBjQ29kZVtcIkRFQURMSU5FX0VYQ0VFREVEXCJdID0gNF0gPSBcIkRFQURMSU5FX0VYQ0VFREVEXCI7XHJcbiAgICBScGNDb2RlW1JwY0NvZGVbXCJOT1RfRk9VTkRcIl0gPSA1XSA9IFwiTk9UX0ZPVU5EXCI7XHJcbiAgICBScGNDb2RlW1JwY0NvZGVbXCJBTFJFQURZX0VYSVNUU1wiXSA9IDZdID0gXCJBTFJFQURZX0VYSVNUU1wiO1xyXG4gICAgUnBjQ29kZVtScGNDb2RlW1wiUEVSTUlTU0lPTl9ERU5JRURcIl0gPSA3XSA9IFwiUEVSTUlTU0lPTl9ERU5JRURcIjtcclxuICAgIFJwY0NvZGVbUnBjQ29kZVtcIlVOQVVUSEVOVElDQVRFRFwiXSA9IDE2XSA9IFwiVU5BVVRIRU5USUNBVEVEXCI7XHJcbiAgICBScGNDb2RlW1JwY0NvZGVbXCJSRVNPVVJDRV9FWEhBVVNURURcIl0gPSA4XSA9IFwiUkVTT1VSQ0VfRVhIQVVTVEVEXCI7XHJcbiAgICBScGNDb2RlW1JwY0NvZGVbXCJGQUlMRURfUFJFQ09ORElUSU9OXCJdID0gOV0gPSBcIkZBSUxFRF9QUkVDT05ESVRJT05cIjtcclxuICAgIFJwY0NvZGVbUnBjQ29kZVtcIkFCT1JURURcIl0gPSAxMF0gPSBcIkFCT1JURURcIjtcclxuICAgIFJwY0NvZGVbUnBjQ29kZVtcIk9VVF9PRl9SQU5HRVwiXSA9IDExXSA9IFwiT1VUX09GX1JBTkdFXCI7XHJcbiAgICBScGNDb2RlW1JwY0NvZGVbXCJVTklNUExFTUVOVEVEXCJdID0gMTJdID0gXCJVTklNUExFTUVOVEVEXCI7XHJcbiAgICBScGNDb2RlW1JwY0NvZGVbXCJJTlRFUk5BTFwiXSA9IDEzXSA9IFwiSU5URVJOQUxcIjtcclxuICAgIFJwY0NvZGVbUnBjQ29kZVtcIlVOQVZBSUxBQkxFXCJdID0gMTRdID0gXCJVTkFWQUlMQUJMRVwiO1xyXG4gICAgUnBjQ29kZVtScGNDb2RlW1wiREFUQV9MT1NTXCJdID0gMTVdID0gXCJEQVRBX0xPU1NcIjtcclxufSkoUnBjQ29kZSB8fCAoUnBjQ29kZSA9IHt9KSk7XHJcbi8qKlxyXG4gKiBEZXRlcm1pbmVzIHdoZXRoZXIgYW4gZXJyb3IgY29kZSByZXByZXNlbnRzIGEgcGVybWFuZW50IGVycm9yIHdoZW4gcmVjZWl2ZWRcclxuICogaW4gcmVzcG9uc2UgdG8gYSBub24td3JpdGUgb3BlcmF0aW9uLlxyXG4gKlxyXG4gKiBTZWUgaXNQZXJtYW5lbnRXcml0ZUVycm9yIGZvciBjbGFzc2lmeWluZyB3cml0ZSBlcnJvcnMuXHJcbiAqL1xyXG5mdW5jdGlvbiBpc1Blcm1hbmVudEVycm9yKGNvZGUpIHtcclxuICAgIHN3aXRjaCAoY29kZSkge1xyXG4gICAgICAgIGNhc2UgQ29kZS5PSzpcclxuICAgICAgICAgICAgcmV0dXJuIGZhaWwoJ1RyZWF0ZWQgc3RhdHVzIE9LIGFzIGVycm9yJyk7XHJcbiAgICAgICAgY2FzZSBDb2RlLkNBTkNFTExFRDpcclxuICAgICAgICBjYXNlIENvZGUuVU5LTk9XTjpcclxuICAgICAgICBjYXNlIENvZGUuREVBRExJTkVfRVhDRUVERUQ6XHJcbiAgICAgICAgY2FzZSBDb2RlLlJFU09VUkNFX0VYSEFVU1RFRDpcclxuICAgICAgICBjYXNlIENvZGUuSU5URVJOQUw6XHJcbiAgICAgICAgY2FzZSBDb2RlLlVOQVZBSUxBQkxFOlxyXG4gICAgICAgIC8vIFVuYXV0aGVudGljYXRlZCBtZWFucyBzb21ldGhpbmcgd2VudCB3cm9uZyB3aXRoIG91ciB0b2tlbiBhbmQgd2UgbmVlZFxyXG4gICAgICAgIC8vIHRvIHJldHJ5IHdpdGggbmV3IGNyZWRlbnRpYWxzIHdoaWNoIHdpbGwgaGFwcGVuIGF1dG9tYXRpY2FsbHkuXHJcbiAgICAgICAgY2FzZSBDb2RlLlVOQVVUSEVOVElDQVRFRDpcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIGNhc2UgQ29kZS5JTlZBTElEX0FSR1VNRU5UOlxyXG4gICAgICAgIGNhc2UgQ29kZS5OT1RfRk9VTkQ6XHJcbiAgICAgICAgY2FzZSBDb2RlLkFMUkVBRFlfRVhJU1RTOlxyXG4gICAgICAgIGNhc2UgQ29kZS5QRVJNSVNTSU9OX0RFTklFRDpcclxuICAgICAgICBjYXNlIENvZGUuRkFJTEVEX1BSRUNPTkRJVElPTjpcclxuICAgICAgICAvLyBBYm9ydGVkIG1pZ2h0IGJlIHJldHJpZWQgaW4gc29tZSBzY2VuYXJpb3MsIGJ1dCB0aGF0IGlzIGRlcGVuZGFudCBvblxyXG4gICAgICAgIC8vIHRoZSBjb250ZXh0IGFuZCBzaG91bGQgaGFuZGxlZCBpbmRpdmlkdWFsbHkgYnkgdGhlIGNhbGxpbmcgY29kZS5cclxuICAgICAgICAvLyBTZWUgaHR0cHM6Ly9jbG91ZC5nb29nbGUuY29tL2FwaXMvZGVzaWduL2Vycm9ycy5cclxuICAgICAgICBjYXNlIENvZGUuQUJPUlRFRDpcclxuICAgICAgICBjYXNlIENvZGUuT1VUX09GX1JBTkdFOlxyXG4gICAgICAgIGNhc2UgQ29kZS5VTklNUExFTUVOVEVEOlxyXG4gICAgICAgIGNhc2UgQ29kZS5EQVRBX0xPU1M6XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgIHJldHVybiBmYWlsKCdVbmtub3duIHN0YXR1cyBjb2RlOiAnICsgY29kZSk7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIERldGVybWluZXMgd2hldGhlciBhbiBlcnJvciBjb2RlIHJlcHJlc2VudHMgYSBwZXJtYW5lbnQgZXJyb3Igd2hlbiByZWNlaXZlZFxyXG4gKiBpbiByZXNwb25zZSB0byBhIHdyaXRlIG9wZXJhdGlvbi5cclxuICpcclxuICogV3JpdGUgb3BlcmF0aW9ucyBtdXN0IGJlIGhhbmRsZWQgc3BlY2lhbGx5IGJlY2F1c2UgYXMgb2YgYi8xMTk0Mzc3NjQsIEFCT1JURURcclxuICogZXJyb3JzIG9uIHRoZSB3cml0ZSBzdHJlYW0gc2hvdWxkIGJlIHJldHJpZWQgdG9vIChldmVuIHRob3VnaCBBQk9SVEVEIGVycm9yc1xyXG4gKiBhcmUgbm90IGdlbmVyYWxseSByZXRyeWFibGUpLlxyXG4gKlxyXG4gKiBOb3RlIHRoYXQgZHVyaW5nIHRoZSBpbml0aWFsIGhhbmRzaGFrZSBvbiB0aGUgd3JpdGUgc3RyZWFtIGFuIEFCT1JURUQgZXJyb3JcclxuICogc2lnbmFscyB0aGF0IHdlIHNob3VsZCBkaXNjYXJkIG91ciBzdHJlYW0gdG9rZW4gKGkuZS4gaXQgaXMgcGVybWFuZW50KS4gVGhpc1xyXG4gKiBtZWFucyBhIGhhbmRzaGFrZSBlcnJvciBzaG91bGQgYmUgY2xhc3NpZmllZCB3aXRoIGlzUGVybWFuZW50RXJyb3IsIGFib3ZlLlxyXG4gKi9cclxuZnVuY3Rpb24gaXNQZXJtYW5lbnRXcml0ZUVycm9yKGNvZGUpIHtcclxuICAgIHJldHVybiBpc1Blcm1hbmVudEVycm9yKGNvZGUpICYmIGNvZGUgIT09IENvZGUuQUJPUlRFRDtcclxufVxyXG4vKipcclxuICogTWFwcyBhbiBlcnJvciBDb2RlIGZyb20gYSBHUlBDIHN0YXR1cyBpZGVudGlmaWVyIGxpa2UgJ05PVF9GT1VORCcuXHJcbiAqXHJcbiAqIEByZXR1cm5zIFRoZSBDb2RlIGVxdWl2YWxlbnQgdG8gdGhlIGdpdmVuIHN0YXR1cyBzdHJpbmcgb3IgdW5kZWZpbmVkIGlmXHJcbiAqICAgICB0aGVyZSBpcyBubyBtYXRjaC5cclxuICovXHJcbmZ1bmN0aW9uIG1hcENvZGVGcm9tUnBjU3RhdHVzKHN0YXR1cykge1xyXG4gICAgLy8gbG9va3VwIGJ5IHN0cmluZ1xyXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuICAgIHZhciBjb2RlID0gUnBjQ29kZVtzdGF0dXNdO1xyXG4gICAgaWYgKGNvZGUgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbWFwQ29kZUZyb21ScGNDb2RlKGNvZGUpO1xyXG59XHJcbi8qKlxyXG4gKiBNYXBzIGFuIGVycm9yIENvZGUgZnJvbSBHUlBDIHN0YXR1cyBjb2RlIG51bWJlciwgbGlrZSAwLCAxLCBvciAxNC4gVGhlc2VcclxuICogYXJlIG5vdCB0aGUgc2FtZSBhcyBIVFRQIHN0YXR1cyBjb2Rlcy5cclxuICpcclxuICogQHJldHVybnMgVGhlIENvZGUgZXF1aXZhbGVudCB0byB0aGUgZ2l2ZW4gR1JQQyBzdGF0dXMgY29kZS4gRmFpbHMgaWYgdGhlcmVcclxuICogICAgIGlzIG5vIG1hdGNoLlxyXG4gKi9cclxuZnVuY3Rpb24gbWFwQ29kZUZyb21ScGNDb2RlKGNvZGUpIHtcclxuICAgIGlmIChjb2RlID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAvLyBUaGlzIHNob3VsZG4ndCBub3JtYWxseSBoYXBwZW4sIGJ1dCBpbiBjZXJ0YWluIGVycm9yIGNhc2VzIChsaWtlIHRyeWluZ1xyXG4gICAgICAgIC8vIHRvIHNlbmQgaW52YWxpZCBwcm90byBtZXNzYWdlcykgd2UgbWF5IGdldCBhbiBlcnJvciB3aXRoIG5vIEdSUEMgY29kZS5cclxuICAgICAgICBlcnJvcignR1JQQyBlcnJvciBoYXMgbm8gLmNvZGUnKTtcclxuICAgICAgICByZXR1cm4gQ29kZS5VTktOT1dOO1xyXG4gICAgfVxyXG4gICAgc3dpdGNoIChjb2RlKSB7XHJcbiAgICAgICAgY2FzZSBScGNDb2RlLk9LOlxyXG4gICAgICAgICAgICByZXR1cm4gQ29kZS5PSztcclxuICAgICAgICBjYXNlIFJwY0NvZGUuQ0FOQ0VMTEVEOlxyXG4gICAgICAgICAgICByZXR1cm4gQ29kZS5DQU5DRUxMRUQ7XHJcbiAgICAgICAgY2FzZSBScGNDb2RlLlVOS05PV046XHJcbiAgICAgICAgICAgIHJldHVybiBDb2RlLlVOS05PV047XHJcbiAgICAgICAgY2FzZSBScGNDb2RlLkRFQURMSU5FX0VYQ0VFREVEOlxyXG4gICAgICAgICAgICByZXR1cm4gQ29kZS5ERUFETElORV9FWENFRURFRDtcclxuICAgICAgICBjYXNlIFJwY0NvZGUuUkVTT1VSQ0VfRVhIQVVTVEVEOlxyXG4gICAgICAgICAgICByZXR1cm4gQ29kZS5SRVNPVVJDRV9FWEhBVVNURUQ7XHJcbiAgICAgICAgY2FzZSBScGNDb2RlLklOVEVSTkFMOlxyXG4gICAgICAgICAgICByZXR1cm4gQ29kZS5JTlRFUk5BTDtcclxuICAgICAgICBjYXNlIFJwY0NvZGUuVU5BVkFJTEFCTEU6XHJcbiAgICAgICAgICAgIHJldHVybiBDb2RlLlVOQVZBSUxBQkxFO1xyXG4gICAgICAgIGNhc2UgUnBjQ29kZS5VTkFVVEhFTlRJQ0FURUQ6XHJcbiAgICAgICAgICAgIHJldHVybiBDb2RlLlVOQVVUSEVOVElDQVRFRDtcclxuICAgICAgICBjYXNlIFJwY0NvZGUuSU5WQUxJRF9BUkdVTUVOVDpcclxuICAgICAgICAgICAgcmV0dXJuIENvZGUuSU5WQUxJRF9BUkdVTUVOVDtcclxuICAgICAgICBjYXNlIFJwY0NvZGUuTk9UX0ZPVU5EOlxyXG4gICAgICAgICAgICByZXR1cm4gQ29kZS5OT1RfRk9VTkQ7XHJcbiAgICAgICAgY2FzZSBScGNDb2RlLkFMUkVBRFlfRVhJU1RTOlxyXG4gICAgICAgICAgICByZXR1cm4gQ29kZS5BTFJFQURZX0VYSVNUUztcclxuICAgICAgICBjYXNlIFJwY0NvZGUuUEVSTUlTU0lPTl9ERU5JRUQ6XHJcbiAgICAgICAgICAgIHJldHVybiBDb2RlLlBFUk1JU1NJT05fREVOSUVEO1xyXG4gICAgICAgIGNhc2UgUnBjQ29kZS5GQUlMRURfUFJFQ09ORElUSU9OOlxyXG4gICAgICAgICAgICByZXR1cm4gQ29kZS5GQUlMRURfUFJFQ09ORElUSU9OO1xyXG4gICAgICAgIGNhc2UgUnBjQ29kZS5BQk9SVEVEOlxyXG4gICAgICAgICAgICByZXR1cm4gQ29kZS5BQk9SVEVEO1xyXG4gICAgICAgIGNhc2UgUnBjQ29kZS5PVVRfT0ZfUkFOR0U6XHJcbiAgICAgICAgICAgIHJldHVybiBDb2RlLk9VVF9PRl9SQU5HRTtcclxuICAgICAgICBjYXNlIFJwY0NvZGUuVU5JTVBMRU1FTlRFRDpcclxuICAgICAgICAgICAgcmV0dXJuIENvZGUuVU5JTVBMRU1FTlRFRDtcclxuICAgICAgICBjYXNlIFJwY0NvZGUuREFUQV9MT1NTOlxyXG4gICAgICAgICAgICByZXR1cm4gQ29kZS5EQVRBX0xPU1M7XHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgcmV0dXJuIGZhaWwoJ1Vua25vd24gc3RhdHVzIGNvZGU6ICcgKyBjb2RlKTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogTWFwcyBhbiBSUEMgY29kZSBmcm9tIGEgQ29kZS4gVGhpcyBpcyB0aGUgcmV2ZXJzZSBvcGVyYXRpb24gZnJvbVxyXG4gKiBtYXBDb2RlRnJvbVJwY0NvZGUgYW5kIHNob3VsZCByZWFsbHkgb25seSBiZSB1c2VkIGluIHRlc3RzLlxyXG4gKi9cclxuZnVuY3Rpb24gbWFwUnBjQ29kZUZyb21Db2RlKGNvZGUpIHtcclxuICAgIGlmIChjb2RlID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICByZXR1cm4gUnBjQ29kZS5PSztcclxuICAgIH1cclxuICAgIHN3aXRjaCAoY29kZSkge1xyXG4gICAgICAgIGNhc2UgQ29kZS5PSzpcclxuICAgICAgICAgICAgcmV0dXJuIFJwY0NvZGUuT0s7XHJcbiAgICAgICAgY2FzZSBDb2RlLkNBTkNFTExFRDpcclxuICAgICAgICAgICAgcmV0dXJuIFJwY0NvZGUuQ0FOQ0VMTEVEO1xyXG4gICAgICAgIGNhc2UgQ29kZS5VTktOT1dOOlxyXG4gICAgICAgICAgICByZXR1cm4gUnBjQ29kZS5VTktOT1dOO1xyXG4gICAgICAgIGNhc2UgQ29kZS5ERUFETElORV9FWENFRURFRDpcclxuICAgICAgICAgICAgcmV0dXJuIFJwY0NvZGUuREVBRExJTkVfRVhDRUVERUQ7XHJcbiAgICAgICAgY2FzZSBDb2RlLlJFU09VUkNFX0VYSEFVU1RFRDpcclxuICAgICAgICAgICAgcmV0dXJuIFJwY0NvZGUuUkVTT1VSQ0VfRVhIQVVTVEVEO1xyXG4gICAgICAgIGNhc2UgQ29kZS5JTlRFUk5BTDpcclxuICAgICAgICAgICAgcmV0dXJuIFJwY0NvZGUuSU5URVJOQUw7XHJcbiAgICAgICAgY2FzZSBDb2RlLlVOQVZBSUxBQkxFOlxyXG4gICAgICAgICAgICByZXR1cm4gUnBjQ29kZS5VTkFWQUlMQUJMRTtcclxuICAgICAgICBjYXNlIENvZGUuVU5BVVRIRU5USUNBVEVEOlxyXG4gICAgICAgICAgICByZXR1cm4gUnBjQ29kZS5VTkFVVEhFTlRJQ0FURUQ7XHJcbiAgICAgICAgY2FzZSBDb2RlLklOVkFMSURfQVJHVU1FTlQ6XHJcbiAgICAgICAgICAgIHJldHVybiBScGNDb2RlLklOVkFMSURfQVJHVU1FTlQ7XHJcbiAgICAgICAgY2FzZSBDb2RlLk5PVF9GT1VORDpcclxuICAgICAgICAgICAgcmV0dXJuIFJwY0NvZGUuTk9UX0ZPVU5EO1xyXG4gICAgICAgIGNhc2UgQ29kZS5BTFJFQURZX0VYSVNUUzpcclxuICAgICAgICAgICAgcmV0dXJuIFJwY0NvZGUuQUxSRUFEWV9FWElTVFM7XHJcbiAgICAgICAgY2FzZSBDb2RlLlBFUk1JU1NJT05fREVOSUVEOlxyXG4gICAgICAgICAgICByZXR1cm4gUnBjQ29kZS5QRVJNSVNTSU9OX0RFTklFRDtcclxuICAgICAgICBjYXNlIENvZGUuRkFJTEVEX1BSRUNPTkRJVElPTjpcclxuICAgICAgICAgICAgcmV0dXJuIFJwY0NvZGUuRkFJTEVEX1BSRUNPTkRJVElPTjtcclxuICAgICAgICBjYXNlIENvZGUuQUJPUlRFRDpcclxuICAgICAgICAgICAgcmV0dXJuIFJwY0NvZGUuQUJPUlRFRDtcclxuICAgICAgICBjYXNlIENvZGUuT1VUX09GX1JBTkdFOlxyXG4gICAgICAgICAgICByZXR1cm4gUnBjQ29kZS5PVVRfT0ZfUkFOR0U7XHJcbiAgICAgICAgY2FzZSBDb2RlLlVOSU1QTEVNRU5URUQ6XHJcbiAgICAgICAgICAgIHJldHVybiBScGNDb2RlLlVOSU1QTEVNRU5URUQ7XHJcbiAgICAgICAgY2FzZSBDb2RlLkRBVEFfTE9TUzpcclxuICAgICAgICAgICAgcmV0dXJuIFJwY0NvZGUuREFUQV9MT1NTO1xyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgIHJldHVybiBmYWlsKCdVbmtub3duIHN0YXR1cyBjb2RlOiAnICsgY29kZSk7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIENvbnZlcnRzIGFuIEhUVFAgcmVzcG9uc2UncyBlcnJvciBzdGF0dXMgdG8gdGhlIGVxdWl2YWxlbnQgZXJyb3IgY29kZS5cclxuICpcclxuICogQHBhcmFtIHN0YXR1cyBBbiBIVFRQIGVycm9yIHJlc3BvbnNlIHN0YXR1cyAoXCJGQUlMRURfUFJFQ09ORElUSU9OXCIsXHJcbiAqIFwiVU5LTk9XTlwiLCBldGMuKVxyXG4gKiBAcmV0dXJucyBUaGUgZXF1aXZhbGVudCBDb2RlLiBOb24tbWF0Y2hpbmcgcmVzcG9uc2VzIGFyZSBtYXBwZWQgdG9cclxuICogICAgIENvZGUuVU5LTk9XTi5cclxuICovXHJcbmZ1bmN0aW9uIG1hcENvZGVGcm9tSHR0cFJlc3BvbnNlRXJyb3JTdGF0dXMoc3RhdHVzKSB7XHJcbiAgICB2YXIgc2VydmVyRXJyb3IgPSBzdGF0dXMudG9Mb3dlckNhc2UoKS5yZXBsYWNlKCdfJywgJy0nKTtcclxuICAgIHJldHVybiBPYmplY3QudmFsdWVzKENvZGUpLmluZGV4T2Yoc2VydmVyRXJyb3IpID49IDBcclxuICAgICAgICA/IHNlcnZlckVycm9yXHJcbiAgICAgICAgOiBDb2RlLlVOS05PV047XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBEb2N1bWVudFNldCBpcyBhbiBpbW11dGFibGUgKGNvcHktb24td3JpdGUpIGNvbGxlY3Rpb24gdGhhdCBob2xkcyBkb2N1bWVudHNcclxuICogaW4gb3JkZXIgc3BlY2lmaWVkIGJ5IHRoZSBwcm92aWRlZCBjb21wYXJhdG9yLiBXZSBhbHdheXMgYWRkIGEgZG9jdW1lbnQga2V5XHJcbiAqIGNvbXBhcmF0b3Igb24gdG9wIG9mIHdoYXQgaXMgcHJvdmlkZWQgdG8gZ3VhcmFudGVlIGRvY3VtZW50IGVxdWFsaXR5IGJhc2VkIG9uXHJcbiAqIHRoZSBrZXkuXHJcbiAqL1xyXG52YXIgRG9jdW1lbnRTZXQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICAvKiogVGhlIGRlZmF1bHQgb3JkZXJpbmcgaXMgYnkga2V5IGlmIHRoZSBjb21wYXJhdG9yIGlzIG9taXR0ZWQgKi9cclxuICAgIGZ1bmN0aW9uIERvY3VtZW50U2V0KGNvbXApIHtcclxuICAgICAgICAvLyBXZSBhcmUgYWRkaW5nIGRvY3VtZW50IGtleSBjb21wYXJhdG9yIHRvIHRoZSBlbmQgYXMgaXQncyB0aGUgb25seVxyXG4gICAgICAgIC8vIGd1YXJhbnRlZWQgdW5pcXVlIHByb3BlcnR5IG9mIGEgZG9jdW1lbnQuXHJcbiAgICAgICAgaWYgKGNvbXApIHtcclxuICAgICAgICAgICAgdGhpcy5jb21wYXJhdG9yID0gZnVuY3Rpb24gKGQxLCBkMikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbXAoZDEsIGQyKSB8fCBEb2N1bWVudEtleS5jb21wYXJhdG9yKGQxLmtleSwgZDIua2V5KTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29tcGFyYXRvciA9IGZ1bmN0aW9uIChkMSwgZDIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBEb2N1bWVudEtleS5jb21wYXJhdG9yKGQxLmtleSwgZDIua2V5KTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5rZXllZE1hcCA9IGRvY3VtZW50TWFwKCk7XHJcbiAgICAgICAgdGhpcy5zb3J0ZWRTZXQgPSBuZXcgU29ydGVkTWFwKHRoaXMuY29tcGFyYXRvcik7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgYW4gZW1wdHkgY29weSBvZiB0aGUgZXhpc3RpbmcgRG9jdW1lbnRTZXQsIHVzaW5nIHRoZSBzYW1lXHJcbiAgICAgKiBjb21wYXJhdG9yLlxyXG4gICAgICovXHJcbiAgICBEb2N1bWVudFNldC5lbXB0eVNldCA9IGZ1bmN0aW9uIChvbGRTZXQpIHtcclxuICAgICAgICByZXR1cm4gbmV3IERvY3VtZW50U2V0KG9sZFNldC5jb21wYXJhdG9yKTtcclxuICAgIH07XHJcbiAgICBEb2N1bWVudFNldC5wcm90b3R5cGUuaGFzID0gZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmtleWVkTWFwLmdldChrZXkpICE9IG51bGw7XHJcbiAgICB9O1xyXG4gICAgRG9jdW1lbnRTZXQucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5rZXllZE1hcC5nZXQoa2V5KTtcclxuICAgIH07XHJcbiAgICBEb2N1bWVudFNldC5wcm90b3R5cGUuZmlyc3QgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc29ydGVkU2V0Lm1pbktleSgpO1xyXG4gICAgfTtcclxuICAgIERvY3VtZW50U2V0LnByb3RvdHlwZS5sYXN0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNvcnRlZFNldC5tYXhLZXkoKTtcclxuICAgIH07XHJcbiAgICBEb2N1bWVudFNldC5wcm90b3R5cGUuaXNFbXB0eSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zb3J0ZWRTZXQuaXNFbXB0eSgpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0aGUgaW5kZXggb2YgdGhlIHByb3ZpZGVkIGtleSBpbiB0aGUgZG9jdW1lbnQgc2V0LCBvciAtMSBpZiB0aGVcclxuICAgICAqIGRvY3VtZW50IGtleSBpcyBub3QgcHJlc2VudCBpbiB0aGUgc2V0O1xyXG4gICAgICovXHJcbiAgICBEb2N1bWVudFNldC5wcm90b3R5cGUuaW5kZXhPZiA9IGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICB2YXIgZG9jID0gdGhpcy5rZXllZE1hcC5nZXQoa2V5KTtcclxuICAgICAgICByZXR1cm4gZG9jID8gdGhpcy5zb3J0ZWRTZXQuaW5kZXhPZihkb2MpIDogLTE7XHJcbiAgICB9O1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KERvY3VtZW50U2V0LnByb3RvdHlwZSwgXCJzaXplXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc29ydGVkU2V0LnNpemU7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICAvKiogSXRlcmF0ZXMgZG9jdW1lbnRzIGluIG9yZGVyIGRlZmluZWQgYnkgXCJjb21wYXJhdG9yXCIgKi9cclxuICAgIERvY3VtZW50U2V0LnByb3RvdHlwZS5mb3JFYWNoID0gZnVuY3Rpb24gKGNiKSB7XHJcbiAgICAgICAgdGhpcy5zb3J0ZWRTZXQuaW5vcmRlclRyYXZlcnNhbChmdW5jdGlvbiAoaywgdikge1xyXG4gICAgICAgICAgICBjYihrKTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKiBJbnNlcnRzIG9yIHVwZGF0ZXMgYSBkb2N1bWVudCB3aXRoIHRoZSBzYW1lIGtleSAqL1xyXG4gICAgRG9jdW1lbnRTZXQucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uIChkb2MpIHtcclxuICAgICAgICAvLyBGaXJzdCByZW1vdmUgdGhlIGVsZW1lbnQgaWYgd2UgaGF2ZSBpdC5cclxuICAgICAgICB2YXIgc2V0ID0gdGhpcy5kZWxldGUoZG9jLmtleSk7XHJcbiAgICAgICAgcmV0dXJuIHNldC5jb3B5KHNldC5rZXllZE1hcC5pbnNlcnQoZG9jLmtleSwgZG9jKSwgc2V0LnNvcnRlZFNldC5pbnNlcnQoZG9jLCBudWxsKSk7XHJcbiAgICB9O1xyXG4gICAgLyoqIERlbGV0ZXMgYSBkb2N1bWVudCB3aXRoIGEgZ2l2ZW4ga2V5ICovXHJcbiAgICBEb2N1bWVudFNldC5wcm90b3R5cGUuZGVsZXRlID0gZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgIHZhciBkb2MgPSB0aGlzLmdldChrZXkpO1xyXG4gICAgICAgIGlmICghZG9jKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5jb3B5KHRoaXMua2V5ZWRNYXAucmVtb3ZlKGtleSksIHRoaXMuc29ydGVkU2V0LnJlbW92ZShkb2MpKTtcclxuICAgIH07XHJcbiAgICBEb2N1bWVudFNldC5wcm90b3R5cGUuaXNFcXVhbCA9IGZ1bmN0aW9uIChvdGhlcikge1xyXG4gICAgICAgIGlmICghKG90aGVyIGluc3RhbmNlb2YgRG9jdW1lbnRTZXQpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuc2l6ZSAhPT0gb3RoZXIuc2l6ZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciB0aGlzSXQgPSB0aGlzLnNvcnRlZFNldC5nZXRJdGVyYXRvcigpO1xyXG4gICAgICAgIHZhciBvdGhlckl0ID0gb3RoZXIuc29ydGVkU2V0LmdldEl0ZXJhdG9yKCk7XHJcbiAgICAgICAgd2hpbGUgKHRoaXNJdC5oYXNOZXh0KCkpIHtcclxuICAgICAgICAgICAgdmFyIHRoaXNEb2MgPSB0aGlzSXQuZ2V0TmV4dCgpLmtleTtcclxuICAgICAgICAgICAgdmFyIG90aGVyRG9jID0gb3RoZXJJdC5nZXROZXh0KCkua2V5O1xyXG4gICAgICAgICAgICBpZiAoIXRoaXNEb2MuaXNFcXVhbChvdGhlckRvYykpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH07XHJcbiAgICBEb2N1bWVudFNldC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGRvY1N0cmluZ3MgPSBbXTtcclxuICAgICAgICB0aGlzLmZvckVhY2goZnVuY3Rpb24gKGRvYykge1xyXG4gICAgICAgICAgICBkb2NTdHJpbmdzLnB1c2goZG9jLnRvU3RyaW5nKCkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGlmIChkb2NTdHJpbmdzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gJ0RvY3VtZW50U2V0ICgpJztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiAnRG9jdW1lbnRTZXQgKFxcbiAgJyArIGRvY1N0cmluZ3Muam9pbignICBcXG4nKSArICdcXG4pJztcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgRG9jdW1lbnRTZXQucHJvdG90eXBlLmNvcHkgPSBmdW5jdGlvbiAoa2V5ZWRNYXAsIHNvcnRlZFNldCkge1xyXG4gICAgICAgIHZhciBuZXdTZXQgPSBuZXcgRG9jdW1lbnRTZXQoKTtcclxuICAgICAgICBuZXdTZXQuY29tcGFyYXRvciA9IHRoaXMuY29tcGFyYXRvcjtcclxuICAgICAgICBuZXdTZXQua2V5ZWRNYXAgPSBrZXllZE1hcDtcclxuICAgICAgICBuZXdTZXQuc29ydGVkU2V0ID0gc29ydGVkU2V0O1xyXG4gICAgICAgIHJldHVybiBuZXdTZXQ7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIERvY3VtZW50U2V0O1xyXG59KCkpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxudmFyIENoYW5nZVR5cGU7XHJcbihmdW5jdGlvbiAoQ2hhbmdlVHlwZSkge1xyXG4gICAgQ2hhbmdlVHlwZVtDaGFuZ2VUeXBlW1wiQWRkZWRcIl0gPSAwXSA9IFwiQWRkZWRcIjtcclxuICAgIENoYW5nZVR5cGVbQ2hhbmdlVHlwZVtcIlJlbW92ZWRcIl0gPSAxXSA9IFwiUmVtb3ZlZFwiO1xyXG4gICAgQ2hhbmdlVHlwZVtDaGFuZ2VUeXBlW1wiTW9kaWZpZWRcIl0gPSAyXSA9IFwiTW9kaWZpZWRcIjtcclxuICAgIENoYW5nZVR5cGVbQ2hhbmdlVHlwZVtcIk1ldGFkYXRhXCJdID0gM10gPSBcIk1ldGFkYXRhXCI7XHJcbn0pKENoYW5nZVR5cGUgfHwgKENoYW5nZVR5cGUgPSB7fSkpO1xyXG52YXIgU3luY1N0YXRlO1xyXG4oZnVuY3Rpb24gKFN5bmNTdGF0ZSkge1xyXG4gICAgU3luY1N0YXRlW1N5bmNTdGF0ZVtcIkxvY2FsXCJdID0gMF0gPSBcIkxvY2FsXCI7XHJcbiAgICBTeW5jU3RhdGVbU3luY1N0YXRlW1wiU3luY2VkXCJdID0gMV0gPSBcIlN5bmNlZFwiO1xyXG59KShTeW5jU3RhdGUgfHwgKFN5bmNTdGF0ZSA9IHt9KSk7XHJcbi8qKlxyXG4gKiBEb2N1bWVudENoYW5nZVNldCBrZWVwcyB0cmFjayBvZiBhIHNldCBvZiBjaGFuZ2VzIHRvIGRvY3MgaW4gYSBxdWVyeSwgbWVyZ2luZ1xyXG4gKiBkdXBsaWNhdGUgZXZlbnRzIGZvciB0aGUgc2FtZSBkb2MuXHJcbiAqL1xyXG52YXIgRG9jdW1lbnRDaGFuZ2VTZXQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBEb2N1bWVudENoYW5nZVNldCgpIHtcclxuICAgICAgICB0aGlzLmNoYW5nZU1hcCA9IG5ldyBTb3J0ZWRNYXAoRG9jdW1lbnRLZXkuY29tcGFyYXRvcik7XHJcbiAgICB9XHJcbiAgICBEb2N1bWVudENoYW5nZVNldC5wcm90b3R5cGUudHJhY2sgPSBmdW5jdGlvbiAoY2hhbmdlKSB7XHJcbiAgICAgICAgdmFyIGtleSA9IGNoYW5nZS5kb2Mua2V5O1xyXG4gICAgICAgIHZhciBvbGRDaGFuZ2UgPSB0aGlzLmNoYW5nZU1hcC5nZXQoa2V5KTtcclxuICAgICAgICBpZiAoIW9sZENoYW5nZSkge1xyXG4gICAgICAgICAgICB0aGlzLmNoYW5nZU1hcCA9IHRoaXMuY2hhbmdlTWFwLmluc2VydChrZXksIGNoYW5nZSk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gTWVyZ2UgdGhlIG5ldyBjaGFuZ2Ugd2l0aCB0aGUgZXhpc3RpbmcgY2hhbmdlLlxyXG4gICAgICAgIGlmIChjaGFuZ2UudHlwZSAhPT0gQ2hhbmdlVHlwZS5BZGRlZCAmJlxyXG4gICAgICAgICAgICBvbGRDaGFuZ2UudHlwZSA9PT0gQ2hhbmdlVHlwZS5NZXRhZGF0YSkge1xyXG4gICAgICAgICAgICB0aGlzLmNoYW5nZU1hcCA9IHRoaXMuY2hhbmdlTWFwLmluc2VydChrZXksIGNoYW5nZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGNoYW5nZS50eXBlID09PSBDaGFuZ2VUeXBlLk1ldGFkYXRhICYmXHJcbiAgICAgICAgICAgIG9sZENoYW5nZS50eXBlICE9PSBDaGFuZ2VUeXBlLlJlbW92ZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5jaGFuZ2VNYXAgPSB0aGlzLmNoYW5nZU1hcC5pbnNlcnQoa2V5LCB7XHJcbiAgICAgICAgICAgICAgICB0eXBlOiBvbGRDaGFuZ2UudHlwZSxcclxuICAgICAgICAgICAgICAgIGRvYzogY2hhbmdlLmRvY1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoY2hhbmdlLnR5cGUgPT09IENoYW5nZVR5cGUuTW9kaWZpZWQgJiZcclxuICAgICAgICAgICAgb2xkQ2hhbmdlLnR5cGUgPT09IENoYW5nZVR5cGUuTW9kaWZpZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5jaGFuZ2VNYXAgPSB0aGlzLmNoYW5nZU1hcC5pbnNlcnQoa2V5LCB7XHJcbiAgICAgICAgICAgICAgICB0eXBlOiBDaGFuZ2VUeXBlLk1vZGlmaWVkLFxyXG4gICAgICAgICAgICAgICAgZG9jOiBjaGFuZ2UuZG9jXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChjaGFuZ2UudHlwZSA9PT0gQ2hhbmdlVHlwZS5Nb2RpZmllZCAmJlxyXG4gICAgICAgICAgICBvbGRDaGFuZ2UudHlwZSA9PT0gQ2hhbmdlVHlwZS5BZGRlZCkge1xyXG4gICAgICAgICAgICB0aGlzLmNoYW5nZU1hcCA9IHRoaXMuY2hhbmdlTWFwLmluc2VydChrZXksIHtcclxuICAgICAgICAgICAgICAgIHR5cGU6IENoYW5nZVR5cGUuQWRkZWQsXHJcbiAgICAgICAgICAgICAgICBkb2M6IGNoYW5nZS5kb2NcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGNoYW5nZS50eXBlID09PSBDaGFuZ2VUeXBlLlJlbW92ZWQgJiZcclxuICAgICAgICAgICAgb2xkQ2hhbmdlLnR5cGUgPT09IENoYW5nZVR5cGUuQWRkZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5jaGFuZ2VNYXAgPSB0aGlzLmNoYW5nZU1hcC5yZW1vdmUoa2V5KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoY2hhbmdlLnR5cGUgPT09IENoYW5nZVR5cGUuUmVtb3ZlZCAmJlxyXG4gICAgICAgICAgICBvbGRDaGFuZ2UudHlwZSA9PT0gQ2hhbmdlVHlwZS5Nb2RpZmllZCkge1xyXG4gICAgICAgICAgICB0aGlzLmNoYW5nZU1hcCA9IHRoaXMuY2hhbmdlTWFwLmluc2VydChrZXksIHtcclxuICAgICAgICAgICAgICAgIHR5cGU6IENoYW5nZVR5cGUuUmVtb3ZlZCxcclxuICAgICAgICAgICAgICAgIGRvYzogb2xkQ2hhbmdlLmRvY1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoY2hhbmdlLnR5cGUgPT09IENoYW5nZVR5cGUuQWRkZWQgJiZcclxuICAgICAgICAgICAgb2xkQ2hhbmdlLnR5cGUgPT09IENoYW5nZVR5cGUuUmVtb3ZlZCkge1xyXG4gICAgICAgICAgICB0aGlzLmNoYW5nZU1hcCA9IHRoaXMuY2hhbmdlTWFwLmluc2VydChrZXksIHtcclxuICAgICAgICAgICAgICAgIHR5cGU6IENoYW5nZVR5cGUuTW9kaWZpZWQsXHJcbiAgICAgICAgICAgICAgICBkb2M6IGNoYW5nZS5kb2NcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBUaGlzIGluY2x1ZGVzIHRoZXNlIGNhc2VzLCB3aGljaCBkb24ndCBtYWtlIHNlbnNlOlxyXG4gICAgICAgICAgICAvLyBBZGRlZC0+QWRkZWRcclxuICAgICAgICAgICAgLy8gUmVtb3ZlZC0+UmVtb3ZlZFxyXG4gICAgICAgICAgICAvLyBNb2RpZmllZC0+QWRkZWRcclxuICAgICAgICAgICAgLy8gUmVtb3ZlZC0+TW9kaWZpZWRcclxuICAgICAgICAgICAgLy8gTWV0YWRhdGEtPkFkZGVkXHJcbiAgICAgICAgICAgIC8vIFJlbW92ZWQtPk1ldGFkYXRhXHJcbiAgICAgICAgICAgIGZhaWwoJ3Vuc3VwcG9ydGVkIGNvbWJpbmF0aW9uIG9mIGNoYW5nZXM6ICcgK1xyXG4gICAgICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkoY2hhbmdlKSArXHJcbiAgICAgICAgICAgICAgICAnIGFmdGVyICcgK1xyXG4gICAgICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkob2xkQ2hhbmdlKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIERvY3VtZW50Q2hhbmdlU2V0LnByb3RvdHlwZS5nZXRDaGFuZ2VzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBjaGFuZ2VzID0gW107XHJcbiAgICAgICAgdGhpcy5jaGFuZ2VNYXAuaW5vcmRlclRyYXZlcnNhbChmdW5jdGlvbiAoa2V5LCBjaGFuZ2UpIHtcclxuICAgICAgICAgICAgY2hhbmdlcy5wdXNoKGNoYW5nZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIGNoYW5nZXM7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIERvY3VtZW50Q2hhbmdlU2V0O1xyXG59KCkpO1xyXG52YXIgVmlld1NuYXBzaG90ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gVmlld1NuYXBzaG90KHF1ZXJ5LCBkb2NzLCBvbGREb2NzLCBkb2NDaGFuZ2VzLCBtdXRhdGVkS2V5cywgZnJvbUNhY2hlLCBzeW5jU3RhdGVDaGFuZ2VkLCBleGNsdWRlc01ldGFkYXRhQ2hhbmdlcykge1xyXG4gICAgICAgIHRoaXMucXVlcnkgPSBxdWVyeTtcclxuICAgICAgICB0aGlzLmRvY3MgPSBkb2NzO1xyXG4gICAgICAgIHRoaXMub2xkRG9jcyA9IG9sZERvY3M7XHJcbiAgICAgICAgdGhpcy5kb2NDaGFuZ2VzID0gZG9jQ2hhbmdlcztcclxuICAgICAgICB0aGlzLm11dGF0ZWRLZXlzID0gbXV0YXRlZEtleXM7XHJcbiAgICAgICAgdGhpcy5mcm9tQ2FjaGUgPSBmcm9tQ2FjaGU7XHJcbiAgICAgICAgdGhpcy5zeW5jU3RhdGVDaGFuZ2VkID0gc3luY1N0YXRlQ2hhbmdlZDtcclxuICAgICAgICB0aGlzLmV4Y2x1ZGVzTWV0YWRhdGFDaGFuZ2VzID0gZXhjbHVkZXNNZXRhZGF0YUNoYW5nZXM7XHJcbiAgICB9XHJcbiAgICAvKiogUmV0dXJucyBhIHZpZXcgc25hcHNob3QgYXMgaWYgYWxsIGRvY3VtZW50cyBpbiB0aGUgc25hcHNob3Qgd2VyZSBhZGRlZC4gKi9cclxuICAgIFZpZXdTbmFwc2hvdC5mcm9tSW5pdGlhbERvY3VtZW50cyA9IGZ1bmN0aW9uIChxdWVyeSwgZG9jdW1lbnRzLCBtdXRhdGVkS2V5cywgZnJvbUNhY2hlKSB7XHJcbiAgICAgICAgdmFyIGNoYW5nZXMgPSBbXTtcclxuICAgICAgICBkb2N1bWVudHMuZm9yRWFjaChmdW5jdGlvbiAoZG9jKSB7XHJcbiAgICAgICAgICAgIGNoYW5nZXMucHVzaCh7IHR5cGU6IENoYW5nZVR5cGUuQWRkZWQsIGRvYzogZG9jIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBuZXcgVmlld1NuYXBzaG90KHF1ZXJ5LCBkb2N1bWVudHMsIERvY3VtZW50U2V0LmVtcHR5U2V0KGRvY3VtZW50cyksIGNoYW5nZXMsIG11dGF0ZWRLZXlzLCBmcm9tQ2FjaGUsIFxyXG4gICAgICAgIC8qIHN5bmNTdGF0ZUNoYW5nZWQ9ICovIHRydWUsIFxyXG4gICAgICAgIC8qIGV4Y2x1ZGVzTWV0YWRhdGFDaGFuZ2VzPSAqLyBmYWxzZSk7XHJcbiAgICB9O1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFZpZXdTbmFwc2hvdC5wcm90b3R5cGUsIFwiaGFzUGVuZGluZ1dyaXRlc1wiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAhdGhpcy5tdXRhdGVkS2V5cy5pc0VtcHR5KCk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBWaWV3U25hcHNob3QucHJvdG90eXBlLmlzRXF1YWwgPSBmdW5jdGlvbiAob3RoZXIpIHtcclxuICAgICAgICBpZiAodGhpcy5mcm9tQ2FjaGUgIT09IG90aGVyLmZyb21DYWNoZSB8fFxyXG4gICAgICAgICAgICB0aGlzLnN5bmNTdGF0ZUNoYW5nZWQgIT09IG90aGVyLnN5bmNTdGF0ZUNoYW5nZWQgfHxcclxuICAgICAgICAgICAgIXRoaXMubXV0YXRlZEtleXMuaXNFcXVhbChvdGhlci5tdXRhdGVkS2V5cykgfHxcclxuICAgICAgICAgICAgIXRoaXMucXVlcnkuaXNFcXVhbChvdGhlci5xdWVyeSkgfHxcclxuICAgICAgICAgICAgIXRoaXMuZG9jcy5pc0VxdWFsKG90aGVyLmRvY3MpIHx8XHJcbiAgICAgICAgICAgICF0aGlzLm9sZERvY3MuaXNFcXVhbChvdGhlci5vbGREb2NzKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBjaGFuZ2VzID0gdGhpcy5kb2NDaGFuZ2VzO1xyXG4gICAgICAgIHZhciBvdGhlckNoYW5nZXMgPSBvdGhlci5kb2NDaGFuZ2VzO1xyXG4gICAgICAgIGlmIChjaGFuZ2VzLmxlbmd0aCAhPT0gb3RoZXJDaGFuZ2VzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hhbmdlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAoY2hhbmdlc1tpXS50eXBlICE9PSBvdGhlckNoYW5nZXNbaV0udHlwZSB8fFxyXG4gICAgICAgICAgICAgICAgIWNoYW5nZXNbaV0uZG9jLmlzRXF1YWwob3RoZXJDaGFuZ2VzW2ldLmRvYykpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gVmlld1NuYXBzaG90O1xyXG59KCkpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEFuIGV2ZW50IGZyb20gdGhlIFJlbW90ZVN0b3JlLiBJdCBpcyBzcGxpdCBpbnRvIHRhcmdldENoYW5nZXMgKGNoYW5nZXMgdG8gdGhlXHJcbiAqIHN0YXRlIG9yIHRoZSBzZXQgb2YgZG9jdW1lbnRzIGluIG91ciB3YXRjaGVkIHRhcmdldHMpIGFuZCBkb2N1bWVudFVwZGF0ZXNcclxuICogKGNoYW5nZXMgdG8gdGhlIGFjdHVhbCBkb2N1bWVudHMpLlxyXG4gKi9cclxudmFyIFJlbW90ZUV2ZW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gUmVtb3RlRXZlbnQoXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBzbmFwc2hvdCB2ZXJzaW9uIHRoaXMgZXZlbnQgYnJpbmdzIHVzIHVwIHRvLCBvciBNSU4gaWYgbm90IHNldC5cclxuICAgICAqL1xyXG4gICAgc25hcHNob3RWZXJzaW9uLCBcclxuICAgIC8qKlxyXG4gICAgICogQSBtYXAgZnJvbSB0YXJnZXQgdG8gY2hhbmdlcyB0byB0aGUgdGFyZ2V0LiBTZWUgVGFyZ2V0Q2hhbmdlLlxyXG4gICAgICovXHJcbiAgICB0YXJnZXRDaGFuZ2VzLCBcclxuICAgIC8qKlxyXG4gICAgICogQSBzZXQgb2YgdGFyZ2V0cyB0aGF0IGlzIGtub3duIHRvIGJlIGluY29uc2lzdGVudC4gTGlzdGVucyBmb3IgdGhlc2VcclxuICAgICAqIHRhcmdldHMgc2hvdWxkIGJlIHJlLWVzdGFibGlzaGVkIHdpdGhvdXQgcmVzdW1lIHRva2Vucy5cclxuICAgICAqL1xyXG4gICAgdGFyZ2V0TWlzbWF0Y2hlcywgXHJcbiAgICAvKipcclxuICAgICAqIEEgc2V0IG9mIHdoaWNoIGRvY3VtZW50cyBoYXZlIGNoYW5nZWQgb3IgYmVlbiBkZWxldGVkLCBhbG9uZyB3aXRoIHRoZVxyXG4gICAgICogZG9jJ3MgbmV3IHZhbHVlcyAoaWYgbm90IGRlbGV0ZWQpLlxyXG4gICAgICovXHJcbiAgICBkb2N1bWVudFVwZGF0ZXMsIFxyXG4gICAgLyoqXHJcbiAgICAgKiBBIHNldCBvZiB3aGljaCBkb2N1bWVudCB1cGRhdGVzIGFyZSBkdWUgb25seSB0byBsaW1ibyByZXNvbHV0aW9uIHRhcmdldHMuXHJcbiAgICAgKi9cclxuICAgIHJlc29sdmVkTGltYm9Eb2N1bWVudHMpIHtcclxuICAgICAgICB0aGlzLnNuYXBzaG90VmVyc2lvbiA9IHNuYXBzaG90VmVyc2lvbjtcclxuICAgICAgICB0aGlzLnRhcmdldENoYW5nZXMgPSB0YXJnZXRDaGFuZ2VzO1xyXG4gICAgICAgIHRoaXMudGFyZ2V0TWlzbWF0Y2hlcyA9IHRhcmdldE1pc21hdGNoZXM7XHJcbiAgICAgICAgdGhpcy5kb2N1bWVudFVwZGF0ZXMgPSBkb2N1bWVudFVwZGF0ZXM7XHJcbiAgICAgICAgdGhpcy5yZXNvbHZlZExpbWJvRG9jdW1lbnRzID0gcmVzb2x2ZWRMaW1ib0RvY3VtZW50cztcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogSEFDSzogVmlld3MgcmVxdWlyZSBSZW1vdGVFdmVudHMgaW4gb3JkZXIgdG8gZGV0ZXJtaW5lIHdoZXRoZXIgdGhlIHZpZXcgaXNcclxuICAgICAqIENVUlJFTlQsIGJ1dCBzZWNvbmRhcnkgdGFicyBkb24ndCByZWNlaXZlIHJlbW90ZSBldmVudHMuIFNvIHRoaXMgbWV0aG9kIGlzXHJcbiAgICAgKiB1c2VkIHRvIGNyZWF0ZSBhIHN5bnRoZXNpemVkIFJlbW90ZUV2ZW50IHRoYXQgY2FuIGJlIHVzZWQgdG8gYXBwbHkgYVxyXG4gICAgICogQ1VSUkVOVCBzdGF0dXMgY2hhbmdlIHRvIGEgVmlldywgZm9yIHF1ZXJpZXMgZXhlY3V0ZWQgaW4gYSBkaWZmZXJlbnQgdGFiLlxyXG4gICAgICovXHJcbiAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLXRhYiBvbmx5XHJcbiAgICBSZW1vdGVFdmVudC5jcmVhdGVTeW50aGVzaXplZFJlbW90ZUV2ZW50Rm9yQ3VycmVudENoYW5nZSA9IGZ1bmN0aW9uICh0YXJnZXRJZCwgY3VycmVudCkge1xyXG4gICAgICAgIHZhciBfYTtcclxuICAgICAgICB2YXIgdGFyZ2V0Q2hhbmdlcyA9IChfYSA9IHt9LFxyXG4gICAgICAgICAgICBfYVt0YXJnZXRJZF0gPSBUYXJnZXRDaGFuZ2UuY3JlYXRlU3ludGhlc2l6ZWRUYXJnZXRDaGFuZ2VGb3JDdXJyZW50Q2hhbmdlKHRhcmdldElkLCBjdXJyZW50KSxcclxuICAgICAgICAgICAgX2EpO1xyXG4gICAgICAgIHJldHVybiBuZXcgUmVtb3RlRXZlbnQoU25hcHNob3RWZXJzaW9uLk1JTiwgdGFyZ2V0Q2hhbmdlcywgdGFyZ2V0SWRTZXQoKSwgbWF5YmVEb2N1bWVudE1hcCgpLCBkb2N1bWVudEtleVNldCgpKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gUmVtb3RlRXZlbnQ7XHJcbn0oKSk7XHJcbi8qKlxyXG4gKiBBIFRhcmdldENoYW5nZSBzcGVjaWZpZXMgdGhlIHNldCBvZiBjaGFuZ2VzIGZvciBhIHNwZWNpZmljIHRhcmdldCBhcyBwYXJ0IG9mXHJcbiAqIGEgUmVtb3RlRXZlbnQuIFRoZXNlIGNoYW5nZXMgdHJhY2sgd2hpY2ggZG9jdW1lbnRzIGFyZSBhZGRlZCwgbW9kaWZpZWQgb3JcclxuICogcmVtb3ZlZCwgYXMgd2VsbCBhcyB0aGUgdGFyZ2V0J3MgcmVzdW1lIHRva2VuIGFuZCB3aGV0aGVyIHRoZSB0YXJnZXQgaXNcclxuICogbWFya2VkIENVUlJFTlQuXHJcbiAqIFRoZSBhY3R1YWwgY2hhbmdlcyAqdG8qIGRvY3VtZW50cyBhcmUgbm90IHBhcnQgb2YgdGhlIFRhcmdldENoYW5nZSBzaW5jZVxyXG4gKiBkb2N1bWVudHMgbWF5IGJlIHBhcnQgb2YgbXVsdGlwbGUgdGFyZ2V0cy5cclxuICovXHJcbnZhciBUYXJnZXRDaGFuZ2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBUYXJnZXRDaGFuZ2UoXHJcbiAgICAvKipcclxuICAgICAqIEFuIG9wYXF1ZSwgc2VydmVyLWFzc2lnbmVkIHRva2VuIHRoYXQgYWxsb3dzIHdhdGNoaW5nIGEgcXVlcnkgdG8gYmUgcmVzdW1lZFxyXG4gICAgICogYWZ0ZXIgZGlzY29ubmVjdGluZyB3aXRob3V0IHJldHJhbnNtaXR0aW5nIGFsbCB0aGUgZGF0YSB0aGF0IG1hdGNoZXMgdGhlXHJcbiAgICAgKiBxdWVyeS4gVGhlIHJlc3VtZSB0b2tlbiBlc3NlbnRpYWxseSBpZGVudGlmaWVzIGEgcG9pbnQgaW4gdGltZSBmcm9tIHdoaWNoXHJcbiAgICAgKiB0aGUgc2VydmVyIHNob3VsZCByZXN1bWUgc2VuZGluZyByZXN1bHRzLlxyXG4gICAgICovXHJcbiAgICByZXN1bWVUb2tlbiwgXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBcImN1cnJlbnRcIiAoc3luY2VkKSBzdGF0dXMgb2YgdGhpcyB0YXJnZXQuIE5vdGUgdGhhdCBcImN1cnJlbnRcIlxyXG4gICAgICogaGFzIHNwZWNpYWwgbWVhbmluZyBpbiB0aGUgUlBDIHByb3RvY29sIHRoYXQgaW1wbGllcyB0aGF0IGEgdGFyZ2V0IGlzXHJcbiAgICAgKiBib3RoIHVwLXRvLWRhdGUgYW5kIGNvbnNpc3RlbnQgd2l0aCB0aGUgcmVzdCBvZiB0aGUgd2F0Y2ggc3RyZWFtLlxyXG4gICAgICovXHJcbiAgICBjdXJyZW50LCBcclxuICAgIC8qKlxyXG4gICAgICogVGhlIHNldCBvZiBkb2N1bWVudHMgdGhhdCB3ZXJlIG5ld2x5IGFzc2lnbmVkIHRvIHRoaXMgdGFyZ2V0IGFzIHBhcnQgb2ZcclxuICAgICAqIHRoaXMgcmVtb3RlIGV2ZW50LlxyXG4gICAgICovXHJcbiAgICBhZGRlZERvY3VtZW50cywgXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBzZXQgb2YgZG9jdW1lbnRzIHRoYXQgd2VyZSBhbHJlYWR5IGFzc2lnbmVkIHRvIHRoaXMgdGFyZ2V0IGJ1dCByZWNlaXZlZFxyXG4gICAgICogYW4gdXBkYXRlIGR1cmluZyB0aGlzIHJlbW90ZSBldmVudC5cclxuICAgICAqL1xyXG4gICAgbW9kaWZpZWREb2N1bWVudHMsIFxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgc2V0IG9mIGRvY3VtZW50cyB0aGF0IHdlcmUgcmVtb3ZlZCBmcm9tIHRoaXMgdGFyZ2V0IGFzIHBhcnQgb2YgdGhpc1xyXG4gICAgICogcmVtb3RlIGV2ZW50LlxyXG4gICAgICovXHJcbiAgICByZW1vdmVkRG9jdW1lbnRzKSB7XHJcbiAgICAgICAgdGhpcy5yZXN1bWVUb2tlbiA9IHJlc3VtZVRva2VuO1xyXG4gICAgICAgIHRoaXMuY3VycmVudCA9IGN1cnJlbnQ7XHJcbiAgICAgICAgdGhpcy5hZGRlZERvY3VtZW50cyA9IGFkZGVkRG9jdW1lbnRzO1xyXG4gICAgICAgIHRoaXMubW9kaWZpZWREb2N1bWVudHMgPSBtb2RpZmllZERvY3VtZW50cztcclxuICAgICAgICB0aGlzLnJlbW92ZWREb2N1bWVudHMgPSByZW1vdmVkRG9jdW1lbnRzO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyB1c2VkIHRvIGNyZWF0ZSBhIHN5bnRoZXNpemVkIFRhcmdldENoYW5nZXMgdGhhdCBjYW4gYmUgdXNlZCB0b1xyXG4gICAgICogYXBwbHkgYSBDVVJSRU5UIHN0YXR1cyBjaGFuZ2UgdG8gYSBWaWV3IChmb3IgcXVlcmllcyBleGVjdXRlZCBpbiBhIGRpZmZlcmVudFxyXG4gICAgICogdGFiKSBvciBmb3IgbmV3IHF1ZXJpZXMgKHRvIHJhaXNlIHNuYXBzaG90cyB3aXRoIGNvcnJlY3QgQ1VSUkVOVCBzdGF0dXMpLlxyXG4gICAgICovXHJcbiAgICBUYXJnZXRDaGFuZ2UuY3JlYXRlU3ludGhlc2l6ZWRUYXJnZXRDaGFuZ2VGb3JDdXJyZW50Q2hhbmdlID0gZnVuY3Rpb24gKHRhcmdldElkLCBjdXJyZW50KSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBUYXJnZXRDaGFuZ2UoZW1wdHlCeXRlU3RyaW5nKCksIGN1cnJlbnQsIGRvY3VtZW50S2V5U2V0KCksIGRvY3VtZW50S2V5U2V0KCksIGRvY3VtZW50S2V5U2V0KCkpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBUYXJnZXRDaGFuZ2U7XHJcbn0oKSk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogUmVwcmVzZW50cyBhIGNoYW5nZWQgZG9jdW1lbnQgYW5kIGEgbGlzdCBvZiB0YXJnZXQgaWRzIHRvIHdoaWNoIHRoaXMgY2hhbmdlXHJcbiAqIGFwcGxpZXMuXHJcbiAqXHJcbiAqIElmIGRvY3VtZW50IGhhcyBiZWVuIGRlbGV0ZWQgTm9Eb2N1bWVudCB3aWxsIGJlIHByb3ZpZGVkLlxyXG4gKi9cclxudmFyIERvY3VtZW50V2F0Y2hDaGFuZ2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBEb2N1bWVudFdhdGNoQ2hhbmdlKFxyXG4gICAgLyoqIFRoZSBuZXcgZG9jdW1lbnQgYXBwbGllcyB0byBhbGwgb2YgdGhlc2UgdGFyZ2V0cy4gKi9cclxuICAgIHVwZGF0ZWRUYXJnZXRJZHMsIFxyXG4gICAgLyoqIFRoZSBuZXcgZG9jdW1lbnQgaXMgcmVtb3ZlZCBmcm9tIGFsbCBvZiB0aGVzZSB0YXJnZXRzLiAqL1xyXG4gICAgcmVtb3ZlZFRhcmdldElkcywgXHJcbiAgICAvKiogVGhlIGtleSBvZiB0aGUgZG9jdW1lbnQgZm9yIHRoaXMgY2hhbmdlLiAqL1xyXG4gICAga2V5LCBcclxuICAgIC8qKlxyXG4gICAgICogVGhlIG5ldyBkb2N1bWVudCBvciBOb0RvY3VtZW50IGlmIGl0IHdhcyBkZWxldGVkLiBJcyBudWxsIGlmIHRoZVxyXG4gICAgICogZG9jdW1lbnQgd2VudCBvdXQgb2YgdmlldyB3aXRob3V0IHRoZSBzZXJ2ZXIgc2VuZGluZyBhIG5ldyBkb2N1bWVudC5cclxuICAgICAqL1xyXG4gICAgbmV3RG9jKSB7XHJcbiAgICAgICAgdGhpcy51cGRhdGVkVGFyZ2V0SWRzID0gdXBkYXRlZFRhcmdldElkcztcclxuICAgICAgICB0aGlzLnJlbW92ZWRUYXJnZXRJZHMgPSByZW1vdmVkVGFyZ2V0SWRzO1xyXG4gICAgICAgIHRoaXMua2V5ID0ga2V5O1xyXG4gICAgICAgIHRoaXMubmV3RG9jID0gbmV3RG9jO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIERvY3VtZW50V2F0Y2hDaGFuZ2U7XHJcbn0oKSk7XHJcbnZhciBFeGlzdGVuY2VGaWx0ZXJDaGFuZ2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBFeGlzdGVuY2VGaWx0ZXJDaGFuZ2UodGFyZ2V0SWQsIGV4aXN0ZW5jZUZpbHRlcikge1xyXG4gICAgICAgIHRoaXMudGFyZ2V0SWQgPSB0YXJnZXRJZDtcclxuICAgICAgICB0aGlzLmV4aXN0ZW5jZUZpbHRlciA9IGV4aXN0ZW5jZUZpbHRlcjtcclxuICAgIH1cclxuICAgIHJldHVybiBFeGlzdGVuY2VGaWx0ZXJDaGFuZ2U7XHJcbn0oKSk7XHJcbnZhciBXYXRjaFRhcmdldENoYW5nZVN0YXRlO1xyXG4oZnVuY3Rpb24gKFdhdGNoVGFyZ2V0Q2hhbmdlU3RhdGUpIHtcclxuICAgIFdhdGNoVGFyZ2V0Q2hhbmdlU3RhdGVbV2F0Y2hUYXJnZXRDaGFuZ2VTdGF0ZVtcIk5vQ2hhbmdlXCJdID0gMF0gPSBcIk5vQ2hhbmdlXCI7XHJcbiAgICBXYXRjaFRhcmdldENoYW5nZVN0YXRlW1dhdGNoVGFyZ2V0Q2hhbmdlU3RhdGVbXCJBZGRlZFwiXSA9IDFdID0gXCJBZGRlZFwiO1xyXG4gICAgV2F0Y2hUYXJnZXRDaGFuZ2VTdGF0ZVtXYXRjaFRhcmdldENoYW5nZVN0YXRlW1wiUmVtb3ZlZFwiXSA9IDJdID0gXCJSZW1vdmVkXCI7XHJcbiAgICBXYXRjaFRhcmdldENoYW5nZVN0YXRlW1dhdGNoVGFyZ2V0Q2hhbmdlU3RhdGVbXCJDdXJyZW50XCJdID0gM10gPSBcIkN1cnJlbnRcIjtcclxuICAgIFdhdGNoVGFyZ2V0Q2hhbmdlU3RhdGVbV2F0Y2hUYXJnZXRDaGFuZ2VTdGF0ZVtcIlJlc2V0XCJdID0gNF0gPSBcIlJlc2V0XCI7XHJcbn0pKFdhdGNoVGFyZ2V0Q2hhbmdlU3RhdGUgfHwgKFdhdGNoVGFyZ2V0Q2hhbmdlU3RhdGUgPSB7fSkpO1xyXG52YXIgV2F0Y2hUYXJnZXRDaGFuZ2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBXYXRjaFRhcmdldENoYW5nZShcclxuICAgIC8qKiBXaGF0IGtpbmQgb2YgY2hhbmdlIG9jY3VycmVkIHRvIHRoZSB3YXRjaCB0YXJnZXQuICovXHJcbiAgICBzdGF0ZSwgXHJcbiAgICAvKiogVGhlIHRhcmdldCBJRHMgdGhhdCB3ZXJlIGFkZGVkL3JlbW92ZWQvc2V0LiAqL1xyXG4gICAgdGFyZ2V0SWRzLCBcclxuICAgIC8qKlxyXG4gICAgICogQW4gb3BhcXVlLCBzZXJ2ZXItYXNzaWduZWQgdG9rZW4gdGhhdCBhbGxvd3Mgd2F0Y2hpbmcgYSB0YXJnZXQgdG8gYmVcclxuICAgICAqIHJlc3VtZWQgYWZ0ZXIgZGlzY29ubmVjdGluZyB3aXRob3V0IHJldHJhbnNtaXR0aW5nIGFsbCB0aGUgZGF0YSB0aGF0XHJcbiAgICAgKiBtYXRjaGVzIHRoZSB0YXJnZXQuIFRoZSByZXN1bWUgdG9rZW4gZXNzZW50aWFsbHkgaWRlbnRpZmllcyBhIHBvaW50IGluXHJcbiAgICAgKiB0aW1lIGZyb20gd2hpY2ggdGhlIHNlcnZlciBzaG91bGQgcmVzdW1lIHNlbmRpbmcgcmVzdWx0cy5cclxuICAgICAqL1xyXG4gICAgcmVzdW1lVG9rZW4sIFxyXG4gICAgLyoqIEFuIFJQQyBlcnJvciBpbmRpY2F0aW5nIHdoeSB0aGUgd2F0Y2ggZmFpbGVkLiAqL1xyXG4gICAgY2F1c2UpIHtcclxuICAgICAgICBpZiAocmVzdW1lVG9rZW4gPT09IHZvaWQgMCkgeyByZXN1bWVUb2tlbiA9IGVtcHR5Qnl0ZVN0cmluZygpOyB9XHJcbiAgICAgICAgaWYgKGNhdXNlID09PSB2b2lkIDApIHsgY2F1c2UgPSBudWxsOyB9XHJcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHN0YXRlO1xyXG4gICAgICAgIHRoaXMudGFyZ2V0SWRzID0gdGFyZ2V0SWRzO1xyXG4gICAgICAgIHRoaXMucmVzdW1lVG9rZW4gPSByZXN1bWVUb2tlbjtcclxuICAgICAgICB0aGlzLmNhdXNlID0gY2F1c2U7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gV2F0Y2hUYXJnZXRDaGFuZ2U7XHJcbn0oKSk7XHJcbi8qKiBUcmFja3MgdGhlIGludGVybmFsIHN0YXRlIG9mIGEgV2F0Y2ggdGFyZ2V0LiAqL1xyXG52YXIgVGFyZ2V0U3RhdGUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBUYXJnZXRTdGF0ZSgpIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBUaGUgbnVtYmVyIG9mIHBlbmRpbmcgcmVzcG9uc2VzIChhZGRzIG9yIHJlbW92ZXMpIHRoYXQgd2UgYXJlIHdhaXRpbmcgb24uXHJcbiAgICAgICAgICogV2Ugb25seSBjb25zaWRlciB0YXJnZXRzIGFjdGl2ZSB0aGF0IGhhdmUgbm8gcGVuZGluZyByZXNwb25zZXMuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5wZW5kaW5nUmVzcG9uc2VzID0gMDtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBLZWVwcyB0cmFjayBvZiB0aGUgZG9jdW1lbnQgY2hhbmdlcyBzaW5jZSB0aGUgbGFzdCByYWlzZWQgc25hcHNob3QuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBUaGVzZSBjaGFuZ2VzIGFyZSBjb250aW51b3VzbHkgdXBkYXRlZCBhcyB3ZSByZWNlaXZlIGRvY3VtZW50IHVwZGF0ZXMgYW5kXHJcbiAgICAgICAgICogYWx3YXlzIHJlZmxlY3QgdGhlIGN1cnJlbnQgc2V0IG9mIGNoYW5nZXMgYWdhaW5zdCB0aGUgbGFzdCBpc3N1ZWQgc25hcHNob3QuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5kb2N1bWVudENoYW5nZXMgPSBzbmFwc2hvdENoYW5nZXNNYXAoKTtcclxuICAgICAgICAvKiogU2VlIHB1YmxpYyBnZXR0ZXJzIGZvciBleHBsYW5hdGlvbnMgb2YgdGhlc2UgZmllbGRzLiAqL1xyXG4gICAgICAgIHRoaXMuX3Jlc3VtZVRva2VuID0gZW1wdHlCeXRlU3RyaW5nKCk7XHJcbiAgICAgICAgdGhpcy5fY3VycmVudCA9IGZhbHNlO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFdoZXRoZXIgdGhpcyB0YXJnZXQgc3RhdGUgc2hvdWxkIGJlIGluY2x1ZGVkIGluIHRoZSBuZXh0IHNuYXBzaG90LiBXZVxyXG4gICAgICAgICAqIGluaXRpYWxpemUgdG8gdHJ1ZSBzbyB0aGF0IG5ld2x5LWFkZGVkIHRhcmdldHMgYXJlIGluY2x1ZGVkIGluIHRoZSBuZXh0XHJcbiAgICAgICAgICogUmVtb3RlRXZlbnQuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5faGFzUGVuZGluZ0NoYW5nZXMgPSB0cnVlO1xyXG4gICAgfVxyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFRhcmdldFN0YXRlLnByb3RvdHlwZSwgXCJjdXJyZW50XCIsIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBXaGV0aGVyIHRoaXMgdGFyZ2V0IGhhcyBiZWVuIG1hcmtlZCAnY3VycmVudCcuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiAnQ3VycmVudCcgaGFzIHNwZWNpYWwgbWVhbmluZyBpbiB0aGUgUlBDIHByb3RvY29sOiBJdCBpbXBsaWVzIHRoYXQgdGhlXHJcbiAgICAgICAgICogV2F0Y2ggYmFja2VuZCBoYXMgc2VudCB1cyBhbGwgY2hhbmdlcyB1cCB0byB0aGUgcG9pbnQgYXQgd2hpY2ggdGhlIHRhcmdldFxyXG4gICAgICAgICAqIHdhcyBhZGRlZCBhbmQgdGhhdCB0aGUgdGFyZ2V0IGlzIGNvbnNpc3RlbnQgd2l0aCB0aGUgcmVzdCBvZiB0aGUgd2F0Y2hcclxuICAgICAgICAgKiBzdHJlYW0uXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9jdXJyZW50O1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFRhcmdldFN0YXRlLnByb3RvdHlwZSwgXCJyZXN1bWVUb2tlblwiLCB7XHJcbiAgICAgICAgLyoqIFRoZSBsYXN0IHJlc3VtZSB0b2tlbiBzZW50IHRvIHVzIGZvciB0aGlzIHRhcmdldC4gKi9cclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3Jlc3VtZVRva2VuO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFRhcmdldFN0YXRlLnByb3RvdHlwZSwgXCJpc1BlbmRpbmdcIiwge1xyXG4gICAgICAgIC8qKiBXaGV0aGVyIHRoaXMgdGFyZ2V0IGhhcyBwZW5kaW5nIHRhcmdldCBhZGRzIG9yIHRhcmdldCByZW1vdmVzLiAqL1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wZW5kaW5nUmVzcG9uc2VzICE9PSAwO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFRhcmdldFN0YXRlLnByb3RvdHlwZSwgXCJoYXNQZW5kaW5nQ2hhbmdlc1wiLCB7XHJcbiAgICAgICAgLyoqIFdoZXRoZXIgd2UgaGF2ZSBtb2RpZmllZCBhbnkgc3RhdGUgdGhhdCBzaG91bGQgdHJpZ2dlciBhIHNuYXBzaG90LiAqL1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5faGFzUGVuZGluZ0NoYW5nZXM7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICAvKipcclxuICAgICAqIEFwcGxpZXMgdGhlIHJlc3VtZSB0b2tlbiB0byB0aGUgVGFyZ2V0Q2hhbmdlLCBidXQgb25seSB3aGVuIGl0IGhhcyBhIG5ld1xyXG4gICAgICogdmFsdWUuIEVtcHR5IHJlc3VtZVRva2VucyBhcmUgZGlzY2FyZGVkLlxyXG4gICAgICovXHJcbiAgICBUYXJnZXRTdGF0ZS5wcm90b3R5cGUudXBkYXRlUmVzdW1lVG9rZW4gPSBmdW5jdGlvbiAocmVzdW1lVG9rZW4pIHtcclxuICAgICAgICBpZiAocmVzdW1lVG9rZW4ubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICB0aGlzLl9oYXNQZW5kaW5nQ2hhbmdlcyA9IHRydWU7XHJcbiAgICAgICAgICAgIHRoaXMuX3Jlc3VtZVRva2VuID0gcmVzdW1lVG9rZW47XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhIHRhcmdldCBjaGFuZ2UgZnJvbSB0aGUgY3VycmVudCBzZXQgb2YgY2hhbmdlcy5cclxuICAgICAqXHJcbiAgICAgKiBUbyByZXNldCB0aGUgZG9jdW1lbnQgY2hhbmdlcyBhZnRlciByYWlzaW5nIHRoaXMgc25hcHNob3QsIGNhbGxcclxuICAgICAqIGBjbGVhclBlbmRpbmdDaGFuZ2VzKClgLlxyXG4gICAgICovXHJcbiAgICBUYXJnZXRTdGF0ZS5wcm90b3R5cGUudG9UYXJnZXRDaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGFkZGVkRG9jdW1lbnRzID0gZG9jdW1lbnRLZXlTZXQoKTtcclxuICAgICAgICB2YXIgbW9kaWZpZWREb2N1bWVudHMgPSBkb2N1bWVudEtleVNldCgpO1xyXG4gICAgICAgIHZhciByZW1vdmVkRG9jdW1lbnRzID0gZG9jdW1lbnRLZXlTZXQoKTtcclxuICAgICAgICB0aGlzLmRvY3VtZW50Q2hhbmdlcy5mb3JFYWNoKGZ1bmN0aW9uIChrZXksIGNoYW5nZVR5cGUpIHtcclxuICAgICAgICAgICAgc3dpdGNoIChjaGFuZ2VUeXBlKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIENoYW5nZVR5cGUuQWRkZWQ6XHJcbiAgICAgICAgICAgICAgICAgICAgYWRkZWREb2N1bWVudHMgPSBhZGRlZERvY3VtZW50cy5hZGQoa2V5KTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgQ2hhbmdlVHlwZS5Nb2RpZmllZDpcclxuICAgICAgICAgICAgICAgICAgICBtb2RpZmllZERvY3VtZW50cyA9IG1vZGlmaWVkRG9jdW1lbnRzLmFkZChrZXkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBDaGFuZ2VUeXBlLlJlbW92ZWQ6XHJcbiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlZERvY3VtZW50cyA9IHJlbW92ZWREb2N1bWVudHMuYWRkKGtleSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIGZhaWwoJ0VuY291bnRlcmVkIGludmFsaWQgY2hhbmdlIHR5cGU6ICcgKyBjaGFuZ2VUeXBlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBuZXcgVGFyZ2V0Q2hhbmdlKHRoaXMuX3Jlc3VtZVRva2VuLCB0aGlzLl9jdXJyZW50LCBhZGRlZERvY3VtZW50cywgbW9kaWZpZWREb2N1bWVudHMsIHJlbW92ZWREb2N1bWVudHMpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmVzZXRzIHRoZSBkb2N1bWVudCBjaGFuZ2VzIGFuZCBzZXRzIGBoYXNQZW5kaW5nQ2hhbmdlc2AgdG8gZmFsc2UuXHJcbiAgICAgKi9cclxuICAgIFRhcmdldFN0YXRlLnByb3RvdHlwZS5jbGVhclBlbmRpbmdDaGFuZ2VzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuX2hhc1BlbmRpbmdDaGFuZ2VzID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5kb2N1bWVudENoYW5nZXMgPSBzbmFwc2hvdENoYW5nZXNNYXAoKTtcclxuICAgIH07XHJcbiAgICBUYXJnZXRTdGF0ZS5wcm90b3R5cGUuYWRkRG9jdW1lbnRDaGFuZ2UgPSBmdW5jdGlvbiAoa2V5LCBjaGFuZ2VUeXBlKSB7XHJcbiAgICAgICAgdGhpcy5faGFzUGVuZGluZ0NoYW5nZXMgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuZG9jdW1lbnRDaGFuZ2VzID0gdGhpcy5kb2N1bWVudENoYW5nZXMuaW5zZXJ0KGtleSwgY2hhbmdlVHlwZSk7XHJcbiAgICB9O1xyXG4gICAgVGFyZ2V0U3RhdGUucHJvdG90eXBlLnJlbW92ZURvY3VtZW50Q2hhbmdlID0gZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgIHRoaXMuX2hhc1BlbmRpbmdDaGFuZ2VzID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLmRvY3VtZW50Q2hhbmdlcyA9IHRoaXMuZG9jdW1lbnRDaGFuZ2VzLnJlbW92ZShrZXkpO1xyXG4gICAgfTtcclxuICAgIFRhcmdldFN0YXRlLnByb3RvdHlwZS5yZWNvcmRQZW5kaW5nVGFyZ2V0UmVxdWVzdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLnBlbmRpbmdSZXNwb25zZXMgKz0gMTtcclxuICAgIH07XHJcbiAgICBUYXJnZXRTdGF0ZS5wcm90b3R5cGUucmVjb3JkVGFyZ2V0UmVzcG9uc2UgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5wZW5kaW5nUmVzcG9uc2VzIC09IDE7XHJcbiAgICB9O1xyXG4gICAgVGFyZ2V0U3RhdGUucHJvdG90eXBlLm1hcmtDdXJyZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuX2hhc1BlbmRpbmdDaGFuZ2VzID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLl9jdXJyZW50ID0gdHJ1ZTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gVGFyZ2V0U3RhdGU7XHJcbn0oKSk7XHJcbnZhciBMT0dfVEFHJDcgPSAnV2F0Y2hDaGFuZ2VBZ2dyZWdhdG9yJztcclxuLyoqXHJcbiAqIEEgaGVscGVyIGNsYXNzIHRvIGFjY3VtdWxhdGUgd2F0Y2ggY2hhbmdlcyBpbnRvIGEgUmVtb3RlRXZlbnQuXHJcbiAqL1xyXG52YXIgV2F0Y2hDaGFuZ2VBZ2dyZWdhdG9yID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gV2F0Y2hDaGFuZ2VBZ2dyZWdhdG9yKG1ldGFkYXRhUHJvdmlkZXIpIHtcclxuICAgICAgICB0aGlzLm1ldGFkYXRhUHJvdmlkZXIgPSBtZXRhZGF0YVByb3ZpZGVyO1xyXG4gICAgICAgIC8qKiBUaGUgaW50ZXJuYWwgc3RhdGUgb2YgYWxsIHRyYWNrZWQgdGFyZ2V0cy4gKi9cclxuICAgICAgICB0aGlzLnRhcmdldFN0YXRlcyA9IHt9O1xyXG4gICAgICAgIC8qKiBLZWVwcyB0cmFjayBvZiB0aGUgZG9jdW1lbnRzIHRvIHVwZGF0ZSBzaW5jZSB0aGUgbGFzdCByYWlzZWQgc25hcHNob3QuICovXHJcbiAgICAgICAgdGhpcy5wZW5kaW5nRG9jdW1lbnRVcGRhdGVzID0gbWF5YmVEb2N1bWVudE1hcCgpO1xyXG4gICAgICAgIC8qKiBBIG1hcHBpbmcgb2YgZG9jdW1lbnQga2V5cyB0byB0aGVpciBzZXQgb2YgdGFyZ2V0IElEcy4gKi9cclxuICAgICAgICB0aGlzLnBlbmRpbmdEb2N1bWVudFRhcmdldE1hcHBpbmcgPSBkb2N1bWVudFRhcmdldE1hcCgpO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEEgbGlzdCBvZiB0YXJnZXRzIHdpdGggZXhpc3RlbmNlIGZpbHRlciBtaXNtYXRjaGVzLiBUaGVzZSB0YXJnZXRzIGFyZVxyXG4gICAgICAgICAqIGtub3duIHRvIGJlIGluY29uc2lzdGVudCBhbmQgdGhlaXIgbGlzdGVucyBuZWVkcyB0byBiZSByZS1lc3RhYmxpc2hlZCBieVxyXG4gICAgICAgICAqIFJlbW90ZVN0b3JlLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMucGVuZGluZ1RhcmdldFJlc2V0cyA9IG5ldyBTb3J0ZWRTZXQocHJpbWl0aXZlQ29tcGFyYXRvcik7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFByb2Nlc3NlcyBhbmQgYWRkcyB0aGUgRG9jdW1lbnRXYXRjaENoYW5nZSB0byB0aGUgY3VycmVudCBzZXQgb2YgY2hhbmdlcy5cclxuICAgICAqL1xyXG4gICAgV2F0Y2hDaGFuZ2VBZ2dyZWdhdG9yLnByb3RvdHlwZS5oYW5kbGVEb2N1bWVudENoYW5nZSA9IGZ1bmN0aW9uIChkb2NDaGFuZ2UpIHtcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gZG9jQ2hhbmdlLnVwZGF0ZWRUYXJnZXRJZHM7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciB0YXJnZXRJZCA9IF9hW19pXTtcclxuICAgICAgICAgICAgaWYgKGRvY0NoYW5nZS5uZXdEb2MgaW5zdGFuY2VvZiBEb2N1bWVudCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hZGREb2N1bWVudFRvVGFyZ2V0KHRhcmdldElkLCBkb2NDaGFuZ2UubmV3RG9jKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChkb2NDaGFuZ2UubmV3RG9jIGluc3RhbmNlb2YgTm9Eb2N1bWVudCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVEb2N1bWVudEZyb21UYXJnZXQodGFyZ2V0SWQsIGRvY0NoYW5nZS5rZXksIGRvY0NoYW5nZS5uZXdEb2MpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZvciAodmFyIF9iID0gMCwgX2MgPSBkb2NDaGFuZ2UucmVtb3ZlZFRhcmdldElkczsgX2IgPCBfYy5sZW5ndGg7IF9iKyspIHtcclxuICAgICAgICAgICAgdmFyIHRhcmdldElkID0gX2NbX2JdO1xyXG4gICAgICAgICAgICB0aGlzLnJlbW92ZURvY3VtZW50RnJvbVRhcmdldCh0YXJnZXRJZCwgZG9jQ2hhbmdlLmtleSwgZG9jQ2hhbmdlLm5ld0RvYyk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKiBQcm9jZXNzZXMgYW5kIGFkZHMgdGhlIFdhdGNoVGFyZ2V0Q2hhbmdlIHRvIHRoZSBjdXJyZW50IHNldCBvZiBjaGFuZ2VzLiAqL1xyXG4gICAgV2F0Y2hDaGFuZ2VBZ2dyZWdhdG9yLnByb3RvdHlwZS5oYW5kbGVUYXJnZXRDaGFuZ2UgPSBmdW5jdGlvbiAodGFyZ2V0Q2hhbmdlKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB0aGlzLmZvckVhY2hUYXJnZXQodGFyZ2V0Q2hhbmdlLCBmdW5jdGlvbiAodGFyZ2V0SWQpIHtcclxuICAgICAgICAgICAgdmFyIHRhcmdldFN0YXRlID0gX3RoaXMuZW5zdXJlVGFyZ2V0U3RhdGUodGFyZ2V0SWQpO1xyXG4gICAgICAgICAgICBzd2l0Y2ggKHRhcmdldENoYW5nZS5zdGF0ZSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSBXYXRjaFRhcmdldENoYW5nZVN0YXRlLk5vQ2hhbmdlOlxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChfdGhpcy5pc0FjdGl2ZVRhcmdldCh0YXJnZXRJZCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0U3RhdGUudXBkYXRlUmVzdW1lVG9rZW4odGFyZ2V0Q2hhbmdlLnJlc3VtZVRva2VuKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFdhdGNoVGFyZ2V0Q2hhbmdlU3RhdGUuQWRkZWQ6XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gV2UgbmVlZCB0byBkZWNyZW1lbnQgdGhlIG51bWJlciBvZiBwZW5kaW5nIGFja3MgbmVlZGVkIGZyb20gd2F0Y2hcclxuICAgICAgICAgICAgICAgICAgICAvLyBmb3IgdGhpcyB0YXJnZXRJZC5cclxuICAgICAgICAgICAgICAgICAgICB0YXJnZXRTdGF0ZS5yZWNvcmRUYXJnZXRSZXNwb25zZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghdGFyZ2V0U3RhdGUuaXNQZW5kaW5nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdlIGhhdmUgYSBmcmVzaGx5IGFkZGVkIHRhcmdldCwgc28gd2UgbmVlZCB0byByZXNldCBhbnkgc3RhdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhhdCB3ZSBoYWQgcHJldmlvdXNseS4gVGhpcyBjYW4gaGFwcGVuIGUuZy4gd2hlbiByZW1vdmUgYW5kIGFkZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBiYWNrIGEgdGFyZ2V0IGZvciBleGlzdGVuY2UgZmlsdGVyIG1pc21hdGNoZXMuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldFN0YXRlLmNsZWFyUGVuZGluZ0NoYW5nZXMoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0U3RhdGUudXBkYXRlUmVzdW1lVG9rZW4odGFyZ2V0Q2hhbmdlLnJlc3VtZVRva2VuKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgV2F0Y2hUYXJnZXRDaGFuZ2VTdGF0ZS5SZW1vdmVkOlxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFdlIG5lZWQgdG8ga2VlcCB0cmFjayBvZiByZW1vdmVkIHRhcmdldHMgdG8gd2UgY2FuIHBvc3QtZmlsdGVyIGFuZFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIHJlbW92ZSBhbnkgdGFyZ2V0IGNoYW5nZXMuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gV2UgbmVlZCB0byBkZWNyZW1lbnQgdGhlIG51bWJlciBvZiBwZW5kaW5nIGFja3MgbmVlZGVkIGZyb20gd2F0Y2hcclxuICAgICAgICAgICAgICAgICAgICAvLyBmb3IgdGhpcyB0YXJnZXRJZC5cclxuICAgICAgICAgICAgICAgICAgICB0YXJnZXRTdGF0ZS5yZWNvcmRUYXJnZXRSZXNwb25zZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghdGFyZ2V0U3RhdGUuaXNQZW5kaW5nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnJlbW92ZVRhcmdldCh0YXJnZXRJZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGFzc2VydCghdGFyZ2V0Q2hhbmdlLmNhdXNlLCAnV2F0Y2hDaGFuZ2VBZ2dyZWdhdG9yIGRvZXMgbm90IGhhbmRsZSBlcnJvcmVkIHRhcmdldHMnKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgV2F0Y2hUYXJnZXRDaGFuZ2VTdGF0ZS5DdXJyZW50OlxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChfdGhpcy5pc0FjdGl2ZVRhcmdldCh0YXJnZXRJZCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0U3RhdGUubWFya0N1cnJlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0U3RhdGUudXBkYXRlUmVzdW1lVG9rZW4odGFyZ2V0Q2hhbmdlLnJlc3VtZVRva2VuKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFdhdGNoVGFyZ2V0Q2hhbmdlU3RhdGUuUmVzZXQ6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLmlzQWN0aXZlVGFyZ2V0KHRhcmdldElkKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBSZXNldCB0aGUgdGFyZ2V0IGFuZCBzeW50aGVzaXplcyByZW1vdmVzIGZvciBhbGwgZXhpc3RpbmdcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZG9jdW1lbnRzLiBUaGUgYmFja2VuZCB3aWxsIHJlLWFkZCBhbnkgZG9jdW1lbnRzIHRoYXQgc3RpbGxcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gbWF0Y2ggdGhlIHRhcmdldCBiZWZvcmUgaXQgc2VuZHMgdGhlIG5leHQgZ2xvYmFsIHNuYXBzaG90LlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5yZXNldFRhcmdldCh0YXJnZXRJZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldFN0YXRlLnVwZGF0ZVJlc3VtZVRva2VuKHRhcmdldENoYW5nZS5yZXN1bWVUb2tlbik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICBmYWlsKCdVbmtub3duIHRhcmdldCB3YXRjaCBjaGFuZ2Ugc3RhdGU6ICcgKyB0YXJnZXRDaGFuZ2Uuc3RhdGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBJdGVyYXRlcyBvdmVyIGFsbCB0YXJnZXRJZHMgdGhhdCB0aGUgd2F0Y2ggY2hhbmdlIGFwcGxpZXMgdG86IGVpdGhlciB0aGVcclxuICAgICAqIHRhcmdldElkcyBleHBsaWNpdGx5IGxpc3RlZCBpbiB0aGUgY2hhbmdlIG9yIHRoZSB0YXJnZXRJZHMgb2YgYWxsIGN1cnJlbnRseVxyXG4gICAgICogYWN0aXZlIHRhcmdldHMuXHJcbiAgICAgKi9cclxuICAgIFdhdGNoQ2hhbmdlQWdncmVnYXRvci5wcm90b3R5cGUuZm9yRWFjaFRhcmdldCA9IGZ1bmN0aW9uICh0YXJnZXRDaGFuZ2UsIGZuKSB7XHJcbiAgICAgICAgaWYgKHRhcmdldENoYW5nZS50YXJnZXRJZHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICB0YXJnZXRDaGFuZ2UudGFyZ2V0SWRzLmZvckVhY2goZm4pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgZm9yRWFjaE51bWJlcih0aGlzLnRhcmdldFN0YXRlcywgZm4pO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEhhbmRsZXMgZXhpc3RlbmNlIGZpbHRlcnMgYW5kIHN5bnRoZXNpemVzIGRlbGV0ZXMgZm9yIGZpbHRlciBtaXNtYXRjaGVzLlxyXG4gICAgICogVGFyZ2V0cyB0aGF0IGFyZSBpbnZhbGlkYXRlZCBieSBmaWx0ZXIgbWlzbWF0Y2hlcyBhcmUgYWRkZWQgdG9cclxuICAgICAqIGBwZW5kaW5nVGFyZ2V0UmVzZXRzYC5cclxuICAgICAqL1xyXG4gICAgV2F0Y2hDaGFuZ2VBZ2dyZWdhdG9yLnByb3RvdHlwZS5oYW5kbGVFeGlzdGVuY2VGaWx0ZXIgPSBmdW5jdGlvbiAod2F0Y2hDaGFuZ2UpIHtcclxuICAgICAgICB2YXIgdGFyZ2V0SWQgPSB3YXRjaENoYW5nZS50YXJnZXRJZDtcclxuICAgICAgICB2YXIgZXhwZWN0ZWRDb3VudCA9IHdhdGNoQ2hhbmdlLmV4aXN0ZW5jZUZpbHRlci5jb3VudDtcclxuICAgICAgICB2YXIgdGFyZ2V0RGF0YSA9IHRoaXMudGFyZ2V0RGF0YUZvckFjdGl2ZVRhcmdldCh0YXJnZXRJZCk7XHJcbiAgICAgICAgaWYgKHRhcmdldERhdGEpIHtcclxuICAgICAgICAgICAgdmFyIHRhcmdldCA9IHRhcmdldERhdGEudGFyZ2V0O1xyXG4gICAgICAgICAgICBpZiAodGFyZ2V0LmlzRG9jdW1lbnRRdWVyeSgpKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXhwZWN0ZWRDb3VudCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFRoZSBleGlzdGVuY2UgZmlsdGVyIHRvbGQgdXMgdGhlIGRvY3VtZW50IGRvZXMgbm90IGV4aXN0LiBXZSBkZWR1Y2VcclxuICAgICAgICAgICAgICAgICAgICAvLyB0aGF0IHRoaXMgZG9jdW1lbnQgZG9lcyBub3QgZXhpc3QgYW5kIGFwcGx5IGEgZGVsZXRlZCBkb2N1bWVudCB0b1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIG91ciB1cGRhdGVzLiBXaXRob3V0IGFwcGx5aW5nIHRoaXMgZGVsZXRlZCBkb2N1bWVudCB0aGVyZSBtaWdodCBiZVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGFub3RoZXIgcXVlcnkgdGhhdCB3aWxsIHJhaXNlIHRoaXMgZG9jdW1lbnQgYXMgcGFydCBvZiBhIHNuYXBzaG90XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gdW50aWwgaXQgaXMgcmVzb2x2ZWQsIGVzc2VudGlhbGx5IGV4cG9zaW5nIGluY29uc2lzdGVuY3kgYmV0d2VlblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIHF1ZXJpZXMuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGtleSA9IG5ldyBEb2N1bWVudEtleSh0YXJnZXQucGF0aCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVEb2N1bWVudEZyb21UYXJnZXQodGFyZ2V0SWQsIGtleSwgbmV3IE5vRG9jdW1lbnQoa2V5LCBTbmFwc2hvdFZlcnNpb24uZm9yRGVsZXRlZERvYygpKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBhc3NlcnQoZXhwZWN0ZWRDb3VudCA9PT0gMSwgJ1NpbmdsZSBkb2N1bWVudCBleGlzdGVuY2UgZmlsdGVyIHdpdGggY291bnQ6ICcgKyBleHBlY3RlZENvdW50KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHZhciBjdXJyZW50U2l6ZSA9IHRoaXMuZ2V0Q3VycmVudERvY3VtZW50Q291bnRGb3JUYXJnZXQodGFyZ2V0SWQpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRTaXplICE9PSBleHBlY3RlZENvdW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gRXhpc3RlbmNlIGZpbHRlciBtaXNtYXRjaDogV2UgcmVzZXQgdGhlIG1hcHBpbmcgYW5kIHJhaXNlIGEgbmV3XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gc25hcHNob3Qgd2l0aCBgaXNGcm9tQ2FjaGU6dHJ1ZWAuXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXNldFRhcmdldCh0YXJnZXRJZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wZW5kaW5nVGFyZ2V0UmVzZXRzID0gdGhpcy5wZW5kaW5nVGFyZ2V0UmVzZXRzLmFkZCh0YXJnZXRJZCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBDb252ZXJ0cyB0aGUgY3VycmVudGx5IGFjY3VtdWxhdGVkIHN0YXRlIGludG8gYSByZW1vdGUgZXZlbnQgYXQgdGhlXHJcbiAgICAgKiBwcm92aWRlZCBzbmFwc2hvdCB2ZXJzaW9uLiBSZXNldHMgdGhlIGFjY3VtdWxhdGVkIGNoYW5nZXMgYmVmb3JlIHJldHVybmluZy5cclxuICAgICAqL1xyXG4gICAgV2F0Y2hDaGFuZ2VBZ2dyZWdhdG9yLnByb3RvdHlwZS5jcmVhdGVSZW1vdGVFdmVudCA9IGZ1bmN0aW9uIChzbmFwc2hvdFZlcnNpb24pIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhciB0YXJnZXRDaGFuZ2VzID0ge307XHJcbiAgICAgICAgZm9yRWFjaE51bWJlcih0aGlzLnRhcmdldFN0YXRlcywgZnVuY3Rpb24gKHRhcmdldElkLCB0YXJnZXRTdGF0ZSkge1xyXG4gICAgICAgICAgICB2YXIgdGFyZ2V0RGF0YSA9IF90aGlzLnRhcmdldERhdGFGb3JBY3RpdmVUYXJnZXQodGFyZ2V0SWQpO1xyXG4gICAgICAgICAgICBpZiAodGFyZ2V0RGF0YSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRhcmdldFN0YXRlLmN1cnJlbnQgJiYgdGFyZ2V0RGF0YS50YXJnZXQuaXNEb2N1bWVudFF1ZXJ5KCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBEb2N1bWVudCBxdWVyaWVzIGZvciBkb2N1bWVudCB0aGF0IGRvbid0IGV4aXN0IGNhbiBwcm9kdWNlIGFuIGVtcHR5XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gcmVzdWx0IHNldC4gVG8gdXBkYXRlIG91ciBsb2NhbCBjYWNoZSwgd2Ugc3ludGhlc2l6ZSBhIGRvY3VtZW50XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gZGVsZXRlIGlmIHdlIGhhdmUgbm90IHByZXZpb3VzbHkgcmVjZWl2ZWQgdGhlIGRvY3VtZW50LiBUaGlzXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gcmVzb2x2ZXMgdGhlIGxpbWJvIHN0YXRlIG9mIHRoZSBkb2N1bWVudCwgcmVtb3ZpbmcgaXQgZnJvbVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGxpbWJvRG9jdW1lbnRSZWZzLlxyXG4gICAgICAgICAgICAgICAgICAgIC8vXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gVE9ETyhkaW1vbmQpOiBJZGVhbGx5IHdlIHdvdWxkIGhhdmUgYW4gZXhwbGljaXQgbG9va3VwIHRhcmdldFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGluc3RlYWQgcmVzdWx0aW5nIGluIGFuIGV4cGxpY2l0IGRlbGV0ZSBtZXNzYWdlIGFuZCB3ZSBjb3VsZFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIHJlbW92ZSB0aGlzIHNwZWNpYWwgbG9naWMuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGtleSA9IG5ldyBEb2N1bWVudEtleSh0YXJnZXREYXRhLnRhcmdldC5wYXRoKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMucGVuZGluZ0RvY3VtZW50VXBkYXRlcy5nZXQoa2V5KSA9PT0gbnVsbCAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAhX3RoaXMudGFyZ2V0Q29udGFpbnNEb2N1bWVudCh0YXJnZXRJZCwga2V5KSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5yZW1vdmVEb2N1bWVudEZyb21UYXJnZXQodGFyZ2V0SWQsIGtleSwgbmV3IE5vRG9jdW1lbnQoa2V5LCBzbmFwc2hvdFZlcnNpb24pKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAodGFyZ2V0U3RhdGUuaGFzUGVuZGluZ0NoYW5nZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICB0YXJnZXRDaGFuZ2VzW3RhcmdldElkXSA9IHRhcmdldFN0YXRlLnRvVGFyZ2V0Q2hhbmdlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0U3RhdGUuY2xlYXJQZW5kaW5nQ2hhbmdlcygpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdmFyIHJlc29sdmVkTGltYm9Eb2N1bWVudHMgPSBkb2N1bWVudEtleVNldCgpO1xyXG4gICAgICAgIC8vIFdlIGV4dHJhY3QgdGhlIHNldCBvZiBsaW1iby1vbmx5IGRvY3VtZW50IHVwZGF0ZXMgYXMgdGhlIEdDIGxvZ2ljXHJcbiAgICAgICAgLy8gc3BlY2lhbC1jYXNlcyBkb2N1bWVudHMgdGhhdCBkbyBub3QgYXBwZWFyIGluIHRoZSB0YXJnZXQgY2FjaGUuXHJcbiAgICAgICAgLy9cclxuICAgICAgICAvLyBUT0RPKGdzb2x0aXMpOiBFeHBhbmQgb24gdGhpcyBjb21tZW50IG9uY2UgR0MgaXMgYXZhaWxhYmxlIGluIHRoZSBKU1xyXG4gICAgICAgIC8vIGNsaWVudC5cclxuICAgICAgICB0aGlzLnBlbmRpbmdEb2N1bWVudFRhcmdldE1hcHBpbmcuZm9yRWFjaChmdW5jdGlvbiAoa2V5LCB0YXJnZXRzKSB7XHJcbiAgICAgICAgICAgIHZhciBpc09ubHlMaW1ib1RhcmdldCA9IHRydWU7XHJcbiAgICAgICAgICAgIHRhcmdldHMuZm9yRWFjaFdoaWxlKGZ1bmN0aW9uICh0YXJnZXRJZCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHRhcmdldERhdGEgPSBfdGhpcy50YXJnZXREYXRhRm9yQWN0aXZlVGFyZ2V0KHRhcmdldElkKTtcclxuICAgICAgICAgICAgICAgIGlmICh0YXJnZXREYXRhICYmXHJcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0RGF0YS5wdXJwb3NlICE9PSBUYXJnZXRQdXJwb3NlLkxpbWJvUmVzb2x1dGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIGlzT25seUxpbWJvVGFyZ2V0ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBpZiAoaXNPbmx5TGltYm9UYXJnZXQpIHtcclxuICAgICAgICAgICAgICAgIHJlc29sdmVkTGltYm9Eb2N1bWVudHMgPSByZXNvbHZlZExpbWJvRG9jdW1lbnRzLmFkZChrZXkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdmFyIHJlbW90ZUV2ZW50ID0gbmV3IFJlbW90ZUV2ZW50KHNuYXBzaG90VmVyc2lvbiwgdGFyZ2V0Q2hhbmdlcywgdGhpcy5wZW5kaW5nVGFyZ2V0UmVzZXRzLCB0aGlzLnBlbmRpbmdEb2N1bWVudFVwZGF0ZXMsIHJlc29sdmVkTGltYm9Eb2N1bWVudHMpO1xyXG4gICAgICAgIHRoaXMucGVuZGluZ0RvY3VtZW50VXBkYXRlcyA9IG1heWJlRG9jdW1lbnRNYXAoKTtcclxuICAgICAgICB0aGlzLnBlbmRpbmdEb2N1bWVudFRhcmdldE1hcHBpbmcgPSBkb2N1bWVudFRhcmdldE1hcCgpO1xyXG4gICAgICAgIHRoaXMucGVuZGluZ1RhcmdldFJlc2V0cyA9IG5ldyBTb3J0ZWRTZXQocHJpbWl0aXZlQ29tcGFyYXRvcik7XHJcbiAgICAgICAgcmV0dXJuIHJlbW90ZUV2ZW50O1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQWRkcyB0aGUgcHJvdmlkZWQgZG9jdW1lbnQgdG8gdGhlIGludGVybmFsIGxpc3Qgb2YgZG9jdW1lbnQgdXBkYXRlcyBhbmRcclxuICAgICAqIGl0cyBkb2N1bWVudCBrZXkgdG8gdGhlIGdpdmVuIHRhcmdldCdzIG1hcHBpbmcuXHJcbiAgICAgKi9cclxuICAgIC8vIFZpc2libGUgZm9yIHRlc3RpbmcuXHJcbiAgICBXYXRjaENoYW5nZUFnZ3JlZ2F0b3IucHJvdG90eXBlLmFkZERvY3VtZW50VG9UYXJnZXQgPSBmdW5jdGlvbiAodGFyZ2V0SWQsIGRvY3VtZW50KSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmlzQWN0aXZlVGFyZ2V0KHRhcmdldElkKSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBjaGFuZ2VUeXBlID0gdGhpcy50YXJnZXRDb250YWluc0RvY3VtZW50KHRhcmdldElkLCBkb2N1bWVudC5rZXkpXHJcbiAgICAgICAgICAgID8gQ2hhbmdlVHlwZS5Nb2RpZmllZFxyXG4gICAgICAgICAgICA6IENoYW5nZVR5cGUuQWRkZWQ7XHJcbiAgICAgICAgdmFyIHRhcmdldFN0YXRlID0gdGhpcy5lbnN1cmVUYXJnZXRTdGF0ZSh0YXJnZXRJZCk7XHJcbiAgICAgICAgdGFyZ2V0U3RhdGUuYWRkRG9jdW1lbnRDaGFuZ2UoZG9jdW1lbnQua2V5LCBjaGFuZ2VUeXBlKTtcclxuICAgICAgICB0aGlzLnBlbmRpbmdEb2N1bWVudFVwZGF0ZXMgPSB0aGlzLnBlbmRpbmdEb2N1bWVudFVwZGF0ZXMuaW5zZXJ0KGRvY3VtZW50LmtleSwgZG9jdW1lbnQpO1xyXG4gICAgICAgIHRoaXMucGVuZGluZ0RvY3VtZW50VGFyZ2V0TWFwcGluZyA9IHRoaXMucGVuZGluZ0RvY3VtZW50VGFyZ2V0TWFwcGluZy5pbnNlcnQoZG9jdW1lbnQua2V5LCB0aGlzLmVuc3VyZURvY3VtZW50VGFyZ2V0TWFwcGluZyhkb2N1bWVudC5rZXkpLmFkZCh0YXJnZXRJZCkpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmVtb3ZlcyB0aGUgcHJvdmlkZWQgZG9jdW1lbnQgZnJvbSB0aGUgdGFyZ2V0IG1hcHBpbmcuIElmIHRoZVxyXG4gICAgICogZG9jdW1lbnQgbm8gbG9uZ2VyIG1hdGNoZXMgdGhlIHRhcmdldCwgYnV0IHRoZSBkb2N1bWVudCdzIHN0YXRlIGlzIHN0aWxsXHJcbiAgICAgKiBrbm93biAoZS5nLiB3ZSBrbm93IHRoYXQgdGhlIGRvY3VtZW50IHdhcyBkZWxldGVkIG9yIHdlIHJlY2VpdmVkIHRoZSBjaGFuZ2VcclxuICAgICAqIHRoYXQgY2F1c2VkIHRoZSBmaWx0ZXIgbWlzbWF0Y2gpLCB0aGUgbmV3IGRvY3VtZW50IGNhbiBiZSBwcm92aWRlZFxyXG4gICAgICogdG8gdXBkYXRlIHRoZSByZW1vdGUgZG9jdW1lbnQgY2FjaGUuXHJcbiAgICAgKi9cclxuICAgIC8vIFZpc2libGUgZm9yIHRlc3RpbmcuXHJcbiAgICBXYXRjaENoYW5nZUFnZ3JlZ2F0b3IucHJvdG90eXBlLnJlbW92ZURvY3VtZW50RnJvbVRhcmdldCA9IGZ1bmN0aW9uICh0YXJnZXRJZCwga2V5LCB1cGRhdGVkRG9jdW1lbnQpIHtcclxuICAgICAgICBpZiAoIXRoaXMuaXNBY3RpdmVUYXJnZXQodGFyZ2V0SWQpKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIHRhcmdldFN0YXRlID0gdGhpcy5lbnN1cmVUYXJnZXRTdGF0ZSh0YXJnZXRJZCk7XHJcbiAgICAgICAgaWYgKHRoaXMudGFyZ2V0Q29udGFpbnNEb2N1bWVudCh0YXJnZXRJZCwga2V5KSkge1xyXG4gICAgICAgICAgICB0YXJnZXRTdGF0ZS5hZGREb2N1bWVudENoYW5nZShrZXksIENoYW5nZVR5cGUuUmVtb3ZlZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBUaGUgZG9jdW1lbnQgbWF5IGhhdmUgZW50ZXJlZCBhbmQgbGVmdCB0aGUgdGFyZ2V0IGJlZm9yZSB3ZSByYWlzZWQgYVxyXG4gICAgICAgICAgICAvLyBzbmFwc2hvdCwgc28gd2UgY2FuIGp1c3QgaWdub3JlIHRoZSBjaGFuZ2UuXHJcbiAgICAgICAgICAgIHRhcmdldFN0YXRlLnJlbW92ZURvY3VtZW50Q2hhbmdlKGtleSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMucGVuZGluZ0RvY3VtZW50VGFyZ2V0TWFwcGluZyA9IHRoaXMucGVuZGluZ0RvY3VtZW50VGFyZ2V0TWFwcGluZy5pbnNlcnQoa2V5LCB0aGlzLmVuc3VyZURvY3VtZW50VGFyZ2V0TWFwcGluZyhrZXkpLmRlbGV0ZSh0YXJnZXRJZCkpO1xyXG4gICAgICAgIGlmICh1cGRhdGVkRG9jdW1lbnQpIHtcclxuICAgICAgICAgICAgdGhpcy5wZW5kaW5nRG9jdW1lbnRVcGRhdGVzID0gdGhpcy5wZW5kaW5nRG9jdW1lbnRVcGRhdGVzLmluc2VydChrZXksIHVwZGF0ZWREb2N1bWVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFdhdGNoQ2hhbmdlQWdncmVnYXRvci5wcm90b3R5cGUucmVtb3ZlVGFyZ2V0ID0gZnVuY3Rpb24gKHRhcmdldElkKSB7XHJcbiAgICAgICAgZGVsZXRlIHRoaXMudGFyZ2V0U3RhdGVzW3RhcmdldElkXTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdGhlIGN1cnJlbnQgY291bnQgb2YgZG9jdW1lbnRzIGluIHRoZSB0YXJnZXQuIFRoaXMgaW5jbHVkZXMgYm90aFxyXG4gICAgICogdGhlIG51bWJlciBvZiBkb2N1bWVudHMgdGhhdCB0aGUgTG9jYWxTdG9yZSBjb25zaWRlcnMgdG8gYmUgcGFydCBvZiB0aGVcclxuICAgICAqIHRhcmdldCBhcyB3ZWxsIGFzIGFueSBhY2N1bXVsYXRlZCBjaGFuZ2VzLlxyXG4gICAgICovXHJcbiAgICBXYXRjaENoYW5nZUFnZ3JlZ2F0b3IucHJvdG90eXBlLmdldEN1cnJlbnREb2N1bWVudENvdW50Rm9yVGFyZ2V0ID0gZnVuY3Rpb24gKHRhcmdldElkKSB7XHJcbiAgICAgICAgdmFyIHRhcmdldFN0YXRlID0gdGhpcy5lbnN1cmVUYXJnZXRTdGF0ZSh0YXJnZXRJZCk7XHJcbiAgICAgICAgdmFyIHRhcmdldENoYW5nZSA9IHRhcmdldFN0YXRlLnRvVGFyZ2V0Q2hhbmdlKCk7XHJcbiAgICAgICAgcmV0dXJuICh0aGlzLm1ldGFkYXRhUHJvdmlkZXIuZ2V0UmVtb3RlS2V5c0ZvclRhcmdldCh0YXJnZXRJZCkuc2l6ZSArXHJcbiAgICAgICAgICAgIHRhcmdldENoYW5nZS5hZGRlZERvY3VtZW50cy5zaXplIC1cclxuICAgICAgICAgICAgdGFyZ2V0Q2hhbmdlLnJlbW92ZWREb2N1bWVudHMuc2l6ZSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBJbmNyZW1lbnQgdGhlIG51bWJlciBvZiBhY2tzIG5lZWRlZCBmcm9tIHdhdGNoIGJlZm9yZSB3ZSBjYW4gY29uc2lkZXIgdGhlXHJcbiAgICAgKiBzZXJ2ZXIgdG8gYmUgJ2luLXN5bmMnIHdpdGggdGhlIGNsaWVudCdzIGFjdGl2ZSB0YXJnZXRzLlxyXG4gICAgICovXHJcbiAgICBXYXRjaENoYW5nZUFnZ3JlZ2F0b3IucHJvdG90eXBlLnJlY29yZFBlbmRpbmdUYXJnZXRSZXF1ZXN0ID0gZnVuY3Rpb24gKHRhcmdldElkKSB7XHJcbiAgICAgICAgLy8gRm9yIGVhY2ggcmVxdWVzdCB3ZSBnZXQgd2UgbmVlZCB0byByZWNvcmQgd2UgbmVlZCBhIHJlc3BvbnNlIGZvciBpdC5cclxuICAgICAgICB2YXIgdGFyZ2V0U3RhdGUgPSB0aGlzLmVuc3VyZVRhcmdldFN0YXRlKHRhcmdldElkKTtcclxuICAgICAgICB0YXJnZXRTdGF0ZS5yZWNvcmRQZW5kaW5nVGFyZ2V0UmVxdWVzdCgpO1xyXG4gICAgfTtcclxuICAgIFdhdGNoQ2hhbmdlQWdncmVnYXRvci5wcm90b3R5cGUuZW5zdXJlVGFyZ2V0U3RhdGUgPSBmdW5jdGlvbiAodGFyZ2V0SWQpIHtcclxuICAgICAgICBpZiAoIXRoaXMudGFyZ2V0U3RhdGVzW3RhcmdldElkXSkge1xyXG4gICAgICAgICAgICB0aGlzLnRhcmdldFN0YXRlc1t0YXJnZXRJZF0gPSBuZXcgVGFyZ2V0U3RhdGUoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudGFyZ2V0U3RhdGVzW3RhcmdldElkXTtcclxuICAgIH07XHJcbiAgICBXYXRjaENoYW5nZUFnZ3JlZ2F0b3IucHJvdG90eXBlLmVuc3VyZURvY3VtZW50VGFyZ2V0TWFwcGluZyA9IGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICB2YXIgdGFyZ2V0TWFwcGluZyA9IHRoaXMucGVuZGluZ0RvY3VtZW50VGFyZ2V0TWFwcGluZy5nZXQoa2V5KTtcclxuICAgICAgICBpZiAoIXRhcmdldE1hcHBpbmcpIHtcclxuICAgICAgICAgICAgdGFyZ2V0TWFwcGluZyA9IG5ldyBTb3J0ZWRTZXQocHJpbWl0aXZlQ29tcGFyYXRvcik7XHJcbiAgICAgICAgICAgIHRoaXMucGVuZGluZ0RvY3VtZW50VGFyZ2V0TWFwcGluZyA9IHRoaXMucGVuZGluZ0RvY3VtZW50VGFyZ2V0TWFwcGluZy5pbnNlcnQoa2V5LCB0YXJnZXRNYXBwaW5nKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRhcmdldE1hcHBpbmc7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBWZXJpZmllcyB0aGF0IHRoZSB1c2VyIGlzIHN0aWxsIGludGVyZXN0ZWQgaW4gdGhpcyB0YXJnZXQgKGJ5IGNhbGxpbmdcclxuICAgICAqIGBnZXRUYXJnZXREYXRhRm9yVGFyZ2V0KClgKSBhbmQgdGhhdCB3ZSBhcmUgbm90IHdhaXRpbmcgZm9yIHBlbmRpbmcgQUREc1xyXG4gICAgICogZnJvbSB3YXRjaC5cclxuICAgICAqL1xyXG4gICAgV2F0Y2hDaGFuZ2VBZ2dyZWdhdG9yLnByb3RvdHlwZS5pc0FjdGl2ZVRhcmdldCA9IGZ1bmN0aW9uICh0YXJnZXRJZCkge1xyXG4gICAgICAgIHZhciB0YXJnZXRBY3RpdmUgPSB0aGlzLnRhcmdldERhdGFGb3JBY3RpdmVUYXJnZXQodGFyZ2V0SWQpICE9PSBudWxsO1xyXG4gICAgICAgIGlmICghdGFyZ2V0QWN0aXZlKSB7XHJcbiAgICAgICAgICAgIGRlYnVnKExPR19UQUckNywgJ0RldGVjdGVkIGluYWN0aXZlIHRhcmdldCcsIHRhcmdldElkKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRhcmdldEFjdGl2ZTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdGhlIFRhcmdldERhdGEgZm9yIGFuIGFjdGl2ZSB0YXJnZXQgKGkuZS4gYSB0YXJnZXQgdGhhdCB0aGUgdXNlclxyXG4gICAgICogaXMgc3RpbGwgaW50ZXJlc3RlZCBpbiB0aGF0IGhhcyBubyBvdXRzdGFuZGluZyB0YXJnZXQgY2hhbmdlIHJlcXVlc3RzKS5cclxuICAgICAqL1xyXG4gICAgV2F0Y2hDaGFuZ2VBZ2dyZWdhdG9yLnByb3RvdHlwZS50YXJnZXREYXRhRm9yQWN0aXZlVGFyZ2V0ID0gZnVuY3Rpb24gKHRhcmdldElkKSB7XHJcbiAgICAgICAgdmFyIHRhcmdldFN0YXRlID0gdGhpcy50YXJnZXRTdGF0ZXNbdGFyZ2V0SWRdO1xyXG4gICAgICAgIHJldHVybiB0YXJnZXRTdGF0ZSAmJiB0YXJnZXRTdGF0ZS5pc1BlbmRpbmdcclxuICAgICAgICAgICAgPyBudWxsXHJcbiAgICAgICAgICAgIDogdGhpcy5tZXRhZGF0YVByb3ZpZGVyLmdldFRhcmdldERhdGFGb3JUYXJnZXQodGFyZ2V0SWQpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmVzZXRzIHRoZSBzdGF0ZSBvZiBhIFdhdGNoIHRhcmdldCB0byBpdHMgaW5pdGlhbCBzdGF0ZSAoZS5nLiBzZXRzXHJcbiAgICAgKiAnY3VycmVudCcgdG8gZmFsc2UsIGNsZWFycyB0aGUgcmVzdW1lIHRva2VuIGFuZCByZW1vdmVzIGl0cyB0YXJnZXQgbWFwcGluZ1xyXG4gICAgICogZnJvbSBhbGwgZG9jdW1lbnRzKS5cclxuICAgICAqL1xyXG4gICAgV2F0Y2hDaGFuZ2VBZ2dyZWdhdG9yLnByb3RvdHlwZS5yZXNldFRhcmdldCA9IGZ1bmN0aW9uICh0YXJnZXRJZCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgYXNzZXJ0KCF0aGlzLnRhcmdldFN0YXRlc1t0YXJnZXRJZF0uaXNQZW5kaW5nLCAnU2hvdWxkIG9ubHkgcmVzZXQgYWN0aXZlIHRhcmdldHMnKTtcclxuICAgICAgICB0aGlzLnRhcmdldFN0YXRlc1t0YXJnZXRJZF0gPSBuZXcgVGFyZ2V0U3RhdGUoKTtcclxuICAgICAgICAvLyBUcmlnZ2VyIHJlbW92YWwgZm9yIGFueSBkb2N1bWVudHMgY3VycmVudGx5IG1hcHBlZCB0byB0aGlzIHRhcmdldC5cclxuICAgICAgICAvLyBUaGVzZSByZW1vdmFscyB3aWxsIGJlIHBhcnQgb2YgdGhlIGluaXRpYWwgc25hcHNob3QgaWYgV2F0Y2ggZG9lcyBub3RcclxuICAgICAgICAvLyByZXNlbmQgdGhlc2UgZG9jdW1lbnRzLlxyXG4gICAgICAgIHZhciBleGlzdGluZ0tleXMgPSB0aGlzLm1ldGFkYXRhUHJvdmlkZXIuZ2V0UmVtb3RlS2V5c0ZvclRhcmdldCh0YXJnZXRJZCk7XHJcbiAgICAgICAgZXhpc3RpbmdLZXlzLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgICAgICBfdGhpcy5yZW1vdmVEb2N1bWVudEZyb21UYXJnZXQodGFyZ2V0SWQsIGtleSwgLyp1cGRhdGVkRG9jdW1lbnQ9Ki8gbnVsbCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHdoZXRoZXIgdGhlIExvY2FsU3RvcmUgY29uc2lkZXJzIHRoZSBkb2N1bWVudCB0byBiZSBwYXJ0IG9mIHRoZVxyXG4gICAgICogc3BlY2lmaWVkIHRhcmdldC5cclxuICAgICAqL1xyXG4gICAgV2F0Y2hDaGFuZ2VBZ2dyZWdhdG9yLnByb3RvdHlwZS50YXJnZXRDb250YWluc0RvY3VtZW50ID0gZnVuY3Rpb24gKHRhcmdldElkLCBrZXkpIHtcclxuICAgICAgICB2YXIgZXhpc3RpbmdLZXlzID0gdGhpcy5tZXRhZGF0YVByb3ZpZGVyLmdldFJlbW90ZUtleXNGb3JUYXJnZXQodGFyZ2V0SWQpO1xyXG4gICAgICAgIHJldHVybiBleGlzdGluZ0tleXMuaGFzKGtleSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFdhdGNoQ2hhbmdlQWdncmVnYXRvcjtcclxufSgpKTtcclxuZnVuY3Rpb24gZG9jdW1lbnRUYXJnZXRNYXAoKSB7XHJcbiAgICByZXR1cm4gbmV3IFNvcnRlZE1hcChEb2N1bWVudEtleS5jb21wYXJhdG9yKTtcclxufVxyXG5mdW5jdGlvbiBzbmFwc2hvdENoYW5nZXNNYXAoKSB7XHJcbiAgICByZXR1cm4gbmV3IFNvcnRlZE1hcChEb2N1bWVudEtleS5jb21wYXJhdG9yKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxudmFyIExPR19UQUckOCA9ICdSZW1vdGVTdG9yZSc7XHJcbi8vIFRPRE8oYi8zNTg1MzQwMik6IE5lZ290aWF0ZSB0aGlzIHdpdGggdGhlIHN0cmVhbS5cclxudmFyIE1BWF9QRU5ESU5HX1dSSVRFUyA9IDEwO1xyXG4vKipcclxuICogUmVtb3RlU3RvcmUgLSBBbiBpbnRlcmZhY2UgdG8gcmVtb3RlbHkgc3RvcmVkIGRhdGEsIGJhc2ljYWxseSBwcm92aWRpbmcgYVxyXG4gKiB3cmFwcGVyIGFyb3VuZCB0aGUgRGF0YXN0b3JlIHRoYXQgaXMgbW9yZSByZWxpYWJsZSBmb3IgdGhlIHJlc3Qgb2YgdGhlXHJcbiAqIHN5c3RlbS5cclxuICpcclxuICogUmVtb3RlU3RvcmUgaXMgcmVzcG9uc2libGUgZm9yIG1haW50YWluaW5nIHRoZSBjb25uZWN0aW9uIHRvIHRoZSBzZXJ2ZXIuXHJcbiAqIC0gbWFpbnRhaW5pbmcgYSBsaXN0IG9mIGFjdGl2ZSBsaXN0ZW5zLlxyXG4gKiAtIHJlY29ubmVjdGluZyB3aGVuIHRoZSBjb25uZWN0aW9uIGlzIGRyb3BwZWQuXHJcbiAqIC0gcmVzdW1pbmcgYWxsIHRoZSBhY3RpdmUgbGlzdGVucyBvbiByZWNvbm5lY3QuXHJcbiAqXHJcbiAqIFJlbW90ZVN0b3JlIGhhbmRsZXMgYWxsIGluY29taW5nIGV2ZW50cyBmcm9tIHRoZSBEYXRhc3RvcmUuXHJcbiAqIC0gbGlzdGVuaW5nIHRvIHRoZSB3YXRjaCBzdHJlYW0gYW5kIHJlcGFja2FnaW5nIHRoZSBldmVudHMgYXMgUmVtb3RlRXZlbnRzXHJcbiAqIC0gbm90aWZ5aW5nIFN5bmNFbmdpbmUgb2YgYW55IGNoYW5nZXMgdG8gdGhlIGFjdGl2ZSBsaXN0ZW5zLlxyXG4gKlxyXG4gKiBSZW1vdGVTdG9yZSB0YWtlcyB3cml0ZXMgZnJvbSBvdGhlciBjb21wb25lbnRzIGFuZCBoYW5kbGVzIHRoZW0gcmVsaWFibHkuXHJcbiAqIC0gcHVsbGluZyBwZW5kaW5nIG11dGF0aW9ucyBmcm9tIExvY2FsU3RvcmUgYW5kIHNlbmRpbmcgdGhlbSB0byBEYXRhc3RvcmUuXHJcbiAqIC0gcmV0cnlpbmcgbXV0YXRpb25zIHRoYXQgZmFpbGVkIGJlY2F1c2Ugb2YgbmV0d29yayBwcm9ibGVtcy5cclxuICogLSBhY2tpbmcgbXV0YXRpb25zIHRvIHRoZSBTeW5jRW5naW5lIG9uY2UgdGhleSBhcmUgYWNjZXB0ZWQgb3IgcmVqZWN0ZWQuXHJcbiAqL1xyXG52YXIgUmVtb3RlU3RvcmUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBSZW1vdGVTdG9yZShcclxuICAgIC8qKlxyXG4gICAgICogVGhlIGxvY2FsIHN0b3JlLCB1c2VkIHRvIGZpbGwgdGhlIHdyaXRlIHBpcGVsaW5lIHdpdGggb3V0Ym91bmQgbXV0YXRpb25zLlxyXG4gICAgICovXHJcbiAgICBsb2NhbFN0b3JlLCBcclxuICAgIC8qKiBUaGUgY2xpZW50LXNpZGUgcHJveHkgZm9yIGludGVyYWN0aW5nIHdpdGggdGhlIGJhY2tlbmQuICovXHJcbiAgICBkYXRhc3RvcmUsIGFzeW5jUXVldWUsIG9ubGluZVN0YXRlSGFuZGxlciwgY29ubmVjdGl2aXR5TW9uaXRvcikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5sb2NhbFN0b3JlID0gbG9jYWxTdG9yZTtcclxuICAgICAgICB0aGlzLmRhdGFzdG9yZSA9IGRhdGFzdG9yZTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBBIGxpc3Qgb2YgdXAgdG8gTUFYX1BFTkRJTkdfV1JJVEVTIHdyaXRlcyB0aGF0IHdlIGhhdmUgZmV0Y2hlZCBmcm9tIHRoZVxyXG4gICAgICAgICAqIExvY2FsU3RvcmUgdmlhIGZpbGxXcml0ZVBpcGVsaW5lKCkgYW5kIGhhdmUgb3Igd2lsbCBzZW5kIHRvIHRoZSB3cml0ZVxyXG4gICAgICAgICAqIHN0cmVhbS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFdoZW5ldmVyIHdyaXRlUGlwZWxpbmUubGVuZ3RoID4gMCB0aGUgUmVtb3RlU3RvcmUgd2lsbCBhdHRlbXB0IHRvIHN0YXJ0IG9yXHJcbiAgICAgICAgICogcmVzdGFydCB0aGUgd3JpdGUgc3RyZWFtLiBXaGVuIHRoZSBzdHJlYW0gaXMgZXN0YWJsaXNoZWQgdGhlIHdyaXRlcyBpbiB0aGVcclxuICAgICAgICAgKiBwaXBlbGluZSB3aWxsIGJlIHNlbnQgaW4gb3JkZXIuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBXcml0ZXMgcmVtYWluIGluIHdyaXRlUGlwZWxpbmUgdW50aWwgdGhleSBhcmUgYWNrbm93bGVkZ2VkIGJ5IHRoZSBiYWNrZW5kXHJcbiAgICAgICAgICogYW5kIHRodXMgd2lsbCBhdXRvbWF0aWNhbGx5IGJlIHJlLXNlbnQgaWYgdGhlIHN0cmVhbSBpcyBpbnRlcnJ1cHRlZCAvXHJcbiAgICAgICAgICogcmVzdGFydGVkIGJlZm9yZSB0aGV5J3JlIGFja25vd2xlZGdlZC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFdyaXRlIHJlc3BvbnNlcyBmcm9tIHRoZSBiYWNrZW5kIGFyZSBsaW5rZWQgdG8gdGhlaXIgb3JpZ2luYXRpbmcgcmVxdWVzdFxyXG4gICAgICAgICAqIHB1cmVseSBiYXNlZCBvbiBvcmRlciwgYW5kIHNvIHdlIGNhbiBqdXN0IHNoaWZ0KCkgd3JpdGVzIGZyb20gdGhlIGZyb250IG9mXHJcbiAgICAgICAgICogdGhlIHdyaXRlUGlwZWxpbmUgYXMgd2UgcmVjZWl2ZSByZXNwb25zZXMuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy53cml0ZVBpcGVsaW5lID0gW107XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQSBtYXBwaW5nIG9mIHdhdGNoZWQgdGFyZ2V0cyB0aGF0IHRoZSBjbGllbnQgY2FyZXMgYWJvdXQgdHJhY2tpbmcgYW5kIHRoZVxyXG4gICAgICAgICAqIHVzZXIgaGFzIGV4cGxpY2l0bHkgY2FsbGVkIGEgJ2xpc3RlbicgZm9yIHRoaXMgdGFyZ2V0LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogVGhlc2UgdGFyZ2V0cyBtYXkgb3IgbWF5IG5vdCBoYXZlIGJlZW4gc2VudCB0byBvciBhY2tub3dsZWRnZWQgYnkgdGhlXHJcbiAgICAgICAgICogc2VydmVyLiBPbiByZS1lc3RhYmxpc2hpbmcgdGhlIGxpc3RlbiBzdHJlYW0sIHRoZXNlIHRhcmdldHMgc2hvdWxkIGJlIHNlbnRcclxuICAgICAgICAgKiB0byB0aGUgc2VydmVyLiBUaGUgdGFyZ2V0cyByZW1vdmVkIHdpdGggdW5saXN0ZW5zIGFyZSByZW1vdmVkIGVhZ2VybHlcclxuICAgICAgICAgKiB3aXRob3V0IHdhaXRpbmcgZm9yIGNvbmZpcm1hdGlvbiBmcm9tIHRoZSBsaXN0ZW4gc3RyZWFtLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMubGlzdGVuVGFyZ2V0cyA9IHt9O1xyXG4gICAgICAgIHRoaXMud2F0Y2hDaGFuZ2VBZ2dyZWdhdG9yID0gbnVsbDtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBTZXQgdG8gdHJ1ZSBieSBlbmFibGVOZXR3b3JrKCkgYW5kIGZhbHNlIGJ5IGRpc2FibGVOZXR3b3JrKCkgYW5kIGluZGljYXRlc1xyXG4gICAgICAgICAqIHRoZSB1c2VyLXByZWZlcnJlZCBuZXR3b3JrIHN0YXRlLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMubmV0d29ya0VuYWJsZWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmlzUHJpbWFyeSA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuY29ubmVjdGl2aXR5TW9uaXRvciA9IGNvbm5lY3Rpdml0eU1vbml0b3I7XHJcbiAgICAgICAgdGhpcy5jb25uZWN0aXZpdHlNb25pdG9yLmFkZENhbGxiYWNrKGZ1bmN0aW9uIChzdGF0dXMpIHtcclxuICAgICAgICAgICAgYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRzbGliLl9fYXdhaXRlcihfdGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0c2xpYi5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5jYW5Vc2VOZXR3b3JrKCkpIHJldHVybiBbMyAvKmJyZWFrKi8sIDJdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVidWcoTE9HX1RBRyQ4LCAnUmVzdGFydGluZyBzdHJlYW1zIGZvciBuZXR3b3JrIHJlYWNoYWJpbGl0eSBjaGFuZ2UuJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLnJlc3RhcnROZXR3b3JrKCldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTsgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5vbmxpbmVTdGF0ZVRyYWNrZXIgPSBuZXcgT25saW5lU3RhdGVUcmFja2VyKGFzeW5jUXVldWUsIG9ubGluZVN0YXRlSGFuZGxlcik7XHJcbiAgICAgICAgLy8gQ3JlYXRlIHN0cmVhbXMgKGJ1dCBub3RlIHRoZXkncmUgbm90IHN0YXJ0ZWQgeWV0KS5cclxuICAgICAgICB0aGlzLndhdGNoU3RyZWFtID0gdGhpcy5kYXRhc3RvcmUubmV3UGVyc2lzdGVudFdhdGNoU3RyZWFtKHtcclxuICAgICAgICAgICAgb25PcGVuOiB0aGlzLm9uV2F0Y2hTdHJlYW1PcGVuLmJpbmQodGhpcyksXHJcbiAgICAgICAgICAgIG9uQ2xvc2U6IHRoaXMub25XYXRjaFN0cmVhbUNsb3NlLmJpbmQodGhpcyksXHJcbiAgICAgICAgICAgIG9uV2F0Y2hDaGFuZ2U6IHRoaXMub25XYXRjaFN0cmVhbUNoYW5nZS5iaW5kKHRoaXMpXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy53cml0ZVN0cmVhbSA9IHRoaXMuZGF0YXN0b3JlLm5ld1BlcnNpc3RlbnRXcml0ZVN0cmVhbSh7XHJcbiAgICAgICAgICAgIG9uT3BlbjogdGhpcy5vbldyaXRlU3RyZWFtT3Blbi5iaW5kKHRoaXMpLFxyXG4gICAgICAgICAgICBvbkNsb3NlOiB0aGlzLm9uV3JpdGVTdHJlYW1DbG9zZS5iaW5kKHRoaXMpLFxyXG4gICAgICAgICAgICBvbkhhbmRzaGFrZUNvbXBsZXRlOiB0aGlzLm9uV3JpdGVIYW5kc2hha2VDb21wbGV0ZS5iaW5kKHRoaXMpLFxyXG4gICAgICAgICAgICBvbk11dGF0aW9uUmVzdWx0OiB0aGlzLm9uTXV0YXRpb25SZXN1bHQuYmluZCh0aGlzKVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBTdGFydHMgdXAgdGhlIHJlbW90ZSBzdG9yZSwgY3JlYXRpbmcgc3RyZWFtcywgcmVzdG9yaW5nIHN0YXRlIGZyb21cclxuICAgICAqIExvY2FsU3RvcmUsIGV0Yy5cclxuICAgICAqL1xyXG4gICAgUmVtb3RlU3RvcmUucHJvdG90eXBlLnN0YXJ0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmVuYWJsZU5ldHdvcmsoKTtcclxuICAgIH07XHJcbiAgICAvKiogUmUtZW5hYmxlcyB0aGUgbmV0d29yay4gSWRlbXBvdGVudC4gKi9cclxuICAgIFJlbW90ZVN0b3JlLnByb3RvdHlwZS5lbmFibGVOZXR3b3JrID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0c2xpYi5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgICAgICByZXR1cm4gdHNsaWIuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9iKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9iLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5ldHdvcmtFbmFibGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLmNhblVzZU5ldHdvcmsoKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgM107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hID0gdGhpcy53cml0ZVN0cmVhbTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5sb2NhbFN0b3JlLmdldExhc3RTdHJlYW1Ub2tlbigpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLmxhc3RTdHJlYW1Ub2tlbiA9IF9iLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuc2hvdWxkU3RhcnRXYXRjaFN0cmVhbSgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0V2F0Y2hTdHJlYW0oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub25saW5lU3RhdGVUcmFja2VyLnNldChPbmxpbmVTdGF0ZS5Vbmtub3duKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGlzIHdpbGwgc3RhcnQgdGhlIHdyaXRlIHN0cmVhbSBpZiBuZWNlc3NhcnkuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuZmlsbFdyaXRlUGlwZWxpbmUoKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGlzIHdpbGwgc3RhcnQgdGhlIHdyaXRlIHN0cmVhbSBpZiBuZWNlc3NhcnkuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9iLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2IubGFiZWwgPSAzO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFRlbXBvcmFyaWx5IGRpc2FibGVzIHRoZSBuZXR3b3JrLiBUaGUgbmV0d29yayBjYW4gYmUgcmUtZW5hYmxlZCB1c2luZ1xyXG4gICAgICogZW5hYmxlTmV0d29yaygpLlxyXG4gICAgICovXHJcbiAgICBSZW1vdGVTdG9yZS5wcm90b3R5cGUuZGlzYWJsZU5ldHdvcmsgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRzbGliLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHNsaWIuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5ldHdvcmtFbmFibGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuZGlzYWJsZU5ldHdvcmtJbnRlcm5hbCgpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2V0IHRoZSBPbmxpbmVTdGF0ZSB0byBPZmZsaW5lIHNvIGdldCgpcyByZXR1cm4gZnJvbSBjYWNoZSwgZXRjLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9ubGluZVN0YXRlVHJhY2tlci5zZXQoT25saW5lU3RhdGUuT2ZmbGluZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgUmVtb3RlU3RvcmUucHJvdG90eXBlLmRpc2FibGVOZXR3b3JrSW50ZXJuYWwgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRzbGliLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHNsaWIuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOiByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLndyaXRlU3RyZWFtLnN0b3AoKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMud2F0Y2hTdHJlYW0uc3RvcCgpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMud3JpdGVQaXBlbGluZS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWJ1ZyhMT0dfVEFHJDgsIFwiU3RvcHBpbmcgd3JpdGUgc3RyZWFtIHdpdGggXCIgKyB0aGlzLndyaXRlUGlwZWxpbmUubGVuZ3RoICsgXCIgcGVuZGluZyB3cml0ZXNcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLndyaXRlUGlwZWxpbmUgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNsZWFuVXBXYXRjaFN0cmVhbVN0YXRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgUmVtb3RlU3RvcmUucHJvdG90eXBlLnNodXRkb3duID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0c2xpYi5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVidWcoTE9HX1RBRyQ4LCAnUmVtb3RlU3RvcmUgc2h1dHRpbmcgZG93bi4nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5uZXR3b3JrRW5hYmxlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmRpc2FibGVOZXR3b3JrSW50ZXJuYWwoKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29ubmVjdGl2aXR5TW9uaXRvci5zaHV0ZG93bigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBTZXQgdGhlIE9ubGluZVN0YXRlIHRvIFVua25vd24gKHJhdGhlciB0aGFuIE9mZmxpbmUpIHRvIGF2b2lkIHBvdGVudGlhbGx5XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRyaWdnZXJpbmcgc3B1cmlvdXMgbGlzdGVuZXIgZXZlbnRzIHdpdGggY2FjaGVkIGRhdGEsIGV0Yy5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vbmxpbmVTdGF0ZVRyYWNrZXIuc2V0KE9ubGluZVN0YXRlLlVua25vd24pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogU3RhcnRzIG5ldyBsaXN0ZW4gZm9yIHRoZSBnaXZlbiB0YXJnZXQuIFVzZXMgcmVzdW1lIHRva2VuIGlmIHByb3ZpZGVkLiBJdFxyXG4gICAgICogaXMgYSBuby1vcCBpZiB0aGUgdGFyZ2V0IG9mIGdpdmVuIGBUYXJnZXREYXRhYCBpcyBhbHJlYWR5IGJlaW5nIGxpc3RlbmVkIHRvLlxyXG4gICAgICovXHJcbiAgICBSZW1vdGVTdG9yZS5wcm90b3R5cGUubGlzdGVuID0gZnVuY3Rpb24gKHRhcmdldERhdGEpIHtcclxuICAgICAgICBpZiAoY29udGFpbnModGhpcy5saXN0ZW5UYXJnZXRzLCB0YXJnZXREYXRhLnRhcmdldElkKSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIE1hcmsgdGhpcyBhcyBzb21ldGhpbmcgdGhlIGNsaWVudCBpcyBjdXJyZW50bHkgbGlzdGVuaW5nIGZvci5cclxuICAgICAgICB0aGlzLmxpc3RlblRhcmdldHNbdGFyZ2V0RGF0YS50YXJnZXRJZF0gPSB0YXJnZXREYXRhO1xyXG4gICAgICAgIGlmICh0aGlzLnNob3VsZFN0YXJ0V2F0Y2hTdHJlYW0oKSkge1xyXG4gICAgICAgICAgICAvLyBUaGUgbGlzdGVuIHdpbGwgYmUgc2VudCBpbiBvbldhdGNoU3RyZWFtT3BlblxyXG4gICAgICAgICAgICB0aGlzLnN0YXJ0V2F0Y2hTdHJlYW0oKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodGhpcy53YXRjaFN0cmVhbS5pc09wZW4oKSkge1xyXG4gICAgICAgICAgICB0aGlzLnNlbmRXYXRjaFJlcXVlc3QodGFyZ2V0RGF0YSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmVtb3ZlcyB0aGUgbGlzdGVuIGZyb20gc2VydmVyLiBJdCBpcyBhIG5vLW9wIGlmIHRoZSBnaXZlbiB0YXJnZXQgaWQgaXNcclxuICAgICAqIG5vdCBiZWluZyBsaXN0ZW5lZCB0by5cclxuICAgICAqL1xyXG4gICAgUmVtb3RlU3RvcmUucHJvdG90eXBlLnVubGlzdGVuID0gZnVuY3Rpb24gKHRhcmdldElkKSB7XHJcbiAgICAgICAgYXNzZXJ0KGNvbnRhaW5zKHRoaXMubGlzdGVuVGFyZ2V0cywgdGFyZ2V0SWQpLCBcInVubGlzdGVuIGNhbGxlZCBvbiB0YXJnZXQgbm8gY3VycmVudGx5IHdhdGNoZWQ6IFwiICsgdGFyZ2V0SWQpO1xyXG4gICAgICAgIGRlbGV0ZSB0aGlzLmxpc3RlblRhcmdldHNbdGFyZ2V0SWRdO1xyXG4gICAgICAgIGlmICh0aGlzLndhdGNoU3RyZWFtLmlzT3BlbigpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VuZFVud2F0Y2hSZXF1ZXN0KHRhcmdldElkKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGlzRW1wdHkodGhpcy5saXN0ZW5UYXJnZXRzKSkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy53YXRjaFN0cmVhbS5pc09wZW4oKSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy53YXRjaFN0cmVhbS5tYXJrSWRsZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMuY2FuVXNlTmV0d29yaygpKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBSZXZlcnQgdG8gT25saW5lU3RhdGUuVW5rbm93biBpZiB0aGUgd2F0Y2ggc3RyZWFtIGlzIG5vdCBvcGVuIGFuZCB3ZVxyXG4gICAgICAgICAgICAgICAgLy8gaGF2ZSBubyBsaXN0ZW5lcnMsIHNpbmNlIHdpdGhvdXQgYW55IGxpc3RlbnMgdG8gc2VuZCB3ZSBjYW5ub3RcclxuICAgICAgICAgICAgICAgIC8vIGNvbmZpcm0gaWYgdGhlIHN0cmVhbSBpcyBoZWFsdGh5IGFuZCB1cGdyYWRlIHRvIE9ubGluZVN0YXRlLk9ubGluZS5cclxuICAgICAgICAgICAgICAgIHRoaXMub25saW5lU3RhdGVUcmFja2VyLnNldChPbmxpbmVTdGF0ZS5Vbmtub3duKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKioge0BsaW5rIFRhcmdldE1ldGFkYXRhUHJvdmlkZXIuZ2V0VGFyZ2V0RGF0YUZvclRhcmdldH0gKi9cclxuICAgIFJlbW90ZVN0b3JlLnByb3RvdHlwZS5nZXRUYXJnZXREYXRhRm9yVGFyZ2V0ID0gZnVuY3Rpb24gKHRhcmdldElkKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubGlzdGVuVGFyZ2V0c1t0YXJnZXRJZF0gfHwgbnVsbDtcclxuICAgIH07XHJcbiAgICAvKioge0BsaW5rIFRhcmdldE1ldGFkYXRhUHJvdmlkZXIuZ2V0UmVtb3RlS2V5c0ZvclRhcmdldH0gKi9cclxuICAgIFJlbW90ZVN0b3JlLnByb3RvdHlwZS5nZXRSZW1vdGVLZXlzRm9yVGFyZ2V0ID0gZnVuY3Rpb24gKHRhcmdldElkKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc3luY0VuZ2luZS5nZXRSZW1vdGVLZXlzRm9yVGFyZ2V0KHRhcmdldElkKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFdlIG5lZWQgdG8gaW5jcmVtZW50IHRoZSB0aGUgZXhwZWN0ZWQgbnVtYmVyIG9mIHBlbmRpbmcgcmVzcG9uc2VzIHdlJ3JlIGR1ZVxyXG4gICAgICogZnJvbSB3YXRjaCBzbyB3ZSB3YWl0IGZvciB0aGUgYWNrIHRvIHByb2Nlc3MgYW55IG1lc3NhZ2VzIGZyb20gdGhpcyB0YXJnZXQuXHJcbiAgICAgKi9cclxuICAgIFJlbW90ZVN0b3JlLnByb3RvdHlwZS5zZW5kV2F0Y2hSZXF1ZXN0ID0gZnVuY3Rpb24gKHRhcmdldERhdGEpIHtcclxuICAgICAgICB0aGlzLndhdGNoQ2hhbmdlQWdncmVnYXRvci5yZWNvcmRQZW5kaW5nVGFyZ2V0UmVxdWVzdCh0YXJnZXREYXRhLnRhcmdldElkKTtcclxuICAgICAgICB0aGlzLndhdGNoU3RyZWFtLndhdGNoKHRhcmdldERhdGEpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogV2UgbmVlZCB0byBpbmNyZW1lbnQgdGhlIGV4cGVjdGVkIG51bWJlciBvZiBwZW5kaW5nIHJlc3BvbnNlcyB3ZSdyZSBkdWVcclxuICAgICAqIGZyb20gd2F0Y2ggc28gd2Ugd2FpdCBmb3IgdGhlIHJlbW92YWwgb24gdGhlIHNlcnZlciBiZWZvcmUgd2UgcHJvY2VzcyBhbnlcclxuICAgICAqIG1lc3NhZ2VzIGZyb20gdGhpcyB0YXJnZXQuXHJcbiAgICAgKi9cclxuICAgIFJlbW90ZVN0b3JlLnByb3RvdHlwZS5zZW5kVW53YXRjaFJlcXVlc3QgPSBmdW5jdGlvbiAodGFyZ2V0SWQpIHtcclxuICAgICAgICB0aGlzLndhdGNoQ2hhbmdlQWdncmVnYXRvci5yZWNvcmRQZW5kaW5nVGFyZ2V0UmVxdWVzdCh0YXJnZXRJZCk7XHJcbiAgICAgICAgdGhpcy53YXRjaFN0cmVhbS51bndhdGNoKHRhcmdldElkKTtcclxuICAgIH07XHJcbiAgICBSZW1vdGVTdG9yZS5wcm90b3R5cGUuc3RhcnRXYXRjaFN0cmVhbSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBhc3NlcnQodGhpcy5zaG91bGRTdGFydFdhdGNoU3RyZWFtKCksICdzdGFydFdhdGNoU3RyZWFtKCkgY2FsbGVkIHdoZW4gc2hvdWxkU3RhcnRXYXRjaFN0cmVhbSgpIGlzIGZhbHNlLicpO1xyXG4gICAgICAgIHRoaXMud2F0Y2hDaGFuZ2VBZ2dyZWdhdG9yID0gbmV3IFdhdGNoQ2hhbmdlQWdncmVnYXRvcih0aGlzKTtcclxuICAgICAgICB0aGlzLndhdGNoU3RyZWFtLnN0YXJ0KCk7XHJcbiAgICAgICAgdGhpcy5vbmxpbmVTdGF0ZVRyYWNrZXIuaGFuZGxlV2F0Y2hTdHJlYW1TdGFydCgpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB3aGV0aGVyIHRoZSB3YXRjaCBzdHJlYW0gc2hvdWxkIGJlIHN0YXJ0ZWQgYmVjYXVzZSBpdCdzIG5lY2Vzc2FyeVxyXG4gICAgICogYW5kIGhhcyBub3QgeWV0IGJlZW4gc3RhcnRlZC5cclxuICAgICAqL1xyXG4gICAgUmVtb3RlU3RvcmUucHJvdG90eXBlLnNob3VsZFN0YXJ0V2F0Y2hTdHJlYW0gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuICh0aGlzLmNhblVzZU5ldHdvcmsoKSAmJlxyXG4gICAgICAgICAgICAhdGhpcy53YXRjaFN0cmVhbS5pc1N0YXJ0ZWQoKSAmJlxyXG4gICAgICAgICAgICAhaXNFbXB0eSh0aGlzLmxpc3RlblRhcmdldHMpKTtcclxuICAgIH07XHJcbiAgICBSZW1vdGVTdG9yZS5wcm90b3R5cGUuY2FuVXNlTmV0d29yayA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5pc1ByaW1hcnkgJiYgdGhpcy5uZXR3b3JrRW5hYmxlZDtcclxuICAgIH07XHJcbiAgICBSZW1vdGVTdG9yZS5wcm90b3R5cGUuY2xlYW5VcFdhdGNoU3RyZWFtU3RhdGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy53YXRjaENoYW5nZUFnZ3JlZ2F0b3IgPSBudWxsO1xyXG4gICAgfTtcclxuICAgIFJlbW90ZVN0b3JlLnByb3RvdHlwZS5vbldhdGNoU3RyZWFtT3BlbiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdHNsaWIuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYi5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIGZvckVhY2hOdW1iZXIodGhpcy5saXN0ZW5UYXJnZXRzLCBmdW5jdGlvbiAodGFyZ2V0SWQsIHRhcmdldERhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5zZW5kV2F0Y2hSZXF1ZXN0KHRhcmdldERhdGEpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIFJlbW90ZVN0b3JlLnByb3RvdHlwZS5vbldhdGNoU3RyZWFtQ2xvc2UgPSBmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICByZXR1cm4gdHNsaWIuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYi5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIGlmIChlcnJvciA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gR3JhY2VmdWwgc3RvcCAoZHVlIHRvIHN0b3AoKSBvciBpZGxlIHRpbWVvdXQpLiBNYWtlIHN1cmUgdGhhdCdzXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gZGVzaXJhYmxlLlxyXG4gICAgICAgICAgICAgICAgICAgIGFzc2VydCghdGhpcy5zaG91bGRTdGFydFdhdGNoU3RyZWFtKCksICdXYXRjaCBzdHJlYW0gd2FzIHN0b3BwZWQgZ3JhY2VmdWxseSB3aGlsZSBzdGlsbCBuZWVkZWQuJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNsZWFuVXBXYXRjaFN0cmVhbVN0YXRlKCk7XHJcbiAgICAgICAgICAgICAgICAvLyBJZiB3ZSBzdGlsbCBuZWVkIHRoZSB3YXRjaCBzdHJlYW0sIHJldHJ5IHRoZSBjb25uZWN0aW9uLlxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc2hvdWxkU3RhcnRXYXRjaFN0cmVhbSgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vbmxpbmVTdGF0ZVRyYWNrZXIuaGFuZGxlV2F0Y2hTdHJlYW1GYWlsdXJlKGVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0V2F0Y2hTdHJlYW0oKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIE5vIG5lZWQgdG8gcmVzdGFydCB3YXRjaCBzdHJlYW0gYmVjYXVzZSB0aGVyZSBhcmUgbm8gYWN0aXZlIHRhcmdldHMuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gVGhlIG9ubGluZSBzdGF0ZSBpcyBzZXQgdG8gdW5rbm93biBiZWNhdXNlIHRoZXJlIGlzIG5vIGFjdGl2ZSBhdHRlbXB0XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gYXQgZXN0YWJsaXNoaW5nIGEgY29ubmVjdGlvblxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMub25saW5lU3RhdGVUcmFja2VyLnNldChPbmxpbmVTdGF0ZS5Vbmtub3duKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgUmVtb3RlU3RvcmUucHJvdG90eXBlLm9uV2F0Y2hTdHJlYW1DaGFuZ2UgPSBmdW5jdGlvbiAod2F0Y2hDaGFuZ2UsIHNuYXBzaG90VmVyc2lvbikge1xyXG4gICAgICAgIHJldHVybiB0c2xpYi5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGxhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb247XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYi5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE1hcmsgdGhlIGNsaWVudCBhcyBvbmxpbmUgc2luY2Ugd2UgZ290IGEgbWVzc2FnZSBmcm9tIHRoZSBzZXJ2ZXJcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vbmxpbmVTdGF0ZVRyYWNrZXIuc2V0KE9ubGluZVN0YXRlLk9ubGluZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh3YXRjaENoYW5nZSBpbnN0YW5jZW9mIFdhdGNoVGFyZ2V0Q2hhbmdlICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YXRjaENoYW5nZS5zdGF0ZSA9PT0gV2F0Y2hUYXJnZXRDaGFuZ2VTdGF0ZS5SZW1vdmVkICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YXRjaENoYW5nZS5jYXVzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlcmUgd2FzIGFuIGVycm9yIG9uIGEgdGFyZ2V0LCBkb24ndCB3YWl0IGZvciBhIGNvbnNpc3RlbnQgc25hcHNob3RcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRvIHJhaXNlIGV2ZW50c1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMuaGFuZGxlVGFyZ2V0RXJyb3Iod2F0Y2hDaGFuZ2UpXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAod2F0Y2hDaGFuZ2UgaW5zdGFuY2VvZiBEb2N1bWVudFdhdGNoQ2hhbmdlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLndhdGNoQ2hhbmdlQWdncmVnYXRvci5oYW5kbGVEb2N1bWVudENoYW5nZSh3YXRjaENoYW5nZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAod2F0Y2hDaGFuZ2UgaW5zdGFuY2VvZiBFeGlzdGVuY2VGaWx0ZXJDaGFuZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMud2F0Y2hDaGFuZ2VBZ2dyZWdhdG9yLmhhbmRsZUV4aXN0ZW5jZUZpbHRlcih3YXRjaENoYW5nZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NlcnQod2F0Y2hDaGFuZ2UgaW5zdGFuY2VvZiBXYXRjaFRhcmdldENoYW5nZSwgJ0V4cGVjdGVkIHdhdGNoQ2hhbmdlIHRvIGJlIGFuIGluc3RhbmNlIG9mIFdhdGNoVGFyZ2V0Q2hhbmdlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLndhdGNoQ2hhbmdlQWdncmVnYXRvci5oYW5kbGVUYXJnZXRDaGFuZ2Uod2F0Y2hDaGFuZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghIXNuYXBzaG90VmVyc2lvbi5pc0VxdWFsKFNuYXBzaG90VmVyc2lvbi5NSU4pKSByZXR1cm4gWzMgLypicmVhayovLCAzXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5sb2NhbFN0b3JlLmdldExhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24oKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShzbmFwc2hvdFZlcnNpb24uY29tcGFyZVRvKGxhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24pID49IDApKSByZXR1cm4gWzMgLypicmVhayovLCAzXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gV2UgaGF2ZSByZWNlaXZlZCBhIHRhcmdldCBjaGFuZ2Ugd2l0aCBhIGdsb2JhbCBzbmFwc2hvdCBpZiB0aGUgc25hcHNob3RcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdmVyc2lvbiBpcyBub3QgZXF1YWwgdG8gU25hcHNob3RWZXJzaW9uLk1JTi5cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5yYWlzZVdhdGNoU25hcHNob3Qoc25hcHNob3RWZXJzaW9uKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBXZSBoYXZlIHJlY2VpdmVkIGEgdGFyZ2V0IGNoYW5nZSB3aXRoIGEgZ2xvYmFsIHNuYXBzaG90IGlmIHRoZSBzbmFwc2hvdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB2ZXJzaW9uIGlzIG5vdCBlcXVhbCB0byBTbmFwc2hvdFZlcnNpb24uTUlOLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLmxhYmVsID0gMztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6IHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBUYWtlcyBhIGJhdGNoIG9mIGNoYW5nZXMgZnJvbSB0aGUgRGF0YXN0b3JlLCByZXBhY2thZ2VzIHRoZW0gYXMgYVxyXG4gICAgICogUmVtb3RlRXZlbnQsIGFuZCBwYXNzZXMgdGhhdCBvbiB0byB0aGUgbGlzdGVuZXIsIHdoaWNoIGlzIHR5cGljYWxseSB0aGVcclxuICAgICAqIFN5bmNFbmdpbmUuXHJcbiAgICAgKi9cclxuICAgIFJlbW90ZVN0b3JlLnByb3RvdHlwZS5yYWlzZVdhdGNoU25hcHNob3QgPSBmdW5jdGlvbiAoc25hcHNob3RWZXJzaW9uKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBhc3NlcnQoIXNuYXBzaG90VmVyc2lvbi5pc0VxdWFsKFNuYXBzaG90VmVyc2lvbi5NSU4pLCBcIkNhbid0IHJhaXNlIGV2ZW50IGZvciB1bmtub3duIFNuYXBzaG90VmVyc2lvblwiKTtcclxuICAgICAgICB2YXIgcmVtb3RlRXZlbnQgPSB0aGlzLndhdGNoQ2hhbmdlQWdncmVnYXRvci5jcmVhdGVSZW1vdGVFdmVudChzbmFwc2hvdFZlcnNpb24pO1xyXG4gICAgICAgIC8vIFVwZGF0ZSBpbi1tZW1vcnkgcmVzdW1lIHRva2Vucy4gTG9jYWxTdG9yZSB3aWxsIHVwZGF0ZSB0aGVcclxuICAgICAgICAvLyBwZXJzaXN0ZW50IHZpZXcgb2YgdGhlc2Ugd2hlbiBhcHBseWluZyB0aGUgY29tcGxldGVkIFJlbW90ZUV2ZW50LlxyXG4gICAgICAgIGZvckVhY2hOdW1iZXIocmVtb3RlRXZlbnQudGFyZ2V0Q2hhbmdlcywgZnVuY3Rpb24gKHRhcmdldElkLCBjaGFuZ2UpIHtcclxuICAgICAgICAgICAgaWYgKGNoYW5nZS5yZXN1bWVUb2tlbi5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0RGF0YSA9IF90aGlzLmxpc3RlblRhcmdldHNbdGFyZ2V0SWRdO1xyXG4gICAgICAgICAgICAgICAgLy8gQSB3YXRjaGVkIHRhcmdldCBtaWdodCBoYXZlIGJlZW4gcmVtb3ZlZCBhbHJlYWR5LlxyXG4gICAgICAgICAgICAgICAgaWYgKHRhcmdldERhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5saXN0ZW5UYXJnZXRzW3RhcmdldElkXSA9IHRhcmdldERhdGEud2l0aFJlc3VtZVRva2VuKGNoYW5nZS5yZXN1bWVUb2tlbiwgc25hcHNob3RWZXJzaW9uKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIFJlLWVzdGFibGlzaCBsaXN0ZW5zIGZvciB0aGUgdGFyZ2V0cyB0aGF0IGhhdmUgYmVlbiBpbnZhbGlkYXRlZCBieVxyXG4gICAgICAgIC8vIGV4aXN0ZW5jZSBmaWx0ZXIgbWlzbWF0Y2hlcy5cclxuICAgICAgICByZW1vdGVFdmVudC50YXJnZXRNaXNtYXRjaGVzLmZvckVhY2goZnVuY3Rpb24gKHRhcmdldElkKSB7XHJcbiAgICAgICAgICAgIHZhciB0YXJnZXREYXRhID0gX3RoaXMubGlzdGVuVGFyZ2V0c1t0YXJnZXRJZF07XHJcbiAgICAgICAgICAgIGlmICghdGFyZ2V0RGF0YSkge1xyXG4gICAgICAgICAgICAgICAgLy8gQSB3YXRjaGVkIHRhcmdldCBtaWdodCBoYXZlIGJlZW4gcmVtb3ZlZCBhbHJlYWR5LlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIENsZWFyIHRoZSByZXN1bWUgdG9rZW4gZm9yIHRoZSB0YXJnZXQsIHNpbmNlIHdlJ3JlIGluIGEga25vd24gbWlzbWF0Y2hcclxuICAgICAgICAgICAgLy8gc3RhdGUuXHJcbiAgICAgICAgICAgIF90aGlzLmxpc3RlblRhcmdldHNbdGFyZ2V0SWRdID0gdGFyZ2V0RGF0YS53aXRoUmVzdW1lVG9rZW4oZW1wdHlCeXRlU3RyaW5nKCksIHRhcmdldERhdGEuc25hcHNob3RWZXJzaW9uKTtcclxuICAgICAgICAgICAgLy8gQ2F1c2UgYSBoYXJkIHJlc2V0IGJ5IHVud2F0Y2hpbmcgYW5kIHJld2F0Y2hpbmcgaW1tZWRpYXRlbHksIGJ1dFxyXG4gICAgICAgICAgICAvLyBkZWxpYmVyYXRlbHkgZG9uJ3Qgc2VuZCBhIHJlc3VtZSB0b2tlbiBzbyB0aGF0IHdlIGdldCBhIGZ1bGwgdXBkYXRlLlxyXG4gICAgICAgICAgICBfdGhpcy5zZW5kVW53YXRjaFJlcXVlc3QodGFyZ2V0SWQpO1xyXG4gICAgICAgICAgICAvLyBNYXJrIHRoZSB0YXJnZXQgd2Ugc2VuZCBhcyBiZWluZyBvbiBiZWhhbGYgb2YgYW4gZXhpc3RlbmNlIGZpbHRlclxyXG4gICAgICAgICAgICAvLyBtaXNtYXRjaCwgYnV0IGRvbid0IGFjdHVhbGx5IHJldGFpbiB0aGF0IGluIGxpc3RlblRhcmdldHMuIFRoaXMgZW5zdXJlc1xyXG4gICAgICAgICAgICAvLyB0aGF0IHdlIGZsYWcgdGhlIGZpcnN0IHJlLWxpc3RlbiB0aGlzIHdheSB3aXRob3V0IGltcGFjdGluZyBmdXR1cmVcclxuICAgICAgICAgICAgLy8gbGlzdGVucyBvZiB0aGlzIHRhcmdldCAodGhhdCBtaWdodCBoYXBwZW4gZS5nLiBvbiByZWNvbm5lY3QpLlxyXG4gICAgICAgICAgICB2YXIgcmVxdWVzdFRhcmdldERhdGEgPSBuZXcgVGFyZ2V0RGF0YSh0YXJnZXREYXRhLnRhcmdldCwgdGFyZ2V0SWQsIFRhcmdldFB1cnBvc2UuRXhpc3RlbmNlRmlsdGVyTWlzbWF0Y2gsIHRhcmdldERhdGEuc2VxdWVuY2VOdW1iZXIpO1xyXG4gICAgICAgICAgICBfdGhpcy5zZW5kV2F0Y2hSZXF1ZXN0KHJlcXVlc3RUYXJnZXREYXRhKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyBGaW5hbGx5IHJhaXNlIHJlbW90ZSBldmVudFxyXG4gICAgICAgIHJldHVybiB0aGlzLnN5bmNFbmdpbmUuYXBwbHlSZW1vdGVFdmVudChyZW1vdGVFdmVudCk7XHJcbiAgICB9O1xyXG4gICAgLyoqIEhhbmRsZXMgYW4gZXJyb3Igb24gYSB0YXJnZXQgKi9cclxuICAgIFJlbW90ZVN0b3JlLnByb3RvdHlwZS5oYW5kbGVUYXJnZXRFcnJvciA9IGZ1bmN0aW9uICh3YXRjaENoYW5nZSkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgYXNzZXJ0KCEhd2F0Y2hDaGFuZ2UuY2F1c2UsICdIYW5kbGluZyB0YXJnZXQgZXJyb3Igd2l0aG91dCBhIGNhdXNlJyk7XHJcbiAgICAgICAgdmFyIGVycm9yID0gd2F0Y2hDaGFuZ2UuY2F1c2U7XHJcbiAgICAgICAgdmFyIHByb21pc2VDaGFpbiA9IFByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgICAgIHdhdGNoQ2hhbmdlLnRhcmdldElkcy5mb3JFYWNoKGZ1bmN0aW9uICh0YXJnZXRJZCkge1xyXG4gICAgICAgICAgICBwcm9taXNlQ2hhaW4gPSBwcm9taXNlQ2hhaW4udGhlbihmdW5jdGlvbiAoKSB7IHJldHVybiB0c2xpYi5fX2F3YWl0ZXIoX3RoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHNsaWIuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gQSB3YXRjaGVkIHRhcmdldCBtaWdodCBoYXZlIGJlZW4gcmVtb3ZlZCBhbHJlYWR5LlxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjb250YWlucyh0aGlzLmxpc3RlblRhcmdldHMsIHRhcmdldElkKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5saXN0ZW5UYXJnZXRzW3RhcmdldElkXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy53YXRjaENoYW5nZUFnZ3JlZ2F0b3IucmVtb3ZlVGFyZ2V0KHRhcmdldElkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMuc3luY0VuZ2luZS5yZWplY3RMaXN0ZW4odGFyZ2V0SWQsIGVycm9yKV07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTsgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHByb21pc2VDaGFpbjtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEF0dGVtcHRzIHRvIGZpbGwgb3VyIHdyaXRlIHBpcGVsaW5lIHdpdGggd3JpdGVzIGZyb20gdGhlIExvY2FsU3RvcmUuXHJcbiAgICAgKlxyXG4gICAgICogQ2FsbGVkIGludGVybmFsbHkgdG8gYm9vdHN0cmFwIG9yIHJlZmlsbCB0aGUgd3JpdGUgcGlwZWxpbmUgYW5kIGJ5XHJcbiAgICAgKiBTeW5jRW5naW5lIHdoZW5ldmVyIHRoZXJlIGFyZSBuZXcgbXV0YXRpb25zIHRvIHByb2Nlc3MuXHJcbiAgICAgKlxyXG4gICAgICogU3RhcnRzIHRoZSB3cml0ZSBzdHJlYW0gaWYgbmVjZXNzYXJ5LlxyXG4gICAgICovXHJcbiAgICBSZW1vdGVTdG9yZS5wcm90b3R5cGUuZmlsbFdyaXRlUGlwZWxpbmUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRzbGliLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgbGFzdEJhdGNoSWRSZXRyaWV2ZWQsIGJhdGNoO1xyXG4gICAgICAgICAgICByZXR1cm4gdHNsaWIuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuY2FuQWRkVG9Xcml0ZVBpcGVsaW5lKCkpIHJldHVybiBbMyAvKmJyZWFrKi8sIDRdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYXN0QmF0Y2hJZFJldHJpZXZlZCA9IHRoaXMud3JpdGVQaXBlbGluZS5sZW5ndGggPiAwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHRoaXMud3JpdGVQaXBlbGluZVt0aGlzLndyaXRlUGlwZWxpbmUubGVuZ3RoIC0gMV0uYmF0Y2hJZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBCQVRDSElEX1VOS05PV047XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMubG9jYWxTdG9yZS5uZXh0TXV0YXRpb25CYXRjaChsYXN0QmF0Y2hJZFJldHJpZXZlZCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmF0Y2ggPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKGJhdGNoID09PSBudWxsKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgMl07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLndyaXRlUGlwZWxpbmUubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLndyaXRlU3RyZWFtLm1hcmtJZGxlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgNF07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZFRvV3JpdGVQaXBlbGluZShiYXRjaCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuZmlsbFdyaXRlUGlwZWxpbmUoKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLmxhYmVsID0gNDtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnNob3VsZFN0YXJ0V3JpdGVTdHJlYW0oKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGFydFdyaXRlU3RyZWFtKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiB3ZSBjYW4gYWRkIHRvIHRoZSB3cml0ZSBwaXBlbGluZSAoaS5lLiB0aGUgbmV0d29yayBpc1xyXG4gICAgICogZW5hYmxlZCBhbmQgdGhlIHdyaXRlIHBpcGVsaW5lIGlzIG5vdCBmdWxsKS5cclxuICAgICAqL1xyXG4gICAgUmVtb3RlU3RvcmUucHJvdG90eXBlLmNhbkFkZFRvV3JpdGVQaXBlbGluZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gKHRoaXMuY2FuVXNlTmV0d29yaygpICYmIHRoaXMud3JpdGVQaXBlbGluZS5sZW5ndGggPCBNQVhfUEVORElOR19XUklURVMpO1xyXG4gICAgfTtcclxuICAgIC8vIEZvciB0ZXN0aW5nXHJcbiAgICBSZW1vdGVTdG9yZS5wcm90b3R5cGUub3V0c3RhbmRpbmdXcml0ZXMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMud3JpdGVQaXBlbGluZS5sZW5ndGg7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBRdWV1ZXMgYWRkaXRpb25hbCB3cml0ZXMgdG8gYmUgc2VudCB0byB0aGUgd3JpdGUgc3RyZWFtLCBzZW5kaW5nIHRoZW1cclxuICAgICAqIGltbWVkaWF0ZWx5IGlmIHRoZSB3cml0ZSBzdHJlYW0gaXMgZXN0YWJsaXNoZWQuXHJcbiAgICAgKi9cclxuICAgIFJlbW90ZVN0b3JlLnByb3RvdHlwZS5hZGRUb1dyaXRlUGlwZWxpbmUgPSBmdW5jdGlvbiAoYmF0Y2gpIHtcclxuICAgICAgICBhc3NlcnQodGhpcy5jYW5BZGRUb1dyaXRlUGlwZWxpbmUoKSwgJ2FkZFRvV3JpdGVQaXBlbGluZSBjYWxsZWQgd2hlbiBwaXBlbGluZSBpcyBmdWxsJyk7XHJcbiAgICAgICAgdGhpcy53cml0ZVBpcGVsaW5lLnB1c2goYmF0Y2gpO1xyXG4gICAgICAgIGlmICh0aGlzLndyaXRlU3RyZWFtLmlzT3BlbigpICYmIHRoaXMud3JpdGVTdHJlYW0uaGFuZHNoYWtlQ29tcGxldGUpIHtcclxuICAgICAgICAgICAgdGhpcy53cml0ZVN0cmVhbS53cml0ZU11dGF0aW9ucyhiYXRjaC5tdXRhdGlvbnMpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBSZW1vdGVTdG9yZS5wcm90b3R5cGUuc2hvdWxkU3RhcnRXcml0ZVN0cmVhbSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gKHRoaXMuY2FuVXNlTmV0d29yaygpICYmXHJcbiAgICAgICAgICAgICF0aGlzLndyaXRlU3RyZWFtLmlzU3RhcnRlZCgpICYmXHJcbiAgICAgICAgICAgIHRoaXMud3JpdGVQaXBlbGluZS5sZW5ndGggPiAwKTtcclxuICAgIH07XHJcbiAgICBSZW1vdGVTdG9yZS5wcm90b3R5cGUuc3RhcnRXcml0ZVN0cmVhbSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBhc3NlcnQodGhpcy5zaG91bGRTdGFydFdyaXRlU3RyZWFtKCksICdzdGFydFdyaXRlU3RyZWFtKCkgY2FsbGVkIHdoZW4gc2hvdWxkU3RhcnRXcml0ZVN0cmVhbSgpIGlzIGZhbHNlLicpO1xyXG4gICAgICAgIHRoaXMud3JpdGVTdHJlYW0uc3RhcnQoKTtcclxuICAgIH07XHJcbiAgICBSZW1vdGVTdG9yZS5wcm90b3R5cGUub25Xcml0ZVN0cmVhbU9wZW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRzbGliLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHNsaWIuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLndyaXRlU3RyZWFtLndyaXRlSGFuZHNoYWtlKCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIFJlbW90ZVN0b3JlLnByb3RvdHlwZS5vbldyaXRlSGFuZHNoYWtlQ29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICAvLyBSZWNvcmQgdGhlIHN0cmVhbSB0b2tlbi5cclxuICAgICAgICByZXR1cm4gdGhpcy5sb2NhbFN0b3JlXHJcbiAgICAgICAgICAgIC5zZXRMYXN0U3RyZWFtVG9rZW4odGhpcy53cml0ZVN0cmVhbS5sYXN0U3RyZWFtVG9rZW4pXHJcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgLy8gU2VuZCB0aGUgd3JpdGUgcGlwZWxpbmUgbm93IHRoYXQgdGhlIHN0cmVhbSBpcyBlc3RhYmxpc2hlZC5cclxuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IF90aGlzLndyaXRlUGlwZWxpbmU7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYmF0Y2ggPSBfYVtfaV07XHJcbiAgICAgICAgICAgICAgICBfdGhpcy53cml0ZVN0cmVhbS53cml0ZU11dGF0aW9ucyhiYXRjaC5tdXRhdGlvbnMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLmNhdGNoKGlnbm9yZUlmUHJpbWFyeUxlYXNlTG9zcyk7XHJcbiAgICB9O1xyXG4gICAgUmVtb3RlU3RvcmUucHJvdG90eXBlLm9uTXV0YXRpb25SZXN1bHQgPSBmdW5jdGlvbiAoY29tbWl0VmVyc2lvbiwgcmVzdWx0cykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgLy8gVGhpcyBpcyBhIHJlc3BvbnNlIHRvIGEgd3JpdGUgY29udGFpbmluZyBtdXRhdGlvbnMgYW5kIHNob3VsZCBiZVxyXG4gICAgICAgIC8vIGNvcnJlbGF0ZWQgdG8gdGhlIGZpcnN0IHdyaXRlIGluIG91ciB3cml0ZSBwaXBlbGluZS5cclxuICAgICAgICBhc3NlcnQodGhpcy53cml0ZVBpcGVsaW5lLmxlbmd0aCA+IDAsICdHb3QgcmVzdWx0IGZvciBlbXB0eSB3cml0ZSBwaXBlbGluZScpO1xyXG4gICAgICAgIHZhciBiYXRjaCA9IHRoaXMud3JpdGVQaXBlbGluZS5zaGlmdCgpO1xyXG4gICAgICAgIHZhciBzdWNjZXNzID0gTXV0YXRpb25CYXRjaFJlc3VsdC5mcm9tKGJhdGNoLCBjb21taXRWZXJzaW9uLCByZXN1bHRzLCB0aGlzLndyaXRlU3RyZWFtLmxhc3RTdHJlYW1Ub2tlbik7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc3luY0VuZ2luZS5hcHBseVN1Y2Nlc3NmdWxXcml0ZShzdWNjZXNzKS50aGVuKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgLy8gSXQncyBwb3NzaWJsZSB0aGF0IHdpdGggdGhlIGNvbXBsZXRpb24gb2YgdGhpcyBtdXRhdGlvbiBhbm90aGVyXHJcbiAgICAgICAgICAgIC8vIHNsb3QgaGFzIGZyZWVkIHVwLlxyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXMuZmlsbFdyaXRlUGlwZWxpbmUoKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBSZW1vdGVTdG9yZS5wcm90b3R5cGUub25Xcml0ZVN0cmVhbUNsb3NlID0gZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICAgICAgcmV0dXJuIHRzbGliLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgZXJyb3JIYW5kbGluZztcclxuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGVycm9yID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBHcmFjZWZ1bCBzdG9wIChkdWUgdG8gc3RvcCgpIG9yIGlkbGUgdGltZW91dCkuIE1ha2Ugc3VyZSB0aGF0J3NcclxuICAgICAgICAgICAgICAgICAgICAvLyBkZXNpcmFibGUuXHJcbiAgICAgICAgICAgICAgICAgICAgYXNzZXJ0KCF0aGlzLnNob3VsZFN0YXJ0V3JpdGVTdHJlYW0oKSwgJ1dyaXRlIHN0cmVhbSB3YXMgc3RvcHBlZCBncmFjZWZ1bGx5IHdoaWxlIHN0aWxsIG5lZWRlZC4nKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIElmIHRoZSB3cml0ZSBzdHJlYW0gY2xvc2VkIGR1ZSB0byBhbiBlcnJvciwgaW52b2tlIHRoZSBlcnJvciBjYWxsYmFja3MgaWZcclxuICAgICAgICAgICAgICAgIC8vIHRoZXJlIGFyZSBwZW5kaW5nIHdyaXRlcy5cclxuICAgICAgICAgICAgICAgIGlmIChlcnJvciAmJiB0aGlzLndyaXRlUGlwZWxpbmUubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGVycm9ySGFuZGxpbmcgPSB2b2lkIDA7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMud3JpdGVTdHJlYW0uaGFuZHNoYWtlQ29tcGxldGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhpcyBlcnJvciBhZmZlY3RzIHRoZSBhY3R1YWwgd3JpdGUuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9ySGFuZGxpbmcgPSB0aGlzLmhhbmRsZVdyaXRlRXJyb3IoZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlcmUgd2FzIGFuIGVycm9yIGJlZm9yZSB0aGUgaGFuZHNoYWtlIGhhcyBmaW5pc2hlZCwgaXQnc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBwb3NzaWJsZSB0aGF0IHRoZSBzZXJ2ZXIgaXMgdW5hYmxlIHRvIHByb2Nlc3MgdGhlIHN0cmVhbSB0b2tlblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB3ZSdyZSBzZW5kaW5nLiAoUGVyaGFwcyBpdCdzIHRvbyBvbGQ/KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvckhhbmRsaW5nID0gdGhpcy5oYW5kbGVIYW5kc2hha2VFcnJvcihlcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBlcnJvckhhbmRsaW5nLnRoZW4oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlIHdyaXRlIHN0cmVhbSBtaWdodCBoYXZlIGJlZW4gc3RhcnRlZCBieSByZWZpbGxpbmcgdGhlIHdyaXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBwaXBlbGluZSBmb3IgZmFpbGVkIHdyaXRlc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLnNob3VsZFN0YXJ0V3JpdGVTdHJlYW0oKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnN0YXJ0V3JpdGVTdHJlYW0oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSldO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBSZW1vdGVTdG9yZS5wcm90b3R5cGUuaGFuZGxlSGFuZHNoYWtlRXJyb3IgPSBmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICByZXR1cm4gdHNsaWIuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYi5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIC8vIFJlc2V0IHRoZSB0b2tlbiBpZiBpdCdzIGEgcGVybWFuZW50IGVycm9yLCBzaWduYWxpbmcgdGhlIHdyaXRlIHN0cmVhbSBpc1xyXG4gICAgICAgICAgICAgICAgLy8gbm8gbG9uZ2VyIHZhbGlkLiBOb3RlIHRoYXQgdGhlIGhhbmRzaGFrZSBkb2VzIG5vdCBjb3VudCBhcyBhIHdyaXRlOiBzZWVcclxuICAgICAgICAgICAgICAgIC8vIGNvbW1lbnRzIG9uIGlzUGVybWFuZW50V3JpdGVFcnJvciBmb3IgZGV0YWlscy5cclxuICAgICAgICAgICAgICAgIGlmIChpc1Blcm1hbmVudEVycm9yKGVycm9yLmNvZGUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVidWcoTE9HX1RBRyQ4LCAnUmVtb3RlU3RvcmUgZXJyb3IgYmVmb3JlIGNvbXBsZXRlZCBoYW5kc2hha2U7IHJlc2V0dGluZyBzdHJlYW0gdG9rZW46ICcsIHRoaXMud3JpdGVTdHJlYW0ubGFzdFN0cmVhbVRva2VuKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLndyaXRlU3RyZWFtLmxhc3RTdHJlYW1Ub2tlbiA9IGVtcHR5Qnl0ZVN0cmluZygpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0aGlzLmxvY2FsU3RvcmVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRMYXN0U3RyZWFtVG9rZW4oZW1wdHlCeXRlU3RyaW5nKCkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY2F0Y2goaWdub3JlSWZQcmltYXJ5TGVhc2VMb3NzKV07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIFJlbW90ZVN0b3JlLnByb3RvdHlwZS5oYW5kbGVXcml0ZUVycm9yID0gZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICAgICAgcmV0dXJuIHRzbGliLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgYmF0Y2g7XHJcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYi5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIC8vIE9ubHkgaGFuZGxlIHBlcm1hbmVudCBlcnJvcnMgaGVyZS4gSWYgaXQncyB0cmFuc2llbnQsIGp1c3QgbGV0IHRoZSByZXRyeVxyXG4gICAgICAgICAgICAgICAgLy8gbG9naWMga2ljayBpbi5cclxuICAgICAgICAgICAgICAgIGlmIChpc1Blcm1hbmVudFdyaXRlRXJyb3IoZXJyb3IuY29kZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBiYXRjaCA9IHRoaXMud3JpdGVQaXBlbGluZS5zaGlmdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIEluIHRoaXMgY2FzZSBpdCdzIGFsc28gdW5saWtlbHkgdGhhdCB0aGUgc2VydmVyIGl0c2VsZiBpcyBtZWx0aW5nXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gZG93biAtLSB0aGlzIHdhcyBqdXN0IGEgYmFkIHJlcXVlc3Qgc28gaW5oaWJpdCBiYWNrb2ZmIG9uIHRoZSBuZXh0XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gcmVzdGFydC5cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLndyaXRlU3RyZWFtLmluaGliaXRCYWNrb2ZmKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMuc3luY0VuZ2luZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlamVjdEZhaWxlZFdyaXRlKGJhdGNoLmJhdGNoSWQsIGVycm9yKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSXQncyBwb3NzaWJsZSB0aGF0IHdpdGggdGhlIGNvbXBsZXRpb24gb2YgdGhpcyBtdXRhdGlvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYW5vdGhlciBzbG90IGhhcyBmcmVlZCB1cC5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5maWxsV3JpdGVQaXBlbGluZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KV07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIFJlbW90ZVN0b3JlLnByb3RvdHlwZS5jcmVhdGVUcmFuc2FjdGlvbiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFRyYW5zYWN0aW9uKHRoaXMuZGF0YXN0b3JlKTtcclxuICAgIH07XHJcbiAgICBSZW1vdGVTdG9yZS5wcm90b3R5cGUucmVzdGFydE5ldHdvcmsgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRzbGliLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHNsaWIuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5ldHdvcmtFbmFibGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuZGlzYWJsZU5ldHdvcmtJbnRlcm5hbCgpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vbmxpbmVTdGF0ZVRyYWNrZXIuc2V0KE9ubGluZVN0YXRlLlVua25vd24pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmVuYWJsZU5ldHdvcmsoKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgUmVtb3RlU3RvcmUucHJvdG90eXBlLmhhbmRsZUNyZWRlbnRpYWxDaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRzbGliLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHNsaWIuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuY2FuVXNlTmV0d29yaygpKSByZXR1cm4gWzMgLypicmVhayovLCAyXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGVhciBkb3duIGFuZCByZS1jcmVhdGUgb3VyIG5ldHdvcmsgc3RyZWFtcy4gVGhpcyB3aWxsIGVuc3VyZSB3ZSBnZXQgYSBmcmVzaCBhdXRoIHRva2VuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGZvciB0aGUgbmV3IHVzZXIgYW5kIHJlLWZpbGwgdGhlIHdyaXRlIHBpcGVsaW5lIHdpdGggbmV3IG11dGF0aW9ucyBmcm9tIHRoZSBMb2NhbFN0b3JlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIChzaW5jZSBtdXRhdGlvbnMgYXJlIHBlci11c2VyKS5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVidWcoTE9HX1RBRyQ4LCAnUmVtb3RlU3RvcmUgcmVzdGFydGluZyBzdHJlYW1zIGZvciBuZXcgY3JlZGVudGlhbCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLnJlc3RhcnROZXR3b3JrKCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDI7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOiByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogVG9nZ2xlcyB0aGUgbmV0d29yayBzdGF0ZSB3aGVuIHRoZSBjbGllbnQgZ2FpbnMgb3IgbG9zZXMgaXRzIHByaW1hcnkgbGVhc2UuXHJcbiAgICAgKi9cclxuICAgIFJlbW90ZVN0b3JlLnByb3RvdHlwZS5hcHBseVByaW1hcnlTdGF0ZSA9IGZ1bmN0aW9uIChpc1ByaW1hcnkpIHtcclxuICAgICAgICByZXR1cm4gdHNsaWIuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYi5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaXNQcmltYXJ5ID0gaXNQcmltYXJ5O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShpc1ByaW1hcnkgJiYgdGhpcy5uZXR3b3JrRW5hYmxlZCkpIHJldHVybiBbMyAvKmJyZWFrKi8sIDJdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmVuYWJsZU5ldHdvcmsoKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDRdO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEhaXNQcmltYXJ5KSByZXR1cm4gWzMgLypicmVhayovLCA0XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5kaXNhYmxlTmV0d29ya0ludGVybmFsKCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9ubGluZVN0YXRlVHJhY2tlci5zZXQoT25saW5lU3RhdGUuVW5rbm93bik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLmxhYmVsID0gNDtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6IHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFJlbW90ZVN0b3JlO1xyXG59KCkpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEltbXV0YWJsZSBjbGFzcyByZXByZXNlbnRpbmcgYSBnZW8gcG9pbnQgYXMgbGF0aXR1ZGUtbG9uZ2l0dWRlIHBhaXIuXHJcbiAqIFRoaXMgY2xhc3MgaXMgZGlyZWN0bHkgZXhwb3NlZCBpbiB0aGUgcHVibGljIEFQSSwgaW5jbHVkaW5nIGl0cyBjb25zdHJ1Y3Rvci5cclxuICovXHJcbnZhciBHZW9Qb2ludCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEdlb1BvaW50KGxhdGl0dWRlLCBsb25naXR1ZGUpIHtcclxuICAgICAgICB2YWxpZGF0ZUV4YWN0TnVtYmVyT2ZBcmdzKCdHZW9Qb2ludCcsIGFyZ3VtZW50cywgMik7XHJcbiAgICAgICAgdmFsaWRhdGVBcmdUeXBlKCdHZW9Qb2ludCcsICdudW1iZXInLCAxLCBsYXRpdHVkZSk7XHJcbiAgICAgICAgdmFsaWRhdGVBcmdUeXBlKCdHZW9Qb2ludCcsICdudW1iZXInLCAyLCBsb25naXR1ZGUpO1xyXG4gICAgICAgIGlmICghaXNGaW5pdGUobGF0aXR1ZGUpIHx8IGxhdGl0dWRlIDwgLTkwIHx8IGxhdGl0dWRlID4gOTApIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuSU5WQUxJRF9BUkdVTUVOVCwgJ0xhdGl0dWRlIG11c3QgYmUgYSBudW1iZXIgYmV0d2VlbiAtOTAgYW5kIDkwLCBidXQgd2FzOiAnICsgbGF0aXR1ZGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIWlzRmluaXRlKGxvbmdpdHVkZSkgfHwgbG9uZ2l0dWRlIDwgLTE4MCB8fCBsb25naXR1ZGUgPiAxODApIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuSU5WQUxJRF9BUkdVTUVOVCwgJ0xvbmdpdHVkZSBtdXN0IGJlIGEgbnVtYmVyIGJldHdlZW4gLTE4MCBhbmQgMTgwLCBidXQgd2FzOiAnICsgbG9uZ2l0dWRlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fbGF0ID0gbGF0aXR1ZGU7XHJcbiAgICAgICAgdGhpcy5fbG9uZyA9IGxvbmdpdHVkZTtcclxuICAgIH1cclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShHZW9Qb2ludC5wcm90b3R5cGUsIFwibGF0aXR1ZGVcIiwge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFJldHVybnMgdGhlIGxhdGl0dWRlIG9mIHRoaXMgZ2VvIHBvaW50LCBhIG51bWJlciBiZXR3ZWVuIC05MCBhbmQgOTAuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9sYXQ7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoR2VvUG9pbnQucHJvdG90eXBlLCBcImxvbmdpdHVkZVwiLCB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogUmV0dXJucyB0aGUgbG9uZ2l0dWRlIG9mIHRoaXMgZ2VvIHBvaW50LCBhIG51bWJlciBiZXR3ZWVuIC0xODAgYW5kIDE4MC5cclxuICAgICAgICAgKi9cclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2xvbmc7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBHZW9Qb2ludC5wcm90b3R5cGUuaXNFcXVhbCA9IGZ1bmN0aW9uIChvdGhlcikge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9sYXQgPT09IG90aGVyLl9sYXQgJiYgdGhpcy5fbG9uZyA9PT0gb3RoZXIuX2xvbmc7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBBY3R1YWxseSBwcml2YXRlIHRvIEpTIGNvbnN1bWVycyBvZiBvdXIgQVBJLCBzbyB0aGlzIGZ1bmN0aW9uIGlzIHByZWZpeGVkXHJcbiAgICAgKiB3aXRoIGFuIHVuZGVyc2NvcmUuXHJcbiAgICAgKi9cclxuICAgIEdlb1BvaW50LnByb3RvdHlwZS5fY29tcGFyZVRvID0gZnVuY3Rpb24gKG90aGVyKSB7XHJcbiAgICAgICAgcmV0dXJuIChwcmltaXRpdmVDb21wYXJhdG9yKHRoaXMuX2xhdCwgb3RoZXIuX2xhdCkgfHxcclxuICAgICAgICAgICAgcHJpbWl0aXZlQ29tcGFyYXRvcih0aGlzLl9sb25nLCBvdGhlci5fbG9uZykpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBHZW9Qb2ludDtcclxufSgpKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKiBUcmFuc2Zvcm1zIGEgdmFsdWUgaW50byBhIHNlcnZlci1nZW5lcmF0ZWQgdGltZXN0YW1wLiAqL1xyXG52YXIgU2VydmVyVGltZXN0YW1wVHJhbnNmb3JtID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gU2VydmVyVGltZXN0YW1wVHJhbnNmb3JtKCkge1xyXG4gICAgfVxyXG4gICAgU2VydmVyVGltZXN0YW1wVHJhbnNmb3JtLnByb3RvdHlwZS5hcHBseVRvTG9jYWxWaWV3ID0gZnVuY3Rpb24gKHByZXZpb3VzVmFsdWUsIGxvY2FsV3JpdGVUaW1lKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBTZXJ2ZXJUaW1lc3RhbXBWYWx1ZShsb2NhbFdyaXRlVGltZSwgcHJldmlvdXNWYWx1ZSk7XHJcbiAgICB9O1xyXG4gICAgU2VydmVyVGltZXN0YW1wVHJhbnNmb3JtLnByb3RvdHlwZS5hcHBseVRvUmVtb3RlRG9jdW1lbnQgPSBmdW5jdGlvbiAocHJldmlvdXNWYWx1ZSwgdHJhbnNmb3JtUmVzdWx0KSB7XHJcbiAgICAgICAgcmV0dXJuIHRyYW5zZm9ybVJlc3VsdDtcclxuICAgIH07XHJcbiAgICBTZXJ2ZXJUaW1lc3RhbXBUcmFuc2Zvcm0ucHJvdG90eXBlLmNvbXB1dGVCYXNlVmFsdWUgPSBmdW5jdGlvbiAocHJldmlvdXNWYWx1ZSkge1xyXG4gICAgICAgIHJldHVybiBudWxsOyAvLyBTZXJ2ZXIgdGltZXN0YW1wcyBhcmUgaWRlbXBvdGVudCBhbmQgZG9uJ3QgcmVxdWlyZSBhIGJhc2UgdmFsdWUuXHJcbiAgICB9O1xyXG4gICAgU2VydmVyVGltZXN0YW1wVHJhbnNmb3JtLnByb3RvdHlwZS5pc0VxdWFsID0gZnVuY3Rpb24gKG90aGVyKSB7XHJcbiAgICAgICAgcmV0dXJuIG90aGVyIGluc3RhbmNlb2YgU2VydmVyVGltZXN0YW1wVHJhbnNmb3JtO1xyXG4gICAgfTtcclxuICAgIFNlcnZlclRpbWVzdGFtcFRyYW5zZm9ybS5pbnN0YW5jZSA9IG5ldyBTZXJ2ZXJUaW1lc3RhbXBUcmFuc2Zvcm0oKTtcclxuICAgIHJldHVybiBTZXJ2ZXJUaW1lc3RhbXBUcmFuc2Zvcm07XHJcbn0oKSk7XHJcbi8qKiBUcmFuc2Zvcm1zIGFuIGFycmF5IHZhbHVlIHZpYSBhIHVuaW9uIG9wZXJhdGlvbi4gKi9cclxudmFyIEFycmF5VW5pb25UcmFuc2Zvcm1PcGVyYXRpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBBcnJheVVuaW9uVHJhbnNmb3JtT3BlcmF0aW9uKGVsZW1lbnRzKSB7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50cyA9IGVsZW1lbnRzO1xyXG4gICAgfVxyXG4gICAgQXJyYXlVbmlvblRyYW5zZm9ybU9wZXJhdGlvbi5wcm90b3R5cGUuYXBwbHlUb0xvY2FsVmlldyA9IGZ1bmN0aW9uIChwcmV2aW91c1ZhbHVlLCBsb2NhbFdyaXRlVGltZSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmFwcGx5KHByZXZpb3VzVmFsdWUpO1xyXG4gICAgfTtcclxuICAgIEFycmF5VW5pb25UcmFuc2Zvcm1PcGVyYXRpb24ucHJvdG90eXBlLmFwcGx5VG9SZW1vdGVEb2N1bWVudCA9IGZ1bmN0aW9uIChwcmV2aW91c1ZhbHVlLCB0cmFuc2Zvcm1SZXN1bHQpIHtcclxuICAgICAgICAvLyBUaGUgc2VydmVyIGp1c3Qgc2VuZHMgbnVsbCBhcyB0aGUgdHJhbnNmb3JtIHJlc3VsdCBmb3IgYXJyYXkgb3BlcmF0aW9ucyxcclxuICAgICAgICAvLyBzbyB3ZSBoYXZlIHRvIGNhbGN1bGF0ZSBhIHJlc3VsdCB0aGUgc2FtZSBhcyB3ZSBkbyBmb3IgbG9jYWxcclxuICAgICAgICAvLyBhcHBsaWNhdGlvbnMuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYXBwbHkocHJldmlvdXNWYWx1ZSk7XHJcbiAgICB9O1xyXG4gICAgQXJyYXlVbmlvblRyYW5zZm9ybU9wZXJhdGlvbi5wcm90b3R5cGUuYXBwbHkgPSBmdW5jdGlvbiAocHJldmlvdXNWYWx1ZSkge1xyXG4gICAgICAgIHZhciByZXN1bHQgPSBjb2VyY2VkRmllbGRWYWx1ZXNBcnJheShwcmV2aW91c1ZhbHVlKTtcclxuICAgICAgICB2YXIgX2xvb3BfMSA9IGZ1bmN0aW9uICh0b1VuaW9uKSB7XHJcbiAgICAgICAgICAgIGlmICghcmVzdWx0LmZpbmQoZnVuY3Rpb24gKGVsZW1lbnQpIHsgcmV0dXJuIGVsZW1lbnQuaXNFcXVhbCh0b1VuaW9uKTsgfSkpIHtcclxuICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKHRvVW5pb24pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gdGhpcy5lbGVtZW50czsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgdmFyIHRvVW5pb24gPSBfYVtfaV07XHJcbiAgICAgICAgICAgIF9sb29wXzEodG9Vbmlvbik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBuZXcgQXJyYXlWYWx1ZShyZXN1bHQpO1xyXG4gICAgfTtcclxuICAgIEFycmF5VW5pb25UcmFuc2Zvcm1PcGVyYXRpb24ucHJvdG90eXBlLmNvbXB1dGVCYXNlVmFsdWUgPSBmdW5jdGlvbiAocHJldmlvdXNWYWx1ZSkge1xyXG4gICAgICAgIHJldHVybiBudWxsOyAvLyBBcnJheSB0cmFuc2Zvcm1zIGFyZSBpZGVtcG90ZW50IGFuZCBkb24ndCByZXF1aXJlIGEgYmFzZSB2YWx1ZS5cclxuICAgIH07XHJcbiAgICBBcnJheVVuaW9uVHJhbnNmb3JtT3BlcmF0aW9uLnByb3RvdHlwZS5pc0VxdWFsID0gZnVuY3Rpb24gKG90aGVyKSB7XHJcbiAgICAgICAgcmV0dXJuIChvdGhlciBpbnN0YW5jZW9mIEFycmF5VW5pb25UcmFuc2Zvcm1PcGVyYXRpb24gJiZcclxuICAgICAgICAgICAgYXJyYXlFcXVhbHMob3RoZXIuZWxlbWVudHMsIHRoaXMuZWxlbWVudHMpKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gQXJyYXlVbmlvblRyYW5zZm9ybU9wZXJhdGlvbjtcclxufSgpKTtcclxuLyoqIFRyYW5zZm9ybXMgYW4gYXJyYXkgdmFsdWUgdmlhIGEgcmVtb3ZlIG9wZXJhdGlvbi4gKi9cclxudmFyIEFycmF5UmVtb3ZlVHJhbnNmb3JtT3BlcmF0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gQXJyYXlSZW1vdmVUcmFuc2Zvcm1PcGVyYXRpb24oZWxlbWVudHMpIHtcclxuICAgICAgICB0aGlzLmVsZW1lbnRzID0gZWxlbWVudHM7XHJcbiAgICB9XHJcbiAgICBBcnJheVJlbW92ZVRyYW5zZm9ybU9wZXJhdGlvbi5wcm90b3R5cGUuYXBwbHlUb0xvY2FsVmlldyA9IGZ1bmN0aW9uIChwcmV2aW91c1ZhbHVlLCBsb2NhbFdyaXRlVGltZSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmFwcGx5KHByZXZpb3VzVmFsdWUpO1xyXG4gICAgfTtcclxuICAgIEFycmF5UmVtb3ZlVHJhbnNmb3JtT3BlcmF0aW9uLnByb3RvdHlwZS5hcHBseVRvUmVtb3RlRG9jdW1lbnQgPSBmdW5jdGlvbiAocHJldmlvdXNWYWx1ZSwgdHJhbnNmb3JtUmVzdWx0KSB7XHJcbiAgICAgICAgLy8gVGhlIHNlcnZlciBqdXN0IHNlbmRzIG51bGwgYXMgdGhlIHRyYW5zZm9ybSByZXN1bHQgZm9yIGFycmF5IG9wZXJhdGlvbnMsXHJcbiAgICAgICAgLy8gc28gd2UgaGF2ZSB0byBjYWxjdWxhdGUgYSByZXN1bHQgdGhlIHNhbWUgYXMgd2UgZG8gZm9yIGxvY2FsXHJcbiAgICAgICAgLy8gYXBwbGljYXRpb25zLlxyXG4gICAgICAgIHJldHVybiB0aGlzLmFwcGx5KHByZXZpb3VzVmFsdWUpO1xyXG4gICAgfTtcclxuICAgIEFycmF5UmVtb3ZlVHJhbnNmb3JtT3BlcmF0aW9uLnByb3RvdHlwZS5hcHBseSA9IGZ1bmN0aW9uIChwcmV2aW91c1ZhbHVlKSB7XHJcbiAgICAgICAgdmFyIHJlc3VsdCA9IGNvZXJjZWRGaWVsZFZhbHVlc0FycmF5KHByZXZpb3VzVmFsdWUpO1xyXG4gICAgICAgIHZhciBfbG9vcF8yID0gZnVuY3Rpb24gKHRvUmVtb3ZlKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdCA9IHJlc3VsdC5maWx0ZXIoZnVuY3Rpb24gKGVsZW1lbnQpIHsgcmV0dXJuICFlbGVtZW50LmlzRXF1YWwodG9SZW1vdmUpOyB9KTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSB0aGlzLmVsZW1lbnRzOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICB2YXIgdG9SZW1vdmUgPSBfYVtfaV07XHJcbiAgICAgICAgICAgIF9sb29wXzIodG9SZW1vdmUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbmV3IEFycmF5VmFsdWUocmVzdWx0KTtcclxuICAgIH07XHJcbiAgICBBcnJheVJlbW92ZVRyYW5zZm9ybU9wZXJhdGlvbi5wcm90b3R5cGUuY29tcHV0ZUJhc2VWYWx1ZSA9IGZ1bmN0aW9uIChwcmV2aW91c1ZhbHVlKSB7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7IC8vIEFycmF5IHRyYW5zZm9ybXMgYXJlIGlkZW1wb3RlbnQgYW5kIGRvbid0IHJlcXVpcmUgYSBiYXNlIHZhbHVlLlxyXG4gICAgfTtcclxuICAgIEFycmF5UmVtb3ZlVHJhbnNmb3JtT3BlcmF0aW9uLnByb3RvdHlwZS5pc0VxdWFsID0gZnVuY3Rpb24gKG90aGVyKSB7XHJcbiAgICAgICAgcmV0dXJuIChvdGhlciBpbnN0YW5jZW9mIEFycmF5UmVtb3ZlVHJhbnNmb3JtT3BlcmF0aW9uICYmXHJcbiAgICAgICAgICAgIGFycmF5RXF1YWxzKG90aGVyLmVsZW1lbnRzLCB0aGlzLmVsZW1lbnRzKSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEFycmF5UmVtb3ZlVHJhbnNmb3JtT3BlcmF0aW9uO1xyXG59KCkpO1xyXG4vKipcclxuICogSW1wbGVtZW50cyB0aGUgYmFja2VuZCBzZW1hbnRpY3MgZm9yIGxvY2FsbHkgY29tcHV0ZWQgTlVNRVJJQ19BREQgKGluY3JlbWVudClcclxuICogdHJhbnNmb3Jtcy4gQ29udmVydHMgYWxsIGZpZWxkIHZhbHVlcyB0byBpbnRlZ2VycyBvciBkb3VibGVzLCBidXQgdW5saWtlIHRoZVxyXG4gKiBiYWNrZW5kIGRvZXMgbm90IGNhcCBpbnRlZ2VyIHZhbHVlcyBhdCAyXjYzLiBJbnN0ZWFkLCBKYXZhU2NyaXB0IG51bWJlclxyXG4gKiBhcml0aG1ldGljIGlzIHVzZWQgYW5kIHByZWNpc2lvbiBsb3NzIGNhbiBvY2N1ciBmb3IgdmFsdWVzIGdyZWF0ZXIgdGhhbiAyXjUzLlxyXG4gKi9cclxudmFyIE51bWVyaWNJbmNyZW1lbnRUcmFuc2Zvcm1PcGVyYXRpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBOdW1lcmljSW5jcmVtZW50VHJhbnNmb3JtT3BlcmF0aW9uKG9wZXJhbmQpIHtcclxuICAgICAgICB0aGlzLm9wZXJhbmQgPSBvcGVyYW5kO1xyXG4gICAgfVxyXG4gICAgTnVtZXJpY0luY3JlbWVudFRyYW5zZm9ybU9wZXJhdGlvbi5wcm90b3R5cGUuYXBwbHlUb0xvY2FsVmlldyA9IGZ1bmN0aW9uIChwcmV2aW91c1ZhbHVlLCBsb2NhbFdyaXRlVGltZSkge1xyXG4gICAgICAgIHZhciBiYXNlVmFsdWUgPSB0aGlzLmNvbXB1dGVCYXNlVmFsdWUocHJldmlvdXNWYWx1ZSk7XHJcbiAgICAgICAgLy8gUE9SVElORyBOT1RFOiBTaW5jZSBKYXZhU2NyaXB0J3MgaW50ZWdlciBhcml0aG1ldGljIGlzIGxpbWl0ZWQgdG8gNTMgYml0XHJcbiAgICAgICAgLy8gcHJlY2lzaW9uIGFuZCByZXNvbHZlcyBvdmVyZmxvd3MgYnkgcmVkdWNpbmcgcHJlY2lzaW9uLCB3ZSBkbyBub3RcclxuICAgICAgICAvLyBtYW51YWxseSBjYXAgb3ZlcmZsb3dzIGF0IDJeNjMuXHJcbiAgICAgICAgLy8gUmV0dXJuIGFuIGludGVnZXIgdmFsdWUgaWZmIHRoZSBwcmV2aW91cyB2YWx1ZSBhbmQgdGhlIG9wZXJhbmQgaXMgYW5cclxuICAgICAgICAvLyBpbnRlZ2VyLlxyXG4gICAgICAgIGlmIChiYXNlVmFsdWUgaW5zdGFuY2VvZiBJbnRlZ2VyVmFsdWUgJiZcclxuICAgICAgICAgICAgdGhpcy5vcGVyYW5kIGluc3RhbmNlb2YgSW50ZWdlclZhbHVlKSB7XHJcbiAgICAgICAgICAgIHZhciBzdW0gPSBiYXNlVmFsdWUuaW50ZXJuYWxWYWx1ZSArIHRoaXMub3BlcmFuZC5pbnRlcm5hbFZhbHVlO1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEludGVnZXJWYWx1ZShzdW0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdmFyIHN1bSA9IGJhc2VWYWx1ZS5pbnRlcm5hbFZhbHVlICsgdGhpcy5vcGVyYW5kLmludGVybmFsVmFsdWU7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgRG91YmxlVmFsdWUoc3VtKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgTnVtZXJpY0luY3JlbWVudFRyYW5zZm9ybU9wZXJhdGlvbi5wcm90b3R5cGUuYXBwbHlUb1JlbW90ZURvY3VtZW50ID0gZnVuY3Rpb24gKHByZXZpb3VzVmFsdWUsIHRyYW5zZm9ybVJlc3VsdCkge1xyXG4gICAgICAgIGFzc2VydCh0cmFuc2Zvcm1SZXN1bHQgIT09IG51bGwsIFwiRGlkbid0IHJlY2VpdmUgdHJhbnNmb3JtUmVzdWx0IGZvciBOVU1FUklDX0FERCB0cmFuc2Zvcm1cIik7XHJcbiAgICAgICAgcmV0dXJuIHRyYW5zZm9ybVJlc3VsdDtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEluc3BlY3RzIHRoZSBwcm92aWRlZCB2YWx1ZSwgcmV0dXJuaW5nIHRoZSBwcm92aWRlZCB2YWx1ZSBpZiBpdCBpcyBhbHJlYWR5XHJcbiAgICAgKiBhIE51bWJlclZhbHVlLCBvdGhlcndpc2UgcmV0dXJuaW5nIGEgY29lcmNlZCBJbnRlZ2VyVmFsdWUgb2YgMC5cclxuICAgICAqL1xyXG4gICAgTnVtZXJpY0luY3JlbWVudFRyYW5zZm9ybU9wZXJhdGlvbi5wcm90b3R5cGUuY29tcHV0ZUJhc2VWYWx1ZSA9IGZ1bmN0aW9uIChwcmV2aW91c1ZhbHVlKSB7XHJcbiAgICAgICAgcmV0dXJuIHByZXZpb3VzVmFsdWUgaW5zdGFuY2VvZiBOdW1iZXJWYWx1ZVxyXG4gICAgICAgICAgICA/IHByZXZpb3VzVmFsdWVcclxuICAgICAgICAgICAgOiBuZXcgSW50ZWdlclZhbHVlKDApO1xyXG4gICAgfTtcclxuICAgIE51bWVyaWNJbmNyZW1lbnRUcmFuc2Zvcm1PcGVyYXRpb24ucHJvdG90eXBlLmlzRXF1YWwgPSBmdW5jdGlvbiAob3RoZXIpIHtcclxuICAgICAgICByZXR1cm4gKG90aGVyIGluc3RhbmNlb2YgTnVtZXJpY0luY3JlbWVudFRyYW5zZm9ybU9wZXJhdGlvbiAmJlxyXG4gICAgICAgICAgICB0aGlzLm9wZXJhbmQuaXNFcXVhbChvdGhlci5vcGVyYW5kKSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIE51bWVyaWNJbmNyZW1lbnRUcmFuc2Zvcm1PcGVyYXRpb247XHJcbn0oKSk7XHJcbmZ1bmN0aW9uIGNvZXJjZWRGaWVsZFZhbHVlc0FycmF5KHZhbHVlKSB7XHJcbiAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBBcnJheVZhbHVlKSB7XHJcbiAgICAgICAgcmV0dXJuIHZhbHVlLmludGVybmFsVmFsdWUuc2xpY2UoKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIC8vIGNvZXJjZSB0byBlbXB0eSBhcnJheS5cclxuICAgICAgICByZXR1cm4gW107XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnZhciBFeGlzdGVuY2VGaWx0ZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICAvLyBUT0RPKGIvMzMwNzgxNjMpOiBqdXN0IHVzZSBzaW1wbGVzdCBmb3JtIG9mIGV4aXN0ZW5jZSBmaWx0ZXIgZm9yIG5vd1xyXG4gICAgZnVuY3Rpb24gRXhpc3RlbmNlRmlsdGVyKGNvdW50KSB7XHJcbiAgICAgICAgdGhpcy5jb3VudCA9IGNvdW50O1xyXG4gICAgfVxyXG4gICAgRXhpc3RlbmNlRmlsdGVyLnByb3RvdHlwZS5pc0VxdWFsID0gZnVuY3Rpb24gKG90aGVyKSB7XHJcbiAgICAgICAgcmV0dXJuIG90aGVyICYmIG90aGVyLmNvdW50ID09PSB0aGlzLmNvdW50O1xyXG4gICAgfTtcclxuICAgIHJldHVybiBFeGlzdGVuY2VGaWx0ZXI7XHJcbn0oKSk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG52YXIgRElSRUNUSU9OUyA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgZGlycyA9IHt9O1xyXG4gICAgZGlyc1tEaXJlY3Rpb24uQVNDRU5ESU5HLm5hbWVdID0gJ0FTQ0VORElORyc7XHJcbiAgICBkaXJzW0RpcmVjdGlvbi5ERVNDRU5ESU5HLm5hbWVdID0gJ0RFU0NFTkRJTkcnO1xyXG4gICAgcmV0dXJuIGRpcnM7XHJcbn0pKCk7XHJcbnZhciBPUEVSQVRPUlMgPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIG9wcyA9IHt9O1xyXG4gICAgb3BzW09wZXJhdG9yLkxFU1NfVEhBTi5uYW1lXSA9ICdMRVNTX1RIQU4nO1xyXG4gICAgb3BzW09wZXJhdG9yLkxFU1NfVEhBTl9PUl9FUVVBTC5uYW1lXSA9ICdMRVNTX1RIQU5fT1JfRVFVQUwnO1xyXG4gICAgb3BzW09wZXJhdG9yLkdSRUFURVJfVEhBTi5uYW1lXSA9ICdHUkVBVEVSX1RIQU4nO1xyXG4gICAgb3BzW09wZXJhdG9yLkdSRUFURVJfVEhBTl9PUl9FUVVBTC5uYW1lXSA9ICdHUkVBVEVSX1RIQU5fT1JfRVFVQUwnO1xyXG4gICAgb3BzW09wZXJhdG9yLkVRVUFMLm5hbWVdID0gJ0VRVUFMJztcclxuICAgIG9wc1tPcGVyYXRvci5BUlJBWV9DT05UQUlOUy5uYW1lXSA9ICdBUlJBWV9DT05UQUlOUyc7XHJcbiAgICBvcHNbT3BlcmF0b3IuSU4ubmFtZV0gPSAnSU4nO1xyXG4gICAgb3BzW09wZXJhdG9yLkFSUkFZX0NPTlRBSU5TX0FOWS5uYW1lXSA9ICdBUlJBWV9DT05UQUlOU19BTlknO1xyXG4gICAgcmV0dXJuIG9wcztcclxufSkoKTtcclxuLy8gQSBSZWdFeHAgbWF0Y2hpbmcgSVNPIDg2MDEgVVRDIHRpbWVzdGFtcHMgd2l0aCBvcHRpb25hbCBmcmFjdGlvbi5cclxudmFyIElTT19SRUdfRVhQID0gbmV3IFJlZ0V4cCgvXlxcZHs0fS1cXGRcXGQtXFxkXFxkVFxcZFxcZDpcXGRcXGQ6XFxkXFxkKD86XFwuKFxcZCspKT9aJC8pO1xyXG5mdW5jdGlvbiBhc3NlcnRQcmVzZW50KHZhbHVlLCBkZXNjcmlwdGlvbikge1xyXG4gICAgYXNzZXJ0KCFpc051bGxPclVuZGVmaW5lZCh2YWx1ZSksIGRlc2NyaXB0aW9uICsgJyBpcyBtaXNzaW5nJyk7XHJcbn1cclxuZnVuY3Rpb24gcGFyc2VJbnQ2NCh2YWx1ZSkge1xyXG4gICAgLy8gVE9ETyhiam9ybmljayk6IEhhbmRsZSBpbnQ2NCBncmVhdGVyIHRoYW4gNTMgYml0cy5cclxuICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInKSB7XHJcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgIHJldHVybiBOdW1iZXIodmFsdWUpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIGZhaWwoXCJjYW4ndCBwYXJzZSBcIiArIHZhbHVlKTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogR2VuZXJhdGVzIEpzb25PYmplY3QgdmFsdWVzIGZvciB0aGUgRGF0YXN0b3JlIEFQSSBzdWl0YWJsZSBmb3Igc2VuZGluZyB0b1xyXG4gKiBlaXRoZXIgR1JQQyBzdHViIG1ldGhvZHMgb3IgdmlhIHRoZSBKU09OL0hUVFAgUkVTVCBBUEkuXHJcbiAqIFRPRE8oa2xpbXQpOiBXZSBjYW4gcmVtb3ZlIHRoZSBkYXRhYmFzZUlkIGFyZ3VtZW50IGlmIHdlIGtlZXAgdGhlIGZ1bGxcclxuICogcmVzb3VyY2UgbmFtZSBpbiBkb2N1bWVudHMuXHJcbiAqL1xyXG52YXIgSnNvblByb3RvU2VyaWFsaXplciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEpzb25Qcm90b1NlcmlhbGl6ZXIoZGF0YWJhc2VJZCwgb3B0aW9ucykge1xyXG4gICAgICAgIHRoaXMuZGF0YWJhc2VJZCA9IGRhdGFiYXNlSWQ7XHJcbiAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcclxuICAgIH1cclxuICAgIEpzb25Qcm90b1NlcmlhbGl6ZXIucHJvdG90eXBlLmVtcHR5Qnl0ZVN0cmluZyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAodGhpcy5vcHRpb25zLnVzZVByb3RvM0pzb24pIHtcclxuICAgICAgICAgICAgcmV0dXJuICcnO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBVaW50OEFycmF5KDApO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBKc29uUHJvdG9TZXJpYWxpemVyLnByb3RvdHlwZS51bnNhZmVDYXN0UHJvdG9CeXRlU3RyaW5nID0gZnVuY3Rpb24gKGJ5dGVTdHJpbmcpIHtcclxuICAgICAgICAvLyBieXRlU3RyaW5ncyBjYW4gYmUgZWl0aGVyIHN0cmluZyBvciBVSW50OEFycmF5LCBidXQgdGhlIHR5cGluZ3Mgc2F5XHJcbiAgICAgICAgLy8gaXQncyBhbHdheXMgYSBzdHJpbmcuIENhc3QgYXMgc3RyaW5nIHRvIGF2b2lkIHR5cGUgY2hlY2sgZmFpbGluZ1xyXG4gICAgICAgIHJldHVybiBieXRlU3RyaW5nO1xyXG4gICAgfTtcclxuICAgIEpzb25Qcm90b1NlcmlhbGl6ZXIucHJvdG90eXBlLmZyb21ScGNTdGF0dXMgPSBmdW5jdGlvbiAoc3RhdHVzKSB7XHJcbiAgICAgICAgdmFyIGNvZGUgPSBzdGF0dXMuY29kZSA9PT0gdW5kZWZpbmVkXHJcbiAgICAgICAgICAgID8gQ29kZS5VTktOT1dOXHJcbiAgICAgICAgICAgIDogbWFwQ29kZUZyb21ScGNDb2RlKHN0YXR1cy5jb2RlKTtcclxuICAgICAgICByZXR1cm4gbmV3IEZpcmVzdG9yZUVycm9yKGNvZGUsIHN0YXR1cy5tZXNzYWdlIHx8ICcnKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgYSB2YWx1ZSBmb3IgYSBudW1iZXIgKG9yIG51bGwpIHRoYXQncyBhcHByb3ByaWF0ZSB0byBwdXQgaW50b1xyXG4gICAgICogYSBnb29nbGUucHJvdG9idWYuSW50MzJWYWx1ZSBwcm90by5cclxuICAgICAqIERPIE5PVCBVU0UgVEhJUyBGT1IgQU5ZVEhJTkcgRUxTRS5cclxuICAgICAqIFRoaXMgbWV0aG9kIGNoZWF0cy4gSXQncyB0eXBlZCBhcyByZXR1cm5pbmcgXCJudW1iZXJcIiBiZWNhdXNlIHRoYXQncyB3aGF0XHJcbiAgICAgKiBvdXIgZ2VuZXJhdGVkIHByb3RvIGludGVyZmFjZXMgc2F5IEludDMyVmFsdWUgbXVzdCBiZS4gQnV0IEdSUEMgYWN0dWFsbHlcclxuICAgICAqIGV4cGVjdHMgYSB7IHZhbHVlOiA8bnVtYmVyPiB9IHN0cnVjdC5cclxuICAgICAqL1xyXG4gICAgSnNvblByb3RvU2VyaWFsaXplci5wcm90b3R5cGUudG9JbnQzMlZhbHVlID0gZnVuY3Rpb24gKHZhbCkge1xyXG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMudXNlUHJvdG8zSnNvbiB8fCBpc051bGxPclVuZGVmaW5lZCh2YWwpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB2YWw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBQcm90b2J1ZkpTIHJlcXVpcmVzIHRoYXQgd2Ugd3JhcCBJbnQzMlZhbHVlcy5cclxuICAgICAgICAgICAgLy8gVXNlIGFueSBiZWNhdXNlIHdlIG5lZWQgdG8gbWF0Y2ggZ2VuZXJhdGVkIFByb3RvIHR5cGVzLlxyXG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG4gICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogdmFsIH07XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyBhIG51bWJlciAob3IgbnVsbCkgZnJvbSBhIGdvb2dsZS5wcm90b2J1Zi5JbnQzMlZhbHVlIHByb3RvLlxyXG4gICAgICogRE8gTk9UIFVTRSBUSElTIEZPUiBBTllUSElORyBFTFNFLlxyXG4gICAgICogVGhpcyBtZXRob2QgY2hlYXRzLiBJdCdzIHR5cGVkIGFzIGFjY2VwdGluZyBcIm51bWJlclwiIGJlY2F1c2UgdGhhdCdzIHdoYXRcclxuICAgICAqIG91ciBnZW5lcmF0ZWQgcHJvdG8gaW50ZXJmYWNlcyBzYXkgSW50MzJWYWx1ZSBtdXN0IGJlLCBidXQgaXQgYWN0dWFsbHlcclxuICAgICAqIGFjY2VwdHMgeyB2YWx1ZTogbnVtYmVyIH0gdG8gbWF0Y2ggb3VyIHNlcmlhbGl6YXRpb24gaW4gdG9JbnQzMlZhbHVlKCkuXHJcbiAgICAgKi9cclxuICAgIEpzb25Qcm90b1NlcmlhbGl6ZXIucHJvdG90eXBlLmZyb21JbnQzMlZhbHVlID0gZnVuY3Rpb24gKHZhbCkge1xyXG4gICAgICAgIHZhciByZXN1bHQ7XHJcbiAgICAgICAgaWYgKHR5cGVvZiB2YWwgPT09ICdvYmplY3QnKSB7XHJcbiAgICAgICAgICAgIC8vIFVzZSBhbnkgYmVjYXVzZSB3ZSBuZWVkIHRvIG1hdGNoIGdlbmVyYXRlZCBQcm90byB0eXBlcy5cclxuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuICAgICAgICAgICAgcmVzdWx0ID0gdmFsLnZhbHVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gV2UgYWNjZXB0IHJhdyBudW1iZXJzICh3aXRob3V0IHRoZSB7dmFsdWU6IC4uLiB9IHdyYXBwZXIpIGZvclxyXG4gICAgICAgICAgICAvLyBjb21wYXRpYmlsaXR5IHdpdGggbGVnYWN5IHBlcnNpc3RlZCBkYXRhLlxyXG4gICAgICAgICAgICByZXN1bHQgPSB2YWw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBpc051bGxPclVuZGVmaW5lZChyZXN1bHQpID8gbnVsbCA6IHJlc3VsdDtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgYSB2YWx1ZSBmb3IgYSBEYXRlIHRoYXQncyBhcHByb3ByaWF0ZSB0byBwdXQgaW50byBhIHByb3RvLlxyXG4gICAgICogRE8gTk9UIFVTRSBUSElTIEZPUiBBTllUSElORyBFTFNFLlxyXG4gICAgICogVGhpcyBtZXRob2QgY2hlYXRzLiBJdCdzIHR5cGVkIGFzIHJldHVybmluZyBcInN0cmluZ1wiIGJlY2F1c2UgdGhhdCdzIHdoYXRcclxuICAgICAqIG91ciBnZW5lcmF0ZWQgcHJvdG8gaW50ZXJmYWNlcyBzYXkgZGF0ZXMgbXVzdCBiZS4gQnV0IGl0J3MgZWFzaWVyIGFuZCBzYWZlclxyXG4gICAgICogdG8gYWN0dWFsbHkgcmV0dXJuIGEgVGltZXN0YW1wIHByb3RvLlxyXG4gICAgICovXHJcbiAgICBKc29uUHJvdG9TZXJpYWxpemVyLnByb3RvdHlwZS50b1RpbWVzdGFtcCA9IGZ1bmN0aW9uICh0aW1lc3RhbXApIHtcclxuICAgICAgICBpZiAodGhpcy5vcHRpb25zLnVzZVByb3RvM0pzb24pIHtcclxuICAgICAgICAgICAgLy8gU2VyaWFsaXplIHRvIElTTy04NjAxIGRhdGUgZm9ybWF0LCBidXQgd2l0aCBmdWxsIG5hbm8gcmVzb2x1dGlvbi5cclxuICAgICAgICAgICAgLy8gU2luY2UgSlMgRGF0ZSBoYXMgb25seSBtaWxsaXMsIGxldCdzIG9ubHkgdXNlIGl0IGZvciB0aGUgc2Vjb25kcyBhbmRcclxuICAgICAgICAgICAgLy8gdGhlbiBtYW51YWxseSBhZGQgdGhlIGZyYWN0aW9ucyB0byB0aGUgZW5kLlxyXG4gICAgICAgICAgICB2YXIganNEYXRlU3RyID0gbmV3IERhdGUodGltZXN0YW1wLnNlY29uZHMgKiAxMDAwKS50b0lTT1N0cmluZygpO1xyXG4gICAgICAgICAgICAvLyBSZW1vdmUgLnh4eCBmcmFjIHBhcnQgYW5kIFogaW4gdGhlIGVuZC5cclxuICAgICAgICAgICAgdmFyIHN0clVudGlsU2Vjb25kcyA9IGpzRGF0ZVN0ci5yZXBsYWNlKC9cXC5cXGQqLywgJycpLnJlcGxhY2UoJ1onLCAnJyk7XHJcbiAgICAgICAgICAgIC8vIFBhZCB0aGUgZnJhY3Rpb24gb3V0IHRvIDkgZGlnaXRzIChuYW5vcykuXHJcbiAgICAgICAgICAgIHZhciBuYW5vU3RyID0gKCcwMDAwMDAwMDAnICsgdGltZXN0YW1wLm5hbm9zZWNvbmRzKS5zbGljZSgtOSk7XHJcbiAgICAgICAgICAgIHJldHVybiBzdHJVbnRpbFNlY29uZHMgKyBcIi5cIiArIG5hbm9TdHIgKyBcIlpcIjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBzZWNvbmRzOiAnJyArIHRpbWVzdGFtcC5zZWNvbmRzLFxyXG4gICAgICAgICAgICAgICAgbmFub3M6IHRpbWVzdGFtcC5uYW5vc2Vjb25kc1xyXG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgSnNvblByb3RvU2VyaWFsaXplci5wcm90b3R5cGUuZnJvbVRpbWVzdGFtcCA9IGZ1bmN0aW9uIChkYXRlKSB7XHJcbiAgICAgICAgLy8gVGhlIGpzb24gaW50ZXJmYWNlIChmb3IgdGhlIGJyb3dzZXIpIHdpbGwgcmV0dXJuIGFuIGlzbyB0aW1lc3RhbXAgc3RyaW5nLFxyXG4gICAgICAgIC8vIHdoaWxlIHRoZSBwcm90byBqcyBsaWJyYXJ5IChmb3Igbm9kZSkgd2lsbCByZXR1cm4gYVxyXG4gICAgICAgIC8vIGdvb2dsZS5wcm90b2J1Zi5UaW1lc3RhbXAgaW5zdGFuY2UuXHJcbiAgICAgICAgaWYgKHR5cGVvZiBkYXRlID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICAvLyBUT0RPKGIvMzcyODIyMzcpOiBVc2Ugc3RyaW5ncyBmb3IgUHJvdG8zIHRpbWVzdGFtcHNcclxuICAgICAgICAgICAgLy8gYXNzZXJ0KHRoaXMub3B0aW9ucy51c2VQcm90bzNKc29uLFxyXG4gICAgICAgICAgICAvLyAgICdUaGUgdGltZXN0YW1wIHN0cmluZyBmb3JtYXQgcmVxdWlyZXMgUHJvdG8zLicpO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5mcm9tSXNvODYwMVN0cmluZyhkYXRlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGFzc2VydCghIWRhdGUsICdDYW5ub3QgZGVzZXJpYWxpemUgbnVsbCBvciB1bmRlZmluZWQgdGltZXN0YW1wLicpO1xyXG4gICAgICAgICAgICAvLyBUT0RPKGIvMzcyODIyMzcpOiBVc2Ugc3RyaW5ncyBmb3IgUHJvdG8zIHRpbWVzdGFtcHNcclxuICAgICAgICAgICAgLy8gYXNzZXJ0KCF0aGlzLm9wdGlvbnMudXNlUHJvdG8zSnNvbixcclxuICAgICAgICAgICAgLy8gICAnVGhlIHRpbWVzdGFtcCBpbnN0YW5jZSBmb3JtYXQgcmVxdWlyZXMgUHJvdG8gSlMuJyk7XHJcbiAgICAgICAgICAgIHZhciBzZWNvbmRzID0gcGFyc2VJbnQ2NChkYXRlLnNlY29uZHMgfHwgJzAnKTtcclxuICAgICAgICAgICAgdmFyIG5hbm9zID0gZGF0ZS5uYW5vcyB8fCAwO1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFRpbWVzdGFtcChzZWNvbmRzLCBuYW5vcyk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIEpzb25Qcm90b1NlcmlhbGl6ZXIucHJvdG90eXBlLmZyb21Jc284NjAxU3RyaW5nID0gZnVuY3Rpb24gKHV0Yykge1xyXG4gICAgICAgIC8vIFRoZSBkYXRlIHN0cmluZyBjYW4gaGF2ZSBoaWdoZXIgcHJlY2lzaW9uIChuYW5vcykgdGhhbiB0aGUgRGF0ZSBjbGFzc1xyXG4gICAgICAgIC8vIChtaWxsaXMpLCBzbyB3ZSBkbyBzb21lIGN1c3RvbSBwYXJzaW5nIGhlcmUuXHJcbiAgICAgICAgLy8gUGFyc2UgdGhlIG5hbm9zIHJpZ2h0IG91dCBvZiB0aGUgc3RyaW5nLlxyXG4gICAgICAgIHZhciBuYW5vcyA9IDA7XHJcbiAgICAgICAgdmFyIGZyYWN0aW9uID0gSVNPX1JFR19FWFAuZXhlYyh1dGMpO1xyXG4gICAgICAgIGFzc2VydCghIWZyYWN0aW9uLCAnaW52YWxpZCB0aW1lc3RhbXA6ICcgKyB1dGMpO1xyXG4gICAgICAgIGlmIChmcmFjdGlvblsxXSkge1xyXG4gICAgICAgICAgICAvLyBQYWQgdGhlIGZyYWN0aW9uIG91dCB0byA5IGRpZ2l0cyAobmFub3MpLlxyXG4gICAgICAgICAgICB2YXIgbmFub1N0ciA9IGZyYWN0aW9uWzFdO1xyXG4gICAgICAgICAgICBuYW5vU3RyID0gKG5hbm9TdHIgKyAnMDAwMDAwMDAwJykuc3Vic3RyKDAsIDkpO1xyXG4gICAgICAgICAgICBuYW5vcyA9IE51bWJlcihuYW5vU3RyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gUGFyc2UgdGhlIGRhdGUgdG8gZ2V0IHRoZSBzZWNvbmRzLlxyXG4gICAgICAgIHZhciBkYXRlID0gbmV3IERhdGUodXRjKTtcclxuICAgICAgICB2YXIgc2Vjb25kcyA9IE1hdGguZmxvb3IoZGF0ZS5nZXRUaW1lKCkgLyAxMDAwKTtcclxuICAgICAgICByZXR1cm4gbmV3IFRpbWVzdGFtcChzZWNvbmRzLCBuYW5vcyk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIGEgdmFsdWUgZm9yIGJ5dGVzIHRoYXQncyBhcHByb3ByaWF0ZSB0byBwdXQgaW4gYSBwcm90by5cclxuICAgICAqIERPIE5PVCBVU0UgVEhJUyBGT1IgQU5ZVEhJTkcgRUxTRS5cclxuICAgICAqIFRoaXMgbWV0aG9kIGNoZWF0cy4gSXQncyB0eXBlZCBhcyByZXR1cm5pbmcgXCJzdHJpbmdcIiBiZWNhdXNlIHRoYXQncyB3aGF0XHJcbiAgICAgKiBvdXIgZ2VuZXJhdGVkIHByb3RvIGludGVyZmFjZXMgc2F5IGJ5dGVzIG11c3QgYmUuIEJ1dCBpdCBzaG91bGQgcmV0dXJuXHJcbiAgICAgKiBhbiBVaW50OEFycmF5IGluIE5vZGUuXHJcbiAgICAgKi9cclxuICAgIEpzb25Qcm90b1NlcmlhbGl6ZXIucHJvdG90eXBlLnRvQnl0ZXMgPSBmdW5jdGlvbiAoYnl0ZXMpIHtcclxuICAgICAgICBpZiAodGhpcy5vcHRpb25zLnVzZVByb3RvM0pzb24pIHtcclxuICAgICAgICAgICAgcmV0dXJuIGJ5dGVzLnRvQmFzZTY0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBUaGUgdHlwaW5ncyBzYXkgaXQncyBhIHN0cmluZywgYnV0IGl0IG5lZWRzIHRvIGJlIGEgVWludDhBcnJheSBpbiBOb2RlLlxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy51bnNhZmVDYXN0UHJvdG9CeXRlU3RyaW5nKGJ5dGVzLnRvVWludDhBcnJheSgpKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBQYXJzZSB0aGUgYmxvYiBmcm9tIHRoZSBwcm90b3MgaW50byB0aGUgaW50ZXJuYWwgQmxvYiBjbGFzcy4gTm90ZSB0aGF0IHRoZVxyXG4gICAgICogdHlwaW5ncyBhc3N1bWUgYWxsIGJsb2JzIGFyZSBzdHJpbmdzLCBidXQgdGhleSBhcmUgYWN0dWFsbHkgVWludDhBcnJheXNcclxuICAgICAqIG9uIE5vZGUuXHJcbiAgICAgKi9cclxuICAgIEpzb25Qcm90b1NlcmlhbGl6ZXIucHJvdG90eXBlLmZyb21CbG9iID0gZnVuY3Rpb24gKGJsb2IpIHtcclxuICAgICAgICBpZiAodHlwZW9mIGJsb2IgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgIGFzc2VydCh0aGlzLm9wdGlvbnMudXNlUHJvdG8zSnNvbiwgJ0V4cGVjdGVkIGJ5dGVzIHRvIGJlIHBhc3NlZCBpbiBhcyBVaW50OEFycmF5LCBidXQgZ290IGEgc3RyaW5nIGluc3RlYWQuJyk7XHJcbiAgICAgICAgICAgIHJldHVybiBCbG9iLmZyb21CYXNlNjRTdHJpbmcoYmxvYik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBhc3NlcnQoIXRoaXMub3B0aW9ucy51c2VQcm90bzNKc29uLCAnRXhwZWN0ZWQgYnl0ZXMgdG8gYmUgcGFzc2VkIGluIGFzIFVpbnQ4QXJyYXksIGJ1dCBnb3QgYSBzdHJpbmcgaW5zdGVhZC4nKTtcclxuICAgICAgICAgICAgcmV0dXJuIEJsb2IuZnJvbVVpbnQ4QXJyYXkoYmxvYik7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIEpzb25Qcm90b1NlcmlhbGl6ZXIucHJvdG90eXBlLnRvVmVyc2lvbiA9IGZ1bmN0aW9uICh2ZXJzaW9uKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudG9UaW1lc3RhbXAodmVyc2lvbi50b1RpbWVzdGFtcCgpKTtcclxuICAgIH07XHJcbiAgICBKc29uUHJvdG9TZXJpYWxpemVyLnByb3RvdHlwZS5mcm9tVmVyc2lvbiA9IGZ1bmN0aW9uICh2ZXJzaW9uKSB7XHJcbiAgICAgICAgYXNzZXJ0KCEhdmVyc2lvbiwgXCJUcnlpbmcgdG8gZGVzZXJpYWxpemUgdmVyc2lvbiB0aGF0IGlzbid0IHNldFwiKTtcclxuICAgICAgICByZXR1cm4gU25hcHNob3RWZXJzaW9uLmZyb21UaW1lc3RhbXAodGhpcy5mcm9tVGltZXN0YW1wKHZlcnNpb24pKTtcclxuICAgIH07XHJcbiAgICBKc29uUHJvdG9TZXJpYWxpemVyLnByb3RvdHlwZS50b1Jlc291cmNlTmFtZSA9IGZ1bmN0aW9uIChkYXRhYmFzZUlkLCBwYXRoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZnVsbHlRdWFsaWZpZWRQcmVmaXhQYXRoKGRhdGFiYXNlSWQpXHJcbiAgICAgICAgICAgIC5jaGlsZCgnZG9jdW1lbnRzJylcclxuICAgICAgICAgICAgLmNoaWxkKHBhdGgpXHJcbiAgICAgICAgICAgIC5jYW5vbmljYWxTdHJpbmcoKTtcclxuICAgIH07XHJcbiAgICBKc29uUHJvdG9TZXJpYWxpemVyLnByb3RvdHlwZS5mcm9tUmVzb3VyY2VOYW1lID0gZnVuY3Rpb24gKG5hbWUpIHtcclxuICAgICAgICB2YXIgcmVzb3VyY2UgPSBSZXNvdXJjZVBhdGguZnJvbVN0cmluZyhuYW1lKTtcclxuICAgICAgICBhc3NlcnQodGhpcy5pc1ZhbGlkUmVzb3VyY2VOYW1lKHJlc291cmNlKSwgJ1RyaWVkIHRvIGRlc2VyaWFsaXplIGludmFsaWQga2V5ICcgKyByZXNvdXJjZS50b1N0cmluZygpKTtcclxuICAgICAgICByZXR1cm4gcmVzb3VyY2U7XHJcbiAgICB9O1xyXG4gICAgSnNvblByb3RvU2VyaWFsaXplci5wcm90b3R5cGUudG9OYW1lID0gZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnRvUmVzb3VyY2VOYW1lKHRoaXMuZGF0YWJhc2VJZCwga2V5LnBhdGgpO1xyXG4gICAgfTtcclxuICAgIEpzb25Qcm90b1NlcmlhbGl6ZXIucHJvdG90eXBlLmZyb21OYW1lID0gZnVuY3Rpb24gKG5hbWUpIHtcclxuICAgICAgICB2YXIgcmVzb3VyY2UgPSB0aGlzLmZyb21SZXNvdXJjZU5hbWUobmFtZSk7XHJcbiAgICAgICAgYXNzZXJ0KHJlc291cmNlLmdldCgxKSA9PT0gdGhpcy5kYXRhYmFzZUlkLnByb2plY3RJZCwgJ1RyaWVkIHRvIGRlc2VyaWFsaXplIGtleSBmcm9tIGRpZmZlcmVudCBwcm9qZWN0OiAnICtcclxuICAgICAgICAgICAgcmVzb3VyY2UuZ2V0KDEpICtcclxuICAgICAgICAgICAgJyB2cyAnICtcclxuICAgICAgICAgICAgdGhpcy5kYXRhYmFzZUlkLnByb2plY3RJZCk7XHJcbiAgICAgICAgYXNzZXJ0KCghcmVzb3VyY2UuZ2V0KDMpICYmICF0aGlzLmRhdGFiYXNlSWQuZGF0YWJhc2UpIHx8XHJcbiAgICAgICAgICAgIHJlc291cmNlLmdldCgzKSA9PT0gdGhpcy5kYXRhYmFzZUlkLmRhdGFiYXNlLCAnVHJpZWQgdG8gZGVzZXJpYWxpemUga2V5IGZyb20gZGlmZmVyZW50IGRhdGFiYXNlOiAnICtcclxuICAgICAgICAgICAgcmVzb3VyY2UuZ2V0KDMpICtcclxuICAgICAgICAgICAgJyB2cyAnICtcclxuICAgICAgICAgICAgdGhpcy5kYXRhYmFzZUlkLmRhdGFiYXNlKTtcclxuICAgICAgICByZXR1cm4gbmV3IERvY3VtZW50S2V5KHRoaXMuZXh0cmFjdExvY2FsUGF0aEZyb21SZXNvdXJjZU5hbWUocmVzb3VyY2UpKTtcclxuICAgIH07XHJcbiAgICBKc29uUHJvdG9TZXJpYWxpemVyLnByb3RvdHlwZS50b1F1ZXJ5UGF0aCA9IGZ1bmN0aW9uIChwYXRoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudG9SZXNvdXJjZU5hbWUodGhpcy5kYXRhYmFzZUlkLCBwYXRoKTtcclxuICAgIH07XHJcbiAgICBKc29uUHJvdG9TZXJpYWxpemVyLnByb3RvdHlwZS5mcm9tUXVlcnlQYXRoID0gZnVuY3Rpb24gKG5hbWUpIHtcclxuICAgICAgICB2YXIgcmVzb3VyY2VOYW1lID0gdGhpcy5mcm9tUmVzb3VyY2VOYW1lKG5hbWUpO1xyXG4gICAgICAgIC8vIEluIHYxYmV0YTEgcXVlcmllcyBmb3IgY29sbGVjdGlvbnMgYXQgdGhlIHJvb3QgZGlkIG5vdCBoYXZlIGEgdHJhaWxpbmdcclxuICAgICAgICAvLyBcIi9kb2N1bWVudHNcIi4gSW4gdjEgYWxsIHJlc291cmNlIHBhdGhzIGNvbnRhaW4gXCIvZG9jdW1lbnRzXCIuIFByZXNlcnZlIHRoZVxyXG4gICAgICAgIC8vIGFiaWxpdHkgdG8gcmVhZCB0aGUgdjFiZXRhMSBmb3JtIGZvciBjb21wYXRpYmlsaXR5IHdpdGggcXVlcmllcyBwZXJzaXN0ZWRcclxuICAgICAgICAvLyBpbiB0aGUgbG9jYWwgdGFyZ2V0IGNhY2hlLlxyXG4gICAgICAgIGlmIChyZXNvdXJjZU5hbWUubGVuZ3RoID09PSA0KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBSZXNvdXJjZVBhdGguRU1QVFlfUEFUSDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZXh0cmFjdExvY2FsUGF0aEZyb21SZXNvdXJjZU5hbWUocmVzb3VyY2VOYW1lKTtcclxuICAgIH07XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoSnNvblByb3RvU2VyaWFsaXplci5wcm90b3R5cGUsIFwiZW5jb2RlZERhdGFiYXNlSWRcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgcGF0aCA9IG5ldyBSZXNvdXJjZVBhdGgoW1xyXG4gICAgICAgICAgICAgICAgJ3Byb2plY3RzJyxcclxuICAgICAgICAgICAgICAgIHRoaXMuZGF0YWJhc2VJZC5wcm9qZWN0SWQsXHJcbiAgICAgICAgICAgICAgICAnZGF0YWJhc2VzJyxcclxuICAgICAgICAgICAgICAgIHRoaXMuZGF0YWJhc2VJZC5kYXRhYmFzZVxyXG4gICAgICAgICAgICBdKTtcclxuICAgICAgICAgICAgcmV0dXJuIHBhdGguY2Fub25pY2FsU3RyaW5nKCk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBKc29uUHJvdG9TZXJpYWxpemVyLnByb3RvdHlwZS5mdWxseVF1YWxpZmllZFByZWZpeFBhdGggPSBmdW5jdGlvbiAoZGF0YWJhc2VJZCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgUmVzb3VyY2VQYXRoKFtcclxuICAgICAgICAgICAgJ3Byb2plY3RzJyxcclxuICAgICAgICAgICAgZGF0YWJhc2VJZC5wcm9qZWN0SWQsXHJcbiAgICAgICAgICAgICdkYXRhYmFzZXMnLFxyXG4gICAgICAgICAgICBkYXRhYmFzZUlkLmRhdGFiYXNlXHJcbiAgICAgICAgXSk7XHJcbiAgICB9O1xyXG4gICAgSnNvblByb3RvU2VyaWFsaXplci5wcm90b3R5cGUuZXh0cmFjdExvY2FsUGF0aEZyb21SZXNvdXJjZU5hbWUgPSBmdW5jdGlvbiAocmVzb3VyY2VOYW1lKSB7XHJcbiAgICAgICAgYXNzZXJ0KHJlc291cmNlTmFtZS5sZW5ndGggPiA0ICYmIHJlc291cmNlTmFtZS5nZXQoNCkgPT09ICdkb2N1bWVudHMnLCAndHJpZWQgdG8gZGVzZXJpYWxpemUgaW52YWxpZCBrZXkgJyArIHJlc291cmNlTmFtZS50b1N0cmluZygpKTtcclxuICAgICAgICByZXR1cm4gcmVzb3VyY2VOYW1lLnBvcEZpcnN0KDUpO1xyXG4gICAgfTtcclxuICAgIEpzb25Qcm90b1NlcmlhbGl6ZXIucHJvdG90eXBlLmlzVmFsaWRSZXNvdXJjZU5hbWUgPSBmdW5jdGlvbiAocGF0aCkge1xyXG4gICAgICAgIC8vIFJlc291cmNlIG5hbWVzIGhhdmUgYXQgbGVhc3QgNCBjb21wb25lbnRzIChwcm9qZWN0IElELCBkYXRhYmFzZSBJRClcclxuICAgICAgICByZXR1cm4gKHBhdGgubGVuZ3RoID49IDQgJiZcclxuICAgICAgICAgICAgcGF0aC5nZXQoMCkgPT09ICdwcm9qZWN0cycgJiZcclxuICAgICAgICAgICAgcGF0aC5nZXQoMikgPT09ICdkYXRhYmFzZXMnKTtcclxuICAgIH07XHJcbiAgICBKc29uUHJvdG9TZXJpYWxpemVyLnByb3RvdHlwZS50b1ZhbHVlID0gZnVuY3Rpb24gKHZhbCkge1xyXG4gICAgICAgIGlmICh2YWwgaW5zdGFuY2VvZiBOdWxsVmFsdWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHsgbnVsbFZhbHVlOiAnTlVMTF9WQUxVRScgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodmFsIGluc3RhbmNlb2YgQm9vbGVhblZhbHVlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7IGJvb2xlYW5WYWx1ZTogdmFsLnZhbHVlKCkgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodmFsIGluc3RhbmNlb2YgSW50ZWdlclZhbHVlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7IGludGVnZXJWYWx1ZTogJycgKyB2YWwudmFsdWUoKSB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh2YWwgaW5zdGFuY2VvZiBEb3VibGVWYWx1ZSkge1xyXG4gICAgICAgICAgICB2YXIgZG91YmxlVmFsdWUgPSB2YWwudmFsdWUoKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy51c2VQcm90bzNKc29uKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBQcm90byAzIGxldCdzIHVzIGVuY29kZSBOYU4gYW5kIEluZmluaXR5IGFzIHN0cmluZyB2YWx1ZXMgYXNcclxuICAgICAgICAgICAgICAgIC8vIGV4cGVjdGVkIGJ5IHRoZSBiYWNrZW5kLiBUaGlzIGlzIGN1cnJlbnRseSBub3QgY2hlY2tlZCBieSBvdXIgdW5pdFxyXG4gICAgICAgICAgICAgICAgLy8gdGVzdHMgYmVjYXVzZSB0aGV5IHJlbHkgb24gcHJvdG9idWYuanMuXHJcbiAgICAgICAgICAgICAgICBpZiAoaXNOYU4oZG91YmxlVmFsdWUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgZG91YmxlVmFsdWU6ICdOYU4nIH07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChkb3VibGVWYWx1ZSA9PT0gSW5maW5pdHkpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4geyBkb3VibGVWYWx1ZTogJ0luZmluaXR5JyB9O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoZG91YmxlVmFsdWUgPT09IC1JbmZpbml0eSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7IGRvdWJsZVZhbHVlOiAnLUluZmluaXR5JyB9O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB7IGRvdWJsZVZhbHVlOiB2YWwudmFsdWUoKSB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh2YWwgaW5zdGFuY2VvZiBTdHJpbmdWYWx1ZSkge1xyXG4gICAgICAgICAgICByZXR1cm4geyBzdHJpbmdWYWx1ZTogdmFsLnZhbHVlKCkgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodmFsIGluc3RhbmNlb2YgT2JqZWN0VmFsdWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHsgbWFwVmFsdWU6IHRoaXMudG9NYXBWYWx1ZSh2YWwpIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHZhbCBpbnN0YW5jZW9mIEFycmF5VmFsdWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHsgYXJyYXlWYWx1ZTogdGhpcy50b0FycmF5VmFsdWUodmFsKSB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh2YWwgaW5zdGFuY2VvZiBUaW1lc3RhbXBWYWx1ZSkge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgdGltZXN0YW1wVmFsdWU6IHRoaXMudG9UaW1lc3RhbXAodmFsLmludGVybmFsVmFsdWUpXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHZhbCBpbnN0YW5jZW9mIEdlb1BvaW50VmFsdWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIGdlb1BvaW50VmFsdWU6IHtcclxuICAgICAgICAgICAgICAgICAgICBsYXRpdHVkZTogdmFsLnZhbHVlKCkubGF0aXR1ZGUsXHJcbiAgICAgICAgICAgICAgICAgICAgbG9uZ2l0dWRlOiB2YWwudmFsdWUoKS5sb25naXR1ZGVcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodmFsIGluc3RhbmNlb2YgQmxvYlZhbHVlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBieXRlc1ZhbHVlOiB0aGlzLnRvQnl0ZXModmFsLnZhbHVlKCkpXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHZhbCBpbnN0YW5jZW9mIFJlZlZhbHVlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICByZWZlcmVuY2VWYWx1ZTogdGhpcy50b1Jlc291cmNlTmFtZSh2YWwuZGF0YWJhc2VJZCwgdmFsLmtleS5wYXRoKVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhaWwoJ1Vua25vd24gRmllbGRWYWx1ZSAnICsgSlNPTi5zdHJpbmdpZnkodmFsKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIEpzb25Qcm90b1NlcmlhbGl6ZXIucHJvdG90eXBlLmZyb21WYWx1ZSA9IGZ1bmN0aW9uIChvYmopIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIGlmICgnbnVsbFZhbHVlJyBpbiBvYmopIHtcclxuICAgICAgICAgICAgcmV0dXJuIE51bGxWYWx1ZS5JTlNUQU5DRTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoJ2Jvb2xlYW5WYWx1ZScgaW4gb2JqKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBCb29sZWFuVmFsdWUub2Yob2JqLmJvb2xlYW5WYWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKCdpbnRlZ2VyVmFsdWUnIGluIG9iaikge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEludGVnZXJWYWx1ZShwYXJzZUludDY0KG9iai5pbnRlZ2VyVmFsdWUpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoJ2RvdWJsZVZhbHVlJyBpbiBvYmopIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy51c2VQcm90bzNKc29uKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBQcm90byAzIHVzZXMgdGhlIHN0cmluZyB2YWx1ZXMgJ05hTicgYW5kICdJbmZpbml0eScuXHJcbiAgICAgICAgICAgICAgICBpZiAob2JqLmRvdWJsZVZhbHVlID09PSAnTmFOJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBEb3VibGVWYWx1ZS5OQU47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChvYmouZG91YmxlVmFsdWUgPT09ICdJbmZpbml0eScpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gRG91YmxlVmFsdWUuUE9TSVRJVkVfSU5GSU5JVFk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChvYmouZG91YmxlVmFsdWUgPT09ICctSW5maW5pdHknKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIERvdWJsZVZhbHVlLk5FR0FUSVZFX0lORklOSVRZO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgRG91YmxlVmFsdWUob2JqLmRvdWJsZVZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoJ3N0cmluZ1ZhbHVlJyBpbiBvYmopIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBTdHJpbmdWYWx1ZShvYmouc3RyaW5nVmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICgnbWFwVmFsdWUnIGluIG9iaikge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5mcm9tRmllbGRzKG9iai5tYXBWYWx1ZS5maWVsZHMgfHwge30pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICgnYXJyYXlWYWx1ZScgaW4gb2JqKSB7XHJcbiAgICAgICAgICAgIC8vIFwidmFsdWVzXCIgaXMgbm90IHByZXNlbnQgaWYgdGhlIGFycmF5IGlzIGVtcHR5XHJcbiAgICAgICAgICAgIGFzc2VydFByZXNlbnQob2JqLmFycmF5VmFsdWUsICdhcnJheVZhbHVlJyk7XHJcbiAgICAgICAgICAgIHZhciB2YWx1ZXMgPSBvYmouYXJyYXlWYWx1ZS52YWx1ZXMgfHwgW107XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgQXJyYXlWYWx1ZSh2YWx1ZXMubWFwKGZ1bmN0aW9uICh2KSB7IHJldHVybiBfdGhpcy5mcm9tVmFsdWUodik7IH0pKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoJ3RpbWVzdGFtcFZhbHVlJyBpbiBvYmopIHtcclxuICAgICAgICAgICAgYXNzZXJ0UHJlc2VudChvYmoudGltZXN0YW1wVmFsdWUsICd0aW1lc3RhbXBWYWx1ZScpO1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFRpbWVzdGFtcFZhbHVlKHRoaXMuZnJvbVRpbWVzdGFtcChvYmoudGltZXN0YW1wVmFsdWUpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoJ2dlb1BvaW50VmFsdWUnIGluIG9iaikge1xyXG4gICAgICAgICAgICBhc3NlcnRQcmVzZW50KG9iai5nZW9Qb2ludFZhbHVlLCAnZ2VvUG9pbnRWYWx1ZScpO1xyXG4gICAgICAgICAgICB2YXIgbGF0aXR1ZGUgPSBvYmouZ2VvUG9pbnRWYWx1ZS5sYXRpdHVkZSB8fCAwO1xyXG4gICAgICAgICAgICB2YXIgbG9uZ2l0dWRlID0gb2JqLmdlb1BvaW50VmFsdWUubG9uZ2l0dWRlIHx8IDA7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgR2VvUG9pbnRWYWx1ZShuZXcgR2VvUG9pbnQobGF0aXR1ZGUsIGxvbmdpdHVkZSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICgnYnl0ZXNWYWx1ZScgaW4gb2JqKSB7XHJcbiAgICAgICAgICAgIGFzc2VydFByZXNlbnQob2JqLmJ5dGVzVmFsdWUsICdieXRlc1ZhbHVlJyk7XHJcbiAgICAgICAgICAgIHZhciBibG9iID0gdGhpcy5mcm9tQmxvYihvYmouYnl0ZXNWYWx1ZSk7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgQmxvYlZhbHVlKGJsb2IpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICgncmVmZXJlbmNlVmFsdWUnIGluIG9iaikge1xyXG4gICAgICAgICAgICBhc3NlcnRQcmVzZW50KG9iai5yZWZlcmVuY2VWYWx1ZSwgJ3JlZmVyZW5jZVZhbHVlJyk7XHJcbiAgICAgICAgICAgIHZhciByZXNvdXJjZU5hbWUgPSB0aGlzLmZyb21SZXNvdXJjZU5hbWUob2JqLnJlZmVyZW5jZVZhbHVlKTtcclxuICAgICAgICAgICAgdmFyIGRiSWQgPSBuZXcgRGF0YWJhc2VJZChyZXNvdXJjZU5hbWUuZ2V0KDEpLCByZXNvdXJjZU5hbWUuZ2V0KDMpKTtcclxuICAgICAgICAgICAgdmFyIGtleSA9IG5ldyBEb2N1bWVudEtleSh0aGlzLmV4dHJhY3RMb2NhbFBhdGhGcm9tUmVzb3VyY2VOYW1lKHJlc291cmNlTmFtZSkpO1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFJlZlZhbHVlKGRiSWQsIGtleSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFpbCgnVW5rbm93biBWYWx1ZSBwcm90byAnICsgSlNPTi5zdHJpbmdpZnkob2JqKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKiBDcmVhdGVzIGFuIGFwaS5Eb2N1bWVudCBmcm9tIGtleSBhbmQgZmllbGRzIChidXQgbm8gY3JlYXRlL3VwZGF0ZSB0aW1lKSAqL1xyXG4gICAgSnNvblByb3RvU2VyaWFsaXplci5wcm90b3R5cGUudG9NdXRhdGlvbkRvY3VtZW50ID0gZnVuY3Rpb24gKGtleSwgZmllbGRzKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgbmFtZTogdGhpcy50b05hbWUoa2V5KSxcclxuICAgICAgICAgICAgZmllbGRzOiB0aGlzLnRvRmllbGRzKGZpZWxkcylcclxuICAgICAgICB9O1xyXG4gICAgfTtcclxuICAgIEpzb25Qcm90b1NlcmlhbGl6ZXIucHJvdG90eXBlLnRvRG9jdW1lbnQgPSBmdW5jdGlvbiAoZG9jdW1lbnQpIHtcclxuICAgICAgICBhc3NlcnQoIWRvY3VtZW50Lmhhc0xvY2FsTXV0YXRpb25zLCBcIkNhbid0IHNlcmlhbGl6ZSBkb2N1bWVudHMgd2l0aCBtdXRhdGlvbnMuXCIpO1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIG5hbWU6IHRoaXMudG9OYW1lKGRvY3VtZW50LmtleSksXHJcbiAgICAgICAgICAgIGZpZWxkczogdGhpcy50b0ZpZWxkcyhkb2N1bWVudC5kYXRhKCkpLFxyXG4gICAgICAgICAgICB1cGRhdGVUaW1lOiB0aGlzLnRvVGltZXN0YW1wKGRvY3VtZW50LnZlcnNpb24udG9UaW1lc3RhbXAoKSlcclxuICAgICAgICB9O1xyXG4gICAgfTtcclxuICAgIEpzb25Qcm90b1NlcmlhbGl6ZXIucHJvdG90eXBlLmZyb21Eb2N1bWVudCA9IGZ1bmN0aW9uIChkb2N1bWVudCwgaGFzQ29tbWl0dGVkTXV0YXRpb25zKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIga2V5ID0gdGhpcy5mcm9tTmFtZShkb2N1bWVudC5uYW1lKTtcclxuICAgICAgICB2YXIgdmVyc2lvbiA9IHRoaXMuZnJvbVZlcnNpb24oZG9jdW1lbnQudXBkYXRlVGltZSk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBEb2N1bWVudChrZXksIHZlcnNpb24sIHsgaGFzQ29tbWl0dGVkTXV0YXRpb25zOiAhIWhhc0NvbW1pdHRlZE11dGF0aW9ucyB9LCB1bmRlZmluZWQsIGRvY3VtZW50LCBmdW5jdGlvbiAodikgeyByZXR1cm4gX3RoaXMuZnJvbVZhbHVlKHYpOyB9KTtcclxuICAgIH07XHJcbiAgICBKc29uUHJvdG9TZXJpYWxpemVyLnByb3RvdHlwZS50b0ZpZWxkcyA9IGZ1bmN0aW9uIChmaWVsZHMpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhciByZXN1bHQgPSB7fTtcclxuICAgICAgICBmaWVsZHMuZm9yRWFjaChmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xyXG4gICAgICAgICAgICByZXN1bHRba2V5XSA9IF90aGlzLnRvVmFsdWUodmFsdWUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9O1xyXG4gICAgSnNvblByb3RvU2VyaWFsaXplci5wcm90b3R5cGUuZnJvbUZpZWxkcyA9IGZ1bmN0aW9uIChvYmplY3QpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIC8vIFByb3RvIG1hcDxzdHJpbmcsIFZhbHVlPiBnZXRzIG1hcHBlZCB0byBPYmplY3QsIHNvIGNhc3QgaXQuXHJcbiAgICAgICAgdmFyIG1hcCA9IG9iamVjdDtcclxuICAgICAgICB2YXIgcmVzdWx0ID0gT2JqZWN0VmFsdWUuRU1QVFk7XHJcbiAgICAgICAgZm9yRWFjaChtYXAsIGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdCA9IHJlc3VsdC5zZXQobmV3IEZpZWxkUGF0aChba2V5XSksIF90aGlzLmZyb21WYWx1ZSh2YWx1ZSkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9O1xyXG4gICAgSnNvblByb3RvU2VyaWFsaXplci5wcm90b3R5cGUudG9NYXBWYWx1ZSA9IGZ1bmN0aW9uIChtYXApIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBmaWVsZHM6IHRoaXMudG9GaWVsZHMobWFwKVxyXG4gICAgICAgIH07XHJcbiAgICB9O1xyXG4gICAgSnNvblByb3RvU2VyaWFsaXplci5wcm90b3R5cGUudG9BcnJheVZhbHVlID0gZnVuY3Rpb24gKGFycmF5KSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgcmVzdWx0ID0gW107XHJcbiAgICAgICAgYXJyYXkuZm9yRWFjaChmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICAgICAgcmVzdWx0LnB1c2goX3RoaXMudG9WYWx1ZSh2YWx1ZSkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiB7IHZhbHVlczogcmVzdWx0IH07XHJcbiAgICB9O1xyXG4gICAgSnNvblByb3RvU2VyaWFsaXplci5wcm90b3R5cGUuZnJvbUZvdW5kID0gZnVuY3Rpb24gKGRvYykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgYXNzZXJ0KCEhZG9jLmZvdW5kLCAnVHJpZWQgdG8gZGVzZXJpYWxpemUgYSBmb3VuZCBkb2N1bWVudCBmcm9tIGEgbWlzc2luZyBkb2N1bWVudC4nKTtcclxuICAgICAgICBhc3NlcnRQcmVzZW50KGRvYy5mb3VuZC5uYW1lLCAnZG9jLmZvdW5kLm5hbWUnKTtcclxuICAgICAgICBhc3NlcnRQcmVzZW50KGRvYy5mb3VuZC51cGRhdGVUaW1lLCAnZG9jLmZvdW5kLnVwZGF0ZVRpbWUnKTtcclxuICAgICAgICB2YXIga2V5ID0gdGhpcy5mcm9tTmFtZShkb2MuZm91bmQubmFtZSk7XHJcbiAgICAgICAgdmFyIHZlcnNpb24gPSB0aGlzLmZyb21WZXJzaW9uKGRvYy5mb3VuZC51cGRhdGVUaW1lKTtcclxuICAgICAgICByZXR1cm4gbmV3IERvY3VtZW50KGtleSwgdmVyc2lvbiwge30sIHVuZGVmaW5lZCwgZG9jLmZvdW5kLCBmdW5jdGlvbiAodikge1xyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXMuZnJvbVZhbHVlKHYpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIEpzb25Qcm90b1NlcmlhbGl6ZXIucHJvdG90eXBlLmZyb21NaXNzaW5nID0gZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgIGFzc2VydCghIXJlc3VsdC5taXNzaW5nLCAnVHJpZWQgdG8gZGVzZXJpYWxpemUgYSBtaXNzaW5nIGRvY3VtZW50IGZyb20gYSBmb3VuZCBkb2N1bWVudC4nKTtcclxuICAgICAgICBhc3NlcnQoISFyZXN1bHQucmVhZFRpbWUsICdUcmllZCB0byBkZXNlcmlhbGl6ZSBhIG1pc3NpbmcgZG9jdW1lbnQgd2l0aG91dCBhIHJlYWQgdGltZS4nKTtcclxuICAgICAgICB2YXIga2V5ID0gdGhpcy5mcm9tTmFtZShyZXN1bHQubWlzc2luZyk7XHJcbiAgICAgICAgdmFyIHZlcnNpb24gPSB0aGlzLmZyb21WZXJzaW9uKHJlc3VsdC5yZWFkVGltZSk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBOb0RvY3VtZW50KGtleSwgdmVyc2lvbik7XHJcbiAgICB9O1xyXG4gICAgSnNvblByb3RvU2VyaWFsaXplci5wcm90b3R5cGUuZnJvbU1heWJlRG9jdW1lbnQgPSBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgaWYgKCdmb3VuZCcgaW4gcmVzdWx0KSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmZyb21Gb3VuZChyZXN1bHQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICgnbWlzc2luZycgaW4gcmVzdWx0KSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmZyb21NaXNzaW5nKHJlc3VsdCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWlsKCdpbnZhbGlkIGJhdGNoIGdldCByZXNwb25zZTogJyArIEpTT04uc3RyaW5naWZ5KHJlc3VsdCkpO1xyXG4gICAgfTtcclxuICAgIEpzb25Qcm90b1NlcmlhbGl6ZXIucHJvdG90eXBlLnRvV2F0Y2hUYXJnZXRDaGFuZ2VTdGF0ZSA9IGZ1bmN0aW9uIChzdGF0ZSkge1xyXG4gICAgICAgIHN3aXRjaCAoc3RhdGUpIHtcclxuICAgICAgICAgICAgY2FzZSBXYXRjaFRhcmdldENoYW5nZVN0YXRlLkFkZGVkOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuICdBREQnO1xyXG4gICAgICAgICAgICBjYXNlIFdhdGNoVGFyZ2V0Q2hhbmdlU3RhdGUuQ3VycmVudDpcclxuICAgICAgICAgICAgICAgIHJldHVybiAnQ1VSUkVOVCc7XHJcbiAgICAgICAgICAgIGNhc2UgV2F0Y2hUYXJnZXRDaGFuZ2VTdGF0ZS5Ob0NoYW5nZTpcclxuICAgICAgICAgICAgICAgIHJldHVybiAnTk9fQ0hBTkdFJztcclxuICAgICAgICAgICAgY2FzZSBXYXRjaFRhcmdldENoYW5nZVN0YXRlLlJlbW92ZWQ6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJ1JFTU9WRSc7XHJcbiAgICAgICAgICAgIGNhc2UgV2F0Y2hUYXJnZXRDaGFuZ2VTdGF0ZS5SZXNldDpcclxuICAgICAgICAgICAgICAgIHJldHVybiAnUkVTRVQnO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhaWwoJ1Vua25vd24gV2F0Y2hUYXJnZXRDaGFuZ2VTdGF0ZTogJyArIHN0YXRlKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgSnNvblByb3RvU2VyaWFsaXplci5wcm90b3R5cGUudG9UZXN0V2F0Y2hDaGFuZ2UgPSBmdW5jdGlvbiAod2F0Y2hDaGFuZ2UpIHtcclxuICAgICAgICBpZiAod2F0Y2hDaGFuZ2UgaW5zdGFuY2VvZiBFeGlzdGVuY2VGaWx0ZXJDaGFuZ2UpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIGZpbHRlcjoge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvdW50OiB3YXRjaENoYW5nZS5leGlzdGVuY2VGaWx0ZXIuY291bnQsXHJcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0SWQ6IHdhdGNoQ2hhbmdlLnRhcmdldElkXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh3YXRjaENoYW5nZSBpbnN0YW5jZW9mIERvY3VtZW50V2F0Y2hDaGFuZ2UpIHtcclxuICAgICAgICAgICAgaWYgKHdhdGNoQ2hhbmdlLm5ld0RvYyBpbnN0YW5jZW9mIERvY3VtZW50KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZG9jID0gd2F0Y2hDaGFuZ2UubmV3RG9jO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudENoYW5nZToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogdGhpcy50b05hbWUoZG9jLmtleSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZHM6IHRoaXMudG9GaWVsZHMoZG9jLmRhdGEoKSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVUaW1lOiB0aGlzLnRvVmVyc2lvbihkb2MudmVyc2lvbilcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0SWRzOiB3YXRjaENoYW5nZS51cGRhdGVkVGFyZ2V0SWRzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZW1vdmVkVGFyZ2V0SWRzOiB3YXRjaENoYW5nZS5yZW1vdmVkVGFyZ2V0SWRzXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmICh3YXRjaENoYW5nZS5uZXdEb2MgaW5zdGFuY2VvZiBOb0RvY3VtZW50KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZG9jID0gd2F0Y2hDaGFuZ2UubmV3RG9jO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudERlbGV0ZToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudDogdGhpcy50b05hbWUoZG9jLmtleSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRUaW1lOiB0aGlzLnRvVmVyc2lvbihkb2MudmVyc2lvbiksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZWRUYXJnZXRJZHM6IHdhdGNoQ2hhbmdlLnJlbW92ZWRUYXJnZXRJZHNcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKHdhdGNoQ2hhbmdlLm5ld0RvYyA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudFJlbW92ZToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudDogdGhpcy50b05hbWUod2F0Y2hDaGFuZ2Uua2V5KSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3ZlZFRhcmdldElkczogd2F0Y2hDaGFuZ2UucmVtb3ZlZFRhcmdldElkc1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHdhdGNoQ2hhbmdlIGluc3RhbmNlb2YgV2F0Y2hUYXJnZXRDaGFuZ2UpIHtcclxuICAgICAgICAgICAgdmFyIGNhdXNlID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICBpZiAod2F0Y2hDaGFuZ2UuY2F1c2UpIHtcclxuICAgICAgICAgICAgICAgIGNhdXNlID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvZGU6IG1hcFJwY0NvZGVGcm9tQ29kZSh3YXRjaENoYW5nZS5jYXVzZS5jb2RlKSxcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiB3YXRjaENoYW5nZS5jYXVzZS5tZXNzYWdlXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICB0YXJnZXRDaGFuZ2U6IHtcclxuICAgICAgICAgICAgICAgICAgICB0YXJnZXRDaGFuZ2VUeXBlOiB0aGlzLnRvV2F0Y2hUYXJnZXRDaGFuZ2VTdGF0ZSh3YXRjaENoYW5nZS5zdGF0ZSksXHJcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0SWRzOiB3YXRjaENoYW5nZS50YXJnZXRJZHMsXHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdW1lVG9rZW46IHRoaXMudW5zYWZlQ2FzdFByb3RvQnl0ZVN0cmluZyh3YXRjaENoYW5nZS5yZXN1bWVUb2tlbiksXHJcbiAgICAgICAgICAgICAgICAgICAgY2F1c2U6IGNhdXNlXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWlsKCdVbnJlY29nbml6ZWQgd2F0Y2ggY2hhbmdlOiAnICsgSlNPTi5zdHJpbmdpZnkod2F0Y2hDaGFuZ2UpKTtcclxuICAgIH07XHJcbiAgICBKc29uUHJvdG9TZXJpYWxpemVyLnByb3RvdHlwZS5mcm9tV2F0Y2hDaGFuZ2UgPSBmdW5jdGlvbiAoY2hhbmdlKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgd2F0Y2hDaGFuZ2U7XHJcbiAgICAgICAgaWYgKCd0YXJnZXRDaGFuZ2UnIGluIGNoYW5nZSkge1xyXG4gICAgICAgICAgICBhc3NlcnRQcmVzZW50KGNoYW5nZS50YXJnZXRDaGFuZ2UsICd0YXJnZXRDaGFuZ2UnKTtcclxuICAgICAgICAgICAgLy8gcHJvdG8zIGRlZmF1bHQgdmFsdWUgaXMgdW5zZXQgaW4gSlNPTiAodW5kZWZpbmVkKSwgc28gdXNlICdOT19DSEFOR0UnXHJcbiAgICAgICAgICAgIC8vIGlmIHVuc2V0XHJcbiAgICAgICAgICAgIHZhciBzdGF0ZSA9IHRoaXMuZnJvbVdhdGNoVGFyZ2V0Q2hhbmdlU3RhdGUoY2hhbmdlLnRhcmdldENoYW5nZS50YXJnZXRDaGFuZ2VUeXBlIHx8ICdOT19DSEFOR0UnKTtcclxuICAgICAgICAgICAgdmFyIHRhcmdldElkcyA9IGNoYW5nZS50YXJnZXRDaGFuZ2UudGFyZ2V0SWRzIHx8IFtdO1xyXG4gICAgICAgICAgICB2YXIgcmVzdW1lVG9rZW4gPSBjaGFuZ2UudGFyZ2V0Q2hhbmdlLnJlc3VtZVRva2VuIHx8IHRoaXMuZW1wdHlCeXRlU3RyaW5nKCk7XHJcbiAgICAgICAgICAgIHZhciBjYXVzZVByb3RvID0gY2hhbmdlLnRhcmdldENoYW5nZS5jYXVzZTtcclxuICAgICAgICAgICAgdmFyIGNhdXNlID0gY2F1c2VQcm90byAmJiB0aGlzLmZyb21ScGNTdGF0dXMoY2F1c2VQcm90byk7XHJcbiAgICAgICAgICAgIHdhdGNoQ2hhbmdlID0gbmV3IFdhdGNoVGFyZ2V0Q2hhbmdlKHN0YXRlLCB0YXJnZXRJZHMsIHJlc3VtZVRva2VuLCBjYXVzZSB8fCBudWxsKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoJ2RvY3VtZW50Q2hhbmdlJyBpbiBjaGFuZ2UpIHtcclxuICAgICAgICAgICAgYXNzZXJ0UHJlc2VudChjaGFuZ2UuZG9jdW1lbnRDaGFuZ2UsICdkb2N1bWVudENoYW5nZScpO1xyXG4gICAgICAgICAgICB2YXIgZW50aXR5Q2hhbmdlID0gY2hhbmdlLmRvY3VtZW50Q2hhbmdlO1xyXG4gICAgICAgICAgICBhc3NlcnRQcmVzZW50KGVudGl0eUNoYW5nZS5kb2N1bWVudCwgJ2RvY3VtZW50Q2hhbmdlLm5hbWUnKTtcclxuICAgICAgICAgICAgYXNzZXJ0UHJlc2VudChlbnRpdHlDaGFuZ2UuZG9jdW1lbnQubmFtZSwgJ2RvY3VtZW50Q2hhbmdlLmRvY3VtZW50Lm5hbWUnKTtcclxuICAgICAgICAgICAgYXNzZXJ0UHJlc2VudChlbnRpdHlDaGFuZ2UuZG9jdW1lbnQudXBkYXRlVGltZSwgJ2RvY3VtZW50Q2hhbmdlLmRvY3VtZW50LnVwZGF0ZVRpbWUnKTtcclxuICAgICAgICAgICAgdmFyIGtleSA9IHRoaXMuZnJvbU5hbWUoZW50aXR5Q2hhbmdlLmRvY3VtZW50Lm5hbWUpO1xyXG4gICAgICAgICAgICB2YXIgdmVyc2lvbiA9IHRoaXMuZnJvbVZlcnNpb24oZW50aXR5Q2hhbmdlLmRvY3VtZW50LnVwZGF0ZVRpbWUpO1xyXG4gICAgICAgICAgICB2YXIgZG9jID0gbmV3IERvY3VtZW50KGtleSwgdmVyc2lvbiwge30sIHVuZGVmaW5lZCwgZW50aXR5Q2hhbmdlLmRvY3VtZW50LCBmdW5jdGlvbiAodikgeyByZXR1cm4gX3RoaXMuZnJvbVZhbHVlKHYpOyB9KTtcclxuICAgICAgICAgICAgdmFyIHVwZGF0ZWRUYXJnZXRJZHMgPSBlbnRpdHlDaGFuZ2UudGFyZ2V0SWRzIHx8IFtdO1xyXG4gICAgICAgICAgICB2YXIgcmVtb3ZlZFRhcmdldElkcyA9IGVudGl0eUNoYW5nZS5yZW1vdmVkVGFyZ2V0SWRzIHx8IFtdO1xyXG4gICAgICAgICAgICB3YXRjaENoYW5nZSA9IG5ldyBEb2N1bWVudFdhdGNoQ2hhbmdlKHVwZGF0ZWRUYXJnZXRJZHMsIHJlbW92ZWRUYXJnZXRJZHMsIGRvYy5rZXksIGRvYyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKCdkb2N1bWVudERlbGV0ZScgaW4gY2hhbmdlKSB7XHJcbiAgICAgICAgICAgIGFzc2VydFByZXNlbnQoY2hhbmdlLmRvY3VtZW50RGVsZXRlLCAnZG9jdW1lbnREZWxldGUnKTtcclxuICAgICAgICAgICAgdmFyIGRvY0RlbGV0ZSA9IGNoYW5nZS5kb2N1bWVudERlbGV0ZTtcclxuICAgICAgICAgICAgYXNzZXJ0UHJlc2VudChkb2NEZWxldGUuZG9jdW1lbnQsICdkb2N1bWVudERlbGV0ZS5kb2N1bWVudCcpO1xyXG4gICAgICAgICAgICB2YXIga2V5ID0gdGhpcy5mcm9tTmFtZShkb2NEZWxldGUuZG9jdW1lbnQpO1xyXG4gICAgICAgICAgICB2YXIgdmVyc2lvbiA9IGRvY0RlbGV0ZS5yZWFkVGltZVxyXG4gICAgICAgICAgICAgICAgPyB0aGlzLmZyb21WZXJzaW9uKGRvY0RlbGV0ZS5yZWFkVGltZSlcclxuICAgICAgICAgICAgICAgIDogU25hcHNob3RWZXJzaW9uLmZvckRlbGV0ZWREb2MoKTtcclxuICAgICAgICAgICAgdmFyIGRvYyA9IG5ldyBOb0RvY3VtZW50KGtleSwgdmVyc2lvbik7XHJcbiAgICAgICAgICAgIHZhciByZW1vdmVkVGFyZ2V0SWRzID0gZG9jRGVsZXRlLnJlbW92ZWRUYXJnZXRJZHMgfHwgW107XHJcbiAgICAgICAgICAgIHdhdGNoQ2hhbmdlID0gbmV3IERvY3VtZW50V2F0Y2hDaGFuZ2UoW10sIHJlbW92ZWRUYXJnZXRJZHMsIGRvYy5rZXksIGRvYyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKCdkb2N1bWVudFJlbW92ZScgaW4gY2hhbmdlKSB7XHJcbiAgICAgICAgICAgIGFzc2VydFByZXNlbnQoY2hhbmdlLmRvY3VtZW50UmVtb3ZlLCAnZG9jdW1lbnRSZW1vdmUnKTtcclxuICAgICAgICAgICAgdmFyIGRvY1JlbW92ZSA9IGNoYW5nZS5kb2N1bWVudFJlbW92ZTtcclxuICAgICAgICAgICAgYXNzZXJ0UHJlc2VudChkb2NSZW1vdmUuZG9jdW1lbnQsICdkb2N1bWVudFJlbW92ZScpO1xyXG4gICAgICAgICAgICB2YXIga2V5ID0gdGhpcy5mcm9tTmFtZShkb2NSZW1vdmUuZG9jdW1lbnQpO1xyXG4gICAgICAgICAgICB2YXIgcmVtb3ZlZFRhcmdldElkcyA9IGRvY1JlbW92ZS5yZW1vdmVkVGFyZ2V0SWRzIHx8IFtdO1xyXG4gICAgICAgICAgICB3YXRjaENoYW5nZSA9IG5ldyBEb2N1bWVudFdhdGNoQ2hhbmdlKFtdLCByZW1vdmVkVGFyZ2V0SWRzLCBrZXksIG51bGwpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICgnZmlsdGVyJyBpbiBjaGFuZ2UpIHtcclxuICAgICAgICAgICAgLy8gVE9ETyhkaW1vbmQpOiBpbXBsZW1lbnQgZXhpc3RlbmNlIGZpbHRlciBwYXJzaW5nIHdpdGggc3RyYXRlZ3kuXHJcbiAgICAgICAgICAgIGFzc2VydFByZXNlbnQoY2hhbmdlLmZpbHRlciwgJ2ZpbHRlcicpO1xyXG4gICAgICAgICAgICB2YXIgZmlsdGVyID0gY2hhbmdlLmZpbHRlcjtcclxuICAgICAgICAgICAgYXNzZXJ0UHJlc2VudChmaWx0ZXIudGFyZ2V0SWQsICdmaWx0ZXIudGFyZ2V0SWQnKTtcclxuICAgICAgICAgICAgdmFyIGNvdW50ID0gZmlsdGVyLmNvdW50IHx8IDA7XHJcbiAgICAgICAgICAgIHZhciBleGlzdGVuY2VGaWx0ZXIgPSBuZXcgRXhpc3RlbmNlRmlsdGVyKGNvdW50KTtcclxuICAgICAgICAgICAgdmFyIHRhcmdldElkID0gZmlsdGVyLnRhcmdldElkO1xyXG4gICAgICAgICAgICB3YXRjaENoYW5nZSA9IG5ldyBFeGlzdGVuY2VGaWx0ZXJDaGFuZ2UodGFyZ2V0SWQsIGV4aXN0ZW5jZUZpbHRlcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFpbCgnVW5rbm93biBjaGFuZ2UgdHlwZSAnICsgSlNPTi5zdHJpbmdpZnkoY2hhbmdlKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB3YXRjaENoYW5nZTtcclxuICAgIH07XHJcbiAgICBKc29uUHJvdG9TZXJpYWxpemVyLnByb3RvdHlwZS5mcm9tV2F0Y2hUYXJnZXRDaGFuZ2VTdGF0ZSA9IGZ1bmN0aW9uIChzdGF0ZSkge1xyXG4gICAgICAgIGlmIChzdGF0ZSA9PT0gJ05PX0NIQU5HRScpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFdhdGNoVGFyZ2V0Q2hhbmdlU3RhdGUuTm9DaGFuZ2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHN0YXRlID09PSAnQUREJykge1xyXG4gICAgICAgICAgICByZXR1cm4gV2F0Y2hUYXJnZXRDaGFuZ2VTdGF0ZS5BZGRlZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoc3RhdGUgPT09ICdSRU1PVkUnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBXYXRjaFRhcmdldENoYW5nZVN0YXRlLlJlbW92ZWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHN0YXRlID09PSAnQ1VSUkVOVCcpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFdhdGNoVGFyZ2V0Q2hhbmdlU3RhdGUuQ3VycmVudDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoc3RhdGUgPT09ICdSRVNFVCcpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFdhdGNoVGFyZ2V0Q2hhbmdlU3RhdGUuUmVzZXQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFpbCgnR290IHVuZXhwZWN0ZWQgVGFyZ2V0Q2hhbmdlLnN0YXRlOiAnICsgc3RhdGUpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBKc29uUHJvdG9TZXJpYWxpemVyLnByb3RvdHlwZS52ZXJzaW9uRnJvbUxpc3RlblJlc3BvbnNlID0gZnVuY3Rpb24gKGNoYW5nZSkge1xyXG4gICAgICAgIC8vIFdlIGhhdmUgb25seSByZWFjaGVkIGEgY29uc2lzdGVudCBzbmFwc2hvdCBmb3IgdGhlIGVudGlyZSBzdHJlYW0gaWYgdGhlcmVcclxuICAgICAgICAvLyBpcyBhIHJlYWRfdGltZSBzZXQgYW5kIGl0IGFwcGxpZXMgdG8gYWxsIHRhcmdldHMgKGkuZS4gdGhlIGxpc3Qgb2ZcclxuICAgICAgICAvLyB0YXJnZXRzIGlzIGVtcHR5KS4gVGhlIGJhY2tlbmQgaXMgZ3VhcmFudGVlZCB0byBzZW5kIHN1Y2ggcmVzcG9uc2VzLlxyXG4gICAgICAgIGlmICghKCd0YXJnZXRDaGFuZ2UnIGluIGNoYW5nZSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFNuYXBzaG90VmVyc2lvbi5NSU47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciB0YXJnZXRDaGFuZ2UgPSBjaGFuZ2UudGFyZ2V0Q2hhbmdlO1xyXG4gICAgICAgIGlmICh0YXJnZXRDaGFuZ2UudGFyZ2V0SWRzICYmIHRhcmdldENoYW5nZS50YXJnZXRJZHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBTbmFwc2hvdFZlcnNpb24uTUlOO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIXRhcmdldENoYW5nZS5yZWFkVGltZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gU25hcHNob3RWZXJzaW9uLk1JTjtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZnJvbVZlcnNpb24odGFyZ2V0Q2hhbmdlLnJlYWRUaW1lKTtcclxuICAgIH07XHJcbiAgICBKc29uUHJvdG9TZXJpYWxpemVyLnByb3RvdHlwZS50b011dGF0aW9uID0gZnVuY3Rpb24gKG11dGF0aW9uKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgcmVzdWx0O1xyXG4gICAgICAgIGlmIChtdXRhdGlvbiBpbnN0YW5jZW9mIFNldE11dGF0aW9uKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdCA9IHtcclxuICAgICAgICAgICAgICAgIHVwZGF0ZTogdGhpcy50b011dGF0aW9uRG9jdW1lbnQobXV0YXRpb24ua2V5LCBtdXRhdGlvbi52YWx1ZSlcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAobXV0YXRpb24gaW5zdGFuY2VvZiBEZWxldGVNdXRhdGlvbikge1xyXG4gICAgICAgICAgICByZXN1bHQgPSB7IGRlbGV0ZTogdGhpcy50b05hbWUobXV0YXRpb24ua2V5KSB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChtdXRhdGlvbiBpbnN0YW5jZW9mIFBhdGNoTXV0YXRpb24pIHtcclxuICAgICAgICAgICAgcmVzdWx0ID0ge1xyXG4gICAgICAgICAgICAgICAgdXBkYXRlOiB0aGlzLnRvTXV0YXRpb25Eb2N1bWVudChtdXRhdGlvbi5rZXksIG11dGF0aW9uLmRhdGEpLFxyXG4gICAgICAgICAgICAgICAgdXBkYXRlTWFzazogdGhpcy50b0RvY3VtZW50TWFzayhtdXRhdGlvbi5maWVsZE1hc2spXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKG11dGF0aW9uIGluc3RhbmNlb2YgVHJhbnNmb3JtTXV0YXRpb24pIHtcclxuICAgICAgICAgICAgcmVzdWx0ID0ge1xyXG4gICAgICAgICAgICAgICAgdHJhbnNmb3JtOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQ6IHRoaXMudG9OYW1lKG11dGF0aW9uLmtleSksXHJcbiAgICAgICAgICAgICAgICAgICAgZmllbGRUcmFuc2Zvcm1zOiBtdXRhdGlvbi5maWVsZFRyYW5zZm9ybXMubWFwKGZ1bmN0aW9uICh0cmFuc2Zvcm0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLnRvRmllbGRUcmFuc2Zvcm0odHJhbnNmb3JtKTtcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhaWwoJ1Vua25vd24gbXV0YXRpb24gdHlwZSAnICsgbXV0YXRpb24udHlwZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghbXV0YXRpb24ucHJlY29uZGl0aW9uLmlzTm9uZSkge1xyXG4gICAgICAgICAgICByZXN1bHQuY3VycmVudERvY3VtZW50ID0gdGhpcy50b1ByZWNvbmRpdGlvbihtdXRhdGlvbi5wcmVjb25kaXRpb24pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfTtcclxuICAgIEpzb25Qcm90b1NlcmlhbGl6ZXIucHJvdG90eXBlLmZyb21NdXRhdGlvbiA9IGZ1bmN0aW9uIChwcm90bykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIHByZWNvbmRpdGlvbiA9IHByb3RvLmN1cnJlbnREb2N1bWVudFxyXG4gICAgICAgICAgICA/IHRoaXMuZnJvbVByZWNvbmRpdGlvbihwcm90by5jdXJyZW50RG9jdW1lbnQpXHJcbiAgICAgICAgICAgIDogUHJlY29uZGl0aW9uLk5PTkU7XHJcbiAgICAgICAgaWYgKHByb3RvLnVwZGF0ZSkge1xyXG4gICAgICAgICAgICBhc3NlcnRQcmVzZW50KHByb3RvLnVwZGF0ZS5uYW1lLCAnbmFtZScpO1xyXG4gICAgICAgICAgICB2YXIga2V5ID0gdGhpcy5mcm9tTmFtZShwcm90by51cGRhdGUubmFtZSk7XHJcbiAgICAgICAgICAgIHZhciB2YWx1ZSA9IHRoaXMuZnJvbUZpZWxkcyhwcm90by51cGRhdGUuZmllbGRzIHx8IHt9KTtcclxuICAgICAgICAgICAgaWYgKHByb3RvLnVwZGF0ZU1hc2spIHtcclxuICAgICAgICAgICAgICAgIHZhciBmaWVsZE1hc2sgPSB0aGlzLmZyb21Eb2N1bWVudE1hc2socHJvdG8udXBkYXRlTWFzayk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFBhdGNoTXV0YXRpb24oa2V5LCB2YWx1ZSwgZmllbGRNYXNrLCBwcmVjb25kaXRpb24pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBTZXRNdXRhdGlvbihrZXksIHZhbHVlLCBwcmVjb25kaXRpb24pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHByb3RvLmRlbGV0ZSkge1xyXG4gICAgICAgICAgICB2YXIga2V5ID0gdGhpcy5mcm9tTmFtZShwcm90by5kZWxldGUpO1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IERlbGV0ZU11dGF0aW9uKGtleSwgcHJlY29uZGl0aW9uKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAocHJvdG8udHJhbnNmb3JtKSB7XHJcbiAgICAgICAgICAgIHZhciBrZXkgPSB0aGlzLmZyb21OYW1lKHByb3RvLnRyYW5zZm9ybS5kb2N1bWVudCk7XHJcbiAgICAgICAgICAgIHZhciBmaWVsZFRyYW5zZm9ybXMgPSBwcm90by50cmFuc2Zvcm0uZmllbGRUcmFuc2Zvcm1zLm1hcChmdW5jdGlvbiAodHJhbnNmb3JtKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuZnJvbUZpZWxkVHJhbnNmb3JtKHRyYW5zZm9ybSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBhc3NlcnQocHJlY29uZGl0aW9uLmV4aXN0cyA9PT0gdHJ1ZSwgJ1RyYW5zZm9ybXMgb25seSBzdXBwb3J0IHByZWNvbmRpdGlvbiBcImV4aXN0cyA9PSB0cnVlXCInKTtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBUcmFuc2Zvcm1NdXRhdGlvbihrZXksIGZpZWxkVHJhbnNmb3Jtcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFpbCgndW5rbm93biBtdXRhdGlvbiBwcm90bzogJyArIEpTT04uc3RyaW5naWZ5KHByb3RvKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIEpzb25Qcm90b1NlcmlhbGl6ZXIucHJvdG90eXBlLnRvUHJlY29uZGl0aW9uID0gZnVuY3Rpb24gKHByZWNvbmRpdGlvbikge1xyXG4gICAgICAgIGFzc2VydCghcHJlY29uZGl0aW9uLmlzTm9uZSwgXCJDYW4ndCBzZXJpYWxpemUgYW4gZW1wdHkgcHJlY29uZGl0aW9uXCIpO1xyXG4gICAgICAgIGlmIChwcmVjb25kaXRpb24udXBkYXRlVGltZSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICB1cGRhdGVUaW1lOiB0aGlzLnRvVmVyc2lvbihwcmVjb25kaXRpb24udXBkYXRlVGltZSlcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAocHJlY29uZGl0aW9uLmV4aXN0cyAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7IGV4aXN0czogcHJlY29uZGl0aW9uLmV4aXN0cyB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhaWwoJ1Vua25vd24gcHJlY29uZGl0aW9uJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIEpzb25Qcm90b1NlcmlhbGl6ZXIucHJvdG90eXBlLmZyb21QcmVjb25kaXRpb24gPSBmdW5jdGlvbiAocHJlY29uZGl0aW9uKSB7XHJcbiAgICAgICAgaWYgKHByZWNvbmRpdGlvbi51cGRhdGVUaW1lICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFByZWNvbmRpdGlvbi51cGRhdGVUaW1lKHRoaXMuZnJvbVZlcnNpb24ocHJlY29uZGl0aW9uLnVwZGF0ZVRpbWUpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAocHJlY29uZGl0aW9uLmV4aXN0cyAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBQcmVjb25kaXRpb24uZXhpc3RzKHByZWNvbmRpdGlvbi5leGlzdHMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIFByZWNvbmRpdGlvbi5OT05FO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBKc29uUHJvdG9TZXJpYWxpemVyLnByb3RvdHlwZS5mcm9tV3JpdGVSZXN1bHQgPSBmdW5jdGlvbiAocHJvdG8sIGNvbW1pdFRpbWUpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIC8vIE5PVEU6IERlbGV0ZXMgZG9uJ3QgaGF2ZSBhbiB1cGRhdGVUaW1lLlxyXG4gICAgICAgIHZhciB2ZXJzaW9uID0gcHJvdG8udXBkYXRlVGltZVxyXG4gICAgICAgICAgICA/IHRoaXMuZnJvbVZlcnNpb24ocHJvdG8udXBkYXRlVGltZSlcclxuICAgICAgICAgICAgOiB0aGlzLmZyb21WZXJzaW9uKGNvbW1pdFRpbWUpO1xyXG4gICAgICAgIGlmICh2ZXJzaW9uLmlzRXF1YWwoU25hcHNob3RWZXJzaW9uLk1JTikpIHtcclxuICAgICAgICAgICAgLy8gVGhlIEZpcmVzdG9yZSBFbXVsYXRvciBjdXJyZW50bHkgcmV0dXJucyBhbiB1cGRhdGUgdGltZSBvZiAwIGZvclxyXG4gICAgICAgICAgICAvLyBkZWxldGVzIG9mIG5vbi1leGlzdGluZyBkb2N1bWVudHMgKHJhdGhlciB0aGFuIG51bGwpLiBUaGlzIGJyZWFrcyB0aGVcclxuICAgICAgICAgICAgLy8gdGVzdCBcImdldCBkZWxldGVkIGRvYyB3aGlsZSBvZmZsaW5lIHdpdGggc291cmNlPWNhY2hlXCIgYXMgTm9Eb2N1bWVudHNcclxuICAgICAgICAgICAgLy8gd2l0aCB2ZXJzaW9uIDAgYXJlIGZpbHRlcmVkIGJ5IEluZGV4ZWREYidzIFJlbW90ZURvY3VtZW50Q2FjaGUuXHJcbiAgICAgICAgICAgIC8vIFRPRE8oIzIxNDkpOiBSZW1vdmUgdGhpcyB3aGVuIEVtdWxhdG9yIGlzIGZpeGVkXHJcbiAgICAgICAgICAgIHZlcnNpb24gPSB0aGlzLmZyb21WZXJzaW9uKGNvbW1pdFRpbWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgdHJhbnNmb3JtUmVzdWx0cyA9IG51bGw7XHJcbiAgICAgICAgaWYgKHByb3RvLnRyYW5zZm9ybVJlc3VsdHMgJiYgcHJvdG8udHJhbnNmb3JtUmVzdWx0cy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIHRyYW5zZm9ybVJlc3VsdHMgPSBwcm90by50cmFuc2Zvcm1SZXN1bHRzLm1hcChmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuZnJvbVZhbHVlKHJlc3VsdCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbmV3IE11dGF0aW9uUmVzdWx0KHZlcnNpb24sIHRyYW5zZm9ybVJlc3VsdHMpO1xyXG4gICAgfTtcclxuICAgIEpzb25Qcm90b1NlcmlhbGl6ZXIucHJvdG90eXBlLmZyb21Xcml0ZVJlc3VsdHMgPSBmdW5jdGlvbiAocHJvdG9zLCBjb21taXRUaW1lKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBpZiAocHJvdG9zICYmIHByb3Rvcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGFzc2VydChjb21taXRUaW1lICE9PSB1bmRlZmluZWQsICdSZWNlaXZlZCBhIHdyaXRlIHJlc3VsdCB3aXRob3V0IGEgY29tbWl0IHRpbWUnKTtcclxuICAgICAgICAgICAgcmV0dXJuIHByb3Rvcy5tYXAoZnVuY3Rpb24gKHByb3RvKSB7IHJldHVybiBfdGhpcy5mcm9tV3JpdGVSZXN1bHQocHJvdG8sIGNvbW1pdFRpbWUpOyB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBbXTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgSnNvblByb3RvU2VyaWFsaXplci5wcm90b3R5cGUudG9GaWVsZFRyYW5zZm9ybSA9IGZ1bmN0aW9uIChmaWVsZFRyYW5zZm9ybSkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIHRyYW5zZm9ybSA9IGZpZWxkVHJhbnNmb3JtLnRyYW5zZm9ybTtcclxuICAgICAgICBpZiAodHJhbnNmb3JtIGluc3RhbmNlb2YgU2VydmVyVGltZXN0YW1wVHJhbnNmb3JtKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBmaWVsZFBhdGg6IGZpZWxkVHJhbnNmb3JtLmZpZWxkLmNhbm9uaWNhbFN0cmluZygpLFxyXG4gICAgICAgICAgICAgICAgc2V0VG9TZXJ2ZXJWYWx1ZTogJ1JFUVVFU1RfVElNRSdcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodHJhbnNmb3JtIGluc3RhbmNlb2YgQXJyYXlVbmlvblRyYW5zZm9ybU9wZXJhdGlvbikge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgZmllbGRQYXRoOiBmaWVsZFRyYW5zZm9ybS5maWVsZC5jYW5vbmljYWxTdHJpbmcoKSxcclxuICAgICAgICAgICAgICAgIGFwcGVuZE1pc3NpbmdFbGVtZW50czoge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlczogdHJhbnNmb3JtLmVsZW1lbnRzLm1hcChmdW5jdGlvbiAodikgeyByZXR1cm4gX3RoaXMudG9WYWx1ZSh2KTsgfSlcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodHJhbnNmb3JtIGluc3RhbmNlb2YgQXJyYXlSZW1vdmVUcmFuc2Zvcm1PcGVyYXRpb24pIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIGZpZWxkUGF0aDogZmllbGRUcmFuc2Zvcm0uZmllbGQuY2Fub25pY2FsU3RyaW5nKCksXHJcbiAgICAgICAgICAgICAgICByZW1vdmVBbGxGcm9tQXJyYXk6IHtcclxuICAgICAgICAgICAgICAgICAgICB2YWx1ZXM6IHRyYW5zZm9ybS5lbGVtZW50cy5tYXAoZnVuY3Rpb24gKHYpIHsgcmV0dXJuIF90aGlzLnRvVmFsdWUodik7IH0pXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHRyYW5zZm9ybSBpbnN0YW5jZW9mIE51bWVyaWNJbmNyZW1lbnRUcmFuc2Zvcm1PcGVyYXRpb24pIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIGZpZWxkUGF0aDogZmllbGRUcmFuc2Zvcm0uZmllbGQuY2Fub25pY2FsU3RyaW5nKCksXHJcbiAgICAgICAgICAgICAgICBpbmNyZW1lbnQ6IHRoaXMudG9WYWx1ZSh0cmFuc2Zvcm0ub3BlcmFuZClcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRocm93IGZhaWwoJ1Vua25vd24gdHJhbnNmb3JtOiAnICsgZmllbGRUcmFuc2Zvcm0udHJhbnNmb3JtKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgSnNvblByb3RvU2VyaWFsaXplci5wcm90b3R5cGUuZnJvbUZpZWxkVHJhbnNmb3JtID0gZnVuY3Rpb24gKHByb3RvKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgdHJhbnNmb3JtID0gbnVsbDtcclxuICAgICAgICBpZiAoJ3NldFRvU2VydmVyVmFsdWUnIGluIHByb3RvKSB7XHJcbiAgICAgICAgICAgIGFzc2VydChwcm90by5zZXRUb1NlcnZlclZhbHVlID09PSAnUkVRVUVTVF9USU1FJywgJ1Vua25vd24gc2VydmVyIHZhbHVlIHRyYW5zZm9ybSBwcm90bzogJyArIEpTT04uc3RyaW5naWZ5KHByb3RvKSk7XHJcbiAgICAgICAgICAgIHRyYW5zZm9ybSA9IFNlcnZlclRpbWVzdGFtcFRyYW5zZm9ybS5pbnN0YW5jZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoJ2FwcGVuZE1pc3NpbmdFbGVtZW50cycgaW4gcHJvdG8pIHtcclxuICAgICAgICAgICAgdmFyIHZhbHVlcyA9IHByb3RvLmFwcGVuZE1pc3NpbmdFbGVtZW50cy52YWx1ZXMgfHwgW107XHJcbiAgICAgICAgICAgIHRyYW5zZm9ybSA9IG5ldyBBcnJheVVuaW9uVHJhbnNmb3JtT3BlcmF0aW9uKHZhbHVlcy5tYXAoZnVuY3Rpb24gKHYpIHsgcmV0dXJuIF90aGlzLmZyb21WYWx1ZSh2KTsgfSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICgncmVtb3ZlQWxsRnJvbUFycmF5JyBpbiBwcm90bykge1xyXG4gICAgICAgICAgICB2YXIgdmFsdWVzID0gcHJvdG8ucmVtb3ZlQWxsRnJvbUFycmF5LnZhbHVlcyB8fCBbXTtcclxuICAgICAgICAgICAgdHJhbnNmb3JtID0gbmV3IEFycmF5UmVtb3ZlVHJhbnNmb3JtT3BlcmF0aW9uKHZhbHVlcy5tYXAoZnVuY3Rpb24gKHYpIHsgcmV0dXJuIF90aGlzLmZyb21WYWx1ZSh2KTsgfSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICgnaW5jcmVtZW50JyBpbiBwcm90bykge1xyXG4gICAgICAgICAgICB2YXIgb3BlcmFuZCA9IHRoaXMuZnJvbVZhbHVlKHByb3RvLmluY3JlbWVudCk7XHJcbiAgICAgICAgICAgIGFzc2VydChvcGVyYW5kIGluc3RhbmNlb2YgTnVtYmVyVmFsdWUsICdOVU1FUklDX0FERCB0cmFuc2Zvcm0gcmVxdWlyZXMgYSBOdW1iZXJWYWx1ZScpO1xyXG4gICAgICAgICAgICB0cmFuc2Zvcm0gPSBuZXcgTnVtZXJpY0luY3JlbWVudFRyYW5zZm9ybU9wZXJhdGlvbihvcGVyYW5kKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGZhaWwoJ1Vua25vd24gdHJhbnNmb3JtIHByb3RvOiAnICsgSlNPTi5zdHJpbmdpZnkocHJvdG8pKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGZpZWxkUGF0aCA9IEZpZWxkUGF0aC5mcm9tU2VydmVyRm9ybWF0KHByb3RvLmZpZWxkUGF0aCk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBGaWVsZFRyYW5zZm9ybShmaWVsZFBhdGgsIHRyYW5zZm9ybSk7XHJcbiAgICB9O1xyXG4gICAgSnNvblByb3RvU2VyaWFsaXplci5wcm90b3R5cGUudG9Eb2N1bWVudHNUYXJnZXQgPSBmdW5jdGlvbiAodGFyZ2V0KSB7XHJcbiAgICAgICAgcmV0dXJuIHsgZG9jdW1lbnRzOiBbdGhpcy50b1F1ZXJ5UGF0aCh0YXJnZXQucGF0aCldIH07XHJcbiAgICB9O1xyXG4gICAgSnNvblByb3RvU2VyaWFsaXplci5wcm90b3R5cGUuZnJvbURvY3VtZW50c1RhcmdldCA9IGZ1bmN0aW9uIChkb2N1bWVudHNUYXJnZXQpIHtcclxuICAgICAgICB2YXIgY291bnQgPSBkb2N1bWVudHNUYXJnZXQuZG9jdW1lbnRzLmxlbmd0aDtcclxuICAgICAgICBhc3NlcnQoY291bnQgPT09IDEsICdEb2N1bWVudHNUYXJnZXQgY29udGFpbmVkIG90aGVyIHRoYW4gMSBkb2N1bWVudDogJyArIGNvdW50KTtcclxuICAgICAgICB2YXIgbmFtZSA9IGRvY3VtZW50c1RhcmdldC5kb2N1bWVudHNbMF07XHJcbiAgICAgICAgcmV0dXJuIFF1ZXJ5LmF0UGF0aCh0aGlzLmZyb21RdWVyeVBhdGgobmFtZSkpLnRvVGFyZ2V0KCk7XHJcbiAgICB9O1xyXG4gICAgSnNvblByb3RvU2VyaWFsaXplci5wcm90b3R5cGUudG9RdWVyeVRhcmdldCA9IGZ1bmN0aW9uICh0YXJnZXQpIHtcclxuICAgICAgICAvLyBEaXNzZWN0IHRoZSBwYXRoIGludG8gcGFyZW50LCBjb2xsZWN0aW9uSWQsIGFuZCBvcHRpb25hbCBrZXkgZmlsdGVyLlxyXG4gICAgICAgIHZhciByZXN1bHQgPSB7IHN0cnVjdHVyZWRRdWVyeToge30gfTtcclxuICAgICAgICB2YXIgcGF0aCA9IHRhcmdldC5wYXRoO1xyXG4gICAgICAgIGlmICh0YXJnZXQuY29sbGVjdGlvbkdyb3VwICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIGFzc2VydChwYXRoLmxlbmd0aCAlIDIgPT09IDAsICdDb2xsZWN0aW9uIEdyb3VwIHF1ZXJpZXMgc2hvdWxkIGJlIHdpdGhpbiBhIGRvY3VtZW50IHBhdGggb3Igcm9vdC4nKTtcclxuICAgICAgICAgICAgcmVzdWx0LnBhcmVudCA9IHRoaXMudG9RdWVyeVBhdGgocGF0aCk7XHJcbiAgICAgICAgICAgIHJlc3VsdC5zdHJ1Y3R1cmVkUXVlcnkuZnJvbSA9IFtcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBjb2xsZWN0aW9uSWQ6IHRhcmdldC5jb2xsZWN0aW9uR3JvdXAsXHJcbiAgICAgICAgICAgICAgICAgICAgYWxsRGVzY2VuZGFudHM6IHRydWVcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGFzc2VydChwYXRoLmxlbmd0aCAlIDIgIT09IDAsICdEb2N1bWVudCBxdWVyaWVzIHdpdGggZmlsdGVycyBhcmUgbm90IHN1cHBvcnRlZC4nKTtcclxuICAgICAgICAgICAgcmVzdWx0LnBhcmVudCA9IHRoaXMudG9RdWVyeVBhdGgocGF0aC5wb3BMYXN0KCkpO1xyXG4gICAgICAgICAgICByZXN1bHQuc3RydWN0dXJlZFF1ZXJ5LmZyb20gPSBbeyBjb2xsZWN0aW9uSWQ6IHBhdGgubGFzdFNlZ21lbnQoKSB9XTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIHdoZXJlID0gdGhpcy50b0ZpbHRlcih0YXJnZXQuZmlsdGVycyk7XHJcbiAgICAgICAgaWYgKHdoZXJlKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdC5zdHJ1Y3R1cmVkUXVlcnkud2hlcmUgPSB3aGVyZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIG9yZGVyQnkgPSB0aGlzLnRvT3JkZXIodGFyZ2V0Lm9yZGVyQnkpO1xyXG4gICAgICAgIGlmIChvcmRlckJ5KSB7XHJcbiAgICAgICAgICAgIHJlc3VsdC5zdHJ1Y3R1cmVkUXVlcnkub3JkZXJCeSA9IG9yZGVyQnk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBsaW1pdCA9IHRoaXMudG9JbnQzMlZhbHVlKHRhcmdldC5saW1pdCk7XHJcbiAgICAgICAgaWYgKGxpbWl0ICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdC5zdHJ1Y3R1cmVkUXVlcnkubGltaXQgPSBsaW1pdDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRhcmdldC5zdGFydEF0KSB7XHJcbiAgICAgICAgICAgIHJlc3VsdC5zdHJ1Y3R1cmVkUXVlcnkuc3RhcnRBdCA9IHRoaXMudG9DdXJzb3IodGFyZ2V0LnN0YXJ0QXQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGFyZ2V0LmVuZEF0KSB7XHJcbiAgICAgICAgICAgIHJlc3VsdC5zdHJ1Y3R1cmVkUXVlcnkuZW5kQXQgPSB0aGlzLnRvQ3Vyc29yKHRhcmdldC5lbmRBdCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9O1xyXG4gICAgSnNvblByb3RvU2VyaWFsaXplci5wcm90b3R5cGUuZnJvbVF1ZXJ5VGFyZ2V0ID0gZnVuY3Rpb24gKHRhcmdldCkge1xyXG4gICAgICAgIHZhciBwYXRoID0gdGhpcy5mcm9tUXVlcnlQYXRoKHRhcmdldC5wYXJlbnQpO1xyXG4gICAgICAgIHZhciBxdWVyeSA9IHRhcmdldC5zdHJ1Y3R1cmVkUXVlcnk7XHJcbiAgICAgICAgdmFyIGZyb21Db3VudCA9IHF1ZXJ5LmZyb20gPyBxdWVyeS5mcm9tLmxlbmd0aCA6IDA7XHJcbiAgICAgICAgdmFyIGNvbGxlY3Rpb25Hcm91cCA9IG51bGw7XHJcbiAgICAgICAgaWYgKGZyb21Db3VudCA+IDApIHtcclxuICAgICAgICAgICAgYXNzZXJ0KGZyb21Db3VudCA9PT0gMSwgJ1N0cnVjdHVyZWRRdWVyeS5mcm9tIHdpdGggbW9yZSB0aGFuIG9uZSBjb2xsZWN0aW9uIGlzIG5vdCBzdXBwb3J0ZWQuJyk7XHJcbiAgICAgICAgICAgIHZhciBmcm9tID0gcXVlcnkuZnJvbVswXTtcclxuICAgICAgICAgICAgaWYgKGZyb20uYWxsRGVzY2VuZGFudHMpIHtcclxuICAgICAgICAgICAgICAgIGNvbGxlY3Rpb25Hcm91cCA9IGZyb20uY29sbGVjdGlvbklkO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcGF0aCA9IHBhdGguY2hpbGQoZnJvbS5jb2xsZWN0aW9uSWQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBmaWx0ZXJCeSA9IFtdO1xyXG4gICAgICAgIGlmIChxdWVyeS53aGVyZSkge1xyXG4gICAgICAgICAgICBmaWx0ZXJCeSA9IHRoaXMuZnJvbUZpbHRlcihxdWVyeS53aGVyZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBvcmRlckJ5ID0gW107XHJcbiAgICAgICAgaWYgKHF1ZXJ5Lm9yZGVyQnkpIHtcclxuICAgICAgICAgICAgb3JkZXJCeSA9IHRoaXMuZnJvbU9yZGVyKHF1ZXJ5Lm9yZGVyQnkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgbGltaXQgPSBudWxsO1xyXG4gICAgICAgIGlmIChxdWVyeS5saW1pdCkge1xyXG4gICAgICAgICAgICBsaW1pdCA9IHRoaXMuZnJvbUludDMyVmFsdWUocXVlcnkubGltaXQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgc3RhcnRBdCA9IG51bGw7XHJcbiAgICAgICAgaWYgKHF1ZXJ5LnN0YXJ0QXQpIHtcclxuICAgICAgICAgICAgc3RhcnRBdCA9IHRoaXMuZnJvbUN1cnNvcihxdWVyeS5zdGFydEF0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGVuZEF0ID0gbnVsbDtcclxuICAgICAgICBpZiAocXVlcnkuZW5kQXQpIHtcclxuICAgICAgICAgICAgZW5kQXQgPSB0aGlzLmZyb21DdXJzb3IocXVlcnkuZW5kQXQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbmV3IFF1ZXJ5KHBhdGgsIGNvbGxlY3Rpb25Hcm91cCwgb3JkZXJCeSwgZmlsdGVyQnksIGxpbWl0LCBMaW1pdFR5cGUuRmlyc3QsIHN0YXJ0QXQsIGVuZEF0KS50b1RhcmdldCgpO1xyXG4gICAgfTtcclxuICAgIEpzb25Qcm90b1NlcmlhbGl6ZXIucHJvdG90eXBlLnRvTGlzdGVuUmVxdWVzdExhYmVscyA9IGZ1bmN0aW9uICh0YXJnZXREYXRhKSB7XHJcbiAgICAgICAgdmFyIHZhbHVlID0gdGhpcy50b0xhYmVsKHRhcmdldERhdGEucHVycG9zZSk7XHJcbiAgICAgICAgaWYgKHZhbHVlID09IG51bGwpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgJ2dvb2ctbGlzdGVuLXRhZ3MnOiB2YWx1ZVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBKc29uUHJvdG9TZXJpYWxpemVyLnByb3RvdHlwZS50b0xhYmVsID0gZnVuY3Rpb24gKHB1cnBvc2UpIHtcclxuICAgICAgICBzd2l0Y2ggKHB1cnBvc2UpIHtcclxuICAgICAgICAgICAgY2FzZSBUYXJnZXRQdXJwb3NlLkxpc3RlbjpcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICBjYXNlIFRhcmdldFB1cnBvc2UuRXhpc3RlbmNlRmlsdGVyTWlzbWF0Y2g6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJ2V4aXN0ZW5jZS1maWx0ZXItbWlzbWF0Y2gnO1xyXG4gICAgICAgICAgICBjYXNlIFRhcmdldFB1cnBvc2UuTGltYm9SZXNvbHV0aW9uOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuICdsaW1iby1kb2N1bWVudCc7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFpbCgnVW5yZWNvZ25pemVkIHF1ZXJ5IHB1cnBvc2U6ICcgKyBwdXJwb3NlKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgSnNvblByb3RvU2VyaWFsaXplci5wcm90b3R5cGUudG9UYXJnZXQgPSBmdW5jdGlvbiAodGFyZ2V0RGF0YSkge1xyXG4gICAgICAgIHZhciByZXN1bHQ7XHJcbiAgICAgICAgdmFyIHRhcmdldCA9IHRhcmdldERhdGEudGFyZ2V0O1xyXG4gICAgICAgIGlmICh0YXJnZXQuaXNEb2N1bWVudFF1ZXJ5KCkpIHtcclxuICAgICAgICAgICAgcmVzdWx0ID0geyBkb2N1bWVudHM6IHRoaXMudG9Eb2N1bWVudHNUYXJnZXQodGFyZ2V0KSB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmVzdWx0ID0geyBxdWVyeTogdGhpcy50b1F1ZXJ5VGFyZ2V0KHRhcmdldCkgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmVzdWx0LnRhcmdldElkID0gdGFyZ2V0RGF0YS50YXJnZXRJZDtcclxuICAgICAgICBpZiAodGFyZ2V0RGF0YS5yZXN1bWVUb2tlbi5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdC5yZXN1bWVUb2tlbiA9IHRoaXMudW5zYWZlQ2FzdFByb3RvQnl0ZVN0cmluZyh0YXJnZXREYXRhLnJlc3VtZVRva2VuKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH07XHJcbiAgICBKc29uUHJvdG9TZXJpYWxpemVyLnByb3RvdHlwZS50b0ZpbHRlciA9IGZ1bmN0aW9uIChmaWx0ZXJzKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBpZiAoZmlsdGVycy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgcHJvdG9zID0gZmlsdGVycy5tYXAoZnVuY3Rpb24gKGZpbHRlcikge1xyXG4gICAgICAgICAgICBpZiAoZmlsdGVyIGluc3RhbmNlb2YgRmllbGRGaWx0ZXIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy50b1VuYXJ5T3JGaWVsZEZpbHRlcihmaWx0ZXIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhaWwoJ1VucmVjb2duaXplZCBmaWx0ZXI6ICcgKyBKU09OLnN0cmluZ2lmeShmaWx0ZXIpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGlmIChwcm90b3MubGVuZ3RoID09PSAxKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBwcm90b3NbMF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB7IGNvbXBvc2l0ZUZpbHRlcjogeyBvcDogJ0FORCcsIGZpbHRlcnM6IHByb3RvcyB9IH07XHJcbiAgICB9O1xyXG4gICAgSnNvblByb3RvU2VyaWFsaXplci5wcm90b3R5cGUuZnJvbUZpbHRlciA9IGZ1bmN0aW9uIChmaWx0ZXIpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIGlmICghZmlsdGVyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBbXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoZmlsdGVyLnVuYXJ5RmlsdGVyICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFt0aGlzLmZyb21VbmFyeUZpbHRlcihmaWx0ZXIpXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoZmlsdGVyLmZpZWxkRmlsdGVyICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFt0aGlzLmZyb21GaWVsZEZpbHRlcihmaWx0ZXIpXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoZmlsdGVyLmNvbXBvc2l0ZUZpbHRlciAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmaWx0ZXIuY29tcG9zaXRlRmlsdGVyXHJcbiAgICAgICAgICAgICAgICAuZmlsdGVycy5tYXAoZnVuY3Rpb24gKGYpIHsgcmV0dXJuIF90aGlzLmZyb21GaWx0ZXIoZik7IH0pXHJcbiAgICAgICAgICAgICAgICAucmVkdWNlKGZ1bmN0aW9uIChhY2N1bSwgY3VycmVudCkgeyByZXR1cm4gYWNjdW0uY29uY2F0KGN1cnJlbnQpOyB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWlsKCdVbmtub3duIGZpbHRlcjogJyArIEpTT04uc3RyaW5naWZ5KGZpbHRlcikpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBKc29uUHJvdG9TZXJpYWxpemVyLnByb3RvdHlwZS50b09yZGVyID0gZnVuY3Rpb24gKG9yZGVyQnlzKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBpZiAob3JkZXJCeXMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG9yZGVyQnlzLm1hcChmdW5jdGlvbiAob3JkZXIpIHsgcmV0dXJuIF90aGlzLnRvUHJvcGVydHlPcmRlcihvcmRlcik7IH0pO1xyXG4gICAgfTtcclxuICAgIEpzb25Qcm90b1NlcmlhbGl6ZXIucHJvdG90eXBlLmZyb21PcmRlciA9IGZ1bmN0aW9uIChvcmRlckJ5cykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIG9yZGVyQnlzLm1hcChmdW5jdGlvbiAob3JkZXIpIHsgcmV0dXJuIF90aGlzLmZyb21Qcm9wZXJ0eU9yZGVyKG9yZGVyKTsgfSk7XHJcbiAgICB9O1xyXG4gICAgSnNvblByb3RvU2VyaWFsaXplci5wcm90b3R5cGUudG9DdXJzb3IgPSBmdW5jdGlvbiAoY3Vyc29yKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBiZWZvcmU6IGN1cnNvci5iZWZvcmUsXHJcbiAgICAgICAgICAgIHZhbHVlczogY3Vyc29yLnBvc2l0aW9uLm1hcChmdW5jdGlvbiAoY29tcG9uZW50KSB7IHJldHVybiBfdGhpcy50b1ZhbHVlKGNvbXBvbmVudCk7IH0pXHJcbiAgICAgICAgfTtcclxuICAgIH07XHJcbiAgICBKc29uUHJvdG9TZXJpYWxpemVyLnByb3RvdHlwZS5mcm9tQ3Vyc29yID0gZnVuY3Rpb24gKGN1cnNvcikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIGJlZm9yZSA9ICEhY3Vyc29yLmJlZm9yZTtcclxuICAgICAgICB2YXIgcG9zaXRpb24gPSBjdXJzb3IudmFsdWVzLm1hcChmdW5jdGlvbiAoY29tcG9uZW50KSB7IHJldHVybiBfdGhpcy5mcm9tVmFsdWUoY29tcG9uZW50KTsgfSk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBCb3VuZChwb3NpdGlvbiwgYmVmb3JlKTtcclxuICAgIH07XHJcbiAgICAvLyB2aXNpYmxlIGZvciB0ZXN0aW5nXHJcbiAgICBKc29uUHJvdG9TZXJpYWxpemVyLnByb3RvdHlwZS50b0RpcmVjdGlvbiA9IGZ1bmN0aW9uIChkaXIpIHtcclxuICAgICAgICByZXR1cm4gRElSRUNUSU9OU1tkaXIubmFtZV07XHJcbiAgICB9O1xyXG4gICAgLy8gdmlzaWJsZSBmb3IgdGVzdGluZ1xyXG4gICAgSnNvblByb3RvU2VyaWFsaXplci5wcm90b3R5cGUuZnJvbURpcmVjdGlvbiA9IGZ1bmN0aW9uIChkaXIpIHtcclxuICAgICAgICBzd2l0Y2ggKGRpcikge1xyXG4gICAgICAgICAgICBjYXNlICdBU0NFTkRJTkcnOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIERpcmVjdGlvbi5BU0NFTkRJTkc7XHJcbiAgICAgICAgICAgIGNhc2UgJ0RFU0NFTkRJTkcnOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIERpcmVjdGlvbi5ERVNDRU5ESU5HO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLy8gdmlzaWJsZSBmb3IgdGVzdGluZ1xyXG4gICAgSnNvblByb3RvU2VyaWFsaXplci5wcm90b3R5cGUudG9PcGVyYXRvck5hbWUgPSBmdW5jdGlvbiAob3ApIHtcclxuICAgICAgICByZXR1cm4gT1BFUkFUT1JTW29wLm5hbWVdO1xyXG4gICAgfTtcclxuICAgIEpzb25Qcm90b1NlcmlhbGl6ZXIucHJvdG90eXBlLmZyb21PcGVyYXRvck5hbWUgPSBmdW5jdGlvbiAob3ApIHtcclxuICAgICAgICBzd2l0Y2ggKG9wKSB7XHJcbiAgICAgICAgICAgIGNhc2UgJ0VRVUFMJzpcclxuICAgICAgICAgICAgICAgIHJldHVybiBPcGVyYXRvci5FUVVBTDtcclxuICAgICAgICAgICAgY2FzZSAnR1JFQVRFUl9USEFOJzpcclxuICAgICAgICAgICAgICAgIHJldHVybiBPcGVyYXRvci5HUkVBVEVSX1RIQU47XHJcbiAgICAgICAgICAgIGNhc2UgJ0dSRUFURVJfVEhBTl9PUl9FUVVBTCc6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gT3BlcmF0b3IuR1JFQVRFUl9USEFOX09SX0VRVUFMO1xyXG4gICAgICAgICAgICBjYXNlICdMRVNTX1RIQU4nOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIE9wZXJhdG9yLkxFU1NfVEhBTjtcclxuICAgICAgICAgICAgY2FzZSAnTEVTU19USEFOX09SX0VRVUFMJzpcclxuICAgICAgICAgICAgICAgIHJldHVybiBPcGVyYXRvci5MRVNTX1RIQU5fT1JfRVFVQUw7XHJcbiAgICAgICAgICAgIGNhc2UgJ0FSUkFZX0NPTlRBSU5TJzpcclxuICAgICAgICAgICAgICAgIHJldHVybiBPcGVyYXRvci5BUlJBWV9DT05UQUlOUztcclxuICAgICAgICAgICAgY2FzZSAnSU4nOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIE9wZXJhdG9yLklOO1xyXG4gICAgICAgICAgICBjYXNlICdBUlJBWV9DT05UQUlOU19BTlknOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIE9wZXJhdG9yLkFSUkFZX0NPTlRBSU5TX0FOWTtcclxuICAgICAgICAgICAgY2FzZSAnT1BFUkFUT1JfVU5TUEVDSUZJRUQnOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhaWwoJ1Vuc3BlY2lmaWVkIG9wZXJhdG9yJyk7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFpbCgnVW5rbm93biBvcGVyYXRvcicpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBKc29uUHJvdG9TZXJpYWxpemVyLnByb3RvdHlwZS50b0ZpZWxkUGF0aFJlZmVyZW5jZSA9IGZ1bmN0aW9uIChwYXRoKSB7XHJcbiAgICAgICAgcmV0dXJuIHsgZmllbGRQYXRoOiBwYXRoLmNhbm9uaWNhbFN0cmluZygpIH07XHJcbiAgICB9O1xyXG4gICAgSnNvblByb3RvU2VyaWFsaXplci5wcm90b3R5cGUuZnJvbUZpZWxkUGF0aFJlZmVyZW5jZSA9IGZ1bmN0aW9uIChmaWVsZFJlZmVyZW5jZSkge1xyXG4gICAgICAgIHJldHVybiBGaWVsZFBhdGguZnJvbVNlcnZlckZvcm1hdChmaWVsZFJlZmVyZW5jZS5maWVsZFBhdGgpO1xyXG4gICAgfTtcclxuICAgIC8vIHZpc2libGUgZm9yIHRlc3RpbmdcclxuICAgIEpzb25Qcm90b1NlcmlhbGl6ZXIucHJvdG90eXBlLnRvUHJvcGVydHlPcmRlciA9IGZ1bmN0aW9uIChvcmRlckJ5KSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgZmllbGQ6IHRoaXMudG9GaWVsZFBhdGhSZWZlcmVuY2Uob3JkZXJCeS5maWVsZCksXHJcbiAgICAgICAgICAgIGRpcmVjdGlvbjogdGhpcy50b0RpcmVjdGlvbihvcmRlckJ5LmRpcilcclxuICAgICAgICB9O1xyXG4gICAgfTtcclxuICAgIEpzb25Qcm90b1NlcmlhbGl6ZXIucHJvdG90eXBlLmZyb21Qcm9wZXJ0eU9yZGVyID0gZnVuY3Rpb24gKG9yZGVyQnkpIHtcclxuICAgICAgICByZXR1cm4gbmV3IE9yZGVyQnkodGhpcy5mcm9tRmllbGRQYXRoUmVmZXJlbmNlKG9yZGVyQnkuZmllbGQpLCB0aGlzLmZyb21EaXJlY3Rpb24ob3JkZXJCeS5kaXJlY3Rpb24pKTtcclxuICAgIH07XHJcbiAgICBKc29uUHJvdG9TZXJpYWxpemVyLnByb3RvdHlwZS5mcm9tRmllbGRGaWx0ZXIgPSBmdW5jdGlvbiAoZmlsdGVyKSB7XHJcbiAgICAgICAgcmV0dXJuIEZpZWxkRmlsdGVyLmNyZWF0ZSh0aGlzLmZyb21GaWVsZFBhdGhSZWZlcmVuY2UoZmlsdGVyLmZpZWxkRmlsdGVyLmZpZWxkKSwgdGhpcy5mcm9tT3BlcmF0b3JOYW1lKGZpbHRlci5maWVsZEZpbHRlci5vcCksIHRoaXMuZnJvbVZhbHVlKGZpbHRlci5maWVsZEZpbHRlci52YWx1ZSkpO1xyXG4gICAgfTtcclxuICAgIC8vIHZpc2libGUgZm9yIHRlc3RpbmdcclxuICAgIEpzb25Qcm90b1NlcmlhbGl6ZXIucHJvdG90eXBlLnRvVW5hcnlPckZpZWxkRmlsdGVyID0gZnVuY3Rpb24gKGZpbHRlcikge1xyXG4gICAgICAgIGlmIChmaWx0ZXIub3AgPT09IE9wZXJhdG9yLkVRVUFMKSB7XHJcbiAgICAgICAgICAgIGlmIChmaWx0ZXIudmFsdWUuaXNFcXVhbChEb3VibGVWYWx1ZS5OQU4pKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHVuYXJ5RmlsdGVyOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkOiB0aGlzLnRvRmllbGRQYXRoUmVmZXJlbmNlKGZpbHRlci5maWVsZCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wOiAnSVNfTkFOJ1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoZmlsdGVyLnZhbHVlLmlzRXF1YWwoTnVsbFZhbHVlLklOU1RBTkNFKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICAgICB1bmFyeUZpbHRlcjoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWVsZDogdGhpcy50b0ZpZWxkUGF0aFJlZmVyZW5jZShmaWx0ZXIuZmllbGQpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvcDogJ0lTX05VTEwnXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBmaWVsZEZpbHRlcjoge1xyXG4gICAgICAgICAgICAgICAgZmllbGQ6IHRoaXMudG9GaWVsZFBhdGhSZWZlcmVuY2UoZmlsdGVyLmZpZWxkKSxcclxuICAgICAgICAgICAgICAgIG9wOiB0aGlzLnRvT3BlcmF0b3JOYW1lKGZpbHRlci5vcCksXHJcbiAgICAgICAgICAgICAgICB2YWx1ZTogdGhpcy50b1ZhbHVlKGZpbHRlci52YWx1ZSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9O1xyXG4gICAgSnNvblByb3RvU2VyaWFsaXplci5wcm90b3R5cGUuZnJvbVVuYXJ5RmlsdGVyID0gZnVuY3Rpb24gKGZpbHRlcikge1xyXG4gICAgICAgIHN3aXRjaCAoZmlsdGVyLnVuYXJ5RmlsdGVyLm9wKSB7XHJcbiAgICAgICAgICAgIGNhc2UgJ0lTX05BTic6XHJcbiAgICAgICAgICAgICAgICB2YXIgbmFuRmllbGQgPSB0aGlzLmZyb21GaWVsZFBhdGhSZWZlcmVuY2UoZmlsdGVyLnVuYXJ5RmlsdGVyLmZpZWxkKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBGaWVsZEZpbHRlci5jcmVhdGUobmFuRmllbGQsIE9wZXJhdG9yLkVRVUFMLCBEb3VibGVWYWx1ZS5OQU4pO1xyXG4gICAgICAgICAgICBjYXNlICdJU19OVUxMJzpcclxuICAgICAgICAgICAgICAgIHZhciBudWxsRmllbGQgPSB0aGlzLmZyb21GaWVsZFBhdGhSZWZlcmVuY2UoZmlsdGVyLnVuYXJ5RmlsdGVyLmZpZWxkKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBGaWVsZEZpbHRlci5jcmVhdGUobnVsbEZpZWxkLCBPcGVyYXRvci5FUVVBTCwgTnVsbFZhbHVlLklOU1RBTkNFKTtcclxuICAgICAgICAgICAgY2FzZSAnT1BFUkFUT1JfVU5TUEVDSUZJRUQnOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhaWwoJ1Vuc3BlY2lmaWVkIGZpbHRlcicpO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhaWwoJ1Vua25vd24gZmlsdGVyJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIEpzb25Qcm90b1NlcmlhbGl6ZXIucHJvdG90eXBlLnRvRG9jdW1lbnRNYXNrID0gZnVuY3Rpb24gKGZpZWxkTWFzaykge1xyXG4gICAgICAgIHZhciBjYW5vbmljYWxGaWVsZHMgPSBbXTtcclxuICAgICAgICBmaWVsZE1hc2suZmllbGRzLmZvckVhY2goZnVuY3Rpb24gKGZpZWxkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBjYW5vbmljYWxGaWVsZHMucHVzaChmaWVsZC5jYW5vbmljYWxTdHJpbmcoKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgZmllbGRQYXRoczogY2Fub25pY2FsRmllbGRzXHJcbiAgICAgICAgfTtcclxuICAgIH07XHJcbiAgICBKc29uUHJvdG9TZXJpYWxpemVyLnByb3RvdHlwZS5mcm9tRG9jdW1lbnRNYXNrID0gZnVuY3Rpb24gKHByb3RvKSB7XHJcbiAgICAgICAgdmFyIHBhdGhzID0gcHJvdG8uZmllbGRQYXRocyB8fCBbXTtcclxuICAgICAgICB2YXIgZmllbGRzID0gcGF0aHMubWFwKGZ1bmN0aW9uIChwYXRoKSB7IHJldHVybiBGaWVsZFBhdGguZnJvbVNlcnZlckZvcm1hdChwYXRoKTsgfSk7XHJcbiAgICAgICAgcmV0dXJuIEZpZWxkTWFzay5mcm9tQXJyYXkoZmllbGRzKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gSnNvblByb3RvU2VyaWFsaXplcjtcclxufSgpKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBIb2xkcyB0aGUgbGlzdGVuZXJzIGFuZCB0aGUgbGFzdCByZWNlaXZlZCBWaWV3U25hcHNob3QgZm9yIGEgcXVlcnkgYmVpbmdcclxuICogdHJhY2tlZCBieSBFdmVudE1hbmFnZXIuXHJcbiAqL1xyXG52YXIgUXVlcnlMaXN0ZW5lcnNJbmZvID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gUXVlcnlMaXN0ZW5lcnNJbmZvKCkge1xyXG4gICAgICAgIHRoaXMudmlld1NuYXAgPSBudWxsO1xyXG4gICAgICAgIHRoaXMudGFyZ2V0SWQgPSAwO1xyXG4gICAgICAgIHRoaXMubGlzdGVuZXJzID0gW107XHJcbiAgICB9XHJcbiAgICByZXR1cm4gUXVlcnlMaXN0ZW5lcnNJbmZvO1xyXG59KCkpO1xyXG4vKipcclxuICogRXZlbnRNYW5hZ2VyIGlzIHJlc3BvbnNpYmxlIGZvciBtYXBwaW5nIHF1ZXJpZXMgdG8gcXVlcnkgZXZlbnQgZW1pdHRlcnMuXHJcbiAqIEl0IGhhbmRsZXMgXCJmYW4tb3V0XCIuIC0tIElkZW50aWNhbCBxdWVyaWVzIHdpbGwgcmUtdXNlIHRoZSBzYW1lIHdhdGNoIG9uIHRoZVxyXG4gKiBiYWNrZW5kLlxyXG4gKi9cclxudmFyIEV2ZW50TWFuYWdlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEV2ZW50TWFuYWdlcihzeW5jRW5naW5lKSB7XHJcbiAgICAgICAgdGhpcy5zeW5jRW5naW5lID0gc3luY0VuZ2luZTtcclxuICAgICAgICB0aGlzLnF1ZXJpZXMgPSBuZXcgT2JqZWN0TWFwKGZ1bmN0aW9uIChxKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBxLmNhbm9uaWNhbElkKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5vbmxpbmVTdGF0ZSA9IE9ubGluZVN0YXRlLlVua25vd247XHJcbiAgICAgICAgdGhpcy5zbmFwc2hvdHNJblN5bmNMaXN0ZW5lcnMgPSBuZXcgU2V0KCk7XHJcbiAgICAgICAgdGhpcy5zeW5jRW5naW5lLnN1YnNjcmliZSh0aGlzKTtcclxuICAgIH1cclxuICAgIEV2ZW50TWFuYWdlci5wcm90b3R5cGUubGlzdGVuID0gZnVuY3Rpb24gKGxpc3RlbmVyKSB7XHJcbiAgICAgICAgdmFyIHF1ZXJ5ID0gbGlzdGVuZXIucXVlcnk7XHJcbiAgICAgICAgdmFyIGZpcnN0TGlzdGVuID0gZmFsc2U7XHJcbiAgICAgICAgdmFyIHF1ZXJ5SW5mbyA9IHRoaXMucXVlcmllcy5nZXQocXVlcnkpO1xyXG4gICAgICAgIGlmICghcXVlcnlJbmZvKSB7XHJcbiAgICAgICAgICAgIGZpcnN0TGlzdGVuID0gdHJ1ZTtcclxuICAgICAgICAgICAgcXVlcnlJbmZvID0gbmV3IFF1ZXJ5TGlzdGVuZXJzSW5mbygpO1xyXG4gICAgICAgICAgICB0aGlzLnF1ZXJpZXMuc2V0KHF1ZXJ5LCBxdWVyeUluZm8pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBxdWVyeUluZm8ubGlzdGVuZXJzLnB1c2gobGlzdGVuZXIpO1xyXG4gICAgICAgIC8vIFJ1biBnbG9iYWwgc25hcHNob3QgbGlzdGVuZXJzIGlmIGEgY29uc2lzdGVudCBzbmFwc2hvdCBoYXMgYmVlbiBlbWl0dGVkLlxyXG4gICAgICAgIHZhciByYWlzZWRFdmVudCA9IGxpc3RlbmVyLmFwcGx5T25saW5lU3RhdGVDaGFuZ2UodGhpcy5vbmxpbmVTdGF0ZSk7XHJcbiAgICAgICAgYXNzZXJ0KCFyYWlzZWRFdmVudCwgXCJhcHBseU9ubGluZVN0YXRlQ2hhbmdlKCkgc2hvdWxkbid0IHJhaXNlIGFuIGV2ZW50IGZvciBicmFuZC1uZXcgbGlzdGVuZXJzLlwiKTtcclxuICAgICAgICBpZiAocXVlcnlJbmZvLnZpZXdTbmFwKSB7XHJcbiAgICAgICAgICAgIHZhciByYWlzZWRFdmVudF8xID0gbGlzdGVuZXIub25WaWV3U25hcHNob3QocXVlcnlJbmZvLnZpZXdTbmFwKTtcclxuICAgICAgICAgICAgaWYgKHJhaXNlZEV2ZW50XzEpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmFpc2VTbmFwc2hvdHNJblN5bmNFdmVudCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChmaXJzdExpc3Rlbikge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zeW5jRW5naW5lLmxpc3RlbihxdWVyeSkudGhlbihmdW5jdGlvbiAodGFyZ2V0SWQpIHtcclxuICAgICAgICAgICAgICAgIHF1ZXJ5SW5mby50YXJnZXRJZCA9IHRhcmdldElkO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRhcmdldElkO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUocXVlcnlJbmZvLnRhcmdldElkKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgRXZlbnRNYW5hZ2VyLnByb3RvdHlwZS51bmxpc3RlbiA9IGZ1bmN0aW9uIChsaXN0ZW5lcikge1xyXG4gICAgICAgIHJldHVybiB0c2xpYi5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHF1ZXJ5LCBsYXN0TGlzdGVuLCBxdWVyeUluZm8sIGk7XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYi5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHF1ZXJ5ID0gbGlzdGVuZXIucXVlcnk7XHJcbiAgICAgICAgICAgICAgICBsYXN0TGlzdGVuID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBxdWVyeUluZm8gPSB0aGlzLnF1ZXJpZXMuZ2V0KHF1ZXJ5KTtcclxuICAgICAgICAgICAgICAgIGlmIChxdWVyeUluZm8pIHtcclxuICAgICAgICAgICAgICAgICAgICBpID0gcXVlcnlJbmZvLmxpc3RlbmVycy5pbmRleE9mKGxpc3RlbmVyKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaSA+PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5SW5mby5saXN0ZW5lcnMuc3BsaWNlKGksIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYXN0TGlzdGVuID0gcXVlcnlJbmZvLmxpc3RlbmVycy5sZW5ndGggPT09IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKGxhc3RMaXN0ZW4pIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnF1ZXJpZXMuZGVsZXRlKHF1ZXJ5KTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdGhpcy5zeW5jRW5naW5lLnVubGlzdGVuKHF1ZXJ5KV07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIEV2ZW50TWFuYWdlci5wcm90b3R5cGUub25XYXRjaENoYW5nZSA9IGZ1bmN0aW9uICh2aWV3U25hcHMpIHtcclxuICAgICAgICB2YXIgcmFpc2VkRXZlbnQgPSBmYWxzZTtcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIHZpZXdTbmFwc18xID0gdmlld1NuYXBzOyBfaSA8IHZpZXdTbmFwc18xLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICB2YXIgdmlld1NuYXAgPSB2aWV3U25hcHNfMVtfaV07XHJcbiAgICAgICAgICAgIHZhciBxdWVyeSA9IHZpZXdTbmFwLnF1ZXJ5O1xyXG4gICAgICAgICAgICB2YXIgcXVlcnlJbmZvID0gdGhpcy5xdWVyaWVzLmdldChxdWVyeSk7XHJcbiAgICAgICAgICAgIGlmIChxdWVyeUluZm8pIHtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIF9hID0gMCwgX2IgPSBxdWVyeUluZm8ubGlzdGVuZXJzOyBfYSA8IF9iLmxlbmd0aDsgX2ErKykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBsaXN0ZW5lciA9IF9iW19hXTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobGlzdGVuZXIub25WaWV3U25hcHNob3Qodmlld1NuYXApKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJhaXNlZEV2ZW50ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBxdWVyeUluZm8udmlld1NuYXAgPSB2aWV3U25hcDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAocmFpc2VkRXZlbnQpIHtcclxuICAgICAgICAgICAgdGhpcy5yYWlzZVNuYXBzaG90c0luU3luY0V2ZW50KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIEV2ZW50TWFuYWdlci5wcm90b3R5cGUub25XYXRjaEVycm9yID0gZnVuY3Rpb24gKHF1ZXJ5LCBlcnJvcikge1xyXG4gICAgICAgIHZhciBxdWVyeUluZm8gPSB0aGlzLnF1ZXJpZXMuZ2V0KHF1ZXJ5KTtcclxuICAgICAgICBpZiAocXVlcnlJbmZvKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBxdWVyeUluZm8ubGlzdGVuZXJzOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGxpc3RlbmVyID0gX2FbX2ldO1xyXG4gICAgICAgICAgICAgICAgbGlzdGVuZXIub25FcnJvcihlcnJvcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gUmVtb3ZlIGFsbCBsaXN0ZW5lcnMuIE5PVEU6IFdlIGRvbid0IG5lZWQgdG8gY2FsbCBzeW5jRW5naW5lLnVubGlzdGVuKClcclxuICAgICAgICAvLyBhZnRlciBhbiBlcnJvci5cclxuICAgICAgICB0aGlzLnF1ZXJpZXMuZGVsZXRlKHF1ZXJ5KTtcclxuICAgIH07XHJcbiAgICBFdmVudE1hbmFnZXIucHJvdG90eXBlLm9uT25saW5lU3RhdGVDaGFuZ2UgPSBmdW5jdGlvbiAob25saW5lU3RhdGUpIHtcclxuICAgICAgICB0aGlzLm9ubGluZVN0YXRlID0gb25saW5lU3RhdGU7XHJcbiAgICAgICAgdmFyIHJhaXNlZEV2ZW50ID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5xdWVyaWVzLmZvckVhY2goZnVuY3Rpb24gKF8sIHF1ZXJ5SW5mbykge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gcXVlcnlJbmZvLmxpc3RlbmVyczsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgICAgIHZhciBsaXN0ZW5lciA9IF9hW19pXTtcclxuICAgICAgICAgICAgICAgIC8vIFJ1biBnbG9iYWwgc25hcHNob3QgbGlzdGVuZXJzIGlmIGEgY29uc2lzdGVudCBzbmFwc2hvdCBoYXMgYmVlbiBlbWl0dGVkLlxyXG4gICAgICAgICAgICAgICAgaWYgKGxpc3RlbmVyLmFwcGx5T25saW5lU3RhdGVDaGFuZ2Uob25saW5lU3RhdGUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmFpc2VkRXZlbnQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaWYgKHJhaXNlZEV2ZW50KSB7XHJcbiAgICAgICAgICAgIHRoaXMucmFpc2VTbmFwc2hvdHNJblN5bmNFdmVudCgpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBFdmVudE1hbmFnZXIucHJvdG90eXBlLmFkZFNuYXBzaG90c0luU3luY0xpc3RlbmVyID0gZnVuY3Rpb24gKG9ic2VydmVyKSB7XHJcbiAgICAgICAgdGhpcy5zbmFwc2hvdHNJblN5bmNMaXN0ZW5lcnMuYWRkKG9ic2VydmVyKTtcclxuICAgICAgICAvLyBJbW1lZGlhdGVseSBmaXJlIGFuIGluaXRpYWwgZXZlbnQsIGluZGljYXRpbmcgYWxsIGV4aXN0aW5nIGxpc3RlbmVyc1xyXG4gICAgICAgIC8vIGFyZSBpbi1zeW5jLlxyXG4gICAgICAgIG9ic2VydmVyLm5leHQoKTtcclxuICAgIH07XHJcbiAgICBFdmVudE1hbmFnZXIucHJvdG90eXBlLnJlbW92ZVNuYXBzaG90c0luU3luY0xpc3RlbmVyID0gZnVuY3Rpb24gKG9ic2VydmVyKSB7XHJcbiAgICAgICAgdGhpcy5zbmFwc2hvdHNJblN5bmNMaXN0ZW5lcnMuZGVsZXRlKG9ic2VydmVyKTtcclxuICAgIH07XHJcbiAgICAvLyBDYWxsIGFsbCBnbG9iYWwgc25hcHNob3QgbGlzdGVuZXJzIHRoYXQgaGF2ZSBiZWVuIHNldC5cclxuICAgIEV2ZW50TWFuYWdlci5wcm90b3R5cGUucmFpc2VTbmFwc2hvdHNJblN5bmNFdmVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLnNuYXBzaG90c0luU3luY0xpc3RlbmVycy5mb3JFYWNoKGZ1bmN0aW9uIChvYnNlcnZlcikge1xyXG4gICAgICAgICAgICBvYnNlcnZlci5uZXh0KCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEV2ZW50TWFuYWdlcjtcclxufSgpKTtcclxuLyoqXHJcbiAqIFF1ZXJ5TGlzdGVuZXIgdGFrZXMgYSBzZXJpZXMgb2YgaW50ZXJuYWwgdmlldyBzbmFwc2hvdHMgYW5kIGRldGVybWluZXNcclxuICogd2hlbiB0byByYWlzZSB0aGUgZXZlbnQuXHJcbiAqXHJcbiAqIEl0IHVzZXMgYW4gT2JzZXJ2ZXIgdG8gZGlzcGF0Y2ggZXZlbnRzLlxyXG4gKi9cclxudmFyIFF1ZXJ5TGlzdGVuZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBRdWVyeUxpc3RlbmVyKHF1ZXJ5LCBxdWVyeU9ic2VydmVyLCBvcHRpb25zKSB7XHJcbiAgICAgICAgdGhpcy5xdWVyeSA9IHF1ZXJ5O1xyXG4gICAgICAgIHRoaXMucXVlcnlPYnNlcnZlciA9IHF1ZXJ5T2JzZXJ2ZXI7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogSW5pdGlhbCBzbmFwc2hvdHMgKGUuZy4gZnJvbSBjYWNoZSkgbWF5IG5vdCBiZSBwcm9wYWdhdGVkIHRvIHRoZSB3cmFwcGVkXHJcbiAgICAgICAgICogb2JzZXJ2ZXIuIFRoaXMgZmxhZyBpcyBzZXQgdG8gdHJ1ZSBvbmNlIHdlJ3ZlIGFjdHVhbGx5IHJhaXNlZCBhbiBldmVudC5cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLnJhaXNlZEluaXRpYWxFdmVudCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuc25hcCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5vbmxpbmVTdGF0ZSA9IE9ubGluZVN0YXRlLlVua25vd247XHJcbiAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQXBwbGllcyB0aGUgbmV3IFZpZXdTbmFwc2hvdCB0byB0aGlzIGxpc3RlbmVyLCByYWlzaW5nIGEgdXNlci1mYWNpbmcgZXZlbnRcclxuICAgICAqIGlmIGFwcGxpY2FibGUgKGRlcGVuZGluZyBvbiB3aGF0IGNoYW5nZWQsIHdoZXRoZXIgdGhlIHVzZXIgaGFzIG9wdGVkIGludG9cclxuICAgICAqIG1ldGFkYXRhLW9ubHkgY2hhbmdlcywgZXRjLikuIFJldHVybnMgdHJ1ZSBpZiBhIHVzZXItZmFjaW5nIGV2ZW50IHdhc1xyXG4gICAgICogaW5kZWVkIHJhaXNlZC5cclxuICAgICAqL1xyXG4gICAgUXVlcnlMaXN0ZW5lci5wcm90b3R5cGUub25WaWV3U25hcHNob3QgPSBmdW5jdGlvbiAoc25hcCkge1xyXG4gICAgICAgIGFzc2VydChzbmFwLmRvY0NoYW5nZXMubGVuZ3RoID4gMCB8fCBzbmFwLnN5bmNTdGF0ZUNoYW5nZWQsICdXZSBnb3QgYSBuZXcgc25hcHNob3Qgd2l0aCBubyBjaGFuZ2VzPycpO1xyXG4gICAgICAgIGlmICghdGhpcy5vcHRpb25zLmluY2x1ZGVNZXRhZGF0YUNoYW5nZXMpIHtcclxuICAgICAgICAgICAgLy8gUmVtb3ZlIHRoZSBtZXRhZGF0YSBvbmx5IGNoYW5nZXMuXHJcbiAgICAgICAgICAgIHZhciBkb2NDaGFuZ2VzID0gW107XHJcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBzbmFwLmRvY0NoYW5nZXM7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZG9jQ2hhbmdlID0gX2FbX2ldO1xyXG4gICAgICAgICAgICAgICAgaWYgKGRvY0NoYW5nZS50eXBlICE9PSBDaGFuZ2VUeXBlLk1ldGFkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZG9jQ2hhbmdlcy5wdXNoKGRvY0NoYW5nZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc25hcCA9IG5ldyBWaWV3U25hcHNob3Qoc25hcC5xdWVyeSwgc25hcC5kb2NzLCBzbmFwLm9sZERvY3MsIGRvY0NoYW5nZXMsIHNuYXAubXV0YXRlZEtleXMsIHNuYXAuZnJvbUNhY2hlLCBzbmFwLnN5bmNTdGF0ZUNoYW5nZWQsIFxyXG4gICAgICAgICAgICAvKiBleGNsdWRlc01ldGFkYXRhQ2hhbmdlcz0gKi8gdHJ1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciByYWlzZWRFdmVudCA9IGZhbHNlO1xyXG4gICAgICAgIGlmICghdGhpcy5yYWlzZWRJbml0aWFsRXZlbnQpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuc2hvdWxkUmFpc2VJbml0aWFsRXZlbnQoc25hcCwgdGhpcy5vbmxpbmVTdGF0ZSkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmFpc2VJbml0aWFsRXZlbnQoc25hcCk7XHJcbiAgICAgICAgICAgICAgICByYWlzZWRFdmVudCA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodGhpcy5zaG91bGRSYWlzZUV2ZW50KHNuYXApKSB7XHJcbiAgICAgICAgICAgIHRoaXMucXVlcnlPYnNlcnZlci5uZXh0KHNuYXApO1xyXG4gICAgICAgICAgICByYWlzZWRFdmVudCA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuc25hcCA9IHNuYXA7XHJcbiAgICAgICAgcmV0dXJuIHJhaXNlZEV2ZW50O1xyXG4gICAgfTtcclxuICAgIFF1ZXJ5TGlzdGVuZXIucHJvdG90eXBlLm9uRXJyb3IgPSBmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICB0aGlzLnF1ZXJ5T2JzZXJ2ZXIuZXJyb3IoZXJyb3IpO1xyXG4gICAgfTtcclxuICAgIC8qKiBSZXR1cm5zIHdoZXRoZXIgYSBzbmFwc2hvdCB3YXMgcmFpc2VkLiAqL1xyXG4gICAgUXVlcnlMaXN0ZW5lci5wcm90b3R5cGUuYXBwbHlPbmxpbmVTdGF0ZUNoYW5nZSA9IGZ1bmN0aW9uIChvbmxpbmVTdGF0ZSkge1xyXG4gICAgICAgIHRoaXMub25saW5lU3RhdGUgPSBvbmxpbmVTdGF0ZTtcclxuICAgICAgICB2YXIgcmFpc2VkRXZlbnQgPSBmYWxzZTtcclxuICAgICAgICBpZiAodGhpcy5zbmFwICYmXHJcbiAgICAgICAgICAgICF0aGlzLnJhaXNlZEluaXRpYWxFdmVudCAmJlxyXG4gICAgICAgICAgICB0aGlzLnNob3VsZFJhaXNlSW5pdGlhbEV2ZW50KHRoaXMuc25hcCwgb25saW5lU3RhdGUpKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmFpc2VJbml0aWFsRXZlbnQodGhpcy5zbmFwKTtcclxuICAgICAgICAgICAgcmFpc2VkRXZlbnQgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmFpc2VkRXZlbnQ7XHJcbiAgICB9O1xyXG4gICAgUXVlcnlMaXN0ZW5lci5wcm90b3R5cGUuc2hvdWxkUmFpc2VJbml0aWFsRXZlbnQgPSBmdW5jdGlvbiAoc25hcCwgb25saW5lU3RhdGUpIHtcclxuICAgICAgICBhc3NlcnQoIXRoaXMucmFpc2VkSW5pdGlhbEV2ZW50LCAnRGV0ZXJtaW5pbmcgd2hldGhlciB0byByYWlzZSBmaXJzdCBldmVudCBidXQgYWxyZWFkeSBoYWQgZmlyc3QgZXZlbnQnKTtcclxuICAgICAgICAvLyBBbHdheXMgcmFpc2UgdGhlIGZpcnN0IGV2ZW50IHdoZW4gd2UncmUgc3luY2VkXHJcbiAgICAgICAgaWYgKCFzbmFwLmZyb21DYWNoZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gTk9URTogV2UgY29uc2lkZXIgT25saW5lU3RhdGUuVW5rbm93biBhcyBvbmxpbmUgKGl0IHNob3VsZCBiZWNvbWUgT2ZmbGluZVxyXG4gICAgICAgIC8vIG9yIE9ubGluZSBpZiB3ZSB3YWl0IGxvbmcgZW5vdWdoKS5cclxuICAgICAgICB2YXIgbWF5YmVPbmxpbmUgPSBvbmxpbmVTdGF0ZSAhPT0gT25saW5lU3RhdGUuT2ZmbGluZTtcclxuICAgICAgICAvLyBEb24ndCByYWlzZSB0aGUgZXZlbnQgaWYgd2UncmUgb25saW5lLCBhcmVuJ3Qgc3luY2VkIHlldCAoY2hlY2tlZFxyXG4gICAgICAgIC8vIGFib3ZlKSBhbmQgYXJlIHdhaXRpbmcgZm9yIGEgc3luYy5cclxuICAgICAgICBpZiAodGhpcy5vcHRpb25zLndhaXRGb3JTeW5jV2hlbk9ubGluZSAmJiBtYXliZU9ubGluZSkge1xyXG4gICAgICAgICAgICBhc3NlcnQoc25hcC5mcm9tQ2FjaGUsICdXYWl0aW5nIGZvciBzeW5jLCBidXQgc25hcHNob3QgaXMgbm90IGZyb20gY2FjaGUnKTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBSYWlzZSBkYXRhIGZyb20gY2FjaGUgaWYgd2UgaGF2ZSBhbnkgZG9jdW1lbnRzIG9yIHdlIGFyZSBvZmZsaW5lXHJcbiAgICAgICAgcmV0dXJuICFzbmFwLmRvY3MuaXNFbXB0eSgpIHx8IG9ubGluZVN0YXRlID09PSBPbmxpbmVTdGF0ZS5PZmZsaW5lO1xyXG4gICAgfTtcclxuICAgIFF1ZXJ5TGlzdGVuZXIucHJvdG90eXBlLnNob3VsZFJhaXNlRXZlbnQgPSBmdW5jdGlvbiAoc25hcCkge1xyXG4gICAgICAgIC8vIFdlIGRvbid0IG5lZWQgdG8gaGFuZGxlIGluY2x1ZGVEb2N1bWVudE1ldGFkYXRhQ2hhbmdlcyBoZXJlIGJlY2F1c2VcclxuICAgICAgICAvLyB0aGUgTWV0YWRhdGEgb25seSBjaGFuZ2VzIGhhdmUgYWxyZWFkeSBiZWVuIHN0cmlwcGVkIG91dCBpZiBuZWVkZWQuXHJcbiAgICAgICAgLy8gQXQgdGhpcyBwb2ludCB0aGUgb25seSBjaGFuZ2VzIHdlIHdpbGwgc2VlIGFyZSB0aGUgb25lcyB3ZSBzaG91bGRcclxuICAgICAgICAvLyBwcm9wYWdhdGUuXHJcbiAgICAgICAgaWYgKHNuYXAuZG9jQ2hhbmdlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgaGFzUGVuZGluZ1dyaXRlc0NoYW5nZWQgPSB0aGlzLnNuYXAgJiYgdGhpcy5zbmFwLmhhc1BlbmRpbmdXcml0ZXMgIT09IHNuYXAuaGFzUGVuZGluZ1dyaXRlcztcclxuICAgICAgICBpZiAoc25hcC5zeW5jU3RhdGVDaGFuZ2VkIHx8IGhhc1BlbmRpbmdXcml0ZXNDaGFuZ2VkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm9wdGlvbnMuaW5jbHVkZU1ldGFkYXRhQ2hhbmdlcyA9PT0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gR2VuZXJhbGx5IHdlIHNob3VsZCBoYXZlIGhpdCBvbmUgb2YgdGhlIGNhc2VzIGFib3ZlLCBidXQgaXQncyBwb3NzaWJsZVxyXG4gICAgICAgIC8vIHRvIGdldCBoZXJlIGlmIHRoZXJlIHdlcmUgb25seSBtZXRhZGF0YSBkb2NDaGFuZ2VzIGFuZCB0aGV5IGdvdFxyXG4gICAgICAgIC8vIHN0cmlwcGVkIG91dC5cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9O1xyXG4gICAgUXVlcnlMaXN0ZW5lci5wcm90b3R5cGUucmFpc2VJbml0aWFsRXZlbnQgPSBmdW5jdGlvbiAoc25hcCkge1xyXG4gICAgICAgIGFzc2VydCghdGhpcy5yYWlzZWRJbml0aWFsRXZlbnQsICdUcnlpbmcgdG8gcmFpc2UgaW5pdGlhbCBldmVudHMgZm9yIHNlY29uZCB0aW1lJyk7XHJcbiAgICAgICAgc25hcCA9IFZpZXdTbmFwc2hvdC5mcm9tSW5pdGlhbERvY3VtZW50cyhzbmFwLnF1ZXJ5LCBzbmFwLmRvY3MsIHNuYXAubXV0YXRlZEtleXMsIHNuYXAuZnJvbUNhY2hlKTtcclxuICAgICAgICB0aGlzLnJhaXNlZEluaXRpYWxFdmVudCA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5xdWVyeU9ic2VydmVyLm5leHQoc25hcCk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFF1ZXJ5TGlzdGVuZXI7XHJcbn0oKSk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQSBzZXQgb2YgY2hhbmdlcyB0byB3aGF0IGRvY3VtZW50cyBhcmUgY3VycmVudGx5IGluIHZpZXcgYW5kIG91dCBvZiB2aWV3IGZvclxyXG4gKiBhIGdpdmVuIHF1ZXJ5LiBUaGVzZSBjaGFuZ2VzIGFyZSBzZW50IHRvIHRoZSBMb2NhbFN0b3JlIGJ5IHRoZSBWaWV3ICh2aWFcclxuICogdGhlIFN5bmNFbmdpbmUpIGFuZCBhcmUgdXNlZCB0byBwaW4gLyB1bnBpbiBkb2N1bWVudHMgYXMgYXBwcm9wcmlhdGUuXHJcbiAqL1xyXG52YXIgTG9jYWxWaWV3Q2hhbmdlcyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIExvY2FsVmlld0NoYW5nZXModGFyZ2V0SWQsIGZyb21DYWNoZSwgYWRkZWRLZXlzLCByZW1vdmVkS2V5cykge1xyXG4gICAgICAgIHRoaXMudGFyZ2V0SWQgPSB0YXJnZXRJZDtcclxuICAgICAgICB0aGlzLmZyb21DYWNoZSA9IGZyb21DYWNoZTtcclxuICAgICAgICB0aGlzLmFkZGVkS2V5cyA9IGFkZGVkS2V5cztcclxuICAgICAgICB0aGlzLnJlbW92ZWRLZXlzID0gcmVtb3ZlZEtleXM7XHJcbiAgICB9XHJcbiAgICBMb2NhbFZpZXdDaGFuZ2VzLmZyb21TbmFwc2hvdCA9IGZ1bmN0aW9uICh0YXJnZXRJZCwgdmlld1NuYXBzaG90KSB7XHJcbiAgICAgICAgdmFyIGFkZGVkS2V5cyA9IGRvY3VtZW50S2V5U2V0KCk7XHJcbiAgICAgICAgdmFyIHJlbW92ZWRLZXlzID0gZG9jdW1lbnRLZXlTZXQoKTtcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gdmlld1NuYXBzaG90LmRvY0NoYW5nZXM7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBkb2NDaGFuZ2UgPSBfYVtfaV07XHJcbiAgICAgICAgICAgIHN3aXRjaCAoZG9jQ2hhbmdlLnR5cGUpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgQ2hhbmdlVHlwZS5BZGRlZDpcclxuICAgICAgICAgICAgICAgICAgICBhZGRlZEtleXMgPSBhZGRlZEtleXMuYWRkKGRvY0NoYW5nZS5kb2Mua2V5KTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgQ2hhbmdlVHlwZS5SZW1vdmVkOlxyXG4gICAgICAgICAgICAgICAgICAgIHJlbW92ZWRLZXlzID0gcmVtb3ZlZEtleXMuYWRkKGRvY0NoYW5nZS5kb2Mua2V5KTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIC8vIGRvIG5vdGhpbmdcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbmV3IExvY2FsVmlld0NoYW5nZXModGFyZ2V0SWQsIHZpZXdTbmFwc2hvdC5mcm9tQ2FjaGUsIGFkZGVkS2V5cywgcmVtb3ZlZEtleXMpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBMb2NhbFZpZXdDaGFuZ2VzO1xyXG59KCkpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxudmFyIEFkZGVkTGltYm9Eb2N1bWVudCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEFkZGVkTGltYm9Eb2N1bWVudChrZXkpIHtcclxuICAgICAgICB0aGlzLmtleSA9IGtleTtcclxuICAgIH1cclxuICAgIHJldHVybiBBZGRlZExpbWJvRG9jdW1lbnQ7XHJcbn0oKSk7XHJcbnZhciBSZW1vdmVkTGltYm9Eb2N1bWVudCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFJlbW92ZWRMaW1ib0RvY3VtZW50KGtleSkge1xyXG4gICAgICAgIHRoaXMua2V5ID0ga2V5O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIFJlbW92ZWRMaW1ib0RvY3VtZW50O1xyXG59KCkpO1xyXG4vKipcclxuICogVmlldyBpcyByZXNwb25zaWJsZSBmb3IgY29tcHV0aW5nIHRoZSBmaW5hbCBtZXJnZWQgdHJ1dGggb2Ygd2hhdCBkb2NzIGFyZSBpblxyXG4gKiBhIHF1ZXJ5LiBJdCBnZXRzIG5vdGlmaWVkIG9mIGxvY2FsIGFuZCByZW1vdGUgY2hhbmdlcyB0byBkb2NzLCBhbmQgYXBwbGllc1xyXG4gKiB0aGUgcXVlcnkgZmlsdGVycyBhbmQgbGltaXRzIHRvIGRldGVybWluZSB0aGUgbW9zdCBjb3JyZWN0IHBvc3NpYmxlIHJlc3VsdHMuXHJcbiAqL1xyXG52YXIgVmlldyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFZpZXcocXVlcnksIFxyXG4gICAgLyoqIERvY3VtZW50cyBpbmNsdWRlZCBpbiB0aGUgcmVtb3RlIHRhcmdldCAqL1xyXG4gICAgX3N5bmNlZERvY3VtZW50cykge1xyXG4gICAgICAgIHRoaXMucXVlcnkgPSBxdWVyeTtcclxuICAgICAgICB0aGlzLl9zeW5jZWREb2N1bWVudHMgPSBfc3luY2VkRG9jdW1lbnRzO1xyXG4gICAgICAgIHRoaXMuc3luY1N0YXRlID0gbnVsbDtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBBIGZsYWcgd2hldGhlciB0aGUgdmlldyBpcyBjdXJyZW50IHdpdGggdGhlIGJhY2tlbmQuIEEgdmlldyBpcyBjb25zaWRlcmVkXHJcbiAgICAgICAgICogY3VycmVudCBhZnRlciBpdCBoYXMgc2VlbiB0aGUgY3VycmVudCBmbGFnIGZyb20gdGhlIGJhY2tlbmQgYW5kIGRpZCBub3RcclxuICAgICAgICAgKiBsb3NlIGNvbnNpc3RlbmN5IHdpdGhpbiB0aGUgd2F0Y2ggc3RyZWFtIChlLmcuIGJlY2F1c2Ugb2YgYW4gZXhpc3RlbmNlXHJcbiAgICAgICAgICogZmlsdGVyIG1pc21hdGNoKS5cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLmN1cnJlbnQgPSBmYWxzZTtcclxuICAgICAgICAvKiogRG9jdW1lbnRzIGluIHRoZSB2aWV3IGJ1dCBub3QgaW4gdGhlIHJlbW90ZSB0YXJnZXQgKi9cclxuICAgICAgICB0aGlzLmxpbWJvRG9jdW1lbnRzID0gZG9jdW1lbnRLZXlTZXQoKTtcclxuICAgICAgICAvKiogRG9jdW1lbnQgS2V5cyB0aGF0IGhhdmUgbG9jYWwgY2hhbmdlcyAqL1xyXG4gICAgICAgIHRoaXMubXV0YXRlZEtleXMgPSBkb2N1bWVudEtleVNldCgpO1xyXG4gICAgICAgIHRoaXMuZG9jdW1lbnRTZXQgPSBuZXcgRG9jdW1lbnRTZXQocXVlcnkuZG9jQ29tcGFyYXRvci5iaW5kKHF1ZXJ5KSk7XHJcbiAgICB9XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVmlldy5wcm90b3R5cGUsIFwic3luY2VkRG9jdW1lbnRzXCIsIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBUaGUgc2V0IG9mIHJlbW90ZSBkb2N1bWVudHMgdGhhdCB0aGUgc2VydmVyIGhhcyB0b2xkIHVzIGJlbG9uZ3MgdG8gdGhlIHRhcmdldCBhc3NvY2lhdGVkIHdpdGhcclxuICAgICAgICAgKiB0aGlzIHZpZXcuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9zeW5jZWREb2N1bWVudHM7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICAvKipcclxuICAgICAqIEl0ZXJhdGVzIG92ZXIgYSBzZXQgb2YgZG9jIGNoYW5nZXMsIGFwcGxpZXMgdGhlIHF1ZXJ5IGxpbWl0LCBhbmQgY29tcHV0ZXNcclxuICAgICAqIHdoYXQgdGhlIG5ldyByZXN1bHRzIHNob3VsZCBiZSwgd2hhdCB0aGUgY2hhbmdlcyB3ZXJlLCBhbmQgd2hldGhlciB3ZSBtYXlcclxuICAgICAqIG5lZWQgdG8gZ28gYmFjayB0byB0aGUgbG9jYWwgY2FjaGUgZm9yIG1vcmUgcmVzdWx0cy4gRG9lcyBub3QgbWFrZSBhbnlcclxuICAgICAqIGNoYW5nZXMgdG8gdGhlIHZpZXcuXHJcbiAgICAgKiBAcGFyYW0gZG9jQ2hhbmdlcyBUaGUgZG9jIGNoYW5nZXMgdG8gYXBwbHkgdG8gdGhpcyB2aWV3LlxyXG4gICAgICogQHBhcmFtIHByZXZpb3VzQ2hhbmdlcyBJZiB0aGlzIGlzIGJlaW5nIGNhbGxlZCB3aXRoIGEgcmVmaWxsLCB0aGVuIHN0YXJ0XHJcbiAgICAgKiAgICAgICAgd2l0aCB0aGlzIHNldCBvZiBkb2NzIGFuZCBjaGFuZ2VzIGluc3RlYWQgb2YgdGhlIGN1cnJlbnQgdmlldy5cclxuICAgICAqIEByZXR1cm4gYSBuZXcgc2V0IG9mIGRvY3MsIGNoYW5nZXMsIGFuZCByZWZpbGwgZmxhZy5cclxuICAgICAqL1xyXG4gICAgVmlldy5wcm90b3R5cGUuY29tcHV0ZURvY0NoYW5nZXMgPSBmdW5jdGlvbiAoZG9jQ2hhbmdlcywgcHJldmlvdXNDaGFuZ2VzKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgY2hhbmdlU2V0ID0gcHJldmlvdXNDaGFuZ2VzXHJcbiAgICAgICAgICAgID8gcHJldmlvdXNDaGFuZ2VzLmNoYW5nZVNldFxyXG4gICAgICAgICAgICA6IG5ldyBEb2N1bWVudENoYW5nZVNldCgpO1xyXG4gICAgICAgIHZhciBvbGREb2N1bWVudFNldCA9IHByZXZpb3VzQ2hhbmdlc1xyXG4gICAgICAgICAgICA/IHByZXZpb3VzQ2hhbmdlcy5kb2N1bWVudFNldFxyXG4gICAgICAgICAgICA6IHRoaXMuZG9jdW1lbnRTZXQ7XHJcbiAgICAgICAgdmFyIG5ld011dGF0ZWRLZXlzID0gcHJldmlvdXNDaGFuZ2VzXHJcbiAgICAgICAgICAgID8gcHJldmlvdXNDaGFuZ2VzLm11dGF0ZWRLZXlzXHJcbiAgICAgICAgICAgIDogdGhpcy5tdXRhdGVkS2V5cztcclxuICAgICAgICB2YXIgbmV3RG9jdW1lbnRTZXQgPSBvbGREb2N1bWVudFNldDtcclxuICAgICAgICB2YXIgbmVlZHNSZWZpbGwgPSBmYWxzZTtcclxuICAgICAgICAvLyBUcmFjayB0aGUgbGFzdCBkb2MgaW4gYSAoZnVsbCkgbGltaXQuIFRoaXMgaXMgbmVjZXNzYXJ5LCBiZWNhdXNlIHNvbWVcclxuICAgICAgICAvLyB1cGRhdGUgKGEgZGVsZXRlLCBvciBhbiB1cGRhdGUgbW92aW5nIGEgZG9jIHBhc3QgdGhlIG9sZCBsaW1pdCkgbWlnaHRcclxuICAgICAgICAvLyBtZWFuIHRoZXJlIGlzIHNvbWUgb3RoZXIgZG9jdW1lbnQgaW4gdGhlIGxvY2FsIGNhY2hlIHRoYXQgZWl0aGVyIHNob3VsZFxyXG4gICAgICAgIC8vIGNvbWUgKDEpIGJldHdlZW4gdGhlIG9sZCBsYXN0IGxpbWl0IGRvYyBhbmQgdGhlIG5ldyBsYXN0IGRvY3VtZW50LCBpbiB0aGVcclxuICAgICAgICAvLyBjYXNlIG9mIHVwZGF0ZXMsIG9yICgyKSBhZnRlciB0aGUgbmV3IGxhc3QgZG9jdW1lbnQsIGluIHRoZSBjYXNlIG9mXHJcbiAgICAgICAgLy8gZGVsZXRlcy4gU28gd2Uga2VlcCB0aGlzIGRvYyBhdCB0aGUgb2xkIGxpbWl0IHRvIGNvbXBhcmUgdGhlIHVwZGF0ZXMgdG8uXHJcbiAgICAgICAgLy9cclxuICAgICAgICAvLyBOb3RlIHRoYXQgdGhpcyBzaG91bGQgbmV2ZXIgZ2V0IHVzZWQgaW4gYSByZWZpbGwgKHdoZW4gcHJldmlvdXNDaGFuZ2VzIGlzXHJcbiAgICAgICAgLy8gc2V0KSwgYmVjYXVzZSB0aGVyZSB3aWxsIG9ubHkgYmUgYWRkcyAtLSBubyBkZWxldGVzIG9yIHVwZGF0ZXMuXHJcbiAgICAgICAgdmFyIGxhc3REb2NJbkxpbWl0ID0gdGhpcy5xdWVyeS5oYXNMaW1pdFRvRmlyc3QoKSAmJiBvbGREb2N1bWVudFNldC5zaXplID09PSB0aGlzLnF1ZXJ5LmxpbWl0XHJcbiAgICAgICAgICAgID8gb2xkRG9jdW1lbnRTZXQubGFzdCgpXHJcbiAgICAgICAgICAgIDogbnVsbDtcclxuICAgICAgICB2YXIgZmlyc3REb2NJbkxpbWl0ID0gdGhpcy5xdWVyeS5oYXNMaW1pdFRvTGFzdCgpICYmIG9sZERvY3VtZW50U2V0LnNpemUgPT09IHRoaXMucXVlcnkubGltaXRcclxuICAgICAgICAgICAgPyBvbGREb2N1bWVudFNldC5maXJzdCgpXHJcbiAgICAgICAgICAgIDogbnVsbDtcclxuICAgICAgICBkb2NDaGFuZ2VzLmlub3JkZXJUcmF2ZXJzYWwoZnVuY3Rpb24gKGtleSwgbmV3TWF5YmVEb2MpIHtcclxuICAgICAgICAgICAgdmFyIG9sZERvYyA9IG9sZERvY3VtZW50U2V0LmdldChrZXkpO1xyXG4gICAgICAgICAgICB2YXIgbmV3RG9jID0gbmV3TWF5YmVEb2MgaW5zdGFuY2VvZiBEb2N1bWVudCA/IG5ld01heWJlRG9jIDogbnVsbDtcclxuICAgICAgICAgICAgaWYgKG5ld0RvYykge1xyXG4gICAgICAgICAgICAgICAgYXNzZXJ0KGtleS5pc0VxdWFsKG5ld0RvYy5rZXkpLCAnTWlzbWF0Y2hpbmcga2V5cyBmb3VuZCBpbiBkb2N1bWVudCBjaGFuZ2VzOiAnICtcclxuICAgICAgICAgICAgICAgICAgICBrZXkgK1xyXG4gICAgICAgICAgICAgICAgICAgICcgIT0gJyArXHJcbiAgICAgICAgICAgICAgICAgICAgbmV3RG9jLmtleSk7XHJcbiAgICAgICAgICAgICAgICBuZXdEb2MgPSBfdGhpcy5xdWVyeS5tYXRjaGVzKG5ld0RvYykgPyBuZXdEb2MgOiBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciBvbGREb2NIYWRQZW5kaW5nTXV0YXRpb25zID0gb2xkRG9jXHJcbiAgICAgICAgICAgICAgICA/IF90aGlzLm11dGF0ZWRLZXlzLmhhcyhvbGREb2Mua2V5KVxyXG4gICAgICAgICAgICAgICAgOiBmYWxzZTtcclxuICAgICAgICAgICAgdmFyIG5ld0RvY0hhc1BlbmRpbmdNdXRhdGlvbnMgPSBuZXdEb2NcclxuICAgICAgICAgICAgICAgID8gbmV3RG9jLmhhc0xvY2FsTXV0YXRpb25zIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gV2Ugb25seSBjb25zaWRlciBjb21taXR0ZWQgbXV0YXRpb25zIGZvciBkb2N1bWVudHMgdGhhdCB3ZXJlXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gbXV0YXRlZCBkdXJpbmcgdGhlIGxpZmV0aW1lIG9mIHRoZSB2aWV3LlxyXG4gICAgICAgICAgICAgICAgICAgIChfdGhpcy5tdXRhdGVkS2V5cy5oYXMobmV3RG9jLmtleSkgJiYgbmV3RG9jLmhhc0NvbW1pdHRlZE11dGF0aW9ucylcclxuICAgICAgICAgICAgICAgIDogZmFsc2U7XHJcbiAgICAgICAgICAgIHZhciBjaGFuZ2VBcHBsaWVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIC8vIENhbGN1bGF0ZSBjaGFuZ2VcclxuICAgICAgICAgICAgaWYgKG9sZERvYyAmJiBuZXdEb2MpIHtcclxuICAgICAgICAgICAgICAgIHZhciBkb2NzRXF1YWwgPSBvbGREb2MuZGF0YSgpLmlzRXF1YWwobmV3RG9jLmRhdGEoKSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWRvY3NFcXVhbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghX3RoaXMuc2hvdWxkV2FpdEZvclN5bmNlZERvY3VtZW50KG9sZERvYywgbmV3RG9jKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VTZXQudHJhY2soe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogQ2hhbmdlVHlwZS5Nb2RpZmllZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYzogbmV3RG9jXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VBcHBsaWVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChsYXN0RG9jSW5MaW1pdCAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMucXVlcnkuZG9jQ29tcGFyYXRvcihuZXdEb2MsIGxhc3REb2NJbkxpbWl0KSA+IDApIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZmlyc3REb2NJbkxpbWl0ICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMucXVlcnkuZG9jQ29tcGFyYXRvcihuZXdEb2MsIGZpcnN0RG9jSW5MaW1pdCkgPCAwKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhpcyBkb2MgbW92ZWQgZnJvbSBpbnNpZGUgdGhlIGxpbWl0IHRvIG91dHNpZGUgdGhlIGxpbWl0LlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhhdCBtZWFucyB0aGVyZSBtYXkgYmUgc29tZSBvdGhlciBkb2MgaW4gdGhlIGxvY2FsIGNhY2hlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGF0IHNob3VsZCBiZSBpbmNsdWRlZCBpbnN0ZWFkLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmVlZHNSZWZpbGwgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAob2xkRG9jSGFkUGVuZGluZ011dGF0aW9ucyAhPT0gbmV3RG9jSGFzUGVuZGluZ011dGF0aW9ucykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNoYW5nZVNldC50cmFjayh7IHR5cGU6IENoYW5nZVR5cGUuTWV0YWRhdGEsIGRvYzogbmV3RG9jIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGNoYW5nZUFwcGxpZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKCFvbGREb2MgJiYgbmV3RG9jKSB7XHJcbiAgICAgICAgICAgICAgICBjaGFuZ2VTZXQudHJhY2soeyB0eXBlOiBDaGFuZ2VUeXBlLkFkZGVkLCBkb2M6IG5ld0RvYyB9KTtcclxuICAgICAgICAgICAgICAgIGNoYW5nZUFwcGxpZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKG9sZERvYyAmJiAhbmV3RG9jKSB7XHJcbiAgICAgICAgICAgICAgICBjaGFuZ2VTZXQudHJhY2soeyB0eXBlOiBDaGFuZ2VUeXBlLlJlbW92ZWQsIGRvYzogb2xkRG9jIH0pO1xyXG4gICAgICAgICAgICAgICAgY2hhbmdlQXBwbGllZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBpZiAobGFzdERvY0luTGltaXQgfHwgZmlyc3REb2NJbkxpbWl0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gQSBkb2Mgd2FzIHJlbW92ZWQgZnJvbSBhIGZ1bGwgbGltaXQgcXVlcnkuIFdlJ2xsIG5lZWQgdG9cclxuICAgICAgICAgICAgICAgICAgICAvLyByZXF1ZXJ5IGZyb20gdGhlIGxvY2FsIGNhY2hlIHRvIHNlZSBpZiB3ZSBrbm93IGFib3V0IHNvbWUgb3RoZXJcclxuICAgICAgICAgICAgICAgICAgICAvLyBkb2MgdGhhdCBzaG91bGQgYmUgaW4gdGhlIHJlc3VsdHMuXHJcbiAgICAgICAgICAgICAgICAgICAgbmVlZHNSZWZpbGwgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChjaGFuZ2VBcHBsaWVkKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAobmV3RG9jKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3RG9jdW1lbnRTZXQgPSBuZXdEb2N1bWVudFNldC5hZGQobmV3RG9jKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobmV3RG9jSGFzUGVuZGluZ011dGF0aW9ucykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdNdXRhdGVkS2V5cyA9IG5ld011dGF0ZWRLZXlzLmFkZChrZXkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3TXV0YXRlZEtleXMgPSBuZXdNdXRhdGVkS2V5cy5kZWxldGUoa2V5KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBuZXdEb2N1bWVudFNldCA9IG5ld0RvY3VtZW50U2V0LmRlbGV0ZShrZXkpO1xyXG4gICAgICAgICAgICAgICAgICAgIG5ld011dGF0ZWRLZXlzID0gbmV3TXV0YXRlZEtleXMuZGVsZXRlKGtleSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyBEcm9wIGRvY3VtZW50cyBvdXQgdG8gbWVldCBsaW1pdC9saW1pdFRvTGFzdCByZXF1aXJlbWVudC5cclxuICAgICAgICBpZiAodGhpcy5xdWVyeS5oYXNMaW1pdFRvRmlyc3QoKSB8fCB0aGlzLnF1ZXJ5Lmhhc0xpbWl0VG9MYXN0KCkpIHtcclxuICAgICAgICAgICAgd2hpbGUgKG5ld0RvY3VtZW50U2V0LnNpemUgPiB0aGlzLnF1ZXJ5LmxpbWl0KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgb2xkRG9jID0gdGhpcy5xdWVyeS5oYXNMaW1pdFRvRmlyc3QoKVxyXG4gICAgICAgICAgICAgICAgICAgID8gbmV3RG9jdW1lbnRTZXQubGFzdCgpXHJcbiAgICAgICAgICAgICAgICAgICAgOiBuZXdEb2N1bWVudFNldC5maXJzdCgpO1xyXG4gICAgICAgICAgICAgICAgbmV3RG9jdW1lbnRTZXQgPSBuZXdEb2N1bWVudFNldC5kZWxldGUob2xkRG9jLmtleSk7XHJcbiAgICAgICAgICAgICAgICBuZXdNdXRhdGVkS2V5cyA9IG5ld011dGF0ZWRLZXlzLmRlbGV0ZShvbGREb2Mua2V5KTtcclxuICAgICAgICAgICAgICAgIGNoYW5nZVNldC50cmFjayh7IHR5cGU6IENoYW5nZVR5cGUuUmVtb3ZlZCwgZG9jOiBvbGREb2MgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgYXNzZXJ0KCFuZWVkc1JlZmlsbCB8fCAhcHJldmlvdXNDaGFuZ2VzLCAnVmlldyB3YXMgcmVmaWxsZWQgdXNpbmcgZG9jcyB0aGF0IHRoZW1zZWx2ZXMgbmVlZGVkIHJlZmlsbGluZy4nKTtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBkb2N1bWVudFNldDogbmV3RG9jdW1lbnRTZXQsXHJcbiAgICAgICAgICAgIGNoYW5nZVNldDogY2hhbmdlU2V0LFxyXG4gICAgICAgICAgICBuZWVkc1JlZmlsbDogbmVlZHNSZWZpbGwsXHJcbiAgICAgICAgICAgIG11dGF0ZWRLZXlzOiBuZXdNdXRhdGVkS2V5c1xyXG4gICAgICAgIH07XHJcbiAgICB9O1xyXG4gICAgVmlldy5wcm90b3R5cGUuc2hvdWxkV2FpdEZvclN5bmNlZERvY3VtZW50ID0gZnVuY3Rpb24gKG9sZERvYywgbmV3RG9jKSB7XHJcbiAgICAgICAgLy8gV2Ugc3VwcHJlc3MgdGhlIGluaXRpYWwgY2hhbmdlIGV2ZW50IGZvciBkb2N1bWVudHMgdGhhdCB3ZXJlIG1vZGlmaWVkIGFzXHJcbiAgICAgICAgLy8gcGFydCBvZiBhIHdyaXRlIGFja25vd2xlZGdtZW50IChlLmcuIHdoZW4gdGhlIHZhbHVlIG9mIGEgc2VydmVyIHRyYW5zZm9ybVxyXG4gICAgICAgIC8vIGlzIGFwcGxpZWQpIGFzIFdhdGNoIHdpbGwgc2VuZCB1cyB0aGUgc2FtZSBkb2N1bWVudCBhZ2Fpbi5cclxuICAgICAgICAvLyBCeSBzdXBwcmVzc2luZyB0aGUgZXZlbnQsIHdlIG9ubHkgcmFpc2UgdHdvIHVzZXIgdmlzaWJsZSBldmVudHMgKG9uZSB3aXRoXHJcbiAgICAgICAgLy8gYGhhc1BlbmRpbmdXcml0ZXNgIGFuZCB0aGUgZmluYWwgc3RhdGUgb2YgdGhlIGRvY3VtZW50KSBpbnN0ZWFkIG9mIHRocmVlXHJcbiAgICAgICAgLy8gKG9uZSB3aXRoIGBoYXNQZW5kaW5nV3JpdGVzYCwgdGhlIG1vZGlmaWVkIGRvY3VtZW50IHdpdGhcclxuICAgICAgICAvLyBgaGFzUGVuZGluZ1dyaXRlc2AgYW5kIHRoZSBmaW5hbCBzdGF0ZSBvZiB0aGUgZG9jdW1lbnQpLlxyXG4gICAgICAgIHJldHVybiAob2xkRG9jLmhhc0xvY2FsTXV0YXRpb25zICYmXHJcbiAgICAgICAgICAgIG5ld0RvYy5oYXNDb21taXR0ZWRNdXRhdGlvbnMgJiZcclxuICAgICAgICAgICAgIW5ld0RvYy5oYXNMb2NhbE11dGF0aW9ucyk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBVcGRhdGVzIHRoZSB2aWV3IHdpdGggdGhlIGdpdmVuIFZpZXdEb2N1bWVudENoYW5nZXMgYW5kIG9wdGlvbmFsbHkgdXBkYXRlc1xyXG4gICAgICogbGltYm8gZG9jcyBhbmQgc3luYyBzdGF0ZSBmcm9tIHRoZSBwcm92aWRlZCB0YXJnZXQgY2hhbmdlLlxyXG4gICAgICogQHBhcmFtIGRvY0NoYW5nZXMgVGhlIHNldCBvZiBjaGFuZ2VzIHRvIG1ha2UgdG8gdGhlIHZpZXcncyBkb2NzLlxyXG4gICAgICogQHBhcmFtIHVwZGF0ZUxpbWJvRG9jdW1lbnRzIFdoZXRoZXIgdG8gdXBkYXRlIGxpbWJvIGRvY3VtZW50cyBiYXNlZCBvbiB0aGlzXHJcbiAgICAgKiAgICAgICAgY2hhbmdlLlxyXG4gICAgICogQHBhcmFtIHRhcmdldENoYW5nZSBBIHRhcmdldCBjaGFuZ2UgdG8gYXBwbHkgZm9yIGNvbXB1dGluZyBsaW1ibyBkb2NzIGFuZFxyXG4gICAgICogICAgICAgIHN5bmMgc3RhdGUuXHJcbiAgICAgKiBAcmV0dXJuIEEgbmV3IFZpZXdDaGFuZ2Ugd2l0aCB0aGUgZ2l2ZW4gZG9jcywgY2hhbmdlcywgYW5kIHN5bmMgc3RhdGUuXHJcbiAgICAgKi9cclxuICAgIC8vIFBPUlRJTkcgTk9URTogVGhlIGlPUy9BbmRyb2lkIGNsaWVudHMgYWx3YXlzIGNvbXB1dGUgbGltYm8gZG9jdW1lbnQgY2hhbmdlcy5cclxuICAgIFZpZXcucHJvdG90eXBlLmFwcGx5Q2hhbmdlcyA9IGZ1bmN0aW9uIChkb2NDaGFuZ2VzLCB1cGRhdGVMaW1ib0RvY3VtZW50cywgdGFyZ2V0Q2hhbmdlKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBhc3NlcnQoIWRvY0NoYW5nZXMubmVlZHNSZWZpbGwsICdDYW5ub3QgYXBwbHkgY2hhbmdlcyB0aGF0IG5lZWQgYSByZWZpbGwnKTtcclxuICAgICAgICB2YXIgb2xkRG9jcyA9IHRoaXMuZG9jdW1lbnRTZXQ7XHJcbiAgICAgICAgdGhpcy5kb2N1bWVudFNldCA9IGRvY0NoYW5nZXMuZG9jdW1lbnRTZXQ7XHJcbiAgICAgICAgdGhpcy5tdXRhdGVkS2V5cyA9IGRvY0NoYW5nZXMubXV0YXRlZEtleXM7XHJcbiAgICAgICAgLy8gU29ydCBjaGFuZ2VzIGJhc2VkIG9uIHR5cGUgYW5kIHF1ZXJ5IGNvbXBhcmF0b3JcclxuICAgICAgICB2YXIgY2hhbmdlcyA9IGRvY0NoYW5nZXMuY2hhbmdlU2V0LmdldENoYW5nZXMoKTtcclxuICAgICAgICBjaGFuZ2VzLnNvcnQoZnVuY3Rpb24gKGMxLCBjMikge1xyXG4gICAgICAgICAgICByZXR1cm4gKGNvbXBhcmVDaGFuZ2VUeXBlKGMxLnR5cGUsIGMyLnR5cGUpIHx8XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5xdWVyeS5kb2NDb21wYXJhdG9yKGMxLmRvYywgYzIuZG9jKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5hcHBseVRhcmdldENoYW5nZSh0YXJnZXRDaGFuZ2UpO1xyXG4gICAgICAgIHZhciBsaW1ib0NoYW5nZXMgPSB1cGRhdGVMaW1ib0RvY3VtZW50c1xyXG4gICAgICAgICAgICA/IHRoaXMudXBkYXRlTGltYm9Eb2N1bWVudHMoKVxyXG4gICAgICAgICAgICA6IFtdO1xyXG4gICAgICAgIHZhciBzeW5jZWQgPSB0aGlzLmxpbWJvRG9jdW1lbnRzLnNpemUgPT09IDAgJiYgdGhpcy5jdXJyZW50O1xyXG4gICAgICAgIHZhciBuZXdTeW5jU3RhdGUgPSBzeW5jZWQgPyBTeW5jU3RhdGUuU3luY2VkIDogU3luY1N0YXRlLkxvY2FsO1xyXG4gICAgICAgIHZhciBzeW5jU3RhdGVDaGFuZ2VkID0gbmV3U3luY1N0YXRlICE9PSB0aGlzLnN5bmNTdGF0ZTtcclxuICAgICAgICB0aGlzLnN5bmNTdGF0ZSA9IG5ld1N5bmNTdGF0ZTtcclxuICAgICAgICBpZiAoY2hhbmdlcy5sZW5ndGggPT09IDAgJiYgIXN5bmNTdGF0ZUNoYW5nZWQpIHtcclxuICAgICAgICAgICAgLy8gbm8gY2hhbmdlc1xyXG4gICAgICAgICAgICByZXR1cm4geyBsaW1ib0NoYW5nZXM6IGxpbWJvQ2hhbmdlcyB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdmFyIHNuYXAgPSBuZXcgVmlld1NuYXBzaG90KHRoaXMucXVlcnksIGRvY0NoYW5nZXMuZG9jdW1lbnRTZXQsIG9sZERvY3MsIGNoYW5nZXMsIGRvY0NoYW5nZXMubXV0YXRlZEtleXMsIG5ld1N5bmNTdGF0ZSA9PT0gU3luY1N0YXRlLkxvY2FsLCBzeW5jU3RhdGVDaGFuZ2VkLCBcclxuICAgICAgICAgICAgLyogZXhjbHVkZXNNZXRhZGF0YUNoYW5nZXM9ICovIGZhbHNlKTtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHNuYXBzaG90OiBzbmFwLFxyXG4gICAgICAgICAgICAgICAgbGltYm9DaGFuZ2VzOiBsaW1ib0NoYW5nZXNcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBBcHBsaWVzIGFuIE9ubGluZVN0YXRlIGNoYW5nZSB0byB0aGUgdmlldywgcG90ZW50aWFsbHkgZ2VuZXJhdGluZyBhXHJcbiAgICAgKiBWaWV3Q2hhbmdlIGlmIHRoZSB2aWV3J3Mgc3luY1N0YXRlIGNoYW5nZXMgYXMgYSByZXN1bHQuXHJcbiAgICAgKi9cclxuICAgIFZpZXcucHJvdG90eXBlLmFwcGx5T25saW5lU3RhdGVDaGFuZ2UgPSBmdW5jdGlvbiAob25saW5lU3RhdGUpIHtcclxuICAgICAgICBpZiAodGhpcy5jdXJyZW50ICYmIG9ubGluZVN0YXRlID09PSBPbmxpbmVTdGF0ZS5PZmZsaW5lKSB7XHJcbiAgICAgICAgICAgIC8vIElmIHdlJ3JlIG9mZmxpbmUsIHNldCBgY3VycmVudGAgdG8gZmFsc2UgYW5kIHRoZW4gY2FsbCBhcHBseUNoYW5nZXMoKVxyXG4gICAgICAgICAgICAvLyB0byByZWZyZXNoIG91ciBzeW5jU3RhdGUgYW5kIGdlbmVyYXRlIGEgVmlld0NoYW5nZSBhcyBhcHByb3ByaWF0ZS4gV2VcclxuICAgICAgICAgICAgLy8gYXJlIGd1YXJhbnRlZWQgdG8gZ2V0IGEgbmV3IFRhcmdldENoYW5nZSB0aGF0IHNldHMgYGN1cnJlbnRgIGJhY2sgdG9cclxuICAgICAgICAgICAgLy8gdHJ1ZSBvbmNlIHRoZSBjbGllbnQgaXMgYmFjayBvbmxpbmUuXHJcbiAgICAgICAgICAgIHRoaXMuY3VycmVudCA9IGZhbHNlO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5hcHBseUNoYW5nZXMoe1xyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnRTZXQ6IHRoaXMuZG9jdW1lbnRTZXQsXHJcbiAgICAgICAgICAgICAgICBjaGFuZ2VTZXQ6IG5ldyBEb2N1bWVudENoYW5nZVNldCgpLFxyXG4gICAgICAgICAgICAgICAgbXV0YXRlZEtleXM6IHRoaXMubXV0YXRlZEtleXMsXHJcbiAgICAgICAgICAgICAgICBuZWVkc1JlZmlsbDogZmFsc2VcclxuICAgICAgICAgICAgfSwgXHJcbiAgICAgICAgICAgIC8qIHVwZGF0ZUxpbWJvRG9jdW1lbnRzPSAqLyBmYWxzZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBObyBlZmZlY3QsIGp1c3QgcmV0dXJuIGEgbm8tb3AgVmlld0NoYW5nZS5cclxuICAgICAgICAgICAgcmV0dXJuIHsgbGltYm9DaGFuZ2VzOiBbXSB9O1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgd2hldGhlciB0aGUgZG9jIGZvciB0aGUgZ2l2ZW4ga2V5IHNob3VsZCBiZSBpbiBsaW1iby5cclxuICAgICAqL1xyXG4gICAgVmlldy5wcm90b3R5cGUuc2hvdWxkQmVJbkxpbWJvID0gZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgIC8vIElmIHRoZSByZW1vdGUgZW5kIHNheXMgaXQncyBwYXJ0IG9mIHRoaXMgcXVlcnksIGl0J3Mgbm90IGluIGxpbWJvLlxyXG4gICAgICAgIGlmICh0aGlzLl9zeW5jZWREb2N1bWVudHMuaGFzKGtleSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBUaGUgbG9jYWwgc3RvcmUgZG9lc24ndCB0aGluayBpdCdzIGEgcmVzdWx0LCBzbyBpdCBzaG91bGRuJ3QgYmUgaW4gbGltYm8uXHJcbiAgICAgICAgaWYgKCF0aGlzLmRvY3VtZW50U2V0LmhhcyhrZXkpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gSWYgdGhlcmUgYXJlIGxvY2FsIGNoYW5nZXMgdG8gdGhlIGRvYywgdGhleSBtaWdodCBleHBsYWluIHdoeSB0aGUgc2VydmVyXHJcbiAgICAgICAgLy8gZG9lc24ndCBrbm93IHRoYXQgaXQncyBwYXJ0IG9mIHRoZSBxdWVyeS4gU28gZG9uJ3QgcHV0IGl0IGluIGxpbWJvLlxyXG4gICAgICAgIC8vIFRPRE8oa2xpbXQpOiBJZGVhbGx5LCB3ZSB3b3VsZCBvbmx5IGNvbnNpZGVyIGNoYW5nZXMgdGhhdCBtaWdodCBhY3R1YWxseVxyXG4gICAgICAgIC8vIGFmZmVjdCB0aGlzIHNwZWNpZmljIHF1ZXJ5LlxyXG4gICAgICAgIGlmICh0aGlzLmRvY3VtZW50U2V0LmdldChrZXkpLmhhc0xvY2FsTXV0YXRpb25zKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gRXZlcnl0aGluZyBlbHNlIGlzIGluIGxpbWJvLlxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogVXBkYXRlcyBzeW5jZWREb2N1bWVudHMsIGN1cnJlbnQsIGFuZCBsaW1ibyBkb2NzIGJhc2VkIG9uIHRoZSBnaXZlbiBjaGFuZ2UuXHJcbiAgICAgKiBSZXR1cm5zIHRoZSBsaXN0IG9mIGNoYW5nZXMgdG8gd2hpY2ggZG9jcyBhcmUgaW4gbGltYm8uXHJcbiAgICAgKi9cclxuICAgIFZpZXcucHJvdG90eXBlLmFwcGx5VGFyZ2V0Q2hhbmdlID0gZnVuY3Rpb24gKHRhcmdldENoYW5nZSkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgaWYgKHRhcmdldENoYW5nZSkge1xyXG4gICAgICAgICAgICB0YXJnZXRDaGFuZ2UuYWRkZWREb2N1bWVudHMuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IHJldHVybiAoX3RoaXMuX3N5bmNlZERvY3VtZW50cyA9IF90aGlzLl9zeW5jZWREb2N1bWVudHMuYWRkKGtleSkpOyB9KTtcclxuICAgICAgICAgICAgdGFyZ2V0Q2hhbmdlLm1vZGlmaWVkRG9jdW1lbnRzLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGFzc2VydChfdGhpcy5fc3luY2VkRG9jdW1lbnRzLmhhcyhrZXkpLCBcIk1vZGlmaWVkIGRvY3VtZW50IFwiICsga2V5ICsgXCIgbm90IGZvdW5kIGluIHZpZXcuXCIpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdGFyZ2V0Q2hhbmdlLnJlbW92ZWREb2N1bWVudHMuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IHJldHVybiAoX3RoaXMuX3N5bmNlZERvY3VtZW50cyA9IF90aGlzLl9zeW5jZWREb2N1bWVudHMuZGVsZXRlKGtleSkpOyB9KTtcclxuICAgICAgICAgICAgdGhpcy5jdXJyZW50ID0gdGFyZ2V0Q2hhbmdlLmN1cnJlbnQ7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFZpZXcucHJvdG90eXBlLnVwZGF0ZUxpbWJvRG9jdW1lbnRzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgLy8gV2UgY2FuIG9ubHkgZGV0ZXJtaW5lIGxpbWJvIGRvY3VtZW50cyB3aGVuIHdlJ3JlIGluLXN5bmMgd2l0aCB0aGUgc2VydmVyLlxyXG4gICAgICAgIGlmICghdGhpcy5jdXJyZW50KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBbXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gVE9ETyhrbGltdCk6IERvIHRoaXMgaW5jcmVtZW50YWxseSBzbyB0aGF0IGl0J3Mgbm90IHF1YWRyYXRpYyB3aGVuXHJcbiAgICAgICAgLy8gdXBkYXRpbmcgbWFueSBkb2N1bWVudHMuXHJcbiAgICAgICAgdmFyIG9sZExpbWJvRG9jdW1lbnRzID0gdGhpcy5saW1ib0RvY3VtZW50cztcclxuICAgICAgICB0aGlzLmxpbWJvRG9jdW1lbnRzID0gZG9jdW1lbnRLZXlTZXQoKTtcclxuICAgICAgICB0aGlzLmRvY3VtZW50U2V0LmZvckVhY2goZnVuY3Rpb24gKGRvYykge1xyXG4gICAgICAgICAgICBpZiAoX3RoaXMuc2hvdWxkQmVJbkxpbWJvKGRvYy5rZXkpKSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5saW1ib0RvY3VtZW50cyA9IF90aGlzLmxpbWJvRG9jdW1lbnRzLmFkZChkb2Mua2V5KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIERpZmYgdGhlIG5ldyBsaW1ibyBkb2NzIHdpdGggdGhlIG9sZCBsaW1ibyBkb2NzLlxyXG4gICAgICAgIHZhciBjaGFuZ2VzID0gW107XHJcbiAgICAgICAgb2xkTGltYm9Eb2N1bWVudHMuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgICAgICAgIGlmICghX3RoaXMubGltYm9Eb2N1bWVudHMuaGFzKGtleSkpIHtcclxuICAgICAgICAgICAgICAgIGNoYW5nZXMucHVzaChuZXcgUmVtb3ZlZExpbWJvRG9jdW1lbnQoa2V5KSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmxpbWJvRG9jdW1lbnRzLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgICAgICBpZiAoIW9sZExpbWJvRG9jdW1lbnRzLmhhcyhrZXkpKSB7XHJcbiAgICAgICAgICAgICAgICBjaGFuZ2VzLnB1c2gobmV3IEFkZGVkTGltYm9Eb2N1bWVudChrZXkpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBjaGFuZ2VzO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogVXBkYXRlIHRoZSBpbi1tZW1vcnkgc3RhdGUgb2YgdGhlIGN1cnJlbnQgdmlldyB3aXRoIHRoZSBzdGF0ZSByZWFkIGZyb21cclxuICAgICAqIHBlcnNpc3RlbmNlLlxyXG4gICAgICpcclxuICAgICAqIFdlIHVwZGF0ZSB0aGUgcXVlcnkgdmlldyB3aGVuZXZlciBhIGNsaWVudCdzIHByaW1hcnkgc3RhdHVzIGNoYW5nZXM6XHJcbiAgICAgKiAtIFdoZW4gYSBjbGllbnQgdHJhbnNpdGlvbnMgZnJvbSBwcmltYXJ5IHRvIHNlY29uZGFyeSwgaXQgY2FuIG1pc3NcclxuICAgICAqICAgTG9jYWxTdG9yYWdlIHVwZGF0ZXMgYW5kIGl0cyBxdWVyeSB2aWV3cyBtYXkgdGVtcG9yYXJpbHkgbm90IGJlXHJcbiAgICAgKiAgIHN5bmNocm9uaXplZCB3aXRoIHRoZSBzdGF0ZSBvbiBkaXNrLlxyXG4gICAgICogLSBGb3Igc2Vjb25kYXJ5IHRvIHByaW1hcnkgdHJhbnNpdGlvbnMsIHRoZSBjbGllbnQgbmVlZHMgdG8gdXBkYXRlIHRoZSBsaXN0XHJcbiAgICAgKiAgIG9mIGBzeW5jZWREb2N1bWVudHNgIHNpbmNlIHNlY29uZGFyeSBjbGllbnRzIHVwZGF0ZSB0aGVpciBxdWVyeSB2aWV3c1xyXG4gICAgICogICBiYXNlZCBwdXJlbHkgb24gc3ludGhlc2l6ZWQgUmVtb3RlRXZlbnRzLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBxdWVyeVJlc3VsdC5kb2N1bWVudHMgLSBUaGUgZG9jdW1lbnRzIHRoYXQgbWF0Y2ggdGhlIHF1ZXJ5IGFjY29yZGluZ1xyXG4gICAgICogdG8gdGhlIExvY2FsU3RvcmUuXHJcbiAgICAgKiBAcGFyYW0gcXVlcnlSZXN1bHQucmVtb3RlS2V5cyAtIFRoZSBrZXlzIG9mIHRoZSBkb2N1bWVudHMgdGhhdCBtYXRjaCB0aGVcclxuICAgICAqIHF1ZXJ5IGFjY29yZGluZyB0byB0aGUgYmFja2VuZC5cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJuIFRoZSBWaWV3Q2hhbmdlIHRoYXQgcmVzdWx0ZWQgZnJvbSB0aGlzIHN5bmNocm9uaXphdGlvbi5cclxuICAgICAqL1xyXG4gICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS10YWIgb25seS5cclxuICAgIFZpZXcucHJvdG90eXBlLnN5bmNocm9uaXplV2l0aFBlcnNpc3RlZFN0YXRlID0gZnVuY3Rpb24gKHF1ZXJ5UmVzdWx0KSB7XHJcbiAgICAgICAgdGhpcy5fc3luY2VkRG9jdW1lbnRzID0gcXVlcnlSZXN1bHQucmVtb3RlS2V5cztcclxuICAgICAgICB0aGlzLmxpbWJvRG9jdW1lbnRzID0gZG9jdW1lbnRLZXlTZXQoKTtcclxuICAgICAgICB2YXIgZG9jQ2hhbmdlcyA9IHRoaXMuY29tcHV0ZURvY0NoYW5nZXMocXVlcnlSZXN1bHQuZG9jdW1lbnRzKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5hcHBseUNoYW5nZXMoZG9jQ2hhbmdlcywgLyp1cGRhdGVMaW1ib0RvY3VtZW50cz0qLyB0cnVlKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgYSB2aWV3IHNuYXBzaG90IGFzIGlmIHRoaXMgcXVlcnkgd2FzIGp1c3QgbGlzdGVuZWQgdG8uIENvbnRhaW5zXHJcbiAgICAgKiBhIGRvY3VtZW50IGFkZCBmb3IgZXZlcnkgZXhpc3RpbmcgZG9jdW1lbnQgYW5kIHRoZSBgZnJvbUNhY2hlYCBhbmRcclxuICAgICAqIGBoYXNQZW5kaW5nV3JpdGVzYCBzdGF0dXMgb2YgdGhlIGFscmVhZHkgZXN0YWJsaXNoZWQgdmlldy5cclxuICAgICAqL1xyXG4gICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS10YWIgb25seS5cclxuICAgIFZpZXcucHJvdG90eXBlLmNvbXB1dGVJbml0aWFsU25hcHNob3QgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIFZpZXdTbmFwc2hvdC5mcm9tSW5pdGlhbERvY3VtZW50cyh0aGlzLnF1ZXJ5LCB0aGlzLmRvY3VtZW50U2V0LCB0aGlzLm11dGF0ZWRLZXlzLCB0aGlzLnN5bmNTdGF0ZSA9PT0gU3luY1N0YXRlLkxvY2FsKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gVmlldztcclxufSgpKTtcclxuZnVuY3Rpb24gY29tcGFyZUNoYW5nZVR5cGUoYzEsIGMyKSB7XHJcbiAgICB2YXIgb3JkZXIgPSBmdW5jdGlvbiAoY2hhbmdlKSB7XHJcbiAgICAgICAgc3dpdGNoIChjaGFuZ2UpIHtcclxuICAgICAgICAgICAgY2FzZSBDaGFuZ2VUeXBlLkFkZGVkOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIDE7XHJcbiAgICAgICAgICAgIGNhc2UgQ2hhbmdlVHlwZS5Nb2RpZmllZDpcclxuICAgICAgICAgICAgICAgIHJldHVybiAyO1xyXG4gICAgICAgICAgICBjYXNlIENoYW5nZVR5cGUuTWV0YWRhdGE6XHJcbiAgICAgICAgICAgICAgICAvLyBBIG1ldGFkYXRhIGNoYW5nZSBpcyBjb252ZXJ0ZWQgdG8gYSBtb2RpZmllZCBjaGFuZ2UgYXQgdGhlIHB1YmxpY1xyXG4gICAgICAgICAgICAgICAgLy8gYXBpIGxheWVyLiAgU2luY2Ugd2Ugc29ydCBieSBkb2N1bWVudCBrZXkgYW5kIHRoZW4gY2hhbmdlIHR5cGUsXHJcbiAgICAgICAgICAgICAgICAvLyBtZXRhZGF0YSBhbmQgbW9kaWZpZWQgY2hhbmdlcyBtdXN0IGJlIHNvcnRlZCBlcXVpdmFsZW50bHkuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gMjtcclxuICAgICAgICAgICAgY2FzZSBDaGFuZ2VUeXBlLlJlbW92ZWQ6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gMDtcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWlsKCdVbmtub3duIENoYW5nZVR5cGU6ICcgKyBjaGFuZ2UpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICByZXR1cm4gb3JkZXIoYzEpIC0gb3JkZXIoYzIpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG52YXIgUkVUUllfQ09VTlQgPSA1O1xyXG4vKipcclxuICogVHJhbnNhY3Rpb25SdW5uZXIgZW5jYXBzdWxhdGVzIHRoZSBsb2dpYyBuZWVkZWQgdG8gcnVuIGFuZCByZXRyeSB0cmFuc2FjdGlvbnNcclxuICogd2l0aCBiYWNrb2ZmLlxyXG4gKi9cclxudmFyIFRyYW5zYWN0aW9uUnVubmVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gVHJhbnNhY3Rpb25SdW5uZXIoYXN5bmNRdWV1ZSwgcmVtb3RlU3RvcmUsIHVwZGF0ZUZ1bmN0aW9uLCBkZWZlcnJlZCkge1xyXG4gICAgICAgIHRoaXMuYXN5bmNRdWV1ZSA9IGFzeW5jUXVldWU7XHJcbiAgICAgICAgdGhpcy5yZW1vdGVTdG9yZSA9IHJlbW90ZVN0b3JlO1xyXG4gICAgICAgIHRoaXMudXBkYXRlRnVuY3Rpb24gPSB1cGRhdGVGdW5jdGlvbjtcclxuICAgICAgICB0aGlzLmRlZmVycmVkID0gZGVmZXJyZWQ7XHJcbiAgICAgICAgdGhpcy5yZXRyaWVzID0gUkVUUllfQ09VTlQ7XHJcbiAgICAgICAgdGhpcy5iYWNrb2ZmID0gbmV3IEV4cG9uZW50aWFsQmFja29mZih0aGlzLmFzeW5jUXVldWUsIFRpbWVySWQuUmV0cnlUcmFuc2FjdGlvbik7XHJcbiAgICB9XHJcbiAgICAvKiogUnVucyB0aGUgdHJhbnNhY3Rpb24gYW5kIHNldHMgdGhlIHJlc3VsdCBvbiBkZWZlcnJlZC4gKi9cclxuICAgIFRyYW5zYWN0aW9uUnVubmVyLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5ydW5XaXRoQmFja09mZigpO1xyXG4gICAgfTtcclxuICAgIFRyYW5zYWN0aW9uUnVubmVyLnByb3RvdHlwZS5ydW5XaXRoQmFja09mZiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMuYmFja29mZi5iYWNrb2ZmQW5kUnVuKGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRzbGliLl9fYXdhaXRlcihfdGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHRyYW5zYWN0aW9uLCB1c2VyUHJvbWlzZTtcclxuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgdHJhbnNhY3Rpb24gPSB0aGlzLnJlbW90ZVN0b3JlLmNyZWF0ZVRyYW5zYWN0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICB1c2VyUHJvbWlzZSA9IHRoaXMudHJ5UnVuVXBkYXRlRnVuY3Rpb24odHJhbnNhY3Rpb24pO1xyXG4gICAgICAgICAgICAgICAgaWYgKHVzZXJQcm9taXNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdXNlclByb21pc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRyYW5zYWN0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNvbW1pdCgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmRlZmVycmVkLnJlc29sdmUocmVzdWx0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uIChjb21taXRFcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmhhbmRsZVRyYW5zYWN0aW9uRXJyb3IoY29tbWl0RXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbiAodXNlclByb21pc2VFcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5oYW5kbGVUcmFuc2FjdGlvbkVycm9yKHVzZXJQcm9taXNlRXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTsgfSk7XHJcbiAgICB9O1xyXG4gICAgVHJhbnNhY3Rpb25SdW5uZXIucHJvdG90eXBlLnRyeVJ1blVwZGF0ZUZ1bmN0aW9uID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgdmFyIHVzZXJQcm9taXNlID0gdGhpcy51cGRhdGVGdW5jdGlvbih0cmFuc2FjdGlvbik7XHJcbiAgICAgICAgICAgIGlmIChpc051bGxPclVuZGVmaW5lZCh1c2VyUHJvbWlzZSkgfHxcclxuICAgICAgICAgICAgICAgICF1c2VyUHJvbWlzZS5jYXRjaCB8fFxyXG4gICAgICAgICAgICAgICAgIXVzZXJQcm9taXNlLnRoZW4pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGVmZXJyZWQucmVqZWN0KEVycm9yKCdUcmFuc2FjdGlvbiBjYWxsYmFjayBtdXN0IHJldHVybiBhIFByb21pc2UnKSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gdXNlclByb21pc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAvLyBEbyBub3QgcmV0cnkgZXJyb3JzIHRocm93biBieSB1c2VyIHByb3ZpZGVkIHVwZGF0ZUZ1bmN0aW9uLlxyXG4gICAgICAgICAgICB0aGlzLmRlZmVycmVkLnJlamVjdChlcnJvcik7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBUcmFuc2FjdGlvblJ1bm5lci5wcm90b3R5cGUuaGFuZGxlVHJhbnNhY3Rpb25FcnJvciA9IGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgaWYgKHRoaXMucmV0cmllcyA+IDAgJiYgdGhpcy5pc1JldHJ5YWJsZVRyYW5zYWN0aW9uRXJyb3IoZXJyb3IpKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmV0cmllcyAtPSAxO1xyXG4gICAgICAgICAgICB0aGlzLmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5ydW5XaXRoQmFja09mZigpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGVmZXJyZWQucmVqZWN0KGVycm9yKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgVHJhbnNhY3Rpb25SdW5uZXIucHJvdG90eXBlLmlzUmV0cnlhYmxlVHJhbnNhY3Rpb25FcnJvciA9IGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgIGlmIChlcnJvci5uYW1lID09PSAnRmlyZWJhc2VFcnJvcicpIHtcclxuICAgICAgICAgICAgLy8gSW4gdHJhbnNhY3Rpb25zLCB0aGUgYmFja2VuZCB3aWxsIGZhaWwgb3V0ZGF0ZWQgcmVhZHMgd2l0aCBGQUlMRURfUFJFQ09ORElUSU9OIGFuZFxyXG4gICAgICAgICAgICAvLyBub24tbWF0Y2hpbmcgZG9jdW1lbnQgdmVyc2lvbnMgd2l0aCBBQk9SVEVELiBUaGVzZSBlcnJvcnMgc2hvdWxkIGJlIHJldHJpZWQuXHJcbiAgICAgICAgICAgIHZhciBjb2RlID0gZXJyb3IuY29kZTtcclxuICAgICAgICAgICAgcmV0dXJuIChjb2RlID09PSAnYWJvcnRlZCcgfHxcclxuICAgICAgICAgICAgICAgIGNvZGUgPT09ICdmYWlsZWQtcHJlY29uZGl0aW9uJyB8fFxyXG4gICAgICAgICAgICAgICAgIWlzUGVybWFuZW50RXJyb3IoY29kZSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFRyYW5zYWN0aW9uUnVubmVyO1xyXG59KCkpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxudmFyIExPR19UQUckOSA9ICdTeW5jRW5naW5lJztcclxuLyoqXHJcbiAqIFF1ZXJ5VmlldyBjb250YWlucyBhbGwgb2YgdGhlIGRhdGEgdGhhdCBTeW5jRW5naW5lIG5lZWRzIHRvIGtlZXAgdHJhY2sgb2YgZm9yXHJcbiAqIGEgcGFydGljdWxhciBxdWVyeS5cclxuICovXHJcbnZhciBRdWVyeVZpZXcgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBRdWVyeVZpZXcoXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBxdWVyeSBpdHNlbGYuXHJcbiAgICAgKi9cclxuICAgIHF1ZXJ5LCBcclxuICAgIC8qKlxyXG4gICAgICogVGhlIHRhcmdldCBudW1iZXIgY3JlYXRlZCBieSB0aGUgY2xpZW50IHRoYXQgaXMgdXNlZCBpbiB0aGUgd2F0Y2hcclxuICAgICAqIHN0cmVhbSB0byBpZGVudGlmeSB0aGlzIHF1ZXJ5LlxyXG4gICAgICovXHJcbiAgICB0YXJnZXRJZCwgXHJcbiAgICAvKipcclxuICAgICAqIFRoZSB2aWV3IGlzIHJlc3BvbnNpYmxlIGZvciBjb21wdXRpbmcgdGhlIGZpbmFsIG1lcmdlZCB0cnV0aCBvZiB3aGF0XHJcbiAgICAgKiBkb2NzIGFyZSBpbiB0aGUgcXVlcnkuIEl0IGdldHMgbm90aWZpZWQgb2YgbG9jYWwgYW5kIHJlbW90ZSBjaGFuZ2VzLFxyXG4gICAgICogYW5kIGFwcGxpZXMgdGhlIHF1ZXJ5IGZpbHRlcnMgYW5kIGxpbWl0cyB0byBkZXRlcm1pbmUgdGhlIG1vc3QgY29ycmVjdFxyXG4gICAgICogcG9zc2libGUgcmVzdWx0cy5cclxuICAgICAqL1xyXG4gICAgdmlldykge1xyXG4gICAgICAgIHRoaXMucXVlcnkgPSBxdWVyeTtcclxuICAgICAgICB0aGlzLnRhcmdldElkID0gdGFyZ2V0SWQ7XHJcbiAgICAgICAgdGhpcy52aWV3ID0gdmlldztcclxuICAgIH1cclxuICAgIHJldHVybiBRdWVyeVZpZXc7XHJcbn0oKSk7XHJcbi8qKiBUcmFja3MgYSBsaW1ibyByZXNvbHV0aW9uLiAqL1xyXG52YXIgTGltYm9SZXNvbHV0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gTGltYm9SZXNvbHV0aW9uKGtleSkge1xyXG4gICAgICAgIHRoaXMua2V5ID0ga2V5O1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFNldCB0byB0cnVlIG9uY2Ugd2UndmUgcmVjZWl2ZWQgYSBkb2N1bWVudC4gVGhpcyBpcyB1c2VkIGluXHJcbiAgICAgICAgICogZ2V0UmVtb3RlS2V5c0ZvclRhcmdldCgpIGFuZCB1bHRpbWF0ZWx5IHVzZWQgYnkgV2F0Y2hDaGFuZ2VBZ2dyZWdhdG9yIHRvXHJcbiAgICAgICAgICogZGVjaWRlIHdoZXRoZXIgaXQgbmVlZHMgdG8gbWFudWZhY3R1cmUgYSBkZWxldGUgZXZlbnQgZm9yIHRoZSB0YXJnZXQgb25jZVxyXG4gICAgICAgICAqIHRoZSB0YXJnZXQgaXMgQ1VSUkVOVC5cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLnJlY2VpdmVkRG9jdW1lbnQgPSBmYWxzZTtcclxuICAgIH1cclxuICAgIHJldHVybiBMaW1ib1Jlc29sdXRpb247XHJcbn0oKSk7XHJcbi8qKlxyXG4gKiBTeW5jRW5naW5lIGlzIHRoZSBjZW50cmFsIGNvbnRyb2xsZXIgaW4gdGhlIGNsaWVudCBTREsgYXJjaGl0ZWN0dXJlLiBJdCBpc1xyXG4gKiB0aGUgZ2x1ZSBjb2RlIGJldHdlZW4gdGhlIEV2ZW50TWFuYWdlciwgTG9jYWxTdG9yZSwgYW5kIFJlbW90ZVN0b3JlLiBTb21lIG9mXHJcbiAqIFN5bmNFbmdpbmUncyByZXNwb25zaWJpbGl0aWVzIGluY2x1ZGU6XHJcbiAqIDEuIENvb3JkaW5hdGluZyBjbGllbnQgcmVxdWVzdHMgYW5kIHJlbW90ZSBldmVudHMgYmV0d2VlbiB0aGUgRXZlbnRNYW5hZ2VyXHJcbiAqICAgIGFuZCB0aGUgbG9jYWwgYW5kIHJlbW90ZSBkYXRhIHN0b3Jlcy5cclxuICogMi4gTWFuYWdpbmcgYSBWaWV3IG9iamVjdCBmb3IgZWFjaCBxdWVyeSwgcHJvdmlkaW5nIHRoZSB1bmlmaWVkIHZpZXcgYmV0d2VlblxyXG4gKiAgICB0aGUgbG9jYWwgYW5kIHJlbW90ZSBkYXRhIHN0b3Jlcy5cclxuICogMy4gTm90aWZ5aW5nIHRoZSBSZW1vdGVTdG9yZSB3aGVuIHRoZSBMb2NhbFN0b3JlIGhhcyBuZXcgbXV0YXRpb25zIGluIGl0c1xyXG4gKiAgICBxdWV1ZSB0aGF0IG5lZWQgc2VuZGluZyB0byB0aGUgYmFja2VuZC5cclxuICpcclxuICogVGhlIFN5bmNFbmdpbmXigJlzIG1ldGhvZHMgc2hvdWxkIG9ubHkgZXZlciBiZSBjYWxsZWQgYnkgbWV0aG9kcyBydW5uaW5nIGluIHRoZVxyXG4gKiBnbG9iYWwgYXN5bmMgcXVldWUuXHJcbiAqL1xyXG52YXIgU3luY0VuZ2luZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFN5bmNFbmdpbmUobG9jYWxTdG9yZSwgcmVtb3RlU3RvcmUsIFxyXG4gICAgLy8gUE9SVElORyBOT1RFOiBNYW5hZ2VzIHN0YXRlIHN5bmNocm9uaXphdGlvbiBpbiBtdWx0aS10YWIgZW52aXJvbm1lbnRzLlxyXG4gICAgc2hhcmVkQ2xpZW50U3RhdGUsIGN1cnJlbnRVc2VyKSB7XHJcbiAgICAgICAgdGhpcy5sb2NhbFN0b3JlID0gbG9jYWxTdG9yZTtcclxuICAgICAgICB0aGlzLnJlbW90ZVN0b3JlID0gcmVtb3RlU3RvcmU7XHJcbiAgICAgICAgdGhpcy5zaGFyZWRDbGllbnRTdGF0ZSA9IHNoYXJlZENsaWVudFN0YXRlO1xyXG4gICAgICAgIHRoaXMuY3VycmVudFVzZXIgPSBjdXJyZW50VXNlcjtcclxuICAgICAgICB0aGlzLnN5bmNFbmdpbmVMaXN0ZW5lciA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5xdWVyeVZpZXdzQnlRdWVyeSA9IG5ldyBPYmplY3RNYXAoZnVuY3Rpb24gKHEpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHEuY2Fub25pY2FsSWQoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLnF1ZXJpZXNCeVRhcmdldCA9IHt9O1xyXG4gICAgICAgIHRoaXMubGltYm9UYXJnZXRzQnlLZXkgPSBuZXcgU29ydGVkTWFwKERvY3VtZW50S2V5LmNvbXBhcmF0b3IpO1xyXG4gICAgICAgIHRoaXMubGltYm9SZXNvbHV0aW9uc0J5VGFyZ2V0ID0ge307XHJcbiAgICAgICAgdGhpcy5saW1ib0RvY3VtZW50UmVmcyA9IG5ldyBSZWZlcmVuY2VTZXQoKTtcclxuICAgICAgICAvKiogU3RvcmVzIHVzZXIgY29tcGxldGlvbiBoYW5kbGVycywgaW5kZXhlZCBieSBVc2VyIGFuZCBCYXRjaElkLiAqL1xyXG4gICAgICAgIHRoaXMubXV0YXRpb25Vc2VyQ2FsbGJhY2tzID0ge307XHJcbiAgICAgICAgLyoqIFN0b3JlcyB1c2VyIGNhbGxiYWNrcyB3YWl0aW5nIGZvciBhbGwgcGVuZGluZyB3cml0ZXMgdG8gYmUgYWNrbm93bGVkZ2VkLiAqL1xyXG4gICAgICAgIHRoaXMucGVuZGluZ1dyaXRlc0NhbGxiYWNrcyA9IG5ldyBNYXAoKTtcclxuICAgICAgICB0aGlzLmxpbWJvVGFyZ2V0SWRHZW5lcmF0b3IgPSBUYXJnZXRJZEdlbmVyYXRvci5mb3JTeW5jRW5naW5lKCk7XHJcbiAgICAgICAgLy8gVGhlIHByaW1hcnkgc3RhdGUgaXMgc2V0IHRvIGB0cnVlYCBvciBgZmFsc2VgIGltbWVkaWF0ZWx5IGFmdGVyIEZpcmVzdG9yZVxyXG4gICAgICAgIC8vIHN0YXJ0dXAuIEluIHRoZSBpbnRlcmltLCBhIGNsaWVudCBzaG91bGQgb25seSBiZSBjb25zaWRlcmVkIHByaW1hcnkgaWZcclxuICAgICAgICAvLyBgaXNQcmltYXJ5YCBpcyB0cnVlLlxyXG4gICAgICAgIHRoaXMuaXNQcmltYXJ5ID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIHRoaXMub25saW5lU3RhdGUgPSBPbmxpbmVTdGF0ZS5Vbmtub3duO1xyXG4gICAgfVxyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFN5bmNFbmdpbmUucHJvdG90eXBlLCBcImlzUHJpbWFyeUNsaWVudFwiLCB7XHJcbiAgICAgICAgLy8gT25seSB1c2VkIGZvciB0ZXN0aW5nLlxyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pc1ByaW1hcnkgPT09IHRydWU7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICAvKiogU3Vic2NyaWJlcyB0byBTeW5jRW5naW5lIG5vdGlmaWNhdGlvbnMuIEhhcyB0byBiZSBjYWxsZWQgZXhhY3RseSBvbmNlLiAqL1xyXG4gICAgU3luY0VuZ2luZS5wcm90b3R5cGUuc3Vic2NyaWJlID0gZnVuY3Rpb24gKHN5bmNFbmdpbmVMaXN0ZW5lcikge1xyXG4gICAgICAgIGFzc2VydChzeW5jRW5naW5lTGlzdGVuZXIgIT09IG51bGwsICdTeW5jRW5naW5lIGxpc3RlbmVyIGNhbm5vdCBiZSBudWxsJyk7XHJcbiAgICAgICAgYXNzZXJ0KHRoaXMuc3luY0VuZ2luZUxpc3RlbmVyID09PSBudWxsLCAnU3luY0VuZ2luZSBhbHJlYWR5IGhhcyBhIHN1YnNjcmliZXIuJyk7XHJcbiAgICAgICAgdGhpcy5zeW5jRW5naW5lTGlzdGVuZXIgPSBzeW5jRW5naW5lTGlzdGVuZXI7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBJbml0aWF0ZXMgdGhlIG5ldyBsaXN0ZW4sIHJlc29sdmVzIHByb21pc2Ugd2hlbiBsaXN0ZW4gZW5xdWV1ZWQgdG8gdGhlXHJcbiAgICAgKiBzZXJ2ZXIuIEFsbCB0aGUgc3Vic2VxdWVudCB2aWV3IHNuYXBzaG90cyBvciBlcnJvcnMgYXJlIHNlbnQgdG8gdGhlXHJcbiAgICAgKiBzdWJzY3JpYmVkIGhhbmRsZXJzLiBSZXR1cm5zIHRoZSB0YXJnZXRJZCBvZiB0aGUgcXVlcnkuXHJcbiAgICAgKi9cclxuICAgIFN5bmNFbmdpbmUucHJvdG90eXBlLmxpc3RlbiA9IGZ1bmN0aW9uIChxdWVyeSkge1xyXG4gICAgICAgIHJldHVybiB0c2xpYi5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHRhcmdldElkLCB2aWV3U25hcHNob3QsIHF1ZXJ5VmlldywgdGFyZ2V0RGF0YSwgc3RhdHVzXzE7XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYi5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYXNzZXJ0U3Vic2NyaWJlZCgnbGlzdGVuKCknKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcXVlcnlWaWV3ID0gdGhpcy5xdWVyeVZpZXdzQnlRdWVyeS5nZXQocXVlcnkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXF1ZXJ5VmlldykgcmV0dXJuIFszIC8qYnJlYWsqLywgMV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFBPUlRJTkcgTk9URTogV2l0aCBNdWx0aS1UYWIgV2ViLCBpdCBpcyBwb3NzaWJsZSB0aGF0IGEgcXVlcnkgdmlld1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBhbHJlYWR5IGV4aXN0cyB3aGVuIEV2ZW50TWFuYWdlciBjYWxscyB1cyBmb3IgdGhlIGZpcnN0IHRpbWUuIFRoaXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gaGFwcGVucyB3aGVuIHRoZSBwcmltYXJ5IHRhYiBpcyBhbHJlYWR5IGxpc3RlbmluZyB0byB0aGlzIHF1ZXJ5IG9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJlaGFsZiBvZiBhbm90aGVyIHRhYiBhbmQgdGhlIHVzZXIgb2YgdGhlIHByaW1hcnkgYWxzbyBzdGFydHMgbGlzdGVuaW5nXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRvIHRoZSBxdWVyeS4gRXZlbnRNYW5hZ2VyIHdpbGwgbm90IGhhdmUgYW4gYXNzaWduZWQgdGFyZ2V0IElEIGluIHRoaXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2FzZSBhbmQgY2FsbHMgYGxpc3RlbmAgdG8gb2J0YWluIHRoaXMgSUQuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldElkID0gcXVlcnlWaWV3LnRhcmdldElkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNoYXJlZENsaWVudFN0YXRlLmFkZExvY2FsUXVlcnlUYXJnZXQodGFyZ2V0SWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2aWV3U25hcHNob3QgPSBxdWVyeVZpZXcudmlldy5jb21wdXRlSW5pdGlhbFNuYXBzaG90KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDRdO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTogcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5sb2NhbFN0b3JlLmFsbG9jYXRlVGFyZ2V0KHF1ZXJ5LnRvVGFyZ2V0KCkpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldERhdGEgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1c18xID0gdGhpcy5zaGFyZWRDbGllbnRTdGF0ZS5hZGRMb2NhbFF1ZXJ5VGFyZ2V0KHRhcmdldERhdGEudGFyZ2V0SWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRJZCA9IHRhcmdldERhdGEudGFyZ2V0SWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuaW5pdGlhbGl6ZVZpZXdBbmRDb21wdXRlU25hcHNob3QocXVlcnksIHRhcmdldElkLCBzdGF0dXNfMSA9PT0gJ2N1cnJlbnQnKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2aWV3U25hcHNob3QgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzUHJpbWFyeSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdGVTdG9yZS5saXN0ZW4odGFyZ2V0RGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSA0O1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zeW5jRW5naW5lTGlzdGVuZXIub25XYXRjaENoYW5nZShbdmlld1NuYXBzaG90XSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0YXJnZXRJZF07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmVnaXN0ZXJzIGEgdmlldyBmb3IgYSBwcmV2aW91c2x5IHVua25vd24gcXVlcnkgYW5kIGNvbXB1dGVzIGl0cyBpbml0aWFsXHJcbiAgICAgKiBzbmFwc2hvdC5cclxuICAgICAqL1xyXG4gICAgU3luY0VuZ2luZS5wcm90b3R5cGUuaW5pdGlhbGl6ZVZpZXdBbmRDb21wdXRlU25hcHNob3QgPSBmdW5jdGlvbiAocXVlcnksIHRhcmdldElkLCBjdXJyZW50KSB7XHJcbiAgICAgICAgcmV0dXJuIHRzbGliLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgcXVlcnlSZXN1bHQsIHZpZXcsIHZpZXdEb2NDaGFuZ2VzLCBzeW50aGVzaXplZFRhcmdldENoYW5nZSwgdmlld0NoYW5nZSwgZGF0YTtcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDogcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5sb2NhbFN0b3JlLmV4ZWN1dGVRdWVyeShxdWVyeSwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIHVzZVByZXZpb3VzUmVzdWx0cz0gKi8gdHJ1ZSldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcXVlcnlSZXN1bHQgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZpZXcgPSBuZXcgVmlldyhxdWVyeSwgcXVlcnlSZXN1bHQucmVtb3RlS2V5cyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZpZXdEb2NDaGFuZ2VzID0gdmlldy5jb21wdXRlRG9jQ2hhbmdlcyhxdWVyeVJlc3VsdC5kb2N1bWVudHMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzeW50aGVzaXplZFRhcmdldENoYW5nZSA9IFRhcmdldENoYW5nZS5jcmVhdGVTeW50aGVzaXplZFRhcmdldENoYW5nZUZvckN1cnJlbnRDaGFuZ2UodGFyZ2V0SWQsIGN1cnJlbnQgJiYgdGhpcy5vbmxpbmVTdGF0ZSAhPT0gT25saW5lU3RhdGUuT2ZmbGluZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZpZXdDaGFuZ2UgPSB2aWV3LmFwcGx5Q2hhbmdlcyh2aWV3RG9jQ2hhbmdlcywgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIHVwZGF0ZUxpbWJvRG9jdW1lbnRzPSAqLyB0aGlzLmlzUHJpbWFyeSA9PT0gdHJ1ZSwgc3ludGhlc2l6ZWRUYXJnZXRDaGFuZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhc3NlcnQodmlld0NoYW5nZS5saW1ib0NoYW5nZXMubGVuZ3RoID09PSAwLCAnVmlldyByZXR1cm5lZCBsaW1ibyBkb2NzIGJlZm9yZSB0YXJnZXQgYWNrIGZyb20gdGhlIHNlcnZlci4nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXJ0KCEhdmlld0NoYW5nZS5zbmFwc2hvdCwgJ2FwcGx5Q2hhbmdlcyBmb3IgbmV3IHZpZXcgc2hvdWxkIGFsd2F5cyByZXR1cm4gYSBzbmFwc2hvdCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhID0gbmV3IFF1ZXJ5VmlldyhxdWVyeSwgdGFyZ2V0SWQsIHZpZXcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnF1ZXJ5Vmlld3NCeVF1ZXJ5LnNldChxdWVyeSwgZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5xdWVyaWVzQnlUYXJnZXRbdGFyZ2V0SWRdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnF1ZXJpZXNCeVRhcmdldFt0YXJnZXRJZF0gPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnF1ZXJpZXNCeVRhcmdldFt0YXJnZXRJZF0ucHVzaChxdWVyeSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB2aWV3Q2hhbmdlLnNuYXBzaG90XTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZWNvbmNpbGUgdGhlIGxpc3Qgb2Ygc3luY2VkIGRvY3VtZW50cyBpbiBhbiBleGlzdGluZyB2aWV3IHdpdGggdGhvc2VcclxuICAgICAqIGZyb20gcGVyc2lzdGVuY2UuXHJcbiAgICAgKi9cclxuICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktdGFiIG9ubHkuXHJcbiAgICBTeW5jRW5naW5lLnByb3RvdHlwZS5zeW5jaHJvbml6ZVZpZXdBbmRDb21wdXRlU25hcHNob3QgPSBmdW5jdGlvbiAocXVlcnlWaWV3KSB7XHJcbiAgICAgICAgcmV0dXJuIHRzbGliLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgcXVlcnlSZXN1bHQsIHZpZXdTbmFwc2hvdDtcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDogcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5sb2NhbFN0b3JlLmV4ZWN1dGVRdWVyeShxdWVyeVZpZXcucXVlcnksIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiB1c2VQcmV2aW91c1Jlc3VsdHM9ICovIHRydWUpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5UmVzdWx0ID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2aWV3U25hcHNob3QgPSBxdWVyeVZpZXcudmlldy5zeW5jaHJvbml6ZVdpdGhQZXJzaXN0ZWRTdGF0ZShxdWVyeVJlc3VsdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzUHJpbWFyeSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVUcmFja2VkTGltYm9zKHF1ZXJ5Vmlldy50YXJnZXRJZCwgdmlld1NuYXBzaG90LmxpbWJvQ2hhbmdlcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHZpZXdTbmFwc2hvdF07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKiBTdG9wcyBsaXN0ZW5pbmcgdG8gdGhlIHF1ZXJ5LiAqL1xyXG4gICAgU3luY0VuZ2luZS5wcm90b3R5cGUudW5saXN0ZW4gPSBmdW5jdGlvbiAocXVlcnkpIHtcclxuICAgICAgICByZXR1cm4gdHNsaWIuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBxdWVyeVZpZXcsIHF1ZXJpZXMsIHRhcmdldFJlbWFpbnNBY3RpdmU7XHJcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYi5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYXNzZXJ0U3Vic2NyaWJlZCgndW5saXN0ZW4oKScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBxdWVyeVZpZXcgPSB0aGlzLnF1ZXJ5Vmlld3NCeVF1ZXJ5LmdldChxdWVyeSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFzc2VydCghIXF1ZXJ5VmlldywgJ1RyeWluZyB0byB1bmxpc3RlbiBvbiBxdWVyeSBub3QgZm91bmQ6JyArIHF1ZXJ5KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcXVlcmllcyA9IHRoaXMucXVlcmllc0J5VGFyZ2V0W3F1ZXJ5Vmlldy50YXJnZXRJZF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChxdWVyaWVzLmxlbmd0aCA+IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucXVlcmllc0J5VGFyZ2V0W3F1ZXJ5Vmlldy50YXJnZXRJZF0gPSBxdWVyaWVzLmZpbHRlcihmdW5jdGlvbiAocSkgeyByZXR1cm4gIXEuaXNFcXVhbChxdWVyeSk7IH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5xdWVyeVZpZXdzQnlRdWVyeS5kZWxldGUocXVlcnkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5pc1ByaW1hcnkpIHJldHVybiBbMyAvKmJyZWFrKi8sIDNdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBXZSBuZWVkIHRvIHJlbW92ZSB0aGUgbG9jYWwgcXVlcnkgdGFyZ2V0IGZpcnN0IHRvIGFsbG93IHVzIHRvIHZlcmlmeVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB3aGV0aGVyIGFueSBvdGhlciBjbGllbnQgaXMgc3RpbGwgaW50ZXJlc3RlZCBpbiB0aGlzIHRhcmdldC5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaGFyZWRDbGllbnRTdGF0ZS5yZW1vdmVMb2NhbFF1ZXJ5VGFyZ2V0KHF1ZXJ5Vmlldy50YXJnZXRJZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldFJlbWFpbnNBY3RpdmUgPSB0aGlzLnNoYXJlZENsaWVudFN0YXRlLmlzQWN0aXZlUXVlcnlUYXJnZXQocXVlcnlWaWV3LnRhcmdldElkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEhdGFyZ2V0UmVtYWluc0FjdGl2ZSkgcmV0dXJuIFszIC8qYnJlYWsqLywgMl07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMubG9jYWxTdG9yZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZWxlYXNlVGFyZ2V0KHF1ZXJ5Vmlldy50YXJnZXRJZCwgLyprZWVwUGVyc2lzdGVkVGFyZ2V0RGF0YT0qLyBmYWxzZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuc2hhcmVkQ2xpZW50U3RhdGUuY2xlYXJRdWVyeVN0YXRlKHF1ZXJ5Vmlldy50YXJnZXRJZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMucmVtb3RlU3RvcmUudW5saXN0ZW4ocXVlcnlWaWV3LnRhcmdldElkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5yZW1vdmVBbmRDbGVhbnVwVGFyZ2V0KHF1ZXJ5Vmlldy50YXJnZXRJZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jYXRjaChpZ25vcmVJZlByaW1hcnlMZWFzZUxvc3MpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSAyO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjogcmV0dXJuIFszIC8qYnJlYWsqLywgNV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUFuZENsZWFudXBUYXJnZXQocXVlcnlWaWV3LnRhcmdldElkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5sb2NhbFN0b3JlLnJlbGVhc2VUYXJnZXQocXVlcnlWaWV3LnRhcmdldElkLCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qa2VlcFBlcnNpc3RlZFRhcmdldERhdGE9Ki8gdHJ1ZSldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDU7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA1OiByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogSW5pdGlhdGVzIHRoZSB3cml0ZSBvZiBsb2NhbCBtdXRhdGlvbiBiYXRjaCB3aGljaCBpbnZvbHZlcyBhZGRpbmcgdGhlXHJcbiAgICAgKiB3cml0ZXMgdG8gdGhlIG11dGF0aW9uIHF1ZXVlLCBub3RpZnlpbmcgdGhlIHJlbW90ZSBzdG9yZSBhYm91dCBuZXdcclxuICAgICAqIG11dGF0aW9ucyBhbmQgcmFpc2luZyBldmVudHMgZm9yIGFueSBjaGFuZ2VzIHRoaXMgd3JpdGUgY2F1c2VkLlxyXG4gICAgICpcclxuICAgICAqIFRoZSBwcm9taXNlIHJldHVybmVkIGJ5IHRoaXMgY2FsbCBpcyByZXNvbHZlZCB3aGVuIHRoZSBhYm92ZSBzdGVwc1xyXG4gICAgICogaGF2ZSBjb21wbGV0ZWQsICpub3QqIHdoZW4gdGhlIHdyaXRlIHdhcyBhY2tlZCBieSB0aGUgYmFja2VuZC4gVGhlXHJcbiAgICAgKiB1c2VyQ2FsbGJhY2sgaXMgcmVzb2x2ZWQgb25jZSB0aGUgd3JpdGUgd2FzIGFja2VkL3JlamVjdGVkIGJ5IHRoZVxyXG4gICAgICogYmFja2VuZCAob3IgZmFpbGVkIGxvY2FsbHkgZm9yIGFueSBvdGhlciByZWFzb24pLlxyXG4gICAgICovXHJcbiAgICBTeW5jRW5naW5lLnByb3RvdHlwZS53cml0ZSA9IGZ1bmN0aW9uIChiYXRjaCwgdXNlckNhbGxiYWNrKSB7XHJcbiAgICAgICAgcmV0dXJuIHRzbGliLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgcmVzdWx0O1xyXG4gICAgICAgICAgICByZXR1cm4gdHNsaWIuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFzc2VydFN1YnNjcmliZWQoJ3dyaXRlKCknKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5sb2NhbFN0b3JlLmxvY2FsV3JpdGUoYmF0Y2gpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaGFyZWRDbGllbnRTdGF0ZS5hZGRQZW5kaW5nTXV0YXRpb24ocmVzdWx0LmJhdGNoSWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZE11dGF0aW9uQ2FsbGJhY2socmVzdWx0LmJhdGNoSWQsIHVzZXJDYWxsYmFjayk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuZW1pdE5ld1NuYXBzQW5kTm90aWZ5TG9jYWxTdG9yZShyZXN1bHQuY2hhbmdlcyldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLnJlbW90ZVN0b3JlLmZpbGxXcml0ZVBpcGVsaW5lKCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogVGFrZXMgYW4gdXBkYXRlRnVuY3Rpb24gaW4gd2hpY2ggYSBzZXQgb2YgcmVhZHMgYW5kIHdyaXRlcyBjYW4gYmUgcGVyZm9ybWVkXHJcbiAgICAgKiBhdG9taWNhbGx5LiBJbiB0aGUgdXBkYXRlRnVuY3Rpb24sIHRoZSBjbGllbnQgY2FuIHJlYWQgYW5kIHdyaXRlIHZhbHVlc1xyXG4gICAgICogdXNpbmcgdGhlIHN1cHBsaWVkIHRyYW5zYWN0aW9uIG9iamVjdC4gQWZ0ZXIgdGhlIHVwZGF0ZUZ1bmN0aW9uLCBhbGxcclxuICAgICAqIGNoYW5nZXMgd2lsbCBiZSBjb21taXR0ZWQuIElmIGEgcmV0cnlhYmxlIGVycm9yIG9jY3VycyAoZXg6IHNvbWUgb3RoZXJcclxuICAgICAqIGNsaWVudCBoYXMgY2hhbmdlZCBhbnkgb2YgdGhlIGRhdGEgcmVmZXJlbmNlZCksIHRoZW4gdGhlIHVwZGF0ZUZ1bmN0aW9uXHJcbiAgICAgKiB3aWxsIGJlIGNhbGxlZCBhZ2FpbiBhZnRlciBhIGJhY2tvZmYuIElmIHRoZSB1cGRhdGVGdW5jdGlvbiBzdGlsbCBmYWlsc1xyXG4gICAgICogYWZ0ZXIgYWxsIHJldHJpZXMsIHRoZW4gdGhlIHRyYW5zYWN0aW9uIHdpbGwgYmUgcmVqZWN0ZWQuXHJcbiAgICAgKlxyXG4gICAgICogVGhlIHRyYW5zYWN0aW9uIG9iamVjdCBwYXNzZWQgdG8gdGhlIHVwZGF0ZUZ1bmN0aW9uIGNvbnRhaW5zIG1ldGhvZHMgZm9yXHJcbiAgICAgKiBhY2Nlc3NpbmcgZG9jdW1lbnRzIGFuZCBjb2xsZWN0aW9ucy4gVW5saWtlIG90aGVyIGRhdGFzdG9yZSBhY2Nlc3MsIGRhdGFcclxuICAgICAqIGFjY2Vzc2VkIHdpdGggdGhlIHRyYW5zYWN0aW9uIHdpbGwgbm90IHJlZmxlY3QgbG9jYWwgY2hhbmdlcyB0aGF0IGhhdmUgbm90XHJcbiAgICAgKiBiZWVuIGNvbW1pdHRlZC4gRm9yIHRoaXMgcmVhc29uLCBpdCBpcyByZXF1aXJlZCB0aGF0IGFsbCByZWFkcyBhcmVcclxuICAgICAqIHBlcmZvcm1lZCBiZWZvcmUgYW55IHdyaXRlcy4gVHJhbnNhY3Rpb25zIG11c3QgYmUgcGVyZm9ybWVkIHdoaWxlIG9ubGluZS5cclxuICAgICAqXHJcbiAgICAgKiBUaGUgRGVmZXJyZWQgaW5wdXQgaXMgcmVzb2x2ZWQgd2hlbiB0aGUgdHJhbnNhY3Rpb24gaXMgZnVsbHkgY29tbWl0dGVkLlxyXG4gICAgICovXHJcbiAgICBTeW5jRW5naW5lLnByb3RvdHlwZS5ydW5UcmFuc2FjdGlvbiA9IGZ1bmN0aW9uIChhc3luY1F1ZXVlLCB1cGRhdGVGdW5jdGlvbiwgZGVmZXJyZWQpIHtcclxuICAgICAgICBuZXcgVHJhbnNhY3Rpb25SdW5uZXIoYXN5bmNRdWV1ZSwgdGhpcy5yZW1vdGVTdG9yZSwgdXBkYXRlRnVuY3Rpb24sIGRlZmVycmVkKS5ydW4oKTtcclxuICAgIH07XHJcbiAgICBTeW5jRW5naW5lLnByb3RvdHlwZS5hcHBseVJlbW90ZUV2ZW50ID0gZnVuY3Rpb24gKHJlbW90ZUV2ZW50KSB7XHJcbiAgICAgICAgcmV0dXJuIHRzbGliLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgY2hhbmdlcywgZXJyb3JfMTtcclxuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hc3NlcnRTdWJzY3JpYmVkKCdhcHBseVJlbW90ZUV2ZW50KCknKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2EudHJ5cy5wdXNoKFsxLCA0LCAsIDZdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5sb2NhbFN0b3JlLmFwcGx5UmVtb3RlRXZlbnQocmVtb3RlRXZlbnQpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZXMgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSBgcmVjZWl2ZWREb2N1bWVudGAgYXMgYXBwcm9wcmlhdGUgZm9yIGFueSBsaW1ibyB0YXJnZXRzLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JFYWNoKHJlbW90ZUV2ZW50LnRhcmdldENoYW5nZXMsIGZ1bmN0aW9uICh0YXJnZXRJZCwgdGFyZ2V0Q2hhbmdlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbGltYm9SZXNvbHV0aW9uID0gX3RoaXMubGltYm9SZXNvbHV0aW9uc0J5VGFyZ2V0W051bWJlcih0YXJnZXRJZCldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxpbWJvUmVzb2x1dGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpbmNlIHRoaXMgaXMgYSBsaW1ibyByZXNvbHV0aW9uIGxvb2t1cCwgaXQncyBmb3IgYSBzaW5nbGUgZG9jdW1lbnRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhbmQgaXQgY291bGQgYmUgYWRkZWQsIG1vZGlmaWVkLCBvciByZW1vdmVkLCBidXQgbm90IGEgY29tYmluYXRpb24uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXJ0KHRhcmdldENoYW5nZS5hZGRlZERvY3VtZW50cy5zaXplICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0Q2hhbmdlLm1vZGlmaWVkRG9jdW1lbnRzLnNpemUgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRDaGFuZ2UucmVtb3ZlZERvY3VtZW50cy5zaXplIDw9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDEsICdMaW1ibyByZXNvbHV0aW9uIGZvciBzaW5nbGUgZG9jdW1lbnQgY29udGFpbnMgbXVsdGlwbGUgY2hhbmdlcy4nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGFyZ2V0Q2hhbmdlLmFkZGVkRG9jdW1lbnRzLnNpemUgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpbWJvUmVzb2x1dGlvbi5yZWNlaXZlZERvY3VtZW50ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodGFyZ2V0Q2hhbmdlLm1vZGlmaWVkRG9jdW1lbnRzLnNpemUgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2VydChsaW1ib1Jlc29sdXRpb24ucmVjZWl2ZWREb2N1bWVudCwgJ1JlY2VpdmVkIGNoYW5nZSBmb3IgbGltYm8gdGFyZ2V0IGRvY3VtZW50IHdpdGhvdXQgYWRkLicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh0YXJnZXRDaGFuZ2UucmVtb3ZlZERvY3VtZW50cy5zaXplID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NlcnQobGltYm9SZXNvbHV0aW9uLnJlY2VpdmVkRG9jdW1lbnQsICdSZWNlaXZlZCByZW1vdmUgZm9yIGxpbWJvIHRhcmdldCBkb2N1bWVudCB3aXRob3V0IGFkZC4nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGltYm9SZXNvbHV0aW9uLnJlY2VpdmVkRG9jdW1lbnQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmVtaXROZXdTbmFwc0FuZE5vdGlmeUxvY2FsU3RvcmUoY2hhbmdlcywgcmVtb3RlRXZlbnQpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgNl07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcl8xID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBpZ25vcmVJZlByaW1hcnlMZWFzZUxvc3MoZXJyb3JfMSldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCA2XTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDY6IHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBBcHBsaWVzIGFuIE9ubGluZVN0YXRlIGNoYW5nZSB0byB0aGUgc3luYyBlbmdpbmUgYW5kIG5vdGlmaWVzIGFueSB2aWV3cyBvZlxyXG4gICAgICogdGhlIGNoYW5nZS5cclxuICAgICAqL1xyXG4gICAgU3luY0VuZ2luZS5wcm90b3R5cGUuYXBwbHlPbmxpbmVTdGF0ZUNoYW5nZSA9IGZ1bmN0aW9uIChvbmxpbmVTdGF0ZSwgc291cmNlKSB7XHJcbiAgICAgICAgLy8gSWYgd2UgYXJlIHRoZSBzZWNvbmRhcnkgY2xpZW50LCB3ZSBleHBsaWNpdGx5IGlnbm9yZSB0aGUgcmVtb3RlIHN0b3JlJ3NcclxuICAgICAgICAvLyBvbmxpbmUgc3RhdGUgKHRoZSBsb2NhbCBjbGllbnQgbWF5IGdvIG9mZmxpbmUsIGV2ZW4gdGhvdWdoIHRoZSBwcmltYXJ5XHJcbiAgICAgICAgLy8gdGFiIHJlbWFpbnMgb25saW5lKSBhbmQgb25seSBhcHBseSB0aGUgcHJpbWFyeSB0YWIncyBvbmxpbmUgc3RhdGUgZnJvbVxyXG4gICAgICAgIC8vIFNoYXJlZENsaWVudFN0YXRlLlxyXG4gICAgICAgIGlmICgodGhpcy5pc1ByaW1hcnkgJiYgc291cmNlID09PSBPbmxpbmVTdGF0ZVNvdXJjZS5SZW1vdGVTdG9yZSkgfHxcclxuICAgICAgICAgICAgKCF0aGlzLmlzUHJpbWFyeSAmJiBzb3VyY2UgPT09IE9ubGluZVN0YXRlU291cmNlLlNoYXJlZENsaWVudFN0YXRlKSkge1xyXG4gICAgICAgICAgICB0aGlzLmFzc2VydFN1YnNjcmliZWQoJ2FwcGx5T25saW5lU3RhdGVDaGFuZ2UoKScpO1xyXG4gICAgICAgICAgICB2YXIgbmV3Vmlld1NuYXBzaG90c18xID0gW107XHJcbiAgICAgICAgICAgIHRoaXMucXVlcnlWaWV3c0J5UXVlcnkuZm9yRWFjaChmdW5jdGlvbiAocXVlcnksIHF1ZXJ5Vmlldykge1xyXG4gICAgICAgICAgICAgICAgdmFyIHZpZXdDaGFuZ2UgPSBxdWVyeVZpZXcudmlldy5hcHBseU9ubGluZVN0YXRlQ2hhbmdlKG9ubGluZVN0YXRlKTtcclxuICAgICAgICAgICAgICAgIGFzc2VydCh2aWV3Q2hhbmdlLmxpbWJvQ2hhbmdlcy5sZW5ndGggPT09IDAsICdPbmxpbmVTdGF0ZSBzaG91bGQgbm90IGFmZmVjdCBsaW1ibyBkb2N1bWVudHMuJyk7XHJcbiAgICAgICAgICAgICAgICBpZiAodmlld0NoYW5nZS5zbmFwc2hvdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG5ld1ZpZXdTbmFwc2hvdHNfMS5wdXNoKHZpZXdDaGFuZ2Uuc25hcHNob3QpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdGhpcy5zeW5jRW5naW5lTGlzdGVuZXIub25PbmxpbmVTdGF0ZUNoYW5nZShvbmxpbmVTdGF0ZSk7XHJcbiAgICAgICAgICAgIHRoaXMuc3luY0VuZ2luZUxpc3RlbmVyLm9uV2F0Y2hDaGFuZ2UobmV3Vmlld1NuYXBzaG90c18xKTtcclxuICAgICAgICAgICAgdGhpcy5vbmxpbmVTdGF0ZSA9IG9ubGluZVN0YXRlO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5pc1ByaW1hcnkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2hhcmVkQ2xpZW50U3RhdGUuc2V0T25saW5lU3RhdGUob25saW5lU3RhdGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFN5bmNFbmdpbmUucHJvdG90eXBlLnJlamVjdExpc3RlbiA9IGZ1bmN0aW9uICh0YXJnZXRJZCwgZXJyKSB7XHJcbiAgICAgICAgcmV0dXJuIHRzbGliLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgbGltYm9SZXNvbHV0aW9uLCBsaW1ib0tleSwgZG9jdW1lbnRVcGRhdGVzLCByZXNvbHZlZExpbWJvRG9jdW1lbnRzLCBldmVudF8xO1xyXG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgICAgICByZXR1cm4gdHNsaWIuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFzc2VydFN1YnNjcmliZWQoJ3JlamVjdExpc3RlbnMoKScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLXRhYiBvbmx5LlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNoYXJlZENsaWVudFN0YXRlLnVwZGF0ZVF1ZXJ5U3RhdGUodGFyZ2V0SWQsICdyZWplY3RlZCcsIGVycik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpbWJvUmVzb2x1dGlvbiA9IHRoaXMubGltYm9SZXNvbHV0aW9uc0J5VGFyZ2V0W3RhcmdldElkXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGltYm9LZXkgPSBsaW1ib1Jlc29sdXRpb24gJiYgbGltYm9SZXNvbHV0aW9uLmtleTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFsaW1ib0tleSkgcmV0dXJuIFszIC8qYnJlYWsqLywgMV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpbmNlIHRoaXMgcXVlcnkgZmFpbGVkLCB3ZSB3b24ndCB3YW50IHRvIG1hbnVhbGx5IHVubGlzdGVuIHRvIGl0LlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBTbyBnbyBhaGVhZCBhbmQgcmVtb3ZlIGl0IGZyb20gYm9va2tlZXBpbmcuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubGltYm9UYXJnZXRzQnlLZXkgPSB0aGlzLmxpbWJvVGFyZ2V0c0J5S2V5LnJlbW92ZShsaW1ib0tleSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmxpbWJvUmVzb2x1dGlvbnNCeVRhcmdldFt0YXJnZXRJZF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50VXBkYXRlcyA9IG5ldyBTb3J0ZWRNYXAoRG9jdW1lbnRLZXkuY29tcGFyYXRvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50VXBkYXRlcyA9IGRvY3VtZW50VXBkYXRlcy5pbnNlcnQobGltYm9LZXksIG5ldyBOb0RvY3VtZW50KGxpbWJvS2V5LCBTbmFwc2hvdFZlcnNpb24uZm9yRGVsZXRlZERvYygpKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmVkTGltYm9Eb2N1bWVudHMgPSBkb2N1bWVudEtleVNldCgpLmFkZChsaW1ib0tleSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50XzEgPSBuZXcgUmVtb3RlRXZlbnQoU25hcHNob3RWZXJzaW9uLk1JTiwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIHRhcmdldENoYW5nZXM9ICovIHt9LCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgLyogdGFyZ2V0TWlzbWF0Y2hlcz0gKi8gbmV3IFNvcnRlZFNldChwcmltaXRpdmVDb21wYXJhdG9yKSwgZG9jdW1lbnRVcGRhdGVzLCByZXNvbHZlZExpbWJvRG9jdW1lbnRzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMuYXBwbHlSZW1vdGVFdmVudChldmVudF8xKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOiByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmxvY2FsU3RvcmVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZWxlYXNlVGFyZ2V0KHRhcmdldElkLCAvKiBrZWVwUGVyc2lzdGVkVGFyZ2V0RGF0YSAqLyBmYWxzZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLnJlbW92ZUFuZENsZWFudXBUYXJnZXQodGFyZ2V0SWQsIGVycik7IH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY2F0Y2goaWdub3JlSWZQcmltYXJ5TGVhc2VMb3NzKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLmxhYmVsID0gMztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6IHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS10YWIgb25seVxyXG4gICAgU3luY0VuZ2luZS5wcm90b3R5cGUuYXBwbHlCYXRjaFN0YXRlID0gZnVuY3Rpb24gKGJhdGNoSWQsIGJhdGNoU3RhdGUsIGVycm9yKSB7XHJcbiAgICAgICAgcmV0dXJuIHRzbGliLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgZG9jdW1lbnRzO1xyXG4gICAgICAgICAgICByZXR1cm4gdHNsaWIuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFzc2VydFN1YnNjcmliZWQoJ2FwcGx5QmF0Y2hTdGF0ZSgpJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMubG9jYWxTdG9yZS5sb29rdXBNdXRhdGlvbkRvY3VtZW50cyhiYXRjaElkKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudHMgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkb2N1bWVudHMgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEEgdGhyb3R0bGVkIHRhYiBtYXkgbm90IGhhdmUgc2VlbiB0aGUgbXV0YXRpb24gYmVmb3JlIGl0IHdhcyBjb21wbGV0ZWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFuZCByZW1vdmVkIGZyb20gdGhlIG11dGF0aW9uIHF1ZXVlLCBpbiB3aGljaCBjYXNlIHdlIHdvbid0IGhhdmUgY2FjaGVkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGUgYWZmZWN0ZWQgZG9jdW1lbnRzLiBJbiB0aGlzIGNhc2Ugd2UgY2FuIHNhZmVseSBpZ25vcmUgdGhlIHVwZGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2luY2UgdGhhdCBtZWFucyB3ZSBkaWRuJ3QgYXBwbHkgdGhlIG11dGF0aW9uIGxvY2FsbHkgYXQgYWxsIChpZiB3ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaGFkLCB3ZSB3b3VsZCBoYXZlIGNhY2hlZCB0aGUgYWZmZWN0ZWQgZG9jdW1lbnRzKSwgYW5kIHNvIHdlIHdpbGwganVzdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2VlIGFueSByZXN1bHRpbmcgZG9jdW1lbnQgY2hhbmdlcyB2aWEgbm9ybWFsIHJlbW90ZSBkb2N1bWVudCB1cGRhdGVzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhcyBhcHBsaWNhYmxlLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVidWcoTE9HX1RBRyQ5LCAnQ2Fubm90IGFwcGx5IG11dGF0aW9uIGJhdGNoIHdpdGggaWQ6ICcgKyBiYXRjaElkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShiYXRjaFN0YXRlID09PSAncGVuZGluZycpKSByZXR1cm4gWzMgLypicmVhayovLCAzXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgd2UgYXJlIHRoZSBwcmltYXJ5IGNsaWVudCwgd2UgbmVlZCB0byBzZW5kIHRoaXMgd3JpdGUgdG8gdGhlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJhY2tlbmQuIFNlY29uZGFyeSBjbGllbnRzIHdpbGwgaWdub3JlIHRoZXNlIHdyaXRlcyBzaW5jZSB0aGVpciByZW1vdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29ubmVjdGlvbiBpcyBkaXNhYmxlZC5cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5yZW1vdGVTdG9yZS5maWxsV3JpdGVQaXBlbGluZSgpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIHdlIGFyZSB0aGUgcHJpbWFyeSBjbGllbnQsIHdlIG5lZWQgdG8gc2VuZCB0aGlzIHdyaXRlIHRvIHRoZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBiYWNrZW5kLiBTZWNvbmRhcnkgY2xpZW50cyB3aWxsIGlnbm9yZSB0aGVzZSB3cml0ZXMgc2luY2UgdGhlaXIgcmVtb3RlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbm5lY3Rpb24gaXMgZGlzYWJsZWQuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgNF07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYmF0Y2hTdGF0ZSA9PT0gJ2Fja25vd2xlZGdlZCcgfHwgYmF0Y2hTdGF0ZSA9PT0gJ3JlamVjdGVkJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTk9URTogQm90aCB0aGVzZSBtZXRob2RzIGFyZSBuby1vcHMgZm9yIGJhdGNoZXMgdGhhdCBvcmlnaW5hdGVkIGZyb21cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG90aGVyIGNsaWVudHMuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3NVc2VyQ2FsbGJhY2soYmF0Y2hJZCwgZXJyb3IgPyBlcnJvciA6IG51bGwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2NhbFN0b3JlLnJlbW92ZUNhY2hlZE11dGF0aW9uQmF0Y2hNZXRhZGF0YShiYXRjaElkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZhaWwoXCJVbmtub3duIGJhdGNoU3RhdGU6IFwiICsgYmF0Y2hTdGF0ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSA0O1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDogcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5lbWl0TmV3U25hcHNBbmROb3RpZnlMb2NhbFN0b3JlKGRvY3VtZW50cyldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIFN5bmNFbmdpbmUucHJvdG90eXBlLmFwcGx5U3VjY2Vzc2Z1bFdyaXRlID0gZnVuY3Rpb24gKG11dGF0aW9uQmF0Y2hSZXN1bHQpIHtcclxuICAgICAgICByZXR1cm4gdHNsaWIuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBiYXRjaElkLCBjaGFuZ2VzLCBlcnJvcl8yO1xyXG4gICAgICAgICAgICByZXR1cm4gdHNsaWIuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFzc2VydFN1YnNjcmliZWQoJ2FwcGx5U3VjY2Vzc2Z1bFdyaXRlKCknKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmF0Y2hJZCA9IG11dGF0aW9uQmF0Y2hSZXN1bHQuYmF0Y2guYmF0Y2hJZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlIGxvY2FsIHN0b3JlIG1heSBvciBtYXkgbm90IGJlIGFibGUgdG8gYXBwbHkgdGhlIHdyaXRlIHJlc3VsdCBhbmRcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmFpc2UgZXZlbnRzIGltbWVkaWF0ZWx5IChkZXBlbmRpbmcgb24gd2hldGhlciB0aGUgd2F0Y2hlciBpcyBjYXVnaHRcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdXApLCBzbyB3ZSByYWlzZSB1c2VyIGNhbGxiYWNrcyBmaXJzdCBzbyB0aGF0IHRoZXkgY29uc2lzdGVudGx5IGhhcHBlblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBiZWZvcmUgbGlzdGVuIGV2ZW50cy5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzVXNlckNhbGxiYWNrKGJhdGNoSWQsIC8qZXJyb3I9Ki8gbnVsbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlclBlbmRpbmdXcml0ZXNDYWxsYmFja3MoYmF0Y2hJZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLmxhYmVsID0gMTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnRyeXMucHVzaChbMSwgNCwgLCA2XSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMubG9jYWxTdG9yZS5hY2tub3dsZWRnZUJhdGNoKG11dGF0aW9uQmF0Y2hSZXN1bHQpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZXMgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hhcmVkQ2xpZW50U3RhdGUudXBkYXRlTXV0YXRpb25TdGF0ZShiYXRjaElkLCAnYWNrbm93bGVkZ2VkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuZW1pdE5ld1NuYXBzQW5kTm90aWZ5TG9jYWxTdG9yZShjaGFuZ2VzKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDZdO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JfMiA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgaWdub3JlSWZQcmltYXJ5TGVhc2VMb3NzKGVycm9yXzIpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgNl07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA2OiByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIFN5bmNFbmdpbmUucHJvdG90eXBlLnJlamVjdEZhaWxlZFdyaXRlID0gZnVuY3Rpb24gKGJhdGNoSWQsIGVycm9yKSB7XHJcbiAgICAgICAgcmV0dXJuIHRzbGliLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgY2hhbmdlcywgZXJyb3JfMztcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hc3NlcnRTdWJzY3JpYmVkKCdyZWplY3RGYWlsZWRXcml0ZSgpJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoZSBsb2NhbCBzdG9yZSBtYXkgb3IgbWF5IG5vdCBiZSBhYmxlIHRvIGFwcGx5IHRoZSB3cml0ZSByZXN1bHQgYW5kXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJhaXNlIGV2ZW50cyBpbW1lZGlhdGVseSAoZGVwZW5kaW5nIG9uIHdoZXRoZXIgdGhlIHdhdGNoZXIgaXMgY2F1Z2h0IHVwKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gc28gd2UgcmFpc2UgdXNlciBjYWxsYmFja3MgZmlyc3Qgc28gdGhhdCB0aGV5IGNvbnNpc3RlbnRseSBoYXBwZW4gYmVmb3JlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGxpc3RlbiBldmVudHMuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvY2Vzc1VzZXJDYWxsYmFjayhiYXRjaElkLCBlcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlclBlbmRpbmdXcml0ZXNDYWxsYmFja3MoYmF0Y2hJZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLmxhYmVsID0gMTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnRyeXMucHVzaChbMSwgNCwgLCA2XSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMubG9jYWxTdG9yZS5yZWplY3RCYXRjaChiYXRjaElkKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VzID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNoYXJlZENsaWVudFN0YXRlLnVwZGF0ZU11dGF0aW9uU3RhdGUoYmF0Y2hJZCwgJ3JlamVjdGVkJywgZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmVtaXROZXdTbmFwc0FuZE5vdGlmeUxvY2FsU3RvcmUoY2hhbmdlcyldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCA2XTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yXzMgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIGlnbm9yZUlmUHJpbWFyeUxlYXNlTG9zcyhlcnJvcl8zKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA1OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDZdO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNjogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJlZ2lzdGVycyBhIHVzZXIgY2FsbGJhY2sgdGhhdCByZXNvbHZlcyB3aGVuIGFsbCBwZW5kaW5nIG11dGF0aW9ucyBhdCB0aGUgbW9tZW50IG9mIGNhbGxpbmdcclxuICAgICAqIGFyZSBhY2tub3dsZWRnZWQgLlxyXG4gICAgICovXHJcbiAgICBTeW5jRW5naW5lLnByb3RvdHlwZS5yZWdpc3RlclBlbmRpbmdXcml0ZXNDYWxsYmFjayA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xyXG4gICAgICAgIHJldHVybiB0c2xpYi5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGhpZ2hlc3RCYXRjaElkLCBjYWxsYmFja3M7XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYi5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5yZW1vdGVTdG9yZS5jYW5Vc2VOZXR3b3JrKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlYnVnKExPR19UQUckOSwgJ1RoZSBuZXR3b3JrIGlzIGRpc2FibGVkLiBUaGUgdGFzayByZXR1cm5lZCBieSAnICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIidhd2FpdFBlbmRpbmdXcml0ZXMoKScgd2lsbCBub3QgY29tcGxldGUgdW50aWwgdGhlIG5ldHdvcmsgaXMgZW5hYmxlZC5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5sb2NhbFN0b3JlLmdldEhpZ2hlc3RVbmFja25vd2xlZGdlZEJhdGNoSWQoKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBoaWdoZXN0QmF0Y2hJZCA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGhpZ2hlc3RCYXRjaElkID09PSBCQVRDSElEX1VOS05PV04pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRyaWdnZXIgdGhlIGNhbGxiYWNrIHJpZ2h0IGF3YXkgaWYgdGhlcmUgaXMgbm8gcGVuZGluZyB3cml0ZXMgYXQgdGhlIG1vbWVudC5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrLnJlc29sdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFja3MgPSB0aGlzLnBlbmRpbmdXcml0ZXNDYWxsYmFja3MuZ2V0KGhpZ2hlc3RCYXRjaElkKSB8fCBbXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2tzLnB1c2goY2FsbGJhY2spO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBlbmRpbmdXcml0ZXNDYWxsYmFja3Muc2V0KGhpZ2hlc3RCYXRjaElkLCBjYWxsYmFja3MpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogVHJpZ2dlcnMgdGhlIGNhbGxiYWNrcyB0aGF0IGFyZSB3YWl0aW5nIGZvciB0aGlzIGJhdGNoIGlkIHRvIGdldCBhY2tub3dsZWRnZWQgYnkgc2VydmVyLFxyXG4gICAgICogaWYgdGhlcmUgYXJlIGFueS5cclxuICAgICAqL1xyXG4gICAgU3luY0VuZ2luZS5wcm90b3R5cGUudHJpZ2dlclBlbmRpbmdXcml0ZXNDYWxsYmFja3MgPSBmdW5jdGlvbiAoYmF0Y2hJZCkge1xyXG4gICAgICAgICh0aGlzLnBlbmRpbmdXcml0ZXNDYWxsYmFja3MuZ2V0KGJhdGNoSWQpIHx8IFtdKS5mb3JFYWNoKGZ1bmN0aW9uIChjYWxsYmFjaykge1xyXG4gICAgICAgICAgICBjYWxsYmFjay5yZXNvbHZlKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5wZW5kaW5nV3JpdGVzQ2FsbGJhY2tzLmRlbGV0ZShiYXRjaElkKTtcclxuICAgIH07XHJcbiAgICAvKiogUmVqZWN0IGFsbCBvdXRzdGFuZGluZyBjYWxsYmFja3Mgd2FpdGluZyBmb3IgcGVuZGluZyB3cml0ZXMgdG8gY29tcGxldGUuICovXHJcbiAgICBTeW5jRW5naW5lLnByb3RvdHlwZS5yZWplY3RPdXRzdGFuZGluZ1BlbmRpbmdXcml0ZXNDYWxsYmFja3MgPSBmdW5jdGlvbiAoZXJyb3JNZXNzYWdlKSB7XHJcbiAgICAgICAgdGhpcy5wZW5kaW5nV3JpdGVzQ2FsbGJhY2tzLmZvckVhY2goZnVuY3Rpb24gKGNhbGxiYWNrcykge1xyXG4gICAgICAgICAgICBjYWxsYmFja3MuZm9yRWFjaChmdW5jdGlvbiAoY2FsbGJhY2spIHtcclxuICAgICAgICAgICAgICAgIGNhbGxiYWNrLnJlamVjdChuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5DQU5DRUxMRUQsIGVycm9yTWVzc2FnZSkpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLnBlbmRpbmdXcml0ZXNDYWxsYmFja3MuY2xlYXIoKTtcclxuICAgIH07XHJcbiAgICBTeW5jRW5naW5lLnByb3RvdHlwZS5hZGRNdXRhdGlvbkNhbGxiYWNrID0gZnVuY3Rpb24gKGJhdGNoSWQsIGNhbGxiYWNrKSB7XHJcbiAgICAgICAgdmFyIG5ld0NhbGxiYWNrcyA9IHRoaXMubXV0YXRpb25Vc2VyQ2FsbGJhY2tzW3RoaXMuY3VycmVudFVzZXIudG9LZXkoKV07XHJcbiAgICAgICAgaWYgKCFuZXdDYWxsYmFja3MpIHtcclxuICAgICAgICAgICAgbmV3Q2FsbGJhY2tzID0gbmV3IFNvcnRlZE1hcChwcmltaXRpdmVDb21wYXJhdG9yKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbmV3Q2FsbGJhY2tzID0gbmV3Q2FsbGJhY2tzLmluc2VydChiYXRjaElkLCBjYWxsYmFjayk7XHJcbiAgICAgICAgdGhpcy5tdXRhdGlvblVzZXJDYWxsYmFja3NbdGhpcy5jdXJyZW50VXNlci50b0tleSgpXSA9IG5ld0NhbGxiYWNrcztcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJlc29sdmVzIG9yIHJlamVjdHMgdGhlIHVzZXIgY2FsbGJhY2sgZm9yIHRoZSBnaXZlbiBiYXRjaCBhbmQgdGhlbiBkaXNjYXJkc1xyXG4gICAgICogaXQuXHJcbiAgICAgKi9cclxuICAgIFN5bmNFbmdpbmUucHJvdG90eXBlLnByb2Nlc3NVc2VyQ2FsbGJhY2sgPSBmdW5jdGlvbiAoYmF0Y2hJZCwgZXJyb3IpIHtcclxuICAgICAgICB2YXIgbmV3Q2FsbGJhY2tzID0gdGhpcy5tdXRhdGlvblVzZXJDYWxsYmFja3NbdGhpcy5jdXJyZW50VXNlci50b0tleSgpXTtcclxuICAgICAgICAvLyBOT1RFOiBNdXRhdGlvbnMgcmVzdG9yZWQgZnJvbSBwZXJzaXN0ZW5jZSB3b24ndCBoYXZlIGNhbGxiYWNrcywgc28gaXQnc1xyXG4gICAgICAgIC8vIG9rYXkgZm9yIHRoZXJlIHRvIGJlIG5vIGNhbGxiYWNrIGZvciB0aGlzIElELlxyXG4gICAgICAgIGlmIChuZXdDYWxsYmFja3MpIHtcclxuICAgICAgICAgICAgdmFyIGNhbGxiYWNrID0gbmV3Q2FsbGJhY2tzLmdldChiYXRjaElkKTtcclxuICAgICAgICAgICAgaWYgKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgICAgICBhc3NlcnQoYmF0Y2hJZCA9PT0gbmV3Q2FsbGJhY2tzLm1pbktleSgpLCAnTXV0YXRpb24gY2FsbGJhY2tzIHByb2Nlc3NlZCBvdXQtb2Ytb3JkZXI/Jyk7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjay5yZWplY3QoZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2sucmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgbmV3Q2FsbGJhY2tzID0gbmV3Q2FsbGJhY2tzLnJlbW92ZShiYXRjaElkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLm11dGF0aW9uVXNlckNhbGxiYWNrc1t0aGlzLmN1cnJlbnRVc2VyLnRvS2V5KCldID0gbmV3Q2FsbGJhY2tzO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBTeW5jRW5naW5lLnByb3RvdHlwZS5yZW1vdmVBbmRDbGVhbnVwVGFyZ2V0ID0gZnVuY3Rpb24gKHRhcmdldElkLCBlcnJvcikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgaWYgKGVycm9yID09PSB2b2lkIDApIHsgZXJyb3IgPSBudWxsOyB9XHJcbiAgICAgICAgdGhpcy5zaGFyZWRDbGllbnRTdGF0ZS5yZW1vdmVMb2NhbFF1ZXJ5VGFyZ2V0KHRhcmdldElkKTtcclxuICAgICAgICBhc3NlcnQodGhpcy5xdWVyaWVzQnlUYXJnZXRbdGFyZ2V0SWRdICYmXHJcbiAgICAgICAgICAgIHRoaXMucXVlcmllc0J5VGFyZ2V0W3RhcmdldElkXS5sZW5ndGggIT09IDAsIFwiVGhlcmUgYXJlIG5vIHF1ZXJpZXMgbWFwcGVkIHRvIHRhcmdldCBpZCBcIiArIHRhcmdldElkKTtcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gdGhpcy5xdWVyaWVzQnlUYXJnZXRbdGFyZ2V0SWRdOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICB2YXIgcXVlcnkgPSBfYVtfaV07XHJcbiAgICAgICAgICAgIHRoaXMucXVlcnlWaWV3c0J5UXVlcnkuZGVsZXRlKHF1ZXJ5KTtcclxuICAgICAgICAgICAgaWYgKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN5bmNFbmdpbmVMaXN0ZW5lci5vbldhdGNoRXJyb3IocXVlcnksIGVycm9yKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBkZWxldGUgdGhpcy5xdWVyaWVzQnlUYXJnZXRbdGFyZ2V0SWRdO1xyXG4gICAgICAgIGlmICh0aGlzLmlzUHJpbWFyeSkge1xyXG4gICAgICAgICAgICB2YXIgbGltYm9LZXlzID0gdGhpcy5saW1ib0RvY3VtZW50UmVmcy5yZWZlcmVuY2VzRm9ySWQodGFyZ2V0SWQpO1xyXG4gICAgICAgICAgICB0aGlzLmxpbWJvRG9jdW1lbnRSZWZzLnJlbW92ZVJlZmVyZW5jZXNGb3JJZCh0YXJnZXRJZCk7XHJcbiAgICAgICAgICAgIGxpbWJvS2V5cy5mb3JFYWNoKGZ1bmN0aW9uIChsaW1ib0tleSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGlzUmVmZXJlbmNlZCA9IF90aGlzLmxpbWJvRG9jdW1lbnRSZWZzLmNvbnRhaW5zS2V5KGxpbWJvS2V5KTtcclxuICAgICAgICAgICAgICAgIGlmICghaXNSZWZlcmVuY2VkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gV2UgcmVtb3ZlZCB0aGUgbGFzdCByZWZlcmVuY2UgZm9yIHRoaXMga2V5XHJcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMucmVtb3ZlTGltYm9UYXJnZXQobGltYm9LZXkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgU3luY0VuZ2luZS5wcm90b3R5cGUucmVtb3ZlTGltYm9UYXJnZXQgPSBmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgICAgLy8gSXQncyBwb3NzaWJsZSB0aGF0IHRoZSB0YXJnZXQgYWxyZWFkeSBnb3QgcmVtb3ZlZCBiZWNhdXNlIHRoZSBxdWVyeSBmYWlsZWQuIEluIHRoYXQgY2FzZSxcclxuICAgICAgICAvLyB0aGUga2V5IHdvbid0IGV4aXN0IGluIGBsaW1ib1RhcmdldHNCeUtleWAuIE9ubHkgZG8gdGhlIGNsZWFudXAgaWYgd2Ugc3RpbGwgaGF2ZSB0aGUgdGFyZ2V0LlxyXG4gICAgICAgIHZhciBsaW1ib1RhcmdldElkID0gdGhpcy5saW1ib1RhcmdldHNCeUtleS5nZXQoa2V5KTtcclxuICAgICAgICBpZiAobGltYm9UYXJnZXRJZCA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICAvLyBUaGlzIHRhcmdldCBhbHJlYWR5IGdvdCByZW1vdmVkLCBiZWNhdXNlIHRoZSBxdWVyeSBmYWlsZWQuXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5yZW1vdGVTdG9yZS51bmxpc3RlbihsaW1ib1RhcmdldElkKTtcclxuICAgICAgICB0aGlzLmxpbWJvVGFyZ2V0c0J5S2V5ID0gdGhpcy5saW1ib1RhcmdldHNCeUtleS5yZW1vdmUoa2V5KTtcclxuICAgICAgICBkZWxldGUgdGhpcy5saW1ib1Jlc29sdXRpb25zQnlUYXJnZXRbbGltYm9UYXJnZXRJZF07XHJcbiAgICB9O1xyXG4gICAgU3luY0VuZ2luZS5wcm90b3R5cGUudXBkYXRlVHJhY2tlZExpbWJvcyA9IGZ1bmN0aW9uICh0YXJnZXRJZCwgbGltYm9DaGFuZ2VzKSB7XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBsaW1ib0NoYW5nZXNfMSA9IGxpbWJvQ2hhbmdlczsgX2kgPCBsaW1ib0NoYW5nZXNfMS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgdmFyIGxpbWJvQ2hhbmdlID0gbGltYm9DaGFuZ2VzXzFbX2ldO1xyXG4gICAgICAgICAgICBpZiAobGltYm9DaGFuZ2UgaW5zdGFuY2VvZiBBZGRlZExpbWJvRG9jdW1lbnQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubGltYm9Eb2N1bWVudFJlZnMuYWRkUmVmZXJlbmNlKGxpbWJvQ2hhbmdlLmtleSwgdGFyZ2V0SWQpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy50cmFja0xpbWJvQ2hhbmdlKGxpbWJvQ2hhbmdlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChsaW1ib0NoYW5nZSBpbnN0YW5jZW9mIFJlbW92ZWRMaW1ib0RvY3VtZW50KSB7XHJcbiAgICAgICAgICAgICAgICBkZWJ1ZyhMT0dfVEFHJDksICdEb2N1bWVudCBubyBsb25nZXIgaW4gbGltYm86ICcgKyBsaW1ib0NoYW5nZS5rZXkpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5saW1ib0RvY3VtZW50UmVmcy5yZW1vdmVSZWZlcmVuY2UobGltYm9DaGFuZ2Uua2V5LCB0YXJnZXRJZCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgaXNSZWZlcmVuY2VkID0gdGhpcy5saW1ib0RvY3VtZW50UmVmcy5jb250YWluc0tleShsaW1ib0NoYW5nZS5rZXkpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFpc1JlZmVyZW5jZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBXZSByZW1vdmVkIHRoZSBsYXN0IHJlZmVyZW5jZSBmb3IgdGhpcyBrZXlcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUxpbWJvVGFyZ2V0KGxpbWJvQ2hhbmdlLmtleSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBmYWlsKCdVbmtub3duIGxpbWJvIGNoYW5nZTogJyArIEpTT04uc3RyaW5naWZ5KGxpbWJvQ2hhbmdlKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgU3luY0VuZ2luZS5wcm90b3R5cGUudHJhY2tMaW1ib0NoYW5nZSA9IGZ1bmN0aW9uIChsaW1ib0NoYW5nZSkge1xyXG4gICAgICAgIHZhciBrZXkgPSBsaW1ib0NoYW5nZS5rZXk7XHJcbiAgICAgICAgaWYgKCF0aGlzLmxpbWJvVGFyZ2V0c0J5S2V5LmdldChrZXkpKSB7XHJcbiAgICAgICAgICAgIGRlYnVnKExPR19UQUckOSwgJ05ldyBkb2N1bWVudCBpbiBsaW1ibzogJyArIGtleSk7XHJcbiAgICAgICAgICAgIHZhciBsaW1ib1RhcmdldElkID0gdGhpcy5saW1ib1RhcmdldElkR2VuZXJhdG9yLm5leHQoKTtcclxuICAgICAgICAgICAgdmFyIHF1ZXJ5ID0gUXVlcnkuYXRQYXRoKGtleS5wYXRoKTtcclxuICAgICAgICAgICAgdGhpcy5saW1ib1Jlc29sdXRpb25zQnlUYXJnZXRbbGltYm9UYXJnZXRJZF0gPSBuZXcgTGltYm9SZXNvbHV0aW9uKGtleSk7XHJcbiAgICAgICAgICAgIHRoaXMucmVtb3RlU3RvcmUubGlzdGVuKG5ldyBUYXJnZXREYXRhKHF1ZXJ5LnRvVGFyZ2V0KCksIGxpbWJvVGFyZ2V0SWQsIFRhcmdldFB1cnBvc2UuTGltYm9SZXNvbHV0aW9uLCBMaXN0ZW5TZXF1ZW5jZS5JTlZBTElEKSk7XHJcbiAgICAgICAgICAgIHRoaXMubGltYm9UYXJnZXRzQnlLZXkgPSB0aGlzLmxpbWJvVGFyZ2V0c0J5S2V5Lmluc2VydChrZXksIGxpbWJvVGFyZ2V0SWQpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvLyBWaXNpYmxlIGZvciB0ZXN0aW5nXHJcbiAgICBTeW5jRW5naW5lLnByb3RvdHlwZS5jdXJyZW50TGltYm9Eb2NzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmxpbWJvVGFyZ2V0c0J5S2V5O1xyXG4gICAgfTtcclxuICAgIFN5bmNFbmdpbmUucHJvdG90eXBlLmVtaXROZXdTbmFwc0FuZE5vdGlmeUxvY2FsU3RvcmUgPSBmdW5jdGlvbiAoY2hhbmdlcywgcmVtb3RlRXZlbnQpIHtcclxuICAgICAgICByZXR1cm4gdHNsaWIuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBuZXdTbmFwcywgZG9jQ2hhbmdlc0luQWxsVmlld3MsIHF1ZXJpZXNQcm9jZXNzZWQ7XHJcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYi5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld1NuYXBzID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvY0NoYW5nZXNJbkFsbFZpZXdzID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJpZXNQcm9jZXNzZWQgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5xdWVyeVZpZXdzQnlRdWVyeS5mb3JFYWNoKGZ1bmN0aW9uIChfLCBxdWVyeVZpZXcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJpZXNQcm9jZXNzZWQucHVzaChQcm9taXNlLnJlc29sdmUoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmlld0RvY0NoYW5nZXMgPSBxdWVyeVZpZXcudmlldy5jb21wdXRlRG9jQ2hhbmdlcyhjaGFuZ2VzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXZpZXdEb2NDaGFuZ2VzLm5lZWRzUmVmaWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB2aWV3RG9jQ2hhbmdlcztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlIHF1ZXJ5IGhhcyBhIGxpbWl0IGFuZCBzb21lIGRvY3Mgd2VyZSByZW1vdmVkLCBzbyB3ZSBuZWVkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdG8gcmUtcnVuIHRoZSBxdWVyeSBhZ2FpbnN0IHRoZSBsb2NhbCBzdG9yZSB0byBtYWtlIHN1cmUgd2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBkaWRuJ3QgbG9zZSBhbnkgZ29vZCBkb2NzIHRoYXQgaGFkIGJlZW4gcGFzdCB0aGUgbGltaXQuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLmxvY2FsU3RvcmVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmV4ZWN1dGVRdWVyeShxdWVyeVZpZXcucXVlcnksIC8qIHVzZVByZXZpb3VzUmVzdWx0cz0gKi8gZmFsc2UpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZG9jdW1lbnRzID0gX2EuZG9jdW1lbnRzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcXVlcnlWaWV3LnZpZXcuY29tcHV0ZURvY0NoYW5nZXMoZG9jdW1lbnRzLCB2aWV3RG9jQ2hhbmdlcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICh2aWV3RG9jQ2hhbmdlcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0YXJnZXRDaGFuZ2UgPSByZW1vdGVFdmVudCAmJiByZW1vdGVFdmVudC50YXJnZXRDaGFuZ2VzW3F1ZXJ5Vmlldy50YXJnZXRJZF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZpZXdDaGFuZ2UgPSBxdWVyeVZpZXcudmlldy5hcHBseUNoYW5nZXModmlld0RvY0NoYW5nZXMsIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIHVwZGF0ZUxpbWJvRG9jdW1lbnRzPSAqLyBfdGhpcy5pc1ByaW1hcnkgPT09IHRydWUsIHRhcmdldENoYW5nZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMudXBkYXRlVHJhY2tlZExpbWJvcyhxdWVyeVZpZXcudGFyZ2V0SWQsIHZpZXdDaGFuZ2UubGltYm9DaGFuZ2VzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmlld0NoYW5nZS5zbmFwc2hvdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMuaXNQcmltYXJ5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5zaGFyZWRDbGllbnRTdGF0ZS51cGRhdGVRdWVyeVN0YXRlKHF1ZXJ5Vmlldy50YXJnZXRJZCwgdmlld0NoYW5nZS5zbmFwc2hvdC5mcm9tQ2FjaGUgPyAnbm90LWN1cnJlbnQnIDogJ2N1cnJlbnQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdTbmFwcy5wdXNoKHZpZXdDaGFuZ2Uuc25hcHNob3QpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZG9jQ2hhbmdlcyA9IExvY2FsVmlld0NoYW5nZXMuZnJvbVNuYXBzaG90KHF1ZXJ5Vmlldy50YXJnZXRJZCwgdmlld0NoYW5nZS5zbmFwc2hvdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY0NoYW5nZXNJbkFsbFZpZXdzLnB1c2goZG9jQ2hhbmdlcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgUHJvbWlzZS5hbGwocXVlcmllc1Byb2Nlc3NlZCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN5bmNFbmdpbmVMaXN0ZW5lci5vbldhdGNoQ2hhbmdlKG5ld1NuYXBzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5sb2NhbFN0b3JlLm5vdGlmeUxvY2FsVmlld0NoYW5nZXMoZG9jQ2hhbmdlc0luQWxsVmlld3MpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBTeW5jRW5naW5lLnByb3RvdHlwZS5hc3NlcnRTdWJzY3JpYmVkID0gZnVuY3Rpb24gKGZuTmFtZSkge1xyXG4gICAgICAgIGFzc2VydCh0aGlzLnN5bmNFbmdpbmVMaXN0ZW5lciAhPT0gbnVsbCwgJ1RyeWluZyB0byBjYWxsICcgKyBmbk5hbWUgKyAnIGJlZm9yZSBjYWxsaW5nIHN1YnNjcmliZSgpLicpO1xyXG4gICAgfTtcclxuICAgIFN5bmNFbmdpbmUucHJvdG90eXBlLmhhbmRsZUNyZWRlbnRpYWxDaGFuZ2UgPSBmdW5jdGlvbiAodXNlcikge1xyXG4gICAgICAgIHJldHVybiB0c2xpYi5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHVzZXJDaGFuZ2VkLCByZXN1bHQ7XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYi5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJDaGFuZ2VkID0gIXRoaXMuY3VycmVudFVzZXIuaXNFcXVhbCh1c2VyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50VXNlciA9IHVzZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdXNlckNoYW5nZWQpIHJldHVybiBbMyAvKmJyZWFrKi8sIDNdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBGYWlscyB0YXNrcyB3YWl0aW5nIGZvciBwZW5kaW5nIHdyaXRlcyByZXF1ZXN0ZWQgYnkgcHJldmlvdXMgdXNlci5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWplY3RPdXRzdGFuZGluZ1BlbmRpbmdXcml0ZXNDYWxsYmFja3MoXCInd2FpdEZvclBlbmRpbmdXcml0ZXMnIHByb21pc2UgaXMgcmVqZWN0ZWQgZHVlIHRvIGEgdXNlciBjaGFuZ2UuXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmxvY2FsU3RvcmUuaGFuZGxlVXNlckNoYW5nZSh1c2VyKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRPRE8oYi8xMTQyMjY0MTcpOiBDb25zaWRlciBjYWxsaW5nIHRoaXMgb25seSBpbiB0aGUgcHJpbWFyeSB0YWIuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hhcmVkQ2xpZW50U3RhdGUuaGFuZGxlVXNlckNoYW5nZSh1c2VyLCByZXN1bHQucmVtb3ZlZEJhdGNoSWRzLCByZXN1bHQuYWRkZWRCYXRjaElkcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuZW1pdE5ld1NuYXBzQW5kTm90aWZ5TG9jYWxTdG9yZShyZXN1bHQuYWZmZWN0ZWREb2N1bWVudHMpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSAzO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzogcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5yZW1vdGVTdG9yZS5oYW5kbGVDcmVkZW50aWFsQ2hhbmdlKCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktdGFiIG9ubHlcclxuICAgIFN5bmNFbmdpbmUucHJvdG90eXBlLmFwcGx5UHJpbWFyeVN0YXRlID0gZnVuY3Rpb24gKGlzUHJpbWFyeSkge1xyXG4gICAgICAgIHJldHVybiB0c2xpYi5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGFjdGl2ZVRhcmdldHMsIGFjdGl2ZVF1ZXJpZXMsIF9pLCBhY3RpdmVRdWVyaWVzXzEsIHRhcmdldERhdGEsIGFjdGl2ZVRhcmdldHNfMSwgcF8xO1xyXG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgICAgICByZXR1cm4gdHNsaWIuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShpc1ByaW1hcnkgPT09IHRydWUgJiYgdGhpcy5pc1ByaW1hcnkgIT09IHRydWUpKSByZXR1cm4gWzMgLypicmVhayovLCAzXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pc1ByaW1hcnkgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLnJlbW90ZVN0b3JlLmFwcGx5UHJpbWFyeVN0YXRlKHRydWUpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlVGFyZ2V0cyA9IHRoaXMuc2hhcmVkQ2xpZW50U3RhdGUuZ2V0QWxsQWN0aXZlUXVlcnlUYXJnZXRzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuc3luY2hyb25pemVRdWVyeVZpZXdzQW5kUmFpc2VTbmFwc2hvdHMoYWN0aXZlVGFyZ2V0cy50b0FycmF5KCkpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZVF1ZXJpZXMgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoX2kgPSAwLCBhY3RpdmVRdWVyaWVzXzEgPSBhY3RpdmVRdWVyaWVzOyBfaSA8IGFjdGl2ZVF1ZXJpZXNfMS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldERhdGEgPSBhY3RpdmVRdWVyaWVzXzFbX2ldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdGVTdG9yZS5saXN0ZW4odGFyZ2V0RGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgN107XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShpc1ByaW1hcnkgPT09IGZhbHNlICYmIHRoaXMuaXNQcmltYXJ5ICE9PSBmYWxzZSkpIHJldHVybiBbMyAvKmJyZWFrKi8sIDddO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmlzUHJpbWFyeSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmVUYXJnZXRzXzEgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcF8xID0gUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvckVhY2hOdW1iZXIodGhpcy5xdWVyaWVzQnlUYXJnZXQsIGZ1bmN0aW9uICh0YXJnZXRJZCwgXykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLnNoYXJlZENsaWVudFN0YXRlLmlzTG9jYWxRdWVyeVRhcmdldCh0YXJnZXRJZCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmVUYXJnZXRzXzEucHVzaCh0YXJnZXRJZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwXzEgPSBwXzEudGhlbihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnJlbW92ZUFuZENsZWFudXBUYXJnZXQodGFyZ2V0SWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMubG9jYWxTdG9yZS5yZWxlYXNlVGFyZ2V0KHRhcmdldElkLCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyprZWVwUGVyc2lzdGVkVGFyZ2V0RGF0YT0qLyB0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnJlbW90ZVN0b3JlLnVubGlzdGVuKHRhcmdldElkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHBfMV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuc3luY2hyb25pemVRdWVyeVZpZXdzQW5kUmFpc2VTbmFwc2hvdHMoYWN0aXZlVGFyZ2V0c18xKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA1OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVzZXRMaW1ib0RvY3VtZW50cygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLnJlbW90ZVN0b3JlLmFwcGx5UHJpbWFyeVN0YXRlKGZhbHNlKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA2OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLmxhYmVsID0gNztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDc6IHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS10YWIgb25seS5cclxuICAgIFN5bmNFbmdpbmUucHJvdG90eXBlLnJlc2V0TGltYm9Eb2N1bWVudHMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBmb3JFYWNoTnVtYmVyKHRoaXMubGltYm9SZXNvbHV0aW9uc0J5VGFyZ2V0LCBmdW5jdGlvbiAodGFyZ2V0SWQpIHtcclxuICAgICAgICAgICAgX3RoaXMucmVtb3RlU3RvcmUudW5saXN0ZW4odGFyZ2V0SWQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMubGltYm9Eb2N1bWVudFJlZnMucmVtb3ZlQWxsUmVmZXJlbmNlcygpO1xyXG4gICAgICAgIHRoaXMubGltYm9SZXNvbHV0aW9uc0J5VGFyZ2V0ID0gW107XHJcbiAgICAgICAgdGhpcy5saW1ib1RhcmdldHNCeUtleSA9IG5ldyBTb3J0ZWRNYXAoRG9jdW1lbnRLZXkuY29tcGFyYXRvcik7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZWNvbmNpbGUgdGhlIHF1ZXJ5IHZpZXdzIG9mIHRoZSBwcm92aWRlZCBxdWVyeSB0YXJnZXRzIHdpdGggdGhlIHN0YXRlIGZyb21cclxuICAgICAqIHBlcnNpc3RlbmNlLiBSYWlzZXMgc25hcHNob3RzIGZvciBhbnkgY2hhbmdlcyB0aGF0IGFmZmVjdCB0aGUgbG9jYWxcclxuICAgICAqIGNsaWVudCBhbmQgcmV0dXJucyB0aGUgdXBkYXRlZCBzdGF0ZSBvZiBhbGwgdGFyZ2V0J3MgcXVlcnkgZGF0YS5cclxuICAgICAqL1xyXG4gICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS10YWIgb25seS5cclxuICAgIFN5bmNFbmdpbmUucHJvdG90eXBlLnN5bmNocm9uaXplUXVlcnlWaWV3c0FuZFJhaXNlU25hcHNob3RzID0gZnVuY3Rpb24gKHRhcmdldHMpIHtcclxuICAgICAgICByZXR1cm4gdHNsaWIuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBhY3RpdmVRdWVyaWVzLCBuZXdWaWV3U25hcHNob3RzLCBfaSwgdGFyZ2V0c18xLCB0YXJnZXRJZCwgdGFyZ2V0RGF0YSwgcXVlcmllcywgX2EsIHF1ZXJpZXNfMSwgcXVlcnksIHF1ZXJ5Vmlldywgdmlld0NoYW5nZSwgdGFyZ2V0O1xyXG4gICAgICAgICAgICByZXR1cm4gdHNsaWIuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9iKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9iLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmVRdWVyaWVzID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld1ZpZXdTbmFwc2hvdHMgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2kgPSAwLCB0YXJnZXRzXzEgPSB0YXJnZXRzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYi5sYWJlbCA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShfaSA8IHRhcmdldHNfMS5sZW5ndGgpKSByZXR1cm4gWzMgLypicmVhayovLCAxNF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldElkID0gdGFyZ2V0c18xW19pXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0RGF0YSA9IHZvaWQgMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcXVlcmllcyA9IHRoaXMucXVlcmllc0J5VGFyZ2V0W3RhcmdldElkXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEocXVlcmllcyAmJiBxdWVyaWVzLmxlbmd0aCAhPT0gMCkpIHJldHVybiBbMyAvKmJyZWFrKi8sIDhdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBGb3IgcXVlcmllcyB0aGF0IGhhdmUgYSBsb2NhbCBWaWV3LCB3ZSBuZWVkIHRvIHVwZGF0ZSB0aGVpciBzdGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBpbiBMb2NhbFN0b3JlIChhcyB0aGUgcmVzdW1lIHRva2VuIGFuZCB0aGUgc25hcHNob3QgdmVyc2lvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBtaWdodCBoYXZlIGNoYW5nZWQpIGFuZCByZWNvbmNpbGUgdGhlaXIgdmlld3Mgd2l0aCB0aGUgcGVyc2lzdGVkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHN0YXRlICh0aGUgbGlzdCBvZiBzeW5jZWREb2N1bWVudHMgbWF5IGhhdmUgZ290dGVuIG91dCBvZiBzeW5jKS5cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5sb2NhbFN0b3JlLnJlbGVhc2VUYXJnZXQodGFyZ2V0SWQsIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLyprZWVwUGVyc2lzdGVkVGFyZ2V0RGF0YT0qLyB0cnVlKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBGb3IgcXVlcmllcyB0aGF0IGhhdmUgYSBsb2NhbCBWaWV3LCB3ZSBuZWVkIHRvIHVwZGF0ZSB0aGVpciBzdGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBpbiBMb2NhbFN0b3JlIChhcyB0aGUgcmVzdW1lIHRva2VuIGFuZCB0aGUgc25hcHNob3QgdmVyc2lvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBtaWdodCBoYXZlIGNoYW5nZWQpIGFuZCByZWNvbmNpbGUgdGhlaXIgdmlld3Mgd2l0aCB0aGUgcGVyc2lzdGVkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHN0YXRlICh0aGUgbGlzdCBvZiBzeW5jZWREb2N1bWVudHMgbWF5IGhhdmUgZ290dGVuIG91dCBvZiBzeW5jKS5cclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Iuc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmxvY2FsU3RvcmUuYWxsb2NhdGVUYXJnZXQocXVlcmllc1swXS50b1RhcmdldCgpKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXREYXRhID0gX2Iuc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYSA9IDAsIHF1ZXJpZXNfMSA9IHF1ZXJpZXM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9iLmxhYmVsID0gNDtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKF9hIDwgcXVlcmllc18xLmxlbmd0aCkpIHJldHVybiBbMyAvKmJyZWFrKi8sIDddO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBxdWVyeSA9IHF1ZXJpZXNfMVtfYV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5VmlldyA9IHRoaXMucXVlcnlWaWV3c0J5UXVlcnkuZ2V0KHF1ZXJ5KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXJ0KCEhcXVlcnlWaWV3LCBcIk5vIHF1ZXJ5IHZpZXcgZm91bmQgZm9yIFwiICsgcXVlcnkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLnN5bmNocm9uaXplVmlld0FuZENvbXB1dGVTbmFwc2hvdChxdWVyeVZpZXcpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZpZXdDaGFuZ2UgPSBfYi5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2aWV3Q2hhbmdlLnNuYXBzaG90KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdWaWV3U25hcHNob3RzLnB1c2godmlld0NoYW5nZS5zbmFwc2hvdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgX2IubGFiZWwgPSA2O1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2ErKztcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgNF07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA3OiByZXR1cm4gWzMgLypicmVhayovLCAxMl07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA4OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhc3NlcnQodGhpcy5pc1ByaW1hcnkgPT09IHRydWUsICdBIHNlY29uZGFyeSB0YWIgc2hvdWxkIG5ldmVyIGhhdmUgYW4gYWN0aXZlIHRhcmdldCB3aXRob3V0IGFuIGFjdGl2ZSBxdWVyeS4nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5sb2NhbFN0b3JlLmdldFRhcmdldCh0YXJnZXRJZCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgOTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0ID0gX2Iuc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhc3NlcnQoISF0YXJnZXQsIFwiVGFyZ2V0IGZvciBpZCBcIiArIHRhcmdldElkICsgXCIgbm90IGZvdW5kXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmxvY2FsU3RvcmUuYWxsb2NhdGVUYXJnZXQodGFyZ2V0KV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0RGF0YSA9IF9iLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5pbml0aWFsaXplVmlld0FuZENvbXB1dGVTbmFwc2hvdCh0aGlzLnN5bnRoZXNpemVUYXJnZXRUb1F1ZXJ5KHRhcmdldCksIHRhcmdldElkLCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qY3VycmVudD0qLyBmYWxzZSldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9iLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2IubGFiZWwgPSAxMjtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDEyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmVRdWVyaWVzLnB1c2godGFyZ2V0RGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9iLmxhYmVsID0gMTM7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxMzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2krKztcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgMV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxNDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zeW5jRW5naW5lTGlzdGVuZXIub25XYXRjaENoYW5nZShuZXdWaWV3U25hcHNob3RzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIGFjdGl2ZVF1ZXJpZXNdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYSBgUXVlcnlgIG9iamVjdCBmcm9tIHRoZSBzcGVjaWZpZWQgYFRhcmdldGAuIFRoZXJlIGlzIG5vIHdheSB0b1xyXG4gICAgICogb2J0YWluIHRoZSBvcmlnaW5hbCBgUXVlcnlgLCBzbyB3ZSBzeW50aGVzaXplIGEgYFF1ZXJ5YCBmcm9tIHRoZSBgVGFyZ2V0YFxyXG4gICAgICogb2JqZWN0LlxyXG4gICAgICpcclxuICAgICAqIFRoZSBzeW50aGVzaXplZCByZXN1bHQgbWlnaHQgYmUgZGlmZmVyZW50IGZyb20gdGhlIG9yaWdpbmFsIGBRdWVyeWAsIGJ1dFxyXG4gICAgICogc2luY2UgdGhlIHN5bnRoZXNpemVkIGBRdWVyeWAgc2hvdWxkIHJldHVybiB0aGUgc2FtZSByZXN1bHRzIGFzIHRoZVxyXG4gICAgICogb3JpZ2luYWwgb25lIChvbmx5IHRoZSBwcmVzZW50YXRpb24gb2YgcmVzdWx0cyBtaWdodCBkaWZmZXIpLCB0aGUgcG90ZW50aWFsXHJcbiAgICAgKiBkaWZmZXJlbmNlIHdpbGwgbm90IGNhdXNlIGlzc3Vlcy5cclxuICAgICAqL1xyXG4gICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS10YWIgb25seVxyXG4gICAgU3luY0VuZ2luZS5wcm90b3R5cGUuc3ludGhlc2l6ZVRhcmdldFRvUXVlcnkgPSBmdW5jdGlvbiAodGFyZ2V0KSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBRdWVyeSh0YXJnZXQucGF0aCwgdGFyZ2V0LmNvbGxlY3Rpb25Hcm91cCwgdGFyZ2V0Lm9yZGVyQnksIHRhcmdldC5maWx0ZXJzLCB0YXJnZXQubGltaXQsIExpbWl0VHlwZS5GaXJzdCwgdGFyZ2V0LnN0YXJ0QXQsIHRhcmdldC5lbmRBdCk7XHJcbiAgICB9O1xyXG4gICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS10YWIgb25seVxyXG4gICAgU3luY0VuZ2luZS5wcm90b3R5cGUuZ2V0QWN0aXZlQ2xpZW50cyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5sb2NhbFN0b3JlLmdldEFjdGl2ZUNsaWVudHMoKTtcclxuICAgIH07XHJcbiAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLXRhYiBvbmx5XHJcbiAgICBTeW5jRW5naW5lLnByb3RvdHlwZS5hcHBseVRhcmdldFN0YXRlID0gZnVuY3Rpb24gKHRhcmdldElkLCBzdGF0ZSwgZXJyb3IpIHtcclxuICAgICAgICByZXR1cm4gdHNsaWIuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBfYSwgY2hhbmdlcywgc3ludGhlc2l6ZWRSZW1vdGVFdmVudDtcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYikge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYi5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNQcmltYXJ5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiB3ZSByZWNlaXZlIGEgdGFyZ2V0IHN0YXRlIG5vdGlmaWNhdGlvbiB2aWEgV2ViU3RvcmFnZSwgd2UgYXJlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBlaXRoZXIgYWxyZWFkeSBzZWNvbmRhcnkgb3IgYW5vdGhlciB0YWIgaGFzIHRha2VuIHRoZSBwcmltYXJ5IGxlYXNlLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVidWcoTE9HX1RBRyQ5LCAnSWdub3JpbmcgdW5leHBlY3RlZCBxdWVyeSBzdGF0ZSBub3RpZmljYXRpb24uJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLnF1ZXJpZXNCeVRhcmdldFt0YXJnZXRJZF0pIHJldHVybiBbMyAvKmJyZWFrKi8sIDddO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYSA9IHN0YXRlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdjdXJyZW50JzogcmV0dXJuIFszIC8qYnJlYWsqLywgMV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdub3QtY3VycmVudCc6IHJldHVybiBbMyAvKmJyZWFrKi8sIDFdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAncmVqZWN0ZWQnOiByZXR1cm4gWzMgLypicmVhayovLCA0XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCA2XTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6IHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMubG9jYWxTdG9yZS5nZXROZXdEb2N1bWVudENoYW5nZXMoKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VzID0gX2Iuc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzeW50aGVzaXplZFJlbW90ZUV2ZW50ID0gUmVtb3RlRXZlbnQuY3JlYXRlU3ludGhlc2l6ZWRSZW1vdGVFdmVudEZvckN1cnJlbnRDaGFuZ2UodGFyZ2V0SWQsIHN0YXRlID09PSAnY3VycmVudCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmVtaXROZXdTbmFwc0FuZE5vdGlmeUxvY2FsU3RvcmUoY2hhbmdlcywgc3ludGhlc2l6ZWRSZW1vdGVFdmVudCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Iuc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCA3XTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6IHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMubG9jYWxTdG9yZS5yZWxlYXNlVGFyZ2V0KHRhcmdldElkLCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgLyoga2VlcFBlcnNpc3RlZFRhcmdldERhdGEgKi8gdHJ1ZSldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Iuc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUFuZENsZWFudXBUYXJnZXQodGFyZ2V0SWQsIGVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgN107XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA2OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmYWlsKCdVbmV4cGVjdGVkIHRhcmdldCBzdGF0ZTogJyArIHN0YXRlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2IubGFiZWwgPSA3O1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNzogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLXRhYiBvbmx5XHJcbiAgICBTeW5jRW5naW5lLnByb3RvdHlwZS5hcHBseUFjdGl2ZVRhcmdldHNDaGFuZ2UgPSBmdW5jdGlvbiAoYWRkZWQsIHJlbW92ZWQpIHtcclxuICAgICAgICByZXR1cm4gdHNsaWIuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBfaSwgYWRkZWRfMSwgdGFyZ2V0SWQsIHRhcmdldCwgdGFyZ2V0RGF0YSwgX2xvb3BfMSwgdGhpc18xLCBfYSwgcmVtb3ZlZF8xLCB0YXJnZXRJZDtcclxuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYikge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYi5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLmlzUHJpbWFyeSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9pID0gMCwgYWRkZWRfMSA9IGFkZGVkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYi5sYWJlbCA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShfaSA8IGFkZGVkXzEubGVuZ3RoKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgNl07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldElkID0gYWRkZWRfMVtfaV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFzc2VydCghdGhpcy5xdWVyaWVzQnlUYXJnZXRbdGFyZ2V0SWRdLCAnVHJ5aW5nIHRvIGFkZCBhbiBhbHJlYWR5IGFjdGl2ZSB0YXJnZXQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5sb2NhbFN0b3JlLmdldFRhcmdldCh0YXJnZXRJZCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0ID0gX2Iuc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhc3NlcnQoISF0YXJnZXQsIFwiUXVlcnkgZGF0YSBmb3IgYWN0aXZlIHRhcmdldCBcIiArIHRhcmdldElkICsgXCIgbm90IGZvdW5kXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmxvY2FsU3RvcmUuYWxsb2NhdGVUYXJnZXQodGFyZ2V0KV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXREYXRhID0gX2Iuc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmluaXRpYWxpemVWaWV3QW5kQ29tcHV0ZVNuYXBzaG90KHRoaXMuc3ludGhlc2l6ZVRhcmdldFRvUXVlcnkodGFyZ2V0KSwgdGFyZ2V0RGF0YS50YXJnZXRJZCwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKmN1cnJlbnQ9Ki8gZmFsc2UpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9iLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdGVTdG9yZS5saXN0ZW4odGFyZ2V0RGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9iLmxhYmVsID0gNTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9pKys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDFdO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2xvb3BfMSA9IGZ1bmN0aW9uICh0YXJnZXRJZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRzbGliLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgdGhhdCB0aGUgdGFyZ2V0IGlzIHN0aWxsIGFjdGl2ZSBzaW5jZSB0aGUgdGFyZ2V0IG1pZ2h0IGhhdmUgYmVlblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVtb3ZlZCBpZiBpdCBoYXMgYmVlbiByZWplY3RlZCBieSB0aGUgYmFja2VuZC5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGhpc18xLnF1ZXJpZXNCeVRhcmdldFt0YXJnZXRJZF0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgXCJjb250aW51ZVwiXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlbGVhc2UgcXVlcmllcyB0aGF0IGFyZSBzdGlsbCBhY3RpdmUuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzXzEubG9jYWxTdG9yZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVsZWFzZVRhcmdldCh0YXJnZXRJZCwgLyoga2VlcFBlcnNpc3RlZFRhcmdldERhdGEgKi8gZmFsc2UpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMucmVtb3RlU3RvcmUudW5saXN0ZW4odGFyZ2V0SWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5yZW1vdmVBbmRDbGVhbnVwVGFyZ2V0KHRhcmdldElkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY2F0Y2goaWdub3JlSWZQcmltYXJ5TGVhc2VMb3NzKV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlbGVhc2UgcXVlcmllcyB0aGF0IGFyZSBzdGlsbCBhY3RpdmUuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNfMSA9IHRoaXM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hID0gMCwgcmVtb3ZlZF8xID0gcmVtb3ZlZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2IubGFiZWwgPSA3O1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEoX2EgPCByZW1vdmVkXzEubGVuZ3RoKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgMTBdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRJZCA9IHJlbW92ZWRfMVtfYV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNSAvKnlpZWxkKiovLCBfbG9vcF8xKHRhcmdldElkKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA4OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYi5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9iLmxhYmVsID0gOTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDk6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hKys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDddO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTA6IHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS10YWIgb25seS4gSW4gb3RoZXIgY2xpZW50cywgTG9jYWxTdG9yZSBpcyB1bmF3YXJlIG9mXHJcbiAgICAvLyB0aGUgb25saW5lIHN0YXRlLlxyXG4gICAgU3luY0VuZ2luZS5wcm90b3R5cGUuZW5hYmxlTmV0d29yayA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmxvY2FsU3RvcmUuc2V0TmV0d29ya0VuYWJsZWQodHJ1ZSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucmVtb3RlU3RvcmUuZW5hYmxlTmV0d29yaygpO1xyXG4gICAgfTtcclxuICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktdGFiIG9ubHkuIEluIG90aGVyIGNsaWVudHMsIExvY2FsU3RvcmUgaXMgdW5hd2FyZSBvZlxyXG4gICAgLy8gdGhlIG9ubGluZSBzdGF0ZS5cclxuICAgIFN5bmNFbmdpbmUucHJvdG90eXBlLmRpc2FibGVOZXR3b3JrID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMubG9jYWxTdG9yZS5zZXROZXR3b3JrRW5hYmxlZChmYWxzZSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucmVtb3RlU3RvcmUuZGlzYWJsZU5ldHdvcmsoKTtcclxuICAgIH07XHJcbiAgICBTeW5jRW5naW5lLnByb3RvdHlwZS5nZXRSZW1vdGVLZXlzRm9yVGFyZ2V0ID0gZnVuY3Rpb24gKHRhcmdldElkKSB7XHJcbiAgICAgICAgdmFyIGxpbWJvUmVzb2x1dGlvbiA9IHRoaXMubGltYm9SZXNvbHV0aW9uc0J5VGFyZ2V0W3RhcmdldElkXTtcclxuICAgICAgICBpZiAobGltYm9SZXNvbHV0aW9uICYmIGxpbWJvUmVzb2x1dGlvbi5yZWNlaXZlZERvY3VtZW50KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBkb2N1bWVudEtleVNldCgpLmFkZChsaW1ib1Jlc29sdXRpb24ua2V5KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHZhciBrZXlTZXQgPSBkb2N1bWVudEtleVNldCgpO1xyXG4gICAgICAgICAgICB2YXIgcXVlcmllcyA9IHRoaXMucXVlcmllc0J5VGFyZ2V0W3RhcmdldElkXTtcclxuICAgICAgICAgICAgaWYgKCFxdWVyaWVzKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4ga2V5U2V0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgcXVlcmllc18yID0gcXVlcmllczsgX2kgPCBxdWVyaWVzXzIubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcXVlcnkgPSBxdWVyaWVzXzJbX2ldO1xyXG4gICAgICAgICAgICAgICAgdmFyIHF1ZXJ5VmlldyA9IHRoaXMucXVlcnlWaWV3c0J5UXVlcnkuZ2V0KHF1ZXJ5KTtcclxuICAgICAgICAgICAgICAgIGFzc2VydCghIXF1ZXJ5VmlldywgXCJObyBxdWVyeSB2aWV3IGZvdW5kIGZvciBcIiArIHF1ZXJ5KTtcclxuICAgICAgICAgICAgICAgIGtleVNldCA9IGtleVNldC51bmlvbldpdGgocXVlcnlWaWV3LnZpZXcuc3luY2VkRG9jdW1lbnRzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4ga2V5U2V0O1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICByZXR1cm4gU3luY0VuZ2luZTtcclxufSgpKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBTaW1wbGUgd3JhcHBlciBhcm91bmQgYSBudWxsYWJsZSBVSUQuIE1vc3RseSBleGlzdHMgdG8gbWFrZSBjb2RlIG1vcmVcclxuICogcmVhZGFibGUuXHJcbiAqL1xyXG52YXIgVXNlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFVzZXIodWlkKSB7XHJcbiAgICAgICAgdGhpcy51aWQgPSB1aWQ7XHJcbiAgICB9XHJcbiAgICBVc2VyLnByb3RvdHlwZS5pc0F1dGhlbnRpY2F0ZWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudWlkICE9IG51bGw7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIGEga2V5IHJlcHJlc2VudGluZyB0aGlzIHVzZXIsIHN1aXRhYmxlIGZvciBpbmNsdXNpb24gaW4gYVxyXG4gICAgICogZGljdGlvbmFyeS5cclxuICAgICAqL1xyXG4gICAgVXNlci5wcm90b3R5cGUudG9LZXkgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNBdXRoZW50aWNhdGVkKCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuICd1aWQ6JyArIHRoaXMudWlkO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuICdhbm9ueW1vdXMtdXNlcic7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFVzZXIucHJvdG90eXBlLmlzRXF1YWwgPSBmdW5jdGlvbiAob3RoZXJVc2VyKSB7XHJcbiAgICAgICAgcmV0dXJuIG90aGVyVXNlci51aWQgPT09IHRoaXMudWlkO1xyXG4gICAgfTtcclxuICAgIC8qKiBBIHVzZXIgd2l0aCBhIG51bGwgVUlELiAqL1xyXG4gICAgVXNlci5VTkFVVEhFTlRJQ0FURUQgPSBuZXcgVXNlcihudWxsKTtcclxuICAgIC8vIFRPRE8obWlrZWxlaGVuKTogTG9vayBpbnRvIGdldHRpbmcgYSBwcm9wZXIgdWlkLWVxdWl2YWxlbnQgZm9yXHJcbiAgICAvLyBub24tRmlyZWJhc2VBdXRoIHByb3ZpZGVycy5cclxuICAgIFVzZXIuR09PR0xFX0NSRURFTlRJQUxTID0gbmV3IFVzZXIoJ2dvb2dsZS1jcmVkZW50aWFscy11aWQnKTtcclxuICAgIFVzZXIuRklSU1RfUEFSVFkgPSBuZXcgVXNlcignZmlyc3QtcGFydHktdWlkJyk7XHJcbiAgICByZXR1cm4gVXNlcjtcclxufSgpKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8vIFRoZSBmb3JtYXQgb2YgdGhlIExvY2FsU3RvcmFnZSBrZXkgdGhhdCBzdG9yZXMgdGhlIGNsaWVudCBzdGF0ZSBpczpcclxuLy8gICAgIGZpcmVzdG9yZV9jbGllbnRzXzxwZXJzaXN0ZW5jZV9wcmVmaXg+XzxpbnN0YW5jZV9rZXk+XHJcbnZhciBDTElFTlRfU1RBVEVfS0VZX1BSRUZJWCA9ICdmaXJlc3RvcmVfY2xpZW50cyc7XHJcbi8qKiBBc3NlbWJsZXMgdGhlIGtleSBmb3IgYSBjbGllbnQgc3RhdGUgaW4gV2ViU3RvcmFnZSAqL1xyXG5mdW5jdGlvbiBjcmVhdGVXZWJTdG9yYWdlQ2xpZW50U3RhdGVLZXkocGVyc2lzdGVuY2VLZXksIGNsaWVudElkKSB7XHJcbiAgICBhc3NlcnQoY2xpZW50SWQuaW5kZXhPZignXycpID09PSAtMSwgXCJDbGllbnQga2V5IGNhbm5vdCBjb250YWluICdfJywgYnV0IHdhcyAnXCIgKyBjbGllbnRJZCArIFwiJ1wiKTtcclxuICAgIHJldHVybiBDTElFTlRfU1RBVEVfS0VZX1BSRUZJWCArIFwiX1wiICsgcGVyc2lzdGVuY2VLZXkgKyBcIl9cIiArIGNsaWVudElkO1xyXG59XHJcbi8vIFRoZSBmb3JtYXQgb2YgdGhlIFdlYlN0b3JhZ2Uga2V5IHRoYXQgc3RvcmVzIHRoZSBtdXRhdGlvbiBzdGF0ZSBpczpcclxuLy8gICAgIGZpcmVzdG9yZV9tdXRhdGlvbnNfPHBlcnNpc3RlbmNlX3ByZWZpeD5fPGJhdGNoX2lkPlxyXG4vLyAgICAgKGZvciB1bmF1dGhlbnRpY2F0ZWQgdXNlcnMpXHJcbi8vIG9yOiBmaXJlc3RvcmVfbXV0YXRpb25zXzxwZXJzaXN0ZW5jZV9wcmVmaXg+XzxiYXRjaF9pZD5fPHVzZXJfdWlkPlxyXG4vL1xyXG4vLyAndXNlcl91aWQnIGlzIGxhc3QgdG8gYXZvaWQgbmVlZGluZyB0byBlc2NhcGUgJ18nIGNoYXJhY3RlcnMgdGhhdCBpdCBtaWdodFxyXG4vLyBjb250YWluLlxyXG52YXIgTVVUQVRJT05fQkFUQ0hfS0VZX1BSRUZJWCA9ICdmaXJlc3RvcmVfbXV0YXRpb25zJztcclxuLyoqIEFzc2VtYmxlcyB0aGUga2V5IGZvciBhIG11dGF0aW9uIGJhdGNoIGluIFdlYlN0b3JhZ2UgKi9cclxuZnVuY3Rpb24gY3JlYXRlV2ViU3RvcmFnZU11dGF0aW9uQmF0Y2hLZXkocGVyc2lzdGVuY2VLZXksIHVzZXIsIGJhdGNoSWQpIHtcclxuICAgIHZhciBtdXRhdGlvbktleSA9IE1VVEFUSU9OX0JBVENIX0tFWV9QUkVGSVggKyBcIl9cIiArIHBlcnNpc3RlbmNlS2V5ICsgXCJfXCIgKyBiYXRjaElkO1xyXG4gICAgaWYgKHVzZXIuaXNBdXRoZW50aWNhdGVkKCkpIHtcclxuICAgICAgICBtdXRhdGlvbktleSArPSBcIl9cIiArIHVzZXIudWlkO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG11dGF0aW9uS2V5O1xyXG59XHJcbi8vIFRoZSBmb3JtYXQgb2YgdGhlIFdlYlN0b3JhZ2Uga2V5IHRoYXQgc3RvcmVzIGEgcXVlcnkgdGFyZ2V0J3MgbWV0YWRhdGEgaXM6XHJcbi8vICAgICBmaXJlc3RvcmVfdGFyZ2V0c188cGVyc2lzdGVuY2VfcHJlZml4Pl88dGFyZ2V0X2lkPlxyXG52YXIgUVVFUllfVEFSR0VUX0tFWV9QUkVGSVggPSAnZmlyZXN0b3JlX3RhcmdldHMnO1xyXG4vKiogQXNzZW1ibGVzIHRoZSBrZXkgZm9yIGEgcXVlcnkgc3RhdGUgaW4gV2ViU3RvcmFnZSAqL1xyXG5mdW5jdGlvbiBjcmVhdGVXZWJTdG9yYWdlUXVlcnlUYXJnZXRNZXRhZGF0YUtleShwZXJzaXN0ZW5jZUtleSwgdGFyZ2V0SWQpIHtcclxuICAgIHJldHVybiBRVUVSWV9UQVJHRVRfS0VZX1BSRUZJWCArIFwiX1wiICsgcGVyc2lzdGVuY2VLZXkgKyBcIl9cIiArIHRhcmdldElkO1xyXG59XHJcbi8vIFRoZSBXZWJTdG9yYWdlIHByZWZpeCB0aGF0IHN0b3JlcyB0aGUgcHJpbWFyeSB0YWIncyBvbmxpbmUgc3RhdGUuIFRoZVxyXG4vLyBmb3JtYXQgb2YgdGhlIGtleSBpczpcclxuLy8gICAgIGZpcmVzdG9yZV9vbmxpbmVfc3RhdGVfPHBlcnNpc3RlbmNlX3ByZWZpeD5cclxudmFyIE9OTElORV9TVEFURV9LRVlfUFJFRklYID0gJ2ZpcmVzdG9yZV9vbmxpbmVfc3RhdGUnO1xyXG4vKiogQXNzZW1ibGVzIHRoZSBrZXkgZm9yIHRoZSBvbmxpbmUgc3RhdGUgb2YgdGhlIHByaW1hcnkgdGFiLiAqL1xyXG5mdW5jdGlvbiBjcmVhdGVXZWJTdG9yYWdlT25saW5lU3RhdGVLZXkocGVyc2lzdGVuY2VLZXkpIHtcclxuICAgIHJldHVybiBPTkxJTkVfU1RBVEVfS0VZX1BSRUZJWCArIFwiX1wiICsgcGVyc2lzdGVuY2VLZXk7XHJcbn1cclxuLy8gVGhlIFdlYlN0b3JhZ2Uga2V5IHByZWZpeCBmb3IgdGhlIGtleSB0aGF0IHN0b3JlcyB0aGUgbGFzdCBzZXF1ZW5jZSBudW1iZXIgYWxsb2NhdGVkLiBUaGUga2V5XHJcbi8vIGxvb2tzIGxpa2UgJ2ZpcmVzdG9yZV9zZXF1ZW5jZV9udW1iZXJfPHBlcnNpc3RlbmNlX3ByZWZpeD4nLlxyXG52YXIgU0VRVUVOQ0VfTlVNQkVSX0tFWV9QUkVGSVggPSAnZmlyZXN0b3JlX3NlcXVlbmNlX251bWJlcic7XHJcbi8qKiBBc3NlbWJsZXMgdGhlIGtleSBmb3IgdGhlIGN1cnJlbnQgc2VxdWVuY2UgbnVtYmVyLiAqL1xyXG5mdW5jdGlvbiBjcmVhdGVXZWJTdG9yYWdlU2VxdWVuY2VOdW1iZXJLZXkocGVyc2lzdGVuY2VLZXkpIHtcclxuICAgIHJldHVybiBTRVFVRU5DRV9OVU1CRVJfS0VZX1BSRUZJWCArIFwiX1wiICsgcGVyc2lzdGVuY2VLZXk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnZhciBMT0dfVEFHJGEgPSAnU2hhcmVkQ2xpZW50U3RhdGUnO1xyXG4vKipcclxuICogSG9sZHMgdGhlIHN0YXRlIG9mIGEgbXV0YXRpb24gYmF0Y2gsIGluY2x1ZGluZyBpdHMgdXNlciBJRCwgYmF0Y2ggSUQgYW5kXHJcbiAqIHdoZXRoZXIgdGhlIGJhdGNoIGlzICdwZW5kaW5nJywgJ2Fja25vd2xlZGdlZCcgb3IgJ3JlamVjdGVkJy5cclxuICovXHJcbi8vIFZpc2libGUgZm9yIHRlc3RpbmdcclxudmFyIE11dGF0aW9uTWV0YWRhdGEgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBNdXRhdGlvbk1ldGFkYXRhKHVzZXIsIGJhdGNoSWQsIHN0YXRlLCBlcnJvcikge1xyXG4gICAgICAgIHRoaXMudXNlciA9IHVzZXI7XHJcbiAgICAgICAgdGhpcy5iYXRjaElkID0gYmF0Y2hJZDtcclxuICAgICAgICB0aGlzLnN0YXRlID0gc3RhdGU7XHJcbiAgICAgICAgdGhpcy5lcnJvciA9IGVycm9yO1xyXG4gICAgICAgIGFzc2VydCgoZXJyb3IgIT09IHVuZGVmaW5lZCkgPT09IChzdGF0ZSA9PT0gJ3JlamVjdGVkJyksIFwiTXV0YXRpb25NZXRhZGF0YSBtdXN0IGNvbnRhaW4gYW4gZXJyb3IgaWZmIHN0YXRlIGlzICdyZWplY3RlZCdcIik7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFBhcnNlcyBhIE11dGF0aW9uTWV0YWRhdGEgZnJvbSBpdHMgSlNPTiByZXByZXNlbnRhdGlvbiBpbiBXZWJTdG9yYWdlLlxyXG4gICAgICogTG9ncyBhIHdhcm5pbmcgYW5kIHJldHVybnMgbnVsbCBpZiB0aGUgZm9ybWF0IG9mIHRoZSBkYXRhIGlzIG5vdCB2YWxpZC5cclxuICAgICAqL1xyXG4gICAgTXV0YXRpb25NZXRhZGF0YS5mcm9tV2ViU3RvcmFnZUVudHJ5ID0gZnVuY3Rpb24gKHVzZXIsIGJhdGNoSWQsIHZhbHVlKSB7XHJcbiAgICAgICAgdmFyIG11dGF0aW9uQmF0Y2ggPSBKU09OLnBhcnNlKHZhbHVlKTtcclxuICAgICAgICB2YXIgdmFsaWREYXRhID0gdHlwZW9mIG11dGF0aW9uQmF0Y2ggPT09ICdvYmplY3QnICYmXHJcbiAgICAgICAgICAgIFsncGVuZGluZycsICdhY2tub3dsZWRnZWQnLCAncmVqZWN0ZWQnXS5pbmRleE9mKG11dGF0aW9uQmF0Y2guc3RhdGUpICE9PVxyXG4gICAgICAgICAgICAgICAgLTEgJiZcclxuICAgICAgICAgICAgKG11dGF0aW9uQmF0Y2guZXJyb3IgPT09IHVuZGVmaW5lZCB8fFxyXG4gICAgICAgICAgICAgICAgdHlwZW9mIG11dGF0aW9uQmF0Y2guZXJyb3IgPT09ICdvYmplY3QnKTtcclxuICAgICAgICB2YXIgZmlyZXN0b3JlRXJyb3IgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgaWYgKHZhbGlkRGF0YSAmJiBtdXRhdGlvbkJhdGNoLmVycm9yKSB7XHJcbiAgICAgICAgICAgIHZhbGlkRGF0YSA9XHJcbiAgICAgICAgICAgICAgICB0eXBlb2YgbXV0YXRpb25CYXRjaC5lcnJvci5tZXNzYWdlID09PSAnc3RyaW5nJyAmJlxyXG4gICAgICAgICAgICAgICAgICAgIHR5cGVvZiBtdXRhdGlvbkJhdGNoLmVycm9yLmNvZGUgPT09ICdzdHJpbmcnO1xyXG4gICAgICAgICAgICBpZiAodmFsaWREYXRhKSB7XHJcbiAgICAgICAgICAgICAgICBmaXJlc3RvcmVFcnJvciA9IG5ldyBGaXJlc3RvcmVFcnJvcihtdXRhdGlvbkJhdGNoLmVycm9yLmNvZGUsIG11dGF0aW9uQmF0Y2guZXJyb3IubWVzc2FnZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHZhbGlkRGF0YSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IE11dGF0aW9uTWV0YWRhdGEodXNlciwgYmF0Y2hJZCwgbXV0YXRpb25CYXRjaC5zdGF0ZSwgZmlyZXN0b3JlRXJyb3IpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgZXJyb3IoTE9HX1RBRyRhLCBcIkZhaWxlZCB0byBwYXJzZSBtdXRhdGlvbiBzdGF0ZSBmb3IgSUQgJ1wiICsgYmF0Y2hJZCArIFwiJzogXCIgKyB2YWx1ZSk7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBNdXRhdGlvbk1ldGFkYXRhLnByb3RvdHlwZS50b1dlYlN0b3JhZ2VKU09OID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBiYXRjaE1ldGFkYXRhID0ge1xyXG4gICAgICAgICAgICBzdGF0ZTogdGhpcy5zdGF0ZSxcclxuICAgICAgICAgICAgdXBkYXRlVGltZU1zOiBEYXRlLm5vdygpIC8vIE1vZGlmeSB0aGUgZXhpc3RpbmcgdmFsdWUgdG8gdHJpZ2dlciB1cGRhdGUuXHJcbiAgICAgICAgfTtcclxuICAgICAgICBpZiAodGhpcy5lcnJvcikge1xyXG4gICAgICAgICAgICBiYXRjaE1ldGFkYXRhLmVycm9yID0ge1xyXG4gICAgICAgICAgICAgICAgY29kZTogdGhpcy5lcnJvci5jb2RlLFxyXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogdGhpcy5lcnJvci5tZXNzYWdlXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShiYXRjaE1ldGFkYXRhKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gTXV0YXRpb25NZXRhZGF0YTtcclxufSgpKTtcclxuLyoqXHJcbiAqIEhvbGRzIHRoZSBzdGF0ZSBvZiBhIHF1ZXJ5IHRhcmdldCwgaW5jbHVkaW5nIGl0cyB0YXJnZXQgSUQgYW5kIHdoZXRoZXIgdGhlXHJcbiAqIHRhcmdldCBpcyAnbm90LWN1cnJlbnQnLCAnY3VycmVudCcgb3IgJ3JlamVjdGVkJy5cclxuICovXHJcbi8vIFZpc2libGUgZm9yIHRlc3RpbmdcclxudmFyIFF1ZXJ5VGFyZ2V0TWV0YWRhdGEgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBRdWVyeVRhcmdldE1ldGFkYXRhKHRhcmdldElkLCBzdGF0ZSwgZXJyb3IpIHtcclxuICAgICAgICB0aGlzLnRhcmdldElkID0gdGFyZ2V0SWQ7XHJcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHN0YXRlO1xyXG4gICAgICAgIHRoaXMuZXJyb3IgPSBlcnJvcjtcclxuICAgICAgICBhc3NlcnQoKGVycm9yICE9PSB1bmRlZmluZWQpID09PSAoc3RhdGUgPT09ICdyZWplY3RlZCcpLCBcIlF1ZXJ5VGFyZ2V0TWV0YWRhdGEgbXVzdCBjb250YWluIGFuIGVycm9yIGlmZiBzdGF0ZSBpcyAncmVqZWN0ZWQnXCIpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBQYXJzZXMgYSBRdWVyeVRhcmdldE1ldGFkYXRhIGZyb20gaXRzIEpTT04gcmVwcmVzZW50YXRpb24gaW4gV2ViU3RvcmFnZS5cclxuICAgICAqIExvZ3MgYSB3YXJuaW5nIGFuZCByZXR1cm5zIG51bGwgaWYgdGhlIGZvcm1hdCBvZiB0aGUgZGF0YSBpcyBub3QgdmFsaWQuXHJcbiAgICAgKi9cclxuICAgIFF1ZXJ5VGFyZ2V0TWV0YWRhdGEuZnJvbVdlYlN0b3JhZ2VFbnRyeSA9IGZ1bmN0aW9uICh0YXJnZXRJZCwgdmFsdWUpIHtcclxuICAgICAgICB2YXIgdGFyZ2V0U3RhdGUgPSBKU09OLnBhcnNlKHZhbHVlKTtcclxuICAgICAgICB2YXIgdmFsaWREYXRhID0gdHlwZW9mIHRhcmdldFN0YXRlID09PSAnb2JqZWN0JyAmJlxyXG4gICAgICAgICAgICBbJ25vdC1jdXJyZW50JywgJ2N1cnJlbnQnLCAncmVqZWN0ZWQnXS5pbmRleE9mKHRhcmdldFN0YXRlLnN0YXRlKSAhPT1cclxuICAgICAgICAgICAgICAgIC0xICYmXHJcbiAgICAgICAgICAgICh0YXJnZXRTdGF0ZS5lcnJvciA9PT0gdW5kZWZpbmVkIHx8XHJcbiAgICAgICAgICAgICAgICB0eXBlb2YgdGFyZ2V0U3RhdGUuZXJyb3IgPT09ICdvYmplY3QnKTtcclxuICAgICAgICB2YXIgZmlyZXN0b3JlRXJyb3IgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgaWYgKHZhbGlkRGF0YSAmJiB0YXJnZXRTdGF0ZS5lcnJvcikge1xyXG4gICAgICAgICAgICB2YWxpZERhdGEgPVxyXG4gICAgICAgICAgICAgICAgdHlwZW9mIHRhcmdldFN0YXRlLmVycm9yLm1lc3NhZ2UgPT09ICdzdHJpbmcnICYmXHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZW9mIHRhcmdldFN0YXRlLmVycm9yLmNvZGUgPT09ICdzdHJpbmcnO1xyXG4gICAgICAgICAgICBpZiAodmFsaWREYXRhKSB7XHJcbiAgICAgICAgICAgICAgICBmaXJlc3RvcmVFcnJvciA9IG5ldyBGaXJlc3RvcmVFcnJvcih0YXJnZXRTdGF0ZS5lcnJvci5jb2RlLCB0YXJnZXRTdGF0ZS5lcnJvci5tZXNzYWdlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodmFsaWREYXRhKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgUXVlcnlUYXJnZXRNZXRhZGF0YSh0YXJnZXRJZCwgdGFyZ2V0U3RhdGUuc3RhdGUsIGZpcmVzdG9yZUVycm9yKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGVycm9yKExPR19UQUckYSwgXCJGYWlsZWQgdG8gcGFyc2UgdGFyZ2V0IHN0YXRlIGZvciBJRCAnXCIgKyB0YXJnZXRJZCArIFwiJzogXCIgKyB2YWx1ZSk7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBRdWVyeVRhcmdldE1ldGFkYXRhLnByb3RvdHlwZS50b1dlYlN0b3JhZ2VKU09OID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciB0YXJnZXRTdGF0ZSA9IHtcclxuICAgICAgICAgICAgc3RhdGU6IHRoaXMuc3RhdGUsXHJcbiAgICAgICAgICAgIHVwZGF0ZVRpbWVNczogRGF0ZS5ub3coKSAvLyBNb2RpZnkgdGhlIGV4aXN0aW5nIHZhbHVlIHRvIHRyaWdnZXIgdXBkYXRlLlxyXG4gICAgICAgIH07XHJcbiAgICAgICAgaWYgKHRoaXMuZXJyb3IpIHtcclxuICAgICAgICAgICAgdGFyZ2V0U3RhdGUuZXJyb3IgPSB7XHJcbiAgICAgICAgICAgICAgICBjb2RlOiB0aGlzLmVycm9yLmNvZGUsXHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiB0aGlzLmVycm9yLm1lc3NhZ2VcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHRhcmdldFN0YXRlKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gUXVlcnlUYXJnZXRNZXRhZGF0YTtcclxufSgpKTtcclxuLyoqXHJcbiAqIFRoaXMgY2xhc3MgcmVwcmVzZW50cyB0aGUgaW1tdXRhYmxlIENsaWVudFN0YXRlIGZvciBhIGNsaWVudCByZWFkIGZyb21cclxuICogV2ViU3RvcmFnZSwgY29udGFpbmluZyB0aGUgbGlzdCBvZiBhY3RpdmUgcXVlcnkgdGFyZ2V0cy5cclxuICovXHJcbnZhciBSZW1vdGVDbGllbnRTdGF0ZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFJlbW90ZUNsaWVudFN0YXRlKGNsaWVudElkLCBhY3RpdmVUYXJnZXRJZHMpIHtcclxuICAgICAgICB0aGlzLmNsaWVudElkID0gY2xpZW50SWQ7XHJcbiAgICAgICAgdGhpcy5hY3RpdmVUYXJnZXRJZHMgPSBhY3RpdmVUYXJnZXRJZHM7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFBhcnNlcyBhIFJlbW90ZUNsaWVudFN0YXRlIGZyb20gdGhlIEpTT04gcmVwcmVzZW50YXRpb24gaW4gV2ViU3RvcmFnZS5cclxuICAgICAqIExvZ3MgYSB3YXJuaW5nIGFuZCByZXR1cm5zIG51bGwgaWYgdGhlIGZvcm1hdCBvZiB0aGUgZGF0YSBpcyBub3QgdmFsaWQuXHJcbiAgICAgKi9cclxuICAgIFJlbW90ZUNsaWVudFN0YXRlLmZyb21XZWJTdG9yYWdlRW50cnkgPSBmdW5jdGlvbiAoY2xpZW50SWQsIHZhbHVlKSB7XHJcbiAgICAgICAgdmFyIGNsaWVudFN0YXRlID0gSlNPTi5wYXJzZSh2YWx1ZSk7XHJcbiAgICAgICAgdmFyIHZhbGlkRGF0YSA9IHR5cGVvZiBjbGllbnRTdGF0ZSA9PT0gJ29iamVjdCcgJiZcclxuICAgICAgICAgICAgY2xpZW50U3RhdGUuYWN0aXZlVGFyZ2V0SWRzIGluc3RhbmNlb2YgQXJyYXk7XHJcbiAgICAgICAgdmFyIGFjdGl2ZVRhcmdldElkc1NldCA9IHRhcmdldElkU2V0KCk7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IHZhbGlkRGF0YSAmJiBpIDwgY2xpZW50U3RhdGUuYWN0aXZlVGFyZ2V0SWRzLmxlbmd0aDsgKytpKSB7XHJcbiAgICAgICAgICAgIHZhbGlkRGF0YSA9IGlzU2FmZUludGVnZXIoY2xpZW50U3RhdGUuYWN0aXZlVGFyZ2V0SWRzW2ldKTtcclxuICAgICAgICAgICAgYWN0aXZlVGFyZ2V0SWRzU2V0ID0gYWN0aXZlVGFyZ2V0SWRzU2V0LmFkZChjbGllbnRTdGF0ZS5hY3RpdmVUYXJnZXRJZHNbaV0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodmFsaWREYXRhKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgUmVtb3RlQ2xpZW50U3RhdGUoY2xpZW50SWQsIGFjdGl2ZVRhcmdldElkc1NldCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBlcnJvcihMT0dfVEFHJGEsIFwiRmFpbGVkIHRvIHBhcnNlIGNsaWVudCBkYXRhIGZvciBpbnN0YW5jZSAnXCIgKyBjbGllbnRJZCArIFwiJzogXCIgKyB2YWx1ZSk7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICByZXR1cm4gUmVtb3RlQ2xpZW50U3RhdGU7XHJcbn0oKSk7XHJcbi8qKlxyXG4gKiBUaGlzIGNsYXNzIHJlcHJlc2VudHMgdGhlIG9ubGluZSBzdGF0ZSBmb3IgYWxsIGNsaWVudHMgcGFydGljaXBhdGluZyBpblxyXG4gKiBtdWx0aS10YWIuIFRoZSBvbmxpbmUgc3RhdGUgaXMgb25seSB3cml0dGVuIHRvIGJ5IHRoZSBwcmltYXJ5IGNsaWVudCwgYW5kXHJcbiAqIHVzZWQgaW4gc2Vjb25kYXJ5IGNsaWVudHMgdG8gdXBkYXRlIHRoZWlyIHF1ZXJ5IHZpZXdzLlxyXG4gKi9cclxudmFyIFNoYXJlZE9ubGluZVN0YXRlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gU2hhcmVkT25saW5lU3RhdGUoY2xpZW50SWQsIG9ubGluZVN0YXRlKSB7XHJcbiAgICAgICAgdGhpcy5jbGllbnRJZCA9IGNsaWVudElkO1xyXG4gICAgICAgIHRoaXMub25saW5lU3RhdGUgPSBvbmxpbmVTdGF0ZTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogUGFyc2VzIGEgU2hhcmVkT25saW5lU3RhdGUgZnJvbSBpdHMgSlNPTiByZXByZXNlbnRhdGlvbiBpbiBXZWJTdG9yYWdlLlxyXG4gICAgICogTG9ncyBhIHdhcm5pbmcgYW5kIHJldHVybnMgbnVsbCBpZiB0aGUgZm9ybWF0IG9mIHRoZSBkYXRhIGlzIG5vdCB2YWxpZC5cclxuICAgICAqL1xyXG4gICAgU2hhcmVkT25saW5lU3RhdGUuZnJvbVdlYlN0b3JhZ2VFbnRyeSA9IGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgIHZhciBvbmxpbmVTdGF0ZSA9IEpTT04ucGFyc2UodmFsdWUpO1xyXG4gICAgICAgIHZhciB2YWxpZERhdGEgPSB0eXBlb2Ygb25saW5lU3RhdGUgPT09ICdvYmplY3QnICYmXHJcbiAgICAgICAgICAgIG9ubGluZVN0YXRlLm9ubGluZVN0YXRlIGluIE9ubGluZVN0YXRlICYmXHJcbiAgICAgICAgICAgIHR5cGVvZiBvbmxpbmVTdGF0ZS5jbGllbnRJZCA9PT0gJ3N0cmluZyc7XHJcbiAgICAgICAgaWYgKHZhbGlkRGF0YSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFNoYXJlZE9ubGluZVN0YXRlKG9ubGluZVN0YXRlLmNsaWVudElkLCBPbmxpbmVTdGF0ZVtvbmxpbmVTdGF0ZS5vbmxpbmVTdGF0ZV0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgZXJyb3IoTE9HX1RBRyRhLCBcIkZhaWxlZCB0byBwYXJzZSBvbmxpbmUgc3RhdGU6IFwiICsgdmFsdWUpO1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFNoYXJlZE9ubGluZVN0YXRlO1xyXG59KCkpO1xyXG4vKipcclxuICogTWV0YWRhdGEgc3RhdGUgb2YgdGhlIGxvY2FsIGNsaWVudC4gVW5saWtlIGBSZW1vdGVDbGllbnRTdGF0ZWAsIHRoaXMgY2xhc3MgaXNcclxuICogbXV0YWJsZSBhbmQga2VlcHMgdHJhY2sgb2YgYWxsIHBlbmRpbmcgbXV0YXRpb25zLCB3aGljaCBhbGxvd3MgdXMgdG9cclxuICogdXBkYXRlIHRoZSByYW5nZSBvZiBwZW5kaW5nIG11dGF0aW9uIGJhdGNoIElEcyBhcyBuZXcgbXV0YXRpb25zIGFyZSBhZGRlZCBvclxyXG4gKiByZW1vdmVkLlxyXG4gKlxyXG4gKiBUaGUgZGF0YSBpbiBgTG9jYWxDbGllbnRTdGF0ZWAgaXMgbm90IHJlYWQgZnJvbSBXZWJTdG9yYWdlIGFuZCBpbnN0ZWFkXHJcbiAqIHVwZGF0ZWQgdmlhIGl0cyBpbnN0YW5jZSBtZXRob2RzLiBUaGUgdXBkYXRlZCBzdGF0ZSBjYW4gYmUgc2VyaWFsaXplZCB2aWFcclxuICogYHRvV2ViU3RvcmFnZUpTT04oKWAuXHJcbiAqL1xyXG4vLyBWaXNpYmxlIGZvciB0ZXN0aW5nLlxyXG52YXIgTG9jYWxDbGllbnRTdGF0ZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIExvY2FsQ2xpZW50U3RhdGUoKSB7XHJcbiAgICAgICAgdGhpcy5hY3RpdmVUYXJnZXRJZHMgPSB0YXJnZXRJZFNldCgpO1xyXG4gICAgfVxyXG4gICAgTG9jYWxDbGllbnRTdGF0ZS5wcm90b3R5cGUuYWRkUXVlcnlUYXJnZXQgPSBmdW5jdGlvbiAodGFyZ2V0SWQpIHtcclxuICAgICAgICB0aGlzLmFjdGl2ZVRhcmdldElkcyA9IHRoaXMuYWN0aXZlVGFyZ2V0SWRzLmFkZCh0YXJnZXRJZCk7XHJcbiAgICB9O1xyXG4gICAgTG9jYWxDbGllbnRTdGF0ZS5wcm90b3R5cGUucmVtb3ZlUXVlcnlUYXJnZXQgPSBmdW5jdGlvbiAodGFyZ2V0SWQpIHtcclxuICAgICAgICB0aGlzLmFjdGl2ZVRhcmdldElkcyA9IHRoaXMuYWN0aXZlVGFyZ2V0SWRzLmRlbGV0ZSh0YXJnZXRJZCk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBDb252ZXJ0cyB0aGlzIGVudHJ5IGludG8gYSBKU09OLWVuY29kZWQgZm9ybWF0IHdlIGNhbiB1c2UgZm9yIFdlYlN0b3JhZ2UuXHJcbiAgICAgKiBEb2VzIG5vdCBlbmNvZGUgYGNsaWVudElkYCBhcyBpdCBpcyBwYXJ0IG9mIHRoZSBrZXkgaW4gV2ViU3RvcmFnZS5cclxuICAgICAqL1xyXG4gICAgTG9jYWxDbGllbnRTdGF0ZS5wcm90b3R5cGUudG9XZWJTdG9yYWdlSlNPTiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgZGF0YSA9IHtcclxuICAgICAgICAgICAgYWN0aXZlVGFyZ2V0SWRzOiB0aGlzLmFjdGl2ZVRhcmdldElkcy50b0FycmF5KCksXHJcbiAgICAgICAgICAgIHVwZGF0ZVRpbWVNczogRGF0ZS5ub3coKSAvLyBNb2RpZnkgdGhlIGV4aXN0aW5nIHZhbHVlIHRvIHRyaWdnZXIgdXBkYXRlLlxyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGRhdGEpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBMb2NhbENsaWVudFN0YXRlO1xyXG59KCkpO1xyXG4vKipcclxuICogYFdlYlN0b3JhZ2VTaGFyZWRDbGllbnRTdGF0ZWAgdXNlcyBXZWJTdG9yYWdlICh3aW5kb3cubG9jYWxTdG9yYWdlKSBhcyB0aGVcclxuICogYmFja2luZyBzdG9yZSBmb3IgdGhlIFNoYXJlZENsaWVudFN0YXRlLiBJdCBrZWVwcyB0cmFjayBvZiBhbGwgYWN0aXZlXHJcbiAqIGNsaWVudHMgYW5kIHN1cHBvcnRzIG1vZGlmaWNhdGlvbnMgb2YgdGhlIGxvY2FsIGNsaWVudCdzIGRhdGEuXHJcbiAqL1xyXG52YXIgV2ViU3RvcmFnZVNoYXJlZENsaWVudFN0YXRlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gV2ViU3RvcmFnZVNoYXJlZENsaWVudFN0YXRlKHF1ZXVlLCBwbGF0Zm9ybSwgcGVyc2lzdGVuY2VLZXksIGxvY2FsQ2xpZW50SWQsIGluaXRpYWxVc2VyKSB7XHJcbiAgICAgICAgdGhpcy5xdWV1ZSA9IHF1ZXVlO1xyXG4gICAgICAgIHRoaXMucGxhdGZvcm0gPSBwbGF0Zm9ybTtcclxuICAgICAgICB0aGlzLnBlcnNpc3RlbmNlS2V5ID0gcGVyc2lzdGVuY2VLZXk7XHJcbiAgICAgICAgdGhpcy5sb2NhbENsaWVudElkID0gbG9jYWxDbGllbnRJZDtcclxuICAgICAgICB0aGlzLnN5bmNFbmdpbmUgPSBudWxsO1xyXG4gICAgICAgIHRoaXMub25saW5lU3RhdGVIYW5kbGVyID0gbnVsbDtcclxuICAgICAgICB0aGlzLnNlcXVlbmNlTnVtYmVySGFuZGxlciA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5hY3RpdmVDbGllbnRzID0ge307XHJcbiAgICAgICAgdGhpcy5zdG9yYWdlTGlzdGVuZXIgPSB0aGlzLmhhbmRsZVdlYlN0b3JhZ2VFdmVudC5iaW5kKHRoaXMpO1xyXG4gICAgICAgIHRoaXMuc3RhcnRlZCA9IGZhbHNlO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENhcHR1cmVzIFdlYlN0b3JhZ2UgZXZlbnRzIHRoYXQgb2NjdXIgYmVmb3JlIGBzdGFydCgpYCBpcyBjYWxsZWQuIFRoZXNlXHJcbiAgICAgICAgICogZXZlbnRzIGFyZSByZXBsYXllZCBvbmNlIGBXZWJTdG9yYWdlU2hhcmVkQ2xpZW50U3RhdGVgIGlzIHN0YXJ0ZWQuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5lYXJseUV2ZW50cyA9IFtdO1xyXG4gICAgICAgIGlmICghV2ViU3RvcmFnZVNoYXJlZENsaWVudFN0YXRlLmlzQXZhaWxhYmxlKHRoaXMucGxhdGZvcm0pKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLlVOSU1QTEVNRU5URUQsICdMb2NhbFN0b3JhZ2UgaXMgbm90IGF2YWlsYWJsZSBvbiB0aGlzIHBsYXRmb3JtLicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBFc2NhcGUgdGhlIHNwZWNpYWwgY2hhcmFjdGVycyBtZW50aW9uZWQgaGVyZTpcclxuICAgICAgICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L0d1aWRlL1JlZ3VsYXJfRXhwcmVzc2lvbnNcclxuICAgICAgICB2YXIgZXNjYXBlZFBlcnNpc3RlbmNlS2V5ID0gcGVyc2lzdGVuY2VLZXkucmVwbGFjZSgvWy4qKz9eJHt9KCl8W1xcXVxcXFxdL2csICdcXFxcJCYnKTtcclxuICAgICAgICB0aGlzLnN0b3JhZ2UgPSB0aGlzLnBsYXRmb3JtLndpbmRvdy5sb2NhbFN0b3JhZ2U7XHJcbiAgICAgICAgdGhpcy5jdXJyZW50VXNlciA9IGluaXRpYWxVc2VyO1xyXG4gICAgICAgIHRoaXMubG9jYWxDbGllbnRTdG9yYWdlS2V5ID0gY3JlYXRlV2ViU3RvcmFnZUNsaWVudFN0YXRlS2V5KHRoaXMucGVyc2lzdGVuY2VLZXksIHRoaXMubG9jYWxDbGllbnRJZCk7XHJcbiAgICAgICAgdGhpcy5zZXF1ZW5jZU51bWJlcktleSA9IGNyZWF0ZVdlYlN0b3JhZ2VTZXF1ZW5jZU51bWJlcktleSh0aGlzLnBlcnNpc3RlbmNlS2V5KTtcclxuICAgICAgICB0aGlzLmFjdGl2ZUNsaWVudHNbdGhpcy5sb2NhbENsaWVudElkXSA9IG5ldyBMb2NhbENsaWVudFN0YXRlKCk7XHJcbiAgICAgICAgdGhpcy5jbGllbnRTdGF0ZUtleVJlID0gbmV3IFJlZ0V4cChcIl5cIiArIENMSUVOVF9TVEFURV9LRVlfUFJFRklYICsgXCJfXCIgKyBlc2NhcGVkUGVyc2lzdGVuY2VLZXkgKyBcIl8oW15fXSopJFwiKTtcclxuICAgICAgICB0aGlzLm11dGF0aW9uQmF0Y2hLZXlSZSA9IG5ldyBSZWdFeHAoXCJeXCIgKyBNVVRBVElPTl9CQVRDSF9LRVlfUFJFRklYICsgXCJfXCIgKyBlc2NhcGVkUGVyc2lzdGVuY2VLZXkgKyBcIl8oXFxcXGQrKSg/Ol8oLiopKT8kXCIpO1xyXG4gICAgICAgIHRoaXMucXVlcnlUYXJnZXRLZXlSZSA9IG5ldyBSZWdFeHAoXCJeXCIgKyBRVUVSWV9UQVJHRVRfS0VZX1BSRUZJWCArIFwiX1wiICsgZXNjYXBlZFBlcnNpc3RlbmNlS2V5ICsgXCJfKFxcXFxkKykkXCIpO1xyXG4gICAgICAgIHRoaXMub25saW5lU3RhdGVLZXkgPSBjcmVhdGVXZWJTdG9yYWdlT25saW5lU3RhdGVLZXkodGhpcy5wZXJzaXN0ZW5jZUtleSk7XHJcbiAgICAgICAgLy8gUmF0aGVyIHRoYW4gYWRkaW5nIHRoZSBzdG9yYWdlIG9ic2VydmVyIGR1cmluZyBzdGFydCgpLCB3ZSBhZGQgdGhlXHJcbiAgICAgICAgLy8gc3RvcmFnZSBvYnNlcnZlciBkdXJpbmcgaW5pdGlhbGl6YXRpb24uIFRoaXMgZW5zdXJlcyB0aGF0IHdlIGNvbGxlY3RcclxuICAgICAgICAvLyBldmVudHMgYmVmb3JlIG90aGVyIGNvbXBvbmVudHMgcG9wdWxhdGUgdGhlaXIgaW5pdGlhbCBzdGF0ZSAoZHVyaW5nIHRoZWlyXHJcbiAgICAgICAgLy8gcmVzcGVjdGl2ZSBzdGFydCgpIGNhbGxzKS4gT3RoZXJ3aXNlLCB3ZSBtaWdodCBmb3IgZXhhbXBsZSBtaXNzIGFcclxuICAgICAgICAvLyBtdXRhdGlvbiB0aGF0IGlzIGFkZGVkIGFmdGVyIExvY2FsU3RvcmUncyBzdGFydCgpIHByb2Nlc3NlZCB0aGUgZXhpc3RpbmdcclxuICAgICAgICAvLyBtdXRhdGlvbnMgYnV0IGJlZm9yZSB3ZSBvYnNlcnZlIFdlYlN0b3JhZ2UgZXZlbnRzLlxyXG4gICAgICAgIHRoaXMucGxhdGZvcm0ud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3N0b3JhZ2UnLCB0aGlzLnN0b3JhZ2VMaXN0ZW5lcik7XHJcbiAgICB9XHJcbiAgICAvKiogUmV0dXJucyAndHJ1ZScgaWYgV2ViU3RvcmFnZSBpcyBhdmFpbGFibGUgaW4gdGhlIGN1cnJlbnQgZW52aXJvbm1lbnQuICovXHJcbiAgICBXZWJTdG9yYWdlU2hhcmVkQ2xpZW50U3RhdGUuaXNBdmFpbGFibGUgPSBmdW5jdGlvbiAocGxhdGZvcm0pIHtcclxuICAgICAgICByZXR1cm4gISEocGxhdGZvcm0ud2luZG93ICYmIHBsYXRmb3JtLndpbmRvdy5sb2NhbFN0b3JhZ2UgIT0gbnVsbCk7XHJcbiAgICB9O1xyXG4gICAgV2ViU3RvcmFnZVNoYXJlZENsaWVudFN0YXRlLnByb3RvdHlwZS5zdGFydCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdHNsaWIuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBleGlzdGluZ0NsaWVudHMsIF9pLCBleGlzdGluZ0NsaWVudHNfMSwgY2xpZW50SWQsIHN0b3JhZ2VJdGVtLCBjbGllbnRTdGF0ZSwgb25saW5lU3RhdGVKU09OLCBvbmxpbmVTdGF0ZSwgX2EsIF9iLCBldmVudF8xO1xyXG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgICAgICByZXR1cm4gdHNsaWIuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9jKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhc3NlcnQoIXRoaXMuc3RhcnRlZCwgJ1dlYlN0b3JhZ2VTaGFyZWRDbGllbnRTdGF0ZSBhbHJlYWR5IHN0YXJ0ZWQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXJ0KHRoaXMuc3luY0VuZ2luZSAhPT0gbnVsbCwgJ3N5bmNFbmdpbmUgcHJvcGVydHkgbXVzdCBiZSBzZXQgYmVmb3JlIGNhbGxpbmcgc3RhcnQoKScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhc3NlcnQodGhpcy5vbmxpbmVTdGF0ZUhhbmRsZXIgIT09IG51bGwsICdvbmxpbmVTdGF0ZUhhbmRsZXIgcHJvcGVydHkgbXVzdCBiZSBzZXQgYmVmb3JlIGNhbGxpbmcgc3RhcnQoKScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLnN5bmNFbmdpbmUuZ2V0QWN0aXZlQ2xpZW50cygpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4aXN0aW5nQ2xpZW50cyA9IF9jLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChfaSA9IDAsIGV4aXN0aW5nQ2xpZW50c18xID0gZXhpc3RpbmdDbGllbnRzOyBfaSA8IGV4aXN0aW5nQ2xpZW50c18xLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpZW50SWQgPSBleGlzdGluZ0NsaWVudHNfMVtfaV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2xpZW50SWQgPT09IHRoaXMubG9jYWxDbGllbnRJZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RvcmFnZUl0ZW0gPSB0aGlzLmdldEl0ZW0oY3JlYXRlV2ViU3RvcmFnZUNsaWVudFN0YXRlS2V5KHRoaXMucGVyc2lzdGVuY2VLZXksIGNsaWVudElkKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3RvcmFnZUl0ZW0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGllbnRTdGF0ZSA9IFJlbW90ZUNsaWVudFN0YXRlLmZyb21XZWJTdG9yYWdlRW50cnkoY2xpZW50SWQsIHN0b3JhZ2VJdGVtKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2xpZW50U3RhdGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3RpdmVDbGllbnRzW2NsaWVudFN0YXRlLmNsaWVudElkXSA9IGNsaWVudFN0YXRlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBlcnNpc3RDbGllbnRTdGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbmxpbmVTdGF0ZUpTT04gPSB0aGlzLnN0b3JhZ2UuZ2V0SXRlbSh0aGlzLm9ubGluZVN0YXRlS2V5KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9ubGluZVN0YXRlSlNPTikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25saW5lU3RhdGUgPSB0aGlzLmZyb21XZWJTdG9yYWdlT25saW5lU3RhdGUob25saW5lU3RhdGVKU09OKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvbmxpbmVTdGF0ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlT25saW5lU3RhdGVFdmVudChvbmxpbmVTdGF0ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChfYSA9IDAsIF9iID0gdGhpcy5lYXJseUV2ZW50czsgX2EgPCBfYi5sZW5ndGg7IF9hKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50XzEgPSBfYltfYV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZVdlYlN0b3JhZ2VFdmVudChldmVudF8xKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVhcmx5RXZlbnRzID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlZ2lzdGVyIGEgd2luZG93IHVubG9hZCBob29rIHRvIHJlbW92ZSB0aGUgY2xpZW50IG1ldGFkYXRhIGVudHJ5IGZyb21cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gV2ViU3RvcmFnZSBldmVuIGlmIGBzaHV0ZG93bigpYCB3YXMgbm90IGNhbGxlZC5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbGF0Zm9ybS53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigndW5sb2FkJywgZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMuc2h1dGRvd24oKTsgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhcnRlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgV2ViU3RvcmFnZVNoYXJlZENsaWVudFN0YXRlLnByb3RvdHlwZS53cml0ZVNlcXVlbmNlTnVtYmVyID0gZnVuY3Rpb24gKHNlcXVlbmNlTnVtYmVyKSB7XHJcbiAgICAgICAgdGhpcy5zZXRJdGVtKHRoaXMuc2VxdWVuY2VOdW1iZXJLZXksIEpTT04uc3RyaW5naWZ5KHNlcXVlbmNlTnVtYmVyKSk7XHJcbiAgICB9O1xyXG4gICAgV2ViU3RvcmFnZVNoYXJlZENsaWVudFN0YXRlLnByb3RvdHlwZS5nZXRBbGxBY3RpdmVRdWVyeVRhcmdldHMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGFjdGl2ZVRhcmdldHMgPSB0YXJnZXRJZFNldCgpO1xyXG4gICAgICAgIGZvckVhY2godGhpcy5hY3RpdmVDbGllbnRzLCBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xyXG4gICAgICAgICAgICBhY3RpdmVUYXJnZXRzID0gYWN0aXZlVGFyZ2V0cy51bmlvbldpdGgodmFsdWUuYWN0aXZlVGFyZ2V0SWRzKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gYWN0aXZlVGFyZ2V0cztcclxuICAgIH07XHJcbiAgICBXZWJTdG9yYWdlU2hhcmVkQ2xpZW50U3RhdGUucHJvdG90eXBlLmlzQWN0aXZlUXVlcnlUYXJnZXQgPSBmdW5jdGlvbiAodGFyZ2V0SWQpIHtcclxuICAgICAgICAvLyBUaGlzIGlzIG5vdCB1c2luZyBgb2JqLmZvckVhY2hgIHNpbmNlIGBmb3JFYWNoYCBkb2Vzbid0IHN1cHBvcnQgZWFybHlcclxuICAgICAgICAvLyByZXR1cm4uXHJcbiAgICAgICAgZm9yICh2YXIgY2xpZW50SWQgaW4gdGhpcy5hY3RpdmVDbGllbnRzKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmFjdGl2ZUNsaWVudHMuaGFzT3duUHJvcGVydHkoY2xpZW50SWQpKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5hY3RpdmVDbGllbnRzW2NsaWVudElkXS5hY3RpdmVUYXJnZXRJZHMuaGFzKHRhcmdldElkKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH07XHJcbiAgICBXZWJTdG9yYWdlU2hhcmVkQ2xpZW50U3RhdGUucHJvdG90eXBlLmFkZFBlbmRpbmdNdXRhdGlvbiA9IGZ1bmN0aW9uIChiYXRjaElkKSB7XHJcbiAgICAgICAgdGhpcy5wZXJzaXN0TXV0YXRpb25TdGF0ZShiYXRjaElkLCAncGVuZGluZycpO1xyXG4gICAgfTtcclxuICAgIFdlYlN0b3JhZ2VTaGFyZWRDbGllbnRTdGF0ZS5wcm90b3R5cGUudXBkYXRlTXV0YXRpb25TdGF0ZSA9IGZ1bmN0aW9uIChiYXRjaElkLCBzdGF0ZSwgZXJyb3IpIHtcclxuICAgICAgICB0aGlzLnBlcnNpc3RNdXRhdGlvblN0YXRlKGJhdGNoSWQsIHN0YXRlLCBlcnJvcik7XHJcbiAgICAgICAgLy8gT25jZSBhIGZpbmFsIG11dGF0aW9uIHJlc3VsdCBpcyBvYnNlcnZlZCBieSBvdGhlciBjbGllbnRzLCB0aGV5IG5vIGxvbmdlclxyXG4gICAgICAgIC8vIGFjY2VzcyB0aGUgbXV0YXRpb24ncyBtZXRhZGF0YSBlbnRyeS4gU2luY2UgV2ViU3RvcmFnZSByZXBsYXlzIGV2ZW50c1xyXG4gICAgICAgIC8vIGluIG9yZGVyLCBpdCBpcyBzYWZlIHRvIGRlbGV0ZSB0aGUgZW50cnkgcmlnaHQgYWZ0ZXIgdXBkYXRpbmcgaXQuXHJcbiAgICAgICAgdGhpcy5yZW1vdmVNdXRhdGlvblN0YXRlKGJhdGNoSWQpO1xyXG4gICAgfTtcclxuICAgIFdlYlN0b3JhZ2VTaGFyZWRDbGllbnRTdGF0ZS5wcm90b3R5cGUuYWRkTG9jYWxRdWVyeVRhcmdldCA9IGZ1bmN0aW9uICh0YXJnZXRJZCkge1xyXG4gICAgICAgIHZhciBxdWVyeVN0YXRlID0gJ25vdC1jdXJyZW50JztcclxuICAgICAgICAvLyBMb29rdXAgYW4gZXhpc3RpbmcgcXVlcnkgc3RhdGUgaWYgdGhlIHRhcmdldCBJRCB3YXMgYWxyZWFkeSByZWdpc3RlcmVkXHJcbiAgICAgICAgLy8gYnkgYW5vdGhlciB0YWJcclxuICAgICAgICBpZiAodGhpcy5pc0FjdGl2ZVF1ZXJ5VGFyZ2V0KHRhcmdldElkKSkge1xyXG4gICAgICAgICAgICB2YXIgc3RvcmFnZUl0ZW0gPSB0aGlzLnN0b3JhZ2UuZ2V0SXRlbShjcmVhdGVXZWJTdG9yYWdlUXVlcnlUYXJnZXRNZXRhZGF0YUtleSh0aGlzLnBlcnNpc3RlbmNlS2V5LCB0YXJnZXRJZCkpO1xyXG4gICAgICAgICAgICBpZiAoc3RvcmFnZUl0ZW0pIHtcclxuICAgICAgICAgICAgICAgIHZhciBtZXRhZGF0YSA9IFF1ZXJ5VGFyZ2V0TWV0YWRhdGEuZnJvbVdlYlN0b3JhZ2VFbnRyeSh0YXJnZXRJZCwgc3RvcmFnZUl0ZW0pO1xyXG4gICAgICAgICAgICAgICAgaWYgKG1ldGFkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcXVlcnlTdGF0ZSA9IG1ldGFkYXRhLnN0YXRlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMubG9jYWxDbGllbnRTdGF0ZS5hZGRRdWVyeVRhcmdldCh0YXJnZXRJZCk7XHJcbiAgICAgICAgdGhpcy5wZXJzaXN0Q2xpZW50U3RhdGUoKTtcclxuICAgICAgICByZXR1cm4gcXVlcnlTdGF0ZTtcclxuICAgIH07XHJcbiAgICBXZWJTdG9yYWdlU2hhcmVkQ2xpZW50U3RhdGUucHJvdG90eXBlLnJlbW92ZUxvY2FsUXVlcnlUYXJnZXQgPSBmdW5jdGlvbiAodGFyZ2V0SWQpIHtcclxuICAgICAgICB0aGlzLmxvY2FsQ2xpZW50U3RhdGUucmVtb3ZlUXVlcnlUYXJnZXQodGFyZ2V0SWQpO1xyXG4gICAgICAgIHRoaXMucGVyc2lzdENsaWVudFN0YXRlKCk7XHJcbiAgICB9O1xyXG4gICAgV2ViU3RvcmFnZVNoYXJlZENsaWVudFN0YXRlLnByb3RvdHlwZS5pc0xvY2FsUXVlcnlUYXJnZXQgPSBmdW5jdGlvbiAodGFyZ2V0SWQpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5sb2NhbENsaWVudFN0YXRlLmFjdGl2ZVRhcmdldElkcy5oYXModGFyZ2V0SWQpO1xyXG4gICAgfTtcclxuICAgIFdlYlN0b3JhZ2VTaGFyZWRDbGllbnRTdGF0ZS5wcm90b3R5cGUuY2xlYXJRdWVyeVN0YXRlID0gZnVuY3Rpb24gKHRhcmdldElkKSB7XHJcbiAgICAgICAgdGhpcy5yZW1vdmVJdGVtKGNyZWF0ZVdlYlN0b3JhZ2VRdWVyeVRhcmdldE1ldGFkYXRhS2V5KHRoaXMucGVyc2lzdGVuY2VLZXksIHRhcmdldElkKSk7XHJcbiAgICB9O1xyXG4gICAgV2ViU3RvcmFnZVNoYXJlZENsaWVudFN0YXRlLnByb3RvdHlwZS51cGRhdGVRdWVyeVN0YXRlID0gZnVuY3Rpb24gKHRhcmdldElkLCBzdGF0ZSwgZXJyb3IpIHtcclxuICAgICAgICB0aGlzLnBlcnNpc3RRdWVyeVRhcmdldFN0YXRlKHRhcmdldElkLCBzdGF0ZSwgZXJyb3IpO1xyXG4gICAgfTtcclxuICAgIFdlYlN0b3JhZ2VTaGFyZWRDbGllbnRTdGF0ZS5wcm90b3R5cGUuaGFuZGxlVXNlckNoYW5nZSA9IGZ1bmN0aW9uICh1c2VyLCByZW1vdmVkQmF0Y2hJZHMsIGFkZGVkQmF0Y2hJZHMpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHJlbW92ZWRCYXRjaElkcy5mb3JFYWNoKGZ1bmN0aW9uIChiYXRjaElkKSB7XHJcbiAgICAgICAgICAgIF90aGlzLnJlbW92ZU11dGF0aW9uU3RhdGUoYmF0Y2hJZCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5jdXJyZW50VXNlciA9IHVzZXI7XHJcbiAgICAgICAgYWRkZWRCYXRjaElkcy5mb3JFYWNoKGZ1bmN0aW9uIChiYXRjaElkKSB7XHJcbiAgICAgICAgICAgIF90aGlzLmFkZFBlbmRpbmdNdXRhdGlvbihiYXRjaElkKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBXZWJTdG9yYWdlU2hhcmVkQ2xpZW50U3RhdGUucHJvdG90eXBlLnNldE9ubGluZVN0YXRlID0gZnVuY3Rpb24gKG9ubGluZVN0YXRlKSB7XHJcbiAgICAgICAgdGhpcy5wZXJzaXN0T25saW5lU3RhdGUob25saW5lU3RhdGUpO1xyXG4gICAgfTtcclxuICAgIFdlYlN0b3JhZ2VTaGFyZWRDbGllbnRTdGF0ZS5wcm90b3R5cGUuc2h1dGRvd24gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuc3RhcnRlZCkge1xyXG4gICAgICAgICAgICB0aGlzLnBsYXRmb3JtLndpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdzdG9yYWdlJywgdGhpcy5zdG9yYWdlTGlzdGVuZXIpO1xyXG4gICAgICAgICAgICB0aGlzLnJlbW92ZUl0ZW0odGhpcy5sb2NhbENsaWVudFN0b3JhZ2VLZXkpO1xyXG4gICAgICAgICAgICB0aGlzLnN0YXJ0ZWQgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgV2ViU3RvcmFnZVNoYXJlZENsaWVudFN0YXRlLnByb3RvdHlwZS5nZXRJdGVtID0gZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgIHZhciB2YWx1ZSA9IHRoaXMuc3RvcmFnZS5nZXRJdGVtKGtleSk7XHJcbiAgICAgICAgZGVidWcoTE9HX1RBRyRhLCAnUkVBRCcsIGtleSwgdmFsdWUpO1xyXG4gICAgICAgIHJldHVybiB2YWx1ZTtcclxuICAgIH07XHJcbiAgICBXZWJTdG9yYWdlU2hhcmVkQ2xpZW50U3RhdGUucHJvdG90eXBlLnNldEl0ZW0gPSBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xyXG4gICAgICAgIGRlYnVnKExPR19UQUckYSwgJ1NFVCcsIGtleSwgdmFsdWUpO1xyXG4gICAgICAgIHRoaXMuc3RvcmFnZS5zZXRJdGVtKGtleSwgdmFsdWUpO1xyXG4gICAgfTtcclxuICAgIFdlYlN0b3JhZ2VTaGFyZWRDbGllbnRTdGF0ZS5wcm90b3R5cGUucmVtb3ZlSXRlbSA9IGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICBkZWJ1ZyhMT0dfVEFHJGEsICdSRU1PVkUnLCBrZXkpO1xyXG4gICAgICAgIHRoaXMuc3RvcmFnZS5yZW1vdmVJdGVtKGtleSk7XHJcbiAgICB9O1xyXG4gICAgV2ViU3RvcmFnZVNoYXJlZENsaWVudFN0YXRlLnByb3RvdHlwZS5oYW5kbGVXZWJTdG9yYWdlRXZlbnQgPSBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIGlmIChldmVudC5zdG9yYWdlQXJlYSA9PT0gdGhpcy5zdG9yYWdlKSB7XHJcbiAgICAgICAgICAgIGRlYnVnKExPR19UQUckYSwgJ0VWRU5UJywgZXZlbnQua2V5LCBldmVudC5uZXdWYWx1ZSk7XHJcbiAgICAgICAgICAgIGlmIChldmVudC5rZXkgPT09IHRoaXMubG9jYWxDbGllbnRTdG9yYWdlS2V5KSB7XHJcbiAgICAgICAgICAgICAgICBlcnJvcignUmVjZWl2ZWQgV2ViU3RvcmFnZSBub3RpZmljYXRpb24gZm9yIGxvY2FsIGNoYW5nZS4gQW5vdGhlciBjbGllbnQgbWlnaHQgaGF2ZSAnICtcclxuICAgICAgICAgICAgICAgICAgICAnZ2FyYmFnZS1jb2xsZWN0ZWQgb3VyIHN0YXRlJyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5xdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRzbGliLl9fYXdhaXRlcihfdGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHZhciBjbGllbnRTdGF0ZSwgY2xpZW50SWQsIG11dGF0aW9uTWV0YWRhdGEsIHF1ZXJ5VGFyZ2V0TWV0YWRhdGEsIG9ubGluZVN0YXRlLCBzZXF1ZW5jZU51bWJlcjtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0c2xpYi5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuc3RhcnRlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVhcmx5RXZlbnRzLnB1c2goZXZlbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChldmVudC5rZXkgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5jbGllbnRTdGF0ZUtleVJlLnRlc3QoZXZlbnQua2V5KSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXZlbnQubmV3VmFsdWUgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpZW50U3RhdGUgPSB0aGlzLmZyb21XZWJTdG9yYWdlQ2xpZW50U3RhdGUoZXZlbnQua2V5LCBldmVudC5uZXdWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2xpZW50U3RhdGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdGhpcy5oYW5kbGVDbGllbnRTdGF0ZUV2ZW50KGNsaWVudFN0YXRlLmNsaWVudElkLCBjbGllbnRTdGF0ZSldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpZW50SWQgPSB0aGlzLmZyb21XZWJTdG9yYWdlQ2xpZW50U3RhdGVLZXkoZXZlbnQua2V5KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0aGlzLmhhbmRsZUNsaWVudFN0YXRlRXZlbnQoY2xpZW50SWQsIG51bGwpXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh0aGlzLm11dGF0aW9uQmF0Y2hLZXlSZS50ZXN0KGV2ZW50LmtleSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50Lm5ld1ZhbHVlICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtdXRhdGlvbk1ldGFkYXRhID0gdGhpcy5mcm9tV2ViU3RvcmFnZU11dGF0aW9uTWV0YWRhdGEoZXZlbnQua2V5LCBldmVudC5uZXdWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobXV0YXRpb25NZXRhZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0aGlzLmhhbmRsZU11dGF0aW9uQmF0Y2hFdmVudChtdXRhdGlvbk1ldGFkYXRhKV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5xdWVyeVRhcmdldEtleVJlLnRlc3QoZXZlbnQua2V5KSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXZlbnQubmV3VmFsdWUgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5VGFyZ2V0TWV0YWRhdGEgPSB0aGlzLmZyb21XZWJTdG9yYWdlUXVlcnlUYXJnZXRNZXRhZGF0YShldmVudC5rZXksIGV2ZW50Lm5ld1ZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChxdWVyeVRhcmdldE1ldGFkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMuaGFuZGxlUXVlcnlUYXJnZXRFdmVudChxdWVyeVRhcmdldE1ldGFkYXRhKV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoZXZlbnQua2V5ID09PSB0aGlzLm9ubGluZVN0YXRlS2V5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChldmVudC5uZXdWYWx1ZSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25saW5lU3RhdGUgPSB0aGlzLmZyb21XZWJTdG9yYWdlT25saW5lU3RhdGUoZXZlbnQubmV3VmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9ubGluZVN0YXRlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMuaGFuZGxlT25saW5lU3RhdGVFdmVudChvbmxpbmVTdGF0ZSldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGV2ZW50LmtleSA9PT0gdGhpcy5zZXF1ZW5jZU51bWJlcktleSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhc3NlcnQoISF0aGlzLnNlcXVlbmNlTnVtYmVySGFuZGxlciwgJ01pc3Npbmcgc2VxdWVuY2VOdW1iZXJIYW5kbGVyJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlcXVlbmNlTnVtYmVyID0gZnJvbVdlYlN0b3JhZ2VTZXF1ZW5jZU51bWJlcihldmVudC5uZXdWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZXF1ZW5jZU51bWJlciAhPT0gTGlzdGVuU2VxdWVuY2UuSU5WQUxJRCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXF1ZW5jZU51bWJlckhhbmRsZXIoc2VxdWVuY2VOdW1iZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTsgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShXZWJTdG9yYWdlU2hhcmVkQ2xpZW50U3RhdGUucHJvdG90eXBlLCBcImxvY2FsQ2xpZW50U3RhdGVcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5hY3RpdmVDbGllbnRzW3RoaXMubG9jYWxDbGllbnRJZF07XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBXZWJTdG9yYWdlU2hhcmVkQ2xpZW50U3RhdGUucHJvdG90eXBlLnBlcnNpc3RDbGllbnRTdGF0ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLnNldEl0ZW0odGhpcy5sb2NhbENsaWVudFN0b3JhZ2VLZXksIHRoaXMubG9jYWxDbGllbnRTdGF0ZS50b1dlYlN0b3JhZ2VKU09OKCkpO1xyXG4gICAgfTtcclxuICAgIFdlYlN0b3JhZ2VTaGFyZWRDbGllbnRTdGF0ZS5wcm90b3R5cGUucGVyc2lzdE11dGF0aW9uU3RhdGUgPSBmdW5jdGlvbiAoYmF0Y2hJZCwgc3RhdGUsIGVycm9yKSB7XHJcbiAgICAgICAgdmFyIG11dGF0aW9uU3RhdGUgPSBuZXcgTXV0YXRpb25NZXRhZGF0YSh0aGlzLmN1cnJlbnRVc2VyLCBiYXRjaElkLCBzdGF0ZSwgZXJyb3IpO1xyXG4gICAgICAgIHZhciBtdXRhdGlvbktleSA9IGNyZWF0ZVdlYlN0b3JhZ2VNdXRhdGlvbkJhdGNoS2V5KHRoaXMucGVyc2lzdGVuY2VLZXksIHRoaXMuY3VycmVudFVzZXIsIGJhdGNoSWQpO1xyXG4gICAgICAgIHRoaXMuc2V0SXRlbShtdXRhdGlvbktleSwgbXV0YXRpb25TdGF0ZS50b1dlYlN0b3JhZ2VKU09OKCkpO1xyXG4gICAgfTtcclxuICAgIFdlYlN0b3JhZ2VTaGFyZWRDbGllbnRTdGF0ZS5wcm90b3R5cGUucmVtb3ZlTXV0YXRpb25TdGF0ZSA9IGZ1bmN0aW9uIChiYXRjaElkKSB7XHJcbiAgICAgICAgdmFyIG11dGF0aW9uS2V5ID0gY3JlYXRlV2ViU3RvcmFnZU11dGF0aW9uQmF0Y2hLZXkodGhpcy5wZXJzaXN0ZW5jZUtleSwgdGhpcy5jdXJyZW50VXNlciwgYmF0Y2hJZCk7XHJcbiAgICAgICAgdGhpcy5yZW1vdmVJdGVtKG11dGF0aW9uS2V5KTtcclxuICAgIH07XHJcbiAgICBXZWJTdG9yYWdlU2hhcmVkQ2xpZW50U3RhdGUucHJvdG90eXBlLnBlcnNpc3RPbmxpbmVTdGF0ZSA9IGZ1bmN0aW9uIChvbmxpbmVTdGF0ZSkge1xyXG4gICAgICAgIHZhciBlbnRyeSA9IHtcclxuICAgICAgICAgICAgY2xpZW50SWQ6IHRoaXMubG9jYWxDbGllbnRJZCxcclxuICAgICAgICAgICAgb25saW5lU3RhdGU6IE9ubGluZVN0YXRlW29ubGluZVN0YXRlXVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5zdG9yYWdlLnNldEl0ZW0odGhpcy5vbmxpbmVTdGF0ZUtleSwgSlNPTi5zdHJpbmdpZnkoZW50cnkpKTtcclxuICAgIH07XHJcbiAgICBXZWJTdG9yYWdlU2hhcmVkQ2xpZW50U3RhdGUucHJvdG90eXBlLnBlcnNpc3RRdWVyeVRhcmdldFN0YXRlID0gZnVuY3Rpb24gKHRhcmdldElkLCBzdGF0ZSwgZXJyb3IpIHtcclxuICAgICAgICB2YXIgdGFyZ2V0S2V5ID0gY3JlYXRlV2ViU3RvcmFnZVF1ZXJ5VGFyZ2V0TWV0YWRhdGFLZXkodGhpcy5wZXJzaXN0ZW5jZUtleSwgdGFyZ2V0SWQpO1xyXG4gICAgICAgIHZhciB0YXJnZXRNZXRhZGF0YSA9IG5ldyBRdWVyeVRhcmdldE1ldGFkYXRhKHRhcmdldElkLCBzdGF0ZSwgZXJyb3IpO1xyXG4gICAgICAgIHRoaXMuc2V0SXRlbSh0YXJnZXRLZXksIHRhcmdldE1ldGFkYXRhLnRvV2ViU3RvcmFnZUpTT04oKSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBQYXJzZXMgYSBjbGllbnQgc3RhdGUga2V5IGluIFdlYlN0b3JhZ2UuIFJldHVybnMgbnVsbCBpZiB0aGUga2V5IGRvZXMgbm90XHJcbiAgICAgKiBtYXRjaCB0aGUgZXhwZWN0ZWQga2V5IGZvcm1hdC5cclxuICAgICAqL1xyXG4gICAgV2ViU3RvcmFnZVNoYXJlZENsaWVudFN0YXRlLnByb3RvdHlwZS5mcm9tV2ViU3RvcmFnZUNsaWVudFN0YXRlS2V5ID0gZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgIHZhciBtYXRjaCA9IHRoaXMuY2xpZW50U3RhdGVLZXlSZS5leGVjKGtleSk7XHJcbiAgICAgICAgcmV0dXJuIG1hdGNoID8gbWF0Y2hbMV0gOiBudWxsO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUGFyc2VzIGEgY2xpZW50IHN0YXRlIGluIFdlYlN0b3JhZ2UuIFJldHVybnMgJ251bGwnIGlmIHRoZSB2YWx1ZSBjb3VsZCBub3RcclxuICAgICAqIGJlIHBhcnNlZC5cclxuICAgICAqL1xyXG4gICAgV2ViU3RvcmFnZVNoYXJlZENsaWVudFN0YXRlLnByb3RvdHlwZS5mcm9tV2ViU3RvcmFnZUNsaWVudFN0YXRlID0gZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcclxuICAgICAgICB2YXIgY2xpZW50SWQgPSB0aGlzLmZyb21XZWJTdG9yYWdlQ2xpZW50U3RhdGVLZXkoa2V5KTtcclxuICAgICAgICBhc3NlcnQoY2xpZW50SWQgIT09IG51bGwsIFwiQ2Fubm90IHBhcnNlIGNsaWVudCBzdGF0ZSBrZXkgJ1wiICsga2V5ICsgXCInXCIpO1xyXG4gICAgICAgIHJldHVybiBSZW1vdGVDbGllbnRTdGF0ZS5mcm9tV2ViU3RvcmFnZUVudHJ5KGNsaWVudElkLCB2YWx1ZSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBQYXJzZXMgYSBtdXRhdGlvbiBiYXRjaCBzdGF0ZSBpbiBXZWJTdG9yYWdlLiBSZXR1cm5zICdudWxsJyBpZiB0aGUgdmFsdWVcclxuICAgICAqIGNvdWxkIG5vdCBiZSBwYXJzZWQuXHJcbiAgICAgKi9cclxuICAgIFdlYlN0b3JhZ2VTaGFyZWRDbGllbnRTdGF0ZS5wcm90b3R5cGUuZnJvbVdlYlN0b3JhZ2VNdXRhdGlvbk1ldGFkYXRhID0gZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcclxuICAgICAgICB2YXIgbWF0Y2ggPSB0aGlzLm11dGF0aW9uQmF0Y2hLZXlSZS5leGVjKGtleSk7XHJcbiAgICAgICAgYXNzZXJ0KG1hdGNoICE9PSBudWxsLCBcIkNhbm5vdCBwYXJzZSBtdXRhdGlvbiBiYXRjaCBrZXkgJ1wiICsga2V5ICsgXCInXCIpO1xyXG4gICAgICAgIHZhciBiYXRjaElkID0gTnVtYmVyKG1hdGNoWzFdKTtcclxuICAgICAgICB2YXIgdXNlcklkID0gbWF0Y2hbMl0gIT09IHVuZGVmaW5lZCA/IG1hdGNoWzJdIDogbnVsbDtcclxuICAgICAgICByZXR1cm4gTXV0YXRpb25NZXRhZGF0YS5mcm9tV2ViU3RvcmFnZUVudHJ5KG5ldyBVc2VyKHVzZXJJZCksIGJhdGNoSWQsIHZhbHVlKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFBhcnNlcyBhIHF1ZXJ5IHRhcmdldCBzdGF0ZSBmcm9tIFdlYlN0b3JhZ2UuIFJldHVybnMgJ251bGwnIGlmIHRoZSB2YWx1ZVxyXG4gICAgICogY291bGQgbm90IGJlIHBhcnNlZC5cclxuICAgICAqL1xyXG4gICAgV2ViU3RvcmFnZVNoYXJlZENsaWVudFN0YXRlLnByb3RvdHlwZS5mcm9tV2ViU3RvcmFnZVF1ZXJ5VGFyZ2V0TWV0YWRhdGEgPSBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xyXG4gICAgICAgIHZhciBtYXRjaCA9IHRoaXMucXVlcnlUYXJnZXRLZXlSZS5leGVjKGtleSk7XHJcbiAgICAgICAgYXNzZXJ0KG1hdGNoICE9PSBudWxsLCBcIkNhbm5vdCBwYXJzZSBxdWVyeSB0YXJnZXQga2V5ICdcIiArIGtleSArIFwiJ1wiKTtcclxuICAgICAgICB2YXIgdGFyZ2V0SWQgPSBOdW1iZXIobWF0Y2hbMV0pO1xyXG4gICAgICAgIHJldHVybiBRdWVyeVRhcmdldE1ldGFkYXRhLmZyb21XZWJTdG9yYWdlRW50cnkodGFyZ2V0SWQsIHZhbHVlKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFBhcnNlcyBhbiBvbmxpbmUgc3RhdGUgZnJvbSBXZWJTdG9yYWdlLiBSZXR1cm5zICdudWxsJyBpZiB0aGUgdmFsdWVcclxuICAgICAqIGNvdWxkIG5vdCBiZSBwYXJzZWQuXHJcbiAgICAgKi9cclxuICAgIFdlYlN0b3JhZ2VTaGFyZWRDbGllbnRTdGF0ZS5wcm90b3R5cGUuZnJvbVdlYlN0b3JhZ2VPbmxpbmVTdGF0ZSA9IGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgIHJldHVybiBTaGFyZWRPbmxpbmVTdGF0ZS5mcm9tV2ViU3RvcmFnZUVudHJ5KHZhbHVlKTtcclxuICAgIH07XHJcbiAgICBXZWJTdG9yYWdlU2hhcmVkQ2xpZW50U3RhdGUucHJvdG90eXBlLmhhbmRsZU11dGF0aW9uQmF0Y2hFdmVudCA9IGZ1bmN0aW9uIChtdXRhdGlvbkJhdGNoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRzbGliLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHNsaWIuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAobXV0YXRpb25CYXRjaC51c2VyLnVpZCAhPT0gdGhpcy5jdXJyZW50VXNlci51aWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBkZWJ1ZyhMT0dfVEFHJGEsIFwiSWdub3JpbmcgbXV0YXRpb24gZm9yIG5vbi1hY3RpdmUgdXNlciBcIiArIG11dGF0aW9uQmF0Y2gudXNlci51aWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0aGlzLnN5bmNFbmdpbmUuYXBwbHlCYXRjaFN0YXRlKG11dGF0aW9uQmF0Y2guYmF0Y2hJZCwgbXV0YXRpb25CYXRjaC5zdGF0ZSwgbXV0YXRpb25CYXRjaC5lcnJvcildO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBXZWJTdG9yYWdlU2hhcmVkQ2xpZW50U3RhdGUucHJvdG90eXBlLmhhbmRsZVF1ZXJ5VGFyZ2V0RXZlbnQgPSBmdW5jdGlvbiAodGFyZ2V0TWV0YWRhdGEpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zeW5jRW5naW5lLmFwcGx5VGFyZ2V0U3RhdGUodGFyZ2V0TWV0YWRhdGEudGFyZ2V0SWQsIHRhcmdldE1ldGFkYXRhLnN0YXRlLCB0YXJnZXRNZXRhZGF0YS5lcnJvcik7XHJcbiAgICB9O1xyXG4gICAgV2ViU3RvcmFnZVNoYXJlZENsaWVudFN0YXRlLnByb3RvdHlwZS5oYW5kbGVDbGllbnRTdGF0ZUV2ZW50ID0gZnVuY3Rpb24gKGNsaWVudElkLCBjbGllbnRTdGF0ZSkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIGV4aXN0aW5nVGFyZ2V0cyA9IHRoaXMuZ2V0QWxsQWN0aXZlUXVlcnlUYXJnZXRzKCk7XHJcbiAgICAgICAgaWYgKGNsaWVudFN0YXRlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYWN0aXZlQ2xpZW50c1tjbGllbnRJZF0gPSBjbGllbnRTdGF0ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmFjdGl2ZUNsaWVudHNbY2xpZW50SWRdO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgbmV3VGFyZ2V0cyA9IHRoaXMuZ2V0QWxsQWN0aXZlUXVlcnlUYXJnZXRzKCk7XHJcbiAgICAgICAgdmFyIGFkZGVkVGFyZ2V0cyA9IFtdO1xyXG4gICAgICAgIHZhciByZW1vdmVkVGFyZ2V0cyA9IFtdO1xyXG4gICAgICAgIG5ld1RhcmdldHMuZm9yRWFjaChmdW5jdGlvbiAodGFyZ2V0SWQpIHsgcmV0dXJuIHRzbGliLl9fYXdhaXRlcihfdGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFleGlzdGluZ1RhcmdldHMuaGFzKHRhcmdldElkKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGFkZGVkVGFyZ2V0cy5wdXNoKHRhcmdldElkKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7IH0pO1xyXG4gICAgICAgIGV4aXN0aW5nVGFyZ2V0cy5mb3JFYWNoKGZ1bmN0aW9uICh0YXJnZXRJZCkgeyByZXR1cm4gdHNsaWIuX19hd2FpdGVyKF90aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHNsaWIuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIW5ld1RhcmdldHMuaGFzKHRhcmdldElkKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlbW92ZWRUYXJnZXRzLnB1c2godGFyZ2V0SWQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTsgfSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc3luY0VuZ2luZS5hcHBseUFjdGl2ZVRhcmdldHNDaGFuZ2UoYWRkZWRUYXJnZXRzLCByZW1vdmVkVGFyZ2V0cyk7XHJcbiAgICB9O1xyXG4gICAgV2ViU3RvcmFnZVNoYXJlZENsaWVudFN0YXRlLnByb3RvdHlwZS5oYW5kbGVPbmxpbmVTdGF0ZUV2ZW50ID0gZnVuY3Rpb24gKG9ubGluZVN0YXRlKSB7XHJcbiAgICAgICAgLy8gV2UgY2hlY2sgd2hldGhlciB0aGUgY2xpZW50IHRoYXQgd3JvdGUgdGhpcyBvbmxpbmUgc3RhdGUgaXMgc3RpbGwgYWN0aXZlXHJcbiAgICAgICAgLy8gYnkgY29tcGFyaW5nIGl0cyBjbGllbnQgSUQgdG8gdGhlIGxpc3Qgb2YgY2xpZW50cyBrZXB0IGFjdGl2ZSBpblxyXG4gICAgICAgIC8vIEluZGV4ZWREYi4gSWYgYSBjbGllbnQgZG9lcyBub3QgdXBkYXRlIHRoZWlyIEluZGV4ZWREYiBjbGllbnQgc3RhdGVcclxuICAgICAgICAvLyB3aXRoaW4gNSBzZWNvbmRzLCBpdCBpcyBjb25zaWRlcmVkIGluYWN0aXZlIGFuZCB3ZSBkb24ndCBlbWl0IGFuIG9ubGluZVxyXG4gICAgICAgIC8vIHN0YXRlIGV2ZW50LlxyXG4gICAgICAgIGlmICh0aGlzLmFjdGl2ZUNsaWVudHNbb25saW5lU3RhdGUuY2xpZW50SWRdKSB7XHJcbiAgICAgICAgICAgIHRoaXMub25saW5lU3RhdGVIYW5kbGVyKG9ubGluZVN0YXRlLm9ubGluZVN0YXRlKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFdlYlN0b3JhZ2VTaGFyZWRDbGllbnRTdGF0ZTtcclxufSgpKTtcclxuZnVuY3Rpb24gZnJvbVdlYlN0b3JhZ2VTZXF1ZW5jZU51bWJlcihzZXFTdHJpbmcpIHtcclxuICAgIHZhciBzZXF1ZW5jZU51bWJlciA9IExpc3RlblNlcXVlbmNlLklOVkFMSUQ7XHJcbiAgICBpZiAoc2VxU3RyaW5nICE9IG51bGwpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICB2YXIgcGFyc2VkID0gSlNPTi5wYXJzZShzZXFTdHJpbmcpO1xyXG4gICAgICAgICAgICBhc3NlcnQodHlwZW9mIHBhcnNlZCA9PT0gJ251bWJlcicsICdGb3VuZCBub24tbnVtZXJpYyBzZXF1ZW5jZSBudW1iZXInKTtcclxuICAgICAgICAgICAgc2VxdWVuY2VOdW1iZXIgPSBwYXJzZWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIGVycm9yKExPR19UQUckYSwgJ0ZhaWxlZCB0byByZWFkIHNlcXVlbmNlIG51bWJlciBmcm9tIFdlYlN0b3JhZ2UnLCBlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gc2VxdWVuY2VOdW1iZXI7XHJcbn1cclxuLyoqXHJcbiAqIGBNZW1vcnlTaGFyZWRDbGllbnRTdGF0ZWAgaXMgYSBzaW1wbGUgaW1wbGVtZW50YXRpb24gb2YgU2hhcmVkQ2xpZW50U3RhdGUgZm9yXHJcbiAqIGNsaWVudHMgdXNpbmcgbWVtb3J5IHBlcnNpc3RlbmNlLiBUaGUgc3RhdGUgaW4gdGhpcyBjbGFzcyByZW1haW5zIGZ1bGx5XHJcbiAqIGlzb2xhdGVkIGFuZCBubyBzeW5jaHJvbml6YXRpb24gaXMgcGVyZm9ybWVkLlxyXG4gKi9cclxudmFyIE1lbW9yeVNoYXJlZENsaWVudFN0YXRlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gTWVtb3J5U2hhcmVkQ2xpZW50U3RhdGUoKSB7XHJcbiAgICAgICAgdGhpcy5sb2NhbFN0YXRlID0gbmV3IExvY2FsQ2xpZW50U3RhdGUoKTtcclxuICAgICAgICB0aGlzLnF1ZXJ5U3RhdGUgPSB7fTtcclxuICAgICAgICB0aGlzLnN5bmNFbmdpbmUgPSBudWxsO1xyXG4gICAgICAgIHRoaXMub25saW5lU3RhdGVIYW5kbGVyID0gbnVsbDtcclxuICAgICAgICB0aGlzLnNlcXVlbmNlTnVtYmVySGFuZGxlciA9IG51bGw7XHJcbiAgICB9XHJcbiAgICBNZW1vcnlTaGFyZWRDbGllbnRTdGF0ZS5wcm90b3R5cGUuYWRkUGVuZGluZ011dGF0aW9uID0gZnVuY3Rpb24gKGJhdGNoSWQpIHtcclxuICAgICAgICAvLyBObyBvcC5cclxuICAgIH07XHJcbiAgICBNZW1vcnlTaGFyZWRDbGllbnRTdGF0ZS5wcm90b3R5cGUudXBkYXRlTXV0YXRpb25TdGF0ZSA9IGZ1bmN0aW9uIChiYXRjaElkLCBzdGF0ZSwgZXJyb3IpIHtcclxuICAgICAgICAvLyBObyBvcC5cclxuICAgIH07XHJcbiAgICBNZW1vcnlTaGFyZWRDbGllbnRTdGF0ZS5wcm90b3R5cGUuYWRkTG9jYWxRdWVyeVRhcmdldCA9IGZ1bmN0aW9uICh0YXJnZXRJZCkge1xyXG4gICAgICAgIHRoaXMubG9jYWxTdGF0ZS5hZGRRdWVyeVRhcmdldCh0YXJnZXRJZCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucXVlcnlTdGF0ZVt0YXJnZXRJZF0gfHwgJ25vdC1jdXJyZW50JztcclxuICAgIH07XHJcbiAgICBNZW1vcnlTaGFyZWRDbGllbnRTdGF0ZS5wcm90b3R5cGUudXBkYXRlUXVlcnlTdGF0ZSA9IGZ1bmN0aW9uICh0YXJnZXRJZCwgc3RhdGUsIGVycm9yKSB7XHJcbiAgICAgICAgdGhpcy5xdWVyeVN0YXRlW3RhcmdldElkXSA9IHN0YXRlO1xyXG4gICAgfTtcclxuICAgIE1lbW9yeVNoYXJlZENsaWVudFN0YXRlLnByb3RvdHlwZS5yZW1vdmVMb2NhbFF1ZXJ5VGFyZ2V0ID0gZnVuY3Rpb24gKHRhcmdldElkKSB7XHJcbiAgICAgICAgdGhpcy5sb2NhbFN0YXRlLnJlbW92ZVF1ZXJ5VGFyZ2V0KHRhcmdldElkKTtcclxuICAgIH07XHJcbiAgICBNZW1vcnlTaGFyZWRDbGllbnRTdGF0ZS5wcm90b3R5cGUuaXNMb2NhbFF1ZXJ5VGFyZ2V0ID0gZnVuY3Rpb24gKHRhcmdldElkKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubG9jYWxTdGF0ZS5hY3RpdmVUYXJnZXRJZHMuaGFzKHRhcmdldElkKTtcclxuICAgIH07XHJcbiAgICBNZW1vcnlTaGFyZWRDbGllbnRTdGF0ZS5wcm90b3R5cGUuY2xlYXJRdWVyeVN0YXRlID0gZnVuY3Rpb24gKHRhcmdldElkKSB7XHJcbiAgICAgICAgZGVsZXRlIHRoaXMucXVlcnlTdGF0ZVt0YXJnZXRJZF07XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5U2hhcmVkQ2xpZW50U3RhdGUucHJvdG90eXBlLmdldEFsbEFjdGl2ZVF1ZXJ5VGFyZ2V0cyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5sb2NhbFN0YXRlLmFjdGl2ZVRhcmdldElkcztcclxuICAgIH07XHJcbiAgICBNZW1vcnlTaGFyZWRDbGllbnRTdGF0ZS5wcm90b3R5cGUuaXNBY3RpdmVRdWVyeVRhcmdldCA9IGZ1bmN0aW9uICh0YXJnZXRJZCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmxvY2FsU3RhdGUuYWN0aXZlVGFyZ2V0SWRzLmhhcyh0YXJnZXRJZCk7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5U2hhcmVkQ2xpZW50U3RhdGUucHJvdG90eXBlLnN0YXJ0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMubG9jYWxTdGF0ZSA9IG5ldyBMb2NhbENsaWVudFN0YXRlKCk7XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgfTtcclxuICAgIE1lbW9yeVNoYXJlZENsaWVudFN0YXRlLnByb3RvdHlwZS5oYW5kbGVVc2VyQ2hhbmdlID0gZnVuY3Rpb24gKHVzZXIsIHJlbW92ZWRCYXRjaElkcywgYWRkZWRCYXRjaElkcykge1xyXG4gICAgICAgIC8vIE5vIG9wLlxyXG4gICAgfTtcclxuICAgIE1lbW9yeVNoYXJlZENsaWVudFN0YXRlLnByb3RvdHlwZS5zZXRPbmxpbmVTdGF0ZSA9IGZ1bmN0aW9uIChvbmxpbmVTdGF0ZSkge1xyXG4gICAgICAgIC8vIE5vIG9wLlxyXG4gICAgfTtcclxuICAgIE1lbW9yeVNoYXJlZENsaWVudFN0YXRlLnByb3RvdHlwZS5zaHV0ZG93biA9IGZ1bmN0aW9uICgpIHsgfTtcclxuICAgIE1lbW9yeVNoYXJlZENsaWVudFN0YXRlLnByb3RvdHlwZS53cml0ZVNlcXVlbmNlTnVtYmVyID0gZnVuY3Rpb24gKHNlcXVlbmNlTnVtYmVyKSB7IH07XHJcbiAgICByZXR1cm4gTWVtb3J5U2hhcmVkQ2xpZW50U3RhdGU7XHJcbn0oKSk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG52YXIgTE9HX1RBRyRiID0gJ0ZpcmVzdG9yZUNsaWVudCc7XHJcbi8qKiBET01FeGNlcHRpb24gZXJyb3IgY29kZSBjb25zdGFudHMuICovXHJcbnZhciBET01fRVhDRVBUSU9OX0lOVkFMSURfU1RBVEUgPSAxMTtcclxudmFyIERPTV9FWENFUFRJT05fQUJPUlRFRCA9IDIwO1xyXG52YXIgRE9NX0VYQ0VQVElPTl9RVU9UQV9FWENFRURFRCA9IDIyO1xyXG52YXIgSW5kZXhlZERiUGVyc2lzdGVuY2VTZXR0aW5ncyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEluZGV4ZWREYlBlcnNpc3RlbmNlU2V0dGluZ3MoY2FjaGVTaXplQnl0ZXMsIHN5bmNocm9uaXplVGFicykge1xyXG4gICAgICAgIHRoaXMuY2FjaGVTaXplQnl0ZXMgPSBjYWNoZVNpemVCeXRlcztcclxuICAgICAgICB0aGlzLnN5bmNocm9uaXplVGFicyA9IHN5bmNocm9uaXplVGFicztcclxuICAgIH1cclxuICAgIEluZGV4ZWREYlBlcnNpc3RlbmNlU2V0dGluZ3MucHJvdG90eXBlLmxydVBhcmFtcyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gTHJ1UGFyYW1zLndpdGhDYWNoZVNpemUodGhpcy5jYWNoZVNpemVCeXRlcyk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEluZGV4ZWREYlBlcnNpc3RlbmNlU2V0dGluZ3M7XHJcbn0oKSk7XHJcbnZhciBNZW1vcnlQZXJzaXN0ZW5jZVNldHRpbmdzID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gTWVtb3J5UGVyc2lzdGVuY2VTZXR0aW5ncygpIHtcclxuICAgIH1cclxuICAgIHJldHVybiBNZW1vcnlQZXJzaXN0ZW5jZVNldHRpbmdzO1xyXG59KCkpO1xyXG4vKipcclxuICogRmlyZXN0b3JlQ2xpZW50IGlzIGEgdG9wLWxldmVsIGNsYXNzIHRoYXQgY29uc3RydWN0cyBhbmQgb3ducyBhbGwgb2YgdGhlXHJcbiAqIHBpZWNlcyBvZiB0aGUgY2xpZW50IFNESyBhcmNoaXRlY3R1cmUuIEl0IGlzIHJlc3BvbnNpYmxlIGZvciBjcmVhdGluZyB0aGVcclxuICogYXN5bmMgcXVldWUgdGhhdCBpcyBzaGFyZWQgYnkgYWxsIG9mIHRoZSBvdGhlciBjb21wb25lbnRzIGluIHRoZSBzeXN0ZW0uXHJcbiAqL1xyXG52YXIgRmlyZXN0b3JlQ2xpZW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gRmlyZXN0b3JlQ2xpZW50KHBsYXRmb3JtLCBkYXRhYmFzZUluZm8sIGNyZWRlbnRpYWxzLCBcclxuICAgIC8qKlxyXG4gICAgICogQXN5bmNocm9ub3VzIHF1ZXVlIHJlc3BvbnNpYmxlIGZvciBhbGwgb2Ygb3VyIGludGVybmFsIHByb2Nlc3NpbmcuIFdoZW5cclxuICAgICAqIHdlIGdldCBpbmNvbWluZyB3b3JrIGZyb20gdGhlIHVzZXIgKHZpYSBwdWJsaWMgQVBJKSBvciB0aGUgbmV0d29ya1xyXG4gICAgICogKGluY29taW5nIEdSUEMgbWVzc2FnZXMpLCB3ZSBzaG91bGQgYWx3YXlzIHNjaGVkdWxlIG9udG8gdGhpcyBxdWV1ZS5cclxuICAgICAqIFRoaXMgZW5zdXJlcyBhbGwgb2Ygb3VyIHdvcmsgaXMgcHJvcGVybHkgc2VyaWFsaXplZCAoZS5nLiB3ZSBkb24ndFxyXG4gICAgICogc3RhcnQgcHJvY2Vzc2luZyBhIG5ldyBvcGVyYXRpb24gd2hpbGUgdGhlIHByZXZpb3VzIG9uZSBpcyB3YWl0aW5nIGZvclxyXG4gICAgICogYW4gYXN5bmMgSS9PIHRvIGNvbXBsZXRlKS5cclxuICAgICAqL1xyXG4gICAgYXN5bmNRdWV1ZSkge1xyXG4gICAgICAgIHRoaXMucGxhdGZvcm0gPSBwbGF0Zm9ybTtcclxuICAgICAgICB0aGlzLmRhdGFiYXNlSW5mbyA9IGRhdGFiYXNlSW5mbztcclxuICAgICAgICB0aGlzLmNyZWRlbnRpYWxzID0gY3JlZGVudGlhbHM7XHJcbiAgICAgICAgdGhpcy5hc3luY1F1ZXVlID0gYXN5bmNRdWV1ZTtcclxuICAgICAgICB0aGlzLmNsaWVudElkID0gQXV0b0lkLm5ld0lkKCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFN0YXJ0cyB1cCB0aGUgRmlyZXN0b3JlQ2xpZW50LCByZXR1cm5pbmcgb25seSB3aGV0aGVyIG9yIG5vdCBlbmFibGluZ1xyXG4gICAgICogcGVyc2lzdGVuY2Ugc3VjY2VlZGVkLlxyXG4gICAgICpcclxuICAgICAqIFRoZSBpbnRlbnQgaGVyZSBpcyB0byBcImRvIHRoZSByaWdodCB0aGluZ1wiIGFzIGZhciBhcyB1c2VycyBhcmUgY29uY2VybmVkLlxyXG4gICAgICogTmFtZWx5LCBpbiBjYXNlcyB3aGVyZSBvZmZsaW5lIHBlcnNpc3RlbmNlIGlzIHJlcXVlc3RlZCBhbmQgcG9zc2libGUsXHJcbiAgICAgKiBlbmFibGUgaXQsIGJ1dCBvdGhlcndpc2UgZmFsbCBiYWNrIHRvIHBlcnNpc3RlbmNlIGRpc2FibGVkLiBGb3IgdGhlIG1vc3RcclxuICAgICAqIHBhcnQgd2UgZXhwZWN0IHRoaXMgdG8gc3VjY2VlZCBvbmUgd2F5IG9yIHRoZSBvdGhlciBzbyB3ZSBkb24ndCBleHBlY3Qgb3VyXHJcbiAgICAgKiB1c2VycyB0byBhY3R1YWxseSB3YWl0IG9uIHRoZSBmaXJlc3RvcmUuZW5hYmxlUGVyc2lzdGVuY2UgUHJvbWlzZSBzaW5jZVxyXG4gICAgICogdGhleSBnZW5lcmFsbHkgd29uJ3QgY2FyZS5cclxuICAgICAqXHJcbiAgICAgKiBPZiBjb3Vyc2Ugc29tZSB1c2VycyBhY3R1YWxseSBkbyBjYXJlIGFib3V0IHdoZXRoZXIgb3Igbm90IHBlcnNpc3RlbmNlXHJcbiAgICAgKiB3YXMgc3VjY2Vzc2Z1bGx5IGVuYWJsZWQsIHNvIHRoZSBQcm9taXNlIHJldHVybmVkIGZyb20gdGhpcyBtZXRob2RcclxuICAgICAqIGluZGljYXRlcyB0aGlzIG91dGNvbWUuXHJcbiAgICAgKlxyXG4gICAgICogVGhpcyBwcmVzZW50cyBhIHByb2JsZW0gdGhvdWdoOiBldmVuIGJlZm9yZSBlbmFibGVQZXJzaXN0ZW5jZSByZXNvbHZlcyBvclxyXG4gICAgICogcmVqZWN0cywgdXNlcnMgbWF5IGhhdmUgbWFkZSBjYWxscyB0byBlLmcuIGZpcmVzdG9yZS5jb2xsZWN0aW9uKCkgd2hpY2hcclxuICAgICAqIG1lYW5zIHRoYXQgdGhlIEZpcmVzdG9yZUNsaWVudCBpbiB0aGVyZSB3aWxsIGJlIGF2YWlsYWJsZSBhbmQgd2lsbCBiZVxyXG4gICAgICogZW5xdWV1aW5nIGFjdGlvbnMgb24gdGhlIGFzeW5jIHF1ZXVlLlxyXG4gICAgICpcclxuICAgICAqIE1lYW53aGlsZSBhbnkgZmFpbHVyZSBvZiBhbiBvcGVyYXRpb24gb24gdGhlIGFzeW5jIHF1ZXVlIGNhdXNlcyBpdCB0b1xyXG4gICAgICogcGFuaWMgYW5kIHJlamVjdCBhbnkgZnVydGhlciB3b3JrLCBvbiB0aGUgcHJlbWlzZSB0aGF0IHVuaGFuZGxlZCBlcnJvcnNcclxuICAgICAqIGFyZSBmYXRhbC5cclxuICAgICAqXHJcbiAgICAgKiBDb25zZXF1ZW50bHkgdGhlIGZhbGxiYWNrIGlzIGhhbmRsZWQgaW50ZXJuYWxseSBoZXJlIGluIHN0YXJ0LCBhbmQgaWYgdGhlXHJcbiAgICAgKiBmYWxsYmFjayBzdWNjZWVkcyB3ZSBzaWduYWwgc3VjY2VzcyB0byB0aGUgYXN5bmMgcXVldWUgZXZlbiB0aG91Z2ggdGhlXHJcbiAgICAgKiBzdGFydCgpIGl0c2VsZiBzaWduYWxzIGZhaWx1cmUuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHBlcnNpc3RlbmNlU2V0dGluZ3MgU2V0dGluZ3Mgb2JqZWN0IHRvIGNvbmZpZ3VyZSBvZmZsaW5lXHJcbiAgICAgKiAgICAgcGVyc2lzdGVuY2UuXHJcbiAgICAgKiBAcmV0dXJucyBBIGRlZmVycmVkIHJlc3VsdCBpbmRpY2F0aW5nIHRoZSB1c2VyLXZpc2libGUgcmVzdWx0IG9mIGVuYWJsaW5nXHJcbiAgICAgKiAgICAgb2ZmbGluZSBwZXJzaXN0ZW5jZS4gVGhpcyBtZXRob2Qgd2lsbCByZWplY3QgdGhpcyBpZiBJbmRleGVkREIgZmFpbHMgdG9cclxuICAgICAqICAgICBzdGFydCBmb3IgYW55IHJlYXNvbi4gSWYgdXNlUGVyc2lzdGVuY2UgaXMgZmFsc2UgdGhpcyBpc1xyXG4gICAgICogICAgIHVuY29uZGl0aW9uYWxseSByZXNvbHZlZC5cclxuICAgICAqL1xyXG4gICAgRmlyZXN0b3JlQ2xpZW50LnByb3RvdHlwZS5zdGFydCA9IGZ1bmN0aW9uIChwZXJzaXN0ZW5jZVNldHRpbmdzKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB0aGlzLnZlcmlmeU5vdFRlcm1pbmF0ZWQoKTtcclxuICAgICAgICAvLyBXZSBkZWZlciBvdXIgaW5pdGlhbGl6YXRpb24gdW50aWwgd2UgZ2V0IHRoZSBjdXJyZW50IHVzZXIgZnJvbVxyXG4gICAgICAgIC8vIHNldENoYW5nZUxpc3RlbmVyKCkuIFdlIGJsb2NrIHRoZSBhc3luYyBxdWV1ZSB1bnRpbCB3ZSBnb3QgdGhlIGluaXRpYWxcclxuICAgICAgICAvLyB1c2VyIGFuZCB0aGUgaW5pdGlhbGl6YXRpb24gaXMgY29tcGxldGVkLiBUaGlzIHdpbGwgcHJldmVudCBhbnkgc2NoZWR1bGVkXHJcbiAgICAgICAgLy8gd29yayBmcm9tIGhhcHBlbmluZyBiZWZvcmUgaW5pdGlhbGl6YXRpb24gaXMgY29tcGxldGVkLlxyXG4gICAgICAgIC8vXHJcbiAgICAgICAgLy8gSWYgaW5pdGlhbGl6YXRpb25Eb25lIHJlc29sdmVkIHRoZW4gdGhlIEZpcmVzdG9yZUNsaWVudCBpcyBpbiBhIHVzYWJsZVxyXG4gICAgICAgIC8vIHN0YXRlLlxyXG4gICAgICAgIHZhciBpbml0aWFsaXphdGlvbkRvbmUgPSBuZXcgRGVmZXJyZWQoKTtcclxuICAgICAgICAvLyBJZiB1c2VQZXJzaXN0ZW5jZSBpcyB0cnVlLCBjZXJ0YWluIGNsYXNzZXMgb2YgZXJyb3JzIHdoaWxlIHN0YXJ0aW5nIGFyZVxyXG4gICAgICAgIC8vIHJlY292ZXJhYmxlIGJ1dCBvbmx5IGJ5IGZhbGxpbmcgYmFjayB0byBwZXJzaXN0ZW5jZSBkaXNhYmxlZC5cclxuICAgICAgICAvL1xyXG4gICAgICAgIC8vIElmIHRoZXJlJ3MgYW4gZXJyb3IgaW4gdGhlIGZpcnN0IGNhc2UgYnV0IG5vdCBpbiByZWNvdmVyeSB3ZSBjYW5ub3RcclxuICAgICAgICAvLyByZWplY3QgdGhlIHByb21pc2UgYmxvY2tpbmcgdGhlIGFzeW5jIHF1ZXVlIGJlY2F1c2UgdGhpcyB3aWxsIGNhdXNlIHRoZVxyXG4gICAgICAgIC8vIGFzeW5jIHF1ZXVlIHRvIHBhbmljLlxyXG4gICAgICAgIHZhciBwZXJzaXN0ZW5jZVJlc3VsdCA9IG5ldyBEZWZlcnJlZCgpO1xyXG4gICAgICAgIHZhciBpbml0aWFsaXplZCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuY3JlZGVudGlhbHMuc2V0Q2hhbmdlTGlzdGVuZXIoZnVuY3Rpb24gKHVzZXIpIHtcclxuICAgICAgICAgICAgaWYgKCFpbml0aWFsaXplZCkge1xyXG4gICAgICAgICAgICAgICAgaW5pdGlhbGl6ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuaW5pdGlhbGl6ZVBlcnNpc3RlbmNlKHBlcnNpc3RlbmNlU2V0dGluZ3MsIHBlcnNpc3RlbmNlUmVzdWx0LCB1c2VyKVxyXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChtYXliZUxydUdjKSB7IHJldHVybiBfdGhpcy5pbml0aWFsaXplUmVzdCh1c2VyLCBtYXliZUxydUdjKTsgfSlcclxuICAgICAgICAgICAgICAgICAgICAudGhlbihpbml0aWFsaXphdGlvbkRvbmUucmVzb2x2ZSwgaW5pdGlhbGl6YXRpb25Eb25lLnJlamVjdCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5oYW5kbGVDcmVkZW50aWFsQ2hhbmdlKHVzZXIpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyBCbG9jayB0aGUgYXN5bmMgcXVldWUgdW50aWwgaW5pdGlhbGl6YXRpb24gaXMgZG9uZVxyXG4gICAgICAgIHRoaXMuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGluaXRpYWxpemF0aW9uRG9uZS5wcm9taXNlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIFJldHVybiBvbmx5IHRoZSByZXN1bHQgb2YgZW5hYmxpbmcgcGVyc2lzdGVuY2UuIE5vdGUgdGhhdCB0aGlzIGRvZXMgbm90XHJcbiAgICAgICAgLy8gbmVlZCB0byBhd2FpdCB0aGUgY29tcGxldGlvbiBvZiBpbml0aWFsaXphdGlvbkRvbmUgYmVjYXVzZSB0aGUgcmVzdWx0IG9mXHJcbiAgICAgICAgLy8gdGhpcyBtZXRob2Qgc2hvdWxkIG5vdCByZWZsZWN0IGFueSBvdGhlciBraW5kIG9mIGZhaWx1cmUgdG8gc3RhcnQuXHJcbiAgICAgICAgcmV0dXJuIHBlcnNpc3RlbmNlUmVzdWx0LnByb21pc2U7XHJcbiAgICB9O1xyXG4gICAgLyoqIEVuYWJsZXMgdGhlIG5ldHdvcmsgY29ubmVjdGlvbiBhbmQgcmVxdWV1ZXMgYWxsIHBlbmRpbmcgb3BlcmF0aW9ucy4gKi9cclxuICAgIEZpcmVzdG9yZUNsaWVudC5wcm90b3R5cGUuZW5hYmxlTmV0d29yayA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMudmVyaWZ5Tm90VGVybWluYXRlZCgpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmFzeW5jUXVldWUuZW5xdWV1ZShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5zeW5jRW5naW5lLmVuYWJsZU5ldHdvcmsoKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEluaXRpYWxpemVzIHBlcnNpc3RlbnQgc3RvcmFnZSwgYXR0ZW1wdGluZyB0byB1c2UgSW5kZXhlZERCIGlmXHJcbiAgICAgKiB1c2VQZXJzaXN0ZW5jZSBpcyB0cnVlIG9yIG1lbW9yeS1vbmx5IGlmIGZhbHNlLlxyXG4gICAgICpcclxuICAgICAqIElmIEluZGV4ZWREQiBmYWlscyBiZWNhdXNlIGl0J3MgYWxyZWFkeSBvcGVuIGluIGFub3RoZXIgdGFiIG9yIGJlY2F1c2UgdGhlXHJcbiAgICAgKiBwbGF0Zm9ybSBjYW4ndCBwb3NzaWJseSBzdXBwb3J0IG91ciBpbXBsZW1lbnRhdGlvbiB0aGVuIHRoaXMgbWV0aG9kIHJlamVjdHNcclxuICAgICAqIHRoZSBwZXJzaXN0ZW5jZVJlc3VsdCBhbmQgZmFsbHMgYmFjayBvbiBtZW1vcnktb25seSBwZXJzaXN0ZW5jZS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gcGVyc2lzdGVuY2VTZXR0aW5ncyBTZXR0aW5ncyBvYmplY3QgdG8gY29uZmlndXJlIG9mZmxpbmUgcGVyc2lzdGVuY2VcclxuICAgICAqIEBwYXJhbSBwZXJzaXN0ZW5jZVJlc3VsdCBBIGRlZmVycmVkIHJlc3VsdCBpbmRpY2F0aW5nIHRoZSB1c2VyLXZpc2libGVcclxuICAgICAqICAgICByZXN1bHQgb2YgZW5hYmxpbmcgb2ZmbGluZSBwZXJzaXN0ZW5jZS4gVGhpcyBtZXRob2Qgd2lsbCByZWplY3QgdGhpcyBpZlxyXG4gICAgICogICAgIEluZGV4ZWREQiBmYWlscyB0byBzdGFydCBmb3IgYW55IHJlYXNvbi4gSWYgdXNlUGVyc2lzdGVuY2UgaXMgZmFsc2VcclxuICAgICAqICAgICB0aGlzIGlzIHVuY29uZGl0aW9uYWxseSByZXNvbHZlZC5cclxuICAgICAqIEByZXR1cm5zIGEgUHJvbWlzZSBpbmRpY2F0aW5nIHdoZXRoZXIgb3Igbm90IGluaXRpYWxpemF0aW9uIHNob3VsZFxyXG4gICAgICogICAgIGNvbnRpbnVlLCBpLmUuIHRoYXQgb25lIG9mIHRoZSBwZXJzaXN0ZW5jZSBpbXBsZW1lbnRhdGlvbnMgYWN0dWFsbHlcclxuICAgICAqICAgICBzdWNjZWVkZWQuXHJcbiAgICAgKi9cclxuICAgIEZpcmVzdG9yZUNsaWVudC5wcm90b3R5cGUuaW5pdGlhbGl6ZVBlcnNpc3RlbmNlID0gZnVuY3Rpb24gKHBlcnNpc3RlbmNlU2V0dGluZ3MsIHBlcnNpc3RlbmNlUmVzdWx0LCB1c2VyKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBpZiAocGVyc2lzdGVuY2VTZXR0aW5ncyBpbnN0YW5jZW9mIEluZGV4ZWREYlBlcnNpc3RlbmNlU2V0dGluZ3MpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3RhcnRJbmRleGVkRGJQZXJzaXN0ZW5jZSh1c2VyLCBwZXJzaXN0ZW5jZVNldHRpbmdzKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKG1heWJlTHJ1R2MpIHtcclxuICAgICAgICAgICAgICAgIHBlcnNpc3RlbmNlUmVzdWx0LnJlc29sdmUoKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBtYXliZUxydUdjO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgLy8gUmVnYXJkbGVzcyBvZiB3aGV0aGVyIG9yIG5vdCB0aGUgcmV0cnkgc3VjY2VlZHMsIGZyb20gYW4gdXNlclxyXG4gICAgICAgICAgICAgICAgLy8gcGVyc3BlY3RpdmUsIG9mZmxpbmUgcGVyc2lzdGVuY2UgaGFzIGZhaWxlZC5cclxuICAgICAgICAgICAgICAgIHBlcnNpc3RlbmNlUmVzdWx0LnJlamVjdChlcnJvcik7XHJcbiAgICAgICAgICAgICAgICAvLyBBbiB1bmtub3duIGZhaWx1cmUgb24gdGhlIGZpcnN0IHN0YWdlIHNodXRzIGV2ZXJ5dGhpbmcgZG93bi5cclxuICAgICAgICAgICAgICAgIGlmICghX3RoaXMuY2FuRmFsbGJhY2soZXJyb3IpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ0Vycm9yIGVuYWJsaW5nIG9mZmxpbmUgcGVyc2lzdGVuY2UuIEZhbGxpbmcgYmFjayB0bycgK1xyXG4gICAgICAgICAgICAgICAgICAgICcgcGVyc2lzdGVuY2UgZGlzYWJsZWQ6ICcgK1xyXG4gICAgICAgICAgICAgICAgICAgIGVycm9yKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5zdGFydE1lbW9yeVBlcnNpc3RlbmNlKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gV2hlbiB1c2VQZXJzaXN0ZW5jZSA9PSBmYWxzZSwgZW5hYmxpbmcgb2ZmbGluZSBwZXJzaXN0ZW5jZSBpcyBkZWZpbmVkXHJcbiAgICAgICAgICAgIC8vIHRvIHVuY29uZGl0aW9uYWxseSBzdWNjZWVkLiBUaGlzIGFsbG93cyBzdGFydCgpIHRvIGhhdmUgdGhlIHNhbWVcclxuICAgICAgICAgICAgLy8gc2lnbmF0dXJlIGZvciBib3RoIGNhc2VzLCBkZXNwaXRlIHRoZSBmYWN0IHRoYXQgdGhlIHJldHVybmVkIHByb21pc2VcclxuICAgICAgICAgICAgLy8gaXMgb25seSB1c2VkIGluIHRoZSBlbmFibGVQZXJzaXN0ZW5jZSBjYWxsLlxyXG4gICAgICAgICAgICBwZXJzaXN0ZW5jZVJlc3VsdC5yZXNvbHZlKCk7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnN0YXJ0TWVtb3J5UGVyc2lzdGVuY2UoKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBEZWNpZGVzIHdoZXRoZXIgdGhlIHByb3ZpZGVkIGVycm9yIGFsbG93cyB1cyB0byBncmFjZWZ1bGx5IGRpc2FibGVcclxuICAgICAqIHBlcnNpc3RlbmNlIChhcyBvcHBvc2VkIHRvIGNyYXNoaW5nIHRoZSBjbGllbnQpLlxyXG4gICAgICovXHJcbiAgICBGaXJlc3RvcmVDbGllbnQucHJvdG90eXBlLmNhbkZhbGxiYWNrID0gZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRmlyZXN0b3JlRXJyb3IpIHtcclxuICAgICAgICAgICAgcmV0dXJuIChlcnJvci5jb2RlID09PSBDb2RlLkZBSUxFRF9QUkVDT05ESVRJT04gfHxcclxuICAgICAgICAgICAgICAgIGVycm9yLmNvZGUgPT09IENvZGUuVU5JTVBMRU1FTlRFRCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHR5cGVvZiBET01FeGNlcHRpb24gIT09ICd1bmRlZmluZWQnICYmXHJcbiAgICAgICAgICAgIGVycm9yIGluc3RhbmNlb2YgRE9NRXhjZXB0aW9uKSB7XHJcbiAgICAgICAgICAgIC8vIFRoZXJlIGFyZSBhIGZldyBrbm93biBjaXJjdW1zdGFuY2VzIHdoZXJlIHdlIGNhbiBvcGVuIEluZGV4ZWREYiBidXRcclxuICAgICAgICAgICAgLy8gdHJ5aW5nIHRvIHJlYWQvd3JpdGUgd2lsbCBmYWlsIChlLmcuIHF1b3RhIGV4Y2VlZGVkKS4gRm9yXHJcbiAgICAgICAgICAgIC8vIHdlbGwtdW5kZXJzdG9vZCBjYXNlcywgd2UgYXR0ZW1wdCB0byBkZXRlY3QgdGhlc2UgYW5kIHRoZW4gZ3JhY2VmdWxseVxyXG4gICAgICAgICAgICAvLyBmYWxsIGJhY2sgdG8gbWVtb3J5IHBlcnNpc3RlbmNlLlxyXG4gICAgICAgICAgICAvLyBOT1RFOiBSYXRoZXIgdGhhbiBjb250aW51ZSB0byBhZGQgdG8gdGhpcyBsaXN0LCB3ZSBjb3VsZCBkZWNpZGUgdG9cclxuICAgICAgICAgICAgLy8gYWx3YXlzIGZhbGwgYmFjaywgd2l0aCB0aGUgcmlzayB0aGF0IHdlIG1pZ2h0IGFjY2lkZW50YWxseSBoaWRlIGVycm9yc1xyXG4gICAgICAgICAgICAvLyByZXByZXNlbnRpbmcgYWN0dWFsIFNESyBidWdzLlxyXG4gICAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAvLyBXaGVuIHRoZSBicm93c2VyIGlzIG91dCBvZiBxdW90YSB3ZSBjb3VsZCBnZXQgZWl0aGVyIHF1b3RhIGV4Y2VlZGVkXHJcbiAgICAgICAgICAgIC8vIG9yIGFuIGFib3J0ZWQgZXJyb3IgZGVwZW5kaW5nIG9uIHdoZXRoZXIgdGhlIGVycm9yIGhhcHBlbmVkIGR1cmluZ1xyXG4gICAgICAgICAgICAvLyBzY2hlbWEgbWlncmF0aW9uLlxyXG4gICAgICAgICAgICBlcnJvci5jb2RlID09PSBET01fRVhDRVBUSU9OX1FVT1RBX0VYQ0VFREVEIHx8XHJcbiAgICAgICAgICAgICAgICBlcnJvci5jb2RlID09PSBET01fRVhDRVBUSU9OX0FCT1JURUQgfHxcclxuICAgICAgICAgICAgICAgIC8vIEZpcmVmb3ggUHJpdmF0ZSBCcm93c2luZyBtb2RlIGRpc2FibGVzIEluZGV4ZWREYiBhbmQgcmV0dXJuc1xyXG4gICAgICAgICAgICAgICAgLy8gSU5WQUxJRF9TVEFURSBmb3IgYW55IHVzYWdlLlxyXG4gICAgICAgICAgICAgICAgZXJyb3IuY29kZSA9PT0gRE9NX0VYQ0VQVElPTl9JTlZBTElEX1NUQVRFKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBDaGVja3MgdGhhdCB0aGUgY2xpZW50IGhhcyBub3QgYmVlbiB0ZXJtaW5hdGVkLiBFbnN1cmVzIHRoYXQgb3RoZXIgbWV0aG9kcyBvblxyXG4gICAgICogdGhpcyBjbGFzcyBjYW5ub3QgYmUgY2FsbGVkIGFmdGVyIHRoZSBjbGllbnQgaXMgdGVybWluYXRlZC5cclxuICAgICAqL1xyXG4gICAgRmlyZXN0b3JlQ2xpZW50LnByb3RvdHlwZS52ZXJpZnlOb3RUZXJtaW5hdGVkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmFzeW5jUXVldWUuaXNTaHV0dGluZ0Rvd24pIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuRkFJTEVEX1BSRUNPTkRJVElPTiwgJ1RoZSBjbGllbnQgaGFzIGFscmVhZHkgYmVlbiB0ZXJtaW5hdGVkLicpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFN0YXJ0cyBJbmRleGVkREItYmFzZWQgcGVyc2lzdGVuY2UuXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybnMgQSBwcm9taXNlIGluZGljYXRpbmcgc3VjY2VzcyBvciBmYWlsdXJlLlxyXG4gICAgICovXHJcbiAgICBGaXJlc3RvcmVDbGllbnQucHJvdG90eXBlLnN0YXJ0SW5kZXhlZERiUGVyc2lzdGVuY2UgPSBmdW5jdGlvbiAodXNlciwgc2V0dGluZ3MpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIC8vIFRPRE8oaHR0cDovL2IvMzMzODQ1MjMpOiBGb3Igbm93IHdlIGp1c3QgZGlzYWJsZSBnYXJiYWdlIGNvbGxlY3Rpb25cclxuICAgICAgICAvLyB3aGVuIHBlcnNpc3RlbmNlIGlzIGVuYWJsZWQuXHJcbiAgICAgICAgdmFyIHBlcnNpc3RlbmNlS2V5ID0gSW5kZXhlZERiUGVyc2lzdGVuY2UuYnVpbGRTdG9yYWdlUHJlZml4KHRoaXMuZGF0YWJhc2VJbmZvKTtcclxuICAgICAgICAvLyBPcHQgdG8gdXNlIHByb3RvMyBKU09OIGluIGNhc2UgdGhlIHBsYXRmb3JtIGRvZXNuJ3Qgc3VwcG9ydCBVaW50OEFycmF5LlxyXG4gICAgICAgIHZhciBzZXJpYWxpemVyID0gbmV3IEpzb25Qcm90b1NlcmlhbGl6ZXIodGhpcy5kYXRhYmFzZUluZm8uZGF0YWJhc2VJZCwge1xyXG4gICAgICAgICAgICB1c2VQcm90bzNKc29uOiB0cnVlXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpLnRoZW4oZnVuY3Rpb24gKCkgeyByZXR1cm4gdHNsaWIuX19hd2FpdGVyKF90aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgbHJ1UGFyYW1zLCBwZXJzaXN0ZW5jZTtcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNldHRpbmdzLnN5bmNocm9uaXplVGFicyAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIVdlYlN0b3JhZ2VTaGFyZWRDbGllbnRTdGF0ZS5pc0F2YWlsYWJsZSh0aGlzLnBsYXRmb3JtKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuVU5JTVBMRU1FTlRFRCwgJ0luZGV4ZWREQiBwZXJzaXN0ZW5jZSBpcyBvbmx5IGF2YWlsYWJsZSBvbiBwbGF0Zm9ybXMgdGhhdCBzdXBwb3J0IExvY2FsU3RvcmFnZS4nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBscnVQYXJhbXMgPSBzZXR0aW5ncy5scnVQYXJhbXMoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaGFyZWRDbGllbnRTdGF0ZSA9IHNldHRpbmdzLnN5bmNocm9uaXplVGFic1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBuZXcgV2ViU3RvcmFnZVNoYXJlZENsaWVudFN0YXRlKHRoaXMuYXN5bmNRdWV1ZSwgdGhpcy5wbGF0Zm9ybSwgcGVyc2lzdGVuY2VLZXksIHRoaXMuY2xpZW50SWQsIHVzZXIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IG5ldyBNZW1vcnlTaGFyZWRDbGllbnRTdGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBJbmRleGVkRGJQZXJzaXN0ZW5jZS5jcmVhdGVJbmRleGVkRGJQZXJzaXN0ZW5jZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxsb3dUYWJTeW5jaHJvbml6YXRpb246IHNldHRpbmdzLnN5bmNocm9uaXplVGFicyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZXJzaXN0ZW5jZUtleTogcGVyc2lzdGVuY2VLZXksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpZW50SWQ6IHRoaXMuY2xpZW50SWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhdGZvcm06IHRoaXMucGxhdGZvcm0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVldWU6IHRoaXMuYXN5bmNRdWV1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXJpYWxpemVyOiBzZXJpYWxpemVyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxydVBhcmFtczogbHJ1UGFyYW1zLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlcXVlbmNlTnVtYmVyU3luY2VyOiB0aGlzLnNoYXJlZENsaWVudFN0YXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwZXJzaXN0ZW5jZSA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wZXJzaXN0ZW5jZSA9IHBlcnNpc3RlbmNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgcGVyc2lzdGVuY2UucmVmZXJlbmNlRGVsZWdhdGUuZ2FyYmFnZUNvbGxlY3Rvcl07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pOyB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFN0YXJ0cyBNZW1vcnktYmFja2VkIHBlcnNpc3RlbmNlLiBJbiBwcmFjdGljZSB0aGlzIGNhbm5vdCBmYWlsLlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm5zIEEgcHJvbWlzZSB0aGF0IHdpbGwgc3VjY2Vzc2Z1bGx5IHJlc29sdmUuXHJcbiAgICAgKi9cclxuICAgIEZpcmVzdG9yZUNsaWVudC5wcm90b3R5cGUuc3RhcnRNZW1vcnlQZXJzaXN0ZW5jZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLnBlcnNpc3RlbmNlID0gTWVtb3J5UGVyc2lzdGVuY2UuY3JlYXRlRWFnZXJQZXJzaXN0ZW5jZSh0aGlzLmNsaWVudElkKTtcclxuICAgICAgICB0aGlzLnNoYXJlZENsaWVudFN0YXRlID0gbmV3IE1lbW9yeVNoYXJlZENsaWVudFN0YXRlKCk7XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShudWxsKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEluaXRpYWxpemVzIHRoZSByZXN0IG9mIHRoZSBGaXJlc3RvcmVDbGllbnQsIGFzc3VtaW5nIHRoZSBpbml0aWFsIHVzZXJcclxuICAgICAqIGhhcyBiZWVuIG9idGFpbmVkIGZyb20gdGhlIGNyZWRlbnRpYWwgcHJvdmlkZXIgYW5kIHNvbWUgcGVyc2lzdGVuY2VcclxuICAgICAqIGltcGxlbWVudGF0aW9uIGlzIGF2YWlsYWJsZSBpbiB0aGlzLnBlcnNpc3RlbmNlLlxyXG4gICAgICovXHJcbiAgICBGaXJlc3RvcmVDbGllbnQucHJvdG90eXBlLmluaXRpYWxpemVSZXN0ID0gZnVuY3Rpb24gKHVzZXIsIG1heWJlTHJ1R2MpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIGRlYnVnKExPR19UQUckYiwgJ0luaXRpYWxpemluZy4gdXNlcj0nLCB1c2VyLnVpZCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucGxhdGZvcm1cclxuICAgICAgICAgICAgLmxvYWRDb25uZWN0aW9uKHRoaXMuZGF0YWJhc2VJbmZvKVxyXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoY29ubmVjdGlvbikgeyByZXR1cm4gdHNsaWIuX19hd2FpdGVyKF90aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgcXVlcnlFbmdpbmUsIGNvbm5lY3Rpdml0eU1vbml0b3IsIHNlcmlhbGl6ZXIsIGRhdGFzdG9yZSwgcmVtb3RlU3RvcmVPbmxpbmVTdGF0ZUNoYW5nZWRIYW5kbGVyLCBzaGFyZWRDbGllbnRTdGF0ZU9ubGluZVN0YXRlQ2hhbmdlZEhhbmRsZXI7XHJcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYi5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5RW5naW5lID0gbmV3IEluZGV4RnJlZVF1ZXJ5RW5naW5lKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9jYWxTdG9yZSA9IG5ldyBMb2NhbFN0b3JlKHRoaXMucGVyc2lzdGVuY2UsIHF1ZXJ5RW5naW5lLCB1c2VyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5sb2NhbFN0b3JlLnN0YXJ0KCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobWF5YmVMcnVHYykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gV2UncmUgcnVubmluZyBMUlUgR2FyYmFnZSBjb2xsZWN0aW9uLiBTZXQgdXAgdGhlIHNjaGVkdWxlci5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubHJ1U2NoZWR1bGVyID0gbmV3IExydVNjaGVkdWxlcihtYXliZUxydUdjLCB0aGlzLmFzeW5jUXVldWUsIHRoaXMubG9jYWxTdG9yZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGl2aXR5TW9uaXRvciA9IHRoaXMucGxhdGZvcm0ubmV3Q29ubmVjdGl2aXR5TW9uaXRvcigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXJpYWxpemVyID0gdGhpcy5wbGF0Zm9ybS5uZXdTZXJpYWxpemVyKHRoaXMuZGF0YWJhc2VJbmZvLmRhdGFiYXNlSWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhc3RvcmUgPSBuZXcgRGF0YXN0b3JlKHRoaXMuYXN5bmNRdWV1ZSwgY29ubmVjdGlvbiwgdGhpcy5jcmVkZW50aWFscywgc2VyaWFsaXplcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlbW90ZVN0b3JlT25saW5lU3RhdGVDaGFuZ2VkSGFuZGxlciA9IGZ1bmN0aW9uIChvbmxpbmVTdGF0ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLnN5bmNFbmdpbmUuYXBwbHlPbmxpbmVTdGF0ZUNoYW5nZShvbmxpbmVTdGF0ZSwgT25saW5lU3RhdGVTb3VyY2UuUmVtb3RlU3RvcmUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzaGFyZWRDbGllbnRTdGF0ZU9ubGluZVN0YXRlQ2hhbmdlZEhhbmRsZXIgPSBmdW5jdGlvbiAob25saW5lU3RhdGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5zeW5jRW5naW5lLmFwcGx5T25saW5lU3RhdGVDaGFuZ2Uob25saW5lU3RhdGUsIE9ubGluZVN0YXRlU291cmNlLlNoYXJlZENsaWVudFN0YXRlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdGVTdG9yZSA9IG5ldyBSZW1vdGVTdG9yZSh0aGlzLmxvY2FsU3RvcmUsIGRhdGFzdG9yZSwgdGhpcy5hc3luY1F1ZXVlLCByZW1vdGVTdG9yZU9ubGluZVN0YXRlQ2hhbmdlZEhhbmRsZXIsIGNvbm5lY3Rpdml0eU1vbml0b3IpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN5bmNFbmdpbmUgPSBuZXcgU3luY0VuZ2luZSh0aGlzLmxvY2FsU3RvcmUsIHRoaXMucmVtb3RlU3RvcmUsIHRoaXMuc2hhcmVkQ2xpZW50U3RhdGUsIHVzZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNoYXJlZENsaWVudFN0YXRlLm9ubGluZVN0YXRlSGFuZGxlciA9IHNoYXJlZENsaWVudFN0YXRlT25saW5lU3RhdGVDaGFuZ2VkSGFuZGxlcjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2V0IHVwIHdpcmluZyBiZXR3ZWVuIHN5bmMgZW5naW5lIGFuZCBvdGhlciBjb21wb25lbnRzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3RlU3RvcmUuc3luY0VuZ2luZSA9IHRoaXMuc3luY0VuZ2luZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaGFyZWRDbGllbnRTdGF0ZS5zeW5jRW5naW5lID0gdGhpcy5zeW5jRW5naW5lO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmV2ZW50TWdyID0gbmV3IEV2ZW50TWFuYWdlcih0aGlzLnN5bmNFbmdpbmUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBQT1JUSU5HIE5PVEU6IExvY2FsU3RvcmUgZG9lc24ndCBuZWVkIGFuIGV4cGxpY2l0IHN0YXJ0KCkgb24gdGhlIFdlYi5cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5zaGFyZWRDbGllbnRTdGF0ZS5zdGFydCgpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFBPUlRJTkcgTk9URTogTG9jYWxTdG9yZSBkb2Vzbid0IG5lZWQgYW4gZXhwbGljaXQgc3RhcnQoKSBvbiB0aGUgV2ViLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMucmVtb3RlU3RvcmUuc3RhcnQoKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5PVEU6IFRoaXMgd2lsbCBpbW1lZGlhdGVseSBjYWxsIHRoZSBsaXN0ZW5lciwgc28gd2UgbWFrZSBzdXJlIHRvXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCBpdCBhZnRlciBsb2NhbFN0b3JlIC8gcmVtb3RlU3RvcmUgYXJlIHN0YXJ0ZWQuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMucGVyc2lzdGVuY2Uuc2V0UHJpbWFyeVN0YXRlTGlzdGVuZXIoZnVuY3Rpb24gKGlzUHJpbWFyeSkgeyByZXR1cm4gdHNsaWIuX19hd2FpdGVyKF90aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0c2xpYi5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOiByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLnN5bmNFbmdpbmUuYXBwbHlQcmltYXJ5U3RhdGUoaXNQcmltYXJ5KV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmxydVNjaGVkdWxlcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNQcmltYXJ5ICYmICF0aGlzLmxydVNjaGVkdWxlci5zdGFydGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxydVNjaGVkdWxlci5zdGFydCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFpc1ByaW1hcnkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubHJ1U2NoZWR1bGVyLnN0b3AoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOyB9KV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBOT1RFOiBUaGlzIHdpbGwgaW1tZWRpYXRlbHkgY2FsbCB0aGUgbGlzdGVuZXIsIHNvIHdlIG1ha2Ugc3VyZSB0b1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgaXQgYWZ0ZXIgbG9jYWxTdG9yZSAvIHJlbW90ZVN0b3JlIGFyZSBzdGFydGVkLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdoZW4gYSB1c2VyIGNhbGxzIGNsZWFyUGVyc2lzdGVuY2UoKSBpbiBvbmUgY2xpZW50LCBhbGwgb3RoZXIgY2xpZW50c1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBuZWVkIHRvIGJlIHRlcm1pbmF0ZWQgdG8gYWxsb3cgdGhlIGRlbGV0ZSB0byBzdWNjZWVkLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLnBlcnNpc3RlbmNlLnNldERhdGFiYXNlRGVsZXRlZExpc3RlbmVyKGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRzbGliLl9fYXdhaXRlcihfdGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHNsaWIuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDogcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy50ZXJtaW5hdGUoKV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7IH0pXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdoZW4gYSB1c2VyIGNhbGxzIGNsZWFyUGVyc2lzdGVuY2UoKSBpbiBvbmUgY2xpZW50LCBhbGwgb3RoZXIgY2xpZW50c1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBuZWVkIHRvIGJlIHRlcm1pbmF0ZWQgdG8gYWxsb3cgdGhlIGRlbGV0ZSB0byBzdWNjZWVkLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7IH0pO1xyXG4gICAgfTtcclxuICAgIEZpcmVzdG9yZUNsaWVudC5wcm90b3R5cGUuaGFuZGxlQ3JlZGVudGlhbENoYW5nZSA9IGZ1bmN0aW9uICh1c2VyKSB7XHJcbiAgICAgICAgdGhpcy5hc3luY1F1ZXVlLnZlcmlmeU9wZXJhdGlvbkluUHJvZ3Jlc3MoKTtcclxuICAgICAgICBkZWJ1ZyhMT0dfVEFHJGIsICdDcmVkZW50aWFsIENoYW5nZWQuIEN1cnJlbnQgdXNlcjogJyArIHVzZXIudWlkKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5zeW5jRW5naW5lLmhhbmRsZUNyZWRlbnRpYWxDaGFuZ2UodXNlcik7XHJcbiAgICB9O1xyXG4gICAgLyoqIERpc2FibGVzIHRoZSBuZXR3b3JrIGNvbm5lY3Rpb24uIFBlbmRpbmcgb3BlcmF0aW9ucyB3aWxsIG5vdCBjb21wbGV0ZS4gKi9cclxuICAgIEZpcmVzdG9yZUNsaWVudC5wcm90b3R5cGUuZGlzYWJsZU5ldHdvcmsgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB0aGlzLnZlcmlmeU5vdFRlcm1pbmF0ZWQoKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5hc3luY1F1ZXVlLmVucXVldWUoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXMuc3luY0VuZ2luZS5kaXNhYmxlTmV0d29yaygpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIEZpcmVzdG9yZUNsaWVudC5wcm90b3R5cGUudGVybWluYXRlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kSW5pdGlhdGVTaHV0ZG93bihmdW5jdGlvbiAoKSB7IHJldHVybiB0c2xpYi5fX2F3YWl0ZXIoX3RoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYi5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFBPUlRJTkcgTk9URTogTG9jYWxTdG9yZSBkb2VzIG5vdCBuZWVkIGFuIGV4cGxpY2l0IHNodXRkb3duIG9uIHdlYi5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMubHJ1U2NoZWR1bGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxydVNjaGVkdWxlci5zdG9wKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5yZW1vdGVTdG9yZS5zaHV0ZG93bigpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5zaGFyZWRDbGllbnRTdGF0ZS5zaHV0ZG93bigpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5wZXJzaXN0ZW5jZS5zaHV0ZG93bigpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYHJlbW92ZUNoYW5nZUxpc3RlbmVyYCBtdXN0IGJlIGNhbGxlZCBhZnRlciBzaHV0dGluZyBkb3duIHRoZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBSZW1vdGVTdG9yZSBhcyBpdCB3aWxsIHByZXZlbnQgdGhlIFJlbW90ZVN0b3JlIGZyb20gcmV0cmlldmluZ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBhdXRoIHRva2Vucy5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jcmVkZW50aWFscy5yZW1vdmVDaGFuZ2VMaXN0ZW5lcigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pOyB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgYSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2hlbiBhbGwgd3JpdGVzIHRoYXQgd2VyZSBwZW5kaW5nIGF0IHRoZSB0aW1lIHRoaXNcclxuICAgICAqIG1ldGhvZCB3YXMgY2FsbGVkIHJlY2VpdmVkIHNlcnZlciBhY2tub3dsZWRnZW1lbnQuIEFuIGFja25vd2xlZGdlbWVudCBjYW4gYmUgZWl0aGVyIGFjY2VwdGFuY2VcclxuICAgICAqIG9yIHJlamVjdGlvbi5cclxuICAgICAqL1xyXG4gICAgRmlyZXN0b3JlQ2xpZW50LnByb3RvdHlwZS53YWl0Rm9yUGVuZGluZ1dyaXRlcyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMudmVyaWZ5Tm90VGVybWluYXRlZCgpO1xyXG4gICAgICAgIHZhciBkZWZlcnJlZCA9IG5ldyBEZWZlcnJlZCgpO1xyXG4gICAgICAgIHRoaXMuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIF90aGlzLnN5bmNFbmdpbmUucmVnaXN0ZXJQZW5kaW5nV3JpdGVzQ2FsbGJhY2soZGVmZXJyZWQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xyXG4gICAgfTtcclxuICAgIEZpcmVzdG9yZUNsaWVudC5wcm90b3R5cGUubGlzdGVuID0gZnVuY3Rpb24gKHF1ZXJ5LCBvYnNlcnZlciwgb3B0aW9ucykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy52ZXJpZnlOb3RUZXJtaW5hdGVkKCk7XHJcbiAgICAgICAgdmFyIGxpc3RlbmVyID0gbmV3IFF1ZXJ5TGlzdGVuZXIocXVlcnksIG9ic2VydmVyLCBvcHRpb25zKTtcclxuICAgICAgICB0aGlzLmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5ldmVudE1nci5saXN0ZW4obGlzdGVuZXIpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBsaXN0ZW5lcjtcclxuICAgIH07XHJcbiAgICBGaXJlc3RvcmVDbGllbnQucHJvdG90eXBlLnVubGlzdGVuID0gZnVuY3Rpb24gKGxpc3RlbmVyKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICAvLyBDaGVja3MgZm9yIHRlcm1pbmF0aW9uIGJ1dCBkb2VzIG5vdCByYWlzZSBlcnJvciwgYWxsb3dpbmcgdW5saXN0ZW4gYWZ0ZXJcclxuICAgICAgICAvLyB0ZXJtaW5hdGlvbiB0byBiZSBhIG5vLW9wLlxyXG4gICAgICAgIGlmICh0aGlzLmNsaWVudFRlcm1pbmF0ZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5ldmVudE1nci51bmxpc3RlbihsaXN0ZW5lcik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgRmlyZXN0b3JlQ2xpZW50LnByb3RvdHlwZS5nZXREb2N1bWVudEZyb21Mb2NhbENhY2hlID0gZnVuY3Rpb24gKGRvY0tleSkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy52ZXJpZnlOb3RUZXJtaW5hdGVkKCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYXN5bmNRdWV1ZVxyXG4gICAgICAgICAgICAuZW5xdWV1ZShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5sb2NhbFN0b3JlLnJlYWREb2N1bWVudChkb2NLZXkpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChtYXliZURvYykge1xyXG4gICAgICAgICAgICBpZiAobWF5YmVEb2MgaW5zdGFuY2VvZiBEb2N1bWVudCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG1heWJlRG9jO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKG1heWJlRG9jIGluc3RhbmNlb2YgTm9Eb2N1bWVudCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5VTkFWQUlMQUJMRSwgJ0ZhaWxlZCB0byBnZXQgZG9jdW1lbnQgZnJvbSBjYWNoZS4gKEhvd2V2ZXIsIHRoaXMgZG9jdW1lbnQgbWF5ICcgK1xyXG4gICAgICAgICAgICAgICAgICAgIFwiZXhpc3Qgb24gdGhlIHNlcnZlci4gUnVuIGFnYWluIHdpdGhvdXQgc2V0dGluZyAnc291cmNlJyBpbiBcIiArXHJcbiAgICAgICAgICAgICAgICAgICAgJ3RoZSBHZXRPcHRpb25zIHRvIGF0dGVtcHQgdG8gcmV0cmlldmUgdGhlIGRvY3VtZW50IGZyb20gdGhlICcgK1xyXG4gICAgICAgICAgICAgICAgICAgICdzZXJ2ZXIuKScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgRmlyZXN0b3JlQ2xpZW50LnByb3RvdHlwZS5nZXREb2N1bWVudHNGcm9tTG9jYWxDYWNoZSA9IGZ1bmN0aW9uIChxdWVyeSkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy52ZXJpZnlOb3RUZXJtaW5hdGVkKCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYXN5bmNRdWV1ZS5lbnF1ZXVlKGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRzbGliLl9fYXdhaXRlcihfdGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHF1ZXJ5UmVzdWx0LCB2aWV3LCB2aWV3RG9jQ2hhbmdlcztcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDogcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5sb2NhbFN0b3JlLmV4ZWN1dGVRdWVyeShxdWVyeSwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIHVzZVByZXZpb3VzUmVzdWx0cz0gKi8gdHJ1ZSldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcXVlcnlSZXN1bHQgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZpZXcgPSBuZXcgVmlldyhxdWVyeSwgcXVlcnlSZXN1bHQucmVtb3RlS2V5cyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZpZXdEb2NDaGFuZ2VzID0gdmlldy5jb21wdXRlRG9jQ2hhbmdlcyhxdWVyeVJlc3VsdC5kb2N1bWVudHMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdmlldy5hcHBseUNoYW5nZXModmlld0RvY0NoYW5nZXMsIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogdXBkYXRlTGltYm9Eb2N1bWVudHM9ICovIGZhbHNlKS5zbmFwc2hvdF07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pOyB9KTtcclxuICAgIH07XHJcbiAgICBGaXJlc3RvcmVDbGllbnQucHJvdG90eXBlLndyaXRlID0gZnVuY3Rpb24gKG11dGF0aW9ucykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy52ZXJpZnlOb3RUZXJtaW5hdGVkKCk7XHJcbiAgICAgICAgdmFyIGRlZmVycmVkID0gbmV3IERlZmVycmVkKCk7XHJcbiAgICAgICAgdGhpcy5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXMuc3luY0VuZ2luZS53cml0ZShtdXRhdGlvbnMsIGRlZmVycmVkKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcclxuICAgIH07XHJcbiAgICBGaXJlc3RvcmVDbGllbnQucHJvdG90eXBlLmRhdGFiYXNlSWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YWJhc2VJbmZvLmRhdGFiYXNlSWQ7XHJcbiAgICB9O1xyXG4gICAgRmlyZXN0b3JlQ2xpZW50LnByb3RvdHlwZS5hZGRTbmFwc2hvdHNJblN5bmNMaXN0ZW5lciA9IGZ1bmN0aW9uIChvYnNlcnZlcikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy52ZXJpZnlOb3RUZXJtaW5hdGVkKCk7XHJcbiAgICAgICAgdGhpcy5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBfdGhpcy5ldmVudE1nci5hZGRTbmFwc2hvdHNJblN5bmNMaXN0ZW5lcihvYnNlcnZlcik7XHJcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBGaXJlc3RvcmVDbGllbnQucHJvdG90eXBlLnJlbW92ZVNuYXBzaG90c0luU3luY0xpc3RlbmVyID0gZnVuY3Rpb24gKG9ic2VydmVyKSB7XHJcbiAgICAgICAgLy8gQ2hlY2tzIGZvciBzaHV0ZG93biBidXQgZG9lcyBub3QgcmFpc2UgZXJyb3IsIGFsbG93aW5nIHJlbW92ZSBhZnRlclxyXG4gICAgICAgIC8vIHNodXRkb3duIHRvIGJlIGEgbm8tb3AuXHJcbiAgICAgICAgaWYgKHRoaXMuY2xpZW50VGVybWluYXRlZCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZXZlbnRNZ3IucmVtb3ZlU25hcHNob3RzSW5TeW5jTGlzdGVuZXIob2JzZXJ2ZXIpO1xyXG4gICAgfTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShGaXJlc3RvcmVDbGllbnQucHJvdG90eXBlLCBcImNsaWVudFRlcm1pbmF0ZWRcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAvLyBUZWNobmljYWxseSwgdGhlIGFzeW5jUXVldWUgaXMgc3RpbGwgcnVubmluZywgYnV0IG9ubHkgYWNjZXB0aW5nIG9wZXJhdGlvbnNcclxuICAgICAgICAgICAgLy8gcmVsYXRlZCB0byB0ZXJtaW5hdGlvbiBvciBzdXBwb3NlZCB0byBiZSBydW4gYWZ0ZXIgdGVybWluYXRpb24uIEl0IGlzIGVmZmVjdGl2ZWx5XHJcbiAgICAgICAgICAgIC8vIHRlcm1pbmF0ZWQgdG8gdGhlIGV5ZXMgb2YgdXNlcnMuXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmFzeW5jUXVldWUuaXNTaHV0dGluZ0Rvd247XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBGaXJlc3RvcmVDbGllbnQucHJvdG90eXBlLnRyYW5zYWN0aW9uID0gZnVuY3Rpb24gKHVwZGF0ZUZ1bmN0aW9uKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB0aGlzLnZlcmlmeU5vdFRlcm1pbmF0ZWQoKTtcclxuICAgICAgICB2YXIgZGVmZXJyZWQgPSBuZXcgRGVmZXJyZWQoKTtcclxuICAgICAgICB0aGlzLmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIF90aGlzLnN5bmNFbmdpbmUucnVuVHJhbnNhY3Rpb24oX3RoaXMuYXN5bmNRdWV1ZSwgdXBkYXRlRnVuY3Rpb24sIGRlZmVycmVkKTtcclxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBGaXJlc3RvcmVDbGllbnQ7XHJcbn0oKSk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKlxyXG4gKiBBIHdyYXBwZXIgaW1wbGVtZW50YXRpb24gb2YgT2JzZXJ2ZXI8VD4gdGhhdCB3aWxsIGRpc3BhdGNoIGV2ZW50c1xyXG4gKiBhc3luY2hyb25vdXNseS4gVG8gYWxsb3cgaW1tZWRpYXRlIHNpbGVuY2luZywgYSBtdXRlIGNhbGwgaXMgYWRkZWQgd2hpY2hcclxuICogY2F1c2VzIGV2ZW50cyBzY2hlZHVsZWQgdG8gbm8gbG9uZ2VyIGJlIHJhaXNlZC5cclxuICovXHJcbnZhciBBc3luY09ic2VydmVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gQXN5bmNPYnNlcnZlcihvYnNlcnZlcikge1xyXG4gICAgICAgIHRoaXMub2JzZXJ2ZXIgPSBvYnNlcnZlcjtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBXaGVuIHNldCB0byB0cnVlLCB3aWxsIG5vdCByYWlzZSBmdXR1cmUgZXZlbnRzLiBOZWNlc3NhcnkgdG8gZGVhbCB3aXRoXHJcbiAgICAgICAgICogYXN5bmMgZGV0YWNobWVudCBvZiBsaXN0ZW5lci5cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLm11dGVkID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBBc3luY09ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgICAgdGhpcy5zY2hlZHVsZUV2ZW50KHRoaXMub2JzZXJ2ZXIubmV4dCwgdmFsdWUpO1xyXG4gICAgfTtcclxuICAgIEFzeW5jT2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICAgICAgdGhpcy5zY2hlZHVsZUV2ZW50KHRoaXMub2JzZXJ2ZXIuZXJyb3IsIGVycm9yKTtcclxuICAgIH07XHJcbiAgICBBc3luY09ic2VydmVyLnByb3RvdHlwZS5tdXRlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMubXV0ZWQgPSB0cnVlO1xyXG4gICAgfTtcclxuICAgIEFzeW5jT2JzZXJ2ZXIucHJvdG90eXBlLnNjaGVkdWxlRXZlbnQgPSBmdW5jdGlvbiAoZXZlbnRIYW5kbGVyLCBldmVudCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgaWYgKCF0aGlzLm11dGVkKSB7XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFfdGhpcy5tdXRlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGV2ZW50SGFuZGxlcihldmVudCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sIDApO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICByZXR1cm4gQXN5bmNPYnNlcnZlcjtcclxufSgpKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8vIFRoZSBvYmplY3RzIHRoYXQgYXJlIGEgcGFydCBvZiB0aGlzIEFQSSBhcmUgZXhwb3NlZCB0byB0aGlyZC1wYXJ0aWVzIGFzXHJcbi8vIGNvbXBpbGVkIGphdmFzY3JpcHQgc28gd2Ugd2FudCB0byBmbGFnIG91ciBwcml2YXRlIG1lbWJlcnMgd2l0aCBhIGxlYWRpbmdcclxuLy8gdW5kZXJzY29yZSB0byBkaXNjb3VyYWdlIHRoZWlyIHVzZS5cclxuLyoqXHJcbiAqIEEgRmllbGRQYXRoIHJlZmVycyB0byBhIGZpZWxkIGluIGEgZG9jdW1lbnQuIFRoZSBwYXRoIG1heSBjb25zaXN0IG9mIGEgc2luZ2xlXHJcbiAqIGZpZWxkIG5hbWUgKHJlZmVycmluZyB0byBhIHRvcC1sZXZlbCBmaWVsZCBpbiB0aGUgZG9jdW1lbnQpLCBvciBhIGxpc3Qgb2ZcclxuICogZmllbGQgbmFtZXMgKHJlZmVycmluZyB0byBhIG5lc3RlZCBmaWVsZCBpbiB0aGUgZG9jdW1lbnQpLlxyXG4gKi9cclxudmFyIEZpZWxkUGF0aCQxID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGVzIGEgRmllbGRQYXRoIGZyb20gdGhlIHByb3ZpZGVkIGZpZWxkIG5hbWVzLiBJZiBtb3JlIHRoYW4gb25lIGZpZWxkXHJcbiAgICAgKiBuYW1lIGlzIHByb3ZpZGVkLCB0aGUgcGF0aCB3aWxsIHBvaW50IHRvIGEgbmVzdGVkIGZpZWxkIGluIGEgZG9jdW1lbnQuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGZpZWxkTmFtZXMgQSBsaXN0IG9mIGZpZWxkIG5hbWVzLlxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBGaWVsZFBhdGgkMSgpIHtcclxuICAgICAgICB2YXIgZmllbGROYW1lcyA9IFtdO1xyXG4gICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIGZpZWxkTmFtZXNbX2ldID0gYXJndW1lbnRzW19pXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFsaWRhdGVOYW1lZEFycmF5QXRMZWFzdE51bWJlck9mRWxlbWVudHMoJ0ZpZWxkUGF0aCcsIGZpZWxkTmFtZXMsICdmaWVsZE5hbWVzJywgMSk7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBmaWVsZE5hbWVzLmxlbmd0aDsgKytpKSB7XHJcbiAgICAgICAgICAgIHZhbGlkYXRlQXJnVHlwZSgnRmllbGRQYXRoJywgJ3N0cmluZycsIGksIGZpZWxkTmFtZXNbaV0pO1xyXG4gICAgICAgICAgICBpZiAoZmllbGROYW1lc1tpXS5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLklOVkFMSURfQVJHVU1FTlQsIFwiSW52YWxpZCBmaWVsZCBuYW1lIGF0IGFyZ3VtZW50ICQoaSArIDEpLiBcIiArXHJcbiAgICAgICAgICAgICAgICAgICAgJ0ZpZWxkIG5hbWVzIG11c3Qgbm90IGJlIGVtcHR5LicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX2ludGVybmFsUGF0aCA9IG5ldyBGaWVsZFBhdGgoZmllbGROYW1lcyk7XHJcbiAgICB9XHJcbiAgICBGaWVsZFBhdGgkMS5kb2N1bWVudElkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBGaWVsZFBhdGgkMS5fRE9DVU1FTlRfSUQ7XHJcbiAgICB9O1xyXG4gICAgRmllbGRQYXRoJDEucHJvdG90eXBlLmlzRXF1YWwgPSBmdW5jdGlvbiAob3RoZXIpIHtcclxuICAgICAgICBpZiAoIShvdGhlciBpbnN0YW5jZW9mIEZpZWxkUGF0aCQxKSkge1xyXG4gICAgICAgICAgICB0aHJvdyBpbnZhbGlkQ2xhc3NFcnJvcignaXNFcXVhbCcsICdGaWVsZFBhdGgnLCAxLCBvdGhlcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLl9pbnRlcm5hbFBhdGguaXNFcXVhbChvdGhlci5faW50ZXJuYWxQYXRoKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEludGVybmFsIE5vdGU6IFRoZSBiYWNrZW5kIGRvZXNuJ3QgdGVjaG5pY2FsbHkgc3VwcG9ydCBxdWVyeWluZyBieVxyXG4gICAgICogZG9jdW1lbnQgSUQuIEluc3RlYWQgaXQgcXVlcmllcyBieSB0aGUgZW50aXJlIGRvY3VtZW50IG5hbWUgKGZ1bGwgcGF0aFxyXG4gICAgICogaW5jbHVkZWQpLCBidXQgaW4gdGhlIGNhc2VzIHdlIGN1cnJlbnRseSBzdXBwb3J0IGRvY3VtZW50SWQoKSwgdGhlIG5ldFxyXG4gICAgICogZWZmZWN0IGlzIHRoZSBzYW1lLlxyXG4gICAgICovXHJcbiAgICBGaWVsZFBhdGgkMS5fRE9DVU1FTlRfSUQgPSBuZXcgRmllbGRQYXRoJDEoRmllbGRQYXRoLmtleUZpZWxkKCkuY2Fub25pY2FsU3RyaW5nKCkpO1xyXG4gICAgcmV0dXJuIEZpZWxkUGF0aCQxO1xyXG59KCkpO1xyXG4vKipcclxuICogTWF0Y2hlcyBhbnkgY2hhcmFjdGVycyBpbiBhIGZpZWxkIHBhdGggc3RyaW5nIHRoYXQgYXJlIHJlc2VydmVkLlxyXG4gKi9cclxudmFyIFJFU0VSVkVEID0gbmV3IFJlZ0V4cCgnW35cXFxcKi9cXFxcW1xcXFxdXScpO1xyXG4vKipcclxuICogUGFyc2VzIGEgZmllbGQgcGF0aCBzdHJpbmcgaW50byBhIEZpZWxkUGF0aCwgdHJlYXRpbmcgZG90cyBhcyBzZXBhcmF0b3JzLlxyXG4gKi9cclxuZnVuY3Rpb24gZnJvbURvdFNlcGFyYXRlZFN0cmluZyhwYXRoKSB7XHJcbiAgICB2YXIgZm91bmQgPSBwYXRoLnNlYXJjaChSRVNFUlZFRCk7XHJcbiAgICBpZiAoZm91bmQgPj0gMCkge1xyXG4gICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLklOVkFMSURfQVJHVU1FTlQsIFwiSW52YWxpZCBmaWVsZCBwYXRoIChcIiArIHBhdGggKyBcIikuIFBhdGhzIG11c3Qgbm90IGNvbnRhaW4gXCIgK1xyXG4gICAgICAgICAgICBcIid+JywgJyonLCAnLycsICdbJywgb3IgJ10nXCIpO1xyXG4gICAgfVxyXG4gICAgdHJ5IHtcclxuICAgICAgICByZXR1cm4gbmV3IChGaWVsZFBhdGgkMS5iaW5kLmFwcGx5KEZpZWxkUGF0aCQxLCB0c2xpYi5fX3NwcmVhZEFycmF5cyhbdm9pZCAwXSwgcGF0aC5zcGxpdCgnLicpKSkpKCk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLklOVkFMSURfQVJHVU1FTlQsIFwiSW52YWxpZCBmaWVsZCBwYXRoIChcIiArIHBhdGggKyBcIikuIFBhdGhzIG11c3Qgbm90IGJlIGVtcHR5LCBcIiArXHJcbiAgICAgICAgICAgIFwiYmVnaW4gd2l0aCAnLicsIGVuZCB3aXRoICcuJywgb3IgY29udGFpbiAnLi4nXCIpO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG52YXIgT0F1dGhUb2tlbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIE9BdXRoVG9rZW4odmFsdWUsIHVzZXIpIHtcclxuICAgICAgICB0aGlzLnVzZXIgPSB1c2VyO1xyXG4gICAgICAgIHRoaXMudHlwZSA9ICdPQXV0aCc7XHJcbiAgICAgICAgdGhpcy5hdXRoSGVhZGVycyA9IHt9O1xyXG4gICAgICAgIC8vIFNldCB0aGUgaGVhZGVycyB1c2luZyBPYmplY3QgTGl0ZXJhbCBub3RhdGlvbiB0byBhdm9pZCBtaW5pZmljYXRpb25cclxuICAgICAgICB0aGlzLmF1dGhIZWFkZXJzWydBdXRob3JpemF0aW9uJ10gPSBcIkJlYXJlciBcIiArIHZhbHVlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIE9BdXRoVG9rZW47XHJcbn0oKSk7XHJcbi8qKiBBIENyZWRlbnRpYWxzUHJvdmlkZXIgdGhhdCBhbHdheXMgeWllbGRzIGFuIGVtcHR5IHRva2VuLiAqL1xyXG52YXIgRW1wdHlDcmVkZW50aWFsc1Byb3ZpZGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gRW1wdHlDcmVkZW50aWFsc1Byb3ZpZGVyKCkge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFN0b3JlcyB0aGUgbGlzdGVuZXIgcmVnaXN0ZXJlZCB3aXRoIHNldENoYW5nZUxpc3RlbmVyKClcclxuICAgICAgICAgKiBUaGlzIGlzbid0IGFjdHVhbGx5IG5lY2Vzc2FyeSBzaW5jZSB0aGUgVUlEIG5ldmVyIGNoYW5nZXMsIGJ1dCB3ZSB1c2UgdGhpc1xyXG4gICAgICAgICAqIHRvIHZlcmlmeSB0aGUgbGlzdGVuIGNvbnRyYWN0IGlzIGFkaGVyZWQgdG8gaW4gdGVzdHMuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5jaGFuZ2VMaXN0ZW5lciA9IG51bGw7XHJcbiAgICB9XHJcbiAgICBFbXB0eUNyZWRlbnRpYWxzUHJvdmlkZXIucHJvdG90eXBlLmdldFRva2VuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUobnVsbCk7XHJcbiAgICB9O1xyXG4gICAgRW1wdHlDcmVkZW50aWFsc1Byb3ZpZGVyLnByb3RvdHlwZS5pbnZhbGlkYXRlVG9rZW4gPSBmdW5jdGlvbiAoKSB7IH07XHJcbiAgICBFbXB0eUNyZWRlbnRpYWxzUHJvdmlkZXIucHJvdG90eXBlLnNldENoYW5nZUxpc3RlbmVyID0gZnVuY3Rpb24gKGNoYW5nZUxpc3RlbmVyKSB7XHJcbiAgICAgICAgYXNzZXJ0KCF0aGlzLmNoYW5nZUxpc3RlbmVyLCAnQ2FuIG9ubHkgY2FsbCBzZXRDaGFuZ2VMaXN0ZW5lcigpIG9uY2UuJyk7XHJcbiAgICAgICAgdGhpcy5jaGFuZ2VMaXN0ZW5lciA9IGNoYW5nZUxpc3RlbmVyO1xyXG4gICAgICAgIC8vIEZpcmUgd2l0aCBpbml0aWFsIHVzZXIuXHJcbiAgICAgICAgY2hhbmdlTGlzdGVuZXIoVXNlci5VTkFVVEhFTlRJQ0FURUQpO1xyXG4gICAgfTtcclxuICAgIEVtcHR5Q3JlZGVudGlhbHNQcm92aWRlci5wcm90b3R5cGUucmVtb3ZlQ2hhbmdlTGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgYXNzZXJ0KHRoaXMuY2hhbmdlTGlzdGVuZXIgIT09IG51bGwsICdyZW1vdmVDaGFuZ2VMaXN0ZW5lcigpIHdoZW4gbm8gbGlzdGVuZXIgcmVnaXN0ZXJlZCcpO1xyXG4gICAgICAgIHRoaXMuY2hhbmdlTGlzdGVuZXIgPSBudWxsO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBFbXB0eUNyZWRlbnRpYWxzUHJvdmlkZXI7XHJcbn0oKSk7XHJcbnZhciBGaXJlYmFzZUNyZWRlbnRpYWxzUHJvdmlkZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBGaXJlYmFzZUNyZWRlbnRpYWxzUHJvdmlkZXIoYXV0aFByb3ZpZGVyKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBUaGUgYXV0aCB0b2tlbiBsaXN0ZW5lciByZWdpc3RlcmVkIHdpdGggRmlyZWJhc2VBcHAsIHJldGFpbmVkIGhlcmUgc28gd2VcclxuICAgICAgICAgKiBjYW4gdW5yZWdpc3RlciBpdC5cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLnRva2VuTGlzdGVuZXIgPSBudWxsO1xyXG4gICAgICAgIC8qKiBUcmFja3MgdGhlIGN1cnJlbnQgVXNlci4gKi9cclxuICAgICAgICB0aGlzLmN1cnJlbnRVc2VyID0gVXNlci5VTkFVVEhFTlRJQ0FURUQ7XHJcbiAgICAgICAgdGhpcy5yZWNlaXZlZEluaXRpYWxVc2VyID0gZmFsc2U7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ291bnRlciB1c2VkIHRvIGRldGVjdCBpZiB0aGUgdG9rZW4gY2hhbmdlZCB3aGlsZSBhIGdldFRva2VuIHJlcXVlc3Qgd2FzXHJcbiAgICAgICAgICogb3V0c3RhbmRpbmcuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy50b2tlbkNvdW50ZXIgPSAwO1xyXG4gICAgICAgIC8qKiBUaGUgbGlzdGVuZXIgcmVnaXN0ZXJlZCB3aXRoIHNldENoYW5nZUxpc3RlbmVyKCkuICovXHJcbiAgICAgICAgdGhpcy5jaGFuZ2VMaXN0ZW5lciA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5mb3JjZVJlZnJlc2ggPSBmYWxzZTtcclxuICAgICAgICB0aGlzLnRva2VuTGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIF90aGlzLnRva2VuQ291bnRlcisrO1xyXG4gICAgICAgICAgICBfdGhpcy5jdXJyZW50VXNlciA9IF90aGlzLmdldFVzZXIoKTtcclxuICAgICAgICAgICAgX3RoaXMucmVjZWl2ZWRJbml0aWFsVXNlciA9IHRydWU7XHJcbiAgICAgICAgICAgIGlmIChfdGhpcy5jaGFuZ2VMaXN0ZW5lcikge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuY2hhbmdlTGlzdGVuZXIoX3RoaXMuY3VycmVudFVzZXIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLnRva2VuQ291bnRlciA9IDA7XHJcbiAgICAgICAgdGhpcy5hdXRoID0gYXV0aFByb3ZpZGVyLmdldEltbWVkaWF0ZSh7IG9wdGlvbmFsOiB0cnVlIH0pO1xyXG4gICAgICAgIGlmICh0aGlzLmF1dGgpIHtcclxuICAgICAgICAgICAgdGhpcy5hdXRoLmFkZEF1dGhUb2tlbkxpc3RlbmVyKHRoaXMudG9rZW5MaXN0ZW5lcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBpZiBhdXRoIGlzIG5vdCBhdmFpbGFibGUsIGludm9rZSB0b2tlbkxpc3RlbmVyIG9uY2Ugd2l0aCBudWxsIHRva2VuXHJcbiAgICAgICAgICAgIHRoaXMudG9rZW5MaXN0ZW5lcihudWxsKTtcclxuICAgICAgICAgICAgYXV0aFByb3ZpZGVyLmdldCgpLnRoZW4oZnVuY3Rpb24gKGF1dGgpIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLmF1dGggPSBhdXRoO1xyXG4gICAgICAgICAgICAgICAgaWYgKF90aGlzLnRva2VuTGlzdGVuZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyB0b2tlbkxpc3RlbmVyIGNhbiBiZSByZW1vdmVkIGJ5IHJlbW92ZUNoYW5nZUxpc3RlbmVyKClcclxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5hdXRoLmFkZEF1dGhUb2tlbkxpc3RlbmVyKF90aGlzLnRva2VuTGlzdGVuZXIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAvKiB0aGlzLmF1dGhQcm92aWRlci5nZXQoKSBuZXZlciByZWplY3RzICovXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIEZpcmViYXNlQ3JlZGVudGlhbHNQcm92aWRlci5wcm90b3R5cGUuZ2V0VG9rZW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBhc3NlcnQodGhpcy50b2tlbkxpc3RlbmVyICE9IG51bGwsICdnZXRUb2tlbiBjYW5ub3QgYmUgY2FsbGVkIGFmdGVyIGxpc3RlbmVyIHJlbW92ZWQuJyk7XHJcbiAgICAgICAgLy8gVGFrZSBub3RlIG9mIHRoZSBjdXJyZW50IHZhbHVlIG9mIHRoZSB0b2tlbkNvdW50ZXIgc28gdGhhdCB0aGlzIG1ldGhvZFxyXG4gICAgICAgIC8vIGNhbiBmYWlsICh3aXRoIGFuIEFCT1JURUQgZXJyb3IpIGlmIHRoZXJlIGlzIGEgdG9rZW4gY2hhbmdlIHdoaWxlIHRoZVxyXG4gICAgICAgIC8vIHJlcXVlc3QgaXMgb3V0c3RhbmRpbmcuXHJcbiAgICAgICAgdmFyIGluaXRpYWxUb2tlbkNvdW50ZXIgPSB0aGlzLnRva2VuQ291bnRlcjtcclxuICAgICAgICB2YXIgZm9yY2VSZWZyZXNoID0gdGhpcy5mb3JjZVJlZnJlc2g7XHJcbiAgICAgICAgdGhpcy5mb3JjZVJlZnJlc2ggPSBmYWxzZTtcclxuICAgICAgICBpZiAoIXRoaXMuYXV0aCkge1xyXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKG51bGwpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5hdXRoLmdldFRva2VuKGZvcmNlUmVmcmVzaCkudGhlbihmdW5jdGlvbiAodG9rZW5EYXRhKSB7XHJcbiAgICAgICAgICAgIC8vIENhbmNlbCB0aGUgcmVxdWVzdCBzaW5jZSB0aGUgdG9rZW4gY2hhbmdlZCB3aGlsZSB0aGUgcmVxdWVzdCB3YXNcclxuICAgICAgICAgICAgLy8gb3V0c3RhbmRpbmcgc28gdGhlIHJlc3BvbnNlIGlzIHBvdGVudGlhbGx5IGZvciBhIHByZXZpb3VzIHVzZXIgKHdoaWNoXHJcbiAgICAgICAgICAgIC8vIHVzZXIsIHdlIGNhbid0IGJlIHN1cmUpLlxyXG4gICAgICAgICAgICBpZiAoX3RoaXMudG9rZW5Db3VudGVyICE9PSBpbml0aWFsVG9rZW5Db3VudGVyKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5BQk9SVEVELCAnZ2V0VG9rZW4gYWJvcnRlZCBkdWUgdG8gdG9rZW4gY2hhbmdlLicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRva2VuRGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGFzc2VydCh0eXBlb2YgdG9rZW5EYXRhLmFjY2Vzc1Rva2VuID09PSAnc3RyaW5nJywgJ0ludmFsaWQgdG9rZW5EYXRhIHJldHVybmVkIGZyb20gZ2V0VG9rZW4oKTonICsgdG9rZW5EYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IE9BdXRoVG9rZW4odG9rZW5EYXRhLmFjY2Vzc1Rva2VuLCBfdGhpcy5jdXJyZW50VXNlcik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIEZpcmViYXNlQ3JlZGVudGlhbHNQcm92aWRlci5wcm90b3R5cGUuaW52YWxpZGF0ZVRva2VuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuZm9yY2VSZWZyZXNoID0gdHJ1ZTtcclxuICAgIH07XHJcbiAgICBGaXJlYmFzZUNyZWRlbnRpYWxzUHJvdmlkZXIucHJvdG90eXBlLnNldENoYW5nZUxpc3RlbmVyID0gZnVuY3Rpb24gKGNoYW5nZUxpc3RlbmVyKSB7XHJcbiAgICAgICAgYXNzZXJ0KCF0aGlzLmNoYW5nZUxpc3RlbmVyLCAnQ2FuIG9ubHkgY2FsbCBzZXRDaGFuZ2VMaXN0ZW5lcigpIG9uY2UuJyk7XHJcbiAgICAgICAgdGhpcy5jaGFuZ2VMaXN0ZW5lciA9IGNoYW5nZUxpc3RlbmVyO1xyXG4gICAgICAgIC8vIEZpcmUgdGhlIGluaXRpYWwgZXZlbnRcclxuICAgICAgICBpZiAodGhpcy5yZWNlaXZlZEluaXRpYWxVc2VyKSB7XHJcbiAgICAgICAgICAgIGNoYW5nZUxpc3RlbmVyKHRoaXMuY3VycmVudFVzZXIpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBGaXJlYmFzZUNyZWRlbnRpYWxzUHJvdmlkZXIucHJvdG90eXBlLnJlbW92ZUNoYW5nZUxpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGFzc2VydCh0aGlzLnRva2VuTGlzdGVuZXIgIT0gbnVsbCwgJ3JlbW92ZUNoYW5nZUxpc3RlbmVyKCkgY2FsbGVkIHR3aWNlJyk7XHJcbiAgICAgICAgYXNzZXJ0KHRoaXMuY2hhbmdlTGlzdGVuZXIgIT09IG51bGwsICdyZW1vdmVDaGFuZ2VMaXN0ZW5lcigpIGNhbGxlZCB3aGVuIG5vIGxpc3RlbmVyIHJlZ2lzdGVyZWQnKTtcclxuICAgICAgICBpZiAodGhpcy5hdXRoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYXV0aC5yZW1vdmVBdXRoVG9rZW5MaXN0ZW5lcih0aGlzLnRva2VuTGlzdGVuZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnRva2VuTGlzdGVuZXIgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuY2hhbmdlTGlzdGVuZXIgPSBudWxsO1xyXG4gICAgfTtcclxuICAgIC8vIEF1dGguZ2V0VWlkKCkgY2FuIHJldHVybiBudWxsIGV2ZW4gd2l0aCBhIHVzZXIgbG9nZ2VkIGluLiBJdCBpcyBiZWNhdXNlXHJcbiAgICAvLyBnZXRVaWQoKSBpcyBzeW5jaHJvbm91cywgYnV0IHRoZSBhdXRoIGNvZGUgcG9wdWxhdGluZyBVaWQgaXMgYXN5bmNocm9ub3VzLlxyXG4gICAgLy8gVGhpcyBtZXRob2Qgc2hvdWxkIG9ubHkgYmUgY2FsbGVkIGluIHRoZSBBdXRoVG9rZW5MaXN0ZW5lciBjYWxsYmFja1xyXG4gICAgLy8gdG8gZ3VhcmFudGVlIHRvIGdldCB0aGUgYWN0dWFsIHVzZXIuXHJcbiAgICBGaXJlYmFzZUNyZWRlbnRpYWxzUHJvdmlkZXIucHJvdG90eXBlLmdldFVzZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGN1cnJlbnRVaWQgPSB0aGlzLmF1dGggJiYgdGhpcy5hdXRoLmdldFVpZCgpO1xyXG4gICAgICAgIGFzc2VydChjdXJyZW50VWlkID09PSBudWxsIHx8IHR5cGVvZiBjdXJyZW50VWlkID09PSAnc3RyaW5nJywgJ1JlY2VpdmVkIGludmFsaWQgVUlEOiAnICsgY3VycmVudFVpZCk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBVc2VyKGN1cnJlbnRVaWQpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBGaXJlYmFzZUNyZWRlbnRpYWxzUHJvdmlkZXI7XHJcbn0oKSk7XHJcbi8qXHJcbiAqIEZpcnN0UGFydHlUb2tlbiBwcm92aWRlcyBhIGZyZXNoIHRva2VuIGVhY2ggdGltZSBpdHMgdmFsdWVcclxuICogaXMgcmVxdWVzdGVkLCBiZWNhdXNlIGlmIHRoZSB0b2tlbiBpcyB0b28gb2xkLCByZXF1ZXN0cyB3aWxsIGJlIHJlamVjdGVkLlxyXG4gKiBUZWNobmljYWxseSB0aGlzIG1heSBubyBsb25nZXIgYmUgbmVjZXNzYXJ5IHNpbmNlIHRoZSBTREsgc2hvdWxkIGdyYWNlZnVsbHlcclxuICogcmVjb3ZlciBmcm9tIHVuYXV0aGVudGljYXRlZCBlcnJvcnMgKHNlZSBiLzMzMTQ3ODE4IGZvciBjb250ZXh0KSwgYnV0IGl0J3NcclxuICogc2FmZXIgdG8ga2VlcCB0aGUgaW1wbGVtZW50YXRpb24gYXMtaXMuXHJcbiAqL1xyXG52YXIgRmlyc3RQYXJ0eVRva2VuID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gRmlyc3RQYXJ0eVRva2VuKGdhcGksIHNlc3Npb25JbmRleCkge1xyXG4gICAgICAgIHRoaXMuZ2FwaSA9IGdhcGk7XHJcbiAgICAgICAgdGhpcy5zZXNzaW9uSW5kZXggPSBzZXNzaW9uSW5kZXg7XHJcbiAgICAgICAgdGhpcy50eXBlID0gJ0ZpcnN0UGFydHknO1xyXG4gICAgICAgIHRoaXMudXNlciA9IFVzZXIuRklSU1RfUEFSVFk7XHJcbiAgICB9XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoRmlyc3RQYXJ0eVRva2VuLnByb3RvdHlwZSwgXCJhdXRoSGVhZGVyc1wiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBoZWFkZXJzID0ge1xyXG4gICAgICAgICAgICAgICAgJ1gtR29vZy1BdXRoVXNlcic6IHRoaXMuc2Vzc2lvbkluZGV4XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHZhciBhdXRoSGVhZGVyID0gdGhpcy5nYXBpLmF1dGguZ2V0QXV0aEhlYWRlclZhbHVlRm9yRmlyc3RQYXJ0eShbXSk7XHJcbiAgICAgICAgICAgIGlmIChhdXRoSGVhZGVyKSB7XHJcbiAgICAgICAgICAgICAgICBoZWFkZXJzWydBdXRob3JpemF0aW9uJ10gPSBhdXRoSGVhZGVyO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBoZWFkZXJzO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIEZpcnN0UGFydHlUb2tlbjtcclxufSgpKTtcclxuLypcclxuICogUHJvdmlkZXMgdXNlciBjcmVkZW50aWFscyByZXF1aXJlZCBmb3IgdGhlIEZpcmVzdG9yZSBKYXZhU2NyaXB0IFNES1xyXG4gKiB0byBhdXRoZW50aWNhdGUgdGhlIHVzZXIsIHVzaW5nIHRlY2huaXF1ZSB0aGF0IGlzIG9ubHkgYXZhaWxhYmxlXHJcbiAqIHRvIGFwcGxpY2F0aW9ucyBob3N0ZWQgYnkgR29vZ2xlLlxyXG4gKi9cclxudmFyIEZpcnN0UGFydHlDcmVkZW50aWFsc1Byb3ZpZGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gRmlyc3RQYXJ0eUNyZWRlbnRpYWxzUHJvdmlkZXIoZ2FwaSwgc2Vzc2lvbkluZGV4KSB7XHJcbiAgICAgICAgdGhpcy5nYXBpID0gZ2FwaTtcclxuICAgICAgICB0aGlzLnNlc3Npb25JbmRleCA9IHNlc3Npb25JbmRleDtcclxuICAgIH1cclxuICAgIEZpcnN0UGFydHlDcmVkZW50aWFsc1Byb3ZpZGVyLnByb3RvdHlwZS5nZXRUb2tlbiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKG5ldyBGaXJzdFBhcnR5VG9rZW4odGhpcy5nYXBpLCB0aGlzLnNlc3Npb25JbmRleCkpO1xyXG4gICAgfTtcclxuICAgIEZpcnN0UGFydHlDcmVkZW50aWFsc1Byb3ZpZGVyLnByb3RvdHlwZS5zZXRDaGFuZ2VMaXN0ZW5lciA9IGZ1bmN0aW9uIChjaGFuZ2VMaXN0ZW5lcikge1xyXG4gICAgICAgIC8vIEZpcmUgd2l0aCBpbml0aWFsIHVpZC5cclxuICAgICAgICBjaGFuZ2VMaXN0ZW5lcihVc2VyLkZJUlNUX1BBUlRZKTtcclxuICAgIH07XHJcbiAgICBGaXJzdFBhcnR5Q3JlZGVudGlhbHNQcm92aWRlci5wcm90b3R5cGUucmVtb3ZlQ2hhbmdlTGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7IH07XHJcbiAgICBGaXJzdFBhcnR5Q3JlZGVudGlhbHNQcm92aWRlci5wcm90b3R5cGUuaW52YWxpZGF0ZVRva2VuID0gZnVuY3Rpb24gKCkgeyB9O1xyXG4gICAgcmV0dXJuIEZpcnN0UGFydHlDcmVkZW50aWFsc1Byb3ZpZGVyO1xyXG59KCkpO1xyXG4vKipcclxuICogQnVpbGRzIGEgQ3JlZGVudGlhbHNQcm92aWRlciBkZXBlbmRpbmcgb24gdGhlIHR5cGUgb2ZcclxuICogdGhlIGNyZWRlbnRpYWxzIHBhc3NlZCBpbi5cclxuICovXHJcbmZ1bmN0aW9uIG1ha2VDcmVkZW50aWFsc1Byb3ZpZGVyKGNyZWRlbnRpYWxzKSB7XHJcbiAgICBpZiAoIWNyZWRlbnRpYWxzKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBFbXB0eUNyZWRlbnRpYWxzUHJvdmlkZXIoKTtcclxuICAgIH1cclxuICAgIHN3aXRjaCAoY3JlZGVudGlhbHMudHlwZSkge1xyXG4gICAgICAgIGNhc2UgJ2dhcGknOlxyXG4gICAgICAgICAgICB2YXIgY2xpZW50ID0gY3JlZGVudGlhbHMuY2xpZW50O1xyXG4gICAgICAgICAgICAvLyBNYWtlIHN1cmUgdGhpcyByZWFsbHkgaXMgYSBHYXBpIGNsaWVudC5cclxuICAgICAgICAgICAgYXNzZXJ0KCEhKHR5cGVvZiBjbGllbnQgPT09ICdvYmplY3QnICYmXHJcbiAgICAgICAgICAgICAgICBjbGllbnQgIT09IG51bGwgJiZcclxuICAgICAgICAgICAgICAgIGNsaWVudFsnYXV0aCddICYmXHJcbiAgICAgICAgICAgICAgICBjbGllbnRbJ2F1dGgnXVsnZ2V0QXV0aEhlYWRlclZhbHVlRm9yRmlyc3RQYXJ0eSddKSwgJ3VuZXhwZWN0ZWQgZ2FwaSBpbnRlcmZhY2UnKTtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBGaXJzdFBhcnR5Q3JlZGVudGlhbHNQcm92aWRlcihjbGllbnQsIGNyZWRlbnRpYWxzLnNlc3Npb25JbmRleCB8fCAnMCcpO1xyXG4gICAgICAgIGNhc2UgJ3Byb3ZpZGVyJzpcclxuICAgICAgICAgICAgcmV0dXJuIGNyZWRlbnRpYWxzLmNsaWVudDtcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5JTlZBTElEX0FSR1VNRU5ULCAnbWFrZUNyZWRlbnRpYWxzUHJvdmlkZXIgZmFpbGVkIGR1ZSB0byBpbnZhbGlkIGNyZWRlbnRpYWwgdHlwZScpO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBpc1BhcnRpYWxPYnNlcnZlcihvYmopIHtcclxuICAgIHJldHVybiBpbXBsZW1lbnRzQW55TWV0aG9kcyhvYmosIFsnbmV4dCcsICdlcnJvcicsICdjb21wbGV0ZSddKTtcclxufVxyXG4vKipcclxuICogUmV0dXJucyB0cnVlIGlmIG9iaiBpcyBhbiBvYmplY3QgYW5kIGNvbnRhaW5zIGF0IGxlYXN0IG9uZSBvZiB0aGUgc3BlY2lmaWVkXHJcbiAqIG1ldGhvZHMuXHJcbiAqL1xyXG5mdW5jdGlvbiBpbXBsZW1lbnRzQW55TWV0aG9kcyhvYmosIG1ldGhvZHMpIHtcclxuICAgIGlmICh0eXBlb2Ygb2JqICE9PSAnb2JqZWN0JyB8fCBvYmogPT09IG51bGwpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICB2YXIgb2JqZWN0ID0gb2JqO1xyXG4gICAgZm9yICh2YXIgX2kgPSAwLCBtZXRob2RzXzEgPSBtZXRob2RzOyBfaSA8IG1ldGhvZHNfMS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICB2YXIgbWV0aG9kID0gbWV0aG9kc18xW19pXTtcclxuICAgICAgICBpZiAobWV0aG9kIGluIG9iamVjdCAmJiB0eXBlb2Ygb2JqZWN0W21ldGhvZF0gPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQW4gb3BhcXVlIGJhc2UgY2xhc3MgZm9yIEZpZWxkVmFsdWUgc2VudGluZWwgb2JqZWN0cyBpbiBvdXIgcHVibGljIEFQSSxcclxuICogd2l0aCBwdWJsaWMgc3RhdGljIG1ldGhvZHMgZm9yIGNyZWF0aW5nIHNhaWQgc2VudGluZWwgb2JqZWN0cy5cclxuICovXHJcbnZhciBGaWVsZFZhbHVlSW1wbCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEZpZWxkVmFsdWVJbXBsKF9tZXRob2ROYW1lKSB7XHJcbiAgICAgICAgdGhpcy5fbWV0aG9kTmFtZSA9IF9tZXRob2ROYW1lO1xyXG4gICAgfVxyXG4gICAgRmllbGRWYWx1ZUltcGwuZGVsZXRlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhbGlkYXRlTm9BcmdzKCdGaWVsZFZhbHVlLmRlbGV0ZScsIGFyZ3VtZW50cyk7XHJcbiAgICAgICAgcmV0dXJuIERlbGV0ZUZpZWxkVmFsdWVJbXBsLmluc3RhbmNlO1xyXG4gICAgfTtcclxuICAgIEZpZWxkVmFsdWVJbXBsLnNlcnZlclRpbWVzdGFtcCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YWxpZGF0ZU5vQXJncygnRmllbGRWYWx1ZS5zZXJ2ZXJUaW1lc3RhbXAnLCBhcmd1bWVudHMpO1xyXG4gICAgICAgIHJldHVybiBTZXJ2ZXJUaW1lc3RhbXBGaWVsZFZhbHVlSW1wbC5pbnN0YW5jZTtcclxuICAgIH07XHJcbiAgICBGaWVsZFZhbHVlSW1wbC5hcnJheVVuaW9uID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBlbGVtZW50cyA9IFtdO1xyXG4gICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIGVsZW1lbnRzW19pXSA9IGFyZ3VtZW50c1tfaV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhbGlkYXRlQXRMZWFzdE51bWJlck9mQXJncygnRmllbGRWYWx1ZS5hcnJheVVuaW9uJywgYXJndW1lbnRzLCAxKTtcclxuICAgICAgICAvLyBOT1RFOiBXZSBkb24ndCBhY3R1YWxseSBwYXJzZSB0aGUgZGF0YSB1bnRpbCBpdCdzIHVzZWQgaW4gc2V0KCkgb3JcclxuICAgICAgICAvLyB1cGRhdGUoKSBzaW5jZSB3ZSBuZWVkIGFjY2VzcyB0byB0aGUgRmlyZXN0b3JlIGluc3RhbmNlLlxyXG4gICAgICAgIHJldHVybiBuZXcgQXJyYXlVbmlvbkZpZWxkVmFsdWVJbXBsKGVsZW1lbnRzKTtcclxuICAgIH07XHJcbiAgICBGaWVsZFZhbHVlSW1wbC5hcnJheVJlbW92ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgZWxlbWVudHMgPSBbXTtcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICBlbGVtZW50c1tfaV0gPSBhcmd1bWVudHNbX2ldO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YWxpZGF0ZUF0TGVhc3ROdW1iZXJPZkFyZ3MoJ0ZpZWxkVmFsdWUuYXJyYXlSZW1vdmUnLCBhcmd1bWVudHMsIDEpO1xyXG4gICAgICAgIC8vIE5PVEU6IFdlIGRvbid0IGFjdHVhbGx5IHBhcnNlIHRoZSBkYXRhIHVudGlsIGl0J3MgdXNlZCBpbiBzZXQoKSBvclxyXG4gICAgICAgIC8vIHVwZGF0ZSgpIHNpbmNlIHdlIG5lZWQgYWNjZXNzIHRvIHRoZSBGaXJlc3RvcmUgaW5zdGFuY2UuXHJcbiAgICAgICAgcmV0dXJuIG5ldyBBcnJheVJlbW92ZUZpZWxkVmFsdWVJbXBsKGVsZW1lbnRzKTtcclxuICAgIH07XHJcbiAgICBGaWVsZFZhbHVlSW1wbC5pbmNyZW1lbnQgPSBmdW5jdGlvbiAobikge1xyXG4gICAgICAgIHZhbGlkYXRlQXJnVHlwZSgnRmllbGRWYWx1ZS5pbmNyZW1lbnQnLCAnbnVtYmVyJywgMSwgbik7XHJcbiAgICAgICAgdmFsaWRhdGVFeGFjdE51bWJlck9mQXJncygnRmllbGRWYWx1ZS5pbmNyZW1lbnQnLCBhcmd1bWVudHMsIDEpO1xyXG4gICAgICAgIHJldHVybiBuZXcgTnVtZXJpY0luY3JlbWVudEZpZWxkVmFsdWVJbXBsKG4pO1xyXG4gICAgfTtcclxuICAgIEZpZWxkVmFsdWVJbXBsLnByb3RvdHlwZS5pc0VxdWFsID0gZnVuY3Rpb24gKG90aGVyKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMgPT09IG90aGVyO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBGaWVsZFZhbHVlSW1wbDtcclxufSgpKTtcclxudmFyIERlbGV0ZUZpZWxkVmFsdWVJbXBsID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgdHNsaWIuX19leHRlbmRzKERlbGV0ZUZpZWxkVmFsdWVJbXBsLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gRGVsZXRlRmllbGRWYWx1ZUltcGwoKSB7XHJcbiAgICAgICAgcmV0dXJuIF9zdXBlci5jYWxsKHRoaXMsICdGaWVsZFZhbHVlLmRlbGV0ZScpIHx8IHRoaXM7XHJcbiAgICB9XHJcbiAgICAvKiogU2luZ2xldG9uIGluc3RhbmNlLiAqL1xyXG4gICAgRGVsZXRlRmllbGRWYWx1ZUltcGwuaW5zdGFuY2UgPSBuZXcgRGVsZXRlRmllbGRWYWx1ZUltcGwoKTtcclxuICAgIHJldHVybiBEZWxldGVGaWVsZFZhbHVlSW1wbDtcclxufShGaWVsZFZhbHVlSW1wbCkpO1xyXG52YXIgU2VydmVyVGltZXN0YW1wRmllbGRWYWx1ZUltcGwgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICB0c2xpYi5fX2V4dGVuZHMoU2VydmVyVGltZXN0YW1wRmllbGRWYWx1ZUltcGwsIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBTZXJ2ZXJUaW1lc3RhbXBGaWVsZFZhbHVlSW1wbCgpIHtcclxuICAgICAgICByZXR1cm4gX3N1cGVyLmNhbGwodGhpcywgJ0ZpZWxkVmFsdWUuc2VydmVyVGltZXN0YW1wJykgfHwgdGhpcztcclxuICAgIH1cclxuICAgIC8qKiBTaW5nbGV0b24gaW5zdGFuY2UuICovXHJcbiAgICBTZXJ2ZXJUaW1lc3RhbXBGaWVsZFZhbHVlSW1wbC5pbnN0YW5jZSA9IG5ldyBTZXJ2ZXJUaW1lc3RhbXBGaWVsZFZhbHVlSW1wbCgpO1xyXG4gICAgcmV0dXJuIFNlcnZlclRpbWVzdGFtcEZpZWxkVmFsdWVJbXBsO1xyXG59KEZpZWxkVmFsdWVJbXBsKSk7XHJcbnZhciBBcnJheVVuaW9uRmllbGRWYWx1ZUltcGwgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICB0c2xpYi5fX2V4dGVuZHMoQXJyYXlVbmlvbkZpZWxkVmFsdWVJbXBsLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gQXJyYXlVbmlvbkZpZWxkVmFsdWVJbXBsKF9lbGVtZW50cykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsICdGaWVsZFZhbHVlLmFycmF5VW5pb24nKSB8fCB0aGlzO1xyXG4gICAgICAgIF90aGlzLl9lbGVtZW50cyA9IF9lbGVtZW50cztcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gQXJyYXlVbmlvbkZpZWxkVmFsdWVJbXBsO1xyXG59KEZpZWxkVmFsdWVJbXBsKSk7XHJcbnZhciBBcnJheVJlbW92ZUZpZWxkVmFsdWVJbXBsID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgdHNsaWIuX19leHRlbmRzKEFycmF5UmVtb3ZlRmllbGRWYWx1ZUltcGwsIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBBcnJheVJlbW92ZUZpZWxkVmFsdWVJbXBsKF9lbGVtZW50cykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsICdGaWVsZFZhbHVlLmFycmF5UmVtb3ZlJykgfHwgdGhpcztcclxuICAgICAgICBfdGhpcy5fZWxlbWVudHMgPSBfZWxlbWVudHM7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIEFycmF5UmVtb3ZlRmllbGRWYWx1ZUltcGw7XHJcbn0oRmllbGRWYWx1ZUltcGwpKTtcclxudmFyIE51bWVyaWNJbmNyZW1lbnRGaWVsZFZhbHVlSW1wbCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIHRzbGliLl9fZXh0ZW5kcyhOdW1lcmljSW5jcmVtZW50RmllbGRWYWx1ZUltcGwsIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBOdW1lcmljSW5jcmVtZW50RmllbGRWYWx1ZUltcGwoX29wZXJhbmQpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCAnRmllbGRWYWx1ZS5pbmNyZW1lbnQnKSB8fCB0aGlzO1xyXG4gICAgICAgIF90aGlzLl9vcGVyYW5kID0gX29wZXJhbmQ7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIE51bWVyaWNJbmNyZW1lbnRGaWVsZFZhbHVlSW1wbDtcclxufShGaWVsZFZhbHVlSW1wbCkpO1xyXG4vLyBQdWJsaWMgaW5zdGFuY2UgdGhhdCBkaXNhbGxvd3MgY29uc3RydWN0aW9uIGF0IHJ1bnRpbWUuIFRoaXMgY29uc3RydWN0b3IgaXNcclxuLy8gdXNlZCB3aGVuIGV4cG9ydGluZyBGaWVsZFZhbHVlSW1wbCBvbiBmaXJlYmFzZS5maXJlc3RvcmUuRmllbGRWYWx1ZSBhbmQgd2lsbFxyXG4vLyBiZSBjYWxsZWQgRmllbGRWYWx1ZSBwdWJsaWNseS4gSW50ZXJuYWxseSB3ZSBzdGlsbCB1c2UgRmllbGRWYWx1ZUltcGwgd2hpY2hcclxuLy8gaGFzIGEgdHlwZS1jaGVja2VkIHByaXZhdGUgY29uc3RydWN0b3IuIE5vdGUgdGhhdCBGaWVsZFZhbHVlSW1wbCBhbmRcclxuLy8gUHVibGljRmllbGRWYWx1ZSBjYW4gYmUgdXNlZCBpbnRlcmNoYW5nZWFibHkgaW4gaW5zdGFuY2VvZiBjaGVja3MuXHJcbi8vIEZvciBvdXIgaW50ZXJuYWwgVHlwZVNjcmlwdCBjb2RlIFB1YmxpY0ZpZWxkVmFsdWUgZG9lc24ndCBleGlzdCBhcyBhIHR5cGUsXHJcbi8vIGFuZCBzbyB3ZSBuZWVkIHRvIHVzZSBGaWVsZFZhbHVlSW1wbCBhcyB0eXBlIGFuZCBleHBvcnQgaXQgdG9vLlxyXG52YXIgUHVibGljRmllbGRWYWx1ZSA9IG1ha2VDb25zdHJ1Y3RvclByaXZhdGUoRmllbGRWYWx1ZUltcGwsICdVc2UgRmllbGRWYWx1ZS48ZmllbGQ+KCkgaW5zdGVhZC4nKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnZhciBSRVNFUlZFRF9GSUVMRF9SRUdFWCA9IC9eX18uKl9fJC87XHJcbi8qKiBUaGUgcmVzdWx0IG9mIHBhcnNpbmcgZG9jdW1lbnQgZGF0YSAoZS5nLiBmb3IgYSBzZXREYXRhIGNhbGwpLiAqL1xyXG52YXIgUGFyc2VkU2V0RGF0YSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFBhcnNlZFNldERhdGEoZGF0YSwgZmllbGRNYXNrLCBmaWVsZFRyYW5zZm9ybXMpIHtcclxuICAgICAgICB0aGlzLmRhdGEgPSBkYXRhO1xyXG4gICAgICAgIHRoaXMuZmllbGRNYXNrID0gZmllbGRNYXNrO1xyXG4gICAgICAgIHRoaXMuZmllbGRUcmFuc2Zvcm1zID0gZmllbGRUcmFuc2Zvcm1zO1xyXG4gICAgfVxyXG4gICAgUGFyc2VkU2V0RGF0YS5wcm90b3R5cGUudG9NdXRhdGlvbnMgPSBmdW5jdGlvbiAoa2V5LCBwcmVjb25kaXRpb24pIHtcclxuICAgICAgICB2YXIgbXV0YXRpb25zID0gW107XHJcbiAgICAgICAgaWYgKHRoaXMuZmllbGRNYXNrICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIG11dGF0aW9ucy5wdXNoKG5ldyBQYXRjaE11dGF0aW9uKGtleSwgdGhpcy5kYXRhLCB0aGlzLmZpZWxkTWFzaywgcHJlY29uZGl0aW9uKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBtdXRhdGlvbnMucHVzaChuZXcgU2V0TXV0YXRpb24oa2V5LCB0aGlzLmRhdGEsIHByZWNvbmRpdGlvbikpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5maWVsZFRyYW5zZm9ybXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBtdXRhdGlvbnMucHVzaChuZXcgVHJhbnNmb3JtTXV0YXRpb24oa2V5LCB0aGlzLmZpZWxkVHJhbnNmb3JtcykpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbXV0YXRpb25zO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBQYXJzZWRTZXREYXRhO1xyXG59KCkpO1xyXG4vKiogVGhlIHJlc3VsdCBvZiBwYXJzaW5nIFwidXBkYXRlXCIgZGF0YSAoaS5lLiBmb3IgYW4gdXBkYXRlRGF0YSBjYWxsKS4gKi9cclxudmFyIFBhcnNlZFVwZGF0ZURhdGEgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBQYXJzZWRVcGRhdGVEYXRhKGRhdGEsIGZpZWxkTWFzaywgZmllbGRUcmFuc2Zvcm1zKSB7XHJcbiAgICAgICAgdGhpcy5kYXRhID0gZGF0YTtcclxuICAgICAgICB0aGlzLmZpZWxkTWFzayA9IGZpZWxkTWFzaztcclxuICAgICAgICB0aGlzLmZpZWxkVHJhbnNmb3JtcyA9IGZpZWxkVHJhbnNmb3JtcztcclxuICAgIH1cclxuICAgIFBhcnNlZFVwZGF0ZURhdGEucHJvdG90eXBlLnRvTXV0YXRpb25zID0gZnVuY3Rpb24gKGtleSwgcHJlY29uZGl0aW9uKSB7XHJcbiAgICAgICAgdmFyIG11dGF0aW9ucyA9IFtcclxuICAgICAgICAgICAgbmV3IFBhdGNoTXV0YXRpb24oa2V5LCB0aGlzLmRhdGEsIHRoaXMuZmllbGRNYXNrLCBwcmVjb25kaXRpb24pXHJcbiAgICAgICAgXTtcclxuICAgICAgICBpZiAodGhpcy5maWVsZFRyYW5zZm9ybXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBtdXRhdGlvbnMucHVzaChuZXcgVHJhbnNmb3JtTXV0YXRpb24oa2V5LCB0aGlzLmZpZWxkVHJhbnNmb3JtcykpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbXV0YXRpb25zO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBQYXJzZWRVcGRhdGVEYXRhO1xyXG59KCkpO1xyXG4vKlxyXG4gKiBSZXByZXNlbnRzIHdoYXQgdHlwZSBvZiBBUEkgbWV0aG9kIHByb3ZpZGVkIHRoZSBkYXRhIGJlaW5nIHBhcnNlZDsgdXNlZnVsXHJcbiAqIGZvciBkZXRlcm1pbmluZyB3aGljaCBlcnJvciBjb25kaXRpb25zIGFwcGx5IGR1cmluZyBwYXJzaW5nIGFuZCBwcm92aWRpbmdcclxuICogYmV0dGVyIGVycm9yIG1lc3NhZ2VzLlxyXG4gKi9cclxudmFyIFVzZXJEYXRhU291cmNlO1xyXG4oZnVuY3Rpb24gKFVzZXJEYXRhU291cmNlKSB7XHJcbiAgICBVc2VyRGF0YVNvdXJjZVtVc2VyRGF0YVNvdXJjZVtcIlNldFwiXSA9IDBdID0gXCJTZXRcIjtcclxuICAgIFVzZXJEYXRhU291cmNlW1VzZXJEYXRhU291cmNlW1wiVXBkYXRlXCJdID0gMV0gPSBcIlVwZGF0ZVwiO1xyXG4gICAgVXNlckRhdGFTb3VyY2VbVXNlckRhdGFTb3VyY2VbXCJNZXJnZVNldFwiXSA9IDJdID0gXCJNZXJnZVNldFwiO1xyXG4gICAgLyoqXHJcbiAgICAgKiBJbmRpY2F0ZXMgdGhlIHNvdXJjZSBpcyBhIHdoZXJlIGNsYXVzZSwgY3Vyc29yIGJvdW5kLCBhcnJheVVuaW9uKClcclxuICAgICAqIGVsZW1lbnQsIGV0Yy4gT2Ygbm90ZSwgaXNXcml0ZShzb3VyY2UpIHdpbGwgcmV0dXJuIGZhbHNlLlxyXG4gICAgICovXHJcbiAgICBVc2VyRGF0YVNvdXJjZVtVc2VyRGF0YVNvdXJjZVtcIkFyZ3VtZW50XCJdID0gM10gPSBcIkFyZ3VtZW50XCI7XHJcbiAgICAvKipcclxuICAgICAqIEluZGljYXRlcyB0aGF0IHRoZSBzb3VyY2UgaXMgYW4gQXJndW1lbnQgdGhhdCBtYXkgZGlyZWN0bHkgY29udGFpbiBuZXN0ZWRcclxuICAgICAqIGFycmF5cyAoZS5nLiB0aGUgb3BlcmFuZCBvZiBhbiBgaW5gIHF1ZXJ5KS5cclxuICAgICAqL1xyXG4gICAgVXNlckRhdGFTb3VyY2VbVXNlckRhdGFTb3VyY2VbXCJBcnJheUFyZ3VtZW50XCJdID0gNF0gPSBcIkFycmF5QXJndW1lbnRcIjtcclxufSkoVXNlckRhdGFTb3VyY2UgfHwgKFVzZXJEYXRhU291cmNlID0ge30pKTtcclxuZnVuY3Rpb24gaXNXcml0ZShkYXRhU291cmNlKSB7XHJcbiAgICBzd2l0Y2ggKGRhdGFTb3VyY2UpIHtcclxuICAgICAgICBjYXNlIFVzZXJEYXRhU291cmNlLlNldDogLy8gZmFsbCB0aHJvdWdoXHJcbiAgICAgICAgY2FzZSBVc2VyRGF0YVNvdXJjZS5NZXJnZVNldDogLy8gZmFsbCB0aHJvdWdoXHJcbiAgICAgICAgY2FzZSBVc2VyRGF0YVNvdXJjZS5VcGRhdGU6XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIGNhc2UgVXNlckRhdGFTb3VyY2UuQXJndW1lbnQ6XHJcbiAgICAgICAgY2FzZSBVc2VyRGF0YVNvdXJjZS5BcnJheUFyZ3VtZW50OlxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgdGhyb3cgZmFpbChcIlVuZXhwZWN0ZWQgY2FzZSBmb3IgVXNlckRhdGFTb3VyY2U6IFwiICsgZGF0YVNvdXJjZSk7XHJcbiAgICB9XHJcbn1cclxuLyoqIEEgXCJjb250ZXh0XCIgb2JqZWN0IHBhc3NlZCBhcm91bmQgd2hpbGUgcGFyc2luZyB1c2VyIGRhdGEuICovXHJcbnZhciBQYXJzZUNvbnRleHQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICAvKipcclxuICAgICAqIEluaXRpYWxpemVzIGEgUGFyc2VDb250ZXh0IHdpdGggdGhlIGdpdmVuIHNvdXJjZSBhbmQgcGF0aC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gZGF0YVNvdXJjZSBJbmRpY2F0ZXMgd2hhdCBraW5kIG9mIEFQSSBtZXRob2QgdGhpcyBkYXRhIGNhbWUgZnJvbS5cclxuICAgICAqIEBwYXJhbSBtZXRob2ROYW1lIFRoZSBuYW1lIG9mIHRoZSBtZXRob2QgdGhlIHVzZXIgY2FsbGVkIHRvIGNyZWF0ZSB0aGlzXHJcbiAgICAgKiAgICAgUGFyc2VDb250ZXh0LlxyXG4gICAgICogQHBhcmFtIHBhdGggQSBwYXRoIHdpdGhpbiB0aGUgb2JqZWN0IGJlaW5nIHBhcnNlZC4gVGhpcyBjb3VsZCBiZSBhbiBlbXB0eVxyXG4gICAgICogICAgIHBhdGggKGluIHdoaWNoIGNhc2UgdGhlIGNvbnRleHQgcmVwcmVzZW50cyB0aGUgcm9vdCBvZiB0aGUgZGF0YSBiZWluZ1xyXG4gICAgICogICAgIHBhcnNlZCksIG9yIGEgbm9uZW1wdHkgcGF0aCAoaW5kaWNhdGluZyB0aGUgY29udGV4dCByZXByZXNlbnRzIGEgbmVzdGVkXHJcbiAgICAgKiAgICAgbG9jYXRpb24gd2l0aGluIHRoZSBkYXRhKS5cclxuICAgICAqIEBwYXJhbSBhcnJheUVsZW1lbnQgV2hldGhlciBvciBub3QgdGhpcyBjb250ZXh0IGNvcnJlc3BvbmRzIHRvIGFuIGVsZW1lbnRcclxuICAgICAqICAgICBvZiBhbiBhcnJheS5cclxuICAgICAqIEBwYXJhbSBmaWVsZFRyYW5zZm9ybXMgQSBtdXRhYmxlIGxpc3Qgb2YgZmllbGQgdHJhbnNmb3JtcyBlbmNvdW50ZXJlZCB3aGlsZVxyXG4gICAgICogICAgIHBhcnNpbmcgdGhlIGRhdGEuXHJcbiAgICAgKiBAcGFyYW0gZmllbGRNYXNrIEEgbXV0YWJsZSBsaXN0IG9mIGZpZWxkIHBhdGhzIGVuY291bnRlcmVkIHdoaWxlIHBhcnNpbmdcclxuICAgICAqICAgICB0aGUgZGF0YS5cclxuICAgICAqXHJcbiAgICAgKiBUT0RPKGIvMzQ4NzExMzEpOiBXZSBkb24ndCBzdXBwb3J0IGFycmF5IHBhdGhzIHJpZ2h0IG5vdywgc28gcGF0aCBjYW4gYmVcclxuICAgICAqIG51bGwgdG8gaW5kaWNhdGUgdGhlIGNvbnRleHQgcmVwcmVzZW50cyBhbnkgbG9jYXRpb24gd2l0aGluIGFuIGFycmF5IChpblxyXG4gICAgICogd2hpY2ggY2FzZSBjZXJ0YWluIGZlYXR1cmVzIHdpbGwgbm90IHdvcmsgYW5kIGVycm9ycyB3aWxsIGJlIHNvbWV3aGF0XHJcbiAgICAgKiBjb21wcm9taXNlZCkuXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIFBhcnNlQ29udGV4dChkYXRhU291cmNlLCBtZXRob2ROYW1lLCBwYXRoLCBhcnJheUVsZW1lbnQsIGZpZWxkVHJhbnNmb3JtcywgZmllbGRNYXNrKSB7XHJcbiAgICAgICAgdGhpcy5kYXRhU291cmNlID0gZGF0YVNvdXJjZTtcclxuICAgICAgICB0aGlzLm1ldGhvZE5hbWUgPSBtZXRob2ROYW1lO1xyXG4gICAgICAgIHRoaXMucGF0aCA9IHBhdGg7XHJcbiAgICAgICAgdGhpcy5hcnJheUVsZW1lbnQgPSBhcnJheUVsZW1lbnQ7XHJcbiAgICAgICAgLy8gTWlub3IgaGFjazogSWYgZmllbGRUcmFuc2Zvcm1zIGlzIHVuZGVmaW5lZCwgd2UgYXNzdW1lIHRoaXMgaXMgYW5cclxuICAgICAgICAvLyBleHRlcm5hbCBjYWxsIGFuZCB3ZSBuZWVkIHRvIHZhbGlkYXRlIHRoZSBlbnRpcmUgcGF0aC5cclxuICAgICAgICBpZiAoZmllbGRUcmFuc2Zvcm1zID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhpcy52YWxpZGF0ZVBhdGgoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5hcnJheUVsZW1lbnQgPSBhcnJheUVsZW1lbnQgIT09IHVuZGVmaW5lZCA/IGFycmF5RWxlbWVudCA6IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuZmllbGRUcmFuc2Zvcm1zID0gZmllbGRUcmFuc2Zvcm1zIHx8IFtdO1xyXG4gICAgICAgIHRoaXMuZmllbGRNYXNrID0gZmllbGRNYXNrIHx8IFtdO1xyXG4gICAgfVxyXG4gICAgUGFyc2VDb250ZXh0LnByb3RvdHlwZS5jaGlsZENvbnRleHRGb3JGaWVsZCA9IGZ1bmN0aW9uIChmaWVsZCkge1xyXG4gICAgICAgIHZhciBjaGlsZFBhdGggPSB0aGlzLnBhdGggPT0gbnVsbCA/IG51bGwgOiB0aGlzLnBhdGguY2hpbGQoZmllbGQpO1xyXG4gICAgICAgIHZhciBjb250ZXh0ID0gbmV3IFBhcnNlQ29udGV4dCh0aGlzLmRhdGFTb3VyY2UsIHRoaXMubWV0aG9kTmFtZSwgY2hpbGRQYXRoLCBcclxuICAgICAgICAvKmFycmF5RWxlbWVudD0qLyBmYWxzZSwgdGhpcy5maWVsZFRyYW5zZm9ybXMsIHRoaXMuZmllbGRNYXNrKTtcclxuICAgICAgICBjb250ZXh0LnZhbGlkYXRlUGF0aFNlZ21lbnQoZmllbGQpO1xyXG4gICAgICAgIHJldHVybiBjb250ZXh0O1xyXG4gICAgfTtcclxuICAgIFBhcnNlQ29udGV4dC5wcm90b3R5cGUuY2hpbGRDb250ZXh0Rm9yRmllbGRQYXRoID0gZnVuY3Rpb24gKGZpZWxkKSB7XHJcbiAgICAgICAgdmFyIGNoaWxkUGF0aCA9IHRoaXMucGF0aCA9PSBudWxsID8gbnVsbCA6IHRoaXMucGF0aC5jaGlsZChmaWVsZCk7XHJcbiAgICAgICAgdmFyIGNvbnRleHQgPSBuZXcgUGFyc2VDb250ZXh0KHRoaXMuZGF0YVNvdXJjZSwgdGhpcy5tZXRob2ROYW1lLCBjaGlsZFBhdGgsIFxyXG4gICAgICAgIC8qYXJyYXlFbGVtZW50PSovIGZhbHNlLCB0aGlzLmZpZWxkVHJhbnNmb3JtcywgdGhpcy5maWVsZE1hc2spO1xyXG4gICAgICAgIGNvbnRleHQudmFsaWRhdGVQYXRoKCk7XHJcbiAgICAgICAgcmV0dXJuIGNvbnRleHQ7XHJcbiAgICB9O1xyXG4gICAgUGFyc2VDb250ZXh0LnByb3RvdHlwZS5jaGlsZENvbnRleHRGb3JBcnJheSA9IGZ1bmN0aW9uIChpbmRleCkge1xyXG4gICAgICAgIC8vIFRPRE8oYi8zNDg3MTEzMSk6IFdlIGRvbid0IHN1cHBvcnQgYXJyYXkgcGF0aHMgcmlnaHQgbm93OyBzbyBtYWtlIHBhdGhcclxuICAgICAgICAvLyBudWxsLlxyXG4gICAgICAgIHJldHVybiBuZXcgUGFyc2VDb250ZXh0KHRoaXMuZGF0YVNvdXJjZSwgdGhpcy5tZXRob2ROYW1lLCBcclxuICAgICAgICAvKnBhdGg9Ki8gbnVsbCwgXHJcbiAgICAgICAgLyphcnJheUVsZW1lbnQ9Ki8gdHJ1ZSwgdGhpcy5maWVsZFRyYW5zZm9ybXMsIHRoaXMuZmllbGRNYXNrKTtcclxuICAgIH07XHJcbiAgICBQYXJzZUNvbnRleHQucHJvdG90eXBlLmNyZWF0ZUVycm9yID0gZnVuY3Rpb24gKHJlYXNvbikge1xyXG4gICAgICAgIHZhciBmaWVsZERlc2NyaXB0aW9uID0gdGhpcy5wYXRoID09PSBudWxsIHx8IHRoaXMucGF0aC5pc0VtcHR5KClcclxuICAgICAgICAgICAgPyAnJ1xyXG4gICAgICAgICAgICA6IFwiIChmb3VuZCBpbiBmaWVsZCBcIiArIHRoaXMucGF0aC50b1N0cmluZygpICsgXCIpXCI7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLklOVkFMSURfQVJHVU1FTlQsIFwiRnVuY3Rpb24gXCIgKyB0aGlzLm1ldGhvZE5hbWUgKyBcIigpIGNhbGxlZCB3aXRoIGludmFsaWQgZGF0YS4gXCIgK1xyXG4gICAgICAgICAgICByZWFzb24gK1xyXG4gICAgICAgICAgICBmaWVsZERlc2NyaXB0aW9uKTtcclxuICAgIH07XHJcbiAgICAvKiogUmV0dXJucyAndHJ1ZScgaWYgJ2ZpZWxkUGF0aCcgd2FzIHRyYXZlcnNlZCB3aGVuIGNyZWF0aW5nIHRoaXMgY29udGV4dC4gKi9cclxuICAgIFBhcnNlQ29udGV4dC5wcm90b3R5cGUuY29udGFpbnMgPSBmdW5jdGlvbiAoZmllbGRQYXRoKSB7XHJcbiAgICAgICAgcmV0dXJuICh0aGlzLmZpZWxkTWFzay5maW5kKGZ1bmN0aW9uIChmaWVsZCkgeyByZXR1cm4gZmllbGRQYXRoLmlzUHJlZml4T2YoZmllbGQpOyB9KSAhPT0gdW5kZWZpbmVkIHx8XHJcbiAgICAgICAgICAgIHRoaXMuZmllbGRUcmFuc2Zvcm1zLmZpbmQoZnVuY3Rpb24gKHRyYW5zZm9ybSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZpZWxkUGF0aC5pc1ByZWZpeE9mKHRyYW5zZm9ybS5maWVsZCk7XHJcbiAgICAgICAgICAgIH0pICE9PSB1bmRlZmluZWQpO1xyXG4gICAgfTtcclxuICAgIFBhcnNlQ29udGV4dC5wcm90b3R5cGUudmFsaWRhdGVQYXRoID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vIFRPRE8oYi8zNDg3MTEzMSk6IFJlbW92ZSBudWxsIGNoZWNrIG9uY2Ugd2UgaGF2ZSBwcm9wZXIgcGF0aHMgZm9yIGZpZWxkc1xyXG4gICAgICAgIC8vIHdpdGhpbiBhcnJheXMuXHJcbiAgICAgICAgaWYgKHRoaXMucGF0aCA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5wYXRoLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHRoaXMudmFsaWRhdGVQYXRoU2VnbWVudCh0aGlzLnBhdGguZ2V0KGkpKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgUGFyc2VDb250ZXh0LnByb3RvdHlwZS52YWxpZGF0ZVBhdGhTZWdtZW50ID0gZnVuY3Rpb24gKHNlZ21lbnQpIHtcclxuICAgICAgICBpZiAoc2VnbWVudC5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgdGhyb3cgdGhpcy5jcmVhdGVFcnJvcignRG9jdW1lbnQgZmllbGRzIG11c3Qgbm90IGJlIGVtcHR5Jyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChpc1dyaXRlKHRoaXMuZGF0YVNvdXJjZSkgJiYgUkVTRVJWRURfRklFTERfUkVHRVgudGVzdChzZWdtZW50KSkge1xyXG4gICAgICAgICAgICB0aHJvdyB0aGlzLmNyZWF0ZUVycm9yKCdEb2N1bWVudCBmaWVsZHMgY2Fubm90IGJlZ2luIGFuZCBlbmQgd2l0aCBcIl9fXCInKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFBhcnNlQ29udGV4dDtcclxufSgpKTtcclxuLyoqXHJcbiAqIEEgcGxhY2Vob2xkZXIgb2JqZWN0IGZvciBEb2N1bWVudFJlZmVyZW5jZXMgaW4gdGhpcyBmaWxlLCBpbiBvcmRlciB0b1xyXG4gKiBhdm9pZCBhIGNpcmN1bGFyIGRlcGVuZGVuY3kuIFNlZSB0aGUgY29tbWVudHMgZm9yIGBEYXRhUHJlQ29udmVydGVyYCBmb3JcclxuICogdGhlIGZ1bGwgY29udGV4dC5cclxuICovXHJcbnZhciBEb2N1bWVudEtleVJlZmVyZW5jZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIERvY3VtZW50S2V5UmVmZXJlbmNlKGRhdGFiYXNlSWQsIGtleSkge1xyXG4gICAgICAgIHRoaXMuZGF0YWJhc2VJZCA9IGRhdGFiYXNlSWQ7XHJcbiAgICAgICAgdGhpcy5rZXkgPSBrZXk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gRG9jdW1lbnRLZXlSZWZlcmVuY2U7XHJcbn0oKSk7XHJcbi8qKlxyXG4gKiBIZWxwZXIgZm9yIHBhcnNpbmcgcmF3IHVzZXIgaW5wdXQgKHByb3ZpZGVkIHZpYSB0aGUgQVBJKSBpbnRvIGludGVybmFsIG1vZGVsXHJcbiAqIGNsYXNzZXMuXHJcbiAqL1xyXG52YXIgVXNlckRhdGFDb252ZXJ0ZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBVc2VyRGF0YUNvbnZlcnRlcihwcmVDb252ZXJ0ZXIpIHtcclxuICAgICAgICB0aGlzLnByZUNvbnZlcnRlciA9IHByZUNvbnZlcnRlcjtcclxuICAgIH1cclxuICAgIC8qKiBQYXJzZSBkb2N1bWVudCBkYXRhIGZyb20gYSBub24tbWVyZ2Ugc2V0KCkgY2FsbC4gKi9cclxuICAgIFVzZXJEYXRhQ29udmVydGVyLnByb3RvdHlwZS5wYXJzZVNldERhdGEgPSBmdW5jdGlvbiAobWV0aG9kTmFtZSwgaW5wdXQpIHtcclxuICAgICAgICB2YXIgY29udGV4dCA9IG5ldyBQYXJzZUNvbnRleHQoVXNlckRhdGFTb3VyY2UuU2V0LCBtZXRob2ROYW1lLCBGaWVsZFBhdGguRU1QVFlfUEFUSCk7XHJcbiAgICAgICAgdmFsaWRhdGVQbGFpbk9iamVjdCgnRGF0YSBtdXN0IGJlIGFuIG9iamVjdCwgYnV0IGl0IHdhczonLCBjb250ZXh0LCBpbnB1dCk7XHJcbiAgICAgICAgdmFyIHVwZGF0ZURhdGEgPSB0aGlzLnBhcnNlRGF0YShpbnB1dCwgY29udGV4dCk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQYXJzZWRTZXREYXRhKHVwZGF0ZURhdGEsIFxyXG4gICAgICAgIC8qIGZpZWxkTWFzaz0gKi8gbnVsbCwgY29udGV4dC5maWVsZFRyYW5zZm9ybXMpO1xyXG4gICAgfTtcclxuICAgIC8qKiBQYXJzZSBkb2N1bWVudCBkYXRhIGZyb20gYSBzZXQoKSBjYWxsIHdpdGggJ3ttZXJnZTp0cnVlfScuICovXHJcbiAgICBVc2VyRGF0YUNvbnZlcnRlci5wcm90b3R5cGUucGFyc2VNZXJnZURhdGEgPSBmdW5jdGlvbiAobWV0aG9kTmFtZSwgaW5wdXQsIGZpZWxkUGF0aHMpIHtcclxuICAgICAgICB2YXIgY29udGV4dCA9IG5ldyBQYXJzZUNvbnRleHQoVXNlckRhdGFTb3VyY2UuTWVyZ2VTZXQsIG1ldGhvZE5hbWUsIEZpZWxkUGF0aC5FTVBUWV9QQVRIKTtcclxuICAgICAgICB2YWxpZGF0ZVBsYWluT2JqZWN0KCdEYXRhIG11c3QgYmUgYW4gb2JqZWN0LCBidXQgaXQgd2FzOicsIGNvbnRleHQsIGlucHV0KTtcclxuICAgICAgICB2YXIgdXBkYXRlRGF0YSA9IHRoaXMucGFyc2VEYXRhKGlucHV0LCBjb250ZXh0KTtcclxuICAgICAgICB2YXIgZmllbGRNYXNrO1xyXG4gICAgICAgIHZhciBmaWVsZFRyYW5zZm9ybXM7XHJcbiAgICAgICAgaWYgKCFmaWVsZFBhdGhzKSB7XHJcbiAgICAgICAgICAgIGZpZWxkTWFzayA9IEZpZWxkTWFzay5mcm9tQXJyYXkoY29udGV4dC5maWVsZE1hc2spO1xyXG4gICAgICAgICAgICBmaWVsZFRyYW5zZm9ybXMgPSBjb250ZXh0LmZpZWxkVHJhbnNmb3JtcztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHZhciB2YWxpZGF0ZWRGaWVsZFBhdGhzID0gbmV3IFNvcnRlZFNldChGaWVsZFBhdGguY29tcGFyYXRvcik7XHJcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgZmllbGRQYXRoc18xID0gZmllbGRQYXRoczsgX2kgPCBmaWVsZFBhdGhzXzEubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgc3RyaW5nT3JGaWVsZFBhdGggPSBmaWVsZFBhdGhzXzFbX2ldO1xyXG4gICAgICAgICAgICAgICAgdmFyIGZpZWxkUGF0aCA9IHZvaWQgMDtcclxuICAgICAgICAgICAgICAgIGlmIChzdHJpbmdPckZpZWxkUGF0aCBpbnN0YW5jZW9mIEZpZWxkUGF0aCQxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZmllbGRQYXRoID0gc3RyaW5nT3JGaWVsZFBhdGguX2ludGVybmFsUGF0aDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBzdHJpbmdPckZpZWxkUGF0aCA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgICAgICAgICBmaWVsZFBhdGggPSBmaWVsZFBhdGhGcm9tRG90U2VwYXJhdGVkU3RyaW5nKG1ldGhvZE5hbWUsIHN0cmluZ09yRmllbGRQYXRoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IGZhaWwoJ0V4cGVjdGVkIHN0cmluZ09yRmllbGRQYXRoIHRvIGJlIGEgc3RyaW5nIG9yIGEgRmllbGRQYXRoJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoIWNvbnRleHQuY29udGFpbnMoZmllbGRQYXRoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLklOVkFMSURfQVJHVU1FTlQsIFwiRmllbGQgJ1wiICsgZmllbGRQYXRoICsgXCInIGlzIHNwZWNpZmllZCBpbiB5b3VyIGZpZWxkIG1hc2sgYnV0IG1pc3NpbmcgZnJvbSB5b3VyIGlucHV0IGRhdGEuXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdmFsaWRhdGVkRmllbGRQYXRocyA9IHZhbGlkYXRlZEZpZWxkUGF0aHMuYWRkKGZpZWxkUGF0aCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZmllbGRNYXNrID0gRmllbGRNYXNrLmZyb21TZXQodmFsaWRhdGVkRmllbGRQYXRocyk7XHJcbiAgICAgICAgICAgIGZpZWxkVHJhbnNmb3JtcyA9IGNvbnRleHQuZmllbGRUcmFuc2Zvcm1zLmZpbHRlcihmdW5jdGlvbiAodHJhbnNmb3JtKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmllbGRNYXNrLmNvdmVycyh0cmFuc2Zvcm0uZmllbGQpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQYXJzZWRTZXREYXRhKHVwZGF0ZURhdGEsIGZpZWxkTWFzaywgZmllbGRUcmFuc2Zvcm1zKTtcclxuICAgIH07XHJcbiAgICAvKiogUGFyc2UgdXBkYXRlIGRhdGEgZnJvbSBhbiB1cGRhdGUoKSBjYWxsLiAqL1xyXG4gICAgVXNlckRhdGFDb252ZXJ0ZXIucHJvdG90eXBlLnBhcnNlVXBkYXRlRGF0YSA9IGZ1bmN0aW9uIChtZXRob2ROYW1lLCBpbnB1dCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIGNvbnRleHQgPSBuZXcgUGFyc2VDb250ZXh0KFVzZXJEYXRhU291cmNlLlVwZGF0ZSwgbWV0aG9kTmFtZSwgRmllbGRQYXRoLkVNUFRZX1BBVEgpO1xyXG4gICAgICAgIHZhbGlkYXRlUGxhaW5PYmplY3QoJ0RhdGEgbXVzdCBiZSBhbiBvYmplY3QsIGJ1dCBpdCB3YXM6JywgY29udGV4dCwgaW5wdXQpO1xyXG4gICAgICAgIHZhciBmaWVsZE1hc2tQYXRocyA9IG5ldyBTb3J0ZWRTZXQoRmllbGRQYXRoLmNvbXBhcmF0b3IpO1xyXG4gICAgICAgIHZhciB1cGRhdGVEYXRhID0gT2JqZWN0VmFsdWUuRU1QVFk7XHJcbiAgICAgICAgZm9yRWFjaChpbnB1dCwgZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcclxuICAgICAgICAgICAgdmFyIHBhdGggPSBmaWVsZFBhdGhGcm9tRG90U2VwYXJhdGVkU3RyaW5nKG1ldGhvZE5hbWUsIGtleSk7XHJcbiAgICAgICAgICAgIHZhciBjaGlsZENvbnRleHQgPSBjb250ZXh0LmNoaWxkQ29udGV4dEZvckZpZWxkUGF0aChwYXRoKTtcclxuICAgICAgICAgICAgdmFsdWUgPSBfdGhpcy5ydW5QcmVDb252ZXJ0ZXIodmFsdWUsIGNoaWxkQ29udGV4dCk7XHJcbiAgICAgICAgICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIERlbGV0ZUZpZWxkVmFsdWVJbXBsKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBBZGQgaXQgdG8gdGhlIGZpZWxkIG1hc2ssIGJ1dCBkb24ndCBhZGQgYW55dGhpbmcgdG8gdXBkYXRlRGF0YS5cclxuICAgICAgICAgICAgICAgIGZpZWxkTWFza1BhdGhzID0gZmllbGRNYXNrUGF0aHMuYWRkKHBhdGgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdmFyIHBhcnNlZFZhbHVlID0gX3RoaXMucGFyc2VEYXRhKHZhbHVlLCBjaGlsZENvbnRleHQpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHBhcnNlZFZhbHVlICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICBmaWVsZE1hc2tQYXRocyA9IGZpZWxkTWFza1BhdGhzLmFkZChwYXRoKTtcclxuICAgICAgICAgICAgICAgICAgICB1cGRhdGVEYXRhID0gdXBkYXRlRGF0YS5zZXQocGF0aCwgcGFyc2VkVmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdmFyIG1hc2sgPSBGaWVsZE1hc2suZnJvbVNldChmaWVsZE1hc2tQYXRocyk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQYXJzZWRVcGRhdGVEYXRhKHVwZGF0ZURhdGEsIG1hc2ssIGNvbnRleHQuZmllbGRUcmFuc2Zvcm1zKTtcclxuICAgIH07XHJcbiAgICAvKiogUGFyc2UgdXBkYXRlIGRhdGEgZnJvbSBhIGxpc3Qgb2YgZmllbGQvdmFsdWUgYXJndW1lbnRzLiAqL1xyXG4gICAgVXNlckRhdGFDb252ZXJ0ZXIucHJvdG90eXBlLnBhcnNlVXBkYXRlVmFyYXJncyA9IGZ1bmN0aW9uIChtZXRob2ROYW1lLCBmaWVsZCwgdmFsdWUsIG1vcmVGaWVsZHNBbmRWYWx1ZXMpIHtcclxuICAgICAgICB2YXIgY29udGV4dCA9IG5ldyBQYXJzZUNvbnRleHQoVXNlckRhdGFTb3VyY2UuVXBkYXRlLCBtZXRob2ROYW1lLCBGaWVsZFBhdGguRU1QVFlfUEFUSCk7XHJcbiAgICAgICAgdmFyIGtleXMgPSBbZmllbGRQYXRoRnJvbUFyZ3VtZW50KG1ldGhvZE5hbWUsIGZpZWxkKV07XHJcbiAgICAgICAgdmFyIHZhbHVlcyA9IFt2YWx1ZV07XHJcbiAgICAgICAgaWYgKG1vcmVGaWVsZHNBbmRWYWx1ZXMubGVuZ3RoICUgMiAhPT0gMCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5JTlZBTElEX0FSR1VNRU5ULCBcIkZ1bmN0aW9uIFwiICsgbWV0aG9kTmFtZSArIFwiKCkgbmVlZHMgdG8gYmUgY2FsbGVkIHdpdGggYW4gZXZlbiBudW1iZXIgXCIgK1xyXG4gICAgICAgICAgICAgICAgJ29mIGFyZ3VtZW50cyB0aGF0IGFsdGVybmF0ZSBiZXR3ZWVuIGZpZWxkIG5hbWVzIGFuZCB2YWx1ZXMuJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbW9yZUZpZWxkc0FuZFZhbHVlcy5sZW5ndGg7IGkgKz0gMikge1xyXG4gICAgICAgICAgICBrZXlzLnB1c2goZmllbGRQYXRoRnJvbUFyZ3VtZW50KG1ldGhvZE5hbWUsIG1vcmVGaWVsZHNBbmRWYWx1ZXNbaV0pKTtcclxuICAgICAgICAgICAgdmFsdWVzLnB1c2gobW9yZUZpZWxkc0FuZFZhbHVlc1tpICsgMV0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgZmllbGRNYXNrUGF0aHMgPSBuZXcgU29ydGVkU2V0KEZpZWxkUGF0aC5jb21wYXJhdG9yKTtcclxuICAgICAgICB2YXIgdXBkYXRlRGF0YSA9IE9iamVjdFZhbHVlLkVNUFRZO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSkge1xyXG4gICAgICAgICAgICB2YXIgcGF0aCA9IGtleXNbaV07XHJcbiAgICAgICAgICAgIHZhciBjaGlsZENvbnRleHQgPSBjb250ZXh0LmNoaWxkQ29udGV4dEZvckZpZWxkUGF0aChwYXRoKTtcclxuICAgICAgICAgICAgdmFyIHZhbHVlXzEgPSB0aGlzLnJ1blByZUNvbnZlcnRlcih2YWx1ZXNbaV0sIGNoaWxkQ29udGV4dCk7XHJcbiAgICAgICAgICAgIGlmICh2YWx1ZV8xIGluc3RhbmNlb2YgRGVsZXRlRmllbGRWYWx1ZUltcGwpIHtcclxuICAgICAgICAgICAgICAgIC8vIEFkZCBpdCB0byB0aGUgZmllbGQgbWFzaywgYnV0IGRvbid0IGFkZCBhbnl0aGluZyB0byB1cGRhdGVEYXRhLlxyXG4gICAgICAgICAgICAgICAgZmllbGRNYXNrUGF0aHMgPSBmaWVsZE1hc2tQYXRocy5hZGQocGF0aCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcGFyc2VkVmFsdWUgPSB0aGlzLnBhcnNlRGF0YSh2YWx1ZV8xLCBjaGlsZENvbnRleHQpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHBhcnNlZFZhbHVlICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICBmaWVsZE1hc2tQYXRocyA9IGZpZWxkTWFza1BhdGhzLmFkZChwYXRoKTtcclxuICAgICAgICAgICAgICAgICAgICB1cGRhdGVEYXRhID0gdXBkYXRlRGF0YS5zZXQocGF0aCwgcGFyc2VkVmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBtYXNrID0gRmllbGRNYXNrLmZyb21TZXQoZmllbGRNYXNrUGF0aHMpO1xyXG4gICAgICAgIHJldHVybiBuZXcgUGFyc2VkVXBkYXRlRGF0YSh1cGRhdGVEYXRhLCBtYXNrLCBjb250ZXh0LmZpZWxkVHJhbnNmb3Jtcyk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBQYXJzZSBhIFwicXVlcnkgdmFsdWVcIiAoZS5nLiB2YWx1ZSBpbiBhIHdoZXJlIGZpbHRlciBvciBhIHZhbHVlIGluIGEgY3Vyc29yXHJcbiAgICAgKiBib3VuZCkuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGFsbG93QXJyYXlzIFdoZXRoZXIgdGhlIHF1ZXJ5IHZhbHVlIGlzIGFuIGFycmF5IHRoYXQgbWF5IGRpcmVjdGx5XHJcbiAgICAgKiBjb250YWluIGFkZGl0aW9uYWwgYXJyYXlzIChlLmcuIHRoZSBvcGVyYW5kIG9mIGFuIGBpbmAgcXVlcnkpLlxyXG4gICAgICovXHJcbiAgICBVc2VyRGF0YUNvbnZlcnRlci5wcm90b3R5cGUucGFyc2VRdWVyeVZhbHVlID0gZnVuY3Rpb24gKG1ldGhvZE5hbWUsIGlucHV0LCBhbGxvd0FycmF5cykge1xyXG4gICAgICAgIGlmIChhbGxvd0FycmF5cyA9PT0gdm9pZCAwKSB7IGFsbG93QXJyYXlzID0gZmFsc2U7IH1cclxuICAgICAgICB2YXIgY29udGV4dCA9IG5ldyBQYXJzZUNvbnRleHQoYWxsb3dBcnJheXMgPyBVc2VyRGF0YVNvdXJjZS5BcnJheUFyZ3VtZW50IDogVXNlckRhdGFTb3VyY2UuQXJndW1lbnQsIG1ldGhvZE5hbWUsIEZpZWxkUGF0aC5FTVBUWV9QQVRIKTtcclxuICAgICAgICB2YXIgcGFyc2VkID0gdGhpcy5wYXJzZURhdGEoaW5wdXQsIGNvbnRleHQpO1xyXG4gICAgICAgIGFzc2VydChwYXJzZWQgIT0gbnVsbCwgJ1BhcnNlZCBkYXRhIHNob3VsZCBub3QgYmUgbnVsbC4nKTtcclxuICAgICAgICBhc3NlcnQoY29udGV4dC5maWVsZFRyYW5zZm9ybXMubGVuZ3RoID09PSAwLCAnRmllbGQgdHJhbnNmb3JtcyBzaG91bGQgaGF2ZSBiZWVuIGRpc2FsbG93ZWQuJyk7XHJcbiAgICAgICAgcmV0dXJuIHBhcnNlZDtcclxuICAgIH07XHJcbiAgICAvKiogU2VuZHMgZGF0YSB0aHJvdWdoIHRoaXMucHJlQ29udmVydGVyLCBoYW5kbGluZyBhbnkgdGhyb3duIGVycm9ycy4gKi9cclxuICAgIFVzZXJEYXRhQ29udmVydGVyLnByb3RvdHlwZS5ydW5QcmVDb252ZXJ0ZXIgPSBmdW5jdGlvbiAoaW5wdXQsIGNvbnRleHQpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcmVDb252ZXJ0ZXIoaW5wdXQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICB2YXIgbWVzc2FnZSA9IGVycm9yTWVzc2FnZShlKTtcclxuICAgICAgICAgICAgdGhyb3cgY29udGV4dC5jcmVhdGVFcnJvcihtZXNzYWdlKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBJbnRlcm5hbCBoZWxwZXIgZm9yIHBhcnNpbmcgdXNlciBkYXRhLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBpbnB1dCBEYXRhIHRvIGJlIHBhcnNlZC5cclxuICAgICAqIEBwYXJhbSBjb250ZXh0IEEgY29udGV4dCBvYmplY3QgcmVwcmVzZW50aW5nIHRoZSBjdXJyZW50IHBhdGggYmVpbmcgcGFyc2VkLFxyXG4gICAgICogdGhlIHNvdXJjZSBvZiB0aGUgZGF0YSBiZWluZyBwYXJzZWQsIGV0Yy5cclxuICAgICAqIEByZXR1cm4gVGhlIHBhcnNlZCB2YWx1ZSwgb3IgbnVsbCBpZiB0aGUgdmFsdWUgd2FzIGEgRmllbGRWYWx1ZSBzZW50aW5lbFxyXG4gICAgICogdGhhdCBzaG91bGQgbm90IGJlIGluY2x1ZGVkIGluIHRoZSByZXN1bHRpbmcgcGFyc2VkIGRhdGEuXHJcbiAgICAgKi9cclxuICAgIFVzZXJEYXRhQ29udmVydGVyLnByb3RvdHlwZS5wYXJzZURhdGEgPSBmdW5jdGlvbiAoaW5wdXQsIGNvbnRleHQpIHtcclxuICAgICAgICBpbnB1dCA9IHRoaXMucnVuUHJlQ29udmVydGVyKGlucHV0LCBjb250ZXh0KTtcclxuICAgICAgICBpZiAobG9va3NMaWtlSnNvbk9iamVjdChpbnB1dCkpIHtcclxuICAgICAgICAgICAgdmFsaWRhdGVQbGFpbk9iamVjdCgnVW5zdXBwb3J0ZWQgZmllbGQgdmFsdWU6JywgY29udGV4dCwgaW5wdXQpO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wYXJzZU9iamVjdChpbnB1dCwgY29udGV4dCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGlucHV0IGluc3RhbmNlb2YgRmllbGRWYWx1ZUltcGwpIHtcclxuICAgICAgICAgICAgLy8gRmllbGRWYWx1ZXMgdXN1YWxseSBwYXJzZSBpbnRvIHRyYW5zZm9ybXMgKGV4Y2VwdCBGaWVsZFZhbHVlLmRlbGV0ZSgpKVxyXG4gICAgICAgICAgICAvLyBpbiB3aGljaCBjYXNlIHdlIGRvIG5vdCB3YW50IHRvIGluY2x1ZGUgdGhpcyBmaWVsZCBpbiBvdXIgcGFyc2VkIGRhdGFcclxuICAgICAgICAgICAgLy8gKGFzIGRvaW5nIHNvIHdpbGwgb3ZlcndyaXRlIHRoZSBmaWVsZCBkaXJlY3RseSBwcmlvciB0byB0aGUgdHJhbnNmb3JtXHJcbiAgICAgICAgICAgIC8vIHRyeWluZyB0byB0cmFuc2Zvcm0gaXQpLiBTbyB3ZSBkb24ndCBhZGQgdGhpcyBsb2NhdGlvbiB0b1xyXG4gICAgICAgICAgICAvLyBjb250ZXh0LmZpZWxkTWFzayBhbmQgd2UgcmV0dXJuIG51bGwgYXMgb3VyIHBhcnNpbmcgcmVzdWx0LlxyXG4gICAgICAgICAgICB0aGlzLnBhcnNlU2VudGluZWxGaWVsZFZhbHVlKGlucHV0LCBjb250ZXh0KTtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBJZiBjb250ZXh0LnBhdGggaXMgbnVsbCB3ZSBhcmUgaW5zaWRlIGFuIGFycmF5IGFuZCB3ZSBkb24ndCBzdXBwb3J0XHJcbiAgICAgICAgICAgIC8vIGZpZWxkIG1hc2sgcGF0aHMgbW9yZSBncmFudWxhciB0aGFuIHRoZSB0b3AtbGV2ZWwgYXJyYXkuXHJcbiAgICAgICAgICAgIGlmIChjb250ZXh0LnBhdGgpIHtcclxuICAgICAgICAgICAgICAgIGNvbnRleHQuZmllbGRNYXNrLnB1c2goY29udGV4dC5wYXRoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoaW5wdXQgaW5zdGFuY2VvZiBBcnJheSkge1xyXG4gICAgICAgICAgICAgICAgLy8gVE9ETyhiLzM0ODcxMTMxKTogSW5jbHVkZSB0aGUgcGF0aCBjb250YWluaW5nIHRoZSBhcnJheSBpbiB0aGUgZXJyb3JcclxuICAgICAgICAgICAgICAgIC8vIG1lc3NhZ2UuXHJcbiAgICAgICAgICAgICAgICAvLyBJbiB0aGUgY2FzZSBvZiBJTiBxdWVyaWVzLCB0aGUgcGFyc2VkIGRhdGEgaXMgYW4gYXJyYXkgKHJlcHJlc2VudGluZ1xyXG4gICAgICAgICAgICAgICAgLy8gdGhlIHNldCBvZiB2YWx1ZXMgdG8gYmUgaW5jbHVkZWQgZm9yIHRoZSBJTiBxdWVyeSkgdGhhdCBtYXkgZGlyZWN0bHlcclxuICAgICAgICAgICAgICAgIC8vIGNvbnRhaW4gYWRkaXRpb25hbCBhcnJheXMgKGVhY2ggcmVwcmVzZW50aW5nIGFuIGluZGl2aWR1YWwgZmllbGRcclxuICAgICAgICAgICAgICAgIC8vIHZhbHVlKSwgc28gd2UgZGlzYWJsZSB0aGlzIHZhbGlkYXRpb24uXHJcbiAgICAgICAgICAgICAgICBpZiAoY29udGV4dC5hcnJheUVsZW1lbnQgJiZcclxuICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmRhdGFTb3VyY2UgIT09IFVzZXJEYXRhU291cmNlLkFycmF5QXJndW1lbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBjb250ZXh0LmNyZWF0ZUVycm9yKCdOZXN0ZWQgYXJyYXlzIGFyZSBub3Qgc3VwcG9ydGVkJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5wYXJzZUFycmF5KGlucHV0LCBjb250ZXh0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcnNlU2NhbGFyVmFsdWUoaW5wdXQsIGNvbnRleHQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFVzZXJEYXRhQ29udmVydGVyLnByb3RvdHlwZS5wYXJzZU9iamVjdCA9IGZ1bmN0aW9uIChvYmosIGNvbnRleHQpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhciByZXN1bHQgPSBuZXcgU29ydGVkTWFwKHByaW1pdGl2ZUNvbXBhcmF0b3IpO1xyXG4gICAgICAgIGlmIChpc0VtcHR5KG9iaikpIHtcclxuICAgICAgICAgICAgLy8gSWYgd2UgZW5jb3VudGVyIGFuIGVtcHR5IG9iamVjdCwgd2UgZXhwbGljaXRseSBhZGQgaXQgdG8gdGhlIHVwZGF0ZVxyXG4gICAgICAgICAgICAvLyBtYXNrIHRvIGVuc3VyZSB0aGF0IHRoZSBzZXJ2ZXIgY3JlYXRlcyBhIG1hcCBlbnRyeS5cclxuICAgICAgICAgICAgaWYgKGNvbnRleHQucGF0aCAmJiBjb250ZXh0LnBhdGgubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgY29udGV4dC5maWVsZE1hc2sucHVzaChjb250ZXh0LnBhdGgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBmb3JFYWNoKG9iaiwgZnVuY3Rpb24gKGtleSwgdmFsKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcGFyc2VkVmFsdWUgPSBfdGhpcy5wYXJzZURhdGEodmFsLCBjb250ZXh0LmNoaWxkQ29udGV4dEZvckZpZWxkKGtleSkpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHBhcnNlZFZhbHVlICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSByZXN1bHQuaW5zZXJ0KGtleSwgcGFyc2VkVmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG5ldyBPYmplY3RWYWx1ZShyZXN1bHQpO1xyXG4gICAgfTtcclxuICAgIFVzZXJEYXRhQ29udmVydGVyLnByb3RvdHlwZS5wYXJzZUFycmF5ID0gZnVuY3Rpb24gKGFycmF5LCBjb250ZXh0KSB7XHJcbiAgICAgICAgdmFyIHJlc3VsdCA9IFtdO1xyXG4gICAgICAgIHZhciBlbnRyeUluZGV4ID0gMDtcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGFycmF5XzEgPSBhcnJheTsgX2kgPCBhcnJheV8xLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICB2YXIgZW50cnkgPSBhcnJheV8xW19pXTtcclxuICAgICAgICAgICAgdmFyIHBhcnNlZEVudHJ5ID0gdGhpcy5wYXJzZURhdGEoZW50cnksIGNvbnRleHQuY2hpbGRDb250ZXh0Rm9yQXJyYXkoZW50cnlJbmRleCkpO1xyXG4gICAgICAgICAgICBpZiAocGFyc2VkRW50cnkgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgLy8gSnVzdCBpbmNsdWRlIG51bGxzIGluIHRoZSBhcnJheSBmb3IgZmllbGRzIGJlaW5nIHJlcGxhY2VkIHdpdGggYVxyXG4gICAgICAgICAgICAgICAgLy8gc2VudGluZWwuXHJcbiAgICAgICAgICAgICAgICBwYXJzZWRFbnRyeSA9IE51bGxWYWx1ZS5JTlNUQU5DRTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXN1bHQucHVzaChwYXJzZWRFbnRyeSk7XHJcbiAgICAgICAgICAgIGVudHJ5SW5kZXgrKztcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG5ldyBBcnJheVZhbHVlKHJlc3VsdCk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBcIlBhcnNlc1wiIHRoZSBwcm92aWRlZCBGaWVsZFZhbHVlSW1wbCwgYWRkaW5nIGFueSBuZWNlc3NhcnkgdHJhbnNmb3JtcyB0b1xyXG4gICAgICogY29udGV4dC5maWVsZFRyYW5zZm9ybXMuXHJcbiAgICAgKi9cclxuICAgIFVzZXJEYXRhQ29udmVydGVyLnByb3RvdHlwZS5wYXJzZVNlbnRpbmVsRmllbGRWYWx1ZSA9IGZ1bmN0aW9uICh2YWx1ZSwgY29udGV4dCkge1xyXG4gICAgICAgIC8vIFNlbnRpbmVscyBhcmUgb25seSBzdXBwb3J0ZWQgd2l0aCB3cml0ZXMsIGFuZCBub3Qgd2l0aGluIGFycmF5cy5cclxuICAgICAgICBpZiAoIWlzV3JpdGUoY29udGV4dC5kYXRhU291cmNlKSkge1xyXG4gICAgICAgICAgICB0aHJvdyBjb250ZXh0LmNyZWF0ZUVycm9yKHZhbHVlLl9tZXRob2ROYW1lICsgXCIoKSBjYW4gb25seSBiZSB1c2VkIHdpdGggdXBkYXRlKCkgYW5kIHNldCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoY29udGV4dC5wYXRoID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRocm93IGNvbnRleHQuY3JlYXRlRXJyb3IodmFsdWUuX21ldGhvZE5hbWUgKyBcIigpIGlzIG5vdCBjdXJyZW50bHkgc3VwcG9ydGVkIGluc2lkZSBhcnJheXNcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIERlbGV0ZUZpZWxkVmFsdWVJbXBsKSB7XHJcbiAgICAgICAgICAgIGlmIChjb250ZXh0LmRhdGFTb3VyY2UgPT09IFVzZXJEYXRhU291cmNlLk1lcmdlU2V0KSB7XHJcbiAgICAgICAgICAgICAgICAvLyBObyB0cmFuc2Zvcm0gdG8gYWRkIGZvciBhIGRlbGV0ZSwgYnV0IHdlIG5lZWQgdG8gYWRkIGl0IHRvIG91clxyXG4gICAgICAgICAgICAgICAgLy8gZmllbGRNYXNrIHNvIGl0IGdldHMgZGVsZXRlZC5cclxuICAgICAgICAgICAgICAgIGNvbnRleHQuZmllbGRNYXNrLnB1c2goY29udGV4dC5wYXRoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChjb250ZXh0LmRhdGFTb3VyY2UgPT09IFVzZXJEYXRhU291cmNlLlVwZGF0ZSkge1xyXG4gICAgICAgICAgICAgICAgYXNzZXJ0KGNvbnRleHQucGF0aC5sZW5ndGggPiAwLCAnRmllbGRWYWx1ZS5kZWxldGUoKSBhdCB0aGUgdG9wIGxldmVsIHNob3VsZCBoYXZlIGFscmVhZHknICtcclxuICAgICAgICAgICAgICAgICAgICAnIGJlZW4gaGFuZGxlZC4nKTtcclxuICAgICAgICAgICAgICAgIHRocm93IGNvbnRleHQuY3JlYXRlRXJyb3IoJ0ZpZWxkVmFsdWUuZGVsZXRlKCkgY2FuIG9ubHkgYXBwZWFyIGF0IHRoZSB0b3AgbGV2ZWwgJyArXHJcbiAgICAgICAgICAgICAgICAgICAgJ29mIHlvdXIgdXBkYXRlIGRhdGEnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIFdlIHNob3VsZG4ndCBlbmNvdW50ZXIgZGVsZXRlIHNlbnRpbmVscyBmb3IgcXVlcmllcyBvciBub24tbWVyZ2Ugc2V0KCkgY2FsbHMuXHJcbiAgICAgICAgICAgICAgICB0aHJvdyBjb250ZXh0LmNyZWF0ZUVycm9yKCdGaWVsZFZhbHVlLmRlbGV0ZSgpIGNhbm5vdCBiZSB1c2VkIHdpdGggc2V0KCkgdW5sZXNzIHlvdSBwYXNzICcgK1xyXG4gICAgICAgICAgICAgICAgICAgICd7bWVyZ2U6dHJ1ZX0nKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh2YWx1ZSBpbnN0YW5jZW9mIFNlcnZlclRpbWVzdGFtcEZpZWxkVmFsdWVJbXBsKSB7XHJcbiAgICAgICAgICAgIGNvbnRleHQuZmllbGRUcmFuc2Zvcm1zLnB1c2gobmV3IEZpZWxkVHJhbnNmb3JtKGNvbnRleHQucGF0aCwgU2VydmVyVGltZXN0YW1wVHJhbnNmb3JtLmluc3RhbmNlKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHZhbHVlIGluc3RhbmNlb2YgQXJyYXlVbmlvbkZpZWxkVmFsdWVJbXBsKSB7XHJcbiAgICAgICAgICAgIHZhciBwYXJzZWRFbGVtZW50cyA9IHRoaXMucGFyc2VBcnJheVRyYW5zZm9ybUVsZW1lbnRzKHZhbHVlLl9tZXRob2ROYW1lLCB2YWx1ZS5fZWxlbWVudHMpO1xyXG4gICAgICAgICAgICB2YXIgYXJyYXlVbmlvbiA9IG5ldyBBcnJheVVuaW9uVHJhbnNmb3JtT3BlcmF0aW9uKHBhcnNlZEVsZW1lbnRzKTtcclxuICAgICAgICAgICAgY29udGV4dC5maWVsZFRyYW5zZm9ybXMucHVzaChuZXcgRmllbGRUcmFuc2Zvcm0oY29udGV4dC5wYXRoLCBhcnJheVVuaW9uKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHZhbHVlIGluc3RhbmNlb2YgQXJyYXlSZW1vdmVGaWVsZFZhbHVlSW1wbCkge1xyXG4gICAgICAgICAgICB2YXIgcGFyc2VkRWxlbWVudHMgPSB0aGlzLnBhcnNlQXJyYXlUcmFuc2Zvcm1FbGVtZW50cyh2YWx1ZS5fbWV0aG9kTmFtZSwgdmFsdWUuX2VsZW1lbnRzKTtcclxuICAgICAgICAgICAgdmFyIGFycmF5UmVtb3ZlID0gbmV3IEFycmF5UmVtb3ZlVHJhbnNmb3JtT3BlcmF0aW9uKHBhcnNlZEVsZW1lbnRzKTtcclxuICAgICAgICAgICAgY29udGV4dC5maWVsZFRyYW5zZm9ybXMucHVzaChuZXcgRmllbGRUcmFuc2Zvcm0oY29udGV4dC5wYXRoLCBhcnJheVJlbW92ZSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh2YWx1ZSBpbnN0YW5jZW9mIE51bWVyaWNJbmNyZW1lbnRGaWVsZFZhbHVlSW1wbCkge1xyXG4gICAgICAgICAgICB2YXIgb3BlcmFuZCA9IHRoaXMucGFyc2VRdWVyeVZhbHVlKCdGaWVsZFZhbHVlLmluY3JlbWVudCcsIHZhbHVlLl9vcGVyYW5kKTtcclxuICAgICAgICAgICAgdmFyIG51bWVyaWNJbmNyZW1lbnQgPSBuZXcgTnVtZXJpY0luY3JlbWVudFRyYW5zZm9ybU9wZXJhdGlvbihvcGVyYW5kKTtcclxuICAgICAgICAgICAgY29udGV4dC5maWVsZFRyYW5zZm9ybXMucHVzaChuZXcgRmllbGRUcmFuc2Zvcm0oY29udGV4dC5wYXRoLCBudW1lcmljSW5jcmVtZW50KSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBmYWlsKCdVbmtub3duIEZpZWxkVmFsdWUgdHlwZTogJyArIHZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBIZWxwZXIgdG8gcGFyc2UgYSBzY2FsYXIgdmFsdWUgKGkuZS4gbm90IGFuIE9iamVjdCwgQXJyYXksIG9yIEZpZWxkVmFsdWUpXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybiBUaGUgcGFyc2VkIHZhbHVlXHJcbiAgICAgKi9cclxuICAgIFVzZXJEYXRhQ29udmVydGVyLnByb3RvdHlwZS5wYXJzZVNjYWxhclZhbHVlID0gZnVuY3Rpb24gKHZhbHVlLCBjb250ZXh0KSB7XHJcbiAgICAgICAgaWYgKHZhbHVlID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBOdWxsVmFsdWUuSU5TVEFOQ0U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicpIHtcclxuICAgICAgICAgICAgaWYgKGlzU2FmZUludGVnZXIodmFsdWUpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEludGVnZXJWYWx1ZSh2YWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IERvdWJsZVZhbHVlKHZhbHVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh0eXBlb2YgdmFsdWUgPT09ICdib29sZWFuJykge1xyXG4gICAgICAgICAgICByZXR1cm4gQm9vbGVhblZhbHVlLm9mKHZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFN0cmluZ1ZhbHVlKHZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodmFsdWUgaW5zdGFuY2VvZiBEYXRlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgVGltZXN0YW1wVmFsdWUoVGltZXN0YW1wLmZyb21EYXRlKHZhbHVlKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHZhbHVlIGluc3RhbmNlb2YgVGltZXN0YW1wKSB7XHJcbiAgICAgICAgICAgIC8vIEZpcmVzdG9yZSBiYWNrZW5kIHRydW5jYXRlcyBwcmVjaXNpb24gZG93biB0byBtaWNyb3NlY29uZHMuIFRvIGVuc3VyZVxyXG4gICAgICAgICAgICAvLyBvZmZsaW5lIG1vZGUgd29ya3MgdGhlIHNhbWUgd2l0aCByZWdhcmRzIHRvIHRydW5jYXRpb24sIHBlcmZvcm0gdGhlXHJcbiAgICAgICAgICAgIC8vIHRydW5jYXRpb24gaW1tZWRpYXRlbHkgd2l0aG91dCB3YWl0aW5nIGZvciB0aGUgYmFja2VuZCB0byBkbyB0aGF0LlxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFRpbWVzdGFtcFZhbHVlKG5ldyBUaW1lc3RhbXAodmFsdWUuc2Vjb25kcywgTWF0aC5mbG9vcih2YWx1ZS5uYW5vc2Vjb25kcyAvIDEwMDApICogMTAwMCkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh2YWx1ZSBpbnN0YW5jZW9mIEdlb1BvaW50KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgR2VvUG9pbnRWYWx1ZSh2YWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHZhbHVlIGluc3RhbmNlb2YgQmxvYikge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEJsb2JWYWx1ZSh2YWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHZhbHVlIGluc3RhbmNlb2YgRG9jdW1lbnRLZXlSZWZlcmVuY2UpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBSZWZWYWx1ZSh2YWx1ZS5kYXRhYmFzZUlkLCB2YWx1ZS5rZXkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhyb3cgY29udGV4dC5jcmVhdGVFcnJvcihcIlVuc3VwcG9ydGVkIGZpZWxkIHZhbHVlOiBcIiArIHZhbHVlRGVzY3JpcHRpb24odmFsdWUpKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgVXNlckRhdGFDb252ZXJ0ZXIucHJvdG90eXBlLnBhcnNlQXJyYXlUcmFuc2Zvcm1FbGVtZW50cyA9IGZ1bmN0aW9uIChtZXRob2ROYW1lLCBlbGVtZW50cykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIGVsZW1lbnRzLm1hcChmdW5jdGlvbiAoZWxlbWVudCwgaSkge1xyXG4gICAgICAgICAgICAvLyBBbHRob3VnaCBhcnJheSB0cmFuc2Zvcm1zIGFyZSB1c2VkIHdpdGggd3JpdGVzLCB0aGUgYWN0dWFsIGVsZW1lbnRzXHJcbiAgICAgICAgICAgIC8vIGJlaW5nIHVuaW9uZWQgb3IgcmVtb3ZlZCBhcmUgbm90IGNvbnNpZGVyZWQgd3JpdGVzIHNpbmNlIHRoZXkgY2Fubm90XHJcbiAgICAgICAgICAgIC8vIGNvbnRhaW4gYW55IEZpZWxkVmFsdWUgc2VudGluZWxzLCBldGMuXHJcbiAgICAgICAgICAgIHZhciBjb250ZXh0ID0gbmV3IFBhcnNlQ29udGV4dChVc2VyRGF0YVNvdXJjZS5Bcmd1bWVudCwgbWV0aG9kTmFtZSwgRmllbGRQYXRoLkVNUFRZX1BBVEgpO1xyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXMucGFyc2VEYXRhKGVsZW1lbnQsIGNvbnRleHQuY2hpbGRDb250ZXh0Rm9yQXJyYXkoaSkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBVc2VyRGF0YUNvbnZlcnRlcjtcclxufSgpKTtcclxuLyoqXHJcbiAqIENoZWNrcyB3aGV0aGVyIGFuIG9iamVjdCBsb29rcyBsaWtlIGEgSlNPTiBvYmplY3QgdGhhdCBzaG91bGQgYmUgY29udmVydGVkXHJcbiAqIGludG8gYSBzdHJ1Y3QuIE5vcm1hbCBjbGFzcy9wcm90b3R5cGUgaW5zdGFuY2VzIGFyZSBjb25zaWRlcmVkIHRvIGxvb2sgbGlrZVxyXG4gKiBKU09OIG9iamVjdHMgc2luY2UgdGhleSBzaG91bGQgYmUgY29udmVydGVkIHRvIGEgc3RydWN0IHZhbHVlLiBBcnJheXMsIERhdGVzLFxyXG4gKiBHZW9Qb2ludHMsIGV0Yy4gYXJlIG5vdCBjb25zaWRlcmVkIHRvIGxvb2sgbGlrZSBKU09OIG9iamVjdHMgc2luY2UgdGhleSBtYXBcclxuICogdG8gc3BlY2lmaWMgRmllbGRWYWx1ZSB0eXBlcyBvdGhlciB0aGFuIE9iamVjdFZhbHVlLlxyXG4gKi9cclxuZnVuY3Rpb24gbG9va3NMaWtlSnNvbk9iamVjdChpbnB1dCkge1xyXG4gICAgcmV0dXJuICh0eXBlb2YgaW5wdXQgPT09ICdvYmplY3QnICYmXHJcbiAgICAgICAgaW5wdXQgIT09IG51bGwgJiZcclxuICAgICAgICAhKGlucHV0IGluc3RhbmNlb2YgQXJyYXkpICYmXHJcbiAgICAgICAgIShpbnB1dCBpbnN0YW5jZW9mIERhdGUpICYmXHJcbiAgICAgICAgIShpbnB1dCBpbnN0YW5jZW9mIFRpbWVzdGFtcCkgJiZcclxuICAgICAgICAhKGlucHV0IGluc3RhbmNlb2YgR2VvUG9pbnQpICYmXHJcbiAgICAgICAgIShpbnB1dCBpbnN0YW5jZW9mIEJsb2IpICYmXHJcbiAgICAgICAgIShpbnB1dCBpbnN0YW5jZW9mIERvY3VtZW50S2V5UmVmZXJlbmNlKSAmJlxyXG4gICAgICAgICEoaW5wdXQgaW5zdGFuY2VvZiBGaWVsZFZhbHVlSW1wbCkpO1xyXG59XHJcbmZ1bmN0aW9uIHZhbGlkYXRlUGxhaW5PYmplY3QobWVzc2FnZSwgY29udGV4dCwgaW5wdXQpIHtcclxuICAgIGlmICghbG9va3NMaWtlSnNvbk9iamVjdChpbnB1dCkgfHwgIWlzUGxhaW5PYmplY3QoaW5wdXQpKSB7XHJcbiAgICAgICAgdmFyIGRlc2NyaXB0aW9uID0gdmFsdWVEZXNjcmlwdGlvbihpbnB1dCk7XHJcbiAgICAgICAgaWYgKGRlc2NyaXB0aW9uID09PSAnYW4gb2JqZWN0Jykge1xyXG4gICAgICAgICAgICAvLyBNYXNzYWdlIHRoZSBlcnJvciBpZiBpdCB3YXMgYW4gb2JqZWN0LlxyXG4gICAgICAgICAgICB0aHJvdyBjb250ZXh0LmNyZWF0ZUVycm9yKG1lc3NhZ2UgKyAnIGEgY3VzdG9tIG9iamVjdCcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhyb3cgY29udGV4dC5jcmVhdGVFcnJvcihtZXNzYWdlICsgJyAnICsgZGVzY3JpcHRpb24pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4vKipcclxuICogSGVscGVyIHRoYXQgY2FsbHMgZnJvbURvdFNlcGFyYXRlZFN0cmluZygpIGJ1dCB3cmFwcyBhbnkgZXJyb3IgdGhyb3duLlxyXG4gKi9cclxuZnVuY3Rpb24gZmllbGRQYXRoRnJvbUFyZ3VtZW50KG1ldGhvZE5hbWUsIHBhdGgpIHtcclxuICAgIGlmIChwYXRoIGluc3RhbmNlb2YgRmllbGRQYXRoJDEpIHtcclxuICAgICAgICByZXR1cm4gcGF0aC5faW50ZXJuYWxQYXRoO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAodHlwZW9mIHBhdGggPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgcmV0dXJuIGZpZWxkUGF0aEZyb21Eb3RTZXBhcmF0ZWRTdHJpbmcobWV0aG9kTmFtZSwgcGF0aCk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICB2YXIgbWVzc2FnZSA9ICdGaWVsZCBwYXRoIGFyZ3VtZW50cyBtdXN0IGJlIG9mIHR5cGUgc3RyaW5nIG9yIEZpZWxkUGF0aC4nO1xyXG4gICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLklOVkFMSURfQVJHVU1FTlQsIFwiRnVuY3Rpb24gXCIgKyBtZXRob2ROYW1lICsgXCIoKSBjYWxsZWQgd2l0aCBpbnZhbGlkIGRhdGEuIFwiICsgbWVzc2FnZSk7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIFdyYXBzIGZyb21Eb3RTZXBhcmF0ZWRTdHJpbmcgd2l0aCBhbiBlcnJvciBtZXNzYWdlIGFib3V0IHRoZSBtZXRob2QgdGhhdFxyXG4gKiB3YXMgdGhyb3duLlxyXG4gKiBAcGFyYW0gbWV0aG9kTmFtZSBUaGUgcHVibGljbHkgdmlzaWJsZSBtZXRob2QgbmFtZVxyXG4gKiBAcGFyYW0gcGF0aCBUaGUgZG90LXNlcGFyYXRlZCBzdHJpbmcgZm9ybSBvZiBhIGZpZWxkIHBhdGggd2hpY2ggd2lsbCBiZSBzcGxpdFxyXG4gKiBvbiBkb3RzLlxyXG4gKi9cclxuZnVuY3Rpb24gZmllbGRQYXRoRnJvbURvdFNlcGFyYXRlZFN0cmluZyhtZXRob2ROYW1lLCBwYXRoKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIHJldHVybiBmcm9tRG90U2VwYXJhdGVkU3RyaW5nKHBhdGgpLl9pbnRlcm5hbFBhdGg7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgIHZhciBtZXNzYWdlID0gZXJyb3JNZXNzYWdlKGUpO1xyXG4gICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLklOVkFMSURfQVJHVU1FTlQsIFwiRnVuY3Rpb24gXCIgKyBtZXRob2ROYW1lICsgXCIoKSBjYWxsZWQgd2l0aCBpbnZhbGlkIGRhdGEuIFwiICsgbWVzc2FnZSk7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIEV4dHJhY3RzIHRoZSBtZXNzYWdlIGZyb20gYSBjYXVnaHQgZXhjZXB0aW9uLCB3aGljaCBzaG91bGQgYmUgYW4gRXJyb3Igb2JqZWN0XHJcbiAqIHRob3VnaCBKUyBkb2Vzbid0IGd1YXJhbnRlZSB0aGF0LlxyXG4gKi9cclxuZnVuY3Rpb24gZXJyb3JNZXNzYWdlKGVycm9yKSB7XHJcbiAgICByZXR1cm4gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBlcnJvci50b1N0cmluZygpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vLyBzZXR0aW5ncygpIGRlZmF1bHRzOlxyXG52YXIgREVGQVVMVF9IT1NUID0gJ2ZpcmVzdG9yZS5nb29nbGVhcGlzLmNvbSc7XHJcbnZhciBERUZBVUxUX1NTTCA9IHRydWU7XHJcbnZhciBERUZBVUxUX1RJTUVTVEFNUFNfSU5fU05BUFNIT1RTID0gdHJ1ZTtcclxudmFyIERFRkFVTFRfRk9SQ0VfTE9OR19QT0xMSU5HID0gZmFsc2U7XHJcbi8qKlxyXG4gKiBDb25zdGFudCB1c2VkIHRvIGluZGljYXRlIHRoZSBMUlUgZ2FyYmFnZSBjb2xsZWN0aW9uIHNob3VsZCBiZSBkaXNhYmxlZC5cclxuICogU2V0IHRoaXMgdmFsdWUgYXMgdGhlIGBjYWNoZVNpemVCeXRlc2Agb24gdGhlIHNldHRpbmdzIHBhc3NlZCB0byB0aGVcclxuICogYEZpcmVzdG9yZWAgaW5zdGFuY2UuXHJcbiAqL1xyXG52YXIgQ0FDSEVfU0laRV9VTkxJTUlURUQgPSBMcnVQYXJhbXMuQ09MTEVDVElPTl9ESVNBQkxFRDtcclxuLy8gZW5hYmxlUGVyc2lzdGVuY2UoKSBkZWZhdWx0czpcclxudmFyIERFRkFVTFRfU1lOQ0hST05JWkVfVEFCUyA9IGZhbHNlO1xyXG4vKipcclxuICogQSBjb25jcmV0ZSB0eXBlIGRlc2NyaWJpbmcgYWxsIHRoZSB2YWx1ZXMgdGhhdCBjYW4gYmUgYXBwbGllZCB2aWEgYVxyXG4gKiB1c2VyLXN1cHBsaWVkIGZpcmVzdG9yZS5TZXR0aW5ncyBvYmplY3QuIFRoaXMgaXMgYSBzZXBhcmF0ZSB0eXBlIHNvIHRoYXRcclxuICogZGVmYXVsdHMgY2FuIGJlIHN1cHBsaWVkIGFuZCB0aGUgdmFsdWUgY2FuIGJlIGNoZWNrZWQgZm9yIGVxdWFsaXR5LlxyXG4gKi9cclxudmFyIEZpcmVzdG9yZVNldHRpbmdzID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gRmlyZXN0b3JlU2V0dGluZ3Moc2V0dGluZ3MpIHtcclxuICAgICAgICBpZiAoc2V0dGluZ3MuaG9zdCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGlmIChzZXR0aW5ncy5zc2wgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuSU5WQUxJRF9BUkdVTUVOVCwgXCJDYW4ndCBwcm92aWRlIHNzbCBvcHRpb24gaWYgaG9zdCBvcHRpb24gaXMgbm90IHNldFwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLmhvc3QgPSBERUZBVUxUX0hPU1Q7XHJcbiAgICAgICAgICAgIHRoaXMuc3NsID0gREVGQVVMVF9TU0w7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB2YWxpZGF0ZU5hbWVkVHlwZSgnc2V0dGluZ3MnLCAnbm9uLWVtcHR5IHN0cmluZycsICdob3N0Jywgc2V0dGluZ3MuaG9zdCk7XHJcbiAgICAgICAgICAgIHRoaXMuaG9zdCA9IHNldHRpbmdzLmhvc3Q7XHJcbiAgICAgICAgICAgIHZhbGlkYXRlTmFtZWRPcHRpb25hbFR5cGUoJ3NldHRpbmdzJywgJ2Jvb2xlYW4nLCAnc3NsJywgc2V0dGluZ3Muc3NsKTtcclxuICAgICAgICAgICAgdGhpcy5zc2wgPSBkZWZhdWx0ZWQoc2V0dGluZ3Muc3NsLCBERUZBVUxUX1NTTCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhbGlkYXRlT3B0aW9uTmFtZXMoJ3NldHRpbmdzJywgc2V0dGluZ3MsIFtcclxuICAgICAgICAgICAgJ2hvc3QnLFxyXG4gICAgICAgICAgICAnc3NsJyxcclxuICAgICAgICAgICAgJ2NyZWRlbnRpYWxzJyxcclxuICAgICAgICAgICAgJ3RpbWVzdGFtcHNJblNuYXBzaG90cycsXHJcbiAgICAgICAgICAgICdjYWNoZVNpemVCeXRlcycsXHJcbiAgICAgICAgICAgICdleHBlcmltZW50YWxGb3JjZUxvbmdQb2xsaW5nJ1xyXG4gICAgICAgIF0pO1xyXG4gICAgICAgIHZhbGlkYXRlTmFtZWRPcHRpb25hbFR5cGUoJ3NldHRpbmdzJywgJ29iamVjdCcsICdjcmVkZW50aWFscycsIHNldHRpbmdzLmNyZWRlbnRpYWxzKTtcclxuICAgICAgICB0aGlzLmNyZWRlbnRpYWxzID0gc2V0dGluZ3MuY3JlZGVudGlhbHM7XHJcbiAgICAgICAgdmFsaWRhdGVOYW1lZE9wdGlvbmFsVHlwZSgnc2V0dGluZ3MnLCAnYm9vbGVhbicsICd0aW1lc3RhbXBzSW5TbmFwc2hvdHMnLCBzZXR0aW5ncy50aW1lc3RhbXBzSW5TbmFwc2hvdHMpO1xyXG4gICAgICAgIC8vIE5vYm9keSBzaG91bGQgc2V0IHRpbWVzdGFtcHNJblNuYXBzaG90cyBhbnltb3JlLCBidXQgdGhlIGVycm9yIGRlcGVuZHMgb25cclxuICAgICAgICAvLyB3aGV0aGVyIHRoZXkgc2V0IGl0IHRvIHRydWUgb3IgZmFsc2UuLi5cclxuICAgICAgICBpZiAoc2V0dGluZ3MudGltZXN0YW1wc0luU25hcHNob3RzID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgIGVycm9yKFwiXFxuICBUaGUgdGltZXN0YW1wc0luU25hcHNob3RzIHNldHRpbmcgbm93IGRlZmF1bHRzIHRvIHRydWUgYW5kIHlvdSBub1xcbiAgbG9uZ2VyIG5lZWQgdG8gZXhwbGljaXRseSBzZXQgaXQuIEluIGEgZnV0dXJlIHJlbGVhc2UsIHRoZSBzZXR0aW5nXFxuICB3aWxsIGJlIHJlbW92ZWQgZW50aXJlbHkgYW5kIHNvIGl0IGlzIHJlY29tbWVuZGVkIHRoYXQgeW91IHJlbW92ZSBpdFxcbiAgZnJvbSB5b3VyIGZpcmVzdG9yZS5zZXR0aW5ncygpIGNhbGwgbm93LlwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoc2V0dGluZ3MudGltZXN0YW1wc0luU25hcHNob3RzID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICBlcnJvcihcIlxcbiAgVGhlIHRpbWVzdGFtcHNJblNuYXBzaG90cyBzZXR0aW5nIHdpbGwgc29vbiBiZSByZW1vdmVkLiBZT1UgTVVTVCBVUERBVEVcXG4gIFlPVVIgQ09ERS5cXG5cXG4gIFRvIGhpZGUgdGhpcyB3YXJuaW5nLCBzdG9wIHVzaW5nIHRoZSB0aW1lc3RhbXBzSW5TbmFwc2hvdHMgc2V0dGluZyBpbiB5b3VyXFxuICBmaXJlc3RvcmUuc2V0dGluZ3MoeyAuLi4gfSkgY2FsbC5cXG5cXG4gIE9uY2UgeW91IHJlbW92ZSB0aGUgc2V0dGluZywgVGltZXN0YW1wcyBzdG9yZWQgaW4gQ2xvdWQgRmlyZXN0b3JlIHdpbGwgYmVcXG4gIHJlYWQgYmFjayBhcyBGaXJlYmFzZSBUaW1lc3RhbXAgb2JqZWN0cyBpbnN0ZWFkIG9mIGFzIHN5c3RlbSBEYXRlIG9iamVjdHMuXFxuICBTbyB5b3Ugd2lsbCBhbHNvIG5lZWQgdG8gdXBkYXRlIGNvZGUgZXhwZWN0aW5nIGEgRGF0ZSB0byBpbnN0ZWFkIGV4cGVjdCBhXFxuICBUaW1lc3RhbXAuIEZvciBleGFtcGxlOlxcblxcbiAgLy8gT2xkOlxcbiAgY29uc3QgZGF0ZSA9IHNuYXBzaG90LmdldCgnY3JlYXRlZF9hdCcpO1xcbiAgLy8gTmV3OlxcbiAgY29uc3QgdGltZXN0YW1wID0gc25hcHNob3QuZ2V0KCdjcmVhdGVkX2F0Jyk7IGNvbnN0IGRhdGUgPVxcbiAgdGltZXN0YW1wLnRvRGF0ZSgpO1xcblxcbiAgUGxlYXNlIGF1ZGl0IGFsbCBleGlzdGluZyB1c2FnZXMgb2YgRGF0ZSB3aGVuIHlvdSBlbmFibGUgdGhlIG5ld1xcbiAgYmVoYXZpb3IuXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnRpbWVzdGFtcHNJblNuYXBzaG90cyA9IGRlZmF1bHRlZChzZXR0aW5ncy50aW1lc3RhbXBzSW5TbmFwc2hvdHMsIERFRkFVTFRfVElNRVNUQU1QU19JTl9TTkFQU0hPVFMpO1xyXG4gICAgICAgIHZhbGlkYXRlTmFtZWRPcHRpb25hbFR5cGUoJ3NldHRpbmdzJywgJ251bWJlcicsICdjYWNoZVNpemVCeXRlcycsIHNldHRpbmdzLmNhY2hlU2l6ZUJ5dGVzKTtcclxuICAgICAgICBpZiAoc2V0dGluZ3MuY2FjaGVTaXplQnl0ZXMgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aGlzLmNhY2hlU2l6ZUJ5dGVzID0gTHJ1UGFyYW1zLkRFRkFVTFRfQ0FDSEVfU0laRV9CWVRFUztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGlmIChzZXR0aW5ncy5jYWNoZVNpemVCeXRlcyAhPT0gQ0FDSEVfU0laRV9VTkxJTUlURUQgJiZcclxuICAgICAgICAgICAgICAgIHNldHRpbmdzLmNhY2hlU2l6ZUJ5dGVzIDwgTHJ1UGFyYW1zLk1JTklNVU1fQ0FDSEVfU0laRV9CWVRFUykge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuSU5WQUxJRF9BUkdVTUVOVCwgXCJjYWNoZVNpemVCeXRlcyBtdXN0IGJlIGF0IGxlYXN0IFwiICsgTHJ1UGFyYW1zLk1JTklNVU1fQ0FDSEVfU0laRV9CWVRFUyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNhY2hlU2l6ZUJ5dGVzID0gc2V0dGluZ3MuY2FjaGVTaXplQnl0ZXM7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdmFsaWRhdGVOYW1lZE9wdGlvbmFsVHlwZSgnc2V0dGluZ3MnLCAnYm9vbGVhbicsICdleHBlcmltZW50YWxGb3JjZUxvbmdQb2xsaW5nJywgc2V0dGluZ3MuZXhwZXJpbWVudGFsRm9yY2VMb25nUG9sbGluZyk7XHJcbiAgICAgICAgdGhpcy5mb3JjZUxvbmdQb2xsaW5nID1cclxuICAgICAgICAgICAgc2V0dGluZ3MuZXhwZXJpbWVudGFsRm9yY2VMb25nUG9sbGluZyA9PT0gdW5kZWZpbmVkXHJcbiAgICAgICAgICAgICAgICA/IERFRkFVTFRfRk9SQ0VfTE9OR19QT0xMSU5HXHJcbiAgICAgICAgICAgICAgICA6IHNldHRpbmdzLmV4cGVyaW1lbnRhbEZvcmNlTG9uZ1BvbGxpbmc7XHJcbiAgICB9XHJcbiAgICBGaXJlc3RvcmVTZXR0aW5ncy5wcm90b3R5cGUuaXNFcXVhbCA9IGZ1bmN0aW9uIChvdGhlcikge1xyXG4gICAgICAgIHJldHVybiAodGhpcy5ob3N0ID09PSBvdGhlci5ob3N0ICYmXHJcbiAgICAgICAgICAgIHRoaXMuc3NsID09PSBvdGhlci5zc2wgJiZcclxuICAgICAgICAgICAgdGhpcy50aW1lc3RhbXBzSW5TbmFwc2hvdHMgPT09IG90aGVyLnRpbWVzdGFtcHNJblNuYXBzaG90cyAmJlxyXG4gICAgICAgICAgICB0aGlzLmNyZWRlbnRpYWxzID09PSBvdGhlci5jcmVkZW50aWFscyAmJlxyXG4gICAgICAgICAgICB0aGlzLmNhY2hlU2l6ZUJ5dGVzID09PSBvdGhlci5jYWNoZVNpemVCeXRlcyAmJlxyXG4gICAgICAgICAgICB0aGlzLmZvcmNlTG9uZ1BvbGxpbmcgPT09IG90aGVyLmZvcmNlTG9uZ1BvbGxpbmcpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBGaXJlc3RvcmVTZXR0aW5ncztcclxufSgpKTtcclxuLyoqXHJcbiAqIFRoZSByb290IHJlZmVyZW5jZSB0byB0aGUgZGF0YWJhc2UuXHJcbiAqL1xyXG52YXIgRmlyZXN0b3JlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gRmlyZXN0b3JlKGRhdGFiYXNlSWRPckFwcCwgYXV0aFByb3ZpZGVyKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB0aGlzLl9maXJlYmFzZUFwcCA9IG51bGw7XHJcbiAgICAgICAgLy8gUHVibGljIGZvciB1c2UgaW4gdGVzdHMuXHJcbiAgICAgICAgLy8gVE9ETyhtaWtlbGVoZW4pOiBVc2UgbW9kdWxhcml6ZWQgaW5pdGlhbGl6YXRpb24gaW5zdGVhZC5cclxuICAgICAgICB0aGlzLl9xdWV1ZSA9IG5ldyBBc3luY1F1ZXVlKCk7XHJcbiAgICAgICAgdGhpcy5JTlRFUk5BTCA9IHtcclxuICAgICAgICAgICAgZGVsZXRlOiBmdW5jdGlvbiAoKSB7IHJldHVybiB0c2xpYi5fX2F3YWl0ZXIoX3RoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHNsaWIuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGUgY2xpZW50IG11c3QgYmUgaW5pdGFsaXplZCB0byBlbnN1cmUgdGhhdCBhbGwgc3Vic2VxdWVudCBBUEkgdXNhZ2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRocm93cyBhbiBleGNlcHRpb24uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVuc3VyZUNsaWVudENvbmZpZ3VyZWQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuX2ZpcmVzdG9yZUNsaWVudC50ZXJtaW5hdGUoKV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7IH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIGlmICh0eXBlb2YgZGF0YWJhc2VJZE9yQXBwLm9wdGlvbnMgPT09ICdvYmplY3QnKSB7XHJcbiAgICAgICAgICAgIC8vIFRoaXMgaXMgdmVyeSBsaWtlbHkgYSBGaXJlYmFzZSBhcHAgb2JqZWN0XHJcbiAgICAgICAgICAgIC8vIFRPRE8oYi8zNDE3NzYwNSk6IENhbiB3ZSBzb21laG93IHVzZSBpbnN0YW5jZW9mP1xyXG4gICAgICAgICAgICB2YXIgYXBwID0gZGF0YWJhc2VJZE9yQXBwO1xyXG4gICAgICAgICAgICB0aGlzLl9maXJlYmFzZUFwcCA9IGFwcDtcclxuICAgICAgICAgICAgdGhpcy5fZGF0YWJhc2VJZCA9IEZpcmVzdG9yZS5kYXRhYmFzZUlkRnJvbUFwcChhcHApO1xyXG4gICAgICAgICAgICB0aGlzLl9wZXJzaXN0ZW5jZUtleSA9IGFwcC5uYW1lO1xyXG4gICAgICAgICAgICB0aGlzLl9jcmVkZW50aWFscyA9IG5ldyBGaXJlYmFzZUNyZWRlbnRpYWxzUHJvdmlkZXIoYXV0aFByb3ZpZGVyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHZhciBleHRlcm5hbF8xID0gZGF0YWJhc2VJZE9yQXBwO1xyXG4gICAgICAgICAgICBpZiAoIWV4dGVybmFsXzEucHJvamVjdElkKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5JTlZBTElEX0FSR1VNRU5ULCAnTXVzdCBwcm92aWRlIHByb2plY3RJZCcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuX2RhdGFiYXNlSWQgPSBuZXcgRGF0YWJhc2VJZChleHRlcm5hbF8xLnByb2plY3RJZCwgZXh0ZXJuYWxfMS5kYXRhYmFzZSk7XHJcbiAgICAgICAgICAgIC8vIFVzZSBhIGRlZmF1bHQgcGVyc2lzdGVuY2VLZXkgdGhhdCBsaW5lcyB1cCB3aXRoIEZpcmViYXNlQXBwLlxyXG4gICAgICAgICAgICB0aGlzLl9wZXJzaXN0ZW5jZUtleSA9ICdbREVGQVVMVF0nO1xyXG4gICAgICAgICAgICB0aGlzLl9jcmVkZW50aWFscyA9IG5ldyBFbXB0eUNyZWRlbnRpYWxzUHJvdmlkZXIoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fc2V0dGluZ3MgPSBuZXcgRmlyZXN0b3JlU2V0dGluZ3Moe30pO1xyXG4gICAgICAgIHRoaXMuX2RhdGFDb252ZXJ0ZXIgPSB0aGlzLmNyZWF0ZURhdGFDb252ZXJ0ZXIodGhpcy5fZGF0YWJhc2VJZCk7XHJcbiAgICB9XHJcbiAgICBGaXJlc3RvcmUucHJvdG90eXBlLnNldHRpbmdzID0gZnVuY3Rpb24gKHNldHRpbmdzTGl0ZXJhbCkge1xyXG4gICAgICAgIHZhbGlkYXRlRXhhY3ROdW1iZXJPZkFyZ3MoJ0ZpcmVzdG9yZS5zZXR0aW5ncycsIGFyZ3VtZW50cywgMSk7XHJcbiAgICAgICAgdmFsaWRhdGVBcmdUeXBlKCdGaXJlc3RvcmUuc2V0dGluZ3MnLCAnb2JqZWN0JywgMSwgc2V0dGluZ3NMaXRlcmFsKTtcclxuICAgICAgICBpZiAoY29udGFpbnMoc2V0dGluZ3NMaXRlcmFsLCAncGVyc2lzdGVuY2UnKSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5JTlZBTElEX0FSR1VNRU5ULCAnXCJwZXJzaXN0ZW5jZVwiIGlzIG5vdyBzcGVjaWZpZWQgd2l0aCBhIHNlcGFyYXRlIGNhbGwgdG8gJyArXHJcbiAgICAgICAgICAgICAgICAnZmlyZXN0b3JlLmVuYWJsZVBlcnNpc3RlbmNlKCkuJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBuZXdTZXR0aW5ncyA9IG5ldyBGaXJlc3RvcmVTZXR0aW5ncyhzZXR0aW5nc0xpdGVyYWwpO1xyXG4gICAgICAgIGlmICh0aGlzLl9maXJlc3RvcmVDbGllbnQgJiYgIXRoaXMuX3NldHRpbmdzLmlzRXF1YWwobmV3U2V0dGluZ3MpKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLkZBSUxFRF9QUkVDT05ESVRJT04sICdGaXJlc3RvcmUgaGFzIGFscmVhZHkgYmVlbiBzdGFydGVkIGFuZCBpdHMgc2V0dGluZ3MgY2FuIG5vIGxvbmdlciAnICtcclxuICAgICAgICAgICAgICAgICdiZSBjaGFuZ2VkLiBZb3UgY2FuIG9ubHkgY2FsbCBzZXR0aW5ncygpIGJlZm9yZSBjYWxsaW5nIGFueSBvdGhlciAnICtcclxuICAgICAgICAgICAgICAgICdtZXRob2RzIG9uIGEgRmlyZXN0b3JlIG9iamVjdC4nKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fc2V0dGluZ3MgPSBuZXdTZXR0aW5ncztcclxuICAgICAgICBpZiAobmV3U2V0dGluZ3MuY3JlZGVudGlhbHMgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aGlzLl9jcmVkZW50aWFscyA9IG1ha2VDcmVkZW50aWFsc1Byb3ZpZGVyKG5ld1NldHRpbmdzLmNyZWRlbnRpYWxzKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgRmlyZXN0b3JlLnByb3RvdHlwZS5lbmFibGVOZXR3b3JrID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuZW5zdXJlQ2xpZW50Q29uZmlndXJlZCgpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9maXJlc3RvcmVDbGllbnQuZW5hYmxlTmV0d29yaygpO1xyXG4gICAgfTtcclxuICAgIEZpcmVzdG9yZS5wcm90b3R5cGUuZGlzYWJsZU5ldHdvcmsgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5lbnN1cmVDbGllbnRDb25maWd1cmVkKCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ZpcmVzdG9yZUNsaWVudC5kaXNhYmxlTmV0d29yaygpO1xyXG4gICAgfTtcclxuICAgIEZpcmVzdG9yZS5wcm90b3R5cGUuZW5hYmxlUGVyc2lzdGVuY2UgPSBmdW5jdGlvbiAoc2V0dGluZ3MpIHtcclxuICAgICAgICBpZiAodGhpcy5fZmlyZXN0b3JlQ2xpZW50KSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLkZBSUxFRF9QUkVDT05ESVRJT04sICdGaXJlc3RvcmUgaGFzIGFscmVhZHkgYmVlbiBzdGFydGVkIGFuZCBwZXJzaXN0ZW5jZSBjYW4gbm8gbG9uZ2VyICcgK1xyXG4gICAgICAgICAgICAgICAgJ2JlIGVuYWJsZWQuIFlvdSBjYW4gb25seSBjYWxsIGVuYWJsZVBlcnNpc3RlbmNlKCkgYmVmb3JlIGNhbGxpbmcgJyArXHJcbiAgICAgICAgICAgICAgICAnYW55IG90aGVyIG1ldGhvZHMgb24gYSBGaXJlc3RvcmUgb2JqZWN0LicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgc3luY2hyb25pemVUYWJzID0gZmFsc2U7XHJcbiAgICAgICAgaWYgKHNldHRpbmdzKSB7XHJcbiAgICAgICAgICAgIGlmIChzZXR0aW5ncy5leHBlcmltZW50YWxUYWJTeW5jaHJvbml6YXRpb24gIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgZXJyb3IoXCJUaGUgJ2V4cGVyaW1lbnRhbFRhYlN5bmNocm9uaXphdGlvbicgc2V0dGluZyBoYXMgYmVlbiByZW5hbWVkIHRvIFwiICtcclxuICAgICAgICAgICAgICAgICAgICBcIidzeW5jaHJvbml6ZVRhYnMnLiBJbiBhIGZ1dHVyZSByZWxlYXNlLCB0aGUgc2V0dGluZyB3aWxsIGJlIHJlbW92ZWQgXCIgK1xyXG4gICAgICAgICAgICAgICAgICAgICdhbmQgaXQgaXMgcmVjb21tZW5kZWQgdGhhdCB5b3UgdXBkYXRlIHlvdXIgJyArXHJcbiAgICAgICAgICAgICAgICAgICAgXCJmaXJlc3RvcmUuZW5hYmxlUGVyc2lzdGVuY2UoKSBjYWxsIHRvIHVzZSAnc3luY2hyb25pemVUYWJzJy5cIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc3luY2hyb25pemVUYWJzID0gZGVmYXVsdGVkKHNldHRpbmdzLnN5bmNocm9uaXplVGFicyAhPT0gdW5kZWZpbmVkXHJcbiAgICAgICAgICAgICAgICA/IHNldHRpbmdzLnN5bmNocm9uaXplVGFic1xyXG4gICAgICAgICAgICAgICAgOiBzZXR0aW5ncy5leHBlcmltZW50YWxUYWJTeW5jaHJvbml6YXRpb24sIERFRkFVTFRfU1lOQ0hST05JWkVfVEFCUyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLmNvbmZpZ3VyZUNsaWVudChuZXcgSW5kZXhlZERiUGVyc2lzdGVuY2VTZXR0aW5ncyh0aGlzLl9zZXR0aW5ncy5jYWNoZVNpemVCeXRlcywgc3luY2hyb25pemVUYWJzKSk7XHJcbiAgICB9O1xyXG4gICAgRmlyZXN0b3JlLnByb3RvdHlwZS5jbGVhclBlcnNpc3RlbmNlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIHBlcnNpc3RlbmNlS2V5ID0gSW5kZXhlZERiUGVyc2lzdGVuY2UuYnVpbGRTdG9yYWdlUHJlZml4KHRoaXMubWFrZURhdGFiYXNlSW5mbygpKTtcclxuICAgICAgICB2YXIgZGVmZXJyZWQgPSBuZXcgRGVmZXJyZWQoKTtcclxuICAgICAgICB0aGlzLl9xdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0RXZlbkFmdGVyU2h1dGRvd24oZnVuY3Rpb24gKCkgeyByZXR1cm4gdHNsaWIuX19hd2FpdGVyKF90aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgZV8xO1xyXG4gICAgICAgICAgICByZXR1cm4gdHNsaWIuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS50cnlzLnB1c2goWzAsIDIsICwgM10pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5fZmlyZXN0b3JlQ2xpZW50ICE9PSB1bmRlZmluZWQgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICF0aGlzLl9maXJlc3RvcmVDbGllbnQuY2xpZW50VGVybWluYXRlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuRkFJTEVEX1BSRUNPTkRJVElPTiwgJ1BlcnNpc3RlbmNlIGNhbm5vdCBiZSBjbGVhcmVkIGFmdGVyIHRoaXMgRmlyZXN0b3JlIGluc3RhbmNlIGlzIGluaXRpYWxpemVkLicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIEluZGV4ZWREYlBlcnNpc3RlbmNlLmNsZWFyUGVyc2lzdGVuY2UocGVyc2lzdGVuY2VLZXkpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCAzXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVfMSA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVqZWN0KGVfMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDNdO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTsgfSk7XHJcbiAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XHJcbiAgICB9O1xyXG4gICAgRmlyZXN0b3JlLnByb3RvdHlwZS50ZXJtaW5hdGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5hcHAuX3JlbW92ZVNlcnZpY2VJbnN0YW5jZSgnZmlyZXN0b3JlJyk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuSU5URVJOQUwuZGVsZXRlKCk7XHJcbiAgICB9O1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEZpcmVzdG9yZS5wcm90b3R5cGUsIFwiX2lzVGVybWluYXRlZFwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZW5zdXJlQ2xpZW50Q29uZmlndXJlZCgpO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZmlyZXN0b3JlQ2xpZW50LmNsaWVudFRlcm1pbmF0ZWQ7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBGaXJlc3RvcmUucHJvdG90eXBlLndhaXRGb3JQZW5kaW5nV3JpdGVzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuZW5zdXJlQ2xpZW50Q29uZmlndXJlZCgpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9maXJlc3RvcmVDbGllbnQud2FpdEZvclBlbmRpbmdXcml0ZXMoKTtcclxuICAgIH07XHJcbiAgICBGaXJlc3RvcmUucHJvdG90eXBlLm9uU25hcHNob3RzSW5TeW5jID0gZnVuY3Rpb24gKGFyZykge1xyXG4gICAgICAgIHRoaXMuZW5zdXJlQ2xpZW50Q29uZmlndXJlZCgpO1xyXG4gICAgICAgIGlmIChpc1BhcnRpYWxPYnNlcnZlcihhcmcpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm9uU25hcHNob3RzSW5TeW5jSW50ZXJuYWwoYXJnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHZhbGlkYXRlQXJnVHlwZSgnRmlyZXN0b3JlLm9uU25hcHNob3RzSW5TeW5jJywgJ2Z1bmN0aW9uJywgMSwgYXJnKTtcclxuICAgICAgICAgICAgdmFyIG9ic2VydmVyID0ge1xyXG4gICAgICAgICAgICAgICAgbmV4dDogYXJnXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm9uU25hcHNob3RzSW5TeW5jSW50ZXJuYWwob2JzZXJ2ZXIpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBGaXJlc3RvcmUucHJvdG90eXBlLm9uU25hcHNob3RzSW5TeW5jSW50ZXJuYWwgPSBmdW5jdGlvbiAob2JzZXJ2ZXIpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhciBlcnJIYW5kbGVyID0gZnVuY3Rpb24gKGVycikge1xyXG4gICAgICAgICAgICB0aHJvdyBmYWlsKCdVbmNhdWdodCBFcnJvciBpbiBvblNuYXBzaG90c0luU3luYycpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdmFyIGFzeW5jT2JzZXJ2ZXIgPSBuZXcgQXN5bmNPYnNlcnZlcih7XHJcbiAgICAgICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGlmIChvYnNlcnZlci5uZXh0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JzZXJ2ZXIubmV4dCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBlcnJvcjogZXJySGFuZGxlclxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuX2ZpcmVzdG9yZUNsaWVudC5hZGRTbmFwc2hvdHNJblN5bmNMaXN0ZW5lcihhc3luY09ic2VydmVyKTtcclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBhc3luY09ic2VydmVyLm11dGUoKTtcclxuICAgICAgICAgICAgX3RoaXMuX2ZpcmVzdG9yZUNsaWVudC5yZW1vdmVTbmFwc2hvdHNJblN5bmNMaXN0ZW5lcihhc3luY09ic2VydmVyKTtcclxuICAgICAgICB9O1xyXG4gICAgfTtcclxuICAgIEZpcmVzdG9yZS5wcm90b3R5cGUuZW5zdXJlQ2xpZW50Q29uZmlndXJlZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoIXRoaXMuX2ZpcmVzdG9yZUNsaWVudCkge1xyXG4gICAgICAgICAgICAvLyBLaWNrIG9mZiBzdGFydGluZyB0aGUgY2xpZW50IGJ1dCBkb24ndCBhY3R1YWxseSB3YWl0IGZvciBpdC5cclxuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1mbG9hdGluZy1wcm9taXNlc1xyXG4gICAgICAgICAgICB0aGlzLmNvbmZpZ3VyZUNsaWVudChuZXcgTWVtb3J5UGVyc2lzdGVuY2VTZXR0aW5ncygpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ZpcmVzdG9yZUNsaWVudDtcclxuICAgIH07XHJcbiAgICBGaXJlc3RvcmUucHJvdG90eXBlLm1ha2VEYXRhYmFzZUluZm8gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBEYXRhYmFzZUluZm8odGhpcy5fZGF0YWJhc2VJZCwgdGhpcy5fcGVyc2lzdGVuY2VLZXksIHRoaXMuX3NldHRpbmdzLmhvc3QsIHRoaXMuX3NldHRpbmdzLnNzbCwgdGhpcy5fc2V0dGluZ3MuZm9yY2VMb25nUG9sbGluZyk7XHJcbiAgICB9O1xyXG4gICAgRmlyZXN0b3JlLnByb3RvdHlwZS5jb25maWd1cmVDbGllbnQgPSBmdW5jdGlvbiAocGVyc2lzdGVuY2VTZXR0aW5ncykge1xyXG4gICAgICAgIGFzc2VydCghIXRoaXMuX3NldHRpbmdzLmhvc3QsICdGaXJlc3RvcmVTZXR0aW5ncy5ob3N0IGlzIG5vdCBzZXQnKTtcclxuICAgICAgICBhc3NlcnQoIXRoaXMuX2ZpcmVzdG9yZUNsaWVudCwgJ2NvbmZpZ3VyZUNsaWVudCgpIGNhbGxlZCBtdWx0aXBsZSB0aW1lcycpO1xyXG4gICAgICAgIHZhciBkYXRhYmFzZUluZm8gPSB0aGlzLm1ha2VEYXRhYmFzZUluZm8oKTtcclxuICAgICAgICB0aGlzLl9maXJlc3RvcmVDbGllbnQgPSBuZXcgRmlyZXN0b3JlQ2xpZW50KFBsYXRmb3JtU3VwcG9ydC5nZXRQbGF0Zm9ybSgpLCBkYXRhYmFzZUluZm8sIHRoaXMuX2NyZWRlbnRpYWxzLCB0aGlzLl9xdWV1ZSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ZpcmVzdG9yZUNsaWVudC5zdGFydChwZXJzaXN0ZW5jZVNldHRpbmdzKTtcclxuICAgIH07XHJcbiAgICBGaXJlc3RvcmUucHJvdG90eXBlLmNyZWF0ZURhdGFDb252ZXJ0ZXIgPSBmdW5jdGlvbiAoZGF0YWJhc2VJZCkge1xyXG4gICAgICAgIHZhciBwcmVDb252ZXJ0ZXIgPSBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICAgICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgRG9jdW1lbnRSZWZlcmVuY2UpIHtcclxuICAgICAgICAgICAgICAgIHZhciB0aGlzRGIgPSBkYXRhYmFzZUlkO1xyXG4gICAgICAgICAgICAgICAgdmFyIG90aGVyRGIgPSB2YWx1ZS5maXJlc3RvcmUuX2RhdGFiYXNlSWQ7XHJcbiAgICAgICAgICAgICAgICBpZiAoIW90aGVyRGIuaXNFcXVhbCh0aGlzRGIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuSU5WQUxJRF9BUkdVTUVOVCwgJ0RvY3VtZW50IHJlZmVyZW5jZSBpcyBmb3IgZGF0YWJhc2UgJyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIChvdGhlckRiLnByb2plY3RJZCArIFwiL1wiICsgb3RoZXJEYi5kYXRhYmFzZSArIFwiIGJ1dCBzaG91bGQgYmUgXCIpICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgKFwiZm9yIGRhdGFiYXNlIFwiICsgdGhpc0RiLnByb2plY3RJZCArIFwiL1wiICsgdGhpc0RiLmRhdGFiYXNlKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IERvY3VtZW50S2V5UmVmZXJlbmNlKGRhdGFiYXNlSWQsIHZhbHVlLl9rZXkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gbmV3IFVzZXJEYXRhQ29udmVydGVyKHByZUNvbnZlcnRlcik7XHJcbiAgICB9O1xyXG4gICAgRmlyZXN0b3JlLmRhdGFiYXNlSWRGcm9tQXBwID0gZnVuY3Rpb24gKGFwcCkge1xyXG4gICAgICAgIHZhciBvcHRpb25zID0gYXBwLm9wdGlvbnM7XHJcbiAgICAgICAgaWYgKCFjb250YWlucyhvcHRpb25zLCAncHJvamVjdElkJykpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuSU5WQUxJRF9BUkdVTUVOVCwgJ1wicHJvamVjdElkXCIgbm90IHByb3ZpZGVkIGluIGZpcmViYXNlLmluaXRpYWxpemVBcHAuJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBwcm9qZWN0SWQgPSBvcHRpb25zWydwcm9qZWN0SWQnXTtcclxuICAgICAgICBpZiAoIXByb2plY3RJZCB8fCB0eXBlb2YgcHJvamVjdElkICE9PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5JTlZBTElEX0FSR1VNRU5ULCAncHJvamVjdElkIG11c3QgYmUgYSBzdHJpbmcgaW4gRmlyZWJhc2VBcHAub3B0aW9ucycpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbmV3IERhdGFiYXNlSWQocHJvamVjdElkKTtcclxuICAgIH07XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoRmlyZXN0b3JlLnByb3RvdHlwZSwgXCJhcHBcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuX2ZpcmViYXNlQXBwKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5GQUlMRURfUFJFQ09ORElUSU9OLCBcIkZpcmVzdG9yZSB3YXMgbm90IGluaXRpYWxpemVkIHVzaW5nIHRoZSBGaXJlYmFzZSBTREsuICdhcHAnIGlzIFwiICtcclxuICAgICAgICAgICAgICAgICAgICAnbm90IGF2YWlsYWJsZScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9maXJlYmFzZUFwcDtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIEZpcmVzdG9yZS5wcm90b3R5cGUuY29sbGVjdGlvbiA9IGZ1bmN0aW9uIChwYXRoU3RyaW5nKSB7XHJcbiAgICAgICAgdmFsaWRhdGVFeGFjdE51bWJlck9mQXJncygnRmlyZXN0b3JlLmNvbGxlY3Rpb24nLCBhcmd1bWVudHMsIDEpO1xyXG4gICAgICAgIHZhbGlkYXRlQXJnVHlwZSgnRmlyZXN0b3JlLmNvbGxlY3Rpb24nLCAnbm9uLWVtcHR5IHN0cmluZycsIDEsIHBhdGhTdHJpbmcpO1xyXG4gICAgICAgIHRoaXMuZW5zdXJlQ2xpZW50Q29uZmlndXJlZCgpO1xyXG4gICAgICAgIHJldHVybiBuZXcgQ29sbGVjdGlvblJlZmVyZW5jZShSZXNvdXJjZVBhdGguZnJvbVN0cmluZyhwYXRoU3RyaW5nKSwgdGhpcyk7XHJcbiAgICB9O1xyXG4gICAgRmlyZXN0b3JlLnByb3RvdHlwZS5kb2MgPSBmdW5jdGlvbiAocGF0aFN0cmluZykge1xyXG4gICAgICAgIHZhbGlkYXRlRXhhY3ROdW1iZXJPZkFyZ3MoJ0ZpcmVzdG9yZS5kb2MnLCBhcmd1bWVudHMsIDEpO1xyXG4gICAgICAgIHZhbGlkYXRlQXJnVHlwZSgnRmlyZXN0b3JlLmRvYycsICdub24tZW1wdHkgc3RyaW5nJywgMSwgcGF0aFN0cmluZyk7XHJcbiAgICAgICAgdGhpcy5lbnN1cmVDbGllbnRDb25maWd1cmVkKCk7XHJcbiAgICAgICAgcmV0dXJuIERvY3VtZW50UmVmZXJlbmNlLmZvclBhdGgoUmVzb3VyY2VQYXRoLmZyb21TdHJpbmcocGF0aFN0cmluZyksIHRoaXMpO1xyXG4gICAgfTtcclxuICAgIEZpcmVzdG9yZS5wcm90b3R5cGUuY29sbGVjdGlvbkdyb3VwID0gZnVuY3Rpb24gKGNvbGxlY3Rpb25JZCkge1xyXG4gICAgICAgIHZhbGlkYXRlRXhhY3ROdW1iZXJPZkFyZ3MoJ0ZpcmVzdG9yZS5jb2xsZWN0aW9uR3JvdXAnLCBhcmd1bWVudHMsIDEpO1xyXG4gICAgICAgIHZhbGlkYXRlQXJnVHlwZSgnRmlyZXN0b3JlLmNvbGxlY3Rpb25Hcm91cCcsICdub24tZW1wdHkgc3RyaW5nJywgMSwgY29sbGVjdGlvbklkKTtcclxuICAgICAgICBpZiAoY29sbGVjdGlvbklkLmluZGV4T2YoJy8nKSA+PSAwKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLklOVkFMSURfQVJHVU1FTlQsIFwiSW52YWxpZCBjb2xsZWN0aW9uIElEICdcIiArIGNvbGxlY3Rpb25JZCArIFwiJyBwYXNzZWQgdG8gZnVuY3Rpb24gXCIgK1xyXG4gICAgICAgICAgICAgICAgXCJGaXJlc3RvcmUuY29sbGVjdGlvbkdyb3VwKCkuIENvbGxlY3Rpb24gSURzIG11c3Qgbm90IGNvbnRhaW4gJy8nLlwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5lbnN1cmVDbGllbnRDb25maWd1cmVkKCk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBRdWVyeSQxKG5ldyBRdWVyeShSZXNvdXJjZVBhdGguRU1QVFlfUEFUSCwgY29sbGVjdGlvbklkKSwgdGhpcyk7XHJcbiAgICB9O1xyXG4gICAgRmlyZXN0b3JlLnByb3RvdHlwZS5ydW5UcmFuc2FjdGlvbiA9IGZ1bmN0aW9uICh1cGRhdGVGdW5jdGlvbikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFsaWRhdGVFeGFjdE51bWJlck9mQXJncygnRmlyZXN0b3JlLnJ1blRyYW5zYWN0aW9uJywgYXJndW1lbnRzLCAxKTtcclxuICAgICAgICB2YWxpZGF0ZUFyZ1R5cGUoJ0ZpcmVzdG9yZS5ydW5UcmFuc2FjdGlvbicsICdmdW5jdGlvbicsIDEsIHVwZGF0ZUZ1bmN0aW9uKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5lbnN1cmVDbGllbnRDb25maWd1cmVkKCkudHJhbnNhY3Rpb24oZnVuY3Rpb24gKHRyYW5zYWN0aW9uKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB1cGRhdGVGdW5jdGlvbihuZXcgVHJhbnNhY3Rpb24kMShfdGhpcywgdHJhbnNhY3Rpb24pKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBGaXJlc3RvcmUucHJvdG90eXBlLmJhdGNoID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuZW5zdXJlQ2xpZW50Q29uZmlndXJlZCgpO1xyXG4gICAgICAgIHJldHVybiBuZXcgV3JpdGVCYXRjaCh0aGlzKTtcclxuICAgIH07XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoRmlyZXN0b3JlLCBcImxvZ0xldmVsXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgc3dpdGNoIChnZXRMb2dMZXZlbCgpKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIExvZ0xldmVsLkRFQlVHOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAnZGVidWcnO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBMb2dMZXZlbC5FUlJPUjpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ2Vycm9yJztcclxuICAgICAgICAgICAgICAgIGNhc2UgTG9nTGV2ZWwuU0lMRU5UOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAnc2lsZW50JztcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhaWwoJ1Vua25vd24gbG9nIGxldmVsOiAnICsgZ2V0TG9nTGV2ZWwoKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIEZpcmVzdG9yZS5zZXRMb2dMZXZlbCA9IGZ1bmN0aW9uIChsZXZlbCkge1xyXG4gICAgICAgIHZhbGlkYXRlRXhhY3ROdW1iZXJPZkFyZ3MoJ0ZpcmVzdG9yZS5zZXRMb2dMZXZlbCcsIGFyZ3VtZW50cywgMSk7XHJcbiAgICAgICAgdmFsaWRhdGVBcmdUeXBlKCdGaXJlc3RvcmUuc2V0TG9nTGV2ZWwnLCAnbm9uLWVtcHR5IHN0cmluZycsIDEsIGxldmVsKTtcclxuICAgICAgICBzd2l0Y2ggKGxldmVsKSB7XHJcbiAgICAgICAgICAgIGNhc2UgJ2RlYnVnJzpcclxuICAgICAgICAgICAgICAgIHNldExvZ0xldmVsKExvZ0xldmVsLkRFQlVHKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdlcnJvcic6XHJcbiAgICAgICAgICAgICAgICBzZXRMb2dMZXZlbChMb2dMZXZlbC5FUlJPUik7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnc2lsZW50JzpcclxuICAgICAgICAgICAgICAgIHNldExvZ0xldmVsKExvZ0xldmVsLlNJTEVOVCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLklOVkFMSURfQVJHVU1FTlQsICdJbnZhbGlkIGxvZyBsZXZlbDogJyArIGxldmVsKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLy8gTm90ZTogdGhpcyBpcyBub3QgYSBwcm9wZXJ0eSBiZWNhdXNlIHRoZSBtaW5pZmllciBjYW4ndCB3b3JrIGNvcnJlY3RseSB3aXRoXHJcbiAgICAvLyB0aGUgd2F5IFR5cGVTY3JpcHQgY29tcGlsZXIgb3V0cHV0cyBwcm9wZXJ0aWVzLlxyXG4gICAgRmlyZXN0b3JlLnByb3RvdHlwZS5fYXJlVGltZXN0YW1wc0luU25hcHNob3RzRW5hYmxlZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fc2V0dGluZ3MudGltZXN0YW1wc0luU25hcHNob3RzO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBGaXJlc3RvcmU7XHJcbn0oKSk7XHJcbi8qKlxyXG4gKiBBIHJlZmVyZW5jZSB0byBhIHRyYW5zYWN0aW9uLlxyXG4gKi9cclxudmFyIFRyYW5zYWN0aW9uJDEgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBUcmFuc2FjdGlvbihfZmlyZXN0b3JlLCBfdHJhbnNhY3Rpb24pIHtcclxuICAgICAgICB0aGlzLl9maXJlc3RvcmUgPSBfZmlyZXN0b3JlO1xyXG4gICAgICAgIHRoaXMuX3RyYW5zYWN0aW9uID0gX3RyYW5zYWN0aW9uO1xyXG4gICAgfVxyXG4gICAgVHJhbnNhY3Rpb24ucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uIChkb2N1bWVudFJlZikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFsaWRhdGVFeGFjdE51bWJlck9mQXJncygnVHJhbnNhY3Rpb24uZ2V0JywgYXJndW1lbnRzLCAxKTtcclxuICAgICAgICB2YXIgcmVmID0gdmFsaWRhdGVSZWZlcmVuY2UoJ1RyYW5zYWN0aW9uLmdldCcsIGRvY3VtZW50UmVmLCB0aGlzLl9maXJlc3RvcmUpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl90cmFuc2FjdGlvblxyXG4gICAgICAgICAgICAubG9va3VwKFtyZWYuX2tleV0pXHJcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChkb2NzKSB7XHJcbiAgICAgICAgICAgIGlmICghZG9jcyB8fCBkb2NzLmxlbmd0aCAhPT0gMSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhaWwoJ01pc21hdGNoIGluIGRvY3MgcmV0dXJuZWQgZnJvbSBkb2N1bWVudCBsb29rdXAuJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIGRvYyA9IGRvY3NbMF07XHJcbiAgICAgICAgICAgIGlmIChkb2MgaW5zdGFuY2VvZiBOb0RvY3VtZW50KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IERvY3VtZW50U25hcHNob3QoX3RoaXMuX2ZpcmVzdG9yZSwgcmVmLl9rZXksIG51bGwsIFxyXG4gICAgICAgICAgICAgICAgLyogZnJvbUNhY2hlPSAqLyBmYWxzZSwgXHJcbiAgICAgICAgICAgICAgICAvKiBoYXNQZW5kaW5nV3JpdGVzPSAqLyBmYWxzZSwgcmVmLl9jb252ZXJ0ZXIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGRvYyBpbnN0YW5jZW9mIERvY3VtZW50KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IERvY3VtZW50U25hcHNob3QoX3RoaXMuX2ZpcmVzdG9yZSwgcmVmLl9rZXksIGRvYywgXHJcbiAgICAgICAgICAgICAgICAvKiBmcm9tQ2FjaGU9ICovIGZhbHNlLCBcclxuICAgICAgICAgICAgICAgIC8qIGhhc1BlbmRpbmdXcml0ZXM9ICovIGZhbHNlLCByZWYuX2NvbnZlcnRlcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBmYWlsKFwiQmF0Y2hHZXREb2N1bWVudHNSZXF1ZXN0IHJldHVybmVkIHVuZXhwZWN0ZWQgZG9jdW1lbnQgdHlwZTogXCIgKyBkb2MuY29uc3RydWN0b3IubmFtZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBUcmFuc2FjdGlvbi5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24gKGRvY3VtZW50UmVmLCB2YWx1ZSwgb3B0aW9ucykge1xyXG4gICAgICAgIHZhbGlkYXRlQmV0d2Vlbk51bWJlck9mQXJncygnVHJhbnNhY3Rpb24uc2V0JywgYXJndW1lbnRzLCAyLCAzKTtcclxuICAgICAgICB2YXIgcmVmID0gdmFsaWRhdGVSZWZlcmVuY2UoJ1RyYW5zYWN0aW9uLnNldCcsIGRvY3VtZW50UmVmLCB0aGlzLl9maXJlc3RvcmUpO1xyXG4gICAgICAgIG9wdGlvbnMgPSB2YWxpZGF0ZVNldE9wdGlvbnMoJ1RyYW5zYWN0aW9uLnNldCcsIG9wdGlvbnMpO1xyXG4gICAgICAgIHZhciBfYSA9IGFwcGx5RmlyZXN0b3JlRGF0YUNvbnZlcnRlcihyZWYuX2NvbnZlcnRlciwgdmFsdWUsICdUcmFuc2FjdGlvbi5zZXQnKSwgY29udmVydGVkVmFsdWUgPSBfYVswXSwgZnVuY3Rpb25OYW1lID0gX2FbMV07XHJcbiAgICAgICAgdmFyIHBhcnNlZCA9IG9wdGlvbnMubWVyZ2UgfHwgb3B0aW9ucy5tZXJnZUZpZWxkc1xyXG4gICAgICAgICAgICA/IHRoaXMuX2ZpcmVzdG9yZS5fZGF0YUNvbnZlcnRlci5wYXJzZU1lcmdlRGF0YShmdW5jdGlvbk5hbWUsIGNvbnZlcnRlZFZhbHVlLCBvcHRpb25zLm1lcmdlRmllbGRzKVxyXG4gICAgICAgICAgICA6IHRoaXMuX2ZpcmVzdG9yZS5fZGF0YUNvbnZlcnRlci5wYXJzZVNldERhdGEoZnVuY3Rpb25OYW1lLCBjb252ZXJ0ZWRWYWx1ZSk7XHJcbiAgICAgICAgdGhpcy5fdHJhbnNhY3Rpb24uc2V0KHJlZi5fa2V5LCBwYXJzZWQpO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfTtcclxuICAgIFRyYW5zYWN0aW9uLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiAoZG9jdW1lbnRSZWYsIGZpZWxkT3JVcGRhdGVEYXRhLCB2YWx1ZSkge1xyXG4gICAgICAgIHZhciBtb3JlRmllbGRzQW5kVmFsdWVzID0gW107XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAzOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgbW9yZUZpZWxkc0FuZFZhbHVlc1tfaSAtIDNdID0gYXJndW1lbnRzW19pXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIHJlZjtcclxuICAgICAgICB2YXIgcGFyc2VkO1xyXG4gICAgICAgIGlmICh0eXBlb2YgZmllbGRPclVwZGF0ZURhdGEgPT09ICdzdHJpbmcnIHx8XHJcbiAgICAgICAgICAgIGZpZWxkT3JVcGRhdGVEYXRhIGluc3RhbmNlb2YgRmllbGRQYXRoJDEpIHtcclxuICAgICAgICAgICAgdmFsaWRhdGVBdExlYXN0TnVtYmVyT2ZBcmdzKCdUcmFuc2FjdGlvbi51cGRhdGUnLCBhcmd1bWVudHMsIDMpO1xyXG4gICAgICAgICAgICByZWYgPSB2YWxpZGF0ZVJlZmVyZW5jZSgnVHJhbnNhY3Rpb24udXBkYXRlJywgZG9jdW1lbnRSZWYsIHRoaXMuX2ZpcmVzdG9yZSk7XHJcbiAgICAgICAgICAgIHBhcnNlZCA9IHRoaXMuX2ZpcmVzdG9yZS5fZGF0YUNvbnZlcnRlci5wYXJzZVVwZGF0ZVZhcmFyZ3MoJ1RyYW5zYWN0aW9uLnVwZGF0ZScsIGZpZWxkT3JVcGRhdGVEYXRhLCB2YWx1ZSwgbW9yZUZpZWxkc0FuZFZhbHVlcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB2YWxpZGF0ZUV4YWN0TnVtYmVyT2ZBcmdzKCdUcmFuc2FjdGlvbi51cGRhdGUnLCBhcmd1bWVudHMsIDIpO1xyXG4gICAgICAgICAgICByZWYgPSB2YWxpZGF0ZVJlZmVyZW5jZSgnVHJhbnNhY3Rpb24udXBkYXRlJywgZG9jdW1lbnRSZWYsIHRoaXMuX2ZpcmVzdG9yZSk7XHJcbiAgICAgICAgICAgIHBhcnNlZCA9IHRoaXMuX2ZpcmVzdG9yZS5fZGF0YUNvbnZlcnRlci5wYXJzZVVwZGF0ZURhdGEoJ1RyYW5zYWN0aW9uLnVwZGF0ZScsIGZpZWxkT3JVcGRhdGVEYXRhKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fdHJhbnNhY3Rpb24udXBkYXRlKHJlZi5fa2V5LCBwYXJzZWQpO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfTtcclxuICAgIFRyYW5zYWN0aW9uLnByb3RvdHlwZS5kZWxldGUgPSBmdW5jdGlvbiAoZG9jdW1lbnRSZWYpIHtcclxuICAgICAgICB2YWxpZGF0ZUV4YWN0TnVtYmVyT2ZBcmdzKCdUcmFuc2FjdGlvbi5kZWxldGUnLCBhcmd1bWVudHMsIDEpO1xyXG4gICAgICAgIHZhciByZWYgPSB2YWxpZGF0ZVJlZmVyZW5jZSgnVHJhbnNhY3Rpb24uZGVsZXRlJywgZG9jdW1lbnRSZWYsIHRoaXMuX2ZpcmVzdG9yZSk7XHJcbiAgICAgICAgdGhpcy5fdHJhbnNhY3Rpb24uZGVsZXRlKHJlZi5fa2V5KTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH07XHJcbiAgICByZXR1cm4gVHJhbnNhY3Rpb247XHJcbn0oKSk7XHJcbnZhciBXcml0ZUJhdGNoID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gV3JpdGVCYXRjaChfZmlyZXN0b3JlKSB7XHJcbiAgICAgICAgdGhpcy5fZmlyZXN0b3JlID0gX2ZpcmVzdG9yZTtcclxuICAgICAgICB0aGlzLl9tdXRhdGlvbnMgPSBbXTtcclxuICAgICAgICB0aGlzLl9jb21taXR0ZWQgPSBmYWxzZTtcclxuICAgIH1cclxuICAgIFdyaXRlQmF0Y2gucHJvdG90eXBlLnNldCA9IGZ1bmN0aW9uIChkb2N1bWVudFJlZiwgdmFsdWUsIG9wdGlvbnMpIHtcclxuICAgICAgICB2YWxpZGF0ZUJldHdlZW5OdW1iZXJPZkFyZ3MoJ1dyaXRlQmF0Y2guc2V0JywgYXJndW1lbnRzLCAyLCAzKTtcclxuICAgICAgICB0aGlzLnZlcmlmeU5vdENvbW1pdHRlZCgpO1xyXG4gICAgICAgIHZhciByZWYgPSB2YWxpZGF0ZVJlZmVyZW5jZSgnV3JpdGVCYXRjaC5zZXQnLCBkb2N1bWVudFJlZiwgdGhpcy5fZmlyZXN0b3JlKTtcclxuICAgICAgICBvcHRpb25zID0gdmFsaWRhdGVTZXRPcHRpb25zKCdXcml0ZUJhdGNoLnNldCcsIG9wdGlvbnMpO1xyXG4gICAgICAgIHZhciBfYSA9IGFwcGx5RmlyZXN0b3JlRGF0YUNvbnZlcnRlcihyZWYuX2NvbnZlcnRlciwgdmFsdWUsICdXcml0ZUJhdGNoLnNldCcpLCBjb252ZXJ0ZWRWYWx1ZSA9IF9hWzBdLCBmdW5jdGlvbk5hbWUgPSBfYVsxXTtcclxuICAgICAgICB2YXIgcGFyc2VkID0gb3B0aW9ucy5tZXJnZSB8fCBvcHRpb25zLm1lcmdlRmllbGRzXHJcbiAgICAgICAgICAgID8gdGhpcy5fZmlyZXN0b3JlLl9kYXRhQ29udmVydGVyLnBhcnNlTWVyZ2VEYXRhKGZ1bmN0aW9uTmFtZSwgY29udmVydGVkVmFsdWUsIG9wdGlvbnMubWVyZ2VGaWVsZHMpXHJcbiAgICAgICAgICAgIDogdGhpcy5fZmlyZXN0b3JlLl9kYXRhQ29udmVydGVyLnBhcnNlU2V0RGF0YShmdW5jdGlvbk5hbWUsIGNvbnZlcnRlZFZhbHVlKTtcclxuICAgICAgICB0aGlzLl9tdXRhdGlvbnMgPSB0aGlzLl9tdXRhdGlvbnMuY29uY2F0KHBhcnNlZC50b011dGF0aW9ucyhyZWYuX2tleSwgUHJlY29uZGl0aW9uLk5PTkUpKTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH07XHJcbiAgICBXcml0ZUJhdGNoLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiAoZG9jdW1lbnRSZWYsIGZpZWxkT3JVcGRhdGVEYXRhLCB2YWx1ZSkge1xyXG4gICAgICAgIHZhciBtb3JlRmllbGRzQW5kVmFsdWVzID0gW107XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAzOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgbW9yZUZpZWxkc0FuZFZhbHVlc1tfaSAtIDNdID0gYXJndW1lbnRzW19pXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy52ZXJpZnlOb3RDb21taXR0ZWQoKTtcclxuICAgICAgICB2YXIgcmVmO1xyXG4gICAgICAgIHZhciBwYXJzZWQ7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBmaWVsZE9yVXBkYXRlRGF0YSA9PT0gJ3N0cmluZycgfHxcclxuICAgICAgICAgICAgZmllbGRPclVwZGF0ZURhdGEgaW5zdGFuY2VvZiBGaWVsZFBhdGgkMSkge1xyXG4gICAgICAgICAgICB2YWxpZGF0ZUF0TGVhc3ROdW1iZXJPZkFyZ3MoJ1dyaXRlQmF0Y2gudXBkYXRlJywgYXJndW1lbnRzLCAzKTtcclxuICAgICAgICAgICAgcmVmID0gdmFsaWRhdGVSZWZlcmVuY2UoJ1dyaXRlQmF0Y2gudXBkYXRlJywgZG9jdW1lbnRSZWYsIHRoaXMuX2ZpcmVzdG9yZSk7XHJcbiAgICAgICAgICAgIHBhcnNlZCA9IHRoaXMuX2ZpcmVzdG9yZS5fZGF0YUNvbnZlcnRlci5wYXJzZVVwZGF0ZVZhcmFyZ3MoJ1dyaXRlQmF0Y2gudXBkYXRlJywgZmllbGRPclVwZGF0ZURhdGEsIHZhbHVlLCBtb3JlRmllbGRzQW5kVmFsdWVzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHZhbGlkYXRlRXhhY3ROdW1iZXJPZkFyZ3MoJ1dyaXRlQmF0Y2gudXBkYXRlJywgYXJndW1lbnRzLCAyKTtcclxuICAgICAgICAgICAgcmVmID0gdmFsaWRhdGVSZWZlcmVuY2UoJ1dyaXRlQmF0Y2gudXBkYXRlJywgZG9jdW1lbnRSZWYsIHRoaXMuX2ZpcmVzdG9yZSk7XHJcbiAgICAgICAgICAgIHBhcnNlZCA9IHRoaXMuX2ZpcmVzdG9yZS5fZGF0YUNvbnZlcnRlci5wYXJzZVVwZGF0ZURhdGEoJ1dyaXRlQmF0Y2gudXBkYXRlJywgZmllbGRPclVwZGF0ZURhdGEpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9tdXRhdGlvbnMgPSB0aGlzLl9tdXRhdGlvbnMuY29uY2F0KHBhcnNlZC50b011dGF0aW9ucyhyZWYuX2tleSwgUHJlY29uZGl0aW9uLmV4aXN0cyh0cnVlKSkpO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfTtcclxuICAgIFdyaXRlQmF0Y2gucHJvdG90eXBlLmRlbGV0ZSA9IGZ1bmN0aW9uIChkb2N1bWVudFJlZikge1xyXG4gICAgICAgIHZhbGlkYXRlRXhhY3ROdW1iZXJPZkFyZ3MoJ1dyaXRlQmF0Y2guZGVsZXRlJywgYXJndW1lbnRzLCAxKTtcclxuICAgICAgICB0aGlzLnZlcmlmeU5vdENvbW1pdHRlZCgpO1xyXG4gICAgICAgIHZhciByZWYgPSB2YWxpZGF0ZVJlZmVyZW5jZSgnV3JpdGVCYXRjaC5kZWxldGUnLCBkb2N1bWVudFJlZiwgdGhpcy5fZmlyZXN0b3JlKTtcclxuICAgICAgICB0aGlzLl9tdXRhdGlvbnMgPSB0aGlzLl9tdXRhdGlvbnMuY29uY2F0KG5ldyBEZWxldGVNdXRhdGlvbihyZWYuX2tleSwgUHJlY29uZGl0aW9uLk5PTkUpKTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH07XHJcbiAgICBXcml0ZUJhdGNoLnByb3RvdHlwZS5jb21taXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRzbGliLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHNsaWIuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnZlcmlmeU5vdENvbW1pdHRlZCgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fY29tbWl0dGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9tdXRhdGlvbnMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0aGlzLl9maXJlc3RvcmUuZW5zdXJlQ2xpZW50Q29uZmlndXJlZCgpLndyaXRlKHRoaXMuX211dGF0aW9ucyldO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBXcml0ZUJhdGNoLnByb3RvdHlwZS52ZXJpZnlOb3RDb21taXR0ZWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2NvbW1pdHRlZCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5GQUlMRURfUFJFQ09ORElUSU9OLCAnQSB3cml0ZSBiYXRjaCBjYW4gbm8gbG9uZ2VyIGJlIHVzZWQgYWZ0ZXIgY29tbWl0KCkgJyArXHJcbiAgICAgICAgICAgICAgICAnaGFzIGJlZW4gY2FsbGVkLicpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICByZXR1cm4gV3JpdGVCYXRjaDtcclxufSgpKTtcclxuLyoqXHJcbiAqIEEgcmVmZXJlbmNlIHRvIGEgcGFydGljdWxhciBkb2N1bWVudCBpbiBhIGNvbGxlY3Rpb24gaW4gdGhlIGRhdGFiYXNlLlxyXG4gKi9cclxudmFyIERvY3VtZW50UmVmZXJlbmNlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gRG9jdW1lbnRSZWZlcmVuY2UoX2tleSwgZmlyZXN0b3JlLCBfY29udmVydGVyKSB7XHJcbiAgICAgICAgdGhpcy5fa2V5ID0gX2tleTtcclxuICAgICAgICB0aGlzLmZpcmVzdG9yZSA9IGZpcmVzdG9yZTtcclxuICAgICAgICB0aGlzLl9jb252ZXJ0ZXIgPSBfY29udmVydGVyO1xyXG4gICAgICAgIHRoaXMuX2ZpcmVzdG9yZUNsaWVudCA9IHRoaXMuZmlyZXN0b3JlLmVuc3VyZUNsaWVudENvbmZpZ3VyZWQoKTtcclxuICAgIH1cclxuICAgIERvY3VtZW50UmVmZXJlbmNlLmZvclBhdGggPSBmdW5jdGlvbiAocGF0aCwgZmlyZXN0b3JlLCBjb252ZXJ0ZXIpIHtcclxuICAgICAgICBpZiAocGF0aC5sZW5ndGggJSAyICE9PSAwKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLklOVkFMSURfQVJHVU1FTlQsICdJbnZhbGlkIGRvY3VtZW50IHJlZmVyZW5jZS4gRG9jdW1lbnQgJyArXHJcbiAgICAgICAgICAgICAgICAncmVmZXJlbmNlcyBtdXN0IGhhdmUgYW4gZXZlbiBudW1iZXIgb2Ygc2VnbWVudHMsIGJ1dCAnICtcclxuICAgICAgICAgICAgICAgIChwYXRoLmNhbm9uaWNhbFN0cmluZygpICsgXCIgaGFzIFwiICsgcGF0aC5sZW5ndGgpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG5ldyBEb2N1bWVudFJlZmVyZW5jZShuZXcgRG9jdW1lbnRLZXkocGF0aCksIGZpcmVzdG9yZSwgY29udmVydGVyKTtcclxuICAgIH07XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoRG9jdW1lbnRSZWZlcmVuY2UucHJvdG90eXBlLCBcImlkXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2tleS5wYXRoLmxhc3RTZWdtZW50KCk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoRG9jdW1lbnRSZWZlcmVuY2UucHJvdG90eXBlLCBcInBhcmVudFwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgQ29sbGVjdGlvblJlZmVyZW5jZSh0aGlzLl9rZXkucGF0aC5wb3BMYXN0KCksIHRoaXMuZmlyZXN0b3JlLCB0aGlzLl9jb252ZXJ0ZXIpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KERvY3VtZW50UmVmZXJlbmNlLnByb3RvdHlwZSwgXCJwYXRoXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2tleS5wYXRoLmNhbm9uaWNhbFN0cmluZygpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgRG9jdW1lbnRSZWZlcmVuY2UucHJvdG90eXBlLmNvbGxlY3Rpb24gPSBmdW5jdGlvbiAocGF0aFN0cmluZykge1xyXG4gICAgICAgIHZhbGlkYXRlRXhhY3ROdW1iZXJPZkFyZ3MoJ0RvY3VtZW50UmVmZXJlbmNlLmNvbGxlY3Rpb24nLCBhcmd1bWVudHMsIDEpO1xyXG4gICAgICAgIHZhbGlkYXRlQXJnVHlwZSgnRG9jdW1lbnRSZWZlcmVuY2UuY29sbGVjdGlvbicsICdub24tZW1wdHkgc3RyaW5nJywgMSwgcGF0aFN0cmluZyk7XHJcbiAgICAgICAgaWYgKCFwYXRoU3RyaW5nKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLklOVkFMSURfQVJHVU1FTlQsICdNdXN0IHByb3ZpZGUgYSBub24tZW1wdHkgY29sbGVjdGlvbiBuYW1lIHRvIGNvbGxlY3Rpb24oKScpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgcGF0aCA9IFJlc291cmNlUGF0aC5mcm9tU3RyaW5nKHBhdGhTdHJpbmcpO1xyXG4gICAgICAgIHJldHVybiBuZXcgQ29sbGVjdGlvblJlZmVyZW5jZSh0aGlzLl9rZXkucGF0aC5jaGlsZChwYXRoKSwgdGhpcy5maXJlc3RvcmUpO1xyXG4gICAgfTtcclxuICAgIERvY3VtZW50UmVmZXJlbmNlLnByb3RvdHlwZS5pc0VxdWFsID0gZnVuY3Rpb24gKG90aGVyKSB7XHJcbiAgICAgICAgaWYgKCEob3RoZXIgaW5zdGFuY2VvZiBEb2N1bWVudFJlZmVyZW5jZSkpIHtcclxuICAgICAgICAgICAgdGhyb3cgaW52YWxpZENsYXNzRXJyb3IoJ2lzRXF1YWwnLCAnRG9jdW1lbnRSZWZlcmVuY2UnLCAxLCBvdGhlcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiAodGhpcy5maXJlc3RvcmUgPT09IG90aGVyLmZpcmVzdG9yZSAmJlxyXG4gICAgICAgICAgICB0aGlzLl9rZXkuaXNFcXVhbChvdGhlci5fa2V5KSAmJlxyXG4gICAgICAgICAgICB0aGlzLl9jb252ZXJ0ZXIgPT09IG90aGVyLl9jb252ZXJ0ZXIpO1xyXG4gICAgfTtcclxuICAgIERvY3VtZW50UmVmZXJlbmNlLnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAodmFsdWUsIG9wdGlvbnMpIHtcclxuICAgICAgICB2YWxpZGF0ZUJldHdlZW5OdW1iZXJPZkFyZ3MoJ0RvY3VtZW50UmVmZXJlbmNlLnNldCcsIGFyZ3VtZW50cywgMSwgMik7XHJcbiAgICAgICAgb3B0aW9ucyA9IHZhbGlkYXRlU2V0T3B0aW9ucygnRG9jdW1lbnRSZWZlcmVuY2Uuc2V0Jywgb3B0aW9ucyk7XHJcbiAgICAgICAgdmFyIF9hID0gYXBwbHlGaXJlc3RvcmVEYXRhQ29udmVydGVyKHRoaXMuX2NvbnZlcnRlciwgdmFsdWUsICdEb2N1bWVudFJlZmVyZW5jZS5zZXQnKSwgY29udmVydGVkVmFsdWUgPSBfYVswXSwgZnVuY3Rpb25OYW1lID0gX2FbMV07XHJcbiAgICAgICAgdmFyIHBhcnNlZCA9IG9wdGlvbnMubWVyZ2UgfHwgb3B0aW9ucy5tZXJnZUZpZWxkc1xyXG4gICAgICAgICAgICA/IHRoaXMuZmlyZXN0b3JlLl9kYXRhQ29udmVydGVyLnBhcnNlTWVyZ2VEYXRhKGZ1bmN0aW9uTmFtZSwgY29udmVydGVkVmFsdWUsIG9wdGlvbnMubWVyZ2VGaWVsZHMpXHJcbiAgICAgICAgICAgIDogdGhpcy5maXJlc3RvcmUuX2RhdGFDb252ZXJ0ZXIucGFyc2VTZXREYXRhKGZ1bmN0aW9uTmFtZSwgY29udmVydGVkVmFsdWUpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9maXJlc3RvcmVDbGllbnQud3JpdGUocGFyc2VkLnRvTXV0YXRpb25zKHRoaXMuX2tleSwgUHJlY29uZGl0aW9uLk5PTkUpKTtcclxuICAgIH07XHJcbiAgICBEb2N1bWVudFJlZmVyZW5jZS5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKGZpZWxkT3JVcGRhdGVEYXRhLCB2YWx1ZSkge1xyXG4gICAgICAgIHZhciBtb3JlRmllbGRzQW5kVmFsdWVzID0gW107XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAyOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgbW9yZUZpZWxkc0FuZFZhbHVlc1tfaSAtIDJdID0gYXJndW1lbnRzW19pXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIHBhcnNlZDtcclxuICAgICAgICBpZiAodHlwZW9mIGZpZWxkT3JVcGRhdGVEYXRhID09PSAnc3RyaW5nJyB8fFxyXG4gICAgICAgICAgICBmaWVsZE9yVXBkYXRlRGF0YSBpbnN0YW5jZW9mIEZpZWxkUGF0aCQxKSB7XHJcbiAgICAgICAgICAgIHZhbGlkYXRlQXRMZWFzdE51bWJlck9mQXJncygnRG9jdW1lbnRSZWZlcmVuY2UudXBkYXRlJywgYXJndW1lbnRzLCAyKTtcclxuICAgICAgICAgICAgcGFyc2VkID0gdGhpcy5maXJlc3RvcmUuX2RhdGFDb252ZXJ0ZXIucGFyc2VVcGRhdGVWYXJhcmdzKCdEb2N1bWVudFJlZmVyZW5jZS51cGRhdGUnLCBmaWVsZE9yVXBkYXRlRGF0YSwgdmFsdWUsIG1vcmVGaWVsZHNBbmRWYWx1ZXMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdmFsaWRhdGVFeGFjdE51bWJlck9mQXJncygnRG9jdW1lbnRSZWZlcmVuY2UudXBkYXRlJywgYXJndW1lbnRzLCAxKTtcclxuICAgICAgICAgICAgcGFyc2VkID0gdGhpcy5maXJlc3RvcmUuX2RhdGFDb252ZXJ0ZXIucGFyc2VVcGRhdGVEYXRhKCdEb2N1bWVudFJlZmVyZW5jZS51cGRhdGUnLCBmaWVsZE9yVXBkYXRlRGF0YSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLl9maXJlc3RvcmVDbGllbnQud3JpdGUocGFyc2VkLnRvTXV0YXRpb25zKHRoaXMuX2tleSwgUHJlY29uZGl0aW9uLmV4aXN0cyh0cnVlKSkpO1xyXG4gICAgfTtcclxuICAgIERvY3VtZW50UmVmZXJlbmNlLnByb3RvdHlwZS5kZWxldGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFsaWRhdGVFeGFjdE51bWJlck9mQXJncygnRG9jdW1lbnRSZWZlcmVuY2UuZGVsZXRlJywgYXJndW1lbnRzLCAwKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZmlyZXN0b3JlQ2xpZW50LndyaXRlKFtcclxuICAgICAgICAgICAgbmV3IERlbGV0ZU11dGF0aW9uKHRoaXMuX2tleSwgUHJlY29uZGl0aW9uLk5PTkUpXHJcbiAgICAgICAgXSk7XHJcbiAgICB9O1xyXG4gICAgRG9jdW1lbnRSZWZlcmVuY2UucHJvdG90eXBlLm9uU25hcHNob3QgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGFyZ3MgPSBbXTtcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICBhcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhbGlkYXRlQmV0d2Vlbk51bWJlck9mQXJncygnRG9jdW1lbnRSZWZlcmVuY2Uub25TbmFwc2hvdCcsIGFyZ3VtZW50cywgMSwgNCk7XHJcbiAgICAgICAgdmFyIG9wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgIGluY2x1ZGVNZXRhZGF0YUNoYW5nZXM6IGZhbHNlXHJcbiAgICAgICAgfTtcclxuICAgICAgICB2YXIgb2JzZXJ2ZXI7XHJcbiAgICAgICAgdmFyIGN1cnJBcmcgPSAwO1xyXG4gICAgICAgIGlmICh0eXBlb2YgYXJnc1tjdXJyQXJnXSA9PT0gJ29iamVjdCcgJiZcclxuICAgICAgICAgICAgIWlzUGFydGlhbE9ic2VydmVyKGFyZ3NbY3VyckFyZ10pKSB7XHJcbiAgICAgICAgICAgIG9wdGlvbnMgPSBhcmdzW2N1cnJBcmddO1xyXG4gICAgICAgICAgICB2YWxpZGF0ZU9wdGlvbk5hbWVzKCdEb2N1bWVudFJlZmVyZW5jZS5vblNuYXBzaG90Jywgb3B0aW9ucywgW1xyXG4gICAgICAgICAgICAgICAgJ2luY2x1ZGVNZXRhZGF0YUNoYW5nZXMnXHJcbiAgICAgICAgICAgIF0pO1xyXG4gICAgICAgICAgICB2YWxpZGF0ZU5hbWVkT3B0aW9uYWxUeXBlKCdEb2N1bWVudFJlZmVyZW5jZS5vblNuYXBzaG90JywgJ2Jvb2xlYW4nLCAnaW5jbHVkZU1ldGFkYXRhQ2hhbmdlcycsIG9wdGlvbnMuaW5jbHVkZU1ldGFkYXRhQ2hhbmdlcyk7XHJcbiAgICAgICAgICAgIGN1cnJBcmcrKztcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGludGVybmFsT3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgaW5jbHVkZU1ldGFkYXRhQ2hhbmdlczogb3B0aW9ucy5pbmNsdWRlTWV0YWRhdGFDaGFuZ2VzXHJcbiAgICAgICAgfTtcclxuICAgICAgICBpZiAoaXNQYXJ0aWFsT2JzZXJ2ZXIoYXJnc1tjdXJyQXJnXSkpIHtcclxuICAgICAgICAgICAgb2JzZXJ2ZXIgPSBhcmdzW2N1cnJBcmddO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdmFsaWRhdGVBcmdUeXBlKCdEb2N1bWVudFJlZmVyZW5jZS5vblNuYXBzaG90JywgJ2Z1bmN0aW9uJywgY3VyckFyZywgYXJnc1tjdXJyQXJnXSk7XHJcbiAgICAgICAgICAgIHZhbGlkYXRlT3B0aW9uYWxBcmdUeXBlKCdEb2N1bWVudFJlZmVyZW5jZS5vblNuYXBzaG90JywgJ2Z1bmN0aW9uJywgY3VyckFyZyArIDEsIGFyZ3NbY3VyckFyZyArIDFdKTtcclxuICAgICAgICAgICAgdmFsaWRhdGVPcHRpb25hbEFyZ1R5cGUoJ0RvY3VtZW50UmVmZXJlbmNlLm9uU25hcHNob3QnLCAnZnVuY3Rpb24nLCBjdXJyQXJnICsgMiwgYXJnc1tjdXJyQXJnICsgMl0pO1xyXG4gICAgICAgICAgICBvYnNlcnZlciA9IHtcclxuICAgICAgICAgICAgICAgIG5leHQ6IGFyZ3NbY3VyckFyZ10sXHJcbiAgICAgICAgICAgICAgICBlcnJvcjogYXJnc1tjdXJyQXJnICsgMV0sXHJcbiAgICAgICAgICAgICAgICBjb21wbGV0ZTogYXJnc1tjdXJyQXJnICsgMl1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMub25TbmFwc2hvdEludGVybmFsKGludGVybmFsT3B0aW9ucywgb2JzZXJ2ZXIpO1xyXG4gICAgfTtcclxuICAgIERvY3VtZW50UmVmZXJlbmNlLnByb3RvdHlwZS5vblNuYXBzaG90SW50ZXJuYWwgPSBmdW5jdGlvbiAob3B0aW9ucywgb2JzZXJ2ZXIpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhciBlcnJIYW5kbGVyID0gZnVuY3Rpb24gKGVycikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdVbmNhdWdodCBFcnJvciBpbiBvblNuYXBzaG90OicsIGVycik7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBpZiAob2JzZXJ2ZXIuZXJyb3IpIHtcclxuICAgICAgICAgICAgZXJySGFuZGxlciA9IG9ic2VydmVyLmVycm9yLmJpbmQob2JzZXJ2ZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgYXN5bmNPYnNlcnZlciA9IG5ldyBBc3luY09ic2VydmVyKHtcclxuICAgICAgICAgICAgbmV4dDogZnVuY3Rpb24gKHNuYXBzaG90KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAob2JzZXJ2ZXIubmV4dCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGFzc2VydChzbmFwc2hvdC5kb2NzLnNpemUgPD0gMSwgJ1RvbyBtYW55IGRvY3VtZW50cyByZXR1cm5lZCBvbiBhIGRvY3VtZW50IHF1ZXJ5Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRvYyA9IHNuYXBzaG90LmRvY3MuZ2V0KF90aGlzLl9rZXkpO1xyXG4gICAgICAgICAgICAgICAgICAgIG9ic2VydmVyLm5leHQobmV3IERvY3VtZW50U25hcHNob3QoX3RoaXMuZmlyZXN0b3JlLCBfdGhpcy5fa2V5LCBkb2MsIHNuYXBzaG90LmZyb21DYWNoZSwgc25hcHNob3QuaGFzUGVuZGluZ1dyaXRlcywgX3RoaXMuX2NvbnZlcnRlcikpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBlcnJvcjogZXJySGFuZGxlclxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHZhciBpbnRlcm5hbExpc3RlbmVyID0gdGhpcy5fZmlyZXN0b3JlQ2xpZW50Lmxpc3RlbihRdWVyeS5hdFBhdGgodGhpcy5fa2V5LnBhdGgpLCBhc3luY09ic2VydmVyLCBvcHRpb25zKTtcclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBhc3luY09ic2VydmVyLm11dGUoKTtcclxuICAgICAgICAgICAgX3RoaXMuX2ZpcmVzdG9yZUNsaWVudC51bmxpc3RlbihpbnRlcm5hbExpc3RlbmVyKTtcclxuICAgICAgICB9O1xyXG4gICAgfTtcclxuICAgIERvY3VtZW50UmVmZXJlbmNlLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAob3B0aW9ucykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFsaWRhdGVCZXR3ZWVuTnVtYmVyT2ZBcmdzKCdEb2N1bWVudFJlZmVyZW5jZS5nZXQnLCBhcmd1bWVudHMsIDAsIDEpO1xyXG4gICAgICAgIHZhbGlkYXRlR2V0T3B0aW9ucygnRG9jdW1lbnRSZWZlcmVuY2UuZ2V0Jywgb3B0aW9ucyk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5zb3VyY2UgPT09ICdjYWNoZScpIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLmZpcmVzdG9yZVxyXG4gICAgICAgICAgICAgICAgICAgIC5lbnN1cmVDbGllbnRDb25maWd1cmVkKClcclxuICAgICAgICAgICAgICAgICAgICAuZ2V0RG9jdW1lbnRGcm9tTG9jYWxDYWNoZShfdGhpcy5fa2V5KVxyXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChkb2MpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKG5ldyBEb2N1bWVudFNuYXBzaG90KF90aGlzLmZpcmVzdG9yZSwgX3RoaXMuX2tleSwgZG9jLCBcclxuICAgICAgICAgICAgICAgICAgICAvKmZyb21DYWNoZT0qLyB0cnVlLCBkb2MgaW5zdGFuY2VvZiBEb2N1bWVudCA/IGRvYy5oYXNMb2NhbE11dGF0aW9ucyA6IGZhbHNlLCBfdGhpcy5fY29udmVydGVyKSk7XHJcbiAgICAgICAgICAgICAgICB9LCByZWplY3QpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuZ2V0VmlhU25hcHNob3RMaXN0ZW5lcihyZXNvbHZlLCByZWplY3QsIG9wdGlvbnMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgRG9jdW1lbnRSZWZlcmVuY2UucHJvdG90eXBlLmdldFZpYVNuYXBzaG90TGlzdGVuZXIgPSBmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0LCBvcHRpb25zKSB7XHJcbiAgICAgICAgdmFyIHVubGlzdGVuID0gdGhpcy5vblNuYXBzaG90SW50ZXJuYWwoe1xyXG4gICAgICAgICAgICBpbmNsdWRlTWV0YWRhdGFDaGFuZ2VzOiB0cnVlLFxyXG4gICAgICAgICAgICB3YWl0Rm9yU3luY1doZW5PbmxpbmU6IHRydWVcclxuICAgICAgICB9LCB7XHJcbiAgICAgICAgICAgIG5leHQ6IGZ1bmN0aW9uIChzbmFwKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBSZW1vdmUgcXVlcnkgZmlyc3QgYmVmb3JlIHBhc3NpbmcgZXZlbnQgdG8gdXNlciB0byBhdm9pZFxyXG4gICAgICAgICAgICAgICAgLy8gdXNlciBhY3Rpb25zIGFmZmVjdGluZyB0aGUgbm93IHN0YWxlIHF1ZXJ5LlxyXG4gICAgICAgICAgICAgICAgdW5saXN0ZW4oKTtcclxuICAgICAgICAgICAgICAgIGlmICghc25hcC5leGlzdHMgJiYgc25hcC5tZXRhZGF0YS5mcm9tQ2FjaGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBUT0RPKGRpbW9uZCk6IElmIHdlJ3JlIG9ubGluZSBhbmQgdGhlIGRvY3VtZW50IGRvZXNuJ3RcclxuICAgICAgICAgICAgICAgICAgICAvLyBleGlzdCB0aGVuIHdlIHJlc29sdmUgd2l0aCBhIGRvYy5leGlzdHMgc2V0IHRvIGZhbHNlLiBJZlxyXG4gICAgICAgICAgICAgICAgICAgIC8vIHdlJ3JlIG9mZmxpbmUgaG93ZXZlciwgd2UgcmVqZWN0IHRoZSBQcm9taXNlIGluIHRoaXNcclxuICAgICAgICAgICAgICAgICAgICAvLyBjYXNlLiBUd28gb3B0aW9uczogMSkgQ2FjaGUgdGhlIG5lZ2F0aXZlIHJlc3BvbnNlIGZyb21cclxuICAgICAgICAgICAgICAgICAgICAvLyB0aGUgc2VydmVyIHNvIHdlIGNhbiBkZWxpdmVyIHRoYXQgZXZlbiB3aGVuIHlvdSdyZVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIG9mZmxpbmUgMikgQWN0dWFsbHkgcmVqZWN0IHRoZSBQcm9taXNlIGluIHRoZSBvbmxpbmUgY2FzZVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGlmIHRoZSBkb2N1bWVudCBkb2Vzbid0IGV4aXN0LlxyXG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5VTkFWQUlMQUJMRSwgJ0ZhaWxlZCB0byBnZXQgZG9jdW1lbnQgYmVjYXVzZSB0aGUgY2xpZW50IGlzICcgKyAnb2ZmbGluZS4nKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChzbmFwLmV4aXN0cyAmJlxyXG4gICAgICAgICAgICAgICAgICAgIHNuYXAubWV0YWRhdGEuZnJvbUNhY2hlICYmXHJcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucyAmJlxyXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuc291cmNlID09PSAnc2VydmVyJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5VTkFWQUlMQUJMRSwgJ0ZhaWxlZCB0byBnZXQgZG9jdW1lbnQgZnJvbSBzZXJ2ZXIuIChIb3dldmVyLCB0aGlzICcgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnZG9jdW1lbnQgZG9lcyBleGlzdCBpbiB0aGUgbG9jYWwgY2FjaGUuIFJ1biBhZ2FpbiAnICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ3dpdGhvdXQgc2V0dGluZyBzb3VyY2UgdG8gXCJzZXJ2ZXJcIiB0byAnICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ3JldHJpZXZlIHRoZSBjYWNoZWQgZG9jdW1lbnQuKScpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoc25hcCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGVycm9yOiByZWplY3RcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBEb2N1bWVudFJlZmVyZW5jZS5wcm90b3R5cGUud2l0aENvbnZlcnRlciA9IGZ1bmN0aW9uIChjb252ZXJ0ZXIpIHtcclxuICAgICAgICByZXR1cm4gbmV3IERvY3VtZW50UmVmZXJlbmNlKHRoaXMuX2tleSwgdGhpcy5maXJlc3RvcmUsIGNvbnZlcnRlcik7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIERvY3VtZW50UmVmZXJlbmNlO1xyXG59KCkpO1xyXG52YXIgU25hcHNob3RNZXRhZGF0YSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFNuYXBzaG90TWV0YWRhdGEoaGFzUGVuZGluZ1dyaXRlcywgZnJvbUNhY2hlKSB7XHJcbiAgICAgICAgdGhpcy5oYXNQZW5kaW5nV3JpdGVzID0gaGFzUGVuZGluZ1dyaXRlcztcclxuICAgICAgICB0aGlzLmZyb21DYWNoZSA9IGZyb21DYWNoZTtcclxuICAgIH1cclxuICAgIFNuYXBzaG90TWV0YWRhdGEucHJvdG90eXBlLmlzRXF1YWwgPSBmdW5jdGlvbiAob3RoZXIpIHtcclxuICAgICAgICByZXR1cm4gKHRoaXMuaGFzUGVuZGluZ1dyaXRlcyA9PT0gb3RoZXIuaGFzUGVuZGluZ1dyaXRlcyAmJlxyXG4gICAgICAgICAgICB0aGlzLmZyb21DYWNoZSA9PT0gb3RoZXIuZnJvbUNhY2hlKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gU25hcHNob3RNZXRhZGF0YTtcclxufSgpKTtcclxudmFyIERvY3VtZW50U25hcHNob3QgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBEb2N1bWVudFNuYXBzaG90KF9maXJlc3RvcmUsIF9rZXksIF9kb2N1bWVudCwgX2Zyb21DYWNoZSwgX2hhc1BlbmRpbmdXcml0ZXMsIF9jb252ZXJ0ZXIpIHtcclxuICAgICAgICB0aGlzLl9maXJlc3RvcmUgPSBfZmlyZXN0b3JlO1xyXG4gICAgICAgIHRoaXMuX2tleSA9IF9rZXk7XHJcbiAgICAgICAgdGhpcy5fZG9jdW1lbnQgPSBfZG9jdW1lbnQ7XHJcbiAgICAgICAgdGhpcy5fZnJvbUNhY2hlID0gX2Zyb21DYWNoZTtcclxuICAgICAgICB0aGlzLl9oYXNQZW5kaW5nV3JpdGVzID0gX2hhc1BlbmRpbmdXcml0ZXM7XHJcbiAgICAgICAgdGhpcy5fY29udmVydGVyID0gX2NvbnZlcnRlcjtcclxuICAgIH1cclxuICAgIERvY3VtZW50U25hcHNob3QucHJvdG90eXBlLmRhdGEgPSBmdW5jdGlvbiAob3B0aW9ucykge1xyXG4gICAgICAgIHZhbGlkYXRlQmV0d2Vlbk51bWJlck9mQXJncygnRG9jdW1lbnRTbmFwc2hvdC5kYXRhJywgYXJndW1lbnRzLCAwLCAxKTtcclxuICAgICAgICBvcHRpb25zID0gdmFsaWRhdGVTbmFwc2hvdE9wdGlvbnMoJ0RvY3VtZW50U25hcHNob3QuZGF0YScsIG9wdGlvbnMpO1xyXG4gICAgICAgIGlmICghdGhpcy5fZG9jdW1lbnQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIFdlIG9ubHkgd2FudCB0byB1c2UgdGhlIGNvbnZlcnRlciBhbmQgY3JlYXRlIGEgbmV3IERvY3VtZW50U25hcHNob3RcclxuICAgICAgICAgICAgLy8gaWYgYSBjb252ZXJ0ZXIgaGFzIGJlZW4gcHJvdmlkZWQuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9jb252ZXJ0ZXIpIHtcclxuICAgICAgICAgICAgICAgIHZhciBzbmFwc2hvdCA9IG5ldyBRdWVyeURvY3VtZW50U25hcHNob3QodGhpcy5fZmlyZXN0b3JlLCB0aGlzLl9rZXksIHRoaXMuX2RvY3VtZW50LCB0aGlzLl9mcm9tQ2FjaGUsIHRoaXMuX2hhc1BlbmRpbmdXcml0ZXMpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NvbnZlcnRlci5mcm9tRmlyZXN0b3JlKHNuYXBzaG90LCBvcHRpb25zKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnRvSlNPYmplY3QodGhpcy5fZG9jdW1lbnQuZGF0YSgpLCBGaWVsZFZhbHVlT3B0aW9ucy5mcm9tU25hcHNob3RPcHRpb25zKG9wdGlvbnMsIHRoaXMuX2ZpcmVzdG9yZS5fYXJlVGltZXN0YW1wc0luU25hcHNob3RzRW5hYmxlZCgpKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgRG9jdW1lbnRTbmFwc2hvdC5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKGZpZWxkUGF0aCwgb3B0aW9ucykge1xyXG4gICAgICAgIHZhbGlkYXRlQmV0d2Vlbk51bWJlck9mQXJncygnRG9jdW1lbnRTbmFwc2hvdC5nZXQnLCBhcmd1bWVudHMsIDEsIDIpO1xyXG4gICAgICAgIG9wdGlvbnMgPSB2YWxpZGF0ZVNuYXBzaG90T3B0aW9ucygnRG9jdW1lbnRTbmFwc2hvdC5nZXQnLCBvcHRpb25zKTtcclxuICAgICAgICBpZiAodGhpcy5fZG9jdW1lbnQpIHtcclxuICAgICAgICAgICAgdmFyIHZhbHVlID0gdGhpcy5fZG9jdW1lbnRcclxuICAgICAgICAgICAgICAgIC5kYXRhKClcclxuICAgICAgICAgICAgICAgIC5maWVsZChmaWVsZFBhdGhGcm9tQXJndW1lbnQoJ0RvY3VtZW50U25hcHNob3QuZ2V0JywgZmllbGRQYXRoKSk7XHJcbiAgICAgICAgICAgIGlmICh2YWx1ZSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudG9KU1ZhbHVlKHZhbHVlLCBGaWVsZFZhbHVlT3B0aW9ucy5mcm9tU25hcHNob3RPcHRpb25zKG9wdGlvbnMsIHRoaXMuX2ZpcmVzdG9yZS5fYXJlVGltZXN0YW1wc0luU25hcHNob3RzRW5hYmxlZCgpKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgIH07XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoRG9jdW1lbnRTbmFwc2hvdC5wcm90b3R5cGUsIFwiaWRcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fa2V5LnBhdGgubGFzdFNlZ21lbnQoKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShEb2N1bWVudFNuYXBzaG90LnByb3RvdHlwZSwgXCJyZWZcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IERvY3VtZW50UmVmZXJlbmNlKHRoaXMuX2tleSwgdGhpcy5fZmlyZXN0b3JlLCB0aGlzLl9jb252ZXJ0ZXIpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KERvY3VtZW50U25hcHNob3QucHJvdG90eXBlLCBcImV4aXN0c1wiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9kb2N1bWVudCAhPT0gbnVsbDtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShEb2N1bWVudFNuYXBzaG90LnByb3RvdHlwZSwgXCJtZXRhZGF0YVwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgU25hcHNob3RNZXRhZGF0YSh0aGlzLl9oYXNQZW5kaW5nV3JpdGVzLCB0aGlzLl9mcm9tQ2FjaGUpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgRG9jdW1lbnRTbmFwc2hvdC5wcm90b3R5cGUuaXNFcXVhbCA9IGZ1bmN0aW9uIChvdGhlcikge1xyXG4gICAgICAgIGlmICghKG90aGVyIGluc3RhbmNlb2YgRG9jdW1lbnRTbmFwc2hvdCkpIHtcclxuICAgICAgICAgICAgdGhyb3cgaW52YWxpZENsYXNzRXJyb3IoJ2lzRXF1YWwnLCAnRG9jdW1lbnRTbmFwc2hvdCcsIDEsIG90aGVyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuICh0aGlzLl9maXJlc3RvcmUgPT09IG90aGVyLl9maXJlc3RvcmUgJiZcclxuICAgICAgICAgICAgdGhpcy5fZnJvbUNhY2hlID09PSBvdGhlci5fZnJvbUNhY2hlICYmXHJcbiAgICAgICAgICAgIHRoaXMuX2tleS5pc0VxdWFsKG90aGVyLl9rZXkpICYmXHJcbiAgICAgICAgICAgICh0aGlzLl9kb2N1bWVudCA9PT0gbnVsbFxyXG4gICAgICAgICAgICAgICAgPyBvdGhlci5fZG9jdW1lbnQgPT09IG51bGxcclxuICAgICAgICAgICAgICAgIDogdGhpcy5fZG9jdW1lbnQuaXNFcXVhbChvdGhlci5fZG9jdW1lbnQpKSAmJlxyXG4gICAgICAgICAgICB0aGlzLl9jb252ZXJ0ZXIgPT09IG90aGVyLl9jb252ZXJ0ZXIpO1xyXG4gICAgfTtcclxuICAgIERvY3VtZW50U25hcHNob3QucHJvdG90eXBlLnRvSlNPYmplY3QgPSBmdW5jdGlvbiAoZGF0YSwgb3B0aW9ucykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIHJlc3VsdCA9IHt9O1xyXG4gICAgICAgIGRhdGEuZm9yRWFjaChmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xyXG4gICAgICAgICAgICByZXN1bHRba2V5XSA9IF90aGlzLnRvSlNWYWx1ZSh2YWx1ZSwgb3B0aW9ucyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH07XHJcbiAgICBEb2N1bWVudFNuYXBzaG90LnByb3RvdHlwZS50b0pTVmFsdWUgPSBmdW5jdGlvbiAodmFsdWUsIG9wdGlvbnMpIHtcclxuICAgICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBPYmplY3RWYWx1ZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy50b0pTT2JqZWN0KHZhbHVlLCBvcHRpb25zKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodmFsdWUgaW5zdGFuY2VvZiBBcnJheVZhbHVlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRvSlNBcnJheSh2YWx1ZSwgb3B0aW9ucyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHZhbHVlIGluc3RhbmNlb2YgUmVmVmFsdWUpIHtcclxuICAgICAgICAgICAgdmFyIGtleSA9IHZhbHVlLnZhbHVlKG9wdGlvbnMpO1xyXG4gICAgICAgICAgICB2YXIgZGF0YWJhc2UgPSB0aGlzLl9maXJlc3RvcmUuZW5zdXJlQ2xpZW50Q29uZmlndXJlZCgpLmRhdGFiYXNlSWQoKTtcclxuICAgICAgICAgICAgaWYgKCF2YWx1ZS5kYXRhYmFzZUlkLmlzRXF1YWwoZGF0YWJhc2UpKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBUT0RPKGIvNjQxMzAyMDIpOiBTb21laG93IHN1cHBvcnQgZm9yZWlnbiByZWZlcmVuY2VzLlxyXG4gICAgICAgICAgICAgICAgZXJyb3IoXCJEb2N1bWVudCBcIiArIHRoaXMuX2tleS5wYXRoICsgXCIgY29udGFpbnMgYSBkb2N1bWVudCBcIiArXHJcbiAgICAgICAgICAgICAgICAgICAgXCJyZWZlcmVuY2Ugd2l0aGluIGEgZGlmZmVyZW50IGRhdGFiYXNlIChcIiArXHJcbiAgICAgICAgICAgICAgICAgICAgKHZhbHVlLmRhdGFiYXNlSWQucHJvamVjdElkICsgXCIvXCIgKyB2YWx1ZS5kYXRhYmFzZUlkLmRhdGFiYXNlICsgXCIpIHdoaWNoIGlzIG5vdCBcIikgK1xyXG4gICAgICAgICAgICAgICAgICAgIFwic3VwcG9ydGVkLiBJdCB3aWxsIGJlIHRyZWF0ZWQgYXMgYSByZWZlcmVuY2UgaW4gdGhlIGN1cnJlbnQgXCIgK1xyXG4gICAgICAgICAgICAgICAgICAgIChcImRhdGFiYXNlIChcIiArIGRhdGFiYXNlLnByb2plY3RJZCArIFwiL1wiICsgZGF0YWJhc2UuZGF0YWJhc2UgKyBcIikgXCIpICtcclxuICAgICAgICAgICAgICAgICAgICBcImluc3RlYWQuXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgRG9jdW1lbnRSZWZlcmVuY2Uoa2V5LCB0aGlzLl9maXJlc3RvcmUsIHRoaXMuX2NvbnZlcnRlcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gdmFsdWUudmFsdWUob3B0aW9ucyk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIERvY3VtZW50U25hcHNob3QucHJvdG90eXBlLnRvSlNBcnJheSA9IGZ1bmN0aW9uIChkYXRhLCBvcHRpb25zKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICByZXR1cm4gZGF0YS5pbnRlcm5hbFZhbHVlLm1hcChmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIF90aGlzLnRvSlNWYWx1ZSh2YWx1ZSwgb3B0aW9ucyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIERvY3VtZW50U25hcHNob3Q7XHJcbn0oKSk7XHJcbnZhciBRdWVyeURvY3VtZW50U25hcHNob3QgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICB0c2xpYi5fX2V4dGVuZHMoUXVlcnlEb2N1bWVudFNuYXBzaG90LCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gUXVlcnlEb2N1bWVudFNuYXBzaG90KCkge1xyXG4gICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcclxuICAgIH1cclxuICAgIFF1ZXJ5RG9jdW1lbnRTbmFwc2hvdC5wcm90b3R5cGUuZGF0YSA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XHJcbiAgICAgICAgdmFyIGRhdGEgPSBfc3VwZXIucHJvdG90eXBlLmRhdGEuY2FsbCh0aGlzLCBvcHRpb25zKTtcclxuICAgICAgICBhc3NlcnQoZGF0YSAhPT0gdW5kZWZpbmVkLCAnRG9jdW1lbnQgaW4gYSBRdWVyeURvY3VtZW50U25hcHNob3Qgc2hvdWxkIGV4aXN0Jyk7XHJcbiAgICAgICAgcmV0dXJuIGRhdGE7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFF1ZXJ5RG9jdW1lbnRTbmFwc2hvdDtcclxufShEb2N1bWVudFNuYXBzaG90KSk7XHJcbnZhciBRdWVyeSQxID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gUXVlcnkoX3F1ZXJ5LCBmaXJlc3RvcmUsIF9jb252ZXJ0ZXIpIHtcclxuICAgICAgICB0aGlzLl9xdWVyeSA9IF9xdWVyeTtcclxuICAgICAgICB0aGlzLmZpcmVzdG9yZSA9IGZpcmVzdG9yZTtcclxuICAgICAgICB0aGlzLl9jb252ZXJ0ZXIgPSBfY29udmVydGVyO1xyXG4gICAgfVxyXG4gICAgUXVlcnkucHJvdG90eXBlLndoZXJlID0gZnVuY3Rpb24gKGZpZWxkLCBvcFN0ciwgdmFsdWUpIHtcclxuICAgICAgICB2YWxpZGF0ZUV4YWN0TnVtYmVyT2ZBcmdzKCdRdWVyeS53aGVyZScsIGFyZ3VtZW50cywgMyk7XHJcbiAgICAgICAgdmFsaWRhdGVEZWZpbmVkKCdRdWVyeS53aGVyZScsIDMsIHZhbHVlKTtcclxuICAgICAgICAvLyBFbnVtZXJhdGVkIGZyb20gdGhlIFdoZXJlRmlsdGVyT3AgdHlwZSBpbiBpbmRleC5kLnRzLlxyXG4gICAgICAgIHZhciB3aGVyZUZpbHRlck9wRW51bXMgPSBbXHJcbiAgICAgICAgICAgICc8JyxcclxuICAgICAgICAgICAgJzw9JyxcclxuICAgICAgICAgICAgJz09JyxcclxuICAgICAgICAgICAgJz49JyxcclxuICAgICAgICAgICAgJz4nLFxyXG4gICAgICAgICAgICAnYXJyYXktY29udGFpbnMnLFxyXG4gICAgICAgICAgICAnaW4nLFxyXG4gICAgICAgICAgICAnYXJyYXktY29udGFpbnMtYW55J1xyXG4gICAgICAgIF07XHJcbiAgICAgICAgdmFsaWRhdGVTdHJpbmdFbnVtKCdRdWVyeS53aGVyZScsIHdoZXJlRmlsdGVyT3BFbnVtcywgMiwgb3BTdHIpO1xyXG4gICAgICAgIHZhciBmaWVsZFZhbHVlO1xyXG4gICAgICAgIHZhciBmaWVsZFBhdGggPSBmaWVsZFBhdGhGcm9tQXJndW1lbnQoJ1F1ZXJ5LndoZXJlJywgZmllbGQpO1xyXG4gICAgICAgIHZhciBvcGVyYXRvciA9IE9wZXJhdG9yLmZyb21TdHJpbmcob3BTdHIpO1xyXG4gICAgICAgIGlmIChmaWVsZFBhdGguaXNLZXlGaWVsZCgpKSB7XHJcbiAgICAgICAgICAgIGlmIChvcGVyYXRvciA9PT0gT3BlcmF0b3IuQVJSQVlfQ09OVEFJTlMgfHxcclxuICAgICAgICAgICAgICAgIG9wZXJhdG9yID09PSBPcGVyYXRvci5BUlJBWV9DT05UQUlOU19BTlkpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLklOVkFMSURfQVJHVU1FTlQsIFwiSW52YWxpZCBRdWVyeS4gWW91IGNhbid0IHBlcmZvcm0gJ1wiICsgb3BlcmF0b3IudG9TdHJpbmcoKSArIFwiJyBcIiArXHJcbiAgICAgICAgICAgICAgICAgICAgJ3F1ZXJpZXMgb24gRmllbGRQYXRoLmRvY3VtZW50SWQoKS4nKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChvcGVyYXRvciA9PT0gT3BlcmF0b3IuSU4pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudmFsaWRhdGVEaXNqdW5jdGl2ZUZpbHRlckVsZW1lbnRzKHZhbHVlLCBvcGVyYXRvcik7XHJcbiAgICAgICAgICAgICAgICB2YXIgcmVmZXJlbmNlTGlzdCA9IFtdO1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHZhbHVlOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBhcnJheVZhbHVlID0gX2FbX2ldO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlZmVyZW5jZUxpc3QucHVzaCh0aGlzLnBhcnNlRG9jdW1lbnRJZFZhbHVlKGFycmF5VmFsdWUpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGZpZWxkVmFsdWUgPSBuZXcgQXJyYXlWYWx1ZShyZWZlcmVuY2VMaXN0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGZpZWxkVmFsdWUgPSB0aGlzLnBhcnNlRG9jdW1lbnRJZFZhbHVlKHZhbHVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKG9wZXJhdG9yID09PSBPcGVyYXRvci5JTiB8fFxyXG4gICAgICAgICAgICAgICAgb3BlcmF0b3IgPT09IE9wZXJhdG9yLkFSUkFZX0NPTlRBSU5TX0FOWSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy52YWxpZGF0ZURpc2p1bmN0aXZlRmlsdGVyRWxlbWVudHModmFsdWUsIG9wZXJhdG9yKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBmaWVsZFZhbHVlID0gdGhpcy5maXJlc3RvcmUuX2RhdGFDb252ZXJ0ZXIucGFyc2VRdWVyeVZhbHVlKCdRdWVyeS53aGVyZScsIHZhbHVlLCBcclxuICAgICAgICAgICAgLy8gV2Ugb25seSBhbGxvdyBuZXN0ZWQgYXJyYXlzIGZvciBJTiBxdWVyaWVzLlxyXG4gICAgICAgICAgICAvKiogYWxsb3dBcnJheXMgPSAqLyBvcGVyYXRvciA9PT0gT3BlcmF0b3IuSU4gPyB0cnVlIDogZmFsc2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgZmlsdGVyID0gRmllbGRGaWx0ZXIuY3JlYXRlKGZpZWxkUGF0aCwgb3BlcmF0b3IsIGZpZWxkVmFsdWUpO1xyXG4gICAgICAgIHRoaXMudmFsaWRhdGVOZXdGaWx0ZXIoZmlsdGVyKTtcclxuICAgICAgICByZXR1cm4gbmV3IFF1ZXJ5KHRoaXMuX3F1ZXJ5LmFkZEZpbHRlcihmaWx0ZXIpLCB0aGlzLmZpcmVzdG9yZSwgdGhpcy5fY29udmVydGVyKTtcclxuICAgIH07XHJcbiAgICBRdWVyeS5wcm90b3R5cGUub3JkZXJCeSA9IGZ1bmN0aW9uIChmaWVsZCwgZGlyZWN0aW9uU3RyKSB7XHJcbiAgICAgICAgdmFsaWRhdGVCZXR3ZWVuTnVtYmVyT2ZBcmdzKCdRdWVyeS5vcmRlckJ5JywgYXJndW1lbnRzLCAxLCAyKTtcclxuICAgICAgICB2YWxpZGF0ZU9wdGlvbmFsQXJnVHlwZSgnUXVlcnkub3JkZXJCeScsICdub24tZW1wdHkgc3RyaW5nJywgMiwgZGlyZWN0aW9uU3RyKTtcclxuICAgICAgICB2YXIgZGlyZWN0aW9uO1xyXG4gICAgICAgIGlmIChkaXJlY3Rpb25TdHIgPT09IHVuZGVmaW5lZCB8fCBkaXJlY3Rpb25TdHIgPT09ICdhc2MnKSB7XHJcbiAgICAgICAgICAgIGRpcmVjdGlvbiA9IERpcmVjdGlvbi5BU0NFTkRJTkc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGRpcmVjdGlvblN0ciA9PT0gJ2Rlc2MnKSB7XHJcbiAgICAgICAgICAgIGRpcmVjdGlvbiA9IERpcmVjdGlvbi5ERVNDRU5ESU5HO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuSU5WQUxJRF9BUkdVTUVOVCwgXCJGdW5jdGlvbiBRdWVyeS5vcmRlckJ5KCkgaGFzIHVua25vd24gZGlyZWN0aW9uICdcIiArIGRpcmVjdGlvblN0ciArIFwiJywgXCIgK1xyXG4gICAgICAgICAgICAgICAgXCJleHBlY3RlZCAnYXNjJyBvciAnZGVzYycuXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5fcXVlcnkuc3RhcnRBdCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5JTlZBTElEX0FSR1VNRU5ULCAnSW52YWxpZCBxdWVyeS4gWW91IG11c3Qgbm90IGNhbGwgUXVlcnkuc3RhcnRBdCgpIG9yICcgK1xyXG4gICAgICAgICAgICAgICAgJ1F1ZXJ5LnN0YXJ0QWZ0ZXIoKSBiZWZvcmUgY2FsbGluZyBRdWVyeS5vcmRlckJ5KCkuJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLl9xdWVyeS5lbmRBdCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5JTlZBTElEX0FSR1VNRU5ULCAnSW52YWxpZCBxdWVyeS4gWW91IG11c3Qgbm90IGNhbGwgUXVlcnkuZW5kQXQoKSBvciAnICtcclxuICAgICAgICAgICAgICAgICdRdWVyeS5lbmRCZWZvcmUoKSBiZWZvcmUgY2FsbGluZyBRdWVyeS5vcmRlckJ5KCkuJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBmaWVsZFBhdGggPSBmaWVsZFBhdGhGcm9tQXJndW1lbnQoJ1F1ZXJ5Lm9yZGVyQnknLCBmaWVsZCk7XHJcbiAgICAgICAgdmFyIG9yZGVyQnkgPSBuZXcgT3JkZXJCeShmaWVsZFBhdGgsIGRpcmVjdGlvbik7XHJcbiAgICAgICAgdGhpcy52YWxpZGF0ZU5ld09yZGVyQnkob3JkZXJCeSk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBRdWVyeSh0aGlzLl9xdWVyeS5hZGRPcmRlckJ5KG9yZGVyQnkpLCB0aGlzLmZpcmVzdG9yZSwgdGhpcy5fY29udmVydGVyKTtcclxuICAgIH07XHJcbiAgICBRdWVyeS5wcm90b3R5cGUubGltaXQgPSBmdW5jdGlvbiAobikge1xyXG4gICAgICAgIHZhbGlkYXRlRXhhY3ROdW1iZXJPZkFyZ3MoJ1F1ZXJ5LmxpbWl0JywgYXJndW1lbnRzLCAxKTtcclxuICAgICAgICB2YWxpZGF0ZUFyZ1R5cGUoJ1F1ZXJ5LmxpbWl0JywgJ251bWJlcicsIDEsIG4pO1xyXG4gICAgICAgIHZhbGlkYXRlUG9zaXRpdmVOdW1iZXIoJ1F1ZXJ5LmxpbWl0JywgMSwgbik7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBRdWVyeSh0aGlzLl9xdWVyeS53aXRoTGltaXRUb0ZpcnN0KG4pLCB0aGlzLmZpcmVzdG9yZSwgdGhpcy5fY29udmVydGVyKTtcclxuICAgIH07XHJcbiAgICBRdWVyeS5wcm90b3R5cGUubGltaXRUb0xhc3QgPSBmdW5jdGlvbiAobikge1xyXG4gICAgICAgIHZhbGlkYXRlRXhhY3ROdW1iZXJPZkFyZ3MoJ1F1ZXJ5LmxpbWl0VG9MYXN0JywgYXJndW1lbnRzLCAxKTtcclxuICAgICAgICB2YWxpZGF0ZUFyZ1R5cGUoJ1F1ZXJ5LmxpbWl0VG9MYXN0JywgJ251bWJlcicsIDEsIG4pO1xyXG4gICAgICAgIHZhbGlkYXRlUG9zaXRpdmVOdW1iZXIoJ1F1ZXJ5LmxpbWl0VG9MYXN0JywgMSwgbik7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBRdWVyeSh0aGlzLl9xdWVyeS53aXRoTGltaXRUb0xhc3QobiksIHRoaXMuZmlyZXN0b3JlLCB0aGlzLl9jb252ZXJ0ZXIpO1xyXG4gICAgfTtcclxuICAgIFF1ZXJ5LnByb3RvdHlwZS5zdGFydEF0ID0gZnVuY3Rpb24gKGRvY09yRmllbGQpIHtcclxuICAgICAgICB2YXIgZmllbGRzID0gW107XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAxOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgZmllbGRzW19pIC0gMV0gPSBhcmd1bWVudHNbX2ldO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YWxpZGF0ZUF0TGVhc3ROdW1iZXJPZkFyZ3MoJ1F1ZXJ5LnN0YXJ0QXQnLCBhcmd1bWVudHMsIDEpO1xyXG4gICAgICAgIHZhciBib3VuZCA9IHRoaXMuYm91bmRGcm9tRG9jT3JGaWVsZHMoJ1F1ZXJ5LnN0YXJ0QXQnLCBkb2NPckZpZWxkLCBmaWVsZHMsIFxyXG4gICAgICAgIC8qYmVmb3JlPSovIHRydWUpO1xyXG4gICAgICAgIHJldHVybiBuZXcgUXVlcnkodGhpcy5fcXVlcnkud2l0aFN0YXJ0QXQoYm91bmQpLCB0aGlzLmZpcmVzdG9yZSwgdGhpcy5fY29udmVydGVyKTtcclxuICAgIH07XHJcbiAgICBRdWVyeS5wcm90b3R5cGUuc3RhcnRBZnRlciA9IGZ1bmN0aW9uIChkb2NPckZpZWxkKSB7XHJcbiAgICAgICAgdmFyIGZpZWxkcyA9IFtdO1xyXG4gICAgICAgIGZvciAodmFyIF9pID0gMTsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIGZpZWxkc1tfaSAtIDFdID0gYXJndW1lbnRzW19pXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFsaWRhdGVBdExlYXN0TnVtYmVyT2ZBcmdzKCdRdWVyeS5zdGFydEFmdGVyJywgYXJndW1lbnRzLCAxKTtcclxuICAgICAgICB2YXIgYm91bmQgPSB0aGlzLmJvdW5kRnJvbURvY09yRmllbGRzKCdRdWVyeS5zdGFydEFmdGVyJywgZG9jT3JGaWVsZCwgZmllbGRzLCBcclxuICAgICAgICAvKmJlZm9yZT0qLyBmYWxzZSk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBRdWVyeSh0aGlzLl9xdWVyeS53aXRoU3RhcnRBdChib3VuZCksIHRoaXMuZmlyZXN0b3JlLCB0aGlzLl9jb252ZXJ0ZXIpO1xyXG4gICAgfTtcclxuICAgIFF1ZXJ5LnByb3RvdHlwZS5lbmRCZWZvcmUgPSBmdW5jdGlvbiAoZG9jT3JGaWVsZCkge1xyXG4gICAgICAgIHZhciBmaWVsZHMgPSBbXTtcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDE7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICBmaWVsZHNbX2kgLSAxXSA9IGFyZ3VtZW50c1tfaV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhbGlkYXRlQXRMZWFzdE51bWJlck9mQXJncygnUXVlcnkuZW5kQmVmb3JlJywgYXJndW1lbnRzLCAxKTtcclxuICAgICAgICB2YXIgYm91bmQgPSB0aGlzLmJvdW5kRnJvbURvY09yRmllbGRzKCdRdWVyeS5lbmRCZWZvcmUnLCBkb2NPckZpZWxkLCBmaWVsZHMsIFxyXG4gICAgICAgIC8qYmVmb3JlPSovIHRydWUpO1xyXG4gICAgICAgIHJldHVybiBuZXcgUXVlcnkodGhpcy5fcXVlcnkud2l0aEVuZEF0KGJvdW5kKSwgdGhpcy5maXJlc3RvcmUsIHRoaXMuX2NvbnZlcnRlcik7XHJcbiAgICB9O1xyXG4gICAgUXVlcnkucHJvdG90eXBlLmVuZEF0ID0gZnVuY3Rpb24gKGRvY09yRmllbGQpIHtcclxuICAgICAgICB2YXIgZmllbGRzID0gW107XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAxOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgZmllbGRzW19pIC0gMV0gPSBhcmd1bWVudHNbX2ldO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YWxpZGF0ZUF0TGVhc3ROdW1iZXJPZkFyZ3MoJ1F1ZXJ5LmVuZEF0JywgYXJndW1lbnRzLCAxKTtcclxuICAgICAgICB2YXIgYm91bmQgPSB0aGlzLmJvdW5kRnJvbURvY09yRmllbGRzKCdRdWVyeS5lbmRBdCcsIGRvY09yRmllbGQsIGZpZWxkcywgXHJcbiAgICAgICAgLypiZWZvcmU9Ki8gZmFsc2UpO1xyXG4gICAgICAgIHJldHVybiBuZXcgUXVlcnkodGhpcy5fcXVlcnkud2l0aEVuZEF0KGJvdW5kKSwgdGhpcy5maXJlc3RvcmUsIHRoaXMuX2NvbnZlcnRlcik7XHJcbiAgICB9O1xyXG4gICAgUXVlcnkucHJvdG90eXBlLmlzRXF1YWwgPSBmdW5jdGlvbiAob3RoZXIpIHtcclxuICAgICAgICBpZiAoIShvdGhlciBpbnN0YW5jZW9mIFF1ZXJ5KSkge1xyXG4gICAgICAgICAgICB0aHJvdyBpbnZhbGlkQ2xhc3NFcnJvcignaXNFcXVhbCcsICdRdWVyeScsIDEsIG90aGVyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuICh0aGlzLmZpcmVzdG9yZSA9PT0gb3RoZXIuZmlyZXN0b3JlICYmIHRoaXMuX3F1ZXJ5LmlzRXF1YWwob3RoZXIuX3F1ZXJ5KSk7XHJcbiAgICB9O1xyXG4gICAgUXVlcnkucHJvdG90eXBlLndpdGhDb252ZXJ0ZXIgPSBmdW5jdGlvbiAoY29udmVydGVyKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBRdWVyeSh0aGlzLl9xdWVyeSwgdGhpcy5maXJlc3RvcmUsIGNvbnZlcnRlcik7XHJcbiAgICB9O1xyXG4gICAgLyoqIEhlbHBlciBmdW5jdGlvbiB0byBjcmVhdGUgYSBib3VuZCBmcm9tIGEgZG9jdW1lbnQgb3IgZmllbGRzICovXHJcbiAgICBRdWVyeS5wcm90b3R5cGUuYm91bmRGcm9tRG9jT3JGaWVsZHMgPSBmdW5jdGlvbiAobWV0aG9kTmFtZSwgZG9jT3JGaWVsZCwgZmllbGRzLCBiZWZvcmUpIHtcclxuICAgICAgICB2YWxpZGF0ZURlZmluZWQobWV0aG9kTmFtZSwgMSwgZG9jT3JGaWVsZCk7XHJcbiAgICAgICAgaWYgKGRvY09yRmllbGQgaW5zdGFuY2VvZiBEb2N1bWVudFNuYXBzaG90KSB7XHJcbiAgICAgICAgICAgIGlmIChmaWVsZHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuSU5WQUxJRF9BUkdVTUVOVCwgXCJUb28gbWFueSBhcmd1bWVudHMgcHJvdmlkZWQgdG8gXCIgKyBtZXRob2ROYW1lICsgXCIoKS5cIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIHNuYXAgPSBkb2NPckZpZWxkO1xyXG4gICAgICAgICAgICBpZiAoIXNuYXAuZXhpc3RzKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5OT1RfRk9VTkQsIFwiQ2FuJ3QgdXNlIGEgRG9jdW1lbnRTbmFwc2hvdCB0aGF0IGRvZXNuJ3QgZXhpc3QgZm9yIFwiICtcclxuICAgICAgICAgICAgICAgICAgICAobWV0aG9kTmFtZSArIFwiKCkuXCIpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5ib3VuZEZyb21Eb2N1bWVudChtZXRob2ROYW1lLCBzbmFwLl9kb2N1bWVudCwgYmVmb3JlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHZhciBhbGxGaWVsZHMgPSBbZG9jT3JGaWVsZF0uY29uY2F0KGZpZWxkcyk7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmJvdW5kRnJvbUZpZWxkcyhtZXRob2ROYW1lLCBhbGxGaWVsZHMsIGJlZm9yZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlIGEgQm91bmQgZnJvbSBhIHF1ZXJ5IGFuZCBhIGRvY3VtZW50LlxyXG4gICAgICpcclxuICAgICAqIE5vdGUgdGhhdCB0aGUgQm91bmQgd2lsbCBhbHdheXMgaW5jbHVkZSB0aGUga2V5IG9mIHRoZSBkb2N1bWVudFxyXG4gICAgICogYW5kIHNvIG9ubHkgdGhlIHByb3ZpZGVkIGRvY3VtZW50IHdpbGwgY29tcGFyZSBlcXVhbCB0byB0aGUgcmV0dXJuZWRcclxuICAgICAqIHBvc2l0aW9uLlxyXG4gICAgICpcclxuICAgICAqIFdpbGwgdGhyb3cgaWYgdGhlIGRvY3VtZW50IGRvZXMgbm90IGNvbnRhaW4gYWxsIGZpZWxkcyBvZiB0aGUgb3JkZXIgYnlcclxuICAgICAqIG9mIHRoZSBxdWVyeSBvciBpZiBhbnkgb2YgdGhlIGZpZWxkcyBpbiB0aGUgb3JkZXIgYnkgYXJlIGFuIHVuY29tbWl0dGVkXHJcbiAgICAgKiBzZXJ2ZXIgdGltZXN0YW1wLlxyXG4gICAgICovXHJcbiAgICBRdWVyeS5wcm90b3R5cGUuYm91bmRGcm9tRG9jdW1lbnQgPSBmdW5jdGlvbiAobWV0aG9kTmFtZSwgZG9jLCBiZWZvcmUpIHtcclxuICAgICAgICB2YXIgY29tcG9uZW50cyA9IFtdO1xyXG4gICAgICAgIC8vIEJlY2F1c2UgcGVvcGxlIGV4cGVjdCB0byBjb250aW51ZS9lbmQgYSBxdWVyeSBhdCB0aGUgZXhhY3QgZG9jdW1lbnRcclxuICAgICAgICAvLyBwcm92aWRlZCwgd2UgbmVlZCB0byB1c2UgdGhlIGltcGxpY2l0IHNvcnQgb3JkZXIgcmF0aGVyIHRoYW4gdGhlIGV4cGxpY2l0XHJcbiAgICAgICAgLy8gc29ydCBvcmRlciwgYmVjYXVzZSBpdCdzIGd1YXJhbnRlZWQgdG8gY29udGFpbiB0aGUgZG9jdW1lbnQga2V5LiBUaGF0IHdheVxyXG4gICAgICAgIC8vIHRoZSBwb3NpdGlvbiBiZWNvbWVzIHVuYW1iaWd1b3VzIGFuZCB0aGUgcXVlcnkgY29udGludWVzL2VuZHMgZXhhY3RseSBhdFxyXG4gICAgICAgIC8vIHRoZSBwcm92aWRlZCBkb2N1bWVudC4gV2l0aG91dCB0aGUga2V5IChieSB1c2luZyB0aGUgZXhwbGljaXQgc29ydFxyXG4gICAgICAgIC8vIG9yZGVycyksIG11bHRpcGxlIGRvY3VtZW50cyBjb3VsZCBtYXRjaCB0aGUgcG9zaXRpb24sIHlpZWxkaW5nIGR1cGxpY2F0ZVxyXG4gICAgICAgIC8vIHJlc3VsdHMuXHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHRoaXMuX3F1ZXJ5Lm9yZGVyQnk7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBvcmRlckJ5ID0gX2FbX2ldO1xyXG4gICAgICAgICAgICBpZiAob3JkZXJCeS5maWVsZC5pc0tleUZpZWxkKCkpIHtcclxuICAgICAgICAgICAgICAgIGNvbXBvbmVudHMucHVzaChuZXcgUmVmVmFsdWUodGhpcy5maXJlc3RvcmUuX2RhdGFiYXNlSWQsIGRvYy5rZXkpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IGRvYy5maWVsZChvcmRlckJ5LmZpZWxkKTtcclxuICAgICAgICAgICAgICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIFNlcnZlclRpbWVzdGFtcFZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuSU5WQUxJRF9BUkdVTUVOVCwgJ0ludmFsaWQgcXVlcnkuIFlvdSBhcmUgdHJ5aW5nIHRvIHN0YXJ0IG9yIGVuZCBhIHF1ZXJ5IHVzaW5nIGEgJyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICdkb2N1bWVudCBmb3Igd2hpY2ggdGhlIGZpZWxkIFwiJyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9yZGVyQnkuZmllbGQgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnXCIgaXMgYW4gdW5jb21taXR0ZWQgc2VydmVyIHRpbWVzdGFtcC4gKFNpbmNlIHRoZSB2YWx1ZSBvZiAnICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ3RoaXMgZmllbGQgaXMgdW5rbm93biwgeW91IGNhbm5vdCBzdGFydC9lbmQgYSBxdWVyeSB3aXRoIGl0LiknKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHZhbHVlICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50cy5wdXNoKHZhbHVlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBmaWVsZCA9IG9yZGVyQnkuZmllbGQuY2Fub25pY2FsU3RyaW5nKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuSU5WQUxJRF9BUkdVTUVOVCwgXCJJbnZhbGlkIHF1ZXJ5LiBZb3UgYXJlIHRyeWluZyB0byBzdGFydCBvciBlbmQgYSBxdWVyeSB1c2luZyBhIFwiICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgKFwiZG9jdW1lbnQgZm9yIHdoaWNoIHRoZSBmaWVsZCAnXCIgKyBmaWVsZCArIFwiJyAodXNlZCBhcyB0aGUgXCIpICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJvcmRlckJ5KSBkb2VzIG5vdCBleGlzdC5cIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG5ldyBCb3VuZChjb21wb25lbnRzLCBiZWZvcmUpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQ29udmVydHMgYSBsaXN0IG9mIGZpZWxkIHZhbHVlcyB0byBhIEJvdW5kIGZvciB0aGUgZ2l2ZW4gcXVlcnkuXHJcbiAgICAgKi9cclxuICAgIFF1ZXJ5LnByb3RvdHlwZS5ib3VuZEZyb21GaWVsZHMgPSBmdW5jdGlvbiAobWV0aG9kTmFtZSwgdmFsdWVzLCBiZWZvcmUpIHtcclxuICAgICAgICAvLyBVc2UgZXhwbGljaXQgb3JkZXIgYnkncyBiZWNhdXNlIGl0IGhhcyB0byBtYXRjaCB0aGUgcXVlcnkgdGhlIHVzZXIgbWFkZVxyXG4gICAgICAgIHZhciBvcmRlckJ5ID0gdGhpcy5fcXVlcnkuZXhwbGljaXRPcmRlckJ5O1xyXG4gICAgICAgIGlmICh2YWx1ZXMubGVuZ3RoID4gb3JkZXJCeS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuSU5WQUxJRF9BUkdVTUVOVCwgXCJUb28gbWFueSBhcmd1bWVudHMgcHJvdmlkZWQgdG8gXCIgKyBtZXRob2ROYW1lICsgXCIoKS4gXCIgK1xyXG4gICAgICAgICAgICAgICAgXCJUaGUgbnVtYmVyIG9mIGFyZ3VtZW50cyBtdXN0IGJlIGxlc3MgdGhhbiBvciBlcXVhbCB0byB0aGUgXCIgK1xyXG4gICAgICAgICAgICAgICAgXCJudW1iZXIgb2YgUXVlcnkub3JkZXJCeSgpIGNsYXVzZXNcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBjb21wb25lbnRzID0gW107XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2YWx1ZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdmFyIHJhd1ZhbHVlID0gdmFsdWVzW2ldO1xyXG4gICAgICAgICAgICB2YXIgb3JkZXJCeUNvbXBvbmVudCA9IG9yZGVyQnlbaV07XHJcbiAgICAgICAgICAgIGlmIChvcmRlckJ5Q29tcG9uZW50LmZpZWxkLmlzS2V5RmllbGQoKSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiByYXdWYWx1ZSAhPT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5JTlZBTElEX0FSR1VNRU5ULCBcIkludmFsaWQgcXVlcnkuIEV4cGVjdGVkIGEgc3RyaW5nIGZvciBkb2N1bWVudCBJRCBpbiBcIiArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIChtZXRob2ROYW1lICsgXCIoKSwgYnV0IGdvdCBhIFwiICsgdHlwZW9mIHJhd1ZhbHVlKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuX3F1ZXJ5LmlzQ29sbGVjdGlvbkdyb3VwUXVlcnkoKSAmJlxyXG4gICAgICAgICAgICAgICAgICAgIHJhd1ZhbHVlLmluZGV4T2YoJy8nKSAhPT0gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5JTlZBTElEX0FSR1VNRU5ULCBcIkludmFsaWQgcXVlcnkuIFdoZW4gcXVlcnlpbmcgYSBjb2xsZWN0aW9uIGFuZCBvcmRlcmluZyBieSBGaWVsZFBhdGguZG9jdW1lbnRJZCgpLCBcIiArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIChcInRoZSB2YWx1ZSBwYXNzZWQgdG8gXCIgKyBtZXRob2ROYW1lICsgXCIoKSBtdXN0IGJlIGEgcGxhaW4gZG9jdW1lbnQgSUQsIGJ1dCBcIikgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAoXCInXCIgKyByYXdWYWx1ZSArIFwiJyBjb250YWlucyBhIHNsYXNoLlwiKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB2YXIgcGF0aCA9IHRoaXMuX3F1ZXJ5LnBhdGguY2hpbGQoUmVzb3VyY2VQYXRoLmZyb21TdHJpbmcocmF3VmFsdWUpKTtcclxuICAgICAgICAgICAgICAgIGlmICghRG9jdW1lbnRLZXkuaXNEb2N1bWVudEtleShwYXRoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLklOVkFMSURfQVJHVU1FTlQsIFwiSW52YWxpZCBxdWVyeS4gV2hlbiBxdWVyeWluZyBhIGNvbGxlY3Rpb24gZ3JvdXAgYW5kIG9yZGVyaW5nIGJ5IFwiICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgKFwiRmllbGRQYXRoLmRvY3VtZW50SWQoKSwgdGhlIHZhbHVlIHBhc3NlZCB0byBcIiArIG1ldGhvZE5hbWUgKyBcIigpIG11c3QgcmVzdWx0IGluIGEgXCIpICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgKFwidmFsaWQgZG9jdW1lbnQgcGF0aCwgYnV0ICdcIiArIHBhdGggKyBcIicgaXMgbm90IGJlY2F1c2UgaXQgY29udGFpbnMgYW4gb2RkIG51bWJlciBcIikgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcIm9mIHNlZ21lbnRzLlwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHZhciBrZXkgPSBuZXcgRG9jdW1lbnRLZXkocGF0aCk7XHJcbiAgICAgICAgICAgICAgICBjb21wb25lbnRzLnB1c2gobmV3IFJlZlZhbHVlKHRoaXMuZmlyZXN0b3JlLl9kYXRhYmFzZUlkLCBrZXkpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHZhciB3cmFwcGVkID0gdGhpcy5maXJlc3RvcmUuX2RhdGFDb252ZXJ0ZXIucGFyc2VRdWVyeVZhbHVlKG1ldGhvZE5hbWUsIHJhd1ZhbHVlKTtcclxuICAgICAgICAgICAgICAgIGNvbXBvbmVudHMucHVzaCh3cmFwcGVkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbmV3IEJvdW5kKGNvbXBvbmVudHMsIGJlZm9yZSk7XHJcbiAgICB9O1xyXG4gICAgUXVlcnkucHJvdG90eXBlLm9uU25hcHNob3QgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGFyZ3MgPSBbXTtcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICBhcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhbGlkYXRlQmV0d2Vlbk51bWJlck9mQXJncygnUXVlcnkub25TbmFwc2hvdCcsIGFyZ3VtZW50cywgMSwgNCk7XHJcbiAgICAgICAgdmFyIG9wdGlvbnMgPSB7fTtcclxuICAgICAgICB2YXIgb2JzZXJ2ZXI7XHJcbiAgICAgICAgdmFyIGN1cnJBcmcgPSAwO1xyXG4gICAgICAgIGlmICh0eXBlb2YgYXJnc1tjdXJyQXJnXSA9PT0gJ29iamVjdCcgJiZcclxuICAgICAgICAgICAgIWlzUGFydGlhbE9ic2VydmVyKGFyZ3NbY3VyckFyZ10pKSB7XHJcbiAgICAgICAgICAgIG9wdGlvbnMgPSBhcmdzW2N1cnJBcmddO1xyXG4gICAgICAgICAgICB2YWxpZGF0ZU9wdGlvbk5hbWVzKCdRdWVyeS5vblNuYXBzaG90Jywgb3B0aW9ucywgW1xyXG4gICAgICAgICAgICAgICAgJ2luY2x1ZGVNZXRhZGF0YUNoYW5nZXMnXHJcbiAgICAgICAgICAgIF0pO1xyXG4gICAgICAgICAgICB2YWxpZGF0ZU5hbWVkT3B0aW9uYWxUeXBlKCdRdWVyeS5vblNuYXBzaG90JywgJ2Jvb2xlYW4nLCAnaW5jbHVkZU1ldGFkYXRhQ2hhbmdlcycsIG9wdGlvbnMuaW5jbHVkZU1ldGFkYXRhQ2hhbmdlcyk7XHJcbiAgICAgICAgICAgIGN1cnJBcmcrKztcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGlzUGFydGlhbE9ic2VydmVyKGFyZ3NbY3VyckFyZ10pKSB7XHJcbiAgICAgICAgICAgIG9ic2VydmVyID0gYXJnc1tjdXJyQXJnXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHZhbGlkYXRlQXJnVHlwZSgnUXVlcnkub25TbmFwc2hvdCcsICdmdW5jdGlvbicsIGN1cnJBcmcsIGFyZ3NbY3VyckFyZ10pO1xyXG4gICAgICAgICAgICB2YWxpZGF0ZU9wdGlvbmFsQXJnVHlwZSgnUXVlcnkub25TbmFwc2hvdCcsICdmdW5jdGlvbicsIGN1cnJBcmcgKyAxLCBhcmdzW2N1cnJBcmcgKyAxXSk7XHJcbiAgICAgICAgICAgIHZhbGlkYXRlT3B0aW9uYWxBcmdUeXBlKCdRdWVyeS5vblNuYXBzaG90JywgJ2Z1bmN0aW9uJywgY3VyckFyZyArIDIsIGFyZ3NbY3VyckFyZyArIDJdKTtcclxuICAgICAgICAgICAgb2JzZXJ2ZXIgPSB7XHJcbiAgICAgICAgICAgICAgICBuZXh0OiBhcmdzW2N1cnJBcmddLFxyXG4gICAgICAgICAgICAgICAgZXJyb3I6IGFyZ3NbY3VyckFyZyArIDFdLFxyXG4gICAgICAgICAgICAgICAgY29tcGxldGU6IGFyZ3NbY3VyckFyZyArIDJdXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMudmFsaWRhdGVIYXNFeHBsaWNpdE9yZGVyQnlGb3JMaW1pdFRvTGFzdCh0aGlzLl9xdWVyeSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMub25TbmFwc2hvdEludGVybmFsKG9wdGlvbnMsIG9ic2VydmVyKTtcclxuICAgIH07XHJcbiAgICBRdWVyeS5wcm90b3R5cGUub25TbmFwc2hvdEludGVybmFsID0gZnVuY3Rpb24gKG9wdGlvbnMsIG9ic2VydmVyKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgZXJySGFuZGxlciA9IGZ1bmN0aW9uIChlcnIpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignVW5jYXVnaHQgRXJyb3IgaW4gb25TbmFwc2hvdDonLCBlcnIpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgaWYgKG9ic2VydmVyLmVycm9yKSB7XHJcbiAgICAgICAgICAgIGVyckhhbmRsZXIgPSBvYnNlcnZlci5lcnJvci5iaW5kKG9ic2VydmVyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGFzeW5jT2JzZXJ2ZXIgPSBuZXcgQXN5bmNPYnNlcnZlcih7XHJcbiAgICAgICAgICAgIG5leHQ6IGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIGlmIChvYnNlcnZlci5uZXh0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JzZXJ2ZXIubmV4dChuZXcgUXVlcnlTbmFwc2hvdChfdGhpcy5maXJlc3RvcmUsIF90aGlzLl9xdWVyeSwgcmVzdWx0LCBfdGhpcy5fY29udmVydGVyKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGVycm9yOiBlcnJIYW5kbGVyXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdmFyIGZpcmVzdG9yZUNsaWVudCA9IHRoaXMuZmlyZXN0b3JlLmVuc3VyZUNsaWVudENvbmZpZ3VyZWQoKTtcclxuICAgICAgICB2YXIgaW50ZXJuYWxMaXN0ZW5lciA9IGZpcmVzdG9yZUNsaWVudC5saXN0ZW4odGhpcy5fcXVlcnksIGFzeW5jT2JzZXJ2ZXIsIG9wdGlvbnMpO1xyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGFzeW5jT2JzZXJ2ZXIubXV0ZSgpO1xyXG4gICAgICAgICAgICBmaXJlc3RvcmVDbGllbnQudW5saXN0ZW4oaW50ZXJuYWxMaXN0ZW5lcik7XHJcbiAgICAgICAgfTtcclxuICAgIH07XHJcbiAgICBRdWVyeS5wcm90b3R5cGUudmFsaWRhdGVIYXNFeHBsaWNpdE9yZGVyQnlGb3JMaW1pdFRvTGFzdCA9IGZ1bmN0aW9uIChxdWVyeSkge1xyXG4gICAgICAgIGlmIChxdWVyeS5oYXNMaW1pdFRvTGFzdCgpICYmIHF1ZXJ5LmV4cGxpY2l0T3JkZXJCeS5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuVU5JTVBMRU1FTlRFRCwgJ2xpbWl0VG9MYXN0KCkgcXVlcmllcyByZXF1aXJlIHNwZWNpZnlpbmcgYXQgbGVhc3Qgb25lIG9yZGVyQnkoKSBjbGF1c2UnKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgUXVlcnkucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YWxpZGF0ZUJldHdlZW5OdW1iZXJPZkFyZ3MoJ1F1ZXJ5LmdldCcsIGFyZ3VtZW50cywgMCwgMSk7XHJcbiAgICAgICAgdmFsaWRhdGVHZXRPcHRpb25zKCdRdWVyeS5nZXQnLCBvcHRpb25zKTtcclxuICAgICAgICB0aGlzLnZhbGlkYXRlSGFzRXhwbGljaXRPcmRlckJ5Rm9yTGltaXRUb0xhc3QodGhpcy5fcXVlcnkpO1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMuc291cmNlID09PSAnY2FjaGUnKSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5maXJlc3RvcmVcclxuICAgICAgICAgICAgICAgICAgICAuZW5zdXJlQ2xpZW50Q29uZmlndXJlZCgpXHJcbiAgICAgICAgICAgICAgICAgICAgLmdldERvY3VtZW50c0Zyb21Mb2NhbENhY2hlKF90aGlzLl9xdWVyeSlcclxuICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAodmlld1NuYXApIHtcclxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKG5ldyBRdWVyeVNuYXBzaG90KF90aGlzLmZpcmVzdG9yZSwgX3RoaXMuX3F1ZXJ5LCB2aWV3U25hcCwgX3RoaXMuX2NvbnZlcnRlcikpO1xyXG4gICAgICAgICAgICAgICAgfSwgcmVqZWN0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLmdldFZpYVNuYXBzaG90TGlzdGVuZXIocmVzb2x2ZSwgcmVqZWN0LCBvcHRpb25zKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIFF1ZXJ5LnByb3RvdHlwZS5nZXRWaWFTbmFwc2hvdExpc3RlbmVyID0gZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCwgb3B0aW9ucykge1xyXG4gICAgICAgIHZhciB1bmxpc3RlbiA9IHRoaXMub25TbmFwc2hvdEludGVybmFsKHtcclxuICAgICAgICAgICAgaW5jbHVkZU1ldGFkYXRhQ2hhbmdlczogdHJ1ZSxcclxuICAgICAgICAgICAgd2FpdEZvclN5bmNXaGVuT25saW5lOiB0cnVlXHJcbiAgICAgICAgfSwge1xyXG4gICAgICAgICAgICBuZXh0OiBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAvLyBSZW1vdmUgcXVlcnkgZmlyc3QgYmVmb3JlIHBhc3NpbmcgZXZlbnQgdG8gdXNlciB0byBhdm9pZFxyXG4gICAgICAgICAgICAgICAgLy8gdXNlciBhY3Rpb25zIGFmZmVjdGluZyB0aGUgbm93IHN0YWxlIHF1ZXJ5LlxyXG4gICAgICAgICAgICAgICAgdW5saXN0ZW4oKTtcclxuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQubWV0YWRhdGEuZnJvbUNhY2hlICYmXHJcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucyAmJlxyXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuc291cmNlID09PSAnc2VydmVyJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5VTkFWQUlMQUJMRSwgJ0ZhaWxlZCB0byBnZXQgZG9jdW1lbnRzIGZyb20gc2VydmVyLiAoSG93ZXZlciwgdGhlc2UgJyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICdkb2N1bWVudHMgbWF5IGV4aXN0IGluIHRoZSBsb2NhbCBjYWNoZS4gUnVuIGFnYWluICcgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnd2l0aG91dCBzZXR0aW5nIHNvdXJjZSB0byBcInNlcnZlclwiIHRvICcgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAncmV0cmlldmUgdGhlIGNhY2hlZCBkb2N1bWVudHMuKScpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUocmVzdWx0KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZXJyb3I6IHJlamVjdFxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUGFyc2VzIHRoZSBnaXZlbiBkb2N1bWVudElkVmFsdWUgaW50byBhIFJlZmVyZW5jZVZhbHVlLCB0aHJvd2luZ1xyXG4gICAgICogYXBwcm9wcmlhdGUgZXJyb3JzIGlmIHRoZSB2YWx1ZSBpcyBhbnl0aGluZyBvdGhlciB0aGFuIGEgRG9jdW1lbnRSZWZlcmVuY2VcclxuICAgICAqIG9yIFN0cmluZywgb3IgaWYgdGhlIHN0cmluZyBpcyBtYWxmb3JtZWQuXHJcbiAgICAgKi9cclxuICAgIFF1ZXJ5LnByb3RvdHlwZS5wYXJzZURvY3VtZW50SWRWYWx1ZSA9IGZ1bmN0aW9uIChkb2N1bWVudElkVmFsdWUpIHtcclxuICAgICAgICBpZiAodHlwZW9mIGRvY3VtZW50SWRWYWx1ZSA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgaWYgKGRvY3VtZW50SWRWYWx1ZSA9PT0gJycpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLklOVkFMSURfQVJHVU1FTlQsICdJbnZhbGlkIHF1ZXJ5LiBXaGVuIHF1ZXJ5aW5nIHdpdGggRmllbGRQYXRoLmRvY3VtZW50SWQoKSwgeW91ICcgK1xyXG4gICAgICAgICAgICAgICAgICAgICdtdXN0IHByb3ZpZGUgYSB2YWxpZCBkb2N1bWVudCBJRCwgYnV0IGl0IHdhcyBhbiBlbXB0eSBzdHJpbmcuJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKCF0aGlzLl9xdWVyeS5pc0NvbGxlY3Rpb25Hcm91cFF1ZXJ5KCkgJiZcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50SWRWYWx1ZS5pbmRleE9mKCcvJykgIT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5JTlZBTElEX0FSR1VNRU5ULCBcIkludmFsaWQgcXVlcnkuIFdoZW4gcXVlcnlpbmcgYSBjb2xsZWN0aW9uIGJ5IFwiICtcclxuICAgICAgICAgICAgICAgICAgICBcIkZpZWxkUGF0aC5kb2N1bWVudElkKCksIHlvdSBtdXN0IHByb3ZpZGUgYSBwbGFpbiBkb2N1bWVudCBJRCwgYnV0IFwiICtcclxuICAgICAgICAgICAgICAgICAgICAoXCInXCIgKyBkb2N1bWVudElkVmFsdWUgKyBcIicgY29udGFpbnMgYSAnLycgY2hhcmFjdGVyLlwiKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIHBhdGggPSB0aGlzLl9xdWVyeS5wYXRoLmNoaWxkKFJlc291cmNlUGF0aC5mcm9tU3RyaW5nKGRvY3VtZW50SWRWYWx1ZSkpO1xyXG4gICAgICAgICAgICBpZiAoIURvY3VtZW50S2V5LmlzRG9jdW1lbnRLZXkocGF0aCkpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLklOVkFMSURfQVJHVU1FTlQsIFwiSW52YWxpZCBxdWVyeS4gV2hlbiBxdWVyeWluZyBhIGNvbGxlY3Rpb24gZ3JvdXAgYnkgXCIgK1xyXG4gICAgICAgICAgICAgICAgICAgIFwiRmllbGRQYXRoLmRvY3VtZW50SWQoKSwgdGhlIHZhbHVlIHByb3ZpZGVkIG11c3QgcmVzdWx0IGluIGEgdmFsaWQgZG9jdW1lbnQgcGF0aCwgXCIgK1xyXG4gICAgICAgICAgICAgICAgICAgIChcImJ1dCAnXCIgKyBwYXRoICsgXCInIGlzIG5vdCBiZWNhdXNlIGl0IGhhcyBhbiBvZGQgbnVtYmVyIG9mIHNlZ21lbnRzIChcIiArIHBhdGgubGVuZ3RoICsgXCIpLlwiKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBSZWZWYWx1ZSh0aGlzLmZpcmVzdG9yZS5fZGF0YWJhc2VJZCwgbmV3IERvY3VtZW50S2V5KHBhdGgpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoZG9jdW1lbnRJZFZhbHVlIGluc3RhbmNlb2YgRG9jdW1lbnRSZWZlcmVuY2UpIHtcclxuICAgICAgICAgICAgdmFyIHJlZiA9IGRvY3VtZW50SWRWYWx1ZTtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBSZWZWYWx1ZSh0aGlzLmZpcmVzdG9yZS5fZGF0YWJhc2VJZCwgcmVmLl9rZXkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuSU5WQUxJRF9BUkdVTUVOVCwgXCJJbnZhbGlkIHF1ZXJ5LiBXaGVuIHF1ZXJ5aW5nIHdpdGggRmllbGRQYXRoLmRvY3VtZW50SWQoKSwgeW91IG11c3QgcHJvdmlkZSBhIHZhbGlkIFwiICtcclxuICAgICAgICAgICAgICAgIFwic3RyaW5nIG9yIGEgRG9jdW1lbnRSZWZlcmVuY2UsIGJ1dCBpdCB3YXM6IFwiICtcclxuICAgICAgICAgICAgICAgICh2YWx1ZURlc2NyaXB0aW9uKGRvY3VtZW50SWRWYWx1ZSkgKyBcIi5cIikpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFZhbGlkYXRlcyB0aGF0IHRoZSB2YWx1ZSBwYXNzZWQgaW50byBhIGRpc2p1bmN0cml2ZSBmaWx0ZXIgc2F0aXNmaWVzIGFsbFxyXG4gICAgICogYXJyYXkgcmVxdWlyZW1lbnRzLlxyXG4gICAgICovXHJcbiAgICBRdWVyeS5wcm90b3R5cGUudmFsaWRhdGVEaXNqdW5jdGl2ZUZpbHRlckVsZW1lbnRzID0gZnVuY3Rpb24gKHZhbHVlLCBvcGVyYXRvcikge1xyXG4gICAgICAgIGlmICghQXJyYXkuaXNBcnJheSh2YWx1ZSkgfHwgdmFsdWUubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLklOVkFMSURfQVJHVU1FTlQsICdJbnZhbGlkIFF1ZXJ5LiBBIG5vbi1lbXB0eSBhcnJheSBpcyByZXF1aXJlZCBmb3IgJyArXHJcbiAgICAgICAgICAgICAgICAoXCInXCIgKyBvcGVyYXRvci50b1N0cmluZygpICsgXCInIGZpbHRlcnMuXCIpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHZhbHVlLmxlbmd0aCA+IDEwKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLklOVkFMSURfQVJHVU1FTlQsIFwiSW52YWxpZCBRdWVyeS4gJ1wiICsgb3BlcmF0b3IudG9TdHJpbmcoKSArIFwiJyBmaWx0ZXJzIHN1cHBvcnQgYSBcIiArXHJcbiAgICAgICAgICAgICAgICAnbWF4aW11bSBvZiAxMCBlbGVtZW50cyBpbiB0aGUgdmFsdWUgYXJyYXkuJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh2YWx1ZS5pbmRleE9mKG51bGwpID49IDApIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuSU5WQUxJRF9BUkdVTUVOVCwgXCJJbnZhbGlkIFF1ZXJ5LiAnXCIgKyBvcGVyYXRvci50b1N0cmluZygpICsgXCInIGZpbHRlcnMgY2Fubm90IGNvbnRhaW4gJ251bGwnIFwiICtcclxuICAgICAgICAgICAgICAgICdpbiB0aGUgdmFsdWUgYXJyYXkuJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh2YWx1ZS5maWx0ZXIoZnVuY3Rpb24gKGVsZW1lbnQpIHsgcmV0dXJuIE51bWJlci5pc05hTihlbGVtZW50KTsgfSkubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5JTlZBTElEX0FSR1VNRU5ULCBcIkludmFsaWQgUXVlcnkuICdcIiArIG9wZXJhdG9yLnRvU3RyaW5nKCkgKyBcIicgZmlsdGVycyBjYW5ub3QgY29udGFpbiAnTmFOJyBcIiArXHJcbiAgICAgICAgICAgICAgICAnaW4gdGhlIHZhbHVlIGFycmF5LicpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBRdWVyeS5wcm90b3R5cGUudmFsaWRhdGVOZXdGaWx0ZXIgPSBmdW5jdGlvbiAoZmlsdGVyKSB7XHJcbiAgICAgICAgaWYgKGZpbHRlciBpbnN0YW5jZW9mIEZpZWxkRmlsdGVyKSB7XHJcbiAgICAgICAgICAgIHZhciBhcnJheU9wcyA9IFtPcGVyYXRvci5BUlJBWV9DT05UQUlOUywgT3BlcmF0b3IuQVJSQVlfQ09OVEFJTlNfQU5ZXTtcclxuICAgICAgICAgICAgdmFyIGRpc2p1bmN0aXZlT3BzID0gW09wZXJhdG9yLklOLCBPcGVyYXRvci5BUlJBWV9DT05UQUlOU19BTlldO1xyXG4gICAgICAgICAgICB2YXIgaXNBcnJheU9wID0gYXJyYXlPcHMuaW5kZXhPZihmaWx0ZXIub3ApID49IDA7XHJcbiAgICAgICAgICAgIHZhciBpc0Rpc2p1bmN0aXZlT3AgPSBkaXNqdW5jdGl2ZU9wcy5pbmRleE9mKGZpbHRlci5vcCkgPj0gMDtcclxuICAgICAgICAgICAgaWYgKGZpbHRlci5pc0luZXF1YWxpdHkoKSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGV4aXN0aW5nRmllbGQgPSB0aGlzLl9xdWVyeS5nZXRJbmVxdWFsaXR5RmlsdGVyRmllbGQoKTtcclxuICAgICAgICAgICAgICAgIGlmIChleGlzdGluZ0ZpZWxkICE9PSBudWxsICYmICFleGlzdGluZ0ZpZWxkLmlzRXF1YWwoZmlsdGVyLmZpZWxkKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLklOVkFMSURfQVJHVU1FTlQsICdJbnZhbGlkIHF1ZXJ5LiBBbGwgd2hlcmUgZmlsdGVycyB3aXRoIGFuIGluZXF1YWxpdHknICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJyAoPCwgPD0sID4sIG9yID49KSBtdXN0IGJlIG9uIHRoZSBzYW1lIGZpZWxkLiBCdXQgeW91IGhhdmUnICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgKFwiIGluZXF1YWxpdHkgZmlsdGVycyBvbiAnXCIgKyBleGlzdGluZ0ZpZWxkLnRvU3RyaW5nKCkgKyBcIidcIikgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAoXCIgYW5kICdcIiArIGZpbHRlci5maWVsZC50b1N0cmluZygpICsgXCInXCIpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHZhciBmaXJzdE9yZGVyQnlGaWVsZCA9IHRoaXMuX3F1ZXJ5LmdldEZpcnN0T3JkZXJCeUZpZWxkKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoZmlyc3RPcmRlckJ5RmllbGQgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnZhbGlkYXRlT3JkZXJCeUFuZEluZXF1YWxpdHlNYXRjaChmaWx0ZXIuZmllbGQsIGZpcnN0T3JkZXJCeUZpZWxkKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChpc0Rpc2p1bmN0aXZlT3AgfHwgaXNBcnJheU9wKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBZb3UgY2FuIGhhdmUgYXQgbW9zdCAxIGRpc2p1bmN0aXZlIGZpbHRlciBhbmQgMSBhcnJheSBmaWx0ZXIuIENoZWNrIGlmXHJcbiAgICAgICAgICAgICAgICAvLyB0aGUgbmV3IGZpbHRlciBjb25mbGljdHMgd2l0aCBhbiBleGlzdGluZyBvbmUuXHJcbiAgICAgICAgICAgICAgICB2YXIgY29uZmxpY3RpbmdPcCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICBpZiAoaXNEaXNqdW5jdGl2ZU9wKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uZmxpY3RpbmdPcCA9IHRoaXMuX3F1ZXJ5LmZpbmRGaWx0ZXJPcGVyYXRvcihkaXNqdW5jdGl2ZU9wcyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoY29uZmxpY3RpbmdPcCA9PT0gbnVsbCAmJiBpc0FycmF5T3ApIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25mbGljdGluZ09wID0gdGhpcy5fcXVlcnkuZmluZEZpbHRlck9wZXJhdG9yKGFycmF5T3BzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChjb25mbGljdGluZ09wICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBXZSBzcGVjaWFsIGNhc2Ugd2hlbiBpdCdzIGEgZHVwbGljYXRlIG9wIHRvIGdpdmUgYSBzbGlnaHRseSBjbGVhcmVyIGVycm9yIG1lc3NhZ2UuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZsaWN0aW5nT3AgPT09IGZpbHRlci5vcCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5JTlZBTElEX0FSR1VNRU5ULCAnSW52YWxpZCBxdWVyeS4gWW91IGNhbm5vdCB1c2UgbW9yZSB0aGFuIG9uZSAnICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIChcIidcIiArIGZpbHRlci5vcC50b1N0cmluZygpICsgXCInIGZpbHRlci5cIikpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuSU5WQUxJRF9BUkdVTUVOVCwgXCJJbnZhbGlkIHF1ZXJ5LiBZb3UgY2Fubm90IHVzZSAnXCIgKyBmaWx0ZXIub3AudG9TdHJpbmcoKSArIFwiJyBmaWx0ZXJzIFwiICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIChcIndpdGggJ1wiICsgY29uZmxpY3RpbmdPcC50b1N0cmluZygpICsgXCInIGZpbHRlcnMuXCIpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgUXVlcnkucHJvdG90eXBlLnZhbGlkYXRlTmV3T3JkZXJCeSA9IGZ1bmN0aW9uIChvcmRlckJ5KSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX3F1ZXJ5LmdldEZpcnN0T3JkZXJCeUZpZWxkKCkgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgLy8gVGhpcyBpcyB0aGUgZmlyc3Qgb3JkZXIgYnkuIEl0IG11c3QgbWF0Y2ggYW55IGluZXF1YWxpdHkuXHJcbiAgICAgICAgICAgIHZhciBpbmVxdWFsaXR5RmllbGQgPSB0aGlzLl9xdWVyeS5nZXRJbmVxdWFsaXR5RmlsdGVyRmllbGQoKTtcclxuICAgICAgICAgICAgaWYgKGluZXF1YWxpdHlGaWVsZCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy52YWxpZGF0ZU9yZGVyQnlBbmRJbmVxdWFsaXR5TWF0Y2goaW5lcXVhbGl0eUZpZWxkLCBvcmRlckJ5LmZpZWxkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBRdWVyeS5wcm90b3R5cGUudmFsaWRhdGVPcmRlckJ5QW5kSW5lcXVhbGl0eU1hdGNoID0gZnVuY3Rpb24gKGluZXF1YWxpdHksIG9yZGVyQnkpIHtcclxuICAgICAgICBpZiAoIW9yZGVyQnkuaXNFcXVhbChpbmVxdWFsaXR5KSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5JTlZBTElEX0FSR1VNRU5ULCBcIkludmFsaWQgcXVlcnkuIFlvdSBoYXZlIGEgd2hlcmUgZmlsdGVyIHdpdGggYW4gaW5lcXVhbGl0eSBcIiArXHJcbiAgICAgICAgICAgICAgICAoXCIoPCwgPD0sID4sIG9yID49KSBvbiBmaWVsZCAnXCIgKyBpbmVxdWFsaXR5LnRvU3RyaW5nKCkgKyBcIicgXCIpICtcclxuICAgICAgICAgICAgICAgIChcImFuZCBzbyB5b3UgbXVzdCBhbHNvIHVzZSAnXCIgKyBpbmVxdWFsaXR5LnRvU3RyaW5nKCkgKyBcIicgXCIpICtcclxuICAgICAgICAgICAgICAgIFwiYXMgeW91ciBmaXJzdCBRdWVyeS5vcmRlckJ5KCksIGJ1dCB5b3VyIGZpcnN0IFF1ZXJ5Lm9yZGVyQnkoKSBcIiArXHJcbiAgICAgICAgICAgICAgICAoXCJpcyBvbiBmaWVsZCAnXCIgKyBvcmRlckJ5LnRvU3RyaW5nKCkgKyBcIicgaW5zdGVhZC5cIikpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICByZXR1cm4gUXVlcnk7XHJcbn0oKSk7XHJcbnZhciBRdWVyeVNuYXBzaG90ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gUXVlcnlTbmFwc2hvdChfZmlyZXN0b3JlLCBfb3JpZ2luYWxRdWVyeSwgX3NuYXBzaG90LCBfY29udmVydGVyKSB7XHJcbiAgICAgICAgdGhpcy5fZmlyZXN0b3JlID0gX2ZpcmVzdG9yZTtcclxuICAgICAgICB0aGlzLl9vcmlnaW5hbFF1ZXJ5ID0gX29yaWdpbmFsUXVlcnk7XHJcbiAgICAgICAgdGhpcy5fc25hcHNob3QgPSBfc25hcHNob3Q7XHJcbiAgICAgICAgdGhpcy5fY29udmVydGVyID0gX2NvbnZlcnRlcjtcclxuICAgICAgICB0aGlzLl9jYWNoZWRDaGFuZ2VzID0gbnVsbDtcclxuICAgICAgICB0aGlzLl9jYWNoZWRDaGFuZ2VzSW5jbHVkZU1ldGFkYXRhQ2hhbmdlcyA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5tZXRhZGF0YSA9IG5ldyBTbmFwc2hvdE1ldGFkYXRhKF9zbmFwc2hvdC5oYXNQZW5kaW5nV3JpdGVzLCBfc25hcHNob3QuZnJvbUNhY2hlKTtcclxuICAgIH1cclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShRdWVyeVNuYXBzaG90LnByb3RvdHlwZSwgXCJkb2NzXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IFtdO1xyXG4gICAgICAgICAgICB0aGlzLmZvckVhY2goZnVuY3Rpb24gKGRvYykgeyByZXR1cm4gcmVzdWx0LnB1c2goZG9jKTsgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoUXVlcnlTbmFwc2hvdC5wcm90b3R5cGUsIFwiZW1wdHlcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fc25hcHNob3QuZG9jcy5pc0VtcHR5KCk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoUXVlcnlTbmFwc2hvdC5wcm90b3R5cGUsIFwic2l6ZVwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9zbmFwc2hvdC5kb2NzLnNpemU7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBRdWVyeVNuYXBzaG90LnByb3RvdHlwZS5mb3JFYWNoID0gZnVuY3Rpb24gKGNhbGxiYWNrLCB0aGlzQXJnKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YWxpZGF0ZUJldHdlZW5OdW1iZXJPZkFyZ3MoJ1F1ZXJ5U25hcHNob3QuZm9yRWFjaCcsIGFyZ3VtZW50cywgMSwgMik7XHJcbiAgICAgICAgdmFsaWRhdGVBcmdUeXBlKCdRdWVyeVNuYXBzaG90LmZvckVhY2gnLCAnZnVuY3Rpb24nLCAxLCBjYWxsYmFjayk7XHJcbiAgICAgICAgdGhpcy5fc25hcHNob3QuZG9jcy5mb3JFYWNoKGZ1bmN0aW9uIChkb2MpIHtcclxuICAgICAgICAgICAgY2FsbGJhY2suY2FsbCh0aGlzQXJnLCBfdGhpcy5jb252ZXJ0VG9Eb2N1bWVudEltcGwoZG9jKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFF1ZXJ5U25hcHNob3QucHJvdG90eXBlLCBcInF1ZXJ5XCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBRdWVyeSQxKHRoaXMuX29yaWdpbmFsUXVlcnksIHRoaXMuX2ZpcmVzdG9yZSwgdGhpcy5fY29udmVydGVyKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIFF1ZXJ5U25hcHNob3QucHJvdG90eXBlLmRvY0NoYW5nZXMgPSBmdW5jdGlvbiAob3B0aW9ucykge1xyXG4gICAgICAgIGlmIChvcHRpb25zKSB7XHJcbiAgICAgICAgICAgIHZhbGlkYXRlT3B0aW9uTmFtZXMoJ1F1ZXJ5U25hcHNob3QuZG9jQ2hhbmdlcycsIG9wdGlvbnMsIFtcclxuICAgICAgICAgICAgICAgICdpbmNsdWRlTWV0YWRhdGFDaGFuZ2VzJ1xyXG4gICAgICAgICAgICBdKTtcclxuICAgICAgICAgICAgdmFsaWRhdGVOYW1lZE9wdGlvbmFsVHlwZSgnUXVlcnlTbmFwc2hvdC5kb2NDaGFuZ2VzJywgJ2Jvb2xlYW4nLCAnaW5jbHVkZU1ldGFkYXRhQ2hhbmdlcycsIG9wdGlvbnMuaW5jbHVkZU1ldGFkYXRhQ2hhbmdlcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBpbmNsdWRlTWV0YWRhdGFDaGFuZ2VzID0gISEob3B0aW9ucyAmJiBvcHRpb25zLmluY2x1ZGVNZXRhZGF0YUNoYW5nZXMpO1xyXG4gICAgICAgIGlmIChpbmNsdWRlTWV0YWRhdGFDaGFuZ2VzICYmIHRoaXMuX3NuYXBzaG90LmV4Y2x1ZGVzTWV0YWRhdGFDaGFuZ2VzKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLklOVkFMSURfQVJHVU1FTlQsICdUbyBpbmNsdWRlIG1ldGFkYXRhIGNoYW5nZXMgd2l0aCB5b3VyIGRvY3VtZW50IGNoYW5nZXMsIHlvdSBtdXN0ICcgK1xyXG4gICAgICAgICAgICAgICAgJ2Fsc28gcGFzcyB7IGluY2x1ZGVNZXRhZGF0YUNoYW5nZXM6dHJ1ZSB9IHRvIG9uU25hcHNob3QoKS4nKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCF0aGlzLl9jYWNoZWRDaGFuZ2VzIHx8XHJcbiAgICAgICAgICAgIHRoaXMuX2NhY2hlZENoYW5nZXNJbmNsdWRlTWV0YWRhdGFDaGFuZ2VzICE9PSBpbmNsdWRlTWV0YWRhdGFDaGFuZ2VzKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2NhY2hlZENoYW5nZXMgPSBjaGFuZ2VzRnJvbVNuYXBzaG90KHRoaXMuX2ZpcmVzdG9yZSwgaW5jbHVkZU1ldGFkYXRhQ2hhbmdlcywgdGhpcy5fc25hcHNob3QsIHRoaXMuX2NvbnZlcnRlcik7XHJcbiAgICAgICAgICAgIHRoaXMuX2NhY2hlZENoYW5nZXNJbmNsdWRlTWV0YWRhdGFDaGFuZ2VzID0gaW5jbHVkZU1ldGFkYXRhQ2hhbmdlcztcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NhY2hlZENoYW5nZXM7XHJcbiAgICB9O1xyXG4gICAgLyoqIENoZWNrIHRoZSBlcXVhbGl0eS4gVGhlIGNhbGwgY2FuIGJlIHZlcnkgZXhwZW5zaXZlLiAqL1xyXG4gICAgUXVlcnlTbmFwc2hvdC5wcm90b3R5cGUuaXNFcXVhbCA9IGZ1bmN0aW9uIChvdGhlcikge1xyXG4gICAgICAgIGlmICghKG90aGVyIGluc3RhbmNlb2YgUXVlcnlTbmFwc2hvdCkpIHtcclxuICAgICAgICAgICAgdGhyb3cgaW52YWxpZENsYXNzRXJyb3IoJ2lzRXF1YWwnLCAnUXVlcnlTbmFwc2hvdCcsIDEsIG90aGVyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuICh0aGlzLl9maXJlc3RvcmUgPT09IG90aGVyLl9maXJlc3RvcmUgJiZcclxuICAgICAgICAgICAgdGhpcy5fb3JpZ2luYWxRdWVyeS5pc0VxdWFsKG90aGVyLl9vcmlnaW5hbFF1ZXJ5KSAmJlxyXG4gICAgICAgICAgICB0aGlzLl9zbmFwc2hvdC5pc0VxdWFsKG90aGVyLl9zbmFwc2hvdCkgJiZcclxuICAgICAgICAgICAgdGhpcy5fY29udmVydGVyID09PSBvdGhlci5fY29udmVydGVyKTtcclxuICAgIH07XHJcbiAgICBRdWVyeVNuYXBzaG90LnByb3RvdHlwZS5jb252ZXJ0VG9Eb2N1bWVudEltcGwgPSBmdW5jdGlvbiAoZG9jKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBRdWVyeURvY3VtZW50U25hcHNob3QodGhpcy5fZmlyZXN0b3JlLCBkb2Mua2V5LCBkb2MsIHRoaXMubWV0YWRhdGEuZnJvbUNhY2hlLCB0aGlzLl9zbmFwc2hvdC5tdXRhdGVkS2V5cy5oYXMoZG9jLmtleSksIHRoaXMuX2NvbnZlcnRlcik7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFF1ZXJ5U25hcHNob3Q7XHJcbn0oKSk7XHJcbi8vIFRPRE8oMjAxOC8xMS8wMSk6IEFzIG9mIDIwMTgvMDQvMTcgd2UncmUgY2hhbmdpbmcgZG9jQ2hhbmdlcyBmcm9tIGFuIGFycmF5XHJcbi8vIGludG8gYSBtZXRob2QuIEJlY2F1c2UgdGhpcyBpcyBhIHJ1bnRpbWUgYnJlYWtpbmcgY2hhbmdlIGFuZCBzb21ld2hhdCBzdWJ0bGVcclxuLy8gKGJvdGggQXJyYXkgYW5kIEZ1bmN0aW9uIGhhdmUgYSAubGVuZ3RoLCBldGMuKSwgd2UnbGwgcmVwbGFjZSBjb21tb25seS11c2VkXHJcbi8vIHByb3BlcnRpZXMgKGluY2x1ZGluZyBTeW1ib2wuaXRlcmF0b3IpIHRvIHRocm93IGEgY3VzdG9tIGVycm9yIG1lc3NhZ2UuIEluXHJcbi8vIH42IG1vbnRocyB3ZSBjYW4gZGVsZXRlIHRoZSBjdXN0b20gZXJyb3IgYXMgbW9zdCBmb2xrcyB3aWxsIGhhdmUgaG9wZWZ1bGx5XHJcbi8vIG1pZ3JhdGVkLlxyXG5mdW5jdGlvbiB0aHJvd0RvY0NoYW5nZXNNZXRob2RFcnJvcigpIHtcclxuICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLklOVkFMSURfQVJHVU1FTlQsICdRdWVyeVNuYXBzaG90LmRvY0NoYW5nZXMgaGFzIGJlZW4gY2hhbmdlZCBmcm9tIGEgcHJvcGVydHkgaW50byBhICcgK1xyXG4gICAgICAgICdtZXRob2QsIHNvIHVzYWdlcyBsaWtlIFwicXVlcnlTbmFwc2hvdC5kb2NDaGFuZ2VzXCIgc2hvdWxkIGJlY29tZSAnICtcclxuICAgICAgICAnXCJxdWVyeVNuYXBzaG90LmRvY0NoYW5nZXMoKVwiJyk7XHJcbn1cclxudmFyIGRvY0NoYW5nZXNQcm9wZXJ0aWVzVG9PdmVycmlkZSA9IHRzbGliLl9fc3ByZWFkQXJyYXlzKFtcclxuICAgICdsZW5ndGgnLFxyXG4gICAgJ2ZvckVhY2gnLFxyXG4gICAgJ21hcCdcclxuXSwgKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnID8gW1N5bWJvbC5pdGVyYXRvcl0gOiBbXSkpO1xyXG5kb2NDaGFuZ2VzUHJvcGVydGllc1RvT3ZlcnJpZGUuZm9yRWFjaChmdW5jdGlvbiAocHJvcGVydHkpIHtcclxuICAgIC8qKlxyXG4gICAgICogV2UgYXJlIChyZS0pZGVmaW5pbmcgcHJvcGVydGllcyBvbiBRdWVyeVNuYXBzaG90LnByb3RvdHlwZS5kb2NDaGFuZ2VzIHdoaWNoXHJcbiAgICAgKiBpcyBhIEZ1bmN0aW9uLiBUaGlzIGNvdWxkIGZhaWwsIGluIHBhcnRpY3VsYXIgaW4gdGhlIGNhc2Ugb2YgJ2xlbmd0aCcgd2hpY2hcclxuICAgICAqIGFscmVhZHkgZXhpc3RzIG9uIEZ1bmN0aW9uLnByb3RvdHlwZSBhbmQgb24gSUUxMSBpcyBpbXByb3Blcmx5IGRlZmluZWQgd2l0aFxyXG4gICAgICogYHsgY29uZmlndXJhYmxlOiBmYWxzZSB9YC4gU28gd2Ugd3JhcCB0aGlzIGluIGEgdHJ5L2NhdGNoIHRvIGVuc3VyZSB0aGF0IHdlXHJcbiAgICAgKiBzdGlsbCBoYXZlIGEgZnVuY3Rpb25hbCBTREsuXHJcbiAgICAgKi9cclxuICAgIHRyeSB7XHJcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFF1ZXJ5U25hcHNob3QucHJvdG90eXBlLmRvY0NoYW5nZXMsIHByb3BlcnR5LCB7XHJcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhyb3dEb2NDaGFuZ2VzTWV0aG9kRXJyb3IoKTsgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGVycikgeyB9IC8vIElnbm9yZSB0aGlzIGZhaWx1cmUgaW50ZW50aW9uYWxseVxyXG59KTtcclxudmFyIENvbGxlY3Rpb25SZWZlcmVuY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICB0c2xpYi5fX2V4dGVuZHMoQ29sbGVjdGlvblJlZmVyZW5jZSwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIENvbGxlY3Rpb25SZWZlcmVuY2UoX3BhdGgsIGZpcmVzdG9yZSwgX2NvbnZlcnRlcikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIFF1ZXJ5LmF0UGF0aChfcGF0aCksIGZpcmVzdG9yZSwgX2NvbnZlcnRlcikgfHwgdGhpcztcclxuICAgICAgICBfdGhpcy5fcGF0aCA9IF9wYXRoO1xyXG4gICAgICAgIGlmIChfcGF0aC5sZW5ndGggJSAyICE9PSAxKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLklOVkFMSURfQVJHVU1FTlQsICdJbnZhbGlkIGNvbGxlY3Rpb24gcmVmZXJlbmNlLiBDb2xsZWN0aW9uICcgK1xyXG4gICAgICAgICAgICAgICAgJ3JlZmVyZW5jZXMgbXVzdCBoYXZlIGFuIG9kZCBudW1iZXIgb2Ygc2VnbWVudHMsIGJ1dCAnICtcclxuICAgICAgICAgICAgICAgIChfcGF0aC5jYW5vbmljYWxTdHJpbmcoKSArIFwiIGhhcyBcIiArIF9wYXRoLmxlbmd0aCkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQ29sbGVjdGlvblJlZmVyZW5jZS5wcm90b3R5cGUsIFwiaWRcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fcXVlcnkucGF0aC5sYXN0U2VnbWVudCgpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KENvbGxlY3Rpb25SZWZlcmVuY2UucHJvdG90eXBlLCBcInBhcmVudFwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBwYXJlbnRQYXRoID0gdGhpcy5fcXVlcnkucGF0aC5wb3BMYXN0KCk7XHJcbiAgICAgICAgICAgIGlmIChwYXJlbnRQYXRoLmlzRW1wdHkoKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IERvY3VtZW50UmVmZXJlbmNlKG5ldyBEb2N1bWVudEtleShwYXJlbnRQYXRoKSwgdGhpcy5maXJlc3RvcmUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQ29sbGVjdGlvblJlZmVyZW5jZS5wcm90b3R5cGUsIFwicGF0aFwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9xdWVyeS5wYXRoLmNhbm9uaWNhbFN0cmluZygpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgQ29sbGVjdGlvblJlZmVyZW5jZS5wcm90b3R5cGUuZG9jID0gZnVuY3Rpb24gKHBhdGhTdHJpbmcpIHtcclxuICAgICAgICB2YWxpZGF0ZUJldHdlZW5OdW1iZXJPZkFyZ3MoJ0NvbGxlY3Rpb25SZWZlcmVuY2UuZG9jJywgYXJndW1lbnRzLCAwLCAxKTtcclxuICAgICAgICAvLyBXZSBhbGxvdyBvbWlzc2lvbiBvZiAncGF0aFN0cmluZycgYnV0IGV4cGxpY2l0bHkgcHJvaGliaXQgcGFzc2luZyBpbiBib3RoXHJcbiAgICAgICAgLy8gJ3VuZGVmaW5lZCcgYW5kICdudWxsJy5cclxuICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICBwYXRoU3RyaW5nID0gQXV0b0lkLm5ld0lkKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhbGlkYXRlQXJnVHlwZSgnQ29sbGVjdGlvblJlZmVyZW5jZS5kb2MnLCAnbm9uLWVtcHR5IHN0cmluZycsIDEsIHBhdGhTdHJpbmcpO1xyXG4gICAgICAgIGlmIChwYXRoU3RyaW5nID09PSAnJykge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5JTlZBTElEX0FSR1VNRU5ULCAnRG9jdW1lbnQgcGF0aCBtdXN0IGJlIGEgbm9uLWVtcHR5IHN0cmluZycpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgcGF0aCA9IFJlc291cmNlUGF0aC5mcm9tU3RyaW5nKHBhdGhTdHJpbmcpO1xyXG4gICAgICAgIHJldHVybiBEb2N1bWVudFJlZmVyZW5jZS5mb3JQYXRoKHRoaXMuX3F1ZXJ5LnBhdGguY2hpbGQocGF0aCksIHRoaXMuZmlyZXN0b3JlLCB0aGlzLl9jb252ZXJ0ZXIpO1xyXG4gICAgfTtcclxuICAgIENvbGxlY3Rpb25SZWZlcmVuY2UucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgIHZhbGlkYXRlRXhhY3ROdW1iZXJPZkFyZ3MoJ0NvbGxlY3Rpb25SZWZlcmVuY2UuYWRkJywgYXJndW1lbnRzLCAxKTtcclxuICAgICAgICB2YWxpZGF0ZUFyZ1R5cGUoJ0NvbGxlY3Rpb25SZWZlcmVuY2UuYWRkJywgJ29iamVjdCcsIDEsIHZhbHVlKTtcclxuICAgICAgICB2YXIgZG9jUmVmID0gdGhpcy5kb2MoKTtcclxuICAgICAgICByZXR1cm4gZG9jUmVmLnNldCh2YWx1ZSkudGhlbihmdW5jdGlvbiAoKSB7IHJldHVybiBkb2NSZWY7IH0pO1xyXG4gICAgfTtcclxuICAgIENvbGxlY3Rpb25SZWZlcmVuY2UucHJvdG90eXBlLndpdGhDb252ZXJ0ZXIgPSBmdW5jdGlvbiAoY29udmVydGVyKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBDb2xsZWN0aW9uUmVmZXJlbmNlKHRoaXMuX3BhdGgsIHRoaXMuZmlyZXN0b3JlLCBjb252ZXJ0ZXIpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBDb2xsZWN0aW9uUmVmZXJlbmNlO1xyXG59KFF1ZXJ5JDEpKTtcclxuZnVuY3Rpb24gdmFsaWRhdGVTZXRPcHRpb25zKG1ldGhvZE5hbWUsIG9wdGlvbnMpIHtcclxuICAgIGlmIChvcHRpb25zID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBtZXJnZTogZmFsc2VcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgdmFsaWRhdGVPcHRpb25OYW1lcyhtZXRob2ROYW1lLCBvcHRpb25zLCBbJ21lcmdlJywgJ21lcmdlRmllbGRzJ10pO1xyXG4gICAgdmFsaWRhdGVOYW1lZE9wdGlvbmFsVHlwZShtZXRob2ROYW1lLCAnYm9vbGVhbicsICdtZXJnZScsIG9wdGlvbnMubWVyZ2UpO1xyXG4gICAgdmFsaWRhdGVPcHRpb25hbEFycmF5RWxlbWVudHMobWV0aG9kTmFtZSwgJ21lcmdlRmllbGRzJywgJ2Egc3RyaW5nIG9yIGEgRmllbGRQYXRoJywgb3B0aW9ucy5tZXJnZUZpZWxkcywgZnVuY3Rpb24gKGVsZW1lbnQpIHtcclxuICAgICAgICByZXR1cm4gdHlwZW9mIGVsZW1lbnQgPT09ICdzdHJpbmcnIHx8IGVsZW1lbnQgaW5zdGFuY2VvZiBGaWVsZFBhdGgkMTtcclxuICAgIH0pO1xyXG4gICAgaWYgKG9wdGlvbnMubWVyZ2VGaWVsZHMgIT09IHVuZGVmaW5lZCAmJiBvcHRpb25zLm1lcmdlICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5JTlZBTElEX0FSR1VNRU5ULCBcIkludmFsaWQgb3B0aW9ucyBwYXNzZWQgdG8gZnVuY3Rpb24gXCIgKyBtZXRob2ROYW1lICsgXCIoKTogWW91IGNhbm5vdCBzcGVjaWZ5IGJvdGggXFxcIm1lcmdlXFxcIiBcIiArXHJcbiAgICAgICAgICAgIFwiYW5kIFxcXCJtZXJnZUZpZWxkc1xcXCIuXCIpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG9wdGlvbnM7XHJcbn1cclxuZnVuY3Rpb24gdmFsaWRhdGVTbmFwc2hvdE9wdGlvbnMobWV0aG9kTmFtZSwgb3B0aW9ucykge1xyXG4gICAgaWYgKG9wdGlvbnMgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIHJldHVybiB7fTtcclxuICAgIH1cclxuICAgIHZhbGlkYXRlT3B0aW9uTmFtZXMobWV0aG9kTmFtZSwgb3B0aW9ucywgWydzZXJ2ZXJUaW1lc3RhbXBzJ10pO1xyXG4gICAgdmFsaWRhdGVOYW1lZE9wdGlvbmFsUHJvcGVydHlFcXVhbHMobWV0aG9kTmFtZSwgJ29wdGlvbnMnLCAnc2VydmVyVGltZXN0YW1wcycsIG9wdGlvbnMuc2VydmVyVGltZXN0YW1wcywgWydlc3RpbWF0ZScsICdwcmV2aW91cycsICdub25lJ10pO1xyXG4gICAgcmV0dXJuIG9wdGlvbnM7XHJcbn1cclxuZnVuY3Rpb24gdmFsaWRhdGVHZXRPcHRpb25zKG1ldGhvZE5hbWUsIG9wdGlvbnMpIHtcclxuICAgIHZhbGlkYXRlT3B0aW9uYWxBcmdUeXBlKG1ldGhvZE5hbWUsICdvYmplY3QnLCAxLCBvcHRpb25zKTtcclxuICAgIGlmIChvcHRpb25zKSB7XHJcbiAgICAgICAgdmFsaWRhdGVPcHRpb25OYW1lcyhtZXRob2ROYW1lLCBvcHRpb25zLCBbJ3NvdXJjZSddKTtcclxuICAgICAgICB2YWxpZGF0ZU5hbWVkT3B0aW9uYWxQcm9wZXJ0eUVxdWFscyhtZXRob2ROYW1lLCAnb3B0aW9ucycsICdzb3VyY2UnLCBvcHRpb25zLnNvdXJjZSwgWydkZWZhdWx0JywgJ3NlcnZlcicsICdjYWNoZSddKTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiB2YWxpZGF0ZVJlZmVyZW5jZShtZXRob2ROYW1lLCBkb2N1bWVudFJlZiwgZmlyZXN0b3JlKSB7XHJcbiAgICBpZiAoIShkb2N1bWVudFJlZiBpbnN0YW5jZW9mIERvY3VtZW50UmVmZXJlbmNlKSkge1xyXG4gICAgICAgIHRocm93IGludmFsaWRDbGFzc0Vycm9yKG1ldGhvZE5hbWUsICdEb2N1bWVudFJlZmVyZW5jZScsIDEsIGRvY3VtZW50UmVmKTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGRvY3VtZW50UmVmLmZpcmVzdG9yZSAhPT0gZmlyZXN0b3JlKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuSU5WQUxJRF9BUkdVTUVOVCwgJ1Byb3ZpZGVkIGRvY3VtZW50IHJlZmVyZW5jZSBpcyBmcm9tIGEgZGlmZmVyZW50IEZpcmVzdG9yZSBpbnN0YW5jZS4nKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBkb2N1bWVudFJlZjtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogQ2FsY3VsYXRlcyB0aGUgYXJyYXkgb2YgZmlyZXN0b3JlLkRvY3VtZW50Q2hhbmdlJ3MgZm9yIGEgZ2l2ZW4gVmlld1NuYXBzaG90LlxyXG4gKlxyXG4gKiBFeHBvcnRlZCBmb3IgdGVzdGluZy5cclxuICovXHJcbmZ1bmN0aW9uIGNoYW5nZXNGcm9tU25hcHNob3QoZmlyZXN0b3JlLCBpbmNsdWRlTWV0YWRhdGFDaGFuZ2VzLCBzbmFwc2hvdCwgY29udmVydGVyKSB7XHJcbiAgICBpZiAoc25hcHNob3Qub2xkRG9jcy5pc0VtcHR5KCkpIHtcclxuICAgICAgICAvLyBTcGVjaWFsIGNhc2UgdGhlIGZpcnN0IHNuYXBzaG90IGJlY2F1c2UgaW5kZXggY2FsY3VsYXRpb24gaXMgZWFzeSBhbmRcclxuICAgICAgICAvLyBmYXN0XHJcbiAgICAgICAgdmFyIGxhc3REb2NfMTtcclxuICAgICAgICB2YXIgaW5kZXhfMSA9IDA7XHJcbiAgICAgICAgcmV0dXJuIHNuYXBzaG90LmRvY0NoYW5nZXMubWFwKGZ1bmN0aW9uIChjaGFuZ2UpIHtcclxuICAgICAgICAgICAgdmFyIGRvYyA9IG5ldyBRdWVyeURvY3VtZW50U25hcHNob3QoZmlyZXN0b3JlLCBjaGFuZ2UuZG9jLmtleSwgY2hhbmdlLmRvYywgc25hcHNob3QuZnJvbUNhY2hlLCBzbmFwc2hvdC5tdXRhdGVkS2V5cy5oYXMoY2hhbmdlLmRvYy5rZXkpLCBjb252ZXJ0ZXIpO1xyXG4gICAgICAgICAgICBhc3NlcnQoY2hhbmdlLnR5cGUgPT09IENoYW5nZVR5cGUuQWRkZWQsICdJbnZhbGlkIGV2ZW50IHR5cGUgZm9yIGZpcnN0IHNuYXBzaG90Jyk7XHJcbiAgICAgICAgICAgIGFzc2VydCghbGFzdERvY18xIHx8IHNuYXBzaG90LnF1ZXJ5LmRvY0NvbXBhcmF0b3IobGFzdERvY18xLCBjaGFuZ2UuZG9jKSA8IDAsICdHb3QgYWRkZWQgZXZlbnRzIGluIHdyb25nIG9yZGVyJyk7XHJcbiAgICAgICAgICAgIGxhc3REb2NfMSA9IGNoYW5nZS5kb2M7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICB0eXBlOiAnYWRkZWQnLFxyXG4gICAgICAgICAgICAgICAgZG9jOiBkb2MsXHJcbiAgICAgICAgICAgICAgICBvbGRJbmRleDogLTEsXHJcbiAgICAgICAgICAgICAgICBuZXdJbmRleDogaW5kZXhfMSsrXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICAvLyBBIERvY3VtZW50U2V0IHRoYXQgaXMgdXBkYXRlZCBpbmNyZW1lbnRhbGx5IGFzIGNoYW5nZXMgYXJlIGFwcGxpZWQgdG8gdXNlXHJcbiAgICAgICAgLy8gdG8gbG9va3VwIHRoZSBpbmRleCBvZiBhIGRvY3VtZW50LlxyXG4gICAgICAgIHZhciBpbmRleFRyYWNrZXJfMSA9IHNuYXBzaG90Lm9sZERvY3M7XHJcbiAgICAgICAgcmV0dXJuIHNuYXBzaG90LmRvY0NoYW5nZXNcclxuICAgICAgICAgICAgLmZpbHRlcihmdW5jdGlvbiAoY2hhbmdlKSB7IHJldHVybiBpbmNsdWRlTWV0YWRhdGFDaGFuZ2VzIHx8IGNoYW5nZS50eXBlICE9PSBDaGFuZ2VUeXBlLk1ldGFkYXRhOyB9KVxyXG4gICAgICAgICAgICAubWFwKGZ1bmN0aW9uIChjaGFuZ2UpIHtcclxuICAgICAgICAgICAgdmFyIGRvYyA9IG5ldyBRdWVyeURvY3VtZW50U25hcHNob3QoZmlyZXN0b3JlLCBjaGFuZ2UuZG9jLmtleSwgY2hhbmdlLmRvYywgc25hcHNob3QuZnJvbUNhY2hlLCBzbmFwc2hvdC5tdXRhdGVkS2V5cy5oYXMoY2hhbmdlLmRvYy5rZXkpLCBjb252ZXJ0ZXIpO1xyXG4gICAgICAgICAgICB2YXIgb2xkSW5kZXggPSAtMTtcclxuICAgICAgICAgICAgdmFyIG5ld0luZGV4ID0gLTE7XHJcbiAgICAgICAgICAgIGlmIChjaGFuZ2UudHlwZSAhPT0gQ2hhbmdlVHlwZS5BZGRlZCkge1xyXG4gICAgICAgICAgICAgICAgb2xkSW5kZXggPSBpbmRleFRyYWNrZXJfMS5pbmRleE9mKGNoYW5nZS5kb2Mua2V5KTtcclxuICAgICAgICAgICAgICAgIGFzc2VydChvbGRJbmRleCA+PSAwLCAnSW5kZXggZm9yIGRvY3VtZW50IG5vdCBmb3VuZCcpO1xyXG4gICAgICAgICAgICAgICAgaW5kZXhUcmFja2VyXzEgPSBpbmRleFRyYWNrZXJfMS5kZWxldGUoY2hhbmdlLmRvYy5rZXkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChjaGFuZ2UudHlwZSAhPT0gQ2hhbmdlVHlwZS5SZW1vdmVkKSB7XHJcbiAgICAgICAgICAgICAgICBpbmRleFRyYWNrZXJfMSA9IGluZGV4VHJhY2tlcl8xLmFkZChjaGFuZ2UuZG9jKTtcclxuICAgICAgICAgICAgICAgIG5ld0luZGV4ID0gaW5kZXhUcmFja2VyXzEuaW5kZXhPZihjaGFuZ2UuZG9jLmtleSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHsgdHlwZTogcmVzdWx0Q2hhbmdlVHlwZShjaGFuZ2UudHlwZSksIGRvYzogZG9jLCBvbGRJbmRleDogb2xkSW5kZXgsIG5ld0luZGV4OiBuZXdJbmRleCB9O1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIHJlc3VsdENoYW5nZVR5cGUodHlwZSkge1xyXG4gICAgc3dpdGNoICh0eXBlKSB7XHJcbiAgICAgICAgY2FzZSBDaGFuZ2VUeXBlLkFkZGVkOlxyXG4gICAgICAgICAgICByZXR1cm4gJ2FkZGVkJztcclxuICAgICAgICBjYXNlIENoYW5nZVR5cGUuTW9kaWZpZWQ6XHJcbiAgICAgICAgY2FzZSBDaGFuZ2VUeXBlLk1ldGFkYXRhOlxyXG4gICAgICAgICAgICByZXR1cm4gJ21vZGlmaWVkJztcclxuICAgICAgICBjYXNlIENoYW5nZVR5cGUuUmVtb3ZlZDpcclxuICAgICAgICAgICAgcmV0dXJuICdyZW1vdmVkJztcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICByZXR1cm4gZmFpbCgnVW5rbm93biBjaGFuZ2UgdHlwZTogJyArIHR5cGUpO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBDb252ZXJ0cyBjdXN0b20gbW9kZWwgb2JqZWN0IG9mIHR5cGUgVCBpbnRvIERvY3VtZW50RGF0YSBieSBhcHBseWluZyB0aGVcclxuICogY29udmVydGVyIGlmIGl0IGV4aXN0cy5cclxuICpcclxuICogVGhpcyBmdW5jdGlvbiBpcyB1c2VkIHdoZW4gY29udmVydGluZyB1c2VyIG9iamVjdHMgdG8gRG9jdW1lbnREYXRhXHJcbiAqIGJlY2F1c2Ugd2Ugd2FudCB0byBwcm92aWRlIHRoZSB1c2VyIHdpdGggYSBtb3JlIHNwZWNpZmljIGVycm9yIG1lc3NhZ2UgaWZcclxuICogdGhlaXIgc2V0KCkgb3IgZmFpbHMgZHVlIHRvIGludmFsaWQgZGF0YSBvcmlnaW5hdGluZyBmcm9tIGEgdG9GaXJlc3RvcmUoKVxyXG4gKiBjYWxsLlxyXG4gKi9cclxuZnVuY3Rpb24gYXBwbHlGaXJlc3RvcmVEYXRhQ29udmVydGVyKGNvbnZlcnRlciwgdmFsdWUsIGZ1bmN0aW9uTmFtZSkge1xyXG4gICAgdmFyIGNvbnZlcnRlZFZhbHVlO1xyXG4gICAgaWYgKGNvbnZlcnRlcikge1xyXG4gICAgICAgIGNvbnZlcnRlZFZhbHVlID0gY29udmVydGVyLnRvRmlyZXN0b3JlKHZhbHVlKTtcclxuICAgICAgICBmdW5jdGlvbk5hbWUgPSAndG9GaXJlc3RvcmUoKSBpbiAnICsgZnVuY3Rpb25OYW1lO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgY29udmVydGVkVmFsdWUgPSB2YWx1ZTtcclxuICAgIH1cclxuICAgIHJldHVybiBbY29udmVydGVkVmFsdWUsIGZ1bmN0aW9uTmFtZV07XHJcbn1cclxuLy8gRXhwb3J0IHRoZSBjbGFzc2VzIHdpdGggYSBwcml2YXRlIGNvbnN0cnVjdG9yIChpdCB3aWxsIGZhaWwgaWYgaW52b2tlZFxyXG4vLyBhdCBydW50aW1lKS4gTm90ZSB0aGF0IHRoaXMgc3RpbGwgYWxsb3dzIGluc3RhbmNlb2YgY2hlY2tzLlxyXG4vLyBXZSdyZSB0cmVhdGluZyB0aGUgdmFyaWFibGVzIGFzIGNsYXNzIG5hbWVzLCBzbyBkaXNhYmxlIGNoZWNraW5nIGZvciBsb3dlclxyXG4vLyBjYXNlIHZhcmlhYmxlIG5hbWVzLlxyXG52YXIgUHVibGljRmlyZXN0b3JlID0gbWFrZUNvbnN0cnVjdG9yUHJpdmF0ZShGaXJlc3RvcmUsICdVc2UgZmlyZWJhc2UuZmlyZXN0b3JlKCkgaW5zdGVhZC4nKTtcclxudmFyIFB1YmxpY1RyYW5zYWN0aW9uID0gbWFrZUNvbnN0cnVjdG9yUHJpdmF0ZShUcmFuc2FjdGlvbiQxLCAnVXNlIGZpcmViYXNlLmZpcmVzdG9yZSgpLnJ1blRyYW5zYWN0aW9uKCkgaW5zdGVhZC4nKTtcclxudmFyIFB1YmxpY1dyaXRlQmF0Y2ggPSBtYWtlQ29uc3RydWN0b3JQcml2YXRlKFdyaXRlQmF0Y2gsICdVc2UgZmlyZWJhc2UuZmlyZXN0b3JlKCkuYmF0Y2goKSBpbnN0ZWFkLicpO1xyXG52YXIgUHVibGljRG9jdW1lbnRSZWZlcmVuY2UgPSBtYWtlQ29uc3RydWN0b3JQcml2YXRlKERvY3VtZW50UmVmZXJlbmNlLCAnVXNlIGZpcmViYXNlLmZpcmVzdG9yZSgpLmRvYygpIGluc3RlYWQuJyk7XHJcbnZhciBQdWJsaWNEb2N1bWVudFNuYXBzaG90ID0gbWFrZUNvbnN0cnVjdG9yUHJpdmF0ZShEb2N1bWVudFNuYXBzaG90KTtcclxudmFyIFB1YmxpY1F1ZXJ5RG9jdW1lbnRTbmFwc2hvdCA9IG1ha2VDb25zdHJ1Y3RvclByaXZhdGUoUXVlcnlEb2N1bWVudFNuYXBzaG90KTtcclxudmFyIFB1YmxpY1F1ZXJ5ID0gbWFrZUNvbnN0cnVjdG9yUHJpdmF0ZShRdWVyeSQxKTtcclxudmFyIFB1YmxpY1F1ZXJ5U25hcHNob3QgPSBtYWtlQ29uc3RydWN0b3JQcml2YXRlKFF1ZXJ5U25hcHNob3QpO1xyXG52YXIgUHVibGljQ29sbGVjdGlvblJlZmVyZW5jZSA9IG1ha2VDb25zdHJ1Y3RvclByaXZhdGUoQ29sbGVjdGlvblJlZmVyZW5jZSwgJ1VzZSBmaXJlYmFzZS5maXJlc3RvcmUoKS5jb2xsZWN0aW9uKCkgaW5zdGVhZC4nKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnZhciBmaXJlc3RvcmVOYW1lc3BhY2UgPSB7XHJcbiAgICBGaXJlc3RvcmU6IFB1YmxpY0ZpcmVzdG9yZSxcclxuICAgIEdlb1BvaW50OiBHZW9Qb2ludCxcclxuICAgIFRpbWVzdGFtcDogVGltZXN0YW1wLFxyXG4gICAgQmxvYjogUHVibGljQmxvYixcclxuICAgIFRyYW5zYWN0aW9uOiBQdWJsaWNUcmFuc2FjdGlvbixcclxuICAgIFdyaXRlQmF0Y2g6IFB1YmxpY1dyaXRlQmF0Y2gsXHJcbiAgICBEb2N1bWVudFJlZmVyZW5jZTogUHVibGljRG9jdW1lbnRSZWZlcmVuY2UsXHJcbiAgICBEb2N1bWVudFNuYXBzaG90OiBQdWJsaWNEb2N1bWVudFNuYXBzaG90LFxyXG4gICAgUXVlcnk6IFB1YmxpY1F1ZXJ5LFxyXG4gICAgUXVlcnlEb2N1bWVudFNuYXBzaG90OiBQdWJsaWNRdWVyeURvY3VtZW50U25hcHNob3QsXHJcbiAgICBRdWVyeVNuYXBzaG90OiBQdWJsaWNRdWVyeVNuYXBzaG90LFxyXG4gICAgQ29sbGVjdGlvblJlZmVyZW5jZTogUHVibGljQ29sbGVjdGlvblJlZmVyZW5jZSxcclxuICAgIEZpZWxkUGF0aDogRmllbGRQYXRoJDEsXHJcbiAgICBGaWVsZFZhbHVlOiBQdWJsaWNGaWVsZFZhbHVlLFxyXG4gICAgc2V0TG9nTGV2ZWw6IEZpcmVzdG9yZS5zZXRMb2dMZXZlbCxcclxuICAgIENBQ0hFX1NJWkVfVU5MSU1JVEVEOiBDQUNIRV9TSVpFX1VOTElNSVRFRFxyXG59O1xyXG4vKipcclxuICogQ29uZmlndXJlcyBGaXJlc3RvcmUgYXMgcGFydCBvZiB0aGUgRmlyZWJhc2UgU0RLIGJ5IGNhbGxpbmcgcmVnaXN0ZXJTZXJ2aWNlLlxyXG4gKi9cclxuZnVuY3Rpb24gY29uZmlndXJlRm9yRmlyZWJhc2UoZmlyZWJhc2UpIHtcclxuICAgIGZpcmViYXNlLklOVEVSTkFMLnJlZ2lzdGVyQ29tcG9uZW50KG5ldyBjb21wb25lbnQuQ29tcG9uZW50KCdmaXJlc3RvcmUnLCBmdW5jdGlvbiAoY29udGFpbmVyKSB7XHJcbiAgICAgICAgdmFyIGFwcCA9IGNvbnRhaW5lci5nZXRQcm92aWRlcignYXBwJykuZ2V0SW1tZWRpYXRlKCk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBGaXJlc3RvcmUoYXBwLCBjb250YWluZXIuZ2V0UHJvdmlkZXIoJ2F1dGgtaW50ZXJuYWwnKSk7XHJcbiAgICB9LCBcIlBVQkxJQ1wiIC8qIFBVQkxJQyAqLykuc2V0U2VydmljZVByb3BzKHNoYWxsb3dDb3B5KGZpcmVzdG9yZU5hbWVzcGFjZSkpKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxudmFyIE5vb3BDb25uZWN0aXZpdHlNb25pdG9yID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gTm9vcENvbm5lY3Rpdml0eU1vbml0b3IoKSB7XHJcbiAgICB9XHJcbiAgICBOb29wQ29ubmVjdGl2aXR5TW9uaXRvci5wcm90b3R5cGUuYWRkQ2FsbGJhY2sgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcclxuICAgICAgICAvLyBOby1vcC5cclxuICAgIH07XHJcbiAgICBOb29wQ29ubmVjdGl2aXR5TW9uaXRvci5wcm90b3R5cGUuc2h1dGRvd24gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy8gTm8tb3AuXHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIE5vb3BDb25uZWN0aXZpdHlNb25pdG9yO1xyXG59KCkpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxudmFyIExPR19UQUckYyA9ICdDb25uZWN0aXZpdHlNb25pdG9yJztcclxuLyoqXHJcbiAqIEJyb3dzZXIgaW1wbGVtZW50YXRpb24gb2YgQ29ubmVjdGl2aXR5TW9uaXRvci5cclxuICovXHJcbnZhciBCcm93c2VyQ29ubmVjdGl2aXR5TW9uaXRvciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEJyb3dzZXJDb25uZWN0aXZpdHlNb25pdG9yKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5uZXR3b3JrQXZhaWxhYmxlTGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5vbk5ldHdvcmtBdmFpbGFibGUoKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMubmV0d29ya1VuYXZhaWxhYmxlTGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5vbk5ldHdvcmtVbmF2YWlsYWJsZSgpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5jYWxsYmFja3MgPSBbXTtcclxuICAgICAgICB0aGlzLmNvbmZpZ3VyZU5ldHdvcmtNb25pdG9yaW5nKCk7XHJcbiAgICB9XHJcbiAgICBCcm93c2VyQ29ubmVjdGl2aXR5TW9uaXRvci5wcm90b3R5cGUuYWRkQ2FsbGJhY2sgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcclxuICAgICAgICB0aGlzLmNhbGxiYWNrcy5wdXNoKGNhbGxiYWNrKTtcclxuICAgIH07XHJcbiAgICBCcm93c2VyQ29ubmVjdGl2aXR5TW9uaXRvci5wcm90b3R5cGUuc2h1dGRvd24gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ29ubGluZScsIHRoaXMubmV0d29ya0F2YWlsYWJsZUxpc3RlbmVyKTtcclxuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignb2ZmbGluZScsIHRoaXMubmV0d29ya1VuYXZhaWxhYmxlTGlzdGVuZXIpO1xyXG4gICAgfTtcclxuICAgIEJyb3dzZXJDb25uZWN0aXZpdHlNb25pdG9yLnByb3RvdHlwZS5jb25maWd1cmVOZXR3b3JrTW9uaXRvcmluZyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignb25saW5lJywgdGhpcy5uZXR3b3JrQXZhaWxhYmxlTGlzdGVuZXIpO1xyXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdvZmZsaW5lJywgdGhpcy5uZXR3b3JrVW5hdmFpbGFibGVMaXN0ZW5lcik7XHJcbiAgICB9O1xyXG4gICAgQnJvd3NlckNvbm5lY3Rpdml0eU1vbml0b3IucHJvdG90eXBlLm9uTmV0d29ya0F2YWlsYWJsZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBkZWJ1ZyhMT0dfVEFHJGMsICdOZXR3b3JrIGNvbm5lY3Rpdml0eSBjaGFuZ2VkOiBBVkFJTEFCTEUnKTtcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gdGhpcy5jYWxsYmFja3M7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBjYWxsYmFjayA9IF9hW19pXTtcclxuICAgICAgICAgICAgY2FsbGJhY2soMCAvKiBBVkFJTEFCTEUgKi8pO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBCcm93c2VyQ29ubmVjdGl2aXR5TW9uaXRvci5wcm90b3R5cGUub25OZXR3b3JrVW5hdmFpbGFibGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgZGVidWcoTE9HX1RBRyRjLCAnTmV0d29yayBjb25uZWN0aXZpdHkgY2hhbmdlZDogVU5BVkFJTEFCTEUnKTtcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gdGhpcy5jYWxsYmFja3M7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBjYWxsYmFjayA9IF9hW19pXTtcclxuICAgICAgICAgICAgY2FsbGJhY2soMSAvKiBVTkFWQUlMQUJMRSAqLyk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8vIFRPRE8oY2hlbmJyaWFuKTogQ29uc2lkZXIgcGFzc2luZyBpbiB3aW5kb3cgZWl0aGVyIGludG8gdGhpcyBjb21wb25lbnQgb3JcclxuICAgIC8vIGhlcmUgZm9yIHRlc3RpbmcgdmlhIEZha2VXaW5kb3cuXHJcbiAgICAvKiogQ2hlY2tzIHRoYXQgYWxsIHVzZWQgYXR0cmlidXRlcyBvZiB3aW5kb3cgYXJlIGF2YWlsYWJsZS4gKi9cclxuICAgIEJyb3dzZXJDb25uZWN0aXZpdHlNb25pdG9yLmlzQXZhaWxhYmxlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiZcclxuICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIgIT09IHVuZGVmaW5lZCAmJlxyXG4gICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lciAhPT0gdW5kZWZpbmVkKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gQnJvd3NlckNvbm5lY3Rpdml0eU1vbml0b3I7XHJcbn0oKSk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogUHJvdmlkZXMgYSBzaW1wbGUgaGVscGVyIGNsYXNzIHRoYXQgaW1wbGVtZW50cyB0aGUgU3RyZWFtIGludGVyZmFjZSB0b1xyXG4gKiBicmlkZ2UgdG8gb3RoZXIgaW1wbGVtZW50YXRpb25zIHRoYXQgYXJlIHN0cmVhbXMgYnV0IGRvIG5vdCBpbXBsZW1lbnQgdGhlXHJcbiAqIGludGVyZmFjZS4gVGhlIHN0cmVhbSBjYWxsYmFja3MgYXJlIGludm9rZWQgd2l0aCB0aGUgY2FsbE9uLi4uIG1ldGhvZHMuXHJcbiAqL1xyXG52YXIgU3RyZWFtQnJpZGdlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gU3RyZWFtQnJpZGdlKGFyZ3MpIHtcclxuICAgICAgICB0aGlzLnNlbmRGbiA9IGFyZ3Muc2VuZEZuO1xyXG4gICAgICAgIHRoaXMuY2xvc2VGbiA9IGFyZ3MuY2xvc2VGbjtcclxuICAgIH1cclxuICAgIFN0cmVhbUJyaWRnZS5wcm90b3R5cGUub25PcGVuID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgYXNzZXJ0KCF0aGlzLndyYXBwZWRPbk9wZW4sICdDYWxsZWQgb25PcGVuIG9uIHN0cmVhbSB0d2ljZSEnKTtcclxuICAgICAgICB0aGlzLndyYXBwZWRPbk9wZW4gPSBjYWxsYmFjaztcclxuICAgIH07XHJcbiAgICBTdHJlYW1CcmlkZ2UucHJvdG90eXBlLm9uQ2xvc2UgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcclxuICAgICAgICBhc3NlcnQoIXRoaXMud3JhcHBlZE9uQ2xvc2UsICdDYWxsZWQgb25DbG9zZSBvbiBzdHJlYW0gdHdpY2UhJyk7XHJcbiAgICAgICAgdGhpcy53cmFwcGVkT25DbG9zZSA9IGNhbGxiYWNrO1xyXG4gICAgfTtcclxuICAgIFN0cmVhbUJyaWRnZS5wcm90b3R5cGUub25NZXNzYWdlID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgYXNzZXJ0KCF0aGlzLndyYXBwZWRPbk1lc3NhZ2UsICdDYWxsZWQgb25NZXNzYWdlIG9uIHN0cmVhbSB0d2ljZSEnKTtcclxuICAgICAgICB0aGlzLndyYXBwZWRPbk1lc3NhZ2UgPSBjYWxsYmFjaztcclxuICAgIH07XHJcbiAgICBTdHJlYW1CcmlkZ2UucHJvdG90eXBlLmNsb3NlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuY2xvc2VGbigpO1xyXG4gICAgfTtcclxuICAgIFN0cmVhbUJyaWRnZS5wcm90b3R5cGUuc2VuZCA9IGZ1bmN0aW9uIChtc2cpIHtcclxuICAgICAgICB0aGlzLnNlbmRGbihtc2cpO1xyXG4gICAgfTtcclxuICAgIFN0cmVhbUJyaWRnZS5wcm90b3R5cGUuY2FsbE9uT3BlbiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBhc3NlcnQodGhpcy53cmFwcGVkT25PcGVuICE9PSB1bmRlZmluZWQsICdDYW5ub3QgY2FsbCBvbk9wZW4gYmVjYXVzZSBubyBjYWxsYmFjayB3YXMgc2V0Jyk7XHJcbiAgICAgICAgdGhpcy53cmFwcGVkT25PcGVuKCk7XHJcbiAgICB9O1xyXG4gICAgU3RyZWFtQnJpZGdlLnByb3RvdHlwZS5jYWxsT25DbG9zZSA9IGZ1bmN0aW9uIChlcnIpIHtcclxuICAgICAgICBhc3NlcnQodGhpcy53cmFwcGVkT25DbG9zZSAhPT0gdW5kZWZpbmVkLCAnQ2Fubm90IGNhbGwgb25DbG9zZSBiZWNhdXNlIG5vIGNhbGxiYWNrIHdhcyBzZXQnKTtcclxuICAgICAgICB0aGlzLndyYXBwZWRPbkNsb3NlKGVycik7XHJcbiAgICB9O1xyXG4gICAgU3RyZWFtQnJpZGdlLnByb3RvdHlwZS5jYWxsT25NZXNzYWdlID0gZnVuY3Rpb24gKG1zZykge1xyXG4gICAgICAgIGFzc2VydCh0aGlzLndyYXBwZWRPbk1lc3NhZ2UgIT09IHVuZGVmaW5lZCwgJ0Nhbm5vdCBjYWxsIG9uTWVzc2FnZSBiZWNhdXNlIG5vIGNhbGxiYWNrIHdhcyBzZXQnKTtcclxuICAgICAgICB0aGlzLndyYXBwZWRPbk1lc3NhZ2UobXNnKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gU3RyZWFtQnJpZGdlO1xyXG59KCkpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxudmFyIExPR19UQUckZCA9ICdDb25uZWN0aW9uJztcclxudmFyIFJQQ19TVFJFQU1fU0VSVklDRSA9ICdnb29nbGUuZmlyZXN0b3JlLnYxLkZpcmVzdG9yZSc7XHJcbnZhciBSUENfVVJMX1ZFUlNJT04gPSAndjEnO1xyXG4vKipcclxuICogTWFwcyBSUEMgbmFtZXMgdG8gdGhlIGNvcnJlc3BvbmRpbmcgUkVTVCBlbmRwb2ludCBuYW1lLlxyXG4gKiBVc2VzIE9iamVjdCBMaXRlcmFsIG5vdGF0aW9uIHRvIGF2b2lkIHJlbmFtaW5nLlxyXG4gKi9cclxudmFyIFJQQ19OQU1FX1JFU1RfTUFQUElORyA9IHt9O1xyXG5SUENfTkFNRV9SRVNUX01BUFBJTkdbJ0JhdGNoR2V0RG9jdW1lbnRzJ10gPSAnYmF0Y2hHZXQnO1xyXG5SUENfTkFNRV9SRVNUX01BUFBJTkdbJ0NvbW1pdCddID0gJ2NvbW1pdCc7XHJcbi8vIFRPRE8oYi8zODIwMzM0NCk6IFRoZSBTREtfVkVSU0lPTiBpcyBzZXQgaW5kZXBlbmRlbnRseSBmcm9tIEZpcmViYXNlIGJlY2F1c2VcclxuLy8gd2UgYXJlIGRvaW5nIG91dC1vZi1iYW5kIHJlbGVhc2VzLiBPbmNlIHdlIHJlbGVhc2UgYXMgcGFydCBvZiBGaXJlYmFzZSwgd2VcclxuLy8gc2hvdWxkIHVzZSB0aGUgRmlyZWJhc2UgdmVyc2lvbiBpbnN0ZWFkLlxyXG52YXIgWF9HT09HX0FQSV9DTElFTlRfVkFMVUUgPSAnZ2wtanMvIGZpcmUvJyArIFNES19WRVJTSU9OO1xyXG52YXIgWEhSX1RJTUVPVVRfU0VDUyA9IDE1O1xyXG52YXIgV2ViQ2hhbm5lbENvbm5lY3Rpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBXZWJDaGFubmVsQ29ubmVjdGlvbihpbmZvKSB7XHJcbiAgICAgICAgdGhpcy5kYXRhYmFzZUlkID0gaW5mby5kYXRhYmFzZUlkO1xyXG4gICAgICAgIHZhciBwcm90byA9IGluZm8uc3NsID8gJ2h0dHBzJyA6ICdodHRwJztcclxuICAgICAgICB0aGlzLmJhc2VVcmwgPSBwcm90byArICc6Ly8nICsgaW5mby5ob3N0O1xyXG4gICAgICAgIHRoaXMuZm9yY2VMb25nUG9sbGluZyA9IGluZm8uZm9yY2VMb25nUG9sbGluZztcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogTW9kaWZpZXMgdGhlIGhlYWRlcnMgZm9yIGEgcmVxdWVzdCwgYWRkaW5nIGFueSBhdXRob3JpemF0aW9uIHRva2VuIGlmXHJcbiAgICAgKiBwcmVzZW50IGFuZCBhbnkgYWRkaXRpb25hbCBoZWFkZXJzIGZvciB0aGUgcmVxdWVzdC5cclxuICAgICAqL1xyXG4gICAgV2ViQ2hhbm5lbENvbm5lY3Rpb24ucHJvdG90eXBlLm1vZGlmeUhlYWRlcnNGb3JSZXF1ZXN0ID0gZnVuY3Rpb24gKGhlYWRlcnMsIHRva2VuKSB7XHJcbiAgICAgICAgaWYgKHRva2VuKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGhlYWRlciBpbiB0b2tlbi5hdXRoSGVhZGVycykge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRva2VuLmF1dGhIZWFkZXJzLmhhc093blByb3BlcnR5KGhlYWRlcikpIHtcclxuICAgICAgICAgICAgICAgICAgICBoZWFkZXJzW2hlYWRlcl0gPSB0b2tlbi5hdXRoSGVhZGVyc1toZWFkZXJdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGhlYWRlcnNbJ1gtR29vZy1BcGktQ2xpZW50J10gPSBYX0dPT0dfQVBJX0NMSUVOVF9WQUxVRTtcclxuICAgIH07XHJcbiAgICBXZWJDaGFubmVsQ29ubmVjdGlvbi5wcm90b3R5cGUuaW52b2tlUlBDID0gZnVuY3Rpb24gKHJwY05hbWUsIHJlcXVlc3QsIHRva2VuKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgdXJsID0gdGhpcy5tYWtlVXJsKHJwY05hbWUpO1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgIHZhciB4aHIgPSBuZXcgd2ViY2hhbm5lbFdyYXBwZXIuWGhySW8oKTtcclxuICAgICAgICAgICAgeGhyLmxpc3Rlbk9uY2Uod2ViY2hhbm5lbFdyYXBwZXIuRXZlbnRUeXBlLkNPTVBMRVRFLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoeGhyLmdldExhc3RFcnJvckNvZGUoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIHdlYmNoYW5uZWxXcmFwcGVyLkVycm9yQ29kZS5OT19FUlJPUjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBqc29uID0geGhyLmdldFJlc3BvbnNlSnNvbigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVidWcoTE9HX1RBRyRkLCAnWEhSIHJlY2VpdmVkOicsIEpTT04uc3RyaW5naWZ5KGpzb24pKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoanNvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSB3ZWJjaGFubmVsV3JhcHBlci5FcnJvckNvZGUuVElNRU9VVDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlYnVnKExPR19UQUckZCwgJ1JQQyBcIicgKyBycGNOYW1lICsgJ1wiIHRpbWVkIG91dCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLkRFQURMSU5FX0VYQ0VFREVELCAnUmVxdWVzdCB0aW1lIG91dCcpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIHdlYmNoYW5uZWxXcmFwcGVyLkVycm9yQ29kZS5IVFRQX0VSUk9SOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN0YXR1c18xID0geGhyLmdldFN0YXR1cygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVidWcoTE9HX1RBRyRkLCAnUlBDIFwiJyArIHJwY05hbWUgKyAnXCIgZmFpbGVkIHdpdGggc3RhdHVzOicsIHN0YXR1c18xLCAncmVzcG9uc2UgdGV4dDonLCB4aHIuZ2V0UmVzcG9uc2VUZXh0KCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXR1c18xID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZXNwb25zZUVycm9yID0geGhyLmdldFJlc3BvbnNlSnNvbigpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5lcnJvcjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoISFyZXNwb25zZUVycm9yICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICEhcmVzcG9uc2VFcnJvci5zdGF0dXMgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgISFyZXNwb25zZUVycm9yLm1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZpcmVzdG9yZUVycm9yQ29kZSA9IG1hcENvZGVGcm9tSHR0cFJlc3BvbnNlRXJyb3JTdGF0dXMocmVzcG9uc2VFcnJvci5zdGF0dXMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWplY3QobmV3IEZpcmVzdG9yZUVycm9yKGZpcmVzdG9yZUVycm9yQ29kZSwgcmVzcG9uc2VFcnJvci5tZXNzYWdlKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWplY3QobmV3IEZpcmVzdG9yZUVycm9yKENvZGUuVU5LTk9XTiwgJ1NlcnZlciByZXNwb25kZWQgd2l0aCBzdGF0dXMgJyArIHhoci5nZXRTdGF0dXMoKSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIHdlIHJlY2VpdmVkIGFuIEhUVFBfRVJST1IgYnV0IHRoZXJlJ3Mgbm8gc3RhdHVzIGNvZGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaXQncyBtb3N0IHByb2JhYmx5IGEgY29ubmVjdGlvbiBpc3N1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlYnVnKExPR19UQUckZCwgJ1JQQyBcIicgKyBycGNOYW1lICsgJ1wiIGZhaWxlZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5VTkFWQUlMQUJMRSwgJ0Nvbm5lY3Rpb24gZmFpbGVkLicpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmFpbCgnUlBDIFwiJyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcnBjTmFtZSArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1wiIGZhaWxlZCB3aXRoIHVuYW50aWNpcGF0ZWQgJyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3dlYmNoYW5uZWwgZXJyb3IgJyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeGhyLmdldExhc3RFcnJvckNvZGUoKSArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJzogJyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeGhyLmdldExhc3RFcnJvcigpICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnLCBnaXZpbmcgdXAuJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZmluYWxseSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVidWcoTE9HX1RBRyRkLCAnUlBDIFwiJyArIHJwY05hbWUgKyAnXCIgY29tcGxldGVkLicpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgLy8gVGhlIGRhdGFiYXNlIGZpZWxkIGlzIGFscmVhZHkgZW5jb2RlZCBpbiBVUkwuIFNwZWNpZnlpbmcgaXQgYWdhaW4gaW5cclxuICAgICAgICAgICAgLy8gdGhlIGJvZHkgaXMgbm90IG5lY2Vzc2FyeSBpbiBwcm9kdWN0aW9uLCBhbmQgd2lsbCBjYXVzZSBkdXBsaWNhdGUgZmllbGRcclxuICAgICAgICAgICAgLy8gZXJyb3JzIGluIHRoZSBGaXJlc3RvcmUgRW11bGF0b3IuIExldCdzIHJlbW92ZSBpdC5cclxuICAgICAgICAgICAgdmFyIGpzb25PYmogPSB0c2xpYi5fX2Fzc2lnbih7fSwgcmVxdWVzdCk7XHJcbiAgICAgICAgICAgIGRlbGV0ZSBqc29uT2JqLmRhdGFiYXNlO1xyXG4gICAgICAgICAgICB2YXIgcmVxdWVzdFN0cmluZyA9IEpTT04uc3RyaW5naWZ5KGpzb25PYmopO1xyXG4gICAgICAgICAgICBkZWJ1ZyhMT0dfVEFHJGQsICdYSFIgc2VuZGluZzogJywgdXJsICsgJyAnICsgcmVxdWVzdFN0cmluZyk7XHJcbiAgICAgICAgICAgIC8vIENvbnRlbnQtVHlwZTogdGV4dC9wbGFpbiB3aWxsIGF2b2lkIHByZWZsaWdodCByZXF1ZXN0cyB3aGljaCBtaWdodFxyXG4gICAgICAgICAgICAvLyBtZXNzIHdpdGggQ09SUyBhbmQgcmVkaXJlY3RzIGJ5IHByb3hpZXMuIElmIHdlIGFkZCBjdXN0b20gaGVhZGVyc1xyXG4gICAgICAgICAgICAvLyB3ZSB3aWxsIG5lZWQgdG8gY2hhbmdlIHRoaXMgY29kZSB0byBwb3RlbnRpYWxseSB1c2UgdGhlXHJcbiAgICAgICAgICAgIC8vICRodHRwT3ZlcndyaXRlIHBhcmFtZXRlciBzdXBwb3J0ZWQgYnkgRVNGIHRvIGF2b2lkXHJcbiAgICAgICAgICAgIC8vIHRyaWdnZXJpbmcgcHJlZmxpZ2h0IHJlcXVlc3RzLlxyXG4gICAgICAgICAgICB2YXIgaGVhZGVycyA9IHsgJ0NvbnRlbnQtVHlwZSc6ICd0ZXh0L3BsYWluJyB9O1xyXG4gICAgICAgICAgICBfdGhpcy5tb2RpZnlIZWFkZXJzRm9yUmVxdWVzdChoZWFkZXJzLCB0b2tlbik7XHJcbiAgICAgICAgICAgIHhoci5zZW5kKHVybCwgJ1BPU1QnLCByZXF1ZXN0U3RyaW5nLCBoZWFkZXJzLCBYSFJfVElNRU9VVF9TRUNTKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBXZWJDaGFubmVsQ29ubmVjdGlvbi5wcm90b3R5cGUuaW52b2tlU3RyZWFtaW5nUlBDID0gZnVuY3Rpb24gKHJwY05hbWUsIHJlcXVlc3QsIHRva2VuKSB7XHJcbiAgICAgICAgLy8gVGhlIFJFU1QgQVBJIGF1dG9tYXRpY2FsbHkgYWdncmVnYXRlcyBhbGwgb2YgdGhlIHN0cmVhbWVkIHJlc3VsdHMsIHNvIHdlXHJcbiAgICAgICAgLy8gY2FuIGp1c3QgdXNlIHRoZSBub3JtYWwgaW52b2tlKCkgbWV0aG9kLlxyXG4gICAgICAgIHJldHVybiB0aGlzLmludm9rZVJQQyhycGNOYW1lLCByZXF1ZXN0LCB0b2tlbik7XHJcbiAgICB9O1xyXG4gICAgV2ViQ2hhbm5lbENvbm5lY3Rpb24ucHJvdG90eXBlLm9wZW5TdHJlYW0gPSBmdW5jdGlvbiAocnBjTmFtZSwgdG9rZW4pIHtcclxuICAgICAgICB2YXIgdXJsUGFydHMgPSBbXHJcbiAgICAgICAgICAgIHRoaXMuYmFzZVVybCxcclxuICAgICAgICAgICAgJy8nLFxyXG4gICAgICAgICAgICBSUENfU1RSRUFNX1NFUlZJQ0UsXHJcbiAgICAgICAgICAgICcvJyxcclxuICAgICAgICAgICAgcnBjTmFtZSxcclxuICAgICAgICAgICAgJy9jaGFubmVsJ1xyXG4gICAgICAgIF07XHJcbiAgICAgICAgdmFyIHdlYmNoYW5uZWxUcmFuc3BvcnQgPSB3ZWJjaGFubmVsV3JhcHBlci5jcmVhdGVXZWJDaGFubmVsVHJhbnNwb3J0KCk7XHJcbiAgICAgICAgdmFyIHJlcXVlc3QgPSB7XHJcbiAgICAgICAgICAgIC8vIEJhY2tncm91bmQgY2hhbm5lbCB0ZXN0IGF2b2lkcyB0aGUgaW5pdGlhbCB0d28gdGVzdCBjYWxscyBhbmQgZGVjcmVhc2VzXHJcbiAgICAgICAgICAgIC8vIGluaXRpYWwgY29sZCBzdGFydCB0aW1lLlxyXG4gICAgICAgICAgICAvLyBUT0RPKGRpbW9uZCk6IHdlbmJvekAgbWVudGlvbmVkIHRoaXMgbWlnaHQgYWZmZWN0IHVzZSB3aXRoIHByb3hpZXMgYW5kXHJcbiAgICAgICAgICAgIC8vIHdlIHNob3VsZCBtb25pdG9yIGNsb3NlbHkgZm9yIGFueSByZXBvcnRzLlxyXG4gICAgICAgICAgICBiYWNrZ3JvdW5kQ2hhbm5lbFRlc3Q6IHRydWUsXHJcbiAgICAgICAgICAgIC8vIFJlcXVpcmVkIGZvciBiYWNrZW5kIHN0aWNraW5lc3MsIHJvdXRpbmcgYmVoYXZpb3IgaXMgYmFzZWQgb24gdGhpc1xyXG4gICAgICAgICAgICAvLyBwYXJhbWV0ZXIuXHJcbiAgICAgICAgICAgIGh0dHBTZXNzaW9uSWRQYXJhbTogJ2dzZXNzaW9uaWQnLFxyXG4gICAgICAgICAgICBpbml0TWVzc2FnZUhlYWRlcnM6IHt9LFxyXG4gICAgICAgICAgICBtZXNzYWdlVXJsUGFyYW1zOiB7XHJcbiAgICAgICAgICAgICAgICAvLyBUaGlzIHBhcmFtIGlzIHVzZWQgdG8gaW1wcm92ZSByb3V0aW5nIGFuZCBwcm9qZWN0IGlzb2xhdGlvbiBieSB0aGVcclxuICAgICAgICAgICAgICAgIC8vIGJhY2tlbmQgYW5kIG11c3QgYmUgaW5jbHVkZWQgaW4gZXZlcnkgcmVxdWVzdC5cclxuICAgICAgICAgICAgICAgIGRhdGFiYXNlOiBcInByb2plY3RzL1wiICsgdGhpcy5kYXRhYmFzZUlkLnByb2plY3RJZCArIFwiL2RhdGFiYXNlcy9cIiArIHRoaXMuZGF0YWJhc2VJZC5kYXRhYmFzZVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBzZW5kUmF3SnNvbjogdHJ1ZSxcclxuICAgICAgICAgICAgc3VwcG9ydHNDcm9zc0RvbWFpblhocjogdHJ1ZSxcclxuICAgICAgICAgICAgaW50ZXJuYWxDaGFubmVsUGFyYW1zOiB7XHJcbiAgICAgICAgICAgICAgICAvLyBPdmVycmlkZSB0aGUgZGVmYXVsdCB0aW1lb3V0IChyYW5kb21pemVkIGJldHdlZW4gMTAtMjAgc2Vjb25kcykgc2luY2VcclxuICAgICAgICAgICAgICAgIC8vIGEgbGFyZ2Ugd3JpdGUgYmF0Y2ggb24gYSBzbG93IGludGVybmV0IGNvbm5lY3Rpb24gbWF5IHRha2UgYSBsb25nXHJcbiAgICAgICAgICAgICAgICAvLyB0aW1lIHRvIHNlbmQgdG8gdGhlIGJhY2tlbmQuIFJhdGhlciB0aGFuIGhhdmUgV2ViQ2hhbm5lbCBpbXBvc2UgYVxyXG4gICAgICAgICAgICAgICAgLy8gdGlnaHQgdGltZW91dCB3aGljaCBjb3VsZCBsZWFkIHRvIGluZmluaXRlIHRpbWVvdXRzIGFuZCByZXRyaWVzLCB3ZVxyXG4gICAgICAgICAgICAgICAgLy8gc2V0IGl0IHZlcnkgbGFyZ2UgKDUtMTAgbWludXRlcykgYW5kIHJlbHkgb24gdGhlIGJyb3dzZXIncyBidWlsdGluXHJcbiAgICAgICAgICAgICAgICAvLyB0aW1lb3V0cyB0byBraWNrIGluIGlmIHRoZSByZXF1ZXN0IGlzbid0IHdvcmtpbmcuXHJcbiAgICAgICAgICAgICAgICBmb3J3YXJkQ2hhbm5lbFJlcXVlc3RUaW1lb3V0TXM6IDEwICogNjAgKiAxMDAwXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGZvcmNlTG9uZ1BvbGxpbmc6IHRoaXMuZm9yY2VMb25nUG9sbGluZ1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5tb2RpZnlIZWFkZXJzRm9yUmVxdWVzdChyZXF1ZXN0LmluaXRNZXNzYWdlSGVhZGVycywgdG9rZW4pO1xyXG4gICAgICAgIC8vIFNlbmRpbmcgdGhlIGN1c3RvbSBoZWFkZXJzIHdlIGp1c3QgYWRkZWQgdG8gcmVxdWVzdC5pbml0TWVzc2FnZUhlYWRlcnNcclxuICAgICAgICAvLyAoQXV0aG9yaXphdGlvbiwgZXRjLikgd2lsbCB0cmlnZ2VyIHRoZSBicm93c2VyIHRvIG1ha2UgYSBDT1JTIHByZWZsaWdodFxyXG4gICAgICAgIC8vIHJlcXVlc3QgYmVjYXVzZSB0aGUgWEhSIHdpbGwgbm8gbG9uZ2VyIG1lZXQgdGhlIGNyaXRlcmlhIGZvciBhIFwic2ltcGxlXCJcclxuICAgICAgICAvLyBDT1JTIHJlcXVlc3Q6XHJcbiAgICAgICAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSFRUUC9DT1JTI1NpbXBsZV9yZXF1ZXN0c1xyXG4gICAgICAgIC8vXHJcbiAgICAgICAgLy8gVGhlcmVmb3JlIHRvIGF2b2lkIHRoZSBDT1JTIHByZWZsaWdodCByZXF1ZXN0IChhbiBleHRyYSBuZXR3b3JrXHJcbiAgICAgICAgLy8gcm91bmR0cmlwKSwgd2UgdXNlIHRoZSBodHRwSGVhZGVyc092ZXJ3cml0ZVBhcmFtIG9wdGlvbiB0byBzcGVjaWZ5IHRoYXRcclxuICAgICAgICAvLyB0aGUgaGVhZGVycyBzaG91bGQgaW5zdGVhZCBiZSBlbmNvZGVkIGludG8gYSBzcGVjaWFsIFwiJGh0dHBIZWFkZXJzXCIgcXVlcnlcclxuICAgICAgICAvLyBwYXJhbWV0ZXIsIHdoaWNoIGlzIHJlY29nbml6ZWQgYnkgdGhlIHdlYmNoYW5uZWwgYmFja2VuZC4gVGhpcyBpc1xyXG4gICAgICAgIC8vIGZvcm1hbGx5IGRlZmluZWQgaGVyZTpcclxuICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vZ29vZ2xlL2Nsb3N1cmUtbGlicmFyeS9ibG9iL2IwZTE4MTViMTNmYjkyYTQ2ZDdjOWIzYzMwZGU1ZDZhMzk2YTMyNDUvY2xvc3VyZS9nb29nL25ldC9ycGMvaHR0cGNvcnMuanMjTDMyXHJcbiAgICAgICAgLy9cclxuICAgICAgICAvLyBCdXQgZm9yIHNvbWUgdW5jbGVhciByZWFzb24gKHNlZVxyXG4gICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9maXJlYmFzZS9maXJlYmFzZS1qcy1zZGsvaXNzdWVzLzcwMyksIHRoaXMgYnJlYWtzXHJcbiAgICAgICAgLy8gUmVhY3ROYXRpdmUgYW5kIHNvIHdlIGV4Y2x1ZGUgaXQsIHdoaWNoIGp1c3QgbWVhbnMgUmVhY3ROYXRpdmUgbWF5IGJlXHJcbiAgICAgICAgLy8gc3ViamVjdCB0byB0aGUgZXh0cmEgbmV0d29yayByb3VuZHRyaXAgZm9yIENPUlMgcHJlZmxpZ2h0LlxyXG4gICAgICAgIGlmICghdXRpbC5pc1JlYWN0TmF0aXZlKCkpIHtcclxuICAgICAgICAgICAgcmVxdWVzdC5odHRwSGVhZGVyc092ZXJ3cml0ZVBhcmFtID0gJyRodHRwSGVhZGVycyc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciB1cmwgPSB1cmxQYXJ0cy5qb2luKCcnKTtcclxuICAgICAgICBkZWJ1ZyhMT0dfVEFHJGQsICdDcmVhdGluZyBXZWJDaGFubmVsOiAnICsgdXJsICsgJyAnICsgcmVxdWVzdCk7XHJcbiAgICAgICAgdmFyIGNoYW5uZWwgPSB3ZWJjaGFubmVsVHJhbnNwb3J0LmNyZWF0ZVdlYkNoYW5uZWwodXJsLCByZXF1ZXN0KTtcclxuICAgICAgICAvLyBXZWJDaGFubmVsIHN1cHBvcnRzIHNlbmRpbmcgdGhlIGZpcnN0IG1lc3NhZ2Ugd2l0aCB0aGUgaGFuZHNoYWtlIC0gc2F2aW5nXHJcbiAgICAgICAgLy8gYSBuZXR3b3JrIHJvdW5kIHRyaXAuIEhvd2V2ZXIsIGl0IHdpbGwgaGF2ZSB0byBjYWxsIHNlbmQgaW4gdGhlIHNhbWVcclxuICAgICAgICAvLyBKUyBldmVudCBsb29wIGFzIG9wZW4uIEluIG9yZGVyIHRvIGVuZm9yY2UgdGhpcywgd2UgZGVsYXkgYWN0dWFsbHlcclxuICAgICAgICAvLyBvcGVuaW5nIHRoZSBXZWJDaGFubmVsIHVudGlsIHNlbmQgaXMgY2FsbGVkLiBXaGV0aGVyIHdlIGhhdmUgY2FsbGVkXHJcbiAgICAgICAgLy8gb3BlbiBpcyB0cmFja2VkIHdpdGggdGhpcyB2YXJpYWJsZS5cclxuICAgICAgICB2YXIgb3BlbmVkID0gZmFsc2U7XHJcbiAgICAgICAgLy8gQSBmbGFnIHRvIGRldGVybWluZSB3aGV0aGVyIHRoZSBzdHJlYW0gd2FzIGNsb3NlZCAoYnkgdXMgb3IgdGhyb3VnaCBhblxyXG4gICAgICAgIC8vIGVycm9yL2Nsb3NlIGV2ZW50KSB0byBhdm9pZCBkZWxpdmVyaW5nIG11bHRpcGxlIGNsb3NlIGV2ZW50cyBvciBzZW5kaW5nXHJcbiAgICAgICAgLy8gb24gYSBjbG9zZWQgc3RyZWFtXHJcbiAgICAgICAgdmFyIGNsb3NlZCA9IGZhbHNlO1xyXG4gICAgICAgIHZhciBzdHJlYW1CcmlkZ2UgPSBuZXcgU3RyZWFtQnJpZGdlKHtcclxuICAgICAgICAgICAgc2VuZEZuOiBmdW5jdGlvbiAobXNnKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWNsb3NlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghb3BlbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlYnVnKExPR19UQUckZCwgJ09wZW5pbmcgV2ViQ2hhbm5lbCB0cmFuc3BvcnQuJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5uZWwub3BlbigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvcGVuZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBkZWJ1ZyhMT0dfVEFHJGQsICdXZWJDaGFubmVsIHNlbmRpbmc6JywgbXNnKTtcclxuICAgICAgICAgICAgICAgICAgICBjaGFubmVsLnNlbmQobXNnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlYnVnKExPR19UQUckZCwgJ05vdCBzZW5kaW5nIGJlY2F1c2UgV2ViQ2hhbm5lbCBpcyBjbG9zZWQ6JywgbXNnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgY2xvc2VGbjogZnVuY3Rpb24gKCkgeyByZXR1cm4gY2hhbm5lbC5jbG9zZSgpOyB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gQ2xvc3VyZSBldmVudHMgYXJlIGd1YXJkZWQgYW5kIGV4Y2VwdGlvbnMgYXJlIHN3YWxsb3dlZCwgc28gY2F0Y2ggYW55XHJcbiAgICAgICAgLy8gZXhjZXB0aW9uIGFuZCByZXRocm93IHVzaW5nIGEgc2V0VGltZW91dCBzbyB0aGV5IGJlY29tZSB2aXNpYmxlIGFnYWluLlxyXG4gICAgICAgIC8vIE5vdGUgdGhhdCBldmVudHVhbGx5IHRoaXMgZnVuY3Rpb24gY291bGQgZ28gYXdheSBpZiB3ZSBhcmUgY29uZmlkZW50XHJcbiAgICAgICAgLy8gZW5vdWdoIHRoZSBjb2RlIGlzIGV4Y2VwdGlvbiBmcmVlLlxyXG4gICAgICAgIHZhciB1bmd1YXJkZWRFdmVudExpc3RlbiA9IGZ1bmN0aW9uICh0eXBlLCBmbikge1xyXG4gICAgICAgICAgICAvLyBUT0RPKGRpbW9uZCk6IGNsb3N1cmUgdHlwaW5nIHNlZW1zIGJyb2tlbiBiZWNhdXNlIFdlYkNoYW5uZWwgZG9lc1xyXG4gICAgICAgICAgICAvLyBub3QgaW1wbGVtZW50IGdvb2cuZXZlbnRzLkxpc3RlbmFibGVcclxuICAgICAgICAgICAgY2hhbm5lbC5saXN0ZW4odHlwZSwgZnVuY3Rpb24gKHBhcmFtKSB7XHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZuKHBhcmFtKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IGU7XHJcbiAgICAgICAgICAgICAgICAgICAgfSwgMCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdW5ndWFyZGVkRXZlbnRMaXN0ZW4od2ViY2hhbm5lbFdyYXBwZXIuV2ViQ2hhbm5lbC5FdmVudFR5cGUuT1BFTiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAoIWNsb3NlZCkge1xyXG4gICAgICAgICAgICAgICAgZGVidWcoTE9HX1RBRyRkLCAnV2ViQ2hhbm5lbCB0cmFuc3BvcnQgb3BlbmVkLicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdW5ndWFyZGVkRXZlbnRMaXN0ZW4od2ViY2hhbm5lbFdyYXBwZXIuV2ViQ2hhbm5lbC5FdmVudFR5cGUuQ0xPU0UsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKCFjbG9zZWQpIHtcclxuICAgICAgICAgICAgICAgIGNsb3NlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBkZWJ1ZyhMT0dfVEFHJGQsICdXZWJDaGFubmVsIHRyYW5zcG9ydCBjbG9zZWQnKTtcclxuICAgICAgICAgICAgICAgIHN0cmVhbUJyaWRnZS5jYWxsT25DbG9zZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdW5ndWFyZGVkRXZlbnRMaXN0ZW4od2ViY2hhbm5lbFdyYXBwZXIuV2ViQ2hhbm5lbC5FdmVudFR5cGUuRVJST1IsIGZ1bmN0aW9uIChlcnIpIHtcclxuICAgICAgICAgICAgaWYgKCFjbG9zZWQpIHtcclxuICAgICAgICAgICAgICAgIGNsb3NlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBkZWJ1ZyhMT0dfVEFHJGQsICdXZWJDaGFubmVsIHRyYW5zcG9ydCBlcnJvcmVkOicsIGVycik7XHJcbiAgICAgICAgICAgICAgICBzdHJlYW1CcmlkZ2UuY2FsbE9uQ2xvc2UobmV3IEZpcmVzdG9yZUVycm9yKENvZGUuVU5BVkFJTEFCTEUsICdUaGUgb3BlcmF0aW9uIGNvdWxkIG5vdCBiZSBjb21wbGV0ZWQnKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICB1bmd1YXJkZWRFdmVudExpc3Rlbih3ZWJjaGFubmVsV3JhcHBlci5XZWJDaGFubmVsLkV2ZW50VHlwZS5NRVNTQUdFLCBmdW5jdGlvbiAobXNnKSB7XHJcbiAgICAgICAgICAgIHZhciBfYTtcclxuICAgICAgICAgICAgaWYgKCFjbG9zZWQpIHtcclxuICAgICAgICAgICAgICAgIHZhciBtc2dEYXRhID0gbXNnLmRhdGFbMF07XHJcbiAgICAgICAgICAgICAgICBhc3NlcnQoISFtc2dEYXRhLCAnR290IGEgd2ViY2hhbm5lbCBtZXNzYWdlIHdpdGhvdXQgZGF0YS4nKTtcclxuICAgICAgICAgICAgICAgIC8vIFRPRE8oYi8zNTE0Mzg5MSk6IFRoZXJlIGlzIGEgYnVnIGluIE9uZSBQbGF0Zm9ybSB0aGF0IGNhdXNlZCBlcnJvcnNcclxuICAgICAgICAgICAgICAgIC8vIChhbmQgb25seSBlcnJvcnMpIHRvIGJlIHdyYXBwZWQgaW4gYW4gZXh0cmEgYXJyYXkuIFRvIGJlIGZvcndhcmRcclxuICAgICAgICAgICAgICAgIC8vIGNvbXBhdGlibGUgd2l0aCB0aGUgYnVnIHdlIG5lZWQgdG8gY2hlY2sgZWl0aGVyIGNvbmRpdGlvbi4gVGhlIGxhdHRlclxyXG4gICAgICAgICAgICAgICAgLy8gY2FuIGJlIHJlbW92ZWQgb25jZSB0aGUgZml4IGhhcyBiZWVuIHJvbGxlZCBvdXQuXHJcbiAgICAgICAgICAgICAgICAvLyBVc2UgYW55IGJlY2F1c2UgbXNnRGF0YS5lcnJvciBpcyBub3QgdHlwZWQuXHJcbiAgICAgICAgICAgICAgICB2YXIgbXNnRGF0YU9yRXJyb3IgPSBtc2dEYXRhO1xyXG4gICAgICAgICAgICAgICAgdmFyIGVycm9yID0gbXNnRGF0YU9yRXJyb3IuZXJyb3IgfHwgKChfYSA9IG1zZ0RhdGFPckVycm9yWzBdKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVidWcoTE9HX1RBRyRkLCAnV2ViQ2hhbm5lbCByZWNlaXZlZCBlcnJvcjonLCBlcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gZXJyb3Iuc3RhdHVzIHdpbGwgYmUgYSBzdHJpbmcgbGlrZSAnT0snIG9yICdOT1RfRk9VTkQnLlxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBzdGF0dXNfMiA9IGVycm9yLnN0YXR1cztcclxuICAgICAgICAgICAgICAgICAgICB2YXIgY29kZSA9IG1hcENvZGVGcm9tUnBjU3RhdHVzKHN0YXR1c18yKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbWVzc2FnZSA9IGVycm9yLm1lc3NhZ2U7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvZGUgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlID0gQ29kZS5JTlRFUk5BTDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSA9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnVW5rbm93biBlcnJvciBzdGF0dXM6ICcgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1c18yICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnIHdpdGggbWVzc2FnZSAnICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvci5tZXNzYWdlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAvLyBNYXJrIGNsb3NlZCBzbyBubyBmdXJ0aGVyIGV2ZW50cyBhcmUgcHJvcGFnYXRlZFxyXG4gICAgICAgICAgICAgICAgICAgIGNsb3NlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgc3RyZWFtQnJpZGdlLmNhbGxPbkNsb3NlKG5ldyBGaXJlc3RvcmVFcnJvcihjb2RlLCBtZXNzYWdlKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY2hhbm5lbC5jbG9zZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVidWcoTE9HX1RBRyRkLCAnV2ViQ2hhbm5lbCByZWNlaXZlZDonLCBtc2dEYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICBzdHJlYW1CcmlkZ2UuY2FsbE9uTWVzc2FnZShtc2dEYXRhKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAvLyBUZWNobmljYWxseSB3ZSBjb3VsZC9zaG91bGQgd2FpdCBmb3IgdGhlIFdlYkNoYW5uZWwgb3BlbmVkIGV2ZW50LFxyXG4gICAgICAgICAgICAvLyBidXQgYmVjYXVzZSB3ZSB3YW50IHRvIHNlbmQgdGhlIGZpcnN0IG1lc3NhZ2Ugd2l0aCB0aGUgV2ViQ2hhbm5lbFxyXG4gICAgICAgICAgICAvLyBoYW5kc2hha2Ugd2UgcHJldGVuZCB0aGUgY2hhbm5lbCBvcGVuZWQgaGVyZSAoYXN5bmNocm9ub3VzbHkpLCBhbmRcclxuICAgICAgICAgICAgLy8gdGhlbiBkZWxheSB0aGUgYWN0dWFsIG9wZW4gdW50aWwgdGhlIGZpcnN0IG1lc3NhZ2UgaXMgc2VudC5cclxuICAgICAgICAgICAgc3RyZWFtQnJpZGdlLmNhbGxPbk9wZW4oKTtcclxuICAgICAgICB9LCAwKTtcclxuICAgICAgICByZXR1cm4gc3RyZWFtQnJpZGdlO1xyXG4gICAgfTtcclxuICAgIC8vIHZpc2libGUgZm9yIHRlc3RpbmdcclxuICAgIFdlYkNoYW5uZWxDb25uZWN0aW9uLnByb3RvdHlwZS5tYWtlVXJsID0gZnVuY3Rpb24gKHJwY05hbWUpIHtcclxuICAgICAgICB2YXIgdXJsUnBjTmFtZSA9IFJQQ19OQU1FX1JFU1RfTUFQUElOR1tycGNOYW1lXTtcclxuICAgICAgICBhc3NlcnQodXJsUnBjTmFtZSAhPT0gdW5kZWZpbmVkLCAnVW5rbm93biBSRVNUIG1hcHBpbmcgZm9yOiAnICsgcnBjTmFtZSk7XHJcbiAgICAgICAgcmV0dXJuICh0aGlzLmJhc2VVcmwgK1xyXG4gICAgICAgICAgICAnLycgK1xyXG4gICAgICAgICAgICBSUENfVVJMX1ZFUlNJT04gK1xyXG4gICAgICAgICAgICAnL3Byb2plY3RzLycgK1xyXG4gICAgICAgICAgICB0aGlzLmRhdGFiYXNlSWQucHJvamVjdElkICtcclxuICAgICAgICAgICAgJy9kYXRhYmFzZXMvJyArXHJcbiAgICAgICAgICAgIHRoaXMuZGF0YWJhc2VJZC5kYXRhYmFzZSArXHJcbiAgICAgICAgICAgICcvZG9jdW1lbnRzOicgK1xyXG4gICAgICAgICAgICB1cmxScGNOYW1lKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gV2ViQ2hhbm5lbENvbm5lY3Rpb247XHJcbn0oKSk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG52YXIgQnJvd3NlclBsYXRmb3JtID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gQnJvd3NlclBsYXRmb3JtKCkge1xyXG4gICAgICAgIHRoaXMuZW1wdHlCeXRlU3RyaW5nID0gJyc7XHJcbiAgICAgICAgdGhpcy5iYXNlNjRBdmFpbGFibGUgPSB0eXBlb2YgYXRvYiAhPT0gJ3VuZGVmaW5lZCc7XHJcbiAgICB9XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQnJvd3NlclBsYXRmb3JtLnByb3RvdHlwZSwgXCJkb2N1bWVudFwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0eXBlb2YgZG9jdW1lbnQgIT09ICd1bmRlZmluZWQnID8gZG9jdW1lbnQgOiBudWxsO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEJyb3dzZXJQbGF0Zm9ybS5wcm90b3R5cGUsIFwid2luZG93XCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnID8gd2luZG93IDogbnVsbDtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIEJyb3dzZXJQbGF0Zm9ybS5wcm90b3R5cGUubG9hZENvbm5lY3Rpb24gPSBmdW5jdGlvbiAoZGF0YWJhc2VJbmZvKSB7XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShuZXcgV2ViQ2hhbm5lbENvbm5lY3Rpb24oZGF0YWJhc2VJbmZvKSk7XHJcbiAgICB9O1xyXG4gICAgQnJvd3NlclBsYXRmb3JtLnByb3RvdHlwZS5uZXdDb25uZWN0aXZpdHlNb25pdG9yID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmIChCcm93c2VyQ29ubmVjdGl2aXR5TW9uaXRvci5pc0F2YWlsYWJsZSgpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgQnJvd3NlckNvbm5lY3Rpdml0eU1vbml0b3IoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgTm9vcENvbm5lY3Rpdml0eU1vbml0b3IoKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgQnJvd3NlclBsYXRmb3JtLnByb3RvdHlwZS5uZXdTZXJpYWxpemVyID0gZnVuY3Rpb24gKGRhdGFiYXNlSWQpIHtcclxuICAgICAgICByZXR1cm4gbmV3IEpzb25Qcm90b1NlcmlhbGl6ZXIoZGF0YWJhc2VJZCwgeyB1c2VQcm90bzNKc29uOiB0cnVlIH0pO1xyXG4gICAgfTtcclxuICAgIEJyb3dzZXJQbGF0Zm9ybS5wcm90b3R5cGUuZm9ybWF0SlNPTiA9IGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh2YWx1ZSk7XHJcbiAgICB9O1xyXG4gICAgQnJvd3NlclBsYXRmb3JtLnByb3RvdHlwZS5hdG9iID0gZnVuY3Rpb24gKGVuY29kZWQpIHtcclxuICAgICAgICByZXR1cm4gYXRvYihlbmNvZGVkKTtcclxuICAgIH07XHJcbiAgICBCcm93c2VyUGxhdGZvcm0ucHJvdG90eXBlLmJ0b2EgPSBmdW5jdGlvbiAocmF3KSB7XHJcbiAgICAgICAgcmV0dXJuIGJ0b2EocmF3KTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gQnJvd3NlclBsYXRmb3JtO1xyXG59KCkpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFRoaXMgY29kZSBuZWVkcyB0byBydW4gYmVmb3JlIEZpcmVzdG9yZSBpcyB1c2VkLiBUaGlzIGNhbiBiZSBhY2hpZXZlZCBpblxyXG4gKiBzZXZlcmFsIHdheXM6XHJcbiAqICAgMSkgVGhyb3VnaCB0aGUgSlNDb21waWxlciBjb21waWxpbmcgdGhpcyBjb2RlIGFuZCB0aGVuIChhdXRvbWF0aWNhbGx5KVxyXG4gKiAgICAgIGV4ZWN1dGluZyBpdCBiZWZvcmUgZXhwb3J0aW5nIHRoZSBGaXJlc3RvcmUgc3ltYm9scy5cclxuICogICAyKSBUaHJvdWdoIGltcG9ydGluZyB0aGlzIG1vZHVsZSBmaXJzdCBpbiBhIEZpcmVzdG9yZSBtYWluIG1vZHVsZVxyXG4gKi9cclxuUGxhdGZvcm1TdXBwb3J0LnNldFBsYXRmb3JtKG5ldyBCcm93c2VyUGxhdGZvcm0oKSk7XG5cbnZhciBuYW1lID0gXCJAZmlyZWJhc2UvZmlyZXN0b3JlXCI7XG52YXIgdmVyc2lvbiA9IFwiMS45LjFcIjtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIHJlZ2lzdGVyRmlyZXN0b3JlKGluc3RhbmNlKSB7XHJcbiAgICBjb25maWd1cmVGb3JGaXJlYmFzZShpbnN0YW5jZSk7XHJcbiAgICBpbnN0YW5jZS5yZWdpc3RlclZlcnNpb24obmFtZSwgdmVyc2lvbik7XHJcbn1cclxucmVnaXN0ZXJGaXJlc3RvcmUoZmlyZWJhc2UpO1xuXG5leHBvcnRzLnJlZ2lzdGVyRmlyZXN0b3JlID0gcmVnaXN0ZXJGaXJlc3RvcmU7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5janMuanMubWFwXG4iLCIvLyBzaGltIGZvciB1c2luZyBwcm9jZXNzIGluIGJyb3dzZXJcbnZhciBwcm9jZXNzID0gbW9kdWxlLmV4cG9ydHMgPSB7fTtcblxuLy8gY2FjaGVkIGZyb20gd2hhdGV2ZXIgZ2xvYmFsIGlzIHByZXNlbnQgc28gdGhhdCB0ZXN0IHJ1bm5lcnMgdGhhdCBzdHViIGl0XG4vLyBkb24ndCBicmVhayB0aGluZ3MuICBCdXQgd2UgbmVlZCB0byB3cmFwIGl0IGluIGEgdHJ5IGNhdGNoIGluIGNhc2UgaXQgaXNcbi8vIHdyYXBwZWQgaW4gc3RyaWN0IG1vZGUgY29kZSB3aGljaCBkb2Vzbid0IGRlZmluZSBhbnkgZ2xvYmFscy4gIEl0J3MgaW5zaWRlIGFcbi8vIGZ1bmN0aW9uIGJlY2F1c2UgdHJ5L2NhdGNoZXMgZGVvcHRpbWl6ZSBpbiBjZXJ0YWluIGVuZ2luZXMuXG5cbnZhciBjYWNoZWRTZXRUaW1lb3V0O1xudmFyIGNhY2hlZENsZWFyVGltZW91dDtcblxuZnVuY3Rpb24gZGVmYXVsdFNldFRpbW91dCgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3NldFRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQnKTtcbn1cbmZ1bmN0aW9uIGRlZmF1bHRDbGVhclRpbWVvdXQgKCkge1xuICAgIHRocm93IG5ldyBFcnJvcignY2xlYXJUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkJyk7XG59XG4oZnVuY3Rpb24gKCkge1xuICAgIHRyeSB7XG4gICAgICAgIGlmICh0eXBlb2Ygc2V0VGltZW91dCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IGRlZmF1bHRTZXRUaW1vdXQ7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIGlmICh0eXBlb2YgY2xlYXJUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBjbGVhclRpbWVvdXQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBkZWZhdWx0Q2xlYXJUaW1lb3V0O1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBkZWZhdWx0Q2xlYXJUaW1lb3V0O1xuICAgIH1cbn0gKCkpXG5mdW5jdGlvbiBydW5UaW1lb3V0KGZ1bikge1xuICAgIGlmIChjYWNoZWRTZXRUaW1lb3V0ID09PSBzZXRUaW1lb3V0KSB7XG4gICAgICAgIC8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9uc1xuICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApO1xuICAgIH1cbiAgICAvLyBpZiBzZXRUaW1lb3V0IHdhc24ndCBhdmFpbGFibGUgYnV0IHdhcyBsYXR0ZXIgZGVmaW5lZFxuICAgIGlmICgoY2FjaGVkU2V0VGltZW91dCA9PT0gZGVmYXVsdFNldFRpbW91dCB8fCAhY2FjaGVkU2V0VGltZW91dCkgJiYgc2V0VGltZW91dCkge1xuICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcbiAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gd2hlbiB3aGVuIHNvbWVib2R5IGhhcyBzY3Jld2VkIHdpdGggc2V0VGltZW91dCBidXQgbm8gSS5FLiBtYWRkbmVzc1xuICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dChmdW4sIDApO1xuICAgIH0gY2F0Y2goZSl7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBXaGVuIHdlIGFyZSBpbiBJLkUuIGJ1dCB0aGUgc2NyaXB0IGhhcyBiZWVuIGV2YWxlZCBzbyBJLkUuIGRvZXNuJ3QgdHJ1c3QgdGhlIGdsb2JhbCBvYmplY3Qgd2hlbiBjYWxsZWQgbm9ybWFsbHlcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwobnVsbCwgZnVuLCAwKTtcbiAgICAgICAgfSBjYXRjaChlKXtcbiAgICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmUgYnV0IHdoZW4gaXQncyBhIHZlcnNpb24gb2YgSS5FLiB0aGF0IG11c3QgaGF2ZSB0aGUgZ2xvYmFsIG9iamVjdCBmb3IgJ3RoaXMnLCBob3BmdWxseSBvdXIgY29udGV4dCBjb3JyZWN0IG90aGVyd2lzZSBpdCB3aWxsIHRocm93IGEgZ2xvYmFsIGVycm9yXG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dC5jYWxsKHRoaXMsIGZ1biwgMCk7XG4gICAgICAgIH1cbiAgICB9XG5cblxufVxuZnVuY3Rpb24gcnVuQ2xlYXJUaW1lb3V0KG1hcmtlcikge1xuICAgIGlmIChjYWNoZWRDbGVhclRpbWVvdXQgPT09IGNsZWFyVGltZW91dCkge1xuICAgICAgICAvL25vcm1hbCBlbnZpcm9tZW50cyBpbiBzYW5lIHNpdHVhdGlvbnNcbiAgICAgICAgcmV0dXJuIGNsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH1cbiAgICAvLyBpZiBjbGVhclRpbWVvdXQgd2Fzbid0IGF2YWlsYWJsZSBidXQgd2FzIGxhdHRlciBkZWZpbmVkXG4gICAgaWYgKChjYWNoZWRDbGVhclRpbWVvdXQgPT09IGRlZmF1bHRDbGVhclRpbWVvdXQgfHwgIWNhY2hlZENsZWFyVGltZW91dCkgJiYgY2xlYXJUaW1lb3V0KSB7XG4gICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcbiAgICAgICAgcmV0dXJuIGNsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICAvLyB3aGVuIHdoZW4gc29tZWJvZHkgaGFzIHNjcmV3ZWQgd2l0aCBzZXRUaW1lb3V0IGJ1dCBubyBJLkUuIG1hZGRuZXNzXG4gICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9IGNhdGNoIChlKXtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFdoZW4gd2UgYXJlIGluIEkuRS4gYnV0IHRoZSBzY3JpcHQgaGFzIGJlZW4gZXZhbGVkIHNvIEkuRS4gZG9lc24ndCAgdHJ1c3QgdGhlIGdsb2JhbCBvYmplY3Qgd2hlbiBjYWxsZWQgbm9ybWFsbHlcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQuY2FsbChudWxsLCBtYXJrZXIpO1xuICAgICAgICB9IGNhdGNoIChlKXtcbiAgICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmUgYnV0IHdoZW4gaXQncyBhIHZlcnNpb24gb2YgSS5FLiB0aGF0IG11c3QgaGF2ZSB0aGUgZ2xvYmFsIG9iamVjdCBmb3IgJ3RoaXMnLCBob3BmdWxseSBvdXIgY29udGV4dCBjb3JyZWN0IG90aGVyd2lzZSBpdCB3aWxsIHRocm93IGEgZ2xvYmFsIGVycm9yLlxuICAgICAgICAgICAgLy8gU29tZSB2ZXJzaW9ucyBvZiBJLkUuIGhhdmUgZGlmZmVyZW50IHJ1bGVzIGZvciBjbGVhclRpbWVvdXQgdnMgc2V0VGltZW91dFxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKHRoaXMsIG1hcmtlcik7XG4gICAgICAgIH1cbiAgICB9XG5cblxuXG59XG52YXIgcXVldWUgPSBbXTtcbnZhciBkcmFpbmluZyA9IGZhbHNlO1xudmFyIGN1cnJlbnRRdWV1ZTtcbnZhciBxdWV1ZUluZGV4ID0gLTE7XG5cbmZ1bmN0aW9uIGNsZWFuVXBOZXh0VGljaygpIHtcbiAgICBpZiAoIWRyYWluaW5nIHx8ICFjdXJyZW50UXVldWUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBkcmFpbmluZyA9IGZhbHNlO1xuICAgIGlmIChjdXJyZW50UXVldWUubGVuZ3RoKSB7XG4gICAgICAgIHF1ZXVlID0gY3VycmVudFF1ZXVlLmNvbmNhdChxdWV1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuICAgIH1cbiAgICBpZiAocXVldWUubGVuZ3RoKSB7XG4gICAgICAgIGRyYWluUXVldWUoKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGRyYWluUXVldWUoKSB7XG4gICAgaWYgKGRyYWluaW5nKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIHRpbWVvdXQgPSBydW5UaW1lb3V0KGNsZWFuVXBOZXh0VGljayk7XG4gICAgZHJhaW5pbmcgPSB0cnVlO1xuXG4gICAgdmFyIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB3aGlsZShsZW4pIHtcbiAgICAgICAgY3VycmVudFF1ZXVlID0gcXVldWU7XG4gICAgICAgIHF1ZXVlID0gW107XG4gICAgICAgIHdoaWxlICgrK3F1ZXVlSW5kZXggPCBsZW4pIHtcbiAgICAgICAgICAgIGlmIChjdXJyZW50UXVldWUpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50UXVldWVbcXVldWVJbmRleF0ucnVuKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuICAgICAgICBsZW4gPSBxdWV1ZS5sZW5ndGg7XG4gICAgfVxuICAgIGN1cnJlbnRRdWV1ZSA9IG51bGw7XG4gICAgZHJhaW5pbmcgPSBmYWxzZTtcbiAgICBydW5DbGVhclRpbWVvdXQodGltZW91dCk7XG59XG5cbnByb2Nlc3MubmV4dFRpY2sgPSBmdW5jdGlvbiAoZnVuKSB7XG4gICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCAtIDEpO1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkge1xuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgYXJnc1tpIC0gMV0gPSBhcmd1bWVudHNbaV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcXVldWUucHVzaChuZXcgSXRlbShmdW4sIGFyZ3MpKTtcbiAgICBpZiAocXVldWUubGVuZ3RoID09PSAxICYmICFkcmFpbmluZykge1xuICAgICAgICBydW5UaW1lb3V0KGRyYWluUXVldWUpO1xuICAgIH1cbn07XG5cbi8vIHY4IGxpa2VzIHByZWRpY3RpYmxlIG9iamVjdHNcbmZ1bmN0aW9uIEl0ZW0oZnVuLCBhcnJheSkge1xuICAgIHRoaXMuZnVuID0gZnVuO1xuICAgIHRoaXMuYXJyYXkgPSBhcnJheTtcbn1cbkl0ZW0ucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmZ1bi5hcHBseShudWxsLCB0aGlzLmFycmF5KTtcbn07XG5wcm9jZXNzLnRpdGxlID0gJ2Jyb3dzZXInO1xucHJvY2Vzcy5icm93c2VyID0gdHJ1ZTtcbnByb2Nlc3MuZW52ID0ge307XG5wcm9jZXNzLmFyZ3YgPSBbXTtcbnByb2Nlc3MudmVyc2lvbiA9ICcnOyAvLyBlbXB0eSBzdHJpbmcgdG8gYXZvaWQgcmVnZXhwIGlzc3Vlc1xucHJvY2Vzcy52ZXJzaW9ucyA9IHt9O1xuXG5mdW5jdGlvbiBub29wKCkge31cblxucHJvY2Vzcy5vbiA9IG5vb3A7XG5wcm9jZXNzLmFkZExpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3Mub25jZSA9IG5vb3A7XG5wcm9jZXNzLm9mZiA9IG5vb3A7XG5wcm9jZXNzLnJlbW92ZUxpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlQWxsTGlzdGVuZXJzID0gbm9vcDtcbnByb2Nlc3MuZW1pdCA9IG5vb3A7XG5wcm9jZXNzLnByZXBlbmRMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLnByZXBlbmRPbmNlTGlzdGVuZXIgPSBub29wO1xuXG5wcm9jZXNzLmxpc3RlbmVycyA9IGZ1bmN0aW9uIChuYW1lKSB7IHJldHVybiBbXSB9XG5cbnByb2Nlc3MuYmluZGluZyA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmJpbmRpbmcgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcblxucHJvY2Vzcy5jd2QgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAnLycgfTtcbnByb2Nlc3MuY2hkaXIgPSBmdW5jdGlvbiAoZGlyKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmNoZGlyIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbn07XG5wcm9jZXNzLnVtYXNrID0gZnVuY3Rpb24oKSB7IHJldHVybiAwOyB9O1xuIiwidmFyIGNvbW1vbmpzR2xvYmFsID0gdHlwZW9mIGdsb2JhbFRoaXMgIT09ICd1bmRlZmluZWQnID8gZ2xvYmFsVGhpcyA6IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnID8gd2luZG93IDogdHlwZW9mIGdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcgPyBnbG9iYWwgOiB0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcgPyBzZWxmIDoge307XG5cbnZhciBnLGdvb2c9Z29vZ3x8e30saz1jb21tb25qc0dsb2JhbDtmdW5jdGlvbiBtKGEpe3JldHVybiBcInN0cmluZ1wiPT10eXBlb2YgYX1mdW5jdGlvbiBhYShhKXtyZXR1cm4gXCJudW1iZXJcIj09dHlwZW9mIGF9ZnVuY3Rpb24gbihhLGIpe2E9YS5zcGxpdChcIi5cIik7Yj1ifHxrO2Zvcih2YXIgYz0wO2M8YS5sZW5ndGg7YysrKWlmKGI9YlthW2NdXSxudWxsPT1iKXJldHVybiBudWxsO3JldHVybiBifWZ1bmN0aW9uIGJhKCl7fVxuZnVuY3Rpb24gcChhKXt2YXIgYj10eXBlb2YgYTtpZihcIm9iamVjdFwiPT1iKWlmKGEpe2lmKGEgaW5zdGFuY2VvZiBBcnJheSlyZXR1cm4gXCJhcnJheVwiO2lmKGEgaW5zdGFuY2VvZiBPYmplY3QpcmV0dXJuIGI7dmFyIGM9T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGEpO2lmKFwiW29iamVjdCBXaW5kb3ddXCI9PWMpcmV0dXJuIFwib2JqZWN0XCI7aWYoXCJbb2JqZWN0IEFycmF5XVwiPT1jfHxcIm51bWJlclwiPT10eXBlb2YgYS5sZW5ndGgmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBhLnNwbGljZSYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGEucHJvcGVydHlJc0VudW1lcmFibGUmJiFhLnByb3BlcnR5SXNFbnVtZXJhYmxlKFwic3BsaWNlXCIpKXJldHVybiBcImFycmF5XCI7aWYoXCJbb2JqZWN0IEZ1bmN0aW9uXVwiPT1jfHxcInVuZGVmaW5lZFwiIT10eXBlb2YgYS5jYWxsJiZcInVuZGVmaW5lZFwiIT10eXBlb2YgYS5wcm9wZXJ0eUlzRW51bWVyYWJsZSYmIWEucHJvcGVydHlJc0VudW1lcmFibGUoXCJjYWxsXCIpKXJldHVybiBcImZ1bmN0aW9uXCJ9ZWxzZSByZXR1cm4gXCJudWxsXCI7XG5lbHNlIGlmKFwiZnVuY3Rpb25cIj09YiYmXCJ1bmRlZmluZWRcIj09dHlwZW9mIGEuY2FsbClyZXR1cm4gXCJvYmplY3RcIjtyZXR1cm4gYn1mdW5jdGlvbiBxKGEpe3JldHVybiBcImFycmF5XCI9PXAoYSl9ZnVuY3Rpb24gY2EoYSl7dmFyIGI9cChhKTtyZXR1cm4gXCJhcnJheVwiPT1ifHxcIm9iamVjdFwiPT1iJiZcIm51bWJlclwiPT10eXBlb2YgYS5sZW5ndGh9ZnVuY3Rpb24gcihhKXt2YXIgYj10eXBlb2YgYTtyZXR1cm4gXCJvYmplY3RcIj09YiYmbnVsbCE9YXx8XCJmdW5jdGlvblwiPT1ifXZhciB0PVwiY2xvc3VyZV91aWRfXCIrKDFFOSpNYXRoLnJhbmRvbSgpPj4+MCksZGE9MDtmdW5jdGlvbiBlYShhLGIsYyl7cmV0dXJuIGEuY2FsbC5hcHBseShhLmJpbmQsYXJndW1lbnRzKX1cbmZ1bmN0aW9uIGZhKGEsYixjKXtpZighYSl0aHJvdyBFcnJvcigpO2lmKDI8YXJndW1lbnRzLmxlbmd0aCl7dmFyIGQ9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDIpO3JldHVybiBmdW5jdGlvbigpe3ZhciBlPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyk7QXJyYXkucHJvdG90eXBlLnVuc2hpZnQuYXBwbHkoZSxkKTtyZXR1cm4gYS5hcHBseShiLGUpfX1yZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gYS5hcHBseShiLGFyZ3VtZW50cyl9fWZ1bmN0aW9uIHUoYSxiLGMpe0Z1bmN0aW9uLnByb3RvdHlwZS5iaW5kJiYtMSE9RnVuY3Rpb24ucHJvdG90eXBlLmJpbmQudG9TdHJpbmcoKS5pbmRleE9mKFwibmF0aXZlIGNvZGVcIik/dT1lYTp1PWZhO3JldHVybiB1LmFwcGx5KG51bGwsYXJndW1lbnRzKX1cbmZ1bmN0aW9uIHYoYSxiKXt2YXIgYz1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMSk7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGQ9Yy5zbGljZSgpO2QucHVzaC5hcHBseShkLGFyZ3VtZW50cyk7cmV0dXJuIGEuYXBwbHkodGhpcyxkKX19dmFyIHc9RGF0ZS5ub3d8fGZ1bmN0aW9uKCl7cmV0dXJuICtuZXcgRGF0ZX07ZnVuY3Rpb24geChhLGIpe2Z1bmN0aW9uIGMoKXt9Yy5wcm90b3R5cGU9Yi5wcm90b3R5cGU7YS5OPWIucHJvdG90eXBlO2EucHJvdG90eXBlPW5ldyBjO2EucHJvdG90eXBlLmNvbnN0cnVjdG9yPWE7YS54Yj1mdW5jdGlvbihkLGUsZil7Zm9yKHZhciBoPUFycmF5KGFyZ3VtZW50cy5sZW5ndGgtMiksbD0yO2w8YXJndW1lbnRzLmxlbmd0aDtsKyspaFtsLTJdPWFyZ3VtZW50c1tsXTtyZXR1cm4gYi5wcm90b3R5cGVbZV0uYXBwbHkoZCxoKX07fWZ1bmN0aW9uIHkoKXt0aGlzLmo9dGhpcy5qO3RoaXMuaT10aGlzLmk7fXZhciBoYT0wO3kucHJvdG90eXBlLmo9ITE7eS5wcm90b3R5cGUubGE9ZnVuY3Rpb24oKXtpZighdGhpcy5qJiYodGhpcy5qPSEwLHRoaXMuRygpLDAhPWhhKSl7dmFyIGE9dGhpc1t0XXx8KHRoaXNbdF09KytkYSk7fX07eS5wcm90b3R5cGUuRz1mdW5jdGlvbigpe2lmKHRoaXMuaSlmb3IoO3RoaXMuaS5sZW5ndGg7KXRoaXMuaS5zaGlmdCgpKCk7fTt2YXIgamE9QXJyYXkucHJvdG90eXBlLmluZGV4T2Y/ZnVuY3Rpb24oYSxiKXtyZXR1cm4gQXJyYXkucHJvdG90eXBlLmluZGV4T2YuY2FsbChhLGIsdm9pZCAwKX06ZnVuY3Rpb24oYSxiKXtpZihtKGEpKXJldHVybiBtKGIpJiYxPT1iLmxlbmd0aD9hLmluZGV4T2YoYiwwKTotMTtmb3IodmFyIGM9MDtjPGEubGVuZ3RoO2MrKylpZihjIGluIGEmJmFbY109PT1iKXJldHVybiBjO3JldHVybiAtMX0sbGE9QXJyYXkucHJvdG90eXBlLmZvckVhY2g/ZnVuY3Rpb24oYSxiLGMpe0FycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoYSxiLGMpO306ZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgZD1hLmxlbmd0aCxlPW0oYSk/YS5zcGxpdChcIlwiKTphLGY9MDtmPGQ7ZisrKWYgaW4gZSYmYi5jYWxsKGMsZVtmXSxmLGEpO307XG5mdW5jdGlvbiBtYShhKXthOnt2YXIgYj1uYTtmb3IodmFyIGM9YS5sZW5ndGgsZD1tKGEpP2Euc3BsaXQoXCJcIik6YSxlPTA7ZTxjO2UrKylpZihlIGluIGQmJmIuY2FsbCh2b2lkIDAsZFtlXSxlLGEpKXtiPWU7YnJlYWsgYX1iPS0xO31yZXR1cm4gMD5iP251bGw6bShhKT9hLmNoYXJBdChiKTphW2JdfWZ1bmN0aW9uIG9hKGEpe3JldHVybiBBcnJheS5wcm90b3R5cGUuY29uY2F0LmFwcGx5KFtdLGFyZ3VtZW50cyl9ZnVuY3Rpb24gcGEoYSl7dmFyIGI9YS5sZW5ndGg7aWYoMDxiKXtmb3IodmFyIGM9QXJyYXkoYiksZD0wO2Q8YjtkKyspY1tkXT1hW2RdO3JldHVybiBjfXJldHVybiBbXX1mdW5jdGlvbiBxYShhKXtyZXR1cm4gL15bXFxzXFx4YTBdKiQvLnRlc3QoYSl9dmFyIHJhPVN0cmluZy5wcm90b3R5cGUudHJpbT9mdW5jdGlvbihhKXtyZXR1cm4gYS50cmltKCl9OmZ1bmN0aW9uKGEpe3JldHVybiAvXltcXHNcXHhhMF0qKFtcXHNcXFNdKj8pW1xcc1xceGEwXSokLy5leGVjKGEpWzFdfTtmdW5jdGlvbiB6KGEsYil7cmV0dXJuIC0xIT1hLmluZGV4T2YoYil9ZnVuY3Rpb24gc2EoYSxiKXtyZXR1cm4gYTxiPy0xOmE+Yj8xOjB9dmFyIEE7YTp7dmFyIHRhPWsubmF2aWdhdG9yO2lmKHRhKXt2YXIgdWE9dGEudXNlckFnZW50O2lmKHVhKXtBPXVhO2JyZWFrIGF9fUE9XCJcIjt9ZnVuY3Rpb24gdmEoYSxiLGMpe2Zvcih2YXIgZCBpbiBhKWIuY2FsbChjLGFbZF0sZCxhKTt9ZnVuY3Rpb24gd2EoYSl7dmFyIGI9e30sYztmb3IoYyBpbiBhKWJbY109YVtjXTtyZXR1cm4gYn12YXIgeGE9XCJjb25zdHJ1Y3RvciBoYXNPd25Qcm9wZXJ0eSBpc1Byb3RvdHlwZU9mIHByb3BlcnR5SXNFbnVtZXJhYmxlIHRvTG9jYWxlU3RyaW5nIHRvU3RyaW5nIHZhbHVlT2ZcIi5zcGxpdChcIiBcIik7ZnVuY3Rpb24geWEoYSxiKXtmb3IodmFyIGMsZCxlPTE7ZTxhcmd1bWVudHMubGVuZ3RoO2UrKyl7ZD1hcmd1bWVudHNbZV07Zm9yKGMgaW4gZClhW2NdPWRbY107Zm9yKHZhciBmPTA7Zjx4YS5sZW5ndGg7ZisrKWM9eGFbZl0sT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGQsYykmJihhW2NdPWRbY10pO319ZnVuY3Rpb24gemEoYSl7emFbXCIgXCJdKGEpO3JldHVybiBhfXphW1wiIFwiXT1iYTtmdW5jdGlvbiBBYShhLGIpe3ZhciBjPUJhO3JldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYyxhKT9jW2FdOmNbYV09YihhKX12YXIgQ2E9eihBLFwiT3BlcmFcIiksQj16KEEsXCJUcmlkZW50XCIpfHx6KEEsXCJNU0lFXCIpLERhPXooQSxcIkVkZ2VcIiksRWE9RGF8fEIsRmE9eihBLFwiR2Vja29cIikmJiEoeihBLnRvTG93ZXJDYXNlKCksXCJ3ZWJraXRcIikmJiF6KEEsXCJFZGdlXCIpKSYmISh6KEEsXCJUcmlkZW50XCIpfHx6KEEsXCJNU0lFXCIpKSYmIXooQSxcIkVkZ2VcIiksR2E9eihBLnRvTG93ZXJDYXNlKCksXCJ3ZWJraXRcIikmJiF6KEEsXCJFZGdlXCIpO2Z1bmN0aW9uIEhhKCl7dmFyIGE9ay5kb2N1bWVudDtyZXR1cm4gYT9hLmRvY3VtZW50TW9kZTp2b2lkIDB9dmFyIElhO1xuYTp7dmFyIEphPVwiXCIsS2E9ZnVuY3Rpb24oKXt2YXIgYT1BO2lmKEZhKXJldHVybiAvcnY6KFteXFwpO10rKShcXCl8OykvLmV4ZWMoYSk7aWYoRGEpcmV0dXJuIC9FZGdlXFwvKFtcXGRcXC5dKykvLmV4ZWMoYSk7aWYoQilyZXR1cm4gL1xcYig/Ok1TSUV8cnYpWzogXShbXlxcKTtdKykoXFwpfDspLy5leGVjKGEpO2lmKEdhKXJldHVybiAvV2ViS2l0XFwvKFxcUyspLy5leGVjKGEpO2lmKENhKXJldHVybiAvKD86VmVyc2lvbilbIFxcL10/KFxcUyspLy5leGVjKGEpfSgpO0thJiYoSmE9S2E/S2FbMV06XCJcIik7aWYoQil7dmFyIExhPUhhKCk7aWYobnVsbCE9TGEmJkxhPnBhcnNlRmxvYXQoSmEpKXtJYT1TdHJpbmcoTGEpO2JyZWFrIGF9fUlhPUphO312YXIgQmE9e307XG5mdW5jdGlvbiBNYShhKXtyZXR1cm4gQWEoYSxmdW5jdGlvbigpe2Zvcih2YXIgYj0wLGM9cmEoU3RyaW5nKElhKSkuc3BsaXQoXCIuXCIpLGQ9cmEoU3RyaW5nKGEpKS5zcGxpdChcIi5cIiksZT1NYXRoLm1heChjLmxlbmd0aCxkLmxlbmd0aCksZj0wOzA9PWImJmY8ZTtmKyspe3ZhciBoPWNbZl18fFwiXCIsbD1kW2ZdfHxcIlwiO2Rve2g9LyhcXGQqKShcXEQqKSguKikvLmV4ZWMoaCl8fFtcIlwiLFwiXCIsXCJcIixcIlwiXTtsPS8oXFxkKikoXFxEKikoLiopLy5leGVjKGwpfHxbXCJcIixcIlwiLFwiXCIsXCJcIl07aWYoMD09aFswXS5sZW5ndGgmJjA9PWxbMF0ubGVuZ3RoKWJyZWFrO2I9c2EoMD09aFsxXS5sZW5ndGg/MDpwYXJzZUludChoWzFdLDEwKSwwPT1sWzFdLmxlbmd0aD8wOnBhcnNlSW50KGxbMV0sMTApKXx8c2EoMD09aFsyXS5sZW5ndGgsMD09bFsyXS5sZW5ndGgpfHxzYShoWzJdLGxbMl0pO2g9aFszXTtsPWxbM107fXdoaWxlKDA9PWIpfXJldHVybiAwPD1ifSl9dmFyIE5hO3ZhciBPYT1rLmRvY3VtZW50O1xuTmE9T2EmJkI/SGEoKXx8KFwiQ1NTMUNvbXBhdFwiPT1PYS5jb21wYXRNb2RlP3BhcnNlSW50KElhLDEwKTo1KTp2b2lkIDA7dmFyIFBhPSFCfHw5PD1OdW1iZXIoTmEpLFFhPUImJiFNYShcIjlcIiksUmE9ZnVuY3Rpb24oKXtpZighay5hZGRFdmVudExpc3RlbmVyfHwhT2JqZWN0LmRlZmluZVByb3BlcnR5KXJldHVybiAhMTt2YXIgYT0hMSxiPU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7fSxcInBhc3NpdmVcIix7Z2V0OmZ1bmN0aW9uKCl7YT0hMDt9fSk7dHJ5e2suYWRkRXZlbnRMaXN0ZW5lcihcInRlc3RcIixiYSxiKSxrLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0ZXN0XCIsYmEsYik7fWNhdGNoKGMpe31yZXR1cm4gYX0oKTtmdW5jdGlvbiBDKGEsYil7dGhpcy50eXBlPWE7dGhpcy5hPXRoaXMudGFyZ2V0PWI7dGhpcy5JYT0hMDt9Qy5wcm90b3R5cGUuYj1mdW5jdGlvbigpe3RoaXMuSWE9ITE7fTtmdW5jdGlvbiBEKGEsYil7Qy5jYWxsKHRoaXMsYT9hLnR5cGU6XCJcIik7dGhpcy5yZWxhdGVkVGFyZ2V0PXRoaXMuYT10aGlzLnRhcmdldD1udWxsO3RoaXMuYnV0dG9uPXRoaXMuc2NyZWVuWT10aGlzLnNjcmVlblg9dGhpcy5jbGllbnRZPXRoaXMuY2xpZW50WD0wO3RoaXMua2V5PVwiXCI7dGhpcy5tZXRhS2V5PXRoaXMuc2hpZnRLZXk9dGhpcy5hbHRLZXk9dGhpcy5jdHJsS2V5PSExO3RoaXMucG9pbnRlcklkPTA7dGhpcy5wb2ludGVyVHlwZT1cIlwiO3RoaXMuYz1udWxsO2lmKGEpe3ZhciBjPXRoaXMudHlwZT1hLnR5cGUsZD1hLmNoYW5nZWRUb3VjaGVzJiZhLmNoYW5nZWRUb3VjaGVzLmxlbmd0aD9hLmNoYW5nZWRUb3VjaGVzWzBdOm51bGw7dGhpcy50YXJnZXQ9YS50YXJnZXR8fGEuc3JjRWxlbWVudDt0aGlzLmE9YjtpZihiPWEucmVsYXRlZFRhcmdldCl7aWYoRmEpe2E6e3RyeXt6YShiLm5vZGVOYW1lKTt2YXIgZT0hMDticmVhayBhfWNhdGNoKGYpe31lPSExO31lfHwoYj1udWxsKTt9fWVsc2VcIm1vdXNlb3ZlclwiPT1cbmM/Yj1hLmZyb21FbGVtZW50OlwibW91c2VvdXRcIj09YyYmKGI9YS50b0VsZW1lbnQpO3RoaXMucmVsYXRlZFRhcmdldD1iO2Q/KHRoaXMuY2xpZW50WD12b2lkIDAhPT1kLmNsaWVudFg/ZC5jbGllbnRYOmQucGFnZVgsdGhpcy5jbGllbnRZPXZvaWQgMCE9PWQuY2xpZW50WT9kLmNsaWVudFk6ZC5wYWdlWSx0aGlzLnNjcmVlblg9ZC5zY3JlZW5YfHwwLHRoaXMuc2NyZWVuWT1kLnNjcmVlbll8fDApOih0aGlzLmNsaWVudFg9dm9pZCAwIT09YS5jbGllbnRYP2EuY2xpZW50WDphLnBhZ2VYLHRoaXMuY2xpZW50WT12b2lkIDAhPT1hLmNsaWVudFk/YS5jbGllbnRZOmEucGFnZVksdGhpcy5zY3JlZW5YPWEuc2NyZWVuWHx8MCx0aGlzLnNjcmVlblk9YS5zY3JlZW5ZfHwwKTt0aGlzLmJ1dHRvbj1hLmJ1dHRvbjt0aGlzLmtleT1hLmtleXx8XCJcIjt0aGlzLmN0cmxLZXk9YS5jdHJsS2V5O3RoaXMuYWx0S2V5PWEuYWx0S2V5O3RoaXMuc2hpZnRLZXk9YS5zaGlmdEtleTt0aGlzLm1ldGFLZXk9XG5hLm1ldGFLZXk7dGhpcy5wb2ludGVySWQ9YS5wb2ludGVySWR8fDA7dGhpcy5wb2ludGVyVHlwZT1tKGEucG9pbnRlclR5cGUpP2EucG9pbnRlclR5cGU6U2FbYS5wb2ludGVyVHlwZV18fFwiXCI7dGhpcy5jPWE7YS5kZWZhdWx0UHJldmVudGVkJiZ0aGlzLmIoKTt9fXgoRCxDKTt2YXIgU2E9ezI6XCJ0b3VjaFwiLDM6XCJwZW5cIiw0OlwibW91c2VcIn07RC5wcm90b3R5cGUuYj1mdW5jdGlvbigpe0QuTi5iLmNhbGwodGhpcyk7dmFyIGE9dGhpcy5jO2lmKGEucHJldmVudERlZmF1bHQpYS5wcmV2ZW50RGVmYXVsdCgpO2Vsc2UgaWYoYS5yZXR1cm5WYWx1ZT0hMSxRYSl0cnl7aWYoYS5jdHJsS2V5fHwxMTI8PWEua2V5Q29kZSYmMTIzPj1hLmtleUNvZGUpYS5rZXlDb2RlPS0xO31jYXRjaChiKXt9fTt2YXIgRj1cImNsb3N1cmVfbGlzdGVuYWJsZV9cIisoMUU2Kk1hdGgucmFuZG9tKCl8MCksVGE9MDtmdW5jdGlvbiBVYShhLGIsYyxkLGUpe3RoaXMubGlzdGVuZXI9YTt0aGlzLnByb3h5PW51bGw7dGhpcy5zcmM9Yjt0aGlzLnR5cGU9Yzt0aGlzLmNhcHR1cmU9ISFkO3RoaXMuZGE9ZTt0aGlzLmtleT0rK1RhO3RoaXMuWD10aGlzLlo9ITE7fWZ1bmN0aW9uIFZhKGEpe2EuWD0hMDthLmxpc3RlbmVyPW51bGw7YS5wcm94eT1udWxsO2Euc3JjPW51bGw7YS5kYT1udWxsO31mdW5jdGlvbiBXYShhKXt0aGlzLnNyYz1hO3RoaXMuYT17fTt0aGlzLmI9MDt9V2EucHJvdG90eXBlLmFkZD1mdW5jdGlvbihhLGIsYyxkLGUpe3ZhciBmPWEudG9TdHJpbmcoKTthPXRoaXMuYVtmXTthfHwoYT10aGlzLmFbZl09W10sdGhpcy5iKyspO3ZhciBoPVhhKGEsYixkLGUpOy0xPGg/KGI9YVtoXSxjfHwoYi5aPSExKSk6KGI9bmV3IFVhKGIsdGhpcy5zcmMsZiwhIWQsZSksYi5aPWMsYS5wdXNoKGIpKTtyZXR1cm4gYn07ZnVuY3Rpb24gWWEoYSxiKXt2YXIgYz1iLnR5cGU7aWYoYyBpbiBhLmEpe3ZhciBkPWEuYVtjXSxlPWphKGQsYiksZjsoZj0wPD1lKSYmQXJyYXkucHJvdG90eXBlLnNwbGljZS5jYWxsKGQsZSwxKTtmJiYoVmEoYiksMD09YS5hW2NdLmxlbmd0aCYmKGRlbGV0ZSBhLmFbY10sYS5iLS0pKTt9fVxuZnVuY3Rpb24gWGEoYSxiLGMsZCl7Zm9yKHZhciBlPTA7ZTxhLmxlbmd0aDsrK2Upe3ZhciBmPWFbZV07aWYoIWYuWCYmZi5saXN0ZW5lcj09YiYmZi5jYXB0dXJlPT0hIWMmJmYuZGE9PWQpcmV0dXJuIGV9cmV0dXJuIC0xfXZhciBaYT1cImNsb3N1cmVfbG1fXCIrKDFFNipNYXRoLnJhbmRvbSgpfDApLCRhPXt9O2Z1bmN0aW9uIGJiKGEsYixjLGQsZSl7aWYoZCYmZC5vbmNlKXJldHVybiBjYihhLGIsYyxkLGUpO2lmKHEoYikpe2Zvcih2YXIgZj0wO2Y8Yi5sZW5ndGg7ZisrKWJiKGEsYltmXSxjLGQsZSk7cmV0dXJuIG51bGx9Yz1kYihjKTtyZXR1cm4gYSYmYVtGXT9hLnphKGIsYyxyKGQpPyEhZC5jYXB0dXJlOiEhZCxlKTplYihhLGIsYywhMSxkLGUpfVxuZnVuY3Rpb24gZWIoYSxiLGMsZCxlLGYpe2lmKCFiKXRocm93IEVycm9yKFwiSW52YWxpZCBldmVudCB0eXBlXCIpO3ZhciBoPXIoZSk/ISFlLmNhcHR1cmU6ISFlO2lmKGgmJiFQYSlyZXR1cm4gbnVsbDt2YXIgbD1mYihhKTtsfHwoYVtaYV09bD1uZXcgV2EoYSkpO2M9bC5hZGQoYixjLGQsaCxmKTtpZihjLnByb3h5KXJldHVybiBjO2Q9Z2IoKTtjLnByb3h5PWQ7ZC5zcmM9YTtkLmxpc3RlbmVyPWM7aWYoYS5hZGRFdmVudExpc3RlbmVyKVJhfHwoZT1oKSx2b2lkIDA9PT1lJiYoZT0hMSksYS5hZGRFdmVudExpc3RlbmVyKGIudG9TdHJpbmcoKSxkLGUpO2Vsc2UgaWYoYS5hdHRhY2hFdmVudClhLmF0dGFjaEV2ZW50KGhiKGIudG9TdHJpbmcoKSksZCk7ZWxzZSBpZihhLmFkZExpc3RlbmVyJiZhLnJlbW92ZUxpc3RlbmVyKWEuYWRkTGlzdGVuZXIoZCk7ZWxzZSB0aHJvdyBFcnJvcihcImFkZEV2ZW50TGlzdGVuZXIgYW5kIGF0dGFjaEV2ZW50IGFyZSB1bmF2YWlsYWJsZS5cIik7cmV0dXJuIGN9ZnVuY3Rpb24gZ2IoKXt2YXIgYT1pYixiPVBhP2Z1bmN0aW9uKGMpe3JldHVybiBhLmNhbGwoYi5zcmMsYi5saXN0ZW5lcixjKX06ZnVuY3Rpb24oYyl7Yz1hLmNhbGwoYi5zcmMsYi5saXN0ZW5lcixjKTtpZighYylyZXR1cm4gY307cmV0dXJuIGJ9ZnVuY3Rpb24gY2IoYSxiLGMsZCxlKXtpZihxKGIpKXtmb3IodmFyIGY9MDtmPGIubGVuZ3RoO2YrKyljYihhLGJbZl0sYyxkLGUpO3JldHVybiBudWxsfWM9ZGIoYyk7cmV0dXJuIGEmJmFbRl0/YS5BYShiLGMscihkKT8hIWQuY2FwdHVyZTohIWQsZSk6ZWIoYSxiLGMsITAsZCxlKX1cbmZ1bmN0aW9uIGpiKGEsYixjLGQsZSl7aWYocShiKSlmb3IodmFyIGY9MDtmPGIubGVuZ3RoO2YrKylqYihhLGJbZl0sYyxkLGUpO2Vsc2UoZD1yKGQpPyEhZC5jYXB0dXJlOiEhZCxjPWRiKGMpLGEmJmFbRl0pPyhhPWEuYyxiPVN0cmluZyhiKS50b1N0cmluZygpLGIgaW4gYS5hJiYoZj1hLmFbYl0sYz1YYShmLGMsZCxlKSwtMTxjJiYoVmEoZltjXSksQXJyYXkucHJvdG90eXBlLnNwbGljZS5jYWxsKGYsYywxKSwwPT1mLmxlbmd0aCYmKGRlbGV0ZSBhLmFbYl0sYS5iLS0pKSkpOmEmJihhPWZiKGEpKSYmKGI9YS5hW2IudG9TdHJpbmcoKV0sYT0tMSxiJiYoYT1YYShiLGMsZCxlKSksKGM9LTE8YT9iW2FdOm51bGwpJiZrYihjKSk7fVxuZnVuY3Rpb24ga2IoYSl7aWYoIWFhKGEpJiZhJiYhYS5YKXt2YXIgYj1hLnNyYztpZihiJiZiW0ZdKVlhKGIuYyxhKTtlbHNle3ZhciBjPWEudHlwZSxkPWEucHJveHk7Yi5yZW1vdmVFdmVudExpc3RlbmVyP2IucmVtb3ZlRXZlbnRMaXN0ZW5lcihjLGQsYS5jYXB0dXJlKTpiLmRldGFjaEV2ZW50P2IuZGV0YWNoRXZlbnQoaGIoYyksZCk6Yi5hZGRMaXN0ZW5lciYmYi5yZW1vdmVMaXN0ZW5lciYmYi5yZW1vdmVMaXN0ZW5lcihkKTsoYz1mYihiKSk/KFlhKGMsYSksMD09Yy5iJiYoYy5zcmM9bnVsbCxiW1phXT1udWxsKSk6VmEoYSk7fX19ZnVuY3Rpb24gaGIoYSl7cmV0dXJuIGEgaW4gJGE/JGFbYV06JGFbYV09XCJvblwiK2F9ZnVuY3Rpb24gbGIoYSxiKXt2YXIgYz1hLmxpc3RlbmVyLGQ9YS5kYXx8YS5zcmM7YS5aJiZrYihhKTtyZXR1cm4gYy5jYWxsKGQsYil9XG5mdW5jdGlvbiBpYihhLGIpe3JldHVybiBhLlg/ITA6UGE/bGIoYSxuZXcgRChiLHRoaXMpKTooYj1uZXcgRChifHxuKFwid2luZG93LmV2ZW50XCIpLHRoaXMpLGxiKGEsYikpfWZ1bmN0aW9uIGZiKGEpe2E9YVtaYV07cmV0dXJuIGEgaW5zdGFuY2VvZiBXYT9hOm51bGx9dmFyIG1iPVwiX19jbG9zdXJlX2V2ZW50c19mbl9cIisoMUU5Kk1hdGgucmFuZG9tKCk+Pj4wKTtmdW5jdGlvbiBkYihhKXtpZihcImZ1bmN0aW9uXCI9PXAoYSkpcmV0dXJuIGE7YVttYl18fChhW21iXT1mdW5jdGlvbihiKXtyZXR1cm4gYS5oYW5kbGVFdmVudChiKX0pO3JldHVybiBhW21iXX1mdW5jdGlvbiBHKCl7eS5jYWxsKHRoaXMpO3RoaXMuYz1uZXcgV2EodGhpcyk7dGhpcy5KPXRoaXM7dGhpcy5CPW51bGw7fXgoRyx5KTtHLnByb3RvdHlwZVtGXT0hMDtnPUcucHJvdG90eXBlO2cuYWRkRXZlbnRMaXN0ZW5lcj1mdW5jdGlvbihhLGIsYyxkKXtiYih0aGlzLGEsYixjLGQpO307Zy5yZW1vdmVFdmVudExpc3RlbmVyPWZ1bmN0aW9uKGEsYixjLGQpe2piKHRoaXMsYSxiLGMsZCk7fTtcbmcuZGlzcGF0Y2hFdmVudD1mdW5jdGlvbihhKXt2YXIgYixjPXRoaXMuQjtpZihjKWZvcihiPVtdO2M7Yz1jLkIpYi5wdXNoKGMpO2M9dGhpcy5KO3ZhciBkPWEudHlwZXx8YTtpZihtKGEpKWE9bmV3IEMoYSxjKTtlbHNlIGlmKGEgaW5zdGFuY2VvZiBDKWEudGFyZ2V0PWEudGFyZ2V0fHxjO2Vsc2V7dmFyIGU9YTthPW5ldyBDKGQsYyk7eWEoYSxlKTt9ZT0hMDtpZihiKWZvcih2YXIgZj1iLmxlbmd0aC0xOzA8PWY7Zi0tKXt2YXIgaD1hLmE9YltmXTtlPW5iKGgsZCwhMCxhKSYmZTt9aD1hLmE9YztlPW5iKGgsZCwhMCxhKSYmZTtlPW5iKGgsZCwhMSxhKSYmZTtpZihiKWZvcihmPTA7ZjxiLmxlbmd0aDtmKyspaD1hLmE9YltmXSxlPW5iKGgsZCwhMSxhKSYmZTtyZXR1cm4gZX07XG5nLkc9ZnVuY3Rpb24oKXtHLk4uRy5jYWxsKHRoaXMpO2lmKHRoaXMuYyl7dmFyIGE9dGhpcy5jLGM7Zm9yKGMgaW4gYS5hKXtmb3IodmFyIGQ9YS5hW2NdLGU9MDtlPGQubGVuZ3RoO2UrKylWYShkW2VdKTtkZWxldGUgYS5hW2NdO2EuYi0tO319dGhpcy5CPW51bGw7fTtnLnphPWZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiB0aGlzLmMuYWRkKFN0cmluZyhhKSxiLCExLGMsZCl9O2cuQWE9ZnVuY3Rpb24oYSxiLGMsZCl7cmV0dXJuIHRoaXMuYy5hZGQoU3RyaW5nKGEpLGIsITAsYyxkKX07XG5mdW5jdGlvbiBuYihhLGIsYyxkKXtiPWEuYy5hW1N0cmluZyhiKV07aWYoIWIpcmV0dXJuICEwO2I9Yi5jb25jYXQoKTtmb3IodmFyIGU9ITAsZj0wO2Y8Yi5sZW5ndGg7KytmKXt2YXIgaD1iW2ZdO2lmKGgmJiFoLlgmJmguY2FwdHVyZT09Yyl7dmFyIGw9aC5saXN0ZW5lcixFPWguZGF8fGguc3JjO2guWiYmWWEoYS5jLGgpO2U9ITEhPT1sLmNhbGwoRSxkKSYmZTt9fXJldHVybiBlJiYwIT1kLklhfXZhciBvYj1rLkpTT04uc3RyaW5naWZ5O2Z1bmN0aW9uIHBiKGEsYil7dGhpcy5jPWE7dGhpcy5mPWI7dGhpcy5iPTA7dGhpcy5hPW51bGw7fXBiLnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24oKXtpZigwPHRoaXMuYil7dGhpcy5iLS07dmFyIGE9dGhpcy5hO3RoaXMuYT1hLm5leHQ7YS5uZXh0PW51bGw7fWVsc2UgYT10aGlzLmMoKTtyZXR1cm4gYX07ZnVuY3Rpb24gcWIoKXt0aGlzLmI9dGhpcy5hPW51bGw7fXZhciBzYj1uZXcgcGIoZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHJifSxmdW5jdGlvbihhKXthLnJlc2V0KCk7fSk7cWIucHJvdG90eXBlLmFkZD1mdW5jdGlvbihhLGIpe3ZhciBjPXNiLmdldCgpO2Muc2V0KGEsYik7dGhpcy5iP3RoaXMuYi5uZXh0PWM6dGhpcy5hPWM7dGhpcy5iPWM7fTtmdW5jdGlvbiB0Yigpe3ZhciBhPXViLGI9bnVsbDthLmEmJihiPWEuYSxhLmE9YS5hLm5leHQsYS5hfHwoYS5iPW51bGwpLGIubmV4dD1udWxsKTtyZXR1cm4gYn1mdW5jdGlvbiByYigpe3RoaXMubmV4dD10aGlzLmI9dGhpcy5hPW51bGw7fXJiLnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24oYSxiKXt0aGlzLmE9YTt0aGlzLmI9Yjt0aGlzLm5leHQ9bnVsbDt9O3JiLnByb3RvdHlwZS5yZXNldD1mdW5jdGlvbigpe3RoaXMubmV4dD10aGlzLmI9dGhpcy5hPW51bGw7fTtmdW5jdGlvbiB2YihhKXtrLnNldFRpbWVvdXQoZnVuY3Rpb24oKXt0aHJvdyBhO30sMCk7fWZ1bmN0aW9uIHdiKGEsYil7eGJ8fHliKCk7emJ8fCh4YigpLHpiPSEwKTt1Yi5hZGQoYSxiKTt9dmFyIHhiO2Z1bmN0aW9uIHliKCl7dmFyIGE9ay5Qcm9taXNlLnJlc29sdmUodm9pZCAwKTt4Yj1mdW5jdGlvbigpe2EudGhlbihBYik7fTt9dmFyIHpiPSExLHViPW5ldyBxYjtmdW5jdGlvbiBBYigpe2Zvcih2YXIgYTthPXRiKCk7KXt0cnl7YS5hLmNhbGwoYS5iKTt9Y2F0Y2goYyl7dmIoYyk7fXZhciBiPXNiO2IuZihhKTsxMDA+Yi5iJiYoYi5iKyssYS5uZXh0PWIuYSxiLmE9YSk7fXpiPSExO31mdW5jdGlvbiBDYihhLGIpe0cuY2FsbCh0aGlzKTt0aGlzLmI9YXx8MTt0aGlzLmE9Ynx8azt0aGlzLmY9dSh0aGlzLmZiLHRoaXMpO3RoaXMuZz13KCk7fXgoQ2IsRyk7Zz1DYi5wcm90b3R5cGU7Zy5iYT0hMTtnLkw9bnVsbDtnLmZiPWZ1bmN0aW9uKCl7aWYodGhpcy5iYSl7dmFyIGE9dygpLXRoaXMuZzswPGEmJmE8LjgqdGhpcy5iP3RoaXMuTD10aGlzLmEuc2V0VGltZW91dCh0aGlzLmYsdGhpcy5iLWEpOih0aGlzLkwmJih0aGlzLmEuY2xlYXJUaW1lb3V0KHRoaXMuTCksdGhpcy5MPW51bGwpLHRoaXMuZGlzcGF0Y2hFdmVudChcInRpY2tcIiksdGhpcy5iYSYmKERiKHRoaXMpLHRoaXMuc3RhcnQoKSkpO319O2cuc3RhcnQ9ZnVuY3Rpb24oKXt0aGlzLmJhPSEwO3RoaXMuTHx8KHRoaXMuTD10aGlzLmEuc2V0VGltZW91dCh0aGlzLmYsdGhpcy5iKSx0aGlzLmc9dygpKTt9O2Z1bmN0aW9uIERiKGEpe2EuYmE9ITE7YS5MJiYoYS5hLmNsZWFyVGltZW91dChhLkwpLGEuTD1udWxsKTt9XG5nLkc9ZnVuY3Rpb24oKXtDYi5OLkcuY2FsbCh0aGlzKTtEYih0aGlzKTtkZWxldGUgdGhpcy5hO307ZnVuY3Rpb24gRWIoYSxiLGMpe2lmKFwiZnVuY3Rpb25cIj09cChhKSljJiYoYT11KGEsYykpO2Vsc2UgaWYoYSYmXCJmdW5jdGlvblwiPT10eXBlb2YgYS5oYW5kbGVFdmVudClhPXUoYS5oYW5kbGVFdmVudCxhKTtlbHNlIHRocm93IEVycm9yKFwiSW52YWxpZCBsaXN0ZW5lciBhcmd1bWVudFwiKTtyZXR1cm4gMjE0NzQ4MzY0NzxOdW1iZXIoYik/LTE6ay5zZXRUaW1lb3V0KGEsYnx8MCl9ZnVuY3Rpb24gRmIoYSxiLGMpe3kuY2FsbCh0aGlzKTt0aGlzLmY9bnVsbCE9Yz91KGEsYyk6YTt0aGlzLmM9Yjt0aGlzLmI9dSh0aGlzLiRhLHRoaXMpO3RoaXMuYT1bXTt9eChGYix5KTtnPUZiLnByb3RvdHlwZTtnLmVhPSExO2cuVT1udWxsO2cuVGE9ZnVuY3Rpb24oYSl7dGhpcy5hPWFyZ3VtZW50czt0aGlzLlU/dGhpcy5lYT0hMDpHYih0aGlzKTt9O2cuRz1mdW5jdGlvbigpe0ZiLk4uRy5jYWxsKHRoaXMpO3RoaXMuVSYmKGsuY2xlYXJUaW1lb3V0KHRoaXMuVSksdGhpcy5VPW51bGwsdGhpcy5lYT0hMSx0aGlzLmE9W10pO307Zy4kYT1mdW5jdGlvbigpe3RoaXMuVT1udWxsO3RoaXMuZWEmJih0aGlzLmVhPSExLEdiKHRoaXMpKTt9O2Z1bmN0aW9uIEdiKGEpe2EuVT1FYihhLmIsYS5jKTthLmYuYXBwbHkobnVsbCxhLmEpO31mdW5jdGlvbiBIKGEpe3kuY2FsbCh0aGlzKTt0aGlzLmI9YTt0aGlzLmE9e307fXgoSCx5KTt2YXIgSGI9W107ZnVuY3Rpb24gSWIoYSxiLGMsZCl7cShjKXx8KGMmJihIYlswXT1jLnRvU3RyaW5nKCkpLGM9SGIpO2Zvcih2YXIgZT0wO2U8Yy5sZW5ndGg7ZSsrKXt2YXIgZj1iYihiLGNbZV0sZHx8YS5oYW5kbGVFdmVudCwhMSxhLmJ8fGEpO2lmKCFmKWJyZWFrO2EuYVtmLmtleV09Zjt9fWZ1bmN0aW9uIEpiKGEpe3ZhKGEuYSxmdW5jdGlvbihiLGMpe3RoaXMuYS5oYXNPd25Qcm9wZXJ0eShjKSYma2IoYik7fSxhKTthLmE9e307fUgucHJvdG90eXBlLkc9ZnVuY3Rpb24oKXtILk4uRy5jYWxsKHRoaXMpO0piKHRoaXMpO307SC5wcm90b3R5cGUuaGFuZGxlRXZlbnQ9ZnVuY3Rpb24oKXt0aHJvdyBFcnJvcihcIkV2ZW50SGFuZGxlci5oYW5kbGVFdmVudCBub3QgaW1wbGVtZW50ZWRcIik7fTtmdW5jdGlvbiBLYigpe312YXIgST1uZXcgRztmdW5jdGlvbiBMYihhKXtDLmNhbGwodGhpcyxcInNlcnZlcnJlYWNoYWJpbGl0eVwiLGEpO314KExiLEMpO2Z1bmN0aW9uIEooYSl7SS5kaXNwYXRjaEV2ZW50KG5ldyBMYihJLGEpKTt9ZnVuY3Rpb24gTWIoYSl7Qy5jYWxsKHRoaXMsXCJzdGF0ZXZlbnRcIixhKTt9eChNYixDKTtmdW5jdGlvbiBLKGEpe0kuZGlzcGF0Y2hFdmVudChuZXcgTWIoSSxhKSk7fWZ1bmN0aW9uIE5iKGEpe0MuY2FsbCh0aGlzLFwidGltaW5nZXZlbnRcIixhKTt9eChOYixDKTtmdW5jdGlvbiBPYihhLGIpe2lmKFwiZnVuY3Rpb25cIiE9cChhKSl0aHJvdyBFcnJvcihcIkZuIG11c3Qgbm90IGJlIG51bGwgYW5kIG11c3QgYmUgYSBmdW5jdGlvblwiKTtyZXR1cm4gay5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7YSgpO30sYil9dmFyIFBiPXtOT19FUlJPUjowLGdiOjEsbmI6MixtYjozLGpiOjQsbGI6NSxvYjo2LExhOjcsVElNRU9VVDo4LHJiOjl9O3ZhciBRYj17aWI6XCJjb21wbGV0ZVwiLHZiOlwic3VjY2Vzc1wiLE1hOlwiZXJyb3JcIixMYTpcImFib3J0XCIsdGI6XCJyZWFkeVwiLHViOlwicmVhZHlzdGF0ZWNoYW5nZVwiLFRJTUVPVVQ6XCJ0aW1lb3V0XCIscGI6XCJpbmNyZW1lbnRhbGRhdGFcIixzYjpcInByb2dyZXNzXCIsa2I6XCJkb3dubG9hZHByb2dyZXNzXCIsd2I6XCJ1cGxvYWRwcm9ncmVzc1wifTtmdW5jdGlvbiBSYigpe31SYi5wcm90b3R5cGUuYT1udWxsO2Z1bmN0aW9uIFNiKGEpe3ZhciBiOyhiPWEuYSl8fChiPWEuYT17fSk7cmV0dXJuIGJ9ZnVuY3Rpb24gVGIoKXt9dmFyIEw9e09QRU46XCJhXCIsaGI6XCJiXCIsTWE6XCJjXCIscWI6XCJkXCJ9O2Z1bmN0aW9uIFViKCl7Qy5jYWxsKHRoaXMsXCJkXCIpO314KFViLEMpO2Z1bmN0aW9uIFZiKCl7Qy5jYWxsKHRoaXMsXCJjXCIpO314KFZiLEMpO3ZhciBXYjtmdW5jdGlvbiBYYigpe314KFhiLFJiKTtXYj1uZXcgWGI7ZnVuY3Rpb24gTShhLGIsYyl7dGhpcy5nPWE7dGhpcy5XPWI7dGhpcy5WPWN8fDE7dGhpcy5JPW5ldyBIKHRoaXMpO3RoaXMuTz1ZYjthPUVhPzEyNTp2b2lkIDA7dGhpcy5QPW5ldyBDYihhKTt0aGlzLmg9bnVsbDt0aGlzLmI9ITE7dGhpcy5sPXRoaXMuRD10aGlzLmY9dGhpcy5GPXRoaXMudj10aGlzLlI9dGhpcy5pPW51bGw7dGhpcy5qPVtdO3RoaXMuYT1udWxsO3RoaXMuQT0wO3RoaXMuYz10aGlzLnc9bnVsbDt0aGlzLm89LTE7dGhpcy5tPSExO3RoaXMuSj0wO3RoaXMuQj1udWxsO3RoaXMucz10aGlzLlM9dGhpcy5IPSExO312YXIgWWI9NDVFMyxaYj17fSwkYj17fTtnPU0ucHJvdG90eXBlO2cuc2V0VGltZW91dD1mdW5jdGlvbihhKXt0aGlzLk89YTt9O2Z1bmN0aW9uIGFjKGEsYixjKXthLkY9MTthLmY9YmMoTihiKSk7YS5sPWM7YS5IPSEwO2NjKGEsbnVsbCk7fWZ1bmN0aW9uIGRjKGEsYixjLGQpe2EuRj0xO2EuZj1iYyhOKGIpKTthLmw9bnVsbDthLkg9YztjYyhhLGQpO31cbmZ1bmN0aW9uIGNjKGEsYil7YS52PXcoKTtlYyhhKTthLkQ9TihhLmYpO2ZjKGEuRCxcInRcIixhLlYpO2EuQT0wO2EuYT1hLmcuJChhLmcuWSgpP2I6bnVsbCk7MDxhLkomJihhLkI9bmV3IEZiKHUoYS5KYSxhLGEuYSksYS5KKSk7SWIoYS5JLGEuYSxcInJlYWR5c3RhdGVjaGFuZ2VcIixhLmNiKTtiPWEuaD93YShhLmgpOnt9O2EubD8oYS53fHwoYS53PVwiUE9TVFwiKSxiW1wiQ29udGVudC1UeXBlXCJdPVwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkXCIsYS5hLmNhKGEuRCxhLncsYS5sLGIpKTooYS53PVwiR0VUXCIsYS5hLmNhKGEuRCxhLncsbnVsbCxiKSk7SigxKTt9Zy5jYj1mdW5jdGlvbihhKXthPWEudGFyZ2V0O3ZhciBiPXRoaXMuQjtiJiYzPT1PKGEpP2IuVGEoKTp0aGlzLkphKGEpO307XG5nLkphPWZ1bmN0aW9uKGEpe3RyeXtpZihhPT10aGlzLmEpYTp7dmFyIGI9Tyh0aGlzLmEpLGM9dGhpcy5hLnlhKCksZD10aGlzLmEuVCgpO2lmKCEoMz5ifHwzPT1iJiYhRWEmJiF0aGlzLmEuYWEoKSkpe3RoaXMubXx8NCE9Ynx8Nz09Y3x8KDg9PWN8fDA+PWQ/SigzKTpKKDIpKTtnYyh0aGlzKTt2YXIgZT10aGlzLmEuVCgpO3RoaXMubz1lO3ZhciBmPXRoaXMuYS5hYSgpO2lmKHRoaXMuYj0yMDA9PWUpe2lmKHRoaXMuUyYmIXRoaXMucyl7Yjp7aWYodGhpcy5hKXt2YXIgaD1oYyh0aGlzLmEsXCJYLUhUVFAtSW5pdGlhbC1SZXNwb25zZVwiKTtpZihoJiYhcWEoaCkpe3ZhciBsPWg7YnJlYWsgYn19bD1udWxsO31pZihsKXRoaXMucz0hMCxpYyh0aGlzLGwpO2Vsc2V7dGhpcy5iPSExO3RoaXMuYz0zO0soMTIpO1AodGhpcyk7amModGhpcyk7YnJlYWsgYX19dGhpcy5IPyhrYyh0aGlzLGIsZiksRWEmJnRoaXMuYiYmMz09YiYmKEliKHRoaXMuSSx0aGlzLlAsXCJ0aWNrXCIsdGhpcy5iYiksdGhpcy5QLnN0YXJ0KCkpKTpcbmljKHRoaXMsZik7ND09YiYmUCh0aGlzKTt0aGlzLmImJiF0aGlzLm0mJig0PT1iP3RoaXMuZy5uYSh0aGlzKToodGhpcy5iPSExLGVjKHRoaXMpKSk7fWVsc2UgNDAwPT1lJiYwPGYuaW5kZXhPZihcIlVua25vd24gU0lEXCIpPyh0aGlzLmM9MyxLKDEyKSk6KHRoaXMuYz0wLEsoMTMpKSxQKHRoaXMpLGpjKHRoaXMpO319fWNhdGNoKEUpe31maW5hbGx5e319O2Z1bmN0aW9uIGtjKGEsYixjKXtmb3IodmFyIGQ9ITA7IWEubSYmYS5BPGMubGVuZ3RoOyl7dmFyIGU9bGMoYSxjKTtpZihlPT0kYil7ND09YiYmKGEuYz00LEsoMTQpLGQ9ITEpO2JyZWFrfWVsc2UgaWYoZT09WmIpe2EuYz00O0soMTUpO2Q9ITE7YnJlYWt9ZWxzZSBpYyhhLGUpO300PT1iJiYwPT1jLmxlbmd0aCYmKGEuYz0xLEsoMTYpLGQ9ITEpO2EuYj1hLmImJmQ7ZHx8KFAoYSksamMoYSkpO31cbmcuYmI9ZnVuY3Rpb24oKXtpZih0aGlzLmEpe3ZhciBhPU8odGhpcy5hKSxiPXRoaXMuYS5hYSgpO3RoaXMuQTxiLmxlbmd0aCYmKGdjKHRoaXMpLGtjKHRoaXMsYSxiKSx0aGlzLmImJjQhPWEmJmVjKHRoaXMpKTt9fTtmdW5jdGlvbiBsYyhhLGIpe3ZhciBjPWEuQSxkPWIuaW5kZXhPZihcIlxcblwiLGMpO2lmKC0xPT1kKXJldHVybiAkYjtjPU51bWJlcihiLnN1YnN0cmluZyhjLGQpKTtpZihpc05hTihjKSlyZXR1cm4gWmI7ZCs9MTtpZihkK2M+Yi5sZW5ndGgpcmV0dXJuICRiO2I9Yi5zdWJzdHIoZCxjKTthLkE9ZCtjO3JldHVybiBifWcuY2FuY2VsPWZ1bmN0aW9uKCl7dGhpcy5tPSEwO1AodGhpcyk7fTtmdW5jdGlvbiBlYyhhKXthLlI9dygpK2EuTzttYyhhLGEuTyk7fWZ1bmN0aW9uIG1jKGEsYil7aWYobnVsbCE9YS5pKXRocm93IEVycm9yKFwiV2F0Y2hEb2cgdGltZXIgbm90IG51bGxcIik7YS5pPU9iKHUoYS5hYixhKSxiKTt9XG5mdW5jdGlvbiBnYyhhKXthLmkmJihrLmNsZWFyVGltZW91dChhLmkpLGEuaT1udWxsKTt9Zy5hYj1mdW5jdGlvbigpe3RoaXMuaT1udWxsO3ZhciBhPXcoKTswPD1hLXRoaXMuUj8oMiE9dGhpcy5GJiYoSigzKSxLKDE3KSksUCh0aGlzKSx0aGlzLmM9MixqYyh0aGlzKSk6bWModGhpcyx0aGlzLlItYSk7fTtmdW5jdGlvbiBqYyhhKXthLmcuQ2EoKXx8YS5tfHxhLmcubmEoYSk7fWZ1bmN0aW9uIFAoYSl7Z2MoYSk7dmFyIGI9YS5CO2ImJlwiZnVuY3Rpb25cIj09dHlwZW9mIGIubGEmJmIubGEoKTthLkI9bnVsbDtEYihhLlApO0piKGEuSSk7YS5hJiYoYj1hLmEsYS5hPW51bGwsYi5hYm9ydCgpLGIubGEoKSk7fWZ1bmN0aW9uIGljKGEsYil7dHJ5e2EuZy5GYShhLGIpLEooNCk7fWNhdGNoKGMpe319ZnVuY3Rpb24gbmMoYSl7aWYoYS5DJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBhLkMpcmV0dXJuIGEuQygpO2lmKG0oYSkpcmV0dXJuIGEuc3BsaXQoXCJcIik7aWYoY2EoYSkpe2Zvcih2YXIgYj1bXSxjPWEubGVuZ3RoLGQ9MDtkPGM7ZCsrKWIucHVzaChhW2RdKTtyZXR1cm4gYn1iPVtdO2M9MDtmb3IoZCBpbiBhKWJbYysrXT1hW2RdO3JldHVybiBifVxuZnVuY3Rpb24gb2MoYSxiKXtpZihhLmZvckVhY2gmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGEuZm9yRWFjaClhLmZvckVhY2goYix2b2lkIDApO2Vsc2UgaWYoY2EoYSl8fG0oYSkpbGEoYSxiLHZvaWQgMCk7ZWxzZXtpZihhLksmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGEuSyl2YXIgYz1hLksoKTtlbHNlIGlmKGEuQyYmXCJmdW5jdGlvblwiPT10eXBlb2YgYS5DKWM9dm9pZCAwO2Vsc2UgaWYoY2EoYSl8fG0oYSkpe2M9W107Zm9yKHZhciBkPWEubGVuZ3RoLGU9MDtlPGQ7ZSsrKWMucHVzaChlKTt9ZWxzZSBmb3IoZSBpbiBjPVtdLGQ9MCxhKWNbZCsrXT1lO2Q9bmMoYSk7ZT1kLmxlbmd0aDtmb3IodmFyIGY9MDtmPGU7ZisrKWIuY2FsbCh2b2lkIDAsZFtmXSxjJiZjW2ZdLGEpO319ZnVuY3Rpb24gUShhLGIpe3RoaXMuYj17fTt0aGlzLmE9W107dGhpcy5jPTA7dmFyIGM9YXJndW1lbnRzLmxlbmd0aDtpZigxPGMpe2lmKGMlMil0aHJvdyBFcnJvcihcIlVuZXZlbiBudW1iZXIgb2YgYXJndW1lbnRzXCIpO2Zvcih2YXIgZD0wO2Q8YztkKz0yKXRoaXMuc2V0KGFyZ3VtZW50c1tkXSxhcmd1bWVudHNbZCsxXSk7fWVsc2UgaWYoYSlpZihhIGluc3RhbmNlb2YgUSlmb3IoYz1hLksoKSxkPTA7ZDxjLmxlbmd0aDtkKyspdGhpcy5zZXQoY1tkXSxhLmdldChjW2RdKSk7ZWxzZSBmb3IoZCBpbiBhKXRoaXMuc2V0KGQsYVtkXSk7fWc9US5wcm90b3R5cGU7Zy5DPWZ1bmN0aW9uKCl7cGModGhpcyk7Zm9yKHZhciBhPVtdLGI9MDtiPHRoaXMuYS5sZW5ndGg7YisrKWEucHVzaCh0aGlzLmJbdGhpcy5hW2JdXSk7cmV0dXJuIGF9O2cuSz1mdW5jdGlvbigpe3BjKHRoaXMpO3JldHVybiB0aGlzLmEuY29uY2F0KCl9O1xuZnVuY3Rpb24gcWMoYSl7YS5iPXt9O2EuYS5sZW5ndGg9MDthLmM9MDt9ZnVuY3Rpb24gcmMoYSxiKXtSKGEuYixiKSYmKGRlbGV0ZSBhLmJbYl0sYS5jLS0sYS5hLmxlbmd0aD4yKmEuYyYmcGMoYSkpO31mdW5jdGlvbiBwYyhhKXtpZihhLmMhPWEuYS5sZW5ndGgpe2Zvcih2YXIgYj0wLGM9MDtiPGEuYS5sZW5ndGg7KXt2YXIgZD1hLmFbYl07UihhLmIsZCkmJihhLmFbYysrXT1kKTtiKys7fWEuYS5sZW5ndGg9Yzt9aWYoYS5jIT1hLmEubGVuZ3RoKXt2YXIgZT17fTtmb3IoYz1iPTA7YjxhLmEubGVuZ3RoOylkPWEuYVtiXSxSKGUsZCl8fChhLmFbYysrXT1kLGVbZF09MSksYisrO2EuYS5sZW5ndGg9Yzt9fWcuZ2V0PWZ1bmN0aW9uKGEsYil7cmV0dXJuIFIodGhpcy5iLGEpP3RoaXMuYlthXTpifTtnLnNldD1mdW5jdGlvbihhLGIpe1IodGhpcy5iLGEpfHwodGhpcy5jKyssdGhpcy5hLnB1c2goYSkpO3RoaXMuYlthXT1iO307XG5nLmZvckVhY2g9ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9dGhpcy5LKCksZD0wO2Q8Yy5sZW5ndGg7ZCsrKXt2YXIgZT1jW2RdLGY9dGhpcy5nZXQoZSk7YS5jYWxsKGIsZixlLHRoaXMpO319O2Z1bmN0aW9uIFIoYSxiKXtyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGEsYil9dmFyIHNjPS9eKD86KFteOi8/Iy5dKyk6KT8oPzpcXC9cXC8oPzooW14vPyNdKilAKT8oW14vIz9dKj8pKD86OihbMC05XSspKT8oPz1bLyM/XXwkKSk/KFtePyNdKyk/KD86XFw/KFteI10qKSk/KD86IyhbXFxzXFxTXSopKT8kLztmdW5jdGlvbiB0YyhhLGIpe2lmKGEpe2E9YS5zcGxpdChcIiZcIik7Zm9yKHZhciBjPTA7YzxhLmxlbmd0aDtjKyspe3ZhciBkPWFbY10uaW5kZXhPZihcIj1cIiksZT1udWxsO2lmKDA8PWQpe3ZhciBmPWFbY10uc3Vic3RyaW5nKDAsZCk7ZT1hW2NdLnN1YnN0cmluZyhkKzEpO31lbHNlIGY9YVtjXTtiKGYsZT9kZWNvZGVVUklDb21wb25lbnQoZS5yZXBsYWNlKC9cXCsvZyxcIiBcIikpOlwiXCIpO319fWZ1bmN0aW9uIFMoYSxiKXt0aGlzLmI9dGhpcy5qPXRoaXMuZj1cIlwiO3RoaXMuaT1udWxsO3RoaXMuZz10aGlzLmE9XCJcIjt0aGlzLmg9ITE7dmFyIGM7YSBpbnN0YW5jZW9mIFM/KHRoaXMuaD12b2lkIDAhPT1iP2I6YS5oLHVjKHRoaXMsYS5mKSx0aGlzLmo9YS5qLHZjKHRoaXMsYS5iKSx3Yyh0aGlzLGEuaSksdGhpcy5hPWEuYSx4Yyh0aGlzLHljKGEuYykpLHRoaXMuZz1hLmcpOmEmJihjPVN0cmluZyhhKS5tYXRjaChzYykpPyh0aGlzLmg9ISFiLHVjKHRoaXMsY1sxXXx8XCJcIiwhMCksdGhpcy5qPXpjKGNbMl18fFwiXCIpLHZjKHRoaXMsY1szXXx8XCJcIiwhMCksd2ModGhpcyxjWzRdKSx0aGlzLmE9emMoY1s1XXx8XCJcIiwhMCkseGModGhpcyxjWzZdfHxcIlwiLCEwKSx0aGlzLmc9emMoY1s3XXx8XCJcIikpOih0aGlzLmg9ISFiLHRoaXMuYz1uZXcgQWMobnVsbCx0aGlzLmgpKTt9XG5TLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3ZhciBhPVtdLGI9dGhpcy5mO2ImJmEucHVzaChCYyhiLENjLCEwKSxcIjpcIik7dmFyIGM9dGhpcy5iO2lmKGN8fFwiZmlsZVwiPT1iKWEucHVzaChcIi8vXCIpLChiPXRoaXMuaikmJmEucHVzaChCYyhiLENjLCEwKSxcIkBcIiksYS5wdXNoKGVuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoYykpLnJlcGxhY2UoLyUyNShbMC05YS1mQS1GXXsyfSkvZyxcIiUkMVwiKSksYz10aGlzLmksbnVsbCE9YyYmYS5wdXNoKFwiOlwiLFN0cmluZyhjKSk7aWYoYz10aGlzLmEpdGhpcy5iJiZcIi9cIiE9Yy5jaGFyQXQoMCkmJmEucHVzaChcIi9cIiksYS5wdXNoKEJjKGMsXCIvXCI9PWMuY2hhckF0KDApP0RjOkVjLCEwKSk7KGM9dGhpcy5jLnRvU3RyaW5nKCkpJiZhLnB1c2goXCI/XCIsYyk7KGM9dGhpcy5nKSYmYS5wdXNoKFwiI1wiLEJjKGMsRmMpKTtyZXR1cm4gYS5qb2luKFwiXCIpfTtcblMucHJvdG90eXBlLnJlc29sdmU9ZnVuY3Rpb24oYSl7dmFyIGI9Tih0aGlzKSxjPSEhYS5mO2M/dWMoYixhLmYpOmM9ISFhLmo7Yz9iLmo9YS5qOmM9ISFhLmI7Yz92YyhiLGEuYik6Yz1udWxsIT1hLmk7dmFyIGQ9YS5hO2lmKGMpd2MoYixhLmkpO2Vsc2UgaWYoYz0hIWEuYSl7aWYoXCIvXCIhPWQuY2hhckF0KDApKWlmKHRoaXMuYiYmIXRoaXMuYSlkPVwiL1wiK2Q7ZWxzZXt2YXIgZT1iLmEubGFzdEluZGV4T2YoXCIvXCIpOy0xIT1lJiYoZD1iLmEuc3Vic3RyKDAsZSsxKStkKTt9ZT1kO2lmKFwiLi5cIj09ZXx8XCIuXCI9PWUpZD1cIlwiO2Vsc2UgaWYoeihlLFwiLi9cIil8fHooZSxcIi8uXCIpKXtkPTA9PWUubGFzdEluZGV4T2YoXCIvXCIsMCk7ZT1lLnNwbGl0KFwiL1wiKTtmb3IodmFyIGY9W10saD0wO2g8ZS5sZW5ndGg7KXt2YXIgbD1lW2grK107XCIuXCI9PWw/ZCYmaD09ZS5sZW5ndGgmJmYucHVzaChcIlwiKTpcIi4uXCI9PWw/KCgxPGYubGVuZ3RofHwxPT1mLmxlbmd0aCYmXCJcIiE9ZlswXSkmJmYucG9wKCksZCYmXG5oPT1lLmxlbmd0aCYmZi5wdXNoKFwiXCIpKTooZi5wdXNoKGwpLGQ9ITApO31kPWYuam9pbihcIi9cIik7fWVsc2UgZD1lO31jP2IuYT1kOmM9XCJcIiE9PWEuYy50b1N0cmluZygpO2M/eGMoYix5YyhhLmMpKTpjPSEhYS5nO2MmJihiLmc9YS5nKTtyZXR1cm4gYn07ZnVuY3Rpb24gTihhKXtyZXR1cm4gbmV3IFMoYSl9ZnVuY3Rpb24gdWMoYSxiLGMpe2EuZj1jP3pjKGIsITApOmI7YS5mJiYoYS5mPWEuZi5yZXBsYWNlKC86JC8sXCJcIikpO31mdW5jdGlvbiB2YyhhLGIsYyl7YS5iPWM/emMoYiwhMCk6Yjt9ZnVuY3Rpb24gd2MoYSxiKXtpZihiKXtiPU51bWJlcihiKTtpZihpc05hTihiKXx8MD5iKXRocm93IEVycm9yKFwiQmFkIHBvcnQgbnVtYmVyIFwiK2IpO2EuaT1iO31lbHNlIGEuaT1udWxsO31mdW5jdGlvbiB4YyhhLGIsYyl7YiBpbnN0YW5jZW9mIEFjPyhhLmM9YixHYyhhLmMsYS5oKSk6KGN8fChiPUJjKGIsSGMpKSxhLmM9bmV3IEFjKGIsYS5oKSk7fVxuZnVuY3Rpb24gVChhLGIsYyl7YS5jLnNldChiLGMpO31mdW5jdGlvbiBmYyhhLGIsYyl7cShjKXx8KGM9W1N0cmluZyhjKV0pO0ljKGEuYyxiLGMpO31mdW5jdGlvbiBiYyhhKXtUKGEsXCJ6eFwiLE1hdGguZmxvb3IoMjE0NzQ4MzY0OCpNYXRoLnJhbmRvbSgpKS50b1N0cmluZygzNikrTWF0aC5hYnMoTWF0aC5mbG9vcigyMTQ3NDgzNjQ4Kk1hdGgucmFuZG9tKCkpXncoKSkudG9TdHJpbmcoMzYpKTtyZXR1cm4gYX1mdW5jdGlvbiBKYyhhKXtyZXR1cm4gYSBpbnN0YW5jZW9mIFM/TihhKTpuZXcgUyhhLHZvaWQgMCl9ZnVuY3Rpb24gS2MoYSxiLGMsZCl7dmFyIGU9bmV3IFMobnVsbCx2b2lkIDApO2EmJnVjKGUsYSk7YiYmdmMoZSxiKTtjJiZ3YyhlLGMpO2QmJihlLmE9ZCk7cmV0dXJuIGV9ZnVuY3Rpb24gemMoYSxiKXtyZXR1cm4gYT9iP2RlY29kZVVSSShhLnJlcGxhY2UoLyUyNS9nLFwiJTI1MjVcIikpOmRlY29kZVVSSUNvbXBvbmVudChhKTpcIlwifVxuZnVuY3Rpb24gQmMoYSxiLGMpe3JldHVybiBtKGEpPyhhPWVuY29kZVVSSShhKS5yZXBsYWNlKGIsTGMpLGMmJihhPWEucmVwbGFjZSgvJTI1KFswLTlhLWZBLUZdezJ9KS9nLFwiJSQxXCIpKSxhKTpudWxsfWZ1bmN0aW9uIExjKGEpe2E9YS5jaGFyQ29kZUF0KDApO3JldHVybiBcIiVcIisoYT4+NCYxNSkudG9TdHJpbmcoMTYpKyhhJjE1KS50b1N0cmluZygxNil9dmFyIENjPS9bI1xcL1xcP0BdL2csRWM9L1sjXFw/Ol0vZyxEYz0vWyNcXD9dL2csSGM9L1sjXFw/QF0vZyxGYz0vIy9nO2Z1bmN0aW9uIEFjKGEsYil7dGhpcy5iPXRoaXMuYT1udWxsO3RoaXMuYz1hfHxudWxsO3RoaXMuZj0hIWI7fWZ1bmN0aW9uIFUoYSl7YS5hfHwoYS5hPW5ldyBRLGEuYj0wLGEuYyYmdGMoYS5jLGZ1bmN0aW9uKGIsYyl7YS5hZGQoZGVjb2RlVVJJQ29tcG9uZW50KGIucmVwbGFjZSgvXFwrL2csXCIgXCIpKSxjKTt9KSk7fWc9QWMucHJvdG90eXBlO1xuZy5hZGQ9ZnVuY3Rpb24oYSxiKXtVKHRoaXMpO3RoaXMuYz1udWxsO2E9Vih0aGlzLGEpO3ZhciBjPXRoaXMuYS5nZXQoYSk7Y3x8dGhpcy5hLnNldChhLGM9W10pO2MucHVzaChiKTt0aGlzLmIrPTE7cmV0dXJuIHRoaXN9O2Z1bmN0aW9uIE1jKGEsYil7VShhKTtiPVYoYSxiKTtSKGEuYS5iLGIpJiYoYS5jPW51bGwsYS5iLT1hLmEuZ2V0KGIpLmxlbmd0aCxyYyhhLmEsYikpO31mdW5jdGlvbiBOYyhhLGIpe1UoYSk7Yj1WKGEsYik7cmV0dXJuIFIoYS5hLmIsYil9Zy5mb3JFYWNoPWZ1bmN0aW9uKGEsYil7VSh0aGlzKTt0aGlzLmEuZm9yRWFjaChmdW5jdGlvbihjLGQpe2xhKGMsZnVuY3Rpb24oZSl7YS5jYWxsKGIsZSxkLHRoaXMpO30sdGhpcyk7fSx0aGlzKTt9O1xuZy5LPWZ1bmN0aW9uKCl7VSh0aGlzKTtmb3IodmFyIGE9dGhpcy5hLkMoKSxiPXRoaXMuYS5LKCksYz1bXSxkPTA7ZDxiLmxlbmd0aDtkKyspZm9yKHZhciBlPWFbZF0sZj0wO2Y8ZS5sZW5ndGg7ZisrKWMucHVzaChiW2RdKTtyZXR1cm4gY307Zy5DPWZ1bmN0aW9uKGEpe1UodGhpcyk7dmFyIGI9W107aWYobShhKSlOYyh0aGlzLGEpJiYoYj1vYShiLHRoaXMuYS5nZXQoVih0aGlzLGEpKSkpO2Vsc2V7YT10aGlzLmEuQygpO2Zvcih2YXIgYz0wO2M8YS5sZW5ndGg7YysrKWI9b2EoYixhW2NdKTt9cmV0dXJuIGJ9O2cuc2V0PWZ1bmN0aW9uKGEsYil7VSh0aGlzKTt0aGlzLmM9bnVsbDthPVYodGhpcyxhKTtOYyh0aGlzLGEpJiYodGhpcy5iLT10aGlzLmEuZ2V0KGEpLmxlbmd0aCk7dGhpcy5hLnNldChhLFtiXSk7dGhpcy5iKz0xO3JldHVybiB0aGlzfTtcbmcuZ2V0PWZ1bmN0aW9uKGEsYil7aWYoIWEpcmV0dXJuIGI7YT10aGlzLkMoYSk7cmV0dXJuIDA8YS5sZW5ndGg/U3RyaW5nKGFbMF0pOmJ9O2Z1bmN0aW9uIEljKGEsYixjKXtNYyhhLGIpOzA8Yy5sZW5ndGgmJihhLmM9bnVsbCxhLmEuc2V0KFYoYSxiKSxwYShjKSksYS5iKz1jLmxlbmd0aCk7fWcudG9TdHJpbmc9ZnVuY3Rpb24oKXtpZih0aGlzLmMpcmV0dXJuIHRoaXMuYztpZighdGhpcy5hKXJldHVybiBcIlwiO2Zvcih2YXIgYT1bXSxiPXRoaXMuYS5LKCksYz0wO2M8Yi5sZW5ndGg7YysrKXt2YXIgZD1iW2NdLGU9ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhkKSk7ZD10aGlzLkMoZCk7Zm9yKHZhciBmPTA7ZjxkLmxlbmd0aDtmKyspe3ZhciBoPWU7XCJcIiE9PWRbZl0mJihoKz1cIj1cIitlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGRbZl0pKSk7YS5wdXNoKGgpO319cmV0dXJuIHRoaXMuYz1hLmpvaW4oXCImXCIpfTtcbmZ1bmN0aW9uIHljKGEpe3ZhciBiPW5ldyBBYztiLmM9YS5jO2EuYSYmKGIuYT1uZXcgUShhLmEpLGIuYj1hLmIpO3JldHVybiBifWZ1bmN0aW9uIFYoYSxiKXtiPVN0cmluZyhiKTthLmYmJihiPWIudG9Mb3dlckNhc2UoKSk7cmV0dXJuIGJ9ZnVuY3Rpb24gR2MoYSxiKXtiJiYhYS5mJiYoVShhKSxhLmM9bnVsbCxhLmEuZm9yRWFjaChmdW5jdGlvbihjLGQpe3ZhciBlPWQudG9Mb3dlckNhc2UoKTtkIT1lJiYoTWModGhpcyxkKSxJYyh0aGlzLGUsYykpO30sYSkpO2EuZj1iO31mdW5jdGlvbiBRYygpe31mdW5jdGlvbiBSYygpe314KFJjLFFjKTtmdW5jdGlvbiBTYyhhKXt0aGlzLmE9YTt0aGlzLmI9dGhpcy5oPW51bGw7dGhpcy5nPSExO3RoaXMuaT1udWxsO3RoaXMuYz0tMTt0aGlzLmw9dGhpcy5mPW51bGw7fWc9U2MucHJvdG90eXBlO2cuTT1udWxsO2Z1bmN0aW9uIFVjKGEpe3ZhciBiPWEuYS5GLmE7aWYobnVsbCE9YilLKDQpLGI/KEsoMTApLFZjKGEuYSxhLCExKSk6KEsoMTEpLFZjKGEuYSxhLCEwKSk7ZWxzZXthLmI9bmV3IE0oYSx2b2lkIDAsdm9pZCAwKTthLmIuaD1hLmg7Yj1hLmE7Yj1XYyhiLGIuWSgpP2EuZjpudWxsLGEuaSk7Syg0KTtmYyhiLFwiVFlQRVwiLFwieG1saHR0cFwiKTt2YXIgYz1hLmEuaixkPWEuYS5JO2MmJmQmJlQoYixjLGQpO2RjKGEuYixiLCExLGEuZik7fX1nLiQ9ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuYS4kKGEpfTtnLmFib3J0PWZ1bmN0aW9uKCl7dGhpcy5iJiYodGhpcy5iLmNhbmNlbCgpLHRoaXMuYj1udWxsKTt0aGlzLmM9LTE7fTtnLkNhPWZ1bmN0aW9uKCl7cmV0dXJuICExfTtcbmcuRmE9ZnVuY3Rpb24oYSxiKXt0aGlzLmM9YS5vO2lmKDA9PXRoaXMuTSl7aWYoIXRoaXMuYS5vJiYoYT1hLmEpKXt2YXIgYz1oYyhhLFwiWC1DbGllbnQtV2lyZS1Qcm90b2NvbFwiKTt0aGlzLmw9Yz9jOm51bGw7dGhpcy5hLmomJihhPWhjKGEsXCJYLUhUVFAtU2Vzc2lvbi1JZFwiKSkmJih0aGlzLmEuST1hKTt9aWYoYil7dHJ5e3ZhciBkPXRoaXMuYS5qYS5hLnBhcnNlKGIpO31jYXRjaChlKXtiPXRoaXMuYTtiLm09dGhpcy5jO1coYiwyKTtyZXR1cm59dGhpcy5mPWRbMF07fWVsc2UgYj10aGlzLmEsYi5tPXRoaXMuYyxXKGIsMik7fWVsc2UgaWYoMT09dGhpcy5NKWlmKHRoaXMuZylLKDYpO2Vsc2UgaWYoXCIxMTExMVwiPT1iKXtpZihLKDUpLHRoaXMuZz0hMCwhQnx8MTA8PU51bWJlcihOYSkpdGhpcy5jPTIwMCx0aGlzLmIuY2FuY2VsKCksSygxMSksVmModGhpcy5hLHRoaXMsITApO31lbHNlIEsoNyksdGhpcy5nPSExO307XG5nLm5hPWZ1bmN0aW9uKCl7dGhpcy5jPXRoaXMuYi5vO2lmKHRoaXMuYi5iKTA9PXRoaXMuTT8odGhpcy5NPTEsVWModGhpcykpOjE9PXRoaXMuTSYmKHRoaXMuZz8oSygxMSksVmModGhpcy5hLHRoaXMsITApKTooSygxMCksVmModGhpcy5hLHRoaXMsITEpKSk7ZWxzZXswPT10aGlzLk0/Syg4KToxPT10aGlzLk0mJksoOSk7dmFyIGE9dGhpcy5hO2EubT10aGlzLmM7VyhhLDIpO319O2cuWT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmEuWSgpfTtnLm1hPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYS5tYSgpfTtmdW5jdGlvbiBYYygpe3RoaXMuYT10aGlzLmI9bnVsbDt9ZnVuY3Rpb24gWWMoKXt0aGlzLmE9bmV3IFE7fWZ1bmN0aW9uIFpjKGEpe3ZhciBiPXR5cGVvZiBhO3JldHVybiBcIm9iamVjdFwiPT1iJiZhfHxcImZ1bmN0aW9uXCI9PWI/XCJvXCIrKGFbdF18fChhW3RdPSsrZGEpKTpiLmNoYXJBdCgwKSthfVljLnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24oYSl7dGhpcy5hLnNldChaYyhhKSxhKTt9O1ljLnByb3RvdHlwZS5DPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYS5DKCl9O2Z1bmN0aW9uICRjKGEsYil7dGhpcy5iPWE7dGhpcy5hPWI7fWZ1bmN0aW9uIGFkKGEpe3RoaXMuZz1hfHxiZDtrLlBlcmZvcm1hbmNlTmF2aWdhdGlvblRpbWluZz8oYT1rLnBlcmZvcm1hbmNlLmdldEVudHJpZXNCeVR5cGUoXCJuYXZpZ2F0aW9uXCIpLGE9MDxhLmxlbmd0aCYmKFwiaHFcIj09YVswXS5uZXh0SG9wUHJvdG9jb2x8fFwiaDJcIj09YVswXS5uZXh0SG9wUHJvdG9jb2wpKTphPSEhKGsua2EmJmsua2EuRGEmJmsua2EuRGEoKSYmay5rYS5EYSgpLnliKTt0aGlzLmY9YT90aGlzLmc6MTt0aGlzLmE9bnVsbDsxPHRoaXMuZiYmKHRoaXMuYT1uZXcgWWMpO3RoaXMuYj1udWxsO3RoaXMuYz1bXTt9dmFyIGJkPTEwO2Z1bmN0aW9uIGNkKGEsYil7IWEuYSYmKHooYixcInNwZHlcIil8fHooYixcInF1aWNcIil8fHooYixcImgyXCIpKSYmKGEuZj1hLmcsYS5hPW5ldyBZYyxhLmImJihkZChhLGEuYiksYS5iPW51bGwpKTt9ZnVuY3Rpb24gZWQoYSl7cmV0dXJuIGEuYj8hMDphLmE/YS5hLmEuYz49YS5mOiExfVxuZnVuY3Rpb24gZmQoYSl7cmV0dXJuIGEuYj8xOmEuYT9hLmEuYS5jOjB9ZnVuY3Rpb24gZ2QoYSxiKXthLmI/YT1hLmI9PWI6YS5hPyhiPVpjKGIpLGE9UihhLmEuYS5iLGIpKTphPSExO3JldHVybiBhfWZ1bmN0aW9uIGRkKGEsYil7YS5hP2EuYS5hZGQoYik6YS5iPWI7fWZ1bmN0aW9uIGhkKGEsYil7aWYoYS5iJiZhLmI9PWIpYS5iPW51bGw7ZWxzZXt2YXIgYztpZihjPWEuYSljPVpjKGIpLGM9UihhLmEuYS5iLGMpO2MmJnJjKGEuYS5hLFpjKGIpKTt9fWFkLnByb3RvdHlwZS5jYW5jZWw9ZnVuY3Rpb24oKXt0aGlzLmM9aWQodGhpcyk7dGhpcy5iPyh0aGlzLmIuY2FuY2VsKCksdGhpcy5iPW51bGwpOnRoaXMuYSYmMCE9dGhpcy5hLmEuYyYmKGxhKHRoaXMuYS5DKCksZnVuY3Rpb24oYSl7YS5jYW5jZWwoKTt9KSxxYyh0aGlzLmEuYSkpO307XG5mdW5jdGlvbiBpZChhKXtpZihudWxsIT1hLmIpcmV0dXJuIGEuYy5jb25jYXQoYS5iLmopO2lmKG51bGwhPWEuYSYmMCE9YS5hLmEuYyl7dmFyIGI9YS5jO2xhKGEuYS5DKCksZnVuY3Rpb24oYyl7Yj1iLmNvbmNhdChjLmopO30pO3JldHVybiBifXJldHVybiBwYShhLmMpfWZ1bmN0aW9uIGpkKCl7fWpkLnByb3RvdHlwZS5zdHJpbmdpZnk9ZnVuY3Rpb24oYSl7cmV0dXJuIGsuSlNPTi5zdHJpbmdpZnkoYSx2b2lkIDApfTtqZC5wcm90b3R5cGUucGFyc2U9ZnVuY3Rpb24oYSl7cmV0dXJuIGsuSlNPTi5wYXJzZShhLHZvaWQgMCl9O2Z1bmN0aW9uIGtkKCl7dGhpcy5hPW5ldyBqZDt9ZnVuY3Rpb24gbGQoYSxiLGMpe3ZhciBkPWN8fFwiXCI7dHJ5e29jKGEsZnVuY3Rpb24oZSxmKXt2YXIgaD1lO3IoZSkmJihoPW9iKGUpKTtiLnB1c2goZCtmK1wiPVwiK2VuY29kZVVSSUNvbXBvbmVudChoKSk7fSk7fWNhdGNoKGUpe3Rocm93IGIucHVzaChkK1widHlwZT1cIitlbmNvZGVVUklDb21wb25lbnQoXCJfYmFkbWFwXCIpKSxlO319ZnVuY3Rpb24gbWQoYSxiKXt2YXIgYz1uZXcgS2I7aWYoay5JbWFnZSl7dmFyIGQ9bmV3IEltYWdlO2Qub25sb2FkPXYobmQsYyxkLFwiVGVzdExvYWRJbWFnZTogbG9hZGVkXCIsITAsYik7ZC5vbmVycm9yPXYobmQsYyxkLFwiVGVzdExvYWRJbWFnZTogZXJyb3JcIiwhMSxiKTtkLm9uYWJvcnQ9dihuZCxjLGQsXCJUZXN0TG9hZEltYWdlOiBhYm9ydFwiLCExLGIpO2Qub250aW1lb3V0PXYobmQsYyxkLFwiVGVzdExvYWRJbWFnZTogdGltZW91dFwiLCExLGIpO2suc2V0VGltZW91dChmdW5jdGlvbigpe2lmKGQub250aW1lb3V0KWQub250aW1lb3V0KCk7fSwxRTQpO2Quc3JjPWE7fWVsc2UgYighMSk7fWZ1bmN0aW9uIG5kKGEsYixjLGQsZSl7dHJ5e2Iub25sb2FkPW51bGwsYi5vbmVycm9yPW51bGwsYi5vbmFib3J0PW51bGwsYi5vbnRpbWVvdXQ9bnVsbCxlKGQpO31jYXRjaChmKXt9fXZhciBvZD1rLkpTT04ucGFyc2U7ZnVuY3Rpb24gWChhKXtHLmNhbGwodGhpcyk7dGhpcy5oZWFkZXJzPW5ldyBRO3RoaXMuSD1hfHxudWxsO3RoaXMuYj0hMTt0aGlzLnM9dGhpcy5hPW51bGw7dGhpcy5BPVwiXCI7dGhpcy5oPTA7dGhpcy5mPVwiXCI7dGhpcy5nPXRoaXMudz10aGlzLmw9dGhpcy52PSExO3RoaXMubz0wO3RoaXMubT1udWxsO3RoaXMuST1wZDt0aGlzLkQ9dGhpcy5GPSExO314KFgsRyk7dmFyIHBkPVwiXCIscWQ9L15odHRwcz8kL2kscmQ9W1wiUE9TVFwiLFwiUFVUXCJdO2c9WC5wcm90b3R5cGU7XG5nLmNhPWZ1bmN0aW9uKGEsYixjLGQpe2lmKHRoaXMuYSl0aHJvdyBFcnJvcihcIltnb29nLm5ldC5YaHJJb10gT2JqZWN0IGlzIGFjdGl2ZSB3aXRoIGFub3RoZXIgcmVxdWVzdD1cIit0aGlzLkErXCI7IG5ld1VyaT1cIithKTtiPWI/Yi50b1VwcGVyQ2FzZSgpOlwiR0VUXCI7dGhpcy5BPWE7dGhpcy5mPVwiXCI7dGhpcy5oPTA7dGhpcy52PSExO3RoaXMuYj0hMDt0aGlzLmE9bmV3IFhNTEh0dHBSZXF1ZXN0O3RoaXMucz10aGlzLkg/U2IodGhpcy5IKTpTYihXYik7dGhpcy5hLm9ucmVhZHlzdGF0ZWNoYW5nZT11KHRoaXMuRWEsdGhpcyk7dHJ5e3RoaXMudz0hMCx0aGlzLmEub3BlbihiLFN0cmluZyhhKSwhMCksdGhpcy53PSExO31jYXRjaChmKXtzZCh0aGlzLGYpO3JldHVybn1hPWN8fFwiXCI7dmFyIGU9bmV3IFEodGhpcy5oZWFkZXJzKTtkJiZvYyhkLGZ1bmN0aW9uKGYsaCl7ZS5zZXQoaCxmKTt9KTtkPW1hKGUuSygpKTtjPWsuRm9ybURhdGEmJmEgaW5zdGFuY2VvZiBrLkZvcm1EYXRhOyEoMDw9XG5qYShyZCxiKSl8fGR8fGN8fGUuc2V0KFwiQ29udGVudC1UeXBlXCIsXCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7Y2hhcnNldD11dGYtOFwiKTtlLmZvckVhY2goZnVuY3Rpb24oZixoKXt0aGlzLmEuc2V0UmVxdWVzdEhlYWRlcihoLGYpO30sdGhpcyk7dGhpcy5JJiYodGhpcy5hLnJlc3BvbnNlVHlwZT10aGlzLkkpO1wid2l0aENyZWRlbnRpYWxzXCJpbiB0aGlzLmEmJnRoaXMuYS53aXRoQ3JlZGVudGlhbHMhPT10aGlzLkYmJih0aGlzLmEud2l0aENyZWRlbnRpYWxzPXRoaXMuRik7dHJ5e3RkKHRoaXMpLDA8dGhpcy5vJiYoKHRoaXMuRD11ZCh0aGlzLmEpKT8odGhpcy5hLnRpbWVvdXQ9dGhpcy5vLHRoaXMuYS5vbnRpbWVvdXQ9dSh0aGlzLkJhLHRoaXMpKTp0aGlzLm09RWIodGhpcy5CYSx0aGlzLm8sdGhpcykpLHRoaXMubD0hMCx0aGlzLmEuc2VuZChhKSx0aGlzLmw9ITE7fWNhdGNoKGYpe3NkKHRoaXMsZik7fX07XG5mdW5jdGlvbiB1ZChhKXtyZXR1cm4gQiYmTWEoOSkmJmFhKGEudGltZW91dCkmJnZvaWQgMCE9PWEub250aW1lb3V0fWZ1bmN0aW9uIG5hKGEpe3JldHVybiBcImNvbnRlbnQtdHlwZVwiPT1hLnRvTG93ZXJDYXNlKCl9Zy5CYT1mdW5jdGlvbigpe1widW5kZWZpbmVkXCIhPXR5cGVvZiBnb29nJiZ0aGlzLmEmJih0aGlzLmY9XCJUaW1lZCBvdXQgYWZ0ZXIgXCIrdGhpcy5vK1wibXMsIGFib3J0aW5nXCIsdGhpcy5oPTgsdGhpcy5kaXNwYXRjaEV2ZW50KFwidGltZW91dFwiKSx0aGlzLmFib3J0KDgpKTt9O2Z1bmN0aW9uIHNkKGEsYil7YS5iPSExO2EuYSYmKGEuZz0hMCxhLmEuYWJvcnQoKSxhLmc9ITEpO2EuZj1iO2EuaD01O3ZkKGEpO3dkKGEpO31mdW5jdGlvbiB2ZChhKXthLnZ8fChhLnY9ITAsYS5kaXNwYXRjaEV2ZW50KFwiY29tcGxldGVcIiksYS5kaXNwYXRjaEV2ZW50KFwiZXJyb3JcIikpO31cbmcuYWJvcnQ9ZnVuY3Rpb24oYSl7dGhpcy5hJiZ0aGlzLmImJih0aGlzLmI9ITEsdGhpcy5nPSEwLHRoaXMuYS5hYm9ydCgpLHRoaXMuZz0hMSx0aGlzLmg9YXx8Nyx0aGlzLmRpc3BhdGNoRXZlbnQoXCJjb21wbGV0ZVwiKSx0aGlzLmRpc3BhdGNoRXZlbnQoXCJhYm9ydFwiKSx3ZCh0aGlzKSk7fTtnLkc9ZnVuY3Rpb24oKXt0aGlzLmEmJih0aGlzLmImJih0aGlzLmI9ITEsdGhpcy5nPSEwLHRoaXMuYS5hYm9ydCgpLHRoaXMuZz0hMSksd2QodGhpcywhMCkpO1guTi5HLmNhbGwodGhpcyk7fTtnLkVhPWZ1bmN0aW9uKCl7dGhpcy5qfHwodGhpcy53fHx0aGlzLmx8fHRoaXMuZz94ZCh0aGlzKTp0aGlzLlphKCkpO307Zy5aYT1mdW5jdGlvbigpe3hkKHRoaXMpO307XG5mdW5jdGlvbiB4ZChhKXtpZihhLmImJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBnb29nJiYoIWEuc1sxXXx8NCE9TyhhKXx8MiE9YS5UKCkpKWlmKGEubCYmND09TyhhKSlFYihhLkVhLDAsYSk7ZWxzZSBpZihhLmRpc3BhdGNoRXZlbnQoXCJyZWFkeXN0YXRlY2hhbmdlXCIpLDQ9PU8oYSkpe2EuYj0hMTt0cnl7dmFyIGI9YS5UKCk7YTpzd2l0Y2goYil7Y2FzZSAyMDA6Y2FzZSAyMDE6Y2FzZSAyMDI6Y2FzZSAyMDQ6Y2FzZSAyMDY6Y2FzZSAzMDQ6Y2FzZSAxMjIzOnZhciBjPSEwO2JyZWFrIGE7ZGVmYXVsdDpjPSExO312YXIgZDtpZighKGQ9Yykpe3ZhciBlO2lmKGU9MD09PWIpe3ZhciBmPVN0cmluZyhhLkEpLm1hdGNoKHNjKVsxXXx8bnVsbDtpZighZiYmay5zZWxmJiZrLnNlbGYubG9jYXRpb24pe3ZhciBoPWsuc2VsZi5sb2NhdGlvbi5wcm90b2NvbDtmPWguc3Vic3RyKDAsaC5sZW5ndGgtMSk7fWU9IXFkLnRlc3QoZj9mLnRvTG93ZXJDYXNlKCk6XCJcIik7fWQ9ZTt9aWYoZClhLmRpc3BhdGNoRXZlbnQoXCJjb21wbGV0ZVwiKSxcbmEuZGlzcGF0Y2hFdmVudChcInN1Y2Nlc3NcIik7ZWxzZXthLmg9Njt0cnl7dmFyIGw9MjxPKGEpP2EuYS5zdGF0dXNUZXh0OlwiXCI7fWNhdGNoKEUpe2w9XCJcIjt9YS5mPWwrXCIgW1wiK2EuVCgpK1wiXVwiO3ZkKGEpO319ZmluYWxseXt3ZChhKTt9fX1mdW5jdGlvbiB3ZChhLGIpe2lmKGEuYSl7dGQoYSk7dmFyIGM9YS5hLGQ9YS5zWzBdP2JhOm51bGw7YS5hPW51bGw7YS5zPW51bGw7Ynx8YS5kaXNwYXRjaEV2ZW50KFwicmVhZHlcIik7dHJ5e2Mub25yZWFkeXN0YXRlY2hhbmdlPWQ7fWNhdGNoKGUpe319fWZ1bmN0aW9uIHRkKGEpe2EuYSYmYS5EJiYoYS5hLm9udGltZW91dD1udWxsKTthLm0mJihrLmNsZWFyVGltZW91dChhLm0pLGEubT1udWxsKTt9ZnVuY3Rpb24gTyhhKXtyZXR1cm4gYS5hP2EuYS5yZWFkeVN0YXRlOjB9Zy5UPWZ1bmN0aW9uKCl7dHJ5e3JldHVybiAyPE8odGhpcyk/dGhpcy5hLnN0YXR1czotMX1jYXRjaChhKXtyZXR1cm4gLTF9fTtcbmcuYWE9ZnVuY3Rpb24oKXt0cnl7cmV0dXJuIHRoaXMuYT90aGlzLmEucmVzcG9uc2VUZXh0OlwiXCJ9Y2F0Y2goYSl7cmV0dXJuIFwiXCJ9fTtnLlVhPWZ1bmN0aW9uKGEpe2lmKHRoaXMuYSl7dmFyIGI9dGhpcy5hLnJlc3BvbnNlVGV4dDthJiYwPT1iLmluZGV4T2YoYSkmJihiPWIuc3Vic3RyaW5nKGEubGVuZ3RoKSk7cmV0dXJuIG9kKGIpfX07ZnVuY3Rpb24gaGMoYSxiKXtyZXR1cm4gYS5hP2EuYS5nZXRSZXNwb25zZUhlYWRlcihiKTpudWxsfWcueWE9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ofTtnLlhhPWZ1bmN0aW9uKCl7cmV0dXJuIG0odGhpcy5mKT90aGlzLmY6U3RyaW5nKHRoaXMuZil9O2Z1bmN0aW9uIHlkKGEpe3ZhciBiPVwiXCI7dmEoYSxmdW5jdGlvbihjLGQpe2IrPWQ7Yis9XCI6XCI7Yis9YztiKz1cIlxcclxcblwiO30pO3JldHVybiBifWZ1bmN0aW9uIHpkKGEsYixjKXthOntmb3IoZCBpbiBjKXt2YXIgZD0hMTticmVhayBhfWQ9ITA7fWlmKGQpcmV0dXJuIGE7Yz15ZChjKTtpZihtKGEpKXtiPWVuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoYikpO2M9bnVsbCE9Yz9cIj1cIitlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGMpKTpcIlwiO2lmKGIrPWMpe2M9YS5pbmRleE9mKFwiI1wiKTswPmMmJihjPWEubGVuZ3RoKTtkPWEuaW5kZXhPZihcIj9cIik7aWYoMD5kfHxkPmMpe2Q9Yzt2YXIgZT1cIlwiO31lbHNlIGU9YS5zdWJzdHJpbmcoZCsxLGMpO2E9W2Euc3Vic3RyKDAsZCksZSxhLnN1YnN0cihjKV07Yz1hWzFdO2FbMV09Yj9jP2MrXCImXCIrYjpiOmM7YT1hWzBdKyhhWzFdP1wiP1wiK2FbMV06XCJcIikrYVsyXTt9cmV0dXJuIGF9VChhLGIsYyk7cmV0dXJuIGF9ZnVuY3Rpb24gQWQoYSl7dGhpcy5mPVtdO3RoaXMuRj1uZXcgWGM7dGhpcy5nYT10aGlzLnBhPXRoaXMuQj10aGlzLmhhPXRoaXMuYT10aGlzLkk9dGhpcy5qPXRoaXMuVj10aGlzLmc9dGhpcy5KPXRoaXMuaT1udWxsO3RoaXMuUWE9dGhpcy5QPTA7dGhpcy5PYT0hIW4oXCJpbnRlcm5hbENoYW5uZWxQYXJhbXMuZmFpbEZhc3RcIixhKTt0aGlzLmlhPXRoaXMudz10aGlzLnM9dGhpcy5sPXRoaXMuaD10aGlzLmM9bnVsbDt0aGlzLm9hPSEwO3RoaXMubT10aGlzLnJhPXRoaXMuTz0tMTt0aGlzLlM9dGhpcy52PXRoaXMuQT0wO3RoaXMuTmE9bihcImludGVybmFsQ2hhbm5lbFBhcmFtcy5iYXNlUmV0cnlEZWxheU1zXCIsYSl8fDVFMzt0aGlzLlJhPW4oXCJpbnRlcm5hbENoYW5uZWxQYXJhbXMucmV0cnlEZWxheVNlZWRNc1wiLGEpfHwxRTQ7dGhpcy5QYT1uKFwiaW50ZXJuYWxDaGFubmVsUGFyYW1zLmZvcndhcmRDaGFubmVsTWF4UmV0cmllc1wiLGEpfHwyO3RoaXMucWE9bihcImludGVybmFsQ2hhbm5lbFBhcmFtcy5mb3J3YXJkQ2hhbm5lbFJlcXVlc3RUaW1lb3V0TXNcIixcbmEpfHwyRTQ7dGhpcy5LYT1hJiZhLnpifHx2b2lkIDA7dGhpcy5EPXZvaWQgMDt0aGlzLlI9YSYmYS5zdXBwb3J0c0Nyb3NzRG9tYWluWGhyfHwhMTt0aGlzLkg9XCJcIjt0aGlzLmI9bmV3IGFkKGEmJmEuY29uY3VycmVudFJlcXVlc3RMaW1pdCk7dGhpcy5qYT1uZXcga2Q7dGhpcy5vPWEmJnZvaWQgMCE9PWEuYmFja2dyb3VuZENoYW5uZWxUZXN0P2EuYmFja2dyb3VuZENoYW5uZWxUZXN0OiEwOyh0aGlzLlc9YSYmYS5mYXN0SGFuZHNoYWtlfHwhMSkmJiF0aGlzLm8mJih0aGlzLm89ITApO2EmJmEuZm9yY2VMb25nUG9sbGluZyYmKHRoaXMub2E9ITEpO3RoaXMuZmE9dm9pZCAwO31nPUFkLnByb3RvdHlwZTtnLndhPTg7Zy51PTE7XG5mdW5jdGlvbiBCZChhKXtDZChhKTtpZigzPT1hLnUpe3ZhciBiPWEuUCsrLGM9TihhLkIpO1QoYyxcIlNJRFwiLGEuSCk7VChjLFwiUklEXCIsYik7VChjLFwiVFlQRVwiLFwidGVybWluYXRlXCIpO0RkKGEsYyk7Yj1uZXcgTShhLGIsdm9pZCAwKTtiLkY9MjtiLmY9YmMoTihjKSk7Yz0hMTtrLm5hdmlnYXRvciYmay5uYXZpZ2F0b3Iuc2VuZEJlYWNvbiYmKGM9ay5uYXZpZ2F0b3Iuc2VuZEJlYWNvbihiLmYudG9TdHJpbmcoKSxcIlwiKSk7IWMmJmsuSW1hZ2UmJigobmV3IEltYWdlKS5zcmM9Yi5mLGM9ITApO2N8fChiLmE9Yi5nLiQobnVsbCksYi5hLmNhKGIuZikpO2Iudj13KCk7ZWMoYik7fUVkKGEpO31cbmZ1bmN0aW9uIENkKGEpe2EudyYmKGEudy5hYm9ydCgpLGEudz1udWxsKTthLmEmJihhLmEuY2FuY2VsKCksYS5hPW51bGwpO2EubCYmKGsuY2xlYXJUaW1lb3V0KGEubCksYS5sPW51bGwpO0ZkKGEpO2EuYi5jYW5jZWwoKTthLmgmJihhYShhLmgpJiZrLmNsZWFyVGltZW91dChhLmgpLGEuaD1udWxsKTt9ZnVuY3Rpb24gR2QoYSxiKXthLmYucHVzaChuZXcgJGMoYS5RYSsrLGIpKTszPT1hLnUmJkhkKGEpO31nLkNhPWZ1bmN0aW9uKCl7cmV0dXJuIDA9PXRoaXMudX07ZnVuY3Rpb24gSGQoYSl7ZWQoYS5iKXx8YS5ofHwoYS5oPSEwLHdiKGEuSGEsYSksYS5BPTApO31cbmZ1bmN0aW9uIElkKGEsYil7aWYoZmQoYS5iKT49YS5iLmYtKGEuaD8xOjApKXJldHVybiAhMTtpZihhLmgpcmV0dXJuIGEuZj1iLmouY29uY2F0KGEuZiksITA7aWYoMT09YS51fHwyPT1hLnV8fGEuQT49KGEuT2E/MDphLlBhKSlyZXR1cm4gITE7YS5oPU9iKHUoYS5IYSxhLGIpLEpkKGEsYS5BKSk7YS5BKys7cmV0dXJuICEwfVxuZy5IYT1mdW5jdGlvbihhKXtpZih0aGlzLmgpaWYodGhpcy5oPW51bGwsMT09dGhpcy51KXtpZighYSl7dGhpcy5QPU1hdGguZmxvb3IoMUU1Kk1hdGgucmFuZG9tKCkpO2E9dGhpcy5QKys7dmFyIGI9bmV3IE0odGhpcyxhLHZvaWQgMCksYz10aGlzLmk7dGhpcy5KJiYoYz8oYz13YShjKSx5YShjLHRoaXMuSikpOmM9dGhpcy5KKTtudWxsPT09dGhpcy5nJiYoYi5oPWMpO3ZhciBkO2lmKHRoaXMuVylhOntmb3IodmFyIGU9ZD0wO2U8dGhpcy5mLmxlbmd0aDtlKyspe2I6e3ZhciBmPXRoaXMuZltlXTtpZihcIl9fZGF0YV9fXCJpbiBmLmEmJihmPWYuYS5fX2RhdGFfXyxtKGYpKSl7Zj1mLmxlbmd0aDticmVhayBifWY9dm9pZCAwO31pZih2b2lkIDA9PT1mKWJyZWFrO2QrPWY7aWYoNDA5NjxkKXtkPWU7YnJlYWsgYX1pZig0MDk2PT09ZHx8ZT09PXRoaXMuZi5sZW5ndGgtMSl7ZD1lKzE7YnJlYWsgYX19ZD0xRTM7fWVsc2UgZD0xRTM7ZD1LZCh0aGlzLGIsZCk7ZT1OKHRoaXMuQik7VChlLFxuXCJSSURcIixhKTtUKGUsXCJDVkVSXCIsMjIpO3RoaXMubyYmdGhpcy5qJiZUKGUsXCJYLUhUVFAtU2Vzc2lvbi1JZFwiLHRoaXMuaik7RGQodGhpcyxlKTt0aGlzLmcmJmMmJnpkKGUsdGhpcy5nLGMpO2RkKHRoaXMuYixiKTt0aGlzLlc/KFQoZSxcIiRyZXFcIixkKSxUKGUsXCJTSURcIixcIm51bGxcIiksYi5TPSEwLGFjKGIsZSxudWxsKSk6YWMoYixlLGQpO3RoaXMudT0yO319ZWxzZSAzPT10aGlzLnUmJihhP0xkKHRoaXMsYSk6MD09dGhpcy5mLmxlbmd0aHx8ZWQodGhpcy5iKXx8TGQodGhpcykpO307XG5mdW5jdGlvbiBMZChhLGIpe3ZhciBjO2I/Yz1iLlc6Yz1hLlArKzt2YXIgZD1OKGEuQik7VChkLFwiU0lEXCIsYS5IKTtUKGQsXCJSSURcIixjKTtUKGQsXCJBSURcIixhLk8pO0RkKGEsZCk7YS5nJiZhLmkmJnpkKGQsYS5nLGEuaSk7Yz1uZXcgTShhLGMsYS5BKzEpO251bGw9PT1hLmcmJihjLmg9YS5pKTtiJiYoYS5mPWIuai5jb25jYXQoYS5mKSk7Yj1LZChhLGMsMUUzKTtjLnNldFRpbWVvdXQoTWF0aC5yb3VuZCguNSphLnFhKStNYXRoLnJvdW5kKC41KmEucWEqTWF0aC5yYW5kb20oKSkpO2RkKGEuYixjKTthYyhjLGQsYik7fWZ1bmN0aW9uIERkKGEsYil7YS5jJiZvYyh7fSxmdW5jdGlvbihjLGQpe1QoYixkLGMpO30pO31cbmZ1bmN0aW9uIEtkKGEsYixjKXtjPU1hdGgubWluKGEuZi5sZW5ndGgsYyk7dmFyIGQ9YS5jP3UoYS5jLlNhLGEuYyxhKTpudWxsO2E6Zm9yKHZhciBlPWEuZixmPS0xOzspe3ZhciBoPVtcImNvdW50PVwiK2NdOy0xPT1mPzA8Yz8oZj1lWzBdLmIsaC5wdXNoKFwib2ZzPVwiK2YpKTpmPTA6aC5wdXNoKFwib2ZzPVwiK2YpO2Zvcih2YXIgbD0hMCxFPTA7RTxjO0UrKyl7dmFyIEJiPWVbRV0uYixUYz1lW0VdLmE7QmItPWY7aWYoMD5CYilmPU1hdGgubWF4KDAsZVtFXS5iLTEwMCksbD0hMTtlbHNlIHRyeXtsZChUYyxoLFwicmVxXCIrQmIrXCJfXCIpO31jYXRjaChVZCl7ZCYmZChUYyk7fX1pZihsKXtkPWguam9pbihcIiZcIik7YnJlYWsgYX19YT1hLmYuc3BsaWNlKDAsYyk7Yi5qPWE7cmV0dXJuIGR9ZnVuY3Rpb24gTWQoYSl7YS5hfHxhLmx8fChhLlM9MSx3YihhLkdhLGEpLGEudj0wKTt9XG5mdW5jdGlvbiBOZChhKXtpZihhLmF8fGEubHx8Mzw9YS52KXJldHVybiAhMTthLlMrKzthLmw9T2IodShhLkdhLGEpLEpkKGEsYS52KSk7YS52Kys7cmV0dXJuICEwfWcuR2E9ZnVuY3Rpb24oKXt0aGlzLmw9bnVsbDt0aGlzLmE9bmV3IE0odGhpcyxcInJwY1wiLHRoaXMuUyk7bnVsbD09PXRoaXMuZyYmKHRoaXMuYS5oPXRoaXMuaSk7dGhpcy5hLko9MDt2YXIgYT1OKHRoaXMucGEpO1QoYSxcIlJJRFwiLFwicnBjXCIpO1QoYSxcIlNJRFwiLHRoaXMuSCk7VChhLFwiQ0lcIix0aGlzLmlhP1wiMFwiOlwiMVwiKTtUKGEsXCJBSURcIix0aGlzLk8pO0RkKHRoaXMsYSk7VChhLFwiVFlQRVwiLFwieG1saHR0cFwiKTt0aGlzLmcmJnRoaXMuaSYmemQoYSx0aGlzLmcsdGhpcy5pKTt0aGlzLkQmJnRoaXMuYS5zZXRUaW1lb3V0KHRoaXMuRCk7ZGModGhpcy5hLGEsITAsdGhpcy5nYSk7fTtcbmZ1bmN0aW9uIFZjKGEsYixjKXt2YXIgZD1iLmw7ZCYmY2QoYS5iLGQpO2EuaWE9YS5vYSYmYzthLm09Yi5jO2EuQj1XYyhhLG51bGwsYS5oYSk7SGQoYSk7fVxuZy5GYT1mdW5jdGlvbihhLGIpe2lmKDAhPXRoaXMudSYmKHRoaXMuYT09YXx8Z2QodGhpcy5iLGEpKSlpZih0aGlzLm09YS5vLCFhLnMmJmdkKHRoaXMuYixhKSYmMz09dGhpcy51KXt0cnl7dmFyIGM9dGhpcy5qYS5hLnBhcnNlKGIpO31jYXRjaChmKXtjPW51bGw7fWlmKHEoYykmJjM9PWMubGVuZ3RoKXtiPWM7aWYoMD09YlswXSlhOntpZighdGhpcy5sKXtpZih0aGlzLmEpaWYodGhpcy5hLnYrM0UzPGEudilGZCh0aGlzKSx0aGlzLmEuY2FuY2VsKCksdGhpcy5hPW51bGw7ZWxzZSBicmVhayBhO05kKHRoaXMpO0soMTgpO319ZWxzZSB0aGlzLnJhPWJbMV0sMDx0aGlzLnJhLXRoaXMuTyYmMzc1MDA+YlsyXSYmdGhpcy5pYSYmMD09dGhpcy52JiYhdGhpcy5zJiYodGhpcy5zPU9iKHUodGhpcy5ZYSx0aGlzKSw2RTMpKTtpZigxPj1mZCh0aGlzLmIpJiZ0aGlzLmZhKXt0cnl7dGhpcy5mYSgpO31jYXRjaChmKXt9dGhpcy5mYT12b2lkIDA7fX1lbHNlIFcodGhpcywxMSk7fWVsc2UgaWYoKGEuc3x8XG50aGlzLmE9PWEpJiZGZCh0aGlzKSwhcWEoYikpZm9yKGI9Yz10aGlzLmphLmEucGFyc2UoYiksYz0wO2M8Yi5sZW5ndGg7YysrKXt2YXIgZD1iW2NdO3RoaXMuTz1kWzBdO2Q9ZFsxXTtpZigyPT10aGlzLnUpaWYoXCJjXCI9PWRbMF0pe3RoaXMuSD1kWzFdO3RoaXMuZ2E9ZFsyXTt2YXIgZT1kWzNdO251bGwhPWUmJih0aGlzLndhPWUpO2Q9ZFs1XTtudWxsIT1kJiZhYShkKSYmMDxkJiYodGhpcy5EPTEuNSpkKTt0aGlzLm8mJihkPWEuYSkmJigoZT1oYyhkLFwiWC1DbGllbnQtV2lyZS1Qcm90b2NvbFwiKSkmJmNkKHRoaXMuYixlKSx0aGlzLmomJihkPWhjKGQsXCJYLUhUVFAtU2Vzc2lvbi1JZFwiKSkpJiYodGhpcy5JPWQsVCh0aGlzLkIsdGhpcy5qLGQpKTt0aGlzLnU9Mzt0aGlzLmMmJnRoaXMuYy52YSgpO2Q9YTt0aGlzLnBhPVdjKHRoaXMsdGhpcy5ZKCk/dGhpcy5nYTpudWxsLHRoaXMuaGEpO2Qucz8oaGQodGhpcy5iLGQpLChlPXRoaXMuRCkmJmQuc2V0VGltZW91dChlKSxkLmkmJihnYyhkKSxcbmVjKGQpKSx0aGlzLmE9ZCk6TWQodGhpcyk7MDx0aGlzLmYubGVuZ3RoJiZIZCh0aGlzKTt9ZWxzZVwic3RvcFwiIT1kWzBdJiZcImNsb3NlXCIhPWRbMF18fFcodGhpcyw3KTtlbHNlIDM9PXRoaXMudSYmKFwic3RvcFwiPT1kWzBdfHxcImNsb3NlXCI9PWRbMF0/XCJzdG9wXCI9PWRbMF0/Vyh0aGlzLDcpOkJkKHRoaXMpOlwibm9vcFwiIT1kWzBdJiZ0aGlzLmMmJnRoaXMuYy51YShkKSx0aGlzLnY9MCk7fX07Zy5ZYT1mdW5jdGlvbigpe251bGwhPXRoaXMucyYmKHRoaXMucz1udWxsLHRoaXMuYS5jYW5jZWwoKSx0aGlzLmE9bnVsbCxOZCh0aGlzKSxLKDE5KSk7fTtmdW5jdGlvbiBGZChhKXtudWxsIT1hLnMmJihrLmNsZWFyVGltZW91dChhLnMpLGEucz1udWxsKTt9XG5nLm5hPWZ1bmN0aW9uKGEpe3ZhciBiPW51bGw7aWYodGhpcy5hPT1hKXtGZCh0aGlzKTt0aGlzLmE9bnVsbDt2YXIgYz0yO31lbHNlIGlmKGdkKHRoaXMuYixhKSliPWEuaixoZCh0aGlzLmIsYSksYz0xO2Vsc2UgcmV0dXJuO3RoaXMubT1hLm87aWYoMCE9dGhpcy51KWlmKGEuYikxPT1jPyhiPXcoKS1hLnYsSS5kaXNwYXRjaEV2ZW50KG5ldyBOYihJLGEubD9hLmwubGVuZ3RoOjAsYix0aGlzLkEpKSxIZCh0aGlzKSk6TWQodGhpcyk7ZWxzZXt2YXIgZD1hLmM7aWYoMz09ZHx8MD09ZCYmMDx0aGlzLm18fCEoMT09YyYmSWQodGhpcyxhKXx8Mj09YyYmTmQodGhpcykpKXN3aXRjaChiJiYwPGIubGVuZ3RoJiYoYT10aGlzLmIsYS5jPWEuYy5jb25jYXQoYikpLGQpe2Nhc2UgMTpXKHRoaXMsNSk7YnJlYWs7Y2FzZSA0OlcodGhpcywxMCk7YnJlYWs7Y2FzZSAzOlcodGhpcyw2KTticmVhaztkZWZhdWx0OlcodGhpcywyKTt9fX07XG5mdW5jdGlvbiBKZChhLGIpe3ZhciBjPWEuTmErTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKmEuUmEpO2EubWEoKXx8KGMqPTIpO3JldHVybiBjKmJ9ZnVuY3Rpb24gVyhhLGIpe2lmKDI9PWIpe3ZhciBjPW51bGw7YS5jJiYoYz1udWxsKTt2YXIgZD11KGEuZWIsYSk7Y3x8KGM9bmV3IFMoXCIvL3d3dy5nb29nbGUuY29tL2ltYWdlcy9jbGVhcmRvdC5naWZcIiksay5sb2NhdGlvbiYmXCJodHRwXCI9PWsubG9jYXRpb24ucHJvdG9jb2x8fHVjKGMsXCJodHRwc1wiKSxiYyhjKSk7bWQoYy50b1N0cmluZygpLGQpO31lbHNlIEsoMik7YS51PTA7YS5jJiZhLmMudGEoYik7RWQoYSk7Q2QoYSk7fWcuZWI9ZnVuY3Rpb24oYSl7YT9LKDIpOksoMSk7fTtmdW5jdGlvbiBFZChhKXthLnU9MDthLm09LTE7aWYoYS5jKXtpZigwIT1pZChhLmIpLmxlbmd0aHx8MCE9YS5mLmxlbmd0aClhLmIuYy5sZW5ndGg9MCxwYShhLmYpLGEuZi5sZW5ndGg9MDthLmMuc2EoKTt9fVxuZnVuY3Rpb24gV2MoYSxiLGMpe3ZhciBkPUpjKGMpO2lmKFwiXCIhPWQuYiliJiZ2YyhkLGIrXCIuXCIrZC5iKSx3YyhkLGQuaSk7ZWxzZXt2YXIgZT1rLmxvY2F0aW9uLGY7Yj9mPWIrXCIuXCIrZS5ob3N0bmFtZTpmPWUuaG9zdG5hbWU7ZD1LYyhlLnByb3RvY29sLGYsK2UucG9ydCxjKTt9YS5WJiZ2YShhLlYsZnVuY3Rpb24oaCxsKXtUKGQsbCxoKTt9KTtiPWEuajtjPWEuSTtiJiZjJiZUKGQsYixjKTtUKGQsXCJWRVJcIixhLndhKTtEZChhLGQpO3JldHVybiBkfWcuJD1mdW5jdGlvbihhKXtpZihhJiYhdGhpcy5SKXRocm93IEVycm9yKFwiQ2FuJ3QgY3JlYXRlIHNlY29uZGFyeSBkb21haW4gY2FwYWJsZSBYaHJJbyBvYmplY3QuXCIpO2E9bmV3IFgodGhpcy5LYSk7YS5GPXRoaXMuUjtyZXR1cm4gYX07Zy5tYT1mdW5jdGlvbigpe3JldHVybiAhIXRoaXMuYyYmITB9O2cuWT1mdW5jdGlvbigpe3JldHVybiB0aGlzLlJ9O2Z1bmN0aW9uIE9kKCl7fWc9T2QucHJvdG90eXBlO2cudmE9ZnVuY3Rpb24oKXt9O1xuZy51YT1mdW5jdGlvbigpe307Zy50YT1mdW5jdGlvbigpe307Zy5zYT1mdW5jdGlvbigpe307Zy5TYT1mdW5jdGlvbigpe307ZnVuY3Rpb24gUGQoYSl7Zm9yKHZhciBiPWFyZ3VtZW50c1swXSxjPTE7Yzxhcmd1bWVudHMubGVuZ3RoO2MrKyl7dmFyIGQ9YXJndW1lbnRzW2NdO2lmKDA9PWQubGFzdEluZGV4T2YoXCIvXCIsMCkpYj1kO2Vsc2V7dmFyIGU7KGU9XCJcIj09Yil8fChlPWIubGVuZ3RoLTEsZT0wPD1lJiZiLmluZGV4T2YoXCIvXCIsZSk9PWUpO2U/Yis9ZDpiKz1cIi9cIitkO319cmV0dXJuIGJ9ZnVuY3Rpb24gUWQoKXtpZihCJiYhKDEwPD1OdW1iZXIoTmEpKSl0aHJvdyBFcnJvcihcIkVudmlyb25tZW50YWwgZXJyb3I6IG5vIGF2YWlsYWJsZSB0cmFuc3BvcnQuXCIpO31RZC5wcm90b3R5cGUuYT1mdW5jdGlvbihhLGIpe3JldHVybiBuZXcgWShhLGIpfTtcbmZ1bmN0aW9uIFkoYSxiKXtHLmNhbGwodGhpcyk7dGhpcy5hPW5ldyBBZChiKTt0aGlzLmc9YTt0aGlzLm09YiYmYi50ZXN0VXJsP2IudGVzdFVybDpQZCh0aGlzLmcsXCJ0ZXN0XCIpO3RoaXMuYj1iJiZiLm1lc3NhZ2VVcmxQYXJhbXN8fG51bGw7YT1iJiZiLm1lc3NhZ2VIZWFkZXJzfHxudWxsO2ImJmIuY2xpZW50UHJvdG9jb2xIZWFkZXJSZXF1aXJlZCYmKGE/YVtcIlgtQ2xpZW50LVByb3RvY29sXCJdPVwid2ViY2hhbm5lbFwiOmE9e1wiWC1DbGllbnQtUHJvdG9jb2xcIjpcIndlYmNoYW5uZWxcIn0pO3RoaXMuYS5pPWE7YT1iJiZiLmluaXRNZXNzYWdlSGVhZGVyc3x8bnVsbDtiJiZiLm1lc3NhZ2VDb250ZW50VHlwZSYmKGE/YVtcIlgtV2ViQ2hhbm5lbC1Db250ZW50LVR5cGVcIl09Yi5tZXNzYWdlQ29udGVudFR5cGU6YT17XCJYLVdlYkNoYW5uZWwtQ29udGVudC1UeXBlXCI6Yi5tZXNzYWdlQ29udGVudFR5cGV9KTtiJiZiLnhhJiYoYT9hW1wiWC1XZWJDaGFubmVsLUNsaWVudC1Qcm9maWxlXCJdPWIueGE6XG5hPXtcIlgtV2ViQ2hhbm5lbC1DbGllbnQtUHJvZmlsZVwiOmIueGF9KTt0aGlzLmEuSj1hOyhhPWImJmIuaHR0cEhlYWRlcnNPdmVyd3JpdGVQYXJhbSkmJiFxYShhKSYmKHRoaXMuYS5nPWEpO3RoaXMubD1iJiZiLnN1cHBvcnRzQ3Jvc3NEb21haW5YaHJ8fCExO3RoaXMuaD1iJiZiLnNlbmRSYXdKc29ufHwhMTsoYj1iJiZiLmh0dHBTZXNzaW9uSWRQYXJhbSkmJiFxYShiKSYmKHRoaXMuYS5qPWIsYT10aGlzLmIsbnVsbCE9PWEmJmIgaW4gYSYmKGE9dGhpcy5iLGIgaW4gYSYmZGVsZXRlIGFbYl0pKTt0aGlzLmY9bmV3IFoodGhpcyk7fXgoWSxHKTtnPVkucHJvdG90eXBlO2cuYWRkRXZlbnRMaXN0ZW5lcj1mdW5jdGlvbihhLGIsYyxkKXtZLk4uYWRkRXZlbnRMaXN0ZW5lci5jYWxsKHRoaXMsYSxiLGMsZCk7fTtnLnJlbW92ZUV2ZW50TGlzdGVuZXI9ZnVuY3Rpb24oYSxiLGMsZCl7WS5OLnJlbW92ZUV2ZW50TGlzdGVuZXIuY2FsbCh0aGlzLGEsYixjLGQpO307XG5nLlZhPWZ1bmN0aW9uKCl7dGhpcy5hLmM9dGhpcy5mO3RoaXMubCYmKHRoaXMuYS5SPSEwKTt2YXIgYT10aGlzLmEsYj10aGlzLm0sYz10aGlzLmcsZD10aGlzLmJ8fHZvaWQgMDtLKDApO2EuaGE9YzthLlY9ZHx8e307YS5vJiYoYS5GLmI9W10sYS5GLmE9ITEpO2Eudz1uZXcgU2MoYSk7bnVsbD09PWEuZyYmKGEudy5oPWEuaSk7Yz1iO2EuZyYmYS5pJiYoYz16ZChiLGEuZyxhLmkpKTthPWEudzthLmk9YztiPVdjKGEuYSxudWxsLGEuaSk7SygzKTtjPWEuYS5GLmI7bnVsbCE9Yz8oYS5mPWNbMF0sYS5NPTEsVWMoYSkpOihmYyhiLFwiTU9ERVwiLFwiaW5pdFwiKSwhYS5hLm8mJmEuYS5qJiZmYyhiLFwiWC1IVFRQLVNlc3Npb24tSWRcIixhLmEuaiksYS5iPW5ldyBNKGEsdm9pZCAwLHZvaWQgMCksYS5iLmg9YS5oLGRjKGEuYixiLCExLG51bGwpLGEuTT0wKTt9O2cuY2xvc2U9ZnVuY3Rpb24oKXtCZCh0aGlzLmEpO307XG5nLldhPWZ1bmN0aW9uKGEpe2lmKG0oYSkpe3ZhciBiPXt9O2IuX19kYXRhX189YTtHZCh0aGlzLmEsYik7fWVsc2UgdGhpcy5oPyhiPXt9LGIuX19kYXRhX189b2IoYSksR2QodGhpcy5hLGIpKTpHZCh0aGlzLmEsYSk7fTtnLkc9ZnVuY3Rpb24oKXt0aGlzLmEuYz1udWxsO2RlbGV0ZSB0aGlzLmY7QmQodGhpcy5hKTtkZWxldGUgdGhpcy5hO1kuTi5HLmNhbGwodGhpcyk7fTtmdW5jdGlvbiBSZChhKXtVYi5jYWxsKHRoaXMpO3ZhciBiPWEuX19zbV9fO2lmKGIpe2E6e2Zvcih2YXIgYyBpbiBiKXthPWM7YnJlYWsgYX1hPXZvaWQgMDt9KHRoaXMuYz1hKT8oYT10aGlzLmMsdGhpcy5kYXRhPW51bGwhPT1iJiZhIGluIGI/YlthXTp2b2lkIDApOnRoaXMuZGF0YT1iO31lbHNlIHRoaXMuZGF0YT1hO314KFJkLFViKTtmdW5jdGlvbiBTZCgpe1ZiLmNhbGwodGhpcyk7dGhpcy5zdGF0dXM9MTt9eChTZCxWYik7ZnVuY3Rpb24gWihhKXt0aGlzLmE9YTt9eChaLE9kKTtaLnByb3RvdHlwZS52YT1mdW5jdGlvbigpe3RoaXMuYS5kaXNwYXRjaEV2ZW50KFwiYVwiKTt9O1xuWi5wcm90b3R5cGUudWE9ZnVuY3Rpb24oYSl7dGhpcy5hLmRpc3BhdGNoRXZlbnQobmV3IFJkKGEpKTt9O1oucHJvdG90eXBlLnRhPWZ1bmN0aW9uKGEpe3RoaXMuYS5kaXNwYXRjaEV2ZW50KG5ldyBTZChhKSk7fTtaLnByb3RvdHlwZS5zYT1mdW5jdGlvbigpe3RoaXMuYS5kaXNwYXRjaEV2ZW50KFwiYlwiKTt9O3ZhciBUZD12KGZ1bmN0aW9uKGEsYil7ZnVuY3Rpb24gYygpe31jLnByb3RvdHlwZT1hLnByb3RvdHlwZTt2YXIgZD1uZXcgYzthLmFwcGx5KGQsQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpKTtyZXR1cm4gZH0sUWQpOy8qXG5cbiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxuXG4gTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG5cbiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuXG4gVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4qL1xuUWQucHJvdG90eXBlLmNyZWF0ZVdlYkNoYW5uZWw9UWQucHJvdG90eXBlLmE7WS5wcm90b3R5cGUuc2VuZD1ZLnByb3RvdHlwZS5XYTtZLnByb3RvdHlwZS5vcGVuPVkucHJvdG90eXBlLlZhO1kucHJvdG90eXBlLmNsb3NlPVkucHJvdG90eXBlLmNsb3NlO1BiLk5PX0VSUk9SPTA7UGIuVElNRU9VVD04O1BiLkhUVFBfRVJST1I9NjtRYi5DT01QTEVURT1cImNvbXBsZXRlXCI7VGIuRXZlbnRUeXBlPUw7TC5PUEVOPVwiYVwiO0wuQ0xPU0U9XCJiXCI7TC5FUlJPUj1cImNcIjtMLk1FU1NBR0U9XCJkXCI7Ry5wcm90b3R5cGUubGlzdGVuPUcucHJvdG90eXBlLnphO1gucHJvdG90eXBlLmxpc3Rlbk9uY2U9WC5wcm90b3R5cGUuQWE7WC5wcm90b3R5cGUuZ2V0TGFzdEVycm9yPVgucHJvdG90eXBlLlhhO1gucHJvdG90eXBlLmdldExhc3RFcnJvckNvZGU9WC5wcm90b3R5cGUueWE7WC5wcm90b3R5cGUuZ2V0U3RhdHVzPVgucHJvdG90eXBlLlQ7WC5wcm90b3R5cGUuZ2V0UmVzcG9uc2VKc29uPVgucHJvdG90eXBlLlVhO1xuWC5wcm90b3R5cGUuZ2V0UmVzcG9uc2VUZXh0PVgucHJvdG90eXBlLmFhO1gucHJvdG90eXBlLnNlbmQ9WC5wcm90b3R5cGUuY2E7dmFyIHRtcD17Y3JlYXRlV2ViQ2hhbm5lbFRyYW5zcG9ydDpUZCxFcnJvckNvZGU6UGIsRXZlbnRUeXBlOlFiLFdlYkNoYW5uZWw6VGIsWGhySW86WH07XG52YXIgdG1wXzEgPSB0bXAuY3JlYXRlV2ViQ2hhbm5lbFRyYW5zcG9ydDtcbnZhciB0bXBfMiA9IHRtcC5FcnJvckNvZGU7XG52YXIgdG1wXzMgPSB0bXAuRXZlbnRUeXBlO1xudmFyIHRtcF80ID0gdG1wLldlYkNoYW5uZWw7XG52YXIgdG1wXzUgPSB0bXAuWGhySW87XG5cbmV4cG9ydCBkZWZhdWx0IHRtcDtcbmV4cG9ydCB7IHRtcF8yIGFzIEVycm9yQ29kZSwgdG1wXzMgYXMgRXZlbnRUeXBlLCB0bXBfNCBhcyBXZWJDaGFubmVsLCB0bXBfNSBhcyBYaHJJbywgdG1wXzEgYXMgY3JlYXRlV2ViQ2hhbm5lbFRyYW5zcG9ydCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguZXNtLmpzLm1hcFxuIiwiZXhwb3J0IGNsYXNzIFBvaW50MmQge1xyXG4gIHg6IG51bWJlcjtcclxuICB5OiBudW1iZXI7XHJcblxyXG4gIGNvbnN0cnVjdG9yKHg6IG51bWJlciwgeTogbnVtYmVyKSB7XHJcbiAgICB4ID0geDtcclxuICAgIHkgPSB5O1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIExpbmUge1xyXG4gIDA6IFBvaW50MmQ7XHJcbiAgMTogUG9pbnQyZDtcclxuXHJcbiAgY29uc3RydWN0b3IocG9pbnQxOiBQb2ludDJkLCBwb2ludDI6IFBvaW50MmQpIHtcclxuICAgIHRoaXNbMF0gPSBwb2ludDE7XHJcbiAgICB0aGlzWzFdID0gcG9pbnQyO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGVudW0gT3J0aG9MaW5lTGluZVJlbGF0aW9uc2hpcFR5cGUge1xyXG4gIE5vdGhpbmcsXHJcbiAgSW50ZXJzZWN0LFxyXG4gIE92ZXJsYXBcclxufVxyXG5cclxuZXhwb3J0IGVudW0gUmVjdFJlY3RSZWxhdGlvbnNoaXBUeXBlIHtcclxuICBEaXNqb2ludCxcclxuICBNYXRjaCxcclxuICBJbnRlcnNlY3QsXHJcbiAgQUluc2lkZUIsXHJcbiAgQkluc2lkZUEsXHJcbiAgVGFuZ2VudCBcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIE9ydGhvTGluZUxpbmVSZWxhdGlvbnNoaXAge1xyXG4gIHR5cGU6IE9ydGhvTGluZUxpbmVSZWxhdGlvbnNoaXBUeXBlO1xyXG4gIGludGVyc2VjdGlvbjogUG9pbnQyZDtcclxuICBvdmVybGFwOiBMaW5lO1xyXG5cclxuICAvLyAob3J0aG9MaW5lTGluZVJlbGF0aW9uc2hpcFR5cGUsIHtpbnRlcnNlY3Rpb249dW5kZWZpbmVkLCBvdmVybGFwPXVuZGVmaW5lZH0gPSB7fSlcclxuICBjb25zdHJ1Y3RvcihvcnRob0xpbmVMaW5lUmVsYXRpb25zaGlwVHlwZTogT3J0aG9MaW5lTGluZVJlbGF0aW9uc2hpcFR5cGUsIGludGVyc2VjdGlvbjogUG9pbnQyZCA9IHVuZGVmaW5lZCwgb3ZlcmxhcDogTGluZSA9IHVuZGVmaW5lZCkge1xyXG4gICAgdGhpcy50eXBlID0gb3J0aG9MaW5lTGluZVJlbGF0aW9uc2hpcFR5cGU7XHJcbiAgICB0aGlzLmludGVyc2VjdGlvbiA9IGludGVyc2VjdGlvbjtcclxuICAgIHRoaXMub3ZlcmxhcCA9IG92ZXJsYXA7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgUmVjdGFuZ2xlIHtcclxuICB4OiBudW1iZXI7XHJcbiAgeTogbnVtYmVyO1xyXG4gIHdpZHRoOiBudW1iZXI7XHJcbiAgaGVpZ2h0OiBudW1iZXI7XHJcblxyXG4gIGNvbnN0cnVjdG9yKHg6IG51bWJlciwgeTogbnVtYmVyLCB3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlcikge1xyXG4gICAgeCA9IHg7XHJcbiAgICB5ID0geTtcclxuICAgIHdpZHRoID0gd2lkdGg7XHJcbiAgICBoZWlnaHQgPSBoZWlnaHQ7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgR2VvbWV0cnlDYWxjIHtcclxuXHJcbiAgc3RhdGljIHB0c0Rpc3RhbmNlKHB0MTogUG9pbnQyZCwgcHQyOiBQb2ludDJkKSB7XHJcbiAgICByZXR1cm4gTWF0aC5zcXJ0KE1hdGgucG93KChwdDIueCAtIHB0MS54KSwgMikgKyAoTWF0aC5wb3coKHB0Mi55IC0gcHQxLnkpLCAyKSkpO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGxpbmVNaWRkbGVQdChsaW5lOiBMaW5lKSB7XHJcbiAgICByZXR1cm4geyB4OiAobGluZVswXS54ICsgbGluZVsxXS54KSAvIDIsIHk6IChsaW5lWzBdLnkgKyBsaW5lWzFdLnkpIC8gMiB9O1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGFyZUxpbmVzRXF1YWwobGluZTE6IExpbmUsIGxpbmUyOiBMaW5lKSB7XHJcbiAgICByZXR1cm4gKHRoaXMuYXJlUG9pbnRzRXF1YWwobGluZTFbMF0sIGxpbmUyWzBdKSAmJiB0aGlzLmFyZVBvaW50c0VxdWFsKGxpbmUxWzFdLCBsaW5lMlsxXSkpIHx8ICh0aGlzLmFyZVBvaW50c0VxdWFsKGxpbmUxWzBdLCBsaW5lMlsxXSkgJiYgdGhpcy5hcmVQb2ludHNFcXVhbChsaW5lMVsxXSwgbGluZTJbMF0pKTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBhcmVQb2ludHNFcXVhbChwb2ludDE6IFBvaW50MmQsIHBvaW50MjogUG9pbnQyZCkge1xyXG4gICAgcmV0dXJuIHBvaW50MS54ID09PSBwb2ludDIueCAmJiBwb2ludDEueSA9PT0gcG9pbnQyLnk7XHJcbiAgfVxyXG5cclxufVxyXG4iLCJpbXBvcnQgdHlwZSB7IFdvcmtzcGFjZSB9IGZyb20gXCIuL3dvcmtzcGFjZVwiO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBQYW5lbFNlY3Rpb24ge1xyXG4gIG5hbWU6IHN0cmluZztcclxuICBidXR0b24/OiBIVE1MRWxlbWVudDtcclxuICBib2R5OiBIVE1MRWxlbWVudDtcclxufVxyXG5cclxuZW51bSBQYW5lbFBvc2l0aW9uIHtcclxuICBSaWdodCxcclxuICBCb3R0b21cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIE1haW5QYW5lbCB7XHJcbiAgcGFuZWxzU3RvcmFnZTogSFRNTEVsZW1lbnQ7XHJcbiAgcGFuZWxDb250YWluZXI6IEhUTUxFbGVtZW50O1xyXG4gIHBhbmVsR3JpcDogSFRNTEVsZW1lbnQ7XHJcbiAgcGFuZWxDb250ZW50OiBIVE1MRWxlbWVudDtcclxuICBwYW5lbEhlYWRlcjogSFRNTEVsZW1lbnQ7XHJcbiAgcGFuZWxCb2R5OiBIVE1MRWxlbWVudDtcclxuICBwYW5lbEZvb3RlcjogSFRNTEVsZW1lbnQ7XHJcbiAgYWN0aXZlU2VjdGlvbjogUGFuZWxTZWN0aW9uO1xyXG4gIGlzT3BlbjogYm9vbGVhbjtcclxuICBwYW5lbFNpZGU6IFBhbmVsUG9zaXRpb247XHJcbiAgc2VjdGlvbnM6IFBhbmVsU2VjdGlvbltdID0gW107XHJcbiAgbWVkaXVtQnJlYWtwb2ludDogTWVkaWFRdWVyeUxpc3Q7XHJcbiAgLy8gUGFuZWwgZGltZW5zaW9ucyBhbmQgcmVzaXppbmcuXHJcbiAgcGFuZWxXaWR0aCA9IDI1MDtcclxuICBwYW5lbEhlaWdodCA9IDIwMDtcclxuICByZXNpemluZ1dpZHRoID0gZmFsc2U7XHJcbiAgcmVzaXppbmdIZWlnaHQgPSBmYWxzZTtcclxuICBzdGFydFg6IG51bWJlcjtcclxuICBzdGFydFdpZHRoOiBudW1iZXI7XHJcbiAgc3RhcnRZOiBudW1iZXI7XHJcbiAgc3RhcnRIZWlnaHQ6IG51bWJlcjtcclxuXHJcblxyXG4gIGNvbnN0cnVjdG9yKHBhbmVsc1N0b3JhZ2U6IEhUTUxFbGVtZW50LCBXb3Jrc3BhY2U6IFdvcmtzcGFjZSkge1xyXG4gICAgdGhpcy5wYW5lbHNTdG9yYWdlID0gcGFuZWxzU3RvcmFnZTtcclxuICAgIC8vIENyZWF0aW9uIG9mIEhUTUwgc3RydWN0dXJlLlxyXG4gICAgdGhpcy5wYW5lbENvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgdGhpcy5wYW5lbENvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdtYWluUGFuZWwnLCAncmlnaHQnKTtcclxuICAgIHRoaXMucGFuZWxHcmlwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICB0aGlzLnBhbmVsR3JpcC5jbGFzc0xpc3QuYWRkKCdwYW5lbC1ncmlwJyk7XHJcbiAgICB0aGlzLnBhbmVsQ29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMucGFuZWxHcmlwKTtcclxuICAgIHRoaXMucGFuZWxDb250ZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICB0aGlzLnBhbmVsQ29udGVudC5jbGFzc0xpc3QuYWRkKCdwYW5lbC1jb250ZW50Jyk7XHJcbiAgICB0aGlzLnBhbmVsSGVhZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICB0aGlzLnBhbmVsSGVhZGVyLmNsYXNzTGlzdC5hZGQoJ3BhbmVsLWhlYWRlcicpO1xyXG4gICAgdGhpcy5wYW5lbEJvZHkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgIHRoaXMucGFuZWxCb2R5LmNsYXNzTGlzdC5hZGQoJ3BhbmVsLWJvZHknKTtcclxuICAgIHRoaXMucGFuZWxGb290ZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgIHRoaXMucGFuZWxGb290ZXIuY2xhc3NMaXN0LmFkZCgncGFuZWwtZm9vdGVyJyk7XHJcbiAgICB0aGlzLnBhbmVsQ29udGVudC5hcHBlbmRDaGlsZCh0aGlzLnBhbmVsSGVhZGVyKTtcclxuICAgIHRoaXMucGFuZWxDb250ZW50LmFwcGVuZENoaWxkKHRoaXMucGFuZWxCb2R5KTtcclxuICAgIHRoaXMucGFuZWxDb250ZW50LmFwcGVuZENoaWxkKHRoaXMucGFuZWxGb290ZXIpO1xyXG4gICAgdGhpcy5wYW5lbENvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLnBhbmVsQ29udGVudCk7XHJcblxyXG4gICAgLy8gVE9ETyBSZW1vdmUgdGhpcyBldmVudCBsaXN0ZW5lcnMgd2hlbiB0aGUgcGFuZWwgaXMgZGVsZXRlZC5cclxuICAgIFdvcmtzcGFjZS53b3Jrc3BhY2VDb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgZSA9PiB7XHJcbiAgICAgIGlmICh0aGlzLnJlc2l6aW5nV2lkdGgpIHtcclxuICAgICAgICB0aGlzLnJlc2l6ZVdpZHRoKGUpO1xyXG4gICAgICB9IGVsc2UgaWYgKHRoaXMucmVzaXppbmdIZWlnaHQpIHtcclxuICAgICAgICB0aGlzLnJlc2l6ZUhlaWdodChlKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICBXb3Jrc3BhY2Uud29ya3NwYWNlQ29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCAoKSA9PiB7IC8vIEFkZCBhbHNvIHRoZSBzYW1lIGZvciBtb3VzZWxlYXZlP1xyXG4gICAgICB0aGlzLnJlc2l6aW5nV2lkdGggPSBmYWxzZTtcclxuICAgICAgdGhpcy5yZXNpemluZ0hlaWdodCA9IGZhbHNlO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5zZXRBY3RpdmUgPSB0aGlzLnNldEFjdGl2ZS5iaW5kKHRoaXMpO1xyXG4gICAgdGhpcy5wYW5lbEhlYWRlci5vbmNsaWNrID0gZSA9PiB7XHJcbiAgICAgIGNvbnN0IGJ1dHRvbiA9IChlLnRhcmdldCBhcyBIVE1MRWxlbWVudCkuY2xvc2VzdCgnW2RhdGEtYnRuXScpIGFzIEhUTUxFbGVtZW50O1xyXG4gICAgICBpZiAoYnV0dG9uICYmICFidXR0b24uY2xhc3NMaXN0LmNvbnRhaW5zKCdhY3RpdmUnKSlcclxuICAgICAgICB0aGlzLnNldEFjdGl2ZShidXR0b24uaW5uZXJUZXh0KTtcclxuICAgIH07XHJcbiAgICAvLyBNZWRpYSBicmVha3BvaW50IHRvIGRldGVybWluZSB0aGUgcGFuZWwgcG9zaXRpb24uXHJcbiAgICB0aGlzLm1lZGl1bUJyZWFrcG9pbnQgPSB3aW5kb3cubWF0Y2hNZWRpYSgnKG1heC13aWR0aDogNzAwcHgpJyk7XHJcbiAgICB0aGlzLnBhbmVsUG9zaXRvbiA9IHRoaXMucGFuZWxQb3NpdG9uLmJpbmQodGhpcyk7XHJcbiAgICB0aGlzLm1lZGl1bUJyZWFrcG9pbnQuYWRkTGlzdGVuZXIodGhpcy5wYW5lbFBvc2l0b24gYXMgKHRoaXM6IE1lZGlhUXVlcnlMaXN0KSA9PiBhbnkpO1xyXG4gICAgdGhpcy5wYW5lbFBvc2l0b24odGhpcy5tZWRpdW1CcmVha3BvaW50KTtcclxuICAgIC8vIFBhbmVsIGRpbWVuc2lvbnMgYW5kIHJlc2l6aW5nLiAgICBcclxuICAgIHRoaXMucGFuZWxDb250YWluZXIuc3R5bGUuc2V0UHJvcGVydHkoXCItLXdpZHRoXCIsIHRoaXMucGFuZWxXaWR0aCArICdweCcpO1xyXG4gICAgdGhpcy5wYW5lbENvbnRhaW5lci5zdHlsZS5zZXRQcm9wZXJ0eShcIi0taGVpZ2h0XCIsIHRoaXMucGFuZWxIZWlnaHQgKyAncHgnKTtcclxuICAgIHRoaXMucGFuZWxHcmlwLm9ubW91c2Vkb3duID0gZSA9PiB7XHJcbiAgICAgIGlmICh0aGlzLnBhbmVsU2lkZSA9PT0gUGFuZWxQb3NpdGlvbi5SaWdodCkge1xyXG4gICAgICAgIHRoaXMucmVzaXppbmdXaWR0aCA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5yZXNpemluZ0hlaWdodCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuc3RhcnRYID0gZS5wYWdlWDtcclxuICAgICAgICB0aGlzLnN0YXJ0V2lkdGggPSB0aGlzLnBhbmVsV2lkdGg7XHJcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5wYW5lbFNpZGUgPT09IFBhbmVsUG9zaXRpb24uQm90dG9tKSB7XHJcbiAgICAgICAgdGhpcy5yZXNpemluZ0hlaWdodCA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5yZXNpemluZ1dpZHRoID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5zdGFydFkgPSBlLnBhZ2VZO1xyXG4gICAgICAgIHRoaXMuc3RhcnRIZWlnaHQgPSB0aGlzLnBhbmVsSGVpZ2h0O1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gICAgV29ya3NwYWNlLndvcmtzcGFjZUNvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLnBhbmVsQ29udGFpbmVyKTtcclxuICB9XHJcblxyXG4gIHJlc2l6ZVdpZHRoKG1vdXNlRXZlbnQ6IE1vdXNlRXZlbnQpIHtcclxuICAgIHRoaXMucGFuZWxXaWR0aCA9IHRoaXMuc3RhcnRXaWR0aCAtIChtb3VzZUV2ZW50LnBhZ2VYIC0gdGhpcy5zdGFydFgpO1xyXG4gICAgdGhpcy5wYW5lbENvbnRhaW5lci5zdHlsZS5zZXRQcm9wZXJ0eShcIi0td2lkdGhcIiwgdGhpcy5wYW5lbFdpZHRoICsgJ3B4Jyk7XHJcbiAgfVxyXG5cclxuICByZXNpemVIZWlnaHQobW91c2VFdmVudDogTW91c2VFdmVudCkge1xyXG4gICAgdGhpcy5wYW5lbEhlaWdodCA9IHRoaXMuc3RhcnRIZWlnaHQgLSAobW91c2VFdmVudC5wYWdlWSAtIHRoaXMuc3RhcnRZKTtcclxuICAgIHRoaXMucGFuZWxDb250YWluZXIuc3R5bGUuc2V0UHJvcGVydHkoXCItLWhlaWdodFwiLCB0aGlzLnBhbmVsSGVpZ2h0ICsgJ3B4Jyk7XHJcbiAgfVxyXG5cclxuICBvcGVuKCkge1xyXG4gICAgdGhpcy5wYW5lbENvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdvcGVuJyk7XHJcbiAgICB0aGlzLnBhbmVsUG9zaXRvbih0aGlzLm1lZGl1bUJyZWFrcG9pbnQpO1xyXG4gICAgdGhpcy5pc09wZW4gPSB0cnVlO1xyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICB0aGlzLnBhbmVsQ29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoJ29wZW4nKTtcclxuICAgIHRoaXMuaXNPcGVuID0gZmFsc2U7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBEb2NrcyB0aGUgcGFuZWwgb24gdGhlIHNwZWNpZmllZCBzaWRlLlxyXG4gICAqL1xyXG4gIGRvY2tUbyhzaWRlOiBQYW5lbFBvc2l0aW9uKSB7XHJcbiAgICBpZiAoc2lkZSA9PT0gUGFuZWxQb3NpdGlvbi5SaWdodCkge1xyXG4gICAgICB0aGlzLnBhbmVsU2lkZSA9IHNpZGU7XHJcbiAgICAgIHRoaXMucGFuZWxDb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZSgnYm90dG9tJyk7XHJcbiAgICAgIHRoaXMucGFuZWxDb250YWluZXIuY2xhc3NMaXN0LmFkZCgncmlnaHQnKTtcclxuICAgICAgdGhpcy5wYW5lbEJvZHkuY2hpbGROb2Rlcy5mb3JFYWNoKChjb250ZW50OiBIVE1MRWxlbWVudCkgPT4ge1xyXG4gICAgICAgIGNvbnRlbnQuY2xhc3NMaXN0LnJlbW92ZSgnaG9yaXpvbnRhbCcpO1xyXG4gICAgICAgIGNvbnRlbnQuY2xhc3NMaXN0LmFkZCgndmVydGljYWwnKTtcclxuICAgICAgfSk7XHJcbiAgICB9IGVsc2UgaWYgKHNpZGUgPT09IFBhbmVsUG9zaXRpb24uQm90dG9tKSB7XHJcbiAgICAgIHRoaXMucGFuZWxTaWRlID0gc2lkZTtcclxuICAgICAgdGhpcy5wYW5lbENvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKCdyaWdodCcpO1xyXG4gICAgICB0aGlzLnBhbmVsQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ2JvdHRvbScpO1xyXG4gICAgICB0aGlzLnBhbmVsQm9keS5jaGlsZE5vZGVzLmZvckVhY2goKGNvbnRlbnQ6IEhUTUxFbGVtZW50KSA9PiB7XHJcbiAgICAgICAgY29udGVudC5jbGFzc0xpc3QucmVtb3ZlKCd2ZXJ0aWNhbCcpO1xyXG4gICAgICAgIGNvbnRlbnQuY2xhc3NMaXN0LmFkZCgnaG9yaXpvbnRhbCcpO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFNldHMgYSBzZWN0aW9uIGFzIGFjdGl2ZS5cclxuICAgKiBAcGFyYW0gbmFtZSBUaGUgbmFtZSBvZiB0aGUgc2VjdGlvbiB0byBhY3RpdmF0ZS5cclxuICAgKi9cclxuICBzZXRBY3RpdmUobmFtZTogc3RyaW5nKSB7XHJcbiAgICBpZiAodGhpcy5hY3RpdmVTZWN0aW9uKVxyXG4gICAgICB0aGlzLnNldEluYWN0aXZlKHRoaXMuYWN0aXZlU2VjdGlvbik7XHJcbiAgICAvLyBUaGlzIG1lYW5zIHRoYXQgc2VjdGlvbnMgc2hvdWxkIGhhdmUgdW5pcXVlIG5hbWVzLlxyXG4gICAgdGhpcy5hY3RpdmVTZWN0aW9uID0gdGhpcy5zZWN0aW9ucy5maW5kKHMgPT4gcy5uYW1lID09PSBuYW1lKTtcclxuICAgIHRoaXMuYWN0aXZlU2VjdGlvbi5idXR0b24uY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XHJcbiAgICB0aGlzLmFjdGl2ZVNlY3Rpb24uYm9keS5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFNldHMgYSBzZWN0aW9uIGFzIGluYWN0aXZlLCBzbyBpbiB0aGUgYmFjay5cclxuICAgKiBJZiB0aGVyZSBpcyBvbmx5IG9uZSBhbmQgaXQgaXMgaW5hY3RpdmUgdGhlIGJvZHkgd29udCBiZSB2aXNpYmxlLlxyXG4gICAqL1xyXG4gIHNldEluYWN0aXZlKHNlY3Rpb246IFBhbmVsU2VjdGlvbikge1xyXG4gICAgc2VjdGlvbi5idXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XHJcbiAgICBzZWN0aW9uLmJvZHkuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBBZGRzIGEgbmV3IHNlY3Rpb24gdG8gdGhlIHBhbmVsIGNvbnRlbnRzIGFuZCBzZXRzIGl0IGFzIGFjdGl2ZS5cclxuICAgKiBJZiBhIHNlY3Rpb24gd2l0aCB0aGlzIG5hbWUgYWxyZWFkeSBleGlzdHMgdGhlbiBpdCBpcyBvbmx5IGFjdGl2YXRlZC5cclxuICAgKiBAcGFyYW0gYWN0aXZhdGUgU2V0IHRoZSBzZWN0aW9uIGFzIGFjdGl2ZSAodGhlIG9uZSB2aXNpYmxlKS4gRGVmYXVsdCB0cnVlLlxyXG4gICAqIEBwYXJhbSBmaXJzdCBJZiB0cnVlIHNldHMgdGhlIHNlY3Rpb24gYXMgdGhlIGZpcnN0IG9uZSAobGVmdCBzaWRlKS4gRGVmYXVsdCBmYWxzZS5cclxuICAgKi9cclxuICBhZGRTZWN0aW9uKG5hbWU6IHN0cmluZywgYm9keTogSFRNTEVsZW1lbnQsIGFjdGl2YXRlID0gdHJ1ZSwgZmlyc3QgPSBmYWxzZSkgeyAvLyBUT0RPIHVzZSBhbiBvYmplY3QgZGVzdHJ1Y3QgZm9yIG5hbWUgYW5kIGJvZHlcclxuICAgIGxldCBzZWN0aW9uID0gdGhpcy5zZWN0aW9ucy5maW5kKHMgPT4gcy5uYW1lID09PSBuYW1lKTtcclxuICAgIGlmIChzZWN0aW9uID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgLy8gVGhlIHNlY3Rpb24gYnV0dG9uLlxyXG4gICAgICBjb25zdCBidXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XHJcbiAgICAgIGJ1dHRvbi5pbm5lclRleHQgPSBuYW1lO1xyXG4gICAgICBidXR0b24uZGF0YXNldC5idG4gPSAnJztcclxuICAgICAgdGhpcy5wYW5lbEhlYWRlci5hcHBlbmRDaGlsZChidXR0b24pO1xyXG4gICAgICB0aGlzLnBhbmVsQm9keS5hcHBlbmRDaGlsZChib2R5KTtcclxuICAgICAgc2VjdGlvbiA9IHsgbmFtZSwgYnV0dG9uLCBib2R5IH07XHJcbiAgICAgIC8vIEFkZGVkIHRvIHNlY3Rpb25zIGFycmF5LlxyXG4gICAgICBpZiAoZmlyc3QpXHJcbiAgICAgICAgdGhpcy5zZWN0aW9ucy51bnNoaWZ0KHNlY3Rpb24pO1xyXG4gICAgICBlbHNlXHJcbiAgICAgICAgdGhpcy5zZWN0aW9ucy5wdXNoKHNlY3Rpb24pO1xyXG4gICAgfVxyXG4gICAgaWYgKGFjdGl2YXRlKVxyXG4gICAgICB0aGlzLnNldEFjdGl2ZShzZWN0aW9uLm5hbWUpO1xyXG4gICAgZWxzZVxyXG4gICAgICB0aGlzLnNldEluYWN0aXZlKHNlY3Rpb24pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQWRkcyBhIHNldCBvZiBzZWN0aW9ucyB0byB0aGUgcGFuZWwuXHJcbiAgICogVGhlIGZpcnN0IG9uZSBpbiB0aGUgYXJyYXkgd2lsbCBiZSBzZXQgYXMgYWN0aXZlLlxyXG4gICAqIEBwYXJhbSB7QXJyYXl9IHNlY3Rpb25zQXJyYXkgRWFjaCBvYmplY3QgaW4gdGhlIGFycmF5IHNob3VsZCBoYXZlIGEgbmFtZSBhbmQgYSBib2R5IGVudHJ5LlxyXG4gICAqL1xyXG4gIGFkZFNlY3Rpb25zKHNlY3Rpb25zQXJyYXk6IFBhbmVsU2VjdGlvbltdKSB7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNlY3Rpb25zQXJyYXkubGVuZ3RoOyBpKyspIHtcclxuICAgICAgdGhpcy5hZGRTZWN0aW9uKHNlY3Rpb25zQXJyYXlbaV0ubmFtZSwgc2VjdGlvbnNBcnJheVtpXS5ib2R5LCBpID09PSAwID8gdHJ1ZSA6IGZhbHNlKVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogUmVtb3ZlcyBhIHNlY3Rpb24gZnJvbSB0aGUgcGFuZWwgY29udGVudHMuXHJcbiAgICogSWYgdGhpcyB3YXMgdGhlIG9ubHkgc2VjdGlvbiB0aGUgcGFuZWwgd2lsbCBjbG9zZS5cclxuICAgKi9cclxuICByZW1vdmVTZWN0aW9uKG5hbWU6IHN0cmluZykge1xyXG4gICAgY29uc3Qgc2VjdGlvbkluZGV4ID0gdGhpcy5zZWN0aW9ucy5maW5kSW5kZXgocyA9PiBzLm5hbWUgPT09IG5hbWUpO1xyXG4gICAgaWYgKHNlY3Rpb25JbmRleCA+PSAwKSB7XHJcbiAgICAgIGNvbnN0IHNlY3Rpb24gPSB0aGlzLnNlY3Rpb25zLnNwbGljZShzZWN0aW9uSW5kZXgsIDEpWzBdO1xyXG4gICAgICBzZWN0aW9uLmJ1dHRvbi5yZW1vdmUoKTtcclxuICAgICAgdGhpcy5wYW5lbHNTdG9yYWdlLmFwcGVuZENoaWxkKHNlY3Rpb24uYm9keSk7XHJcbiAgICAgIGlmICh0aGlzLnNlY3Rpb25zLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAvLyBJIHNldCBhcyBhY3RpdmUgdGhlIGZpcnN0LlxyXG4gICAgICAgIHRoaXMuc2V0QWN0aXZlKHRoaXMuc2VjdGlvbnNbMF0ubmFtZSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25zb2xlLndhcm4oJ0ltcG9zc2libGUgdG8gcmVtb3ZlIHRoZSBzZWN0aW9uLiBObyBzZWN0aW9uIHdhcyBmb3VuZCB3aXRoIHRoYXQgbmFtZS4nKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHBhbmVsUG9zaXRvbihicmVha3BvaW50OiBNZWRpYVF1ZXJ5TGlzdCkge1xyXG4gICAgaWYgKGJyZWFrcG9pbnQubWF0Y2hlcykge1xyXG4gICAgICB0aGlzLmRvY2tUbyhQYW5lbFBvc2l0aW9uLkJvdHRvbSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmRvY2tUbyhQYW5lbFBvc2l0aW9uLlJpZ2h0KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGtpbGwoKSB7XHJcbiAgICAvLyBSZW1vdmUgZXZlbnQgbGlzZW5lcnNcclxuICAgIHRoaXMucGFuZWxIZWFkZXIub25jbGljayA9IG51bGw7XHJcbiAgICB0aGlzLnBhbmVsR3JpcC5vbm1vdXNlZG93biA9IG51bGw7XHJcbiAgfVxyXG59IiwiaW1wb3J0IHsgT3J0aG9MaW5lTGluZVJlbGF0aW9uc2hpcCwgT3J0aG9MaW5lTGluZVJlbGF0aW9uc2hpcFR5cGUsIFJlY3RSZWN0UmVsYXRpb25zaGlwVHlwZSwgR2VvbWV0cnlDYWxjLCBSZWN0YW5nbGUsIExpbmUsIFBvaW50MmQgfSBmcm9tICcuL2dlb21ldHJ5JztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIHtcclxuXHJcbiAgLyoqXHJcbiAgKiBSZWFkIHRoZSBjb250ZW50IG9mIGEgZmlsZS5cclxuICAqL1xyXG4gIHN0YXRpYyByZWFkSW5wdXRGaWxlKGZpbGU6IEJsb2IpIHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzLCByZWopID0+IHtcclxuICAgICAgY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcclxuICAgICAgcmVhZGVyLnJlYWRBc1RleHQoZmlsZSwgXCJVVEYtOFwiKTtcclxuICAgICAgcmVhZGVyLm9ubG9hZCA9ICgpID0+IHtcclxuICAgICAgICByZXMocmVhZGVyLnJlc3VsdCk7XHJcbiAgICAgIH1cclxuICAgICAgcmVhZGVyLm9uZXJyb3IgPSAoKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJFcnJvciByZWFkaW5nIHRoZSBmaWxlLlwiKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAqIEdldCB0aGUgVVJMIHBhcmFtZXRlcnMuXHJcbiAgKiBTb3VyY2U6IGh0dHBzOi8vY3NzLXRyaWNrcy5jb20vc25pcHBldHMvamF2YXNjcmlwdC9nZXQtdXJsLXZhcmlhYmxlcy9cclxuICAqIEByZXR1cm4ge09iamVjdH0gICAgIFRoZSBVUkwgcGFyYW1ldGVyc1xyXG4gICovXHJcbiAgc3RhdGljIGdldFVybFBhcmFtcyh1cmw6IHN0cmluZykge1xyXG4gICAgY29uc3QgcGFyYW1zOiBhbnkgPSB7fTtcclxuICAgIGNvbnN0IHBhcnNlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcclxuICAgIHBhcnNlci5ocmVmID0gdXJsO1xyXG4gICAgY29uc3QgdmFycyA9IHBhcnNlci5zZWFyY2guc3Vic3RyaW5nKDEpLnNwbGl0KCcmJyk7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHZhcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgY29uc3QgcGFpciA9IHZhcnNbaV0uc3BsaXQoJz0nKTtcclxuICAgICAgcGFyYW1zW3BhaXJbMF1dID0gZGVjb2RlVVJJQ29tcG9uZW50KHBhaXJbMV0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHBhcmFtcztcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFJlbW92ZXMgYWxsIHRoZSBjaGlsZHMgb2YgdGhlIEhUTUwgZWxlbWVudC5cclxuICAgKi9cclxuICBzdGF0aWMgZW1wdHlOb2RlKG5vZGU6IEhUTUxFbGVtZW50KSB7XHJcbiAgICB3aGlsZSAobm9kZS5maXJzdENoaWxkICYmIG5vZGUucmVtb3ZlQ2hpbGQobm9kZS5maXJzdENoaWxkKSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBDcmVhdGVzIGEgZmlsbGV0IGJvdW5kaW5nIGJveCBhcm91bmQgdGhlIHByb3ZpZGVkIGVsZW1lbnQuXHJcbiAgICogQHBhcmFtIG9mZnNldCBkZWZhdWx0IDUuXHJcbiAgICogQHBhcmFtIGZpbGxldCBkZWZhdWx0IDUuXHJcbiAgICovXHJcbiAgc3RhdGljIGNyZWF0ZUJCb3goZWxlbWVudDogU1ZHR3JhcGhpY3NFbGVtZW50LCBvZmZzZXQgPSA1LCBmaWxsZXQgPSA1KSB7XHJcbiAgICBjb25zdCByZWN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsICdyZWN0Jyk7XHJcbiAgICByZWN0LnNldEF0dHJpYnV0ZSgneCcsIChlbGVtZW50LmdldEJCb3goKS54IC0gb2Zmc2V0KS50b1N0cmluZygpKTtcclxuICAgIHJlY3Quc2V0QXR0cmlidXRlKCd5JywgKGVsZW1lbnQuZ2V0QkJveCgpLnkgLSBvZmZzZXQpLnRvU3RyaW5nKCkpO1xyXG4gICAgcmVjdC5zZXRBdHRyaWJ1dGUoJ3dpZHRoJywgKGVsZW1lbnQuZ2V0QkJveCgpLndpZHRoICsgb2Zmc2V0ICogMikudG9TdHJpbmcoKSk7XHJcbiAgICByZWN0LnNldEF0dHJpYnV0ZSgnaGVpZ2h0JywgKGVsZW1lbnQuZ2V0QkJveCgpLmhlaWdodCArIG9mZnNldCAqIDIpLnRvU3RyaW5nKCkpO1xyXG4gICAgcmVjdC5zZXRBdHRyaWJ1dGUoJ3J4JywgZmlsbGV0LnRvU3RyaW5nKCkpO1xyXG4gICAgcmVjdC5zZXRBdHRyaWJ1dGUoJ3J5JywgZmlsbGV0LnRvU3RyaW5nKCkpO1xyXG4gICAgcmV0dXJuIHJlY3Q7XHJcbiAgfVxyXG5cclxuICAvLyBSZW5hbWUgdGhlIGFib3ZlIGFzIGNyZWF0ZVNWR0JCb3hcclxuICAvLyBUaGlzIG9uZSByZXR1cm5zIGEgcmVjdCBvYmplY3Qge3gseSx3aWR0aCxoZWlnaHR9XHJcbiAgLy8gc2FtZSBhcyBkZWZhdWx0IGJib3ggYnV0IHdpdGggb3B0aW9uYWwgb2Zmc2V0XHJcbiAgc3RhdGljIGNyZWF0ZUJCb3gyKGVsZW1lbnQ6IFNWR0dyYXBoaWNzRWxlbWVudCwgb2Zmc2V0ID0gMCkgeyAvLyBUT0RPIGlzIGRlcHJlY2F0ZWQ/XHJcbiAgICBpZiAob2Zmc2V0ICE9PSAwKSB7XHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgeDogZWxlbWVudC5nZXRCQm94KCkueCAtIG9mZnNldCxcclxuICAgICAgICB5OiBlbGVtZW50LmdldEJCb3goKS55IC0gb2Zmc2V0LFxyXG4gICAgICAgIHdpZHRoOiBlbGVtZW50LmdldEJCb3goKS53aWR0aCArIG9mZnNldCAqIDIsXHJcbiAgICAgICAgaGVpZ2h0OiBlbGVtZW50LmdldEJCb3goKS5oZWlnaHQgKyBvZmZzZXQgKiAyXHJcbiAgICAgIH07XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gZWxlbWVudC5nZXRCQm94KCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBnZXQgdGhlIGNvb3JkaW5hdGVzIG9mIHRoZSBtb3VzZSBvbiB0aGUgU1ZHIGNhbnZhcy5cclxuICAgKi9cclxuICBzdGF0aWMgZ2V0UmVsYXRpdmVDb29yZHMoZTogTW91c2VFdmVudCwgc3ZnRG9jOiBTVkdTVkdFbGVtZW50KTogRE9NUG9pbnQge1xyXG4gICAgY29uc3Qgb3JpZ2luUHQgPSBzdmdEb2MuY3JlYXRlU1ZHUG9pbnQoKTtcclxuICAgIG9yaWdpblB0LnggPSBlLmNsaWVudFg7XHJcbiAgICBvcmlnaW5QdC55ID0gZS5jbGllbnRZO1xyXG4gICAgLy8gVGhlIGN1cnNvciBwb2ludCwgdHJhbnNsYXRlZCBpbnRvIHN2ZyBjb29yZGluYXRlc1xyXG4gICAgcmV0dXJuIG9yaWdpblB0Lm1hdHJpeFRyYW5zZm9ybShzdmdEb2MuZ2V0U2NyZWVuQ1RNKCkuaW52ZXJzZSgpKTtcclxuICB9XHJcblxyXG4gIC8vIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzEwNTAzNC9jcmVhdGUtZ3VpZC11dWlkLWluLWphdmFzY3JpcHRcclxuICBzdGF0aWMgdXVpZHY0KCkge1xyXG4gICAgcmV0dXJuICgoMWU3KS50b1N0cmluZygpICsgLTFlMyArIC00ZTMgKyAtOGUzICsgLTFlMTEpLnJlcGxhY2UoL1swMThdL2csIGMgPT5cclxuICAgICAgKE51bWJlcihjKSBeIGNyeXB0by5nZXRSYW5kb21WYWx1ZXMobmV3IFVpbnQ4QXJyYXkoMSkpWzBdICYgMTUgPj4gTnVtYmVyKGMpIC8gNCkudG9TdHJpbmcoMTYpXHJcbiAgICApO1xyXG4gIH1cclxuXHJcblxyXG4gIHN0YXRpYyBnZXRSZWN0U2VnbWVudHMocmVjdDogUmVjdGFuZ2xlKTogTGluZVtdIHtcclxuICAgIGNvbnN0IGNvcm5lckEgPSB7IHg6IHJlY3QueCwgeTogcmVjdC55IH07XHJcbiAgICBjb25zdCBjb3JuZXJCID0geyB4OiByZWN0LnggKyByZWN0LndpZHRoLCB5OiByZWN0LnkgfTtcclxuICAgIGNvbnN0IGNvcm5lckMgPSB7IHg6IHJlY3QueCArIHJlY3Qud2lkdGgsIHk6IHJlY3QueSArIHJlY3QuaGVpZ2h0IH07XHJcbiAgICBjb25zdCBjb3JuZXJEID0geyB4OiByZWN0LngsIHk6IHJlY3QueSArIHJlY3QuaGVpZ2h0IH07XHJcbiAgICByZXR1cm4gW1xyXG4gICAgICBbY29ybmVyQSwgY29ybmVyQl0sXHJcbiAgICAgIFtjb3JuZXJCLCBjb3JuZXJDXSxcclxuICAgICAgW2Nvcm5lckMsIGNvcm5lckRdLFxyXG4gICAgICBbY29ybmVyRCwgY29ybmVyQV1cclxuICAgIF07XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBcclxuICAgKiBAcGFyYW0gaW5jbHVzaXZlIEluY2x1ZGUgcG9pbnRzIG9uIHRoZSBlZGdlcy4gRGVmYXVsdCB0cnVlLlxyXG4gICAqL1xyXG4gIHN0YXRpYyBpc1B0SW5SZWN0KHJlY3Q6IFJlY3RhbmdsZSwgcHQ6IFBvaW50MmQsIGluY2x1c2l2ZSA9IHRydWUpIHtcclxuICAgIGlmIChpbmNsdXNpdmUpIHtcclxuICAgICAgcmV0dXJuIChwdC54ID49IHJlY3QueCAmJiBwdC54IDw9IChyZWN0LnggKyByZWN0LndpZHRoKSkgJiYgKHB0LnkgPj0gcmVjdC55ICYmIHB0LnkgPD0gKHJlY3QueSArIHJlY3QuaGVpZ2h0KSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gKHB0LnggPiByZWN0LnggJiYgcHQueCA8IChyZWN0LnggKyByZWN0LndpZHRoKSkgJiYgKHB0LnkgPiByZWN0LnkgJiYgcHQueSA8IChyZWN0LnkgKyByZWN0LmhlaWdodCkpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ2hlY2tzIGlmIGEgbGluZSBpcyBjb21wbGV0ZWx5IGluc2lkZSBhIHJlY3RhbmdsZS5cclxuICAgKiBFdmVuIGlmIHRoZSBsaW5lIGlzIGNvbXBsZXRlbHkgaW5zaWRlIGJ1dCB0b3VjaGluZyBhIHNlZ21lbnQgb2YgdGhlIHJlY3RhbmdsZSBpdCdzIGNvbnNpZGVyZWQgaW5zaWRlLFxyXG4gICAqIHRoaXMgaW5jbHVkZXMgYSBsaW5lIHRoYXQgaXMgY29tcGxldGVseSBvdmVybGFwcGVkIHdpdGggYSBzZWdtZW50IG9mIHRoZSByZWN0YW5nbGUuXHJcbiAgICogQHBhcmFtIHtMaW5lfSBsaW5lIFRoZSBsaW5lIHRvIHRlc3QuXHJcbiAgICogQHBhcmFtIHtSZWN0YW5nbGV9IHJlY3QgVGhlIHJlY3RhbmdsZSB0byB0ZXN0IGFnYWluc3QuXHJcbiAgICogQHJldHVybnMge2Jvb2xlYW59IEJvb2wgaW5kaWNhdGluZyBpZiBpdCBpcyBjb21wbGV0ZWx5IGluc2lkZSBvciBub3QuXHJcbiAgICovXHJcbiAgc3RhdGljIGlzTGluZUluUmVjdChsaW5lOiBMaW5lLCByZWN0OiBSZWN0YW5nbGUpIHtcclxuICAgIHJldHVybiAodGhpcy5pc1B0SW5SZWN0KHJlY3QsIGxpbmVbMF0gYXMgUG9pbnQyZCkgJiYgdGhpcy5pc1B0SW5SZWN0KHJlY3QsIGxpbmVbMV0pKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIENoZWNrIGlmIGEgbnVtZXJpY2FsIHZhbHVlIGlzIGJldHdlZW4gdHdvIGxpbWl0cy5cclxuICAgKiBAcGFyYW0gdmFsdWUgVmFsdWUgdG8gY29tcGFyZS5cclxuICAgKiBAcGFyYW0gbGltaXQxIEZpcnN0IGxpbWl0LlxyXG4gICAqIEBwYXJhbSBsaW1pdDIgU2Vjb25kIGxpbWl0LCBvcG9zaXRlIHRvIHRoZSBmaXJzdCBvbmUuXHJcbiAgICogQHBhcmFtIGluY2x1c2l2ZSBXZWF0aGVyIHRvIGluY2x1ZGUgdGhlIGxpbWl0cyBpbiB0aGUgY29tcGFyaXNvbiBvciBub3QuIERlZmF1bHQgdHJ1ZS5cclxuICAgKi9cclxuICBzdGF0aWMgaXNOdW1CZXR3ZWVuKHZhbHVlOiBudW1iZXIsIGxpbWl0MTogbnVtYmVyLCBsaW1pdDI6IG51bWJlciwgaW5jbHVzaXZlID0gdHJ1ZSk6IGJvb2xlYW4ge1xyXG4gICAgaWYgKGluY2x1c2l2ZSkge1xyXG4gICAgICByZXR1cm4gdmFsdWUgPj0gTWF0aC5taW4obGltaXQxLCBsaW1pdDIpICYmIHZhbHVlIDw9IE1hdGgubWF4KGxpbWl0MSwgbGltaXQyKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiB2YWx1ZSA+IE1hdGgubWluKGxpbWl0MSwgbGltaXQyKSAmJiB2YWx1ZSA8IE1hdGgubWF4KGxpbWl0MSwgbGltaXQyKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHN0YXRpYyBpc0xpbmVIb3Jpem9udGFsKGxpbmU6IExpbmUpIHtcclxuICAgIHJldHVybiBsaW5lWzBdLnkgPT09IGxpbmVbMV0ueTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBpc0xpbmVWZXJ0aWNhbChsaW5lOiBMaW5lKSB7XHJcbiAgICByZXR1cm4gbGluZVswXS54ID09PSBsaW5lWzFdLng7XHJcbiAgfVxyXG5cclxuICAvLyBJZiByZWZQdCBpcyBwcm92aWRlZCB3aWxsIGJlIGNhbGN1bGF0ZWQgZnJvbSB0aGlzXHJcbiAgLy8gSWYgbm90IHByb3ZpZGVkIHdpbGwgYmUgY2FsY3VsYXRlZCBmcm9tIHRoZSBmaXJzdCBwb2ludFxyXG4gIHN0YXRpYyBzb3J0UHRzQnlEaXN0YW5jZShwdHM6IFBvaW50MmRbXSwgcmVmUHQ6IFBvaW50MmQgPSB1bmRlZmluZWQsIGluY2x1ZGVSZWZQdCA9IGZhbHNlKSB7XHJcbiAgICBjb25zdCByZWZlcmVuY2VQdCA9IHJlZlB0ICE9PSB1bmRlZmluZWQgPyByZWZQdCA6IHB0c1swXTtcclxuICAgIGNvbnN0IHNvcnRlZFB0cyA9IHB0cy5zb3J0KChhLCBiKSA9PiB7XHJcbiAgICAgIGlmIChHZW9tZXRyeUNhbGMucHRzRGlzdGFuY2UocmVmZXJlbmNlUHQsIGEpIDwgR2VvbWV0cnlDYWxjLnB0c0Rpc3RhbmNlKHJlZmVyZW5jZVB0LCBiKSlcclxuICAgICAgICByZXR1cm4gLTE7XHJcbiAgICAgIGVsc2UgaWYgKEdlb21ldHJ5Q2FsYy5wdHNEaXN0YW5jZShyZWZlcmVuY2VQdCwgYSkgPiBHZW9tZXRyeUNhbGMucHRzRGlzdGFuY2UocmVmZXJlbmNlUHQsIGIpKVxyXG4gICAgICAgIHJldHVybiAxO1xyXG4gICAgICBlbHNlXHJcbiAgICAgICAgcmV0dXJuIDA7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiAocmVmUHQgIT09IHVuZGVmaW5lZCAmJiBpbmNsdWRlUmVmUHQgPT09IHRydWUpID8gW3JlZlB0LCAuLi5zb3J0ZWRQdHNdIDogc29ydGVkUHRzO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogR2l2ZW4gYW4gYXJyYXkgb2YgcG9pbnRzIHJldHVybnMgYW4gYXJyYXkgb2YgbGluZXMgYmV0d2VlbiB0aGUgcG9pbnRzLlxyXG4gICAqL1xyXG4gIHN0YXRpYyBsaW5lc0JldHdlZW5QdHMocHRzOiBQb2ludDJkW10pOiBMaW5lW10ge1xyXG4gICAgaWYgKHB0cy5sZW5ndGggPiAxKSB7XHJcbiAgICAgIGNvbnN0IHNlZ21lbnRzOiBMaW5lW10gPSBbXTtcclxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwdHMubGVuZ3RoIC0gMTsgaSsrKSB7XHJcbiAgICAgICAgc2VnbWVudHMucHVzaChbcHRzW2ldLCBwdHNbaSArIDFdXSk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHNlZ21lbnRzO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuXHJcbiAgLy8gaWYgYSByZWN0YW5nbGUgaXMgdG90YWx5IG92ZXJsYXBwZWQgb3IgcGFydGlhbGx5IGFuZCBjb21wbGV0ZWx5IGluc2lkZSBpdCBpcyBub3QgY29uc2lkZXJlZCBpbnRlcnNlY3Rpb24gYnV0IEluc2lkZS4gZnVsbENvbnRhaW5tZW50SW50ZXJzZWN0aW9ucyBcclxuICAvLyBpbnRlcnNlY3Rpb24gaW5jbHVkZXMgb3ZlcmxhcGVkIHBhcnRpYWxseSBidXQgbm8gb25lIGluc2lkZSB0aGUgb3RoZXJcclxuICBzdGF0aWMgcmVjdFJlY3RSZWxhdGlvbnNoaXAocmVjdDE6IFJlY3RhbmdsZSwgcmVjdDI6IFJlY3RhbmdsZSkge1xyXG4gICAgaWYgKHJlY3QxLnggPT09IHJlY3QyLnggJiYgcmVjdDEueSA9PT0gcmVjdDIueSAmJiByZWN0MS53aWR0aCA9PT0gcmVjdDIud2lkdGggJiYgcmVjdDEuaGVpZ2h0ID09PSByZWN0Mi5oZWlnaHQpIHtcclxuICAgICAgcmV0dXJuIFJlY3RSZWN0UmVsYXRpb25zaGlwVHlwZS5NYXRjaDtcclxuICAgIH0gZWxzZSBpZiAodGhpcy5pc1B0SW5SZWN0KHJlY3QyLCB7IHg6IHJlY3QxLngsIHk6IHJlY3QxLnkgfSkgJiZcclxuICAgICAgdGhpcy5pc1B0SW5SZWN0KHJlY3QyLCB7IHg6IHJlY3QxLnggKyByZWN0MS53aWR0aCwgeTogcmVjdDEueSB9KSAmJlxyXG4gICAgICB0aGlzLmlzUHRJblJlY3QocmVjdDIsIHsgeDogcmVjdDEueCArIHJlY3QxLndpZHRoLCB5OiByZWN0MS55ICsgcmVjdDEuaGVpZ2h0IH0pICYmXHJcbiAgICAgIHRoaXMuaXNQdEluUmVjdChyZWN0MiwgeyB4OiByZWN0MS54LCB5OiByZWN0MS55ICsgcmVjdDEuaGVpZ2h0IH0pKSB7XHJcbiAgICAgIHJldHVybiBSZWN0UmVjdFJlbGF0aW9uc2hpcFR5cGUuQUluc2lkZUI7XHJcbiAgICB9IGVsc2UgaWYgKHRoaXMuaXNQdEluUmVjdChyZWN0MSwgeyB4OiByZWN0Mi54LCB5OiByZWN0Mi55IH0pICYmXHJcbiAgICAgIHRoaXMuaXNQdEluUmVjdChyZWN0MSwgeyB4OiByZWN0Mi54ICsgcmVjdDIud2lkdGgsIHk6IHJlY3QyLnkgfSkgJiZcclxuICAgICAgdGhpcy5pc1B0SW5SZWN0KHJlY3QxLCB7IHg6IHJlY3QyLnggKyByZWN0Mi53aWR0aCwgeTogcmVjdDIueSArIHJlY3QyLmhlaWdodCB9KSAmJlxyXG4gICAgICB0aGlzLmlzUHRJblJlY3QocmVjdDEsIHsgeDogcmVjdDIueCwgeTogcmVjdDIueSArIHJlY3QyLmhlaWdodCB9KSkge1xyXG4gICAgICByZXR1cm4gUmVjdFJlY3RSZWxhdGlvbnNoaXBUeXBlLkJJbnNpZGVBO1xyXG4gICAgfSBlbHNlIGlmICh0aGlzLmlzUHRJblJlY3QocmVjdDIsIHsgeDogcmVjdDEueCwgeTogcmVjdDEueSB9LCBmYWxzZSkgfHxcclxuICAgICAgdGhpcy5pc1B0SW5SZWN0KHJlY3QyLCB7IHg6IHJlY3QxLnggKyByZWN0MS53aWR0aCwgeTogcmVjdDEueSB9LCBmYWxzZSkgfHxcclxuICAgICAgdGhpcy5pc1B0SW5SZWN0KHJlY3QyLCB7IHg6IHJlY3QxLnggKyByZWN0MS53aWR0aCwgeTogcmVjdDEueSArIHJlY3QxLmhlaWdodCB9LCBmYWxzZSkgfHxcclxuICAgICAgdGhpcy5pc1B0SW5SZWN0KHJlY3QyLCB7IHg6IHJlY3QxLngsIHk6IHJlY3QxLnkgKyByZWN0MS5oZWlnaHQgfSwgZmFsc2UpIHx8XHJcbiAgICAgIHRoaXMuaXNQdEluUmVjdChyZWN0MSwgeyB4OiByZWN0Mi54LCB5OiByZWN0Mi55IH0sIGZhbHNlKSB8fFxyXG4gICAgICB0aGlzLmlzUHRJblJlY3QocmVjdDEsIHsgeDogcmVjdDIueCArIHJlY3QyLndpZHRoLCB5OiByZWN0Mi55IH0sIGZhbHNlKSB8fFxyXG4gICAgICB0aGlzLmlzUHRJblJlY3QocmVjdDEsIHsgeDogcmVjdDIueCArIHJlY3QyLndpZHRoLCB5OiByZWN0Mi55ICsgcmVjdDIuaGVpZ2h0IH0sIGZhbHNlKSB8fFxyXG4gICAgICB0aGlzLmlzUHRJblJlY3QocmVjdDEsIHsgeDogcmVjdDIueCwgeTogcmVjdDIueSArIHJlY3QyLmhlaWdodCB9LCBmYWxzZSkgfHxcclxuICAgICAgKHRoaXMuaXNOdW1CZXR3ZWVuKHJlY3QxLnksIHJlY3QyLnksIHJlY3QyLnkgKyByZWN0Mi5oZWlnaHQsIGZhbHNlKSAmJiByZWN0MS54IDw9IHJlY3QyLnggJiYgKHJlY3QxLnggKyByZWN0MS53aWR0aCkgPj0gKHJlY3QyLnggKyByZWN0Mi53aWR0aCkpIHx8IC8vIGlzTnVtQmV0d2VlbihyZWN0Mi54LCByZWN0MS54LCByZWN0MS54ICsgcmVjdDEud2lkdGgpICYmIGlzTnVtQmV0d2VlbigpKSB8fFxyXG4gICAgICAodGhpcy5pc051bUJldHdlZW4ocmVjdDIueSwgcmVjdDEueSwgcmVjdDEueSArIHJlY3QxLmhlaWdodCwgZmFsc2UpICYmIHJlY3QyLnggPD0gcmVjdDEueCAmJiAocmVjdDIueCArIHJlY3QyLndpZHRoKSA+PSAocmVjdDEueCArIHJlY3QxLndpZHRoKSkpIHsgLy8gaXNOdW1CZXR3ZWVuKHJlY3QxLngsIHJlY3QyLngsIHJlY3QyLnggKyByZWN0Mi53aWR0aCkpKSB7XHJcbiAgICAgIHJldHVybiBSZWN0UmVjdFJlbGF0aW9uc2hpcFR5cGUuSW50ZXJzZWN0O1xyXG4gICAgfSBlbHNlIGlmICh0aGlzLmlzUHRJblJlY3QocmVjdDIsIHsgeDogcmVjdDEueCwgeTogcmVjdDEueSB9KSB8fFxyXG4gICAgICB0aGlzLmlzUHRJblJlY3QocmVjdDIsIHsgeDogcmVjdDEueCArIHJlY3QxLndpZHRoLCB5OiByZWN0MS55IH0pIHx8XHJcbiAgICAgIHRoaXMuaXNQdEluUmVjdChyZWN0MiwgeyB4OiByZWN0MS54ICsgcmVjdDEud2lkdGgsIHk6IHJlY3QxLnkgKyByZWN0MS5oZWlnaHQgfSkgfHxcclxuICAgICAgdGhpcy5pc1B0SW5SZWN0KHJlY3QyLCB7IHg6IHJlY3QxLngsIHk6IHJlY3QxLnkgKyByZWN0MS5oZWlnaHQgfSkgfHxcclxuICAgICAgdGhpcy5pc1B0SW5SZWN0KHJlY3QxLCB7IHg6IHJlY3QyLngsIHk6IHJlY3QyLnkgfSkgfHxcclxuICAgICAgdGhpcy5pc1B0SW5SZWN0KHJlY3QxLCB7IHg6IHJlY3QyLnggKyByZWN0Mi53aWR0aCwgeTogcmVjdDIueSB9KSB8fFxyXG4gICAgICB0aGlzLmlzUHRJblJlY3QocmVjdDEsIHsgeDogcmVjdDIueCArIHJlY3QyLndpZHRoLCB5OiByZWN0Mi55ICsgcmVjdDIuaGVpZ2h0IH0pIHx8XHJcbiAgICAgIHRoaXMuaXNQdEluUmVjdChyZWN0MSwgeyB4OiByZWN0Mi54LCB5OiByZWN0Mi55ICsgcmVjdDIuaGVpZ2h0IH0pKSB7XHJcbiAgICAgIHJldHVybiBSZWN0UmVjdFJlbGF0aW9uc2hpcFR5cGUuVGFuZ2VudDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBSZWN0UmVjdFJlbGF0aW9uc2hpcFR5cGUuRGlzam9pbnQ7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBSZWxhdGlvbnNoaXAgYmV0d2VlbiB0d28gb3J0aG9nb25hbCBsaW5lcy5cclxuICAgKi9cclxuICBzdGF0aWMgZ2V0T3J0aG9MaW5lTGluZVJlbGF0aW9uc2hpcChsaW5lMTogTGluZSwgbGluZTI6IExpbmUpIHtcclxuICAgIGlmICh0aGlzLmlzTGluZUhvcml6b250YWwobGluZTEpICYmIHRoaXMuaXNMaW5lVmVydGljYWwobGluZTIpKSB7XHJcbiAgICAgIGlmICh0aGlzLmlzTnVtQmV0d2VlbihsaW5lMVswXS55LCBsaW5lMlswXS55LCBsaW5lMlsxXS55KSAmJiB0aGlzLmlzTnVtQmV0d2VlbihsaW5lMlswXS54LCBsaW5lMVswXS54LCBsaW5lMVsxXS54KSkge1xyXG4gICAgICAgIHJldHVybiBuZXcgT3J0aG9MaW5lTGluZVJlbGF0aW9uc2hpcChPcnRob0xpbmVMaW5lUmVsYXRpb25zaGlwVHlwZS5JbnRlcnNlY3QsIHsgeDogbGluZTJbMF0ueCwgeTogbGluZTFbMF0ueSB9KTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gbmV3IE9ydGhvTGluZUxpbmVSZWxhdGlvbnNoaXAoT3J0aG9MaW5lTGluZVJlbGF0aW9uc2hpcFR5cGUuTm90aGluZyk7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSBpZiAodGhpcy5pc0xpbmVIb3Jpem9udGFsKGxpbmUyKSAmJiB0aGlzLmlzTGluZVZlcnRpY2FsKGxpbmUxKSkge1xyXG4gICAgICBpZiAodGhpcy5pc051bUJldHdlZW4obGluZTJbMF0ueSwgbGluZTFbMF0ueSwgbGluZTFbMV0ueSkgJiYgdGhpcy5pc051bUJldHdlZW4obGluZTFbMF0ueCwgbGluZTJbMF0ueCwgbGluZTJbMV0ueCkpIHtcclxuICAgICAgICByZXR1cm4gbmV3IE9ydGhvTGluZUxpbmVSZWxhdGlvbnNoaXAoT3J0aG9MaW5lTGluZVJlbGF0aW9uc2hpcFR5cGUuSW50ZXJzZWN0LCB7IHg6IGxpbmUxWzBdLngsIHk6IGxpbmUyWzBdLnkgfSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBPcnRob0xpbmVMaW5lUmVsYXRpb25zaGlwKE9ydGhvTGluZUxpbmVSZWxhdGlvbnNoaXBUeXBlLk5vdGhpbmcpO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2UgaWYgKHRoaXMuaXNMaW5lSG9yaXpvbnRhbChsaW5lMSkgJiYgdGhpcy5pc0xpbmVIb3Jpem9udGFsKGxpbmUyKSkge1xyXG4gICAgICBpZiAobGluZTFbMF0ueSA9PT0gbGluZTJbMF0ueSkge1xyXG4gICAgICAgIGNvbnN0IHN0YXJ0UG9pbnRYID0gTWF0aC5taW4oTWF0aC5tYXgobGluZTFbMF0ueCwgbGluZTFbMV0ueCksIE1hdGgubWF4KGxpbmUyWzBdLngsIGxpbmUyWzFdLngpKTtcclxuICAgICAgICBjb25zdCBlbmRQb2ludFggPSBNYXRoLm1heChNYXRoLm1pbihsaW5lMVswXS54LCBsaW5lMVsxXS54KSwgTWF0aC5taW4obGluZTJbMF0ueCwgbGluZTJbMV0ueCkpO1xyXG4gICAgICAgIGlmIChzdGFydFBvaW50WCA+PSBlbmRQb2ludFgpIHtcclxuICAgICAgICAgIHJldHVybiBuZXcgT3J0aG9MaW5lTGluZVJlbGF0aW9uc2hpcChPcnRob0xpbmVMaW5lUmVsYXRpb25zaGlwVHlwZS5PdmVybGFwLCB1bmRlZmluZWQsIFt7IHg6IHN0YXJ0UG9pbnRYLCB5OiBsaW5lMVswXS55IH0sIHsgeDogZW5kUG9pbnRYLCB5OiBsaW5lMVswXS55IH1dKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgcmV0dXJuIG5ldyBPcnRob0xpbmVMaW5lUmVsYXRpb25zaGlwKE9ydGhvTGluZUxpbmVSZWxhdGlvbnNoaXBUeXBlLk5vdGhpbmcpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gbmV3IE9ydGhvTGluZUxpbmVSZWxhdGlvbnNoaXAoT3J0aG9MaW5lTGluZVJlbGF0aW9uc2hpcFR5cGUuTm90aGluZyk7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSBpZiAodGhpcy5pc0xpbmVWZXJ0aWNhbChsaW5lMSkgJiYgdGhpcy5pc0xpbmVWZXJ0aWNhbChsaW5lMikpIHtcclxuICAgICAgaWYgKGxpbmUxWzBdLnggPT09IGxpbmUyWzBdLngpIHtcclxuICAgICAgICBjb25zdCBzdGFydFBvaW50WSA9IE1hdGgubWluKE1hdGgubWF4KGxpbmUxWzBdLnksIGxpbmUxWzFdLnkpLCBNYXRoLm1heChsaW5lMlswXS55LCBsaW5lMlsxXS55KSk7XHJcbiAgICAgICAgY29uc3QgZW5kUG9pbnRZID0gTWF0aC5tYXgoTWF0aC5taW4obGluZTFbMF0ueSwgbGluZTFbMV0ueSksIE1hdGgubWluKGxpbmUyWzBdLnksIGxpbmUyWzFdLnkpKTtcclxuICAgICAgICBpZiAoc3RhcnRQb2ludFkgPj0gZW5kUG9pbnRZKSB7XHJcbiAgICAgICAgICByZXR1cm4gbmV3IE9ydGhvTGluZUxpbmVSZWxhdGlvbnNoaXAoT3J0aG9MaW5lTGluZVJlbGF0aW9uc2hpcFR5cGUuT3ZlcmxhcCwgdW5kZWZpbmVkLCBbeyB4OiBsaW5lMVswXS54LCB5OiBzdGFydFBvaW50WSB9LCB7IHg6IGxpbmUxWzBdLngsIHk6IGVuZFBvaW50WSB9XSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHJldHVybiBuZXcgT3J0aG9MaW5lTGluZVJlbGF0aW9uc2hpcChPcnRob0xpbmVMaW5lUmVsYXRpb25zaGlwVHlwZS5Ob3RoaW5nKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBPcnRob0xpbmVMaW5lUmVsYXRpb25zaGlwKE9ydGhvTGluZUxpbmVSZWxhdGlvbnNoaXBUeXBlLk5vdGhpbmcpO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gbmV3IE9ydGhvTGluZUxpbmVSZWxhdGlvbnNoaXAoT3J0aG9MaW5lTGluZVJlbGF0aW9uc2hpcFR5cGUuTm90aGluZyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuXHJcbiAgc3RhdGljIHJlY3RhbmdsZXNTaWxob3VldHRlKHJlY3RzOiBSZWN0YW5nbGVbXSk6IExpbmVbXSB7XHJcbiAgICBjb25zdCByZWN0c1NlZ21lbnRzID0gW107XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlY3RzLmxlbmd0aDsgaSsrKVxyXG4gICAgICByZWN0c1NlZ21lbnRzLnB1c2godGhpcy5nZXRSZWN0U2VnbWVudHMocmVjdHNbaV0pKTtcclxuICAgIGNvbnN0IGZpbmFsU2VnbWVudHMgPSBbXTtcclxuICAgIGNvbnN0IG92ZXJsYXBwZWRTZWdtZW50czogTGluZVtdID0gW107XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlY3RzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIGxldCBjdXJyZW50UmVjdFNlZ21lbnRzID0gdGhpcy5nZXRSZWN0U2VnbWVudHMocmVjdHNbaV0pO1xyXG4gICAgICBmb3IgKGxldCBiID0gMDsgYiA8IHJlY3RzLmxlbmd0aDsgYisrKSB7XHJcbiAgICAgICAgLy8gU2tpcCBjaGVja2luZyB3aXRoIHRoZSByZWN0YW5nbGUgaXRzZWxmLlxyXG4gICAgICAgIGlmIChiICE9IGkpIHtcclxuICAgICAgICAgIGNvbnN0IG5ld0N1cnJlbnRSZWN0U2VnbWVudHMgPSBbXTtcclxuICAgICAgICAgIGNvbnN0IHJlY3RzUmVsYXRpb24gPSB0aGlzLnJlY3RSZWN0UmVsYXRpb25zaGlwKHJlY3RzW2JdLCByZWN0c1tpXSk7XHJcbiAgICAgICAgICAvLyBJZiB0aGUgJ2knIHJlY3RhbmdsZSBpcyBpbnNpZGUgb2YgdGhlICdiJyBvciBpZiB0aGUgJ2knIGlzIGVxdWFsIHRvIGEgcHJldmlvdXMgJ2InIHRoZW4gc2tpcCBpdHMgc2VnbWVudHMuXHJcbiAgICAgICAgICBpZiAocmVjdHNSZWxhdGlvbiA9PT0gUmVjdFJlY3RSZWxhdGlvbnNoaXBUeXBlLkJJbnNpZGVBIHx8IChpID4gYiAmJiByZWN0c1JlbGF0aW9uID09PSBSZWN0UmVjdFJlbGF0aW9uc2hpcFR5cGUuTWF0Y2gpKSB7XHJcbiAgICAgICAgICAgIGN1cnJlbnRSZWN0U2VnbWVudHMubGVuZ3RoID0gMDtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICB9IGVsc2UgaWYgKHJlY3RzUmVsYXRpb24gPT09IFJlY3RSZWN0UmVsYXRpb25zaGlwVHlwZS5JbnRlcnNlY3QgfHwgcmVjdHNSZWxhdGlvbiA9PT0gUmVjdFJlY3RSZWxhdGlvbnNoaXBUeXBlLlRhbmdlbnQpIHtcclxuICAgICAgICAgICAgY29uc3QgdGVtcE92ZXJsYXBwZWRTZWdtZW50czogTGluZVtdID0gW107XHJcbiAgICAgICAgICAgIGZvciAobGV0IGsgPSAwOyBrIDwgY3VycmVudFJlY3RTZWdtZW50cy5sZW5ndGg7IGsrKykge1xyXG4gICAgICAgICAgICAgIGNvbnN0IHNlZ21lbnRJbnRlcnNlY3Rpb25zID0gW107XHJcbiAgICAgICAgICAgICAgY29uc3QgbGluZTEgPSBjdXJyZW50UmVjdFNlZ21lbnRzW2tdO1xyXG4gICAgICAgICAgICAgIGlmICghdGhpcy5pc0xpbmVJblJlY3QobGluZTEsIHJlY3RzW2JdKSkge1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgbiA9IDA7IG4gPCByZWN0c1NlZ21lbnRzW2JdLmxlbmd0aDsgbisrKSB7XHJcbiAgICAgICAgICAgICAgICAgIGNvbnN0IGxpbmUyID0gcmVjdHNTZWdtZW50c1tiXVtuXTtcclxuICAgICAgICAgICAgICAgICAgY29uc3QgbGluZXNSZWxhdGlvbnNoaXAgPSB0aGlzLmdldE9ydGhvTGluZUxpbmVSZWxhdGlvbnNoaXAobGluZTEsIGxpbmUyKTtcclxuICAgICAgICAgICAgICAgICAgaWYgKGxpbmVzUmVsYXRpb25zaGlwLnR5cGUgPT09IE9ydGhvTGluZUxpbmVSZWxhdGlvbnNoaXBUeXBlLkludGVyc2VjdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChsaW5lc1JlbGF0aW9uc2hpcC5pbnRlcnNlY3Rpb24pXHJcbiAgICAgICAgICAgICAgICAgICAgICBzZWdtZW50SW50ZXJzZWN0aW9ucy5wdXNoKGxpbmVzUmVsYXRpb25zaGlwLmludGVyc2VjdGlvbik7XHJcbiAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobGluZXNSZWxhdGlvbnNoaXAudHlwZSA9PT0gT3J0aG9MaW5lTGluZVJlbGF0aW9uc2hpcFR5cGUuT3ZlcmxhcCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChsaW5lc1JlbGF0aW9uc2hpcC5vdmVybGFwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgdGVtcE92ZXJsYXBwZWRTZWdtZW50cy5wdXNoKGxpbmVzUmVsYXRpb25zaGlwLm92ZXJsYXApO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoc2VnbWVudEludGVyc2VjdGlvbnMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICBjb25zdCBzb3J0ZWRJbnRlcnNlY3Rpb25zID0gdGhpcy5zb3J0UHRzQnlEaXN0YW5jZShzZWdtZW50SW50ZXJzZWN0aW9ucywgY3VycmVudFJlY3RTZWdtZW50c1trXVswXSwgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgIGNvbnN0IHNwbGl0ZWRTZWdtZW50cyA9IHRoaXMubGluZXNCZXR3ZWVuUHRzKFsuLi5zb3J0ZWRJbnRlcnNlY3Rpb25zLCBjdXJyZW50UmVjdFNlZ21lbnRzW2tdWzFdXSk7XHJcbiAgICAgICAgICAgICAgICAgIGZvciAobGV0IHAgPSAwOyBwIDwgc3BsaXRlZFNlZ21lbnRzLmxlbmd0aDsgcCsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLmlzUHRJblJlY3QocmVjdHNbYl0sIEdlb21ldHJ5Q2FsYy5saW5lTWlkZGxlUHQoc3BsaXRlZFNlZ21lbnRzW3BdKSkpXHJcbiAgICAgICAgICAgICAgICAgICAgICBuZXdDdXJyZW50UmVjdFNlZ21lbnRzLnB1c2goc3BsaXRlZFNlZ21lbnRzW3BdKTtcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgbmV3Q3VycmVudFJlY3RTZWdtZW50cy5wdXNoKGN1cnJlbnRSZWN0U2VnbWVudHNba10pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodGVtcE92ZXJsYXBwZWRTZWdtZW50cy5sZW5ndGggPiAwICYmIHJlY3RzUmVsYXRpb24gIT09IFJlY3RSZWN0UmVsYXRpb25zaGlwVHlwZS5UYW5nZW50KSB7XHJcbiAgICAgICAgICAgICAgZm9yIChsZXQgbSA9IDA7IG0gPCB0ZW1wT3ZlcmxhcHBlZFNlZ21lbnRzLmxlbmd0aDsgbSsrKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIW92ZXJsYXBwZWRTZWdtZW50cy5maW5kKHNlZ21lbnQgPT4gR2VvbWV0cnlDYWxjLmFyZUxpbmVzRXF1YWwoc2VnbWVudCwgdGVtcE92ZXJsYXBwZWRTZWdtZW50c1ttXSkpKVxyXG4gICAgICAgICAgICAgICAgICBvdmVybGFwcGVkU2VnbWVudHMucHVzaCh0ZW1wT3ZlcmxhcHBlZFNlZ21lbnRzW21dKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gVXBkYXRlIHRoZSBzZWdtZW50cyBhZnRlciBwcm9jZXNzaW5nIHRoZW0gd2l0aCB0aGlzIGl0ZXJhdGlvbiByZWN0YW5nbGUuXHJcbiAgICAgICAgICAgIGN1cnJlbnRSZWN0U2VnbWVudHMgPSBuZXdDdXJyZW50UmVjdFNlZ21lbnRzO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBpZiAoY3VycmVudFJlY3RTZWdtZW50cy5sZW5ndGggPiAwKVxyXG4gICAgICAgIGZpbmFsU2VnbWVudHMucHVzaCguLi5jdXJyZW50UmVjdFNlZ21lbnRzKTtcclxuICAgIH1cclxuICAgIGlmIChvdmVybGFwcGVkU2VnbWVudHMubGVuZ3RoID4gMClcclxuICAgICAgZmluYWxTZWdtZW50cy5wdXNoKC4uLm92ZXJsYXBwZWRTZWdtZW50cyk7XHJcbiAgICByZXR1cm4gZmluYWxTZWdtZW50cztcclxuICB9XHJcblxyXG5cclxuICBzdGF0aWMgc3ZnUGF0aEZyb21MaW5lcyhzZWdtZW50czogTGluZVtdKSB7XHJcbiAgICBjb25zdCBwYXRoID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsICdwYXRoJyk7XHJcbiAgICBjb25zdCBwYXRoQ29udGVudCA9IFtdO1xyXG4gICAgY29uc3QgcHJlY2lzaW9uID0gMzsgLy8gVE9ETyBUYWtlIGZyb20gdGhlIGRvY3VtZW50P1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzZWdtZW50cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICBwYXRoQ29udGVudC5wdXNoKGBNJHtzZWdtZW50c1tpXVswXS54LnRvRml4ZWQocHJlY2lzaW9uKX0sJHtzZWdtZW50c1tpXVswXS55LnRvRml4ZWQocHJlY2lzaW9uKX0gJHtzZWdtZW50c1tpXVsxXS54LnRvRml4ZWQocHJlY2lzaW9uKX0sJHtzZWdtZW50c1tpXVsxXS55LnRvRml4ZWQocHJlY2lzaW9uKX1gKTtcclxuICAgIH1cclxuICAgIHBhdGguc2V0QXR0cmlidXRlKCdkJywgcGF0aENvbnRlbnQuam9pbignJykpO1xyXG4gICAgcmV0dXJuIHBhdGg7XHJcbiAgfVxyXG59IiwiaW1wb3J0IEdlbmVyaWNzIGZyb20gJy4vZ2VuZXJpY3MnO1xyXG5cclxuZXhwb3J0IGNsYXNzIERyYXdpbmcge1xyXG4gIG5hbWU6IHN0cmluZztcclxuICBpZDogYW55OyAvLyBUT0RPXHJcbiAgY29udGVudDogSFRNTEVsZW1lbnQ7XHJcbiAgc3ZnQ2FudmFzOiBTVkdTVkdFbGVtZW50O1xyXG4gIGNvbW1lbnRzR3JvdXA6IFNWR0dFbGVtZW50O1xyXG4gIGNvbW1lbnRzQ2hhbmdlZDogYm9vbGVhbjtcclxuICBtb3VzZVBvc2l0aW9uOiBET01Qb2ludDtcclxuICAvLyBab29tXHJcbiAgcmVhZG9ubHkgU1ZHV0lEVEggPSA1MDA7XHJcbiAgcmVhZG9ubHkgWk9PTVNQRUVEID0gMS4yNTtcclxuICAvLyBQYW5cclxuICBhbGxvd1Bhbm5pbmcgPSBmYWxzZTtcclxuICBzdmdJbml0aWFsQ2xpY2s6IERPTVBvaW50O1xyXG4gIHByZXZWaWV3Qm94OiBTVkdSZWN0O1xyXG5cclxuICBjb25zdHJ1Y3RvcihuYW1lOiBzdHJpbmcsIGlkOiBhbnkpIHsgLy8gVE9ETyBzdHJpbmcgb3IgbnVtYmVyP1xyXG4gICAgdGhpcy5uYW1lID0gbmFtZTtcclxuICAgIHRoaXMuaWQgPSBpZDtcclxuICAgIHRoaXMuY29udGVudDtcclxuXHJcbiAgICB0aGlzLnpvb20gPSB0aGlzLnpvb20uYmluZCh0aGlzKTtcclxuICB9XHJcblxyXG4gIHNldENvbnRlbnQoY29udGVudDogc3RyaW5nKSB7XHJcbiAgICB0aGlzLmNvbnRlbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgIGNvbnN0IGRvbXBhcnNlciA9IG5ldyBET01QYXJzZXIoKTtcclxuICAgIHRoaXMuc3ZnQ2FudmFzID0gZG9tcGFyc2VyLnBhcnNlRnJvbVN0cmluZyhjb250ZW50LCAnaW1hZ2Uvc3ZnK3htbCcpLmRvY3VtZW50RWxlbWVudCBhcyB1bmtub3duIGFzIFNWR1NWR0VsZW1lbnQ7XHJcbiAgICB0aGlzLmNvbnRlbnQuYXBwZW5kQ2hpbGQodGhpcy5zdmdDYW52YXMpO1xyXG4gICAgLy8gWm9vbVxyXG4gICAgdGhpcy5zdmdDYW52YXMuYWRkRXZlbnRMaXN0ZW5lcignd2hlZWwnLCB0aGlzLnpvb20pO1xyXG4gICAgLy8gUGFuXHJcbiAgICB0aGlzLnN2Z0NhbnZhcy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBlID0+IHtcclxuICAgICAgaWYgKGUuYnV0dG9ucyA9PT0gMikge1xyXG4gICAgICAgIHRoaXMuYWxsb3dQYW5uaW5nID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLnN2Z0luaXRpYWxDbGljayA9IEdlbmVyaWNzLmdldFJlbGF0aXZlQ29vcmRzKGUsIHRoaXMuc3ZnQ2FudmFzKTtcclxuICAgICAgICB0aGlzLnByZXZWaWV3Qm94ID0gdGhpcy5zdmdDYW52YXMudmlld0JveC5iYXNlVmFsOyAvLyBWaWV3Qm94IHZhbHVlIGF0IHN0YXJ0ICBcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICB0aGlzLnN2Z0NhbnZhcy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgKCkgPT4gdGhpcy5hbGxvd1Bhbm5pbmcgPSBmYWxzZSk7XHJcbiAgICB0aGlzLnN2Z0NhbnZhcy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgKCkgPT4gdGhpcy5hbGxvd1Bhbm5pbmcgPSBmYWxzZSk7XHJcbiAgICB0aGlzLnN2Z0NhbnZhcy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBlID0+IHtcclxuICAgICAgaWYgKGUuYnV0dG9ucyA9PT0gMiAmJiB0aGlzLmFsbG93UGFubmluZyA9PT0gZmFsc2UpIHtcclxuICAgICAgICB0aGlzLmFsbG93UGFubmluZyA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5zdmdJbml0aWFsQ2xpY2sgPSBHZW5lcmljcy5nZXRSZWxhdGl2ZUNvb3JkcyhlLCB0aGlzLnN2Z0NhbnZhcyk7XHJcbiAgICAgICAgdGhpcy5wcmV2Vmlld0JveCA9IHRoaXMuc3ZnQ2FudmFzLnZpZXdCb3guYmFzZVZhbDsgLy8gVmlld0JveCB2YWx1ZSBhdCBzdGFydFxyXG4gICAgICB9XHJcbiAgICAgIGlmICh0aGlzLmFsbG93UGFubmluZykge1xyXG4gICAgICAgIHRoaXMubW91c2VQb3NpdGlvbiA9IEdlbmVyaWNzLmdldFJlbGF0aXZlQ29vcmRzKGUsIHRoaXMuc3ZnQ2FudmFzKTtcclxuICAgICAgICB0aGlzLnN2Z0NhbnZhcy52aWV3Qm94LmJhc2VWYWwueCA9IC10aGlzLm1vdXNlUG9zaXRpb24ueCAtICgtdGhpcy5zdmdJbml0aWFsQ2xpY2sueCAtIHRoaXMucHJldlZpZXdCb3gueCk7XHJcbiAgICAgICAgdGhpcy5zdmdDYW52YXMudmlld0JveC5iYXNlVmFsLnkgPSAtdGhpcy5tb3VzZVBvc2l0aW9uLnkgLSAoLXRoaXMuc3ZnSW5pdGlhbENsaWNrLnkgLSB0aGlzLnByZXZWaWV3Qm94LnkpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGNyZWF0ZUNvbW1lbnRzR3JvdXAoKSB7XHJcbiAgICB0aGlzLmNvbW1lbnRzR3JvdXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywgJ2cnKTtcclxuICAgIC8vIGdyb3VwLnNldEF0dHJpYnV0ZSgnY29tbWVudHMnLCAnJyk7XHJcbiAgICB0aGlzLnN2Z0NhbnZhcy5hcHBlbmRDaGlsZCh0aGlzLmNvbW1lbnRzR3JvdXApO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSB6b29tKGU6IFdoZWVsRXZlbnQpIHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIHRoaXMubW91c2VQb3NpdGlvbiA9IEdlbmVyaWNzLmdldFJlbGF0aXZlQ29vcmRzKGUsIHRoaXMuc3ZnQ2FudmFzKTtcclxuICAgIGxldCB6b29tRmFjdG9yID0gKGUuZGVsdGFZID4gMCA/IHRoaXMuWk9PTVNQRUVEIDogMSAvIHRoaXMuWk9PTVNQRUVEKTtcclxuICAgIGxldCB4UHJvcCA9ICh0aGlzLm1vdXNlUG9zaXRpb24ueCAtIHRoaXMuc3ZnQ2FudmFzLnZpZXdCb3guYmFzZVZhbC54KSAvIHRoaXMuc3ZnQ2FudmFzLnZpZXdCb3guYmFzZVZhbC53aWR0aDtcclxuICAgIGxldCB4SW5jID0gdGhpcy5zdmdDYW52YXMudmlld0JveC5iYXNlVmFsLndpZHRoICogem9vbUZhY3RvciAtIHRoaXMuc3ZnQ2FudmFzLnZpZXdCb3guYmFzZVZhbC53aWR0aDtcclxuICAgIGxldCB5UHJvcCA9ICh0aGlzLm1vdXNlUG9zaXRpb24ueSAtIHRoaXMuc3ZnQ2FudmFzLnZpZXdCb3guYmFzZVZhbC55KSAvIHRoaXMuc3ZnQ2FudmFzLnZpZXdCb3guYmFzZVZhbC5oZWlnaHQ7XHJcbiAgICBsZXQgeUluYyA9IHRoaXMuc3ZnQ2FudmFzLnZpZXdCb3guYmFzZVZhbC5oZWlnaHQgKiB6b29tRmFjdG9yIC0gdGhpcy5zdmdDYW52YXMudmlld0JveC5iYXNlVmFsLmhlaWdodDtcclxuICAgIGlmIChlLmRlbHRhWSA+IDAgPyB0aGlzLnN2Z0NhbnZhcy52aWV3Qm94LmJhc2VWYWwud2lkdGggPCB0aGlzLlNWR1dJRFRIICogMTAgOiB0aGlzLnN2Z0NhbnZhcy52aWV3Qm94LmJhc2VWYWwud2lkdGggPiB0aGlzLlNWR1dJRFRIIC8gMTApIHtcclxuICAgICAgdGhpcy5zdmdDYW52YXMudmlld0JveC5iYXNlVmFsLnggLT0geEluYyAqIHhQcm9wO1xyXG4gICAgICB0aGlzLnN2Z0NhbnZhcy52aWV3Qm94LmJhc2VWYWwud2lkdGggKz0geEluYztcclxuICAgICAgdGhpcy5zdmdDYW52YXMudmlld0JveC5iYXNlVmFsLnkgLT0geUluYyAqIHlQcm9wO1xyXG4gICAgICB0aGlzLnN2Z0NhbnZhcy52aWV3Qm94LmJhc2VWYWwuaGVpZ2h0ICs9IHlJbmM7XHJcbiAgICB9XHJcbiAgfVxyXG59IiwiaW1wb3J0IEdlbmVyaWNzIGZyb20gJy4vZ2VuZXJpY3MnO1xyXG5pbXBvcnQgeyBEcmF3aW5nIH0gZnJvbSAnLi9kcmF3aW5nJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIHtcclxuXHJcbiAgLyoqKioqKiBCQVNJQyBHT09HTEUgQVBJIEZVTkNUSU9OUyAqKioqKiovXHJcblxyXG4gIC8qKlxyXG4gICAqIFJldHJpZXZlcyBpZCBhbmQgbmFtZSBvZiB0aGUgZmlsZXMgdGhhdCBtYXRjaCB0aGUgcXVlcnkgb2JqZWN0LlxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBxdWVyeSBPYmplY3Qgd2l0aCBvcHRpb25hbCBlbnRyaWVzOiBuYW1lIChzdHIpLCBwYXJlbnRJZCAoc3RyKSwgdHJhc2hlZCAoYm9vbCksIGV4Y2x1ZGVOYW1lIChzdHIpLCBhbmQgb25seUZvbGRlciAoYm9vbClcclxuICAgKiBAcGFyYW0ge1N0cmluZ30gbWV0YWRhdGFGaWVsZHMgT3B0aW9uYWwsIGJ5IGRlZmF1bHQgaXQgaW5jbHVkZXMgaWQgYW5kIG5hbWUgb2YgdGhlIGZpbGUsIGJ1dCBhbnkgb3RoZXIgY2FuIGJlIGFkZGVkOiAnZmllbGQsIGZpZWxkJ1xyXG4gICAqL1xyXG4gIHN0YXRpYyBsaXN0RmlsZXMocXVlcnksIG1ldGFkYXRhRmllbGRzKSB7XHJcbiAgICBjb25zdCBxdWVyeUl0ZW1zID0gW107XHJcbiAgICBpZiAocXVlcnkubmFtZSkgcXVlcnlJdGVtcy5wdXNoKCduYW1lPVxcJycgKyBxdWVyeS5uYW1lICsgJ1xcJycpO1xyXG4gICAgaWYgKHF1ZXJ5LnBhcmVudElkKSBxdWVyeUl0ZW1zLnB1c2goJ1xcJycgKyBxdWVyeS5wYXJlbnRJZCArICdcXCcgaW4gcGFyZW50cycpO1xyXG4gICAgaWYgKHF1ZXJ5LnRyYXNoZWQgPT09IGZhbHNlKSBxdWVyeUl0ZW1zLnB1c2goJ3RyYXNoZWQ9ZmFsc2UnKTtcclxuICAgIGlmIChxdWVyeS5leGNsdWRlTmFtZSkgcXVlcnlJdGVtcy5wdXNoKCdub3QgbmFtZSBjb250YWlucyBcXCcnICsgcXVlcnkuZXhjbHVkZU5hbWUgKyAnXFwnJyk7XHJcbiAgICBpZiAocXVlcnkub25seUZvbGRlcikgcXVlcnlJdGVtcy5wdXNoKCdtaW1lVHlwZT1cXCdhcHBsaWNhdGlvbi92bmQuZ29vZ2xlLWFwcHMuZm9sZGVyXFwnJyk7XHJcbiAgICBsZXQgcmVxdWVzdCA9IGdhcGkuY2xpZW50LmRyaXZlLmZpbGVzLmxpc3Qoe1xyXG4gICAgICAncGFnZVNpemUnOiAxNSxcclxuICAgICAgJ2ZpZWxkcyc6IGBuZXh0UGFnZVRva2VuLCBmaWxlcyhpZCwgbmFtZSR7bWV0YWRhdGFGaWVsZHMgPyAnLCAnICsgbWV0YWRhdGFGaWVsZHMgOiAnJ30pYCxcclxuICAgICAgJ3EnOiBxdWVyeUl0ZW1zLmpvaW4oJyBhbmQgJylcclxuICAgIH0pO1xyXG4gICAgcmVxdWVzdC50aGVuKHJlcyA9PiB7XHJcbiAgICAgIGNvbnN0IGZpbGVzID0gcmVzLnJlc3VsdC5maWxlcztcclxuICAgICAgaWYgKGZpbGVzICYmIGZpbGVzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhmaWxlcyk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ05vIGZpbGVzIGZvdW5kIHdpdGggdGhpcyBxdWVyeTonLCBxdWVyeUl0ZW1zLmpvaW4oJyBhbmQgJykpO1xyXG4gICAgICB9XHJcbiAgICB9LCBlcnIgPT4ge1xyXG4gICAgICBjb25zb2xlLmVycm9yKGVyci5ib2R5KTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHJlcXVlc3Q7XHJcbiAgfVxyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogUmV0dXJucyBhIHByb21pc2Ugd2l0aCB0aGUgY29udGVudHMgb2YgdGhlIGZpbGUuXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IGZpbGVJZFxyXG4gICAqL1xyXG4gIHN0YXRpYyBnZXRGaWxlQ29udGVudChmaWxlSWQpIHtcclxuICAgIGxldCByZXF1ZXN0ID0gZ2FwaS5jbGllbnQuZHJpdmUuZmlsZXMuZ2V0KHtcclxuICAgICAgZmlsZUlkOiBmaWxlSWQsXHJcbiAgICAgIGFsdDogJ21lZGlhJ1xyXG4gICAgfSk7XHJcbiAgICByZXF1ZXN0LnRoZW4ocmVzID0+IHtcclxuICAgICAgaWYgKHJlcy5zdGF0dXMgPT09IDIwMClcclxuICAgICAgICBjb25zb2xlLmxvZygnRmlsZSB3aXRoIGlkICcgKyBmaWxlSWQgKyAnIGZldGNoZWQgc3VjY2Vzc2Z1bGx5LicpO1xyXG4gICAgfSwgZXJyID0+IHtcclxuICAgICAgY29uc29sZS5lcnJvcihlcnIuYm9keSk7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiByZXF1ZXN0O1xyXG4gIH1cclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIFJldHVybnMgYSBwcm9taXNlIHdpdGggdGhlIHJlcXVlc3RlZCBkYXRhIG9mIHRoZSBmaWxlLlxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBmaWxlSWQgVGhlIGlkIG9mIHRoZSBmaWxlIHRvIGdldCB0aGUgZGF0YSBvZi5cclxuICAgKiBAcGFyYW0ge1N0cmluZ30gZmllbGRzIFRoZSBkYXRhIHRvIGJlIGZldGNoZWQgaW4gZm9ybWF0OiAnZmllbGQxLCBmaWVsZDInLlxyXG4gICAqL1xyXG4gIHN0YXRpYyBnZXRGaWxlRGF0YShmaWxlSWQsIGZpZWxkcykge1xyXG4gICAgbGV0IHJlcXVlc3QgPSBnYXBpLmNsaWVudC5kcml2ZS5maWxlcy5nZXQoe1xyXG4gICAgICBmaWxlSWQ6IGZpbGVJZCxcclxuICAgICAgZmllbGRzOiBmaWVsZHNcclxuICAgIH0pO1xyXG4gICAgcmVxdWVzdC50aGVuKHJlcyA9PiB7XHJcbiAgICAgIGlmIChyZXMuc3RhdHVzID09PSAyMDApIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnRmlsZSBkYXRhIGZldGNoZWQgc3VjY2VzZnVsbHkuJyk7XHJcbiAgICAgIH1cclxuICAgIH0sIGVyciA9PiB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHJlcXVlc3Q7XHJcbiAgfVxyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogQ3JlYXRlcyBhIG5ldyBmb2xkZXIgYW5kIHJldHVybnMgaXRzIGlkLlxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB0aXRsZSBUaGUgbmFtZSBvZiB0aGUgZm9sZGVyLlxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBwYXJlbnRJZCBPcHRpb25hbCBpZCBvZiB0aGUgcGFyZW50IGZvbGRlciwgaWYgbm9uZSBpdCB3aWxsIGJlIGNyZWF0ZWQgb24gdGhlIHJvb3QuXHJcbiAgICovXHJcbiAgc3RhdGljIGNyZWF0ZUZvbGRlcih0aXRsZSwgcGFyZW50SWQgPSAnZHJpdmUnKSB7XHJcbiAgICBjb25zdCBib2R5ID0ge1xyXG4gICAgICBcIm5hbWVcIjogdGl0bGUsXHJcbiAgICAgIFwibWltZVR5cGVcIjogXCJhcHBsaWNhdGlvbi92bmQuZ29vZ2xlLWFwcHMuZm9sZGVyXCIsXHJcbiAgICAgIFwicGFyZW50c1wiOiBwYXJlbnRJZCAhPT0gJ2RyaXZlJyA/IFtwYXJlbnRJZF0gOiBbXVxyXG4gICAgfVxyXG4gICAgY29uc3QgcmVxdWVzdCA9IGdhcGkuY2xpZW50LnJlcXVlc3Qoe1xyXG4gICAgICAncGF0aCc6ICdodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9kcml2ZS92My9maWxlcy8nLFxyXG4gICAgICAnbWV0aG9kJzogJ1BPU1QnLFxyXG4gICAgICAnYm9keSc6IGJvZHlcclxuICAgIH0pO1xyXG4gICAgcmVxdWVzdC50aGVuKHJlcyA9PiB7XHJcbiAgICAgIGNvbnNvbGUubG9nKHRpdGxlICsgJyBmb2xkZXIgY3JlYXRlZC4gSWQ6ICcgKyBKU09OLnBhcnNlKHJlcy5ib2R5KS5pZCk7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiByZXF1ZXN0O1xyXG4gIH1cclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIFVwbG9hZCBhIGZpbGUgdG8gdGhlIHNwZWNpZmljIGZvbGRlci5cclxuICAgKiBAcGFyYW0ge1N0cmluZ30gZmlsZUNvbnRlbnQgVGhlIGNvbnRlbnQgb2YgdGhlIGZpbGUgYXMgYSBzdHJpbmcuXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IGZpbGVNaW1lVHlwZSBUaGUgTUlNRSBUeXBlIG9mIHRoZSBmaWxlLiBGb3IgZXhhbXBsZTogJ2FwcGxpY2F0aW9uL2pzb24nXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IGZpbGVOYW1lIE5hbWUgZm9yIHRoZSBmaWxlLlxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBmb2xkZXJJZCBJZCBvZiB0aGUgcGFyZW50IGZvbGRlci5cclxuICAgKi9cclxuICBzdGF0aWMgdXBsb2FkRmlsZShmaWxlQ29udGVudCwgZmlsZU1pbWVUeXBlLCBmaWxlTmFtZSwgZm9sZGVySWQpIHtcclxuICAgIGNvbnN0IGZpbGUgPSBuZXcgQmxvYihbZmlsZUNvbnRlbnRdLCB7IHR5cGU6IGZpbGVNaW1lVHlwZSB9KTtcclxuICAgIGNvbnN0IG1ldGFkYXRhID0ge1xyXG4gICAgICAnbmFtZSc6IGZpbGVOYW1lLFxyXG4gICAgICAnbWltZVR5cGUnOiBmaWxlTWltZVR5cGUsXHJcbiAgICAgICdwYXJlbnRzJzogW2ZvbGRlcklkXVxyXG4gICAgfTtcclxuICAgIGNvbnN0IGFjY2Vzc1Rva2VuID0gZ2FwaS5hdXRoLmdldFRva2VuKCkuYWNjZXNzX3Rva2VuOyAvLyBHYXBpIGlzIHVzZWQgZm9yIHJldHJpZXZpbmcgdGhlIGFjY2VzcyB0b2tlbi5cclxuICAgIGNvbnN0IGZvcm0gPSBuZXcgRm9ybURhdGEoKTtcclxuICAgIGZvcm0uYXBwZW5kKCdtZXRhZGF0YScsIG5ldyBCbG9iKFtKU09OLnN0cmluZ2lmeShtZXRhZGF0YSldLCB7IHR5cGU6ICdhcHBsaWNhdGlvbi9qc29uJyB9KSk7XHJcbiAgICBmb3JtLmFwcGVuZCgnZmlsZScsIGZpbGUpO1xyXG5cclxuICAgIGxldCByZXF1ZXN0ID0gZmV0Y2goJ2h0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL3VwbG9hZC9kcml2ZS92My9maWxlcz91cGxvYWRUeXBlPW11bHRpcGFydCZmaWVsZHM9aWQnLCB7XHJcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICBoZWFkZXJzOiBuZXcgSGVhZGVycyh7ICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgYWNjZXNzVG9rZW4gfSksXHJcbiAgICAgIGJvZHk6IGZvcm1cclxuICAgIH0pO1xyXG4gICAgcmVxdWVzdC50aGVuKHJlcyA9PiB7XHJcbiAgICAgIGlmIChyZXMub2sgPT09IHRydWUgJiYgcmVzLnN0YXR1cyA9PT0gMjAwKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ1VwbG9hZCBvZiAnICsgZmlsZU5hbWUgKyAnIHN1Y2Nlc3NmdWwuJyk7XHJcbiAgICAgIH1cclxuICAgIH0sIGVyciA9PiB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHJlcXVlc3Q7XHJcbiAgfVxyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogVXBkYXRlIHRoZSBjb250ZW50cyBvZiBhIGZpbGUuXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IGZpbGVDb250ZW50IFRoZSBjb250ZW50IG9mIHRoZSBmaWxlIGFzIGEgc3RyaW5nLlxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBmaWxlTWltZVR5cGUgVGhlIE1JTUUgVHlwZSBvZiB0aGUgZmlsZS4gRm9yIGV4YW1wbGU6ICdhcHBsaWNhdGlvbi9qc29uJy5cclxuICAgKiBAcGFyYW0ge1N0cmluZ30gZmlsZUlkIElEIG9mIHRoZSBmaWxlIHRvIHVwZGF0ZSBpdHMgY29udGVudC5cclxuICAgKi9cclxuICBzdGF0aWMgdXBkYXRlRmlsZUNvbnRlbnQoZmlsZUNvbnRlbnQsIGZpbGVNaW1lVHlwZSwgZmlsZUlkKSB7XHJcbiAgICBjb25zdCBmaWxlID0gbmV3IEJsb2IoW2ZpbGVDb250ZW50XSwgeyB0eXBlOiBmaWxlTWltZVR5cGUgfSk7XHJcbiAgICBjb25zdCBtZXRhZGF0YSA9IHtcclxuICAgICAgJ21pbWVUeXBlJzogZmlsZU1pbWVUeXBlXHJcbiAgICB9O1xyXG4gICAgY29uc3QgYWNjZXNzVG9rZW4gPSBnYXBpLmF1dGguZ2V0VG9rZW4oKS5hY2Nlc3NfdG9rZW47IC8vIEdhcGkgaXMgdXNlZCBmb3IgcmV0cmlldmluZyB0aGUgYWNjZXNzIHRva2VuLlxyXG4gICAgY29uc3QgZm9ybSA9IG5ldyBGb3JtRGF0YSgpO1xyXG4gICAgZm9ybS5hcHBlbmQoJ21ldGFkYXRhJywgbmV3IEJsb2IoW0pTT04uc3RyaW5naWZ5KG1ldGFkYXRhKV0sIHsgdHlwZTogJ2FwcGxpY2F0aW9uL2pzb24nIH0pKTtcclxuICAgIGZvcm0uYXBwZW5kKCdmaWxlJywgZmlsZSk7XHJcblxyXG4gICAgbGV0IHJlcXVlc3QgPSBmZXRjaChgaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vdXBsb2FkL2RyaXZlL3YzL2ZpbGVzLyR7ZmlsZUlkfT91cGxvYWRUeXBlPW11bHRpcGFydGAsIHsgLy8gT3RoZXJ3aXNlIHRyeSB1cGxvYWRUeXBlPW1lZGlhXHJcbiAgICAgIG1ldGhvZDogJ1BBVENIJyxcclxuICAgICAgaGVhZGVyczogbmV3IEhlYWRlcnMoeyAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIGFjY2Vzc1Rva2VuIH0pLFxyXG4gICAgICBib2R5OiBmb3JtLFxyXG4gICAgfSk7XHJcbiAgICByZXF1ZXN0LnRoZW4ocmVzID0+IHtcclxuICAgICAgaWYgKHJlcy5vayA9PT0gdHJ1ZSAmJiByZXMuc3RhdHVzID09PSAyMDApIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnVXBkYXRlIHN1Y2Nlc3NmdWwuJyk7XHJcbiAgICAgIH1cclxuICAgIH0sIGVyciA9PiB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHJlcXVlc3Q7XHJcbiAgfVxyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogVmVyc2lvbiBvZiB1cGxvYWQgZmlsZSBmcm9tIGRvY3VtZW50YXRpb24gdGhhdCBkb2VzbnQgd29yay5cclxuICAgKiBJdCBqdXN0IGNyZWF0ZXMgYW4gdW50aXRsZWQgZW1wdHkgZmlsZSBpbiB0aGUgZHJpdmUgcm9vdC5cclxuICAgKiBAcGFyYW0geyp9IGZpbGVDb250ZW50IFxyXG4gICAqIEBwYXJhbSB7Kn0gZmlsZU1pbWVUeXBlIFxyXG4gICAqIEBwYXJhbSB7Kn0gZmlsZU5hbWUgXHJcbiAgICogQHBhcmFtIHsqfSBmb2xkZXJJZCBcclxuICAgKi9cclxuICAvLyBzdGF0aWMgdXBsb2FkRmlsZTIoZmlsZUNvbnRlbnQsIGZpbGVNaW1lVHlwZSwgZmlsZU5hbWUsIGZvbGRlcklkKSB7XHJcbiAgLy8gICBjb25zdCBmaWxlID0gbmV3IEJsb2IoW2ZpbGVDb250ZW50XSwgeyB0eXBlOiBmaWxlTWltZVR5cGUgfSk7XHJcbiAgLy8gICBjb25zdCBmaWxlTWV0YWRhdGEgPSB7XHJcbiAgLy8gICAgICduYW1lJzogZmlsZU5hbWUsXHJcbiAgLy8gICAgICdwYXJlbnRzJzogW2ZvbGRlcklkXVxyXG4gIC8vICAgfTtcclxuICAvLyAgIGNvbnN0IGZvcm0gPSBuZXcgRm9ybURhdGEoKTtcclxuICAvLyAgIGZvcm0uYXBwZW5kKCdtZXRhZGF0YScsIG5ldyBCbG9iKFtKU09OLnN0cmluZ2lmeShmaWxlTWV0YWRhdGEpXSwgeyB0eXBlOiAnYXBwbGljYXRpb24vanNvbicgfSkpO1xyXG4gIC8vICAgZm9ybS5hcHBlbmQoJ2ZpbGUnLCBmaWxlKTtcclxuICAvLyAgIGNvbnN0IG1lZGlhID0ge1xyXG4gIC8vICAgICBtaW1lVHlwZTogZmlsZU1pbWVUeXBlLFxyXG4gIC8vICAgICBib2R5OiBmb3JtXHJcbiAgLy8gICB9O1xyXG4gIC8vICAgcmV0dXJuIGdhcGkuY2xpZW50LmRyaXZlLmZpbGVzLmNyZWF0ZSh7XHJcbiAgLy8gICAgIHJlc291cmNlOiBmaWxlTWV0YWRhdGEsXHJcbiAgLy8gICAgIG1lZGlhOiBtZWRpYSxcclxuICAvLyAgICAgZmllbGRzOiAnaWQnXHJcbiAgLy8gICB9LCAoZXJyLCBmaWxlKSA9PiB7XHJcbiAgLy8gICAgIGlmIChlcnIpIHtcclxuICAvLyAgICAgICAvLyBIYW5kbGUgZXJyb3JcclxuICAvLyAgICAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgLy8gICAgIH0gZWxzZSB7XHJcbiAgLy8gICAgICAgY29uc29sZS5sb2coJ0ZpbGUgSWQ6ICcsIGZpbGUuaWQpO1xyXG4gIC8vICAgICB9XHJcbiAgLy8gICB9KTtcclxuICAvLyB9XHJcblxyXG5cclxuICAvKipcclxuICAgKiBSZW5hbWUgYSBmaWxlLlxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBmaWxlSWQgSUQgb2YgdGhlIGZpbGUgdG8gcmVuYW1lLlxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBuZXdUaXRsZSBOZXcgdGl0bGUgZm9yIHRoZSBmaWxlLlxyXG4gICAqL1xyXG4gIHN0YXRpYyByZW5hbWVGaWxlKGZpbGVJZCwgbmV3VGl0bGUpIHtcclxuICAgIGNvbnN0IHJlcXVlc3QgPSBnYXBpLmNsaWVudC5kcml2ZS5maWxlcy51cGRhdGUoe1xyXG4gICAgICAnZmlsZUlkJzogZmlsZUlkLFxyXG4gICAgICAnbmFtZSc6IG5ld1RpdGxlLFxyXG4gICAgICAndXBsb2FkVHlwZSc6ICdtZWRpYSdcclxuICAgIH0pO1xyXG4gICAgcmVxdWVzdC50aGVuKHJlcyA9PiB7XHJcbiAgICAgIC8vY29uc29sZS5sb2cocmVzKTtcclxuICAgIH0sIHJlaiA9PiB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHJlbmFtaW5nIGZpbGU6ICcgKyBmaWxlSWQsIHJlaik7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiByZXF1ZXN0O1xyXG4gIH1cclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIE1vdmVzIGEgZmlsZSBvciBmb2xkZXIgaW5zaWRlIGFub3RoZXIgZm9sZGVyLlxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBmaWxlSWQgXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IHBhcmVudElkIFxyXG4gICAqL1xyXG4gIHN0YXRpYyBtb3ZlRmlsZVYyKGZpbGVJZCwgcGFyZW50SWQpIHtcclxuICAgIGNvbnN0IHJlcXVlc3QgPSBnYXBpLmNsaWVudC5yZXF1ZXN0KHtcclxuICAgICAgJ3BhdGgnOiAnaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vZHJpdmUvdjIvZmlsZXMvJyArIGZpbGVJZCArICcvcGFyZW50cycsXHJcbiAgICAgICdtZXRob2QnOiAnUE9TVCcsXHJcbiAgICAgICdoZWFkZXJzJzoge1xyXG4gICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcclxuICAgICAgfSxcclxuICAgICAgJ2JvZHknOiB7XHJcbiAgICAgICAgJ2lkJzogcGFyZW50SWRcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICByZXF1ZXN0LnRoZW4ocmVzID0+IHtcclxuICAgICAgY29uc29sZS5sb2cocmVzKTtcclxuICAgIH0sIHJlaiA9PiB7XHJcbiAgICAgIGNvbnNvbGUubG9nKHJlaik7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiByZXF1ZXN0O1xyXG4gIH1cclxuXHJcblxyXG4gIHN0YXRpYyBtb3ZlRmlsZShmaWxlSWQsIHBhcmVudElkKSB7XHJcbiAgICBjb25zdCBib2R5ID0geyAnaWQnOiBwYXJlbnRJZCB9O1xyXG4gICAgY29uc3QgcmVxdWVzdCA9IGdhcGkuY2xpZW50LmRyaXZlLnBhcmVudHMuaW5zZXJ0KHtcclxuICAgICAgJ2ZpbGVJZCc6IGZpbGVJZCxcclxuICAgICAgJ3Jlc291cmNlJzogYm9keVxyXG4gICAgfSk7XHJcbiAgICByZXF1ZXN0LmV4ZWN1dGUoZnVuY3Rpb24gKHJlc3ApIHsgfSk7XHJcbiAgfVxyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogUGVybWFuZW50bHkgZGVsZXRlIGEgZmlsZSwgc2tpcHBpbmcgdGhlIHRyYXNoLlxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBmaWxlSWQgSUQgb2YgdGhlIGZpbGUgdG8gZGVsZXRlLlxyXG4gICAqL1xyXG4gIHN0YXRpYyBkZWxldGVGaWxlKGZpbGVJZCkge1xyXG4gICAgbGV0IHJlcXVlc3QgPSBnYXBpLmNsaWVudC5kcml2ZS5maWxlcy5kZWxldGUoe1xyXG4gICAgICAnZmlsZUlkJzogZmlsZUlkXHJcbiAgICB9KTtcclxuICAgIHJlcXVlc3QudGhlbihyZXMgPT4ge1xyXG4gICAgICBjb25zb2xlLmxvZyhyZXMpO1xyXG4gICAgfSwgcmVqID0+IHtcclxuICAgICAgY29uc29sZS5sb2cocmVqKTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHJlcXVlc3Q7XHJcbiAgfVxyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogTk9UIFdPUktJTkcuIFRISVMgV09VTEQgT05MWSBNQUtFIFNFTlNFIElOIEEgU0VSVkVSLlxyXG4gICAqIFN1YnNjcmliZXMgdG8gY2hhbmdlcyB0byBhIGZpbGUuXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IGZpbGVJZCBJRCBvZiB0aGUgZmlsZSB0byB3YXRjaC5cclxuICAgKi9cclxuICAvLyBzdGF0aWMgd2F0Y2hGaWxlKGZpbGVJZCkge1xyXG4gIC8vICAgY29uc3QgYm9keSA9IHtcclxuICAvLyAgICAgXCJraW5kXCI6IFwiYXBpI2NoYW5uZWxcIixcclxuICAvLyAgICAgXCJpZFwiOiBcIjAxMjM0NTY3LTg5YWItY2RlZi0wMTIzNDU2Nzg5YWJcIiwgLy8gVE9ETyBVc2UgYSB1dWlkIGdlbmVyYXRvclxyXG4gIC8vICAgICAvL1wicmVzb3VyY2VJZFwiOiBzdHJpbmcsXHJcbiAgLy8gICAgIC8vXCJyZXNvdXJjZVVyaVwiOiBzdHJpbmcsXHJcbiAgLy8gICAgIFwidHlwZVwiOiBcIndlYl9ob29rXCIsXHJcbiAgLy8gICAgIFwiYWRkcmVzc1wiOiBcImh0dHBzOi8vdmlzdWFsYXJxYXBwLnJhbW9uY2FyY2VsZXMuY29tXCJcclxuICAvLyAgIH1cclxuICAvLyAgIGNvbnN0IHJlcXVlc3QgPSBnYXBpLmNsaWVudC5yZXF1ZXN0KHtcclxuICAvLyAgICAgJ3BhdGgnOiBgaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vZHJpdmUvdjMvZmlsZXMvJHtmaWxlSWR9L3dhdGNoYCxcclxuICAvLyAgICAgJ21ldGhvZCc6ICdQT1NUJyxcclxuICAvLyAgICAgJ2JvZHknOiBib2R5XHJcbiAgLy8gICB9KTtcclxuICAvLyAgIHJlcXVlc3QudGhlbihyZXMgPT4ge1xyXG4gIC8vICAgICBjb25zb2xlLmxvZyhyZXMpO1xyXG4gIC8vICAgfSk7XHJcbiAgLy8gICByZXR1cm4gcmVxdWVzdDtcclxuICAvLyB9XHJcblxyXG4gIC8vIE5PVCBXT1JLSU5HLiBUSElTIFdPVUxEIE9OTFkgTUFLRSBTRU5TRSBJTiBBIFNFUlZFUi5cclxuICAvLyBzdGF0aWMgc3RvcFdhdGNoaW5nKGNoYW5uZWxJZCwgcmVzb3VyY2VJZCkge1xyXG4gIC8vICAgY29uc3QgYm9keSA9IHtcclxuICAvLyAgICAgXCJpZFwiOiBjaGFubmVsSWQsIC8vIFNob3VsZCBiZSB0aGUgb25lIHRvIHN0b3AgY3JlYXRlZCBwcmV2aW91c2x5LlxyXG4gIC8vICAgICBcInJlc291cmNlSWRcIjogcmVzb3VyY2VJZFxyXG4gIC8vICAgfVxyXG4gIC8vICAgY29uc3QgcmVxdWVzdCA9IGdhcGkuY2xpZW50LnJlcXVlc3Qoe1xyXG4gIC8vICAgICAncGF0aCc6IGBodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9kcml2ZS92My9jaGFubmVscy9zdG9wYCxcclxuICAvLyAgICAgJ21ldGhvZCc6ICdQT1NUJyxcclxuICAvLyAgICAgJ2JvZHknOiBib2R5XHJcbiAgLy8gICB9KTtcclxuICAvLyAgIHJlcXVlc3QudGhlbihyZXMgPT4ge1xyXG4gIC8vICAgICBjb25zb2xlLmxvZyhyZXMpO1xyXG4gIC8vICAgfSk7XHJcbiAgLy8gICByZXR1cm4gcmVxdWVzdDtcclxuICAvLyB9XHJcblxyXG5cclxuICAvKipcclxuICAgKiBDcmVhdGVzIHBlcm1pc3Npb25zIGZvciBhIHNwZWNpZmljIGZpbGUuXHJcbiAgICogVGhlIGRlbGF5IGhhcyBiZWVuIGFkZGVkIGJlY2F1c2UgdGhlIEdEIEFQSSBkb2VzbnQgYWxsb3cgdG8gY3JlYXRlIHNldmVyYWwgcGVybWlzc2lvbnMgYXQgdGhlIHNhbWUgdGltZS5cclxuICAgKiBAcGFyYW0ge1N0cmluZ30gZmlsZUlkIFxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBlbWFpbEFkZHJlc3NcclxuICAgKiBAcGFyYW0ge051bWJlcn0gZGVsYXkgQW1vdW50IG9mIG1pbGxpc2Vjb25kcyB0byB3YWl0IGJlZm9yZSBzZW5kaW5nIHRoZSByZXF1ZXN0LlxyXG4gICAqL1xyXG4gIHN0YXRpYyBzaGFyZUZpbGUoZmlsZUlkLCBlbWFpbEFkZHJlc3MsIGRlbGF5ID0gMCkge1xyXG4gICAgY29uc3QgZGVsYXllZFByb21pc2UgPSBuZXcgUHJvbWlzZShyZXMgPT4gc2V0VGltZW91dChyZXMsIGRlbGF5KSk7XHJcbiAgICByZXR1cm4gZGVsYXllZFByb21pc2UudGhlbihyZXMgPT4ge1xyXG4gICAgICBjb25zdCByZXF1ZXN0ID0gZ2FwaS5jbGllbnQucmVxdWVzdCh7XHJcbiAgICAgICAgJ3BhdGgnOiBgaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vZHJpdmUvdjMvZmlsZXMvJHtmaWxlSWR9L3Blcm1pc3Npb25zP3NlbmROb3RpZmljYXRpb25FbWFpbD1mYWxzZSZmaWVsZHM9aWQsZGlzcGxheU5hbWUsZW1haWxBZGRyZXNzLHBob3RvTGluayxyb2xlYCxcclxuICAgICAgICAnbWV0aG9kJzogJ1BPU1QnLFxyXG4gICAgICAgICdoZWFkZXJzJzoge1xyXG4gICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgJ2JvZHknOiB7XHJcbiAgICAgICAgICAncm9sZSc6ICd3cml0ZXInLCAvLyBvd25lciwgd3JpdGVyLCBjb21tZW50ZXIsIHJlYWRlclxyXG4gICAgICAgICAgJ3R5cGUnOiAndXNlcicsXHJcbiAgICAgICAgICAnZW1haWxBZGRyZXNzJzogZW1haWxBZGRyZXNzXHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgICAgcmVxdWVzdC50aGVuKHJlcyA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2cocmVzKTtcclxuICAgICAgfSk7XHJcbiAgICAgIHJldHVybiByZXF1ZXN0O1xyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gT1JJR0lOQUwgQ09ERSBXSVRIT1VUIERFTEFZXHJcbiAgICAvLyBjb25zdCByZXF1ZXN0ID0gZ2FwaS5jbGllbnQucmVxdWVzdCh7XHJcbiAgICAvLyAgICdwYXRoJzogJ3NhbWUgcGF0aCBhcyBhYm92ZScsXHJcbiAgICAvLyAgICdtZXRob2QnOiAnUE9TVCcsXHJcbiAgICAvLyAgICdoZWFkZXJzJzoge1xyXG4gICAgLy8gICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcclxuICAgIC8vICAgfSxcclxuICAgIC8vICAgJ2JvZHknOiB7XHJcbiAgICAvLyAgICAgJ3JvbGUnOiAnd3JpdGVyJywgLy8gb3duZXIsIHdyaXRlciwgY29tbWVudGVyLCByZWFkZXJcclxuICAgIC8vICAgICAndHlwZSc6ICd1c2VyJyxcclxuICAgIC8vICAgICAnZW1haWxBZGRyZXNzJzogZW1haWxBZGRyZXNzXHJcbiAgICAvLyAgIH1cclxuICAgIC8vIH0pO1xyXG4gICAgLy8gcmVxdWVzdC50aGVuKHJlcyA9PiB7XHJcbiAgICAvLyAgIGNvbnNvbGUubG9nKHJlcyk7XHJcbiAgICAvLyB9KTtcclxuICAgIC8vIHJldHVybiByZXF1ZXN0O1xyXG4gIH1cclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIERlbGV0ZXMgcGVybWlzc2lvbnMgZm9yIGEgc3BlY2lmaWMgZmlsZS5cclxuICAgKiBAcGFyYW0ge1N0cmluZ30gZmlsZUlkIFxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBwZXJtaXNzaW9uSWQgXHJcbiAgICovXHJcbiAgc3RhdGljIHN0b3BTaGFyaW5nRmlsZShmaWxlSWQsIHBlcm1pc3Npb25JZCkge1xyXG4gICAgY29uc3QgcmVxdWVzdCA9IGdhcGkuY2xpZW50LnJlcXVlc3Qoe1xyXG4gICAgICAncGF0aCc6ICdodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9kcml2ZS92My9maWxlcy8nICsgZmlsZUlkICsgJy9wZXJtaXNzaW9ucy8nICsgcGVybWlzc2lvbklkLFxyXG4gICAgICAnbWV0aG9kJzogJ0RFTEVURScsXHJcbiAgICAgICdoZWFkZXJzJzoge1xyXG4gICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICByZXF1ZXN0LnRoZW4ocmVzID0+IHtcclxuICAgICAgY29uc29sZS5sb2cocmVzKTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHJlcXVlc3Q7XHJcbiAgfVxyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogT2J0YWlucyBkYXRhIG9mIHRoZSB1c2VycyBzaGFyaW5nIGEgcHJvamVjdC4gTWluaW11bSByZXN1bHQgd291bGQgYmUgdGhlIG9ubHkgdGhlIG93bmVyLlxyXG4gICAqIEZvciBlYWNoIHVzZXIgcmV0dXJucyB0aGUgaWQgb2YgdGhlIHNoYXJpbmcgcGVybWlzc2lvbiwgbmFtZSwgZW1haWwgYWRkcmVzcywgcm9sZSBhbmQgcHJvZmlsZSBpbWFnZSB1cmwuXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IHByb2plY3RJZCBUaGUgcHJvamVjdCBpZC5cclxuICAgKi9cclxuICBzdGF0aWMgZ2V0UHJvamVjdFRlYW1EYXRhKHByb2plY3RJZCkge1xyXG4gICAgLy8gaHR0cHM6Ly9kZXZlbG9wZXJzLmdvb2dsZS5jb20vZHJpdmUvYXBpL3YzL3JlZmVyZW5jZS9wZXJtaXNzaW9ucy9saXN0XHJcbiAgICBjb25zdCByZXF1ZXN0ID0gZ2FwaS5jbGllbnQucmVxdWVzdCh7XHJcbiAgICAgICdwYXRoJzogYGh0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL2RyaXZlL3YzL2ZpbGVzLyR7cHJvamVjdElkfS9wZXJtaXNzaW9ucz9maWVsZHM9cGVybWlzc2lvbnMoaWQsZGlzcGxheU5hbWUsZW1haWxBZGRyZXNzLHJvbGUscGhvdG9MaW5rKWAsXHJcbiAgICAgICdtZXRob2QnOiAnR0VUJyxcclxuICAgICAgJ2hlYWRlcnMnOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfVxyXG4gICAgfSk7XHJcbiAgICByZXF1ZXN0LnRoZW4ocmVzID0+IHtcclxuICAgICAgY29uc29sZS5sb2cocmVzKTtcclxuICAgIH0sIHJlaiA9PiB7XHJcbiAgICAgIGNvbnNvbGUubG9nKHJlaik7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiByZXF1ZXN0O1xyXG4gIH1cclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIEdldHMgaW5mb3JtYXRpb24gYWJvdXQgdGhlIGN1cnJlbnQgdXNlciBsb2dnZWQgaW4gd2l0aCBHb29nbGUuXHJcbiAgICovXHJcbiAgc3RhdGljIGdldFVzZXJJbmZvKCkge1xyXG4gICAgY29uc3QgcmVxdWVzdCA9IGdhcGkuY2xpZW50LmRyaXZlLmFib3V0LmdldCh7XHJcbiAgICAgIGZpZWxkczogJ3VzZXInXHJcbiAgICB9KTtcclxuICAgIHJlcXVlc3QudGhlbihyZXMgPT4ge1xyXG4gICAgICBjb25zb2xlLmxvZyhKU09OLnBhcnNlKHJlcy5ib2R5KS51c2VyKTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHJlcXVlc3Q7XHJcbiAgfVxyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogU2VuZHMgYW4gZW1haWwgaW5kaWNhdGluZyB0aGF0IGEgcHJvamVjdCBhcyBiZWVuIHNoYXJlZCB3aXRoIHRoZSByZWNlaXZlci5cclxuICAgKiBAcGFyYW0ge1N0cmluZ30gc2hhcmVyIE5hbWUgb2YgdGhlIHVzZXIgd2hvIHNoYXJlZCB0aGUgcHJvamVjdC5cclxuICAgKiBAcGFyYW0ge1N0cmluZyB8IFN0cmluZ1tdfSByZWNpcGllbnRzIENvbW1hIHNlcGFyYXRlZCBsaXN0IG9yIGFuIGFycmF5IG9mIHJlY2lwaWVudHMgZW1haWwgYWRkcmVzc2VzLlxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBwcm9qZWN0TmFtZSBUaGUgbmFtZSBvZiB0aGUgcHJvamVjdCB0aGF0IGhhcyBiZWVuIHNoYXJlZC5cclxuICAgKiBAcGFyYW0ge1N0cmluZ30gcHJvamVjdElkIFRoaXMgaXMgcmVxdWlyZWQgdG8gY3JlYXRlIHRoZSB1cmwgbGluayB0byB0aGUgcHJvamVjdC5cclxuICAgKi9cclxuICBzdGF0aWMgc2VuZFNoYXJpbmdQcm9qZWN0RW1haWwoc2hhcmVyLCByZWNpcGllbnRzLCBwcm9qZWN0TmFtZSwgcHJvamVjdElkKSB7XHJcbiAgICBjb25zdCByZXF1ZXN0ID0gZmV0Y2goJ2h0dHBzOi8vdXMtY2VudHJhbDEtdGVzdGdkcHJvamVjdC0xNTcwMDM2NDM5OTMxLmNsb3VkZnVuY3Rpb25zLm5ldC9zZW5kTWFpbCcsIHtcclxuICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXHJcbiAgICAgIH0sXHJcbiAgICAgIC8vIGJvZHkgZGF0YSB0eXBlIG11c3QgbWF0Y2ggXCJDb250ZW50LVR5cGVcIiBoZWFkZXIuXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgc2hhcmVyLCByZWNpcGllbnRzLCBwcm9qZWN0TmFtZSwgcHJvamVjdElkIH0pXHJcbiAgICB9KTtcclxuICAgIHJlcXVlc3QudGhlbihyZXMgPT4ge1xyXG4gICAgICBjb25zb2xlLmxvZyhyZXMpO1xyXG4gICAgICAvLyBpZiAocmVzLm9rID09PSB0cnVlICYmIHJlcy5zdGF0dXMgPT09IDIwMCkge1xyXG4gICAgICAvLyAgIGNvbnNvbGUubG9nKCdTZW5kIHN1Y2Nlc3NmdWwuJyk7XHJcbiAgICAgIC8vIH1cclxuICAgIH0sIGVyciA9PiB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHJlcXVlc3Q7XHJcbiAgfVxyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogU2VuZHMgYSBwdXNoIG5vdGlmaWNhdGlvbiB0byBhIHVzZXIgaWRlbnRpZmllZCBieSBoaXMvaGVyIGVtYWlsIGFkZHJlc3MuXHJcbiAgICogSXQgdXNlcyB0aGUgRmlyZWJhc2UgZGF0YWJhc2UgdG8gb2J0YWluIHRoZSBkZXZpY2UgdG9rZW5zIGFzc29jaWF0ZWQgdG8gZWFjaCBlbWFpbCBhZGRyZXNzLlxyXG4gICAqIEBwYXJhbSB7U3RyaW5nW119IGVtYWlscyBhcnJheSBvZiBlbWFpbHMgb2YgdGhlIHVzZXJzIHRvIHNlbmQgdGhlIG5vdGlmaWNhdGlvbiB0by5cclxuICAgKiBAcGFyYW0ge1N0cmluZ30gYXV0aG9yIG5hbWUgb2YgdGhlIGF1dGhvciB0aGF0IGdlbmVyYXRlZCB0aGUgbm90aWZpY2F0aW9uLlxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBwaG90b0xpbmsgdXJsIG9mIHRoZSBpbWFnZSB0byBpZGVudGlmeSB0aGUgbWVzc2FnZS5cclxuICAgKiBAcGFyYW0ge1N0cmluZ30gdGV4dCB0aGUgdGV4dHVhbCBjb250ZW50IG9mIHRoZSBub3RpZmljYXRpb24gbWVzc2FnZS5cclxuICAgKiBAcGFyYW0ge1N0cmluZ30gcHJvamVjdE5hbWUgdGhlIG5hbWUgb2YgdGhlIHByb2plY3QgZm9yIHdoaWNoIHRoZSBub3RpZmljYXRpb24gaXMgc2VudC5cclxuICAgKiBAcGFyYW0ge1N0cmluZ30gcHJvamVjdElkIHRoZSBpZCBvZiB0aGUgcHJvamVjdCBmb3Igd2hpY2ggdGhlIG5vdGlmaWNhdGlvbiBpcyBzZW50LlxyXG4gICAqL1xyXG4gIHN0YXRpYyBzZW5kTm90aWZpY2F0aW9uKGVtYWlscywgYXV0aG9yLCBwaG90b0xpbmssIHRleHQsIHByb2plY3ROYW1lLCBwcm9qZWN0SWQpIHtcclxuICAgIGNvbnN0IHJlcXVlc3QgPSBmZXRjaCgnaHR0cHM6Ly91cy1jZW50cmFsMS10ZXN0Z2Rwcm9qZWN0LTE1NzAwMzY0Mzk5MzEuY2xvdWRmdW5jdGlvbnMubmV0L3NlbmRQdXNoTm90aWZpY2F0aW9uJywge1xyXG4gICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcclxuICAgICAgfSxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBlbWFpbHMsIGF1dGhvciwgcGhvdG9MaW5rLCB0ZXh0LCBwcm9qZWN0TmFtZSwgcHJvamVjdElkIH0pIC8vIGJvZHkgZGF0YSB0eXBlIG11c3QgbWF0Y2ggXCJDb250ZW50LVR5cGVcIiBoZWFkZXJcclxuICAgIH0pO1xyXG4gICAgcmVxdWVzdC50aGVuKHJlcyA9PiB7XHJcbiAgICAgIGNvbnNvbGUubG9nKHJlcyk7XHJcbiAgICAgIC8vIGlmIChyZXMub2sgPT09IHRydWUgJiYgcmVzLnN0YXR1cyA9PT0gMjAwKSB7XHJcbiAgICAgIC8vICAgY29uc29sZS5sb2coJ1NlbmQgc3VjY2Vzc2Z1bC4nKTtcclxuICAgICAgLy8gfVxyXG4gICAgfSwgZXJyID0+IHtcclxuICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gcmVxdWVzdDtcclxuICB9XHJcblxyXG5cclxuICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuICAvKioqKioqKioqKioqKioqKiogQVBQTElDQVRJT04gU1BFQ0lGSUMgRlVOQ1RJT05TICoqKioqKioqKioqKioqKioqKi9cclxuICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbiAgLyoqXHJcbiAgICogQ3JlYXRlcyBhIG5ldyBwcm9qZWN0IGZvbGRlciBhbmQgYSBzdWJ0cnVjdHVyZSB3aXRoIGFsbCB0aGUgY29udGVudHMgb2YgdGhlIHByb2plY3Qgb24gdGhlIGZpbGUuXHJcbiAgICogQHBhcmFtIHtGaWxlfSBmaWxlIFRoZSBWaXN1YWxBUlEgRHJhd2luZ3MgZmlsZSBjcmVhdGVkIGJ5IHRoZSBleHBvcnRlci5cclxuICAgKiBAcGFyYW0ge09iamVjdH0gQXBwRGF0YSBUaGUgQXBwRGF0YSBvYmplY3QgdGhhdCBjb250YWlucyBpbmZvIGFib3V0IHRoZSBhcHAgcmVzb3VyY2VzLlxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBsYXN0VXBsb2FkZWRQcm9qZWN0IE9iamVjdCB3aXRoIHRoZSBjb250ZW50cyBvZiB0aGUgbGFzdCB1cGxvYWRlZCBwcm9qZWN0LlxyXG4gICAqL1xyXG4gIHN0YXRpYyBhc3luYyBjcmVhdGVQcm9qZWN0KGZpbGUsIEFwcERhdGEsIGxhc3RVcGxvYWRlZFByb2plY3QpIHtcclxuICAgIC8vIEVycm9yIG1lc3NhZ2Ugd2lsbCBiZSBzdG9yZWQgaGVyZSBpZiBuZWVkZWQuXHJcbiAgICBsZXQgZXJyb3JNc2c7XHJcblxyXG4gICAgY29uc3QgZmlsZUNvbnRlbnRSYXcgPSBhd2FpdCBHZW5lcmljcy5yZWFkSW5wdXRGaWxlKGZpbGUpO1xyXG4gICAgY29uc3QgZmlsZUNvbnRlbnQgPSBKU09OLnBhcnNlKGZpbGVDb250ZW50UmF3KTtcclxuICAgIGNvbnNvbGUubG9nKCdGaWxlIGNvbnRlbnRzOicsIGZpbGVDb250ZW50KTtcclxuICAgIC8vIFRPRE86IENoZWNrIGlmIHRoZSBmaWxlIGlzIHZhbGlkLi4uIG1pbmltdW0gcmVxdWlyZWQgZmllbGRzPyBjb250ZW50cz8uLi5cclxuXHJcbiAgICAvLyBUaGUgY29udGVudHMgb2YgdGhlIGZpbGUgaWYgdmFsaWQgd2lsbCBiZSBzYXZlZCBpbiB0aGUgbGFzdFVwbG9hZGVkUHJvamVjdCB2YXJpYWJsZSB0byBiZSB1c2VkXHJcbiAgICAvLyB3aXRob3V0IHRoZSBuZWVkIHRvIGZldGNoIHRoZW0uIFRoaXMgYWxsb3dzIHRvIHZpZXcgdGhlIHByb2plY3QgZXZlbiB3aXRob3V0IGludGVybmV0IGNvbm5leGlvbi5cclxuICAgIGxhc3RVcGxvYWRlZFByb2plY3QubmFtZSA9IGZpbGVDb250ZW50LnByb2plY3RJbmZvLnRpdGxlO1xyXG5cclxuICAgIC8vIENoZWNrIGlmIHRoZSBpZCBvZiB0aGUgYXBwTWFpbkZvbGRlciBpcyBpbiB0aGUgYXBwRGF0YSBnbG9iYWwgb2JqZWN0LlxyXG4gICAgLy8gSWYgdGhlcmUgaXMgbm9uZSB0aGVuIHRyeSB0byBnZXQgaXQsIGFuZCBpZiB0aGVyZSBpcyBub25lIG9uZSBzaG91bGQgYmUgY3JlYXRlZC5cclxuICAgIGlmICghQXBwRGF0YS5hcHBNYWluRm9sZGVySWQpIHtcclxuICAgICAgY29uc3QgYXBwTWFpbkZvbGRlclJlcyA9IGF3YWl0IHRoaXMubGlzdEZpbGVzKHsgbmFtZTogJ1ZBdmlld2VyRGF0YScsIG9ubHlGb2xkZXI6IHRydWUsIHRyYXNoZWQ6IGZhbHNlIH0pO1xyXG4gICAgICBjb25zdCBhcHBNYWluRm9sZGVyRGF0YSA9IGFwcE1haW5Gb2xkZXJSZXMucmVzdWx0LmZpbGVzO1xyXG4gICAgICBpZiAoYXBwTWFpbkZvbGRlckRhdGEgJiYgYXBwTWFpbkZvbGRlckRhdGEubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIEFwcERhdGEuYXBwTWFpbkZvbGRlcklkID0gYXBwTWFpbkZvbGRlckRhdGFbMF0uaWQ7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy8gVE9ETzogVGhpcyBzaG91bGQgcmV0dXJuIGEgcHJvbWlzZSB0byBrbm93IGlmIHNvbWV0aGluZyB3ZW50IHdyb25nLlxyXG4gICAgICAgIGNvbnN0IGFwcE1haW5Gb2xkZXJSZXMgPSBhd2FpdCB0aGlzLmNyZWF0ZUZvbGRlcignVkF2aWV3ZXJEYXRhJyk7XHJcbiAgICAgICAgQXBwRGF0YS5hcHBNYWluRm9sZGVySWQgPSBKU09OLnBhcnNlKGFwcE1haW5Gb2xkZXJSZXMuYm9keSkuaWQ7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ05vIGFwcEZvbGRlciBmb3VuZCwgb25lIGlzIGdvaW5nIHRvIGJlIGNyZWF0ZWQuJyk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBsZXQgcHJvamVjdEZvbGRlcklkO1xyXG5cclxuICAgIC8vIENoZWNrIGlmIHRoZXJlIGlzIGFscmVhZHkgYSBwcm9qZWN0IHdpdGggdGhpcyBuYW1lIGluIHRoZSBhcHBEYXRhIG9iamVjdC5cclxuICAgIGlmIChBcHBEYXRhLnByb2plY3RzRGF0YSA9PT0gdW5kZWZpbmVkIHx8ICFBcHBEYXRhLnByb2plY3RzRGF0YS5maW5kKHByb2ogPT4gcHJvai5uYW1lID09PSBmaWxlQ29udGVudC5wcm9qZWN0SW5mby50aXRsZSkpIHtcclxuICAgICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBmb2xkZXJDcmVhdGlvblByb21pc2UgPSBhd2FpdCB0aGlzLmNyZWF0ZUZvbGRlcihmaWxlQ29udGVudC5wcm9qZWN0SW5mby50aXRsZSwgQXBwRGF0YS5hcHBNYWluRm9sZGVySWQpO1xyXG4gICAgICAgIHByb2plY3RGb2xkZXJJZCA9IEpTT04ucGFyc2UoZm9sZGVyQ3JlYXRpb25Qcm9taXNlLmJvZHkpLmlkO1xyXG4gICAgICAgIGxhc3RVcGxvYWRlZFByb2plY3QuaWQgPSBwcm9qZWN0Rm9sZGVySWQ7XHJcbiAgICAgICAgY29uc3QgcHJvamVjdEZvbGRlckRhdGEgPSB7IGlkOiBwcm9qZWN0Rm9sZGVySWQsIG5hbWU6IGZpbGVDb250ZW50LnByb2plY3RJbmZvLnRpdGxlIH07XHJcbiAgICAgICAgaWYgKEFwcERhdGEucHJvamVjdHNEYXRhID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgIEFwcERhdGEucHJvamVjdHNEYXRhID0gW3Byb2plY3RGb2xkZXJEYXRhXTtcclxuICAgICAgICB9IGVsc2UgaWYgKCFBcHBEYXRhLnByb2plY3RzRGF0YS5maW5kKHByb2ogPT4gcHJvai5uYW1lID09PSBmaWxlQ29udGVudC5wcm9qZWN0SW5mby50aXRsZSkpIHtcclxuICAgICAgICAgIEFwcERhdGEucHJvamVjdHNEYXRhLnB1c2gocHJvamVjdEZvbGRlckRhdGEpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgICAgICBsYXN0VXBsb2FkZWRQcm9qZWN0LmlkID0gJ3RlbXBvcmFsJztcclxuICAgICAgICBlcnJvck1zZyA9IEpTT04ucGFyc2UoZXJyLmJvZHkpLmVycm9yLm1lc3NhZ2U7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSBpZiAoQXBwRGF0YS5wcm9qZWN0c0RhdGEuZmluZChwcm9qID0+IHByb2oubmFtZSA9PT0gZmlsZUNvbnRlbnQucHJvamVjdEluZm8udGl0bGUpKSB7XHJcbiAgICAgIC8vIFRPRE86IEluIGNhc2Ugbm90IGFsbCBwcm9qZWN0cyBhcmUgbG9hZGVkIGhvdyB0byBjaGVjayBpZiB0aGVyZSBpcyBhbHJlYWR5IG9uZSB3aXRoIHRoaXMgbmFtZSBpbiB0aGUgYmFja2VuZD9cclxuICAgICAgLy8gVE9ETzogSWYgdGhlcmUgaXMgb25lIGFscmVhZHksIHByb3ZpZGUgYW4gb3B0aW9uIHRvIHByb3Bvc2UgYW5vdGhlciBuYW1lLlxyXG4gICAgICBlcnJvck1zZyA9ICdObyBwcm9qZWN0IHdhcyBjcmVhdGVkIGJlY2F1c2UgdGhlcmUgaXMgYWxyZWFkeSBhIHByb2plY3Qgd2l0aCB0aGlzIG5hbWUuJztcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1Vua25vd24gZXJyb3Igd2hpbGUgYXR0ZW1wdGluZyB0byBjcmVhdGUgdGhlIHByb2plY3QgZm9sZGVyLicpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIENyZWF0ZSB0aGUgZHJhd2luZ3Mgc3ViZm9sZGVyIG9ubHkgaWYgdGhlcmUgYXJlIGRyYXdpbmdzIGFuZCBpZiB0aGUgcHJvamVjdCBmb2xkZXIgd2FzIGNyZWF0ZWQgc3VjY2VzZnVsbHkuXHJcbiAgICBpZiAocHJvamVjdEZvbGRlcklkICYmIGZpbGVDb250ZW50LmRyYXdpbmdzKSB7XHJcbiAgICAgIGNvbnN0IGRyYXdpbmdzRm9sZGVyUHJvbWlzZSA9IGF3YWl0IHRoaXMuY3JlYXRlRm9sZGVyKCdkcmF3aW5ncycsIHByb2plY3RGb2xkZXJJZCk7XHJcbiAgICAgIGNvbnN0IGRyYXdpbmdzRm9sZGVySWQgPSBKU09OLnBhcnNlKGRyYXdpbmdzRm9sZGVyUHJvbWlzZS5ib2R5KS5pZDtcclxuICAgICAgQXBwRGF0YS5wcm9qZWN0c0RhdGFbQXBwRGF0YS5wcm9qZWN0c0RhdGEubGVuZ3RoIC0gMV0uZHJhd2luZ3NGb2xkZXJJZCA9IGRyYXdpbmdzRm9sZGVySWQ7XHJcbiAgICAgIC8vIFRvIHN0b3JlIGFsbCB0aGUgdXBsb2FkIGRyYXdpbmdzIHByb21pc2VzLlxyXG4gICAgICBjb25zdCBkcmF3aW5nc1Byb21pc2VzID0gW107XHJcbiAgICAgIC8vIFZhcmlhYmxlIGZvciB0aGUgbGFzdCB1cGxvYWRlZCBkYXRhLlxyXG4gICAgICBsYXN0VXBsb2FkZWRQcm9qZWN0LmRyYXdpbmdzID0gW107XHJcbiAgICAgIGZvciAoY29uc3QgZHJhd2luZyBpbiBmaWxlQ29udGVudC5kcmF3aW5ncykge1xyXG4gICAgICAgIGNvbnN0IGRyYXdpbmdQcm9taXNlID0gdGhpcy51cGxvYWRGaWxlKGZpbGVDb250ZW50LmRyYXdpbmdzW2RyYXdpbmddLCAnaW1hZ2Uvc3ZnK3htbCcsIGRyYXdpbmcuY29uY2F0KCcuc3ZnJyksIGRyYXdpbmdzRm9sZGVySWQpO1xyXG4gICAgICAgIGRyYXdpbmdzUHJvbWlzZXMucHVzaChkcmF3aW5nUHJvbWlzZSk7XHJcbiAgICAgICAgLy8gU3RvcmUgb24gbGFzdFVwbG9hZGVkUHJvamVjdCB2YXJpYWJsZS5cclxuICAgICAgICBjb25zdCBkcmF3aW5nT2JqID0gbmV3IERyYXdpbmcoZHJhd2luZywgdW5kZWZpbmVkKTtcclxuICAgICAgICBkcmF3aW5nT2JqLnNldENvbnRlbnQoZmlsZUNvbnRlbnQuZHJhd2luZ3NbZHJhd2luZ10pO1xyXG4gICAgICAgIGxhc3RVcGxvYWRlZFByb2plY3QuZHJhd2luZ3MucHVzaChkcmF3aW5nT2JqKTtcclxuICAgICAgfVxyXG4gICAgICAvLyBSZXF1aXJlZCB0byBkZWNvZGUgdGhlIGJvZHkgb2YgdGhlIHJlc3BvbnNlLlxyXG4gICAgICBjb25zdCBkZWNvZGVyID0gbmV3IFRleHREZWNvZGVyKCd1dGYtOCcpO1xyXG4gICAgICBhd2FpdCBQcm9taXNlLmFsbChkcmF3aW5nc1Byb21pc2VzKS50aGVuKHJlc3BvbnNlcyA9PiB7XHJcbiAgICAgICAgcmVzcG9uc2VzLmZvckVhY2goKHJlcywgaSkgPT4ge1xyXG4gICAgICAgICAgaWYgKHJlcy5vayA9PT0gdHJ1ZSAmJiByZXMuc3RhdHVzID09PSAyMDApIHtcclxuICAgICAgICAgICAgcmVzLmJvZHkuZ2V0UmVhZGVyKCkucmVhZCgpLnRoZW4oKHsgdmFsdWUsIGRvbmUgfSkgPT4ge1xyXG4gICAgICAgICAgICAgIGNvbnN0IGlkID0gSlNPTi5wYXJzZShkZWNvZGVyLmRlY29kZSh2YWx1ZSkpLmlkO1xyXG4gICAgICAgICAgICAgIC8vIFNldCB0aGUgaWQgb2YgdGhlIGRyYXdpbmcgZmlsZSB0aGF0IGhhcyBiZWVuIGNyZWF0ZWQuXHJcbiAgICAgICAgICAgICAgbGFzdFVwbG9hZGVkUHJvamVjdC5kcmF3aW5nc1tpXS5pZCA9IGlkO1xyXG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdEcmF3aW5nIHdpdGggaWQgJyArIGlkICsgJyB1cGxvYWRlZCBzdWNjZXNzZnVsbHkuJyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9LCBlcnIgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQ3JlYXRlIHRoZSBlbGVtZW50c0RhdGEgc3ViZm9sZGVyIG9ubHkgaWYgdGhlcmUgaXMgZGF0YSBhbmQgaWYgdGhlIHByb2plY3QgZm9sZGVyIHdhcyBjcmVhdGVkIHN1Y2Nlc2Z1bGx5LlxyXG4gICAgaWYgKHByb2plY3RGb2xkZXJJZCAmJiBmaWxlQ29udGVudC5lbGVtZW50c0RhdGEpIHtcclxuICAgICAgY29uc3QgZWxlbWVudHNEYXRhRm9sZGVyUHJvbWlzZSA9IGF3YWl0IHRoaXMuY3JlYXRlRm9sZGVyKCdlbGVtZW50c0RhdGEnLCBwcm9qZWN0Rm9sZGVySWQpO1xyXG4gICAgICBjb25zdCBlbGVtZW50c0RhdGFGb2xkZXJJZCA9IEpTT04ucGFyc2UoZWxlbWVudHNEYXRhRm9sZGVyUHJvbWlzZS5ib2R5KS5pZDtcclxuICAgICAgQXBwRGF0YS5wcm9qZWN0c0RhdGFbQXBwRGF0YS5wcm9qZWN0c0RhdGEubGVuZ3RoIC0gMV0uZWxlbWVudHNEYXRhRm9sZGVySWQgPSBlbGVtZW50c0RhdGFGb2xkZXJJZDtcclxuICAgICAgLy8gU3RvcmUgb24gdGhlIGxhc3QgdXBsb2FkZWQgdmFyaWFibGUuXHJcbiAgICAgIGxhc3RVcGxvYWRlZFByb2plY3QuZWxlbWVudHNEYXRhID0gZmlsZUNvbnRlbnQuZWxlbWVudHNEYXRhO1xyXG4gICAgICAvLyBVcGxvYWQgdGhlIGVsZW1lbnRzIGRhdGEgZmlsZXMuXHJcbiAgICAgIGNvbnN0IGVsZW1lbnRzRGF0YVByb21pc2VzID0gW107XHJcbiAgICAgIGZvciAoY29uc3QgZWxlbWVudERhdGEgaW4gZmlsZUNvbnRlbnQuZWxlbWVudHNEYXRhKSB7XHJcbiAgICAgICAgY29uc3QgZWxlbWVudERhdGFQcm9taXNlID0gdGhpcy51cGxvYWRGaWxlKEpTT04uc3RyaW5naWZ5KGZpbGVDb250ZW50LmVsZW1lbnRzRGF0YVtlbGVtZW50RGF0YV0pLCAnYXBwbGljYXRpb24vanNvbicsIGVsZW1lbnREYXRhLmNvbmNhdCgnLmpzb24nKSwgZWxlbWVudHNEYXRhRm9sZGVySWQpO1xyXG4gICAgICAgIGVsZW1lbnRzRGF0YVByb21pc2VzLnB1c2goZWxlbWVudERhdGFQcm9taXNlKTtcclxuICAgICAgfVxyXG4gICAgICBhd2FpdCBQcm9taXNlLmFsbChlbGVtZW50c0RhdGFQcm9taXNlcylcclxuICAgICAgICAudGhlbihyZXMgPT4ge1xyXG4gICAgICAgICAgLy8gVE9ETzogSXMgaXQgbmVjZXNzYXJ5IHRvIGNoZWNrIGlmIGVhY2ggcmVzcG9uc2Ugd2FzIChyZXMub2sgPT09IHRydWUgJiYgcmVzLnN0YXR1cyA9PT0gMjAwKT9cclxuICAgICAgICAgIGNvbnNvbGUubG9nKCdFbGVtZW50c0RhdGEgZmlsZXMgdXBsb2FkZWQgc3VjY2Vzc2Z1bGx5LicpO1xyXG4gICAgICAgIH0sIGVyciA9PiB7XHJcbiAgICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gVE9ETzogQ2hlY2sgaW4gbW9yZSBkZXRhaWwgaWYgdGhlIHByb2plY3Qgd2FzIGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5LlxyXG4gICAgaWYgKHByb2plY3RGb2xkZXJJZCkge1xyXG4gICAgICBjb25zb2xlLmxvZygnVXBsb2FkIHN1Y2Nlc3NmdWwuIFVwbG9hZGVkICcgKyBPYmplY3Qua2V5cyhmaWxlQ29udGVudC5kcmF3aW5ncykubGVuZ3RoICsgJyBkcmF3aW5ncy4nKTtcclxuICAgICAgcmV0dXJuIHsgaWQ6IHByb2plY3RGb2xkZXJJZCwgbmFtZTogZmlsZUNvbnRlbnQucHJvamVjdEluZm8udGl0bGUgfTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIC8vIFRPRE86IElmIHRoZSBwcm9qZWN0IHVwbG9hZCBmYWlscyB0aGUgcHJvamVjdCBmb2xkZXIsIGlmIGNyZWF0ZWQsIHNob3VsZCBiZSBkZWxldGVkLlxyXG4gICAgICAvLyBUT0RPOiBDcmVhdGUgbWVzc2FnZSB3aXRoIGNvbnRlbnQ6IFJldHJ5IGFnYWluIG9yIHdvcmsgb2ZmbGluZSB3aXRoIHRoZSB1cGxvYWRlZCBwcm9qZWN0LlxyXG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCdQcm9qZWN0IHVwbG9hZCBmYWlsZWQuICcgKyBlcnJvck1zZykpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIExpc3RzIHRoZSBwcm9qZWN0IGl0ZW1zLlxyXG4gICAqIFRPRE86IExpbWl0IHRoZSBhbW91bnQgb2YgcHJvamVjdHMgdG8gZmV0Y2guXHJcbiAgICogQHBhcmFtIHtPYmplY3R9IEFwcERhdGEgVGhlIEFwcERhdGEgb2JqZWN0IHRoYXQgY29udGFpbnMgaW5mbyBhYm91dCB0aGUgYXBwIHJlc291cmNlcy5cclxuICAgKi9cclxuICBzdGF0aWMgYXN5bmMgbGlzdFByb2plY3RJdGVtcyhBcHBEYXRhKSB7XHJcbiAgICAvLyBHZXRzIHRoZSBpZCBvZiB0aGUgYXBwIGZvbGRlciB1c2luZyBpdHMgbmFtZSBpZiBpdCB3YXMgbm90IGFscmVhZHkgaW4gdGhlIGFwcERhdGEgb2JqZWN0LlxyXG4gICAgaWYgKCFBcHBEYXRhLmFwcE1haW5Gb2xkZXJJZCkge1xyXG4gICAgICBjb25zdCBhcHBNYWluRm9sZGVyUmVzID0gYXdhaXQgdGhpcy5saXN0RmlsZXMoeyBuYW1lOiAnVkF2aWV3ZXJEYXRhJywgb25seUZvbGRlcjogdHJ1ZSwgdHJhc2hlZDogZmFsc2UgfSk7XHJcbiAgICAgIGNvbnN0IGFwcE1haW5Gb2xkZXJEYXRhID0gYXBwTWFpbkZvbGRlclJlcy5yZXN1bHQuZmlsZXM7XHJcbiAgICAgIGlmIChhcHBNYWluRm9sZGVyRGF0YSAmJiBhcHBNYWluRm9sZGVyRGF0YS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgQXBwRGF0YS5hcHBNYWluRm9sZGVySWQgPSBhcHBNYWluRm9sZGVyRGF0YVswXS5pZDtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnTm8gYXBwRm9sZGVyIGZvdW5kLicpO1xyXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoJ05vIGFwcEZvbGRlciBmb3VuZC4nKSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBHZXRzIHRoZSBwcm9qZWN0IGZvbGRlcnMgbmFtZXMgYW5kIGlkcy5cclxuICAgIGNvbnN0IHByb2plY3RzRm9sZGVyc1JlcyA9IGF3YWl0IHRoaXMubGlzdEZpbGVzKHsgcGFyZW50SWQ6IEFwcERhdGEuYXBwTWFpbkZvbGRlcklkLCBvbmx5Rm9sZGVyOiB0cnVlLCBleGNsdWRlTmFtZTogJ2FwcFNldHRpbmdzJywgdHJhc2hlZDogZmFsc2UgfSwgJ3NoYXJlZCwgcGVybWlzc2lvbnMnKTtcclxuICAgIGxldCBuZXdQcm9qZWN0cztcclxuICAgIGNvbnN0IHByb2plY3RzRm9sZGVyc0RhdGEgPSBwcm9qZWN0c0ZvbGRlcnNSZXMucmVzdWx0LmZpbGVzO1xyXG4gICAgaWYgKHByb2plY3RzRm9sZGVyc0RhdGEgJiYgcHJvamVjdHNGb2xkZXJzRGF0YS5sZW5ndGggPiAwKSB7XHJcbiAgICAgIGlmIChBcHBEYXRhLnByb2plY3RzRGF0YSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgbmV3UHJvamVjdHMgPSBwcm9qZWN0c0ZvbGRlcnNEYXRhO1xyXG4gICAgICAgIEFwcERhdGEucHJvamVjdHNEYXRhID0gbmV3UHJvamVjdHM7XHJcbiAgICAgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShBcHBEYXRhLnByb2plY3RzRGF0YSkpIHtcclxuICAgICAgICBuZXdQcm9qZWN0cyA9IHByb2plY3RzRm9sZGVyc1Jlcy5yZXN1bHQuZmlsZXMuZmlsdGVyKG5ld1Byb2ogPT4gQXBwRGF0YS5wcm9qZWN0c0RhdGEuZmluZChwcm9qID0+IHByb2ouaWQgPT09IG5ld1Byb2ouaWQpID09PSB1bmRlZmluZWQpO1xyXG4gICAgICAgIG5ld1Byb2plY3RzLmZvckVhY2gocHJvaiA9PiB7XHJcbiAgICAgICAgICBBcHBEYXRhLnByb2plY3RzRGF0YS5wdXNoKHByb2opO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBjb25zb2xlLmFzc2VydChBcHBEYXRhLnByb2plY3RzRGF0YS5sZW5ndGggPiAwLCAnVGhlcmUgYXJlIG5vIHByb2plY3QgZm9sZGVycy4nKTtcclxuXHJcbiAgICAvLyBHZXRzIHRoZSBpZCBvZiB0aGUgYXBwU2V0dGluZ3MgZm9sZGVyLlxyXG4gICAgY29uc3QgYXBwU2V0dEZvbGRlclJlcyA9IGF3YWl0IHRoaXMubGlzdEZpbGVzKHsgcGFyZW50SWQ6IEFwcERhdGEuYXBwTWFpbkZvbGRlcklkLCBuYW1lOiAnYXBwU2V0dGluZ3MnLCBvbmx5Rm9sZGVyOiB0cnVlIH0pO1xyXG4gICAgY29uc3QgYXBwU2V0dEZvbGRlckRhdGEgPSBhcHBTZXR0Rm9sZGVyUmVzLnJlc3VsdC5maWxlcztcclxuICAgIGlmIChhcHBTZXR0Rm9sZGVyRGF0YSAmJiBhcHBTZXR0Rm9sZGVyRGF0YS5sZW5ndGggPiAwKSB7XHJcbiAgICAgIEFwcERhdGEuYXBwU2V0dGluZ3NGb2xkZXJJZCA9IGFwcFNldHRGb2xkZXJEYXRhWzBdLmlkO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29uc29sZS5sb2coJ05vIHNldHRpbmdzIGZvbGRlciBmb3VuZC4nKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBHZXRzIHRoZSBpZCBvZiB0aGUgcHJvamVjdHNUaHVtYnMgZm9sZGVyLlxyXG4gICAgY29uc3QgdGh1bWJzRm9sZGVyUmVzID0gYXdhaXQgdGhpcy5saXN0RmlsZXMoeyBwYXJlbnRJZDogQXBwRGF0YS5hcHBTZXR0aW5nc0ZvbGRlcklkLCBuYW1lOiAncHJvamVjdHNUaHVtYnMnLCBvbmx5Rm9sZGVyOiB0cnVlIH0pO1xyXG4gICAgY29uc3QgdGh1bWJzRm9sZGVyRGF0YSA9IHRodW1ic0ZvbGRlclJlcy5yZXN1bHQuZmlsZXM7XHJcbiAgICBpZiAodGh1bWJzRm9sZGVyRGF0YSAmJiB0aHVtYnNGb2xkZXJEYXRhLmxlbmd0aCA+IDApIHtcclxuICAgICAgQXBwRGF0YS50aHVtYnNGb2xkZXJJZCA9IHRodW1ic0ZvbGRlckRhdGFbMF0uaWQ7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25zb2xlLmxvZygnTm8gdGh1bWJzIGZvbGRlciBmb3VuZC4nKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBHZXRzIHRoZSBkYXRhIG9mIGVhY2ggdGh1bWJuYWlsIGFuZCBhc3NpZ24gaXQgdG8gaXRzIGNvcnJlc3BvbmRpbmcgcHJvamVjdC5cclxuICAgIGNvbnN0IGltZ1JlcyA9IGF3YWl0IHRoaXMubGlzdEZpbGVzKHsgcGFyZW50SWQ6IEFwcERhdGEudGh1bWJzRm9sZGVySWQgfSk7XHJcbiAgICBjb25zdCBpbWdEYXRhID0gaW1nUmVzLnJlc3VsdC5maWxlcztcclxuICAgIEFwcERhdGEucHJvamVjdHNEYXRhLmZvckVhY2gocHJvaiA9PiB7XHJcbiAgICAgIGNvbnN0IHByb2plY3RUaHVtYkRhdGEgPSBpbWdEYXRhLmZpbmQoaW1nID0+IHByb2ouaWQgPT09IGltZy5uYW1lLnJlcGxhY2UoJy5qcGcnLCAnJykpO1xyXG4gICAgICBpZiAocHJvamVjdFRodW1iRGF0YSkge1xyXG4gICAgICAgIHByb2oudGh1bWJJZCA9IHByb2plY3RUaHVtYkRhdGEuaWQ7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgY29uc29sZS5hc3NlcnQoaW1nRGF0YS5sZW5ndGggPiAwLCAnVGhlcmUgYXJlIG5vIHRodW1ibmFpbHMuJyk7XHJcblxyXG4gICAgLy8gVE9ETzogTWlzc2luZyB0aGUgbWFuYWdlbWVudCBvZiBhbiBlcnJvciB3aGlsZSBsaXN0aW5nIHRoZSBwcm9qZWN0cy5cclxuXHJcbiAgICAvLyBJZiBhbGwgdGhlIHJlcXVpcmVkIGRhdGEgYWJvdXQgdGhlIHByb2plY3RzIHdhcyBmZXRjaGVkIHN1Y2Nlc3NmdWxseSBpdCBpcyByZXR1cm5lZC5cclxuICAgIHJldHVybiBuZXdQcm9qZWN0cztcclxuICB9XHJcblxyXG5cclxuICAvKipcclxuICAgKiBGZXRjaGVzIHRoZSBwcm9qZWN0IGNvbnRlbnRzLiBTcGVjaWZpY2FsbHkgdGhlIGlkIGFuZCB0aGUgbmFtZSBvZiBhbGwgdGhlIGRyYXdpbmdzIGFuZCBlbGVtZW50c0RhdGEgZmlsZXMuXHJcbiAgICogSXQgb25seSBmZXRjaGVzIHRoZSByZXNvdXJjZXMgdGhhdCBhcmUgbm90IGFscmVhZHkgaW4gdGhlIGFwcERhdGEgb2JqZWN0LlxyXG4gICAqIFRPRE86IEltcHJvdmUgdGhlIGRldGVjdGlvbiBvZiByZXNvdXJjZXMgdGhhdCBzaG91bGQgYmUgZmV0Y2hlZC4gQ3VycmVudGx5IGlmIHRoZXJlIGlzIGFscmVhZHkgYW55IHByb2plY3RcclxuICAgKiBkYXRhIGZvciB0aGF0IGNhdGVnb3J5IChlLmc6IGRyYXdpbmdzKSBpbiB0aGUgZnJvbnQgaXQgZG9lbnN0IGZldGNoIGFueSBuZXcgZmlsZSBvZiB0aGF0IGNhdGVnb3J5LlxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBwcm9qZWN0SWQgVGhlIGlkIG9mIHRoZSBwcm9qZWN0LlxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBBcHBEYXRhIFRoZSBBcHBEYXRhIG9iamVjdCB0aGF0IGNvbnRhaW5zIGluZm8gYWJvdXQgdGhlIGFwcCByZXNvdXJjZXMuXHJcbiAgICovXHJcbiAgc3RhdGljIGFzeW5jIGZldGNoUHJvamVjdChwcm9qZWN0SWQsIEFwcERhdGEpIHtcclxuICAgIGNvbnNvbGUubG9nKCdGZXRjaGluZyBwcm9qZWN0OiAnICsgcHJvamVjdElkKTtcclxuXHJcbiAgICBsZXQgcHJvamVjdEluZGV4O1xyXG4gICAgLy8gSW4gY2FzZSB0aGUgcHJvamVjdHNEYXRhIGVudHJ5IGlzIHN0aWxsIHVuZGVmaW5lZCB0aGlzIHdpbGwgYmUgdGhlIGZpcnN0IHByb2plY3QgdG8gYmUgZmV0Y2hlZC5cclxuICAgIC8vIFRoaXMgd2lsbCBoYXBwZW4gd2hlbiBzb21lb25lIGFjY2VzcyBhIHByb2plY3QgZGlyZWN0bHkgd2l0aCBpdHMgaWQgaW4gdGhlIHVybC5cclxuICAgIGlmIChBcHBEYXRhLnByb2plY3RzRGF0YSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgIGNvbnN0IHByb2plY3ROYW1lUmVzID0gYXdhaXQgdGhpcy5nZXRGaWxlRGF0YShwcm9qZWN0SWQsICduYW1lLCB0cmFzaGVkJyk7XHJcbiAgICAgIGlmICghSlNPTi5wYXJzZShwcm9qZWN0TmFtZVJlcy5ib2R5KS50cmFzaGVkKSB7XHJcbiAgICAgICAgQXBwRGF0YS5wcm9qZWN0c0RhdGEgPSBbeyBpZDogcHJvamVjdElkLCBuYW1lOiBKU09OLnBhcnNlKHByb2plY3ROYW1lUmVzLmJvZHkpLm5hbWUgfV07XHJcbiAgICAgICAgcHJvamVjdEluZGV4ID0gMDtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIGlmIChwcm9qZWN0SWQgIT09ICd0ZW1wb3JhbCcpIHtcclxuICAgICAgcHJvamVjdEluZGV4ID0gQXBwRGF0YS5wcm9qZWN0c0RhdGEuZmluZEluZGV4KHByb2ogPT4gcHJvai5pZCA9PT0gcHJvamVjdElkKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBHZXRzIHRoZSBwcm9qZWN0IHRlYW0gbWVtYmVycyBkYXRhIGFuZCBhZGRzIGl0IHRvIHRoZSBjb3JyZXNwb25kaW5nIHByb2plY3REYXRhIG9iamVjdC5cclxuICAgIGlmIChwcm9qZWN0SW5kZXggPj0gMCAmJiAhQXBwRGF0YS5wcm9qZWN0c0RhdGFbcHJvamVjdEluZGV4XS5wZXJtaXNzaW9ucykge1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHByb2pQZXJtaXNzaW9uc1JlcyA9IGF3YWl0IHRoaXMuZ2V0UHJvamVjdFRlYW1EYXRhKHByb2plY3RJZCk7XHJcbiAgICAgICAgY29uc3QgcHJvalBlcm1pc3Npb25zRGF0YSA9IHByb2pQZXJtaXNzaW9uc1Jlcy5yZXN1bHQucGVybWlzc2lvbnM7XHJcbiAgICAgICAgaWYgKHByb2pQZXJtaXNzaW9uc0RhdGEgJiYgcHJvalBlcm1pc3Npb25zRGF0YS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICBBcHBEYXRhLnByb2plY3RzRGF0YVtwcm9qZWN0SW5kZXhdLnBlcm1pc3Npb25zID0gcHJvalBlcm1pc3Npb25zRGF0YTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgY29uc29sZS5sb2coJ05vIHByb2plY3QgdGVhbSBtZW1iZXJzIGZvdW5kLicpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnRXJyb3IgZmV0Y2hpbmcgdGhlIHRlYW0gbWVtYmVycyBkYXRhLicpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gSWYgdGhlcmUgaXMgbm8gZGF0YSBmb3IgcHJvamVjdFNldHRpbmdzLmpzb24gZmlsZSBpbiB0aGUgYXBwRGF0YSB5ZXQgZmV0Y2ggaXQuXHJcbiAgICBpZiAocHJvamVjdEluZGV4ID49IDAgJiYgIUFwcERhdGEucHJvamVjdHNEYXRhW3Byb2plY3RJbmRleF0ucHJvalNldHRpbmdzKSB7XHJcbiAgICAgIGNvbnN0IHByb2pTZXR0aW5nc1JlcyA9IGF3YWl0IHRoaXMubGlzdEZpbGVzKHsgcGFyZW50SWQ6IHByb2plY3RJZCwgbmFtZTogJ3Byb2plY3RTZXR0aW5ncy5qc29uJyB9KTtcclxuICAgICAgY29uc3QgcHJvalNldHRpbmdzRGF0YSA9IHByb2pTZXR0aW5nc1Jlcy5yZXN1bHQuZmlsZXM7XHJcbiAgICAgIGlmIChwcm9qU2V0dGluZ3NEYXRhICYmIHByb2pTZXR0aW5nc0RhdGEubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIGNvbnN0IHByb2pTZXR0aW5nc0NvbnRlbnRSZXMgPSBhd2FpdCB0aGlzLmdldEZpbGVDb250ZW50KHByb2pTZXR0aW5nc0RhdGFbMF0uaWQpO1xyXG4gICAgICAgIEFwcERhdGEucHJvamVjdHNEYXRhW3Byb2plY3RJbmRleF0ucHJvalNldHRpbmdzID0gcHJvalNldHRpbmdzQ29udGVudFJlcy5ib2R5O1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdObyBwcm9qZWN0U2V0dGluZ3MuanNvbiBmb3VuZC4nKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIElmIHRoZXJlIGlzIG5vIGRhdGEgZm9yIGRyYXdpbmdzIGFscmVhZHkgZmV0Y2ggdGhlIGlkIG9mIHRoZSBkcmF3aW5ncyBmb2xkZXIgYW5kIHRoZSBuYW1lIGFuZCBpZCBvZiBlYWNoIG9uZS5cclxuICAgIGlmIChwcm9qZWN0SW5kZXggPj0gMCAmJiAhQXBwRGF0YS5wcm9qZWN0c0RhdGFbcHJvamVjdEluZGV4XS5kcmF3aW5ncykge1xyXG4gICAgICBjb25zdCBkcmF3aW5nc0ZvbGRlclJlcyA9IGF3YWl0IHRoaXMubGlzdEZpbGVzKHsgcGFyZW50SWQ6IHByb2plY3RJZCwgb25seUZvbGRlcjogdHJ1ZSwgbmFtZTogJ2RyYXdpbmdzJyB9KTtcclxuICAgICAgY29uc3QgZHJhd2luZ3NGb2xkZXJEYXRhID0gZHJhd2luZ3NGb2xkZXJSZXMucmVzdWx0LmZpbGVzO1xyXG4gICAgICBpZiAoZHJhd2luZ3NGb2xkZXJEYXRhICYmIGRyYXdpbmdzRm9sZGVyRGF0YS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgY29uc3QgZHJhd2luZ3NSZXMgPSBhd2FpdCB0aGlzLmxpc3RGaWxlcyh7IHBhcmVudElkOiBkcmF3aW5nc0ZvbGRlckRhdGFbMF0uaWQsIHRyYXNoZWQ6IGZhbHNlIH0pO1xyXG4gICAgICAgIEFwcERhdGEucHJvamVjdHNEYXRhW3Byb2plY3RJbmRleF0uZHJhd2luZ3MgPSBbXTtcclxuICAgICAgICBkcmF3aW5nc1Jlcy5yZXN1bHQuZmlsZXMuZm9yRWFjaChkcmF3aW5nID0+IHtcclxuICAgICAgICAgIGlmIChkcmF3aW5nLm5hbWUgPT09ICdkcmF3aW5nc1N0eWxlcy5jc3MnKSB7XHJcbiAgICAgICAgICAgIEFwcERhdGEucHJvamVjdHNEYXRhW3Byb2plY3RJbmRleF0uZHJhd2luZ3NTdHlsZXNJZCA9IGRyYXdpbmcuaWQ7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBBcHBEYXRhLnByb2plY3RzRGF0YVtwcm9qZWN0SW5kZXhdLmRyYXdpbmdzLnB1c2gobmV3IERyYXdpbmcoZHJhd2luZy5uYW1lLnJlcGxhY2UoLy5zdmckLywgJycpLCBkcmF3aW5nLmlkKSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ05vIGRyYXdpbmdzIGZvbGRlciBmb3VuZC4nKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIElmIHRoZXJlIGlzIG5vIGRhdGEgZm9yIGVsZW1lbnRzRGF0YSBhbHJlYWR5IGZldGNoIHRoZSBpZCBvZiB0aGUgZWxlbWVudHNEYXRhIGZvbGRlciBhbmQgdGhlIG5hbWUgYW5kIGlkIG9mIGVhY2ggb25lLlxyXG4gICAgaWYgKHByb2plY3RJbmRleCA+PSAwICYmICFBcHBEYXRhLnByb2plY3RzRGF0YVtwcm9qZWN0SW5kZXhdLmVsZW1lbnRzRGF0YSkge1xyXG4gICAgICBjb25zdCBlbGVtZW50c0RhdGFGb2xkZXJSZXMgPSBhd2FpdCB0aGlzLmxpc3RGaWxlcyh7IHBhcmVudElkOiBwcm9qZWN0SWQsIG9ubHlGb2xkZXI6IHRydWUsIG5hbWU6ICdlbGVtZW50c0RhdGEnIH0pO1xyXG4gICAgICBjb25zdCBlbGVtZW50c0RhdGFGb2xkZXJEYXRhID0gZWxlbWVudHNEYXRhRm9sZGVyUmVzLnJlc3VsdC5maWxlcztcclxuICAgICAgaWYgKGVsZW1lbnRzRGF0YUZvbGRlckRhdGEgJiYgZWxlbWVudHNEYXRhRm9sZGVyRGF0YS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgY29uc3QgZWxlbWVudHNEYXRhUmVzID0gYXdhaXQgdGhpcy5saXN0RmlsZXMoeyBwYXJlbnRJZDogZWxlbWVudHNEYXRhRm9sZGVyRGF0YVswXS5pZCwgdHJhc2hlZDogZmFsc2UgfSk7XHJcbiAgICAgICAgQXBwRGF0YS5wcm9qZWN0c0RhdGFbcHJvamVjdEluZGV4XS5lbGVtZW50c0RhdGEgPSBlbGVtZW50c0RhdGFSZXMucmVzdWx0LmZpbGVzO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdObyBlbGVtZW50c0RhdGEgZm9sZGVyIGZvdW5kLicpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gSWYgdGhlcmUgaXMgbm8gZGF0YSBmb3IgY29tbWVudHMgaW4gdGhlIGFwcERhdGEgeWV0IGZldGNoIGl0LlxyXG4gICAgaWYgKHByb2plY3RJbmRleCA+PSAwICYmICFBcHBEYXRhLnByb2plY3RzRGF0YVtwcm9qZWN0SW5kZXhdLmNvbW1lbnRzKSB7XHJcbiAgICAgIC8vIFRPRE86IENvdWxkIGJlIHRoYXQgdGhlIGlkIG9mIHRoZSBmaWxlIGlzIGFscmVhZHkgaW4gdGhlIHByb2plY3RzRGF0YSBhbmQgbGlzdEZpbGVzIGlzIG5vIG5lY2Vzc2FyeT9cclxuICAgICAgY29uc3QgY29tbWVudHNSZXMgPSBhd2FpdCB0aGlzLmxpc3RGaWxlcyh7IHBhcmVudElkOiBwcm9qZWN0SWQsIG5hbWU6ICdjb21tZW50cy5qc29uJywgdHJhc2hlZDogZmFsc2UgfSk7XHJcbiAgICAgIGNvbnN0IGNvbW1lbnRzRGF0YSA9IGNvbW1lbnRzUmVzLnJlc3VsdC5maWxlcztcclxuICAgICAgaWYgKGNvbW1lbnRzRGF0YSAmJiBjb21tZW50c0RhdGEubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIEFwcERhdGEucHJvamVjdHNEYXRhW3Byb2plY3RJbmRleF0uY29tbWVudHNGaWxlSWQgPSBjb21tZW50c0RhdGFbMF0uaWQ7XHJcbiAgICAgICAgY29uc3QgY29tbWVudHNDb250ZW50UmVzID0gYXdhaXQgdGhpcy5nZXRGaWxlQ29udGVudChjb21tZW50c0RhdGFbMF0uaWQpO1xyXG4gICAgICAgIEFwcERhdGEucHJvamVjdHNEYXRhW3Byb2plY3RJbmRleF0uY29tbWVudHMgPSBKU09OLnBhcnNlKGNvbW1lbnRzQ29udGVudFJlcy5ib2R5KTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnTm8gY29tbWVudHMuanNvbiBmaWxlIGZvdW5kLicpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gSWYgdGhlcmUgaXMgbm8gZGF0YSBmb3IgaW1hZ2VzIGFscmVhZHkgZmV0Y2ggdGhlIGlkIG9mIHRoZSBpbWFnZXMgZm9sZGVyIGFuZCB0aGUgbmFtZSBhbmQgaWQgb2YgZWFjaCBvbmUuXHJcbiAgICBpZiAocHJvamVjdEluZGV4ID49IDAgJiYgIUFwcERhdGEucHJvamVjdHNEYXRhW3Byb2plY3RJbmRleF0uaW1hZ2VzKSB7XHJcbiAgICAgIGNvbnN0IGltYWdlc0ZvbGRlclJlcyA9IGF3YWl0IHRoaXMubGlzdEZpbGVzKHsgcGFyZW50SWQ6IHByb2plY3RJZCwgb25seUZvbGRlcjogdHJ1ZSwgbmFtZTogJ2ltYWdlcycgfSk7XHJcbiAgICAgIGNvbnN0IGltYWdlc0ZvbGRlckRhdGEgPSBpbWFnZXNGb2xkZXJSZXMucmVzdWx0LmZpbGVzO1xyXG4gICAgICBpZiAoaW1hZ2VzRm9sZGVyRGF0YSAmJiBpbWFnZXNGb2xkZXJEYXRhLmxlbmd0aCA+IDApIHtcclxuICAgICAgICBjb25zdCBpbWFnZXNSZXMgPSBhd2FpdCB0aGlzLmxpc3RGaWxlcyh7IHBhcmVudElkOiBpbWFnZXNGb2xkZXJEYXRhWzBdLmlkIH0pO1xyXG4gICAgICAgIEFwcERhdGEucHJvamVjdHNEYXRhW3Byb2plY3RJbmRleF0uaW1hZ2VzID0gaW1hZ2VzUmVzLnJlc3VsdC5maWxlcztcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnTm8gaW1hZ2VzIGZvbGRlciBmb3VuZC4nKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlmIChwcm9qZWN0SW5kZXggPj0gMCkge1xyXG4gICAgICBjb25zb2xlLmxvZygnUHJvamVjdCByZXNvdXJjZXMgZmV0Y2hlZCBzdWNjZXNmdWxseS4nKTtcclxuICAgICAgcmV0dXJuIEFwcERhdGEucHJvamVjdHNEYXRhW3Byb2plY3RJbmRleF07XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCdQcm9qZWN0IHJlc291cmNlcyBjb3VsZCBub3QgYmUgZmV0Y2hlZC4nKSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxufSIsImltcG9ydCBHZW5lcmljcyBmcm9tICcuL2dlbmVyaWNzJztcclxuXHJcbmV4cG9ydCBjbGFzcyBDb21tZW50IHtcclxuICBlbGVtZW50c0lkczogc3RyaW5nW10gPSBbXTtcclxuICBjb250ZW50OiBzdHJpbmc7XHJcbiAgbWVudGlvbnM6IHN0cmluZ1tdO1xyXG4gIGlkOiBzdHJpbmc7XHJcbiAgcmVwcmVzZW50YXRpb25zOiBTVkdFbGVtZW50W10gPSBbXTtcclxuXHJcbiAgY29uc3RydWN0b3IoZWxlbWVudHNJZHM6IHN0cmluZ1tdLCBjb250ZW50OiBzdHJpbmcsIG1lbnRpb25zOiBzdHJpbmdbXSA9IFtdKSB7XHJcbiAgICB0aGlzLmVsZW1lbnRzSWRzLnB1c2goLi4uZWxlbWVudHNJZHMpO1xyXG4gICAgdGhpcy5jb250ZW50ID0gY29udGVudDtcclxuICAgIHRoaXMubWVudGlvbnMgPSBtZW50aW9ucztcclxuICAgIHRoaXMuaWQgPSAnYy0nICsgR2VuZXJpY3MudXVpZHY0KCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBDcmVhdGVzIGFuIHN2ZyByZXByZXNlbnRhdGlvbiBmb3IgdGhlIGNvbW1lbnQgb24gdGhlIHByb3ZpZGVkIGVsZW1lbnQgYW5kXHJcbiAgICogYWRkcyBpdCB0byB0aGUgZ3JvdXAgb2YgY29tbWVudCByZXByZXNlbnRhdGlvbnMgb24gdGhlIHN2ZyBkcmF3aW5nLlxyXG4gICAqIEBwYXJhbSB7U1ZHR0VsZW1lbnR9IGNvbW1lbnRzR3JvdXBcclxuICAgKiBAcGFyYW0ge1NWR0VsZW1lbnR9IGVsZW1lbnQgXHJcbiAgICovXHJcbiAgLy8gY3JlYXRlUmVwcmVzZW50YXRpb24oY29tbWVudHNHcm91cCwgZWxlbWVudCkge1xyXG4gIC8vICAgY29uc3QgcmVwcmVzZW50YXRpb24gPSBHZW5lcmljcy5jcmVhdGVCQm94KGVsZW1lbnQsIDE1LCAxNSk7XHJcbiAgLy8gICAvLyBUT0RPOiB0aGUgc3R5bGUgdmFsdWVzIHdpbGwgY29tZSBmcm9tIHRoZSBhcHAgc2V0dGluZ3MgZmlsZSBpZiBhbnkuXHJcbiAgLy8gICByZXByZXNlbnRhdGlvbi5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgJ2ZpbGw6bm9uZTtzdHJva2U6I2UyMmEyYTtzdHJva2Utd2lkdGg6OHB4O3N0cm9rZS1kYXNoYXJyYXk6MTg7Jyk7XHJcbiAgLy8gICByZXByZXNlbnRhdGlvbi5kYXRhc2V0LmlkID0gdGhpcy5pZDtcclxuICAvLyAgIGNvbW1lbnRzR3JvdXAuYXBwZW5kQ2hpbGQocmVwcmVzZW50YXRpb24pO1xyXG4gIC8vICAgdGhpcy5yZXByZXNlbnRhdGlvbnMucHVzaChyZXByZXNlbnRhdGlvbik7XHJcbiAgLy8gfVxyXG5cclxuICAvKipcclxuICAgKiBSZXBsYWNlcyB0aGUgcHJldmlvdXMgb25lXHJcbiAgICovXHJcbiAgY3JlYXRlUmVwcmVzZW50YXRpb24oY29tbWVudHNHcm91cDogU1ZHR0VsZW1lbnQsIGVsZW1lbnRzOiBTVkdHRWxlbWVudFtdKSB7XHJcbiAgICAvLyBUT0RPIG5ldyBmdW5jdGlvblxyXG4gICAgY29uc3QgcmVjdGFuZ2xlcyA9IFtdO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBlbGVtZW50cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICByZWN0YW5nbGVzLnB1c2goR2VuZXJpY3MuY3JlYXRlQkJveDIoZWxlbWVudHNbaV0sIDE1KSk7XHJcbiAgICB9XHJcbiAgICBjb25zdCBzZWdtZW50cyA9IEdlbmVyaWNzLnJlY3RhbmdsZXNTaWxob3VldHRlKHJlY3RhbmdsZXMpO1xyXG4gICAgY29uc3QgcmVwcmVzZW50YXRpb24gPSBHZW5lcmljcy5zdmdQYXRoRnJvbUxpbmVzKHNlZ21lbnRzKTtcclxuICAgIHJlcHJlc2VudGF0aW9uLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCAnZmlsbDpub25lO3N0cm9rZTojZTIyYTJhO3N0cm9rZS13aWR0aDo4cHg7c3Ryb2tlLWRhc2hhcnJheTozMDtzdHJva2UtbGluZWNhcDpyb3VuZDsnKTtcclxuICAgIHJlcHJlc2VudGF0aW9uLmRhdGFzZXQuaWQgPSB0aGlzLmlkO1xyXG4gICAgY29tbWVudHNHcm91cC5hcHBlbmRDaGlsZChyZXByZXNlbnRhdGlvbik7XHJcbiAgICB0aGlzLnJlcHJlc2VudGF0aW9ucy5wdXNoKHJlcHJlc2VudGF0aW9uKTtcclxuICB9XHJcblxyXG5cclxuXHJcblxyXG59IiwiaW1wb3J0IEdlbmVyaWNzIGZyb20gJy4vZ2VuZXJpY3MnO1xyXG5pbXBvcnQgdHlwZSB7IFdvcmtzcGFjZSB9IGZyb20gJy4vd29ya3NwYWNlJztcclxuaW1wb3J0IHR5cGUgeyBDb21tZW50IH0gZnJvbSAnLi9jb21tZW50JztcclxuXHJcbmV4cG9ydCBjbGFzcyBDb21tZW50Rm9ybSB7XHJcbiAgZm9ybUVsZW1lbnQ6IEhUTUxGb3JtRWxlbWVudDtcclxuICB3b3Jrc3BhY2U6IFdvcmtzcGFjZTtcclxuICBjYW5jZWxDcmVhdGVCdG46IEhUTUxFbGVtZW50O1xyXG4gIGFkZENvbW1lbnRCdG46IEhUTUxFbGVtZW50O1xyXG4gIGRlbGV0ZUJ0bjogSFRNTEVsZW1lbnQ7XHJcbiAgZWRpdEJ0bjogSFRNTEVsZW1lbnQ7XHJcbiAgY2FuY2VsVXBkYXRlQnRuOiBIVE1MRWxlbWVudDtcclxuICBjb25maXJtVXBkYXRlQnRuOiBIVE1MRWxlbWVudDtcclxuICB0ZXh0SW5wdXQ6IEhUTUxUZXh0QXJlYUVsZW1lbnQ7XHJcbiAgbWVudGlvbnNTZWN0aW9uOiBIVE1MRWxlbWVudDtcclxuICBtZW50aW9uc0lucHV0OiBIVE1MU2VsZWN0RWxlbWVudDtcclxuICBidXR0b25zTW9kZXM6IEhUTUxFbGVtZW50O1xyXG4gIGNvbW1lbnRJZDogc3RyaW5nO1xyXG5cclxuICBjb25zdHJ1Y3Rvcihmb3JtRWxlbWVudDogSFRNTEZvcm1FbGVtZW50LCB3b3Jrc3BhY2U6IFdvcmtzcGFjZSkge1xyXG4gICAgdGhpcy5mb3JtRWxlbWVudCA9IGZvcm1FbGVtZW50O1xyXG4gICAgdGhpcy53b3Jrc3BhY2UgPSB3b3Jrc3BhY2U7XHJcbiAgICBmb3JtRWxlbWVudC5vbnN1Ym1pdCA9IGUgPT4geyBlLnByZXZlbnREZWZhdWx0KCkgfVxyXG4gICAgdGhpcy5jYW5jZWxDcmVhdGVCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29tbWVudEZvcm1DYW5jZWwnKTtcclxuICAgIHRoaXMuYWRkQ29tbWVudEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhZGRDb21tZW50QnRuJyk7XHJcbiAgICB0aGlzLmRlbGV0ZUJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb21tZW50Rm9ybURlbGV0ZScpO1xyXG4gICAgdGhpcy5kZWxldGVCdG4ub25jbGljayA9ICgpID0+IHRoaXMuZGVsZXRlQ29tbWVudCh0aGlzLmNvbW1lbnRJZCk7XHJcbiAgICB0aGlzLmVkaXRCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29tbWVudEZvcm1FZGl0Jyk7XHJcbiAgICB0aGlzLmVkaXRCdG4ub25jbGljayA9ICgpID0+IHRoaXMuZW5hYmxlRWRpdENvbW1lbnQodGhpcy5jb21tZW50SWQpO1xyXG4gICAgdGhpcy5jYW5jZWxVcGRhdGVCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGlzY2FyZENoYW5nZXMnKTtcclxuICAgIHRoaXMuY2FuY2VsVXBkYXRlQnRuLm9uY2xpY2sgPSAoKSA9PiB0aGlzLmRpc2NhcmRVcGRhdGUoKTtcclxuICAgIHRoaXMuY29uZmlybVVwZGF0ZUJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb25maXJtQ2hhbmdlcycpO1xyXG4gICAgdGhpcy50ZXh0SW5wdXQgPSBmb3JtRWxlbWVudC5lbGVtZW50cy5uYW1lZEl0ZW0oXCJjb21tZW50XCIpIGFzIEhUTUxUZXh0QXJlYUVsZW1lbnQ7XHJcbiAgICB0aGlzLm1lbnRpb25zU2VjdGlvbiA9IGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tZW1iZXJzJyk7XHJcbiAgICB0aGlzLm1lbnRpb25zSW5wdXQgPSBmb3JtRWxlbWVudC5lbGVtZW50cy5uYW1lZEl0ZW0oXCJtZW1iZXJzXCIpIGFzIEhUTUxTZWxlY3RFbGVtZW50O1xyXG4gICAgdGhpcy5idXR0b25zTW9kZXMgPSBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZm9ybUJ1dHRvbnNNb2RlcycpO1xyXG4gIH1cclxuXHJcbiAgc2hvd01lbnRpb25zU2VjdGlvbigpIHtcclxuICAgIHRoaXMubWVudGlvbnNTZWN0aW9uLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xyXG4gIH1cclxuXHJcbiAgaGlkZU1lbnRpb25zU2VjdGlvbigpIHtcclxuICAgIHRoaXMubWVudGlvbnNTZWN0aW9uLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVE9ETzogaGVyZSBpIGNhbiBjaGFuZ2Ugb3RoZXIgdGhpbmdzIGxpa2UgaW5wdXQgbGFiZWxzP1xyXG4gICAqL1xyXG4gIGJ1dHRvbnNWaXNpYmlsaXR5TW9kZShtb2RlOiAnY3JlYXRlJyB8ICd2aWV3JyB8ICdlZGl0Jykge1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmJ1dHRvbnNNb2Rlcy5jaGlsZHJlbi5sZW5ndGg7IGkrKykge1xyXG4gICAgICBpZiAoKHRoaXMuYnV0dG9uc01vZGVzLmNoaWxkcmVuW2ldIGFzIEhUTUxFbGVtZW50KS5kYXRhc2V0Lm1vZGUgIT09IG1vZGUpIHtcclxuICAgICAgICAodGhpcy5idXR0b25zTW9kZXMuY2hpbGRyZW5baV0gYXMgSFRNTEVsZW1lbnQpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgKHRoaXMuYnV0dG9uc01vZGVzLmNoaWxkcmVuW2ldIGFzIEhUTUxFbGVtZW50KS5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBkZWxldGVDb21tZW50KGNvbW1lbnRJZDogc3RyaW5nKSB7XHJcbiAgICBjb25zdCBpbmRleCA9IHRoaXMud29ya3NwYWNlLmNvbW1lbnRzLmZpbmRJbmRleChjID0+IGMuaWQgPT09IGNvbW1lbnRJZCk7XHJcbiAgICAvLyBEZWxldGUgcmVwcmVzZW50YXRpb25zIGZyb20gdGhlIFNWR3MuXHJcbiAgICB0aGlzLndvcmtzcGFjZS5jb21tZW50c1tpbmRleF0ucmVwcmVzZW50YXRpb25zLmZvckVhY2gociA9PiByLnJlbW92ZSgpKTtcclxuICAgIC8vIFJlbW92ZSBjb21tZW50IG9iamVjdCBmcm9tIHRoZSBhcnJheS5cclxuICAgIHRoaXMud29ya3NwYWNlLmNvbW1lbnRzLnNwbGljZShpbmRleCwgMSk7XHJcbiAgICAvLyBJbmRpY2F0ZSB0aGF0IHRoZXJlIGFyZSBjaGFuZ2VzIHRvIHNhdmUuXHJcbiAgICB0aGlzLndvcmtzcGFjZS51bnNhdmVkQ29tbWVudHNEYXRhKCk7XHJcblxyXG4gICAgLy8gSU1QT1JUQU5UIHRoaXMgbWF5IGJhIHdyb25nIHNob3VsZCBiZSBvdXRzaWRlIG9mIHRoaXMgbWV0aG9kXHJcbiAgICAvLyBJZiBpdCBoYXMgYmVlbiBjYWxsZWQgZnJvbSB0aGUgcGFuZWwgdGhlbiByZW1vdmUgdGhlIENvbW1lbnQgc2VjdGlvbiA/PyBtYXliZSBub3QgaW5zaWRlIHRoaXMgZnVuY3Rpb25cclxuICAgIHRoaXMud29ya3NwYWNlLm1haW5QYW5lbC5yZW1vdmVTZWN0aW9uKCdDb21tZW50Jyk7XHJcbiAgfVxyXG5cclxuICBkaXNhYmxlRm9ybSgpIHtcclxuICAgIHRoaXMudGV4dElucHV0LmRpc2FibGVkID0gdHJ1ZTtcclxuICAgIHRoaXMubWVudGlvbnNJbnB1dC5kaXNhYmxlZCA9IHRydWU7XHJcbiAgfVxyXG5cclxuICBlbmFibGVGb3JtKCkge1xyXG4gICAgdGhpcy50ZXh0SW5wdXQuZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgIHRoaXMubWVudGlvbnNJbnB1dC5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgdmlld0NvbW1lbnQoY29tbWVudElkOiBzdHJpbmcpIHtcclxuICAgIGNvbnN0IGNvbW1lbnQgPSB0aGlzLndvcmtzcGFjZS5jb21tZW50cy5maW5kKGMgPT4gYy5pZCA9PT0gY29tbWVudElkKTtcclxuICAgIGlmIChjb21tZW50KSB7XHJcbiAgICAgIHRoaXMuZmlsbElucHV0cyhjb21tZW50KTtcclxuICAgICAgdGhpcy5jb21tZW50SWQgPSBjb21tZW50LmlkO1xyXG4gICAgICB0aGlzLmRpc2FibGVGb3JtKCk7XHJcbiAgICAgIHRoaXMuYnV0dG9uc1Zpc2liaWxpdHlNb2RlKCd2aWV3Jyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25zb2xlLndhcm4oJ05vIGNvbW1lbnQgZm91bmQgd2l0aCB0aGF0IGlkOicsIGNvbW1lbnRJZCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBlbmFibGVFZGl0Q29tbWVudChjb21tZW50SWQ6IHN0cmluZykge1xyXG4gICAgY29uc3QgY29tbWVudCA9IHRoaXMud29ya3NwYWNlLmNvbW1lbnRzLmZpbmQoYyA9PiBjLmlkID09PSBjb21tZW50SWQpO1xyXG4gICAgaWYgKGNvbW1lbnQpIHtcclxuICAgICAgdGhpcy5maWxsSW5wdXRzKGNvbW1lbnQpO1xyXG4gICAgICB0aGlzLmNvbW1lbnRJZCA9IGNvbW1lbnRJZDtcclxuICAgICAgdGhpcy5lbmFibGVGb3JtKCk7XHJcbiAgICAgIHRoaXMuYnV0dG9uc1Zpc2liaWxpdHlNb2RlKCdlZGl0Jyk7XHJcbiAgICAgIHRoaXMuZm9ybUVsZW1lbnQub25jaGFuZ2UgPSAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5jb25maXJtVXBkYXRlQnRuLmNsYXNzTGlzdC5yZW1vdmUoJ2Rpc2FibGVkJyk7XHJcbiAgICAgICAgdGhpcy5jb25maXJtVXBkYXRlQnRuLm9uY2xpY2sgPSAoKSA9PiB0aGlzLnVwZGF0ZUNvbW1lbnQoY29tbWVudElkLCB0aGlzLnRleHRJbnB1dC52YWx1ZSwgdGhpcy5nZXRTZWxlY3RlZE1lbWJlcnMoKSk7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNvbnNvbGUud2FybignTm8gY29tbWVudCBmb3VuZCB3aXRoIHRoYXQgaWQ6JywgY29tbWVudElkKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHVwZGF0ZUNvbW1lbnQoY29tbWVudElkOiBzdHJpbmcsIHRleHQ6IHN0cmluZywgbWVudGlvbnM6IHN0cmluZ1tdKSB7XHJcbiAgICBjb25zdCBjb21tZW50ID0gdGhpcy53b3Jrc3BhY2UuY29tbWVudHMuZmluZChjID0+IGMuaWQgPT09IGNvbW1lbnRJZCk7XHJcbiAgICBpZiAoY29tbWVudCkge1xyXG4gICAgICBjb21tZW50LmNvbnRlbnQgPSB0ZXh0O1xyXG4gICAgICBjb21tZW50Lm1lbnRpb25zID0gbWVudGlvbnM7XHJcbiAgICAgIHRoaXMud29ya3NwYWNlLnVuc2F2ZWRDb21tZW50c0RhdGEoKTtcclxuICAgICAgdGhpcy5mb3JtRWxlbWVudC5vbmNoYW5nZSA9IG51bGw7XHJcbiAgICAgIHRoaXMuZGlzYWJsZUZvcm0oKTtcclxuICAgICAgdGhpcy5idXR0b25zVmlzaWJpbGl0eU1vZGUoJ3ZpZXcnKTtcclxuICAgICAgdGhpcy5jb25maXJtVXBkYXRlQnRuLmNsYXNzTGlzdC5hZGQoJ2Rpc2FibGVkJyk7XHJcbiAgICAgIHRoaXMuY2FuY2VsVXBkYXRlQnRuLmNsYXNzTGlzdC5hZGQoJ2Rpc2FibGVkJyk7XHJcbiAgICAgIHRoaXMuY29uZmlybVVwZGF0ZUJ0bi5vbmNsaWNrID0gbnVsbDtcclxuICAgICAgdGhpcy5jYW5jZWxVcGRhdGVCdG4ub25jbGljayA9IG51bGw7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25zb2xlLndhcm4oJ05vIGNvbW1lbnQgZm91bmQgd2l0aCB0aGF0IGlkOicsIGNvbW1lbnRJZCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBkaXNjYXJkVXBkYXRlKCkge1xyXG4gICAgY29uc3QgY29tbWVudCA9IHRoaXMud29ya3NwYWNlLmNvbW1lbnRzLmZpbmQoYyA9PiBjLmlkID09PSB0aGlzLmNvbW1lbnRJZCk7XHJcbiAgICBpZiAoY29tbWVudCkge1xyXG4gICAgICB0aGlzLnRleHRJbnB1dC52YWx1ZSA9IGNvbW1lbnQuY29udGVudDtcclxuICAgICAgLy8gVE9ETyB0aGlzLm1lbnRpb25zSW5wdXQgPSAnJyBpZiBzZWxlY3Rpb24gY2hhbmdlZCBwdXQgaW5pdGlhbCBzZWxlY3Rpb25cclxuICAgICAgdGhpcy5mb3JtRWxlbWVudC5vbmNoYW5nZSA9IG51bGw7XHJcbiAgICAgIHRoaXMuZGlzYWJsZUZvcm0oKTtcclxuICAgICAgdGhpcy5idXR0b25zVmlzaWJpbGl0eU1vZGUoJ3ZpZXcnKTtcclxuICAgICAgdGhpcy5jb25maXJtVXBkYXRlQnRuLmNsYXNzTGlzdC5hZGQoJ2Rpc2FibGVkJyk7XHJcbiAgICAgIHRoaXMuY29uZmlybVVwZGF0ZUJ0bi5vbmNsaWNrID0gbnVsbDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNvbnNvbGUud2FybignTm8gY29tbWVudCBmb3VuZCB3aXRoIHRoYXQgaWQ6JywgdGhpcy5jb21tZW50SWQpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogUmV0dXJucyBhbiBhcnJheSBvZiB0aGUgdmFsdWVzIG9mIHRoZSBzZWxlY3RlZCBvcHRpb25zLlxyXG4gICAqL1xyXG4gIGdldFNlbGVjdGVkTWVtYmVycygpIHtcclxuICAgIGNvbnN0IHNlbGVjdGVkT3B0aW9ucyA9IFtdO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm1lbnRpb25zSW5wdXQuc2VsZWN0ZWRPcHRpb25zLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIHNlbGVjdGVkT3B0aW9ucy5wdXNoKHRoaXMubWVudGlvbnNJbnB1dC5zZWxlY3RlZE9wdGlvbnNbaV0udmFsdWUpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHNlbGVjdGVkT3B0aW9ucztcclxuICB9XHJcblxyXG4gIGZpbGxJbnB1dHMoY29tbWVudDogQ29tbWVudCkge1xyXG4gICAgdGhpcy50ZXh0SW5wdXQudmFsdWUgPSBjb21tZW50LmNvbnRlbnQ7XHJcbiAgICBpZiAoY29tbWVudC5tZW50aW9ucy5sZW5ndGggPiAwKSB7XHJcbiAgICAgIGNvbnN0IG1lbnRpb25zOiBzdHJpbmdbXSA9IFtdO1xyXG4gICAgICAvLyBJdCBzaG91bGQgYmUgc3RpbGwgYSBtZW1iZXIgb2YgdGhlIHRlYW0gb3RoZXJ3aXNlIGl0cyBuYW1lIGlzIHNldCB0byAncmVtb3ZlZCB1c2VyJ1xyXG4gICAgICAvLyBUT0RPOiBpZiBhIG1lbnRpb25lZCB0ZWFtIG1lbWJlciB3YXMgcmVtb3ZlZCBpdCBzaG91bGQgYmUgcmVtb3ZlZCBmcm9tIGFueSBtZW50aW9uID8gd2hlbiA/XHJcbiAgICAgIC8vID8gQWxsIG1lbWJlcnMgc2hvdWxkIGJlIGFkZGVkIGhlcmUgP1xyXG4gICAgICBjb21tZW50Lm1lbnRpb25zLmZvckVhY2gobWVudGlvbkVtYWlsID0+IHtcclxuICAgICAgICBjb25zdCBwZXJtaXNzaW9uID0gdGhpcy53b3Jrc3BhY2UucGVybWlzc2lvbnMuZmluZChwID0+IHAuZW1haWxBZGRyZXNzID09PSBtZW50aW9uRW1haWwpO1xyXG4gICAgICAgIG1lbnRpb25zLnB1c2goYDxvcHRpb24gdmFsdWU9XCIke21lbnRpb25FbWFpbH1cIj4ke3Blcm1pc3Npb24gPyBwZXJtaXNzaW9uLmRpc3BsYXlOYW1lIDogJ1JlbW92ZWQgdXNlcid9PC9vcHRpb24+YCk7XHJcbiAgICAgIH0pO1xyXG4gICAgICB0aGlzLm1lbnRpb25zSW5wdXQuaW5uZXJIVE1MID0gbWVudGlvbnMuam9pbignJyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAvLyBUT0RPIFNob3cgYSBtZXNzYWdlIGluZGljYXRpbmcgbm8gbWVudGlvbnM/IHNob3cgdGhlIGVtcHR5IHNlbGVjdD9cclxuICAgICAgR2VuZXJpY3MuZW1wdHlOb2RlKHRoaXMubWVudGlvbnNJbnB1dCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZXNldCgpIHtcclxuICAgIHRoaXMuZm9ybUVsZW1lbnQucmVzZXQoKTtcclxuICB9XHJcbn0iLCJpbXBvcnQgR2VuZXJpY3MgZnJvbSAnLi9nZW5lcmljcyc7XHJcbmltcG9ydCB7IENvbW1lbnQgfSBmcm9tICcuL2NvbW1lbnQnO1xyXG5pbXBvcnQgeyBNYWluUGFuZWwgfSBmcm9tICcuL21haW5QYW5lbCc7XHJcbmltcG9ydCB7IENvbW1lbnRGb3JtIH0gZnJvbSAnLi9jb21tZW50Rm9ybSc7XHJcbmltcG9ydCB0eXBlIHsgRHJhd2luZyB9IGZyb20gJy4vZHJhd2luZyc7XHJcbmltcG9ydCB0eXBlIHsgQXBwbGljYXRpb24gfSBmcm9tICcuL2FwcCc7XHJcbmltcG9ydCB0eXBlIHsgRWxlbWVudFNlbGVjdGlvbiB9IGZyb20gJy4vYXBwVG9vbHMvZWxlbWVudFNlbGVjdGlvbic7XHJcbmltcG9ydCB7IE1vZGVsRWxlbWVudHNEYXRhLCBQcm9qZWN0RGF0YSwgTm90aWZpY2F0aW9uVG9TZW5kIH0gZnJvbSAnLi90eXBlcyc7XHJcblxyXG4vLyBFYWNoIGVudHJ5IHN0b3JlcyBhbiBhcnJheSBvZiBpZHMgb2YgY29tbWVudHMgZm9yIHRoYXQgZWxlbWVudC5cclxuaW50ZXJmYWNlIEVsZW1lbnRzQ29tbWVudHMge1xyXG4gIFtlbGVtZW50SWQ6IHN0cmluZ106IHN0cmluZ1tdO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgV29ya3NwYWNlIHtcclxuICB3b3Jrc3BhY2VDb250YWluZXI6IEhUTUxFbGVtZW50O1xyXG4gIHByb2plY3ROYW1lOiBzdHJpbmc7XHJcbiAgcHJvamVjdElkOiBzdHJpbmc7XHJcbiAgcGVybWlzc2lvbnM6IGdhcGkuY2xpZW50LmRyaXZlLlBlcm1pc3Npb25bXTtcclxuICBwcm9qZWN0SW5kZXg6IG51bWJlcjtcclxuICBkcmF3aW5nczogRHJhd2luZ1tdO1xyXG4gIGVsZW1lbnRzRGF0YTogTW9kZWxFbGVtZW50c0RhdGE7XHJcbiAgZHJhd2luZ3NTdHlsZXNJZDogc3RyaW5nO1xyXG4gIGFjdGl2ZVRvb2w6IEVsZW1lbnRTZWxlY3Rpb247XHJcbiAgLy8gdG9vbFNldHRpbmdzOiBhbnk7XHJcbiAgYXBwZW5kZWREcmF3aW5nc0lkczogc3RyaW5nW10gPSBbXTtcclxuICBhY3RpdmVEcmF3aW5nOiBEcmF3aW5nO1xyXG4gIGRyYXdpbmdzQnRuczogSFRNTEVsZW1lbnQ7XHJcbiAgZHJhd2luZ3NTdHlsZXNUYWc6IEhUTUxTdHlsZUVsZW1lbnQ7XHJcbiAgc2F2ZUJ0bjogSFRNTEVsZW1lbnQ7XHJcbiAgcHJvamVjdHNEYXRhOiBQcm9qZWN0RGF0YVtdO1xyXG4gIHByb3BzVGFibGVzQ29udGFpbmVyOiBIVE1MRWxlbWVudDtcclxuICBwYXJhbXNUYWJsZXNDb250YWluZXI6IEhUTUxFbGVtZW50O1xyXG4gIGNvbW1lbnRzQ2hhbmdlc1Vuc2F2ZWQ6IGJvb2xlYW47XHJcbiAgY29tbWVudHNGaWxlSWQ6IHN0cmluZztcclxuICBjb21tZW50czogQ29tbWVudFtdID0gW107XHJcbiAgLy8gVXNlZCB0byBzdG9yZSBhcnJheXMgb2YgYWxsIHRoZSBjb21tZW50cyB0aGF0IGVhY2ggZWxlbWVudCBoYXMsIG5lY2Vzc2FyeSB3aGVuIGFuIGVsZW1lbnQgaXMgY2xpY2tlZC5cclxuICBlbGVtZW50c0NvbW1lbnRzOiBFbGVtZW50c0NvbW1lbnRzID0ge307XHJcbiAgcGVuZGluZ05vdGlmaWNhdGlvbnNUb1NlbmQ6IE5vdGlmaWNhdGlvblRvU2VuZFtdO1xyXG4gIG1haW5QYW5lbDogTWFpblBhbmVsO1xyXG4gIGNvbW1lbnRGb3JtOiBDb21tZW50Rm9ybTtcclxuICBkcmF3aW5nc0NvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XHJcblxyXG4gIGNvbnN0cnVjdG9yKHByb2plY3REYXRhOiBQcm9qZWN0RGF0YSwgQXBwOiBBcHBsaWNhdGlvbikge1xyXG4gICAgLy8gQ3JlYXRlIHRoZSB3b3Jrc3BhY2UgSFRNTCBjb250YWluZXIuXHJcbiAgICB0aGlzLndvcmtzcGFjZUNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgdGhpcy53b3Jrc3BhY2VDb250YWluZXIuY2xhc3NMaXN0LmFkZCgnd29ya3NwYWNlJyk7XHJcbiAgICAvLyBUT0RPIGNyZWF0ZSB2aWV3cG9ydCBtZXNzYWdlIGFzIGNvbXBvbmVudC4gVGhpcyBlbGVtZW50IGN1cnJlbnRseSBoYXMgaWQgdmlld3BvcnRNZXNzYWdlXHJcbiAgICAvL3RoaXMudmlld3BvcnRNZXNzYWdlID0gbmV3IFZpZXdwb3J0TWVzc2FnZSgpO1xyXG5cclxuICAgIHRoaXMucHJvamVjdE5hbWUgPSBwcm9qZWN0RGF0YS5uYW1lO1xyXG4gICAgdGhpcy5wcm9qZWN0SWQgPSBwcm9qZWN0RGF0YS5pZDtcclxuICAgIHRoaXMucGVybWlzc2lvbnMgPSBwcm9qZWN0RGF0YS5wZXJtaXNzaW9ucztcclxuICAgIHRoaXMucHJvamVjdEluZGV4ID0gQXBwLnByb2plY3RzRGF0YS5maW5kSW5kZXgoKG9iajogUHJvamVjdERhdGEpID0+IG9iai5uYW1lID09PSBwcm9qZWN0RGF0YS5uYW1lKTtcclxuICAgIGlmIChBcHAubGFzdFVwbG9hZGVkUHJvamVjdCAmJiBwcm9qZWN0RGF0YS5pZCA9PT0gQXBwLmxhc3RVcGxvYWRlZFByb2plY3QuaWQpIHtcclxuICAgICAgLy90aGlzLmRyYXdpbmdzID0gQXBwLmxhc3RVcGxvYWRlZFByb2plY3QuZHJhd2luZ3M7IC8vIFRPRE8gd2hlbiBsYXN0VXBsb2FkZWRQcm9qZWN0IGludGVyZmFjZSBpcyBhdmFpYWJsZSB1bmNvbW1lbnQgaXRcclxuICAgICAgLy90aGlzLmRyYXdpbmdzU3R5bGVzSWQgPSBBcHAubGFzdFVwbG9hZGVkUHJvamVjdC5kcmF3aW5nc1N0eWxlc0lkO1xyXG4gICAgICAvLyB0aGlzLmVsZW1lbnRzRGF0YSA9IEFwcC5sYXN0VXBsb2FkZWRQcm9qZWN0LmVsZW1lbnRzRGF0YTsgLy8gVE9ETyBjaGVjayB0eXBlIGJlZm9yZSB1bmNvbW1lbnRcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIC8vIFN0b3JlIHRoZSBjb250ZW50IG9mIHRoZSBkcmF3aW5ncyBhcyBlbnRyaWVzIG5hbWU6J2NvbnRlbnQnXHJcbiAgICAgIHRoaXMuZHJhd2luZ3MgPSBwcm9qZWN0RGF0YS5kcmF3aW5ncztcclxuICAgICAgdGhpcy5kcmF3aW5nc1N0eWxlc0lkID0gcHJvamVjdERhdGEuZHJhd2luZ3NTdHlsZXNJZDtcclxuICAgICAgLy8gVE9ETzogRWxlbWVudHMgZGF0YSBjb3VsZCBiZSBjaGFuZ2VkIHRvIGEgc2ltaWxhciBzeXN0ZW0gbGlrZSB0aGUgZHJhd2luZyBvYmplY3RzLlxyXG4gICAgICB0aGlzLmVsZW1lbnRzRGF0YSA9IHt9O1xyXG4gICAgfVxyXG4gICAgLy8gU2V0IHRpdGxlIG9mIHRoZSBwcm9qZWN0IGluIHRoZSBidXR0b24gdG8gbGlzdCB0aGUgcHJvamVjdHMuXHJcbiAgICBBcHAucHJvamVjdHNMaXN0QnRuLmlubmVySFRNTCA9ICc8c3Bhbj4nICsgcHJvamVjdERhdGEubmFtZSArICc8L3NwYW4+JztcclxuICAgIHRoaXMuZHJhd2luZ3NCdG5zID0gQXBwLmRyYXdpbmdzQnRucztcclxuICAgIHRoaXMuc2F2ZUJ0biA9IEFwcC5zYXZlQnRuO1xyXG4gICAgdGhpcy5jcmVhdGVEcmF3aW5nc0J0bnModGhpcy5kcmF3aW5ncyk7XHJcbiAgICAvLyBTaG93IGRyYXdpbmdzIGFuZCB0b29scyBidXR0b25zLlxyXG4gICAgKHRoaXMuZHJhd2luZ3NCdG5zLmNoaWxkcmVuWzBdIGFzIEhUTUxFbGVtZW50KS5pbm5lclRleHQgPSAnUGljayBhIGRyYXdpbmcnO1xyXG4gICAgdGhpcy5kcmF3aW5nc0J0bnMuc3R5bGUuZGlzcGxheSA9ICd1bnNldCc7XHJcbiAgICBBcHAudG9vbGJhcnNDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdmbGV4JztcclxuICAgIHRoaXMucHJvamVjdHNEYXRhID0gQXBwLnByb2plY3RzRGF0YTtcclxuICAgIHRoaXMucHJvcHNUYWJsZXNDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvcHNUYWJsZXNDb250YWluZXInKTtcclxuICAgIHRoaXMucGFyYW1zVGFibGVzQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BhcmFtc1RhYmxlc0NvbnRhaW5lcicpO1xyXG4gICAgaWYgKHByb2plY3REYXRhLmNvbW1lbnRzRmlsZUlkKSB7XHJcbiAgICAgIHRoaXMuY29tbWVudHNGaWxlSWQgPSBwcm9qZWN0RGF0YS5jb21tZW50c0ZpbGVJZDtcclxuICAgIH1cclxuICAgIGlmIChwcm9qZWN0RGF0YS5jb21tZW50cykge1xyXG4gICAgICBwcm9qZWN0RGF0YS5jb21tZW50cy5mb3JFYWNoKChjb21tZW50RGF0YTogQ29tbWVudCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGNvbW1lbnRPYmogPSBuZXcgQ29tbWVudChjb21tZW50RGF0YS5lbGVtZW50c0lkcywgY29tbWVudERhdGEuY29udGVudCwgY29tbWVudERhdGEubWVudGlvbnMpO1xyXG4gICAgICAgIHRoaXMuY29tbWVudHMucHVzaChjb21tZW50T2JqKTtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvbW1lbnREYXRhLmVsZW1lbnRzSWRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICBpZiAoIXRoaXMuZWxlbWVudHNDb21tZW50cy5oYXNPd25Qcm9wZXJ0eShjb21tZW50RGF0YS5lbGVtZW50c0lkc1tpXSkpXHJcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudHNDb21tZW50c1tjb21tZW50RGF0YS5lbGVtZW50c0lkc1tpXV0gPSBbXTtcclxuICAgICAgICAgIHRoaXMuZWxlbWVudHNDb21tZW50c1tjb21tZW50RGF0YS5lbGVtZW50c0lkc1tpXV0ucHVzaChjb21tZW50T2JqLmlkKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgICB0aGlzLmRyYXdpbmdzLmZvckVhY2goZHJhd2luZyA9PiBkcmF3aW5nLmNvbW1lbnRzQ2hhbmdlZCA9IHRydWUpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5tYWluUGFuZWwgPSBuZXcgTWFpblBhbmVsKEFwcC5wYW5lbHNTdG9yYWdlLCB0aGlzKTtcclxuICAgIHRoaXMuY29tbWVudEZvcm0gPSBuZXcgQ29tbWVudEZvcm0oZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbW1lbnRGb3JtJykgYXMgSFRNTEZvcm1FbGVtZW50LCB0aGlzKTtcclxuICAgIC8vIENyZWF0ZSBhbmQgYXBwZW5kIHRoZSBIVE1MIGRyYXdpbmdzIGNvbnRhaW5lci5cclxuICAgIHRoaXMuZHJhd2luZ3NDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgIHRoaXMuZHJhd2luZ3NDb250YWluZXIuY2xhc3NMaXN0LmFkZCgnZHJhd2luZ3NDb250YWluZXInKTtcclxuICAgIHRoaXMud29ya3NwYWNlQ29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMuZHJhd2luZ3NDb250YWluZXIpO1xyXG4gICAgLy8gQXBwZW5kIHRoZSB3b3Jrc3BhY2UgY29udGFpbmVyIHRvIHRoZSBET00uXHJcbiAgICBBcHAud29ya3NwYWNlc0NvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLndvcmtzcGFjZUNvbnRhaW5lcik7XHJcbiAgfVxyXG5cclxuICAvLyBUT0RPOiBTZXQgYSBkZWZhdWx0ICdhY3RpdmVEcmF3aW5nJyB3aXRoIHRoZSAnZWxlbWVudHNEYXRhJyB0b29sIGFjdGl2ZSBieSBkZWZhdWx0PyB0aGlzLmFjdGl2ZVRvb2wgPSBuZXcgRWxlbWVudHNEYXRhKCdlbGVtZW50c0RhdGFUb29sJywgdGhpcyk7XHJcblxyXG5cclxuICAvKioqKioqKioqKioqKioqKioqKioqKiogVE9PTFMgTUFOQUdFTUVOVCAqKioqKioqKioqKioqKioqKioqKioqKiovXHJcblxyXG4gIC8qKlxyXG4gICAqIFNldHMgdGhlIHNlbGVjdGVkIHRvb2wgYXMgYWN0aXZlIGFuZCB0dXJucyBvZmYgdGhlIHByZXZpb3VzIG9uZSBpZiBzdGlsbCBhY3RpdmUuXHJcbiAgICovXHJcbiAgbWFuYWdlVG9vbHMoZTogRXZlbnQsIFRvb2w6IHR5cGVvZiBFbGVtZW50U2VsZWN0aW9uLCBuYW1lOiBzdHJpbmcpIHtcclxuICAgIGlmICh0aGlzLmFjdGl2ZURyYXdpbmcgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAvLyBUT0RPOiBTaG93IGEgbWVzc2FnZSBzYXlpbmcgdGhhdCBhIGRyYXdpbmcgbXVzdCBiZSBhY3RpdmUuXHJcbiAgICAgIGNvbnNvbGUubG9nKCdBIGRyYXdpbmcgbXVzdCBiZSBhY3RpdmUuJyk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGlmICh0aGlzLmFjdGl2ZVRvb2wgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICB0aGlzLmFjdGl2ZVRvb2wgPSBuZXcgVG9vbChuYW1lLCBlLmN1cnJlbnRUYXJnZXQgYXMgSFRNTEVsZW1lbnQsIHRoaXMpO1xyXG4gICAgfSBlbHNlIGlmICh0aGlzLmFjdGl2ZVRvb2wubmFtZSAhPT0gbmFtZSkge1xyXG4gICAgICB0aGlzLmFjdGl2ZVRvb2wua2lsbCgpO1xyXG4gICAgICB0aGlzLmFjdGl2ZVRvb2wgPSBuZXcgVG9vbChuYW1lLCBlLmN1cnJlbnRUYXJnZXQgYXMgSFRNTEVsZW1lbnQsIHRoaXMpO1xyXG4gICAgfSBlbHNlIGlmICh0aGlzLmFjdGl2ZVRvb2wubmFtZSA9PT0gbmFtZSkge1xyXG4gICAgICB0aGlzLmFjdGl2ZVRvb2wua2lsbCgpO1xyXG4gICAgICB0aGlzLmFjdGl2ZVRvb2wgPSB1bmRlZmluZWQ7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuXHJcbiAgdW5zYXZlZENvbW1lbnRzRGF0YSgpIHtcclxuICAgIHRoaXMuY29tbWVudHNDaGFuZ2VzVW5zYXZlZCA9IHRydWU7XHJcbiAgICB0aGlzLnNhdmVCdG4uY2xhc3NMaXN0LnJlbW92ZSgnZGlzYWJsZWQnKTtcclxuICAgIHRoaXMuc2F2ZUJ0bi5jbGFzc0xpc3QuYWRkKCdlbmFibGVkJyk7XHJcbiAgfVxyXG5cclxuXHJcbiAgLyoqKioqKioqKioqKioqKioqKioqKiogRFJBV0lOR1MgTUFOQUdFTUVOVCAqKioqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuICAvKipcclxuICAgKiBNYW5hZ2VzIHRoZSBkcmF3aW5ncyB2aXNpYmlsaXR5LiBUaGUgcHJvdmlkZWQgZHJhd2luZyBvYmplY3RcclxuICAgKiBzaG91bGQgaGF2ZSB0aGUgJ2NvbnRlbnQnIHByb3BlcnR5IGFscmVhZHkgd2l0aCB2YWx1ZS5cclxuICAgKi9cclxuICBzZXREcmF3aW5nKGRyYXdpbmc6IERyYXdpbmcpIHtcclxuICAgIC8vIElmIHRoZXJlIGlzIGEgcHJldmlvdXMgdmlzaWJsZSBkcmF3aW5nIGhpZGUgaXQuXHJcbiAgICBpZiAodGhpcy5hY3RpdmVEcmF3aW5nICYmIHRoaXMuYWN0aXZlRHJhd2luZy5uYW1lICE9PSBkcmF3aW5nLm5hbWUpIHtcclxuICAgICAgLy8gSWYgaW4gdGhlIGRyYXdpbmcgdG8gYmUgaGlkZGVuIHRoZXJlIGFyZSBzZWxlY3RlZCBlbGVtZW50cyByZW1vdmUgdGhlaXIgc2VsZWN0aW9uIGFwcGVhcmFuY2UuXHJcbiAgICAgIGlmICh0aGlzLmFjdGl2ZVRvb2wgJiYgdGhpcy5hY3RpdmVUb29sLmN1cnJlbnRTZWxlY3Rpb24ubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIHRoaXMuYWN0aXZlVG9vbC5yZW1vdmVEcmF3aW5nU2VsZWN0aW9uQXBwZWFyYW5jZSh0aGlzLmFjdGl2ZURyYXdpbmcpO1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMuYWN0aXZlRHJhd2luZy5jb250ZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICB9IGVsc2UgaWYgKHRoaXMuYWN0aXZlRHJhd2luZyAmJiB0aGlzLmFjdGl2ZURyYXdpbmcubmFtZSA9PT0gZHJhd2luZy5uYW1lKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICAvLyBNYWtlIGl0IG5vdCB2aXNpYmxlIHVudGlsIHRoZSBlbmQgb2YgdGhlIHByb2Nlc3MuIFVzZSB2aXNpYmlsaXR5XHJcbiAgICAvLyBiZWNhdXNlIHNvbWUgYnJvd3NlcnMgbGlrZSBDaHJvbWUgY2Fubm90IGRyYXcgbmV3IHN2ZyBlbGVtZW50cyBpZlxyXG4gICAgLy8gdGhlIGNhbnZhcyBoYXMgJ2Rpc3BsYXk6bm9uZScuXHJcbiAgICBkcmF3aW5nLmNvbnRlbnQuc3R5bGUudmlzaWJpbGl0eSA9ICdoaWRkZW4nO1xyXG5cclxuICAgIC8vIElmIGl0IGlzIG5vdCBpbiB0aGUgRE9NIGFscmVhZHkgYXBwZW5kIGl0LlxyXG4gICAgLy8gSWYgaXQgaXMgYWxyZWFkeSBpbiB0aGUgRE9NIHRoZW4gcmVtb3ZlIHRoZSAnZGlzcGxheTpub25lJy5cclxuICAgIGlmICghdGhpcy5hcHBlbmRlZERyYXdpbmdzSWRzLmluY2x1ZGVzKGRyYXdpbmcuaWQpKSB7XHJcbiAgICAgIHRoaXMuYXBwZW5kZWREcmF3aW5nc0lkcy5wdXNoKGRyYXdpbmcuaWQpO1xyXG4gICAgICB0aGlzLmRyYXdpbmdzQ29udGFpbmVyLmFwcGVuZChkcmF3aW5nLmNvbnRlbnQpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgZHJhd2luZy5jb250ZW50LnN0eWxlLmRpc3BsYXkgPSAndW5zZXQnO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIElmIHRoZSB2YWx1ZSBvZiBjb21tZW50c0NoYW5nZWQgaXMgdW5kZWZpbmVkIHRoZW4gdGhlcmUgYXJlIHN0aWxsXHJcbiAgICAvLyBubyBjb21tZW50cyBpbiB0aGUgcHJvamVjdC4gSWYgaXQgaXMgZmFsc2UgdGhlbiB0aGVyZSBhcmUgbm8gY2hhbmdlcy5cclxuICAgIGlmIChkcmF3aW5nLmNvbW1lbnRzQ2hhbmdlZCkge1xyXG4gICAgICAvLyBVcGRhdGUgdGhlIGNvbW1lbnRzIHJlcHJlc2VudGF0aW9ucyBmb3IgdGhlIG5ldyBkcmF3aW5nLlxyXG4gICAgICAvLyBJZiBzdGlsbCB0aGVyZSBpcyBubyBjb21tZW50cyBncm91cCBjaGVjayB0aGUgZHJhd2luZywgb3RoZXJ3aXNlIGNoZWNrXHJcbiAgICAgIC8vIHRoZSBvbmVzIHdpdGhvdXQgcmVwcmVzZW50YXRpb24gaW4gdGhlIGNvbW1lbnRzIGdyb3VwLlxyXG4gICAgICBpZiAoZHJhd2luZy5jb21tZW50c0dyb3VwID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICBsZXQgZ3JvdXBDcmVhdGVkID0gZmFsc2U7XHJcbiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCB0aGlzLmNvbW1lbnRzLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICBjb25zdCBlbGVtc0ZvckNvbW1lbnRSZXByZXNlbnRhdGlvbjogU1ZHR0VsZW1lbnRbXSA9IFtdO1xyXG4gICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmNvbW1lbnRzW2pdLmVsZW1lbnRzSWRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGVsZW1lbnQgPSBkcmF3aW5nLmNvbnRlbnQucXVlcnlTZWxlY3RvcignW2RhdGEtaWQ9XCInICsgdGhpcy5jb21tZW50c1tqXS5lbGVtZW50c0lkc1tpXSArICdcIl0nKSBhcyBTVkdHRWxlbWVudDtcclxuICAgICAgICAgICAgaWYgKGVsZW1lbnQgIT09IG51bGwpXHJcbiAgICAgICAgICAgICAgZWxlbXNGb3JDb21tZW50UmVwcmVzZW50YXRpb24ucHVzaChlbGVtZW50KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIC8vIElmIGF0IGxlYXN0IG9uZSBpcyBmb3VuZCBjcmVhdGUgdGhlIHJlcHJlc2VudGF0aW9uLlxyXG4gICAgICAgICAgaWYgKGVsZW1zRm9yQ29tbWVudFJlcHJlc2VudGF0aW9uLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgLy8gT25seSBpZiBhdCBsZWFzdCBvbmUgY29tbWVudCByZXF1aXJlcyByZXByZXNlbnRhdGlvbiB0aGUgY29tbWVudHMgZ3JvdXAgaXMgY3JlYXRlZC5cclxuICAgICAgICAgICAgaWYgKCFncm91cENyZWF0ZWQpIHtcclxuICAgICAgICAgICAgICBkcmF3aW5nLmNyZWF0ZUNvbW1lbnRzR3JvdXAoKTtcclxuICAgICAgICAgICAgICAvLyBUT0RPOiBTZXQgdmlzaWJpbGl0eSBvZiB0aGUgZ3JvdXAuXHJcbiAgICAgICAgICAgICAgZ3JvdXBDcmVhdGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLmNvbW1lbnRzW2pdLmNyZWF0ZVJlcHJlc2VudGF0aW9uKGRyYXdpbmcuY29tbWVudHNHcm91cCwgZWxlbXNGb3JDb21tZW50UmVwcmVzZW50YXRpb24pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAvLyBMb29rIGZvciBpbiB0aGUgY29tbWVudHMgZ3JvdXAsIGFuZCBhZGQgdGhlIG1pc3Npbmcgb25lcy5cclxuICAgICAgICAvLyBPbmx5IGlmIHRoZSBlbGVtZW50IGlzIGluIHRoZSBkcmF3aW5nIGFuZCBpdCBkb2VzbnQgaGF2ZSByZXByZXNlbnRhdGlvbi5cclxuICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHRoaXMuY29tbWVudHMubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgIC8vIElmIHRoaXMgZWxlbWVudCBhbHJlYWR5IGhhcyBhIHJlcHJlc2VudGF0aW9uIGluIHRoaXMgZHJhd2luZyBza2lwIGl0LlxyXG4gICAgICAgICAgaWYgKGRyYXdpbmcuY29tbWVudHNHcm91cC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1pZD1cIicgKyB0aGlzLmNvbW1lbnRzW2pdLmlkICsgJ1wiXScpICE9PSBudWxsKSBjb250aW51ZTtcclxuICAgICAgICAgIC8vIFRPRE8gRG8gc29tZXRoaW5nIHRvIGF2b2lkIGNoZWNraW5nIGNvbW1lbnRzIHRoYXQgZG9lc250IGhhdmUgYW55IGVsZW1lbnQgaW4gdGhpcyBkcmF3aW5nLlxyXG4gICAgICAgICAgLy8gSWYgdGhlcmUgaXMgbm8gcmVwcmVzZW50YXRpb24gZm9yIGl0IGdldCBhbGwgaXRzIGVsZW1lbnRzIGFuZCBpZiBhdCBsZWFzdCBvbmUgaXMgZm91bmQgY3JlYXRlIHRoZSByZXByZXNlbnRhdGlvbi5cclxuICAgICAgICAgIGNvbnN0IGVsZW1zRm9yQ29tbWVudFJlcHJlc2VudGF0aW9uOiBTVkdHRWxlbWVudFtdID0gW107XHJcbiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuY29tbWVudHNbal0uZWxlbWVudHNJZHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3QgZWxlbWVudCA9IGRyYXdpbmcuY29udGVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1pZD1cIicgKyB0aGlzLmNvbW1lbnRzW2pdLmVsZW1lbnRzSWRzW2ldICsgJ1wiXScpIGFzIFNWR0dFbGVtZW50O1xyXG4gICAgICAgICAgICBpZiAoZWxlbWVudCAhPT0gbnVsbClcclxuICAgICAgICAgICAgICBlbGVtc0ZvckNvbW1lbnRSZXByZXNlbnRhdGlvbi5wdXNoKGVsZW1lbnQpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgaWYgKGVsZW1zRm9yQ29tbWVudFJlcHJlc2VudGF0aW9uLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgdGhpcy5jb21tZW50c1tqXS5jcmVhdGVSZXByZXNlbnRhdGlvbihkcmF3aW5nLmNvbW1lbnRzR3JvdXAsIGVsZW1zRm9yQ29tbWVudFJlcHJlc2VudGF0aW9uKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gVE9ETzogU2V0IHZpc2liaWxpdHkgb2YgdGhlIGdyb3VwLlxyXG4gICAgICB9XHJcbiAgICAgIC8vIFNldCB0aGUgY29tbWVudHNDaGFuZ2VkIHByb3BlcnR5IHRvIGZhbHNlIHRvIGluZGljYXRlIHRoYXQgaXQgaXMgdXBkYXRlZC5cclxuICAgICAgZHJhd2luZy5jb21tZW50c0NoYW5nZWQgPSBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBUT0RPIENvdWxkIGJlIHJlbW92ZWQgYmVjYXVzZSB0b29sIHRha2VzIHRoZSBhY3RpdmUgZHJhd2lnbiBmcm9tIHRoZSB3b3Jrc3BhY2VcclxuICAgIC8vIFVwZGF0ZSB0aGUgJ2FjdGl2ZURyYXdpbmcnIGluIHRoZSAnYWN0aXZlVG9vbCcuXHJcbiAgICAvLyBpZiAodGhpcy5hY3RpdmVUb29sKSB7XHJcbiAgICAvLyAgIHRoaXMuYWN0aXZlVG9vbC5hY3RpdmVEcmF3aW5nID0gZHJhd2luZztcclxuICAgIC8vIH1cclxuXHJcbiAgICAvLyBJZiB0aGVyZSBhcmUgc2VsZWN0ZWQgZWxlbWVudHMgaW4gdGhlIG5ldyBkcmF3aW5nIGFkZCB0aGUgc2VsZWN0aW9uIGFwcGVhcmFuY2UgdG8gdGhlbS5cclxuICAgIGlmICh0aGlzLmFjdGl2ZVRvb2wgJiYgdGhpcy5hY3RpdmVUb29sLmN1cnJlbnRTZWxlY3Rpb24ubGVuZ3RoID4gMCkge1xyXG4gICAgICB0aGlzLmFjdGl2ZVRvb2wuYWRkRHJhd2luZ1NlbGVjdGlvbkFwcGVhcmFuY2UoZHJhd2luZyk7XHJcbiAgICB9XHJcblxyXG4gICAgZHJhd2luZy5jb250ZW50LnN0eWxlLnZpc2liaWxpdHkgPSAndW5zZXQnO1xyXG5cclxuICAgIC8vIFNldCB0aGUgZHJhd2luZyBhcyBhY3RpdmUuXHJcbiAgICB0aGlzLmFjdGl2ZURyYXdpbmcgPSBkcmF3aW5nO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ3JlYXRlcyB0aGUgYnV0dG9ucyBmb3IgdGhlIGRyYXdpbmdzIHRvIGJlIGRpc3BsYXllZC5cclxuICAgKiBAcGFyYW0ge0FycmF5fSBkcmF3aW5ncyBBcnJheSB3aXRoIHRoZSBkcmF3aW5nIG9iamVjdHMuXHJcbiAgICovXHJcbiAgY3JlYXRlRHJhd2luZ3NCdG5zKGRyYXdpbmdzOiBEcmF3aW5nW10pIHtcclxuICAgIGxldCBkcmF3aW5nc0l0ZW1zOiBzdHJpbmdbXSA9IFtdO1xyXG4gICAgZHJhd2luZ3MuZm9yRWFjaChkcmF3aW5nID0+IHtcclxuICAgICAgLy8gQ291bGQgYmUgdGhhdCB0aGVyZSBpcyBubyBpZCBpZiB0aGUgcHJvamVjdCB3YXMgdXBsb2FkZWQgYW5kIGl0IGlzIG9ubHkgbG9jYWwuXHJcbiAgICAgIGRyYXdpbmdzSXRlbXMucHVzaChgPGxpICR7ZHJhd2luZy5pZCA/ICdkYXRhLWlkPVxcXCInICsgZHJhd2luZy5pZCArICdcXFwiJyA6ICcnfT4ke2RyYXdpbmcubmFtZX08L2xpPmApO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLmRyYXdpbmdzQnRucy5xdWVyeVNlbGVjdG9yKCcuZHJvcGRvd24tY29udGVudCcpLmlubmVySFRNTCA9IGRyYXdpbmdzSXRlbXMuam9pbignJyk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBDbGVhbnMgdGhlIHdvcmtzcGFjZSBieSBlbXB0eWluZyB0aGUgZHJhd2luZyBjb250YWluZXIgYW5kIHRoZSBsaXN0IG9mIGRyYXdpbmdzLlxyXG4gICAqIFRPRE86IFJlbW92ZSBwb3NzaWJsZSBldmVudCBsaXN0ZW5lcnMgYmVmb3JlIGVtcHR5aW5nIGNvbnRhaW5lcnMgP1xyXG4gICAqL1xyXG4gIGNsb3NlKCkge1xyXG4gICAgLy8gRW1wdHkgdGhlIGRyYXdpbmdzIGJ1dHRvbnMgY29udGFpbmVyLlxyXG4gICAgR2VuZXJpY3MuZW1wdHlOb2RlKHRoaXMuZHJhd2luZ3NCdG5zLnF1ZXJ5U2VsZWN0b3IoJy5kcm9wZG93bi1jb250ZW50JykpO1xyXG4gICAgLy8gUmVtb3ZlIHRoZSBjcmVhdGUgc3R5bGUgdGFnIGZvciB0aGUgc3R5bGVzIG9mIHRoZSBkcmF3aW5ncy5cclxuICAgIGlmICh0aGlzLmRyYXdpbmdzU3R5bGVzVGFnICE9PSB1bmRlZmluZWQpXHJcbiAgICAgIHRoaXMuZHJhd2luZ3NTdHlsZXNUYWcucmVtb3ZlKCk7XHJcbiAgICAvLyBSZW1vdmUgdGhlIG1haW4gcGFuZWwuICAgXHJcbiAgICAvL3RoaXMubWFpblBhbmVsLmtpbGwoKTtcclxuICAgIC8vIFRPRE86IElmIGluIGZ1dHVyZSB2ZXJzaW9uIHRoZXJlIGFyZSBlbGVtZW50cyBpbiB0aGUgc3ZnIHdpdGggZXZlbnQgbGlzdGVuZXJzIHRob3NlIHNob3VsZCBiZSBkZWxldGVkXHJcbiAgICB0aGlzLmRyYXdpbmdzQ29udGFpbmVyLmlubmVySFRNTCA9ICcnO1xyXG4gIH1cclxufSIsImltcG9ydCB0eXBlIHsgV29ya3NwYWNlIH0gZnJvbSBcIi4uL3dvcmtzcGFjZVwiO1xyXG5cclxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIFRvb2wge1xyXG4gIG5hbWU6IHN0cmluZztcclxuICB0b29sQnRuOiBIVE1MRWxlbWVudDtcclxuICB3b3Jrc3BhY2U6IFdvcmtzcGFjZTtcclxuICBcclxuICBjb25zdHJ1Y3RvcihuYW1lOiBzdHJpbmcsIHRvb2xCdG46IEhUTUxFbGVtZW50LCB3b3Jrc3BhY2U6IFdvcmtzcGFjZSkge1xyXG4gICAgdGhpcy5uYW1lID0gbmFtZTtcclxuICAgIHRoaXMudG9vbEJ0biA9IHRvb2xCdG47XHJcbiAgICB0aGlzLndvcmtzcGFjZSA9IHdvcmtzcGFjZTtcclxuICAgIHRoaXMudG9vbEJ0bi5jbGFzc0xpc3QuYWRkKCdidG4tdG9vbC1lbmFibGVkJyk7XHJcbiAgfVxyXG5cclxuICBraWxsKCkge1xyXG4gICAgdGhpcy50b29sQnRuLmNsYXNzTGlzdC5yZW1vdmUoJ2J0bi10b29sLWVuYWJsZWQnKTtcclxuICB9XHJcbn0iLCJpbXBvcnQgeyBUb29sIH0gZnJvbSAnLi90b29sJztcclxuaW1wb3J0IHR5cGUgeyBXb3Jrc3BhY2UgfSBmcm9tICcuLi93b3Jrc3BhY2UnO1xyXG5pbXBvcnQgdHlwZSB7IERyYXdpbmcgfSBmcm9tICcuLi9kcmF3aW5nJztcclxuXHJcbmV4cG9ydCBjbGFzcyBFbGVtZW50U2VsZWN0aW9uIGV4dGVuZHMgVG9vbCB7XHJcbiAgY3VycmVudFNlbGVjdGlvbjogYW55ID0gW107IC8vIFRPRE8gYXJyYXkgb2Ygd2hhdD8gVE9ETyBUaGlzIGNvdWxkIGJlIGEgcHJvcGVydHkgb2YgdGhlIHdvcmtzcGFjZT9cclxuICBzZWxlY3Rpb246IFNWR0dFbGVtZW50OyAvLyBUT0RPOiBSZW5hbWUgYXMgY2xpY2tlZEVsZW1lbnQgP1xyXG4gIC8qKlxyXG4gICAqIE92ZXJyaWRlIHRoaXMgdmFsdWUgdG8gYWxsb3cgbXVsdGlwbGUgc2VsZWN0aW9uIG9uIGEgdG9vbC4gRGVmYXVsdCBmYWxzZS5cclxuICAgKi9cclxuICBtdWx0aXBsZVNlbGVjdGlvbiA9IGZhbHNlO1xyXG5cclxuICBjb25zdHJ1Y3RvcihuYW1lOiBzdHJpbmcsIHRvb2xCdG46IEhUTUxFbGVtZW50LCB3b3Jrc3BhY2U6IFdvcmtzcGFjZSkge1xyXG4gICAgc3VwZXIobmFtZSwgdG9vbEJ0biwgd29ya3NwYWNlKTtcclxuXHJcbiAgICB0aGlzLm1hbmFnZVNlbGVjdGlvbiA9IHRoaXMubWFuYWdlU2VsZWN0aW9uLmJpbmQodGhpcyk7XHJcbiAgICB3b3Jrc3BhY2UuZHJhd2luZ3NDb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLm1hbmFnZVNlbGVjdGlvbik7XHJcbiAgfVxyXG5cclxuXHJcbiAgLyoqKioqKioqKioqKioqKioqKioqKiBTRUxFQ1RJT04gT0YgRUxFTUVOVFMgKioqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuICAvKipcclxuICAgKiBNYW5hZ2VzIHRoZSBzZWxlY3Rpb24gYW5kIGRlc2VsZWN0aW9uIG9mIHRoZSBzdmcgZWxlbWVudHMuXHJcbiAgICogVGhpcyBzaG91bGQgYmUgZXh0ZW5kZWQgdG8gb2J0YWluIHRoZSBzZWxlY3RlZCBlbGVtZW50L3MuXHJcbiAgICogSWYgbXVsdGlwbGUgc2VsZWN0aW9uIGlzIHJlcXVpcmVkIHNldCB0aGUgaW5oZXJpdGVkIGZpZWxkICdtdWx0aXBsZVNlbGVjdGlvbidcclxuICAgKiB0byB0cnVlIGZvciBleGFtcGxlIGluIHRoZSBjb25zdHJ1Y3RvciBvZiB0aGUgZXh0ZW5kaW5nIGNsYXNzLiBEZWZhdWx0IGlzIGZhbHNlLlxyXG4gICAqL1xyXG4gIG1hbmFnZVNlbGVjdGlvbihlOiBNb3VzZUV2ZW50KSB7XHJcbiAgICB0aGlzLnNlbGVjdGlvbiA9IChlLnRhcmdldCBhcyBTVkdFbGVtZW50KS5jbG9zZXN0KCdbc2VsZWN0YWJsZV0nKTtcclxuICAgIGlmICh0aGlzLnNlbGVjdGlvbiAhPT0gbnVsbCkge1xyXG4gICAgICBpZiAodGhpcy5tdWx0aXBsZVNlbGVjdGlvbikge1xyXG4gICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5jdXJyZW50U2VsZWN0aW9uLmluZGV4T2YodGhpcy5zZWxlY3Rpb24uZGF0YXNldC5pZCk7XHJcbiAgICAgICAgaWYgKGluZGV4ID09PSAtMSkge1xyXG4gICAgICAgICAgdGhpcy5zZWxlY3QodGhpcy5zZWxlY3Rpb24pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB0aGlzLmRlc2VsZWN0KHRoaXMuc2VsZWN0aW9uLmRhdGFzZXQuaWQpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBpZiAodGhpcy5jdXJyZW50U2VsZWN0aW9uLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgdGhpcy5zZWxlY3QodGhpcy5zZWxlY3Rpb24pO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5zZWxlY3Rpb24uZGF0YXNldC5pZCAhPT0gdGhpcy5jdXJyZW50U2VsZWN0aW9uWzBdKSB7XHJcbiAgICAgICAgICB0aGlzLmRlc2VsZWN0KHRoaXMuY3VycmVudFNlbGVjdGlvblswXSk7XHJcbiAgICAgICAgICB0aGlzLnNlbGVjdCh0aGlzLnNlbGVjdGlvbik7XHJcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnNlbGVjdGlvbi5kYXRhc2V0LmlkID09PSB0aGlzLmN1cnJlbnRTZWxlY3Rpb25bMF0pIHtcclxuICAgICAgICAgIHRoaXMuZGVzZWxlY3QodGhpcy5jdXJyZW50U2VsZWN0aW9uWzBdKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuY2xlYXJBbGxTZWxlY3Rpb24oKTtcclxuICAgIH1cclxuICAgIGNvbnNvbGUubG9nKCdTZWxlY3Rpb24gJywgdGhpcy5jdXJyZW50U2VsZWN0aW9uKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFNlbGVjdHMgdGhlIHNwZWNpZmllZCBlbGVtZW50IGJ5IGFkZGluZyBpdCB0byB0aGUgYXJyYXkgb2Ygc2VsZWN0ZWRcclxuICAgKiBlbGVtZW50cyBhbmQgc2V0dGluZyBpdHMgYXBwZWFyYW5jZSBhcyBzZWxlY3RlZC5cclxuICAgKiBAcGFyYW0gZWxlbWVudCBBbiBTVkcgc2VsZWN0YWJsZSBlbGVtZW50LlxyXG4gICAqL1xyXG4gIHNlbGVjdChlbGVtZW50OiBTVkdHRWxlbWVudCkge1xyXG4gICAgdGhpcy5jdXJyZW50U2VsZWN0aW9uLnB1c2goZWxlbWVudC5kYXRhc2V0LmlkKTtcclxuICAgIHRoaXMuYWRkU2VsZWN0aW9uQXBwZWFyYW5jZShlbGVtZW50KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIERlc2VsZWN0cyB0aGUgc3BlY2lmaWVkIGVsZW1lbnQgYnkgcmVtb3ZpbmcgaXQgZnJvbSB0aGUgYXJyYXkgb2Ygc2VsZWN0ZWQgZWxlbWVudHNcclxuICAgKiBhbmQgcmVtb3ZpbmcgdGhlIHNlbGVjdGVkIGFwcGVhcmFuY2UgaXQgaGFzIGluIHRoZSBhY3RpdmUgZHJhd2luZy5cclxuICAgKiBAcGFyYW0gZWxlbWVudElkIEFuIFNWRyBzZWxlY3RhYmxlIGVsZW1lbnQuXHJcbiAgICovXHJcbiAgZGVzZWxlY3QoZWxlbWVudElkOiBzdHJpbmcpIHtcclxuICAgIC8vY29uc3QgaW5kZXggPSB0aGlzLmN1cnJlbnRTZWxlY3Rpb24uZmluZEluZGV4KGVsID0+IGVsLmRhdGFzZXQuaWQgPT09IGVsZW1lbnQuZGF0YXNldC5pZCk7XHJcbiAgICBjb25zdCBpbmRleCA9IHRoaXMuY3VycmVudFNlbGVjdGlvbi5pbmRleE9mKGVsZW1lbnRJZCk7XHJcbiAgICBpZiAoaW5kZXggPiAtMSkge1xyXG4gICAgICB0aGlzLmN1cnJlbnRTZWxlY3Rpb24uc3BsaWNlKGluZGV4LCAxKTtcclxuICAgICAgY29uc3QgZWwgPSB0aGlzLndvcmtzcGFjZS5hY3RpdmVEcmF3aW5nLmNvbnRlbnQucXVlcnlTZWxlY3RvcignW2RhdGEtaWQ9XCInICsgZWxlbWVudElkICsgJ1wiXScpIGFzIFNWR0dFbGVtZW50O1xyXG4gICAgICBpZiAoZWwpIHRoaXMuY2xlYXJTZWxlY3Rpb25BcHBlYXJhbmNlKGVsKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFJlbW92ZXMgdGhlIHNlbGVjdGlvbiBhcHBlYXJhbmNlIGZyb20gYW55IHNlbGVjdGVkIGVsZW1lbnQgaW4gdGhlIHByb3ZpZGVkIGRyYXdpbmcuXHJcbiAgICogSXQgZG9lcyBub3QgcmVtb3ZlIGl0cyBpZCBmcm9tIHRoZSBhcnJheSBvZiBzZWxlY3RlZCBlbGVtZW50cy4gXHJcbiAgICovXHJcbiAgcmVtb3ZlRHJhd2luZ1NlbGVjdGlvbkFwcGVhcmFuY2UoZHJhd2luZzogRHJhd2luZykge1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmN1cnJlbnRTZWxlY3Rpb24ubGVuZ3RoOyBpKyspIHtcclxuICAgICAgY29uc3QgZWxlbWVudCA9IGRyYXdpbmcuY29udGVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1pZD1cIicgKyB0aGlzLmN1cnJlbnRTZWxlY3Rpb25baV0gKyAnXCJdJykgYXMgU1ZHR0VsZW1lbnQ7XHJcbiAgICAgIGlmIChlbGVtZW50KSB0aGlzLmNsZWFyU2VsZWN0aW9uQXBwZWFyYW5jZShlbGVtZW50KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEFkZHMgdGhlIHNlbGVjdGlvbiBhcHBlYXJhbmNlIHRvIGFueSBlbGVtZW50IGluIHRoZSBhcnJheSBvZiBzZWxlY3RlZCBlbGVtZW50cyB0aGF0XHJcbiAgICogaXMgaW4gdGhlIHByb3ZpZGVkIGRyYXdpbmcuXHJcbiAgICovXHJcbiAgYWRkRHJhd2luZ1NlbGVjdGlvbkFwcGVhcmFuY2UoZHJhd2luZzogRHJhd2luZykge1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmN1cnJlbnRTZWxlY3Rpb24ubGVuZ3RoOyBpKyspIHtcclxuICAgICAgY29uc3QgZWxlbWVudCA9IGRyYXdpbmcuY29udGVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1pZD1cIicgKyB0aGlzLmN1cnJlbnRTZWxlY3Rpb25baV0gKyAnXCJdJykgYXMgU1ZHR0VsZW1lbnQ7XHJcbiAgICAgIGlmIChlbGVtZW50KSB0aGlzLmFkZFNlbGVjdGlvbkFwcGVhcmFuY2UoZWxlbWVudCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBSZW1vdmVzIHRoZSBzZWxlY3RlZCBhcHBlYXJhbmNlIG9mIHRoZSBwcm92aWRlZCBlbGVtZW50LlxyXG4gICAqIEl0IGRvZXMgbm90IHJlbW92ZXMgdGhlIGVsZW1lbnQgZnJvbSB0aGUgYXJyYXkgb2Ygc2VsZWN0ZWQgZWxlbWVudHMuXHJcbiAgICogQHBhcmFtIGVsZW1lbnQgQW4gU1ZHIHNlbGVjdGFibGUgZWxlbWVudC5cclxuICAgKi9cclxuICBjbGVhclNlbGVjdGlvbkFwcGVhcmFuY2UoZWxlbWVudDogU1ZHR0VsZW1lbnQpIHtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZWxlbWVudC5jaGlsZHJlbi5sZW5ndGg7IGkrKylcclxuICAgICAgZWxlbWVudC5jaGlsZHJlbltpXS5jbGFzc0xpc3QucmVtb3ZlKCdzZWxlY3RlZCcpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogU2V0cyB0aGUgYXBwZWFyYW5jZSBvZiB0aGUgcHJvdmlkZWQgZWxlbWVudCBhcyBzZWxlY3RlZC5cclxuICAgKiBJdCBkb2VzIG5vdCBhZGQgdGhlIGVsZW1lbnQgdG8gdGhlIGFycmF5IG9mIHNlbGVjdGVkIGVsZW1lbnRzLlxyXG4gICAqIEBwYXJhbSBlbGVtZW50IEFuIFNWRyBzZWxlY3RhYmxlIGVsZW1lbnQuXHJcbiAgICovXHJcbiAgYWRkU2VsZWN0aW9uQXBwZWFyYW5jZShlbGVtZW50OiBTVkdHRWxlbWVudCkge1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBlbGVtZW50LmNoaWxkcmVuLmxlbmd0aDsgaSsrKVxyXG4gICAgICBlbGVtZW50LmNoaWxkcmVuW2ldLmNsYXNzTGlzdC5hZGQoJ3NlbGVjdGVkJyk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBSZW1vdmVzIHRoZSBzZWxlY3Rpb24gZnJvbSBhbGwgdGhlIHNlbGVjdGVkIGVsZW1lbnRzIGFzIHdlbGwgYXMgdGhlXHJcbiAgICogc2VsZWN0aW9uIGFwcGVhcmFuY2UgZnJvbSBhbGwgdGhlIHNlbGVjdGVkIGVsZW1lbnRzIGluIHRoZSBhY3RpdmUgZHJhd2luZy5cclxuICAgKi9cclxuICBjbGVhckFsbFNlbGVjdGlvbigpIHtcclxuICAgIGlmICh0aGlzLmN1cnJlbnRTZWxlY3Rpb24ubGVuZ3RoID4gMCkge1xyXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuY3VycmVudFNlbGVjdGlvbi5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGNvbnN0IGVsZW1lbnQgPSB0aGlzLndvcmtzcGFjZS5hY3RpdmVEcmF3aW5nLmNvbnRlbnQucXVlcnlTZWxlY3RvcignW2RhdGEtaWQ9XCInICsgdGhpcy5jdXJyZW50U2VsZWN0aW9uW2ldICsgJ1wiXScpIGFzIFNWR0dFbGVtZW50O1xyXG4gICAgICAgIGlmIChlbGVtZW50KSB0aGlzLmNsZWFyU2VsZWN0aW9uQXBwZWFyYW5jZShlbGVtZW50KTtcclxuICAgICAgfVxyXG4gICAgICB0aGlzLmN1cnJlbnRTZWxlY3Rpb24ubGVuZ3RoID0gMDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEdldHMgYW4gYXJyYXkgb2YgcmVmZXJlbmNlcyBvZiBTVkdHRWxlbWVudHMgaW4gdGhlIGRyYXdpbmcgdGhhdCBhcmUgY3VycmVudGx5IHNlbGVjdGVkLlxyXG4gICAqIE5lZWRlZCBiZWNhdXNlIG5vdCBhbGwgc2VsZWN0ZWQgZWxlbWVudHMgbWF5IGFwcGVhciBpbiBhIGRyYXdpbmcuIFxyXG4gICAqL1xyXG4gIGdldERyYXdpbmdTZWxlY3RlZEVsZW1lbnRzUmVmcyhkcmF3aW5nOiBEcmF3aW5nKSB7XHJcbiAgICBjb25zdCBzZWxlY3RlZEVsZW1lbnRzID0gW107XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuY3VycmVudFNlbGVjdGlvbi5sZW5ndGg7IGkrKykge1xyXG4gICAgICBjb25zdCBlbGVtZW50ID0gZHJhd2luZy5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWlkPVwiJyArIHRoaXMuY3VycmVudFNlbGVjdGlvbltpXSArICdcIl0nKTtcclxuICAgICAgaWYgKGVsZW1lbnQpIHNlbGVjdGVkRWxlbWVudHMucHVzaChlbGVtZW50KTtcclxuICAgIH1cclxuICAgIHJldHVybiBzZWxlY3RlZEVsZW1lbnRzO1xyXG4gIH1cclxuXHJcbiAga2lsbCgpIHtcclxuICAgIHN1cGVyLmtpbGwoKTtcclxuICAgIHRoaXMud29ya3NwYWNlLmRyYXdpbmdzQ29udGFpbmVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5tYW5hZ2VTZWxlY3Rpb24pO1xyXG4gICAgdGhpcy5jbGVhckFsbFNlbGVjdGlvbigpO1xyXG4gIH1cclxufSIsImltcG9ydCB7IEVsZW1lbnRTZWxlY3Rpb24gfSBmcm9tICcuL2VsZW1lbnRTZWxlY3Rpb24nO1xyXG5pbXBvcnQgeyBDb21tZW50IH0gZnJvbSAnLi8uLi9jb21tZW50JztcclxuaW1wb3J0IEFQSSBmcm9tICcuLy4uL2FwaSc7XHJcblxyXG5leHBvcnQgY2xhc3MgQWRkQ29tbWVudCBleHRlbmRzIEVsZW1lbnRTZWxlY3Rpb24ge1xyXG4gIGNvbnN0cnVjdG9yKG5hbWUsIHRvb2xCdG4sIHdvcmtzcGFjZSkge1xyXG4gICAgc3VwZXIobmFtZSwgdG9vbEJ0biwgd29ya3NwYWNlKTtcclxuICAgIGNvbnNvbGUubG9nKCdDb21tZW50IGVsZW1lbnQgdG9vbCBlbmFibGVkLicpO1xyXG4gICAgdGhpcy5tdWx0aXBsZVNlbGVjdGlvbiA9IHRydWU7XHJcbiAgICB0aGlzLmJvdW5kaW5nQm94O1xyXG4gICAgdGhpcy53YWl0aW5nRm9yQ29tbWVudCA9IGZhbHNlOyAvLyBUT0RPIHVzZSB0aGlzIGluc3RlYWQgdG8gYXZvaWQgY2hhbmdpbmcgZHJhd2luZz9cclxuICAgIHRoaXMuY2FuY2VsQ29tbWVudCA9IHRoaXMuY2FuY2VsQ29tbWVudC5iaW5kKHRoaXMpO1xyXG4gICAgd29ya3NwYWNlLmNvbW1lbnRGb3JtLmNhbmNlbENyZWF0ZUJ0bi5vbmNsaWNrID0gdGhpcy5jYW5jZWxDb21tZW50O1xyXG4gICAgaWYgKHdvcmtzcGFjZS5wZXJtaXNzaW9ucy5sZW5ndGggPiAxKSB7IC8vIFRoZXJlIGlzIGFsd2F5cyBhdCBsZWFzdCB0aGUgb3duZXIuXHJcbiAgICAgIGNvbnN0IG1lbWJlcnNFbWFpbHMgPSBbXTtcclxuICAgICAgY29uc3QgY3VycmVudFVzZXJFbWFpbCA9IHdpbmRvdy5nZXRDdXJyZW50VXNlcigpLmVtYWlsQWRkcmVzcztcclxuICAgICAgd29ya3NwYWNlLnBlcm1pc3Npb25zLmZvckVhY2gobWVtYmVyID0+IHtcclxuICAgICAgICBpZiAobWVtYmVyLmVtYWlsQWRkcmVzcyAhPT0gY3VycmVudFVzZXJFbWFpbCkge1xyXG4gICAgICAgICAgbWVtYmVyc0VtYWlscy5wdXNoKGA8b3B0aW9uIHZhbHVlPVwiJHttZW1iZXIuZW1haWxBZGRyZXNzfVwiPiR7bWVtYmVyLmRpc3BsYXlOYW1lfTwvb3B0aW9uPmApO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICAgIHdvcmtzcGFjZS5jb21tZW50Rm9ybS5tZW50aW9uc0lucHV0LmlubmVySFRNTCA9IG1lbWJlcnNFbWFpbHMuam9pbignJyk7XHJcbiAgICAgIHdvcmtzcGFjZS5jb21tZW50Rm9ybS5zaG93TWVudGlvbnNTZWN0aW9uKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB3b3Jrc3BhY2UuY29tbWVudEZvcm0uaGlkZU1lbnRpb25zU2VjdGlvbigpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5hZGRDb21tZW50ID0gdGhpcy5hZGRDb21tZW50LmJpbmQodGhpcyk7XHJcbiAgICB3b3Jrc3BhY2UuY29tbWVudEZvcm0uYWRkQ29tbWVudEJ0bi5vbmNsaWNrID0gdGhpcy5hZGRDb21tZW50O1xyXG4gICAgLy8gSXQgY291bGQgYmUgZGlzYWJsZWQgYW5kIG9yIGZ1bGwgaWYgdGhlIHByZXZpb3VzIHVzZSB3YXMgdmlldyBtb2RlLlxyXG4gICAgd29ya3NwYWNlLmNvbW1lbnRGb3JtLmVuYWJsZUZvcm0oKTtcclxuICAgIHdvcmtzcGFjZS5jb21tZW50Rm9ybS5yZXNldCgpO1xyXG4gICAgLy8gVGhpcyBjb3VsZCBiZSBhIHByb3BlcnR5IG9mIHRoZSBUb29sIGNsYXNzLlxyXG4gICAgdGhpcy5oYXNVc2VkUGFuZWwgPSBmYWxzZTtcclxuICB9XHJcblxyXG5cclxuICAvKipcclxuICAgKiBFeHRlbmRzIHRoZSBtZXRob2Qgb2YgdGhlIHN1cGVyIGNsYXNzIHRvIGdldCB0aGUgc2VsZWN0ZWQgZWxlbWVudC5cclxuICAgKiBAcGFyYW0ge01vdXNlRXZlbnR9IGUgVGhlIGNsaWNrIGV2ZW50LlxyXG4gICAqL1xyXG4gIG1hbmFnZVNlbGVjdGlvbihlKSB7XHJcbiAgICBzdXBlci5tYW5hZ2VTZWxlY3Rpb24oZSk7XHJcbiAgICBpZiAodGhpcy5jdXJyZW50U2VsZWN0aW9uLmxlbmd0aCA+IDApIHtcclxuICAgICAgdGhpcy53YWl0aW5nRm9yQ29tbWVudCA9IHRydWU7XHJcbiAgICAgIC8vIFNob3cgdGhlIGZvcm0gdG8gYWRkIHRoZSBjb21tZW50LlxyXG4gICAgICAvLyBUT0RPIE9wZW4gdGhlIHBhbmVsIHdoZW4gYWN0aXZhdGluZyB0aGUgdG9vbCBpbnN0ZWFkLlxyXG4gICAgICB0aGlzLndvcmtzcGFjZS5jb21tZW50Rm9ybS5idXR0b25zVmlzaWJpbGl0eU1vZGUoJ2NyZWF0ZScpO1xyXG4gICAgICB0aGlzLndvcmtzcGFjZS5tYWluUGFuZWwuYWRkU2VjdGlvbignQ29tbWVudCcsIHRoaXMud29ya3NwYWNlLmNvbW1lbnRGb3JtLmZvcm1FbGVtZW50KTtcclxuICAgICAgdGhpcy53b3Jrc3BhY2UubWFpblBhbmVsLm9wZW4oKTtcclxuICAgICAgdGhpcy5oYXNVc2VkUGFuZWwgPSB0cnVlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy53YWl0aW5nRm9yQ29tbWVudCA9IGZhbHNlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcblxyXG4gIGFkZENvbW1lbnQoKSB7XHJcbiAgICBpZiAodGhpcy5jdXJyZW50U2VsZWN0aW9uLmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xyXG4gICAgLy8gSWYgJ2FjdGl2ZURyYXdpbmcnIGRvZXNudCBoYXZlIGEgZ3JvdXAgZm9yIGNvbW1lbnRzIGNyZWF0ZSBpdC5cclxuICAgIGlmICh0aGlzLndvcmtzcGFjZS5hY3RpdmVEcmF3aW5nLmNvbW1lbnRzR3JvdXAgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICB0aGlzLndvcmtzcGFjZS5hY3RpdmVEcmF3aW5nLmNyZWF0ZUNvbW1lbnRzR3JvdXAoKTtcclxuICAgIH1cclxuICAgIC8vIE1lbnRpb25zIGlzIG9ubHkgdHJlYXRlZCBpZiB0aGVyZSBpcyBtb3JlIHRoYW4gb25lIG1lbWJlciBpbiB0aGUgdGVhbS5cclxuICAgIGxldCBzZWxlY3RlZEVtYWlscztcclxuICAgIGlmICh0aGlzLndvcmtzcGFjZS5wZXJtaXNzaW9ucy5sZW5ndGggPiAxKSB7IC8vIHRoZXJlIGlzIGFsd2F5cyBhdCBsZWFzdCB0aGUgb3duZXJcclxuICAgICAgc2VsZWN0ZWRFbWFpbHMgPSB0aGlzLndvcmtzcGFjZS5jb21tZW50Rm9ybS5nZXRTZWxlY3RlZE1lbWJlcnMoKTtcclxuICAgICAgaWYgKHNlbGVjdGVkRW1haWxzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICBjb25zdCBjdXJyZW50VXNlck5hbWUgPSB3aW5kb3cuZ2V0Q3VycmVudFVzZXIoKS5kaXNwbGF5TmFtZTtcclxuICAgICAgICBjb25zdCBjdXJyZW50VXNlclBob3RvID0gd2luZG93LmdldEN1cnJlbnRVc2VyKCkucGhvdG9MaW5rO1xyXG4gICAgICAgIHRoaXMud29ya3NwYWNlLnBlbmRpbmdOb3RpZmljYXRpb25zVG9TZW5kLnB1c2goe1xyXG4gICAgICAgICAgZW1haWxzOiBzZWxlY3RlZEVtYWlscyxcclxuICAgICAgICAgIHVzZXJOYW1lOiBjdXJyZW50VXNlck5hbWUsXHJcbiAgICAgICAgICB1c2VyUGhvdG86IGN1cnJlbnRVc2VyUGhvdG8sXHJcbiAgICAgICAgICB0ZXh0Q29udGVudDogdGhpcy53b3Jrc3BhY2UuY29tbWVudEZvcm0udGV4dElucHV0LnZhbHVlLFxyXG4gICAgICAgICAgcHJvamVjdE5hbWU6IHRoaXMud29ya3NwYWNlLnByb2plY3ROYW1lLFxyXG4gICAgICAgICAgcHJvamVjdElkOiB0aGlzLndvcmtzcGFjZS5wcm9qZWN0SWRcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgY29uc3QgY29tbWVudCA9IG5ldyBDb21tZW50KHRoaXMuY3VycmVudFNlbGVjdGlvbiwgdGhpcy53b3Jrc3BhY2UuY29tbWVudEZvcm0udGV4dElucHV0LnZhbHVlLCBzZWxlY3RlZEVtYWlscyk7XHJcbiAgICAvLyBHZXQgcmVmZXJlbmNlcyB0byB0aGUgZWxlbWVudHMgaW4gdGhlIGRyYXdpbmcgdG8gcGFzcyB0aGVtXHJcbiAgICBjb25zdCBzZWxFbGVtZW50c1JlZiA9IHRoaXMuZ2V0RHJhd2luZ1NlbGVjdGVkRWxlbWVudHNSZWZzKHRoaXMud29ya3NwYWNlLmFjdGl2ZURyYXdpbmcpO1xyXG4gICAgY29tbWVudC5jcmVhdGVSZXByZXNlbnRhdGlvbih0aGlzLndvcmtzcGFjZS5hY3RpdmVEcmF3aW5nLmNvbW1lbnRzR3JvdXAsIHNlbEVsZW1lbnRzUmVmKTsgLy8gVE9ETyByZXBsYWNlIGJ5IHRoZSBuZXcgbWV0aG9kISEhXHJcbiAgICAvLyBBZGQgY29tbWVudCBpZCB0byBhbGwgdGhlIGVsZW1lbnQgYXJyYXlzIGluIHRoZSBvYmogV29ya3NwYWNlLmVsZW1lbnRzQ29tbWVudHMuXHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuY3VycmVudFNlbGVjdGlvbi5sZW5ndGg7IGkrKykge1xyXG4gICAgICBpZiAoIXRoaXMud29ya3NwYWNlLmVsZW1lbnRzQ29tbWVudHMuaGFzT3duUHJvcGVydHkodGhpcy5jdXJyZW50U2VsZWN0aW9uW2ldKSlcclxuICAgICAgICB0aGlzLndvcmtzcGFjZS5lbGVtZW50c0NvbW1lbnRzW3RoaXMuY3VycmVudFNlbGVjdGlvbltpXV0gPSBbXTtcclxuICAgICAgdGhpcy53b3Jrc3BhY2UuZWxlbWVudHNDb21tZW50c1t0aGlzLmN1cnJlbnRTZWxlY3Rpb25baV1dLnB1c2goY29tbWVudC5pZCk7XHJcbiAgICB9XHJcbiAgICBjb25zb2xlLmxvZygnZWxlbWVudHNDb21tZW50cyAnLCB0aGlzLndvcmtzcGFjZS5lbGVtZW50c0NvbW1lbnRzKTtcclxuICAgIHRoaXMud29ya3NwYWNlLmNvbW1lbnRzLnB1c2goY29tbWVudCk7XHJcbiAgICBjb25zb2xlLmxvZyh0aGlzLndvcmtzcGFjZS5jb21tZW50cyk7XHJcbiAgICB0aGlzLndvcmtzcGFjZS5jb21tZW50Rm9ybS5yZXNldCgpO1xyXG4gICAgdGhpcy53b3Jrc3BhY2UubWFpblBhbmVsLmNsb3NlKCk7XHJcbiAgICB0aGlzLndhaXRpbmdGb3JDb21tZW50ID0gZmFsc2U7XHJcbiAgICAvLyBXb3Jrc3BhY2UgbWV0aG9kIHRvIGluZGljYXRlIHRoYXQgdGhlcmUgYXJlIHVuc2F2ZWQgY2hhbmdlcyBvbiBjb21tZW50cy5cclxuICAgIHRoaXMud29ya3NwYWNlLnVuc2F2ZWRDb21tZW50c0RhdGEoKTtcclxuICAgIHRoaXMud29ya3NwYWNlLmRyYXdpbmdzLmZvckVhY2goZHJhd2luZyA9PiB7XHJcbiAgICAgIGlmIChkcmF3aW5nLmlkICE9PSB0aGlzLndvcmtzcGFjZS5hY3RpdmVEcmF3aW5nLmlkKSB7XHJcbiAgICAgICAgZHJhd2luZy5jb21tZW50c0NoYW5nZWQgPSB0cnVlO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICAgIHN1cGVyLmNsZWFyQWxsU2VsZWN0aW9uKCk7XHJcbiAgfVxyXG5cclxuXHJcbiAgY2FuY2VsQ29tbWVudCgpIHtcclxuICAgIHRoaXMud29ya3NwYWNlLm1haW5QYW5lbC5jbG9zZSgpO1xyXG4gICAgdGhpcy53b3Jrc3BhY2UuY29tbWVudEZvcm0ucmVzZXQoKTtcclxuICAgIHRoaXMud2FpdGluZ0ZvckNvbW1lbnQgPSBmYWxzZTtcclxuICAgIHN1cGVyLmNsZWFyQWxsU2VsZWN0aW9uKCk7XHJcbiAgfVxyXG5cclxuXHJcbiAga2lsbCgpIHtcclxuICAgIHN1cGVyLmtpbGwoKTtcclxuICAgIGNvbnNvbGUubG9nKCdDb21tZW50IGVsZW1lbnQgdG9vbCBkaXNhYmxlZC4nKTtcclxuICAgIGlmICh0aGlzLndhaXRpbmdGb3JDb21tZW50KSB7XHJcbiAgICAgIHRoaXMud29ya3NwYWNlLmNvbW1lbnRGb3JtLnJlc2V0KCk7XHJcbiAgICAgIHRoaXMud29ya3NwYWNlLm1haW5QYW5lbC5jbG9zZSgpO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMuaGFzVXNlZFBhbmVsKSB7XHJcbiAgICAgIHRoaXMud29ya3NwYWNlLm1haW5QYW5lbC5yZW1vdmVTZWN0aW9uKCdDb21tZW50Jyk7XHJcbiAgICB9XHJcbiAgICAvLyBSZW1vdmUgdGhlIHRvb2wgZXZlbnQgbGlzdGVuZXJzLlxyXG4gICAgdGhpcy53b3Jrc3BhY2UuY29tbWVudEZvcm0uYWRkQ29tbWVudEJ0bi5vbmNsaWNrID0gbnVsbDtcclxuICAgIHRoaXMud29ya3NwYWNlLmNvbW1lbnRGb3JtLmNhbmNlbENyZWF0ZUJ0bi5vbmNsaWNrID0gbnVsbDtcclxuICB9XHJcbn0iLCJpbXBvcnQgZmlyZWJhc2UgZnJvbSAnQGZpcmViYXNlL2FwcCc7XG5pbXBvcnQgeyBDb21wb25lbnQgfSBmcm9tICdAZmlyZWJhc2UvY29tcG9uZW50JztcbmltcG9ydCB7IF9fYXdhaXRlciwgX19nZW5lcmF0b3IsIF9fc3ByZWFkLCBfX2Fzc2lnbiwgX192YWx1ZXMgfSBmcm9tICd0c2xpYic7XG5pbXBvcnQgeyBFcnJvckZhY3RvcnksIEZpcmViYXNlRXJyb3IgfSBmcm9tICdAZmlyZWJhc2UvdXRpbCc7XG5pbXBvcnQgeyBvcGVuRGIgfSBmcm9tICdpZGInO1xuXG52YXIgbmFtZSA9IFwiQGZpcmViYXNlL2luc3RhbGxhdGlvbnNcIjtcbnZhciB2ZXJzaW9uID0gXCIwLjMuOFwiO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxudmFyIFBFTkRJTkdfVElNRU9VVF9NUyA9IDEwMDAwO1xyXG52YXIgUEFDS0FHRV9WRVJTSU9OID0gXCJ3OlwiICsgdmVyc2lvbjtcclxudmFyIElOVEVSTkFMX0FVVEhfVkVSU0lPTiA9ICdGSVNfdjInO1xyXG52YXIgSU5TVEFMTEFUSU9OU19BUElfVVJMID0gJ2h0dHBzOi8vZmlyZWJhc2VpbnN0YWxsYXRpb25zLmdvb2dsZWFwaXMuY29tL3YxJztcclxudmFyIFRPS0VOX0VYUElSQVRJT05fQlVGRkVSID0gNjAgKiA2MCAqIDEwMDA7IC8vIE9uZSBob3VyXHJcbnZhciBTRVJWSUNFID0gJ2luc3RhbGxhdGlvbnMnO1xyXG52YXIgU0VSVklDRV9OQU1FID0gJ0luc3RhbGxhdGlvbnMnO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxudmFyIF9hO1xyXG52YXIgRVJST1JfREVTQ1JJUFRJT05fTUFQID0gKF9hID0ge30sXHJcbiAgICBfYVtcIm1pc3NpbmctYXBwLWNvbmZpZy12YWx1ZXNcIiAvKiBNSVNTSU5HX0FQUF9DT05GSUdfVkFMVUVTICovXSA9ICdNaXNzaW5nIEFwcCBjb25maWd1cmF0aW9uIHZhbHVlOiBcInskdmFsdWVOYW1lfVwiJyxcclxuICAgIF9hW1wibm90LXJlZ2lzdGVyZWRcIiAvKiBOT1RfUkVHSVNURVJFRCAqL10gPSAnRmlyZWJhc2UgSW5zdGFsbGF0aW9uIGlzIG5vdCByZWdpc3RlcmVkLicsXHJcbiAgICBfYVtcImluc3RhbGxhdGlvbi1ub3QtZm91bmRcIiAvKiBJTlNUQUxMQVRJT05fTk9UX0ZPVU5EICovXSA9ICdGaXJlYmFzZSBJbnN0YWxsYXRpb24gbm90IGZvdW5kLicsXHJcbiAgICBfYVtcInJlcXVlc3QtZmFpbGVkXCIgLyogUkVRVUVTVF9GQUlMRUQgKi9dID0gJ3skcmVxdWVzdE5hbWV9IHJlcXVlc3QgZmFpbGVkIHdpdGggZXJyb3IgXCJ7JHNlcnZlckNvZGV9IHskc2VydmVyU3RhdHVzfTogeyRzZXJ2ZXJNZXNzYWdlfVwiJyxcclxuICAgIF9hW1wiYXBwLW9mZmxpbmVcIiAvKiBBUFBfT0ZGTElORSAqL10gPSAnQ291bGQgbm90IHByb2Nlc3MgcmVxdWVzdC4gQXBwbGljYXRpb24gb2ZmbGluZS4nLFxyXG4gICAgX2FbXCJkZWxldGUtcGVuZGluZy1yZWdpc3RyYXRpb25cIiAvKiBERUxFVEVfUEVORElOR19SRUdJU1RSQVRJT04gKi9dID0gXCJDYW4ndCBkZWxldGUgaW5zdGFsbGF0aW9uIHdoaWxlIHRoZXJlIGlzIGEgcGVuZGluZyByZWdpc3RyYXRpb24gcmVxdWVzdC5cIixcclxuICAgIF9hKTtcclxudmFyIEVSUk9SX0ZBQ1RPUlkgPSBuZXcgRXJyb3JGYWN0b3J5KFNFUlZJQ0UsIFNFUlZJQ0VfTkFNRSwgRVJST1JfREVTQ1JJUFRJT05fTUFQKTtcclxuLyoqIFJldHVybnMgdHJ1ZSBpZiBlcnJvciBpcyBhIEZpcmViYXNlRXJyb3IgdGhhdCBpcyBiYXNlZCBvbiBhbiBlcnJvciBmcm9tIHRoZSBzZXJ2ZXIuICovXHJcbmZ1bmN0aW9uIGlzU2VydmVyRXJyb3IoZXJyb3IpIHtcclxuICAgIHJldHVybiAoZXJyb3IgaW5zdGFuY2VvZiBGaXJlYmFzZUVycm9yICYmXHJcbiAgICAgICAgZXJyb3IuY29kZS5pbmNsdWRlcyhcInJlcXVlc3QtZmFpbGVkXCIgLyogUkVRVUVTVF9GQUlMRUQgKi8pKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gZ2V0SW5zdGFsbGF0aW9uc0VuZHBvaW50KF9hKSB7XHJcbiAgICB2YXIgcHJvamVjdElkID0gX2EucHJvamVjdElkO1xyXG4gICAgcmV0dXJuIElOU1RBTExBVElPTlNfQVBJX1VSTCArIFwiL3Byb2plY3RzL1wiICsgcHJvamVjdElkICsgXCIvaW5zdGFsbGF0aW9uc1wiO1xyXG59XHJcbmZ1bmN0aW9uIGV4dHJhY3RBdXRoVG9rZW5JbmZvRnJvbVJlc3BvbnNlKHJlc3BvbnNlKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIHRva2VuOiByZXNwb25zZS50b2tlbixcclxuICAgICAgICByZXF1ZXN0U3RhdHVzOiAyIC8qIENPTVBMRVRFRCAqLyxcclxuICAgICAgICBleHBpcmVzSW46IGdldEV4cGlyZXNJbkZyb21SZXNwb25zZUV4cGlyZXNJbihyZXNwb25zZS5leHBpcmVzSW4pLFxyXG4gICAgICAgIGNyZWF0aW9uVGltZTogRGF0ZS5ub3coKVxyXG4gICAgfTtcclxufVxyXG5mdW5jdGlvbiBnZXRFcnJvckZyb21SZXNwb25zZShyZXF1ZXN0TmFtZSwgcmVzcG9uc2UpIHtcclxuICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgcmVzcG9uc2VKc29uLCBlcnJvckRhdGE7XHJcbiAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6IHJldHVybiBbNCAvKnlpZWxkKi8sIHJlc3BvbnNlLmpzb24oKV07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2VKc29uID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGVycm9yRGF0YSA9IHJlc3BvbnNlSnNvbi5lcnJvcjtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJyZXF1ZXN0LWZhaWxlZFwiIC8qIFJFUVVFU1RfRkFJTEVEICovLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1ZXN0TmFtZTogcmVxdWVzdE5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXJ2ZXJDb2RlOiBlcnJvckRhdGEuY29kZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlcnZlck1lc3NhZ2U6IGVycm9yRGF0YS5tZXNzYWdlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VydmVyU3RhdHVzOiBlcnJvckRhdGEuc3RhdHVzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn1cclxuZnVuY3Rpb24gZ2V0SGVhZGVycyhfYSkge1xyXG4gICAgdmFyIGFwaUtleSA9IF9hLmFwaUtleTtcclxuICAgIHJldHVybiBuZXcgSGVhZGVycyh7XHJcbiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICAgICBBY2NlcHQ6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICAgICAneC1nb29nLWFwaS1rZXknOiBhcGlLZXlcclxuICAgIH0pO1xyXG59XHJcbmZ1bmN0aW9uIGdldEhlYWRlcnNXaXRoQXV0aChhcHBDb25maWcsIF9hKSB7XHJcbiAgICB2YXIgcmVmcmVzaFRva2VuID0gX2EucmVmcmVzaFRva2VuO1xyXG4gICAgdmFyIGhlYWRlcnMgPSBnZXRIZWFkZXJzKGFwcENvbmZpZyk7XHJcbiAgICBoZWFkZXJzLmFwcGVuZCgnQXV0aG9yaXphdGlvbicsIGdldEF1dGhvcml6YXRpb25IZWFkZXIocmVmcmVzaFRva2VuKSk7XHJcbiAgICByZXR1cm4gaGVhZGVycztcclxufVxyXG4vKipcclxuICogQ2FsbHMgdGhlIHBhc3NlZCBpbiBmZXRjaCB3cmFwcGVyIGFuZCByZXR1cm5zIHRoZSByZXNwb25zZS5cclxuICogSWYgdGhlIHJldHVybmVkIHJlc3BvbnNlIGhhcyBhIHN0YXR1cyBvZiA1eHgsIHJlLXJ1bnMgdGhlIGZ1bmN0aW9uIG9uY2UgYW5kXHJcbiAqIHJldHVybnMgdGhlIHJlc3BvbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gcmV0cnlJZlNlcnZlckVycm9yKGZuKSB7XHJcbiAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHJlc3VsdDtcclxuICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMDogcmV0dXJuIFs0IC8qeWllbGQqLywgZm4oKV07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuc3RhdHVzID49IDUwMCAmJiByZXN1bHQuc3RhdHVzIDwgNjAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEludGVybmFsIFNlcnZlciBFcnJvci4gUmV0cnkgcmVxdWVzdC5cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIGZuKCldO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgcmVzdWx0XTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn1cclxuZnVuY3Rpb24gZ2V0RXhwaXJlc0luRnJvbVJlc3BvbnNlRXhwaXJlc0luKHJlc3BvbnNlRXhwaXJlc0luKSB7XHJcbiAgICAvLyBUaGlzIHdvcmtzIGJlY2F1c2UgdGhlIHNlcnZlciB3aWxsIG5ldmVyIHJlc3BvbmQgd2l0aCBmcmFjdGlvbnMgb2YgYSBzZWNvbmQuXHJcbiAgICByZXR1cm4gTnVtYmVyKHJlc3BvbnNlRXhwaXJlc0luLnJlcGxhY2UoJ3MnLCAnMDAwJykpO1xyXG59XHJcbmZ1bmN0aW9uIGdldEF1dGhvcml6YXRpb25IZWFkZXIocmVmcmVzaFRva2VuKSB7XHJcbiAgICByZXR1cm4gSU5URVJOQUxfQVVUSF9WRVJTSU9OICsgXCIgXCIgKyByZWZyZXNoVG9rZW47XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIGNyZWF0ZUluc3RhbGxhdGlvblJlcXVlc3QoYXBwQ29uZmlnLCBfYSkge1xyXG4gICAgdmFyIGZpZCA9IF9hLmZpZDtcclxuICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgZW5kcG9pbnQsIGhlYWRlcnMsIGJvZHksIHJlcXVlc3QsIHJlc3BvbnNlLCByZXNwb25zZVZhbHVlLCByZWdpc3RlcmVkSW5zdGFsbGF0aW9uRW50cnk7XHJcbiAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYikge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKF9iLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgZW5kcG9pbnQgPSBnZXRJbnN0YWxsYXRpb25zRW5kcG9pbnQoYXBwQ29uZmlnKTtcclxuICAgICAgICAgICAgICAgICAgICBoZWFkZXJzID0gZ2V0SGVhZGVycyhhcHBDb25maWcpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJvZHkgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpZDogZmlkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhdXRoVmVyc2lvbjogSU5URVJOQUxfQVVUSF9WRVJTSU9OLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhcHBJZDogYXBwQ29uZmlnLmFwcElkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZGtWZXJzaW9uOiBQQUNLQUdFX1ZFUlNJT05cclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgIHJlcXVlc3QgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShib2R5KVxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgcmV0cnlJZlNlcnZlckVycm9yKGZ1bmN0aW9uICgpIHsgcmV0dXJuIGZldGNoKGVuZHBvaW50LCByZXF1ZXN0KTsgfSldO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gX2Iuc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghcmVzcG9uc2Uub2spIHJldHVybiBbMyAvKmJyZWFrKi8sIDNdO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHJlc3BvbnNlLmpzb24oKV07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2VWYWx1ZSA9IF9iLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICByZWdpc3RlcmVkSW5zdGFsbGF0aW9uRW50cnkgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpZDogcmVzcG9uc2VWYWx1ZS5maWQgfHwgZmlkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWdpc3RyYXRpb25TdGF0dXM6IDIgLyogQ09NUExFVEVEICovLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWZyZXNoVG9rZW46IHJlc3BvbnNlVmFsdWUucmVmcmVzaFRva2VuLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhdXRoVG9rZW46IGV4dHJhY3RBdXRoVG9rZW5JbmZvRnJvbVJlc3BvbnNlKHJlc3BvbnNlVmFsdWUuYXV0aFRva2VuKVxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHJlZ2lzdGVyZWRJbnN0YWxsYXRpb25FbnRyeV07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDM6IHJldHVybiBbNCAvKnlpZWxkKi8sIGdldEVycm9yRnJvbVJlc3BvbnNlKCdDcmVhdGUgSW5zdGFsbGF0aW9uJywgcmVzcG9uc2UpXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNDogdGhyb3cgX2Iuc2VudCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqIFJldHVybnMgYSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgYWZ0ZXIgZ2l2ZW4gdGltZSBwYXNzZXMuICovXHJcbmZ1bmN0aW9uIHNsZWVwKG1zKSB7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcclxuICAgICAgICBzZXRUaW1lb3V0KHJlc29sdmUsIG1zKTtcclxuICAgIH0pO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBidWZmZXJUb0Jhc2U2NFVybFNhZmUoYXJyYXkpIHtcclxuICAgIHZhciBiNjQgPSBidG9hKFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkoU3RyaW5nLCBfX3NwcmVhZChhcnJheSkpKTtcclxuICAgIHJldHVybiBiNjQucmVwbGFjZSgvXFwrL2csICctJykucmVwbGFjZSgvXFwvL2csICdfJyk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnZhciBWQUxJRF9GSURfUEFUVEVSTiA9IC9eW2NkZWZdW1xcdy1dezIxfSQvO1xyXG52YXIgSU5WQUxJRF9GSUQgPSAnJztcclxuLyoqXHJcbiAqIEdlbmVyYXRlcyBhIG5ldyBGSUQgdXNpbmcgcmFuZG9tIHZhbHVlcyBmcm9tIFdlYiBDcnlwdG8gQVBJLlxyXG4gKiBSZXR1cm5zIGFuIGVtcHR5IHN0cmluZyBpZiBGSUQgZ2VuZXJhdGlvbiBmYWlscyBmb3IgYW55IHJlYXNvbi5cclxuICovXHJcbmZ1bmN0aW9uIGdlbmVyYXRlRmlkKCkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICAvLyBBIHZhbGlkIEZJRCBoYXMgZXhhY3RseSAyMiBiYXNlNjQgY2hhcmFjdGVycywgd2hpY2ggaXMgMTMyIGJpdHMsIG9yIDE2LjVcclxuICAgICAgICAvLyBieXRlcy4gb3VyIGltcGxlbWVudGF0aW9uIGdlbmVyYXRlcyBhIDE3IGJ5dGUgYXJyYXkgaW5zdGVhZC5cclxuICAgICAgICB2YXIgZmlkQnl0ZUFycmF5ID0gbmV3IFVpbnQ4QXJyYXkoMTcpO1xyXG4gICAgICAgIHZhciBjcnlwdG9fMSA9IHNlbGYuY3J5cHRvIHx8IHNlbGYubXNDcnlwdG87XHJcbiAgICAgICAgY3J5cHRvXzEuZ2V0UmFuZG9tVmFsdWVzKGZpZEJ5dGVBcnJheSk7XHJcbiAgICAgICAgLy8gUmVwbGFjZSB0aGUgZmlyc3QgNCByYW5kb20gYml0cyB3aXRoIHRoZSBjb25zdGFudCBGSUQgaGVhZGVyIG9mIDBiMDExMS5cclxuICAgICAgICBmaWRCeXRlQXJyYXlbMF0gPSAxMTIgKyAoZmlkQnl0ZUFycmF5WzBdICUgMTYpO1xyXG4gICAgICAgIHZhciBmaWQgPSBlbmNvZGUoZmlkQnl0ZUFycmF5KTtcclxuICAgICAgICByZXR1cm4gVkFMSURfRklEX1BBVFRFUk4udGVzdChmaWQpID8gZmlkIDogSU5WQUxJRF9GSUQ7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoX2EpIHtcclxuICAgICAgICAvLyBGSUQgZ2VuZXJhdGlvbiBlcnJvcmVkXHJcbiAgICAgICAgcmV0dXJuIElOVkFMSURfRklEO1xyXG4gICAgfVxyXG59XHJcbi8qKiBDb252ZXJ0cyBhIEZJRCBVaW50OEFycmF5IHRvIGEgYmFzZTY0IHN0cmluZyByZXByZXNlbnRhdGlvbi4gKi9cclxuZnVuY3Rpb24gZW5jb2RlKGZpZEJ5dGVBcnJheSkge1xyXG4gICAgdmFyIGI2NFN0cmluZyA9IGJ1ZmZlclRvQmFzZTY0VXJsU2FmZShmaWRCeXRlQXJyYXkpO1xyXG4gICAgLy8gUmVtb3ZlIHRoZSAyM3JkIGNoYXJhY3RlciB0aGF0IHdhcyBhZGRlZCBiZWNhdXNlIG9mIHRoZSBleHRyYSA0IGJpdHMgYXQgdGhlXHJcbiAgICAvLyBlbmQgb2Ygb3VyIDE3IGJ5dGUgYXJyYXksIGFuZCB0aGUgJz0nIHBhZGRpbmcuXHJcbiAgICByZXR1cm4gYjY0U3RyaW5nLnN1YnN0cigwLCAyMik7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnZhciBEQVRBQkFTRV9OQU1FID0gJ2ZpcmViYXNlLWluc3RhbGxhdGlvbnMtZGF0YWJhc2UnO1xyXG52YXIgREFUQUJBU0VfVkVSU0lPTiA9IDE7XHJcbnZhciBPQkpFQ1RfU1RPUkVfTkFNRSA9ICdmaXJlYmFzZS1pbnN0YWxsYXRpb25zLXN0b3JlJztcclxudmFyIGRiUHJvbWlzZSA9IG51bGw7XHJcbmZ1bmN0aW9uIGdldERiUHJvbWlzZSgpIHtcclxuICAgIGlmICghZGJQcm9taXNlKSB7XHJcbiAgICAgICAgZGJQcm9taXNlID0gb3BlbkRiKERBVEFCQVNFX05BTUUsIERBVEFCQVNFX1ZFUlNJT04sIGZ1bmN0aW9uICh1cGdyYWRlREIpIHtcclxuICAgICAgICAgICAgLy8gV2UgZG9uJ3QgdXNlICdicmVhaycgaW4gdGhpcyBzd2l0Y2ggc3RhdGVtZW50LCB0aGUgZmFsbC10aHJvdWdoXHJcbiAgICAgICAgICAgIC8vIGJlaGF2aW9yIGlzIHdoYXQgd2Ugd2FudCwgYmVjYXVzZSBpZiB0aGVyZSBhcmUgbXVsdGlwbGUgdmVyc2lvbnMgYmV0d2VlblxyXG4gICAgICAgICAgICAvLyB0aGUgb2xkIHZlcnNpb24gYW5kIHRoZSBjdXJyZW50IHZlcnNpb24sIHdlIHdhbnQgQUxMIHRoZSBtaWdyYXRpb25zXHJcbiAgICAgICAgICAgIC8vIHRoYXQgY29ycmVzcG9uZCB0byB0aG9zZSB2ZXJzaW9ucyB0byBydW4sIG5vdCBvbmx5IHRoZSBsYXN0IG9uZS5cclxuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGRlZmF1bHQtY2FzZVxyXG4gICAgICAgICAgICBzd2l0Y2ggKHVwZ3JhZGVEQi5vbGRWZXJzaW9uKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgdXBncmFkZURCLmNyZWF0ZU9iamVjdFN0b3JlKE9CSkVDVF9TVE9SRV9OQU1FKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGRiUHJvbWlzZTtcclxufVxyXG4vKiogQXNzaWducyBvciBvdmVyd3JpdGVzIHRoZSByZWNvcmQgZm9yIHRoZSBnaXZlbiBrZXkgd2l0aCB0aGUgZ2l2ZW4gdmFsdWUuICovXHJcbmZ1bmN0aW9uIHNldChhcHBDb25maWcsIHZhbHVlKSB7XHJcbiAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGtleSwgZGIsIHR4O1xyXG4gICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgIGtleSA9IGdldEtleShhcHBDb25maWcpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIGdldERiUHJvbWlzZSgpXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICBkYiA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICB0eCA9IGRiLnRyYW5zYWN0aW9uKE9CSkVDVF9TVE9SRV9OQU1FLCAncmVhZHdyaXRlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdHgub2JqZWN0U3RvcmUoT0JKRUNUX1NUT1JFX05BTUUpLnB1dCh2YWx1ZSwga2V5KV07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHR4LmNvbXBsZXRlXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHZhbHVlXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn1cclxuLyoqIFJlbW92ZXMgcmVjb3JkKHMpIGZyb20gdGhlIG9iamVjdFN0b3JlIHRoYXQgbWF0Y2ggdGhlIGdpdmVuIGtleS4gKi9cclxuZnVuY3Rpb24gcmVtb3ZlKGFwcENvbmZpZykge1xyXG4gICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBrZXksIGRiLCB0eDtcclxuICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICBrZXkgPSBnZXRLZXkoYXBwQ29uZmlnKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBnZXREYlByb21pc2UoKV07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgZGIgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdHggPSBkYi50cmFuc2FjdGlvbihPQkpFQ1RfU1RPUkVfTkFNRSwgJ3JlYWR3cml0ZScpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHR4Lm9iamVjdFN0b3JlKE9CSkVDVF9TVE9SRV9OQU1FKS5kZWxldGUoa2V5KV07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHR4LmNvbXBsZXRlXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufVxyXG4vKipcclxuICogQXRvbWljYWxseSB1cGRhdGVzIGEgcmVjb3JkIHdpdGggdGhlIHJlc3VsdCBvZiB1cGRhdGVGbiwgd2hpY2ggZ2V0c1xyXG4gKiBjYWxsZWQgd2l0aCB0aGUgY3VycmVudCB2YWx1ZS4gSWYgbmV3VmFsdWUgaXMgdW5kZWZpbmVkLCB0aGUgcmVjb3JkIGlzXHJcbiAqIGRlbGV0ZWQgaW5zdGVhZC5cclxuICogQHJldHVybiBVcGRhdGVkIHZhbHVlXHJcbiAqL1xyXG5mdW5jdGlvbiB1cGRhdGUoYXBwQ29uZmlnLCB1cGRhdGVGbikge1xyXG4gICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBrZXksIGRiLCB0eCwgc3RvcmUsIG9sZFZhbHVlLCBuZXdWYWx1ZTtcclxuICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICBrZXkgPSBnZXRLZXkoYXBwQ29uZmlnKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBnZXREYlByb21pc2UoKV07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgZGIgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdHggPSBkYi50cmFuc2FjdGlvbihPQkpFQ1RfU1RPUkVfTkFNRSwgJ3JlYWR3cml0ZScpO1xyXG4gICAgICAgICAgICAgICAgICAgIHN0b3JlID0gdHgub2JqZWN0U3RvcmUoT0JKRUNUX1NUT1JFX05BTUUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHN0b3JlLmdldChrZXkpXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICBvbGRWYWx1ZSA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICBuZXdWYWx1ZSA9IHVwZGF0ZUZuKG9sZFZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIShuZXdWYWx1ZSA9PT0gdW5kZWZpbmVkKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgNF07XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgc3RvcmUuZGVsZXRlKGtleSldO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCA2XTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNDogcmV0dXJuIFs0IC8qeWllbGQqLywgc3RvcmUucHV0KG5ld1ZhbHVlLCBrZXkpXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNTpcclxuICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSA2O1xyXG4gICAgICAgICAgICAgICAgY2FzZSA2OiByZXR1cm4gWzQgLyp5aWVsZCovLCB0eC5jb21wbGV0ZV07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDc6XHJcbiAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBuZXdWYWx1ZV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59XHJcbmZ1bmN0aW9uIGdldEtleShhcHBDb25maWcpIHtcclxuICAgIHJldHVybiBhcHBDb25maWcuYXBwTmFtZSArIFwiIVwiICsgYXBwQ29uZmlnLmFwcElkO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogVXBkYXRlcyBhbmQgcmV0dXJucyB0aGUgSW5zdGFsbGF0aW9uRW50cnkgZnJvbSB0aGUgZGF0YWJhc2UuXHJcbiAqIEFsc28gdHJpZ2dlcnMgYSByZWdpc3RyYXRpb24gcmVxdWVzdCBpZiBpdCBpcyBuZWNlc3NhcnkgYW5kIHBvc3NpYmxlLlxyXG4gKi9cclxuZnVuY3Rpb24gZ2V0SW5zdGFsbGF0aW9uRW50cnkoYXBwQ29uZmlnKSB7XHJcbiAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHJlZ2lzdHJhdGlvblByb21pc2UsIGluc3RhbGxhdGlvbkVudHJ5LCBfYTtcclxuICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9iKSB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAoX2IubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMDogcmV0dXJuIFs0IC8qeWllbGQqLywgdXBkYXRlKGFwcENvbmZpZywgZnVuY3Rpb24gKG9sZEVudHJ5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbnN0YWxsYXRpb25FbnRyeSA9IHVwZGF0ZU9yQ3JlYXRlSW5zdGFsbGF0aW9uRW50cnkob2xkRW50cnkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZW50cnlXaXRoUHJvbWlzZSA9IHRyaWdnZXJSZWdpc3RyYXRpb25JZk5lY2Vzc2FyeShhcHBDb25maWcsIGluc3RhbGxhdGlvbkVudHJ5KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVnaXN0cmF0aW9uUHJvbWlzZSA9IGVudHJ5V2l0aFByb21pc2UucmVnaXN0cmF0aW9uUHJvbWlzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVudHJ5V2l0aFByb21pc2UuaW5zdGFsbGF0aW9uRW50cnk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSldO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgIGluc3RhbGxhdGlvbkVudHJ5ID0gX2Iuc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghKGluc3RhbGxhdGlvbkVudHJ5LmZpZCA9PT0gSU5WQUxJRF9GSUQpKSByZXR1cm4gWzMgLypicmVhayovLCAzXTtcclxuICAgICAgICAgICAgICAgICAgICBfYSA9IHt9O1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHJlZ2lzdHJhdGlvblByb21pc2VdO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAyOiBcclxuICAgICAgICAgICAgICAgIC8vIEZJRCBnZW5lcmF0aW9uIGZhaWxlZC4gV2FpdGluZyBmb3IgdGhlIEZJRCBmcm9tIHRoZSBzZXJ2ZXIuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgKF9hLmluc3RhbGxhdGlvbkVudHJ5ID0gX2Iuc2VudCgpLCBfYSldO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAzOiByZXR1cm4gWzIgLypyZXR1cm4qLywge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnN0YWxsYXRpb25FbnRyeTogaW5zdGFsbGF0aW9uRW50cnksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZ2lzdHJhdGlvblByb21pc2U6IHJlZ2lzdHJhdGlvblByb21pc2VcclxuICAgICAgICAgICAgICAgICAgICB9XTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn1cclxuLyoqXHJcbiAqIENyZWF0ZXMgYSBuZXcgSW5zdGFsbGF0aW9uIEVudHJ5IGlmIG9uZSBkb2VzIG5vdCBleGlzdC5cclxuICogQWxzbyBjbGVhcnMgdGltZWQgb3V0IHBlbmRpbmcgcmVxdWVzdHMuXHJcbiAqL1xyXG5mdW5jdGlvbiB1cGRhdGVPckNyZWF0ZUluc3RhbGxhdGlvbkVudHJ5KG9sZEVudHJ5KSB7XHJcbiAgICB2YXIgZW50cnkgPSBvbGRFbnRyeSB8fCB7XHJcbiAgICAgICAgZmlkOiBnZW5lcmF0ZUZpZCgpLFxyXG4gICAgICAgIHJlZ2lzdHJhdGlvblN0YXR1czogMCAvKiBOT1RfU1RBUlRFRCAqL1xyXG4gICAgfTtcclxuICAgIHJldHVybiBjbGVhclRpbWVkT3V0UmVxdWVzdChlbnRyeSk7XHJcbn1cclxuLyoqXHJcbiAqIElmIHRoZSBGaXJlYmFzZSBJbnN0YWxsYXRpb24gaXMgbm90IHJlZ2lzdGVyZWQgeWV0LCB0aGlzIHdpbGwgdHJpZ2dlciB0aGVcclxuICogcmVnaXN0cmF0aW9uIGFuZCByZXR1cm4gYW4gSW5Qcm9ncmVzc0luc3RhbGxhdGlvbkVudHJ5LlxyXG4gKlxyXG4gKiBJZiByZWdpc3RyYXRpb25Qcm9taXNlIGRvZXMgbm90IGV4aXN0LCB0aGUgaW5zdGFsbGF0aW9uRW50cnkgaXMgZ3VhcmFudGVlZFxyXG4gKiB0byBiZSByZWdpc3RlcmVkLlxyXG4gKi9cclxuZnVuY3Rpb24gdHJpZ2dlclJlZ2lzdHJhdGlvbklmTmVjZXNzYXJ5KGFwcENvbmZpZywgaW5zdGFsbGF0aW9uRW50cnkpIHtcclxuICAgIGlmIChpbnN0YWxsYXRpb25FbnRyeS5yZWdpc3RyYXRpb25TdGF0dXMgPT09IDAgLyogTk9UX1NUQVJURUQgKi8pIHtcclxuICAgICAgICBpZiAoIW5hdmlnYXRvci5vbkxpbmUpIHtcclxuICAgICAgICAgICAgLy8gUmVnaXN0cmF0aW9uIHJlcXVpcmVkIGJ1dCBhcHAgaXMgb2ZmbGluZS5cclxuICAgICAgICAgICAgdmFyIHJlZ2lzdHJhdGlvblByb21pc2VXaXRoRXJyb3IgPSBQcm9taXNlLnJlamVjdChFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImFwcC1vZmZsaW5lXCIgLyogQVBQX09GRkxJTkUgKi8pKTtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIGluc3RhbGxhdGlvbkVudHJ5OiBpbnN0YWxsYXRpb25FbnRyeSxcclxuICAgICAgICAgICAgICAgIHJlZ2lzdHJhdGlvblByb21pc2U6IHJlZ2lzdHJhdGlvblByb21pc2VXaXRoRXJyb3JcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gVHJ5IHJlZ2lzdGVyaW5nLiBDaGFuZ2Ugc3RhdHVzIHRvIElOX1BST0dSRVNTLlxyXG4gICAgICAgIHZhciBpblByb2dyZXNzRW50cnkgPSB7XHJcbiAgICAgICAgICAgIGZpZDogaW5zdGFsbGF0aW9uRW50cnkuZmlkLFxyXG4gICAgICAgICAgICByZWdpc3RyYXRpb25TdGF0dXM6IDEgLyogSU5fUFJPR1JFU1MgKi8sXHJcbiAgICAgICAgICAgIHJlZ2lzdHJhdGlvblRpbWU6IERhdGUubm93KClcclxuICAgICAgICB9O1xyXG4gICAgICAgIHZhciByZWdpc3RyYXRpb25Qcm9taXNlID0gcmVnaXN0ZXJJbnN0YWxsYXRpb24oYXBwQ29uZmlnLCBpblByb2dyZXNzRW50cnkpO1xyXG4gICAgICAgIHJldHVybiB7IGluc3RhbGxhdGlvbkVudHJ5OiBpblByb2dyZXNzRW50cnksIHJlZ2lzdHJhdGlvblByb21pc2U6IHJlZ2lzdHJhdGlvblByb21pc2UgfTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGluc3RhbGxhdGlvbkVudHJ5LnJlZ2lzdHJhdGlvblN0YXR1cyA9PT0gMSAvKiBJTl9QUk9HUkVTUyAqLykge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGluc3RhbGxhdGlvbkVudHJ5OiBpbnN0YWxsYXRpb25FbnRyeSxcclxuICAgICAgICAgICAgcmVnaXN0cmF0aW9uUHJvbWlzZTogd2FpdFVudGlsRmlkUmVnaXN0cmF0aW9uKGFwcENvbmZpZylcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIHsgaW5zdGFsbGF0aW9uRW50cnk6IGluc3RhbGxhdGlvbkVudHJ5IH07XHJcbiAgICB9XHJcbn1cclxuLyoqIFRoaXMgd2lsbCBiZSBleGVjdXRlZCBvbmx5IG9uY2UgZm9yIGVhY2ggbmV3IEZpcmViYXNlIEluc3RhbGxhdGlvbi4gKi9cclxuZnVuY3Rpb24gcmVnaXN0ZXJJbnN0YWxsYXRpb24oYXBwQ29uZmlnLCBpbnN0YWxsYXRpb25FbnRyeSkge1xyXG4gICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciByZWdpc3RlcmVkSW5zdGFsbGF0aW9uRW50cnksIGVfMTtcclxuICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICBfYS50cnlzLnB1c2goWzAsIDIsICwgN10pO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIGNyZWF0ZUluc3RhbGxhdGlvblJlcXVlc3QoYXBwQ29uZmlnLCBpbnN0YWxsYXRpb25FbnRyeSldO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgIHJlZ2lzdGVyZWRJbnN0YWxsYXRpb25FbnRyeSA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgc2V0KGFwcENvbmZpZywgcmVnaXN0ZXJlZEluc3RhbGxhdGlvbkVudHJ5KV07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgZV8xID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghKGlzU2VydmVyRXJyb3IoZV8xKSAmJiBlXzEuc2VydmVyQ29kZSA9PT0gNDA5KSkgcmV0dXJuIFszIC8qYnJlYWsqLywgNF07XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gU2VydmVyIHJldHVybmVkIGEgXCJGSUQgY2FuIG5vdCBiZSB1c2VkXCIgZXJyb3IuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gR2VuZXJhdGUgYSBuZXcgSUQgbmV4dCB0aW1lLlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHJlbW92ZShhcHBDb25maWcpXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgICAgICAvLyBTZXJ2ZXIgcmV0dXJuZWQgYSBcIkZJRCBjYW4gbm90IGJlIHVzZWRcIiBlcnJvci5cclxuICAgICAgICAgICAgICAgICAgICAvLyBHZW5lcmF0ZSBhIG5ldyBJRCBuZXh0IHRpbWUuXHJcbiAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDZdO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA0OiBcclxuICAgICAgICAgICAgICAgIC8vIFJlZ2lzdHJhdGlvbiBmYWlsZWQuIFNldCBGSUQgYXMgbm90IHJlZ2lzdGVyZWQuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBzZXQoYXBwQ29uZmlnLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpZDogaW5zdGFsbGF0aW9uRW50cnkuZmlkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWdpc3RyYXRpb25TdGF0dXM6IDAgLyogTk9UX1NUQVJURUQgKi9cclxuICAgICAgICAgICAgICAgICAgICB9KV07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDU6XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gUmVnaXN0cmF0aW9uIGZhaWxlZC4gU2V0IEZJRCBhcyBub3QgcmVnaXN0ZXJlZC5cclxuICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSA2O1xyXG4gICAgICAgICAgICAgICAgY2FzZSA2OiB0aHJvdyBlXzE7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDc6IHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn1cclxuLyoqIENhbGwgaWYgRklEIHJlZ2lzdHJhdGlvbiBpcyBwZW5kaW5nIGluIGFub3RoZXIgcmVxdWVzdC4gKi9cclxuZnVuY3Rpb24gd2FpdFVudGlsRmlkUmVnaXN0cmF0aW9uKGFwcENvbmZpZykge1xyXG4gICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBlbnRyeSwgX2EsIGluc3RhbGxhdGlvbkVudHJ5LCByZWdpc3RyYXRpb25Qcm9taXNlO1xyXG4gICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2IpIHtcclxuICAgICAgICAgICAgc3dpdGNoIChfYi5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAwOiByZXR1cm4gWzQgLyp5aWVsZCovLCB1cGRhdGVJbnN0YWxsYXRpb25SZXF1ZXN0KGFwcENvbmZpZyldO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgIGVudHJ5ID0gX2Iuc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIF9iLmxhYmVsID0gMjtcclxuICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIShlbnRyeS5yZWdpc3RyYXRpb25TdGF0dXMgPT09IDEgLyogSU5fUFJPR1JFU1MgKi8pKSByZXR1cm4gWzMgLypicmVhayovLCA1XTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBjcmVhdGVJbnN0YWxsYXRpb24gcmVxdWVzdCBzdGlsbCBpbiBwcm9ncmVzcy5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBzbGVlcCgxMDApXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgICAgICAvLyBjcmVhdGVJbnN0YWxsYXRpb24gcmVxdWVzdCBzdGlsbCBpbiBwcm9ncmVzcy5cclxuICAgICAgICAgICAgICAgICAgICBfYi5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdXBkYXRlSW5zdGFsbGF0aW9uUmVxdWVzdChhcHBDb25maWcpXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNDpcclxuICAgICAgICAgICAgICAgICAgICBlbnRyeSA9IF9iLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCAyXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNTpcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIShlbnRyeS5yZWdpc3RyYXRpb25TdGF0dXMgPT09IDAgLyogTk9UX1NUQVJURUQgKi8pKSByZXR1cm4gWzMgLypicmVhayovLCA3XTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBnZXRJbnN0YWxsYXRpb25FbnRyeShhcHBDb25maWcpXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNjpcclxuICAgICAgICAgICAgICAgICAgICBfYSA9IF9iLnNlbnQoKSwgaW5zdGFsbGF0aW9uRW50cnkgPSBfYS5pbnN0YWxsYXRpb25FbnRyeSwgcmVnaXN0cmF0aW9uUHJvbWlzZSA9IF9hLnJlZ2lzdHJhdGlvblByb21pc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlZ2lzdHJhdGlvblByb21pc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHJlZ2lzdHJhdGlvblByb21pc2VdO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgdGhlcmUgaXMgbm8gcmVnaXN0cmF0aW9uUHJvbWlzZSwgZW50cnkgaXMgcmVnaXN0ZXJlZC5cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIGluc3RhbGxhdGlvbkVudHJ5XTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXNlIDc6IHJldHVybiBbMiAvKnJldHVybiovLCBlbnRyeV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59XHJcbi8qKlxyXG4gKiBDYWxsZWQgb25seSBpZiB0aGVyZSBpcyBhIENyZWF0ZUluc3RhbGxhdGlvbiByZXF1ZXN0IGluIHByb2dyZXNzLlxyXG4gKlxyXG4gKiBVcGRhdGVzIHRoZSBJbnN0YWxsYXRpb25FbnRyeSBpbiB0aGUgREIgYmFzZWQgb24gdGhlIHN0YXR1cyBvZiB0aGVcclxuICogQ3JlYXRlSW5zdGFsbGF0aW9uIHJlcXVlc3QuXHJcbiAqXHJcbiAqIFJldHVybnMgdGhlIHVwZGF0ZWQgSW5zdGFsbGF0aW9uRW50cnkuXHJcbiAqL1xyXG5mdW5jdGlvbiB1cGRhdGVJbnN0YWxsYXRpb25SZXF1ZXN0KGFwcENvbmZpZykge1xyXG4gICAgcmV0dXJuIHVwZGF0ZShhcHBDb25maWcsIGZ1bmN0aW9uIChvbGRFbnRyeSkge1xyXG4gICAgICAgIGlmICghb2xkRW50cnkpIHtcclxuICAgICAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJpbnN0YWxsYXRpb24tbm90LWZvdW5kXCIgLyogSU5TVEFMTEFUSU9OX05PVF9GT1VORCAqLyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBjbGVhclRpbWVkT3V0UmVxdWVzdChvbGRFbnRyeSk7XHJcbiAgICB9KTtcclxufVxyXG5mdW5jdGlvbiBjbGVhclRpbWVkT3V0UmVxdWVzdChlbnRyeSkge1xyXG4gICAgaWYgKGhhc0luc3RhbGxhdGlvblJlcXVlc3RUaW1lZE91dChlbnRyeSkpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBmaWQ6IGVudHJ5LmZpZCxcclxuICAgICAgICAgICAgcmVnaXN0cmF0aW9uU3RhdHVzOiAwIC8qIE5PVF9TVEFSVEVEICovXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIHJldHVybiBlbnRyeTtcclxufVxyXG5mdW5jdGlvbiBoYXNJbnN0YWxsYXRpb25SZXF1ZXN0VGltZWRPdXQoaW5zdGFsbGF0aW9uRW50cnkpIHtcclxuICAgIHJldHVybiAoaW5zdGFsbGF0aW9uRW50cnkucmVnaXN0cmF0aW9uU3RhdHVzID09PSAxIC8qIElOX1BST0dSRVNTICovICYmXHJcbiAgICAgICAgaW5zdGFsbGF0aW9uRW50cnkucmVnaXN0cmF0aW9uVGltZSArIFBFTkRJTkdfVElNRU9VVF9NUyA8IERhdGUubm93KCkpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBnZW5lcmF0ZUF1dGhUb2tlblJlcXVlc3QoX2EsIGluc3RhbGxhdGlvbkVudHJ5KSB7XHJcbiAgICB2YXIgYXBwQ29uZmlnID0gX2EuYXBwQ29uZmlnLCBwbGF0Zm9ybUxvZ2dlclByb3ZpZGVyID0gX2EucGxhdGZvcm1Mb2dnZXJQcm92aWRlcjtcclxuICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgZW5kcG9pbnQsIGhlYWRlcnMsIHBsYXRmb3JtTG9nZ2VyLCBib2R5LCByZXF1ZXN0LCByZXNwb25zZSwgcmVzcG9uc2VWYWx1ZSwgY29tcGxldGVkQXV0aFRva2VuO1xyXG4gICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2IpIHtcclxuICAgICAgICAgICAgc3dpdGNoIChfYi5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgIGVuZHBvaW50ID0gZ2V0R2VuZXJhdGVBdXRoVG9rZW5FbmRwb2ludChhcHBDb25maWcsIGluc3RhbGxhdGlvbkVudHJ5KTtcclxuICAgICAgICAgICAgICAgICAgICBoZWFkZXJzID0gZ2V0SGVhZGVyc1dpdGhBdXRoKGFwcENvbmZpZywgaW5zdGFsbGF0aW9uRW50cnkpO1xyXG4gICAgICAgICAgICAgICAgICAgIHBsYXRmb3JtTG9nZ2VyID0gcGxhdGZvcm1Mb2dnZXJQcm92aWRlci5nZXRJbW1lZGlhdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25hbDogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwbGF0Zm9ybUxvZ2dlcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzLmFwcGVuZCgneC1maXJlYmFzZS1jbGllbnQnLCBwbGF0Zm9ybUxvZ2dlci5nZXRQbGF0Zm9ybUluZm9TdHJpbmcoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGJvZHkgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGluc3RhbGxhdGlvbjoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2RrVmVyc2lvbjogUEFDS0FHRV9WRVJTSU9OXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgIHJlcXVlc3QgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShib2R5KVxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgcmV0cnlJZlNlcnZlckVycm9yKGZ1bmN0aW9uICgpIHsgcmV0dXJuIGZldGNoKGVuZHBvaW50LCByZXF1ZXN0KTsgfSldO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gX2Iuc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghcmVzcG9uc2Uub2spIHJldHVybiBbMyAvKmJyZWFrKi8sIDNdO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHJlc3BvbnNlLmpzb24oKV07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2VWYWx1ZSA9IF9iLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICBjb21wbGV0ZWRBdXRoVG9rZW4gPSBleHRyYWN0QXV0aFRva2VuSW5mb0Zyb21SZXNwb25zZShyZXNwb25zZVZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgY29tcGxldGVkQXV0aFRva2VuXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMzogcmV0dXJuIFs0IC8qeWllbGQqLywgZ2V0RXJyb3JGcm9tUmVzcG9uc2UoJ0dlbmVyYXRlIEF1dGggVG9rZW4nLCByZXNwb25zZSldO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA0OiB0aHJvdyBfYi5zZW50KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59XHJcbmZ1bmN0aW9uIGdldEdlbmVyYXRlQXV0aFRva2VuRW5kcG9pbnQoYXBwQ29uZmlnLCBfYSkge1xyXG4gICAgdmFyIGZpZCA9IF9hLmZpZDtcclxuICAgIHJldHVybiBnZXRJbnN0YWxsYXRpb25zRW5kcG9pbnQoYXBwQ29uZmlnKSArIFwiL1wiICsgZmlkICsgXCIvYXV0aFRva2VuczpnZW5lcmF0ZVwiO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogUmV0dXJucyBhIHZhbGlkIGF1dGhlbnRpY2F0aW9uIHRva2VuIGZvciB0aGUgaW5zdGFsbGF0aW9uLiBHZW5lcmF0ZXMgYSBuZXdcclxuICogdG9rZW4gaWYgb25lIGRvZXNuJ3QgZXhpc3QsIGlzIGV4cGlyZWQgb3IgYWJvdXQgdG8gZXhwaXJlLlxyXG4gKlxyXG4gKiBTaG91bGQgb25seSBiZSBjYWxsZWQgaWYgdGhlIEZpcmViYXNlIEluc3RhbGxhdGlvbiBpcyByZWdpc3RlcmVkLlxyXG4gKi9cclxuZnVuY3Rpb24gcmVmcmVzaEF1dGhUb2tlbihkZXBlbmRlbmNpZXMsIGZvcmNlUmVmcmVzaCkge1xyXG4gICAgaWYgKGZvcmNlUmVmcmVzaCA9PT0gdm9pZCAwKSB7IGZvcmNlUmVmcmVzaCA9IGZhbHNlOyB9XHJcbiAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHRva2VuUHJvbWlzZSwgZW50cnksIGF1dGhUb2tlbiwgX2E7XHJcbiAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYikge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKF9iLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6IHJldHVybiBbNCAvKnlpZWxkKi8sIHVwZGF0ZShkZXBlbmRlbmNpZXMuYXBwQ29uZmlnLCBmdW5jdGlvbiAob2xkRW50cnkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpc0VudHJ5UmVnaXN0ZXJlZChvbGRFbnRyeSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwibm90LXJlZ2lzdGVyZWRcIiAvKiBOT1RfUkVHSVNURVJFRCAqLyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9sZEF1dGhUb2tlbiA9IG9sZEVudHJ5LmF1dGhUb2tlbjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFmb3JjZVJlZnJlc2ggJiYgaXNBdXRoVG9rZW5WYWxpZChvbGRBdXRoVG9rZW4pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGVyZSBpcyBhIHZhbGlkIHRva2VuIGluIHRoZSBEQi5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvbGRFbnRyeTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChvbGRBdXRoVG9rZW4ucmVxdWVzdFN0YXR1cyA9PT0gMSAvKiBJTl9QUk9HUkVTUyAqLykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlcmUgYWxyZWFkeSBpcyBhIHRva2VuIHJlcXVlc3QgaW4gcHJvZ3Jlc3MuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b2tlblByb21pc2UgPSB3YWl0VW50aWxBdXRoVG9rZW5SZXF1ZXN0KGRlcGVuZGVuY2llcywgZm9yY2VSZWZyZXNoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvbGRFbnRyeTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5vIHRva2VuIG9yIHRva2VuIGV4cGlyZWQuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW5hdmlnYXRvci5vbkxpbmUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImFwcC1vZmZsaW5lXCIgLyogQVBQX09GRkxJTkUgKi8pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGluUHJvZ3Jlc3NFbnRyeSA9IG1ha2VBdXRoVG9rZW5SZXF1ZXN0SW5Qcm9ncmVzc0VudHJ5KG9sZEVudHJ5KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRva2VuUHJvbWlzZSA9IGZldGNoQXV0aFRva2VuRnJvbVNlcnZlcihkZXBlbmRlbmNpZXMsIGluUHJvZ3Jlc3NFbnRyeSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaW5Qcm9ncmVzc0VudHJ5O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSldO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgIGVudHJ5ID0gX2Iuc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghdG9rZW5Qcm9taXNlKSByZXR1cm4gWzMgLypicmVhayovLCAzXTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0b2tlblByb21pc2VdO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgIF9hID0gX2Iuc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDRdO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICAgICAgICAgIF9hID0gZW50cnkuYXV0aFRva2VuO1xyXG4gICAgICAgICAgICAgICAgICAgIF9iLmxhYmVsID0gNDtcclxuICAgICAgICAgICAgICAgIGNhc2UgNDpcclxuICAgICAgICAgICAgICAgICAgICBhdXRoVG9rZW4gPSBfYTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgYXV0aFRva2VuXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn1cclxuLyoqXHJcbiAqIENhbGwgb25seSBpZiBGSUQgaXMgcmVnaXN0ZXJlZCBhbmQgQXV0aCBUb2tlbiByZXF1ZXN0IGlzIGluIHByb2dyZXNzLlxyXG4gKlxyXG4gKiBXYWl0cyB1bnRpbCB0aGUgY3VycmVudCBwZW5kaW5nIHJlcXVlc3QgZmluaXNoZXMuIElmIHRoZSByZXF1ZXN0IHRpbWVzIG91dCxcclxuICogdHJpZXMgb25jZSBpbiB0aGlzIHRocmVhZCBhcyB3ZWxsLlxyXG4gKi9cclxuZnVuY3Rpb24gd2FpdFVudGlsQXV0aFRva2VuUmVxdWVzdChkZXBlbmRlbmNpZXMsIGZvcmNlUmVmcmVzaCkge1xyXG4gICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBlbnRyeSwgYXV0aFRva2VuO1xyXG4gICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAwOiByZXR1cm4gWzQgLyp5aWVsZCovLCB1cGRhdGVBdXRoVG9rZW5SZXF1ZXN0KGRlcGVuZGVuY2llcy5hcHBDb25maWcpXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICBlbnRyeSA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDI7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEoZW50cnkuYXV0aFRva2VuLnJlcXVlc3RTdGF0dXMgPT09IDEgLyogSU5fUFJPR1JFU1MgKi8pKSByZXR1cm4gWzMgLypicmVhayovLCA1XTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBnZW5lcmF0ZUF1dGhUb2tlbiBzdGlsbCBpbiBwcm9ncmVzcy5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBzbGVlcCgxMDApXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgICAgICAvLyBnZW5lcmF0ZUF1dGhUb2tlbiBzdGlsbCBpbiBwcm9ncmVzcy5cclxuICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdXBkYXRlQXV0aFRva2VuUmVxdWVzdChkZXBlbmRlbmNpZXMuYXBwQ29uZmlnKV07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDQ6XHJcbiAgICAgICAgICAgICAgICAgICAgZW50cnkgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgMl07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDU6XHJcbiAgICAgICAgICAgICAgICAgICAgYXV0aFRva2VuID0gZW50cnkuYXV0aFRva2VuO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChhdXRoVG9rZW4ucmVxdWVzdFN0YXR1cyA9PT0gMCAvKiBOT1RfU1RBUlRFRCAqLykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGUgcmVxdWVzdCB0aW1lZCBvdXQgb3IgZmFpbGVkIGluIGEgZGlmZmVyZW50IGNhbGwuIFRyeSBhZ2Fpbi5cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHJlZnJlc2hBdXRoVG9rZW4oZGVwZW5kZW5jaWVzLCBmb3JjZVJlZnJlc2gpXTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBhdXRoVG9rZW5dO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn1cclxuLyoqXHJcbiAqIENhbGxlZCBvbmx5IGlmIHRoZXJlIGlzIGEgR2VuZXJhdGVBdXRoVG9rZW4gcmVxdWVzdCBpbiBwcm9ncmVzcy5cclxuICpcclxuICogVXBkYXRlcyB0aGUgSW5zdGFsbGF0aW9uRW50cnkgaW4gdGhlIERCIGJhc2VkIG9uIHRoZSBzdGF0dXMgb2YgdGhlXHJcbiAqIEdlbmVyYXRlQXV0aFRva2VuIHJlcXVlc3QuXHJcbiAqXHJcbiAqIFJldHVybnMgdGhlIHVwZGF0ZWQgSW5zdGFsbGF0aW9uRW50cnkuXHJcbiAqL1xyXG5mdW5jdGlvbiB1cGRhdGVBdXRoVG9rZW5SZXF1ZXN0KGFwcENvbmZpZykge1xyXG4gICAgcmV0dXJuIHVwZGF0ZShhcHBDb25maWcsIGZ1bmN0aW9uIChvbGRFbnRyeSkge1xyXG4gICAgICAgIGlmICghaXNFbnRyeVJlZ2lzdGVyZWQob2xkRW50cnkpKSB7XHJcbiAgICAgICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwibm90LXJlZ2lzdGVyZWRcIiAvKiBOT1RfUkVHSVNURVJFRCAqLyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBvbGRBdXRoVG9rZW4gPSBvbGRFbnRyeS5hdXRoVG9rZW47XHJcbiAgICAgICAgaWYgKGhhc0F1dGhUb2tlblJlcXVlc3RUaW1lZE91dChvbGRBdXRoVG9rZW4pKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgb2xkRW50cnkpLCB7IGF1dGhUb2tlbjogeyByZXF1ZXN0U3RhdHVzOiAwIC8qIE5PVF9TVEFSVEVEICovIH0gfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBvbGRFbnRyeTtcclxuICAgIH0pO1xyXG59XHJcbmZ1bmN0aW9uIGZldGNoQXV0aFRva2VuRnJvbVNlcnZlcihkZXBlbmRlbmNpZXMsIGluc3RhbGxhdGlvbkVudHJ5KSB7XHJcbiAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGF1dGhUb2tlbiwgdXBkYXRlZEluc3RhbGxhdGlvbkVudHJ5LCBlXzEsIHVwZGF0ZWRJbnN0YWxsYXRpb25FbnRyeTtcclxuICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICBfYS50cnlzLnB1c2goWzAsIDMsICwgOF0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIGdlbmVyYXRlQXV0aFRva2VuUmVxdWVzdChkZXBlbmRlbmNpZXMsIGluc3RhbGxhdGlvbkVudHJ5KV07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgYXV0aFRva2VuID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZWRJbnN0YWxsYXRpb25FbnRyeSA9IF9fYXNzaWduKF9fYXNzaWduKHt9LCBpbnN0YWxsYXRpb25FbnRyeSksIHsgYXV0aFRva2VuOiBhdXRoVG9rZW4gfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgc2V0KGRlcGVuZGVuY2llcy5hcHBDb25maWcsIHVwZGF0ZWRJbnN0YWxsYXRpb25FbnRyeSldO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgYXV0aFRva2VuXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgICAgICBlXzEgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEoaXNTZXJ2ZXJFcnJvcihlXzEpICYmIChlXzEuc2VydmVyQ29kZSA9PT0gNDAxIHx8IGVfMS5zZXJ2ZXJDb2RlID09PSA0MDQpKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgNV07XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gU2VydmVyIHJldHVybmVkIGEgXCJGSUQgbm90IGZvdW5kXCIgb3IgYSBcIkludmFsaWQgYXV0aGVudGljYXRpb25cIiBlcnJvci5cclxuICAgICAgICAgICAgICAgICAgICAvLyBHZW5lcmF0ZSBhIG5ldyBJRCBuZXh0IHRpbWUuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgcmVtb3ZlKGRlcGVuZGVuY2llcy5hcHBDb25maWcpXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNDpcclxuICAgICAgICAgICAgICAgICAgICAvLyBTZXJ2ZXIgcmV0dXJuZWQgYSBcIkZJRCBub3QgZm91bmRcIiBvciBhIFwiSW52YWxpZCBhdXRoZW50aWNhdGlvblwiIGVycm9yLlxyXG4gICAgICAgICAgICAgICAgICAgIC8vIEdlbmVyYXRlIGEgbmV3IElEIG5leHQgdGltZS5cclxuICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgN107XHJcbiAgICAgICAgICAgICAgICBjYXNlIDU6XHJcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlZEluc3RhbGxhdGlvbkVudHJ5ID0gX19hc3NpZ24oX19hc3NpZ24oe30sIGluc3RhbGxhdGlvbkVudHJ5KSwgeyBhdXRoVG9rZW46IHsgcmVxdWVzdFN0YXR1czogMCAvKiBOT1RfU1RBUlRFRCAqLyB9IH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHNldChkZXBlbmRlbmNpZXMuYXBwQ29uZmlnLCB1cGRhdGVkSW5zdGFsbGF0aW9uRW50cnkpXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNjpcclxuICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSA3O1xyXG4gICAgICAgICAgICAgICAgY2FzZSA3OiB0aHJvdyBlXzE7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDg6IHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn1cclxuZnVuY3Rpb24gaXNFbnRyeVJlZ2lzdGVyZWQoaW5zdGFsbGF0aW9uRW50cnkpIHtcclxuICAgIHJldHVybiAoaW5zdGFsbGF0aW9uRW50cnkgIT09IHVuZGVmaW5lZCAmJlxyXG4gICAgICAgIGluc3RhbGxhdGlvbkVudHJ5LnJlZ2lzdHJhdGlvblN0YXR1cyA9PT0gMiAvKiBDT01QTEVURUQgKi8pO1xyXG59XHJcbmZ1bmN0aW9uIGlzQXV0aFRva2VuVmFsaWQoYXV0aFRva2VuKSB7XHJcbiAgICByZXR1cm4gKGF1dGhUb2tlbi5yZXF1ZXN0U3RhdHVzID09PSAyIC8qIENPTVBMRVRFRCAqLyAmJlxyXG4gICAgICAgICFpc0F1dGhUb2tlbkV4cGlyZWQoYXV0aFRva2VuKSk7XHJcbn1cclxuZnVuY3Rpb24gaXNBdXRoVG9rZW5FeHBpcmVkKGF1dGhUb2tlbikge1xyXG4gICAgdmFyIG5vdyA9IERhdGUubm93KCk7XHJcbiAgICByZXR1cm4gKG5vdyA8IGF1dGhUb2tlbi5jcmVhdGlvblRpbWUgfHxcclxuICAgICAgICBhdXRoVG9rZW4uY3JlYXRpb25UaW1lICsgYXV0aFRva2VuLmV4cGlyZXNJbiA8IG5vdyArIFRPS0VOX0VYUElSQVRJT05fQlVGRkVSKTtcclxufVxyXG4vKiogUmV0dXJucyBhbiB1cGRhdGVkIEluc3RhbGxhdGlvbkVudHJ5IHdpdGggYW4gSW5Qcm9ncmVzc0F1dGhUb2tlbi4gKi9cclxuZnVuY3Rpb24gbWFrZUF1dGhUb2tlblJlcXVlc3RJblByb2dyZXNzRW50cnkob2xkRW50cnkpIHtcclxuICAgIHZhciBpblByb2dyZXNzQXV0aFRva2VuID0ge1xyXG4gICAgICAgIHJlcXVlc3RTdGF0dXM6IDEgLyogSU5fUFJPR1JFU1MgKi8sXHJcbiAgICAgICAgcmVxdWVzdFRpbWU6IERhdGUubm93KClcclxuICAgIH07XHJcbiAgICByZXR1cm4gX19hc3NpZ24oX19hc3NpZ24oe30sIG9sZEVudHJ5KSwgeyBhdXRoVG9rZW46IGluUHJvZ3Jlc3NBdXRoVG9rZW4gfSk7XHJcbn1cclxuZnVuY3Rpb24gaGFzQXV0aFRva2VuUmVxdWVzdFRpbWVkT3V0KGF1dGhUb2tlbikge1xyXG4gICAgcmV0dXJuIChhdXRoVG9rZW4ucmVxdWVzdFN0YXR1cyA9PT0gMSAvKiBJTl9QUk9HUkVTUyAqLyAmJlxyXG4gICAgICAgIGF1dGhUb2tlbi5yZXF1ZXN0VGltZSArIFBFTkRJTkdfVElNRU9VVF9NUyA8IERhdGUubm93KCkpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRJZChkZXBlbmRlbmNpZXMpIHtcclxuICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX2EsIGluc3RhbGxhdGlvbkVudHJ5LCByZWdpc3RyYXRpb25Qcm9taXNlO1xyXG4gICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2IpIHtcclxuICAgICAgICAgICAgc3dpdGNoIChfYi5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAwOiByZXR1cm4gWzQgLyp5aWVsZCovLCBnZXRJbnN0YWxsYXRpb25FbnRyeShkZXBlbmRlbmNpZXMuYXBwQ29uZmlnKV07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgX2EgPSBfYi5zZW50KCksIGluc3RhbGxhdGlvbkVudHJ5ID0gX2EuaW5zdGFsbGF0aW9uRW50cnksIHJlZ2lzdHJhdGlvblByb21pc2UgPSBfYS5yZWdpc3RyYXRpb25Qcm9taXNlO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZWdpc3RyYXRpb25Qcm9taXNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZ2lzdHJhdGlvblByb21pc2UuY2F0Y2goY29uc29sZS5lcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGUgaW5zdGFsbGF0aW9uIGlzIGFscmVhZHkgcmVnaXN0ZXJlZCwgdXBkYXRlIHRoZSBhdXRoZW50aWNhdGlvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB0b2tlbiBpZiBuZWVkZWQuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZnJlc2hBdXRoVG9rZW4oZGVwZW5kZW5jaWVzKS5jYXRjaChjb25zb2xlLmVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIGluc3RhbGxhdGlvbkVudHJ5LmZpZF07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRUb2tlbihkZXBlbmRlbmNpZXMsIGZvcmNlUmVmcmVzaCkge1xyXG4gICAgaWYgKGZvcmNlUmVmcmVzaCA9PT0gdm9pZCAwKSB7IGZvcmNlUmVmcmVzaCA9IGZhbHNlOyB9XHJcbiAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGF1dGhUb2tlbjtcclxuICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMDogcmV0dXJuIFs0IC8qeWllbGQqLywgY29tcGxldGVJbnN0YWxsYXRpb25SZWdpc3RyYXRpb24oZGVwZW5kZW5jaWVzLmFwcENvbmZpZyldO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCByZWZyZXNoQXV0aFRva2VuKGRlcGVuZGVuY2llcywgZm9yY2VSZWZyZXNoKV07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgYXV0aFRva2VuID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBhdXRoVG9rZW4udG9rZW5dO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufVxyXG5mdW5jdGlvbiBjb21wbGV0ZUluc3RhbGxhdGlvblJlZ2lzdHJhdGlvbihhcHBDb25maWcpIHtcclxuICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgcmVnaXN0cmF0aW9uUHJvbWlzZTtcclxuICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMDogcmV0dXJuIFs0IC8qeWllbGQqLywgZ2V0SW5zdGFsbGF0aW9uRW50cnkoYXBwQ29uZmlnKV07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgcmVnaXN0cmF0aW9uUHJvbWlzZSA9IChfYS5zZW50KCkpLnJlZ2lzdHJhdGlvblByb21pc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFyZWdpc3RyYXRpb25Qcm9taXNlKSByZXR1cm4gWzMgLypicmVhayovLCAzXTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBBIGNyZWF0ZUluc3RhbGxhdGlvbiByZXF1ZXN0IGlzIGluIHByb2dyZXNzLiBXYWl0IHVudGlsIGl0IGZpbmlzaGVzLlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHJlZ2lzdHJhdGlvblByb21pc2VdO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgIC8vIEEgY3JlYXRlSW5zdGFsbGF0aW9uIHJlcXVlc3QgaXMgaW4gcHJvZ3Jlc3MuIFdhaXQgdW50aWwgaXQgZmluaXNoZXMuXHJcbiAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIF9hLmxhYmVsID0gMztcclxuICAgICAgICAgICAgICAgIGNhc2UgMzogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gZGVsZXRlSW5zdGFsbGF0aW9uUmVxdWVzdChhcHBDb25maWcsIGluc3RhbGxhdGlvbkVudHJ5KSB7XHJcbiAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGVuZHBvaW50LCBoZWFkZXJzLCByZXF1ZXN0LCByZXNwb25zZTtcclxuICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICBlbmRwb2ludCA9IGdldERlbGV0ZUVuZHBvaW50KGFwcENvbmZpZywgaW5zdGFsbGF0aW9uRW50cnkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGhlYWRlcnMgPSBnZXRIZWFkZXJzV2l0aEF1dGgoYXBwQ29uZmlnLCBpbnN0YWxsYXRpb25FbnRyeSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVxdWVzdCA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnREVMRVRFJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVyc1xyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgcmV0cnlJZlNlcnZlckVycm9yKGZ1bmN0aW9uICgpIHsgcmV0dXJuIGZldGNoKGVuZHBvaW50LCByZXF1ZXN0KTsgfSldO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghIXJlc3BvbnNlLm9rKSByZXR1cm4gWzMgLypicmVhayovLCAzXTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBnZXRFcnJvckZyb21SZXNwb25zZSgnRGVsZXRlIEluc3RhbGxhdGlvbicsIHJlc3BvbnNlKV07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDI6IHRocm93IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMzogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufVxyXG5mdW5jdGlvbiBnZXREZWxldGVFbmRwb2ludChhcHBDb25maWcsIF9hKSB7XHJcbiAgICB2YXIgZmlkID0gX2EuZmlkO1xyXG4gICAgcmV0dXJuIGdldEluc3RhbGxhdGlvbnNFbmRwb2ludChhcHBDb25maWcpICsgXCIvXCIgKyBmaWQ7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIGRlbGV0ZUluc3RhbGxhdGlvbihkZXBlbmRlbmNpZXMpIHtcclxuICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgYXBwQ29uZmlnLCBlbnRyeTtcclxuICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICBhcHBDb25maWcgPSBkZXBlbmRlbmNpZXMuYXBwQ29uZmlnO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHVwZGF0ZShhcHBDb25maWcsIGZ1bmN0aW9uIChvbGRFbnRyeSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9sZEVudHJ5ICYmIG9sZEVudHJ5LnJlZ2lzdHJhdGlvblN0YXR1cyA9PT0gMCAvKiBOT1RfU1RBUlRFRCAqLykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIERlbGV0ZSB0aGUgdW5yZWdpc3RlcmVkIGVudHJ5IHdpdGhvdXQgc2VuZGluZyBhIGRlbGV0ZUluc3RhbGxhdGlvbiByZXF1ZXN0LlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gb2xkRW50cnk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICBlbnRyeSA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWVudHJ5KSByZXR1cm4gWzMgLypicmVhayovLCA2XTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIShlbnRyeS5yZWdpc3RyYXRpb25TdGF0dXMgPT09IDEgLyogSU5fUFJPR1JFU1MgKi8pKSByZXR1cm4gWzMgLypicmVhayovLCAyXTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBDYW4ndCBkZWxldGUgd2hpbGUgdHJ5aW5nIHRvIHJlZ2lzdGVyLlxyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiZGVsZXRlLXBlbmRpbmctcmVnaXN0cmF0aW9uXCIgLyogREVMRVRFX1BFTkRJTkdfUkVHSVNUUkFUSU9OICovKTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIShlbnRyeS5yZWdpc3RyYXRpb25TdGF0dXMgPT09IDIgLyogQ09NUExFVEVEICovKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgNl07XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEhbmF2aWdhdG9yLm9uTGluZSkgcmV0dXJuIFszIC8qYnJlYWsqLywgM107XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJhcHAtb2ZmbGluZVwiIC8qIEFQUF9PRkZMSU5FICovKTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMzogcmV0dXJuIFs0IC8qeWllbGQqLywgZGVsZXRlSW5zdGFsbGF0aW9uUmVxdWVzdChhcHBDb25maWcsIGVudHJ5KV07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDQ6XHJcbiAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHJlbW92ZShhcHBDb25maWcpXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNTpcclxuICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSA2O1xyXG4gICAgICAgICAgICAgICAgY2FzZSA2OiByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBleHRyYWN0QXBwQ29uZmlnKGFwcCkge1xyXG4gICAgdmFyIGVfMSwgX2E7XHJcbiAgICBpZiAoIWFwcCB8fCAhYXBwLm9wdGlvbnMpIHtcclxuICAgICAgICB0aHJvdyBnZXRNaXNzaW5nVmFsdWVFcnJvcignQXBwIENvbmZpZ3VyYXRpb24nKTtcclxuICAgIH1cclxuICAgIGlmICghYXBwLm5hbWUpIHtcclxuICAgICAgICB0aHJvdyBnZXRNaXNzaW5nVmFsdWVFcnJvcignQXBwIE5hbWUnKTtcclxuICAgIH1cclxuICAgIC8vIFJlcXVpcmVkIGFwcCBjb25maWcga2V5c1xyXG4gICAgdmFyIGNvbmZpZ0tleXMgPSBbXHJcbiAgICAgICAgJ3Byb2plY3RJZCcsXHJcbiAgICAgICAgJ2FwaUtleScsXHJcbiAgICAgICAgJ2FwcElkJ1xyXG4gICAgXTtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgZm9yICh2YXIgY29uZmlnS2V5c18xID0gX192YWx1ZXMoY29uZmlnS2V5cyksIGNvbmZpZ0tleXNfMV8xID0gY29uZmlnS2V5c18xLm5leHQoKTsgIWNvbmZpZ0tleXNfMV8xLmRvbmU7IGNvbmZpZ0tleXNfMV8xID0gY29uZmlnS2V5c18xLm5leHQoKSkge1xyXG4gICAgICAgICAgICB2YXIga2V5TmFtZSA9IGNvbmZpZ0tleXNfMV8xLnZhbHVlO1xyXG4gICAgICAgICAgICBpZiAoIWFwcC5vcHRpb25zW2tleU5hbWVdKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBnZXRNaXNzaW5nVmFsdWVFcnJvcihrZXlOYW1lKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGNhdGNoIChlXzFfMSkgeyBlXzEgPSB7IGVycm9yOiBlXzFfMSB9OyB9XHJcbiAgICBmaW5hbGx5IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBpZiAoY29uZmlnS2V5c18xXzEgJiYgIWNvbmZpZ0tleXNfMV8xLmRvbmUgJiYgKF9hID0gY29uZmlnS2V5c18xLnJldHVybikpIF9hLmNhbGwoY29uZmlnS2V5c18xKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZmluYWxseSB7IGlmIChlXzEpIHRocm93IGVfMS5lcnJvcjsgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBhcHBOYW1lOiBhcHAubmFtZSxcclxuICAgICAgICBwcm9qZWN0SWQ6IGFwcC5vcHRpb25zLnByb2plY3RJZCxcclxuICAgICAgICBhcGlLZXk6IGFwcC5vcHRpb25zLmFwaUtleSxcclxuICAgICAgICBhcHBJZDogYXBwLm9wdGlvbnMuYXBwSWRcclxuICAgIH07XHJcbn1cclxuZnVuY3Rpb24gZ2V0TWlzc2luZ1ZhbHVlRXJyb3IodmFsdWVOYW1lKSB7XHJcbiAgICByZXR1cm4gRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJtaXNzaW5nLWFwcC1jb25maWctdmFsdWVzXCIgLyogTUlTU0lOR19BUFBfQ09ORklHX1ZBTFVFUyAqLywge1xyXG4gICAgICAgIHZhbHVlTmFtZTogdmFsdWVOYW1lXHJcbiAgICB9KTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gcmVnaXN0ZXJJbnN0YWxsYXRpb25zKGluc3RhbmNlKSB7XHJcbiAgICB2YXIgaW5zdGFsbGF0aW9uc05hbWUgPSAnaW5zdGFsbGF0aW9ucyc7XHJcbiAgICBpbnN0YW5jZS5JTlRFUk5BTC5yZWdpc3RlckNvbXBvbmVudChuZXcgQ29tcG9uZW50KGluc3RhbGxhdGlvbnNOYW1lLCBmdW5jdGlvbiAoY29udGFpbmVyKSB7XHJcbiAgICAgICAgdmFyIGFwcCA9IGNvbnRhaW5lci5nZXRQcm92aWRlcignYXBwJykuZ2V0SW1tZWRpYXRlKCk7XHJcbiAgICAgICAgLy8gVGhyb3dzIGlmIGFwcCBpc24ndCBjb25maWd1cmVkIHByb3Blcmx5LlxyXG4gICAgICAgIHZhciBhcHBDb25maWcgPSBleHRyYWN0QXBwQ29uZmlnKGFwcCk7XHJcbiAgICAgICAgdmFyIHBsYXRmb3JtTG9nZ2VyUHJvdmlkZXIgPSBjb250YWluZXIuZ2V0UHJvdmlkZXIoJ3BsYXRmb3JtLWxvZ2dlcicpO1xyXG4gICAgICAgIHZhciBkZXBlbmRlbmNpZXMgPSB7XHJcbiAgICAgICAgICAgIGFwcENvbmZpZzogYXBwQ29uZmlnLFxyXG4gICAgICAgICAgICBwbGF0Zm9ybUxvZ2dlclByb3ZpZGVyOiBwbGF0Zm9ybUxvZ2dlclByb3ZpZGVyXHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBhcHA6IGFwcCxcclxuICAgICAgICAgICAgZ2V0SWQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGdldElkKGRlcGVuZGVuY2llcyk7IH0sXHJcbiAgICAgICAgICAgIGdldFRva2VuOiBmdW5jdGlvbiAoZm9yY2VSZWZyZXNoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZ2V0VG9rZW4oZGVwZW5kZW5jaWVzLCBmb3JjZVJlZnJlc2gpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBkZWxldGU6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGRlbGV0ZUluc3RhbGxhdGlvbihkZXBlbmRlbmNpZXMpOyB9XHJcbiAgICAgICAgfTtcclxuICAgIH0sIFwiUFVCTElDXCIgLyogUFVCTElDICovKSk7XHJcbiAgICBpbnN0YW5jZS5yZWdpc3RlclZlcnNpb24obmFtZSwgdmVyc2lvbik7XHJcbn1cclxucmVnaXN0ZXJJbnN0YWxsYXRpb25zKGZpcmViYXNlKTtcblxuZXhwb3J0IHsgcmVnaXN0ZXJJbnN0YWxsYXRpb25zIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5lc20uanMubWFwXG4iLCJpbXBvcnQgQVBJIGZyb20gJy4uL2FwaSc7XHJcbmltcG9ydCB7IEVsZW1lbnRTZWxlY3Rpb24gfSBmcm9tICcuL2VsZW1lbnRTZWxlY3Rpb24nO1xyXG5pbXBvcnQgdHlwZSB7IFdvcmtzcGFjZSB9IGZyb20gJy4uL3dvcmtzcGFjZSc7XHJcbmltcG9ydCB0eXBlIHsgUGFuZWxTZWN0aW9uIH0gZnJvbSAnLi4vbWFpblBhbmVsJztcclxuaW1wb3J0IHsgRWxlbWVudERhdGFFbnRyeSwgRWxlbWVudERhdGEsIE1vZGVsRWxlbWVudHNEYXRhLCBQcm9qZWN0RGF0YSB9IGZyb20gJy4uL3R5cGVzJztcclxuXHJcbmV4cG9ydCBjbGFzcyBTaG93RWxlbWVudERhdGEgZXh0ZW5kcyBFbGVtZW50U2VsZWN0aW9uIHtcclxuICBlbGVtZW50c0RhdGE6IE1vZGVsRWxlbWVudHNEYXRhO1xyXG4gIHByb2plY3RzRGF0YTogUHJvamVjdERhdGFbXTtcclxuICBwcm9qZWN0SW5kZXg6IG51bWJlcjtcclxuICBjdXJyZW50RWxlbWVudERhdGE6IEVsZW1lbnREYXRhO1xyXG4gIC8vIElmIGEgdG9vbCByZXF1aXJlcyB0aGUgcGFuZWwgaXQgaXMgc3BlY2lmaWVkIGhlcmUuXHJcbiAgLy8gVGhpcyBjb3VsZCBiZSBhIHByb3BlcnR5IG9mIHRoZSBUb29sIGNsYXNzLlxyXG4gIGhhc1VzZWRQYW5lbCA9IGZhbHNlO1xyXG5cclxuICBjb25zdHJ1Y3RvcihuYW1lOiBzdHJpbmcsIHRvb2xCdG46IEhUTUxFbGVtZW50LCB3b3Jrc3BhY2U6IFdvcmtzcGFjZSkge1xyXG4gICAgc3VwZXIobmFtZSwgdG9vbEJ0biwgd29ya3NwYWNlKTtcclxuICAgIGNvbnNvbGUubG9nKCdFbGVtZW50cyBkYXRhIHRvb2wgZW5hYmxlZC4nKTtcclxuICAgIHRoaXMuZWxlbWVudHNEYXRhID0gd29ya3NwYWNlLmVsZW1lbnRzRGF0YTtcclxuICAgIHRoaXMucHJvamVjdHNEYXRhID0gd29ya3NwYWNlLnByb2plY3RzRGF0YTtcclxuICAgIHRoaXMucHJvamVjdEluZGV4ID0gd29ya3NwYWNlLnByb2plY3RJbmRleDtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEV4dGVuZHMgdGhlIG1ldGhvZCBvZiB0aGUgc3VwZXIgY2xhc3MgdG8gZ2V0IHRoZSBzZWxlY3RlZCBlbGVtZW50LlxyXG4gICAqL1xyXG4gIG1hbmFnZVNlbGVjdGlvbihlOiBNb3VzZUV2ZW50KSB7XHJcbiAgICBzdXBlci5tYW5hZ2VTZWxlY3Rpb24oZSk7XHJcbiAgICAvLyBPbmx5IGlmIGFuIGVsZW1lbnQgaGFzIGJlZW4gY2xpY2tlZCBhbmQgYWRkZWQsIHNpbmNlIGl0IGNvdWxkIGhhdmUgYmVlbiByZW1vdmVkLlxyXG4gICAgaWYgKHRoaXMuc2VsZWN0aW9uICE9PSBudWxsICYmIHRoaXMuY3VycmVudFNlbGVjdGlvbi5sZW5ndGggPiAwKSB7XHJcbiAgICAgIHRoaXMuc2hvd0VsZW1lbnREYXRhKHRoaXMuc2VsZWN0aW9uLmRhdGFzZXQuY2F0ZWdvcnksIHRoaXMuc2VsZWN0aW9uLmRhdGFzZXQuaWQpO1xyXG4gICAgICBpZiAodGhpcy5zZWxlY3Rpb24uZGF0YXNldC5jb21tZW50KSB7XHJcbiAgICAgICAgdGhpcy53b3Jrc3BhY2UuY29tbWVudEZvcm0udmlld0NvbW1lbnQodGhpcy5zZWxlY3Rpb24uZGF0YXNldC5jb21tZW50KTtcclxuICAgICAgICB0aGlzLndvcmtzcGFjZS5tYWluUGFuZWwuYWRkU2VjdGlvbignQ29tbWVudCcsIHRoaXMud29ya3NwYWNlLmNvbW1lbnRGb3JtLmZvcm1FbGVtZW50KTtcclxuICAgICAgfSBlbHNlIGlmICh0aGlzLndvcmtzcGFjZS5tYWluUGFuZWwuc2VjdGlvbnMuZmluZChzID0+IHMubmFtZSA9PT0gJ0NvbW1lbnQnKSkge1xyXG4gICAgICAgIC8vIElmIHRoZSBjb21tZW50cyBzZWN0aW9uIGlzIHRoZXJlIGZyb20gdGhlIHByZXZpb3VzIHNlbGVjdGVkIGVsZW1lbnQgaXQgc2hvdWxkIGJlIHJlbW92ZWQuXHJcbiAgICAgICAgdGhpcy53b3Jrc3BhY2UubWFpblBhbmVsLnJlbW92ZVNlY3Rpb24oJ0NvbW1lbnQnKTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIGlmICh0aGlzLmN1cnJlbnRFbGVtZW50RGF0YSkge1xyXG4gICAgICB0aGlzLmN1cnJlbnRFbGVtZW50RGF0YSA9IHVuZGVmaW5lZDtcclxuICAgICAgdGhpcy53b3Jrc3BhY2UubWFpblBhbmVsLmNsb3NlKCk7XHJcbiAgICAgIC8vIFRPRE86IENsZWFuIGRhdGEgdGFibGVzIGNvbnRlbnQuXHJcbiAgICAgIGNvbnNvbGUubG9nKCdEYXRhIHRhYmxlIGNsZWFuZWQuJyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuXHJcbiAgLyoqKioqKioqKioqKioqKioqKioqIEVMRU1FTlRTIEFTU09DSUFURUQgREFUQSAqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuICAvKipcclxuICAgKiBTaG93cyB0aGUgZGF0YSBhc3NvY2lhdGVkIHdpdGggdGhlIHNlbGVjdGVkIGVsZW1lbnQgYnkgZmV0Y2hpbmcgaXQgaWYgbmVlZGVkLlxyXG4gICAqL1xyXG4gIGFzeW5jIHNob3dFbGVtZW50RGF0YShjYXRlZ29yeTogc3RyaW5nLCBpZDogc3RyaW5nKSB7XHJcbiAgICBsZXQgc3VjY2VzcyA9IHRydWU7XHJcbiAgICBpZiAodGhpcy5lbGVtZW50c0RhdGFbY2F0ZWdvcnldKSB7XHJcbiAgICAgIHRoaXMuY3VycmVudEVsZW1lbnREYXRhID0gdGhpcy5lbGVtZW50c0RhdGFbY2F0ZWdvcnldLmluc3RhbmNlc1tpZF07XHJcbiAgICAgIGNvbnNvbGUubG9nKHRoaXMuY3VycmVudEVsZW1lbnREYXRhKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNvbnN0IGNhdGVnb3J5RGF0YSA9IHRoaXMucHJvamVjdHNEYXRhW3RoaXMucHJvamVjdEluZGV4XS5lbGVtZW50c0RhdGEuZmluZChvYmogPT4gb2JqLm5hbWUucmVwbGFjZSgnLmpzb24nLCAnJykgPT09IGNhdGVnb3J5KTtcclxuICAgICAgaWYgKGNhdGVnb3J5RGF0YSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgLy8gVE9ETzogc2hvdyBhIGxvYWRlciBpbiB0aGUgdGFibGUuXHJcbiAgICAgICAgYXdhaXQgQVBJLmdldEZpbGVDb250ZW50KGNhdGVnb3J5RGF0YS5pZCkudGhlbihyZXMgPT4ge1xyXG4gICAgICAgICAgdGhpcy5lbGVtZW50c0RhdGFbY2F0ZWdvcnldID0gSlNPTi5wYXJzZShyZXMuYm9keSk7XHJcbiAgICAgICAgICAvLyBUT0RPOiBoaWRlIHRoZSBsb2FkZXIgaW4gdGhlIHRhYmxlLlxyXG4gICAgICAgICAgdGhpcy5jdXJyZW50RWxlbWVudERhdGEgPSB0aGlzLmVsZW1lbnRzRGF0YVtjYXRlZ29yeV0uaW5zdGFuY2VzW2lkXTtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMuY3VycmVudEVsZW1lbnREYXRhKTtcclxuICAgICAgICB9LCBlcnIgPT4ge1xyXG4gICAgICAgICAgLy8gVE9ETzogaGlkZSB0aGUgbG9hZGVyIGluIHRoZSB0YWJsZS5cclxuICAgICAgICAgIHN1Y2Nlc3MgPSBmYWxzZTtcclxuICAgICAgICAgIC8vIFRPRE86IHNob3cgZXJyb3IgbWVzc2FnZS5cclxuICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ1RoZXJlIGlzIG5vIGRhdGEgZm9yIHRoYXQgZWxlbWVudC4nKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKHN1Y2Nlc3MpIHtcclxuICAgICAgLy8gU2V0cyB0aGUgY29udGVudHMgb24gdGhlIHByb3BlcnRpZXMgYW5kIHBhcmFtZXRlcnMgcGFuZWxzLlxyXG4gICAgICB0aGlzLndvcmtzcGFjZS5wcm9wc1RhYmxlc0NvbnRhaW5lci5pbm5lckhUTUwgPSB0aGlzLmNyZWF0ZURhdGFUYWJsZSh0aGlzLmN1cnJlbnRFbGVtZW50RGF0YS5wcm9wZXJ0aWVzKTtcclxuICAgICAgY29uc3Qgc2VjdGlvbnM6IFBhbmVsU2VjdGlvbltdID0gW3tcclxuICAgICAgICBuYW1lOiAnUHJvcGVydGllcycsXHJcbiAgICAgICAgYm9keTogdGhpcy53b3Jrc3BhY2UucHJvcHNUYWJsZXNDb250YWluZXJcclxuICAgICAgfV07XHJcbiAgICAgIGlmICh0aGlzLmN1cnJlbnRFbGVtZW50RGF0YS5wYXJhbWV0ZXJzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICB0aGlzLndvcmtzcGFjZS5wYXJhbXNUYWJsZXNDb250YWluZXIuaW5uZXJIVE1MID0gdGhpcy5jcmVhdGVEYXRhVGFibGUodGhpcy5jdXJyZW50RWxlbWVudERhdGEucGFyYW1ldGVycyk7XHJcbiAgICAgICAgc2VjdGlvbnMucHVzaCh7XHJcbiAgICAgICAgICBuYW1lOiAnUGFyYW1ldGVycycsXHJcbiAgICAgICAgICBib2R5OiB0aGlzLndvcmtzcGFjZS5wYXJhbXNUYWJsZXNDb250YWluZXJcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgICB0aGlzLndvcmtzcGFjZS5tYWluUGFuZWwuYWRkU2VjdGlvbnMoc2VjdGlvbnMpO1xyXG4gICAgICB0aGlzLndvcmtzcGFjZS5tYWluUGFuZWwub3BlbigpO1xyXG4gICAgICB0aGlzLmhhc1VzZWRQYW5lbCA9IHRydWU7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogQ3JlYXRlcyB2YXJpb3VzIEhUTUwgdGFibGVzIHdpdGggdGhlIGRhdGEgb2YgdGhlIG9iamVjdHMgYXJyYXkuXHJcbiAgICogRWFjaCBvYmplY3QgaW4gdGhlIGFycmF5IHNob3VsZCBjb250YWluICduYW1lJywgJ3ZhbHVlJyBhbmQgJ2NhdGVnb3J5Jy5cclxuICAgKi9cclxuICBjcmVhdGVEYXRhVGFibGUoZGF0YUVudHJpZXM6IEVsZW1lbnREYXRhRW50cnlbXSkge1xyXG4gICAgY29uc3QgY2F0ZWdvcmllc1RpdGxlczogc3RyaW5nW10gPSBbXTtcclxuICAgIGNvbnN0IGRhdGFCeUNhdGVnb3JpZXM6IHN0cmluZ1tdW10gPSBbXTtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGF0YUVudHJpZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgY29uc3QgY2F0ZWdvcnkgPSBkYXRhRW50cmllc1tpXS5jYXRlZ29yeTtcclxuICAgICAgY29uc3QgY2F0ZWdvcnlJbmRleCA9IGNhdGVnb3JpZXNUaXRsZXMuaW5kZXhPZihjYXRlZ29yeSk7XHJcbiAgICAgIGNvbnN0IHRhYmxlUm93ID0gYDx0cj48dGg+JHtkYXRhRW50cmllc1tpXS5uYW1lfTwvdGg+PHRkPiR7ZGF0YUVudHJpZXNbaV0udmFsdWV9PC90ZD48L3RyPmA7XHJcbiAgICAgIGlmIChjYXRlZ29yeUluZGV4ICE9PSAtMSkge1xyXG4gICAgICAgIGRhdGFCeUNhdGVnb3JpZXNbY2F0ZWdvcnlJbmRleF0ucHVzaCh0YWJsZVJvdyk7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgZGF0YUJ5Q2F0ZWdvcmllcy5wdXNoKFtgPHRhYmxlIGNsYXNzPVwiZGF0YS10YWJsZVwiPjx0aGVhZD48dHI+PHRoIGNvbHNwYW49XCIyXCI+JHtjYXRlZ29yeX08L3RoPjwvdHI+PC90aGVhZD5gLCB0YWJsZVJvd10pO1xyXG4gICAgICAgIGNhdGVnb3JpZXNUaXRsZXMucHVzaChjYXRlZ29yeSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGNvbnN0IGRhdGFUYWJsZTogc3RyaW5nW10gPSBbXTtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGF0YUJ5Q2F0ZWdvcmllcy5sZW5ndGg7IGkrKylcclxuICAgICAgZGF0YVRhYmxlLnB1c2goZGF0YUJ5Q2F0ZWdvcmllc1tpXS5qb2luKCcnKSArICc8L3Rib2R5PjwvdGFibGU+Jyk7XHJcblxyXG4gICAgcmV0dXJuIGRhdGFUYWJsZS5qb2luKCcnKTtcclxuICB9XHJcblxyXG5cclxuICBraWxsKCkge1xyXG4gICAgc3VwZXIua2lsbCgpO1xyXG4gICAgLy8gVE9ETzogQ2xlYXIgdGhlIGRhdGEgdGFibGUuXHJcbiAgICAvLyBUT0RPOiBJZiB0aGUgdXNlciBoYXMgdGhlIG9wdGlvbiB0byBhbmNob3IgdGhlIHBhbmVsIHRoaXMgd291bGQgYmUgd3JvbmcuXHJcbiAgICBpZiAodGhpcy53b3Jrc3BhY2UubWFpblBhbmVsLmlzT3Blbikge1xyXG4gICAgICB0aGlzLndvcmtzcGFjZS5tYWluUGFuZWwuY2xvc2UoKTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzLmhhc1VzZWRQYW5lbCkge1xyXG4gICAgICB0aGlzLndvcmtzcGFjZS5tYWluUGFuZWwucmVtb3ZlU2VjdGlvbignUHJvcGVydGllcycpO1xyXG4gICAgICB0aGlzLndvcmtzcGFjZS5tYWluUGFuZWwucmVtb3ZlU2VjdGlvbignUGFyYW1ldGVycycpO1xyXG4gICAgICAvLyBUT0RPIElmIGl0IGhhcyB1c2VkIGFsc28gdGhlIENvbW1lbnQgc2VjdGlvbiBpdCBzaG91bGQgYmUgcmVtb3ZlZC5cclxuICAgIH1cclxuICAgIGNvbnNvbGUubG9nKCdFbGVtZW50cyBkYXRhIHRvb2wgZGlzYWJsZWQuJyk7XHJcbiAgfVxyXG59IiwiaW1wb3J0IEFQSSBmcm9tICcuL2FwaSc7XHJcbmltcG9ydCBHZW5lcmljcyBmcm9tICcuL2dlbmVyaWNzJztcclxuaW1wb3J0IHR5cGUgeyBBcHBsaWNhdGlvbiB9IGZyb20gJy4vYXBwJztcclxuaW1wb3J0IHsgUHJvamVjdERhdGEgfSBmcm9tICcuL3R5cGVzJztcclxuXHJcbmV4cG9ydCBjbGFzcyBTaGFyZVByb2plY3Qge1xyXG4gIGh0bWxDb250YWluZXI6IEhUTUxFbGVtZW50O1xyXG4gIHNoYXJlRm9ybTogSFRNTEVsZW1lbnQ7XHJcbiAgc2hhcmVGb3JtRXJyb3JNc2c6IEhUTUxFbGVtZW50O1xyXG4gIGNvbmZpcm1DaGFuZ2VzQnRuczogSFRNTEVsZW1lbnQ7XHJcbiAgc2F2ZUNoYW5nZXNCdG46IEhUTUxFbGVtZW50O1xyXG4gIGNhbmNlbENoYW5nZXNCdG46IEhUTUxFbGVtZW50O1xyXG4gIHdhaXRpbmdBbmltYXRpb246IEhUTUxFbGVtZW50O1xyXG4gIGN1cnJlbnRVc2Vyc0NvbnRlbnQ6IEhUTUxFbGVtZW50O1xyXG4gIGN1cnJlbnRVc2Vyc1RhYmxlOiBIVE1MRWxlbWVudDtcclxuICBwZW5kaW5nVXNlcnNDb250ZW50OiBIVE1MRWxlbWVudDtcclxuICBwZW5kaW5nVXNlcnNUb0FkZFRhYmxlOiBIVE1MRWxlbWVudDtcclxuICBzaGFyZU5vdGlmaWNhdGlvbkNvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XHJcbiAgc2hhcmVOb3RpZmljYXRpb25JbnB1dDogSFRNTElucHV0RWxlbWVudDtcclxuICBhcHA6IEFwcGxpY2F0aW9uO1xyXG4gIC8vIFRoZSBBcHAgcHJvamVjdHNMaXN0IGlzIG5lZWRlZCB0byBnZXQgdGhlIEhUTUwgaXRlbSBvZiB0aGUgcHJvamVjdCB0byBzaGFyZS5cclxuICBwcm9qZWN0c0xpc3Q6IEhUTUxFbGVtZW50O1xyXG4gIHByb2plY3REYXRhOiBQcm9qZWN0RGF0YTtcclxuICAvLyBSZWZlcmVuY2UgdG8gdGhlIHByb2plY3QgSFRNTCBpdGVtIGVsZW1lbnQgaW4gdGhlIGxpc3QuXHJcbiAgcHJvamVjdEl0ZW06IEhUTUxFbGVtZW50O1xyXG4gIC8vIFBlcm1pc3Npb24gaWRzIHBlbmRpbmcgdG8gZGVsZXRlIGZvciB0aGUgY3VycmVudCBwcm9qZWN0LlxyXG4gIHBlbmRpbmdUb1JlbW92ZTogc3RyaW5nW10gPSBbXTtcclxuICAvLyBFbWFpbHMgdG8gc2hhcmUgd2l0aC5cclxuICBwZW5kaW5nVG9BZGQ6IHN0cmluZ1tdID0gW107XHJcblxyXG4gIGNvbnN0cnVjdG9yKHNoYXJlUHJvamVjdENvbnRhaW5lcjogSFRNTEVsZW1lbnQsIEFwcDogQXBwbGljYXRpb24pIHtcclxuICAgIHRoaXMuaHRtbENvbnRhaW5lciA9IHNoYXJlUHJvamVjdENvbnRhaW5lcjsgLy8gVGhpcyBpcyB1c2VkIGluIHRoZSBjb250ZXh0IG1lbnUgdG8gcGFzcyBpdCB0byB0aGUgc2hvd01vZGFsRGlhbG9nKClcclxuICAgIHRoaXMuc2hhcmVGb3JtID0gc2hhcmVQcm9qZWN0Q29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5zaGFyZS1mb3JtJyk7XHJcbiAgICB0aGlzLnNoYXJlRm9ybUVycm9yTXNnID0gc2hhcmVQcm9qZWN0Q29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5zaGFyZS1mb3JtID4gLmVycm9yLW1zZycpO1xyXG4gICAgdGhpcy5jb25maXJtQ2hhbmdlc0J0bnMgPSBzaGFyZVByb2plY3RDb250YWluZXIucXVlcnlTZWxlY3RvcignLm1vZGFsLW1haW4tYnRucycpO1xyXG4gICAgdGhpcy5zYXZlQ2hhbmdlc0J0biA9IHNoYXJlUHJvamVjdENvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuc2F2ZS1jaGFuZ2VzLWJ0bicpO1xyXG4gICAgdGhpcy5jYW5jZWxDaGFuZ2VzQnRuID0gc2hhcmVQcm9qZWN0Q29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5jYW5jZWwtY2hhbmdlcy1idG4nKTtcclxuICAgIHRoaXMud2FpdGluZ0FuaW1hdGlvbiA9IHNoYXJlUHJvamVjdENvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcubG9hZGVyLWNvbnRhaW5lcicpO1xyXG4gICAgdGhpcy5jdXJyZW50VXNlcnNDb250ZW50ID0gc2hhcmVQcm9qZWN0Q29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5jdXJyZW50LXVzZXJzJyk7XHJcbiAgICB0aGlzLmN1cnJlbnRVc2Vyc1RhYmxlID0gc2hhcmVQcm9qZWN0Q29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5jdXJyZW50LXVzZXJzIHRib2R5Jyk7XHJcbiAgICB0aGlzLnBlbmRpbmdVc2Vyc0NvbnRlbnQgPSBzaGFyZVByb2plY3RDb250YWluZXIucXVlcnlTZWxlY3RvcignLnBlbmRpbmctdXNlcnMnKTtcclxuICAgIHRoaXMucGVuZGluZ1VzZXJzVG9BZGRUYWJsZSA9IHNoYXJlUHJvamVjdENvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcucGVuZGluZy11c2VycyB0Ym9keScpO1xyXG4gICAgdGhpcy5zaGFyZU5vdGlmaWNhdGlvbkNvbnRhaW5lciA9IHNoYXJlUHJvamVjdENvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuc2hhcmUtbm90aWZpY2F0aW9uJyk7XHJcbiAgICB0aGlzLnNoYXJlTm90aWZpY2F0aW9uSW5wdXQgPSBzaGFyZVByb2plY3RDb250YWluZXIucXVlcnlTZWxlY3RvcignLnNoYXJlLW5vdGlmaWNhdGlvbiA+IGlucHV0Jyk7XHJcblxyXG4gICAgLy8gVGhlIEFwcCBpcyBuZWVkZWQgdG8gYWNjZXNzIHNvbWUgb2YgaXRzIG1ldGhvZHMuXHJcbiAgICB0aGlzLmFwcCA9IEFwcDtcclxuICAgIFxyXG4gICAgdGhpcy5wcm9qZWN0c0xpc3QgPSBBcHAucHJvamVjdHNMaXN0O1xyXG5cclxuICAgIHRoaXMuY3VycmVudFVzZXJzVGFibGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHtcclxuICAgICAgaWYgKChlLnRhcmdldCBhcyBIVE1MRWxlbWVudCkuY2xvc2VzdCgnW2RhdGEtYWN0aW9uXScpKSB7XHJcbiAgICAgICAgY29uc3QgYWN0aW9uQnRuID0gKGUudGFyZ2V0IGFzIEhUTUxFbGVtZW50KS5jbG9zZXN0KCdbZGF0YS1hY3Rpb25dJykgYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgICAgaWYgKGFjdGlvbkJ0bi5kYXRhc2V0LmFjdGlvbiA9PT0gJ3N0YWdlJykge1xyXG4gICAgICAgICAgdGhpcy5zdGFnZU1lbWJlclRvUmVtb3ZlKGFjdGlvbkJ0bi5wYXJlbnRFbGVtZW50IGFzIEhUTUxUYWJsZVJvd0VsZW1lbnQpO1xyXG4gICAgICAgIH0gZWxzZSB7IC8vIGUudGFyZ2V0LmRhdGFzZXQuYWN0aW9uID09PSAndW5zdGFnZSdcclxuICAgICAgICAgIHRoaXMudW5zdGFnZU1lbWJlclRvUmVtb3ZlKGFjdGlvbkJ0bi5wYXJlbnRFbGVtZW50IGFzIEhUTUxUYWJsZVJvd0VsZW1lbnQpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5wZW5kaW5nVXNlcnNUb0FkZFRhYmxlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiB7XHJcbiAgICAgIGlmICgoZS50YXJnZXQgYXMgSFRNTEVsZW1lbnQpLmNsb3Nlc3QoJ1tkYXRhLWFjdGlvbl0nKSkge1xyXG4gICAgICAgIHRoaXMudW5zdGFnZU1lbWJlclRvQWRkKChlLnRhcmdldCBhcyBIVE1MRWxlbWVudCkuY2xvc2VzdCgnW2RhdGEtYWN0aW9uXScpLnBhcmVudEVsZW1lbnQgYXMgSFRNTFRhYmxlUm93RWxlbWVudCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuc2F2ZUNoYW5nZXMgPSB0aGlzLnNhdmVDaGFuZ2VzLmJpbmQodGhpcyk7XHJcblxyXG4gICAgdGhpcy5zdGFnZU1lbWJlclRvQWRkID0gdGhpcy5zdGFnZU1lbWJlclRvQWRkLmJpbmQodGhpcyk7XHJcbiAgICB0aGlzLnNoYXJlRm9ybS5vbnN1Ym1pdCA9IHRoaXMuc3RhZ2VNZW1iZXJUb0FkZDtcclxuICB9XHJcblxyXG5cclxuICAvKipcclxuICAgKiBXaGVuIHRoZSBtb2RhbCBkaWFsb2cgdGhhdCBjb250YWlucyB0aGlzIGlzIG9wZW4gdGhpcyBtZXRob2Qgc2hvdWxkIGJlIGNhbGxlZC5cclxuICAgKi9cclxuICBzZXRVcERpYWxvZyhwcm9qZWN0RGF0YTogUHJvamVjdERhdGEpIHtcclxuICAgIC8vIFJlc2V0IHRvIGFuIGluaXRpYWwgc3RhdGUuIE1heWJlIGl0IGlzIGJldHRlciB0byBkbyB0aGlzIHdoZW4gdGhlIHByZXZpb3VzIGRpYWxvZyBpcyBjbG9zZWQ/XHJcbiAgICB0aGlzLnBlbmRpbmdUb1JlbW92ZSA9IFtdO1xyXG4gICAgR2VuZXJpY3MuZW1wdHlOb2RlKHRoaXMuY3VycmVudFVzZXJzVGFibGUpO1xyXG4gICAgdGhpcy5wZW5kaW5nVG9BZGQgPSBbXTtcclxuICAgIEdlbmVyaWNzLmVtcHR5Tm9kZSh0aGlzLnBlbmRpbmdVc2Vyc1RvQWRkVGFibGUpO1xyXG4gICAgdGhpcy5wZW5kaW5nVXNlcnNDb250ZW50LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xyXG4gICAgdGhpcy5zaGFyZU5vdGlmaWNhdGlvbkNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5jb25maXJtQ2hhbmdlc0J0bnMuY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcclxuICAgICAgdGhpcy5jb25maXJtQ2hhbmdlc0J0bnMuY2hpbGRyZW5baV0uY2xhc3NMaXN0LmFkZCgnZGlzYWJsZWQnKTtcclxuICAgIH1cclxuICAgIC8vIERpc2FibGUgdGhlIG1hbmFnZSBjaGFuZ2VzIGJ1dHRvbnMuXHJcbiAgICB0aGlzLnNhdmVDaGFuZ2VzQnRuLm9uY2xpY2sgPSBudWxsO1xyXG4gICAgdGhpcy5jYW5jZWxDaGFuZ2VzQnRuLm9uY2xpY2sgPSBudWxsO1xyXG4gICAgLy8gR2V0IHRoZSBwcm9qZWN0IGluZm8uXHJcbiAgICB0aGlzLnByb2plY3REYXRhID0gcHJvamVjdERhdGE7XHJcbiAgICB0aGlzLnByb2plY3RJdGVtID0gdGhpcy5wcm9qZWN0c0xpc3QucXVlcnlTZWxlY3RvcignYnV0dG9uW2RhdGEtcHJvai1pZD1cIicgKyBwcm9qZWN0RGF0YS5pZCArICdcIl0nKTtcclxuICAgIC8vIENyZWF0ZSBsaXN0IG9mIHVzZXJzIGlmIGFueS5cclxuICAgIGlmIChwcm9qZWN0RGF0YS5zaGFyZWQpIHtcclxuICAgICAgY29uc3QgdXNlcnM6IHN0cmluZ1tdID0gW107XHJcbiAgICAgIGNvbnN0IGN1cnJlbnRVc2VyRW1haWwgPSB3aW5kb3cuZ2V0Q3VycmVudFVzZXIoKS5lbWFpbEFkZHJlc3M7XHJcbiAgICAgIGNvbnN0IG93bmVyID0gJzx0ZCB0aXRsZT1cIlByb2plY3Qgb3duZXJcIj48c3ZnPjx1c2UgaHJlZj1cIiNrZXlJY29uXCI+PC91c2U+PC9zdmc+PC90ZD4nO1xyXG4gICAgICBjb25zdCBjb2xsYWIgPSAnPHRkIGNsYXNzPVwiYWN0aW9uLWJ0blwiIGRhdGEtYWN0aW9uPVwic3RhZ2VcIj48c3ZnPjx1c2UgaHJlZj1cIiNjcm9zc0ljb25cIj48L3VzZT48L3N2Zz48L3RkPic7XHJcbiAgICAgIHByb2plY3REYXRhLnBlcm1pc3Npb25zLmZvckVhY2godXNlciA9PiB7XHJcbiAgICAgICAgdXNlcnMucHVzaChgXHJcbiAgICAgICAgICA8dHIgZGF0YS1wZXJtaXNzaW9uPVwiJHt1c2VyLmlkfVwiPlxyXG4gICAgICAgICAgICA8dGQgY2xhc3M9XCJ1c2VyLWRhdGFcIj5cclxuICAgICAgICAgICAgICA8aW1nIHNyYz1cIiR7dXNlci5waG90b0xpbmt9XCI+XHJcbiAgICAgICAgICAgICAgPGRpdj5cclxuICAgICAgICAgICAgICAgIDxzcGFuPiR7dXNlci5lbWFpbEFkZHJlc3MgPT09IGN1cnJlbnRVc2VyRW1haWwgPyAnWW91JyA6IHVzZXIuZGlzcGxheU5hbWV9PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgPHNwYW4+JHt1c2VyLmVtYWlsQWRkcmVzc308L3NwYW4+XHJcbiAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICR7dXNlci5yb2xlID09PSAnb3duZXInID8gb3duZXIgOiBjb2xsYWJ9XHJcbiAgICAgICAgICA8L3RyPmApO1xyXG4gICAgICB9KTtcclxuICAgICAgdGhpcy5jdXJyZW50VXNlcnNUYWJsZS5pbm5lckhUTUwgPSB1c2Vycy5qb2luKCcnKTtcclxuICAgICAgLy8gU2hvdyB0aGUgdGFibGUgYmVjYXVzZSBpdCBjb3VsZCBiZSBoaWRkZW4gZnJvbSB0aGUgcHJldmlvdXMgdGltZS5cclxuICAgICAgdGhpcy5jdXJyZW50VXNlcnNDb250ZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2VtcHR5Jyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmN1cnJlbnRVc2Vyc0NvbnRlbnQuY2xhc3NMaXN0LmFkZCgnZW1wdHknKTtcclxuICAgIH1cclxuICB9XHJcblxyXG5cclxuICAvKipcclxuICAgKiBBZGQgYSBtZW1iZXIgZW1haWwgdG8gdGhlIHdhaXRpbmcgbGlzdCB0byBiZSBhZGRlZCBhcyBtZW1iZXIuXHJcbiAgICogQHBhcmFtIGUgVGhlIHN1Ym1pdCBldmVudCBvZiB0aGUgZm9ybSB0byBzdGFnZSBtZW1iZXJzIHRvIGFkZC5cclxuICAgKi9cclxuICBzdGFnZU1lbWJlclRvQWRkKGU6IEV2ZW50KSB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBjb25zdCBlbWFpbEFkZHJlc3MgPSAoKGUudGFyZ2V0IGFzIEhUTUxGb3JtRWxlbWVudCkuZWxlbWVudHMubmFtZWRJdGVtKCdlbWFpbCcpIGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlO1xyXG4gICAgaWYgKGVtYWlsQWRkcmVzcyAhPT0gJycgJiYgIXRoaXMucGVuZGluZ1RvQWRkLmluY2x1ZGVzKGVtYWlsQWRkcmVzcykgJiYgdGhpcy5wcm9qZWN0RGF0YS5wZXJtaXNzaW9ucy5maW5kKHAgPT4gcC5lbWFpbEFkZHJlc3MgPT09IGVtYWlsQWRkcmVzcykgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICB0aGlzLnNoYXJlRm9ybUVycm9yTXNnLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xyXG4gICAgICB0aGlzLnBlbmRpbmdUb0FkZC5wdXNoKGVtYWlsQWRkcmVzcyk7XHJcbiAgICAgIHRoaXMucGVuZGluZ1VzZXJzVG9BZGRUYWJsZS5pbnNlcnRBZGphY2VudEhUTUwoJ2JlZm9yZWVuZCcsIGBcclxuICAgICAgICA8dHIgZGF0YS1lbWFpbD1cIiR7ZW1haWxBZGRyZXNzfVwiPlxyXG4gICAgICAgICAgPHRkIGNsYXNzPVwidXNlci1kYXRhXCI+PHNwYW4+JHtlbWFpbEFkZHJlc3N9PC9zcGFuPjwvdGQ+XHJcbiAgICAgICAgICA8dGQgY2xhc3M9XCJhY3Rpb24tYnRuXCIgZGF0YS1hY3Rpb249XCJzdGFnZVwiPjxzdmc+PHVzZSBocmVmPVwiI2Nyb3NzSWNvblwiPjwvdXNlPjwvc3ZnPjwvdGQ+XHJcbiAgICAgICAgPC90cj5gKTtcclxuICAgICAgKChlLnRhcmdldCBhcyBIVE1MRm9ybUVsZW1lbnQpLmVsZW1lbnRzLm5hbWVkSXRlbSgnZW1haWwnKSBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZSA9ICcnO1xyXG4gICAgICAvLyBBY3Rpb25zIHdoZW4gdGhlIGZpcnN0IGVtYWlsIGlzIGFkZGVkIHRvIHRoZSB0YWJsZS5cclxuICAgICAgaWYgKHRoaXMucGVuZGluZ1RvQWRkLmxlbmd0aCA9PT0gMSkge1xyXG4gICAgICAgIHRoaXMucGVuZGluZ1VzZXJzQ29udGVudC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcclxuICAgICAgICB0aGlzLnNoYXJlTm90aWZpY2F0aW9uQ29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xyXG4gICAgICAgIHRoaXMuc2hhcmVOb3RpZmljYXRpb25JbnB1dC5jaGVja2VkID0gdHJ1ZTtcclxuICAgICAgICAvLyBJZiB0aGlzIG1ha2VzIHRoYXQgdGhlcmUgYXJlIGNoYW5nZXMgdG8gc2F2ZSBlbmFibGUgdGhlIGJ1dHRvbnMuXHJcbiAgICAgICAgaWYgKHRoaXMucGVuZGluZ1RvUmVtb3ZlLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmNvbmZpcm1DaGFuZ2VzQnRucy5jaGlsZHJlbi5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB0aGlzLmNvbmZpcm1DaGFuZ2VzQnRucy5jaGlsZHJlbltpXS5jbGFzc0xpc3QucmVtb3ZlKCdkaXNhYmxlZCcpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgLy8gRW5hYmxlIHRoZSBtYW5hZ2UgY2hhbmdlcyBidXR0b25zLlxyXG4gICAgICAgICAgdGhpcy5zYXZlQ2hhbmdlc0J0bi5vbmNsaWNrID0gdGhpcy5zYXZlQ2hhbmdlcztcclxuICAgICAgICAgIHRoaXMuY2FuY2VsQ2hhbmdlc0J0bi5vbmNsaWNrID0gdGhpcy5hcHAuY2xvc2VNb2RhbERpYWxvZztcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuc2hhcmVGb3JtRXJyb3JNc2cuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdOb3QgdmFsaWQgaW5wdXQuJyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogUmVtb3ZlcyBmcm9tIHRoZSBzdGFnZWQgc3RhdGUgYSBtZW1iZXIgcGVuZGluZyB0byBiZSBhZGRlZC5cclxuICAgKiBAcGFyYW0gZWxlbWVudCBUYWJsZSByb3cgSFRNTCBlbGVtZW50IHdpdGggdGhlIGRhdGEgb2YgdGhlIG1lbWJlciB0byB1bnN0YWdlLiBJdCBzaG91bGQgaGF2ZSBhIGRhdGEgYXR0ciB3aXRoIHRoZSBlbWFpbC5cclxuICAgKi9cclxuICB1bnN0YWdlTWVtYmVyVG9BZGQoZWxlbWVudDogSFRNTFRhYmxlUm93RWxlbWVudCkge1xyXG4gICAgY29uc3QgaXRlbUluZGV4ID0gdGhpcy5wZW5kaW5nVG9BZGQuaW5kZXhPZihlbGVtZW50LmRhdGFzZXQuZW1haWwpO1xyXG4gICAgdGhpcy5wZW5kaW5nVG9BZGQuc3BsaWNlKGl0ZW1JbmRleCwgMSk7XHJcbiAgICBlbGVtZW50LnJlbW92ZSgpO1xyXG4gICAgLy8gQWN0aW9ucyB3aGVuIHRoZSB0YWJsZSBoYXMgYmVjb21lIGVtcHR5LlxyXG4gICAgaWYgKHRoaXMucGVuZGluZ1RvQWRkLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICB0aGlzLnBlbmRpbmdVc2Vyc0NvbnRlbnQuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XHJcbiAgICAgIHRoaXMuc2hhcmVOb3RpZmljYXRpb25Db250YWluZXIuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XHJcbiAgICAgIGlmICh0aGlzLnBlbmRpbmdUb1JlbW92ZS5sZW5ndGggPT09IDApIHtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuY29uZmlybUNoYW5nZXNCdG5zLmNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICB0aGlzLmNvbmZpcm1DaGFuZ2VzQnRucy5jaGlsZHJlbltpXS5jbGFzc0xpc3QuYWRkKCdkaXNhYmxlZCcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBEaXNhYmxlIHRoZSBtYW5hZ2UgY2hhbmdlcyBidXR0b25zLlxyXG4gICAgICAgIHRoaXMuc2F2ZUNoYW5nZXNCdG4ub25jbGljayA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5jYW5jZWxDaGFuZ2VzQnRuLm9uY2xpY2sgPSBudWxsO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogQWRkcyBhIGN1cnJlbnQgbWVtYmVyIHRvIHRoZSB3YWl0aW5nIGxpc3QgdG8gYmUgcmVtb3ZlZCBhcyBtZW1iZXIuXHJcbiAgICogQHBhcmFtIGVsZW1lbnQgVGFibGUgcm93IEhUTUwgZWxlbWVudCB3aXRoIHRoZSBkYXRhIG9mIHRoZSBtZW1iZXIgdG8gZGVsZXRlLiBJdCBzaG91bGQgaGF2ZSBhIGRhdGEgYXR0ciB3aXRoIHRoZSBwZXJtaXNzaW9uIGlkLlxyXG4gICAqL1xyXG4gIHN0YWdlTWVtYmVyVG9SZW1vdmUoZWxlbWVudDogSFRNTFRhYmxlUm93RWxlbWVudCkge1xyXG4gICAgdGhpcy5wZW5kaW5nVG9SZW1vdmUucHVzaChlbGVtZW50LmRhdGFzZXQucGVybWlzc2lvbik7XHJcbiAgICAvLyBTZXQgdGhlIHJvdyBlbGVtZW50IGFzIHBlbmRpbmcgdG8gZGVsZXRlLlxyXG4gICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKCd0by1kZWxldGUnKTtcclxuICAgIC8vIENoYW5nZSB0aGUgcm93IGJ1dHRvbiBhY3Rpb24gYW5kIGljb24uXHJcbiAgICBjb25zdCBhY3Rpb25CdG4gPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hY3Rpb24tYnRuJykgYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICBhY3Rpb25CdG4uaW5uZXJIVE1MID0gJzxzdmc+PHVzZSBocmVmPVwiI3JlbG9hZEljb25cIj48L3VzZT48L3N2Zz4nO1xyXG4gICAgYWN0aW9uQnRuLmRhdGFzZXQuYWN0aW9uID0gXCJ1bnN0YWdlXCI7XHJcbiAgICAvLyBJZiB0aGlzIG1ha2VzIHRoYXQgdGhlcmUgYXJlIGNoYW5nZXMgdG8gc2F2ZSBlbmFibGUgdGhlICdjb25maXJtIGNoYW5nZXMnIGJ1dHRvbnMuXHJcbiAgICBpZiAodGhpcy5wZW5kaW5nVG9BZGQubGVuZ3RoID09PSAwICYmIHRoaXMucGVuZGluZ1RvUmVtb3ZlLmxlbmd0aCA9PT0gMSkge1xyXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuY29uZmlybUNoYW5nZXNCdG5zLmNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgdGhpcy5jb25maXJtQ2hhbmdlc0J0bnMuY2hpbGRyZW5baV0uY2xhc3NMaXN0LnJlbW92ZSgnZGlzYWJsZWQnKTtcclxuICAgICAgfVxyXG4gICAgICAvLyBFbmFibGUgdGhlIG1hbmFnZSBjaGFuZ2VzIGJ1dHRvbnMuXHJcbiAgICAgIHRoaXMuc2F2ZUNoYW5nZXNCdG4ub25jbGljayA9IHRoaXMuc2F2ZUNoYW5nZXM7XHJcbiAgICAgIHRoaXMuY2FuY2VsQ2hhbmdlc0J0bi5vbmNsaWNrID0gdGhpcy5hcHAuY2xvc2VNb2RhbERpYWxvZztcclxuICAgIH1cclxuICB9XHJcblxyXG5cclxuICAvKipcclxuICAgKiBSZW1vdmVzIGZyb20gdGhlIHN0YWdlZCBzdGF0ZSBhIG1lbWJlciBwZW5kaW5nIHRvIGJlIHJlbW92ZWQuXHJcbiAgICogQHBhcmFtIGVsZW1lbnQgVGFibGUgcm93IEhUTUwgZWxlbWVudCB3aXRoIHRoZSBkYXRhIG9mIHRoZSBtZW1iZXIgdG8gZGVsZXRlLiBJdCBzaG91bGQgaGF2ZSBhIGRhdGEgYXR0ciB3aXRoIHRoZSBwZXJtaXNzaW9uIGlkLlxyXG4gICAqL1xyXG4gIHVuc3RhZ2VNZW1iZXJUb1JlbW92ZShlbGVtZW50OiBIVE1MVGFibGVSb3dFbGVtZW50KSB7XHJcbiAgICAvLyBSZW1vdmUgdGhlIHBlcm1pc3Npb24gaWQgZnJvbSB0aGUgYXJyYXkuXHJcbiAgICBjb25zdCBpbmRleCA9IHRoaXMucGVuZGluZ1RvUmVtb3ZlLmluZGV4T2YoZWxlbWVudC5kYXRhc2V0LnBlcm1pc3Npb24pO1xyXG4gICAgdGhpcy5wZW5kaW5nVG9SZW1vdmUuc3BsaWNlKGluZGV4LCAxKTtcclxuICAgIC8vIFJlbW92ZSBpdHMgdG8tZGVsZXRlIGNsYXNzLlxyXG4gICAgZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCd0by1kZWxldGUnKTtcclxuICAgIC8vIENoYW5nZSB0aGUgcm93IGJ1dHRvbiBhY3Rpb24gYW5kIGljb24uXHJcbiAgICBjb25zdCBhY3Rpb25CdG4gPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hY3Rpb24tYnRuJykgYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICBhY3Rpb25CdG4uaW5uZXJIVE1MID0gJzxzdmc+PHVzZSBocmVmPVwiI2Nyb3NzSWNvblwiPjwvdXNlPjwvc3ZnPic7XHJcbiAgICBhY3Rpb25CdG4uZGF0YXNldC5hY3Rpb24gPSBcInN0YWdlXCI7XHJcbiAgICAvLyBJZiB0aGlzIG1ha2VzIHRoYXQgdGhlcmUgYXJlIG5vIGNoYW5nZXMgdGhlbiBkaXNhYmxlIHRoZSAnY29uZmlybSBjaGFuZ2VzJyBidXR0b25zLlxyXG4gICAgaWYgKHRoaXMucGVuZGluZ1RvUmVtb3ZlLmxlbmd0aCA9PT0gMCAmJiB0aGlzLnBlbmRpbmdUb0FkZC5sZW5ndGggPT09IDApIHtcclxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmNvbmZpcm1DaGFuZ2VzQnRucy5jaGlsZHJlbi5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIHRoaXMuY29uZmlybUNoYW5nZXNCdG5zLmNoaWxkcmVuW2ldLmNsYXNzTGlzdC5hZGQoJ2Rpc2FibGVkJyk7XHJcbiAgICAgIH1cclxuICAgICAgLy8gRGlzYWJsZSB0aGUgbWFuYWdlIGNoYW5nZXMgYnV0dG9ucy5cclxuICAgICAgdGhpcy5zYXZlQ2hhbmdlc0J0bi5vbmNsaWNrID0gbnVsbDtcclxuICAgICAgdGhpcy5jYW5jZWxDaGFuZ2VzQnRuLm9uY2xpY2sgPSBudWxsO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIFJlbW92ZXMgZnJvbSB0aGUgc3RhZ2VkIHN0YXRlIGFsbCBjdXJyZW50IG1lbWJlcnMgdGhhdCB3ZXJlIHBlbmRpbmcgdG8gYmUgcmVtb3ZlZC5cclxuICAgKi9cclxuICAvLyBUT0RPOiBDaGFuZ2UgdG8gYSByZXNldCBtZXRob2QgdGhhdCBjbGVhbnMgYW55IHN0YWdlZCBtZW1iZXI/XHJcbiAgLy8gdW5zdGFnZUFsbE1lbWJlcnNUb1JlbW92ZSgpIHtcclxuICAvLyAgIC8vIFJlbW92ZSB0aGUgcGVuZGluZyB0byBkZWx0ZSBzdGF0ZSBmcm9tIHRoZSByb3cgZWxlbWVudHMuXHJcbiAgLy8gICB0aGlzLnBlbmRpbmdUb1JlbW92ZS5mb3JFYWNoKGVsZW1lbnQgPT4ge1xyXG4gIC8vICAgICBlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ3RvLWRlbGV0ZScpO1xyXG4gIC8vICAgfSk7XHJcbiAgLy8gICAvLyBDbGVhciB0aGUgc3RhZ2VkIHVzZXJzLlxyXG4gIC8vICAgdGhpcy5wZW5kaW5nVG9SZW1vdmUgPSBbXTtcclxuICAvLyAgIC8vIElmIHRoaXMgbWFrZXMgdGhhdCB0aGVyZSBhcmUgbm8gY2hhbmdlcyB0aGVuIGRpc2FibGUgdGhlICdjb25maXJtIGNoYW5nZXMnIGJ1dHRvbnMuXHJcbiAgLy8gICBpZiAodGhpcy5wZW5kaW5nVG9BZGQubGVuZ3RoID09PSAwKSB7XHJcbiAgLy8gICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5jb25maXJtQ2hhbmdlc0J0bnMuY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcclxuICAvLyAgICAgICB0aGlzLmNvbmZpcm1DaGFuZ2VzQnRucy5jaGlsZHJlbltpXS5jbGFzc0xpc3QuYWRkKCdkaXNhYmxlZCcpO1xyXG4gIC8vICAgICB9XHJcbiAgLy8gICAgIC8vIFRPRE8gdG8gZGlzYWJsZSB0aGUgYnRucyBhZGQgdGhlIGV2ZW50IGxpc3RlbmVyIG9yIGNoYW5nZSBhIGJvb2xcclxuICAvLyAgIH1cclxuICAvLyB9XHJcblxyXG5cclxuICAvKipcclxuICAgKiBBZGRzIGFsbCBtZW1iZXJzIHRoYXQgd2VyZSBpbiB0aGUgcGVuZGluZ1RvQWRkIGFycmF5IHRvIHRoZSB0ZWFtLlxyXG4gICAqL1xyXG4gIGFkZFN0YWdlZE1lbWJlcnMoKSB7XHJcbiAgICBjb25zdCBhZGRNZW1iZXJzUHJvbWlzZXM6IFByb21pc2U8Z2FwaS5jbGllbnQuUmVzcG9uc2U8Z2FwaS5jbGllbnQuZHJpdmUuUGVybWlzc2lvbj4+W10gPSBbXTtcclxuICAgIC8vIERlbGF5IGlzIHJlcXVpcmVkIGJlY2F1c2UgR0QgQVBJIGRvZXNudCBhbGxvdyB0byBjcmVhdGUgc2V2ZXJhbCBwZXJtaXNzaW9ucyBhdCB0aGUgc2FtZSB0aW1lLlxyXG4gICAgY29uc3QgZGVsYXkgPSA2MDA7XHJcbiAgICB0aGlzLnBlbmRpbmdUb0FkZC5mb3JFYWNoKChlbWFpbCwgaSkgPT4ge1xyXG4gICAgICBhZGRNZW1iZXJzUHJvbWlzZXMucHVzaChBUEkuc2hhcmVGaWxlKHRoaXMucHJvamVjdERhdGEuaWQsIGVtYWlsLCBkZWxheSAqIGkpKTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIFByb21pc2UuYWxsKGFkZE1lbWJlcnNQcm9taXNlcyk7XHJcbiAgfVxyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogUmVtb3ZlcyBhbGwgY3VycmVudCBtZW1iZXJzIHRoYXQgd2VyZSBpbiB0aGUgcGVuZGluZ1RvUmVtb3ZlIGFycmF5IGZyb20gdGhlIHRlYW0uXHJcbiAgICovXHJcbiAgcmVtb3ZlU3RhZ2VkTWVtYmVycygpIHtcclxuICAgIGNvbnN0IHJlbW92ZU1lbWJlcnNQcm9taXNlczogUHJvbWlzZTxnYXBpLmNsaWVudC5SZXNwb25zZTx7fT4+W10gPSBbXTtcclxuICAgIHRoaXMucGVuZGluZ1RvUmVtb3ZlLmZvckVhY2gocGVybWlzc2lvbklkID0+IHtcclxuICAgICAgcmVtb3ZlTWVtYmVyc1Byb21pc2VzLnB1c2goQVBJLnN0b3BTaGFyaW5nRmlsZSh0aGlzLnByb2plY3REYXRhLmlkLCBwZXJtaXNzaW9uSWQpKTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIFByb21pc2UuYWxsKHJlbW92ZU1lbWJlcnNQcm9taXNlcyk7XHJcbiAgfVxyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogU2F2ZSBhbGwgdGhlIGNoYW5nZXMgb2YgYWRkaXRpb24gYW5kIHJlbW92YWwgb2YgbWVtYmVycy5cclxuICAgKi9cclxuICBhc3luYyBzYXZlQ2hhbmdlcygpIHtcclxuICAgIHRoaXMud2FpdGluZ0FuaW1hdGlvbi5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcclxuICAgIGxldCBhZGRpdGlvblN1Y2Nlc3MgPSB0cnVlO1xyXG4gICAgbGV0IHJlbW92YWxTdWNjZXNzID0gdHJ1ZTtcclxuICAgIC8vIFJlbW92YWwgcHJvY2Vzcy5cclxuICAgIGlmICh0aGlzLnBlbmRpbmdUb1JlbW92ZS5sZW5ndGggPiAwKSB7XHJcbiAgICAgIGF3YWl0IHRoaXMucmVtb3ZlU3RhZ2VkTWVtYmVycygpLnRoZW4ocmVzQXJyID0+IHtcclxuICAgICAgICAvLyBSZW1vdmUgdGhlIHBlcm1pc3Npb25JZHMgYWxzbyBmcm9tIHRoZSBjb3JyZXNwb25kaW5nIHByb2plY3RzRGF0YSBvYmplY3QuXHJcbiAgICAgICAgdGhpcy5wZW5kaW5nVG9SZW1vdmUuZm9yRWFjaChwZXJtaXNzaW9uSWQgPT4ge1xyXG4gICAgICAgICAgY29uc3QgaW5kZXggPSB0aGlzLnByb2plY3REYXRhLnBlcm1pc3Npb25zLmZpbmRJbmRleChwZXJtaXNzaW9uID0+IHBlcm1pc3Npb24uaWQgPT09IHBlcm1pc3Npb25JZCk7XHJcbiAgICAgICAgICB0aGlzLnByb2plY3REYXRhLnBlcm1pc3Npb25zLnNwbGljZShpbmRleCwgMSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0sIHJlaiA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2cocmVqKTtcclxuICAgICAgICByZW1vdmFsU3VjY2VzcyA9IGZhbHNlO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICAgIC8vIEFkZGl0aW9uIHByb2Nlc3MuXHJcbiAgICBpZiAodGhpcy5wZW5kaW5nVG9BZGQubGVuZ3RoID4gMCkge1xyXG4gICAgICBhd2FpdCB0aGlzLmFkZFN0YWdlZE1lbWJlcnMoKS50aGVuKHJlc0FyciA9PiB7XHJcbiAgICAgICAgLy8gJ3Jlc0FycicgaXMgYW4gYXJyYXkgd2l0aCBhbGwgdGhlIHJlc29sdmVkIHByb21pc2VzLlxyXG4gICAgICAgIHJlc0Fyci5mb3JFYWNoKChyZXMsIGkpID0+IHtcclxuICAgICAgICAgIHRoaXMucHJvamVjdERhdGEucGVybWlzc2lvbnMucHVzaCh7XHJcbiAgICAgICAgICAgIGlkOiByZXMucmVzdWx0LmlkLFxyXG4gICAgICAgICAgICBlbWFpbEFkZHJlc3M6IHRoaXMucGVuZGluZ1RvQWRkW2ldLFxyXG4gICAgICAgICAgICByb2xlOiByZXMucmVzdWx0LnJvbGUsXHJcbiAgICAgICAgICAgIGRpc3BsYXlOYW1lOiByZXMucmVzdWx0LmRpc3BsYXlOYW1lLFxyXG4gICAgICAgICAgICBwaG90b0xpbms6IHJlcy5yZXN1bHQucGhvdG9MaW5rXHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBpZiAodGhpcy5zaGFyZU5vdGlmaWNhdGlvbklucHV0LmNoZWNrZWQpIHtcclxuICAgICAgICAgIEFQSS5zZW5kU2hhcmluZ1Byb2plY3RFbWFpbCh3aW5kb3cuZ2V0Q3VycmVudFVzZXIoKS5kaXNwbGF5TmFtZSwgdGhpcy5wZW5kaW5nVG9BZGQsIHRoaXMucHJvamVjdERhdGEubmFtZSwgdGhpcy5wcm9qZWN0RGF0YS5pZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIEl0IGNvdWxkIGJlIHRoYXQgaXMgdGhlIGZpcnN0IHRpbWUgYSBjb2xsYWJvcmF0b3JcclxuICAgICAgICAvLyBpcyBhZGRlZCBzbyB0aGUgRkNNIGRldmljZSB0b2tlbiB3aWxsIGJlIGFza2VkLlxyXG4gICAgICAgIHdpbmRvdy5zYXZlTWVzc2FnaW5nRGV2aWNlVG9rZW4oKTtcclxuICAgICAgfSwgcmVqID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhyZWopO1xyXG4gICAgICAgIGFkZGl0aW9uU3VjY2VzcyA9IGZhbHNlO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICAgIC8vIEFjdGlvbnMgZGVwZW5kaW5nIG9uIHRoZSBzdWNjZXNzIG9yIGZhaWx1cmUuXHJcbiAgICBpZiAoYWRkaXRpb25TdWNjZXNzICYmIHJlbW92YWxTdWNjZXNzKSB7XHJcbiAgICAgIGlmICh0aGlzLnByb2plY3REYXRhLnBlcm1pc3Npb25zLmxlbmd0aCA9PT0gMSkgeyAvLyAxIGJlY2F1c2UgdGhlcmUgaXMgYWx3YXlzIGF0IGxlYXN0IHRoZSBvd25lci5cclxuICAgICAgICB0aGlzLnByb2plY3REYXRhLnNoYXJlZCA9IGZhbHNlO1xyXG4gICAgICAgIGlmICh0aGlzLnByb2plY3RJdGVtLnF1ZXJ5U2VsZWN0b3IoJy5zaGFyZWRJY29uJykpIHtcclxuICAgICAgICAgIHRoaXMucHJvamVjdEl0ZW0ucXVlcnlTZWxlY3RvcignLnNoYXJlZEljb24nKS5yZW1vdmUoKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5wcm9qZWN0RGF0YS5zaGFyZWQgPSB0cnVlO1xyXG4gICAgICAgIGlmICghdGhpcy5wcm9qZWN0SXRlbS5xdWVyeVNlbGVjdG9yKCcuc2hhcmVkSWNvbicpKSB7XHJcbiAgICAgICAgICB0aGlzLnByb2plY3RJdGVtLmluc2VydEFkamFjZW50SFRNTCgnYWZ0ZXJiZWdpbicsICc8aW1nIGNsYXNzPVwic2hhcmVkSWNvblwiIHNyYz1cInNyYy9hc3NldHMvaWNvbnMvc2hhcmVJY29uLnN2Z1wiPicpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICB0aGlzLmFwcC5zaG93TWVzc2FnZSgnc3VjY2VzcycsICdQcm9qZWN0IG1lbWJlcnMgdXBkYXRlZCBzdWNjZXNzZnVsbHkuJywgNTAwMCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmFwcC5zaG93TWVzc2FnZSgnZXJyb3InLCAnU29tZXRoaW5nIHdlbnQgd3JvbmcsIG1lbWJlciBjaGFuZ2VzIGNvdWxkIG5vIGJlIHNhdmVkLicpO1xyXG4gICAgfVxyXG4gICAgdGhpcy53YWl0aW5nQW5pbWF0aW9uLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xyXG4gICAgdGhpcy5hcHAuY2xvc2VNb2RhbERpYWxvZygpO1xyXG4gIH1cclxufSIsImltcG9ydCBHZW5lcmljcyBmcm9tICcuL2dlbmVyaWNzJztcclxuXHJcbmludGVyZmFjZSBOb3RpZmljYXRpb25EYXRhIHtcclxuICBhdXRob3I6IHN0cmluZztcclxuICBwcm9qZWN0TmFtZTogc3RyaW5nO1xyXG4gIHByb2plY3RJZDogc3RyaW5nO1xyXG4gIHRleHQ6IHN0cmluZztcclxuICBwaG90b0xpbms6IHN0cmluZztcclxufVxyXG5cclxuaW50ZXJmYWNlIE5vdGlmaWNhdGlvbk9iamVjdCB7XHJcbiAgaWQ6IHN0cmluZztcclxuICByZXByZXNlbnRhdGlvbjogSFRNTEVsZW1lbnQ7XHJcbiAgc3RhdGU6ICdwZW5kaW5nJyB8ICdyZWFkJztcclxuICBkYXRhOiBOb3RpZmljYXRpb25EYXRhXHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBOb3RpZmljYXRpb25zTWFuYWdlciB7XHJcbiAgbm90aWZpY2F0aW9uc0J0bjogSFRNTEVsZW1lbnQ7XHJcbiAgbm90aWZpY2F0aW9uc0NvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XHJcbiAgbm90aWZpY2F0aW9uc0xpc3Q6IEhUTUxFbGVtZW50O1xyXG4gIG5vdGlmaWNhdGlvbnM6IE5vdGlmaWNhdGlvbk9iamVjdFtdID0gW107XHJcblxyXG4gIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgdGhpcy5ub3RpZmljYXRpb25zQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25vdGlmaWNhdGlvbkJ0bicpO1xyXG4gICAgdGhpcy5ub3RpZmljYXRpb25zQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25vdGlmaWNhdGlvbnNDb250YWluZXInKTtcclxuICAgIHRoaXMubm90aWZpY2F0aW9uc0xpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbm90aWZpY2F0aW9uc0NvbnRhaW5lciA+IC5ub3RpZmljYXRpb25zLWJvZHknKTtcclxuICAgIHRoaXMubm90aWZpY2F0aW9uc0J0bi5vbmNsaWNrID0gKCkgPT4gdGhpcy5ub3RpZmljYXRpb25zQ29udGFpbmVyLmNsYXNzTGlzdC50b2dnbGUoJ29wZW4nKTtcclxuICAgIHRoaXMubm90aWZpY2F0aW9uc0xpc3QuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHtcclxuICAgICAgY29uc3QgZWxlbWVudCA9IChlLnRhcmdldCBhcyBIVE1MRWxlbWVudCkuY2xvc2VzdCgnbGknKTtcclxuICAgICAgaWYgKGVsZW1lbnQpIHtcclxuICAgICAgICB0aGlzLnZpZXdOb3RpZmljYXRpb24oZWxlbWVudC5kYXRhc2V0LmlkKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvLyBTaG93IG5vdGlmaWNhdGlvbnMgcGFuZWxcclxuICAvLyBzaG93Tm90aWZpY2F0aW9uc1BhbmVsKCkge1xyXG5cclxuICAvLyB9XHJcblxyXG4gIC8vIEhpZGUgbm90aWZpY2F0aW9ucyBwYW5lbFxyXG4gIC8vIGhpZGVOb3RpZmljYXRpb25zUGFuZWwoKSB7XHJcblxyXG4gIC8vIH1cclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIENyZWF0ZXMgYSBub3RpZmljYXRpb24gcmVwcmVzZW50YXRpb24gdGhhdCBhcHBlYXJzIGluIHRoZSBVSSBhbmQgYWRkcyBhbiBvYmplY3RcclxuICAgKiB3aXRoIGFsbCB0aGUgbm90aWZpY2F0aW9uIGRhdGEgdG8gdGhlIG5vdGlmaWNhdGlvbnMgYXJyYXkuXHJcbiAgICogICBzcmMvYXNzZXRzL2F2YXRhci1wbGFjZWhvbGRlci5wbmdcclxuICAgKi9cclxuICBjcmVhdGVOb3RpZmljYWN0aW9uKGRhdGE6IE5vdGlmaWNhdGlvbkRhdGEpIHtcclxuICAgIGNvbnN0IG5vdGlmaWNhdGlvbkVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xyXG4gICAgY29uc3Qgbm90aWZpY2F0aW9uSWQgPSBHZW5lcmljcy51dWlkdjQoKTtcclxuICAgIG5vdGlmaWNhdGlvbkVsZW1lbnQuZGF0YXNldC5pZCA9IG5vdGlmaWNhdGlvbklkO1xyXG4gICAgbm90aWZpY2F0aW9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKCdwZW5kaW5nJyk7XHJcbiAgICBub3RpZmljYXRpb25FbGVtZW50LmlubmVySFRNTCA9IGBcclxuICAgICAgPGltZyBjbGFzcz1cIm5vdGlmaWNhdGlvbi10aHVtYlwiIHNyYz1cIiR7ZGF0YS5waG90b0xpbmt9XCI+XHJcbiAgICAgIDxkaXYgY2xhc3M9XCJub3RpZmljYXRpb24tY29udGVudFwiPlxyXG4gICAgICAgIDxoND4ke2RhdGEuYXV0aG9yfSBtZW50aW9uZWQgeW91IGluIGEgY29tbWVudCBvbiB0aGUgcHJvamVjdCAke2RhdGEucHJvamVjdE5hbWV9PC9oND5cclxuICAgICAgICA8cD4ke2RhdGEudGV4dH08L3A+XHJcbiAgICAgIDwvZGl2PmA7XHJcbiAgICB0aGlzLm5vdGlmaWNhdGlvbnNMaXN0LnByZXBlbmQobm90aWZpY2F0aW9uRWxlbWVudCk7XHJcbiAgICB0aGlzLm5vdGlmaWNhdGlvbnMucHVzaCh7IGlkOiBub3RpZmljYXRpb25JZCwgcmVwcmVzZW50YXRpb246IG5vdGlmaWNhdGlvbkVsZW1lbnQsIHN0YXRlOiAncGVuZGluZycsIGRhdGE6IGRhdGEgfSk7XHJcbiAgICAvLyBFbmFibGVzIHRoZSBpY29uIHRvIGluZGljYXRlIHRoYXQgdGhlcmUgYXJlIHBlbmRpbmcgbm90aWZpY2F0aW9ucy5cclxuICAgIC8vIFRPRE86IERvbnQgZG8gaXQgZWFjaCB0aW1lLlxyXG4gICAgdGhpcy5ub3RpZmljYXRpb25zQnRuLmNsYXNzTGlzdC5hZGQoJ2VuYWJsZWQnKTtcclxuICAgIGlmICh0aGlzLm5vdGlmaWNhdGlvbnMubGVuZ3RoID09PSAxKSB7XHJcbiAgICAgIHRoaXMubm90aWZpY2F0aW9uc0NvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKCdlbXB0eScpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8gQ3VycmVudGx5IHdoZW4gYSBub3RpZmljYXRpb24gaXMgdmlzaXRlZCBpdCBpcyByZW1vdmVkXHJcbiAgLy8gYnV0IGl0IGNhbiBiZSBjaGFuZ2VkIHRvIGtlZXAgdGhlbSBpbiBoaXN0b3J5LlxyXG5cclxuICAvKipcclxuICAgKiBtYXhpbXVtIG9mIDEwIHJlYWQgbm90aWZpY2F0aW9ucyBvciBubyBsaW1pdCBpZiB0aGV5IGFyZSB1bnJlYWRcclxuICAgKi9cclxuICBkZWxldGVOb3RpZmljYWN0aW9uKG5vdGlmaWNhdGlvbklkOiBzdHJpbmcpIHtcclxuICAgIGNvbnN0IGluZGV4ID0gdGhpcy5ub3RpZmljYXRpb25zLmZpbmRJbmRleChuID0+IG4uaWQgPT09IG5vdGlmaWNhdGlvbklkKTtcclxuICAgIHRoaXMubm90aWZpY2F0aW9uc1tpbmRleF0ucmVwcmVzZW50YXRpb24ucmVtb3ZlKCk7XHJcbiAgICB0aGlzLm5vdGlmaWNhdGlvbnMuc3BsaWNlKGluZGV4LCAxKTtcclxuICAgIC8vIFRPRE86IElmIHRoZXJlIGFyZSBubyBtb3JlIG5vdGlmaWNhdGlvbnMgdGhlbiBhZGQgdGhlIGVtcHR5IGNsYXNzIHRvIHRoaXMubm90aWZpY2F0aW9uc0NvbnRhaW5lclxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVE9ETzogc2VwYXJhdGUgZ29Ub05vdGlmaWNhdGlvbiBhbmQgbWFya0FzUmVhZCA/XHJcbiAgICovXHJcbiAgdmlld05vdGlmaWNhdGlvbihub3RpZmljYXRpb25JZDogc3RyaW5nKSB7XHJcbiAgICBjb25zdCBub3RpZmljYXRpb24gPSB0aGlzLm5vdGlmaWNhdGlvbnMuZmluZChuID0+IG4uaWQgPT09IG5vdGlmaWNhdGlvbklkKTtcclxuICAgIG5vdGlmaWNhdGlvbi5zdGF0ZSA9ICdyZWFkJztcclxuICAgIG5vdGlmaWNhdGlvbi5yZXByZXNlbnRhdGlvbi5jbGFzc0xpc3QucmVtb3ZlKCdwZW5kaW5nJyk7XHJcbiAgICAvLyBUT0RPOiBnbyB0byB0aGUgbm90aWZpY2F0aW9uLCBpbiBhIG5ldyB0YWI/IHRoZSBwcm9qZWN0IGlkIGlzIGluIG5vdGlmaWNhdGlvbi5kYXRhLnByb2plY3RJZFxyXG4gICAgLy8gSWYgdGhlcmUgYXJlIG5vIG1vcmUgcGVuZGluZyBub3RpZmljYXRpb25zIHNldCB0aGUgaWNvbiBub3JtYWwuXHJcbiAgICBpZiAodGhpcy5ub3RpZmljYXRpb25zLmZpbmQobiA9PiBuLnN0YXRlID09PSAncGVuZGluZycpID09PSB1bmRlZmluZWQpXHJcbiAgICAgIHRoaXMubm90aWZpY2F0aW9uc0J0bi5jbGFzc0xpc3QucmVtb3ZlKCdlbmFibGVkJyk7XHJcbiAgICAvLyBUT0RPOiBEZWxldGUgbm90aWZpY2F0aW9uIG9yIGtlZXAgaXQgaW4gaGlzdG9yeSA/XHJcbiAgICAvLyB0aGlzLmRlbGV0ZU5vdGlmaWNhY3Rpb24obm90aWZpY2F0aW9uSWQpO1xyXG4gIH1cclxuXHJcbn1cclxuIiwiaW1wb3J0IEFQSSBmcm9tICcuL2FwaSc7XHJcbmltcG9ydCB0eXBlIHsgQXBwbGljYXRpb24gfSBmcm9tICcuL2FwcCc7XHJcblxyXG5leHBvcnQgY2xhc3MgUmVuYW1lUHJvamVjdCB7XHJcbiAgaHRtbENvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XHJcbiAgcmVuYW1lRm9ybTogSFRNTEZvcm1FbGVtZW50O1xyXG4gIGlucHV0OiBIVE1MSW5wdXRFbGVtZW50O1xyXG4gIHJlbmFtZVByb2plY3RFcnJvck1zZzogSFRNTEVsZW1lbnQ7XHJcbiAgY2FuY2VsQnRuOiBIVE1MRWxlbWVudDtcclxuICBhcHA6IEFwcGxpY2F0aW9uO1xyXG4gIHByb2plY3RMaXN0SXRlbTogSFRNTEVsZW1lbnQ7XHJcbiAgcHJvamVjdElkOiBzdHJpbmc7XHJcbiAgY3VycmVudE5hbWU6IHN0cmluZztcclxuICBlbXB0eUlucHV0VmFsdWUgPSBuZXcgUmVnRXhwKC9eKFxcc3xcXHQpKiQvKTtcclxuXHJcbiAgY29uc3RydWN0b3IocmVuYW1lUHJvamVjdENvbnRhaW5lcjogSFRNTEVsZW1lbnQsIEFwcDogQXBwbGljYXRpb24pIHtcclxuICAgIHRoaXMuaHRtbENvbnRhaW5lciA9IHJlbmFtZVByb2plY3RDb250YWluZXI7XHJcbiAgICB0aGlzLnJlbmFtZUZvcm0gPSByZW5hbWVQcm9qZWN0Q29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJ2Zvcm0nKTtcclxuICAgIHRoaXMuaW5wdXQgPSByZW5hbWVQcm9qZWN0Q29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJ2Zvcm0gPiBkaXY6Zmlyc3QtY2hpbGQgPiBpbnB1dCcpO1xyXG4gICAgdGhpcy5yZW5hbWVQcm9qZWN0RXJyb3JNc2cgPSByZW5hbWVQcm9qZWN0Q29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5lcnJvci1tc2cnKTtcclxuICAgIHRoaXMuY2FuY2VsQnRuID0gcmVuYW1lUHJvamVjdENvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCdmb3JtID4gZGl2Omxhc3QtY2hpbGQgPiAuY2FuY2VsLWJ0bicpO1xyXG5cclxuICAgIC8vIFRoZSBBcHAgaXMgbmVlZGVkIHRvIGFjY2VzcyBzb21lIG9mIGl0cyBtZXRob2RzLlxyXG4gICAgdGhpcy5hcHAgPSBBcHA7XHJcblxyXG4gICAgdGhpcy5yZW5hbWVQcm9qZWN0ID0gdGhpcy5yZW5hbWVQcm9qZWN0LmJpbmQodGhpcyk7XHJcbiAgICB0aGlzLnJlbmFtZUZvcm0ub25zdWJtaXQgPSB0aGlzLnJlbmFtZVByb2plY3Q7XHJcblxyXG4gICAgdGhpcy5jYW5jZWxCdG4ub25jbGljayA9IGUgPT4ge1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRoaXMuc2V0SW5wdXRWYWx1ZSgnJyk7XHJcbiAgICAgIEFwcC5jbG9zZU1vZGFsRGlhbG9nKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBXaGVuIHRoZSBtb2RhbCBkaWFsb2cgdGhhdCBjb250YWlucyB0aGlzIGlzIG9wZW4gdGhpcyBtZXRob2Qgc2hvdWxkIGJlIGNhbGxlZC5cclxuICAgKi9cclxuICBzZXRVcERpYWxvZyhwcm9qZWN0TGlzdEl0ZW06IEhUTUxFbGVtZW50KSB7XHJcbiAgICB0aGlzLnByb2plY3RMaXN0SXRlbSA9IHByb2plY3RMaXN0SXRlbTtcclxuICAgIHRoaXMucHJvamVjdElkID0gcHJvamVjdExpc3RJdGVtLmRhdGFzZXQucHJvaklkO1xyXG4gICAgdGhpcy5jdXJyZW50TmFtZSA9IHByb2plY3RMaXN0SXRlbS5kYXRhc2V0Lm5hbWU7XHJcbiAgICB0aGlzLnJlbmFtZVByb2plY3RFcnJvck1zZy5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcclxuICAgIHRoaXMuc2V0SW5wdXRWYWx1ZSh0aGlzLmN1cnJlbnROYW1lKTtcclxuICB9XHJcblxyXG4gIGFzeW5jIHJlbmFtZVByb2plY3QoZTogRXZlbnQpIHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIGlmICh0aGlzLmlucHV0LnZhbHVlID09PSAnJyB8fCB0aGlzLmVtcHR5SW5wdXRWYWx1ZS50ZXN0KHRoaXMuaW5wdXQudmFsdWUpKSB7XHJcbiAgICAgIHRoaXMucmVuYW1lUHJvamVjdEVycm9yTXNnLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xyXG4gICAgfSBlbHNlIGlmICh0aGlzLmlucHV0LnZhbHVlLnRyaW0oKSA9PT0gdGhpcy5jdXJyZW50TmFtZSkge1xyXG4gICAgICB0aGlzLnNldElucHV0VmFsdWUoJycpO1xyXG4gICAgICB0aGlzLmFwcC5jbG9zZU1vZGFsRGlhbG9nKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLnJlbmFtZVByb2plY3RFcnJvck1zZy5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcclxuICAgICAgdHJ5IHtcclxuICAgICAgICAvLyBUT0RPIGRpc2FibGUgYnV0dG9uIHdoaWxlIHByb2Nlc3NpbmcgYW5kIG1heWJlIGFkZCB3YWl0aW5nIGFuaW1hdGlvbi5cclxuICAgICAgICBjb25zdCBwcm9qZWN0UmVuYW1lZFJlcyA9IGF3YWl0IEFQSS5yZW5hbWVGaWxlKHRoaXMucHJvamVjdElkLCB0aGlzLmlucHV0LnZhbHVlLnRyaW0oKSk7XHJcbiAgICAgICAgaWYgKHByb2plY3RSZW5hbWVkUmVzLnN0YXR1cyA9PT0gMjAwKSB7XHJcbiAgICAgICAgICB0aGlzLnByb2plY3RMaXN0SXRlbS5xdWVyeVNlbGVjdG9yKCdoNCcpLmlubmVyVGV4dCA9IHByb2plY3RSZW5hbWVkUmVzLnJlc3VsdC5uYW1lO1xyXG4gICAgICAgICAgdGhpcy5wcm9qZWN0TGlzdEl0ZW0uZGF0YXNldC5uYW1lID0gcHJvamVjdFJlbmFtZWRSZXMucmVzdWx0Lm5hbWU7XHJcbiAgICAgICAgICB0aGlzLnNldElucHV0VmFsdWUoJycpO1xyXG4gICAgICAgICAgdGhpcy5hcHAuY2xvc2VNb2RhbERpYWxvZygpO1xyXG4gICAgICAgICAgdGhpcy5hcHAuc2hvd01lc3NhZ2UoJ3N1Y2Nlc3MnLCAnUHJvamVjdCByZW5hbWVkIHN1Y2Nlc3NmdWxseS4nLCA1MDAwKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgdGhpcy5hcHAuc2hvd01lc3NhZ2UoJ2Vycm9yJywgJ0l0IHdhcyBub3QgcG9zc2libGUgdG8gcmVuYW1lIHRoZSBwcm9qZWN0LicpO1xyXG4gICAgICAgICAgdGhpcy5hcHAuY2xvc2VNb2RhbERpYWxvZygpO1xyXG4gICAgICAgICAgY29uc29sZS5lcnJvcignU29tZXRoaW5nIHdlbnQgd3JvbmcgcmVuYW1pbmcgYSBwcm9qZWN0LiAnLCBwcm9qZWN0UmVuYW1lZFJlcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgICB0aGlzLmFwcC5zaG93TWVzc2FnZSgnZXJyb3InLCAnSXQgd2FzIG5vdCBwb3NzaWJsZSB0byByZW5hbWUgdGhlIHByb2plY3QuJyk7XHJcbiAgICAgICAgdGhpcy5hcHAuY2xvc2VNb2RhbERpYWxvZygpO1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1NvbWV0aGluZyB3ZW50IHdyb25nIHJlbmFtaW5nIGEgcHJvamVjdC4gJywgZXJyKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2V0SW5wdXRWYWx1ZSh2YWx1ZTogc3RyaW5nKSB7XHJcbiAgICB0aGlzLmlucHV0LnZhbHVlID0gdmFsdWU7XHJcbiAgfVxyXG59IiwiaW1wb3J0IEdlbmVyaWNzIGZyb20gJy4vZ2VuZXJpY3MnO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBIVE1MRWxlbWVudFdpdGhDb250ZXh0IGV4dGVuZHMgSFRNTEVsZW1lbnQge1xyXG4gIGNvbnRleHRNZW51RGF0YT86IENvbnRleHRNZW51RGF0YTtcclxufVxyXG5cclxuaW50ZXJmYWNlIENvbnRleHRNZW51SXRlbSB7XHJcbiAgbmFtZTogc3RyaW5nO1xyXG4gIGFjdGlvbjogKHRoaXM6IEdsb2JhbEV2ZW50SGFuZGxlcnMpID0+IHZvaWQ7XHJcbn1cclxuXHJcbmludGVyZmFjZSBDb250ZXh0TWVudURhdGEgZXh0ZW5kcyBBcnJheTxDb250ZXh0TWVudUl0ZW0+e31cclxuXHJcblxyXG5leHBvcnQgY2xhc3MgQ29udGV4dE1lbnUge1xyXG4gIEhUTUxDb250YWluZXI6IEhUTUxFbGVtZW50O1xyXG4gIG1lbnVMaXN0Q29udGFpbmVyOiBIVE1MRWxlbWVudDtcclxuICB2aXNpYmxlID0gZmFsc2U7XHJcblxyXG4gIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgdGhpcy5IVE1MQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICB0aGlzLkhUTUxDb250YWluZXIuaWQgPSAnY29udGV4dE1lbnUnO1xyXG4gICAgdGhpcy5tZW51TGlzdENvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3VsJyk7XHJcbiAgICB0aGlzLkhUTUxDb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5tZW51TGlzdENvbnRhaW5lcik7XHJcbiAgICB0aGlzLkhUTUxDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgaWYgKHRoaXMudmlzaWJsZSkgdGhpcy50b2dnbGVNZW51KCdoaWRlJyk7XHJcbiAgICB9KTtcclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdjb250ZXh0bWVudScsIGUgPT4ge1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIGNvbnN0IHRhcmdldEVsZW1lbnQgPSAoZS50YXJnZXQgYXMgSFRNTEVsZW1lbnQpLmNsb3Nlc3QoJ1tkYXRhLWN4bWVudV0nKSBhcyBIVE1MRWxlbWVudFdpdGhDb250ZXh0O1xyXG4gICAgICBpZiAodGFyZ2V0RWxlbWVudCAmJiB0YXJnZXRFbGVtZW50Lmhhc093blByb3BlcnR5KCdjb250ZXh0TWVudURhdGEnKSkge1xyXG4gICAgICAgIC8vIENsZWFuIHByZXZpb3VzIGNvbnRlbnQgb2YgdGhlIGNvbnRleHQgbWVudS5cclxuICAgICAgICB0aGlzLmNsZWFyTWVudSgpO1xyXG4gICAgICAgIC8vIFNldCB0aGUgbmV3IGNvbnRlbnQuXHJcbiAgICAgICAgdGhpcy5nZW5lcmF0ZU1lbnUodGFyZ2V0RWxlbWVudC5jb250ZXh0TWVudURhdGEpO1xyXG4gICAgICAgIC8vIFRoZSBwb3NpdGlvbi5cclxuICAgICAgICB0aGlzLnNldFBvc2l0aW9uKGUucGFnZVksIGUucGFnZVgpO1xyXG4gICAgICB9IGVsc2UgaWYgKHRoaXMudmlzaWJsZSkge1xyXG4gICAgICAgIHRoaXMudG9nZ2xlTWVudShcImhpZGVcIik7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgd2luZG93LmRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGhpcy5IVE1MQ29udGFpbmVyKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFRvZ2dsZXMgdGhlIHZpc2liaWxpdHkgb2YgdGhlIGNvbnRleHQgbWVudS5cclxuICAgKi9cclxuICB0b2dnbGVNZW51KGNvbW1hbmQ6ICdzaG93JyB8ICdoaWRlJykge1xyXG4gICAgdGhpcy5IVE1MQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSBjb21tYW5kID09PSBcInNob3dcIiA/IFwiYmxvY2tcIiA6IFwibm9uZVwiO1xyXG4gICAgdGhpcy52aXNpYmxlID0gIXRoaXMudmlzaWJsZTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFNldHMgdGhlIHBvc2l0aW9uIG9mIHRoZSBjb250ZXh0IG1lbnUgb24gdGhlIHdpbmRvdy5cclxuICAgKi9cclxuICBzZXRQb3NpdGlvbih0b3A6IG51bWJlciwgbGVmdDogbnVtYmVyKSB7XHJcbiAgICB0aGlzLkhUTUxDb250YWluZXIuc3R5bGUubGVmdCA9IGAke2xlZnR9cHhgO1xyXG4gICAgdGhpcy5IVE1MQ29udGFpbmVyLnN0eWxlLnRvcCA9IGAke3RvcH1weGA7XHJcbiAgICB0aGlzLnRvZ2dsZU1lbnUoXCJzaG93XCIpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogUmVtb3ZlcyB0aGUgY29udGVudHMgb2YgdGhlIGNvbnRleHQgbWVudSBhcyB3ZWxsIGFzIGFueSBhc3NvY2lhdGVkIGV2ZW50IGxpc3RlbmVyLlxyXG4gICAqL1xyXG4gIGNsZWFyTWVudSgpIHtcclxuICAgIHRoaXMubWVudUxpc3RDb250YWluZXIuY2hpbGROb2Rlcy5mb3JFYWNoKChidG46IEhUTUxFbGVtZW50KSA9PiBidG4ub25jbGljayA9IG51bGwpO1xyXG4gICAgR2VuZXJpY3MuZW1wdHlOb2RlKHRoaXMubWVudUxpc3RDb250YWluZXIpO1xyXG4gIH0gIFxyXG5cclxuICAvKipcclxuICAgKiBDcmVhdGVzIHRoZSBjb250ZW50cyBvZiB0aGUgY29udGV4dCBtZW51IGFuZCBhcHBlbmRzIHRoZW0uXHJcbiAgICovXHJcbiAgZ2VuZXJhdGVNZW51KGNvbnRleHRNZW51RGF0YTogQ29udGV4dE1lbnVEYXRhKSB7XHJcbiAgICBjb25zdCBpdGVtc0NvbnRhaW5lciA9IG5ldyBEb2N1bWVudEZyYWdtZW50KCk7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvbnRleHRNZW51RGF0YS5sZW5ndGg7IGkrKykge1xyXG4gICAgICBjb25zdCBpdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcclxuICAgICAgaXRlbS5pbm5lclRleHQgPSBjb250ZXh0TWVudURhdGFbaV0ubmFtZTtcclxuICAgICAgaXRlbS5vbmNsaWNrID0gY29udGV4dE1lbnVEYXRhW2ldLmFjdGlvbjtcclxuICAgICAgaXRlbXNDb250YWluZXIuYXBwZW5kQ2hpbGQoaXRlbSk7XHJcbiAgICB9XHJcbiAgICB0aGlzLm1lbnVMaXN0Q29udGFpbmVyLmFwcGVuZENoaWxkKGl0ZW1zQ29udGFpbmVyKTtcclxuICB9XHJcblxyXG59XHJcblxyXG4iLCJpbXBvcnQgQVBJIGZyb20gJy4vYXBpJztcclxuaW1wb3J0IHsgUHJvamVjdERhdGEgfSBmcm9tICcuL3R5cGVzJztcclxuaW1wb3J0IHR5cGUgeyBBcHBsaWNhdGlvbiB9IGZyb20gJy4vYXBwJztcclxuaW1wb3J0IHR5cGUgeyBIVE1MRWxlbWVudFdpdGhDb250ZXh0IH0gZnJvbSAnLi9jb250ZXh0TWVudSc7XHJcblxyXG5leHBvcnQgY2xhc3MgUHJvamVjdEl0ZW0ge1xyXG4gIEhUTUxDb250YWluZXI6IEhUTUxFbGVtZW50V2l0aENvbnRleHQ7XHJcblxyXG4gIGNvbnN0cnVjdG9yKHByb2plY3REYXRhOiBQcm9qZWN0RGF0YSwgYXBwOiBBcHBsaWNhdGlvbikge1xyXG4gICAgdGhpcy5IVE1MQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XHJcbiAgICAvLyBQcm9qZWN0cyB0aGF0IGhhdmUgYmVlbiB1cGxvYWRlZCBidXQgbm90IHNlbmQgdG8gdGhlIGJhY2tlbmQgaGF2ZSBhbiBpZCBvZiAndGVtcG9yYWwnLlxyXG4gICAgaWYgKHByb2plY3REYXRhLmlkID09PSAndGVtcG9yYWwnKSB7XHJcbiAgICAgIHRoaXMuSFRNTENvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCd1bnN5bmMnKTtcclxuICAgIH1cclxuICAgIHRoaXMuSFRNTENvbnRhaW5lci5kYXRhc2V0LnByb2pJZCA9IHByb2plY3REYXRhLmlkO1xyXG4gICAgdGhpcy5IVE1MQ29udGFpbmVyLmRhdGFzZXQubmFtZSA9IHByb2plY3REYXRhLm5hbWU7XHJcbiAgICB0aGlzLkhUTUxDb250YWluZXIuY2xhc3NMaXN0LmFkZCgncHJvamVjdEl0ZW0nKTtcclxuICAgIGxldCBwcm9qSXRlbUNvbnRlbnQgPSBbXTtcclxuICAgIGlmIChwcm9qZWN0RGF0YS5zaGFyZWQpIHtcclxuICAgICAgcHJvakl0ZW1Db250ZW50LnB1c2goJzxzdmcgY2xhc3M9XCJzaGFyZWRJY29uXCI+PHVzZSBocmVmPVwiI3NoYXJlZEljb25cIiAvPjwvc3ZnPicpO1xyXG4gICAgfVxyXG4gICAgaWYgKHByb2plY3REYXRhLnRodW1iSWQpIHtcclxuICAgICAgcHJvakl0ZW1Db250ZW50LnB1c2goYDxpbWcgY2xhc3M9XCJ0aHVtYlwiIHNyYz1cImh0dHBzOi8vZHJpdmUuZ29vZ2xlLmNvbS91Yz9pZD0ke3Byb2plY3REYXRhLnRodW1iSWR9XCI+YCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBwcm9qSXRlbUNvbnRlbnQucHVzaChgPHN2ZyBjbGFzcz1cInRodW1iXCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHZpZXdCb3g9XCItMTAwIC01MCAzNTAgMjEwXCI+PHBhdGggZD1cIk0xNDMsMTAuNDRINjUuMjdWN2E3LDcsMCwwLDAtNy03SDdBNyw3LDAsMCwwLDAsN1YxMDNhNyw3LDAsMCwwLDcsN0g2NVY3MC4xOEg4NVYxMTBoNThhNyw3LDAsMCwwLDctN1YxNy40MUE3LDcsMCwwLDAsMTQzLDEwLjQ0Wk0xMjUsNTMuNDlIMTA1di0yMGgyMFpcIiBzdHlsZT1cImZpbGw6I2U2ZTZlNlwiLz48L3N2Zz5gKTtcclxuICAgIH1cclxuICAgIHByb2pJdGVtQ29udGVudC5wdXNoKGA8aDQ+JHtwcm9qZWN0RGF0YS5uYW1lfTwvaDQ+YCk7XHJcbiAgICB0aGlzLkhUTUxDb250YWluZXIuaW5uZXJIVE1MID0gcHJvakl0ZW1Db250ZW50LmpvaW4oJycpO1xyXG5cclxuICAgIC8vIEluZGljYXRlIHRoYXQgdGhpcyBvYmplY3QgaGFzIGNvbnRleHQgbWVudS5cclxuICAgIHRoaXMuSFRNTENvbnRhaW5lci5kYXRhc2V0LmN4bWVudSA9ICcnO1xyXG5cclxuICAgIC8vIEFwcGVuZCBhIG5ldyBwcm9wZXJ0eSB0byB0aGUgSFRNTCBjb250YWluZXIgZWxlbWVudCB3aXRoIHRoZSBjb250ZXh0IG1lbnUgZGF0YS5cclxuICAgIHRoaXMuSFRNTENvbnRhaW5lci5jb250ZXh0TWVudURhdGEgPSBbXHJcbiAgICAgIHtcclxuICAgICAgICBuYW1lOiAnRGVsZXRlJyxcclxuICAgICAgICBhY3Rpb246ICgpID0+IHtcclxuICAgICAgICAgIGFwcC5zaG93Vmlld3BvcnREaWFsb2coJ2FjdGlvbicsIGBBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gZGVsZXRlIHRoZSAke3Byb2plY3REYXRhLm5hbWV9IHByb2plY3Q/YCwgW1xyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgbmFtZTogJ0RlbGV0ZScsXHJcbiAgICAgICAgICAgICAgZnVuY3Rpb246ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGFwcC5zaG93Vmlld3BvcnREaWFsb2coJ2xvYWRlcicsIGBEZWxldGluZyAke3Byb2plY3REYXRhLm5hbWV9IHByb2plY3QuYCk7XHJcbiAgICAgICAgICAgICAgICBBUEkuZGVsZXRlRmlsZShwcm9qZWN0RGF0YS5pZCkudGhlbihyZXMgPT4ge1xyXG4gICAgICAgICAgICAgICAgICB0aGlzLkhUTUxDb250YWluZXIucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICAgIGNvbnN0IHByb2pJbmRleCA9IGFwcC5wcm9qZWN0c0RhdGEuZmluZEluZGV4KHByb2ogPT4gcHJvai5pZCA9PT0gcHJvamVjdERhdGEuaWQpO1xyXG4gICAgICAgICAgICAgICAgICBhcHAucHJvamVjdHNEYXRhLnNwbGljZShwcm9qSW5kZXgsIDEpO1xyXG4gICAgICAgICAgICAgICAgICAvLyBUT0RPIGNoZWNrIGFsc28gaWYgaXQgaXMgaW4gdGhlIHZhbHVlIG9mIGN1cnJlbnRQcm9qZWN0IG9yIGxhc3RVcGxvYWRlZFByb2plY3QgYW5kIGRlbGV0ZSBpdCBhcyB3ZWxsXHJcbiAgICAgICAgICAgICAgICAgIGFwcC5oaWRlVmlld3BvcnRNZXNzYWdlKCk7XHJcbiAgICAgICAgICAgICAgICAgIGFwcC5zaG93TWVzc2FnZSgnc3VjY2VzcycsICdQcm9qZWN0IGRlbGV0ZWQgc3VjY2Vzc2Z1bGx5Jyk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICBuYW1lOiAnQ2FuY2VsJyxcclxuICAgICAgICAgICAgICBmdW5jdGlvbjogKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgYXBwLmhpZGVWaWV3cG9ydE1lc3NhZ2UoKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIF0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfSxcclxuICAgICAge1xyXG4gICAgICAgIG5hbWU6ICdTaGFyZSBwcm9qZWN0JyxcclxuICAgICAgICBhY3Rpb246ICgpID0+IHtcclxuICAgICAgICAgIGFwcC5zaGFyZVByb2plY3REaWFsb2cuc2V0VXBEaWFsb2cocHJvamVjdERhdGEpO1xyXG4gICAgICAgICAgYXBwLnNob3dNb2RhbERpYWxvZyhhcHAuc2hhcmVQcm9qZWN0RGlhbG9nLmh0bWxDb250YWluZXIpO1xyXG4gICAgICAgICAgYXBwLm1vZGFsRGlhbG9nQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ2dyYXlUcmFuc2x1Y2VudCcpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSxcclxuICAgICAge1xyXG4gICAgICAgIG5hbWU6ICdSZW5hbWUnLFxyXG4gICAgICAgIGFjdGlvbjogKCkgPT4ge1xyXG4gICAgICAgICAgYXBwLnJlbmFtZVByb2plY3REaWFsb2cuc2V0VXBEaWFsb2codGhpcy5IVE1MQ29udGFpbmVyKTtcclxuICAgICAgICAgIGFwcC5zaG93TW9kYWxEaWFsb2coYXBwLnJlbmFtZVByb2plY3REaWFsb2cuaHRtbENvbnRhaW5lcik7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICBdO1xyXG4gIH1cclxufSIsImltcG9ydCBBUEkgZnJvbSAnLi9hcGknO1xyXG5pbXBvcnQgeyBXb3Jrc3BhY2UgfSBmcm9tICcuL3dvcmtzcGFjZSc7XHJcbmltcG9ydCBHZW5lcmljcyBmcm9tICcuL2dlbmVyaWNzJztcclxuaW1wb3J0IHsgQWRkQ29tbWVudCB9IGZyb20gJy4vYXBwVG9vbHMvYWRkQ29tbWVudCc7XHJcbmltcG9ydCB7IFNob3dFbGVtZW50RGF0YSB9IGZyb20gJy4vYXBwVG9vbHMvZWxlbWVudERhdGEnO1xyXG5pbXBvcnQgeyBTaGFyZVByb2plY3QgfSBmcm9tICcuL3NoYXJlUHJvamVjdCc7XHJcbmltcG9ydCB7IE5vdGlmaWNhdGlvbnNNYW5hZ2VyIH0gZnJvbSAnLi9ub3RpZmljYXRpb25zTWFuYWdlcic7XHJcbmltcG9ydCB7IFJlbmFtZVByb2plY3QgfSBmcm9tICcuL3JlbmFtZVByb2plY3QnO1xyXG5pbXBvcnQgeyBDb250ZXh0TWVudSB9IGZyb20gJy4vY29udGV4dE1lbnUnO1xyXG5pbXBvcnQgeyBQcm9qZWN0SXRlbSB9IGZyb20gJy4vcHJvamVjdEl0ZW0nO1xyXG5pbXBvcnQgeyBQcm9qZWN0RGF0YSwgTm90aWZpY2F0aW9uVG9TZW5kIH0gZnJvbSAnLi90eXBlcyc7XHJcblxyXG5pbnRlcmZhY2UgRGlhbG9nQWN0aW9uIHtcclxuICBuYW1lOiBzdHJpbmc7XHJcbiAgZnVuY3Rpb246ICh0aGlzOiBHbG9iYWxFdmVudEhhbmRsZXJzLCBlOiBNb3VzZUV2ZW50KSA9PiBhbnk7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBBcHBsaWNhdGlvbiB7XHJcbiAgYXBwTWFpbkZvbGRlcklkOiBzdHJpbmc7XHJcbiAgLy8gQXJyYXkgb2Ygb2JqZWN0cyB3aXRoIGRhdGEgbGlrZSAnbmFtZScgYW5kICdpZCcgb2YgdGhlIHByb2plY3RzLlxyXG4gIHByb2plY3RzRGF0YTogUHJvamVjdERhdGFbXTtcclxuICBhcHBTZXR0aW5nc0ZvbGRlcklkOiBzdHJpbmc7XHJcbiAgdGh1bWJzRm9sZGVySWQ6IHN0cmluZztcclxuICAvLyBJZiBhIHVzZXIgaXMgbG9nZ2VkIGl0IHByb2ZpbGUgaW5mbyBpcyBzdG9yZWQgaGVyZS5cclxuICB1c2VySW5mbzogZ2FwaS5jbGllbnQuZHJpdmUuVXNlcjtcclxuICB1c2VySW5mb0NvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XHJcbiAgLy8gVGhlIGN1cnJlbnQgd29ya3NwYWNlIG9iamVjdCB3aWxsIGJlIHJlZmVyZW5jZWQgaGVyZS5cclxuICBjdXJyZW50V29ya3NwYWNlOiBXb3Jrc3BhY2U7XHJcbiAgd29ya3NwYWNlc0NvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XHJcbiAgbGFzdFVwbG9hZGVkUHJvamVjdDogUHJvamVjdERhdGE7XHJcbiAgLy8gU3RvcmVzIHRoZSBhY3RpdmUgaXRlbSBpbiB0aGUgcHJvamVjdHMgbGlzdC5cclxuICBwcmV2aW91c0FjdGl2ZUl0ZW06IEhUTUxFbGVtZW50O1xyXG4gIHByb2plY3RzTGlzdEJ0bjogSFRNTEVsZW1lbnQ7XHJcbiAgZHJhd2luZ3NCdG5zOiBIVE1MRWxlbWVudDtcclxuICB0b29sYmFyc0NvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XHJcbiAgLy8gTW9kYWwgZGlhbG9nLlxyXG4gIG1vZGFsRGlhbG9nQ29udGFpbmVyOiBIVE1MRWxlbWVudDtcclxuICBtb2RhbERpYWxvZ0NvbnRlbnQ6IEhUTUxFbGVtZW50O1xyXG4gIG1vZGFsRGlhbG9nc1N0b3JhZ2U6IEhUTUxFbGVtZW50O1xyXG4gIGNsb3NlTW9kYWxCdG46IEhUTUxFbGVtZW50O1xyXG4gIC8vIFZpZXdwb3J0IG1lc3NhZ2UuXHJcbiAgdmlld3BvcnRNZXNzYWdlOiBIVE1MRWxlbWVudDtcclxuICAvLyBQcm9qZWN0cyBsaXN0LlxyXG4gIHByb2plY3RzTGlzdENvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XHJcbiAgcHJvamVjdHNMaXN0OiBIVE1MRWxlbWVudDtcclxuICBjbG9zZVByb2plY3RzTGlzdEJ0bjogSFRNTEVsZW1lbnQ7XHJcbiAgLy8gUGFuZWxzIHN0b3JhZ2UuXHJcbiAgcGFuZWxzU3RvcmFnZTogSFRNTEVsZW1lbnQ7XHJcbiAgLy8gU2F2ZSBidXR0b24uXHJcbiAgc2F2ZUJ0bjogSFRNTEVsZW1lbnQ7XHJcbiAgLy8gVXBsb2FkIHByb2plY3QgZm9ybVxyXG4gIHVwbG9hZEZpbGVGb3JtOiBIVE1MRWxlbWVudDtcclxuICBmaWxlSW5wdXQ6IEhUTUxJbnB1dEVsZW1lbnQ7XHJcbiAgc3VibWl0RmlsZUJ0bjogSFRNTEVsZW1lbnQ7XHJcbiAgLy8gUmVuYW1lIHByb2plY3QgZm9ybVxyXG4gIHJlbmFtZVByb2plY3REaWFsb2c6IFJlbmFtZVByb2plY3Q7XHJcbiAgLy8gU2hhcmUgcHJvamVjdCBmb3JtXHJcbiAgc2hhcmVQcm9qZWN0RGlhbG9nOiBTaGFyZVByb2plY3Q7XHJcbiAgLy8gTWVzc2FnZSBjb250YWluZXJcclxuICBtZXNzYWdlQ29udGFpbmVyOiBIVE1MRWxlbWVudDtcclxuICBtZXNzYWdlVGltZXJJZDogbnVtYmVyO1xyXG4gIC8vIE5vdGlmaWNhdGlvbnMgbWFuYWdlclxyXG4gIG5vdGlmaWNhdGlvbnNNYW5hZ2VyOiBOb3RpZmljYXRpb25zTWFuYWdlcjtcclxuICAvLyBDb250ZXh0IG1lbnVcclxuICBjb250ZXh0TWVudTogQ29udGV4dE1lbnU7XHJcbiAgY29tbWVudHNDaGFuZ2VzVW5zYXZlZDogYm9vbGVhbjtcclxuXHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgICB0aGlzLnVzZXJJbmZvQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VzZXItaW5mbycpO1xyXG4gICAgdGhpcy53b3Jrc3BhY2VzQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3dvcmtzcGFjZXMnKTtcclxuICAgIHRoaXMucHJvamVjdHNMaXN0QnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2plY3RzTGlzdEJ0bicpO1xyXG4gICAgdGhpcy5kcmF3aW5nc0J0bnMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZHJhd2luZ3NCdG5zJyk7XHJcbiAgICB0aGlzLnRvb2xiYXJzQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Rvb2xiYXJzQ29udGFpbmVyJyk7XHJcbiAgICAvLyBNb2RhbCBkaWFsb2cuXHJcbiAgICB0aGlzLm1vZGFsRGlhbG9nQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21vZGFsRGlhbG9nQ29udGFpbmVyJyk7XHJcbiAgICB0aGlzLm1vZGFsRGlhbG9nQ29udGVudCA9IHRoaXMubW9kYWxEaWFsb2dDb250YWluZXIucXVlcnlTZWxlY3RvcignLm1vZGFsLWNvbnRlbnQnKTtcclxuICAgIHRoaXMubW9kYWxEaWFsb2dzU3RvcmFnZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtb2RhbERpYWxvZ3NTdG9yYWdlJyk7XHJcbiAgICB0aGlzLmNsb3NlTW9kYWxCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2xvc2VNb2RhbEJ0bicpO1xyXG4gICAgdGhpcy5jbG9zZU1vZGFsRGlhbG9nID0gdGhpcy5jbG9zZU1vZGFsRGlhbG9nLmJpbmQodGhpcyk7XHJcbiAgICB0aGlzLmNsb3NlTW9kYWxCdG4ub25jbGljayA9IHRoaXMuY2xvc2VNb2RhbERpYWxvZztcclxuICAgIC8vIFZpZXdwb3J0IG1lc3NhZ2UuXHJcbiAgICB0aGlzLnZpZXdwb3J0TWVzc2FnZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd2aWV3cG9ydE1lc3NhZ2UnKTsgLy8gVE9ETyBDcmVhdGUgYXMgYSBuZXcgY29tcG9uZW50IG9mIHRoZSB3b3Jrc3BhY2VcclxuICAgIC8vIFByb2plY3RzIGxpc3QuXHJcbiAgICB0aGlzLnByb2plY3RzTGlzdENvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9qZWN0c0xpc3RDb250YWluZXInKTtcclxuICAgIHRoaXMucHJvamVjdHNMaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2plY3RzTGlzdCcpO1xyXG4gICAgdGhpcy5jbG9zZVByb2plY3RzTGlzdEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjbG9zZVByb2plY3RzTGlzdEJ0bicpO1xyXG4gICAgLy8gUGFuZWxzIHN0b3JhZ2UuXHJcbiAgICB0aGlzLnBhbmVsc1N0b3JhZ2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGFuZWxzU3RvcmFnZScpO1xyXG4gICAgLy8gU2F2ZSBidXR0b24uXHJcbiAgICB0aGlzLnNhdmVCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2F2ZUJ0bicpO1xyXG4gICAgdGhpcy5zYXZlQ29tbWVudHNEYXRhID0gdGhpcy5zYXZlQ29tbWVudHNEYXRhLmJpbmQodGhpcyk7XHJcbiAgICB0aGlzLnNhdmVCdG4ub25jbGljayA9IHRoaXMuc2F2ZUNvbW1lbnRzRGF0YTtcclxuICAgIC8vIFByb2plY3RzIGxpc3QuXHJcbiAgICB0aGlzLmNsb3NlUHJvamVjdHNMaXN0ID0gdGhpcy5jbG9zZVByb2plY3RzTGlzdC5iaW5kKHRoaXMpO1xyXG4gICAgdGhpcy5wcm9qZWN0c0xpc3RCdG4ub25jbGljayA9ICgpID0+IHtcclxuICAgICAgaWYgKHRoaXMucHJvamVjdHNMaXN0QnRuLmRhdGFzZXQub3BlbiA9PT0gJ3RydWUnKSB7XHJcbiAgICAgICAgdGhpcy5jbG9zZVByb2plY3RzTGlzdCgpO1xyXG4gICAgICB9IGVsc2UgaWYgKHRoaXMucHJvamVjdHNMaXN0QnRuLmRhdGFzZXQub3BlbiA9PT0gJ2ZhbHNlJykge1xyXG4gICAgICAgIHRoaXMub3BlblByb2plY3RzTGlzdCgpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICB0aGlzLmNsb3NlUHJvamVjdHNMaXN0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5jbG9zZVByb2plY3RzTGlzdCk7XHJcbiAgICB0aGlzLmdvVG9Qcm9qZWN0ID0gdGhpcy5nb1RvUHJvamVjdC5iaW5kKHRoaXMpO1xyXG4gICAgdGhpcy5wcm9qZWN0c0xpc3QuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmdvVG9Qcm9qZWN0KTtcclxuICAgIC8qKioqKioqKioqKioqKioqKioqKiogVXBsb2FkIHByb2plY3QgZm9ybSAqKioqKioqKioqKioqKioqKioqKiovXHJcbiAgICB0aGlzLnVwbG9hZEZpbGVGb3JtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VwbG9hZEZpbGVGb3JtJyk7XHJcbiAgICB0aGlzLmZpbGVJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWxlSW5wdXQnKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xyXG4gICAgdGhpcy5zdWJtaXRGaWxlQnRuID0gdGhpcy51cGxvYWRGaWxlRm9ybS5xdWVyeVNlbGVjdG9yKCdidXR0b25bdHlwZT1cInN1Ym1pdFwiXScpO1xyXG4gICAgLy8gU2hvdyB0aGUgdXBsb2FkIHByb2plY3QgZm9ybS5cclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduZXdQcm9qZWN0QnRuJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuc2hvd01vZGFsRGlhbG9nKHRoaXMudXBsb2FkRmlsZUZvcm0pO1xyXG4gICAgICB0aGlzLm1vZGFsRGlhbG9nQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ2dyYXlUcmFuc2x1Y2VudCcpO1xyXG4gICAgfSk7XHJcbiAgICAvLyBIaWRlIHRoZSB1cGxvYWQgcHJvamVjdCBmb3JtLlxyXG4gICAgLy8gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Nsb3NlVXBsb2FkRm9ybScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgLy8gICB0aGlzLmNsb3NlTW9kYWxEaWFsb2codGhpcy51cGxvYWRGaWxlRm9ybSk7XHJcbiAgICAvLyAgIHRoaXMubW9kYWxEaWFsb2dDb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZSgnZ3JheVRyYW5zbHVjZW50Jyk7XHJcbiAgICAvLyB9KTtcclxuICAgIC8vIExpc3RlbiB0byBmaWxlIGlucHV0IGNoYW5nZXMuXHJcbiAgICB0aGlzLmZpbGVJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoKSA9PiB7XHJcbiAgICAgIGlmICh0aGlzLmZpbGVJbnB1dC5maWxlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgdGhpcy5maWxlSW5wdXQubmV4dEVsZW1lbnRTaWJsaW5nLmlubmVySFRNTCA9IHRoaXMuZmlsZUlucHV0LmZpbGVzWzBdLm5hbWU7XHJcbiAgICAgICAgdGhpcy5zdWJtaXRGaWxlQnRuLmNsYXNzTGlzdC5yZW1vdmUoJ2Rpc2FibGVkJyk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5maWxlSW5wdXQubmV4dEVsZW1lbnRTaWJsaW5nLmlubmVySFRNTCA9ICdDaG9vc2UgYSBmaWxlJztcclxuICAgICAgICB0aGlzLnN1Ym1pdEZpbGVCdG4uY2xhc3NMaXN0LmFkZCgnZGlzYWJsZWQnKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICAvLyBTdWJtaXQgZmlsZSBsb2dpYy5cclxuICAgIHRoaXMudXBsb2FkRmlsZUZvcm0ub25zdWJtaXQgPSBlID0+IHtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAvLyBTZXQgbG9hZGluZyBzdGF0ZSBvbiBVSS5cclxuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvYWRpbmdGaWxlJykuc3R5bGUuZGlzcGxheSA9ICd1bnNldCc7XHJcbiAgICAgIHRoaXMuc3VibWl0RmlsZUJ0bi5jbGFzc0xpc3QuYWRkKCdkaXNhYmxlZCcpO1xyXG4gICAgICB0aGlzLnN1Ym1pdEZpbGVCdG4uaW5uZXJIVE1MID0gJ1VwbG9hZGluZyBmaWxlJztcclxuICAgICAgKHRoaXMuZmlsZUlucHV0Lm5leHRFbGVtZW50U2libGluZyBhcyBIVE1MRWxlbWVudCkuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgICAgY29uc3QgZmlsZSA9ICgoZS50YXJnZXQgYXMgSFRNTEZvcm1FbGVtZW50KS5lbGVtZW50cy5uYW1lZEl0ZW0oXCJmaWxlXCIpIGFzIEhUTUxJbnB1dEVsZW1lbnQpLmZpbGVzWzBdO1xyXG4gICAgICAvLyBUT0RPOiBTaG93IHNvbWUgcmVhbCBwcm9ncmVzcyB3aGlsZSBjcmVhdGluZyB0aGUgcHJvamVjdC5cclxuICAgICAgQVBJLmNyZWF0ZVByb2plY3QoZmlsZSwgdGhpcywgdGhpcy5sYXN0VXBsb2FkZWRQcm9qZWN0KS50aGVuKChyZXM6IFByb2plY3REYXRhKSA9PiB7XHJcbiAgICAgICAgdGhpcy51cGRhdGVQcm9qZWN0c0xpc3QocmVzKTtcclxuICAgICAgICB0aGlzLmNsb3NlTW9kYWxEaWFsb2coKTtcclxuICAgICAgICB0aGlzLnNob3dNZXNzYWdlKCdzdWNjZXNzJywgJ1Byb2plY3QgdXBsb2FkZWQgc3VjY2Vzc2Z1bGx5LicpO1xyXG4gICAgICAgIHRoaXMuZmlsZUlucHV0LnZhbHVlID0gJyc7XHJcbiAgICAgICAgLy8gUmVzZXQgdXBsb2FkIGZvcm0gVUkuXHJcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvYWRpbmdGaWxlJykuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgICAgICB0aGlzLmZpbGVJbnB1dC5uZXh0RWxlbWVudFNpYmxpbmcuaW5uZXJIVE1MID0gJ0Nob29zZSBhIGZpbGUnO1xyXG4gICAgICAgIHRoaXMuc3VibWl0RmlsZUJ0bi5pbm5lckhUTUwgPSAnVXBsb2FkJztcclxuICAgICAgICAodGhpcy5maWxlSW5wdXQubmV4dEVsZW1lbnRTaWJsaW5nIGFzIEhUTUxFbGVtZW50KS5zdHlsZS5kaXNwbGF5ID0gJ3Vuc2V0JztcclxuICAgICAgfSwgZXJyID0+IHtcclxuICAgICAgICB0aGlzLmNsb3NlTW9kYWxEaWFsb2coKTtcclxuICAgICAgICB0aGlzLnVwZGF0ZVByb2plY3RzTGlzdCh0aGlzLmxhc3RVcGxvYWRlZFByb2plY3QpO1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICAvKioqKioqKioqKioqKioqKioqKiogUmVuYW1lIHByb2plY3QgZm9ybSAqKioqKioqKioqKioqKioqKioqKiovXHJcbiAgICB0aGlzLnJlbmFtZVByb2plY3REaWFsb2cgPSBuZXcgUmVuYW1lUHJvamVjdChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVuYW1lUHJvamVjdEZvcm0nKSwgdGhpcyk7XHJcbiAgICAvKioqKioqKioqKioqKioqKioqKioqIFNoYXJlIHByb2plY3QgZm9ybSAqKioqKioqKioqKioqKioqKioqKiovXHJcbiAgICB0aGlzLnNoYXJlUHJvamVjdERpYWxvZyA9IG5ldyBTaGFyZVByb2plY3QoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NoYXJlUHJvamVjdERpYWxvZycpLCB0aGlzKTtcclxuICAgIC8qKioqKioqKioqKioqKioqKioqKioqIE1lc3NhZ2UgY29udGFpbmVyICoqKioqKioqKioqKioqKioqKioqKiovXHJcbiAgICB0aGlzLm1lc3NhZ2VDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWVzc2FnZUNvbnRhaW5lcicpO1xyXG4gICAgdGhpcy5jbG9zZU1lc3NhZ2UgPSB0aGlzLmNsb3NlTWVzc2FnZS5iaW5kKHRoaXMpO1xyXG4gICAgdGhpcy5tZXNzYWdlQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvbicpLm9uY2xpY2sgPSB0aGlzLmNsb3NlTWVzc2FnZTtcclxuICAgIC8qKioqKioqKioqKioqKiogUHJvamVjdHMgbGlzdCBpdGVtcyBkaXN0cmlidXRpb24gKioqKioqKioqKioqKiovXHJcbiAgICB3aW5kb3cub25yZXNpemUgPSB0aGlzLmFkanVzdEl0ZW1zO1xyXG4gICAgLyoqKioqKioqKioqKioqKiogVG9vbHMgYnV0dG9ucyBldmVudCBsaXN0ZW5lcnMgKioqKioqKioqKioqKioqKi9cclxuICAgIC8vIFRPRE86IFRoaXMgd291bGQgbWFrZSBtb3JlIHNlbnNlIGFzIHBhcnQgb2YgdGhlIHdvcmtzcGFjZSA/XHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndG9vbC00JykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4gdGhpcy5jdXJyZW50V29ya3NwYWNlLm1hbmFnZVRvb2xzKGUsIFNob3dFbGVtZW50RGF0YSwgJ2VsZW1lbnRzRGF0YVRvb2wnKSk7XHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndG9vbC01JykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4gdGhpcy5jdXJyZW50V29ya3NwYWNlLm1hbmFnZVRvb2xzKGUsIEFkZENvbW1lbnQsICdjb21tZW50c1Rvb2wnKSk7XHJcbiAgICAvKioqKioqKioqKioqKioqKioqKiogTm90aWZpY2F0aW9ucyBtYW5hZ2VyICoqKioqKioqKioqKioqKioqKioqL1xyXG4gICAgdGhpcy5ub3RpZmljYXRpb25zTWFuYWdlciA9IG5ldyBOb3RpZmljYXRpb25zTWFuYWdlcigpO1xyXG4gICAgLyoqKioqKioqKioqKioqKioqKioqKioqKiBDb250ZXh0IG1lbnUgKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuICAgIHRoaXMuY29udGV4dE1lbnUgPSBuZXcgQ29udGV4dE1lbnUoKTtcclxuICB9XHJcblxyXG5cclxuICAvKipcclxuICAgKiBTdG9yZXMgdGhlIGN1cnJlbnQgbG9nZ2VkIHVzZXIgaW5mbyBhcyBhIHByb3BlcnR5IG9mIHRoZSBhcHAgYW5kXHJcbiAgICogcG9wdWxhdGVzIHRoZSBVSSB3aXRoIHRoZSB1c2VyIGluZm8uXHJcbiAgICovXHJcbiAgYXN5bmMgc2V0VXNlckluZm8oKSB7XHJcbiAgICBjb25zdCB1c2VySW5mb1JlcyA9IGF3YWl0IEFQSS5nZXRVc2VySW5mbygpO1xyXG4gICAgdGhpcy51c2VySW5mbyA9IEpTT04ucGFyc2UodXNlckluZm9SZXMuYm9keSkudXNlcjtcclxuICAgIHRoaXMudXNlckluZm9Db250YWluZXIuaW5uZXJIVE1MID0gYFxyXG4gICAgICA8aW1nIHNyYz0ke3RoaXMudXNlckluZm8ucGhvdG9MaW5rfT5cclxuICAgICAgPHNwYW4+XHJcbiAgICAgICAgPHNwYW4+JHt0aGlzLnVzZXJJbmZvLmRpc3BsYXlOYW1lfTwvc3Bhbj48c3BhbiBjbGFzcz1cImVtYWlsXCI+JHt0aGlzLnVzZXJJbmZvLmVtYWlsQWRkcmVzc308L3NwYW4+XHJcbiAgICAgIDwvc3Bhbj5gO1xyXG4gIH1cclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIFNhdmVzIHRoZSBjb21tZW50cyBkYXRhIHVzaW5nIHRoZSBjb21tZW50cyBhcnJheSBmcm9tIHRoZSBjdXJyZW50IHdvcmtzcGFjZS5cclxuICAgKiBJdCBhbHNvIG5vdGlmaWVzIHRoZSBtZW50aW9uZWQgY29sbGFib3JhdG9ycyBpbiB0aGUgY29tbWVudHMgaWYgYW55IHdhcyBtZW50aW9uZWQgaW4gbmV3IGNvbW1lbnRzLlxyXG4gICAqIEl0IGNyZWF0ZXMgdGhlIGZpbGUgKGNvbW1lbnRzLmpzb24pIGlmIGl0IHN0aWxsIGRvZXNudCBleGlzdCBvciB1cGRhdGVzIGl0cyBjb250ZW50cyBpZiBpdCBleGlzdHMuXHJcbiAgICovXHJcbiAgYXN5bmMgc2F2ZUNvbW1lbnRzRGF0YSgpIHtcclxuICAgIGlmICh0aGlzLmN1cnJlbnRXb3Jrc3BhY2UgJiYgdGhpcy5jdXJyZW50V29ya3NwYWNlLmNvbW1lbnRzQ2hhbmdlc1Vuc2F2ZWQpIHtcclxuICAgICAgdGhpcy5jb21tZW50c0NoYW5nZXNVbnNhdmVkID0gZmFsc2U7XHJcbiAgICAgIHRoaXMuc2F2ZUJ0bi5jbGFzc0xpc3QucmVtb3ZlKCdlbmFibGVkJyk7XHJcbiAgICAgIHRoaXMuc2F2ZUJ0bi5jbGFzc0xpc3QuYWRkKCdwcm9ncmVzcycpO1xyXG4gICAgICBsZXQgc2F2aW5nU3VjY2Vzc2Z1bDtcclxuICAgICAgLy8gQ29sbGVjdCB0aGUgZGF0YSB0byBzYXZlIGluIGJhY2tlbmQuXHJcbiAgICAgIGNvbnN0IGRhdGFUb1NhdmU6IE9iamVjdFtdID0gW107XHJcbiAgICAgIHRoaXMuY3VycmVudFdvcmtzcGFjZS5jb21tZW50cy5mb3JFYWNoKGNvbW1lbnQgPT4ge1xyXG4gICAgICAgIGRhdGFUb1NhdmUucHVzaCh7XHJcbiAgICAgICAgICBlbGVtZW50c0lkczogY29tbWVudC5lbGVtZW50c0lkcyxcclxuICAgICAgICAgIGNvbnRlbnQ6IGNvbW1lbnQuY29udGVudCxcclxuICAgICAgICAgIG1lbnRpb25zOiBjb21tZW50Lm1lbnRpb25zXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0pO1xyXG4gICAgICBjb25zdCBqc29uRGF0YVRvU2F2ZSA9IEpTT04uc3RyaW5naWZ5KGRhdGFUb1NhdmUpO1xyXG4gICAgICAvLyBJZiB0aGVyZSBpcyBubyBpZCBmb3IgdGhlIGNvbW1lbnRzLmpzb24gZmlsZSBjcmVhdGUgdGhlIGZpbGUgd2l0aCB0aGUgY29udGVudHMgYW5kIGdldCB0aGUgaWQgb2YgaXQuXHJcbiAgICAgIGlmICghdGhpcy5jdXJyZW50V29ya3NwYWNlLmNvbW1lbnRzRmlsZUlkKSB7XHJcbiAgICAgICAgY29uc3QgY29tbWVudHNGaWxlQ3JlYXRpb25SZXMgPSBhd2FpdCBBUEkudXBsb2FkRmlsZShqc29uRGF0YVRvU2F2ZSwgJ2FwcGxpY2F0aW9uL2pzb24nLCAnY29tbWVudHMuanNvbicsIHRoaXMuY3VycmVudFdvcmtzcGFjZS5wcm9qZWN0SWQpO1xyXG4gICAgICAgIGlmIChjb21tZW50c0ZpbGVDcmVhdGlvblJlcy5vayAmJiBjb21tZW50c0ZpbGVDcmVhdGlvblJlcy5zdGF0dXMgPT09IDIwMCkge1xyXG4gICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgZGVjb2RlciA9IG5ldyBUZXh0RGVjb2RlcigndXRmLTgnKTtcclxuICAgICAgICAgICAgbGV0IHsgdmFsdWUsIGRvbmUgfSA9IGF3YWl0IGNvbW1lbnRzRmlsZUNyZWF0aW9uUmVzLmJvZHkuZ2V0UmVhZGVyKCkucmVhZCgpO1xyXG4gICAgICAgICAgICBjb25zdCBpZCA9IEpTT04ucGFyc2UoZGVjb2Rlci5kZWNvZGUodmFsdWUpKS5pZDtcclxuICAgICAgICAgICAgLy8gU2V0IHRoZSBpZCBvZiB0aGUgY29tbWVudHMuanNvbiBmaWxlIHRoYXQgaGFzIGJlZW4gY3JlYXRlZC5cclxuICAgICAgICAgICAgdGhpcy5jdXJyZW50V29ya3NwYWNlLmNvbW1lbnRzRmlsZUlkID0gaWQ7XHJcbiAgICAgICAgICAgIHNhdmluZ1N1Y2Nlc3NmdWwgPSB0cnVlO1xyXG4gICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdFcnJvciBkZWNvZGluZyB0aGUgbmV3IGNvbW1lbnRzLmpzb24gZmlsZSBpZDogJywgZXJyKTsgLy8gSlNPTi5wYXJzZShlcnIuYm9keSkuZXJyb3IubWVzc2FnZVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBzYXZpbmdTdWNjZXNzZnVsID0gZmFsc2U7XHJcbiAgICAgICAgICAvLyBUT0RPOiBEZWxldGUgZXhpc3RpbmcgY3JlYXRlZCBmaWxlL3Mgd2l0aCBuYW1lICdjb21tZW50cy5qc29uJywgaWYgdGhlcmUgaXMgbm8gaWQgdGhlbiB1c2UgdGhlIG5hbWU/XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vIFVwZGF0ZSB0aGUgZXhpc3RpbmcgY29tbWVudHMuanNvbiBmaWxlLlxyXG4gICAgICAgIGNvbnN0IGNvbW1lbnRzRmlsZVVwZGF0ZVJlcyA9IGF3YWl0IEFQSS51cGRhdGVGaWxlQ29udGVudChqc29uRGF0YVRvU2F2ZSwgJ2FwcGxpY2F0aW9uL2pzb24nLCB0aGlzLmN1cnJlbnRXb3Jrc3BhY2UuY29tbWVudHNGaWxlSWQpO1xyXG4gICAgICAgIGlmIChjb21tZW50c0ZpbGVVcGRhdGVSZXMub2sgJiYgY29tbWVudHNGaWxlVXBkYXRlUmVzLnN0YXR1cyA9PT0gMjAwKSB7XHJcbiAgICAgICAgICBzYXZpbmdTdWNjZXNzZnVsID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgLy8gSWYgc2F2aW5nU3VjY2Vzc2Z1bCBwcm9jZWVkIHdpdGggdGhlIG5vdGlmaWNhdGlvbnMgaWYgYW55LlxyXG4gICAgICBpZiAoc2F2aW5nU3VjY2Vzc2Z1bCAmJiB0aGlzLmN1cnJlbnRXb3Jrc3BhY2UucGVuZGluZ05vdGlmaWNhdGlvbnNUb1NlbmQubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIGNvbnN0IG5vdGlmaWNhdGlvbnNQcm9taXNlczogUHJvbWlzZTxSZXNwb25zZT5bXSA9IFtdO1xyXG4gICAgICAgIHRoaXMuY3VycmVudFdvcmtzcGFjZS5wZW5kaW5nTm90aWZpY2F0aW9uc1RvU2VuZC5mb3JFYWNoKChuOiBOb3RpZmljYXRpb25Ub1NlbmQpID0+IHsgLy8gVE9ETyBjaGFuZ2UgYW55XHJcbiAgICAgICAgICBjb25zdCBub3RpZmljYXRpb25Qcm9taXNlID0gQVBJLnNlbmROb3RpZmljYXRpb24obi5lbWFpbHMsIG4udXNlck5hbWUsIG4udXNlclBob3RvLCBuLnRleHRDb250ZW50LCBuLnByb2plY3ROYW1lLCBuLnByb2plY3RJZCk7XHJcbiAgICAgICAgICBub3RpZmljYXRpb25zUHJvbWlzZXMucHVzaChub3RpZmljYXRpb25Qcm9taXNlKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChub3RpZmljYXRpb25zUHJvbWlzZXMpLnRoZW4ocmVzcG9uc2VzID0+IHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKCdVc2VycyBub3RpZmllZCBzdWNjZXNzZnVsbHknKTtcclxuICAgICAgICAgIHRoaXMuY3VycmVudFdvcmtzcGFjZS5wZW5kaW5nTm90aWZpY2F0aW9uc1RvU2VuZC5sZW5ndGggPSAwO1xyXG4gICAgICAgICAgLy8gcmVzcG9uc2VzLmZvckVhY2gocmVzID0+IGNvbnNvbGUubG9nKHJlcykpO1xyXG4gICAgICAgIH0sIGVyciA9PiB7XHJcbiAgICAgICAgICBjb25zb2xlLndhcm4oJ1VzZXJzIGNvdWxkblxcJ3QgYmUgbm90aWZpZWQuICcsIGVycik7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHNhdmluZ1N1Y2Nlc3NmdWwpIHtcclxuICAgICAgICB0aGlzLnNhdmVCdG4uY2xhc3NMaXN0LnJlbW92ZSgncHJvZ3Jlc3MnKTtcclxuICAgICAgICB0aGlzLnNhdmVCdG4uY2xhc3NMaXN0LmFkZCgnZGlzYWJsZWQnKTtcclxuICAgICAgICBjb25zb2xlLmxvZygnRGF0YSBzYXZlZCBzdWNjZXNzZnVsbHkuJyk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5jb21tZW50c0NoYW5nZXNVbnNhdmVkID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLnNhdmVCdG4uY2xhc3NMaXN0LnJlbW92ZSgncHJvZ3Jlc3MnKTtcclxuICAgICAgICB0aGlzLnNhdmVCdG4uY2xhc3NMaXN0LmFkZCgnZW5hYmxlZCcpO1xyXG4gICAgICAgIHRoaXMuc2hvd01lc3NhZ2UoJ2Vycm9yJywgJ1NvbWV0aGluZyB3ZW50IHdyb25nIGFuZCBkYXRhIGNvdWxkIG5vdCBiZSBzYXZlZC4nKTtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdTb21ldGhpbmcgd2VudCB3cm9uZyB0cnlpbmcgdG8gc2F2ZS4gUmV0cnkgYWdhaW4uJyk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG5cclxuICAvKioqKioqKioqKioqKioqKioqKioqKioqIFRIRSBQUk9KRUNUUyBMSVNUICoqKioqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbiAgLyoqXHJcbiAgICogU2VsZWN0cyBhIHByb2plY3QgZnJvbSB0aGUgbGlzdCBhbmQgbWFuYWdlcyBpdHMgcmVzb3VyY2VzIGJlZm9yZSBvcGVuaW5nIHRoZSBwcm9qZWN0LlxyXG4gICAqIEBwYXJhbSBlIE1vdXNlIGNsaWNrIGV2ZW50LlxyXG4gICAqL1xyXG4gIGdvVG9Qcm9qZWN0KGU6IE1vdXNlRXZlbnQpIHtcclxuICAgIGNvbnN0IHByb2plY3RJdGVtID0gKGUudGFyZ2V0IGFzIEhUTUxFbGVtZW50KS5jbG9zZXN0KCdbZGF0YS1wcm9qLWlkXScpIGFzIEhUTUxFbGVtZW50O1xyXG4gICAgaWYgKHByb2plY3RJdGVtID09PSBudWxsKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIC8vIElmIGl0IGlzIHRoZSBjdXJyZW50IHByb2plY3QgY2xvc2UgdGhlIGxpc3Qgd2luZG93LlxyXG4gICAgaWYgKHRoaXMuY3VycmVudFdvcmtzcGFjZSAmJiB0aGlzLmN1cnJlbnRXb3Jrc3BhY2UucHJvamVjdElkID09PSBwcm9qZWN0SXRlbS5kYXRhc2V0LnByb2pJZCkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICAvLyBUT0RPOiBJZiB0aGVyZSBoYXZlIGJlZW4gY2hhbmdlcyBpbiB0aGUgcHJvamVjdCBhc2sgdG8gc2F2ZSBvciBkaXNjYXJkIHRoZW0gYmVmb3JlIGNsb3NpbmcgaXQuXHJcbiAgICAvLyBUT0RPOiBJZiBpdCB3YXMgYW4gb2ZmbGluZSBwcm9qZWN0IHRyeSB0byBzeW5jIGl0IGJlZm9yZSBjbG9zaW5nIGl0LiBUaGUgaWQgd291bGQgYmUgJ3RlbXBvcmFsJyBhbmQgdGhlIGNvbnRlbnRzIGluIGN1cnJlbnRQcm9qZWN0XHJcbiAgICBpZiAodGhpcy5sYXN0VXBsb2FkZWRQcm9qZWN0ICYmIHByb2plY3RJdGVtLmRhdGFzZXQucHJvaklkID09PSB0aGlzLmxhc3RVcGxvYWRlZFByb2plY3QuaWQpIHtcclxuICAgICAgaWYgKHRoaXMubGFzdFVwbG9hZGVkUHJvamVjdC5pZCA9PT0gJ3RlbXBvcmFsJykge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdTaG93IGEgbWVzc2FnZSBpbmRpY2F0aW5nIHRoYXQgdGhlIHByb2plY3QgY2FuIGJlIGFjY2Vzc2VkIGJ1dCBpbiB2aWV3ZXIgbW9kZSBiZWNhdXNlIGl0IGNvdWxkbnQgYmUgc2F2ZWQuJyk7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5vcGVuUHJvamVjdCh0aGlzLmxhc3RVcGxvYWRlZFByb2plY3QpO1xyXG4gICAgICBpZiAodGhpcy5wcmV2aW91c0FjdGl2ZUl0ZW0pIHtcclxuICAgICAgICB0aGlzLnByZXZpb3VzQWN0aXZlSXRlbS5jbGFzc0xpc3QucmVtb3ZlKCdjdXJyZW50Jyk7XHJcbiAgICAgIH1cclxuICAgICAgcHJvamVjdEl0ZW0uY2xhc3NMaXN0LmFkZCgnY3VycmVudCcpO1xyXG4gICAgICB0aGlzLnByZXZpb3VzQWN0aXZlSXRlbSA9IHByb2plY3RJdGVtO1xyXG4gICAgICB0aGlzLnByb2plY3RzTGlzdEJ0bi5zdHlsZS5kaXNwbGF5ID0gJ3Vuc2V0JztcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuc2hvd1ZpZXdwb3J0RGlhbG9nKCdsb2FkZXInLCBgTG9hZGluZyBwcm9qZWN0ICR7cHJvamVjdEl0ZW0uZGF0YXNldC5uYW1lfWApO1xyXG4gICAgICBBUEkuZmV0Y2hQcm9qZWN0KHByb2plY3RJdGVtLmRhdGFzZXQucHJvaklkLCB0aGlzKVxyXG4gICAgICAgIC50aGVuKHJlcyA9PiB7XHJcbiAgICAgICAgICB0aGlzLm9wZW5Qcm9qZWN0KHJlcyk7XHJcbiAgICAgICAgICBpZiAodGhpcy5wcmV2aW91c0FjdGl2ZUl0ZW0pIHtcclxuICAgICAgICAgICAgdGhpcy5wcmV2aW91c0FjdGl2ZUl0ZW0uY2xhc3NMaXN0LnJlbW92ZSgnY3VycmVudCcpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgcHJvamVjdEl0ZW0uY2xhc3NMaXN0LmFkZCgnY3VycmVudCcpO1xyXG4gICAgICAgICAgdGhpcy5wcmV2aW91c0FjdGl2ZUl0ZW0gPSBwcm9qZWN0SXRlbTtcclxuICAgICAgICAgIHRoaXMucHJvamVjdHNMaXN0QnRuLnN0eWxlLmRpc3BsYXkgPSAndW5zZXQnO1xyXG4gICAgICAgICAgdGhpcy5oaWRlVmlld3BvcnRNZXNzYWdlKCk7XHJcbiAgICAgICAgfSwgZXJyID0+IHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBDcmVhdGVzIGEgd29ya3NwYWNlIHdpdGggdGhlIHByb3ZpZGVkIHByb2plY3QuXHJcbiAgICovXHJcbiAgb3BlblByb2plY3QocHJvamVjdDogUHJvamVjdERhdGEpIHtcclxuICAgIGlmICh0aGlzLmN1cnJlbnRXb3Jrc3BhY2UpIHtcclxuICAgICAgdGhpcy5jdXJyZW50V29ya3NwYWNlLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgICB0aGlzLmN1cnJlbnRXb3Jrc3BhY2UgPSBuZXcgV29ya3NwYWNlKHByb2plY3QsIHRoaXMpO1xyXG4gICAgdGhpcy5wcm9qZWN0c0xpc3RDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgIGhpc3RvcnkucmVwbGFjZVN0YXRlKHsgcHJvamVjdFRpdGxlOiBwcm9qZWN0Lm5hbWUgfSwgcHJvamVjdC5uYW1lLCBcIj9pZD1cIiArIHByb2plY3QuaWQpOyAvLyBlbmNvZGVVUklDb21wb25lbnQgPyB1c2UgcHVzaFN0YXRlKCkgP1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ2xvc2VzIHRoZSBwcm9qZWN0cyBsaXN0IGFuZCBzaG93cyB0aGUgY3VycmVudCBwcm9qZWN0IHRvb2xiYXIuXHJcbiAgICogU2V0cyB0aGUgc3RhdGUgb2YgdGhlIHVpIGFzIHByb2plY3RzIGxpc3QgY2xvc2VkLlxyXG4gICAqL1xyXG4gIGNsb3NlUHJvamVjdHNMaXN0KCkge1xyXG4gICAgdGhpcy5wcm9qZWN0c0xpc3RDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgIHRoaXMuZHJhd2luZ3NCdG5zLnN0eWxlLmRpc3BsYXkgPSAndW5zZXQnO1xyXG4gICAgdGhpcy50b29sYmFyc0NvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xyXG4gICAgdGhpcy5wcm9qZWN0c0xpc3RCdG4uZGF0YXNldC5vcGVuID0gJ2ZhbHNlJztcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIE9wZW5zIHRoZSBsaXN0IG9mIHByb2plY3RzIGNvbnRhaW5lciBhbmQgZmV0Y2hlcyBwcm9qZWN0cyBpZiByZXF1aXJlZC5cclxuICAgKiBTZXRzIHRoZSBzdGF0ZSBvZiB0aGUgdWkgYXMgcHJvamVjdHMgbGlzdCBjbG9zZWQuXHJcbiAgICovXHJcbiAgb3BlblByb2plY3RzTGlzdCgpIHtcclxuICAgIGlmICh0aGlzLmN1cnJlbnRXb3Jrc3BhY2UgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICB0aGlzLmNsb3NlUHJvamVjdHNMaXN0QnRuLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5jbG9zZVByb2plY3RzTGlzdEJ0bi5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcclxuICAgIH1cclxuICAgIHRoaXMucHJvamVjdHNMaXN0Q29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xyXG4gICAgdGhpcy5wcm9qZWN0c0xpc3RCdG4uZGF0YXNldC5vcGVuID0gJ3RydWUnO1xyXG4gICAgLy8gSGlkZSB0aGUgZHJhd2luZ3MgYW5kIHRvb2xzIGJ1dHRvbnNcclxuICAgIHRoaXMuZHJhd2luZ3NCdG5zLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICB0aGlzLnRvb2xiYXJzQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICAvLyBJZiB0aGVyZSBpcyBubyBwcm9qZWN0c0RhdGEgb3IgaWYgdGhlcmUgaXMgb25seSBvbmUgZmV0Y2ggcHJvamVjdHMuXHJcbiAgICBpZiAodGhpcy5wcm9qZWN0c0RhdGEgPT09IHVuZGVmaW5lZCB8fCB0aGlzLnByb2plY3RzRGF0YS5sZW5ndGggPD0gMSkge1xyXG4gICAgICB0aGlzLnNob3dWaWV3cG9ydERpYWxvZygnbG9hZGVyJywgJ0xvYWRpbmcgcHJvamVjdHMnKTtcclxuICAgICAgQVBJLmxpc3RQcm9qZWN0SXRlbXModGhpcykudGhlbigocmVzOiBQcm9qZWN0RGF0YVtdKSA9PiB7XHJcbiAgICAgICAgdGhpcy5jcmVhdGVIVE1MUHJvamVjdHNMaXN0KHJlcyk7XHJcbiAgICAgICAgLy8gU2V0IHRoZSAnY3VycmVudCcgY2xhc3MgaW4gdGhlIGN1cnJlbnQgcHJvamVjdC5cclxuICAgICAgICB0aGlzLnByb2plY3RzTGlzdC5jaGlsZE5vZGVzLmZvckVhY2goKHByb2o6IEhUTUxFbGVtZW50KSA9PiB7XHJcbiAgICAgICAgICBpZiAocHJvai5kYXRhc2V0ICYmIHByb2ouZGF0YXNldC5wcm9qSWQgPT09IHRoaXMuY3VycmVudFdvcmtzcGFjZS5wcm9qZWN0SWQpIHtcclxuICAgICAgICAgICAgcHJvai5jbGFzc0xpc3QuYWRkKCdjdXJyZW50Jyk7XHJcbiAgICAgICAgICAgIHRoaXMucHJldmlvdXNBY3RpdmVJdGVtID0gcHJvajtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmhpZGVWaWV3cG9ydE1lc3NhZ2UoKTtcclxuICAgICAgfSwgcmVqID0+IHtcclxuICAgICAgICB0aGlzLnByb2plY3RzTGlzdC5pbm5lckhUTUwgPSAnPHAgY2xhc3M9XCJlbXB0eS1tc2dcIj5UaGVyZSBhcmUgbm8gcHJvamVjdHMuIFVwbG9hZCBvbmUhPC9wPic7XHJcbiAgICAgICAgdGhpcy5oaWRlVmlld3BvcnRNZXNzYWdlKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogUmVjZWl2ZXMgYW4gYXJyYXkgb2YgcHJvamVjdHMgZGF0YSBhbmQgY3JlYXRlcyBhbmQgYXBwZW5kcyB0aGUgSFRNTCBpdGVtcy5cclxuICAgKi9cclxuICBjcmVhdGVIVE1MUHJvamVjdHNMaXN0KHByb2plY3RzRGF0YTogUHJvamVjdERhdGFbXSkge1xyXG4gICAgcHJvamVjdHNEYXRhLmZvckVhY2gocHJvakRhdGEgPT4ge1xyXG4gICAgICBjb25zdCBwcm9qZWN0SXRlbSA9IG5ldyBQcm9qZWN0SXRlbShwcm9qRGF0YSwgdGhpcyk7XHJcbiAgICAgIHRoaXMucHJvamVjdHNMaXN0LmFwcGVuZENoaWxkKHByb2plY3RJdGVtLkhUTUxDb250YWluZXIpO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLmFkanVzdEl0ZW1zKCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBBZGp1c3RzIHRoZSBwb3NpdGlvbiBvZiBwcm9qZWN0IGl0ZW1zIGluIHRoZSBjb250YWluZXIuXHJcbiAgICovXHJcbiAgYWRqdXN0SXRlbXMoKSB7XHJcbiAgICBjb25zdCBpdGVtc0ggPSBOdW1iZXIoZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLnByb2plY3RzTGlzdCkuZ2V0UHJvcGVydHlWYWx1ZSgnLS1pdGVtcy1oJykpO1xyXG4gICAgY29uc3QgaXRlbXNUb3RhbCA9IHRoaXMucHJvamVjdHNMaXN0LmNoaWxkcmVuLmxlbmd0aDtcclxuICAgIHRoaXMucHJvamVjdHNMaXN0LnN0eWxlLnNldFByb3BlcnR5KCctLXJlbWFpbmluZy1pdGVtcycsICgoTWF0aC5jZWlsKGl0ZW1zVG90YWwgLyBpdGVtc0gpICogaXRlbXNIKSAtIGl0ZW1zVG90YWwpLnRvU3RyaW5nKCkpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogIEFkZHMgYSBuZXcgSFRNTCBlbGVtZW50IGl0ZW0gdG8gdGhlIGxpc3Qgb2YgcHJvamVjdHMuXHJcbiAgICovXHJcbiAgdXBkYXRlUHJvamVjdHNMaXN0KHByb2pEYXRhOiBQcm9qZWN0RGF0YSkge1xyXG4gICAgLy8gUmVtb3ZlIHRoZSAnbm8gcHJvamVjdHMgeWV0JyBtZXNzYWdlIGlmIGl0IGlzIHRoZSBmaXJzdC5cclxuICAgIGlmICh0aGlzLnByb2plY3RzRGF0YS5sZW5ndGggPD0gMSkge1xyXG4gICAgICB0aGlzLnByb2plY3RzTGlzdC5xdWVyeVNlbGVjdG9yKCcuZW1wdHktbXNnJykucmVtb3ZlKCk7XHJcbiAgICB9XHJcbiAgICBjb25zdCBwcm9qZWN0SXRlbSA9IG5ldyBQcm9qZWN0SXRlbShwcm9qRGF0YSwgdGhpcyk7XHJcbiAgICB0aGlzLnByb2plY3RzTGlzdC5wcmVwZW5kKHByb2plY3RJdGVtLkhUTUxDb250YWluZXIpO1xyXG4gICAgdGhpcy5hZGp1c3RJdGVtcygpO1xyXG4gIH1cclxuXHJcblxyXG4gIC8qKioqKioqKioqKioqKioqKioqKioqKiBNRVNTQUdFIENPTlRBSU5FUiAqKioqKioqKioqKioqKioqKioqKioqKi9cclxuICAvKlxyXG4gICAqIEEgbWVzc2FnZSB0aGF0IHdvcmtzIGFzIGEgZmVlZGJhY2sgYW5kIHRoYXQgZG9lc250IGludGVycnVwdC5cclxuICAgKi9cclxuXHJcbiAgLyoqXHJcbiAgKiBEaXNhcGxheXMgZmVlZGJhY2sgbWVzc2FnZS5cclxuICAqIEBwYXJhbSB0eXBlIFVzZSBrZXl3b3JkcyAnc3VjY2VzcycsICd3YXJuaW5nJyBvciAnZXJyb3InIHRvIHNwZWNpZnkgdGhlIHR5cGUgb2YgbWVzc2FnZS5cclxuICAqIEBwYXJhbSBtZXNzYWdlIFRoZSBhY3R1YWwgbWVzc2FnZS5cclxuICAqIEBwYXJhbSB0aW1lciBPcHRpb25hbC4gVGltZSAobXMpIGJlZm9yZSBpdCBhdXRvY2xvc2VzLlxyXG4gICovXHJcbiAgc2hvd01lc3NhZ2UodHlwZTogc3RyaW5nLCBtZXNzYWdlOiBzdHJpbmcsIHRpbWVyOiBudW1iZXIgPSB1bmRlZmluZWQpIHtcclxuICAgIC8vIElmIHRoZSBkYXRhLXR5cGUgYXR0ciBoYXMgdmFsdWUgaXMgYmVjYXVzZSB0aGUgbWVzc2FnZSBpcyBzdGlsbCBvcGVuLlxyXG4gICAgaWYgKHRoaXMubWVzc2FnZUNvbnRhaW5lci5kYXRhc2V0LnR5cGUgIT09ICcnKSB7XHJcbiAgICAgIHRoaXMubWVzc2FnZUNvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKHRoaXMubWVzc2FnZUNvbnRhaW5lci5kYXRhc2V0LnR5cGUpO1xyXG4gICAgICBpZiAodGhpcy5tZXNzYWdlVGltZXJJZCkge1xyXG4gICAgICAgIHdpbmRvdy5jbGVhclRpbWVvdXQodGhpcy5tZXNzYWdlVGltZXJJZCk7XHJcbiAgICAgICAgdGhpcy5tZXNzYWdlVGltZXJJZCA9IHVuZGVmaW5lZDtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5tZXNzYWdlQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7XHJcbiAgICB9XHJcbiAgICB0aGlzLm1lc3NhZ2VDb250YWluZXIuZGF0YXNldC50eXBlID0gdHlwZTtcclxuICAgIHRoaXMubWVzc2FnZUNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCdwJykuaW5uZXJUZXh0ID0gbWVzc2FnZTtcclxuICAgIHN3aXRjaCAodHlwZSkge1xyXG4gICAgICBjYXNlICdzdWNjZXNzJzpcclxuICAgICAgICB0aGlzLm1lc3NhZ2VDb250YWluZXIuY2xhc3NMaXN0LmFkZCgnc3VjY2VzcycpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlICd3YXJuaW5nJzpcclxuICAgICAgICB0aGlzLm1lc3NhZ2VDb250YWluZXIuY2xhc3NMaXN0LmFkZCgnd2FybmluZycpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlICdlcnJvcic6XHJcbiAgICAgICAgdGhpcy5tZXNzYWdlQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ2Vycm9yJyk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICB9XHJcbiAgICBpZiAodGltZXIpIHtcclxuICAgICAgdGhpcy5tZXNzYWdlVGltZXJJZCA9IHdpbmRvdy5zZXRUaW1lb3V0KCgpID0+IHRoaXMuY2xvc2VNZXNzYWdlKCksIHRpbWVyKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIENsb3NlcyB0aGUgbWVzc2FnZSBjb250YWluZXIgYW5kIHJlbW92ZXMgdGhlIGNsYXNzIHRoYXQgZ2l2ZXMgdGhlIHR5cGUgb2YgbWVzc2FnZSBzdHlsZS5cclxuICAgKi9cclxuICBjbG9zZU1lc3NhZ2UoKSB7XHJcbiAgICB0aGlzLm1lc3NhZ2VDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgIHRoaXMubWVzc2FnZUNvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKHRoaXMubWVzc2FnZUNvbnRhaW5lci5kYXRhc2V0LnR5cGUpO1xyXG4gICAgdGhpcy5tZXNzYWdlQ29udGFpbmVyLmRhdGFzZXQudHlwZSA9ICcnO1xyXG4gICAgaWYgKHRoaXMubWVzc2FnZVRpbWVySWQpIHtcclxuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMubWVzc2FnZVRpbWVySWQpO1xyXG4gICAgICB0aGlzLm1lc3NhZ2VUaW1lcklkID0gdW5kZWZpbmVkO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcblxyXG4gIC8qKioqKioqKioqKioqKioqKioqKioqKiBWSUVXUE9SVCBNRVNTQUdFUyAqKioqKioqKioqKioqKioqKioqKioqKi9cclxuICAvKlxyXG4gICAqIEEgbWVzc2FnZSBvbiB0aGUgbWlkZGxlIG9mIHRoZSB2aWV3cG9ydCB0aGF0IGludGVycnVwdHMuXHJcbiAgICovXHJcblxyXG4gIC8qKlxyXG4gICAqIE1hbmFnZXMgdGhlIGNyZWF0aW9uIG9mIGEgbWVzc2FnZSBvbiB0aGUgdmlld3BvcnQuXHJcbiAgICogQHBhcmFtIHR5cGUgSWYgJ2FjdGlvbicgYSBEaWFsb2dBY3Rpb25bXSB3aXRoIGF0IGxlYXN0IG9uZSBvYmplY3Qgc2hvdWxkIGJlIHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIHNob3dWaWV3cG9ydERpYWxvZyh0eXBlOiAnbG9hZGVyJyB8ICdtZXNzYWdlJyB8ICdhY3Rpb24nLCBtZXNzYWdlOiBzdHJpbmcsIGFjdGlvbnM6IERpYWxvZ0FjdGlvbltdID0gW10pIHtcclxuICAgIGlmICh0aGlzLnZpZXdwb3J0TWVzc2FnZS5xdWVyeVNlbGVjdG9yKCcuYnRucy1jb250YWluZXInKSkge1xyXG4gICAgICB0aGlzLnZpZXdwb3J0TWVzc2FnZS5xdWVyeVNlbGVjdG9yQWxsKCcuYnRucy1jb250YWluZXIgPiBidXR0b24nKS5mb3JFYWNoKChidG46IEhUTUxFbGVtZW50KSA9PiBidG4ub25jbGljayA9IG51bGwpO1xyXG4gICAgfVxyXG4gICAgR2VuZXJpY3MuZW1wdHlOb2RlKHRoaXMudmlld3BvcnRNZXNzYWdlKTtcclxuICAgIC8vIENyZWF0ZSB0aGUgbmV3IGNvbnRlbnQuXHJcbiAgICBjb25zdCBpbm5lckNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgaWYgKHR5cGUgPT09ICdsb2FkZXInKSB7XHJcbiAgICAgIGlubmVyQ29udGFpbmVyLmlubmVySFRNTCA9IGA8cD4ke21lc3NhZ2V9PC9wPjxzdmcgY2xhc3M9XCJzdmctbG9hZGVyXCI+PHVzZSBocmVmPVwiI3ZhTG9hZGVyXCIvPjwvc3ZnPmA7XHJcbiAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdhY3Rpb24nICYmIGFjdGlvbnMubGVuZ3RoID4gMCkge1xyXG4gICAgICBpbm5lckNvbnRhaW5lci5pbm5lckhUTUwgPSBgPHA+JHttZXNzYWdlfTwvcD5gO1xyXG4gICAgICBjb25zdCBidG5zQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgIGJ0bnNDb250YWluZXIuY2xhc3NMaXN0LmFkZCgnYnRucy1jb250YWluZXInKTtcclxuICAgICAgYWN0aW9ucy5mb3JFYWNoKGFjdGlvbiA9PiB7XHJcbiAgICAgICAgY29uc3QgYnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XHJcbiAgICAgICAgYnV0dG9uLmlubmVySFRNTCA9IGFjdGlvbi5uYW1lO1xyXG4gICAgICAgIGJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdidXR0b25CYXNlJywgJ2xpZ2h0Jyk7XHJcbiAgICAgICAgYnV0dG9uLm9uY2xpY2sgPSBhY3Rpb24uZnVuY3Rpb247XHJcbiAgICAgICAgYnRuc0NvbnRhaW5lci5hcHBlbmRDaGlsZChidXR0b24pO1xyXG4gICAgICB9KTtcclxuICAgICAgaW5uZXJDb250YWluZXIuYXBwZW5kQ2hpbGQoYnRuc0NvbnRhaW5lcik7XHJcbiAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdtZXNzYWdlJykgeyAvLyBJcyB0aGlzIG9uZSB1c2VmdWw/IE1heWJlIHdpdGggYSBzZXRUaW1lb3V0P1xyXG4gICAgICBpbm5lckNvbnRhaW5lci5pbm5lckhUTUwgPSAnPHA+JyArIG1lc3NhZ2UgKyAnPC9wPic7XHJcbiAgICB9XHJcbiAgICB0aGlzLnZpZXdwb3J0TWVzc2FnZS5hcHBlbmRDaGlsZChpbm5lckNvbnRhaW5lcik7XHJcbiAgICB0aGlzLnZpZXdwb3J0TWVzc2FnZS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEhpZGVzIHRoZSB2aWV3cG9ydCBtZXNzYWdlIGlmIHZpc2libGUuXHJcbiAgICovXHJcbiAgaGlkZVZpZXdwb3J0TWVzc2FnZSgpIHtcclxuICAgIHRoaXMudmlld3BvcnRNZXNzYWdlLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xyXG4gIH1cclxuXHJcblxyXG4gIC8qKioqKioqKioqKioqKioqKioqKiogTU9EQUwgRElBTE9HUyAqKioqKioqKioqKioqKioqKioqKiovXHJcbiAgLypcclxuICAgKiBBbGwgbW9kYWwgZGlhbG9nIGNvbnRlbnRzIGFyZSBzdG9yZWQgaW4gYSBjb250YWluZXIgYW5kIGZldGNoZWQgd2hlbiBuZWVkZWQuXHJcbiAgICovXHJcblxyXG4gIC8qKlxyXG4gICAqIFNob3dzIHRoZSBtb2RhbCBkaWFsb2cgcHJvdmlkZWQgZnJvbSB0aGUgc2FtZSBkb2N1bWVudC5cclxuICAgKiBAcGFyYW0gY29udGVudCBSZWZlcmVuY2UgdG8gdGhlIG91dGVyIEhUTUwgZWxlbWVudCBvZiB0aGUgZGlhbG9nLlxyXG4gICAqIEBwYXJhbSBiYWNrZ3JvdW5kIEl0IGNhbiBiZSAndHJhbnNsdWNlbnQnIG9yICdvcGFxdWUnLiBEZWZhdWx0IHZhbHVlIGlzICd0cmFuc2x1Y2VudCcuXHJcbiAgICogQHBhcmFtIGNsb3NhYmxlIFdoZWF0ZXIgdG8gc2hvdyBhIGJ1dHRvbiB0byBjbG9zZSBpdCBvciBub3QuIEJ5IGRlYWZ1bHQgaXQgaGFzIGEgYnV0dG9uLlxyXG4gICAqL1xyXG4gIHNob3dNb2RhbERpYWxvZyhjb250ZW50OiBIVE1MRWxlbWVudCwgYmFja2dyb3VuZCA9ICd0cmFuc2x1Y2VudCcsIGNsb3NhYmxlID0gdHJ1ZSkge1xyXG4gICAgdGhpcy5tb2RhbERpYWxvZ0NvbnRhaW5lci5jbGFzc0xpc3QudmFsdWUgPSAnJztcclxuICAgIGlmIChiYWNrZ3JvdW5kID09PSAndHJhbnNsdWNlbnQnKSB7XHJcbiAgICAgIHRoaXMubW9kYWxEaWFsb2dDb250YWluZXIuY2xhc3NMaXN0LmFkZCgnZ3JheVRyYW5zbHVjZW50Jyk7XHJcbiAgICB9IGVsc2UgaWYgKGJhY2tncm91bmQgPT09ICdvcGFxdWUnKSB7XHJcbiAgICAgIHRoaXMubW9kYWxEaWFsb2dDb250YWluZXIuY2xhc3NMaXN0LmFkZCgnbGlnaHRPcGFxdWUnKTtcclxuICAgIH1cclxuICAgIGlmIChjbG9zYWJsZSkge1xyXG4gICAgICB0aGlzLmNsb3NlTW9kYWxCdG4uc3R5bGUuZGlzcGxheSA9ICd1bnNldCc7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmNsb3NlTW9kYWxCdG4uc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgIH1cclxuICAgIHRoaXMubW9kYWxEaWFsb2dDb250ZW50LmFwcGVuZENoaWxkKGNvbnRlbnQpO1xyXG4gICAgdGhpcy5tb2RhbERpYWxvZ0NvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogSGlkZXMgdGhlIGN1cnJlbnQgbW9kYWwgZGlhbG9nLlxyXG4gICAqL1xyXG4gIGNsb3NlTW9kYWxEaWFsb2coKSB7XHJcbiAgICBjb25zdCBjb250ZW50ID0gdGhpcy5tb2RhbERpYWxvZ0NvbnRlbnQuZmlyc3RFbGVtZW50Q2hpbGQ7XHJcbiAgICB0aGlzLm1vZGFsRGlhbG9nQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICB0aGlzLm1vZGFsRGlhbG9nc1N0b3JhZ2UuYXBwZW5kQ2hpbGQoY29udGVudCk7XHJcbiAgfVxyXG5cclxuXHJcbiAgLyoqKioqKioqKioqKioqKioqKioqKiBTVEFSVCBUSEUgQVBQTElDQVRJT04gKioqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuICAvKipcclxuICAgKiBTdGFydHMgdGhlIGFwcCwgaWYgYSBwcm9qZWN0IGlkIGlzIHByb3ZpZGVkIGl0IHdpbGwgc3RhcnQgZnJvbSB0aGF0IHByb2plYyB2aWV3LlxyXG4gICAqIElmIG5vIHByb2plY3QgaWQgaXMgcHJvdmlkZWQgaXQgd2lsbCBzdGFydCBmcm9tIHRoZSBwcm9qZWN0cyBsaXN0IHZpZXcuXHJcbiAgICovXHJcbiAgc3RhcnQocHJvamVjdElkOiBzdHJpbmcgPSAnJykge1xyXG4gICAgLy8gU2hvdyB0aGUgYXBwIGludGVyZmFjZS5cclxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2hlYWRlcicpLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7XHJcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdtYWluJykuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XHJcbiAgICAvLyBTdGFydCBvcHRpb25zIGRlcGVuZGluZyBpZiB0aGVyZSBpcyBhIHByb2plY3RJZC5cclxuICAgIGlmIChwcm9qZWN0SWQgIT09ICcnKSB7XHJcbiAgICAgIHRoaXMuc2hvd1ZpZXdwb3J0RGlhbG9nKCdsb2FkZXInLCAnTG9hZGluZyBwcm9qZWN0Jyk7XHJcbiAgICAgIEFQSS5mZXRjaFByb2plY3QocHJvamVjdElkLCB0aGlzKVxyXG4gICAgICAgIC50aGVuKHJlcyA9PiB7XHJcbiAgICAgICAgICB0aGlzLmN1cnJlbnRXb3Jrc3BhY2UgPSBuZXcgV29ya3NwYWNlKHJlcywgdGhpcyk7XHJcbiAgICAgICAgICB0aGlzLmNyZWF0ZUhUTUxQcm9qZWN0c0xpc3QoW3Jlc10pO1xyXG4gICAgICAgICAgdGhpcy5wcm9qZWN0c0xpc3RCdG4uc3R5bGUuZGlzcGxheSA9ICd1bnNldCc7XHJcbiAgICAgICAgICB0aGlzLmhpZGVWaWV3cG9ydE1lc3NhZ2UoKTtcclxuICAgICAgICAgIC8vIElmIHRoZSBwcm9qZWN0IGhhcyBjb2xsYWJvcmF0b3JzIGFza3MgdGhlIGRldmljZSB0b2tlblxyXG4gICAgICAgICAgLy8gaW4gY2FzZSBpdCBpcyBuZWVkZWQgdG8gcmVjZWl2ZSBub3RpZmljYXRpb25zLlxyXG4gICAgICAgICAgLy8gVE9ETzogSWYgdGhpcyBwcm9qZWN0IGRvZXN0IGhhdmUgY29sbGFib3JhdG9ycyBidXQgb3RoZXIgeWVzIElcclxuICAgICAgICAgIC8vIHdvdWxkIG5lZWQgdG8ga25vdyBvdGhlcndpc2UgdGhlIGRldmljZSB0b2tlbiB3b3VsZCBub3QgYmUgYXNrZWQuXHJcbiAgICAgICAgICAvLyBUT0RPOiBDaGVjayBpZiBhbnkgb2YgdGhlIHByb2plY3QgZm9sZGVycyBoYXMgbW9yZSB0aGFuIG9uZSBwZXJtaXNzaW9uLlxyXG4gICAgICAgICAgaWYgKHJlcy5wZXJtaXNzaW9ucy5sZW5ndGggPiAxKSB7XHJcbiAgICAgICAgICAgIHdpbmRvdy5zYXZlTWVzc2FnaW5nRGV2aWNlVG9rZW4oKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9LCByZWogPT4ge1xyXG4gICAgICAgICAgY29uc29sZS5sb2cocmVqKTtcclxuICAgICAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IHJlai5ib2R5ID09PSB1bmRlZmluZWQgPyByZWogOiBgTWVzc2FnZTogJHtKU09OLnBhcnNlKHJlai5ib2R5KS5lcnJvci5tZXNzYWdlfSBDb2RlOiAke0pTT04ucGFyc2UocmVqLmJvZHkpLmVycm9yLmNvZGV9YDtcclxuICAgICAgICAgIHRoaXMuc2hvd1ZpZXdwb3J0RGlhbG9nKCdhY3Rpb24nLCBlcnJvck1lc3NhZ2UsIFtcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIG5hbWU6ICdWaWV3IHByb2plY3RzIGxpc3QnLFxyXG4gICAgICAgICAgICAgIGZ1bmN0aW9uOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9wZW5Qcm9qZWN0c0xpc3QoKTtcclxuICAgICAgICAgICAgICAgIGlmIChsb2NhdGlvbi5zZWFyY2ggIT09IFwiXCIpIHtcclxuICAgICAgICAgICAgICAgICAgaGlzdG9yeS5yZXBsYWNlU3RhdGUoeyBwYWdlOiAnUHJvamVjdHMgbGlzdCcgfSwgJ1Byb2plY3RzIGxpc3QnLCBsb2NhdGlvbi5ocmVmLnJlcGxhY2UobG9jYXRpb24uc2VhcmNoLCAnJykpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgXSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAvLyBEZWxldGUgYW55IGludmFsaWQgc2VhcmNoIHBhcmFtZXRlciBpZiBhbnkuXHJcbiAgICAgIGlmIChsb2NhdGlvbi5zZWFyY2ggIT09IFwiXCIpIHtcclxuICAgICAgICBoaXN0b3J5LnJlcGxhY2VTdGF0ZSh7IHBhZ2U6ICdQcm9qZWN0cyBsaXN0JyB9LCAnUHJvamVjdHMgbGlzdCcsIGxvY2F0aW9uLmhyZWYucmVwbGFjZShsb2NhdGlvbi5zZWFyY2gsICcnKSk7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5wcm9qZWN0c0xpc3RDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XHJcbiAgICAgIHRoaXMuc2hvd1ZpZXdwb3J0RGlhbG9nKCdsb2FkZXInLCAnTG9hZGluZyBwcm9qZWN0cycpO1xyXG4gICAgICAvLyBUT0RPOiBMaW1pdCB0aGUgbnVtYmVyIG9mIHByb2plY3RzIHRvIGxpc3RcclxuICAgICAgQVBJLmxpc3RQcm9qZWN0SXRlbXModGhpcykudGhlbigocmVzOiBQcm9qZWN0RGF0YVtdKSA9PiB7XHJcbiAgICAgICAgdGhpcy5jcmVhdGVIVE1MUHJvamVjdHNMaXN0KHJlcyk7XHJcbiAgICAgICAgdGhpcy5oaWRlVmlld3BvcnRNZXNzYWdlKCk7XHJcbiAgICAgICAgLy8gQ2hlY2tzIGlmIGF0IGxlYXN0IG9uZSBwcm9qZWN0IGhhcyBjb2xsYWJvcmF0b3JzIGFuZCBpZiBzbyBhc2tzIGZvciB0aGVcclxuICAgICAgICAvLyBkZXZpY2UgbWVzc2FnaW5nIHRva2VuIHRoYXQgY291bGQgYmUgbmVlZGVkIHRvIHJlY2VpdmUgbm90aWZpY2F0aW9ucy5cclxuICAgICAgICBpZiAod2luZG93LnRoZXJlSXNNZXNzYWdpbmcpIHtcclxuICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmIChyZXNbaV0ucGVybWlzc2lvbnMubGVuZ3RoID4gMSkge1xyXG4gICAgICAgICAgICAgIHdpbmRvdy5zYXZlTWVzc2FnaW5nRGV2aWNlVG9rZW4oKTtcclxuICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfSwgcmVqID0+IHtcclxuICAgICAgICB0aGlzLnByb2plY3RzTGlzdC5pbm5lckhUTUwgPSAnPHAgY2xhc3M9XCJlbXB0eS1tc2dcIj5UaGVyZSBhcmUgbm8gcHJvamVjdHMuIFVwbG9hZCBvbmUhPC9wPic7XHJcbiAgICAgICAgdGhpcy5oaWRlVmlld3BvcnRNZXNzYWdlKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH1cclxufSIsImltcG9ydCBmaXJlYmFzZSBmcm9tICdAZmlyZWJhc2UvYXBwJztcbmltcG9ydCAnQGZpcmViYXNlL2luc3RhbGxhdGlvbnMnO1xuaW1wb3J0IHsgX19hc3NpZ24sIF9fYXdhaXRlciwgX19nZW5lcmF0b3IgfSBmcm9tICd0c2xpYic7XG5pbXBvcnQgeyBFcnJvckZhY3RvcnkgfSBmcm9tICdAZmlyZWJhc2UvdXRpbCc7XG5pbXBvcnQgeyBDb21wb25lbnQgfSBmcm9tICdAZmlyZWJhc2UvY29tcG9uZW50JztcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnZhciBBTkFMWVRJQ1NfSURfRklFTEQgPSAnbWVhc3VyZW1lbnRJZCc7XHJcbi8vIEtleSB0byBhdHRhY2ggRklEIHRvIGluIGd0YWcgcGFyYW1zLlxyXG52YXIgR0FfRklEX0tFWSA9ICdmaXJlYmFzZV9pZCc7XHJcbnZhciBPUklHSU5fS0VZID0gJ29yaWdpbic7XHJcbnZhciBHVEFHX1VSTCA9ICdodHRwczovL3d3dy5nb29nbGV0YWdtYW5hZ2VyLmNvbS9ndGFnL2pzJztcclxudmFyIEd0YWdDb21tYW5kO1xyXG4oZnVuY3Rpb24gKEd0YWdDb21tYW5kKSB7XHJcbiAgICBHdGFnQ29tbWFuZFtcIkVWRU5UXCJdID0gXCJldmVudFwiO1xyXG4gICAgR3RhZ0NvbW1hbmRbXCJTRVRcIl0gPSBcInNldFwiO1xyXG4gICAgR3RhZ0NvbW1hbmRbXCJDT05GSUdcIl0gPSBcImNvbmZpZ1wiO1xyXG59KShHdGFnQ29tbWFuZCB8fCAoR3RhZ0NvbW1hbmQgPSB7fSkpO1xyXG4vKlxyXG4gKiBPZmZpY2lhbGx5IHJlY29tbWVuZGVkIGV2ZW50IG5hbWVzIGZvciBndGFnLmpzXHJcbiAqIEFueSBvdGhlciBzdHJpbmcgaXMgYWxzbyBhbGxvd2VkLlxyXG4gKi9cclxudmFyIEV2ZW50TmFtZTtcclxuKGZ1bmN0aW9uIChFdmVudE5hbWUpIHtcclxuICAgIEV2ZW50TmFtZVtcIkFERF9QQVlNRU5UX0lORk9cIl0gPSBcImFkZF9wYXltZW50X2luZm9cIjtcclxuICAgIEV2ZW50TmFtZVtcIkFERF9UT19DQVJUXCJdID0gXCJhZGRfdG9fY2FydFwiO1xyXG4gICAgRXZlbnROYW1lW1wiQUREX1RPX1dJU0hMSVNUXCJdID0gXCJhZGRfdG9fd2lzaGxpc3RcIjtcclxuICAgIEV2ZW50TmFtZVtcIkJFR0lOX0NIRUNLT1VUXCJdID0gXCJiZWdpbl9jaGVja291dFwiO1xyXG4gICAgRXZlbnROYW1lW1wiQ0hFQ0tPVVRfUFJPR1JFU1NcIl0gPSBcImNoZWNrb3V0X3Byb2dyZXNzXCI7XHJcbiAgICBFdmVudE5hbWVbXCJFWENFUFRJT05cIl0gPSBcImV4Y2VwdGlvblwiO1xyXG4gICAgRXZlbnROYW1lW1wiR0VORVJBVEVfTEVBRFwiXSA9IFwiZ2VuZXJhdGVfbGVhZFwiO1xyXG4gICAgRXZlbnROYW1lW1wiTE9HSU5cIl0gPSBcImxvZ2luXCI7XHJcbiAgICBFdmVudE5hbWVbXCJQQUdFX1ZJRVdcIl0gPSBcInBhZ2Vfdmlld1wiO1xyXG4gICAgRXZlbnROYW1lW1wiUFVSQ0hBU0VcIl0gPSBcInB1cmNoYXNlXCI7XHJcbiAgICBFdmVudE5hbWVbXCJSRUZVTkRcIl0gPSBcInJlZnVuZFwiO1xyXG4gICAgRXZlbnROYW1lW1wiUkVNT1ZFX0ZST01fQ0FSVFwiXSA9IFwicmVtb3ZlX2Zyb21fY2FydFwiO1xyXG4gICAgRXZlbnROYW1lW1wiU0NSRUVOX1ZJRVdcIl0gPSBcInNjcmVlbl92aWV3XCI7XHJcbiAgICBFdmVudE5hbWVbXCJTRUFSQ0hcIl0gPSBcInNlYXJjaFwiO1xyXG4gICAgRXZlbnROYW1lW1wiU0VMRUNUX0NPTlRFTlRcIl0gPSBcInNlbGVjdF9jb250ZW50XCI7XHJcbiAgICBFdmVudE5hbWVbXCJTRVRfQ0hFQ0tPVVRfT1BUSU9OXCJdID0gXCJzZXRfY2hlY2tvdXRfb3B0aW9uXCI7XHJcbiAgICBFdmVudE5hbWVbXCJTSEFSRVwiXSA9IFwic2hhcmVcIjtcclxuICAgIEV2ZW50TmFtZVtcIlNJR05fVVBcIl0gPSBcInNpZ25fdXBcIjtcclxuICAgIEV2ZW50TmFtZVtcIlRJTUlOR19DT01QTEVURVwiXSA9IFwidGltaW5nX2NvbXBsZXRlXCI7XHJcbiAgICBFdmVudE5hbWVbXCJWSUVXX0lURU1cIl0gPSBcInZpZXdfaXRlbVwiO1xyXG4gICAgRXZlbnROYW1lW1wiVklFV19JVEVNX0xJU1RcIl0gPSBcInZpZXdfaXRlbV9saXN0XCI7XHJcbiAgICBFdmVudE5hbWVbXCJWSUVXX1BST01PVElPTlwiXSA9IFwidmlld19wcm9tb3Rpb25cIjtcclxuICAgIEV2ZW50TmFtZVtcIlZJRVdfU0VBUkNIX1JFU1VMVFNcIl0gPSBcInZpZXdfc2VhcmNoX3Jlc3VsdHNcIjtcclxufSkoRXZlbnROYW1lIHx8IChFdmVudE5hbWUgPSB7fSkpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIExvZ3MgYW4gYW5hbHl0aWNzIGV2ZW50IHRocm91Z2ggdGhlIEZpcmViYXNlIFNESy5cclxuICpcclxuICogQHBhcmFtIGd0YWdGdW5jdGlvbiBXcmFwcGVkIGd0YWcgZnVuY3Rpb24gdGhhdCB3YWl0cyBmb3IgZmlkIHRvIGJlIHNldCBiZWZvcmUgc2VuZGluZyBhbiBldmVudFxyXG4gKiBAcGFyYW0gZXZlbnROYW1lIEdvb2dsZSBBbmFseXRpY3MgZXZlbnQgbmFtZSwgY2hvb3NlIGZyb20gc3RhbmRhcmQgbGlzdCBvciB1c2UgYSBjdXN0b20gc3RyaW5nLlxyXG4gKiBAcGFyYW0gZXZlbnRQYXJhbXMgQW5hbHl0aWNzIGV2ZW50IHBhcmFtZXRlcnMuXHJcbiAqL1xyXG5mdW5jdGlvbiBsb2dFdmVudChndGFnRnVuY3Rpb24sIGFuYWx5dGljc0lkLCBldmVudE5hbWUsIGV2ZW50UGFyYW1zLCBvcHRpb25zKSB7XHJcbiAgICB2YXIgcGFyYW1zID0gZXZlbnRQYXJhbXMgfHwge307XHJcbiAgICBpZiAoIW9wdGlvbnMgfHwgIW9wdGlvbnMuZ2xvYmFsKSB7XHJcbiAgICAgICAgcGFyYW1zID0gX19hc3NpZ24oX19hc3NpZ24oe30sIGV2ZW50UGFyYW1zKSwgeyAnc2VuZF90byc6IGFuYWx5dGljc0lkIH0pO1xyXG4gICAgfVxyXG4gICAgLy8gV29ya2Fyb3VuZCBmb3IgaHR0cDovL2IvMTQxMzcwNDQ5IC0gdGhpcmQgYXJndW1lbnQgY2Fubm90IGJlIHVuZGVmaW5lZC5cclxuICAgIGd0YWdGdW5jdGlvbihHdGFnQ29tbWFuZC5FVkVOVCwgZXZlbnROYW1lLCBwYXJhbXMgfHwge30pO1xyXG59XHJcbi8vIFRPRE86IEJyYWQgaXMgZ29pbmcgdG8gYWRkIGBzY3JlZW5fbmFtZWAgdG8gR0EgR29sZCBjb25maWcgcGFyYW1ldGVyIHNjaGVtYVxyXG4vKipcclxuICogU2V0IHNjcmVlbl9uYW1lIHBhcmFtZXRlciBmb3IgdGhpcyBHb29nbGUgQW5hbHl0aWNzIElELlxyXG4gKlxyXG4gKiBAcGFyYW0gZ3RhZ0Z1bmN0aW9uIFdyYXBwZWQgZ3RhZyBmdW5jdGlvbiB0aGF0IHdhaXRzIGZvciBmaWQgdG8gYmUgc2V0IGJlZm9yZSBzZW5kaW5nIGFuIGV2ZW50XHJcbiAqIEBwYXJhbSBzY3JlZW5OYW1lIFNjcmVlbiBuYW1lIHN0cmluZyB0byBzZXQuXHJcbiAqL1xyXG5mdW5jdGlvbiBzZXRDdXJyZW50U2NyZWVuKGd0YWdGdW5jdGlvbiwgYW5hbHl0aWNzSWQsIHNjcmVlbk5hbWUsIG9wdGlvbnMpIHtcclxuICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMuZ2xvYmFsKSB7XHJcbiAgICAgICAgZ3RhZ0Z1bmN0aW9uKEd0YWdDb21tYW5kLlNFVCwgeyAnc2NyZWVuX25hbWUnOiBzY3JlZW5OYW1lIH0pO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgZ3RhZ0Z1bmN0aW9uKEd0YWdDb21tYW5kLkNPTkZJRywgYW5hbHl0aWNzSWQsIHtcclxuICAgICAgICAgICAgdXBkYXRlOiB0cnVlLFxyXG4gICAgICAgICAgICAnc2NyZWVuX25hbWUnOiBzY3JlZW5OYW1lXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIFNldCB1c2VyX2lkIHBhcmFtZXRlciBmb3IgdGhpcyBHb29nbGUgQW5hbHl0aWNzIElELlxyXG4gKlxyXG4gKiBAcGFyYW0gZ3RhZ0Z1bmN0aW9uIFdyYXBwZWQgZ3RhZyBmdW5jdGlvbiB0aGF0IHdhaXRzIGZvciBmaWQgdG8gYmUgc2V0IGJlZm9yZSBzZW5kaW5nIGFuIGV2ZW50XHJcbiAqIEBwYXJhbSBpZCBVc2VyIElEIHN0cmluZyB0byBzZXRcclxuICovXHJcbmZ1bmN0aW9uIHNldFVzZXJJZChndGFnRnVuY3Rpb24sIGFuYWx5dGljc0lkLCBpZCwgb3B0aW9ucykge1xyXG4gICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5nbG9iYWwpIHtcclxuICAgICAgICBndGFnRnVuY3Rpb24oR3RhZ0NvbW1hbmQuU0VULCB7ICd1c2VyX2lkJzogaWQgfSk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICBndGFnRnVuY3Rpb24oR3RhZ0NvbW1hbmQuQ09ORklHLCBhbmFseXRpY3NJZCwge1xyXG4gICAgICAgICAgICB1cGRhdGU6IHRydWUsXHJcbiAgICAgICAgICAgICd1c2VyX2lkJzogaWRcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogU2V0IGFsbCBvdGhlciB1c2VyIHByb3BlcnRpZXMgb3RoZXIgdGhhbiB1c2VyX2lkIGFuZCBzY3JlZW5fbmFtZS5cclxuICpcclxuICogQHBhcmFtIGd0YWdGdW5jdGlvbiBXcmFwcGVkIGd0YWcgZnVuY3Rpb24gdGhhdCB3YWl0cyBmb3IgZmlkIHRvIGJlIHNldCBiZWZvcmUgc2VuZGluZyBhbiBldmVudFxyXG4gKiBAcGFyYW0gcHJvcGVydGllcyBNYXAgb2YgdXNlciBwcm9wZXJ0aWVzIHRvIHNldFxyXG4gKi9cclxuZnVuY3Rpb24gc2V0VXNlclByb3BlcnRpZXMoZ3RhZ0Z1bmN0aW9uLCBhbmFseXRpY3NJZCwgcHJvcGVydGllcywgb3B0aW9ucykge1xyXG4gICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5nbG9iYWwpIHtcclxuICAgICAgICB2YXIgZmxhdFByb3BlcnRpZXMgPSB7fTtcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gT2JqZWN0LmtleXMocHJvcGVydGllcyk7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBrZXkgPSBfYVtfaV07XHJcbiAgICAgICAgICAgIC8vIHVzZSBkb3Qgbm90YXRpb24gZm9yIG1lcmdlIGJlaGF2aW9yIGluIGd0YWcuanNcclxuICAgICAgICAgICAgZmxhdFByb3BlcnRpZXNbXCJ1c2VyX3Byb3BlcnRpZXMuXCIgKyBrZXldID0gcHJvcGVydGllc1trZXldO1xyXG4gICAgICAgIH1cclxuICAgICAgICBndGFnRnVuY3Rpb24oR3RhZ0NvbW1hbmQuU0VULCBmbGF0UHJvcGVydGllcyk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICBndGFnRnVuY3Rpb24oR3RhZ0NvbW1hbmQuQ09ORklHLCBhbmFseXRpY3NJZCwge1xyXG4gICAgICAgICAgICB1cGRhdGU6IHRydWUsXHJcbiAgICAgICAgICAgICd1c2VyX3Byb3BlcnRpZXMnOiBwcm9wZXJ0aWVzXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIFNldCB3aGV0aGVyIGNvbGxlY3Rpb24gaXMgZW5hYmxlZCBmb3IgdGhpcyBJRC5cclxuICpcclxuICogQHBhcmFtIGVuYWJsZWQgSWYgdHJ1ZSwgY29sbGVjdGlvbiBpcyBlbmFibGVkIGZvciB0aGlzIElELlxyXG4gKi9cclxuZnVuY3Rpb24gc2V0QW5hbHl0aWNzQ29sbGVjdGlvbkVuYWJsZWQoYW5hbHl0aWNzSWQsIGVuYWJsZWQpIHtcclxuICAgIHdpbmRvd1tcImdhLWRpc2FibGUtXCIgKyBhbmFseXRpY3NJZF0gPSAhZW5hYmxlZDtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEluaXRpYWxpemUgdGhlIGFuYWx5dGljcyBpbnN0YW5jZSBpbiBndGFnLmpzIGJ5IGNhbGxpbmcgY29uZmlnIGNvbW1hbmQgd2l0aCBmaWQuXHJcbiAqXHJcbiAqIE5PVEU6IFdlIGNvbWJpbmUgYW5hbHl0aWNzIGluaXRpYWxpemF0aW9uIGFuZCBzZXR0aW5nIGZpZCB0b2dldGhlciBiZWNhdXNlIHdlIHdhbnQgZmlkIHRvIGJlXHJcbiAqIHBhcnQgb2YgdGhlIGBwYWdlX3ZpZXdgIGV2ZW50IHRoYXQncyBzZW50IGR1cmluZyB0aGUgaW5pdGlhbGl6YXRpb25cclxuICogQHBhcmFtIGFwcCBGaXJlYmFzZSBhcHBcclxuICogQHBhcmFtIGd0YWdDb3JlIFRoZSBndGFnIGZ1bmN0aW9uIHRoYXQncyBub3Qgd3JhcHBlZC5cclxuICovXHJcbmZ1bmN0aW9uIGluaXRpYWxpemVHQUlkKGFwcCwgaW5zdGFsbGF0aW9ucywgZ3RhZ0NvcmUpIHtcclxuICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgZmlkO1xyXG4gICAgICAgIHZhciBfYTtcclxuICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9iKSB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAoX2IubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMDogcmV0dXJuIFs0IC8qeWllbGQqLywgaW5zdGFsbGF0aW9ucy5nZXRJZCgpXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICBmaWQgPSBfYi5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gVGhpcyBjb21tYW5kIGluaXRpYWxpemVzIGd0YWcuanMgYW5kIG9ubHkgbmVlZHMgdG8gYmUgY2FsbGVkIG9uY2UgZm9yIHRoZSBlbnRpcmUgd2ViIGFwcCxcclxuICAgICAgICAgICAgICAgICAgICAvLyBidXQgc2luY2UgaXQgaXMgaWRlbXBvdGVudCwgd2UgY2FuIGNhbGwgaXQgbXVsdGlwbGUgdGltZXMuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gV2Uga2VlcCBpdCB0b2dldGhlciB3aXRoIG90aGVyIGluaXRpYWxpemF0aW9uIGxvZ2ljIGZvciBiZXR0ZXIgY29kZSBzdHJ1Y3R1cmUuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuICAgICAgICAgICAgICAgICAgICBndGFnQ29yZSgnanMnLCBuZXcgRGF0ZSgpKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBJdCBzaG91bGQgYmUgdGhlIGZpcnN0IGNvbmZpZyBjb21tYW5kIGNhbGxlZCBvbiB0aGlzIEdBLUlEXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gSW5pdGlhbGl6ZSB0aGlzIEdBLUlEIGFuZCBzZXQgRklEIG9uIGl0IHVzaW5nIHRoZSBndGFnIGNvbmZpZyBBUEkuXHJcbiAgICAgICAgICAgICAgICAgICAgZ3RhZ0NvcmUoR3RhZ0NvbW1hbmQuQ09ORklHLCBhcHAub3B0aW9uc1tBTkFMWVRJQ1NfSURfRklFTERdLCAoX2EgPSB7fSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2FbR0FfRklEX0tFWV0gPSBmaWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGd1YXJkIGFnYWluc3QgZGV2ZWxvcGVycyBhY2NpZGVudGFsbHkgc2V0dGluZyBwcm9wZXJ0aWVzIHdpdGggcHJlZml4IGBmaXJlYmFzZV9gXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hW09SSUdJTl9LRVldID0gJ2ZpcmViYXNlJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2EudXBkYXRlID0gdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2EpKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59XHJcbmZ1bmN0aW9uIGluc2VydFNjcmlwdFRhZyhkYXRhTGF5ZXJOYW1lKSB7XHJcbiAgICB2YXIgc2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XHJcbiAgICAvLyBXZSBhcmUgbm90IHByb3ZpZGluZyBhbiBhbmFseXRpY3NJZCBpbiB0aGUgVVJMIGJlY2F1c2UgaXQgd291bGQgdHJpZ2dlciBhIGBwYWdlX3ZpZXdgXHJcbiAgICAvLyB3aXRob3V0IGZpZC4gV2Ugd2lsbCBpbml0aWFsaXplIGdhLWlkIHVzaW5nIGd0YWcgKGNvbmZpZykgY29tbWFuZCB0b2dldGhlciB3aXRoIGZpZC5cclxuICAgIHNjcmlwdC5zcmMgPSBHVEFHX1VSTCArIFwiP2w9XCIgKyBkYXRhTGF5ZXJOYW1lO1xyXG4gICAgc2NyaXB0LmFzeW5jID0gdHJ1ZTtcclxuICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoc2NyaXB0KTtcclxufVxyXG4vKiogR2V0IHJlZmVyZW5jZSB0bywgb3IgY3JlYXRlLCBnbG9iYWwgZGF0YWxheWVyLlxyXG4gKiBAcGFyYW0gZGF0YUxheWVyTmFtZSBOYW1lIG9mIGRhdGFsYXllciAobW9zdCBvZnRlbiB0aGUgZGVmYXVsdCwgXCJfZGF0YUxheWVyXCIpXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRPckNyZWF0ZURhdGFMYXllcihkYXRhTGF5ZXJOYW1lKSB7XHJcbiAgICAvLyBDaGVjayBmb3IgZXhpc3RpbmcgZGF0YUxheWVyIGFuZCBjcmVhdGUgaWYgbmVlZGVkLlxyXG4gICAgdmFyIGRhdGFMYXllciA9IFtdO1xyXG4gICAgaWYgKEFycmF5LmlzQXJyYXkod2luZG93W2RhdGFMYXllck5hbWVdKSkge1xyXG4gICAgICAgIGRhdGFMYXllciA9IHdpbmRvd1tkYXRhTGF5ZXJOYW1lXTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHdpbmRvd1tkYXRhTGF5ZXJOYW1lXSA9IGRhdGFMYXllcjtcclxuICAgIH1cclxuICAgIHJldHVybiBkYXRhTGF5ZXI7XHJcbn1cclxuLyoqXHJcbiAqIFdyYXBzIGEgc3RhbmRhcmQgZ3RhZyBmdW5jdGlvbiB3aXRoIGV4dHJhIGNvZGUgdG8gd2FpdCBmb3IgY29tcGxldGlvbiBvZlxyXG4gKiByZWxldmFudCBpbml0aWFsaXphdGlvbiBwcm9taXNlcyBiZWZvcmUgc2VuZGluZyByZXF1ZXN0cy5cclxuICpcclxuICogQHBhcmFtIGd0YWdDb3JlIEJhc2ljIGd0YWcgZnVuY3Rpb24gdGhhdCBqdXN0IGFwcGVuZHMgdG8gZGF0YUxheWVyXHJcbiAqIEBwYXJhbSBpbml0aWFsaXplZElkUHJvbWlzZXNNYXAgTWFwIG9mIGdhSWRzIHRvIHRoZWlyIGluaXRpYWxpemF0aW9uIHByb21pc2VzXHJcbiAqL1xyXG5mdW5jdGlvbiB3cmFwR3RhZyhndGFnQ29yZSwgaW5pdGlhbGl6ZWRJZFByb21pc2VzTWFwKSB7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKGNvbW1hbmQsIGlkT3JOYW1lT3JQYXJhbXMsIGd0YWdQYXJhbXMpIHtcclxuICAgICAgICAvLyBJZiBldmVudCwgY2hlY2sgdGhhdCByZWxldmFudCBpbml0aWFsaXphdGlvbiBwcm9taXNlcyBoYXZlIGNvbXBsZXRlZC5cclxuICAgICAgICBpZiAoY29tbWFuZCA9PT0gR3RhZ0NvbW1hbmQuRVZFTlQpIHtcclxuICAgICAgICAgICAgdmFyIGluaXRpYWxpemF0aW9uUHJvbWlzZXNUb1dhaXRGb3IgPSBbXTtcclxuICAgICAgICAgICAgLy8gSWYgdGhlcmUncyBhICdzZW5kX3RvJyBwYXJhbSwgY2hlY2sgaWYgYW55IElEIHNwZWNpZmllZCBtYXRjaGVzXHJcbiAgICAgICAgICAgIC8vIGEgRklEIHdlIGhhdmUgYmVndW4gYSBmZXRjaCBvbi5cclxuICAgICAgICAgICAgaWYgKGd0YWdQYXJhbXMgJiYgZ3RhZ1BhcmFtc1snc2VuZF90byddKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZ2FTZW5kVG9MaXN0ID0gZ3RhZ1BhcmFtc1snc2VuZF90byddO1xyXG4gICAgICAgICAgICAgICAgLy8gTWFrZSBpdCBhbiBhcnJheSBpZiBpcyBpc24ndCwgc28gaXQgY2FuIGJlIGRlYWx0IHdpdGggdGhlIHNhbWUgd2F5LlxyXG4gICAgICAgICAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KGdhU2VuZFRvTGlzdCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBnYVNlbmRUb0xpc3QgPSBbZ2FTZW5kVG9MaXN0XTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgZ2FTZW5kVG9MaXN0XzEgPSBnYVNlbmRUb0xpc3Q7IF9pIDwgZ2FTZW5kVG9MaXN0XzEubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNlbmRUb0lkID0gZ2FTZW5kVG9MaXN0XzFbX2ldO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBpbml0aWFsaXphdGlvblByb21pc2UgPSBpbml0aWFsaXplZElkUHJvbWlzZXNNYXBbc2VuZFRvSWRdO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIEdyb3VwcyB3aWxsIG5vdCBiZSBpbiB0aGUgbWFwLlxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbml0aWFsaXphdGlvblByb21pc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5pdGlhbGl6YXRpb25Qcm9taXNlc1RvV2FpdEZvci5wdXNoKGluaXRpYWxpemF0aW9uUHJvbWlzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGVyZSBpcyBhbiBpdGVtIGluICdzZW5kX3RvJyB0aGF0IGlzIG5vdCBhc3NvY2lhdGVkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRpcmVjdGx5IHdpdGggYW4gRklELCBwb3NzaWJseSBhIGdyb3VwLiAgRW1wdHkgdGhpcyBhcnJheVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBhbmQgbGV0IGl0IGdldCBwb3B1bGF0ZWQgYmVsb3cuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGluaXRpYWxpemF0aW9uUHJvbWlzZXNUb1dhaXRGb3IgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIFRoaXMgd2lsbCBiZSB1bnBvcHVsYXRlZCBpZiB0aGVyZSB3YXMgbm8gJ3NlbmRfdG8nIGZpZWxkICwgb3JcclxuICAgICAgICAgICAgLy8gaWYgbm90IGFsbCBlbnRyaWVzIGluIHRoZSAnc2VuZF90bycgZmllbGQgY291bGQgYmUgbWFwcGVkIHRvXHJcbiAgICAgICAgICAgIC8vIGEgRklELiBJbiB0aGVzZSBjYXNlcywgd2FpdCBvbiBhbGwgcGVuZGluZyBpbml0aWFsaXphdGlvbiBwcm9taXNlcy5cclxuICAgICAgICAgICAgaWYgKGluaXRpYWxpemF0aW9uUHJvbWlzZXNUb1dhaXRGb3IubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBfYSA9IDAsIF9iID0gT2JqZWN0LnZhbHVlcyhpbml0aWFsaXplZElkUHJvbWlzZXNNYXApOyBfYSA8IF9iLmxlbmd0aDsgX2ErKykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBpZFByb21pc2UgPSBfYltfYV07XHJcbiAgICAgICAgICAgICAgICAgICAgaW5pdGlhbGl6YXRpb25Qcm9taXNlc1RvV2FpdEZvci5wdXNoKGlkUHJvbWlzZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gUnVuIGNvcmUgZ3RhZyBmdW5jdGlvbiB3aXRoIGFyZ3MgYWZ0ZXIgYWxsIHJlbGV2YW50IGluaXRpYWxpemF0aW9uXHJcbiAgICAgICAgICAgIC8vIHByb21pc2VzIGhhdmUgYmVlbiByZXNvbHZlZC5cclxuICAgICAgICAgICAgUHJvbWlzZS5hbGwoaW5pdGlhbGl6YXRpb25Qcm9taXNlc1RvV2FpdEZvcilcclxuICAgICAgICAgICAgICAgIC8vIFdvcmthcm91bmQgZm9yIGh0dHA6Ly9iLzE0MTM3MDQ0OSAtIHRoaXJkIGFyZ3VtZW50IGNhbm5vdCBiZSB1bmRlZmluZWQuXHJcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZ3RhZ0NvcmUoR3RhZ0NvbW1hbmQuRVZFTlQsIGlkT3JOYW1lT3JQYXJhbXMsIGd0YWdQYXJhbXMgfHwge30pO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlKSB7IHJldHVybiBjb25zb2xlLmVycm9yKGUpOyB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoY29tbWFuZCA9PT0gR3RhZ0NvbW1hbmQuQ09ORklHKSB7XHJcbiAgICAgICAgICAgIHZhciBpbml0aWFsaXphdGlvblByb21pc2VUb1dhaXQgPSBpbml0aWFsaXplZElkUHJvbWlzZXNNYXBbaWRPck5hbWVPclBhcmFtc10gfHxcclxuICAgICAgICAgICAgICAgIFByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICBpbml0aWFsaXphdGlvblByb21pc2VUb1dhaXRcclxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGd0YWdDb3JlKEd0YWdDb21tYW5kLkNPTkZJRywgaWRPck5hbWVPclBhcmFtcywgZ3RhZ1BhcmFtcyk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKGUpIHsgcmV0dXJuIGNvbnNvbGUuZXJyb3IoZSk7IH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gU0VUIGNvbW1hbmQuXHJcbiAgICAgICAgICAgIC8vIFNwbGl0dGluZyBjYWxscyBmb3IgQ09ORklHIGFuZCBTRVQgdG8gbWFrZSBpdCBjbGVhciB3aGljaCBzaWduYXR1cmVcclxuICAgICAgICAgICAgLy8gVHlwZXNjcmlwdCBpcyBjaGVja2luZy5cclxuICAgICAgICAgICAgZ3RhZ0NvcmUoR3RhZ0NvbW1hbmQuU0VULCBpZE9yTmFtZU9yUGFyYW1zKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG59XHJcbi8qKlxyXG4gKiBDcmVhdGVzIGdsb2JhbCBndGFnIGZ1bmN0aW9uIG9yIHdyYXBzIGV4aXN0aW5nIG9uZSBpZiBmb3VuZC5cclxuICogVGhpcyB3cmFwcGVkIGZ1bmN0aW9uIGF0dGFjaGVzIEZpcmViYXNlIGluc3RhbmNlIElEIChGSUQpIHRvIGd0YWcgJ2NvbmZpZycgYW5kXHJcbiAqICdldmVudCcgY2FsbHMgdGhhdCBiZWxvbmcgdG8gdGhlIEdBSUQgYXNzb2NpYXRlZCB3aXRoIHRoaXMgRmlyZWJhc2UgaW5zdGFuY2UuXHJcbiAqXHJcbiAqIEBwYXJhbSBpbml0aWFsaXplZElkUHJvbWlzZXNNYXAgTWFwIG9mIGdhSWQgdG8gaW5pdGlhbGl6YXRpb24gcHJvbWlzZXMuXHJcbiAqIEBwYXJhbSBkYXRhTGF5ZXJOYW1lIE5hbWUgb2YgZ2xvYmFsIEdBIGRhdGFsYXllciBhcnJheS5cclxuICogQHBhcmFtIGd0YWdGdW5jdGlvbk5hbWUgTmFtZSBvZiBnbG9iYWwgZ3RhZyBmdW5jdGlvbiAoXCJndGFnXCIgaWYgbm90IHVzZXItc3BlY2lmaWVkKVxyXG4gKi9cclxuZnVuY3Rpb24gd3JhcE9yQ3JlYXRlR3RhZyhpbml0aWFsaXplZElkUHJvbWlzZXNNYXAsIGRhdGFMYXllck5hbWUsIGd0YWdGdW5jdGlvbk5hbWUpIHtcclxuICAgIC8vIENyZWF0ZSBhIGJhc2ljIGNvcmUgZ3RhZyBmdW5jdGlvblxyXG4gICAgdmFyIGd0YWdDb3JlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfYXJncyA9IFtdO1xyXG4gICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIF9hcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIE11c3QgcHVzaCBJQXJndW1lbnRzIG9iamVjdCwgbm90IGFuIGFycmF5LlxyXG4gICAgICAgIHdpbmRvd1tkYXRhTGF5ZXJOYW1lXS5wdXNoKGFyZ3VtZW50cyk7XHJcbiAgICB9O1xyXG4gICAgLy8gUmVwbGFjZSBpdCB3aXRoIGV4aXN0aW5nIG9uZSBpZiBmb3VuZFxyXG4gICAgaWYgKHdpbmRvd1tndGFnRnVuY3Rpb25OYW1lXSAmJlxyXG4gICAgICAgIHR5cGVvZiB3aW5kb3dbZ3RhZ0Z1bmN0aW9uTmFtZV0gPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgZ3RhZ0NvcmUgPSB3aW5kb3dbZ3RhZ0Z1bmN0aW9uTmFtZV07XHJcbiAgICB9XHJcbiAgICB3aW5kb3dbZ3RhZ0Z1bmN0aW9uTmFtZV0gPSB3cmFwR3RhZyhndGFnQ29yZSwgaW5pdGlhbGl6ZWRJZFByb21pc2VzTWFwKTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgZ3RhZ0NvcmU6IGd0YWdDb3JlLFxyXG4gICAgICAgIHdyYXBwZWRHdGFnOiB3aW5kb3dbZ3RhZ0Z1bmN0aW9uTmFtZV1cclxuICAgIH07XHJcbn1cclxuLyoqXHJcbiAqIFJldHVybnMgZmlyc3Qgc2NyaXB0IHRhZyBpbiBET00gbWF0Y2hpbmcgb3VyIGd0YWcgdXJsIHBhdHRlcm4uXHJcbiAqL1xyXG5mdW5jdGlvbiBmaW5kR3RhZ1NjcmlwdE9uUGFnZSgpIHtcclxuICAgIHZhciBzY3JpcHRUYWdzID0gd2luZG93LmRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdzY3JpcHQnKTtcclxuICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBPYmplY3QudmFsdWVzKHNjcmlwdFRhZ3MpOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgIHZhciB0YWcgPSBfYVtfaV07XHJcbiAgICAgICAgaWYgKHRhZy5zcmMgJiYgdGFnLnNyYy5pbmNsdWRlcyhHVEFHX1VSTCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRhZztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbnVsbDtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxudmFyIF9hO1xyXG52YXIgRVJST1JTID0gKF9hID0ge30sXHJcbiAgICBfYVtcIm5vLWdhLWlkXCIgLyogTk9fR0FfSUQgKi9dID0gXCJcXFwiXCIgKyBBTkFMWVRJQ1NfSURfRklFTEQgKyBcIlxcXCIgZmllbGQgaXMgZW1wdHkgaW4gXCIgK1xyXG4gICAgICAgICdGaXJlYmFzZSBjb25maWcuIEZpcmViYXNlIEFuYWx5dGljcyAnICtcclxuICAgICAgICAncmVxdWlyZXMgdGhpcyBmaWVsZCB0byBjb250YWluIGEgdmFsaWQgbWVhc3VyZW1lbnQgSUQuJyxcclxuICAgIF9hW1wiYWxyZWFkeS1leGlzdHNcIiAvKiBBTFJFQURZX0VYSVNUUyAqL10gPSAnQSBGaXJlYmFzZSBBbmFseXRpY3MgaW5zdGFuY2Ugd2l0aCB0aGUgbWVhc3VyZW1lbnQgSUQgJHtpZH0gJyArXHJcbiAgICAgICAgJyBhbHJlYWR5IGV4aXN0cy4gJyArXHJcbiAgICAgICAgJ09ubHkgb25lIEZpcmViYXNlIEFuYWx5dGljcyBpbnN0YW5jZSBjYW4gYmUgY3JlYXRlZCBmb3IgZWFjaCBtZWFzdXJlbWVudCBJRC4nLFxyXG4gICAgX2FbXCJhbHJlYWR5LWluaXRpYWxpemVkXCIgLyogQUxSRUFEWV9JTklUSUFMSVpFRCAqL10gPSAnRmlyZWJhc2UgQW5hbHl0aWNzIGhhcyBhbHJlYWR5IGJlZW4gaW5pdGlhbGl6ZWQuJyArXHJcbiAgICAgICAgJ3NldHRpbmdzKCkgbXVzdCBiZSBjYWxsZWQgYmVmb3JlIGluaXRpYWxpemluZyBhbnkgQW5hbHl0aWNzIGluc3RhbmNlJyArXHJcbiAgICAgICAgJ29yIGl0IHdpbGwgaGF2ZSBubyBlZmZlY3QuJyxcclxuICAgIF9hW1wiaW50ZXJvcC1jb21wb25lbnQtcmVnLWZhaWxlZFwiIC8qIElOVEVST1BfQ09NUE9ORU5UX1JFR19GQUlMRUQgKi9dID0gJ0ZpcmViYXNlIEFuYWx5dGljcyBJbnRlcm9wIENvbXBvbmVudCBmYWlsZWQgdG8gaW5zdGFudGlhdGUnLFxyXG4gICAgX2EpO1xyXG52YXIgRVJST1JfRkFDVE9SWSA9IG5ldyBFcnJvckZhY3RvcnkoJ2FuYWx5dGljcycsICdBbmFseXRpY3MnLCBFUlJPUlMpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIE1hcHMgZ2FJZCB0byBGSUQgZmV0Y2ggcHJvbWlzZXMuXHJcbiAqL1xyXG52YXIgaW5pdGlhbGl6ZWRJZFByb21pc2VzTWFwID0ge307XHJcbi8qKlxyXG4gKiBOYW1lIGZvciB3aW5kb3cgZ2xvYmFsIGRhdGEgbGF5ZXIgYXJyYXkgdXNlZCBieSBHQTogZGVmYXVsdHMgdG8gJ2RhdGFMYXllcicuXHJcbiAqL1xyXG52YXIgZGF0YUxheWVyTmFtZSA9ICdkYXRhTGF5ZXInO1xyXG4vKipcclxuICogTmFtZSBmb3Igd2luZG93IGdsb2JhbCBndGFnIGZ1bmN0aW9uIHVzZWQgYnkgR0E6IGRlZmF1bHRzIHRvICdndGFnJy5cclxuICovXHJcbnZhciBndGFnTmFtZSA9ICdndGFnJztcclxuLyoqXHJcbiAqIFJlcHJvZHVjdGlvbiBvZiBzdGFuZGFyZCBndGFnIGZ1bmN0aW9uIG9yIHJlZmVyZW5jZSB0byBleGlzdGluZ1xyXG4gKiBndGFnIGZ1bmN0aW9uIG9uIHdpbmRvdyBvYmplY3QuXHJcbiAqL1xyXG52YXIgZ3RhZ0NvcmVGdW5jdGlvbjtcclxuLyoqXHJcbiAqIFdyYXBwZXIgYXJvdW5kIGd0YWcgZnVuY3Rpb24gdGhhdCBlbnN1cmVzIEZJRCBpcyBzZW50IHdpdGggYWxsXHJcbiAqIHJlbGV2YW50IGV2ZW50IGFuZCBjb25maWcgY2FsbHMuXHJcbiAqL1xyXG52YXIgd3JhcHBlZEd0YWdGdW5jdGlvbjtcclxuLyoqXHJcbiAqIEZsYWcgdG8gZW5zdXJlIHBhZ2UgaW5pdGlhbGl6YXRpb24gc3RlcHMgKGNyZWF0aW9uIG9yIHdyYXBwaW5nIG9mXHJcbiAqIGRhdGFMYXllciBhbmQgZ3RhZyBzY3JpcHQpIGFyZSBvbmx5IHJ1biBvbmNlIHBlciBwYWdlIGxvYWQuXHJcbiAqL1xyXG52YXIgZ2xvYmFsSW5pdERvbmUgPSBmYWxzZTtcclxuLyoqXHJcbiAqIEZvciB0ZXN0aW5nXHJcbiAqL1xyXG5mdW5jdGlvbiByZXNldEdsb2JhbFZhcnMobmV3R2xvYmFsSW5pdERvbmUsIG5ld0dhSW5pdGlhbGl6ZWRQcm9taXNlKSB7XHJcbiAgICBpZiAobmV3R2xvYmFsSW5pdERvbmUgPT09IHZvaWQgMCkgeyBuZXdHbG9iYWxJbml0RG9uZSA9IGZhbHNlOyB9XHJcbiAgICBpZiAobmV3R2FJbml0aWFsaXplZFByb21pc2UgPT09IHZvaWQgMCkgeyBuZXdHYUluaXRpYWxpemVkUHJvbWlzZSA9IHt9OyB9XHJcbiAgICBnbG9iYWxJbml0RG9uZSA9IG5ld0dsb2JhbEluaXREb25lO1xyXG4gICAgaW5pdGlhbGl6ZWRJZFByb21pc2VzTWFwID0gbmV3R2FJbml0aWFsaXplZFByb21pc2U7XHJcbiAgICBkYXRhTGF5ZXJOYW1lID0gJ2RhdGFMYXllcic7XHJcbiAgICBndGFnTmFtZSA9ICdndGFnJztcclxufVxyXG4vKipcclxuICogVGhpcyBtdXN0IGJlIHJ1biBiZWZvcmUgY2FsbGluZyBmaXJlYmFzZS5hbmFseXRpY3MoKSBvciBpdCB3b24ndFxyXG4gKiBoYXZlIGFueSBlZmZlY3QuXHJcbiAqIEBwYXJhbSBvcHRpb25zIEN1c3RvbSBndGFnIGFuZCBkYXRhTGF5ZXIgbmFtZXMuXHJcbiAqL1xyXG5mdW5jdGlvbiBzZXR0aW5ncyhvcHRpb25zKSB7XHJcbiAgICBpZiAoZ2xvYmFsSW5pdERvbmUpIHtcclxuICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImFscmVhZHktaW5pdGlhbGl6ZWRcIiAvKiBBTFJFQURZX0lOSVRJQUxJWkVEICovKTtcclxuICAgIH1cclxuICAgIGlmIChvcHRpb25zLmRhdGFMYXllck5hbWUpIHtcclxuICAgICAgICBkYXRhTGF5ZXJOYW1lID0gb3B0aW9ucy5kYXRhTGF5ZXJOYW1lO1xyXG4gICAgfVxyXG4gICAgaWYgKG9wdGlvbnMuZ3RhZ05hbWUpIHtcclxuICAgICAgICBndGFnTmFtZSA9IG9wdGlvbnMuZ3RhZ05hbWU7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gZmFjdG9yeShhcHAsIGluc3RhbGxhdGlvbnMpIHtcclxuICAgIHZhciBhbmFseXRpY3NJZCA9IGFwcC5vcHRpb25zW0FOQUxZVElDU19JRF9GSUVMRF07XHJcbiAgICBpZiAoIWFuYWx5dGljc0lkKSB7XHJcbiAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJuby1nYS1pZFwiIC8qIE5PX0dBX0lEICovKTtcclxuICAgIH1cclxuICAgIGlmIChpbml0aWFsaXplZElkUHJvbWlzZXNNYXBbYW5hbHl0aWNzSWRdICE9IG51bGwpIHtcclxuICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImFscmVhZHktZXhpc3RzXCIgLyogQUxSRUFEWV9FWElTVFMgKi8sIHtcclxuICAgICAgICAgICAgaWQ6IGFuYWx5dGljc0lkXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAoIWdsb2JhbEluaXREb25lKSB7XHJcbiAgICAgICAgLy8gU3RlcHMgaGVyZSBzaG91bGQgb25seSBiZSBkb25lIG9uY2UgcGVyIHBhZ2U6IGNyZWF0aW9uIG9yIHdyYXBwaW5nXHJcbiAgICAgICAgLy8gb2YgZGF0YUxheWVyIGFuZCBnbG9iYWwgZ3RhZyBmdW5jdGlvbi5cclxuICAgICAgICAvLyBEZXRlY3QgaWYgdXNlciBoYXMgYWxyZWFkeSBwdXQgdGhlIGd0YWcgPHNjcmlwdD4gdGFnIG9uIHRoaXMgcGFnZS5cclxuICAgICAgICBpZiAoIWZpbmRHdGFnU2NyaXB0T25QYWdlKCkpIHtcclxuICAgICAgICAgICAgaW5zZXJ0U2NyaXB0VGFnKGRhdGFMYXllck5hbWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBnZXRPckNyZWF0ZURhdGFMYXllcihkYXRhTGF5ZXJOYW1lKTtcclxuICAgICAgICB2YXIgX2EgPSB3cmFwT3JDcmVhdGVHdGFnKGluaXRpYWxpemVkSWRQcm9taXNlc01hcCwgZGF0YUxheWVyTmFtZSwgZ3RhZ05hbWUpLCB3cmFwcGVkR3RhZyA9IF9hLndyYXBwZWRHdGFnLCBndGFnQ29yZSA9IF9hLmd0YWdDb3JlO1xyXG4gICAgICAgIHdyYXBwZWRHdGFnRnVuY3Rpb24gPSB3cmFwcGVkR3RhZztcclxuICAgICAgICBndGFnQ29yZUZ1bmN0aW9uID0gZ3RhZ0NvcmU7XHJcbiAgICAgICAgZ2xvYmFsSW5pdERvbmUgPSB0cnVlO1xyXG4gICAgfVxyXG4gICAgLy8gQXN5bmMgYnV0IG5vbi1ibG9ja2luZy5cclxuICAgIGluaXRpYWxpemVkSWRQcm9taXNlc01hcFthbmFseXRpY3NJZF0gPSBpbml0aWFsaXplR0FJZChhcHAsIGluc3RhbGxhdGlvbnMsIGd0YWdDb3JlRnVuY3Rpb24pO1xyXG4gICAgdmFyIGFuYWx5dGljc0luc3RhbmNlID0ge1xyXG4gICAgICAgIGFwcDogYXBwLFxyXG4gICAgICAgIGxvZ0V2ZW50OiBmdW5jdGlvbiAoZXZlbnROYW1lLCBldmVudFBhcmFtcywgb3B0aW9ucykge1xyXG4gICAgICAgICAgICByZXR1cm4gbG9nRXZlbnQod3JhcHBlZEd0YWdGdW5jdGlvbiwgYW5hbHl0aWNzSWQsIGV2ZW50TmFtZSwgZXZlbnRQYXJhbXMsIG9wdGlvbnMpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2V0Q3VycmVudFNjcmVlbjogZnVuY3Rpb24gKHNjcmVlbk5hbWUsIG9wdGlvbnMpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHNldEN1cnJlbnRTY3JlZW4od3JhcHBlZEd0YWdGdW5jdGlvbiwgYW5hbHl0aWNzSWQsIHNjcmVlbk5hbWUsIG9wdGlvbnMpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2V0VXNlcklkOiBmdW5jdGlvbiAoaWQsIG9wdGlvbnMpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHNldFVzZXJJZCh3cmFwcGVkR3RhZ0Z1bmN0aW9uLCBhbmFseXRpY3NJZCwgaWQsIG9wdGlvbnMpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2V0VXNlclByb3BlcnRpZXM6IGZ1bmN0aW9uIChwcm9wZXJ0aWVzLCBvcHRpb25zKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBzZXRVc2VyUHJvcGVydGllcyh3cmFwcGVkR3RhZ0Z1bmN0aW9uLCBhbmFseXRpY3NJZCwgcHJvcGVydGllcywgb3B0aW9ucyk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZXRBbmFseXRpY3NDb2xsZWN0aW9uRW5hYmxlZDogZnVuY3Rpb24gKGVuYWJsZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHNldEFuYWx5dGljc0NvbGxlY3Rpb25FbmFibGVkKGFuYWx5dGljc0lkLCBlbmFibGVkKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIGFuYWx5dGljc0luc3RhbmNlO1xyXG59XG5cbnZhciBuYW1lID0gXCJAZmlyZWJhc2UvYW5hbHl0aWNzXCI7XG52YXIgdmVyc2lvbiA9IFwiMC4yLjlcIjtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBUeXBlIGNvbnN0YW50IGZvciBGaXJlYmFzZSBBbmFseXRpY3MuXHJcbiAqL1xyXG52YXIgQU5BTFlUSUNTX1RZUEUgPSAnYW5hbHl0aWNzJztcclxuZnVuY3Rpb24gcmVnaXN0ZXJBbmFseXRpY3MoaW5zdGFuY2UpIHtcclxuICAgIGluc3RhbmNlLklOVEVSTkFMLnJlZ2lzdGVyQ29tcG9uZW50KG5ldyBDb21wb25lbnQoQU5BTFlUSUNTX1RZUEUsIGZ1bmN0aW9uIChjb250YWluZXIpIHtcclxuICAgICAgICAvLyBnZXRJbW1lZGlhdGUgZm9yIEZpcmViYXNlQXBwIHdpbGwgYWx3YXlzIHN1Y2NlZWRcclxuICAgICAgICB2YXIgYXBwID0gY29udGFpbmVyLmdldFByb3ZpZGVyKCdhcHAnKS5nZXRJbW1lZGlhdGUoKTtcclxuICAgICAgICB2YXIgaW5zdGFsbGF0aW9ucyA9IGNvbnRhaW5lclxyXG4gICAgICAgICAgICAuZ2V0UHJvdmlkZXIoJ2luc3RhbGxhdGlvbnMnKVxyXG4gICAgICAgICAgICAuZ2V0SW1tZWRpYXRlKCk7XHJcbiAgICAgICAgcmV0dXJuIGZhY3RvcnkoYXBwLCBpbnN0YWxsYXRpb25zKTtcclxuICAgIH0sIFwiUFVCTElDXCIgLyogUFVCTElDICovKS5zZXRTZXJ2aWNlUHJvcHMoe1xyXG4gICAgICAgIHNldHRpbmdzOiBzZXR0aW5ncyxcclxuICAgICAgICBFdmVudE5hbWU6IEV2ZW50TmFtZVxyXG4gICAgfSkpO1xyXG4gICAgaW5zdGFuY2UuSU5URVJOQUwucmVnaXN0ZXJDb21wb25lbnQobmV3IENvbXBvbmVudCgnYW5hbHl0aWNzLWludGVybmFsJywgaW50ZXJuYWxGYWN0b3J5LCBcIlBSSVZBVEVcIiAvKiBQUklWQVRFICovKSk7XHJcbiAgICBpbnN0YW5jZS5yZWdpc3RlclZlcnNpb24obmFtZSwgdmVyc2lvbik7XHJcbiAgICBmdW5jdGlvbiBpbnRlcm5hbEZhY3RvcnkoY29udGFpbmVyKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgdmFyIGFuYWx5dGljcyA9IGNvbnRhaW5lci5nZXRQcm92aWRlcihBTkFMWVRJQ1NfVFlQRSkuZ2V0SW1tZWRpYXRlKCk7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBsb2dFdmVudDogYW5hbHl0aWNzLmxvZ0V2ZW50XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiaW50ZXJvcC1jb21wb25lbnQtcmVnLWZhaWxlZFwiIC8qIElOVEVST1BfQ09NUE9ORU5UX1JFR19GQUlMRUQgKi8sIHtcclxuICAgICAgICAgICAgICAgIHJlYXNvbjogZVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxucmVnaXN0ZXJBbmFseXRpY3MoZmlyZWJhc2UpO1xuXG5leHBvcnQgeyBmYWN0b3J5LCByZWdpc3RlckFuYWx5dGljcywgcmVzZXRHbG9iYWxWYXJzLCBzZXR0aW5ncyB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguZXNtLmpzLm1hcFxuIiwiaW1wb3J0IGZpcmViYXNlIGZyb20gJ0BmaXJlYmFzZS9hcHAnO1xuaW1wb3J0ICdAZmlyZWJhc2UvaW5zdGFsbGF0aW9ucyc7XG5pbXBvcnQgeyBfX3NwcmVhZCwgX19hd2FpdGVyLCBfX2dlbmVyYXRvciwgX19leHRlbmRzLCBfX2Fzc2lnbiB9IGZyb20gJ3RzbGliJztcbmltcG9ydCB7IEVycm9yRmFjdG9yeSwgY3JlYXRlU3Vic2NyaWJlIH0gZnJvbSAnQGZpcmViYXNlL3V0aWwnO1xuaW1wb3J0IHsgQ29tcG9uZW50IH0gZnJvbSAnQGZpcmViYXNlL2NvbXBvbmVudCc7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG52YXIgX2E7XHJcbnZhciBFUlJPUl9NQVAgPSAoX2EgPSB7fSxcclxuICAgIF9hW1wib25seS1hdmFpbGFibGUtaW4td2luZG93XCIgLyogQVZBSUxBQkxFX0lOX1dJTkRPVyAqL10gPSAnVGhpcyBtZXRob2QgaXMgYXZhaWxhYmxlIGluIGEgV2luZG93IGNvbnRleHQuJyxcclxuICAgIF9hW1wib25seS1hdmFpbGFibGUtaW4tc3dcIiAvKiBBVkFJTEFCTEVfSU5fU1cgKi9dID0gJ1RoaXMgbWV0aG9kIGlzIGF2YWlsYWJsZSBpbiBhIHNlcnZpY2Ugd29ya2VyIGNvbnRleHQuJyxcclxuICAgIF9hW1wic2hvdWxkLWJlLW92ZXJyaWRlblwiIC8qIFNIT1VMRF9CRV9JTkhFUklURUQgKi9dID0gJ1RoaXMgbWV0aG9kIHNob3VsZCBiZSBvdmVycmlkZW4gYnkgZXh0ZW5kZWQgY2xhc3Nlcy4nLFxyXG4gICAgX2FbXCJiYWQtc2VuZGVyLWlkXCIgLyogQkFEX1NFTkRFUl9JRCAqL10gPSBcIlBsZWFzZSBlbnN1cmUgdGhhdCAnbWVzc2FnaW5nU2VuZGVySWQnIGlzIHNldCBcIiArXHJcbiAgICAgICAgJ2NvcnJlY3RseSBpbiB0aGUgb3B0aW9ucyBwYXNzZWQgaW50byBmaXJlYmFzZS5pbml0aWFsaXplQXBwKCkuJyxcclxuICAgIF9hW1wicGVybWlzc2lvbi1kZWZhdWx0XCIgLyogUEVSTUlTU0lPTl9ERUZBVUxUICovXSA9ICdUaGUgcmVxdWlyZWQgcGVybWlzc2lvbnMgd2VyZSBub3QgZ3JhbnRlZCBhbmQgZGlzbWlzc2VkIGluc3RlYWQuJyxcclxuICAgIF9hW1wicGVybWlzc2lvbi1ibG9ja2VkXCIgLyogUEVSTUlTU0lPTl9CTE9DS0VEICovXSA9ICdUaGUgcmVxdWlyZWQgcGVybWlzc2lvbnMgd2VyZSBub3QgZ3JhbnRlZCBhbmQgYmxvY2tlZCBpbnN0ZWFkLicsXHJcbiAgICBfYVtcInVuc3VwcG9ydGVkLWJyb3dzZXJcIiAvKiBVTlNVUFBPUlRFRF9CUk9XU0VSICovXSA9IFwiVGhpcyBicm93c2VyIGRvZXNuJ3Qgc3VwcG9ydCB0aGUgQVBJJ3MgXCIgK1xyXG4gICAgICAgICdyZXF1aXJlZCB0byB1c2UgdGhlIGZpcmViYXNlIFNESy4nLFxyXG4gICAgX2FbXCJub3RpZmljYXRpb25zLWJsb2NrZWRcIiAvKiBOT1RJRklDQVRJT05TX0JMT0NLRUQgKi9dID0gJ05vdGlmaWNhdGlvbnMgaGF2ZSBiZWVuIGJsb2NrZWQuJyxcclxuICAgIF9hW1wiZmFpbGVkLXNlcnZpY2V3b3JrZXItcmVnaXN0cmF0aW9uXCIgLyogRkFJTEVEX0RFRkFVTFRfUkVHSVNUUkFUSU9OICovXSA9ICdXZSBhcmUgdW5hYmxlIHRvIHJlZ2lzdGVyIHRoZSAnICtcclxuICAgICAgICAnZGVmYXVsdCBzZXJ2aWNlIHdvcmtlci4geyRicm93c2VyRXJyb3JNZXNzYWdlfScsXHJcbiAgICBfYVtcInN3LXJlZ2lzdHJhdGlvbi1leHBlY3RlZFwiIC8qIFNXX1JFR0lTVFJBVElPTl9FWFBFQ1RFRCAqL10gPSAnQSBzZXJ2aWNlIHdvcmtlciByZWdpc3RyYXRpb24gd2FzIHRoZSBleHBlY3RlZCBpbnB1dC4nLFxyXG4gICAgX2FbXCJnZXQtc3Vic2NyaXB0aW9uLWZhaWxlZFwiIC8qIEdFVF9TVUJTQ1JJUFRJT05fRkFJTEVEICovXSA9ICdUaGVyZSB3YXMgYW4gZXJyb3Igd2hlbiB0cnlpbmcgdG8gZ2V0ICcgK1xyXG4gICAgICAgICdhbnkgZXhpc3RpbmcgUHVzaCBTdWJzY3JpcHRpb25zLicsXHJcbiAgICBfYVtcImludmFsaWQtc2F2ZWQtdG9rZW5cIiAvKiBJTlZBTElEX1NBVkVEX1RPS0VOICovXSA9ICdVbmFibGUgdG8gYWNjZXNzIGRldGFpbHMgb2YgdGhlIHNhdmVkIHRva2VuLicsXHJcbiAgICBfYVtcInN3LXJlZy1yZWR1bmRhbnRcIiAvKiBTV19SRUdfUkVEVU5EQU5UICovXSA9ICdUaGUgc2VydmljZSB3b3JrZXIgYmVpbmcgdXNlZCBmb3IgcHVzaCB3YXMgbWFkZSByZWR1bmRhbnQuJyxcclxuICAgIF9hW1widG9rZW4tc3Vic2NyaWJlLWZhaWxlZFwiIC8qIFRPS0VOX1NVQlNDUklCRV9GQUlMRUQgKi9dID0gJ0EgcHJvYmxlbSBvY2N1cmVkIHdoaWxlIHN1YnNjcmliaW5nIHRoZSB1c2VyIHRvIEZDTTogeyRlcnJvckluZm99JyxcclxuICAgIF9hW1widG9rZW4tc3Vic2NyaWJlLW5vLXRva2VuXCIgLyogVE9LRU5fU1VCU0NSSUJFX05PX1RPS0VOICovXSA9ICdGQ00gcmV0dXJuZWQgbm8gdG9rZW4gd2hlbiBzdWJzY3JpYmluZyB0aGUgdXNlciB0byBwdXNoLicsXHJcbiAgICBfYVtcInRva2VuLXVuc3Vic2NyaWJlLWZhaWxlZFwiIC8qIFRPS0VOX1VOU1VCU0NSSUJFX0ZBSUxFRCAqL10gPSAnQSBwcm9ibGVtIG9jY3VyZWQgd2hpbGUgdW5zdWJzY3JpYmluZyB0aGUgJyArXHJcbiAgICAgICAgJ3VzZXIgZnJvbSBGQ006IHskZXJyb3JJbmZvfScsXHJcbiAgICBfYVtcInRva2VuLXVwZGF0ZS1mYWlsZWRcIiAvKiBUT0tFTl9VUERBVEVfRkFJTEVEICovXSA9ICdBIHByb2JsZW0gb2NjdXJlZCB3aGlsZSB1cGRhdGluZyB0aGUgdXNlciBmcm9tIEZDTTogeyRlcnJvckluZm99JyxcclxuICAgIF9hW1widG9rZW4tdXBkYXRlLW5vLXRva2VuXCIgLyogVE9LRU5fVVBEQVRFX05PX1RPS0VOICovXSA9ICdGQ00gcmV0dXJuZWQgbm8gdG9rZW4gd2hlbiB1cGRhdGluZyB0aGUgdXNlciB0byBwdXNoLicsXHJcbiAgICBfYVtcInVzZS1zdy1iZWZvcmUtZ2V0LXRva2VuXCIgLyogVVNFX1NXX0JFRk9SRV9HRVRfVE9LRU4gKi9dID0gJ1RoZSB1c2VTZXJ2aWNlV29ya2VyKCkgbWV0aG9kIG1heSBvbmx5IGJlIGNhbGxlZCBvbmNlIGFuZCBtdXN0IGJlICcgK1xyXG4gICAgICAgICdjYWxsZWQgYmVmb3JlIGNhbGxpbmcgZ2V0VG9rZW4oKSB0byBlbnN1cmUgeW91ciBzZXJ2aWNlIHdvcmtlciBpcyB1c2VkLicsXHJcbiAgICBfYVtcImludmFsaWQtZGVsZXRlLXRva2VuXCIgLyogSU5WQUxJRF9ERUxFVEVfVE9LRU4gKi9dID0gJ1lvdSBtdXN0IHBhc3MgYSB2YWxpZCB0b2tlbiBpbnRvICcgK1xyXG4gICAgICAgICdkZWxldGVUb2tlbigpLCBpLmUuIHRoZSB0b2tlbiBmcm9tIGdldFRva2VuKCkuJyxcclxuICAgIF9hW1wiZGVsZXRlLXRva2VuLW5vdC1mb3VuZFwiIC8qIERFTEVURV9UT0tFTl9OT1RfRk9VTkQgKi9dID0gJ1RoZSBkZWxldGlvbiBhdHRlbXB0IGZvciB0b2tlbiBjb3VsZCBub3QgJyArXHJcbiAgICAgICAgJ2JlIHBlcmZvcm1lZCBhcyB0aGUgdG9rZW4gd2FzIG5vdCBmb3VuZC4nLFxyXG4gICAgX2FbXCJkZWxldGUtc2NvcGUtbm90LWZvdW5kXCIgLyogREVMRVRFX1NDT1BFX05PVF9GT1VORCAqL10gPSAnVGhlIGRlbGV0aW9uIGF0dGVtcHQgZm9yIHNlcnZpY2Ugd29ya2VyICcgK1xyXG4gICAgICAgICdzY29wZSBjb3VsZCBub3QgYmUgcGVyZm9ybWVkIGFzIHRoZSBzY29wZSB3YXMgbm90IGZvdW5kLicsXHJcbiAgICBfYVtcImJnLWhhbmRsZXItZnVuY3Rpb24tZXhwZWN0ZWRcIiAvKiBCR19IQU5ETEVSX0ZVTkNUSU9OX0VYUEVDVEVEICovXSA9ICdUaGUgaW5wdXQgdG8gc2V0QmFja2dyb3VuZE1lc3NhZ2VIYW5kbGVyKCkgbXVzdCBiZSBhIGZ1bmN0aW9uLicsXHJcbiAgICBfYVtcIm5vLXdpbmRvdy1jbGllbnQtdG8tbXNnXCIgLyogTk9fV0lORE9XX0NMSUVOVF9UT19NU0cgKi9dID0gJ0FuIGF0dGVtcHQgd2FzIG1hZGUgdG8gbWVzc2FnZSBhIG5vbi1leGlzdGFudCB3aW5kb3cgY2xpZW50LicsXHJcbiAgICBfYVtcInVuYWJsZS10by1yZXN1YnNjcmliZVwiIC8qIFVOQUJMRV9UT19SRVNVQlNDUklCRSAqL10gPSAnVGhlcmUgd2FzIGFuIGVycm9yIHdoaWxlIHJlLXN1YnNjcmliaW5nICcgK1xyXG4gICAgICAgICd0aGUgRkNNIHRva2VuIGZvciBwdXNoIG1lc3NhZ2luZy4gV2lsbCBoYXZlIHRvIHJlc3Vic2NyaWJlIHRoZSAnICtcclxuICAgICAgICAndXNlciBvbiBuZXh0IHZpc2l0LiB7JGVycm9ySW5mb30nLFxyXG4gICAgX2FbXCJuby1mY20tdG9rZW4tZm9yLXJlc3Vic2NyaWJlXCIgLyogTk9fRkNNX1RPS0VOX0ZPUl9SRVNVQlNDUklCRSAqL10gPSAnQ291bGQgbm90IGZpbmQgYW4gRkNNIHRva2VuICcgK1xyXG4gICAgICAgICdhbmQgYXMgYSByZXN1bHQsIHVuYWJsZSB0byByZXN1YnNjcmliZS4gV2lsbCBoYXZlIHRvIHJlc3Vic2NyaWJlIHRoZSAnICtcclxuICAgICAgICAndXNlciBvbiBuZXh0IHZpc2l0LicsXHJcbiAgICBfYVtcImZhaWxlZC10by1kZWxldGUtdG9rZW5cIiAvKiBGQUlMRURfVE9fREVMRVRFX1RPS0VOICovXSA9ICdVbmFibGUgdG8gZGVsZXRlIHRoZSBjdXJyZW50bHkgc2F2ZWQgdG9rZW4uJyxcclxuICAgIF9hW1wibm8tc3ctaW4tcmVnXCIgLyogTk9fU1dfSU5fUkVHICovXSA9ICdFdmVuIHRob3VnaCB0aGUgc2VydmljZSB3b3JrZXIgcmVnaXN0cmF0aW9uIHdhcyAnICtcclxuICAgICAgICAnc3VjY2Vzc2Z1bCwgdGhlcmUgd2FzIGEgcHJvYmxlbSBhY2Nlc3NpbmcgdGhlIHNlcnZpY2Ugd29ya2VyIGl0c2VsZi4nLFxyXG4gICAgX2FbXCJiYWQtc2NvcGVcIiAvKiBCQURfU0NPUEUgKi9dID0gJ1RoZSBzZXJ2aWNlIHdvcmtlciBzY29wZSBtdXN0IGJlIGEgc3RyaW5nIHdpdGggYXQgJyArXHJcbiAgICAgICAgJ2xlYXN0IG9uZSBjaGFyYWN0ZXIuJyxcclxuICAgIF9hW1wiYmFkLXZhcGlkLWtleVwiIC8qIEJBRF9WQVBJRF9LRVkgKi9dID0gJ1RoZSBwdWJsaWMgVkFQSUQga2V5IGlzIG5vdCBhIFVpbnQ4QXJyYXkgd2l0aCA2NSBieXRlcy4nLFxyXG4gICAgX2FbXCJiYWQtc3Vic2NyaXB0aW9uXCIgLyogQkFEX1NVQlNDUklQVElPTiAqL10gPSAnVGhlIHN1YnNjcmlwdGlvbiBtdXN0IGJlIGEgdmFsaWQgUHVzaFN1YnNjcmlwdGlvbi4nLFxyXG4gICAgX2FbXCJiYWQtdG9rZW5cIiAvKiBCQURfVE9LRU4gKi9dID0gJ1RoZSBGQ00gVG9rZW4gdXNlZCBmb3Igc3RvcmFnZSAvIGxvb2t1cCB3YXMgbm90ICcgK1xyXG4gICAgICAgICdhIHZhbGlkIHRva2VuIHN0cmluZy4nLFxyXG4gICAgX2FbXCJmYWlsZWQtZGVsZXRlLXZhcGlkLWtleVwiIC8qIEZBSUxFRF9ERUxFVEVfVkFQSURfS0VZICovXSA9ICdUaGUgVkFQSUQga2V5IGNvdWxkIG5vdCBiZSBkZWxldGVkLicsXHJcbiAgICBfYVtcImludmFsaWQtcHVibGljLXZhcGlkLWtleVwiIC8qIElOVkFMSURfUFVCTElDX1ZBUElEX0tFWSAqL10gPSAnVGhlIHB1YmxpYyBWQVBJRCBrZXkgbXVzdCBiZSBhIHN0cmluZy4nLFxyXG4gICAgX2FbXCJ1c2UtcHVibGljLWtleS1iZWZvcmUtZ2V0LXRva2VuXCIgLyogVVNFX1BVQkxJQ19LRVlfQkVGT1JFX0dFVF9UT0tFTiAqL10gPSAnVGhlIHVzZVB1YmxpY1ZhcGlkS2V5KCkgbWV0aG9kIG1heSBvbmx5IGJlIGNhbGxlZCBvbmNlIGFuZCBtdXN0IGJlICcgK1xyXG4gICAgICAgICdjYWxsZWQgYmVmb3JlIGNhbGxpbmcgZ2V0VG9rZW4oKSB0byBlbnN1cmUgeW91ciBWQVBJRCBrZXkgaXMgdXNlZC4nLFxyXG4gICAgX2FbXCJwdWJsaWMtdmFwaWQta2V5LWRlY3J5cHRpb24tZmFpbGVkXCIgLyogUFVCTElDX0tFWV9ERUNSWVBUSU9OX0ZBSUxFRCAqL10gPSAnVGhlIHB1YmxpYyBWQVBJRCBrZXkgZGlkIG5vdCBlcXVhbCA2NSBieXRlcyB3aGVuIGRlY3J5cHRlZC4nLFxyXG4gICAgX2EpO1xyXG52YXIgZXJyb3JGYWN0b3J5ID0gbmV3IEVycm9yRmFjdG9yeSgnbWVzc2FnaW5nJywgJ01lc3NhZ2luZycsIEVSUk9SX01BUCk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG52YXIgREVGQVVMVF9QVUJMSUNfVkFQSURfS0VZID0gbmV3IFVpbnQ4QXJyYXkoW1xyXG4gICAgMHgwNCxcclxuICAgIDB4MzMsXHJcbiAgICAweDk0LFxyXG4gICAgMHhmNyxcclxuICAgIDB4ZGYsXHJcbiAgICAweGExLFxyXG4gICAgMHhlYixcclxuICAgIDB4YjEsXHJcbiAgICAweGRjLFxyXG4gICAgMHgwMyxcclxuICAgIDB4YTIsXHJcbiAgICAweDVlLFxyXG4gICAgMHgxNSxcclxuICAgIDB4NzEsXHJcbiAgICAweGRiLFxyXG4gICAgMHg0OCxcclxuICAgIDB4ZDMsXHJcbiAgICAweDJlLFxyXG4gICAgMHhlZCxcclxuICAgIDB4ZWQsXHJcbiAgICAweGIyLFxyXG4gICAgMHgzNCxcclxuICAgIDB4ZGIsXHJcbiAgICAweGI3LFxyXG4gICAgMHg0NyxcclxuICAgIDB4M2EsXHJcbiAgICAweDBjLFxyXG4gICAgMHg4ZixcclxuICAgIDB4YzQsXHJcbiAgICAweGNjLFxyXG4gICAgMHhlMSxcclxuICAgIDB4NmYsXHJcbiAgICAweDNjLFxyXG4gICAgMHg4YyxcclxuICAgIDB4ODQsXHJcbiAgICAweGRmLFxyXG4gICAgMHhhYixcclxuICAgIDB4YjYsXHJcbiAgICAweDY2LFxyXG4gICAgMHgzZSxcclxuICAgIDB4ZjIsXHJcbiAgICAweDBjLFxyXG4gICAgMHhkNCxcclxuICAgIDB4OGIsXHJcbiAgICAweGZlLFxyXG4gICAgMHhlMyxcclxuICAgIDB4ZjksXHJcbiAgICAweDc2LFxyXG4gICAgMHgyZixcclxuICAgIDB4MTQsXHJcbiAgICAweDFjLFxyXG4gICAgMHg2MyxcclxuICAgIDB4MDgsXHJcbiAgICAweDZhLFxyXG4gICAgMHg2ZixcclxuICAgIDB4MmQsXHJcbiAgICAweGIxLFxyXG4gICAgMHgxYSxcclxuICAgIDB4OTUsXHJcbiAgICAweGIwLFxyXG4gICAgMHhjZSxcclxuICAgIDB4MzcsXHJcbiAgICAweGMwLFxyXG4gICAgMHg5YyxcclxuICAgIDB4NmVcclxuXSk7XHJcbnZhciBFTkRQT0lOVCA9ICdodHRwczovL2ZjbXJlZ2lzdHJhdGlvbnMuZ29vZ2xlYXBpcy5jb20vdjEnO1xyXG52YXIgRk5fQ0FNUEFJR05fSUQgPSAnZ29vZ2xlLmMuYS5jX2lkJztcclxudmFyIEZOX0NBTVBBSUdOX05BTUUgPSAnZ29vZ2xlLmMuYS5jX2wnO1xyXG52YXIgRk5fQ0FNUEFJR05fVElNRSA9ICdnb29nbGUuYy5hLnRzJztcclxuLyoqIFNldCB0byAnMScgaWYgQW5hbHl0aWNzIGlzIGVuYWJsZWQgZm9yIHRoZSBjYW1wYWlnbiAqL1xyXG52YXIgRk5fQ0FNUEFJR05fQU5BTFlUSUNTX0VOQUJMRUQgPSAnZ29vZ2xlLmMuYS5lJztcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnZhciBNZXNzYWdlVHlwZTtcclxuKGZ1bmN0aW9uIChNZXNzYWdlVHlwZSkge1xyXG4gICAgTWVzc2FnZVR5cGVbXCJQVVNIX01TR19SRUNFSVZFRFwiXSA9IFwicHVzaC1tc2ctcmVjZWl2ZWRcIjtcclxuICAgIE1lc3NhZ2VUeXBlW1wiTk9USUZJQ0FUSU9OX0NMSUNLRURcIl0gPSBcIm5vdGlmaWNhdGlvbi1jbGlja2VkXCI7XHJcbn0pKE1lc3NhZ2VUeXBlIHx8IChNZXNzYWdlVHlwZSA9IHt9KSk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBpc0FycmF5QnVmZmVyRXF1YWwoYSwgYikge1xyXG4gICAgaWYgKGEgPT0gbnVsbCB8fCBiID09IG51bGwpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBpZiAoYSA9PT0gYikge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gICAgaWYgKGEuYnl0ZUxlbmd0aCAhPT0gYi5ieXRlTGVuZ3RoKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgdmFyIHZpZXdBID0gbmV3IERhdGFWaWV3KGEpO1xyXG4gICAgdmFyIHZpZXdCID0gbmV3IERhdGFWaWV3KGIpO1xyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhLmJ5dGVMZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGlmICh2aWV3QS5nZXRVaW50OChpKSAhPT0gdmlld0IuZ2V0VWludDgoaSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiB0cnVlO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiB0b0Jhc2U2NChhcnJheUJ1ZmZlcikge1xyXG4gICAgdmFyIHVpbnQ4VmVyc2lvbiA9IG5ldyBVaW50OEFycmF5KGFycmF5QnVmZmVyKTtcclxuICAgIHJldHVybiBidG9hKFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkoU3RyaW5nLCBfX3NwcmVhZCh1aW50OFZlcnNpb24pKSk7XHJcbn1cclxuZnVuY3Rpb24gYXJyYXlCdWZmZXJUb0Jhc2U2NChhcnJheUJ1ZmZlcikge1xyXG4gICAgdmFyIGJhc2U2NFN0cmluZyA9IHRvQmFzZTY0KGFycmF5QnVmZmVyKTtcclxuICAgIHJldHVybiBiYXNlNjRTdHJpbmdcclxuICAgICAgICAucmVwbGFjZSgvPS9nLCAnJylcclxuICAgICAgICAucmVwbGFjZSgvXFwrL2csICctJylcclxuICAgICAgICAucmVwbGFjZSgvXFwvL2csICdfJyk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnZhciBTdWJzY3JpcHRpb25NYW5hZ2VyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gU3Vic2NyaXB0aW9uTWFuYWdlcigpIHtcclxuICAgIH1cclxuICAgIFN1YnNjcmlwdGlvbk1hbmFnZXIucHJvdG90eXBlLmdldFRva2VuID0gZnVuY3Rpb24gKHNlcnZpY2VzLCBzdWJzY3JpcHRpb24sIHZhcGlkS2V5KSB7XHJcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgaGVhZGVycywgYm9keSwgc3Vic2NyaWJlT3B0aW9ucywgcmVzcG9uc2VEYXRhLCByZXNwb25zZSwgZXJyXzEsIG1lc3NhZ2U7XHJcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6IHJldHVybiBbNCAvKnlpZWxkKi8sIGdldEhlYWRlcnMoc2VydmljZXMpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnMgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvZHkgPSBnZXRCb2R5KHN1YnNjcmlwdGlvbiwgdmFwaWRLZXkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJzY3JpYmVPcHRpb25zID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoYm9keSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSAyO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2EudHJ5cy5wdXNoKFsyLCA1LCAsIDZdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgZmV0Y2goZ2V0RW5kcG9pbnQoc2VydmljZXMuYXBwKSwgc3Vic2NyaWJlT3B0aW9ucyldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHJlc3BvbnNlLmpzb24oKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZURhdGEgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDZdO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyXzEgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IGVycm9yRmFjdG9yeS5jcmVhdGUoXCJ0b2tlbi1zdWJzY3JpYmUtZmFpbGVkXCIgLyogVE9LRU5fU1VCU0NSSUJFX0ZBSUxFRCAqLywge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JJbmZvOiBlcnJfMVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDY6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZURhdGEuZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSByZXNwb25zZURhdGEuZXJyb3IubWVzc2FnZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IGVycm9yRmFjdG9yeS5jcmVhdGUoXCJ0b2tlbi1zdWJzY3JpYmUtZmFpbGVkXCIgLyogVE9LRU5fU1VCU0NSSUJFX0ZBSUxFRCAqLywge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9ySW5mbzogbWVzc2FnZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFyZXNwb25zZURhdGEudG9rZW4pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IGVycm9yRmFjdG9yeS5jcmVhdGUoXCJ0b2tlbi1zdWJzY3JpYmUtbm8tdG9rZW5cIiAvKiBUT0tFTl9TVUJTQ1JJQkVfTk9fVE9LRU4gKi8pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCByZXNwb25zZURhdGEudG9rZW5dO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFVwZGF0ZSB0aGUgdW5kZXJseWluZyB0b2tlbiBkZXRhaWxzIGZvciBmY21Ub2tlbi5cclxuICAgICAqL1xyXG4gICAgU3Vic2NyaXB0aW9uTWFuYWdlci5wcm90b3R5cGUudXBkYXRlVG9rZW4gPSBmdW5jdGlvbiAodG9rZW5EZXRhaWxzLCBzZXJ2aWNlcywgc3Vic2NyaXB0aW9uLCB2YXBpZEtleSkge1xyXG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGhlYWRlcnMsIGJvZHksIHVwZGF0ZU9wdGlvbnMsIHJlc3BvbnNlRGF0YSwgcmVzcG9uc2UsIGVycl8yLCBtZXNzYWdlO1xyXG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOiByZXR1cm4gWzQgLyp5aWVsZCovLCBnZXRIZWFkZXJzKHNlcnZpY2VzKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBib2R5ID0gZ2V0Qm9keShzdWJzY3JpcHRpb24sIHZhcGlkS2V5KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlT3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BBVENIJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShib2R5KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDI7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS50cnlzLnB1c2goWzIsIDUsICwgNl0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBmZXRjaChnZXRFbmRwb2ludChzZXJ2aWNlcy5hcHApICsgXCIvXCIgKyB0b2tlbkRldGFpbHMuZmNtVG9rZW4sIHVwZGF0ZU9wdGlvbnMpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCByZXNwb25zZS5qc29uKCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2VEYXRhID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCA2XTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycl8yID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnJvckZhY3RvcnkuY3JlYXRlKFwidG9rZW4tdXBkYXRlLWZhaWxlZFwiIC8qIFRPS0VOX1VQREFURV9GQUlMRUQgKi8sIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9ySW5mbzogZXJyXzJcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA2OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2VEYXRhLmVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlID0gcmVzcG9uc2VEYXRhLmVycm9yLm1lc3NhZ2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnJvckZhY3RvcnkuY3JlYXRlKFwidG9rZW4tdXBkYXRlLWZhaWxlZFwiIC8qIFRPS0VOX1VQREFURV9GQUlMRUQgKi8sIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvckluZm86IG1lc3NhZ2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghcmVzcG9uc2VEYXRhLnRva2VuKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnJvckZhY3RvcnkuY3JlYXRlKFwidG9rZW4tdXBkYXRlLW5vLXRva2VuXCIgLyogVE9LRU5fVVBEQVRFX05PX1RPS0VOICovKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgcmVzcG9uc2VEYXRhLnRva2VuXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgU3Vic2NyaXB0aW9uTWFuYWdlci5wcm90b3R5cGUuZGVsZXRlVG9rZW4gPSBmdW5jdGlvbiAoc2VydmljZXMsIHRva2VuRGV0YWlscykge1xyXG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGhlYWRlcnMsIHVuc3Vic2NyaWJlT3B0aW9ucywgcmVzcG9uc2UsIHJlc3BvbnNlRGF0YSwgbWVzc2FnZSwgZXJyXzM7XHJcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6IHJldHVybiBbNCAvKnlpZWxkKi8sIGdldEhlYWRlcnMoc2VydmljZXMpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnMgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVuc3Vic2NyaWJlT3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ0RFTEVURScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLmxhYmVsID0gMjtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnRyeXMucHVzaChbMiwgNSwgLCA2XSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIGZldGNoKGdldEVuZHBvaW50KHNlcnZpY2VzLmFwcCkgKyBcIi9cIiArIHRva2VuRGV0YWlscy5mY21Ub2tlbiwgdW5zdWJzY3JpYmVPcHRpb25zKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZSA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgcmVzcG9uc2UuanNvbigpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlRGF0YSA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlRGF0YS5lcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSA9IHJlc3BvbnNlRGF0YS5lcnJvci5tZXNzYWdlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyb3JGYWN0b3J5LmNyZWF0ZShcInRva2VuLXVuc3Vic2NyaWJlLWZhaWxlZFwiIC8qIFRPS0VOX1VOU1VCU0NSSUJFX0ZBSUxFRCAqLywge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9ySW5mbzogbWVzc2FnZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgNl07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA1OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJfMyA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyb3JGYWN0b3J5LmNyZWF0ZShcInRva2VuLXVuc3Vic2NyaWJlLWZhaWxlZFwiIC8qIFRPS0VOX1VOU1VCU0NSSUJFX0ZBSUxFRCAqLywge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JJbmZvOiBlcnJfM1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDY6IHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFN1YnNjcmlwdGlvbk1hbmFnZXI7XHJcbn0oKSk7XHJcbmZ1bmN0aW9uIGdldEVuZHBvaW50KGFwcCkge1xyXG4gICAgcmV0dXJuIEVORFBPSU5UICsgXCIvcHJvamVjdHMvXCIgKyBhcHAub3B0aW9ucy5wcm9qZWN0SWQgKyBcIi9yZWdpc3RyYXRpb25zXCI7XHJcbn1cclxuZnVuY3Rpb24gZ2V0SGVhZGVycyhfYSkge1xyXG4gICAgdmFyIGFwcCA9IF9hLmFwcCwgaW5zdGFsbGF0aW9ucyA9IF9hLmluc3RhbGxhdGlvbnM7XHJcbiAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGF1dGhUb2tlbjtcclxuICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9iKSB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAoX2IubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMDogcmV0dXJuIFs0IC8qeWllbGQqLywgaW5zdGFsbGF0aW9ucy5nZXRUb2tlbigpXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICBhdXRoVG9rZW4gPSBfYi5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIG5ldyBIZWFkZXJzKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBBY2NlcHQ6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICd4LWdvb2ctYXBpLWtleSc6IGFwcC5vcHRpb25zLmFwaUtleSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICd4LWdvb2ctZmlyZWJhc2UtaW5zdGFsbGF0aW9ucy1hdXRoJzogXCJGSVMgXCIgKyBhdXRoVG9rZW5cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSldO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufVxyXG5mdW5jdGlvbiBnZXRCb2R5KHN1YnNjcmlwdGlvbiwgdmFwaWRLZXkpIHtcclxuICAgIHZhciBwMjU2ZGggPSBhcnJheUJ1ZmZlclRvQmFzZTY0KHN1YnNjcmlwdGlvbi5nZXRLZXkoJ3AyNTZkaCcpKTtcclxuICAgIHZhciBhdXRoID0gYXJyYXlCdWZmZXJUb0Jhc2U2NChzdWJzY3JpcHRpb24uZ2V0S2V5KCdhdXRoJykpO1xyXG4gICAgdmFyIGJvZHkgPSB7XHJcbiAgICAgICAgd2ViOiB7XHJcbiAgICAgICAgICAgIGVuZHBvaW50OiBzdWJzY3JpcHRpb24uZW5kcG9pbnQsXHJcbiAgICAgICAgICAgIHAyNTZkaDogcDI1NmRoLFxyXG4gICAgICAgICAgICBhdXRoOiBhdXRoXHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIGlmICghaXNBcnJheUJ1ZmZlckVxdWFsKHZhcGlkS2V5LmJ1ZmZlciwgREVGQVVMVF9QVUJMSUNfVkFQSURfS0VZLmJ1ZmZlcikpIHtcclxuICAgICAgICBib2R5LndlYi5hcHBsaWNhdGlvblB1YktleSA9IGFycmF5QnVmZmVyVG9CYXNlNjQodmFwaWRLZXkpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGJvZHk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIGJhc2U2NFRvQXJyYXlCdWZmZXIoYmFzZTY0U3RyaW5nKSB7XHJcbiAgICB2YXIgcGFkZGluZyA9ICc9Jy5yZXBlYXQoKDQgLSAoYmFzZTY0U3RyaW5nLmxlbmd0aCAlIDQpKSAlIDQpO1xyXG4gICAgdmFyIGJhc2U2NCA9IChiYXNlNjRTdHJpbmcgKyBwYWRkaW5nKVxyXG4gICAgICAgIC5yZXBsYWNlKC9cXC0vZywgJysnKVxyXG4gICAgICAgIC5yZXBsYWNlKC9fL2csICcvJyk7XHJcbiAgICB2YXIgcmF3RGF0YSA9IGF0b2IoYmFzZTY0KTtcclxuICAgIHZhciBvdXRwdXRBcnJheSA9IG5ldyBVaW50OEFycmF5KHJhd0RhdGEubGVuZ3RoKTtcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmF3RGF0YS5sZW5ndGg7ICsraSkge1xyXG4gICAgICAgIG91dHB1dEFycmF5W2ldID0gcmF3RGF0YS5jaGFyQ29kZUF0KGkpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG91dHB1dEFycmF5O1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG52YXIgT0xEX0RCX05BTUUgPSAndW5kZWZpbmVkJztcclxudmFyIE9MRF9PQkpFQ1RfU1RPUkVfTkFNRSA9ICdmY21fdG9rZW5fb2JqZWN0X1N0b3JlJztcclxuZnVuY3Rpb24gaGFuZGxlRGIoZGIsIHNlcnZpY2VzKSB7XHJcbiAgICBpZiAoIWRiLm9iamVjdFN0b3JlTmFtZXMuY29udGFpbnMoT0xEX09CSkVDVF9TVE9SRV9OQU1FKSkge1xyXG4gICAgICAgIC8vIFdlIGZvdW5kIGEgZGF0YWJhc2Ugd2l0aCB0aGUgbmFtZSAndW5kZWZpbmVkJywgYnV0IG91ciBleHBlY3RlZCBvYmplY3RcclxuICAgICAgICAvLyBzdG9yZSBpc24ndCBkZWZpbmVkLlxyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIHZhciB0cmFuc2FjdGlvbiA9IGRiLnRyYW5zYWN0aW9uKE9MRF9PQkpFQ1RfU1RPUkVfTkFNRSk7XHJcbiAgICB2YXIgb2JqZWN0U3RvcmUgPSB0cmFuc2FjdGlvbi5vYmplY3RTdG9yZShPTERfT0JKRUNUX1NUT1JFX05BTUUpO1xyXG4gICAgdmFyIHN1YnNjcmlwdGlvbk1hbmFnZXIgPSBuZXcgU3Vic2NyaXB0aW9uTWFuYWdlcigpO1xyXG4gICAgdmFyIG9wZW5DdXJzb3JSZXF1ZXN0ID0gb2JqZWN0U3RvcmUub3BlbkN1cnNvcigpO1xyXG4gICAgb3BlbkN1cnNvclJlcXVlc3Qub25lcnJvciA9IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgIC8vIE5PT1AgLSBOb3RoaW5nIHdlIGNhbiBkby5cclxuICAgICAgICBjb25zb2xlLndhcm4oJ1VuYWJsZSB0byBjbGVhbnVwIG9sZCBJREIuJywgZXZlbnQpO1xyXG4gICAgfTtcclxuICAgIG9wZW5DdXJzb3JSZXF1ZXN0Lm9uc3VjY2VzcyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgY3Vyc29yID0gb3BlbkN1cnNvclJlcXVlc3QucmVzdWx0O1xyXG4gICAgICAgIGlmIChjdXJzb3IpIHtcclxuICAgICAgICAgICAgLy8gY3Vyc29yLnZhbHVlIGNvbnRhaW5zIHRoZSBjdXJyZW50IHJlY29yZCBiZWluZyBpdGVyYXRlZCB0aHJvdWdoXHJcbiAgICAgICAgICAgIC8vIHRoaXMgaXMgd2hlcmUgeW91J2QgZG8gc29tZXRoaW5nIHdpdGggdGhlIHJlc3VsdFxyXG4gICAgICAgICAgICB2YXIgdG9rZW5EZXRhaWxzID0gY3Vyc29yLnZhbHVlO1xyXG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWZsb2F0aW5nLXByb21pc2VzXHJcbiAgICAgICAgICAgIHN1YnNjcmlwdGlvbk1hbmFnZXIuZGVsZXRlVG9rZW4oc2VydmljZXMsIHRva2VuRGV0YWlscyk7XHJcbiAgICAgICAgICAgIGN1cnNvci5jb250aW51ZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgZGIuY2xvc2UoKTtcclxuICAgICAgICAgICAgaW5kZXhlZERCLmRlbGV0ZURhdGFiYXNlKE9MRF9EQl9OQU1FKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG59XHJcbmZ1bmN0aW9uIGNsZWFuVjEoc2VydmljZXMpIHtcclxuICAgIHZhciByZXF1ZXN0ID0gaW5kZXhlZERCLm9wZW4oT0xEX0RCX05BTUUpO1xyXG4gICAgcmVxdWVzdC5vbmVycm9yID0gZnVuY3Rpb24gKF9ldmVudCkge1xyXG4gICAgICAgIC8vIE5PT1AgLSBOb3RoaW5nIHdlIGNhbiBkby5cclxuICAgIH07XHJcbiAgICByZXF1ZXN0Lm9uc3VjY2VzcyA9IGZ1bmN0aW9uIChfZXZlbnQpIHtcclxuICAgICAgICB2YXIgZGIgPSByZXF1ZXN0LnJlc3VsdDtcclxuICAgICAgICBoYW5kbGVEYihkYiwgc2VydmljZXMpO1xyXG4gICAgfTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxudmFyIERiSW50ZXJmYWNlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gRGJJbnRlcmZhY2UoKSB7XHJcbiAgICAgICAgdGhpcy5kYlByb21pc2UgPSBudWxsO1xyXG4gICAgfVxyXG4gICAgLyoqIEdldHMgcmVjb3JkKHMpIGZyb20gdGhlIG9iamVjdFN0b3JlIHRoYXQgbWF0Y2ggdGhlIGdpdmVuIGtleS4gKi9cclxuICAgIERiSW50ZXJmYWNlLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY3JlYXRlVHJhbnNhY3Rpb24oZnVuY3Rpb24gKG9iamVjdFN0b3JlKSB7IHJldHVybiBvYmplY3RTdG9yZS5nZXQoa2V5KTsgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqIEdldHMgcmVjb3JkKHMpIGZyb20gdGhlIG9iamVjdFN0b3JlIHRoYXQgbWF0Y2ggdGhlIGdpdmVuIGluZGV4LiAqL1xyXG4gICAgRGJJbnRlcmZhY2UucHJvdG90eXBlLmdldEluZGV4ID0gZnVuY3Rpb24gKGluZGV4LCBrZXkpIHtcclxuICAgICAgICBmdW5jdGlvbiBydW5SZXF1ZXN0KG9iamVjdFN0b3JlKSB7XHJcbiAgICAgICAgICAgIHZhciBpZGJJbmRleCA9IG9iamVjdFN0b3JlLmluZGV4KGluZGV4KTtcclxuICAgICAgICAgICAgcmV0dXJuIGlkYkluZGV4LmdldChrZXkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5jcmVhdGVUcmFuc2FjdGlvbihydW5SZXF1ZXN0KTtcclxuICAgIH07XHJcbiAgICAvKiogQXNzaWducyBvciBvdmVyd3JpdGVzIHRoZSByZWNvcmQgZm9yIHRoZSBnaXZlbiB2YWx1ZS4gKi9cclxuICAgIC8vIEluZGV4ZWREQiB2YWx1ZXMgYXJlIG9mIHR5cGUgXCJhbnlcIlxyXG4gICAgRGJJbnRlcmZhY2UucHJvdG90eXBlLnB1dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNyZWF0ZVRyYW5zYWN0aW9uKGZ1bmN0aW9uIChvYmplY3RTdG9yZSkgeyByZXR1cm4gb2JqZWN0U3RvcmUucHV0KHZhbHVlKTsgfSwgJ3JlYWR3cml0ZScpO1xyXG4gICAgfTtcclxuICAgIC8qKiBEZWxldGVzIHJlY29yZChzKSBmcm9tIHRoZSBvYmplY3RTdG9yZSB0aGF0IG1hdGNoIHRoZSBnaXZlbiBrZXkuICovXHJcbiAgICBEYkludGVyZmFjZS5wcm90b3R5cGUuZGVsZXRlID0gZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNyZWF0ZVRyYW5zYWN0aW9uKGZ1bmN0aW9uIChvYmplY3RTdG9yZSkgeyByZXR1cm4gb2JqZWN0U3RvcmUuZGVsZXRlKGtleSk7IH0sICdyZWFkd3JpdGUnKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIENsb3NlIHRoZSBjdXJyZW50bHkgb3BlbiBkYXRhYmFzZS5cclxuICAgICAqL1xyXG4gICAgRGJJbnRlcmZhY2UucHJvdG90eXBlLmNsb3NlRGF0YWJhc2UgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgZGI7XHJcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5kYlByb21pc2UpIHJldHVybiBbMyAvKmJyZWFrKi8sIDJdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmRiUHJvbWlzZV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYiA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGIuY2xvc2UoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kYlByb21pc2UgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDI7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOiByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhbiBJbmRleGVkREIgVHJhbnNhY3Rpb24gYW5kIHBhc3NlcyBpdHMgb2JqZWN0U3RvcmUgdG8gdGhlXHJcbiAgICAgKiBydW5SZXF1ZXN0IGZ1bmN0aW9uLCB3aGljaCBydW5zIHRoZSBkYXRhYmFzZSByZXF1ZXN0LlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm4gUHJvbWlzZSB0aGF0IHJlc29sdmVzIHdpdGggdGhlIHJlc3VsdCBvZiB0aGUgcnVuUmVxdWVzdCBmdW5jdGlvblxyXG4gICAgICovXHJcbiAgICBEYkludGVyZmFjZS5wcm90b3R5cGUuY3JlYXRlVHJhbnNhY3Rpb24gPSBmdW5jdGlvbiAocnVuUmVxdWVzdCwgbW9kZSkge1xyXG4gICAgICAgIGlmIChtb2RlID09PSB2b2lkIDApIHsgbW9kZSA9ICdyZWFkb25seSc7IH1cclxuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBkYiwgdHJhbnNhY3Rpb24sIHJlcXVlc3QsIHJlc3VsdDtcclxuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDogcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5nZXREYigpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRiID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2FjdGlvbiA9IGRiLnRyYW5zYWN0aW9uKHRoaXMub2JqZWN0U3RvcmVOYW1lLCBtb2RlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWVzdCA9IHRyYW5zYWN0aW9uLm9iamVjdFN0b3JlKHRoaXMub2JqZWN0U3RvcmVOYW1lKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgcHJvbWlzaWZ5KHJ1blJlcXVlc3QocmVxdWVzdCkpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2FjdGlvbi5vbmNvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHJlc3VsdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2FjdGlvbi5vbmVycm9yID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWplY3QodHJhbnNhY3Rpb24uZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KV07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKiBHZXRzIHRoZSBjYWNoZWQgZGIgY29ubmVjdGlvbiBvciBvcGVucyBhIG5ldyBvbmUuICovXHJcbiAgICBEYkludGVyZmFjZS5wcm90b3R5cGUuZ2V0RGIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBpZiAoIXRoaXMuZGJQcm9taXNlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGJQcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHJlcXVlc3QgPSBpbmRleGVkREIub3BlbihfdGhpcy5kYk5hbWUsIF90aGlzLmRiVmVyc2lvbik7XHJcbiAgICAgICAgICAgICAgICByZXF1ZXN0Lm9uc3VjY2VzcyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHJlcXVlc3QucmVzdWx0KTtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICByZXF1ZXN0Lm9uZXJyb3IgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuZGJQcm9taXNlID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICByZWplY3QocmVxdWVzdC5lcnJvcik7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgcmVxdWVzdC5vbnVwZ3JhZGVuZWVkZWQgPSBmdW5jdGlvbiAoZXZlbnQpIHsgcmV0dXJuIF90aGlzLm9uRGJVcGdyYWRlKHJlcXVlc3QsIGV2ZW50KTsgfTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLmRiUHJvbWlzZTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gRGJJbnRlcmZhY2U7XHJcbn0oKSk7XHJcbi8qKiBQcm9taXNpZmllcyBhbiBJREJSZXF1ZXN0LiBSZXNvbHZlcyB3aXRoIHRoZSBJREJSZXF1ZXN0J3MgcmVzdWx0LiAqL1xyXG5mdW5jdGlvbiBwcm9taXNpZnkocmVxdWVzdCkge1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICByZXF1ZXN0Lm9uc3VjY2VzcyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmVzb2x2ZShyZXF1ZXN0LnJlc3VsdCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXF1ZXN0Lm9uZXJyb3IgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJlamVjdChyZXF1ZXN0LmVycm9yKTtcclxuICAgICAgICB9O1xyXG4gICAgfSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnZhciBUb2tlbkRldGFpbHNNb2RlbCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIF9fZXh0ZW5kcyhUb2tlbkRldGFpbHNNb2RlbCwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIFRva2VuRGV0YWlsc01vZGVsKHNlcnZpY2VzKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcclxuICAgICAgICBfdGhpcy5zZXJ2aWNlcyA9IHNlcnZpY2VzO1xyXG4gICAgICAgIF90aGlzLmRiTmFtZSA9ICdmY21fdG9rZW5fZGV0YWlsc19kYic7XHJcbiAgICAgICAgX3RoaXMuZGJWZXJzaW9uID0gNDtcclxuICAgICAgICBfdGhpcy5vYmplY3RTdG9yZU5hbWUgPSAnZmNtX3Rva2VuX29iamVjdF9TdG9yZSc7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgVG9rZW5EZXRhaWxzTW9kZWwucHJvdG90eXBlLm9uRGJVcGdyYWRlID0gZnVuY3Rpb24gKHJlcXVlc3QsIGV2ZW50KSB7XHJcbiAgICAgICAgdmFyIGRiID0gcmVxdWVzdC5yZXN1bHQ7XHJcbiAgICAgICAgLy8gTGFjayBvZiAnYnJlYWsnIHN0YXRlbWVudHMgaXMgaW50ZW50aW9uYWwuXHJcbiAgICAgICAgc3dpdGNoIChldmVudC5vbGRWZXJzaW9uKSB7XHJcbiAgICAgICAgICAgIGNhc2UgMDoge1xyXG4gICAgICAgICAgICAgICAgLy8gTmV3IElEQiBpbnN0YW5jZVxyXG4gICAgICAgICAgICAgICAgdmFyIG9iamVjdFN0b3JlID0gZGIuY3JlYXRlT2JqZWN0U3RvcmUodGhpcy5vYmplY3RTdG9yZU5hbWUsIHtcclxuICAgICAgICAgICAgICAgICAgICBrZXlQYXRoOiAnc3dTY29wZSdcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgLy8gTWFrZSBzdXJlIHRoZSBzZW5kZXIgSUQgY2FuIGJlIHNlYXJjaGVkXHJcbiAgICAgICAgICAgICAgICBvYmplY3RTdG9yZS5jcmVhdGVJbmRleCgnZmNtU2VuZGVySWQnLCAnZmNtU2VuZGVySWQnLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgdW5pcXVlOiBmYWxzZVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBvYmplY3RTdG9yZS5jcmVhdGVJbmRleCgnZmNtVG9rZW4nLCAnZmNtVG9rZW4nLCB7IHVuaXF1ZTogdHJ1ZSB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXNlIDE6IHtcclxuICAgICAgICAgICAgICAgIC8vIFByaW9yIHRvIHZlcnNpb24gMiwgd2Ugd2VyZSB1c2luZyBlaXRoZXIgJ2ZjbV90b2tlbl9kZXRhaWxzX2RiJ1xyXG4gICAgICAgICAgICAgICAgLy8gb3IgJ3VuZGVmaW5lZCcgYXMgdGhlIGRhdGFiYXNlIG5hbWUgZHVlIHRvIGJ1ZyBpbiB0aGUgU0RLXHJcbiAgICAgICAgICAgICAgICAvLyBTbyByZW1vdmUgdGhlIG9sZCB0b2tlbnMgYW5kIGRhdGFiYXNlcy5cclxuICAgICAgICAgICAgICAgIGNsZWFuVjEodGhpcy5zZXJ2aWNlcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2FzZSAyOiB7XHJcbiAgICAgICAgICAgICAgICAvLyBVcGRhdGUgZnJvbSB2MiB0byB2NCBkaXJlY3RseSBpbiBhIHNpbmdsZSBvcGVuQ3Vyc29yIHJlcXVlc3QuXHJcbiAgICAgICAgICAgICAgICAvLyBXZSBuZWVkIHRvIGRvIHRoaXMgYmVjYXVzZSBmb3Igc29tZSByZWFzb24sIGRvaW5nIGEgc3Vic2VxdWVudCB1cGRhdGUgb24gdGhlIHNhbWUgZGF0YVxyXG4gICAgICAgICAgICAgICAgLy8gaW4gdGhlIHNhbWUgdHJhbnNhY3Rpb24gZHJvcHMgdGhlIGZpcnN0IHVwZGF0ZS5cclxuICAgICAgICAgICAgICAgIHZhciBvYmplY3RTdG9yZSA9IHJlcXVlc3QudHJhbnNhY3Rpb24ub2JqZWN0U3RvcmUodGhpcy5vYmplY3RTdG9yZU5hbWUpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGN1cnNvclJlcXVlc3RfMSA9IG9iamVjdFN0b3JlLm9wZW5DdXJzb3IoKTtcclxuICAgICAgICAgICAgICAgIGN1cnNvclJlcXVlc3RfMS5vbnN1Y2Nlc3MgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGN1cnNvciA9IGN1cnNvclJlcXVlc3RfMS5yZXN1bHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnNvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSBjdXJzb3IudmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuZXdWYWx1ZSA9IF9fYXNzaWduKHt9LCB2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdmFsdWUuY3JlYXRlVGltZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3VmFsdWUuY3JlYXRlVGltZSA9IERhdGUubm93KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZS52YXBpZEtleSA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1ZhbHVlLnZhcGlkS2V5ID0gYmFzZTY0VG9BcnJheUJ1ZmZlcih2YWx1ZS52YXBpZEtleSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZS5hdXRoID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3VmFsdWUuYXV0aCA9IGJhc2U2NFRvQXJyYXlCdWZmZXIodmFsdWUuYXV0aCkuYnVmZmVyO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUuYXV0aCA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1ZhbHVlLnAyNTZkaCA9IGJhc2U2NFRvQXJyYXlCdWZmZXIodmFsdWUucDI1NmRoKS5idWZmZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZS5mY21QdXNoU2V0ID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIG5ld1ZhbHVlLmZjbVB1c2hTZXQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgY3Vyc29yLnVwZGF0ZShuZXdWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnNvci5jb250aW51ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAvLyBCcmVhayBoZXJlIGFzIHdlJ3ZlIGFscmVhZHkgdXBkYXRlZCB0byB2NC5cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhc2UgMzoge1xyXG4gICAgICAgICAgICAgICAgLy8gVXBkYXRlIGZyb20gVjMgdG8gVjQuXHJcbiAgICAgICAgICAgICAgICB2YXIgb2JqZWN0U3RvcmUgPSByZXF1ZXN0LnRyYW5zYWN0aW9uLm9iamVjdFN0b3JlKHRoaXMub2JqZWN0U3RvcmVOYW1lKTtcclxuICAgICAgICAgICAgICAgIHZhciBjdXJzb3JSZXF1ZXN0XzIgPSBvYmplY3RTdG9yZS5vcGVuQ3Vyc29yKCk7XHJcbiAgICAgICAgICAgICAgICBjdXJzb3JSZXF1ZXN0XzIub25zdWNjZXNzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjdXJzb3IgPSBjdXJzb3JSZXF1ZXN0XzIucmVzdWx0O1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjdXJzb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gY3Vyc29yLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbmV3VmFsdWUgPSBfX2Fzc2lnbih7fSwgdmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHZhbHVlLmZjbVB1c2hTZXQgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgbmV3VmFsdWUuZmNtUHVzaFNldDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJzb3IudXBkYXRlKG5ld1ZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3Vyc29yLmNvbnRpbnVlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEdpdmVuIGEgdG9rZW4sIHRoaXMgbWV0aG9kIHdpbGwgbG9vayB1cCB0aGUgZGV0YWlscyBpbiBpbmRleGVkREIuXHJcbiAgICAgKi9cclxuICAgIFRva2VuRGV0YWlsc01vZGVsLnByb3RvdHlwZS5nZXRUb2tlbkRldGFpbHNGcm9tVG9rZW4gPSBmdW5jdGlvbiAoZmNtVG9rZW4pIHtcclxuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIGlmICghZmNtVG9rZW4pIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnJvckZhY3RvcnkuY3JlYXRlKFwiYmFkLXRva2VuXCIgLyogQkFEX1RPS0VOICovKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHZhbGlkYXRlSW5wdXRzKHsgZmNtVG9rZW46IGZjbVRva2VuIH0pO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMuZ2V0SW5kZXgoJ2ZjbVRva2VuJywgZmNtVG9rZW4pXTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBHaXZlbiBhIHNlcnZpY2Ugd29ya2VyIHNjb3BlLCB0aGlzIG1ldGhvZCB3aWxsIGxvb2sgdXAgdGhlIGRldGFpbHMgaW5cclxuICAgICAqIGluZGV4ZWREQi5cclxuICAgICAqIEByZXR1cm4gVGhlIGRldGFpbHMgYXNzb2NpYXRlZCB3aXRoIHRoYXQgdG9rZW4uXHJcbiAgICAgKi9cclxuICAgIFRva2VuRGV0YWlsc01vZGVsLnByb3RvdHlwZS5nZXRUb2tlbkRldGFpbHNGcm9tU1dTY29wZSA9IGZ1bmN0aW9uIChzd1Njb3BlKSB7XHJcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXN3U2NvcGUpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnJvckZhY3RvcnkuY3JlYXRlKFwiYmFkLXNjb3BlXCIgLyogQkFEX1NDT1BFICovKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHZhbGlkYXRlSW5wdXRzKHsgc3dTY29wZTogc3dTY29wZSB9KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0aGlzLmdldChzd1Njb3BlKV07XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogU2F2ZSB0aGUgZGV0YWlscyBmb3IgdGhlIGZjbSB0b2tlbiBmb3IgcmUtdXNlIGF0IGEgbGF0ZXIgZGF0ZS5cclxuICAgICAqIEBwYXJhbSBpbnB1dCBBIHBsYWluIGpzIG9iamVjdCBjb250YWluaW5nIGFyZ3MgdG8gc2F2ZS5cclxuICAgICAqL1xyXG4gICAgVG9rZW5EZXRhaWxzTW9kZWwucHJvdG90eXBlLnNhdmVUb2tlbkRldGFpbHMgPSBmdW5jdGlvbiAodG9rZW5EZXRhaWxzKSB7XHJcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRva2VuRGV0YWlscy5zd1Njb3BlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyb3JGYWN0b3J5LmNyZWF0ZShcImJhZC1zY29wZVwiIC8qIEJBRF9TQ09QRSAqLyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRva2VuRGV0YWlscy52YXBpZEtleSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IGVycm9yRmFjdG9yeS5jcmVhdGUoXCJiYWQtdmFwaWQta2V5XCIgLyogQkFEX1ZBUElEX0tFWSAqLyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRva2VuRGV0YWlscy5lbmRwb2ludCB8fCAhdG9rZW5EZXRhaWxzLmF1dGggfHwgIXRva2VuRGV0YWlscy5wMjU2ZGgpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnJvckZhY3RvcnkuY3JlYXRlKFwiYmFkLXN1YnNjcmlwdGlvblwiIC8qIEJBRF9TVUJTQ1JJUFRJT04gKi8pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKCF0b2tlbkRldGFpbHMuZmNtU2VuZGVySWQpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnJvckZhY3RvcnkuY3JlYXRlKFwiYmFkLXNlbmRlci1pZFwiIC8qIEJBRF9TRU5ERVJfSUQgKi8pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKCF0b2tlbkRldGFpbHMuZmNtVG9rZW4pIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnJvckZhY3RvcnkuY3JlYXRlKFwiYmFkLXRva2VuXCIgLyogQkFEX1RPS0VOICovKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHZhbGlkYXRlSW5wdXRzKHRva2VuRGV0YWlscyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdGhpcy5wdXQodG9rZW5EZXRhaWxzKV07XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogVGhpcyBtZXRob2QgZGVsZXRlcyBkZXRhaWxzIG9mIHRoZSBjdXJyZW50IEZDTSB0b2tlbi5cclxuICAgICAqIEl0J3MgcmV0dXJuaW5nIGEgcHJvbWlzZSBpbiBjYXNlIHdlIG5lZWQgdG8gbW92ZSB0byBhbiBhc3luY1xyXG4gICAgICogbWV0aG9kIGZvciBkZWxldGluZyBhdCBhIGxhdGVyIGRhdGUuXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybiBSZXNvbHZlcyBvbmNlIHRoZSBGQ00gdG9rZW4gZGV0YWlscyBoYXZlIGJlZW4gZGVsZXRlZCBhbmQgcmV0dXJuc1xyXG4gICAgICogdGhlIGRlbGV0ZWQgZGV0YWlscy5cclxuICAgICAqL1xyXG4gICAgVG9rZW5EZXRhaWxzTW9kZWwucHJvdG90eXBlLmRlbGV0ZVRva2VuID0gZnVuY3Rpb24gKHRva2VuKSB7XHJcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgZGV0YWlscztcclxuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0b2tlbiAhPT0gJ3N0cmluZycgfHwgdG9rZW4ubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgUHJvbWlzZS5yZWplY3QoZXJyb3JGYWN0b3J5LmNyZWF0ZShcImludmFsaWQtZGVsZXRlLXRva2VuXCIgLyogSU5WQUxJRF9ERUxFVEVfVE9LRU4gKi8pKV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5nZXRUb2tlbkRldGFpbHNGcm9tVG9rZW4odG9rZW4pXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRldGFpbHMgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZGV0YWlscykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyb3JGYWN0b3J5LmNyZWF0ZShcImRlbGV0ZS10b2tlbi1ub3QtZm91bmRcIiAvKiBERUxFVEVfVE9LRU5fTk9UX0ZPVU5EICovKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmRlbGV0ZShkZXRhaWxzLnN3U2NvcGUpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIGRldGFpbHNdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gVG9rZW5EZXRhaWxzTW9kZWw7XHJcbn0oRGJJbnRlcmZhY2UpKTtcclxuLyoqXHJcbiAqIFRoaXMgbWV0aG9kIHRha2VzIGFuIG9iamVjdCBhbmQgd2lsbCBjaGVjayBmb3Iga25vd24gYXJndW1lbnRzIGFuZFxyXG4gKiB2YWxpZGF0ZSB0aGUgaW5wdXQuXHJcbiAqIEByZXR1cm4gUHJvbWlzZSB0aGF0IHJlc29sdmVzIGlmIGlucHV0IGlzIHZhbGlkLCByZWplY3RzIG90aGVyd2lzZS5cclxuICovXHJcbmZ1bmN0aW9uIHZhbGlkYXRlSW5wdXRzKGlucHV0KSB7XHJcbiAgICBpZiAoaW5wdXQuZmNtVG9rZW4pIHtcclxuICAgICAgICBpZiAodHlwZW9mIGlucHV0LmZjbVRva2VuICE9PSAnc3RyaW5nJyB8fCBpbnB1dC5mY21Ub2tlbi5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgdGhyb3cgZXJyb3JGYWN0b3J5LmNyZWF0ZShcImJhZC10b2tlblwiIC8qIEJBRF9UT0tFTiAqLyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKGlucHV0LnN3U2NvcGUpIHtcclxuICAgICAgICBpZiAodHlwZW9mIGlucHV0LnN3U2NvcGUgIT09ICdzdHJpbmcnIHx8IGlucHV0LnN3U2NvcGUubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIHRocm93IGVycm9yRmFjdG9yeS5jcmVhdGUoXCJiYWQtc2NvcGVcIiAvKiBCQURfU0NPUEUgKi8pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGlmIChpbnB1dC52YXBpZEtleSkge1xyXG4gICAgICAgIGlmICghKGlucHV0LnZhcGlkS2V5IGluc3RhbmNlb2YgVWludDhBcnJheSkgfHxcclxuICAgICAgICAgICAgaW5wdXQudmFwaWRLZXkubGVuZ3RoICE9PSA2NSkge1xyXG4gICAgICAgICAgICB0aHJvdyBlcnJvckZhY3RvcnkuY3JlYXRlKFwiYmFkLXZhcGlkLWtleVwiIC8qIEJBRF9WQVBJRF9LRVkgKi8pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGlmIChpbnB1dC5lbmRwb2ludCkge1xyXG4gICAgICAgIGlmICh0eXBlb2YgaW5wdXQuZW5kcG9pbnQgIT09ICdzdHJpbmcnIHx8IGlucHV0LmVuZHBvaW50Lmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICB0aHJvdyBlcnJvckZhY3RvcnkuY3JlYXRlKFwiYmFkLXN1YnNjcmlwdGlvblwiIC8qIEJBRF9TVUJTQ1JJUFRJT04gKi8pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGlmIChpbnB1dC5hdXRoKSB7XHJcbiAgICAgICAgaWYgKCEoaW5wdXQuYXV0aCBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSkge1xyXG4gICAgICAgICAgICB0aHJvdyBlcnJvckZhY3RvcnkuY3JlYXRlKFwiYmFkLXN1YnNjcmlwdGlvblwiIC8qIEJBRF9TVUJTQ1JJUFRJT04gKi8pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGlmIChpbnB1dC5wMjU2ZGgpIHtcclxuICAgICAgICBpZiAoIShpbnB1dC5wMjU2ZGggaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikpIHtcclxuICAgICAgICAgICAgdGhyb3cgZXJyb3JGYWN0b3J5LmNyZWF0ZShcImJhZC1zdWJzY3JpcHRpb25cIiAvKiBCQURfU1VCU0NSSVBUSU9OICovKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAoaW5wdXQuZmNtU2VuZGVySWQpIHtcclxuICAgICAgICBpZiAodHlwZW9mIGlucHV0LmZjbVNlbmRlcklkICE9PSAnc3RyaW5nJyB8fFxyXG4gICAgICAgICAgICBpbnB1dC5mY21TZW5kZXJJZC5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgdGhyb3cgZXJyb3JGYWN0b3J5LmNyZWF0ZShcImJhZC1zZW5kZXItaWRcIiAvKiBCQURfU0VOREVSX0lEICovKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnZhciBVTkNPTVBSRVNTRURfUFVCTElDX0tFWV9TSVpFID0gNjU7XHJcbnZhciBWYXBpZERldGFpbHNNb2RlbCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIF9fZXh0ZW5kcyhWYXBpZERldGFpbHNNb2RlbCwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIFZhcGlkRGV0YWlsc01vZGVsKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xyXG4gICAgICAgIF90aGlzLmRiTmFtZSA9ICdmY21fdmFwaWRfZGV0YWlsc19kYic7XHJcbiAgICAgICAgX3RoaXMuZGJWZXJzaW9uID0gMTtcclxuICAgICAgICBfdGhpcy5vYmplY3RTdG9yZU5hbWUgPSAnZmNtX3ZhcGlkX29iamVjdF9TdG9yZSc7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgVmFwaWREZXRhaWxzTW9kZWwucHJvdG90eXBlLm9uRGJVcGdyYWRlID0gZnVuY3Rpb24gKHJlcXVlc3QpIHtcclxuICAgICAgICB2YXIgZGIgPSByZXF1ZXN0LnJlc3VsdDtcclxuICAgICAgICBkYi5jcmVhdGVPYmplY3RTdG9yZSh0aGlzLm9iamVjdFN0b3JlTmFtZSwgeyBrZXlQYXRoOiAnc3dTY29wZScgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBHaXZlbiBhIHNlcnZpY2Ugd29ya2VyIHNjb3BlLCB0aGlzIG1ldGhvZCB3aWxsIGxvb2sgdXAgdGhlIHZhcGlkIGtleVxyXG4gICAgICogaW4gaW5kZXhlZERCLlxyXG4gICAgICovXHJcbiAgICBWYXBpZERldGFpbHNNb2RlbC5wcm90b3R5cGUuZ2V0VmFwaWRGcm9tU1dTY29wZSA9IGZ1bmN0aW9uIChzd1Njb3BlKSB7XHJcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgcmVzdWx0O1xyXG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHN3U2NvcGUgIT09ICdzdHJpbmcnIHx8IHN3U2NvcGUubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnJvckZhY3RvcnkuY3JlYXRlKFwiYmFkLXNjb3BlXCIgLyogQkFEX1NDT1BFICovKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmdldChzd1Njb3BlKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCByZXN1bHQgPyByZXN1bHQudmFwaWRLZXkgOiB1bmRlZmluZWRdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFNhdmUgYSB2YXBpZCBrZXkgYWdhaW5zdCBhIHN3U2NvcGUgZm9yIGxhdGVyIGRhdGUuXHJcbiAgICAgKi9cclxuICAgIFZhcGlkRGV0YWlsc01vZGVsLnByb3RvdHlwZS5zYXZlVmFwaWREZXRhaWxzID0gZnVuY3Rpb24gKHN3U2NvcGUsIHZhcGlkS2V5KSB7XHJcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgZGV0YWlscztcclxuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBzd1Njb3BlICE9PSAnc3RyaW5nJyB8fCBzd1Njb3BlLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IGVycm9yRmFjdG9yeS5jcmVhdGUoXCJiYWQtc2NvcGVcIiAvKiBCQURfU0NPUEUgKi8pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKHZhcGlkS2V5ID09PSBudWxsIHx8IHZhcGlkS2V5Lmxlbmd0aCAhPT0gVU5DT01QUkVTU0VEX1BVQkxJQ19LRVlfU0laRSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IGVycm9yRmFjdG9yeS5jcmVhdGUoXCJiYWQtdmFwaWQta2V5XCIgLyogQkFEX1ZBUElEX0tFWSAqLyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBkZXRhaWxzID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIHN3U2NvcGU6IHN3U2NvcGUsXHJcbiAgICAgICAgICAgICAgICAgICAgdmFwaWRLZXk6IHZhcGlkS2V5XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMucHV0KGRldGFpbHMpXTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBUaGlzIG1ldGhvZCBkZWxldGVzIGRldGFpbHMgb2YgdGhlIGN1cnJlbnQgRkNNIFZBUElEIGtleSBmb3IgYSBTVyBzY29wZS5cclxuICAgICAqIFJlc29sdmVzIG9uY2UgdGhlIHNjb3BlL3ZhcGlkIGRldGFpbHMgaGF2ZSBiZWVuIGRlbGV0ZWQgYW5kIHJldHVybnMgdGhlXHJcbiAgICAgKiBkZWxldGVkIHZhcGlkIGtleS5cclxuICAgICAqL1xyXG4gICAgVmFwaWREZXRhaWxzTW9kZWwucHJvdG90eXBlLmRlbGV0ZVZhcGlkRGV0YWlscyA9IGZ1bmN0aW9uIChzd1Njb3BlKSB7XHJcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgdmFwaWRLZXk7XHJcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6IHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuZ2V0VmFwaWRGcm9tU1dTY29wZShzd1Njb3BlKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXBpZEtleSA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF2YXBpZEtleSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyb3JGYWN0b3J5LmNyZWF0ZShcImRlbGV0ZS1zY29wZS1ub3QtZm91bmRcIiAvKiBERUxFVEVfU0NPUEVfTk9UX0ZPVU5EICovKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmRlbGV0ZShzd1Njb3BlKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB2YXBpZEtleV07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBWYXBpZERldGFpbHNNb2RlbDtcclxufShEYkludGVyZmFjZSkpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLy8gVG9rZW4gc2hvdWxkIGJlIHJlZnJlc2hlZCBvbmNlIGEgd2Vlay5cclxudmFyIFRPS0VOX0VYUElSQVRJT05fTUlMTElTID0gNyAqIDI0ICogNjAgKiA2MCAqIDEwMDA7IC8vIDcgZGF5c1xyXG52YXIgQmFzZUNvbnRyb2xsZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBCYXNlQ29udHJvbGxlcihzZXJ2aWNlcykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5zZXJ2aWNlcyA9IHNlcnZpY2VzO1xyXG4gICAgICAgIHRoaXMudmFwaWREZXRhaWxzTW9kZWwgPSBuZXcgVmFwaWREZXRhaWxzTW9kZWwoKTtcclxuICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbk1hbmFnZXIgPSBuZXcgU3Vic2NyaXB0aW9uTWFuYWdlcigpO1xyXG4gICAgICAgIHZhciBhcHAgPSBzZXJ2aWNlcy5hcHA7XHJcbiAgICAgICAgdGhpcy5hcHAgPSBhcHA7XHJcbiAgICAgICAgaWYgKCFhcHAub3B0aW9ucy5tZXNzYWdpbmdTZW5kZXJJZCB8fFxyXG4gICAgICAgICAgICB0eXBlb2YgYXBwLm9wdGlvbnMubWVzc2FnaW5nU2VuZGVySWQgIT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgIHRocm93IGVycm9yRmFjdG9yeS5jcmVhdGUoXCJiYWQtc2VuZGVyLWlkXCIgLyogQkFEX1NFTkRFUl9JRCAqLyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuSU5URVJOQUwgPSB7XHJcbiAgICAgICAgICAgIGRlbGV0ZTogZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMuZGVsZXRlKCk7IH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMudG9rZW5EZXRhaWxzTW9kZWwgPSBuZXcgVG9rZW5EZXRhaWxzTW9kZWwoc2VydmljZXMpO1xyXG4gICAgfVxyXG4gICAgQmFzZUNvbnRyb2xsZXIucHJvdG90eXBlLmdldFRva2VuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHBlcm1pc3Npb24sIHN3UmVnLCBwdWJsaWNWYXBpZEtleSwgcHVzaFN1YnNjcmlwdGlvbiwgdG9rZW5EZXRhaWxzO1xyXG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwZXJtaXNzaW9uID0gdGhpcy5nZXROb3RpZmljYXRpb25QZXJtaXNzaW9uKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKHBlcm1pc3Npb24gPT09ICdkZWZhdWx0JykpIHJldHVybiBbMyAvKmJyZWFrKi8sIDJdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLnJlcXVlc3ROb3RpZmljYXRpb25QZXJtaXNzaW9uKCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlIHVzZXIgaGFzbid0IGFsbG93ZWQgb3IgZGVuaWVkIG5vdGlmaWNhdGlvbnMgeWV0LiBBc2sgdGhlbS5cclxuICAgICAgICAgICAgICAgICAgICAgICAgcGVybWlzc2lvbiA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSAyO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBlcm1pc3Npb24gIT09ICdncmFudGVkJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyb3JGYWN0b3J5LmNyZWF0ZShcIm5vdGlmaWNhdGlvbnMtYmxvY2tlZFwiIC8qIE5PVElGSUNBVElPTlNfQkxPQ0tFRCAqLyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5nZXRTV1JlZ2lzdHJhdGlvbl8oKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzd1JlZyA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5nZXRQdWJsaWNWYXBpZEtleV8oKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwdWJsaWNWYXBpZEtleSA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5nZXRQdXNoU3Vic2NyaXB0aW9uKHN3UmVnLCBwdWJsaWNWYXBpZEtleSldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHVzaFN1YnNjcmlwdGlvbiA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy50b2tlbkRldGFpbHNNb2RlbC5nZXRUb2tlbkRldGFpbHNGcm9tU1dTY29wZShzd1JlZy5zY29wZSldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG9rZW5EZXRhaWxzID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodG9rZW5EZXRhaWxzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdGhpcy5tYW5hZ2VFeGlzdGluZ1Rva2VuKHN3UmVnLCBwdXNoU3Vic2NyaXB0aW9uLCBwdWJsaWNWYXBpZEtleSwgdG9rZW5EZXRhaWxzKV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMuZ2V0TmV3VG9rZW4oc3dSZWcsIHB1c2hTdWJzY3JpcHRpb24sIHB1YmxpY1ZhcGlkS2V5KV07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogbWFuYWdlRXhpc3RpbmdUb2tlbiBpcyB0cmlnZ2VyZWQgaWYgdGhlcmUncyBhbiBleGlzdGluZyBGQ00gdG9rZW4gaW4gdGhlXHJcbiAgICAgKiBkYXRhYmFzZSBhbmQgaXQgY2FuIHRha2UgMyBkaWZmZXJlbnQgYWN0aW9uczpcclxuICAgICAqIDEpIFJldHJpZXZlIHRoZSBleGlzdGluZyBGQ00gdG9rZW4gZnJvbSB0aGUgZGF0YWJhc2UuXHJcbiAgICAgKiAyKSBJZiBWQVBJRCBkZXRhaWxzIGhhdmUgY2hhbmdlZDogRGVsZXRlIHRoZSBleGlzdGluZyB0b2tlbiBhbmQgY3JlYXRlIGFcclxuICAgICAqIG5ldyBvbmUgd2l0aCB0aGUgbmV3IFZBUElEIGtleS5cclxuICAgICAqIDMpIElmIHRoZSBkYXRhYmFzZSBjYWNoZSBpcyBpbnZhbGlkYXRlZDogU2VuZCBhIHJlcXVlc3QgdG8gRkNNIHRvIHVwZGF0ZVxyXG4gICAgICogdGhlIHRva2VuLCBhbmQgdG8gY2hlY2sgaWYgdGhlIHRva2VuIGlzIHN0aWxsIHZhbGlkIG9uIEZDTS1zaWRlLlxyXG4gICAgICovXHJcbiAgICBCYXNlQ29udHJvbGxlci5wcm90b3R5cGUubWFuYWdlRXhpc3RpbmdUb2tlbiA9IGZ1bmN0aW9uIChzd1JlZywgcHVzaFN1YnNjcmlwdGlvbiwgcHVibGljVmFwaWRLZXksIHRva2VuRGV0YWlscykge1xyXG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGlzVG9rZW5WYWxpZCwgbm93O1xyXG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpc1Rva2VuVmFsaWQgPSBpc1Rva2VuU3RpbGxWYWxpZChwdXNoU3Vic2NyaXB0aW9uLCBwdWJsaWNWYXBpZEtleSwgdG9rZW5EZXRhaWxzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpc1Rva2VuVmFsaWQpIHJldHVybiBbMyAvKmJyZWFrKi8sIDFdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBub3cgPSBEYXRlLm5vdygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobm93IDwgdG9rZW5EZXRhaWxzLmNyZWF0ZVRpbWUgKyBUT0tFTl9FWFBJUkFUSU9OX01JTExJUykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRva2VuRGV0YWlscy5mY21Ub2tlbl07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdGhpcy51cGRhdGVUb2tlbihzd1JlZywgcHVzaFN1YnNjcmlwdGlvbiwgcHVibGljVmFwaWRLZXksIHRva2VuRGV0YWlscyldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOiBcclxuICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGUgdG9rZW4gaXMgbm8gbG9uZ2VyIHZhbGlkIChmb3IgZXhhbXBsZSBpZiB0aGUgVkFQSUQgZGV0YWlsc1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGhhdmUgY2hhbmdlZCksIGRlbGV0ZSB0aGUgZXhpc3RpbmcgdG9rZW4gZnJvbSB0aGUgRkNNIGNsaWVudCBhbmQgc2VydmVyXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gZGF0YWJhc2UuIE5vIG5lZWQgdG8gdW5zdWJzY3JpYmUgZnJvbSB0aGUgU2VydmljZSBXb3JrZXIgYXMgd2UgaGF2ZSBhXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gZ29vZCBwdXNoIHN1YnNjcmlwdGlvbiB0aGF0IHdlJ2QgbGlrZSB0byB1c2UgaW4gZ2V0TmV3VG9rZW4uXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5kZWxldGVUb2tlbkZyb21EQih0b2tlbkRldGFpbHMuZmNtVG9rZW4pXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZSB0b2tlbiBpcyBubyBsb25nZXIgdmFsaWQgKGZvciBleGFtcGxlIGlmIHRoZSBWQVBJRCBkZXRhaWxzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGhhdmUgY2hhbmdlZCksIGRlbGV0ZSB0aGUgZXhpc3RpbmcgdG9rZW4gZnJvbSB0aGUgRkNNIGNsaWVudCBhbmQgc2VydmVyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRhdGFiYXNlLiBObyBuZWVkIHRvIHVuc3Vic2NyaWJlIGZyb20gdGhlIFNlcnZpY2UgV29ya2VyIGFzIHdlIGhhdmUgYVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBnb29kIHB1c2ggc3Vic2NyaXB0aW9uIHRoYXQgd2UnZCBsaWtlIHRvIHVzZSBpbiBnZXROZXdUb2tlbi5cclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdGhpcy5nZXROZXdUb2tlbihzd1JlZywgcHVzaFN1YnNjcmlwdGlvbiwgcHVibGljVmFwaWRLZXkpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6IHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgQmFzZUNvbnRyb2xsZXIucHJvdG90eXBlLnVwZGF0ZVRva2VuID0gZnVuY3Rpb24gKHN3UmVnLCBwdXNoU3Vic2NyaXB0aW9uLCBwdWJsaWNWYXBpZEtleSwgdG9rZW5EZXRhaWxzKSB7XHJcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgdXBkYXRlZFRva2VuLCBhbGxEZXRhaWxzLCBlXzE7XHJcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnRyeXMucHVzaChbMCwgNCwgLCA2XSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuc3Vic2NyaXB0aW9uTWFuYWdlci51cGRhdGVUb2tlbih0b2tlbkRldGFpbHMsIHRoaXMuc2VydmljZXMsIHB1c2hTdWJzY3JpcHRpb24sIHB1YmxpY1ZhcGlkS2V5KV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVkVG9rZW4gPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFsbERldGFpbHMgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd1Njb3BlOiBzd1JlZy5zY29wZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhcGlkS2V5OiBwdWJsaWNWYXBpZEtleSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZjbVNlbmRlcklkOiB0aGlzLnNlcnZpY2VzLmFwcC5vcHRpb25zLm1lc3NhZ2luZ1NlbmRlcklkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmNtVG9rZW46IHVwZGF0ZWRUb2tlbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNyZWF0ZVRpbWU6IERhdGUubm93KCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmRwb2ludDogcHVzaFN1YnNjcmlwdGlvbi5lbmRwb2ludCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF1dGg6IHB1c2hTdWJzY3JpcHRpb24uZ2V0S2V5KCdhdXRoJyksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwMjU2ZGg6IHB1c2hTdWJzY3JpcHRpb24uZ2V0S2V5KCdwMjU2ZGgnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLnRva2VuRGV0YWlsc01vZGVsLnNhdmVUb2tlbkRldGFpbHMoYWxsRGV0YWlscyldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLnZhcGlkRGV0YWlsc01vZGVsLnNhdmVWYXBpZERldGFpbHMoc3dSZWcuc2NvcGUsIHB1YmxpY1ZhcGlkS2V5KV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB1cGRhdGVkVG9rZW5dO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgZV8xID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmRlbGV0ZVRva2VuKHRva2VuRGV0YWlscy5mY21Ub2tlbildO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBlXzE7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA2OiByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIEJhc2VDb250cm9sbGVyLnByb3RvdHlwZS5nZXROZXdUb2tlbiA9IGZ1bmN0aW9uIChzd1JlZywgcHVzaFN1YnNjcmlwdGlvbiwgcHVibGljVmFwaWRLZXkpIHtcclxuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBuZXdUb2tlbiwgYWxsRGV0YWlscztcclxuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDogcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5zdWJzY3JpcHRpb25NYW5hZ2VyLmdldFRva2VuKHRoaXMuc2VydmljZXMsIHB1c2hTdWJzY3JpcHRpb24sIHB1YmxpY1ZhcGlkS2V5KV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdUb2tlbiA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWxsRGV0YWlscyA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3U2NvcGU6IHN3UmVnLnNjb3BlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFwaWRLZXk6IHB1YmxpY1ZhcGlkS2V5LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmNtU2VuZGVySWQ6IHRoaXMuYXBwLm9wdGlvbnMubWVzc2FnaW5nU2VuZGVySWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmY21Ub2tlbjogbmV3VG9rZW4sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcmVhdGVUaW1lOiBEYXRlLm5vdygpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kcG9pbnQ6IHB1c2hTdWJzY3JpcHRpb24uZW5kcG9pbnQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdXRoOiBwdXNoU3Vic2NyaXB0aW9uLmdldEtleSgnYXV0aCcpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcDI1NmRoOiBwdXNoU3Vic2NyaXB0aW9uLmdldEtleSgncDI1NmRoJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy50b2tlbkRldGFpbHNNb2RlbC5zYXZlVG9rZW5EZXRhaWxzKGFsbERldGFpbHMpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy52YXBpZERldGFpbHNNb2RlbC5zYXZlVmFwaWREZXRhaWxzKHN3UmVnLnNjb3BlLCBwdWJsaWNWYXBpZEtleSldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgbmV3VG9rZW5dO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFRoaXMgbWV0aG9kIGRlbGV0ZXMgdG9rZW5zIHRoYXQgdGhlIHRva2VuIG1hbmFnZXIgbG9va3MgYWZ0ZXIsXHJcbiAgICAgKiB1bnN1YnNjcmliZXMgdGhlIHRva2VuIGZyb20gRkNNICBhbmQgdGhlbiB1bnJlZ2lzdGVycyB0aGUgcHVzaFxyXG4gICAgICogc3Vic2NyaXB0aW9uIGlmIGl0IGV4aXN0cy4gSXQgcmV0dXJucyBhIHByb21pc2UgdGhhdCBpbmRpY2F0ZXNcclxuICAgICAqIHdoZXRoZXIgb3Igbm90IHRoZSB1bnN1YnNjcmliZSByZXF1ZXN0IHdhcyBwcm9jZXNzZWQgc3VjY2Vzc2Z1bGx5LlxyXG4gICAgICovXHJcbiAgICBCYXNlQ29udHJvbGxlci5wcm90b3R5cGUuZGVsZXRlVG9rZW4gPSBmdW5jdGlvbiAodG9rZW4pIHtcclxuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciByZWdpc3RyYXRpb24sIHB1c2hTdWJzY3JpcHRpb247XHJcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6IFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIERlbGV0ZSB0aGUgdG9rZW4gZGV0YWlscyBmcm9tIHRoZSBkYXRhYmFzZS5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmRlbGV0ZVRva2VuRnJvbURCKHRva2VuKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBEZWxldGUgdGhlIHRva2VuIGRldGFpbHMgZnJvbSB0aGUgZGF0YWJhc2UuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5nZXRTV1JlZ2lzdHJhdGlvbl8oKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWdpc3RyYXRpb24gPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghcmVnaXN0cmF0aW9uKSByZXR1cm4gWzMgLypicmVhayovLCA0XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgcmVnaXN0cmF0aW9uLnB1c2hNYW5hZ2VyLmdldFN1YnNjcmlwdGlvbigpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHB1c2hTdWJzY3JpcHRpb24gPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwdXNoU3Vic2NyaXB0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgcHVzaFN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDQ7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OiBcclxuICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGVyZSdzIG5vIFNXLCBjb25zaWRlciBpdCBhIHN1Y2Nlc3MuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRydWVdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFRoaXMgbWV0aG9kIHdpbGwgZGVsZXRlIHRoZSB0b2tlbiBmcm9tIHRoZSBjbGllbnQgZGF0YWJhc2UsIGFuZCBtYWtlIGFcclxuICAgICAqIGNhbGwgdG8gRkNNIHRvIHJlbW92ZSBpdCBmcm9tIHRoZSBzZXJ2ZXIgREIuIERvZXMgbm90IHRlbXBlciB3aXRoIHRoZVxyXG4gICAgICogcHVzaCBzdWJzY3JpcHRpb24uXHJcbiAgICAgKi9cclxuICAgIEJhc2VDb250cm9sbGVyLnByb3RvdHlwZS5kZWxldGVUb2tlbkZyb21EQiA9IGZ1bmN0aW9uICh0b2tlbikge1xyXG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHRva2VuRGV0YWlscywgZV8yO1xyXG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOiByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLnRva2VuRGV0YWlsc01vZGVsLmRlbGV0ZVRva2VuKHRva2VuKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b2tlbkRldGFpbHMgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLmxhYmVsID0gMjtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnRyeXMucHVzaChbMiwgNCwgLCA1XSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuc3Vic2NyaXB0aW9uTWFuYWdlci5kZWxldGVUb2tlbih0aGlzLnNlcnZpY2VzLCB0b2tlbkRldGFpbHMpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgNV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlXzIgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEEgZmFpbGVkIHNlcnZlci1zaWRlIGRlbGV0ZSBkb2VzIG5vdCBuZWVkIHRvIGJyZWFrIHRoZSBhcHAuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZV8yKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgNV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA1OiByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogR2V0cyBhIFB1c2hTdWJzY3JpcHRpb24gZm9yIHRoZSBjdXJyZW50IHVzZXIuXHJcbiAgICAgKi9cclxuICAgIEJhc2VDb250cm9sbGVyLnByb3RvdHlwZS5nZXRQdXNoU3Vic2NyaXB0aW9uID0gZnVuY3Rpb24gKHN3UmVnaXN0cmF0aW9uLCBwdWJsaWNWYXBpZEtleSkge1xyXG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHN1YnNjcmlwdGlvbjtcclxuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDogcmV0dXJuIFs0IC8qeWllbGQqLywgc3dSZWdpc3RyYXRpb24ucHVzaE1hbmFnZXIuZ2V0U3Vic2NyaXB0aW9uKCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3Vic2NyaXB0aW9uID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3Vic2NyaXB0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgc3Vic2NyaXB0aW9uXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgc3dSZWdpc3RyYXRpb24ucHVzaE1hbmFnZXIuc3Vic2NyaWJlKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VyVmlzaWJsZU9ubHk6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBwbGljYXRpb25TZXJ2ZXJLZXk6IHB1YmxpY1ZhcGlkS2V5XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KV07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8vXHJcbiAgICAvLyBUaGUgZm9sbG93aW5nIG1ldGhvZHMgc2hvdWxkIG9ubHkgYmUgYXZhaWxhYmxlIGluIHRoZSB3aW5kb3cuXHJcbiAgICAvL1xyXG4gICAgLyoqXHJcbiAgICAgKiBAZGVwcmVjYXRlZCBVc2UgTm90aWZpY2F0aW9uLnJlcXVlc3RQZXJtaXNzaW9uKCkgaW5zdGVhZC5cclxuICAgICAqIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9Ob3RpZmljYXRpb24vcmVxdWVzdFBlcm1pc3Npb25cclxuICAgICAqL1xyXG4gICAgQmFzZUNvbnRyb2xsZXIucHJvdG90eXBlLnJlcXVlc3RQZXJtaXNzaW9uID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRocm93IGVycm9yRmFjdG9yeS5jcmVhdGUoXCJvbmx5LWF2YWlsYWJsZS1pbi13aW5kb3dcIiAvKiBBVkFJTEFCTEVfSU5fV0lORE9XICovKTtcclxuICAgIH07XHJcbiAgICBCYXNlQ29udHJvbGxlci5wcm90b3R5cGUudXNlU2VydmljZVdvcmtlciA9IGZ1bmN0aW9uIChfcmVnaXN0cmF0aW9uKSB7XHJcbiAgICAgICAgdGhyb3cgZXJyb3JGYWN0b3J5LmNyZWF0ZShcIm9ubHktYXZhaWxhYmxlLWluLXdpbmRvd1wiIC8qIEFWQUlMQUJMRV9JTl9XSU5ET1cgKi8pO1xyXG4gICAgfTtcclxuICAgIEJhc2VDb250cm9sbGVyLnByb3RvdHlwZS51c2VQdWJsaWNWYXBpZEtleSA9IGZ1bmN0aW9uIChfYjY0UHVibGljS2V5KSB7XHJcbiAgICAgICAgdGhyb3cgZXJyb3JGYWN0b3J5LmNyZWF0ZShcIm9ubHktYXZhaWxhYmxlLWluLXdpbmRvd1wiIC8qIEFWQUlMQUJMRV9JTl9XSU5ET1cgKi8pO1xyXG4gICAgfTtcclxuICAgIEJhc2VDb250cm9sbGVyLnByb3RvdHlwZS5vbk1lc3NhZ2UgPSBmdW5jdGlvbiAoX25leHRPck9ic2VydmVyLCBfZXJyb3IsIF9jb21wbGV0ZWQpIHtcclxuICAgICAgICB0aHJvdyBlcnJvckZhY3RvcnkuY3JlYXRlKFwib25seS1hdmFpbGFibGUtaW4td2luZG93XCIgLyogQVZBSUxBQkxFX0lOX1dJTkRPVyAqLyk7XHJcbiAgICB9O1xyXG4gICAgQmFzZUNvbnRyb2xsZXIucHJvdG90eXBlLm9uVG9rZW5SZWZyZXNoID0gZnVuY3Rpb24gKF9uZXh0T3JPYnNlcnZlciwgX2Vycm9yLCBfY29tcGxldGVkKSB7XHJcbiAgICAgICAgdGhyb3cgZXJyb3JGYWN0b3J5LmNyZWF0ZShcIm9ubHktYXZhaWxhYmxlLWluLXdpbmRvd1wiIC8qIEFWQUlMQUJMRV9JTl9XSU5ET1cgKi8pO1xyXG4gICAgfTtcclxuICAgIC8vXHJcbiAgICAvLyBUaGUgZm9sbG93aW5nIG1ldGhvZHMgYXJlIHVzZWQgYnkgdGhlIHNlcnZpY2Ugd29ya2VyIG9ubHkuXHJcbiAgICAvL1xyXG4gICAgQmFzZUNvbnRyb2xsZXIucHJvdG90eXBlLnNldEJhY2tncm91bmRNZXNzYWdlSGFuZGxlciA9IGZ1bmN0aW9uIChfY2FsbGJhY2spIHtcclxuICAgICAgICB0aHJvdyBlcnJvckZhY3RvcnkuY3JlYXRlKFwib25seS1hdmFpbGFibGUtaW4tc3dcIiAvKiBBVkFJTEFCTEVfSU5fU1cgKi8pO1xyXG4gICAgfTtcclxuICAgIC8vXHJcbiAgICAvLyBUaGUgZm9sbG93aW5nIG1ldGhvZHMgYXJlIHVzZWQgYnkgdGhlIHNlcnZpY2UgdGhlbXNlbHZlcyBhbmQgbm90IGV4cG9zZWRcclxuICAgIC8vIHB1YmxpY2x5IG9yIG5vdCBleHBlY3RlZCB0byBiZSB1c2VkIGJ5IGRldmVsb3BlcnMuXHJcbiAgICAvL1xyXG4gICAgLyoqXHJcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyByZXF1aXJlZCB0byBhZGhlcmUgdG8gdGhlIEZpcmViYXNlIGludGVyZmFjZS5cclxuICAgICAqIEl0IGNsb3NlcyBhbnkgY3VycmVudGx5IG9wZW4gaW5kZXhkYiBkYXRhYmFzZSBjb25uZWN0aW9ucy5cclxuICAgICAqL1xyXG4gICAgQmFzZUNvbnRyb2xsZXIucHJvdG90eXBlLmRlbGV0ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6IHJldHVybiBbNCAvKnlpZWxkKi8sIFByb21pc2UuYWxsKFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudG9rZW5EZXRhaWxzTW9kZWwuY2xvc2VEYXRhYmFzZSgpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy52YXBpZERldGFpbHNNb2RlbC5jbG9zZURhdGFiYXNlKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgXSldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0aGUgY3VycmVudCBOb3RpZmljYXRpb24gUGVybWlzc2lvbiBzdGF0ZS5cclxuICAgICAqL1xyXG4gICAgQmFzZUNvbnRyb2xsZXIucHJvdG90eXBlLmdldE5vdGlmaWNhdGlvblBlcm1pc3Npb24gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIE5vdGlmaWNhdGlvbi5wZXJtaXNzaW9uO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmVxdWVzdHMgbm90aWZpY2F0aW9uIHBlcm1pc3Npb24gZnJvbSB0aGUgdXNlci5cclxuICAgICAqL1xyXG4gICAgQmFzZUNvbnRyb2xsZXIucHJvdG90eXBlLnJlcXVlc3ROb3RpZmljYXRpb25QZXJtaXNzaW9uID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFOb3RpZmljYXRpb24ucmVxdWVzdFBlcm1pc3Npb24pIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBOb3RpZmljYXRpb24ucmVxdWVzdFBlcm1pc3Npb24oKSBpcyBub3QgYXZhaWxhYmxlIGluIHNlcnZpY2Ugd29ya2Vycy5cclxuICAgICAgICAgICAgICAgICAgICAvLyBSZXR1cm4gdGhlIGN1cnJlbnQgcGVybWlzc2lvbi5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgTm90aWZpY2F0aW9uLnBlcm1pc3Npb25dO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIE5vdGlmaWNhdGlvbi5yZXF1ZXN0UGVybWlzc2lvbigpXTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgQmFzZUNvbnRyb2xsZXIucHJvdG90eXBlLmdldFRva2VuRGV0YWlsc01vZGVsID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnRva2VuRGV0YWlsc01vZGVsO1xyXG4gICAgfTtcclxuICAgIEJhc2VDb250cm9sbGVyLnByb3RvdHlwZS5nZXRWYXBpZERldGFpbHNNb2RlbCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy52YXBpZERldGFpbHNNb2RlbDtcclxuICAgIH07XHJcbiAgICAvLyBWaXNpYmxlIGZvciB0ZXN0aW5nXHJcbiAgICAvLyBUT0RPOiBtYWtlIHByb3RlY3RlZFxyXG4gICAgQmFzZUNvbnRyb2xsZXIucHJvdG90eXBlLmdldFN1YnNjcmlwdGlvbk1hbmFnZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc3Vic2NyaXB0aW9uTWFuYWdlcjtcclxuICAgIH07XHJcbiAgICByZXR1cm4gQmFzZUNvbnRyb2xsZXI7XHJcbn0oKSk7XHJcbi8qKlxyXG4gKiBDaGVja3MgaWYgdGhlIHRva2VuRGV0YWlscyBtYXRjaCB0aGUgZGV0YWlscyBwcm92aWRlZCBpbiB0aGUgY2xpZW50cy5cclxuICovXHJcbmZ1bmN0aW9uIGlzVG9rZW5TdGlsbFZhbGlkKHB1c2hTdWJzY3JpcHRpb24sIHB1YmxpY1ZhcGlkS2V5LCB0b2tlbkRldGFpbHMpIHtcclxuICAgIGlmICghdG9rZW5EZXRhaWxzLnZhcGlkS2V5IHx8XHJcbiAgICAgICAgIWlzQXJyYXlCdWZmZXJFcXVhbChwdWJsaWNWYXBpZEtleS5idWZmZXIsIHRva2VuRGV0YWlscy52YXBpZEtleS5idWZmZXIpKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgdmFyIGlzRW5kcG9pbnRFcXVhbCA9IHB1c2hTdWJzY3JpcHRpb24uZW5kcG9pbnQgPT09IHRva2VuRGV0YWlscy5lbmRwb2ludDtcclxuICAgIHZhciBpc0F1dGhFcXVhbCA9IGlzQXJyYXlCdWZmZXJFcXVhbChwdXNoU3Vic2NyaXB0aW9uLmdldEtleSgnYXV0aCcpLCB0b2tlbkRldGFpbHMuYXV0aCk7XHJcbiAgICB2YXIgaXNQMjU2ZGhFcXVhbCA9IGlzQXJyYXlCdWZmZXJFcXVhbChwdXNoU3Vic2NyaXB0aW9uLmdldEtleSgncDI1NmRoJyksIHRva2VuRGV0YWlscy5wMjU2ZGgpO1xyXG4gICAgcmV0dXJuIGlzRW5kcG9pbnRFcXVhbCAmJiBpc0F1dGhFcXVhbCAmJiBpc1AyNTZkaEVxdWFsO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG52YXIgRkNNX01TRyA9ICdGQ01fTVNHJztcclxudmFyIFN3Q29udHJvbGxlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIF9fZXh0ZW5kcyhTd0NvbnRyb2xsZXIsIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBTd0NvbnRyb2xsZXIoc2VydmljZXMpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBzZXJ2aWNlcykgfHwgdGhpcztcclxuICAgICAgICBfdGhpcy5iZ01lc3NhZ2VIYW5kbGVyID0gbnVsbDtcclxuICAgICAgICBzZWxmLmFkZEV2ZW50TGlzdGVuZXIoJ3B1c2gnLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICBfdGhpcy5vblB1c2goZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgc2VsZi5hZGRFdmVudExpc3RlbmVyKCdwdXNoc3Vic2NyaXB0aW9uY2hhbmdlJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgX3RoaXMub25TdWJDaGFuZ2UoZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgc2VsZi5hZGRFdmVudExpc3RlbmVyKCdub3RpZmljYXRpb25jbGljaycsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIF90aGlzLm9uTm90aWZpY2F0aW9uQ2xpY2soZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgLy8gVmlzaWJsZSBmb3IgdGVzdGluZ1xyXG4gICAgLy8gVE9ETzogTWFrZSBwcml2YXRlXHJcbiAgICBTd0NvbnRyb2xsZXIucHJvdG90eXBlLm9uUHVzaCA9IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgIGV2ZW50LndhaXRVbnRpbCh0aGlzLm9uUHVzaF8oZXZlbnQpKTtcclxuICAgIH07XHJcbiAgICAvLyBWaXNpYmxlIGZvciB0ZXN0aW5nXHJcbiAgICAvLyBUT0RPOiBNYWtlIHByaXZhdGVcclxuICAgIFN3Q29udHJvbGxlci5wcm90b3R5cGUub25TdWJDaGFuZ2UgPSBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICBldmVudC53YWl0VW50aWwodGhpcy5vblN1YkNoYW5nZV8oZXZlbnQpKTtcclxuICAgIH07XHJcbiAgICAvLyBWaXNpYmxlIGZvciB0ZXN0aW5nXHJcbiAgICAvLyBUT0RPOiBNYWtlIHByaXZhdGVcclxuICAgIFN3Q29udHJvbGxlci5wcm90b3R5cGUub25Ob3RpZmljYXRpb25DbGljayA9IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgIGV2ZW50LndhaXRVbnRpbCh0aGlzLm9uTm90aWZpY2F0aW9uQ2xpY2tfKGV2ZW50KSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBBIGhhbmRsZXIgZm9yIHB1c2ggZXZlbnRzIHRoYXQgc2hvd3Mgbm90aWZpY2F0aW9ucyBiYXNlZCBvbiB0aGUgY29udGVudCBvZlxyXG4gICAgICogdGhlIHBheWxvYWQuXHJcbiAgICAgKlxyXG4gICAgICogVGhlIHBheWxvYWQgbXVzdCBiZSBhIEpTT04tZW5jb2RlZCBPYmplY3Qgd2l0aCBhIGBub3RpZmljYXRpb25gIGtleS4gVGhlXHJcbiAgICAgKiB2YWx1ZSBvZiB0aGUgYG5vdGlmaWNhdGlvbmAgcHJvcGVydHkgd2lsbCBiZSB1c2VkIGFzIHRoZSBOb3RpZmljYXRpb25PcHRpb25zXHJcbiAgICAgKiBvYmplY3QgcGFzc2VkIHRvIHNob3dOb3RpZmljYXRpb24uIEFkZGl0aW9uYWxseSwgdGhlIGB0aXRsZWAgcHJvcGVydHkgb2YgdGhlXHJcbiAgICAgKiBub3RpZmljYXRpb24gb2JqZWN0IHdpbGwgYmUgdXNlZCBhcyB0aGUgdGl0bGUuXHJcbiAgICAgKlxyXG4gICAgICogSWYgdGhlcmUgaXMgbm8gbm90aWZpY2F0aW9uIGRhdGEgaW4gdGhlIHBheWxvYWQgdGhlbiBubyBub3RpZmljYXRpb24gd2lsbCBiZVxyXG4gICAgICogc2hvd24uXHJcbiAgICAgKi9cclxuICAgIFN3Q29udHJvbGxlci5wcm90b3R5cGUub25QdXNoXyA9IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIG1zZ1BheWxvYWQsIGhhc1Zpc2libGVDbGllbnRzLCBub3RpZmljYXRpb25EZXRhaWxzLCBub3RpZmljYXRpb25UaXRsZSwgcmVnLCBhY3Rpb25zLCBtYXhBY3Rpb25zO1xyXG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWV2ZW50LmRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbXNnUGF5bG9hZCA9IGV2ZW50LmRhdGEuanNvbigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5vdCBKU09OIHNvIG5vdCBhbiBGQ00gbWVzc2FnZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuaGFzVmlzaWJsZUNsaWVudHNfKCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGFzVmlzaWJsZUNsaWVudHMgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChoYXNWaXNpYmxlQ2xpZW50cykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQXBwIGluIGZvcmVncm91bmQuIFNlbmQgdG8gcGFnZS5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0aGlzLnNlbmRNZXNzYWdlVG9XaW5kb3dDbGllbnRzXyhtc2dQYXlsb2FkKV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgbm90aWZpY2F0aW9uRGV0YWlscyA9IHRoaXMuZ2V0Tm90aWZpY2F0aW9uRGF0YV8obXNnUGF5bG9hZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbm90aWZpY2F0aW9uRGV0YWlscykgcmV0dXJuIFszIC8qYnJlYWsqLywgM107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vdGlmaWNhdGlvblRpdGxlID0gbm90aWZpY2F0aW9uRGV0YWlscy50aXRsZSB8fCAnJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5nZXRTV1JlZ2lzdHJhdGlvbl8oKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWcgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbnMgPSBub3RpZmljYXRpb25EZXRhaWxzLmFjdGlvbnM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1heEFjdGlvbnMgPSBOb3RpZmljYXRpb24ubWF4QWN0aW9ucztcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFjdGlvbnMgJiYgbWF4QWN0aW9ucyAmJiBhY3Rpb25zLmxlbmd0aCA+IG1heEFjdGlvbnMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihcIlRoaXMgYnJvd3NlciBvbmx5IHN1cHBvcnRzIFwiICsgbWF4QWN0aW9ucyArIFwiIGFjdGlvbnMuXCIgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiVGhlIHJlbWFpbmluZyBhY3Rpb25zIHdpbGwgbm90IGJlIGRpc3BsYXllZC5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHJlZy5zaG93Tm90aWZpY2F0aW9uKG5vdGlmaWNhdGlvblRpdGxlLCBub3RpZmljYXRpb25EZXRhaWxzKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuYmdNZXNzYWdlSGFuZGxlcikgcmV0dXJuIFszIC8qYnJlYWsqLywgNV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuYmdNZXNzYWdlSGFuZGxlcihtc2dQYXlsb2FkKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDU6IHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgU3dDb250cm9sbGVyLnByb3RvdHlwZS5vblN1YkNoYW5nZV8gPSBmdW5jdGlvbiAoX2V2ZW50KSB7XHJcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgcmVnaXN0cmF0aW9uLCBlcnJfMSwgZXJyXzIsIHRva2VuRGV0YWlsc01vZGVsLCB0b2tlbkRldGFpbHM7XHJcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnRyeXMucHVzaChbMCwgMiwgLCAzXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuZ2V0U1dSZWdpc3RyYXRpb25fKCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVnaXN0cmF0aW9uID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCAzXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycl8xID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnJvckZhY3RvcnkuY3JlYXRlKFwidW5hYmxlLXRvLXJlc3Vic2NyaWJlXCIgLyogVU5BQkxFX1RPX1JFU1VCU0NSSUJFICovLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvckluZm86IGVycl8xXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2EudHJ5cy5wdXNoKFszLCA1LCAsIDhdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgcmVnaXN0cmF0aW9uLnB1c2hNYW5hZ2VyLmdldFN1YnNjcmlwdGlvbigpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgOF07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA1OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJfMiA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG9rZW5EZXRhaWxzTW9kZWwgPSB0aGlzLmdldFRva2VuRGV0YWlsc01vZGVsKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRva2VuRGV0YWlsc01vZGVsLmdldFRva2VuRGV0YWlsc0Zyb21TV1Njb3BlKHJlZ2lzdHJhdGlvbi5zY29wZSldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG9rZW5EZXRhaWxzID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRva2VuRGV0YWlscykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhpcyBzaG91bGQgcmFyZWx5IG9jY3VyZSwgYnV0IGNvdWxkIGlmIGluZGV4ZWREQlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaXMgY29ycnVwdGVkIG9yIHdpcGVkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnJfMjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBBdHRlbXB0IHRvIGRlbGV0ZSB0aGUgdG9rZW4gaWYgd2Uga25vdyBpdCdzIGJhZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmRlbGV0ZVRva2VuKHRva2VuRGV0YWlscy5mY21Ub2tlbildO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQXR0ZW1wdCB0byBkZWxldGUgdGhlIHRva2VuIGlmIHdlIGtub3cgaXQncyBiYWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnJfMjtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDg6IHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgU3dDb250cm9sbGVyLnByb3RvdHlwZS5vbk5vdGlmaWNhdGlvbkNsaWNrXyA9IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIG1zZ1BheWxvYWQsIGxpbmssIHdpbmRvd0NsaWVudCwgaW50ZXJuYWxNc2c7XHJcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZXZlbnQubm90aWZpY2F0aW9uIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAhZXZlbnQubm90aWZpY2F0aW9uLmRhdGEgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICFldmVudC5ub3RpZmljYXRpb24uZGF0YVtGQ01fTVNHXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm90IGFuIEZDTSBub3RpZmljYXRpb24sIGRvIG5vdGhpbmcuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoZXZlbnQuYWN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBVc2VyIGNsaWNrZWQgb24gYW4gYWN0aW9uIGJ1dHRvbi5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgd2lsbCBhbGxvdyBkZXZzIHRvIGFjdCBvbiBhY3Rpb24gYnV0dG9uIGNsaWNrcyBieSB1c2luZyBhIGN1c3RvbVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gb25Ob3RpZmljYXRpb25DbGljayBsaXN0ZW5lciB0aGF0IHRoZXkgZGVmaW5lLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFByZXZlbnQgb3RoZXIgbGlzdGVuZXJzIGZyb20gcmVjZWl2aW5nIHRoZSBldmVudFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQubm90aWZpY2F0aW9uLmNsb3NlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1zZ1BheWxvYWQgPSBldmVudC5ub3RpZmljYXRpb24uZGF0YVtGQ01fTVNHXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFtc2dQYXlsb2FkLm5vdGlmaWNhdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm90aGluZyB0byBkby5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsaW5rID0gKG1zZ1BheWxvYWQuZmNtT3B0aW9ucyAmJiBtc2dQYXlsb2FkLmZjbU9wdGlvbnMubGluaykgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1zZ1BheWxvYWQubm90aWZpY2F0aW9uLmNsaWNrX2FjdGlvbjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFsaW5rKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobXNnUGF5bG9hZC5kYXRhICYmIEZOX0NBTVBBSUdOX0lEIGluIG1zZ1BheWxvYWQuZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpbmsgPSBzZWxmLmxvY2F0aW9uLm9yaWdpbjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5vdGhpbmcgdG8gZG8uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuZ2V0V2luZG93Q2xpZW50XyhsaW5rKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3dDbGllbnQgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghIXdpbmRvd0NsaWVudCkgcmV0dXJuIFszIC8qYnJlYWsqLywgNF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHNlbGYuY2xpZW50cy5vcGVuV2luZG93KGxpbmspXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFVuYWJsZSB0byBmaW5kIHdpbmRvdyBjbGllbnQgc28gbmVlZCB0byBvcGVuIG9uZS5cclxuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93Q2xpZW50ID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBXYWl0IHRocmVlIHNlY29uZHMgZm9yIHRoZSBjbGllbnQgdG8gaW5pdGlhbGl6ZSBhbmQgc2V0IHVwIHRoZSBtZXNzYWdlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGhhbmRsZXIgc28gdGhhdCBpdCBjYW4gcmVjZWl2ZSB0aGUgbWVzc2FnZS5cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgc2xlZXAoMzAwMCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gV2FpdCB0aHJlZSBzZWNvbmRzIGZvciB0aGUgY2xpZW50IHRvIGluaXRpYWxpemUgYW5kIHNldCB1cCB0aGUgbWVzc2FnZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBoYW5kbGVyIHNvIHRoYXQgaXQgY2FuIHJlY2VpdmUgdGhlIG1lc3NhZ2UuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgNl07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OiByZXR1cm4gWzQgLyp5aWVsZCovLCB3aW5kb3dDbGllbnQuZm9jdXMoKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA1OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3dDbGllbnQgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLmxhYmVsID0gNjtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDY6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghd2luZG93Q2xpZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBXaW5kb3cgQ2xpZW50IHdpbGwgbm90IGJlIHJldHVybmVkIGlmIGl0J3MgZm9yIGEgdGhpcmQgcGFydHkgb3JpZ2luLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIERlbGV0ZSBub3RpZmljYXRpb24gYW5kIGZjbU9wdGlvbnMgZGF0YSBmcm9tIHBheWxvYWQgYmVmb3JlIHNlbmRpbmcgdG9cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIHBhZ2UuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBtc2dQYXlsb2FkLm5vdGlmaWNhdGlvbjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIG1zZ1BheWxvYWQuZmNtT3B0aW9ucztcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW50ZXJuYWxNc2cgPSBjcmVhdGVOZXdNc2coTWVzc2FnZVR5cGUuTk9USUZJQ0FUSU9OX0NMSUNLRUQsIG1zZ1BheWxvYWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBBdHRlbXB0IHRvIHNlbmQgYSBtZXNzYWdlIHRvIHRoZSBjbGllbnQgdG8gaGFuZGxlIHRoZSBkYXRhXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIElzIGFmZmVjdGVkIGJ5OiBodHRwczovL2dpdGh1Yi5jb20vc2xpZ2h0bHlvZmYvU2VydmljZVdvcmtlci9pc3N1ZXMvNzI4XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0aGlzLmF0dGVtcHRUb01lc3NhZ2VDbGllbnRfKHdpbmRvd0NsaWVudCwgaW50ZXJuYWxNc2cpXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLy8gVmlzaWJsZSBmb3IgdGVzdGluZ1xyXG4gICAgLy8gVE9ETzogTWFrZSBwcml2YXRlXHJcbiAgICBTd0NvbnRyb2xsZXIucHJvdG90eXBlLmdldE5vdGlmaWNhdGlvbkRhdGFfID0gZnVuY3Rpb24gKG1zZ1BheWxvYWQpIHtcclxuICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgaWYgKCFtc2dQYXlsb2FkKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHR5cGVvZiBtc2dQYXlsb2FkLm5vdGlmaWNhdGlvbiAhPT0gJ29iamVjdCcpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgbm90aWZpY2F0aW9uSW5mb3JtYXRpb24gPSBfX2Fzc2lnbih7fSwgbXNnUGF5bG9hZC5ub3RpZmljYXRpb24pO1xyXG4gICAgICAgIC8vIFB1dCB0aGUgbWVzc2FnZSBwYXlsb2FkIHVuZGVyIEZDTV9NU0cgbmFtZSBzbyB3ZSBjYW4gaWRlbnRpZnkgdGhlXHJcbiAgICAgICAgLy8gbm90aWZpY2F0aW9uIGFzIGJlaW5nIGFuIEZDTSBub3RpZmljYXRpb24gdnMgYSBub3RpZmljYXRpb24gZnJvbVxyXG4gICAgICAgIC8vIHNvbWV3aGVyZSBlbHNlIChpLmUuIG5vcm1hbCB3ZWIgcHVzaCBvciBkZXZlbG9wZXIgZ2VuZXJhdGVkXHJcbiAgICAgICAgLy8gbm90aWZpY2F0aW9uKS5cclxuICAgICAgICBub3RpZmljYXRpb25JbmZvcm1hdGlvbi5kYXRhID0gX19hc3NpZ24oX19hc3NpZ24oe30sIG1zZ1BheWxvYWQubm90aWZpY2F0aW9uLmRhdGEpLCAoX2EgPSB7fSwgX2FbRkNNX01TR10gPSBtc2dQYXlsb2FkLCBfYSkpO1xyXG4gICAgICAgIHJldHVybiBub3RpZmljYXRpb25JbmZvcm1hdGlvbjtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIENhbGxpbmcgc2V0QmFja2dyb3VuZE1lc3NhZ2VIYW5kbGVyIHdpbGwgb3B0IGluIHRvIHNvbWUgc3BlY2lmaWNcclxuICAgICAqIGJlaGF2aW91cnMuXHJcbiAgICAgKiAxLikgSWYgYSBub3RpZmljYXRpb24gZG9lc24ndCBuZWVkIHRvIGJlIHNob3duIGR1ZSB0byBhIHdpbmRvdyBhbHJlYWR5XHJcbiAgICAgKiBiZWluZyB2aXNpYmxlLCB0aGVuIHB1c2ggbWVzc2FnZXMgd2lsbCBiZSBzZW50IHRvIHRoZSBwYWdlLlxyXG4gICAgICogMi4pIElmIGEgbm90aWZpY2F0aW9uIG5lZWRzIHRvIGJlIHNob3duLCBhbmQgdGhlIG1lc3NhZ2UgY29udGFpbnMgbm9cclxuICAgICAqIG5vdGlmaWNhdGlvbiBkYXRhIHRoaXMgbWV0aG9kIHdpbGwgYmUgY2FsbGVkXHJcbiAgICAgKiBhbmQgdGhlIHByb21pc2UgaXQgcmV0dXJucyB3aWxsIGJlIHBhc3NlZCB0byBldmVudC53YWl0VW50aWwuXHJcbiAgICAgKiBJZiB5b3UgZG8gbm90IHNldCB0aGlzIGNhbGxiYWNrIHRoZW4gYWxsIHB1c2ggbWVzc2FnZXMgd2lsbCBsZXQgYW5kIHRoZVxyXG4gICAgICogZGV2ZWxvcGVyIGNhbiBoYW5kbGUgdGhlbSBpbiBhIHRoZWlyIG93biAncHVzaCcgZXZlbnQgY2FsbGJhY2tcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gY2FsbGJhY2sgVGhlIGNhbGxiYWNrIHRvIGJlIGNhbGxlZCB3aGVuIGEgcHVzaCBtZXNzYWdlIGlzIHJlY2VpdmVkXHJcbiAgICAgKiBhbmQgYSBub3RpZmljYXRpb24gbXVzdCBiZSBzaG93bi4gVGhlIGNhbGxiYWNrIHdpbGwgYmUgZ2l2ZW4gdGhlIGRhdGEgZnJvbVxyXG4gICAgICogdGhlIHB1c2ggbWVzc2FnZS5cclxuICAgICAqL1xyXG4gICAgU3dDb250cm9sbGVyLnByb3RvdHlwZS5zZXRCYWNrZ3JvdW5kTWVzc2FnZUhhbmRsZXIgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcclxuICAgICAgICBpZiAoIWNhbGxiYWNrIHx8IHR5cGVvZiBjYWxsYmFjayAhPT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICB0aHJvdyBlcnJvckZhY3RvcnkuY3JlYXRlKFwiYmctaGFuZGxlci1mdW5jdGlvbi1leHBlY3RlZFwiIC8qIEJHX0hBTkRMRVJfRlVOQ1RJT05fRVhQRUNURUQgKi8pO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmJnTWVzc2FnZUhhbmRsZXIgPSBjYWxsYmFjaztcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSB1cmwgVGhlIFVSTCB0byBsb29rIGZvciB3aGVuIGZvY3VzaW5nIGEgY2xpZW50LlxyXG4gICAgICogQHJldHVybiBSZXR1cm5zIGFuIGV4aXN0aW5nIHdpbmRvdyBjbGllbnQgb3IgYSBuZXdseSBvcGVuZWQgV2luZG93Q2xpZW50LlxyXG4gICAgICovXHJcbiAgICAvLyBWaXNpYmxlIGZvciB0ZXN0aW5nXHJcbiAgICAvLyBUT0RPOiBNYWtlIHByaXZhdGVcclxuICAgIFN3Q29udHJvbGxlci5wcm90b3R5cGUuZ2V0V2luZG93Q2xpZW50XyA9IGZ1bmN0aW9uICh1cmwpIHtcclxuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBwYXJzZWRVUkwsIGNsaWVudExpc3QsIHN1aXRhYmxlQ2xpZW50LCBpLCBwYXJzZWRDbGllbnRVcmw7XHJcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlZFVSTCA9IG5ldyBVUkwodXJsLCBzZWxmLmxvY2F0aW9uLmhyZWYpLmhyZWY7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIGdldENsaWVudExpc3QoKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGllbnRMaXN0ID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWl0YWJsZUNsaWVudCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBjbGllbnRMaXN0Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZWRDbGllbnRVcmwgPSBuZXcgVVJMKGNsaWVudExpc3RbaV0udXJsLCBzZWxmLmxvY2F0aW9uLmhyZWYpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmhyZWY7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFyc2VkQ2xpZW50VXJsID09PSBwYXJzZWRVUkwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWl0YWJsZUNsaWVudCA9IGNsaWVudExpc3RbaV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHN1aXRhYmxlQ2xpZW50XTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBUaGlzIG1lc3NhZ2Ugd2lsbCBhdHRlbXB0IHRvIHNlbmQgdGhlIG1lc3NhZ2UgdG8gYSB3aW5kb3cgY2xpZW50LlxyXG4gICAgICogQHBhcmFtIGNsaWVudCBUaGUgV2luZG93Q2xpZW50IHRvIHNlbmQgdGhlIG1lc3NhZ2UgdG8uXHJcbiAgICAgKiBAcGFyYW0gbWVzc2FnZSBUaGUgbWVzc2FnZSB0byBzZW5kIHRvIHRoZSBjbGllbnQuXHJcbiAgICAgKiBAcmV0dXJucyBSZXR1cm5zIGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIGFmdGVyIHNlbmRpbmcgdGhlIG1lc3NhZ2UuIFRoaXNcclxuICAgICAqIGRvZXMgbm90IGd1YXJhbnRlZSB0aGF0IHRoZSBtZXNzYWdlIHdhcyBzdWNjZXNzZnVsbHkgcmVjZWl2ZWQuXHJcbiAgICAgKi9cclxuICAgIC8vIFZpc2libGUgZm9yIHRlc3RpbmdcclxuICAgIC8vIFRPRE86IE1ha2UgcHJpdmF0ZVxyXG4gICAgU3dDb250cm9sbGVyLnByb3RvdHlwZS5hdHRlbXB0VG9NZXNzYWdlQ2xpZW50XyA9IGZ1bmN0aW9uIChjbGllbnQsIG1lc3NhZ2UpIHtcclxuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIC8vIE5PVEU6IFRoaXMgcmV0dXJucyBhIHByb21pc2UgaW4gY2FzZSB0aGlzIEFQSSBpcyBhYnN0cmFjdGVkIGxhdGVyIG9uIHRvXHJcbiAgICAgICAgICAgICAgICAvLyBkbyBhZGRpdGlvbmFsIHdvcmtcclxuICAgICAgICAgICAgICAgIGlmICghY2xpZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyb3JGYWN0b3J5LmNyZWF0ZShcIm5vLXdpbmRvdy1jbGllbnQtdG8tbXNnXCIgLyogTk9fV0lORE9XX0NMSUVOVF9UT19NU0cgKi8pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2xpZW50LnBvc3RNZXNzYWdlKG1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEByZXR1cm5zIElmIHRoZXJlIGlzIGN1cnJlbnRseSBhIHZpc2libGUgV2luZG93Q2xpZW50LCB0aGlzIG1ldGhvZCB3aWxsXHJcbiAgICAgKiByZXNvbHZlIHRvIHRydWUsIG90aGVyd2lzZSBmYWxzZS5cclxuICAgICAqL1xyXG4gICAgLy8gVmlzaWJsZSBmb3IgdGVzdGluZ1xyXG4gICAgLy8gVE9ETzogTWFrZSBwcml2YXRlXHJcbiAgICBTd0NvbnRyb2xsZXIucHJvdG90eXBlLmhhc1Zpc2libGVDbGllbnRzXyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBjbGllbnRMaXN0O1xyXG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOiByZXR1cm4gWzQgLyp5aWVsZCovLCBnZXRDbGllbnRMaXN0KCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xpZW50TGlzdCA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIGNsaWVudExpc3Quc29tZShmdW5jdGlvbiAoY2xpZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNsaWVudC52aXNpYmlsaXR5U3RhdGUgPT09ICd2aXNpYmxlJyAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJZ25vcmUgY2hyb21lLWV4dGVuc2lvbiBjbGllbnRzIGFzIHRoYXQgbWF0Y2hlcyB0aGUgYmFja2dyb3VuZCBwYWdlc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBvZiBleHRlbnNpb25zLCB3aGljaCBhcmUgYWx3YXlzIGNvbnNpZGVyZWQgdmlzaWJsZS5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIWNsaWVudC51cmwuc3RhcnRzV2l0aCgnY2hyb21lLWV4dGVuc2lvbjovLycpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSldO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSBtc2dQYXlsb2FkIFRoZSBkYXRhIGZyb20gdGhlIHB1c2ggZXZlbnQgdGhhdCBzaG91bGQgYmUgc2VudCB0byBhbGxcclxuICAgICAqIGF2YWlsYWJsZSBwYWdlcy5cclxuICAgICAqIEByZXR1cm5zIFJldHVybnMgYSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgb25jZSB0aGUgbWVzc2FnZSBoYXMgYmVlbiBzZW50IHRvXHJcbiAgICAgKiBhbGwgV2luZG93Q2xpZW50cy5cclxuICAgICAqL1xyXG4gICAgLy8gVmlzaWJsZSBmb3IgdGVzdGluZ1xyXG4gICAgLy8gVE9ETzogTWFrZSBwcml2YXRlXHJcbiAgICBTd0NvbnRyb2xsZXIucHJvdG90eXBlLnNlbmRNZXNzYWdlVG9XaW5kb3dDbGllbnRzXyA9IGZ1bmN0aW9uIChtc2dQYXlsb2FkKSB7XHJcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgY2xpZW50TGlzdCwgaW50ZXJuYWxNc2c7XHJcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6IHJldHVybiBbNCAvKnlpZWxkKi8sIGdldENsaWVudExpc3QoKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGllbnRMaXN0ID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnRlcm5hbE1zZyA9IGNyZWF0ZU5ld01zZyhNZXNzYWdlVHlwZS5QVVNIX01TR19SRUNFSVZFRCwgbXNnUGF5bG9hZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIFByb21pc2UuYWxsKGNsaWVudExpc3QubWFwKGZ1bmN0aW9uIChjbGllbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuYXR0ZW1wdFRvTWVzc2FnZUNsaWVudF8oY2xpZW50LCBpbnRlcm5hbE1zZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogVGhpcyB3aWxsIHJlZ2lzdGVyIHRoZSBkZWZhdWx0IHNlcnZpY2Ugd29ya2VyIGFuZCByZXR1cm4gdGhlIHJlZ2lzdHJhdGlvbi5cclxuICAgICAqIEByZXR1cm4gaGUgc2VydmljZSB3b3JrZXIgcmVnaXN0cmF0aW9uIHRvIGJlIHVzZWQgZm9yIHRoZSBwdXNoIHNlcnZpY2UuXHJcbiAgICAgKi9cclxuICAgIFN3Q29udHJvbGxlci5wcm90b3R5cGUuZ2V0U1dSZWdpc3RyYXRpb25fID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHNlbGYucmVnaXN0cmF0aW9uXTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBUaGlzIHdpbGwgcmV0dXJuIHRoZSBkZWZhdWx0IFZBUElEIGtleSBvciB0aGUgdWludDhhcnJheSB2ZXJzaW9uIG9mIHRoZVxyXG4gICAgICogcHVibGljIFZBUElEIGtleSBwcm92aWRlZCBieSB0aGUgZGV2ZWxvcGVyLlxyXG4gICAgICovXHJcbiAgICBTd0NvbnRyb2xsZXIucHJvdG90eXBlLmdldFB1YmxpY1ZhcGlkS2V5XyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBzd1JlZywgdmFwaWRLZXlGcm9tRGF0YWJhc2U7XHJcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6IHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuZ2V0U1dSZWdpc3RyYXRpb25fKCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3dSZWcgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghc3dSZWcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IGVycm9yRmFjdG9yeS5jcmVhdGUoXCJzdy1yZWdpc3RyYXRpb24tZXhwZWN0ZWRcIiAvKiBTV19SRUdJU1RSQVRJT05fRVhQRUNURUQgKi8pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuZ2V0VmFwaWREZXRhaWxzTW9kZWwoKS5nZXRWYXBpZEZyb21TV1Njb3BlKHN3UmVnLnNjb3BlKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXBpZEtleUZyb21EYXRhYmFzZSA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhcGlkS2V5RnJvbURhdGFiYXNlID09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBERUZBVUxUX1BVQkxJQ19WQVBJRF9LRVldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB2YXBpZEtleUZyb21EYXRhYmFzZV07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBTd0NvbnRyb2xsZXI7XHJcbn0oQmFzZUNvbnRyb2xsZXIpKTtcclxuZnVuY3Rpb24gZ2V0Q2xpZW50TGlzdCgpIHtcclxuICAgIHJldHVybiBzZWxmLmNsaWVudHMubWF0Y2hBbGwoe1xyXG4gICAgICAgIHR5cGU6ICd3aW5kb3cnLFxyXG4gICAgICAgIGluY2x1ZGVVbmNvbnRyb2xsZWQ6IHRydWVcclxuICAgICAgICAvLyBUUyBkb2Vzbid0IGtub3cgdGhhdCBcInR5cGU6ICd3aW5kb3cnXCIgbWVhbnMgaXQnbGwgcmV0dXJuIFdpbmRvd0NsaWVudFtdXHJcbiAgICB9KTtcclxufVxyXG5mdW5jdGlvbiBjcmVhdGVOZXdNc2cobXNnVHlwZSwgbXNnRGF0YSkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBmaXJlYmFzZU1lc3NhZ2luZ1R5cGU6IG1zZ1R5cGUsXHJcbiAgICAgICAgZmlyZWJhc2VNZXNzYWdpbmdEYXRhOiBtc2dEYXRhXHJcbiAgICB9O1xyXG59XHJcbmZ1bmN0aW9uIHNsZWVwKG1zKSB7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcclxuICAgICAgICBzZXRUaW1lb3V0KHJlc29sdmUsIG1zKTtcclxuICAgIH0pO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG52YXIgREVGQVVMVF9TV19QQVRIID0gJy9maXJlYmFzZS1tZXNzYWdpbmctc3cuanMnO1xyXG52YXIgREVGQVVMVF9TV19TQ09QRSA9ICcvZmlyZWJhc2UtY2xvdWQtbWVzc2FnaW5nLXB1c2gtc2NvcGUnO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxudmFyIFdpbmRvd0NvbnRyb2xsZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICBfX2V4dGVuZHMoV2luZG93Q29udHJvbGxlciwgX3N1cGVyKTtcclxuICAgIC8qKlxyXG4gICAgICogQSBzZXJ2aWNlIHRoYXQgcHJvdmlkZXMgYSBNZXNzYWdpbmdTZXJ2aWNlIGluc3RhbmNlLlxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBXaW5kb3dDb250cm9sbGVyKHNlcnZpY2VzKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgc2VydmljZXMpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMucmVnaXN0cmF0aW9uVG9Vc2UgPSBudWxsO1xyXG4gICAgICAgIF90aGlzLnB1YmxpY1ZhcGlkS2V5VG9Vc2UgPSBudWxsO1xyXG4gICAgICAgIF90aGlzLm1lc3NhZ2VPYnNlcnZlciA9IG51bGw7XHJcbiAgICAgICAgLy8gQHRzLWlnbm9yZTogVW51c2VkIHZhcmlhYmxlIGVycm9yLCB0aGlzIGlzIG5vdCBpbXBsZW1lbnRlZCB5ZXQuXHJcbiAgICAgICAgX3RoaXMudG9rZW5SZWZyZXNoT2JzZXJ2ZXIgPSBudWxsO1xyXG4gICAgICAgIF90aGlzLm9uTWVzc2FnZUludGVybmFsID0gY3JlYXRlU3Vic2NyaWJlKGZ1bmN0aW9uIChvYnNlcnZlcikge1xyXG4gICAgICAgICAgICBfdGhpcy5tZXNzYWdlT2JzZXJ2ZXIgPSBvYnNlcnZlcjtcclxuICAgICAgICB9KTtcclxuICAgICAgICBfdGhpcy5vblRva2VuUmVmcmVzaEludGVybmFsID0gY3JlYXRlU3Vic2NyaWJlKGZ1bmN0aW9uIChvYnNlcnZlcikge1xyXG4gICAgICAgICAgICBfdGhpcy50b2tlblJlZnJlc2hPYnNlcnZlciA9IG9ic2VydmVyO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIF90aGlzLnNldHVwU1dNZXNzYWdlTGlzdGVuZXJfKCk7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXF1ZXN0IHBlcm1pc3Npb24gaWYgaXQgaXMgbm90IGN1cnJlbnRseSBncmFudGVkXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybiBSZXNvbHZlcyBpZiB0aGUgcGVybWlzc2lvbiB3YXMgZ3JhbnRlZCwgb3RoZXJ3aXNlIHJlamVjdHNcclxuICAgICAqXHJcbiAgICAgKiBAZGVwcmVjYXRlZCBVc2UgTm90aWZpY2F0aW9uLnJlcXVlc3RQZXJtaXNzaW9uKCkgaW5zdGVhZC5cclxuICAgICAqIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9Ob3RpZmljYXRpb24vcmVxdWVzdFBlcm1pc3Npb25cclxuICAgICAqL1xyXG4gICAgV2luZG93Q29udHJvbGxlci5wcm90b3R5cGUucmVxdWVzdFBlcm1pc3Npb24gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgcGVybWlzc2lvblJlc3VsdDtcclxuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKE5vdGlmaWNhdGlvbi5wZXJtaXNzaW9uID09PSAnZ3JhbnRlZCcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBOb3RpZmljYXRpb24ucmVxdWVzdFBlcm1pc3Npb24oKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwZXJtaXNzaW9uUmVzdWx0ID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocGVybWlzc2lvblJlc3VsdCA9PT0gJ2dyYW50ZWQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAocGVybWlzc2lvblJlc3VsdCA9PT0gJ2RlbmllZCcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IGVycm9yRmFjdG9yeS5jcmVhdGUoXCJwZXJtaXNzaW9uLWJsb2NrZWRcIiAvKiBQRVJNSVNTSU9OX0JMT0NLRUQgKi8pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyb3JGYWN0b3J5LmNyZWF0ZShcInBlcm1pc3Npb24tZGVmYXVsdFwiIC8qIFBFUk1JU1NJT05fREVGQVVMVCAqLyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBUaGlzIG1ldGhvZCBhbGxvd3MgYSBkZXZlbG9wZXIgdG8gb3ZlcnJpZGUgdGhlIGRlZmF1bHQgc2VydmljZSB3b3JrZXIgYW5kXHJcbiAgICAgKiBpbnN0ZWFkIHVzZSBhIGN1c3RvbSBzZXJ2aWNlIHdvcmtlci5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gcmVnaXN0cmF0aW9uIFRoZSBzZXJ2aWNlIHdvcmtlciByZWdpc3RyYXRpb24gdGhhdCBzaG91bGQgYmUgdXNlZCB0b1xyXG4gICAgICogcmVjZWl2ZSB0aGUgcHVzaCBtZXNzYWdlcy5cclxuICAgICAqL1xyXG4gICAgV2luZG93Q29udHJvbGxlci5wcm90b3R5cGUudXNlU2VydmljZVdvcmtlciA9IGZ1bmN0aW9uIChyZWdpc3RyYXRpb24pIHtcclxuICAgICAgICBpZiAoIShyZWdpc3RyYXRpb24gaW5zdGFuY2VvZiBTZXJ2aWNlV29ya2VyUmVnaXN0cmF0aW9uKSkge1xyXG4gICAgICAgICAgICB0aHJvdyBlcnJvckZhY3RvcnkuY3JlYXRlKFwic3ctcmVnaXN0cmF0aW9uLWV4cGVjdGVkXCIgLyogU1dfUkVHSVNUUkFUSU9OX0VYUEVDVEVEICovKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMucmVnaXN0cmF0aW9uVG9Vc2UgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aHJvdyBlcnJvckZhY3RvcnkuY3JlYXRlKFwidXNlLXN3LWJlZm9yZS1nZXQtdG9rZW5cIiAvKiBVU0VfU1dfQkVGT1JFX0dFVF9UT0tFTiAqLyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMucmVnaXN0cmF0aW9uVG9Vc2UgPSByZWdpc3RyYXRpb247XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBUaGlzIG1ldGhvZCBhbGxvd3MgYSBkZXZlbG9wZXIgdG8gb3ZlcnJpZGUgdGhlIGRlZmF1bHQgdmFwaWQga2V5XHJcbiAgICAgKiBhbmQgaW5zdGVhZCB1c2UgYSBjdXN0b20gVkFQSUQgcHVibGljIGtleS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gcHVibGljS2V5IEEgVVJMIHNhZmUgYmFzZTY0IGVuY29kZWQgc3RyaW5nLlxyXG4gICAgICovXHJcbiAgICBXaW5kb3dDb250cm9sbGVyLnByb3RvdHlwZS51c2VQdWJsaWNWYXBpZEtleSA9IGZ1bmN0aW9uIChwdWJsaWNLZXkpIHtcclxuICAgICAgICBpZiAodHlwZW9mIHB1YmxpY0tleSAhPT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgdGhyb3cgZXJyb3JGYWN0b3J5LmNyZWF0ZShcImludmFsaWQtcHVibGljLXZhcGlkLWtleVwiIC8qIElOVkFMSURfUFVCTElDX1ZBUElEX0tFWSAqLyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLnB1YmxpY1ZhcGlkS2V5VG9Vc2UgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aHJvdyBlcnJvckZhY3RvcnkuY3JlYXRlKFwidXNlLXB1YmxpYy1rZXktYmVmb3JlLWdldC10b2tlblwiIC8qIFVTRV9QVUJMSUNfS0VZX0JFRk9SRV9HRVRfVE9LRU4gKi8pO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgcGFyc2VkS2V5ID0gYmFzZTY0VG9BcnJheUJ1ZmZlcihwdWJsaWNLZXkpO1xyXG4gICAgICAgIGlmIChwYXJzZWRLZXkubGVuZ3RoICE9PSA2NSkge1xyXG4gICAgICAgICAgICB0aHJvdyBlcnJvckZhY3RvcnkuY3JlYXRlKFwicHVibGljLXZhcGlkLWtleS1kZWNyeXB0aW9uLWZhaWxlZFwiIC8qIFBVQkxJQ19LRVlfREVDUllQVElPTl9GQUlMRUQgKi8pO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnB1YmxpY1ZhcGlkS2V5VG9Vc2UgPSBwYXJzZWRLZXk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBAZXhwb3J0XHJcbiAgICAgKiBAcGFyYW0gbmV4dE9yT2JzZXJ2ZXIgQW4gb2JzZXJ2ZXIgb2JqZWN0IG9yIGEgZnVuY3Rpb24gdHJpZ2dlcmVkIG9uXHJcbiAgICAgKiBtZXNzYWdlLlxyXG4gICAgICogQHBhcmFtIGVycm9yIEEgZnVuY3Rpb24gdHJpZ2dlcmVkIG9uIG1lc3NhZ2UgZXJyb3IuXHJcbiAgICAgKiBAcGFyYW0gY29tcGxldGVkIGZ1bmN0aW9uIHRyaWdnZXJlZCB3aGVuIHRoZSBvYnNlcnZlciBpcyByZW1vdmVkLlxyXG4gICAgICogQHJldHVybiBUaGUgdW5zdWJzY3JpYmUgZnVuY3Rpb24gZm9yIHRoZSBvYnNlcnZlci5cclxuICAgICAqL1xyXG4gICAgV2luZG93Q29udHJvbGxlci5wcm90b3R5cGUub25NZXNzYWdlID0gZnVuY3Rpb24gKG5leHRPck9ic2VydmVyLCBlcnJvciwgY29tcGxldGVkKSB7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBuZXh0T3JPYnNlcnZlciA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5vbk1lc3NhZ2VJbnRlcm5hbChuZXh0T3JPYnNlcnZlciwgZXJyb3IsIGNvbXBsZXRlZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5vbk1lc3NhZ2VJbnRlcm5hbChuZXh0T3JPYnNlcnZlcik7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIG5leHRPck9ic2VydmVyIEFuIG9ic2VydmVyIG9iamVjdCBvciBhIGZ1bmN0aW9uIHRyaWdnZXJlZCBvbiB0b2tlblxyXG4gICAgICogcmVmcmVzaC5cclxuICAgICAqIEBwYXJhbSBlcnJvciBBIGZ1bmN0aW9uIHRyaWdnZXJlZCBvbiB0b2tlbiByZWZyZXNoIGVycm9yLlxyXG4gICAgICogQHBhcmFtIGNvbXBsZXRlZCBmdW5jdGlvbiB0cmlnZ2VyZWQgd2hlbiB0aGUgb2JzZXJ2ZXIgaXMgcmVtb3ZlZC5cclxuICAgICAqIEByZXR1cm4gVGhlIHVuc3Vic2NyaWJlIGZ1bmN0aW9uIGZvciB0aGUgb2JzZXJ2ZXIuXHJcbiAgICAgKi9cclxuICAgIFdpbmRvd0NvbnRyb2xsZXIucHJvdG90eXBlLm9uVG9rZW5SZWZyZXNoID0gZnVuY3Rpb24gKG5leHRPck9ic2VydmVyLCBlcnJvciwgY29tcGxldGVkKSB7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBuZXh0T3JPYnNlcnZlciA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5vblRva2VuUmVmcmVzaEludGVybmFsKG5leHRPck9ic2VydmVyLCBlcnJvciwgY29tcGxldGVkKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm9uVG9rZW5SZWZyZXNoSW50ZXJuYWwobmV4dE9yT2JzZXJ2ZXIpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEdpdmVuIGEgcmVnaXN0cmF0aW9uLCB3YWl0IGZvciB0aGUgc2VydmljZSB3b3JrZXIgaXQgcmVsYXRlcyB0b1xyXG4gICAgICogYmVjb21lIGFjdGl2ZXJcclxuICAgICAqIEBwYXJhbSByZWdpc3RyYXRpb24gUmVnaXN0cmF0aW9uIHRvIHdhaXQgZm9yIHNlcnZpY2Ugd29ya2VyIHRvIGJlY29tZSBhY3RpdmVcclxuICAgICAqIEByZXR1cm4gV2FpdCBmb3Igc2VydmljZSB3b3JrZXIgcmVnaXN0cmF0aW9uIHRvIGJlY29tZSBhY3RpdmVcclxuICAgICAqL1xyXG4gICAgLy8gVmlzaWJsZSBmb3IgdGVzdGluZ1xyXG4gICAgLy8gVE9ETzogTWFrZSBwcml2YXRlXHJcbiAgICBXaW5kb3dDb250cm9sbGVyLnByb3RvdHlwZS53YWl0Rm9yUmVnaXN0cmF0aW9uVG9BY3RpdmF0ZV8gPSBmdW5jdGlvbiAocmVnaXN0cmF0aW9uKSB7XHJcbiAgICAgICAgdmFyIHNlcnZpY2VXb3JrZXIgPSByZWdpc3RyYXRpb24uaW5zdGFsbGluZyB8fCByZWdpc3RyYXRpb24ud2FpdGluZyB8fCByZWdpc3RyYXRpb24uYWN0aXZlO1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgIGlmICghc2VydmljZVdvcmtlcikge1xyXG4gICAgICAgICAgICAgICAgLy8gVGhpcyBpcyBhIHJhcmUgc2NlbmFyaW8gYnV0IGhhcyBvY2N1cmVkIGluIGZpcmVmb3hcclxuICAgICAgICAgICAgICAgIHJlamVjdChlcnJvckZhY3RvcnkuY3JlYXRlKFwibm8tc3ctaW4tcmVnXCIgLyogTk9fU1dfSU5fUkVHICovKSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gQmVjYXVzZSB0aGUgUHJvbWlzZSBmdW5jdGlvbiBpcyBjYWxsZWQgb24gbmV4dCB0aWNrIHRoZXJlIGlzIGFcclxuICAgICAgICAgICAgLy8gc21hbGwgY2hhbmNlIHRoYXQgdGhlIHdvcmtlciBiZWNhbWUgYWN0aXZlIG9yIHJlZHVuZGFudCBhbHJlYWR5LlxyXG4gICAgICAgICAgICBpZiAoc2VydmljZVdvcmtlci5zdGF0ZSA9PT0gJ2FjdGl2YXRlZCcpIHtcclxuICAgICAgICAgICAgICAgIHJlc29sdmUocmVnaXN0cmF0aW9uKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoc2VydmljZVdvcmtlci5zdGF0ZSA9PT0gJ3JlZHVuZGFudCcpIHtcclxuICAgICAgICAgICAgICAgIHJlamVjdChlcnJvckZhY3RvcnkuY3JlYXRlKFwic3ctcmVnLXJlZHVuZGFudFwiIC8qIFNXX1JFR19SRURVTkRBTlQgKi8pKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgc3RhdGVDaGFuZ2VMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGlmIChzZXJ2aWNlV29ya2VyLnN0YXRlID09PSAnYWN0aXZhdGVkJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUocmVnaXN0cmF0aW9uKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHNlcnZpY2VXb3JrZXIuc3RhdGUgPT09ICdyZWR1bmRhbnQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGVycm9yRmFjdG9yeS5jcmVhdGUoXCJzdy1yZWctcmVkdW5kYW50XCIgLyogU1dfUkVHX1JFRFVOREFOVCAqLykpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gUmV0dXJuIGVhcmx5IGFuZCB3YWl0IHRvIG5leHQgc3RhdGUgY2hhbmdlXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgc2VydmljZVdvcmtlci5yZW1vdmVFdmVudExpc3RlbmVyKCdzdGF0ZWNoYW5nZScsIHN0YXRlQ2hhbmdlTGlzdGVuZXIpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBzZXJ2aWNlV29ya2VyLmFkZEV2ZW50TGlzdGVuZXIoJ3N0YXRlY2hhbmdlJywgc3RhdGVDaGFuZ2VMaXN0ZW5lcik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBUaGlzIHdpbGwgcmVnaXN0ZXIgdGhlIGRlZmF1bHQgc2VydmljZSB3b3JrZXIgYW5kIHJldHVybiB0aGUgcmVnaXN0cmF0aW9uXHJcbiAgICAgKiBAcmV0dXJuIFRoZSBzZXJ2aWNlIHdvcmtlciByZWdpc3RyYXRpb24gdG8gYmUgdXNlZCBmb3IgdGhlIHB1c2ggc2VydmljZS5cclxuICAgICAqL1xyXG4gICAgV2luZG93Q29udHJvbGxlci5wcm90b3R5cGUuZ2V0U1dSZWdpc3RyYXRpb25fID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgaWYgKHRoaXMucmVnaXN0cmF0aW9uVG9Vc2UpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMud2FpdEZvclJlZ2lzdHJhdGlvblRvQWN0aXZhdGVfKHRoaXMucmVnaXN0cmF0aW9uVG9Vc2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBNYWtlIHRoZSByZWdpc3RyYXRpb24gbnVsbCBzbyB3ZSBrbm93IHVzZVNlcnZpY2VXb3JrZXIgd2lsbCBub3RcclxuICAgICAgICAvLyB1c2UgYSBuZXcgc2VydmljZSB3b3JrZXIgYXMgcmVnaXN0cmF0aW9uVG9Vc2UgaXMgbm8gbG9uZ2VyIHVuZGVmaW5lZFxyXG4gICAgICAgIHRoaXMucmVnaXN0cmF0aW9uVG9Vc2UgPSBudWxsO1xyXG4gICAgICAgIHJldHVybiBuYXZpZ2F0b3Iuc2VydmljZVdvcmtlclxyXG4gICAgICAgICAgICAucmVnaXN0ZXIoREVGQVVMVF9TV19QQVRILCB7XHJcbiAgICAgICAgICAgIHNjb3BlOiBERUZBVUxUX1NXX1NDT1BFXHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHtcclxuICAgICAgICAgICAgdGhyb3cgZXJyb3JGYWN0b3J5LmNyZWF0ZShcImZhaWxlZC1zZXJ2aWNld29ya2VyLXJlZ2lzdHJhdGlvblwiIC8qIEZBSUxFRF9ERUZBVUxUX1JFR0lTVFJBVElPTiAqLywge1xyXG4gICAgICAgICAgICAgICAgYnJvd3NlckVycm9yTWVzc2FnZTogZXJyLm1lc3NhZ2VcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlZ2lzdHJhdGlvbikge1xyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXMud2FpdEZvclJlZ2lzdHJhdGlvblRvQWN0aXZhdGVfKHJlZ2lzdHJhdGlvbikudGhlbihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5yZWdpc3RyYXRpb25Ub1VzZSA9IHJlZ2lzdHJhdGlvbjtcclxuICAgICAgICAgICAgICAgIC8vIFdlIHVwZGF0ZSBhZnRlciBhY3RpdmF0aW9uIGR1ZSB0byBhbiBpc3N1ZSB3aXRoIEZpcmVmb3ggdjQ5IHdoZXJlXHJcbiAgICAgICAgICAgICAgICAvLyBhIHJhY2UgY29uZGl0aW9uIG9jY2Fzc2lvbmFsbHkgY2F1c2VzIHRoZSBzZXJ2aWNlIHdvcmtlciB0byBub3RcclxuICAgICAgICAgICAgICAgIC8vIGluc3RhbGxcclxuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZmxvYXRpbmctcHJvbWlzZXNcclxuICAgICAgICAgICAgICAgIHJlZ2lzdHJhdGlvbi51cGRhdGUoKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZWdpc3RyYXRpb247XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogVGhpcyB3aWxsIHJldHVybiB0aGUgZGVmYXVsdCBWQVBJRCBrZXkgb3IgdGhlIHVpbnQ4YXJyYXkgdmVyc2lvbiBvZiB0aGVcclxuICAgICAqIHB1YmxpYyBWQVBJRCBrZXkgcHJvdmlkZWQgYnkgdGhlIGRldmVsb3Blci5cclxuICAgICAqL1xyXG4gICAgV2luZG93Q29udHJvbGxlci5wcm90b3R5cGUuZ2V0UHVibGljVmFwaWRLZXlfID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucHVibGljVmFwaWRLZXlUb1VzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0aGlzLnB1YmxpY1ZhcGlkS2V5VG9Vc2VdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIERFRkFVTFRfUFVCTElDX1ZBUElEX0tFWV07XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogVGhpcyBtZXRob2Qgd2lsbCBzZXQgdXAgYSBtZXNzYWdlIGxpc3RlbmVyIHRvIGhhbmRsZVxyXG4gICAgICogZXZlbnRzIGZyb20gdGhlIHNlcnZpY2Ugd29ya2VyIHRoYXQgc2hvdWxkIHRyaWdnZXJcclxuICAgICAqIGV2ZW50cyBpbiB0aGUgcGFnZS5cclxuICAgICAqL1xyXG4gICAgLy8gVmlzaWJsZSBmb3IgdGVzdGluZ1xyXG4gICAgLy8gVE9ETzogTWFrZSBwcml2YXRlXHJcbiAgICBXaW5kb3dDb250cm9sbGVyLnByb3RvdHlwZS5zZXR1cFNXTWVzc2FnZUxpc3RlbmVyXyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIG5hdmlnYXRvci5zZXJ2aWNlV29ya2VyLmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBmdW5jdGlvbiAoZXZlbnQpIHsgcmV0dXJuIF9fYXdhaXRlcihfdGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIF9hLCBmaXJlYmFzZU1lc3NhZ2luZ1R5cGUsIGZpcmViYXNlTWVzc2FnaW5nRGF0YSwgZGF0YSwgZXZlbnRUeXBlLCBhbmFseXRpY3M7XHJcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2IpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2IubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZXZlbnQuZGF0YSB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIWV2ZW50LmRhdGEuZmlyZWJhc2VNZXNzYWdpbmdUeXBlIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAhZXZlbnQuZGF0YS5maXJlYmFzZU1lc3NhZ2luZ0RhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5vdCBhIG1lc3NhZ2UgZnJvbSBGQ01cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYSA9IGV2ZW50LmRhdGEsIGZpcmViYXNlTWVzc2FnaW5nVHlwZSA9IF9hLmZpcmViYXNlTWVzc2FnaW5nVHlwZSwgZmlyZWJhc2VNZXNzYWdpbmdEYXRhID0gX2EuZmlyZWJhc2VNZXNzYWdpbmdEYXRhO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5tZXNzYWdlT2JzZXJ2ZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZU9ic2VydmVyLm5leHQoZmlyZWJhc2VNZXNzYWdpbmdEYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhID0gZmlyZWJhc2VNZXNzYWdpbmdEYXRhLmRhdGE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKGRhdGEgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZOX0NBTVBBSUdOX0lEIGluIGRhdGEgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFbRk5fQ0FNUEFJR05fQU5BTFlUSUNTX0VOQUJMRURdID09PSAnMScpKSByZXR1cm4gWzMgLypicmVhayovLCAyXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnRUeXBlID0gZ2V0RXZlbnRUeXBlKGZpcmViYXNlTWVzc2FnaW5nVHlwZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuc2VydmljZXMuYW5hbHl0aWNzUHJvdmlkZXIuZ2V0KCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgYW5hbHl0aWNzID0gX2Iuc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbmFseXRpY3MubG9nRXZlbnQoZXZlbnRUeXBlLCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgLyogZXNsaW50LWRpc2FibGUgY2FtZWxjYXNlICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VfbmFtZTogZGF0YVtGTl9DQU1QQUlHTl9OQU1FXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VfaWQ6IGRhdGFbRk5fQ0FNUEFJR05fSURdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZV90aW1lOiBkYXRhW0ZOX0NBTVBBSUdOX1RJTUVdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZV9kZXZpY2VfdGltZTogTWF0aC5mbG9vcihEYXRlLm5vdygpIC8gMTAwMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiBlc2xpbnQtZW5hYmxlIGNhbWVsY2FzZSAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYi5sYWJlbCA9IDI7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOiByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pOyB9LCBmYWxzZSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFdpbmRvd0NvbnRyb2xsZXI7XHJcbn0oQmFzZUNvbnRyb2xsZXIpKTtcclxuZnVuY3Rpb24gZ2V0RXZlbnRUeXBlKG1lc3NhZ2VUeXBlKSB7XHJcbiAgICBzd2l0Y2ggKG1lc3NhZ2VUeXBlKSB7XHJcbiAgICAgICAgY2FzZSBNZXNzYWdlVHlwZS5OT1RJRklDQVRJT05fQ0xJQ0tFRDpcclxuICAgICAgICAgICAgcmV0dXJuICdub3RpZmljYXRpb25fb3Blbic7XHJcbiAgICAgICAgY2FzZSBNZXNzYWdlVHlwZS5QVVNIX01TR19SRUNFSVZFRDpcclxuICAgICAgICAgICAgcmV0dXJuICdub3RpZmljYXRpb25fZm9yZWdyb3VuZCc7XHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCk7XHJcbiAgICB9XHJcbn1cblxudmFyIG5hbWUgPSBcIkBmaXJlYmFzZS9tZXNzYWdpbmdcIjtcbnZhciB2ZXJzaW9uID0gXCIwLjYuMFwiO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gcmVnaXN0ZXJNZXNzYWdpbmcoaW5zdGFuY2UpIHtcclxuICAgIHZhciBtZXNzYWdpbmdOYW1lID0gJ21lc3NhZ2luZyc7XHJcbiAgICB2YXIgZmFjdG9yeU1ldGhvZCA9IGZ1bmN0aW9uIChjb250YWluZXIpIHtcclxuICAgICAgICAvKiBEZXBlbmRlbmNpZXMgKi9cclxuICAgICAgICB2YXIgYXBwID0gY29udGFpbmVyLmdldFByb3ZpZGVyKCdhcHAnKS5nZXRJbW1lZGlhdGUoKTtcclxuICAgICAgICB2YXIgaW5zdGFsbGF0aW9ucyA9IGNvbnRhaW5lci5nZXRQcm92aWRlcignaW5zdGFsbGF0aW9ucycpLmdldEltbWVkaWF0ZSgpO1xyXG4gICAgICAgIHZhciBhbmFseXRpY3NQcm92aWRlciA9IGNvbnRhaW5lci5nZXRQcm92aWRlcignYW5hbHl0aWNzLWludGVybmFsJyk7XHJcbiAgICAgICAgdmFyIGZpcmViYXNlU2VydmljZXMgPSB7XHJcbiAgICAgICAgICAgIGFwcDogYXBwLFxyXG4gICAgICAgICAgICBpbnN0YWxsYXRpb25zOiBpbnN0YWxsYXRpb25zLFxyXG4gICAgICAgICAgICBhbmFseXRpY3NQcm92aWRlcjogYW5hbHl0aWNzUHJvdmlkZXJcclxuICAgICAgICB9O1xyXG4gICAgICAgIGlmICghaXNTdXBwb3J0ZWQoKSkge1xyXG4gICAgICAgICAgICB0aHJvdyBlcnJvckZhY3RvcnkuY3JlYXRlKFwidW5zdXBwb3J0ZWQtYnJvd3NlclwiIC8qIFVOU1VQUE9SVEVEX0JST1dTRVIgKi8pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoc2VsZiAmJiAnU2VydmljZVdvcmtlckdsb2JhbFNjb3BlJyBpbiBzZWxmKSB7XHJcbiAgICAgICAgICAgIC8vIFJ1bm5pbmcgaW4gU2VydmljZVdvcmtlciBjb250ZXh0XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgU3dDb250cm9sbGVyKGZpcmViYXNlU2VydmljZXMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gQXNzdW1lIHdlIGFyZSBpbiB0aGUgd2luZG93IGNvbnRleHQuXHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgV2luZG93Q29udHJvbGxlcihmaXJlYmFzZVNlcnZpY2VzKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgdmFyIG5hbWVzcGFjZUV4cG9ydHMgPSB7XHJcbiAgICAgICAgaXNTdXBwb3J0ZWQ6IGlzU3VwcG9ydGVkXHJcbiAgICB9O1xyXG4gICAgaW5zdGFuY2UuSU5URVJOQUwucmVnaXN0ZXJDb21wb25lbnQobmV3IENvbXBvbmVudChtZXNzYWdpbmdOYW1lLCBmYWN0b3J5TWV0aG9kLCBcIlBVQkxJQ1wiIC8qIFBVQkxJQyAqLykuc2V0U2VydmljZVByb3BzKG5hbWVzcGFjZUV4cG9ydHMpKTtcclxuICAgIGluc3RhbmNlLnJlZ2lzdGVyVmVyc2lvbihuYW1lLCB2ZXJzaW9uKTtcclxufVxyXG5yZWdpc3Rlck1lc3NhZ2luZyhmaXJlYmFzZSk7XHJcbmZ1bmN0aW9uIGlzU3VwcG9ydGVkKCkge1xyXG4gICAgaWYgKHNlbGYgJiYgJ1NlcnZpY2VXb3JrZXJHbG9iYWxTY29wZScgaW4gc2VsZikge1xyXG4gICAgICAgIC8vIFJ1bm5pbmcgaW4gU2VydmljZVdvcmtlciBjb250ZXh0XHJcbiAgICAgICAgcmV0dXJuIGlzU1dDb250cm9sbGVyU3VwcG9ydGVkKCk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICAvLyBBc3N1bWUgd2UgYXJlIGluIHRoZSB3aW5kb3cgY29udGV4dC5cclxuICAgICAgICByZXR1cm4gaXNXaW5kb3dDb250cm9sbGVyU3VwcG9ydGVkKCk7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIENoZWNrcyB0byBzZWUgaWYgdGhlIHJlcXVpcmVkIEFQSXMgZXhpc3QuXHJcbiAqL1xyXG5mdW5jdGlvbiBpc1dpbmRvd0NvbnRyb2xsZXJTdXBwb3J0ZWQoKSB7XHJcbiAgICByZXR1cm4gKG5hdmlnYXRvci5jb29raWVFbmFibGVkICYmXHJcbiAgICAgICAgJ3NlcnZpY2VXb3JrZXInIGluIG5hdmlnYXRvciAmJlxyXG4gICAgICAgICdQdXNoTWFuYWdlcicgaW4gd2luZG93ICYmXHJcbiAgICAgICAgJ05vdGlmaWNhdGlvbicgaW4gd2luZG93ICYmXHJcbiAgICAgICAgJ2ZldGNoJyBpbiB3aW5kb3cgJiZcclxuICAgICAgICBTZXJ2aWNlV29ya2VyUmVnaXN0cmF0aW9uLnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eSgnc2hvd05vdGlmaWNhdGlvbicpICYmXHJcbiAgICAgICAgUHVzaFN1YnNjcmlwdGlvbi5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkoJ2dldEtleScpKTtcclxufVxyXG4vKipcclxuICogQ2hlY2tzIHRvIHNlZSBpZiB0aGUgcmVxdWlyZWQgQVBJcyBleGlzdCB3aXRoaW4gU1cgQ29udGV4dC5cclxuICovXHJcbmZ1bmN0aW9uIGlzU1dDb250cm9sbGVyU3VwcG9ydGVkKCkge1xyXG4gICAgcmV0dXJuICgnUHVzaE1hbmFnZXInIGluIHNlbGYgJiZcclxuICAgICAgICAnTm90aWZpY2F0aW9uJyBpbiBzZWxmICYmXHJcbiAgICAgICAgU2VydmljZVdvcmtlclJlZ2lzdHJhdGlvbi5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkoJ3Nob3dOb3RpZmljYXRpb24nKSAmJlxyXG4gICAgICAgIFB1c2hTdWJzY3JpcHRpb24ucHJvdG90eXBlLmhhc093blByb3BlcnR5KCdnZXRLZXknKSk7XHJcbn1cblxuZXhwb3J0IHsgaXNTdXBwb3J0ZWQsIHJlZ2lzdGVyTWVzc2FnaW5nIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5lc20uanMubWFwXG4iLCIvLyBGaXJlYmFzZSBBcHAgKHRoZSBjb3JlIEZpcmViYXNlIFNESykgaXMgYWx3YXlzIHJlcXVpcmVkIGFuZCBtdXN0IGJlIGxpc3RlZCBmaXJzdC5cclxuaW1wb3J0ICogYXMgZmlyZWJhc2UgZnJvbSBcImZpcmViYXNlL2FwcFwiO1xyXG5cclxuLy8gVGhlIEZpcmViYXNlIFNESyBmb3IgQW5hbHl0aWNzLlxyXG5pbXBvcnQgXCJmaXJlYmFzZS9hbmFseXRpY3NcIjtcclxuXHJcbi8vIFRoZSBGaXJlYmFzZSBwcm9kdWN0cyB0aGF0IGFyZSB1c2VkIGZvciBtZXNzYWdpbmcuXHJcbmltcG9ydCBcImZpcmViYXNlL2ZpcmVzdG9yZVwiO1xyXG5pbXBvcnQgXCJmaXJlYmFzZS9tZXNzYWdpbmdcIjtcclxuXHJcbmltcG9ydCB0eXBlIHsgQXBwbGljYXRpb24gfSBmcm9tIFwiLi9hcHBcIjtcclxuXHJcbi8qKioqKioqKioqKioqKioqKioqKiogRklSRUJBU0UgSU5JVElBTElaQVRJT04gKioqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuLy8gVGhlIEZpcmViYXNlIGNvbmZpZ3VyYXRpb24gZm9yIHRoZSBhcHAuXHJcbmNvbnN0IGZpcmViYXNlQ29uZmlnID0ge1xyXG4gIGFwaUtleTogXCJBSXphU3lCOUtDOVEzTnpNdDdiNlRzcE5jS3hxV3FuenpQTHZkRmdcIixcclxuICBhdXRoRG9tYWluOiBcInRlc3RnZHByb2plY3QtMTU3MDAzNjQzOTkzMS5maXJlYmFzZWFwcC5jb21cIixcclxuICBkYXRhYmFzZVVSTDogXCJodHRwczovL3Rlc3RnZHByb2plY3QtMTU3MDAzNjQzOTkzMS5maXJlYmFzZWlvLmNvbVwiLFxyXG4gIHByb2plY3RJZDogXCJ0ZXN0Z2Rwcm9qZWN0LTE1NzAwMzY0Mzk5MzFcIixcclxuICBzdG9yYWdlQnVja2V0OiBcInRlc3RnZHByb2plY3QtMTU3MDAzNjQzOTkzMS5hcHBzcG90LmNvbVwiLFxyXG4gIG1lc3NhZ2luZ1NlbmRlcklkOiBcIjE5OTg0NDQ1MzY0M1wiLFxyXG4gIGFwcElkOiBcIjE6MTk5ODQ0NDUzNjQzOndlYjo0YWE3YmE5N2QxYWUyZTQyOGI1NjBlXCJcclxufTtcclxuXHJcbi8vIEluaXRpYWxpemF0aW9uIG9mIEZpcmViYXNlLlxyXG5maXJlYmFzZS5pbml0aWFsaXplQXBwKGZpcmViYXNlQ29uZmlnKTtcclxuXHJcblxyXG4vKioqKioqKioqKioqKioqKioqKiogRklSRUJBU0UgQ0xPVUQgTUVTU0FHSU5HICoqKioqKioqKioqKioqKioqKioqKipcclxuICogTWFuYWdlcyB0aGUgY3JlYXRpb24gb2YgZGV2aWNlIHRva2VucyB0byByZWNlaXZlIHB1c2ggbm90aWZpY2F0aW9ucy5cclxuKi9cclxuZXhwb3J0IGNsYXNzIE1lc3NhZ2luZyB7XHJcbiAgbWVzc2FnaW5nOiBmaXJlYmFzZS5tZXNzYWdpbmcuTWVzc2FnaW5nO1xyXG5cclxuICBjb25zdHJ1Y3RvcihhcHA6IEFwcGxpY2F0aW9uKSB7XHJcbiAgICAvLyBSZXRyaWV2ZSB0aGUgRmlyZWJhc2UgTWVzc2FnaW5nIG9iamVjdC5cclxuICAgIHRoaXMubWVzc2FnaW5nID0gZmlyZWJhc2UubWVzc2FnaW5nKCk7XHJcblxyXG4gICAgLy8gSGFuZGxlIGluY29taW5nIG1lc3NhZ2VzIHdoZW4gdGhlIGFwcCBpcyBpbiB0aGUgZm9yZWdyb3VuZCAvIGZvY3VzLlxyXG4gICAgdGhpcy5tZXNzYWdpbmcub25NZXNzYWdlKHBheWxvYWQgPT4ge1xyXG4gICAgICBjb25zb2xlLmxvZygnTWVzc2FnZSByZWNlaXZlZC4gJywgcGF5bG9hZCk7XHJcbiAgICAgIGNvbnN0IGRhdGEgPSBwYXlsb2FkLmRhdGE7XHJcbiAgICAgIGFwcC5ub3RpZmljYXRpb25zTWFuYWdlci5jcmVhdGVOb3RpZmljYWN0aW9uKGRhdGEpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gQ2FsbGJhY2sgZmlyZWQgaWYgSW5zdGFuY2UgSUQgdG9rZW4gaXMgdXBkYXRlZC5cclxuICAgIHRoaXMubWVzc2FnaW5nLm9uVG9rZW5SZWZyZXNoKCgpID0+IHtcclxuICAgICAgdGhpcy5tZXNzYWdpbmcuZ2V0VG9rZW4oKS50aGVuKHJlZnJlc2hlZFRva2VuID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZygnRkNNIHRva2VuIHJlZnJlc2hlZDonLCByZWZyZXNoZWRUb2tlbik7XHJcbiAgICAgICAgLy8gU2VuZCB0aGUgbmV3IERldmljZSBUb2tlbiB0byB0aGUgZGF0YXN0b3JlLlxyXG4gICAgICAgIGZpcmViYXNlLmZpcmVzdG9yZSgpLmNvbGxlY3Rpb24oJ2ZjbVRva2VucycpLmRvYyhyZWZyZXNoZWRUb2tlbilcclxuICAgICAgICAgIC5zZXQoeyBlbWFpbDogYXBwLnVzZXJJbmZvLmVtYWlsQWRkcmVzcyB9KTtcclxuICAgICAgfSkuY2F0Y2goZXJyID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZygnVW5hYmxlIHRvIHJldHJpZXZlIHJlZnJlc2hlZCB0b2tlbiAnLCBlcnIpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAqIEF1eGlsaWFyeSBmdW5jdGlvbiB0byB2aWV3IHRoZSBkZXZpY2UgdG9rZW4gZm9yIEZDTS5cclxuICAgICAqL1xyXG4gICAgd2luZG93LmdldE1lc3NhZ2luZ1Rva2VuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICBmaXJlYmFzZS5tZXNzYWdpbmcoKS5nZXRUb2tlbigpXHJcbiAgICAgICAgLnRoZW4odG9rZW4gPT4ge1xyXG4gICAgICAgICAgY29uc29sZS5sb2codG9rZW4pO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmNhdGNoKGVyciA9PiB7XHJcbiAgICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNhdmVzIHRoZSBGQ00gdG9rZW4gdG8gdGhlIGRhdGFzdG9yZSBhbmQgc2Vzc2lvbiBzdG9yYWdlLlxyXG4gICAgICogSWYgbm90aWZpY2F0aW9uIHBlcm1pc3Npb25zIGhhdmUgbm90IGJlZW4gZ3JhbnRlZCBpdCBhc2tzIGZvciB0aGVtLlxyXG4gICAgICovXHJcbiAgICB3aW5kb3cuc2F2ZU1lc3NhZ2luZ0RldmljZVRva2VuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICBpZiAoIXNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ2RldmljZVRva2VuJykpIHtcclxuICAgICAgICBmaXJlYmFzZS5tZXNzYWdpbmcoKS5nZXRUb2tlbigpLnRoZW4odG9rZW4gPT4ge1xyXG4gICAgICAgICAgaWYgKHRva2VuKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdGQ00gdG9rZW4gZ2VuZXJhdGVkOicsIHRva2VuKTtcclxuICAgICAgICAgICAgLy8gU2F2aW5nIHRoZSBGQ00gdG9rZW4gaW4gRmlyZXN0b3JlLlxyXG4gICAgICAgICAgICBmaXJlYmFzZS5maXJlc3RvcmUoKS5jb2xsZWN0aW9uKCdmY21Ub2tlbnMnKS5kb2ModG9rZW4pXHJcbiAgICAgICAgICAgICAgLnNldCh7IGVtYWlsOiBhcHAudXNlckluZm8uZW1haWxBZGRyZXNzIH0pO1xyXG4gICAgICAgICAgICAvLyBTYXZpbmcgdG9rZW4gaW4gU2Vzc2lvbiBTdG9yYWdlLlxyXG4gICAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCdkZXZpY2VUb2tlbicsIHRva2VuKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIE5lZWQgdG8gcmVxdWVzdCBwZXJtaXNzaW9ucyB0byBzaG93IG5vdGlmaWNhdGlvbnMuXHJcbiAgICAgICAgICAgIHRoaXMucmVxdWVzdE5vdGlmaWNhdGlvbnNQZXJtaXNzaW9ucygpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pLmNhdGNoKGVyciA9PiB7XHJcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdVbmFibGUgdG8gZ2V0IEZDTSB0b2tlbi4nLCBlcnIpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gIH1cclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIFJlcXVlc3RzIHBlcm1pc3Npb24gdG8gc2hvdyBub3RpZmljYXRpb25zLlxyXG4gICAqL1xyXG4gIHJlcXVlc3ROb3RpZmljYXRpb25zUGVybWlzc2lvbnMoKSB7XHJcbiAgICBjb25zb2xlLmxvZygnUmVxdWVzdGluZyBub3RpZmljYXRpb25zIHBlcm1pc3Npb24uLi4nKTtcclxuICAgIGZpcmViYXNlLm1lc3NhZ2luZygpLnJlcXVlc3RQZXJtaXNzaW9uKCkudGhlbigoKSA9PiB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdOb3RpZmljYXRpb24gcGVybWlzc2lvbiBncmFudGVkLicpO1xyXG4gICAgICB3aW5kb3cuc2F2ZU1lc3NhZ2luZ0RldmljZVRva2VuKCk7XHJcbiAgICB9KS5jYXRjaChlcnIgPT4ge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdVbmFibGUgdG8gZ2V0IHBlcm1pc3Npb24gdG8gbm90aWZ5OicsIGVycik7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG5cclxuICAvLyBFcXVpdmFsZW50IHRvIHRoZSBwcmV2aW91cyBidXQgd2l0aG91dCBGaXJlYmFzZS5cclxuICAvLyBmdW5jdGlvbiByZXF1ZXN0UGVybWlzc2lvbigpIHtcclxuICAvLyAgIGNvbnNvbGUubG9nKCdSZXF1ZXN0aW5nIHBlcm1pc3Npb24uLi4nKTtcclxuICAvLyAgIE5vdGlmaWNhdGlvbi5yZXF1ZXN0UGVybWlzc2lvbigpLnRoZW4ocGVybWlzc2lvbiA9PiB7XHJcbiAgLy8gICAgIGlmIChwZXJtaXNzaW9uID09PSAnZ3JhbnRlZCcpIHtcclxuICAvLyAgICAgICBjb25zb2xlLmxvZygnTm90aWZpY2F0aW9uIHBlcm1pc3Npb24gZ3JhbnRlZC4nKTtcclxuICAvLyAgICAgICAvLyBUT0RPOiBSZXRyaWV2ZSBhbiBJbnN0YW5jZSBJRCB0b2tlbiBmb3IgdXNlIHdpdGggRkNNLlxyXG4gIC8vICAgICAgIC8vIElmIGFuIGFwcCBoYXMgYmVlbiBncmFudGVkIG5vdGlmaWNhdGlvbiBwZXJtaXNzaW9uIGl0IGNhbiB1cGRhdGUgaXRzIFVJIHJlZmxlY3RpbmcgdGhpcy5cclxuICAvLyAgICAgICAvLyByZXNldFVJKCk7XHJcbiAgLy8gICAgIH0gZWxzZSB7XHJcbiAgLy8gICAgICAgY29uc29sZS5sb2coJ1VuYWJsZSB0byBnZXQgcGVybWlzc2lvbiB0byBub3RpZnkuJyk7XHJcbiAgLy8gICAgIH1cclxuICAvLyAgIH0pO1xyXG4gIC8vIH0gIFxyXG5cclxufSIsImltcG9ydCAnLi9zdHlsZXMvc3R5bGVzLnNjc3MnO1xyXG5pbXBvcnQgeyBBcHBsaWNhdGlvbiB9IGZyb20gJy4vYXBwJztcclxuaW1wb3J0IEdlbmVyaWNzIGZyb20gJy4vZ2VuZXJpY3MnO1xyXG5pbXBvcnQgQVBJIGZyb20gJy4vYXBpJztcclxuaW1wb3J0IHsgTWVzc2FnaW5nIH0gZnJvbSAnLi9tZXNzYWdpbmcnO1xyXG5cclxuXHJcbi8qKioqKioqKioqKioqKioqKioqKioqKiogVEhFIEdMT0JBTCBPQkpFQ1QgKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuZGVjbGFyZSBnbG9iYWwge1xyXG4gIGludGVyZmFjZSBXaW5kb3cge1xyXG4gICAgdGhlcmVJc01lc3NhZ2luZzogYm9vbGVhbjtcclxuICAgIGdldEN1cnJlbnRVc2VyKCk6IGdhcGkuY2xpZW50LmRyaXZlLlVzZXI7XHJcbiAgICBnZXRNZXNzYWdpbmdUb2tlbigpOiB2b2lkO1xyXG4gICAgc2F2ZU1lc3NhZ2luZ0RldmljZVRva2VuKCk6IHZvaWQ7XHJcbiAgfVxyXG59XHJcblxyXG4vLyBkZWNsYXJlIGdsb2JhbCB7XHJcbi8vICAgbmFtZXNwYWNlIE5vZGVKUyB7XHJcbi8vICAgICBpbnRlcmZhY2UgUHJvY2Vzc0VudiB7XHJcbi8vICAgICAgIC8vIFBST0NFU1M6IHN0cmluZztcclxuLy8gICAgIH1cclxuLy8gICB9XHJcbi8vIH1cclxuXHJcblxyXG4vKioqKioqKioqKioqKioqKioqIFRIRSBPTkxZIElOU1RBTkNFIE9GIFRIRSBBUFAgKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbmNvbnN0IEFwcCA9IG5ldyBBcHBsaWNhdGlvbigpO1xyXG5cclxuXHJcbi8qKioqKiogVEhFIE9OTFkgSU5TVEFOQ0UgT0YgVEhFIE1FU1NBR0lORyBMT0dJQyBCWSBGSVJFQkFTRSAqKioqKioqL1xyXG5cclxuY29uc3QgTXNnID0gbmV3IE1lc3NhZ2luZyhBcHApO1xyXG5cclxuLy8gU2V0IHRvIHRydWUgb25seSBpZiB0aGUgTWVzc2FnaW5nIGluc3RhbmNlIGlzIGNyZWF0ZWQuXHJcbndpbmRvdy50aGVyZUlzTWVzc2FnaW5nID0gdHJ1ZTtcclxuXHJcblxyXG4vKioqKioqKioqKioqKioqKioqKiBTRVJWSUNFIFdPUktFUiBSRUdJU1RSQVRJT04gKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbi8vIFRPRE86IERvIHRoaXMgb25seSBpZiB0aGUgdXNlciBhdXRoZW50aWNhdGVzP1xyXG5pZiAoJ3NlcnZpY2VXb3JrZXInIGluIG5hdmlnYXRvcikge1xyXG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgKCkgPT4ge1xyXG4gICAgbmF2aWdhdG9yLnNlcnZpY2VXb3JrZXIucmVnaXN0ZXIoJy9zZXJ2aWNlLXdvcmtlci5qcycpXHJcbiAgICAgIC50aGVuKHJlZyA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ1NlcnZpY2Ugd29ya2VyIHJlZ2lzdGVyZWQuJywgcmVnKTtcclxuICAgICAgICAvLyBGaXJlYmFzZSBtZXNzYWdpbmcgcmVxdWlyZXMgdG8gdXNlIGEgc2VydmljZSB3b3JrZXIuXHJcbiAgICAgICAgaWYgKHdpbmRvdy50aGVyZUlzTWVzc2FnaW5nKSBNc2cubWVzc2FnaW5nLnVzZVNlcnZpY2VXb3JrZXIocmVnKTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKGVyciA9PiB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignU2VydmljZSBXb3JrZXIgRXJyb3InLCBlcnIpO1xyXG4gICAgICB9KTtcclxuICB9KTtcclxufVxyXG5cclxuXHJcbi8qKioqKioqKioqKioqKioqKioqKioqKioqIEdMT0JBTCBNRVRIT0RTICoqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG5cclxud2luZG93LmdldEN1cnJlbnRVc2VyID0gZnVuY3Rpb24gKCkge1xyXG4gIHJldHVybiBBcHAudXNlckluZm87XHJcbn1cclxuXHJcblxyXG4vKioqKioqKioqKioqKioqKioqKioqKioqIEJST0FEQ0FTVCBDSEFOTkVMICoqKioqKioqKioqKioqKioqKioqKioqKipcclxuICogVG8gY29tdW5pY2F0ZSB3aXRoIHRoZSBTZXJ2aWNlIFdvcmtlciBhbmQgdmljZXZlcnNhLlxyXG4qL1xyXG5cclxuaWYgKHdpbmRvdy5Ccm9hZGNhc3RDaGFubmVsKSB7XHJcbiAgY29uc3QgYnJvYWRDYXN0Q2hhbm5lbCA9IG5ldyBCcm9hZGNhc3RDaGFubmVsKCdhcHAtY2hhbm5lbCcpO1xyXG5cclxuICBicm9hZENhc3RDaGFubmVsLm9ubWVzc2FnZSA9IGUgPT4ge1xyXG4gICAgaWYgKGUuZGF0YS5hY3Rpb24gPT09ICduZXdOb3RpZmljYXRpb24nKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdBZGQgbm90aWZpY2F0aW9uIHRvIHRoZSBsaXN0LicpO1xyXG4gICAgICBBcHAubm90aWZpY2F0aW9uc01hbmFnZXIuY3JlYXRlTm90aWZpY2FjdGlvbihlLmRhdGEuY29udGVudCk7XHJcbiAgICB9XHJcbiAgfTtcclxufSBlbHNlIHtcclxuICBjb25zb2xlLndhcm4oJ1RoaXMgYnJvd3NlciBkb2VzIG5vdCBzdXBwb3J0IEJyb2FkY2FzdENoYW5uZWwuJyk7XHJcbn1cclxuXHJcblxyXG4vKioqKioqKioqKioqKioqKioqKiBWSUVXIFNBTVBMRSBQUk9KRUNUIE9QVElPTiAqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbmNvbnN0IHNhbXBsZVByb2plY3RCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2FtcGxlUHJvamVjdEJ0bicpO1xyXG5cclxuc2FtcGxlUHJvamVjdEJ0bi5vbmNsaWNrID0gKCkgPT4ge1xyXG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9qZWN0c0xpc3RCdG4nKS5vbmNsaWNrID0gbnVsbDtcclxuICBBcHAuc2F2ZUJ0bi5zdHlsZS52aXNpYmlsaXR5ID0gJ2hpZGRlbic7XHJcbiAgQXBwLnByb2plY3RzTGlzdEJ0bi5jbGFzc0xpc3QuYWRkKCdsb2NrZWQnKTtcclxuICAvLyBUT0RPOiBDaGFuZ2UgdGhlIFNpZ24gT3V0IGJ1dHRvbiBmb3IgdGhlIExvZyBJbiBidXR0b24gb24gdGhlIHNpZGUgbWVudS5cclxuICBBcHAuc3RhcnQoJzFENEVTWTk3ekt2Sm9aMUJXZUxXWXE4R3hoUU5Xc1hwZycpO1xyXG59XHJcblxyXG5cclxuLyoqKioqKioqKioqKioqKioqKiogR09PR0xFIERSSVZFIEFVVEhFTlRJQ0FUSU9OICoqKioqKioqKioqKioqKioqKiovXHJcblxyXG4vLyBPQXV0aCAyLjAgQ2xpZW50IElEIGZvciBHb29nbGUgQVBJcy5cclxuY29uc3QgQ0xJRU5UX0lEID0gcHJvY2Vzcy5lbnYuR09PR0xFX0NMSUVOVF9JRDtcclxuXHJcbi8vIEFQSSBrZXkgZm9yIEdvb2dsZSBEcml2ZS5cclxubGV0IEFQSV9LRVk6IHN0cmluZztcclxuaWYgKHByb2Nlc3MuZW52LlBST0NFU1MgPT09ICdwcm9kdWN0aW9uJykgeyAvLyBUT0RPIHdvcmsgPyBvciBsZWF2ZSBqdXN0IFBST0NFU1MgP1xyXG4gIEFQSV9LRVkgPSBwcm9jZXNzLmVudi5HT09HTEVfQVBJX0tFWV9QUk9EO1xyXG59IGVsc2Uge1xyXG4gIEFQSV9LRVkgPSBwcm9jZXNzLmVudi5HT09HTEVfQVBJX0tFWV9ERVY7XHJcbn1cclxuXHJcbi8vIEFycmF5IG9mIEFQSSBkaXNjb3ZlcnkgZG9jIFVSTHMgZm9yIEFQSXMgdXNlZCBieSB0aGUgYXBwLlxyXG5jb25zdCBESVNDT1ZFUllfRE9DUyA9IFtcImh0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL2Rpc2NvdmVyeS92MS9hcGlzL2RyaXZlL3YzL3Jlc3RcIl07XHJcblxyXG4vLyBBdXRob3JpemF0aW9uIHNjb3BlcyByZXF1aXJlZCBieSB0aGUgQVBJOyBtdWx0aXBsZSBzY29wZXMgY2FuIGJlIGluY2x1ZGVkLCBzZXBhcmF0ZWQgYnkgc3BhY2VzLlxyXG5jb25zdCBTQ09QRVMgPSBcImh0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL2F1dGgvZHJpdmVcIjtcclxuXHJcbmNvbnN0IGF1dGhvcml6ZUJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhdXRob3JpemVCdG4nKTtcclxuY29uc3Qgc2lnbm91dEJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaWdub3V0QnRuJyk7XHJcblxyXG5cclxuLyoqXHJcbiAqICBPbiBsb2FkLCBjYWxsZWQgdG8gbG9hZCB0aGUgYXV0aDIgbGlicmFyeSBhbmQgQVBJIGNsaWVudCBsaWJyYXJ5LlxyXG4gKi9cclxuKGZ1bmN0aW9uICgpIHtcclxuICBjb25zdCBzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcclxuICBzY3JpcHQudHlwZSA9IFwidGV4dC9qYXZhc2NyaXB0XCI7XHJcbiAgc2NyaXB0LmRlZmVyID0gdHJ1ZTtcclxuICBzY3JpcHQub25sb2FkID0gKCkgPT4gaGFuZGxlQ2xpZW50TG9hZCgpO1xyXG4gIHNjcmlwdC5zcmMgPSAnaHR0cHM6Ly9hcGlzLmdvb2dsZS5jb20vanMvYXBpLmpzJztcclxuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdib2R5JykuYXBwZW5kQ2hpbGQoc2NyaXB0KTtcclxufSkoKTtcclxuXHJcblxyXG5mdW5jdGlvbiBoYW5kbGVDbGllbnRMb2FkKCkge1xyXG4gIGdhcGkubG9hZCgnY2xpZW50OmF1dGgyJywgaW5pdENsaWVudCk7XHJcbn1cclxuXHJcblxyXG4vKipcclxuICogIEluaXRpYWxpemVzIHRoZSBBUEkgY2xpZW50IGxpYnJhcnkgYW5kIHNldHMgdXAgc2lnbi1pbiBzdGF0ZSBsaXN0ZW5lcnMuXHJcbiAqL1xyXG5mdW5jdGlvbiBpbml0Q2xpZW50KCkge1xyXG4gIGdhcGkuY2xpZW50LmluaXQoe1xyXG4gICAgYXBpS2V5OiBBUElfS0VZLFxyXG4gICAgY2xpZW50SWQ6IENMSUVOVF9JRCxcclxuICAgIGRpc2NvdmVyeURvY3M6IERJU0NPVkVSWV9ET0NTLFxyXG4gICAgc2NvcGU6IFNDT1BFU1xyXG4gIH0pLnRoZW4oZnVuY3Rpb24gKCkge1xyXG4gICAgLy8gTGlzdGVuIGZvciBzaWduLWluIHN0YXRlIGNoYW5nZXMuXHJcbiAgICBnYXBpLmF1dGgyLmdldEF1dGhJbnN0YW5jZSgpLmlzU2lnbmVkSW4ubGlzdGVuKHVwZGF0ZVNpZ25pblN0YXR1cyk7XHJcblxyXG4gICAgLy8gSGFuZGxlIHRoZSBpbml0aWFsIHNpZ24taW4gc3RhdGUuXHJcbiAgICB1cGRhdGVTaWduaW5TdGF0dXMoZ2FwaS5hdXRoMi5nZXRBdXRoSW5zdGFuY2UoKS5pc1NpZ25lZEluLmdldCgpKTtcclxuICAgIGF1dGhvcml6ZUJ1dHRvbi5vbmNsaWNrID0gaGFuZGxlQXV0aENsaWNrO1xyXG4gICAgc2lnbm91dEJ1dHRvbi5vbmNsaWNrID0gaGFuZGxlU2lnbm91dENsaWNrO1xyXG4gIH0sIGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgY29uc29sZS5sb2coSlNPTi5zdHJpbmdpZnkoZXJyb3IsIG51bGwsIDIpKTtcclxuICB9KTtcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiAgQ2FsbGVkIHdoZW4gdGhlIHNpZ25lZCBpbiBzdGF0dXMgY2hhbmdlcywgdG8gdXBkYXRlIHRoZSBVSVxyXG4gKiAgYXBwcm9wcmlhdGVseS4gQWZ0ZXIgYSBzaWduLWluLCB0aGUgQVBJIGlzIGNhbGxlZC5cclxuICovXHJcbmZ1bmN0aW9uIHVwZGF0ZVNpZ25pblN0YXR1cyhpc1NpZ25lZEluOiBib29sZWFuKSB7XHJcbiAgaWYgKGlzU2lnbmVkSW4pIHtcclxuICAgIGNvbnNvbGUubG9nKCdBdXRob3JpemVkLicpO1xyXG4gICAgLy8gR2V0IHRoZSBVUkwgcGFyYW1zLlxyXG4gICAgY29uc3QgcHJvamVjdElkID0gR2VuZXJpY3MuZ2V0VXJsUGFyYW1zKHdpbmRvdy5sb2NhdGlvbi5ocmVmKS5pZDtcclxuICAgIC8vIEhpZGUgdGhlIGxvZ2luIGRpYWxvZyBpbiBjYXNlIGl0IHdhcyB2aXNpYmxlLlxyXG4gICAgaWYgKEFwcC5tb2RhbERpYWxvZ0NvbnRlbnQuZmlyc3RFbGVtZW50Q2hpbGQpIHtcclxuICAgICAgQXBwLmNsb3NlTW9kYWxEaWFsb2coKTtcclxuICAgIH1cclxuICAgIC8vIE1hbmFnZSB0aGUgbG9nZ2VkIHVzZXIgcGVyc29uYWwgaW5mby5cclxuICAgIEFwcC5zZXRVc2VySW5mbygpO1xyXG4gICAgLy8gSWYgYSBwcm9qZWN0IGlkIGlzIHByb3ZpZGVkIHRvIHN0YXJ0KCkgbWV0aG9kIHRoZSBhcHAgd2lsbCBzdGFydCBmcm9tIHRoZSBwcm9qZWN0IHZpZXcuXHJcbiAgICBBcHAuc3RhcnQocHJvamVjdElkKTtcclxuICB9IGVsc2Uge1xyXG4gICAgY29uc29sZS5sb2coJ05vdCBhdXRob3JpemVkJyk7XHJcbiAgICBzaG93TG9naW5EaWFsb2coKTtcclxuICB9XHJcbn1cclxuXHJcblxyXG4vKipcclxuICogIFNpZ24gaW4gdGhlIHVzZXIgdXBvbiBidXR0b24gY2xpY2suXHJcbiAqL1xyXG5mdW5jdGlvbiBoYW5kbGVBdXRoQ2xpY2soKSB7XHJcbiAgZ2FwaS5hdXRoMi5nZXRBdXRoSW5zdGFuY2UoKS5zaWduSW4oKTtcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiAgU2lnbiBvdXQgdGhlIHVzZXIgdXBvbiBidXR0b24gY2xpY2suXHJcbiAqL1xyXG5mdW5jdGlvbiBoYW5kbGVTaWdub3V0Q2xpY2soKSB7XHJcbiAgZ2FwaS5hdXRoMi5nZXRBdXRoSW5zdGFuY2UoKS5zaWduT3V0KCk7XHJcbn1cclxuXHJcblxyXG4vKioqKioqKioqKioqKioqKioqKioqKioqKiogTE9HSU4gRElBTE9HICoqKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcblxyXG5jb25zdCBhdXRob3JpemVEaWFsb2cgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXV0aG9yaXplRGlhbG9nJyk7XHJcblxyXG4vKipcclxuICogU2hvd3MgdGhlIGxvZ2luIGRpYWxvZyBhbmQgaGlkZXMgYW5kIGNsZWFycyBhbnl0aGluZyBlbHNlLlxyXG4gKi9cclxuZnVuY3Rpb24gc2hvd0xvZ2luRGlhbG9nKCkge1xyXG4gIEFwcC5zaG93TW9kYWxEaWFsb2coYXV0aG9yaXplRGlhbG9nLCAnb3BhcXVlJywgZmFsc2UpO1xyXG4gIC8vIEhpZGUgYW55dGhpbmcgZWxzZS5cclxuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdoZWFkZXInKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ21haW4nKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gIEFwcC5wcm9qZWN0c0xpc3RDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAvLyBUT0RPOiBEZWxldGUgdGhlIGNvbnRlbnRzIG9mIHRoZSBnbG9iYWwgb2JqZWN0cyBpZiBhbnkuXHJcbiAgLy8gYXBwRGF0YS5jbGVhcigpO1xyXG4gIC8vIGN1cnJlbnRQcm9qZWN0LmNsZWFyKCk7XHJcbiAgLy8gbGFzdFVwbG9hZGVkUHJvamVjdC5jbGVhcigpO1xyXG4gIEdlbmVyaWNzLmVtcHR5Tm9kZShBcHAucHJvamVjdHNMaXN0KTtcclxuICBoaXN0b3J5LnJlcGxhY2VTdGF0ZSh7IHBhZ2U6ICdTaWduIGluIGRpYWxvZycgfSwgJ1NpZ24gaW4gZGlhbG9nJywgbG9jYXRpb24uaHJlZi5yZXBsYWNlKGxvY2F0aW9uLnNlYXJjaCwgJycpKTtcclxufVxyXG5cclxuXHJcbi8qKioqKioqKioqKioqKioqKioqKioqKiogUFdBIGluc3RhbGxhdGlvbiAqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG4vLyBUT0RPIENyZWF0ZSBhIHNlcGFyYXRlIGNsYXNzIGFuZCBpbXBvcnQ/XHJcblxyXG5sZXQgZGVmZXJyZWRJbnN0YWxsUHJvbXB0OiBCZWZvcmVJbnN0YWxsUHJvbXB0RXZlbnQgPSBudWxsO1xyXG5cclxuY29uc3QgaW5zdGFsbEJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbnN0YWxsQnRuJyk7XHJcblxyXG5pbnN0YWxsQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaW5zdGFsbEFwcCk7XHJcblxyXG5cclxuLy8gRXZlbnQgbGlzdGVuZXIgZm9yIGJlZm9yZWluc3RhbGxwcm9tcHQgZXZlbnQuXHJcbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdiZWZvcmVpbnN0YWxscHJvbXB0Jywgc2F2ZUJlZm9yZUluc3RhbGxQcm9tcHRFdmVudCk7XHJcblxyXG5cclxuLyoqXHJcbiAqIEV2ZW50IGhhbmRsZXIgZm9yIGJlZm9yZWluc3RhbGxwcm9tcHQgZXZlbnQuXHJcbiAqIFNhdmVzIHRoZSBldmVudCBhbmQgc2hvd3MgaW5zdGFsbCBidXR0b24uXHJcbiAqIEBwYXJhbSB7RXZlbnR9IGVcclxuICovXHJcbmZ1bmN0aW9uIHNhdmVCZWZvcmVJbnN0YWxsUHJvbXB0RXZlbnQoZTogQmVmb3JlSW5zdGFsbFByb21wdEV2ZW50KSB7XHJcbiAgLy8gUHJldmVudCBmcm9tIGF1dG9tYXRpY2FsbHkgc2hvd2luZyB0aGUgcHJvbXB0IHdoaWNoIGNvdWxkIGhhcHBlblxyXG4gIC8vIGluIHNvbWUgYnJvd3NlcnMgYW5kIGNyZWF0ZSBhIGN1c3RvbSBvbmUuXHJcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gIC8vIFN0YXNoIHRoZSBldmVudCBzbyBpdCBjYW4gYmUgdHJpZ2dlcmVkIGxhdGVyLlxyXG4gIGRlZmVycmVkSW5zdGFsbFByb21wdCA9IGU7XHJcbiAgLy8gVXBkYXRlIFVJIHRvIG5vdGlmeSB0aGUgdXNlciB0aGV5IGNhbiBhZGQgdG8gaG9tZSBzY3JlZW5cclxuICBpbnN0YWxsQnV0dG9uLnJlbW92ZUF0dHJpYnV0ZSgnaGlkZGVuJyk7XHJcbn1cclxuXHJcblxyXG4vKipcclxuICogRXZlbnQgaGFuZGxlciBmb3IgdGhlIGluc3RhbGwgYnV0dG9uLlxyXG4gKiBAcGFyYW0ge0V2ZW50fSBlXHJcbiAqL1xyXG5mdW5jdGlvbiBpbnN0YWxsQXBwKGU6IEV2ZW50KSB7XHJcbiAgLy8gU2hvdyBpbnN0YWxsIHByb21wdC5cclxuICBkZWZlcnJlZEluc3RhbGxQcm9tcHQucHJvbXB0KCk7XHJcbiAgLy8gSGlkZSB0aGUgaW5zdGFsbCBidXR0b24sIGl0IGNhbnQgYmUgY2FsbGVkIHR3aWNlLlxyXG4gIChlLnRhcmdldCBhcyBIVE1MRWxlbWVudCkuaGlkZGVuID0gdHJ1ZTsgLy8gVE9ETyB1c2UgY3NzIGluc3RlYWRcclxuICAvLyBMb2cgdXNlciByZXNwb25zZSB0byBwcm9tcHQuXHJcbiAgZGVmZXJyZWRJbnN0YWxsUHJvbXB0LnVzZXJDaG9pY2VcclxuICAgIC50aGVuKGNob2ljZSA9PiB7XHJcbiAgICAgIGlmIChjaG9pY2Uub3V0Y29tZSA9PT0gJ2FjY2VwdGVkJykge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdVc2VyIGFjY2VwdGVkIHRoZSBBMkhTIHByb21wdCcsIGNob2ljZSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ1VzZXIgZGlzbWlzc2VkIHRoZSBBMkhTIHByb21wdCcsIGNob2ljZSk7XHJcbiAgICAgIH1cclxuICAgICAgZGVmZXJyZWRJbnN0YWxsUHJvbXB0ID0gbnVsbDtcclxuICAgIH0pO1xyXG59XHJcblxyXG5cclxuLy8gQWRkIGV2ZW50IGxpc3RlbmVyIGZvciB0aGUgYXBwaW5zdGFsbGVkIGV2ZW50LlxyXG4vLyBTaW5jZSBhcHAgY2FuIGJlIGluc3RhbGxlZCBpbiBtb3JlIHRoYW4gb25lIHdheSBpdCBpcyBnb29kIHRvIGxpc3RlbiBmb3IgdGhpcyBldmVudC5cclxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2FwcGluc3RhbGxlZCcsIGxvZ0FwcEluc3RhbGxlZCk7XHJcblxyXG5cclxuLyoqXHJcbiAqIFRoZSBldmVudCBoYW5kbGVyIGZvciB0aGUgYXBwaW5zdGFsbGVkIGV2ZW50LlxyXG4gKiBAcGFyYW0ge0V2ZW50fSBlXHJcbiAqL1xyXG5mdW5jdGlvbiBsb2dBcHBJbnN0YWxsZWQoZTogRXZlbnQpIHtcclxuICBjb25zb2xlLmxvZygnVmlzdWFsQVJRIERyYXdpbmdzIFZpZXdlciB3YXMgaW5zdGFsbGVkLicsIGUpO1xyXG4gIC8vIFRPRE86IExvZyB0aGUgaW5zdGFsbGF0aW9uIGZvciBleGFtcGxlIHRvIGFuIGFuYWx5dGljcyBzb2Z0d2FyZSBvciBzYXZlIHRoZSBldmVudCBzb21laG93LlxyXG59XHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG4vLyBUT0RPIG1vdmUgdG8gYSBzZXBhcmF0ZSBmaWxlXHJcblxyXG4vKioqKioqKioqKioqKioqKioqKioqKiBEUkFXSU5HUyBCVVRUT05TIExJU1QgKioqKioqKioqKioqKioqKioqKioqKi9cclxuLypcclxuICogQSBzaW5nbGUgZXZlbnQgbGlzdGVuZXIgaW4gdGhlIGNvbnRhaW5lciBvZiB0aGUgZHJhd2luZ3MgYnV0dG9ucyBtYW5hZ2VzIHRoZSBjbGlja2VkIGRyYXdpbmcuXHJcbiAqL1xyXG5cclxubGV0IGN1cnJlbnREcmF3aW5nQnRuOiBIVE1MRWxlbWVudDtcclxuXHJcbkFwcC5kcmF3aW5nc0J0bnMucXVlcnlTZWxlY3RvcignLmRyb3Bkb3duLWNvbnRlbnQnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jIGZ1bmN0aW9uIChlKSB7XHJcbiAgaWYgKGN1cnJlbnREcmF3aW5nQnRuKSB7XHJcbiAgICBjdXJyZW50RHJhd2luZ0J0bi5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcclxuICB9XHJcbiAgY3VycmVudERyYXdpbmdCdG4gPSAoZS50YXJnZXQgYXMgSFRNTEVsZW1lbnQpO1xyXG4gIGNvbnN0IGRyYXdpbmdJZCA9IGN1cnJlbnREcmF3aW5nQnRuLmRhdGFzZXQuaWQ7XHJcbiAgLy8gU2V0IHRoZSBuYW1lIG9mIHRoZSBkcmF3aW5nIG9uIHRoZSBkcm9wZG93biBidXR0b24uXHJcbiAgLy8gVE9ETzogRG8gdGhpcyBvbmx5IGlmIGl0IHdhcyBzdWNjZXNzZnVsLlxyXG4gIChBcHAuZHJhd2luZ3NCdG5zLmNoaWxkcmVuWzBdIGFzIEhUTUxFbGVtZW50KS5pbm5lclRleHQgPSBjdXJyZW50RHJhd2luZ0J0bi5pbm5lclRleHQ7XHJcbiAgY3VycmVudERyYXdpbmdCdG4uY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XHJcblxyXG4gIC8vIEdldCB0aGUgY29ycmVzcG9uZGluZyBkcmF3aW5nIG9iamVjdC5cclxuICBjb25zdCByZXF1ZXN0ZWREcmF3aW5nID0gQXBwLmN1cnJlbnRXb3Jrc3BhY2UuZHJhd2luZ3MuZmluZChkID0+IGQuaWQgPT09IGRyYXdpbmdJZCk7XHJcblxyXG4gIC8vIExvYWQgdGhlIGRyYXdpbmdzIHN0eWxlcyBpZiBpdCBpcyB0aGUgZmlyc3QgdGltZS5cclxuICAvLyBUT0RPOiBJZiB0aGlzIGlzIHJlcXVpcmVkIGFsd2F5cyB0aGUgZmlyc3QgdGltZSBtYXliZSBkbyBpdCBpbiB0aGUgV29ya3NwYWNlIGNvbnN0cnVjdG9yLlxyXG4gIC8vIFRPRE86IElmIHRoaXMgZmluYWxseSBleHRyYWN0ZWQgdGhlbiB0aGUgZnVuY3Rpb24gd29udCBuZWVkIHRvIGJlIGFzeW5jIGFueW1vcmUuXHJcbiAgaWYgKEFwcC5jdXJyZW50V29ya3NwYWNlLmRyYXdpbmdzU3R5bGVzVGFnID09PSB1bmRlZmluZWQpIHtcclxuICAgIGlmIChBcHAuY3VycmVudFdvcmtzcGFjZS5kcmF3aW5nc1N0eWxlc0lkICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgbGV0IHN0eWxlc1JlcztcclxuICAgICAgdHJ5IHtcclxuICAgICAgICBzdHlsZXNSZXMgPSBhd2FpdCBBUEkuZ2V0RmlsZUNvbnRlbnQoQXBwLmN1cnJlbnRXb3Jrc3BhY2UuZHJhd2luZ3NTdHlsZXNJZCk7XHJcbiAgICAgIH0gY2F0Y2gge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciB3aGlsZSB0cnlpbmcgdG8gZmV0Y2ggdGhlIGRyYXdpbmdzIHN0eWxlcy5cIik7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHN0eWxlc1Jlcykge1xyXG4gICAgICAgIGNvbnN0IHN0eWxlVGFnID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcclxuICAgICAgICBzdHlsZVRhZy5pbm5lclRleHQgPSBzdHlsZXNSZXMuYm9keTtcclxuICAgICAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHN0eWxlVGFnKTtcclxuICAgICAgICBBcHAuY3VycmVudFdvcmtzcGFjZS5kcmF3aW5nc1N0eWxlc1RhZyA9IHN0eWxlVGFnO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25zb2xlLndhcm4oJ1RoaXMgcHJvamVjdCBkb2VzblxcJ3QgaGF2ZSBhIGNzcyBzdHlsZXMgZmlsZSBmb3IgdGhlIGRyYXdpbmdzLicpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8gQ2hlY2sgaWYgdGhlIHJlcXVlc3RlZCBkcmF3aW5nIGhhcyBhbHJlYWR5IHRoZSBjb250ZW50LlxyXG4gIGlmIChyZXF1ZXN0ZWREcmF3aW5nLmNvbnRlbnQgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgQXBwLmN1cnJlbnRXb3Jrc3BhY2Uuc2V0RHJhd2luZyhyZXF1ZXN0ZWREcmF3aW5nKTtcclxuICB9IGVsc2Uge1xyXG4gICAgQXBwLnNob3dWaWV3cG9ydERpYWxvZygnbG9hZGVyJywgJ0xvYWRpbmcgZHJhd2luZycpO1xyXG4gICAgQVBJLmdldEZpbGVDb250ZW50KGRyYXdpbmdJZCkudGhlbihyZXMgPT4ge1xyXG4gICAgICByZXF1ZXN0ZWREcmF3aW5nLnNldENvbnRlbnQocmVzLmJvZHkpO1xyXG4gICAgICBBcHAuY3VycmVudFdvcmtzcGFjZS5zZXREcmF3aW5nKHJlcXVlc3RlZERyYXdpbmcpO1xyXG4gICAgICBBcHAuaGlkZVZpZXdwb3J0TWVzc2FnZSgpO1xyXG4gICAgICBjb25zb2xlLmxvZygnRHJhd2luZyBmZXRjaGVkLicpO1xyXG4gICAgfSwgZXJyID0+IHtcclxuICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgIH0pO1xyXG4gIH1cclxufSk7XHJcblxyXG5cclxuLyoqKioqKioqKioqKioqKioqKioqKiBEUk9QRE9XTlMgRlVOQ1RJT05BTElUWSAqKioqKioqKioqKioqKioqKioqKiovXHJcblxyXG5jb25zdCBkcm9wZG93bnMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdkcm9wZG93bi1jb250YWluZXInKTtcclxuXHJcbmZvciAobGV0IGkgPSAwOyBpIDwgZHJvcGRvd25zLmxlbmd0aDsgaSsrKSB7XHJcbiAgZHJvcGRvd25zW2ldLmNoaWxkcmVuWzBdLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgZHJvcGRvd25zW2ldLmNsYXNzTGlzdC50b2dnbGUoJ29wZW4nKTtcclxuICB9KTtcclxuICBkcm9wZG93bnNbaV0uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsIGUgPT4ge1xyXG4gICAgKGUuY3VycmVudFRhcmdldCBhcyBIVE1MRWxlbWVudCkuY2xhc3NMaXN0LnJlbW92ZSgnb3BlbicpO1xyXG4gIH0pO1xyXG59XHJcblxyXG5cclxuLyoqKioqKioqKioqKioqKioqKioqKioqKiBTSURFIE5BVkUgTUVOVSAqKioqKioqKioqKioqKioqKioqKioqKioqKiovXHJcblxyXG5jb25zdCBzaWRlTmF2VG9nZ2xlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NpZGVOYXZUb2dnbGUnKTtcclxuXHJcbnNpZGVOYXZUb2dnbGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NpZGVOYXZDb250YWluZXInKS5jbGFzc0xpc3QudG9nZ2xlKCdhY3RpdmUnKTtcclxuICBzaWRlTmF2VG9nZ2xlLmNsYXNzTGlzdC50b2dnbGUoJ2FjdGl2ZScpO1xyXG59KTsiXSwic291cmNlUm9vdCI6IiJ9