!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=19)}([function(e,t,n){"use strict";n.r(t),n.d(t,"__extends",(function(){return i})),n.d(t,"__assign",(function(){return o})),n.d(t,"__rest",(function(){return a})),n.d(t,"__decorate",(function(){return s})),n.d(t,"__param",(function(){return u})),n.d(t,"__metadata",(function(){return c})),n.d(t,"__awaiter",(function(){return l})),n.d(t,"__generator",(function(){return h})),n.d(t,"__exportStar",(function(){return d})),n.d(t,"__values",(function(){return f})),n.d(t,"__read",(function(){return p})),n.d(t,"__spread",(function(){return m})),n.d(t,"__spreadArrays",(function(){return g})),n.d(t,"__await",(function(){return y})),n.d(t,"__asyncGenerator",(function(){return v})),n.d(t,"__asyncDelegator",(function(){return b})),n.d(t,"__asyncValues",(function(){return w})),n.d(t,"__makeTemplateObject",(function(){return T})),n.d(t,"__importStar",(function(){return S})),n.d(t,"__importDefault",(function(){return I}));
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function i(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function a(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function s(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}function u(e,t){return function(n,r){t(n,r,e)}}function c(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function l(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n((function(t){t(e.value)})).then(a,s)}u((r=r.apply(e,t||[])).next())}))}function h(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function d(e,t){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}function f(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}function p(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function m(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(p(arguments[t]));return e}function g(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}function y(e){return this instanceof y?(this.v=e,this):new y(e)}function v(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),o=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(e){i[e]&&(r[e]=function(t){return new Promise((function(n,r){o.push([e,t,n,r])>1||s(e,t)}))})}function s(e,t){try{(n=i[e](t)).value instanceof y?Promise.resolve(n.value.v).then(u,c):l(o[0][2],n)}catch(e){l(o[0][3],e)}var n}function u(e){s("next",e)}function c(e){s("throw",e)}function l(e,t){e(t),o.shift(),o.length&&s(o[0][0],o[0][1])}}function b(e){var t,n;return t={},r("next"),r("throw",(function(e){throw e})),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,i){t[r]=e[r]?function(t){return(n=!n)?{value:y(e[r](t)),done:"return"===r}:i?i(t):t}:i}}function w(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=f(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,i){(function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)})(r,i,(t=e[n](t)).done,t.value)}))}}}function T(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function S(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function I(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},o=function(e,t){if(!e)throw a(t)},a=function(e){return new Error("Firebase Database ("+i.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)},s=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},u={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var o=e[i],a=i+1<e.length,s=a?e[i+1]:0,u=i+2<e.length,c=u?e[i+2]:0,l=o>>2,h=(3&o)<<4|s>>4,d=(15&s)<<2|c>>6,f=63&c;u||(f=64,a||(d=64)),r.push(n[l],n[h],n[d],n[f])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(s(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var a=((7&i)<<18|(63&(o=e[n++]))<<12|(63&(s=e[n++]))<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(a>>10)),t[r++]=String.fromCharCode(56320+(1023&a))}else{o=e[n++];var s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var o=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0,s=++i<e.length?n[e.charAt(i)]:64,u=++i<e.length?n[e.charAt(i)]:64;if(++i,null==o||null==a||null==s||null==u)throw Error();var c=o<<2|a>>4;if(r.push(c),64!==s){var l=a<<4&240|s>>2;if(r.push(l),64!==u){var h=s<<6&192|u;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},c=function(e){try{return u.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&(e[n]=l(e[n],t[n]));return e}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var h=function(){function e(){var e=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))}return e.prototype.wrapCallback=function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"==typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}},e}();
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var f="FirebaseError",p=function(e){function t(n,r){var i=e.call(this,r)||this;return i.code=n,i.name=f,Object.setPrototypeOf(i,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(i,m.prototype.create),i}return r.__extends(t,e),t}(Error),m=function(){function e(e,t,n){this.service=e,this.serviceName=t,this.errors=n}return e.prototype.create=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=t[0]||{},i=this.service+"/"+e,o=this.errors[e],a=o?g(o,r):"Error",s=this.serviceName+": "+a+" ("+i+").",u=new p(i,s),c=0,l=Object.keys(r);c<l.length;c++){var h=l[c];"_"!==h.slice(-1)&&(h in u&&console.warn('Overwriting FirebaseError base field "'+h+'" can cause unexpected behavior.'),u[h]=r[h])}return u},e}();function g(e,t){return e.replace(y,(function(e,n){var r=t[n];return null!=r?r.toString():"<"+n+"?>"}))}var y=/\{\$([^}]+)}/g;
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v(e){return JSON.parse(e)}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var b=function(e){var t={},n={},r={},i="";try{var o=e.split(".");t=v(c(o[0])||""),n=v(c(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(e){}return{header:t,claims:n,data:r,signature:i}};
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var w=function(){function e(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}return e.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},e.prototype.compress_=function(e,t){t||(t=0);var n=this.W_;if("string"==typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(r=0;r<16;r++)n[r]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,a,s=this.chain_[0],u=this.chain_[1],c=this.chain_[2],l=this.chain_[3],h=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(o=l^u&(c^l),a=1518500249):(o=u^c^l,a=1859775393):r<60?(o=u&c|l&(u|c),a=2400959708):(o=u^c^l,a=3395469782);i=(s<<5|s>>>27)+o+h+a+n[r]&4294967295;h=l,l=c,c=4294967295&(u<<30|u>>>2),u=s,s=i}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295},e.prototype.update=function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<t;){if(0===o)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"==typeof e){for(;r<t;)if(i[o]=e.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<t;)if(i[o]=e[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=t}},e.prototype.digest=function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)e[r]=this.chain_[n]>>i&255,++r;return e},e}();var T=function(){function e(e,t){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((function(){e(n)})).catch((function(e){n.error(e)}))}return e.prototype.next=function(e){this.forEachObserver((function(t){t.next(e)}))},e.prototype.error=function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)},e.prototype.complete=function(){this.forEachObserver((function(e){e.complete()})),this.close()},e.prototype.subscribe=function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!=typeof e||null===e)return!1;for(var n=0,r=t;n<r.length;n++){var i=r[n];if(i in e&&"function"==typeof e[i])return!0}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=S),void 0===r.error&&(r.error=S),void 0===r.complete&&(r.complete=S);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),o},e.prototype.unsubscribeOne=function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},e.prototype.forEachObserver=function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)},e.prototype.sendOne=function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}}))},e.prototype.close=function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))},e}();function S(){}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I(e,t,n){var r="";switch(t){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}var i=e+" failed: ";return i+=r+" argument "}t.CONSTANTS=i,t.Deferred=h,t.ErrorFactory=m,t.FirebaseError=p,t.Sha1=w,t.assert=o,t.assertionError=a,t.async=function(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];Promise.resolve(!0).then((function(){e.apply(void 0,n)})).catch((function(e){t&&t(e)}))}},t.base64=u,t.base64Decode=c,t.base64Encode=function(e){var t=s(e);return u.encodeByteArray(t,!0)},t.contains=
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.createSubscribe=function(e,t){var n=new T(e,t);return n.subscribe.bind(n)},t.decode=b,t.deepCopy=
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(e){return l(void 0,e)},t.deepExtend=l,t.errorPrefix=I,t.getUA=d,t.isAdmin=function(e){var t=b(e).claims;return"object"==typeof t&&!0===t.admin},t.isBrowser=function(){return"object"==typeof self&&self.self===self},t.isEmpty=function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0},t.isMobileCordova=function(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(d())},t.isNode=function(){try{return"[object process]"===Object.prototype.toString.call(e.process)}catch(e){return!1}},t.isNodeSdk=function(){return!0===i.NODE_CLIENT||!0===i.NODE_ADMIN},t.isReactNative=function(){return"object"==typeof navigator&&"ReactNative"===navigator.product},t.isValidFormat=function(e){var t=b(e).claims;return!!t&&"object"==typeof t&&t.hasOwnProperty("iat")},t.isValidTimestamp=function(e){var t=b(e).claims,n=Math.floor((new Date).getTime()/1e3),r=0,i=0;return"object"==typeof t&&(t.hasOwnProperty("nbf")?r=t.nbf:t.hasOwnProperty("iat")&&(r=t.iat),i=t.hasOwnProperty("exp")?t.exp:r+86400),!!n&&!!r&&!!i&&n>=r&&n<=i},t.issuedAtTime=function(e){var t=b(e).claims;return"object"==typeof t&&t.hasOwnProperty("iat")?t.iat:null},t.jsonEval=v,t.map=function(e,t,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,t.querystring=function(e){for(var t=[],n=function(e,n){Array.isArray(n)?n.forEach((function(n){t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))})):t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))},r=0,i=Object.entries(e);r<i.length;r++){var o=i[r];n(o[0],o[1])}return t.length?"&"+t.join("&"):""},t.querystringDecode=function(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=e.split("=");t[n[0]]=n[1]}})),t},t.safeGet=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0},t.stringLength=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t},t.stringToByteArray=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(i>=55296&&i<=56319){var a=i-55296;r++,o(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(a<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},t.stringify=function(e){return JSON.stringify(e)},t.validateArgCount=function(e,t,n,r){var i;if(r<t?i="at least "+t:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")},t.validateCallback=function(e,t,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(I(e,t,r)+"must be a valid function.")},t.validateContextObject=function(e,t,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(I(e,t,r)+"must be a valid context object.")}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,t.validateNamespace=function(e,t,n,r){if((!r||n)&&"string"!=typeof n)throw new Error(I(e,t,r)+"must be a valid firebase namespace.")}}).call(this,n(5))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n(1),o=function(){function e(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return e.prototype.setInstantiationMode=function(e){return this.instantiationMode=e,this},e.prototype.setMultipleInstances=function(e){return this.multipleInstances=e,this},e.prototype.setServiceProps=function(e){return this.serviceProps=e,this},e}(),a="[DEFAULT]",s=function(){function e(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return e.prototype.get=function(e){void 0===e&&(e=a);var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new i.Deferred;this.instancesDeferred.set(t,n);try{var r=this.getOrInitializeService(t);r&&n.resolve(r)}catch(e){}}return this.instancesDeferred.get(t).promise},e.prototype.getImmediate=function(e){var t=r.__assign({identifier:a,optional:!1},e),n=t.identifier,i=t.optional,o=this.normalizeInstanceIdentifier(n);try{var s=this.getOrInitializeService(o);if(!s){if(i)return null;throw Error("Service "+this.name+" is not available")}return s}catch(e){if(i)return null;throw e}},e.prototype.getComponent=function(){return this.component},e.prototype.setComponent=function(e){var t,n;if(e.name!==this.name)throw Error("Mismatching Component "+e.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=e,function(e){return"EAGER"===e.instantiationMode}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e))try{this.getOrInitializeService(a)}catch(e){}try{for(var i=r.__values(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var s=r.__read(o.value,2),u=s[0],c=s[1],l=this.normalizeInstanceIdentifier(u);try{var h=this.getOrInitializeService(l);c.resolve(h)}catch(e){}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}},e.prototype.clearInstance=function(e){void 0===e&&(e=a),this.instancesDeferred.delete(e),this.instances.delete(e)},e.prototype.delete=function(){return r.__awaiter(this,void 0,void 0,(function(){var e;return r.__generator(this,(function(t){switch(t.label){case 0:return e=Array.from(this.instances.values()),[4,Promise.all(e.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()})))];case 1:return t.sent(),[2]}}))}))},e.prototype.isComponentSet=function(){return null!=this.component},e.prototype.getOrInitializeService=function(e){var t=this.instances.get(e);return!t&&this.component&&(t=this.component.instanceFactory(this.container,function(e){return e===a?void 0:e}(e)),this.instances.set(e,t)),t||null},e.prototype.normalizeInstanceIdentifier=function(e){return this.component?this.component.multipleInstances?e:a:e},e}();var u=function(){function e(e){this.name=e,this.providers=new Map}return e.prototype.addComponent=function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component "+e.name+" has already been registered with "+this.name);t.setComponent(e)},e.prototype.addOrOverwriteComponent=function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)},e.prototype.getProvider=function(e){if(this.providers.has(e))return this.providers.get(e);var t=new s(e,this);return this.providers.set(e,t),t},e.prototype.getProviders=function(){return Array.from(this.providers.values())},e}();t.Component=o,t.ComponentContainer=u,t.Provider=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i,o=n(0),a=n(1),s=n(2),u=n(6),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r),l=new a.ErrorFactory("app","Firebase",c),h="@firebase/app",d="0.5.0",f="[DEFAULT]",p=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),m=new u.Logger("@firebase/app"),g=function(){function e(e,t,n){var r,i,u=this;this.firebase_=n,this.isDeleted_=!1,this.name_=t.name,this.automaticDataCollectionEnabled_=t.automaticDataCollectionEnabled||!1,this.options_=a.deepCopy(e),this.container=new s.ComponentContainer(t.name),this._addComponent(new s.Component("app",(function(){return u}),"PUBLIC"));try{for(var c=o.__values(this.firebase_.INTERNAL.components.values()),l=c.next();!l.done;l=c.next()){var h=l.value;this._addComponent(h)}}catch(e){r={error:e}}finally{try{l&&!l.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}}return Object.defineProperty(e.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(e){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!0,configurable:!0}),e.prototype.delete=function(){var e=this;return new Promise((function(t){e.checkDestroyed_(),t()})).then((function(){return e.firebase_.INTERNAL.removeApp(e.name_),Promise.all(e.container.getProviders().map((function(e){return e.delete()})))})).then((function(){e.isDeleted_=!0}))},e.prototype._getService=function(e,t){return void 0===t&&(t=f),this.checkDestroyed_(),this.container.getProvider(e).getImmediate({identifier:t})},e.prototype._removeServiceInstance=function(e,t){void 0===t&&(t=f),this.container.getProvider(e).clearInstance(t)},e.prototype._addComponent=function(e){try{this.container.addComponent(e)}catch(t){m.debug("Component "+e.name+" failed to register with FirebaseApp "+this.name,t)}},e.prototype._addOrOverwriteComponent=function(e){this.container.addOrOverwriteComponent(e)},e.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},e}();g.prototype.name&&g.prototype.options||g.prototype.delete||console.log("dc");var y="7.6.0";
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var v=
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function e(){var t=function(e){var t={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={});if("object"!=typeof i||null===i){i={name:i}}var o=i;void 0===o.name&&(o.name=f);var s=o.name;if("string"!=typeof s||!s)throw l.create("bad-app-name",{appName:String(s)});if(a.contains(t,s))throw l.create("duplicate-app",{appName:s});var u=new e(n,o,r);return t[s]=u,u},app:i,registerVersion:function(e,t,n){var r,i=null!==(r=p[e])&&void 0!==r?r:e;n&&(i+="-"+n);var o=i.match(/\s|\//),a=t.match(/\s|\//);if(o||a){var c=['Unable to register library "'+i+'" with version "'+t+'":'];return o&&c.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),o&&a&&c.push("and"),a&&c.push('version name "'+t+'" contains illegal characters (whitespace or "/")'),void m.warn(c.join(" "))}u(new s.Component(i+"-version",(function(){return{library:i,version:t}}),"VERSION"))},apps:null,SDK_VERSION:y,INTERNAL:{registerComponent:u,removeApp:function(e){delete t[e]},components:n,useAsService:function(e,t){if("serverAuth"===t)return null;return t}}};function i(e){if(e=e||f,!a.contains(t,e))throw l.create("no-app",{appName:e});return t[e]}function u(s){var u,c,h=s.name;if(n.has(h))return m.debug("There were multiple attempts to register component "+h+"."),"PUBLIC"===s.type?r[h]:null;if(n.set(h,s),"PUBLIC"===s.type){var d=function(e){if(void 0===e&&(e=i()),"function"!=typeof e[h])throw l.create("invalid-app-argument",{appName:h});return e[h]()};void 0!==s.serviceProps&&a.deepExtend(d,s.serviceProps),r[h]=d,e.prototype[h]=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this._getService.bind(this,h);return n.apply(this,s.multipleInstances?e:[])}}try{for(var f=o.__values(Object.keys(t)),p=f.next();!p.done;p=f.next()){var g=p.value;t[g]._addComponent(s)}}catch(e){u={error:e}}finally{try{p&&!p.done&&(c=f.return)&&c.call(f)}finally{if(u)throw u.error}}return"PUBLIC"===s.type?r[h]:null}return(r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(t).map((function(e){return t[e]}))}}),i.App=e,r)}(g);return t.INTERNAL=o.__assign(o.__assign({},t.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){a.deepExtend(t,e)},createSubscribe:a.createSubscribe,ErrorFactory:a.ErrorFactory,deepExtend:a.deepExtend}),t}(),b=function(){function e(e){this.container=e}return e.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(e){if(function(e){var t,n=e.getComponent();return"VERSION"===(null===(t=n)||void 0===t?void 0:t.type)}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e)){var t=e.getImmediate();return t.library+"/"+t.version}return null})).filter((function(e){return e})).join(" ")},e}();
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
if(a.isBrowser()&&void 0!==self.firebase){m.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var w=self.firebase.SDK_VERSION;w&&w.indexOf("LITE")>=0&&m.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var T=v.initializeApp;v.initializeApp=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return a.isNode()&&m.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the rollup-plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/rollup-plugin-node-resolve\n      '),T.apply(void 0,e)};var S=v;!function(e,t){e.INTERNAL.registerComponent(new s.Component("platform-logger",(function(e){return new b(e)}),"PRIVATE")),e.registerVersion(h,d,t),e.registerVersion("fire-js","")}(S),t.default=S,t.firebase=S},function(e,t,n){"use strict";var r,i=(r=n(3))&&"object"==typeof r&&"default"in r?r.default:r;
/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
i.registerVersion("firebase","7.6.1","app"),e.exports=i},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
function r(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */n.r(t),n.d(t,"LogLevel",(function(){return i})),n.d(t,"Logger",(function(){return u})),n.d(t,"setLogLevel",(function(){return c}));var i,o=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(i||(i={}));var a=i.INFO,s=function(e,t){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];if(!(t<e.logLevel)){var a=(new Date).toISOString();switch(t){case i.DEBUG:case i.VERBOSE:console.log.apply(console,r(["["+a+"]  "+e.name+":"],n));break;case i.INFO:console.info.apply(console,r(["["+a+"]  "+e.name+":"],n));break;case i.WARN:console.warn.apply(console,r(["["+a+"]  "+e.name+":"],n));break;case i.ERROR:console.error.apply(console,r(["["+a+"]  "+e.name+":"],n));break;default:throw new Error("Attempted to log a message with an invalid logType (value: "+t+")")}}},u=function(){function e(e){this.name=e,this._logLevel=a,this._logHandler=s,o.push(this)}return Object.defineProperty(e.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){if(!(e in i))throw new TypeError("Invalid value assigned to `logLevel`");this._logLevel=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"logHandler",{get:function(){return this._logHandler},set:function(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e},enumerable:!0,configurable:!0}),e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,r([this,i.DEBUG],e))},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,r([this,i.VERBOSE],e))},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,r([this,i.INFO],e))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,r([this,i.WARN],e))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,r([this,i.ERROR],e))},e}();
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function c(e){o.forEach((function(t){t.logLevel=e}))}},function(e,t,n){!function(e){"use strict";function t(e){return Array.prototype.slice.call(e)}function n(e){return new Promise((function(t,n){e.onsuccess=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function r(e,t,r){var i,o=new Promise((function(o,a){n(i=e[t].apply(e,r)).then(o,a)}));return o.request=i,o}function i(e,t,n){var i=r(e,t,n);return i.then((function(e){if(e)return new l(e,i.request)}))}function o(e,t,n){n.forEach((function(n){Object.defineProperty(e.prototype,n,{get:function(){return this[t][n]},set:function(e){this[t][n]=e}})}))}function a(e,t,n,i){i.forEach((function(i){i in n.prototype&&(e.prototype[i]=function(){return r(this[t],i,arguments)})}))}function s(e,t,n,r){r.forEach((function(r){r in n.prototype&&(e.prototype[r]=function(){return this[t][r].apply(this[t],arguments)})}))}function u(e,t,n,r){r.forEach((function(r){r in n.prototype&&(e.prototype[r]=function(){return i(this[t],r,arguments)})}))}function c(e){this._index=e}function l(e,t){this._cursor=e,this._request=t}function h(e){this._store=e}function d(e){this._tx=e,this.complete=new Promise((function(t,n){e.oncomplete=function(){t()},e.onerror=function(){n(e.error)},e.onabort=function(){n(e.error)}}))}function f(e,t,n){this._db=e,this.oldVersion=t,this.transaction=new d(n)}function p(e){this._db=e}o(c,"_index",["name","keyPath","multiEntry","unique"]),a(c,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),u(c,"_index",IDBIndex,["openCursor","openKeyCursor"]),o(l,"_cursor",["direction","key","primaryKey","value"]),a(l,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach((function(e){e in IDBCursor.prototype&&(l.prototype[e]=function(){var t=this,r=arguments;return Promise.resolve().then((function(){return t._cursor[e].apply(t._cursor,r),n(t._request).then((function(e){if(e)return new l(e,t._request)}))}))})})),h.prototype.createIndex=function(){return new c(this._store.createIndex.apply(this._store,arguments))},h.prototype.index=function(){return new c(this._store.index.apply(this._store,arguments))},o(h,"_store",["name","keyPath","indexNames","autoIncrement"]),a(h,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),u(h,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),s(h,"_store",IDBObjectStore,["deleteIndex"]),d.prototype.objectStore=function(){return new h(this._tx.objectStore.apply(this._tx,arguments))},o(d,"_tx",["objectStoreNames","mode"]),s(d,"_tx",IDBTransaction,["abort"]),f.prototype.createObjectStore=function(){return new h(this._db.createObjectStore.apply(this._db,arguments))},o(f,"_db",["name","version","objectStoreNames"]),s(f,"_db",IDBDatabase,["deleteObjectStore","close"]),p.prototype.transaction=function(){return new d(this._db.transaction.apply(this._db,arguments))},o(p,"_db",["name","version","objectStoreNames"]),s(p,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach((function(e){[h,c].forEach((function(n){e in n.prototype&&(n.prototype[e.replace("open","iterate")]=function(){var n=t(arguments),r=n[n.length-1],i=this._store||this._index,o=i[e].apply(i,n.slice(0,-1));o.onsuccess=function(){r(o.result)}})}))})),[c,h].forEach((function(e){e.prototype.getAll||(e.prototype.getAll=function(e,t){var n=this,r=[];return new Promise((function(i){n.iterateCursor(e,(function(e){e?(r.push(e.value),void 0===t||r.length!=t?e.continue():i(r)):i(r)}))}))})})),e.openDb=function(e,t,n){var i=r(indexedDB,"open",[e,t]),o=i.request;return o&&(o.onupgradeneeded=function(e){n&&n(new f(o.result,e.oldVersion,o.transaction))}),i.then((function(e){return new p(e)}))},e.deleteDb=function(e){return r(indexedDB,"deleteDatabase",[e])},Object.defineProperty(e,"__esModule",{value:!0})}(t)},function(e,t,n){var r=n(9),i=n(10);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var o={insert:"head",singleton:!1};r(i,o);e.exports=i.locals||{}},function(e,t,n){"use strict";var r,i=function(){return void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r},o=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),a=[];function s(e){for(var t=-1,n=0;n<a.length;n++)if(a[n].identifier===e){t=n;break}return t}function u(e,t){for(var n={},r=[],i=0;i<e.length;i++){var o=e[i],u=t.base?o[0]+t.base:o[0],c=n[u]||0,l="".concat(u," ").concat(c);n[u]=c+1;var h=s(l),d={css:o[1],media:o[2],sourceMap:o[3]};-1!==h?(a[h].references++,a[h].updater(d)):a.push({identifier:l,updater:g(d,t),references:1}),r.push(l)}return r}function c(e){var t=document.createElement("style"),r=e.attributes||{};if(void 0===r.nonce){var i=n.nc;i&&(r.nonce=i)}if(Object.keys(r).forEach((function(e){t.setAttribute(e,r[e])})),"function"==typeof e.insert)e.insert(t);else{var a=o(e.insert||"head");if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(t)}return t}var l,h=(l=[],function(e,t){return l[e]=t,l.filter(Boolean).join("\n")});function d(e,t,n,r){var i=n?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(e.styleSheet)e.styleSheet.cssText=h(t,i);else{var o=document.createTextNode(i),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(o,a[t]):e.appendChild(o)}}function f(e,t,n){var r=n.css,i=n.media,o=n.sourceMap;if(i?e.setAttribute("media",i):e.removeAttribute("media"),o&&btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}var p=null,m=0;function g(e,t){var n,r,i;if(t.singleton){var o=m++;n=p||(p=c(t)),r=d.bind(null,n,o,!1),i=d.bind(null,n,o,!0)}else n=c(t),r=f.bind(null,n,t),i=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else i()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=i());var n=u(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var r=0;r<n.length;r++){var i=s(n[r]);a[i].references--}for(var o=u(e,t),c=0;c<n.length;c++){var l=s(n[c]);0===a[l].references&&(a[l].updater(),a.splice(l,1))}n=o}}}},function(e,t,n){var r=n(11),i=n(12),o=n(13),a=n(14),s=n(15);t=r(!1);var u=i(o),c=i(a),l=i(s);t.push([e.i,'.mainPanel{display:flex;position:absolute;background-color:rgba(246,246,246,.9);transition:right 1s,bottom 1s;--width: 250px;--height: 200px}.mainPanel.right{height:100%;width:var(--width);top:0;right:calc(var(--width) * -1)}.mainPanel.bottom{flex-direction:column;height:var(--height);width:100%;bottom:calc(var(--height) * -1)}.mainPanel.right>.panel-content{width:100%}.mainPanel.bottom>.panel-content{display:flex;height:100%}.mainPanel.right.open{right:0}.mainPanel.bottom.open{bottom:0}.mainPanel>.panel-grip{background:#2a8fb1}.mainPanel.right>.panel-grip{display:flex;align-items:center;padding:0 5px;cursor:col-resize}.mainPanel.bottom>.panel-grip{padding:5px 0;cursor:row-resize}.mainPanel>.panel-grip::before{content:"";display:block}.mainPanel.right>.panel-grip::before{height:27px;border-right:3px double #fff}.mainPanel.bottom>.panel-grip::before{width:27px;border-top:3px double #fff;margin:auto}.mainPanel>.panel-content>.panel-header{display:flex;justify-content:space-around;align-items:center;text-align:center}.mainPanel.bottom>.panel-content>.panel-header{flex-direction:column}.mainPanel>.panel-content>.panel-header>span{padding:.2rem;flex-grow:1}.mainPanel.bottom>.panel-content>.panel-header>span{width:35px;writing-mode:vertical-rl;-webkit-writing-mode:vertical-rl}.mainPanel>.panel-content>.panel-header>span:not(.active){cursor:pointer;background-color:#e4e4e4}.mainPanel.right>.panel-content>.panel-header>span:not(.active){border-bottom:1px solid #a6a6a6}.mainPanel.bottom>.panel-content>.panel-header>span:not(.active){border-right:1px solid #a6a6a6}.mainPanel.right>.panel-content>.panel-header>span:not(:last-child){border-right:1px solid #a6a6a6}.mainPanel.bottom>.panel-content>.panel-header>span:not(:last-child){border-bottom:1px solid #a6a6a6}.mainPanel>.panel-content>.panel-body{flex-grow:1;padding:.5rem}.mainPanel>.panel-content>.panel-body>.hidden{display:none}#projectsListContainer{height:100%;width:100%;position:absolute;background-color:#fff}#projectsListContainer>div:first-child{display:flex;justify-content:space-between;padding:1rem}#projectsListContainer>div:first-child>span{width:20%}@media(max-width: 500px){#closeProjectsListBtn{display:none}}#closeProjectsListBtn{float:right}#projectsListContainer>div:first-child>h4{overflow-x:hidden;font-weight:normal;font-size:1.6rem}#projectsList{display:flex;flex-wrap:wrap;margin-left:1rem;--items-h: 6;--item-width: calc((100% / var(--items-h)) - 1rem);--remaining-items: unset}@media(max-width: 1000px){#projectsList{--items-h: 5}}@media(max-width: 800px){#projectsList{--items-h: 4}}@media(max-width: 600px){#projectsList{--items-h: 3}}@media(max-width: 400px){#projectsList{--items-h: 2}}@media(max-width: 280px){#projectsList{--items-h: 1}}#projectsList::after{content:"";flex-grow:var(--remaining-items);width:calc((var(--item-width) + 1rem) * var(--remaining-items))}#projectsList>.empty-msg{width:100%;margin-top:3rem;margin-bottom:3rem;text-align:center}.projectItem{flex-grow:1;width:var(--item-width);margin-bottom:1rem;margin-right:1rem;position:relative;cursor:pointer;font-family:inherit;box-shadow:2px 2px 7px #b2b2b2}.projectItem>h4{background-color:#f9f9f9}.projectItem.current{cursor:auto;outline:4px solid #7da5b6;box-shadow:none}.projectItem.unsync{opacity:.5}.projectItem:not(.current):hover{box-shadow:2px 2px 7px #6b6b6b}.projectItem>.sharedIcon{position:absolute;width:30px;height:30px;right:6px;top:6px;background-color:#eee;padding:5px;border-radius:50%}.projectItem>.thumb{display:block;width:100%;height:150px;object-fit:cover}.projectItem>h4{padding:.6rem;font-weight:normal}#loadMoreProjBtn{display:block;margin:auto}#modalDialogContainer{justify-content:center;align-items:center;position:absolute;top:0;right:0;bottom:0;left:0}#modalDialogContainer>div{padding:1rem;background-color:#fff}#modalDialogContainer.grayTranslucent{background-color:rgba(216,216,216,.8)}#modalDialogContainer.lightOpaque{background-color:#fff}#closeModalBtn{float:right}#modalDialogContainer .modal-main-btns{display:flex;align-items:flex-end;justify-content:flex-end;margin-top:.3rem}#modalDialogContainer .modal-main-btns>button:not(:first-child){margin-left:.5rem}#loginPage{flex-direction:column;justify-content:center;align-items:center;position:absolute;top:0;right:0;bottom:0;left:0;z-index:100;background-color:#fff}#loginPage>.login-buttons{position:absolute;right:10px;top:10px}#loginPage>.main-title{margin-top:1.4rem;margin-bottom:2rem;font-size:2rem;font-weight:500}#tryItBtn{padding:1rem;border-style:none;font-size:2rem;font-family:sans-serif;box-shadow:0px 0px 8px rgba(0,0,0,.6);cursor:pointer}#uploadFileForm{display:flex;flex-direction:column;min-width:200px;padding:1rem;background-color:#fff}#uploadFileForm>input{font-family:inherit}#uploadFileForm>label{margin-top:1rem;text-align:center;cursor:pointer;font-size:.9rem}#uploadFileForm>button:last-child{margin-top:.5rem}#loadingFile{padding:1rem;text-align:center}#sideNavContainer{display:flex;flex-direction:column;position:absolute;height:100vh;width:314px;top:0;right:0;z-index:999;transform:translateX(314px);background-color:#fff}#sideNavContainer.active{transform:translateX(0)}.side-nav-header{padding-right:1rem;padding-left:1rem}#user-info{display:flex;align-items:flex-end;margin-top:var(--header-height)}#user-info>img{margin-right:.6rem}#user-info>span{overflow-x:hidden}#user-info>span>span{display:block}#user-info .email{font-weight:lighter}.side-nav-body{display:flex;flex-direction:column;align-items:center;flex-grow:1;padding:1rem;text-align:center}.side-nav-body button{width:80%}.side-nav-body>.side-nav-section{width:100%;padding-bottom:1rem}.side-nav-body>.side-nav-section.grow{flex-grow:1}#sideNavToggle{width:24px;height:24px;margin:.4rem;cursor:pointer;border-style:none;background-image:url('+u+");background-repeat:no-repeat;background-position:center}#sideNavToggle.active{background-image:url("+c+')}#sideNavContainer+.side-nav-shade{position:absolute;z-index:10;background-color:#000;width:100%;height:100vh;top:0;opacity:0;left:100%;transition:opacity .25s ease-out,left 0s linear .25s}#sideNavContainer.active+.side-nav-shade{opacity:.7;left:0;transition:opacity .25s ease-out,left 0s linear}.side-nav-footer{padding:1rem;font-weight:lighter}#commentForm>.inputs{margin-bottom:.8rem}#commentForm>.inputs>textarea{width:100%;min-height:150px}#commentForm.horizontal{display:flex}#commentForm.horizontal>.inputs{flex-grow:1}#commentForm.horizontal>.inputs>textarea{min-height:60px}#commentForm>.inputs>.members{margin-top:.5rem}#commentForm>.inputs>.members.hidden{display:none}#commentForm>.inputs>.members>p:first-child{font-weight:lighter;margin-bottom:.2rem}#commentForm>.inputs>.members>select{width:100%}#commentForm .info{margin-top:.1rem;font-size:.7rem;font-weight:lighter}#commentForm>.formButtonsModes>.buttonsContainer{display:flex;justify-content:space-between}#commentForm.horizontal>.formButtonsModes{margin-left:.5rem}#commentForm.horizontal>.formButtonsModes>.buttonsContainer{flex-direction:column}#commentForm.horizontal>.formButtonsModes>.buttonsContainer>button{height:50px}#commentForm.horizontal>.formButtonsModes>.buttonsContainer>button:first-child{margin-top:.6rem;order:1}#shareProjectDialog{display:flex;flex-direction:column;position:relative;min-height:350px;min-width:400px;background-color:#fff}#shareProjectDialog .table-wrapper{margin-top:.5rem;margin-bottom:1rem;background-color:#f1f1f1}#shareProjectDialog .table-wrapper.fixed-height{height:100px;overflow-y:auto}#shareProjectDialog .table-wrapper>table{width:100%;border-collapse:collapse;background-color:#eee}#shareProjectDialog .table-wrapper>.empty-msg{display:none;height:100%;align-items:center;justify-content:center;padding:1rem}#shareProjectDialog>.users-container.empty .empty-msg{display:flex}#shareProjectDialog>.users-container.empty table{display:none}#shareProjectDialog>.users-container.hidden{visibility:hidden}#shareProjectDialog td:last-child{width:40px;text-align:center}#shareProjectDialog td:last-child>svg{width:12px;height:12px}#shareProjectDialog td.action-btn{cursor:pointer}#shareProjectDialog td.action-btn:hover{background-color:#dbdbdb}#shareProjectDialog tr{border-bottom:2px solid #fff}#shareProjectDialog tr.to-delete>td:first-child{opacity:.4}#shareProjectDialog td.user-data>img{float:left;height:64px;width:64px;margin-right:.5rem}#shareProjectDialog td.user-data>div{display:flex;height:64px;padding:.4rem;flex-direction:column;justify-content:space-around}#shareProjectDialog td.user-data>div>span:nth-child(2){font-weight:lighter}#shareProjectDialog>.pending-users td.user-data{padding:.4rem}#shareProjectDialog>form>label{display:block}#shareProjectDialog>form>div{display:flex}#shareProjectDialog>form input{flex-grow:1}#shareProjectDialog>form button{width:60px}#shareProjectDialog>.loader-container{display:flex;align-items:center;justify-content:center;position:absolute;width:100%;height:100%;top:0;left:0;background-color:rgba(255,255,255,.7)}#shareProjectDialog>.loader-container.hidden{display:none}#shareProjectDialog .share-notification{position:absolute;bottom:0}#shareProjectDialog .share-notification.hidden{visibility:hidden}div#propsTablesContainer{display:flex}.mainPanel.right div#propsTablesContainer{flex-direction:column}.data-table{text-align:left;width:100%}.data-table>thead th{padding-left:.3rem;padding-right:.3rem;background-color:#ddd}.data-table>tbody th{width:50%;font-weight:normal}.data-table td{font-weight:lighter}#messageContainer{position:absolute;padding:1rem;max-width:300px;flex-direction:column;align-items:flex-end;bottom:2rem;right:2rem;box-shadow:2px 2px 6px #b2b2b2}#messageContainer>button{margin-bottom:.5rem}#messageContainer>button>img{width:1rem}#messageContainer.success{background-color:#aef5ad}#messageContainer.error{background-color:#dc9393}#messageContainer.warning{background-color:#ecdaa4}#viewportMessage{display:none;position:absolute;width:100%;height:100%;top:0;justify-content:center;align-items:center;text-align:center;font-weight:lighter;background-color:rgba(255,255,255,.95)}#viewportMessage.active{display:flex}#viewportMessage p{padding-bottom:1rem}#viewportMessage .btns-container{display:flex;justify-content:space-around}#notificationsContainer{display:none;position:absolute;width:450px;top:calc(var(--header-height) + 1rem);right:1rem;opacity:0;transition:opacity .2s ease-in;background-color:#f6f6f6;box-shadow:0 0 12px rgba(0,0,0,.2)}#notificationsContainer>.empty-msg{display:none;padding:2rem .8rem;text-align:center}#notificationsContainer.open{display:unset;opacity:1}#notificationsContainer.empty>.notifications-body{display:none}#notificationsContainer.empty>.empty-msg{display:block}.notifications-header{padding:.8rem;background-color:#fbfbfb;border-bottom:2px solid #dbdbdb}.notifications-body{max-height:350px;overflow:auto}.notifications-body>li{display:flex;padding:.8rem;cursor:pointer;border-bottom:1px solid #dbdbdb}.notifications-body>li.pending{background-color:#cbeaf5}.notifications-body>li.pending:hover{background-color:#c2e0ea}.notifications-body>li:hover{background-color:#eaeaea}.notification-thumb{height:50px;margin-right:1rem}.notification-content>h4{margin-bottom:.2rem;font-weight:500}.notification-content>p{font-weight:lighter}#contextMenu{width:120px;position:absolute;padding-top:.5rem;background-color:#fff;box-shadow:2px 2px 7px rgba(0,0,0,.2)}#contextMenu>ul>li{padding:.6rem;cursor:pointer}#contextMenu>ul>li:hover{background-color:rgba(0,0,0,.2)}.selected{--fill: #ffbd00;--stroke: #e89807;--stroke-w: 8px}.selected.fill.stroke>path,.selected.fill.stroke>polygon,.selected.fill.stroke>circle,.selected.fill.stroke>rect{fill:var(--fill);stroke:var(--stroke);stroke-width:var(--stroke-w)}.selected.stroke>path,.selected.stroke>polyline,.selected.stroke>line{stroke:var(--stroke);stroke-width:var(--stroke-w)}.selected.fill>path,.selected.fill>polygon,.selected.fill>circle{fill:var(--fill)}.selected.stroke>.hatch>line{stroke:var(--stroke);stroke-width:var(--stroke-w)}:root{--header-height: 2.5rem;--theme-blue: #2a8fb1;--theme-yellow: #ea8c15}*,*::before,*::after{box-sizing:border-box}h1,h2,h3,h4,h5,p{margin-top:0;margin-bottom:0}ul,ol{list-style-type:none;margin-top:0;margin-bottom:0;padding-left:0}button{border-style:none;padding:0;background-color:unset}body{display:flex;flex-direction:column;margin:0;overflow:hidden;color:#545454;font-family:"Oswald",sans-serif}svg.svg-loader{width:130px;height:90px}.buttonBase{padding:.4rem;cursor:pointer;border-width:1px;border-style:solid;font-family:inherit}.buttonBase.sides{border-top-style:none;border-bottom-style:none}.buttonBase.light{color:#373737;border-color:#cfcfcf}.buttonBase.light:not(.disabled):hover{background-color:#ececec}.buttonBase.emphasize{border-color:#e0e0e0;background-color:#d1f0ec}.buttonBase.emphasize:not(.disabled):hover{background-color:#acd3ce}.buttonBase.danger{color:#f55252;border-color:#fba4a4}.buttonBase.danger:not(.disabled):hover{background-color:#ffe9e9}.buttonBase.disabled{cursor:unset;opacity:.5}button.disabled:focus{outline-style:none}.buttonBase.locked{cursor:unset}.buttonBase.locked:hover{background-color:unset}.icon-btn{cursor:pointer}header .icon-btn{padding:calc(((var(--header-height) - 2px) - 24px) / 2);height:calc(var(--header-height) - 2px);width:calc(var(--header-height) - 2px)}.icon-btn:not(.disabled):not(.btn-tool-enabled):hover{background-color:#ececec}.icon-btn>svg{display:block;width:24px;height:24px}.icon-btn.disabled{opacity:.1;cursor:auto}.icon-btn.hidden{display:none}.btn-tool-enabled{background-color:#96cbdb}.btn-bg-img{padding-left:2.4rem;background-repeat:no-repeat;background-position-y:center;background-position-x:.8rem}.google-logo{background-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHZpZXdCb3g9IjAgMCAxOCAxOCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48dGl0bGU+c3VwZXIgZzwvdGl0bGU+PGcgZmlsbC1ydWxlPSJldmVub2RkIj48cGF0aCBkPSJNOSAzLjQ4YzEuNjkgMCAyLjgzLjczIDMuNDggMS4zNGwyLjU0LTIuNDhDMTMuNDYuODkgMTEuNDMgMCA5IDAgNS40OCAwIDIuNDQgMi4wMi45NiA0Ljk2bDIuOTEgMi4yNkM0LjYgNS4wNSA2LjYyIDMuNDggOSAzLjQ4eiIgZmlsbD0iI0VBNDMzNSIvPjxwYXRoIGQ9Ik0xNy42NCA5LjJjMC0uNzQtLjA2LTEuMjgtLjE5LTEuODRIOXYzLjM0aDQuOTZjLS4xLjgzLS42NCAyLjA4LTEuODQgMi45MmwyLjg0IDIuMmMxLjctMS41NyAyLjY4LTMuODggMi42OC02LjYyeiIgZmlsbD0iIzQyODVGNCIvPjxwYXRoIGQ9Ik0zLjg4IDEwLjc4QTUuNTQgNS41NCAwIDAgMSAzLjU4IDljMC0uNjIuMTEtMS4yMi4yOS0xLjc4TC45NiA0Ljk2QTkuMDA4IDkuMDA4IDAgMCAwIDAgOWMwIDEuNDUuMzUgMi44Mi45NiA0LjA0bDIuOTItMi4yNnoiIGZpbGw9IiNGQkJDMDUiLz48cGF0aCBkPSJNOSAxOGMyLjQzIDAgNC40Ny0uOCA1Ljk2LTIuMThsLTIuODQtMi4yYy0uNzYuNTMtMS43OC45LTMuMTIuOS0yLjM4IDAtNC40LTEuNTctNS4xMi0zLjc0TC45NyAxMy4wNEMyLjQ1IDE1Ljk4IDUuNDggMTggOSAxOHoiIGZpbGw9IiMzNEE4NTMiLz48cGF0aCBmaWxsPSJub25lIiBkPSJNMCAwaDE4djE4SDB6Ii8+PC9nPjwvc3ZnPg==)}#saveBtn.enabled>svg,#notificationBtn.enabled>svg{fill:var(--theme-yellow);transform:scale(1.2)}#saveBtn>svg.progress-icon{display:none}#saveBtn.progress:hover{cursor:auto;background-color:unset}#saveBtn.progress>svg.save-icon{display:none}#saveBtn.progress>svg.progress-icon{display:block}header{height:var(--header-height);padding-right:8rem;align-items:stretch;z-index:1;background-color:#f6f6f6;border-bottom:2px solid var(--theme-blue)}header>span:first-child{width:4rem}header>span:first-child>img{height:100%;padding:.3rem;margin:auto;display:block}header>h1{position:absolute;right:100%}#projectsListBtn{min-width:10rem;font-size:1rem;font-weight:normal}#projectsListBtn>span{display:inline-block;width:100%;text-align:center}@media(max-width: 500px){#projectsListBtn{display:unset;min-width:unset;width:2.5rem;font-size:0;border-left-style:none;background-repeat:no-repeat;background-position:center;background-image:url('+l+");background-size:24px}}#toolbarsContainer{flex-grow:1;justify-content:flex-end}#drawingsBtns{min-width:8rem;text-align:center}#drawingsBtns>button{height:calc(var(--header-height) - 2px);width:100%;border-left-style:none}#drawingsBtns>ul{font-size:.9rem;font-weight:lighter;cursor:pointer;background-color:#f6f6f6;box-shadow:0px 2px 5px #b6b6b6}#drawingsBtns>ul>li{padding:.4rem}#drawingsBtns>ul>li.active{background-color:#c2c2c2;cursor:auto}#drawingsBtns>ul>li:not(.active):hover{background-color:#dfdfdf}.global-nav-btns{display:flex;position:absolute;top:0;right:0;z-index:1000;border-left:1px solid #c8c8c8}@media(max-width: 500px){header{order:1;border-top:2px solid var(--theme-blue);border-bottom:unset}header>span:first-child{display:none}#toolbarsContainer{position:absolute;right:0}#drawingsBtns>ul{box-shadow:0px -2px 7px #b6b6b6}}.dropdown-container{z-index:1;position:relative}.dropdown-container>.dropdown-content{display:flex;flex-direction:column;transition:.6s;transform:translateY(-100%);opacity:0;z-index:-1;position:absolute;right:0;left:0;top:calc(var(--header-height) - 2px)}.dropdown-container.responsive>.dropdown-content{display:inline;opacity:unset;z-index:unset;position:unset}@media(max-width: 800px){.dropdown-container.responsive>.dropdown-content{display:flex;opacity:0;z-index:-1;position:absolute}}.dropdown-container.open>.dropdown-content{transform:translateY(0%);opacity:1}@media(max-width: 500px){.dropdown-container>.dropdown-content{transform:unset}.dropdown-container.open>.dropdown-content{transform:translateY(calc(-100% - 2.5rem + 2px))}}main{position:relative;height:calc(100vh - var(--header-height))}#workspaces{height:100%}.workspace{height:100%}form .top-label{margin-bottom:.5rem}form .base-input{padding:.4rem}form .error-msg{font-size:.9rem;font-weight:lighter;color:red}form .error-msg.hidden{visibility:hidden}#renameProjectForm .rename-form-content{display:flex;width:100%;flex-direction:column}.drawingsContainer{height:100%}.drawingsContainer>div{height:100%}.drawingsContainer>div>svg{height:100%;width:100%}@media all and (display-mode: standalone){header{border-top:1px solid #dedede}}",""]),e.exports=t},function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n=e[1]||"",r=e[3];if(!r)return n;if(t&&"function"==typeof btoa){var i=(a=r,s=btoa(unescape(encodeURIComponent(JSON.stringify(a)))),u="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(s),"/*# ".concat(u," */")),o=r.sources.map((function(e){return"/*# sourceURL=".concat(r.sourceRoot||"").concat(e," */")}));return[n].concat(o).concat([i]).join("\n")}var a,s,u;return[n].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,r){"string"==typeof e&&(e=[[null,e,""]]);var i={};if(r)for(var o=0;o<this.length;o++){var a=this[o][0];null!=a&&(i[a]=!0)}for(var s=0;s<e.length;s++){var u=[].concat(e[s]);r&&i[u[0]]||(n&&(u[2]?u[2]="".concat(n," and ").concat(u[2]):u[2]=n),t.push(u))}},t}},function(e,t,n){"use strict";e.exports=function(e,t){return t||(t={}),"string"!=typeof(e=e&&e.__esModule?e.default:e)?e:(/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]/.test(e)||t.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e)}},function(e,t,n){"use strict";n.r(t),t.default=n.p+"6a516ff5fac28139a5f05c592974ad7a.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"e2684d217a882ae02c861b7fc5314e72.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"699485ad424f68ff9068a111deaba047.svg"},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r,i,o=(r=n(3))&&"object"==typeof r&&"default"in r?r.default:r,a=n(0),s=n(6),u=n(1),c=n(2),l=n(18),h=o.SDK_VERSION,d=new s.Logger("@firebase/firestore");function f(){return d.logLevel===s.LogLevel.DEBUG?i.DEBUG:d.logLevel===s.LogLevel.SILENT?i.SILENT:i.ERROR}function p(e){switch(e){case i.DEBUG:d.logLevel=s.LogLevel.DEBUG;break;case i.ERROR:d.logLevel=s.LogLevel.ERROR;break;case i.SILENT:d.logLevel=s.LogLevel.SILENT;break;default:d.error("Firestore ("+h+"): Invalid value passed to `setLogLevel`")}}function m(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(d.logLevel<=s.LogLevel.DEBUG){var i=n.map(y);d.debug.apply(d,a.__spreadArrays(["Firestore ("+h+") ["+e+"]: "+t],i))}}function g(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(d.logLevel<=s.LogLevel.ERROR){var r=t.map(y);d.error.apply(d,a.__spreadArrays(["Firestore ("+h+"): "+e],r))}}function y(e){if("string"==typeof e)return e;var t=w.getPlatform();try{return t.formatJSON(e)}catch(t){return e}}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v(e){var t="FIRESTORE ("+h+") INTERNAL ASSERTION FAILED: "+e;throw g(t),new Error(t)}function b(e,t){e||v(t)}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */!function(e){e[e.DEBUG=0]="DEBUG",e[e.ERROR=1]="ERROR",e[e.SILENT=2]="SILENT"}(i||(i={}));var w=function(){function e(){}return e.setPlatform=function(t){e.platform&&v("Platform already defined"),e.platform=t},e.getPlatform=function(){return e.platform||v("Platform not set"),e.platform},e}();function T(){return w.getPlatform().emptyByteString}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var S={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},I=function(e){function t(t,n){var r=e.call(this,n)||this;return r.code=t,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return a.__extends(t,e),t}(Error);
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function E(e,t){function n(){var e="This constructor is private.";throw t&&(e+=" ",e+=t),new I(S.INVALID_ARGUMENT,e)}for(var r in n.prototype=e.prototype,e)e.hasOwnProperty(r)&&(n[r]=e[r]);return n}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function _(e,t){return void 0!==e?e:t}function D(e,t){for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Number(n);isNaN(r)||t(r,e[n])}}function k(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function N(e){for(var t in b(null!=e&&"object"==typeof e,"isEmpty() expects object parameter."),e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function A(e,t){if(0!==t.length)throw new I(S.INVALID_ARGUMENT,"Function "+e+"() does not support arguments, but was called with "+Y(t.length,"argument")+".")}function x(e,t,n){if(t.length!==n)throw new I(S.INVALID_ARGUMENT,"Function "+e+"() requires "+Y(n,"argument")+", but was called with "+Y(t.length,"argument")+".")}function M(e,t,n){if(t.length<n)throw new I(S.INVALID_ARGUMENT,"Function "+e+"() requires at least "+Y(n,"argument")+", but was called with "+Y(t.length,"argument")+".")}function L(e,t,n,r){if(t.length<n||t.length>r)throw new I(S.INVALID_ARGUMENT,"Function "+e+"() requires between "+n+" and "+r+" arguments, but was called with "+Y(t.length,"argument")+".")}function P(e,t,n,r){q(e,t,H(n)+" argument",r)}function O(e,t,n,r){void 0!==r&&P(e,t,n,r)}function R(e,t,n,r){q(e,t,n+" option",r)}function j(e,t,n,r){void 0!==r&&R(e,t,n,r)}function B(e,t,n,r,i){void 0!==r&&function(e,t,n,r,i){if(!(r instanceof Array))throw new I(S.INVALID_ARGUMENT,"Function "+e+"() requires its "+t+" option to be an array, but it was: "+W(r));for(var o=0;o<r.length;++o)if(!i(r[o]))throw new I(S.INVALID_ARGUMENT,"Function "+e+"() requires all "+t+" elements to be "+n+", but the value at index "+o+" was: "+W(r[o]))}(e,t,n,r,i)}function F(e,t,n,r,i){void 0!==r&&function(e,t,n,r,i){for(var o=[],a=0,s=i;a<s.length;a++){var u=s[a];if(u===r)return;o.push(W(u))}var c=W(r);throw new I(S.INVALID_ARGUMENT,"Invalid value "+c+" provided to function "+e+'() for option "'+n+'". Acceptable values: '+o.join(", "))}(e,0,n,r,i)}function V(e,t,n,r){if(!t.some((function(e){return e===r})))throw new I(S.INVALID_ARGUMENT,"Invalid value "+W(r)+" provided to function "+e+"() for its "+H(n)+" argument. Acceptable values: "+t.join(", "))}function q(e,t,n,r){if(!("object"===t?U(r):"non-empty string"===t?"string"==typeof r&&""!==r:typeof r===t)){var i=W(r);throw new I(S.INVALID_ARGUMENT,"Function "+e+"() requires its "+n+" to be of type "+t+", but it was: "+i)}}function U(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function W(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=e.substring(0,20)+"..."),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){if(e.constructor){var t=/function\s+([^\s(]+)\s*\(/.exec(e.constructor.toString());if(t&&t.length>1)return t[1]}return null}(e);return t?"a custom "+t+" object":"an object"}return"function"==typeof e?"a function":v("Unknown wrong type: "+typeof e)}function z(e,t,n){if(void 0===n)throw new I(S.INVALID_ARGUMENT,"Function "+e+"() requires a valid "+H(t)+" argument, but it was undefined.")}function K(e,t,n){k(t,(function(t,r){if(n.indexOf(t)<0)throw new I(S.INVALID_ARGUMENT,"Unknown option '"+t+"' passed to function "+e+"(). Available options: "+n.join(", "))}))}function G(e,t,n,r){var i=W(r);return new I(S.INVALID_ARGUMENT,"Function "+e+"() requires its "+H(n)+" argument to be a "+t+", but it was: "+i)}function Q(e,t,n){if(n<=0)throw new I(S.INVALID_ARGUMENT,'Function "'+e+'()" requires its '+H(t)+" argument to be a positive number, but it was: "+n+".")}function H(e){switch(e){case 1:return"first";case 2:return"second";case 3:return"third";default:return e+"th"}}function Y(e,t){return e+" "+t+(1===e?"":"s")}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var J=function(){function e(){}return e.newId=function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t="",n=0;n<20;n++)t+=e.charAt(Math.floor(Math.random()*e.length));return b(20===t.length,"Invalid auto ID: "+t),t},e}();function X(e,t){return e<t?-1:e>t?1:0}function $(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].isEqual(t[n]))return!1;return!0}function Z(e){return e+"\0"}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ee(){if("undefined"==typeof Uint8Array)throw new I(S.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function te(){if(!w.getPlatform().base64Available)throw new I(S.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var ne,re=function(){function e(e){te(),this._binaryString=e}return e.fromBase64String=function(t){x("Blob.fromBase64String",arguments,1),P("Blob.fromBase64String","string",1,t),te();try{var n=w.getPlatform().atob(t);return new e(n)}catch(e){throw new I(S.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+e)}},e.fromUint8Array=function(t){if(x("Blob.fromUint8Array",arguments,1),ee(),!(t instanceof Uint8Array))throw G("Blob.fromUint8Array","Uint8Array",1,t);var n=Array.prototype.map.call(t,(function(e){return String.fromCharCode(e)})).join("");return new e(n)},e.prototype.toBase64=function(){return x("Blob.toBase64",arguments,0),te(),w.getPlatform().btoa(this._binaryString)},e.prototype.toUint8Array=function(){x("Blob.toUint8Array",arguments,0),ee();for(var e=new Uint8Array(this._binaryString.length),t=0;t<this._binaryString.length;t++)e[t]=this._binaryString.charCodeAt(t);return e},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e.prototype.isEqual=function(e){return this._binaryString===e._binaryString},e.prototype._compareTo=function(e){return X(this._binaryString,e._binaryString)},e}(),ie=E(re,"Use Blob.fromUint8Array() or Blob.fromBase64String() instead."),oe=function(e,t,n,r,i){this.databaseId=e,this.persistenceKey=t,this.host=n,this.ssl=r,this.forceLongPolling=i},ae="(default)",se=function(){function e(e,t){this.projectId=e,this.database=t||ae}return Object.defineProperty(e.prototype,"isDefaultDatabase",{get:function(){return this.database===ae},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database},e.prototype.compareTo=function(e){return X(this.projectId,e.projectId)||X(this.database,e.database)},e}(),ue=function(){function e(e,t){var n=this;this.previousValue=e,t&&(t.sequenceNumberHandler=function(e){return n.setPreviousValue(e)},this.writeNewSequenceNumber=function(e){return t.writeSequenceNumber(e)})}return e.prototype.setPreviousValue=function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue},e.prototype.next=function(){var e=++this.previousValue;return this.writeNewSequenceNumber&&this.writeNewSequenceNumber(e),e},e.INVALID=-1,e}(),ce=function(){function e(e,t,n){void 0===t?t=0:t>e.length&&v("offset "+t+" out of range "+e.length),void 0===n?n=e.length-t:n>e.length-t&&v("length "+n+" out of range "+(e.length-t)),this.segments=e,this.offset=t,this.len=n}return Object.defineProperty(e.prototype,"length",{get:function(){return this.len},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return 0===e.comparator(this,t)},e.prototype.child=function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)},e.prototype.limit=function(){return this.offset+this.length},e.prototype.popFirst=function(e){return e=void 0===e?1:e,b(this.length>=e,"Can't call popFirst() with less segments"),this.construct(this.segments,this.offset+e,this.length-e)},e.prototype.popLast=function(){return b(!this.isEmpty(),"Can't call popLast() on empty path"),this.construct(this.segments,this.offset,this.length-1)},e.prototype.firstSegment=function(){return b(!this.isEmpty(),"Can't call firstSegment() on empty path"),this.segments[this.offset]},e.prototype.lastSegment=function(){return this.get(this.length-1)},e.prototype.get=function(e){return b(e<this.length,"Index out of range"),this.segments[this.offset+e]},e.prototype.isEmpty=function(){return 0===this.length},e.prototype.isPrefixOf=function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0},e.prototype.isImmediateParentOf=function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0},e.prototype.forEach=function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])},e.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},e.comparator=function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),o=t.get(r);if(i<o)return-1;if(i>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0},e}(),le=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.construct=function(e,n,r){return new t(e,n,r)},t.prototype.canonicalString=function(){return this.toArray().join("/")},t.prototype.toString=function(){return this.canonicalString()},t.fromString=function(e){if(e.indexOf("//")>=0)throw new I(S.INVALID_ARGUMENT,"Invalid path ("+e+"). Paths must not contain // in them.");return new t(e.split("/").filter((function(e){return e.length>0})))},t.EMPTY_PATH=new t([]),t}(ce),he=/^[_a-zA-Z][_a-zA-Z0-9]*$/,de=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.construct=function(e,n,r){return new t(e,n,r)},t.isValidIdentifier=function(e){return he.test(e)},t.prototype.canonicalString=function(){return this.toArray().map((function(e){return e=e.replace("\\","\\\\").replace("`","\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")},t.prototype.toString=function(){return this.canonicalString()},t.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},t.keyField=function(){return new t(["__name__"])},t.fromServerFormat=function(e){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new I(S.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},a=!1;i<e.length;){var s=e[i];if("\\"===s){if(i+1===e.length)throw new I(S.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new I(S.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===s?(a=!a,i++):"."!==s||a?(r+=s,i++):(o(),i++)}if(o(),a)throw new I(S.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)},t.EMPTY_PATH=new t([]),t}(ce),fe=function(){function e(t){this.path=t,b(e.isDocumentKey(t),"Invalid DocumentKey with an odd number of segments: "+t.toArray().join("/"))}return e.prototype.hasCollectionId=function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e},e.prototype.isEqual=function(e){return null!==e&&0===le.comparator(this.path,e.path)},e.prototype.toString=function(){return this.path.toString()},e.comparator=function(e,t){return le.comparator(e.path,t.path)},e.isDocumentKey=function(e){return e.length%2==0},e.fromSegments=function(t){return new e(new le(t.slice()))},e.fromPathString=function(t){return new e(le.fromString(t))},e.EMPTY=new e(new le([])),e}(),pe=function(){var e=this;this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))};!function(e){e.All="all",e.ListenStreamIdle="listen_stream_idle",e.ListenStreamConnectionBackoff="listen_stream_connection_backoff",e.WriteStreamIdle="write_stream_idle",e.WriteStreamConnectionBackoff="write_stream_connection_backoff",e.OnlineStateTimeout="online_state_timeout",e.ClientMetadataRefresh="client_metadata_refresh",e.LruGarbageCollection="lru_garbage_collection",e.RetryTransaction="retry_transaction"}(ne||(ne={}));var me=function(){function e(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new pe,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.catch=this.deferred.promise.catch.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return e.createAndSchedule=function(t,n,r,i,o){var a=new e(t,n,Date.now()+r,i,o);return a.start(r),a},e.prototype.start=function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)},e.prototype.skipDelay=function(){return this.handleDelayElapsed()},e.prototype.cancel=function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new I(S.CANCELLED,"Operation cancelled"+(e?": "+e:""))))},e.prototype.handleDelayElapsed=function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))},e.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},e}(),ge=function(){function e(){this.tail=Promise.resolve(),this._isShuttingDown=!1,this.delayedOperations=[],this.failure=null,this.operationInProgress=!1,this.timerIdsToSkip=[]}return Object.defineProperty(e.prototype,"isShuttingDown",{get:function(){return this._isShuttingDown},enumerable:!0,configurable:!0}),e.prototype.enqueueAndForget=function(e){this.enqueue(e)},e.prototype.enqueueAndForgetEvenAfterShutdown=function(e){this.verifyNotFailed(),this.enqueueInternal(e)},e.prototype.enqueueEvenAfterShutdown=function(e){return this.verifyNotFailed(),this.enqueueInternal(e)},e.prototype.enqueueAndInitiateShutdown=function(e){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(t){switch(t.label){case 0:return this.verifyNotFailed(),this._isShuttingDown?[3,2]:(this._isShuttingDown=!0,[4,this.enqueueEvenAfterShutdown(e)]);case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},e.prototype.enqueue=function(e){return this.verifyNotFailed(),this._isShuttingDown?new Promise((function(e){})):this.enqueueInternal(e)},e.prototype.enqueueInternal=function(e){var t=this,n=this.tail.then((function(){return t.operationInProgress=!0,e().catch((function(e){t.failure=e,t.operationInProgress=!1;var n=e.stack||e.message||"";throw g("INTERNAL UNHANDLED ERROR: ",n),n.indexOf("Firestore Test Simulated Error")<0&&setTimeout((function(){throw e}),0),e})).then((function(e){return t.operationInProgress=!1,e}))}));return this.tail=n,n},e.prototype.enqueueAfterDelay=function(e,t,n){var r=this;this.verifyNotFailed(),b(t>=0,"Attempted to schedule an operation with a negative delay of "+t),this.timerIdsToSkip.indexOf(e)>-1&&(t=0);var i=me.createAndSchedule(this,e,t,n,(function(e){return r.removeDelayedOperation(e)}));return this.delayedOperations.push(i),i},e.prototype.verifyNotFailed=function(){this.failure&&v("AsyncQueue is already failed: "+(this.failure.stack||this.failure.message))},e.prototype.verifyOperationInProgress=function(){b(this.operationInProgress,"verifyOpInProgress() called when no op in progress on this queue.")},e.prototype.drain=function(){return this.enqueueEvenAfterShutdown((function(){return Promise.resolve()}))},e.prototype.containsDelayedOperation=function(e){for(var t=0,n=this.delayedOperations;t<n.length;t++){if(n[t].timerId===e)return!0}return!1},e.prototype.runDelayedOperationsEarly=function(e){var t=this;return this.drain().then((function(){b(e===ne.All||t.containsDelayedOperation(e),"Attempted to drain to missing operation "+e),t.delayedOperations.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));for(var n=0,r=t.delayedOperations;n<r.length;n++){var i=r[n];if(i.skipDelay(),e!==ne.All&&i.timerId===e)break}return t.drain()}))},e.prototype.skipDelaysForTimerId=function(e){this.timerIdsToSkip.push(e)},e.prototype.removeDelayedOperation=function(e){var t=this.delayedOperations.indexOf(e);b(t>=0,"Delayed operation not found."),this.delayedOperations.splice(t,1)},e}(),ye="",ve="",be="",we="";function Te(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=Ie(t)),t=Se(e.get(n),t);return Ie(t)}function Se(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var o=e.charAt(i);switch(o){case"\0":n+=ye+be;break;case ye:n+=ye+we;break;default:n+=o}}return n}function Ie(e){return e+ye+ve}function Ee(e){var t=e.length;if(b(t>=2,"Invalid path "+e),2===t)return b(e.charAt(0)===ye&&e.charAt(1)===ve,"Non-empty path "+e+" had length 2"),le.EMPTY_PATH;for(var n=t-2,r=[],i="",o=0;o<t;){var a=e.indexOf(ye,o);switch((a<0||a>n)&&v('Invalid encoded resource path: "'+e+'"'),e.charAt(a+1)){case ve:var s=e.substring(o,a),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case be:i+=e.substring(o,a),i+="\0";break;case we:i+=e.substring(o,a+1);break;default:v('Invalid encoded resource path: "'+e+'"')}o=a+2}return new le(r)}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ce=function(){function e(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new I(S.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new I(S.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new I(S.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new I(S.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}return e.now=function(){return e.fromMillis(Date.now())},e.fromDate=function(t){return e.fromMillis(t.getTime())},e.fromMillis=function(t){var n=Math.floor(t/1e3);return new e(n,1e6*(t-1e3*n))},e.prototype.toDate=function(){return new Date(this.toMillis())},e.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},e.prototype._compareTo=function(e){return this.seconds===e.seconds?X(this.nanoseconds,e.nanoseconds):X(this.seconds,e.seconds)},e.prototype.isEqual=function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds},e.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},e}(),_e=function(){function e(e){this.timestamp=e}return e.fromMicroseconds=function(t){var n=Math.floor(t/1e6);return new e(new Ce(n,t%1e6*1e3))},e.fromTimestamp=function(t){return new e(t)},e.forDeletedDoc=function(){return e.MIN},e.prototype.compareTo=function(e){return this.timestamp._compareTo(e.timestamp)},e.prototype.isEqual=function(e){return this.timestamp.isEqual(e.timestamp)},e.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},e.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},e.prototype.toTimestamp=function(){return this.timestamp},e.MIN=new e(new Ce(0,0)),e}(),De=function(){function e(e,t){this.comparator=e,this.root=t||Ne.EMPTY}return e.prototype.insert=function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Ne.BLACK,null,null))},e.prototype.remove=function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Ne.BLACK,null,null))},e.prototype.get=function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null},e.prototype.indexOf=function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1},e.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(e.prototype,"size",{get:function(){return this.root.size},enumerable:!0,configurable:!0}),e.prototype.minKey=function(){return this.root.minKey()},e.prototype.maxKey=function(){return this.root.maxKey()},e.prototype.inorderTraversal=function(e){return this.root.inorderTraversal(e)},e.prototype.forEach=function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))},e.prototype.toString=function(){var e=[];return this.inorderTraversal((function(t,n){return e.push(t+":"+n),!1})),"{"+e.join(", ")+"}"},e.prototype.reverseTraversal=function(e){return this.root.reverseTraversal(e)},e.prototype.getIterator=function(){return new ke(this.root,null,this.comparator,!1)},e.prototype.getIteratorFrom=function(e){return new ke(this.root,e,this.comparator,!1)},e.prototype.getReverseIterator=function(){return new ke(this.root,null,this.comparator,!0)},e.prototype.getReverseIteratorFrom=function(e){return new ke(this.root,e,this.comparator,!0)},e}(),ke=function(){function e(e,t,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!e.isEmpty();)if(i=t?n(e.key,t):1,r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}return e.prototype.getNext=function(){b(this.nodeStack.length>0,"getNext() called on iterator when hasNext() is false.");var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t},e.prototype.hasNext=function(){return this.nodeStack.length>0},e.prototype.peek=function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}},e}(),Ne=function(){function e(t,n,r,i,o){this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=o?o:e.EMPTY,this.size=this.left.size+1+this.right.size}return e.prototype.copy=function(t,n,r,i,o){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},e.prototype.isEmpty=function(){return!1},e.prototype.inorderTraversal=function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)},e.prototype.reverseTraversal=function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)},e.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},e.prototype.minKey=function(){return this.min().key},e.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},e.prototype.insert=function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()},e.prototype.removeMin=function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()},e.prototype.remove=function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()},e.prototype.isRed=function(){return this.color},e.prototype.fixUp=function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e},e.prototype.moveRedLeft=function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e},e.prototype.moveRedRight=function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e},e.prototype.rotateLeft=function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},e.prototype.rotateRight=function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},e.prototype.colorFlip=function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)},e.prototype.checkMaxDepth=function(){var e=this.check();return Math.pow(2,e)<=this.size+1},e.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw v("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed())throw v("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check();if(e!==this.right.check())throw v("Black depths differ");return e+(this.isRed()?0:1)},e.EMPTY=null,e.RED=!0,e.BLACK=!1,e}(),Ae=function(){function e(){this.size=0}return Object.defineProperty(e.prototype,"key",{get:function(){throw v("LLRBEmptyNode has no key.")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){throw v("LLRBEmptyNode has no value.")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){throw v("LLRBEmptyNode has no color.")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){throw v("LLRBEmptyNode has no left child.")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){throw v("LLRBEmptyNode has no right child.")},enumerable:!0,configurable:!0}),e.prototype.copy=function(e,t,n,r,i){return this},e.prototype.insert=function(e,t,n){return new Ne(e,t)},e.prototype.remove=function(e,t){return this},e.prototype.isEmpty=function(){return!0},e.prototype.inorderTraversal=function(e){return!1},e.prototype.reverseTraversal=function(e){return!1},e.prototype.minKey=function(){return null},e.prototype.maxKey=function(){return null},e.prototype.isRed=function(){return!1},e.prototype.checkMaxDepth=function(){return!0},e.prototype.check=function(){return 0},e}();
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ne.EMPTY=new Ae;
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var xe=function(){function e(e){this.comparator=e,this.data=new De(this.comparator)}return e.fromMapKeys=function(t){var n=new e(t.comparator);return t.forEach((function(e){n=n.add(e)})),n},e.prototype.has=function(e){return null!==this.data.get(e)},e.prototype.first=function(){return this.data.minKey()},e.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(e.prototype,"size",{get:function(){return this.data.size},enumerable:!0,configurable:!0}),e.prototype.indexOf=function(e){return this.data.indexOf(e)},e.prototype.forEach=function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))},e.prototype.forEachInRange=function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}},e.prototype.forEachWhile=function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();){if(!e(n.getNext().key))return}},e.prototype.firstAfterOrEqual=function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null},e.prototype.getIterator=function(){return new Me(this.data.getIterator())},e.prototype.getIteratorFrom=function(e){return new Me(this.data.getIteratorFrom(e))},e.prototype.add=function(e){return this.copy(this.data.remove(e).insert(e,!0))},e.prototype.delete=function(e){return this.has(e)?this.copy(this.data.remove(e)):this},e.prototype.isEmpty=function(){return this.data.isEmpty()},e.prototype.unionWith=function(e){var t=this;return e.forEach((function(e){t=t.add(e)})),t},e.prototype.isEqual=function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},e.prototype.toArray=function(){var e=[];return this.forEach((function(t){e.push(t)})),e},e.prototype.toString=function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"},e.prototype.copy=function(t){var n=new e(this.comparator);return n.data=t,n},e}(),Me=function(){function e(e){this.iter=e}return e.prototype.getNext=function(){return this.iter.getNext().key},e.prototype.hasNext=function(){return this.iter.hasNext()},e}(),Le=new De(fe.comparator);function Pe(){return Le}function Oe(){return Pe()}var Re=new De(fe.comparator);function je(){return Re}var Be=new De(fe.comparator);function Fe(){return Be}var Ve=new xe(fe.comparator);function qe(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=Ve,r=0,i=e;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var Ue=new xe(X);function We(){return Ue}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ze=function(){function e(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r,b(r.length>0,"Cannot create an empty mutation batch")}return e.prototype.applyToRemoteDocument=function(e,t,n){t&&b(t.key.isEqual(e),"applyToRemoteDocument: key "+e+" should match maybeDoc key\n        "+t.key);var r=n.mutationResults;b(r.length===this.mutations.length,"Mismatch between mutations length\n      ("+this.mutations.length+") and mutation results length\n      ("+r.length+").");for(var i=0;i<this.mutations.length;i++){var o=this.mutations[i];if(o.key.isEqual(e)){var a=r[i];t=o.applyToRemoteDocument(t,a)}}return t},e.prototype.applyToLocalView=function(e,t){t&&b(t.key.isEqual(e),"applyToLocalDocument: key "+e+" should match maybeDoc key\n        "+t.key);for(var n=0,r=this.baseMutations;n<r.length;n++){(s=r[n]).key.isEqual(e)&&(t=s.applyToLocalView(t,t,this.localWriteTime))}for(var i=t,o=0,a=this.mutations;o<a.length;o++){var s;(s=a[o]).key.isEqual(e)&&(t=s.applyToLocalView(t,i,this.localWriteTime))}return t},e.prototype.applyToLocalDocumentSet=function(e){var t=this,n=e;return this.mutations.forEach((function(r){var i=t.applyToLocalView(r.key,e.get(r.key));i&&(n=n.insert(r.key,i))})),n},e.prototype.keys=function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),qe())},e.prototype.isEqual=function(e){return this.batchId===e.batchId&&$(this.mutations,e.mutations)&&$(this.baseMutations,e.baseMutations)},e}(),Ke=function(){function e(e,t,n,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.streamToken=r,this.docVersions=i}return e.from=function(t,n,r,i){b(t.mutations.length===r.length,"Mutations sent "+t.mutations.length+" must equal results received "+r.length);for(var o=Fe(),a=t.mutations,s=0;s<a.length;s++)o=o.insert(a[s].key,r[s].version);return new e(t,n,r,i,o)},e}(),Ge=function(){function e(e){var t=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((function(e){t.isDone=!0,t.result=e,t.nextCallback&&t.nextCallback(e)}),(function(e){t.isDone=!0,t.error=e,t.catchCallback&&t.catchCallback(e)}))}return e.prototype.catch=function(e){return this.next(void 0,e)},e.prototype.next=function(t,n){var r=this;return this.callbackAttached&&v("Called next() or catch() twice for PersistencePromise"),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))},e.prototype.toPromise=function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))},e.prototype.wrapUserFunction=function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}},e.prototype.wrapSuccess=function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)},e.prototype.wrapFailure=function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)},e.resolve=function(t){return new e((function(e,n){e(t)}))},e.reject=function(t){return new e((function(e,n){n(t)}))},e.waitFor=function(t){return new e((function(e,n){var r=0,i=0,o=!1;t.forEach((function(t){++r,t.next((function(){++i,o&&i===r&&e()}),(function(e){return n(e)}))})),o=!0,i===r&&e()}))},e.or=function(t){for(var n=e.resolve(!1),r=function(t){n=n.next((function(n){return n?e.resolve(n):t()}))},i=0,o=t;i<o.length;i++){r(o[i])}return n},e.forEach=function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)},e}(),Qe="SimpleDb",He=function(){function t(e){this.db=e,12.2===t.getIOSVersion(u.getUA())&&g("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.openOrCreate=function(e,n,r){return b(t.isAvailable(),"IndexedDB not supported in current environment."),m(Qe,"Opening database:",e),new Ge((function(i,o){var a=window.indexedDB.open(e,n);a.onsuccess=function(e){var n=e.target.result;i(new t(n))},a.onblocked=function(){o(new I(S.FAILED_PRECONDITION,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=function(e){var t=e.target.error;"VersionError"===t.name?o(new I(S.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o(t)},a.onupgradeneeded=function(t){m(Qe,'Database "'+e+'" requires upgrade from version:',t.oldVersion);var n=t.target.result;r.createOrUpgrade(n,a.transaction,t.oldVersion,rn).next((function(){m(Qe,"Database upgrade to version "+rn+" complete")}))}})).toPromise()},t.delete=function(e){return m(Qe,"Removing database:",e),$e(window.indexedDB.deleteDatabase(e)).toPromise()},t.isAvailable=function(){if("undefined"==typeof window||null==window.indexedDB)return!1;if(t.isMockPersistence())return!0;if(void 0===window.navigator)return!1;var e=u.getUA(),n=t.getIOSVersion(e),r=0<n&&n<10,i=t.getAndroidVersion(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.isMockPersistence=function(){var t;return void 0!==e&&"YES"===(null===(t=e.env)||void 0===t?void 0:t.USE_MOCK_PERSISTENCE)},t.getStore=function(e,t){return e.store(t)},t.getIOSVersion=function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.getAndroidVersion=function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.setVersionChangeListener=function(e){this.db.onversionchange=function(t){return e(t)}},t.prototype.runTransaction=function(e,t,n){return a.__awaiter(this,void 0,void 0,(function(){var r,i,o,s,u,c;return a.__generator(this,(function(l){switch(l.label){case 0:r=e.startsWith("readonly"),i=e.endsWith("idempotent"),o=0,s=function(){var e,s,c,l;return a.__generator(this,(function(a){switch(a.label){case 0:++o,e=Je.open(u.db,r?"readonly":"readwrite",t),a.label=1;case 1:return a.trys.push([1,3,,4]),(s=n(e).catch((function(t){return e.abort(t),Ge.reject(t)})).toPromise()).catch((function(){})),[4,e.completionPromise];case 2:return a.sent(),[2,{value:s}];case 3:return c=a.sent(),l=i&&"FirebaseError"!==c.name&&o<3,m(Qe,"Transaction failed with error: %s. Retrying: %s.",c.message,l),l?[3,4]:[2,{value:Promise.reject(c)}];case 4:return[2]}}))},u=this,l.label=1;case 1:return[5,s()];case 2:return"object"==typeof(c=l.sent())?[2,c.value]:[3,1];case 3:return[2]}}))}))},t.prototype.close=function(){this.db.close()},t}(),Ye=function(){function e(e){this.dbCursor=e,this.shouldStop=!1,this.nextKey=null}return Object.defineProperty(e.prototype,"isDone",{get:function(){return this.shouldStop},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"skipToKey",{get:function(){return this.nextKey},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cursor",{set:function(e){this.dbCursor=e},enumerable:!0,configurable:!0}),e.prototype.done=function(){this.shouldStop=!0},e.prototype.skip=function(e){this.nextKey=e},e.prototype.delete=function(){return $e(this.dbCursor.delete())},e}(),Je=function(){function e(e){var t=this;this.transaction=e,this.aborted=!1,this.completionDeferred=new pe,this.transaction.oncomplete=function(){t.completionDeferred.resolve()},this.transaction.onabort=function(){e.error?t.completionDeferred.reject(e.error):t.completionDeferred.resolve()},this.transaction.onerror=function(e){var n=et(e.target.error);t.completionDeferred.reject(n)}}return e.open=function(t,n,r){return new e(t.transaction(r,n))},Object.defineProperty(e.prototype,"completionPromise",{get:function(){return this.completionDeferred.promise},enumerable:!0,configurable:!0}),e.prototype.abort=function(e){e&&this.completionDeferred.reject(e),this.aborted||(m(Qe,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},e.prototype.store=function(e){var t=this.transaction.objectStore(e);return b(!!t,"Object store not part of transaction: "+e),new Xe(t)},e}(),Xe=function(){function e(e){this.store=e}return e.prototype.put=function(e,t){var n;return void 0!==t?(m(Qe,"PUT",this.store.name,e,t),n=this.store.put(t,e)):(m(Qe,"PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),$e(n)},e.prototype.add=function(e){return m(Qe,"ADD",this.store.name,e,e),$e(this.store.add(e))},e.prototype.get=function(e){var t=this;return $e(this.store.get(e)).next((function(n){return void 0===n&&(n=null),m(Qe,"GET",t.store.name,e,n),n}))},e.prototype.delete=function(e){return m(Qe,"DELETE",this.store.name,e),$e(this.store.delete(e))},e.prototype.count=function(){return m(Qe,"COUNT",this.store.name),$e(this.store.count())},e.prototype.loadAll=function(e,t){var n=this.cursor(this.options(e,t)),r=[];return this.iterateCursor(n,(function(e,t){r.push(t)})).next((function(){return r}))},e.prototype.deleteAll=function(e,t){m(Qe,"DELETE ALL",this.store.name);var n=this.options(e,t);n.keysOnly=!1;var r=this.cursor(n);return this.iterateCursor(r,(function(e,t,n){return n.delete()}))},e.prototype.iterate=function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.iterateCursor(r,t)},e.prototype.iterateSerial=function(e){var t=this.cursor({});return new Ge((function(n,r){t.onerror=function(e){var t=et(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))},e.prototype.iterateCursor=function(e,t){var n=[];return new Ge((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var o=new Ye(i),a=t(i.primaryKey,i.value,o);if(a instanceof Ge){var s=a.catch((function(e){return o.done(),Ge.reject(e)}));n.push(s)}o.isDone?r():null===o.skipToKey?i.continue():i.continue(o.skipToKey)}else r()}})).next((function(){return Ge.waitFor(n)}))},e.prototype.options=function(e,t){var n=void 0;return void 0!==e&&("string"==typeof e?n=e:(b(void 0===t,"3rd argument must not be defined if 2nd is a range."),t=e)),{index:n,range:t}},e.prototype.cursor=function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.keysOnly?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)},e}();function $e(e){return new Ge((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=et(e.target.error);n(t)}}))}var Ze=!1;function et(e){var t=He.getIOSVersion(u.getUA());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new I("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Ze||(Ze=!0,setTimeout((function(){throw r}),0)),r}}return e}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tt=function(){function e(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.documentKeysByBatchId={}}return e.forUser=function(t,n,r,i){return b(""!==t.uid,"UserID must not be an empty string."),new e(t.isAuthenticated()?t.uid:"",n,r,i)},e.prototype.checkEmpty=function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ot(e).iterate({index:cn.userMutationsIndex,range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))},e.prototype.acknowledgeBatch=function(e,t,n){return this.getMutationQueueMetadata(e).next((function(t){return t.lastStreamToken=it(n),st(e).put(t)}))},e.prototype.getLastStreamToken=function(e){return this.getMutationQueueMetadata(e).next((function(e){return e.lastStreamToken}))},e.prototype.setLastStreamToken=function(e,t){return this.getMutationQueueMetadata(e).next((function(n){return n.lastStreamToken=it(t),st(e).put(n)}))},e.prototype.addMutationBatch=function(e,t,n,r){var i=this,o=at(e),a=ot(e);return a.add({}).next((function(s){b("number"==typeof s,"Auto-generated key is not a number");for(var u=new ze(s,t,n,r),c=i.serializer.toDbMutationBatch(i.userId,u),l=[],h=new xe((function(e,t){return X(e.canonicalString(),t.canonicalString())})),d=0,f=r;d<f.length;d++){var p=f[d],m=ln.key(i.userId,p.key.path,s);h=h.add(p.key.path.popLast()),l.push(a.put(c)),l.push(o.put(m,ln.PLACEHOLDER))}return h.forEach((function(t){l.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.documentKeysByBatchId[s]=u.keys()})),Ge.waitFor(l).next((function(){return u}))}))},e.prototype.lookupMutationBatch=function(e,t){var n=this;return ot(e).get(t).next((function(e){return e?(b(e.userId===n.userId,"Unexpected user '"+e.userId+"' for mutation batch "+t),n.serializer.fromDbMutationBatch(e)):null}))},e.prototype.lookupMutationKeys=function(e,t){var n=this;return this.documentKeysByBatchId[t]?Ge.resolve(this.documentKeysByBatchId[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.documentKeysByBatchId[t]=r,r}return null}))},e.prototype.getNextMutationBatchAfterBatchId=function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return ot(e).iterate({index:cn.userMutationsIndex,range:i},(function(e,t,i){t.userId===n.userId&&(b(t.batchId>=r,"Should have found mutation after "+r),o=n.serializer.fromDbMutationBatch(t)),i.done()})).next((function(){return o}))},e.prototype.getHighestUnacknowledgedBatchId=function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return ot(e).iterate({index:cn.userMutationsIndex,range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))},e.prototype.getAllMutationBatches=function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ot(e).loadAll(cn.userMutationsIndex,n).next((function(e){return e.map((function(e){return t.serializer.fromDbMutationBatch(e)}))}))},e.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,t){var n=this,r=ln.prefixForPath(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return at(e).iterate({range:i},(function(r,i,a){var s=r[0],u=r[1],c=r[2],l=Ee(u);if(s===n.userId&&t.path.isEqual(l))return ot(e).get(c).next((function(e){if(!e)throw v("Dangling document-mutation reference found: "+r+" which points to "+c);b(e.userId===n.userId,"Unexpected user '"+e.userId+"' for mutation batch "+c),o.push(n.serializer.fromDbMutationBatch(e))}));a.done()})).next((function(){return o}))},e.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,t){var n=this,r=new xe(X),i=[];return t.forEach((function(t){var o=ln.prefixForPath(n.userId,t.path),a=IDBKeyRange.lowerBound(o),s=at(e).iterate({range:a},(function(e,i,o){var a=e[0],s=e[1],u=e[2],c=Ee(s);a===n.userId&&t.path.isEqual(c)?r=r.add(u):o.done()}));i.push(s)})),Ge.waitFor(i).next((function(){return n.lookupMutationBatches(e,r)}))},e.prototype.getAllMutationBatchesAffectingQuery=function(e,t){var n=this;b(!t.isDocumentQuery(),"Document queries shouldn't go down this path"),b(!t.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var r=t.path,i=r.length+1,o=ln.prefixForPath(this.userId,r),a=IDBKeyRange.lowerBound(o),s=new xe(X);return at(e).iterate({range:a},(function(e,t,o){var a=e[0],u=e[1],c=e[2],l=Ee(u);a===n.userId&&r.isPrefixOf(l)?l.length===i&&(s=s.add(c)):o.done()})).next((function(){return n.lookupMutationBatches(e,s)}))},e.prototype.lookupMutationBatches=function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(ot(e).get(t).next((function(e){if(null===e)throw v("Dangling document-mutation reference found, which points to "+t);b(e.userId===n.userId,"Unexpected user '"+e.userId+"' for mutation batch "+t),r.push(n.serializer.fromDbMutationBatch(e))})))})),Ge.waitFor(i).next((function(){return r}))},e.prototype.removeMutationBatch=function(e,t){var n=this;return rt(e.simpleDbTransaction,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.removeCachedMutationKeys(t.batchId)})),Ge.forEach(r,(function(t){return n.referenceDelegate.removeMutationReference(e,t)}))}))},e.prototype.removeCachedMutationKeys=function(e){delete this.documentKeysByBatchId[e]},e.prototype.performConsistencyCheck=function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return Ge.resolve();var r=IDBKeyRange.lowerBound(ln.prefixForUser(t.userId)),i=[];return at(e).iterate({range:r},(function(e,n,r){if(e[0]===t.userId){var o=Ee(e[1]);i.push(o)}else r.done()})).next((function(){b(0===i.length,"Document leak -- detected dangling mutation references when queue is empty. Dangling keys: "+i.map((function(e){return e.canonicalString()})))}))}))},e.prototype.containsKey=function(e,t){return nt(e,this.userId,t)},e.prototype.getMutationQueueMetadata=function(e){var t=this;return st(e).get(this.userId).next((function(e){return e||new un(t.userId,-1,"")}))},e}();function nt(e,t,n){var r=ln.prefixForPath(t,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),a=!1;return at(e).iterate({range:o,keysOnly:!0},(function(e,n,r){var o=e[0],s=e[1];e[2];o===t&&s===i&&(a=!0),r.done()})).next((function(){return a}))}function rt(e,t,n){var r=e.store(cn.store),i=e.store(ln.store),o=[],a=IDBKeyRange.only(n.batchId),s=0,u=r.iterate({range:a},(function(e,t,n){return s++,n.delete()}));o.push(u.next((function(){b(1===s,"Dangling document-mutation reference found: Missing batch "+n.batchId)})));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var d=h[l],f=ln.key(t,d.key.path,n.batchId);o.push(i.delete(f)),c.push(d.key)}return Ge.waitFor(o).next((function(){return c}))}function it(e){return e instanceof Uint8Array?(b(He.isMockPersistence(),"Persisting non-string stream tokens is only supported with mock persistence."),e.toString()):e}function ot(e){return qn.getStore(e,cn.store)}function at(e){return qn.getStore(e,ln.store)}function st(e){return qn.getStore(e,un.store)}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ut,ct=1;!function(e){e[e.QueryCache=0]="QueryCache",e[e.SyncEngine=1]="SyncEngine"}(ut||(ut={}));var lt=function(){function e(e,t){this.generatorId=e,b((e&ct)===e,"Generator ID "+e+" contains more than "+ct+" reserved bits"),this.seek(void 0!==t?t:this.generatorId)}return e.prototype.next=function(){var e=this.nextId;return this.nextId+=1<<ct,e},e.prototype.after=function(e){return this.seek(e+(1<<ct)),this.next()},e.prototype.seek=function(e){b((e&ct)===this.generatorId,"Cannot supply target ID from different generator ID"),this.nextId=e},e.forTargetCache=function(){return new e(ut.QueryCache,2)},e.forSyncEngine=function(){return new e(ut.SyncEngine)},e}(),ht=function(){function e(e,t){this.referenceDelegate=e,this.serializer=t,this.targetIdGenerator=lt.forTargetCache()}return e.prototype.allocateTargetId=function(e){var t=this;return this.retrieveMetadata(e).next((function(n){return n.highestTargetId=t.targetIdGenerator.after(n.highestTargetId),t.saveMetadata(e,n).next((function(){return n.highestTargetId}))}))},e.prototype.getLastRemoteSnapshotVersion=function(e){return this.retrieveMetadata(e).next((function(e){return _e.fromTimestamp(new Ce(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))},e.prototype.getHighestSequenceNumber=function(e){return pt(e.simpleDbTransaction)},e.prototype.setTargetsMetadata=function(e,t,n){var r=this;return this.retrieveMetadata(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.saveMetadata(e,i)}))},e.prototype.addTargetData=function(e,t){var n=this;return this.saveTargetData(e,t).next((function(){return n.retrieveMetadata(e).next((function(r){return r.targetCount+=1,n.updateMetadataFromTargetData(t,r),n.saveMetadata(e,r)}))}))},e.prototype.updateTargetData=function(e,t){return this.saveTargetData(e,t)},e.prototype.removeTargetData=function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return dt(e).delete(t.targetId)})).next((function(){return n.retrieveMetadata(e)})).next((function(t){return b(t.targetCount>0,"Removing from an empty target cache"),t.targetCount-=1,n.saveMetadata(e,t)}))},e.prototype.removeTargets=function(e,t,n){var r=this,i=0,o=[];return dt(e).iterate((function(a,s){var u=r.serializer.fromDbTarget(s);u.sequenceNumber<=t&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(e,u)))})).next((function(){return Ge.waitFor(o)})).next((function(){return i}))},e.prototype.forEachTarget=function(e,t){var n=this;return dt(e).iterate((function(e,r){var i=n.serializer.fromDbTarget(r);t(i)}))},e.prototype.retrieveMetadata=function(e){return ft(e.simpleDbTransaction)},e.prototype.saveMetadata=function(e,t){return(n=e,qn.getStore(n,yn.store)).put(yn.key,t);var n},e.prototype.saveTargetData=function(e,t){return dt(e).put(this.serializer.toDbTarget(t))},e.prototype.updateMetadataFromTargetData=function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n},e.prototype.getTargetCount=function(e){return this.retrieveMetadata(e).next((function(e){return e.targetCount}))},e.prototype.getTargetData=function(e,t){var n=this,r=t.canonicalId(),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return dt(e).iterate({range:i,index:mn.queryTargetsIndexName},(function(e,r,i){var a=n.serializer.fromDbTarget(r);t.isEqual(a.target)&&(o=a,i.done())})).next((function(){return o}))},e.prototype.addMatchingKeys=function(e,t,n){var r=this,i=[],o=mt(e);return t.forEach((function(t){var a=Te(t.path);i.push(o.put(new gn(n,a))),i.push(r.referenceDelegate.addReference(e,t))})),Ge.waitFor(i)},e.prototype.removeMatchingKeys=function(e,t,n){var r=this,i=mt(e);return Ge.forEach(t,(function(t){var o=Te(t.path);return Ge.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(e,t)])}))},e.prototype.removeMatchingKeysForTargetId=function(e,t){var n=mt(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)},e.prototype.getMatchingKeysForTargetId=function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=mt(e),i=qe();return r.iterate({range:n,keysOnly:!0},(function(e,t,n){var r=Ee(e[1]),o=new fe(r);i=i.add(o)})).next((function(){return i}))},e.prototype.containsKey=function(e,t){var n=Te(t.path),r=IDBKeyRange.bound([n],[Z(n)],!1,!0),i=0;return mt(e).iterate({index:gn.documentTargetsIndex,keysOnly:!0,range:r},(function(e,t,n){var r=e[0];e[1];0!==r&&(i++,n.done())})).next((function(){return i>0}))},e.prototype.getTargetDataForTarget=function(e,t){var n=this;return dt(e).get(t).next((function(e){return e?n.serializer.fromDbTarget(e):null}))},e}();
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dt(e){return qn.getStore(e,mn.store)}function ft(e){return He.getStore(e,yn.store).get(yn.key).next((function(e){return b(null!==e,"Missing metadata row."),e}))}function pt(e){return ft(e).next((function(e){return e.highestListenSequenceNumber}))}function mt(e){return qn.getStore(e,gn.store)}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gt,yt=function(){function e(e){this.fields=e}return e.fromSet=function(t){return new e(t)},e.fromArray=function(t){var n=new xe(de.comparator);return t.forEach((function(e){return n=n.add(e)})),new e(n)},e.prototype.covers=function(e){var t=!1;return this.fields.forEach((function(n){n.isPrefixOf(e)&&(t=!0)})),t},e.prototype.isEqual=function(e){return this.fields.isEqual(e.fields)},e}(),vt=function(){function e(e,t){this.field=e,this.transform=t}return e.prototype.isEqual=function(e){return this.field.isEqual(e.field)&&this.transform.isEqual(e.transform)},e}(),bt=function(e,t){this.version=e,this.transformResults=t};!function(e){e[e.Set=0]="Set",e[e.Patch=1]="Patch",e[e.Transform=2]="Transform",e[e.Delete=3]="Delete"}(gt||(gt={}));var wt,Tt,St=function(){function e(e,t){this.updateTime=e,this.exists=t,b(void 0===e||void 0===t,'Precondition can specify "exists" or "updateTime" but not both')}return e.exists=function(t){return new e(void 0,t)},e.updateTime=function(t){return new e(t)},Object.defineProperty(e.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!0,configurable:!0}),e.prototype.isValidFor=function(e){return void 0!==this.updateTime?e instanceof Kt&&e.version.isEqual(this.updateTime):void 0!==this.exists?this.exists===e instanceof Kt:(b(this.isNone,"Precondition should be empty"),!0)},e.prototype.isEqual=function(e){return t=this.updateTime,n=e.updateTime,(null!=t?!(!n||!t.isEqual(n)):t===n)&&this.exists===e.exists;var t,n},e.NONE=new e,e}(),It=function(){function e(){}return e.prototype.verifyKeyMatches=function(e){null!=e&&b(e.key.isEqual(this.key),"Can only apply a mutation to a document with the same key")},e.getPostMutationVersion=function(e){return e instanceof Kt?e.version:_e.MIN},e}(),Et=function(e){function t(t,n,r){var i=e.call(this)||this;return i.key=t,i.value=n,i.precondition=r,i.type=gt.Set,i}return a.__extends(t,e),t.prototype.applyToRemoteDocument=function(e,t){this.verifyKeyMatches(e),b(null==t.transformResults,"Transform results received by SetMutation.");var n=t.version;return new Kt(this.key,n,{hasCommittedMutations:!0},this.value)},t.prototype.applyToLocalView=function(e,t,n){if(this.verifyKeyMatches(e),!this.precondition.isValidFor(e))return e;var r=It.getPostMutationVersion(e);return new Kt(this.key,r,{hasLocalMutations:!0},this.value)},t.prototype.extractBaseValue=function(e){return null},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.value.isEqual(e.value)&&this.precondition.isEqual(e.precondition)},t}(It),Ct=function(e){function t(t,n,r,i){var o=e.call(this)||this;return o.key=t,o.data=n,o.fieldMask=r,o.precondition=i,o.type=gt.Patch,o}return a.__extends(t,e),t.prototype.applyToRemoteDocument=function(e,t){if(this.verifyKeyMatches(e),b(null==t.transformResults,"Transform results received by PatchMutation."),!this.precondition.isValidFor(e))return new Qt(this.key,t.version);var n=this.patchDocument(e);return new Kt(this.key,t.version,{hasCommittedMutations:!0},n)},t.prototype.applyToLocalView=function(e,t,n){if(this.verifyKeyMatches(e),!this.precondition.isValidFor(e))return e;var r=It.getPostMutationVersion(e),i=this.patchDocument(e);return new Kt(this.key,r,{hasLocalMutations:!0},i)},t.prototype.extractBaseValue=function(e){return null},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.fieldMask.isEqual(e.fieldMask)&&this.precondition.isEqual(e.precondition)},t.prototype.patchDocument=function(e){var t;return t=e instanceof Kt?e.data():Ut.EMPTY,this.patchObject(t)},t.prototype.patchObject=function(e){var t=this;return this.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=t.data.field(n);e=null!==r?e.set(n,r):e.delete(n)}})),e},t}(It),_t=function(e){function t(t,n){var r=e.call(this)||this;return r.key=t,r.fieldTransforms=n,r.type=gt.Transform,r.precondition=St.exists(!0),r}return a.__extends(t,e),t.prototype.applyToRemoteDocument=function(e,t){if(this.verifyKeyMatches(e),b(null!=t.transformResults,"Transform results missing for TransformMutation."),!this.precondition.isValidFor(e))return new Qt(this.key,t.version);var n=this.requireDocument(e),r=this.serverTransformResults(e,t.transformResults),i=t.version,o=this.transformObject(n.data(),r);return new Kt(this.key,i,{hasCommittedMutations:!0},o)},t.prototype.applyToLocalView=function(e,t,n){if(this.verifyKeyMatches(e),!this.precondition.isValidFor(e))return e;var r=this.requireDocument(e),i=this.localTransformResults(n,e,t),o=this.transformObject(r.data(),i);return new Kt(this.key,r.version,{hasLocalMutations:!0},o)},t.prototype.extractBaseValue=function(e){for(var t=null,n=0,r=this.fieldTransforms;n<r.length;n++){var i=r[n],o=e instanceof Kt?e.field(i.field):void 0,a=i.transform.computeBaseValue(o||null);null!=a&&(t=null==t?Ut.EMPTY.set(i.field,a):t.set(i.field,a))}return t},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&$(this.fieldTransforms,e.fieldTransforms)&&this.precondition.isEqual(e.precondition)},t.prototype.requireDocument=function(e){return b(e instanceof Kt,"Unknown MaybeDocument type "+e),b(e.key.isEqual(this.key),"Can only transform a document with the same key"),e},t.prototype.serverTransformResults=function(e,t){var n=[];b(this.fieldTransforms.length===t.length,"server transform result count ("+t.length+") should match field transform count ("+this.fieldTransforms.length+")");for(var r=0;r<t.length;r++){var i=this.fieldTransforms[r],o=i.transform,a=null;e instanceof Kt&&(a=e.field(i.field)),n.push(o.applyToRemoteDocument(a,t[r]))}return n},t.prototype.localTransformResults=function(e,t,n){for(var r=[],i=0,o=this.fieldTransforms;i<o.length;i++){var a=o[i],s=a.transform,u=null;t instanceof Kt&&(u=t.field(a.field)),null===u&&n instanceof Kt&&(u=n.field(a.field)),r.push(s.applyToLocalView(u,e))}return r},t.prototype.transformObject=function(e,t){b(t.length===this.fieldTransforms.length,"TransformResults length mismatch.");for(var n=0;n<this.fieldTransforms.length;n++){var r=this.fieldTransforms[n].field;e=e.set(r,t[n])}return e},t}(It),Dt=function(e){function t(t,n){var r=e.call(this)||this;return r.key=t,r.precondition=n,r.type=gt.Delete,r}return a.__extends(t,e),t.prototype.applyToRemoteDocument=function(e,t){return this.verifyKeyMatches(e),b(null==t.transformResults,"Transform results received by DeleteMutation."),new Gt(this.key,t.version,{hasCommittedMutations:!0})},t.prototype.applyToLocalView=function(e,t,n){return this.verifyKeyMatches(e),this.precondition.isValidFor(e)?(e&&b(e.key.isEqual(this.key),"Can only apply mutation to document with same key"),new Gt(this.key,_e.forDeletedDoc())):e},t.prototype.extractBaseValue=function(e){return null},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.precondition.isEqual(e.precondition)},t}(It);!function(e){e[e.NullValue=0]="NullValue",e[e.BooleanValue=1]="BooleanValue",e[e.NumberValue=2]="NumberValue",e[e.TimestampValue=3]="TimestampValue",e[e.StringValue=4]="StringValue",e[e.BlobValue=5]="BlobValue",e[e.RefValue=6]="RefValue",e[e.GeoPointValue=7]="GeoPointValue",e[e.ArrayValue=8]="ArrayValue",e[e.ObjectValue=9]="ObjectValue"}(wt||(wt={})),function(e){e[e.Default=0]="Default",e[e.Estimate=1]="Estimate",e[e.Previous=2]="Previous"}(Tt||(Tt={}));var kt=function(){function e(e,t){this.serverTimestampBehavior=e,this.timestampsInSnapshots=t}return e.fromSnapshotOptions=function(t,n){switch(t.serverTimestamps){case"estimate":return new e(Tt.Estimate,n);case"previous":return new e(Tt.Previous,n);case"none":case void 0:return new e(Tt.Default,n);default:return v("fromSnapshotOptions() called with invalid options.")}},e}(),Nt=function(){function e(){}return e.prototype.toString=function(){var e=this.value();return null===e?"null":e.toString()},e.prototype.defaultCompareTo=function(e){return b(this.typeOrder!==e.typeOrder,"Default compareTo should not be used for values of same type."),X(this.typeOrder,e.typeOrder)},e}(),At=function(e){function t(){var t=e.call(this)||this;return t.typeOrder=wt.NullValue,t.internalValue=null,t}return a.__extends(t,e),t.prototype.value=function(e){return null},t.prototype.isEqual=function(e){return e instanceof t},t.prototype.compareTo=function(e){return e instanceof t?0:this.defaultCompareTo(e)},t.INSTANCE=new t,t}(Nt),xt=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=wt.BooleanValue,n}return a.__extends(t,e),t.prototype.value=function(e){return this.internalValue},t.prototype.isEqual=function(e){return e instanceof t&&this.internalValue===e.internalValue},t.prototype.compareTo=function(e){return e instanceof t?X(this,e):this.defaultCompareTo(e)},t.of=function(e){return e?t.TRUE:t.FALSE},t.TRUE=new t(!0),t.FALSE=new t(!1),t}(Nt),Mt=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=wt.NumberValue,n}return a.__extends(t,e),t.prototype.value=function(e){return this.internalValue},t.prototype.compareTo=function(e){return e instanceof t?(n=this.internalValue,r=e.internalValue,n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1):this.defaultCompareTo(e);var n,r},t}(Nt);function Lt(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}var Pt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.isEqual=function(e){return e instanceof t&&Lt(this.internalValue,e.internalValue)},t}(Mt),Ot=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.isEqual=function(e){return e instanceof t&&Lt(this.internalValue,e.internalValue)},t.NAN=new t(NaN),t.POSITIVE_INFINITY=new t(1/0),t.NEGATIVE_INFINITY=new t(-1/0),t}(Mt),Rt=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=wt.StringValue,n}return a.__extends(t,e),t.prototype.value=function(e){return this.internalValue},t.prototype.isEqual=function(e){return e instanceof t&&this.internalValue===e.internalValue},t.prototype.compareTo=function(e){return e instanceof t?X(this.internalValue,e.internalValue):this.defaultCompareTo(e)},t}(Nt),jt=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=wt.TimestampValue,n}return a.__extends(t,e),t.prototype.value=function(e){return!e||e.timestampsInSnapshots?this.internalValue:this.internalValue.toDate()},t.prototype.isEqual=function(e){return e instanceof t&&this.internalValue.isEqual(e.internalValue)},t.prototype.compareTo=function(e){return e instanceof t?this.internalValue._compareTo(e.internalValue):e instanceof Bt?-1:this.defaultCompareTo(e)},t}(Nt),Bt=function(e){function t(t,n){var r=e.call(this)||this;return r.localWriteTime=t,r.previousValue=n,r.typeOrder=wt.TimestampValue,r}return a.__extends(t,e),t.prototype.value=function(e){return e&&e.serverTimestampBehavior===Tt.Estimate?new jt(this.localWriteTime).value(e):e&&e.serverTimestampBehavior===Tt.Previous&&this.previousValue?this.previousValue.value(e):null},t.prototype.isEqual=function(e){return e instanceof t&&this.localWriteTime.isEqual(e.localWriteTime)},t.prototype.compareTo=function(e){return e instanceof t?this.localWriteTime._compareTo(e.localWriteTime):e instanceof jt?1:this.defaultCompareTo(e)},t.prototype.toString=function(){return"<ServerTimestamp localTime="+this.localWriteTime.toString()+">"},t}(Nt),Ft=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=wt.BlobValue,n}return a.__extends(t,e),t.prototype.value=function(e){return this.internalValue},t.prototype.isEqual=function(e){return e instanceof t&&this.internalValue.isEqual(e.internalValue)},t.prototype.compareTo=function(e){return e instanceof t?this.internalValue._compareTo(e.internalValue):this.defaultCompareTo(e)},t}(Nt),Vt=function(e){function t(t,n){var r=e.call(this)||this;return r.databaseId=t,r.key=n,r.typeOrder=wt.RefValue,r}return a.__extends(t,e),t.prototype.value=function(e){return this.key},t.prototype.isEqual=function(e){return e instanceof t&&(this.key.isEqual(e.key)&&this.databaseId.isEqual(e.databaseId))},t.prototype.compareTo=function(e){if(e instanceof t){var n=this.databaseId.compareTo(e.databaseId);return 0!==n?n:fe.comparator(this.key,e.key)}return this.defaultCompareTo(e)},t}(Nt),qt=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=wt.GeoPointValue,n}return a.__extends(t,e),t.prototype.value=function(e){return this.internalValue},t.prototype.isEqual=function(e){return e instanceof t&&this.internalValue.isEqual(e.internalValue)},t.prototype.compareTo=function(e){return e instanceof t?this.internalValue._compareTo(e.internalValue):this.defaultCompareTo(e)},t}(Nt),Ut=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=wt.ObjectValue,n}return a.__extends(t,e),t.prototype.value=function(e){var t={};return this.internalValue.inorderTraversal((function(n,r){t[n]=r.value(e)})),t},t.prototype.forEach=function(e){this.internalValue.inorderTraversal(e)},t.prototype.isEqual=function(e){if(e instanceof t){for(var n=this.internalValue.getIterator(),r=e.internalValue.getIterator();n.hasNext()&&r.hasNext();){var i=n.getNext(),o=r.getNext();if(i.key!==o.key||!i.value.isEqual(o.value))return!1}return!n.hasNext()&&!r.hasNext()}return!1},t.prototype.compareTo=function(e){if(e instanceof t){for(var n=this.internalValue.getIterator(),r=e.internalValue.getIterator();n.hasNext()&&r.hasNext();){var i=n.getNext(),o=r.getNext(),a=X(i.key,o.key)||i.value.compareTo(o.value);if(a)return a}return X(n.hasNext(),r.hasNext())}return this.defaultCompareTo(e)},t.prototype.set=function(e,n){if(b(!e.isEmpty(),"Cannot set field for empty path on ObjectValue"),1===e.length)return this.setChild(e.firstSegment(),n);var r=this.child(e.firstSegment());r instanceof t||(r=t.EMPTY);var i=r.set(e.popFirst(),n);return this.setChild(e.firstSegment(),i)},t.prototype.delete=function(e){if(b(!e.isEmpty(),"Cannot delete field for empty path on ObjectValue"),1===e.length)return new t(this.internalValue.remove(e.firstSegment()));var n=this.child(e.firstSegment());if(n instanceof t){var r=n.delete(e.popFirst());return new t(this.internalValue.insert(e.firstSegment(),r))}return this},t.prototype.contains=function(e){return null!==this.field(e)},t.prototype.field=function(e){b(!e.isEmpty(),"Can't get field of empty path");var n=this;return e.forEach((function(e){n=n instanceof t?n.internalValue.get(e):null})),n},t.prototype.fieldMask=function(){var e=new xe(de.comparator);return this.internalValue.forEach((function(n,r){var i=new de([n]);if(r instanceof t){var o=r.fieldMask().fields;o.isEmpty()?e=e.add(i):o.forEach((function(t){e=e.add(i.child(t))}))}else e=e.add(i)})),yt.fromSet(e)},t.prototype.toString=function(){return this.internalValue.toString()},t.prototype.child=function(e){return this.internalValue.get(e)||void 0},t.prototype.setChild=function(e,n){return new t(this.internalValue.insert(e,n))},t.EMPTY=new t(new De(X)),t}(Nt),Wt=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=wt.ArrayValue,n}return a.__extends(t,e),t.prototype.value=function(e){return this.internalValue.map((function(t){return t.value(e)}))},t.prototype.contains=function(e){for(var t=0,n=this.internalValue;t<n.length;t++){if(n[t].isEqual(e))return!0}return!1},t.prototype.forEach=function(e){this.internalValue.forEach(e)},t.prototype.isEqual=function(e){if(e instanceof t){if(this.internalValue.length!==e.internalValue.length)return!1;for(var n=0;n<this.internalValue.length;n++)if(!this.internalValue[n].isEqual(e.internalValue[n]))return!1;return!0}return!1},t.prototype.compareTo=function(e){if(e instanceof t){for(var n=Math.min(this.internalValue.length,e.internalValue.length),r=0;r<n;r++){var i=this.internalValue[r].compareTo(e.internalValue[r]);if(i)return i}return X(this.internalValue.length,e.internalValue.length)}return this.defaultCompareTo(e)},t.prototype.toString=function(){return"["+this.internalValue.map((function(e){return e.toString()})).join(",")+"]"},t}(Nt),zt=function(){function e(e,t){this.key=e,this.version=t}return e.compareByKey=function(e,t){return fe.comparator(e.key,t.key)},e}(),Kt=function(e){function t(t,n,r,i,o,a){var s=e.call(this,t,n)||this;return s.objectValue=i,s.proto=o,s.converter=a,b(void 0!==s.objectValue||void 0!==s.proto&&void 0!==s.converter,"If objectValue is not defined, proto and converter need to be set."),s.hasLocalMutations=!!r.hasLocalMutations,s.hasCommittedMutations=!!r.hasCommittedMutations,s}return a.__extends(t,e),t.prototype.field=function(e){if(this.objectValue)return this.objectValue.field(e);this.fieldValueCache||(this.fieldValueCache=new Map);var t=e.canonicalString(),n=this.fieldValueCache.get(t);if(void 0===n){var r=this.getProtoField(e);n=void 0===r?null:this.converter(r),this.fieldValueCache.set(t,n)}return n},t.prototype.data=function(){var e=this;if(!this.objectValue){var t=Ut.EMPTY;k(this.proto.fields||{},(function(n,r){t=t.set(new de([n]),e.converter(r))})),this.objectValue=t,this.fieldValueCache=void 0}return this.objectValue},t.prototype.value=function(){return this.data().value()},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.hasLocalMutations===e.hasLocalMutations&&this.hasCommittedMutations===e.hasCommittedMutations&&this.data().isEqual(e.data())},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.data().toString()+", {hasLocalMutations: "+this.hasLocalMutations+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!0,configurable:!0}),t.prototype.getProtoField=function(e){b(void 0!==this.proto,"Can only call getProtoField() when proto is defined");for(var t=this.proto.fields?this.proto.fields[e.firstSegment()]:void 0,n=1;n<e.length;++n){if(!t||!t.mapValue||!t.mapValue.fields)return;t=t.mapValue.fields[e.get(n)]}return t},t.compareByField=function(e,t,n){var r=t.field(e),i=n.field(e);return null!==r&&null!==i?r.compareTo(i):v("Trying to compare documents on fields that don't exist")},t}(zt),Gt=function(e){function t(t,n,r){var i=e.call(this,t,n)||this;return i.hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return a.__extends(t,e),t.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.hasCommittedMutations===this.hasCommittedMutations&&e.version.isEqual(this.version)&&e.key.isEqual(this.key)},t}(zt),Qt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.version.isEqual(this.version)&&e.key.isEqual(this.key)},t}(zt),Ht=function(){function e(e){this.mapKeyFn=e,this.inner={}}return e.prototype.get=function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];if(a.isEqual(e))return s}},e.prototype.has=function(e){return void 0!==this.get(e)},e.prototype.set=function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(r[i][0].isEqual(e))return void(r[i]=[e,t]);r.push([e,t])}else this.inner[n]=[[e,t]]},e.prototype.delete=function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(n[r][0].isEqual(e))return 1===n.length?delete this.inner[t]:n.splice(r,1),!0;return!1},e.prototype.forEach=function(e){k(this.inner,(function(t,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];e(a,s)}}))},e.prototype.isEmpty=function(){return N(this.inner)},e}(),Yt=function(){function e(){this.changes=new Ht((function(e){return e.toString()})),this.changesApplied=!1}return Object.defineProperty(e.prototype,"readTime",{get:function(){return b(void 0!==this._readTime,"Read time is not set. All removeEntry() calls must include a readTime if `trackRemovals` is used."),this._readTime},set:function(e){b(void 0===this._readTime||this._readTime.isEqual(e),"All changes in a RemoteDocumentChangeBuffer must have the same read time"),this._readTime=e},enumerable:!0,configurable:!0}),e.prototype.addEntry=function(e,t){this.assertNotApplied(),this.readTime=t,this.changes.set(e.key,e)},e.prototype.removeEntry=function(e,t){this.assertNotApplied(),t&&(this.readTime=t),this.changes.set(e,null)},e.prototype.getEntry=function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?Ge.resolve(n):this.getFromCache(e,t)},e.prototype.getEntries=function(e,t){return this.getAllFromCache(e,t)},e.prototype.apply=function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)},e.prototype.assertNotApplied=function(){b(!this.changesApplied,"Changes have already been applied.")},e}(),Jt=function(){function e(e,t){this.serializer=e,this.indexManager=t}return e.prototype.addEntry=function(e,t,n){return $t(e).put(Zt(t),n)},e.prototype.removeEntry=function(e,t){var n=$t(e),r=Zt(t);return n.delete(r)},e.prototype.updateMetadata=function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.setMetadata(e,r)}))},e.prototype.getEntry=function(e,t){var n=this;return $t(e).get(Zt(t)).next((function(e){return n.maybeDecodeDocument(e)}))},e.prototype.getSizedEntry=function(e,t){var n=this;return $t(e).get(Zt(t)).next((function(e){var t=n.maybeDecodeDocument(e);return t?{maybeDocument:t,size:en(e)}:null}))},e.prototype.getEntries=function(e,t){var n=this,r=Oe();return this.forEachDbEntry(e,t,(function(e,t){var i=n.maybeDecodeDocument(t);r=r.insert(e,i)})).next((function(){return r}))},e.prototype.getSizedEntries=function(e,t){var n=this,r=Oe(),i=new De(fe.comparator);return this.forEachDbEntry(e,t,(function(e,t){var o=n.maybeDecodeDocument(t);o?(r=r.insert(e,o),i=i.insert(e,en(t))):(r=r.insert(e,null),i=i.insert(e,0))})).next((function(){return{maybeDocuments:r,sizeMap:i}}))},e.prototype.forEachDbEntry=function(e,t,n){if(t.isEmpty())return Ge.resolve();var r=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),i=t.getIterator(),o=i.getNext();return $t(e).iterate({range:r},(function(e,t,r){for(var a=fe.fromSegments(e);o&&fe.comparator(o,a)<0;)n(o,null),o=i.getNext();o&&o.isEqual(a)&&(n(o,t),o=i.hasNext()?i.getNext():null),o?r.skip(o.path.toArray()):r.done()})).next((function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null}))},e.prototype.getDocumentsMatchingQuery=function(e,t,n){var r=this;b(!t.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var i=je(),o=t.path.length+1,a={};if(n.isEqual(_e.MIN)){var s=t.path.toArray();a.range=IDBKeyRange.lowerBound(s)}else{var u=t.path.toArray(),c=this.serializer.toDbTimestampKey(n);a.range=IDBKeyRange.lowerBound([u,c],!0),a.index=fn.collectionReadTimeIndex}return $t(e).iterate(a,(function(e,n,a){if(e.length===o){var s=r.serializer.fromDbRemoteDocument(n);t.path.isPrefixOf(s.key.path)?s instanceof Kt&&t.matches(s)&&(i=i.insert(s.key,s)):a.done()}})).next((function(){return i}))},e.prototype.getNewDocumentChanges=function(e,t){var n=this,r=Pe(),i=this.serializer.toDbTimestampKey(t),o=$t(e),a=IDBKeyRange.lowerBound(i,!0);return o.iterate({index:fn.readTimeIndex,range:a},(function(e,t){var o=n.serializer.fromDbRemoteDocument(t);r=r.insert(o.key,o),i=t.readTime})).next((function(){return{changedDocs:r,readTime:n.serializer.fromDbTimestampKey(i)}}))},e.prototype.getLastDocumentChange=function(e){var t,n=this,r=$t(e),i=_e.MIN;return r.iterate({index:fn.readTimeIndex,reverse:!0},(function(e,r,o){t=n.serializer.fromDbRemoteDocument(r),r.readTime&&(i=n.serializer.fromDbTimestampKey(r.readTime)),o.done()})).next((function(){return{changedDoc:t,readTime:i}}))},e.prototype.newChangeBuffer=function(t){return new e.RemoteDocumentChangeBuffer(this,!!t&&t.trackRemovals)},e.prototype.getSize=function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))},e.prototype.getMetadata=function(e){return Xt(e).get(pn.key).next((function(e){return b(!!e,"Missing document cache metadata"),e}))},e.prototype.setMetadata=function(e,t){return Xt(e).put(pn.key,t)},e.prototype.maybeDecodeDocument=function(e){if(e){var t=this.serializer.fromDbRemoteDocument(e);return t instanceof Gt&&t.version.isEqual(_e.forDeletedDoc())?null:t}return null},e.RemoteDocumentChangeBuffer=function(e){function t(t,n){var r=e.call(this)||this;return r.documentCache=t,r.trackRemovals=n,r.documentSizes=new Ht((function(e){return e.toString()})),r}return a.__extends(t,e),t.prototype.applyChanges=function(e){var t=this,n=[],r=0,i=new xe((function(e,t){return X(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(o,a){var s=t.documentSizes.get(o);if(b(void 0!==s,"Cannot modify a document that wasn't read (for "+o+")"),a){b(!t.readTime.isEqual(_e.MIN),"Cannot add a document with a read time of zero");var u=t.documentCache.serializer.toDbRemoteDocument(a,t.readTime);i=i.add(o.path.popLast());var c=en(u);r+=c-s,n.push(t.documentCache.addEntry(e,o,u))}else if(r-=s,t.trackRemovals){var l=t.documentCache.serializer.toDbRemoteDocument(new Gt(o,_e.forDeletedDoc()),t.readTime);n.push(t.documentCache.addEntry(e,o,l))}else n.push(t.documentCache.removeEntry(e,o))})),i.forEach((function(r){n.push(t.documentCache.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.documentCache.updateMetadata(e,r)),Ge.waitFor(n)},t.prototype.getFromCache=function(e,t){var n=this;return this.documentCache.getSizedEntry(e,t).next((function(e){return null===e?(n.documentSizes.set(t,0),null):(n.documentSizes.set(t,e.size),e.maybeDocument)}))},t.prototype.getAllFromCache=function(e,t){var n=this;return this.documentCache.getSizedEntries(e,t).next((function(e){var t=e.maybeDocuments;return e.sizeMap.forEach((function(e,t){n.documentSizes.set(e,t)})),t}))},t}(Yt),e}();function Xt(e){return qn.getStore(e,pn.store)}function $t(e){return qn.getStore(e,fn.store)}function Zt(e){return e.path.toArray()}function en(e){var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw v("Unknown remote document type");t=e.noDocument}return JSON.stringify(t).length}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tn=function(){function e(){this.collectionParentIndex=new nn}return e.prototype.addToCollectionParentIndex=function(e,t){return this.collectionParentIndex.add(t),Ge.resolve()},e.prototype.getCollectionParents=function(e,t){return Ge.resolve(this.collectionParentIndex.getEntries(t))},e}(),nn=function(){function e(){this.index={}}return e.prototype.add=function(e){b(e.length%2==1,"Expected a collection path.");var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new xe(le.comparator),i=!r.has(n);return this.index[t]=r.add(n),i},e.prototype.has=function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)},e.prototype.getEntries=function(e){return(this.index[e]||new xe(le.comparator)).toArray()},e}(),rn=9,on=function(){function e(e){this.serializer=e}return e.prototype.createOrUpgrade=function(e,t,n,r){var i=this;b(n<r&&n>=0&&r<=rn,"Unexpected schema upgrade from v"+n+" to v{toVersion}.");var o=new Je(t);n<1&&r>=1&&(function(e){e.createObjectStore(sn.store)}(e),function(e){e.createObjectStore(un.store,{keyPath:un.keyPath}),e.createObjectStore(cn.store,{keyPath:cn.keyPath,autoIncrement:!0}).createIndex(cn.userMutationsIndex,cn.userMutationsKeyPath,{unique:!0}),e.createObjectStore(ln.store)}(e),bn(e),function(e){e.createObjectStore(fn.store)}(e));var a=Ge.resolve();return n<3&&r>=3&&(0!==n&&(!function(e){e.deleteObjectStore(gn.store),e.deleteObjectStore(mn.store),e.deleteObjectStore(yn.store)}(e),bn(e)),a=a.next((function(){return function(e){var t=e.store(yn.store),n=new yn(0,0,_e.MIN.toTimestamp(),0);return t.put(yn.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(a=a.next((function(){return function(e,t){return t.store(cn.store).loadAll().next((function(n){e.deleteObjectStore(cn.store),e.createObjectStore(cn.store,{keyPath:cn.keyPath,autoIncrement:!0}).createIndex(cn.userMutationsIndex,cn.userMutationsKeyPath,{unique:!0});var r=t.store(cn.store),i=n.map((function(e){return r.put(e)}));return Ge.waitFor(i)}))}(e,o)}))),a=a.next((function(){!function(e){e.createObjectStore(wn.store,{keyPath:wn.keyPath})}(e)}))),n<5&&r>=5&&(a=a.next((function(){return i.removeAcknowledgedMutations(o)}))),n<6&&r>=6&&(a=a.next((function(){return function(e){e.createObjectStore(pn.store)}(e),i.addDocumentGlobal(o)}))),n<7&&r>=7&&(a=a.next((function(){return i.ensureSequenceNumbers(o)}))),n<8&&r>=8&&(a=a.next((function(){return i.createCollectionParentIndex(e,o)}))),n<9&&r>=9&&(a=a.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e),function(e){var t=e.objectStore(fn.store);t.createIndex(fn.readTimeIndex,fn.readTimeIndexPath,{unique:!1}),t.createIndex(fn.collectionReadTimeIndex,fn.collectionReadTimeIndexPath,{unique:!1})}(t)}))),a},e.prototype.addDocumentGlobal=function(e){var t=0;return e.store(fn.store).iterate((function(e,n){t+=en(n)})).next((function(){var n=new pn(t);return e.store(pn.store).put(pn.key,n)}))},e.prototype.removeAcknowledgedMutations=function(e){var t=this,n=e.store(un.store),r=e.store(cn.store);return n.loadAll().next((function(n){return Ge.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.loadAll(cn.userMutationsIndex,i).next((function(r){return Ge.forEach(r,(function(r){b(r.userId===n.userId,"Cannot process batch "+r.batchId+" from unexpected user");var i=t.serializer.fromDbMutationBatch(r);return rt(e,n.userId,i).next((function(){}))}))}))}))}))},e.prototype.ensureSequenceNumbers=function(e){var t=e.store(gn.store),n=e.store(fn.store);return pt(e).next((function(e){var r=[];return n.iterate((function(n,i){var o=new le(n),a=function(e){return[0,Te(e)]}(o);r.push(t.get(a).next((function(n){return n?Ge.resolve():function(n){return t.put(new gn(0,Te(n),e))}(o)})))})).next((function(){return Ge.waitFor(r)}))}))},e.prototype.createCollectionParentIndex=function(e,t){e.createObjectStore(vn.store,{keyPath:vn.keyPath});var n=t.store(vn.store),r=new nn,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:Te(i)})}};return t.store(fn.store).iterate({keysOnly:!0},(function(e,t){var n=new le(e);return i(n.popLast())})).next((function(){return t.store(ln.store).iterate({keysOnly:!0},(function(e,t){e[0];var n=e[1],r=(e[2],Ee(n));return i(r.popLast())}))}))},e}();var an=function(e,t){this.seconds=e,this.nanoseconds=t},sn=function(){function e(e,t,n){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=n}return e.store="owner",e.key="owner",e}();var un=function(){function e(e,t,n){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=n}return e.store="mutationQueues",e.keyPath="userId",e}(),cn=function(){function e(e,t,n,r,i){this.userId=e,this.batchId=t,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i}return e.store="mutations",e.keyPath="batchId",e.userMutationsIndex="userMutationsIndex",e.userMutationsKeyPath=["userId","batchId"],e}();var ln=function(){function e(){}return e.prefixForUser=function(e){return[e]},e.prefixForPath=function(e,t){return[e,Te(t)]},e.key=function(e,t,n){return[e,Te(t),n]},e.store="documentMutations",e.PLACEHOLDER=new e,e}();var hn=function(e,t){this.path=e,this.readTime=t},dn=function(e,t){this.path=e,this.version=t},fn=function(){function e(e,t,n,r,i,o){this.unknownDocument=e,this.noDocument=t,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o}return e.store="remoteDocuments",e.readTimeIndex="readTimeIndex",e.readTimeIndexPath="readTime",e.collectionReadTimeIndex="collectionReadTimeIndex",e.collectionReadTimeIndexPath=["parentPath","readTime"],e}(),pn=function(){function e(e){this.byteSize=e}return e.store="remoteDocumentGlobal",e.key="remoteDocumentGlobalKey",e}();var mn=function(){function e(e,t,n,r,i,o,a){this.targetId=e,this.canonicalId=t,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=a}return e.store="targets",e.keyPath="targetId",e.queryTargetsIndexName="queryTargetsIndex",e.queryTargetsKeyPath=["canonicalId","targetId"],e}(),gn=function(){function e(e,t,n){this.targetId=e,this.path=t,this.sequenceNumber=n,b(0===e==(void 0!==n),"A target-document row must either have targetId == 0 and a defined sequence number, or a non-zero targetId and no sequence number")}return e.store="targetDocuments",e.keyPath=["targetId","path"],e.documentTargetsIndex="documentTargetsIndex",e.documentTargetsKeyPath=["path","targetId"],e}(),yn=function(){function e(e,t,n,r){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=n,this.targetCount=r}return e.key="targetGlobalKey",e.store="targetGlobal",e}(),vn=function(){function e(e,t){this.collectionId=e,this.parent=t}return e.store="collectionParents",e.keyPath=["collectionId","parent"],e}();function bn(e){e.createObjectStore(gn.store,{keyPath:gn.keyPath}).createIndex(gn.documentTargetsIndex,gn.documentTargetsKeyPath,{unique:!0}),e.createObjectStore(mn.store,{keyPath:mn.keyPath}).createIndex(mn.queryTargetsIndexName,mn.queryTargetsKeyPath,{unique:!0}),e.createObjectStore(yn.store)}var wn=function(){function e(e,t,n,r){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=n,this.inForeground=r}return e.store="clientMetadata",e.keyPath="clientId",e}();var Tn,Sn=[un.store,cn.store,ln.store,fn.store,mn.store,sn.store,yn.store,gn.store],In=a.__spreadArrays(Sn,[wn.store]),En=a.__spreadArrays(In,[pn.store]),Cn=a.__spreadArrays(En,[vn.store]),_n=function(){function e(){this.collectionParentsCache=new nn}return e.prototype.addToCollectionParentIndex=function(e,t){var n=this;if(b(t.length%2==1,"Expected a collection path."),!this.collectionParentsCache.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.collectionParentsCache.add(t)}));var o={collectionId:r,parent:Te(i)};return Dn(e).put(o)}return Ge.resolve()},e.prototype.getCollectionParents=function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[Z(t),""],!1,!0);return Dn(e).loadAll(r).next((function(e){for(var r=0,i=e;r<i.length;r++){var o=i[r];if(o.collectionId!==t)break;n.push(Ee(o.parent))}return n}))},e}();function Dn(e){return qn.getStore(e,vn.store)}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */!function(e){e[e.Listen=0]="Listen",e[e.ExistenceFilterMismatch=1]="ExistenceFilterMismatch",e[e.LimboResolution=2]="LimboResolution"}(Tn||(Tn={}));var kn=function(){function e(e,t,n,r,i,o,a){void 0===i&&(i=_e.MIN),void 0===o&&(o=_e.MIN),void 0===a&&(a=T()),this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}return e.prototype.withSequenceNumber=function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},e.prototype.withResumeToken=function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)},e.prototype.withLastLimboFreeSnapshotVersion=function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)},e.prototype.isEqual=function(e){return this.targetId===e.targetId&&this.purpose===e.purpose&&this.sequenceNumber===e.sequenceNumber&&this.snapshotVersion.isEqual(e.snapshotVersion)&&this.lastLimboFreeSnapshotVersion.isEqual(e.lastLimboFreeSnapshotVersion)&&this.resumeToken===e.resumeToken&&this.target.isEqual(e.target)},e}(),Nn=function(){function e(e){this.remoteSerializer=e}return e.prototype.fromDbRemoteDocument=function(e){if(e.document)return this.remoteSerializer.fromDocument(e.document,!!e.hasCommittedMutations);if(e.noDocument){var t=fe.fromSegments(e.noDocument.path),n=this.fromDbTimestamp(e.noDocument.readTime);return new Gt(t,n,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){t=fe.fromSegments(e.unknownDocument.path),n=this.fromDbTimestamp(e.unknownDocument.version);return new Qt(t,n)}return v("Unexpected DbRemoteDocument")},e.prototype.toDbRemoteDocument=function(e,t){var n=this.toDbTimestampKey(t),r=e.key.path.popLast().toArray();if(e instanceof Kt){var i=e.proto?e.proto:this.remoteSerializer.toDocument(e),o=e.hasCommittedMutations;return new fn(null,null,i,o,n,r)}if(e instanceof Gt){var a=e.key.path.toArray(),s=this.toDbTimestamp(e.version);o=e.hasCommittedMutations;return new fn(null,new hn(a,s),null,o,n,r)}if(e instanceof Qt){a=e.key.path.toArray();var u=this.toDbTimestamp(e.version);return new fn(new dn(a,u),null,null,!0,n,r)}return v("Unexpected MaybeDocument")},e.prototype.toDbTimestampKey=function(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]},e.prototype.fromDbTimestampKey=function(e){var t=new Ce(e[0],e[1]);return _e.fromTimestamp(t)},e.prototype.toDbTimestamp=function(e){var t=e.toTimestamp();return new an(t.seconds,t.nanoseconds)},e.prototype.fromDbTimestamp=function(e){var t=new Ce(e.seconds,e.nanoseconds);return _e.fromTimestamp(t)},e.prototype.toDbMutationBatch=function(e,t){var n=this,r=t.baseMutations.map((function(e){return n.remoteSerializer.toMutation(e)})),i=t.mutations.map((function(e){return n.remoteSerializer.toMutation(e)}));return new cn(e,t.batchId,t.localWriteTime.toMillis(),r,i)},e.prototype.fromDbMutationBatch=function(e){var t=this,n=(e.baseMutations||[]).map((function(e){return t.remoteSerializer.fromMutation(e)})),r=e.mutations.map((function(e){return t.remoteSerializer.fromMutation(e)})),i=Ce.fromMillis(e.localWriteTimeMs);return new ze(e.batchId,i,n,r)},e.prototype.toDbResourcePaths=function(e){var t=[];return e.forEach((function(e){t.push(Te(e.path))})),t},e.prototype.fromDbResourcePaths=function(e){for(var t=qe(),n=0,r=e;n<r.length;n++){var i=r[n];t=t.add(new fe(Ee(i)))}return t},e.prototype.fromDbTarget=function(e){var t,n=this.fromDbTimestamp(e.readTime),r=void 0!==e.lastLimboFreeSnapshotVersion?this.fromDbTimestamp(e.lastLimboFreeSnapshotVersion):_e.MIN,i=e.resumeToken;return t=void 0!==e.query.documents?this.remoteSerializer.fromDocumentsTarget(e.query):this.remoteSerializer.fromQueryTarget(e.query),new kn(t,e.targetId,Tn.Listen,e.lastListenSequenceNumber,n,r,i)},e.prototype.toDbTarget=function(e){b(Tn.Listen===e.purpose,"Only queries with purpose "+Tn.Listen+" may be stored, got "+e.purpose);var t,n,r=this.toDbTimestamp(e.snapshotVersion),i=this.toDbTimestamp(e.lastLimboFreeSnapshotVersion);return t=e.target.isDocumentQuery()?this.remoteSerializer.toDocumentsTarget(e.target):this.remoteSerializer.toQueryTarget(e.target),e.resumeToken instanceof Uint8Array?(b(He.isMockPersistence(),"Persisting non-string stream tokens is only supported with mock persistence ."),n=e.resumeToken.toString()):n=e.resumeToken,new mn(e.targetId,e.target.canonicalId(),r,n,e.sequenceNumber,i,t)},e}();
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function An(e,t){var n=e[0],r=e[1],i=t[0],o=t[1],a=X(n,i);return 0===a?X(r,o):a}var xn=function(){function e(e){this.maxElements=e,this.buffer=new xe(An),this.previousIndex=0}return e.prototype.nextIndex=function(){return++this.previousIndex},e.prototype.addElement=function(e){var t=[e,this.nextIndex()];if(this.buffer.size<this.maxElements)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();An(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}},Object.defineProperty(e.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!0,configurable:!0}),e}(),Mn={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Ln=function(){function e(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}return e.withCacheSize=function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},e.COLLECTION_DISABLED=-1,e.MINIMUM_CACHE_SIZE_BYTES=1048576,e.DEFAULT_CACHE_SIZE_BYTES=41943040,e.DEFAULT_COLLECTION_PERCENTILE=10,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,e.DEFAULT=new e(e.DEFAULT_CACHE_SIZE_BYTES,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),e.DISABLED=new e(e.COLLECTION_DISABLED,0,0),e}(),Pn=function(){function e(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.hasRun=!1,this.gcTask=null}return e.prototype.start=function(){b(null===this.gcTask,"Cannot start an already started LruScheduler"),this.garbageCollector.params.cacheSizeCollectionThreshold!==Ln.COLLECTION_DISABLED&&this.scheduleGC()},e.prototype.stop=function(){this.gcTask&&(this.gcTask.cancel(),this.gcTask=null)},Object.defineProperty(e.prototype,"started",{get:function(){return null!==this.gcTask},enumerable:!0,configurable:!0}),e.prototype.scheduleGC=function(){var e=this;b(null===this.gcTask,"Cannot schedule GC while a task is pending");var t=this.hasRun?3e5:6e4;m("LruGarbageCollector","Garbage collection scheduled in "+t+"ms"),this.gcTask=this.asyncQueue.enqueueAfterDelay(ne.LruGarbageCollection,t,(function(){return e.gcTask=null,e.hasRun=!0,e.localStore.collectGarbage(e.garbageCollector).then((function(){return e.scheduleGC()})).catch(Un)}))},e}(),On=function(){function e(e,t){this.delegate=e,this.params=t}return e.prototype.calculateTargetCount=function(e,t){return this.delegate.getSequenceNumberCount(e).next((function(e){return Math.floor(t/100*e)}))},e.prototype.nthSequenceNumber=function(e,t){var n=this;if(0===t)return Ge.resolve(ue.INVALID);var r=new xn(t);return this.delegate.forEachTarget(e,(function(e){return r.addElement(e.sequenceNumber)})).next((function(){return n.delegate.forEachOrphanedDocumentSequenceNumber(e,(function(e){return r.addElement(e)}))})).next((function(){return r.maxValue}))},e.prototype.removeTargets=function(e,t,n){return this.delegate.removeTargets(e,t,n)},e.prototype.removeOrphanedDocuments=function(e,t){return this.delegate.removeOrphanedDocuments(e,t)},e.prototype.collect=function(e,t){var n=this;return this.params.cacheSizeCollectionThreshold===Ln.COLLECTION_DISABLED?(m("LruGarbageCollector","Garbage collection skipped; disabled"),Ge.resolve(Mn)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(m("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),Mn):n.runGarbageCollection(e,t)}))},e.prototype.getCacheSize=function(e){return this.delegate.getCacheSize(e)},e.prototype.runGarbageCollection=function(e,t){var n,r,o,a,s,u,c,l=this,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>l.params.maximumSequenceNumbersToCollect?(m("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+l.params.maximumSequenceNumbersToCollect+" from "+t),r=l.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),l.nthSequenceNumber(e,r)})).next((function(r){return n=r,s=Date.now(),l.removeTargets(e,n,t)})).next((function(t){return o=t,u=Date.now(),l.removeOrphanedDocuments(e,n)})).next((function(e){(c=Date.now(),f()<=i.DEBUG)&&m("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(a-h)+"ms\n\tDetermined least recently used "+r+" in "+(s-a)+"ms\n\tRemoved "+o+" targets in "+(u-s)+"ms\n\tRemoved "+e+" documents in "+(c-u)+"ms\nTotal Duration: "+(c-h)+"ms");return Ge.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:e})}))},e}(),Rn=function(){function e(){this.onCommittedListeners=[]}return e.prototype.addOnCommittedListener=function(e){this.onCommittedListeners.push(e)},e.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach((function(e){return e()}))},e}(),jn="IndexedDbPersistence",Bn="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Fn="Another tab has exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `synchronizeTabs:true` in all tabs.",Vn=function(e){function t(t,n){var r=e.call(this)||this;return r.simpleDbTransaction=t,r.currentSequenceNumber=n,r}return a.__extends(t,e),t}(Rn),qn=function(){function e(t,n,r,i,o,a,s,u){if(this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.queue=a,this.sequenceNumberSyncer=u,this._started=!1,this.isPrimary=!1,this.networkEnabled=!0,this.windowUnloadHandler=null,this.inForeground=!1,this.documentVisibilityHandler=null,this.clientMetadataRefresher=null,this.lastGarbageCollectionTime=Number.NEGATIVE_INFINITY,this.primaryStateListener=function(e){return Promise.resolve()},this.referenceDelegate=new Kn(this,o),this.dbName=n+e.MAIN_DATABASE,this.serializer=new Nn(s),this.document=i.document,this.targetCache=new ht(this.referenceDelegate,this.serializer),this.indexManager=new _n,this.remoteDocumentCache=new Jt(this.serializer,this.indexManager),!i.window||!i.window.localStorage)throw new I(S.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");this.window=i.window,this.webStorage=this.window.localStorage}return e.getStore=function(e,t){if(e instanceof Vn)return He.getStore(e.simpleDbTransaction,t);throw v("IndexedDbPersistence must use instances of IndexedDbTransaction")},e.createIndexedDbPersistence=function(t){return a.__awaiter(this,void 0,void 0,(function(){var n;return a.__generator(this,(function(r){switch(r.label){case 0:if(!e.isAvailable())throw new I(S.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");return[4,(n=new e(t.allowTabSynchronization,t.persistenceKey,t.clientId,t.platform,t.lruParams,t.queue,t.serializer,t.sequenceNumberSyncer)).start()];case 1:return r.sent(),[2,n]}}))}))},e.prototype.start=function(){var e=this;return b(!this.started,"IndexedDbPersistence double-started!"),b(null!==this.window,"Expected 'window' to be defined"),He.openOrCreate(this.dbName,rn,new on(this.serializer)).then((function(t){return e.simpleDb=t,e.updateClientMetadataAndTryBecomePrimary()})).then((function(){return e.attachVisibilityHandler(),e.attachWindowUnloadHook(),e.scheduleClientMetadataAndPrimaryLeaseRefreshes(),e.simpleDb.runTransaction("readonly-idempotent",[yn.store],(function(e){return pt(e)}))})).then((function(t){e.listenSequence=new ue(t,e.sequenceNumberSyncer)})).then((function(){e._started=!0})).catch((function(t){return e.simpleDb&&e.simpleDb.close(),Promise.reject(t)}))},e.prototype.setPrimaryStateListener=function(e){var t=this;return this.primaryStateListener=function(n){return a.__awaiter(t,void 0,void 0,(function(){return a.__generator(this,(function(t){return this.started?[2,e(n)]:[2]}))}))},e(this.isPrimary)},e.prototype.setDatabaseDeletedListener=function(e){var t=this;this.simpleDb.setVersionChangeListener((function(n){return a.__awaiter(t,void 0,void 0,(function(){return a.__generator(this,(function(t){switch(t.label){case 0:return null!==n.newVersion?[3,2]:[4,e()];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))},e.prototype.setNetworkEnabled=function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.queue.enqueueAndForget((function(){return a.__awaiter(t,void 0,void 0,(function(){return a.__generator(this,(function(e){switch(e.label){case 0:return this.started?[4,this.updateClientMetadataAndTryBecomePrimary()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))})))},e.prototype.updateClientMetadataAndTryBecomePrimary=function(){var e=this;return this.simpleDb.runTransaction("readwrite-idempotent",Cn,(function(t){return zn(t).put(new wn(e.clientId,Date.now(),e.networkEnabled,e.inForeground)).next((function(){if(e.isPrimary)return e.verifyPrimaryLease(t).next((function(t){t||(e.isPrimary=!1,e.queue.enqueueAndForget((function(){return e.primaryStateListener(!1)})))}))})).next((function(){return e.canActAsPrimary(t)})).next((function(n){return e.isPrimary&&!n?e.releasePrimaryLeaseIfHeld(t).next((function(){return!1})):!!n&&e.acquireOrExtendPrimaryLease(t).next((function(){return!0}))}))})).catch((function(t){if(!e.allowTabSynchronization)throw t;return m(jn,"Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.queue.enqueueAndForget((function(){return e.primaryStateListener(t)})),e.isPrimary=t}))},e.prototype.verifyPrimaryLease=function(e){var t=this;return Wn(e).get(sn.key).next((function(e){return Ge.resolve(t.isLocalClient(e))}))},e.prototype.removeClientMetadata=function(e){return zn(e).delete(this.clientId)},e.prototype.maybeGarbageCollectMultiClientState=function(){return a.__awaiter(this,void 0,void 0,(function(){var t=this;return a.__generator(this,(function(n){switch(n.label){case 0:return!this.isPrimary||this.isWithinAge(this.lastGarbageCollectionTime,18e5)?[3,2]:(this.lastGarbageCollectionTime=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary-idempotent",(function(n){var r=e.getStore(n,wn.store);return r.loadAll().next((function(e){var n=t.filterActiveClients(e,18e5),i=e.filter((function(e){return-1===n.indexOf(e)}));return Ge.forEach(i,(function(e){return r.delete(e.clientId)})).next((function(){return i}))}))}))]);case 1:n.sent().forEach((function(e){t.window.localStorage.removeItem(t.zombiedClientLocalStorageKey(e.clientId))})),n.label=2;case 2:return[2]}}))}))},e.prototype.scheduleClientMetadataAndPrimaryLeaseRefreshes=function(){var e=this;this.clientMetadataRefresher=this.queue.enqueueAfterDelay(ne.ClientMetadataRefresh,4e3,(function(){return e.updateClientMetadataAndTryBecomePrimary().then((function(){return e.maybeGarbageCollectMultiClientState()})).then((function(){return e.scheduleClientMetadataAndPrimaryLeaseRefreshes()}))}))},e.prototype.isLocalClient=function(e){return!!e&&e.ownerId===this.clientId},e.prototype.canActAsPrimary=function(e){var t=this;return Wn(e).get(sn.key).next((function(n){if(null!==n&&t.isWithinAge(n.leaseTimestampMs,5e3)&&!t.isClientZombied(n.ownerId)){if(t.isLocalClient(n)&&t.networkEnabled)return!0;if(!t.isLocalClient(n)){if(!n.allowTabSynchronization)throw new I(S.FAILED_PRECONDITION,Fn);return!1}}return!(!t.networkEnabled||!t.inForeground)||zn(e).loadAll().next((function(e){return void 0===t.filterActiveClients(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&m(jn,"Client "+(e?"is":"is not")+" eligible for a primary lease."),e}))},e.prototype.shutdown=function(){return a.__awaiter(this,void 0,void 0,(function(){var e=this;return a.__generator(this,(function(t){switch(t.label){case 0:return this._started=!1,this.markClientZombied(),this.clientMetadataRefresher&&(this.clientMetadataRefresher.cancel(),this.clientMetadataRefresher=null),this.detachVisibilityHandler(),this.detachWindowUnloadHook(),[4,this.simpleDb.runTransaction("readwrite-idempotent",[sn.store,wn.store],(function(t){return e.releasePrimaryLeaseIfHeld(t).next((function(){return e.removeClientMetadata(t)}))}))];case 1:return t.sent(),this.simpleDb.close(),this.removeClientZombiedEntry(),[2]}}))}))},e.prototype.filterActiveClients=function(e,t){var n=this;return e.filter((function(e){return n.isWithinAge(e.updateTimeMs,t)&&!n.isClientZombied(e.clientId)}))},e.prototype.getActiveClients=function(){var e=this;return this.simpleDb.runTransaction("readonly-idempotent",[wn.store],(function(t){return zn(t).loadAll().next((function(t){return e.filterActiveClients(t,18e5).map((function(e){return e.clientId}))}))}))},e.clearPersistence=function(t){return a.__awaiter(this,void 0,void 0,(function(){var n;return a.__generator(this,(function(r){switch(r.label){case 0:return e.isAvailable()?(n=t+e.MAIN_DATABASE,[4,He.delete(n)]):[2,Promise.resolve()];case 1:return r.sent(),[2]}}))}))},Object.defineProperty(e.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),e.prototype.getMutationQueue=function(e){return b(this.started,"Cannot initialize MutationQueue before persistence is started."),tt.forUser(e,this.serializer,this.indexManager,this.referenceDelegate)},e.prototype.getTargetCache=function(){return b(this.started,"Cannot initialize TargetCache before persistence is started."),this.targetCache},e.prototype.getRemoteDocumentCache=function(){return b(this.started,"Cannot initialize RemoteDocumentCache before persistence is started."),this.remoteDocumentCache},e.prototype.getIndexManager=function(){return b(this.started,"Cannot initialize IndexManager before persistence is started."),this.indexManager},e.prototype.runTransaction=function(e,t,n){var r=this;m(jn,"Starting transaction:",e);var i,o=t.endsWith("idempotent"),a=t.startsWith("readonly")?o?"readonly-idempotent":"readonly":o?"readwrite-idempotent":"readwrite";return this.simpleDb.runTransaction(a,Cn,(function(o){return i=new Vn(o,r.listenSequence.next()),"readwrite-primary"===t||"readwrite-primary-idempotent"===t?r.verifyPrimaryLease(o).next((function(e){return!!e||r.canActAsPrimary(o)})).next((function(t){if(!t)throw g("Failed to obtain primary lease for action '"+e+"'."),r.isPrimary=!1,r.queue.enqueueAndForget((function(){return r.primaryStateListener(!1)})),new I(S.FAILED_PRECONDITION,Bn);return n(i)})).next((function(e){return r.acquireOrExtendPrimaryLease(o).next((function(){return e}))})):r.verifyAllowTabSynchronization(o).next((function(){return n(i)}))})).then((function(e){return i.raiseOnCommittedEvent(),e}))},e.prototype.verifyAllowTabSynchronization=function(e){var t=this;return Wn(e).get(sn.key).next((function(e){if(null!==e&&t.isWithinAge(e.leaseTimestampMs,5e3)&&!t.isClientZombied(e.ownerId)&&!t.isLocalClient(e)&&!e.allowTabSynchronization)throw new I(S.FAILED_PRECONDITION,Fn)}))},e.prototype.acquireOrExtendPrimaryLease=function(e){var t=new sn(this.clientId,this.allowTabSynchronization,Date.now());return Wn(e).put(sn.key,t)},e.isAvailable=function(){return He.isAvailable()},e.buildStoragePrefix=function(e){var t=e.databaseId.projectId;return e.databaseId.isDefaultDatabase||(t+="."+e.databaseId.database),"firestore/"+e.persistenceKey+"/"+t+"/"},e.prototype.releasePrimaryLeaseIfHeld=function(e){var t=this,n=Wn(e);return n.get(sn.key).next((function(e){return t.isLocalClient(e)?(m(jn,"Releasing primary lease."),n.delete(sn.key)):Ge.resolve()}))},e.prototype.isWithinAge=function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(g("Detected an update time that is in the future: "+e+" > "+n),!1))},e.prototype.attachVisibilityHandler=function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.documentVisibilityHandler=function(){e.queue.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.updateClientMetadataAndTryBecomePrimary()}))},this.document.addEventListener("visibilitychange",this.documentVisibilityHandler),this.inForeground="visible"===this.document.visibilityState)},e.prototype.detachVisibilityHandler=function(){this.documentVisibilityHandler&&(b(null!==this.document&&"function"==typeof this.document.addEventListener,"Expected 'document.addEventListener' to be a function"),this.document.removeEventListener("visibilitychange",this.documentVisibilityHandler),this.documentVisibilityHandler=null)},e.prototype.attachWindowUnloadHook=function(){var e=this;"function"==typeof this.window.addEventListener&&(this.windowUnloadHandler=function(){e.markClientZombied(),e.queue.enqueueAndForget((function(){return e.shutdown()}))},this.window.addEventListener("unload",this.windowUnloadHandler))},e.prototype.detachWindowUnloadHook=function(){this.windowUnloadHandler&&(b("function"==typeof this.window.removeEventListener,"Expected 'window.removeEventListener' to be a function"),this.window.removeEventListener("unload",this.windowUnloadHandler),this.windowUnloadHandler=null)},e.prototype.isClientZombied=function(e){try{var t=null!==this.webStorage.getItem(this.zombiedClientLocalStorageKey(e));return m(jn,"Client '"+e+"' "+(t?"is":"is not")+" zombied in LocalStorage"),t}catch(e){return g(jn,"Failed to get zombied client id.",e),!1}},e.prototype.markClientZombied=function(){try{this.webStorage.setItem(this.zombiedClientLocalStorageKey(this.clientId),String(Date.now()))}catch(e){g("Failed to set zombie client id.",e)}},e.prototype.removeClientZombiedEntry=function(){try{this.webStorage.removeItem(this.zombiedClientLocalStorageKey(this.clientId))}catch(e){}},e.prototype.zombiedClientLocalStorageKey=function(e){return"firestore_zombie_"+this.persistenceKey+"_"+e},e.MAIN_DATABASE="main",e}();function Un(e){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(t){if(!function(e){return e.code===S.FAILED_PRECONDITION&&e.message===Bn}(e))throw e;return m(jn,"Unexpectedly lost primary lease"),[2]}))}))}function Wn(e){return e.store(sn.store)}function zn(e){return e.store(wn.store)}var Kn=function(){function e(e,t){this.db=e,this.inMemoryPins=null,this.garbageCollector=new On(this,t)}return e.prototype.getSequenceNumberCount=function(e){var t=this.orphanedDocmentCount(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))},e.prototype.orphanedDocmentCount=function(e){var t=0;return this.forEachOrphanedDocumentSequenceNumber(e,(function(e){t++})).next((function(){return t}))},e.prototype.forEachTarget=function(e,t){return this.db.getTargetCache().forEachTarget(e,t)},e.prototype.forEachOrphanedDocumentSequenceNumber=function(e,t){return this.forEachOrphanedDocument(e,(function(e,n){return t(n)}))},e.prototype.setInMemoryPins=function(e){this.inMemoryPins=e},e.prototype.addReference=function(e,t){return Gn(e,t)},e.prototype.removeReference=function(e,t){return Gn(e,t)},e.prototype.removeTargets=function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)},e.prototype.removeMutationReference=function(e,t){return Gn(e,t)},e.prototype.isPinned=function(e,t){return this.inMemoryPins.containsKey(t)?Ge.resolve(!0):function(e,t){var n=!1;return st(e).iterateSerial((function(r){return nt(e,r,t).next((function(e){return e&&(n=!0),Ge.resolve(!e)}))})).next((function(){return n}))}(e,t)},e.prototype.removeOrphanedDocuments=function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.forEachOrphanedDocument(e,(function(a,s){if(s<=t){var u=n.isPinned(e,a).next((function(t){if(!t)return o++,r.getEntry(e,a).next((function(){return r.removeEntry(a),mt(e).delete([0,Te(a.path)])}))}));i.push(u)}})).next((function(){return Ge.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return o}))},e.prototype.removeTarget=function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)},e.prototype.updateLimboDocument=function(e,t){return Gn(e,t)},e.prototype.forEachOrphanedDocument=function(e,t){var n,r=mt(e),i=ue.INVALID;return r.iterate({index:gn.documentTargetsIndex},(function(e,r){var o=e[0],a=(e[1],r.path),s=r.sequenceNumber;0===o?(i!==ue.INVALID&&t(new fe(Ee(n)),i),i=s,n=a):i=ue.INVALID})).next((function(){i!==ue.INVALID&&t(new fe(Ee(n)),i)}))},e.prototype.getCacheSize=function(e){return this.db.getRemoteDocumentCache().getSize(e)},e}();function Gn(e,t){return mt(e).put(function(e,t){return new gn(0,Te(e.path),t)}(t,e.currentSequenceNumber))}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qn=Number,Hn=Qn.MIN_SAFE_INTEGER||-(Math.pow(2,53)-1),Yn=Qn.MAX_SAFE_INTEGER||Math.pow(2,53)-1,Jn=Qn.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e};function Xn(e){return null==e}function $n(e){return Jn(e)&&e<=Yn&&e>=Hn}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Zn,er=function(){function e(e,t,n,r,i,o,a){void 0===t&&(t=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.memoizedCanonicalId=null}return e.prototype.canonicalId=function(){if(null===this.memoizedCanonicalId){var e=this.path.canonicalString();null!==this.collectionGroup&&(e+="|cg:"+this.collectionGroup),e+="|f:";for(var t=0,n=this.filters;t<n.length;t++){e+=n[t].canonicalId(),e+=","}e+="|ob:";for(var r=0,i=this.orderBy;r<i.length;r++){e+=i[r].canonicalId(),e+=","}Xn(this.limit)||(e+="|l:",e+=this.limit),this.startAt&&(e+="|lb:",e+=this.startAt.canonicalId()),this.endAt&&(e+="|ub:",e+=this.endAt.canonicalId()),this.memoizedCanonicalId=e}return this.memoizedCanonicalId},e.prototype.toString=function(){var e=this.path.canonicalString();return null!==this.collectionGroup&&(e+=" collectionGroup="+this.collectionGroup),this.filters.length>0&&(e+=", filters: ["+this.filters.join(", ")+"]"),Xn(this.limit)||(e+=", limit: "+this.limit),this.orderBy.length>0&&(e+=", orderBy: ["+this.orderBy.join(", ")+"]"),this.startAt&&(e+=", startAt: "+this.startAt.canonicalId()),this.endAt&&(e+=", endAt: "+this.endAt.canonicalId()),"Target("+e+")"},e.prototype.isEqual=function(e){if(this.limit!==e.limit)return!1;if(this.orderBy.length!==e.orderBy.length)return!1;for(var t=0;t<this.orderBy.length;t++)if(!this.orderBy[t].isEqual(e.orderBy[t]))return!1;if(this.filters.length!==e.filters.length)return!1;for(t=0;t<this.filters.length;t++)if(!this.filters[t].isEqual(e.filters[t]))return!1;return this.collectionGroup===e.collectionGroup&&(!!this.path.isEqual(e.path)&&(!(null!==this.startAt?!this.startAt.isEqual(e.startAt):null!==e.startAt)&&(null!==this.endAt?this.endAt.isEqual(e.endAt):null===e.endAt)))},e.prototype.isDocumentQuery=function(){return fe.isDocumentKey(this.path)&&null===this.collectionGroup&&0===this.filters.length},e}();
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */!function(e){e.First="F",e.Last="L"}(Zn||(Zn={}));var tr=function(){function e(e,t,n,r,i,o,a,s){void 0===t&&(t=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=Zn.First),void 0===a&&(a=null),void 0===s&&(s=null),this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=s,this.memoizedOrderBy=null,this.memoizedTarget=null,this.startAt&&this.assertValidBound(this.startAt),this.endAt&&this.assertValidBound(this.endAt)}return e.atPath=function(t){return new e(t)},Object.defineProperty(e.prototype,"orderBy",{get:function(){if(null===this.memoizedOrderBy){var e=this.getInequalityFilterField(),t=this.getFirstOrderByField();if(null!==e&&null===t)e.isKeyField()?this.memoizedOrderBy=[fr]:this.memoizedOrderBy=[new dr(e),fr];else{b(null===e||null!==t&&e.isEqual(t),"First orderBy should match inequality field."),this.memoizedOrderBy=[];for(var n=!1,r=0,i=this.explicitOrderBy;r<i.length;r++){var o=i[r];this.memoizedOrderBy.push(o),o.field.isKeyField()&&(n=!0)}if(!n){var a=this.explicitOrderBy.length>0?this.explicitOrderBy[this.explicitOrderBy.length-1].dir:lr.ASCENDING;this.memoizedOrderBy.push(a===lr.ASCENDING?fr:pr)}}}return this.memoizedOrderBy},enumerable:!0,configurable:!0}),e.prototype.addFilter=function(t){b(null==this.getInequalityFilterField()||!(t instanceof ir)||!t.isInequality()||t.field.isEqual(this.getInequalityFilterField()),"Query must only have one inequality field."),b(!this.isDocumentQuery(),"No filtering allowed for document query");var n=this.filters.concat([t]);return new e(this.path,this.collectionGroup,this.explicitOrderBy.slice(),n,this.limit,this.limitType,this.startAt,this.endAt)},e.prototype.addOrderBy=function(t){b(!this.startAt&&!this.endAt,"Bounds must be set after orderBy");var n=this.explicitOrderBy.concat([t]);return new e(this.path,this.collectionGroup,n,this.filters.slice(),this.limit,this.limitType,this.startAt,this.endAt)},e.prototype.withLimitToFirst=function(t){return new e(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),t,Zn.First,this.startAt,this.endAt)},e.prototype.withLimitToLast=function(t){return new e(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),t,Zn.Last,this.startAt,this.endAt)},e.prototype.withStartAt=function(t){return new e(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.limitType,t,this.endAt)},e.prototype.withEndAt=function(t){return new e(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.limitType,this.startAt,t)},e.prototype.asCollectionQueryAtPath=function(t){return new e(t,null,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.limitType,this.startAt,this.endAt)},e.prototype.matchesAllDocuments=function(){return 0===this.filters.length&&null===this.limit&&null==this.startAt&&null==this.endAt&&(0===this.explicitOrderBy.length||1===this.explicitOrderBy.length&&this.explicitOrderBy[0].field.isKeyField())},e.prototype.canonicalId=function(){return this.toTarget().canonicalId()+"|lt:"+this.limitType},e.prototype.toString=function(){return"Query(target="+this.toTarget().toString()+"; limitType="+this.limitType+")"},e.prototype.isEqual=function(e){return this.toTarget().isEqual(e.toTarget())&&this.limitType===e.limitType},e.prototype.docComparator=function(e,t){for(var n=!1,r=0,i=this.orderBy;r<i.length;r++){var o=i[r],a=o.compare(e,t);if(0!==a)return a;n=n||o.field.isKeyField()}return b(n,"orderBy used that doesn't compare on key field"),0},e.prototype.matches=function(e){return this.matchesPathAndCollectionGroup(e)&&this.matchesOrderBy(e)&&this.matchesFilters(e)&&this.matchesBounds(e)},e.prototype.hasLimitToFirst=function(){return!Xn(this.limit)&&this.limitType===Zn.First},e.prototype.hasLimitToLast=function(){return!Xn(this.limit)&&this.limitType===Zn.Last},e.prototype.getFirstOrderByField=function(){return this.explicitOrderBy.length>0?this.explicitOrderBy[0].field:null},e.prototype.getInequalityFilterField=function(){for(var e=0,t=this.filters;e<t.length;e++){var n=t[e];if(n instanceof ir&&n.isInequality())return n.field}return null},e.prototype.findFilterOperator=function(e){for(var t=0,n=this.filters;t<n.length;t++){var r=n[t];if(r instanceof ir&&e.indexOf(r.op)>=0)return r.op}return null},e.prototype.isDocumentQuery=function(){return this.toTarget().isDocumentQuery()},e.prototype.isCollectionGroupQuery=function(){return null!==this.collectionGroup},e.prototype.toTarget=function(){if(!this.memoizedTarget)if(this.limitType===Zn.First)this.memoizedTarget=new er(this.path,this.collectionGroup,this.orderBy,this.filters,this.limit,this.startAt,this.endAt);else{for(var e=[],t=0,n=this.orderBy;t<n.length;t++){var r=n[t],i=r.dir===lr.DESCENDING?lr.ASCENDING:lr.DESCENDING;e.push(new dr(r.field,i))}var o=this.endAt?new hr(this.endAt.position,!this.endAt.before):null,a=this.startAt?new hr(this.startAt.position,!this.startAt.before):null;this.memoizedTarget=new er(this.path,this.collectionGroup,e,this.filters,this.limit,o,a)}return this.memoizedTarget},e.prototype.matchesPathAndCollectionGroup=function(e){var t=e.key.path;return null!==this.collectionGroup?e.key.hasCollectionId(this.collectionGroup)&&this.path.isPrefixOf(t):fe.isDocumentKey(this.path)?this.path.isEqual(t):this.path.isImmediateParentOf(t)},e.prototype.matchesOrderBy=function(e){for(var t=0,n=this.explicitOrderBy;t<n.length;t++){var r=n[t];if(!r.field.isKeyField()&&null===e.field(r.field))return!1}return!0},e.prototype.matchesFilters=function(e){for(var t=0,n=this.filters;t<n.length;t++){if(!n[t].matches(e))return!1}return!0},e.prototype.matchesBounds=function(e){return!(this.startAt&&!this.startAt.sortsBeforeDocument(this.orderBy,e))&&(!this.endAt||!this.endAt.sortsBeforeDocument(this.orderBy,e))},e.prototype.assertValidBound=function(e){b(e.position.length<=this.orderBy.length,"Bound is longer than orderBy")},e}(),nr=function(){},rr=function(){function e(e){this.name=e}return e.fromString=function(t){switch(t){case"<":return e.LESS_THAN;case"<=":return e.LESS_THAN_OR_EQUAL;case"==":return e.EQUAL;case">=":return e.GREATER_THAN_OR_EQUAL;case">":return e.GREATER_THAN;case"array-contains":return e.ARRAY_CONTAINS;case"in":return e.IN;case"array-contains-any":return e.ARRAY_CONTAINS_ANY;default:return v("Unknown FieldFilter operator: "+t)}},e.prototype.toString=function(){return this.name},e.prototype.isEqual=function(e){return this.name===e.name},e.LESS_THAN=new e("<"),e.LESS_THAN_OR_EQUAL=new e("<="),e.EQUAL=new e("=="),e.GREATER_THAN=new e(">"),e.GREATER_THAN_OR_EQUAL=new e(">="),e.ARRAY_CONTAINS=new e("array-contains"),e.IN=new e("in"),e.ARRAY_CONTAINS_ANY=new e("array-contains-any"),e}(),ir=function(e){function t(t,n,r){var i=e.call(this)||this;return i.field=t,i.op=n,i.value=r,i}return a.__extends(t,e),t.create=function(e,n,r){if(e.isKeyField())return n===rr.IN?(b(r instanceof Wt,"Comparing on key with IN, but filter value not an ArrayValue"),b(r.internalValue.every((function(e){return e instanceof Vt})),"Comparing on key with IN, but an array value was not a RefValue"),new ar(e,r)):(b(r instanceof Vt,"Comparing on key, but filter value not a RefValue"),b(n!==rr.ARRAY_CONTAINS&&n!==rr.ARRAY_CONTAINS_ANY,"'"+n.toString()+"' queries don't make sense on document keys."),new or(e,n,r));if(r.isEqual(At.INSTANCE)){if(n!==rr.EQUAL)throw new I(S.INVALID_ARGUMENT,"Invalid query. Null supports only equality comparisons.");return new t(e,n,r)}if(r.isEqual(Ot.NAN)){if(n!==rr.EQUAL)throw new I(S.INVALID_ARGUMENT,"Invalid query. NaN supports only equality comparisons.");return new t(e,n,r)}return n===rr.ARRAY_CONTAINS?new sr(e,r):n===rr.IN?(b(r instanceof Wt,"IN filter has invalid value: "+r.toString()),new ur(e,r)):n===rr.ARRAY_CONTAINS_ANY?(b(r instanceof Wt,"ARRAY_CONTAINS_ANY filter has invalid value: "+r.toString()),new cr(e,r)):new t(e,n,r)},t.prototype.matches=function(e){var t=e.field(this.field);return null!==t&&this.value.typeOrder===t.typeOrder&&this.matchesComparison(t.compareTo(this.value))},t.prototype.matchesComparison=function(e){switch(this.op){case rr.LESS_THAN:return e<0;case rr.LESS_THAN_OR_EQUAL:return e<=0;case rr.EQUAL:return 0===e;case rr.GREATER_THAN:return e>0;case rr.GREATER_THAN_OR_EQUAL:return e>=0;default:return v("Unknown FieldFilter operator: "+this.op)}},t.prototype.isInequality=function(){return[rr.LESS_THAN,rr.LESS_THAN_OR_EQUAL,rr.GREATER_THAN,rr.GREATER_THAN_OR_EQUAL].indexOf(this.op)>=0},t.prototype.canonicalId=function(){return this.field.canonicalString()+this.op.toString()+this.value.toString()},t.prototype.isEqual=function(e){return e instanceof t&&(this.op.isEqual(e.op)&&this.field.isEqual(e.field)&&this.value.isEqual(e.value))},t.prototype.toString=function(){return this.field.canonicalString()+" "+this.op+" "+this.value.value()},t}(nr),or=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.matches=function(e){var t=this.value,n=fe.comparator(e.key,t.key);return this.matchesComparison(n)},t}(ir),ar=function(e){function t(t,n){var r=e.call(this,t,rr.IN,n)||this;return r.value=n,r}return a.__extends(t,e),t.prototype.matches=function(e){return this.value.internalValue.some((function(t){return e.key.isEqual(t.key)}))},t}(ir),sr=function(e){function t(t,n){return e.call(this,t,rr.ARRAY_CONTAINS,n)||this}return a.__extends(t,e),t.prototype.matches=function(e){var t=e.field(this.field);return t instanceof Wt&&t.contains(this.value)},t}(ir),ur=function(e){function t(t,n){var r=e.call(this,t,rr.IN,n)||this;return r.value=n,r}return a.__extends(t,e),t.prototype.matches=function(e){var t=this.value,n=e.field(this.field);return null!==n&&t.contains(n)},t}(ir),cr=function(e){function t(t,n){var r=e.call(this,t,rr.ARRAY_CONTAINS_ANY,n)||this;return r.value=n,r}return a.__extends(t,e),t.prototype.matches=function(e){var t=this,n=e.field(this.field);return n instanceof Wt&&n.internalValue.some((function(e){return t.value.contains(e)}))},t}(ir),lr=function(){function e(e){this.name=e}return e.prototype.toString=function(){return this.name},e.ASCENDING=new e("asc"),e.DESCENDING=new e("desc"),e}(),hr=function(){function e(e,t){this.position=e,this.before=t}return e.prototype.canonicalId=function(){for(var e=this.before?"b:":"a:",t=0,n=this.position;t<n.length;t++){e+=n[t].toString()}return e},e.prototype.sortsBeforeDocument=function(e,t){b(this.position.length<=e.length,"Bound has more components than query's orderBy");for(var n=0,r=0;r<this.position.length;r++){var i=e[r],o=this.position[r];if(i.field.isKeyField())b(o instanceof Vt,"Bound has a non-key value where the key path is being used."),n=fe.comparator(o.key,t.key);else{var a=t.field(i.field);b(null!==a,"Field should exist since document matched the orderBy already."),n=o.compareTo(a)}if(i.dir===lr.DESCENDING&&(n*=-1),0!==n)break}return this.before?n<=0:n<0},e.prototype.isEqual=function(e){if(null===e)return!1;if(this.before!==e.before||this.position.length!==e.position.length)return!1;for(var t=0;t<this.position.length;t++){var n=this.position[t],r=e.position[t];if(!n.isEqual(r))return!1}return!0},e}(),dr=function(){function e(e,t){this.field=e,void 0===t&&(t=lr.ASCENDING),this.dir=t,this.isKeyOrderBy=e.isKeyField()}return e.prototype.compare=function(e,t){var n=this.isKeyOrderBy?Kt.compareByKey(e,t):Kt.compareByField(this.field,e,t);switch(this.dir){case lr.ASCENDING:return n;case lr.DESCENDING:return-1*n;default:return v("Unknown direction: "+this.dir)}},e.prototype.canonicalId=function(){return this.field.canonicalString()+this.dir.toString()},e.prototype.toString=function(){return this.field.canonicalString()+" ("+this.dir+")"},e.prototype.isEqual=function(e){return this.dir===e.dir&&this.field.isEqual(e.field)},e}(),fr=new dr(de.keyField(),lr.ASCENDING),pr=new dr(de.keyField(),lr.DESCENDING),mr=function(){function e(){}return e.prototype.setLocalDocumentsView=function(e){this.localDocumentsView=e},e.prototype.getDocumentsMatchingQuery=function(e,t,n,r){var o=this;return b(void 0!==this.localDocumentsView,"setLocalDocumentsView() not called"),t.matchesAllDocuments()?this.executeFullCollectionScan(e,t):n.isEqual(_e.MIN)?this.executeFullCollectionScan(e,t):this.localDocumentsView.getDocuments(e,r).next((function(a){var s=o.applyQuery(t,a);return(t.hasLimitToFirst()||t.hasLimitToLast())&&o.needsRefill(t.limitType,s,r,n)?o.executeFullCollectionScan(e,t):(f()<=i.DEBUG&&m("IndexFreeQueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),t.toString()),o.localDocumentsView.getDocumentsMatchingQuery(e,t,n).next((function(e){return s.forEach((function(t){e=e.insert(t.key,t)})),e})))}))},e.prototype.applyQuery=function(e,t){var n=new xe((function(t,n){return e.docComparator(t,n)}));return t.forEach((function(t,r){r instanceof Kt&&e.matches(r)&&(n=n.add(r))})),n},e.prototype.needsRefill=function(e,t,n,r){if(n.size!==t.size)return!0;var i=e===Zn.First?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},e.prototype.executeFullCollectionScan=function(e,t){return f()<=i.DEBUG&&m("IndexFreeQueryEngine","Using full collection scan to execute query: %s",t.toString()),this.localDocumentsView.getDocumentsMatchingQuery(e,t,_e.MIN)},e}(),gr=function(){function e(e,t,n){this.remoteDocumentCache=e,this.mutationQueue=t,this.indexManager=n}return e.prototype.getDocument=function(e,t){var n=this;return this.mutationQueue.getAllMutationBatchesAffectingDocumentKey(e,t).next((function(r){return n.getDocumentInternal(e,t,r)}))},e.prototype.getDocumentInternal=function(e,t,n){return this.remoteDocumentCache.getEntry(e,t).next((function(e){for(var r=0,i=n;r<i.length;r++){e=i[r].applyToLocalView(t,e)}return e}))},e.prototype.applyLocalMutationsToDocuments=function(e,t,n){var r=Oe();return t.forEach((function(e,t){for(var i=0,o=n;i<o.length;i++){t=o[i].applyToLocalView(e,t)}r=r.insert(e,t)})),r},e.prototype.getDocuments=function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t)}))},e.prototype.getLocalViewOfDocuments=function(e,t){var n=this;return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(r){var i=n.applyLocalMutationsToDocuments(e,t,r),o=Pe();return i.forEach((function(e,t){t||(t=new Gt(e,_e.forDeletedDoc())),o=o.insert(e,t)})),o}))},e.prototype.getDocumentsMatchingQuery=function(e,t,n){return t.isDocumentQuery()?this.getDocumentsMatchingDocumentQuery(e,t.path):t.isCollectionGroupQuery()?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)},e.prototype.getDocumentsMatchingDocumentQuery=function(e,t){return this.getDocument(e,new fe(t)).next((function(e){var t=je();return e instanceof Kt&&(t=t.insert(e.key,e)),t}))},e.prototype.getDocumentsMatchingCollectionGroupQuery=function(e,t,n){var r=this;b(t.path.isEmpty(),"Currently we only support collection group queries at the root.");var i=t.collectionGroup,o=je();return this.indexManager.getCollectionParents(e,i).next((function(a){return Ge.forEach(a,(function(a){var s=t.asCollectionQueryAtPath(a.child(i));return r.getDocumentsMatchingCollectionQuery(e,s,n).next((function(e){e.forEach((function(e,t){o=o.insert(e,t)}))}))})).next((function(){return o}))}))},e.prototype.getDocumentsMatchingCollectionQuery=function(e,t,n){var r,i,o=this;return this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n).next((function(n){return r=n,o.mutationQueue.getAllMutationBatchesAffectingQuery(e,t)})).next((function(t){return i=t,o.addMissingBaseDocuments(e,i,r).next((function(e){r=e;for(var t=0,n=i;t<n.length;t++)for(var o=n[t],a=0,s=o.mutations;a<s.length;a++){var u=s[a],c=u.key,l=r.get(c),h=u.applyToLocalView(l,l,o.localWriteTime);r=h instanceof Kt?r.insert(c,h):r.remove(c)}}))})).next((function(){return r.forEach((function(e,n){t.matches(n)||(r=r.remove(e))})),r}))},e.prototype.addMissingBaseDocuments=function(e,t,n){for(var r=qe(),i=0,o=t;i<o.length;i++)for(var a=0,s=o[i].mutations;a<s.length;a++){var u=s[a];u instanceof Ct&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.remoteDocumentCache.getEntries(e,r).next((function(e){return e.forEach((function(e,t){null!==t&&t instanceof Kt&&(c=c.insert(e,t))})),c}))},e}(),yr=function(){function e(){this.refsByKey=new xe(vr.compareByKey),this.refsByTarget=new xe(vr.compareByTargetId)}return e.prototype.isEmpty=function(){return this.refsByKey.isEmpty()},e.prototype.addReference=function(e,t){var n=new vr(e,t);this.refsByKey=this.refsByKey.add(n),this.refsByTarget=this.refsByTarget.add(n)},e.prototype.addReferences=function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))},e.prototype.removeReference=function(e,t){this.removeRef(new vr(e,t))},e.prototype.removeReferences=function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))},e.prototype.removeReferencesForId=function(e){var t=this,n=fe.EMPTY,r=new vr(n,e),i=new vr(n,e+1),o=[];return this.refsByTarget.forEachInRange([r,i],(function(e){t.removeRef(e),o.push(e.key)})),o},e.prototype.removeAllReferences=function(){var e=this;this.refsByKey.forEach((function(t){return e.removeRef(t)}))},e.prototype.removeRef=function(e){this.refsByKey=this.refsByKey.delete(e),this.refsByTarget=this.refsByTarget.delete(e)},e.prototype.referencesForId=function(e){var t=fe.EMPTY,n=new vr(t,e),r=new vr(t,e+1),i=qe();return this.refsByTarget.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i},e.prototype.containsKey=function(e){var t=new vr(e,0),n=this.refsByKey.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)},e}(),vr=function(){function e(e,t){this.key=e,this.targetOrBatchId=t}return e.compareByKey=function(e,t){return fe.comparator(e.key,t.key)||X(e.targetOrBatchId,t.targetOrBatchId)},e.compareByTargetId=function(e,t){return X(e.targetOrBatchId,t.targetOrBatchId)||fe.comparator(e.key,t.key)},e}(),br=function(){function e(e,t,n){this.persistence=e,this.queryEngine=t,this.localViewReferences=new yr,this.targetDataByTarget=new De(X),this.targetIdByTarget=new Ht((function(e){return e.canonicalId()})),this.lastDocumentChangeReadTime=_e.MIN,b(e.started,"LocalStore was passed an unstarted persistence implementation"),this.persistence.referenceDelegate.setInMemoryPins(this.localViewReferences),this.mutationQueue=e.getMutationQueue(n),this.remoteDocuments=e.getRemoteDocumentCache(),this.targetCache=e.getTargetCache(),this.localDocuments=new gr(this.remoteDocuments,this.mutationQueue,this.persistence.getIndexManager()),this.queryEngine.setLocalDocumentsView(this.localDocuments)}return e.prototype.start=function(){return this.synchronizeLastDocumentChangeReadTime()},e.prototype.handleUserChange=function(e){return a.__awaiter(this,void 0,void 0,(function(){var t,n,r,i=this;return a.__generator(this,(function(o){switch(o.label){case 0:return t=this.mutationQueue,n=this.localDocuments,[4,this.persistence.runTransaction("Handle user change","readonly-idempotent",(function(r){var o;return i.mutationQueue.getAllMutationBatches(r).next((function(a){return o=a,t=i.persistence.getMutationQueue(e),n=new gr(i.remoteDocuments,t,i.persistence.getIndexManager()),t.getAllMutationBatches(r)})).next((function(e){for(var t=[],i=[],a=qe(),s=0,u=o;s<u.length;s++){var c=u[s];t.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++){var d=h[l];a=a.add(d.key)}}for(var f=0,p=e;f<p.length;f++){c=p[f];i.push(c.batchId);for(var m=0,g=c.mutations;m<g.length;m++){d=g[m];a=a.add(d.key)}}return n.getDocuments(r,a).next((function(e){return{affectedDocuments:e,removedBatchIds:t,addedBatchIds:i}}))}))}))];case 1:return r=o.sent(),this.mutationQueue=t,this.localDocuments=n,this.queryEngine.setLocalDocumentsView(this.localDocuments),[2,r]}}))}))},e.prototype.localWrite=function(e){var t,n=this,r=Ce.now(),i=e.reduce((function(e,t){return e.add(t.key)}),qe());return this.persistence.runTransaction("Locally write mutations","readwrite-idempotent",(function(o){return n.localDocuments.getDocuments(o,i).next((function(i){t=i;for(var a=[],s=0,u=e;s<u.length;s++){var c=u[s],l=c.extractBaseValue(t.get(c.key));null!=l&&a.push(new Ct(c.key,l,l.fieldMask(),St.exists(!0)))}return n.mutationQueue.addMutationBatch(o,r,a,e)}))})).then((function(e){var n=e.applyToLocalDocumentSet(t);return{batchId:e.batchId,changes:n}}))},e.prototype.lookupMutationDocuments=function(e){var t=this;return this.persistence.runTransaction("Lookup mutation documents","readonly-idempotent",(function(n){return t.mutationQueue.lookupMutationKeys(n,e).next((function(e){return e?t.localDocuments.getDocuments(n,e):Ge.resolve(null)}))}))},e.prototype.acknowledgeBatch=function(e){var t=this;return this.persistence.runTransaction("Acknowledge batch","readwrite-primary-idempotent",(function(n){var r=e.batch.keys(),i=t.remoteDocuments.newChangeBuffer({trackRemovals:!0});return t.mutationQueue.acknowledgeBatch(n,e.batch,e.streamToken).next((function(){return t.applyWriteToRemoteDocuments(n,e,i)})).next((function(){return i.apply(n)})).next((function(){return t.mutationQueue.performConsistencyCheck(n)})).next((function(){return t.localDocuments.getDocuments(n,r)}))}))},e.prototype.rejectBatch=function(e){var t=this;return this.persistence.runTransaction("Reject batch","readwrite-primary-idempotent",(function(n){var r;return t.mutationQueue.lookupMutationBatch(n,e).next((function(e){return b(null!==e,"Attempt to reject nonexistent batch!"),r=e.keys(),t.mutationQueue.removeMutationBatch(n,e)})).next((function(){return t.mutationQueue.performConsistencyCheck(n)})).next((function(){return t.localDocuments.getDocuments(n,r)}))}))},e.prototype.getHighestUnacknowledgedBatchId=function(){var e=this;return this.persistence.runTransaction("Get highest unacknowledged batch id","readonly-idempotent",(function(t){return e.mutationQueue.getHighestUnacknowledgedBatchId(t)}))},e.prototype.getLastStreamToken=function(){var e=this;return this.persistence.runTransaction("Get last stream token","readonly-idempotent",(function(t){return e.mutationQueue.getLastStreamToken(t)}))},e.prototype.setLastStreamToken=function(e){var t=this;return this.persistence.runTransaction("Set last stream token","readwrite-primary-idempotent",(function(n){return t.mutationQueue.setLastStreamToken(n,e)}))},e.prototype.getLastRemoteSnapshotVersion=function(){var e=this;return this.persistence.runTransaction("Get last remote snapshot version","readonly-idempotent",(function(t){return e.targetCache.getLastRemoteSnapshotVersion(t)}))},e.prototype.applyRemoteEvent=function(t){var n=this,r=t.snapshotVersion,i=this.targetDataByTarget;return this.persistence.runTransaction("Apply remote event","readwrite-primary-idempotent",(function(o){var a=n.remoteDocuments.newChangeBuffer({trackRemovals:!0});i=n.targetDataByTarget;var s=[];D(t.targetChanges,(function(t,a){var u=i.get(t);if(u){s.push(n.targetCache.removeMatchingKeys(o,a.removedDocuments,t).next((function(){return n.targetCache.addMatchingKeys(o,a.addedDocuments,t)})));var c=a.resumeToken;if(c.length>0){var l=u.withResumeToken(c,r).withSequenceNumber(o.currentSequenceNumber);i=i.insert(t,l),e.shouldPersistTargetData(u,l,a)&&s.push(n.targetCache.updateTargetData(o,l))}}}));var u=Pe(),c=qe();if(t.documentUpdates.forEach((function(e,t){c=c.add(e)})),s.push(a.getEntries(o,c).next((function(e){t.documentUpdates.forEach((function(i,c){var l=e.get(i);c instanceof Gt&&c.version.isEqual(_e.MIN)?(a.removeEntry(i,r),u=u.insert(i,c)):null==l||c.version.compareTo(l.version)>0||0===c.version.compareTo(l.version)&&l.hasPendingWrites?(b(!_e.MIN.isEqual(r),"Cannot add a document when the remote version is zero"),a.addEntry(c,r),u=u.insert(i,c)):m("LocalStore","Ignoring outdated watch update for ",i,". Current version:",l.version," Watch version:",c.version),t.resolvedLimboDocuments.has(i)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(o,i))}))}))),!r.isEqual(_e.MIN)){var l=n.targetCache.getLastRemoteSnapshotVersion(o).next((function(e){return b(r.compareTo(e)>=0,"Watch stream reverted to previous snapshot?? "+r+" < "+e),n.targetCache.setTargetsMetadata(o,o.currentSequenceNumber,r)}));s.push(l)}return Ge.waitFor(s).next((function(){return a.apply(o)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(o,u)}))})).then((function(e){return n.targetDataByTarget=i,e}))},e.shouldPersistTargetData=function(e,t,n){return b(t.resumeToken.length>0,"Attempted to persist target data with no resume token"),0===e.resumeToken.length||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=this.RESUME_TOKEN_MAX_AGE_MICROS||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)},e.prototype.notifyLocalViewChanges=function(e){for(var t=this,n=0,r=e;n<r.length;n++){var i=r[n],o=i.targetId;if(this.localViewReferences.addReferences(i.addedKeys,o),this.localViewReferences.removeReferences(i.removedKeys,o),!i.fromCache){var a=this.targetDataByTarget.get(o);b(null!==a,"Can't set limbo-free snapshot version for unknown target: "+o);var s=a.snapshotVersion,u=a.withLastLimboFreeSnapshotVersion(s);this.targetDataByTarget=this.targetDataByTarget.insert(o,u)}}return this.persistence.runTransaction("notifyLocalViewChanges","readwrite-idempotent",(function(n){return Ge.forEach(e,(function(e){return Ge.forEach(e.removedKeys,(function(e){return t.persistence.referenceDelegate.removeReference(n,e)}))}))}))},e.prototype.nextMutationBatch=function(e){var t=this;return this.persistence.runTransaction("Get next mutation batch","readonly-idempotent",(function(n){return void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(n,e)}))},e.prototype.readDocument=function(e){var t=this;return this.persistence.runTransaction("read document","readonly-idempotent",(function(n){return t.localDocuments.getDocument(n,e)}))},e.prototype.allocateTarget=function(e){var t=this;return this.persistence.runTransaction("Allocate target","readwrite-idempotent",(function(n){var r;return t.targetCache.getTargetData(n,e).next((function(i){return i?(r=i,Ge.resolve(r)):t.targetCache.allocateTargetId(n).next((function(i){return r=new kn(e,i,Tn.Listen,n.currentSequenceNumber),t.targetCache.addTargetData(n,r).next((function(){return r}))}))}))})).then((function(n){return null===t.targetDataByTarget.get(n.targetId)&&(t.targetDataByTarget=t.targetDataByTarget.insert(n.targetId,n),t.targetIdByTarget.set(e,n.targetId)),n}))},e.prototype.getTargetData=function(e,t){var n=this.targetIdByTarget.get(t);return void 0!==n?Ge.resolve(this.targetDataByTarget.get(n)):this.targetCache.getTargetData(e,t)},e.prototype.releaseTarget=function(e,t){var n=this,r=this.targetDataByTarget.get(e);b(null!==r,"Tried to release nonexistent target: "+e);var i=t?"readwrite-idempotent":"readwrite-primary-idempotent";return this.persistence.runTransaction("Release target",i,(function(i){var o=n.localViewReferences.removeReferencesForId(e);return t?Ge.resolve():Ge.forEach(o,(function(e){return n.persistence.referenceDelegate.removeReference(i,e)})).next((function(){n.persistence.referenceDelegate.removeTarget(i,r)}))})).then((function(){n.targetDataByTarget=n.targetDataByTarget.remove(e),n.targetIdByTarget.delete(r.target)}))},e.prototype.executeQuery=function(e,t){var n=this,r=_e.MIN,i=qe();return this.persistence.runTransaction("Execute query","readonly-idempotent",(function(o){return n.getTargetData(o,e.toTarget()).next((function(e){if(e)return r=e.lastLimboFreeSnapshotVersion,n.targetCache.getMatchingKeysForTargetId(o,e.targetId).next((function(e){i=e}))})).next((function(){return n.queryEngine.getDocumentsMatchingQuery(o,e,t?r:_e.MIN,t?i:qe())})).next((function(e){return{documents:e,remoteKeys:i}}))}))},e.prototype.remoteDocumentKeys=function(e){var t=this;return this.persistence.runTransaction("Remote document keys","readonly-idempotent",(function(n){return t.targetCache.getMatchingKeysForTargetId(n,e)}))},e.prototype.getActiveClients=function(){return this.persistence.getActiveClients()},e.prototype.removeCachedMutationBatchMetadata=function(e){this.mutationQueue.removeCachedMutationKeys(e)},e.prototype.setNetworkEnabled=function(e){this.persistence.setNetworkEnabled(e)},e.prototype.applyWriteToRemoteDocuments=function(e,t,n){var r=this,i=t.batch,o=i.keys(),a=Ge.resolve();return o.forEach((function(r){a=a.next((function(){return n.getEntry(e,r)})).next((function(e){var o=e,a=t.docVersions.get(r);b(null!==a,"ackVersions should contain every doc in the write."),(!o||o.version.compareTo(a)<0)&&((o=i.applyToRemoteDocument(r,o,t))?n.addEntry(o,t.commitVersion):b(!e,"Mutation batch "+i+" applied to document "+e+" resulted in null"))}))})),a.next((function(){return r.mutationQueue.removeMutationBatch(e,i)}))},e.prototype.collectGarbage=function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary-idempotent",(function(n){return e.collect(n,t.targetDataByTarget)}))},e.prototype.getTarget=function(e){var t=this,n=this.targetDataByTarget.get(e);return n?Promise.resolve(n.target):this.persistence.runTransaction("Get target data","readonly-idempotent",(function(n){return t.targetCache.getTargetDataForTarget(n,e).next((function(e){return e?e.target:null}))}))},e.prototype.getNewDocumentChanges=function(){var e=this;return this.persistence.runTransaction("Get new document changes","readonly-idempotent",(function(t){return e.remoteDocuments.getNewDocumentChanges(t,e.lastDocumentChangeReadTime)})).then((function(t){var n=t.changedDocs,r=t.readTime;return e.lastDocumentChangeReadTime=r,n}))},e.prototype.synchronizeLastDocumentChangeReadTime=function(){return a.__awaiter(this,void 0,void 0,(function(){var e,t=this;return a.__generator(this,(function(n){return this.remoteDocuments instanceof Jt?(e=this.remoteDocuments,[2,this.persistence.runTransaction("Synchronize last document change read time","readonly-idempotent",(function(t){return e.getLastDocumentChange(t)})).then((function(e){var n=e.readTime;t.lastDocumentChangeReadTime=n}))]):[2]}))}))},e.RESUME_TOKEN_MAX_AGE_MICROS=3e8,e}(),wr=function(){function e(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.nextBatchId=1,this.lastStreamToken=T(),this.batchesByDocumentKey=new xe(vr.compareByKey)}return e.prototype.checkEmpty=function(e){return Ge.resolve(0===this.mutationQueue.length)},e.prototype.acknowledgeBatch=function(e,t,n){var r=t.batchId,i=this.indexOfExistingBatchId(r,"acknowledged");b(0===i,"Can only acknowledge the first batch in the mutation queue");var o=this.mutationQueue[i];return b(r===o.batchId,"Queue ordering failure: expected batch "+r+", got batch "+o.batchId),this.lastStreamToken=n,Ge.resolve()},e.prototype.getLastStreamToken=function(e){return Ge.resolve(this.lastStreamToken)},e.prototype.setLastStreamToken=function(e,t){return this.lastStreamToken=t,Ge.resolve()},e.prototype.addMutationBatch=function(e,t,n,r){b(0!==r.length,"Mutation batches should not be empty");var i=this.nextBatchId;(this.nextBatchId++,this.mutationQueue.length>0)&&b(this.mutationQueue[this.mutationQueue.length-1].batchId<i,"Mutation batchIDs must be monotonically increasing order");var o=new ze(i,t,n,r);this.mutationQueue.push(o);for(var a=0,s=r;a<s.length;a++){var u=s[a];this.batchesByDocumentKey=this.batchesByDocumentKey.add(new vr(u.key,i)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast())}return Ge.resolve(o)},e.prototype.lookupMutationBatch=function(e,t){return Ge.resolve(this.findMutationBatch(t))},e.prototype.lookupMutationKeys=function(e,t){var n=this.findMutationBatch(t);return b(null!=n,"Failed to find local mutation batch."),Ge.resolve(n.keys())},e.prototype.getNextMutationBatchAfterBatchId=function(e,t){var n=t+1,r=this.indexOfBatchId(n),i=r<0?0:r;return Ge.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)},e.prototype.getHighestUnacknowledgedBatchId=function(){return Ge.resolve(0===this.mutationQueue.length?-1:this.nextBatchId-1)},e.prototype.getAllMutationBatches=function(e){return Ge.resolve(this.mutationQueue.slice())},e.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,t){var n=this,r=new vr(t,0),i=new vr(t,Number.POSITIVE_INFINITY),o=[];return this.batchesByDocumentKey.forEachInRange([r,i],(function(e){b(t.isEqual(e.key),"Should only iterate over a single key's batches");var r=n.findMutationBatch(e.targetOrBatchId);b(null!==r,"Batches in the index must exist in the main table"),o.push(r)})),Ge.resolve(o)},e.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,t){var n=this,r=new xe(X);return t.forEach((function(e){var t=new vr(e,0),i=new vr(e,Number.POSITIVE_INFINITY);n.batchesByDocumentKey.forEachInRange([t,i],(function(t){b(e.isEqual(t.key),"For each key, should only iterate over a single key's batches"),r=r.add(t.targetOrBatchId)}))})),Ge.resolve(this.findMutationBatches(r))},e.prototype.getAllMutationBatchesAffectingQuery=function(e,t){b(!t.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var n=t.path,r=n.length+1,i=n;fe.isDocumentKey(i)||(i=i.child(""));var o=new vr(new fe(i),0),a=new xe(X);return this.batchesByDocumentKey.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.targetOrBatchId)),!0)}),o),Ge.resolve(this.findMutationBatches(a))},e.prototype.findMutationBatches=function(e){var t=this,n=[];return e.forEach((function(e){var r=t.findMutationBatch(e);null!==r&&n.push(r)})),n},e.prototype.removeMutationBatch=function(e,t){var n=this;b(0===this.indexOfExistingBatchId(t.batchId,"removed"),"Can only remove the first entry of the mutation queue"),this.mutationQueue.shift();var r=this.batchesByDocumentKey;return Ge.forEach(t.mutations,(function(i){var o=new vr(i.key,t.batchId);return r=r.delete(o),n.referenceDelegate.removeMutationReference(e,i.key)})).next((function(){n.batchesByDocumentKey=r}))},e.prototype.removeCachedMutationKeys=function(e){},e.prototype.containsKey=function(e,t){var n=new vr(t,0),r=this.batchesByDocumentKey.firstAfterOrEqual(n);return Ge.resolve(t.isEqual(r&&r.key))},e.prototype.performConsistencyCheck=function(e){return 0===this.mutationQueue.length&&b(this.batchesByDocumentKey.isEmpty(),"Document leak -- detected dangling mutation references when queue is empty."),Ge.resolve()},e.prototype.indexOfExistingBatchId=function(e,t){var n=this.indexOfBatchId(e);return b(n>=0&&n<this.mutationQueue.length,"Batches must exist to be "+t),n},e.prototype.indexOfBatchId=function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId},e.prototype.findMutationBatch=function(e){var t=this.indexOfBatchId(e);if(t<0||t>=this.mutationQueue.length)return null;var n=this.mutationQueue[t];return b(n.batchId===e,"If found batch must match"),n},e}();var Tr,Sr=function(){function e(e,t){this.indexManager=e,this.sizer=t,this.docs=new De(fe.comparator),this.size=0}return e.prototype.addEntry=function(e,t,n){b(!n.isEqual(_e.MIN),"Cannot add a document with a read time of zero");var r=t.key,i=this.docs.get(r),o=i?i.size:0,a=this.sizer(t);return this.docs=this.docs.insert(r,{maybeDocument:t,size:a,readTime:n}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())},e.prototype.removeEntry=function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)},e.prototype.getEntry=function(e,t){var n=this.docs.get(t);return Ge.resolve(n?n.maybeDocument:null)},e.prototype.getEntries=function(e,t){var n=this,r=Oe();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.maybeDocument:null)})),Ge.resolve(r)},e.prototype.getDocumentsMatchingQuery=function(e,t,n){b(!t.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");for(var r=je(),i=new fe(t.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var a=o.getNext(),s=a.key,u=a.value,c=u.maybeDocument,l=u.readTime;if(!t.path.isPrefixOf(s.path))break;l.compareTo(n)<=0||c instanceof Kt&&t.matches(c)&&(r=r.insert(c.key,c))}return Ge.resolve(r)},e.prototype.forEachDocumentKey=function(e,t){return Ge.forEach(this.docs,(function(e){return t(e)}))},e.prototype.getNewDocumentChanges=function(e,t){throw new Error("getNewDocumentChanges() is not supported with MemoryPersistence")},e.prototype.newChangeBuffer=function(t){return new e.RemoteDocumentChangeBuffer(this)},e.prototype.getSize=function(e){return Ge.resolve(this.size)},e.RemoteDocumentChangeBuffer=function(e){function t(t){var n=e.call(this)||this;return n.documentCache=t,n}return a.__extends(t,e),t.prototype.applyChanges=function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i?n.push(t.documentCache.addEntry(e,i,t.readTime)):t.documentCache.removeEntry(r)})),Ge.waitFor(n)},t.prototype.getFromCache=function(e,t){return this.documentCache.getEntry(e,t)},t.prototype.getAllFromCache=function(e,t){return this.documentCache.getEntries(e,t)},t}(Yt),e}(),Ir=function(){function e(e){this.persistence=e,this.targets=new Ht((function(e){return e.canonicalId()})),this.lastRemoteSnapshotVersion=_e.MIN,this.highestTargetId=0,this.highestSequenceNumber=0,this.references=new yr,this.targetCount=0,this.targetIdGenerator=lt.forTargetCache()}return e.prototype.forEachTarget=function(e,t){return this.targets.forEach((function(e,n){return t(n)})),Ge.resolve()},e.prototype.getLastRemoteSnapshotVersion=function(e){return Ge.resolve(this.lastRemoteSnapshotVersion)},e.prototype.getHighestSequenceNumber=function(e){return Ge.resolve(this.highestSequenceNumber)},e.prototype.allocateTargetId=function(e){var t=this.targetIdGenerator.after(this.highestTargetId);return this.highestTargetId=t,Ge.resolve(t)},e.prototype.setTargetsMetadata=function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.highestSequenceNumber&&(this.highestSequenceNumber=t),Ge.resolve()},e.prototype.saveTargetData=function(e){this.targets.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.highestTargetId=t),e.sequenceNumber>this.highestSequenceNumber&&(this.highestSequenceNumber=e.sequenceNumber)},e.prototype.addTargetData=function(e,t){return b(!this.targets.has(t.target),"Adding a target that already exists"),this.saveTargetData(t),this.targetCount+=1,Ge.resolve()},e.prototype.updateTargetData=function(e,t){return b(this.targets.has(t.target),"Updating a non-existent target"),this.saveTargetData(t),Ge.resolve()},e.prototype.removeTargetData=function(e,t){return b(this.targetCount>0,"Removing a target from an empty cache"),b(this.targets.has(t.target),"Removing a non-existent target from the cache"),this.targets.delete(t.target),this.references.removeReferencesForId(t.targetId),this.targetCount-=1,Ge.resolve()},e.prototype.removeTargets=function(e,t,n){var r=this,i=0,o=[];return this.targets.forEach((function(a,s){s.sequenceNumber<=t&&null===n.get(s.targetId)&&(r.targets.delete(a),o.push(r.removeMatchingKeysForTargetId(e,s.targetId)),i++)})),Ge.waitFor(o).next((function(){return i}))},e.prototype.getTargetCount=function(e){return Ge.resolve(this.targetCount)},e.prototype.getTargetData=function(e,t){var n=this.targets.get(t)||null;return Ge.resolve(n)},e.prototype.getTargetDataForTarget=function(e,t){return v("Not yet implemented.")},e.prototype.addMatchingKeys=function(e,t,n){this.references.addReferences(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.addReference(e,t))})),Ge.waitFor(i)},e.prototype.removeMatchingKeys=function(e,t,n){this.references.removeReferences(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.removeReference(e,t))})),Ge.waitFor(i)},e.prototype.removeMatchingKeysForTargetId=function(e,t){return this.references.removeReferencesForId(t),Ge.resolve()},e.prototype.getMatchingKeysForTargetId=function(e,t){var n=this.references.referencesForId(t);return Ge.resolve(n)},e.prototype.containsKey=function(e,t){return Ge.resolve(this.references.containsKey(t))},e}(),Er=function(){function e(e,t){var n=this;this.clientId=e,this.mutationQueues={},this.listenSequence=new ue(0),this._started=!1,this._started=!0,this.referenceDelegate=t(this),this.targetCache=new Ir(this);this.indexManager=new tn,this.remoteDocumentCache=new Sr(this.indexManager,(function(e){return n.referenceDelegate.documentSize(e)}))}return e.createLruPersistence=function(t,n,r){return new e(t,(function(e){return new Dr(e,new Nn(n),r)}))},e.createEagerPersistence=function(t){return new e(t,(function(e){return new _r(e)}))},e.prototype.shutdown=function(){return this._started=!1,Promise.resolve()},Object.defineProperty(e.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),e.prototype.getActiveClients=function(){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(e){return[2,[this.clientId]]}))}))},e.prototype.setPrimaryStateListener=function(e){return e(!0)},e.prototype.setDatabaseDeletedListener=function(){},e.prototype.setNetworkEnabled=function(e){},e.prototype.getIndexManager=function(){return this.indexManager},e.prototype.getMutationQueue=function(e){var t=this.mutationQueues[e.toKey()];return t||(t=new wr(this.indexManager,this.referenceDelegate),this.mutationQueues[e.toKey()]=t),t},e.prototype.getTargetCache=function(){return this.targetCache},e.prototype.getRemoteDocumentCache=function(){return this.remoteDocumentCache},e.prototype.runTransaction=function(e,t,n){var r=this;m("MemoryPersistence","Starting transaction:",e);var i=new Cr(this.listenSequence.next());return this.referenceDelegate.onTransactionStarted(),n(i).next((function(e){return r.referenceDelegate.onTransactionCommitted(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))},e.prototype.mutationQueuesContainKey=function(e,t){return Ge.or((n=this.mutationQueues,r=[],k(n,(function(e,t){return r.push(t)})),r).map((function(n){return function(){return n.containsKey(e,t)}})));var n,r},e}(),Cr=function(e){function t(t){var n=e.call(this)||this;return n.currentSequenceNumber=t,n}return a.__extends(t,e),t}(Rn),_r=function(){function e(e){this.persistence=e,this.inMemoryPins=null,this._orphanedDocuments=null}return Object.defineProperty(e.prototype,"orphanedDocuments",{get:function(){if(this._orphanedDocuments)return this._orphanedDocuments;throw v("orphanedDocuments is only valid during a transaction.")},enumerable:!0,configurable:!0}),e.prototype.setInMemoryPins=function(e){this.inMemoryPins=e},e.prototype.addReference=function(e,t){return this.orphanedDocuments.delete(t),Ge.resolve()},e.prototype.removeReference=function(e,t){return this.orphanedDocuments.add(t),Ge.resolve()},e.prototype.removeMutationReference=function(e,t){return this.orphanedDocuments.add(t),Ge.resolve()},e.prototype.removeTarget=function(e,t){var n=this,r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.orphanedDocuments.add(e)}))})).next((function(){return r.removeTargetData(e,t)}))},e.prototype.onTransactionStarted=function(){this._orphanedDocuments=new Set},e.prototype.onTransactionCommitted=function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ge.forEach(this.orphanedDocuments,(function(r){return t.isReferenced(e,r).next((function(e){e||n.removeEntry(r)}))})).next((function(){return t._orphanedDocuments=null,n.apply(e)}))},e.prototype.updateLimboDocument=function(e,t){var n=this;return this.isReferenced(e,t).next((function(e){e?n.orphanedDocuments.delete(t):n.orphanedDocuments.add(t)}))},e.prototype.documentSize=function(e){return 0},e.prototype.isReferenced=function(e,t){var n=this;return Ge.or([function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.mutationQueuesContainKey(e,t)},function(){return Ge.resolve(n.inMemoryPins.containsKey(t))}])},e}(),Dr=function(){function e(e,t,n){this.persistence=e,this.serializer=t,this.inMemoryPins=null,this.orphanedSequenceNumbers=new Ht((function(e){return Te(e.path)})),this.garbageCollector=new On(this,n)}return e.prototype.onTransactionStarted=function(){},e.prototype.onTransactionCommitted=function(e){return Ge.resolve()},e.prototype.forEachTarget=function(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)},e.prototype.getSequenceNumberCount=function(e){var t=this.orphanedDocumentCount(e);return this.persistence.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))},e.prototype.orphanedDocumentCount=function(e){var t=0;return this.forEachOrphanedDocumentSequenceNumber(e,(function(e){t++})).next((function(){return t}))},e.prototype.forEachOrphanedDocumentSequenceNumber=function(e,t){var n=this;return Ge.forEach(this.orphanedSequenceNumbers,(function(r,i){return n.isPinned(e,r,i).next((function(e){return e?Ge.resolve():t(i)}))}))},e.prototype.setInMemoryPins=function(e){this.inMemoryPins=e},e.prototype.removeTargets=function(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)},e.prototype.removeOrphanedDocuments=function(e,t){var n=this,r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.forEachDocumentKey(e,(function(i){return n.isPinned(e,i,t).next((function(e){e||(r++,o.removeEntry(i))}))})).next((function(){return o.apply(e)})).next((function(){return r}))},e.prototype.removeMutationReference=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),Ge.resolve()},e.prototype.removeTarget=function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)},e.prototype.addReference=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),Ge.resolve()},e.prototype.removeReference=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),Ge.resolve()},e.prototype.updateLimboDocument=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),Ge.resolve()},e.prototype.documentSize=function(e){var t,n=this.serializer.toDbRemoteDocument(e,e.version);if(n.document)t=n.document;else if(n.unknownDocument)t=n.unknownDocument;else{if(!n.noDocument)throw v("Unknown remote document type");t=n.noDocument}return JSON.stringify(t).length},e.prototype.isPinned=function(e,t,n){var r=this;return Ge.or([function(){return r.persistence.mutationQueuesContainKey(e,t)},function(){return Ge.resolve(r.inMemoryPins.containsKey(t))},function(){return r.persistence.getTargetCache().containsKey(e,t)},function(){var e=r.orphanedSequenceNumbers.get(t);return Ge.resolve(void 0!==e&&e>n)}])},e.prototype.getCacheSize=function(e){return this.persistence.getRemoteDocumentCache().getSize(e)},e}(),kr=1e3,Nr=1.5,Ar=6e4,xr=function(){function e(e,t,n,r,i){void 0===n&&(n=kr),void 0===r&&(r=Nr),void 0===i&&(i=Ar),this.queue=e,this.timerId=t,this.initialDelayMs=n,this.backoffFactor=r,this.maxDelayMs=i,this.currentBaseMs=0,this.timerPromise=null,this.lastAttemptTime=Date.now(),this.reset()}return e.prototype.reset=function(){this.currentBaseMs=0},e.prototype.resetToMax=function(){this.currentBaseMs=this.maxDelayMs},e.prototype.backoffAndRun=function(e){var t=this;this.cancel();var n=Math.floor(this.currentBaseMs+this.jitterDelayMs()),r=Math.max(0,Date.now()-this.lastAttemptTime),i=Math.max(0,n-r);this.currentBaseMs>0&&m("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.currentBaseMs+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.timerPromise=this.queue.enqueueAfterDelay(this.timerId,i,(function(){return t.lastAttemptTime=Date.now(),e()})),this.currentBaseMs*=this.backoffFactor,this.currentBaseMs<this.initialDelayMs&&(this.currentBaseMs=this.initialDelayMs),this.currentBaseMs>this.maxDelayMs&&(this.currentBaseMs=this.maxDelayMs)},e.prototype.cancel=function(){null!==this.timerPromise&&(this.timerPromise.cancel(),this.timerPromise=null)},e.prototype.jitterDelayMs=function(){return(Math.random()-.5)*this.currentBaseMs},e}();
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */!function(e){e[e.Initial=0]="Initial",e[e.Starting=1]="Starting",e[e.Open=2]="Open",e[e.Error=3]="Error",e[e.Backoff=4]="Backoff"}(Tr||(Tr={}));var Mr,Lr,Pr=function(){function e(e,t,n,r,i,o){this.queue=e,this.idleTimerId=n,this.connection=r,this.credentialsProvider=i,this.listener=o,this.state=Tr.Initial,this.closeCount=0,this.idleTimer=null,this.stream=null,this.backoff=new xr(e,t)}return e.prototype.isStarted=function(){return this.state===Tr.Starting||this.state===Tr.Open||this.state===Tr.Backoff},e.prototype.isOpen=function(){return this.state===Tr.Open},e.prototype.start=function(){this.state!==Tr.Error?(b(this.state===Tr.Initial,"Already started"),this.auth()):this.performBackoff()},e.prototype.stop=function(){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(e){switch(e.label){case 0:return this.isStarted()?[4,this.close(Tr.Initial)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},e.prototype.inhibitBackoff=function(){b(!this.isStarted(),"Can only inhibit backoff in a stopped state"),this.state=Tr.Initial,this.backoff.reset()},e.prototype.markIdle=function(){var e=this;this.isOpen()&&null===this.idleTimer&&(this.idleTimer=this.queue.enqueueAfterDelay(this.idleTimerId,6e4,(function(){return e.handleIdleCloseTimer()})))},e.prototype.sendRequest=function(e){this.cancelIdleCheck(),this.stream.send(e)},e.prototype.handleIdleCloseTimer=function(){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(e){return this.isOpen()?[2,this.close(Tr.Initial)]:[2]}))}))},e.prototype.cancelIdleCheck=function(){this.idleTimer&&(this.idleTimer.cancel(),this.idleTimer=null)},e.prototype.close=function(e,t){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(n){switch(n.label){case 0:return b(this.isStarted(),"Only started streams should be closed."),b(e===Tr.Error||Xn(t),"Can't provide an error when not in an error state."),this.cancelIdleCheck(),this.backoff.cancel(),this.closeCount++,e!==Tr.Error?this.backoff.reset():t&&t.code===S.RESOURCE_EXHAUSTED?(g(t.toString()),g("Using maximum backoff delay to prevent overloading the backend."),this.backoff.resetToMax()):t&&t.code===S.UNAUTHENTICATED&&this.credentialsProvider.invalidateToken(),null!==this.stream&&(this.tearDown(),this.stream.close(),this.stream=null),this.state=e,[4,this.listener.onClose(t)];case 1:return n.sent(),[2]}}))}))},e.prototype.tearDown=function(){},e.prototype.auth=function(){var e=this;b(this.state===Tr.Initial,"Must be in initial state to auth"),this.state=Tr.Starting;var t=this.getCloseGuardedDispatcher(this.closeCount),n=this.closeCount;this.credentialsProvider.getToken().then((function(t){e.closeCount===n&&e.startStream(t)}),(function(n){t((function(){var t=new I(S.UNKNOWN,"Fetching auth token failed: "+n.message);return e.handleStreamClose(t)}))}))},e.prototype.startStream=function(e){var t=this;b(this.state===Tr.Starting,"Trying to start stream in a non-starting state");var n=this.getCloseGuardedDispatcher(this.closeCount);this.stream=this.startRpc(e),this.stream.onOpen((function(){n((function(){return b(t.state===Tr.Starting,"Expected stream to be in state Starting, but was "+t.state),t.state=Tr.Open,t.listener.onOpen()}))})),this.stream.onClose((function(e){n((function(){return t.handleStreamClose(e)}))})),this.stream.onMessage((function(e){n((function(){return t.onMessage(e)}))}))},e.prototype.performBackoff=function(){var e=this;b(this.state===Tr.Error,"Should only perform backoff when in Error state"),this.state=Tr.Backoff,this.backoff.backoffAndRun((function(){return a.__awaiter(e,void 0,void 0,(function(){return a.__generator(this,(function(e){return b(this.state===Tr.Backoff,"Backoff elapsed but state is now: "+this.state),this.state=Tr.Initial,this.start(),b(this.isStarted(),"PersistentStream should have started"),[2]}))}))}))},e.prototype.handleStreamClose=function(e){return b(this.isStarted(),"Can't handle server close on non-started stream"),m("PersistentStream","close with error: "+e),this.stream=null,this.close(Tr.Error,e)},e.prototype.getCloseGuardedDispatcher=function(e){var t=this;return function(n){t.queue.enqueueAndForget((function(){return t.closeCount===e?n():(m("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},e}(),Or=function(e){function t(t,n,r,i,o){var a=e.call(this,t,ne.ListenStreamConnectionBackoff,ne.ListenStreamIdle,n,r,o)||this;return a.serializer=i,a}return a.__extends(t,e),t.prototype.startRpc=function(e){return this.connection.openStream("Listen",e)},t.prototype.onMessage=function(e){this.backoff.reset();var t=this.serializer.fromWatchChange(e),n=this.serializer.versionFromListenResponse(e);return this.listener.onWatchChange(t,n)},t.prototype.watch=function(e){var t={};t.database=this.serializer.encodedDatabaseId,t.addTarget=this.serializer.toTarget(e);var n=this.serializer.toListenRequestLabels(e);n&&(t.labels=n),this.sendRequest(t)},t.prototype.unwatch=function(e){var t={};t.database=this.serializer.encodedDatabaseId,t.removeTarget=e,this.sendRequest(t)},t}(Pr),Rr=function(e){function t(t,n,r,i,o){var a=e.call(this,t,ne.WriteStreamConnectionBackoff,ne.WriteStreamIdle,n,r,o)||this;return a.serializer=i,a.handshakeComplete_=!1,a.lastStreamToken=T(),a}return a.__extends(t,e),Object.defineProperty(t.prototype,"handshakeComplete",{get:function(){return this.handshakeComplete_},enumerable:!0,configurable:!0}),t.prototype.start=function(){this.handshakeComplete_=!1,e.prototype.start.call(this)},t.prototype.tearDown=function(){this.handshakeComplete_&&this.writeMutations([])},t.prototype.startRpc=function(e){return this.connection.openStream("Write",e)},t.prototype.onMessage=function(e){if(b(!!e.streamToken,"Got a write response without a stream token"),this.lastStreamToken=e.streamToken,this.handshakeComplete_){this.backoff.reset();var t=this.serializer.fromWriteResults(e.writeResults,e.commitTime),n=this.serializer.fromVersion(e.commitTime);return this.listener.onMutationResult(n,t)}return b(!e.writeResults||0===e.writeResults.length,"Got mutation results for handshake"),this.handshakeComplete_=!0,this.listener.onHandshakeComplete()},t.prototype.writeHandshake=function(){b(this.isOpen(),"Writing handshake requires an opened stream"),b(!this.handshakeComplete_,"Handshake already completed");var e={};e.database=this.serializer.encodedDatabaseId,this.sendRequest(e)},t.prototype.writeMutations=function(e){var t=this;b(this.isOpen(),"Writing mutations requires an opened stream"),b(this.handshakeComplete_,"Handshake must be complete before writing mutations"),b(this.lastStreamToken.length>0,"Trying to write mutation without a token");var n={streamToken:this.lastStreamToken,writes:e.map((function(e){return t.serializer.toMutation(e)}))};this.sendRequest(n)},t}(Pr),jr=function(){function e(e,t,n,r){this.queue=e,this.connection=t,this.credentials=n,this.serializer=r}return e.prototype.newPersistentWriteStream=function(e){return new Rr(this.queue,this.connection,this.credentials,this.serializer,e)},e.prototype.newPersistentWatchStream=function(e){return new Or(this.queue,this.connection,this.credentials,this.serializer,e)},e.prototype.commit=function(e){var t=this,n={database:this.serializer.encodedDatabaseId,writes:e.map((function(e){return t.serializer.toMutation(e)}))};return this.invokeRPC("Commit",n).then((function(e){return t.serializer.fromWriteResults(e.writeResults,e.commitTime)}))},e.prototype.lookup=function(e){var t=this,n={database:this.serializer.encodedDatabaseId,documents:e.map((function(e){return t.serializer.toName(e)}))};return this.invokeStreamingRPC("BatchGetDocuments",n).then((function(n){var r=Pe();n.forEach((function(e){var n=t.serializer.fromMaybeDocument(e);r=r.insert(n.key,n)}));var i=[];return e.forEach((function(e){var t=r.get(e);b(!!t,"Missing entity in write response for "+e),i.push(t)})),i}))},e.prototype.invokeRPC=function(e,t){var n=this;return this.credentials.getToken().then((function(r){return n.connection.invokeRPC(e,t,r)})).catch((function(e){throw e.code===S.UNAUTHENTICATED&&n.credentials.invalidateToken(),e}))},e.prototype.invokeStreamingRPC=function(e,t){var n=this;return this.credentials.getToken().then((function(r){return n.connection.invokeStreamingRPC(e,t,r)})).catch((function(e){throw e.code===S.UNAUTHENTICATED&&n.credentials.invalidateToken(),e}))},e}(),Br=function(){function e(e){this.datastore=e,this.readVersions=Fe(),this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return e.prototype.lookup=function(e){return a.__awaiter(this,void 0,void 0,(function(){var t,n=this;return a.__generator(this,(function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new I(S.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,this.datastore.lookup(e)];case 1:return(t=r.sent()).forEach((function(e){e instanceof Gt||e instanceof Kt?n.recordVersion(e):v("Document in a transaction was a "+e.constructor.name)})),[2,t]}}))}))},e.prototype.set=function(e,t){this.write(t.toMutations(e,this.precondition(e))),this.writtenDocs.add(e)},e.prototype.update=function(e,t){try{this.write(t.toMutations(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e)},e.prototype.delete=function(e){this.write([new Dt(e,this.precondition(e))]),this.writtenDocs.add(e)},e.prototype.commit=function(){return a.__awaiter(this,void 0,void 0,(function(){var e;return a.__generator(this,(function(t){switch(t.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;if(e=this.readVersions,this.mutations.forEach((function(t){e=e.remove(t.key)})),!e.isEmpty())throw new I(S.INVALID_ARGUMENT,"Every document read in a transaction must also be written.");return[4,this.datastore.commit(this.mutations)];case 1:return t.sent(),this.committed=!0,[2]}}))}))},e.prototype.recordVersion=function(e){var t;if(e instanceof Kt)t=e.version;else{if(!(e instanceof Gt))throw v("Document in a transaction was a "+e.constructor.name);t=_e.forDeletedDoc()}var n=this.readVersions.get(e.key);if(null!==n){if(!t.isEqual(n))throw new I(S.ABORTED,"Document version changed between two reads.")}else this.readVersions=this.readVersions.insert(e.key,t)},e.prototype.precondition=function(e){var t=this.readVersions.get(e);return!this.writtenDocs.has(e)&&t?St.updateTime(t):St.NONE},e.prototype.preconditionForUpdate=function(e){var t=this.readVersions.get(e);if(!this.writtenDocs.has(e)&&t){if(t.isEqual(_e.forDeletedDoc()))throw new I(S.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return St.updateTime(t)}return St.exists(!0)},e.prototype.write=function(e){this.ensureCommitNotCalled(),this.mutations=this.mutations.concat(e)},e.prototype.ensureCommitNotCalled=function(){b(!this.committed,"A transaction object cannot be used after its update callback has been invoked.")},e}();!function(e){e[e.Unknown=0]="Unknown",e[e.Online=1]="Online",e[e.Offline=2]="Offline"}(Mr||(Mr={})),function(e){e[e.RemoteStore=0]="RemoteStore",e[e.SharedClientState=1]="SharedClientState"}(Lr||(Lr={}));
/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Fr,Vr=function(){function e(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state=Mr.Unknown,this.watchStreamFailures=0,this.onlineStateTimer=null,this.shouldWarnClientIsOffline=!0}return e.prototype.handleWatchStreamStart=function(){var e=this;0===this.watchStreamFailures&&(this.setAndBroadcast(Mr.Unknown),b(null===this.onlineStateTimer,"onlineStateTimer shouldn't be started yet"),this.onlineStateTimer=this.asyncQueue.enqueueAfterDelay(ne.OnlineStateTimeout,1e4,(function(){return e.onlineStateTimer=null,b(e.state===Mr.Unknown,"Timer should be canceled if we transitioned to a different state."),e.logClientOfflineWarningIfNecessary("Backend didn't respond within 10 seconds."),e.setAndBroadcast(Mr.Offline),Promise.resolve()})))},e.prototype.handleWatchStreamFailure=function(e){this.state===Mr.Online?(this.setAndBroadcast(Mr.Unknown),b(0===this.watchStreamFailures,"watchStreamFailures must be 0"),b(null===this.onlineStateTimer,"onlineStateTimer must be null")):(this.watchStreamFailures++,this.watchStreamFailures>=1&&(this.clearOnlineStateTimer(),this.logClientOfflineWarningIfNecessary("Connection failed 1 times. Most recent error: "+e.toString()),this.setAndBroadcast(Mr.Offline)))},e.prototype.set=function(e){this.clearOnlineStateTimer(),this.watchStreamFailures=0,e===Mr.Online&&(this.shouldWarnClientIsOffline=!1),this.setAndBroadcast(e)},e.prototype.setAndBroadcast=function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))},e.prototype.logClientOfflineWarningIfNecessary=function(e){var t="Could not reach Cloud Firestore backend. "+e+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.shouldWarnClientIsOffline?(g(t),this.shouldWarnClientIsOffline=!1):m("OnlineStateTracker",t)},e.prototype.clearOnlineStateTimer=function(){null!==this.onlineStateTimer&&(this.onlineStateTimer.cancel(),this.onlineStateTimer=null)},e}();function qr(e){switch(e){case S.OK:return v("Treated status OK as error");case S.CANCELLED:case S.UNKNOWN:case S.DEADLINE_EXCEEDED:case S.RESOURCE_EXHAUSTED:case S.INTERNAL:case S.UNAVAILABLE:case S.UNAUTHENTICATED:return!1;case S.INVALID_ARGUMENT:case S.NOT_FOUND:case S.ALREADY_EXISTS:case S.PERMISSION_DENIED:case S.FAILED_PRECONDITION:case S.ABORTED:case S.OUT_OF_RANGE:case S.UNIMPLEMENTED:case S.DATA_LOSS:return!0;default:return v("Unknown status code: "+e)}}function Ur(e){if(void 0===e)return g("GRPC error has no .code"),S.UNKNOWN;switch(e){case Fr.OK:return S.OK;case Fr.CANCELLED:return S.CANCELLED;case Fr.UNKNOWN:return S.UNKNOWN;case Fr.DEADLINE_EXCEEDED:return S.DEADLINE_EXCEEDED;case Fr.RESOURCE_EXHAUSTED:return S.RESOURCE_EXHAUSTED;case Fr.INTERNAL:return S.INTERNAL;case Fr.UNAVAILABLE:return S.UNAVAILABLE;case Fr.UNAUTHENTICATED:return S.UNAUTHENTICATED;case Fr.INVALID_ARGUMENT:return S.INVALID_ARGUMENT;case Fr.NOT_FOUND:return S.NOT_FOUND;case Fr.ALREADY_EXISTS:return S.ALREADY_EXISTS;case Fr.PERMISSION_DENIED:return S.PERMISSION_DENIED;case Fr.FAILED_PRECONDITION:return S.FAILED_PRECONDITION;case Fr.ABORTED:return S.ABORTED;case Fr.OUT_OF_RANGE:return S.OUT_OF_RANGE;case Fr.UNIMPLEMENTED:return S.UNIMPLEMENTED;case Fr.DATA_LOSS:return S.DATA_LOSS;default:return v("Unknown status code: "+e)}}function Wr(e){if(void 0===e)return Fr.OK;switch(e){case S.OK:return Fr.OK;case S.CANCELLED:return Fr.CANCELLED;case S.UNKNOWN:return Fr.UNKNOWN;case S.DEADLINE_EXCEEDED:return Fr.DEADLINE_EXCEEDED;case S.RESOURCE_EXHAUSTED:return Fr.RESOURCE_EXHAUSTED;case S.INTERNAL:return Fr.INTERNAL;case S.UNAVAILABLE:return Fr.UNAVAILABLE;case S.UNAUTHENTICATED:return Fr.UNAUTHENTICATED;case S.INVALID_ARGUMENT:return Fr.INVALID_ARGUMENT;case S.NOT_FOUND:return Fr.NOT_FOUND;case S.ALREADY_EXISTS:return Fr.ALREADY_EXISTS;case S.PERMISSION_DENIED:return Fr.PERMISSION_DENIED;case S.FAILED_PRECONDITION:return Fr.FAILED_PRECONDITION;case S.ABORTED:return Fr.ABORTED;case S.OUT_OF_RANGE:return Fr.OUT_OF_RANGE;case S.UNIMPLEMENTED:return Fr.UNIMPLEMENTED;case S.DATA_LOSS:return Fr.DATA_LOSS;default:return v("Unknown status code: "+e)}}!function(e){e[e.OK=0]="OK",e[e.CANCELLED=1]="CANCELLED",e[e.UNKNOWN=2]="UNKNOWN",e[e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",e[e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",e[e.NOT_FOUND=5]="NOT_FOUND",e[e.ALREADY_EXISTS=6]="ALREADY_EXISTS",e[e.PERMISSION_DENIED=7]="PERMISSION_DENIED",e[e.UNAUTHENTICATED=16]="UNAUTHENTICATED",e[e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",e[e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",e[e.ABORTED=10]="ABORTED",e[e.OUT_OF_RANGE=11]="OUT_OF_RANGE",e[e.UNIMPLEMENTED=12]="UNIMPLEMENTED",e[e.INTERNAL=13]="INTERNAL",e[e.UNAVAILABLE=14]="UNAVAILABLE",e[e.DATA_LOSS=15]="DATA_LOSS"}(Fr||(Fr={}));
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var zr,Kr,Gr=function(){function e(e){this.comparator=e?function(t,n){return e(t,n)||fe.comparator(t.key,n.key)}:function(e,t){return fe.comparator(e.key,t.key)},this.keyedMap=je(),this.sortedSet=new De(this.comparator)}return e.emptySet=function(t){return new e(t.comparator)},e.prototype.has=function(e){return null!=this.keyedMap.get(e)},e.prototype.get=function(e){return this.keyedMap.get(e)},e.prototype.first=function(){return this.sortedSet.minKey()},e.prototype.last=function(){return this.sortedSet.maxKey()},e.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},e.prototype.indexOf=function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1},Object.defineProperty(e.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!0,configurable:!0}),e.prototype.forEach=function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))},e.prototype.add=function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))},e.prototype.delete=function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this},e.prototype.isEqual=function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},e.prototype.toString=function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"},e.prototype.copy=function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r},e}();
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */!function(e){e[e.Added=0]="Added",e[e.Removed=1]="Removed",e[e.Modified=2]="Modified",e[e.Metadata=3]="Metadata"}(zr||(zr={})),function(e){e[e.Local=0]="Local",e[e.Synced=1]="Synced"}(Kr||(Kr={}));var Qr,Hr=function(){function e(){this.changeMap=new De(fe.comparator)}return e.prototype.track=function(e){var t=e.doc.key,n=this.changeMap.get(t);n?e.type!==zr.Added&&n.type===zr.Metadata?this.changeMap=this.changeMap.insert(t,e):e.type===zr.Metadata&&n.type!==zr.Removed?this.changeMap=this.changeMap.insert(t,{type:n.type,doc:e.doc}):e.type===zr.Modified&&n.type===zr.Modified?this.changeMap=this.changeMap.insert(t,{type:zr.Modified,doc:e.doc}):e.type===zr.Modified&&n.type===zr.Added?this.changeMap=this.changeMap.insert(t,{type:zr.Added,doc:e.doc}):e.type===zr.Removed&&n.type===zr.Added?this.changeMap=this.changeMap.remove(t):e.type===zr.Removed&&n.type===zr.Modified?this.changeMap=this.changeMap.insert(t,{type:zr.Removed,doc:n.doc}):e.type===zr.Added&&n.type===zr.Removed?this.changeMap=this.changeMap.insert(t,{type:zr.Modified,doc:e.doc}):v("unsupported combination of changes: "+JSON.stringify(e)+" after "+JSON.stringify(n)):this.changeMap=this.changeMap.insert(t,e)},e.prototype.getChanges=function(){var e=[];return this.changeMap.inorderTraversal((function(t,n){e.push(n)})),e},e}(),Yr=function(){function e(e,t,n,r,i,o,a,s){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=s}return e.fromInitialDocuments=function(t,n,r,i){var o=[];return n.forEach((function(e){o.push({type:zr.Added,doc:e})})),new e(t,n,Gr.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&this.query.isEqual(e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0},e}(),Jr=function(){function e(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return e.createSynthesizedRemoteEventForCurrentChange=function(t,n){var r,i=((r={})[t]=Xr.createSynthesizedTargetChangeForCurrentChange(t,n),r);return new e(_e.MIN,i,We(),Pe(),qe())},e}(),Xr=function(){function e(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return e.createSynthesizedTargetChangeForCurrentChange=function(t,n){return new e(T(),n,qe(),qe(),qe())},e}(),$r=function(e,t,n,r){this.updatedTargetIds=e,this.removedTargetIds=t,this.key=n,this.newDoc=r},Zr=function(e,t){this.targetId=e,this.existenceFilter=t};!function(e){e[e.NoChange=0]="NoChange",e[e.Added=1]="Added",e[e.Removed=2]="Removed",e[e.Current=3]="Current",e[e.Reset=4]="Reset"}(Qr||(Qr={}));var ei=function(e,t,n,r){void 0===n&&(n=T()),void 0===r&&(r=null),this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r},ti=function(){function e(){this.pendingResponses=0,this.documentChanges=ii(),this._resumeToken=T(),this._current=!1,this._hasPendingChanges=!0}return Object.defineProperty(e.prototype,"current",{get:function(){return this._current},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"resumeToken",{get:function(){return this._resumeToken},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isPending",{get:function(){return 0!==this.pendingResponses},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasPendingChanges",{get:function(){return this._hasPendingChanges},enumerable:!0,configurable:!0}),e.prototype.updateResumeToken=function(e){e.length>0&&(this._hasPendingChanges=!0,this._resumeToken=e)},e.prototype.toTargetChange=function(){var e=qe(),t=qe(),n=qe();return this.documentChanges.forEach((function(r,i){switch(i){case zr.Added:e=e.add(r);break;case zr.Modified:t=t.add(r);break;case zr.Removed:n=n.add(r);break;default:v("Encountered invalid change type: "+i)}})),new Xr(this._resumeToken,this._current,e,t,n)},e.prototype.clearPendingChanges=function(){this._hasPendingChanges=!1,this.documentChanges=ii()},e.prototype.addDocumentChange=function(e,t){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.insert(e,t)},e.prototype.removeDocumentChange=function(e){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.remove(e)},e.prototype.recordPendingTargetRequest=function(){this.pendingResponses+=1},e.prototype.recordTargetResponse=function(){this.pendingResponses-=1},e.prototype.markCurrent=function(){this._hasPendingChanges=!0,this._current=!0},e}(),ni=function(){function e(e){this.metadataProvider=e,this.targetStates={},this.pendingDocumentUpdates=Pe(),this.pendingDocumentTargetMapping=ri(),this.pendingTargetResets=new xe(X)}return e.prototype.handleDocumentChange=function(e){for(var t=0,n=e.updatedTargetIds;t<n.length;t++){var r=n[t];e.newDoc instanceof Kt?this.addDocumentToTarget(r,e.newDoc):e.newDoc instanceof Gt&&this.removeDocumentFromTarget(r,e.key,e.newDoc)}for(var i=0,o=e.removedTargetIds;i<o.length;i++){r=o[i];this.removeDocumentFromTarget(r,e.key,e.newDoc)}},e.prototype.handleTargetChange=function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.ensureTargetState(n);switch(e.state){case Qr.NoChange:t.isActiveTarget(n)&&r.updateResumeToken(e.resumeToken);break;case Qr.Added:r.recordTargetResponse(),r.isPending||r.clearPendingChanges(),r.updateResumeToken(e.resumeToken);break;case Qr.Removed:r.recordTargetResponse(),r.isPending||t.removeTarget(n),b(!e.cause,"WatchChangeAggregator does not handle errored targets");break;case Qr.Current:t.isActiveTarget(n)&&(r.markCurrent(),r.updateResumeToken(e.resumeToken));break;case Qr.Reset:t.isActiveTarget(n)&&(t.resetTarget(n),r.updateResumeToken(e.resumeToken));break;default:v("Unknown target watch change state: "+e.state)}}))},e.prototype.forEachTarget=function(e,t){e.targetIds.length>0?e.targetIds.forEach(t):D(this.targetStates,t)},e.prototype.handleExistenceFilter=function(e){var t=e.targetId,n=e.existenceFilter.count,r=this.targetDataForActiveTarget(t);if(r){var i=r.target;if(i.isDocumentQuery())if(0===n){var o=new fe(i.path);this.removeDocumentFromTarget(t,o,new Gt(o,_e.forDeletedDoc()))}else b(1===n,"Single document existence filter with count: "+n);else this.getCurrentDocumentCountForTarget(t)!==n&&(this.resetTarget(t),this.pendingTargetResets=this.pendingTargetResets.add(t))}},e.prototype.createRemoteEvent=function(e){var t=this,n={};D(this.targetStates,(function(r,i){var o=t.targetDataForActiveTarget(r);if(o){if(i.current&&o.target.isDocumentQuery()){var a=new fe(o.target.path);null!==t.pendingDocumentUpdates.get(a)||t.targetContainsDocument(r,a)||t.removeDocumentFromTarget(r,a,new Gt(a,e))}i.hasPendingChanges&&(n[r]=i.toTargetChange(),i.clearPendingChanges())}}));var r=qe();this.pendingDocumentTargetMapping.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.targetDataForActiveTarget(e);return!n||n.purpose===Tn.LimboResolution||(i=!1,!1)})),i&&(r=r.add(e))}));var i=new Jr(e,n,this.pendingTargetResets,this.pendingDocumentUpdates,r);return this.pendingDocumentUpdates=Pe(),this.pendingDocumentTargetMapping=ri(),this.pendingTargetResets=new xe(X),i},e.prototype.addDocumentToTarget=function(e,t){if(this.isActiveTarget(e)){var n=this.targetContainsDocument(e,t.key)?zr.Modified:zr.Added;this.ensureTargetState(e).addDocumentChange(t.key,n),this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(t.key,t),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(t.key,this.ensureDocumentTargetMapping(t.key).add(e))}},e.prototype.removeDocumentFromTarget=function(e,t,n){if(this.isActiveTarget(e)){var r=this.ensureTargetState(e);this.targetContainsDocument(e,t)?r.addDocumentChange(t,zr.Removed):r.removeDocumentChange(t),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(t,this.ensureDocumentTargetMapping(t).delete(e)),n&&(this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(t,n))}},e.prototype.removeTarget=function(e){delete this.targetStates[e]},e.prototype.getCurrentDocumentCountForTarget=function(e){var t=this.ensureTargetState(e).toTargetChange();return this.metadataProvider.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size},e.prototype.recordPendingTargetRequest=function(e){this.ensureTargetState(e).recordPendingTargetRequest()},e.prototype.ensureTargetState=function(e){return this.targetStates[e]||(this.targetStates[e]=new ti),this.targetStates[e]},e.prototype.ensureDocumentTargetMapping=function(e){var t=this.pendingDocumentTargetMapping.get(e);return t||(t=new xe(X),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(e,t)),t},e.prototype.isActiveTarget=function(e){var t=null!==this.targetDataForActiveTarget(e);return t||m("WatchChangeAggregator","Detected inactive target",e),t},e.prototype.targetDataForActiveTarget=function(e){var t=this.targetStates[e];return t&&t.isPending?null:this.metadataProvider.getTargetDataForTarget(e)},e.prototype.resetTarget=function(e){var t=this;b(!this.targetStates[e].isPending,"Should only reset active targets"),this.targetStates[e]=new ti,this.metadataProvider.getRemoteKeysForTarget(e).forEach((function(n){t.removeDocumentFromTarget(e,n,null)}))},e.prototype.targetContainsDocument=function(e,t){return this.metadataProvider.getRemoteKeysForTarget(e).has(t)},e}();function ri(){return new De(fe.comparator)}function ii(){return new De(fe.comparator)}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var oi="RemoteStore",ai=function(){function e(e,t,n,r,i){var o=this;this.localStore=e,this.datastore=t,this.writePipeline=[],this.listenTargets={},this.watchChangeAggregator=null,this.networkEnabled=!1,this.isPrimary=!1,this.connectivityMonitor=i,this.connectivityMonitor.addCallback((function(e){n.enqueueAndForget((function(){return a.__awaiter(o,void 0,void 0,(function(){return a.__generator(this,(function(e){switch(e.label){case 0:return this.canUseNetwork()?(m(oi,"Restarting streams for network reachability change."),[4,this.restartNetwork()]):[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))})),this.onlineStateTracker=new Vr(n,r),this.watchStream=this.datastore.newPersistentWatchStream({onOpen:this.onWatchStreamOpen.bind(this),onClose:this.onWatchStreamClose.bind(this),onWatchChange:this.onWatchStreamChange.bind(this)}),this.writeStream=this.datastore.newPersistentWriteStream({onOpen:this.onWriteStreamOpen.bind(this),onClose:this.onWriteStreamClose.bind(this),onHandshakeComplete:this.onWriteHandshakeComplete.bind(this),onMutationResult:this.onMutationResult.bind(this)})}return e.prototype.start=function(){return this.enableNetwork()},e.prototype.enableNetwork=function(){return a.__awaiter(this,void 0,void 0,(function(){var e;return a.__generator(this,(function(t){switch(t.label){case 0:return this.networkEnabled=!0,this.canUseNetwork()?(e=this.writeStream,[4,this.localStore.getLastStreamToken()]):[3,3];case 1:return e.lastStreamToken=t.sent(),this.shouldStartWatchStream()?this.startWatchStream():this.onlineStateTracker.set(Mr.Unknown),[4,this.fillWritePipeline()];case 2:t.sent(),t.label=3;case 3:return[2]}}))}))},e.prototype.disableNetwork=function(){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(e){switch(e.label){case 0:return this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return e.sent(),this.onlineStateTracker.set(Mr.Offline),[2]}}))}))},e.prototype.disableNetworkInternal=function(){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(e){switch(e.label){case 0:return[4,this.writeStream.stop()];case 1:return e.sent(),[4,this.watchStream.stop()];case 2:return e.sent(),this.writePipeline.length>0&&(m(oi,"Stopping write stream with "+this.writePipeline.length+" pending writes"),this.writePipeline=[]),this.cleanUpWatchStreamState(),[2]}}))}))},e.prototype.shutdown=function(){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(e){switch(e.label){case 0:return m(oi,"RemoteStore shutting down."),this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return e.sent(),this.connectivityMonitor.shutdown(),this.onlineStateTracker.set(Mr.Unknown),[2]}}))}))},e.prototype.listen=function(e){C(this.listenTargets,e.targetId)||(this.listenTargets[e.targetId]=e,this.shouldStartWatchStream()?this.startWatchStream():this.watchStream.isOpen()&&this.sendWatchRequest(e))},e.prototype.unlisten=function(e){b(C(this.listenTargets,e),"unlisten called on target no currently watched: "+e),delete this.listenTargets[e],this.watchStream.isOpen()&&this.sendUnwatchRequest(e),N(this.listenTargets)&&(this.watchStream.isOpen()?this.watchStream.markIdle():this.canUseNetwork()&&this.onlineStateTracker.set(Mr.Unknown))},e.prototype.getTargetDataForTarget=function(e){return this.listenTargets[e]||null},e.prototype.getRemoteKeysForTarget=function(e){return this.syncEngine.getRemoteKeysForTarget(e)},e.prototype.sendWatchRequest=function(e){this.watchChangeAggregator.recordPendingTargetRequest(e.targetId),this.watchStream.watch(e)},e.prototype.sendUnwatchRequest=function(e){this.watchChangeAggregator.recordPendingTargetRequest(e),this.watchStream.unwatch(e)},e.prototype.startWatchStream=function(){b(this.shouldStartWatchStream(),"startWatchStream() called when shouldStartWatchStream() is false."),this.watchChangeAggregator=new ni(this),this.watchStream.start(),this.onlineStateTracker.handleWatchStreamStart()},e.prototype.shouldStartWatchStream=function(){return this.canUseNetwork()&&!this.watchStream.isStarted()&&!N(this.listenTargets)},e.prototype.canUseNetwork=function(){return this.isPrimary&&this.networkEnabled},e.prototype.cleanUpWatchStreamState=function(){this.watchChangeAggregator=null},e.prototype.onWatchStreamOpen=function(){return a.__awaiter(this,void 0,void 0,(function(){var e=this;return a.__generator(this,(function(t){return D(this.listenTargets,(function(t,n){e.sendWatchRequest(n)})),[2]}))}))},e.prototype.onWatchStreamClose=function(e){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(t){return void 0===e&&b(!this.shouldStartWatchStream(),"Watch stream was stopped gracefully while still needed."),this.cleanUpWatchStreamState(),this.shouldStartWatchStream()?(this.onlineStateTracker.handleWatchStreamFailure(e),this.startWatchStream()):this.onlineStateTracker.set(Mr.Unknown),[2]}))}))},e.prototype.onWatchStreamChange=function(e,t){return a.__awaiter(this,void 0,void 0,(function(){var n;return a.__generator(this,(function(r){switch(r.label){case 0:return this.onlineStateTracker.set(Mr.Online),e instanceof ei&&e.state===Qr.Removed&&e.cause?[2,this.handleTargetError(e)]:(e instanceof $r?this.watchChangeAggregator.handleDocumentChange(e):e instanceof Zr?this.watchChangeAggregator.handleExistenceFilter(e):(b(e instanceof ei,"Expected watchChange to be an instance of WatchTargetChange"),this.watchChangeAggregator.handleTargetChange(e)),t.isEqual(_e.MIN)?[3,3]:[4,this.localStore.getLastRemoteSnapshotVersion()]);case 1:return n=r.sent(),t.compareTo(n)>=0?[4,this.raiseWatchSnapshot(t)]:[3,3];case 2:r.sent(),r.label=3;case 3:return[2]}}))}))},e.prototype.raiseWatchSnapshot=function(e){var t=this;b(!e.isEqual(_e.MIN),"Can't raise event for unknown SnapshotVersion");var n=this.watchChangeAggregator.createRemoteEvent(e);return D(n.targetChanges,(function(n,r){if(r.resumeToken.length>0){var i=t.listenTargets[n];i&&(t.listenTargets[n]=i.withResumeToken(r.resumeToken,e))}})),n.targetMismatches.forEach((function(e){var n=t.listenTargets[e];if(n){t.listenTargets[e]=n.withResumeToken(T(),n.snapshotVersion),t.sendUnwatchRequest(e);var r=new kn(n.target,e,Tn.ExistenceFilterMismatch,n.sequenceNumber);t.sendWatchRequest(r)}})),this.syncEngine.applyRemoteEvent(n)},e.prototype.handleTargetError=function(e){var t=this;b(!!e.cause,"Handling target error without a cause");var n=e.cause,r=Promise.resolve();return e.targetIds.forEach((function(e){r=r.then((function(){return a.__awaiter(t,void 0,void 0,(function(){return a.__generator(this,(function(t){return C(this.listenTargets,e)?(delete this.listenTargets[e],this.watchChangeAggregator.removeTarget(e),[2,this.syncEngine.rejectListen(e,n)]):[2]}))}))}))})),r},e.prototype.fillWritePipeline=function(){return a.__awaiter(this,void 0,void 0,(function(){var e,t;return a.__generator(this,(function(n){switch(n.label){case 0:return this.canAddToWritePipeline()?(e=this.writePipeline.length>0?this.writePipeline[this.writePipeline.length-1].batchId:-1,[4,this.localStore.nextMutationBatch(e)]):[3,4];case 1:return null!==(t=n.sent())?[3,2]:(0===this.writePipeline.length&&this.writeStream.markIdle(),[3,4]);case 2:return this.addToWritePipeline(t),[4,this.fillWritePipeline()];case 3:n.sent(),n.label=4;case 4:return this.shouldStartWriteStream()&&this.startWriteStream(),[2]}}))}))},e.prototype.canAddToWritePipeline=function(){return this.canUseNetwork()&&this.writePipeline.length<10},e.prototype.outstandingWrites=function(){return this.writePipeline.length},e.prototype.addToWritePipeline=function(e){b(this.canAddToWritePipeline(),"addToWritePipeline called when pipeline is full"),this.writePipeline.push(e),this.writeStream.isOpen()&&this.writeStream.handshakeComplete&&this.writeStream.writeMutations(e.mutations)},e.prototype.shouldStartWriteStream=function(){return this.canUseNetwork()&&!this.writeStream.isStarted()&&this.writePipeline.length>0},e.prototype.startWriteStream=function(){b(this.shouldStartWriteStream(),"startWriteStream() called when shouldStartWriteStream() is false."),this.writeStream.start()},e.prototype.onWriteStreamOpen=function(){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(e){return this.writeStream.writeHandshake(),[2]}))}))},e.prototype.onWriteHandshakeComplete=function(){var e=this;return this.localStore.setLastStreamToken(this.writeStream.lastStreamToken).then((function(){for(var t=0,n=e.writePipeline;t<n.length;t++){var r=n[t];e.writeStream.writeMutations(r.mutations)}})).catch(Un)},e.prototype.onMutationResult=function(e,t){var n=this;b(this.writePipeline.length>0,"Got result for empty write pipeline");var r=this.writePipeline.shift(),i=Ke.from(r,e,t,this.writeStream.lastStreamToken);return this.syncEngine.applySuccessfulWrite(i).then((function(){return n.fillWritePipeline()}))},e.prototype.onWriteStreamClose=function(e){return a.__awaiter(this,void 0,void 0,(function(){var t=this;return a.__generator(this,(function(n){return void 0===e&&b(!this.shouldStartWriteStream(),"Write stream was stopped gracefully while still needed."),e&&this.writePipeline.length>0?(void 0,[2,(this.writeStream.handshakeComplete?this.handleWriteError(e):this.handleHandshakeError(e)).then((function(){t.shouldStartWriteStream()&&t.startWriteStream()}))]):[2]}))}))},e.prototype.handleHandshakeError=function(e){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(t){return qr(e.code)?(m(oi,"RemoteStore error before completed handshake; resetting stream token: ",this.writeStream.lastStreamToken),this.writeStream.lastStreamToken=T(),[2,this.localStore.setLastStreamToken(T()).catch(Un)]):[2]}))}))},e.prototype.handleWriteError=function(e){return a.__awaiter(this,void 0,void 0,(function(){var t,n=this;return a.__generator(this,(function(r){return qr(i=e.code)&&i!==S.ABORTED?(t=this.writePipeline.shift(),this.writeStream.inhibitBackoff(),[2,this.syncEngine.rejectFailedWrite(t.batchId,e).then((function(){return n.fillWritePipeline()}))]):[2];var i}))}))},e.prototype.createTransaction=function(){return new Br(this.datastore)},e.prototype.restartNetwork=function(){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(e){switch(e.label){case 0:return this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return e.sent(),this.onlineStateTracker.set(Mr.Unknown),[4,this.enableNetwork()];case 2:return e.sent(),[2]}}))}))},e.prototype.handleCredentialChange=function(){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(e){switch(e.label){case 0:return this.canUseNetwork()?(m(oi,"RemoteStore restarting streams for new credential"),[4,this.restartNetwork()]):[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},e.prototype.applyPrimaryState=function(e){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(t){switch(t.label){case 0:return this.isPrimary=e,e&&this.networkEnabled?[4,this.enableNetwork()]:[3,2];case 1:return t.sent(),[3,4];case 2:return e?[3,4]:[4,this.disableNetworkInternal()];case 3:t.sent(),this.onlineStateTracker.set(Mr.Unknown),t.label=4;case 4:return[2]}}))}))},e}(),si=function(){function e(e,t){if(x("GeoPoint",arguments,2),P("GeoPoint","number",1,e),P("GeoPoint","number",2,t),!isFinite(e)||e<-90||e>90)throw new I(S.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new I(S.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}return Object.defineProperty(e.prototype,"latitude",{get:function(){return this._lat},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"longitude",{get:function(){return this._long},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(e){return this._lat===e._lat&&this._long===e._long},e.prototype._compareTo=function(e){return X(this._lat,e._lat)||X(this._long,e._long)},e}(),ui=function(){function e(){}return e.prototype.applyToLocalView=function(e,t){return new Bt(t,e)},e.prototype.applyToRemoteDocument=function(e,t){return t},e.prototype.computeBaseValue=function(e){return null},e.prototype.isEqual=function(t){return t instanceof e},e.instance=new e,e}(),ci=function(){function e(e){this.elements=e}return e.prototype.applyToLocalView=function(e,t){return this.apply(e)},e.prototype.applyToRemoteDocument=function(e,t){return this.apply(e)},e.prototype.apply=function(e){for(var t=di(e),n=function(e){t.find((function(t){return t.isEqual(e)}))||t.push(e)},r=0,i=this.elements;r<i.length;r++){n(i[r])}return new Wt(t)},e.prototype.computeBaseValue=function(e){return null},e.prototype.isEqual=function(t){return t instanceof e&&$(t.elements,this.elements)},e}(),li=function(){function e(e){this.elements=e}return e.prototype.applyToLocalView=function(e,t){return this.apply(e)},e.prototype.applyToRemoteDocument=function(e,t){return this.apply(e)},e.prototype.apply=function(e){for(var t=di(e),n=function(e){t=t.filter((function(t){return!t.isEqual(e)}))},r=0,i=this.elements;r<i.length;r++){n(i[r])}return new Wt(t)},e.prototype.computeBaseValue=function(e){return null},e.prototype.isEqual=function(t){return t instanceof e&&$(t.elements,this.elements)},e}(),hi=function(){function e(e){this.operand=e}return e.prototype.applyToLocalView=function(e,t){var n=this.computeBaseValue(e);if(n instanceof Pt&&this.operand instanceof Pt){var r=n.internalValue+this.operand.internalValue;return new Pt(r)}r=n.internalValue+this.operand.internalValue;return new Ot(r)},e.prototype.applyToRemoteDocument=function(e,t){return b(null!==t,"Didn't receive transformResult for NUMERIC_ADD transform"),t},e.prototype.computeBaseValue=function(e){return e instanceof Mt?e:new Pt(0)},e.prototype.isEqual=function(t){return t instanceof e&&this.operand.isEqual(t.operand)},e}();function di(e){return e instanceof Wt?e.internalValue.slice():[]}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fi,pi,mi=function(){function e(e){this.count=e}return e.prototype.isEqual=function(e){return e&&e.count===this.count},e}(),gi=((fi={})[lr.ASCENDING.name]="ASCENDING",fi[lr.DESCENDING.name]="DESCENDING",fi),yi=((pi={})[rr.LESS_THAN.name]="LESS_THAN",pi[rr.LESS_THAN_OR_EQUAL.name]="LESS_THAN_OR_EQUAL",pi[rr.GREATER_THAN.name]="GREATER_THAN",pi[rr.GREATER_THAN_OR_EQUAL.name]="GREATER_THAN_OR_EQUAL",pi[rr.EQUAL.name]="EQUAL",pi[rr.ARRAY_CONTAINS.name]="ARRAY_CONTAINS",pi[rr.IN.name]="IN",pi[rr.ARRAY_CONTAINS_ANY.name]="ARRAY_CONTAINS_ANY",pi),vi=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bi(e,t){b(!Xn(e),t+" is missing")}function wi(e){return"number"==typeof e?e:"string"==typeof e?Number(e):v("can't parse "+e)}var Ti=function(){function e(e,t){this.databaseId=e,this.options=t}return e.prototype.emptyByteString=function(){return this.options.useProto3Json?"":new Uint8Array(0)},e.prototype.unsafeCastProtoByteString=function(e){return e},e.prototype.fromRpcStatus=function(e){var t=void 0===e.code?S.UNKNOWN:Ur(e.code);return new I(t,e.message||"")},e.prototype.toInt32Value=function(e){return this.options.useProto3Json||Xn(e)?e:{value:e}},e.prototype.fromInt32Value=function(e){var t;return Xn(t="object"==typeof e?e.value:e)?null:t},e.prototype.toTimestamp=function(e){return this.options.useProto3Json?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}},e.prototype.fromTimestamp=function(e){if("string"==typeof e)return this.fromIso8601String(e);b(!!e,"Cannot deserialize null or undefined timestamp.");var t=wi(e.seconds||"0"),n=e.nanos||0;return new Ce(t,n)},e.prototype.fromIso8601String=function(e){var t=0,n=vi.exec(e);if(b(!!n,"invalid timestamp: "+e),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e),o=Math.floor(i.getTime()/1e3);return new Ce(o,t)},e.prototype.toBytes=function(e){return this.options.useProto3Json?e.toBase64():this.unsafeCastProtoByteString(e.toUint8Array())},e.prototype.fromBlob=function(e){return"string"==typeof e?(b(this.options.useProto3Json,"Expected bytes to be passed in as Uint8Array, but got a string instead."),re.fromBase64String(e)):(b(!this.options.useProto3Json,"Expected bytes to be passed in as Uint8Array, but got a string instead."),re.fromUint8Array(e))},e.prototype.toVersion=function(e){return this.toTimestamp(e.toTimestamp())},e.prototype.fromVersion=function(e){return b(!!e,"Trying to deserialize version that isn't set"),_e.fromTimestamp(this.fromTimestamp(e))},e.prototype.toResourceName=function(e,t){return this.fullyQualifiedPrefixPath(e).child("documents").child(t).canonicalString()},e.prototype.fromResourceName=function(e){var t=le.fromString(e);return b(this.isValidResourceName(t),"Tried to deserialize invalid key "+t.toString()),t},e.prototype.toName=function(e){return this.toResourceName(this.databaseId,e.path)},e.prototype.fromName=function(e){var t=this.fromResourceName(e);return b(t.get(1)===this.databaseId.projectId,"Tried to deserialize key from different project: "+t.get(1)+" vs "+this.databaseId.projectId),b(!t.get(3)&&!this.databaseId.database||t.get(3)===this.databaseId.database,"Tried to deserialize key from different database: "+t.get(3)+" vs "+this.databaseId.database),new fe(this.extractLocalPathFromResourceName(t))},e.prototype.toQueryPath=function(e){return this.toResourceName(this.databaseId,e)},e.prototype.fromQueryPath=function(e){var t=this.fromResourceName(e);return 4===t.length?le.EMPTY_PATH:this.extractLocalPathFromResourceName(t)},Object.defineProperty(e.prototype,"encodedDatabaseId",{get:function(){return new le(["projects",this.databaseId.projectId,"databases",this.databaseId.database]).canonicalString()},enumerable:!0,configurable:!0}),e.prototype.fullyQualifiedPrefixPath=function(e){return new le(["projects",e.projectId,"databases",e.database])},e.prototype.extractLocalPathFromResourceName=function(e){return b(e.length>4&&"documents"===e.get(4),"tried to deserialize invalid key "+e.toString()),e.popFirst(5)},e.prototype.isValidResourceName=function(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)},e.prototype.toValue=function(e){if(e instanceof At)return{nullValue:"NULL_VALUE"};if(e instanceof xt)return{booleanValue:e.value()};if(e instanceof Pt)return{integerValue:""+e.value()};if(e instanceof Ot){var t=e.value();if(this.options.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:e.value()}}return e instanceof Rt?{stringValue:e.value()}:e instanceof Ut?{mapValue:this.toMapValue(e)}:e instanceof Wt?{arrayValue:this.toArrayValue(e)}:e instanceof jt?{timestampValue:this.toTimestamp(e.internalValue)}:e instanceof qt?{geoPointValue:{latitude:e.value().latitude,longitude:e.value().longitude}}:e instanceof Ft?{bytesValue:this.toBytes(e.value())}:e instanceof Vt?{referenceValue:this.toResourceName(e.databaseId,e.key.path)}:v("Unknown FieldValue "+JSON.stringify(e))},e.prototype.fromValue=function(e){var t=this;if("nullValue"in e)return At.INSTANCE;if("booleanValue"in e)return xt.of(e.booleanValue);if("integerValue"in e)return new Pt(wi(e.integerValue));if("doubleValue"in e){if(this.options.useProto3Json){if("NaN"===e.doubleValue)return Ot.NAN;if("Infinity"===e.doubleValue)return Ot.POSITIVE_INFINITY;if("-Infinity"===e.doubleValue)return Ot.NEGATIVE_INFINITY}return new Ot(e.doubleValue)}if("stringValue"in e)return new Rt(e.stringValue);if("mapValue"in e)return this.fromFields(e.mapValue.fields||{});if("arrayValue"in e){bi(e.arrayValue,"arrayValue");var n=e.arrayValue.values||[];return new Wt(n.map((function(e){return t.fromValue(e)})))}if("timestampValue"in e)return bi(e.timestampValue,"timestampValue"),new jt(this.fromTimestamp(e.timestampValue));if("geoPointValue"in e){bi(e.geoPointValue,"geoPointValue");var r=e.geoPointValue.latitude||0,i=e.geoPointValue.longitude||0;return new qt(new si(r,i))}if("bytesValue"in e){bi(e.bytesValue,"bytesValue");var o=this.fromBlob(e.bytesValue);return new Ft(o)}if("referenceValue"in e){bi(e.referenceValue,"referenceValue");var a=this.fromResourceName(e.referenceValue),s=new se(a.get(1),a.get(3)),u=new fe(this.extractLocalPathFromResourceName(a));return new Vt(s,u)}return v("Unknown Value proto "+JSON.stringify(e))},e.prototype.toMutationDocument=function(e,t){return{name:this.toName(e),fields:this.toFields(t)}},e.prototype.toDocument=function(e){return b(!e.hasLocalMutations,"Can't serialize documents with mutations."),{name:this.toName(e.key),fields:this.toFields(e.data()),updateTime:this.toTimestamp(e.version.toTimestamp())}},e.prototype.fromDocument=function(e,t){var n=this,r=this.fromName(e.name),i=this.fromVersion(e.updateTime);return new Kt(r,i,{hasCommittedMutations:!!t},void 0,e,(function(e){return n.fromValue(e)}))},e.prototype.toFields=function(e){var t=this,n={};return e.forEach((function(e,r){n[e]=t.toValue(r)})),n},e.prototype.fromFields=function(e){var t=this,n=e,r=Ut.EMPTY;return k(n,(function(e,n){r=r.set(new de([e]),t.fromValue(n))})),r},e.prototype.toMapValue=function(e){return{fields:this.toFields(e)}},e.prototype.toArrayValue=function(e){var t=this,n=[];return e.forEach((function(e){n.push(t.toValue(e))})),{values:n}},e.prototype.fromFound=function(e){var t=this;b(!!e.found,"Tried to deserialize a found document from a missing document."),bi(e.found.name,"doc.found.name"),bi(e.found.updateTime,"doc.found.updateTime");var n=this.fromName(e.found.name),r=this.fromVersion(e.found.updateTime);return new Kt(n,r,{},void 0,e.found,(function(e){return t.fromValue(e)}))},e.prototype.fromMissing=function(e){b(!!e.missing,"Tried to deserialize a missing document from a found document."),b(!!e.readTime,"Tried to deserialize a missing document without a read time.");var t=this.fromName(e.missing),n=this.fromVersion(e.readTime);return new Gt(t,n)},e.prototype.fromMaybeDocument=function(e){return"found"in e?this.fromFound(e):"missing"in e?this.fromMissing(e):v("invalid batch get response: "+JSON.stringify(e))},e.prototype.toWatchTargetChangeState=function(e){switch(e){case Qr.Added:return"ADD";case Qr.Current:return"CURRENT";case Qr.NoChange:return"NO_CHANGE";case Qr.Removed:return"REMOVE";case Qr.Reset:return"RESET";default:return v("Unknown WatchTargetChangeState: "+e)}},e.prototype.toTestWatchChange=function(e){if(e instanceof Zr)return{filter:{count:e.existenceFilter.count,targetId:e.targetId}};if(e instanceof $r){if(e.newDoc instanceof Kt){var t=e.newDoc;return{documentChange:{document:{name:this.toName(t.key),fields:this.toFields(t.data()),updateTime:this.toVersion(t.version)},targetIds:e.updatedTargetIds,removedTargetIds:e.removedTargetIds}}}if(e.newDoc instanceof Gt){t=e.newDoc;return{documentDelete:{document:this.toName(t.key),readTime:this.toVersion(t.version),removedTargetIds:e.removedTargetIds}}}if(null===e.newDoc)return{documentRemove:{document:this.toName(e.key),removedTargetIds:e.removedTargetIds}}}if(e instanceof ei){var n=void 0;return e.cause&&(n={code:Wr(e.cause.code),message:e.cause.message}),{targetChange:{targetChangeType:this.toWatchTargetChangeState(e.state),targetIds:e.targetIds,resumeToken:this.unsafeCastProtoByteString(e.resumeToken),cause:n}}}return v("Unrecognized watch change: "+JSON.stringify(e))},e.prototype.fromWatchChange=function(e){var t,n=this;if("targetChange"in e){bi(e.targetChange,"targetChange");var r=this.fromWatchTargetChangeState(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=e.targetChange.resumeToken||this.emptyByteString(),a=e.targetChange.cause,s=a&&this.fromRpcStatus(a);t=new ei(r,i,o,s||null)}else if("documentChange"in e){bi(e.documentChange,"documentChange");var u=e.documentChange;bi(u.document,"documentChange.name"),bi(u.document.name,"documentChange.document.name"),bi(u.document.updateTime,"documentChange.document.updateTime");var c=this.fromName(u.document.name),l=this.fromVersion(u.document.updateTime),h=new Kt(c,l,{},void 0,u.document,(function(e){return n.fromValue(e)})),d=u.targetIds||[],f=u.removedTargetIds||[];t=new $r(d,f,h.key,h)}else if("documentDelete"in e){bi(e.documentDelete,"documentDelete");var p=e.documentDelete;bi(p.document,"documentDelete.document");c=this.fromName(p.document),l=p.readTime?this.fromVersion(p.readTime):_e.forDeletedDoc(),h=new Gt(c,l),f=p.removedTargetIds||[];t=new $r([],f,h.key,h)}else if("documentRemove"in e){bi(e.documentRemove,"documentRemove");var m=e.documentRemove;bi(m.document,"documentRemove");c=this.fromName(m.document),f=m.removedTargetIds||[];t=new $r([],f,c,null)}else{if(!("filter"in e))return v("Unknown change type "+JSON.stringify(e));bi(e.filter,"filter");var g=e.filter;bi(g.targetId,"filter.targetId");var y=g.count||0,b=new mi(y),w=g.targetId;t=new Zr(w,b)}return t},e.prototype.fromWatchTargetChangeState=function(e){return"NO_CHANGE"===e?Qr.NoChange:"ADD"===e?Qr.Added:"REMOVE"===e?Qr.Removed:"CURRENT"===e?Qr.Current:"RESET"===e?Qr.Reset:v("Got unexpected TargetChange.state: "+e)},e.prototype.versionFromListenResponse=function(e){if(!("targetChange"in e))return _e.MIN;var t=e.targetChange;return t.targetIds&&t.targetIds.length?_e.MIN:t.readTime?this.fromVersion(t.readTime):_e.MIN},e.prototype.toMutation=function(e){var t,n=this;if(e instanceof Et)t={update:this.toMutationDocument(e.key,e.value)};else if(e instanceof Dt)t={delete:this.toName(e.key)};else if(e instanceof Ct)t={update:this.toMutationDocument(e.key,e.data),updateMask:this.toDocumentMask(e.fieldMask)};else{if(!(e instanceof _t))return v("Unknown mutation type "+e.type);t={transform:{document:this.toName(e.key),fieldTransforms:e.fieldTransforms.map((function(e){return n.toFieldTransform(e)}))}}}return e.precondition.isNone||(t.currentDocument=this.toPrecondition(e.precondition)),t},e.prototype.fromMutation=function(e){var t=this,n=e.currentDocument?this.fromPrecondition(e.currentDocument):St.NONE;if(e.update){bi(e.update.name,"name");var r=this.fromName(e.update.name),i=this.fromFields(e.update.fields||{});if(e.updateMask){var o=this.fromDocumentMask(e.updateMask);return new Ct(r,i,o,n)}return new Et(r,i,n)}if(e.delete){r=this.fromName(e.delete);return new Dt(r,n)}if(e.transform){r=this.fromName(e.transform.document);var a=e.transform.fieldTransforms.map((function(e){return t.fromFieldTransform(e)}));return b(!0===n.exists,'Transforms only support precondition "exists == true"'),new _t(r,a)}return v("unknown mutation proto: "+JSON.stringify(e))},e.prototype.toPrecondition=function(e){return b(!e.isNone,"Can't serialize an empty precondition"),void 0!==e.updateTime?{updateTime:this.toVersion(e.updateTime)}:void 0!==e.exists?{exists:e.exists}:v("Unknown precondition")},e.prototype.fromPrecondition=function(e){return void 0!==e.updateTime?St.updateTime(this.fromVersion(e.updateTime)):void 0!==e.exists?St.exists(e.exists):St.NONE},e.prototype.fromWriteResult=function(e,t){var n=this,r=e.updateTime?this.fromVersion(e.updateTime):this.fromVersion(t);r.isEqual(_e.MIN)&&(r=this.fromVersion(t));var i=null;return e.transformResults&&e.transformResults.length>0&&(i=e.transformResults.map((function(e){return n.fromValue(e)}))),new bt(r,i)},e.prototype.fromWriteResults=function(e,t){var n=this;return e&&e.length>0?(b(void 0!==t,"Received a write result without a commit time"),e.map((function(e){return n.fromWriteResult(e,t)}))):[]},e.prototype.toFieldTransform=function(e){var t=this,n=e.transform;if(n instanceof ui)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof ci)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements.map((function(e){return t.toValue(e)}))}};if(n instanceof li)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements.map((function(e){return t.toValue(e)}))}};if(n instanceof hi)return{fieldPath:e.field.canonicalString(),increment:this.toValue(n.operand)};throw v("Unknown transform: "+e.transform)},e.prototype.fromFieldTransform=function(e){var t=this,n=null;if("setToServerValue"in e)b("REQUEST_TIME"===e.setToServerValue,"Unknown server value transform proto: "+JSON.stringify(e)),n=ui.instance;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new ci(r.map((function(e){return t.fromValue(e)})))}else if("removeAllFromArray"in e){r=e.removeAllFromArray.values||[];n=new li(r.map((function(e){return t.fromValue(e)})))}else if("increment"in e){var i=this.fromValue(e.increment);b(i instanceof Mt,"NUMERIC_ADD transform requires a NumberValue"),n=new hi(i)}else v("Unknown transform proto: "+JSON.stringify(e));var o=de.fromServerFormat(e.fieldPath);return new vt(o,n)},e.prototype.toDocumentsTarget=function(e){return{documents:[this.toQueryPath(e.path)]}},e.prototype.fromDocumentsTarget=function(e){var t=e.documents.length;b(1===t,"DocumentsTarget contained other than 1 document: "+t);var n=e.documents[0];return tr.atPath(this.fromQueryPath(n)).toTarget()},e.prototype.toQueryTarget=function(e){var t={structuredQuery:{}},n=e.path;null!==e.collectionGroup?(b(n.length%2==0,"Collection Group queries should be within a document path or root."),t.parent=this.toQueryPath(n),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(b(n.length%2!=0,"Document queries with filters are not supported."),t.parent=this.toQueryPath(n.popLast()),t.structuredQuery.from=[{collectionId:n.lastSegment()}]);var r=this.toFilter(e.filters);r&&(t.structuredQuery.where=r);var i=this.toOrder(e.orderBy);i&&(t.structuredQuery.orderBy=i);var o=this.toInt32Value(e.limit);return null!==o&&(t.structuredQuery.limit=o),e.startAt&&(t.structuredQuery.startAt=this.toCursor(e.startAt)),e.endAt&&(t.structuredQuery.endAt=this.toCursor(e.endAt)),t},e.prototype.fromQueryTarget=function(e){var t=this.fromQueryPath(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){b(1===r,"StructuredQuery.from with more than one collection is not supported.");var o=n.from[0];o.allDescendants?i=o.collectionId:t=t.child(o.collectionId)}var a=[];n.where&&(a=this.fromFilter(n.where));var s=[];n.orderBy&&(s=this.fromOrder(n.orderBy));var u=null;n.limit&&(u=this.fromInt32Value(n.limit));var c=null;n.startAt&&(c=this.fromCursor(n.startAt));var l=null;return n.endAt&&(l=this.fromCursor(n.endAt)),new tr(t,i,s,a,u,Zn.First,c,l).toTarget()},e.prototype.toListenRequestLabels=function(e){var t=this.toLabel(e.purpose);return null==t?null:{"goog-listen-tags":t}},e.prototype.toLabel=function(e){switch(e){case Tn.Listen:return null;case Tn.ExistenceFilterMismatch:return"existence-filter-mismatch";case Tn.LimboResolution:return"limbo-document";default:return v("Unrecognized query purpose: "+e)}},e.prototype.toTarget=function(e){var t,n=e.target;return(t=n.isDocumentQuery()?{documents:this.toDocumentsTarget(n)}:{query:this.toQueryTarget(n)}).targetId=e.targetId,e.resumeToken.length>0&&(t.resumeToken=this.unsafeCastProtoByteString(e.resumeToken)),t},e.prototype.toFilter=function(e){var t=this;if(0!==e.length){var n=e.map((function(e){return e instanceof ir?t.toUnaryOrFieldFilter(e):v("Unrecognized filter: "+JSON.stringify(e))}));return 1===n.length?n[0]:{compositeFilter:{op:"AND",filters:n}}}},e.prototype.fromFilter=function(e){var t=this;return e?void 0!==e.unaryFilter?[this.fromUnaryFilter(e)]:void 0!==e.fieldFilter?[this.fromFieldFilter(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return t.fromFilter(e)})).reduce((function(e,t){return e.concat(t)})):v("Unknown filter: "+JSON.stringify(e)):[]},e.prototype.toOrder=function(e){var t=this;if(0!==e.length)return e.map((function(e){return t.toPropertyOrder(e)}))},e.prototype.fromOrder=function(e){var t=this;return e.map((function(e){return t.fromPropertyOrder(e)}))},e.prototype.toCursor=function(e){var t=this;return{before:e.before,values:e.position.map((function(e){return t.toValue(e)}))}},e.prototype.fromCursor=function(e){var t=this,n=!!e.before,r=e.values.map((function(e){return t.fromValue(e)}));return new hr(r,n)},e.prototype.toDirection=function(e){return gi[e.name]},e.prototype.fromDirection=function(e){switch(e){case"ASCENDING":return lr.ASCENDING;case"DESCENDING":return lr.DESCENDING;default:return}},e.prototype.toOperatorName=function(e){return yi[e.name]},e.prototype.fromOperatorName=function(e){switch(e){case"EQUAL":return rr.EQUAL;case"GREATER_THAN":return rr.GREATER_THAN;case"GREATER_THAN_OR_EQUAL":return rr.GREATER_THAN_OR_EQUAL;case"LESS_THAN":return rr.LESS_THAN;case"LESS_THAN_OR_EQUAL":return rr.LESS_THAN_OR_EQUAL;case"ARRAY_CONTAINS":return rr.ARRAY_CONTAINS;case"IN":return rr.IN;case"ARRAY_CONTAINS_ANY":return rr.ARRAY_CONTAINS_ANY;case"OPERATOR_UNSPECIFIED":return v("Unspecified operator");default:return v("Unknown operator")}},e.prototype.toFieldPathReference=function(e){return{fieldPath:e.canonicalString()}},e.prototype.fromFieldPathReference=function(e){return de.fromServerFormat(e.fieldPath)},e.prototype.toPropertyOrder=function(e){return{field:this.toFieldPathReference(e.field),direction:this.toDirection(e.dir)}},e.prototype.fromPropertyOrder=function(e){return new dr(this.fromFieldPathReference(e.field),this.fromDirection(e.direction))},e.prototype.fromFieldFilter=function(e){return ir.create(this.fromFieldPathReference(e.fieldFilter.field),this.fromOperatorName(e.fieldFilter.op),this.fromValue(e.fieldFilter.value))},e.prototype.toUnaryOrFieldFilter=function(e){if(e.op===rr.EQUAL){if(e.value.isEqual(Ot.NAN))return{unaryFilter:{field:this.toFieldPathReference(e.field),op:"IS_NAN"}};if(e.value.isEqual(At.INSTANCE))return{unaryFilter:{field:this.toFieldPathReference(e.field),op:"IS_NULL"}}}return{fieldFilter:{field:this.toFieldPathReference(e.field),op:this.toOperatorName(e.op),value:this.toValue(e.value)}}},e.prototype.fromUnaryFilter=function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=this.fromFieldPathReference(e.unaryFilter.field);return ir.create(t,rr.EQUAL,Ot.NAN);case"IS_NULL":var n=this.fromFieldPathReference(e.unaryFilter.field);return ir.create(n,rr.EQUAL,At.INSTANCE);case"OPERATOR_UNSPECIFIED":return v("Unspecified filter");default:return v("Unknown filter")}},e.prototype.toDocumentMask=function(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}},e.prototype.fromDocumentMask=function(e){var t=(e.fieldPaths||[]).map((function(e){return de.fromServerFormat(e)}));return yt.fromArray(t)},e}(),Si=function(){this.viewSnap=null,this.targetId=0,this.listeners=[]},Ii=function(){function e(e){this.syncEngine=e,this.queries=new Ht((function(e){return e.canonicalId()})),this.onlineState=Mr.Unknown,this.snapshotsInSyncListeners=new Set,this.syncEngine.subscribe(this)}return e.prototype.listen=function(e){var t=e.query,n=!1,r=this.queries.get(t);(r||(n=!0,r=new Si,this.queries.set(t,r)),r.listeners.push(e),b(!e.applyOnlineStateChange(this.onlineState),"applyOnlineStateChange() shouldn't raise an event for brand-new listeners."),r.viewSnap)&&(e.onViewSnapshot(r.viewSnap)&&this.raiseSnapshotsInSyncEvent());return n?this.syncEngine.listen(t).then((function(e){return r.targetId=e,e})):Promise.resolve(r.targetId)},e.prototype.unlisten=function(e){return a.__awaiter(this,void 0,void 0,(function(){var t,n,r,i;return a.__generator(this,(function(o){return t=e.query,n=!1,(r=this.queries.get(t))&&(i=r.listeners.indexOf(e))>=0&&(r.listeners.splice(i,1),n=0===r.listeners.length),n?(this.queries.delete(t),[2,this.syncEngine.unlisten(t)]):[2]}))}))},e.prototype.onWatchChange=function(e){for(var t=!1,n=0,r=e;n<r.length;n++){var i=r[n],o=i.query,a=this.queries.get(o);if(a){for(var s=0,u=a.listeners;s<u.length;s++){u[s].onViewSnapshot(i)&&(t=!0)}a.viewSnap=i}}t&&this.raiseSnapshotsInSyncEvent()},e.prototype.onWatchError=function(e,t){var n=this.queries.get(e);if(n)for(var r=0,i=n.listeners;r<i.length;r++){i[r].onError(t)}this.queries.delete(e)},e.prototype.onOnlineStateChange=function(e){this.onlineState=e;var t=!1;this.queries.forEach((function(n,r){for(var i=0,o=r.listeners;i<o.length;i++){o[i].applyOnlineStateChange(e)&&(t=!0)}})),t&&this.raiseSnapshotsInSyncEvent()},e.prototype.addSnapshotsInSyncListener=function(e){this.snapshotsInSyncListeners.add(e),e.next()},e.prototype.removeSnapshotsInSyncListener=function(e){this.snapshotsInSyncListeners.delete(e)},e.prototype.raiseSnapshotsInSyncEvent=function(){this.snapshotsInSyncListeners.forEach((function(e){e.next()}))},e}(),Ei=function(){function e(e,t,n){this.query=e,this.queryObserver=t,this.raisedInitialEvent=!1,this.snap=null,this.onlineState=Mr.Unknown,this.options=n||{}}return e.prototype.onViewSnapshot=function(e){if(b(e.docChanges.length>0||e.syncStateChanged,"We got a new snapshot with no changes?"),!this.options.includeMetadataChanges){for(var t=[],n=0,r=e.docChanges;n<r.length;n++){var i=r[n];i.type!==zr.Metadata&&t.push(i)}e=new Yr(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var o=!1;return this.raisedInitialEvent?this.shouldRaiseEvent(e)&&(this.queryObserver.next(e),o=!0):this.shouldRaiseInitialEvent(e,this.onlineState)&&(this.raiseInitialEvent(e),o=!0),this.snap=e,o},e.prototype.onError=function(e){this.queryObserver.error(e)},e.prototype.applyOnlineStateChange=function(e){this.onlineState=e;var t=!1;return this.snap&&!this.raisedInitialEvent&&this.shouldRaiseInitialEvent(this.snap,e)&&(this.raiseInitialEvent(this.snap),t=!0),t},e.prototype.shouldRaiseInitialEvent=function(e,t){if(b(!this.raisedInitialEvent,"Determining whether to raise first event but already had first event"),!e.fromCache)return!0;var n=t!==Mr.Offline;return this.options.waitForSyncWhenOnline&&n?(b(e.fromCache,"Waiting for sync, but snapshot is not from cache"),!1):!e.docs.isEmpty()||t===Mr.Offline},e.prototype.shouldRaiseEvent=function(e){if(e.docChanges.length>0)return!0;var t=this.snap&&this.snap.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges},e.prototype.raiseInitialEvent=function(e){b(!this.raisedInitialEvent,"Trying to raise initial events for second time"),e=Yr.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.raisedInitialEvent=!0,this.queryObserver.next(e)},e}(),Ci=function(){function e(e,t,n,r){this.targetId=e,this.fromCache=t,this.addedKeys=n,this.removedKeys=r}return e.fromSnapshot=function(t,n){for(var r=qe(),i=qe(),o=0,a=n.docChanges;o<a.length;o++){var s=a[o];switch(s.type){case zr.Added:r=r.add(s.doc.key);break;case zr.Removed:i=i.add(s.doc.key)}}return new e(t,n.fromCache,r,i)},e}(),_i=function(e){this.key=e},Di=function(e){this.key=e},ki=function(){function e(e,t){this.query=e,this._syncedDocuments=t,this.syncState=null,this.current=!1,this.limboDocuments=qe(),this.mutatedKeys=qe(),this.documentSet=new Gr(e.docComparator.bind(e))}return Object.defineProperty(e.prototype,"syncedDocuments",{get:function(){return this._syncedDocuments},enumerable:!0,configurable:!0}),e.prototype.computeDocChanges=function(e,t){var n=this,r=t?t.changeSet:new Hr,i=t?t.documentSet:this.documentSet,o=t?t.mutatedKeys:this.mutatedKeys,a=i,s=!1,u=this.query.hasLimitToFirst()&&i.size===this.query.limit?i.last():null,c=this.query.hasLimitToLast()&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),h=t instanceof Kt?t:null;h&&(b(e.isEqual(h.key),"Mismatching keys found in document changes: "+e+" != "+h.key),h=n.query.matches(h)?h:null);var d=!!l&&n.mutatedKeys.has(l.key),f=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data().isEqual(h.data())?d!==f&&(r.track({type:zr.Metadata,doc:h}),p=!0):n.shouldWaitForSyncedDocument(l,h)||(r.track({type:zr.Modified,doc:h}),p=!0,(u&&n.query.docComparator(h,u)>0||c&&n.query.docComparator(h,c)<0)&&(s=!0)):!l&&h?(r.track({type:zr.Added,doc:h}),p=!0):l&&!h&&(r.track({type:zr.Removed,doc:l}),p=!0,(u||c)&&(s=!0));p&&(h?(a=a.add(h),o=f?o.add(e):o.delete(e)):(a=a.delete(e),o=o.delete(e)))})),this.query.hasLimitToFirst()||this.query.hasLimitToLast())for(;a.size>this.query.limit;){var l=this.query.hasLimitToFirst()?a.last():a.first();a=a.delete(l.key),o=o.delete(l.key),r.track({type:zr.Removed,doc:l})}return b(!s||!t,"View was refilled using docs that themselves needed refilling."),{documentSet:a,changeSet:r,needsRefill:s,mutatedKeys:o}},e.prototype.shouldWaitForSyncedDocument=function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations},e.prototype.applyChanges=function(e,t,n){var r=this;b(!e.needsRefill,"Cannot apply changes that need a refill");var i=this.documentSet;this.documentSet=e.documentSet,this.mutatedKeys=e.mutatedKeys;var o=e.changeSet.getChanges();o.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case zr.Added:return 1;case zr.Modified:case zr.Metadata:return 2;case zr.Removed:return 0;default:return v("Unknown ChangeType: "+e)}};return n(e)-n(t)}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e.type,t.type)||r.query.docComparator(e.doc,t.doc)})),this.applyTargetChange(n);var a=t?this.updateLimboDocuments():[],s=0===this.limboDocuments.size&&this.current?Kr.Synced:Kr.Local,u=s!==this.syncState;return this.syncState=s,0!==o.length||u?{snapshot:new Yr(this.query,e.documentSet,i,o,e.mutatedKeys,s===Kr.Local,u,!1),limboChanges:a}:{limboChanges:a}},e.prototype.applyOnlineStateChange=function(e){return this.current&&e===Mr.Offline?(this.current=!1,this.applyChanges({documentSet:this.documentSet,changeSet:new Hr,mutatedKeys:this.mutatedKeys,needsRefill:!1},!1)):{limboChanges:[]}},e.prototype.shouldBeInLimbo=function(e){return!this._syncedDocuments.has(e)&&(!!this.documentSet.has(e)&&!this.documentSet.get(e).hasLocalMutations)},e.prototype.applyTargetChange=function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t._syncedDocuments=t._syncedDocuments.add(e)})),e.modifiedDocuments.forEach((function(e){return b(t._syncedDocuments.has(e),"Modified document "+e+" not found in view.")})),e.removedDocuments.forEach((function(e){return t._syncedDocuments=t._syncedDocuments.delete(e)})),this.current=e.current)},e.prototype.updateLimboDocuments=function(){var e=this;if(!this.current)return[];var t=this.limboDocuments;this.limboDocuments=qe(),this.documentSet.forEach((function(t){e.shouldBeInLimbo(t.key)&&(e.limboDocuments=e.limboDocuments.add(t.key))}));var n=[];return t.forEach((function(t){e.limboDocuments.has(t)||n.push(new Di(t))})),this.limboDocuments.forEach((function(e){t.has(e)||n.push(new _i(e))})),n},e.prototype.synchronizeWithPersistedState=function(e){this._syncedDocuments=e.remoteKeys,this.limboDocuments=qe();var t=this.computeDocChanges(e.documents);return this.applyChanges(t,!0)},e.prototype.computeInitialSnapshot=function(){return Yr.fromInitialDocuments(this.query,this.documentSet,this.mutatedKeys,this.syncState===Kr.Local)},e}();
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ni=5,Ai=function(){function e(e,t,n,r){this.asyncQueue=e,this.remoteStore=t,this.updateFunction=n,this.deferred=r,this.retries=Ni,this.backoff=new xr(this.asyncQueue,ne.RetryTransaction)}return e.prototype.run=function(){this.runWithBackOff()},e.prototype.runWithBackOff=function(){var e=this;this.backoff.backoffAndRun((function(){return a.__awaiter(e,void 0,void 0,(function(){var e,t,n=this;return a.__generator(this,(function(r){return e=this.remoteStore.createTransaction(),(t=this.tryRunUpdateFunction(e))&&t.then((function(t){n.asyncQueue.enqueueAndForget((function(){return e.commit().then((function(){n.deferred.resolve(t)})).catch((function(e){n.handleTransactionError(e)}))}))})).catch((function(e){n.handleTransactionError(e)})),[2]}))}))}))},e.prototype.tryRunUpdateFunction=function(e){try{var t=this.updateFunction(e);return!Xn(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}},e.prototype.handleTransactionError=function(e){var t=this;this.retries>0&&this.isRetryableTransactionError(e)?(this.retries-=1,this.asyncQueue.enqueueAndForget((function(){return t.runWithBackOff(),Promise.resolve()}))):this.deferred.reject(e)},e.prototype.isRetryableTransactionError=function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!qr(t)}return!1},e}(),xi=function(e,t,n){this.query=e,this.targetId=t,this.view=n},Mi=function(e){this.key=e,this.receivedDocument=!1},Li=function(){function e(e,t,n,r){this.localStore=e,this.remoteStore=t,this.sharedClientState=n,this.currentUser=r,this.syncEngineListener=null,this.queryViewsByQuery=new Ht((function(e){return e.canonicalId()})),this.queriesByTarget={},this.limboTargetsByKey=new De(fe.comparator),this.limboResolutionsByTarget={},this.limboDocumentRefs=new yr,this.mutationUserCallbacks={},this.pendingWritesCallbacks=new Map,this.limboTargetIdGenerator=lt.forSyncEngine(),this.isPrimary=void 0,this.onlineState=Mr.Unknown}return Object.defineProperty(e.prototype,"isPrimaryClient",{get:function(){return!0===this.isPrimary},enumerable:!0,configurable:!0}),e.prototype.subscribe=function(e){b(null!==e,"SyncEngine listener cannot be null"),b(null===this.syncEngineListener,"SyncEngine already has a subscriber."),this.syncEngineListener=e},e.prototype.listen=function(e){return a.__awaiter(this,void 0,void 0,(function(){var t,n,r,i,o;return a.__generator(this,(function(a){switch(a.label){case 0:return this.assertSubscribed("listen()"),(r=this.queryViewsByQuery.get(e))?(t=r.targetId,this.sharedClientState.addLocalQueryTarget(t),n=r.view.computeInitialSnapshot(),[3,4]):[3,1];case 1:return[4,this.localStore.allocateTarget(e.toTarget())];case 2:return i=a.sent(),o=this.sharedClientState.addLocalQueryTarget(i.targetId),t=i.targetId,[4,this.initializeViewAndComputeSnapshot(e,t,"current"===o)];case 3:n=a.sent(),this.isPrimary&&this.remoteStore.listen(i),a.label=4;case 4:return this.syncEngineListener.onWatchChange([n]),[2,t]}}))}))},e.prototype.initializeViewAndComputeSnapshot=function(e,t,n){return a.__awaiter(this,void 0,void 0,(function(){var r,i,o,s,u,c;return a.__generator(this,(function(a){switch(a.label){case 0:return[4,this.localStore.executeQuery(e,!0)];case 1:return r=a.sent(),i=new ki(e,r.remoteKeys),o=i.computeDocChanges(r.documents),s=Xr.createSynthesizedTargetChangeForCurrentChange(t,n&&this.onlineState!==Mr.Offline),b(0===(u=i.applyChanges(o,!0===this.isPrimary,s)).limboChanges.length,"View returned limbo docs before target ack from the server."),b(!!u.snapshot,"applyChanges for new view should always return a snapshot"),c=new xi(e,t,i),this.queryViewsByQuery.set(e,c),this.queriesByTarget[t]||(this.queriesByTarget[t]=[]),this.queriesByTarget[t].push(e),[2,u.snapshot]}}))}))},e.prototype.synchronizeViewAndComputeSnapshot=function(e){return a.__awaiter(this,void 0,void 0,(function(){var t,n;return a.__generator(this,(function(r){switch(r.label){case 0:return[4,this.localStore.executeQuery(e.query,!0)];case 1:return t=r.sent(),n=e.view.synchronizeWithPersistedState(t),this.isPrimary&&this.updateTrackedLimbos(e.targetId,n.limboChanges),[2,n]}}))}))},e.prototype.unlisten=function(e){return a.__awaiter(this,void 0,void 0,(function(){var t,n,r=this;return a.__generator(this,(function(i){switch(i.label){case 0:return this.assertSubscribed("unlisten()"),b(!!(t=this.queryViewsByQuery.get(e)),"Trying to unlisten on query not found:"+e),(n=this.queriesByTarget[t.targetId]).length>1?(this.queriesByTarget[t.targetId]=n.filter((function(t){return!t.isEqual(e)})),this.queryViewsByQuery.delete(e),[2]):this.isPrimary?(this.sharedClientState.removeLocalQueryTarget(t.targetId),this.sharedClientState.isActiveQueryTarget(t.targetId)?[3,2]:[4,this.localStore.releaseTarget(t.targetId,!1).then((function(){r.sharedClientState.clearQueryState(t.targetId),r.remoteStore.unlisten(t.targetId),r.removeAndCleanupTarget(t.targetId)})).catch(Un)]):[3,3];case 1:i.sent(),i.label=2;case 2:return[3,5];case 3:return this.removeAndCleanupTarget(t.targetId),[4,this.localStore.releaseTarget(t.targetId,!0)];case 4:i.sent(),i.label=5;case 5:return[2]}}))}))},e.prototype.write=function(e,t){return a.__awaiter(this,void 0,void 0,(function(){var n;return a.__generator(this,(function(r){switch(r.label){case 0:return this.assertSubscribed("write()"),[4,this.localStore.localWrite(e)];case 1:return n=r.sent(),this.sharedClientState.addPendingMutation(n.batchId),this.addMutationCallback(n.batchId,t),[4,this.emitNewSnapsAndNotifyLocalStore(n.changes)];case 2:return r.sent(),[4,this.remoteStore.fillWritePipeline()];case 3:return r.sent(),[2]}}))}))},e.prototype.runTransaction=function(e,t,n){new Ai(e,this.remoteStore,t,n).run()},e.prototype.applyRemoteEvent=function(e){return a.__awaiter(this,void 0,void 0,(function(){var t,n=this;return a.__generator(this,(function(r){switch(r.label){case 0:this.assertSubscribed("applyRemoteEvent()"),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.localStore.applyRemoteEvent(e)];case 2:return t=r.sent(),k(e.targetChanges,(function(e,t){var r=n.limboResolutionsByTarget[Number(e)];r&&(b(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1,"Limbo resolution for single document contains multiple changes."),t.addedDocuments.size>0?r.receivedDocument=!0:t.modifiedDocuments.size>0?b(r.receivedDocument,"Received change for limbo target document without add."):t.removedDocuments.size>0&&(b(r.receivedDocument,"Received remove for limbo target document without add."),r.receivedDocument=!1))})),[4,this.emitNewSnapsAndNotifyLocalStore(t,e)];case 3:return r.sent(),[3,6];case 4:return[4,Un(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},e.prototype.applyOnlineStateChange=function(e,t){if(this.isPrimary&&t===Lr.RemoteStore||!this.isPrimary&&t===Lr.SharedClientState){this.assertSubscribed("applyOnlineStateChange()");var n=[];this.queryViewsByQuery.forEach((function(t,r){var i=r.view.applyOnlineStateChange(e);b(0===i.limboChanges.length,"OnlineState should not affect limbo documents."),i.snapshot&&n.push(i.snapshot)})),this.syncEngineListener.onOnlineStateChange(e),this.syncEngineListener.onWatchChange(n),this.onlineState=e,this.isPrimary&&this.sharedClientState.setOnlineState(e)}},e.prototype.rejectListen=function(e,t){return a.__awaiter(this,void 0,void 0,(function(){var n,r,i,o,s,u=this;return a.__generator(this,(function(a){switch(a.label){case 0:return this.assertSubscribed("rejectListens()"),this.sharedClientState.updateQueryState(e,"rejected",t),n=this.limboResolutionsByTarget[e],(r=n&&n.key)?(this.limboTargetsByKey=this.limboTargetsByKey.remove(r),delete this.limboResolutionsByTarget[e],i=(i=new De(fe.comparator)).insert(r,new Gt(r,_e.forDeletedDoc())),o=qe().add(r),s=new Jr(_e.MIN,{},new xe(X),i,o),[2,this.applyRemoteEvent(s)]):[3,1];case 1:return[4,this.localStore.releaseTarget(e,!1).then((function(){return u.removeAndCleanupTarget(e,t)})).catch(Un)];case 2:a.sent(),a.label=3;case 3:return[2]}}))}))},e.prototype.applyBatchState=function(e,t,n){return a.__awaiter(this,void 0,void 0,(function(){var r;return a.__generator(this,(function(i){switch(i.label){case 0:return this.assertSubscribed("applyBatchState()"),[4,this.localStore.lookupMutationDocuments(e)];case 1:return null===(r=i.sent())?(m("SyncEngine","Cannot apply mutation batch with id: "+e),[2]):"pending"!==t?[3,3]:[4,this.remoteStore.fillWritePipeline()];case 2:return i.sent(),[3,4];case 3:"acknowledged"===t||"rejected"===t?(this.processUserCallback(e,n||null),this.localStore.removeCachedMutationBatchMetadata(e)):v("Unknown batchState: "+t),i.label=4;case 4:return[4,this.emitNewSnapsAndNotifyLocalStore(r)];case 5:return i.sent(),[2]}}))}))},e.prototype.applySuccessfulWrite=function(e){return a.__awaiter(this,void 0,void 0,(function(){var t,n;return a.__generator(this,(function(r){switch(r.label){case 0:this.assertSubscribed("applySuccessfulWrite()"),t=e.batch.batchId,this.processUserCallback(t,null),this.triggerPendingWritesCallbacks(t),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.localStore.acknowledgeBatch(e)];case 2:return n=r.sent(),this.sharedClientState.updateMutationState(t,"acknowledged"),[4,this.emitNewSnapsAndNotifyLocalStore(n)];case 3:return r.sent(),[3,6];case 4:return[4,Un(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},e.prototype.rejectFailedWrite=function(e,t){return a.__awaiter(this,void 0,void 0,(function(){var n;return a.__generator(this,(function(r){switch(r.label){case 0:this.assertSubscribed("rejectFailedWrite()"),this.processUserCallback(e,t),this.triggerPendingWritesCallbacks(e),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.localStore.rejectBatch(e)];case 2:return n=r.sent(),this.sharedClientState.updateMutationState(e,"rejected",t),[4,this.emitNewSnapsAndNotifyLocalStore(n)];case 3:return r.sent(),[3,6];case 4:return[4,Un(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},e.prototype.registerPendingWritesCallback=function(e){return a.__awaiter(this,void 0,void 0,(function(){var t,n;return a.__generator(this,(function(r){switch(r.label){case 0:return this.remoteStore.canUseNetwork()||m("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),[4,this.localStore.getHighestUnacknowledgedBatchId()];case 1:return-1===(t=r.sent())?(e.resolve(),[2]):((n=this.pendingWritesCallbacks.get(t)||[]).push(e),this.pendingWritesCallbacks.set(t,n),[2])}}))}))},e.prototype.triggerPendingWritesCallbacks=function(e){(this.pendingWritesCallbacks.get(e)||[]).forEach((function(e){e.resolve()})),this.pendingWritesCallbacks.delete(e)},e.prototype.rejectOutstandingPendingWritesCallbacks=function(e){this.pendingWritesCallbacks.forEach((function(t){t.forEach((function(t){t.reject(new I(S.CANCELLED,e))}))})),this.pendingWritesCallbacks.clear()},e.prototype.addMutationCallback=function(e,t){var n=this.mutationUserCallbacks[this.currentUser.toKey()];n||(n=new De(X)),n=n.insert(e,t),this.mutationUserCallbacks[this.currentUser.toKey()]=n},e.prototype.processUserCallback=function(e,t){var n=this.mutationUserCallbacks[this.currentUser.toKey()];if(n){var r=n.get(e);r&&(b(e===n.minKey(),"Mutation callbacks processed out-of-order?"),t?r.reject(t):r.resolve(),n=n.remove(e)),this.mutationUserCallbacks[this.currentUser.toKey()]=n}},e.prototype.removeAndCleanupTarget=function(e,t){var n=this;void 0===t&&(t=null),this.sharedClientState.removeLocalQueryTarget(e),b(this.queriesByTarget[e]&&0!==this.queriesByTarget[e].length,"There are no queries mapped to target id "+e);for(var r=0,i=this.queriesByTarget[e];r<i.length;r++){var o=i[r];this.queryViewsByQuery.delete(o),t&&this.syncEngineListener.onWatchError(o,t)}if(delete this.queriesByTarget[e],this.isPrimary){var a=this.limboDocumentRefs.referencesForId(e);this.limboDocumentRefs.removeReferencesForId(e),a.forEach((function(e){n.limboDocumentRefs.containsKey(e)||n.removeLimboTarget(e)}))}},e.prototype.removeLimboTarget=function(e){var t=this.limboTargetsByKey.get(e);null!==t&&(this.remoteStore.unlisten(t),this.limboTargetsByKey=this.limboTargetsByKey.remove(e),delete this.limboResolutionsByTarget[t])},e.prototype.updateTrackedLimbos=function(e,t){for(var n=0,r=t;n<r.length;n++){var i=r[n];if(i instanceof _i)this.limboDocumentRefs.addReference(i.key,e),this.trackLimboChange(i);else if(i instanceof Di){m("SyncEngine","Document no longer in limbo: "+i.key),this.limboDocumentRefs.removeReference(i.key,e),this.limboDocumentRefs.containsKey(i.key)||this.removeLimboTarget(i.key)}else v("Unknown limbo change: "+JSON.stringify(i))}},e.prototype.trackLimboChange=function(e){var t=e.key;if(!this.limboTargetsByKey.get(t)){m("SyncEngine","New document in limbo: "+t);var n=this.limboTargetIdGenerator.next(),r=tr.atPath(t.path);this.limboResolutionsByTarget[n]=new Mi(t),this.remoteStore.listen(new kn(r.toTarget(),n,Tn.LimboResolution,ue.INVALID)),this.limboTargetsByKey=this.limboTargetsByKey.insert(t,n)}},e.prototype.currentLimboDocs=function(){return this.limboTargetsByKey},e.prototype.emitNewSnapsAndNotifyLocalStore=function(e,t){return a.__awaiter(this,void 0,void 0,(function(){var n,r,i,o=this;return a.__generator(this,(function(a){switch(a.label){case 0:return n=[],r=[],i=[],this.queryViewsByQuery.forEach((function(a,s){i.push(Promise.resolve().then((function(){var t=s.view.computeDocChanges(e);return t.needsRefill?o.localStore.executeQuery(s.query,!1).then((function(e){var n=e.documents;return s.view.computeDocChanges(n,t)})):t})).then((function(e){var i=t&&t.targetChanges[s.targetId],a=s.view.applyChanges(e,!0===o.isPrimary,i);if(o.updateTrackedLimbos(s.targetId,a.limboChanges),a.snapshot){o.isPrimary&&o.sharedClientState.updateQueryState(s.targetId,a.snapshot.fromCache?"not-current":"current"),n.push(a.snapshot);var u=Ci.fromSnapshot(s.targetId,a.snapshot);r.push(u)}})))})),[4,Promise.all(i)];case 1:return a.sent(),this.syncEngineListener.onWatchChange(n),[4,this.localStore.notifyLocalViewChanges(r)];case 2:return a.sent(),[2]}}))}))},e.prototype.assertSubscribed=function(e){b(null!==this.syncEngineListener,"Trying to call "+e+" before calling subscribe().")},e.prototype.handleCredentialChange=function(e){return a.__awaiter(this,void 0,void 0,(function(){var t,n;return a.__generator(this,(function(r){switch(r.label){case 0:return t=!this.currentUser.isEqual(e),this.currentUser=e,t?(this.rejectOutstandingPendingWritesCallbacks("'waitForPendingWrites' promise is rejected due to a user change."),[4,this.localStore.handleUserChange(e)]):[3,3];case 1:return n=r.sent(),this.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),[4,this.emitNewSnapsAndNotifyLocalStore(n.affectedDocuments)];case 2:r.sent(),r.label=3;case 3:return[4,this.remoteStore.handleCredentialChange()];case 4:return r.sent(),[2]}}))}))},e.prototype.applyPrimaryState=function(e){return a.__awaiter(this,void 0,void 0,(function(){var t,n,r,i,o,s,u,c=this;return a.__generator(this,(function(a){switch(a.label){case 0:return!0!==e||!0===this.isPrimary?[3,3]:(this.isPrimary=!0,[4,this.remoteStore.applyPrimaryState(!0)]);case 1:return a.sent(),t=this.sharedClientState.getAllActiveQueryTargets(),[4,this.synchronizeQueryViewsAndRaiseSnapshots(t.toArray())];case 2:for(n=a.sent(),r=0,i=n;r<i.length;r++)o=i[r],this.remoteStore.listen(o);return[3,7];case 3:return!1!==e||!1===this.isPrimary?[3,7]:(this.isPrimary=!1,s=[],u=Promise.resolve(),D(this.queriesByTarget,(function(e,t){c.sharedClientState.isLocalQueryTarget(e)?s.push(e):u=u.then((function(){return c.removeAndCleanupTarget(e),c.localStore.releaseTarget(e,!0)})),c.remoteStore.unlisten(e)})),[4,u]);case 4:return a.sent(),[4,this.synchronizeQueryViewsAndRaiseSnapshots(s)];case 5:return a.sent(),this.resetLimboDocuments(),[4,this.remoteStore.applyPrimaryState(!1)];case 6:a.sent(),a.label=7;case 7:return[2]}}))}))},e.prototype.resetLimboDocuments=function(){var e=this;D(this.limboResolutionsByTarget,(function(t){e.remoteStore.unlisten(t)})),this.limboDocumentRefs.removeAllReferences(),this.limboResolutionsByTarget=[],this.limboTargetsByKey=new De(fe.comparator)},e.prototype.synchronizeQueryViewsAndRaiseSnapshots=function(e){return a.__awaiter(this,void 0,void 0,(function(){var t,n,r,i,o,s,u,c,l,h,d,f,p;return a.__generator(this,(function(a){switch(a.label){case 0:t=[],n=[],r=0,i=e,a.label=1;case 1:return r<i.length?(o=i[r],s=void 0,(u=this.queriesByTarget[o])&&0!==u.length?[4,this.localStore.releaseTarget(o,!0)]:[3,8]):[3,14];case 2:return a.sent(),[4,this.localStore.allocateTarget(u[0].toTarget())];case 3:s=a.sent(),c=0,l=u,a.label=4;case 4:return c<l.length?(h=l[c],b(!!(d=this.queryViewsByQuery.get(h)),"No query view found for "+h),[4,this.synchronizeViewAndComputeSnapshot(d)]):[3,7];case 5:(f=a.sent()).snapshot&&n.push(f.snapshot),a.label=6;case 6:return c++,[3,4];case 7:return[3,12];case 8:return b(!0===this.isPrimary,"A secondary tab should never have an active target without an active query."),[4,this.localStore.getTarget(o)];case 9:return b(!!(p=a.sent()),"Target for id "+o+" not found"),[4,this.localStore.allocateTarget(p)];case 10:return s=a.sent(),[4,this.initializeViewAndComputeSnapshot(this.synthesizeTargetToQuery(p),o,!1)];case 11:a.sent(),a.label=12;case 12:t.push(s),a.label=13;case 13:return r++,[3,1];case 14:return this.syncEngineListener.onWatchChange(n),[2,t]}}))}))},e.prototype.synthesizeTargetToQuery=function(e){return new tr(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,Zn.First,e.startAt,e.endAt)},e.prototype.getActiveClients=function(){return this.localStore.getActiveClients()},e.prototype.applyTargetState=function(e,t,n){return a.__awaiter(this,void 0,void 0,(function(){var r,i;return a.__generator(this,(function(o){switch(o.label){case 0:if(this.isPrimary)return m("SyncEngine","Ignoring unexpected query state notification."),[2];if(!this.queriesByTarget[e])return[3,7];switch(t){case"current":case"not-current":return[3,1];case"rejected":return[3,4]}return[3,6];case 1:return[4,this.localStore.getNewDocumentChanges()];case 2:return r=o.sent(),i=Jr.createSynthesizedRemoteEventForCurrentChange(e,"current"===t),[4,this.emitNewSnapsAndNotifyLocalStore(r,i)];case 3:return o.sent(),[3,7];case 4:return[4,this.localStore.releaseTarget(e,!0)];case 5:return o.sent(),this.removeAndCleanupTarget(e,n),[3,7];case 6:v("Unexpected target state: "+t),o.label=7;case 7:return[2]}}))}))},e.prototype.applyActiveTargetsChange=function(e,t){return a.__awaiter(this,void 0,void 0,(function(){var n,r,i,o,s,u,c,l,h,d=this;return a.__generator(this,(function(f){switch(f.label){case 0:if(!this.isPrimary)return[2];n=0,r=e,f.label=1;case 1:return n<r.length?(h=r[n],b(!this.queriesByTarget[h],"Trying to add an already active target"),[4,this.localStore.getTarget(h)]):[3,6];case 2:return b(!!(i=f.sent()),"Query data for active target "+h+" not found"),[4,this.localStore.allocateTarget(i)];case 3:return o=f.sent(),[4,this.initializeViewAndComputeSnapshot(this.synthesizeTargetToQuery(i),o.targetId,!1)];case 4:f.sent(),this.remoteStore.listen(o),f.label=5;case 5:return n++,[3,1];case 6:s=function(e){return a.__generator(this,(function(t){switch(t.label){case 0:return u.queriesByTarget[e]?[4,u.localStore.releaseTarget(e,!1).then((function(){d.remoteStore.unlisten(e),d.removeAndCleanupTarget(e)})).catch(Un)]:[2,"continue"];case 1:return t.sent(),[2]}}))},u=this,c=0,l=t,f.label=7;case 7:return c<l.length?(h=l[c],[5,s(h)]):[3,10];case 8:f.sent(),f.label=9;case 9:return c++,[3,7];case 10:return[2]}}))}))},e.prototype.enableNetwork=function(){return this.localStore.setNetworkEnabled(!0),this.remoteStore.enableNetwork()},e.prototype.disableNetwork=function(){return this.localStore.setNetworkEnabled(!1),this.remoteStore.disableNetwork()},e.prototype.getRemoteKeysForTarget=function(e){var t=this.limboResolutionsByTarget[e];if(t&&t.receivedDocument)return qe().add(t.key);var n=qe(),r=this.queriesByTarget[e];if(!r)return n;for(var i=0,o=r;i<o.length;i++){var a=o[i],s=this.queryViewsByQuery.get(a);b(!!s,"No query view found for "+a),n=n.unionWith(s.view.syncedDocuments)}return n},e}(),Pi=function(){function e(e){this.uid=e}return e.prototype.isAuthenticated=function(){return null!=this.uid},e.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},e.prototype.isEqual=function(e){return e.uid===this.uid},e.UNAUTHENTICATED=new e(null),e.GOOGLE_CREDENTIALS=new e("google-credentials-uid"),e.FIRST_PARTY=new e("first-party-uid"),e}(),Oi="firestore_clients";function Ri(e,t){return b(-1===t.indexOf("_"),"Client key cannot contain '_', but was '"+t+"'"),Oi+"_"+e+"_"+t}var ji="firestore_mutations";function Bi(e,t,n){var r=ji+"_"+e+"_"+n;return t.isAuthenticated()&&(r+="_"+t.uid),r}var Fi="firestore_targets";function Vi(e,t){return Fi+"_"+e+"_"+t}var qi="firestore_online_state";var Ui="firestore_sequence_number";
/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Wi="SharedClientState",zi=function(){function e(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r,b(void 0!==r==("rejected"===n),"MutationMetadata must contain an error iff state is 'rejected'")}return e.fromWebStorageEntry=function(t,n,r){var i=JSON.parse(r),o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error),a=void 0;return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(a=new I(i.error.code,i.error.message)),o?new e(t,n,i.state,a):(g(Wi,"Failed to parse mutation state for ID '"+n+"': "+r),null)},e.prototype.toWebStorageJSON=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},e}(),Ki=function(){function e(e,t,n){this.targetId=e,this.state=t,this.error=n,b(void 0!==n==("rejected"===t),"QueryTargetMetadata must contain an error iff state is 'rejected'")}return e.fromWebStorageEntry=function(t,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new I(r.error.code,r.error.message)),i?new e(t,r.state,o):(g(Wi,"Failed to parse target state for ID '"+t+"': "+n),null)},e.prototype.toWebStorageJSON=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},e}(),Gi=function(){function e(e,t){this.clientId=e,this.activeTargetIds=t}return e.fromWebStorageEntry=function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=We(),a=0;i&&a<r.activeTargetIds.length;++a)i=$n(r.activeTargetIds[a]),o=o.add(r.activeTargetIds[a]);return i?new e(t,o):(g(Wi,"Failed to parse client data for instance '"+t+"': "+n),null)},e}(),Qi=function(){function e(e,t){this.clientId=e,this.onlineState=t}return e.fromWebStorageEntry=function(t){var n=JSON.parse(t);return"object"==typeof n&&n.onlineState in Mr&&"string"==typeof n.clientId?new e(n.clientId,Mr[n.onlineState]):(g(Wi,"Failed to parse online state: "+t),null)},e}(),Hi=function(){function e(){this.activeTargetIds=We()}return e.prototype.addQueryTarget=function(e){this.activeTargetIds=this.activeTargetIds.add(e)},e.prototype.removeQueryTarget=function(e){this.activeTargetIds=this.activeTargetIds.delete(e)},e.prototype.toWebStorageJSON=function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)},e}(),Yi=function(){function e(t,n,r,i,o){if(this.queue=t,this.platform=n,this.persistenceKey=r,this.localClientId=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.activeClients={},this.storageListener=this.handleWebStorageEvent.bind(this),this.started=!1,this.earlyEvents=[],!e.isAvailable(this.platform))throw new I(S.UNIMPLEMENTED,"LocalStorage is not available on this platform.");var a=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.platform.window.localStorage,this.currentUser=o,this.localClientStorageKey=Ri(this.persistenceKey,this.localClientId),this.sequenceNumberKey=function(e){return Ui+"_"+e}(this.persistenceKey),this.activeClients[this.localClientId]=new Hi,this.clientStateKeyRe=new RegExp("^"+Oi+"_"+a+"_([^_]*)$"),this.mutationBatchKeyRe=new RegExp("^"+ji+"_"+a+"_(\\d+)(?:_(.*))?$"),this.queryTargetKeyRe=new RegExp("^"+Fi+"_"+a+"_(\\d+)$"),this.onlineStateKey=function(e){return qi+"_"+e}(this.persistenceKey),this.platform.window.addEventListener("storage",this.storageListener)}return e.isAvailable=function(e){return!(!e.window||null==e.window.localStorage)},e.prototype.start=function(){return a.__awaiter(this,void 0,void 0,(function(){var e,t,n,r,i,o,s,u,c,l,h,d=this;return a.__generator(this,(function(a){switch(a.label){case 0:return b(!this.started,"WebStorageSharedClientState already started"),b(null!==this.syncEngine,"syncEngine property must be set before calling start()"),b(null!==this.onlineStateHandler,"onlineStateHandler property must be set before calling start()"),[4,this.syncEngine.getActiveClients()];case 1:for(e=a.sent(),t=0,n=e;t<n.length;t++)(r=n[t])!==this.localClientId&&(i=this.getItem(Ri(this.persistenceKey,r)))&&(o=Gi.fromWebStorageEntry(r,i))&&(this.activeClients[o.clientId]=o);for(this.persistClientState(),(s=this.storage.getItem(this.onlineStateKey))&&(u=this.fromWebStorageOnlineState(s))&&this.handleOnlineStateEvent(u),c=0,l=this.earlyEvents;c<l.length;c++)h=l[c],this.handleWebStorageEvent(h);return this.earlyEvents=[],this.platform.window.addEventListener("unload",(function(){return d.shutdown()})),this.started=!0,[2]}}))}))},e.prototype.writeSequenceNumber=function(e){this.setItem(this.sequenceNumberKey,JSON.stringify(e))},e.prototype.getAllActiveQueryTargets=function(){var e=We();return k(this.activeClients,(function(t,n){e=e.unionWith(n.activeTargetIds)})),e},e.prototype.isActiveQueryTarget=function(e){for(var t in this.activeClients)if(this.activeClients.hasOwnProperty(t)&&this.activeClients[t].activeTargetIds.has(e))return!0;return!1},e.prototype.addPendingMutation=function(e){this.persistMutationState(e,"pending")},e.prototype.updateMutationState=function(e,t,n){this.persistMutationState(e,t,n),this.removeMutationState(e)},e.prototype.addLocalQueryTarget=function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(Vi(this.persistenceKey,e));if(n){var r=Ki.fromWebStorageEntry(e,n);r&&(t=r.state)}}return this.localClientState.addQueryTarget(e),this.persistClientState(),t},e.prototype.removeLocalQueryTarget=function(e){this.localClientState.removeQueryTarget(e),this.persistClientState()},e.prototype.isLocalQueryTarget=function(e){return this.localClientState.activeTargetIds.has(e)},e.prototype.clearQueryState=function(e){this.removeItem(Vi(this.persistenceKey,e))},e.prototype.updateQueryState=function(e,t,n){this.persistQueryTargetState(e,t,n)},e.prototype.handleUserChange=function(e,t,n){var r=this;t.forEach((function(e){r.removeMutationState(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))},e.prototype.setOnlineState=function(e){this.persistOnlineState(e)},e.prototype.shutdown=function(){this.started&&(this.platform.window.removeEventListener("storage",this.storageListener),this.removeItem(this.localClientStorageKey),this.started=!1)},e.prototype.getItem=function(e){var t=this.storage.getItem(e);return m(Wi,"READ",e,t),t},e.prototype.setItem=function(e,t){m(Wi,"SET",e,t),this.storage.setItem(e,t)},e.prototype.removeItem=function(e){m(Wi,"REMOVE",e),this.storage.removeItem(e)},e.prototype.handleWebStorageEvent=function(e){var t=this;if(e.storageArea===this.storage){if(m(Wi,"EVENT",e.key,e.newValue),e.key===this.localClientStorageKey)return void g("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.queue.enqueueAndForget((function(){return a.__awaiter(t,void 0,void 0,(function(){var t,n,r,i,o,s;return a.__generator(this,(function(a){if(!this.started)return this.earlyEvents.push(e),[2];if(null===e.key)return[2];if(this.clientStateKeyRe.test(e.key)){if(null==e.newValue)return n=this.fromWebStorageClientStateKey(e.key),[2,this.handleClientStateEvent(n,null)];if(t=this.fromWebStorageClientState(e.key,e.newValue))return[2,this.handleClientStateEvent(t.clientId,t)]}else if(this.mutationBatchKeyRe.test(e.key)){if(null!==e.newValue&&(r=this.fromWebStorageMutationMetadata(e.key,e.newValue)))return[2,this.handleMutationBatchEvent(r)]}else if(this.queryTargetKeyRe.test(e.key)){if(null!==e.newValue&&(i=this.fromWebStorageQueryTargetMetadata(e.key,e.newValue)))return[2,this.handleQueryTargetEvent(i)]}else if(e.key===this.onlineStateKey){if(null!==e.newValue&&(o=this.fromWebStorageOnlineState(e.newValue)))return[2,this.handleOnlineStateEvent(o)]}else e.key===this.sequenceNumberKey&&(b(!!this.sequenceNumberHandler,"Missing sequenceNumberHandler"),(s=function(e){var t=ue.INVALID;if(null!=e)try{var n=JSON.parse(e);b("number"==typeof n,"Found non-numeric sequence number"),t=n}catch(e){g(Wi,"Failed to read sequence number from WebStorage",e)}return t}(e.newValue))!==ue.INVALID&&this.sequenceNumberHandler(s));return[2]}))}))}))}},Object.defineProperty(e.prototype,"localClientState",{get:function(){return this.activeClients[this.localClientId]},enumerable:!0,configurable:!0}),e.prototype.persistClientState=function(){this.setItem(this.localClientStorageKey,this.localClientState.toWebStorageJSON())},e.prototype.persistMutationState=function(e,t,n){var r=new zi(this.currentUser,e,t,n),i=Bi(this.persistenceKey,this.currentUser,e);this.setItem(i,r.toWebStorageJSON())},e.prototype.removeMutationState=function(e){var t=Bi(this.persistenceKey,this.currentUser,e);this.removeItem(t)},e.prototype.persistOnlineState=function(e){var t={clientId:this.localClientId,onlineState:Mr[e]};this.storage.setItem(this.onlineStateKey,JSON.stringify(t))},e.prototype.persistQueryTargetState=function(e,t,n){var r=Vi(this.persistenceKey,e),i=new Ki(e,t,n);this.setItem(r,i.toWebStorageJSON())},e.prototype.fromWebStorageClientStateKey=function(e){var t=this.clientStateKeyRe.exec(e);return t?t[1]:null},e.prototype.fromWebStorageClientState=function(e,t){var n=this.fromWebStorageClientStateKey(e);return b(null!==n,"Cannot parse client state key '"+e+"'"),Gi.fromWebStorageEntry(n,t)},e.prototype.fromWebStorageMutationMetadata=function(e,t){var n=this.mutationBatchKeyRe.exec(e);b(null!==n,"Cannot parse mutation batch key '"+e+"'");var r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return zi.fromWebStorageEntry(new Pi(i),r,t)},e.prototype.fromWebStorageQueryTargetMetadata=function(e,t){var n=this.queryTargetKeyRe.exec(e);b(null!==n,"Cannot parse query target key '"+e+"'");var r=Number(n[1]);return Ki.fromWebStorageEntry(r,t)},e.prototype.fromWebStorageOnlineState=function(e){return Qi.fromWebStorageEntry(e)},e.prototype.handleMutationBatchEvent=function(e){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(t){return e.user.uid!==this.currentUser.uid?(m(Wi,"Ignoring mutation for non-active user "+e.user.uid),[2]):[2,this.syncEngine.applyBatchState(e.batchId,e.state,e.error)]}))}))},e.prototype.handleQueryTargetEvent=function(e){return this.syncEngine.applyTargetState(e.targetId,e.state,e.error)},e.prototype.handleClientStateEvent=function(e,t){var n=this,r=this.getAllActiveQueryTargets();t?this.activeClients[e]=t:delete this.activeClients[e];var i=this.getAllActiveQueryTargets(),o=[],s=[];return i.forEach((function(e){return a.__awaiter(n,void 0,void 0,(function(){return a.__generator(this,(function(t){return r.has(e)||o.push(e),[2]}))}))})),r.forEach((function(e){return a.__awaiter(n,void 0,void 0,(function(){return a.__generator(this,(function(t){return i.has(e)||s.push(e),[2]}))}))})),this.syncEngine.applyActiveTargetsChange(o,s)},e.prototype.handleOnlineStateEvent=function(e){this.activeClients[e.clientId]&&this.onlineStateHandler(e.onlineState)},e}();var Ji=function(){function e(){this.localState=new Hi,this.queryState={},this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null}return e.prototype.addPendingMutation=function(e){},e.prototype.updateMutationState=function(e,t,n){},e.prototype.addLocalQueryTarget=function(e){return this.localState.addQueryTarget(e),this.queryState[e]||"not-current"},e.prototype.updateQueryState=function(e,t,n){this.queryState[e]=t},e.prototype.removeLocalQueryTarget=function(e){this.localState.removeQueryTarget(e)},e.prototype.isLocalQueryTarget=function(e){return this.localState.activeTargetIds.has(e)},e.prototype.clearQueryState=function(e){delete this.queryState[e]},e.prototype.getAllActiveQueryTargets=function(){return this.localState.activeTargetIds},e.prototype.isActiveQueryTarget=function(e){return this.localState.activeTargetIds.has(e)},e.prototype.start=function(){return this.localState=new Hi,Promise.resolve()},e.prototype.handleUserChange=function(e,t,n){},e.prototype.setOnlineState=function(e){},e.prototype.shutdown=function(){},e.prototype.writeSequenceNumber=function(e){},e}(),Xi=function(){function e(e,t){this.cacheSizeBytes=e,this.synchronizeTabs=t}return e.prototype.lruParams=function(){return Ln.withCacheSize(this.cacheSizeBytes)},e}(),$i=function(){},Zi=function(){function e(e,t,n,r){this.platform=e,this.databaseInfo=t,this.credentials=n,this.asyncQueue=r,this.clientId=J.newId()}return e.prototype.start=function(e){var t=this;this.verifyNotTerminated();var n=new pe,r=new pe,i=!1;return this.credentials.setChangeListener((function(o){i?t.asyncQueue.enqueueAndForget((function(){return t.handleCredentialChange(o)})):(i=!0,t.initializePersistence(e,r,o).then((function(e){return t.initializeRest(o,e)})).then(n.resolve,n.reject))})),this.asyncQueue.enqueueAndForget((function(){return n.promise})),r.promise},e.prototype.enableNetwork=function(){var e=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue((function(){return e.syncEngine.enableNetwork()}))},e.prototype.initializePersistence=function(e,t,n){var r=this;return e instanceof Xi?this.startIndexedDbPersistence(n,e).then((function(e){return t.resolve(),e})).catch((function(e){if(t.reject(e),!r.canFallback(e))throw e;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+e),r.startMemoryPersistence()})):(t.resolve(),this.startMemoryPersistence())},e.prototype.canFallback=function(e){return e instanceof I?e.code===S.FAILED_PRECONDITION||e.code===S.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)},e.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new I(S.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.startIndexedDbPersistence=function(e,t){var n=this,r=qn.buildStoragePrefix(this.databaseInfo),i=new Ti(this.databaseInfo.databaseId,{useProto3Json:!0});return Promise.resolve().then((function(){return a.__awaiter(n,void 0,void 0,(function(){var n,o;return a.__generator(this,(function(a){switch(a.label){case 0:if(t.synchronizeTabs&&!Yi.isAvailable(this.platform))throw new I(S.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");return n=t.lruParams(),this.sharedClientState=t.synchronizeTabs?new Yi(this.asyncQueue,this.platform,r,this.clientId,e):new Ji,[4,qn.createIndexedDbPersistence({allowTabSynchronization:t.synchronizeTabs,persistenceKey:r,clientId:this.clientId,platform:this.platform,queue:this.asyncQueue,serializer:i,lruParams:n,sequenceNumberSyncer:this.sharedClientState})];case 1:return o=a.sent(),this.persistence=o,[2,o.referenceDelegate.garbageCollector]}}))}))}))},e.prototype.startMemoryPersistence=function(){return this.persistence=Er.createEagerPersistence(this.clientId),this.sharedClientState=new Ji,Promise.resolve(null)},e.prototype.initializeRest=function(e,t){var n=this;return m("FirestoreClient","Initializing. user=",e.uid),this.platform.loadConnection(this.databaseInfo).then((function(r){return a.__awaiter(n,void 0,void 0,(function(){var n,i,o,s,u,c,l=this;return a.__generator(this,(function(h){switch(h.label){case 0:return n=new mr,this.localStore=new br(this.persistence,n,e),[4,this.localStore.start()];case 1:return h.sent(),t&&(this.lruScheduler=new Pn(t,this.asyncQueue,this.localStore)),i=this.platform.newConnectivityMonitor(),o=this.platform.newSerializer(this.databaseInfo.databaseId),s=new jr(this.asyncQueue,r,this.credentials,o),u=function(e){return l.syncEngine.applyOnlineStateChange(e,Lr.RemoteStore)},c=function(e){return l.syncEngine.applyOnlineStateChange(e,Lr.SharedClientState)},this.remoteStore=new ai(this.localStore,s,this.asyncQueue,u,i),this.syncEngine=new Li(this.localStore,this.remoteStore,this.sharedClientState,e),this.sharedClientState.onlineStateHandler=c,this.remoteStore.syncEngine=this.syncEngine,this.sharedClientState.syncEngine=this.syncEngine,this.eventMgr=new Ii(this.syncEngine),[4,this.sharedClientState.start()];case 2:return h.sent(),[4,this.remoteStore.start()];case 3:return h.sent(),[4,this.persistence.setPrimaryStateListener((function(e){return a.__awaiter(l,void 0,void 0,(function(){return a.__generator(this,(function(t){switch(t.label){case 0:return[4,this.syncEngine.applyPrimaryState(e)];case 1:return t.sent(),this.lruScheduler&&(e&&!this.lruScheduler.started?this.lruScheduler.start():e||this.lruScheduler.stop()),[2]}}))}))}))];case 4:return h.sent(),[4,this.persistence.setDatabaseDeletedListener((function(){return a.__awaiter(l,void 0,void 0,(function(){return a.__generator(this,(function(e){switch(e.label){case 0:return[4,this.terminate()];case 1:return e.sent(),[2]}}))}))}))];case 5:return h.sent(),[2]}}))}))}))},e.prototype.handleCredentialChange=function(e){return this.asyncQueue.verifyOperationInProgress(),m("FirestoreClient","Credential Changed. Current user: "+e.uid),this.syncEngine.handleCredentialChange(e)},e.prototype.disableNetwork=function(){var e=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue((function(){return e.syncEngine.disableNetwork()}))},e.prototype.terminate=function(){var e=this;return this.asyncQueue.enqueueAndInitiateShutdown((function(){return a.__awaiter(e,void 0,void 0,(function(){return a.__generator(this,(function(e){switch(e.label){case 0:return this.lruScheduler&&this.lruScheduler.stop(),[4,this.remoteStore.shutdown()];case 1:return e.sent(),[4,this.sharedClientState.shutdown()];case 2:return e.sent(),[4,this.persistence.shutdown()];case 3:return e.sent(),this.credentials.removeChangeListener(),[2]}}))}))}))},e.prototype.waitForPendingWrites=function(){var e=this;this.verifyNotTerminated();var t=new pe;return this.asyncQueue.enqueueAndForget((function(){return e.syncEngine.registerPendingWritesCallback(t)})),t.promise},e.prototype.listen=function(e,t,n){var r=this;this.verifyNotTerminated();var i=new Ei(e,t,n);return this.asyncQueue.enqueueAndForget((function(){return r.eventMgr.listen(i)})),i},e.prototype.unlisten=function(e){var t=this;this.clientTerminated||this.asyncQueue.enqueueAndForget((function(){return t.eventMgr.unlisten(e)}))},e.prototype.getDocumentFromLocalCache=function(e){var t=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue((function(){return t.localStore.readDocument(e)})).then((function(e){if(e instanceof Kt)return e;if(e instanceof Gt)return null;throw new I(S.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")}))},e.prototype.getDocumentsFromLocalCache=function(e){var t=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue((function(){return a.__awaiter(t,void 0,void 0,(function(){var t,n,r;return a.__generator(this,(function(i){switch(i.label){case 0:return[4,this.localStore.executeQuery(e,!0)];case 1:return t=i.sent(),n=new ki(e,t.remoteKeys),r=n.computeDocChanges(t.documents),[2,n.applyChanges(r,!1).snapshot]}}))}))}))},e.prototype.write=function(e){var t=this;this.verifyNotTerminated();var n=new pe;return this.asyncQueue.enqueueAndForget((function(){return t.syncEngine.write(e,n)})),n.promise},e.prototype.databaseId=function(){return this.databaseInfo.databaseId},e.prototype.addSnapshotsInSyncListener=function(e){var t=this;this.verifyNotTerminated(),this.asyncQueue.enqueueAndForget((function(){return t.eventMgr.addSnapshotsInSyncListener(e),Promise.resolve()}))},e.prototype.removeSnapshotsInSyncListener=function(e){this.clientTerminated||this.eventMgr.removeSnapshotsInSyncListener(e)},Object.defineProperty(e.prototype,"clientTerminated",{get:function(){return this.asyncQueue.isShuttingDown},enumerable:!0,configurable:!0}),e.prototype.transaction=function(e){var t=this;this.verifyNotTerminated();var n=new pe;return this.asyncQueue.enqueueAndForget((function(){return t.syncEngine.runTransaction(t.asyncQueue,e,n),Promise.resolve()})),n.promise},e}(),eo=function(){function e(e){this.observer=e,this.muted=!1}return e.prototype.next=function(e){this.scheduleEvent(this.observer.next,e)},e.prototype.error=function(e){this.scheduleEvent(this.observer.error,e)},e.prototype.mute=function(){this.muted=!0},e.prototype.scheduleEvent=function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)},e}(),to=function(){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];!function(e,t,n,r){if(!(t instanceof Array)||t.length<r)throw new I(S.INVALID_ARGUMENT,"Function "+e+"() requires its "+n+" argument to be an array with at least "+Y(r,"element")+".")}("FieldPath",e,"fieldNames",1);for(var n=0;n<e.length;++n)if(P("FieldPath","string",n,e[n]),0===e[n].length)throw new I(S.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new de(e)}return e.documentId=function(){return e._DOCUMENT_ID},e.prototype.isEqual=function(t){if(!(t instanceof e))throw G("isEqual","FieldPath",1,t);return this._internalPath.isEqual(t._internalPath)},e._DOCUMENT_ID=new e(de.keyField().canonicalString()),e}(),no=new RegExp("[~\\*/\\[\\]]");
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ro=function(e,t){this.user=t,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+e},io=function(){function e(){this.changeListener=null}return e.prototype.getToken=function(){return Promise.resolve(null)},e.prototype.invalidateToken=function(){},e.prototype.setChangeListener=function(e){b(!this.changeListener,"Can only call setChangeListener() once."),this.changeListener=e,e(Pi.UNAUTHENTICATED)},e.prototype.removeChangeListener=function(){b(null!==this.changeListener,"removeChangeListener() when no listener registered"),this.changeListener=null},e}(),oo=function(){function e(e){var t=this;this.tokenListener=null,this.currentUser=Pi.UNAUTHENTICATED,this.receivedInitialUser=!1,this.tokenCounter=0,this.changeListener=null,this.forceRefresh=!1,this.tokenListener=function(){t.tokenCounter++,t.currentUser=t.getUser(),t.receivedInitialUser=!0,t.changeListener&&t.changeListener(t.currentUser)},this.tokenCounter=0,this.auth=e.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.tokenListener):(this.tokenListener(null),e.get().then((function(e){t.auth=e,t.tokenListener&&t.auth.addAuthTokenListener(t.tokenListener)}),(function(){})))}return e.prototype.getToken=function(){var e=this;b(null!=this.tokenListener,"getToken cannot be called after listener removed.");var t=this.tokenCounter,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){if(e.tokenCounter!==t)throw new I(S.ABORTED,"getToken aborted due to token change.");return n?(b("string"==typeof n.accessToken,"Invalid tokenData returned from getToken():"+n),new ro(n.accessToken,e.currentUser)):null})):Promise.resolve(null)},e.prototype.invalidateToken=function(){this.forceRefresh=!0},e.prototype.setChangeListener=function(e){b(!this.changeListener,"Can only call setChangeListener() once."),this.changeListener=e,this.receivedInitialUser&&e(this.currentUser)},e.prototype.removeChangeListener=function(){b(null!=this.tokenListener,"removeChangeListener() called twice"),b(null!==this.changeListener,"removeChangeListener() called when no listener registered"),this.auth&&this.auth.removeAuthTokenListener(this.tokenListener),this.tokenListener=null,this.changeListener=null},e.prototype.getUser=function(){var e=this.auth&&this.auth.getUid();return b(null===e||"string"==typeof e,"Received invalid UID: "+e),new Pi(e)},e}(),ao=function(){function e(e,t){this.gapi=e,this.sessionIndex=t,this.type="FirstParty",this.user=Pi.FIRST_PARTY}return Object.defineProperty(e.prototype,"authHeaders",{get:function(){var e={"X-Goog-AuthUser":this.sessionIndex},t=this.gapi.auth.getAuthHeaderValueForFirstParty([]);return t&&(e.Authorization=t),e},enumerable:!0,configurable:!0}),e}(),so=function(){function e(e,t){this.gapi=e,this.sessionIndex=t}return e.prototype.getToken=function(){return Promise.resolve(new ao(this.gapi,this.sessionIndex))},e.prototype.setChangeListener=function(e){e(Pi.FIRST_PARTY)},e.prototype.removeChangeListener=function(){},e.prototype.invalidateToken=function(){},e}();function uo(e){if(!e)return new io;switch(e.type){case"gapi":var t=e.client;return b(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty),"unexpected gapi interface"),new so(t,e.sessionIndex||"0");case"provider":return e.client;default:throw new I(S.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function co(e){return function(e,t){if("object"!=typeof e||null===e)return!1;for(var n=e,r=0,i=t;r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e,["next","error","complete"])}var lo,ho=function(){function e(e){this._methodName=e}return e.delete=function(){return A("FieldValue.delete",arguments),fo.instance},e.serverTimestamp=function(){return A("FieldValue.serverTimestamp",arguments),po.instance},e.arrayUnion=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return M("FieldValue.arrayUnion",arguments,1),new mo(e)},e.arrayRemove=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return M("FieldValue.arrayRemove",arguments,1),new go(e)},e.increment=function(e){return P("FieldValue.increment","number",1,e),x("FieldValue.increment",arguments,1),new yo(e)},e.prototype.isEqual=function(e){return this===e},e}(),fo=function(e){function t(){return e.call(this,"FieldValue.delete")||this}return a.__extends(t,e),t.instance=new t,t}(ho),po=function(e){function t(){return e.call(this,"FieldValue.serverTimestamp")||this}return a.__extends(t,e),t.instance=new t,t}(ho),mo=function(e){function t(t){var n=e.call(this,"FieldValue.arrayUnion")||this;return n._elements=t,n}return a.__extends(t,e),t}(ho),go=function(e){function t(t){var n=e.call(this,"FieldValue.arrayRemove")||this;return n._elements=t,n}return a.__extends(t,e),t}(ho),yo=function(e){function t(t){var n=e.call(this,"FieldValue.increment")||this;return n._operand=t,n}return a.__extends(t,e),t}(ho),vo=E(ho,"Use FieldValue.<field>() instead."),bo=/^__.*__$/,wo=function(){function e(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}return e.prototype.toMutations=function(e,t){var n=[];return null!==this.fieldMask?n.push(new Ct(e,this.data,this.fieldMask,t)):n.push(new Et(e,this.data,t)),this.fieldTransforms.length>0&&n.push(new _t(e,this.fieldTransforms)),n},e}(),To=function(){function e(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}return e.prototype.toMutations=function(e,t){var n=[new Ct(e,this.data,this.fieldMask,t)];return this.fieldTransforms.length>0&&n.push(new _t(e,this.fieldTransforms)),n},e}();function So(e){switch(e){case lo.Set:case lo.MergeSet:case lo.Update:return!0;case lo.Argument:case lo.ArrayArgument:return!1;default:throw v("Unexpected case for UserDataSource: "+e)}}!function(e){e[e.Set=0]="Set",e[e.Update=1]="Update",e[e.MergeSet=2]="MergeSet",e[e.Argument=3]="Argument",e[e.ArrayArgument=4]="ArrayArgument"}(lo||(lo={}));var Io=function(){function e(e,t,n,r,i,o){this.dataSource=e,this.methodName=t,this.path=n,this.arrayElement=r,void 0===i&&this.validatePath(),this.arrayElement=void 0!==r&&r,this.fieldTransforms=i||[],this.fieldMask=o||[]}return e.prototype.childContextForField=function(t){var n=null==this.path?null:this.path.child(t),r=new e(this.dataSource,this.methodName,n,!1,this.fieldTransforms,this.fieldMask);return r.validatePathSegment(t),r},e.prototype.childContextForFieldPath=function(t){var n=null==this.path?null:this.path.child(t),r=new e(this.dataSource,this.methodName,n,!1,this.fieldTransforms,this.fieldMask);return r.validatePath(),r},e.prototype.childContextForArray=function(t){return new e(this.dataSource,this.methodName,null,!0,this.fieldTransforms,this.fieldMask)},e.prototype.createError=function(e){var t=null===this.path||this.path.isEmpty()?"":" (found in field "+this.path.toString()+")";return new I(S.INVALID_ARGUMENT,"Function "+this.methodName+"() called with invalid data. "+e+t)},e.prototype.contains=function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))},e.prototype.validatePath=function(){if(null!==this.path)for(var e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))},e.prototype.validatePathSegment=function(e){if(0===e.length)throw this.createError("Document fields must not be empty");if(So(this.dataSource)&&bo.test(e))throw this.createError('Document fields cannot begin and end with "__"')},e}(),Eo=function(e,t){this.databaseId=e,this.key=t},Co=function(){function e(e){this.preConverter=e}return e.prototype.parseSetData=function(e,t){var n=new Io(lo.Set,e,de.EMPTY_PATH);Do("Data must be an object, but it was:",n,t);var r=this.parseData(t,n);return new wo(r,null,n.fieldTransforms)},e.prototype.parseMergeData=function(e,t,n){var r=new Io(lo.MergeSet,e,de.EMPTY_PATH);Do("Data must be an object, but it was:",r,t);var i,o,a=this.parseData(t,r);if(n){for(var s=new xe(de.comparator),u=0,c=n;u<c.length;u++){var l=c[u],h=void 0;if(l instanceof to)h=l._internalPath;else{if("string"!=typeof l)throw v("Expected stringOrFieldPath to be a string or a FieldPath");h=No(e,l)}if(!r.contains(h))throw new I(S.INVALID_ARGUMENT,"Field '"+h+"' is specified in your field mask but missing from your input data.");s=s.add(h)}i=yt.fromSet(s),o=r.fieldTransforms.filter((function(e){return i.covers(e.field)}))}else i=yt.fromArray(r.fieldMask),o=r.fieldTransforms;return new wo(a,i,o)},e.prototype.parseUpdateData=function(e,t){var n=this,r=new Io(lo.Update,e,de.EMPTY_PATH);Do("Data must be an object, but it was:",r,t);var i=new xe(de.comparator),o=Ut.EMPTY;k(t,(function(t,a){var s=No(e,t),u=r.childContextForFieldPath(s);if((a=n.runPreConverter(a,u))instanceof fo)i=i.add(s);else{var c=n.parseData(a,u);null!=c&&(i=i.add(s),o=o.set(s,c))}}));var a=yt.fromSet(i);return new To(o,a,r.fieldTransforms)},e.prototype.parseUpdateVarargs=function(e,t,n,r){var i=new Io(lo.Update,e,de.EMPTY_PATH),o=[ko(e,t)],a=[n];if(r.length%2!=0)throw new I(S.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var s=0;s<r.length;s+=2)o.push(ko(e,r[s])),a.push(r[s+1]);var u=new xe(de.comparator),c=Ut.EMPTY;for(s=0;s<o.length;++s){var l=o[s],h=i.childContextForFieldPath(l),d=this.runPreConverter(a[s],h);if(d instanceof fo)u=u.add(l);else{var f=this.parseData(d,h);null!=f&&(u=u.add(l),c=c.set(l,f))}}var p=yt.fromSet(u);return new To(c,p,i.fieldTransforms)},e.prototype.parseQueryValue=function(e,t,n){void 0===n&&(n=!1);var r=new Io(n?lo.ArrayArgument:lo.Argument,e,de.EMPTY_PATH),i=this.parseData(t,r);return b(null!=i,"Parsed data should not be null."),b(0===r.fieldTransforms.length,"Field transforms should have been disallowed."),i},e.prototype.runPreConverter=function(e,t){try{return this.preConverter(e)}catch(e){var n=Ao(e);throw t.createError(n)}},e.prototype.parseData=function(e,t){if(_o(e=this.runPreConverter(e,t)))return Do("Unsupported field value:",t,e),this.parseObject(e,t);if(e instanceof ho)return this.parseSentinelFieldValue(e,t),null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.arrayElement&&t.dataSource!==lo.ArrayArgument)throw t.createError("Nested arrays are not supported");return this.parseArray(e,t)}return this.parseScalarValue(e,t)},e.prototype.parseObject=function(e,t){var n=this,r=new De(X);return N(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):k(e,(function(e,i){var o=n.parseData(i,t.childContextForField(e));null!=o&&(r=r.insert(e,o))})),new Ut(r)},e.prototype.parseArray=function(e,t){for(var n=[],r=0,i=0,o=e;i<o.length;i++){var a=o[i],s=this.parseData(a,t.childContextForArray(r));null==s&&(s=At.INSTANCE),n.push(s),r++}return new Wt(n)},e.prototype.parseSentinelFieldValue=function(e,t){if(!So(t.dataSource))throw t.createError(e._methodName+"() can only be used with update() and set()");if(null===t.path)throw t.createError(e._methodName+"() is not currently supported inside arrays");if(e instanceof fo){if(t.dataSource!==lo.MergeSet)throw t.dataSource===lo.Update?(b(t.path.length>0,"FieldValue.delete() at the top level should have already been handled."),t.createError("FieldValue.delete() can only appear at the top level of your update data")):t.createError("FieldValue.delete() cannot be used with set() unless you pass {merge:true}");t.fieldMask.push(t.path)}else if(e instanceof po)t.fieldTransforms.push(new vt(t.path,ui.instance));else if(e instanceof mo){var n=this.parseArrayTransformElements(e._methodName,e._elements),r=new ci(n);t.fieldTransforms.push(new vt(t.path,r))}else if(e instanceof go){n=this.parseArrayTransformElements(e._methodName,e._elements);var i=new li(n);t.fieldTransforms.push(new vt(t.path,i))}else if(e instanceof yo){var o=this.parseQueryValue("FieldValue.increment",e._operand),a=new hi(o);t.fieldTransforms.push(new vt(t.path,a))}else v("Unknown FieldValue type: "+e)},e.prototype.parseScalarValue=function(e,t){if(null===e)return At.INSTANCE;if("number"==typeof e)return $n(e)?new Pt(e):new Ot(e);if("boolean"==typeof e)return xt.of(e);if("string"==typeof e)return new Rt(e);if(e instanceof Date)return new jt(Ce.fromDate(e));if(e instanceof Ce)return new jt(new Ce(e.seconds,1e3*Math.floor(e.nanoseconds/1e3)));if(e instanceof si)return new qt(e);if(e instanceof re)return new Ft(e);if(e instanceof Eo)return new Vt(e.databaseId,e.key);throw t.createError("Unsupported field value: "+W(e))},e.prototype.parseArrayTransformElements=function(e,t){var n=this;return t.map((function(t,r){var i=new Io(lo.Argument,e,de.EMPTY_PATH);return n.parseData(t,i.childContextForArray(r))}))},e}();function _o(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Ce||e instanceof si||e instanceof re||e instanceof Eo||e instanceof ho)}function Do(e,t,n){if(!_o(n)||!U(n)){var r=W(n);throw"an object"===r?t.createError(e+" a custom object"):t.createError(e+" "+r)}}function ko(e,t){if(t instanceof to)return t._internalPath;if("string"==typeof t)return No(e,t);throw new I(S.INVALID_ARGUMENT,"Function "+e+"() called with invalid data. Field path arguments must be of type string or FieldPath.")}function No(e,t){try{return function(e){if(e.search(no)>=0)throw new I(S.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(to.bind.apply(to,a.__spreadArrays([void 0],e.split("."))))}catch(t){throw new I(S.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(t)._internalPath}catch(t){var n=Ao(t);throw new I(S.INVALID_ARGUMENT,"Function "+e+"() called with invalid data. "+n)}}function Ao(e){return e instanceof Error?e.message:e.toString()}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xo="firestore.googleapis.com",Mo=!0,Lo=!0,Po=!1,Oo=Ln.COLLECTION_DISABLED,Ro=function(){function e(e){if(void 0===e.host){if(void 0!==e.ssl)throw new I(S.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=xo,this.ssl=Mo}else R("settings","non-empty string","host",e.host),this.host=e.host,j("settings","boolean","ssl",e.ssl),this.ssl=_(e.ssl,Mo);if(K("settings",e,["host","ssl","credentials","timestampsInSnapshots","cacheSizeBytes","experimentalForceLongPolling"]),j("settings","object","credentials",e.credentials),this.credentials=e.credentials,j("settings","boolean","timestampsInSnapshots",e.timestampsInSnapshots),!0===e.timestampsInSnapshots?g("\n  The timestampsInSnapshots setting now defaults to true and you no\n  longer need to explicitly set it. In a future release, the setting\n  will be removed entirely and so it is recommended that you remove it\n  from your firestore.settings() call now."):!1===e.timestampsInSnapshots&&g("\n  The timestampsInSnapshots setting will soon be removed. YOU MUST UPDATE\n  YOUR CODE.\n\n  To hide this warning, stop using the timestampsInSnapshots setting in your\n  firestore.settings({ ... }) call.\n\n  Once you remove the setting, Timestamps stored in Cloud Firestore will be\n  read back as Firebase Timestamp objects instead of as system Date objects.\n  So you will also need to update code expecting a Date to instead expect a\n  Timestamp. For example:\n\n  // Old:\n  const date = snapshot.get('created_at');\n  // New:\n  const timestamp = snapshot.get('created_at'); const date =\n  timestamp.toDate();\n\n  Please audit all existing usages of Date when you enable the new\n  behavior."),this.timestampsInSnapshots=_(e.timestampsInSnapshots,Lo),j("settings","number","cacheSizeBytes",e.cacheSizeBytes),void 0===e.cacheSizeBytes)this.cacheSizeBytes=Ln.DEFAULT_CACHE_SIZE_BYTES;else{if(e.cacheSizeBytes!==Oo&&e.cacheSizeBytes<Ln.MINIMUM_CACHE_SIZE_BYTES)throw new I(S.INVALID_ARGUMENT,"cacheSizeBytes must be at least "+Ln.MINIMUM_CACHE_SIZE_BYTES);this.cacheSizeBytes=e.cacheSizeBytes}j("settings","boolean","experimentalForceLongPolling",e.experimentalForceLongPolling),this.forceLongPolling=void 0===e.experimentalForceLongPolling?Po:e.experimentalForceLongPolling}return e.prototype.isEqual=function(e){return this.host===e.host&&this.ssl===e.ssl&&this.timestampsInSnapshots===e.timestampsInSnapshots&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.forceLongPolling===e.forceLongPolling},e}(),jo=function(){function e(t,n){var r=this;if(this._firebaseApp=null,this._queue=new ge,this.INTERNAL={delete:function(){return a.__awaiter(r,void 0,void 0,(function(){return a.__generator(this,(function(e){switch(e.label){case 0:return this.ensureClientConfigured(),[4,this._firestoreClient.terminate()];case 1:return e.sent(),[2]}}))}))}},"object"==typeof t.options){var i=t;this._firebaseApp=i,this._databaseId=e.databaseIdFromApp(i),this._persistenceKey=i.name,this._credentials=new oo(n)}else{var o=t;if(!o.projectId)throw new I(S.INVALID_ARGUMENT,"Must provide projectId");this._databaseId=new se(o.projectId,o.database),this._persistenceKey="[DEFAULT]",this._credentials=new io}this._settings=new Ro({}),this._dataConverter=this.createDataConverter(this._databaseId)}return e.prototype.settings=function(e){if(x("Firestore.settings",arguments,1),P("Firestore.settings","object",1,e),C(e,"persistence"))throw new I(S.INVALID_ARGUMENT,'"persistence" is now specified with a separate call to firestore.enablePersistence().');var t=new Ro(e);if(this._firestoreClient&&!this._settings.isEqual(t))throw new I(S.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");this._settings=t,void 0!==t.credentials&&(this._credentials=uo(t.credentials))},e.prototype.enableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.enableNetwork()},e.prototype.disableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.disableNetwork()},e.prototype.enablePersistence=function(e){if(this._firestoreClient)throw new I(S.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");var t=!1;return e&&(void 0!==e.experimentalTabSynchronization&&g("The 'experimentalTabSynchronization' setting has been renamed to 'synchronizeTabs'. In a future release, the setting will be removed and it is recommended that you update your firestore.enablePersistence() call to use 'synchronizeTabs'."),t=_(void 0!==e.synchronizeTabs?e.synchronizeTabs:e.experimentalTabSynchronization,!1)),this.configureClient(new Xi(this._settings.cacheSizeBytes,t))},e.prototype.clearPersistence=function(){var e=this,t=qn.buildStoragePrefix(this.makeDatabaseInfo()),n=new pe;return this._queue.enqueueAndForgetEvenAfterShutdown((function(){return a.__awaiter(e,void 0,void 0,(function(){var e;return a.__generator(this,(function(r){switch(r.label){case 0:if(r.trys.push([0,2,,3]),void 0!==this._firestoreClient&&!this._firestoreClient.clientTerminated)throw new I(S.FAILED_PRECONDITION,"Persistence cannot be cleared after this Firestore instance is initialized.");return[4,qn.clearPersistence(t)];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise},e.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.INTERNAL.delete()},Object.defineProperty(e.prototype,"_isTerminated",{get:function(){return this.ensureClientConfigured(),this._firestoreClient.clientTerminated},enumerable:!0,configurable:!0}),e.prototype.waitForPendingWrites=function(){return this.ensureClientConfigured(),this._firestoreClient.waitForPendingWrites()},e.prototype.onSnapshotsInSync=function(e){if(this.ensureClientConfigured(),co(e))return this.onSnapshotsInSyncInternal(e);P("Firestore.onSnapshotsInSync","function",1,e);var t={next:e};return this.onSnapshotsInSyncInternal(t)},e.prototype.onSnapshotsInSyncInternal=function(e){var t=this,n=new eo({next:function(){e.next&&e.next()},error:function(e){throw v("Uncaught Error in onSnapshotsInSync")}});return this._firestoreClient.addSnapshotsInSyncListener(n),function(){n.mute(),t._firestoreClient.removeSnapshotsInSyncListener(n)}},e.prototype.ensureClientConfigured=function(){return this._firestoreClient||this.configureClient(new $i),this._firestoreClient},e.prototype.makeDatabaseInfo=function(){return new oe(this._databaseId,this._persistenceKey,this._settings.host,this._settings.ssl,this._settings.forceLongPolling)},e.prototype.configureClient=function(e){b(!!this._settings.host,"FirestoreSettings.host is not set"),b(!this._firestoreClient,"configureClient() called multiple times");var t=this.makeDatabaseInfo();return this._firestoreClient=new Zi(w.getPlatform(),t,this._credentials,this._queue),this._firestoreClient.start(e)},e.prototype.createDataConverter=function(e){return new Co((function(t){if(t instanceof Vo){var n=e,r=t.firestore._databaseId;if(!r.isEqual(n))throw new I(S.INVALID_ARGUMENT,"Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return new Eo(e,t._key)}return t}))},e.databaseIdFromApp=function(e){var t=e.options;if(!C(t,"projectId"))throw new I(S.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var n=t.projectId;if(!n||"string"!=typeof n)throw new I(S.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new se(n)},Object.defineProperty(e.prototype,"app",{get:function(){if(!this._firebaseApp)throw new I(S.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._firebaseApp},enumerable:!0,configurable:!0}),e.prototype.collection=function(e){return x("Firestore.collection",arguments,1),P("Firestore.collection","non-empty string",1,e),this.ensureClientConfigured(),new Go(le.fromString(e),this)},e.prototype.doc=function(e){return x("Firestore.doc",arguments,1),P("Firestore.doc","non-empty string",1,e),this.ensureClientConfigured(),Vo.forPath(le.fromString(e),this)},e.prototype.collectionGroup=function(e){if(x("Firestore.collectionGroup",arguments,1),P("Firestore.collectionGroup","non-empty string",1,e),e.indexOf("/")>=0)throw new I(S.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return this.ensureClientConfigured(),new zo(new tr(le.EMPTY_PATH,e),this)},e.prototype.runTransaction=function(e){var t=this;return x("Firestore.runTransaction",arguments,1),P("Firestore.runTransaction","function",1,e),this.ensureClientConfigured().transaction((function(n){return e(new Bo(t,n))}))},e.prototype.batch=function(){return this.ensureClientConfigured(),new Fo(this)},Object.defineProperty(e,"logLevel",{get:function(){switch(f()){case i.DEBUG:return"debug";case i.ERROR:return"error";case i.SILENT:return"silent";default:return v("Unknown log level: "+f())}},enumerable:!0,configurable:!0}),e.setLogLevel=function(e){switch(x("Firestore.setLogLevel",arguments,1),P("Firestore.setLogLevel","non-empty string",1,e),e){case"debug":p(i.DEBUG);break;case"error":p(i.ERROR);break;case"silent":p(i.SILENT);break;default:throw new I(S.INVALID_ARGUMENT,"Invalid log level: "+e)}},e.prototype._areTimestampsInSnapshotsEnabled=function(){return this._settings.timestampsInSnapshots},e}(),Bo=function(){function e(e,t){this._firestore=e,this._transaction=t}return e.prototype.get=function(e){var t=this;x("Transaction.get",arguments,1);var n=Jo("Transaction.get",e,this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return v("Mismatch in docs returned from document lookup.");var r=e[0];if(r instanceof Gt)return new Uo(t._firestore,n._key,null,!1,!1,n._converter);if(r instanceof Kt)return new Uo(t._firestore,n._key,r,!1,!1,n._converter);throw v("BatchGetDocumentsRequest returned unexpected document type: "+r.constructor.name)}))},e.prototype.set=function(e,t,n){L("Transaction.set",arguments,2,3);var r=Jo("Transaction.set",e,this._firestore);n=Qo("Transaction.set",n);var i=$o(r._converter,t,"Transaction.set"),o=i[0],a=i[1],s=n.merge||n.mergeFields?this._firestore._dataConverter.parseMergeData(a,o,n.mergeFields):this._firestore._dataConverter.parseSetData(a,o);return this._transaction.set(r._key,s),this},e.prototype.update=function(e,t,n){for(var r,i,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];return"string"==typeof t||t instanceof to?(M("Transaction.update",arguments,3),r=Jo("Transaction.update",e,this._firestore),i=this._firestore._dataConverter.parseUpdateVarargs("Transaction.update",t,n,o)):(x("Transaction.update",arguments,2),r=Jo("Transaction.update",e,this._firestore),i=this._firestore._dataConverter.parseUpdateData("Transaction.update",t)),this._transaction.update(r._key,i),this},e.prototype.delete=function(e){x("Transaction.delete",arguments,1);var t=Jo("Transaction.delete",e,this._firestore);return this._transaction.delete(t._key),this},e}(),Fo=function(){function e(e){this._firestore=e,this._mutations=[],this._committed=!1}return e.prototype.set=function(e,t,n){L("WriteBatch.set",arguments,2,3),this.verifyNotCommitted();var r=Jo("WriteBatch.set",e,this._firestore);n=Qo("WriteBatch.set",n);var i=$o(r._converter,t,"WriteBatch.set"),o=i[0],a=i[1],s=n.merge||n.mergeFields?this._firestore._dataConverter.parseMergeData(a,o,n.mergeFields):this._firestore._dataConverter.parseSetData(a,o);return this._mutations=this._mutations.concat(s.toMutations(r._key,St.NONE)),this},e.prototype.update=function(e,t,n){for(var r,i,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];return this.verifyNotCommitted(),"string"==typeof t||t instanceof to?(M("WriteBatch.update",arguments,3),r=Jo("WriteBatch.update",e,this._firestore),i=this._firestore._dataConverter.parseUpdateVarargs("WriteBatch.update",t,n,o)):(x("WriteBatch.update",arguments,2),r=Jo("WriteBatch.update",e,this._firestore),i=this._firestore._dataConverter.parseUpdateData("WriteBatch.update",t)),this._mutations=this._mutations.concat(i.toMutations(r._key,St.exists(!0))),this},e.prototype.delete=function(e){x("WriteBatch.delete",arguments,1),this.verifyNotCommitted();var t=Jo("WriteBatch.delete",e,this._firestore);return this._mutations=this._mutations.concat(new Dt(t._key,St.NONE)),this},e.prototype.commit=function(){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(e){return this.verifyNotCommitted(),this._committed=!0,this._mutations.length>0?[2,this._firestore.ensureClientConfigured().write(this._mutations)]:[2]}))}))},e.prototype.verifyNotCommitted=function(){if(this._committed)throw new I(S.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},e}(),Vo=function(){function e(e,t,n){this._key=e,this.firestore=t,this._converter=n,this._firestoreClient=this.firestore.ensureClientConfigured()}return e.forPath=function(t,n,r){if(t.length%2!=0)throw new I(S.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.canonicalString()+" has "+t.length);return new e(new fe(t),n,r)},Object.defineProperty(e.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new Go(this._key.path.popLast(),this.firestore,this._converter)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!0,configurable:!0}),e.prototype.collection=function(e){if(x("DocumentReference.collection",arguments,1),P("DocumentReference.collection","non-empty string",1,e),!e)throw new I(S.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var t=le.fromString(e);return new Go(this._key.path.child(t),this.firestore)},e.prototype.isEqual=function(t){if(!(t instanceof e))throw G("isEqual","DocumentReference",1,t);return this.firestore===t.firestore&&this._key.isEqual(t._key)&&this._converter===t._converter},e.prototype.set=function(e,t){L("DocumentReference.set",arguments,1,2),t=Qo("DocumentReference.set",t);var n=$o(this._converter,e,"DocumentReference.set"),r=n[0],i=n[1],o=t.merge||t.mergeFields?this.firestore._dataConverter.parseMergeData(i,r,t.mergeFields):this.firestore._dataConverter.parseSetData(i,r);return this._firestoreClient.write(o.toMutations(this._key,St.NONE))},e.prototype.update=function(e,t){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return"string"==typeof e||e instanceof to?(M("DocumentReference.update",arguments,2),n=this.firestore._dataConverter.parseUpdateVarargs("DocumentReference.update",e,t,r)):(x("DocumentReference.update",arguments,1),n=this.firestore._dataConverter.parseUpdateData("DocumentReference.update",e)),this._firestoreClient.write(n.toMutations(this._key,St.exists(!0)))},e.prototype.delete=function(){return x("DocumentReference.delete",arguments,0),this._firestoreClient.write([new Dt(this._key,St.NONE)])},e.prototype.onSnapshot=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];L("DocumentReference.onSnapshot",arguments,1,4);var n,r={includeMetadataChanges:!1},i=0;"object"!=typeof e[i]||co(e[i])||(K("DocumentReference.onSnapshot",r=e[i],["includeMetadataChanges"]),j("DocumentReference.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++);var o={includeMetadataChanges:r.includeMetadataChanges};return co(e[i])?n=e[i]:(P("DocumentReference.onSnapshot","function",i,e[i]),O("DocumentReference.onSnapshot","function",i+1,e[i+1]),O("DocumentReference.onSnapshot","function",i+2,e[i+2]),n={next:e[i],error:e[i+1],complete:e[i+2]}),this.onSnapshotInternal(o,n)},e.prototype.onSnapshotInternal=function(e,t){var n=this,r=function(e){console.error("Uncaught Error in onSnapshot:",e)};t.error&&(r=t.error.bind(t));var i=new eo({next:function(e){if(t.next){b(e.docs.size<=1,"Too many documents returned on a document query");var r=e.docs.get(n._key);t.next(new Uo(n.firestore,n._key,r,e.fromCache,e.hasPendingWrites,n._converter))}},error:r}),o=this._firestoreClient.listen(tr.atPath(this._key.path),i,e);return function(){i.mute(),n._firestoreClient.unlisten(o)}},e.prototype.get=function(e){var t=this;return L("DocumentReference.get",arguments,0,1),Yo("DocumentReference.get",e),new Promise((function(n,r){e&&"cache"===e.source?t.firestore.ensureClientConfigured().getDocumentFromLocalCache(t._key).then((function(e){n(new Uo(t.firestore,t._key,e,!0,e instanceof Kt&&e.hasLocalMutations,t._converter))}),r):t.getViaSnapshotListener(n,r,e)}))},e.prototype.getViaSnapshotListener=function(e,t,n){var r=this.onSnapshotInternal({includeMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(i){r(),!i.exists&&i.metadata.fromCache?t(new I(S.UNAVAILABLE,"Failed to get document because the client is offline.")):i.exists&&i.metadata.fromCache&&n&&"server"===n.source?t(new I(S.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):e(i)},error:t})},e.prototype.withConverter=function(t){return new e(this._key,this.firestore,t)},e}(),qo=function(){function e(e,t){this.hasPendingWrites=e,this.fromCache=t}return e.prototype.isEqual=function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache},e}(),Uo=function(){function e(e,t,n,r,i,o){this._firestore=e,this._key=t,this._document=n,this._fromCache=r,this._hasPendingWrites=i,this._converter=o}return e.prototype.data=function(e){if(L("DocumentSnapshot.data",arguments,0,1),e=Ho("DocumentSnapshot.data",e),this._document){if(this._converter){var t=new Wo(this._firestore,this._key,this._document,this._fromCache,this._hasPendingWrites);return this._converter.fromFirestore(t,e)}return this.toJSObject(this._document.data(),kt.fromSnapshotOptions(e,this._firestore._areTimestampsInSnapshotsEnabled()))}},e.prototype.get=function(e,t){if(L("DocumentSnapshot.get",arguments,1,2),t=Ho("DocumentSnapshot.get",t),this._document){var n=this._document.data().field(ko("DocumentSnapshot.get",e));if(null!==n)return this.toJSValue(n,kt.fromSnapshotOptions(t,this._firestore._areTimestampsInSnapshotsEnabled()))}},Object.defineProperty(e.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ref",{get:function(){return new Vo(this._key,this._firestore,this._converter)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return null!==this._document},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return new qo(this._hasPendingWrites,this._fromCache)},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){if(!(t instanceof e))throw G("isEqual","DocumentSnapshot",1,t);return this._firestore===t._firestore&&this._fromCache===t._fromCache&&this._key.isEqual(t._key)&&(null===this._document?null===t._document:this._document.isEqual(t._document))&&this._converter===t._converter},e.prototype.toJSObject=function(e,t){var n=this,r={};return e.forEach((function(e,i){r[e]=n.toJSValue(i,t)})),r},e.prototype.toJSValue=function(e,t){if(e instanceof Ut)return this.toJSObject(e,t);if(e instanceof Wt)return this.toJSArray(e,t);if(e instanceof Vt){var n=e.value(t),r=this._firestore.ensureClientConfigured().databaseId();return e.databaseId.isEqual(r)||g("Document "+this._key.path+" contains a document reference within a different database ("+e.databaseId.projectId+"/"+e.databaseId.database+") which is not supported. It will be treated as a reference in the current database ("+r.projectId+"/"+r.database+") instead."),new Vo(n,this._firestore,this._converter)}return e.value(t)},e.prototype.toJSArray=function(e,t){var n=this;return e.internalValue.map((function(e){return n.toJSValue(e,t)}))},e}(),Wo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.data=function(t){var n=e.prototype.data.call(this,t);return b(void 0!==n,"Document in a QueryDocumentSnapshot should exist"),n},t}(Uo),zo=function(){function e(e,t,n){this._query=e,this.firestore=t,this._converter=n}return e.prototype.where=function(t,n,r){x("Query.where",arguments,3),z("Query.where",3,r);var i,o=["<","<=","==",">=",">","array-contains","in","array-contains-any"];V("Query.where",o,2,n);var a=ko("Query.where",t),s=rr.fromString(n);if(a.isKeyField()){if(s===rr.ARRAY_CONTAINS||s===rr.ARRAY_CONTAINS_ANY)throw new I(S.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+s.toString()+"' queries on FieldPath.documentId().");if(s===rr.IN){this.validateDisjunctiveFilterElements(r,s);for(var u=[],c=0,l=r;c<l.length;c++){var h=l[c];u.push(this.parseDocumentIdValue(h))}i=new Wt(u)}else i=this.parseDocumentIdValue(r)}else s!==rr.IN&&s!==rr.ARRAY_CONTAINS_ANY||this.validateDisjunctiveFilterElements(r,s),i=this.firestore._dataConverter.parseQueryValue("Query.where",r,s===rr.IN);var d=ir.create(a,s,i);return this.validateNewFilter(d),new e(this._query.addFilter(d),this.firestore,this._converter)},e.prototype.orderBy=function(t,n){var r;if(L("Query.orderBy",arguments,1,2),O("Query.orderBy","non-empty string",2,n),void 0===n||"asc"===n)r=lr.ASCENDING;else{if("desc"!==n)throw new I(S.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+n+"', expected 'asc' or 'desc'.");r=lr.DESCENDING}if(null!==this._query.startAt)throw new I(S.INVALID_ARGUMENT,"Invalid query. You must not call Query.startAt() or Query.startAfter() before calling Query.orderBy().");if(null!==this._query.endAt)throw new I(S.INVALID_ARGUMENT,"Invalid query. You must not call Query.endAt() or Query.endBefore() before calling Query.orderBy().");var i=ko("Query.orderBy",t),o=new dr(i,r);return this.validateNewOrderBy(o),new e(this._query.addOrderBy(o),this.firestore,this._converter)},e.prototype.limit=function(t){return x("Query.limit",arguments,1),P("Query.limit","number",1,t),Q("Query.limit",1,t),new e(this._query.withLimitToFirst(t),this.firestore,this._converter)},e.prototype.limitToLast=function(t){return x("Query.limitToLast",arguments,1),P("Query.limitToLast","number",1,t),Q("Query.limitToLast",1,t),new e(this._query.withLimitToLast(t),this.firestore,this._converter)},e.prototype.startAt=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];M("Query.startAt",arguments,1);var i=this.boundFromDocOrFields("Query.startAt",t,n,!0);return new e(this._query.withStartAt(i),this.firestore,this._converter)},e.prototype.startAfter=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];M("Query.startAfter",arguments,1);var i=this.boundFromDocOrFields("Query.startAfter",t,n,!1);return new e(this._query.withStartAt(i),this.firestore,this._converter)},e.prototype.endBefore=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];M("Query.endBefore",arguments,1);var i=this.boundFromDocOrFields("Query.endBefore",t,n,!0);return new e(this._query.withEndAt(i),this.firestore,this._converter)},e.prototype.endAt=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];M("Query.endAt",arguments,1);var i=this.boundFromDocOrFields("Query.endAt",t,n,!1);return new e(this._query.withEndAt(i),this.firestore,this._converter)},e.prototype.isEqual=function(t){if(!(t instanceof e))throw G("isEqual","Query",1,t);return this.firestore===t.firestore&&this._query.isEqual(t._query)},e.prototype.withConverter=function(t){return new e(this._query,this.firestore,t)},e.prototype.boundFromDocOrFields=function(e,t,n,r){if(z(e,1,t),t instanceof Uo){if(n.length>0)throw new I(S.INVALID_ARGUMENT,"Too many arguments provided to "+e+"().");var i=t;if(!i.exists)throw new I(S.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+e+"().");return this.boundFromDocument(e,i._document,r)}var o=[t].concat(n);return this.boundFromFields(e,o,r)},e.prototype.boundFromDocument=function(e,t,n){for(var r=[],i=0,o=this._query.orderBy;i<o.length;i++){var a=o[i];if(a.field.isKeyField())r.push(new Vt(this.firestore._databaseId,t.key));else{var s=t.field(a.field);if(s instanceof Bt)throw new I(S.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+a.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===s){var u=a.field.canonicalString();throw new I(S.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+u+"' (used as the orderBy) does not exist.")}r.push(s)}}return new hr(r,n)},e.prototype.boundFromFields=function(e,t,n){var r=this._query.explicitOrderBy;if(t.length>r.length)throw new I(S.INVALID_ARGUMENT,"Too many arguments provided to "+e+"(). The number of arguments must be less than or equal to the number of Query.orderBy() clauses");for(var i=[],o=0;o<t.length;o++){var a=t[o];if(r[o].field.isKeyField()){if("string"!=typeof a)throw new I(S.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+e+"(), but got a "+typeof a);if(!this._query.isCollectionGroupQuery()&&-1!==a.indexOf("/"))throw new I(S.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+e+"() must be a plain document ID, but '"+a+"' contains a slash.");var s=this._query.path.child(le.fromString(a));if(!fe.isDocumentKey(s))throw new I(S.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+e+"() must result in a valid document path, but '"+s+"' is not because it contains an odd number of segments.");var u=new fe(s);i.push(new Vt(this.firestore._databaseId,u))}else{var c=this.firestore._dataConverter.parseQueryValue(e,a);i.push(c)}}return new hr(i,n)},e.prototype.onSnapshot=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];L("Query.onSnapshot",arguments,1,4);var n,r={},i=0;return"object"!=typeof e[i]||co(e[i])||(K("Query.onSnapshot",r=e[i],["includeMetadataChanges"]),j("Query.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++),co(e[i])?n=e[i]:(P("Query.onSnapshot","function",i,e[i]),O("Query.onSnapshot","function",i+1,e[i+1]),O("Query.onSnapshot","function",i+2,e[i+2]),n={next:e[i],error:e[i+1],complete:e[i+2]}),this.validateHasExplicitOrderByForLimitToLast(this._query),this.onSnapshotInternal(r,n)},e.prototype.onSnapshotInternal=function(e,t){var n=this,r=function(e){console.error("Uncaught Error in onSnapshot:",e)};t.error&&(r=t.error.bind(t));var i=new eo({next:function(e){t.next&&t.next(new Ko(n.firestore,n._query,e,n._converter))},error:r}),o=this.firestore.ensureClientConfigured(),a=o.listen(this._query,i,e);return function(){i.mute(),o.unlisten(a)}},e.prototype.validateHasExplicitOrderByForLimitToLast=function(e){if(e.hasLimitToLast()&&0===e.explicitOrderBy.length)throw new I(S.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")},e.prototype.get=function(e){var t=this;return L("Query.get",arguments,0,1),Yo("Query.get",e),this.validateHasExplicitOrderByForLimitToLast(this._query),new Promise((function(n,r){e&&"cache"===e.source?t.firestore.ensureClientConfigured().getDocumentsFromLocalCache(t._query).then((function(e){n(new Ko(t.firestore,t._query,e,t._converter))}),r):t.getViaSnapshotListener(n,r,e)}))},e.prototype.getViaSnapshotListener=function(e,t,n){var r=this.onSnapshotInternal({includeMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(i){r(),i.metadata.fromCache&&n&&"server"===n.source?t(new I(S.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):e(i)},error:t})},e.prototype.parseDocumentIdValue=function(e){if("string"==typeof e){if(""===e)throw new I(S.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!this._query.isCollectionGroupQuery()&&-1!==e.indexOf("/"))throw new I(S.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+e+"' contains a '/' character.");var t=this._query.path.child(le.fromString(e));if(!fe.isDocumentKey(t))throw new I(S.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+t+"' is not because it has an odd number of segments ("+t.length+").");return new Vt(this.firestore._databaseId,new fe(t))}if(e instanceof Vo){var n=e;return new Vt(this.firestore._databaseId,n._key)}throw new I(S.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+W(e)+".")},e.prototype.validateDisjunctiveFilterElements=function(e,t){if(!Array.isArray(e)||0===e.length)throw new I(S.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+t.toString()+"' filters.");if(e.length>10)throw new I(S.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters support a maximum of 10 elements in the value array.");if(e.indexOf(null)>=0)throw new I(S.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters cannot contain 'null' in the value array.");if(e.filter((function(e){return Number.isNaN(e)})).length>0)throw new I(S.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters cannot contain 'NaN' in the value array.")},e.prototype.validateNewFilter=function(e){if(e instanceof ir){var t=[rr.ARRAY_CONTAINS,rr.ARRAY_CONTAINS_ANY],n=[rr.IN,rr.ARRAY_CONTAINS_ANY],r=t.indexOf(e.op)>=0,i=n.indexOf(e.op)>=0;if(e.isInequality()){var o=this._query.getInequalityFilterField();if(null!==o&&!o.isEqual(e.field))throw new I(S.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+o.toString()+"' and '"+e.field.toString()+"'");var a=this._query.getFirstOrderByField();null!==a&&this.validateOrderByAndInequalityMatch(e.field,a)}else if(i||r){var s=null;if(i&&(s=this._query.findFilterOperator(n)),null===s&&r&&(s=this._query.findFilterOperator(t)),null!=s)throw s===e.op?new I(S.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new I(S.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+s.toString()+"' filters.")}}},e.prototype.validateNewOrderBy=function(e){if(null===this._query.getFirstOrderByField()){var t=this._query.getInequalityFilterField();null!==t&&this.validateOrderByAndInequalityMatch(t,e.field)}},e.prototype.validateOrderByAndInequalityMatch=function(e,t){if(!t.isEqual(e))throw new I(S.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first Query.orderBy(), but your first Query.orderBy() is on field '"+t.toString()+"' instead.")},e}(),Ko=function(){function e(e,t,n,r){this._firestore=e,this._originalQuery=t,this._snapshot=n,this._converter=r,this._cachedChanges=null,this._cachedChangesIncludeMetadataChanges=null,this.metadata=new qo(n.hasPendingWrites,n.fromCache)}return Object.defineProperty(e.prototype,"docs",{get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this._snapshot.docs.isEmpty()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!0,configurable:!0}),e.prototype.forEach=function(e,t){var n=this;L("QuerySnapshot.forEach",arguments,1,2),P("QuerySnapshot.forEach","function",1,e),this._snapshot.docs.forEach((function(r){e.call(t,n.convertToDocumentImpl(r))}))},Object.defineProperty(e.prototype,"query",{get:function(){return new zo(this._originalQuery,this._firestore,this._converter)},enumerable:!0,configurable:!0}),e.prototype.docChanges=function(e){e&&(K("QuerySnapshot.docChanges",e,["includeMetadataChanges"]),j("QuerySnapshot.docChanges","boolean","includeMetadataChanges",e.includeMetadataChanges));var t=!(!e||!e.includeMetadataChanges);if(t&&this._snapshot.excludesMetadataChanges)throw new I(S.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t,n,r){if(n.oldDocs.isEmpty()){var i,o=0;return n.docChanges.map((function(t){var a=new Wo(e,t.doc.key,t.doc,n.fromCache,n.mutatedKeys.has(t.doc.key),r);return b(t.type===zr.Added,"Invalid event type for first snapshot"),b(!i||n.query.docComparator(i,t.doc)<0,"Got added events in wrong order"),i=t.doc,{type:"added",doc:a,oldIndex:-1,newIndex:o++}}))}var a=n.oldDocs;return n.docChanges.filter((function(e){return t||e.type!==zr.Metadata})).map((function(t){var i=new Wo(e,t.doc.key,t.doc,n.fromCache,n.mutatedKeys.has(t.doc.key),r),o=-1,s=-1;return t.type!==zr.Added&&(b((o=a.indexOf(t.doc.key))>=0,"Index for document not found"),a=a.delete(t.doc.key)),t.type!==zr.Removed&&(s=(a=a.add(t.doc)).indexOf(t.doc.key)),{type:Xo(t.type),doc:i,oldIndex:o,newIndex:s}}))}(this._firestore,t,this._snapshot,this._converter),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges},e.prototype.isEqual=function(t){if(!(t instanceof e))throw G("isEqual","QuerySnapshot",1,t);return this._firestore===t._firestore&&this._originalQuery.isEqual(t._originalQuery)&&this._snapshot.isEqual(t._snapshot)&&this._converter===t._converter},e.prototype.convertToDocumentImpl=function(e){return new Wo(this._firestore,e.key,e,this.metadata.fromCache,this._snapshot.mutatedKeys.has(e.key),this._converter)},e}();a.__spreadArrays(["length","forEach","map"],"undefined"!=typeof Symbol?[Symbol.iterator]:[]).forEach((function(e){try{Object.defineProperty(Ko.prototype.docChanges,e,{get:function(){return function(){throw new I(S.INVALID_ARGUMENT,'QuerySnapshot.docChanges has been changed from a property into a method, so usages like "querySnapshot.docChanges" should become "querySnapshot.docChanges()"')}()}})}catch(e){}}));var Go=function(e){function t(t,n,r){var i=e.call(this,tr.atPath(t),n,r)||this;if(i._path=t,t.length%2!=1)throw new I(S.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t.canonicalString()+" has "+t.length);return i}return a.__extends(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._query.path.popLast();return e.isEmpty()?null:new Vo(new fe(e),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!0,configurable:!0}),t.prototype.doc=function(e){if(L("CollectionReference.doc",arguments,0,1),0===arguments.length&&(e=J.newId()),P("CollectionReference.doc","non-empty string",1,e),""===e)throw new I(S.INVALID_ARGUMENT,"Document path must be a non-empty string");var t=le.fromString(e);return Vo.forPath(this._query.path.child(t),this.firestore,this._converter)},t.prototype.add=function(e){x("CollectionReference.add",arguments,1),P("CollectionReference.add","object",1,e);var t=this.doc();return t.set(e).then((function(){return t}))},t.prototype.withConverter=function(e){return new t(this._path,this.firestore,e)},t}(zo);function Qo(e,t){if(void 0===t)return{merge:!1};if(K(e,t,["merge","mergeFields"]),j(e,"boolean","merge",t.merge),B(e,"mergeFields","a string or a FieldPath",t.mergeFields,(function(e){return"string"==typeof e||e instanceof to})),void 0!==t.mergeFields&&void 0!==t.merge)throw new I(S.INVALID_ARGUMENT,"Invalid options passed to function "+e+'(): You cannot specify both "merge" and "mergeFields".');return t}function Ho(e,t){return void 0===t?{}:(K(e,t,["serverTimestamps"]),F(e,0,"serverTimestamps",t.serverTimestamps,["estimate","previous","none"]),t)}function Yo(e,t){O(e,"object",1,t),t&&(K(e,t,["source"]),F(e,0,"source",t.source,["default","server","cache"]))}function Jo(e,t,n){if(t instanceof Vo){if(t.firestore!==n)throw new I(S.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}throw G(e,"DocumentReference",1,t)}function Xo(e){switch(e){case zr.Added:return"added";case zr.Modified:case zr.Metadata:return"modified";case zr.Removed:return"removed";default:return v("Unknown change type: "+e)}}function $o(e,t,n){var r;return e?(r=e.toFirestore(t),n="toFirestore() in "+n):r=t,[r,n]}var Zo=E(jo,"Use firebase.firestore() instead."),ea=E(Bo,"Use firebase.firestore().runTransaction() instead."),ta=E(Fo,"Use firebase.firestore().batch() instead."),na=E(Vo,"Use firebase.firestore().doc() instead."),ra=E(Uo),ia=E(Wo),oa=E(zo),aa=E(Ko),sa=E(Go,"Use firebase.firestore().collection() instead."),ua={Firestore:Zo,GeoPoint:si,Timestamp:Ce,Blob:ie,Transaction:ea,WriteBatch:ta,DocumentReference:na,DocumentSnapshot:ra,Query:oa,QueryDocumentSnapshot:ia,QuerySnapshot:aa,CollectionReference:sa,FieldPath:to,FieldValue:vo,setLogLevel:jo.setLogLevel,CACHE_SIZE_UNLIMITED:Oo};function ca(e){e.INTERNAL.registerComponent(new c.Component("firestore",(function(e){var t=e.getProvider("app").getImmediate();return new jo(t,e.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(function(e){b(e&&"object"==typeof e,"shallowCopy() expects object parameter.");var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}(ua)))}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var la=function(){function e(){}return e.prototype.addCallback=function(e){},e.prototype.shutdown=function(){},e}(),ha=function(){function e(){var e=this;this.networkAvailableListener=function(){return e.onNetworkAvailable()},this.networkUnavailableListener=function(){return e.onNetworkUnavailable()},this.callbacks=[],this.configureNetworkMonitoring()}return e.prototype.addCallback=function(e){this.callbacks.push(e)},e.prototype.shutdown=function(){window.removeEventListener("online",this.networkAvailableListener),window.removeEventListener("offline",this.networkUnavailableListener)},e.prototype.configureNetworkMonitoring=function(){window.addEventListener("online",this.networkAvailableListener),window.addEventListener("offline",this.networkUnavailableListener)},e.prototype.onNetworkAvailable=function(){m("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var e=0,t=this.callbacks;e<t.length;e++){(0,t[e])(0)}},e.prototype.onNetworkUnavailable=function(){m("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var e=0,t=this.callbacks;e<t.length;e++){(0,t[e])(1)}},e.isAvailable=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},e}(),da=function(){function e(e){this.sendFn=e.sendFn,this.closeFn=e.closeFn}return e.prototype.onOpen=function(e){b(!this.wrappedOnOpen,"Called onOpen on stream twice!"),this.wrappedOnOpen=e},e.prototype.onClose=function(e){b(!this.wrappedOnClose,"Called onClose on stream twice!"),this.wrappedOnClose=e},e.prototype.onMessage=function(e){b(!this.wrappedOnMessage,"Called onMessage on stream twice!"),this.wrappedOnMessage=e},e.prototype.close=function(){this.closeFn()},e.prototype.send=function(e){this.sendFn(e)},e.prototype.callOnOpen=function(){b(void 0!==this.wrappedOnOpen,"Cannot call onOpen because no callback was set"),this.wrappedOnOpen()},e.prototype.callOnClose=function(e){b(void 0!==this.wrappedOnClose,"Cannot call onClose because no callback was set"),this.wrappedOnClose(e)},e.prototype.callOnMessage=function(e){b(void 0!==this.wrappedOnMessage,"Cannot call onMessage because no callback was set"),this.wrappedOnMessage(e)},e}(),fa="Connection",pa={BatchGetDocuments:"batchGet",Commit:"commit"},ma="gl-js/ fire/"+h,ga=function(){function e(e){this.databaseId=e.databaseId;var t=e.ssl?"https":"http";this.baseUrl=t+"://"+e.host,this.forceLongPolling=e.forceLongPolling}return e.prototype.modifyHeadersForRequest=function(e,t){if(t)for(var n in t.authHeaders)t.authHeaders.hasOwnProperty(n)&&(e[n]=t.authHeaders[n]);e["X-Goog-Api-Client"]=ma},e.prototype.invokeRPC=function(e,t,n){var r=this,i=this.makeUrl(e);return new Promise((function(o,s){var u=new l.XhrIo;u.listenOnce(l.EventType.COMPLETE,(function(){try{switch(u.getLastErrorCode()){case l.ErrorCode.NO_ERROR:var t=u.getResponseJson();m(fa,"XHR received:",JSON.stringify(t)),o(t);break;case l.ErrorCode.TIMEOUT:m(fa,'RPC "'+e+'" timed out'),s(new I(S.DEADLINE_EXCEEDED,"Request time out"));break;case l.ErrorCode.HTTP_ERROR:var n=u.getStatus();if(m(fa,'RPC "'+e+'" failed with status:',n,"response text:",u.getResponseText()),n>0){var r=u.getResponseJson().error;if(r&&r.status&&r.message){var i=(a=r.status,c=a.toLowerCase().replace("_","-"),Object.values(S).indexOf(c)>=0?c:S.UNKNOWN);s(new I(i,r.message))}else s(new I(S.UNKNOWN,"Server responded with status "+u.getStatus()))}else m(fa,'RPC "'+e+'" failed'),s(new I(S.UNAVAILABLE,"Connection failed."));break;default:v('RPC "'+e+'" failed with unanticipated webchannel error '+u.getLastErrorCode()+": "+u.getLastError()+", giving up.")}}finally{m(fa,'RPC "'+e+'" completed.')}var a,c}));var c=a.__assign({},t);delete c.database;var h=JSON.stringify(c);m(fa,"XHR sending: ",i+" "+h);var d={"Content-Type":"text/plain"};r.modifyHeadersForRequest(d,n),u.send(i,"POST",h,d,15)}))},e.prototype.invokeStreamingRPC=function(e,t,n){return this.invokeRPC(e,t,n)},e.prototype.openStream=function(e,t){var n=[this.baseUrl,"/","google.firestore.v1.Firestore","/",e,"/channel"],r=l.createWebChannelTransport(),i={backgroundChannelTest:!0,httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling};this.modifyHeadersForRequest(i.initMessageHeaders,t),u.isReactNative()||(i.httpHeadersOverwriteParam="$httpHeaders");var o=n.join("");m(fa,"Creating WebChannel: "+o+" "+i);var a=r.createWebChannel(o,i),s=!1,c=!1,h=new da({sendFn:function(e){c?m(fa,"Not sending because WebChannel is closed:",e):(s||(m(fa,"Opening WebChannel transport."),a.open(),s=!0),m(fa,"WebChannel sending:",e),a.send(e))},closeFn:function(){return a.close()}}),d=function(e,t){a.listen(e,(function(e){try{t(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return d(l.WebChannel.EventType.OPEN,(function(){c||m(fa,"WebChannel transport opened.")})),d(l.WebChannel.EventType.CLOSE,(function(){c||(c=!0,m(fa,"WebChannel transport closed"),h.callOnClose())})),d(l.WebChannel.EventType.ERROR,(function(e){c||(c=!0,m(fa,"WebChannel transport errored:",e),h.callOnClose(new I(S.UNAVAILABLE,"The operation could not be completed")))})),d(l.WebChannel.EventType.MESSAGE,(function(e){var t;if(!c){var n=e.data[0];b(!!n,"Got a webchannel message without data.");var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){m(fa,"WebChannel received error:",i);var o=i.status,s=function(e){var t=Fr[e];if(void 0!==t)return Ur(t)}(o),u=i.message;void 0===s&&(s=S.INTERNAL,u="Unknown error status: "+o+" with message "+i.message),c=!0,h.callOnClose(new I(s,u)),a.close()}else m(fa,"WebChannel received:",n),h.callOnMessage(n)}})),setTimeout((function(){h.callOnOpen()}),0),h},e.prototype.makeUrl=function(e){var t=pa[e];return b(void 0!==t,"Unknown REST mapping for: "+e),this.baseUrl+"/v1/projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents:"+t},e}(),ya=function(){function e(){this.emptyByteString="",this.base64Available="undefined"!=typeof atob}return Object.defineProperty(e.prototype,"document",{get:function(){return"undefined"!=typeof document?document:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"window",{get:function(){return"undefined"!=typeof window?window:null},enumerable:!0,configurable:!0}),e.prototype.loadConnection=function(e){return Promise.resolve(new ga(e))},e.prototype.newConnectivityMonitor=function(){return ha.isAvailable()?new ha:new la},e.prototype.newSerializer=function(e){return new Ti(e,{useProto3Json:!0})},e.prototype.formatJSON=function(e){return JSON.stringify(e)},e.prototype.atob=function(e){return atob(e)},e.prototype.btoa=function(e){return btoa(e)},e}();
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
w.setPlatform(new ya);var va="@firebase/firestore",ba="1.9.1";
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function wa(e){ca(e),e.registerVersion(va,ba)}wa(o),t.registerFirestore=wa}).call(this,n(17))},function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var u,c=[],l=!1,h=-1;function d(){l&&u&&(l=!1,u.length?c=u.concat(c):h=-1,c.length&&f())}function f(){if(!l){var e=s(d);l=!0;for(var t=c.length;t;){for(u=c,c=[];++h<t;)u&&u[h].run();h=-1,t=c.length}u=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function m(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new p(e,t)),1!==c.length||l||s(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"ErrorCode",(function(){return cr})),n.d(t,"EventType",(function(){return lr})),n.d(t,"WebChannel",(function(){return hr})),n.d(t,"XhrIo",(function(){return dr})),n.d(t,"createWebChannelTransport",(function(){return ur}));var r,i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{},o=o||{},a=i;function s(e){return"string"==typeof e}function u(e){return"number"==typeof e}function c(e,t){e=e.split("."),t=t||a;for(var n=0;n<e.length;n++)if(null==(t=t[e[n]]))return null;return t}function l(){}function h(e){var t=typeof e;if("object"==t){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return t;var n=Object.prototype.toString.call(e);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof e.length&&void 0!==e.splice&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==e.call&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==t&&void 0===e.call)return"object";return t}function d(e){return"array"==h(e)}function f(e){var t=h(e);return"array"==t||"object"==t&&"number"==typeof e.length}function p(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var m="closure_uid_"+(1e9*Math.random()>>>0),g=0;function y(e,t,n){return e.call.apply(e.bind,arguments)}function v(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function b(e,t,n){return(b=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?y:v).apply(null,arguments)}function w(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}var T=Date.now||function(){return+new Date};function S(e,t){function n(){}n.prototype=t.prototype,e.N=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.xb=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}function I(){this.j=this.j,this.i=this.i}I.prototype.j=!1,I.prototype.la=function(){if(!this.j&&(this.j=!0,this.G(),0))this[m]||(this[m]=++g)},I.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var E=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if(s(e))return s(t)&&1==t.length?e.indexOf(t,0):-1;for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},C=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i=s(e)?e.split(""):e,o=0;o<r;o++)o in i&&t.call(n,i[o],o,e)};function _(e){return Array.prototype.concat.apply([],arguments)}function D(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function k(e){return/^[\s\xa0]*$/.test(e)}var N,A=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function x(e,t){return-1!=e.indexOf(t)}function M(e,t){return e<t?-1:e>t?1:0}e:{var L=a.navigator;if(L){var P=L.userAgent;if(P){N=P;break e}}N=""}function O(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function R(e){var t,n={};for(t in e)n[t]=e[t];return n}var j="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function B(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var o=0;o<j.length;o++)n=j[o],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function F(e){return F[" "](e),e}F[" "]=l;var V,q,U=x(N,"Opera"),W=x(N,"Trident")||x(N,"MSIE"),z=x(N,"Edge"),K=z||W,G=x(N,"Gecko")&&!(x(N.toLowerCase(),"webkit")&&!x(N,"Edge"))&&!(x(N,"Trident")||x(N,"MSIE"))&&!x(N,"Edge"),Q=x(N.toLowerCase(),"webkit")&&!x(N,"Edge");function H(){var e=a.document;return e?e.documentMode:void 0}e:{var Y="",J=(q=N,G?/rv:([^\);]+)(\)|;)/.exec(q):z?/Edge\/([\d\.]+)/.exec(q):W?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(q):Q?/WebKit\/(\S+)/.exec(q):U?/(?:Version)[ \/]?(\S+)/.exec(q):void 0);if(J&&(Y=J?J[1]:""),W){var X=H();if(null!=X&&X>parseFloat(Y)){V=String(X);break e}}V=Y}var $,Z={};function ee(e){return function(e,t){var n=Z;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(){for(var t=0,n=A(String(V)).split("."),r=A(String(e)).split("."),i=Math.max(n.length,r.length),o=0;0==t&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;t=M(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||M(0==a[2].length,0==s[2].length)||M(a[2],s[2]),a=a[3],s=s[3]}while(0==t)}return 0<=t}))}var te=a.document;$=te&&W?H()||("CSS1Compat"==te.compatMode?parseInt(V,10):5):void 0;var ne=!W||9<=Number($),re=W&&!ee("9"),ie=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{a.addEventListener("test",l,t),a.removeEventListener("test",l,t)}catch(e){}return e}();function oe(e,t){this.type=e,this.a=this.target=t,this.Ia=!0}function ae(e,t){if(oe.call(this,e?e.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.a=t,t=e.relatedTarget){if(G){e:{try{F(t.nodeName);var i=!0;break e}catch(e){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=s(e.pointerType)?e.pointerType:se[e.pointerType]||"",this.c=e,e.defaultPrevented&&this.b()}}oe.prototype.b=function(){this.Ia=!1},S(ae,oe);var se={2:"touch",3:"pen",4:"mouse"};ae.prototype.b=function(){ae.N.b.call(this);var e=this.c;if(e.preventDefault)e.preventDefault();else if(e.returnValue=!1,re)try{(e.ctrlKey||112<=e.keyCode&&123>=e.keyCode)&&(e.keyCode=-1)}catch(e){}};var ue="closure_listenable_"+(1e6*Math.random()|0),ce=0;function le(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.da=i,this.key=++ce,this.X=this.Z=!1}function he(e){e.X=!0,e.listener=null,e.proxy=null,e.src=null,e.da=null}function de(e){this.src=e,this.a={},this.b=0}function fe(e,t){var n=t.type;if(n in e.a){var r,i=e.a[n],o=E(i,t);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(he(t),0==e.a[n].length&&(delete e.a[n],e.b--))}}function pe(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.X&&o.listener==t&&o.capture==!!n&&o.da==r)return i}return-1}de.prototype.add=function(e,t,n,r,i){var o=e.toString();(e=this.a[o])||(e=this.a[o]=[],this.b++);var a=pe(e,t,r,i);return-1<a?(t=e[a],n||(t.Z=!1)):((t=new le(t,this.src,o,!!r,i)).Z=n,e.push(t)),t};var me="closure_lm_"+(1e6*Math.random()|0),ge={};function ye(e,t,n,r,i){if(r&&r.once)return function e(t,n,r,i,o){if(d(n)){for(var a=0;a<n.length;a++)e(t,n[a],r,i,o);return null}return r=Ce(r),t&&t[ue]?t.Aa(n,r,p(i)?!!i.capture:!!i,o):ve(t,n,r,!0,i,o)}(e,t,n,r,i);if(d(t)){for(var o=0;o<t.length;o++)ye(e,t[o],n,r,i);return null}return n=Ce(n),e&&e[ue]?e.za(t,n,p(r)?!!r.capture:!!r,i):ve(e,t,n,!1,r,i)}function ve(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var a=p(i)?!!i.capture:!!i;if(a&&!ne)return null;var s=Ie(e);if(s||(e[me]=s=new de(e)),(n=s.add(t,n,r,a,o)).proxy)return n;if(r=function(){var e=Se,t=ne?function(n){return e.call(t.src,t.listener,n)}:function(n){if(!(n=e.call(t.src,t.listener,n)))return n};return t}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)ie||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(we(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function be(e){if(!u(e)&&e&&!e.X){var t=e.src;if(t&&t[ue])fe(t.c,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(we(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Ie(t))?(fe(n,e),0==n.b&&(n.src=null,t[me]=null)):he(e)}}}function we(e){return e in ge?ge[e]:ge[e]="on"+e}function Te(e,t){var n=e.listener,r=e.da||e.src;return e.Z&&be(e),n.call(r,t)}function Se(e,t){return!!e.X||(ne?Te(e,new ae(t,this)):Te(e,t=new ae(t||c("window.event"),this)))}function Ie(e){return(e=e[me])instanceof de?e:null}var Ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ce(e){return"function"==h(e)?e:(e[Ee]||(e[Ee]=function(t){return e.handleEvent(t)}),e[Ee])}function _e(){I.call(this),this.c=new de(this),this.J=this,this.B=null}function De(e,t,n,r){if(!(t=e.c.a[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var a=t[o];if(a&&!a.X&&a.capture==n){var s=a.listener,u=a.da||a.src;a.Z&&fe(e.c,a),i=!1!==s.call(u,r)&&i}}return i&&0!=r.Ia}S(_e,I),_e.prototype[ue]=!0,(r=_e.prototype).addEventListener=function(e,t,n,r){ye(this,e,t,n,r)},r.removeEventListener=function(e,t,n,r){!function e(t,n,r,i,o){if(d(n))for(var a=0;a<n.length;a++)e(t,n[a],r,i,o);else i=p(i)?!!i.capture:!!i,r=Ce(r),t&&t[ue]?(t=t.c,(n=String(n).toString())in t.a&&(-1<(r=pe(a=t.a[n],r,i,o))&&(he(a[r]),Array.prototype.splice.call(a,r,1),0==a.length&&(delete t.a[n],t.b--)))):t&&(t=Ie(t))&&(n=t.a[n.toString()],t=-1,n&&(t=pe(n,r,i,o)),(r=-1<t?n[t]:null)&&be(r))}(this,e,t,n,r)},r.dispatchEvent=function(e){var t,n=this.B;if(n)for(t=[];n;n=n.B)t.push(n);n=this.J;var r=e.type||e;if(s(e))e=new oe(e,n);else if(e instanceof oe)e.target=e.target||n;else{var i=e;B(e=new oe(r,n),i)}if(i=!0,t)for(var o=t.length-1;0<=o;o--){var a=e.a=t[o];i=De(a,r,!0,e)&&i}if(i=De(a=e.a=n,r,!0,e)&&i,i=De(a,r,!1,e)&&i,t)for(o=0;o<t.length;o++)i=De(a=e.a=t[o],r,!1,e)&&i;return i},r.G=function(){if(_e.N.G.call(this),this.c){var e,t=this.c;for(e in t.a){for(var n=t.a[e],r=0;r<n.length;r++)he(n[r]);delete t.a[e],t.b--}}this.B=null},r.za=function(e,t,n,r){return this.c.add(String(e),t,!1,n,r)},r.Aa=function(e,t,n,r){return this.c.add(String(e),t,!0,n,r)};var ke=a.JSON.stringify;function Ne(e,t){this.c=e,this.f=t,this.b=0,this.a=null}function Ae(){this.b=this.a=null}Ne.prototype.get=function(){if(0<this.b){this.b--;var e=this.a;this.a=e.next,e.next=null}else e=this.c();return e};var xe,Me=new Ne((function(){return new Pe}),(function(e){e.reset()}));function Le(){var e=Be,t=null;return e.a&&(t=e.a,e.a=e.a.next,e.a||(e.b=null),t.next=null),t}function Pe(){this.next=this.b=this.a=null}function Oe(e){a.setTimeout((function(){throw e}),0)}function Re(e,t){xe||function(){var e=a.Promise.resolve(void 0);xe=function(){e.then(Fe)}}(),je||(xe(),je=!0),Be.add(e,t)}Ae.prototype.add=function(e,t){var n=Me.get();n.set(e,t),this.b?this.b.next=n:this.a=n,this.b=n},Pe.prototype.set=function(e,t){this.a=e,this.b=t,this.next=null},Pe.prototype.reset=function(){this.next=this.b=this.a=null};var je=!1,Be=new Ae;function Fe(){for(var e;e=Le();){try{e.a.call(e.b)}catch(e){Oe(e)}var t=Me;t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}je=!1}function Ve(e,t){_e.call(this),this.b=e||1,this.a=t||a,this.f=b(this.fb,this),this.g=T()}function qe(e){e.ba=!1,e.L&&(e.a.clearTimeout(e.L),e.L=null)}function Ue(e,t,n){if("function"==h(e))n&&(e=b(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=b(e.handleEvent,e)}return 2147483647<Number(t)?-1:a.setTimeout(e,t||0)}function We(e,t,n){I.call(this),this.f=null!=n?b(e,n):e,this.c=t,this.b=b(this.$a,this),this.a=[]}function ze(e){e.U=Ue(e.b,e.c),e.f.apply(null,e.a)}function Ke(e){I.call(this),this.b=e,this.a={}}S(Ve,_e),(r=Ve.prototype).ba=!1,r.L=null,r.fb=function(){if(this.ba){var e=T()-this.g;0<e&&e<.8*this.b?this.L=this.a.setTimeout(this.f,this.b-e):(this.L&&(this.a.clearTimeout(this.L),this.L=null),this.dispatchEvent("tick"),this.ba&&(qe(this),this.start()))}},r.start=function(){this.ba=!0,this.L||(this.L=this.a.setTimeout(this.f,this.b),this.g=T())},r.G=function(){Ve.N.G.call(this),qe(this),delete this.a},S(We,I),(r=We.prototype).ea=!1,r.U=null,r.Ta=function(e){this.a=arguments,this.U?this.ea=!0:ze(this)},r.G=function(){We.N.G.call(this),this.U&&(a.clearTimeout(this.U),this.U=null,this.ea=!1,this.a=[])},r.$a=function(){this.U=null,this.ea&&(this.ea=!1,ze(this))},S(Ke,I);var Ge=[];function Qe(e,t,n,r){d(n)||(n&&(Ge[0]=n.toString()),n=Ge);for(var i=0;i<n.length;i++){var o=ye(t,n[i],r||e.handleEvent,!1,e.b||e);if(!o)break;e.a[o.key]=o}}function He(e){O(e.a,(function(e,t){this.a.hasOwnProperty(t)&&be(e)}),e),e.a={}}function Ye(){}Ke.prototype.G=function(){Ke.N.G.call(this),He(this)},Ke.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Je=new _e;function Xe(e){oe.call(this,"serverreachability",e)}function $e(e){Je.dispatchEvent(new Xe(Je,e))}function Ze(e){oe.call(this,"statevent",e)}function et(e){Je.dispatchEvent(new Ze(Je,e))}function tt(e){oe.call(this,"timingevent",e)}function nt(e,t){if("function"!=h(e))throw Error("Fn must not be null and must be a function");return a.setTimeout((function(){e()}),t)}S(Xe,oe),S(Ze,oe),S(tt,oe);var rt={NO_ERROR:0,gb:1,nb:2,mb:3,jb:4,lb:5,ob:6,La:7,TIMEOUT:8,rb:9},it={ib:"complete",vb:"success",Ma:"error",La:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",kb:"downloadprogress",wb:"uploadprogress"};function ot(){}function at(e){var t;return(t=e.a)||(t=e.a={}),t}function st(){}ot.prototype.a=null;var ut,ct={OPEN:"a",hb:"b",Ma:"c",qb:"d"};function lt(){oe.call(this,"d")}function ht(){oe.call(this,"c")}function dt(){}function ft(e,t,n){this.g=e,this.W=t,this.V=n||1,this.I=new Ke(this),this.O=pt,e=K?125:void 0,this.P=new Ve(e),this.h=null,this.b=!1,this.l=this.D=this.f=this.F=this.v=this.R=this.i=null,this.j=[],this.a=null,this.A=0,this.c=this.w=null,this.o=-1,this.m=!1,this.J=0,this.B=null,this.s=this.S=this.H=!1}S(lt,oe),S(ht,oe),S(dt,ot),ut=new dt;var pt=45e3,mt={},gt={};function yt(e,t,n){e.F=1,e.f=Ut(Ot(t)),e.l=n,e.H=!0,bt(e,null)}function vt(e,t,n,r){e.F=1,e.f=Ut(Ot(t)),e.l=null,e.H=n,bt(e,r)}function bt(e,t){e.v=T(),St(e),e.D=Ot(e.f),qt(e.D,"t",e.V),e.A=0,e.a=e.g.$(e.g.Y()?t:null),0<e.J&&(e.B=new We(b(e.Ja,e,e.a),e.J)),Qe(e.I,e.a,"readystatechange",e.cb),t=e.h?R(e.h):{},e.l?(e.w||(e.w="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.a.ca(e.D,e.w,e.l,t)):(e.w="GET",e.a.ca(e.D,e.w,null,t)),$e(1)}function wt(e,t,n){for(var r=!0;!e.m&&e.A<n.length;){var i=Tt(e,n);if(i==gt){4==t&&(e.c=4,et(14),r=!1);break}if(i==mt){e.c=4,et(15),r=!1;break}Dt(e,i)}4==t&&0==n.length&&(e.c=1,et(16),r=!1),e.b=e.b&&r,r||(_t(e),Ct(e))}function Tt(e,t){var n=e.A,r=t.indexOf("\n",n);return-1==r?gt:(n=Number(t.substring(n,r)),isNaN(n)?mt:(r+=1)+n>t.length?gt:(t=t.substr(r,n),e.A=r+n,t))}function St(e){e.R=T()+e.O,It(e,e.O)}function It(e,t){if(null!=e.i)throw Error("WatchDog timer not null");e.i=nt(b(e.ab,e),t)}function Et(e){e.i&&(a.clearTimeout(e.i),e.i=null)}function Ct(e){e.g.Ca()||e.m||e.g.na(e)}function _t(e){Et(e);var t=e.B;t&&"function"==typeof t.la&&t.la(),e.B=null,qe(e.P),He(e.I),e.a&&(t=e.a,e.a=null,t.abort(),t.la())}function Dt(e,t){try{e.g.Fa(e,t),$e(4)}catch(e){}}function kt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(f(e)||s(e))C(e,t,void 0);else{if(e.K&&"function"==typeof e.K)var n=e.K();else if(e.C&&"function"==typeof e.C)n=void 0;else if(f(e)||s(e)){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;i=(r=function(e){if(e.C&&"function"==typeof e.C)return e.C();if(s(e))return e.split("");if(f(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e)).length;for(var o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}}function Nt(e,t){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof Nt)for(n=e.K(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function At(e,t){Mt(e.b,t)&&(delete e.b[t],e.c--,e.a.length>2*e.c&&xt(e))}function xt(e){if(e.c!=e.a.length){for(var t=0,n=0;t<e.a.length;){var r=e.a[t];Mt(e.b,r)&&(e.a[n++]=r),t++}e.a.length=n}if(e.c!=e.a.length){var i={};for(n=t=0;t<e.a.length;)Mt(i,r=e.a[t])||(e.a[n++]=r,i[r]=1),t++;e.a.length=n}}function Mt(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(r=ft.prototype).setTimeout=function(e){this.O=e},r.cb=function(e){e=e.target;var t=this.B;t&&3==On(e)?t.Ta():this.Ja(e)},r.Ja=function(e){try{if(e==this.a)e:{var t=On(this.a),n=this.a.ya(),r=this.a.T();if(!(3>t||3==t&&!K&&!this.a.aa())){this.m||4!=t||7==n||$e(8==n||0>=r?3:2),Et(this);var i=this.a.T();this.o=i;var o=this.a.aa();if(this.b=200==i){if(this.S&&!this.s){t:{if(this.a){var a=Rn(this.a,"X-HTTP-Initial-Response");if(a&&!k(a)){var s=a;break t}}s=null}if(!s){this.b=!1,this.c=3,et(12),_t(this),Ct(this);break e}this.s=!0,Dt(this,s)}this.H?(wt(this,t,o),K&&this.b&&3==t&&(Qe(this.I,this.P,"tick",this.bb),this.P.start())):Dt(this,o),4==t&&_t(this),this.b&&!this.m&&(4==t?this.g.na(this):(this.b=!1,St(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.c=3,et(12)):(this.c=0,et(13)),_t(this),Ct(this)}}}catch(e){}},r.bb=function(){if(this.a){var e=On(this.a),t=this.a.aa();this.A<t.length&&(Et(this),wt(this,e,t),this.b&&4!=e&&St(this))}},r.cancel=function(){this.m=!0,_t(this)},r.ab=function(){this.i=null;var e=T();0<=e-this.R?(2!=this.F&&($e(3),et(17)),_t(this),this.c=2,Ct(this)):It(this,this.R-e)},(r=Nt.prototype).C=function(){xt(this);for(var e=[],t=0;t<this.a.length;t++)e.push(this.b[this.a[t]]);return e},r.K=function(){return xt(this),this.a.concat()},r.get=function(e,t){return Mt(this.b,e)?this.b[e]:t},r.set=function(e,t){Mt(this.b,e)||(this.c++,this.a.push(e)),this.b[e]=t},r.forEach=function(e,t){for(var n=this.K(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);e.call(t,o,i,this)}};var Lt=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Pt(e,t){var n;this.b=this.j=this.f="",this.i=null,this.g=this.a="",this.h=!1,e instanceof Pt?(this.h=void 0!==t?t:e.h,Rt(this,e.f),this.j=e.j,jt(this,e.b),Bt(this,e.i),this.a=e.a,Ft(this,nn(e.c)),this.g=e.g):e&&(n=String(e).match(Lt))?(this.h=!!t,Rt(this,n[1]||"",!0),this.j=Wt(n[2]||""),jt(this,n[3]||"",!0),Bt(this,n[4]),this.a=Wt(n[5]||"",!0),Ft(this,n[6]||"",!0),this.g=Wt(n[7]||"")):(this.h=!!t,this.c=new Xt(null,this.h))}function Ot(e){return new Pt(e)}function Rt(e,t,n){e.f=n?Wt(t,!0):t,e.f&&(e.f=e.f.replace(/:$/,""))}function jt(e,t,n){e.b=n?Wt(t,!0):t}function Bt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.i=t}else e.i=null}function Ft(e,t,n){t instanceof Xt?(e.c=t,function(e,t){t&&!e.f&&($t(e),e.c=null,e.a.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Zt(this,t),tn(this,n,e))}),e)),e.f=t}(e.c,e.h)):(n||(t=zt(t,Yt)),e.c=new Xt(t,e.h))}function Vt(e,t,n){e.c.set(t,n)}function qt(e,t,n){d(n)||(n=[String(n)]),tn(e.c,t,n)}function Ut(e){return Vt(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^T()).toString(36)),e}function Wt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function zt(e,t,n){return s(e)?(e=encodeURI(e).replace(t,Kt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Kt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Pt.prototype.toString=function(){var e=[],t=this.f;t&&e.push(zt(t,Gt,!0),":");var n=this.b;return(n||"file"==t)&&(e.push("//"),(t=this.j)&&e.push(zt(t,Gt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.i)&&e.push(":",String(n))),(n=this.a)&&(this.b&&"/"!=n.charAt(0)&&e.push("/"),e.push(zt(n,"/"==n.charAt(0)?Ht:Qt,!0))),(n=this.c.toString())&&e.push("?",n),(n=this.g)&&e.push("#",zt(n,Jt)),e.join("")},Pt.prototype.resolve=function(e){var t=Ot(this),n=!!e.f;n?Rt(t,e.f):n=!!e.j,n?t.j=e.j:n=!!e.b,n?jt(t,e.b):n=null!=e.i;var r=e.a;if(n)Bt(t,e.i);else if(n=!!e.a){if("/"!=r.charAt(0))if(this.b&&!this.a)r="/"+r;else{var i=t.a.lastIndexOf("/");-1!=i&&(r=t.a.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(x(i,"./")||x(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],a=0;a<i.length;){var s=i[a++];"."==s?r&&a==i.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&a==i.length&&o.push("")):(o.push(s),r=!0)}r=o.join("/")}else r=i}return n?t.a=r:n=""!==e.c.toString(),n?Ft(t,nn(e.c)):n=!!e.g,n&&(t.g=e.g),t};var Gt=/[#\/\?@]/g,Qt=/[#\?:]/g,Ht=/[#\?]/g,Yt=/[#\?@]/g,Jt=/#/g;function Xt(e,t){this.b=this.a=null,this.c=e||null,this.f=!!t}function $t(e){e.a||(e.a=new Nt,e.b=0,e.c&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.c,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Zt(e,t){$t(e),t=rn(e,t),Mt(e.a.b,t)&&(e.c=null,e.b-=e.a.get(t).length,At(e.a,t))}function en(e,t){return $t(e),t=rn(e,t),Mt(e.a.b,t)}function tn(e,t,n){Zt(e,t),0<n.length&&(e.c=null,e.a.set(rn(e,t),D(n)),e.b+=n.length)}function nn(e){var t=new Xt;return t.c=e.c,e.a&&(t.a=new Nt(e.a),t.b=e.b),t}function rn(e,t){return t=String(t),e.f&&(t=t.toLowerCase()),t}function on(e){this.a=e,this.b=this.h=null,this.g=!1,this.i=null,this.c=-1,this.l=this.f=null}function an(e){var t=e.a.F.a;if(null!=t)et(4),t?(et(10),Hn(e.a,e,!1)):(et(11),Hn(e.a,e,!0));else{e.b=new ft(e,void 0,void 0),e.b.h=e.h,t=Zn(t=e.a,t.Y()?e.f:null,e.i),et(4),qt(t,"TYPE","xmlhttp");var n=e.a.j,r=e.a.I;n&&r&&Vt(t,n,r),vt(e.b,t,!1,e.f)}}function sn(){this.a=this.b=null}function un(){this.a=new Nt}function cn(e){var t=typeof e;return"object"==t&&e||"function"==t?"o"+(e[m]||(e[m]=++g)):t.charAt(0)+e}function ln(e,t){this.b=e,this.a=t}function hn(e){this.g=e||dn,a.PerformanceNavigationTiming?e=0<(e=a.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(a.ka&&a.ka.Da&&a.ka.Da()&&a.ka.Da().yb),this.f=e?this.g:1,this.a=null,1<this.f&&(this.a=new un),this.b=null,this.c=[]}(r=Xt.prototype).add=function(e,t){$t(this),this.c=null,e=rn(this,e);var n=this.a.get(e);return n||this.a.set(e,n=[]),n.push(t),this.b+=1,this},r.forEach=function(e,t){$t(this),this.a.forEach((function(n,r){C(n,(function(n){e.call(t,n,r,this)}),this)}),this)},r.K=function(){$t(this);for(var e=this.a.C(),t=this.a.K(),n=[],r=0;r<t.length;r++)for(var i=e[r],o=0;o<i.length;o++)n.push(t[r]);return n},r.C=function(e){$t(this);var t=[];if(s(e))en(this,e)&&(t=_(t,this.a.get(rn(this,e))));else{e=this.a.C();for(var n=0;n<e.length;n++)t=_(t,e[n])}return t},r.set=function(e,t){return $t(this),this.c=null,en(this,e=rn(this,e))&&(this.b-=this.a.get(e).length),this.a.set(e,[t]),this.b+=1,this},r.get=function(e,t){return e&&0<(e=this.C(e)).length?String(e[0]):t},r.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var e=[],t=this.a.K(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.C(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),e.push(a)}}return this.c=e.join("&")},S((function(){}),(function(){})),(r=on.prototype).M=null,r.$=function(e){return this.a.$(e)},r.abort=function(){this.b&&(this.b.cancel(),this.b=null),this.c=-1},r.Ca=function(){return!1},r.Fa=function(e,t){if(this.c=e.o,0==this.M){if(!this.a.o&&(e=e.a)){var n=Rn(e,"X-Client-Wire-Protocol");this.l=n||null,this.a.j&&(e=Rn(e,"X-HTTP-Session-Id"))&&(this.a.I=e)}if(t){try{var r=this.a.ja.a.parse(t)}catch(e){return(t=this.a).m=this.c,void Xn(t,2)}this.f=r[0]}else(t=this.a).m=this.c,Xn(t,2)}else 1==this.M&&(this.g?et(6):"11111"==t?(et(5),this.g=!0,(!W||10<=Number($))&&(this.c=200,this.b.cancel(),et(11),Hn(this.a,this,!0))):(et(7),this.g=!1))},r.na=function(){if(this.c=this.b.o,this.b.b)0==this.M?(this.M=1,an(this)):1==this.M&&(this.g?(et(11),Hn(this.a,this,!0)):(et(10),Hn(this.a,this,!1)));else{0==this.M?et(8):1==this.M&&et(9);var e=this.a;e.m=this.c,Xn(e,2)}},r.Y=function(){return this.a.Y()},r.ma=function(){return this.a.ma()},un.prototype.add=function(e){this.a.set(cn(e),e)},un.prototype.C=function(){return this.a.C()};var dn=10;function fn(e,t){!e.a&&(x(t,"spdy")||x(t,"quic")||x(t,"h2"))&&(e.f=e.g,e.a=new un,e.b&&(yn(e,e.b),e.b=null))}function pn(e){return!!e.b||!!e.a&&e.a.a.c>=e.f}function mn(e){return e.b?1:e.a?e.a.a.c:0}function gn(e,t){return e.b?e=e.b==t:e.a?(t=cn(t),e=Mt(e.a.a.b,t)):e=!1,e}function yn(e,t){e.a?e.a.add(t):e.b=t}function vn(e,t){var n;e.b&&e.b==t?e.b=null:((n=e.a)&&(n=cn(t),n=Mt(e.a.a.b,n)),n&&At(e.a.a,cn(t)))}function bn(e){if(null!=e.b)return e.c.concat(e.b.j);if(null!=e.a&&0!=e.a.a.c){var t=e.c;return C(e.a.C(),(function(e){t=t.concat(e.j)})),t}return D(e.c)}function wn(){}function Tn(){this.a=new wn}function Sn(e,t,n){var r=n||"";try{kt(e,(function(e,n){var i=e;p(e)&&(i=ke(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(e){throw t.push(r+"type="+encodeURIComponent("_badmap")),e}}function In(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(e){}}hn.prototype.cancel=function(){this.c=bn(this),this.b?(this.b.cancel(),this.b=null):this.a&&0!=this.a.a.c&&(C(this.a.C(),(function(e){e.cancel()})),function(e){e.b={},e.a.length=0,e.c=0}(this.a.a))},wn.prototype.stringify=function(e){return a.JSON.stringify(e,void 0)},wn.prototype.parse=function(e){return a.JSON.parse(e,void 0)};var En=a.JSON.parse;function Cn(e){_e.call(this),this.headers=new Nt,this.H=e||null,this.b=!1,this.s=this.a=null,this.A="",this.h=0,this.f="",this.g=this.w=this.l=this.v=!1,this.o=0,this.m=null,this.I=_n,this.D=this.F=!1}S(Cn,_e);var _n="",Dn=/^https?$/i,kn=["POST","PUT"];function Nn(e){return"content-type"==e.toLowerCase()}function An(e,t){e.b=!1,e.a&&(e.g=!0,e.a.abort(),e.g=!1),e.f=t,e.h=5,xn(e),Ln(e)}function xn(e){e.v||(e.v=!0,e.dispatchEvent("complete"),e.dispatchEvent("error"))}function Mn(e){if(e.b&&void 0!==o&&(!e.s[1]||4!=On(e)||2!=e.T()))if(e.l&&4==On(e))Ue(e.Ea,0,e);else if(e.dispatchEvent("readystatechange"),4==On(e)){e.b=!1;try{var t,n=e.T();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var s=String(e.A).match(Lt)[1]||null;if(!s&&a.self&&a.self.location){var u=a.self.location.protocol;s=u.substr(0,u.length-1)}i=!Dn.test(s?s.toLowerCase():"")}t=i}if(t)e.dispatchEvent("complete"),e.dispatchEvent("success");else{e.h=6;try{var c=2<On(e)?e.a.statusText:""}catch(e){c=""}e.f=c+" ["+e.T()+"]",xn(e)}}finally{Ln(e)}}}function Ln(e,t){if(e.a){Pn(e);var n=e.a,r=e.s[0]?l:null;e.a=null,e.s=null,t||e.dispatchEvent("ready");try{n.onreadystatechange=r}catch(e){}}}function Pn(e){e.a&&e.D&&(e.a.ontimeout=null),e.m&&(a.clearTimeout(e.m),e.m=null)}function On(e){return e.a?e.a.readyState:0}function Rn(e,t){return e.a?e.a.getResponseHeader(t):null}function jn(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}if(r)return e;if(n=function(e){var t="";return O(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),s(e)){if(t=encodeURIComponent(String(t)),t+=n=null!=n?"="+encodeURIComponent(String(n)):""){if(0>(n=e.indexOf("#"))&&(n=e.length),0>(r=e.indexOf("?"))||r>n){r=n;var i=""}else i=e.substring(r+1,n);n=(e=[e.substr(0,r),i,e.substr(n)])[1],e[1]=t?n?n+"&"+t:t:n,e=e[0]+(e[1]?"?"+e[1]:"")+e[2]}return e}return Vt(e,t,n),e}function Bn(e){this.f=[],this.F=new sn,this.ga=this.pa=this.B=this.ha=this.a=this.I=this.j=this.V=this.g=this.J=this.i=null,this.Qa=this.P=0,this.Oa=!!c("internalChannelParams.failFast",e),this.ia=this.w=this.s=this.l=this.h=this.c=null,this.oa=!0,this.m=this.ra=this.O=-1,this.S=this.v=this.A=0,this.Na=c("internalChannelParams.baseRetryDelayMs",e)||5e3,this.Ra=c("internalChannelParams.retryDelaySeedMs",e)||1e4,this.Pa=c("internalChannelParams.forwardChannelMaxRetries",e)||2,this.qa=c("internalChannelParams.forwardChannelRequestTimeoutMs",e)||2e4,this.Ka=e&&e.zb||void 0,this.D=void 0,this.R=e&&e.supportsCrossDomainXhr||!1,this.H="",this.b=new hn(e&&e.concurrentRequestLimit),this.ja=new Tn,this.o=!e||void 0===e.backgroundChannelTest||e.backgroundChannelTest,(this.W=e&&e.fastHandshake||!1)&&!this.o&&(this.o=!0),e&&e.forceLongPolling&&(this.oa=!1),this.fa=void 0}function Fn(e){if(Vn(e),3==e.u){var t=e.P++,n=Ot(e.B);Vt(n,"SID",e.H),Vt(n,"RID",t),Vt(n,"TYPE","terminate"),zn(e,n),(t=new ft(e,t,void 0)).F=2,t.f=Ut(Ot(n)),n=!1,a.navigator&&a.navigator.sendBeacon&&(n=a.navigator.sendBeacon(t.f.toString(),"")),!n&&a.Image&&((new Image).src=t.f,n=!0),n||(t.a=t.g.$(null),t.a.ca(t.f)),t.v=T(),St(t)}$n(e)}function Vn(e){e.w&&(e.w.abort(),e.w=null),e.a&&(e.a.cancel(),e.a=null),e.l&&(a.clearTimeout(e.l),e.l=null),Yn(e),e.b.cancel(),e.h&&(u(e.h)&&a.clearTimeout(e.h),e.h=null)}function qn(e,t){e.f.push(new ln(e.Qa++,t)),3==e.u&&Un(e)}function Un(e){pn(e.b)||e.h||(e.h=!0,Re(e.Ha,e),e.A=0)}function Wn(e,t){var n;n=t?t.W:e.P++;var r=Ot(e.B);Vt(r,"SID",e.H),Vt(r,"RID",n),Vt(r,"AID",e.O),zn(e,r),e.g&&e.i&&jn(r,e.g,e.i),n=new ft(e,n,e.A+1),null===e.g&&(n.h=e.i),t&&(e.f=t.j.concat(e.f)),t=Kn(e,n,1e3),n.setTimeout(Math.round(.5*e.qa)+Math.round(.5*e.qa*Math.random())),yn(e.b,n),yt(n,r,t)}function zn(e,t){e.c&&kt({},(function(e,n){Vt(t,n,e)}))}function Kn(e,t,n){n=Math.min(e.f.length,n);var r=e.c?b(e.c.Sa,e.c,e):null;e:for(var i=e.f,o=-1;;){var a=["count="+n];-1==o?0<n?(o=i[0].b,a.push("ofs="+o)):o=0:a.push("ofs="+o);for(var s=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),s=!1;else try{Sn(l,a,"req"+c+"_")}catch(e){r&&r(l)}}if(s){r=a.join("&");break e}}return e=e.f.splice(0,n),t.j=e,r}function Gn(e){e.a||e.l||(e.S=1,Re(e.Ga,e),e.v=0)}function Qn(e){return!(e.a||e.l||3<=e.v)&&(e.S++,e.l=nt(b(e.Ga,e),Jn(e,e.v)),e.v++,!0)}function Hn(e,t,n){var r=t.l;r&&fn(e.b,r),e.ia=e.oa&&n,e.m=t.c,e.B=Zn(e,null,e.ha),Un(e)}function Yn(e){null!=e.s&&(a.clearTimeout(e.s),e.s=null)}function Jn(e,t){var n=e.Na+Math.floor(Math.random()*e.Ra);return e.ma()||(n*=2),n*t}function Xn(e,t){if(2==t){var n=null;e.c&&(n=null);var r=b(e.eb,e);n||(n=new Pt("//www.google.com/images/cleardot.gif"),a.location&&"http"==a.location.protocol||Rt(n,"https"),Ut(n)),function(e,t){var n=new Ye;if(a.Image){var r=new Image;r.onload=w(In,n,r,"TestLoadImage: loaded",!0,t),r.onerror=w(In,n,r,"TestLoadImage: error",!1,t),r.onabort=w(In,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=w(In,n,r,"TestLoadImage: timeout",!1,t),a.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else et(2);e.u=0,e.c&&e.c.ta(t),$n(e),Vn(e)}function $n(e){e.u=0,e.m=-1,e.c&&(0==bn(e.b).length&&0==e.f.length||(e.b.c.length=0,D(e.f),e.f.length=0),e.c.sa())}function Zn(e,t,n){var r=function(e){return e instanceof Pt?Ot(e):new Pt(e,void 0)}(n);if(""!=r.b)t&&jt(r,t+"."+r.b),Bt(r,r.i);else{var i,o=a.location;i=t?t+"."+o.hostname:o.hostname,r=function(e,t,n,r){var i=new Pt(null,void 0);return e&&Rt(i,e),t&&jt(i,t),n&&Bt(i,n),r&&(i.a=r),i}(o.protocol,i,+o.port,n)}return e.V&&O(e.V,(function(e,t){Vt(r,t,e)})),t=e.j,n=e.I,t&&n&&Vt(r,t,n),Vt(r,"VER",e.wa),zn(e,r),r}function er(){}function tr(){if(W&&!(10<=Number($)))throw Error("Environmental error: no available transport.")}function nr(e,t){_e.call(this),this.a=new Bn(t),this.g=e,this.m=t&&t.testUrl?t.testUrl:function(e){for(var t=arguments[0],n=1;n<arguments.length;n++){var r,i=arguments[n];if(0==i.lastIndexOf("/",0))t=i;else(r=""==t)||(r=0<=(r=t.length-1)&&t.indexOf("/",r)==r),t+=r?i:"/"+i}return t}(this.g,"test"),this.b=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.a.i=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.xa&&(e?e["X-WebChannel-Client-Profile"]=t.xa:e={"X-WebChannel-Client-Profile":t.xa}),this.a.J=e,(e=t&&t.httpHeadersOverwriteParam)&&!k(e)&&(this.a.g=e),this.l=t&&t.supportsCrossDomainXhr||!1,this.h=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!k(t)&&(this.a.j=t,null!==(e=this.b)&&t in e&&(t in(e=this.b)&&delete e[t])),this.f=new or(this)}function rr(e){lt.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.c=e)?(e=this.c,this.data=null!==t&&e in t?t[e]:void 0):this.data=t}else this.data=e}function ir(){ht.call(this),this.status=1}function or(e){this.a=e}(r=Cn.prototype).ca=function(e,t,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.A+"; newUri="+e);t=t?t.toUpperCase():"GET",this.A=e,this.f="",this.h=0,this.v=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?at(this.H):at(ut),this.a.onreadystatechange=b(this.Ea,this);try{this.w=!0,this.a.open(t,String(e),!0),this.w=!1}catch(e){return void An(this,e)}e=n||"";var i=new Nt(this.headers);r&&kt(r,(function(e,t){i.set(t,e)})),r=function(e){e:{for(var t=Nn,n=e.length,r=s(e)?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:s(e)?e.charAt(t):e[t]}(i.K()),n=a.FormData&&e instanceof a.FormData,!(0<=E(kn,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.a.setRequestHeader(t,e)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{Pn(this),0<this.o&&((this.D=function(e){return W&&ee(9)&&u(e.timeout)&&void 0!==e.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=b(this.Ba,this)):this.m=Ue(this.Ba,this.o,this)),this.l=!0,this.a.send(e),this.l=!1}catch(e){An(this,e)}},r.Ba=function(){void 0!==o&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,this.dispatchEvent("timeout"),this.abort(8))},r.abort=function(e){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=e||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Ln(this))},r.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Ln(this,!0)),Cn.N.G.call(this)},r.Ea=function(){this.j||(this.w||this.l||this.g?Mn(this):this.Za())},r.Za=function(){Mn(this)},r.T=function(){try{return 2<On(this)?this.a.status:-1}catch(e){return-1}},r.aa=function(){try{return this.a?this.a.responseText:""}catch(e){return""}},r.Ua=function(e){if(this.a){var t=this.a.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),En(t)}},r.ya=function(){return this.h},r.Xa=function(){return s(this.f)?this.f:String(this.f)},(r=Bn.prototype).wa=8,r.u=1,r.Ca=function(){return 0==this.u},r.Ha=function(e){if(this.h)if(this.h=null,1==this.u){if(!e){this.P=Math.floor(1e5*Math.random());var t,n=new ft(this,e=this.P++,void 0),r=this.i;if(this.J&&(r?B(r=R(r),this.J):r=this.J),null===this.g&&(n.h=r),this.W)e:{for(var i=t=0;i<this.f.length;i++){var o=this.f[i];if(void 0===(o="__data__"in o.a&&s(o=o.a.__data__)?o.length:void 0))break;if(4096<(t+=o)){t=i;break e}if(4096===t||i===this.f.length-1){t=i+1;break e}}t=1e3}else t=1e3;t=Kn(this,n,t),Vt(i=Ot(this.B),"RID",e),Vt(i,"CVER",22),this.o&&this.j&&Vt(i,"X-HTTP-Session-Id",this.j),zn(this,i),this.g&&r&&jn(i,this.g,r),yn(this.b,n),this.W?(Vt(i,"$req",t),Vt(i,"SID","null"),n.S=!0,yt(n,i,null)):yt(n,i,t),this.u=2}}else 3==this.u&&(e?Wn(this,e):0==this.f.length||pn(this.b)||Wn(this))},r.Ga=function(){this.l=null,this.a=new ft(this,"rpc",this.S),null===this.g&&(this.a.h=this.i),this.a.J=0;var e=Ot(this.pa);Vt(e,"RID","rpc"),Vt(e,"SID",this.H),Vt(e,"CI",this.ia?"0":"1"),Vt(e,"AID",this.O),zn(this,e),Vt(e,"TYPE","xmlhttp"),this.g&&this.i&&jn(e,this.g,this.i),this.D&&this.a.setTimeout(this.D),vt(this.a,e,!0,this.ga)},r.Fa=function(e,t){if(0!=this.u&&(this.a==e||gn(this.b,e)))if(this.m=e.o,!e.s&&gn(this.b,e)&&3==this.u){try{var n=this.ja.a.parse(t)}catch(e){n=null}if(d(n)&&3==n.length){if(0==(t=n)[0]){e:if(!this.l){if(this.a){if(!(this.a.v+3e3<e.v))break e;Yn(this),this.a.cancel(),this.a=null}Qn(this),et(18)}}else this.ra=t[1],0<this.ra-this.O&&37500>t[2]&&this.ia&&0==this.v&&!this.s&&(this.s=nt(b(this.Ya,this),6e3));if(1>=mn(this.b)&&this.fa){try{this.fa()}catch(e){}this.fa=void 0}}else Xn(this,11)}else if((e.s||this.a==e)&&Yn(this),!k(t))for(t=n=this.ja.a.parse(t),n=0;n<t.length;n++){var r=t[n];if(this.O=r[0],r=r[1],2==this.u)if("c"==r[0]){this.H=r[1],this.ga=r[2];var i=r[3];null!=i&&(this.wa=i),null!=(r=r[5])&&u(r)&&0<r&&(this.D=1.5*r),this.o&&(r=e.a)&&((i=Rn(r,"X-Client-Wire-Protocol"))&&fn(this.b,i),this.j&&(r=Rn(r,"X-HTTP-Session-Id")))&&(this.I=r,Vt(this.B,this.j,r)),this.u=3,this.c&&this.c.va(),r=e,this.pa=Zn(this,this.Y()?this.ga:null,this.ha),r.s?(vn(this.b,r),(i=this.D)&&r.setTimeout(i),r.i&&(Et(r),St(r)),this.a=r):Gn(this),0<this.f.length&&Un(this)}else"stop"!=r[0]&&"close"!=r[0]||Xn(this,7);else 3==this.u&&("stop"==r[0]||"close"==r[0]?"stop"==r[0]?Xn(this,7):Fn(this):"noop"!=r[0]&&this.c&&this.c.ua(r),this.v=0)}},r.Ya=function(){null!=this.s&&(this.s=null,this.a.cancel(),this.a=null,Qn(this),et(19))},r.na=function(e){var t=null;if(this.a==e){Yn(this),this.a=null;var n=2}else{if(!gn(this.b,e))return;t=e.j,vn(this.b,e),n=1}if(this.m=e.o,0!=this.u)if(e.b)1==n?(t=T()-e.v,Je.dispatchEvent(new tt(Je,e.l?e.l.length:0,t,this.A)),Un(this)):Gn(this);else{var r=e.c;if(3==r||0==r&&0<this.m||!(1==n&&function(e,t){return!(mn(e.b)>=e.b.f-(e.h?1:0))&&(e.h?(e.f=t.j.concat(e.f),!0):!(1==e.u||2==e.u||e.A>=(e.Oa?0:e.Pa))&&(e.h=nt(b(e.Ha,e,t),Jn(e,e.A)),e.A++,!0))}(this,e)||2==n&&Qn(this)))switch(t&&0<t.length&&(e=this.b,e.c=e.c.concat(t)),r){case 1:Xn(this,5);break;case 4:Xn(this,10);break;case 3:Xn(this,6);break;default:Xn(this,2)}}},r.eb=function(e){et(e?2:1)},r.$=function(e){if(e&&!this.R)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Cn(this.Ka)).F=this.R,e},r.ma=function(){return!!this.c&&!0},r.Y=function(){return this.R},(r=er.prototype).va=function(){},r.ua=function(){},r.ta=function(){},r.sa=function(){},r.Sa=function(){},tr.prototype.a=function(e,t){return new nr(e,t)},S(nr,_e),(r=nr.prototype).addEventListener=function(e,t,n,r){nr.N.addEventListener.call(this,e,t,n,r)},r.removeEventListener=function(e,t,n,r){nr.N.removeEventListener.call(this,e,t,n,r)},r.Va=function(){this.a.c=this.f,this.l&&(this.a.R=!0);var e=this.a,t=this.m,n=this.g,r=this.b||void 0;et(0),e.ha=n,e.V=r||{},e.o&&(e.F.b=[],e.F.a=!1),e.w=new on(e),null===e.g&&(e.w.h=e.i),n=t,e.g&&e.i&&(n=jn(t,e.g,e.i)),(e=e.w).i=n,t=Zn(e.a,null,e.i),et(3),null!=(n=e.a.F.b)?(e.f=n[0],e.M=1,an(e)):(qt(t,"MODE","init"),!e.a.o&&e.a.j&&qt(t,"X-HTTP-Session-Id",e.a.j),e.b=new ft(e,void 0,void 0),e.b.h=e.h,vt(e.b,t,!1,null),e.M=0)},r.close=function(){Fn(this.a)},r.Wa=function(e){if(s(e)){var t={};t.__data__=e,qn(this.a,t)}else this.h?((t={}).__data__=ke(e),qn(this.a,t)):qn(this.a,e)},r.G=function(){this.a.c=null,delete this.f,Fn(this.a),delete this.a,nr.N.G.call(this)},S(rr,lt),S(ir,ht),S(or,er),or.prototype.va=function(){this.a.dispatchEvent("a")},or.prototype.ua=function(e){this.a.dispatchEvent(new rr(e))},or.prototype.ta=function(e){this.a.dispatchEvent(new ir(e))},or.prototype.sa=function(){this.a.dispatchEvent("b")};var ar=w((function(e,t){function n(){}n.prototype=e.prototype;var r=new n;return e.apply(r,Array.prototype.slice.call(arguments,1)),r}),tr);tr.prototype.createWebChannel=tr.prototype.a,nr.prototype.send=nr.prototype.Wa,nr.prototype.open=nr.prototype.Va,nr.prototype.close=nr.prototype.close,rt.NO_ERROR=0,rt.TIMEOUT=8,rt.HTTP_ERROR=6,it.COMPLETE="complete",st.EventType=ct,ct.OPEN="a",ct.CLOSE="b",ct.ERROR="c",ct.MESSAGE="d",_e.prototype.listen=_e.prototype.za,Cn.prototype.listenOnce=Cn.prototype.Aa,Cn.prototype.getLastError=Cn.prototype.Xa,Cn.prototype.getLastErrorCode=Cn.prototype.ya,Cn.prototype.getStatus=Cn.prototype.T,Cn.prototype.getResponseJson=Cn.prototype.Ua,Cn.prototype.getResponseText=Cn.prototype.aa,Cn.prototype.send=Cn.prototype.ca;var sr={createWebChannelTransport:ar,ErrorCode:rt,EventType:it,WebChannel:st,XhrIo:Cn},ur=sr.createWebChannelTransport,cr=sr.ErrorCode,lr=sr.EventType,hr=sr.WebChannel,dr=sr.XhrIo;t.default=sr}.call(this,n(5))},function(e,t,n){"use strict";n.r(t);var r,i;n(8);!function(e){e[e.Nothing=0]="Nothing",e[e.Intersect=1]="Intersect",e[e.Overlap=2]="Overlap"}(r||(r={})),function(e){e[e.Disjoint=0]="Disjoint",e[e.Match=1]="Match",e[e.Intersect=2]="Intersect",e[e.AInsideB=3]="AInsideB",e[e.BInsideA=4]="BInsideA",e[e.Tangent=5]="Tangent"}(i||(i={}));var o,a=function(e,t,n){void 0===t&&(t=void 0),void 0===n&&(n=void 0),this.type=e,this.intersection=t,this.overlap=n},s=function(){function e(){}return e.ptsDistance=function(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))},e.lineMiddlePt=function(e){return{x:(e[0].x+e[1].x)/2,y:(e[0].y+e[1].y)/2}},e.areLinesEqual=function(e,t){return this.arePointsEqual(e[0],t[0])&&this.arePointsEqual(e[1],t[1])||this.arePointsEqual(e[0],t[1])&&this.arePointsEqual(e[1],t[0])},e.arePointsEqual=function(e,t){return e.x===t.x&&e.y===t.y},e.getPointsAround=function(e,t){for(var n=2*t,r=e.x+t,i=e.y+t,o=[],a=0;a<n;a++)o.push({x:r,y:i-=1});for(a=0;a<n;a++)o.push({x:r-=1,y:i});for(a=0;a<n;a++)o.push({x:r,y:i+=1});for(a=0;a<n;a++)o.push({x:r+=1,y:i});return o},e}(),u=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r},c=function(){function e(){}return e.readInputFile=function(e){return new Promise((function(t,n){var r=new FileReader;r.readAsText(e,"UTF-8"),r.onload=function(){t(r.result)},r.onerror=function(){console.log("Error reading the file.")}}))},e.getUrlParams=function(e){var t={},n=document.createElement("a");n.href=e;for(var r=n.search.substring(1).split("&"),i=0;i<r.length;i++){var o=r[i].split("=");t[o[0]]=decodeURIComponent(o[1])}return t},e.emptyNode=function(e){for(;e.firstChild&&e.removeChild(e.firstChild););},e.createBBox=function(e,t,n){void 0===t&&(t=5),void 0===n&&(n=5);var r=document.createElementNS("http://www.w3.org/2000/svg","rect");return r.setAttribute("x",(e.getBBox().x-t).toString()),r.setAttribute("y",(e.getBBox().y-t).toString()),r.setAttribute("width",(e.getBBox().width+2*t).toString()),r.setAttribute("height",(e.getBBox().height+2*t).toString()),r.setAttribute("rx",n.toString()),r.setAttribute("ry",n.toString()),r},e.createBBox2=function(e,t){return void 0===t&&(t=0),0!==t?{x:e.getBBox().x-t,y:e.getBBox().y-t,width:e.getBBox().width+2*t,height:e.getBBox().height+2*t}:e.getBBox()},e.getRelativeCoords=function(e,t){var n=t.createSVGPoint();return n.x=e.clientX,n.y=e.clientY,n.matrixTransform(t.getScreenCTM().inverse())},e.getViewportRelativeCoords=function(e){return{x:e.clientX,y:e.clientY}},e.uuidv4=function(){return(1e7.toString()+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(function(e){return(Number(e)^crypto.getRandomValues(new Uint8Array(1))[0]&15>>Number(e)/4).toString(16)}))},e.isObjectEmpty=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},e.getRectSegments=function(e){var t={x:e.x,y:e.y},n={x:e.x+e.width,y:e.y},r={x:e.x+e.width,y:e.y+e.height},i={x:e.x,y:e.y+e.height};return[[t,n],[n,r],[r,i],[i,t]]},e.isPtInRect=function(e,t,n){return void 0===n&&(n=!0),n?t.x>=e.x&&t.x<=e.x+e.width&&t.y>=e.y&&t.y<=e.y+e.height:t.x>e.x&&t.x<e.x+e.width&&t.y>e.y&&t.y<e.y+e.height},e.isLineInRect=function(e,t){return this.isPtInRect(t,e[0])&&this.isPtInRect(t,e[1])},e.isNumBetween=function(e,t,n,r){return void 0===r&&(r=!0),r?e>=Math.min(t,n)&&e<=Math.max(t,n):e>Math.min(t,n)&&e<Math.max(t,n)},e.isLineHorizontal=function(e){return e[0].y===e[1].y},e.isLineVertical=function(e){return e[0].x===e[1].x},e.sortPtsByDistance=function(e,t,n){void 0===t&&(t=void 0),void 0===n&&(n=!1);var r=void 0!==t?t:e[0],i=e.sort((function(e,t){return s.ptsDistance(r,e)<s.ptsDistance(r,t)?-1:s.ptsDistance(r,e)>s.ptsDistance(r,t)?1:0}));return void 0!==t&&!0===n?u([t],i):i},e.linesBetweenPts=function(e){if(e.length>1){for(var t=[],n=0;n<e.length-1;n++)t.push([e[n],e[n+1]]);return t}return null},e.rectRectRelationship=function(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height?i.Match:this.isPtInRect(t,{x:e.x,y:e.y})&&this.isPtInRect(t,{x:e.x+e.width,y:e.y})&&this.isPtInRect(t,{x:e.x+e.width,y:e.y+e.height})&&this.isPtInRect(t,{x:e.x,y:e.y+e.height})?i.AInsideB:this.isPtInRect(e,{x:t.x,y:t.y})&&this.isPtInRect(e,{x:t.x+t.width,y:t.y})&&this.isPtInRect(e,{x:t.x+t.width,y:t.y+t.height})&&this.isPtInRect(e,{x:t.x,y:t.y+t.height})?i.BInsideA:this.isPtInRect(t,{x:e.x,y:e.y},!1)||this.isPtInRect(t,{x:e.x+e.width,y:e.y},!1)||this.isPtInRect(t,{x:e.x+e.width,y:e.y+e.height},!1)||this.isPtInRect(t,{x:e.x,y:e.y+e.height},!1)||this.isPtInRect(e,{x:t.x,y:t.y},!1)||this.isPtInRect(e,{x:t.x+t.width,y:t.y},!1)||this.isPtInRect(e,{x:t.x+t.width,y:t.y+t.height},!1)||this.isPtInRect(e,{x:t.x,y:t.y+t.height},!1)||this.isNumBetween(e.y,t.y,t.y+t.height,!1)&&e.x<=t.x&&e.x+e.width>=t.x+t.width||this.isNumBetween(t.y,e.y,e.y+e.height,!1)&&t.x<=e.x&&t.x+t.width>=e.x+e.width?i.Intersect:this.isPtInRect(t,{x:e.x,y:e.y})||this.isPtInRect(t,{x:e.x+e.width,y:e.y})||this.isPtInRect(t,{x:e.x+e.width,y:e.y+e.height})||this.isPtInRect(t,{x:e.x,y:e.y+e.height})||this.isPtInRect(e,{x:t.x,y:t.y})||this.isPtInRect(e,{x:t.x+t.width,y:t.y})||this.isPtInRect(e,{x:t.x+t.width,y:t.y+t.height})||this.isPtInRect(e,{x:t.x,y:t.y+t.height})?i.Tangent:i.Disjoint},e.getOrthoLineLineRelationship=function(e,t){if(this.isLineHorizontal(e)&&this.isLineVertical(t))return this.isNumBetween(e[0].y,t[0].y,t[1].y)&&this.isNumBetween(t[0].x,e[0].x,e[1].x)?new a(r.Intersect,{x:t[0].x,y:e[0].y}):new a(r.Nothing);if(this.isLineHorizontal(t)&&this.isLineVertical(e))return this.isNumBetween(t[0].y,e[0].y,e[1].y)&&this.isNumBetween(e[0].x,t[0].x,t[1].x)?new a(r.Intersect,{x:e[0].x,y:t[0].y}):new a(r.Nothing);if(this.isLineHorizontal(e)&&this.isLineHorizontal(t)){if(e[0].y===t[0].y){var n=Math.min(Math.max(e[0].x,e[1].x),Math.max(t[0].x,t[1].x)),i=Math.max(Math.min(e[0].x,e[1].x),Math.min(t[0].x,t[1].x));return n>=i?new a(r.Overlap,void 0,[{x:n,y:e[0].y},{x:i,y:e[0].y}]):new a(r.Nothing)}return new a(r.Nothing)}if(this.isLineVertical(e)&&this.isLineVertical(t)){if(e[0].x===t[0].x){var o=Math.min(Math.max(e[0].y,e[1].y),Math.max(t[0].y,t[1].y)),s=Math.max(Math.min(e[0].y,e[1].y),Math.min(t[0].y,t[1].y));return o>=s?new a(r.Overlap,void 0,[{x:e[0].x,y:o},{x:e[0].x,y:s}]):new a(r.Nothing)}return new a(r.Nothing)}return new a(r.Nothing)},e.rectanglesSilhouette=function(e){for(var t=[],n=0;n<e.length;n++)t.push(this.getRectSegments(e[n]));var o=[],a=[];for(n=0;n<e.length;n++){for(var c=this.getRectSegments(e[n]),l=function(o){if(o!=n){var l=[],d=h.rectRectRelationship(e[o],e[n]);if(d===i.BInsideA||n>o&&d===i.Match)return c.length=0,"break";if(d===i.Intersect||d===i.Tangent){for(var f=[],p=0;p<c.length;p++){var m=[],g=c[p];if(!h.isLineInRect(g,e[o])){for(var y=0;y<t[o].length;y++){var v=t[o][y],b=h.getOrthoLineLineRelationship(g,v);b.type===r.Intersect?b.intersection&&m.push(b.intersection):b.type===r.Overlap&&b.overlap&&f.push(b.overlap)}if(m.length>0)for(var w=h.sortPtsByDistance(m,c[p][0],!0),T=h.linesBetweenPts(u(w,[c[p][1]])),S=0;S<T.length;S++)h.isPtInRect(e[o],s.lineMiddlePt(T[S]))||l.push(T[S]);else l.push(c[p])}}if(f.length>0&&d!==i.Tangent)for(var I=function(e){a.find((function(t){return s.areLinesEqual(t,f[e])}))||a.push(f[e])},E=0;E<f.length;E++)I(E);c=l}}},h=this,d=0;d<e.length;d++){if("break"===l(d))break}c.length>0&&o.push.apply(o,c)}return a.length>0&&o.push.apply(o,a),o},e.svgPathFromLines=function(e){for(var t=document.createElementNS("http://www.w3.org/2000/svg","path"),n=[],r=0;r<e.length;r++)n.push("M"+e[r][0].x.toFixed(3)+","+e[r][0].y.toFixed(3)+" "+e[r][1].x.toFixed(3)+","+e[r][1].y.toFixed(3));return t.setAttribute("d",n.join("")),t},e}(),l=function(){function e(e,t){this.SVGWIDTH=500,this.ZOOMSPEED=1.25,this.allowPanning=!1,this.name=e,this.id=t,this.content,this.zoom=this.zoom.bind(this)}return e.prototype.setContent=function(e){var t=this;this.content=document.createElement("div");var n=new DOMParser;this.svgCanvas=n.parseFromString(e,"image/svg+xml").documentElement,this.content.appendChild(this.svgCanvas),this.svgCanvas.addEventListener("wheel",this.zoom),this.svgCanvas.addEventListener("mousedown",(function(e){2===e.buttons&&(t.allowPanning=!0,t.svgInitialClick=c.getRelativeCoords(e,t.svgCanvas),t.prevViewBox=t.svgCanvas.viewBox.baseVal)})),this.svgCanvas.addEventListener("mouseup",(function(){return t.allowPanning=!1})),this.svgCanvas.addEventListener("mouseleave",(function(){return t.allowPanning=!1})),this.svgCanvas.addEventListener("mousemove",(function(e){2===e.buttons&&!1===t.allowPanning&&(t.allowPanning=!0,t.svgInitialClick=c.getRelativeCoords(e,t.svgCanvas),t.prevViewBox=t.svgCanvas.viewBox.baseVal),t.allowPanning&&(t.mousePosition=c.getRelativeCoords(e,t.svgCanvas),t.svgCanvas.viewBox.baseVal.x=-t.mousePosition.x-(-t.svgInitialClick.x-t.prevViewBox.x),t.svgCanvas.viewBox.baseVal.y=-t.mousePosition.y-(-t.svgInitialClick.y-t.prevViewBox.y))}))},e.prototype.createCommentsGroup=function(){this.commentsGroup=document.createElementNS("http://www.w3.org/2000/svg","g"),this.svgCanvas.appendChild(this.commentsGroup)},e.prototype.zoom=function(e){e.preventDefault(),this.mousePosition=c.getRelativeCoords(e,this.svgCanvas);var t=e.deltaY>0?this.ZOOMSPEED:1/this.ZOOMSPEED,n=(this.mousePosition.x-this.svgCanvas.viewBox.baseVal.x)/this.svgCanvas.viewBox.baseVal.width,r=this.svgCanvas.viewBox.baseVal.width*t-this.svgCanvas.viewBox.baseVal.width,i=(this.mousePosition.y-this.svgCanvas.viewBox.baseVal.y)/this.svgCanvas.viewBox.baseVal.height,o=this.svgCanvas.viewBox.baseVal.height*t-this.svgCanvas.viewBox.baseVal.height;(e.deltaY>0?this.svgCanvas.viewBox.baseVal.width<10*this.SVGWIDTH:this.svgCanvas.viewBox.baseVal.width>this.SVGWIDTH/10)&&(this.svgCanvas.viewBox.baseVal.x-=r*n,this.svgCanvas.viewBox.baseVal.width+=r,this.svgCanvas.viewBox.baseVal.y-=o*i,this.svgCanvas.viewBox.baseVal.height+=o)},e}(),h=class{static listFiles(e,t){const n=[];e.name&&n.push("name='"+e.name+"'"),e.parentId&&n.push("'"+e.parentId+"' in parents"),!1===e.trashed&&n.push("trashed=false"),e.excludeName&&n.push("not name contains '"+e.excludeName+"'"),e.onlyFolder&&n.push("mimeType='application/vnd.google-apps.folder'");let r=gapi.client.drive.files.list({pageSize:15,fields:`nextPageToken, files(id, name${t?", "+t:""})`,q:n.join(" and ")});return r.then(e=>{const t=e.result.files;t&&t.length>0?console.log(t):console.log("No files found with this query:",n.join(" and "))},e=>{console.error(e.body)}),r}static getFileContent(e){let t=gapi.client.drive.files.get({fileId:e,alt:"media"});return t.then(t=>{200===t.status&&console.log("File with id "+e+" fetched successfully.")},e=>{console.error(e.body)}),t}static getFileData(e,t){let n=gapi.client.drive.files.get({fileId:e,fields:t});return n.then(e=>{200===e.status&&console.log("File data fetched succesfully.")},e=>{console.error(e)}),n}static createFolder(e,t="drive"){const n={name:e,mimeType:"application/vnd.google-apps.folder",parents:"drive"!==t?[t]:[]},r=gapi.client.request({path:"https://www.googleapis.com/drive/v3/files/",method:"POST",body:n});return r.then(t=>{console.log(e+" folder created. Id: "+JSON.parse(t.body).id)}),r}static uploadFile(e,t,n,r){const i=new Blob([e],{type:t}),o={name:n,mimeType:t,parents:[r]},a=gapi.auth.getToken().access_token,s=new FormData;s.append("metadata",new Blob([JSON.stringify(o)],{type:"application/json"})),s.append("file",i);let u=fetch("https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart&fields=id",{method:"POST",headers:new Headers({Authorization:"Bearer "+a}),body:s});return u.then(e=>{!0===e.ok&&200===e.status&&console.log("Upload of "+n+" successful.")},e=>{console.error(e)}),u}static updateFileContent(e,t,n){const r=new Blob([e],{type:t}),i={mimeType:t},o=gapi.auth.getToken().access_token,a=new FormData;a.append("metadata",new Blob([JSON.stringify(i)],{type:"application/json"})),a.append("file",r);let s=fetch(`https://www.googleapis.com/upload/drive/v3/files/${n}?uploadType=multipart`,{method:"PATCH",headers:new Headers({Authorization:"Bearer "+o}),body:a});return s.then(e=>{!0===e.ok&&200===e.status&&console.log("Update successful.")},e=>{console.error(e)}),s}static renameFile(e,t){const n=gapi.client.drive.files.update({fileId:e,name:t,uploadType:"media"});return n.then(e=>{},t=>{console.error("Error renaming file: "+e,t)}),n}static moveFileV2(e,t){const n=gapi.client.request({path:"https://www.googleapis.com/drive/v2/files/"+e+"/parents",method:"POST",headers:{"Content-Type":"application/json"},body:{id:t}});return n.then(e=>{console.log(e)},e=>{console.log(e)}),n}static moveFile(e,t){const n={id:t};gapi.client.drive.parents.insert({fileId:e,resource:n}).execute((function(e){}))}static deleteFile(e){let t=gapi.client.drive.files.delete({fileId:e});return t.then(e=>{console.log(e)},e=>{console.log(e)}),t}static shareFile(e,t,n=0){return new Promise(e=>setTimeout(e,n)).then(n=>{const r=gapi.client.request({path:`https://www.googleapis.com/drive/v3/files/${e}/permissions?sendNotificationEmail=false&fields=id,displayName,emailAddress,photoLink,role`,method:"POST",headers:{"Content-Type":"application/json"},body:{role:"writer",type:"user",emailAddress:t}});return r.then(e=>{console.log(e)}),r})}static stopSharingFile(e,t){const n=gapi.client.request({path:"https://www.googleapis.com/drive/v3/files/"+e+"/permissions/"+t,method:"DELETE",headers:{"Content-Type":"application/json"}});return n.then(e=>{console.log(e)}),n}static getProjectTeamData(e){const t=gapi.client.request({path:`https://www.googleapis.com/drive/v3/files/${e}/permissions?fields=permissions(id,displayName,emailAddress,role,photoLink)`,method:"GET",headers:{"Content-Type":"application/json"}});return t.then(e=>{console.log(e)},e=>{console.log(e)}),t}static getUserInfo(){const e=gapi.client.drive.about.get({fields:"user"});return e.then(e=>{console.log(JSON.parse(e.body).user)}),e}static sendSharingProjectEmail(e,t,n,r){const i=fetch("https://us-central1-testgdproject-1570036439931.cloudfunctions.net/sendMail",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sharer:e,recipients:t,projectName:n,projectId:r})});return i.then(e=>{console.log(e)},e=>{console.error(e)}),i}static sendNotification(e,t,n,r,i,o){const a=fetch("https://us-central1-testgdproject-1570036439931.cloudfunctions.net/sendPushNotification",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({emails:e,author:t,photoLink:n,text:r,projectName:i,projectId:o})});return a.then(e=>{console.log(e)},e=>{console.error(e)}),a}static async createProject(e,t,n){let r;const i=await c.readInputFile(e),o=JSON.parse(i);if(console.log("File contents:",o),n.name=o.projectInfo.title,!t.appMainFolderId){const e=(await this.listFiles({name:"VAviewerData",onlyFolder:!0,trashed:!1})).result.files;if(e&&e.length>0)t.appMainFolderId=e[0].id;else{const e=await this.createFolder("VAviewerData");t.appMainFolderId=JSON.parse(e.body).id,console.log("No appFolder found, one is going to be created.")}}let a;if(void 0!==t.projectsData&&t.projectsData.find(e=>e.name===o.projectInfo.title))t.projectsData.find(e=>e.name===o.projectInfo.title)?r="No project was created because there is already a project with this name.":console.error("Unknown error while attempting to create the project folder.");else try{const e=await this.createFolder(o.projectInfo.title,t.appMainFolderId);a=JSON.parse(e.body).id,n.id=a;const r={id:a,name:o.projectInfo.title};void 0===t.projectsData?t.projectsData=[r]:t.projectsData.find(e=>e.name===o.projectInfo.title)||t.projectsData.push(r)}catch(e){console.log(e),n.id="temporal",r=JSON.parse(e.body).error.message}if(a&&o.drawings){const e=await this.createFolder("drawings",a),r=JSON.parse(e.body).id;t.projectsData[t.projectsData.length-1].drawingsFolderId=r;const i=[];n.drawings=[];for(const e in o.drawings){const t=this.uploadFile(o.drawings[e],"image/svg+xml",e.concat(".svg"),r);i.push(t);const a=new l(e,void 0);a.setContent(o.drawings[e]),n.drawings.push(a)}const s=new TextDecoder("utf-8");await Promise.all(i).then(e=>{e.forEach((e,t)=>{!0===e.ok&&200===e.status&&e.body.getReader().read().then(({value:e,done:r})=>{const i=JSON.parse(s.decode(e)).id;n.drawings[t].id=i,console.log("Drawing with id "+i+" uploaded successfully.")})})},e=>{console.error(e)})}if(a&&o.elementsData){const e=await this.createFolder("elementsData",a),r=JSON.parse(e.body).id;t.projectsData[t.projectsData.length-1].elementsDataFolderId=r,n.elementsData=o.elementsData;const i=[];for(const e in o.elementsData){const t=this.uploadFile(JSON.stringify(o.elementsData[e]),"application/json",e.concat(".json"),r);i.push(t)}await Promise.all(i).then(e=>{console.log("ElementsData files uploaded successfully.")},e=>{console.error(e)})}return a?(console.log("Upload successful. Uploaded "+Object.keys(o.drawings).length+" drawings."),{id:a,name:o.projectInfo.title}):Promise.reject(new Error("Project upload failed. "+r))}static async listProjectItems(e,t=""){if(""!==t)e.appMainFolderId=t;else if(!e.appMainFolderId){const t=(await this.listFiles({name:"VAviewerData",onlyFolder:!0,trashed:!1})).result.files;if(!(t&&t.length>0))return console.log("No appFolder found."),Promise.reject(new Error("No appFolder found."));e.appMainFolderId=t[0].id}const n=await this.listFiles({parentId:e.appMainFolderId,onlyFolder:!0,excludeName:"appSettings",trashed:!1},"shared, permissions");let r;const i=n.result.files;i&&i.length>0&&(void 0===e.projectsData?(r=i,e.projectsData=r):Array.isArray(e.projectsData)&&(r=n.result.files.filter(t=>void 0===e.projectsData.find(e=>e.id===t.id))).forEach(t=>{e.projectsData.push(t)})),console.assert(e.projectsData.length>0,"There are no project folders.");const o=(await this.listFiles({parentId:e.appMainFolderId,name:"appSettings",onlyFolder:!0})).result.files;o&&o.length>0?e.appSettingsFolderId=o[0].id:console.log("No settings folder found.");const a=(await this.listFiles({parentId:e.appSettingsFolderId,name:"projectsThumbs",onlyFolder:!0})).result.files;a&&a.length>0?e.thumbsFolderId=a[0].id:console.log("No thumbs folder found.");const s=(await this.listFiles({parentId:e.thumbsFolderId})).result.files;return e.projectsData.forEach(e=>{const t=s.find(t=>e.id===t.name.replace(".jpg",""));t&&(e.thumbId=t.id)}),console.assert(s.length>0,"There are no thumbnails."),r}static async fetchProject(e,t){let n;if(console.log("Fetching project: "+e),void 0===t.projectsData){const r=await this.getFileData(e,"name, trashed");JSON.parse(r.body).trashed||(t.projectsData=[{id:e,name:JSON.parse(r.body).name}],n=0)}else"temporal"!==e&&(n=t.projectsData.findIndex(t=>t.id===e));if(n>=0&&!t.projectsData[n].permissions)try{const r=(await this.getProjectTeamData(e)).result.permissions;r&&r.length>0?t.projectsData[n].permissions=r:console.log("No project team members found.")}catch(e){console.log("Error fetching the team members data.")}if(n>=0&&!t.projectsData[n].projSettings){const r=(await this.listFiles({parentId:e,name:"projectSettings.json"})).result.files;if(r&&r.length>0){const e=await this.getFileContent(r[0].id);t.projectsData[n].projSettings=e.body}else console.log("No projectSettings.json found.")}if(n>=0&&!t.projectsData[n].drawings){const r=(await this.listFiles({parentId:e,onlyFolder:!0,name:"drawings"})).result.files;if(r&&r.length>0){const e=await this.listFiles({parentId:r[0].id,trashed:!1});t.projectsData[n].drawings=[],e.result.files.forEach(e=>{"drawingsStyles.css"===e.name?t.projectsData[n].drawingsStylesId=e.id:t.projectsData[n].drawings.push(new l(e.name.replace(/.svg$/,""),e.id))})}else console.log("No drawings folder found.")}if(n>=0&&!t.projectsData[n].elementsData){const r=(await this.listFiles({parentId:e,onlyFolder:!0,name:"elementsData"})).result.files;if(r&&r.length>0){const e=await this.listFiles({parentId:r[0].id,trashed:!1});t.projectsData[n].elementsData=e.result.files}else console.log("No elementsData folder found.")}if(n>=0&&!t.projectsData[n].comments){const r=(await this.listFiles({parentId:e,name:"comments.json",trashed:!1})).result.files;if(r&&r.length>0){t.projectsData[n].commentsFileId=r[0].id;const e=await this.getFileContent(r[0].id);t.projectsData[n].comments=JSON.parse(e.body)}else console.log("No comments.json file found.")}if(n>=0&&!t.projectsData[n].images){const r=(await this.listFiles({parentId:e,onlyFolder:!0,name:"images"})).result.files;if(r&&r.length>0){const e=await this.listFiles({parentId:r[0].id});t.projectsData[n].images=e.result.files}else console.log("No images folder found.")}return n>=0?(console.log("Project resources fetched succesfully."),t.projectsData[n]):Promise.reject(new Error("Project resources could not be fetched."))}},d=function(){function e(e,t,n){var r;void 0===n&&(n=[]),this.elementsIds=[],this.representations=[],(r=this.elementsIds).push.apply(r,e),this.content=t,this.mentions=n,this.id="c-"+c.uuidv4()}return e.prototype.createRepresentation=function(e,t){for(var n=[],r=0;r<t.length;r++)n.push(c.createBBox2(t[r],15));var i=c.rectanglesSilhouette(n),o=c.svgPathFromLines(i);o.setAttribute("style","fill:none;stroke:#e22a2a;stroke-width:8px;stroke-dasharray:30;stroke-linecap:round;"),o.dataset.id=this.id,e.appendChild(o),this.representations.push(o)},e}();!function(e){e[e.Right=0]="Right",e[e.Bottom=1]="Bottom"}(o||(o={}));var f,p,m=function(){function e(e,t){var n=this;this.sections=[],this.panelWidth=250,this.panelHeight=200,this.resizingWidth=!1,this.resizingHeight=!1,this.panelsStorage=e,this.panelContainer=document.createElement("div"),this.panelContainer.classList.add("mainPanel","right"),this.panelGrip=document.createElement("div"),this.panelGrip.classList.add("panel-grip"),this.panelContainer.appendChild(this.panelGrip),this.panelContent=document.createElement("div"),this.panelContent.classList.add("panel-content"),this.panelHeader=document.createElement("div"),this.panelHeader.classList.add("panel-header"),this.panelBody=document.createElement("div"),this.panelBody.classList.add("panel-body"),this.panelFooter=document.createElement("div"),this.panelFooter.classList.add("panel-footer"),this.panelContent.appendChild(this.panelHeader),this.panelContent.appendChild(this.panelBody),this.panelContent.appendChild(this.panelFooter),this.panelContainer.appendChild(this.panelContent),t.workspaceContainer.addEventListener("mousemove",(function(e){n.resizingWidth?n.resizeWidth(e):n.resizingHeight&&n.resizeHeight(e)})),t.workspaceContainer.addEventListener("mouseup",(function(){n.resizingWidth=!1,n.resizingHeight=!1})),this.setActive=this.setActive.bind(this),this.panelHeader.onclick=function(e){var t=e.target.closest("[data-btn]");t&&!t.classList.contains("active")&&n.setActive(t.innerText)},this.mediumBreakpoint=window.matchMedia("(max-width: 700px)"),this.panelPositon=this.panelPositon.bind(this),this.mediumBreakpoint.addListener(this.panelPositon),this.panelPositon(this.mediumBreakpoint),this.panelContainer.style.setProperty("--width",this.panelWidth+"px"),this.panelContainer.style.setProperty("--height",this.panelHeight+"px"),this.panelGrip.onmousedown=function(e){n.panelSide===o.Right?(n.resizingWidth=!0,n.resizingHeight=!1,n.startX=e.pageX,n.startWidth=n.panelWidth):n.panelSide===o.Bottom&&(n.resizingHeight=!0,n.resizingWidth=!1,n.startY=e.pageY,n.startHeight=n.panelHeight)},t.workspaceContainer.appendChild(this.panelContainer)}return e.prototype.resizeWidth=function(e){this.panelWidth=this.startWidth-(e.pageX-this.startX),this.panelContainer.style.setProperty("--width",this.panelWidth+"px")},e.prototype.resizeHeight=function(e){this.panelHeight=this.startHeight-(e.pageY-this.startY),this.panelContainer.style.setProperty("--height",this.panelHeight+"px")},e.prototype.open=function(){this.panelContainer.classList.add("open"),this.panelPositon(this.mediumBreakpoint),this.isOpen=!0},e.prototype.close=function(){this.panelContainer.classList.remove("open"),this.isOpen=!1},e.prototype.dockTo=function(e){e===o.Right?(this.panelSide=e,this.panelContainer.classList.remove("bottom"),this.panelContainer.classList.add("right"),this.panelBody.childNodes.forEach((function(e){e.classList.remove("horizontal"),e.classList.add("vertical")}))):e===o.Bottom&&(this.panelSide=e,this.panelContainer.classList.remove("right"),this.panelContainer.classList.add("bottom"),this.panelBody.childNodes.forEach((function(e){e.classList.remove("vertical"),e.classList.add("horizontal")})))},e.prototype.setActive=function(e){this.activeSection&&this.setInactive(this.activeSection),this.activeSection=this.sections.find((function(t){return t.name===e})),this.activeSection.button.classList.add("active"),this.activeSection.body.classList.remove("hidden")},e.prototype.setInactive=function(e){e.button.classList.remove("active"),e.body.classList.add("hidden")},e.prototype.addSection=function(e,t,n,r){void 0===n&&(n=!0),void 0===r&&(r=!1);var i=this.sections.find((function(t){return t.name===e}));if(void 0===i){var o=document.createElement("span");o.innerText=e,o.dataset.btn="",this.panelHeader.appendChild(o),this.panelBody.appendChild(t),i={name:e,button:o,body:t},r?this.sections.unshift(i):this.sections.push(i)}n?this.setActive(i.name):this.setInactive(i)},e.prototype.addSections=function(e){for(var t=0;t<e.length;t++)this.addSection(e[t].name,e[t].body,0===t)},e.prototype.removeSection=function(e){var t=this.sections.findIndex((function(t){return t.name===e}));if(t>=0){var n=this.sections.splice(t,1)[0];n.button.remove(),this.panelsStorage.appendChild(n.body),this.sections.length>0?this.setActive(this.sections[0].name):this.close()}else console.warn("Impossible to remove the section. No section was found with that name.")},e.prototype.panelPositon=function(e){e.matches?this.dockTo(o.Bottom):this.dockTo(o.Right)},e.prototype.kill=function(){this.panelHeader.onclick=null,this.panelGrip.onmousedown=null},e}(),g=function(){function e(e,t){var n=this;this.formElement=e,this.workspace=t,e.onsubmit=function(e){e.preventDefault()},this.cancelCreateBtn=document.getElementById("commentFormCancel"),this.addCommentBtn=document.getElementById("addCommentBtn"),this.deleteBtn=document.getElementById("commentFormDelete"),this.deleteBtn.onclick=function(){return n.deleteComment(n.commentId)},this.editBtn=document.getElementById("commentFormEdit"),this.editBtn.onclick=function(){return n.enableEditComment(n.commentId)},this.cancelUpdateBtn=document.getElementById("discardChanges"),this.cancelUpdateBtn.onclick=function(){return n.discardUpdate()},this.confirmUpdateBtn=document.getElementById("confirmChanges"),this.textInput=e.elements.namedItem("comment"),this.mentionsSection=e.querySelector(".members"),this.mentionsInput=e.elements.namedItem("members"),this.buttonsModes=e.querySelector(".formButtonsModes")}return e.prototype.showMentionsSection=function(){this.mentionsSection.classList.remove("hidden")},e.prototype.hideMentionsSection=function(){this.mentionsSection.classList.add("hidden")},e.prototype.buttonsVisibilityMode=function(e){for(var t=0;t<this.buttonsModes.children.length;t++)this.buttonsModes.children[t].dataset.mode!==e?this.buttonsModes.children[t].style.display="none":this.buttonsModes.children[t].style.display="flex"},e.prototype.deleteComment=function(e){var t=this.workspace.comments.findIndex((function(t){return t.id===e}));this.workspace.comments[t].representations.forEach((function(e){return e.remove()})),this.workspace.comments.splice(t,1),this.workspace.unsavedCommentsData(),this.workspace.mainPanel.removeSection("Comment")},e.prototype.disableForm=function(){this.textInput.disabled=!0,this.mentionsInput.disabled=!0},e.prototype.enableForm=function(){this.textInput.disabled=!1,this.mentionsInput.disabled=!1},e.prototype.viewComment=function(e){var t=this.workspace.comments.find((function(t){return t.id===e}));t?(this.fillInputs(t),this.commentId=t.id,this.disableForm(),this.buttonsVisibilityMode("view")):console.warn("No comment found with that id:",e)},e.prototype.enableEditComment=function(e){var t=this,n=this.workspace.comments.find((function(t){return t.id===e}));n?(this.fillInputs(n),this.commentId=e,this.enableForm(),this.buttonsVisibilityMode("edit"),this.formElement.onchange=function(){t.confirmUpdateBtn.classList.remove("disabled"),t.confirmUpdateBtn.onclick=function(){return t.updateComment(e,t.textInput.value,t.getSelectedMembers())}}):console.warn("No comment found with that id:",e)},e.prototype.updateComment=function(e,t,n){var r=this.workspace.comments.find((function(t){return t.id===e}));r?(r.content=t,r.mentions=n,this.workspace.unsavedCommentsData(),this.formElement.onchange=null,this.disableForm(),this.buttonsVisibilityMode("view"),this.confirmUpdateBtn.classList.add("disabled"),this.cancelUpdateBtn.classList.add("disabled"),this.confirmUpdateBtn.onclick=null,this.cancelUpdateBtn.onclick=null):console.warn("No comment found with that id:",e)},e.prototype.discardUpdate=function(){var e=this,t=this.workspace.comments.find((function(t){return t.id===e.commentId}));t?(this.textInput.value=t.content,this.formElement.onchange=null,this.disableForm(),this.buttonsVisibilityMode("view"),this.confirmUpdateBtn.classList.add("disabled"),this.confirmUpdateBtn.onclick=null):console.warn("No comment found with that id:",this.commentId)},e.prototype.getSelectedMembers=function(){for(var e=[],t=0;t<this.mentionsInput.selectedOptions.length;t++)e.push(this.mentionsInput.selectedOptions[t].value);return e},e.prototype.fillInputs=function(e){var t=this;if(this.textInput.value=e.content,e.mentions.length>0){var n=[];e.mentions.forEach((function(e){var r=t.workspace.permissions.find((function(t){return t.emailAddress===e}));n.push('<option value="'+e+'">'+(r?r.displayName:"Removed user")+"</option>")})),this.mentionsInput.innerHTML=n.join("")}else c.emptyNode(this.mentionsInput)},e.prototype.reset=function(){this.formElement.reset()},e}(),y=function(){function e(e,t){var n=this;this.appendedDrawingsIds=[],this.comments=[],this.elementsComments={},this.workspaceContainer=document.createElement("div"),this.workspaceContainer.classList.add("workspace"),this.projectName=e.name,this.projectId=e.id,this.permissions=e.permissions,this.projectIndex=t.projectsData.findIndex((function(t){return t.name===e.name})),t.lastUploadedProject&&e.id===t.lastUploadedProject.id||(this.drawings=e.drawings,this.drawingsStylesId=e.drawingsStylesId,this.elementsData={}),t.projectsListBtn.innerHTML="<span>"+e.name+"</span>",this.drawingsBtns=t.drawingsBtns,this.saveBtn=t.saveBtn,this.createDrawingsBtns(this.drawings),this.drawingsBtns.children[0].innerText="Pick a drawing",this.drawingsBtns.style.display="unset",t.toolbarsContainer.style.display="flex",this.projectsData=t.projectsData,this.propsTablesContainer=document.getElementById("propsTablesContainer"),this.paramsTablesContainer=document.getElementById("paramsTablesContainer"),e.commentsFileId&&(this.commentsFileId=e.commentsFileId),e.comments&&(e.comments.forEach((function(e){var t=new d(e.elementsIds,e.content,e.mentions);n.comments.push(t);for(var r=0;r<e.elementsIds.length;r++)n.elementsComments.hasOwnProperty(e.elementsIds[r])||(n.elementsComments[e.elementsIds[r]]=[]),n.elementsComments[e.elementsIds[r]].push(t.id)})),this.drawings.forEach((function(e){return e.commentsChanged=!0}))),this.mainPanel=new m(t.panelsStorage,this),this.commentForm=new g(document.getElementById("commentForm"),this),this.drawingsContainer=document.createElement("div"),this.drawingsContainer.classList.add("drawingsContainer"),this.workspaceContainer.appendChild(this.drawingsContainer),t.workspacesContainer.appendChild(this.workspaceContainer)}return e.prototype.manageTools=function(e,t,n){void 0!==this.activeDrawing?void 0===this.activeTool?this.activeTool=new t(n,e.currentTarget,this):this.activeTool.name!==n?(this.activeTool.kill(),this.activeTool=new t(n,e.currentTarget,this)):this.activeTool.name===n&&(this.activeTool.kill(),this.activeTool=void 0):console.log("A drawing must be active.")},e.prototype.unsavedCommentsData=function(){this.commentsChangesUnsaved=!0,this.saveBtn.classList.remove("disabled"),this.saveBtn.classList.add("enabled")},e.prototype.setDrawing=function(e){if(this.activeDrawing&&this.activeDrawing.name!==e.name)this.activeTool&&this.activeTool.currentSelection.length>0&&this.activeTool.removeDrawingSelectionAppearance(this.activeDrawing),this.activeDrawing.content.style.display="none";else if(this.activeDrawing&&this.activeDrawing.name===e.name)return;if(e.content.style.visibility="hidden",this.appendedDrawingsIds.includes(e.id)?e.content.style.display="unset":(this.appendedDrawingsIds.push(e.id),this.drawingsContainer.append(e.content)),e.commentsChanged){if(void 0===e.commentsGroup)for(var t=!1,n=0;n<this.comments.length;n++){for(var r=[],i=0;i<this.comments[n].elementsIds.length;i++){null!==(o=e.content.querySelector('[data-id="'+this.comments[n].elementsIds[i]+'"]'))&&r.push(o)}r.length>0&&(t||(e.createCommentsGroup(),t=!0),this.comments[n].createRepresentation(e.commentsGroup,r))}else for(n=0;n<this.comments.length;n++)if(null===e.commentsGroup.querySelector('[data-id="'+this.comments[n].id+'"]')){for(r=[],i=0;i<this.comments[n].elementsIds.length;i++){var o;null!==(o=e.content.querySelector('[data-id="'+this.comments[n].elementsIds[i]+'"]'))&&r.push(o)}r.length>0&&this.comments[n].createRepresentation(e.commentsGroup,r)}e.commentsChanged=!1}this.activeTool&&this.activeTool.currentSelection.length>0&&this.activeTool.addDrawingSelectionAppearance(e),e.content.style.visibility="unset",this.activeDrawing=e},e.prototype.createDrawingsBtns=function(e){var t=[];e.forEach((function(e){t.push("<li "+(e.id?'data-id="'+e.id+'"':"")+">"+e.name+"</li>")})),this.drawingsBtns.querySelector(".dropdown-content").innerHTML=t.join("")},e.prototype.close=function(){c.emptyNode(this.drawingsBtns.querySelector(".dropdown-content")),void 0!==this.drawingsStylesTag&&this.drawingsStylesTag.remove(),this.drawingsContainer.innerHTML=""},e}(),v=function(){function e(e,t,n){this.name=e,this.toolBtn=t,this.workspace=n,this.toolBtn.classList.add("btn-tool-enabled")}return e.prototype.kill=function(){this.toolBtn.classList.remove("btn-tool-enabled")},e}(),b=(f=function(e,t){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}f(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),w=function(e){function t(t,n,r){var i=e.call(this,t,n,r)||this;return i.currentSelection=[],i.multipleSelection=!1,i.maxPxOffsetToCheck=3,i.manageSelection=i.manageSelection.bind(i),r.drawingsContainer.addEventListener("click",i.manageSelection),i}return b(t,e),t.prototype.manageSelection=function(e){if(this.selection=e.target.closest("[selectable]"),!this.selection){var t=c.getViewportRelativeCoords(e);e:for(var n=1;n<=this.maxPxOffsetToCheck;n++)for(var r=s.getPointsAround(t,n),i=0;i<r.length;i++){var o=document.elementFromPoint(r[i].x,r[i].y);if(o&&(this.selection=o.closest("[selectable]")),this.selection)break e}}null!==this.selection?this.multipleSelection?-1===this.currentSelection.indexOf(this.selection.dataset.id)?this.select(this.selection):this.deselect(this.selection.dataset.id):0===this.currentSelection.length?this.select(this.selection):this.selection.dataset.id!==this.currentSelection[0]?(this.deselect(this.currentSelection[0]),this.select(this.selection)):this.selection.dataset.id===this.currentSelection[0]&&this.deselect(this.currentSelection[0]):this.clearAllSelection();console.log("Selection ",this.currentSelection)},t.prototype.select=function(e){this.currentSelection.push(e.dataset.id),this.addSelectionAppearance(e)},t.prototype.deselect=function(e){var t=this.currentSelection.indexOf(e);if(t>-1){this.currentSelection.splice(t,1);var n=this.workspace.activeDrawing.content.querySelector('[data-id="'+e+'"]');n&&this.clearSelectionAppearance(n)}},t.prototype.removeDrawingSelectionAppearance=function(e){for(var t=0;t<this.currentSelection.length;t++){var n=e.content.querySelector('[data-id="'+this.currentSelection[t]+'"]');n&&this.clearSelectionAppearance(n)}},t.prototype.addDrawingSelectionAppearance=function(e){for(var t=0;t<this.currentSelection.length;t++){var n=e.content.querySelector('[data-id="'+this.currentSelection[t]+'"]');n&&this.addSelectionAppearance(n)}},t.prototype.clearSelectionAppearance=function(e){for(var t=0;t<e.children.length;t++)e.children[t].classList.remove("selected")},t.prototype.addSelectionAppearance=function(e){for(var t=0;t<e.children.length;t++)e.children[t].classList.add("selected")},t.prototype.clearAllSelection=function(){if(this.currentSelection.length>0){for(var e=0;e<this.currentSelection.length;e++){var t=this.workspace.activeDrawing.content.querySelector('[data-id="'+this.currentSelection[e]+'"]');t&&this.clearSelectionAppearance(t)}this.currentSelection.length=0}},t.prototype.getDrawingSelectedElementsRefs=function(e){for(var t=[],n=0;n<this.currentSelection.length;n++){var r=e.content.querySelector('[data-id="'+this.currentSelection[n]+'"]');r&&t.push(r)}return t},t.prototype.kill=function(){e.prototype.kill.call(this),this.workspace.drawingsContainer.removeEventListener("click",this.manageSelection),this.clearAllSelection()},t}(v),T=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),S=function(e){function t(t,n,r){var i=e.call(this,t,n,r)||this;if(i.multipleSelection=!0,i.waitingForComment=!1,i.hasUsedPanel=!1,console.log("Comment element tool enabled."),i.cancelComment=i.cancelComment.bind(i),r.commentForm.cancelCreateBtn.onclick=i.cancelComment,r.permissions.length>1){var o=[],a=window.getCurrentUser().emailAddress;r.permissions.forEach((function(e){e.emailAddress!==a&&o.push('<option value="'+e.emailAddress+'">'+e.displayName+"</option>")})),r.commentForm.mentionsInput.innerHTML=o.join(""),r.commentForm.showMentionsSection()}else r.commentForm.hideMentionsSection();return i.addComment=i.addComment.bind(i),r.commentForm.addCommentBtn.onclick=i.addComment,r.commentForm.enableForm(),r.commentForm.reset(),i}return T(t,e),t.prototype.manageSelection=function(t){e.prototype.manageSelection.call(this,t),this.currentSelection.length>0?(this.waitingForComment=!0,this.workspace.commentForm.buttonsVisibilityMode("create"),this.workspace.mainPanel.addSection("Comment",this.workspace.commentForm.formElement),this.workspace.mainPanel.open(),this.hasUsedPanel=!0):this.waitingForComment=!1},t.prototype.addComment=function(){var t=this;if(0!==this.currentSelection.length){var n;if(void 0===this.workspace.activeDrawing.commentsGroup&&this.workspace.activeDrawing.createCommentsGroup(),this.workspace.permissions.length>1&&(n=this.workspace.commentForm.getSelectedMembers()).length>0){var r=window.getCurrentUser().displayName,i=window.getCurrentUser().photoLink;this.workspace.pendingNotificationsToSend.push({emails:n,userName:r,userPhoto:i,textContent:this.workspace.commentForm.textInput.value,projectName:this.workspace.projectName,projectId:this.workspace.projectId})}var o=new d(this.currentSelection,this.workspace.commentForm.textInput.value,n),a=this.getDrawingSelectedElementsRefs(this.workspace.activeDrawing);o.createRepresentation(this.workspace.activeDrawing.commentsGroup,a);for(var s=0;s<this.currentSelection.length;s++)this.workspace.elementsComments.hasOwnProperty(this.currentSelection[s])||(this.workspace.elementsComments[this.currentSelection[s]]=[]),this.workspace.elementsComments[this.currentSelection[s]].push(o.id);console.log("elementsComments ",this.workspace.elementsComments),this.workspace.comments.push(o),console.log(this.workspace.comments),this.workspace.commentForm.reset(),this.workspace.mainPanel.close(),this.waitingForComment=!1,this.workspace.unsavedCommentsData(),this.workspace.drawings.forEach((function(e){e.id!==t.workspace.activeDrawing.id&&(e.commentsChanged=!0)})),e.prototype.clearAllSelection.call(this)}},t.prototype.cancelComment=function(){this.workspace.mainPanel.close(),this.workspace.commentForm.reset(),this.waitingForComment=!1,e.prototype.clearAllSelection.call(this)},t.prototype.kill=function(){e.prototype.kill.call(this),console.log("Comment element tool disabled."),this.waitingForComment&&(this.workspace.commentForm.reset(),this.workspace.mainPanel.close()),this.hasUsedPanel&&this.workspace.mainPanel.removeSection("Comment"),this.workspace.commentForm.addCommentBtn.onclick=null,this.workspace.commentForm.cancelCreateBtn.onclick=null},t}(w),I=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),E=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},C=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},_=function(e){function t(t,n,r){var i=e.call(this,t,n,r)||this;return i.hasUsedPanel=!1,console.log("Elements data tool enabled."),i.elementsData=r.elementsData,i.projectsData=r.projectsData,i.projectIndex=r.projectIndex,i}return I(t,e),t.prototype.manageSelection=function(t){e.prototype.manageSelection.call(this,t),null!==this.selection&&this.currentSelection.length>0?(this.showElementData(this.selection.dataset.category,this.selection.dataset.id),this.selection.dataset.comment?(this.workspace.commentForm.viewComment(this.selection.dataset.comment),this.workspace.mainPanel.addSection("Comment",this.workspace.commentForm.formElement)):this.workspace.mainPanel.sections.find((function(e){return"Comment"===e.name}))&&this.workspace.mainPanel.removeSection("Comment")):this.currentElementData&&(this.currentElementData=void 0,this.workspace.mainPanel.close(),console.log("Data table cleaned."))},t.prototype.showElementData=function(e,t){return E(this,void 0,void 0,(function(){var n,r,i,o=this;return C(this,(function(a){switch(a.label){case 0:return n=!0,this.elementsData[e]?(this.currentElementData=this.elementsData[e].instances[t],console.log(this.currentElementData),[3,4]):[3,1];case 1:return void 0===(r=this.projectsData[this.projectIndex].elementsData.find((function(t){return t.name.replace(".json","")===e})))?[3,3]:[4,h.getFileContent(r.id).then((function(n){o.elementsData[e]=JSON.parse(n.body),o.currentElementData=o.elementsData[e].instances[t],console.log(o.currentElementData)}),(function(e){n=!1,console.log(e)}))];case 2:return a.sent(),[3,4];case 3:console.log("There is no data for that element."),a.label=4;case 4:return n&&(this.workspace.propsTablesContainer.innerHTML=this.createDataTable(this.currentElementData.properties),i=[{name:"Properties",body:this.workspace.propsTablesContainer}],this.currentElementData.parameters.length>0&&(this.workspace.paramsTablesContainer.innerHTML=this.createDataTable(this.currentElementData.parameters),i.push({name:"Parameters",body:this.workspace.paramsTablesContainer})),this.workspace.mainPanel.addSections(i),this.workspace.mainPanel.open(),this.hasUsedPanel=!0),[2]}}))}))},t.prototype.createDataTable=function(e){for(var t=[],n=[],r=0;r<e.length;r++){var i=e[r].category,o=t.indexOf(i),a="<tr><th>"+e[r].name+"</th><td>"+e[r].value+"</td></tr>";-1!==o?n[o].push(a):(n.push(['<table class="data-table"><thead><tr><th colspan="2">'+i+"</th></tr></thead>",a]),t.push(i))}var s=[];for(r=0;r<n.length;r++)s.push(n[r].join("")+"</tbody></table>");return s.join("")},t.prototype.kill=function(){e.prototype.kill.call(this),this.workspace.mainPanel.isOpen&&this.workspace.mainPanel.close(),this.hasUsedPanel&&(this.workspace.mainPanel.removeSection("Properties"),this.workspace.mainPanel.removeSection("Parameters")),console.log("Elements data tool disabled.")},t}(w),D=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},k=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},N=function(){function e(e,t){var n=this;this.pendingToRemove=[],this.pendingToAdd=[],this.htmlContainer=e,this.shareForm=e.querySelector(".share-form"),this.shareFormErrorMsg=e.querySelector(".share-form > .error-msg"),this.confirmChangesBtns=e.querySelector(".modal-main-btns"),this.saveChangesBtn=e.querySelector(".save-changes-btn"),this.cancelChangesBtn=e.querySelector(".cancel-changes-btn"),this.waitingAnimation=e.querySelector(".loader-container"),this.currentUsersContent=e.querySelector(".current-users"),this.currentUsersTable=e.querySelector(".current-users tbody"),this.pendingUsersContent=e.querySelector(".pending-users"),this.pendingUsersToAddTable=e.querySelector(".pending-users tbody"),this.shareNotificationContainer=e.querySelector(".share-notification"),this.shareNotificationInput=e.querySelector(".share-notification > input"),this.app=t,this.projectsList=t.projectsList,this.currentUsersTable.addEventListener("click",(function(e){if(e.target.closest("[data-action]")){var t=e.target.closest("[data-action]");"stage"===t.dataset.action?n.stageMemberToRemove(t.parentElement):n.unstageMemberToRemove(t.parentElement)}})),this.pendingUsersToAddTable.addEventListener("click",(function(e){e.target.closest("[data-action]")&&n.unstageMemberToAdd(e.target.closest("[data-action]").parentElement)})),this.saveChanges=this.saveChanges.bind(this),this.stageMemberToAdd=this.stageMemberToAdd.bind(this),this.shareForm.onsubmit=this.stageMemberToAdd}return e.prototype.setUpDialog=function(e){this.pendingToRemove=[],c.emptyNode(this.currentUsersTable),this.pendingToAdd=[],c.emptyNode(this.pendingUsersToAddTable),this.pendingUsersContent.classList.add("hidden"),this.shareNotificationContainer.classList.add("hidden");for(var t=0;t<this.confirmChangesBtns.children.length;t++)this.confirmChangesBtns.children[t].classList.add("disabled");if(this.saveChangesBtn.onclick=null,this.cancelChangesBtn.onclick=null,this.projectData=e,this.projectItem=this.projectsList.querySelector('button[data-proj-id="'+e.id+'"]'),e.shared&&e.permissions){var n=[],r=window.getCurrentUser().emailAddress;e.permissions.forEach((function(e){n.push('\n          <tr data-permission="'+e.id+'">\n            <td class="user-data">\n              <img src="'+e.photoLink+'">\n              <div>\n                <span>'+(e.emailAddress===r?"You":e.displayName)+"</span>\n                <span>"+e.emailAddress+"</span>\n              </div>\n            </td>\n            "+("owner"===e.role?'<td title="Project owner"><svg><use href="#keyIcon"></use></svg></td>':'<td class="action-btn" data-action="stage"><svg><use href="#crossIcon"></use></svg></td>')+"\n          </tr>")})),this.currentUsersTable.innerHTML=n.join(""),this.currentUsersContent.classList.remove("empty")}else this.currentUsersContent.classList.add("empty")},e.prototype.stageMemberToAdd=function(e){e.preventDefault();var t=e.target.elements.namedItem("email").value;if(""===t||this.pendingToAdd.includes(t)||void 0!==this.projectData.permissions.find((function(e){return e.emailAddress===t})))this.shareFormErrorMsg.classList.remove("hidden"),console.log("Not valid input.");else if(this.shareFormErrorMsg.classList.add("hidden"),this.pendingToAdd.push(t),this.pendingUsersToAddTable.insertAdjacentHTML("beforeend",'\n        <tr data-email="'+t+'">\n          <td class="user-data"><span>'+t+'</span></td>\n          <td class="action-btn" data-action="stage"><svg><use href="#crossIcon"></use></svg></td>\n        </tr>'),e.target.elements.namedItem("email").value="",1===this.pendingToAdd.length&&(this.pendingUsersContent.classList.remove("hidden"),this.shareNotificationContainer.classList.remove("hidden"),this.shareNotificationInput.checked=!0,0===this.pendingToRemove.length)){for(var n=0;n<this.confirmChangesBtns.children.length;n++)this.confirmChangesBtns.children[n].classList.remove("disabled");this.saveChangesBtn.onclick=this.saveChanges,this.cancelChangesBtn.onclick=this.app.closeModalDialog}},e.prototype.unstageMemberToAdd=function(e){var t=this.pendingToAdd.indexOf(e.dataset.email);if(this.pendingToAdd.splice(t,1),e.remove(),0===this.pendingToAdd.length&&(this.pendingUsersContent.classList.add("hidden"),this.shareNotificationContainer.classList.add("hidden"),0===this.pendingToRemove.length)){for(var n=0;n<this.confirmChangesBtns.children.length;n++)this.confirmChangesBtns.children[n].classList.add("disabled");this.saveChangesBtn.onclick=null,this.cancelChangesBtn.onclick=null}},e.prototype.stageMemberToRemove=function(e){this.pendingToRemove.push(e.dataset.permission),e.classList.add("to-delete");var t=e.querySelector(".action-btn");if(t.innerHTML='<svg><use href="#reloadIcon"></use></svg>',t.dataset.action="unstage",0===this.pendingToAdd.length&&1===this.pendingToRemove.length){for(var n=0;n<this.confirmChangesBtns.children.length;n++)this.confirmChangesBtns.children[n].classList.remove("disabled");this.saveChangesBtn.onclick=this.saveChanges,this.cancelChangesBtn.onclick=this.app.closeModalDialog}},e.prototype.unstageMemberToRemove=function(e){var t=this.pendingToRemove.indexOf(e.dataset.permission);this.pendingToRemove.splice(t,1),e.classList.remove("to-delete");var n=e.querySelector(".action-btn");if(n.innerHTML='<svg><use href="#crossIcon"></use></svg>',n.dataset.action="stage",0===this.pendingToRemove.length&&0===this.pendingToAdd.length){for(var r=0;r<this.confirmChangesBtns.children.length;r++)this.confirmChangesBtns.children[r].classList.add("disabled");this.saveChangesBtn.onclick=null,this.cancelChangesBtn.onclick=null}},e.prototype.addStagedMembers=function(){var e=this,t=[];return this.pendingToAdd.forEach((function(n,r){t.push(h.shareFile(e.projectData.id,n,600*r))})),Promise.all(t)},e.prototype.removeStagedMembers=function(){var e=this,t=[];return this.pendingToRemove.forEach((function(n){t.push(h.stopSharingFile(e.projectData.id,n))})),Promise.all(t)},e.prototype.saveChanges=function(){return D(this,void 0,void 0,(function(){var e,t,n=this;return k(this,(function(r){switch(r.label){case 0:return this.waitingAnimation.classList.remove("hidden"),e=!0,t=!0,this.pendingToRemove.length>0?[4,this.removeStagedMembers().then((function(e){n.pendingToRemove.forEach((function(e){var t=n.projectData.permissions.findIndex((function(t){return t.id===e}));n.projectData.permissions.splice(t,1)}))}),(function(e){console.log(e),t=!1}))]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.pendingToAdd.length>0?[4,this.addStagedMembers().then((function(e){e.forEach((function(e,t){n.projectData.permissions.push({id:e.result.id,emailAddress:n.pendingToAdd[t],role:e.result.role,displayName:e.result.displayName,photoLink:e.result.photoLink})})),n.shareNotificationInput.checked&&h.sendSharingProjectEmail(window.getCurrentUser().displayName,n.pendingToAdd,n.projectData.name,n.projectData.id),window.saveMessagingDeviceToken()}),(function(t){console.log(t),e=!1}))]:[3,4];case 3:r.sent(),r.label=4;case 4:return e&&t?(1===this.projectData.permissions.length?(this.projectData.shared=!1,this.projectItem.querySelector(".sharedIcon")&&this.projectItem.querySelector(".sharedIcon").remove()):(this.projectData.shared=!0,this.projectItem.querySelector(".sharedIcon")||this.projectItem.insertAdjacentHTML("afterbegin",'<img class="sharedIcon" src="src/assets/icons/shareIcon.svg">')),this.app.showMessage("success",["Project members updated successfully."],5e3)):this.app.showMessage("error",["Something went wrong, member changes could no be saved."]),this.waitingAnimation.classList.add("hidden"),this.app.closeModalDialog(),[2]}}))}))},e}(),A=function(){function e(){var e=this;this.notifications=[],this.notificationsBtn=document.getElementById("notificationBtn"),this.notificationsContainer=document.getElementById("notificationsContainer"),this.notificationsList=document.querySelector("#notificationsContainer > .notifications-body"),this.notificationsBtn.onclick=function(){return e.notificationsContainer.classList.toggle("open")},this.notificationsList.addEventListener("click",(function(t){var n=t.target.closest("li");n&&e.viewNotification(n.dataset.id)}))}return e.prototype.createNotificaction=function(e){var t=document.createElement("li"),n=c.uuidv4();t.dataset.id=n,t.classList.add("pending"),t.innerHTML='\n      <img class="notification-thumb" src="'+e.photoLink+'">\n      <div class="notification-content">\n        <h4>'+e.author+" mentioned you in a comment on the project "+e.projectName+"</h4>\n        <p>"+e.text+"</p>\n      </div>",this.notificationsList.prepend(t),this.notifications.push({id:n,representation:t,state:"pending",data:e}),this.notificationsBtn.classList.add("enabled"),1===this.notifications.length&&this.notificationsContainer.classList.remove("empty")},e.prototype.deleteNotificaction=function(e){var t=this.notifications.findIndex((function(t){return t.id===e}));this.notifications[t].representation.remove(),this.notifications.splice(t,1)},e.prototype.viewNotification=function(e){var t=this.notifications.find((function(t){return t.id===e}));t.state="read",t.representation.classList.remove("pending"),void 0===this.notifications.find((function(e){return"pending"===e.state}))&&this.notificationsBtn.classList.remove("enabled")},e}(),x=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},M=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},L=function(){function e(e,t){var n=this;this.emptyInputValue=new RegExp(/^(\s|\t)*$/),this.htmlContainer=e,this.renameForm=e.querySelector("form"),this.input=e.querySelector("form > div:first-child > input"),this.renameProjectErrorMsg=e.querySelector(".error-msg"),this.cancelBtn=e.querySelector("form > div:last-child > .cancel-btn"),this.app=t,this.renameProject=this.renameProject.bind(this),this.renameForm.onsubmit=this.renameProject,this.cancelBtn.onclick=function(e){e.preventDefault(),n.setInputValue(""),t.closeModalDialog()}}return e.prototype.setUpDialog=function(e){this.projectListItem=e,this.projectId=e.dataset.projId,this.currentName=e.dataset.name,this.renameProjectErrorMsg.classList.add("hidden"),this.setInputValue(this.currentName)},e.prototype.renameProject=function(e){return x(this,void 0,void 0,(function(){var t,n;return M(this,(function(r){switch(r.label){case 0:return e.preventDefault(),""===this.input.value||this.emptyInputValue.test(this.input.value)?(this.renameProjectErrorMsg.classList.remove("hidden"),[3,6]):[3,1];case 1:return this.input.value.trim()!==this.currentName?[3,2]:(this.setInputValue(""),this.app.closeModalDialog(),[3,6]);case 2:this.renameProjectErrorMsg.classList.add("hidden"),r.label=3;case 3:return r.trys.push([3,5,,6]),[4,h.renameFile(this.projectId,this.input.value.trim())];case 4:return 200===(t=r.sent()).status?(this.projectListItem.querySelector("h4").innerText=t.result.name,this.projectListItem.dataset.name=t.result.name,this.setInputValue(""),this.app.closeModalDialog(),this.app.showMessage("success",["Project renamed successfully."],5e3)):(this.app.closeModalDialog(),this.app.showMessage("error",["It was not possible to rename the project."]),console.error("Something went wrong renaming a project. ",t)),[3,6];case 5:return n=r.sent(),this.app.closeModalDialog(),this.app.showMessage("error",["It was not possible to rename the project.",n.result.error.message]),console.error("Something went wrong renaming a project. ",n),[3,6];case 6:return[2]}}))}))},e.prototype.setInputValue=function(e){this.input.value=e},e}(),P=function(){function e(){var e=this;this.visible=!1,this.HTMLContainer=document.createElement("div"),this.HTMLContainer.id="contextMenu",this.menuListContainer=document.createElement("ul"),this.HTMLContainer.appendChild(this.menuListContainer),this.HTMLContainer.style.display="none",window.addEventListener("click",(function(){e.visible&&e.toggleMenu("hide")})),window.addEventListener("contextmenu",(function(t){t.preventDefault();var n=t.target.closest("[data-cxmenu]");n&&n.hasOwnProperty("contextMenuData")?(e.clearMenu(),e.generateMenu(n.contextMenuData),e.setPosition(t.pageY,t.pageX)):e.visible&&e.toggleMenu("hide")})),window.document.body.appendChild(this.HTMLContainer)}return e.prototype.toggleMenu=function(e){this.HTMLContainer.style.display="show"===e?"block":"none",this.visible=!this.visible},e.prototype.setPosition=function(e,t){this.HTMLContainer.style.left=t+"px",this.HTMLContainer.style.top=e+"px",this.toggleMenu("show")},e.prototype.clearMenu=function(){this.menuListContainer.childNodes.forEach((function(e){return e.onclick=null})),c.emptyNode(this.menuListContainer)},e.prototype.generateMenu=function(e){for(var t=new DocumentFragment,n=0;n<e.length;n++){var r=document.createElement("li");r.innerText=e[n].name,r.onclick=e[n].action,t.appendChild(r)}this.menuListContainer.appendChild(t)},e}(),O=function(e,t){var n=this;this.HTMLContainer=document.createElement("button"),"temporal"===e.id&&this.HTMLContainer.classList.add("unsync"),this.HTMLContainer.dataset.projId=e.id,this.HTMLContainer.dataset.name=e.name,this.HTMLContainer.classList.add("projectItem");var r=[];e.shared&&r.push('<svg class="sharedIcon"><use href="#sharedIcon" /></svg>'),e.thumbId?r.push('<img class="thumb" src="https://drive.google.com/uc?id='+e.thumbId+'">'):r.push('<svg class="thumb" xmlns="http://www.w3.org/2000/svg" viewBox="-100 -50 350 210"><path d="M143,10.44H65.27V7a7,7,0,0,0-7-7H7A7,7,0,0,0,0,7V103a7,7,0,0,0,7,7H65V70.18H85V110h58a7,7,0,0,0,7-7V17.41A7,7,0,0,0,143,10.44ZM125,53.49H105v-20h20Z" style="fill:#e6e6e6"/></svg>'),r.push("<h4>"+e.name+"</h4>"),this.HTMLContainer.innerHTML=r.join(""),this.HTMLContainer.dataset.cxmenu="",this.HTMLContainer.contextMenuData=[{name:"Delete",action:function(){t.showViewportDialog("action","Are you sure you want to delete the "+e.name+" project?",[{name:"Delete",function:function(){t.showViewportDialog("loader","Deleting "+e.name+" project."),h.deleteFile(e.id).then((function(r){n.HTMLContainer.remove();var i=t.projectsData.findIndex((function(t){return t.id===e.id}));t.projectsData.splice(i,1),t.hideViewportMessage(),t.showMessage("success",["Project deleted successfully"])}),(function(e){t.hideViewportMessage(),t.showMessage("error",["It was not possible to delete the project.",e.result.error.message])}))}},{name:"Cancel",function:function(){t.hideViewportMessage()}}])}},{name:"Share project",action:function(){t.shareProjectDialog.setUpDialog(e),t.showModalDialog(t.shareProjectDialog.htmlContainer),t.modalDialogContainer.classList.add("grayTranslucent")}},{name:"Rename",action:function(){t.renameProjectDialog.setUpDialog(n.HTMLContainer),t.showModalDialog(t.renameProjectDialog.htmlContainer)}}]},R=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},j=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},B=function(){function e(){var e=this;this.userInfoContainer=document.getElementById("user-info"),this.workspacesContainer=document.getElementById("workspaces"),this.projectsListBtn=document.getElementById("projectsListBtn"),this.drawingsBtns=document.getElementById("drawingsBtns"),this.toolbarsContainer=document.getElementById("toolbarsContainer"),this.modalDialogContainer=document.getElementById("modalDialogContainer"),this.modalDialogContent=this.modalDialogContainer.querySelector(".modal-content"),this.modalDialogsStorage=document.getElementById("modalDialogsStorage"),this.closeModalBtn=document.getElementById("closeModalBtn"),this.closeModalDialog=this.closeModalDialog.bind(this),this.closeModalBtn.onclick=this.closeModalDialog,this.viewportMessage=document.getElementById("viewportMessage"),this.projectsListContainer=document.getElementById("projectsListContainer"),this.projectsList=document.getElementById("projectsList"),this.closeProjectsListBtn=document.getElementById("closeProjectsListBtn"),this.panelsStorage=document.getElementById("panelsStorage"),this.saveBtn=document.getElementById("saveBtn"),this.saveCommentsData=this.saveCommentsData.bind(this),this.saveBtn.onclick=this.saveCommentsData,this.closeProjectsList=this.closeProjectsList.bind(this),this.projectsListBtn.onclick=function(){"true"===e.projectsListBtn.dataset.open?e.closeProjectsList():"false"===e.projectsListBtn.dataset.open&&e.openProjectsList()},this.closeProjectsListBtn.addEventListener("click",this.closeProjectsList),this.goToProject=this.goToProject.bind(this),this.projectsList.addEventListener("click",this.goToProject),this.uploadFileForm=document.getElementById("uploadFileForm"),this.fileInput=document.getElementById("fileInput"),this.submitFileBtn=this.uploadFileForm.querySelector('button[type="submit"]'),document.getElementById("newProjectBtn").addEventListener("click",(function(){e.showModalDialog(e.uploadFileForm),e.modalDialogContainer.classList.add("grayTranslucent")})),this.fileInput.addEventListener("change",(function(){e.fileInput.files.length>0?(e.fileInput.nextElementSibling.innerHTML=e.fileInput.files[0].name,e.submitFileBtn.classList.remove("disabled")):(e.fileInput.nextElementSibling.innerHTML="Choose a file",e.submitFileBtn.classList.add("disabled"))})),this.uploadFileForm.onsubmit=function(t){t.preventDefault(),document.getElementById("loadingFile").style.display="unset",e.submitFileBtn.classList.add("disabled"),e.submitFileBtn.innerHTML="Uploading file",e.fileInput.nextElementSibling.style.display="none";var n=t.target.elements.namedItem("file").files[0];h.createProject(n,e,e.lastUploadedProject).then((function(t){e.updateProjectsList(t),e.closeModalDialog(),e.showMessage("success",["Project uploaded successfully."]),e.fileInput.value="",document.getElementById("loadingFile").style.display="none",e.fileInput.nextElementSibling.innerHTML="Choose a file",e.submitFileBtn.innerHTML="Upload",e.fileInput.nextElementSibling.style.display="unset"}),(function(t){e.closeModalDialog(),e.updateProjectsList(e.lastUploadedProject),console.error(t)}))},this.renameProjectDialog=new L(document.getElementById("renameProjectForm"),this),this.shareProjectDialog=new N(document.getElementById("shareProjectDialog"),this),this.messageContainer=document.getElementById("messageContainer"),this.closeMessage=this.closeMessage.bind(this),this.messageContainer.querySelector("button").onclick=this.closeMessage,window.onresize=this.adjustItems,document.getElementById("tool-4").addEventListener("click",(function(t){return e.currentWorkspace.manageTools(t,_,"elementsDataTool")})),document.getElementById("tool-5").addEventListener("click",(function(t){return e.currentWorkspace.manageTools(t,S,"commentsTool")})),this.notificationsManager=new A,this.contextMenu=new P}return e.prototype.setUserInfo=function(e){return void 0===e&&(e={}),R(this,void 0,void 0,(function(){var t;return j(this,(function(n){switch(n.label){case 0:return c.isObjectEmpty(e)?[4,h.getUserInfo()]:[3,2];case 1:return t=n.sent(),this.userInfo=JSON.parse(t.body).user,[3,3];case 2:this.userInfo=e,n.label=3;case 3:return this.userInfoContainer.innerHTML="\n      <img src="+this.userInfo.photoLink+">\n      <span>\n        <span>"+this.userInfo.displayName+'</span><span class="email">'+this.userInfo.emailAddress+"</span>\n      </span>",[2]}}))}))},e.prototype.saveCommentsData=function(){return R(this,void 0,void 0,(function(){var e,t,n,r,i,o,a,s,u,c,l,d=this;return j(this,(function(f){switch(f.label){case 0:return this.currentWorkspace&&this.currentWorkspace.commentsChangesUnsaved?(this.commentsChangesUnsaved=!1,this.saveBtn.classList.remove("enabled"),this.saveBtn.classList.add("progress"),e=void 0,t=[],this.currentWorkspace.comments.forEach((function(e){t.push({elementsIds:e.elementsIds,content:e.content,mentions:e.mentions})})),n=JSON.stringify(t),this.currentWorkspace.commentsFileId?[3,8]:[4,h.uploadFile(n,"application/json","comments.json",this.currentWorkspace.projectId)]):[3,13];case 1:if(!(r=f.sent()).ok||200!==r.status)return[3,6];f.label=2;case 2:return f.trys.push([2,4,,5]),i=new TextDecoder("utf-8"),[4,r.body.getReader().read()];case 3:return o=f.sent(),a=o.value,o.done,s=JSON.parse(i.decode(a)).id,this.currentWorkspace.commentsFileId=s,e=!0,[3,5];case 4:return u=f.sent(),console.log("Error decoding the new comments.json file id: ",u),[3,5];case 5:return[3,7];case 6:e=!1,f.label=7;case 7:return[3,10];case 8:return[4,h.updateFileContent(n,"application/json",this.currentWorkspace.commentsFileId)];case 9:(c=f.sent()).ok&&200===c.status&&(e=!0),f.label=10;case 10:return e&&this.currentWorkspace.pendingNotificationsToSend.length>0?(l=[],this.currentWorkspace.pendingNotificationsToSend.forEach((function(e){var t=h.sendNotification(e.emails,e.userName,e.userPhoto,e.textContent,e.projectName,e.projectId);l.push(t)})),[4,Promise.all(l).then((function(e){console.log("Users notified successfully"),d.currentWorkspace.pendingNotificationsToSend.length=0}),(function(e){console.warn("Users couldn't be notified. ",e)}))]):[3,12];case 11:f.sent(),f.label=12;case 12:e?(this.saveBtn.classList.remove("progress"),this.saveBtn.classList.add("disabled"),console.log("Data saved successfully.")):(this.commentsChangesUnsaved=!0,this.saveBtn.classList.remove("progress"),this.saveBtn.classList.add("enabled"),this.showMessage("error",["Something went wrong and data could not be saved."]),console.error("Something went wrong trying to save. Retry again.")),f.label=13;case 13:return[2]}}))}))},e.prototype.goToProject=function(e){var t=this,n=e.target.closest("[data-proj-id]");null!==n&&(this.currentWorkspace&&this.currentWorkspace.projectId===n.dataset.projId||(this.lastUploadedProject&&n.dataset.projId===this.lastUploadedProject.id?("temporal"===this.lastUploadedProject.id&&console.log("Show a message indicating that the project can be accessed but in viewer mode because it couldnt be saved."),this.openProject(this.lastUploadedProject),this.previousActiveItem&&this.previousActiveItem.classList.remove("current"),n.classList.add("current"),this.previousActiveItem=n,this.projectsListBtn.style.display="unset"):(this.showViewportDialog("loader","Loading project "+n.dataset.name),h.fetchProject(n.dataset.projId,this).then((function(e){t.openProject(e),t.previousActiveItem&&t.previousActiveItem.classList.remove("current"),n.classList.add("current"),t.previousActiveItem=n,t.projectsListBtn.style.display="unset",t.hideViewportMessage()}),(function(e){console.log(e)})))))},e.prototype.openProject=function(e){this.currentWorkspace&&this.currentWorkspace.close(),this.currentWorkspace=new y(e,this),this.projectsListContainer.style.display="none",history.replaceState({projectTitle:e.name},e.name,"?id="+e.id)},e.prototype.closeProjectsList=function(){this.projectsListContainer.style.display="none",this.drawingsBtns.style.display="unset",this.toolbarsContainer.style.display="flex",this.projectsListBtn.dataset.open="false"},e.prototype.openProjectsList=function(){var e=this;void 0===this.currentWorkspace?this.closeProjectsListBtn.classList.add("hidden"):this.closeProjectsListBtn.classList.remove("hidden"),this.projectsListContainer.style.display="block",this.projectsListBtn.dataset.open="true",this.drawingsBtns.style.display="none",this.toolbarsContainer.style.display="none",(void 0===this.projectsData||this.projectsData.length<=1)&&(this.showViewportDialog("loader","Loading projects"),h.listProjectItems(this).then((function(t){e.createHTMLProjectsList(t),e.projectsList.childNodes.forEach((function(t){t.dataset&&t.dataset.projId===e.currentWorkspace.projectId&&(t.classList.add("current"),e.previousActiveItem=t)})),e.hideViewportMessage()}),(function(t){e.projectsList.innerHTML='<p class="empty-msg">There are no projects. Upload one!</p>',e.hideViewportMessage()})))},e.prototype.createHTMLProjectsList=function(e){var t=this;e.forEach((function(e){var n=new O(e,t);t.projectsList.appendChild(n.HTMLContainer)})),this.adjustItems()},e.prototype.adjustItems=function(){var e=Number(getComputedStyle(this.projectsList).getPropertyValue("--items-h")),t=this.projectsList.children.length;this.projectsList.style.setProperty("--remaining-items",(Math.ceil(t/e)*e-t).toString())},e.prototype.updateProjectsList=function(e){this.projectsData.length<=1&&this.projectsList.querySelector(".empty-msg").remove();var t=new O(e,this);this.projectsList.prepend(t.HTMLContainer),this.adjustItems()},e.prototype.showMessage=function(e,t,n){var r=this;switch(void 0===n&&(n=void 0),""!==this.messageContainer.dataset.type?(this.messageContainer.classList.remove(this.messageContainer.dataset.type),this.messageTimerId&&(window.clearTimeout(this.messageTimerId),this.messageTimerId=void 0)):this.messageContainer.style.display="flex",this.messageContainer.dataset.type=e,this.messageContainer.querySelector(".message-content").innerHTML=t.map((function(e){return"<p>"+e+"</p>"})).join(""),e){case"success":this.messageContainer.classList.add("success");break;case"warning":this.messageContainer.classList.add("warning");break;case"error":this.messageContainer.classList.add("error")}n&&(this.messageTimerId=window.setTimeout((function(){return r.closeMessage()}),n))},e.prototype.closeMessage=function(){this.messageContainer.style.display="none",this.messageContainer.classList.remove(this.messageContainer.dataset.type),this.messageContainer.dataset.type="",this.messageTimerId&&(clearTimeout(this.messageTimerId),this.messageTimerId=void 0)},e.prototype.showViewportDialog=function(e,t,n){void 0===n&&(n=[]),this.viewportMessage.querySelector(".btns-container")&&this.viewportMessage.querySelectorAll(".btns-container > button").forEach((function(e){return e.onclick=null})),c.emptyNode(this.viewportMessage);var r=document.createElement("div");if("loader"===e)r.innerHTML="<p>"+t+'</p><svg class="svg-loader"><use href="#vaLoader"/></svg>';else if("action"===e&&n.length>0){r.innerHTML="<p>"+t+"</p>";var i=document.createElement("div");i.classList.add("btns-container"),n.forEach((function(e){var t=document.createElement("button");t.innerHTML=e.name,t.classList.add("buttonBase","light"),t.onclick=e.function,i.appendChild(t)})),r.appendChild(i)}else"message"===e&&(r.innerHTML="<p>"+t+"</p>");this.viewportMessage.appendChild(r),this.viewportMessage.classList.add("active")},e.prototype.hideViewportMessage=function(){this.viewportMessage.classList.remove("active")},e.prototype.showModalDialog=function(e,t,n){void 0===t&&(t="translucent"),void 0===n&&(n=!0),this.modalDialogContainer.classList.value="","translucent"===t?this.modalDialogContainer.classList.add("grayTranslucent"):"opaque"===t&&this.modalDialogContainer.classList.add("lightOpaque"),this.closeModalBtn.style.display=n?"unset":"none",this.modalDialogContent.appendChild(e),this.modalDialogContainer.style.display="flex"},e.prototype.closeModalDialog=function(){var e=this.modalDialogContent.firstElementChild;this.modalDialogContainer.style.display="none",this.modalDialogsStorage.appendChild(e)},e.prototype.start=function(e){var t=this,n=void 0===e?{}:e,r=n.projectId,i=void 0===r?"":r,o=n.mainFolderId,a=void 0===o?"":o;document.querySelector("header").style.display="flex",document.querySelector("main").style.display="block",""!==i?(this.showViewportDialog("loader","Loading project"),h.fetchProject(i,this).then((function(e){t.currentWorkspace=new y(e,t),t.createHTMLProjectsList([e]),t.projectsListBtn.style.display="unset",t.hideViewportMessage(),e.permissions.length>1&&window.saveMessagingDeviceToken()}),(function(e){console.log(e);var n=void 0===e.body?e:"Message: "+JSON.parse(e.body).error.message+" Code: "+JSON.parse(e.body).error.code;t.showViewportDialog("action",n,[{name:"View projects list",function:function(){t.openProjectsList(),""!==location.search&&history.replaceState({page:"Projects list"},"Projects list",location.href.replace(location.search,""))}}])}))):(""!==location.search&&history.replaceState({page:"Projects list"},"Projects list",location.href.replace(location.search,"")),this.projectsListContainer.style.display="block",this.showViewportDialog("loader","Loading projects"),h.listProjectItems(this,a||"").then((function(e){if(t.createHTMLProjectsList(e),t.hideViewportMessage(),window.thereIsMessaging)for(var n=0;n<e.length;n++)if(e[n].permissions.length>1){window.saveMessagingDeviceToken();break}}),(function(e){t.projectsList.innerHTML='<p class="empty-msg">There are no projects. Upload one!</p>',t.hideViewportMessage()})))},e}(),F=n(4),V=n(3),q=n.n(V),U=n(2),W=n(0),z=n(1),K=n(7),G="@firebase/installations",Q="0.3.8",H=1e4,Y="w:"+Q,J="FIS_v2",X="https://firebaseinstallations.googleapis.com/v1",$=36e5,Z=((p={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',p["not-registered"]="Firebase Installation is not registered.",p["installation-not-found"]="Firebase Installation not found.",p["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',p["app-offline"]="Could not process request. Application offline.",p["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",p),ee=new z.ErrorFactory("installations","Installations",Z);function te(e){return e instanceof z.FirebaseError&&e.code.includes("request-failed")}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ne(e){var t=e.projectId;return X+"/projects/"+t+"/installations"}function re(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}function ie(e,t){return Object(W.__awaiter)(this,void 0,void 0,(function(){var n,r;return Object(W.__generator)(this,(function(i){switch(i.label){case 0:return[4,t.json()];case 1:return n=i.sent(),r=n.error,[2,ee.create("request-failed",{requestName:e,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})]}}))}))}function oe(e){var t=e.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function ae(e,t){var n=t.refreshToken,r=oe(e);return r.append("Authorization",function(e){return J+" "+e}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(n)),r}function se(e){return Object(W.__awaiter)(this,void 0,void 0,(function(){var t;return Object(W.__generator)(this,(function(n){switch(n.label){case 0:return[4,e()];case 1:return(t=n.sent()).status>=500&&t.status<600?[2,e()]:[2,t]}}))}))}function ue(e,t){var n=t.fid;return Object(W.__awaiter)(this,void 0,void 0,(function(){var t,r,i,o,a,s;return Object(W.__generator)(this,(function(u){switch(u.label){case 0:return t=ne(e),r=oe(e),i={fid:n,authVersion:J,appId:e.appId,sdkVersion:Y},o={method:"POST",headers:r,body:JSON.stringify(i)},[4,se((function(){return fetch(t,o)}))];case 1:return(a=u.sent()).ok?[4,a.json()]:[3,3];case 2:return s=u.sent(),[2,{fid:s.fid||n,registrationStatus:2,refreshToken:s.refreshToken,authToken:re(s.authToken)}];case 3:return[4,ie("Create Installation",a)];case 4:throw u.sent()}}))}))}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ce(e){return new Promise((function(t){setTimeout(t,e)}))}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var le=/^[cdef][\w-]{21}$/,he="";function de(){try{var e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;var t=function(e){return(t=e,btoa(String.fromCharCode.apply(String,Object(W.__spread)(t))).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22);var t}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e);return le.test(t)?t:he}catch(e){return he}}var fe,pe="firebase-installations-database",me=1,ge="firebase-installations-store",ye=null;function ve(){return ye||(ye=Object(K.openDb)(pe,me,(function(e){switch(e.oldVersion){case 0:e.createObjectStore(ge)}}))),ye}function be(e,t){return Object(W.__awaiter)(this,void 0,void 0,(function(){var n,r,i;return Object(W.__generator)(this,(function(o){switch(o.label){case 0:return n=Se(e),[4,ve()];case 1:return r=o.sent(),[4,(i=r.transaction(ge,"readwrite")).objectStore(ge).put(t,n)];case 2:return o.sent(),[4,i.complete];case 3:return o.sent(),[2,t]}}))}))}function we(e){return Object(W.__awaiter)(this,void 0,void 0,(function(){var t,n,r;return Object(W.__generator)(this,(function(i){switch(i.label){case 0:return t=Se(e),[4,ve()];case 1:return n=i.sent(),[4,(r=n.transaction(ge,"readwrite")).objectStore(ge).delete(t)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}}))}))}function Te(e,t){return Object(W.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o,a,s;return Object(W.__generator)(this,(function(u){switch(u.label){case 0:return n=Se(e),[4,ve()];case 1:return r=u.sent(),i=r.transaction(ge,"readwrite"),[4,(o=i.objectStore(ge)).get(n)];case 2:return a=u.sent(),void 0!==(s=t(a))?[3,4]:[4,o.delete(n)];case 3:return u.sent(),[3,6];case 4:return[4,o.put(s,n)];case 5:u.sent(),u.label=6;case 6:return[4,i.complete];case 7:return u.sent(),[2,s]}}))}))}function Se(e){return e.appName+"!"+e.appId}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ie(e){return Object(W.__awaiter)(this,void 0,void 0,(function(){var t,n,r;return Object(W.__generator)(this,(function(i){switch(i.label){case 0:return[4,Te(e,(function(n){var r=function(e){return _e(e||{fid:de(),registrationStatus:0})}(n),i=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine){var n=Promise.reject(ee.create("app-offline"));return{installationEntry:t,registrationPromise:n}}var r={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},i=function(e,t){return Object(W.__awaiter)(this,void 0,void 0,(function(){var n,r;return Object(W.__generator)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,7]),[4,ue(e,t)];case 1:return n=i.sent(),[2,be(e,n)];case 2:return te(r=i.sent())&&409===r.serverCode?[4,we(e)]:[3,4];case 3:return i.sent(),[3,6];case 4:return[4,be(e,{fid:t.fid,registrationStatus:0})];case 5:i.sent(),i.label=6;case 6:throw r;case 7:return[2]}}))}))}(e,r);return{installationEntry:r,registrationPromise:i}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:Ee(e)}:{installationEntry:t}}(e,r);return t=i.registrationPromise,i.installationEntry}))];case 1:return(n=i.sent()).fid!==he?[3,3]:(r={},[4,t]);case 2:return[2,(r.installationEntry=i.sent(),r)];case 3:return[2,{installationEntry:n,registrationPromise:t}]}}))}))}function Ee(e){return Object(W.__awaiter)(this,void 0,void 0,(function(){var t,n,r,i;return Object(W.__generator)(this,(function(o){switch(o.label){case 0:return[4,Ce(e)];case 1:t=o.sent(),o.label=2;case 2:return 1!==t.registrationStatus?[3,5]:[4,ce(100)];case 3:return o.sent(),[4,Ce(e)];case 4:return t=o.sent(),[3,2];case 5:return 0!==t.registrationStatus?[3,7]:[4,Ie(e)];case 6:return n=o.sent(),r=n.installationEntry,(i=n.registrationPromise)?[2,i]:[2,r];case 7:return[2,t]}}))}))}function Ce(e){return Te(e,(function(e){if(!e)throw ee.create("installation-not-found");return _e(e)}))}function _e(e){return 1===(t=e).registrationStatus&&t.registrationTime+H<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t;
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}function De(e,t){var n=e.appConfig,r=e.platformLoggerProvider;return Object(W.__awaiter)(this,void 0,void 0,(function(){var e,i,o,a,s,u,c;return Object(W.__generator)(this,(function(l){switch(l.label){case 0:return e=function(e,t){var n=t.fid;return ne(e)+"/"+n+"/authTokens:generate"}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(n,t),i=ae(n,t),(o=r.getImmediate({optional:!0}))&&i.append("x-firebase-client",o.getPlatformInfoString()),a={installation:{sdkVersion:Y}},s={method:"POST",headers:i,body:JSON.stringify(a)},[4,se((function(){return fetch(e,s)}))];case 1:return(u=l.sent()).ok?[4,u.json()]:[3,3];case 2:return c=l.sent(),[2,re(c)];case 3:return[4,ie("Generate Auth Token",u)];case 4:throw l.sent()}}))}))}function ke(e,t){return void 0===t&&(t=!1),Object(W.__awaiter)(this,void 0,void 0,(function(){var n,r,i;return Object(W.__generator)(this,(function(o){switch(o.label){case 0:return[4,Te(e.appConfig,(function(r){if(!Ae(r))throw ee.create("not-registered");var i=r.authToken;if(!t&&function(e){return 2===e.requestStatus&&!function(e){var t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+$}(e)}(i))return r;if(1===i.requestStatus)return n=function(e,t){return Object(W.__awaiter)(this,void 0,void 0,(function(){var n,r;return Object(W.__generator)(this,(function(i){switch(i.label){case 0:return[4,Ne(e.appConfig)];case 1:n=i.sent(),i.label=2;case 2:return 1!==n.authToken.requestStatus?[3,5]:[4,ce(100)];case 3:return i.sent(),[4,Ne(e.appConfig)];case 4:return n=i.sent(),[3,2];case 5:return 0===(r=n.authToken).requestStatus?[2,ke(e,t)]:[2,r]}}))}))}(e,t),r;if(!navigator.onLine)throw ee.create("app-offline");var o=function(e){var t={requestStatus:1,requestTime:Date.now()};return Object(W.__assign)(Object(W.__assign)({},e),{authToken:t})}(r);return n=function(e,t){return Object(W.__awaiter)(this,void 0,void 0,(function(){var n,r,i;return Object(W.__generator)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,8]),[4,De(e,t)];case 1:return n=o.sent(),i=Object(W.__assign)(Object(W.__assign)({},t),{authToken:n}),[4,be(e.appConfig,i)];case 2:return o.sent(),[2,n];case 3:return!te(r=o.sent())||401!==r.serverCode&&404!==r.serverCode?[3,5]:[4,we(e.appConfig)];case 4:return o.sent(),[3,7];case 5:return i=Object(W.__assign)(Object(W.__assign)({},t),{authToken:{requestStatus:0}}),[4,be(e.appConfig,i)];case 6:o.sent(),o.label=7;case 7:throw r;case 8:return[2]}}))}))}(e,o),o}))];case 1:return r=o.sent(),n?[4,n]:[3,3];case 2:return i=o.sent(),[3,4];case 3:i=r.authToken,o.label=4;case 4:return[2,i]}}))}))}function Ne(e){return Te(e,(function(e){if(!Ae(e))throw ee.create("not-registered");var t,n=e.authToken;return 1===(t=n).requestStatus&&t.requestTime+H<Date.now()?Object(W.__assign)(Object(W.__assign)({},e),{authToken:{requestStatus:0}}):e}))}function Ae(e){return void 0!==e&&2===e.registrationStatus}function xe(e){return Object(W.__awaiter)(this,void 0,void 0,(function(){var t;return Object(W.__generator)(this,(function(n){switch(n.label){case 0:return[4,Ie(e)];case 1:return(t=n.sent().registrationPromise)?[4,t]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}}))}))}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Me(e,t){return Object(W.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o;return Object(W.__generator)(this,(function(a){switch(a.label){case 0:return n=function(e,t){var n=t.fid;return ne(e)+"/"+n}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e,t),r=ae(e,t),i={method:"DELETE",headers:r},[4,se((function(){return fetch(n,i)}))];case 1:return(o=a.sent()).ok?[3,3]:[4,ie("Delete Installation",o)];case 2:throw a.sent();case 3:return[2]}}))}))}function Le(e){return ee.create("missing-app-config-values",{valueName:e})}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(fe=q.a).INTERNAL.registerComponent(new U.Component("installations",(function(e){var t=e.getProvider("app").getImmediate(),n={appConfig:
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(e){var t,n;if(!e||!e.options)throw Le("App Configuration");if(!e.name)throw Le("App Name");try{for(var r=Object(W.__values)(["projectId","apiKey","appId"]),i=r.next();!i.done;i=r.next()){var o=i.value;if(!e.options[o])throw Le(o)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t),platformLoggerProvider:e.getProvider("platform-logger")};return{app:t,getId:function(){
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */return function(e){return Object(W.__awaiter)(this,void 0,void 0,(function(){var t,n,r;return Object(W.__generator)(this,(function(i){switch(i.label){case 0:return[4,Ie(e.appConfig)];case 1:return t=i.sent(),n=t.installationEntry,(r=t.registrationPromise)?r.catch(console.error):ke(e).catch(console.error),[2,n.fid]}}))}))}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(n)},getToken:function(e){return function(e,t){return void 0===t&&(t=!1),Object(W.__awaiter)(this,void 0,void 0,(function(){return Object(W.__generator)(this,(function(n){switch(n.label){case 0:return[4,xe(e.appConfig)];case 1:return n.sent(),[4,ke(e,t)];case 2:return[2,n.sent().token]}}))}))}(n,e)},delete:function(){return function(e){return Object(W.__awaiter)(this,void 0,void 0,(function(){var t,n;return Object(W.__generator)(this,(function(r){switch(r.label){case 0:return[4,Te(t=e.appConfig,(function(e){if(!e||0!==e.registrationStatus)return e}))];case 1:if(!(n=r.sent()))return[3,6];if(1!==n.registrationStatus)return[3,2];throw ee.create("delete-pending-registration");case 2:if(2!==n.registrationStatus)return[3,6];if(navigator.onLine)return[3,3];throw ee.create("app-offline");case 3:return[4,Me(t,n)];case 4:return r.sent(),[4,we(t)];case 5:r.sent(),r.label=6;case 6:return[2]}}))}))}(n)}}}),"PUBLIC")),fe.registerVersion(G,Q);
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Pe,Oe,Re,je="measurementId",Be="firebase_id",Fe="origin",Ve="https://www.googletagmanager.com/gtag/js";function qe(e,t,n){var r=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];window[t].push(arguments)};return window[n]&&"function"==typeof window[n]&&(r=window[n]),window[n]=function(e,t){return function(n,r,i){if(n===Pe.EVENT){var o=[];if(i&&i.send_to){var a=i.send_to;Array.isArray(a)||(a=[a]);for(var s=0,u=a;s<u.length;s++){var c=u[s],l=t[c];if(!l){o=[];break}o.push(l)}}if(0===o.length)for(var h=0,d=Object.values(t);h<d.length;h++){var f=d[h];o.push(f)}Promise.all(o).then((function(){return e(Pe.EVENT,r,i||{})})).catch((function(e){return console.error(e)}))}else if(n===Pe.CONFIG){(t[r]||Promise.resolve()).then((function(){e(Pe.CONFIG,r,i)})).catch((function(e){return console.error(e)}))}else e(Pe.SET,r)}}(r,e),{gtagCore:r,wrappedGtag:window[n]}}!function(e){e.EVENT="event",e.SET="set",e.CONFIG="config"}(Pe||(Pe={})),function(e){e.ADD_PAYMENT_INFO="add_payment_info",e.ADD_TO_CART="add_to_cart",e.ADD_TO_WISHLIST="add_to_wishlist",e.BEGIN_CHECKOUT="begin_checkout",e.CHECKOUT_PROGRESS="checkout_progress",e.EXCEPTION="exception",e.GENERATE_LEAD="generate_lead",e.LOGIN="login",e.PAGE_VIEW="page_view",e.PURCHASE="purchase",e.REFUND="refund",e.REMOVE_FROM_CART="remove_from_cart",e.SCREEN_VIEW="screen_view",e.SEARCH="search",e.SELECT_CONTENT="select_content",e.SET_CHECKOUT_OPTION="set_checkout_option",e.SHARE="share",e.SIGN_UP="sign_up",e.TIMING_COMPLETE="timing_complete",e.VIEW_ITEM="view_item",e.VIEW_ITEM_LIST="view_item_list",e.VIEW_PROMOTION="view_promotion",e.VIEW_SEARCH_RESULTS="view_search_results"}(Oe||(Oe={}));var Ue,We,ze=((Re={})["no-ga-id"]='"'+je+'" field is empty in Firebase config. Firebase Analytics requires this field to contain a valid measurement ID.',Re["already-exists"]="A Firebase Analytics instance with the measurement ID ${id}  already exists. Only one Firebase Analytics instance can be created for each measurement ID.",Re["already-initialized"]="Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",Re["interop-component-reg-failed"]="Firebase Analytics Interop Component failed to instantiate",Re),Ke=new z.ErrorFactory("analytics","Analytics",ze),Ge={},Qe="dataLayer",He="gtag",Ye=!1;function Je(e){if(Ye)throw Ke.create("already-initialized");e.dataLayerName&&(Qe=e.dataLayerName),e.gtagName&&(He=e.gtagName)}function Xe(e,t){var n=e.options[je];if(!n)throw Ke.create("no-ga-id");if(null!=Ge[n])throw Ke.create("already-exists",{id:n});if(!Ye){(function(){for(var e=window.document.getElementsByTagName("script"),t=0,n=Object.values(e);t<n.length;t++){var r=n[t];if(r.src&&r.src.includes(Ve))return r}return null}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */)()||function(e){var t=document.createElement("script");t.src=Ve+"?l="+e,t.async=!0,document.head.appendChild(t)}(Qe),function(e){var t=[];Array.isArray(window[e])?t=window[e]:window[e]=t}(Qe);var r=qe(Ge,Qe,He),i=r.wrappedGtag,o=r.gtagCore;We=i,Ue=o,Ye=!0}return Ge[n]=
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(e,t,n){return Object(W.__awaiter)(this,void 0,void 0,(function(){var r,i;return Object(W.__generator)(this,(function(o){switch(o.label){case 0:return[4,t.getId()];case 1:return r=o.sent(),n("js",new Date),n(Pe.CONFIG,e.options[je],((i={})[Be]=r,i[Fe]="firebase",i.update=!0,i)),[2]}}))}))}(e,t,Ue),{app:e,logEvent:function(e,t,r){
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
return function(e,t,n,r,i){var o=r||{};i&&i.global||(o=Object(W.__assign)(Object(W.__assign)({},r),{send_to:t})),e(Pe.EVENT,n,o||{})}(We,n,e,t,r)},setCurrentScreen:function(e,t){return function(e,t,n,r){r&&r.global?e(Pe.SET,{screen_name:n}):e(Pe.CONFIG,t,{update:!0,screen_name:n})}(We,n,e,t)},setUserId:function(e,t){return function(e,t,n,r){r&&r.global?e(Pe.SET,{user_id:n}):e(Pe.CONFIG,t,{update:!0,user_id:n})}(We,n,e,t)},setUserProperties:function(e,t){return function(e,t,n,r){if(r&&r.global){for(var i={},o=0,a=Object.keys(n);o<a.length;o++){var s=a[o];i["user_properties."+s]=n[s]}e(Pe.SET,i)}else e(Pe.CONFIG,t,{update:!0,user_properties:n})}(We,n,e,t)},setAnalyticsCollectionEnabled:function(e){return function(e,t){window["ga-disable-"+e]=!t}(n,e)}}}var $e="@firebase/analytics",Ze="0.2.9",et="analytics";!function(e){e.INTERNAL.registerComponent(new U.Component(et,(function(e){return Xe(e.getProvider("app").getImmediate(),e.getProvider("installations").getImmediate())}),"PUBLIC").setServiceProps({settings:Je,EventName:Oe})),e.INTERNAL.registerComponent(new U.Component("analytics-internal",(function(e){try{return{logEvent:e.getProvider(et).getImmediate().logEvent}}catch(e){throw Ke.create("interop-component-reg-failed",{reason:e})}}),"PRIVATE")),e.registerVersion($e,Ze)}(q.a);n(16);
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tt,nt,rt=((tt={})["only-available-in-window"]="This method is available in a Window context.",tt["only-available-in-sw"]="This method is available in a service worker context.",tt["should-be-overriden"]="This method should be overriden by extended classes.",tt["bad-sender-id"]="Please ensure that 'messagingSenderId' is set correctly in the options passed into firebase.initializeApp().",tt["permission-default"]="The required permissions were not granted and dismissed instead.",tt["permission-blocked"]="The required permissions were not granted and blocked instead.",tt["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",tt["notifications-blocked"]="Notifications have been blocked.",tt["failed-serviceworker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",tt["sw-registration-expected"]="A service worker registration was the expected input.",tt["get-subscription-failed"]="There was an error when trying to get any existing Push Subscriptions.",tt["invalid-saved-token"]="Unable to access details of the saved token.",tt["sw-reg-redundant"]="The service worker being used for push was made redundant.",tt["token-subscribe-failed"]="A problem occured while subscribing the user to FCM: {$errorInfo}",tt["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",tt["token-unsubscribe-failed"]="A problem occured while unsubscribing the user from FCM: {$errorInfo}",tt["token-update-failed"]="A problem occured while updating the user from FCM: {$errorInfo}",tt["token-update-no-token"]="FCM returned no token when updating the user to push.",tt["use-sw-before-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",tt["invalid-delete-token"]="You must pass a valid token into deleteToken(), i.e. the token from getToken().",tt["delete-token-not-found"]="The deletion attempt for token could not be performed as the token was not found.",tt["delete-scope-not-found"]="The deletion attempt for service worker scope could not be performed as the scope was not found.",tt["bg-handler-function-expected"]="The input to setBackgroundMessageHandler() must be a function.",tt["no-window-client-to-msg"]="An attempt was made to message a non-existant window client.",tt["unable-to-resubscribe"]="There was an error while re-subscribing the FCM token for push messaging. Will have to resubscribe the user on next visit. {$errorInfo}",tt["no-fcm-token-for-resubscribe"]="Could not find an FCM token and as a result, unable to resubscribe. Will have to resubscribe the user on next visit.",tt["failed-to-delete-token"]="Unable to delete the currently saved token.",tt["no-sw-in-reg"]="Even though the service worker registration was successful, there was a problem accessing the service worker itself.",tt["bad-scope"]="The service worker scope must be a string with at least one character.",tt["bad-vapid-key"]="The public VAPID key is not a Uint8Array with 65 bytes.",tt["bad-subscription"]="The subscription must be a valid PushSubscription.",tt["bad-token"]="The FCM Token used for storage / lookup was not a valid token string.",tt["failed-delete-vapid-key"]="The VAPID key could not be deleted.",tt["invalid-public-vapid-key"]="The public VAPID key must be a string.",tt["use-public-key-before-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",tt["public-vapid-key-decryption-failed"]="The public VAPID key did not equal 65 bytes when decrypted.",tt),it=new z.ErrorFactory("messaging","Messaging",rt),ot=new Uint8Array([4,51,148,247,223,161,235,177,220,3,162,94,21,113,219,72,211,46,237,237,178,52,219,183,71,58,12,143,196,204,225,111,60,140,132,223,171,182,102,62,242,12,212,139,254,227,249,118,47,20,28,99,8,106,111,45,177,26,149,176,206,55,192,156,110]),at="https://fcmregistrations.googleapis.com/v1";
/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function st(e,t){if(null==e||null==t)return!1;if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(var n=new DataView(e),r=new DataView(t),i=0;i<e.byteLength;i++)if(n.getUint8(i)!==r.getUint8(i))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ut(e){return function(e){var t=new Uint8Array(e);return btoa(String.fromCharCode.apply(String,Object(W.__spread)(t)))}(e).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */!function(e){e.PUSH_MSG_RECEIVED="push-msg-received",e.NOTIFICATION_CLICKED="notification-clicked"}(nt||(nt={}));var ct=function(){function e(){}return e.prototype.getToken=function(e,t,n){return Object(W.__awaiter)(this,void 0,void 0,(function(){var r,i,o,a,s,u;return Object(W.__generator)(this,(function(c){switch(c.label){case 0:return[4,ht(e)];case 1:r=c.sent(),i=dt(t,n),o={method:"POST",headers:r,body:JSON.stringify(i)},c.label=2;case 2:return c.trys.push([2,5,,6]),[4,fetch(lt(e.app),o)];case 3:return[4,c.sent().json()];case 4:return a=c.sent(),[3,6];case 5:throw s=c.sent(),it.create("token-subscribe-failed",{errorInfo:s});case 6:if(a.error)throw u=a.error.message,it.create("token-subscribe-failed",{errorInfo:u});if(!a.token)throw it.create("token-subscribe-no-token");return[2,a.token]}}))}))},e.prototype.updateToken=function(e,t,n,r){return Object(W.__awaiter)(this,void 0,void 0,(function(){var i,o,a,s,u,c;return Object(W.__generator)(this,(function(l){switch(l.label){case 0:return[4,ht(t)];case 1:i=l.sent(),o=dt(n,r),a={method:"PATCH",headers:i,body:JSON.stringify(o)},l.label=2;case 2:return l.trys.push([2,5,,6]),[4,fetch(lt(t.app)+"/"+e.fcmToken,a)];case 3:return[4,l.sent().json()];case 4:return s=l.sent(),[3,6];case 5:throw u=l.sent(),it.create("token-update-failed",{errorInfo:u});case 6:if(s.error)throw c=s.error.message,it.create("token-update-failed",{errorInfo:c});if(!s.token)throw it.create("token-update-no-token");return[2,s.token]}}))}))},e.prototype.deleteToken=function(e,t){return Object(W.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o,a;return Object(W.__generator)(this,(function(s){switch(s.label){case 0:return[4,ht(e)];case 1:n=s.sent(),r={method:"DELETE",headers:n},s.label=2;case 2:return s.trys.push([2,5,,6]),[4,fetch(lt(e.app)+"/"+t.fcmToken,r)];case 3:return[4,s.sent().json()];case 4:if((i=s.sent()).error)throw o=i.error.message,it.create("token-unsubscribe-failed",{errorInfo:o});return[3,6];case 5:throw a=s.sent(),it.create("token-unsubscribe-failed",{errorInfo:a});case 6:return[2]}}))}))},e}();function lt(e){return at+"/projects/"+e.options.projectId+"/registrations"}function ht(e){var t=e.app,n=e.installations;return Object(W.__awaiter)(this,void 0,void 0,(function(){var e;return Object(W.__generator)(this,(function(r){switch(r.label){case 0:return[4,n.getToken()];case 1:return e=r.sent(),[2,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.options.apiKey,"x-goog-firebase-installations-auth":"FIS "+e})]}}))}))}function dt(e,t){var n=ut(e.getKey("p256dh")),r=ut(e.getKey("auth")),i={web:{endpoint:e.endpoint,p256dh:n,auth:r}};return st(t.buffer,ot.buffer)||(i.web.applicationPubKey=ut(t)),i}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ft(e){for(var t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(t),r=new Uint8Array(n.length),i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pt="undefined",mt="fcm_token_object_Store";function gt(e){var t=indexedDB.open(pt);t.onerror=function(e){},t.onsuccess=function(n){!function(e,t){if(e.objectStoreNames.contains(mt)){var n=e.transaction(mt).objectStore(mt),r=new ct,i=n.openCursor();i.onerror=function(e){console.warn("Unable to cleanup old IDB.",e)},i.onsuccess=function(){var n=i.result;if(n){var o=n.value;r.deleteToken(t,o),n.continue()}else e.close(),indexedDB.deleteDatabase(pt)}}}(t.result,e)}}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var yt=function(){function e(){this.dbPromise=null}return e.prototype.get=function(e){return this.createTransaction((function(t){return t.get(e)}))},e.prototype.getIndex=function(e,t){return this.createTransaction((function(n){return n.index(e).get(t)}))},e.prototype.put=function(e){return this.createTransaction((function(t){return t.put(e)}),"readwrite")},e.prototype.delete=function(e){return this.createTransaction((function(t){return t.delete(e)}),"readwrite")},e.prototype.closeDatabase=function(){return Object(W.__awaiter)(this,void 0,void 0,(function(){return Object(W.__generator)(this,(function(e){switch(e.label){case 0:return this.dbPromise?[4,this.dbPromise]:[3,2];case 1:e.sent().close(),this.dbPromise=null,e.label=2;case 2:return[2]}}))}))},e.prototype.createTransaction=function(e,t){return void 0===t&&(t="readonly"),Object(W.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o;return Object(W.__generator)(this,(function(a){switch(a.label){case 0:return[4,this.getDb()];case 1:return n=a.sent(),r=n.transaction(this.objectStoreName,t),i=r.objectStore(this.objectStoreName),[4,vt(e(i))];case 2:return o=a.sent(),[2,new Promise((function(e,t){r.oncomplete=function(){e(o)},r.onerror=function(){t(r.error)}}))]}}))}))},e.prototype.getDb=function(){var e=this;return this.dbPromise||(this.dbPromise=new Promise((function(t,n){var r=indexedDB.open(e.dbName,e.dbVersion);r.onsuccess=function(){t(r.result)},r.onerror=function(){e.dbPromise=null,n(r.error)},r.onupgradeneeded=function(t){return e.onDbUpgrade(r,t)}}))),this.dbPromise},e}();function vt(e){return new Promise((function(t,n){e.onsuccess=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var bt=function(e){function t(t){var n=e.call(this)||this;return n.services=t,n.dbName="fcm_token_details_db",n.dbVersion=4,n.objectStoreName="fcm_token_object_Store",n}return Object(W.__extends)(t,e),t.prototype.onDbUpgrade=function(e,t){var n=e.result;switch(t.oldVersion){case 0:(i=n.createObjectStore(this.objectStoreName,{keyPath:"swScope"})).createIndex("fcmSenderId","fcmSenderId",{unique:!1}),i.createIndex("fcmToken","fcmToken",{unique:!0});case 1:gt(this.services);case 2:var r=(i=e.transaction.objectStore(this.objectStoreName)).openCursor();r.onsuccess=function(){var e=r.result;if(e){var t=e.value,n=Object(W.__assign)({},t);t.createTime||(n.createTime=Date.now()),"string"==typeof t.vapidKey&&(n.vapidKey=ft(t.vapidKey)),"string"==typeof t.auth&&(n.auth=ft(t.auth).buffer),"string"==typeof t.auth&&(n.p256dh=ft(t.p256dh).buffer),"string"==typeof t.fcmPushSet&&delete n.fcmPushSet,e.update(n),e.continue()}};break;case 3:var i,o=(i=e.transaction.objectStore(this.objectStoreName)).openCursor();o.onsuccess=function(){var e=o.result;if(e){var t=e.value,n=Object(W.__assign)({},t);"string"==typeof t.fcmPushSet&&delete n.fcmPushSet,e.update(n),e.continue()}}}},t.prototype.getTokenDetailsFromToken=function(e){return Object(W.__awaiter)(this,void 0,void 0,(function(){return Object(W.__generator)(this,(function(t){if(!e)throw it.create("bad-token");return wt({fcmToken:e}),[2,this.getIndex("fcmToken",e)]}))}))},t.prototype.getTokenDetailsFromSWScope=function(e){return Object(W.__awaiter)(this,void 0,void 0,(function(){return Object(W.__generator)(this,(function(t){if(!e)throw it.create("bad-scope");return wt({swScope:e}),[2,this.get(e)]}))}))},t.prototype.saveTokenDetails=function(e){return Object(W.__awaiter)(this,void 0,void 0,(function(){return Object(W.__generator)(this,(function(t){if(!e.swScope)throw it.create("bad-scope");if(!e.vapidKey)throw it.create("bad-vapid-key");if(!e.endpoint||!e.auth||!e.p256dh)throw it.create("bad-subscription");if(!e.fcmSenderId)throw it.create("bad-sender-id");if(!e.fcmToken)throw it.create("bad-token");return wt(e),[2,this.put(e)]}))}))},t.prototype.deleteToken=function(e){return Object(W.__awaiter)(this,void 0,void 0,(function(){var t;return Object(W.__generator)(this,(function(n){switch(n.label){case 0:return"string"!=typeof e||0===e.length?[2,Promise.reject(it.create("invalid-delete-token"))]:[4,this.getTokenDetailsFromToken(e)];case 1:if(!(t=n.sent()))throw it.create("delete-token-not-found");return[4,this.delete(t.swScope)];case 2:return n.sent(),[2,t]}}))}))},t}(yt);function wt(e){if(e.fcmToken&&("string"!=typeof e.fcmToken||0===e.fcmToken.length))throw it.create("bad-token");if(e.swScope&&("string"!=typeof e.swScope||0===e.swScope.length))throw it.create("bad-scope");if(e.vapidKey&&(!(e.vapidKey instanceof Uint8Array)||65!==e.vapidKey.length))throw it.create("bad-vapid-key");if(e.endpoint&&("string"!=typeof e.endpoint||0===e.endpoint.length))throw it.create("bad-subscription");if(e.auth&&!(e.auth instanceof ArrayBuffer))throw it.create("bad-subscription");if(e.p256dh&&!(e.p256dh instanceof ArrayBuffer))throw it.create("bad-subscription");if(e.fcmSenderId&&("string"!=typeof e.fcmSenderId||0===e.fcmSenderId.length))throw it.create("bad-sender-id")}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Tt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.dbName="fcm_vapid_details_db",t.dbVersion=1,t.objectStoreName="fcm_vapid_object_Store",t}return Object(W.__extends)(t,e),t.prototype.onDbUpgrade=function(e){e.result.createObjectStore(this.objectStoreName,{keyPath:"swScope"})},t.prototype.getVapidFromSWScope=function(e){return Object(W.__awaiter)(this,void 0,void 0,(function(){var t;return Object(W.__generator)(this,(function(n){switch(n.label){case 0:if("string"!=typeof e||0===e.length)throw it.create("bad-scope");return[4,this.get(e)];case 1:return[2,(t=n.sent())?t.vapidKey:void 0]}}))}))},t.prototype.saveVapidDetails=function(e,t){return Object(W.__awaiter)(this,void 0,void 0,(function(){var n;return Object(W.__generator)(this,(function(r){if("string"!=typeof e||0===e.length)throw it.create("bad-scope");if(null===t||65!==t.length)throw it.create("bad-vapid-key");return n={swScope:e,vapidKey:t},[2,this.put(n)]}))}))},t.prototype.deleteVapidDetails=function(e){return Object(W.__awaiter)(this,void 0,void 0,(function(){var t;return Object(W.__generator)(this,(function(n){switch(n.label){case 0:return[4,this.getVapidFromSWScope(e)];case 1:if(!(t=n.sent()))throw it.create("delete-scope-not-found");return[4,this.delete(e)];case 2:return n.sent(),[2,t]}}))}))},t}(yt),St=function(){function e(e){var t=this;this.services=e,this.vapidDetailsModel=new Tt,this.subscriptionManager=new ct;var n=e.app;if(this.app=n,!n.options.messagingSenderId||"string"!=typeof n.options.messagingSenderId)throw it.create("bad-sender-id");this.INTERNAL={delete:function(){return t.delete()}},this.tokenDetailsModel=new bt(e)}return e.prototype.getToken=function(){return Object(W.__awaiter)(this,void 0,void 0,(function(){var e,t,n,r,i;return Object(W.__generator)(this,(function(o){switch(o.label){case 0:return"default"!==(e=this.getNotificationPermission())?[3,2]:[4,this.requestNotificationPermission()];case 1:e=o.sent(),o.label=2;case 2:if("granted"!==e)throw it.create("notifications-blocked");return[4,this.getSWRegistration_()];case 3:return t=o.sent(),[4,this.getPublicVapidKey_()];case 4:return n=o.sent(),[4,this.getPushSubscription(t,n)];case 5:return r=o.sent(),[4,this.tokenDetailsModel.getTokenDetailsFromSWScope(t.scope)];case 6:return(i=o.sent())?[2,this.manageExistingToken(t,r,n,i)]:[2,this.getNewToken(t,r,n)]}}))}))},e.prototype.manageExistingToken=function(e,t,n,r){return Object(W.__awaiter)(this,void 0,void 0,(function(){return Object(W.__generator)(this,(function(i){switch(i.label){case 0:return function(e,t,n){if(!n.vapidKey||!st(t.buffer,n.vapidKey.buffer))return!1;var r=e.endpoint===n.endpoint,i=st(e.getKey("auth"),n.auth),o=st(e.getKey("p256dh"),n.p256dh);return r&&i&&o}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t,n,r)?Date.now()<r.createTime+6048e5?[2,r.fcmToken]:[2,this.updateToken(e,t,n,r)]:[3,1];case 1:return[4,this.deleteTokenFromDB(r.fcmToken)];case 2:return i.sent(),[2,this.getNewToken(e,t,n)];case 3:return[2]}}))}))},e.prototype.updateToken=function(e,t,n,r){return Object(W.__awaiter)(this,void 0,void 0,(function(){var i,o,a;return Object(W.__generator)(this,(function(s){switch(s.label){case 0:return s.trys.push([0,4,,6]),[4,this.subscriptionManager.updateToken(r,this.services,t,n)];case 1:return i=s.sent(),o={swScope:e.scope,vapidKey:n,fcmSenderId:this.services.app.options.messagingSenderId,fcmToken:i,createTime:Date.now(),endpoint:t.endpoint,auth:t.getKey("auth"),p256dh:t.getKey("p256dh")},[4,this.tokenDetailsModel.saveTokenDetails(o)];case 2:return s.sent(),[4,this.vapidDetailsModel.saveVapidDetails(e.scope,n)];case 3:return s.sent(),[2,i];case 4:return a=s.sent(),[4,this.deleteToken(r.fcmToken)];case 5:throw s.sent(),a;case 6:return[2]}}))}))},e.prototype.getNewToken=function(e,t,n){return Object(W.__awaiter)(this,void 0,void 0,(function(){var r,i;return Object(W.__generator)(this,(function(o){switch(o.label){case 0:return[4,this.subscriptionManager.getToken(this.services,t,n)];case 1:return r=o.sent(),i={swScope:e.scope,vapidKey:n,fcmSenderId:this.app.options.messagingSenderId,fcmToken:r,createTime:Date.now(),endpoint:t.endpoint,auth:t.getKey("auth"),p256dh:t.getKey("p256dh")},[4,this.tokenDetailsModel.saveTokenDetails(i)];case 2:return o.sent(),[4,this.vapidDetailsModel.saveVapidDetails(e.scope,n)];case 3:return o.sent(),[2,r]}}))}))},e.prototype.deleteToken=function(e){return Object(W.__awaiter)(this,void 0,void 0,(function(){var t,n;return Object(W.__generator)(this,(function(r){switch(r.label){case 0:return[4,this.deleteTokenFromDB(e)];case 1:return r.sent(),[4,this.getSWRegistration_()];case 2:return(t=r.sent())?[4,t.pushManager.getSubscription()]:[3,4];case 3:if(n=r.sent())return[2,n.unsubscribe()];r.label=4;case 4:return[2,!0]}}))}))},e.prototype.deleteTokenFromDB=function(e){return Object(W.__awaiter)(this,void 0,void 0,(function(){var t,n;return Object(W.__generator)(this,(function(r){switch(r.label){case 0:return[4,this.tokenDetailsModel.deleteToken(e)];case 1:t=r.sent(),r.label=2;case 2:return r.trys.push([2,4,,5]),[4,this.subscriptionManager.deleteToken(this.services,t)];case 3:return r.sent(),[3,5];case 4:return n=r.sent(),console.error(n),[3,5];case 5:return[2]}}))}))},e.prototype.getPushSubscription=function(e,t){return Object(W.__awaiter)(this,void 0,void 0,(function(){var n;return Object(W.__generator)(this,(function(r){switch(r.label){case 0:return[4,e.pushManager.getSubscription()];case 1:return(n=r.sent())?[2,n]:[2,e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:t})]}}))}))},e.prototype.requestPermission=function(){throw it.create("only-available-in-window")},e.prototype.useServiceWorker=function(e){throw it.create("only-available-in-window")},e.prototype.usePublicVapidKey=function(e){throw it.create("only-available-in-window")},e.prototype.onMessage=function(e,t,n){throw it.create("only-available-in-window")},e.prototype.onTokenRefresh=function(e,t,n){throw it.create("only-available-in-window")},e.prototype.setBackgroundMessageHandler=function(e){throw it.create("only-available-in-sw")},e.prototype.delete=function(){return Object(W.__awaiter)(this,void 0,void 0,(function(){return Object(W.__generator)(this,(function(e){switch(e.label){case 0:return[4,Promise.all([this.tokenDetailsModel.closeDatabase(),this.vapidDetailsModel.closeDatabase()])];case 1:return e.sent(),[2]}}))}))},e.prototype.getNotificationPermission=function(){return Notification.permission},e.prototype.requestNotificationPermission=function(){return Object(W.__awaiter)(this,void 0,void 0,(function(){return Object(W.__generator)(this,(function(e){return Notification.requestPermission?[2,Notification.requestPermission()]:[2,Notification.permission]}))}))},e.prototype.getTokenDetailsModel=function(){return this.tokenDetailsModel},e.prototype.getVapidDetailsModel=function(){return this.vapidDetailsModel},e.prototype.getSubscriptionManager=function(){return this.subscriptionManager},e}();var It=function(e){function t(t){var n=e.call(this,t)||this;return n.bgMessageHandler=null,self.addEventListener("push",(function(e){n.onPush(e)})),self.addEventListener("pushsubscriptionchange",(function(e){n.onSubChange(e)})),self.addEventListener("notificationclick",(function(e){n.onNotificationClick(e)})),n}return Object(W.__extends)(t,e),t.prototype.onPush=function(e){e.waitUntil(this.onPush_(e))},t.prototype.onSubChange=function(e){e.waitUntil(this.onSubChange_(e))},t.prototype.onNotificationClick=function(e){e.waitUntil(this.onNotificationClick_(e))},t.prototype.onPush_=function(e){return Object(W.__awaiter)(this,void 0,void 0,(function(){var t,n,r,i,o,a;return Object(W.__generator)(this,(function(s){switch(s.label){case 0:if(!e.data)return[2];try{t=e.data.json()}catch(e){return[2]}return[4,this.hasVisibleClients_()];case 1:return s.sent()?[2,this.sendMessageToWindowClients_(t)]:(n=this.getNotificationData_(t))?(r=n.title||"",[4,this.getSWRegistration_()]):[3,3];case 2:return i=s.sent(),o=n.actions,a=Notification.maxActions,o&&a&&o.length>a&&console.warn("This browser only supports "+a+" actions.The remaining actions will not be displayed."),[2,i.showNotification(r,n)];case 3:return this.bgMessageHandler?[4,this.bgMessageHandler(t)]:[3,5];case 4:return s.sent(),[2];case 5:return[2]}}))}))},t.prototype.onSubChange_=function(e){return Object(W.__awaiter)(this,void 0,void 0,(function(){var e,t,n,r;return Object(W.__generator)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this.getSWRegistration_()];case 1:return e=i.sent(),[3,3];case 2:throw t=i.sent(),it.create("unable-to-resubscribe",{errorInfo:t});case 3:return i.trys.push([3,5,,8]),[4,e.pushManager.getSubscription()];case 4:return i.sent(),[3,8];case 5:return n=i.sent(),[4,this.getTokenDetailsModel().getTokenDetailsFromSWScope(e.scope)];case 6:if(!(r=i.sent()))throw n;return[4,this.deleteToken(r.fcmToken)];case 7:throw i.sent(),n;case 8:return[2]}}))}))},t.prototype.onNotificationClick_=function(e){return Object(W.__awaiter)(this,void 0,void 0,(function(){var t,n,r,i;return Object(W.__generator)(this,(function(o){switch(o.label){case 0:if(!(e.notification&&e.notification.data&&e.notification.data.FCM_MSG))return[2];if(e.action)return[2];if(e.stopImmediatePropagation(),e.notification.close(),!(t=e.notification.data.FCM_MSG).notification)return[2];if(!(n=t.fcmOptions&&t.fcmOptions.link||t.notification.click_action)){if(!(t.data&&"google.c.a.c_id"in t.data))return[2];n=self.location.origin}return[4,this.getWindowClient_(n)];case 1:return(r=o.sent())?[3,4]:[4,self.clients.openWindow(n)];case 2:return r=o.sent(),[4,(a=3e3,new Promise((function(e){setTimeout(e,a)})))];case 3:return o.sent(),[3,6];case 4:return[4,r.focus()];case 5:r=o.sent(),o.label=6;case 6:return r?(delete t.notification,delete t.fcmOptions,i=Ct(nt.NOTIFICATION_CLICKED,t),[2,this.attemptToMessageClient_(r,i)]):[2]}var a;
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}))}))},t.prototype.getNotificationData_=function(e){var t;if(e&&"object"==typeof e.notification){var n=Object(W.__assign)({},e.notification);return n.data=Object(W.__assign)(Object(W.__assign)({},e.notification.data),((t={}).FCM_MSG=e,t)),n}},t.prototype.setBackgroundMessageHandler=function(e){if(!e||"function"!=typeof e)throw it.create("bg-handler-function-expected");this.bgMessageHandler=e},t.prototype.getWindowClient_=function(e){return Object(W.__awaiter)(this,void 0,void 0,(function(){var t,n,r,i;return Object(W.__generator)(this,(function(o){switch(o.label){case 0:return t=new URL(e,self.location.href).href,[4,Et()];case 1:for(n=o.sent(),r=null,i=0;i<n.length;i++)if(new URL(n[i].url,self.location.href).href===t){r=n[i];break}return[2,r]}}))}))},t.prototype.attemptToMessageClient_=function(e,t){return Object(W.__awaiter)(this,void 0,void 0,(function(){return Object(W.__generator)(this,(function(n){if(!e)throw it.create("no-window-client-to-msg");return e.postMessage(t),[2]}))}))},t.prototype.hasVisibleClients_=function(){return Object(W.__awaiter)(this,void 0,void 0,(function(){return Object(W.__generator)(this,(function(e){switch(e.label){case 0:return[4,Et()];case 1:return[2,e.sent().some((function(e){return"visible"===e.visibilityState&&!e.url.startsWith("chrome-extension://")}))]}}))}))},t.prototype.sendMessageToWindowClients_=function(e){return Object(W.__awaiter)(this,void 0,void 0,(function(){var t,n,r=this;return Object(W.__generator)(this,(function(i){switch(i.label){case 0:return[4,Et()];case 1:return t=i.sent(),n=Ct(nt.PUSH_MSG_RECEIVED,e),[4,Promise.all(t.map((function(e){return r.attemptToMessageClient_(e,n)})))];case 2:return i.sent(),[2]}}))}))},t.prototype.getSWRegistration_=function(){return Object(W.__awaiter)(this,void 0,void 0,(function(){return Object(W.__generator)(this,(function(e){return[2,self.registration]}))}))},t.prototype.getPublicVapidKey_=function(){return Object(W.__awaiter)(this,void 0,void 0,(function(){var e,t;return Object(W.__generator)(this,(function(n){switch(n.label){case 0:return[4,this.getSWRegistration_()];case 1:if(!(e=n.sent()))throw it.create("sw-registration-expected");return[4,this.getVapidDetailsModel().getVapidFromSWScope(e.scope)];case 2:return null==(t=n.sent())?[2,ot]:[2,t]}}))}))},t}(St);function Et(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function Ct(e,t){return{firebaseMessagingType:e,firebaseMessagingData:t}}var _t=function(e){function t(t){var n=e.call(this,t)||this;return n.registrationToUse=null,n.publicVapidKeyToUse=null,n.messageObserver=null,n.tokenRefreshObserver=null,n.onMessageInternal=Object(z.createSubscribe)((function(e){n.messageObserver=e})),n.onTokenRefreshInternal=Object(z.createSubscribe)((function(e){n.tokenRefreshObserver=e})),n.setupSWMessageListener_(),n}return Object(W.__extends)(t,e),t.prototype.requestPermission=function(){return Object(W.__awaiter)(this,void 0,void 0,(function(){var e;return Object(W.__generator)(this,(function(t){switch(t.label){case 0:return"granted"===Notification.permission?[2]:[4,Notification.requestPermission()];case 1:if("granted"===(e=t.sent()))return[2];throw"denied"===e?it.create("permission-blocked"):it.create("permission-default")}}))}))},t.prototype.useServiceWorker=function(e){if(!(e instanceof ServiceWorkerRegistration))throw it.create("sw-registration-expected");if(null!=this.registrationToUse)throw it.create("use-sw-before-get-token");this.registrationToUse=e},t.prototype.usePublicVapidKey=function(e){if("string"!=typeof e)throw it.create("invalid-public-vapid-key");if(null!=this.publicVapidKeyToUse)throw it.create("use-public-key-before-get-token");var t=ft(e);if(65!==t.length)throw it.create("public-vapid-key-decryption-failed");this.publicVapidKeyToUse=t},t.prototype.onMessage=function(e,t,n){return"function"==typeof e?this.onMessageInternal(e,t,n):this.onMessageInternal(e)},t.prototype.onTokenRefresh=function(e,t,n){return"function"==typeof e?this.onTokenRefreshInternal(e,t,n):this.onTokenRefreshInternal(e)},t.prototype.waitForRegistrationToActivate_=function(e){var t=e.installing||e.waiting||e.active;return new Promise((function(n,r){if(t)if("activated"!==t.state)if("redundant"!==t.state){var i=function(){if("activated"===t.state)n(e);else{if("redundant"!==t.state)return;r(it.create("sw-reg-redundant"))}t.removeEventListener("statechange",i)};t.addEventListener("statechange",i)}else r(it.create("sw-reg-redundant"));else n(e);else r(it.create("no-sw-in-reg"))}))},t.prototype.getSWRegistration_=function(){var e=this;return this.registrationToUse?this.waitForRegistrationToActivate_(this.registrationToUse):(this.registrationToUse=null,navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"}).catch((function(e){throw it.create("failed-serviceworker-registration",{browserErrorMessage:e.message})})).then((function(t){return e.waitForRegistrationToActivate_(t).then((function(){return e.registrationToUse=t,t.update(),t}))})))},t.prototype.getPublicVapidKey_=function(){return Object(W.__awaiter)(this,void 0,void 0,(function(){return Object(W.__generator)(this,(function(e){return this.publicVapidKeyToUse?[2,this.publicVapidKeyToUse]:[2,ot]}))}))},t.prototype.setupSWMessageListener_=function(){var e=this;navigator.serviceWorker.addEventListener("message",(function(t){return Object(W.__awaiter)(e,void 0,void 0,(function(){var e,n,r,i,o;return Object(W.__generator)(this,(function(a){switch(a.label){case 0:return t.data&&t.data.firebaseMessagingType&&t.data.firebaseMessagingData?(e=t.data,n=e.firebaseMessagingType,r=e.firebaseMessagingData,this.messageObserver&&this.messageObserver.next(r),(i=r.data)&&"google.c.a.c_id"in i&&"1"===i["google.c.a.e"]?(o=function(e){switch(e){case nt.NOTIFICATION_CLICKED:return"notification_open";case nt.PUSH_MSG_RECEIVED:return"notification_foreground";default:throw new Error}}(n),[4,this.services.analyticsProvider.get()]):[3,2]):[2];case 1:a.sent().logEvent(o,{message_name:i["google.c.a.c_l"],message_id:i["google.c.a.c_id"],message_time:i["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)}),a.label=2;case 2:return[2]}}))}))}),!1)},t}(St);var Dt="@firebase/messaging",kt="0.6.0";function Nt(){return self&&"ServiceWorkerGlobalScope"in self?"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey"):navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}!
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(e){var t={isSupported:Nt};e.INTERNAL.registerComponent(new U.Component("messaging",(function(e){var t={app:e.getProvider("app").getImmediate(),installations:e.getProvider("installations").getImmediate(),analyticsProvider:e.getProvider("analytics-internal")};if(!Nt())throw it.create("unsupported-browser");return self&&"ServiceWorkerGlobalScope"in self?new It(t):new _t(t)}),"PUBLIC").setServiceProps(t)),e.registerVersion(Dt,kt)}(q.a);F.initializeApp({apiKey:"AIzaSyB9KC9Q3NzMt7b6TspNcKxqWqnzzPLvdFg",authDomain:"testgdproject-1570036439931.firebaseapp.com",databaseURL:"https://testgdproject-1570036439931.firebaseio.com",projectId:"testgdproject-1570036439931",storageBucket:"testgdproject-1570036439931.appspot.com",messagingSenderId:"199844453643",appId:"1:199844453643:web:4aa7ba97d1ae2e428b560e"});var At=function(){function e(e){var t=this;this.messaging=F.messaging(),this.messaging.onMessage((function(t){console.log("Message received. ",t);var n=t.data;e.notificationsManager.createNotificaction(n)})),this.messaging.onTokenRefresh((function(){t.messaging.getToken().then((function(t){console.log("FCM token refreshed:",t),F.firestore().collection("fcmTokens").doc(t).set({email:e.userInfo.emailAddress})})).catch((function(e){console.log("Unable to retrieve refreshed token ",e)}))})),window.getMessagingToken=function(){F.messaging().getToken().then((function(e){console.log(e)})).catch((function(e){console.error(e)}))},window.saveMessagingDeviceToken=function(){var t=this;sessionStorage.getItem("deviceToken")||F.messaging().getToken().then((function(n){n?(console.log("FCM token generated:",n),F.firestore().collection("fcmTokens").doc(n).set({email:e.userInfo.emailAddress}),sessionStorage.setItem("deviceToken",n)):t.requestNotificationsPermissions()})).catch((function(e){console.error("Unable to get FCM token.",e)}))}}return e.prototype.requestNotificationsPermissions=function(){console.log("Requesting notifications permission..."),F.messaging().requestPermission().then((function(){console.log("Notification permission granted."),window.saveMessagingDeviceToken()})).catch((function(e){console.error("Unable to get permission to notify:",e)}))},e}(),xt=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},Mt=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},Lt=new B,Pt=new At(Lt);(window.thereIsMessaging=!0,"serviceWorker"in navigator&&window.addEventListener("load",(function(){navigator.serviceWorker.register("/service-worker.js").then((function(e){console.log("Service worker registered.",e),window.thereIsMessaging&&Pt.messaging.useServiceWorker(e)})).catch((function(e){console.error("Service Worker Error",e)}))})),window.getCurrentUser=function(){return Lt.userInfo},window.BroadcastChannel)?new BroadcastChannel("app-channel").onmessage=function(e){"newNotification"===e.data.action&&(console.log("Add notification to the list."),Lt.notificationsManager.createNotificaction(e.data.content))}:console.warn("This browser does not support BroadcastChannel.");document.getElementById("tryItBtn").onclick=function(){console.log("Starting demo session."),window.thereIsMessaging=!1,Lt.setUserInfo({displayName:"Fake User",emailAddress:"fakeuser@example.com",photoLink:"avatar-placeholder.png"}),Lt.start({mainFolderId:"1P9qu9qGmcyiarE-e1anVW4ijYYDWii-F"}),Gt.style.display="none"};var Ot,Rt="344446892746-36ebkcl04viq3poe73mb3dkhr79lspqk.apps.googleusercontent.com";Ot="AIzaSyDiGyyxn_sPAvr2Mox44J6lPurG0XhQa7c";var jt,Bt=["https://www.googleapis.com/discovery/v1/apis/drive/v3/rest"],Ft="https://www.googleapis.com/auth/drive",Vt=document.getElementById("authorizeBtn"),qt=document.getElementById("signoutBtn");function Ut(){gapi.client.init({apiKey:Ot,clientId:Rt,discoveryDocs:Bt,scope:Ft}).then((function(){gapi.auth2.getAuthInstance().isSignedIn.listen(Wt),Wt(gapi.auth2.getAuthInstance().isSignedIn.get()),Vt.onclick=zt,qt.onclick=Kt}),(function(e){console.log(JSON.stringify(e,null,2))}))}function Wt(e){if(e){console.log("Authorized.");var t=c.getUrlParams(window.location.href).id;Gt.style.display="none",Lt.setUserInfo(),Lt.start(t)}else console.log("Not authorized"),Gt.style.display="flex",document.querySelector("header").style.display="none",document.querySelector("main").style.display="none",Lt.projectsListContainer.style.display="none",c.emptyNode(Lt.projectsList),history.replaceState({page:"Sign in dialog"},"Sign in dialog",location.href.replace(location.search,""))}function zt(){gapi.auth2.getAuthInstance().signIn()}function Kt(){gapi.auth2.getAuthInstance().signOut()}(jt=document.createElement("script")).type="text/javascript",jt.defer=!0,jt.onload=function(){gapi.load("client:auth2",Ut)},jt.src="https://apis.google.com/js/api.js",document.querySelector("body").appendChild(jt);var Gt=document.getElementById("loginPage");var Qt,Ht=null,Yt=document.getElementById("installBtn");Yt.addEventListener("click",(function(e){Ht.prompt(),e.target.hidden=!0,Ht.userChoice.then((function(e){"accepted"===e.outcome?console.log("User accepted the A2HS prompt",e):console.log("User dismissed the A2HS prompt",e),Ht=null}))})),window.addEventListener("beforeinstallprompt",(function(e){e.preventDefault(),Ht=e,Yt.removeAttribute("hidden")})),window.addEventListener("appinstalled",(function(e){console.log("VisualARQ Drawings Viewer was installed.",e)})),Lt.drawingsBtns.querySelector(".dropdown-content").addEventListener("click",(function(e){return xt(this,void 0,void 0,(function(){var t,n,r,i;return Mt(this,(function(o){switch(o.label){case 0:if(Qt&&Qt.classList.remove("active"),Qt=e.target,t=Qt.dataset.id,Lt.drawingsBtns.children[0].innerText=Qt.innerText,Qt.classList.add("active"),n=Lt.currentWorkspace.drawings.find((function(e){return e.id===t})),void 0!==Lt.currentWorkspace.drawingsStylesTag)return[3,6];if(void 0===Lt.currentWorkspace.drawingsStylesId)return[3,5];r=void 0,o.label=1;case 1:return o.trys.push([1,3,,4]),[4,h.getFileContent(Lt.currentWorkspace.drawingsStylesId)];case 2:return r=o.sent(),[3,4];case 3:return o.sent(),console.error("Error while trying to fetch the drawings styles."),[3,4];case 4:return r&&((i=document.createElement("style")).innerText=r.body,document.head.appendChild(i),Lt.currentWorkspace.drawingsStylesTag=i),[3,6];case 5:console.warn("This project doesn't have a css styles file for the drawings."),o.label=6;case 6:return void 0!==n.content?Lt.currentWorkspace.setDrawing(n):(Lt.showViewportDialog("loader","Loading drawing"),h.getFileContent(t).then((function(e){n.setContent(e.body),Lt.currentWorkspace.setDrawing(n),Lt.hideViewportMessage(),console.log("Drawing fetched.")}),(function(e){console.log(e)}))),[2]}}))}))}));for(var Jt=document.getElementsByClassName("dropdown-container"),Xt=function(e){Jt[e].children[0].addEventListener("click",(function(){Jt[e].classList.toggle("open")})),Jt[e].addEventListener("mouseleave",(function(e){e.currentTarget.classList.remove("open")}))},$t=0;$t<Jt.length;$t++)Xt($t);var Zt=document.getElementById("sideNavToggle");Zt.addEventListener("click",(function(){document.getElementById("sideNavContainer").classList.toggle("active"),Zt.classList.toggle("active")}))}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3RzbGliL3RzbGliLmVzNi5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL3V0aWwvZGlzdC9pbmRleC5janMuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS9jb21wb25lbnQvZGlzdC9pbmRleC5janMuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS9hcHAvZGlzdC9pbmRleC5janMuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2ZpcmViYXNlL2FwcC9kaXN0L2luZGV4LmNqcy5qcyIsIndlYnBhY2s6Ly8vKHdlYnBhY2spL2J1aWxkaW4vZ2xvYmFsLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvbG9nZ2VyL2Rpc3QvaW5kZXguZXNtLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9pZGIvYnVpbGQvaWRiLmpzIiwid2VicGFjazovLy8uL3NyYy9zdHlsZXMvc3R5bGVzLnNjc3M/NDExYSIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbmplY3RTdHlsZXNJbnRvU3R5bGVUYWcuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3N0eWxlcy9zdHlsZXMuc2NzcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvYXBpLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9nZXRVcmwuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Fzc2V0cy9pY29ucy9oYW1idXJnZXJJY29uLnN2ZyIsIndlYnBhY2s6Ly8vLi9zcmMvYXNzZXRzL2ljb25zL2Nyb3NzSWNvbi5zdmciLCJ3ZWJwYWNrOi8vLy4vc3JjL2Fzc2V0cy9pY29ucy9wcm9qZWN0c0xpc3RJY29uLnN2ZyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL2ZpcmVzdG9yZS9kaXN0L2luZGV4LmNqcy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcHJvY2Vzcy9icm93c2VyLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2Uvd2ViY2hhbm5lbC13cmFwcGVyL2Rpc3QvaW5kZXguZXNtLmpzIiwid2VicGFjazovLy8uL3NyYy9nZW9tZXRyeS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbWFpblBhbmVsLnRzIiwid2VicGFjazovLy8uL3NyYy9nZW5lcmljcy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZHJhd2luZy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYXBpLmpzIiwid2VicGFjazovLy8uL3NyYy9jb21tZW50LnRzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvaW5zdGFsbGF0aW9ucy9kaXN0L2luZGV4LmVzbS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tbWVudEZvcm0udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3dvcmtzcGFjZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYXBwVG9vbHMvdG9vbC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYXBwVG9vbHMvZWxlbWVudFNlbGVjdGlvbi50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYXBwVG9vbHMvYWRkQ29tbWVudC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYXBwVG9vbHMvc2hvd0VsZW1lbnREYXRhLnRzIiwid2VicGFjazovLy8uL3NyYy9zaGFyZVByb2plY3QudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL25vdGlmaWNhdGlvbnNNYW5hZ2VyLnRzIiwid2VicGFjazovLy8uL3NyYy9yZW5hbWVQcm9qZWN0LnRzIiwid2VicGFjazovLy8uL3NyYy9jb250ZXh0TWVudS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvcHJvamVjdEl0ZW0udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FwcC50cyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL2FuYWx5dGljcy9kaXN0L2luZGV4LmVzbS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL21lc3NhZ2luZy9kaXN0L2luZGV4LmVzbS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbWVzc2FnaW5nLnRzIiwid2VicGFjazovLy8uL3NyYy9pbmRleC50cyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsImV4dGVuZFN0YXRpY3MiLCJiIiwic2V0UHJvdG90eXBlT2YiLCJfX3Byb3RvX18iLCJBcnJheSIsIl9fZXh0ZW5kcyIsIl9fIiwidGhpcyIsImNvbnN0cnVjdG9yIiwiX19hc3NpZ24iLCJhc3NpZ24iLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJhcHBseSIsIl9fcmVzdCIsImUiLCJpbmRleE9mIiwiZ2V0T3duUHJvcGVydHlTeW1ib2xzIiwicHJvcGVydHlJc0VudW1lcmFibGUiLCJfX2RlY29yYXRlIiwiZGVjb3JhdG9ycyIsInRhcmdldCIsImRlc2MiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJSZWZsZWN0IiwiZGVjb3JhdGUiLCJfX3BhcmFtIiwicGFyYW1JbmRleCIsImRlY29yYXRvciIsIl9fbWV0YWRhdGEiLCJtZXRhZGF0YUtleSIsIm1ldGFkYXRhVmFsdWUiLCJtZXRhZGF0YSIsIl9fYXdhaXRlciIsInRoaXNBcmciLCJfYXJndW1lbnRzIiwiUCIsImdlbmVyYXRvciIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwiZnVsZmlsbGVkIiwic3RlcCIsIm5leHQiLCJyZWplY3RlZCIsInJlc3VsdCIsImRvbmUiLCJ0aGVuIiwiX19nZW5lcmF0b3IiLCJib2R5IiwiZiIsInkiLCJnIiwiXyIsImxhYmVsIiwic2VudCIsInRyeXMiLCJvcHMiLCJ2ZXJiIiwiaXRlcmF0b3IiLCJ2Iiwib3AiLCJUeXBlRXJyb3IiLCJwb3AiLCJwdXNoIiwiX19leHBvcnRTdGFyIiwiX192YWx1ZXMiLCJfX3JlYWQiLCJhciIsImVycm9yIiwiX19zcHJlYWQiLCJjb25jYXQiLCJfX3NwcmVhZEFycmF5cyIsImlsIiwiayIsImEiLCJqIiwiamwiLCJfX2F3YWl0IiwiX19hc3luY0dlbmVyYXRvciIsImFzeW5jSXRlcmF0b3IiLCJxIiwicmVzdW1lIiwiZnVsZmlsbCIsInNldHRsZSIsInNoaWZ0IiwiX19hc3luY0RlbGVnYXRvciIsIl9fYXN5bmNWYWx1ZXMiLCJfX21ha2VUZW1wbGF0ZU9iamVjdCIsImNvb2tlZCIsInJhdyIsIl9faW1wb3J0U3RhciIsIm1vZCIsImRlZmF1bHQiLCJfX2ltcG9ydERlZmF1bHQiLCJ0c2xpYiIsIkNPTlNUQU5UUyIsIk5PREVfQ0xJRU5UIiwiTk9ERV9BRE1JTiIsIlNES19WRVJTSU9OIiwiYXNzZXJ0IiwiYXNzZXJ0aW9uIiwibWVzc2FnZSIsImFzc2VydGlvbkVycm9yIiwiRXJyb3IiLCJzdHJpbmdUb0J5dGVBcnJheSIsInN0ciIsIm91dCIsImNoYXJDb2RlQXQiLCJiYXNlNjQiLCJieXRlVG9DaGFyTWFwXyIsImNoYXJUb0J5dGVNYXBfIiwiYnl0ZVRvQ2hhck1hcFdlYlNhZmVfIiwiY2hhclRvQnl0ZU1hcFdlYlNhZmVfIiwiRU5DT0RFRF9WQUxTX0JBU0UiLCJIQVNfTkFUSVZFX1NVUFBPUlQiLCJhdG9iIiwiZW5jb2RlQnl0ZUFycmF5IiwiaW5wdXQiLCJ3ZWJTYWZlIiwiaXNBcnJheSIsImluaXRfIiwiYnl0ZVRvQ2hhck1hcCIsIm91dHB1dCIsImJ5dGUxIiwiaGF2ZUJ5dGUyIiwiYnl0ZTIiLCJoYXZlQnl0ZTMiLCJieXRlMyIsIm91dEJ5dGUxIiwib3V0Qnl0ZTIiLCJvdXRCeXRlMyIsIm91dEJ5dGU0Iiwiam9pbiIsImVuY29kZVN0cmluZyIsImJ0b2EiLCJkZWNvZGVTdHJpbmciLCJieXRlcyIsInBvcyIsImMxIiwiU3RyaW5nIiwiZnJvbUNoYXJDb2RlIiwiYzIiLCJ1IiwiYzMiLCJieXRlQXJyYXlUb1N0cmluZyIsImRlY29kZVN0cmluZ1RvQnl0ZUFycmF5IiwiY2hhclRvQnl0ZU1hcCIsImNoYXJBdCIsImJ5dGU0IiwiRU5DT0RFRF9WQUxTIiwiRU5DT0RFRF9WQUxTX1dFQlNBRkUiLCJiYXNlNjREZWNvZGUiLCJjb25zb2xlIiwiZGVlcEV4dGVuZCIsInNvdXJjZSIsIkRhdGUiLCJnZXRUaW1lIiwidW5kZWZpbmVkIiwicHJvcCIsIkRlZmVycmVkIiwiX3RoaXMiLCJwcm9taXNlIiwid3JhcENhbGxiYWNrIiwiY2FsbGJhY2siLCJjYXRjaCIsImdldFVBIiwibmF2aWdhdG9yIiwiRVJST1JfTkFNRSIsIkZpcmViYXNlRXJyb3IiLCJfc3VwZXIiLCJjb2RlIiwiY2FwdHVyZVN0YWNrVHJhY2UiLCJFcnJvckZhY3RvcnkiLCJzZXJ2aWNlIiwic2VydmljZU5hbWUiLCJlcnJvcnMiLCJkYXRhIiwiX2kiLCJjdXN0b21EYXRhIiwiZnVsbENvZGUiLCJ0ZW1wbGF0ZSIsInJlcGxhY2VUZW1wbGF0ZSIsImZ1bGxNZXNzYWdlIiwiX2EiLCJfYiIsImtleXMiLCJzbGljZSIsIndhcm4iLCJyZXBsYWNlIiwiUEFUVEVSTiIsInRvU3RyaW5nIiwianNvbkV2YWwiLCJKU09OIiwicGFyc2UiLCJkZWNvZGUiLCJ0b2tlbiIsImhlYWRlciIsImNsYWltcyIsInNpZ25hdHVyZSIsInBhcnRzIiwic3BsaXQiLCJTaGExIiwiY2hhaW5fIiwiYnVmXyIsIldfIiwicGFkXyIsImluYnVmXyIsInRvdGFsXyIsImJsb2NrU2l6ZSIsInJlc2V0IiwiY29tcHJlc3NfIiwiYnVmIiwib2Zmc2V0IiwiVyIsInVwZGF0ZSIsImxlbmd0aE1pbnVzQmxvY2siLCJpbmJ1ZiIsImRpZ2VzdCIsInRvdGFsQml0cyIsIk9ic2VydmVyUHJveHkiLCJleGVjdXRvciIsIm9uTm9PYnNlcnZlcnMiLCJvYnNlcnZlcnMiLCJ1bnN1YnNjcmliZXMiLCJvYnNlcnZlckNvdW50IiwidGFzayIsImZpbmFsaXplZCIsImZvckVhY2hPYnNlcnZlciIsIm9ic2VydmVyIiwiY2xvc2UiLCJjb21wbGV0ZSIsInN1YnNjcmliZSIsIm5leHRPck9ic2VydmVyIiwib2JqIiwibWV0aG9kcyIsIm1ldGhvZHNfMSIsIm1ldGhvZCIsImltcGxlbWVudHNBbnlNZXRob2RzIiwibm9vcCIsInVuc3ViIiwidW5zdWJzY3JpYmVPbmUiLCJmaW5hbEVycm9yIiwiZm4iLCJzZW5kT25lIiwiZXJyIiwiZXJyb3JQcmVmaXgiLCJmbk5hbWUiLCJhcmd1bWVudE51bWJlciIsIm9wdGlvbmFsIiwiYXJnTmFtZSIsImFzeW5jIiwib25FcnJvciIsImFyZ3MiLCJiYXNlNjRFbmNvZGUiLCJ1dGY4Qnl0ZXMiLCJjb250YWlucyIsImNyZWF0ZVN1YnNjcmliZSIsInByb3h5IiwiZGVlcENvcHkiLCJpc0FkbWluIiwiaXNCcm93c2VyIiwic2VsZiIsImlzRW1wdHkiLCJpc01vYmlsZUNvcmRvdmEiLCJ3aW5kb3ciLCJ0ZXN0IiwiaXNOb2RlIiwiZ2xvYmFsIiwicHJvY2VzcyIsImlzTm9kZVNkayIsImlzUmVhY3ROYXRpdmUiLCJpc1ZhbGlkRm9ybWF0IiwiaXNWYWxpZFRpbWVzdGFtcCIsIm5vdyIsIk1hdGgiLCJmbG9vciIsInZhbGlkU2luY2UiLCJ2YWxpZFVudGlsIiwiaXNzdWVkQXRUaW1lIiwibWFwIiwiY29udGV4dE9iaiIsInJlcyIsInF1ZXJ5c3RyaW5nIiwicXVlcnlzdHJpbmdQYXJhbXMiLCJwYXJhbXMiLCJfbG9vcF8xIiwiZm9yRWFjaCIsImFycmF5VmFsIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwiZW50cmllcyIsInF1ZXJ5c3RyaW5nRGVjb2RlIiwic2FmZUdldCIsInN0cmluZ0xlbmd0aCIsImhpZ2giLCJzdHJpbmdpZnkiLCJ2YWxpZGF0ZUFyZ0NvdW50IiwibWluQ291bnQiLCJtYXhDb3VudCIsImFyZ0NvdW50IiwiYXJnRXJyb3IiLCJ2YWxpZGF0ZUNhbGxiYWNrIiwidmFsaWRhdGVDb250ZXh0T2JqZWN0IiwiY29udGV4dCIsInZhbGlkYXRlTmFtZXNwYWNlIiwibmFtZXNwYWNlIiwidXRpbCIsIkNvbXBvbmVudCIsImluc3RhbmNlRmFjdG9yeSIsInR5cGUiLCJtdWx0aXBsZUluc3RhbmNlcyIsInNlcnZpY2VQcm9wcyIsImluc3RhbnRpYXRpb25Nb2RlIiwic2V0SW5zdGFudGlhdGlvbk1vZGUiLCJzZXRNdWx0aXBsZUluc3RhbmNlcyIsInNldFNlcnZpY2VQcm9wcyIsInByb3BzIiwiREVGQVVMVF9FTlRSWV9OQU1FIiwiUHJvdmlkZXIiLCJjb250YWluZXIiLCJjb21wb25lbnQiLCJpbnN0YW5jZXMiLCJNYXAiLCJpbnN0YW5jZXNEZWZlcnJlZCIsImlkZW50aWZpZXIiLCJub3JtYWxpemVkSWRlbnRpZmllciIsIm5vcm1hbGl6ZUluc3RhbmNlSWRlbnRpZmllciIsImhhcyIsImRlZmVycmVkIiwic2V0IiwiaW5zdGFuY2UiLCJnZXRPckluaXRpYWxpemVTZXJ2aWNlIiwiZ2V0SW1tZWRpYXRlIiwib3B0aW9ucyIsImdldENvbXBvbmVudCIsInNldENvbXBvbmVudCIsImVfMSIsImlzQ29tcG9uZW50RWFnZXIiLCJfYyIsIl9kIiwiaW5zdGFuY2VJZGVudGlmaWVyIiwiaW5zdGFuY2VEZWZlcnJlZCIsImVfMV8xIiwicmV0dXJuIiwiY2xlYXJJbnN0YW5jZSIsImRlbGV0ZSIsInNlcnZpY2VzIiwiZnJvbSIsInZhbHVlcyIsImFsbCIsImZpbHRlciIsIklOVEVSTkFMIiwiaXNDb21wb25lbnRTZXQiLCJub3JtYWxpemVJZGVudGlmaWVyRm9yRmFjdG9yeSIsIkNvbXBvbmVudENvbnRhaW5lciIsInByb3ZpZGVycyIsImFkZENvbXBvbmVudCIsInByb3ZpZGVyIiwiZ2V0UHJvdmlkZXIiLCJhZGRPck92ZXJ3cml0ZUNvbXBvbmVudCIsImdldFByb3ZpZGVycyIsIl9hJDEiLCJsb2dnZXIkMSIsIkVSUk9SUyIsIkVSUk9SX0ZBQ1RPUlkiLCJ2ZXJzaW9uIiwiUExBVEZPUk1fTE9HX1NUUklORyIsImxvZ2dlciIsIkxvZ2dlciIsIkZpcmViYXNlQXBwSW1wbCIsImNvbmZpZyIsImZpcmViYXNlXyIsImlzRGVsZXRlZF8iLCJuYW1lXyIsImF1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZF8iLCJhdXRvbWF0aWNEYXRhQ29sbGVjdGlvbkVuYWJsZWQiLCJvcHRpb25zXyIsIl9hZGRDb21wb25lbnQiLCJjb21wb25lbnRzIiwiY29tcG9uZW50JDEiLCJjaGVja0Rlc3Ryb3llZF8iLCJ2YWwiLCJjb25maWd1cmFibGUiLCJyZW1vdmVBcHAiLCJfZ2V0U2VydmljZSIsIl9yZW1vdmVTZXJ2aWNlSW5zdGFuY2UiLCJkZWJ1ZyIsIl9hZGRPck92ZXJ3cml0ZUNvbXBvbmVudCIsImFwcE5hbWUiLCJsb2ciLCJ2ZXJzaW9uJDEiLCJmaXJlYmFzZSIsImNyZWF0ZUZpcmViYXNlTmFtZXNwYWNlIiwiZmlyZWJhc2VBcHBJbXBsIiwiYXBwcyIsImluaXRpYWxpemVBcHAiLCJyYXdDb25maWciLCJhcHAiLCJyZWdpc3RlclZlcnNpb24iLCJsaWJyYXJ5S2V5T3JOYW1lIiwidmFyaWFudCIsImxpYnJhcnkiLCJsaWJyYXJ5TWlzbWF0Y2giLCJtYXRjaCIsInZlcnNpb25NaXNtYXRjaCIsIndhcm5pbmciLCJyZWdpc3RlckNvbXBvbmVudCIsInVzZUFzU2VydmljZSIsImNvbXBvbmVudE5hbWUiLCJzZXJ2aWNlTmFtZXNwYWNlIiwiYXBwQXJnIiwic2VydmljZUZ4biIsImNyZWF0ZUZpcmViYXNlTmFtZXNwYWNlQ29yZSIsImV4dGVuZE5hbWVzcGFjZSIsIlBsYXRmb3JtTG9nZ2VyU2VydmljZSIsImdldFBsYXRmb3JtSW5mb1N0cmluZyIsImlzVmVyc2lvblNlcnZpY2VQcm92aWRlciIsImxvZ1N0cmluZyIsInNka1ZlcnNpb24iLCJmaXJlYmFzZSQxIiwicmVnaXN0ZXJDb3JlQ29tcG9uZW50cyIsImV4IiwiRnVuY3Rpb24iLCJMb2dMZXZlbCIsImRlZmF1bHRMb2dMZXZlbCIsIklORk8iLCJkZWZhdWx0TG9nSGFuZGxlciIsImxvZ1R5cGUiLCJsb2dMZXZlbCIsInRvSVNPU3RyaW5nIiwiREVCVUciLCJWRVJCT1NFIiwiaW5mbyIsIldBUk4iLCJFUlJPUiIsIl9sb2dMZXZlbCIsIl9sb2dIYW5kbGVyIiwic2V0TG9nTGV2ZWwiLCJsZXZlbCIsImluc3QiLCJ0b0FycmF5IiwiYXJyIiwicHJvbWlzaWZ5UmVxdWVzdCIsInJlcXVlc3QiLCJvbnN1Y2Nlc3MiLCJvbmVycm9yIiwicHJvbWlzaWZ5UmVxdWVzdENhbGwiLCJwcm9taXNpZnlDdXJzb3JSZXF1ZXN0Q2FsbCIsIkN1cnNvciIsInByb3h5UHJvcGVydGllcyIsIlByb3h5Q2xhc3MiLCJ0YXJnZXRQcm9wIiwicHJvcGVydGllcyIsInByb3h5UmVxdWVzdE1ldGhvZHMiLCJDb25zdHJ1Y3RvciIsInByb3h5TWV0aG9kcyIsInByb3h5Q3Vyc29yUmVxdWVzdE1ldGhvZHMiLCJJbmRleCIsImluZGV4IiwiX2luZGV4IiwiY3Vyc29yIiwiX2N1cnNvciIsIl9yZXF1ZXN0IiwiT2JqZWN0U3RvcmUiLCJzdG9yZSIsIl9zdG9yZSIsIlRyYW5zYWN0aW9uIiwiaWRiVHJhbnNhY3Rpb24iLCJfdHgiLCJvbmNvbXBsZXRlIiwib25hYm9ydCIsIlVwZ3JhZGVEQiIsImRiIiwib2xkVmVyc2lvbiIsInRyYW5zYWN0aW9uIiwiX2RiIiwiREIiLCJJREJJbmRleCIsIklEQkN1cnNvciIsIm1ldGhvZE5hbWUiLCJjcmVhdGVJbmRleCIsIklEQk9iamVjdFN0b3JlIiwib2JqZWN0U3RvcmUiLCJJREJUcmFuc2FjdGlvbiIsImNyZWF0ZU9iamVjdFN0b3JlIiwiSURCRGF0YWJhc2UiLCJmdW5jTmFtZSIsIm5hdGl2ZU9iamVjdCIsImdldEFsbCIsInF1ZXJ5IiwiY291bnQiLCJpdGVtcyIsIml0ZXJhdGVDdXJzb3IiLCJjb250aW51ZSIsIm9wZW5EYiIsInVwZ3JhZGVDYWxsYmFjayIsImluZGV4ZWREQiIsIm9udXBncmFkZW5lZWRlZCIsImV2ZW50IiwiZGVsZXRlRGIiLCJmYWN0b3J5IiwiYXBpIiwiY29udGVudCIsImxvY2FscyIsIm1lbW8iLCJpc09sZElFIiwiQm9vbGVhbiIsImRvY3VtZW50IiwiZ2V0VGFyZ2V0Iiwic3R5bGVUYXJnZXQiLCJxdWVyeVNlbGVjdG9yIiwiSFRNTElGcmFtZUVsZW1lbnQiLCJjb250ZW50RG9jdW1lbnQiLCJoZWFkIiwic3R5bGVzSW5Eb20iLCJnZXRJbmRleEJ5SWRlbnRpZmllciIsIm1vZHVsZXNUb0RvbSIsImxpc3QiLCJpZENvdW50TWFwIiwiaWRlbnRpZmllcnMiLCJpdGVtIiwiaWQiLCJiYXNlIiwiY3NzIiwibWVkaWEiLCJzb3VyY2VNYXAiLCJyZWZlcmVuY2VzIiwidXBkYXRlciIsImFkZFN0eWxlIiwiaW5zZXJ0U3R5bGVFbGVtZW50Iiwic3R5bGUiLCJjcmVhdGVFbGVtZW50IiwiYXR0cmlidXRlcyIsIm5vbmNlIiwic2V0QXR0cmlidXRlIiwiaW5zZXJ0IiwiYXBwZW5kQ2hpbGQiLCJ0ZXh0U3RvcmUiLCJyZXBsYWNlVGV4dCIsInJlcGxhY2VtZW50IiwiYXBwbHlUb1NpbmdsZXRvblRhZyIsInJlbW92ZSIsInN0eWxlU2hlZXQiLCJjc3NUZXh0IiwiY3NzTm9kZSIsImNyZWF0ZVRleHROb2RlIiwiY2hpbGROb2RlcyIsInJlbW92ZUNoaWxkIiwiaW5zZXJ0QmVmb3JlIiwiYXBwbHlUb1RhZyIsInJlbW92ZUF0dHJpYnV0ZSIsInVuZXNjYXBlIiwiZmlyc3RDaGlsZCIsInNpbmdsZXRvbiIsInNpbmdsZXRvbkNvdW50ZXIiLCJzdHlsZUluZGV4IiwicGFyZW50Tm9kZSIsInJlbW92ZVN0eWxlRWxlbWVudCIsIm5ld09iaiIsImxhc3RJZGVudGlmaWVycyIsIm5ld0xpc3QiLCJuZXdMYXN0SWRlbnRpZmllcnMiLCJzcGxpY2UiLCJfX19DU1NfTE9BREVSX0FQSV9JTVBPUlRfX18iLCJfX19DU1NfTE9BREVSX0dFVF9VUkxfSU1QT1JUX19fIiwiX19fQ1NTX0xPQURFUl9VUkxfSU1QT1JUXzBfX18iLCJfX19DU1NfTE9BREVSX1VSTF9JTVBPUlRfMV9fXyIsIl9fX0NTU19MT0FERVJfVVJMX0lNUE9SVF8yX19fIiwiX19fQ1NTX0xPQURFUl9VUkxfUkVQTEFDRU1FTlRfMF9fXyIsIl9fX0NTU19MT0FERVJfVVJMX1JFUExBQ0VNRU5UXzFfX18iLCJfX19DU1NfTE9BREVSX1VSTF9SRVBMQUNFTUVOVF8yX19fIiwidXNlU291cmNlTWFwIiwiY3NzTWFwcGluZyIsInNvdXJjZU1hcHBpbmciLCJzb3VyY2VVUkxzIiwic291cmNlcyIsInNvdXJjZVJvb3QiLCJjc3NXaXRoTWFwcGluZ1RvU3RyaW5nIiwibWVkaWFRdWVyeSIsImRlZHVwZSIsImFscmVhZHlJbXBvcnRlZE1vZHVsZXMiLCJ1cmwiLCJoYXNoIiwibmVlZFF1b3RlcyIsIndlYmNoYW5uZWxXcmFwcGVyIiwibG9nQ2xpZW50IiwiZ2V0TG9nTGV2ZWwiLCJTSUxFTlQiLCJuZXdMZXZlbCIsInRhZyIsIm1zZyIsImFyZ1RvU3RyaW5nIiwicGxhdGZvcm0iLCJQbGF0Zm9ybVN1cHBvcnQiLCJnZXRQbGF0Zm9ybSIsImZvcm1hdEpTT04iLCJmYWlsIiwiZmFpbHVyZSIsInNldFBsYXRmb3JtIiwiZW1wdHlCeXRlU3RyaW5nIiwiQ29kZSIsIk9LIiwiQ0FOQ0VMTEVEIiwiVU5LTk9XTiIsIklOVkFMSURfQVJHVU1FTlQiLCJERUFETElORV9FWENFRURFRCIsIk5PVF9GT1VORCIsIkFMUkVBRFlfRVhJU1RTIiwiUEVSTUlTU0lPTl9ERU5JRUQiLCJVTkFVVEhFTlRJQ0FURUQiLCJSRVNPVVJDRV9FWEhBVVNURUQiLCJGQUlMRURfUFJFQ09ORElUSU9OIiwiQUJPUlRFRCIsIk9VVF9PRl9SQU5HRSIsIlVOSU1QTEVNRU5URUQiLCJVTkFWQUlMQUJMRSIsIkRBVEFfTE9TUyIsIkZpcmVzdG9yZUVycm9yIiwibWFrZUNvbnN0cnVjdG9yUHJpdmF0ZSIsImNscyIsIm9wdGlvbmFsTWVzc2FnZSIsIlB1YmxpY0NvbnN0cnVjdG9yIiwic3RhdGljUHJvcGVydHkiLCJkZWZhdWx0ZWQiLCJkZWZhdWx0VmFsdWUiLCJmb3JFYWNoTnVtYmVyIiwibnVtIiwiTnVtYmVyIiwiaXNOYU4iLCJ2YWxpZGF0ZU5vQXJncyIsImZ1bmN0aW9uTmFtZSIsImZvcm1hdFBsdXJhbCIsInZhbGlkYXRlRXhhY3ROdW1iZXJPZkFyZ3MiLCJudW1iZXJPZkFyZ3MiLCJ2YWxpZGF0ZUF0TGVhc3ROdW1iZXJPZkFyZ3MiLCJtaW5OdW1iZXJPZkFyZ3MiLCJ2YWxpZGF0ZUJldHdlZW5OdW1iZXJPZkFyZ3MiLCJtYXhOdW1iZXJPZkFyZ3MiLCJ2YWxpZGF0ZUFyZ1R5cGUiLCJwb3NpdGlvbiIsImFyZ3VtZW50IiwidmFsaWRhdGVUeXBlIiwib3JkaW5hbCIsInZhbGlkYXRlT3B0aW9uYWxBcmdUeXBlIiwidmFsaWRhdGVOYW1lZFR5cGUiLCJvcHRpb25OYW1lIiwidmFsaWRhdGVOYW1lZE9wdGlvbmFsVHlwZSIsInZhbGlkYXRlT3B0aW9uYWxBcnJheUVsZW1lbnRzIiwidHlwZURlc2NyaXB0aW9uIiwidmFsaWRhdG9yIiwidmFsdWVEZXNjcmlwdGlvbiIsInZhbGlkYXRlQXJyYXlFbGVtZW50cyIsInZhbGlkYXRlTmFtZWRPcHRpb25hbFByb3BlcnR5RXF1YWxzIiwiaW5wdXROYW1lIiwiZXhwZWN0ZWQiLCJleHBlY3RlZERlc2NyaXB0aW9uIiwiZXhwZWN0ZWRfMSIsImFjdHVhbERlc2NyaXB0aW9uIiwidmFsaWRhdGVOYW1lZFByb3BlcnR5RXF1YWxzIiwidmFsaWRhdGVTdHJpbmdFbnVtIiwiZW51bXMiLCJzb21lIiwiZWxlbWVudCIsImlzUGxhaW5PYmplY3QiLCJkZXNjcmlwdGlvbiIsImdldFByb3RvdHlwZU9mIiwic3Vic3RyaW5nIiwiY3VzdG9tT2JqZWN0TmFtZSIsInJlc3VsdHMiLCJleGVjIiwidHJ5R2V0Q3VzdG9tT2JqZWN0VHlwZSIsInZhbGlkYXRlRGVmaW5lZCIsInZhbGlkYXRlT3B0aW9uTmFtZXMiLCJvcHRpb25OYW1lcyIsImludmFsaWRDbGFzc0Vycm9yIiwidmFsaWRhdGVQb3NpdGl2ZU51bWJlciIsIkF1dG9JZCIsIm5ld0lkIiwiY2hhcnMiLCJhdXRvSWQiLCJyYW5kb20iLCJwcmltaXRpdmVDb21wYXJhdG9yIiwibGVmdCIsInJpZ2h0IiwiYXJyYXlFcXVhbHMiLCJpc0VxdWFsIiwiaW1tZWRpYXRlU3VjY2Vzc29yIiwiYXNzZXJ0VWludDhBcnJheUF2YWlsYWJsZSIsIlVpbnQ4QXJyYXkiLCJhc3NlcnRCYXNlNjRBdmFpbGFibGUiLCJiYXNlNjRBdmFpbGFibGUiLCJUaW1lcklkIiwiQmxvYiIsImJpbmFyeVN0cmluZyIsIl9iaW5hcnlTdHJpbmciLCJmcm9tQmFzZTY0U3RyaW5nIiwiZnJvbVVpbnQ4QXJyYXkiLCJhcnJheSIsImNoYXIiLCJ0b0Jhc2U2NCIsInRvVWludDhBcnJheSIsImJ1ZmZlciIsIm90aGVyIiwiX2NvbXBhcmVUbyIsIlB1YmxpY0Jsb2IiLCJEYXRhYmFzZUluZm8iLCJkYXRhYmFzZUlkIiwicGVyc2lzdGVuY2VLZXkiLCJob3N0Iiwic3NsIiwiZm9yY2VMb25nUG9sbGluZyIsIkRFRkFVTFRfREFUQUJBU0VfTkFNRSIsIkRhdGFiYXNlSWQiLCJwcm9qZWN0SWQiLCJkYXRhYmFzZSIsImNvbXBhcmVUbyIsIkxpc3RlblNlcXVlbmNlIiwicHJldmlvdXNWYWx1ZSIsInNlcXVlbmNlTnVtYmVyU3luY2VyIiwic2VxdWVuY2VOdW1iZXJIYW5kbGVyIiwic2VxdWVuY2VOdW1iZXIiLCJzZXRQcmV2aW91c1ZhbHVlIiwid3JpdGVOZXdTZXF1ZW5jZU51bWJlciIsIndyaXRlU2VxdWVuY2VOdW1iZXIiLCJleHRlcm5hbFByZXZpb3VzVmFsdWUiLCJtYXgiLCJuZXh0VmFsdWUiLCJJTlZBTElEIiwiQmFzZVBhdGgiLCJzZWdtZW50cyIsImxlbiIsImNvbXBhcmF0b3IiLCJjaGlsZCIsIm5hbWVPclBhdGgiLCJsaW1pdCIsInNlZ21lbnQiLCJjb25zdHJ1Y3QiLCJwb3BGaXJzdCIsInNpemUiLCJwb3BMYXN0IiwiZmlyc3RTZWdtZW50IiwibGFzdFNlZ21lbnQiLCJpc1ByZWZpeE9mIiwiaXNJbW1lZGlhdGVQYXJlbnRPZiIsInBvdGVudGlhbENoaWxkIiwiZW5kIiwicDEiLCJwMiIsIm1pbiIsIlJlc291cmNlUGF0aCIsImNhbm9uaWNhbFN0cmluZyIsImZyb21TdHJpbmciLCJwYXRoIiwiRU1QVFlfUEFUSCIsImlkZW50aWZpZXJSZWdFeHAiLCJGaWVsZFBhdGgiLCJpc1ZhbGlkSWRlbnRpZmllciIsImlzS2V5RmllbGQiLCJrZXlGaWVsZCIsImZyb21TZXJ2ZXJGb3JtYXQiLCJjdXJyZW50IiwiYWRkQ3VycmVudFNlZ21lbnQiLCJpbkJhY2t0aWNrcyIsIkRvY3VtZW50S2V5IiwiaXNEb2N1bWVudEtleSIsImhhc0NvbGxlY3Rpb25JZCIsImNvbGxlY3Rpb25JZCIsImsxIiwiazIiLCJmcm9tU2VnbWVudHMiLCJmcm9tUGF0aFN0cmluZyIsIkVNUFRZIiwiRGVsYXllZE9wZXJhdGlvbiIsImFzeW5jUXVldWUiLCJ0aW1lcklkIiwidGFyZ2V0VGltZU1zIiwicmVtb3ZhbENhbGxiYWNrIiwiY3JlYXRlQW5kU2NoZWR1bGUiLCJkZWxheU1zIiwiZGVsYXllZE9wIiwic3RhcnQiLCJ0aW1lckhhbmRsZSIsInNldFRpbWVvdXQiLCJoYW5kbGVEZWxheUVsYXBzZWQiLCJza2lwRGVsYXkiLCJjYW5jZWwiLCJyZWFzb24iLCJjbGVhclRpbWVvdXQiLCJlbnF1ZXVlQW5kRm9yZ2V0IiwiQXN5bmNRdWV1ZSIsInRhaWwiLCJfaXNTaHV0dGluZ0Rvd24iLCJkZWxheWVkT3BlcmF0aW9ucyIsIm9wZXJhdGlvbkluUHJvZ3Jlc3MiLCJ0aW1lcklkc1RvU2tpcCIsImVucXVldWUiLCJlbnF1ZXVlQW5kRm9yZ2V0RXZlbkFmdGVyU2h1dGRvd24iLCJ2ZXJpZnlOb3RGYWlsZWQiLCJlbnF1ZXVlSW50ZXJuYWwiLCJlbnF1ZXVlRXZlbkFmdGVyU2h1dGRvd24iLCJlbnF1ZXVlQW5kSW5pdGlhdGVTaHV0ZG93biIsIm5ld1RhaWwiLCJlcnJvciQxIiwic3RhY2siLCJlbnF1ZXVlQWZ0ZXJEZWxheSIsInJlbW92ZWRPcCIsInJlbW92ZURlbGF5ZWRPcGVyYXRpb24iLCJ2ZXJpZnlPcGVyYXRpb25JblByb2dyZXNzIiwiZHJhaW4iLCJjb250YWluc0RlbGF5ZWRPcGVyYXRpb24iLCJydW5EZWxheWVkT3BlcmF0aW9uc0Vhcmx5IiwibGFzdFRpbWVySWQiLCJBbGwiLCJzb3J0Iiwic2tpcERlbGF5c0ZvclRpbWVySWQiLCJlc2NhcGVDaGFyIiwiZW5jb2RlZFNlcGFyYXRvckNoYXIiLCJlbmNvZGVkTnVsIiwiZW5jb2RlZEVzY2FwZSIsImVuY29kZSIsImVuY29kZVNlcGFyYXRvciIsImVuY29kZVNlZ21lbnQiLCJyZXN1bHRCdWYiLCJsYXN0UmVhc29uYWJsZUVzY2FwZUluZGV4Iiwic2VnbWVudEJ1aWxkZXIiLCJjdXJyZW50UGllY2UiLCJUaW1lc3RhbXAiLCJzZWNvbmRzIiwibmFub3NlY29uZHMiLCJmcm9tTWlsbGlzIiwiZnJvbURhdGUiLCJkYXRlIiwibWlsbGlzZWNvbmRzIiwidG9EYXRlIiwidG9NaWxsaXMiLCJTbmFwc2hvdFZlcnNpb24iLCJ0aW1lc3RhbXAiLCJmcm9tTWljcm9zZWNvbmRzIiwiZnJvbVRpbWVzdGFtcCIsImZvckRlbGV0ZWREb2MiLCJNSU4iLCJ0b01pY3Jvc2Vjb25kcyIsInRvVGltZXN0YW1wIiwiU29ydGVkTWFwIiwicm9vdCIsIkxMUkJOb2RlIiwiY29weSIsIkJMQUNLIiwibm9kZSIsImNtcCIsInBydW5lZE5vZGVzIiwibWluS2V5IiwibWF4S2V5IiwiaW5vcmRlclRyYXZlcnNhbCIsImFjdGlvbiIsImRlc2NyaXB0aW9ucyIsInJldmVyc2VUcmF2ZXJzYWwiLCJnZXRJdGVyYXRvciIsIlNvcnRlZE1hcEl0ZXJhdG9yIiwiZ2V0SXRlcmF0b3JGcm9tIiwiZ2V0UmV2ZXJzZUl0ZXJhdG9yIiwiZ2V0UmV2ZXJzZUl0ZXJhdG9yRnJvbSIsInN0YXJ0S2V5IiwiaXNSZXZlcnNlIiwibm9kZVN0YWNrIiwiZ2V0TmV4dCIsImhhc05leHQiLCJwZWVrIiwiY29sb3IiLCJSRUQiLCJmaXhVcCIsInJlbW92ZU1pbiIsImlzUmVkIiwibW92ZVJlZExlZnQiLCJzbWFsbGVzdCIsInJvdGF0ZVJpZ2h0IiwibW92ZVJlZFJpZ2h0Iiwicm90YXRlTGVmdCIsImNvbG9yRmxpcCIsIm5sIiwibnIiLCJjaGVja01heERlcHRoIiwiYmxhY2tEZXB0aCIsImNoZWNrIiwicG93IiwiTExSQkVtcHR5Tm9kZSIsIlNvcnRlZFNldCIsImZyb21NYXBLZXlzIiwiYWRkIiwiZWxlbSIsImZpcnN0IiwibGFzdCIsImNiIiwiZm9yRWFjaEluUmFuZ2UiLCJyYW5nZSIsIml0ZXIiLCJmb3JFYWNoV2hpbGUiLCJmaXJzdEFmdGVyT3JFcXVhbCIsIlNvcnRlZFNldEl0ZXJhdG9yIiwidW5pb25XaXRoIiwidGhpc0l0Iiwib3RoZXJJdCIsInRoaXNFbGVtIiwib3RoZXJFbGVtIiwidGFyZ2V0SWQiLCJFTVBUWV9NQVlCRV9ET0NVTUVOVF9NQVAiLCJtYXliZURvY3VtZW50TWFwIiwibnVsbGFibGVNYXliZURvY3VtZW50TWFwIiwiRU1QVFlfRE9DVU1FTlRfTUFQIiwiZG9jdW1lbnRNYXAiLCJFTVBUWV9ET0NVTUVOVF9WRVJTSU9OX01BUCIsImRvY3VtZW50VmVyc2lvbk1hcCIsIkVNUFRZX0RPQ1VNRU5UX0tFWV9TRVQiLCJkb2N1bWVudEtleVNldCIsImtleXNfMSIsIkVNUFRZX1RBUkdFVF9JRF9TRVQiLCJ0YXJnZXRJZFNldCIsIk11dGF0aW9uQmF0Y2giLCJiYXRjaElkIiwibG9jYWxXcml0ZVRpbWUiLCJiYXNlTXV0YXRpb25zIiwibXV0YXRpb25zIiwiYXBwbHlUb1JlbW90ZURvY3VtZW50IiwiZG9jS2V5IiwibWF5YmVEb2MiLCJiYXRjaFJlc3VsdCIsIm11dGF0aW9uUmVzdWx0cyIsIm11dGF0aW9uIiwibXV0YXRpb25SZXN1bHQiLCJhcHBseVRvTG9jYWxWaWV3IiwiYmFzZURvYyIsImFwcGx5VG9Mb2NhbERvY3VtZW50U2V0IiwibWF5YmVEb2NzIiwibXV0YXRlZERvY3VtZW50cyIsIm11dGF0ZWREb2N1bWVudCIsInJlZHVjZSIsIk11dGF0aW9uQmF0Y2hSZXN1bHQiLCJiYXRjaCIsImNvbW1pdFZlcnNpb24iLCJzdHJlYW1Ub2tlbiIsImRvY1ZlcnNpb25zIiwidmVyc2lvbk1hcCIsIlBlcnNpc3RlbmNlUHJvbWlzZSIsIm5leHRDYWxsYmFjayIsImNhdGNoQ2FsbGJhY2siLCJpc0RvbmUiLCJjYWxsYmFja0F0dGFjaGVkIiwibmV4dEZuIiwiY2F0Y2hGbiIsIndyYXBGYWlsdXJlIiwid3JhcFN1Y2Nlc3MiLCJ0b1Byb21pc2UiLCJ3cmFwVXNlckZ1bmN0aW9uIiwid2FpdEZvciIsImV4cGVjdGVkQ291bnQiLCJyZXNvbHZlZENvdW50Iiwib3IiLCJwcmVkaWNhdGVzIiwicHJlZGljYXRlIiwiaXNUcnVlIiwicHJlZGljYXRlc18xIiwiY29sbGVjdGlvbiIsInByb21pc2VzIiwiTE9HX1RBRyIsIlNpbXBsZURiIiwiZ2V0SU9TVmVyc2lvbiIsIm9wZW5PckNyZWF0ZSIsInNjaGVtYUNvbnZlcnRlciIsImlzQXZhaWxhYmxlIiwib3BlbiIsIm9uYmxvY2tlZCIsImNyZWF0ZU9yVXBncmFkZSIsIlNDSEVNQV9WRVJTSU9OIiwid3JhcFJlcXVlc3QiLCJkZWxldGVEYXRhYmFzZSIsImlzTW9ja1BlcnNpc3RlbmNlIiwidWEiLCJpT1NWZXJzaW9uIiwiaXNVbnN1cHBvcnRlZElPUyIsImFuZHJvaWRWZXJzaW9uIiwiZ2V0QW5kcm9pZFZlcnNpb24iLCJpc1Vuc3VwcG9ydGVkQW5kcm9pZCIsImVudiIsIlVTRV9NT0NLX1BFUlNJU1RFTkNFIiwiZ2V0U3RvcmUiLCJ0eG4iLCJpT1NWZXJzaW9uUmVnZXgiLCJhbmRyb2lkVmVyc2lvblJlZ2V4Iiwic2V0VmVyc2lvbkNoYW5nZUxpc3RlbmVyIiwidmVyc2lvbkNoYW5nZUxpc3RlbmVyIiwib252ZXJzaW9uY2hhbmdlIiwicnVuVHJhbnNhY3Rpb24iLCJvYmplY3RTdG9yZXMiLCJ0cmFuc2FjdGlvbkZuIiwicmVhZG9ubHkiLCJpZGVtcG90ZW50IiwiYXR0ZW1wdE51bWJlciIsInRoaXNfMSIsInN0YXRlXzEiLCJzdGFydHNXaXRoIiwiZW5kc1dpdGgiLCJ0cmFuc2FjdGlvbkZuUmVzdWx0IiwiZXJyb3JfMSIsInJldHJ5YWJsZSIsIlNpbXBsZURiVHJhbnNhY3Rpb24iLCJhYm9ydCIsImNvbXBsZXRpb25Qcm9taXNlIiwiSXRlcmF0aW9uQ29udHJvbGxlciIsImRiQ3Vyc29yIiwic2hvdWxkU3RvcCIsIm5leHRLZXkiLCJza2lwIiwiYWJvcnRlZCIsImNvbXBsZXRpb25EZWZlcnJlZCIsImNoZWNrRm9yQW5kUmVwb3J0aU9TRXJyb3IiLCJvYmplY3RTdG9yZU5hbWVzIiwic3RvcmVOYW1lIiwiU2ltcGxlRGJTdG9yZSIsInB1dCIsImtleU9yVmFsdWUiLCJsb2FkQWxsIiwiaW5kZXhPclJhbmdlIiwiZGVsZXRlQWxsIiwia2V5c09ubHkiLCJjb250cm9sIiwiaXRlcmF0ZSIsIm9wdGlvbnNPckNhbGxiYWNrIiwiaXRlcmF0ZVNlcmlhbCIsImN1cnNvclJlcXVlc3QiLCJwcmltYXJ5S2V5Iiwic2hvdWxkQ29udGludWUiLCJjb250cm9sbGVyIiwidXNlclJlc3VsdCIsInVzZXJQcm9taXNlIiwic2tpcFRvS2V5IiwiaW5kZXhOYW1lIiwiZGlyZWN0aW9uIiwicmV2ZXJzZSIsIm9wZW5LZXlDdXJzb3IiLCJvcGVuQ3Vyc29yIiwicmVwb3J0ZWRJT1NFcnJvciIsIklPU19FUlJPUiIsIm5ld0Vycm9yXzEiLCJJbmRleGVkRGJNdXRhdGlvblF1ZXVlIiwidXNlcklkIiwic2VyaWFsaXplciIsImluZGV4TWFuYWdlciIsInJlZmVyZW5jZURlbGVnYXRlIiwiZG9jdW1lbnRLZXlzQnlCYXRjaElkIiwiZm9yVXNlciIsInVzZXIiLCJ1aWQiLCJpc0F1dGhlbnRpY2F0ZWQiLCJjaGVja0VtcHR5IiwiZW1wdHkiLCJJREJLZXlSYW5nZSIsImJvdW5kIiwiTkVHQVRJVkVfSU5GSU5JVFkiLCJQT1NJVElWRV9JTkZJTklUWSIsIm11dGF0aW9uc1N0b3JlIiwiRGJNdXRhdGlvbkJhdGNoIiwidXNlck11dGF0aW9uc0luZGV4IiwiYWNrbm93bGVkZ2VCYXRjaCIsImdldE11dGF0aW9uUXVldWVNZXRhZGF0YSIsImxhc3RTdHJlYW1Ub2tlbiIsImNvbnZlcnRTdHJlYW1Ub2tlbiIsIm11dGF0aW9uUXVldWVzU3RvcmUiLCJnZXRMYXN0U3RyZWFtVG9rZW4iLCJzZXRMYXN0U3RyZWFtVG9rZW4iLCJhZGRNdXRhdGlvbkJhdGNoIiwiZG9jdW1lbnRTdG9yZSIsImRvY3VtZW50TXV0YXRpb25zU3RvcmUiLCJtdXRhdGlvblN0b3JlIiwiZGJCYXRjaCIsInRvRGJNdXRhdGlvbkJhdGNoIiwiY29sbGVjdGlvblBhcmVudHMiLCJtdXRhdGlvbnNfMSIsImluZGV4S2V5IiwiRGJEb2N1bWVudE11dGF0aW9uIiwiUExBQ0VIT0xERVIiLCJwYXJlbnQiLCJhZGRUb0NvbGxlY3Rpb25QYXJlbnRJbmRleCIsImFkZE9uQ29tbWl0dGVkTGlzdGVuZXIiLCJsb29rdXBNdXRhdGlvbkJhdGNoIiwiZnJvbURiTXV0YXRpb25CYXRjaCIsImxvb2t1cE11dGF0aW9uS2V5cyIsImdldE5leHRNdXRhdGlvbkJhdGNoQWZ0ZXJCYXRjaElkIiwibmV4dEJhdGNoSWQiLCJsb3dlckJvdW5kIiwiZm91bmRCYXRjaCIsImdldEhpZ2hlc3RVbmFja25vd2xlZGdlZEJhdGNoSWQiLCJ1cHBlckJvdW5kIiwiZ2V0QWxsTXV0YXRpb25CYXRjaGVzIiwiZGJCYXRjaGVzIiwiZ2V0QWxsTXV0YXRpb25CYXRjaGVzQWZmZWN0aW5nRG9jdW1lbnRLZXkiLCJkb2N1bWVudEtleSIsImluZGV4UHJlZml4IiwicHJlZml4Rm9yUGF0aCIsImluZGV4U3RhcnQiLCJ1c2VySUQiLCJlbmNvZGVkUGF0aCIsImdldEFsbE11dGF0aW9uQmF0Y2hlc0FmZmVjdGluZ0RvY3VtZW50S2V5cyIsImRvY3VtZW50S2V5cyIsInVuaXF1ZUJhdGNoSURzIiwiYmF0Y2hJRCIsImxvb2t1cE11dGF0aW9uQmF0Y2hlcyIsImdldEFsbE11dGF0aW9uQmF0Y2hlc0FmZmVjdGluZ1F1ZXJ5IiwiaXNEb2N1bWVudFF1ZXJ5IiwiaXNDb2xsZWN0aW9uR3JvdXBRdWVyeSIsInF1ZXJ5UGF0aCIsImltbWVkaWF0ZUNoaWxkcmVuTGVuZ3RoIiwiYmF0Y2hJRHMiLCJyZW1vdmVNdXRhdGlvbkJhdGNoIiwic2ltcGxlRGJUcmFuc2FjdGlvbiIsInJlbW92ZWREb2N1bWVudHMiLCJyZW1vdmVDYWNoZWRNdXRhdGlvbktleXMiLCJyZW1vdmVNdXRhdGlvblJlZmVyZW5jZSIsInBlcmZvcm1Db25zaXN0ZW5jeUNoZWNrIiwic3RhcnRSYW5nZSIsInByZWZpeEZvclVzZXIiLCJkYW5nbGluZ011dGF0aW9uUmVmZXJlbmNlcyIsImNvbnRhaW5zS2V5IiwibXV0YXRpb25RdWV1ZUNvbnRhaW5zS2V5IiwiRGJNdXRhdGlvblF1ZXVlIiwia2V5UGF0aCIsImluZGV4VHhuIiwib25seSIsIm51bURlbGV0ZWQiLCJyZW1vdmVQcm9taXNlIiwiSW5kZXhlZERiUGVyc2lzdGVuY2UiLCJHZW5lcmF0b3JJZHMiLCJSRVNFUlZFRF9CSVRTIiwiVGFyZ2V0SWRHZW5lcmF0b3IiLCJnZW5lcmF0b3JJZCIsInNlZWQiLCJzZWVrIiwibmV4dElkIiwiYWZ0ZXIiLCJmb3JUYXJnZXRDYWNoZSIsIlF1ZXJ5Q2FjaGUiLCJmb3JTeW5jRW5naW5lIiwiU3luY0VuZ2luZSIsIkluZGV4ZWREYlRhcmdldENhY2hlIiwidGFyZ2V0SWRHZW5lcmF0b3IiLCJhbGxvY2F0ZVRhcmdldElkIiwicmV0cmlldmVNZXRhZGF0YSIsImhpZ2hlc3RUYXJnZXRJZCIsInNhdmVNZXRhZGF0YSIsImdldExhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24iLCJsYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uIiwiZ2V0SGlnaGVzdFNlcXVlbmNlTnVtYmVyIiwiZ2V0SGlnaGVzdExpc3RlblNlcXVlbmNlTnVtYmVyIiwic2V0VGFyZ2V0c01ldGFkYXRhIiwiaGlnaGVzdExpc3RlblNlcXVlbmNlTnVtYmVyIiwiYWRkVGFyZ2V0RGF0YSIsInRhcmdldERhdGEiLCJzYXZlVGFyZ2V0RGF0YSIsInRhcmdldENvdW50IiwidXBkYXRlTWV0YWRhdGFGcm9tVGFyZ2V0RGF0YSIsInVwZGF0ZVRhcmdldERhdGEiLCJyZW1vdmVUYXJnZXREYXRhIiwicmVtb3ZlTWF0Y2hpbmdLZXlzRm9yVGFyZ2V0SWQiLCJ0YXJnZXRzU3RvcmUiLCJyZW1vdmVUYXJnZXRzIiwiYWN0aXZlVGFyZ2V0SWRzIiwiZnJvbURiVGFyZ2V0IiwiZm9yRWFjaFRhcmdldCIsIkRiVGFyZ2V0R2xvYmFsIiwidG9EYlRhcmdldCIsInVwZGF0ZWQiLCJnZXRUYXJnZXRDb3VudCIsImdldFRhcmdldERhdGEiLCJjYW5vbmljYWxJZCIsIkRiVGFyZ2V0IiwicXVlcnlUYXJnZXRzSW5kZXhOYW1lIiwiZm91bmQiLCJhZGRNYXRjaGluZ0tleXMiLCJkb2N1bWVudFRhcmdldFN0b3JlIiwiRGJUYXJnZXREb2N1bWVudCIsImFkZFJlZmVyZW5jZSIsInJlbW92ZU1hdGNoaW5nS2V5cyIsInJlbW92ZVJlZmVyZW5jZSIsImdldE1hdGNoaW5nS2V5c0ZvclRhcmdldElkIiwiZG9jdW1lbnRUYXJnZXRzSW5kZXgiLCJnZXRUYXJnZXREYXRhRm9yVGFyZ2V0IiwidGFyZ2V0R2xvYmFsIiwiTXV0YXRpb25UeXBlIiwiRmllbGRNYXNrIiwiZmllbGRzIiwiZnJvbVNldCIsImZyb21BcnJheSIsImZpZWxkc0FzU2V0IiwiZmllbGRQYXRoIiwiY292ZXJzIiwiZmllbGRNYXNrUGF0aCIsIkZpZWxkVHJhbnNmb3JtIiwiZmllbGQiLCJ0cmFuc2Zvcm0iLCJNdXRhdGlvblJlc3VsdCIsInRyYW5zZm9ybVJlc3VsdHMiLCJUeXBlT3JkZXIiLCJTZXJ2ZXJUaW1lc3RhbXBCZWhhdmlvciIsIlByZWNvbmRpdGlvbiIsInVwZGF0ZVRpbWUiLCJleGlzdHMiLCJpc1ZhbGlkRm9yIiwiRG9jdW1lbnQiLCJpc05vbmUiLCJOT05FIiwiTXV0YXRpb24iLCJ2ZXJpZnlLZXlNYXRjaGVzIiwiZ2V0UG9zdE11dGF0aW9uVmVyc2lvbiIsIlNldE11dGF0aW9uIiwicHJlY29uZGl0aW9uIiwiU2V0IiwiaGFzQ29tbWl0dGVkTXV0YXRpb25zIiwiaGFzTG9jYWxNdXRhdGlvbnMiLCJleHRyYWN0QmFzZVZhbHVlIiwiUGF0Y2hNdXRhdGlvbiIsImZpZWxkTWFzayIsIlBhdGNoIiwiVW5rbm93bkRvY3VtZW50IiwibmV3RGF0YSIsInBhdGNoRG9jdW1lbnQiLCJPYmplY3RWYWx1ZSIsInBhdGNoT2JqZWN0IiwibmV3VmFsdWUiLCJUcmFuc2Zvcm1NdXRhdGlvbiIsImZpZWxkVHJhbnNmb3JtcyIsIlRyYW5zZm9ybSIsImRvYyIsInJlcXVpcmVEb2N1bWVudCIsInNlcnZlclRyYW5zZm9ybVJlc3VsdHMiLCJ0cmFuc2Zvcm1PYmplY3QiLCJsb2NhbFRyYW5zZm9ybVJlc3VsdHMiLCJiYXNlT2JqZWN0IiwiZmllbGRUcmFuc2Zvcm0iLCJleGlzdGluZ1ZhbHVlIiwiY29lcmNlZFZhbHVlIiwiY29tcHV0ZUJhc2VWYWx1ZSIsIkRlbGV0ZU11dGF0aW9uIiwiRGVsZXRlIiwiTm9Eb2N1bWVudCIsIkZpZWxkVmFsdWVPcHRpb25zIiwic2VydmVyVGltZXN0YW1wQmVoYXZpb3IiLCJ0aW1lc3RhbXBzSW5TbmFwc2hvdHMiLCJmcm9tU25hcHNob3RPcHRpb25zIiwic2VydmVyVGltZXN0YW1wcyIsIkVzdGltYXRlIiwiUHJldmlvdXMiLCJEZWZhdWx0IiwiRmllbGRWYWx1ZSIsImRlZmF1bHRDb21wYXJlVG8iLCJ0eXBlT3JkZXIiLCJOdWxsVmFsdWUiLCJpbnRlcm5hbFZhbHVlIiwiSU5TVEFOQ0UiLCJCb29sZWFuVmFsdWUiLCJvZiIsIlRSVUUiLCJGQUxTRSIsIk51bWJlclZhbHVlIiwibnVtZXJpY0VxdWFscyIsIkludGVnZXJWYWx1ZSIsIkRvdWJsZVZhbHVlIiwiTkFOIiwiTmFOIiwiSW5maW5pdHkiLCJTdHJpbmdWYWx1ZSIsIlRpbWVzdGFtcFZhbHVlIiwiU2VydmVyVGltZXN0YW1wVmFsdWUiLCJCbG9iVmFsdWUiLCJSZWZWYWx1ZSIsIkdlb1BvaW50VmFsdWUiLCJpdDEiLCJpdDIiLCJuZXh0MSIsIm5leHQyIiwidG8iLCJzZXRDaGlsZCIsIm5ld0NoaWxkIiwicGF0aFNlZ21lbnQiLCJjdXJyZW50UGF0aCIsIm5lc3RlZEZpZWxkcyIsIm5lc3RlZFBhdGgiLCJjaGlsZE5hbWUiLCJBcnJheVZhbHVlIiwibWluTGVuZ3RoIiwiTWF5YmVEb2N1bWVudCIsImNvbXBhcmVCeUtleSIsImQxIiwiZDIiLCJvYmplY3RWYWx1ZSIsInByb3RvIiwiY29udmVydGVyIiwiZmllbGRWYWx1ZUNhY2hlIiwiY2Fub25pY2FsUGF0aCIsImZpZWxkVmFsdWUiLCJwcm90b1ZhbHVlIiwiZ2V0UHJvdG9GaWVsZCIsInJlc3VsdF8xIiwibWFwVmFsdWUiLCJjb21wYXJlQnlGaWVsZCIsInYxIiwidjIiLCJPYmplY3RNYXAiLCJtYXBLZXlGbiIsImlubmVyIiwibWF0Y2hlcyIsIm1hdGNoZXNfMSIsIm90aGVyS2V5IiwiZW50cmllc18xIiwiUmVtb3RlRG9jdW1lbnRDaGFuZ2VCdWZmZXIiLCJjaGFuZ2VzIiwiY2hhbmdlc0FwcGxpZWQiLCJfcmVhZFRpbWUiLCJhZGRFbnRyeSIsIm1heWJlRG9jdW1lbnQiLCJyZWFkVGltZSIsImFzc2VydE5vdEFwcGxpZWQiLCJyZW1vdmVFbnRyeSIsImdldEVudHJ5IiwiYnVmZmVyZWRFbnRyeSIsImdldEZyb21DYWNoZSIsImdldEVudHJpZXMiLCJnZXRBbGxGcm9tQ2FjaGUiLCJhcHBseUNoYW5nZXMiLCJJbmRleGVkRGJSZW1vdGVEb2N1bWVudENhY2hlIiwicmVtb3RlRG9jdW1lbnRzU3RvcmUiLCJkYktleSIsInVwZGF0ZU1ldGFkYXRhIiwic2l6ZURlbHRhIiwiZ2V0TWV0YWRhdGEiLCJieXRlU2l6ZSIsInNldE1ldGFkYXRhIiwiZGJSZW1vdGVEb2MiLCJtYXliZURlY29kZURvY3VtZW50IiwiZ2V0U2l6ZWRFbnRyeSIsImRiRG9jdW1lbnRTaXplIiwiZm9yRWFjaERiRW50cnkiLCJnZXRTaXplZEVudHJpZXMiLCJzaXplTWFwIiwibWF5YmVEb2N1bWVudHMiLCJrZXlJdGVyIiwicG90ZW50aWFsS2V5UmF3IiwicG90ZW50aWFsS2V5IiwiZ2V0RG9jdW1lbnRzTWF0Y2hpbmdRdWVyeSIsInNpbmNlUmVhZFRpbWUiLCJpbW1lZGlhdGVDaGlsZHJlblBhdGhMZW5ndGgiLCJpdGVyYXRpb25PcHRpb25zIiwiY29sbGVjdGlvbktleSIsInJlYWRUaW1lS2V5IiwidG9EYlRpbWVzdGFtcEtleSIsIkRiUmVtb3RlRG9jdW1lbnQiLCJjb2xsZWN0aW9uUmVhZFRpbWVJbmRleCIsImZyb21EYlJlbW90ZURvY3VtZW50IiwiZ2V0TmV3RG9jdW1lbnRDaGFuZ2VzIiwiY2hhbmdlZERvY3MiLCJsYXN0UmVhZFRpbWUiLCJkb2N1bWVudHNTdG9yZSIsInJlYWRUaW1lSW5kZXgiLCJmcm9tRGJUaW1lc3RhbXBLZXkiLCJnZXRMYXN0RG9jdW1lbnRDaGFuZ2UiLCJjaGFuZ2VkRG9jIiwibmV3Q2hhbmdlQnVmZmVyIiwidHJhY2tSZW1vdmFscyIsImdldFNpemUiLCJkb2N1bWVudEdsb2JhbFN0b3JlIiwiRGJSZW1vdGVEb2N1bWVudEdsb2JhbCIsImNsYXNzXzEiLCJkb2N1bWVudENhY2hlIiwiZG9jdW1lbnRTaXplcyIsInByZXZpb3VzU2l6ZSIsInRvRGJSZW1vdGVEb2N1bWVudCIsImRlbGV0ZWREb2MiLCJnZXRSZXN1bHQiLCJ1bmtub3duRG9jdW1lbnQiLCJub0RvY3VtZW50IiwiTWVtb3J5SW5kZXhNYW5hZ2VyIiwiY29sbGVjdGlvblBhcmVudEluZGV4IiwiTWVtb3J5Q29sbGVjdGlvblBhcmVudEluZGV4IiwiY29sbGVjdGlvblBhdGgiLCJnZXRDb2xsZWN0aW9uUGFyZW50cyIsInBhcmVudFBhdGgiLCJleGlzdGluZ1BhcmVudHMiLCJhZGRlZCIsIlNjaGVtYUNvbnZlcnRlciIsImZyb21WZXJzaW9uIiwidG9WZXJzaW9uIiwiRGJQcmltYXJ5Q2xpZW50IiwiY3JlYXRlUHJpbWFyeUNsaWVudFN0b3JlIiwiYXV0b0luY3JlbWVudCIsInVzZXJNdXRhdGlvbnNLZXlQYXRoIiwidW5pcXVlIiwiY3JlYXRlTXV0YXRpb25RdWV1ZSIsImNyZWF0ZVF1ZXJ5Q2FjaGUiLCJjcmVhdGVSZW1vdGVEb2N1bWVudENhY2hlIiwiZGVsZXRlT2JqZWN0U3RvcmUiLCJkcm9wUXVlcnlDYWNoZSIsImdsb2JhbFN0b3JlIiwid3JpdGVFbXB0eVRhcmdldEdsb2JhbEVudHJ5IiwiZXhpc3RpbmdNdXRhdGlvbnMiLCJ2M011dGF0aW9uc1N0b3JlIiwid3JpdGVBbGwiLCJ1cGdyYWRlTXV0YXRpb25CYXRjaFNjaGVtYUFuZE1pZ3JhdGVEYXRhIiwiRGJDbGllbnRNZXRhZGF0YSIsImNyZWF0ZUNsaWVudE1ldGFkYXRhU3RvcmUiLCJyZW1vdmVBY2tub3dsZWRnZWRNdXRhdGlvbnMiLCJjcmVhdGVEb2N1bWVudEdsb2JhbFN0b3JlIiwiYWRkRG9jdW1lbnRHbG9iYWwiLCJlbnN1cmVTZXF1ZW5jZU51bWJlcnMiLCJjcmVhdGVDb2xsZWN0aW9uUGFyZW50SW5kZXgiLCJkcm9wUmVtb3RlRG9jdW1lbnRDaGFuZ2VzU3RvcmUiLCJyZW1vdGVEb2N1bWVudFN0b3JlIiwicmVhZFRpbWVJbmRleFBhdGgiLCJjb2xsZWN0aW9uUmVhZFRpbWVJbmRleFBhdGgiLCJjcmVhdGVSZW1vdGVEb2N1bWVudFJlYWRUaW1lSW5kZXgiLCJieXRlQ291bnQiLCJxdWV1ZXNTdG9yZSIsInF1ZXVlcyIsInF1ZXVlIiwibGFzdEFja25vd2xlZGdlZEJhdGNoSWQiLCJjdXJyZW50U2VxdWVuY2VOdW1iZXIiLCJkb2NTZW50aW5lbEtleSIsInNlbnRpbmVsS2V5IiwibWF5YmVTZW50aW5lbCIsIndyaXRlU2VudGluZWxLZXkiLCJEYkNvbGxlY3Rpb25QYXJlbnQiLCJjb2xsZWN0aW9uUGFyZW50c1N0b3JlIiwiY2FjaGUiLCJwYXRoU2VnbWVudHMiLCJEYlRpbWVzdGFtcCIsIm93bmVySWQiLCJhbGxvd1RhYlN5bmNocm9uaXphdGlvbiIsImxlYXNlVGltZXN0YW1wTXMiLCJsb2NhbFdyaXRlVGltZU1zIiwiRGJOb0RvY3VtZW50IiwiRGJVbmtub3duRG9jdW1lbnQiLCJyZXN1bWVUb2tlbiIsImxhc3RMaXN0ZW5TZXF1ZW5jZU51bWJlciIsImxhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24iLCJxdWVyeVRhcmdldHNLZXlQYXRoIiwiZG9jdW1lbnRUYXJnZXRzS2V5UGF0aCIsImNsaWVudElkIiwidXBkYXRlVGltZU1zIiwibmV0d29ya0VuYWJsZWQiLCJpbkZvcmVncm91bmQiLCJUYXJnZXRQdXJwb3NlIiwiVjNfU1RPUkVTIiwiVjRfU1RPUkVTIiwiVjZfU1RPUkVTIiwiQUxMX1NUT1JFUyIsIkluZGV4ZWREYkluZGV4TWFuYWdlciIsImNvbGxlY3Rpb25QYXJlbnRzQ2FjaGUiLCJjb2xsZWN0aW9uUGFyZW50IiwicGFyZW50UGF0aHMiLCJlbnRyeSIsIlRhcmdldERhdGEiLCJwdXJwb3NlIiwic25hcHNob3RWZXJzaW9uIiwid2l0aFNlcXVlbmNlTnVtYmVyIiwid2l0aFJlc3VtZVRva2VuIiwid2l0aExhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24iLCJMb2NhbFNlcmlhbGl6ZXIiLCJyZW1vdGVTZXJpYWxpemVyIiwicmVtb3RlRG9jIiwiZnJvbURvY3VtZW50IiwiZnJvbURiVGltZXN0YW1wIiwiZGJSZWFkVGltZSIsInRvRG9jdW1lbnQiLCJyZWFkVGltZV8xIiwidG9EYlRpbWVzdGFtcCIsInJlYWRUaW1lXzIiLCJkYlRpbWVzdGFtcEtleSIsImRiVGltZXN0YW1wIiwic2VyaWFsaXplZEJhc2VNdXRhdGlvbnMiLCJ0b011dGF0aW9uIiwic2VyaWFsaXplZE11dGF0aW9ucyIsImZyb21NdXRhdGlvbiIsInRvRGJSZXNvdXJjZVBhdGhzIiwiZW5jb2RlZEtleXMiLCJmcm9tRGJSZXNvdXJjZVBhdGhzIiwiZW5jb2RlZFBhdGhzIiwiZW5jb2RlZFBhdGhzXzEiLCJkYlRhcmdldCIsImRvY3VtZW50cyIsImZyb21Eb2N1bWVudHNUYXJnZXQiLCJmcm9tUXVlcnlUYXJnZXQiLCJMaXN0ZW4iLCJxdWVyeVByb3RvIiwiZGJMYXN0TGltYm9GcmVlVGltZXN0YW1wIiwidG9Eb2N1bWVudHNUYXJnZXQiLCJ0b1F1ZXJ5VGFyZ2V0IiwiYnVmZmVyRW50cnlDb21wYXJhdG9yIiwiYVNlcXVlbmNlIiwiYUluZGV4IiwiYlNlcXVlbmNlIiwiYkluZGV4Iiwic2VxQ21wIiwiUm9sbGluZ1NlcXVlbmNlTnVtYmVyQnVmZmVyIiwibWF4RWxlbWVudHMiLCJwcmV2aW91c0luZGV4IiwibmV4dEluZGV4IiwiYWRkRWxlbWVudCIsImhpZ2hlc3RWYWx1ZSIsIkdDX0RJRF9OT1RfUlVOIiwiZGlkUnVuIiwic2VxdWVuY2VOdW1iZXJzQ29sbGVjdGVkIiwidGFyZ2V0c1JlbW92ZWQiLCJkb2N1bWVudHNSZW1vdmVkIiwiTHJ1UGFyYW1zIiwiY2FjaGVTaXplQ29sbGVjdGlvblRocmVzaG9sZCIsInBlcmNlbnRpbGVUb0NvbGxlY3QiLCJtYXhpbXVtU2VxdWVuY2VOdW1iZXJzVG9Db2xsZWN0Iiwid2l0aENhY2hlU2l6ZSIsImNhY2hlU2l6ZSIsIkRFRkFVTFRfQ09MTEVDVElPTl9QRVJDRU5USUxFIiwiREVGQVVMVF9NQVhfU0VRVUVOQ0VfTlVNQkVSU19UT19DT0xMRUNUIiwiQ09MTEVDVElPTl9ESVNBQkxFRCIsIk1JTklNVU1fQ0FDSEVfU0laRV9CWVRFUyIsIkRFRkFVTFRfQ0FDSEVfU0laRV9CWVRFUyIsIkRFRkFVTFQiLCJESVNBQkxFRCIsIkxydVNjaGVkdWxlciIsImdhcmJhZ2VDb2xsZWN0b3IiLCJsb2NhbFN0b3JlIiwiaGFzUnVuIiwiZ2NUYXNrIiwic2NoZWR1bGVHQyIsInN0b3AiLCJkZWxheSIsIkxydUdhcmJhZ2VDb2xsZWN0aW9uIiwiY29sbGVjdEdhcmJhZ2UiLCJpZ25vcmVJZlByaW1hcnlMZWFzZUxvc3MiLCJMcnVHYXJiYWdlQ29sbGVjdG9yIiwiZGVsZWdhdGUiLCJjYWxjdWxhdGVUYXJnZXRDb3VudCIsInBlcmNlbnRpbGUiLCJnZXRTZXF1ZW5jZU51bWJlckNvdW50IiwibnRoU2VxdWVuY2VOdW1iZXIiLCJmb3JFYWNoT3JwaGFuZWREb2N1bWVudFNlcXVlbmNlTnVtYmVyIiwibWF4VmFsdWUiLCJyZW1vdmVPcnBoYW5lZERvY3VtZW50cyIsImNvbGxlY3QiLCJnZXRDYWNoZVNpemUiLCJydW5HYXJiYWdlQ29sbGVjdGlvbiIsInVwcGVyQm91bmRTZXF1ZW5jZU51bWJlciIsInNlcXVlbmNlTnVtYmVyc1RvQ29sbGVjdCIsImNvdW50ZWRUYXJnZXRzVHMiLCJmb3VuZFVwcGVyQm91bmRUcyIsInJlbW92ZWRUYXJnZXRzVHMiLCJyZW1vdmVkRG9jdW1lbnRzVHMiLCJzdGFydFRzIiwic2VxdWVuY2VOdW1iZXJzIiwibnVtVGFyZ2V0c1JlbW92ZWQiLCJQZXJzaXN0ZW5jZVRyYW5zYWN0aW9uIiwib25Db21taXR0ZWRMaXN0ZW5lcnMiLCJsaXN0ZW5lciIsInJhaXNlT25Db21taXR0ZWRFdmVudCIsIkxPR19UQUckMSIsIlBSSU1BUllfTEVBU0VfTE9TVF9FUlJPUl9NU0ciLCJQUklNQVJZX0xFQVNFX0VYQ0xVU0lWRV9FUlJPUl9NU0ciLCJJbmRleGVkRGJUcmFuc2FjdGlvbiIsImxydVBhcmFtcyIsIl9zdGFydGVkIiwiaXNQcmltYXJ5Iiwid2luZG93VW5sb2FkSGFuZGxlciIsImRvY3VtZW50VmlzaWJpbGl0eUhhbmRsZXIiLCJjbGllbnRNZXRhZGF0YVJlZnJlc2hlciIsImxhc3RHYXJiYWdlQ29sbGVjdGlvblRpbWUiLCJwcmltYXJ5U3RhdGVMaXN0ZW5lciIsIkluZGV4ZWREYkxydURlbGVnYXRlIiwiZGJOYW1lIiwiTUFJTl9EQVRBQkFTRSIsInRhcmdldENhY2hlIiwicmVtb3RlRG9jdW1lbnRDYWNoZSIsImxvY2FsU3RvcmFnZSIsIndlYlN0b3JhZ2UiLCJjcmVhdGVJbmRleGVkRGJQZXJzaXN0ZW5jZSIsInBlcnNpc3RlbmNlIiwic3RhcnRlZCIsInNpbXBsZURiIiwidXBkYXRlQ2xpZW50TWV0YWRhdGFBbmRUcnlCZWNvbWVQcmltYXJ5IiwiYXR0YWNoVmlzaWJpbGl0eUhhbmRsZXIiLCJhdHRhY2hXaW5kb3dVbmxvYWRIb29rIiwic2NoZWR1bGVDbGllbnRNZXRhZGF0YUFuZFByaW1hcnlMZWFzZVJlZnJlc2hlcyIsImxpc3RlblNlcXVlbmNlIiwic2V0UHJpbWFyeVN0YXRlTGlzdGVuZXIiLCJwcmltYXJ5U3RhdGUiLCJzZXREYXRhYmFzZURlbGV0ZWRMaXN0ZW5lciIsImRhdGFiYXNlRGVsZXRlZExpc3RlbmVyIiwibmV3VmVyc2lvbiIsInNldE5ldHdvcmtFbmFibGVkIiwiY2xpZW50TWV0YWRhdGFTdG9yZSIsInZlcmlmeVByaW1hcnlMZWFzZSIsInN1Y2Nlc3MiLCJjYW5BY3RBc1ByaW1hcnkiLCJyZWxlYXNlUHJpbWFyeUxlYXNlSWZIZWxkIiwiYWNxdWlyZU9yRXh0ZW5kUHJpbWFyeUxlYXNlIiwicHJpbWFyeUNsaWVudFN0b3JlIiwicHJpbWFyeUNsaWVudCIsImlzTG9jYWxDbGllbnQiLCJyZW1vdmVDbGllbnRNZXRhZGF0YSIsIm1heWJlR2FyYmFnZUNvbGxlY3RNdWx0aUNsaWVudFN0YXRlIiwiaXNXaXRoaW5BZ2UiLCJtZXRhZGF0YVN0b3JlIiwiZXhpc3RpbmdDbGllbnRzIiwiYWN0aXZlIiwiZmlsdGVyQWN0aXZlQ2xpZW50cyIsImluYWN0aXZlIiwiY2xpZW50IiwiaW5hY3RpdmVDbGllbnQiLCJyZW1vdmVJdGVtIiwiem9tYmllZENsaWVudExvY2FsU3RvcmFnZUtleSIsIkNsaWVudE1ldGFkYXRhUmVmcmVzaCIsImN1cnJlbnRQcmltYXJ5IiwiaXNDbGllbnRab21iaWVkIiwiZmluZCIsIm90aGVyQ2xpZW50Iiwib3RoZXJDbGllbnRIYXNCZXR0ZXJOZXR3b3JrU3RhdGUiLCJvdGhlckNsaWVudEhhc0JldHRlclZpc2liaWxpdHkiLCJvdGhlckNsaWVudEhhc1NhbWVOZXR3b3JrU3RhdGUiLCJzaHV0ZG93biIsIm1hcmtDbGllbnRab21iaWVkIiwiZGV0YWNoVmlzaWJpbGl0eUhhbmRsZXIiLCJkZXRhY2hXaW5kb3dVbmxvYWRIb29rIiwicmVtb3ZlQ2xpZW50Wm9tYmllZEVudHJ5IiwiY2xpZW50cyIsImFjdGl2aXR5VGhyZXNob2xkTXMiLCJnZXRBY3RpdmVDbGllbnRzIiwiY2xpZW50TWV0YWRhdGEiLCJjbGVhclBlcnNpc3RlbmNlIiwiZ2V0TXV0YXRpb25RdWV1ZSIsImdldFRhcmdldENhY2hlIiwiZ2V0UmVtb3RlRG9jdW1lbnRDYWNoZSIsImdldEluZGV4TWFuYWdlciIsInRyYW5zYWN0aW9uT3BlcmF0aW9uIiwicGVyc2lzdGVuY2VUcmFuc2FjdGlvbiIsInNpbXBsZURiTW9kZSIsInNpbXBsZURiVHhuIiwiaG9sZHNQcmltYXJ5TGVhc2UiLCJ2ZXJpZnlBbGxvd1RhYlN5bmNocm9uaXphdGlvbiIsIm5ld1ByaW1hcnkiLCJidWlsZFN0b3JhZ2VQcmVmaXgiLCJkYXRhYmFzZUluZm8iLCJpc0RlZmF1bHREYXRhYmFzZSIsIm1heEFnZU1zIiwiYWRkRXZlbnRMaXN0ZW5lciIsInZpc2liaWxpdHlTdGF0ZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJpc1pvbWJpZWQiLCJnZXRJdGVtIiwic2V0SXRlbSIsIlpPTUJJRURfQ0xJRU5UU19LRVlfUFJFRklYIiwiaXNQcmltYXJ5TGVhc2VMb3N0RXJyb3IiLCJpbk1lbW9yeVBpbnMiLCJkb2NDb3VudFByb21pc2UiLCJvcnBoYW5lZERvY21lbnRDb3VudCIsImRvY0NvdW50Iiwib3JwaGFuZWRDb3VudCIsImZvckVhY2hPcnBoYW5lZERvY3VtZW50Iiwic2V0SW5NZW1vcnlQaW5zIiwiaXNQaW5uZWQiLCJtdXRhdGlvblF1ZXVlc0NvbnRhaW5LZXkiLCJjaGFuZ2VCdWZmZXIiLCJkb2N1bWVudENvdW50IiwicmVtb3ZlVGFyZ2V0IiwidXBkYXRlTGltYm9Eb2N1bWVudCIsIm5leHRQYXRoIiwibmV4dFRvUmVwb3J0Iiwic2VudGluZWxSb3ciLCJOdW1iZXJBc0FueSIsIk1JTl9TQUZFX0lOVEVHRVIiLCJNQVhfU0FGRV9JTlRFR0VSIiwiaXNJbnRlZ2VyIiwiaXNGaW5pdGUiLCJpc051bGxPclVuZGVmaW5lZCIsImlzU2FmZUludGVnZXIiLCJMaW1pdFR5cGUiLCJUYXJnZXQiLCJjb2xsZWN0aW9uR3JvdXAiLCJvcmRlckJ5IiwiZmlsdGVycyIsInN0YXJ0QXQiLCJlbmRBdCIsIm1lbW9pemVkQ2Fub25pY2FsSWQiLCJRdWVyeSIsImV4cGxpY2l0T3JkZXJCeSIsImxpbWl0VHlwZSIsIkZpcnN0IiwibWVtb2l6ZWRPcmRlckJ5IiwibWVtb2l6ZWRUYXJnZXQiLCJhc3NlcnRWYWxpZEJvdW5kIiwiYXRQYXRoIiwiaW5lcXVhbGl0eUZpZWxkIiwiZ2V0SW5lcXVhbGl0eUZpbHRlckZpZWxkIiwiZmlyc3RPcmRlckJ5RmllbGQiLCJnZXRGaXJzdE9yZGVyQnlGaWVsZCIsIktFWV9PUkRFUklOR19BU0MiLCJPcmRlckJ5IiwiZm91bmRLZXlPcmRlcmluZyIsImxhc3REaXJlY3Rpb24iLCJkaXIiLCJEaXJlY3Rpb24iLCJBU0NFTkRJTkciLCJLRVlfT1JERVJJTkdfREVTQyIsImFkZEZpbHRlciIsIkZpZWxkRmlsdGVyIiwiaXNJbmVxdWFsaXR5IiwibmV3RmlsdGVycyIsImFkZE9yZGVyQnkiLCJuZXdPcmRlckJ5Iiwid2l0aExpbWl0VG9GaXJzdCIsIndpdGhMaW1pdFRvTGFzdCIsIkxhc3QiLCJ3aXRoU3RhcnRBdCIsIndpdGhFbmRBdCIsImFzQ29sbGVjdGlvblF1ZXJ5QXRQYXRoIiwibWF0Y2hlc0FsbERvY3VtZW50cyIsInRvVGFyZ2V0IiwiZG9jQ29tcGFyYXRvciIsImNvbXBhcmVkT25LZXlGaWVsZCIsImNvbXAiLCJjb21wYXJlIiwibWF0Y2hlc1BhdGhBbmRDb2xsZWN0aW9uR3JvdXAiLCJtYXRjaGVzT3JkZXJCeSIsIm1hdGNoZXNGaWx0ZXJzIiwibWF0Y2hlc0JvdW5kcyIsImhhc0xpbWl0VG9GaXJzdCIsImhhc0xpbWl0VG9MYXN0IiwiZmluZEZpbHRlck9wZXJhdG9yIiwib3BlcmF0b3JzIiwib3JkZXJCeXMiLCJERVNDRU5ESU5HIiwiQm91bmQiLCJiZWZvcmUiLCJkb2NQYXRoIiwic29ydHNCZWZvcmVEb2N1bWVudCIsIkZpbHRlciIsIk9wZXJhdG9yIiwiTEVTU19USEFOIiwiTEVTU19USEFOX09SX0VRVUFMIiwiRVFVQUwiLCJHUkVBVEVSX1RIQU5fT1JfRVFVQUwiLCJHUkVBVEVSX1RIQU4iLCJBUlJBWV9DT05UQUlOUyIsIklOIiwiQVJSQVlfQ09OVEFJTlNfQU5ZIiwiZXZlcnkiLCJLZXlGaWVsZEluRmlsdGVyIiwiS2V5RmllbGRGaWx0ZXIiLCJBcnJheUNvbnRhaW5zRmlsdGVyIiwiSW5GaWx0ZXIiLCJBcnJheUNvbnRhaW5zQW55RmlsdGVyIiwibWF0Y2hlc0NvbXBhcmlzb24iLCJjb21wYXJpc29uIiwicmVmVmFsdWUiLCJhcnJheVZhbHVlIiwibGhzRWxlbSIsIm9yZGVyQnlDb21wb25lbnQiLCJkb2NWYWx1ZSIsInRoaXNQb3NpdGlvbiIsIm90aGVyUG9zaXRpb24iLCJpc0tleU9yZGVyQnkiLCJJbmRleEZyZWVRdWVyeUVuZ2luZSIsInNldExvY2FsRG9jdW1lbnRzVmlldyIsImxvY2FsRG9jdW1lbnRzIiwibG9jYWxEb2N1bWVudHNWaWV3IiwicmVtb3RlS2V5cyIsImV4ZWN1dGVGdWxsQ29sbGVjdGlvblNjYW4iLCJnZXREb2N1bWVudHMiLCJwcmV2aW91c1Jlc3VsdHMiLCJhcHBseVF1ZXJ5IiwibmVlZHNSZWZpbGwiLCJ1cGRhdGVkUmVzdWx0cyIsInF1ZXJ5UmVzdWx0cyIsInNvcnRlZFByZXZpb3VzUmVzdWx0cyIsImxpbWJvRnJlZVNuYXBzaG90VmVyc2lvbiIsImRvY0F0TGltaXRFZGdlIiwiaGFzUGVuZGluZ1dyaXRlcyIsIkxvY2FsRG9jdW1lbnRzVmlldyIsIm11dGF0aW9uUXVldWUiLCJnZXREb2N1bWVudCIsImJhdGNoZXMiLCJnZXREb2N1bWVudEludGVybmFsIiwiaW5CYXRjaGVzIiwiaW5CYXRjaGVzXzEiLCJhcHBseUxvY2FsTXV0YXRpb25zVG9Eb2N1bWVudHMiLCJkb2NzIiwibG9jYWxWaWV3IiwiYmF0Y2hlc18xIiwiZ2V0TG9jYWxWaWV3T2ZEb2N1bWVudHMiLCJiYXNlRG9jcyIsImdldERvY3VtZW50c01hdGNoaW5nRG9jdW1lbnRRdWVyeSIsImdldERvY3VtZW50c01hdGNoaW5nQ29sbGVjdGlvbkdyb3VwUXVlcnkiLCJnZXREb2N1bWVudHNNYXRjaGluZ0NvbGxlY3Rpb25RdWVyeSIsInBhcmVudHMiLCJjb2xsZWN0aW9uUXVlcnkiLCJtdXRhdGlvbkJhdGNoZXMiLCJtYXRjaGluZ011dGF0aW9uQmF0Y2hlcyIsImFkZE1pc3NpbmdCYXNlRG9jdW1lbnRzIiwibWVyZ2VkRG9jdW1lbnRzIiwibXV0YXRpb25CYXRjaGVzXzEiLCJtdXRhdGVkRG9jIiwiZXhpc3RpbmdEb2N1bWVudHMiLCJtaXNzaW5nQmFzZURvY0VudHJpZXNGb3JQYXRjaGluZyIsIm1hdGNoaW5nTXV0YXRpb25CYXRjaGVzXzEiLCJtaXNzaW5nQmFzZURvY3MiLCJSZWZlcmVuY2VTZXQiLCJyZWZzQnlLZXkiLCJEb2NSZWZlcmVuY2UiLCJyZWZzQnlUYXJnZXQiLCJjb21wYXJlQnlUYXJnZXRJZCIsInJlZiIsImFkZFJlZmVyZW5jZXMiLCJyZW1vdmVSZWYiLCJyZW1vdmVSZWZlcmVuY2VzIiwicmVtb3ZlUmVmZXJlbmNlc0ZvcklkIiwiZW1wdHlLZXkiLCJzdGFydFJlZiIsImVuZFJlZiIsInJlbW92ZUFsbFJlZmVyZW5jZXMiLCJyZWZlcmVuY2VzRm9ySWQiLCJmaXJzdFJlZiIsInRhcmdldE9yQmF0Y2hJZCIsIkxvY2FsU3RvcmUiLCJxdWVyeUVuZ2luZSIsImluaXRpYWxVc2VyIiwibG9jYWxWaWV3UmVmZXJlbmNlcyIsInRhcmdldERhdGFCeVRhcmdldCIsInRhcmdldElkQnlUYXJnZXQiLCJsYXN0RG9jdW1lbnRDaGFuZ2VSZWFkVGltZSIsInJlbW90ZURvY3VtZW50cyIsInN5bmNocm9uaXplTGFzdERvY3VtZW50Q2hhbmdlUmVhZFRpbWUiLCJoYW5kbGVVc2VyQ2hhbmdlIiwibmV3TXV0YXRpb25RdWV1ZSIsIm5ld0xvY2FsRG9jdW1lbnRzIiwib2xkQmF0Y2hlcyIsInByb21pc2VkT2xkQmF0Y2hlcyIsIm5ld0JhdGNoZXMiLCJyZW1vdmVkQmF0Y2hJZHMiLCJhZGRlZEJhdGNoSWRzIiwiY2hhbmdlZEtleXMiLCJvbGRCYXRjaGVzXzEiLCJuZXdCYXRjaGVzXzEiLCJfZSIsImFmZmVjdGVkRG9jdW1lbnRzIiwibG9jYWxXcml0ZSIsImV4aXN0aW5nRG9jcyIsImJhc2VWYWx1ZSIsImxvb2t1cE11dGF0aW9uRG9jdW1lbnRzIiwiYWZmZWN0ZWQiLCJkb2N1bWVudEJ1ZmZlciIsImFwcGx5V3JpdGVUb1JlbW90ZURvY3VtZW50cyIsInJlamVjdEJhdGNoIiwiYWZmZWN0ZWRLZXlzIiwiYXBwbHlSZW1vdGVFdmVudCIsInJlbW90ZUV2ZW50IiwicmVtb3RlVmVyc2lvbiIsIm5ld1RhcmdldERhdGFCeVRhcmdldE1hcCIsInRhcmdldENoYW5nZXMiLCJjaGFuZ2UiLCJvbGRUYXJnZXREYXRhIiwiYWRkZWREb2N1bWVudHMiLCJuZXdUYXJnZXREYXRhIiwic2hvdWxkUGVyc2lzdFRhcmdldERhdGEiLCJ1cGRhdGVkS2V5cyIsImRvY3VtZW50VXBkYXRlcyIsImV4aXN0aW5nRG9jIiwicmVzb2x2ZWRMaW1ib0RvY3VtZW50cyIsInVwZGF0ZVJlbW90ZVZlcnNpb24iLCJSRVNVTUVfVE9LRU5fTUFYX0FHRV9NSUNST1MiLCJtb2RpZmllZERvY3VtZW50cyIsIm5vdGlmeUxvY2FsVmlld0NoYW5nZXMiLCJ2aWV3Q2hhbmdlcyIsInZpZXdDaGFuZ2VzXzEiLCJ2aWV3Q2hhbmdlIiwiYWRkZWRLZXlzIiwicmVtb3ZlZEtleXMiLCJmcm9tQ2FjaGUiLCJ1cGRhdGVkVGFyZ2V0RGF0YSIsIm5leHRNdXRhdGlvbkJhdGNoIiwiYWZ0ZXJCYXRjaElkIiwicmVhZERvY3VtZW50IiwiYWxsb2NhdGVUYXJnZXQiLCJjYWNoZWQiLCJyZWxlYXNlVGFyZ2V0Iiwia2VlcFBlcnNpc3RlZFRhcmdldERhdGEiLCJyZW1vdmVkIiwiZXhlY3V0ZVF1ZXJ5IiwidXNlUHJldmlvdXNSZXN1bHRzIiwicmVtb3RlRG9jdW1lbnRLZXlzIiwicmVtb3ZlQ2FjaGVkTXV0YXRpb25CYXRjaE1ldGFkYXRhIiwiZG9jS2V5cyIsInByb21pc2VDaGFpbiIsImFja1ZlcnNpb24iLCJjYWNoZWRUYXJnZXREYXRhIiwicmVtb3RlRG9jdW1lbnRDYWNoZV8xIiwiTWVtb3J5TXV0YXRpb25RdWV1ZSIsImJhdGNoZXNCeURvY3VtZW50S2V5IiwiYmF0Y2hJbmRleCIsImluZGV4T2ZFeGlzdGluZ0JhdGNoSWQiLCJmaW5kTXV0YXRpb25CYXRjaCIsIm11dGF0aW9uQmF0Y2giLCJyYXdJbmRleCIsImluZGV4T2ZCYXRjaElkIiwiZmluZE11dGF0aW9uQmF0Y2hlcyIsInByZWZpeCIsInN0YXJ0UGF0aCIsInJvd0tleVBhdGgiLCJQZXJzaXN0ZW50U3RyZWFtU3RhdGUiLCJNZW1vcnlSZW1vdGVEb2N1bWVudENhY2hlIiwic2l6ZXIiLCJjdXJyZW50U2l6ZSIsImZvckVhY2hEb2N1bWVudEtleSIsIk1lbW9yeVRhcmdldENhY2hlIiwidGFyZ2V0cyIsImhpZ2hlc3RTZXF1ZW5jZU51bWJlciIsIm5leHRUYXJnZXRJZCIsInJlbW92YWxzIiwibWF0Y2hpbmdLZXlzIiwiTWVtb3J5UGVyc2lzdGVuY2UiLCJyZWZlcmVuY2VEZWxlZ2F0ZUZhY3RvcnkiLCJtdXRhdGlvblF1ZXVlcyIsImRvY3VtZW50U2l6ZSIsImNyZWF0ZUxydVBlcnNpc3RlbmNlIiwiTWVtb3J5THJ1RGVsZWdhdGUiLCJjcmVhdGVFYWdlclBlcnNpc3RlbmNlIiwiTWVtb3J5RWFnZXJEZWxlZ2F0ZSIsInRvS2V5IiwiTWVtb3J5VHJhbnNhY3Rpb24iLCJvblRyYW5zYWN0aW9uU3RhcnRlZCIsIm9uVHJhbnNhY3Rpb25Db21taXR0ZWQiLCJ2cyIsIl9vcnBoYW5lZERvY3VtZW50cyIsIm9ycGhhbmVkRG9jdW1lbnRzIiwiaXNSZWZlcmVuY2VkIiwib3JwaGFuZWRTZXF1ZW5jZU51bWJlcnMiLCJvcnBoYW5lZERvY3VtZW50Q291bnQiLCJyZW1vdGVEb2N1bWVudCIsIm9ycGhhbmVkQXQiLCJERUZBVUxUX0JBQ0tPRkZfSU5JVElBTF9ERUxBWV9NUyIsIkRFRkFVTFRfQkFDS09GRl9GQUNUT1IiLCJERUZBVUxUX0JBQ0tPRkZfTUFYX0RFTEFZX01TIiwiRXhwb25lbnRpYWxCYWNrb2ZmIiwiaW5pdGlhbERlbGF5TXMiLCJiYWNrb2ZmRmFjdG9yIiwibWF4RGVsYXlNcyIsImN1cnJlbnRCYXNlTXMiLCJ0aW1lclByb21pc2UiLCJsYXN0QXR0ZW1wdFRpbWUiLCJyZXNldFRvTWF4IiwiYmFja29mZkFuZFJ1biIsImRlc2lyZWREZWxheVdpdGhKaXR0ZXJNcyIsImppdHRlckRlbGF5TXMiLCJkZWxheVNvRmFyTXMiLCJyZW1haW5pbmdEZWxheU1zIiwiT25saW5lU3RhdGUiLCJPbmxpbmVTdGF0ZVNvdXJjZSIsIlBlcnNpc3RlbnRTdHJlYW0iLCJjb25uZWN0aW9uVGltZXJJZCIsImlkbGVUaW1lcklkIiwiY29ubmVjdGlvbiIsImNyZWRlbnRpYWxzUHJvdmlkZXIiLCJzdGF0ZSIsIkluaXRpYWwiLCJjbG9zZUNvdW50IiwiaWRsZVRpbWVyIiwic3RyZWFtIiwiYmFja29mZiIsImlzU3RhcnRlZCIsIlN0YXJ0aW5nIiwiT3BlbiIsIkJhY2tvZmYiLCJpc09wZW4iLCJhdXRoIiwicGVyZm9ybUJhY2tvZmYiLCJpbmhpYml0QmFja29mZiIsIm1hcmtJZGxlIiwiaGFuZGxlSWRsZUNsb3NlVGltZXIiLCJzZW5kUmVxdWVzdCIsImNhbmNlbElkbGVDaGVjayIsInNlbmQiLCJmaW5hbFN0YXRlIiwiaW52YWxpZGF0ZVRva2VuIiwidGVhckRvd24iLCJvbkNsb3NlIiwiZGlzcGF0Y2hJZk5vdENsb3NlZCIsImdldENsb3NlR3VhcmRlZERpc3BhdGNoZXIiLCJnZXRUb2tlbiIsInN0YXJ0U3RyZWFtIiwicnBjRXJyb3IiLCJoYW5kbGVTdHJlYW1DbG9zZSIsInN0YXJ0UnBjIiwib25PcGVuIiwib25NZXNzYWdlIiwic3RhcnRDbG9zZUNvdW50IiwiUGVyc2lzdGVudExpc3RlblN0cmVhbSIsImNyZWRlbnRpYWxzIiwiTGlzdGVuU3RyZWFtQ29ubmVjdGlvbkJhY2tvZmYiLCJMaXN0ZW5TdHJlYW1JZGxlIiwib3BlblN0cmVhbSIsIndhdGNoQ2hhbmdlUHJvdG8iLCJ3YXRjaENoYW5nZSIsImZyb21XYXRjaENoYW5nZSIsInNuYXBzaG90IiwidmVyc2lvbkZyb21MaXN0ZW5SZXNwb25zZSIsIm9uV2F0Y2hDaGFuZ2UiLCJ3YXRjaCIsImVuY29kZWREYXRhYmFzZUlkIiwiYWRkVGFyZ2V0IiwibGFiZWxzIiwidG9MaXN0ZW5SZXF1ZXN0TGFiZWxzIiwidW53YXRjaCIsIlBlcnNpc3RlbnRXcml0ZVN0cmVhbSIsIldyaXRlU3RyZWFtQ29ubmVjdGlvbkJhY2tvZmYiLCJXcml0ZVN0cmVhbUlkbGUiLCJoYW5kc2hha2VDb21wbGV0ZV8iLCJ3cml0ZU11dGF0aW9ucyIsInJlc3BvbnNlUHJvdG8iLCJmcm9tV3JpdGVSZXN1bHRzIiwid3JpdGVSZXN1bHRzIiwiY29tbWl0VGltZSIsIm9uTXV0YXRpb25SZXN1bHQiLCJvbkhhbmRzaGFrZUNvbXBsZXRlIiwid3JpdGVIYW5kc2hha2UiLCJ3cml0ZXMiLCJEYXRhc3RvcmUiLCJuZXdQZXJzaXN0ZW50V3JpdGVTdHJlYW0iLCJuZXdQZXJzaXN0ZW50V2F0Y2hTdHJlYW0iLCJjb21taXQiLCJpbnZva2VSUEMiLCJyZXNwb25zZSIsImxvb2t1cCIsInRvTmFtZSIsImludm9rZVN0cmVhbWluZ1JQQyIsImZyb21NYXliZURvY3VtZW50IiwicnBjTmFtZSIsImRhdGFzdG9yZSIsInJlYWRWZXJzaW9ucyIsImNvbW1pdHRlZCIsImxhc3RXcml0ZUVycm9yIiwid3JpdHRlbkRvY3MiLCJlbnN1cmVDb21taXROb3RDYWxsZWQiLCJyZWNvcmRWZXJzaW9uIiwid3JpdGUiLCJ0b011dGF0aW9ucyIsInByZWNvbmRpdGlvbkZvclVwZGF0ZSIsInVud3JpdHRlbiIsImRvY1ZlcnNpb24iLCJleGlzdGluZ1ZlcnNpb24iLCJScGNDb2RlIiwiT25saW5lU3RhdGVUcmFja2VyIiwib25saW5lU3RhdGVIYW5kbGVyIiwiVW5rbm93biIsIndhdGNoU3RyZWFtRmFpbHVyZXMiLCJvbmxpbmVTdGF0ZVRpbWVyIiwic2hvdWxkV2FybkNsaWVudElzT2ZmbGluZSIsImhhbmRsZVdhdGNoU3RyZWFtU3RhcnQiLCJzZXRBbmRCcm9hZGNhc3QiLCJPbmxpbmVTdGF0ZVRpbWVvdXQiLCJsb2dDbGllbnRPZmZsaW5lV2FybmluZ0lmTmVjZXNzYXJ5IiwiT2ZmbGluZSIsImhhbmRsZVdhdGNoU3RyZWFtRmFpbHVyZSIsIk9ubGluZSIsImNsZWFyT25saW5lU3RhdGVUaW1lciIsIm5ld1N0YXRlIiwiZGV0YWlscyIsImlzUGVybWFuZW50RXJyb3IiLCJtYXBDb2RlRnJvbVJwY0NvZGUiLCJtYXBScGNDb2RlRnJvbUNvZGUiLCJDaGFuZ2VUeXBlIiwiU3luY1N0YXRlIiwiRG9jdW1lbnRTZXQiLCJrZXllZE1hcCIsInNvcnRlZFNldCIsImVtcHR5U2V0Iiwib2xkU2V0IiwidGhpc0RvYyIsIm90aGVyRG9jIiwiZG9jU3RyaW5ncyIsIm5ld1NldCIsIldhdGNoVGFyZ2V0Q2hhbmdlU3RhdGUiLCJEb2N1bWVudENoYW5nZVNldCIsImNoYW5nZU1hcCIsInRyYWNrIiwib2xkQ2hhbmdlIiwiQWRkZWQiLCJNZXRhZGF0YSIsIlJlbW92ZWQiLCJNb2RpZmllZCIsImdldENoYW5nZXMiLCJWaWV3U25hcHNob3QiLCJvbGREb2NzIiwiZG9jQ2hhbmdlcyIsIm11dGF0ZWRLZXlzIiwic3luY1N0YXRlQ2hhbmdlZCIsImV4Y2x1ZGVzTWV0YWRhdGFDaGFuZ2VzIiwiZnJvbUluaXRpYWxEb2N1bWVudHMiLCJvdGhlckNoYW5nZXMiLCJSZW1vdGVFdmVudCIsInRhcmdldE1pc21hdGNoZXMiLCJjcmVhdGVTeW50aGVzaXplZFJlbW90ZUV2ZW50Rm9yQ3VycmVudENoYW5nZSIsIlRhcmdldENoYW5nZSIsImNyZWF0ZVN5bnRoZXNpemVkVGFyZ2V0Q2hhbmdlRm9yQ3VycmVudENoYW5nZSIsIkRvY3VtZW50V2F0Y2hDaGFuZ2UiLCJ1cGRhdGVkVGFyZ2V0SWRzIiwicmVtb3ZlZFRhcmdldElkcyIsIm5ld0RvYyIsIkV4aXN0ZW5jZUZpbHRlckNoYW5nZSIsImV4aXN0ZW5jZUZpbHRlciIsIldhdGNoVGFyZ2V0Q2hhbmdlIiwidGFyZ2V0SWRzIiwiY2F1c2UiLCJUYXJnZXRTdGF0ZSIsInBlbmRpbmdSZXNwb25zZXMiLCJkb2N1bWVudENoYW5nZXMiLCJzbmFwc2hvdENoYW5nZXNNYXAiLCJfcmVzdW1lVG9rZW4iLCJfY3VycmVudCIsIl9oYXNQZW5kaW5nQ2hhbmdlcyIsInVwZGF0ZVJlc3VtZVRva2VuIiwidG9UYXJnZXRDaGFuZ2UiLCJjaGFuZ2VUeXBlIiwiY2xlYXJQZW5kaW5nQ2hhbmdlcyIsImFkZERvY3VtZW50Q2hhbmdlIiwicmVtb3ZlRG9jdW1lbnRDaGFuZ2UiLCJyZWNvcmRQZW5kaW5nVGFyZ2V0UmVxdWVzdCIsInJlY29yZFRhcmdldFJlc3BvbnNlIiwibWFya0N1cnJlbnQiLCJXYXRjaENoYW5nZUFnZ3JlZ2F0b3IiLCJtZXRhZGF0YVByb3ZpZGVyIiwidGFyZ2V0U3RhdGVzIiwicGVuZGluZ0RvY3VtZW50VXBkYXRlcyIsInBlbmRpbmdEb2N1bWVudFRhcmdldE1hcHBpbmciLCJkb2N1bWVudFRhcmdldE1hcCIsInBlbmRpbmdUYXJnZXRSZXNldHMiLCJoYW5kbGVEb2N1bWVudENoYW5nZSIsImRvY0NoYW5nZSIsImFkZERvY3VtZW50VG9UYXJnZXQiLCJyZW1vdmVEb2N1bWVudEZyb21UYXJnZXQiLCJoYW5kbGVUYXJnZXRDaGFuZ2UiLCJ0YXJnZXRDaGFuZ2UiLCJ0YXJnZXRTdGF0ZSIsImVuc3VyZVRhcmdldFN0YXRlIiwiTm9DaGFuZ2UiLCJpc0FjdGl2ZVRhcmdldCIsImlzUGVuZGluZyIsIkN1cnJlbnQiLCJSZXNldCIsInJlc2V0VGFyZ2V0IiwiaGFuZGxlRXhpc3RlbmNlRmlsdGVyIiwidGFyZ2V0RGF0YUZvckFjdGl2ZVRhcmdldCIsImdldEN1cnJlbnREb2N1bWVudENvdW50Rm9yVGFyZ2V0IiwiY3JlYXRlUmVtb3RlRXZlbnQiLCJ0YXJnZXRDb250YWluc0RvY3VtZW50IiwiaGFzUGVuZGluZ0NoYW5nZXMiLCJpc09ubHlMaW1ib1RhcmdldCIsIkxpbWJvUmVzb2x1dGlvbiIsImVuc3VyZURvY3VtZW50VGFyZ2V0TWFwcGluZyIsInVwZGF0ZWREb2N1bWVudCIsImdldFJlbW90ZUtleXNGb3JUYXJnZXQiLCJ0YXJnZXRNYXBwaW5nIiwidGFyZ2V0QWN0aXZlIiwiTE9HX1RBRyQ4IiwiUmVtb3RlU3RvcmUiLCJjb25uZWN0aXZpdHlNb25pdG9yIiwid3JpdGVQaXBlbGluZSIsImxpc3RlblRhcmdldHMiLCJ3YXRjaENoYW5nZUFnZ3JlZ2F0b3IiLCJhZGRDYWxsYmFjayIsInN0YXR1cyIsImNhblVzZU5ldHdvcmsiLCJyZXN0YXJ0TmV0d29yayIsIm9ubGluZVN0YXRlVHJhY2tlciIsIndhdGNoU3RyZWFtIiwib25XYXRjaFN0cmVhbU9wZW4iLCJvbldhdGNoU3RyZWFtQ2xvc2UiLCJvbldhdGNoU3RyZWFtQ2hhbmdlIiwid3JpdGVTdHJlYW0iLCJvbldyaXRlU3RyZWFtT3BlbiIsIm9uV3JpdGVTdHJlYW1DbG9zZSIsIm9uV3JpdGVIYW5kc2hha2VDb21wbGV0ZSIsImVuYWJsZU5ldHdvcmsiLCJzaG91bGRTdGFydFdhdGNoU3RyZWFtIiwic3RhcnRXYXRjaFN0cmVhbSIsImZpbGxXcml0ZVBpcGVsaW5lIiwiZGlzYWJsZU5ldHdvcmsiLCJkaXNhYmxlTmV0d29ya0ludGVybmFsIiwiY2xlYW5VcFdhdGNoU3RyZWFtU3RhdGUiLCJsaXN0ZW4iLCJzZW5kV2F0Y2hSZXF1ZXN0IiwidW5saXN0ZW4iLCJzZW5kVW53YXRjaFJlcXVlc3QiLCJzeW5jRW5naW5lIiwiaGFuZGxlVGFyZ2V0RXJyb3IiLCJyYWlzZVdhdGNoU25hcHNob3QiLCJyZXF1ZXN0VGFyZ2V0RGF0YSIsIkV4aXN0ZW5jZUZpbHRlck1pc21hdGNoIiwicmVqZWN0TGlzdGVuIiwibGFzdEJhdGNoSWRSZXRyaWV2ZWQiLCJjYW5BZGRUb1dyaXRlUGlwZWxpbmUiLCJhZGRUb1dyaXRlUGlwZWxpbmUiLCJzaG91bGRTdGFydFdyaXRlU3RyZWFtIiwic3RhcnRXcml0ZVN0cmVhbSIsIm91dHN0YW5kaW5nV3JpdGVzIiwiaGFuZHNoYWtlQ29tcGxldGUiLCJhcHBseVN1Y2Nlc3NmdWxXcml0ZSIsImhhbmRsZVdyaXRlRXJyb3IiLCJoYW5kbGVIYW5kc2hha2VFcnJvciIsInJlamVjdEZhaWxlZFdyaXRlIiwiY3JlYXRlVHJhbnNhY3Rpb24iLCJoYW5kbGVDcmVkZW50aWFsQ2hhbmdlIiwiYXBwbHlQcmltYXJ5U3RhdGUiLCJHZW9Qb2ludCIsImxhdGl0dWRlIiwibG9uZ2l0dWRlIiwiX2xhdCIsIl9sb25nIiwiU2VydmVyVGltZXN0YW1wVHJhbnNmb3JtIiwidHJhbnNmb3JtUmVzdWx0IiwiQXJyYXlVbmlvblRyYW5zZm9ybU9wZXJhdGlvbiIsImVsZW1lbnRzIiwiY29lcmNlZEZpZWxkVmFsdWVzQXJyYXkiLCJ0b1VuaW9uIiwiQXJyYXlSZW1vdmVUcmFuc2Zvcm1PcGVyYXRpb24iLCJfbG9vcF8yIiwidG9SZW1vdmUiLCJOdW1lcmljSW5jcmVtZW50VHJhbnNmb3JtT3BlcmF0aW9uIiwib3BlcmFuZCIsInN1bSIsImRpcnMiLCJFeGlzdGVuY2VGaWx0ZXIiLCJESVJFQ1RJT05TIiwiT1BFUkFUT1JTIiwiSVNPX1JFR19FWFAiLCJSZWdFeHAiLCJhc3NlcnRQcmVzZW50IiwicGFyc2VJbnQ2NCIsIkpzb25Qcm90b1NlcmlhbGl6ZXIiLCJ1c2VQcm90bzNKc29uIiwidW5zYWZlQ2FzdFByb3RvQnl0ZVN0cmluZyIsImJ5dGVTdHJpbmciLCJmcm9tUnBjU3RhdHVzIiwidG9JbnQzMlZhbHVlIiwiZnJvbUludDMyVmFsdWUiLCJuYW5vcyIsImZyb21Jc284NjAxU3RyaW5nIiwidXRjIiwiZnJhY3Rpb24iLCJuYW5vU3RyIiwic3Vic3RyIiwidG9CeXRlcyIsImZyb21CbG9iIiwiYmxvYiIsInRvUmVzb3VyY2VOYW1lIiwiZnVsbHlRdWFsaWZpZWRQcmVmaXhQYXRoIiwiZnJvbVJlc291cmNlTmFtZSIsInJlc291cmNlIiwiaXNWYWxpZFJlc291cmNlTmFtZSIsImZyb21OYW1lIiwiZXh0cmFjdExvY2FsUGF0aEZyb21SZXNvdXJjZU5hbWUiLCJ0b1F1ZXJ5UGF0aCIsImZyb21RdWVyeVBhdGgiLCJyZXNvdXJjZU5hbWUiLCJ0b1ZhbHVlIiwibnVsbFZhbHVlIiwiYm9vbGVhblZhbHVlIiwiaW50ZWdlclZhbHVlIiwiZG91YmxlVmFsdWUiLCJzdHJpbmdWYWx1ZSIsInRvTWFwVmFsdWUiLCJ0b0FycmF5VmFsdWUiLCJ0aW1lc3RhbXBWYWx1ZSIsImdlb1BvaW50VmFsdWUiLCJieXRlc1ZhbHVlIiwicmVmZXJlbmNlVmFsdWUiLCJmcm9tVmFsdWUiLCJmcm9tRmllbGRzIiwiZGJJZCIsInRvTXV0YXRpb25Eb2N1bWVudCIsInRvRmllbGRzIiwiZnJvbUZvdW5kIiwiZnJvbU1pc3NpbmciLCJtaXNzaW5nIiwidG9XYXRjaFRhcmdldENoYW5nZVN0YXRlIiwidG9UZXN0V2F0Y2hDaGFuZ2UiLCJkb2N1bWVudENoYW5nZSIsImRvY3VtZW50RGVsZXRlIiwiZG9jdW1lbnRSZW1vdmUiLCJ0YXJnZXRDaGFuZ2VUeXBlIiwiZnJvbVdhdGNoVGFyZ2V0Q2hhbmdlU3RhdGUiLCJjYXVzZVByb3RvIiwiZW50aXR5Q2hhbmdlIiwiZG9jRGVsZXRlIiwiZG9jUmVtb3ZlIiwidXBkYXRlTWFzayIsInRvRG9jdW1lbnRNYXNrIiwidG9GaWVsZFRyYW5zZm9ybSIsImN1cnJlbnREb2N1bWVudCIsInRvUHJlY29uZGl0aW9uIiwiZnJvbVByZWNvbmRpdGlvbiIsImZyb21Eb2N1bWVudE1hc2siLCJmcm9tRmllbGRUcmFuc2Zvcm0iLCJmcm9tV3JpdGVSZXN1bHQiLCJwcm90b3MiLCJzZXRUb1NlcnZlclZhbHVlIiwiYXBwZW5kTWlzc2luZ0VsZW1lbnRzIiwicmVtb3ZlQWxsRnJvbUFycmF5IiwiaW5jcmVtZW50IiwiZG9jdW1lbnRzVGFyZ2V0Iiwic3RydWN0dXJlZFF1ZXJ5IiwiYWxsRGVzY2VuZGFudHMiLCJ3aGVyZSIsInRvRmlsdGVyIiwidG9PcmRlciIsInRvQ3Vyc29yIiwiZnJvbUNvdW50IiwiZmlsdGVyQnkiLCJmcm9tRmlsdGVyIiwiZnJvbU9yZGVyIiwiZnJvbUN1cnNvciIsInRvTGFiZWwiLCJ0b1VuYXJ5T3JGaWVsZEZpbHRlciIsImNvbXBvc2l0ZUZpbHRlciIsInVuYXJ5RmlsdGVyIiwiZnJvbVVuYXJ5RmlsdGVyIiwiZmllbGRGaWx0ZXIiLCJmcm9tRmllbGRGaWx0ZXIiLCJhY2N1bSIsIm9yZGVyIiwidG9Qcm9wZXJ0eU9yZGVyIiwiZnJvbVByb3BlcnR5T3JkZXIiLCJ0b0RpcmVjdGlvbiIsImZyb21EaXJlY3Rpb24iLCJ0b09wZXJhdG9yTmFtZSIsImZyb21PcGVyYXRvck5hbWUiLCJ0b0ZpZWxkUGF0aFJlZmVyZW5jZSIsImZyb21GaWVsZFBhdGhSZWZlcmVuY2UiLCJmaWVsZFJlZmVyZW5jZSIsIm5hbkZpZWxkIiwibnVsbEZpZWxkIiwiY2Fub25pY2FsRmllbGRzIiwiZmllbGRQYXRocyIsIlF1ZXJ5TGlzdGVuZXJzSW5mbyIsInZpZXdTbmFwIiwibGlzdGVuZXJzIiwiRXZlbnRNYW5hZ2VyIiwicXVlcmllcyIsIm9ubGluZVN0YXRlIiwic25hcHNob3RzSW5TeW5jTGlzdGVuZXJzIiwiZmlyc3RMaXN0ZW4iLCJxdWVyeUluZm8iLCJhcHBseU9ubGluZVN0YXRlQ2hhbmdlIiwib25WaWV3U25hcHNob3QiLCJyYWlzZVNuYXBzaG90c0luU3luY0V2ZW50IiwibGFzdExpc3RlbiIsInZpZXdTbmFwcyIsInJhaXNlZEV2ZW50Iiwidmlld1NuYXBzXzEiLCJvbldhdGNoRXJyb3IiLCJvbk9ubGluZVN0YXRlQ2hhbmdlIiwiYWRkU25hcHNob3RzSW5TeW5jTGlzdGVuZXIiLCJyZW1vdmVTbmFwc2hvdHNJblN5bmNMaXN0ZW5lciIsIlF1ZXJ5TGlzdGVuZXIiLCJxdWVyeU9ic2VydmVyIiwicmFpc2VkSW5pdGlhbEV2ZW50Iiwic25hcCIsImluY2x1ZGVNZXRhZGF0YUNoYW5nZXMiLCJzaG91bGRSYWlzZUV2ZW50Iiwic2hvdWxkUmFpc2VJbml0aWFsRXZlbnQiLCJyYWlzZUluaXRpYWxFdmVudCIsIm1heWJlT25saW5lIiwid2FpdEZvclN5bmNXaGVuT25saW5lIiwiaGFzUGVuZGluZ1dyaXRlc0NoYW5nZWQiLCJMb2NhbFZpZXdDaGFuZ2VzIiwiZnJvbVNuYXBzaG90Iiwidmlld1NuYXBzaG90IiwiQWRkZWRMaW1ib0RvY3VtZW50IiwiUmVtb3ZlZExpbWJvRG9jdW1lbnQiLCJWaWV3IiwiX3N5bmNlZERvY3VtZW50cyIsInN5bmNTdGF0ZSIsImxpbWJvRG9jdW1lbnRzIiwiZG9jdW1lbnRTZXQiLCJjb21wdXRlRG9jQ2hhbmdlcyIsInByZXZpb3VzQ2hhbmdlcyIsImNoYW5nZVNldCIsIm9sZERvY3VtZW50U2V0IiwibmV3TXV0YXRlZEtleXMiLCJuZXdEb2N1bWVudFNldCIsImxhc3REb2NJbkxpbWl0IiwiZmlyc3REb2NJbkxpbWl0IiwibmV3TWF5YmVEb2MiLCJvbGREb2MiLCJvbGREb2NIYWRQZW5kaW5nTXV0YXRpb25zIiwibmV3RG9jSGFzUGVuZGluZ011dGF0aW9ucyIsImNoYW5nZUFwcGxpZWQiLCJzaG91bGRXYWl0Rm9yU3luY2VkRG9jdW1lbnQiLCJ1cGRhdGVMaW1ib0RvY3VtZW50cyIsImNvbXBhcmVDaGFuZ2VUeXBlIiwiYXBwbHlUYXJnZXRDaGFuZ2UiLCJsaW1ib0NoYW5nZXMiLCJuZXdTeW5jU3RhdGUiLCJTeW5jZWQiLCJMb2NhbCIsInNob3VsZEJlSW5MaW1ibyIsIm9sZExpbWJvRG9jdW1lbnRzIiwic3luY2hyb25pemVXaXRoUGVyc2lzdGVkU3RhdGUiLCJxdWVyeVJlc3VsdCIsImNvbXB1dGVJbml0aWFsU25hcHNob3QiLCJSRVRSWV9DT1VOVCIsIlRyYW5zYWN0aW9uUnVubmVyIiwicmVtb3RlU3RvcmUiLCJ1cGRhdGVGdW5jdGlvbiIsInJldHJpZXMiLCJSZXRyeVRyYW5zYWN0aW9uIiwicnVuIiwicnVuV2l0aEJhY2tPZmYiLCJ0cnlSdW5VcGRhdGVGdW5jdGlvbiIsImNvbW1pdEVycm9yIiwiaGFuZGxlVHJhbnNhY3Rpb25FcnJvciIsInVzZXJQcm9taXNlRXJyb3IiLCJpc1JldHJ5YWJsZVRyYW5zYWN0aW9uRXJyb3IiLCJRdWVyeVZpZXciLCJ2aWV3IiwicmVjZWl2ZWREb2N1bWVudCIsInNoYXJlZENsaWVudFN0YXRlIiwiY3VycmVudFVzZXIiLCJzeW5jRW5naW5lTGlzdGVuZXIiLCJxdWVyeVZpZXdzQnlRdWVyeSIsInF1ZXJpZXNCeVRhcmdldCIsImxpbWJvVGFyZ2V0c0J5S2V5IiwibGltYm9SZXNvbHV0aW9uc0J5VGFyZ2V0IiwibGltYm9Eb2N1bWVudFJlZnMiLCJtdXRhdGlvblVzZXJDYWxsYmFja3MiLCJwZW5kaW5nV3JpdGVzQ2FsbGJhY2tzIiwibGltYm9UYXJnZXRJZEdlbmVyYXRvciIsInF1ZXJ5VmlldyIsInN0YXR1c18xIiwiYXNzZXJ0U3Vic2NyaWJlZCIsImFkZExvY2FsUXVlcnlUYXJnZXQiLCJpbml0aWFsaXplVmlld0FuZENvbXB1dGVTbmFwc2hvdCIsInZpZXdEb2NDaGFuZ2VzIiwic3ludGhlc2l6ZWRUYXJnZXRDaGFuZ2UiLCJzeW5jaHJvbml6ZVZpZXdBbmRDb21wdXRlU25hcHNob3QiLCJ1cGRhdGVUcmFja2VkTGltYm9zIiwicmVtb3ZlTG9jYWxRdWVyeVRhcmdldCIsImlzQWN0aXZlUXVlcnlUYXJnZXQiLCJjbGVhclF1ZXJ5U3RhdGUiLCJyZW1vdmVBbmRDbGVhbnVwVGFyZ2V0IiwidXNlckNhbGxiYWNrIiwiYWRkUGVuZGluZ011dGF0aW9uIiwiYWRkTXV0YXRpb25DYWxsYmFjayIsImVtaXROZXdTbmFwc0FuZE5vdGlmeUxvY2FsU3RvcmUiLCJsaW1ib1Jlc29sdXRpb24iLCJTaGFyZWRDbGllbnRTdGF0ZSIsIm5ld1ZpZXdTbmFwc2hvdHNfMSIsInNldE9ubGluZVN0YXRlIiwibGltYm9LZXkiLCJldmVudF8xIiwidXBkYXRlUXVlcnlTdGF0ZSIsImFwcGx5QmF0Y2hTdGF0ZSIsImJhdGNoU3RhdGUiLCJwcm9jZXNzVXNlckNhbGxiYWNrIiwibXV0YXRpb25CYXRjaFJlc3VsdCIsInRyaWdnZXJQZW5kaW5nV3JpdGVzQ2FsbGJhY2tzIiwidXBkYXRlTXV0YXRpb25TdGF0ZSIsInJlZ2lzdGVyUGVuZGluZ1dyaXRlc0NhbGxiYWNrIiwiaGlnaGVzdEJhdGNoSWQiLCJjYWxsYmFja3MiLCJyZWplY3RPdXRzdGFuZGluZ1BlbmRpbmdXcml0ZXNDYWxsYmFja3MiLCJlcnJvck1lc3NhZ2UiLCJjbGVhciIsIm5ld0NhbGxiYWNrcyIsImxpbWJvS2V5cyIsInJlbW92ZUxpbWJvVGFyZ2V0IiwibGltYm9UYXJnZXRJZCIsImxpbWJvQ2hhbmdlc18xIiwibGltYm9DaGFuZ2UiLCJ0cmFja0xpbWJvQ2hhbmdlIiwiY3VycmVudExpbWJvRG9jcyIsIm5ld1NuYXBzIiwiZG9jQ2hhbmdlc0luQWxsVmlld3MiLCJxdWVyaWVzUHJvY2Vzc2VkIiwidXNlckNoYW5nZWQiLCJhY3RpdmVUYXJnZXRzIiwiYWN0aXZlUXVlcmllcyIsImFjdGl2ZVF1ZXJpZXNfMSIsImFjdGl2ZVRhcmdldHNfMSIsInBfMSIsImdldEFsbEFjdGl2ZVF1ZXJ5VGFyZ2V0cyIsInN5bmNocm9uaXplUXVlcnlWaWV3c0FuZFJhaXNlU25hcHNob3RzIiwiaXNMb2NhbFF1ZXJ5VGFyZ2V0IiwicmVzZXRMaW1ib0RvY3VtZW50cyIsIm5ld1ZpZXdTbmFwc2hvdHMiLCJ0YXJnZXRzXzEiLCJxdWVyaWVzXzEiLCJzeW50aGVzaXplVGFyZ2V0VG9RdWVyeSIsImFwcGx5VGFyZ2V0U3RhdGUiLCJzeW50aGVzaXplZFJlbW90ZUV2ZW50IiwiYXBwbHlBY3RpdmVUYXJnZXRzQ2hhbmdlIiwiYWRkZWRfMSIsInJlbW92ZWRfMSIsImtleVNldCIsInF1ZXJpZXNfMiIsInN5bmNlZERvY3VtZW50cyIsIlVzZXIiLCJvdGhlclVzZXIiLCJHT09HTEVfQ1JFREVOVElBTFMiLCJGSVJTVF9QQVJUWSIsIkNMSUVOVF9TVEFURV9LRVlfUFJFRklYIiwiY3JlYXRlV2ViU3RvcmFnZUNsaWVudFN0YXRlS2V5IiwiTVVUQVRJT05fQkFUQ0hfS0VZX1BSRUZJWCIsImNyZWF0ZVdlYlN0b3JhZ2VNdXRhdGlvbkJhdGNoS2V5IiwibXV0YXRpb25LZXkiLCJRVUVSWV9UQVJHRVRfS0VZX1BSRUZJWCIsImNyZWF0ZVdlYlN0b3JhZ2VRdWVyeVRhcmdldE1ldGFkYXRhS2V5IiwiT05MSU5FX1NUQVRFX0tFWV9QUkVGSVgiLCJTRVFVRU5DRV9OVU1CRVJfS0VZX1BSRUZJWCIsIkxPR19UQUckYSIsIk11dGF0aW9uTWV0YWRhdGEiLCJmcm9tV2ViU3RvcmFnZUVudHJ5IiwidmFsaWREYXRhIiwiZmlyZXN0b3JlRXJyb3IiLCJ0b1dlYlN0b3JhZ2VKU09OIiwiYmF0Y2hNZXRhZGF0YSIsIlF1ZXJ5VGFyZ2V0TWV0YWRhdGEiLCJSZW1vdGVDbGllbnRTdGF0ZSIsImNsaWVudFN0YXRlIiwiYWN0aXZlVGFyZ2V0SWRzU2V0IiwiU2hhcmVkT25saW5lU3RhdGUiLCJMb2NhbENsaWVudFN0YXRlIiwiYWRkUXVlcnlUYXJnZXQiLCJyZW1vdmVRdWVyeVRhcmdldCIsIldlYlN0b3JhZ2VTaGFyZWRDbGllbnRTdGF0ZSIsImxvY2FsQ2xpZW50SWQiLCJhY3RpdmVDbGllbnRzIiwic3RvcmFnZUxpc3RlbmVyIiwiaGFuZGxlV2ViU3RvcmFnZUV2ZW50IiwiZWFybHlFdmVudHMiLCJlc2NhcGVkUGVyc2lzdGVuY2VLZXkiLCJzdG9yYWdlIiwibG9jYWxDbGllbnRTdG9yYWdlS2V5Iiwic2VxdWVuY2VOdW1iZXJLZXkiLCJjcmVhdGVXZWJTdG9yYWdlU2VxdWVuY2VOdW1iZXJLZXkiLCJjbGllbnRTdGF0ZUtleVJlIiwibXV0YXRpb25CYXRjaEtleVJlIiwicXVlcnlUYXJnZXRLZXlSZSIsIm9ubGluZVN0YXRlS2V5IiwiY3JlYXRlV2ViU3RvcmFnZU9ubGluZVN0YXRlS2V5IiwiZXhpc3RpbmdDbGllbnRzXzEiLCJzdG9yYWdlSXRlbSIsIm9ubGluZVN0YXRlSlNPTiIsInBlcnNpc3RDbGllbnRTdGF0ZSIsImZyb21XZWJTdG9yYWdlT25saW5lU3RhdGUiLCJoYW5kbGVPbmxpbmVTdGF0ZUV2ZW50IiwicGVyc2lzdE11dGF0aW9uU3RhdGUiLCJyZW1vdmVNdXRhdGlvblN0YXRlIiwicXVlcnlTdGF0ZSIsImxvY2FsQ2xpZW50U3RhdGUiLCJwZXJzaXN0UXVlcnlUYXJnZXRTdGF0ZSIsInBlcnNpc3RPbmxpbmVTdGF0ZSIsInN0b3JhZ2VBcmVhIiwibXV0YXRpb25NZXRhZGF0YSIsInF1ZXJ5VGFyZ2V0TWV0YWRhdGEiLCJmcm9tV2ViU3RvcmFnZUNsaWVudFN0YXRlS2V5IiwiaGFuZGxlQ2xpZW50U3RhdGVFdmVudCIsImZyb21XZWJTdG9yYWdlQ2xpZW50U3RhdGUiLCJmcm9tV2ViU3RvcmFnZU11dGF0aW9uTWV0YWRhdGEiLCJoYW5kbGVNdXRhdGlvbkJhdGNoRXZlbnQiLCJmcm9tV2ViU3RvcmFnZVF1ZXJ5VGFyZ2V0TWV0YWRhdGEiLCJoYW5kbGVRdWVyeVRhcmdldEV2ZW50Iiwic2VxU3RyaW5nIiwicGFyc2VkIiwiZnJvbVdlYlN0b3JhZ2VTZXF1ZW5jZU51bWJlciIsIm11dGF0aW9uU3RhdGUiLCJ0YXJnZXRLZXkiLCJ0YXJnZXRNZXRhZGF0YSIsImV4aXN0aW5nVGFyZ2V0cyIsIm5ld1RhcmdldHMiLCJhZGRlZFRhcmdldHMiLCJyZW1vdmVkVGFyZ2V0cyIsIk1lbW9yeVNoYXJlZENsaWVudFN0YXRlIiwibG9jYWxTdGF0ZSIsIkluZGV4ZWREYlBlcnNpc3RlbmNlU2V0dGluZ3MiLCJjYWNoZVNpemVCeXRlcyIsInN5bmNocm9uaXplVGFicyIsIk1lbW9yeVBlcnNpc3RlbmNlU2V0dGluZ3MiLCJGaXJlc3RvcmVDbGllbnQiLCJwZXJzaXN0ZW5jZVNldHRpbmdzIiwidmVyaWZ5Tm90VGVybWluYXRlZCIsImluaXRpYWxpemF0aW9uRG9uZSIsInBlcnNpc3RlbmNlUmVzdWx0IiwiaW5pdGlhbGl6ZWQiLCJzZXRDaGFuZ2VMaXN0ZW5lciIsImluaXRpYWxpemVQZXJzaXN0ZW5jZSIsIm1heWJlTHJ1R2MiLCJpbml0aWFsaXplUmVzdCIsInN0YXJ0SW5kZXhlZERiUGVyc2lzdGVuY2UiLCJjYW5GYWxsYmFjayIsInN0YXJ0TWVtb3J5UGVyc2lzdGVuY2UiLCJET01FeGNlcHRpb24iLCJpc1NodXR0aW5nRG93biIsInNldHRpbmdzIiwibG9hZENvbm5lY3Rpb24iLCJyZW1vdGVTdG9yZU9ubGluZVN0YXRlQ2hhbmdlZEhhbmRsZXIiLCJzaGFyZWRDbGllbnRTdGF0ZU9ubGluZVN0YXRlQ2hhbmdlZEhhbmRsZXIiLCJscnVTY2hlZHVsZXIiLCJuZXdDb25uZWN0aXZpdHlNb25pdG9yIiwibmV3U2VyaWFsaXplciIsImV2ZW50TWdyIiwidGVybWluYXRlIiwicmVtb3ZlQ2hhbmdlTGlzdGVuZXIiLCJ3YWl0Rm9yUGVuZGluZ1dyaXRlcyIsImNsaWVudFRlcm1pbmF0ZWQiLCJnZXREb2N1bWVudEZyb21Mb2NhbENhY2hlIiwiZ2V0RG9jdW1lbnRzRnJvbUxvY2FsQ2FjaGUiLCJBc3luY09ic2VydmVyIiwibXV0ZWQiLCJzY2hlZHVsZUV2ZW50IiwibXV0ZSIsImV2ZW50SGFuZGxlciIsIkZpZWxkUGF0aCQxIiwiZmllbGROYW1lcyIsIm1pbk51bWJlck9mRWxlbWVudHMiLCJ2YWxpZGF0ZU5hbWVkQXJyYXlBdExlYXN0TnVtYmVyT2ZFbGVtZW50cyIsIl9pbnRlcm5hbFBhdGgiLCJkb2N1bWVudElkIiwiX0RPQ1VNRU5UX0lEIiwiUkVTRVJWRUQiLCJPQXV0aFRva2VuIiwiYXV0aEhlYWRlcnMiLCJFbXB0eUNyZWRlbnRpYWxzUHJvdmlkZXIiLCJjaGFuZ2VMaXN0ZW5lciIsIkZpcmViYXNlQ3JlZGVudGlhbHNQcm92aWRlciIsImF1dGhQcm92aWRlciIsInRva2VuTGlzdGVuZXIiLCJyZWNlaXZlZEluaXRpYWxVc2VyIiwidG9rZW5Db3VudGVyIiwiZm9yY2VSZWZyZXNoIiwiZ2V0VXNlciIsImFkZEF1dGhUb2tlbkxpc3RlbmVyIiwiaW5pdGlhbFRva2VuQ291bnRlciIsInRva2VuRGF0YSIsImFjY2Vzc1Rva2VuIiwicmVtb3ZlQXV0aFRva2VuTGlzdGVuZXIiLCJjdXJyZW50VWlkIiwiZ2V0VWlkIiwiRmlyc3RQYXJ0eVRva2VuIiwiZ2FwaSIsInNlc3Npb25JbmRleCIsImhlYWRlcnMiLCJhdXRoSGVhZGVyIiwiZ2V0QXV0aEhlYWRlclZhbHVlRm9yRmlyc3RQYXJ0eSIsIkZpcnN0UGFydHlDcmVkZW50aWFsc1Byb3ZpZGVyIiwibWFrZUNyZWRlbnRpYWxzUHJvdmlkZXIiLCJpc1BhcnRpYWxPYnNlcnZlciIsIlVzZXJEYXRhU291cmNlIiwiRmllbGRWYWx1ZUltcGwiLCJfbWV0aG9kTmFtZSIsIkRlbGV0ZUZpZWxkVmFsdWVJbXBsIiwic2VydmVyVGltZXN0YW1wIiwiU2VydmVyVGltZXN0YW1wRmllbGRWYWx1ZUltcGwiLCJhcnJheVVuaW9uIiwiQXJyYXlVbmlvbkZpZWxkVmFsdWVJbXBsIiwiYXJyYXlSZW1vdmUiLCJBcnJheVJlbW92ZUZpZWxkVmFsdWVJbXBsIiwiTnVtZXJpY0luY3JlbWVudEZpZWxkVmFsdWVJbXBsIiwiX2VsZW1lbnRzIiwiX29wZXJhbmQiLCJQdWJsaWNGaWVsZFZhbHVlIiwiUkVTRVJWRURfRklFTERfUkVHRVgiLCJQYXJzZWRTZXREYXRhIiwiUGFyc2VkVXBkYXRlRGF0YSIsImlzV3JpdGUiLCJkYXRhU291cmNlIiwiTWVyZ2VTZXQiLCJVcGRhdGUiLCJBcmd1bWVudCIsIkFycmF5QXJndW1lbnQiLCJQYXJzZUNvbnRleHQiLCJhcnJheUVsZW1lbnQiLCJ2YWxpZGF0ZVBhdGgiLCJjaGlsZENvbnRleHRGb3JGaWVsZCIsImNoaWxkUGF0aCIsInZhbGlkYXRlUGF0aFNlZ21lbnQiLCJjaGlsZENvbnRleHRGb3JGaWVsZFBhdGgiLCJjaGlsZENvbnRleHRGb3JBcnJheSIsImNyZWF0ZUVycm9yIiwiZmllbGREZXNjcmlwdGlvbiIsIkRvY3VtZW50S2V5UmVmZXJlbmNlIiwiVXNlckRhdGFDb252ZXJ0ZXIiLCJwcmVDb252ZXJ0ZXIiLCJwYXJzZVNldERhdGEiLCJ2YWxpZGF0ZVBsYWluT2JqZWN0IiwidXBkYXRlRGF0YSIsInBhcnNlRGF0YSIsInBhcnNlTWVyZ2VEYXRhIiwidmFsaWRhdGVkRmllbGRQYXRocyIsImZpZWxkUGF0aHNfMSIsInN0cmluZ09yRmllbGRQYXRoIiwiZmllbGRQYXRoRnJvbURvdFNlcGFyYXRlZFN0cmluZyIsInBhcnNlVXBkYXRlRGF0YSIsImZpZWxkTWFza1BhdGhzIiwiY2hpbGRDb250ZXh0IiwicnVuUHJlQ29udmVydGVyIiwicGFyc2VkVmFsdWUiLCJtYXNrIiwicGFyc2VVcGRhdGVWYXJhcmdzIiwibW9yZUZpZWxkc0FuZFZhbHVlcyIsImZpZWxkUGF0aEZyb21Bcmd1bWVudCIsInZhbHVlXzEiLCJwYXJzZVF1ZXJ5VmFsdWUiLCJhbGxvd0FycmF5cyIsImxvb2tzTGlrZUpzb25PYmplY3QiLCJwYXJzZU9iamVjdCIsInBhcnNlU2VudGluZWxGaWVsZFZhbHVlIiwicGFyc2VBcnJheSIsInBhcnNlU2NhbGFyVmFsdWUiLCJlbnRyeUluZGV4IiwiYXJyYXlfMSIsInBhcnNlZEVudHJ5IiwicGFyc2VkRWxlbWVudHMiLCJwYXJzZUFycmF5VHJhbnNmb3JtRWxlbWVudHMiLCJudW1lcmljSW5jcmVtZW50Iiwic2VhcmNoIiwiZnJvbURvdFNlcGFyYXRlZFN0cmluZyIsIkRFRkFVTFRfSE9TVCIsIkRFRkFVTFRfU1NMIiwiREVGQVVMVF9USU1FU1RBTVBTX0lOX1NOQVBTSE9UUyIsIkRFRkFVTFRfRk9SQ0VfTE9OR19QT0xMSU5HIiwiQ0FDSEVfU0laRV9VTkxJTUlURUQiLCJGaXJlc3RvcmVTZXR0aW5ncyIsImV4cGVyaW1lbnRhbEZvcmNlTG9uZ1BvbGxpbmciLCJGaXJlc3RvcmUiLCJkYXRhYmFzZUlkT3JBcHAiLCJfZmlyZWJhc2VBcHAiLCJfcXVldWUiLCJlbnN1cmVDbGllbnRDb25maWd1cmVkIiwiX2ZpcmVzdG9yZUNsaWVudCIsIl9kYXRhYmFzZUlkIiwiZGF0YWJhc2VJZEZyb21BcHAiLCJfcGVyc2lzdGVuY2VLZXkiLCJfY3JlZGVudGlhbHMiLCJleHRlcm5hbF8xIiwiX3NldHRpbmdzIiwiX2RhdGFDb252ZXJ0ZXIiLCJjcmVhdGVEYXRhQ29udmVydGVyIiwic2V0dGluZ3NMaXRlcmFsIiwibmV3U2V0dGluZ3MiLCJlbmFibGVQZXJzaXN0ZW5jZSIsImV4cGVyaW1lbnRhbFRhYlN5bmNocm9uaXphdGlvbiIsImNvbmZpZ3VyZUNsaWVudCIsIm1ha2VEYXRhYmFzZUluZm8iLCJvblNuYXBzaG90c0luU3luYyIsImFyZyIsIm9uU25hcHNob3RzSW5TeW5jSW50ZXJuYWwiLCJhc3luY09ic2VydmVyIiwiRG9jdW1lbnRSZWZlcmVuY2UiLCJ0aGlzRGIiLCJvdGhlckRiIiwiZmlyZXN0b3JlIiwiX2tleSIsInBhdGhTdHJpbmciLCJDb2xsZWN0aW9uUmVmZXJlbmNlIiwiZm9yUGF0aCIsIlF1ZXJ5JDEiLCJUcmFuc2FjdGlvbiQxIiwiV3JpdGVCYXRjaCIsIl9hcmVUaW1lc3RhbXBzSW5TbmFwc2hvdHNFbmFibGVkIiwiX2ZpcmVzdG9yZSIsIl90cmFuc2FjdGlvbiIsImRvY3VtZW50UmVmIiwidmFsaWRhdGVSZWZlcmVuY2UiLCJEb2N1bWVudFNuYXBzaG90IiwiX2NvbnZlcnRlciIsInZhbGlkYXRlU2V0T3B0aW9ucyIsImFwcGx5RmlyZXN0b3JlRGF0YUNvbnZlcnRlciIsImNvbnZlcnRlZFZhbHVlIiwibWVyZ2UiLCJtZXJnZUZpZWxkcyIsImZpZWxkT3JVcGRhdGVEYXRhIiwiX211dGF0aW9ucyIsIl9jb21taXR0ZWQiLCJ2ZXJpZnlOb3RDb21taXR0ZWQiLCJvblNuYXBzaG90IiwiY3VyckFyZyIsImludGVybmFsT3B0aW9ucyIsIm9uU25hcHNob3RJbnRlcm5hbCIsImVyckhhbmRsZXIiLCJpbnRlcm5hbExpc3RlbmVyIiwidmFsaWRhdGVHZXRPcHRpb25zIiwiZ2V0VmlhU25hcHNob3RMaXN0ZW5lciIsIndpdGhDb252ZXJ0ZXIiLCJTbmFwc2hvdE1ldGFkYXRhIiwiX2RvY3VtZW50IiwiX2Zyb21DYWNoZSIsIl9oYXNQZW5kaW5nV3JpdGVzIiwidmFsaWRhdGVTbmFwc2hvdE9wdGlvbnMiLCJRdWVyeURvY3VtZW50U25hcHNob3QiLCJmcm9tRmlyZXN0b3JlIiwidG9KU09iamVjdCIsInRvSlNWYWx1ZSIsInRvSlNBcnJheSIsIl9xdWVyeSIsIm9wU3RyIiwid2hlcmVGaWx0ZXJPcEVudW1zIiwib3BlcmF0b3IiLCJ2YWxpZGF0ZURpc2p1bmN0aXZlRmlsdGVyRWxlbWVudHMiLCJyZWZlcmVuY2VMaXN0IiwicGFyc2VEb2N1bWVudElkVmFsdWUiLCJ2YWxpZGF0ZU5ld0ZpbHRlciIsImRpcmVjdGlvblN0ciIsInZhbGlkYXRlTmV3T3JkZXJCeSIsImxpbWl0VG9MYXN0IiwiZG9jT3JGaWVsZCIsImJvdW5kRnJvbURvY09yRmllbGRzIiwic3RhcnRBZnRlciIsImVuZEJlZm9yZSIsImJvdW5kRnJvbURvY3VtZW50IiwiYWxsRmllbGRzIiwiYm91bmRGcm9tRmllbGRzIiwicmF3VmFsdWUiLCJ3cmFwcGVkIiwidmFsaWRhdGVIYXNFeHBsaWNpdE9yZGVyQnlGb3JMaW1pdFRvTGFzdCIsIlF1ZXJ5U25hcHNob3QiLCJmaXJlc3RvcmVDbGllbnQiLCJkb2N1bWVudElkVmFsdWUiLCJhcnJheU9wcyIsImRpc2p1bmN0aXZlT3BzIiwiaXNBcnJheU9wIiwiaXNEaXNqdW5jdGl2ZU9wIiwiZXhpc3RpbmdGaWVsZCIsInZhbGlkYXRlT3JkZXJCeUFuZEluZXF1YWxpdHlNYXRjaCIsImNvbmZsaWN0aW5nT3AiLCJpbmVxdWFsaXR5IiwiX29yaWdpbmFsUXVlcnkiLCJfc25hcHNob3QiLCJfY2FjaGVkQ2hhbmdlcyIsIl9jYWNoZWRDaGFuZ2VzSW5jbHVkZU1ldGFkYXRhQ2hhbmdlcyIsImNvbnZlcnRUb0RvY3VtZW50SW1wbCIsImxhc3REb2NfMSIsImluZGV4XzEiLCJvbGRJbmRleCIsIm5ld0luZGV4IiwiaW5kZXhUcmFja2VyXzEiLCJyZXN1bHRDaGFuZ2VUeXBlIiwiY2hhbmdlc0Zyb21TbmFwc2hvdCIsInRocm93RG9jQ2hhbmdlc01ldGhvZEVycm9yIiwiX3BhdGgiLCJkb2NSZWYiLCJ0b0ZpcmVzdG9yZSIsIlB1YmxpY0ZpcmVzdG9yZSIsIlB1YmxpY1RyYW5zYWN0aW9uIiwiUHVibGljV3JpdGVCYXRjaCIsIlB1YmxpY0RvY3VtZW50UmVmZXJlbmNlIiwiUHVibGljRG9jdW1lbnRTbmFwc2hvdCIsIlB1YmxpY1F1ZXJ5RG9jdW1lbnRTbmFwc2hvdCIsIlB1YmxpY1F1ZXJ5IiwiUHVibGljUXVlcnlTbmFwc2hvdCIsIlB1YmxpY0NvbGxlY3Rpb25SZWZlcmVuY2UiLCJmaXJlc3RvcmVOYW1lc3BhY2UiLCJjb25maWd1cmVGb3JGaXJlYmFzZSIsInNoYWxsb3dDb3B5IiwiTm9vcENvbm5lY3Rpdml0eU1vbml0b3IiLCJCcm93c2VyQ29ubmVjdGl2aXR5TW9uaXRvciIsIm5ldHdvcmtBdmFpbGFibGVMaXN0ZW5lciIsIm9uTmV0d29ya0F2YWlsYWJsZSIsIm5ldHdvcmtVbmF2YWlsYWJsZUxpc3RlbmVyIiwib25OZXR3b3JrVW5hdmFpbGFibGUiLCJjb25maWd1cmVOZXR3b3JrTW9uaXRvcmluZyIsIlN0cmVhbUJyaWRnZSIsInNlbmRGbiIsImNsb3NlRm4iLCJ3cmFwcGVkT25PcGVuIiwid3JhcHBlZE9uQ2xvc2UiLCJ3cmFwcGVkT25NZXNzYWdlIiwiY2FsbE9uT3BlbiIsImNhbGxPbkNsb3NlIiwiY2FsbE9uTWVzc2FnZSIsIkxPR19UQUckZCIsIlJQQ19OQU1FX1JFU1RfTUFQUElORyIsIlhfR09PR19BUElfQ0xJRU5UX1ZBTFVFIiwiV2ViQ2hhbm5lbENvbm5lY3Rpb24iLCJiYXNlVXJsIiwibW9kaWZ5SGVhZGVyc0ZvclJlcXVlc3QiLCJtYWtlVXJsIiwieGhyIiwiWGhySW8iLCJsaXN0ZW5PbmNlIiwiRXZlbnRUeXBlIiwiQ09NUExFVEUiLCJnZXRMYXN0RXJyb3JDb2RlIiwiRXJyb3JDb2RlIiwiTk9fRVJST1IiLCJqc29uIiwiZ2V0UmVzcG9uc2VKc29uIiwiVElNRU9VVCIsIkhUVFBfRVJST1IiLCJnZXRTdGF0dXMiLCJnZXRSZXNwb25zZVRleHQiLCJyZXNwb25zZUVycm9yIiwiZmlyZXN0b3JlRXJyb3JDb2RlIiwic2VydmVyRXJyb3IiLCJ0b0xvd2VyQ2FzZSIsImdldExhc3RFcnJvciIsImpzb25PYmoiLCJyZXF1ZXN0U3RyaW5nIiwidXJsUGFydHMiLCJ3ZWJjaGFubmVsVHJhbnNwb3J0IiwiY3JlYXRlV2ViQ2hhbm5lbFRyYW5zcG9ydCIsImJhY2tncm91bmRDaGFubmVsVGVzdCIsImh0dHBTZXNzaW9uSWRQYXJhbSIsImluaXRNZXNzYWdlSGVhZGVycyIsIm1lc3NhZ2VVcmxQYXJhbXMiLCJzZW5kUmF3SnNvbiIsInN1cHBvcnRzQ3Jvc3NEb21haW5YaHIiLCJpbnRlcm5hbENoYW5uZWxQYXJhbXMiLCJmb3J3YXJkQ2hhbm5lbFJlcXVlc3RUaW1lb3V0TXMiLCJodHRwSGVhZGVyc092ZXJ3cml0ZVBhcmFtIiwiY2hhbm5lbCIsImNyZWF0ZVdlYkNoYW5uZWwiLCJvcGVuZWQiLCJjbG9zZWQiLCJzdHJlYW1CcmlkZ2UiLCJ1bmd1YXJkZWRFdmVudExpc3RlbiIsInBhcmFtIiwiV2ViQ2hhbm5lbCIsIk9QRU4iLCJDTE9TRSIsIk1FU1NBR0UiLCJtc2dEYXRhIiwibXNnRGF0YU9yRXJyb3IiLCJzdGF0dXNfMiIsIm1hcENvZGVGcm9tUnBjU3RhdHVzIiwidXJsUnBjTmFtZSIsIkJyb3dzZXJQbGF0Zm9ybSIsImVuY29kZWQiLCJyZWdpc3RlckZpcmVzdG9yZSIsImNhY2hlZFNldFRpbWVvdXQiLCJjYWNoZWRDbGVhclRpbWVvdXQiLCJkZWZhdWx0U2V0VGltb3V0IiwiZGVmYXVsdENsZWFyVGltZW91dCIsInJ1blRpbWVvdXQiLCJmdW4iLCJjdXJyZW50UXVldWUiLCJkcmFpbmluZyIsInF1ZXVlSW5kZXgiLCJjbGVhblVwTmV4dFRpY2siLCJkcmFpblF1ZXVlIiwidGltZW91dCIsIm1hcmtlciIsInJ1bkNsZWFyVGltZW91dCIsIkl0ZW0iLCJuZXh0VGljayIsInRpdGxlIiwiYnJvd3NlciIsImFyZ3YiLCJ2ZXJzaW9ucyIsIm9uIiwiYWRkTGlzdGVuZXIiLCJvbmNlIiwib2ZmIiwicmVtb3ZlTGlzdGVuZXIiLCJyZW1vdmVBbGxMaXN0ZW5lcnMiLCJlbWl0IiwicHJlcGVuZExpc3RlbmVyIiwicHJlcGVuZE9uY2VMaXN0ZW5lciIsImJpbmRpbmciLCJjd2QiLCJjaGRpciIsInVtYXNrIiwiY29tbW9uanNHbG9iYWwiLCJnbG9iYWxUaGlzIiwiZ29vZyIsImFhIiwiYmEiLCJjYSIsImRhIiwiZWEiLCJmYSIsInVuc2hpZnQiLCJ3IiwieCIsIk4iLCJ4YiIsImgiLCJsYSIsIkciLCJqYSIsIm9hIiwicGEiLCJxYSIsIkEiLCJyYSIsInRyaW0iLCJ6Iiwic2EiLCJ0YSIsInVzZXJBZ2VudCIsInZhIiwid2EiLCJ4YSIsInlhIiwiemEiLCJJYSIsIkNhIiwiQiIsIkRhIiwiRWEiLCJGYSIsIkdhIiwiSGEiLCJkb2N1bWVudE1vZGUiLCJKYSIsIkthIiwiTGEiLCJwYXJzZUZsb2F0IiwiTmEiLCJCYSIsIk1hIiwiQWEiLCJwYXJzZUludCIsIk9hIiwiY29tcGF0TW9kZSIsIlBhIiwiUWEiLCJSYSIsIkMiLCJEIiwicmVsYXRlZFRhcmdldCIsImJ1dHRvbiIsInNjcmVlblkiLCJzY3JlZW5YIiwiY2xpZW50WSIsImNsaWVudFgiLCJtZXRhS2V5Iiwic2hpZnRLZXkiLCJhbHRLZXkiLCJjdHJsS2V5IiwicG9pbnRlcklkIiwicG9pbnRlclR5cGUiLCJjaGFuZ2VkVG91Y2hlcyIsInNyY0VsZW1lbnQiLCJub2RlTmFtZSIsImZyb21FbGVtZW50IiwidG9FbGVtZW50IiwicGFnZVgiLCJwYWdlWSIsIlNhIiwiZGVmYXVsdFByZXZlbnRlZCIsIjIiLCIzIiwiNCIsInByZXZlbnREZWZhdWx0IiwicmV0dXJuVmFsdWUiLCJrZXlDb2RlIiwiRiIsIlRhIiwiVWEiLCJzcmMiLCJjYXB0dXJlIiwiWCIsIloiLCJWYSIsIldhIiwiWWEiLCJYYSIsIlphIiwiJGEiLCJiYiIsImViIiwiZmIiLCJpYiIsImdiIiwiYXR0YWNoRXZlbnQiLCJoYiIsImtiIiwiZGV0YWNoRXZlbnQiLCJsYiIsIm1iIiwiaGFuZGxlRXZlbnQiLCJKIiwibmIiLCJFIiwiamIiLCJkaXNwYXRjaEV2ZW50Iiwib2IiLCJwYiIsInFiIiwic2IiLCJyYiIsInRiIiwidWIiLCJ2YiIsIndiIiwiQWIiLCJ5YiIsInpiIiwiQ2IiLCJEYiIsIkwiLCJFYiIsIkZiIiwiR2IiLCJVIiwiSCIsIkhiIiwiSWIiLCJKYiIsIktiIiwiSSIsIkxiIiwiTWIiLCJLIiwiTmIiLCJPYiIsIlBiIiwiUWIiLCJSYiIsIlNiIiwiVGIiLCJXYiIsIlViIiwiVmIiLCJYYiIsIk0iLCJWIiwiTyIsIlliIiwiUiIsIlMiLCJaYiIsIiRiIiwiYWMiLCJiYyIsImNjIiwiZGMiLCJlYyIsImZjIiwiJCIsIlkiLCJrYyIsImxjIiwiaWMiLCJqYyIsIm1jIiwiYWIiLCJnYyIsIm5hIiwib2MiLCJuYyIsIlEiLCJyYyIsInBjIiwiVCIsImhjIiwic2MiLCJ1YyIsInZjIiwid2MiLCJ4YyIsInljIiwiemMiLCJBYyIsIk1jIiwiSWMiLCJHYyIsIkJjIiwiSGMiLCJhYnMiLCJkZWNvZGVVUkkiLCJkZWNvZGVVUklDb21wb25lbnQiLCJlbmNvZGVVUkkiLCJMYyIsIkNjIiwiRGMiLCJFYyIsIkZjIiwibGFzdEluZGV4T2YiLCJ0YyIsIk5jIiwiU2MiLCJVYyIsIlZjIiwiV2MiLCJYYyIsIlljIiwiWmMiLCIkYyIsImFkIiwiYmQiLCJQZXJmb3JtYW5jZU5hdmlnYXRpb25UaW1pbmciLCJwZXJmb3JtYW5jZSIsImdldEVudHJpZXNCeVR5cGUiLCJuZXh0SG9wUHJvdG9jb2wiLCJrYSIsIm1hIiwiY2QiLCJkZCIsImVkIiwiZmQiLCJnZCIsImhkIiwiamQiLCJrZCIsImxkIiwibmQiLCJvbmxvYWQiLCJvbnRpbWVvdXQiLCJxYyIsIm9kIiwicGQiLCJxZCIsInJkIiwic2QiLCJ2ZCIsIndkIiwieGQiLCJsb2NhdGlvbiIsInByb3RvY29sIiwic3RhdHVzVGV4dCIsInRkIiwib25yZWFkeXN0YXRlY2hhbmdlIiwicmVhZHlTdGF0ZSIsImdldFJlc3BvbnNlSGVhZGVyIiwiemQiLCJ5ZCIsIkFkIiwiZ2EiLCJoYSIsImlhIiwiY29uY3VycmVudFJlcXVlc3RMaW1pdCIsImZhc3RIYW5kc2hha2UiLCJCZCIsIkNkIiwiRGQiLCJzZW5kQmVhY29uIiwiSW1hZ2UiLCJFZCIsIkZkIiwiR2QiLCJIZCIsIkxkIiwiS2QiLCJyb3VuZCIsIkJiIiwiVGMiLCJVZCIsIk1kIiwiTmQiLCJKZCIsIm1kIiwiSmMiLCJob3N0bmFtZSIsIktjIiwicG9ydCIsIk9kIiwiUWQiLCJ0ZXN0VXJsIiwiUGQiLCJtZXNzYWdlSGVhZGVycyIsImNsaWVudFByb3RvY29sSGVhZGVyUmVxdWlyZWQiLCJtZXNzYWdlQ29udGVudFR5cGUiLCJSZCIsIl9fc21fXyIsIlNkIiwidG9VcHBlckNhc2UiLCJYTUxIdHRwUmVxdWVzdCIsIkZvcm1EYXRhIiwic2V0UmVxdWVzdEhlYWRlciIsInJlc3BvbnNlVHlwZSIsIndpdGhDcmVkZW50aWFscyIsInVkIiwicmVzcG9uc2VUZXh0IiwiX19kYXRhX18iLCJJZCIsIlRkIiwidG1wIiwidG1wXzEiLCJ0bXBfMiIsInRtcF8zIiwidG1wXzQiLCJ0bXBfNSIsIk9ydGhvTGluZUxpbmVSZWxhdGlvbnNoaXBUeXBlIiwiUmVjdFJlY3RSZWxhdGlvbnNoaXBUeXBlIiwiUGFuZWxQb3NpdGlvbiIsIm9ydGhvTGluZUxpbmVSZWxhdGlvbnNoaXBUeXBlIiwiaW50ZXJzZWN0aW9uIiwib3ZlcmxhcCIsInB0c0Rpc3RhbmNlIiwicHQxIiwicHQyIiwic3FydCIsImxpbmVNaWRkbGVQdCIsImxpbmUiLCJhcmVMaW5lc0VxdWFsIiwibGluZTEiLCJsaW5lMiIsImFyZVBvaW50c0VxdWFsIiwicG9pbnQxIiwicG9pbnQyIiwiZ2V0UG9pbnRzQXJvdW5kIiwicG9pbnQiLCJwaXhlbHNQZXJTaWRlIiwiY3VycmVudFgiLCJjdXJyZW50WSIsInBvaW50c0Fyb3VuZCIsInJlYWRJbnB1dEZpbGUiLCJmaWxlIiwicmVqIiwicmVhZGVyIiwiRmlsZVJlYWRlciIsInJlYWRBc1RleHQiLCJnZXRVcmxQYXJhbXMiLCJwYXJzZXIiLCJocmVmIiwidmFycyIsInBhaXIiLCJlbXB0eU5vZGUiLCJjcmVhdGVCQm94IiwiZmlsbGV0IiwicmVjdCIsImNyZWF0ZUVsZW1lbnROUyIsImdldEJCb3giLCJ3aWR0aCIsImhlaWdodCIsImNyZWF0ZUJCb3gyIiwiZ2V0UmVsYXRpdmVDb29yZHMiLCJzdmdEb2MiLCJvcmlnaW5QdCIsImNyZWF0ZVNWR1BvaW50IiwibWF0cml4VHJhbnNmb3JtIiwiZ2V0U2NyZWVuQ1RNIiwiaW52ZXJzZSIsImdldFZpZXdwb3J0UmVsYXRpdmVDb29yZHMiLCJ1dWlkdjQiLCJjcnlwdG8iLCJnZXRSYW5kb21WYWx1ZXMiLCJpc09iamVjdEVtcHR5IiwiZ2V0UmVjdFNlZ21lbnRzIiwiY29ybmVyQSIsImNvcm5lckIiLCJjb3JuZXJDIiwiY29ybmVyRCIsImlzUHRJblJlY3QiLCJwdCIsImluY2x1c2l2ZSIsImlzTGluZUluUmVjdCIsImlzTnVtQmV0d2VlbiIsImxpbWl0MSIsImxpbWl0MiIsImlzTGluZUhvcml6b250YWwiLCJpc0xpbmVWZXJ0aWNhbCIsInNvcnRQdHNCeURpc3RhbmNlIiwicHRzIiwicmVmUHQiLCJpbmNsdWRlUmVmUHQiLCJyZWZlcmVuY2VQdCIsInNvcnRlZFB0cyIsIkdlb21ldHJ5Q2FsYyIsImxpbmVzQmV0d2VlblB0cyIsInJlY3RSZWN0UmVsYXRpb25zaGlwIiwicmVjdDEiLCJyZWN0MiIsIk1hdGNoIiwiQUluc2lkZUIiLCJCSW5zaWRlQSIsIkludGVyc2VjdCIsIlRhbmdlbnQiLCJEaXNqb2ludCIsImdldE9ydGhvTGluZUxpbmVSZWxhdGlvbnNoaXAiLCJPcnRob0xpbmVMaW5lUmVsYXRpb25zaGlwIiwiTm90aGluZyIsInN0YXJ0UG9pbnRYIiwiZW5kUG9pbnRYIiwiT3ZlcmxhcCIsInN0YXJ0UG9pbnRZIiwiZW5kUG9pbnRZIiwicmVjdGFuZ2xlc1NpbGhvdWV0dGUiLCJyZWN0cyIsInJlY3RzU2VnbWVudHMiLCJmaW5hbFNlZ21lbnRzIiwib3ZlcmxhcHBlZFNlZ21lbnRzIiwiY3VycmVudFJlY3RTZWdtZW50cyIsIm5ld0N1cnJlbnRSZWN0U2VnbWVudHMiLCJyZWN0c1JlbGF0aW9uIiwic2VnbWVudEludGVyc2VjdGlvbnMiLCJsaW5lc1JlbGF0aW9uc2hpcCIsInNvcnRlZEludGVyc2VjdGlvbnMiLCJzcGxpdGVkU2VnbWVudHMiLCJzdmdQYXRoRnJvbUxpbmVzIiwicGF0aENvbnRlbnQiLCJ0b0ZpeGVkIiwiU1ZHV0lEVEgiLCJaT09NU1BFRUQiLCJhbGxvd1Bhbm5pbmciLCJ6b29tIiwic2V0Q29udGVudCIsImRvbXBhcnNlciIsIkRPTVBhcnNlciIsInN2Z0NhbnZhcyIsInBhcnNlRnJvbVN0cmluZyIsImRvY3VtZW50RWxlbWVudCIsImJ1dHRvbnMiLCJzdmdJbml0aWFsQ2xpY2siLCJwcmV2Vmlld0JveCIsInZpZXdCb3giLCJiYXNlVmFsIiwibW91c2VQb3NpdGlvbiIsImNyZWF0ZUNvbW1lbnRzR3JvdXAiLCJjb21tZW50c0dyb3VwIiwiem9vbUZhY3RvciIsImRlbHRhWSIsInhQcm9wIiwieEluYyIsInlQcm9wIiwieUluYyIsIm1ldGFkYXRhRmllbGRzIiwicXVlcnlJdGVtcyIsInBhcmVudElkIiwidHJhc2hlZCIsImV4Y2x1ZGVOYW1lIiwib25seUZvbGRlciIsImRyaXZlIiwiZmlsZXMiLCJmaWxlSWQiLCJhbHQiLCJmaWxlQ29udGVudCIsImZpbGVNaW1lVHlwZSIsImZpbGVOYW1lIiwiZm9sZGVySWQiLCJhY2Nlc3NfdG9rZW4iLCJmb3JtIiwiYXBwZW5kIiwiZmV0Y2giLCJIZWFkZXJzIiwib2siLCJuZXdUaXRsZSIsImV4ZWN1dGUiLCJyZXNwIiwiZW1haWxBZGRyZXNzIiwicGVybWlzc2lvbklkIiwiYWJvdXQiLCJzaGFyZXIiLCJyZWNpcGllbnRzIiwicHJvamVjdE5hbWUiLCJlbWFpbHMiLCJhdXRob3IiLCJwaG90b0xpbmsiLCJ0ZXh0IiwiQXBwRGF0YSIsImxhc3RVcGxvYWRlZFByb2plY3QiLCJlcnJvck1zZyIsImZpbGVDb250ZW50UmF3IiwicHJvamVjdEluZm8iLCJhcHBNYWluRm9sZGVySWQiLCJhcHBNYWluRm9sZGVyRGF0YSIsImxpc3RGaWxlcyIsImFwcE1haW5Gb2xkZXJSZXMiLCJjcmVhdGVGb2xkZXIiLCJwcm9qZWN0Rm9sZGVySWQiLCJwcm9qZWN0c0RhdGEiLCJwcm9qIiwiZm9sZGVyQ3JlYXRpb25Qcm9taXNlIiwicHJvamVjdEZvbGRlckRhdGEiLCJkcmF3aW5ncyIsImRyYXdpbmdzRm9sZGVyUHJvbWlzZSIsImRyYXdpbmdzRm9sZGVySWQiLCJkcmF3aW5nc1Byb21pc2VzIiwiZHJhd2luZyIsImRyYXdpbmdQcm9taXNlIiwidXBsb2FkRmlsZSIsImRyYXdpbmdPYmoiLCJkZWNvZGVyIiwiVGV4dERlY29kZXIiLCJyZXNwb25zZXMiLCJnZXRSZWFkZXIiLCJyZWFkIiwiZWxlbWVudHNEYXRhIiwiZWxlbWVudHNEYXRhRm9sZGVyUHJvbWlzZSIsImVsZW1lbnRzRGF0YUZvbGRlcklkIiwiZWxlbWVudHNEYXRhUHJvbWlzZXMiLCJlbGVtZW50RGF0YSIsImVsZW1lbnREYXRhUHJvbWlzZSIsIm1haW5Gb2xkZXJJZCIsInByb2plY3RzRm9sZGVyc1JlcyIsIm5ld1Byb2plY3RzIiwicHJvamVjdHNGb2xkZXJzRGF0YSIsIm5ld1Byb2oiLCJhcHBTZXR0Rm9sZGVyRGF0YSIsImFwcFNldHRpbmdzRm9sZGVySWQiLCJ0aHVtYnNGb2xkZXJEYXRhIiwidGh1bWJzRm9sZGVySWQiLCJpbWdEYXRhIiwicHJvamVjdFRodW1iRGF0YSIsImltZyIsInRodW1iSWQiLCJwcm9qZWN0SW5kZXgiLCJwcm9qZWN0TmFtZVJlcyIsImdldEZpbGVEYXRhIiwiZmluZEluZGV4IiwicGVybWlzc2lvbnMiLCJwcm9qUGVybWlzc2lvbnNEYXRhIiwiZ2V0UHJvamVjdFRlYW1EYXRhIiwicHJvalNldHRpbmdzIiwicHJvalNldHRpbmdzRGF0YSIsInByb2pTZXR0aW5nc0NvbnRlbnRSZXMiLCJnZXRGaWxlQ29udGVudCIsImRyYXdpbmdzRm9sZGVyRGF0YSIsImRyYXdpbmdzUmVzIiwiZHJhd2luZ3NTdHlsZXNJZCIsImVsZW1lbnRzRGF0YUZvbGRlckRhdGEiLCJlbGVtZW50c0RhdGFSZXMiLCJjb21tZW50cyIsImNvbW1lbnRzRGF0YSIsImNvbW1lbnRzRmlsZUlkIiwiY29tbWVudHNDb250ZW50UmVzIiwiaW1hZ2VzIiwiaW1hZ2VzRm9sZGVyRGF0YSIsImltYWdlc1JlcyIsImVsZW1lbnRzSWRzIiwibWVudGlvbnMiLCJyZXByZXNlbnRhdGlvbnMiLCJjcmVhdGVSZXByZXNlbnRhdGlvbiIsInJlY3RhbmdsZXMiLCJyZXByZXNlbnRhdGlvbiIsImRhdGFzZXQiLCJwYW5lbHNTdG9yYWdlIiwiV29ya3NwYWNlIiwic2VjdGlvbnMiLCJwYW5lbFdpZHRoIiwicGFuZWxIZWlnaHQiLCJyZXNpemluZ1dpZHRoIiwicmVzaXppbmdIZWlnaHQiLCJwYW5lbENvbnRhaW5lciIsImNsYXNzTGlzdCIsInBhbmVsR3JpcCIsInBhbmVsQ29udGVudCIsInBhbmVsSGVhZGVyIiwicGFuZWxCb2R5IiwicGFuZWxGb290ZXIiLCJ3b3Jrc3BhY2VDb250YWluZXIiLCJyZXNpemVXaWR0aCIsInJlc2l6ZUhlaWdodCIsInNldEFjdGl2ZSIsIm9uY2xpY2siLCJjbG9zZXN0IiwiaW5uZXJUZXh0IiwibWVkaXVtQnJlYWtwb2ludCIsIm1hdGNoTWVkaWEiLCJwYW5lbFBvc2l0b24iLCJzZXRQcm9wZXJ0eSIsIm9ubW91c2Vkb3duIiwicGFuZWxTaWRlIiwiUmlnaHQiLCJzdGFydFgiLCJzdGFydFdpZHRoIiwiQm90dG9tIiwic3RhcnRZIiwic3RhcnRIZWlnaHQiLCJtb3VzZUV2ZW50IiwiZG9ja1RvIiwic2lkZSIsImFjdGl2ZVNlY3Rpb24iLCJzZXRJbmFjdGl2ZSIsInNlY3Rpb24iLCJhZGRTZWN0aW9uIiwiYWN0aXZhdGUiLCJidG4iLCJhZGRTZWN0aW9ucyIsInNlY3Rpb25zQXJyYXkiLCJyZW1vdmVTZWN0aW9uIiwic2VjdGlvbkluZGV4IiwiYnJlYWtwb2ludCIsImtpbGwiLCJmb3JtRWxlbWVudCIsIndvcmtzcGFjZSIsIm9uc3VibWl0IiwiY2FuY2VsQ3JlYXRlQnRuIiwiZ2V0RWxlbWVudEJ5SWQiLCJhZGRDb21tZW50QnRuIiwiZGVsZXRlQnRuIiwiZGVsZXRlQ29tbWVudCIsImNvbW1lbnRJZCIsImVkaXRCdG4iLCJlbmFibGVFZGl0Q29tbWVudCIsImNhbmNlbFVwZGF0ZUJ0biIsImRpc2NhcmRVcGRhdGUiLCJjb25maXJtVXBkYXRlQnRuIiwidGV4dElucHV0IiwibmFtZWRJdGVtIiwibWVudGlvbnNTZWN0aW9uIiwibWVudGlvbnNJbnB1dCIsImJ1dHRvbnNNb2RlcyIsInNob3dNZW50aW9uc1NlY3Rpb24iLCJoaWRlTWVudGlvbnNTZWN0aW9uIiwiYnV0dG9uc1Zpc2liaWxpdHlNb2RlIiwiY2hpbGRyZW4iLCJkaXNwbGF5IiwidW5zYXZlZENvbW1lbnRzRGF0YSIsIm1haW5QYW5lbCIsImRpc2FibGVGb3JtIiwiZGlzYWJsZWQiLCJlbmFibGVGb3JtIiwidmlld0NvbW1lbnQiLCJjb21tZW50IiwiZmlsbElucHV0cyIsIm9uY2hhbmdlIiwidXBkYXRlQ29tbWVudCIsImdldFNlbGVjdGVkTWVtYmVycyIsInNlbGVjdGVkT3B0aW9ucyIsIm1lbnRpb25FbWFpbCIsInBlcm1pc3Npb24iLCJkaXNwbGF5TmFtZSIsImlubmVySFRNTCIsInByb2plY3REYXRhIiwiQXBwIiwiYXBwZW5kZWREcmF3aW5nc0lkcyIsImVsZW1lbnRzQ29tbWVudHMiLCJwcm9qZWN0c0xpc3RCdG4iLCJkcmF3aW5nc0J0bnMiLCJzYXZlQnRuIiwiY3JlYXRlRHJhd2luZ3NCdG5zIiwidG9vbGJhcnNDb250YWluZXIiLCJwcm9wc1RhYmxlc0NvbnRhaW5lciIsInBhcmFtc1RhYmxlc0NvbnRhaW5lciIsImNvbW1lbnREYXRhIiwiY29tbWVudE9iaiIsImNvbW1lbnRzQ2hhbmdlZCIsIk1haW5QYW5lbCIsImNvbW1lbnRGb3JtIiwiZHJhd2luZ3NDb250YWluZXIiLCJ3b3Jrc3BhY2VzQ29udGFpbmVyIiwibWFuYWdlVG9vbHMiLCJUb29sIiwiYWN0aXZlRHJhd2luZyIsImFjdGl2ZVRvb2wiLCJjdXJyZW50VGFyZ2V0IiwiY29tbWVudHNDaGFuZ2VzVW5zYXZlZCIsInNldERyYXdpbmciLCJjdXJyZW50U2VsZWN0aW9uIiwicmVtb3ZlRHJhd2luZ1NlbGVjdGlvbkFwcGVhcmFuY2UiLCJ2aXNpYmlsaXR5IiwiaW5jbHVkZXMiLCJncm91cENyZWF0ZWQiLCJlbGVtc0ZvckNvbW1lbnRSZXByZXNlbnRhdGlvbiIsImFkZERyYXdpbmdTZWxlY3Rpb25BcHBlYXJhbmNlIiwiZHJhd2luZ3NJdGVtcyIsImRyYXdpbmdzU3R5bGVzVGFnIiwidG9vbEJ0biIsIm11bHRpcGxlU2VsZWN0aW9uIiwibWF4UHhPZmZzZXRUb0NoZWNrIiwibWFuYWdlU2VsZWN0aW9uIiwic2VsZWN0aW9uIiwiY29vcmRzIiwiZ2VuZXJpY3MiLCJvdXRsb29wIiwicG9pbnRzIiwiZWwiLCJlbGVtZW50RnJvbVBvaW50Iiwic2VsZWN0IiwiZGVzZWxlY3QiLCJjbGVhckFsbFNlbGVjdGlvbiIsImFkZFNlbGVjdGlvbkFwcGVhcmFuY2UiLCJlbGVtZW50SWQiLCJjbGVhclNlbGVjdGlvbkFwcGVhcmFuY2UiLCJnZXREcmF3aW5nU2VsZWN0ZWRFbGVtZW50c1JlZnMiLCJzZWxlY3RlZEVsZW1lbnRzIiwid2FpdGluZ0ZvckNvbW1lbnQiLCJoYXNVc2VkUGFuZWwiLCJjYW5jZWxDb21tZW50IiwiZ2V0Q3VycmVudFVzZXIiLCJtZW1iZXIiLCJhZGRDb21tZW50Iiwic2VsZWN0ZWRFbWFpbHMiLCJjdXJyZW50VXNlck5hbWUiLCJjdXJyZW50VXNlclBob3RvIiwicGVuZGluZ05vdGlmaWNhdGlvbnNUb1NlbmQiLCJ1c2VyTmFtZSIsInVzZXJQaG90byIsInRleHRDb250ZW50Iiwic2VsRWxlbWVudHNSZWYiLCJzaG93RWxlbWVudERhdGEiLCJjYXRlZ29yeSIsImN1cnJlbnRFbGVtZW50RGF0YSIsImNhdGVnb3J5RGF0YSIsImNyZWF0ZURhdGFUYWJsZSIsInBhcmFtZXRlcnMiLCJkYXRhRW50cmllcyIsImNhdGVnb3JpZXNUaXRsZXMiLCJkYXRhQnlDYXRlZ29yaWVzIiwiY2F0ZWdvcnlJbmRleCIsInRhYmxlUm93IiwiZGF0YVRhYmxlIiwic2hhcmVQcm9qZWN0Q29udGFpbmVyIiwicGVuZGluZ1RvUmVtb3ZlIiwicGVuZGluZ1RvQWRkIiwiaHRtbENvbnRhaW5lciIsInNoYXJlRm9ybSIsInNoYXJlRm9ybUVycm9yTXNnIiwiY29uZmlybUNoYW5nZXNCdG5zIiwic2F2ZUNoYW5nZXNCdG4iLCJjYW5jZWxDaGFuZ2VzQnRuIiwid2FpdGluZ0FuaW1hdGlvbiIsImN1cnJlbnRVc2Vyc0NvbnRlbnQiLCJjdXJyZW50VXNlcnNUYWJsZSIsInBlbmRpbmdVc2Vyc0NvbnRlbnQiLCJwZW5kaW5nVXNlcnNUb0FkZFRhYmxlIiwic2hhcmVOb3RpZmljYXRpb25Db250YWluZXIiLCJzaGFyZU5vdGlmaWNhdGlvbklucHV0IiwicHJvamVjdHNMaXN0IiwiYWN0aW9uQnRuIiwic3RhZ2VNZW1iZXJUb1JlbW92ZSIsInBhcmVudEVsZW1lbnQiLCJ1bnN0YWdlTWVtYmVyVG9SZW1vdmUiLCJ1bnN0YWdlTWVtYmVyVG9BZGQiLCJzYXZlQ2hhbmdlcyIsInN0YWdlTWVtYmVyVG9BZGQiLCJzZXRVcERpYWxvZyIsInByb2plY3RJdGVtIiwic2hhcmVkIiwicm9sZSIsImluc2VydEFkamFjZW50SFRNTCIsImNoZWNrZWQiLCJjbG9zZU1vZGFsRGlhbG9nIiwiaXRlbUluZGV4IiwiZW1haWwiLCJhZGRTdGFnZWRNZW1iZXJzIiwiYWRkTWVtYmVyc1Byb21pc2VzIiwic2hhcmVGaWxlIiwicmVtb3ZlU3RhZ2VkTWVtYmVycyIsInJlbW92ZU1lbWJlcnNQcm9taXNlcyIsInN0b3BTaGFyaW5nRmlsZSIsImFkZGl0aW9uU3VjY2VzcyIsInJlbW92YWxTdWNjZXNzIiwicmVzQXJyIiwic2VuZFNoYXJpbmdQcm9qZWN0RW1haWwiLCJzYXZlTWVzc2FnaW5nRGV2aWNlVG9rZW4iLCJzaG93TWVzc2FnZSIsIm5vdGlmaWNhdGlvbnMiLCJub3RpZmljYXRpb25zQnRuIiwibm90aWZpY2F0aW9uc0NvbnRhaW5lciIsIm5vdGlmaWNhdGlvbnNMaXN0IiwidG9nZ2xlIiwidmlld05vdGlmaWNhdGlvbiIsImNyZWF0ZU5vdGlmaWNhY3Rpb24iLCJub3RpZmljYXRpb25FbGVtZW50Iiwibm90aWZpY2F0aW9uSWQiLCJwcmVwZW5kIiwiZGVsZXRlTm90aWZpY2FjdGlvbiIsIm5vdGlmaWNhdGlvbiIsInJlbmFtZVByb2plY3RDb250YWluZXIiLCJlbXB0eUlucHV0VmFsdWUiLCJyZW5hbWVGb3JtIiwicmVuYW1lUHJvamVjdEVycm9yTXNnIiwiY2FuY2VsQnRuIiwicmVuYW1lUHJvamVjdCIsInNldElucHV0VmFsdWUiLCJwcm9qZWN0TGlzdEl0ZW0iLCJwcm9qSWQiLCJjdXJyZW50TmFtZSIsInJlbmFtZUZpbGUiLCJwcm9qZWN0UmVuYW1lZFJlcyIsInZpc2libGUiLCJIVE1MQ29udGFpbmVyIiwibWVudUxpc3RDb250YWluZXIiLCJ0b2dnbGVNZW51IiwidGFyZ2V0RWxlbWVudCIsImNsZWFyTWVudSIsImdlbmVyYXRlTWVudSIsImNvbnRleHRNZW51RGF0YSIsInNldFBvc2l0aW9uIiwiY29tbWFuZCIsInRvcCIsIml0ZW1zQ29udGFpbmVyIiwiRG9jdW1lbnRGcmFnbWVudCIsInByb2pJdGVtQ29udGVudCIsImN4bWVudSIsInNob3dWaWV3cG9ydERpYWxvZyIsImZ1bmN0aW9uIiwiZGVsZXRlRmlsZSIsInByb2pJbmRleCIsImhpZGVWaWV3cG9ydE1lc3NhZ2UiLCJzaGFyZVByb2plY3REaWFsb2ciLCJzaG93TW9kYWxEaWFsb2ciLCJtb2RhbERpYWxvZ0NvbnRhaW5lciIsInJlbmFtZVByb2plY3REaWFsb2ciLCJ1c2VySW5mb0NvbnRhaW5lciIsIm1vZGFsRGlhbG9nQ29udGVudCIsIm1vZGFsRGlhbG9nc1N0b3JhZ2UiLCJjbG9zZU1vZGFsQnRuIiwidmlld3BvcnRNZXNzYWdlIiwicHJvamVjdHNMaXN0Q29udGFpbmVyIiwiY2xvc2VQcm9qZWN0c0xpc3RCdG4iLCJzYXZlQ29tbWVudHNEYXRhIiwiY2xvc2VQcm9qZWN0c0xpc3QiLCJvcGVuUHJvamVjdHNMaXN0IiwiZ29Ub1Byb2plY3QiLCJ1cGxvYWRGaWxlRm9ybSIsImZpbGVJbnB1dCIsInN1Ym1pdEZpbGVCdG4iLCJuZXh0RWxlbWVudFNpYmxpbmciLCJjcmVhdGVQcm9qZWN0IiwidXBkYXRlUHJvamVjdHNMaXN0IiwibWVzc2FnZUNvbnRhaW5lciIsImNsb3NlTWVzc2FnZSIsIm9ucmVzaXplIiwiYWRqdXN0SXRlbXMiLCJjdXJyZW50V29ya3NwYWNlIiwibm90aWZpY2F0aW9uc01hbmFnZXIiLCJjb250ZXh0TWVudSIsInNldFVzZXJJbmZvIiwidXNlckluZm8iLCJnZXRVc2VySW5mbyIsInVzZXJJbmZvUmVzIiwic2F2aW5nU3VjY2Vzc2Z1bCIsImpzb25EYXRhVG9TYXZlIiwiY29tbWVudHNGaWxlQ3JlYXRpb25SZXMiLCJ1cGRhdGVGaWxlQ29udGVudCIsImNvbW1lbnRzRmlsZVVwZGF0ZVJlcyIsIm5vdGlmaWNhdGlvblByb21pc2UiLCJzZW5kTm90aWZpY2F0aW9uIiwib3BlblByb2plY3QiLCJwcmV2aW91c0FjdGl2ZUl0ZW0iLCJmZXRjaFByb2plY3QiLCJwcm9qZWN0IiwiaGlzdG9yeSIsInJlcGxhY2VTdGF0ZSIsInByb2plY3RUaXRsZSIsImxpc3RQcm9qZWN0SXRlbXMiLCJjcmVhdGVIVE1MUHJvamVjdHNMaXN0IiwicHJvakRhdGEiLCJpdGVtc0giLCJnZXRDb21wdXRlZFN0eWxlIiwiZ2V0UHJvcGVydHlWYWx1ZSIsIml0ZW1zVG90YWwiLCJjZWlsIiwidGltZXIiLCJtZXNzYWdlVGltZXJJZCIsImFjdGlvbnMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiaW5uZXJDb250YWluZXIiLCJiYWNrZ3JvdW5kIiwiY2xvc2FibGUiLCJmaXJzdEVsZW1lbnRDaGlsZCIsInBhZ2UiLCJ0aGVyZUlzTWVzc2FnaW5nIiwiUEVORElOR19USU1FT1VUX01TIiwiUEFDS0FHRV9WRVJTSU9OIiwiSU5URVJOQUxfQVVUSF9WRVJTSU9OIiwiSU5TVEFMTEFUSU9OU19BUElfVVJMIiwiVE9LRU5fRVhQSVJBVElPTl9CVUZGRVIiLCJFUlJPUl9ERVNDUklQVElPTl9NQVAiLCJpc1NlcnZlckVycm9yIiwiZ2V0SW5zdGFsbGF0aW9uc0VuZHBvaW50IiwiZXh0cmFjdEF1dGhUb2tlbkluZm9Gcm9tUmVzcG9uc2UiLCJyZXF1ZXN0U3RhdHVzIiwiZXhwaXJlc0luIiwicmVzcG9uc2VFeHBpcmVzSW4iLCJjcmVhdGlvblRpbWUiLCJnZXRFcnJvckZyb21SZXNwb25zZSIsInJlcXVlc3ROYW1lIiwicmVzcG9uc2VKc29uIiwiZXJyb3JEYXRhIiwic2VydmVyQ29kZSIsInNlcnZlck1lc3NhZ2UiLCJzZXJ2ZXJTdGF0dXMiLCJnZXRIZWFkZXJzIiwiYXBpS2V5IiwiQWNjZXB0IiwiZ2V0SGVhZGVyc1dpdGhBdXRoIiwiYXBwQ29uZmlnIiwicmVmcmVzaFRva2VuIiwiZ2V0QXV0aG9yaXphdGlvbkhlYWRlciIsInJldHJ5SWZTZXJ2ZXJFcnJvciIsImNyZWF0ZUluc3RhbGxhdGlvblJlcXVlc3QiLCJmaWQiLCJlbmRwb2ludCIsInJlc3BvbnNlVmFsdWUiLCJhdXRoVmVyc2lvbiIsImFwcElkIiwicmVnaXN0cmF0aW9uU3RhdHVzIiwiYXV0aFRva2VuIiwic2xlZXAiLCJtcyIsIlZBTElEX0ZJRF9QQVRURVJOIiwiSU5WQUxJRF9GSUQiLCJnZW5lcmF0ZUZpZCIsImZpZEJ5dGVBcnJheSIsIm1zQ3J5cHRvIiwiREFUQUJBU0VfTkFNRSIsIkRBVEFCQVNFX1ZFUlNJT04iLCJPQkpFQ1RfU1RPUkVfTkFNRSIsImRiUHJvbWlzZSIsImdldERiUHJvbWlzZSIsInVwZ3JhZGVEQiIsInR4IiwiZ2V0S2V5IiwidXBkYXRlRm4iLCJvbGRWYWx1ZSIsImdldEluc3RhbGxhdGlvbkVudHJ5IiwicmVnaXN0cmF0aW9uUHJvbWlzZSIsImluc3RhbGxhdGlvbkVudHJ5Iiwib2xkRW50cnkiLCJjbGVhclRpbWVkT3V0UmVxdWVzdCIsInVwZGF0ZU9yQ3JlYXRlSW5zdGFsbGF0aW9uRW50cnkiLCJlbnRyeVdpdGhQcm9taXNlIiwib25MaW5lIiwicmVnaXN0cmF0aW9uUHJvbWlzZVdpdGhFcnJvciIsImluUHJvZ3Jlc3NFbnRyeSIsInJlZ2lzdHJhdGlvblRpbWUiLCJyZWdpc3RlcmVkSW5zdGFsbGF0aW9uRW50cnkiLCJyZWdpc3Rlckluc3RhbGxhdGlvbiIsIndhaXRVbnRpbEZpZFJlZ2lzdHJhdGlvbiIsInRyaWdnZXJSZWdpc3RyYXRpb25JZk5lY2Vzc2FyeSIsInVwZGF0ZUluc3RhbGxhdGlvblJlcXVlc3QiLCJnZW5lcmF0ZUF1dGhUb2tlblJlcXVlc3QiLCJwbGF0Zm9ybUxvZ2dlclByb3ZpZGVyIiwicGxhdGZvcm1Mb2dnZXIiLCJnZXRHZW5lcmF0ZUF1dGhUb2tlbkVuZHBvaW50IiwiaW5zdGFsbGF0aW9uIiwicmVmcmVzaEF1dGhUb2tlbiIsImRlcGVuZGVuY2llcyIsInRva2VuUHJvbWlzZSIsImlzRW50cnlSZWdpc3RlcmVkIiwib2xkQXV0aFRva2VuIiwiaXNBdXRoVG9rZW5FeHBpcmVkIiwiaXNBdXRoVG9rZW5WYWxpZCIsInVwZGF0ZUF1dGhUb2tlblJlcXVlc3QiLCJ3YWl0VW50aWxBdXRoVG9rZW5SZXF1ZXN0IiwiaW5Qcm9ncmVzc0F1dGhUb2tlbiIsInJlcXVlc3RUaW1lIiwibWFrZUF1dGhUb2tlblJlcXVlc3RJblByb2dyZXNzRW50cnkiLCJ1cGRhdGVkSW5zdGFsbGF0aW9uRW50cnkiLCJmZXRjaEF1dGhUb2tlbkZyb21TZXJ2ZXIiLCJjb21wbGV0ZUluc3RhbGxhdGlvblJlZ2lzdHJhdGlvbiIsImRlbGV0ZUluc3RhbGxhdGlvblJlcXVlc3QiLCJnZXREZWxldGVFbmRwb2ludCIsImdldE1pc3NpbmdWYWx1ZUVycm9yIiwidmFsdWVOYW1lIiwiY29uZmlnS2V5c18xIiwiY29uZmlnS2V5c18xXzEiLCJrZXlOYW1lIiwiZXh0cmFjdEFwcENvbmZpZyIsImdldElkIiwiZGVsZXRlSW5zdGFsbGF0aW9uIiwiR3RhZ0NvbW1hbmQiLCJFdmVudE5hbWUiLCJBTkFMWVRJQ1NfSURfRklFTEQiLCJHQV9GSURfS0VZIiwiT1JJR0lOX0tFWSIsIkdUQUdfVVJMIiwid3JhcE9yQ3JlYXRlR3RhZyIsImluaXRpYWxpemVkSWRQcm9taXNlc01hcCIsImRhdGFMYXllck5hbWUiLCJndGFnRnVuY3Rpb25OYW1lIiwiZ3RhZ0NvcmUiLCJfYXJncyIsImlkT3JOYW1lT3JQYXJhbXMiLCJndGFnUGFyYW1zIiwiRVZFTlQiLCJpbml0aWFsaXphdGlvblByb21pc2VzVG9XYWl0Rm9yIiwiZ2FTZW5kVG9MaXN0IiwiZ2FTZW5kVG9MaXN0XzEiLCJzZW5kVG9JZCIsImluaXRpYWxpemF0aW9uUHJvbWlzZSIsImlkUHJvbWlzZSIsIkNPTkZJRyIsIlNFVCIsIndyYXBHdGFnIiwid3JhcHBlZEd0YWciLCJndGFnQ29yZUZ1bmN0aW9uIiwid3JhcHBlZEd0YWdGdW5jdGlvbiIsImd0YWdOYW1lIiwiZ2xvYmFsSW5pdERvbmUiLCJpbnN0YWxsYXRpb25zIiwiYW5hbHl0aWNzSWQiLCJzY3JpcHRUYWdzIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJmaW5kR3RhZ1NjcmlwdE9uUGFnZSIsInNjcmlwdCIsImluc2VydFNjcmlwdFRhZyIsImRhdGFMYXllciIsImdldE9yQ3JlYXRlRGF0YUxheWVyIiwiaW5pdGlhbGl6ZUdBSWQiLCJsb2dFdmVudCIsImV2ZW50TmFtZSIsImV2ZW50UGFyYW1zIiwiZ3RhZ0Z1bmN0aW9uIiwic2V0Q3VycmVudFNjcmVlbiIsInNjcmVlbk5hbWUiLCJzZXRVc2VySWQiLCJzZXRVc2VyUHJvcGVydGllcyIsImZsYXRQcm9wZXJ0aWVzIiwic2V0QW5hbHl0aWNzQ29sbGVjdGlvbkVuYWJsZWQiLCJlbmFibGVkIiwiQU5BTFlUSUNTX1RZUEUiLCJyZWdpc3RlckFuYWx5dGljcyIsIk1lc3NhZ2VUeXBlIiwiRVJST1JfTUFQIiwiZXJyb3JGYWN0b3J5IiwiREVGQVVMVF9QVUJMSUNfVkFQSURfS0VZIiwiRU5EUE9JTlQiLCJpc0FycmF5QnVmZmVyRXF1YWwiLCJieXRlTGVuZ3RoIiwidmlld0EiLCJEYXRhVmlldyIsInZpZXdCIiwiZ2V0VWludDgiLCJhcnJheUJ1ZmZlclRvQmFzZTY0IiwiYXJyYXlCdWZmZXIiLCJ1aW50OFZlcnNpb24iLCJTdWJzY3JpcHRpb25NYW5hZ2VyIiwic3Vic2NyaXB0aW9uIiwidmFwaWRLZXkiLCJzdWJzY3JpYmVPcHRpb25zIiwicmVzcG9uc2VEYXRhIiwiZXJyXzEiLCJnZXRCb2R5IiwiZ2V0RW5kcG9pbnQiLCJlcnJvckluZm8iLCJ1cGRhdGVUb2tlbiIsInRva2VuRGV0YWlscyIsInVwZGF0ZU9wdGlvbnMiLCJlcnJfMiIsImZjbVRva2VuIiwiZGVsZXRlVG9rZW4iLCJ1bnN1YnNjcmliZU9wdGlvbnMiLCJlcnJfMyIsInAyNTZkaCIsIndlYiIsImFwcGxpY2F0aW9uUHViS2V5IiwiYmFzZTY0VG9BcnJheUJ1ZmZlciIsImJhc2U2NFN0cmluZyIsInJlcGVhdCIsInJhd0RhdGEiLCJvdXRwdXRBcnJheSIsIk9MRF9EQl9OQU1FIiwiT0xEX09CSkVDVF9TVE9SRV9OQU1FIiwiY2xlYW5WMSIsIl9ldmVudCIsInN1YnNjcmlwdGlvbk1hbmFnZXIiLCJvcGVuQ3Vyc29yUmVxdWVzdCIsImhhbmRsZURiIiwiRGJJbnRlcmZhY2UiLCJnZXRJbmRleCIsImNsb3NlRGF0YWJhc2UiLCJydW5SZXF1ZXN0IiwiZ2V0RGIiLCJvYmplY3RTdG9yZU5hbWUiLCJwcm9taXNpZnkiLCJkYlZlcnNpb24iLCJvbkRiVXBncmFkZSIsIlRva2VuRGV0YWlsc01vZGVsIiwiY3Vyc29yUmVxdWVzdF8xIiwiY3JlYXRlVGltZSIsImZjbVB1c2hTZXQiLCJjdXJzb3JSZXF1ZXN0XzIiLCJnZXRUb2tlbkRldGFpbHNGcm9tVG9rZW4iLCJ2YWxpZGF0ZUlucHV0cyIsImdldFRva2VuRGV0YWlsc0Zyb21TV1Njb3BlIiwic3dTY29wZSIsInNhdmVUb2tlbkRldGFpbHMiLCJmY21TZW5kZXJJZCIsIkFycmF5QnVmZmVyIiwiVmFwaWREZXRhaWxzTW9kZWwiLCJnZXRWYXBpZEZyb21TV1Njb3BlIiwic2F2ZVZhcGlkRGV0YWlscyIsImRlbGV0ZVZhcGlkRGV0YWlscyIsIkJhc2VDb250cm9sbGVyIiwidmFwaWREZXRhaWxzTW9kZWwiLCJtZXNzYWdpbmdTZW5kZXJJZCIsInRva2VuRGV0YWlsc01vZGVsIiwic3dSZWciLCJwdWJsaWNWYXBpZEtleSIsInB1c2hTdWJzY3JpcHRpb24iLCJnZXROb3RpZmljYXRpb25QZXJtaXNzaW9uIiwicmVxdWVzdE5vdGlmaWNhdGlvblBlcm1pc3Npb24iLCJnZXRTV1JlZ2lzdHJhdGlvbl8iLCJnZXRQdWJsaWNWYXBpZEtleV8iLCJnZXRQdXNoU3Vic2NyaXB0aW9uIiwic2NvcGUiLCJtYW5hZ2VFeGlzdGluZ1Rva2VuIiwiZ2V0TmV3VG9rZW4iLCJpc0VuZHBvaW50RXF1YWwiLCJpc0F1dGhFcXVhbCIsImlzUDI1NmRoRXF1YWwiLCJpc1Rva2VuU3RpbGxWYWxpZCIsImRlbGV0ZVRva2VuRnJvbURCIiwidXBkYXRlZFRva2VuIiwiYWxsRGV0YWlscyIsIm5ld1Rva2VuIiwicmVnaXN0cmF0aW9uIiwicHVzaE1hbmFnZXIiLCJnZXRTdWJzY3JpcHRpb24iLCJ1bnN1YnNjcmliZSIsImVfMiIsInN3UmVnaXN0cmF0aW9uIiwidXNlclZpc2libGVPbmx5IiwiYXBwbGljYXRpb25TZXJ2ZXJLZXkiLCJyZXF1ZXN0UGVybWlzc2lvbiIsInVzZVNlcnZpY2VXb3JrZXIiLCJfcmVnaXN0cmF0aW9uIiwidXNlUHVibGljVmFwaWRLZXkiLCJfYjY0UHVibGljS2V5IiwiX25leHRPck9ic2VydmVyIiwiX2Vycm9yIiwiX2NvbXBsZXRlZCIsIm9uVG9rZW5SZWZyZXNoIiwic2V0QmFja2dyb3VuZE1lc3NhZ2VIYW5kbGVyIiwiX2NhbGxiYWNrIiwiTm90aWZpY2F0aW9uIiwiZ2V0VG9rZW5EZXRhaWxzTW9kZWwiLCJnZXRWYXBpZERldGFpbHNNb2RlbCIsImdldFN1YnNjcmlwdGlvbk1hbmFnZXIiLCJTd0NvbnRyb2xsZXIiLCJiZ01lc3NhZ2VIYW5kbGVyIiwib25QdXNoIiwib25TdWJDaGFuZ2UiLCJvbk5vdGlmaWNhdGlvbkNsaWNrIiwid2FpdFVudGlsIiwib25QdXNoXyIsIm9uU3ViQ2hhbmdlXyIsIm9uTm90aWZpY2F0aW9uQ2xpY2tfIiwibXNnUGF5bG9hZCIsIm5vdGlmaWNhdGlvbkRldGFpbHMiLCJub3RpZmljYXRpb25UaXRsZSIsInJlZyIsIm1heEFjdGlvbnMiLCJoYXNWaXNpYmxlQ2xpZW50c18iLCJzZW5kTWVzc2FnZVRvV2luZG93Q2xpZW50c18iLCJnZXROb3RpZmljYXRpb25EYXRhXyIsInNob3dOb3RpZmljYXRpb24iLCJsaW5rIiwid2luZG93Q2xpZW50IiwiaW50ZXJuYWxNc2ciLCJzdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24iLCJmY21PcHRpb25zIiwiY2xpY2tfYWN0aW9uIiwib3JpZ2luIiwiZ2V0V2luZG93Q2xpZW50XyIsIm9wZW5XaW5kb3ciLCJmb2N1cyIsImNyZWF0ZU5ld01zZyIsIk5PVElGSUNBVElPTl9DTElDS0VEIiwiYXR0ZW1wdFRvTWVzc2FnZUNsaWVudF8iLCJub3RpZmljYXRpb25JbmZvcm1hdGlvbiIsInBhcnNlZFVSTCIsImNsaWVudExpc3QiLCJzdWl0YWJsZUNsaWVudCIsIlVSTCIsImdldENsaWVudExpc3QiLCJwb3N0TWVzc2FnZSIsIlBVU0hfTVNHX1JFQ0VJVkVEIiwidmFwaWRLZXlGcm9tRGF0YWJhc2UiLCJtYXRjaEFsbCIsImluY2x1ZGVVbmNvbnRyb2xsZWQiLCJtc2dUeXBlIiwiZmlyZWJhc2VNZXNzYWdpbmdUeXBlIiwiZmlyZWJhc2VNZXNzYWdpbmdEYXRhIiwiV2luZG93Q29udHJvbGxlciIsInJlZ2lzdHJhdGlvblRvVXNlIiwicHVibGljVmFwaWRLZXlUb1VzZSIsIm1lc3NhZ2VPYnNlcnZlciIsInRva2VuUmVmcmVzaE9ic2VydmVyIiwib25NZXNzYWdlSW50ZXJuYWwiLCJvblRva2VuUmVmcmVzaEludGVybmFsIiwic2V0dXBTV01lc3NhZ2VMaXN0ZW5lcl8iLCJwZXJtaXNzaW9uUmVzdWx0IiwiU2VydmljZVdvcmtlclJlZ2lzdHJhdGlvbiIsInB1YmxpY0tleSIsInBhcnNlZEtleSIsImNvbXBsZXRlZCIsIndhaXRGb3JSZWdpc3RyYXRpb25Ub0FjdGl2YXRlXyIsInNlcnZpY2VXb3JrZXIiLCJpbnN0YWxsaW5nIiwid2FpdGluZyIsInN0YXRlQ2hhbmdlTGlzdGVuZXIiLCJyZWdpc3RlciIsImJyb3dzZXJFcnJvck1lc3NhZ2UiLCJldmVudFR5cGUiLCJtZXNzYWdlVHlwZSIsImdldEV2ZW50VHlwZSIsImFuYWx5dGljc1Byb3ZpZGVyIiwibWVzc2FnZV9uYW1lIiwibWVzc2FnZV9pZCIsIm1lc3NhZ2VfdGltZSIsIm1lc3NhZ2VfZGV2aWNlX3RpbWUiLCJpc1N1cHBvcnRlZCIsIlB1c2hTdWJzY3JpcHRpb24iLCJjb29raWVFbmFibGVkIiwibmFtZXNwYWNlRXhwb3J0cyIsImZpcmViYXNlU2VydmljZXMiLCJyZWdpc3Rlck1lc3NhZ2luZyIsImF1dGhEb21haW4iLCJkYXRhYmFzZVVSTCIsInN0b3JhZ2VCdWNrZXQiLCJtZXNzYWdpbmciLCJwYXlsb2FkIiwicmVmcmVzaGVkVG9rZW4iLCJnZXRNZXNzYWdpbmdUb2tlbiIsInNlc3Npb25TdG9yYWdlIiwicmVxdWVzdE5vdGlmaWNhdGlvbnNQZXJtaXNzaW9ucyIsIk1zZyIsIkJyb2FkY2FzdENoYW5uZWwiLCJvbm1lc3NhZ2UiLCJsb2dpblBhZ2UiLCJBUElfS0VZIiwiQ0xJRU5UX0lEIiwiRElTQ09WRVJZX0RPQ1MiLCJTQ09QRVMiLCJhdXRob3JpemVCdXR0b24iLCJzaWdub3V0QnV0dG9uIiwiaW5pdENsaWVudCIsImluaXQiLCJkaXNjb3ZlcnlEb2NzIiwiYXV0aDIiLCJnZXRBdXRoSW5zdGFuY2UiLCJpc1NpZ25lZEluIiwidXBkYXRlU2lnbmluU3RhdHVzIiwiaGFuZGxlQXV0aENsaWNrIiwiaGFuZGxlU2lnbm91dENsaWNrIiwic2lnbkluIiwic2lnbk91dCIsImRlZmVyIiwibG9hZCIsImN1cnJlbnREcmF3aW5nQnRuIiwiZGVmZXJyZWRJbnN0YWxsUHJvbXB0IiwiaW5zdGFsbEJ1dHRvbiIsInByb21wdCIsImhpZGRlbiIsInVzZXJDaG9pY2UiLCJjaG9pY2UiLCJvdXRjb21lIiwiZHJhd2luZ0lkIiwicmVxdWVzdGVkRHJhd2luZyIsInN0eWxlc1JlcyIsInN0eWxlVGFnIiwiZHJvcGRvd25zIiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsInNpZGVOYXZUb2dnbGUiXSwibWFwcGluZ3MiOiJhQUNFLElBQUlBLEVBQW1CLEdBR3ZCLFNBQVNDLEVBQW9CQyxHQUc1QixHQUFHRixFQUFpQkUsR0FDbkIsT0FBT0YsRUFBaUJFLEdBQVVDLFFBR25DLElBQUlDLEVBQVNKLEVBQWlCRSxHQUFZLENBQ3pDRyxFQUFHSCxFQUNISSxHQUFHLEVBQ0hILFFBQVMsSUFVVixPQU5BSSxFQUFRTCxHQUFVTSxLQUFLSixFQUFPRCxRQUFTQyxFQUFRQSxFQUFPRCxRQUFTRixHQUcvREcsRUFBT0UsR0FBSSxFQUdKRixFQUFPRCxRQUtmRixFQUFvQlEsRUFBSUYsRUFHeEJOLEVBQW9CUyxFQUFJVixFQUd4QkMsRUFBb0JVLEVBQUksU0FBU1IsRUFBU1MsRUFBTUMsR0FDM0NaLEVBQW9CYSxFQUFFWCxFQUFTUyxJQUNsQ0csT0FBT0MsZUFBZWIsRUFBU1MsRUFBTSxDQUFFSyxZQUFZLEVBQU1DLElBQUtMLEtBS2hFWixFQUFvQmtCLEVBQUksU0FBU2hCLEdBQ1gsb0JBQVhpQixRQUEwQkEsT0FBT0MsYUFDMUNOLE9BQU9DLGVBQWViLEVBQVNpQixPQUFPQyxZQUFhLENBQUVDLE1BQU8sV0FFN0RQLE9BQU9DLGVBQWViLEVBQVMsYUFBYyxDQUFFbUIsT0FBTyxLQVF2RHJCLEVBQW9Cc0IsRUFBSSxTQUFTRCxFQUFPRSxHQUV2QyxHQURVLEVBQVBBLElBQVVGLEVBQVFyQixFQUFvQnFCLElBQy9CLEVBQVBFLEVBQVUsT0FBT0YsRUFDcEIsR0FBVyxFQUFQRSxHQUE4QixpQkFBVkYsR0FBc0JBLEdBQVNBLEVBQU1HLFdBQVksT0FBT0gsRUFDaEYsSUFBSUksRUFBS1gsT0FBT1ksT0FBTyxNQUd2QixHQUZBMUIsRUFBb0JrQixFQUFFTyxHQUN0QlgsT0FBT0MsZUFBZVUsRUFBSSxVQUFXLENBQUVULFlBQVksRUFBTUssTUFBT0EsSUFDdEQsRUFBUEUsR0FBNEIsaUJBQVRGLEVBQW1CLElBQUksSUFBSU0sS0FBT04sRUFBT3JCLEVBQW9CVSxFQUFFZSxFQUFJRSxFQUFLLFNBQVNBLEdBQU8sT0FBT04sRUFBTU0sSUFBUUMsS0FBSyxLQUFNRCxJQUM5SSxPQUFPRixHQUlSekIsRUFBb0I2QixFQUFJLFNBQVMxQixHQUNoQyxJQUFJUyxFQUFTVCxHQUFVQSxFQUFPcUIsV0FDN0IsV0FBd0IsT0FBT3JCLEVBQWdCLFNBQy9DLFdBQThCLE9BQU9BLEdBRXRDLE9BREFILEVBQW9CVSxFQUFFRSxFQUFRLElBQUtBLEdBQzVCQSxHQUlSWixFQUFvQmEsRUFBSSxTQUFTaUIsRUFBUUMsR0FBWSxPQUFPakIsT0FBT2tCLFVBQVVDLGVBQWUxQixLQUFLdUIsRUFBUUMsSUFHekcvQixFQUFvQmtDLEVBQUksR0FJakJsQyxFQUFvQkEsRUFBb0JtQyxFQUFJLEksK0JDbEZyRDs7Ozs7Ozs7Ozs7Ozs7O0FBZ0JBLElBQUlDLEVBQWdCLFNBQVMxQixFQUFHMkIsR0FJNUIsT0FIQUQsRUFBZ0J0QixPQUFPd0IsZ0JBQ2xCLENBQUVDLFVBQVcsY0FBZ0JDLE9BQVMsU0FBVTlCLEVBQUcyQixHQUFLM0IsRUFBRTZCLFVBQVlGLElBQ3ZFLFNBQVUzQixFQUFHMkIsR0FBSyxJQUFLLElBQUlILEtBQUtHLEVBQU9BLEVBQUVKLGVBQWVDLEtBQUl4QixFQUFFd0IsR0FBS0csRUFBRUgsTUFDcER4QixFQUFHMkIsSUFHckIsU0FBU0ksRUFBVS9CLEVBQUcyQixHQUV6QixTQUFTSyxJQUFPQyxLQUFLQyxZQUFjbEMsRUFEbkMwQixFQUFjMUIsRUFBRzJCLEdBRWpCM0IsRUFBRXNCLFVBQWtCLE9BQU5LLEVBQWF2QixPQUFPWSxPQUFPVyxJQUFNSyxFQUFHVixVQUFZSyxFQUFFTCxVQUFXLElBQUlVLEdBRzVFLElBQUlHLEVBQVcsV0FRbEIsT0FQQUEsRUFBVy9CLE9BQU9nQyxRQUFVLFNBQWtCeEIsR0FDMUMsSUFBSyxJQUFJYSxFQUFHL0IsRUFBSSxFQUFHeUIsRUFBSWtCLFVBQVVDLE9BQVE1QyxFQUFJeUIsRUFBR3pCLElBRTVDLElBQUssSUFBSThCLEtBRFRDLEVBQUlZLFVBQVUzQyxHQUNPVSxPQUFPa0IsVUFBVUMsZUFBZTFCLEtBQUs0QixFQUFHRCxLQUFJWixFQUFFWSxHQUFLQyxFQUFFRCxJQUU5RSxPQUFPWixJQUVLMkIsTUFBTU4sS0FBTUksWUFHekIsU0FBU0csRUFBT2YsRUFBR2dCLEdBQ3RCLElBQUk3QixFQUFJLEdBQ1IsSUFBSyxJQUFJWSxLQUFLQyxFQUFPckIsT0FBT2tCLFVBQVVDLGVBQWUxQixLQUFLNEIsRUFBR0QsSUFBTWlCLEVBQUVDLFFBQVFsQixHQUFLLElBQzlFWixFQUFFWSxHQUFLQyxFQUFFRCxJQUNiLEdBQVMsTUFBTEMsR0FBcUQsbUJBQWpDckIsT0FBT3VDLHNCQUN0QixLQUFJakQsRUFBSSxFQUFiLElBQWdCOEIsRUFBSXBCLE9BQU91QyxzQkFBc0JsQixHQUFJL0IsRUFBSThCLEVBQUVjLE9BQVE1QyxJQUMzRCtDLEVBQUVDLFFBQVFsQixFQUFFOUIsSUFBTSxHQUFLVSxPQUFPa0IsVUFBVXNCLHFCQUFxQi9DLEtBQUs0QixFQUFHRCxFQUFFOUIsTUFDdkVrQixFQUFFWSxFQUFFOUIsSUFBTStCLEVBQUVELEVBQUU5QixLQUUxQixPQUFPa0IsRUFHSixTQUFTaUMsRUFBV0MsRUFBWUMsRUFBUTlCLEVBQUsrQixHQUNoRCxJQUEySGhELEVBQXZIRCxFQUFJc0MsVUFBVUMsT0FBUTlCLEVBQUlULEVBQUksRUFBSWdELEVBQWtCLE9BQVRDLEVBQWdCQSxFQUFPNUMsT0FBTzZDLHlCQUF5QkYsRUFBUTlCLEdBQU8rQixFQUNySCxHQUF1QixpQkFBWkUsU0FBb0QsbUJBQXJCQSxRQUFRQyxTQUF5QjNDLEVBQUkwQyxRQUFRQyxTQUFTTCxFQUFZQyxFQUFROUIsRUFBSytCLFFBQ3BILElBQUssSUFBSXRELEVBQUlvRCxFQUFXUixPQUFTLEVBQUc1QyxHQUFLLEVBQUdBLEtBQVNNLEVBQUk4QyxFQUFXcEQsTUFBSWMsR0FBS1QsRUFBSSxFQUFJQyxFQUFFUSxHQUFLVCxFQUFJLEVBQUlDLEVBQUUrQyxFQUFROUIsRUFBS1QsR0FBS1IsRUFBRStDLEVBQVE5QixLQUFTVCxHQUNoSixPQUFPVCxFQUFJLEdBQUtTLEdBQUtKLE9BQU9DLGVBQWUwQyxFQUFROUIsRUFBS1QsR0FBSUEsRUFHekQsU0FBUzRDLEVBQVFDLEVBQVlDLEdBQ2hDLE9BQU8sU0FBVVAsRUFBUTlCLEdBQU9xQyxFQUFVUCxFQUFROUIsRUFBS29DLElBR3BELFNBQVNFLEVBQVdDLEVBQWFDLEdBQ3BDLEdBQXVCLGlCQUFaUCxTQUFvRCxtQkFBckJBLFFBQVFRLFNBQXlCLE9BQU9SLFFBQVFRLFNBQVNGLEVBQWFDLEdBRzdHLFNBQVNFLEVBQVVDLEVBQVNDLEVBQVlDLEVBQUdDLEdBQzlDLE9BQU8sSUFBS0QsSUFBTUEsRUFBSUUsV0FBVSxTQUFVQyxFQUFTQyxHQUMvQyxTQUFTQyxFQUFVeEQsR0FBUyxJQUFNeUQsRUFBS0wsRUFBVU0sS0FBSzFELElBQVcsTUFBTzhCLEdBQUt5QixFQUFPekIsSUFDcEYsU0FBUzZCLEVBQVMzRCxHQUFTLElBQU15RCxFQUFLTCxFQUFpQixNQUFFcEQsSUFBVyxNQUFPOEIsR0FBS3lCLEVBQU96QixJQUN2RixTQUFTMkIsRUFBS0csR0FBVUEsRUFBT0MsS0FBT1AsRUFBUU0sRUFBTzVELE9BQVMsSUFBSW1ELEdBQUUsU0FBVUcsR0FBV0EsRUFBUU0sRUFBTzVELFVBQVc4RCxLQUFLTixFQUFXRyxHQUNuSUYsR0FBTUwsRUFBWUEsRUFBVXhCLE1BQU1xQixFQUFTQyxHQUFjLEtBQUtRLFdBSS9ELFNBQVNLLEVBQVlkLEVBQVNlLEdBQ2pDLElBQXNHQyxFQUFHQyxFQUFHakUsRUFBR2tFLEVBQTNHQyxFQUFJLENBQUVDLE1BQU8sRUFBR0MsS0FBTSxXQUFhLEdBQVcsRUFBUHJFLEVBQUUsR0FBUSxNQUFNQSxFQUFFLEdBQUksT0FBT0EsRUFBRSxJQUFPc0UsS0FBTSxHQUFJQyxJQUFLLElBQ2hHLE9BQU9MLEVBQUksQ0FBRVQsS0FBTWUsRUFBSyxHQUFJLE1BQVNBLEVBQUssR0FBSSxPQUFVQSxFQUFLLElBQXdCLG1CQUFYM0UsU0FBMEJxRSxFQUFFckUsT0FBTzRFLFVBQVksV0FBYSxPQUFPcEQsT0FBVTZDLEVBQ3ZKLFNBQVNNLEVBQUtqRSxHQUFLLE9BQU8sU0FBVW1FLEdBQUssT0FDekMsU0FBY0MsR0FDVixHQUFJWCxFQUFHLE1BQU0sSUFBSVksVUFBVSxtQ0FDM0IsS0FBT1QsR0FBRyxJQUNOLEdBQUlILEVBQUksRUFBR0MsSUFBTWpFLEVBQVksRUFBUjJFLEVBQUcsR0FBU1YsRUFBVSxPQUFJVSxFQUFHLEdBQUtWLEVBQVMsU0FBT2pFLEVBQUlpRSxFQUFVLFNBQU1qRSxFQUFFZixLQUFLZ0YsR0FBSSxHQUFLQSxFQUFFUixTQUFXekQsRUFBSUEsRUFBRWYsS0FBS2dGLEVBQUdVLEVBQUcsS0FBS2YsS0FBTSxPQUFPNUQsRUFFM0osT0FESWlFLEVBQUksRUFBR2pFLElBQUcyRSxFQUFLLENBQVMsRUFBUkEsRUFBRyxHQUFRM0UsRUFBRUQsUUFDekI0RSxFQUFHLElBQ1AsS0FBSyxFQUFHLEtBQUssRUFBRzNFLEVBQUkyRSxFQUFJLE1BQ3hCLEtBQUssRUFBYyxPQUFYUixFQUFFQyxRQUFnQixDQUFFckUsTUFBTzRFLEVBQUcsR0FBSWYsTUFBTSxHQUNoRCxLQUFLLEVBQUdPLEVBQUVDLFFBQVNILEVBQUlVLEVBQUcsR0FBSUEsRUFBSyxDQUFDLEdBQUksU0FDeEMsS0FBSyxFQUFHQSxFQUFLUixFQUFFSSxJQUFJTSxNQUFPVixFQUFFRyxLQUFLTyxNQUFPLFNBQ3hDLFFBQ0ksS0FBa0I3RSxHQUFaQSxFQUFJbUUsRUFBRUcsTUFBWTVDLE9BQVMsR0FBSzFCLEVBQUVBLEVBQUUwQixPQUFTLE1BQWtCLElBQVZpRCxFQUFHLElBQXNCLElBQVZBLEVBQUcsSUFBVyxDQUFFUixFQUFJLEVBQUcsU0FDakcsR0FBYyxJQUFWUSxFQUFHLE1BQWMzRSxHQUFNMkUsRUFBRyxHQUFLM0UsRUFBRSxJQUFNMkUsRUFBRyxHQUFLM0UsRUFBRSxJQUFNLENBQUVtRSxFQUFFQyxNQUFRTyxFQUFHLEdBQUksTUFDOUUsR0FBYyxJQUFWQSxFQUFHLElBQVlSLEVBQUVDLE1BQVFwRSxFQUFFLEdBQUksQ0FBRW1FLEVBQUVDLE1BQVFwRSxFQUFFLEdBQUlBLEVBQUkyRSxFQUFJLE1BQzdELEdBQUkzRSxHQUFLbUUsRUFBRUMsTUFBUXBFLEVBQUUsR0FBSSxDQUFFbUUsRUFBRUMsTUFBUXBFLEVBQUUsR0FBSW1FLEVBQUVJLElBQUlPLEtBQUtILEdBQUssTUFDdkQzRSxFQUFFLElBQUltRSxFQUFFSSxJQUFJTSxNQUNoQlYsRUFBRUcsS0FBS08sTUFBTyxTQUV0QkYsRUFBS1osRUFBSzlFLEtBQUsrRCxFQUFTbUIsR0FDMUIsTUFBT3RDLEdBQUs4QyxFQUFLLENBQUMsRUFBRzlDLEdBQUlvQyxFQUFJLEVBQUssUUFBVUQsRUFBSWhFLEVBQUksRUFDdEQsR0FBWSxFQUFSMkUsRUFBRyxHQUFRLE1BQU1BLEVBQUcsR0FBSSxNQUFPLENBQUU1RSxNQUFPNEUsRUFBRyxHQUFLQSxFQUFHLFFBQUssRUFBUWYsTUFBTSxHQXJCOUJKLENBQUssQ0FBQ2pELEVBQUdtRSxNQXlCdEQsU0FBU0ssRUFBYTdGLEVBQUdOLEdBQzVCLElBQUssSUFBSWdDLEtBQUsxQixFQUFRTixFQUFRK0IsZUFBZUMsS0FBSWhDLEVBQVFnQyxHQUFLMUIsRUFBRTBCLElBRzdELFNBQVNvRSxFQUFTekYsR0FDckIsSUFBSUwsRUFBc0IsbUJBQVhXLFFBQXlCTixFQUFFTSxPQUFPNEUsVUFBVzNGLEVBQUksRUFDaEUsT0FBSUksRUFBVUEsRUFBRUQsS0FBS00sR0FDZCxDQUNIa0UsS0FBTSxXQUVGLE9BRElsRSxHQUFLVCxHQUFLUyxFQUFFbUMsU0FBUW5DLE9BQUksR0FDckIsQ0FBRVEsTUFBT1IsR0FBS0EsRUFBRVQsS0FBTThFLE1BQU9yRSxLQUt6QyxTQUFTMEYsRUFBTzFGLEVBQUdnQixHQUN0QixJQUFJckIsRUFBc0IsbUJBQVhXLFFBQXlCTixFQUFFTSxPQUFPNEUsVUFDakQsSUFBS3ZGLEVBQUcsT0FBT0ssRUFDZixJQUFtQkssRUFBWWlDLEVBQTNCL0MsRUFBSUksRUFBRUQsS0FBS00sR0FBTzJGLEVBQUssR0FDM0IsSUFDSSxXQUFjLElBQU4zRSxHQUFnQkEsS0FBTSxNQUFRWCxFQUFJZCxFQUFFMkUsUUFBUUcsTUFBTXNCLEVBQUdKLEtBQUtsRixFQUFFRyxPQUV4RSxNQUFPb0YsR0FBU3RELEVBQUksQ0FBRXNELE1BQU9BLEdBQzdCLFFBQ0ksSUFDUXZGLElBQU1BLEVBQUVnRSxPQUFTMUUsRUFBSUosRUFBVSxTQUFJSSxFQUFFRCxLQUFLSCxHQUVsRCxRQUFVLEdBQUkrQyxFQUFHLE1BQU1BLEVBQUVzRCxPQUU3QixPQUFPRCxFQUdKLFNBQVNFLElBQ1osSUFBSyxJQUFJRixFQUFLLEdBQUlwRyxFQUFJLEVBQUdBLEVBQUkyQyxVQUFVQyxPQUFRNUMsSUFDM0NvRyxFQUFLQSxFQUFHRyxPQUFPSixFQUFPeEQsVUFBVTNDLEtBQ3BDLE9BQU9vRyxFQUdKLFNBQVNJLElBQ1osSUFBSyxJQUFJekUsRUFBSSxFQUFHL0IsRUFBSSxFQUFHeUcsRUFBSzlELFVBQVVDLE9BQVE1QyxFQUFJeUcsRUFBSXpHLElBQUsrQixHQUFLWSxVQUFVM0MsR0FBRzRDLE9BQ3hFLElBQUk5QixFQUFJc0IsTUFBTUwsR0FBSTJFLEVBQUksRUFBM0IsSUFBOEIxRyxFQUFJLEVBQUdBLEVBQUl5RyxFQUFJekcsSUFDekMsSUFBSyxJQUFJMkcsRUFBSWhFLFVBQVUzQyxHQUFJNEcsRUFBSSxFQUFHQyxFQUFLRixFQUFFL0QsT0FBUWdFLEVBQUlDLEVBQUlELElBQUtGLElBQzFENUYsRUFBRTRGLEdBQUtDLEVBQUVDLEdBQ2pCLE9BQU85RixFQUdKLFNBQVNnRyxFQUFRbEIsR0FDcEIsT0FBT3JELGdCQUFnQnVFLEdBQVd2RSxLQUFLcUQsRUFBSUEsRUFBR3JELE1BQVEsSUFBSXVFLEVBQVFsQixHQUcvRCxTQUFTbUIsRUFBaUI3QyxFQUFTQyxFQUFZRSxHQUNsRCxJQUFLdEQsT0FBT2lHLGNBQWUsTUFBTSxJQUFJbEIsVUFBVSx3Q0FDL0MsSUFBb0Q5RixFQUFoRG9GLEVBQUlmLEVBQVV4QixNQUFNcUIsRUFBU0MsR0FBYyxJQUFROEMsRUFBSSxHQUMzRCxPQUFPakgsRUFBSSxHQUFJMEYsRUFBSyxRQUFTQSxFQUFLLFNBQVVBLEVBQUssVUFBVzFGLEVBQUVlLE9BQU9pRyxlQUFpQixXQUFjLE9BQU96RSxNQUFTdkMsRUFDcEgsU0FBUzBGLEVBQUtqRSxHQUFTMkQsRUFBRTNELEtBQUl6QixFQUFFeUIsR0FBSyxTQUFVbUUsR0FBSyxPQUFPLElBQUl0QixTQUFRLFNBQVVxQyxFQUFHMUUsR0FBS2dGLEVBQUVqQixLQUFLLENBQUN2RSxFQUFHbUUsRUFBR2UsRUFBRzFFLElBQU0sR0FBS2lGLEVBQU96RixFQUFHbUUsUUFDOUgsU0FBU3NCLEVBQU96RixFQUFHbUUsR0FBSyxLQUNWOUUsRUFEcUJzRSxFQUFFM0QsR0FBR21FLElBQ25CM0UsaUJBQWlCNkYsRUFBVXhDLFFBQVFDLFFBQVF6RCxFQUFFRyxNQUFNMkUsR0FBR2IsS0FBS29DLEVBQVMzQyxHQUFVNEMsRUFBT0gsRUFBRSxHQUFHLEdBQUluRyxHQURwRSxNQUFPaUMsR0FBS3FFLEVBQU9ILEVBQUUsR0FBRyxHQUFJbEUsR0FDM0UsSUFBY2pDLEVBQ2QsU0FBU3FHLEVBQVFsRyxHQUFTaUcsRUFBTyxPQUFRakcsR0FDekMsU0FBU3VELEVBQU92RCxHQUFTaUcsRUFBTyxRQUFTakcsR0FDekMsU0FBU21HLEVBQU9sQyxFQUFHVSxHQUFTVixFQUFFVSxHQUFJcUIsRUFBRUksUUFBU0osRUFBRXJFLFFBQVFzRSxFQUFPRCxFQUFFLEdBQUcsR0FBSUEsRUFBRSxHQUFHLEtBR3pFLFNBQVNLLEVBQWlCN0csR0FDN0IsSUFBSVQsRUFBRzhCLEVBQ1AsT0FBTzlCLEVBQUksR0FBSTBGLEVBQUssUUFBU0EsRUFBSyxTQUFTLFNBQVUzQyxHQUFLLE1BQU1BLEtBQU8yQyxFQUFLLFVBQVcxRixFQUFFZSxPQUFPNEUsVUFBWSxXQUFjLE9BQU9wRCxNQUFTdkMsRUFDMUksU0FBUzBGLEVBQUtqRSxFQUFHeUQsR0FBS2xGLEVBQUV5QixHQUFLaEIsRUFBRWdCLEdBQUssU0FBVW1FLEdBQUssT0FBUTlELEdBQUtBLEdBQUssQ0FBRWIsTUFBTzZGLEVBQVFyRyxFQUFFZ0IsR0FBR21FLElBQUtkLEtBQVksV0FBTnJELEdBQW1CeUQsRUFBSUEsRUFBRVUsR0FBS0EsR0FBT1YsR0FHeEksU0FBU3FDLEVBQWM5RyxHQUMxQixJQUFLTSxPQUFPaUcsY0FBZSxNQUFNLElBQUlsQixVQUFVLHdDQUMvQyxJQUFpQzlGLEVBQTdCSSxFQUFJSyxFQUFFTSxPQUFPaUcsZUFDakIsT0FBTzVHLEVBQUlBLEVBQUVELEtBQUtNLElBQU1BLEVBQXFDeUYsRUFBU3pGLEdBQTJCVCxFQUFJLEdBQUkwRixFQUFLLFFBQVNBLEVBQUssU0FBVUEsRUFBSyxVQUFXMUYsRUFBRWUsT0FBT2lHLGVBQWlCLFdBQWMsT0FBT3pFLE1BQVN2QyxHQUM5TSxTQUFTMEYsRUFBS2pFLEdBQUt6QixFQUFFeUIsR0FBS2hCLEVBQUVnQixJQUFNLFNBQVVtRSxHQUFLLE9BQU8sSUFBSXRCLFNBQVEsU0FBVUMsRUFBU0MsSUFDdkYsU0FBZ0JELEVBQVNDLEVBQVFsRSxFQUFHc0YsR0FBS3RCLFFBQVFDLFFBQVFxQixHQUFHYixNQUFLLFNBQVNhLEdBQUtyQixFQUFRLENBQUV0RCxNQUFPMkUsRUFBR2QsS0FBTXhFLE1BQVNrRSxJQURKNEMsQ0FBTzdDLEVBQVNDLEdBQTdCb0IsRUFBSW5GLEVBQUVnQixHQUFHbUUsSUFBOEJkLEtBQU1jLEVBQUUzRSxZQUk3SSxTQUFTdUcsRUFBcUJDLEVBQVFDLEdBRXpDLE9BREloSCxPQUFPQyxlQUFrQkQsT0FBT0MsZUFBZThHLEVBQVEsTUFBTyxDQUFFeEcsTUFBT3lHLElBQWlCRCxFQUFPQyxJQUFNQSxFQUNsR0QsRUFHSixTQUFTRSxFQUFhQyxHQUN6QixHQUFJQSxHQUFPQSxFQUFJeEcsV0FBWSxPQUFPd0csRUFDbEMsSUFBSS9DLEVBQVMsR0FDYixHQUFXLE1BQVArQyxFQUFhLElBQUssSUFBSWxCLEtBQUtrQixFQUFTbEgsT0FBT21CLGVBQWUxQixLQUFLeUgsRUFBS2xCLEtBQUk3QixFQUFPNkIsR0FBS2tCLEVBQUlsQixJQUU1RixPQURBN0IsRUFBT2dELFFBQVVELEVBQ1YvQyxFQUdKLFNBQVNpRCxFQUFnQkYsR0FDNUIsT0FBUUEsR0FBT0EsRUFBSXhHLFdBQWN3RyxFQUFNLENBQUVDLFFBQVNELEssOEJDbE10RCxZQUVBbEgsT0FBT0MsZUFBZWIsRUFBUyxhQUFjLENBQUVtQixPQUFPLElBRXRELElBQUk4RyxFQUFRLEVBQVEsR0FxQmhCQyxFQUFZLENBSVpDLGFBQWEsRUFJYkMsWUFBWSxFQUlaQyxZQUFhLHFCQXNCYkMsRUFBUyxTQUFVQyxFQUFXQyxHQUM5QixJQUFLRCxFQUNELE1BQU1FLEVBQWVELElBTXpCQyxFQUFpQixTQUFVRCxHQUMzQixPQUFPLElBQUlFLE1BQU0sc0JBQ2JSLEVBQVVHLFlBQ1YsNkJBQ0FHLElBbUJKRyxFQUFvQixTQUFVQyxHQUk5QixJQUZBLElBQUlDLEVBQU0sR0FDTjdHLEVBQUksRUFDQzlCLEVBQUksRUFBR0EsRUFBSTBJLEVBQUk5RixPQUFRNUMsSUFBSyxDQUNqQyxJQUFJSyxFQUFJcUksRUFBSUUsV0FBVzVJLEdBQ25CSyxFQUFJLElBQ0pzSSxFQUFJN0csS0FBT3pCLEVBRU5BLEVBQUksTUFDVHNJLEVBQUk3RyxLQUFRekIsR0FBSyxFQUFLLElBQ3RCc0ksRUFBSTdHLEtBQVksR0FBSnpCLEVBQVUsS0FFQSxRQUFaLE1BQUpBLElBQ05MLEVBQUksRUFBSTBJLEVBQUk5RixRQUN5QixRQUFaLE1BQXhCOEYsRUFBSUUsV0FBVzVJLEVBQUksS0FFcEJLLEVBQUksUUFBZ0IsS0FBSkEsSUFBZSxLQUE2QixLQUF0QnFJLEVBQUlFLGFBQWE1SSxJQUN2RDJJLEVBQUk3RyxLQUFRekIsR0FBSyxHQUFNLElBQ3ZCc0ksRUFBSTdHLEtBQVN6QixHQUFLLEdBQU0sR0FBTSxJQUM5QnNJLEVBQUk3RyxLQUFTekIsR0FBSyxFQUFLLEdBQU0sSUFDN0JzSSxFQUFJN0csS0FBWSxHQUFKekIsRUFBVSxNQUd0QnNJLEVBQUk3RyxLQUFRekIsR0FBSyxHQUFNLElBQ3ZCc0ksRUFBSTdHLEtBQVN6QixHQUFLLEVBQUssR0FBTSxJQUM3QnNJLEVBQUk3RyxLQUFZLEdBQUp6QixFQUFVLEtBRzlCLE9BQU9zSSxHQTBDUEUsRUFBUyxDQUlUQyxlQUFnQixLQUloQkMsZUFBZ0IsS0FLaEJDLHNCQUF1QixLQUt2QkMsc0JBQXVCLEtBS3ZCQyxrQkFBbUIsaUVBSW5CLG1CQUNJLE9BQU8zRyxLQUFLMkcsa0JBQW9CLE9BS3BDLDJCQUNJLE9BQU8zRyxLQUFLMkcsa0JBQW9CLE9BU3BDQyxtQkFBb0MsbUJBQVRDLEtBVTNCQyxnQkFBaUIsU0FBVUMsRUFBT0MsR0FDOUIsSUFBS25ILE1BQU1vSCxRQUFRRixHQUNmLE1BQU1kLE1BQU0saURBRWhCakcsS0FBS2tILFFBS0wsSUFKQSxJQUFJQyxFQUFnQkgsRUFDZGhILEtBQUt5RyxzQkFDTHpHLEtBQUt1RyxlQUNQYSxFQUFTLEdBQ0ozSixFQUFJLEVBQUdBLEVBQUlzSixFQUFNMUcsT0FBUTVDLEdBQUssRUFBRyxDQUN0QyxJQUFJNEosRUFBUU4sRUFBTXRKLEdBQ2Q2SixFQUFZN0osRUFBSSxFQUFJc0osRUFBTTFHLE9BQzFCa0gsRUFBUUQsRUFBWVAsRUFBTXRKLEVBQUksR0FBSyxFQUNuQytKLEVBQVkvSixFQUFJLEVBQUlzSixFQUFNMUcsT0FDMUJvSCxFQUFRRCxFQUFZVCxFQUFNdEosRUFBSSxHQUFLLEVBQ25DaUssRUFBV0wsR0FBUyxFQUNwQk0sR0FBcUIsRUFBUk4sSUFBaUIsRUFBTUUsR0FBUyxFQUM3Q0ssR0FBcUIsR0FBUkwsSUFBaUIsRUFBTUUsR0FBUyxFQUM3Q0ksRUFBbUIsR0FBUkosRUFDVkQsSUFDREssRUFBVyxHQUNOUCxJQUNETSxFQUFXLEtBR25CUixFQUFPM0QsS0FBSzBELEVBQWNPLEdBQVdQLEVBQWNRLEdBQVdSLEVBQWNTLEdBQVdULEVBQWNVLElBRXpHLE9BQU9ULEVBQU9VLEtBQUssS0FVdkJDLGFBQWMsU0FBVWhCLEVBQU9DLEdBRzNCLE9BQUloSCxLQUFLNEcscUJBQXVCSSxFQUNyQmdCLEtBQUtqQixHQUVUL0csS0FBSzhHLGdCQUFnQlosRUFBa0JhLEdBQVFDLElBVTFEaUIsYUFBYyxTQUFVbEIsRUFBT0MsR0FHM0IsT0FBSWhILEtBQUs0RyxxQkFBdUJJLEVBQ3JCSCxLQUFLRSxHQWhKQSxTQUFVbUIsR0FJOUIsSUFGQSxJQUFJOUIsRUFBTSxHQUNOK0IsRUFBTSxFQUFHckssRUFBSSxFQUNWcUssRUFBTUQsRUFBTTdILFFBQVEsQ0FDdkIsSUFBSStILEVBQUtGLEVBQU1DLEtBQ2YsR0FBSUMsRUFBSyxJQUNMaEMsRUFBSXRJLEtBQU91SyxPQUFPQyxhQUFhRixRQUU5QixHQUFJQSxFQUFLLEtBQU9BLEVBQUssSUFBSyxDQUMzQixJQUFJRyxFQUFLTCxFQUFNQyxLQUNmL0IsRUFBSXRJLEtBQU91SyxPQUFPQyxjQUFvQixHQUFMRixJQUFZLEVBQVcsR0FBTEcsUUFFbEQsR0FBSUgsRUFBSyxLQUFPQSxFQUFLLElBQUssQ0FFM0IsSUFHSUksSUFBWSxFQUFMSixJQUFXLElBQWEsSUFIL0JHLEVBQUtMLEVBQU1DLFFBRzJCLElBQWEsSUFGbkRNLEVBQUtQLEVBQU1DLFFBRStDLEVBQVcsR0FEaEVELEVBQU1DLE1BRVgsTUFDSi9CLEVBQUl0SSxLQUFPdUssT0FBT0MsYUFBYSxPQUFVRSxHQUFLLEtBQzlDcEMsRUFBSXRJLEtBQU91SyxPQUFPQyxhQUFhLE9BQWMsS0FBSkUsUUFFeEMsQ0FDR0QsRUFBS0wsRUFBTUMsS0FBZixJQUNJTSxFQUFLUCxFQUFNQyxLQUNmL0IsRUFBSXRJLEtBQU91SyxPQUFPQyxjQUFvQixHQUFMRixJQUFZLElBQWEsR0FBTEcsSUFBWSxFQUFXLEdBQUxFLElBRy9FLE9BQU9yQyxFQUFJMEIsS0FBSyxJQXFITFksQ0FBa0IxSSxLQUFLMkksd0JBQXdCNUIsRUFBT0MsS0FpQmpFMkIsd0JBQXlCLFNBQVU1QixFQUFPQyxHQUN0Q2hILEtBQUtrSCxRQUtMLElBSkEsSUFBSTBCLEVBQWdCNUIsRUFDZGhILEtBQUswRyxzQkFDTDFHLEtBQUt3RyxlQUNQWSxFQUFTLEdBQ0ozSixFQUFJLEVBQUdBLEVBQUlzSixFQUFNMUcsUUFBUyxDQUMvQixJQUFJZ0gsRUFBUXVCLEVBQWM3QixFQUFNOEIsT0FBT3BMLE1BRW5DOEosRUFEWTlKLEVBQUlzSixFQUFNMUcsT0FDRnVJLEVBQWM3QixFQUFNOEIsT0FBT3BMLElBQU0sRUFHckRnSyxJQUZGaEssRUFDa0JzSixFQUFNMUcsT0FDRnVJLEVBQWM3QixFQUFNOEIsT0FBT3BMLElBQU0sR0FHckRxTCxJQUZGckwsRUFDa0JzSixFQUFNMUcsT0FDRnVJLEVBQWM3QixFQUFNOEIsT0FBT3BMLElBQU0sR0FFekQsS0FERUEsRUFDVyxNQUFUNEosR0FBMEIsTUFBVEUsR0FBMEIsTUFBVEUsR0FBMEIsTUFBVHFCLEVBQ25ELE1BQU03QyxRQUVWLElBQUl5QixFQUFZTCxHQUFTLEVBQU1FLEdBQVMsRUFFeEMsR0FEQUgsRUFBTzNELEtBQUtpRSxHQUNFLEtBQVZELEVBQWMsQ0FDZCxJQUFJRSxFQUFhSixHQUFTLEVBQUssSUFBU0UsR0FBUyxFQUVqRCxHQURBTCxFQUFPM0QsS0FBS2tFLEdBQ0UsS0FBVm1CLEVBQWMsQ0FDZCxJQUFJbEIsRUFBYUgsR0FBUyxFQUFLLElBQVFxQixFQUN2QzFCLEVBQU8zRCxLQUFLbUUsS0FJeEIsT0FBT1IsR0FPWEYsTUFBTyxXQUNILElBQUtsSCxLQUFLdUcsZUFBZ0IsQ0FDdEJ2RyxLQUFLdUcsZUFBaUIsR0FDdEJ2RyxLQUFLd0csZUFBaUIsR0FDdEJ4RyxLQUFLeUcsc0JBQXdCLEdBQzdCekcsS0FBSzBHLHNCQUF3QixHQUU3QixJQUFLLElBQUlqSixFQUFJLEVBQUdBLEVBQUl1QyxLQUFLK0ksYUFBYTFJLE9BQVE1QyxJQUMxQ3VDLEtBQUt1RyxlQUFlOUksR0FBS3VDLEtBQUsrSSxhQUFhRixPQUFPcEwsR0FDbER1QyxLQUFLd0csZUFBZXhHLEtBQUt1RyxlQUFlOUksSUFBTUEsRUFDOUN1QyxLQUFLeUcsc0JBQXNCaEosR0FBS3VDLEtBQUtnSixxQkFBcUJILE9BQU9wTCxHQUNqRXVDLEtBQUswRyxzQkFBc0IxRyxLQUFLeUcsc0JBQXNCaEosSUFBTUEsRUFFeERBLEdBQUt1QyxLQUFLMkcsa0JBQWtCdEcsU0FDNUJMLEtBQUt3RyxlQUFleEcsS0FBS2dKLHFCQUFxQkgsT0FBT3BMLElBQU1BLEVBQzNEdUMsS0FBSzBHLHNCQUFzQjFHLEtBQUsrSSxhQUFhRixPQUFPcEwsSUFBTUEsTUFzQjFFd0wsRUFBZSxTQUFVOUMsR0FDekIsSUFDSSxPQUFPRyxFQUFPMkIsYUFBYTlCLEdBQUssR0FFcEMsTUFBTzNGLEdBQ0gwSSxRQUFRcEYsTUFBTSx3QkFBeUJ0RCxHQUUzQyxPQUFPOzs7Ozs7Ozs7Ozs7Ozs7O0dBcUNYLFNBQVMySSxFQUFXckksRUFBUXNJLEdBQ3hCLEtBQU1BLGFBQWtCakwsUUFDcEIsT0FBT2lMLEVBRVgsT0FBUUEsRUFBT25KLGFBQ1gsS0FBS29KLEtBSUQsT0FBTyxJQUFJQSxLQURLRCxFQUNVRSxXQUM5QixLQUFLbkwsWUFDY29MLElBQVh6SSxJQUNBQSxFQUFTLElBRWIsTUFDSixLQUFLakIsTUFFRGlCLEVBQVMsR0FDVCxNQUNKLFFBRUksT0FBT3NJLEVBRWYsSUFBSyxJQUFJSSxLQUFRSixFQUNSQSxFQUFPOUosZUFBZWtLLEtBRzNCMUksRUFBTzBJLEdBQVFMLEVBQVdySSxFQUFPMEksR0FBT0osRUFBT0ksS0FFbkQsT0FBTzFJOzs7Ozs7Ozs7Ozs7Ozs7O0dBbUJYLElBQUkySSxFQUEwQixXQUMxQixTQUFTQSxJQUNMLElBQUlDLEVBQVExSixLQUNaQSxLQUFLaUMsT0FBUyxhQUNkakMsS0FBS2dDLFFBQVUsYUFDZmhDLEtBQUsySixRQUFVLElBQUk1SCxTQUFRLFNBQVVDLEVBQVNDLEdBQzFDeUgsRUFBTTFILFFBQVVBLEVBQ2hCMEgsRUFBTXpILE9BQVNBLEtBZ0N2QixPQXhCQXdILEVBQVNwSyxVQUFVdUssYUFBZSxTQUFVQyxHQUN4QyxJQUFJSCxFQUFRMUosS0FDWixPQUFPLFNBQVU4RCxFQUFPcEYsR0FDaEJvRixFQUNBNEYsRUFBTXpILE9BQU82QixHQUdiNEYsRUFBTTFILFFBQVF0RCxHQUVNLG1CQUFibUwsSUFHUEgsRUFBTUMsUUFBUUcsT0FBTSxlQUdJLElBQXBCRCxFQUFTeEosT0FDVHdKLEVBQVMvRixHQUdUK0YsRUFBUy9GLEVBQU9wRixNQUt6QitLLEVBdkNrQjs7Ozs7Ozs7Ozs7Ozs7OztHQThEN0IsU0FBU00sSUFDTCxNQUF5QixvQkFBZEMsV0FDMkIsaUJBQTNCQSxVQUFxQixVQUNyQkEsVUFBcUIsVUFHckI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBc0VmLElBQUlDLEVBQWEsZ0JBR2JDLEVBQStCLFNBQVVDLEdBRXpDLFNBQVNELEVBQWNFLEVBQU1yRSxHQUN6QixJQUFJMkQsRUFBUVMsRUFBT3ZNLEtBQUtvQyxLQUFNK0YsSUFBWS9GLEtBVzFDLE9BVkEwSixFQUFNVSxLQUFPQSxFQUNiVixFQUFNMUwsS0FBT2lNLEVBR2I5TCxPQUFPd0IsZUFBZStKLEVBQU9RLEVBQWM3SyxXQUd2QzRHLE1BQU1vRSxtQkFDTnBFLE1BQU1vRSxrQkFBa0JYLEVBQU9ZLEVBQWFqTCxVQUFVTixRQUVuRDJLLEVBRVgsT0FmQWxFLEVBQU0xRixVQUFVb0ssRUFBZUMsR0FleEJELEVBaEJ1QixDQWlCaENqRSxPQUNFcUUsRUFBOEIsV0FDOUIsU0FBU0EsRUFBYUMsRUFBU0MsRUFBYUMsR0FDeEN6SyxLQUFLdUssUUFBVUEsRUFDZnZLLEtBQUt3SyxZQUFjQSxFQUNuQnhLLEtBQUt5SyxPQUFTQSxFQTRCbEIsT0ExQkFILEVBQWFqTCxVQUFVTixPQUFTLFNBQVVxTCxHQUV0QyxJQURBLElBQUlNLEVBQU8sR0FDRkMsRUFBSyxFQUFHQSxFQUFLdkssVUFBVUMsT0FBUXNLLElBQ3BDRCxFQUFLQyxFQUFLLEdBQUt2SyxVQUFVdUssR0FZN0IsSUFWQSxJQUFJQyxFQUFhRixFQUFLLElBQU0sR0FDeEJHLEVBQVc3SyxLQUFLdUssUUFBVSxJQUFNSCxFQUNoQ1UsRUFBVzlLLEtBQUt5SyxPQUFPTCxHQUN2QnJFLEVBQVUrRSxFQUFXQyxFQUFnQkQsRUFBVUYsR0FBYyxRQUU3REksRUFBY2hMLEtBQUt3SyxZQUFjLEtBQU96RSxFQUFVLEtBQU84RSxFQUFXLEtBQ3BFL0csRUFBUSxJQUFJb0csRUFBY1csRUFBVUcsR0FJL0JDLEVBQUssRUFBR0MsRUFBSy9NLE9BQU9nTixLQUFLUCxHQUFhSyxFQUFLQyxFQUFHN0ssT0FBUTRLLElBQU0sQ0FDakUsSUFBSWpNLEVBQU1rTSxFQUFHRCxHQUNTLE1BQWxCak0sRUFBSW9NLE9BQU8sS0FDUHBNLEtBQU84RSxHQUNQb0YsUUFBUW1DLEtBQUsseUNBQTRDck0sRUFBTSxvQ0FFbkU4RSxFQUFNOUUsR0FBTzRMLEVBQVc1TCxJQUdoQyxPQUFPOEUsR0FFSndHLEVBaENzQixHQWtDakMsU0FBU1MsRUFBZ0JELEVBQVVKLEdBQy9CLE9BQU9JLEVBQVNRLFFBQVFDLEdBQVMsU0FBVXpJLEVBQUc5RCxHQUMxQyxJQUFJTixFQUFRZ00sRUFBSzFMLEdBQ2pCLE9BQWdCLE1BQVROLEVBQWdCQSxFQUFNOE0sV0FBYSxJQUFNeE0sRUFBTSxRQUc5RCxJQUFJdU0sRUFBVTs7Ozs7Ozs7Ozs7Ozs7OztHQXdCZCxTQUFTRSxFQUFTdEYsR0FDZCxPQUFPdUYsS0FBS0MsTUFBTXhGOzs7Ozs7Ozs7Ozs7Ozs7OztBQWtDdEIsSUFBSXlGLEVBQVMsU0FBVUMsR0FDbkIsSUFBSUMsRUFBUyxHQUFJQyxFQUFTLEdBQUlyQixFQUFPLEdBQUlzQixFQUFZLEdBQ3JELElBQ0ksSUFBSUMsRUFBUUosRUFBTUssTUFBTSxLQUN4QkosRUFBU0wsRUFBU3hDLEVBQWFnRCxFQUFNLEtBQU8sSUFDNUNGLEVBQVNOLEVBQVN4QyxFQUFhZ0QsRUFBTSxLQUFPLElBQzVDRCxFQUFZQyxFQUFNLEdBQ2xCdkIsRUFBT3FCLEVBQVUsR0FBSyxVQUNmQSxFQUFVLEVBRXJCLE1BQU92TCxJQUNQLE1BQU8sQ0FDSHNMLE9BQVFBLEVBQ1JDLE9BQVFBLEVBQ1JyQixLQUFNQSxFQUNOc0IsVUFBV0E7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBb05uQixJQUFJRyxFQUFzQixXQUN0QixTQUFTQSxJQU1Mbk0sS0FBS29NLE9BQVMsR0FLZHBNLEtBQUtxTSxLQUFPLEdBTVpyTSxLQUFLc00sR0FBSyxHQUtWdE0sS0FBS3VNLEtBQU8sR0FJWnZNLEtBQUt3TSxPQUFTLEVBSWR4TSxLQUFLeU0sT0FBUyxFQUNkek0sS0FBSzBNLFVBQVksR0FDakIxTSxLQUFLdU0sS0FBSyxHQUFLLElBQ2YsSUFBSyxJQUFJOU8sRUFBSSxFQUFHQSxFQUFJdUMsS0FBSzBNLFlBQWFqUCxFQUNsQ3VDLEtBQUt1TSxLQUFLOU8sR0FBSyxFQUVuQnVDLEtBQUsyTSxRQWtMVCxPQWhMQVIsRUFBSzlNLFVBQVVzTixNQUFRLFdBQ25CM00sS0FBS29NLE9BQU8sR0FBSyxXQUNqQnBNLEtBQUtvTSxPQUFPLEdBQUssV0FDakJwTSxLQUFLb00sT0FBTyxHQUFLLFdBQ2pCcE0sS0FBS29NLE9BQU8sR0FBSyxVQUNqQnBNLEtBQUtvTSxPQUFPLEdBQUssV0FDakJwTSxLQUFLd00sT0FBUyxFQUNkeE0sS0FBS3lNLE9BQVMsR0FRbEJOLEVBQUs5TSxVQUFVdU4sVUFBWSxTQUFVQyxFQUFLQyxHQUNqQ0EsSUFDREEsRUFBUyxHQUViLElBQUlDLEVBQUkvTSxLQUFLc00sR0FFYixHQUFtQixpQkFBUk8sRUFDUCxJQUFLLElBQUlwUCxFQUFJLEVBQUdBLEVBQUksR0FBSUEsSUFTcEJzUCxFQUFFdFAsR0FDR29QLEVBQUl4RyxXQUFXeUcsSUFBVyxHQUN0QkQsRUFBSXhHLFdBQVd5RyxFQUFTLElBQU0sR0FDOUJELEVBQUl4RyxXQUFXeUcsRUFBUyxJQUFNLEVBQy9CRCxFQUFJeEcsV0FBV3lHLEVBQVMsR0FDaENBLEdBQVUsT0FJZCxJQUFTclAsRUFBSSxFQUFHQSxFQUFJLEdBQUlBLElBQ3BCc1AsRUFBRXRQLEdBQ0dvUCxFQUFJQyxJQUFXLEdBQ1hELEVBQUlDLEVBQVMsSUFBTSxHQUNuQkQsRUFBSUMsRUFBUyxJQUFNLEVBQ3BCRCxFQUFJQyxFQUFTLEdBQ3JCQSxHQUFVLEVBSWxCLElBQVNyUCxFQUFJLEdBQUlBLEVBQUksR0FBSUEsSUFBSyxDQUMxQixJQUFJa0IsRUFBSW9PLEVBQUV0UCxFQUFJLEdBQUtzUCxFQUFFdFAsRUFBSSxHQUFLc1AsRUFBRXRQLEVBQUksSUFBTXNQLEVBQUV0UCxFQUFJLElBQ2hEc1AsRUFBRXRQLEdBQStCLFlBQXhCa0IsR0FBSyxFQUFNQSxJQUFNLElBRTlCLElBS0lnRSxFQUFHd0IsRUFMSEMsRUFBSXBFLEtBQUtvTSxPQUFPLEdBQ2hCMU0sRUFBSU0sS0FBS29NLE9BQU8sR0FDaEJ0TyxFQUFJa0MsS0FBS29NLE9BQU8sR0FDaEJyTyxFQUFJaUMsS0FBS29NLE9BQU8sR0FDaEI1TCxFQUFJUixLQUFLb00sT0FBTyxHQUdwQixJQUFTM08sRUFBSSxFQUFHQSxFQUFJLEdBQUlBLElBQUssQ0FDckJBLEVBQUksR0FDQUEsRUFBSSxJQUNKa0YsRUFBSTVFLEVBQUsyQixHQUFLNUIsRUFBSUMsR0FDbEJvRyxFQUFJLGFBR0p4QixFQUFJakQsRUFBSTVCLEVBQUlDLEVBQ1pvRyxFQUFJLFlBSUoxRyxFQUFJLElBQ0prRixFQUFLakQsRUFBSTVCLEVBQU1DLEdBQUsyQixFQUFJNUIsR0FDeEJxRyxFQUFJLGFBR0p4QixFQUFJakQsRUFBSTVCLEVBQUlDLEVBQ1pvRyxFQUFJLFlBR1J4RixHQUFPeUYsR0FBSyxFQUFNQSxJQUFNLElBQU96QixFQUFJbkMsRUFBSTJELEVBQUk0SSxFQUFFdFAsR0FBTSxXQUN2RCtDLEVBQUl6QyxFQUNKQSxFQUFJRCxFQUNKQSxFQUE4QixZQUF4QjRCLEdBQUssR0FBT0EsSUFBTSxHQUN4QkEsRUFBSTBFLEVBQ0pBLEVBQUl6RixFQUVScUIsS0FBS29NLE9BQU8sR0FBTXBNLEtBQUtvTSxPQUFPLEdBQUtoSSxFQUFLLFdBQ3hDcEUsS0FBS29NLE9BQU8sR0FBTXBNLEtBQUtvTSxPQUFPLEdBQUsxTSxFQUFLLFdBQ3hDTSxLQUFLb00sT0FBTyxHQUFNcE0sS0FBS29NLE9BQU8sR0FBS3RPLEVBQUssV0FDeENrQyxLQUFLb00sT0FBTyxHQUFNcE0sS0FBS29NLE9BQU8sR0FBS3JPLEVBQUssV0FDeENpQyxLQUFLb00sT0FBTyxHQUFNcE0sS0FBS29NLE9BQU8sR0FBSzVMLEVBQUssWUFFNUMyTCxFQUFLOU0sVUFBVTJOLE9BQVMsU0FBVTlFLEVBQU83SCxHQUVyQyxHQUFhLE1BQVQ2SCxFQUFKLE1BR2VxQixJQUFYbEosSUFDQUEsRUFBUzZILEVBQU03SCxRQVFuQixJQU5BLElBQUk0TSxFQUFtQjVNLEVBQVNMLEtBQUswTSxVQUNqQ3hOLEVBQUksRUFFSjJOLEVBQU03TSxLQUFLcU0sS0FDWGEsRUFBUWxOLEtBQUt3TSxPQUVWdE4sRUFBSW1CLEdBQVEsQ0FLZixHQUFjLElBQVY2TSxFQUNBLEtBQU9oTyxHQUFLK04sR0FDUmpOLEtBQUs0TSxVQUFVMUUsRUFBT2hKLEdBQ3RCQSxHQUFLYyxLQUFLME0sVUFHbEIsR0FBcUIsaUJBQVZ4RSxHQUNQLEtBQU9oSixFQUFJbUIsR0FJUCxHQUhBd00sRUFBSUssR0FBU2hGLEVBQU03QixXQUFXbkgsS0FFNUJBLElBREFnTyxJQUVZbE4sS0FBSzBNLFVBQVcsQ0FDMUIxTSxLQUFLNE0sVUFBVUMsR0FDZkssRUFBUSxFQUVSLFlBS1IsS0FBT2hPLEVBQUltQixHQUlQLEdBSEF3TSxFQUFJSyxHQUFTaEYsRUFBTWhKLEtBRWpCQSxJQURBZ08sSUFFWWxOLEtBQUswTSxVQUFXLENBQzFCMU0sS0FBSzRNLFVBQVVDLEdBQ2ZLLEVBQVEsRUFFUixPQUtoQmxOLEtBQUt3TSxPQUFTVSxFQUNkbE4sS0FBS3lNLFFBQVVwTSxJQUduQjhMLEVBQUs5TSxVQUFVOE4sT0FBUyxXQUNwQixJQUFJQSxFQUFTLEdBQ1RDLEVBQTBCLEVBQWRwTixLQUFLeU0sT0FFakJ6TSxLQUFLd00sT0FBUyxHQUNkeE0sS0FBS2dOLE9BQU9oTixLQUFLdU0sS0FBTSxHQUFLdk0sS0FBS3dNLFFBR2pDeE0sS0FBS2dOLE9BQU9oTixLQUFLdU0sS0FBTXZNLEtBQUswTSxXQUFhMU0sS0FBS3dNLE9BQVMsS0FHM0QsSUFBSyxJQUFJL08sRUFBSXVDLEtBQUswTSxVQUFZLEVBQUdqUCxHQUFLLEdBQUlBLElBQ3RDdUMsS0FBS3FNLEtBQUs1TyxHQUFpQixJQUFaMlAsRUFDZkEsR0FBYSxJQUVqQnBOLEtBQUs0TSxVQUFVNU0sS0FBS3FNLE1BQ3BCLElBQUluTixFQUFJLEVBQ1IsSUFBU3pCLEVBQUksRUFBR0EsRUFBSSxFQUFHQSxJQUNuQixJQUFLLElBQUk0RyxFQUFJLEdBQUlBLEdBQUssRUFBR0EsR0FBSyxFQUMxQjhJLEVBQU9qTyxHQUFNYyxLQUFLb00sT0FBTzNPLElBQU00RyxFQUFLLE1BQ2xDbkYsRUFHVixPQUFPaU8sR0FFSmhCLEVBdk5jLEdBME96QixJQUFJa0IsRUFBK0IsV0FNL0IsU0FBU0EsRUFBY0MsRUFBVUMsR0FDN0IsSUFBSTdELEVBQVExSixLQUNaQSxLQUFLd04sVUFBWSxHQUNqQnhOLEtBQUt5TixhQUFlLEdBQ3BCek4sS0FBSzBOLGNBQWdCLEVBRXJCMU4sS0FBSzJOLEtBQU81TCxRQUFRQyxVQUNwQmhDLEtBQUs0TixXQUFZLEVBQ2pCNU4sS0FBS3VOLGNBQWdCQSxFQUlyQnZOLEtBQUsyTixLQUNBbkwsTUFBSyxXQUNOOEssRUFBUzVELE1BRVJJLE9BQU0sU0FBVXRKLEdBQ2pCa0osRUFBTTVGLE1BQU10RCxNQWdKcEIsT0E3SUE2TSxFQUFjaE8sVUFBVStDLEtBQU8sU0FBVTFELEdBQ3JDc0IsS0FBSzZOLGlCQUFnQixTQUFVQyxHQUMzQkEsRUFBUzFMLEtBQUsxRCxPQUd0QjJPLEVBQWNoTyxVQUFVeUUsTUFBUSxTQUFVQSxHQUN0QzlELEtBQUs2TixpQkFBZ0IsU0FBVUMsR0FDM0JBLEVBQVNoSyxNQUFNQSxNQUVuQjlELEtBQUsrTixNQUFNakssSUFFZnVKLEVBQWNoTyxVQUFVMk8sU0FBVyxXQUMvQmhPLEtBQUs2TixpQkFBZ0IsU0FBVUMsR0FDM0JBLEVBQVNFLGNBRWJoTyxLQUFLK04sU0FRVFYsRUFBY2hPLFVBQVU0TyxVQUFZLFNBQVVDLEVBQWdCcEssRUFBT2tLLEdBQ2pFLElBQ0lGLEVBREFwRSxFQUFRMUosS0FFWixRQUF1QnVKLElBQW5CMkUsUUFDVTNFLElBQVZ6RixRQUNheUYsSUFBYnlFLEVBQ0EsTUFBTSxJQUFJL0gsTUFBTSwwQkFpQkVzRCxLQU5sQnVFLEVBNEhaLFNBQThCSyxFQUFLQyxHQUMvQixHQUFtQixpQkFBUkQsR0FBNEIsT0FBUkEsRUFDM0IsT0FBTyxFQUVYLElBQUssSUFBSXhELEVBQUssRUFBRzBELEVBQVlELEVBQVN6RCxFQUFLMEQsRUFBVWhPLE9BQVFzSyxJQUFNLENBQy9ELElBQUkyRCxFQUFTRCxFQUFVMUQsR0FDdkIsR0FBSTJELEtBQVVILEdBQThCLG1CQUFoQkEsRUFBSUcsR0FDNUIsT0FBTyxFQUdmLE9BQU8sRUE5SUNDLENBQXFCTCxFQUFnQixDQUNyQyxPQUNBLFFBQ0EsYUFFV0EsRUFHQSxDQUNQOUwsS0FBTThMLEVBQ05wSyxNQUFPQSxFQUNQa0ssU0FBVUEsSUFHTDVMLE9BQ1QwTCxFQUFTMUwsS0FBT29NLFFBRUdqRixJQUFuQnVFLEVBQVNoSyxRQUNUZ0ssRUFBU2hLLE1BQVEwSyxRQUVLakYsSUFBdEJ1RSxFQUFTRSxXQUNURixFQUFTRSxTQUFXUSxHQUV4QixJQUFJQyxFQUFRek8sS0FBSzBPLGVBQWV6UCxLQUFLZSxLQUFNQSxLQUFLd04sVUFBVW5OLFFBc0IxRCxPQWxCSUwsS0FBSzROLFdBRUw1TixLQUFLMk4sS0FBS25MLE1BQUssV0FDWCxJQUNRa0gsRUFBTWlGLFdBQ05iLEVBQVNoSyxNQUFNNEYsRUFBTWlGLFlBR3JCYixFQUFTRSxXQUdqQixNQUFPeE4sUUFNZlIsS0FBS3dOLFVBQVUvSixLQUFLcUssR0FDYlcsR0FJWHBCLEVBQWNoTyxVQUFVcVAsZUFBaUIsU0FBVWpSLFFBQ3hCOEwsSUFBbkJ2SixLQUFLd04sZ0JBQWlEakUsSUFBdEJ2SixLQUFLd04sVUFBVS9QLFlBRzVDdUMsS0FBS3dOLFVBQVUvUCxHQUN0QnVDLEtBQUswTixlQUFpQixFQUNLLElBQXZCMU4sS0FBSzBOLG9CQUE4Q25FLElBQXZCdkosS0FBS3VOLGVBQ2pDdk4sS0FBS3VOLGNBQWN2TixRQUczQnFOLEVBQWNoTyxVQUFVd08sZ0JBQWtCLFNBQVVlLEdBQ2hELElBQUk1TyxLQUFLNE4sVUFNVCxJQUFLLElBQUluUSxFQUFJLEVBQUdBLEVBQUl1QyxLQUFLd04sVUFBVW5OLE9BQVE1QyxJQUN2Q3VDLEtBQUs2TyxRQUFRcFIsRUFBR21SLElBTXhCdkIsRUFBY2hPLFVBQVV3UCxRQUFVLFNBQVVwUixFQUFHbVIsR0FDM0MsSUFBSWxGLEVBQVExSixLQUdaQSxLQUFLMk4sS0FBS25MLE1BQUssV0FDWCxRQUF3QitHLElBQXBCRyxFQUFNOEQsZ0JBQWtEakUsSUFBdkJHLEVBQU04RCxVQUFVL1AsR0FDakQsSUFDSW1SLEVBQUdsRixFQUFNOEQsVUFBVS9QLElBRXZCLE1BQU8rQyxHQUlvQixvQkFBWjBJLFNBQTJCQSxRQUFRcEYsT0FDMUNvRixRQUFRcEYsTUFBTXRELFFBTWxDNk0sRUFBY2hPLFVBQVUwTyxNQUFRLFNBQVVlLEdBQ3RDLElBQUlwRixFQUFRMUosS0FDUkEsS0FBSzROLFlBR1Q1TixLQUFLNE4sV0FBWSxPQUNMckUsSUFBUnVGLElBQ0E5TyxLQUFLMk8sV0FBYUcsR0FJdEI5TyxLQUFLMk4sS0FBS25MLE1BQUssV0FDWGtILEVBQU04RCxlQUFZakUsRUFDbEJHLEVBQU02RCxtQkFBZ0JoRSxPQUd2QjhELEVBdkt1QixHQTBNbEMsU0FBU21COzs7Ozs7Ozs7Ozs7Ozs7O0dBd0RULFNBQVNPLEVBQVlDLEVBQVFDLEVBQWdCQyxHQUN6QyxJQUFJQyxFQUFVLEdBQ2QsT0FBUUYsR0FDSixLQUFLLEVBQ0RFLEVBQVVELEVBQVcsUUFBVSxRQUMvQixNQUNKLEtBQUssRUFDREMsRUFBVUQsRUFBVyxTQUFXLFNBQ2hDLE1BQ0osS0FBSyxFQUNEQyxFQUFVRCxFQUFXLFFBQVUsUUFDL0IsTUFDSixLQUFLLEVBQ0RDLEVBQVVELEVBQVcsU0FBVyxTQUNoQyxNQUNKLFFBQ0ksTUFBTSxJQUFJakosTUFBTSxtRUFFeEIsSUFBSW5DLEVBQVFrTCxFQUFTLFlBRXJCLE9BREFsTCxHQUFTcUwsRUFBVSxhQWdJdkI1UixFQUFRa0ksVUFBWUEsRUFDcEJsSSxFQUFRa00sU0FBV0EsRUFDbkJsTSxFQUFRK00sYUFBZUEsRUFDdkIvTSxFQUFRMk0sY0FBZ0JBLEVBQ3hCM00sRUFBUTRPLEtBQU9BLEVBQ2Y1TyxFQUFRc0ksT0FBU0EsRUFDakJ0SSxFQUFReUksZUFBaUJBLEVBQ3pCekksRUFBUTZSLE1BbFBSLFNBQWVSLEVBQUlTLEdBQ2YsT0FBTyxXQUVILElBREEsSUFBSUMsRUFBTyxHQUNGM0UsRUFBSyxFQUFHQSxFQUFLdkssVUFBVUMsT0FBUXNLLElBQ3BDMkUsRUFBSzNFLEdBQU12SyxVQUFVdUssR0FFekI1SSxRQUFRQyxTQUFRLEdBQ1hRLE1BQUssV0FDTm9NLEVBQUd0TyxXQUFNLEVBQVFnUCxNQUVoQnhGLE9BQU0sU0FBVWhHLEdBQ2J1TCxHQUNBQSxFQUFRdkwsUUF1T3hCdkcsRUFBUStJLE9BQVNBLEVBQ2pCL0ksRUFBUTBMLGFBQWVBLEVBQ3ZCMUwsRUFBUWdTLGFBdnRDVyxTQUFVcEosR0FDekIsSUFBSXFKLEVBQVl0SixFQUFrQkMsR0FDbEMsT0FBT0csRUFBT1EsZ0JBQWdCMEksR0FBVyxJQXN0QzdDalMsRUFBUWtTOzs7Ozs7Ozs7Ozs7Ozs7OztBQXJ3QlIsU0FBa0J0QixFQUFLblAsR0FDbkIsT0FBT2IsT0FBT2tCLFVBQVVDLGVBQWUxQixLQUFLdVEsRUFBS25QLElBcXdCckR6QixFQUFRbVMsZ0JBemFSLFNBQXlCcEMsRUFBVUMsR0FDL0IsSUFBSW9DLEVBQVEsSUFBSXRDLEVBQWNDLEVBQVVDLEdBQ3hDLE9BQU9vQyxFQUFNMUIsVUFBVWhQLEtBQUswUSxJQXdhaENwUyxFQUFRcU8sT0FBU0EsRUFDakJyTyxFQUFRcVM7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBanJDUixTQUFrQmxSLEdBQ2QsT0FBT3lLLE9BQVdJLEVBQVc3SyxJQWlyQ2pDbkIsRUFBUTRMLFdBQWFBLEVBQ3JCNUwsRUFBUXdSLFlBQWNBLEVBQ3RCeFIsRUFBUXdNLE1BQVFBLEVBQ2hCeE0sRUFBUXNTLFFBanlCTSxTQUFVaEUsR0FDcEIsSUFBSUUsRUFBU0gsRUFBT0MsR0FBT0UsT0FDM0IsTUFBeUIsaUJBQVhBLElBQTJDLElBQXBCQSxFQUFjLE9BZ3lCdkR4TyxFQUFRdVMsVUFqaENSLFdBQ0ksTUFBdUIsaUJBQVRDLE1BQXFCQSxLQUFLQSxPQUFTQSxNQWloQ3JEeFMsRUFBUXlTLFFBbndCUixTQUFpQjdCLEdBQ2IsSUFBSyxJQUFJblAsS0FBT21QLEVBQ1osR0FBSWhRLE9BQU9rQixVQUFVQyxlQUFlMUIsS0FBS3VRLEVBQUtuUCxHQUMxQyxPQUFPLEVBR2YsT0FBTyxHQTh2Qlh6QixFQUFRMFMsZ0JBM2lDUixXQUNJLE1BQTBCLG9CQUFYQyxXQUdSQSxPQUFnQixTQUFLQSxPQUFpQixVQUFLQSxPQUFpQixXQUMvRCxvREFBb0RDLEtBQUtwRyxNQXVpQ2pFeE0sRUFBUTZTLE9BL2hDUixXQUNJLElBQ0ksTUFBMkQscUJBQW5EalMsT0FBT2tCLFVBQVVtTSxTQUFTNU4sS0FBS3lTLEVBQU9DLFNBRWxELE1BQU85UCxHQUNILE9BQU8sSUEyaENmakQsRUFBUWdULFVBcmdDUixXQUNJLE9BQWlDLElBQTFCOUssRUFBVUMsY0FBaUQsSUFBekJELEVBQVVFLFlBcWdDdkRwSSxFQUFRaVQsY0E5Z0NSLFdBQ0ksTUFBNkIsaUJBQWR4RyxXQUFtRCxnQkFBekJBLFVBQW1CLFNBOGdDaEV6TSxFQUFRa1QsY0FuekJZLFNBQVU1RSxHQUMxQixJQUE2QkUsRUFBZkgsRUFBT0MsR0FBeUJFLE9BQzlDLFFBQVNBLEdBQTRCLGlCQUFYQSxHQUF1QkEsRUFBT3pNLGVBQWUsUUFrekIzRS9CLEVBQVFtVCxpQkFsMkJlLFNBQVU3RSxHQUM3QixJQUFJRSxFQUFTSCxFQUFPQyxHQUFPRSxPQUN2QjRFLEVBQU1DLEtBQUtDLE9BQU0sSUFBSXhILE1BQU9DLFVBQVksS0FDeEN3SCxFQUFhLEVBQUdDLEVBQWEsRUFnQmpDLE1BZnNCLGlCQUFYaEYsSUFDSEEsRUFBT3pNLGVBQWUsT0FDdEJ3UixFQUFhL0UsRUFBWSxJQUVwQkEsRUFBT3pNLGVBQWUsU0FDM0J3UixFQUFhL0UsRUFBWSxLQUd6QmdGLEVBREFoRixFQUFPek0sZUFBZSxPQUNUeU0sRUFBWSxJQUlaK0UsRUFBYSxTQUd4QkgsS0FDSkcsS0FDQUMsR0FDRkosR0FBT0csR0FDUEgsR0FBT0ksR0E0MEJmeFQsRUFBUXlULGFBbjBCVyxTQUFVbkYsR0FDekIsSUFBSUUsRUFBU0gsRUFBT0MsR0FBT0UsT0FDM0IsTUFBc0IsaUJBQVhBLEdBQXVCQSxFQUFPek0sZUFBZSxPQUM3Q3lNLEVBQVksSUFFaEIsTUErekJYeE8sRUFBUWtPLFNBQVdBLEVBQ25CbE8sRUFBUTBULElBcHdCUixTQUFhOUMsRUFBS1MsRUFBSXNDLEdBQ2xCLElBQUlDLEVBQU0sR0FDVixJQUFLLElBQUluUyxLQUFPbVAsRUFDUmhRLE9BQU9rQixVQUFVQyxlQUFlMUIsS0FBS3VRLEVBQUtuUCxLQUMxQ21TLEVBQUluUyxHQUFPNFAsRUFBR2hSLEtBQUtzVCxFQUFZL0MsRUFBSW5QLEdBQU1BLEVBQUttUCxJQUd0RCxPQUFPZ0Q7Ozs7Ozs7Ozs7Ozs7Ozs7SUE4dkJYNVQsRUFBUTZULFlBdHVCUixTQUFxQkMsR0FZakIsSUFYQSxJQUFJQyxFQUFTLEdBQ1RDLEVBQVUsU0FBVXZTLEVBQUtOLEdBQ3JCbUIsTUFBTW9ILFFBQVF2SSxHQUNkQSxFQUFNOFMsU0FBUSxTQUFVQyxHQUNwQkgsRUFBTzdOLEtBQUtpTyxtQkFBbUIxUyxHQUFPLElBQU0wUyxtQkFBbUJELE9BSW5FSCxFQUFPN04sS0FBS2lPLG1CQUFtQjFTLEdBQU8sSUFBTTBTLG1CQUFtQmhULEtBRzlEaU0sRUFBSyxFQUFHTSxFQUFLOU0sT0FBT3dULFFBQVFOLEdBQW9CMUcsRUFBS00sRUFBRzVLLE9BQVFzSyxJQUFNLENBQzNFLElBQUlPLEVBQUtELEVBQUdOLEdBQ1o0RyxFQUR1QnJHLEVBQUcsR0FBWUEsRUFBRyxJQUc3QyxPQUFPb0csRUFBT2pSLE9BQVMsSUFBTWlSLEVBQU94SixLQUFLLEtBQU8sSUF1dEJwRHZLLEVBQVFxVSxrQkFqdEJSLFNBQTJCUixHQUN2QixJQUFJakQsRUFBTSxHQVFWLE9BUGFpRCxFQUFZOUYsUUFBUSxNQUFPLElBQUlZLE1BQU0sS0FDM0NzRixTQUFRLFNBQVUzRixHQUNyQixHQUFJQSxFQUFPLENBQ1AsSUFBSTdNLEVBQU02TSxFQUFNSyxNQUFNLEtBQ3RCaUMsRUFBSW5QLEVBQUksSUFBTUEsRUFBSSxPQUduQm1QLEdBeXNCWDVRLEVBQVFzVSxRQXZ4QlIsU0FBaUIxRCxFQUFLblAsR0FDbEIsT0FBSWIsT0FBT2tCLFVBQVVDLGVBQWUxQixLQUFLdVEsRUFBS25QLEdBQ25DbVAsRUFBSW5QLFFBR1gsR0FteEJSekIsRUFBUXVVLGFBdkRXLFNBQVUzTCxHQUV6QixJQURBLElBQUk1RyxFQUFJLEVBQ0M5QixFQUFJLEVBQUdBLEVBQUkwSSxFQUFJOUYsT0FBUTVDLElBQUssQ0FDakMsSUFBSUssRUFBSXFJLEVBQUlFLFdBQVc1SSxHQUNuQkssRUFBSSxJQUNKeUIsSUFFS3pCLEVBQUksS0FDVHlCLEdBQUssRUFFQXpCLEdBQUssT0FBVUEsR0FBSyxPQUV6QnlCLEdBQUssRUFDTDlCLEtBR0E4QixHQUFLLEVBR2IsT0FBT0EsR0FxQ1hoQyxFQUFRMkksa0JBL0ZrQixTQUFVQyxHQUdoQyxJQUZBLElBQUlDLEVBQU0sR0FDTjdHLEVBQUksRUFDQzlCLEVBQUksRUFBR0EsRUFBSTBJLEVBQUk5RixPQUFRNUMsSUFBSyxDQUNqQyxJQUFJSyxFQUFJcUksRUFBSUUsV0FBVzVJLEdBRXZCLEdBQUlLLEdBQUssT0FBVUEsR0FBSyxNQUFRLENBQzVCLElBQUlpVSxFQUFPalUsRUFBSSxNQUNmTCxJQUNBb0ksRUFBT3BJLEVBQUkwSSxFQUFJOUYsT0FBUSwyQ0FFdkJ2QyxFQUFJLE9BQVdpVSxHQUFRLEtBRGI1TCxFQUFJRSxXQUFXNUksR0FBSyxPQUc5QkssRUFBSSxJQUNKc0ksRUFBSTdHLEtBQU96QixFQUVOQSxFQUFJLE1BQ1RzSSxFQUFJN0csS0FBUXpCLEdBQUssRUFBSyxJQUN0QnNJLEVBQUk3RyxLQUFZLEdBQUp6QixFQUFVLEtBRWpCQSxFQUFJLE9BQ1RzSSxFQUFJN0csS0FBUXpCLEdBQUssR0FBTSxJQUN2QnNJLEVBQUk3RyxLQUFTekIsR0FBSyxFQUFLLEdBQU0sSUFDN0JzSSxFQUFJN0csS0FBWSxHQUFKekIsRUFBVSxNQUd0QnNJLEVBQUk3RyxLQUFRekIsR0FBSyxHQUFNLElBQ3ZCc0ksRUFBSTdHLEtBQVN6QixHQUFLLEdBQU0sR0FBTSxJQUM5QnNJLEVBQUk3RyxLQUFTekIsR0FBSyxFQUFLLEdBQU0sSUFDN0JzSSxFQUFJN0csS0FBWSxHQUFKekIsRUFBVSxLQUc5QixPQUFPc0ksR0FnRVg3SSxFQUFReVUsVUFoNkJSLFNBQW1CdEgsR0FDZixPQUFPZ0IsS0FBS3NHLFVBQVV0SCxJQWc2QjFCbk4sRUFBUTBVLGlCQWxOZSxTQUFVakQsRUFBUWtELEVBQVVDLEVBQVVDLEdBQ3pELElBQUlDLEVBT0osR0FOSUQsRUFBV0YsRUFDWEcsRUFBVyxZQUFjSCxFQUVwQkUsRUFBV0QsSUFDaEJFLEVBQXdCLElBQWJGLEVBQWlCLE9BQVMsZ0JBQWtCQSxHQUV2REUsRUFRQSxNQUFNLElBQUlwTSxNQVBFK0ksRUFDUiw0QkFDQW9ELEdBQ2MsSUFBYkEsRUFBaUIsYUFBZSxlQUNqQyxZQUNBQyxFQUNBLE1Bb01aOVUsRUFBUStVLGlCQWxKUixTQUEwQnRELEVBQVFDLEVBQWdCcEYsRUFBVXFGLEdBQ3hELEtBQUlBLEdBQWFyRixJQUdPLG1CQUFiQSxFQUNQLE1BQU0sSUFBSTVELE1BQU04SSxFQUFZQyxFQUFRQyxFQUFnQkMsR0FDaEQsOEJBNklaM1IsRUFBUWdWLHNCQTFJUixTQUErQnZELEVBQVFDLEVBQWdCdUQsRUFBU3RELEdBQzVELEtBQUlBLEdBQWFzRCxLQUdNLGlCQUFaQSxHQUFvQyxPQUFaQSxHQUMvQixNQUFNLElBQUl2TSxNQUFNOEksRUFBWUMsRUFBUUMsRUFBZ0JDLEdBQ2hEOzs7Ozs7Ozs7Ozs7Ozs7O0lBcUlaM1IsRUFBUWtWLGtCQTlKUixTQUEyQnpELEVBQVFDLEVBQWdCeUQsRUFBV3hELEdBQzFELEtBQUlBLEdBQWF3RCxJQUdRLGlCQUFkQSxFQUVQLE1BQU0sSUFBSXpNLE1BQU04SSxFQUFZQyxFQUFRQyxFQUFnQkMsR0FDaEQsMEMsOENDMzdDWi9RLE9BQU9DLGVBQWViLEVBQVMsYUFBYyxDQUFFbUIsT0FBTyxJQUV0RCxJQUFJOEcsRUFBUSxFQUFRLEdBQ2hCbU4sRUFBTyxFQUFRLEdBS2ZDLEVBQTJCLFdBTzNCLFNBQVNBLEVBQVU1VSxFQUFNNlUsRUFBaUJDLEdBQ3RDOVMsS0FBS2hDLEtBQU9BLEVBQ1pnQyxLQUFLNlMsZ0JBQWtCQSxFQUN2QjdTLEtBQUs4UyxLQUFPQSxFQUNaOVMsS0FBSytTLG1CQUFvQixFQUl6Qi9TLEtBQUtnVCxhQUFlLEdBQ3BCaFQsS0FBS2lULGtCQUFvQixPQWM3QixPQVpBTCxFQUFVdlQsVUFBVTZULHFCQUF1QixTQUFVdFUsR0FFakQsT0FEQW9CLEtBQUtpVCxrQkFBb0JyVSxFQUNsQm9CLE1BRVg0UyxFQUFVdlQsVUFBVThULHFCQUF1QixTQUFVSixHQUVqRCxPQURBL1MsS0FBSytTLGtCQUFvQkEsRUFDbEIvUyxNQUVYNFMsRUFBVXZULFVBQVUrVCxnQkFBa0IsU0FBVUMsR0FFNUMsT0FEQXJULEtBQUtnVCxhQUFlSyxFQUNiclQsTUFFSjRTLEVBOUJtQixHQWlEMUJVLEVBQXFCLFlBc0JyQkMsRUFBMEIsV0FDMUIsU0FBU0EsRUFBU3ZWLEVBQU13VixHQUNwQnhULEtBQUtoQyxLQUFPQSxFQUNaZ0MsS0FBS3dULFVBQVlBLEVBQ2pCeFQsS0FBS3lULFVBQVksS0FDakJ6VCxLQUFLMFQsVUFBWSxJQUFJQyxJQUNyQjNULEtBQUs0VCxrQkFBb0IsSUFBSUQsSUFnSmpDLE9BMUlBSixFQUFTbFUsVUFBVWYsSUFBTSxTQUFVdVYsUUFDWixJQUFmQSxJQUF5QkEsRUFBYVAsR0FFMUMsSUFBSVEsRUFBdUI5VCxLQUFLK1QsNEJBQTRCRixHQUM1RCxJQUFLN1QsS0FBSzRULGtCQUFrQkksSUFBSUYsR0FBdUIsQ0FDbkQsSUFBSUcsRUFBVyxJQUFJdEIsRUFBS2xKLFNBQ3hCekosS0FBSzRULGtCQUFrQk0sSUFBSUosRUFBc0JHLEdBRWpELElBQ0ksSUFBSUUsRUFBV25VLEtBQUtvVSx1QkFBdUJOLEdBQ3ZDSyxHQUNBRixFQUFTalMsUUFBUW1TLEdBR3pCLE1BQU8zVCxLQUtYLE9BQU9SLEtBQUs0VCxrQkFBa0J0VixJQUFJd1YsR0FBc0JuSyxTQUU1RDRKLEVBQVNsVSxVQUFVZ1YsYUFBZSxTQUFVQyxHQUN4QyxJQUFJckosRUFBS3pGLEVBQU10RixTQUFTLENBQUUyVCxXQUFZUCxFQUFvQnBFLFVBQVUsR0FBU29GLEdBQVVULEVBQWE1SSxFQUFHNEksV0FBWTNFLEVBQVdqRSxFQUFHaUUsU0FFN0g0RSxFQUF1QjlULEtBQUsrVCw0QkFBNEJGLEdBQzVELElBQ0ksSUFBSU0sRUFBV25VLEtBQUtvVSx1QkFBdUJOLEdBQzNDLElBQUtLLEVBQVUsQ0FDWCxHQUFJakYsRUFDQSxPQUFPLEtBRVgsTUFBTWpKLE1BQU0sV0FBYWpHLEtBQUtoQyxLQUFPLHFCQUV6QyxPQUFPbVcsRUFFWCxNQUFPM1QsR0FDSCxHQUFJME8sRUFDQSxPQUFPLEtBR1AsTUFBTTFPLElBSWxCK1MsRUFBU2xVLFVBQVVrVixhQUFlLFdBQzlCLE9BQU92VSxLQUFLeVQsV0FFaEJGLEVBQVNsVSxVQUFVbVYsYUFBZSxTQUFVZixHQUN4QyxJQUFJZ0IsRUFBS3hKLEVBQ1QsR0FBSXdJLEVBQVV6VixPQUFTZ0MsS0FBS2hDLEtBQ3hCLE1BQU1pSSxNQUFNLHlCQUEyQndOLEVBQVV6VixLQUFPLGlCQUFtQmdDLEtBQUtoQyxLQUFPLEtBRTNGLEdBQUlnQyxLQUFLeVQsVUFDTCxNQUFNeE4sTUFBTSxpQkFBbUJqRyxLQUFLaEMsS0FBTyw4QkFJL0MsR0FGQWdDLEtBQUt5VCxVQUFZQSxFQXlGekIsU0FBMEJBLEdBQ3RCLE1BQXVDLFVBQWhDQSxFQUFVUjs7Ozs7Ozs7Ozs7Ozs7OztHQXhGVHlCLENBQWlCakIsR0FDakIsSUFDSXpULEtBQUtvVSx1QkFBdUJkLEdBRWhDLE1BQU85UyxJQU9YLElBSUksSUFBSyxJQUFJMEssRUFBSzFGLEVBQU03QixTQUFTM0QsS0FBSzRULGtCQUFrQmpDLFdBQVlnRCxFQUFLekosRUFBRzlJLFFBQVN1UyxFQUFHcFMsS0FBTW9TLEVBQUt6SixFQUFHOUksT0FBUSxDQUN0RyxJQUFJd1MsRUFBS3BQLEVBQU01QixPQUFPK1EsRUFBR2pXLE1BQU8sR0FBSW1XLEVBQXFCRCxFQUFHLEdBQUlFLEVBQW1CRixFQUFHLEdBQ2xGZCxFQUF1QjlULEtBQUsrVCw0QkFBNEJjLEdBQzVELElBRUksSUFBSVYsRUFBV25VLEtBQUtvVSx1QkFBdUJOLEdBQzNDZ0IsRUFBaUI5UyxRQUFRbVMsR0FFN0IsTUFBTzNULE1BTWYsTUFBT3VVLEdBQVNOLEVBQU0sQ0FBRTNRLE1BQU9pUixHQUMvQixRQUNJLElBQ1FKLElBQU9BLEVBQUdwUyxPQUFTMEksRUFBS0MsRUFBRzhKLFNBQVMvSixFQUFHck4sS0FBS3NOLEdBRXBELFFBQVUsR0FBSXVKLEVBQUssTUFBTUEsRUFBSTNRLFNBR3JDeVAsRUFBU2xVLFVBQVU0VixjQUFnQixTQUFVcEIsUUFDdEIsSUFBZkEsSUFBeUJBLEVBQWFQLEdBQzFDdFQsS0FBSzRULGtCQUFrQnNCLE9BQU9yQixHQUM5QjdULEtBQUswVCxVQUFVd0IsT0FBT3JCLElBSTFCTixFQUFTbFUsVUFBVTZWLE9BQVMsV0FDeEIsT0FBTzFQLEVBQU05RCxVQUFVMUIsVUFBTSxPQUFRLEdBQVEsV0FDekMsSUFBSW1WLEVBQ0osT0FBTzNQLEVBQU0vQyxZQUFZekMsTUFBTSxTQUFVaUwsR0FDckMsT0FBUUEsRUFBR2xJLE9BQ1AsS0FBSyxFQUVELE9BREFvUyxFQUFXdFYsTUFBTXVWLEtBQUtwVixLQUFLMFQsVUFBVTJCLFVBQzlCLENBQUMsRUFBYXRULFFBQVF1VCxJQUFJSCxFQUN4QkksUUFBTyxTQUFVaEwsR0FBVyxNQUFPLGFBQWNBLEtBRWpEMEcsS0FBSSxTQUFVMUcsR0FBVyxPQUFPQSxFQUFRaUwsU0FBU04sY0FDOUQsS0FBSyxFQUVELE9BREFqSyxFQUFHakksT0FDSSxDQUFDLFdBSzVCdVEsRUFBU2xVLFVBQVVvVyxlQUFpQixXQUNoQyxPQUF5QixNQUFsQnpWLEtBQUt5VCxXQUVoQkYsRUFBU2xVLFVBQVUrVSx1QkFBeUIsU0FBVVAsR0FDbEQsSUFBSU0sRUFBV25VLEtBQUswVCxVQUFVcFYsSUFBSXVWLEdBS2xDLE9BSktNLEdBQVluVSxLQUFLeVQsWUFDbEJVLEVBQVduVSxLQUFLeVQsVUFBVVosZ0JBQWdCN1MsS0FBS3dULFVBZ0IzRCxTQUF1Q0ssR0FDbkMsT0FBT0EsSUFBZVAsT0FBcUIvSixFQUFZc0ssRUFqQlc2QixDQUE4QjdCLElBQ3hGN1QsS0FBSzBULFVBQVVRLElBQUlMLEVBQVlNLElBRTVCQSxHQUFZLE1BRXZCWixFQUFTbFUsVUFBVTBVLDRCQUE4QixTQUFVRixHQUN2RCxPQUFJN1QsS0FBS3lULFVBQ0V6VCxLQUFLeVQsVUFBVVYsa0JBQW9CYyxFQUFhUCxFQUdoRE8sR0FHUk4sRUF0SmtCLEdBbUw3QixJQUFJb0MsRUFBb0MsV0FDcEMsU0FBU0EsRUFBbUIzWCxHQUN4QmdDLEtBQUtoQyxLQUFPQSxFQUNaZ0MsS0FBSzRWLFVBQVksSUFBSWpDLElBNkN6QixPQWxDQWdDLEVBQW1CdFcsVUFBVXdXLGFBQWUsU0FBVXBDLEdBQ2xELElBQUlxQyxFQUFXOVYsS0FBSytWLFlBQVl0QyxFQUFVelYsTUFDMUMsR0FBSThYLEVBQVNMLGlCQUNULE1BQU0sSUFBSXhQLE1BQU0sYUFBZXdOLEVBQVV6VixLQUFPLHFDQUF1Q2dDLEtBQUtoQyxNQUVoRzhYLEVBQVN0QixhQUFhZixJQUUxQmtDLEVBQW1CdFcsVUFBVTJXLHdCQUEwQixTQUFVdkMsR0FDOUN6VCxLQUFLK1YsWUFBWXRDLEVBQVV6VixNQUM3QnlYLGtCQUVUelYsS0FBSzRWLFVBQVVWLE9BQU96QixFQUFVelYsTUFFcENnQyxLQUFLNlYsYUFBYXBDLElBU3RCa0MsRUFBbUJ0VyxVQUFVMFcsWUFBYyxTQUFVL1gsR0FDakQsR0FBSWdDLEtBQUs0VixVQUFVNUIsSUFBSWhXLEdBQ25CLE9BQU9nQyxLQUFLNFYsVUFBVXRYLElBQUlOLEdBRzlCLElBQUk4WCxFQUFXLElBQUl2QyxFQUFTdlYsRUFBTWdDLE1BRWxDLE9BREFBLEtBQUs0VixVQUFVMUIsSUFBSWxXLEVBQU04WCxHQUNsQkEsR0FFWEgsRUFBbUJ0VyxVQUFVNFcsYUFBZSxXQUN4QyxPQUFPcFcsTUFBTXVWLEtBQUtwVixLQUFLNFYsVUFBVVAsV0FFOUJNLEVBaEQ0QixHQW1EdkNwWSxFQUFRcVYsVUFBWUEsRUFDcEJyVixFQUFRb1ksbUJBQXFCQSxFQUM3QnBZLEVBQVFnVyxTQUFXQSxHLDZCQ3ZUbkJwVixPQUFPQyxlQUFlYixFQUFTLGFBQWMsQ0FBRW1CLE9BQU8sSUFFdEQsSUFxQkl1TSxFQXFEQWlMLEVBMUVBMVEsRUFBUSxFQUFRLEdBQ2hCbU4sRUFBTyxFQUFRLEdBQ2ZjLEVBQVksRUFBUSxHQUNwQjBDLEVBQVcsRUFBUSxHQW1CbkJDLElBQVVuTCxFQUFLLElBQ1osVUFBeUIsb0ZBRTVCQSxFQUFHLGdCQUFxQyxnQ0FDeENBLEVBQUcsaUJBQXVDLGlEQUMxQ0EsRUFBRyxlQUFtQyxrREFDdENBLEVBQUcsd0JBQXFELDZFQUV4REEsR0FDQW9MLEVBQWdCLElBQUkxRCxFQUFLckksYUFBYSxNQUFPLFdBQVk4TCxHQUV6RHBZLEVBQU8sZ0JBQ1BzWSxFQUFVLFFBeUNWaEQsRUFBcUIsWUFDckJpRCxJQUF1QkwsRUFBTyxJQUN6QmxZLEdBQVEsWUFDYmtZLEVBMUNTLHVCQTBDTSxpQkFDZkEsRUF6Q1Msa0JBeUNNLFlBQ2ZBLEVBeENTLHNCQXdDTSxZQUNmQSxFQXZDUyx1QkF1Q00sVUFDZkEsRUF0Q1MsMkJBc0NNLFdBQ2ZBLEVBckNTLHVCQXFDTSxXQUNmQSxFQXBDUyx5QkFvQ00sWUFDZkEsRUFuQ1MsMkJBbUNNLFVBQ2ZBLEVBbENTLHFCQWtDTSxXQUNmQSxFQWpDUyx1QkFpQ00sV0FDZkEsRUFBSyxXQUFhLFVBQ2xCQSxFQWpDUyxvQkFpQ00sY0FDZkEsR0FrQkFNLEVBQVMsSUFBSUwsRUFBU00sT0FBTyxpQkFzQjdCQyxFQUFpQyxXQUNqQyxTQUFTQSxFQUFnQnBDLEVBQVNxQyxFQUFRQyxHQUN0QyxJQUFJbkMsRUFBS3hKLEVBQ0x2QixFQUFRMUosS0FDWkEsS0FBSzRXLFVBQVlBLEVBQ2pCNVcsS0FBSzZXLFlBQWEsRUFDbEI3VyxLQUFLOFcsTUFBUUgsRUFBTzNZLEtBQ3BCZ0MsS0FBSytXLGdDQUNESixFQUFPSyxpQ0FBa0MsRUFDN0NoWCxLQUFLaVgsU0FBV3RFLEVBQUsvQyxTQUFTMEUsR0FDOUJ0VSxLQUFLd1QsVUFBWSxJQUFJQyxFQUFVa0MsbUJBQW1CZ0IsRUFBTzNZLE1BRXpEZ0MsS0FBS2tYLGNBQWMsSUFBSXpELEVBQVViLFVBQVUsT0FBTyxXQUFjLE9BQU9sSixJQUFVLFdBQ2pGLElBRUksSUFBSyxJQUFJd0IsRUFBSzFGLEVBQU03QixTQUFTM0QsS0FBSzRXLFVBQVVwQixTQUFTMkIsV0FBVzlCLFVBQVdWLEVBQUt6SixFQUFHOUksUUFBU3VTLEVBQUdwUyxLQUFNb1MsRUFBS3pKLEVBQUc5SSxPQUFRLENBQ2pILElBQUlnVixFQUFjekMsRUFBR2pXLE1BQ3JCc0IsS0FBS2tYLGNBQWNFLElBRzNCLE1BQU9yQyxHQUFTTixFQUFNLENBQUUzUSxNQUFPaVIsR0FDL0IsUUFDSSxJQUNRSixJQUFPQSxFQUFHcFMsT0FBUzBJLEVBQUtDLEVBQUc4SixTQUFTL0osRUFBR3JOLEtBQUtzTixHQUVwRCxRQUFVLEdBQUl1SixFQUFLLE1BQU1BLEVBQUkzUSxRQXlHckMsT0F0R0EzRixPQUFPQyxlQUFlc1ksRUFBZ0JyWCxVQUFXLGlDQUFrQyxDQUMvRWYsSUFBSyxXQUVELE9BREEwQixLQUFLcVgsa0JBQ0VyWCxLQUFLK1csaUNBRWhCN0MsSUFBSyxTQUFVb0QsR0FDWHRYLEtBQUtxWCxrQkFDTHJYLEtBQUsrVyxnQ0FBa0NPLEdBRTNDalosWUFBWSxFQUNaa1osY0FBYyxJQUVsQnBaLE9BQU9DLGVBQWVzWSxFQUFnQnJYLFVBQVcsT0FBUSxDQUNyRGYsSUFBSyxXQUVELE9BREEwQixLQUFLcVgsa0JBQ0VyWCxLQUFLOFcsT0FFaEJ6WSxZQUFZLEVBQ1prWixjQUFjLElBRWxCcFosT0FBT0MsZUFBZXNZLEVBQWdCclgsVUFBVyxVQUFXLENBQ3hEZixJQUFLLFdBRUQsT0FEQTBCLEtBQUtxWCxrQkFDRXJYLEtBQUtpWCxVQUVoQjVZLFlBQVksRUFDWmtaLGNBQWMsSUFFbEJiLEVBQWdCclgsVUFBVTZWLE9BQVMsV0FDL0IsSUFBSXhMLEVBQVExSixLQUNaLE9BQU8sSUFBSStCLFNBQVEsU0FBVUMsR0FDekIwSCxFQUFNMk4sa0JBQ05yVixPQUVDUSxNQUFLLFdBRU4sT0FEQWtILEVBQU1rTixVQUFVcEIsU0FBU2dDLFVBQVU5TixFQUFNb04sT0FDbEMvVSxRQUFRdVQsSUFBSTVMLEVBQU04SixVQUFVeUMsZUFBZWhGLEtBQUksU0FBVTZFLEdBQVksT0FBT0EsRUFBU1osZ0JBRTNGMVMsTUFBSyxXQUNOa0gsRUFBTW1OLFlBQWEsTUFpQjNCSCxFQUFnQnJYLFVBQVVvWSxZQUFjLFNBQVV6WixFQUFNNlcsR0FJcEQsWUFIMkIsSUFBdkJBLElBQWlDQSxFQUFxQnZCLEdBQzFEdFQsS0FBS3FYLGtCQUVFclgsS0FBS3dULFVBQVV1QyxZQUFZL1gsR0FBTXFXLGFBQWEsQ0FDakRSLFdBQVlnQixLQWFwQjZCLEVBQWdCclgsVUFBVXFZLHVCQUF5QixTQUFVMVosRUFBTTZXLFFBQ3BDLElBQXZCQSxJQUFpQ0EsRUFBcUJ2QixHQUUxRHRULEtBQUt3VCxVQUFVdUMsWUFBWS9YLEdBQU1pWCxjQUFjSixJQUtuRDZCLEVBQWdCclgsVUFBVTZYLGNBQWdCLFNBQVV6RCxHQUNoRCxJQUNJelQsS0FBS3dULFVBQVVxQyxhQUFhcEMsR0FFaEMsTUFBT2pULEdBQ0hnVyxFQUFPbUIsTUFBTSxhQUFlbEUsRUFBVXpWLEtBQU8sd0NBQTBDZ0MsS0FBS2hDLEtBQU13QyxLQUcxR2tXLEVBQWdCclgsVUFBVXVZLHlCQUEyQixTQUFVbkUsR0FDM0R6VCxLQUFLd1QsVUFBVXdDLHdCQUF3QnZDLElBTTNDaUQsRUFBZ0JyWCxVQUFVZ1ksZ0JBQWtCLFdBQ3hDLEdBQUlyWCxLQUFLNlcsV0FDTCxNQUFNUixFQUFjdFgsT0FBTyxjQUFpQyxDQUFFOFksUUFBUzdYLEtBQUs4VyxTQUc3RUosRUFsSXlCLEdBc0luQ0EsRUFBZ0JyWCxVQUFVckIsTUFBUTBZLEVBQWdCclgsVUFBVWlWLFNBQ3pEb0MsRUFBZ0JyWCxVQUFVNlYsUUFDMUJoTSxRQUFRNE8sSUFBSSxNQUVoQixJQUFJQyxFQUFZOzs7Ozs7Ozs7Ozs7Ozs7O0dBc1FoQixJQUFJQzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFqQkosU0FBU0MsSUFDTCxJQUFJdkYsRUE3TlIsU0FBcUN3RixHQUNqQyxJQUFJQyxFQUFPLEdBRVBoQixFQUFhLElBQUl4RCxJQUVqQmpCLEVBQVksQ0FJWjdULFlBQVksRUFDWnVaLGNBaURKLFNBQXVCOUQsRUFBUytELFFBQ1YsSUFBZEEsSUFBd0JBLEVBQVksSUFDeEMsR0FBeUIsaUJBQWRBLEdBQXdDLE9BQWRBLEVBQW9CLENBRXJEQSxFQUFZLENBQUVyYSxLQUREcWEsR0FHakIsSUFBSTFCLEVBQVMwQixPQUNPOU8sSUFBaEJvTixFQUFPM1ksT0FDUDJZLEVBQU8zWSxLQUFPc1YsR0FFbEIsSUFBSXRWLEVBQU8yWSxFQUFPM1ksS0FDbEIsR0FBb0IsaUJBQVRBLElBQXNCQSxFQUM3QixNQUFNcVksRUFBY3RYLE9BQU8sZUFBbUMsQ0FDMUQ4WSxRQUFTeFAsT0FBT3JLLEtBR3hCLEdBQUkyVSxFQUFLbEQsU0FBUzBJLEVBQU1uYSxHQUNwQixNQUFNcVksRUFBY3RYLE9BQU8sZ0JBQXFDLENBQUU4WSxRQUFTN1osSUFFL0UsSUFBSXNhLEVBQU0sSUFBSUosRUFBZ0I1RCxFQUFTcUMsRUFBUWpFLEdBRS9DLE9BREF5RixFQUFLbmEsR0FBUXNhLEVBQ05BLEdBcEVQQSxJQUFLQSxFQUNMQyxnQkFnSkosU0FBeUJDLEVBQWtCbEMsRUFBU21DLEdBQ2hELElBQUl4TixFQUdBeU4sRUFBK0QsUUFBcER6TixFQUFLc0wsRUFBb0JpQyxVQUEwQyxJQUFQdk4sRUFBZ0JBLEVBQUt1TixFQUM1RkMsSUFDQUMsR0FBVyxJQUFNRCxHQUVyQixJQUFJRSxFQUFrQkQsRUFBUUUsTUFBTSxTQUNoQ0MsRUFBa0J2QyxFQUFRc0MsTUFBTSxTQUNwQyxHQUFJRCxHQUFtQkUsRUFBaUIsQ0FDcEMsSUFBSUMsRUFBVSxDQUNWLCtCQUFrQ0osRUFBVSxtQkFBdUJwQyxFQUFVLE1BWWpGLE9BVklxQyxHQUNBRyxFQUFRclYsS0FBSyxpQkFBb0JpVixFQUFVLHFEQUUzQ0MsR0FBbUJFLEdBQ25CQyxFQUFRclYsS0FBSyxPQUVib1YsR0FDQUMsRUFBUXJWLEtBQUssaUJBQW9CNlMsRUFBVSwwREFFL0NFLEVBQU9uTCxLQUFLeU4sRUFBUWhSLEtBQUssTUFHN0JpUixFQUFrQixJQUFJdEYsRUFBVWIsVUFBVThGLEVBQVUsWUFBWSxXQUFjLE1BQU8sQ0FBR0EsUUFBU0EsRUFBU3BDLFFBQVNBLEtBQWUsYUF4S2xJNkIsS0FBTSxLQUNOdlMsWUFBYW1TLEVBQ2J2QyxTQUFVLENBQ051RCxrQkFBbUJBLEVBQ25CdkIsVUF5QlIsU0FBbUJ4WixVQUNSbWEsRUFBS25hLElBekJSbVosV0FBWUEsRUFDWjZCLGFBc0tSLFNBQXNCVixFQUFLdGEsR0FDdkIsR0FBYSxlQUFUQSxFQUNBLE9BQU8sS0FHWCxPQURpQkEsS0E3SXJCLFNBQVNzYSxFQUFJdGEsR0FFVCxHQURBQSxFQUFPQSxHQUFRc1YsR0FDVlgsRUFBS2xELFNBQVMwSSxFQUFNbmEsR0FDckIsTUFBTXFZLEVBQWN0WCxPQUFPLFNBQXVCLENBQUU4WSxRQUFTN1osSUFFakUsT0FBT21hLEVBQUtuYSxHQWtDaEIsU0FBUythLEVBQWtCdEYsR0FDdkIsSUFBSWdCLEVBQUt4SixFQUNMZ08sRUFBZ0J4RixFQUFVelYsS0FDOUIsR0FBSW1aLEVBQVduRCxJQUFJaUYsR0FFZixPQURBekMsRUFBT21CLE1BQU0sc0RBQXdEc0IsRUFBZ0IsS0FDM0QsV0FBbkJ4RixFQUFVWCxLQUVUSixFQUFVdUcsR0FDWixLQUlWLEdBRkE5QixFQUFXakQsSUFBSStFLEVBQWV4RixHQUVQLFdBQW5CQSxFQUFVWCxLQUFnQyxDQUUxQyxJQUFJb0csRUFBbUIsU0FBVUMsR0FHN0IsUUFGZSxJQUFYQSxJQUFxQkEsRUFBU2IsS0FFRyxtQkFBMUJhLEVBQU9GLEdBR2QsTUFBTTVDLEVBQWN0WCxPQUFPLHVCQUFtRCxDQUMxRThZLFFBQVNvQixJQUtqQixPQUFPRSxFQUFPRixXQUdhMVAsSUFBM0JrSyxFQUFVVCxjQUNWTCxFQUFLeEosV0FBVytQLEVBQWtCekYsRUFBVVQsY0FHaEROLEVBQVV1RyxHQUFpQkMsRUFHM0JoQixFQUFnQjdZLFVBQVU0WixHQUl0QixXQUVJLElBREEsSUFBSTNKLEVBQU8sR0FDRjNFLEVBQUssRUFBR0EsRUFBS3ZLLFVBQVVDLE9BQVFzSyxJQUNwQzJFLEVBQUszRSxHQUFNdkssVUFBVXVLLEdBRXpCLElBQUl5TyxFQUFhcFosS0FBS3lYLFlBQVl4WSxLQUFLZSxLQUFNaVosR0FDN0MsT0FBT0csRUFBVzlZLE1BQU1OLEtBQU15VCxFQUFVVixrQkFBb0J6RCxFQUFPLEtBRy9FLElBRUksSUFBSyxJQUFJcEUsRUFBSzFGLEVBQU03QixTQUFTeEYsT0FBT2dOLEtBQUtnTixJQUFReEQsRUFBS3pKLEVBQUc5SSxRQUFTdVMsRUFBR3BTLEtBQU1vUyxFQUFLekosRUFBRzlJLE9BQVEsQ0FDdkYsSUFBSXlWLEVBQVVsRCxFQUFHalcsTUFDakJ5WixFQUFLTixHQUFTWCxjQUFjekQsSUFHcEMsTUFBT3NCLEdBQVNOLEVBQU0sQ0FBRTNRLE1BQU9pUixHQUMvQixRQUNJLElBQ1FKLElBQU9BLEVBQUdwUyxPQUFTMEksRUFBS0MsRUFBRzhKLFNBQVMvSixFQUFHck4sS0FBS3NOLEdBRXBELFFBQVUsR0FBSXVKLEVBQUssTUFBTUEsRUFBSTNRLE9BRWpDLE1BQTBCLFdBQW5CMlAsRUFBVVgsS0FFVEosRUFBVXVHLEdBQ1osS0F1Q1YsT0EvSkF2RyxFQUFtQixRQUFJQSxFQUV2QnZVLE9BQU9DLGVBQWVzVSxFQUFXLE9BQVEsQ0FDckNwVSxJQStDSixXQUVJLE9BQU9ILE9BQU9nTixLQUFLZ04sR0FBTWxILEtBQUksU0FBVWpULEdBQVEsT0FBT21hLEVBQUtuYSxTQTdCL0RzYSxFQUFTLElBQUlKLEVBd0lOeEYsR0EyQlMyRyxDQUE0QjNDLEdBYzVDLE9BYkFoRSxFQUFVOEMsU0FBV2hRLEVBQU10RixTQUFTc0YsRUFBTXRGLFNBQVMsR0FBSXdTLEVBQVU4QyxVQUFXLENBQUV5Qyx3QkFBeUJBLEVBQ25HcUIsZ0JBU0osU0FBeUJqRyxHQUNyQlYsRUFBS3hKLFdBQVd1SixFQUFXVyxJQVQzQjNELGdCQUFpQmlELEVBQUtqRCxnQkFDdEJwRixhQUFjcUksRUFBS3JJLGFBQ25CbkIsV0FBWXdKLEVBQUt4SixhQVNkdUosRUFFSXVGLEdBa0JYc0IsRUFBdUMsV0FDdkMsU0FBU0EsRUFBc0IvRixHQUMzQnhULEtBQUt3VCxVQUFZQSxFQXFCckIsT0FqQkErRixFQUFzQmxhLFVBQVVtYSxzQkFBd0IsV0FJcEQsT0FIZ0J4WixLQUFLd1QsVUFBVXlDLGVBSTFCaEYsS0FBSSxTQUFVNkUsR0FDZixHQXFCWixTQUFrQ0EsR0FDOUIsSUFBSTdLLEVBQ0F3SSxFQUFZcUMsRUFBU3ZCLGVBQ3pCLE1BQTJFLGFBQTlDLFFBQXBCdEosRUFBS3dJLFNBQThCLElBQVB4SSxPQUFnQixFQUFTQSxFQUFHNkg7Ozs7Ozs7Ozs7Ozs7Ozs7R0F4QnJEMkcsQ0FBeUIzRCxHQUFXLENBQ3BDLElBQUl2TCxFQUFVdUwsRUFBU3pCLGVBQ3ZCLE9BQU85SixFQUFRbU8sUUFBVSxJQUFNbk8sRUFBUStMLFFBR3ZDLE9BQU8sUUFHVmYsUUFBTyxTQUFVbUUsR0FBYSxPQUFPQSxLQUNyQzVSLEtBQUssTUFFUHlSLEVBdkIrQjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBaUYxQyxHQUFJNUcsRUFBSzdDLGtCQUFpQ3ZHLElBQWxCd0csS0FBS2lJLFNBQXdCLENBQ2pEeEIsRUFBT25MLEtBQUssbUlBRVosSUFBSXNPLEVBQWE1SixLQUFLaUksU0FBU3BTLFlBQzNCK1QsR0FBY0EsRUFBV2xaLFFBQVEsU0FBVyxHQUM1QytWLEVBQU9uTCxLQUFLLHNOQUdwQixJQUFJK00sRUFBZ0JKLEVBQVNJLGNBSTdCSixFQUFTSSxjQUFnQixXQUVyQixJQURBLElBQUk5SSxFQUFPLEdBQ0YzRSxFQUFLLEVBQUdBLEVBQUt2SyxVQUFVQyxPQUFRc0ssSUFDcEMyRSxFQUFLM0UsR0FBTXZLLFVBQVV1SyxHQVF6QixPQUhJZ0ksRUFBS3ZDLFVBQ0xvRyxFQUFPbkwsS0FBSyx5cEJBRVQrTSxFQUFjOVgsV0FBTWlKLEVBQVcrRixJQUUxQyxJQUFJc0ssRUFBYTVCLEdBbkRqQixTQUFnQ0EsRUFBVVMsR0FDdENULEVBQVN4QyxTQUFTdUQsa0JBQWtCLElBQUl0RixFQUFVYixVQUFVLG1CQUFtQixTQUFVWSxHQUFhLE9BQU8sSUFBSStGLEVBQXNCL0YsS0FBZSxZQUV0SndFLEVBQVNPLGdCQUFnQnZhLEVBQU1zWSxFQUFTbUMsR0FFeENULEVBQVNPLGdCQUFnQixVQUFXLElBK0N4Q3NCLENBQXVCRCxHQUV2QnJjLEVBQVErSCxRQUFVc1UsRUFDbEJyYyxFQUFReWEsU0FBVzRCLEcsNkJDbHBCbkIsSUFGMEJFLEVBRXRCOUIsR0FGc0I4QixFQUVLLEVBQVEsS0FGc0IsaUJBQVBBLEdBQW9CLFlBQWFBLEVBQU1BLEVBQVksUUFBSUE7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBdUI3RzlCLEVBQVNPLGdCQW5CRSxXQUNHLFFBa0IwQixPQUV4Qy9hLEVBQU9ELFFBQVV5YSxHLGNDM0JqQixJQUFJblYsRUFHSkEsRUFBSSxXQUNILE9BQU83QyxLQURKLEdBSUosSUFFQzZDLEVBQUlBLEdBQUssSUFBSWtYLFNBQVMsY0FBYixHQUNSLE1BQU92WixHQUVjLGlCQUFYMFAsU0FBcUJyTixFQUFJcU4sUUFPckMxUyxFQUFPRCxRQUFVc0YsRzs7Ozs7Ozs7Ozs7Ozs7O0FDSmpCLFNBQVNvQixJQUNMLElBQUssSUFBSXpFLEVBQUksRUFBRy9CLEVBQUksRUFBR3lHLEVBQUs5RCxVQUFVQyxPQUFRNUMsRUFBSXlHLEVBQUl6RyxJQUFLK0IsR0FBS1ksVUFBVTNDLEdBQUc0QyxPQUN4RSxJQUFJOUIsRUFBSXNCLE1BQU1MLEdBQUkyRSxFQUFJLEVBQTNCLElBQThCMUcsRUFBSSxFQUFHQSxFQUFJeUcsRUFBSXpHLElBQ3pDLElBQUssSUFBSTJHLEVBQUloRSxVQUFVM0MsR0FBSTRHLEVBQUksRUFBR0MsRUFBS0YsRUFBRS9ELE9BQVFnRSxFQUFJQyxFQUFJRCxJQUFLRixJQUMxRDVGLEVBQUU0RixHQUFLQyxFQUFFQyxHQUNqQixPQUFPOUY7Ozs7Ozs7Ozs7Ozs7Ozs7R0FwQlgsbUlBMENBLElBWUl5YixFQVpBdEcsRUFBWSxJQWFoQixTQUFXc0csR0FDUEEsRUFBU0EsRUFBZ0IsTUFBSSxHQUFLLFFBQ2xDQSxFQUFTQSxFQUFrQixRQUFJLEdBQUssVUFDcENBLEVBQVNBLEVBQWUsS0FBSSxHQUFLLE9BQ2pDQSxFQUFTQSxFQUFlLEtBQUksR0FBSyxPQUNqQ0EsRUFBU0EsRUFBZ0IsTUFBSSxHQUFLLFFBQ2xDQSxFQUFTQSxFQUFpQixPQUFJLEdBQUssU0FOdkMsQ0FPR0EsSUFBYUEsRUFBVyxLQUkzQixJQUFJQyxFQUFrQkQsRUFBU0UsS0FNM0JDLEVBQW9CLFNBQVVoRyxFQUFVaUcsR0FFeEMsSUFEQSxJQUFJOUssRUFBTyxHQUNGM0UsRUFBSyxFQUFHQSxFQUFLdkssVUFBVUMsT0FBUXNLLElBQ3BDMkUsRUFBSzNFLEVBQUssR0FBS3ZLLFVBQVV1SyxHQUU3QixLQUFJeVAsRUFBVWpHLEVBQVNrRyxVQUF2QixDQUdBLElBQUkxSixHQUFNLElBQUl0SCxNQUFPaVIsY0FDckIsT0FBUUYsR0FPSixLQUFLSixFQUFTTyxNQUdkLEtBQUtQLEVBQVNRLFFBQ1Z0UixRQUFRNE8sSUFBSXhYLE1BQU00SSxRQUFTakYsRUFBZSxDQUFDLElBQU0wTSxFQUFNLE1BQVF3RCxFQUFTblcsS0FBTyxLQUFNc1IsSUFDckYsTUFDSixLQUFLMEssRUFBU0UsS0FDVmhSLFFBQVF1UixLQUFLbmEsTUFBTTRJLFFBQVNqRixFQUFlLENBQUMsSUFBTTBNLEVBQU0sTUFBUXdELEVBQVNuVyxLQUFPLEtBQU1zUixJQUN0RixNQUNKLEtBQUswSyxFQUFTVSxLQUNWeFIsUUFBUW1DLEtBQUsvSyxNQUFNNEksUUFBU2pGLEVBQWUsQ0FBQyxJQUFNME0sRUFBTSxNQUFRd0QsRUFBU25XLEtBQU8sS0FBTXNSLElBQ3RGLE1BQ0osS0FBSzBLLEVBQVNXLE1BQ1Z6UixRQUFRcEYsTUFBTXhELE1BQU00SSxRQUFTakYsRUFBZSxDQUFDLElBQU0wTSxFQUFNLE1BQVF3RCxFQUFTblcsS0FBTyxLQUFNc1IsSUFDdkYsTUFDSixRQUNJLE1BQU0sSUFBSXJKLE1BQU0sOERBQWdFbVUsRUFBVSxRQUdsRzNELEVBQXdCLFdBT3hCLFNBQVNBLEVBQU96WSxHQUNaZ0MsS0FBS2hDLEtBQU9BLEVBSVpnQyxLQUFLNGEsVUFBWVgsRUFJakJqYSxLQUFLNmEsWUFBY1YsRUFJbkJ6RyxFQUFValEsS0FBS3pELE1Ba0VuQixPQWhFQTdCLE9BQU9DLGVBQWVxWSxFQUFPcFgsVUFBVyxXQUFZLENBQ2hEZixJQUFLLFdBQ0QsT0FBTzBCLEtBQUs0YSxXQUVoQjFHLElBQUssU0FBVW9ELEdBQ1gsS0FBTUEsS0FBTzBDLEdBQ1QsTUFBTSxJQUFJelcsVUFBVSx3Q0FFeEJ2RCxLQUFLNGEsVUFBWXRELEdBRXJCalosWUFBWSxFQUNaa1osY0FBYyxJQUVsQnBaLE9BQU9DLGVBQWVxWSxFQUFPcFgsVUFBVyxhQUFjLENBQ2xEZixJQUFLLFdBQ0QsT0FBTzBCLEtBQUs2YSxhQUVoQjNHLElBQUssU0FBVW9ELEdBQ1gsR0FBbUIsbUJBQVJBLEVBQ1AsTUFBTSxJQUFJL1QsVUFBVSxxREFFeEJ2RCxLQUFLNmEsWUFBY3ZELEdBRXZCalosWUFBWSxFQUNaa1osY0FBYyxJQUtsQmQsRUFBT3BYLFVBQVVzWSxNQUFRLFdBRXJCLElBREEsSUFBSXJJLEVBQU8sR0FDRjNFLEVBQUssRUFBR0EsRUFBS3ZLLFVBQVVDLE9BQVFzSyxJQUNwQzJFLEVBQUszRSxHQUFNdkssVUFBVXVLLEdBRXpCM0ssS0FBSzZhLFlBQVl2YSxNQUFNTixLQUFNaUUsRUFBZSxDQUFDakUsS0FBTWdhLEVBQVNPLE9BQVFqTCxLQUV4RW1ILEVBQU9wWCxVQUFVeVksSUFBTSxXQUVuQixJQURBLElBQUl4SSxFQUFPLEdBQ0YzRSxFQUFLLEVBQUdBLEVBQUt2SyxVQUFVQyxPQUFRc0ssSUFDcEMyRSxFQUFLM0UsR0FBTXZLLFVBQVV1SyxHQUV6QjNLLEtBQUs2YSxZQUFZdmEsTUFBTU4sS0FBTWlFLEVBQWUsQ0FBQ2pFLEtBQU1nYSxFQUFTUSxTQUFVbEwsS0FFMUVtSCxFQUFPcFgsVUFBVW9iLEtBQU8sV0FFcEIsSUFEQSxJQUFJbkwsRUFBTyxHQUNGM0UsRUFBSyxFQUFHQSxFQUFLdkssVUFBVUMsT0FBUXNLLElBQ3BDMkUsRUFBSzNFLEdBQU12SyxVQUFVdUssR0FFekIzSyxLQUFLNmEsWUFBWXZhLE1BQU1OLEtBQU1pRSxFQUFlLENBQUNqRSxLQUFNZ2EsRUFBU0UsTUFBTzVLLEtBRXZFbUgsRUFBT3BYLFVBQVVnTSxLQUFPLFdBRXBCLElBREEsSUFBSWlFLEVBQU8sR0FDRjNFLEVBQUssRUFBR0EsRUFBS3ZLLFVBQVVDLE9BQVFzSyxJQUNwQzJFLEVBQUszRSxHQUFNdkssVUFBVXVLLEdBRXpCM0ssS0FBSzZhLFlBQVl2YSxNQUFNTixLQUFNaUUsRUFBZSxDQUFDakUsS0FBTWdhLEVBQVNVLE1BQU9wTCxLQUV2RW1ILEVBQU9wWCxVQUFVeUUsTUFBUSxXQUVyQixJQURBLElBQUl3TCxFQUFPLEdBQ0YzRSxFQUFLLEVBQUdBLEVBQUt2SyxVQUFVQyxPQUFRc0ssSUFDcEMyRSxFQUFLM0UsR0FBTXZLLFVBQVV1SyxHQUV6QjNLLEtBQUs2YSxZQUFZdmEsTUFBTU4sS0FBTWlFLEVBQWUsQ0FBQ2pFLEtBQU1nYSxFQUFTVyxPQUFRckwsS0FFakVtSCxFQXRGZ0I7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBeUczQixTQUFTcUUsRUFBWUMsR0FDakJySCxFQUFVbEMsU0FBUSxTQUFVd0osR0FDeEJBLEVBQUtYLFNBQVdVLE8saUJDbE5oQixTQUFVeGQsR0FBVyxhQUUzQixTQUFTMGQsRUFBUUMsR0FDZixPQUFPcmIsTUFBTVIsVUFBVStMLE1BQU14TixLQUFLc2QsR0FHcEMsU0FBU0MsRUFBaUJDLEdBQ3hCLE9BQU8sSUFBSXJaLFNBQVEsU0FBU0MsRUFBU0MsR0FDbkNtWixFQUFRQyxVQUFZLFdBQ2xCclosRUFBUW9aLEVBQVE5WSxTQUdsQjhZLEVBQVFFLFFBQVUsV0FDaEJyWixFQUFPbVosRUFBUXRYLFdBS3JCLFNBQVN5WCxFQUFxQnBOLEVBQUtHLEVBQVFnQixHQUN6QyxJQUFJOEwsRUFDQTdiLEVBQUksSUFBSXdDLFNBQVEsU0FBU0MsRUFBU0MsR0FFcENrWixFQURBQyxFQUFVak4sRUFBSUcsR0FBUWhPLE1BQU02TixFQUFLbUIsSUFDUDlNLEtBQUtSLEVBQVNDLE1BSTFDLE9BREExQyxFQUFFNmIsUUFBVUEsRUFDTDdiLEVBR1QsU0FBU2ljLEVBQTJCck4sRUFBS0csRUFBUWdCLEdBQy9DLElBQUkvUCxFQUFJZ2MsRUFBcUJwTixFQUFLRyxFQUFRZ0IsR0FDMUMsT0FBTy9QLEVBQUVpRCxNQUFLLFNBQVM5RCxHQUNyQixHQUFLQSxFQUNMLE9BQU8sSUFBSStjLEVBQU8vYyxFQUFPYSxFQUFFNmIsWUFJL0IsU0FBU00sRUFBZ0JDLEVBQVlDLEVBQVlDLEdBQy9DQSxFQUFXckssU0FBUSxTQUFTaEksR0FDMUJyTCxPQUFPQyxlQUFldWQsRUFBV3RjLFVBQVdtSyxFQUFNLENBQ2hEbEwsSUFBSyxXQUNILE9BQU8wQixLQUFLNGIsR0FBWXBTLElBRTFCMEssSUFBSyxTQUFTb0QsR0FDWnRYLEtBQUs0YixHQUFZcFMsR0FBUThOLFFBTWpDLFNBQVN3RSxFQUFvQkgsRUFBWUMsRUFBWUcsRUFBYUYsR0FDaEVBLEVBQVdySyxTQUFRLFNBQVNoSSxHQUNwQkEsS0FBUXVTLEVBQVkxYyxZQUMxQnNjLEVBQVd0YyxVQUFVbUssR0FBUSxXQUMzQixPQUFPK1IsRUFBcUJ2YixLQUFLNGIsR0FBYXBTLEVBQU1wSixnQkFLMUQsU0FBUzRiLEVBQWFMLEVBQVlDLEVBQVlHLEVBQWFGLEdBQ3pEQSxFQUFXckssU0FBUSxTQUFTaEksR0FDcEJBLEtBQVF1UyxFQUFZMWMsWUFDMUJzYyxFQUFXdGMsVUFBVW1LLEdBQVEsV0FDM0IsT0FBT3hKLEtBQUs0YixHQUFZcFMsR0FBTWxKLE1BQU1OLEtBQUs0YixHQUFheGIsZ0JBSzVELFNBQVM2YixFQUEwQk4sRUFBWUMsRUFBWUcsRUFBYUYsR0FDdEVBLEVBQVdySyxTQUFRLFNBQVNoSSxHQUNwQkEsS0FBUXVTLEVBQVkxYyxZQUMxQnNjLEVBQVd0YyxVQUFVbUssR0FBUSxXQUMzQixPQUFPZ1MsRUFBMkJ4YixLQUFLNGIsR0FBYXBTLEVBQU1wSixnQkFLaEUsU0FBUzhiLEVBQU1DLEdBQ2JuYyxLQUFLb2MsT0FBU0QsRUF1QmhCLFNBQVNWLEVBQU9ZLEVBQVFqQixHQUN0QnBiLEtBQUtzYyxRQUFVRCxFQUNmcmMsS0FBS3VjLFNBQVduQixFQStCbEIsU0FBU29CLEVBQVlDLEdBQ25CemMsS0FBSzBjLE9BQVNELEVBdUNoQixTQUFTRSxFQUFZQyxHQUNuQjVjLEtBQUs2YyxJQUFNRCxFQUNYNWMsS0FBS2dPLFNBQVcsSUFBSWpNLFNBQVEsU0FBU0MsRUFBU0MsR0FDNUMyYSxFQUFlRSxXQUFhLFdBQzFCOWEsS0FFRjRhLEVBQWV0QixRQUFVLFdBQ3ZCclosRUFBTzJhLEVBQWU5WSxRQUV4QjhZLEVBQWVHLFFBQVUsV0FDdkI5YSxFQUFPMmEsRUFBZTlZLFdBa0I1QixTQUFTa1osRUFBVUMsRUFBSUMsRUFBWUMsR0FDakNuZCxLQUFLb2QsSUFBTUgsRUFDWGpkLEtBQUtrZCxXQUFhQSxFQUNsQmxkLEtBQUttZCxZQUFjLElBQUlSLEVBQVlRLEdBa0JyQyxTQUFTRSxFQUFHSixHQUNWamQsS0FBS29kLElBQU1ILEVBL0lidkIsRUFBZ0JRLEVBQU8sU0FBVSxDQUMvQixPQUNBLFVBQ0EsYUFDQSxXQUdGSixFQUFvQkksRUFBTyxTQUFVb0IsU0FBVSxDQUM3QyxNQUNBLFNBQ0EsU0FDQSxhQUNBLFVBR0ZyQixFQUEwQkMsRUFBTyxTQUFVb0IsU0FBVSxDQUNuRCxhQUNBLGtCQVFGNUIsRUFBZ0JELEVBQVEsVUFBVyxDQUNqQyxZQUNBLE1BQ0EsYUFDQSxVQUdGSyxFQUFvQkwsRUFBUSxVQUFXOEIsVUFBVyxDQUNoRCxTQUNBLFdBSUYsQ0FBQyxVQUFXLFdBQVksc0JBQXNCL0wsU0FBUSxTQUFTZ00sR0FDdkRBLEtBQWNELFVBQVVsZSxZQUM5Qm9jLEVBQU9wYyxVQUFVbWUsR0FBYyxXQUM3QixJQUFJbkIsRUFBU3JjLEtBQ1RzUCxFQUFPbFAsVUFDWCxPQUFPMkIsUUFBUUMsVUFBVVEsTUFBSyxXQUU1QixPQURBNlosRUFBT0MsUUFBUWtCLEdBQVlsZCxNQUFNK2IsRUFBT0MsUUFBU2hOLEdBQzFDNkwsRUFBaUJrQixFQUFPRSxVQUFVL1osTUFBSyxTQUFTOUQsR0FDckQsR0FBS0EsRUFDTCxPQUFPLElBQUkrYyxFQUFPL2MsRUFBTzJkLEVBQU9FLHFCQVV4Q0MsRUFBWW5kLFVBQVVvZSxZQUFjLFdBQ2xDLE9BQU8sSUFBSXZCLEVBQU1sYyxLQUFLMGMsT0FBT2UsWUFBWW5kLE1BQU1OLEtBQUswYyxPQUFRdGMsYUFHOURvYyxFQUFZbmQsVUFBVThjLE1BQVEsV0FDNUIsT0FBTyxJQUFJRCxFQUFNbGMsS0FBSzBjLE9BQU9QLE1BQU03YixNQUFNTixLQUFLMGMsT0FBUXRjLGFBR3hEc2IsRUFBZ0JjLEVBQWEsU0FBVSxDQUNyQyxPQUNBLFVBQ0EsYUFDQSxrQkFHRlYsRUFBb0JVLEVBQWEsU0FBVWtCLGVBQWdCLENBQ3pELE1BQ0EsTUFDQSxTQUNBLFFBQ0EsTUFDQSxTQUNBLFNBQ0EsYUFDQSxVQUdGekIsRUFBMEJPLEVBQWEsU0FBVWtCLGVBQWdCLENBQy9ELGFBQ0Esa0JBR0YxQixFQUFhUSxFQUFhLFNBQVVrQixlQUFnQixDQUNsRCxnQkFrQkZmLEVBQVl0ZCxVQUFVc2UsWUFBYyxXQUNsQyxPQUFPLElBQUluQixFQUFZeGMsS0FBSzZjLElBQUljLFlBQVlyZCxNQUFNTixLQUFLNmMsSUFBS3pjLGFBRzlEc2IsRUFBZ0JpQixFQUFhLE1BQU8sQ0FDbEMsbUJBQ0EsU0FHRlgsRUFBYVcsRUFBYSxNQUFPaUIsZUFBZ0IsQ0FDL0MsVUFTRlosRUFBVTNkLFVBQVV3ZSxrQkFBb0IsV0FDdEMsT0FBTyxJQUFJckIsRUFBWXhjLEtBQUtvZCxJQUFJUyxrQkFBa0J2ZCxNQUFNTixLQUFLb2QsSUFBS2hkLGFBR3BFc2IsRUFBZ0JzQixFQUFXLE1BQU8sQ0FDaEMsT0FDQSxVQUNBLHFCQUdGaEIsRUFBYWdCLEVBQVcsTUFBT2MsWUFBYSxDQUMxQyxvQkFDQSxVQU9GVCxFQUFHaGUsVUFBVThkLFlBQWMsV0FDekIsT0FBTyxJQUFJUixFQUFZM2MsS0FBS29kLElBQUlELFlBQVk3YyxNQUFNTixLQUFLb2QsSUFBS2hkLGFBRzlEc2IsRUFBZ0IyQixFQUFJLE1BQU8sQ0FDekIsT0FDQSxVQUNBLHFCQUdGckIsRUFBYXFCLEVBQUksTUFBT1MsWUFBYSxDQUNuQyxVQUtGLENBQUMsYUFBYyxpQkFBaUJ0TSxTQUFRLFNBQVN1TSxHQUMvQyxDQUFDdkIsRUFBYU4sR0FBTzFLLFNBQVEsU0FBU3VLLEdBRTlCZ0MsS0FBWWhDLEVBQVkxYyxZQUU5QjBjLEVBQVkxYyxVQUFVMGUsRUFBU3pTLFFBQVEsT0FBUSxZQUFjLFdBQzNELElBQUlnRSxFQUFPMkwsRUFBUTdhLFdBQ2Z5SixFQUFXeUYsRUFBS0EsRUFBS2pQLE9BQVMsR0FDOUIyZCxFQUFlaGUsS0FBSzBjLFFBQVUxYyxLQUFLb2MsT0FDbkNoQixFQUFVNEMsRUFBYUQsR0FBVXpkLE1BQU0wZCxFQUFjMU8sRUFBS2xFLE1BQU0sR0FBSSxJQUN4RWdRLEVBQVFDLFVBQVksV0FDbEJ4UixFQUFTdVIsRUFBUTlZLGlCQU96QixDQUFDNFosRUFBT00sR0FBYWhMLFNBQVEsU0FBU3VLLEdBQ2hDQSxFQUFZMWMsVUFBVTRlLFNBQzFCbEMsRUFBWTFjLFVBQVU0ZSxPQUFTLFNBQVNDLEVBQU9DLEdBQzdDLElBQUloSyxFQUFXblUsS0FDWG9lLEVBQVEsR0FFWixPQUFPLElBQUlyYyxTQUFRLFNBQVNDLEdBQzFCbVMsRUFBU2tLLGNBQWNILEdBQU8sU0FBUzdCLEdBQ2hDQSxHQUlMK0IsRUFBTTNhLEtBQUs0WSxFQUFPM2QsWUFFSjZLLElBQVY0VSxHQUF1QkMsRUFBTS9kLFFBQVU4ZCxFQUkzQzlCLEVBQU9pQyxXQUhMdGMsRUFBUW9jLElBTlJwYyxFQUFRb2MsY0FvQ2xCN2dCLEVBQVFnaEIsT0FyQlIsU0FBZ0J2Z0IsRUFBTXNZLEVBQVNrSSxHQUM3QixJQUFJamYsRUFBSWdjLEVBQXFCa0QsVUFBVyxPQUFRLENBQUN6Z0IsRUFBTXNZLElBQ25EOEUsRUFBVTdiLEVBQUU2YixRQVVoQixPQVJJQSxJQUNGQSxFQUFRc0QsZ0JBQWtCLFNBQVNDLEdBQzdCSCxHQUNGQSxFQUFnQixJQUFJeEIsRUFBVTVCLEVBQVE5WSxPQUFRcWMsRUFBTXpCLFdBQVk5QixFQUFRK0IsZ0JBS3ZFNWQsRUFBRWlELE1BQUssU0FBU3lhLEdBQ3JCLE9BQU8sSUFBSUksRUFBR0osT0FTbEIxZixFQUFRcWhCLFNBTFIsU0FBa0I1Z0IsR0FDaEIsT0FBT3VkLEVBQXFCa0QsVUFBVyxpQkFBa0IsQ0FBQ3pnQixLQU01REcsT0FBT0MsZUFBZWIsRUFBUyxhQUFjLENBQUVtQixPQUFPLElBeFRTbWdCLENBQVF0aEIsSSxnQkNEekUsSUFBSXVoQixFQUFNLEVBQVEsR0FDRkMsRUFBVSxFQUFRLElBSUMsaUJBRnZCQSxFQUFVQSxFQUFRbGdCLFdBQWFrZ0IsRUFBUXpaLFFBQVV5WixLQUcvQ0EsRUFBVSxDQUFDLENBQUN2aEIsRUFBT0MsRUFBSXNoQixFQUFTLE1BRzlDLElBQUl6SyxFQUFVLENBRWQsT0FBaUIsT0FDakIsV0FBb0IsR0FFUHdLLEVBQUlDLEVBQVN6SyxHQUkxQjlXLEVBQU9ELFFBQVV3aEIsRUFBUUMsUUFBVSxJLDZCQ2hCbkMsSUFDTUMsRUFERkMsRUFFSyxXQVVMLFlBVG9CLElBQVRELElBTVRBLEVBQU9FLFFBQVFqUCxRQUFVa1AsVUFBWUEsU0FBUzlKLE1BQVFwRixPQUFPckosT0FHeERvWSxHQUlQSSxFQUFZLFdBQ2QsSUFBSUosRUFBTyxHQUNYLE9BQU8sU0FBa0JuZSxHQUN2QixRQUE0QixJQUFqQm1lLEVBQUtuZSxHQUF5QixDQUN2QyxJQUFJd2UsRUFBY0YsU0FBU0csY0FBY3plLEdBRXpDLEdBQUlvUCxPQUFPc1AsbUJBQXFCRixhQUF1QnBQLE9BQU9zUCxrQkFDNUQsSUFHRUYsRUFBY0EsRUFBWUcsZ0JBQWdCQyxLQUMxQyxNQUFPbGYsR0FFUDhlLEVBQWMsS0FJbEJMLEVBQUtuZSxHQUFVd2UsRUFHakIsT0FBT0wsRUFBS25lLElBcEJBLEdBd0JaNmUsRUFBYyxHQUVsQixTQUFTQyxFQUFxQi9MLEdBRzVCLElBRkEsSUFBSXZSLEdBQVUsRUFFTDdFLEVBQUksRUFBR0EsRUFBSWtpQixFQUFZdGYsT0FBUTVDLElBQ3RDLEdBQUlraUIsRUFBWWxpQixHQUFHb1csYUFBZUEsRUFBWSxDQUM1Q3ZSLEVBQVM3RSxFQUNULE1BSUosT0FBTzZFLEVBR1QsU0FBU3VkLEVBQWFDLEVBQU14TCxHQUkxQixJQUhBLElBQUl5TCxFQUFhLEdBQ2JDLEVBQWMsR0FFVHZpQixFQUFJLEVBQUdBLEVBQUlxaUIsRUFBS3pmLE9BQVE1QyxJQUFLLENBQ3BDLElBQUl3aUIsRUFBT0gsRUFBS3JpQixHQUNaeWlCLEVBQUs1TCxFQUFRNkwsS0FBT0YsRUFBSyxHQUFLM0wsRUFBUTZMLEtBQU9GLEVBQUssR0FDbEQ5QixFQUFRNEIsRUFBV0csSUFBTyxFQUMxQnJNLEVBQWEsR0FBRzdQLE9BQU9rYyxFQUFJLEtBQUtsYyxPQUFPbWEsR0FDM0M0QixFQUFXRyxHQUFNL0IsRUFBUSxFQUN6QixJQUFJaEMsRUFBUXlELEVBQXFCL0wsR0FDN0IxRixFQUFNLENBQ1JpUyxJQUFLSCxFQUFLLEdBQ1ZJLE1BQU9KLEVBQUssR0FDWkssVUFBV0wsRUFBSyxLQUdILElBQVg5RCxHQUNGd0QsRUFBWXhELEdBQU9vRSxhQUNuQlosRUFBWXhELEdBQU9xRSxRQUFRclMsSUFFM0J3UixFQUFZbGMsS0FBSyxDQUNmb1EsV0FBWUEsRUFDWjJNLFFBQVNDLEVBQVN0UyxFQUFLbUcsR0FDdkJpTSxXQUFZLElBSWhCUCxFQUFZdmMsS0FBS29RLEdBR25CLE9BQU9tTSxFQUdULFNBQVNVLEVBQW1CcE0sR0FDMUIsSUFBSXFNLEVBQVF2QixTQUFTd0IsY0FBYyxTQUMvQkMsRUFBYXZNLEVBQVF1TSxZQUFjLEdBRXZDLFFBQWdDLElBQXJCQSxFQUFXQyxNQUF1QixDQUMzQyxJQUFJQSxFQUFtRCxLQUVuREEsSUFDRkQsRUFBV0MsTUFBUUEsR0FRdkIsR0FKQTNpQixPQUFPZ04sS0FBSzBWLEdBQVlyUCxTQUFRLFNBQVV4UyxHQUN4QzJoQixFQUFNSSxhQUFhL2hCLEVBQUs2aEIsRUFBVzdoQixPQUdQLG1CQUFuQnNWLEVBQVEwTSxPQUNqQjFNLEVBQVEwTSxPQUFPTCxPQUNWLENBQ0wsSUFBSTdmLEVBQVN1ZSxFQUFVL0ssRUFBUTBNLFFBQVUsUUFFekMsSUFBS2xnQixFQUNILE1BQU0sSUFBSW1GLE1BQU0sMkdBR2xCbkYsRUFBT21nQixZQUFZTixHQUdyQixPQUFPQSxFQWNULElBQ01PLEVBREZDLEdBQ0VELEVBQVksR0FDVCxTQUFpQi9FLEVBQU9pRixHQUU3QixPQURBRixFQUFVL0UsR0FBU2lGLEVBQ1pGLEVBQVUzTCxPQUFPNEosU0FBU3JYLEtBQUssUUFJMUMsU0FBU3VaLEVBQW9CVixFQUFPeEUsRUFBT21GLEVBQVFuVCxHQUNqRCxJQUFJaVMsRUFBTWtCLEVBQVMsR0FBS25ULEVBQUlrUyxNQUFRLFVBQVVyYyxPQUFPbUssRUFBSWtTLE1BQU8sTUFBTXJjLE9BQU9tSyxFQUFJaVMsSUFBSyxLQUFPalMsRUFBSWlTLElBSWpHLEdBQUlPLEVBQU1ZLFdBQ1JaLEVBQU1ZLFdBQVdDLFFBQVVMLEVBQVloRixFQUFPaUUsT0FDekMsQ0FDTCxJQUFJcUIsRUFBVXJDLFNBQVNzQyxlQUFldEIsR0FDbEN1QixFQUFhaEIsRUFBTWdCLFdBRW5CQSxFQUFXeEYsSUFDYndFLEVBQU1pQixZQUFZRCxFQUFXeEYsSUFHM0J3RixFQUFXdGhCLE9BQ2JzZ0IsRUFBTWtCLGFBQWFKLEVBQVNFLEVBQVd4RixJQUV2Q3dFLEVBQU1NLFlBQVlRLElBS3hCLFNBQVNLLEVBQVduQixFQUFPck0sRUFBU25HLEdBQ2xDLElBQUlpUyxFQUFNalMsRUFBSWlTLElBQ1ZDLEVBQVFsUyxFQUFJa1MsTUFDWkMsRUFBWW5TLEVBQUltUyxVQWVwQixHQWJJRCxFQUNGTSxFQUFNSSxhQUFhLFFBQVNWLEdBRTVCTSxFQUFNb0IsZ0JBQWdCLFNBR3BCekIsR0FBYXRZLE9BQ2ZvWSxHQUFPLHVEQUF1RHBjLE9BQU9nRSxLQUFLZ2EsU0FBU3RRLG1CQUFtQmhHLEtBQUtzRyxVQUFVc08sTUFBZSxRQU1sSUssRUFBTVksV0FDUlosRUFBTVksV0FBV0MsUUFBVXBCLE1BQ3RCLENBQ0wsS0FBT08sRUFBTXNCLFlBQ1h0QixFQUFNaUIsWUFBWWpCLEVBQU1zQixZQUcxQnRCLEVBQU1NLFlBQVk3QixTQUFTc0MsZUFBZXRCLEtBSTlDLElBQUk4QixFQUFZLEtBQ1pDLEVBQW1CLEVBRXZCLFNBQVMxQixFQUFTdFMsRUFBS21HLEdBQ3JCLElBQUlxTSxFQUNBM1QsRUFDQXNVLEVBRUosR0FBSWhOLEVBQVE0TixVQUFXLENBQ3JCLElBQUlFLEVBQWFELElBQ2pCeEIsRUFBUXVCLElBQWNBLEVBQVl4QixFQUFtQnBNLElBQ3JEdEgsRUFBU3FVLEVBQW9CcGlCLEtBQUssS0FBTTBoQixFQUFPeUIsR0FBWSxHQUMzRGQsRUFBU0QsRUFBb0JwaUIsS0FBSyxLQUFNMGhCLEVBQU95QixHQUFZLFFBRTNEekIsRUFBUUQsRUFBbUJwTSxHQUMzQnRILEVBQVM4VSxFQUFXN2lCLEtBQUssS0FBTTBoQixFQUFPck0sR0FFdENnTixFQUFTLFlBeEZiLFNBQTRCWCxHQUUxQixHQUF5QixPQUFyQkEsRUFBTTBCLFdBQ1IsT0FBTyxFQUdUMUIsRUFBTTBCLFdBQVdULFlBQVlqQixHQW1GekIyQixDQUFtQjNCLElBS3ZCLE9BREEzVCxFQUFPbUIsR0FDQSxTQUFxQm9VLEdBQzFCLEdBQUlBLEVBQVEsQ0FDVixHQUFJQSxFQUFPbkMsTUFBUWpTLEVBQUlpUyxLQUFPbUMsRUFBT2xDLFFBQVVsUyxFQUFJa1MsT0FBU2tDLEVBQU9qQyxZQUFjblMsRUFBSW1TLFVBQ25GLE9BR0Z0VCxFQUFPbUIsRUFBTW9VLFFBRWJqQixLQUtOOWpCLEVBQU9ELFFBQVUsU0FBVXVpQixFQUFNeEwsSUFDL0JBLEVBQVVBLEdBQVcsSUFHUjROLFdBQTBDLGtCQUF0QjVOLEVBQVE0TixZQUN2QzVOLEVBQVE0TixVQUFZaEQsS0FJdEIsSUFBSXNELEVBQWtCM0MsRUFEdEJDLEVBQU9BLEdBQVEsR0FDMEJ4TCxHQUN6QyxPQUFPLFNBQWdCbU8sR0FHckIsR0FGQUEsRUFBVUEsR0FBVyxHQUUyQixtQkFBNUN0a0IsT0FBT2tCLFVBQVVtTSxTQUFTNU4sS0FBSzZrQixHQUFuQyxDQUlBLElBQUssSUFBSWhsQixFQUFJLEVBQUdBLEVBQUkra0IsRUFBZ0JuaUIsT0FBUTVDLElBQUssQ0FDL0MsSUFDSTBlLEVBQVF5RCxFQURLNEMsRUFBZ0Iva0IsSUFFakNraUIsRUFBWXhELEdBQU9vRSxhQUtyQixJQUZBLElBQUltQyxFQUFxQjdDLEVBQWE0QyxFQUFTbk8sR0FFdEMzSixFQUFLLEVBQUdBLEVBQUs2WCxFQUFnQm5pQixPQUFRc0ssSUFBTSxDQUNsRCxJQUVJeVIsRUFBU3dELEVBRks0QyxFQUFnQjdYLElBSUssSUFBbkNnVixFQUFZdkQsR0FBUW1FLGFBQ3RCWixFQUFZdkQsR0FBUW9FLFVBRXBCYixFQUFZZ0QsT0FBT3ZHLEVBQVEsSUFJL0JvRyxFQUFrQkUsTSxnQkN6UXRCLElBQUlFLEVBQThCLEVBQVEsSUFDdENDLEVBQWtDLEVBQVEsSUFDMUNDLEVBQWdDLEVBQVEsSUFDeENDLEVBQWdDLEVBQVEsSUFDeENDLEVBQWdDLEVBQVEsSUFDNUN6bEIsRUFBVXFsQixHQUE0QixHQUN0QyxJQUFJSyxFQUFxQ0osRUFBZ0NDLEdBQ3JFSSxFQUFxQ0wsRUFBZ0NFLEdBQ3JFSSxFQUFxQ04sRUFBZ0NHLEdBRXpFemxCLEVBQVFrRyxLQUFLLENBQUNqRyxFQUFPQyxFQUFJLDRxTEFBa3JMd2xCLEVBQXFDLHVHQUF5R0MsRUFBcUMsaWxUQUFxbFRDLEVBQXFDLHFtRUFBc21FLEtBRTlsakIzbEIsRUFBT0QsUUFBVUEsRyw2QkNMakJDLEVBQU9ELFFBQVUsU0FBVTZsQixHQUN6QixJQUFJdEQsRUFBTyxHQXVEWCxPQXJEQUEsRUFBS3RVLFNBQVcsV0FDZCxPQUFPeEwsS0FBS2lSLEtBQUksU0FBVWdQLEdBQ3hCLElBQUlsQixFQXNEVixTQUFnQ2tCLEVBQU1tRCxHQUNwQyxJQUFJckUsRUFBVWtCLEVBQUssSUFBTSxHQUVyQm9ELEVBQWFwRCxFQUFLLEdBRXRCLElBQUtvRCxFQUNILE9BQU90RSxFQUdULEdBQUlxRSxHQUFnQyxtQkFBVHBiLEtBQXFCLENBQzlDLElBQUlzYixHQVdXaEQsRUFYZStDLEVBYTVCL2MsRUFBUzBCLEtBQUtnYSxTQUFTdFEsbUJBQW1CaEcsS0FBS3NHLFVBQVVzTyxNQUN6RDVWLEVBQU8sK0RBQStEMUcsT0FBT3NDLEdBQzFFLE9BQU90QyxPQUFPMEcsRUFBTSxRQWRyQjZZLEVBQWFGLEVBQVdHLFFBQVF2UyxLQUFJLFNBQVU3SCxHQUNoRCxNQUFPLGlCQUFpQnBGLE9BQU9xZixFQUFXSSxZQUFjLElBQUl6ZixPQUFPb0YsRUFBUSxVQUU3RSxNQUFPLENBQUMyVixHQUFTL2EsT0FBT3VmLEdBQVl2ZixPQUFPLENBQUNzZixJQUFnQnhiLEtBQUssTUFPckUsSUFBbUJ3WSxFQUViaGEsRUFDQW9FLEVBUEosTUFBTyxDQUFDcVUsR0FBU2pYLEtBQUssTUF2RUo0YixDQUF1QnpELEVBQU1tRCxHQUUzQyxPQUFJbkQsRUFBSyxHQUNBLFVBQVVqYyxPQUFPaWMsRUFBSyxHQUFJLE1BQU1qYyxPQUFPK2EsRUFBUyxLQUdsREEsS0FDTmpYLEtBQUssS0FLVmdZLEVBQUtyaUIsRUFBSSxTQUFVRSxFQUFTZ21CLEVBQVlDLEdBQ2YsaUJBQVpqbUIsSUFFVEEsRUFBVSxDQUFDLENBQUMsS0FBTUEsRUFBUyxNQUc3QixJQUFJa21CLEVBQXlCLEdBRTdCLEdBQUlELEVBQ0YsSUFBSyxJQUFJbm1CLEVBQUksRUFBR0EsRUFBSXVDLEtBQUtLLE9BQVE1QyxJQUFLLENBRXBDLElBQUl5aUIsRUFBS2xnQixLQUFLdkMsR0FBRyxHQUVQLE1BQU55aUIsSUFDRjJELEVBQXVCM0QsSUFBTSxHQUtuQyxJQUFLLElBQUl2VixFQUFLLEVBQUdBLEVBQUtoTixFQUFRMEMsT0FBUXNLLElBQU0sQ0FDMUMsSUFBSXNWLEVBQU8sR0FBR2pjLE9BQU9yRyxFQUFRZ04sSUFFekJpWixHQUFVQyxFQUF1QjVELEVBQUssTUFLdEMwRCxJQUNHMUQsRUFBSyxHQUdSQSxFQUFLLEdBQUssR0FBR2pjLE9BQU8yZixFQUFZLFNBQVMzZixPQUFPaWMsRUFBSyxJQUZyREEsRUFBSyxHQUFLMEQsR0FNZDdELEVBQUtyYyxLQUFLd2MsTUFJUEgsSSw2QkM5RFR0aUIsRUFBT0QsUUFBVSxTQUFVdW1CLEVBQUt4UCxHQVM5QixPQVJLQSxJQUVIQSxFQUFVLElBTU8saUJBRm5Cd1AsRUFBTUEsR0FBT0EsRUFBSWpsQixXQUFhaWxCLEVBQUl4ZSxRQUFVd2UsR0FHbkNBLEdBSUwsZUFBZTNULEtBQUsyVCxLQUV0QkEsRUFBTUEsRUFBSTFZLE1BQU0sR0FBSSxJQUdsQmtKLEVBQVF5UCxPQUVWRCxHQUFPeFAsRUFBUXlQLE1BS2IsY0FBYzVULEtBQUsyVCxJQUFReFAsRUFBUTBQLFdBQzlCLElBQUtoZ0IsT0FBTzhmLEVBQUl4WSxRQUFRLEtBQU0sT0FBT0EsUUFBUSxNQUFPLE9BQVEsS0FHOUR3WSxLLDZCQ2hDVCxPQUFlLGNBQTBCLHdDLDZCQ0F6QyxPQUFlLGNBQTBCLHdDLDZCQ0F6QyxPQUFlLGNBQTBCLHdDLDhCQ0F6QyxZQUVBM2xCLE9BQU9DLGVBQWViLEVBQVMsYUFBYyxDQUFFbUIsT0FBTyxJQUl0RCxJQUYwQm9iLEVBNkN0QkUsRUEzQ0FoQyxHQUZzQjhCLEVBRUssRUFBUSxLQUZzQixpQkFBUEEsR0FBb0IsWUFBYUEsRUFBTUEsRUFBWSxRQUFJQSxFQUd6R3RVLEVBQVEsRUFBUSxHQUNoQmdSLEVBQVMsRUFBUSxHQUNqQjdELEVBQU8sRUFBUSxHQUNmYyxFQUFZLEVBQVEsR0FDcEJ3USxFQUFvQixFQUFRLElBbUI1QnJlLEVBQWNvUyxFQUFTcFMsWUFrQnZCc2UsRUFBWSxJQUFJMU4sRUFBT0MsT0FBTyx1QkFRbEMsU0FBUzBOLElBQ0wsT0FBSUQsRUFBVTdKLFdBQWE3RCxFQUFPd0QsU0FBU08sTUFDaENQLEVBQVNPLE1BRVgySixFQUFVN0osV0FBYTdELEVBQU93RCxTQUFTb0ssT0FDckNwSyxFQUFTb0ssT0FHVHBLLEVBQVNXLE1BR3hCLFNBQVNHLEVBQVl1SixHQUlqQixPQUFRQSxHQUNKLEtBQUtySyxFQUFTTyxNQUNWMkosRUFBVTdKLFNBQVc3RCxFQUFPd0QsU0FBU08sTUFDckMsTUFDSixLQUFLUCxFQUFTVyxNQUNWdUosRUFBVTdKLFNBQVc3RCxFQUFPd0QsU0FBU1csTUFDckMsTUFDSixLQUFLWCxFQUFTb0ssT0FDVkYsRUFBVTdKLFNBQVc3RCxFQUFPd0QsU0FBU29LLE9BQ3JDLE1BQ0osUUFDSUYsRUFBVXBnQixNQUFNLGNBQWdCOEIsRUFBYyw2Q0FHMUQsU0FBUytSLEVBQU0yTSxFQUFLQyxHQUVoQixJQURBLElBQUlwVyxFQUFNLEdBQ0R4RCxFQUFLLEVBQUdBLEVBQUt2SyxVQUFVQyxPQUFRc0ssSUFDcEN3RCxFQUFJeEQsRUFBSyxHQUFLdkssVUFBVXVLLEdBRTVCLEdBQUl1WixFQUFVN0osVUFBWTdELEVBQU93RCxTQUFTTyxNQUFPLENBQzdDLElBQUlqTCxFQUFPbkIsRUFBSThDLElBQUl1VCxHQUNuQk4sRUFBVXZNLE1BQU1yWCxNQUFNNGpCLEVBQVcxZSxFQUFNdkIsZUFBZSxDQUFDLGNBQWdCMkIsRUFBYyxNQUFRMGUsRUFBTSxNQUFRQyxHQUFNalYsS0FHekgsU0FBU3hMLEVBQU15Z0IsR0FFWCxJQURBLElBQUlwVyxFQUFNLEdBQ0R4RCxFQUFLLEVBQUdBLEVBQUt2SyxVQUFVQyxPQUFRc0ssSUFDcEN3RCxFQUFJeEQsRUFBSyxHQUFLdkssVUFBVXVLLEdBRTVCLEdBQUl1WixFQUFVN0osVUFBWTdELEVBQU93RCxTQUFTVyxNQUFPLENBQzdDLElBQUlyTCxFQUFPbkIsRUFBSThDLElBQUl1VCxHQUNuQk4sRUFBVXBnQixNQUFNeEQsTUFBTTRqQixFQUFXMWUsRUFBTXZCLGVBQWUsQ0FBQyxjQUFnQjJCLEVBQWMsTUFBUTJlLEdBQU1qVixLQU0zRyxTQUFTa1YsRUFBWXJXLEdBQ2pCLEdBQW1CLGlCQUFSQSxFQUNQLE9BQU9BLEVBR1AsSUFBSXNXLEVBQVdDLEVBQWdCQyxjQUMvQixJQUNJLE9BQU9GLEVBQVNHLFdBQVd6VyxHQUUvQixNQUFPM04sR0FFSCxPQUFPMk47Ozs7Ozs7Ozs7Ozs7Ozs7R0E0Qm5CLFNBQVMwVyxFQUFLQyxHQUdWLElBQUkvZSxFQUFVLGNBQWdCSCxFQUFjLGdDQUFrQ2tmLEVBSzlFLE1BSkFoaEIsRUFBTWlDLEdBSUEsSUFBSUUsTUFBTUYsR0FNcEIsU0FBU0YsRUFBT0MsRUFBV0MsR0FDbEJELEdBQ0QrZSxFQUFLOWU7Ozs7Ozs7Ozs7Ozs7Ozs7SUFqSGIsU0FBV2lVLEdBQ1BBLEVBQVNBLEVBQWdCLE1BQUksR0FBSyxRQUNsQ0EsRUFBU0EsRUFBZ0IsTUFBSSxHQUFLLFFBQ2xDQSxFQUFTQSxFQUFpQixPQUFJLEdBQUssU0FIdkMsQ0FJR0EsSUFBYUEsRUFBVyxLQXNJM0IsSUFBSTBLLEVBQWlDLFdBQ2pDLFNBQVNBLEtBY1QsT0FaQUEsRUFBZ0JLLFlBQWMsU0FBVU4sR0FDaENDLEVBQWdCRCxVQUNoQkksRUFBSyw0QkFFVEgsRUFBZ0JELFNBQVdBLEdBRS9CQyxFQUFnQkMsWUFBYyxXQUkxQixPQUhLRCxFQUFnQkQsVUFDakJJLEVBQUssb0JBRUZILEVBQWdCRCxVQUVwQkMsRUFmeUIsR0FxQnBDLFNBQVNNLElBQ0wsT0FBT04sRUFBZ0JDLGNBQWNLOzs7Ozs7Ozs7Ozs7Ozs7O0dBbUJ6QyxJQUFJQyxFQUFPLENBSVBDLEdBQUksS0FFSkMsVUFBVyxZQUVYQyxRQUFTLFVBT1RDLGlCQUFrQixtQkFRbEJDLGtCQUFtQixvQkFFbkJDLFVBQVcsWUFLWEMsZUFBZ0IsaUJBUWhCQyxrQkFBbUIsb0JBS25CQyxnQkFBaUIsa0JBS2pCQyxtQkFBb0IscUJBcUJwQkMsb0JBQXFCLHNCQVFyQkMsUUFBUyxVQWdCVEMsYUFBYyxlQUVkQyxjQUFlLGdCQUtmdlEsU0FBVSxXQVFWd1EsWUFBYSxjQUViQyxVQUFXLGFBUVhDLEVBQWdDLFNBQVUvYixHQUUxQyxTQUFTK2IsRUFBZTliLEVBQU1yRSxHQUMxQixJQUFJMkQsRUFBUVMsRUFBT3ZNLEtBQUtvQyxLQUFNK0YsSUFBWS9GLEtBUTFDLE9BUEEwSixFQUFNVSxLQUFPQSxFQUNiVixFQUFNM0QsUUFBVUEsRUFDaEIyRCxFQUFNMUwsS0FBTyxnQkFJYjBMLEVBQU04QixTQUFXLFdBQWMsT0FBTzlCLEVBQU0xTCxLQUFPLFdBQWEwTCxFQUFNVSxLQUFPLE1BQVFWLEVBQU0zRCxTQUNwRjJELEVBRVgsT0FaQWxFLEVBQU0xRixVQUFVb21CLEVBQWdCL2IsR0FZekIrYixFQWJ3QixDQWNqQ2pnQjs7Ozs7Ozs7Ozs7Ozs7Ozs7QUE2QkYsU0FBU2tnQixFQUF1QkMsRUFBS0MsR0FDakMsU0FBU0MsSUFDTCxJQUFJeGlCLEVBQVEsK0JBS1osTUFKSXVpQixJQUNBdmlCLEdBQVMsSUFDVEEsR0FBU3VpQixHQUVQLElBQUlILEVBQWVqQixFQUFLSSxpQkFBa0J2aEIsR0FNcEQsSUFBSyxJQUFJeWlCLEtBRlRELEVBQWtCam5CLFVBQVkrbUIsRUFBSS9tQixVQUVQK21CLEVBQ25CQSxFQUFJOW1CLGVBQWVpbkIsS0FFbkJELEVBQWtCQyxHQUFrQkgsRUFBSUcsSUFJaEQsT0FBT0Q7Ozs7Ozs7Ozs7Ozs7Ozs7R0FtQlgsU0FBUzdXLEVBQVN0QixFQUFLblAsR0FDbkIsT0FBT2IsT0FBT2tCLFVBQVVDLGVBQWUxQixLQUFLdVEsRUFBS25QLEdBR3JELFNBQVN3bkIsRUFBVTluQixFQUFPK25CLEdBQ3RCLFlBQWlCbGQsSUFBVjdLLEVBQXNCQSxFQUFRK25CLEVBRXpDLFNBQVNDLEVBQWN2WSxFQUFLUyxHQUN4QixJQUFLLElBQUk1UCxLQUFPbVAsRUFDWixHQUFJaFEsT0FBT2tCLFVBQVVDLGVBQWUxQixLQUFLdVEsRUFBS25QLEdBQU0sQ0FDaEQsSUFBSTJuQixFQUFNQyxPQUFPNW5CLEdBQ1o2bkIsTUFBTUYsSUFDUC9YLEVBQUcrWCxFQUFLeFksRUFBSW5QLEtBVTVCLFNBQVN3UyxFQUFRckQsRUFBS1MsR0FDbEIsSUFBSyxJQUFJNVAsS0FBT21QLEVBQ1JoUSxPQUFPa0IsVUFBVUMsZUFBZTFCLEtBQUt1USxFQUFLblAsSUFDMUM0UCxFQUFHNVAsRUFBS21QLEVBQUluUCxJQUl4QixTQUFTZ1IsRUFBUTdCLEdBRWIsSUFBSyxJQUFJblAsS0FEVDZHLEVBQWMsTUFBUHNJLEdBQThCLGlCQUFSQSxFQUFrQix1Q0FDL0JBLEVBQ1osR0FBSWhRLE9BQU9rQixVQUFVQyxlQUFlMUIsS0FBS3VRLEVBQUtuUCxHQUMxQyxPQUFPLEVBR2YsT0FBTzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFvQ1gsU0FBUzhuQixFQUFlQyxFQUFjelgsR0FDbEMsR0FBb0IsSUFBaEJBLEVBQUtqUCxPQUNMLE1BQU0sSUFBSTZsQixFQUFlakIsRUFBS0ksaUJBQWtCLFlBQWMwQixFQUFlLHNEQUV6RUMsRUFBYTFYLEVBQUtqUCxPQUFRLFlBQzFCLEtBVVosU0FBUzRtQixFQUEwQkYsRUFBY3pYLEVBQU00WCxHQUNuRCxHQUFJNVgsRUFBS2pQLFNBQVc2bUIsRUFDaEIsTUFBTSxJQUFJaEIsRUFBZWpCLEVBQUtJLGlCQUFrQixZQUFjMEIsRUFBZSxlQUN6RUMsRUFBYUUsRUFBYyxZQUMzQix5QkFDQUYsRUFBYTFYLEVBQUtqUCxPQUFRLFlBQzFCLEtBV1osU0FBUzhtQixFQUE0QkosRUFBY3pYLEVBQU04WCxHQUNyRCxHQUFJOVgsRUFBS2pQLE9BQVMrbUIsRUFDZCxNQUFNLElBQUlsQixFQUFlakIsRUFBS0ksaUJBQWtCLFlBQWMwQixFQUFlLHdCQUN6RUMsRUFBYUksRUFBaUIsWUFDOUIseUJBQ0FKLEVBQWExWCxFQUFLalAsT0FBUSxZQUMxQixLQVdaLFNBQVNnbkIsRUFBNEJOLEVBQWN6WCxFQUFNOFgsRUFBaUJFLEdBQ3RFLEdBQUloWSxFQUFLalAsT0FBUyttQixHQUFtQjlYLEVBQUtqUCxPQUFTaW5CLEVBQy9DLE1BQU0sSUFBSXBCLEVBQWVqQixFQUFLSSxpQkFBa0IsWUFBYzBCLEVBQWUsdUJBQXlCSyxFQUFrQixRQUNuSEUsRUFBa0IsbUNBQ25CTixFQUFhMVgsRUFBS2pQLE9BQVEsWUFDMUIsS0FrQlosU0FBU2tuQixFQUFnQlIsRUFBY2pVLEVBQU0wVSxFQUFVQyxHQUNuREMsRUFBYVgsRUFBY2pVLEVBQU02VSxFQUFRSCxHQUFZLFlBQWFDLEdBTXRFLFNBQVNHLEVBQXdCYixFQUFjalUsRUFBTTBVLEVBQVVDLFFBQzFDbGUsSUFBYmtlLEdBQ0FGLEVBQWdCUixFQUFjalUsRUFBTTBVLEVBQVVDLEdBT3RELFNBQVNJLEVBQWtCZCxFQUFjalUsRUFBTWdWLEVBQVlMLEdBQ3ZEQyxFQUFhWCxFQUFjalUsRUFBTWdWLEVBQWEsVUFBV0wsR0FNN0QsU0FBU00sRUFBMEJoQixFQUFjalUsRUFBTWdWLEVBQVlMLFFBQzlDbGUsSUFBYmtlLEdBQ0FJLEVBQWtCZCxFQUFjalUsRUFBTWdWLEVBQVlMLEdBZ0IxRCxTQUFTTyxFQUE4QmpCLEVBQWNlLEVBQVlHLEVBQWlCUixFQUFVUyxRQUN2RTNlLElBQWJrZSxHQWRSLFNBQStCVixFQUFjZSxFQUFZRyxFQUFpQlIsRUFBVVMsR0FDaEYsS0FBTVQsYUFBb0I1bkIsT0FDdEIsTUFBTSxJQUFJcW1CLEVBQWVqQixFQUFLSSxpQkFBa0IsWUFBYzBCLEVBQWUsbUJBQXFCZSxFQUFhLHVDQUNsRUssRUFBaUJWLElBRWxFLElBQUssSUFBSWhxQixFQUFJLEVBQUdBLEVBQUlncUIsRUFBU3BuQixTQUFVNUMsRUFDbkMsSUFBS3lxQixFQUFVVCxFQUFTaHFCLElBQ3BCLE1BQU0sSUFBSXlvQixFQUFlakIsRUFBS0ksaUJBQWtCLFlBQWMwQixFQUFlLG1CQUFxQmUsRUFBYSxtQkFDdEZHLEVBQWtCLDRCQUE4QnhxQixFQUFJLFNBQzlEMHFCLEVBQWlCVixFQUFTaHFCLEtBTTdDMnFCLENBQXNCckIsRUFBY2UsRUFBWUcsRUFBaUJSLEVBQVVTLEdBdUJuRixTQUFTRyxFQUFvQ3RCLEVBQWN1QixFQUFXUixFQUFZL2dCLEVBQU93aEIsUUFDdkVoZixJQUFWeEMsR0FsQlIsU0FBcUNnZ0IsRUFBY3VCLEVBQVdSLEVBQVkvZ0IsRUFBT3doQixHQUU3RSxJQURBLElBQUlDLEVBQXNCLEdBQ2pCN2QsRUFBSyxFQUFHOGQsRUFBYUYsRUFBVTVkLEVBQUs4ZCxFQUFXcG9CLE9BQVFzSyxJQUFNLENBQ2xFLElBQUkyTSxFQUFNbVIsRUFBVzlkLEdBQ3JCLEdBQUkyTSxJQUFRdlEsRUFDUixPQUVKeWhCLEVBQW9CL2tCLEtBQUswa0IsRUFBaUI3USxJQUU5QyxJQUFJb1IsRUFBb0JQLEVBQWlCcGhCLEdBQ3pDLE1BQU0sSUFBSW1mLEVBQWVqQixFQUFLSSxpQkFBa0IsaUJBQW1CcUQsRUFBb0IseUJBQTJCM0IsRUFBZSxrQkFDckhlLEVBQWEseUJBQTRCVSxFQUFvQjFnQixLQUFLLE9BUTFFNmdCLENBQTRCNUIsRUFBY3VCLEVBQVdSLEVBQVkvZ0IsRUFBT3doQixHQVdoRixTQUFTSyxFQUFtQjdCLEVBQWM4QixFQUFPckIsRUFBVUMsR0FDdkQsSUFBS29CLEVBQU1DLE1BQUssU0FBVUMsR0FBVyxPQUFPQSxJQUFZdEIsS0FDcEQsTUFBTSxJQUFJdkIsRUFBZWpCLEVBQUtJLGlCQUFrQixpQkFBbUI4QyxFQUFpQlYsR0FBWSx5QkFDM0ZWLEVBQWUsY0FBZ0JZLEVBQVFILEdBQVksaUNBQ3RDcUIsRUFBTS9nQixLQUFLLE9BSXJDLFNBQVM0ZixFQUFhWCxFQUFjalUsRUFBTXdWLEVBQVd2aEIsR0FXakQsS0FUYSxXQUFUK0wsRUFDUWtXLEVBQWNqaUIsR0FFUixxQkFBVCtMLEVBQ29CLGlCQUFWL0wsR0FBZ0MsS0FBVkEsU0FHdEJBLElBQVUrTCxHQUVqQixDQUNSLElBQUltVyxFQUFjZCxFQUFpQnBoQixHQUNuQyxNQUFNLElBQUltZixFQUFlakIsRUFBS0ksaUJBQWtCLFlBQWMwQixFQUFlLG1CQUFxQnVCLEVBQVksa0JBQ3RGeFYsRUFBTyxpQkFBbUJtVyxJQU8xRCxTQUFTRCxFQUFjamlCLEdBQ25CLE1BQXlCLGlCQUFWQSxHQUNELE9BQVZBLElBQ0M1SSxPQUFPK3FCLGVBQWVuaUIsS0FBVzVJLE9BQU9rQixXQUNKLE9BQWpDbEIsT0FBTytxQixlQUFlbmlCLElBR2xDLFNBQVNvaEIsRUFBaUJwaEIsR0FDdEIsUUFBY3dDLElBQVZ4QyxFQUNBLE1BQU8sWUFFTixHQUFjLE9BQVZBLEVBQ0wsTUFBTyxPQUVOLEdBQXFCLGlCQUFWQSxFQUlaLE9BSElBLEVBQU0xRyxPQUFTLEtBQ2YwRyxFQUFRQSxFQUFNb2lCLFVBQVUsRUFBRyxJQUFNLE9BRTlCemQsS0FBS3NHLFVBQVVqTCxHQUVyQixHQUFxQixpQkFBVkEsR0FBdUMsa0JBQVZBLEVBQ3pDLE1BQU8sR0FBS0EsRUFFWCxHQUFxQixpQkFBVkEsRUFBb0IsQ0FDaEMsR0FBSUEsYUFBaUJsSCxNQUNqQixNQUFPLFdBR1AsSUFBSXVwQixFQWlCaEIsU0FBZ0NyaUIsR0FDNUIsR0FBSUEsRUFBTTlHLFlBQWEsQ0FDbkIsSUFDSW9wQixFQURnQiw0QkFDUUMsS0FBS3ZpQixFQUFNOUcsWUFBWXVMLFlBQ25ELEdBQUk2ZCxHQUFXQSxFQUFRaHBCLE9BQVMsRUFDNUIsT0FBT2dwQixFQUFRLEdBR3ZCLE9BQU8sS0F6QndCRSxDQUF1QnhpQixHQUM5QyxPQUFJcWlCLEVBQ08sWUFBY0EsRUFBbUIsVUFHakMsWUFJZCxNQUFxQixtQkFBVnJpQixFQUNMLGFBR0E4ZCxFQUFLLDhCQUFnQzlkLEdBZXBELFNBQVN5aUIsRUFBZ0J6QyxFQUFjUyxFQUFVQyxHQUM3QyxRQUFpQmxlLElBQWJrZSxFQUNBLE1BQU0sSUFBSXZCLEVBQWVqQixFQUFLSSxpQkFBa0IsWUFBYzBCLEVBQWUsdUJBQXlCWSxFQUFRSCxHQUFZLG9DQVFsSSxTQUFTaUMsRUFBb0IxQyxFQUFjelMsRUFBU29WLEdBQ2hEbFksRUFBUThDLEdBQVMsU0FBVXRWLEVBQUs4RCxHQUM1QixHQUFJNG1CLEVBQVlqcEIsUUFBUXpCLEdBQU8sRUFDM0IsTUFBTSxJQUFJa25CLEVBQWVqQixFQUFLSSxpQkFBa0IsbUJBQXFCcm1CLEVBQU0sd0JBQTBCK25CLEVBQWUsMEJBRWhIMkMsRUFBWTVoQixLQUFLLFVBUWpDLFNBQVM2aEIsRUFBa0I1QyxFQUFjalUsRUFBTTBVLEVBQVVDLEdBQ3JELElBQUl3QixFQUFjZCxFQUFpQlYsR0FDbkMsT0FBTyxJQUFJdkIsRUFBZWpCLEVBQUtJLGlCQUFrQixZQUFjMEIsRUFBZSxtQkFBcUJZLEVBQVFILEdBQVkscUJBQzVGMVUsRUFBTyxpQkFBbUJtVyxHQUV6RCxTQUFTVyxFQUF1QjdDLEVBQWNTLEVBQVV0b0IsR0FDcEQsR0FBSUEsR0FBSyxFQUNMLE1BQU0sSUFBSWduQixFQUFlakIsRUFBS0ksaUJBQWtCLGFBQWdCMEIsRUFBZSxvQkFBdUJZLEVBQVFILEdBQVksa0RBQW9EdG9CLEVBQUksS0FJMUwsU0FBU3lvQixFQUFRaEIsR0FDYixPQUFRQSxHQUNKLEtBQUssRUFDRCxNQUFPLFFBQ1gsS0FBSyxFQUNELE1BQU8sU0FDWCxLQUFLLEVBQ0QsTUFBTyxRQUNYLFFBQ0ksT0FBT0EsRUFBTSxNQU16QixTQUFTSyxFQUFhTCxFQUFLeGdCLEdBQ3ZCLE9BQU93Z0IsRUFBTSxJQUFNeGdCLEdBQWUsSUFBUndnQixFQUFZLEdBQUs7Ozs7Ozs7Ozs7Ozs7Ozs7R0FtQi9DLElBQUlrRCxFQUF3QixXQUN4QixTQUFTQSxLQVlULE9BVkFBLEVBQU9DLE1BQVEsV0FJWCxJQUZBLElBQUlDLEVBQVEsaUVBQ1JDLEVBQVMsR0FDSnZzQixFQUFJLEVBQUdBLEVBQUksR0FBSUEsSUFDcEJ1c0IsR0FBVUQsRUFBTWxoQixPQUFPK0gsS0FBS0MsTUFBTUQsS0FBS3FaLFNBQVdGLEVBQU0xcEIsU0FHNUQsT0FEQXdGLEVBQXlCLEtBQWxCbWtCLEVBQU8zcEIsT0FBZSxvQkFBc0IycEIsR0FDNUNBLEdBRUpILEVBYmdCLEdBZTNCLFNBQVNLLEVBQW9CQyxFQUFNQyxHQUMvQixPQUFJRCxFQUFPQyxHQUNDLEVBRVJELEVBQU9DLEVBQ0EsRUFFSixFQWNYLFNBQVNDLEVBQVlGLEVBQU1DLEdBQ3ZCLEdBQUlELEVBQUs5cEIsU0FBVytwQixFQUFNL3BCLE9BQ3RCLE9BQU8sRUFFWCxJQUFLLElBQUk1QyxFQUFJLEVBQUdBLEVBQUkwc0IsRUFBSzlwQixPQUFRNUMsSUFDN0IsSUFBSzBzQixFQUFLMXNCLEdBQUc2c0IsUUFBUUYsRUFBTTNzQixJQUN2QixPQUFPLEVBR2YsT0FBTyxFQU1YLFNBQVM4c0IsRUFBbUIvcUIsR0FFeEIsT0FBT0EsRUFBSTs7Ozs7Ozs7Ozs7Ozs7OztHQW9CZixTQUFTZ3JCLEtBQ0wsR0FBMEIsb0JBQWZDLFdBQ1AsTUFBTSxJQUFJdkUsRUFBZWpCLEVBQUtjLGNBQWUsc0RBSXJELFNBQVMyRSxLQUNMLElBQUtoRyxFQUFnQkMsY0FBY2dHLGdCQUMvQixNQUFNLElBQUl6RSxFQUFlakIsRUFBS2MsY0FBZSwyREFVckQsSUFra0JJNkUsR0Fsa0JBQyxHQUFzQixXQUN0QixTQUFTQSxFQUFLQyxHQUNWSixLQUNBMXFCLEtBQUsrcUIsY0FBZ0JELEVBeUR6QixPQXZEQUQsRUFBS0csaUJBQW1CLFNBQVUxa0IsR0FDOUIyZ0IsRUFBMEIsd0JBQXlCN21CLFVBQVcsR0FDOURtbkIsRUFBZ0Isd0JBQXlCLFNBQVUsRUFBR2poQixHQUN0RG9rQixLQUNBLElBQ0ksSUFBSUksRUFBZXBHLEVBQWdCQyxjQUFjOWQsS0FBS1AsR0FDdEQsT0FBTyxJQUFJdWtCLEVBQUtDLEdBRXBCLE1BQU90cUIsR0FDSCxNQUFNLElBQUkwbEIsRUFBZWpCLEVBQUtJLGlCQUFrQixnREFBa0Q3a0IsS0FHMUdxcUIsRUFBS0ksZUFBaUIsU0FBVUMsR0FHNUIsR0FGQWpFLEVBQTBCLHNCQUF1QjdtQixVQUFXLEdBQzVEb3FCLE9BQ01VLGFBQWlCVCxZQUNuQixNQUFNZCxFQUFrQixzQkFBdUIsYUFBYyxFQUFHdUIsR0FLcEUsSUFBSUosRUFBZWpyQixNQUFNUixVQUFVNFIsSUFDOUJyVCxLQUFLc3RCLEdBQU8sU0FBVUMsR0FDdkIsT0FBTzlpQixPQUFPQyxhQUFhNmlCLE1BRTFCcmpCLEtBQUssSUFDVixPQUFPLElBQUkraUIsRUFBS0MsSUFFcEJELEVBQUt4ckIsVUFBVStyQixTQUFXLFdBR3RCLE9BRkFuRSxFQUEwQixnQkFBaUI3bUIsVUFBVyxHQUN0RHNxQixLQUNPaEcsRUFBZ0JDLGNBQWMzYyxLQUFLaEksS0FBSytxQixnQkFFbkRGLEVBQUt4ckIsVUFBVWdzQixhQUFlLFdBQzFCcEUsRUFBMEIsb0JBQXFCN21CLFVBQVcsR0FDMURvcUIsS0FFQSxJQURBLElBQUljLEVBQVMsSUFBSWIsV0FBV3pxQixLQUFLK3FCLGNBQWMxcUIsUUFDdEM1QyxFQUFJLEVBQUdBLEVBQUl1QyxLQUFLK3FCLGNBQWMxcUIsT0FBUTVDLElBQzNDNnRCLEVBQU83dEIsR0FBS3VDLEtBQUsrcUIsY0FBYzFrQixXQUFXNUksR0FFOUMsT0FBTzZ0QixHQUVYVCxFQUFLeHJCLFVBQVVtTSxTQUFXLFdBQ3RCLE1BQU8sZ0JBQWtCeEwsS0FBS29yQixXQUFhLEtBRS9DUCxFQUFLeHJCLFVBQVVpckIsUUFBVSxTQUFVaUIsR0FDL0IsT0FBT3ZyQixLQUFLK3FCLGdCQUFrQlEsRUFBTVIsZUFNeENGLEVBQUt4ckIsVUFBVW1zQixXQUFhLFNBQVVELEdBQ2xDLE9BQU9yQixFQUFvQmxxQixLQUFLK3FCLGNBQWVRLEVBQU1SLGdCQUVsREYsRUE1RGMsR0FxRXJCWSxHQUFhdEYsRUFBdUIwRSxHQUFNLGlFQWtCMUNhLEdBYUEsU0FBc0JDLEVBQVlDLEVBQWdCQyxFQUFNQyxFQUFLQyxHQUN6RC9yQixLQUFLMnJCLFdBQWFBLEVBQ2xCM3JCLEtBQUs0ckIsZUFBaUJBLEVBQ3RCNXJCLEtBQUs2ckIsS0FBT0EsRUFDWjdyQixLQUFLOHJCLElBQU1BLEVBQ1g5ckIsS0FBSytyQixpQkFBbUJBLEdBSzVCQyxHQUF3QixZQUV4QkMsR0FBNEIsV0FDNUIsU0FBU0EsRUFBV0MsRUFBV0MsR0FDM0Juc0IsS0FBS2tzQixVQUFZQSxFQUNqQmxzQixLQUFLbXNCLFNBQVdBLEdBQXNCSCxHQWtCMUMsT0FoQkE3dEIsT0FBT0MsZUFBZTZ0QixFQUFXNXNCLFVBQVcsb0JBQXFCLENBQzdEZixJQUFLLFdBQ0QsT0FBTzBCLEtBQUttc0IsV0FBYUgsSUFFN0IzdEIsWUFBWSxFQUNaa1osY0FBYyxJQUVsQjBVLEVBQVc1c0IsVUFBVWlyQixRQUFVLFNBQVVpQixHQUNyQyxPQUFRQSxhQUFpQlUsR0FDckJWLEVBQU1XLFlBQWNsc0IsS0FBS2tzQixXQUN6QlgsRUFBTVksV0FBYW5zQixLQUFLbXNCLFVBRWhDRixFQUFXNXNCLFVBQVUrc0IsVUFBWSxTQUFVYixHQUN2QyxPQUFRckIsRUFBb0JscUIsS0FBS2tzQixVQUFXWCxFQUFNVyxZQUM5Q2hDLEVBQW9CbHFCLEtBQUttc0IsU0FBVVosRUFBTVksV0FFMUNGLEVBckJvQixHQThDM0JJLEdBQWdDLFdBQ2hDLFNBQVNBLEVBQWVDLEVBQWVDLEdBQ25DLElBQUk3aUIsRUFBUTFKLEtBQ1pBLEtBQUtzc0IsY0FBZ0JBLEVBQ2pCQyxJQUNBQSxFQUFxQkMsc0JBQXdCLFNBQVVDLEdBQ25ELE9BQU8vaUIsRUFBTWdqQixpQkFBaUJELElBRWxDenNCLEtBQUsyc0IsdUJBQXlCLFNBQVVGLEdBQ3BDLE9BQU9GLEVBQXFCSyxvQkFBb0JILEtBZ0I1RCxPQVpBSixFQUFlaHRCLFVBQVVxdEIsaUJBQW1CLFNBQVVHLEdBRWxELE9BREE3c0IsS0FBS3NzQixjQUFnQjFiLEtBQUtrYyxJQUFJRCxFQUF1QjdzQixLQUFLc3NCLGVBQ25EdHNCLEtBQUtzc0IsZUFFaEJELEVBQWVodEIsVUFBVStDLEtBQU8sV0FDNUIsSUFBSTJxQixJQUFjL3NCLEtBQUtzc0IsY0FJdkIsT0FISXRzQixLQUFLMnNCLHdCQUNMM3NCLEtBQUsyc0IsdUJBQXVCSSxHQUV6QkEsR0FFWFYsRUFBZVcsU0FBVyxFQUNuQlgsRUF6QndCLEdBZ0QvQlksR0FBMEIsV0FDMUIsU0FBU0EsRUFBU0MsRUFBVXBnQixFQUFRek0sUUFDakJrSixJQUFYdUQsRUFDQUEsRUFBUyxFQUVKQSxFQUFTb2dCLEVBQVM3c0IsUUFDdkJ3a0IsRUFBSyxVQUFZL1gsRUFBUyxpQkFBbUJvZ0IsRUFBUzdzQixhQUUzQ2tKLElBQVhsSixFQUNBQSxFQUFTNnNCLEVBQVM3c0IsT0FBU3lNLEVBRXRCek0sRUFBUzZzQixFQUFTN3NCLE9BQVN5TSxHQUNoQytYLEVBQUssVUFBWXhrQixFQUFTLGtCQUFvQjZzQixFQUFTN3NCLE9BQVN5TSxJQUVwRTlNLEtBQUtrdEIsU0FBV0EsRUFDaEJsdEIsS0FBSzhNLE9BQVNBLEVBQ2Q5TSxLQUFLbXRCLElBQU05c0IsRUFxR2YsT0FuR0FsQyxPQUFPQyxlQUFlNnVCLEVBQVM1dEIsVUFBVyxTQUFVLENBQ2hEZixJQUFLLFdBQ0QsT0FBTzBCLEtBQUttdEIsS0FFaEI5dUIsWUFBWSxFQUNaa1osY0FBYyxJQUVsQjBWLEVBQVM1dEIsVUFBVWlyQixRQUFVLFNBQVVpQixHQUNuQyxPQUE0QyxJQUFyQzBCLEVBQVNHLFdBQVdwdEIsS0FBTXVyQixJQUVyQzBCLEVBQVM1dEIsVUFBVWd1QixNQUFRLFNBQVVDLEdBQ2pDLElBQUlKLEVBQVdsdEIsS0FBS2t0QixTQUFTOWhCLE1BQU1wTCxLQUFLOE0sT0FBUTlNLEtBQUt1dEIsU0FTckQsT0FSSUQsYUFBc0JMLEVBQ3RCSyxFQUFXOWIsU0FBUSxTQUFVZ2MsR0FDekJOLEVBQVN6cEIsS0FBSytwQixNQUlsQk4sRUFBU3pwQixLQUFLNnBCLEdBRVh0dEIsS0FBS3l0QixVQUFVUCxJQUcxQkQsRUFBUzV0QixVQUFVa3VCLE1BQVEsV0FDdkIsT0FBT3Z0QixLQUFLOE0sT0FBUzlNLEtBQUtLLFFBRTlCNHNCLEVBQVM1dEIsVUFBVXF1QixTQUFXLFNBQVVDLEdBR3BDLE9BRkFBLE9BQWdCcGtCLElBQVRva0IsRUFBcUIsRUFBSUEsRUFDaEM5bkIsRUFBTzdGLEtBQUtLLFFBQVVzdEIsRUFBTSw0Q0FDckIzdEIsS0FBS3l0QixVQUFVenRCLEtBQUtrdEIsU0FBVWx0QixLQUFLOE0sT0FBUzZnQixFQUFNM3RCLEtBQUtLLE9BQVNzdEIsSUFFM0VWLEVBQVM1dEIsVUFBVXV1QixRQUFVLFdBRXpCLE9BREEvbkIsR0FBUTdGLEtBQUtnUSxVQUFXLHNDQUNqQmhRLEtBQUt5dEIsVUFBVXp0QixLQUFLa3RCLFNBQVVsdEIsS0FBSzhNLE9BQVE5TSxLQUFLSyxPQUFTLElBRXBFNHNCLEVBQVM1dEIsVUFBVXd1QixhQUFlLFdBRTlCLE9BREFob0IsR0FBUTdGLEtBQUtnUSxVQUFXLDJDQUNqQmhRLEtBQUtrdEIsU0FBU2x0QixLQUFLOE0sU0FFOUJtZ0IsRUFBUzV0QixVQUFVeXVCLFlBQWMsV0FDN0IsT0FBTzl0QixLQUFLMUIsSUFBSTBCLEtBQUtLLE9BQVMsSUFFbEM0c0IsRUFBUzV0QixVQUFVZixJQUFNLFNBQVU2ZCxHQUUvQixPQURBdFcsRUFBT3NXLEVBQVFuYyxLQUFLSyxPQUFRLHNCQUNyQkwsS0FBS2t0QixTQUFTbHRCLEtBQUs4TSxPQUFTcVAsSUFFdkM4USxFQUFTNXRCLFVBQVUyUSxRQUFVLFdBQ3pCLE9BQXVCLElBQWhCaFEsS0FBS0ssUUFFaEI0c0IsRUFBUzV0QixVQUFVMHVCLFdBQWEsU0FBVXhDLEdBQ3RDLEdBQUlBLEVBQU1sckIsT0FBU0wsS0FBS0ssT0FDcEIsT0FBTyxFQUVYLElBQUssSUFBSTVDLEVBQUksRUFBR0EsRUFBSXVDLEtBQUtLLE9BQVE1QyxJQUM3QixHQUFJdUMsS0FBSzFCLElBQUliLEtBQU84dEIsRUFBTWp0QixJQUFJYixHQUMxQixPQUFPLEVBR2YsT0FBTyxHQUVYd3ZCLEVBQVM1dEIsVUFBVTJ1QixvQkFBc0IsU0FBVUMsR0FDL0MsR0FBSWp1QixLQUFLSyxPQUFTLElBQU00dEIsRUFBZTV0QixPQUNuQyxPQUFPLEVBRVgsSUFBSyxJQUFJNUMsRUFBSSxFQUFHQSxFQUFJdUMsS0FBS0ssT0FBUTVDLElBQzdCLEdBQUl1QyxLQUFLMUIsSUFBSWIsS0FBT3d3QixFQUFlM3ZCLElBQUliLEdBQ25DLE9BQU8sRUFHZixPQUFPLEdBRVh3dkIsRUFBUzV0QixVQUFVbVMsUUFBVSxTQUFVNUMsR0FDbkMsSUFBSyxJQUFJblIsRUFBSXVDLEtBQUs4TSxPQUFRb2hCLEVBQU1sdUIsS0FBS3V0QixRQUFTOXZCLEVBQUl5d0IsRUFBS3p3QixJQUNuRG1SLEVBQUc1TyxLQUFLa3RCLFNBQVN6dkIsS0FHekJ3dkIsRUFBUzV0QixVQUFVNGIsUUFBVSxXQUN6QixPQUFPamIsS0FBS2t0QixTQUFTOWhCLE1BQU1wTCxLQUFLOE0sT0FBUTlNLEtBQUt1dEIsVUFFakROLEVBQVNHLFdBQWEsU0FBVWUsRUFBSUMsR0FFaEMsSUFEQSxJQUFJakIsRUFBTXZjLEtBQUt5ZCxJQUFJRixFQUFHOXRCLE9BQVErdEIsRUFBRy90QixRQUN4QjVDLEVBQUksRUFBR0EsRUFBSTB2QixFQUFLMXZCLElBQUssQ0FDMUIsSUFBSTBzQixFQUFPZ0UsRUFBRzd2QixJQUFJYixHQUNkMnNCLEVBQVFnRSxFQUFHOXZCLElBQUliLEdBQ25CLEdBQUkwc0IsRUFBT0MsRUFDUCxPQUFRLEVBRVosR0FBSUQsRUFBT0MsRUFDUCxPQUFPLEVBR2YsT0FBSStELEVBQUc5dEIsT0FBUyt0QixFQUFHL3RCLFFBQ1AsRUFFUjh0QixFQUFHOXRCLE9BQVMrdEIsRUFBRy90QixPQUNSLEVBRUosR0FFSjRzQixFQXJIa0IsR0EySHpCcUIsR0FBOEIsU0FBVW5rQixHQUV4QyxTQUFTbWtCLElBQ0wsT0FBa0IsT0FBWG5rQixHQUFtQkEsRUFBTzdKLE1BQU1OLEtBQU1JLFlBQWNKLEtBOEIvRCxPQWhDQXdGLEVBQU0xRixVQUFVd3VCLEVBQWNua0IsR0FJOUJta0IsRUFBYWp2QixVQUFVb3VCLFVBQVksU0FBVVAsRUFBVXBnQixFQUFRek0sR0FDM0QsT0FBTyxJQUFJaXVCLEVBQWFwQixFQUFVcGdCLEVBQVF6TSxJQUU5Q2l1QixFQUFhanZCLFVBQVVrdkIsZ0JBQWtCLFdBSXJDLE9BQU92dUIsS0FBS2liLFVBQVVuVCxLQUFLLE1BRS9Cd21CLEVBQWFqdkIsVUFBVW1NLFNBQVcsV0FDOUIsT0FBT3hMLEtBQUt1dUIsbUJBS2hCRCxFQUFhRSxXQUFhLFNBQVVDLEdBSWhDLEdBQUlBLEVBQUtodUIsUUFBUSxPQUFTLEVBQ3RCLE1BQU0sSUFBSXlsQixFQUFlakIsRUFBS0ksaUJBQWtCLGlCQUFtQm9KLEVBQU8seUNBSzlFLE9BQU8sSUFBSUgsRUFESUcsRUFBS3ZpQixNQUFNLEtBQUtxSixRQUFPLFNBQVVpWSxHQUFXLE9BQU9BLEVBQVFudEIsT0FBUyxPQUd2Rml1QixFQUFhSSxXQUFhLElBQUlKLEVBQWEsSUFDcENBLEVBakNzQixDQWtDL0JyQixJQUNFMEIsR0FBbUIsMkJBRW5CQyxHQUEyQixTQUFVemtCLEdBRXJDLFNBQVN5a0IsSUFDTCxPQUFrQixPQUFYemtCLEdBQW1CQSxFQUFPN0osTUFBTU4sS0FBTUksWUFBY0osS0E4Ri9ELE9BaEdBd0YsRUFBTTFGLFVBQVU4dUIsRUFBV3prQixHQUkzQnlrQixFQUFVdnZCLFVBQVVvdUIsVUFBWSxTQUFVUCxFQUFVcGdCLEVBQVF6TSxHQUN4RCxPQUFPLElBQUl1dUIsRUFBVTFCLEVBQVVwZ0IsRUFBUXpNLElBTTNDdXVCLEVBQVVDLGtCQUFvQixTQUFVckIsR0FDcEMsT0FBT21CLEdBQWlCeGUsS0FBS3FkLElBRWpDb0IsRUFBVXZ2QixVQUFVa3ZCLGdCQUFrQixXQUNsQyxPQUFPdnVCLEtBQUtpYixVQUNQaEssS0FBSSxTQUFVOUssR0FLZixPQUpBQSxFQUFNQSxFQUFJbUYsUUFBUSxLQUFNLFFBQVFBLFFBQVEsSUFBSyxPQUN4Q3NqQixFQUFVQyxrQkFBa0Ixb0IsS0FDN0JBLEVBQU0sSUFBTUEsRUFBTSxLQUVmQSxLQUVOMkIsS0FBSyxNQUVkOG1CLEVBQVV2dkIsVUFBVW1NLFNBQVcsV0FDM0IsT0FBT3hMLEtBQUt1dUIsbUJBS2hCSyxFQUFVdnZCLFVBQVV5dkIsV0FBYSxXQUM3QixPQUF1QixJQUFoQjl1QixLQUFLSyxRQXJNSSxhQXFNWUwsS0FBSzFCLElBQUksSUFLekNzd0IsRUFBVUcsU0FBVyxXQUNqQixPQUFPLElBQUlILEVBQVUsQ0EzTUwsY0F1TnBCQSxFQUFVSSxpQkFBbUIsU0FBVVAsR0FhbkMsSUFaQSxJQUFJdkIsRUFBVyxHQUNYK0IsRUFBVSxHQUNWeHhCLEVBQUksRUFDSnl4QixFQUFvQixXQUNwQixHQUF1QixJQUFuQkQsRUFBUTV1QixPQUNSLE1BQU0sSUFBSTZsQixFQUFlakIsRUFBS0ksaUJBQWtCLHVCQUF5Qm9KLEVBQU8sNkVBR3BGdkIsRUFBU3pwQixLQUFLd3JCLEdBQ2RBLEVBQVUsSUFFVkUsR0FBYyxFQUNYMXhCLEVBQUlneEIsRUFBS3B1QixRQUFRLENBQ3BCLElBQUl2QyxFQUFJMndCLEVBQUtoeEIsR0FDYixHQUFVLE9BQU5LLEVBQVksQ0FDWixHQUFJTCxFQUFJLElBQU1neEIsRUFBS3B1QixPQUNmLE1BQU0sSUFBSTZsQixFQUFlakIsRUFBS0ksaUJBQWtCLHVDQUF5Q29KLEdBRTdGLElBQUlyc0IsRUFBT3FzQixFQUFLaHhCLEVBQUksR0FDcEIsR0FBZSxPQUFUMkUsR0FBMEIsTUFBVEEsR0FBeUIsTUFBVEEsRUFDbkMsTUFBTSxJQUFJOGpCLEVBQWVqQixFQUFLSSxpQkFBa0IscUNBQXVDb0osR0FFM0ZRLEdBQVc3c0IsRUFDWDNFLEdBQUssTUFFTSxNQUFOSyxHQUNMcXhCLEdBQWVBLEVBQ2YxeEIsS0FFVyxNQUFOSyxHQUFjcXhCLEdBS25CRixHQUFXbnhCLEVBQ1hMLE1BTEF5eEIsSUFDQXp4QixLQVFSLEdBREF5eEIsSUFDSUMsRUFDQSxNQUFNLElBQUlqSixFQUFlakIsRUFBS0ksaUJBQWtCLDJCQUE2Qm9KLEdBRWpGLE9BQU8sSUFBSUcsRUFBVTFCLElBRXpCMEIsRUFBVUYsV0FBYSxJQUFJRSxFQUFVLElBQzlCQSxFQWpHbUIsQ0FrRzVCM0IsSUFrQkVtQyxHQUE2QixXQUM3QixTQUFTQSxFQUFZWCxHQUNqQnp1QixLQUFLeXVCLEtBQU9BLEVBQ1o1b0IsRUFBT3VwQixFQUFZQyxjQUFjWixHQUFPLHVEQUNwQ0EsRUFBS3hULFVBQVVuVCxLQUFLLE1BdUM1QixPQXBDQXNuQixFQUFZL3ZCLFVBQVVpd0IsZ0JBQWtCLFNBQVVDLEdBQzlDLE9BQVF2dkIsS0FBS3l1QixLQUFLcHVCLFFBQVUsR0FDeEJMLEtBQUt5dUIsS0FBS253QixJQUFJMEIsS0FBS3l1QixLQUFLcHVCLE9BQVMsS0FBT2t2QixHQUVoREgsRUFBWS92QixVQUFVaXJCLFFBQVUsU0FBVWlCLEdBQ3RDLE9BQWtCLE9BQVZBLEdBQXFFLElBQW5EK0MsR0FBYWxCLFdBQVdwdEIsS0FBS3l1QixLQUFNbEQsRUFBTWtELE9BRXZFVyxFQUFZL3ZCLFVBQVVtTSxTQUFXLFdBQzdCLE9BQU94TCxLQUFLeXVCLEtBQUtqakIsWUFFckI0akIsRUFBWWhDLFdBQWEsU0FBVW9DLEVBQUlDLEdBQ25DLE9BQU9uQixHQUFhbEIsV0FBV29DLEVBQUdmLEtBQU1nQixFQUFHaEIsT0FFL0NXLEVBQVlDLGNBQWdCLFNBQVVaLEdBQ2xDLE9BQU9BLEVBQUtwdUIsT0FBUyxHQUFNLEdBUS9CK3VCLEVBQVlNLGFBQWUsU0FBVXhDLEdBQ2pDLE9BQU8sSUFBSWtDLEVBQVksSUFBSWQsR0FBYXBCLEVBQVM5aEIsV0FTckRna0IsRUFBWU8sZUFBaUIsU0FBVWxCLEdBQ25DLE9BQU8sSUFBSVcsRUFBWWQsR0FBYUUsV0FBV0MsS0FFbkRXLEVBQVlRLE1BQVEsSUFBSVIsRUFBWSxJQUFJZCxHQUFhLEtBQzlDYyxFQTNDcUIsR0E4RDVCM2xCLEdBQ0EsV0FDSSxJQUFJQyxFQUFRMUosS0FDWkEsS0FBSzJKLFFBQVUsSUFBSTVILFNBQVEsU0FBVUMsRUFBU0MsR0FDMUN5SCxFQUFNMUgsUUFBVUEsRUFDaEIwSCxFQUFNekgsT0FBU0EsT0E4QjNCLFNBQVcyb0IsR0FFUEEsRUFBYSxJQUFJLE1BT2pCQSxFQUEwQixpQkFBSSxxQkFDOUJBLEVBQXVDLDhCQUFJLG1DQUMzQ0EsRUFBeUIsZ0JBQUksb0JBQzdCQSxFQUFzQyw2QkFBSSxrQ0FNMUNBLEVBQTRCLG1CQUFJLHVCQUtoQ0EsRUFBK0Isc0JBQUksMEJBRW5DQSxFQUE4QixxQkFBSSx5QkFLbENBLEVBQTBCLGlCQUFJLG9CQTlCbEMsQ0ErQkdBLEtBQVlBLEdBQVUsS0FRekIsSUFBSWlGLEdBQWtDLFdBQ2xDLFNBQVNBLEVBQWlCQyxFQUFZQyxFQUFTQyxFQUFjMXNCLEVBQUkyc0IsR0FDN0Rqd0IsS0FBSzh2QixXQUFhQSxFQUNsQjl2QixLQUFLK3ZCLFFBQVVBLEVBQ2YvdkIsS0FBS2d3QixhQUFlQSxFQUNwQmh3QixLQUFLc0QsR0FBS0EsRUFDVnRELEtBQUtpd0IsZ0JBQWtCQSxFQUN2Qmp3QixLQUFLaVUsU0FBVyxJQUFJeEssR0FDcEJ6SixLQUFLd0MsS0FBT3hDLEtBQUtpVSxTQUFTdEssUUFBUW5ILEtBQUt2RCxLQUFLZSxLQUFLaVUsU0FBU3RLLFNBQzFEM0osS0FBSzhKLE1BQVE5SixLQUFLaVUsU0FBU3RLLFFBQVFHLE1BQU03SyxLQUFLZSxLQUFLaVUsU0FBU3RLLFNBSTVEM0osS0FBS2lVLFNBQVN0SyxRQUFRRyxPQUFNLFNBQVVnRixPQXVFMUMsT0F2REErZ0IsRUFBaUJLLGtCQUFvQixTQUFVSixFQUFZQyxFQUFTSSxFQUFTN3NCLEVBQUkyc0IsR0FDN0UsSUFDSUcsRUFBWSxJQUFJUCxFQUFpQkMsRUFBWUMsRUFEaEMxbUIsS0FBS3NILE1BQVF3ZixFQUN3QzdzQixFQUFJMnNCLEdBRTFFLE9BREFHLEVBQVVDLE1BQU1GLEdBQ1RDLEdBTVhQLEVBQWlCeHdCLFVBQVVneEIsTUFBUSxTQUFVRixHQUN6QyxJQUFJem1CLEVBQVExSixLQUNaQSxLQUFLc3dCLFlBQWNDLFlBQVcsV0FBYyxPQUFPN21CLEVBQU04bUIsdUJBQXlCTCxJQU10Rk4sRUFBaUJ4d0IsVUFBVW94QixVQUFZLFdBQ25DLE9BQU96d0IsS0FBS3d3QixzQkFTaEJYLEVBQWlCeHdCLFVBQVVxeEIsT0FBUyxTQUFVQyxHQUNqQixPQUFyQjN3QixLQUFLc3dCLGNBQ0x0d0IsS0FBSzR3QixlQUNMNXdCLEtBQUtpVSxTQUFTaFMsT0FBTyxJQUFJaWtCLEVBQWVqQixFQUFLRSxVQUFXLHVCQUF5QndMLEVBQVMsS0FBT0EsRUFBUyxRQUdsSGQsRUFBaUJ4d0IsVUFBVW14QixtQkFBcUIsV0FDNUMsSUFBSTltQixFQUFRMUosS0FDWkEsS0FBSzh2QixXQUFXZSxrQkFBaUIsV0FDN0IsT0FBMEIsT0FBdEJubkIsRUFBTTRtQixhQUNONW1CLEVBQU1rbkIsZUFDQ2xuQixFQUFNcEcsS0FBS2QsTUFBSyxTQUFVRixHQUM3QixPQUFPb0gsRUFBTXVLLFNBQVNqUyxRQUFRTSxPQUkzQlAsUUFBUUMsY0FJM0I2dEIsRUFBaUJ4d0IsVUFBVXV4QixhQUFlLFdBQ2IsT0FBckI1d0IsS0FBS3N3QixjQUNMdHdCLEtBQUtpd0IsZ0JBQWdCandCLE1BQ3JCNHdCLGFBQWE1d0IsS0FBS3N3QixhQUNsQnR3QixLQUFLc3dCLFlBQWMsT0FHcEJULEVBcEYwQixHQXNGakNpQixHQUE0QixXQUM1QixTQUFTQSxJQUVMOXdCLEtBQUsrd0IsS0FBT2h2QixRQUFRQyxVQUdwQmhDLEtBQUtneEIsaUJBQWtCLEVBR3ZCaHhCLEtBQUtpeEIsa0JBQW9CLEdBRXpCanhCLEtBQUs4a0IsUUFBVSxLQUdmOWtCLEtBQUtreEIscUJBQXNCLEVBRTNCbHhCLEtBQUtteEIsZUFBaUIsR0FxTTFCLE9Bbk1BaHpCLE9BQU9DLGVBQWUweUIsRUFBV3p4QixVQUFXLGlCQUFrQixDQUcxRGYsSUFBSyxXQUNELE9BQU8wQixLQUFLZ3hCLGlCQUVoQjN5QixZQUFZLEVBQ1prWixjQUFjLElBTWxCdVosRUFBV3p4QixVQUFVd3hCLGlCQUFtQixTQUFVdnRCLEdBRTlDdEQsS0FBS294QixRQUFROXRCLElBTWpCd3RCLEVBQVd6eEIsVUFBVWd5QixrQ0FBb0MsU0FBVS90QixHQUMvRHRELEtBQUtzeEIsa0JBRUx0eEIsS0FBS3V4QixnQkFBZ0JqdUIsSUFNekJ3dEIsRUFBV3p4QixVQUFVbXlCLHlCQUEyQixTQUFVbHVCLEdBRXRELE9BREF0RCxLQUFLc3hCLGtCQUNFdHhCLEtBQUt1eEIsZ0JBQWdCanVCLElBU2hDd3RCLEVBQVd6eEIsVUFBVW95QiwyQkFBNkIsU0FBVW51QixHQUN4RCxPQUFPa0MsRUFBTTlELFVBQVUxQixVQUFNLE9BQVEsR0FBUSxXQUN6QyxPQUFPd0YsRUFBTS9DLFlBQVl6QyxNQUFNLFNBQVVpTCxHQUNyQyxPQUFRQSxFQUFHbEksT0FDUCxLQUFLLEVBRUQsT0FEQS9DLEtBQUtzeEIsa0JBQ0N0eEIsS0FBS2d4QixnQkFBd0IsQ0FBQyxFQUFhLElBQ2pEaHhCLEtBQUtneEIsaUJBQWtCLEVBQ2hCLENBQUMsRUFBYWh4QixLQUFLd3hCLHlCQUF5Qmx1QixLQUN2RCxLQUFLLEVBQ0QySCxFQUFHakksT0FDSGlJLEVBQUdsSSxNQUFRLEVBQ2YsS0FBSyxFQUFHLE1BQU8sQ0FBQyxXQVNoQyt0QixFQUFXenhCLFVBQVUreEIsUUFBVSxTQUFVOXRCLEdBRXJDLE9BREF0RCxLQUFLc3hCLGtCQUNEdHhCLEtBQUtneEIsZ0JBRUUsSUFBSWp2QixTQUFRLFNBQVVDLE9BRTFCaEMsS0FBS3V4QixnQkFBZ0JqdUIsSUFFaEN3dEIsRUFBV3p4QixVQUFVa3lCLGdCQUFrQixTQUFVanVCLEdBQzdDLElBQUlvRyxFQUFRMUosS0FDUjB4QixFQUFVMXhCLEtBQUsrd0IsS0FBS3Z1QixNQUFLLFdBRXpCLE9BREFrSCxFQUFNd25CLHFCQUFzQixFQUNyQjV0QixJQUNGd0csT0FBTSxTQUFVNm5CLEdBQ2pCam9CLEVBQU1vYixRQUFVNk0sRUFDaEJqb0IsRUFBTXduQixxQkFBc0IsRUFDNUIsSUFBSW5yQixFQUFVNHJCLEVBQVFDLE9BQVNELEVBQVE1ckIsU0FBVyxHQWFsRCxNQVpBakMsRUFBTSw2QkFBOEJpQyxHQUloQ0EsRUFBUXRGLFFBQVEsa0NBQW9DLEdBQ3BEOHZCLFlBQVcsV0FDUCxNQUFNb0IsSUFDUCxHQUtEQSxLQUVMbnZCLE1BQUssU0FBVUYsR0FFaEIsT0FEQW9ILEVBQU13bkIscUJBQXNCLEVBQ3JCNXVCLFFBSWYsT0FEQXRDLEtBQUsrd0IsS0FBT1csRUFDTEEsR0FPWFosRUFBV3p4QixVQUFVd3lCLGtCQUFvQixTQUFVOUIsRUFBU0ksRUFBUzdzQixHQUNqRSxJQUFJb0csRUFBUTFKLEtBQ1pBLEtBQUtzeEIsa0JBQ0x6ckIsRUFBT3NxQixHQUFXLEVBQUcsK0RBQWlFQSxHQUVsRm53QixLQUFLbXhCLGVBQWUxd0IsUUFBUXN2QixJQUFZLElBQ3hDSSxFQUFVLEdBRWQsSUFBSUMsRUFBWVAsR0FBaUJLLGtCQUFrQmx3QixLQUFNK3ZCLEVBQVNJLEVBQVM3c0IsR0FBSSxTQUFVd3VCLEdBQ3JGLE9BQU9wb0IsRUFBTXFvQix1QkFBdUJELE1BR3hDLE9BREE5eEIsS0FBS2l4QixrQkFBa0J4dEIsS0FBSzJzQixHQUNyQkEsR0FFWFUsRUFBV3p4QixVQUFVaXlCLGdCQUFrQixXQUMvQnR4QixLQUFLOGtCLFNBQ0xELEVBQUssa0NBQ0E3a0IsS0FBSzhrQixRQUFROE0sT0FBUzV4QixLQUFLOGtCLFFBQVEvZSxXQVNoRCtxQixFQUFXenhCLFVBQVUyeUIsMEJBQTRCLFdBQzdDbnNCLEVBQU83RixLQUFLa3hCLG9CQUFxQixzRUFNckNKLEVBQVd6eEIsVUFBVTR5QixNQUFRLFdBRXpCLE9BQU9qeUIsS0FBS3d4QiwwQkFBeUIsV0FBYyxPQUFPenZCLFFBQVFDLGNBTXRFOHVCLEVBQVd6eEIsVUFBVTZ5Qix5QkFBMkIsU0FBVW5DLEdBQ3RELElBQUssSUFBSXBsQixFQUFLLEVBQUdNLEVBQUtqTCxLQUFLaXhCLGtCQUFtQnRtQixFQUFLTSxFQUFHNUssT0FBUXNLLElBQU0sQ0FFaEUsR0FEU00sRUFBR04sR0FDTG9sQixVQUFZQSxFQUNmLE9BQU8sRUFHZixPQUFPLEdBVVhlLEVBQVd6eEIsVUFBVTh5QiwwQkFBNEIsU0FBVUMsR0FDdkQsSUFBSTFvQixFQUFRMUosS0FFWixPQUFPQSxLQUFLaXlCLFFBQVF6dkIsTUFBSyxXQUNyQnFELEVBQU91c0IsSUFBZ0J4SCxHQUFReUgsS0FDM0Izb0IsRUFBTXdvQix5QkFBeUJFLEdBQWMsMkNBQTZDQSxHQUU5RjFvQixFQUFNdW5CLGtCQUFrQnFCLE1BQUssU0FBVWx1QixFQUFHMUUsR0FBSyxPQUFPMEUsRUFBRTRyQixhQUFldHdCLEVBQUVzd0IsZ0JBQ3pFLElBQUssSUFBSXJsQixFQUFLLEVBQUdNLEVBQUt2QixFQUFNdW5CLGtCQUFtQnRtQixFQUFLTSxFQUFHNUssT0FBUXNLLElBQU0sQ0FDakUsSUFBSXJILEVBQUsySCxFQUFHTixHQUVaLEdBREFySCxFQUFHbXRCLFlBQ0MyQixJQUFnQnhILEdBQVF5SCxLQUFPL3VCLEVBQUd5c0IsVUFBWXFDLEVBQzlDLE1BR1IsT0FBTzFvQixFQUFNdW9CLFlBTXJCbkIsRUFBV3p4QixVQUFVa3pCLHFCQUF1QixTQUFVeEMsR0FDbEQvdkIsS0FBS214QixlQUFlMXRCLEtBQUtzc0IsSUFHN0JlLEVBQVd6eEIsVUFBVTB5Qix1QkFBeUIsU0FBVXp1QixHQUVwRCxJQUFJNlksRUFBUW5jLEtBQUtpeEIsa0JBQWtCeHdCLFFBQVE2QyxHQUMzQ3VDLEVBQU9zVyxHQUFTLEVBQUcsZ0NBQ25CbmMsS0FBS2l4QixrQkFBa0J0TyxPQUFPeEcsRUFBTyxJQUVsQzJVLEVBck5vQixHQXdPM0IwQixHQUFhLElBQ2JDLEdBQXVCLElBQ3ZCQyxHQUFhLElBQ2JDLEdBQWdCLElBSXBCLFNBQVNDLEdBQU9uRSxHQUVaLElBREEsSUFBSW5zQixFQUFTLEdBQ0o3RSxFQUFJLEVBQUdBLEVBQUlneEIsRUFBS3B1QixPQUFRNUMsSUFDekI2RSxFQUFPakMsT0FBUyxJQUNoQmlDLEVBQVN1d0IsR0FBZ0J2d0IsSUFFN0JBLEVBQVN3d0IsR0FBY3JFLEVBQUtud0IsSUFBSWIsR0FBSTZFLEdBRXhDLE9BQU91d0IsR0FBZ0J2d0IsR0FHM0IsU0FBU3d3QixHQUFjdEYsRUFBU3VGLEdBRzVCLElBRkEsSUFBSXp3QixFQUFTeXdCLEVBQ1QxeUIsRUFBU210QixFQUFRbnRCLE9BQ1o1QyxFQUFJLEVBQUdBLEVBQUk0QyxFQUFRNUMsSUFBSyxDQUM3QixJQUFJSyxFQUFJMHZCLEVBQVEza0IsT0FBT3BMLEdBQ3ZCLE9BQVFLLEdBQ0osSUFBSyxLQUNEd0UsR0FBVWt3QixHQUFhRSxHQUN2QixNQUNKLEtBQUtGLEdBQ0Rsd0IsR0FBVWt3QixHQUFhRyxHQUN2QixNQUNKLFFBQ0lyd0IsR0FBVXhFLEdBR3RCLE9BQU93RSxFQUdYLFNBQVN1d0IsR0FBZ0J2d0IsR0FDckIsT0FBT0EsRUFBU2t3QixHQUFhQyxHQVFqQyxTQUFTN21CLEdBQU82aUIsR0FHWixJQUFJcHVCLEVBQVNvdUIsRUFBS3B1QixPQUVsQixHQURBd0YsRUFBT3hGLEdBQVUsRUFBRyxnQkFBa0JvdUIsR0FDdkIsSUFBWHB1QixFQUVBLE9BREF3RixFQUFPNG9CLEVBQUs1bEIsT0FBTyxLQUFPMnBCLElBQWMvRCxFQUFLNWxCLE9BQU8sS0FBTzRwQixHQUFzQixrQkFBb0JoRSxFQUFPLGlCQUNyR0gsR0FBYUksV0FPeEIsSUFIQSxJQUFJc0UsRUFBNEIzeUIsRUFBUyxFQUNyQzZzQixFQUFXLEdBQ1grRixFQUFpQixHQUNaNUMsRUFBUSxFQUFHQSxFQUFRaHdCLEdBQVMsQ0FHakMsSUFBSTZ0QixFQUFNTyxFQUFLaHVCLFFBQVEreEIsR0FBWW5DLEdBS25DLFFBSkluQyxFQUFNLEdBQUtBLEVBQU04RSxJQUNqQm5PLEVBQUssbUNBQXFDNEosRUFBTyxLQUUxQ0EsRUFBSzVsQixPQUFPcWxCLEVBQU0sSUFFekIsS0FBS3VFLEdBQ0QsSUFBSVMsRUFBZXpFLEVBQUt0RixVQUFVa0gsRUFBT25DLEdBQ3JDVixPQUFVLEVBQ2dCLElBQTFCeUYsRUFBZTV5QixPQUdmbXRCLEVBQVUwRixHQUlWMUYsRUFEQXlGLEdBQWtCQyxFQUVsQkQsRUFBaUIsSUFFckIvRixFQUFTenBCLEtBQUsrcEIsR0FDZCxNQUNKLEtBQUtrRixHQUNETyxHQUFrQnhFLEVBQUt0RixVQUFVa0gsRUFBT25DLEdBQ3hDK0UsR0FBa0IsS0FDbEIsTUFDSixLQUFLTixHQUVETSxHQUFrQnhFLEVBQUt0RixVQUFVa0gsRUFBT25DLEVBQU0sR0FDOUMsTUFDSixRQUNJckosRUFBSyxtQ0FBcUM0SixFQUFPLEtBRXpENEIsRUFBUW5DLEVBQU0sRUFFbEIsT0FBTyxJQUFJSSxHQUFhcEI7Ozs7Ozs7Ozs7Ozs7Ozs7R0FtQjVCLElBQUlpRyxHQUEyQixXQUMzQixTQUFTQSxFQUFVQyxFQUFTQyxHQUd4QixHQUZBcnpCLEtBQUtvekIsUUFBVUEsRUFDZnB6QixLQUFLcXpCLFlBQWNBLEVBQ2ZBLEVBQWMsRUFDZCxNQUFNLElBQUluTixFQUFlakIsRUFBS0ksaUJBQWtCLHVDQUF5Q2dPLEdBRTdGLEdBQUlBLEdBQWUsSUFDZixNQUFNLElBQUluTixFQUFlakIsRUFBS0ksaUJBQWtCLHVDQUF5Q2dPLEdBRzdGLEdBQUlELEdBQVcsWUFDWCxNQUFNLElBQUlsTixFQUFlakIsRUFBS0ksaUJBQWtCLG1DQUFxQytOLEdBR3pGLEdBQUlBLEdBQVcsYUFDWCxNQUFNLElBQUlsTixFQUFlakIsRUFBS0ksaUJBQWtCLG1DQUFxQytOLEdBb0M3RixPQWpDQUQsRUFBVXhpQixJQUFNLFdBQ1osT0FBT3dpQixFQUFVRyxXQUFXanFCLEtBQUtzSCxRQUVyQ3dpQixFQUFVSSxTQUFXLFNBQVVDLEdBQzNCLE9BQU9MLEVBQVVHLFdBQVdFLEVBQUtscUIsWUFFckM2cEIsRUFBVUcsV0FBYSxTQUFVRyxHQUM3QixJQUFJTCxFQUFVeGlCLEtBQUtDLE1BQU00aUIsRUFBZSxLQUV4QyxPQUFPLElBQUlOLEVBQVVDLEVBRHlCLEtBQWpDSyxFQUF5QixJQUFWTCxLQUdoQ0QsRUFBVTl6QixVQUFVcTBCLE9BQVMsV0FDekIsT0FBTyxJQUFJcnFCLEtBQUtySixLQUFLMnpCLGFBRXpCUixFQUFVOXpCLFVBQVVzMEIsU0FBVyxXQUMzQixPQUFzQixJQUFmM3pCLEtBQUtvekIsUUFBaUJwekIsS0FBS3F6QixZQUFjLEtBRXBERixFQUFVOXpCLFVBQVVtc0IsV0FBYSxTQUFVRCxHQUN2QyxPQUFJdnJCLEtBQUtvekIsVUFBWTdILEVBQU02SCxRQUNoQmxKLEVBQW9CbHFCLEtBQUtxekIsWUFBYTlILEVBQU04SCxhQUVoRG5KLEVBQW9CbHFCLEtBQUtvekIsUUFBUzdILEVBQU02SCxVQUVuREQsRUFBVTl6QixVQUFVaXJCLFFBQVUsU0FBVWlCLEdBQ3BDLE9BQVFBLEVBQU02SCxVQUFZcHpCLEtBQUtvekIsU0FBVzdILEVBQU04SCxjQUFnQnJ6QixLQUFLcXpCLGFBRXpFRixFQUFVOXpCLFVBQVVtTSxTQUFXLFdBQzNCLE1BQVEscUJBQ0p4TCxLQUFLb3pCLFFBQ0wsaUJBQ0FwekIsS0FBS3F6QixZQUNMLEtBRURGLEVBcERtQixHQTJFMUJTLEdBQWlDLFdBQ2pDLFNBQVNBLEVBQWdCQyxHQUNyQjd6QixLQUFLNnpCLFVBQVlBLEVBaUNyQixPQTdCQUQsRUFBZ0JFLGlCQUFtQixTQUFVcDFCLEdBQ3pDLElBQUkwMEIsRUFBVXhpQixLQUFLQyxNQUFNblMsRUFBUSxLQUVqQyxPQUFPLElBQUlrMUIsRUFBZ0IsSUFBSVQsR0FBVUMsRUFENUIxMEIsRUFBUSxJQUFPLE9BR2hDazFCLEVBQWdCRyxjQUFnQixTQUFVcjFCLEdBQ3RDLE9BQU8sSUFBSWsxQixFQUFnQmwxQixJQUUvQmsxQixFQUFnQkksY0FBZ0IsV0FDNUIsT0FBT0osRUFBZ0JLLEtBRTNCTCxFQUFnQnYwQixVQUFVK3NCLFVBQVksU0FBVWIsR0FDNUMsT0FBT3ZyQixLQUFLNnpCLFVBQVVySSxXQUFXRCxFQUFNc0ksWUFFM0NELEVBQWdCdjBCLFVBQVVpckIsUUFBVSxTQUFVaUIsR0FDMUMsT0FBT3ZyQixLQUFLNnpCLFVBQVV2SixRQUFRaUIsRUFBTXNJLFlBR3hDRCxFQUFnQnYwQixVQUFVNjBCLGVBQWlCLFdBRXZDLE9BQWdDLElBQXpCbDBCLEtBQUs2ekIsVUFBVVQsUUFBZ0JwekIsS0FBSzZ6QixVQUFVUixZQUFjLEtBRXZFTyxFQUFnQnYwQixVQUFVbU0sU0FBVyxXQUNqQyxNQUFPLG1CQUFxQnhMLEtBQUs2ekIsVUFBVXJvQixXQUFhLEtBRTVEb29CLEVBQWdCdjBCLFVBQVU4MEIsWUFBYyxXQUNwQyxPQUFPbjBCLEtBQUs2ekIsV0FFaEJELEVBQWdCSyxJQUFNLElBQUlMLEVBQWdCLElBQUlULEdBQVUsRUFBRyxJQUNwRFMsRUFuQ3lCLEdBd0RoQ1EsR0FBMkIsV0FDM0IsU0FBU0EsRUFBVWhILEVBQVlpSCxHQUMzQnIwQixLQUFLb3RCLFdBQWFBLEVBQ2xCcHRCLEtBQUtxMEIsS0FBT0EsR0FBY0MsR0FBUzFFLE1BbUh2QyxPQWhIQXdFLEVBQVUvMEIsVUFBVTJoQixPQUFTLFNBQVVoaUIsRUFBS04sR0FDeEMsT0FBTyxJQUFJMDFCLEVBQVVwMEIsS0FBS290QixXQUFZcHRCLEtBQUtxMEIsS0FDdENyVCxPQUFPaGlCLEVBQUtOLEVBQU9zQixLQUFLb3RCLFlBQ3hCbUgsS0FBSyxLQUFNLEtBQU1ELEdBQVNFLE1BQU8sS0FBTSxRQUdoREosRUFBVS8wQixVQUFVaWlCLE9BQVMsU0FBVXRpQixHQUNuQyxPQUFPLElBQUlvMUIsRUFBVXAwQixLQUFLb3RCLFdBQVlwdEIsS0FBS3EwQixLQUN0Qy9TLE9BQU90aUIsRUFBS2dCLEtBQUtvdEIsWUFDakJtSCxLQUFLLEtBQU0sS0FBTUQsR0FBU0UsTUFBTyxLQUFNLFFBR2hESixFQUFVLzBCLFVBQVVmLElBQU0sU0FBVVUsR0FFaEMsSUFEQSxJQUFJeTFCLEVBQU96MEIsS0FBS3EwQixNQUNSSSxFQUFLemtCLFdBQVcsQ0FDcEIsSUFBSTBrQixFQUFNMTBCLEtBQUtvdEIsV0FBV3B1QixFQUFLeTFCLEVBQUt6MUIsS0FDcEMsR0FBWSxJQUFSMDFCLEVBQ0EsT0FBT0QsRUFBSy8xQixNQUVQZzJCLEVBQU0sRUFDWEQsRUFBT0EsRUFBS3RLLEtBRVB1SyxFQUFNLElBQ1hELEVBQU9BLEVBQUtySyxPQUdwQixPQUFPLE1BSVhnSyxFQUFVLzBCLFVBQVVvQixRQUFVLFNBQVV6QixHQUlwQyxJQUZBLElBQUkyMUIsRUFBYyxFQUNkRixFQUFPejBCLEtBQUtxMEIsTUFDUkksRUFBS3prQixXQUFXLENBQ3BCLElBQUkwa0IsRUFBTTEwQixLQUFLb3RCLFdBQVdwdUIsRUFBS3kxQixFQUFLejFCLEtBQ3BDLEdBQVksSUFBUjAxQixFQUNBLE9BQU9DLEVBQWNGLEVBQUt0SyxLQUFLd0QsS0FFMUIrRyxFQUFNLEVBQ1hELEVBQU9BLEVBQUt0SyxNQUlad0ssR0FBZUYsRUFBS3RLLEtBQUt3RCxLQUFPLEVBQ2hDOEcsRUFBT0EsRUFBS3JLLE9BSXBCLE9BQVEsR0FFWmdLLEVBQVUvMEIsVUFBVTJRLFFBQVUsV0FDMUIsT0FBT2hRLEtBQUtxMEIsS0FBS3JrQixXQUVyQjdSLE9BQU9DLGVBQWVnMkIsRUFBVS8wQixVQUFXLE9BQVEsQ0FFL0NmLElBQUssV0FDRCxPQUFPMEIsS0FBS3EwQixLQUFLMUcsTUFFckJ0dkIsWUFBWSxFQUNaa1osY0FBYyxJQUdsQjZjLEVBQVUvMEIsVUFBVXUxQixPQUFTLFdBQ3pCLE9BQU81MEIsS0FBS3EwQixLQUFLTyxVQUdyQlIsRUFBVS8wQixVQUFVdzFCLE9BQVMsV0FDekIsT0FBTzcwQixLQUFLcTBCLEtBQUtRLFVBTXJCVCxFQUFVLzBCLFVBQVV5MUIsaUJBQW1CLFNBQVVDLEdBQzdDLE9BQU8vMEIsS0FBS3EwQixLQUFLUyxpQkFBaUJDLElBRXRDWCxFQUFVLzBCLFVBQVVtUyxRQUFVLFNBQVU1QyxHQUNwQzVPLEtBQUs4MEIsa0JBQWlCLFNBQVUzd0IsRUFBR2QsR0FFL0IsT0FEQXVMLEVBQUd6SyxFQUFHZCxJQUNDLE1BR2Yrd0IsRUFBVS8wQixVQUFVbU0sU0FBVyxXQUMzQixJQUFJd3BCLEVBQWUsR0FLbkIsT0FKQWgxQixLQUFLODBCLGtCQUFpQixTQUFVM3dCLEVBQUdkLEdBRS9CLE9BREEyeEIsRUFBYXZ4QixLQUFLVSxFQUFJLElBQU1kLElBQ3JCLEtBRUosSUFBTTJ4QixFQUFhbHRCLEtBQUssTUFBUSxLQU8zQ3NzQixFQUFVLzBCLFVBQVU0MUIsaUJBQW1CLFNBQVVGLEdBQzdDLE9BQU8vMEIsS0FBS3EwQixLQUFLWSxpQkFBaUJGLElBR3RDWCxFQUFVLzBCLFVBQVU2MUIsWUFBYyxXQUM5QixPQUFPLElBQUlDLEdBQWtCbjFCLEtBQUtxMEIsS0FBTSxLQUFNcjBCLEtBQUtvdEIsWUFBWSxJQUVuRWdILEVBQVUvMEIsVUFBVSsxQixnQkFBa0IsU0FBVXAyQixHQUM1QyxPQUFPLElBQUltMkIsR0FBa0JuMUIsS0FBS3EwQixLQUFNcjFCLEVBQUtnQixLQUFLb3RCLFlBQVksSUFFbEVnSCxFQUFVLzBCLFVBQVVnMkIsbUJBQXFCLFdBQ3JDLE9BQU8sSUFBSUYsR0FBa0JuMUIsS0FBS3EwQixLQUFNLEtBQU1yMEIsS0FBS290QixZQUFZLElBRW5FZ0gsRUFBVS8wQixVQUFVaTJCLHVCQUF5QixTQUFVdDJCLEdBQ25ELE9BQU8sSUFBSW0yQixHQUFrQm4xQixLQUFLcTBCLEtBQU1yMUIsRUFBS2dCLEtBQUtvdEIsWUFBWSxJQUUzRGdILEVBdEhtQixHQXlIMUJlLEdBQW1DLFdBQ25DLFNBQVNBLEVBQWtCVixFQUFNYyxFQUFVbkksRUFBWW9JLEdBQ25EeDFCLEtBQUt3MUIsVUFBWUEsRUFDakJ4MUIsS0FBS3kxQixVQUFZLEdBRWpCLElBREEsSUFBSWYsRUFBTSxHQUNGRCxFQUFLemtCLFdBTVQsR0FMQTBrQixFQUFNYSxFQUFXbkksRUFBV3FILEVBQUt6MUIsSUFBS3UyQixHQUFZLEVBRTlDQyxJQUNBZCxJQUFRLEdBRVJBLEVBQU0sRUFHRkQsRUFEQXowQixLQUFLdzFCLFVBQ0VmLEVBQUt0SyxLQUdMc0ssRUFBS3JLLFVBR2YsSUFBWSxJQUFSc0ssRUFBVyxDQUdoQjEwQixLQUFLeTFCLFVBQVVoeUIsS0FBS2d4QixHQUNwQixNQUtBejBCLEtBQUt5MUIsVUFBVWh5QixLQUFLZ3hCLEdBRWhCQSxFQURBejBCLEtBQUt3MUIsVUFDRWYsRUFBS3JLLE1BR0xxSyxFQUFLdEssTUFtQzVCLE9BOUJBZ0wsRUFBa0I5MUIsVUFBVXEyQixRQUFVLFdBQ2xDN3ZCLEVBQU83RixLQUFLeTFCLFVBQVVwMUIsT0FBUyxFQUFHLHlEQUNsQyxJQUFJbzBCLEVBQU96MEIsS0FBS3kxQixVQUFVanlCLE1BQ3RCbEIsRUFBUyxDQUFFdEQsSUFBS3kxQixFQUFLejFCLElBQUtOLE1BQU8rMUIsRUFBSy8xQixPQUMxQyxHQUFJc0IsS0FBS3cxQixVQUVMLElBREFmLEVBQU9BLEVBQUt0SyxNQUNKc0ssRUFBS3prQixXQUNUaFEsS0FBS3kxQixVQUFVaHlCLEtBQUtneEIsR0FDcEJBLEVBQU9BLEVBQUtySyxXQUtoQixJQURBcUssRUFBT0EsRUFBS3JLLE9BQ0pxSyxFQUFLemtCLFdBQ1RoUSxLQUFLeTFCLFVBQVVoeUIsS0FBS2d4QixHQUNwQkEsRUFBT0EsRUFBS3RLLEtBR3BCLE9BQU83bkIsR0FFWDZ5QixFQUFrQjkxQixVQUFVczJCLFFBQVUsV0FDbEMsT0FBTzMxQixLQUFLeTFCLFVBQVVwMUIsT0FBUyxHQUVuQzgwQixFQUFrQjkxQixVQUFVdTJCLEtBQU8sV0FDL0IsR0FBOEIsSUFBMUI1MUIsS0FBS3kxQixVQUFVcDFCLE9BQ2YsT0FBTyxLQUVYLElBQUlvMEIsRUFBT3owQixLQUFLeTFCLFVBQVV6MUIsS0FBS3kxQixVQUFVcDFCLE9BQVMsR0FDbEQsTUFBTyxDQUFFckIsSUFBS3kxQixFQUFLejFCLElBQUtOLE1BQU8rMUIsRUFBSy8xQixRQUVqQ3kyQixFQXJFMkIsR0F3RWxDYixHQUEwQixXQUMxQixTQUFTQSxFQUFTdDFCLEVBQUtOLEVBQU9tM0IsRUFBTzFMLEVBQU1DLEdBQ3ZDcHFCLEtBQUtoQixJQUFNQSxFQUNYZ0IsS0FBS3RCLE1BQVFBLEVBQ2JzQixLQUFLNjFCLE1BQWlCLE1BQVRBLEVBQWdCQSxFQUFRdkIsRUFBU3dCLElBQzlDOTFCLEtBQUttcUIsS0FBZSxNQUFSQSxFQUFlQSxFQUFPbUssRUFBUzFFLE1BQzNDNXZCLEtBQUtvcUIsTUFBaUIsTUFBVEEsRUFBZ0JBLEVBQVFrSyxFQUFTMUUsTUFDOUM1dkIsS0FBSzJ0QixLQUFPM3RCLEtBQUttcUIsS0FBS3dELEtBQU8sRUFBSTN0QixLQUFLb3FCLE1BQU11RCxLQXdMaEQsT0FyTEEyRyxFQUFTajFCLFVBQVVrMUIsS0FBTyxTQUFVdjFCLEVBQUtOLEVBQU9tM0IsRUFBTzFMLEVBQU1DLEdBQ3pELE9BQU8sSUFBSWtLLEVBQWdCLE1BQVB0MUIsRUFBY0EsRUFBTWdCLEtBQUtoQixJQUFjLE1BQVROLEVBQWdCQSxFQUFRc0IsS0FBS3RCLE1BQWdCLE1BQVRtM0IsRUFBZ0JBLEVBQVE3MUIsS0FBSzYxQixNQUFlLE1BQVIxTCxFQUFlQSxFQUFPbnFCLEtBQUttcUIsS0FBZSxNQUFUQyxFQUFnQkEsRUFBUXBxQixLQUFLb3FCLFFBRTVMa0ssRUFBU2oxQixVQUFVMlEsUUFBVSxXQUN6QixPQUFPLEdBTVhza0IsRUFBU2oxQixVQUFVeTFCLGlCQUFtQixTQUFVQyxHQUM1QyxPQUFRLzBCLEtBQUttcUIsS0FBSzJLLGlCQUFpQkMsSUFDL0JBLEVBQU8vMEIsS0FBS2hCLElBQUtnQixLQUFLdEIsUUFDdEJzQixLQUFLb3FCLE1BQU0wSyxpQkFBaUJDLElBTXBDVCxFQUFTajFCLFVBQVU0MUIsaUJBQW1CLFNBQVVGLEdBQzVDLE9BQVEvMEIsS0FBS29xQixNQUFNNkssaUJBQWlCRixJQUNoQ0EsRUFBTy8wQixLQUFLaEIsSUFBS2dCLEtBQUt0QixRQUN0QnNCLEtBQUttcUIsS0FBSzhLLGlCQUFpQkYsSUFHbkNULEVBQVNqMUIsVUFBVWd2QixJQUFNLFdBQ3JCLE9BQUlydUIsS0FBS21xQixLQUFLbmEsVUFDSGhRLEtBR0FBLEtBQUttcUIsS0FBS2tFLE9BSXpCaUcsRUFBU2oxQixVQUFVdTFCLE9BQVMsV0FDeEIsT0FBTzUwQixLQUFLcXVCLE1BQU1ydkIsS0FHdEJzMUIsRUFBU2oxQixVQUFVdzFCLE9BQVMsV0FDeEIsT0FBSTcwQixLQUFLb3FCLE1BQU1wYSxVQUNKaFEsS0FBS2hCLElBR0xnQixLQUFLb3FCLE1BQU15SyxVQUkxQlAsRUFBU2oxQixVQUFVMmhCLE9BQVMsU0FBVWhpQixFQUFLTixFQUFPMHVCLEdBQzlDLElBQUlsdUIsRUFBSWMsS0FDSjAwQixFQUFNdEgsRUFBV3B1QixFQUFLRSxFQUFFRixLQVU1QixPQVJJRSxFQURBdzFCLEVBQU0sRUFDRngxQixFQUFFcTFCLEtBQUssS0FBTSxLQUFNLEtBQU1yMUIsRUFBRWlyQixLQUFLbkosT0FBT2hpQixFQUFLTixFQUFPMHVCLEdBQWEsTUFFdkQsSUFBUnNILEVBQ0R4MUIsRUFBRXExQixLQUFLLEtBQU03MUIsRUFBTyxLQUFNLEtBQU0sTUFHaENRLEVBQUVxMUIsS0FBSyxLQUFNLEtBQU0sS0FBTSxLQUFNcjFCLEVBQUVrckIsTUFBTXBKLE9BQU9oaUIsRUFBS04sRUFBTzB1QixLQUV6RDJJLFNBRWJ6QixFQUFTajFCLFVBQVUyMkIsVUFBWSxXQUMzQixHQUFJaDJCLEtBQUttcUIsS0FBS25hLFVBQ1YsT0FBT3NrQixFQUFTMUUsTUFFcEIsSUFBSTF3QixFQUFJYyxLQUtSLE9BSktkLEVBQUVpckIsS0FBSzhMLFNBQVkvMkIsRUFBRWlyQixLQUFLQSxLQUFLOEwsVUFDaEMvMkIsRUFBSUEsRUFBRWczQixnQkFFVmgzQixFQUFJQSxFQUFFcTFCLEtBQUssS0FBTSxLQUFNLEtBQU1yMUIsRUFBRWlyQixLQUFLNkwsWUFBYSxPQUN4Q0QsU0FHYnpCLEVBQVNqMUIsVUFBVWlpQixPQUFTLFNBQVV0aUIsRUFBS291QixHQUN2QyxJQUFJK0ksRUFDQWozQixFQUFJYyxLQUNSLEdBQUlvdEIsRUFBV3B1QixFQUFLRSxFQUFFRixLQUFPLEVBQ3BCRSxFQUFFaXJCLEtBQUtuYSxXQUFjOVEsRUFBRWlyQixLQUFLOEwsU0FBWS8yQixFQUFFaXJCLEtBQUtBLEtBQUs4TCxVQUNyRC8yQixFQUFJQSxFQUFFZzNCLGVBRVZoM0IsRUFBSUEsRUFBRXExQixLQUFLLEtBQU0sS0FBTSxLQUFNcjFCLEVBQUVpckIsS0FBSzdJLE9BQU90aUIsRUFBS291QixHQUFhLFVBRTVELENBT0QsR0FOSWx1QixFQUFFaXJCLEtBQUs4TCxVQUNQLzJCLEVBQUlBLEVBQUVrM0IsZUFFTGwzQixFQUFFa3JCLE1BQU1wYSxXQUFjOVEsRUFBRWtyQixNQUFNNkwsU0FBWS8yQixFQUFFa3JCLE1BQU1ELEtBQUs4TCxVQUN4RC8yQixFQUFJQSxFQUFFbTNCLGdCQUVxQixJQUEzQmpKLEVBQVdwdUIsRUFBS0UsRUFBRUYsS0FBWSxDQUM5QixHQUFJRSxFQUFFa3JCLE1BQU1wYSxVQUNSLE9BQU9za0IsRUFBUzFFLE1BR2hCdUcsRUFBV2ozQixFQUFFa3JCLE1BQU1pRSxNQUNuQm52QixFQUFJQSxFQUFFcTFCLEtBQUs0QixFQUFTbjNCLElBQUttM0IsRUFBU3ozQixNQUFPLEtBQU0sS0FBTVEsRUFBRWtyQixNQUFNNEwsYUFHckU5MkIsRUFBSUEsRUFBRXExQixLQUFLLEtBQU0sS0FBTSxLQUFNLEtBQU1yMUIsRUFBRWtyQixNQUFNOUksT0FBT3RpQixFQUFLb3VCLElBRTNELE9BQU9sdUIsRUFBRTYyQixTQUViekIsRUFBU2oxQixVQUFVNDJCLE1BQVEsV0FDdkIsT0FBT2oyQixLQUFLNjFCLE9BR2hCdkIsRUFBU2oxQixVQUFVMDJCLE1BQVEsV0FDdkIsSUFBSTcyQixFQUFJYyxLQVVSLE9BVElkLEVBQUVrckIsTUFBTTZMLFVBQVkvMkIsRUFBRWlyQixLQUFLOEwsVUFDM0IvMkIsRUFBSUEsRUFBRW8zQixjQUVOcDNCLEVBQUVpckIsS0FBSzhMLFNBQVcvMkIsRUFBRWlyQixLQUFLQSxLQUFLOEwsVUFDOUIvMkIsRUFBSUEsRUFBRWszQixlQUVObDNCLEVBQUVpckIsS0FBSzhMLFNBQVcvMkIsRUFBRWtyQixNQUFNNkwsVUFDMUIvMkIsRUFBSUEsRUFBRXEzQixhQUVIcjNCLEdBRVhvMUIsRUFBU2oxQixVQUFVNjJCLFlBQWMsV0FDN0IsSUFBSWgzQixFQUFJYyxLQUFLdTJCLFlBTWIsT0FMSXIzQixFQUFFa3JCLE1BQU1ELEtBQUs4TCxVQUdiLzJCLEdBREFBLEdBREFBLEVBQUlBLEVBQUVxMUIsS0FBSyxLQUFNLEtBQU0sS0FBTSxLQUFNcjFCLEVBQUVrckIsTUFBTWdNLGdCQUNyQ0UsY0FDQUMsYUFFSHIzQixHQUVYbzFCLEVBQVNqMUIsVUFBVWczQixhQUFlLFdBQzlCLElBQUluM0IsRUFBSWMsS0FBS3UyQixZQUtiLE9BSklyM0IsRUFBRWlyQixLQUFLQSxLQUFLOEwsVUFFWi8yQixHQURBQSxFQUFJQSxFQUFFazNCLGVBQ0FHLGFBRUhyM0IsR0FFWG8xQixFQUFTajFCLFVBQVVpM0IsV0FBYSxXQUM1QixJQUFJRSxFQUFLeDJCLEtBQUt1MEIsS0FBSyxLQUFNLEtBQU1ELEVBQVN3QixJQUFLLEtBQU05MUIsS0FBS29xQixNQUFNRCxNQUM5RCxPQUFPbnFCLEtBQUtvcUIsTUFBTW1LLEtBQUssS0FBTSxLQUFNdjBCLEtBQUs2MUIsTUFBT1csRUFBSSxPQUV2RGxDLEVBQVNqMUIsVUFBVSsyQixZQUFjLFdBQzdCLElBQUlLLEVBQUt6MkIsS0FBS3UwQixLQUFLLEtBQU0sS0FBTUQsRUFBU3dCLElBQUs5MUIsS0FBS21xQixLQUFLQyxNQUFPLE1BQzlELE9BQU9wcUIsS0FBS21xQixLQUFLb0ssS0FBSyxLQUFNLEtBQU12MEIsS0FBSzYxQixNQUFPLEtBQU1ZLElBRXhEbkMsRUFBU2oxQixVQUFVazNCLFVBQVksV0FDM0IsSUFBSXBNLEVBQU9ucUIsS0FBS21xQixLQUFLb0ssS0FBSyxLQUFNLE1BQU92MEIsS0FBS21xQixLQUFLMEwsTUFBTyxLQUFNLE1BQzFEekwsRUFBUXBxQixLQUFLb3FCLE1BQU1tSyxLQUFLLEtBQU0sTUFBT3YwQixLQUFLb3FCLE1BQU15TCxNQUFPLEtBQU0sTUFDakUsT0FBTzcxQixLQUFLdTBCLEtBQUssS0FBTSxNQUFPdjBCLEtBQUs2MUIsTUFBTzFMLEVBQU1DLElBR3BEa0ssRUFBU2oxQixVQUFVcTNCLGNBQWdCLFdBQy9CLElBQUlDLEVBQWEzMkIsS0FBSzQyQixRQUN0QixPQUFJaG1CLEtBQUtpbUIsSUFBSSxFQUFLRixJQUFlMzJCLEtBQUsydEIsS0FBTyxHQVNqRDJHLEVBQVNqMUIsVUFBVXUzQixNQUFRLFdBQ3ZCLEdBQUk1MkIsS0FBS2kyQixTQUFXajJCLEtBQUttcUIsS0FBSzhMLFFBQzFCLE1BQU1wUixFQUFLLDBCQUE0QjdrQixLQUFLaEIsSUFBTSxJQUFNZ0IsS0FBS3RCLE1BQVEsS0FFekUsR0FBSXNCLEtBQUtvcUIsTUFBTTZMLFFBQ1gsTUFBTXBSLEVBQUssbUJBQXFCN2tCLEtBQUtoQixJQUFNLElBQU1nQixLQUFLdEIsTUFBUSxZQUVsRSxJQUFJaTRCLEVBQWEzMkIsS0FBS21xQixLQUFLeU0sUUFDM0IsR0FBSUQsSUFBZTMyQixLQUFLb3FCLE1BQU13TSxRQUMxQixNQUFNL1IsRUFBSyx1QkFHWCxPQUFPOFIsR0FBYzMyQixLQUFLaTJCLFFBQVUsRUFBSSxJQUtoRDNCLEVBQVMxRSxNQUFRLEtBQ2pCMEUsRUFBU3dCLEtBQU0sRUFDZnhCLEVBQVNFLE9BQVEsRUFDVkYsRUEvTGtCLEdBa016QndDLEdBQStCLFdBQy9CLFNBQVNBLElBQ0w5MkIsS0FBSzJ0QixLQUFPLEVBMEVoQixPQXhFQXh2QixPQUFPQyxlQUFlMDRCLEVBQWN6M0IsVUFBVyxNQUFPLENBQ2xEZixJQUFLLFdBQ0QsTUFBTXVtQixFQUFLLDhCQUVmeG1CLFlBQVksRUFDWmtaLGNBQWMsSUFFbEJwWixPQUFPQyxlQUFlMDRCLEVBQWN6M0IsVUFBVyxRQUFTLENBQ3BEZixJQUFLLFdBQ0QsTUFBTXVtQixFQUFLLGdDQUVmeG1CLFlBQVksRUFDWmtaLGNBQWMsSUFFbEJwWixPQUFPQyxlQUFlMDRCLEVBQWN6M0IsVUFBVyxRQUFTLENBQ3BEZixJQUFLLFdBQ0QsTUFBTXVtQixFQUFLLGdDQUVmeG1CLFlBQVksRUFDWmtaLGNBQWMsSUFFbEJwWixPQUFPQyxlQUFlMDRCLEVBQWN6M0IsVUFBVyxPQUFRLENBQ25EZixJQUFLLFdBQ0QsTUFBTXVtQixFQUFLLHFDQUVmeG1CLFlBQVksRUFDWmtaLGNBQWMsSUFFbEJwWixPQUFPQyxlQUFlMDRCLEVBQWN6M0IsVUFBVyxRQUFTLENBQ3BEZixJQUFLLFdBQ0QsTUFBTXVtQixFQUFLLHNDQUVmeG1CLFlBQVksRUFDWmtaLGNBQWMsSUFHbEJ1ZixFQUFjejNCLFVBQVVrMUIsS0FBTyxTQUFVdjFCLEVBQUtOLEVBQU9tM0IsRUFBTzFMLEVBQU1DLEdBQzlELE9BQU9wcUIsTUFHWDgyQixFQUFjejNCLFVBQVUyaEIsT0FBUyxTQUFVaGlCLEVBQUtOLEVBQU8wdUIsR0FDbkQsT0FBTyxJQUFJa0gsR0FBU3QxQixFQUFLTixJQUc3Qm80QixFQUFjejNCLFVBQVVpaUIsT0FBUyxTQUFVdGlCLEVBQUtvdUIsR0FDNUMsT0FBT3B0QixNQUVYODJCLEVBQWN6M0IsVUFBVTJRLFFBQVUsV0FDOUIsT0FBTyxHQUVYOG1CLEVBQWN6M0IsVUFBVXkxQixpQkFBbUIsU0FBVUMsR0FDakQsT0FBTyxHQUVYK0IsRUFBY3ozQixVQUFVNDFCLGlCQUFtQixTQUFVRixHQUNqRCxPQUFPLEdBRVgrQixFQUFjejNCLFVBQVV1MUIsT0FBUyxXQUM3QixPQUFPLE1BRVhrQyxFQUFjejNCLFVBQVV3MUIsT0FBUyxXQUM3QixPQUFPLE1BRVhpQyxFQUFjejNCLFVBQVU0MkIsTUFBUSxXQUM1QixPQUFPLEdBR1hhLEVBQWN6M0IsVUFBVXEzQixjQUFnQixXQUNwQyxPQUFPLEdBRVhJLEVBQWN6M0IsVUFBVXUzQixNQUFRLFdBQzVCLE9BQU8sR0FFSkUsRUE1RXVCOzs7Ozs7Ozs7Ozs7Ozs7O0dBOEVsQ3hDLEdBQVMxRSxNQUFRLElBQUlrSDs7Ozs7Ozs7Ozs7Ozs7Ozs7QUF5QnJCLElBQUlDLEdBQTJCLFdBQzNCLFNBQVNBLEVBQVUzSixHQUNmcHRCLEtBQUtvdEIsV0FBYUEsRUFDbEJwdEIsS0FBSzBLLEtBQU8sSUFBSTBwQixHQUFVcDBCLEtBQUtvdEIsWUF3SW5DLE9BbElBMkosRUFBVUMsWUFBYyxTQUFVL2xCLEdBQzlCLElBQUk5RixFQUFPLElBQUk0ckIsRUFBVTlsQixFQUFJbWMsWUFJN0IsT0FIQW5jLEVBQUlPLFNBQVEsU0FBVXhTLEdBQ2xCbU0sRUFBT0EsRUFBSzhyQixJQUFJajRCLE1BRWJtTSxHQUVYNHJCLEVBQVUxM0IsVUFBVTJVLElBQU0sU0FBVWtqQixHQUNoQyxPQUErQixPQUF4QmwzQixLQUFLMEssS0FBS3BNLElBQUk0NEIsSUFFekJILEVBQVUxM0IsVUFBVTgzQixNQUFRLFdBQ3hCLE9BQU9uM0IsS0FBSzBLLEtBQUtrcUIsVUFFckJtQyxFQUFVMTNCLFVBQVUrM0IsS0FBTyxXQUN2QixPQUFPcDNCLEtBQUswSyxLQUFLbXFCLFVBRXJCMTJCLE9BQU9DLGVBQWUyNEIsRUFBVTEzQixVQUFXLE9BQVEsQ0FDL0NmLElBQUssV0FDRCxPQUFPMEIsS0FBSzBLLEtBQUtpakIsTUFFckJ0dkIsWUFBWSxFQUNaa1osY0FBYyxJQUVsQndmLEVBQVUxM0IsVUFBVW9CLFFBQVUsU0FBVXkyQixHQUNwQyxPQUFPbDNCLEtBQUswSyxLQUFLakssUUFBUXkyQixJQUc3QkgsRUFBVTEzQixVQUFVbVMsUUFBVSxTQUFVNmxCLEdBQ3BDcjNCLEtBQUswSyxLQUFLb3FCLGtCQUFpQixTQUFVM3dCLEVBQUdkLEdBRXBDLE9BREFnMEIsRUFBR2x6QixJQUNJLE1BSWY0eUIsRUFBVTEzQixVQUFVaTRCLGVBQWlCLFNBQVVDLEVBQU9GLEdBRWxELElBREEsSUFBSUcsRUFBT3gzQixLQUFLMEssS0FBSzBxQixnQkFBZ0JtQyxFQUFNLElBQ3BDQyxFQUFLN0IsV0FBVyxDQUNuQixJQUFJdUIsRUFBT00sRUFBSzlCLFVBQ2hCLEdBQUkxMUIsS0FBS290QixXQUFXOEosRUFBS2w0QixJQUFLdTRCLEVBQU0sS0FBTyxFQUN2QyxPQUVKRixFQUFHSCxFQUFLbDRCLE9BTWhCKzNCLEVBQVUxM0IsVUFBVW80QixhQUFlLFNBQVVKLEVBQUloSCxHQUM3QyxJQUFJbUgsRUFPSixJQUxJQSxPQURVanVCLElBQVY4bUIsRUFDT3J3QixLQUFLMEssS0FBSzBxQixnQkFBZ0IvRSxHQUcxQnJ3QixLQUFLMEssS0FBS3dxQixjQUVkc0MsRUFBSzdCLFdBQVcsQ0FHbkIsSUFEYTBCLEVBREZHLEVBQUs5QixVQUNLMTJCLEtBRWpCLFNBS1orM0IsRUFBVTEzQixVQUFVcTRCLGtCQUFvQixTQUFVUixHQUM5QyxJQUFJTSxFQUFPeDNCLEtBQUswSyxLQUFLMHFCLGdCQUFnQjhCLEdBQ3JDLE9BQU9NLEVBQUs3QixVQUFZNkIsRUFBSzlCLFVBQVUxMkIsSUFBTSxNQUVqRCszQixFQUFVMTNCLFVBQVU2MUIsWUFBYyxXQUM5QixPQUFPLElBQUl5QyxHQUFrQjMzQixLQUFLMEssS0FBS3dxQixnQkFFM0M2QixFQUFVMTNCLFVBQVUrMUIsZ0JBQWtCLFNBQVVwMkIsR0FDNUMsT0FBTyxJQUFJMjRCLEdBQWtCMzNCLEtBQUswSyxLQUFLMHFCLGdCQUFnQnAyQixLQUczRCszQixFQUFVMTNCLFVBQVU0M0IsSUFBTSxTQUFVQyxHQUNoQyxPQUFPbDNCLEtBQUt1MEIsS0FBS3YwQixLQUFLMEssS0FBSzRXLE9BQU80VixHQUFNbFcsT0FBT2tXLEdBQU0sS0FHekRILEVBQVUxM0IsVUFBVTZWLE9BQVMsU0FBVWdpQixHQUNuQyxPQUFLbDNCLEtBQUtnVSxJQUFJa2pCLEdBR1BsM0IsS0FBS3UwQixLQUFLdjBCLEtBQUswSyxLQUFLNFcsT0FBTzRWLElBRnZCbDNCLE1BSWYrMkIsRUFBVTEzQixVQUFVMlEsUUFBVSxXQUMxQixPQUFPaFEsS0FBSzBLLEtBQUtzRixXQUVyQittQixFQUFVMTNCLFVBQVV1NEIsVUFBWSxTQUFVck0sR0FDdEMsSUFBSWpwQixFQUFTdEMsS0FJYixPQUhBdXJCLEVBQU0vWixTQUFRLFNBQVUwbEIsR0FDcEI1MEIsRUFBU0EsRUFBTzIwQixJQUFJQyxNQUVqQjUwQixHQUVYeTBCLEVBQVUxM0IsVUFBVWlyQixRQUFVLFNBQVVpQixHQUNwQyxLQUFNQSxhQUFpQndMLEdBQ25CLE9BQU8sRUFFWCxHQUFJLzJCLEtBQUsydEIsT0FBU3BDLEVBQU1vQyxLQUNwQixPQUFPLEVBSVgsSUFGQSxJQUFJa0ssRUFBUzczQixLQUFLMEssS0FBS3dxQixjQUNuQjRDLEVBQVV2TSxFQUFNN2dCLEtBQUt3cUIsY0FDbEIyQyxFQUFPbEMsV0FBVyxDQUNyQixJQUFJb0MsRUFBV0YsRUFBT25DLFVBQVUxMkIsSUFDNUJnNUIsRUFBWUYsRUFBUXBDLFVBQVUxMkIsSUFDbEMsR0FBNkMsSUFBekNnQixLQUFLb3RCLFdBQVcySyxFQUFVQyxHQUMxQixPQUFPLEVBR2YsT0FBTyxHQUVYakIsRUFBVTEzQixVQUFVNGIsUUFBVSxXQUMxQixJQUFJOUosRUFBTSxHQUlWLE9BSEFuUixLQUFLd1IsU0FBUSxTQUFVeW1CLEdBQ25COW1CLEVBQUkxTixLQUFLdzBCLE1BRU45bUIsR0FFWDRsQixFQUFVMTNCLFVBQVVtTSxTQUFXLFdBQzNCLElBQUlsSixFQUFTLEdBRWIsT0FEQXRDLEtBQUt3UixTQUFRLFNBQVUwbEIsR0FBUSxPQUFPNTBCLEVBQU9tQixLQUFLeXpCLE1BQzNDLGFBQWU1MEIsRUFBT2tKLFdBQWEsS0FFOUN1ckIsRUFBVTEzQixVQUFVazFCLEtBQU8sU0FBVTdwQixHQUNqQyxJQUFJcEksRUFBUyxJQUFJeTBCLEVBQVUvMkIsS0FBS290QixZQUVoQyxPQURBOXFCLEVBQU9vSSxLQUFPQSxFQUNQcEksR0FFSnkwQixFQTNJbUIsR0E2STFCWSxHQUFtQyxXQUNuQyxTQUFTQSxFQUFrQkgsR0FDdkJ4M0IsS0FBS3czQixLQUFPQSxFQVFoQixPQU5BRyxFQUFrQnQ0QixVQUFVcTJCLFFBQVUsV0FDbEMsT0FBTzExQixLQUFLdzNCLEtBQUs5QixVQUFVMTJCLEtBRS9CMjRCLEVBQWtCdDRCLFVBQVVzMkIsUUFBVSxXQUNsQyxPQUFPMzFCLEtBQUt3M0IsS0FBSzdCLFdBRWRnQyxFQVYyQixHQTZCbENPLEdBQTJCLElBQUk5RCxHQUFVaEYsR0FBWWhDLFlBQ3pELFNBQVMrSyxLQUNMLE9BQU9ELEdBRVgsU0FBU0UsS0FDTCxPQUFPRCxLQUVYLElBQUlFLEdBQXFCLElBQUlqRSxHQUFVaEYsR0FBWWhDLFlBQ25ELFNBQVNrTCxLQUNMLE9BQU9ELEdBRVgsSUFBSUUsR0FBNkIsSUFBSW5FLEdBQVVoRixHQUFZaEMsWUFDM0QsU0FBU29MLEtBQ0wsT0FBT0QsR0FFWCxJQUFJRSxHQUF5QixJQUFJMUIsR0FBVTNILEdBQVloQyxZQUN2RCxTQUFTc0wsS0FFTCxJQURBLElBQUl2dEIsRUFBTyxHQUNGUixFQUFLLEVBQUdBLEVBQUt2SyxVQUFVQyxPQUFRc0ssSUFDcENRLEVBQUtSLEdBQU12SyxVQUFVdUssR0FHekIsSUFEQSxJQUFJdUosRUFBTXVrQixHQUNEeHRCLEVBQUssRUFBRzB0QixFQUFTeHRCLEVBQU1GLEVBQUswdEIsRUFBT3Q0QixPQUFRNEssSUFBTSxDQUN0RCxJQUFJak0sRUFBTTI1QixFQUFPMXRCLEdBQ2pCaUosRUFBTUEsRUFBSStpQixJQUFJajRCLEdBRWxCLE9BQU9rVixFQUVYLElBQUkwa0IsR0FBc0IsSUFBSTdCLEdBQVU3TSxHQUN4QyxTQUFTMk8sS0FDTCxPQUFPRDs7Ozs7Ozs7Ozs7Ozs7OztHQW1CWCxJQUlJRSxHQUErQixXQVkvQixTQUFTQSxFQUFjQyxFQUFTQyxFQUFnQkMsRUFBZUMsR0FDM0RsNUIsS0FBSys0QixRQUFVQSxFQUNmLzRCLEtBQUtnNUIsZUFBaUJBLEVBQ3RCaDVCLEtBQUtpNUIsY0FBZ0JBLEVBQ3JCajVCLEtBQUtrNUIsVUFBWUEsRUFDakJyekIsRUFBT3F6QixFQUFVNzRCLE9BQVMsRUFBRyx5Q0FpRmpDLE9BdEVBeTRCLEVBQWN6NUIsVUFBVTg1QixzQkFBd0IsU0FBVUMsRUFBUUMsRUFBVUMsR0FDcEVELEdBQ0F4ekIsRUFBT3d6QixFQUFTcjZCLElBQUlzckIsUUFBUThPLEdBQVMsOEJBQWdDQSxFQUFTLHVDQUF5Q0MsRUFBU3I2QixLQUVwSSxJQUFJdTZCLEVBQWtCRCxFQUFZQyxnQkFDbEMxekIsRUFBTzB6QixFQUFnQmw1QixTQUFXTCxLQUFLazVCLFVBQVU3NEIsT0FBUSw2Q0FBK0NMLEtBQUtrNUIsVUFBVTc0QixPQUFTLHlDQUEyQ2s1QixFQUFnQmw1QixPQUFTLE1BQ3BNLElBQUssSUFBSTVDLEVBQUksRUFBR0EsRUFBSXVDLEtBQUtrNUIsVUFBVTc0QixPQUFRNUMsSUFBSyxDQUM1QyxJQUFJKzdCLEVBQVd4NUIsS0FBS2s1QixVQUFVejdCLEdBQzlCLEdBQUkrN0IsRUFBU3g2QixJQUFJc3JCLFFBQVE4TyxHQUFTLENBQzlCLElBQUlLLEVBQWlCRixFQUFnQjk3QixHQUNyQzQ3QixFQUFXRyxFQUFTTCxzQkFBc0JFLEVBQVVJLElBRzVELE9BQU9KLEdBU1hQLEVBQWN6NUIsVUFBVXE2QixpQkFBbUIsU0FBVU4sRUFBUUMsR0FDckRBLEdBQ0F4ekIsRUFBT3d6QixFQUFTcjZCLElBQUlzckIsUUFBUThPLEdBQVMsNkJBQStCQSxFQUFTLHVDQUF5Q0MsRUFBU3I2QixLQUluSSxJQUFLLElBQUkyTCxFQUFLLEVBQUdNLEVBQUtqTCxLQUFLaTVCLGNBQWV0dUIsRUFBS00sRUFBRzVLLE9BQVFzSyxJQUFNLEVBQ3hENnVCLEVBQVd2dUIsRUFBR04sSUFDTDNMLElBQUlzckIsUUFBUThPLEtBQ3JCQyxFQUFXRyxFQUFTRSxpQkFBaUJMLEVBQVVBLEVBQVVyNUIsS0FBS2c1QixpQkFLdEUsSUFGQSxJQUFJVyxFQUFVTixFQUVMbnVCLEVBQUssRUFBR3lKLEVBQUszVSxLQUFLazVCLFVBQVdodUIsRUFBS3lKLEVBQUd0VSxPQUFRNkssSUFBTSxDQUN4RCxJQUFJc3VCLEtBQVc3a0IsRUFBR3pKLElBQ0xsTSxJQUFJc3JCLFFBQVE4TyxLQUNyQkMsRUFBV0csRUFBU0UsaUJBQWlCTCxFQUFVTSxFQUFTMzVCLEtBQUtnNUIsaUJBR3JFLE9BQU9LLEdBTVhQLEVBQWN6NUIsVUFBVXU2Qix3QkFBMEIsU0FBVUMsR0FDeEQsSUFBSW53QixFQUFRMUosS0FJUjg1QixFQUFtQkQsRUFPdkIsT0FOQTc1QixLQUFLazVCLFVBQVUxbkIsU0FBUSxTQUFVM1QsR0FDN0IsSUFBSWs4QixFQUFrQnJ3QixFQUFNZ3dCLGlCQUFpQjc3QixFQUFFbUIsSUFBSzY2QixFQUFVdjdCLElBQUlULEVBQUVtQixNQUNoRSs2QixJQUNBRCxFQUFtQkEsRUFBaUI5WSxPQUFPbmpCLEVBQUVtQixJQUFLKzZCLE9BR25ERCxHQUVYaEIsRUFBY3o1QixVQUFVOEwsS0FBTyxXQUMzQixPQUFPbkwsS0FBS2s1QixVQUFVYyxRQUFPLFNBQVU3dUIsRUFBTXROLEdBQUssT0FBT3NOLEVBQUs4ckIsSUFBSXA1QixFQUFFbUIsT0FBUzA1QixPQUVqRkksRUFBY3o1QixVQUFVaXJCLFFBQVUsU0FBVWlCLEdBQ3hDLE9BQVF2ckIsS0FBSys0QixVQUFZeE4sRUFBTXdOLFNBQzNCMU8sRUFBWXJxQixLQUFLazVCLFVBQVczTixFQUFNMk4sWUFDbEM3TyxFQUFZcnFCLEtBQUtpNUIsY0FBZTFOLEVBQU0wTixnQkFFdkNILEVBbEd1QixHQXFHOUJtQixHQUFxQyxXQUNyQyxTQUFTQSxFQUFvQkMsRUFBT0MsRUFBZVosRUFBaUJhLEVBS3BFQyxHQUNJcjZCLEtBQUtrNkIsTUFBUUEsRUFDYmw2QixLQUFLbTZCLGNBQWdCQSxFQUNyQm42QixLQUFLdTVCLGdCQUFrQkEsRUFDdkJ2NUIsS0FBS282QixZQUFjQSxFQUNuQnA2QixLQUFLcTZCLFlBQWNBLEVBbUJ2QixPQVpBSixFQUFvQjdrQixLQUFPLFNBQVU4a0IsRUFBT0MsRUFBZTlRLEVBQVMrUSxHQUNoRXYwQixFQUFPcTBCLEVBQU1oQixVQUFVNzRCLFNBQVdncEIsRUFBUWhwQixPQUFRLGtCQUM5QzY1QixFQUFNaEIsVUFBVTc0QixPQUNoQixnQ0FDQWdwQixFQUFRaHBCLFFBR1osSUFGQSxJQUFJaTZCLEVBQWE5QixLQUNiVSxFQUFZZ0IsRUFBTWhCLFVBQ2J6N0IsRUFBSSxFQUFHQSxFQUFJeTdCLEVBQVU3NEIsT0FBUTVDLElBQ2xDNjhCLEVBQWFBLEVBQVd0WixPQUFPa1ksRUFBVXo3QixHQUFHdUIsSUFBS3FxQixFQUFRNXJCLEdBQUc2WSxTQUVoRSxPQUFPLElBQUkyakIsRUFBb0JDLEVBQU9DLEVBQWU5USxFQUFTK1EsRUFBYUUsSUFFeEVMLEVBOUI2QixHQThEcENNLEdBQW9DLFdBQ3BDLFNBQVNBLEVBQW1CMXdCLEdBQ3hCLElBQUlILEVBQVExSixLQUdaQSxLQUFLdzZCLGFBQWUsS0FDcEJ4NkIsS0FBS3k2QixjQUFnQixLQUVyQno2QixLQUFLc0MsWUFBU2lILEVBQ2R2SixLQUFLOEQsV0FBUXlGLEVBQ2J2SixLQUFLMDZCLFFBQVMsRUFHZDE2QixLQUFLMjZCLGtCQUFtQixFQUN4Qjl3QixHQUFTLFNBQVVuTCxHQUNmZ0wsRUFBTWd4QixRQUFTLEVBQ2ZoeEIsRUFBTXBILE9BQVM1RCxFQUNYZ0wsRUFBTTh3QixjQUdOOXdCLEVBQU04d0IsYUFBYTk3QixNQUV4QixTQUFVb0YsR0FDVDRGLEVBQU1neEIsUUFBUyxFQUNmaHhCLEVBQU01RixNQUFRQSxFQUNWNEYsRUFBTSt3QixlQUNOL3dCLEVBQU0rd0IsY0FBYzMyQixNQXNJaEMsT0FsSUF5MkIsRUFBbUJsN0IsVUFBVXlLLE1BQVEsU0FBVThFLEdBQzNDLE9BQU81TyxLQUFLb0MsVUFBS21ILEVBQVdxRixJQUVoQzJyQixFQUFtQmw3QixVQUFVK0MsS0FBTyxTQUFVdzRCLEVBQVFDLEdBQ2xELElBQUlueEIsRUFBUTFKLEtBS1osT0FKSUEsS0FBSzI2QixrQkFDTDlWLEVBQUsseURBRVQ3a0IsS0FBSzI2QixrQkFBbUIsRUFDcEIzNkIsS0FBSzA2QixPQUNBMTZCLEtBQUs4RCxNQUlDOUQsS0FBSzg2QixZQUFZRCxFQUFTNzZCLEtBQUs4RCxPQUgvQjlELEtBQUsrNkIsWUFBWUgsRUFBUTU2QixLQUFLc0MsUUFPbEMsSUFBSWk0QixHQUFtQixTQUFVdjRCLEVBQVNDLEdBQzdDeUgsRUFBTTh3QixhQUFlLFNBQVU5N0IsR0FDM0JnTCxFQUFNcXhCLFlBQVlILEVBQVFsOEIsR0FBTzBELEtBQUtKLEVBQVNDLElBRW5EeUgsRUFBTSt3QixjQUFnQixTQUFVMzJCLEdBQzVCNEYsRUFBTW94QixZQUFZRCxFQUFTLzJCLEdBQU8xQixLQUFLSixFQUFTQyxRQUtoRXM0QixFQUFtQmw3QixVQUFVMjdCLFVBQVksV0FDckMsSUFBSXR4QixFQUFRMUosS0FDWixPQUFPLElBQUkrQixTQUFRLFNBQVVDLEVBQVNDLEdBQ2xDeUgsRUFBTXRILEtBQUtKLEVBQVNDLE9BRzVCczRCLEVBQW1CbDdCLFVBQVU0N0IsaUJBQW1CLFNBQVVyc0IsR0FDdEQsSUFDSSxJQUFJdE0sRUFBU3NNLElBQ2IsT0FBSXRNLGFBQWtCaTRCLEVBQ1hqNEIsRUFHQWk0QixFQUFtQnY0QixRQUFRTSxHQUcxQyxNQUFPOUIsR0FDSCxPQUFPKzVCLEVBQW1CdDRCLE9BQU96QixLQUd6Qys1QixFQUFtQmw3QixVQUFVMDdCLFlBQWMsU0FBVUgsRUFBUWw4QixHQUN6RCxPQUFJazhCLEVBQ081NkIsS0FBS2k3QixrQkFBaUIsV0FBYyxPQUFPTCxFQUFPbDhCLE1BSWxENjdCLEVBQW1CdjRCLFFBQVF0RCxJQUcxQzY3QixFQUFtQmw3QixVQUFVeTdCLFlBQWMsU0FBVUQsRUFBUy8yQixHQUMxRCxPQUFJKzJCLEVBQ083NkIsS0FBS2k3QixrQkFBaUIsV0FBYyxPQUFPSixFQUFRLzJCLE1BR25EeTJCLEVBQW1CdDRCLE9BQU82QixJQUd6Q3kyQixFQUFtQnY0QixRQUFVLFNBQVVNLEdBQ25DLE9BQU8sSUFBSWk0QixHQUFtQixTQUFVdjRCLEVBQVNDLEdBQzdDRCxFQUFRTSxPQUdoQmk0QixFQUFtQnQ0QixPQUFTLFNBQVU2QixHQUNsQyxPQUFPLElBQUl5MkIsR0FBbUIsU0FBVXY0QixFQUFTQyxHQUM3Q0EsRUFBTzZCLE9BR2Z5MkIsRUFBbUJXLFFBQVUsU0FHN0I1bEIsR0FDSSxPQUFPLElBQUlpbEIsR0FBbUIsU0FBVXY0QixFQUFTQyxHQUM3QyxJQUFJazVCLEVBQWdCLEVBQ2hCQyxFQUFnQixFQUNoQjc0QixHQUFPLEVBQ1grUyxFQUFJOUQsU0FBUSxTQUFVdVgsS0FDaEJvUyxFQUNGcFMsRUFBUTNtQixNQUFLLGFBQ1BnNUIsRUFDRTc0QixHQUFRNjRCLElBQWtCRCxHQUMxQm41QixPQUVMLFNBQVU4TSxHQUFPLE9BQU83TSxFQUFPNk0sU0FFdEN2TSxHQUFPLEVBQ0g2NEIsSUFBa0JELEdBQ2xCbjVCLFFBVVp1NEIsRUFBbUJjLEdBQUssU0FBVUMsR0FZOUIsSUFYQSxJQUFJLzdCLEVBQUlnN0IsRUFBbUJ2NEIsU0FBUSxHQUMvQnVQLEVBQVUsU0FBVWdxQixHQUNwQmg4QixFQUFJQSxFQUFFNkMsTUFBSyxTQUFVbzVCLEdBQ2pCLE9BQUlBLEVBQ09qQixFQUFtQnY0QixRQUFRdzVCLEdBRzNCRCxRQUlWNXdCLEVBQUssRUFBRzh3QixFQUFlSCxFQUFZM3dCLEVBQUs4d0IsRUFBYXA3QixPQUFRc0ssSUFBTSxDQUV4RTRHLEVBRGdCa3FCLEVBQWE5d0IsSUFHakMsT0FBT3BMLEdBRVhnN0IsRUFBbUIvb0IsUUFBVSxTQUFVa3FCLEVBQVkvNEIsR0FDL0MsSUFBSStHLEVBQVExSixLQUNSMjdCLEVBQVcsR0FJZixPQUhBRCxFQUFXbHFCLFNBQVEsU0FBVWpULEVBQUdpQixHQUM1Qm04QixFQUFTbDRCLEtBQUtkLEVBQUUvRSxLQUFLOEwsRUFBT25MLEVBQUdpQixPQUU1QlEsS0FBS2s3QixRQUFRUyxJQUVqQnBCLEVBaEs0QixHQW1MbkNxQixHQUFVLFdBYVZDLEdBQTBCLFdBQzFCLFNBQVNBLEVBQVM1ZSxHQUNkamQsS0FBS2lkLEdBQUtBLEVBTVMsT0FMRjRlLEVBQVNDLGNBQWNucEIsRUFBSzVJLFVBTXpDakcsRUFBTSxnTUErTmQsT0FqTkErM0IsRUFBU0UsYUFBZSxTQUFVLzlCLEVBQU1zWSxFQUFTMGxCLEdBRzdDLE9BRkFuMkIsRUFBT2cyQixFQUFTSSxjQUFlLG1EQUMvQnRrQixFQUFNaWtCLEdBQVMsb0JBQXFCNTlCLEdBQzdCLElBQUl1OEIsSUFBbUIsU0FBVXY0QixFQUFTQyxHQU03QyxJQUFJbVosRUFBVWxMLE9BQU91TyxVQUFVeWQsS0FBS2wrQixFQUFNc1ksR0FDMUM4RSxFQUFRQyxVQUFZLFNBQVVzRCxHQUMxQixJQUFJMUIsRUFBSzBCLEVBQU03ZCxPQUFPd0IsT0FDdEJOLEVBQVEsSUFBSTY1QixFQUFTNWUsS0FFekI3QixFQUFRK2dCLFVBQVksV0FDaEJsNkIsRUFBTyxJQUFJaWtCLEVBQWVqQixFQUFLVyxvQkFBcUIsc0lBR3hEeEssRUFBUUUsUUFBVSxTQUFVcUQsR0FDeEIsSUFBSTdhLEVBQVE2YSxFQUFNN2QsT0FBT2dELE1BQ04saUJBQWZBLEVBQU05RixLQUNOaUUsRUFBTyxJQUFJaWtCLEVBQWVqQixFQUFLVyxvQkFBcUIseVZBT3BEM2pCLEVBQU82QixJQUdmc1gsRUFBUXNELGdCQUFrQixTQUFVQyxHQUNoQ2hILEVBQU1pa0IsR0FBUyxhQUFlNTlCLEVBQU8sbUNBQW9DMmdCLEVBQU16QixZQUMvRSxJQUFJRCxFQUFLMEIsRUFBTTdkLE9BQU93QixPQUN0QjA1QixFQUNLSSxnQkFBZ0JuZixFQUFJN0IsRUFBUStCLFlBQWF3QixFQUFNekIsV0FBWW1mLElBQzNEajZCLE1BQUssV0FDTnVWLEVBQU1pa0IsR0FBUywrQkFBaUNTLEdBQWlCLG9CQUcxRXJCLGFBR1BhLEVBQVMzbUIsT0FBUyxTQUFVbFgsR0FFeEIsT0FEQTJaLEVBQU1pa0IsR0FBUyxxQkFBc0I1OUIsR0FDOUJzK0IsR0FBWXBzQixPQUFPdU8sVUFBVThkLGVBQWV2K0IsSUFBT2c5QixhQUc5RGEsRUFBU0ksWUFBYyxXQUNuQixHQUFzQixvQkFBWC9yQixRQUE4QyxNQUFwQkEsT0FBT3VPLFVBQ3hDLE9BQU8sRUFFWCxHQUFJb2QsRUFBU1csb0JBQ1QsT0FBTyxFQUtYLFFBQXlCanpCLElBQXJCMkcsT0FBT2xHLFVBQ1AsT0FBTyxFQVNYLElBQUl5eUIsRUFBSzlwQixFQUFLNUksUUFTVjJ5QixFQUFhYixFQUFTQyxjQUFjVyxHQUNwQ0UsRUFBbUIsRUFBSUQsR0FBY0EsRUFBYSxHQUVsREUsRUFBaUJmLEVBQVNnQixrQkFBa0JKLEdBQzVDSyxFQUF1QixFQUFJRixHQUFrQkEsRUFBaUIsSUFDbEUsUUFBSUgsRUFBR2g4QixRQUFRLFNBQVcsR0FDdEJnOEIsRUFBR2g4QixRQUFRLFlBQWMsR0FDekJnOEIsRUFBR2g4QixRQUFRLFNBQVcsR0FDdEJrOEIsR0FDQUcsSUFXUmpCLEVBQVNXLGtCQUFvQixXQUN6QixJQUFJdnhCLEVBQ0osWUFBMkIsSUFBWnFGLEdBQzJFLFNBQTlELFFBQXRCckYsRUFBS3FGLEVBQVF5c0IsV0FBd0IsSUFBUDl4QixPQUFnQixFQUFTQSxFQUFHK3hCLHVCQUdwRW5CLEVBQVNvQixTQUFXLFNBQVVDLEVBQUt6Z0IsR0FDL0IsT0FBT3lnQixFQUFJemdCLE1BQU1BLElBSXJCb2YsRUFBU0MsY0FBZ0IsU0FBVVcsR0FDL0IsSUFBSVUsRUFBa0JWLEVBQUc3akIsTUFBTSxtQ0FDM0J0QyxFQUFVNm1CLEVBQ1JBLEVBQWdCLEdBQ2JqeEIsTUFBTSxLQUNOZCxNQUFNLEVBQUcsR0FDVHRELEtBQUssS0FDUixLQUNOLE9BQU84ZSxPQUFPdFEsSUFJbEJ1bEIsRUFBU2dCLGtCQUFvQixTQUFVSixHQUNuQyxJQUFJVyxFQUFzQlgsRUFBRzdqQixNQUFNLHFCQUMvQnRDLEVBQVU4bUIsRUFDUkEsRUFBb0IsR0FDakJseEIsTUFBTSxLQUNOZCxNQUFNLEVBQUcsR0FDVHRELEtBQUssS0FDUixLQUNOLE9BQU84ZSxPQUFPdFEsSUFFbEJ1bEIsRUFBU3g4QixVQUFVZytCLHlCQUEyQixTQUFVQyxHQUNwRHQ5QixLQUFLaWQsR0FBR3NnQixnQkFBa0IsU0FBVTVlLEdBQ2hDLE9BQU8yZSxFQUFzQjNlLEtBR3JDa2QsRUFBU3g4QixVQUFVbStCLGVBQWlCLFNBQVU1K0IsRUFBTTYrQixFQUFjQyxHQUM5RCxPQUFPbDRCLEVBQU05RCxVQUFVMUIsVUFBTSxPQUFRLEdBQVEsV0FDekMsSUFBSTI5QixFQUFVQyxFQUFZQyxFQUFldHNCLEVBQVN1c0IsRUFBUUMsRUFDMUQsT0FBT3Y0QixFQUFNL0MsWUFBWXpDLE1BQU0sU0FBVWlMLEdBQ3JDLE9BQVFBLEVBQUdsSSxPQUNQLEtBQUssRUFDRDQ2QixFQUFXLytCLEVBQUtvL0IsV0FBVyxZQUMzQkosRUFBYWgvQixFQUFLcS9CLFNBQVMsY0FDM0JKLEVBQWdCLEVBQ2hCdHNCLEVBQVUsV0FDTixJQUFJNEwsRUFBYStnQixFQUFxQkMsRUFBU0MsRUFDL0MsT0FBTzU0QixFQUFNL0MsWUFBWXpDLE1BQU0sU0FBVWlMLEdBQ3JDLE9BQVFBLEVBQUdsSSxPQUNQLEtBQUssSUFDQzg2QixFQUNGMWdCLEVBQWNraEIsR0FBb0JuQyxLQUFLNEIsRUFBTzdnQixHQUFJMGdCLEVBQVcsV0FBYSxZQUFhRixHQUN2Rnh5QixFQUFHbEksTUFBUSxFQUNmLEtBQUssRUFtQkQsT0FsQkFrSSxFQUFHaEksS0FBS1EsS0FBSyxDQUFDLEVBQUcsRUFBRyxDQUFFLEtBQ3RCeTZCLEVBQXNCUixFQUFjdmdCLEdBQy9CclQsT0FBTSxTQUFVaEcsR0FPakIsT0FMQXFaLEVBQVltaEIsTUFBTXg2QixHQUtYeTJCLEdBQW1CdDRCLE9BQU82QixNQUVoQ2szQixhQUdlbHhCLE9BQU0sZUFJbkIsQ0FBQyxFQUFhcVQsRUFBWW9oQixtQkFDckMsS0FBSyxFQUtELE9BREF0ekIsRUFBR2pJLE9BQ0ksQ0FBQyxFQUFjLENBQUV0RSxNQUFPdy9CLElBQ25DLEtBQUssRUFNRCxPQUxBQyxFQUFVbHpCLEVBQUdqSSxPQUNibzdCLEVBQVlSLEdBQ1Msa0JBQWpCTyxFQUFRbmdDLE1BQ1I2L0IsRUFyTmQsRUFzTlVsbUIsRUFBTWlrQixHQUFTLG1EQUFvRHVDLEVBQVFwNEIsUUFBU3E0QixHQUMvRUEsRUFHRSxDQUFDLEVBQWEsR0FGVixDQUFDLEVBQWMsQ0FBRTEvQixNQUFPcUQsUUFBUUUsT0FBT2s4QixLQUd0RCxLQUFLLEVBQUcsTUFBTyxDQUFDLFFBSTVCTCxFQUFTOTlCLEtBQ1RpTCxFQUFHbEksTUFBUSxFQUNmLEtBQUssRUFDRCxNQUFPLENBQUMsRUFBY3dPLEtBQzFCLEtBQUssRUFFRCxNQUF1QixpQkFEdkJ3c0IsRUFBVTl5QixFQUFHakksUUFFRixDQUFDLEVBQWMrNkIsRUFBUXIvQixPQUMzQixDQUFDLEVBQWEsR0FDekIsS0FBSyxFQUFHLE1BQU8sQ0FBQyxXQUtoQ205QixFQUFTeDhCLFVBQVUwTyxNQUFRLFdBQ3ZCL04sS0FBS2lkLEdBQUdsUCxTQUVMOHRCLEVBeE9rQixHQStPekIyQyxHQUFxQyxXQUNyQyxTQUFTQSxFQUFvQkMsR0FDekJ6K0IsS0FBS3krQixTQUFXQSxFQUNoQnorQixLQUFLMCtCLFlBQWEsRUFDbEIxK0IsS0FBSzIrQixRQUFVLEtBNENuQixPQTFDQXhnQyxPQUFPQyxlQUFlb2dDLEVBQW9Cbi9CLFVBQVcsU0FBVSxDQUMzRGYsSUFBSyxXQUNELE9BQU8wQixLQUFLMCtCLFlBRWhCcmdDLFlBQVksRUFDWmtaLGNBQWMsSUFFbEJwWixPQUFPQyxlQUFlb2dDLEVBQW9Cbi9CLFVBQVcsWUFBYSxDQUM5RGYsSUFBSyxXQUNELE9BQU8wQixLQUFLMitCLFNBRWhCdGdDLFlBQVksRUFDWmtaLGNBQWMsSUFFbEJwWixPQUFPQyxlQUFlb2dDLEVBQW9Cbi9CLFVBQVcsU0FBVSxDQUMzRDZVLElBQUssU0FBVXhWLEdBQ1hzQixLQUFLeStCLFNBQVcvL0IsR0FFcEJMLFlBQVksRUFDWmtaLGNBQWMsSUFLbEJpbkIsRUFBb0JuL0IsVUFBVWtELEtBQU8sV0FDakN2QyxLQUFLMCtCLFlBQWEsR0FNdEJGLEVBQW9Cbi9CLFVBQVV1L0IsS0FBTyxTQUFVNS9CLEdBQzNDZ0IsS0FBSzIrQixRQUFVMy9CLEdBT25Cdy9CLEVBQW9Cbi9CLFVBQVU2VixPQUFTLFdBQ25DLE9BQU9vbkIsR0FBWXQ4QixLQUFLeStCLFNBQVN2cEIsV0FFOUJzcEIsRUFoRDZCLEdBc0RwQ0gsR0FBcUMsV0FDckMsU0FBU0EsRUFBb0JsaEIsR0FDekIsSUFBSXpULEVBQVExSixLQUNaQSxLQUFLbWQsWUFBY0EsRUFDbkJuZCxLQUFLNitCLFNBQVUsRUFJZjcrQixLQUFLOCtCLG1CQUFxQixJQUFJcjFCLEdBQzlCekosS0FBS21kLFlBQVlMLFdBQWEsV0FDMUJwVCxFQUFNbzFCLG1CQUFtQjk4QixXQUU3QmhDLEtBQUttZCxZQUFZSixRQUFVLFdBQ25CSSxFQUFZclosTUFDWjRGLEVBQU1vMUIsbUJBQW1CNzhCLE9BQU9rYixFQUFZclosT0FHNUM0RixFQUFNbzFCLG1CQUFtQjk4QixXQUdqQ2hDLEtBQUttZCxZQUFZN0IsUUFBVSxTQUFVcUQsR0FDakMsSUFBSTdhLEVBQVFpN0IsR0FBMEJwZ0IsRUFBTTdkLE9BQU9nRCxPQUNuRDRGLEVBQU1vMUIsbUJBQW1CNzhCLE9BQU82QixJQXFDeEMsT0FsQ0F1NkIsRUFBb0JuQyxLQUFPLFNBQVVqZixFQUFJcmUsRUFBTW9nQyxHQUMzQyxPQUFPLElBQUlYLEVBQW9CcGhCLEVBQUdFLFlBQVk2aEIsRUFBa0JwZ0MsS0FFcEVULE9BQU9DLGVBQWVpZ0MsRUFBb0JoL0IsVUFBVyxvQkFBcUIsQ0FDdEVmLElBQUssV0FDRCxPQUFPMEIsS0FBSzgrQixtQkFBbUJuMUIsU0FFbkN0TCxZQUFZLEVBQ1prWixjQUFjLElBRWxCOG1CLEVBQW9CaC9CLFVBQVVpL0IsTUFBUSxTQUFVeDZCLEdBQ3hDQSxHQUNBOUQsS0FBSzgrQixtQkFBbUI3OEIsT0FBTzZCLEdBRTlCOUQsS0FBSzYrQixVQUNObG5CLEVBQU1pa0IsR0FBUyx3QkFBeUI5M0IsRUFBUUEsRUFBTWlDLFFBQVUsMEJBQ2hFL0YsS0FBSzYrQixTQUFVLEVBQ2Y3K0IsS0FBS21kLFlBQVltaEIsVUFZekJELEVBQW9CaC9CLFVBQVVvZCxNQUFRLFNBQVV3aUIsR0FDNUMsSUFBSXhpQixFQUFRemMsS0FBS21kLFlBQVlRLFlBQVlzaEIsR0FFekMsT0FEQXA1QixJQUFTNFcsRUFBTyx5Q0FBMkN3aUIsR0FDcEQsSUFBSUMsR0FBY3ppQixJQUV0QjRoQixFQTNENkIsR0F1RXBDYSxHQUErQixXQUMvQixTQUFTQSxFQUFjemlCLEdBQ25CemMsS0FBS3ljLE1BQVFBLEVBcU1qQixPQW5NQXlpQixFQUFjNy9CLFVBQVU4L0IsSUFBTSxTQUFVQyxFQUFZMWdDLEdBQ2hELElBQUkwYyxFQVNKLFlBUmM3UixJQUFWN0ssR0FDQWlaLEVBQU1pa0IsR0FBUyxNQUFPNTdCLEtBQUt5YyxNQUFNemUsS0FBTW9oQyxFQUFZMWdDLEdBQ25EMGMsRUFBVXBiLEtBQUt5YyxNQUFNMGlCLElBQUl6Z0MsRUFBTzBnQyxLQUdoQ3puQixFQUFNaWtCLEdBQVMsTUFBTzU3QixLQUFLeWMsTUFBTXplLEtBQU0sYUFBY29oQyxHQUNyRGhrQixFQUFVcGIsS0FBS3ljLE1BQU0waUIsSUFBSUMsSUFFdEI5QyxHQUFZbGhCLElBU3ZCOGpCLEVBQWM3L0IsVUFBVTQzQixJQUFNLFNBQVV2NEIsR0FHcEMsT0FGQWlaLEVBQU1pa0IsR0FBUyxNQUFPNTdCLEtBQUt5YyxNQUFNemUsS0FBTVUsRUFBT0EsR0FFdkM0OUIsR0FET3Q4QixLQUFLeWMsTUFBTXdhLElBQUl2NEIsS0FVakN3Z0MsRUFBYzcvQixVQUFVZixJQUFNLFNBQVVVLEdBQ3BDLElBQUkwSyxFQUFRMUosS0FJWixPQUFPczhCLEdBSE90OEIsS0FBS3ljLE1BQU1uZSxJQUFJVSxJQUdEb0QsTUFBSyxTQUFVRSxHQU12QyxZQUplaUgsSUFBWGpILElBQ0FBLEVBQVMsTUFFYnFWLEVBQU1pa0IsR0FBUyxNQUFPbHlCLEVBQU0rUyxNQUFNemUsS0FBTWdCLEVBQUtzRCxHQUN0Q0EsTUFHZjQ4QixFQUFjNy9CLFVBQVU2VixPQUFTLFNBQVVsVyxHQUd2QyxPQUZBMlksRUFBTWlrQixHQUFTLFNBQVU1N0IsS0FBS3ljLE1BQU16ZSxLQUFNZ0IsR0FFbkNzOUIsR0FET3Q4QixLQUFLeWMsTUFBTXZILE9BQU9sVyxLQVNwQ2tnQyxFQUFjNy9CLFVBQVU4ZSxNQUFRLFdBRzVCLE9BRkF4RyxFQUFNaWtCLEdBQVMsUUFBUzU3QixLQUFLeWMsTUFBTXplLE1BRTVCcytCLEdBRE90OEIsS0FBS3ljLE1BQU0wQixVQUc3QitnQixFQUFjNy9CLFVBQVVnZ0MsUUFBVSxTQUFVQyxFQUFjL0gsR0FDdEQsSUFBSWxiLEVBQVNyYyxLQUFLcWMsT0FBT3JjLEtBQUtzVSxRQUFRZ3JCLEVBQWMvSCxJQUNoRGxPLEVBQVUsR0FDZCxPQUFPcnBCLEtBQUtxZSxjQUFjaEMsR0FBUSxTQUFVcmQsRUFBS04sR0FDN0MycUIsRUFBUTVsQixLQUFLL0UsTUFDZDBELE1BQUssV0FDSixPQUFPaW5CLE1BR2Y2VixFQUFjNy9CLFVBQVVrZ0MsVUFBWSxTQUFVRCxFQUFjL0gsR0FDeEQ1ZixFQUFNaWtCLEdBQVMsYUFBYzU3QixLQUFLeWMsTUFBTXplLE1BQ3hDLElBQUlzVyxFQUFVdFUsS0FBS3NVLFFBQVFnckIsRUFBYy9ILEdBQ3pDampCLEVBQVFrckIsVUFBVyxFQUNuQixJQUFJbmpCLEVBQVNyYyxLQUFLcWMsT0FBTy9ILEdBQ3pCLE9BQU90VSxLQUFLcWUsY0FBY2hDLEdBQVEsU0FBVXJkLEVBQUtOLEVBQU8rZ0MsR0FPcEQsT0FBT0EsRUFBUXZxQixhQUd2QmdxQixFQUFjNy9CLFVBQVVxZ0MsUUFBVSxTQUFVQyxFQUFtQjkxQixHQUMzRCxJQUFJeUssRUFDQ3pLLEVBS0R5SyxFQUFVcXJCLEdBSlZyckIsRUFBVSxHQUNWekssRUFBVzgxQixHQUtmLElBQUl0akIsRUFBU3JjLEtBQUtxYyxPQUFPL0gsR0FDekIsT0FBT3RVLEtBQUtxZSxjQUFjaEMsRUFBUXhTLElBVXRDcTFCLEVBQWM3L0IsVUFBVXVnQyxjQUFnQixTQUFVLzFCLEdBQzlDLElBQUlnMkIsRUFBZ0I3L0IsS0FBS3FjLE9BQU8sSUFDaEMsT0FBTyxJQUFJa2UsSUFBbUIsU0FBVXY0QixFQUFTQyxHQUM3QzQ5QixFQUFjdmtCLFFBQVUsU0FBVXFELEdBQzlCLElBQUk3YSxFQUFRaTdCLEdBQTBCcGdCLEVBQU03ZCxPQUFPZ0QsT0FDbkQ3QixFQUFPNkIsSUFFWCs3QixFQUFjeGtCLFVBQVksU0FBVXNELEdBQ2hDLElBQUl0QyxFQUFTc0MsRUFBTTdkLE9BQU93QixPQUNyQitaLEVBSUx4UyxFQUFTd1MsRUFBT3lqQixXQUFZempCLEVBQU8zZCxPQUFPMEQsTUFBSyxTQUFVMjlCLEdBQ2pEQSxFQUNBMWpCLEVBQU9pQyxXQUdQdGMsT0FSSkEsU0FjaEJrOUIsRUFBYzcvQixVQUFVZ2YsY0FBZ0IsU0FBVXdoQixFQUFlanhCLEdBQzdELElBQUl5YSxFQUFVLEdBQ2QsT0FBTyxJQUFJa1IsSUFBbUIsU0FBVXY0QixFQUFTQyxHQUM3QzQ5QixFQUFjdmtCLFFBQVUsU0FBVXFELEdBQzlCMWMsRUFBTzBjLEVBQU03ZCxPQUFPZ0QsUUFFeEIrN0IsRUFBY3hrQixVQUFZLFNBQVVzRCxHQUNoQyxJQUFJdEMsRUFBU3NDLEVBQU03ZCxPQUFPd0IsT0FDMUIsR0FBSytaLEVBQUwsQ0FJQSxJQUFJMmpCLEVBQWEsSUFBSXhCLEdBQW9CbmlCLEdBQ3JDNGpCLEVBQWFyeEIsRUFBR3lOLEVBQU95akIsV0FBWXpqQixFQUFPM2QsTUFBT3NoQyxHQUNyRCxHQUFJQyxhQUFzQjFGLEdBQW9CLENBQzFDLElBQUkyRixFQUFjRCxFQUFXbjJCLE9BQU0sU0FBVWdGLEdBRXpDLE9BREFreEIsRUFBV3o5QixPQUNKZzRCLEdBQW1CdDRCLE9BQU82TSxNQUVyQ3VhLEVBQVE1bEIsS0FBS3k4QixHQUViRixFQUFXdEYsT0FDWDE0QixJQUU4QixPQUF6QmcrQixFQUFXRyxVQUNoQjlqQixFQUFPaUMsV0FHUGpDLEVBQU9pQyxTQUFTMGhCLEVBQVdHLGdCQW5CM0JuK0IsUUFzQlRJLE1BQUssV0FDSixPQUFPbTRCLEdBQW1CVyxRQUFRN1IsT0FHMUM2VixFQUFjNy9CLFVBQVVpVixRQUFVLFNBQVVnckIsRUFBYy9ILEdBQ3RELElBQUk2SSxPQUFZNzJCLEVBVWhCLFlBVHFCQSxJQUFqQisxQixJQUM0QixpQkFBakJBLEVBQ1BjLEVBQVlkLEdBR1p6NUIsT0FBaUIwRCxJQUFWZ3VCLEVBQXFCLHVEQUM1QkEsRUFBUStILElBR1QsQ0FBRW5qQixNQUFPaWtCLEVBQVc3SSxNQUFPQSxJQUV0QzJILEVBQWM3L0IsVUFBVWdkLE9BQVMsU0FBVS9ILEdBQ3ZDLElBQUkrckIsRUFBWSxPQUloQixHQUhJL3JCLEVBQVFnc0IsVUFDUkQsRUFBWSxRQUVaL3JCLEVBQVE2SCxNQUFPLENBQ2YsSUFBSUEsRUFBUW5jLEtBQUt5YyxNQUFNTixNQUFNN0gsRUFBUTZILE9BQ3JDLE9BQUk3SCxFQUFRa3JCLFNBQ0RyakIsRUFBTW9rQixjQUFjanNCLEVBQVFpakIsTUFBTzhJLEdBR25DbGtCLEVBQU1xa0IsV0FBV2xzQixFQUFRaWpCLE1BQU84SSxHQUkzQyxPQUFPcmdDLEtBQUt5YyxNQUFNK2pCLFdBQVdsc0IsRUFBUWlqQixNQUFPOEksSUFHN0NuQixFQXZNdUIsR0E2TWxDLFNBQVM1QyxHQUFZbGhCLEdBQ2pCLE9BQU8sSUFBSW1mLElBQW1CLFNBQVV2NEIsRUFBU0MsR0FDN0NtWixFQUFRQyxVQUFZLFNBQVVzRCxHQUMxQixJQUFJcmMsRUFBU3FjLEVBQU03ZCxPQUFPd0IsT0FDMUJOLEVBQVFNLElBRVo4WSxFQUFRRSxRQUFVLFNBQVVxRCxHQUN4QixJQUFJN2EsRUFBUWk3QixHQUEwQnBnQixFQUFNN2QsT0FBT2dELE9BQ25EN0IsRUFBTzZCLE9BS25CLElBQUkyOEIsSUFBbUIsRUFDdkIsU0FBUzFCLEdBQTBCajdCLEdBQy9CLElBQUk0NEIsRUFBYWIsR0FBU0MsY0FBY25wQixFQUFLNUksU0FDN0MsR0FBSTJ5QixHQUFjLE1BQVFBLEVBQWEsR0FBSSxDQUN2QyxJQUFJZ0UsRUFBWSxtRUFDaEIsR0FBSTU4QixFQUFNaUMsUUFBUXRGLFFBQVFpZ0MsSUFBYyxFQUFHLENBRXZDLElBQUlDLEVBQWEsSUFBSXphLEVBQWUsV0FBWSw2Q0FBK0N3YSxFQUFZLCtJQVczRyxPQVJLRCxLQUNEQSxJQUFtQixFQUduQmxRLFlBQVcsV0FDUCxNQUFNb1EsSUFDUCxJQUVBQSxHQUdmLE9BQU83OEI7Ozs7Ozs7Ozs7Ozs7Ozs7R0FvQlgsSUFBSTg4QixHQUF3QyxXQUN4QyxTQUFTQSxFQUtUQyxFQUFRQyxFQUFZQyxFQUFjQyxHQUM5QmhoQyxLQUFLNmdDLE9BQVNBLEVBQ2Q3Z0MsS0FBSzhnQyxXQUFhQSxFQUNsQjlnQyxLQUFLK2dDLGFBQWVBLEVBQ3BCL2dDLEtBQUtnaEMsa0JBQW9CQSxFQWF6QmhoQyxLQUFLaWhDLHNCQUF3QixHQTZVakMsT0F0VUFMLEVBQXVCTSxRQUFVLFNBQVVDLEVBQU1MLEVBQVlDLEVBQWNDLEdBT3ZFLE9BRkFuN0IsRUFBb0IsS0FBYnM3QixFQUFLQyxJQUFZLHVDQUVqQixJQUFJUixFQURFTyxFQUFLRSxrQkFBb0JGLEVBQUtDLElBQU0sR0FDUE4sRUFBWUMsRUFBY0MsSUFFeEVKLEVBQXVCdmhDLFVBQVVpaUMsV0FBYSxTQUFVbmtCLEdBQ3BELElBQUlva0IsR0FBUSxFQUNSaEssRUFBUWlLLFlBQVlDLE1BQU0sQ0FBQ3poQyxLQUFLNmdDLE9BQVFqYSxPQUFPOGEsbUJBQW9CLENBQUMxaEMsS0FBSzZnQyxPQUFRamEsT0FBTythLG9CQUM1RixPQUFPQyxHQUFlemtCLEdBQ2pCdWlCLFFBQVEsQ0FBRXZqQixNQUFPMGxCLEdBQWdCQyxtQkFBb0J2SyxNQUFPQSxJQUFTLFNBQVV2NEIsRUFBS04sRUFBTytnQyxHQUM1RjhCLEdBQVEsRUFDUjlCLEVBQVFsOUIsVUFFUEgsTUFBSyxXQUFjLE9BQU9tL0IsTUFFbkNYLEVBQXVCdmhDLFVBQVUwaUMsaUJBQW1CLFNBQVU1a0IsRUFBYStjLEVBQU9FLEdBQzlFLE9BQU9wNkIsS0FBS2dpQyx5QkFBeUI3a0IsR0FBYS9hLE1BQUssU0FBVVgsR0FFN0QsT0FEQUEsRUFBU3dnQyxnQkFBa0JDLEdBQW1COUgsR0FDdkMrSCxHQUFvQmhsQixHQUFhZ2lCLElBQUkxOUIsT0FHcERtL0IsRUFBdUJ2aEMsVUFBVStpQyxtQkFBcUIsU0FBVWpsQixHQUM1RCxPQUFPbmQsS0FBS2dpQyx5QkFBeUI3a0IsR0FBYS9hLE1BQUssU0FBVVgsR0FBWSxPQUFPQSxFQUFTd2dDLG9CQUVqR3JCLEVBQXVCdmhDLFVBQVVnakMsbUJBQXFCLFNBQVVsbEIsRUFBYWlkLEdBQ3pFLE9BQU9wNkIsS0FBS2dpQyx5QkFBeUI3a0IsR0FBYS9hLE1BQUssU0FBVVgsR0FFN0QsT0FEQUEsRUFBU3dnQyxnQkFBa0JDLEdBQW1COUgsR0FDdkMrSCxHQUFvQmhsQixHQUFhZ2lCLElBQUkxOUIsT0FHcERtL0IsRUFBdUJ2aEMsVUFBVWlqQyxpQkFBbUIsU0FBVW5sQixFQUFhNmIsRUFBZ0JDLEVBQWVDLEdBQ3RHLElBQUl4dkIsRUFBUTFKLEtBQ1J1aUMsRUFBZ0JDLEdBQXVCcmxCLEdBQ3ZDc2xCLEVBQWdCYixHQUFlemtCLEdBVW5DLE9BQU9zbEIsRUFBY3hMLElBQUksSUFBSTcwQixNQUFLLFNBQVUyMkIsR0FDeENsekIsRUFBMEIsaUJBQVprekIsRUFBc0Isc0NBT3BDLElBTkEsSUFBSW1CLEVBQVEsSUFBSXBCLEdBQWNDLEVBQVNDLEVBQWdCQyxFQUFlQyxHQUNsRXdKLEVBQVVoNUIsRUFBTW8zQixXQUFXNkIsa0JBQWtCajVCLEVBQU1tM0IsT0FBUTNHLEdBQzNEeUIsRUFBVyxHQUNYaUgsRUFBb0IsSUFBSTdMLElBQVUsU0FBVXI1QixFQUFHYSxHQUMvQyxPQUFPMnJCLEVBQW9CeHNCLEVBQUU2d0Isa0JBQW1CaHdCLEVBQUVnd0Isc0JBRTdDNWpCLEVBQUssRUFBR2s0QixFQUFjM0osRUFBV3Z1QixFQUFLazRCLEVBQVl4aUMsT0FBUXNLLElBQU0sQ0FDckUsSUFBSTZ1QixFQUFXcUosRUFBWWw0QixHQUN2Qm00QixFQUFXQyxHQUFtQi9qQyxJQUFJMEssRUFBTW0zQixPQUFRckgsRUFBU3g2QixJQUFJeXZCLEtBQU1zSyxHQUN2RTZKLEVBQW9CQSxFQUFrQjNMLElBQUl1QyxFQUFTeDZCLElBQUl5dkIsS0FBS2IsV0FDNUQrTixFQUFTbDRCLEtBQUtnL0IsRUFBY3RELElBQUl1RCxJQUNoQy9HLEVBQVNsNEIsS0FBSzgrQixFQUFjcEQsSUFBSTJELEVBQVVDLEdBQW1CQyxjQVFqRSxPQU5BSixFQUFrQnB4QixTQUFRLFNBQVV5eEIsR0FDaEN0SCxFQUFTbDRCLEtBQUtpRyxFQUFNcTNCLGFBQWFtQywyQkFBMkIvbEIsRUFBYThsQixPQUU3RTlsQixFQUFZZ21CLHdCQUF1QixXQUMvQno1QixFQUFNdTNCLHNCQUFzQmxJLEdBQVdtQixFQUFNL3VCLFVBRTFDb3ZCLEdBQW1CVyxRQUFRUyxHQUFVdjVCLE1BQUssV0FBYyxPQUFPODNCLFNBRzlFMEcsRUFBdUJ2aEMsVUFBVStqQyxvQkFBc0IsU0FBVWptQixFQUFhNGIsR0FDMUUsSUFBSXJ2QixFQUFRMUosS0FDWixPQUFPNGhDLEdBQWV6a0IsR0FDakI3ZSxJQUFJeTZCLEdBQ0ozMkIsTUFBSyxTQUFVc2dDLEdBQ2hCLE9BQUlBLEdBQ0E3OEIsRUFBTzY4QixFQUFRN0IsU0FBV24zQixFQUFNbTNCLE9BQVEsb0JBQXNCNkIsRUFBUTdCLE9BQVMsd0JBQTBCOUgsR0FDbEdydkIsRUFBTW8zQixXQUFXdUMsb0JBQW9CWCxJQUV6QyxTQUdmOUIsRUFBdUJ2aEMsVUFBVWlrQyxtQkFBcUIsU0FBVW5tQixFQUFhNGIsR0FDekUsSUFBSXJ2QixFQUFRMUosS0FDWixPQUFJQSxLQUFLaWhDLHNCQUFzQmxJLEdBQ3BCd0IsR0FBbUJ2NEIsUUFBUWhDLEtBQUtpaEMsc0JBQXNCbEksSUFHdEQvNEIsS0FBS29qQyxvQkFBb0JqbUIsRUFBYTRiLEdBQVMzMkIsTUFBSyxTQUFVODNCLEdBQ2pFLEdBQUlBLEVBQU8sQ0FDUCxJQUFJL3VCLEVBQU8rdUIsRUFBTS91QixPQUVqQixPQURBekIsRUFBTXUzQixzQkFBc0JsSSxHQUFXNXRCLEVBQ2hDQSxFQUdQLE9BQU8sU0FLdkJ5MUIsRUFBdUJ2aEMsVUFBVWtrQyxpQ0FBbUMsU0FBVXBtQixFQUFhNGIsR0FDdkYsSUFBSXJ2QixFQUFRMUosS0FDUndqQyxFQUFjekssRUFBVSxFQUN4QnhCLEVBQVFpSyxZQUFZaUMsV0FBVyxDQUFDempDLEtBQUs2Z0MsT0FBUTJDLElBQzdDRSxFQUFhLEtBQ2pCLE9BQU85QixHQUFlemtCLEdBQ2pCdWlCLFFBQVEsQ0FBRXZqQixNQUFPMGxCLEdBQWdCQyxtQkFBb0J2SyxNQUFPQSxJQUFTLFNBQVV2NEIsRUFBSzBqQyxFQUFTakQsR0FDMUZpRCxFQUFRN0IsU0FBV24zQixFQUFNbTNCLFNBQ3pCaDdCLEVBQU82OEIsRUFBUTNKLFNBQVd5SyxFQUFhLG9DQUFzQ0EsR0FDN0VFLEVBQWFoNkIsRUFBTW8zQixXQUFXdUMsb0JBQW9CWCxJQUV0RGpELEVBQVFsOUIsVUFFUEgsTUFBSyxXQUFjLE9BQU9zaEMsTUFFbkM5QyxFQUF1QnZoQyxVQUFVc2tDLGdDQUFrQyxTQUFVeG1CLEdBQ3pFLElBQUlvYSxFQUFRaUssWUFBWW9DLFdBQVcsQ0FDL0I1akMsS0FBSzZnQyxPQUNMamEsT0FBTythLG9CQUVQNUksR0E3bUNVLEVBOG1DZCxPQUFPNkksR0FBZXprQixHQUNqQnVpQixRQUFRLENBQUV2akIsTUFBTzBsQixHQUFnQkMsbUJBQW9CdkssTUFBT0EsRUFBTytJLFNBQVMsSUFBUSxTQUFVdGhDLEVBQUswakMsRUFBU2pELEdBQzdHMUcsRUFBVTJKLEVBQVEzSixRQUNsQjBHLEVBQVFsOUIsVUFFUEgsTUFBSyxXQUFjLE9BQU8yMkIsTUFFbkM2SCxFQUF1QnZoQyxVQUFVd2tDLHNCQUF3QixTQUFVMW1CLEdBQy9ELElBQUl6VCxFQUFRMUosS0FDUnUzQixFQUFRaUssWUFBWUMsTUFBTSxDQUFDemhDLEtBQUs2Z0MsUUF2bkN0QixHQXVuQ2dELENBQUM3Z0MsS0FBSzZnQyxPQUFRamEsT0FBTythLG9CQUNuRixPQUFPQyxHQUFlemtCLEdBQ2pCa2lCLFFBQVF3QyxHQUFnQkMsbUJBQW9CdkssR0FDNUNuMUIsTUFBSyxTQUFVMGhDLEdBQ2hCLE9BQU9BLEVBQVU3eUIsS0FBSSxTQUFVeXhCLEdBQVcsT0FBT2g1QixFQUFNbzNCLFdBQVd1QyxvQkFBb0JYLFVBRzlGOUIsRUFBdUJ2aEMsVUFBVTBrQywwQ0FBNEMsU0FBVTVtQixFQUFhNm1CLEdBQ2hHLElBQUl0NkIsRUFBUTFKLEtBR1Jpa0MsRUFBY2xCLEdBQW1CbUIsY0FBY2xrQyxLQUFLNmdDLE9BQVFtRCxFQUFZdlYsTUFDeEUwVixFQUFhM0MsWUFBWWlDLFdBQVdRLEdBQ3BDNWEsRUFBVSxHQUNkLE9BQU9tWixHQUF1QnJsQixHQUN6QnVpQixRQUFRLENBQUVuSSxNQUFPNE0sSUFBYyxTQUFVckIsRUFBVWhnQyxFQUFHMjhCLEdBQ3ZELElBQUkyRSxFQUFTdEIsRUFBUyxHQUFJdUIsRUFBY3ZCLEVBQVMsR0FBSS9KLEVBQVUrSixFQUFTLEdBUXBFclUsRUFBTzdpQixHQUFPeTRCLEdBQ2xCLEdBQUlELElBQVcxNkIsRUFBTW0zQixRQUFXbUQsRUFBWXZWLEtBQUtuRSxRQUFRbUUsR0FLekQsT0FBT21ULEdBQWV6a0IsR0FDakI3ZSxJQUFJeTZCLEdBQ0ozMkIsTUFBSyxTQUFVbzNCLEdBQ2hCLElBQUtBLEVBQ0QsTUFBTTNVLEVBQUssK0NBQ1BpZSxFQUNBLG9CQUNBL0osR0FFUmx6QixFQUFPMnpCLEVBQVNxSCxTQUFXbjNCLEVBQU1tM0IsT0FBUSxvQkFBc0JySCxFQUFTcUgsT0FBUyx3QkFBMEI5SCxHQUMzRzFQLEVBQVE1bEIsS0FBS2lHLEVBQU1vM0IsV0FBV3VDLG9CQUFvQjdKLE9BZGxEaUcsRUFBUWw5QixVQWlCWEgsTUFBSyxXQUFjLE9BQU9pbkIsTUFFbkN1WCxFQUF1QnZoQyxVQUFVaWxDLDJDQUE2QyxTQUFVbm5CLEVBQWFvbkIsR0FDakcsSUFBSTc2QixFQUFRMUosS0FDUndrQyxFQUFpQixJQUFJek4sR0FBVTdNLEdBQy9CeVIsRUFBVyxHQXNCZixPQXJCQTRJLEVBQWEveUIsU0FBUSxTQUFVd3lCLEdBQzNCLElBQUlHLEVBQWFwQixHQUFtQm1CLGNBQWN4NkIsRUFBTW0zQixPQUFRbUQsRUFBWXZWLE1BQ3hFOEksRUFBUWlLLFlBQVlpQyxXQUFXVSxHQUMvQng2QixFQUFVNjRCLEdBQXVCcmxCLEdBQWF1aUIsUUFBUSxDQUFFbkksTUFBT0EsSUFBUyxTQUFVdUwsRUFBVWhnQyxFQUFHMjhCLEdBQy9GLElBQUkyRSxFQUFTdEIsRUFBUyxHQUFJdUIsRUFBY3ZCLEVBQVMsR0FBSTJCLEVBQVUzQixFQUFTLEdBUXBFclUsRUFBTzdpQixHQUFPeTRCLEdBQ2RELElBQVcxNkIsRUFBTW0zQixRQUFXbUQsRUFBWXZWLEtBQUtuRSxRQUFRbUUsR0FJekQrVixFQUFpQkEsRUFBZXZOLElBQUl3TixHQUhoQ2hGLEVBQVFsOUIsVUFLaEJvNUIsRUFBU2w0QixLQUFLa0csTUFFWDR3QixHQUFtQlcsUUFBUVMsR0FBVXY1QixNQUFLLFdBQzdDLE9BQU9zSCxFQUFNZzdCLHNCQUFzQnZuQixFQUFhcW5CLE9BR3hENUQsRUFBdUJ2aEMsVUFBVXNsQyxvQ0FBc0MsU0FBVXhuQixFQUFhZSxHQUMxRixJQUFJeFUsRUFBUTFKLEtBQ1o2RixHQUFRcVksRUFBTTBtQixrQkFBbUIsZ0RBQ2pDLytCLEdBQVFxWSxFQUFNMm1CLHlCQUEwQixtRUFDeEMsSUFBSUMsRUFBWTVtQixFQUFNdVEsS0FDbEJzVyxFQUEwQkQsRUFBVXprQyxPQUFTLEVBWTdDNGpDLEVBQWNsQixHQUFtQm1CLGNBQWNsa0MsS0FBSzZnQyxPQUFRaUUsR0FDNURYLEVBQWEzQyxZQUFZaUMsV0FBV1EsR0FJcENPLEVBQWlCLElBQUl6TixHQUFVN00sR0FDbkMsT0FBT3NZLEdBQXVCcmxCLEdBQ3pCdWlCLFFBQVEsQ0FBRW5JLE1BQU80TSxJQUFjLFNBQVVyQixFQUFVaGdDLEVBQUcyOEIsR0FDdkQsSUFBSTJFLEVBQVN0QixFQUFTLEdBQUl1QixFQUFjdkIsRUFBUyxHQUFJMkIsRUFBVTNCLEVBQVMsR0FDcEVyVSxFQUFPN2lCLEdBQU95NEIsR0FDZEQsSUFBVzE2QixFQUFNbTNCLFFBQVdpRSxFQUFVL1csV0FBV1UsR0FTakRBLEVBQUtwdUIsU0FBVzBrQyxJQUdwQlAsRUFBaUJBLEVBQWV2TixJQUFJd04sSUFYaENoRixFQUFRbDlCLFVBYVhILE1BQUssV0FBYyxPQUFPc0gsRUFBTWc3QixzQkFBc0J2bkIsRUFBYXFuQixPQUU1RTVELEVBQXVCdmhDLFVBQVVxbEMsc0JBQXdCLFNBQVV2bkIsRUFBYTZuQixHQUM1RSxJQUFJdDdCLEVBQVExSixLQUNScXBCLEVBQVUsR0FDVnNTLEVBQVcsR0FlZixPQWJBcUosRUFBU3h6QixTQUFRLFNBQVV1bkIsR0FDdkI0QyxFQUFTbDRCLEtBQUttK0IsR0FBZXprQixHQUN4QjdlLElBQUl5NkIsR0FDSjMyQixNQUFLLFNBQVVvM0IsR0FDaEIsR0FBaUIsT0FBYkEsRUFDQSxNQUFNM1UsRUFBSywrREFFUGtVLEdBRVJsekIsRUFBTzJ6QixFQUFTcUgsU0FBV24zQixFQUFNbTNCLE9BQVEsb0JBQXNCckgsRUFBU3FILE9BQVMsd0JBQTBCOUgsR0FDM0cxUCxFQUFRNWxCLEtBQUtpRyxFQUFNbzNCLFdBQVd1QyxvQkFBb0I3SixXQUduRGUsR0FBbUJXLFFBQVFTLEdBQVV2NUIsTUFBSyxXQUFjLE9BQU9pbkIsTUFFMUV1WCxFQUF1QnZoQyxVQUFVNGxDLG9CQUFzQixTQUFVOW5CLEVBQWErYyxHQUMxRSxJQUFJeHdCLEVBQVExSixLQUNaLE9BQU9pbEMsR0FBb0I5bkIsRUFBWStuQixvQkFBcUJsbEMsS0FBSzZnQyxPQUFRM0csR0FBTzkzQixNQUFLLFNBQVUraUMsR0FJM0YsT0FIQWhvQixFQUFZZ21CLHdCQUF1QixXQUMvQno1QixFQUFNMDdCLHlCQUF5QmxMLEVBQU1uQixZQUVsQ3dCLEdBQW1CL29CLFFBQVEyekIsR0FBa0IsU0FBVW5tQyxHQUMxRCxPQUFPMEssRUFBTXMzQixrQkFBa0JxRSx3QkFBd0Jsb0IsRUFBYW5lLFVBSWhGNGhDLEVBQXVCdmhDLFVBQVUrbEMseUJBQTJCLFNBQVVyTSxVQUMzRC80QixLQUFLaWhDLHNCQUFzQmxJLElBRXRDNkgsRUFBdUJ2aEMsVUFBVWltQyx3QkFBMEIsU0FBVXBJLEdBQ2pFLElBQUl4ekIsRUFBUTFKLEtBQ1osT0FBT0EsS0FBS3NoQyxXQUFXcEUsR0FBSzk2QixNQUFLLFNBQVVtL0IsR0FDdkMsSUFBS0EsRUFDRCxPQUFPaEgsR0FBbUJ2NEIsVUFJOUIsSUFBSXVqQyxFQUFhL0QsWUFBWWlDLFdBQVdWLEdBQW1CeUMsY0FBYzk3QixFQUFNbTNCLFNBQzNFNEUsRUFBNkIsR0FDakMsT0FBT2pELEdBQXVCdEYsR0FDekJ3QyxRQUFRLENBQUVuSSxNQUFPZ08sSUFBYyxTQUFVdm1DLEVBQUs4RCxFQUFHMjhCLEdBRWxELEdBRGF6Z0MsRUFBSSxLQUNGMEssRUFBTW0zQixPQUFyQixDQUtJLElBQUlwUyxFQUFPN2lCLEdBQU81TSxFQUFJLElBQ3RCeW1DLEVBQTJCaGlDLEtBQUtnckIsUUFMaENnUixFQUFRbDlCLFVBUVhILE1BQUssV0FDTnlELEVBQTZDLElBQXRDNC9CLEVBQTJCcGxDLE9BQWMsOEZBRTVDb2xDLEVBQTJCeDBCLEtBQUksU0FBVTFSLEdBQUssT0FBT0EsRUFBRWd2Qiw2QkFJdkVxUyxFQUF1QnZoQyxVQUFVcW1DLFlBQWMsU0FBVXhJLEVBQUtsK0IsR0FDMUQsT0FBTzJtQyxHQUF5QnpJLEVBQUtsOUIsS0FBSzZnQyxPQUFRN2hDLElBSXRENGhDLEVBQXVCdmhDLFVBQVUyaUMseUJBQTJCLFNBQVU3a0IsR0FDbEUsSUFBSXpULEVBQVExSixLQUNaLE9BQU9taUMsR0FBb0JobEIsR0FDdEI3ZSxJQUFJMEIsS0FBSzZnQyxRQUNUeitCLE1BQUssU0FBVVgsR0FDaEIsT0FBUUEsR0FDSixJQUFJbWtDLEdBQWdCbDhCLEVBQU1tM0IsUUF0ekNwQixFQXV6Q2UsUUFHMUJELEVBcFdnQyxHQTBXM0MsU0FBUytFLEdBQXlCekksRUFBSzJELEVBQVE3aEMsR0FDM0MsSUFBSThqQyxFQUFXQyxHQUFtQm1CLGNBQWNyRCxFQUFRN2hDLEVBQUl5dkIsTUFDeEQ0VixFQUFjdkIsRUFBUyxHQUN2QnlDLEVBQWEvRCxZQUFZaUMsV0FBV1gsR0FDcEM0QyxHQUFjLEVBQ2xCLE9BQU9sRCxHQUF1QnRGLEdBQ3pCd0MsUUFBUSxDQUFFbkksTUFBT2dPLEVBQVkvRixVQUFVLElBQVEsU0FBVXhnQyxFQUFLTixFQUFPK2dDLEdBQ3RFLElBQUkyRSxFQUFTcGxDLEVBQUksR0FBSTZtQyxFQUFVN21DLEVBQUksR0FBb0JBLEVBQUksR0FDdkRvbEMsSUFBV3ZELEdBQVVnRixJQUFZeEIsSUFDakNxQixHQUFjLEdBRWxCakcsRUFBUWw5QixVQUVQSCxNQUFLLFdBQWMsT0FBT3NqQyxLQW9CbkMsU0FBU1QsR0FBb0IvSCxFQUFLMkQsRUFBUTNHLEdBQ3RDLElBQUl1SSxFQUFnQnZGLEVBQUl6Z0IsTUFBTW9sQixHQUFnQnBsQixPQUMxQ3FwQixFQUFXNUksRUFBSXpnQixNQUFNc21CLEdBQW1CdG1CLE9BQ3hDa2YsRUFBVyxHQUNYcEUsRUFBUWlLLFlBQVl1RSxLQUFLN0wsRUFBTW5CLFNBQy9CaU4sRUFBYSxFQUNiQyxFQUFnQnhELEVBQWMvQyxRQUFRLENBQUVuSSxNQUFPQSxJQUFTLFNBQVV2NEIsRUFBS04sRUFBTytnQyxHQUU5RSxPQURBdUcsSUFDT3ZHLEVBQVF2cUIsWUFFbkJ5bUIsRUFBU2w0QixLQUFLd2lDLEVBQWM3akMsTUFBSyxXQUM3QnlELEVBQXNCLElBQWZtZ0MsRUFBa0IsNkRBQ3JCOUwsRUFBTW5CLGFBR2QsSUFEQSxJQUFJb00sRUFBbUIsR0FDZHg2QixFQUFLLEVBQUdNLEVBQUtpdkIsRUFBTWhCLFVBQVd2dUIsRUFBS00sRUFBRzVLLE9BQVFzSyxJQUFNLENBQ3pELElBQUk2dUIsRUFBV3Z1QixFQUFHTixHQUNkbTRCLEVBQVdDLEdBQW1CL2pDLElBQUk2aEMsRUFBUXJILEVBQVN4NkIsSUFBSXl2QixLQUFNeUwsRUFBTW5CLFNBQ3ZFNEMsRUFBU2w0QixLQUFLcWlDLEVBQVM1d0IsT0FBTzR0QixJQUM5QnFDLEVBQWlCMWhDLEtBQUsrMUIsRUFBU3g2QixLQUVuQyxPQUFPdTdCLEdBQW1CVyxRQUFRUyxHQUFVdjVCLE1BQUssV0FBYyxPQUFPK2lDLEtBRTFFLFNBQVNqRCxHQUFtQnIyQixHQUN4QixPQUFJQSxhQUFpQjRlLFlBRWpCNWtCLEVBQU9nMkIsR0FBU1csb0JBQXFCLGdGQUM5QjN3QixFQUFNTCxZQUdOSyxFQU1mLFNBQVMrMUIsR0FBZTFFLEdBQ3BCLE9BQU9nSixHQUFxQmpKLFNBQVNDLEVBQUsyRSxHQUFnQnBsQixPQUs5RCxTQUFTK2xCLEdBQXVCdEYsR0FDNUIsT0FBT2dKLEdBQXFCakosU0FBU0MsRUFBSzZGLEdBQW1CdG1CLE9BS2pFLFNBQVMwbEIsR0FBb0JqRixHQUN6QixPQUFPZ0osR0FBcUJqSixTQUFTQyxFQUFLMEksR0FBZ0JucEI7Ozs7Ozs7Ozs7Ozs7Ozs7R0FtQjlELElBQ0kwcEIsR0FEQUMsR0FBZ0IsR0FFcEIsU0FBV0QsR0FDUEEsRUFBYUEsRUFBeUIsV0FBSSxHQUFLLGFBQy9DQSxFQUFhQSxFQUF5QixXQUFJLEdBQUssYUFGbkQsQ0FHR0EsS0FBaUJBLEdBQWUsS0FpQm5DLElBQUlFLEdBQW1DLFdBS25DLFNBQVNBLEVBQWtCQyxFQUFhQyxHQUNwQ3ZtQyxLQUFLc21DLFlBQWNBLEVBQ25CemdDLEdBQVF5Z0MsRUFBY0YsTUFBbUJFLEVBQWEsZ0JBQWtCQSxFQUFjLHVCQUF5QkYsR0FBZ0Isa0JBQy9IcG1DLEtBQUt3bUMsVUFBY2o5QixJQUFUZzlCLEVBQXFCQSxFQUFPdm1DLEtBQUtzbUMsYUFnQy9DLE9BOUJBRCxFQUFrQmhuQyxVQUFVK0MsS0FBTyxXQUMvQixJQUFJcWtDLEVBQVN6bUMsS0FBS3ltQyxPQUVsQixPQURBem1DLEtBQUt5bUMsUUFBVSxHQUFLTCxHQUNiSyxHQU9YSixFQUFrQmhuQyxVQUFVcW5DLE1BQVEsU0FBVXpPLEdBRTFDLE9BREFqNEIsS0FBS3dtQyxLQUFLdk8sR0FBWSxHQUFLbU8sS0FDcEJwbUMsS0FBS29DLFFBRWhCaWtDLEVBQWtCaG5DLFVBQVVtbkMsS0FBTyxTQUFVdk8sR0FDekNweUIsR0FBUW95QixFQUFXbU8sTUFBbUJwbUMsS0FBS3NtQyxZQUFhLHVEQUN4RHRtQyxLQUFLeW1DLE9BQVN4TyxHQUVsQm9PLEVBQWtCTSxlQUFpQixXQU0vQixPQUR3QixJQUFJTixFQUFrQkYsR0FBYVMsV0FBWSxJQUczRVAsRUFBa0JRLGNBQWdCLFdBRTlCLE9BQU8sSUFBSVIsRUFBa0JGLEdBQWFXLGFBRXZDVCxFQXhDMkIsR0EyRGxDVSxHQUFzQyxXQUN0QyxTQUFTQSxFQUFxQi9GLEVBQW1CRixHQUM3QzlnQyxLQUFLZ2hDLGtCQUFvQkEsRUFDekJoaEMsS0FBSzhnQyxXQUFhQSxFQU9sQjlnQyxLQUFLZ25DLGtCQUFvQlgsR0FBa0JNLGlCQXlOL0MsT0F2TkFJLEVBQXFCMW5DLFVBQVU0bkMsaUJBQW1CLFNBQVU5cEIsR0FDeEQsSUFBSXpULEVBQVExSixLQUNaLE9BQU9BLEtBQUtrbkMsaUJBQWlCL3BCLEdBQWEvYSxNQUFLLFNBQVVYLEdBRXJELE9BREFBLEVBQVMwbEMsZ0JBQWtCejlCLEVBQU1zOUIsa0JBQWtCTixNQUFNamxDLEVBQVMwbEMsaUJBQzNEejlCLEVBQU0wOUIsYUFBYWpxQixFQUFhMWIsR0FBVVcsTUFBSyxXQUFjLE9BQU9YLEVBQVMwbEMsdUJBRzVGSixFQUFxQjFuQyxVQUFVZ29DLDZCQUErQixTQUFVbHFCLEdBQ3BFLE9BQU9uZCxLQUFLa25DLGlCQUFpQi9wQixHQUFhL2EsTUFBSyxTQUFVWCxHQUNyRCxPQUFPbXlCLEdBQWdCRyxjQUFjLElBQUlaLEdBQVUxeEIsRUFBUzZsQywwQkFBMEJsVSxRQUFTM3hCLEVBQVM2bEMsMEJBQTBCalUsa0JBRzFJMFQsRUFBcUIxbkMsVUFBVWtvQyx5QkFBMkIsU0FBVXBxQixHQUNoRSxPQUFPcXFCLEdBQStCcnFCLEVBQVkrbkIsc0JBRXRENkIsRUFBcUIxbkMsVUFBVW9vQyxtQkFBcUIsU0FBVXRxQixFQUFhdXFCLEVBQTZCSixHQUNwRyxJQUFJNTlCLEVBQVExSixLQUNaLE9BQU9BLEtBQUtrbkMsaUJBQWlCL3BCLEdBQWEvYSxNQUFLLFNBQVVYLEdBUXJELE9BUEFBLEVBQVNpbUMsNEJBQThCQSxFQUNuQ0osSUFDQTdsQyxFQUFTNmxDLDBCQUE0QkEsRUFBMEJuVCxlQUUvRHVULEVBQThCam1DLEVBQVNpbUMsOEJBQ3ZDam1DLEVBQVNpbUMsNEJBQThCQSxHQUVwQ2grQixFQUFNMDlCLGFBQWFqcUIsRUFBYTFiLE9BRy9Dc2xDLEVBQXFCMW5DLFVBQVVzb0MsY0FBZ0IsU0FBVXhxQixFQUFheXFCLEdBQ2xFLElBQUlsK0IsRUFBUTFKLEtBQ1osT0FBT0EsS0FBSzZuQyxlQUFlMXFCLEVBQWF5cUIsR0FBWXhsQyxNQUFLLFdBQ3JELE9BQU9zSCxFQUFNdzlCLGlCQUFpQi9wQixHQUFhL2EsTUFBSyxTQUFVWCxHQUd0RCxPQUZBQSxFQUFTcW1DLGFBQWUsRUFDeEJwK0IsRUFBTXErQiw2QkFBNkJILEVBQVlubUMsR0FDeENpSSxFQUFNMDlCLGFBQWFqcUIsRUFBYTFiLFVBSW5Ec2xDLEVBQXFCMW5DLFVBQVUyb0MsaUJBQW1CLFNBQVU3cUIsRUFBYXlxQixHQUNyRSxPQUFPNW5DLEtBQUs2bkMsZUFBZTFxQixFQUFheXFCLElBRTVDYixFQUFxQjFuQyxVQUFVNG9DLGlCQUFtQixTQUFVOXFCLEVBQWF5cUIsR0FDckUsSUFBSWwrQixFQUFRMUosS0FDWixPQUFPQSxLQUFLa29DLDhCQUE4Qi9xQixFQUFheXFCLEVBQVczUCxVQUM3RDcxQixNQUFLLFdBQWMsT0FBTytsQyxHQUFhaHJCLEdBQWFqSSxPQUFPMHlCLEVBQVczUCxhQUN0RTcxQixNQUFLLFdBQWMsT0FBT3NILEVBQU13OUIsaUJBQWlCL3BCLE1BQ2pEL2EsTUFBSyxTQUFVWCxHQUdoQixPQUZBb0UsRUFBT3BFLEVBQVNxbUMsWUFBYyxFQUFHLHVDQUNqQ3JtQyxFQUFTcW1DLGFBQWUsRUFDakJwK0IsRUFBTTA5QixhQUFhanFCLEVBQWExYixPQVEvQ3NsQyxFQUFxQjFuQyxVQUFVK29DLGNBQWdCLFNBQVVsTCxFQUFLMEcsRUFBWXlFLEdBQ3RFLElBQUkzK0IsRUFBUTFKLEtBQ1JtZSxFQUFRLEVBQ1J3ZCxFQUFXLEdBQ2YsT0FBT3dNLEdBQWFqTCxHQUNmd0MsU0FBUSxTQUFVMWdDLEVBQUtOLEdBQ3hCLElBQUlrcEMsRUFBYWwrQixFQUFNbzNCLFdBQVd3SCxhQUFhNXBDLEdBQzNDa3BDLEVBQVduYixnQkFBa0JtWCxHQUNnQixPQUE3Q3lFLEVBQWdCL3BDLElBQUlzcEMsRUFBVzNQLFlBQy9COVosSUFDQXdkLEVBQVNsNEIsS0FBS2lHLEVBQU11K0IsaUJBQWlCL0ssRUFBSzBLLFFBRzdDeGxDLE1BQUssV0FBYyxPQUFPbTRCLEdBQW1CVyxRQUFRUyxNQUNyRHY1QixNQUFLLFdBQWMsT0FBTytiLE1BS25DNG9CLEVBQXFCMW5DLFVBQVVrcEMsY0FBZ0IsU0FBVXJMLEVBQUt2NkIsR0FDMUQsSUFBSStHLEVBQVExSixLQUNaLE9BQU9tb0MsR0FBYWpMLEdBQUt3QyxTQUFRLFNBQVUxZ0MsRUFBS04sR0FDNUMsSUFBSWtwQyxFQUFhbCtCLEVBQU1vM0IsV0FBV3dILGFBQWE1cEMsR0FDL0NpRSxFQUFFaWxDLE9BR1ZiLEVBQXFCMW5DLFVBQVU2bkMsaUJBQW1CLFNBQVUvcEIsR0FDeEQsT0FBTytwQixHQUFpQi9wQixFQUFZK25CLHNCQUV4QzZCLEVBQXFCMW5DLFVBQVUrbkMsYUFBZSxTQUFVanFCLEVBQWExYixHQUNqRSxPQTJJbUJ5N0IsRUEzSU0vZixFQTRJdEIrb0IsR0FBcUJqSixTQUFTQyxFQUFLc0wsR0FBZS9yQixRQTVJZjBpQixJQUFJcUosR0FBZXhwQyxJQUFLeUMsR0EySXRFLElBQTJCeTdCLEdBekl2QjZKLEVBQXFCMW5DLFVBQVV3b0MsZUFBaUIsU0FBVTFxQixFQUFheXFCLEdBQ25FLE9BQU9PLEdBQWFockIsR0FBYWdpQixJQUFJbi9CLEtBQUs4Z0MsV0FBVzJILFdBQVdiLEtBT3BFYixFQUFxQjFuQyxVQUFVMG9DLDZCQUErQixTQUFVSCxFQUFZbm1DLEdBQ2hGLElBQUlpbkMsR0FBVSxFQVNkLE9BUklkLEVBQVczUCxTQUFXeDJCLEVBQVMwbEMsa0JBQy9CMWxDLEVBQVMwbEMsZ0JBQWtCUyxFQUFXM1AsU0FDdEN5USxHQUFVLEdBRVZkLEVBQVduYixlQUFpQmhyQixFQUFTaW1DLDhCQUNyQ2ptQyxFQUFTaW1DLDRCQUE4QkUsRUFBV25iLGVBQ2xEaWMsR0FBVSxHQUVQQSxHQUVYM0IsRUFBcUIxbkMsVUFBVXNwQyxlQUFpQixTQUFVeHJCLEdBQ3RELE9BQU9uZCxLQUFLa25DLGlCQUFpQi9wQixHQUFhL2EsTUFBSyxTQUFVWCxHQUFZLE9BQU9BLEVBQVNxbUMsZ0JBRXpGZixFQUFxQjFuQyxVQUFVdXBDLGNBQWdCLFNBQVV6ckIsRUFBYXJjLEdBQ2xFLElBQUk0SSxFQUFRMUosS0FJUjZvQyxFQUFjL25DLEVBQU8rbkMsY0FDckJ0UixFQUFRaUssWUFBWUMsTUFBTSxDQUFDb0gsRUFBYWppQixPQUFPOGEsbUJBQW9CLENBQUNtSCxFQUFhamlCLE9BQU8rYSxvQkFDeEZyL0IsRUFBUyxLQUNiLE9BQU82bEMsR0FBYWhyQixHQUNmdWlCLFFBQVEsQ0FBRW5JLE1BQU9BLEVBQU9wYixNQUFPMnNCLEdBQVNDLHdCQUF5QixTQUFVL3BDLEVBQUtOLEVBQU8rZ0MsR0FDeEYsSUFBSXVKLEVBQVF0L0IsRUFBTW8zQixXQUFXd0gsYUFBYTVwQyxHQUd0Q29DLEVBQU93cEIsUUFBUTBlLEVBQU1sb0MsVUFDckJ3QixFQUFTMG1DLEVBQ1R2SixFQUFRbDlCLFdBR1hILE1BQUssV0FBYyxPQUFPRSxNQUVuQ3lrQyxFQUFxQjFuQyxVQUFVNHBDLGdCQUFrQixTQUFVL0wsRUFBSy94QixFQUFNOHNCLEdBQ2xFLElBQUl2dUIsRUFBUTFKLEtBR1IyN0IsRUFBVyxHQUNYbGYsRUFBUXlzQixHQUFvQmhNLEdBTWhDLE9BTEEveEIsRUFBS3FHLFNBQVEsU0FBVXhTLEdBQ25CLElBQUl5dkIsRUFBT21FLEdBQU81ekIsRUFBSXl2QixNQUN0QmtOLEVBQVNsNEIsS0FBS2daLEVBQU0waUIsSUFBSSxJQUFJZ0ssR0FBaUJsUixFQUFVeEosS0FDdkRrTixFQUFTbDRCLEtBQUtpRyxFQUFNczNCLGtCQUFrQm9JLGFBQWFsTSxFQUFLbCtCLE9BRXJEdTdCLEdBQW1CVyxRQUFRUyxJQUV0Q29MLEVBQXFCMW5DLFVBQVVncUMsbUJBQXFCLFNBQVVuTSxFQUFLL3hCLEVBQU04c0IsR0FDckUsSUFBSXZ1QixFQUFRMUosS0FHUnljLEVBQVF5c0IsR0FBb0JoTSxHQUNoQyxPQUFPM0MsR0FBbUIvb0IsUUFBUXJHLEdBQU0sU0FBVW5NLEdBQzlDLElBQUl5dkIsRUFBT21FLEdBQU81ekIsRUFBSXl2QixNQUN0QixPQUFPOEwsR0FBbUJXLFFBQVEsQ0FDOUJ6ZSxFQUFNdkgsT0FBTyxDQUFDK2lCLEVBQVV4SixJQUN4Qi9rQixFQUFNczNCLGtCQUFrQnNJLGdCQUFnQnBNLEVBQUtsK0IsU0FJekQrbkMsRUFBcUIxbkMsVUFBVTZvQyw4QkFBZ0MsU0FBVWhMLEVBQUtqRixHQUMxRSxJQUFJeGIsRUFBUXlzQixHQUFvQmhNLEdBQzVCM0YsRUFBUWlLLFlBQVlDLE1BQU0sQ0FBQ3hKLEdBQVcsQ0FBQ0EsRUFBVyxJQUN2QyxHQUNBLEdBQ2YsT0FBT3hiLEVBQU12SCxPQUFPcWlCLElBRXhCd1AsRUFBcUIxbkMsVUFBVWtxQywyQkFBNkIsU0FBVXJNLEVBQUtqRixHQUN2RSxJQUFJVixFQUFRaUssWUFBWUMsTUFBTSxDQUFDeEosR0FBVyxDQUFDQSxFQUFXLElBQ3ZDLEdBQ0EsR0FDWHhiLEVBQVF5c0IsR0FBb0JoTSxHQUM1QjU2QixFQUFTbzJCLEtBQ2IsT0FBT2pjLEVBQ0ZpakIsUUFBUSxDQUFFbkksTUFBT0EsRUFBT2lJLFVBQVUsSUFBUSxTQUFVeGdDLEVBQUs4RCxFQUFHMjhCLEdBQzdELElBQUloUixFQUFPN2lCLEdBQU81TSxFQUFJLElBQ2xCbzZCLEVBQVMsSUFBSWhLLEdBQVlYLEdBQzdCbnNCLEVBQVNBLEVBQU8yMEIsSUFBSW1DLE1BRW5CaDNCLE1BQUssV0FBYyxPQUFPRSxNQUVuQ3lrQyxFQUFxQjFuQyxVQUFVcW1DLFlBQWMsU0FBVXhJLEVBQUtsK0IsR0FDeEQsSUFBSXl2QixFQUFPbUUsR0FBTzV6QixFQUFJeXZCLE1BQ2xCOEksRUFBUWlLLFlBQVlDLE1BQU0sQ0FBQ2hULEdBQU8sQ0FBQ2xFLEVBQW1Ca0UsS0FDM0MsR0FDQSxHQUNYdFEsRUFBUSxFQUNaLE9BQU8rcUIsR0FBb0JoTSxHQUN0QndDLFFBQVEsQ0FDVHZqQixNQUFPZ3RCLEdBQWlCSyxxQkFDeEJoSyxVQUFVLEVBQ1ZqSSxNQUFPQSxJQUNSLFNBQVV0c0IsRUFBSW5JLEVBQUcyOEIsR0FDaEIsSUFBSXhILEVBQVdodEIsRUFBRyxHQUFXQSxFQUFHLEdBSWYsSUFBYmd0QixJQUNBOVosSUFDQXNoQixFQUFRbDlCLFdBR1hILE1BQUssV0FBYyxPQUFPK2IsRUFBUSxNQUUzQzRvQixFQUFxQjFuQyxVQUFVb3FDLHVCQUF5QixTQUFVdHNCLEVBQWE4YSxHQUMzRSxJQUFJdnVCLEVBQVExSixLQUNaLE9BQU9tb0MsR0FBYWhyQixHQUNmN2UsSUFBSTI1QixHQUNKNzFCLE1BQUssU0FBVTRtQyxHQUNoQixPQUFJQSxFQUNPdC9CLEVBQU1vM0IsV0FBV3dILGFBQWFVLEdBRzlCLFNBSVpqQyxFQW5POEI7Ozs7Ozs7Ozs7Ozs7Ozs7R0F3T3pDLFNBQVNvQixHQUFhakwsR0FDbEIsT0FBT2dKLEdBQXFCakosU0FBU0MsRUFBSzRMLEdBQVNyc0IsT0FRdkQsU0FBU3lxQixHQUFpQmhLLEdBRXRCLE9BRGtCckIsR0FBU29CLFNBQVNDLEVBQUtzTCxHQUFlL3JCLE9BQ3JDbmUsSUFBSWtxQyxHQUFleHBDLEtBQUtvRCxNQUFLLFNBQVVYLEdBRXRELE9BREFvRSxFQUFvQixPQUFicEUsRUFBbUIseUJBQ25CQSxLQUdmLFNBQVMrbEMsR0FBK0J0SyxHQUNwQyxPQUFPZ0ssR0FBaUJoSyxHQUFLOTZCLE1BQUssU0FBVXNuQyxHQUFnQixPQUFPQSxFQUFhaEMsK0JBS3BGLFNBQVN3QixHQUFvQmhNLEdBQ3pCLE9BQU9nSixHQUFxQmpKLFNBQVNDLEVBQUtpTSxHQUFpQjFzQjs7Ozs7Ozs7Ozs7Ozs7OztHQTZCL0QsSUF1RUlrdEIsR0F2RUFDLEdBQTJCLFdBQzNCLFNBQVNBLEVBQVVDLEdBQ2Y3cEMsS0FBSzZwQyxPQUFTQSxFQTZCbEIsT0ExQkFELEVBQVVFLFFBQVUsU0FBVUQsR0FDMUIsT0FBTyxJQUFJRCxFQUFVQyxJQUV6QkQsRUFBVUcsVUFBWSxTQUFVRixHQUM1QixJQUFJRyxFQUFjLElBQUlqVCxHQUFVbkksR0FBVXhCLFlBRTFDLE9BREF5YyxFQUFPcjRCLFNBQVEsU0FBVXk0QixHQUFhLE9BQVFELEVBQWNBLEVBQVkvUyxJQUFJZ1QsTUFDckUsSUFBSUwsRUFBVUksSUFRekJKLEVBQVV2cUMsVUFBVTZxQyxPQUFTLFNBQVVELEdBQ25DLElBQUlqQixHQUFRLEVBTVosT0FMQWhwQyxLQUFLNnBDLE9BQU9yNEIsU0FBUSxTQUFVMjRCLEdBQ3RCQSxFQUFjcGMsV0FBV2tjLEtBQ3pCakIsR0FBUSxNQUdUQSxHQUVYWSxFQUFVdnFDLFVBQVVpckIsUUFBVSxTQUFVaUIsR0FDcEMsT0FBT3ZyQixLQUFLNnBDLE9BQU92ZixRQUFRaUIsRUFBTXNlLFNBRTlCRCxFQS9CbUIsR0FrQzFCUSxHQUFnQyxXQUNoQyxTQUFTQSxFQUFlQyxFQUFPQyxHQUMzQnRxQyxLQUFLcXFDLE1BQVFBLEVBQ2JycUMsS0FBS3NxQyxVQUFZQSxFQUtyQixPQUhBRixFQUFlL3FDLFVBQVVpckIsUUFBVSxTQUFVaUIsR0FDekMsT0FBUXZyQixLQUFLcXFDLE1BQU0vZixRQUFRaUIsRUFBTThlLFFBQVVycUMsS0FBS3NxQyxVQUFVaGdCLFFBQVFpQixFQUFNK2UsWUFFckVGLEVBUndCLEdBVy9CRyxHQUNBLFNBV0FqMEIsRUFRQWswQixHQUNJeHFDLEtBQUtzVyxRQUFVQSxFQUNmdFcsS0FBS3dxQyxpQkFBbUJBLElBS2hDLFNBQVdiLEdBQ1BBLEVBQWFBLEVBQWtCLElBQUksR0FBSyxNQUN4Q0EsRUFBYUEsRUFBb0IsTUFBSSxHQUFLLFFBQzFDQSxFQUFhQSxFQUF3QixVQUFJLEdBQUssWUFDOUNBLEVBQWFBLEVBQXFCLE9BQUksR0FBSyxTQUovQyxDQUtHQSxLQUFpQkEsR0FBZSxLQU1uQyxJQW9kSWMsR0FlQUMsR0FuZUFDLEdBQThCLFdBQzlCLFNBQVNBLEVBQWFDLEVBQVlDLEdBQzlCN3FDLEtBQUs0cUMsV0FBYUEsRUFDbEI1cUMsS0FBSzZxQyxPQUFTQSxFQUNkaGxDLE9BQXNCMEQsSUFBZnFoQyxRQUF1Q3JoQyxJQUFYc2hDLEVBQXNCLGtFQXdDN0QsT0FyQ0FGLEVBQWFFLE9BQVMsU0FBVUEsR0FDNUIsT0FBTyxJQUFJRixPQUFhcGhDLEVBQVdzaEMsSUFHdkNGLEVBQWFDLFdBQWEsU0FBVXQwQixHQUNoQyxPQUFPLElBQUlxMEIsRUFBYXIwQixJQUU1Qm5ZLE9BQU9DLGVBQWV1c0MsRUFBYXRyQyxVQUFXLFNBQVUsQ0FFcERmLElBQUssV0FDRCxZQUEyQmlMLElBQXBCdkosS0FBSzRxQyxpQkFBNENyaEMsSUFBaEJ2SixLQUFLNnFDLFFBRWpEeHNDLFlBQVksRUFDWmtaLGNBQWMsSUFNbEJvekIsRUFBYXRyQyxVQUFVeXJDLFdBQWEsU0FBVXpSLEdBQzFDLFlBQXdCOXZCLElBQXBCdkosS0FBSzRxQyxXQUNHdlIsYUFBb0IwUixJQUN4QjFSLEVBQVMvaUIsUUFBUWdVLFFBQVF0cUIsS0FBSzRxQyxpQkFFYnJoQyxJQUFoQnZKLEtBQUs2cUMsT0FDSDdxQyxLQUFLNnFDLFNBQVd4UixhQUFvQjBSLElBRzNDbGxDLEVBQU83RixLQUFLZ3JDLE9BQVEsaUNBQ2IsSUFHZkwsRUFBYXRyQyxVQUFVaXJCLFFBQVUsU0FBVWlCLEdBQ3ZDLE9BbnpIUXBCLEVBbXpIT25xQixLQUFLNHFDLFdBbnpITnhnQixFQW16SGtCbUIsRUFBTXFmLFlBbHpIdEN6Z0IsV0FDVUMsSUFBU0QsRUFBS0csUUFBUUYsSUFLekJELElBQVNDLElBNnlIWnBxQixLQUFLNnFDLFNBQVd0ZixFQUFNc2YsT0FwekhsQyxJQUFnQjFnQixFQUFNQyxHQXN6SGxCdWdCLEVBQWFNLEtBQU8sSUFBSU4sRUFDakJBLEVBNUNzQixHQStGN0JPLEdBQTBCLFdBQzFCLFNBQVNBLEtBcUJULE9BbkJBQSxFQUFTN3JDLFVBQVU4ckMsaUJBQW1CLFNBQVU5UixHQUM1QixNQUFaQSxHQUNBeHpCLEVBQU93ekIsRUFBU3I2QixJQUFJc3JCLFFBQVF0cUIsS0FBS2hCLEtBQU0sOERBUy9Da3NDLEVBQVNFLHVCQUF5QixTQUFVL1IsR0FDeEMsT0FBSUEsYUFBb0IwUixHQUNiMVIsRUFBUy9pQixRQUdUc2QsR0FBZ0JLLEtBR3hCaVgsRUF0QmtCLEdBNEJ6QkcsR0FBNkIsU0FBVWxoQyxHQUV2QyxTQUFTa2hDLEVBQVlyc0MsRUFBS04sRUFBTzRzQyxHQUM3QixJQUFJNWhDLEVBQVFTLEVBQU92TSxLQUFLb0MsT0FBU0EsS0FLakMsT0FKQTBKLEVBQU0xSyxJQUFNQSxFQUNaMEssRUFBTWhMLE1BQVFBLEVBQ2RnTCxFQUFNNGhDLGFBQWVBLEVBQ3JCNWhDLEVBQU1vSixLQUFPNjJCLEdBQWE0QixJQUNuQjdoQyxFQWdDWCxPQXZDQWxFLEVBQU0xRixVQUFVdXJDLEVBQWFsaEMsR0FTN0JraEMsRUFBWWhzQyxVQUFVODVCLHNCQUF3QixTQUFVRSxFQUFVSSxHQUM5RHo1QixLQUFLbXJDLGlCQUFpQjlSLEdBQ3RCeHpCLEVBQTBDLE1BQW5DNHpCLEVBQWUrUSxpQkFBMEIsOENBSWhELElBQUlsMEIsRUFBVW1qQixFQUFlbmpCLFFBQzdCLE9BQU8sSUFBSXkwQixHQUFTL3FDLEtBQUtoQixJQUFLc1gsRUFBUyxDQUNuQ2sxQix1QkFBdUIsR0FDeEJ4ckMsS0FBS3RCLFFBRVoyc0MsRUFBWWhzQyxVQUFVcTZCLGlCQUFtQixTQUFVTCxFQUFVTSxFQUFTWCxHQUVsRSxHQURBaDVCLEtBQUttckMsaUJBQWlCOVIsSUFDakJyNUIsS0FBS3NyQyxhQUFhUixXQUFXelIsR0FDOUIsT0FBT0EsRUFFWCxJQUFJL2lCLEVBQVU0MEIsR0FBU0UsdUJBQXVCL1IsR0FDOUMsT0FBTyxJQUFJMFIsR0FBUy9xQyxLQUFLaEIsSUFBS3NYLEVBQVMsQ0FDbkNtMUIsbUJBQW1CLEdBQ3BCenJDLEtBQUt0QixRQUVaMnNDLEVBQVloc0MsVUFBVXFzQyxpQkFBbUIsU0FBVXJTLEdBQy9DLE9BQU8sTUFFWGdTLEVBQVloc0MsVUFBVWlyQixRQUFVLFNBQVVpQixHQUN0QyxPQUFRQSxhQUFpQjhmLEdBQ3JCcnJDLEtBQUtoQixJQUFJc3JCLFFBQVFpQixFQUFNdnNCLE1BQ3ZCZ0IsS0FBS3RCLE1BQU00ckIsUUFBUWlCLEVBQU03c0IsUUFDekJzQixLQUFLc3JDLGFBQWFoaEIsUUFBUWlCLEVBQU0rZixlQUVqQ0QsRUF4Q3FCLENBeUM5QkgsSUFjRVMsR0FBK0IsU0FBVXhoQyxHQUV6QyxTQUFTd2hDLEVBQWMzc0MsRUFBSzBMLEVBQU1raEMsRUFBV04sR0FDekMsSUFBSTVoQyxFQUFRUyxFQUFPdk0sS0FBS29DLE9BQVNBLEtBTWpDLE9BTEEwSixFQUFNMUssSUFBTUEsRUFDWjBLLEVBQU1nQixLQUFPQSxFQUNiaEIsRUFBTWtpQyxVQUFZQSxFQUNsQmxpQyxFQUFNNGhDLGFBQWVBLEVBQ3JCNWhDLEVBQU1vSixLQUFPNjJCLEdBQWFrQyxNQUNuQm5pQyxFQW1FWCxPQTNFQWxFLEVBQU0xRixVQUFVNnJDLEVBQWV4aEMsR0FVL0J3aEMsRUFBY3RzQyxVQUFVODVCLHNCQUF3QixTQUFVRSxFQUFVSSxHQUdoRSxHQUZBejVCLEtBQUttckMsaUJBQWlCOVIsR0FDdEJ4ekIsRUFBMEMsTUFBbkM0ekIsRUFBZStRLGlCQUEwQixpREFDM0N4cUMsS0FBS3NyQyxhQUFhUixXQUFXelIsR0FLOUIsT0FBTyxJQUFJeVMsR0FBZ0I5ckMsS0FBS2hCLElBQUt5NkIsRUFBZW5qQixTQUV4RCxJQUFJeTFCLEVBQVUvckMsS0FBS2dzQyxjQUFjM1MsR0FDakMsT0FBTyxJQUFJMFIsR0FBUy9xQyxLQUFLaEIsSUFBS3k2QixFQUFlbmpCLFFBQVMsQ0FDbERrMUIsdUJBQXVCLEdBQ3hCTyxJQUVQSixFQUFjdHNDLFVBQVVxNkIsaUJBQW1CLFNBQVVMLEVBQVVNLEVBQVNYLEdBRXBFLEdBREFoNUIsS0FBS21yQyxpQkFBaUI5UixJQUNqQnI1QixLQUFLc3JDLGFBQWFSLFdBQVd6UixHQUM5QixPQUFPQSxFQUVYLElBQUkvaUIsRUFBVTQwQixHQUFTRSx1QkFBdUIvUixHQUMxQzBTLEVBQVUvckMsS0FBS2dzQyxjQUFjM1MsR0FDakMsT0FBTyxJQUFJMFIsR0FBUy9xQyxLQUFLaEIsSUFBS3NYLEVBQVMsQ0FDbkNtMUIsbUJBQW1CLEdBQ3BCTSxJQUVQSixFQUFjdHNDLFVBQVVxc0MsaUJBQW1CLFNBQVVyUyxHQUNqRCxPQUFPLE1BRVhzUyxFQUFjdHNDLFVBQVVpckIsUUFBVSxTQUFVaUIsR0FDeEMsT0FBUUEsYUFBaUJvZ0IsR0FDckIzckMsS0FBS2hCLElBQUlzckIsUUFBUWlCLEVBQU12c0IsTUFDdkJnQixLQUFLNHJDLFVBQVV0aEIsUUFBUWlCLEVBQU1xZ0IsWUFDN0I1ckMsS0FBS3NyQyxhQUFhaGhCLFFBQVFpQixFQUFNK2YsZUFPeENLLEVBQWN0c0MsVUFBVTJzQyxjQUFnQixTQUFVM1MsR0FDOUMsSUFBSTN1QixFQU9KLE9BTElBLEVBREEydUIsYUFBb0IwUixHQUNiMVIsRUFBUzN1QixPQUdUdWhDLEdBQVlyYyxNQUVoQjV2QixLQUFLa3NDLFlBQVl4aEMsSUFFNUJpaEMsRUFBY3RzQyxVQUFVNnNDLFlBQWMsU0FBVXhoQyxHQUM1QyxJQUFJaEIsRUFBUTFKLEtBWVosT0FYQUEsS0FBSzRyQyxVQUFVL0IsT0FBT3I0QixTQUFRLFNBQVV5NEIsR0FDcEMsSUFBS0EsRUFBVWo2QixVQUFXLENBQ3RCLElBQUltOEIsRUFBV3ppQyxFQUFNZ0IsS0FBSzIvQixNQUFNSixHQUU1QnYvQixFQURhLE9BQWJ5aEMsRUFDT3poQyxFQUFLd0osSUFBSSsxQixFQUFXa0MsR0FHcEJ6aEMsRUFBS3dLLE9BQU8rMEIsT0FJeEJ2L0IsR0FFSmloQyxFQTVFdUIsQ0E2RWhDVCxJQVVFa0IsR0FBbUMsU0FBVWppQyxHQUU3QyxTQUFTaWlDLEVBQWtCcHRDLEVBQUtxdEMsR0FDNUIsSUFBSTNpQyxFQUFRUyxFQUFPdk0sS0FBS29DLE9BQVNBLEtBUWpDLE9BUEEwSixFQUFNMUssSUFBTUEsRUFDWjBLLEVBQU0yaUMsZ0JBQWtCQSxFQUN4QjNpQyxFQUFNb0osS0FBTzYyQixHQUFhMkMsVUFJMUI1aUMsRUFBTTRoQyxhQUFlWCxHQUFhRSxRQUFPLEdBQ2xDbmhDLEVBcUlYLE9BL0lBbEUsRUFBTTFGLFVBQVVzc0MsRUFBbUJqaUMsR0FZbkNpaUMsRUFBa0Ivc0MsVUFBVTg1QixzQkFBd0IsU0FBVUUsRUFBVUksR0FHcEUsR0FGQXo1QixLQUFLbXJDLGlCQUFpQjlSLEdBQ3RCeHpCLEVBQTBDLE1BQW5DNHpCLEVBQWUrUSxpQkFBMEIscURBQzNDeHFDLEtBQUtzckMsYUFBYVIsV0FBV3pSLEdBSzlCLE9BQU8sSUFBSXlTLEdBQWdCOXJDLEtBQUtoQixJQUFLeTZCLEVBQWVuakIsU0FFeEQsSUFBSWkyQixFQUFNdnNDLEtBQUt3c0MsZ0JBQWdCblQsR0FDM0JtUixFQUFtQnhxQyxLQUFLeXNDLHVCQUF1QnBULEVBQVVJLEVBQWUrUSxrQkFDeEVsMEIsRUFBVW1qQixFQUFlbmpCLFFBQ3pCeTFCLEVBQVUvckMsS0FBSzBzQyxnQkFBZ0JILEVBQUk3aEMsT0FBUTgvQixHQUMvQyxPQUFPLElBQUlPLEdBQVMvcUMsS0FBS2hCLElBQUtzWCxFQUFTLENBQ25DazFCLHVCQUF1QixHQUN4Qk8sSUFFUEssRUFBa0Ivc0MsVUFBVXE2QixpQkFBbUIsU0FBVUwsRUFBVU0sRUFBU1gsR0FFeEUsR0FEQWg1QixLQUFLbXJDLGlCQUFpQjlSLElBQ2pCcjVCLEtBQUtzckMsYUFBYVIsV0FBV3pSLEdBQzlCLE9BQU9BLEVBRVgsSUFBSWtULEVBQU12c0MsS0FBS3dzQyxnQkFBZ0JuVCxHQUMzQm1SLEVBQW1CeHFDLEtBQUsyc0Msc0JBQXNCM1QsRUFBZ0JLLEVBQVVNLEdBQ3hFb1MsRUFBVS9yQyxLQUFLMHNDLGdCQUFnQkgsRUFBSTdoQyxPQUFROC9CLEdBQy9DLE9BQU8sSUFBSU8sR0FBUy9xQyxLQUFLaEIsSUFBS3V0QyxFQUFJajJCLFFBQVMsQ0FDdkNtMUIsbUJBQW1CLEdBQ3BCTSxJQUVQSyxFQUFrQi9zQyxVQUFVcXNDLGlCQUFtQixTQUFVclMsR0FFckQsSUFEQSxJQUFJdVQsRUFBYSxLQUNSamlDLEVBQUssRUFBR00sRUFBS2pMLEtBQUtxc0MsZ0JBQWlCMWhDLEVBQUtNLEVBQUc1SyxPQUFRc0ssSUFBTSxDQUM5RCxJQUFJa2lDLEVBQWlCNWhDLEVBQUdOLEdBQ3BCbWlDLEVBQWdCelQsYUFBb0IwUixHQUNsQzFSLEVBQVNnUixNQUFNd0MsRUFBZXhDLFlBQzlCOWdDLEVBQ0Z3akMsRUFBZUYsRUFBZXZDLFVBQVUwQyxpQkFBaUJGLEdBQWlCLE1BQzFELE1BQWhCQyxJQUVJSCxFQURjLE1BQWRBLEVBQ2FYLEdBQVlyYyxNQUFNMWIsSUFBSTI0QixFQUFleEMsTUFBTzBDLEdBRzVDSCxFQUFXMTRCLElBQUkyNEIsRUFBZXhDLE1BQU8wQyxJQUk5RCxPQUFPSCxHQUVYUixFQUFrQi9zQyxVQUFVaXJCLFFBQVUsU0FBVWlCLEdBQzVDLE9BQVFBLGFBQWlCNmdCLEdBQ3JCcHNDLEtBQUtoQixJQUFJc3JCLFFBQVFpQixFQUFNdnNCLE1BQ3ZCcXJCLEVBQVlycUIsS0FBS3FzQyxnQkFBaUI5Z0IsRUFBTThnQixrQkFDeENyc0MsS0FBS3NyQyxhQUFhaGhCLFFBQVFpQixFQUFNK2YsZUFReENjLEVBQWtCL3NDLFVBQVVtdEMsZ0JBQWtCLFNBQVVuVCxHQUdwRCxPQUZBeHpCLEVBQU93ekIsYUFBb0IwUixHQUFVLDhCQUFnQzFSLEdBQ3JFeHpCLEVBQU93ekIsRUFBU3I2QixJQUFJc3JCLFFBQVF0cUIsS0FBS2hCLEtBQU0sbURBQ2hDcTZCLEdBV1grUyxFQUFrQi9zQyxVQUFVb3RDLHVCQUF5QixTQUFVOVMsRUFBUzhTLEdBQ3BFLElBQUlqQyxFQUFtQixHQUN2QjNrQyxFQUFPN0YsS0FBS3FzQyxnQkFBZ0Joc0MsU0FBV29zQyxFQUF1QnBzQyxPQUFRLGtDQUFvQ29zQyxFQUF1QnBzQyxPQUFTLHlDQUM1RkwsS0FBS3FzQyxnQkFBZ0Joc0MsT0FBUyxLQUM1RSxJQUFLLElBQUk1QyxFQUFJLEVBQUdBLEVBQUlndkMsRUFBdUJwc0MsT0FBUTVDLElBQUssQ0FDcEQsSUFBSW92QyxFQUFpQjdzQyxLQUFLcXNDLGdCQUFnQjV1QyxHQUN0QzZzQyxFQUFZdUMsRUFBZXZDLFVBQzNCaGUsRUFBZ0IsS0FDaEJxTixhQUFtQm9SLEtBQ25CemUsRUFBZ0JxTixFQUFRMFEsTUFBTXdDLEVBQWV4QyxRQUVqREcsRUFBaUIvbUMsS0FBSzZtQyxFQUFVblIsc0JBQXNCN00sRUFBZW1nQixFQUF1Qmh2QyxLQUVoRyxPQUFPK3NDLEdBY1g0QixFQUFrQi9zQyxVQUFVc3RDLHNCQUF3QixTQUFVM1QsRUFBZ0JLLEVBQVVNLEdBRXBGLElBREEsSUFBSTZRLEVBQW1CLEdBQ2Q3L0IsRUFBSyxFQUFHTSxFQUFLakwsS0FBS3FzQyxnQkFBaUIxaEMsRUFBS00sRUFBRzVLLE9BQVFzSyxJQUFNLENBQzlELElBQUlraUMsRUFBaUI1aEMsRUFBR04sR0FDcEIyL0IsRUFBWXVDLEVBQWV2QyxVQUMzQmhlLEVBQWdCLEtBQ2hCK00sYUFBb0IwUixLQUNwQnplLEVBQWdCK00sRUFBU2dSLE1BQU13QyxFQUFleEMsUUFFNUIsT0FBbEIvZCxHQUEwQnFOLGFBQW1Cb1IsS0FLN0N6ZSxFQUFnQnFOLEVBQVEwUSxNQUFNd0MsRUFBZXhDLFFBRWpERyxFQUFpQi9tQyxLQUFLNm1DLEVBQVU1USxpQkFBaUJwTixFQUFlME0sSUFFcEUsT0FBT3dSLEdBRVg0QixFQUFrQi9zQyxVQUFVcXRDLGdCQUFrQixTQUFVaGlDLEVBQU04L0IsR0FDMUQza0MsRUFBTzJrQyxFQUFpQm5xQyxTQUFXTCxLQUFLcXNDLGdCQUFnQmhzQyxPQUFRLHFDQUNoRSxJQUFLLElBQUk1QyxFQUFJLEVBQUdBLEVBQUl1QyxLQUFLcXNDLGdCQUFnQmhzQyxPQUFRNUMsSUFBSyxDQUNsRCxJQUNJd3NDLEVBRGlCanFDLEtBQUtxc0MsZ0JBQWdCNXVDLEdBQ1g0c0MsTUFDL0IzL0IsRUFBT0EsRUFBS3dKLElBQUkrMUIsRUFBV08sRUFBaUIvc0MsSUFFaEQsT0FBT2lOLEdBRUowaEMsRUFoSjJCLENBaUpwQ2xCLElBRUUrQixHQUFnQyxTQUFVOWlDLEdBRTFDLFNBQVM4aUMsRUFBZWp1QyxFQUFLc3NDLEdBQ3pCLElBQUk1aEMsRUFBUVMsRUFBT3ZNLEtBQUtvQyxPQUFTQSxLQUlqQyxPQUhBMEosRUFBTTFLLElBQU1BLEVBQ1owSyxFQUFNNGhDLGFBQWVBLEVBQ3JCNWhDLEVBQU1vSixLQUFPNjJCLEdBQWF1RCxPQUNuQnhqQyxFQThCWCxPQXBDQWxFLEVBQU0xRixVQUFVbXRDLEVBQWdCOWlDLEdBUWhDOGlDLEVBQWU1dEMsVUFBVTg1QixzQkFBd0IsU0FBVUUsRUFBVUksR0FNakUsT0FMQXo1QixLQUFLbXJDLGlCQUFpQjlSLEdBQ3RCeHpCLEVBQTBDLE1BQW5DNHpCLEVBQWUrUSxpQkFBMEIsaURBSXpDLElBQUkyQyxHQUFXbnRDLEtBQUtoQixJQUFLeTZCLEVBQWVuakIsUUFBUyxDQUNwRGsxQix1QkFBdUIsS0FHL0J5QixFQUFlNXRDLFVBQVVxNkIsaUJBQW1CLFNBQVVMLEVBQVVNLEVBQVNYLEdBRXJFLE9BREFoNUIsS0FBS21yQyxpQkFBaUI5UixHQUNqQnI1QixLQUFLc3JDLGFBQWFSLFdBQVd6UixJQUc5QkEsR0FDQXh6QixFQUFPd3pCLEVBQVNyNkIsSUFBSXNyQixRQUFRdHFCLEtBQUtoQixLQUFNLHFEQUVwQyxJQUFJbXVDLEdBQVdudEMsS0FBS2hCLElBQUs0MEIsR0FBZ0JJLGtCQUxyQ3FGLEdBT2Y0VCxFQUFlNXRDLFVBQVVxc0MsaUJBQW1CLFNBQVVyUyxHQUNsRCxPQUFPLE1BRVg0VCxFQUFlNXRDLFVBQVVpckIsUUFBVSxTQUFVaUIsR0FDekMsT0FBUUEsYUFBaUIwaEIsR0FDckJqdEMsS0FBS2hCLElBQUlzckIsUUFBUWlCLEVBQU12c0IsTUFDdkJnQixLQUFLc3JDLGFBQWFoaEIsUUFBUWlCLEVBQU0rZixlQUVqQzJCLEVBckN3QixDQXNDakMvQixLQW1CRixTQUFXVCxHQUVQQSxFQUFVQSxFQUFxQixVQUFJLEdBQUssWUFDeENBLEVBQVVBLEVBQXdCLGFBQUksR0FBSyxlQUMzQ0EsRUFBVUEsRUFBdUIsWUFBSSxHQUFLLGNBQzFDQSxFQUFVQSxFQUEwQixlQUFJLEdBQUssaUJBQzdDQSxFQUFVQSxFQUF1QixZQUFJLEdBQUssY0FDMUNBLEVBQVVBLEVBQXFCLFVBQUksR0FBSyxZQUN4Q0EsRUFBVUEsRUFBb0IsU0FBSSxHQUFLLFdBQ3ZDQSxFQUFVQSxFQUF5QixjQUFJLEdBQUssZ0JBQzVDQSxFQUFVQSxFQUFzQixXQUFJLEdBQUssYUFDekNBLEVBQVVBLEVBQXVCLFlBQUksR0FBSyxjQVg5QyxDQVlHQSxLQUFjQSxHQUFZLEtBRzdCLFNBQVdDLEdBQ1BBLEVBQXdCQSxFQUFpQyxRQUFJLEdBQUssVUFDbEVBLEVBQXdCQSxFQUFrQyxTQUFJLEdBQUssV0FDbkVBLEVBQXdCQSxFQUFrQyxTQUFJLEdBQUssV0FIdkUsQ0FJR0EsS0FBNEJBLEdBQTBCLEtBRXpELElBQUkwQyxHQUFtQyxXQUNuQyxTQUFTQSxFQUFrQkMsRUFBeUJDLEdBQ2hEdHRDLEtBQUtxdEMsd0JBQTBCQSxFQUMvQnJ0QyxLQUFLc3RDLHNCQUF3QkEsRUFlakMsT0FiQUYsRUFBa0JHLG9CQUFzQixTQUFVajVCLEVBQVNnNUIsR0FDdkQsT0FBUWg1QixFQUFRazVCLGtCQUNaLElBQUssV0FDRCxPQUFPLElBQUlKLEVBQWtCMUMsR0FBd0IrQyxTQUFVSCxHQUNuRSxJQUFLLFdBQ0QsT0FBTyxJQUFJRixFQUFrQjFDLEdBQXdCZ0QsU0FBVUosR0FDbkUsSUFBSyxPQUNMLFVBQUsvakMsRUFDRCxPQUFPLElBQUk2akMsRUFBa0IxQyxHQUF3QmlELFFBQVNMLEdBQ2xFLFFBQ0ksT0FBT3pvQixFQUFLLHdEQUdqQnVvQixFQWxCMkIsR0F1QmxDUSxHQUE0QixXQUM1QixTQUFTQSxLQVdULE9BVEFBLEVBQVd2dUMsVUFBVW1NLFNBQVcsV0FDNUIsSUFBSThMLEVBQU10WCxLQUFLdEIsUUFDZixPQUFlLE9BQVI0WSxFQUFlLE9BQVNBLEVBQUk5TCxZQUV2Q29pQyxFQUFXdnVDLFVBQVV3dUMsaUJBQW1CLFNBQVV0aUIsR0FHOUMsT0FGQTFsQixFQUFPN0YsS0FBSzh0QyxZQUFjdmlCLEVBQU11aUIsVUFBVyxpRUFDakM1akIsRUFBb0JscUIsS0FBSzh0QyxVQUFXdmlCLEVBQU11aUIsWUFHakRGLEVBWm9CLEdBYzNCRyxHQUEyQixTQUFVNWpDLEdBRXJDLFNBQVM0akMsSUFDTCxJQUFJcmtDLEVBQVFTLEVBQU92TSxLQUFLb0MsT0FBU0EsS0FLakMsT0FKQTBKLEVBQU1va0MsVUFBWXJELEdBQVVzRCxVQUc1QnJrQyxFQUFNc2tDLGNBQWdCLEtBQ2Z0a0MsRUFlWCxPQXRCQWxFLEVBQU0xRixVQUFVaXVDLEVBQVc1akMsR0FTM0I0akMsRUFBVTF1QyxVQUFVWCxNQUFRLFNBQVU0VixHQUNsQyxPQUFPLE1BRVh5NUIsRUFBVTF1QyxVQUFVaXJCLFFBQVUsU0FBVWlCLEdBQ3BDLE9BQU9BLGFBQWlCd2lCLEdBRTVCQSxFQUFVMXVDLFVBQVUrc0IsVUFBWSxTQUFVYixHQUN0QyxPQUFJQSxhQUFpQndpQixFQUNWLEVBRUovdEMsS0FBSzZ0QyxpQkFBaUJ0aUIsSUFFakN3aUIsRUFBVUUsU0FBVyxJQUFJRixFQUNsQkEsRUF2Qm1CLENBd0I1QkgsSUFDRU0sR0FBOEIsU0FBVS9qQyxHQUV4QyxTQUFTK2pDLEVBQWFGLEdBQ2xCLElBQUl0a0MsRUFBUVMsRUFBT3ZNLEtBQUtvQyxPQUFTQSxLQUdqQyxPQUZBMEosRUFBTXNrQyxjQUFnQkEsRUFDdEJ0a0MsRUFBTW9rQyxVQUFZckQsR0FBVXlELGFBQ3JCeGtDLEVBb0JYLE9BekJBbEUsRUFBTTFGLFVBQVVvdUMsRUFBYy9qQyxHQU85QitqQyxFQUFhN3VDLFVBQVVYLE1BQVEsU0FBVTRWLEdBQ3JDLE9BQU90VSxLQUFLZ3VDLGVBRWhCRSxFQUFhN3VDLFVBQVVpckIsUUFBVSxTQUFVaUIsR0FDdkMsT0FBUUEsYUFBaUIyaUIsR0FDckJsdUMsS0FBS2d1QyxnQkFBa0J6aUIsRUFBTXlpQixlQUVyQ0UsRUFBYTd1QyxVQUFVK3NCLFVBQVksU0FBVWIsR0FDekMsT0FBSUEsYUFBaUIyaUIsRUFDVmhrQixFQUFvQmxxQixLQUFNdXJCLEdBRTlCdnJCLEtBQUs2dEMsaUJBQWlCdGlCLElBRWpDMmlCLEVBQWFDLEdBQUssU0FBVXp2QyxHQUN4QixPQUFPQSxFQUFRd3ZDLEVBQWFFLEtBQU9GLEVBQWFHLE9BRXBESCxFQUFhRSxLQUFPLElBQUlGLEdBQWEsR0FDckNBLEVBQWFHLE1BQVEsSUFBSUgsR0FBYSxHQUMvQkEsRUExQnNCLENBMkIvQk4sSUFFRVUsR0FBNkIsU0FBVW5rQyxHQUV2QyxTQUFTbWtDLEVBQVlOLEdBQ2pCLElBQUl0a0MsRUFBUVMsRUFBT3ZNLEtBQUtvQyxPQUFTQSxLQUdqQyxPQUZBMEosRUFBTXNrQyxjQUFnQkEsRUFDdEJ0a0MsRUFBTW9rQyxVQUFZckQsR0FBVTZELFlBQ3JCNWtDLEVBV1gsT0FoQkFsRSxFQUFNMUYsVUFBVXd1QyxFQUFhbmtDLEdBTzdCbWtDLEVBQVlqdkMsVUFBVVgsTUFBUSxTQUFVNFYsR0FDcEMsT0FBT3RVLEtBQUtndUMsZUFFaEJNLEVBQVlqdkMsVUFBVStzQixVQUFZLFNBQVViLEdBQ3hDLE9BQUlBLGFBQWlCK2lCLEdBUUZua0IsRUFQVW5xQixLQUFLZ3VDLGNBT1Q1akIsRUFQd0JtQixFQUFNeWlCLGNBUXZEN2pCLEVBQU9DLEdBQ0MsRUFFSEQsRUFBT0MsRUFDTCxFQUVGRCxJQUFTQyxFQUNQLEVBSUh2RCxNQUFNc0QsR0FDQ3RELE1BQU11RCxHQUFTLEdBQUssRUFHcEIsR0FyQkpwcUIsS0FBSzZ0QyxpQkFBaUJ0aUIsR0FLckMsSUFBMkJwQixFQUFNQyxHQUh0QmtrQixFQWpCcUIsQ0FrQjlCVixJQTBCRixTQUFTVyxHQUFjcGtCLEVBQU1DLEdBR3pCLE9BQUlELElBQVNDLEVBRU8sSUFBVEQsR0FBYyxFQUFJQSxHQUFTLEVBQUlDLEVBSS9CRCxHQUFTQSxHQUFRQyxHQUFVQSxFQUcxQyxJQUFJb2tCLEdBQThCLFNBQVVya0MsR0FFeEMsU0FBU3FrQyxJQUNMLE9BQWtCLE9BQVhya0MsR0FBbUJBLEVBQU83SixNQUFNTixLQUFNSSxZQUFjSixLQVkvRCxPQWRBd0YsRUFBTTFGLFVBQVUwdUMsRUFBY3JrQyxHQUk5QnFrQyxFQUFhbnZDLFVBQVVpckIsUUFBVSxTQUFVaUIsR0FHdkMsT0FBSUEsYUFBaUJpakIsR0FDVkQsR0FBY3Z1QyxLQUFLZ3VDLGNBQWV6aUIsRUFBTXlpQixnQkFNaERRLEVBZnNCLENBZ0IvQkYsSUFDRUcsR0FBNkIsU0FBVXRrQyxHQUV2QyxTQUFTc2tDLElBQ0wsT0FBa0IsT0FBWHRrQyxHQUFtQkEsRUFBTzdKLE1BQU1OLEtBQU1JLFlBQWNKLEtBZS9ELE9BakJBd0YsRUFBTTFGLFVBQVUydUMsRUFBYXRrQyxHQUk3QnNrQyxFQUFZcHZDLFVBQVVpckIsUUFBVSxTQUFVaUIsR0FHdEMsT0FBSUEsYUFBaUJrakIsR0FDVkYsR0FBY3Z1QyxLQUFLZ3VDLGNBQWV6aUIsRUFBTXlpQixnQkFNdkRTLEVBQVlDLElBQU0sSUFBSUQsRUFBWUUsS0FDbENGLEVBQVk5TSxrQkFBb0IsSUFBSThNLEVBQVlHLEtBQ2hESCxFQUFZL00sa0JBQW9CLElBQUkrTSxHQUFhRyxLQUMxQ0gsRUFsQnFCLENBbUI5QkgsSUFFRU8sR0FBNkIsU0FBVTFrQyxHQUV2QyxTQUFTMGtDLEVBQVliLEdBQ2pCLElBQUl0a0MsRUFBUVMsRUFBT3ZNLEtBQUtvQyxPQUFTQSxLQUdqQyxPQUZBMEosRUFBTXNrQyxjQUFnQkEsRUFDdEJ0a0MsRUFBTW9rQyxVQUFZckQsR0FBVW9FLFlBQ3JCbmxDLEVBY1gsT0FuQkFsRSxFQUFNMUYsVUFBVSt1QyxFQUFhMWtDLEdBTzdCMGtDLEVBQVl4dkMsVUFBVVgsTUFBUSxTQUFVNFYsR0FDcEMsT0FBT3RVLEtBQUtndUMsZUFFaEJhLEVBQVl4dkMsVUFBVWlyQixRQUFVLFNBQVVpQixHQUN0QyxPQUFRQSxhQUFpQnNqQixHQUFlN3VDLEtBQUtndUMsZ0JBQWtCemlCLEVBQU15aUIsZUFFekVhLEVBQVl4dkMsVUFBVStzQixVQUFZLFNBQVViLEdBQ3hDLE9BQUlBLGFBQWlCc2pCLEVBQ1Yza0IsRUFBb0JscUIsS0FBS2d1QyxjQUFlemlCLEVBQU15aUIsZUFFbERodUMsS0FBSzZ0QyxpQkFBaUJ0aUIsSUFFMUJzakIsRUFwQnFCLENBcUI5QmpCLElBQ0VrQixHQUFnQyxTQUFVM2tDLEdBRTFDLFNBQVMya0MsRUFBZWQsR0FDcEIsSUFBSXRrQyxFQUFRUyxFQUFPdk0sS0FBS29DLE9BQVNBLEtBR2pDLE9BRkEwSixFQUFNc2tDLGNBQWdCQSxFQUN0QnRrQyxFQUFNb2tDLFVBQVlyRCxHQUFVcUUsZUFDckJwbEMsRUEwQlgsT0EvQkFsRSxFQUFNMUYsVUFBVWd2QyxFQUFnQjNrQyxHQU9oQzJrQyxFQUFlenZDLFVBQVVYLE1BQVEsU0FBVTRWLEdBQ3ZDLE9BQUtBLEdBQVdBLEVBQVFnNUIsc0JBQ2J0dEMsS0FBS2d1QyxjQUdMaHVDLEtBQUtndUMsY0FBY3RhLFVBR2xDb2IsRUFBZXp2QyxVQUFVaXJCLFFBQVUsU0FBVWlCLEdBQ3pDLE9BQVFBLGFBQWlCdWpCLEdBQ3JCOXVDLEtBQUtndUMsY0FBYzFqQixRQUFRaUIsRUFBTXlpQixnQkFFekNjLEVBQWV6dkMsVUFBVStzQixVQUFZLFNBQVViLEdBQzNDLE9BQUlBLGFBQWlCdWpCLEVBQ1Y5dUMsS0FBS2d1QyxjQUFjeGlCLFdBQVdELEVBQU15aUIsZUFFdEN6aUIsYUFBaUJ3akIsSUFFZCxFQUdEL3VDLEtBQUs2dEMsaUJBQWlCdGlCLElBRzlCdWpCLEVBaEN3QixDQWlDakNsQixJQWVFbUIsR0FBc0MsU0FBVTVrQyxHQUVoRCxTQUFTNGtDLEVBQXFCL1YsRUFBZ0IxTSxHQUMxQyxJQUFJNWlCLEVBQVFTLEVBQU92TSxLQUFLb0MsT0FBU0EsS0FJakMsT0FIQTBKLEVBQU1zdkIsZUFBaUJBLEVBQ3ZCdHZCLEVBQU00aUIsY0FBZ0JBLEVBQ3RCNWlCLEVBQU1va0MsVUFBWXJELEdBQVVxRSxlQUNyQnBsQyxFQWtDWCxPQXhDQWxFLEVBQU0xRixVQUFVaXZDLEVBQXNCNWtDLEdBUXRDNGtDLEVBQXFCMXZDLFVBQVVYLE1BQVEsU0FBVTRWLEdBQzdDLE9BQUlBLEdBQ0FBLEVBQVErNEIsMEJBQTRCM0MsR0FBd0IrQyxTQUNyRCxJQUFJcUIsR0FBZTl1QyxLQUFLZzVCLGdCQUFnQnQ2QixNQUFNNFYsR0FFaERBLEdBQ0xBLEVBQVErNEIsMEJBQTRCM0MsR0FBd0JnRCxVQUNyRDF0QyxLQUFLc3NCLGNBQWdCdHNCLEtBQUtzc0IsY0FBYzV0QixNQUFNNFYsR0FHOUMsTUFHZnk2QixFQUFxQjF2QyxVQUFVaXJCLFFBQVUsU0FBVWlCLEdBQy9DLE9BQVFBLGFBQWlCd2pCLEdBQ3JCL3VDLEtBQUtnNUIsZUFBZTFPLFFBQVFpQixFQUFNeU4saUJBRTFDK1YsRUFBcUIxdkMsVUFBVStzQixVQUFZLFNBQVViLEdBQ2pELE9BQUlBLGFBQWlCd2pCLEVBQ1YvdUMsS0FBS2c1QixlQUFleE4sV0FBV0QsRUFBTXlOLGdCQUV2Q3pOLGFBQWlCdWpCLEdBRWYsRUFHQTl1QyxLQUFLNnRDLGlCQUFpQnRpQixJQUdyQ3dqQixFQUFxQjF2QyxVQUFVbU0sU0FBVyxXQUN0QyxNQUFPLDhCQUFnQ3hMLEtBQUtnNUIsZUFBZXh0QixXQUFhLEtBRXJFdWpDLEVBekM4QixDQTBDdkNuQixJQUNFb0IsR0FBMkIsU0FBVTdrQyxHQUVyQyxTQUFTNmtDLEVBQVVoQixHQUNmLElBQUl0a0MsRUFBUVMsRUFBT3ZNLEtBQUtvQyxPQUFTQSxLQUdqQyxPQUZBMEosRUFBTXNrQyxjQUFnQkEsRUFDdEJ0a0MsRUFBTW9rQyxVQUFZckQsR0FBVXVFLFVBQ3JCdGxDLEVBZVgsT0FwQkFsRSxFQUFNMUYsVUFBVWt2QyxFQUFXN2tDLEdBTzNCNmtDLEVBQVUzdkMsVUFBVVgsTUFBUSxTQUFVNFYsR0FDbEMsT0FBT3RVLEtBQUtndUMsZUFFaEJnQixFQUFVM3ZDLFVBQVVpckIsUUFBVSxTQUFVaUIsR0FDcEMsT0FBUUEsYUFBaUJ5akIsR0FDckJodkMsS0FBS2d1QyxjQUFjMWpCLFFBQVFpQixFQUFNeWlCLGdCQUV6Q2dCLEVBQVUzdkMsVUFBVStzQixVQUFZLFNBQVViLEdBQ3RDLE9BQUlBLGFBQWlCeWpCLEVBQ1ZodkMsS0FBS2d1QyxjQUFjeGlCLFdBQVdELEVBQU15aUIsZUFFeENodUMsS0FBSzZ0QyxpQkFBaUJ0aUIsSUFFMUJ5akIsRUFyQm1CLENBc0I1QnBCLElBQ0VxQixHQUEwQixTQUFVOWtDLEdBRXBDLFNBQVM4a0MsRUFBU3RqQixFQUFZM3NCLEdBQzFCLElBQUkwSyxFQUFRUyxFQUFPdk0sS0FBS29DLE9BQVNBLEtBSWpDLE9BSEEwSixFQUFNaWlCLFdBQWFBLEVBQ25CamlCLEVBQU0xSyxJQUFNQSxFQUNaMEssRUFBTW9rQyxVQUFZckQsR0FBVXdFLFNBQ3JCdmxDLEVBb0JYLE9BMUJBbEUsRUFBTTFGLFVBQVVtdkMsRUFBVTlrQyxHQVExQjhrQyxFQUFTNXZDLFVBQVVYLE1BQVEsU0FBVTRWLEdBQ2pDLE9BQU90VSxLQUFLaEIsS0FFaEJpd0MsRUFBUzV2QyxVQUFVaXJCLFFBQVUsU0FBVWlCLEdBQ25DLE9BQUlBLGFBQWlCMGpCLElBQ1RqdkMsS0FBS2hCLElBQUlzckIsUUFBUWlCLEVBQU12c0IsTUFBUWdCLEtBQUsyckIsV0FBV3JCLFFBQVFpQixFQUFNSSxjQU03RXNqQixFQUFTNXZDLFVBQVUrc0IsVUFBWSxTQUFVYixHQUNyQyxHQUFJQSxhQUFpQjBqQixFQUFVLENBQzNCLElBQUl2YSxFQUFNMTBCLEtBQUsyckIsV0FBV1MsVUFBVWIsRUFBTUksWUFDMUMsT0FBZSxJQUFSK0ksRUFBWUEsRUFBTXRGLEdBQVloQyxXQUFXcHRCLEtBQUtoQixJQUFLdXNCLEVBQU12c0IsS0FFcEUsT0FBT2dCLEtBQUs2dEMsaUJBQWlCdGlCLElBRTFCMGpCLEVBM0JrQixDQTRCM0JyQixJQUNFc0IsR0FBK0IsU0FBVS9rQyxHQUV6QyxTQUFTK2tDLEVBQWNsQixHQUNuQixJQUFJdGtDLEVBQVFTLEVBQU92TSxLQUFLb0MsT0FBU0EsS0FHakMsT0FGQTBKLEVBQU1za0MsY0FBZ0JBLEVBQ3RCdGtDLEVBQU1va0MsVUFBWXJELEdBQVV5RSxjQUNyQnhsQyxFQWVYLE9BcEJBbEUsRUFBTTFGLFVBQVVvdkMsRUFBZS9rQyxHQU8vQitrQyxFQUFjN3ZDLFVBQVVYLE1BQVEsU0FBVTRWLEdBQ3RDLE9BQU90VSxLQUFLZ3VDLGVBRWhCa0IsRUFBYzd2QyxVQUFVaXJCLFFBQVUsU0FBVWlCLEdBQ3hDLE9BQVFBLGFBQWlCMmpCLEdBQ3JCbHZDLEtBQUtndUMsY0FBYzFqQixRQUFRaUIsRUFBTXlpQixnQkFFekNrQixFQUFjN3ZDLFVBQVUrc0IsVUFBWSxTQUFVYixHQUMxQyxPQUFJQSxhQUFpQjJqQixFQUNWbHZDLEtBQUtndUMsY0FBY3hpQixXQUFXRCxFQUFNeWlCLGVBRXhDaHVDLEtBQUs2dEMsaUJBQWlCdGlCLElBRTFCMmpCLEVBckJ1QixDQXNCaEN0QixJQUNFM0IsR0FBNkIsU0FBVTloQyxHQUV2QyxTQUFTOGhDLEVBQVkrQixHQUNqQixJQUFJdGtDLEVBQVFTLEVBQU92TSxLQUFLb0MsT0FBU0EsS0FHakMsT0FGQTBKLEVBQU1za0MsY0FBZ0JBLEVBQ3RCdGtDLEVBQU1va0MsVUFBWXJELEdBQVV3QixZQUNyQnZpQyxFQXNJWCxPQTNJQWxFLEVBQU0xRixVQUFVbXNDLEVBQWE5aEMsR0FPN0I4aEMsRUFBWTVzQyxVQUFVWCxNQUFRLFNBQVU0VixHQUNwQyxJQUFJaFMsRUFBUyxHQUliLE9BSEF0QyxLQUFLZ3VDLGNBQWNsWixrQkFBaUIsU0FBVTkxQixFQUFLc1ksR0FDL0NoVixFQUFPdEQsR0FBT3NZLEVBQUk1WSxNQUFNNFYsTUFFckJoUyxHQUVYMnBDLEVBQVk1c0MsVUFBVW1TLFFBQVUsU0FBVXVqQixHQUN0Qy8wQixLQUFLZ3VDLGNBQWNsWixpQkFBaUJDLElBRXhDa1gsRUFBWTVzQyxVQUFVaXJCLFFBQVUsU0FBVWlCLEdBQ3RDLEdBQUlBLGFBQWlCMGdCLEVBQWEsQ0FHOUIsSUFGQSxJQUFJa0QsRUFBTW52QyxLQUFLZ3VDLGNBQWM5WSxjQUN6QmthLEVBQU03akIsRUFBTXlpQixjQUFjOVksY0FDdkJpYSxFQUFJeFosV0FBYXlaLEVBQUl6WixXQUFXLENBQ25DLElBQUkwWixFQUFRRixFQUFJelosVUFDWjRaLEVBQVFGLEVBQUkxWixVQUNoQixHQUFJMlosRUFBTXJ3QyxNQUFRc3dDLEVBQU10d0MsTUFBUXF3QyxFQUFNM3dDLE1BQU00ckIsUUFBUWdsQixFQUFNNXdDLE9BQ3RELE9BQU8sRUFHZixPQUFReXdDLEVBQUl4WixZQUFjeVosRUFBSXpaLFVBRWxDLE9BQU8sR0FFWHNXLEVBQVk1c0MsVUFBVStzQixVQUFZLFNBQVViLEdBQ3hDLEdBQUlBLGFBQWlCMGdCLEVBQWEsQ0FHOUIsSUFGQSxJQUFJa0QsRUFBTW52QyxLQUFLZ3VDLGNBQWM5WSxjQUN6QmthLEVBQU03akIsRUFBTXlpQixjQUFjOVksY0FDdkJpYSxFQUFJeFosV0FBYXlaLEVBQUl6WixXQUFXLENBQ25DLElBQUkwWixFQUFRRixFQUFJelosVUFDWjRaLEVBQVFGLEVBQUkxWixVQUNaaEIsRUFBTXhLLEVBQW9CbWxCLEVBQU1yd0MsSUFBS3N3QyxFQUFNdHdDLE1BQzNDcXdDLEVBQU0zd0MsTUFBTTB0QixVQUFVa2pCLEVBQU01d0MsT0FDaEMsR0FBSWcyQixFQUNBLE9BQU9BLEVBSWYsT0FBT3hLLEVBQW9CaWxCLEVBQUl4WixVQUFXeVosRUFBSXpaLFdBRzlDLE9BQU8zMUIsS0FBSzZ0QyxpQkFBaUJ0aUIsSUFHckMwZ0IsRUFBWTVzQyxVQUFVNlUsSUFBTSxTQUFVdWEsRUFBTThnQixHQUV4QyxHQURBMXBDLEdBQVE0b0IsRUFBS3plLFVBQVcsa0RBQ0osSUFBaEJ5ZSxFQUFLcHVCLE9BQ0wsT0FBT0wsS0FBS3d2QyxTQUFTL2dCLEVBQUtaLGVBQWdCMGhCLEdBRzFDLElBQUlsaUIsRUFBUXJ0QixLQUFLcXRCLE1BQU1vQixFQUFLWixnQkFDdEJSLGFBQWlCNGUsSUFDbkI1ZSxFQUFRNGUsRUFBWXJjLE9BRXhCLElBQUk2ZixFQUFXcGlCLEVBQU1uWixJQUFJdWEsRUFBS2YsV0FBWTZoQixHQUMxQyxPQUFPdnZDLEtBQUt3dkMsU0FBUy9nQixFQUFLWixlQUFnQjRoQixJQUdsRHhELEVBQVk1c0MsVUFBVTZWLE9BQVMsU0FBVXVaLEdBRXJDLEdBREE1b0IsR0FBUTRvQixFQUFLemUsVUFBVyxxREFDSixJQUFoQnllLEVBQUtwdUIsT0FDTCxPQUFPLElBQUk0ckMsRUFBWWpzQyxLQUFLZ3VDLGNBQWMxc0IsT0FBT21OLEVBQUtaLGlCQUl0RCxJQUFJUixFQUFRcnRCLEtBQUtxdEIsTUFBTW9CLEVBQUtaLGdCQUM1QixHQUFJUixhQUFpQjRlLEVBQWEsQ0FDOUIsSUFBSXdELEVBQVdwaUIsRUFBTW5ZLE9BQU91WixFQUFLZixZQUNqQyxPQUFPLElBQUl1ZSxFQUFZanNDLEtBQUtndUMsY0FBY2h0QixPQUFPeU4sRUFBS1osZUFBZ0I0aEIsSUFJdEUsT0FBT3p2QyxNQUluQmlzQyxFQUFZNXNDLFVBQVVvUSxTQUFXLFNBQVVnZixHQUN2QyxPQUE0QixPQUFyQnp1QixLQUFLcXFDLE1BQU01YixJQUV0QndkLEVBQVk1c0MsVUFBVWdyQyxNQUFRLFNBQVU1YixHQUNwQzVvQixHQUFRNG9CLEVBQUt6ZSxVQUFXLGlDQUN4QixJQUFJcTZCLEVBQVFycUMsS0FTWixPQVJBeXVCLEVBQUtqZCxTQUFRLFNBQVVrK0IsR0FFZnJGLEVBREFBLGFBQWlCNEIsRUFDVDVCLEVBQU0yRCxjQUFjMXZDLElBQUlveEMsR0FHeEIsUUFHVHJGLEdBTVg0QixFQUFZNXNDLFVBQVV1c0MsVUFBWSxXQUM5QixJQUFJL0IsRUFBUyxJQUFJOVMsR0FBVW5JLEdBQVV4QixZQXNCckMsT0FyQkFwdEIsS0FBS2d1QyxjQUFjeDhCLFNBQVEsU0FBVXhTLEVBQUtOLEdBQ3RDLElBQUlpeEMsRUFBYyxJQUFJL2dCLEdBQVUsQ0FBQzV2QixJQUNqQyxHQUFJTixhQUFpQnV0QyxFQUFhLENBQzlCLElBQ0kyRCxFQURhbHhDLEVBQU1rdEMsWUFDTy9CLE9BQzFCK0YsRUFBYTUvQixVQUViNjVCLEVBQVNBLEVBQU81UyxJQUFJMFksR0FLcEJDLEVBQWFwK0IsU0FBUSxTQUFVcStCLEdBQzNCaEcsRUFBU0EsRUFBTzVTLElBQUkwWSxFQUFZdGlCLE1BQU13aUIsWUFLOUNoRyxFQUFTQSxFQUFPNVMsSUFBSTBZLE1BR3JCL0YsR0FBVUUsUUFBUUQsSUFFN0JvQyxFQUFZNXNDLFVBQVVtTSxTQUFXLFdBQzdCLE9BQU94TCxLQUFLZ3VDLGNBQWN4aUMsWUFFOUJ5Z0MsRUFBWTVzQyxVQUFVZ3VCLE1BQVEsU0FBVXlpQixHQUNwQyxPQUFPOXZDLEtBQUtndUMsY0FBYzF2QyxJQUFJd3hDLFNBQWN2bUMsR0FFaEQwaUMsRUFBWTVzQyxVQUFVbXdDLFNBQVcsU0FBVU0sRUFBV3B4QyxHQUNsRCxPQUFPLElBQUl1dEMsRUFBWWpzQyxLQUFLZ3VDLGNBQWNodEIsT0FBTzh1QixFQUFXcHhDLEtBRWhFdXRDLEVBQVlyYyxNQUFRLElBQUlxYyxFQUFZLElBQUk3WCxHQUFVbEssSUFDM0MraEIsRUE1SXFCLENBNkk5QjJCLElBQ0VtQyxHQUE0QixTQUFVNWxDLEdBRXRDLFNBQVM0bEMsRUFBVy9CLEdBQ2hCLElBQUl0a0MsRUFBUVMsRUFBT3ZNLEtBQUtvQyxPQUFTQSxLQUdqQyxPQUZBMEosRUFBTXNrQyxjQUFnQkEsRUFDdEJ0a0MsRUFBTW9rQyxVQUFZckQsR0FBVXNGLFdBQ3JCcm1DLEVBcURYLE9BMURBbEUsRUFBTTFGLFVBQVVpd0MsRUFBWTVsQyxHQU81QjRsQyxFQUFXMXdDLFVBQVVYLE1BQVEsU0FBVTRWLEdBQ25DLE9BQU90VSxLQUFLZ3VDLGNBQWMvOEIsS0FBSSxTQUFVNU4sR0FBSyxPQUFPQSxFQUFFM0UsTUFBTTRWLE9BS2hFeTdCLEVBQVcxd0MsVUFBVW9RLFNBQVcsU0FBVS9RLEdBQ3RDLElBQUssSUFBSWlNLEVBQUssRUFBR00sRUFBS2pMLEtBQUtndUMsY0FBZXJqQyxFQUFLTSxFQUFHNUssT0FBUXNLLElBQU0sQ0FFNUQsR0FEY00sRUFBR04sR0FDTDJmLFFBQVE1ckIsR0FDaEIsT0FBTyxFQUdmLE9BQU8sR0FFWHF4QyxFQUFXMXdDLFVBQVVtUyxRQUFVLFNBQVV1akIsR0FDckMvMEIsS0FBS2d1QyxjQUFjeDhCLFFBQVF1akIsSUFFL0JnYixFQUFXMXdDLFVBQVVpckIsUUFBVSxTQUFVaUIsR0FDckMsR0FBSUEsYUFBaUJ3a0IsRUFBWSxDQUM3QixHQUFJL3ZDLEtBQUtndUMsY0FBYzN0QyxTQUFXa3JCLEVBQU15aUIsY0FBYzN0QyxPQUNsRCxPQUFPLEVBRVgsSUFBSyxJQUFJNUMsRUFBSSxFQUFHQSxFQUFJdUMsS0FBS2d1QyxjQUFjM3RDLE9BQVE1QyxJQUMzQyxJQUFLdUMsS0FBS2d1QyxjQUFjdndDLEdBQUc2c0IsUUFBUWlCLEVBQU15aUIsY0FBY3Z3QyxJQUNuRCxPQUFPLEVBR2YsT0FBTyxFQUVYLE9BQU8sR0FFWHN5QyxFQUFXMXdDLFVBQVUrc0IsVUFBWSxTQUFVYixHQUN2QyxHQUFJQSxhQUFpQndrQixFQUFZLENBRTdCLElBREEsSUFBSUMsRUFBWXAvQixLQUFLeWQsSUFBSXJ1QixLQUFLZ3VDLGNBQWMzdEMsT0FBUWtyQixFQUFNeWlCLGNBQWMzdEMsUUFDL0Q1QyxFQUFJLEVBQUdBLEVBQUl1eUMsRUFBV3Z5QyxJQUFLLENBQ2hDLElBQUlpM0IsRUFBTTEwQixLQUFLZ3VDLGNBQWN2d0MsR0FBRzJ1QixVQUFVYixFQUFNeWlCLGNBQWN2d0MsSUFDOUQsR0FBSWkzQixFQUNBLE9BQU9BLEVBR2YsT0FBT3hLLEVBQW9CbHFCLEtBQUtndUMsY0FBYzN0QyxPQUFRa3JCLEVBQU15aUIsY0FBYzN0QyxRQUcxRSxPQUFPTCxLQUFLNnRDLGlCQUFpQnRpQixJQUdyQ3drQixFQUFXMXdDLFVBQVVtTSxTQUFXLFdBRTVCLE1BQU8sSUFEWXhMLEtBQUtndUMsY0FBYy84QixLQUFJLFNBQVU1TixHQUFLLE9BQU9BLEVBQUVtSSxjQUN4QzFELEtBQUssS0FBTyxLQUVuQ2lvQyxFQTNEb0IsQ0E0RDdCbkMsSUFzQkVxQyxHQUErQixXQUMvQixTQUFTQSxFQUFjanhDLEVBQUtzWCxHQUN4QnRXLEtBQUtoQixJQUFNQSxFQUNYZ0IsS0FBS3NXLFFBQVVBLEVBS25CLE9BSEEyNUIsRUFBY0MsYUFBZSxTQUFVQyxFQUFJQyxHQUN2QyxPQUFPaGhCLEdBQVloQyxXQUFXK2lCLEVBQUdueEMsSUFBS294QyxFQUFHcHhDLE1BRXRDaXhDLEVBUnVCLEdBYzlCbEYsR0FBMEIsU0FBVTVnQyxHQUVwQyxTQUFTNGdDLEVBQVMvckMsRUFBS3NYLEVBQVNoQyxFQUFTKzdCLEVBQWFDLEVBQU9DLEdBQ3pELElBQUk3bUMsRUFBUVMsRUFBT3ZNLEtBQUtvQyxLQUFNaEIsRUFBS3NYLElBQVl0VyxLQVEvQyxPQVBBMEosRUFBTTJtQyxZQUFjQSxFQUNwQjNtQyxFQUFNNG1DLE1BQVFBLEVBQ2Q1bUMsRUFBTTZtQyxVQUFZQSxFQUNsQjFxQyxPQUE2QjBELElBQXRCRyxFQUFNMm1DLGtCQUNROW1DLElBQWhCRyxFQUFNNG1DLFlBQTJDL21DLElBQXBCRyxFQUFNNm1DLFVBQTBCLHNFQUNsRTdtQyxFQUFNK2hDLG9CQUFzQm4zQixFQUFRbTNCLGtCQUNwQy9oQyxFQUFNOGhDLHdCQUEwQmwzQixFQUFRazNCLHNCQUNqQzloQyxFQStGWCxPQXpHQWxFLEVBQU0xRixVQUFVaXJDLEVBQVU1Z0MsR0FZMUI0Z0MsRUFBUzFyQyxVQUFVZ3JDLE1BQVEsU0FBVTViLEdBQ2pDLEdBQUl6dUIsS0FBS3F3QyxZQUNMLE9BQU9yd0MsS0FBS3F3QyxZQUFZaEcsTUFBTTViLEdBR3pCenVCLEtBQUt3d0Msa0JBR054d0MsS0FBS3d3QyxnQkFBa0IsSUFBSTc4QixLQUUvQixJQUFJODhCLEVBQWdCaGlCLEVBQUtGLGtCQUNyQm1pQixFQUFhMXdDLEtBQUt3d0MsZ0JBQWdCbHlDLElBQUlteUMsR0FDMUMsUUFBbUJsbkMsSUFBZm1uQyxFQUEwQixDQUsxQixJQUFJQyxFQUFhM3dDLEtBQUs0d0MsY0FBY25pQixHQUVoQ2lpQixPQURlbm5DLElBQWZvbkMsRUFDYSxLQUdBM3dDLEtBQUt1d0MsVUFBVUksR0FFaEMzd0MsS0FBS3d3QyxnQkFBZ0J0OEIsSUFBSXU4QixFQUFlQyxHQUU1QyxPQUFPQSxHQUdmM0YsRUFBUzFyQyxVQUFVcUwsS0FBTyxXQUN0QixJQUFJaEIsRUFBUTFKLEtBQ1osSUFBS0EsS0FBS3F3QyxZQUFhLENBQ25CLElBQUlRLEVBQVc1RSxHQUFZcmMsTUFDM0JwZSxFQUFReFIsS0FBS3N3QyxNQUFNekcsUUFBVSxJQUFJLFNBQVU3cUMsRUFBS04sR0FDNUNteUMsRUFBV0EsRUFBUzM4QixJQUFJLElBQUkwYSxHQUFVLENBQUM1dkIsSUFBTzBLLEVBQU02bUMsVUFBVTd4QyxPQUVsRXNCLEtBQUtxd0MsWUFBY1EsRUFHbkI3d0MsS0FBS3d3QyxxQkFBa0JqbkMsRUFFM0IsT0FBT3ZKLEtBQUtxd0MsYUFFaEJ0RixFQUFTMXJDLFVBQVVYLE1BQVEsV0FDdkIsT0FBT3NCLEtBQUswSyxPQUFPaE0sU0FFdkJxc0MsRUFBUzFyQyxVQUFVaXJCLFFBQVUsU0FBVWlCLEdBQ25DLE9BQVFBLGFBQWlCd2YsR0FDckIvcUMsS0FBS2hCLElBQUlzckIsUUFBUWlCLEVBQU12c0IsTUFDdkJnQixLQUFLc1csUUFBUWdVLFFBQVFpQixFQUFNalYsVUFDM0J0VyxLQUFLeXJDLG9CQUFzQmxnQixFQUFNa2dCLG1CQUNqQ3pyQyxLQUFLd3JDLHdCQUEwQmpnQixFQUFNaWdCLHVCQUNyQ3hyQyxLQUFLMEssT0FBTzRmLFFBQVFpQixFQUFNN2dCLFNBRWxDcWdDLEVBQVMxckMsVUFBVW1NLFNBQVcsV0FDMUIsTUFBUSxZQUFjeEwsS0FBS2hCLElBQU0sS0FBT2dCLEtBQUtzVyxRQUFVLEtBQU90VyxLQUFLMEssT0FBT2MsV0FBYSx5QkFDekR4TCxLQUFLeXJDLGtCQUFvQiwrQkFDckJ6ckMsS0FBS3dyQyxzQkFBd0IsTUFFbkVydEMsT0FBT0MsZUFBZTJzQyxFQUFTMXJDLFVBQVcsbUJBQW9CLENBQzFEZixJQUFLLFdBQ0QsT0FBTzBCLEtBQUt5ckMsbUJBQXFCenJDLEtBQUt3ckMsdUJBRTFDbnRDLFlBQVksRUFDWmtaLGNBQWMsSUFNbEJ3ekIsRUFBUzFyQyxVQUFVdXhDLGNBQWdCLFNBQVVuaUIsR0FDekM1b0IsT0FBc0IwRCxJQUFmdkosS0FBS3N3QyxNQUFxQix1REFJakMsSUFIQSxJQUFJSyxFQUFhM3dDLEtBQUtzd0MsTUFBTXpHLE9BQ3RCN3BDLEtBQUtzd0MsTUFBTXpHLE9BQU9wYixFQUFLWixxQkFDdkJ0a0IsRUFDRzlMLEVBQUksRUFBR0EsRUFBSWd4QixFQUFLcHVCLFNBQVU1QyxFQUFHLENBQ2xDLElBQUtrekMsSUFBZUEsRUFBV0csV0FBYUgsRUFBV0csU0FBU2pILE9BQzVELE9BRUo4RyxFQUFhQSxFQUFXRyxTQUFTakgsT0FBT3BiLEVBQUtud0IsSUFBSWIsSUFFckQsT0FBT2t6QyxHQUVYNUYsRUFBU2dHLGVBQWlCLFNBQVUxRyxFQUFPOEYsRUFBSUMsR0FDM0MsSUFBSVksRUFBS2IsRUFBRzlGLE1BQU1BLEdBQ2Q0RyxFQUFLYixFQUFHL0YsTUFBTUEsR0FDbEIsT0FBVyxPQUFQMkcsR0FBc0IsT0FBUEMsRUFDUkQsRUFBRzVrQixVQUFVNmtCLEdBR2Jwc0IsRUFBSywyREFHYmttQixFQTFHa0IsQ0EyRzNCa0YsSUFNRTlDLEdBQTRCLFNBQVVoakMsR0FFdEMsU0FBU2dqQyxFQUFXbnVDLEVBQUtzWCxFQUFTaEMsR0FDOUIsSUFBSTVLLEVBQVFTLEVBQU92TSxLQUFLb0MsS0FBTWhCLEVBQUtzWCxJQUFZdFcsS0FFL0MsT0FEQTBKLEVBQU04aEMseUJBQTJCbDNCLElBQVdBLEVBQVFrM0IsdUJBQzdDOWhDLEVBa0JYLE9BdEJBbEUsRUFBTTFGLFVBQVVxdEMsRUFBWWhqQyxHQU01QmdqQyxFQUFXOXRDLFVBQVVtTSxTQUFXLFdBQzVCLE1BQU8sY0FBZ0J4TCxLQUFLaEIsSUFBTSxLQUFPZ0IsS0FBS3NXLFFBQVUsS0FFNURuWSxPQUFPQyxlQUFlK3VDLEVBQVc5dEMsVUFBVyxtQkFBb0IsQ0FDNURmLElBQUssV0FDRCxPQUFPMEIsS0FBS3dyQyx1QkFFaEJudEMsWUFBWSxFQUNaa1osY0FBYyxJQUVsQjQxQixFQUFXOXRDLFVBQVVpckIsUUFBVSxTQUFVaUIsR0FDckMsT0FBUUEsYUFBaUI0aEIsR0FDckI1aEIsRUFBTWlnQix3QkFBMEJ4ckMsS0FBS3dyQyx1QkFDckNqZ0IsRUFBTWpWLFFBQVFnVSxRQUFRdHFCLEtBQUtzVyxVQUMzQmlWLEVBQU12c0IsSUFBSXNyQixRQUFRdHFCLEtBQUtoQixNQUV4Qm11QyxFQXZCb0IsQ0F3QjdCOEMsSUFLRW5FLEdBQWlDLFNBQVUzaEMsR0FFM0MsU0FBUzJoQyxJQUNMLE9BQWtCLE9BQVgzaEMsR0FBbUJBLEVBQU83SixNQUFNTixLQUFNSSxZQUFjSixLQWlCL0QsT0FuQkF3RixFQUFNMUYsVUFBVWdzQyxFQUFpQjNoQyxHQUlqQzJoQyxFQUFnQnpzQyxVQUFVbU0sU0FBVyxXQUNqQyxNQUFPLG1CQUFxQnhMLEtBQUtoQixJQUFNLEtBQU9nQixLQUFLc1csUUFBVSxLQUVqRW5ZLE9BQU9DLGVBQWUwdEMsRUFBZ0J6c0MsVUFBVyxtQkFBb0IsQ0FDakVmLElBQUssV0FDRCxPQUFPLEdBRVhELFlBQVksRUFDWmtaLGNBQWMsSUFFbEJ1MEIsRUFBZ0J6c0MsVUFBVWlyQixRQUFVLFNBQVVpQixHQUMxQyxPQUFRQSxhQUFpQnVnQixHQUNyQnZnQixFQUFNalYsUUFBUWdVLFFBQVF0cUIsS0FBS3NXLFVBQzNCaVYsRUFBTXZzQixJQUFJc3JCLFFBQVF0cUIsS0FBS2hCLE1BRXhCOHNDLEVBcEJ5QixDQXFCbENtRSxJQXdCRWlCLEdBQTJCLFdBQzNCLFNBQVNBLEVBQVVDLEdBQ2ZueEMsS0FBS214QyxTQUFXQSxFQU9oQm54QyxLQUFLb3hDLE1BQVEsR0FxRWpCLE9BbEVBRixFQUFVN3hDLFVBQVVmLElBQU0sU0FBVVUsR0FDaEMsSUFBSWtoQixFQUFLbGdCLEtBQUtteEMsU0FBU255QyxHQUNuQnF5QyxFQUFVcnhDLEtBQUtveEMsTUFBTWx4QixHQUN6QixRQUFnQjNXLElBQVo4bkMsRUFHSixJQUFLLElBQUkxbUMsRUFBSyxFQUFHMm1DLEVBQVlELEVBQVMxbUMsRUFBSzJtQyxFQUFVanhDLE9BQVFzSyxJQUFNLENBQy9ELElBQUlNLEVBQUtxbUMsRUFBVTNtQyxHQUFLNG1DLEVBQVd0bUMsRUFBRyxHQUFJdk0sRUFBUXVNLEVBQUcsR0FDckQsR0FBSXNtQyxFQUFTam5CLFFBQVF0ckIsR0FDakIsT0FBT04sSUFLbkJ3eUMsRUFBVTd4QyxVQUFVMlUsSUFBTSxTQUFVaFYsR0FDaEMsWUFBeUJ1SyxJQUFsQnZKLEtBQUsxQixJQUFJVSxJQUdwQmt5QyxFQUFVN3hDLFVBQVU2VSxJQUFNLFNBQVVsVixFQUFLTixHQUNyQyxJQUFJd2hCLEVBQUtsZ0IsS0FBS214QyxTQUFTbnlDLEdBQ25CcXlDLEVBQVVyeEMsS0FBS294QyxNQUFNbHhCLEdBQ3pCLFFBQWdCM1csSUFBWjhuQyxFQUFKLENBSUEsSUFBSyxJQUFJNXpDLEVBQUksRUFBR0EsRUFBSTR6QyxFQUFRaHhDLE9BQVE1QyxJQUNoQyxHQUFJNHpDLEVBQVE1ekMsR0FBRyxHQUFHNnNCLFFBQVF0ckIsR0FFdEIsWUFEQXF5QyxFQUFRNXpDLEdBQUssQ0FBQ3VCLEVBQUtOLElBSTNCMnlDLEVBQVE1dEMsS0FBSyxDQUFDekUsRUFBS04sU0FUZnNCLEtBQUtveEMsTUFBTWx4QixHQUFNLENBQUMsQ0FBQ2xoQixFQUFLTixLQWNoQ3d5QyxFQUFVN3hDLFVBQVU2VixPQUFTLFNBQVVsVyxHQUNuQyxJQUFJa2hCLEVBQUtsZ0IsS0FBS214QyxTQUFTbnlDLEdBQ25CcXlDLEVBQVVyeEMsS0FBS294QyxNQUFNbHhCLEdBQ3pCLFFBQWdCM1csSUFBWjhuQyxFQUNBLE9BQU8sRUFFWCxJQUFLLElBQUk1ekMsRUFBSSxFQUFHQSxFQUFJNHpDLEVBQVFoeEMsT0FBUTVDLElBQ2hDLEdBQUk0ekMsRUFBUTV6QyxHQUFHLEdBQUc2c0IsUUFBUXRyQixHQU90QixPQU51QixJQUFuQnF5QyxFQUFRaHhDLGNBQ0RMLEtBQUtveEMsTUFBTWx4QixHQUdsQm14QixFQUFRMXVCLE9BQU9sbEIsRUFBRyxJQUVmLEVBR2YsT0FBTyxHQUVYeXpDLEVBQVU3eEMsVUFBVW1TLFFBQVUsU0FBVTVDLEdBQ3BDNEMsRUFBUXhSLEtBQUtveEMsT0FBTyxTQUFVdHVDLEVBQUc2TyxHQUM3QixJQUFLLElBQUloSCxFQUFLLEVBQUc2bUMsRUFBWTcvQixFQUFTaEgsRUFBSzZtQyxFQUFVbnhDLE9BQVFzSyxJQUFNLENBQy9ELElBQUlNLEVBQUt1bUMsRUFBVTdtQyxHQUFLeEcsRUFBSThHLEVBQUcsR0FBSTVILEVBQUk0SCxFQUFHLEdBQzFDMkQsRUFBR3pLLEVBQUdkLFFBSWxCNnRDLEVBQVU3eEMsVUFBVTJRLFFBQVUsV0FDMUIsT0FBT0EsRUFBUWhRLEtBQUtveEMsUUFFakJGLEVBOUVtQixHQStHMUJPLEdBQTRDLFdBQzVDLFNBQVNBLElBR0x6eEMsS0FBSzB4QyxRQUFVLElBQUlSLElBQVUsU0FBVWx5QyxHQUFPLE9BQU9BLEVBQUl3TSxjQUN6RHhMLEtBQUsyeEMsZ0JBQWlCLEVBeUYxQixPQXZGQXh6QyxPQUFPQyxlQUFlcXpDLEVBQTJCcHlDLFVBQVcsV0FBWSxDQUNwRWYsSUFBSyxXQUVELE9BREF1SCxPQUEwQjBELElBQW5CdkosS0FBSzR4QyxVQUF5QixxR0FDOUI1eEMsS0FBSzR4QyxXQUVoQjE5QixJQUFLLFNBQVV4VixHQUlYbUgsT0FBMEIwRCxJQUFuQnZKLEtBQUs0eEMsV0FBMkI1eEMsS0FBSzR4QyxVQUFVdG5CLFFBQVE1ckIsR0FBUSw0RUFDdEVzQixLQUFLNHhDLFVBQVlsekMsR0FFckJMLFlBQVksRUFDWmtaLGNBQWMsSUFRbEJrNkIsRUFBMkJweUMsVUFBVXd5QyxTQUFXLFNBQVVDLEVBQWVDLEdBQ3JFL3hDLEtBQUtneUMsbUJBQ0xoeUMsS0FBSyt4QyxTQUFXQSxFQUNoQi94QyxLQUFLMHhDLFFBQVF4OUIsSUFBSTQ5QixFQUFjOXlDLElBQUs4eUMsSUFReENMLEVBQTJCcHlDLFVBQVU0eUMsWUFBYyxTQUFVanpDLEVBQUsreUMsR0FDOUQveEMsS0FBS2d5QyxtQkFDREQsSUFDQS94QyxLQUFLK3hDLFNBQVdBLEdBRXBCL3hDLEtBQUsweEMsUUFBUXg5QixJQUFJbFYsRUFBSyxPQWExQnl5QyxFQUEyQnB5QyxVQUFVNnlDLFNBQVcsU0FBVS8wQixFQUFhNm1CLEdBQ25FaGtDLEtBQUtneUMsbUJBQ0wsSUFBSUcsRUFBZ0JueUMsS0FBSzB4QyxRQUFRcHpDLElBQUkwbEMsR0FDckMsWUFBc0J6NkIsSUFBbEI0b0MsRUFDTzVYLEdBQW1CdjRCLFFBQVFtd0MsR0FHM0JueUMsS0FBS295QyxhQUFhajFCLEVBQWE2bUIsSUFjOUN5TixFQUEyQnB5QyxVQUFVZ3pDLFdBQWEsU0FBVWwxQixFQUFhb25CLEdBQ3JFLE9BQU92a0MsS0FBS3N5QyxnQkFBZ0JuMUIsRUFBYW9uQixJQU03Q2tOLEVBQTJCcHlDLFVBQVVpQixNQUFRLFNBQVU2YyxHQUduRCxPQUZBbmQsS0FBS2d5QyxtQkFDTGh5QyxLQUFLMnhDLGdCQUFpQixFQUNmM3hDLEtBQUt1eUMsYUFBYXAxQixJQUc3QnMwQixFQUEyQnB5QyxVQUFVMnlDLGlCQUFtQixXQUNwRG5zQyxHQUFRN0YsS0FBSzJ4QyxlQUFnQix1Q0FFMUJGLEVBOUZvQyxHQWlIM0NlLEdBQThDLFdBSzlDLFNBQVNBLEVBQTZCMVIsRUFBWUMsR0FDOUMvZ0MsS0FBSzhnQyxXQUFhQSxFQUNsQjlnQyxLQUFLK2dDLGFBQWVBLEVBb1d4QixPQTVWQXlSLEVBQTZCbnpDLFVBQVV3eUMsU0FBVyxTQUFVMTBCLEVBQWFuZSxFQUFLdXRDLEdBRTFFLE9BRG9Ca0csR0FBcUJ0MUIsR0FDcEJnaUIsSUFBSXVULEdBQU0xekMsR0FBTXV0QyxJQVF6Q2lHLEVBQTZCbnpDLFVBQVU0eUMsWUFBYyxTQUFVOTBCLEVBQWE2bUIsR0FDeEUsSUFBSXZuQixFQUFRZzJCLEdBQXFCdDFCLEdBQzdCbmUsRUFBTTB6QyxHQUFNMU8sR0FDaEIsT0FBT3ZuQixFQUFNdkgsT0FBT2xXLElBUXhCd3pDLEVBQTZCbnpDLFVBQVVzekMsZUFBaUIsU0FBVXgxQixFQUFheTFCLEdBQzNFLElBQUlscEMsRUFBUTFKLEtBQ1osT0FBT0EsS0FBSzZ5QyxZQUFZMTFCLEdBQWEvYSxNQUFLLFNBQVVYLEdBRWhELE9BREFBLEVBQVNxeEMsVUFBWUYsRUFDZGxwQyxFQUFNcXBDLFlBQVk1MUIsRUFBYTFiLE9BRzlDK3dDLEVBQTZCbnpDLFVBQVU2eUMsU0FBVyxTQUFVLzBCLEVBQWE2bUIsR0FDckUsSUFBSXQ2QixFQUFRMUosS0FDWixPQUFPeXlDLEdBQXFCdDFCLEdBQ3ZCN2UsSUFBSW8wQyxHQUFNMU8sSUFDVjVoQyxNQUFLLFNBQVU0d0MsR0FDaEIsT0FBT3RwQyxFQUFNdXBDLG9CQUFvQkQsT0FTekNSLEVBQTZCbnpDLFVBQVU2ekMsY0FBZ0IsU0FBVS8xQixFQUFhNm1CLEdBQzFFLElBQUl0NkIsRUFBUTFKLEtBQ1osT0FBT3l5QyxHQUFxQnQxQixHQUN2QjdlLElBQUlvMEMsR0FBTTFPLElBQ1Y1aEMsTUFBSyxTQUFVNHdDLEdBQ2hCLElBQUl6RyxFQUFNN2lDLEVBQU11cEMsb0JBQW9CRCxHQUNwQyxPQUFPekcsRUFDRCxDQUNFdUYsY0FBZXZGLEVBQ2Y1ZSxLQUFNd2xCLEdBQWVILElBRXZCLFNBR2RSLEVBQTZCbnpDLFVBQVVnekMsV0FBYSxTQUFVbDFCLEVBQWFvbkIsR0FDdkUsSUFBSTc2QixFQUFRMUosS0FDUnFwQixFQUFVK08sS0FDZCxPQUFPcDRCLEtBQUtvekMsZUFBZWoyQixFQUFhb25CLEdBQWMsU0FBVXZsQyxFQUFLZzBDLEdBQ2pFLElBQUl6RyxFQUFNN2lDLEVBQU11cEMsb0JBQW9CRCxHQUNwQzNwQixFQUFVQSxFQUFRckksT0FBT2hpQixFQUFLdXRDLE1BQy9CbnFDLE1BQUssV0FBYyxPQUFPaW5CLE1BVWpDbXBCLEVBQTZCbnpDLFVBQVVnMEMsZ0JBQWtCLFNBQVVsMkIsRUFBYW9uQixHQUM1RSxJQUFJNzZCLEVBQVExSixLQUNScXBCLEVBQVUrTyxLQUNWa2IsRUFBVSxJQUFJbGYsR0FBVWhGLEdBQVloQyxZQUN4QyxPQUFPcHRCLEtBQUtvekMsZUFBZWoyQixFQUFhb25CLEdBQWMsU0FBVXZsQyxFQUFLZzBDLEdBQ2pFLElBQUl6RyxFQUFNN2lDLEVBQU11cEMsb0JBQW9CRCxHQUNoQ3pHLEdBQ0FsakIsRUFBVUEsRUFBUXJJLE9BQU9oaUIsRUFBS3V0QyxHQUM5QitHLEVBQVVBLEVBQVF0eUIsT0FBT2hpQixFQUFLbTBDLEdBQWVILE1BRzdDM3BCLEVBQVVBLEVBQVFySSxPQUFPaGlCLEVBQUssTUFDOUJzMEMsRUFBVUEsRUFBUXR5QixPQUFPaGlCLEVBQUssT0FFbkNvRCxNQUFLLFdBQ0osTUFBTyxDQUFFbXhDLGVBQWdCbHFCLEVBQVNpcUIsUUFBU0EsT0FHbkRkLEVBQTZCbnpDLFVBQVUrekMsZUFBaUIsU0FBVWoyQixFQUFhb25CLEVBQWMxNkIsR0FDekYsR0FBSTA2QixFQUFhdjBCLFVBQ2IsT0FBT3VxQixHQUFtQnY0QixVQUU5QixJQUFJdTFCLEVBQVFpSyxZQUFZQyxNQUFNOEMsRUFBYXBOLFFBQVExSSxLQUFLeFQsVUFBV3NwQixFQUFhbk4sT0FBTzNJLEtBQUt4VCxXQUN4RnU0QixFQUFValAsRUFBYXJQLGNBQ3ZCeUosRUFBVTZVLEVBQVE5ZCxVQUN0QixPQUFPK2MsR0FBcUJ0MUIsR0FDdkJ1aUIsUUFBUSxDQUFFbkksTUFBT0EsSUFBUyxTQUFVa2MsRUFBaUJULEVBQWF2VCxHQUduRSxJQUZBLElBQUlpVSxFQUFldGtCLEdBQVlNLGFBQWErakIsR0FFckM5VSxHQUFXdlAsR0FBWWhDLFdBQVd1UixFQUFTK1UsR0FBZ0IsR0FDOUQ3cEMsRUFBUzgwQixFQUFTLE1BQ2xCQSxFQUFVNlUsRUFBUTlkLFVBRWxCaUosR0FBV0EsRUFBUXJVLFFBQVFvcEIsS0FFM0I3cEMsRUFBUzgwQixFQUFTcVUsR0FDbEJyVSxFQUFVNlUsRUFBUTdkLFVBQVk2ZCxFQUFROWQsVUFBWSxNQUdsRGlKLEVBQ0FjLEVBQVFiLEtBQUtELEVBQVFsUSxLQUFLeFQsV0FHMUJ3a0IsRUFBUWw5QixVQUdYSCxNQUFLLFdBR04sS0FBT3U4QixHQUNIOTBCLEVBQVM4MEIsRUFBUyxNQUNsQkEsRUFBVTZVLEVBQVE3ZCxVQUFZNmQsRUFBUTlkLFVBQVksU0FJOUQ4YyxFQUE2Qm56QyxVQUFVczBDLDBCQUE0QixTQUFVeDJCLEVBQWFlLEVBQU8wMUIsR0FDN0YsSUFBSWxxQyxFQUFRMUosS0FDWjZGLEdBQVFxWSxFQUFNMm1CLHlCQUEwQixtRUFDeEMsSUFBSXhiLEVBQVVpUCxLQUNWdWIsRUFBOEIzMUIsRUFBTXVRLEtBQUtwdUIsT0FBUyxFQUNsRHl6QyxFQUFtQixHQUN2QixHQUFJRixFQUFjdHBCLFFBQVFzSixHQUFnQkssS0FBTSxDQUc1QyxJQUFJc0IsRUFBV3JYLEVBQU11USxLQUFLeFQsVUFDMUI2NEIsRUFBaUJ2YyxNQUFRaUssWUFBWWlDLFdBQVdsTyxPQUUvQyxDQUlELElBQUl3ZSxFQUFnQjcxQixFQUFNdVEsS0FBS3hULFVBQzNCKzRCLEVBQWNoMEMsS0FBSzhnQyxXQUFXbVQsaUJBQWlCTCxHQUNuREUsRUFBaUJ2YyxNQUFRaUssWUFBWWlDLFdBQVcsQ0FBQ3NRLEVBQWVDLElBQ3BELEdBQ1pGLEVBQWlCMzNCLE1BQVErM0IsR0FBaUJDLHdCQUU5QyxPQUFPMUIsR0FBcUJ0MUIsR0FDdkJ1aUIsUUFBUW9VLEdBQWtCLFNBQVU5MEMsRUFBS2cwQyxFQUFhdlQsR0FNdkQsR0FBSXpnQyxFQUFJcUIsU0FBV3d6QyxFQUFuQixDQUdBLElBQUl4YSxFQUFXM3ZCLEVBQU1vM0IsV0FBV3NULHFCQUFxQnBCLEdBQ2hEOTBCLEVBQU11USxLQUFLVixXQUFXc0wsRUFBU3I2QixJQUFJeXZCLE1BRy9CNEssYUFBb0IwUixJQUFZN3NCLEVBQU1tekIsUUFBUWhZLEtBQ25EaFEsRUFBVUEsRUFBUXJJLE9BQU9xWSxFQUFTcjZCLElBQUtxNkIsSUFIdkNvRyxFQUFRbDlCLFdBTVhILE1BQUssV0FBYyxPQUFPaW5CLE1BT25DbXBCLEVBQTZCbnpDLFVBQVVnMUMsc0JBQXdCLFNBQVVsM0IsRUFBYXkyQixHQUNsRixJQUFJbHFDLEVBQVExSixLQUNSczBDLEVBQWNuYyxLQUNkb2MsRUFBZXYwQyxLQUFLOGdDLFdBQVdtVCxpQkFBaUJMLEdBQ2hEWSxFQUFpQi9CLEdBQXFCdDFCLEdBQ3RDb2EsRUFBUWlLLFlBQVlpQyxXQUFXOFEsR0FBYyxHQUNqRCxPQUFPQyxFQUNGOVUsUUFBUSxDQUFFdmpCLE1BQU8rM0IsR0FBaUJPLGNBQWVsZCxNQUFPQSxJQUFTLFNBQVV6MEIsRUFBR2t3QyxHQUcvRSxJQUFJekcsRUFBTTdpQyxFQUFNbzNCLFdBQVdzVCxxQkFBcUJwQixHQUNoRHNCLEVBQWNBLEVBQVl0ekIsT0FBT3VyQixFQUFJdnRDLElBQUt1dEMsR0FDMUNnSSxFQUFldkIsRUFBWWpCLFlBRTFCM3ZDLE1BQUssV0FDTixNQUFPLENBQ0hreUMsWUFBYUEsRUFDYnZDLFNBQVVyb0MsRUFBTW8zQixXQUFXNFQsbUJBQW1CSCxRQVMxRC9CLEVBQTZCbnpDLFVBQVVzMUMsc0JBQXdCLFNBQVV4M0IsR0FDckUsSUFJSXkzQixFQUpBbHJDLEVBQVExSixLQUNSdzBDLEVBQWlCL0IsR0FBcUJ0MUIsR0FFdEM0MEIsRUFBV25lLEdBQWdCSyxJQUUvQixPQUFPdWdCLEVBQ0Y5VSxRQUFRLENBQUV2akIsTUFBTyszQixHQUFpQk8sY0FBZW5VLFNBQVMsSUFBUSxTQUFVdGhDLEVBQUtnMEMsRUFBYXZULEdBQy9GbVYsRUFBYWxyQyxFQUFNbzNCLFdBQVdzVCxxQkFBcUJwQixHQUMvQ0EsRUFBWWpCLFdBQ1pBLEVBQVdyb0MsRUFBTW8zQixXQUFXNFQsbUJBQW1CMUIsRUFBWWpCLFdBRS9EdFMsRUFBUWw5QixVQUVQSCxNQUFLLFdBQ04sTUFBTyxDQUFFd3lDLFdBQVlBLEVBQVk3QyxTQUFVQSxPQUduRFMsRUFBNkJuekMsVUFBVXcxQyxnQkFBa0IsU0FBVXZnQyxHQUMvRCxPQUFPLElBQUlrK0IsRUFBNkJmLDJCQUEyQnp4QyxPQUFRc1UsR0FBV0EsRUFBUXdnQyxnQkFFbEd0QyxFQUE2Qm56QyxVQUFVMDFDLFFBQVUsU0FBVTdYLEdBQ3ZELE9BQU9sOUIsS0FBSzZ5QyxZQUFZM1YsR0FBSzk2QixNQUFLLFNBQVVYLEdBQVksT0FBT0EsRUFBU3F4QyxhQUU1RU4sRUFBNkJuekMsVUFBVXd6QyxZQUFjLFNBQVUzVixHQUMzRCxPQUFPOFgsR0FBb0I5WCxHQUN0QjUrQixJQUFJMjJDLEdBQXVCajJDLEtBQzNCb0QsTUFBSyxTQUFVWCxHQUVoQixPQURBb0UsSUFBU3BFLEVBQVUsbUNBQ1pBLE1BR2Yrd0MsRUFBNkJuekMsVUFBVTB6QyxZQUFjLFNBQVU3VixFQUFLejdCLEdBQ2hFLE9BQU91ekMsR0FBb0I5WCxHQUFLaUMsSUFBSThWLEdBQXVCajJDLElBQUt5QyxJQU1wRSt3QyxFQUE2Qm56QyxVQUFVNHpDLG9CQUFzQixTQUFVRCxHQUNuRSxHQUFJQSxFQUFhLENBQ2IsSUFBSXpHLEVBQU12c0MsS0FBSzhnQyxXQUFXc1QscUJBQXFCcEIsR0FDL0MsT0FBSXpHLGFBQWVZLElBQ2ZaLEVBQUlqMkIsUUFBUWdVLFFBQVFzSixHQUFnQkksaUJBRzdCLEtBRUp1WSxFQUVYLE9BQU8sTUFTWGlHLEVBQTZCZiwyQkFBNEMsU0FBVXRuQyxHQU8vRSxTQUFTK3FDLEVBQVFDLEVBQWVMLEdBQzVCLElBQUlwckMsRUFBUVMsRUFBT3ZNLEtBQUtvQyxPQUFTQSxLQUtqQyxPQUpBMEosRUFBTXlyQyxjQUFnQkEsRUFDdEJ6ckMsRUFBTW9yQyxjQUFnQkEsRUFFdEJwckMsRUFBTTByQyxjQUFnQixJQUFJbEUsSUFBVSxTQUFVbHlDLEdBQU8sT0FBT0EsRUFBSXdNLGNBQ3pEOUIsRUEwRVgsT0F0RkFsRSxFQUFNMUYsVUFBVW8xQyxFQUFTL3FDLEdBY3pCK3FDLEVBQVE3MUMsVUFBVWt6QyxhQUFlLFNBQVVwMUIsR0FDdkMsSUFBSXpULEVBQVExSixLQUNSMjdCLEVBQVcsR0FDWGlYLEVBQVksRUFDWmhRLEVBQW9CLElBQUk3TCxJQUFVLFNBQVVyNUIsRUFBR2EsR0FDL0MsT0FBTzJyQixFQUFvQnhzQixFQUFFNndCLGtCQUFtQmh3QixFQUFFZ3dCLHNCQWdDdEQsT0E5QkF2dUIsS0FBSzB4QyxRQUFRbGdDLFNBQVEsU0FBVXhTLEVBQUs4eUMsR0FDaEMsSUFBSXVELEVBQWUzckMsRUFBTTByQyxjQUFjOTJDLElBQUlVLEdBRTNDLEdBREE2RyxPQUF3QjBELElBQWpCOHJDLEVBQTRCLGtEQUFvRHIyQyxFQUFNLEtBQ3pGOHlDLEVBQWUsQ0FDZmpzQyxHQUFRNkQsRUFBTXFvQyxTQUFTem5CLFFBQVFzSixHQUFnQkssS0FBTSxrREFDckQsSUFBSXNZLEVBQU03aUMsRUFBTXlyQyxjQUFjclUsV0FBV3dVLG1CQUFtQnhELEVBQWVwb0MsRUFBTXFvQyxVQUNqRm5QLEVBQW9CQSxFQUFrQjNMLElBQUlqNEIsRUFBSXl2QixLQUFLYixXQUNuRCxJQUFJRCxFQUFPd2xCLEdBQWU1RyxHQUMxQnFHLEdBQWFqbEIsRUFBTzBuQixFQUNwQjFaLEVBQVNsNEIsS0FBS2lHLEVBQU15ckMsY0FBY3RELFNBQVMxMEIsRUFBYW5lLEVBQUt1dEMsU0FJN0QsR0FEQXFHLEdBQWF5QyxFQUNUM3JDLEVBQU1vckMsY0FBZSxDQUtyQixJQUFJUyxFQUFhN3JDLEVBQU15ckMsY0FBY3JVLFdBQVd3VSxtQkFBbUIsSUFBSW5JLEdBQVdudUMsRUFBSzQwQixHQUFnQkksaUJBQWtCdHFCLEVBQU1xb0MsVUFDL0hwVyxFQUFTbDRCLEtBQUtpRyxFQUFNeXJDLGNBQWN0RCxTQUFTMTBCLEVBQWFuZSxFQUFLdTJDLFNBRzdENVosRUFBU2w0QixLQUFLaUcsRUFBTXlyQyxjQUFjbEQsWUFBWTkwQixFQUFhbmUsT0FJdkU0akMsRUFBa0JweEIsU0FBUSxTQUFVeXhCLEdBQ2hDdEgsRUFBU2w0QixLQUFLaUcsRUFBTXlyQyxjQUFjcFUsYUFBYW1DLDJCQUEyQi9sQixFQUFhOGxCLE9BRTNGdEgsRUFBU2w0QixLQUFLekQsS0FBS20xQyxjQUFjeEMsZUFBZXgxQixFQUFheTFCLElBQ3REclksR0FBbUJXLFFBQVFTLElBRXRDdVosRUFBUTcxQyxVQUFVK3lDLGFBQWUsU0FBVWoxQixFQUFhNm1CLEdBQ3BELElBQUl0NkIsRUFBUTFKLEtBRVosT0FBT0EsS0FBS20xQyxjQUNQakMsY0FBYy8xQixFQUFhNm1CLEdBQzNCNWhDLE1BQUssU0FBVW96QyxHQUNoQixPQUFrQixPQUFkQSxHQUNBOXJDLEVBQU0wckMsY0FBY2xoQyxJQUFJOHZCLEVBQWEsR0FDOUIsT0FHUHQ2QixFQUFNMHJDLGNBQWNsaEMsSUFBSTh2QixFQUFhd1IsRUFBVTduQixNQUN4QzZuQixFQUFVMUQsbUJBSTdCb0QsRUFBUTcxQyxVQUFVaXpDLGdCQUFrQixTQUFVbjFCLEVBQWFvbkIsR0FDdkQsSUFBSTc2QixFQUFRMUosS0FHWixPQUFPQSxLQUFLbTFDLGNBQ1A5QixnQkFBZ0JsMkIsRUFBYW9uQixHQUM3Qm5pQyxNQUFLLFNBQVU2SSxHQUNoQixJQUFJc29DLEVBQWlCdG9DLEVBQUdzb0MsZUFPeEIsT0FQa0R0b0MsRUFBR3FvQyxRQUk3QzloQyxTQUFRLFNBQVV3eUIsRUFBYXJXLEdBQ25DamtCLEVBQU0wckMsY0FBY2xoQyxJQUFJOHZCLEVBQWFyVyxNQUVsQzRsQixNQUdSMkIsRUF2RjZELENBd0Z0RXpELElBQ0tlLEVBM1dzQyxHQTZXakQsU0FBU3dDLEdBQW9COVgsR0FDekIsT0FBT2dKLEdBQXFCakosU0FBU0MsRUFBSytYLEdBQXVCeDRCLE9BS3JFLFNBQVNnMkIsR0FBcUJ2VixHQUMxQixPQUFPZ0osR0FBcUJqSixTQUFTQyxFQUFLZ1gsR0FBaUJ6M0IsT0FFL0QsU0FBU2kyQixHQUFNdFosR0FDWCxPQUFPQSxFQUFPM0ssS0FBS3hULFVBS3ZCLFNBQVNrNEIsR0FBZTVHLEdBQ3BCLElBQUk3dEMsRUFDSixHQUFJNnRDLEVBQUludEIsU0FDSjFnQixFQUFRNnRDLEVBQUludEIsY0FFWCxHQUFJbXRCLEVBQUlrSixnQkFDVC8yQyxFQUFRNnRDLEVBQUlrSixvQkFFWCxLQUFJbEosRUFBSW1KLFdBSVQsTUFBTTd3QixFQUFLLGdDQUhYbm1CLEVBQVE2dEMsRUFBSW1KLFdBS2hCLE9BQU9ocUMsS0FBS3NHLFVBQVV0VCxHQUFPMkI7Ozs7Ozs7Ozs7Ozs7Ozs7R0FzQmpDLElBQUlzMUMsR0FBb0MsV0FDcEMsU0FBU0EsSUFDTDMxQyxLQUFLNDFDLHNCQUF3QixJQUFJQyxHQVNyQyxPQVBBRixFQUFtQnQyQyxVQUFVNmpDLDJCQUE2QixTQUFVL2xCLEVBQWEyNEIsR0FFN0UsT0FEQTkxQyxLQUFLNDFDLHNCQUFzQjNlLElBQUk2ZSxHQUN4QnZiLEdBQW1CdjRCLFdBRTlCMnpDLEVBQW1CdDJDLFVBQVUwMkMscUJBQXVCLFNBQVU1NEIsRUFBYW9TLEdBQ3ZFLE9BQU9nTCxHQUFtQnY0QixRQUFRaEMsS0FBSzQxQyxzQkFBc0J2RCxXQUFXOWlCLEtBRXJFb21CLEVBWDRCLEdBa0JuQ0UsR0FBNkMsV0FDN0MsU0FBU0EsSUFDTDcxQyxLQUFLbWMsTUFBUSxHQXdCakIsT0FyQkEwNUIsRUFBNEJ4MkMsVUFBVTQzQixJQUFNLFNBQVU2ZSxHQUNsRGp3QyxFQUFPaXdDLEVBQWV6MUMsT0FBUyxHQUFNLEVBQUcsK0JBQ3hDLElBQUlrdkIsRUFBZXVtQixFQUFlaG9CLGNBQzlCa29CLEVBQWFGLEVBQWVsb0IsVUFDNUJxb0IsRUFBa0JqMkMsS0FBS21jLE1BQU1vVCxJQUM3QixJQUFJd0gsR0FBVXpJLEdBQWFsQixZQUMzQjhvQixHQUFTRCxFQUFnQmppQyxJQUFJZ2lDLEdBRWpDLE9BREFoMkMsS0FBS21jLE1BQU1vVCxHQUFnQjBtQixFQUFnQmhmLElBQUkrZSxHQUN4Q0UsR0FFWEwsRUFBNEJ4MkMsVUFBVTJVLElBQU0sU0FBVThoQyxHQUNsRCxJQUFJdm1CLEVBQWV1bUIsRUFBZWhvQixjQUM5QmtvQixFQUFhRixFQUFlbG9CLFVBQzVCcW9CLEVBQWtCajJDLEtBQUttYyxNQUFNb1QsR0FDakMsT0FBTzBtQixHQUFtQkEsRUFBZ0JqaUMsSUFBSWdpQyxJQUVsREgsRUFBNEJ4MkMsVUFBVWd6QyxXQUFhLFNBQVU5aUIsR0FHekQsT0FGa0J2dkIsS0FBS21jLE1BQU1vVCxJQUN6QixJQUFJd0gsR0FBVXpJLEdBQWFsQixhQUNablMsV0FFaEI0NkIsRUExQnFDLEdBOEQ1Q3haLEdBQWlCLEVBRWpCOFosR0FBaUMsV0FDakMsU0FBU0EsRUFBZ0JyVixHQUNyQjlnQyxLQUFLOGdDLFdBQWFBLEVBOEt0QixPQXJLQXFWLEVBQWdCOTJDLFVBQVUrOEIsZ0JBQWtCLFNBQVVuZixFQUFJaWdCLEVBQUtrWixFQUFhQyxHQUN4RSxJQUFJM3NDLEVBQVExSixLQUNaNkYsRUFBT3V3QyxFQUFjQyxHQUNqQkQsR0FBZSxHQUNmQyxHQUFhaGEsR0FBZ0IsbUNBQXFDK1osRUFBYyxxQkFDcEYsSUFBSWxSLEVBQXNCLElBQUk3RyxHQUFvQm5CLEdBQzlDa1osRUFBYyxHQUFLQyxHQUFhLElBOE01QyxTQUFrQ3A1QixHQUM5QkEsRUFBR1ksa0JBQWtCeTRCLEdBQWdCNzVCLE9BOU03Qjg1QixDQUF5QnQ1QixHQWtUckMsU0FBNkJBLEdBQ3pCQSxFQUFHWSxrQkFBa0IrbkIsR0FBZ0JucEIsTUFBTyxDQUN4Q29wQixRQUFTRCxHQUFnQkMsVUFFRjVvQixFQUFHWSxrQkFBa0Jna0IsR0FBZ0JwbEIsTUFBTyxDQUNuRW9wQixRQUFTaEUsR0FBZ0JnRSxRQUN6QjJRLGVBQWUsSUFFRS80QixZQUFZb2tCLEdBQWdCQyxtQkFBb0JELEdBQWdCNFUscUJBQXNCLENBQUVDLFFBQVEsSUFDckh6NUIsRUFBR1ksa0JBQWtCa2xCLEdBQW1CdG1CLE9BMVRoQ2s2QixDQUFvQjE1QixHQUNwQjI1QixHQUFpQjM1QixHQXdYN0IsU0FBbUNBLEdBQy9CQSxFQUFHWSxrQkFBa0JxMkIsR0FBaUJ6M0IsT0F4WDlCbzZCLENBQTBCNTVCLElBSTlCLElBQUkxZCxFQUFJZzdCLEdBQW1CdjRCLFVBb0QzQixPQW5ESW8wQyxFQUFjLEdBQUtDLEdBQWEsSUFHWixJQUFoQkQsS0F5c0JoQixTQUF3Qm41QixHQUNwQkEsRUFBRzY1QixrQkFBa0IzTixHQUFpQjFzQixPQUN0Q1EsRUFBRzY1QixrQkFBa0JoTyxHQUFTcnNCLE9BQzlCUSxFQUFHNjVCLGtCQUFrQnRPLEdBQWUvckIsT0Ezc0J4QnM2QixDQUFlOTVCLEdBQ2YyNUIsR0FBaUIzNUIsSUFFckIxZCxFQUFJQSxFQUFFNkMsTUFBSyxXQUFjLE9Bb3RCckMsU0FBcUM4NkIsR0FDakMsSUFBSThaLEVBQWM5WixFQUFJemdCLE1BQU0rckIsR0FBZS9yQixPQUN2Q2hiLEVBQVcsSUFBSSttQyxHQUNFLEVBQ1MsRUFBRzVVLEdBQWdCSyxJQUFJRSxjQUNwQyxHQUNqQixPQUFPNmlCLEVBQVk3WCxJQUFJcUosR0FBZXhwQyxJQUFLeUMsR0ExdEJIdzFDLENBQTRCL1IsT0FFNURrUixFQUFjLEdBQUtDLEdBQWEsSUFDWixJQUFoQkQsSUFPQTcyQyxFQUFJQSxFQUFFNkMsTUFBSyxXQUNQLE9BdVNwQixTQUFrRDZhLEVBQUlpZ0IsR0FFbEQsT0FEdUJBLEVBQUl6Z0IsTUFBTW9sQixHQUFnQnBsQixPQUN6QjRpQixVQUFVajlCLE1BQUssU0FBVTgwQyxHQUM3Q2o2QixFQUFHNjVCLGtCQUFrQmpWLEdBQWdCcGxCLE9BQ2hCUSxFQUFHWSxrQkFBa0Jna0IsR0FBZ0JwbEIsTUFBTyxDQUM3RG9wQixRQUFTaEUsR0FBZ0JnRSxRQUN6QjJRLGVBQWUsSUFFSi80QixZQUFZb2tCLEdBQWdCQyxtQkFBb0JELEdBQWdCNFUscUJBQXNCLENBQUVDLFFBQVEsSUFDL0csSUFBSVMsRUFBbUJqYSxFQUFJemdCLE1BQU1vbEIsR0FBZ0JwbEIsT0FDN0MyNkIsRUFBV0YsRUFBa0JqbUMsS0FBSSxTQUFVdW9CLEdBQzNDLE9BQU8yZCxFQUFpQmhZLElBQUkzRixNQUVoQyxPQUFPZSxHQUFtQlcsUUFBUWtjLE1BcFRmQyxDQUF5Q3A2QixFQUFJaW9CLE9BRzVEM2xDLEVBQUlBLEVBQUU2QyxNQUFLLFlBb3ZCdkIsU0FBbUM2YSxHQUMvQkEsRUFBR1ksa0JBQWtCeTVCLEdBQWlCNzZCLE1BQU8sQ0FDekNvcEIsUUFBU3lSLEdBQWlCelIsVUFydkJsQjBSLENBQTBCdDZCLE9BRzlCbTVCLEVBQWMsR0FBS0MsR0FBYSxJQUNoQzkyQyxFQUFJQSxFQUFFNkMsTUFBSyxXQUFjLE9BQU9zSCxFQUFNOHRDLDRCQUE0QnRTLE9BRWxFa1IsRUFBYyxHQUFLQyxHQUFhLElBQ2hDOTJDLEVBQUlBLEVBQUU2QyxNQUFLLFdBRVAsT0EyY2hCLFNBQW1DNmEsR0FDL0JBLEVBQUdZLGtCQUFrQm8zQixHQUF1Qng0QixPQTdjaENnN0IsQ0FBMEJ4NkIsR0FDbkJ2VCxFQUFNZ3VDLGtCQUFrQnhTLE9BR25Da1IsRUFBYyxHQUFLQyxHQUFhLElBQ2hDOTJDLEVBQUlBLEVBQUU2QyxNQUFLLFdBQWMsT0FBT3NILEVBQU1pdUMsc0JBQXNCelMsT0FFNURrUixFQUFjLEdBQUtDLEdBQWEsSUFDaEM5MkMsRUFBSUEsRUFBRTZDLE1BQUssV0FDUCxPQUFPc0gsRUFBTWt1Qyw0QkFBNEIzNkIsRUFBSWlvQixPQUdqRGtSLEVBQWMsR0FBS0MsR0FBYSxJQUNoQzkyQyxFQUFJQSxFQUFFNkMsTUFBSyxZQXNxQnZCLFNBQXdDNmEsR0FDaENBLEVBQUcraEIsaUJBQWlCdnZCLFNBQVMsMEJBQzdCd04sRUFBRzY1QixrQkFBa0IseUJBcHFCYmUsQ0FBK0I1NkIsR0F3ckIvQyxTQUEyQ2lnQixHQUN2QyxJQUFJNGEsRUFBc0I1YSxFQUFJdmYsWUFBWXUyQixHQUFpQnozQixPQUMzRHE3QixFQUFvQnI2QixZQUFZeTJCLEdBQWlCTyxjQUFlUCxHQUFpQjZELGtCQUFtQixDQUFFckIsUUFBUSxJQUM5R29CLEVBQW9CcjZCLFlBQVl5MkIsR0FBaUJDLHdCQUF5QkQsR0FBaUI4RCw0QkFBNkIsQ0FBRXRCLFFBQVEsSUExckJ0SHVCLENBQWtDL2EsT0FHbkMzOUIsR0FFWDQyQyxFQUFnQjkyQyxVQUFVcTRDLGtCQUFvQixTQUFVeGEsR0FDcEQsSUFBSWdiLEVBQVksRUFDaEIsT0FBT2hiLEVBQ0Z6Z0IsTUFBTXkzQixHQUFpQnozQixPQUN2QmlqQixTQUFRLFNBQVU1OEIsRUFBR3lwQyxHQUN0QjJMLEdBQWEvRSxHQUFlNUcsTUFFM0JucUMsTUFBSyxXQUNOLElBQUlYLEVBQVcsSUFBSXd6QyxHQUF1QmlELEdBQzFDLE9BQU9oYixFQUNGemdCLE1BQU13NEIsR0FBdUJ4NEIsT0FDN0IwaUIsSUFBSThWLEdBQXVCajJDLElBQUt5QyxPQUc3QzAwQyxFQUFnQjkyQyxVQUFVbTRDLDRCQUE4QixTQUFVdGEsR0FDOUQsSUFBSXh6QixFQUFRMUosS0FDUm00QyxFQUFjamIsRUFBSXpnQixNQUFNbXBCLEdBQWdCbnBCLE9BQ3hDbWxCLEVBQWlCMUUsRUFBSXpnQixNQUFNb2xCLEdBQWdCcGxCLE9BQy9DLE9BQU8wN0IsRUFBWTlZLFVBQVVqOUIsTUFBSyxTQUFVZzJDLEdBQ3hDLE9BQU83ZCxHQUFtQi9vQixRQUFRNG1DLEdBQVEsU0FBVUMsR0FDaEQsSUFBSTlnQixFQUFRaUssWUFBWUMsTUFBTSxDQUFDNFcsRUFBTXhYLFFBbDZIL0IsR0FrNkh5RCxDQUFDd1gsRUFBTXhYLE9BQVF3WCxFQUFNQywwQkFDcEYsT0FBTzFXLEVBQ0Z2QyxRQUFRd0MsR0FBZ0JDLG1CQUFvQnZLLEdBQzVDbjFCLE1BQUssU0FBVTBoQyxHQUNoQixPQUFPdkosR0FBbUIvb0IsUUFBUXN5QixHQUFXLFNBQVVwQixHQUNuRDc4QixFQUFPNjhCLEVBQVE3QixTQUFXd1gsRUFBTXhYLE9BQVEsd0JBQTBCNkIsRUFBUTNKLFFBQVUseUJBQ3BGLElBQUltQixFQUFReHdCLEVBQU1vM0IsV0FBV3VDLG9CQUFvQlgsR0FDakQsT0FBT3VDLEdBQW9CL0gsRUFBS21iLEVBQU14WCxPQUFRM0csR0FBTzkzQixNQUFLLDRCQVU5RSt6QyxFQUFnQjkyQyxVQUFVczRDLHNCQUF3QixTQUFVemEsR0FDeEQsSUFBSWdNLEVBQXNCaE0sRUFBSXpnQixNQUFNMHNCLEdBQWlCMXNCLE9BQ2pEKzNCLEVBQWlCdFgsRUFBSXpnQixNQUFNeTNCLEdBQWlCejNCLE9BQ2hELE9BQU8rcUIsR0FBK0J0SyxHQUFLOTZCLE1BQUssU0FBVW0yQyxHQUN0RCxJQUdJNWMsRUFBVyxHQUNmLE9BQU82WSxFQUNGOVUsU0FBUSxTQUFVMWdDLEVBQUt1dEMsR0FDeEIsSUFBSTlkLEVBQU8sSUFBSUgsR0FBYXR2QixHQUN4Qnc1QyxFQW1EcEIsU0FBcUIvcEIsR0FDakIsTUFBTyxDQUFDLEVBQUdtRSxHQUFPbkUsSUFwRGVncUIsQ0FBWWhxQixHQUNqQ2tOLEVBQVNsNEIsS0FBS3lsQyxFQUFvQjVxQyxJQUFJazZDLEdBQWdCcDJDLE1BQUssU0FBVXMyQyxHQUNqRSxPQUFLQSxFQUlNbmUsR0FBbUJ2NEIsVUFiZixTQUFVeXNCLEdBQzdCLE9BQU95YSxFQUFvQi9KLElBQUksSUFBSWdLLEdBQWlCLEVBQUd2VyxHQUFPbkUsR0FBTzhwQixJQVN0REksQ0FBaUJscUIsVUFPL0Jyc0IsTUFBSyxXQUFjLE9BQU9tNEIsR0FBbUJXLFFBQVFTLFVBR2xFd2EsRUFBZ0I5MkMsVUFBVXU0Qyw0QkFBOEIsU0FBVTM2QixFQUFJaWdCLEdBRWxFamdCLEVBQUdZLGtCQUFrQis2QixHQUFtQm44QixNQUFPLENBQzNDb3BCLFFBQVMrUyxHQUFtQi9TLFVBRWhDLElBQUlnVCxFQUF5QjNiLEVBQUl6Z0IsTUFBTW04QixHQUFtQm44QixPQUV0RHE4QixFQUFRLElBQUlqRCxHQUNaaEUsRUFBVyxTQUFVaUUsR0FDckIsR0FBSWdELEVBQU03aEIsSUFBSTZlLEdBQWlCLENBQzNCLElBQUl2bUIsRUFBZXVtQixFQUFlaG9CLGNBQzlCa29CLEVBQWFGLEVBQWVsb0IsVUFDaEMsT0FBT2lyQixFQUF1QjFaLElBQUksQ0FDOUI1UCxhQUFjQSxFQUNkMFQsT0FBUXJRLEdBQU9vakIsT0FLM0IsT0FBTzlZLEVBQ0Z6Z0IsTUFBTXkzQixHQUFpQnozQixPQUN2QmlqQixRQUFRLENBQUVGLFVBQVUsSUFBUSxTQUFVdVosRUFBY2oyQyxHQUNyRCxJQUFJMnJCLEVBQU8sSUFBSUgsR0FBYXlxQixHQUM1QixPQUFPbEgsRUFBU3BqQixFQUFLYixjQUVwQnhyQixNQUFLLFdBRU4sT0FBTzg2QixFQUNGemdCLE1BQU1zbUIsR0FBbUJ0bUIsT0FDekJpakIsUUFBUSxDQUFFRixVQUFVLElBQVEsU0FBVXYwQixFQUFJbkksR0FDOUJtSSxFQUFHLEdBQWhCLElBQW9CbzVCLEVBQWNwNUIsRUFBRyxHQUNqQ3dqQixHQUQrQ3hqQixFQUFHLEdBQzNDVyxHQUFPeTRCLElBQ2xCLE9BQU93TixFQUFTcGpCLEVBQUtiLGtCQUkxQnVvQixFQWhMeUIsR0F3THBDLElBQUk2QyxHQUNBLFNBQXFCNWxCLEVBQVNDLEdBQzFCcnpCLEtBQUtvekIsUUFBVUEsRUFDZnB6QixLQUFLcXpCLFlBQWNBLEdBYXZCaWpCLEdBQWlDLFdBQ2pDLFNBQVNBLEVBQWdCMkMsRUFFekJDLEVBQXlCQyxHQUNyQm41QyxLQUFLaTVDLFFBQVVBLEVBQ2ZqNUMsS0FBS2s1Qyx3QkFBMEJBLEVBQy9CbDVDLEtBQUttNUMsaUJBQW1CQSxFQWU1QixPQU5BN0MsRUFBZ0I3NUIsTUFBUSxRQUt4QjY1QixFQUFnQnQzQyxJQUFNLFFBQ2ZzM0MsRUFyQnlCLEdBZ0NwQyxJQUFJMVEsR0FBaUMsV0FDakMsU0FBU0EsRUFJVC9FLEVBU0F5WCxFQVVBclcsR0FDSWppQyxLQUFLNmdDLE9BQVNBLEVBQ2Q3Z0MsS0FBS3M0Qyx3QkFBMEJBLEVBQy9CdDRDLEtBQUtpaUMsZ0JBQWtCQSxFQU0zQixPQUhBMkQsRUFBZ0JucEIsTUFBUSxpQkFFeEJtcEIsRUFBZ0JDLFFBQVUsU0FDbkJELEVBakN5QixHQTBDaEMvRCxHQUFpQyxXQUNqQyxTQUFTQSxFQUlUaEIsRUFJQTlILEVBS0FxZ0IsRUFhQW5nQixFQU1BQyxHQUNJbDVCLEtBQUs2Z0MsT0FBU0EsRUFDZDdnQyxLQUFLKzRCLFFBQVVBLEVBQ2YvNEIsS0FBS281QyxpQkFBbUJBLEVBQ3hCcDVDLEtBQUtpNUIsY0FBZ0JBLEVBQ3JCajVCLEtBQUtrNUIsVUFBWUEsRUFVckIsT0FQQTJJLEVBQWdCcGxCLE1BQVEsWUFFeEJvbEIsRUFBZ0JnRSxRQUFVLFVBRTFCaEUsRUFBZ0JDLG1CQUFxQixxQkFFckNELEVBQWdCNFUscUJBQXVCLENBQUMsU0FBVSxXQUMzQzVVLEVBaER5QixHQXdGcEMsSUFBSWtCLEdBQW9DLFdBQ3BDLFNBQVNBLEtBK0JULE9BekJBQSxFQUFtQnlDLGNBQWdCLFNBQVUzRSxHQUN6QyxNQUFPLENBQUNBLElBTVprQyxFQUFtQm1CLGNBQWdCLFNBQVVyRCxFQUFRcFMsR0FDakQsTUFBTyxDQUFDb1MsRUFBUWpPLEdBQU9uRSxLQU0zQnNVLEVBQW1CL2pDLElBQU0sU0FBVTZoQyxFQUFRcFMsRUFBTXNLLEdBQzdDLE1BQU8sQ0FBQzhILEVBQVFqTyxHQUFPbkUsR0FBT3NLLElBRWxDZ0ssRUFBbUJ0bUIsTUFBUSxvQkFPM0JzbUIsRUFBbUJDLFlBQWMsSUFBSUQsRUFDOUJBLEVBaEM0QixHQXlDdkMsSUFBSXNXLEdBQ0EsU0FBc0I1cUIsRUFBTXNqQixHQUN4Qi94QyxLQUFLeXVCLEtBQU9BLEVBQ1p6dUIsS0FBSyt4QyxTQUFXQSxHQVFwQnVILEdBQ0EsU0FBMkI3cUIsRUFBTW5ZLEdBQzdCdFcsS0FBS3l1QixLQUFPQSxFQUNaenVCLEtBQUtzVyxRQUFVQSxHQWlCbkI0OUIsR0FBa0MsV0FNbEMsU0FBU0EsRUFNVHVCLEVBS0FDLEVBS0F0MkIsRUFPQW9zQixFQUtBdUcsRUFLQWlFLEdBQ0loMkMsS0FBS3kxQyxnQkFBa0JBLEVBQ3ZCejFDLEtBQUswMUMsV0FBYUEsRUFDbEIxMUMsS0FBS29mLFNBQVdBLEVBQ2hCcGYsS0FBS3dyQyxzQkFBd0JBLEVBQzdCeHJDLEtBQUsreEMsU0FBV0EsRUFDaEIveEMsS0FBS2cyQyxXQUFhQSxFQW9CdEIsT0FsQkE5QixFQUFpQnozQixNQUFRLGtCQU96QnkzQixFQUFpQk8sY0FBZ0IsZ0JBQ2pDUCxFQUFpQjZELGtCQUFvQixXQVFyQzdELEVBQWlCQyx3QkFBMEIsMEJBQzNDRCxFQUFpQjhELDRCQUE4QixDQUFDLGFBQWMsWUFDdkQ5RCxFQWpFMEIsR0FzRWpDZSxHQUF3QyxXQUt4QyxTQUFTQSxFQUF1Qm5DLEdBQzVCOXlDLEtBQUs4eUMsU0FBV0EsRUFJcEIsT0FGQW1DLEVBQXVCeDRCLE1BQVEsdUJBQy9CdzRCLEVBQXVCajJDLElBQU0sMEJBQ3RCaTJDLEVBVmdDLEdBd0IzQyxJQUFJbk0sR0FBMEIsV0FDMUIsU0FBU0EsRUFTVDdRLEVBSUE0USxFQU1Ba0osRUFrQkF3SCxFQWVBQyxFQU1BQyxFQVFBdjdCLEdBQ0lsZSxLQUFLaTRCLFNBQVdBLEVBQ2hCajRCLEtBQUs2b0MsWUFBY0EsRUFDbkI3b0MsS0FBSyt4QyxTQUFXQSxFQUNoQi94QyxLQUFLdTVDLFlBQWNBLEVBQ25CdjVDLEtBQUt3NUMseUJBQTJCQSxFQUNoQ3g1QyxLQUFLeTVDLDZCQUErQkEsRUFDcEN6NUMsS0FBS2tlLE1BQVFBLEVBYWpCLE9BWEE0cUIsRUFBU3JzQixNQUFRLFVBRWpCcXNCLEVBQVNqRCxRQUFVLFdBRW5CaUQsRUFBU0Msc0JBQXdCLG9CQU1qQ0QsRUFBUzRRLG9CQUFzQixDQUFDLGNBQWUsWUFDeEM1USxFQXZGa0IsR0FtR3pCSyxHQUFrQyxXQUNsQyxTQUFTQSxFQUlUbFIsRUFJQXhKLEVBTUFoQyxHQUNJenNCLEtBQUtpNEIsU0FBV0EsRUFDaEJqNEIsS0FBS3l1QixLQUFPQSxFQUNaenVCLEtBQUt5c0IsZUFBaUJBLEVBQ3RCNW1CLEVBQXFCLElBQWJveUIsU0FBd0MxdUIsSUFBbkJrakIsR0FBK0IscUlBVWhFLE9BUEEwYyxFQUFpQjFzQixNQUFRLGtCQUV6QjBzQixFQUFpQnRELFFBQVUsQ0FBQyxXQUFZLFFBRXhDc0QsRUFBaUJLLHFCQUF1Qix1QkFFeENMLEVBQWlCd1EsdUJBQXlCLENBQUMsT0FBUSxZQUM1Q3hRLEVBN0IwQixHQXFDakNYLEdBQWdDLFdBQ2hDLFNBQVNBLEVBTVRyQixFQU1BTyxFQVNBSixFQUlBUSxHQUNJOW5DLEtBQUttbkMsZ0JBQWtCQSxFQUN2Qm5uQyxLQUFLMG5DLDRCQUE4QkEsRUFDbkMxbkMsS0FBS3NuQywwQkFBNEJBLEVBQ2pDdG5DLEtBQUs4bkMsWUFBY0EsRUFRdkIsT0FGQVUsRUFBZXhwQyxJQUFNLGtCQUNyQndwQyxFQUFlL3JCLE1BQVEsZUFDaEIrckIsRUF0Q3dCLEdBOEMvQm9RLEdBQW9DLFdBQ3BDLFNBQVNBLEVBSVRycEIsRUFLQTBULEdBQ0lqakMsS0FBS3V2QixhQUFlQSxFQUNwQnZ2QixLQUFLaWpDLE9BQVNBLEVBTWxCLE9BSEEyVixFQUFtQm44QixNQUFRLG9CQUUzQm04QixFQUFtQi9TLFFBQVUsQ0FBQyxlQUFnQixVQUN2QytTLEVBbEI0QixHQW9CdkMsU0FBU2hDLEdBQWlCMzVCLEdBQ0tBLEVBQUdZLGtCQUFrQnNyQixHQUFpQjFzQixNQUFPLENBQ3BFb3BCLFFBQVNzRCxHQUFpQnRELFVBRVRwb0IsWUFBWTByQixHQUFpQksscUJBQXNCTCxHQUFpQndRLHVCQUF3QixDQUFFakQsUUFBUSxJQUN6R3o1QixFQUFHWSxrQkFBa0JpckIsR0FBU3JzQixNQUFPLENBQ25Eb3BCLFFBQVNpRCxHQUFTakQsVUFHVnBvQixZQUFZcXJCLEdBQVNDLHNCQUF1QkQsR0FBUzRRLG9CQUFxQixDQUFFaEQsUUFBUSxJQUNoR3o1QixFQUFHWSxrQkFBa0IycUIsR0FBZS9yQixPQXdDeEMsSUFBSTY2QixHQUFrQyxXQUNsQyxTQUFTQSxFQUlUc0MsRUFFQUMsRUFFQUMsRUFFQUMsR0FDSS81QyxLQUFLNDVDLFNBQVdBLEVBQ2hCNTVDLEtBQUs2NUMsYUFBZUEsRUFDcEI3NUMsS0FBSzg1QyxlQUFpQkEsRUFDdEI5NUMsS0FBSys1QyxhQUFlQSxFQU14QixPQUhBekMsRUFBaUI3NkIsTUFBUSxpQkFFekI2NkIsRUFBaUJ6UixRQUFVLFdBQ3BCeVIsRUFyQjBCLEdBNkJyQyxJQXFJSTBDLEdBekhBQyxHQVpZLENBQ1pyVSxHQUFnQm5wQixNQUNoQm9sQixHQUFnQnBsQixNQUNoQnNtQixHQUFtQnRtQixNQUNuQnkzQixHQUFpQnozQixNQUNqQnFzQixHQUFTcnNCLE1BQ1Q2NUIsR0FBZ0I3NUIsTUFDaEIrckIsR0FBZS9yQixNQUNmMHNCLEdBQWlCMXNCLE9BT2pCeTlCLEdBQVkxMEMsRUFBTXZCLGVBQWVnMkMsR0FBVyxDQUFDM0MsR0FBaUI3NkIsUUFFOUQwOUIsR0FBWTMwQyxFQUFNdkIsZUFBZWkyQyxHQUFXLENBQUNqRixHQUF1Qng0QixRQVNwRTI5QixHQVBZNTBDLEVBQU12QixlQUFlazJDLEdBQVcsQ0FBQ3ZCLEdBQW1CbjhCLFFBNEJoRTQ5QixHQUF1QyxXQUN2QyxTQUFTQSxJQVFMcjZDLEtBQUtzNkMsdUJBQXlCLElBQUl6RSxHQWtEdEMsT0F6Q0F3RSxFQUFzQmg3QyxVQUFVNmpDLDJCQUE2QixTQUFVL2xCLEVBQWEyNEIsR0FDaEYsSUFBSXBzQyxFQUFRMUosS0FFWixHQURBNkYsRUFBT2l3QyxFQUFlejFDLE9BQVMsR0FBTSxFQUFHLGdDQUNuQ0wsS0FBS3M2Qyx1QkFBdUJ0bUMsSUFBSThoQyxHQUFpQixDQUNsRCxJQUFJdm1CLEVBQWV1bUIsRUFBZWhvQixjQUM5QmtvQixFQUFhRixFQUFlbG9CLFVBQ2hDelEsRUFBWWdtQix3QkFBdUIsV0FHL0J6NUIsRUFBTTR3Qyx1QkFBdUJyakIsSUFBSTZlLE1BRXJDLElBQUl5RSxFQUFtQixDQUNuQmhyQixhQUFjQSxFQUNkMFQsT0FBUXJRLEdBQU9vakIsSUFFbkIsT0FBTzZDLEdBQXVCMTdCLEdBQWFnaUIsSUFBSW9iLEdBRW5ELE9BQU9oZ0IsR0FBbUJ2NEIsV0FFOUJxNEMsRUFBc0JoN0MsVUFBVTAyQyxxQkFBdUIsU0FBVTU0QixFQUFhb1MsR0FDMUUsSUFBSWlyQixFQUFjLEdBQ2RqakIsRUFBUWlLLFlBQVlDLE1BQU0sQ0FBQ2xTLEVBQWMsSUFBSyxDQUFDaEYsRUFBbUJnRixHQUFlLEtBQ3RFLEdBQ0EsR0FDZixPQUFPc3BCLEdBQXVCMTdCLEdBQ3pCa2lCLFFBQVE5SCxHQUNSbjFCLE1BQUssU0FBVXVQLEdBQ2hCLElBQUssSUFBSWhILEVBQUssRUFBRzZtQyxFQUFZNy9CLEVBQVNoSCxFQUFLNm1DLEVBQVVueEMsT0FBUXNLLElBQU0sQ0FDL0QsSUFBSTh2QyxFQUFRakosRUFBVTdtQyxHQUt0QixHQUFJOHZDLEVBQU1sckIsZUFBaUJBLEVBQ3ZCLE1BRUppckIsRUFBWS8yQyxLQUFLbUksR0FBTzZ1QyxFQUFNeFgsU0FFbEMsT0FBT3VYLE1BR1JILEVBM0QrQixHQWlFMUMsU0FBU3hCLEdBQXVCM2IsR0FDNUIsT0FBT2dKLEdBQXFCakosU0FBU0MsRUFBSzBiLEdBQW1CbjhCOzs7Ozs7Ozs7Ozs7Ozs7O0lBcUJqRSxTQUFXdTlCLEdBRVBBLEVBQWNBLEVBQXNCLE9BQUksR0FBSyxTQUk3Q0EsRUFBY0EsRUFBdUMsd0JBQUksR0FBSywwQkFFOURBLEVBQWNBLEVBQStCLGdCQUFJLEdBQUssa0JBUjFELENBU0dBLEtBQWtCQSxHQUFnQixLQUlyQyxJQUFJVSxHQUE0QixXQUM1QixTQUFTQSxFQUVUNTVDLEVBS0FtM0IsRUFFQTBpQixFQUtBbHVCLEVBRUFtdUIsRUFLQW5CLEVBT0FGLFFBQzRCLElBQXBCcUIsSUFBOEJBLEVBQWtCaG5CLEdBQWdCSyxVQUMvQixJQUFqQ3dsQixJQUEyQ0EsRUFBK0I3bEIsR0FBZ0JLLFVBQzFFLElBQWhCc2xCLElBQTBCQSxFQUFjdjBCLEtBQzVDaGxCLEtBQUtjLE9BQVNBLEVBQ2RkLEtBQUtpNEIsU0FBV0EsRUFDaEJqNEIsS0FBSzI2QyxRQUFVQSxFQUNmMzZDLEtBQUt5c0IsZUFBaUJBLEVBQ3RCenNCLEtBQUs0NkMsZ0JBQWtCQSxFQUN2QjU2QyxLQUFLeTVDLDZCQUErQkEsRUFDcEN6NUMsS0FBS3U1QyxZQUFjQSxFQTZCdkIsT0ExQkFtQixFQUFXcjdDLFVBQVV3N0MsbUJBQXFCLFNBQVVwdUIsR0FDaEQsT0FBTyxJQUFJaXVCLEVBQVcxNkMsS0FBS2MsT0FBUWQsS0FBS2k0QixTQUFVajRCLEtBQUsyNkMsUUFBU2x1QixFQUFnQnpzQixLQUFLNDZDLGdCQUFpQjU2QyxLQUFLeTVDLDZCQUE4Qno1QyxLQUFLdTVDLGNBTWxKbUIsRUFBV3I3QyxVQUFVeTdDLGdCQUFrQixTQUFVdkIsRUFBYXFCLEdBQzFELE9BQU8sSUFBSUYsRUFBVzE2QyxLQUFLYyxPQUFRZCxLQUFLaTRCLFNBQVVqNEIsS0FBSzI2QyxRQUFTMzZDLEtBQUt5c0IsZUFBZ0JtdUIsRUFBaUI1NkMsS0FBS3k1Qyw2QkFBOEJGLElBTTdJbUIsRUFBV3I3QyxVQUFVMDdDLGlDQUFtQyxTQUFVdEIsR0FDOUQsT0FBTyxJQUFJaUIsRUFBVzE2QyxLQUFLYyxPQUFRZCxLQUFLaTRCLFNBQVVqNEIsS0FBSzI2QyxRQUFTMzZDLEtBQUt5c0IsZUFBZ0J6c0IsS0FBSzQ2QyxnQkFBaUJuQixFQUE4Qno1QyxLQUFLdTVDLGNBRWxKbUIsRUFBV3I3QyxVQUFVaXJCLFFBQVUsU0FBVWlCLEdBQ3JDLE9BQVF2ckIsS0FBS2k0QixXQUFhMU0sRUFBTTBNLFVBQzVCajRCLEtBQUsyNkMsVUFBWXB2QixFQUFNb3ZCLFNBQ3ZCMzZDLEtBQUt5c0IsaUJBQW1CbEIsRUFBTWtCLGdCQUM5QnpzQixLQUFLNDZDLGdCQUFnQnR3QixRQUFRaUIsRUFBTXF2QixrQkFDbkM1NkMsS0FBS3k1Qyw2QkFBNkJudkIsUUFBUWlCLEVBQU1rdUIsK0JBQ2hEejVDLEtBQUt1NUMsY0FBZ0JodUIsRUFBTWd1QixhQUMzQnY1QyxLQUFLYyxPQUFPd3BCLFFBQVFpQixFQUFNenFCLFNBRTNCNDVDLEVBcEVvQixHQXdGM0JNLEdBQWlDLFdBQ2pDLFNBQVNBLEVBQWdCQyxHQUNyQmo3QyxLQUFLaTdDLGlCQUFtQkEsRUE4SjVCLE9BM0pBRCxFQUFnQjM3QyxVQUFVKzBDLHFCQUF1QixTQUFVOEcsR0FDdkQsR0FBSUEsRUFBVTk3QixTQUNWLE9BQU9wZixLQUFLaTdDLGlCQUFpQkUsYUFBYUQsRUFBVTk3QixXQUFZODdCLEVBQVUxUCx1QkFFekUsR0FBSTBQLEVBQVV4RixXQUFZLENBQzNCLElBQUkxMkMsRUFBTW93QixHQUFZTSxhQUFhd3JCLEVBQVV4RixXQUFXam5CLE1BQ3BEblksRUFBVXRXLEtBQUtvN0MsZ0JBQWdCRixFQUFVeEYsV0FBVzNELFVBQ3hELE9BQU8sSUFBSTVFLEdBQVdudUMsRUFBS3NYLEVBQVMsQ0FDaENrMUIsd0JBQXlCMFAsRUFBVTFQLHdCQUd0QyxHQUFJMFAsRUFBVXpGLGdCQUFpQixDQUM1QnoyQyxFQUFNb3dCLEdBQVlNLGFBQWF3ckIsRUFBVXpGLGdCQUFnQmhuQixNQUN6RG5ZLEVBQVV0VyxLQUFLbzdDLGdCQUFnQkYsRUFBVXpGLGdCQUFnQm4vQixTQUM3RCxPQUFPLElBQUl3MUIsR0FBZ0I5c0MsRUFBS3NYLEdBR2hDLE9BQU91TyxFQUFLLGdDQUlwQm0yQixFQUFnQjM3QyxVQUFVaTJDLG1CQUFxQixTQUFVamMsRUFBVTBZLEdBQy9ELElBQUlzSixFQUFhcjdDLEtBQUtpMEMsaUJBQWlCbEMsR0FDbkNpRSxFQUFhM2MsRUFBU3I2QixJQUFJeXZCLEtBQUtiLFVBQVUzUyxVQUM3QyxHQUFJb2UsYUFBb0IwUixHQUFVLENBQzlCLElBQUl3QixFQUFNbFQsRUFBU2lYLE1BQ2JqWCxFQUFTaVgsTUFDVHR3QyxLQUFLaTdDLGlCQUFpQkssV0FBV2ppQixHQUNuQ21TLEVBQXdCblMsRUFBU21TLHNCQUNyQyxPQUFPLElBQUkwSSxHQUNZLEtBQ0wsS0FBTTNILEVBQUtmLEVBQXVCNlAsRUFBWXJGLEdBRS9ELEdBQUkzYyxhQUFvQjhULEdBQVksQ0FDckMsSUFBSTFlLEVBQU80SyxFQUFTcjZCLElBQUl5dkIsS0FBS3hULFVBQ3pCc2dDLEVBQWF2N0MsS0FBS3c3QyxjQUFjbmlCLEVBQVMvaUIsU0FDekNrMUIsRUFBd0JuUyxFQUFTbVMsc0JBQ3JDLE9BQU8sSUFBSTBJLEdBQ1ksS0FBTSxJQUFJbUYsR0FBYTVxQixFQUFNOHNCLEdBQ3BDLEtBQU0vUCxFQUF1QjZQLEVBQVlyRixHQUV4RCxHQUFJM2MsYUFBb0J5UyxHQUFpQixDQUN0Q3JkLEVBQU80SyxFQUFTcjZCLElBQUl5dkIsS0FBS3hULFVBQTdCLElBQ0l3Z0MsRUFBYXo3QyxLQUFLdzdDLGNBQWNuaUIsRUFBUy9pQixTQUM3QyxPQUFPLElBQUk0OUIsR0FBaUIsSUFBSW9GLEdBQWtCN3FCLEVBQU1ndEIsR0FDdEMsS0FDRixNQUNhLEVBQU1KLEVBQVlyRixHQUcvQyxPQUFPbnhCLEVBQUssNkJBR3BCbTJCLEVBQWdCMzdDLFVBQVU0MEMsaUJBQW1CLFNBQVUyRyxHQUNuRCxJQUFJL21CLEVBQVkrbUIsRUFBZ0J6bUIsY0FDaEMsTUFBTyxDQUFDTixFQUFVVCxRQUFTUyxFQUFVUixjQUV6QzJuQixFQUFnQjM3QyxVQUFVcTFDLG1CQUFxQixTQUFVZ0gsR0FDckQsSUFBSTduQixFQUFZLElBQUlWLEdBQVV1b0IsRUFBZSxHQUFJQSxFQUFlLElBQ2hFLE9BQU85bkIsR0FBZ0JHLGNBQWNGLElBRXpDbW5CLEVBQWdCMzdDLFVBQVVtOEMsY0FBZ0IsU0FBVVosR0FDaEQsSUFBSS9tQixFQUFZK21CLEVBQWdCem1CLGNBQ2hDLE9BQU8sSUFBSTZrQixHQUFZbmxCLEVBQVVULFFBQVNTLEVBQVVSLGNBRXhEMm5CLEVBQWdCMzdDLFVBQVUrN0MsZ0JBQWtCLFNBQVVPLEdBQ2xELElBQUk5bkIsRUFBWSxJQUFJVixHQUFVd29CLEVBQVl2b0IsUUFBU3VvQixFQUFZdG9CLGFBQy9ELE9BQU9PLEdBQWdCRyxjQUFjRixJQUd6Q21uQixFQUFnQjM3QyxVQUFVc2pDLGtCQUFvQixTQUFVOUIsRUFBUTNHLEdBQzVELElBQUl4d0IsRUFBUTFKLEtBQ1I0N0MsRUFBMEIxaEIsRUFBTWpCLGNBQWNob0IsS0FBSSxTQUFVcFQsR0FDNUQsT0FBTzZMLEVBQU11eEMsaUJBQWlCWSxXQUFXaCtDLE1BRXpDaStDLEVBQXNCNWhCLEVBQU1oQixVQUFVam9CLEtBQUksU0FBVXBULEdBQ3BELE9BQU82TCxFQUFNdXhDLGlCQUFpQlksV0FBV2grQyxNQUU3QyxPQUFPLElBQUlna0MsR0FBZ0JoQixFQUFRM0csRUFBTW5CLFFBQVNtQixFQUFNbEIsZUFBZXJGLFdBQVlpb0IsRUFBeUJFLElBR2hIZCxFQUFnQjM3QyxVQUFVZ2tDLG9CQUFzQixTQUFVWCxHQUN0RCxJQUFJaDVCLEVBQVExSixLQUNSaTVCLEdBQWlCeUosRUFBUXpKLGVBQWlCLElBQUlob0IsS0FBSSxTQUFVcFQsR0FDNUQsT0FBTzZMLEVBQU11eEMsaUJBQWlCYyxhQUFhbCtDLE1BRTNDcTdCLEVBQVl3SixFQUFReEosVUFBVWpvQixLQUFJLFNBQVVwVCxHQUM1QyxPQUFPNkwsRUFBTXV4QyxpQkFBaUJjLGFBQWFsK0MsTUFFM0NnMkIsRUFBWVYsR0FBVUcsV0FBV29QLEVBQVEwVyxrQkFDN0MsT0FBTyxJQUFJdGdCLEdBQWM0SixFQUFRM0osUUFBU2xGLEVBQVdvRixFQUFlQyxJQUt4RThoQixFQUFnQjM3QyxVQUFVMjhDLGtCQUFvQixTQUFVN3dDLEdBQ3BELElBQUk4d0MsRUFBYyxHQUlsQixPQUhBOXdDLEVBQUtxRyxTQUFRLFNBQVV4UyxHQUNuQmk5QyxFQUFZeDRDLEtBQUttdkIsR0FBTzV6QixFQUFJeXZCLFVBRXpCd3RCLEdBR1hqQixFQUFnQjM3QyxVQUFVNjhDLG9CQUFzQixTQUFVQyxHQUV0RCxJQURBLElBQUloeEMsRUFBT3V0QixLQUNGL3RCLEVBQUssRUFBR3l4QyxFQUFpQkQsRUFBY3h4QyxFQUFLeXhDLEVBQWUvN0MsT0FBUXNLLElBQU0sQ0FDOUUsSUFBSXE1QixFQUFjb1ksRUFBZXp4QyxHQUNqQ1EsRUFBT0EsRUFBSzhyQixJQUFJLElBQUk3SCxHQUFZeGpCLEdBQU9vNEIsS0FFM0MsT0FBTzc0QixHQUdYNnZDLEVBQWdCMzdDLFVBQVVpcEMsYUFBZSxTQUFVK1QsR0FDL0MsSUFNSXY3QyxFQU5Bd1YsRUFBVXRXLEtBQUtvN0MsZ0JBQWdCaUIsRUFBU3RLLFVBQ3hDMEgsT0FBeUVsd0MsSUFBMUM4eUMsRUFBUzVDLDZCQUN0Q3o1QyxLQUFLbzdDLGdCQUFnQmlCLEVBQVM1Qyw4QkFDOUI3bEIsR0FBZ0JLLElBRWxCc2xCLEVBQWM4QyxFQUFTOUMsWUFRM0IsT0FMSXo0QyxPQXdDcUJ5SSxJQXpDTDh5QyxFQUFTbitCLE1BeUNsQm8rQixVQXhDRXQ4QyxLQUFLaTdDLGlCQUFpQnNCLG9CQUFvQkYsRUFBU24rQixPQUduRGxlLEtBQUtpN0MsaUJBQWlCdUIsZ0JBQWdCSCxFQUFTbitCLE9BRXJELElBQUl3OEIsR0FBVzU1QyxFQUFRdTdDLEVBQVNwa0IsU0FBVStoQixHQUFjeUMsT0FBUUosRUFBUzdDLHlCQUEwQmxqQyxFQUFTbWpDLEVBQThCRixJQUdySnlCLEVBQWdCMzdDLFVBQVVvcEMsV0FBYSxTQUFVYixHQUM3Qy9oQyxFQUFPbTBDLEdBQWN5QyxTQUFXN1UsRUFBVytTLFFBQVMsNkJBQ2hEWCxHQUFjeUMsT0FDZCx1QkFDQTdVLEVBQVcrUyxTQUNmLElBRUkrQixFQU9BbkQsRUFUQW9DLEVBQWMzN0MsS0FBS3c3QyxjQUFjNVQsRUFBV2dULGlCQUM1QytCLEVBQTJCMzhDLEtBQUt3N0MsY0FBYzVULEVBQVc2Uiw4QkFrQjdELE9BZklpRCxFQURBOVUsRUFBVzltQyxPQUFPOGpDLGtCQUNMNWtDLEtBQUtpN0MsaUJBQWlCMkIsa0JBQWtCaFYsRUFBVzltQyxRQUduRGQsS0FBS2k3QyxpQkFBaUI0QixjQUFjalYsRUFBVzltQyxRQUc1RDhtQyxFQUFXMlIsdUJBQXVCOXVCLFlBRWxDNWtCLEVBQU9nMkIsR0FBU1csb0JBQXFCLGlGQUNyQytjLEVBQWMzUixFQUFXMlIsWUFBWS90QyxZQUdyQyt0QyxFQUFjM1IsRUFBVzJSLFlBR3RCLElBQUl6USxHQUFTbEIsRUFBVzNQLFNBQVUyUCxFQUFXOW1DLE9BQU8rbkMsY0FBZThTLEVBQWFwQyxFQUFhM1IsRUFBV25iLGVBQWdCa3dCLEVBQTBCRCxJQUV0SjFCLEVBaEt5Qjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBeUxwQyxTQUFTOEIsR0FBc0I3eEMsRUFBSUMsR0FDL0IsSUFBSTZ4QyxFQUFZOXhDLEVBQUcsR0FBSSt4QyxFQUFTL3hDLEVBQUcsR0FDL0JneUMsRUFBWS94QyxFQUFHLEdBQUlneUMsRUFBU2h5QyxFQUFHLEdBQy9CaXlDLEVBQVNqekIsRUFBb0I2eUIsRUFBV0UsR0FDNUMsT0FBZSxJQUFYRSxFQUdPanpCLEVBQW9COHlCLEVBQVFFLEdBRzVCQyxFQVFmLElBQUlDLEdBQTZDLFdBQzdDLFNBQVNBLEVBQTRCQyxHQUNqQ3I5QyxLQUFLcTlDLFlBQWNBLEVBQ25CcjlDLEtBQUtzckIsT0FBUyxJQUFJeUwsR0FBVStsQixJQUM1Qjk4QyxLQUFLczlDLGNBQWdCLEVBOEJ6QixPQTVCQUYsRUFBNEIvOUMsVUFBVWsrQyxVQUFZLFdBQzlDLFFBQVN2OUMsS0FBS3M5QyxlQUVsQkYsRUFBNEIvOUMsVUFBVW0rQyxXQUFhLFNBQVUvd0IsR0FDekQsSUFBSWd1QixFQUFRLENBQUNodUIsRUFBZ0J6c0IsS0FBS3U5QyxhQUNsQyxHQUFJdjlDLEtBQUtzckIsT0FBT3FDLEtBQU8zdEIsS0FBS3E5QyxZQUN4QnI5QyxLQUFLc3JCLE9BQVN0ckIsS0FBS3NyQixPQUFPMkwsSUFBSXdqQixPQUU3QixDQUNELElBQUlnRCxFQUFlejlDLEtBQUtzckIsT0FBTzhMLE9BQzNCMGxCLEdBQXNCckMsRUFBT2dELEdBQWdCLElBQzdDejlDLEtBQUtzckIsT0FBU3RyQixLQUFLc3JCLE9BQU9wVyxPQUFPdW9DLEdBQWN4bUIsSUFBSXdqQixNQUkvRHQ4QyxPQUFPQyxlQUFlZy9DLEVBQTRCLzlDLFVBQVcsV0FBWSxDQUNyRWYsSUFBSyxXQU9ELE9BQU8wQixLQUFLc3JCLE9BQU84TCxPQUFPLElBRTlCLzRCLFlBQVksRUFDWmtaLGNBQWMsSUFFWDZsQyxFQWxDcUMsR0FvQzVDTSxHQUFpQixDQUNqQkMsUUFBUSxFQUNSQyx5QkFBMEIsRUFDMUJDLGVBQWdCLEVBQ2hCQyxpQkFBa0IsR0FFbEJDLEdBQTJCLFdBQzNCLFNBQVNBLEVBR1RDLEVBRUFDLEVBR0FDLEdBQ0lsK0MsS0FBS2crQyw2QkFBK0JBLEVBQ3BDaCtDLEtBQUtpK0Msb0JBQXNCQSxFQUMzQmorQyxLQUFLaytDLGdDQUFrQ0EsRUFZM0MsT0FWQUgsRUFBVUksY0FBZ0IsU0FBVUMsR0FDaEMsT0FBTyxJQUFJTCxFQUFVSyxFQUFXTCxFQUFVTSw4QkFBK0JOLEVBQVVPLDBDQUV2RlAsRUFBVVEscUJBQXVCLEVBQ2pDUixFQUFVUyx5QkFBMkIsUUFDckNULEVBQVVVLHlCQUEyQixTQUNyQ1YsRUFBVU0sOEJBQWdDLEdBQzFDTixFQUFVTyx3Q0FBMEMsSUFDcERQLEVBQVVXLFFBQVUsSUFBSVgsRUFBVUEsRUFBVVUseUJBQTBCVixFQUFVTSw4QkFBK0JOLEVBQVVPLHlDQUN6SFAsRUFBVVksU0FBVyxJQUFJWixFQUFVQSxFQUFVUSxvQkFBcUIsRUFBRyxHQUM5RFIsRUF4Qm1CLEdBa0MxQmEsR0FBOEIsV0FDOUIsU0FBU0EsRUFBYUMsRUFBa0IvdUIsRUFBWWd2QixHQUNoRDkrQyxLQUFLNitDLGlCQUFtQkEsRUFDeEI3K0MsS0FBSzh2QixXQUFhQSxFQUNsQjl2QixLQUFLOCtDLFdBQWFBLEVBQ2xCOStDLEtBQUsrK0MsUUFBUyxFQUNkLytDLEtBQUtnL0MsT0FBUyxLQW9DbEIsT0FsQ0FKLEVBQWF2L0MsVUFBVWd4QixNQUFRLFdBQzNCeHFCLEVBQXVCLE9BQWhCN0YsS0FBS2cvQyxPQUFpQixnREFDekJoL0MsS0FBSzYrQyxpQkFBaUJ2dEMsT0FBTzBzQywrQkFDN0JELEdBQVVRLHFCQUNWditDLEtBQUtpL0MsY0FHYkwsRUFBYXYvQyxVQUFVNi9DLEtBQU8sV0FDdEJsL0MsS0FBS2cvQyxTQUNMaC9DLEtBQUtnL0MsT0FBT3R1QixTQUNaMXdCLEtBQUtnL0MsT0FBUyxPQUd0QjdnRCxPQUFPQyxlQUFld2dELEVBQWF2L0MsVUFBVyxVQUFXLENBQ3JEZixJQUFLLFdBQ0QsT0FBdUIsT0FBaEIwQixLQUFLZy9DLFFBRWhCM2dELFlBQVksRUFDWmtaLGNBQWMsSUFFbEJxbkMsRUFBYXYvQyxVQUFVNC9DLFdBQWEsV0FDaEMsSUFBSXYxQyxFQUFRMUosS0FDWjZGLEVBQXVCLE9BQWhCN0YsS0FBS2cvQyxPQUFpQiw4Q0FDN0IsSUFBSUcsRUFBUW4vQyxLQUFLKytDLE9BcENDLElBRkEsSUF1Q2xCcG5DLEVBQU0sc0JBQXVCLG1DQUFxQ3duQyxFQUFRLE1BQzFFbi9DLEtBQUtnL0MsT0FBU2gvQyxLQUFLOHZCLFdBQVcrQixrQkFBa0JqSCxHQUFRdzBCLHFCQUFzQkQsR0FBTyxXQUdqRixPQUZBejFDLEVBQU1zMUMsT0FBUyxLQUNmdDFDLEVBQU1xMUMsUUFBUyxFQUNScjFDLEVBQU1vMUMsV0FDUk8sZUFBZTMxQyxFQUFNbTFDLGtCQUNyQnI4QyxNQUFLLFdBQWMsT0FBT2tILEVBQU11MUMsZ0JBQ2hDbjFDLE1BQU13MUMsUUFHWlYsRUExQ3NCLEdBNkM3QlcsR0FBcUMsV0FDckMsU0FBU0EsRUFBb0JDLEVBQVVsdUMsR0FDbkN0UixLQUFLdy9DLFNBQVdBLEVBQ2hCeC9DLEtBQUtzUixPQUFTQSxFQStHbEIsT0E1R0FpdUMsRUFBb0JsZ0QsVUFBVW9nRCxxQkFBdUIsU0FBVXZpQixFQUFLd2lCLEdBQ2hFLE9BQU8xL0MsS0FBS3cvQyxTQUFTRyx1QkFBdUJ6aUIsR0FBSzk2QixNQUFLLFNBQVUwbEMsR0FDNUQsT0FBT2wzQixLQUFLQyxNQUFPNnVDLEVBQWEsSUFBUzVYLE9BSWpEeVgsRUFBb0JsZ0QsVUFBVXVnRCxrQkFBb0IsU0FBVTFpQixFQUFLaCtCLEdBQzdELElBQUl3SyxFQUFRMUosS0FDWixHQUFVLElBQU5kLEVBQ0EsT0FBT3E3QixHQUFtQnY0QixRQUFRcXFCLEdBQWVXLFNBRXJELElBQUkxQixFQUFTLElBQUk4eEIsR0FBNEJsK0MsR0FDN0MsT0FBT2MsS0FBS3cvQyxTQUNQalgsY0FBY3JMLEdBQUssU0FBVXA4QixHQUFVLE9BQU93cUIsRUFBT2t5QixXQUFXMThDLEVBQU8yckIsbUJBQ3ZFcnFCLE1BQUssV0FDTixPQUFPc0gsRUFBTTgxQyxTQUFTSyxzQ0FBc0MzaUIsR0FBSyxTQUFVelEsR0FBa0IsT0FBT25CLEVBQU9reUIsV0FBVy93QixTQUVySHJxQixNQUFLLFdBQWMsT0FBT2twQixFQUFPdzBCLGFBTTFDUCxFQUFvQmxnRCxVQUFVK29DLGNBQWdCLFNBQVVsTCxFQUFLMEcsRUFBWXlFLEdBQ3JFLE9BQU9yb0MsS0FBS3cvQyxTQUFTcFgsY0FBY2xMLEVBQUswRyxFQUFZeUUsSUFNeERrWCxFQUFvQmxnRCxVQUFVMGdELHdCQUEwQixTQUFVN2lCLEVBQUswRyxHQUNuRSxPQUFPNWpDLEtBQUt3L0MsU0FBU08sd0JBQXdCN2lCLEVBQUswRyxJQUV0RDJiLEVBQW9CbGdELFVBQVUyZ0QsUUFBVSxTQUFVOWlCLEVBQUttTCxHQUNuRCxJQUFJMytCLEVBQVExSixLQUNaLE9BQUlBLEtBQUtzUixPQUFPMHNDLCtCQUFpQ0QsR0FBVVEscUJBQ3ZENW1DLEVBQU0sc0JBQXVCLHdDQUN0QjRpQixHQUFtQnY0QixRQUFRMDdDLEtBRS9CMTlDLEtBQUtpZ0QsYUFBYS9pQixHQUFLOTZCLE1BQUssU0FBVWc4QyxHQUN6QyxPQUFJQSxFQUFZMTBDLEVBQU00SCxPQUFPMHNDLDhCQUN6QnJtQyxFQUFNLHNCQUF1QiwwQ0FBNEN5bUMsRUFBWSw0QkFDbkQxMEMsRUFBTTRILE9BQU8wc0MsOEJBQ3hDTixJQUdBaDBDLEVBQU13MkMscUJBQXFCaGpCLEVBQUttTCxPQUluRGtYLEVBQW9CbGdELFVBQVU0Z0QsYUFBZSxTQUFVL2lCLEdBQ25ELE9BQU9sOUIsS0FBS3cvQyxTQUFTUyxhQUFhL2lCLElBRXRDcWlCLEVBQW9CbGdELFVBQVU2Z0QscUJBQXVCLFNBQVVoakIsRUFBS21MLEdBQ2hFLElBQ0k4WCxFQUNBQyxFQUEwQnZDLEVBRTFCd0MsRUFBa0JDLEVBQW1CQyxFQUFrQkMsRUFKdkQ5MkMsRUFBUTFKLEtBS1J5Z0QsRUFBVXAzQyxLQUFLc0gsTUFDbkIsT0FBTzNRLEtBQUt5L0MscUJBQXFCdmlCLEVBQUtsOUIsS0FBS3NSLE9BQU8yc0MscUJBQzdDNzdDLE1BQUssU0FBVXMrQyxHQWFoQixPQVhJQSxFQUFrQmgzQyxFQUFNNEgsT0FBTzRzQyxpQ0FDL0J2bUMsRUFBTSxzQkFBdUIsOERBQ0RqTyxFQUFNNEgsT0FBTzRzQyxnQ0FBa0MsU0FDNUR3QyxHQUNmTixFQUEyQjEyQyxFQUFNNEgsT0FDNUI0c0MsaUNBR0xrQyxFQUEyQk0sRUFFL0JMLEVBQW1CaDNDLEtBQUtzSCxNQUNqQmpILEVBQU1rMkMsa0JBQWtCMWlCLEVBQUtrakIsTUFFbkNoK0MsTUFBSyxTQUFVd2hDLEdBR2hCLE9BRkF1YyxFQUEyQnZjLEVBQzNCMGMsRUFBb0JqM0MsS0FBS3NILE1BQ2xCakgsRUFBTTArQixjQUFjbEwsRUFBS2lqQixFQUEwQjlYLE1BRXpEam1DLE1BQUssU0FBVXUrQyxHQUdoQixPQUZBOUMsRUFBaUI4QyxFQUNqQkosRUFBbUJsM0MsS0FBS3NILE1BQ2pCakgsRUFBTXEyQyx3QkFBd0I3aUIsRUFBS2lqQixNQUV6Qy85QyxNQUFLLFNBQVUwN0MsSUFDaEIwQyxFQUFxQm4zQyxLQUFLc0gsTUFDdEJ3VCxLQUFpQm5LLEVBQVNPLFFBVTFCNUMsRUFBTSxzQkFUSyxpREFDcUIwb0MsRUFBbUJJLEdBQVcsd0NBQ25CTCxFQUEyQixRQUNqRUUsRUFBb0JELEdBQW1CLGlCQUN4QnhDLEVBQWlCLGdCQUNoQzBDLEVBQW1CRCxHQUFvQixpQkFDeEJ4QyxFQUFtQixrQkFDbEMwQyxFQUFxQkQsR0FBbUIsd0JBQ2xCQyxFQUFxQkMsR0FBVyxNQUcvRCxPQUFPbG1CLEdBQW1CdjRCLFFBQVEsQ0FDOUIyN0MsUUFBUSxFQUNSQyx5QkFBMEJ3QyxFQUMxQnZDLGVBQWdCQSxFQUNoQkMsaUJBQWtCQSxRQUl2QnlCLEVBbEg2QixHQTZJcENxQixHQUF3QyxXQUN4QyxTQUFTQSxJQUNMNWdELEtBQUs2Z0QscUJBQXVCLEdBUWhDLE9BTkFELEVBQXVCdmhELFVBQVU4akMsdUJBQXlCLFNBQVUyZCxHQUNoRTlnRCxLQUFLNmdELHFCQUFxQnA5QyxLQUFLcTlDLElBRW5DRixFQUF1QnZoRCxVQUFVMGhELHNCQUF3QixXQUNyRC9nRCxLQUFLNmdELHFCQUFxQnJ2QyxTQUFRLFNBQVVzdkMsR0FBWSxPQUFPQSxRQUU1REYsRUFWZ0MsR0E2QnZDSSxHQUFZLHVCQXNCWkMsR0FBK0IsNEhBRS9CQyxHQUFvQyx3S0FTcENDLEdBQXNDLFNBQVVoM0MsR0FFaEQsU0FBU2czQyxFQUFxQmpjLEVBQXFCcVQsR0FDL0MsSUFBSTd1QyxFQUFRUyxFQUFPdk0sS0FBS29DLE9BQVNBLEtBR2pDLE9BRkEwSixFQUFNdzdCLG9CQUFzQkEsRUFDNUJ4N0IsRUFBTTZ1QyxzQkFBd0JBLEVBQ3ZCN3VDLEVBRVgsT0FQQWxFLEVBQU0xRixVQUFVcWhELEVBQXNCaDNDLEdBTy9CZzNDLEVBUjhCLENBU3ZDUCxJQStDRTFhLEdBQXNDLFdBQ3RDLFNBQVNBLEVBQXFCZ1QsRUFBeUJ0dEIsRUFBZ0JndUIsRUFBVW4xQixFQUFVMjhCLEVBQVcvSSxFQUFPdlgsRUFBWXZVLEdBMkJySCxHQTFCQXZzQixLQUFLazVDLHdCQUEwQkEsRUFDL0JsNUMsS0FBSzRyQixlQUFpQkEsRUFDdEI1ckIsS0FBSzQ1QyxTQUFXQSxFQUNoQjU1QyxLQUFLcTRDLE1BQVFBLEVBQ2JyNEMsS0FBS3VzQixxQkFBdUJBLEVBQzVCdnNCLEtBQUtxaEQsVUFBVyxFQUNoQnJoRCxLQUFLc2hELFdBQVksRUFDakJ0aEQsS0FBSzg1QyxnQkFBaUIsRUFFdEI5NUMsS0FBS3VoRCxvQkFBc0IsS0FDM0J2aEQsS0FBSys1QyxjQUFlLEVBRXBCLzVDLEtBQUt3aEQsMEJBQTRCLEtBRWpDeGhELEtBQUt5aEQsd0JBQTBCLEtBRS9CemhELEtBQUswaEQsMEJBQTRCOTZCLE9BQU84YSxrQkFFeEMxaEMsS0FBSzJoRCxxQkFBdUIsU0FBVTcrQyxHQUFLLE9BQU9mLFFBQVFDLFdBQzFEaEMsS0FBS2doQyxrQkFBb0IsSUFBSTRnQixHQUFxQjVoRCxLQUFNb2hELEdBQ3hEcGhELEtBQUs2aEQsT0FBU2oyQixFQUFpQnNhLEVBQXFCNGIsY0FDcEQ5aEQsS0FBSzhnQyxXQUFhLElBQUlrYSxHQUFnQmxhLEdBQ3RDOWdDLEtBQUtvZixTQUFXcUYsRUFBU3JGLFNBQ3pCcGYsS0FBSytoRCxZQUFjLElBQUloYixHQUFxQi9tQyxLQUFLZ2hDLGtCQUFtQmhoQyxLQUFLOGdDLFlBQ3pFOWdDLEtBQUsrZ0MsYUFBZSxJQUFJc1osR0FDeEJyNkMsS0FBS2dpRCxvQkFBc0IsSUFBSXhQLEdBQTZCeHlDLEtBQUs4Z0MsV0FBWTlnQyxLQUFLK2dDLGVBQzlFdGMsRUFBU3ZVLFNBQVV1VSxFQUFTdlUsT0FBTyt4QyxhQUtuQyxNQUFNLElBQUkvN0IsRUFBZWpCLEVBQUtjLGNBQWUsbUZBSjdDL2xCLEtBQUtrUSxPQUFTdVUsRUFBU3ZVLE9BQ3ZCbFEsS0FBS2tpRCxXQUFhbGlELEtBQUtrUSxPQUFPK3hDLGFBeW9CdEMsT0Fub0JBL2IsRUFBcUJqSixTQUFXLFNBQVVDLEVBQUt6Z0IsR0FDM0MsR0FBSXlnQixhQUFlaWtCLEdBQ2YsT0FBT3RsQixHQUFTb0IsU0FBU0MsRUFBSWdJLG9CQUFxQnpvQixHQUdsRCxNQUFNb0ksRUFBSyxvRUFHbkJxaEIsRUFBcUJpYywyQkFBNkIsU0FBVTd0QyxHQUN4RCxPQUFPOU8sRUFBTTlELFVBQVUxQixVQUFNLE9BQVEsR0FBUSxXQUN6QyxJQUFJb2lELEVBQ0osT0FBTzU4QyxFQUFNL0MsWUFBWXpDLE1BQU0sU0FBVWlMLEdBQ3JDLE9BQVFBLEVBQUdsSSxPQUNQLEtBQUssRUFDRCxJQUFLbWpDLEVBQXFCakssY0FDdEIsTUFBTSxJQUFJL1YsRUFBZWpCLEVBQUtjLGNBakhyQixzSUFvSGIsTUFBTyxDQUFDLEdBRFJxOEIsRUFBYyxJQUFJbGMsRUFBcUI1eEIsRUFBUTRrQyx3QkFBeUI1a0MsRUFBUXNYLGVBQWdCdFgsRUFBUXNsQyxTQUFVdGxDLEVBQVFtUSxTQUFVblEsRUFBUThzQyxVQUFXOXNDLEVBQVErakMsTUFBTy9qQyxFQUFRd3NCLFdBQVl4c0IsRUFBUWlZLHVCQUNqSzhELFNBQ3JDLEtBQUssRUFFRCxPQURBcGxCLEVBQUdqSSxPQUNJLENBQUMsRUFBY28vQyxXQVUxQ2xjLEVBQXFCN21DLFVBQVVneEIsTUFBUSxXQUNuQyxJQUFJM21CLEVBQVExSixLQUdaLE9BRkE2RixHQUFRN0YsS0FBS3FpRCxRQUFTLHdDQUN0Qng4QyxFQUF1QixPQUFoQjdGLEtBQUtrUSxPQUFpQixtQ0FDdEIyckIsR0FBU0UsYUFBYS83QixLQUFLNmhELE9BQVF4bEIsR0FBZ0IsSUFBSThaLEdBQWdCbjJDLEtBQUs4Z0MsYUFDOUV0K0IsTUFBSyxTQUFVeWEsR0FJaEIsT0FIQXZULEVBQU00NEMsU0FBV3JsQyxFQUdWdlQsRUFBTTY0Qyw2Q0FFWi8vQyxNQUFLLFdBSU4sT0FIQWtILEVBQU04NEMsMEJBQ045NEMsRUFBTSs0Qyx5QkFDTi80QyxFQUFNZzVDLGlEQUNDaDVDLEVBQU00NEMsU0FBUzlrQixlQUFlLHNCQUF1QixDQUFDZ0wsR0FBZS9yQixRQUFRLFNBQVV5Z0IsR0FBTyxPQUFPc0ssR0FBK0J0SyxTQUUxSTE2QixNQUFLLFNBQVVrbEMsR0FDaEJoK0IsRUFBTWk1QyxlQUFpQixJQUFJdDJCLEdBQWVxYixFQUE2QmgrQixFQUFNNmlCLHlCQUU1RS9wQixNQUFLLFdBQ05rSCxFQUFNMjNDLFVBQVcsS0FFaEJ2M0MsT0FBTSxTQUFVNm1CLEdBRWpCLE9BREFqbkIsRUFBTTQ0QyxVQUFZNTRDLEVBQU00NEMsU0FBU3YwQyxRQUMxQmhNLFFBQVFFLE9BQU8wdUIsT0FHOUJ1VixFQUFxQjdtQyxVQUFVdWpELHdCQUEwQixTQUFVakIsR0FDL0QsSUFBSWo0QyxFQUFRMUosS0FTWixPQVJBQSxLQUFLMmhELHFCQUF1QixTQUFVa0IsR0FBZ0IsT0FBT3I5QyxFQUFNOUQsVUFBVWdJLE9BQU8sT0FBUSxHQUFRLFdBQ2hHLE9BQU9sRSxFQUFNL0MsWUFBWXpDLE1BQU0sU0FBVWlMLEdBQ3JDLE9BQUlqTCxLQUFLcWlELFFBQ0UsQ0FBQyxFQUFjVixFQUFxQmtCLElBRXhDLENBQUMsVUFHVGxCLEVBQXFCM2hELEtBQUtzaEQsWUFFckNwYixFQUFxQjdtQyxVQUFVeWpELDJCQUE2QixTQUFVQyxHQUNsRSxJQUFJcjVDLEVBQVExSixLQUNaQSxLQUFLc2lELFNBQVNqbEIsMEJBQXlCLFNBQVUxZSxHQUFTLE9BQU9uWixFQUFNOUQsVUFBVWdJLE9BQU8sT0FBUSxHQUFRLFdBQ3BHLE9BQU9sRSxFQUFNL0MsWUFBWXpDLE1BQU0sU0FBVWlMLEdBQ3JDLE9BQVFBLEVBQUdsSSxPQUNQLEtBQUssRUFDRCxPQUEyQixPQUFyQjRiLEVBQU1xa0MsV0FBNkIsQ0FBQyxFQUFhLEdBQ2hELENBQUMsRUFBYUQsS0FDekIsS0FBSyxFQUNEOTNDLEVBQUdqSSxPQUNIaUksRUFBR2xJLE1BQVEsRUFDZixLQUFLLEVBQUcsTUFBTyxDQUFDLGNBS2hDbWpDLEVBQXFCN21DLFVBQVU0akQsa0JBQW9CLFNBQVVuSixHQUN6RCxJQUFJcHdDLEVBQVExSixLQUNSQSxLQUFLODVDLGlCQUFtQkEsSUFDeEI5NUMsS0FBSzg1QyxlQUFpQkEsRUFHdEI5NUMsS0FBS3E0QyxNQUFNeG5CLGtCQUFpQixXQUFjLE9BQU9yckIsRUFBTTlELFVBQVVnSSxPQUFPLE9BQVEsR0FBUSxXQUNwRixPQUFPbEUsRUFBTS9DLFlBQVl6QyxNQUFNLFNBQVVpTCxHQUNyQyxPQUFRQSxFQUFHbEksT0FDUCxLQUFLLEVBQ0QsT0FBSy9DLEtBQUtxaUQsUUFDSCxDQUFDLEVBQWFyaUQsS0FBS3VpRCwyQ0FEQSxDQUFDLEVBQWEsR0FFNUMsS0FBSyxFQUNEdDNDLEVBQUdqSSxPQUNIaUksRUFBR2xJLE1BQVEsRUFDZixLQUFLLEVBQUcsTUFBTyxDQUFDLGVBWXBDbWpDLEVBQXFCN21DLFVBQVVrakQsd0NBQTBDLFdBQ3JFLElBQUk3NEMsRUFBUTFKLEtBQ1osT0FBT0EsS0FBS3NpRCxTQUNQOWtCLGVBQWUsdUJBQXdCNGMsSUFBWSxTQUFVbGQsR0FFOUQsT0FEb0JnbUIsR0FBb0JobUIsR0FFbkNpQyxJQUFJLElBQUltWSxHQUFpQjV0QyxFQUFNa3dDLFNBQVV2d0MsS0FBS3NILE1BQU9qSCxFQUFNb3dDLGVBQWdCcHdDLEVBQU1xd0MsZUFDakYzM0MsTUFBSyxXQUNOLEdBQUlzSCxFQUFNNDNDLFVBQ04sT0FBTzUzQyxFQUFNeTVDLG1CQUFtQmptQixHQUFLOTZCLE1BQUssU0FBVWdoRCxHQUMzQ0EsSUFDRDE1QyxFQUFNNDNDLFdBQVksRUFDbEI1M0MsRUFBTTJ1QyxNQUFNeG5CLGtCQUFpQixXQUN6QixPQUFPbm5CLEVBQU1pNEMsc0JBQXFCLGFBTWpEdi9DLE1BQUssV0FBYyxPQUFPc0gsRUFBTTI1QyxnQkFBZ0JubUIsTUFDaEQ5NkIsTUFBSyxTQUFVaWhELEdBQ2hCLE9BQUkzNUMsRUFBTTQzQyxZQUFjK0IsRUFDYjM1QyxFQUFNNDVDLDBCQUEwQnBtQixHQUFLOTZCLE1BQUssV0FBYyxPQUFPLE9BRWpFaWhELEdBQ0UzNUMsRUFBTTY1Qyw0QkFBNEJybUIsR0FBSzk2QixNQUFLLFdBQWMsT0FBTyxXQU8vRTBILE9BQU0sU0FBVXRKLEdBQ2pCLElBQUtrSixFQUFNd3ZDLHdCQUNQLE1BQU0xNEMsRUFHVixPQURBbVgsRUFBTXFwQyxHQUFXLHlEQUEwRHhnRCxJQUNuRCxLQUV2QmdDLE1BQUssU0FBVTgrQyxHQUNaNTNDLEVBQU00M0MsWUFBY0EsR0FDcEI1M0MsRUFBTTJ1QyxNQUFNeG5CLGtCQUFpQixXQUN6QixPQUFPbm5CLEVBQU1pNEMscUJBQXFCTCxNQUcxQzUzQyxFQUFNNDNDLFVBQVlBLE1BRzFCcGIsRUFBcUI3bUMsVUFBVThqRCxtQkFBcUIsU0FBVWptQixHQUMxRCxJQUFJeHpCLEVBQVExSixLQUVaLE9BRFl3akQsR0FBbUJ0bUIsR0FDbEI1K0IsSUFBSWc0QyxHQUFnQnQzQyxLQUFLb0QsTUFBSyxTQUFVcWhELEdBQ2pELE9BQU9scEIsR0FBbUJ2NEIsUUFBUTBILEVBQU1nNkMsY0FBY0QsUUFHOUR2ZCxFQUFxQjdtQyxVQUFVc2tELHFCQUF1QixTQUFVem1CLEdBRTVELE9BRG9CZ21CLEdBQW9CaG1CLEdBQ25CaG9CLE9BQU9sVixLQUFLNDVDLFdBT3JDMVQsRUFBcUI3bUMsVUFBVXVrRCxvQ0FBc0MsV0FDakUsT0FBT3ArQyxFQUFNOUQsVUFBVTFCLFVBQU0sT0FBUSxHQUFRLFdBQ3pDLElBQ0kwSixFQUFRMUosS0FDWixPQUFPd0YsRUFBTS9DLFlBQVl6QyxNQUFNLFNBQVVpTCxHQUNyQyxPQUFRQSxFQUFHbEksT0FDUCxLQUFLLEVBQ0QsT0FBTS9DLEtBQUtzaEQsV0FDTnRoRCxLQUFLNmpELFlBQVk3akQsS0FBSzBoRCwwQkFsVDNCLE1Ba1RrRixDQUFDLEVBQWEsSUFDaEcxaEQsS0FBSzBoRCwwQkFBNEJyNEMsS0FBS3NILE1BQy9CLENBQUMsRUFBYTNRLEtBQUt3OUIsZUFBZSxzQ0FBdUMsZ0NBQWdDLFNBQVVOLEdBQ2xILElBQUk0bUIsRUFBZ0I1ZCxFQUFxQmpKLFNBQVNDLEVBQUtvYSxHQUFpQjc2QixPQUN4RSxPQUFPcW5DLEVBQWN6a0IsVUFBVWo5QixNQUFLLFNBQVUyaEQsR0FDMUMsSUFBSUMsRUFBU3Q2QyxFQUFNdTZDLG9CQUFvQkYsRUF2VG5ELE1Bd1RnQkcsRUFBV0gsRUFBZ0J4dUMsUUFBTyxTQUFVNHVDLEdBQVUsT0FBbUMsSUFBNUJILEVBQU92akQsUUFBUTBqRCxNQUVoRixPQUFPNXBCLEdBQW1CL29CLFFBQVEweUMsR0FBVSxTQUFVRSxHQUNsRCxPQUFPTixFQUFjNXVDLE9BQU9rdkMsRUFBZXhLLGFBQzVDeDNDLE1BQUssV0FBYyxPQUFPOGhELGFBRzdDLEtBQUssRUFDaUJqNUMsRUFBR2pJLE9BTUx3TyxTQUFRLFNBQVU0eUMsR0FDOUIxNkMsRUFBTXdHLE9BQU8reEMsYUFBYW9DLFdBQVczNkMsRUFBTTQ2Qyw2QkFBNkJGLEVBQWV4SyxjQUUzRjN1QyxFQUFHbEksTUFBUSxFQUNmLEtBQUssRUFBRyxNQUFPLENBQUMsV0FTaENtakMsRUFBcUI3bUMsVUFBVXFqRCwrQ0FBaUQsV0FDNUUsSUFBSWg1QyxFQUFRMUosS0FDWkEsS0FBS3loRCx3QkFBMEJ6aEQsS0FBS3E0QyxNQUFNeG1CLGtCQUFrQmpILEdBQVEyNUIsc0JBdFVsQyxLQXNVOEYsV0FDNUgsT0FBTzc2QyxFQUFNNjRDLDBDQUNSLy9DLE1BQUssV0FBYyxPQUFPa0gsRUFBTWs2Qyx5Q0FDaENwaEQsTUFBSyxXQUFjLE9BQU9rSCxFQUFNZzVDLHdEQUk3Q3hjLEVBQXFCN21DLFVBQVVxa0QsY0FBZ0IsU0FBVVMsR0FDckQsUUFBT0EsR0FBU0EsRUFBT2xMLFVBQVlqNUMsS0FBSzQ1QyxVQVM1QzFULEVBQXFCN21DLFVBQVVna0QsZ0JBQWtCLFNBQVVubUIsR0FDdkQsSUFBSXh6QixFQUFRMUosS0FFWixPQURZd2pELEdBQW1CdG1CLEdBRTFCNStCLElBQUlnNEMsR0FBZ0J0M0MsS0FDcEJvRCxNQUFLLFNBQVVvaUQsR0FZaEIsR0FYNkMsT0FBbkJBLEdBQ3RCOTZDLEVBQU1tNkMsWUFBWVcsRUFBZXJMLGlCQXZXZixPQXdXakJ6dkMsRUFBTSs2QyxnQkFBZ0JELEVBQWV2TCxTQVNqQixDQUNyQixHQUFJdnZDLEVBQU1nNkMsY0FBY2MsSUFBbUI5NkMsRUFBTW93QyxlQUM3QyxPQUFPLEVBRVgsSUFBS3B3QyxFQUFNZzZDLGNBQWNjLEdBQWlCLENBQ3RDLElBQUtBLEVBQWV0TCx3QkFhaEIsTUFBTSxJQUFJaHpCLEVBQWVqQixFQUFLVyxvQkFBcUJzN0IsSUFFdkQsT0FBTyxHQUdmLFNBQUl4M0MsRUFBTW93QyxpQkFBa0Jwd0MsRUFBTXF3QyxlQUczQm1KLEdBQW9CaG1CLEdBQ3RCbUMsVUFDQWo5QixNQUFLLFNBQVUyaEQsR0FnQmhCLFlBQThCeDZDLElBYkxHLEVBQU11NkMsb0JBQW9CRixFQWhaakMsS0FnWitFVyxNQUFLLFNBQVVDLEdBQzVHLEdBQUlqN0MsRUFBTWt3QyxXQUFhK0ssRUFBWS9LLFNBQVUsQ0FDekMsSUFBSWdMLEdBQW9DbDdDLEVBQU1vd0MsZ0JBQWtCNkssRUFBWTdLLGVBQ3hFK0ssR0FBa0NuN0MsRUFBTXF3QyxjQUFnQjRLLEVBQVk1SyxhQUNwRStLLEVBQWlDcDdDLEVBQU1vd0MsaUJBQW1CNkssRUFBWTdLLGVBQzFFLEdBQUk4SyxHQUNDQyxHQUNHQyxFQUNKLE9BQU8sRUFHZixPQUFPLFdBS2QxaUQsTUFBSyxTQUFVaWhELEdBSWhCLE9BSEkzNUMsRUFBTTQzQyxZQUFjK0IsR0FDcEIxckMsRUFBTXFwQyxHQUFXLFdBQWFxQyxFQUFrQixLQUFPLFVBQVksa0NBRWhFQSxNQUdmbmQsRUFBcUI3bUMsVUFBVTBsRCxTQUFXLFdBQ3RDLE9BQU92L0MsRUFBTTlELFVBQVUxQixVQUFNLE9BQVEsR0FBUSxXQUN6QyxJQUFJMEosRUFBUTFKLEtBQ1osT0FBT3dGLEVBQU0vQyxZQUFZekMsTUFBTSxTQUFVaUwsR0FDckMsT0FBUUEsRUFBR2xJLE9BQ1AsS0FBSyxFQVdELE9BUkEvQyxLQUFLcWhELFVBQVcsRUFDaEJyaEQsS0FBS2dsRCxvQkFDRGhsRCxLQUFLeWhELDBCQUNMemhELEtBQUt5aEQsd0JBQXdCL3dCLFNBQzdCMXdCLEtBQUt5aEQsd0JBQTBCLE1BRW5DemhELEtBQUtpbEQsMEJBQ0xqbEQsS0FBS2tsRCx5QkFDRSxDQUFDLEVBQWFsbEQsS0FBS3NpRCxTQUFTOWtCLGVBQWUsdUJBQXdCLENBQUM4WSxHQUFnQjc1QixNQUFPNjZCLEdBQWlCNzZCLFFBQVEsU0FBVXlnQixHQUM3SCxPQUFPeHpCLEVBQU00NUMsMEJBQTBCcG1CLEdBQUs5NkIsTUFBSyxXQUM3QyxPQUFPc0gsRUFBTWk2QyxxQkFBcUJ6bUIsVUFHbEQsS0FBSyxFQU1ELE9BTEFqeUIsRUFBR2pJLE9BQ0hoRCxLQUFLc2lELFNBQVN2MEMsUUFHZC9OLEtBQUttbEQsMkJBQ0UsQ0FBQyxXQVM1QmpmLEVBQXFCN21DLFVBQVU0a0Qsb0JBQXNCLFNBQVVtQixFQUFTQyxHQUNwRSxJQUFJMzdDLEVBQVExSixLQUNaLE9BQU9vbEQsRUFBUTd2QyxRQUFPLFNBQVU0dUMsR0FDNUIsT0FBT3o2QyxFQUFNbTZDLFlBQVlNLEVBQU90SyxhQUFjd0wsS0FDekMzN0MsRUFBTSs2QyxnQkFBZ0JOLEVBQU92SyxjQUcxQzFULEVBQXFCN21DLFVBQVVpbUQsaUJBQW1CLFdBQzlDLElBQUk1N0MsRUFBUTFKLEtBQ1osT0FBT0EsS0FBS3NpRCxTQUFTOWtCLGVBQWUsc0JBQXVCLENBQUM4WixHQUFpQjc2QixRQUFRLFNBQVV5Z0IsR0FDM0YsT0FBT2dtQixHQUFvQmhtQixHQUN0Qm1DLFVBQ0FqOUIsTUFBSyxTQUFVZ2pELEdBQ2hCLE9BQU8xN0MsRUFBTXU2QyxvQkFBb0JtQixFQTlkekIsTUE4ZHFEbjBDLEtBQUksU0FBVXMwQyxHQUFrQixPQUFPQSxFQUFlM0wsbUJBSS9IMVQsRUFBcUJzZixpQkFBbUIsU0FBVTU1QixHQUM5QyxPQUFPcG1CLEVBQU05RCxVQUFVMUIsVUFBTSxPQUFRLEdBQVEsV0FDekMsSUFBSTZoRCxFQUNKLE9BQU9yOEMsRUFBTS9DLFlBQVl6QyxNQUFNLFNBQVVpTCxHQUNyQyxPQUFRQSxFQUFHbEksT0FDUCxLQUFLLEVBQ0QsT0FBS21qQyxFQUFxQmpLLGVBRzFCNGxCLEVBQVNqMkIsRUFBaUJzYSxFQUFxQjRiLGNBQ3hDLENBQUMsRUFBYWptQixHQUFTM21CLE9BQU8yc0MsS0FIMUIsQ0FBQyxFQUFjOS9DLFFBQVFDLFdBSXRDLEtBQUssRUFFRCxPQURBaUosRUFBR2pJLE9BQ0ksQ0FBQyxXQUs1QjdFLE9BQU9DLGVBQWU4bkMsRUFBcUI3bUMsVUFBVyxVQUFXLENBQzdEZixJQUFLLFdBQ0QsT0FBTzBCLEtBQUtxaEQsVUFFaEJoakQsWUFBWSxFQUNaa1osY0FBYyxJQUVsQjJ1QixFQUFxQjdtQyxVQUFVb21ELGlCQUFtQixTQUFVdGtCLEdBRXhELE9BREF0N0IsRUFBTzdGLEtBQUtxaUQsUUFBUyxrRUFDZHpoQixHQUF1Qk0sUUFBUUMsRUFBTW5oQyxLQUFLOGdDLFdBQVk5Z0MsS0FBSytnQyxhQUFjL2dDLEtBQUtnaEMsb0JBRXpGa0YsRUFBcUI3bUMsVUFBVXFtRCxlQUFpQixXQUU1QyxPQURBNy9DLEVBQU83RixLQUFLcWlELFFBQVMsZ0VBQ2RyaUQsS0FBSytoRCxhQUVoQjdiLEVBQXFCN21DLFVBQVVzbUQsdUJBQXlCLFdBRXBELE9BREE5L0MsRUFBTzdGLEtBQUtxaUQsUUFBUyx3RUFDZHJpRCxLQUFLZ2lELHFCQUVoQjliLEVBQXFCN21DLFVBQVV1bUQsZ0JBQWtCLFdBRTdDLE9BREEvL0MsRUFBTzdGLEtBQUtxaUQsUUFBUyxpRUFDZHJpRCxLQUFLK2dDLGNBRWhCbUYsRUFBcUI3bUMsVUFBVW0rQixlQUFpQixTQUFVekksRUFBUW4yQixFQUFNaW5ELEdBQ3BFLElBQUluOEMsRUFBUTFKLEtBQ1oyWCxFQUFNcXBDLEdBQVcsd0JBQXlCanNCLEdBRTFDLElBU0krd0IsRUFUQWxvQixFQUFhaC9CLEVBQUtxL0IsU0FBUyxjQUUzQjhuQixFQURXbm5ELEVBQUtvL0IsV0FBVyxZQUV6QkosRUFDSSxzQkFDQSxXQUNKQSxFQUNJLHVCQUNBLFlBSVYsT0FBTzU5QixLQUFLc2lELFNBQ1A5a0IsZUFBZXVvQixFQUFjM0wsSUFBWSxTQUFVNEwsR0FFcEQsT0FEQUYsRUFBeUIsSUFBSTNFLEdBQXFCNkUsRUFBYXQ4QyxFQUFNaTVDLGVBQWV2Z0QsUUFDdkUsc0JBQVR4RCxHQUNTLGlDQUFUQSxFQU1POEssRUFBTXk1QyxtQkFBbUI2QyxHQUMzQjVqRCxNQUFLLFNBQVU2akQsR0FDaEIsUUFBSUEsR0FHR3Y4QyxFQUFNMjVDLGdCQUFnQjJDLE1BRTVCNWpELE1BQUssU0FBVTZqRCxHQUNoQixJQUFLQSxFQU1ELE1BTEFuaUQsRUFBTSw4Q0FBZ0RpeEIsRUFBUyxNQUMvRHJyQixFQUFNNDNDLFdBQVksRUFDbEI1M0MsRUFBTTJ1QyxNQUFNeG5CLGtCQUFpQixXQUN6QixPQUFPbm5CLEVBQU1pNEMsc0JBQXFCLE1BRWhDLElBQUl6N0IsRUFBZWpCLEVBQUtXLG9CQUFxQnE3QixJQUV2RCxPQUFPNEUsRUFBcUJDLE1BRTNCMWpELE1BQUssU0FBVUUsR0FDaEIsT0FBT29ILEVBQU02NUMsNEJBQTRCeUMsR0FBYTVqRCxNQUFLLFdBQWMsT0FBT0UsUUFJN0VvSCxFQUFNdzhDLDhCQUE4QkYsR0FBYTVqRCxNQUFLLFdBQ3pELE9BQU95akQsRUFBcUJDLFNBSW5DdGpELE1BQUssU0FBVUYsR0FFaEIsT0FEQXdqRCxFQUF1Qi9FLHdCQUNoQnorQyxNQVNmNGpDLEVBQXFCN21DLFVBQVU2bUQsOEJBQWdDLFNBQVVocEIsR0FDckUsSUFBSXh6QixFQUFRMUosS0FFWixPQURZd2pELEdBQW1CdG1CLEdBQ2xCNStCLElBQUlnNEMsR0FBZ0J0M0MsS0FBS29ELE1BQUssU0FBVW9pRCxHQUlqRCxHQUg2QyxPQUFuQkEsR0FDdEI5NkMsRUFBTW02QyxZQUFZVyxFQUFlckwsaUJBM2tCZixPQTRrQmpCenZDLEVBQU0rNkMsZ0JBQWdCRCxFQUFldkwsV0FDZHZ2QyxFQUFNZzZDLGNBQWNjLEtBQ3ZDQSxFQUFldEwsd0JBQ2hCLE1BQU0sSUFBSWh6QixFQUFlakIsRUFBS1csb0JBQXFCczdCLFFBU25FaGIsRUFBcUI3bUMsVUFBVWtrRCw0QkFBOEIsU0FBVXJtQixHQUNuRSxJQUFJaXBCLEVBQWEsSUFBSTdQLEdBQWdCdDJDLEtBQUs0NUMsU0FBVTU1QyxLQUFLazVDLHdCQUF5Qjd2QyxLQUFLc0gsT0FDdkYsT0FBTzZ5QyxHQUFtQnRtQixHQUFLaUMsSUFBSW1YLEdBQWdCdDNDLElBQUttbkQsSUFFNURqZ0IsRUFBcUJqSyxZQUFjLFdBQy9CLE9BQU9KLEdBQVNJLGVBTXBCaUssRUFBcUJrZ0IsbUJBQXFCLFNBQVVDLEdBUWhELElBQUlsNkIsRUFBV2s2QixFQUFhMTZCLFdBQVdPLFVBSXZDLE9BSEttNkIsRUFBYTE2QixXQUFXMjZCLG9CQUN6Qm42QixHQUFZLElBQU1rNkIsRUFBYTE2QixXQUFXUSxVQUV2QyxhQUFlazZCLEVBQWF6NkIsZUFBaUIsSUFBTU8sRUFBVyxLQUd6RStaLEVBQXFCN21DLFVBQVVpa0QsMEJBQTRCLFNBQVVwbUIsR0FDakUsSUFBSXh6QixFQUFRMUosS0FDUnljLEVBQVErbUMsR0FBbUJ0bUIsR0FDL0IsT0FBT3pnQixFQUFNbmUsSUFBSWc0QyxHQUFnQnQzQyxLQUFLb0QsTUFBSyxTQUFVcWhELEdBQ2pELE9BQUkvNUMsRUFBTWc2QyxjQUFjRCxJQUNwQjlyQyxFQUFNcXBDLEdBQVcsNEJBQ1Z2a0MsRUFBTXZILE9BQU9vaEMsR0FBZ0J0M0MsTUFHN0J1N0IsR0FBbUJ2NEIsY0FLdENra0MsRUFBcUI3bUMsVUFBVXdrRCxZQUFjLFNBQVVoSyxFQUFjME0sR0FDakUsSUFBSTUxQyxFQUFNdEgsS0FBS3NILE1BR2YsUUFBSWtwQyxFQUZnQmxwQyxFQUFNNDFDLE9BS2pCMU0sRUFKV2xwQyxLQUtoQjdNLEVBQU0sa0RBQW9EKzFDLEVBQWUsTUFMekRscEMsSUFNVCxLQUlmdTFCLEVBQXFCN21DLFVBQVVtakQsd0JBQTBCLFdBQ3JELElBQUk5NEMsRUFBUTFKLEtBQ1UsT0FBbEJBLEtBQUtvZixVQUNxQyxtQkFBbkNwZixLQUFLb2YsU0FBU29uQyxtQkFDckJ4bUQsS0FBS3doRCwwQkFBNEIsV0FDN0I5M0MsRUFBTTJ1QyxNQUFNeG5CLGtCQUFpQixXQUV6QixPQURBbm5CLEVBQU1xd0MsYUFBa0QsWUFBbkNyd0MsRUFBTTBWLFNBQVNxbkMsZ0JBQzdCLzhDLEVBQU02NEMsOENBR3JCdmlELEtBQUtvZixTQUFTb25DLGlCQUFpQixtQkFBb0J4bUQsS0FBS3doRCwyQkFDeER4aEQsS0FBSys1QyxhQUFpRCxZQUFsQy81QyxLQUFLb2YsU0FBU3FuQyxrQkFHMUN2Z0IsRUFBcUI3bUMsVUFBVTRsRCx3QkFBMEIsV0FDakRqbEQsS0FBS3doRCw0QkFDTDM3QyxFQUF5QixPQUFsQjdGLEtBQUtvZixVQUNrQyxtQkFBbkNwZixLQUFLb2YsU0FBU29uQyxpQkFBaUMseURBQzFEeG1ELEtBQUtvZixTQUFTc25DLG9CQUFvQixtQkFBb0IxbUQsS0FBS3doRCwyQkFDM0R4aEQsS0FBS3doRCwwQkFBNEIsT0FhekN0YixFQUFxQjdtQyxVQUFVb2pELHVCQUF5QixXQUNwRCxJQUFJLzRDLEVBQVExSixLQUNnQyxtQkFBakNBLEtBQUtrUSxPQUFPczJDLG1CQUNuQnhtRCxLQUFLdWhELG9CQUFzQixXQUl2QjczQyxFQUFNczdDLG9CQUNOdDdDLEVBQU0ydUMsTUFBTXhuQixrQkFBaUIsV0FHekIsT0FBT25uQixFQUFNcTdDLGVBR3JCL2tELEtBQUtrUSxPQUFPczJDLGlCQUFpQixTQUFVeG1ELEtBQUt1aEQsdUJBR3BEcmIsRUFBcUI3bUMsVUFBVTZsRCx1QkFBeUIsV0FDaERsbEQsS0FBS3VoRCxzQkFDTDE3QyxFQUFrRCxtQkFBcEM3RixLQUFLa1EsT0FBT3cyQyxvQkFBb0MsMERBQzlEMW1ELEtBQUtrUSxPQUFPdzJDLG9CQUFvQixTQUFVMW1ELEtBQUt1aEQscUJBQy9DdmhELEtBQUt1aEQsb0JBQXNCLE9BUW5DcmIsRUFBcUI3bUMsVUFBVW9sRCxnQkFBa0IsU0FBVTdLLEdBQ3ZELElBQ0ksSUFBSStNLEVBQ0EsT0FEWTNtRCxLQUFLa2lELFdBQVcwRSxRQUFRNW1ELEtBQUtza0QsNkJBQTZCMUssSUFHMUUsT0FEQWppQyxFQUFNcXBDLEdBQVcsV0FBYXBILEVBQVcsTUFBUStNLEVBQVksS0FBTyxVQUFZLDRCQUN6RUEsRUFFWCxNQUFPbm1ELEdBR0gsT0FEQXNELEVBQU1rOUMsR0FBVyxtQ0FBb0N4Z0QsSUFDOUMsSUFPZjBsQyxFQUFxQjdtQyxVQUFVMmxELGtCQUFvQixXQUMvQyxJQUNJaGxELEtBQUtraUQsV0FBVzJFLFFBQVE3bUQsS0FBS3NrRCw2QkFBNkJ0a0QsS0FBSzQ1QyxVQUFXdnhDLE9BQU9nQixLQUFLc0gsUUFFMUYsTUFBT25RLEdBRUhzRCxFQUFNLGtDQUFtQ3RELEtBSWpEMGxDLEVBQXFCN21DLFVBQVU4bEQseUJBQTJCLFdBQ3RELElBQ0lubEQsS0FBS2tpRCxXQUFXbUMsV0FBV3JrRCxLQUFLc2tELDZCQUE2QnRrRCxLQUFLNDVDLFdBRXRFLE1BQU9wNUMsTUFJWDBsQyxFQUFxQjdtQyxVQUFVaWxELDZCQUErQixTQUFVMUssR0FDcEUsTUFBT2tOLG9CQUFtQzltRCxLQUFLNHJCLGVBQWlCLElBQU1ndUIsR0FNMUUxVCxFQUFxQjRiLGNBQWdCLE9BQzlCNWIsRUF2cUI4QixHQXVyQnpDLFNBQVNvWixHQUF5Qnh3QyxHQUM5QixPQUFPdEosRUFBTTlELFVBQVUxQixVQUFNLE9BQVEsR0FBUSxXQUN6QyxPQUFPd0YsRUFBTS9DLFlBQVl6QyxNQUFNLFNBQVVpTCxHQUNyQyxJQWpCWixTQUFpQzZELEdBQzdCLE9BQVFBLEVBQUkxRSxPQUFTNmEsRUFBS1cscUJBQ3RCOVcsRUFBSS9JLFVBQVlrN0MsR0FlUjhGLENBQXdCajRDLEdBSXhCLE1BQU1BLEVBRVYsT0FMSTZJLEVBQU1xcEMsR0FBVyxtQ0FLZCxDQUFDLFNBT3BCLFNBQVN3QyxHQUFtQnRtQixHQUN4QixPQUFPQSxFQUFJemdCLE1BQU02NUIsR0FBZ0I3NUIsT0FLckMsU0FBU3ltQyxHQUFvQmhtQixHQUN6QixPQUFPQSxFQUFJemdCLE1BQU02NkIsR0FBaUI3NkIsT0FHdEMsSUFBSW1sQyxHQUFzQyxXQUN0QyxTQUFTQSxFQUFxQjNrQyxFQUFJM0wsR0FDOUJ0UixLQUFLaWQsR0FBS0EsRUFDVmpkLEtBQUtnbkQsYUFBZSxLQUNwQmhuRCxLQUFLNitDLGlCQUFtQixJQUFJVSxHQUFvQnYvQyxLQUFNc1IsR0F1STFELE9BcklBc3dDLEVBQXFCdmlELFVBQVVzZ0QsdUJBQXlCLFNBQVV6aUIsR0FDOUQsSUFBSStwQixFQUFrQmpuRCxLQUFLa25ELHFCQUFxQmhxQixHQUVoRCxPQUR5Qmw5QixLQUFLaWQsR0FBR3lvQyxpQkFBaUIvYyxlQUFlekwsR0FDdkM5NkIsTUFBSyxTQUFVMGxDLEdBQ3JDLE9BQU9tZixFQUFnQjdrRCxNQUFLLFNBQVUra0QsR0FBWSxPQUFPcmYsRUFBY3FmLFNBRy9FdkYsRUFBcUJ2aUQsVUFBVTZuRCxxQkFBdUIsU0FBVWhxQixHQUM1RCxJQUFJa3FCLEVBQWdCLEVBQ3BCLE9BQU9wbkQsS0FBSzYvQyxzQ0FBc0MzaUIsR0FBSyxTQUFVcDZCLEdBQzdEc2tELE9BQ0RobEQsTUFBSyxXQUFjLE9BQU9nbEQsTUFFakN4RixFQUFxQnZpRCxVQUFVa3BDLGNBQWdCLFNBQVVyTCxFQUFLdjZCLEdBQzFELE9BQU8zQyxLQUFLaWQsR0FBR3lvQyxpQkFBaUJuZCxjQUFjckwsRUFBS3Y2QixJQUV2RGkvQyxFQUFxQnZpRCxVQUFVd2dELHNDQUF3QyxTQUFVM2lCLEVBQUt2NkIsR0FDbEYsT0FBTzNDLEtBQUtxbkQsd0JBQXdCbnFCLEdBQUssU0FBVTlELEVBQVEzTSxHQUN2RCxPQUFPOXBCLEVBQUU4cEIsT0FHakJtMUIsRUFBcUJ2aUQsVUFBVWlvRCxnQkFBa0IsU0FBVU4sR0FDdkRobkQsS0FBS2duRCxhQUFlQSxHQUV4QnBGLEVBQXFCdmlELFVBQVUrcEMsYUFBZSxTQUFVbE0sRUFBS2wrQixHQUN6RCxPQUFPMjVDLEdBQWlCemIsRUFBS2wrQixJQUVqQzRpRCxFQUFxQnZpRCxVQUFVaXFDLGdCQUFrQixTQUFVcE0sRUFBS2wrQixHQUM1RCxPQUFPMjVDLEdBQWlCemIsRUFBS2wrQixJQUVqQzRpRCxFQUFxQnZpRCxVQUFVK29DLGNBQWdCLFNBQVVsTCxFQUFLMEcsRUFBWXlFLEdBQ3RFLE9BQU9yb0MsS0FBS2lkLEdBQ1B5b0MsaUJBQ0F0ZCxjQUFjbEwsRUFBSzBHLEVBQVl5RSxJQUV4Q3VaLEVBQXFCdmlELFVBQVVnbUMsd0JBQTBCLFNBQVVuSSxFQUFLbCtCLEdBQ3BFLE9BQU8yNUMsR0FBaUJ6YixFQUFLbCtCLElBUWpDNGlELEVBQXFCdmlELFVBQVVrb0QsU0FBVyxTQUFVcnFCLEVBQUs5RCxHQUNyRCxPQUFJcDVCLEtBQUtnbkQsYUFBYXRoQixZQUFZdE0sR0FDdkJtQixHQUFtQnY0QixTQUFRLEdBLzBKOUMsU0FBa0NrN0IsRUFBSzlELEdBQ25DLElBQUk0UCxHQUFRLEVBQ1osT0FBTzdHLEdBQW9CakYsR0FDdEIwQyxlQUFjLFNBQVVpQixHQUN6QixPQUFPOEUsR0FBeUJ6SSxFQUFLMkQsRUFBUXpILEdBQVFoM0IsTUFBSyxTQUFVc2pDLEdBSWhFLE9BSElBLElBQ0FzRCxHQUFRLEdBRUx6TyxHQUFtQnY0QixTQUFTMGpDLFNBR3RDdGpDLE1BQUssV0FBYyxPQUFPNG1DLEtBdTBKaEJ3ZSxDQUF5QnRxQixFQUFLOUQsSUFHN0N3b0IsRUFBcUJ2aUQsVUFBVTBnRCx3QkFBMEIsU0FBVTdpQixFQUFLMEcsR0FDcEUsSUFBSWw2QixFQUFRMUosS0FFUnluRCxFQURnQnpuRCxLQUFLaWQsR0FBRzBvQyx5QkFDSzlRLGtCQUM3QmxaLEVBQVcsR0FDWCtyQixFQUFnQixFQWlCcEIsT0FoQmdCMW5ELEtBQUtxbkQsd0JBQXdCbnFCLEdBQUssU0FBVTlELEVBQVEzTSxHQUNoRSxHQUFJQSxHQUFrQm1YLEVBQVksQ0FDOUIsSUFBSXJrQyxFQUFJbUssRUFBTTY5QyxTQUFTcnFCLEVBQUs5RCxHQUFRaDNCLE1BQUssU0FBVW1sRCxHQUMvQyxJQUFLQSxFQUlELE9BSEFHLElBR09ELEVBQWF2VixTQUFTaFYsRUFBSzlELEdBQVFoM0IsTUFBSyxXQUUzQyxPQURBcWxELEVBQWF4VixZQUFZN1ksR0FDbEI4UCxHQUFvQmhNLEdBQUtob0IsT0FxRWpELENBQUMsRUFBRzBkLEdBckVrRXdHLEVBcUV2RDNLLGNBakVWa04sRUFBU2w0QixLQUFLbEUsT0FJakI2QyxNQUFLLFdBQWMsT0FBT200QixHQUFtQlcsUUFBUVMsTUFDckR2NUIsTUFBSyxXQUFjLE9BQU9xbEQsRUFBYW5uRCxNQUFNNDhCLE1BQzdDOTZCLE1BQUssV0FBYyxPQUFPc2xELE1BRW5DOUYsRUFBcUJ2aUQsVUFBVXNvRCxhQUFlLFNBQVV6cUIsRUFBSzBLLEdBQ3pELElBQUljLEVBQVVkLEVBQVdpVCxtQkFBbUIzZCxFQUFJcWIsdUJBQ2hELE9BQU92NEMsS0FBS2lkLEdBQUd5b0MsaUJBQWlCMWQsaUJBQWlCOUssRUFBS3dMLElBRTFEa1osRUFBcUJ2aUQsVUFBVXVvRCxvQkFBc0IsU0FBVTFxQixFQUFLbCtCLEdBQ2hFLE9BQU8yNUMsR0FBaUJ6YixFQUFLbCtCLElBUWpDNGlELEVBQXFCdmlELFVBQVVnb0Qsd0JBQTBCLFNBQVVucUIsRUFBS3Y2QixHQUNwRSxJQUVJa2xELEVBRkFwckMsRUFBUXlzQixHQUFvQmhNLEdBQzVCNHFCLEVBQWV6N0IsR0FBZVcsUUFFbEMsT0FBT3ZRLEVBQ0ZpakIsUUFBUSxDQUNUdmpCLE1BQU9ndEIsR0FBaUJLLHVCQUN6QixTQUFVditCLEVBQUlDLEdBQ2IsSUFBSStzQixFQUFXaHRCLEVBQUcsR0FDZHdqQixHQUQyQnhqQixFQUFHLEdBQ3ZCQyxFQUFHdWpCLE1BQU1oQyxFQUFpQnZoQixFQUFHdWhCLGVBQ3ZCLElBQWJ3TCxHQUdJNnZCLElBQWlCejdCLEdBQWVXLFNBQ2hDcnFCLEVBQUUsSUFBSXlzQixHQUFZeGpCLEdBQU9pOEMsSUFBWUMsR0FNekNBLEVBQWVyN0IsRUFDZm83QixFQUFXcDVCLEdBS1hxNUIsRUFBZXo3QixHQUFlVyxXQUdqQzVxQixNQUFLLFdBSUYwbEQsSUFBaUJ6N0IsR0FBZVcsU0FDaENycUIsRUFBRSxJQUFJeXNCLEdBQVl4akIsR0FBT2k4QyxJQUFZQyxPQUlqRGxHLEVBQXFCdmlELFVBQVU0Z0QsYUFBZSxTQUFVL2lCLEdBQ3BELE9BQU9sOUIsS0FBS2lkLEdBQUcwb0MseUJBQXlCNVEsUUFBUTdYLElBRTdDMGtCLEVBM0k4QixHQXVKekMsU0FBU2pKLEdBQWlCemIsRUFBS2wrQixHQUMzQixPQUFPa3FDLEdBQW9CaE0sR0FBS2lDLElBSnBDLFNBQXFCbmdDLEVBQUt5dEIsR0FDdEIsT0FBTyxJQUFJMGMsR0FBaUIsRUFBR3ZXLEdBQU81ekIsRUFBSXl2QixNQUFPaEMsR0FHYnM3QixDQUFZL29ELEVBQUtrK0IsRUFBSXFiOzs7Ozs7Ozs7Ozs7Ozs7O0dBcUI3RCxJQUFJeVAsR0FBY3BoQyxPQUtkcWhDLEdBQW1CRCxHQUFZQyxvQkFBc0JyM0MsS0FBS2ltQixJQUFJLEVBQUcsSUFBTSxHQUt2RXF4QixHQUFtQkYsR0FBWUUsa0JBQW9CdDNDLEtBQUtpbUIsSUFBSSxFQUFHLElBQU0sRUFPckVzeEIsR0FBWUgsR0FBWUcsV0FDeEIsU0FBV3pwRCxHQUNQLE1BQXdCLGlCQUFWQSxHQUNWMHBELFNBQVMxcEQsSUFDVGtTLEtBQUtDLE1BQU1uUyxLQUFXQSxHQUtsQyxTQUFTMnBELEdBQWtCM3BELEdBQ3ZCLE9BQU9BLFFBTVgsU0FBUzRwRCxHQUFjNXBELEdBQ25CLE9BQVF5cEQsR0FBVXpwRCxJQUNkQSxHQUFTd3BELElBQ1R4cEQsR0FBU3VwRDs7Ozs7Ozs7Ozs7Ozs7OztHQTBCakIsSUE2SUlNLEdBN0lBQyxHQUF3QixXQVN4QixTQUFTQSxFQUFPLzVCLEVBQU1nNkIsRUFBaUJDLEVBQVNDLEVBQVNwN0IsRUFBT3E3QixFQUFTQyxRQUM3QyxJQUFwQkosSUFBOEJBLEVBQWtCLFdBQ3BDLElBQVpDLElBQXNCQSxFQUFVLFNBQ3BCLElBQVpDLElBQXNCQSxFQUFVLFNBQ3RCLElBQVZwN0IsSUFBb0JBLEVBQVEsV0FDaEIsSUFBWnE3QixJQUFzQkEsRUFBVSxXQUN0QixJQUFWQyxJQUFvQkEsRUFBUSxNQUNoQzdvRCxLQUFLeXVCLEtBQU9BLEVBQ1p6dUIsS0FBS3lvRCxnQkFBa0JBLEVBQ3ZCem9ELEtBQUswb0QsUUFBVUEsRUFDZjFvRCxLQUFLMm9ELFFBQVVBLEVBQ2Yzb0QsS0FBS3V0QixNQUFRQSxFQUNidnRCLEtBQUs0b0QsUUFBVUEsRUFDZjVvRCxLQUFLNm9ELE1BQVFBLEVBQ2I3b0QsS0FBSzhvRCxvQkFBc0IsS0FtRy9CLE9BakdBTixFQUFPbnBELFVBQVV3cEMsWUFBYyxXQUMzQixHQUFpQyxPQUE3QjdvQyxLQUFLOG9ELG9CQUE4QixDQUNuQyxJQUFJamdCLEVBQWM3b0MsS0FBS3l1QixLQUFLRixrQkFDQyxPQUF6QnZ1QixLQUFLeW9ELGtCQUNMNWYsR0FBZSxPQUFTN29DLEtBQUt5b0QsaUJBRWpDNWYsR0FBZSxNQUNmLElBQUssSUFBSWwrQixFQUFLLEVBQUdNLEVBQUtqTCxLQUFLMm9ELFFBQVNoK0MsRUFBS00sRUFBRzVLLE9BQVFzSyxJQUFNLENBRXREaytCLEdBRGE1OUIsRUFBR04sR0FDTWsrQixjQUN0QkEsR0FBZSxJQUVuQkEsR0FBZSxPQUVmLElBQUssSUFBSTM5QixFQUFLLEVBQUd5SixFQUFLM1UsS0FBSzBvRCxRQUFTeDlDLEVBQUt5SixFQUFHdFUsT0FBUTZLLElBQU0sQ0FFdEQyOUIsR0FEY2wwQixFQUFHekosR0FDTTI5QixjQUN2QkEsR0FBZSxJQUVkd2YsR0FBa0Jyb0QsS0FBS3V0QixTQUN4QnNiLEdBQWUsTUFDZkEsR0FBZTdvQyxLQUFLdXRCLE9BRXBCdnRCLEtBQUs0b0QsVUFDTC9mLEdBQWUsT0FDZkEsR0FBZTdvQyxLQUFLNG9ELFFBQVEvZixlQUU1QjdvQyxLQUFLNm9ELFFBQ0xoZ0IsR0FBZSxPQUNmQSxHQUFlN29DLEtBQUs2b0QsTUFBTWhnQixlQUU5QjdvQyxLQUFLOG9ELG9CQUFzQmpnQixFQUUvQixPQUFPN29DLEtBQUs4b0QscUJBRWhCTixFQUFPbnBELFVBQVVtTSxTQUFXLFdBQ3hCLElBQUlyRixFQUFNbkcsS0FBS3l1QixLQUFLRixrQkFtQnBCLE9BbEI2QixPQUF6QnZ1QixLQUFLeW9ELGtCQUNMdGlELEdBQU8sb0JBQXNCbkcsS0FBS3lvRCxpQkFFbEN6b0QsS0FBSzJvRCxRQUFRdG9ELE9BQVMsSUFDdEI4RixHQUFPLGVBQWlCbkcsS0FBSzJvRCxRQUFRN2dELEtBQUssTUFBUSxLQUVqRHVnRCxHQUFrQnJvRCxLQUFLdXRCLFNBQ3hCcG5CLEdBQU8sWUFBY25HLEtBQUt1dEIsT0FFMUJ2dEIsS0FBSzBvRCxRQUFRcm9ELE9BQVMsSUFDdEI4RixHQUFPLGVBQWlCbkcsS0FBSzBvRCxRQUFRNWdELEtBQUssTUFBUSxLQUVsRDlILEtBQUs0b0QsVUFDTHppRCxHQUFPLGNBQWdCbkcsS0FBSzRvRCxRQUFRL2YsZUFFcEM3b0MsS0FBSzZvRCxRQUNMMWlELEdBQU8sWUFBY25HLEtBQUs2b0QsTUFBTWhnQixlQUU3QixVQUFZMWlDLEVBQU0sS0FFN0JxaUQsRUFBT25wRCxVQUFVaXJCLFFBQVUsU0FBVWlCLEdBQ2pDLEdBQUl2ckIsS0FBS3V0QixRQUFVaEMsRUFBTWdDLE1BQ3JCLE9BQU8sRUFFWCxHQUFJdnRCLEtBQUswb0QsUUFBUXJvRCxTQUFXa3JCLEVBQU1tOUIsUUFBUXJvRCxPQUN0QyxPQUFPLEVBRVgsSUFBSyxJQUFJNUMsRUFBSSxFQUFHQSxFQUFJdUMsS0FBSzBvRCxRQUFRcm9ELE9BQVE1QyxJQUNyQyxJQUFLdUMsS0FBSzBvRCxRQUFRanJELEdBQUc2c0IsUUFBUWlCLEVBQU1tOUIsUUFBUWpyRCxJQUN2QyxPQUFPLEVBR2YsR0FBSXVDLEtBQUsyb0QsUUFBUXRvRCxTQUFXa3JCLEVBQU1vOUIsUUFBUXRvRCxPQUN0QyxPQUFPLEVBRVgsSUFBUzVDLEVBQUksRUFBR0EsRUFBSXVDLEtBQUsyb0QsUUFBUXRvRCxPQUFRNUMsSUFDckMsSUFBS3VDLEtBQUsyb0QsUUFBUWxyRCxHQUFHNnNCLFFBQVFpQixFQUFNbzlCLFFBQVFsckQsSUFDdkMsT0FBTyxFQUdmLE9BQUl1QyxLQUFLeW9ELGtCQUFvQmw5QixFQUFNazlCLG9CQUc5QnpvRCxLQUFLeXVCLEtBQUtuRSxRQUFRaUIsRUFBTWtELFVBR1IsT0FBakJ6dUIsS0FBSzRvRCxTQUNGNW9ELEtBQUs0b0QsUUFBUXQrQixRQUFRaUIsRUFBTXE5QixTQUNWLE9BQWxCcjlCLEVBQU1xOUIsV0FHVSxPQUFmNW9ELEtBQUs2b0QsTUFDTjdvRCxLQUFLNm9ELE1BQU12K0IsUUFBUWlCLEVBQU1zOUIsT0FDVCxPQUFoQnQ5QixFQUFNczlCLFVBRWhCTCxFQUFPbnBELFVBQVV1bEMsZ0JBQWtCLFdBQy9CLE9BQVF4VixHQUFZQyxjQUFjcnZCLEtBQUt5dUIsT0FDVixPQUF6Qnp1QixLQUFLeW9ELGlCQUNtQixJQUF4QnpvRCxLQUFLMm9ELFFBQVF0b0QsUUFFZG1vRCxFQTFIZ0I7Ozs7Ozs7Ozs7Ozs7Ozs7SUE4STNCLFNBQVdELEdBQ1BBLEVBQWlCLE1BQUksSUFDckJBLEVBQWdCLEtBQUksSUFGeEIsQ0FHR0EsS0FBY0EsR0FBWSxLQU03QixJQUFJUSxHQUF1QixXQUt2QixTQUFTQSxFQUFNdDZCLEVBQU1nNkIsRUFBaUJPLEVBQWlCTCxFQUFTcDdCLEVBQU8wN0IsRUFBV0wsRUFBU0MsUUFDL0QsSUFBcEJKLElBQThCQSxFQUFrQixXQUM1QixJQUFwQk8sSUFBOEJBLEVBQWtCLFNBQ3BDLElBQVpMLElBQXNCQSxFQUFVLFNBQ3RCLElBQVZwN0IsSUFBb0JBLEVBQVEsV0FDZCxJQUFkMDdCLElBQXdCQSxFQUFZVixHQUFVVyxZQUNsQyxJQUFaTixJQUFzQkEsRUFBVSxXQUN0QixJQUFWQyxJQUFvQkEsRUFBUSxNQUNoQzdvRCxLQUFLeXVCLEtBQU9BLEVBQ1p6dUIsS0FBS3lvRCxnQkFBa0JBLEVBQ3ZCem9ELEtBQUtncEQsZ0JBQWtCQSxFQUN2QmhwRCxLQUFLMm9ELFFBQVVBLEVBQ2Yzb0QsS0FBS3V0QixNQUFRQSxFQUNidnRCLEtBQUtpcEQsVUFBWUEsRUFDakJqcEQsS0FBSzRvRCxRQUFVQSxFQUNmNW9ELEtBQUs2b0QsTUFBUUEsRUFDYjdvRCxLQUFLbXBELGdCQUFrQixLQUV2Qm5wRCxLQUFLb3BELGVBQWlCLEtBQ2xCcHBELEtBQUs0b0QsU0FDTDVvRCxLQUFLcXBELGlCQUFpQnJwRCxLQUFLNG9ELFNBRTNCNW9ELEtBQUs2b0QsT0FDTDdvRCxLQUFLcXBELGlCQUFpQnJwRCxLQUFLNm9ELE9Bd1FuQyxPQXJRQUUsRUFBTU8sT0FBUyxTQUFVNzZCLEdBQ3JCLE9BQU8sSUFBSXM2QixFQUFNdDZCLElBRXJCdHdCLE9BQU9DLGVBQWUycUQsRUFBTTFwRCxVQUFXLFVBQVcsQ0FDOUNmLElBQUssV0FDRCxHQUE2QixPQUF6QjBCLEtBQUttcEQsZ0JBQTBCLENBQy9CLElBQUlJLEVBQWtCdnBELEtBQUt3cEQsMkJBQ3ZCQyxFQUFvQnpwRCxLQUFLMHBELHVCQUM3QixHQUF3QixPQUFwQkgsR0FBa0QsT0FBdEJFLEVBSXhCRixFQUFnQno2QixhQUNoQjl1QixLQUFLbXBELGdCQUFrQixDQUFDUSxJQUd4QjNwRCxLQUFLbXBELGdCQUFrQixDQUNuQixJQUFJUyxHQUFRTCxHQUNaSSxRQUlQLENBQ0Q5akQsRUFBMkIsT0FBcEIwakQsR0FDb0IsT0FBdEJFLEdBQ0dGLEVBQWdCai9CLFFBQVFtL0IsR0FBcUIsZ0RBQ3JEenBELEtBQUttcEQsZ0JBQWtCLEdBRXZCLElBREEsSUFBSVUsR0FBbUIsRUFDZGwvQyxFQUFLLEVBQUdNLEVBQUtqTCxLQUFLZ3BELGdCQUFpQnIrQyxFQUFLTSxFQUFHNUssT0FBUXNLLElBQU0sQ0FDOUQsSUFBSSs5QyxFQUFVejlDLEVBQUdOLEdBQ2pCM0ssS0FBS21wRCxnQkFBZ0IxbEQsS0FBS2lsRCxHQUN0QkEsRUFBUXJlLE1BQU12YixlQUNkKzZCLEdBQW1CLEdBRzNCLElBQUtBLEVBQWtCLENBR25CLElBQUlDLEVBQWdCOXBELEtBQUtncEQsZ0JBQWdCM29ELE9BQVMsRUFDNUNMLEtBQUtncEQsZ0JBQWdCaHBELEtBQUtncEQsZ0JBQWdCM29ELE9BQVMsR0FBRzBwRCxJQUN0REMsR0FBVUMsVUFDaEJqcUQsS0FBS21wRCxnQkFBZ0IxbEQsS0FBS3FtRCxJQUFrQkUsR0FBVUMsVUFDaEROLEdBQ0FPLE1BSWxCLE9BQU9scUQsS0FBS21wRCxpQkFFaEI5cUQsWUFBWSxFQUNaa1osY0FBYyxJQUVsQnd4QyxFQUFNMXBELFVBQVU4cUQsVUFBWSxTQUFVNTBDLEdBQ2xDMVAsRUFBMEMsTUFBbkM3RixLQUFLd3BELDhCQUNOajBDLGFBQWtCNjBDLE1BQ25CNzBDLEVBQU84MEMsZ0JBQ1I5MEMsRUFBTzgwQixNQUFNL2YsUUFBUXRxQixLQUFLd3BELDRCQUE2Qiw4Q0FDM0QzakQsR0FBUTdGLEtBQUs0a0Msa0JBQW1CLDJDQUNoQyxJQUFJMGxCLEVBQWF0cUQsS0FBSzJvRCxRQUFRM2tELE9BQU8sQ0FBQ3VSLElBQ3RDLE9BQU8sSUFBSXd6QyxFQUFNL29ELEtBQUt5dUIsS0FBTXp1QixLQUFLeW9ELGdCQUFpQnpvRCxLQUFLZ3BELGdCQUFnQjU5QyxRQUFTay9DLEVBQVl0cUQsS0FBS3V0QixNQUFPdnRCLEtBQUtpcEQsVUFBV2pwRCxLQUFLNG9ELFFBQVM1b0QsS0FBSzZvRCxRQUUvSUUsRUFBTTFwRCxVQUFVa3JELFdBQWEsU0FBVTdCLEdBQ25DN2lELEdBQVE3RixLQUFLNG9ELFVBQVk1b0QsS0FBSzZvRCxNQUFPLG9DQUVyQyxJQUFJMkIsRUFBYXhxRCxLQUFLZ3BELGdCQUFnQmhsRCxPQUFPLENBQUMwa0QsSUFDOUMsT0FBTyxJQUFJSyxFQUFNL29ELEtBQUt5dUIsS0FBTXp1QixLQUFLeW9ELGdCQUFpQitCLEVBQVl4cUQsS0FBSzJvRCxRQUFRdjlDLFFBQVNwTCxLQUFLdXRCLE1BQU92dEIsS0FBS2lwRCxVQUFXanBELEtBQUs0b0QsUUFBUzVvRCxLQUFLNm9ELFFBRXZJRSxFQUFNMXBELFVBQVVvckQsaUJBQW1CLFNBQVVsOUIsR0FDekMsT0FBTyxJQUFJdzdCLEVBQU0vb0QsS0FBS3l1QixLQUFNenVCLEtBQUt5b0QsZ0JBQWlCem9ELEtBQUtncEQsZ0JBQWdCNTlDLFFBQVNwTCxLQUFLMm9ELFFBQVF2OUMsUUFBU21pQixFQUFPZzdCLEdBQVVXLE1BQU9scEQsS0FBSzRvRCxRQUFTNW9ELEtBQUs2b0QsUUFFckpFLEVBQU0xcEQsVUFBVXFyRCxnQkFBa0IsU0FBVW45QixHQUN4QyxPQUFPLElBQUl3N0IsRUFBTS9vRCxLQUFLeXVCLEtBQU16dUIsS0FBS3lvRCxnQkFBaUJ6b0QsS0FBS2dwRCxnQkFBZ0I1OUMsUUFBU3BMLEtBQUsyb0QsUUFBUXY5QyxRQUFTbWlCLEVBQU9nN0IsR0FBVW9DLEtBQU0zcUQsS0FBSzRvRCxRQUFTNW9ELEtBQUs2b0QsUUFFcEpFLEVBQU0xcEQsVUFBVXVyRCxZQUFjLFNBQVVucEIsR0FDcEMsT0FBTyxJQUFJc25CLEVBQU0vb0QsS0FBS3l1QixLQUFNenVCLEtBQUt5b0QsZ0JBQWlCem9ELEtBQUtncEQsZ0JBQWdCNTlDLFFBQVNwTCxLQUFLMm9ELFFBQVF2OUMsUUFBU3BMLEtBQUt1dEIsTUFBT3Z0QixLQUFLaXBELFVBQVd4bkIsRUFBT3poQyxLQUFLNm9ELFFBRWxKRSxFQUFNMXBELFVBQVV3ckQsVUFBWSxTQUFVcHBCLEdBQ2xDLE9BQU8sSUFBSXNuQixFQUFNL29ELEtBQUt5dUIsS0FBTXp1QixLQUFLeW9ELGdCQUFpQnpvRCxLQUFLZ3BELGdCQUFnQjU5QyxRQUFTcEwsS0FBSzJvRCxRQUFRdjlDLFFBQVNwTCxLQUFLdXRCLE1BQU92dEIsS0FBS2lwRCxVQUFXanBELEtBQUs0b0QsUUFBU25uQixJQVFwSnNuQixFQUFNMXBELFVBQVV5ckQsd0JBQTBCLFNBQVVyOEIsR0FDaEQsT0FBTyxJQUFJczZCLEVBQU10NkIsRUFDSSxLQUFNenVCLEtBQUtncEQsZ0JBQWdCNTlDLFFBQVNwTCxLQUFLMm9ELFFBQVF2OUMsUUFBU3BMLEtBQUt1dEIsTUFBT3Z0QixLQUFLaXBELFVBQVdqcEQsS0FBSzRvRCxRQUFTNW9ELEtBQUs2b0QsUUFNbElFLEVBQU0xcEQsVUFBVTByRCxvQkFBc0IsV0FDbEMsT0FBZ0MsSUFBeEIvcUQsS0FBSzJvRCxRQUFRdG9ELFFBQ0YsT0FBZkwsS0FBS3V0QixPQUNXLE1BQWhCdnRCLEtBQUs0b0QsU0FDUyxNQUFkNW9ELEtBQUs2b0QsUUFDNEIsSUFBaEM3b0QsS0FBS2dwRCxnQkFBZ0Izb0QsUUFDZSxJQUFoQ0wsS0FBS2dwRCxnQkFBZ0Izb0QsUUFDbEJMLEtBQUtncEQsZ0JBQWdCLEdBQUczZSxNQUFNdmIsZUFLOUNpNkIsRUFBTTFwRCxVQUFVd3BDLFlBQWMsV0FDMUIsT0FBTzdvQyxLQUFLZ3JELFdBQVduaUIsY0FBZ0IsT0FBUzdvQyxLQUFLaXBELFdBRXpERixFQUFNMXBELFVBQVVtTSxTQUFXLFdBQ3ZCLE1BQU8sZ0JBQWtCeEwsS0FBS2dyRCxXQUFXeC9DLFdBQWEsZUFBaUJ4TCxLQUFLaXBELFVBQVksS0FFNUZGLEVBQU0xcEQsVUFBVWlyQixRQUFVLFNBQVVpQixHQUNoQyxPQUFRdnJCLEtBQUtnckQsV0FBVzFnQyxRQUFRaUIsRUFBTXkvQixhQUNsQ2hyRCxLQUFLaXBELFlBQWMxOUIsRUFBTTA5QixXQUVqQ0YsRUFBTTFwRCxVQUFVNHJELGNBQWdCLFNBQVU5YSxFQUFJQyxHQUUxQyxJQURBLElBQUk4YSxHQUFxQixFQUNoQnZnRCxFQUFLLEVBQUdNLEVBQUtqTCxLQUFLMG9ELFFBQVMvOUMsRUFBS00sRUFBRzVLLE9BQVFzSyxJQUFNLENBQ3RELElBQUkrOUMsRUFBVXo5QyxFQUFHTixHQUNid2dELEVBQU96QyxFQUFRMEMsUUFBUWpiLEVBQUlDLEdBQy9CLEdBQWEsSUFBVCthLEVBQ0EsT0FBT0EsRUFFWEQsRUFBcUJBLEdBQXNCeEMsRUFBUXJlLE1BQU12YixhQUk3RCxPQURBanBCLEVBQU9xbEQsRUFBb0Isa0RBQ3BCLEdBRVhuQyxFQUFNMXBELFVBQVVneUMsUUFBVSxTQUFVOUUsR0FDaEMsT0FBUXZzQyxLQUFLcXJELDhCQUE4QjllLElBQ3ZDdnNDLEtBQUtzckQsZUFBZS9lLElBQ3BCdnNDLEtBQUt1ckQsZUFBZWhmLElBQ3BCdnNDLEtBQUt3ckQsY0FBY2pmLElBRTNCd2MsRUFBTTFwRCxVQUFVb3NELGdCQUFrQixXQUM5QixPQUFRcEQsR0FBa0Jyb0QsS0FBS3V0QixRQUFVdnRCLEtBQUtpcEQsWUFBY1YsR0FBVVcsT0FFMUVILEVBQU0xcEQsVUFBVXFzRCxlQUFpQixXQUM3QixPQUFRckQsR0FBa0Jyb0QsS0FBS3V0QixRQUFVdnRCLEtBQUtpcEQsWUFBY1YsR0FBVW9DLE1BRTFFNUIsRUFBTTFwRCxVQUFVcXFELHFCQUF1QixXQUNuQyxPQUFPMXBELEtBQUtncEQsZ0JBQWdCM29ELE9BQVMsRUFDL0JMLEtBQUtncEQsZ0JBQWdCLEdBQUczZSxNQUN4QixNQUVWMGUsRUFBTTFwRCxVQUFVbXFELHlCQUEyQixXQUN2QyxJQUFLLElBQUk3K0MsRUFBSyxFQUFHTSxFQUFLakwsS0FBSzJvRCxRQUFTaCtDLEVBQUtNLEVBQUc1SyxPQUFRc0ssSUFBTSxDQUN0RCxJQUFJNEssRUFBU3RLLEVBQUdOLEdBQ2hCLEdBQUk0SyxhQUFrQjYwQyxJQUFlNzBDLEVBQU84MEMsZUFDeEMsT0FBTzkwQyxFQUFPODBCLE1BR3RCLE9BQU8sTUFJWDBlLEVBQU0xcEQsVUFBVXNzRCxtQkFBcUIsU0FBVUMsR0FDM0MsSUFBSyxJQUFJamhELEVBQUssRUFBR00sRUFBS2pMLEtBQUsyb0QsUUFBU2grQyxFQUFLTSxFQUFHNUssT0FBUXNLLElBQU0sQ0FDdEQsSUFBSTRLLEVBQVN0SyxFQUFHTixHQUNoQixHQUFJNEssYUFBa0I2MEMsSUFDZHdCLEVBQVVuckQsUUFBUThVLEVBQU9qUyxLQUFPLEVBQ2hDLE9BQU9pUyxFQUFPalMsR0FJMUIsT0FBTyxNQUVYeWxELEVBQU0xcEQsVUFBVXVsQyxnQkFBa0IsV0FDOUIsT0FBTzVrQyxLQUFLZ3JELFdBQVdwbUIsbUJBRTNCbWtCLEVBQU0xcEQsVUFBVXdsQyx1QkFBeUIsV0FDckMsT0FBZ0MsT0FBekI3a0MsS0FBS3lvRCxpQkFNaEJNLEVBQU0xcEQsVUFBVTJyRCxTQUFXLFdBQ3ZCLElBQUtockQsS0FBS29wRCxlQUNOLEdBQUlwcEQsS0FBS2lwRCxZQUFjVixHQUFVVyxNQUM3QmxwRCxLQUFLb3BELGVBQWlCLElBQUlaLEdBQU94b0QsS0FBS3l1QixLQUFNenVCLEtBQUt5b0QsZ0JBQWlCem9ELEtBQUswb0QsUUFBUzFvRCxLQUFLMm9ELFFBQVMzb0QsS0FBS3V0QixNQUFPdnRCLEtBQUs0b0QsUUFBUzVvRCxLQUFLNm9ELFdBRTVILENBR0QsSUFEQSxJQUFJZ0QsRUFBVyxHQUNObGhELEVBQUssRUFBR00sRUFBS2pMLEtBQUswb0QsUUFBUy85QyxFQUFLTSxFQUFHNUssT0FBUXNLLElBQU0sQ0FDdEQsSUFBSSs5QyxFQUFVejlDLEVBQUdOLEdBQ2JvL0MsRUFBTXJCLEVBQVFxQixNQUFRQyxHQUFVOEIsV0FDOUI5QixHQUFVQyxVQUNWRCxHQUFVOEIsV0FDaEJELEVBQVNwb0QsS0FBSyxJQUFJbW1ELEdBQVFsQixFQUFRcmUsTUFBTzBmLElBRzdDLElBQUluQixFQUFVNW9ELEtBQUs2b0QsTUFDYixJQUFJa0QsR0FBTS9yRCxLQUFLNm9ELE1BQU1yaEMsVUFBV3huQixLQUFLNm9ELE1BQU1tRCxRQUMzQyxLQUNGbkQsRUFBUTdvRCxLQUFLNG9ELFFBQ1gsSUFBSW1ELEdBQU0vckQsS0FBSzRvRCxRQUFRcGhDLFVBQVd4bkIsS0FBSzRvRCxRQUFRb0QsUUFDL0MsS0FFTmhzRCxLQUFLb3BELGVBQWlCLElBQUlaLEdBQU94b0QsS0FBS3l1QixLQUFNenVCLEtBQUt5b0QsZ0JBQWlCb0QsRUFBVTdyRCxLQUFLMm9ELFFBQVMzb0QsS0FBS3V0QixNQUFPcTdCLEVBQVNDLEdBR3ZILE9BQU83b0QsS0FBS29wRCxnQkFFaEJMLEVBQU0xcEQsVUFBVWdzRCw4QkFBZ0MsU0FBVTllLEdBQ3RELElBQUkwZixFQUFVMWYsRUFBSXZ0QyxJQUFJeXZCLEtBQ3RCLE9BQTZCLE9BQXpCenVCLEtBQUt5b0QsZ0JBR0dsYyxFQUFJdnRDLElBQUlzd0IsZ0JBQWdCdHZCLEtBQUt5b0Qsa0JBQ2pDem9ELEtBQUt5dUIsS0FBS1YsV0FBV2srQixHQUVwQjc4QixHQUFZQyxjQUFjcnZCLEtBQUt5dUIsTUFFN0J6dUIsS0FBS3l1QixLQUFLbkUsUUFBUTJoQyxHQUlsQmpzRCxLQUFLeXVCLEtBQUtULG9CQUFvQmkrQixJQU83Q2xELEVBQU0xcEQsVUFBVWlzRCxlQUFpQixTQUFVL2UsR0FDdkMsSUFBSyxJQUFJNWhDLEVBQUssRUFBR00sRUFBS2pMLEtBQUtncEQsZ0JBQWlCcitDLEVBQUtNLEVBQUc1SyxPQUFRc0ssSUFBTSxDQUM5RCxJQUFJKzlDLEVBQVV6OUMsRUFBR04sR0FFakIsSUFBSys5QyxFQUFRcmUsTUFBTXZiLGNBQTZDLE9BQTdCeWQsRUFBSWxDLE1BQU1xZSxFQUFRcmUsT0FDakQsT0FBTyxFQUdmLE9BQU8sR0FFWDBlLEVBQU0xcEQsVUFBVWtzRCxlQUFpQixTQUFVaGYsR0FDdkMsSUFBSyxJQUFJNWhDLEVBQUssRUFBR00sRUFBS2pMLEtBQUsyb0QsUUFBU2grQyxFQUFLTSxFQUFHNUssT0FBUXNLLElBQU0sQ0FFdEQsSUFEYU0sRUFBR04sR0FDSjBtQyxRQUFROUUsR0FDaEIsT0FBTyxFQUdmLE9BQU8sR0FLWHdjLEVBQU0xcEQsVUFBVW1zRCxjQUFnQixTQUFVamYsR0FDdEMsUUFBSXZzQyxLQUFLNG9ELFVBQVk1b0QsS0FBSzRvRCxRQUFRc0Qsb0JBQW9CbHNELEtBQUswb0QsUUFBU25jLE9BR2hFdnNDLEtBQUs2b0QsUUFBUzdvRCxLQUFLNm9ELE1BQU1xRCxvQkFBb0Jsc0QsS0FBSzBvRCxRQUFTbmMsS0FLbkV3YyxFQUFNMXBELFVBQVVncUQsaUJBQW1CLFNBQVU1bkIsR0FDekM1N0IsRUFBTzQ3QixFQUFNamEsU0FBU25uQixRQUFVTCxLQUFLMG9ELFFBQVFyb0QsT0FBUSxpQ0FFbEQwb0QsRUFwU2UsR0FzU3RCb0QsR0FDQSxhQUlBQyxHQUEwQixXQUMxQixTQUFTQSxFQUFTcHVELEdBQ2RnQyxLQUFLaEMsS0FBT0EsRUFzQ2hCLE9BcENBb3VELEVBQVM1OUIsV0FBYSxTQUFVbHJCLEdBQzVCLE9BQVFBLEdBQ0osSUFBSyxJQUNELE9BQU84b0QsRUFBU0MsVUFDcEIsSUFBSyxLQUNELE9BQU9ELEVBQVNFLG1CQUNwQixJQUFLLEtBQ0QsT0FBT0YsRUFBU0csTUFDcEIsSUFBSyxLQUNELE9BQU9ILEVBQVNJLHNCQUNwQixJQUFLLElBQ0QsT0FBT0osRUFBU0ssYUFDcEIsSUFBSyxpQkFDRCxPQUFPTCxFQUFTTSxlQUNwQixJQUFLLEtBQ0QsT0FBT04sRUFBU08sR0FDcEIsSUFBSyxxQkFDRCxPQUFPUCxFQUFTUSxtQkFDcEIsUUFDSSxPQUFPL25DLEVBQUssaUNBQW1DdmhCLEtBRzNEOG9ELEVBQVMvc0QsVUFBVW1NLFNBQVcsV0FDMUIsT0FBT3hMLEtBQUtoQyxNQUVoQm91RCxFQUFTL3NELFVBQVVpckIsUUFBVSxTQUFVaUIsR0FDbkMsT0FBT3ZyQixLQUFLaEMsT0FBU3V0QixFQUFNdnRCLE1BRS9Cb3VELEVBQVNDLFVBQVksSUFBSUQsRUFBUyxLQUNsQ0EsRUFBU0UsbUJBQXFCLElBQUlGLEVBQVMsTUFDM0NBLEVBQVNHLE1BQVEsSUFBSUgsRUFBUyxNQUM5QkEsRUFBU0ssYUFBZSxJQUFJTCxFQUFTLEtBQ3JDQSxFQUFTSSxzQkFBd0IsSUFBSUosRUFBUyxNQUM5Q0EsRUFBU00sZUFBaUIsSUFBSU4sRUFBUyxrQkFDdkNBLEVBQVNPLEdBQUssSUFBSVAsRUFBUyxNQUMzQkEsRUFBU1EsbUJBQXFCLElBQUlSLEVBQVMsc0JBQ3BDQSxFQXhDa0IsR0EwQ3pCaEMsR0FBNkIsU0FBVWpnRCxHQUV2QyxTQUFTaWdELEVBQVkvZixFQUFPL21DLEVBQUk1RSxHQUM1QixJQUFJZ0wsRUFBUVMsRUFBT3ZNLEtBQUtvQyxPQUFTQSxLQUlqQyxPQUhBMEosRUFBTTJnQyxNQUFRQSxFQUNkM2dDLEVBQU1wRyxHQUFLQSxFQUNYb0csRUFBTWhMLE1BQVFBLEVBQ1BnTCxFQWlHWCxPQXZHQWxFLEVBQU0xRixVQUFVc3FELEVBQWFqZ0QsR0FXN0JpZ0QsRUFBWXJyRCxPQUFTLFNBQVVzckMsRUFBTy9tQyxFQUFJNUUsR0FDdEMsR0FBSTJyQyxFQUFNdmIsYUFDTixPQUFJeHJCLElBQU84b0QsR0FBU08sSUFDaEI5bUQsRUFBT25ILGFBQWlCcXhDLEdBQVksZ0VBQ3BDbHFDLEVBQU9uSCxFQUFNc3ZDLGNBQWM2ZSxPQUFNLFNBQVUzMUIsR0FDdkMsT0FBT0EsYUFBZ0IrWCxNQUN2QixtRUFDRyxJQUFJNmQsR0FBaUJ6aUIsRUFBTzNyQyxLQUduQ21ILEVBQU9uSCxhQUFpQnV3QyxHQUFVLHFEQUNsQ3BwQyxFQUFPdkMsSUFBTzhvRCxHQUFTTSxnQkFBa0JwcEQsSUFBTzhvRCxHQUFTUSxtQkFBb0IsSUFBTXRwRCxFQUFHa0ksV0FBYSxnREFDNUYsSUFBSXVoRCxHQUFlMWlCLEVBQU8vbUMsRUFBSTVFLElBR3hDLEdBQUlBLEVBQU00ckIsUUFBUXlqQixHQUFVRSxVQUFXLENBQ3hDLEdBQUkzcUMsSUFBTzhvRCxHQUFTRyxNQUNoQixNQUFNLElBQUlybUMsRUFBZWpCLEVBQUtJLGlCQUFrQiwyREFFcEQsT0FBTyxJQUFJK2tDLEVBQVkvZixFQUFPL21DLEVBQUk1RSxHQUVqQyxHQUFJQSxFQUFNNHJCLFFBQVFta0IsR0FBWUMsS0FBTSxDQUNyQyxHQUFJcHJDLElBQU84b0QsR0FBU0csTUFDaEIsTUFBTSxJQUFJcm1DLEVBQWVqQixFQUFLSSxpQkFBa0IsMERBRXBELE9BQU8sSUFBSStrQyxFQUFZL2YsRUFBTy9tQyxFQUFJNUUsR0FFakMsT0FBSTRFLElBQU84b0QsR0FBU00sZUFDZCxJQUFJTSxHQUFvQjNpQixFQUFPM3JDLEdBRWpDNEUsSUFBTzhvRCxHQUFTTyxJQUNyQjltRCxFQUFPbkgsYUFBaUJxeEMsR0FBWSxnQ0FBa0NyeEMsRUFBTThNLFlBQ3JFLElBQUl5aEQsR0FBUzVpQixFQUFPM3JDLElBRXRCNEUsSUFBTzhvRCxHQUFTUSxvQkFDckIvbUQsRUFBT25ILGFBQWlCcXhDLEdBQVksZ0RBQWtEcnhDLEVBQU04TSxZQUNyRixJQUFJMGhELEdBQXVCN2lCLEVBQU8zckMsSUFHbEMsSUFBSTByRCxFQUFZL2YsRUFBTy9tQyxFQUFJNUUsSUFHMUMwckQsRUFBWS9xRCxVQUFVZ3lDLFFBQVUsU0FBVTlFLEdBQ3RDLElBQUloaEIsRUFBUWdoQixFQUFJbEMsTUFBTXJxQyxLQUFLcXFDLE9BRTNCLE9BQWtCLE9BQVY5ZSxHQUNKdnJCLEtBQUt0QixNQUFNb3ZDLFlBQWN2aUIsRUFBTXVpQixXQUMvQjl0QyxLQUFLbXRELGtCQUFrQjVoQyxFQUFNYSxVQUFVcHNCLEtBQUt0QixTQUVwRDByRCxFQUFZL3FELFVBQVU4dEQsa0JBQW9CLFNBQVVDLEdBQ2hELE9BQVFwdEQsS0FBS3NELElBQ1QsS0FBSzhvRCxHQUFTQyxVQUNWLE9BQU9lLEVBQWEsRUFDeEIsS0FBS2hCLEdBQVNFLG1CQUNWLE9BQU9jLEdBQWMsRUFDekIsS0FBS2hCLEdBQVNHLE1BQ1YsT0FBc0IsSUFBZmEsRUFDWCxLQUFLaEIsR0FBU0ssYUFDVixPQUFPVyxFQUFhLEVBQ3hCLEtBQUtoQixHQUFTSSxzQkFDVixPQUFPWSxHQUFjLEVBQ3pCLFFBQ0ksT0FBT3ZvQyxFQUFLLGlDQUFtQzdrQixLQUFLc0QsTUFHaEU4bUQsRUFBWS9xRCxVQUFVZ3JELGFBQWUsV0FDakMsTUFBUSxDQUNKK0IsR0FBU0MsVUFDVEQsR0FBU0UsbUJBQ1RGLEdBQVNLLGFBQ1RMLEdBQVNJLHVCQUNYL3JELFFBQVFULEtBQUtzRCxLQUFPLEdBRTFCOG1ELEVBQVkvcUQsVUFBVXdwQyxZQUFjLFdBSWhDLE9BQVE3b0MsS0FBS3FxQyxNQUFNOWIsa0JBQW9CdnVCLEtBQUtzRCxHQUFHa0ksV0FBYXhMLEtBQUt0QixNQUFNOE0sWUFFM0U0K0MsRUFBWS9xRCxVQUFVaXJCLFFBQVUsU0FBVWlCLEdBQ3RDLE9BQUlBLGFBQWlCNitCLElBQ1RwcUQsS0FBS3NELEdBQUdnbkIsUUFBUWlCLEVBQU1qb0IsS0FDMUJ0RCxLQUFLcXFDLE1BQU0vZixRQUFRaUIsRUFBTThlLFFBQ3pCcnFDLEtBQUt0QixNQUFNNHJCLFFBQVFpQixFQUFNN3NCLFNBTXJDMHJELEVBQVkvcUQsVUFBVW1NLFNBQVcsV0FDN0IsT0FBT3hMLEtBQUtxcUMsTUFBTTliLGtCQUFvQixJQUFNdnVCLEtBQUtzRCxHQUFLLElBQU10RCxLQUFLdEIsTUFBTUEsU0FFcEUwckQsRUF4R3FCLENBeUc5QitCLElBRUVZLEdBQWdDLFNBQVU1aUQsR0FFMUMsU0FBUzRpRCxJQUNMLE9BQWtCLE9BQVg1aUQsR0FBbUJBLEVBQU83SixNQUFNTixLQUFNSSxZQUFjSixLQU8vRCxPQVRBd0YsRUFBTTFGLFVBQVVpdEQsRUFBZ0I1aUQsR0FJaEM0aUQsRUFBZTF0RCxVQUFVZ3lDLFFBQVUsU0FBVTlFLEdBQ3pDLElBQUk4Z0IsRUFBV3J0RCxLQUFLdEIsTUFDaEIwdUQsRUFBYWgrQixHQUFZaEMsV0FBV21mLEVBQUl2dEMsSUFBS3F1RCxFQUFTcnVELEtBQzFELE9BQU9nQixLQUFLbXRELGtCQUFrQkMsSUFFM0JMLEVBVndCLENBV2pDM0MsSUFFRTBDLEdBQWtDLFNBQVUzaUQsR0FFNUMsU0FBUzJpRCxFQUFpQnppQixFQUFPM3JDLEdBQzdCLElBQUlnTCxFQUFRUyxFQUFPdk0sS0FBS29DLEtBQU1xcUMsRUFBTytoQixHQUFTTyxHQUFJanVELElBQVVzQixLQUU1RCxPQURBMEosRUFBTWhMLE1BQVFBLEVBQ1BnTCxFQVFYLE9BWkFsRSxFQUFNMUYsVUFBVWd0RCxFQUFrQjNpRCxHQU1sQzJpRCxFQUFpQnp0RCxVQUFVZ3lDLFFBQVUsU0FBVTlFLEdBRTNDLE9BRGlCdnNDLEtBQUt0QixNQUNKc3ZDLGNBQWNsbEIsTUFBSyxTQUFVdWtDLEdBQzNDLE9BQU85Z0IsRUFBSXZ0QyxJQUFJc3JCLFFBQVEraUMsRUFBU3J1RCxTQUdqQzh0RCxFQWIwQixDQWNuQzFDLElBRUU0QyxHQUFxQyxTQUFVN2lELEdBRS9DLFNBQVM2aUQsRUFBb0IzaUIsRUFBTzNyQyxHQUNoQyxPQUFPeUwsRUFBT3ZNLEtBQUtvQyxLQUFNcXFDLEVBQU8raEIsR0FBU00sZUFBZ0JodUQsSUFBVXNCLEtBTXZFLE9BUkF3RixFQUFNMUYsVUFBVWt0RCxFQUFxQjdpRCxHQUlyQzZpRCxFQUFvQjN0RCxVQUFVZ3lDLFFBQVUsU0FBVTlFLEdBQzlDLElBQUloaEIsRUFBUWdoQixFQUFJbEMsTUFBTXJxQyxLQUFLcXFDLE9BQzNCLE9BQU85ZSxhQUFpQndrQixJQUFjeGtCLEVBQU05YixTQUFTelAsS0FBS3RCLFFBRXZEc3VELEVBVDZCLENBVXRDNUMsSUFFRTZDLEdBQTBCLFNBQVU5aUQsR0FFcEMsU0FBUzhpRCxFQUFTNWlCLEVBQU8zckMsR0FDckIsSUFBSWdMLEVBQVFTLEVBQU92TSxLQUFLb0MsS0FBTXFxQyxFQUFPK2hCLEdBQVNPLEdBQUlqdUQsSUFBVXNCLEtBRTVELE9BREEwSixFQUFNaEwsTUFBUUEsRUFDUGdMLEVBT1gsT0FYQWxFLEVBQU0xRixVQUFVbXRELEVBQVU5aUQsR0FNMUI4aUQsRUFBUzV0RCxVQUFVZ3lDLFFBQVUsU0FBVTlFLEdBQ25DLElBQUkrZ0IsRUFBYXR0RCxLQUFLdEIsTUFDbEI2c0IsRUFBUWdoQixFQUFJbEMsTUFBTXJxQyxLQUFLcXFDLE9BQzNCLE9BQWlCLE9BQVY5ZSxHQUFrQitoQyxFQUFXNzlDLFNBQVM4YixJQUUxQzBoQyxFQVprQixDQWEzQjdDLElBRUU4QyxHQUF3QyxTQUFVL2lELEdBRWxELFNBQVMraUQsRUFBdUI3aUIsRUFBTzNyQyxHQUNuQyxJQUFJZ0wsRUFBUVMsRUFBT3ZNLEtBQUtvQyxLQUFNcXFDLEVBQU8raEIsR0FBU1EsbUJBQW9CbHVELElBQVVzQixLQUU1RSxPQURBMEosRUFBTWhMLE1BQVFBLEVBQ1BnTCxFQVVYLE9BZEFsRSxFQUFNMUYsVUFBVW90RCxFQUF3Qi9pRCxHQU14QytpRCxFQUF1Qjd0RCxVQUFVZ3lDLFFBQVUsU0FBVTlFLEdBQ2pELElBQUk3aUMsRUFBUTFKLEtBQ1J1ckIsRUFBUWdoQixFQUFJbEMsTUFBTXJxQyxLQUFLcXFDLE9BQzNCLE9BQVE5ZSxhQUFpQndrQixJQUNyQnhrQixFQUFNeWlCLGNBQWNsbEIsTUFBSyxTQUFVeWtDLEdBQy9CLE9BQU83akQsRUFBTWhMLE1BQU0rUSxTQUFTODlDLE9BR2pDTCxFQWZnQyxDQWdCekM5QyxJQUlFSixHQUEyQixXQUMzQixTQUFTQSxFQUFVaHNELEdBQ2ZnQyxLQUFLaEMsS0FBT0EsRUFPaEIsT0FMQWdzRCxFQUFVM3FELFVBQVVtTSxTQUFXLFdBQzNCLE9BQU94TCxLQUFLaEMsTUFFaEJnc0QsRUFBVUMsVUFBWSxJQUFJRCxFQUFVLE9BQ3BDQSxFQUFVOEIsV0FBYSxJQUFJOUIsRUFBVSxRQUM5QkEsRUFUbUIsR0F5QjFCK0IsR0FBdUIsV0FDdkIsU0FBU0EsRUFBTXZrQyxFQUFVd2tDLEdBQ3JCaHNELEtBQUt3bkIsU0FBV0EsRUFDaEJ4bkIsS0FBS2dzRCxPQUFTQSxFQXdEbEIsT0F0REFELEVBQU0xc0QsVUFBVXdwQyxZQUFjLFdBRzFCLElBREEsSUFBSUEsRUFBYzdvQyxLQUFLZ3NELE9BQVMsS0FBTyxLQUM5QnJoRCxFQUFLLEVBQUdNLEVBQUtqTCxLQUFLd25CLFNBQVU3YyxFQUFLTSxFQUFHNUssT0FBUXNLLElBQU0sQ0FFdkRrK0IsR0FEZ0I1OUIsRUFBR04sR0FDTWEsV0FFN0IsT0FBT3E5QixHQU1Ya2pCLEVBQU0xc0QsVUFBVTZzRCxvQkFBc0IsU0FBVXhELEVBQVNuYyxHQUNyRDFtQyxFQUFPN0YsS0FBS3duQixTQUFTbm5CLFFBQVVxb0QsRUFBUXJvRCxPQUFRLGtEQUUvQyxJQURBLElBQUkrc0QsRUFBYSxFQUNSM3ZELEVBQUksRUFBR0EsRUFBSXVDLEtBQUt3bkIsU0FBU25uQixPQUFRNUMsSUFBSyxDQUMzQyxJQUFJK3ZELEVBQW1COUUsRUFBUWpyRCxHQUMzQmdXLEVBQVl6VCxLQUFLd25CLFNBQVMvcEIsR0FDOUIsR0FBSSt2RCxFQUFpQm5qQixNQUFNdmIsYUFDdkJqcEIsRUFBTzROLGFBQXFCdzdCLEdBQVUsK0RBQ3RDbWUsRUFBYWgrQixHQUFZaEMsV0FBVzNaLEVBQVV6VSxJQUFLdXRDLEVBQUl2dEMsU0FFdEQsQ0FDRCxJQUFJeXVELEVBQVdsaEIsRUFBSWxDLE1BQU1takIsRUFBaUJuakIsT0FDMUN4a0MsRUFBb0IsT0FBYjRuRCxFQUFtQixrRUFDMUJMLEVBQWEzNUMsRUFBVTJZLFVBQVVxaEMsR0FLckMsR0FISUQsRUFBaUJ6RCxNQUFRQyxHQUFVOEIsYUFDbkNzQixJQUEyQixHQUVaLElBQWZBLEVBQ0EsTUFHUixPQUFPcHRELEtBQUtnc0QsT0FBU29CLEdBQWMsRUFBSUEsRUFBYSxHQUV4RHJCLEVBQU0xc0QsVUFBVWlyQixRQUFVLFNBQVVpQixHQUNoQyxHQUFjLE9BQVZBLEVBQ0EsT0FBTyxFQUVYLEdBQUl2ckIsS0FBS2dzRCxTQUFXemdDLEVBQU15Z0MsUUFDdEJoc0QsS0FBS3duQixTQUFTbm5CLFNBQVdrckIsRUFBTS9ELFNBQVNubkIsT0FDeEMsT0FBTyxFQUVYLElBQUssSUFBSTVDLEVBQUksRUFBR0EsRUFBSXVDLEtBQUt3bkIsU0FBU25uQixPQUFRNUMsSUFBSyxDQUMzQyxJQUFJaXdELEVBQWUxdEQsS0FBS3duQixTQUFTL3BCLEdBQzdCa3dELEVBQWdCcGlDLEVBQU0vRCxTQUFTL3BCLEdBQ25DLElBQUtpd0QsRUFBYXBqQyxRQUFRcWpDLEdBQ3RCLE9BQU8sRUFHZixPQUFPLEdBRUo1QixFQTNEZSxHQWdFdEJuQyxHQUF5QixXQUN6QixTQUFTQSxFQUFRdmYsRUFBTzBmLEdBQ3BCL3BELEtBQUtxcUMsTUFBUUEsT0FDRDlnQyxJQUFSd2dELElBQ0FBLEVBQU1DLEdBQVVDLFdBRXBCanFELEtBQUsrcEQsSUFBTUEsRUFDWC9wRCxLQUFLNHRELGFBQWV2akIsRUFBTXZiLGFBeUI5QixPQXZCQTg2QixFQUFRdnFELFVBQVUrckQsUUFBVSxTQUFVamIsRUFBSUMsR0FDdEMsSUFBSWdkLEVBQWFwdEQsS0FBSzR0RCxhQUNoQjdpQixHQUFTbUYsYUFBYUMsRUFBSUMsR0FDMUJyRixHQUFTZ0csZUFBZS93QyxLQUFLcXFDLE1BQU84RixFQUFJQyxHQUM5QyxPQUFRcHdDLEtBQUsrcEQsS0FDVCxLQUFLQyxHQUFVQyxVQUNYLE9BQU9tRCxFQUNYLEtBQUtwRCxHQUFVOEIsV0FDWCxPQUFRLEVBQUlzQixFQUNoQixRQUNJLE9BQU92b0MsRUFBSyxzQkFBd0I3a0IsS0FBSytwRCxPQUdyREgsRUFBUXZxRCxVQUFVd3BDLFlBQWMsV0FFNUIsT0FBTzdvQyxLQUFLcXFDLE1BQU05YixrQkFBb0J2dUIsS0FBSytwRCxJQUFJditDLFlBRW5EbytDLEVBQVF2cUQsVUFBVW1NLFNBQVcsV0FDekIsT0FBT3hMLEtBQUtxcUMsTUFBTTliLGtCQUFvQixLQUFPdnVCLEtBQUsrcEQsSUFBTSxLQUU1REgsRUFBUXZxRCxVQUFVaXJCLFFBQVUsU0FBVWlCLEdBQ2xDLE9BQU92ckIsS0FBSytwRCxNQUFReCtCLEVBQU13K0IsS0FBTy9wRCxLQUFLcXFDLE1BQU0vZixRQUFRaUIsRUFBTThlLFFBRXZEdWYsRUFoQ2lCLEdBa0N4QkQsR0FBbUIsSUFBSUMsR0FBUWg3QixHQUFVRyxXQUFZaTdCLEdBQVVDLFdBQy9EQyxHQUFvQixJQUFJTixHQUFRaDdCLEdBQVVHLFdBQVlpN0IsR0FBVThCLFlBcUNoRStCLEdBQXNDLFdBQ3RDLFNBQVNBLEtBZ0dULE9BOUZBQSxFQUFxQnh1RCxVQUFVeXVELHNCQUF3QixTQUFVQyxHQUM3RC90RCxLQUFLZ3VELG1CQUFxQkQsR0FFOUJGLEVBQXFCeHVELFVBQVVzMEMsMEJBQTRCLFNBQVV4MkIsRUFBYWUsRUFBT3U3QixFQUE4QndVLEdBQ25ILElBQUl2a0QsRUFBUTFKLEtBS1osT0FKQTZGLE9BQW1DMEQsSUFBNUJ2SixLQUFLZ3VELG1CQUFrQyxzQ0FJMUM5dkMsRUFBTTZzQyxzQkFDQy9xRCxLQUFLa3VELDBCQUEwQi93QyxFQUFhZSxHQUluRHU3QixFQUE2Qm52QixRQUFRc0osR0FBZ0JLLEtBQzlDajBCLEtBQUtrdUQsMEJBQTBCL3dDLEVBQWFlLEdBRWhEbGUsS0FBS2d1RCxtQkFBbUJHLGFBQWFoeEMsRUFBYTh3QyxHQUFZN3JELE1BQUssU0FBVWs2QyxHQUNoRixJQUFJOFIsRUFBa0Ixa0QsRUFBTTJrRCxXQUFXbndDLEVBQU9vK0IsR0FDOUMsT0FBS3ArQixFQUFNdXRDLG1CQUFxQnZ0QyxFQUFNd3RDLG1CQUNsQ2hpRCxFQUFNNGtELFlBQVlwd0MsRUFBTStxQyxVQUFXbUYsRUFBaUJILEVBQVl4VSxHQUN6RC92QyxFQUFNd2tELDBCQUEwQi93QyxFQUFhZSxJQUVwRGlHLEtBQWlCbkssRUFBU08sT0FDMUI1QyxFQUFNLHVCQUF3Qix3REFBeUQ4aEMsRUFBNkJqdUMsV0FBWTBTLEVBQU0xUyxZQUluSTlCLEVBQU1za0QsbUJBQW1CcmEsMEJBQTBCeDJCLEVBQWFlLEVBQU91N0IsR0FBOEJyM0MsTUFBSyxTQUFVbXNELEdBT3ZILE9BSEFILEVBQWdCNThDLFNBQVEsU0FBVSs2QixHQUM5QmdpQixFQUFpQkEsRUFBZXZ0QyxPQUFPdXJCLEVBQUl2dEMsSUFBS3V0QyxNQUU3Q2dpQixVQUtuQlYsRUFBcUJ4dUQsVUFBVWd2RCxXQUFhLFNBQVVud0MsRUFBT28rQixHQUd6RCxJQUFJa1MsRUFBZSxJQUFJejNCLElBQVUsU0FBVW9aLEVBQUlDLEdBQzNDLE9BQU9seUIsRUFBTStzQyxjQUFjOWEsRUFBSUMsTUFPbkMsT0FMQWtNLEVBQVU5cUMsU0FBUSxTQUFVMU8sRUFBR3UyQixHQUN2QkEsYUFBb0IwUixJQUFZN3NCLEVBQU1tekIsUUFBUWhZLEtBQzlDbTFCLEVBQWVBLEVBQWF2M0IsSUFBSW9DLE9BR2pDbTFCLEdBYVhYLEVBQXFCeHVELFVBQVVpdkQsWUFBYyxTQUFVckYsRUFBV3dGLEVBQXVCUixFQUFZUyxHQUdqRyxHQUFJVCxFQUFXdGdDLE9BQVM4Z0MsRUFBc0I5Z0MsS0FDMUMsT0FBTyxFQVVYLElBQUlnaEMsRUFBaUIxRixJQUFjVixHQUFVVyxNQUN2Q3VGLEVBQXNCcjNCLE9BQ3RCcTNCLEVBQXNCdDNCLFFBQzVCLFFBQUt3M0IsSUFJR0EsRUFBZUMsa0JBQ25CRCxFQUFlcjRDLFFBQVE4VixVQUFVc2lDLEdBQTRCLElBRXJFYixFQUFxQnh1RCxVQUFVNnVELDBCQUE0QixTQUFVL3dDLEVBQWFlLEdBSTlFLE9BSElpRyxLQUFpQm5LLEVBQVNPLE9BQzFCNUMsRUFBTSx1QkFBd0Isa0RBQW1EdUcsRUFBTTFTLFlBRXBGeEwsS0FBS2d1RCxtQkFBbUJyYSwwQkFBMEJ4MkIsRUFBYWUsRUFBTzBWLEdBQWdCSyxNQUUxRjQ1QixFQWpHOEIsR0EwSHJDZ0IsR0FBb0MsV0FDcEMsU0FBU0EsRUFBbUI3TSxFQUFxQjhNLEVBQWUvdEIsR0FDNUQvZ0MsS0FBS2dpRCxvQkFBc0JBLEVBQzNCaGlELEtBQUs4dUQsY0FBZ0JBLEVBQ3JCOXVELEtBQUsrZ0MsYUFBZUEsRUFnTXhCLE9BeExBOHRCLEVBQW1CeHZELFVBQVUwdkQsWUFBYyxTQUFVNXhDLEVBQWFuZSxHQUM5RCxJQUFJMEssRUFBUTFKLEtBQ1osT0FBT0EsS0FBSzh1RCxjQUNQL3FCLDBDQUEwQzVtQixFQUFhbmUsR0FDdkRvRCxNQUFLLFNBQVU0c0QsR0FBVyxPQUFPdGxELEVBQU11bEQsb0JBQW9COXhDLEVBQWFuZSxFQUFLZ3dELE9BR3RGSCxFQUFtQnh2RCxVQUFVNHZELG9CQUFzQixTQUFVOXhDLEVBQWFuZSxFQUFLa3dELEdBQzNFLE9BQU9sdkQsS0FBS2dpRCxvQkFBb0I5UCxTQUFTLzBCLEVBQWFuZSxHQUFLb0QsTUFBSyxTQUFVbXFDLEdBQ3RFLElBQUssSUFBSTVoQyxFQUFLLEVBQUd3a0QsRUFBY0QsRUFBV3ZrRCxFQUFLd2tELEVBQVk5dUQsT0FBUXNLLElBQU0sQ0FFckU0aEMsRUFEWTRpQixFQUFZeGtELEdBQ1ordUIsaUJBQWlCMTZCLEVBQUt1dEMsR0FFdEMsT0FBT0EsTUFLZnNpQixFQUFtQnh2RCxVQUFVK3ZELCtCQUFpQyxTQUFVanlDLEVBQWFreUMsRUFBTUwsR0FDdkYsSUFBSTNsQyxFQUFVK08sS0FRZCxPQVBBaTNCLEVBQUs3OUMsU0FBUSxTQUFVeFMsRUFBS3N3RCxHQUN4QixJQUFLLElBQUkza0QsRUFBSyxFQUFHNGtELEVBQVlQLEVBQVNya0QsRUFBSzRrRCxFQUFVbHZELE9BQVFzSyxJQUFNLENBRS9EMmtELEVBRFlDLEVBQVU1a0QsR0FDSit1QixpQkFBaUIxNkIsRUFBS3N3RCxHQUU1Q2ptQyxFQUFVQSxFQUFRckksT0FBT2hpQixFQUFLc3dELE1BRTNCam1DLEdBUVh3bEMsRUFBbUJ4dkQsVUFBVTh1RCxhQUFlLFNBQVVoeEMsRUFBYWhTLEdBQy9ELElBQUl6QixFQUFRMUosS0FDWixPQUFPQSxLQUFLZ2lELG9CQUNQM1AsV0FBV2wxQixFQUFhaFMsR0FDeEIvSSxNQUFLLFNBQVVpdEQsR0FBUSxPQUFPM2xELEVBQU04bEQsd0JBQXdCcnlDLEVBQWFreUMsT0FNbEZSLEVBQW1CeHZELFVBQVVtd0Qsd0JBQTBCLFNBQVVyeUMsRUFBYXN5QyxHQUMxRSxJQUFJL2xELEVBQVExSixLQUNaLE9BQU9BLEtBQUs4dUQsY0FDUHhxQiwyQ0FBMkNubkIsRUFBYXN5QyxHQUN4RHJ0RCxNQUFLLFNBQVU0c0QsR0FDaEIsSUFBSUssRUFBTzNsRCxFQUFNMGxELCtCQUErQmp5QyxFQUFhc3lDLEVBQVVULEdBQ25FM2xDLEVBQVU4TyxLQVFkLE9BUEFrM0IsRUFBSzc5QyxTQUFRLFNBQVV4UyxFQUFLcTZCLEdBRW5CQSxJQUNEQSxFQUFXLElBQUk4VCxHQUFXbnVDLEVBQUs0MEIsR0FBZ0JJLGtCQUVuRDNLLEVBQVVBLEVBQVFySSxPQUFPaGlCLEVBQUtxNkIsTUFFM0JoUSxNQVdmd2xDLEVBQW1CeHZELFVBQVVzMEMsMEJBQTRCLFNBQVV4MkIsRUFBYWUsRUFBTzAxQixHQUNuRixPQUFJMTFCLEVBQU0wbUIsa0JBQ0M1a0MsS0FBSzB2RCxrQ0FBa0N2eUMsRUFBYWUsRUFBTXVRLE1BRTVEdlEsRUFBTTJtQix5QkFDSjdrQyxLQUFLMnZELHlDQUF5Q3h5QyxFQUFhZSxFQUFPMDFCLEdBR2xFNXpDLEtBQUs0dkQsb0NBQW9DenlDLEVBQWFlLEVBQU8wMUIsSUFHNUVpYixFQUFtQnh2RCxVQUFVcXdELGtDQUFvQyxTQUFVdnlDLEVBQWE4dUMsR0FFcEYsT0FBT2pzRCxLQUFLK3VELFlBQVk1eEMsRUFBYSxJQUFJaVMsR0FBWTY4QixJQUFVN3BELE1BQUssU0FBVWkzQixHQUMxRSxJQUFJLzJCLEVBQVNnMkIsS0FJYixPQUhJZSxhQUFvQjBSLEtBQ3BCem9DLEVBQVNBLEVBQU8wZSxPQUFPcVksRUFBU3I2QixJQUFLcTZCLElBRWxDLzJCLE1BR2Z1c0QsRUFBbUJ4dkQsVUFBVXN3RCx5Q0FBMkMsU0FBVXh5QyxFQUFhZSxFQUFPMDFCLEdBQ2xHLElBQUlscUMsRUFBUTFKLEtBQ1o2RixFQUFPcVksRUFBTXVRLEtBQUt6ZSxVQUFXLG1FQUM3QixJQUFJdWYsRUFBZXJSLEVBQU11cUMsZ0JBQ3JCcC9CLEVBQVVpUCxLQUNkLE9BQU90NEIsS0FBSytnQyxhQUNQZ1YscUJBQXFCNTRCLEVBQWFvUyxHQUNsQ250QixNQUFLLFNBQVV5dEQsR0FHaEIsT0FBT3QxQixHQUFtQi9vQixRQUFRcStDLEdBQVMsU0FBVTVzQixHQUNqRCxJQUFJNnNCLEVBQWtCNXhDLEVBQU00c0Msd0JBQXdCN25CLEVBQU81VixNQUFNa0MsSUFDakUsT0FBTzdsQixFQUFNa21ELG9DQUFvQ3p5QyxFQUFhMnlDLEVBQWlCbGMsR0FBZXh4QyxNQUFLLFNBQVU3RCxHQUN6R0EsRUFBRWlULFNBQVEsU0FBVXhTLEVBQUt1dEMsR0FDckJsakIsRUFBVUEsRUFBUXJJLE9BQU9oaUIsRUFBS3V0QyxZQUd2Q25xQyxNQUFLLFdBQWMsT0FBT2luQixTQUdyQ3dsQyxFQUFtQnh2RCxVQUFVdXdELG9DQUFzQyxTQUFVenlDLEVBQWFlLEVBQU8wMUIsR0FDN0YsSUFFSXZxQixFQUNBMG1DLEVBSEFybUQsRUFBUTFKLEtBSVosT0FBT0EsS0FBS2dpRCxvQkFDUHJPLDBCQUEwQngyQixFQUFhZSxFQUFPMDFCLEdBQzlDeHhDLE1BQUssU0FBVW9zRCxHQUVoQixPQURBbmxDLEVBQVVtbEMsRUFDSDlrRCxFQUFNb2xELGNBQWNucUIsb0NBQW9DeG5CLEVBQWFlLE1BRTNFOWIsTUFBSyxTQUFVNHRELEdBUWhCLE9BUEFELEVBQWtCQyxFQU9YdG1ELEVBQU11bUQsd0JBQXdCOXlDLEVBQWE0eUMsRUFBaUIxbUMsR0FBU2puQixNQUFLLFNBQVU4dEQsR0FDdkY3bUMsRUFBVTZtQyxFQUNWLElBQUssSUFBSXZsRCxFQUFLLEVBQUd3bEQsRUFBb0JKLEVBQWlCcGxELEVBQUt3bEQsRUFBa0I5dkQsT0FBUXNLLElBRWpGLElBREEsSUFBSXV2QixFQUFRaTJCLEVBQWtCeGxELEdBQ3JCTSxFQUFLLEVBQUdDLEVBQUtndkIsRUFBTWhCLFVBQVdqdUIsRUFBS0MsRUFBRzdLLE9BQVE0SyxJQUFNLENBQ3pELElBQUl1dUIsRUFBV3R1QixFQUFHRCxHQUNkak0sRUFBTXc2QixFQUFTeDZCLElBQ2YyNkIsRUFBVXRRLEVBQVEvcUIsSUFBSVUsR0FDdEJveEQsRUFBYTUyQixFQUFTRSxpQkFBaUJDLEVBQVNBLEVBQVNPLEVBQU1sQixnQkFFL0QzUCxFQURBK21DLGFBQXNCcmxCLEdBQ1oxaEIsRUFBUXJJLE9BQU9oaUIsRUFBS294RCxHQUdwQi9tQyxFQUFRL0gsT0FBT3RpQixVQU14Q29ELE1BQUssV0FRTixPQUxBaW5CLEVBQVE3WCxTQUFRLFNBQVV4UyxFQUFLdXRDLEdBQ3RCcnVCLEVBQU1tekIsUUFBUTlFLEtBQ2ZsakIsRUFBVUEsRUFBUS9ILE9BQU90aUIsT0FHMUJxcUIsTUFHZndsQyxFQUFtQnh2RCxVQUFVNHdELHdCQUEwQixTQUFVOXlDLEVBQWE2eUMsRUFBeUJLLEdBRW5HLElBREEsSUFBSUMsRUFBbUM1M0IsS0FDOUIvdEIsRUFBSyxFQUFHNGxELEVBQTRCUCxFQUF5QnJsRCxFQUFLNGxELEVBQTBCbHdELE9BQVFzSyxJQUV6RyxJQURBLElBQ1NNLEVBQUssRUFBR0MsRUFETHFsRCxFQUEwQjVsRCxHQUNWdXVCLFVBQVdqdUIsRUFBS0MsRUFBRzdLLE9BQVE0SyxJQUFNLENBQ3pELElBQUl1dUIsRUFBV3R1QixFQUFHRCxHQUNkdXVCLGFBQW9CbVMsSUFDb0IsT0FBeEMwa0IsRUFBa0IveEQsSUFBSWs3QixFQUFTeDZCLE9BQy9Cc3hELEVBQW1DQSxFQUFpQ3I1QixJQUFJdUMsRUFBU3g2QixNQUk3RixJQUFJa3hELEVBQWtCRyxFQUN0QixPQUFPcndELEtBQUtnaUQsb0JBQ1AzUCxXQUFXbDFCLEVBQWFtekMsR0FDeEJsdUQsTUFBSyxTQUFVb3VELEdBTWhCLE9BTEFBLEVBQWdCaC9DLFNBQVEsU0FBVXhTLEVBQUt1dEMsR0FDdkIsT0FBUkEsR0FBZ0JBLGFBQWV4QixLQUMvQm1sQixFQUFrQkEsRUFBZ0JsdkMsT0FBT2hpQixFQUFLdXRDLE9BRy9DMmpCLE1BR1JyQixFQXBNNEIsR0FzT25DNEIsR0FBOEIsV0FDOUIsU0FBU0EsSUFFTHp3RCxLQUFLMHdELFVBQVksSUFBSTM1QixHQUFVNDVCLEdBQWF6Z0IsY0FFNUNsd0MsS0FBSzR3RCxhQUFlLElBQUk3NUIsR0FBVTQ1QixHQUFhRSxtQkFtRW5ELE9BaEVBSixFQUFhcHhELFVBQVUyUSxRQUFVLFdBQzdCLE9BQU9oUSxLQUFLMHdELFVBQVUxZ0QsV0FHMUJ5Z0QsRUFBYXB4RCxVQUFVK3BDLGFBQWUsU0FBVXBxQyxFQUFLa2hCLEdBQ2pELElBQUk0d0MsRUFBTSxJQUFJSCxHQUFhM3hELEVBQUtraEIsR0FDaENsZ0IsS0FBSzB3RCxVQUFZMXdELEtBQUswd0QsVUFBVXo1QixJQUFJNjVCLEdBQ3BDOXdELEtBQUs0d0QsYUFBZTV3RCxLQUFLNHdELGFBQWEzNUIsSUFBSTY1QixJQUc5Q0wsRUFBYXB4RCxVQUFVMHhELGNBQWdCLFNBQVU1bEQsRUFBTStVLEdBQ25ELElBQUl4VyxFQUFRMUosS0FDWm1MLEVBQUtxRyxTQUFRLFNBQVV4UyxHQUFPLE9BQU8wSyxFQUFNMC9CLGFBQWFwcUMsRUFBS2toQixPQU1qRXV3QyxFQUFhcHhELFVBQVVpcUMsZ0JBQWtCLFNBQVV0cUMsRUFBS2toQixHQUNwRGxnQixLQUFLZ3hELFVBQVUsSUFBSUwsR0FBYTN4RCxFQUFLa2hCLEtBRXpDdXdDLEVBQWFweEQsVUFBVTR4RCxpQkFBbUIsU0FBVTlsRCxFQUFNK1UsR0FDdEQsSUFBSXhXLEVBQVExSixLQUNabUwsRUFBS3FHLFNBQVEsU0FBVXhTLEdBQU8sT0FBTzBLLEVBQU00L0IsZ0JBQWdCdHFDLEVBQUtraEIsT0FNcEV1d0MsRUFBYXB4RCxVQUFVNnhELHNCQUF3QixTQUFVaHhDLEdBQ3JELElBQUl4VyxFQUFRMUosS0FDUm14RCxFQUFXL2hDLEdBQVlRLE1BQ3ZCd2hDLEVBQVcsSUFBSVQsR0FBYVEsRUFBVWp4QyxHQUN0Q214QyxFQUFTLElBQUlWLEdBQWFRLEVBQVVqeEMsRUFBSyxHQUN6Qy9VLEVBQU8sR0FLWCxPQUpBbkwsS0FBSzR3RCxhQUFhdDVCLGVBQWUsQ0FBQzg1QixFQUFVQyxJQUFTLFNBQVVQLEdBQzNEcG5ELEVBQU1zbkQsVUFBVUYsR0FDaEIzbEQsRUFBSzFILEtBQUtxdEQsRUFBSTl4RCxRQUVYbU0sR0FFWHNsRCxFQUFhcHhELFVBQVVpeUQsb0JBQXNCLFdBQ3pDLElBQUk1bkQsRUFBUTFKLEtBQ1pBLEtBQUswd0QsVUFBVWwvQyxTQUFRLFNBQVVzL0MsR0FBTyxPQUFPcG5ELEVBQU1zbkQsVUFBVUYsT0FFbkVMLEVBQWFweEQsVUFBVTJ4RCxVQUFZLFNBQVVGLEdBQ3pDOXdELEtBQUswd0QsVUFBWTF3RCxLQUFLMHdELFVBQVV4N0MsT0FBTzQ3QyxHQUN2Qzl3RCxLQUFLNHdELGFBQWU1d0QsS0FBSzR3RCxhQUFhMTdDLE9BQU80N0MsSUFFakRMLEVBQWFweEQsVUFBVWt5RCxnQkFBa0IsU0FBVXJ4QyxHQUMvQyxJQUFJaXhDLEVBQVcvaEMsR0FBWVEsTUFDdkJ3aEMsRUFBVyxJQUFJVCxHQUFhUSxFQUFVanhDLEdBQ3RDbXhDLEVBQVMsSUFBSVYsR0FBYVEsRUFBVWp4QyxFQUFLLEdBQ3pDL1UsRUFBT3V0QixLQUlYLE9BSEExNEIsS0FBSzR3RCxhQUFhdDVCLGVBQWUsQ0FBQzg1QixFQUFVQyxJQUFTLFNBQVVQLEdBQzNEM2xELEVBQU9BLEVBQUs4ckIsSUFBSTY1QixFQUFJOXhELFFBRWpCbU0sR0FFWHNsRCxFQUFhcHhELFVBQVVxbUMsWUFBYyxTQUFVMW1DLEdBQzNDLElBQUk4eEQsRUFBTSxJQUFJSCxHQUFhM3hELEVBQUssR0FDNUJ3eUQsRUFBV3h4RCxLQUFLMHdELFVBQVVoNUIsa0JBQWtCbzVCLEdBQ2hELE9BQW9CLE9BQWJVLEdBQXFCeHlELEVBQUlzckIsUUFBUWtuQyxFQUFTeHlELE1BRTlDeXhELEVBeEVzQixHQTBFN0JFLEdBQThCLFdBQzlCLFNBQVNBLEVBQWEzeEQsRUFBS3l5RCxHQUN2Qnp4RCxLQUFLaEIsSUFBTUEsRUFDWGdCLEtBQUt5eEQsZ0JBQWtCQSxFQVkzQixPQVRBZCxFQUFhemdCLGFBQWUsU0FBVS9sQixFQUFNQyxHQUN4QyxPQUFRZ0YsR0FBWWhDLFdBQVdqRCxFQUFLbnJCLElBQUtvckIsRUFBTXByQixNQUMzQ2tyQixFQUFvQkMsRUFBS3NuQyxnQkFBaUJybkMsRUFBTXFuQyxrQkFHeERkLEVBQWFFLGtCQUFvQixTQUFVMW1DLEVBQU1DLEdBQzdDLE9BQVFGLEVBQW9CQyxFQUFLc25DLGdCQUFpQnJuQyxFQUFNcW5DLGtCQUNwRHJpQyxHQUFZaEMsV0FBV2pELEVBQUtuckIsSUFBS29yQixFQUFNcHJCLE1BRXhDMnhELEVBZnNCLEdBc0Y3QmUsR0FBNEIsV0FDNUIsU0FBU0EsRUFFVHRQLEVBQWF1UCxFQUFhQyxHQUN0QjV4RCxLQUFLb2lELFlBQWNBLEVBQ25CcGlELEtBQUsyeEQsWUFBY0EsRUFJbkIzeEQsS0FBSzZ4RCxvQkFBc0IsSUFBSXBCLEdBTy9CendELEtBQUs4eEQsbUJBQXFCLElBQUkxOUIsR0FBVWxLLEdBR3hDbHFCLEtBQUsreEQsaUJBQW1CLElBQUk3Z0IsSUFBVSxTQUFVdnlDLEdBQzVDLE9BQU9BLEVBQUVrcUMsaUJBT2I3b0MsS0FBS2d5RCwyQkFBNkJwK0IsR0FBZ0JLLElBQ2xEcHVCLEVBQU91OEMsRUFBWUMsUUFBUyxpRUFDNUJyaUQsS0FBS29pRCxZQUFZcGhCLGtCQUFrQnNtQixnQkFBZ0J0bkQsS0FBSzZ4RCxxQkFDeEQ3eEQsS0FBSzh1RCxjQUFnQjFNLEVBQVlxRCxpQkFBaUJtTSxHQUNsRDV4RCxLQUFLaXlELGdCQUFrQjdQLEVBQVl1RCx5QkFDbkMzbEQsS0FBSytoRCxZQUFjSyxFQUFZc0QsaUJBQy9CMWxELEtBQUsrdEQsZUFBaUIsSUFBSWMsR0FBbUI3dUQsS0FBS2l5RCxnQkFBaUJqeUQsS0FBSzh1RCxjQUFlOXVELEtBQUtvaUQsWUFBWXdELG1CQUN4RzVsRCxLQUFLMnhELFlBQVk3RCxzQkFBc0I5dEQsS0FBSyt0RCxnQkFrckJoRCxPQS9xQkEyRCxFQUFXcnlELFVBQVVneEIsTUFBUSxXQUN6QixPQUFPcndCLEtBQUtreUQseUNBVWhCUixFQUFXcnlELFVBQVU4eUQsaUJBQW1CLFNBQVVoeEIsR0FDOUMsT0FBTzM3QixFQUFNOUQsVUFBVTFCLFVBQU0sT0FBUSxHQUFRLFdBQ3pDLElBQUlveUQsRUFBa0JDLEVBQW1CL3ZELEVBQ3JDb0gsRUFBUTFKLEtBQ1osT0FBT3dGLEVBQU0vQyxZQUFZekMsTUFBTSxTQUFVaUwsR0FDckMsT0FBUUEsRUFBR2xJLE9BQ1AsS0FBSyxFQUdELE9BRkFxdkQsRUFBbUJweUQsS0FBSzh1RCxjQUN4QnVELEVBQW9CcnlELEtBQUsrdEQsZUFDbEIsQ0FBQyxFQUFhL3RELEtBQUtvaUQsWUFBWTVrQixlQUFlLHFCQUFzQix1QkFBdUIsU0FBVU4sR0FHcEcsSUFBSW8xQixFQUNKLE9BQU81b0QsRUFBTW9sRCxjQUNSanJCLHNCQUFzQjNHLEdBQ3RCOTZCLE1BQUssU0FBVW13RCxHQU1oQixPQUxBRCxFQUFhQyxFQUNiSCxFQUFtQjFvRCxFQUFNMDRDLFlBQVlxRCxpQkFBaUJ0a0IsR0FHdERreEIsRUFBb0IsSUFBSXhELEdBQW1CbmxELEVBQU11b0QsZ0JBQWlCRyxFQUFrQjFvRCxFQUFNMDRDLFlBQVl3RCxtQkFDL0Z3TSxFQUFpQnZ1QixzQkFBc0IzRyxNQUU3Qzk2QixNQUFLLFNBQVVvd0QsR0FLaEIsSUFKQSxJQUFJQyxFQUFrQixHQUNsQkMsRUFBZ0IsR0FFaEJDLEVBQWNqNkIsS0FDVC90QixFQUFLLEVBQUdpb0QsRUFBZU4sRUFBWTNuRCxFQUFLaW9ELEVBQWF2eUQsT0FBUXNLLElBQU0sQ0FDeEUsSUFBSXV2QixFQUFRMDRCLEVBQWFqb0QsR0FDekI4bkQsRUFBZ0JodkQsS0FBS3kyQixFQUFNbkIsU0FDM0IsSUFBSyxJQUFJOXRCLEVBQUssRUFBR0MsRUFBS2d2QixFQUFNaEIsVUFBV2p1QixFQUFLQyxFQUFHN0ssT0FBUTRLLElBQU0sQ0FDekQsSUFBSXV1QixFQUFXdHVCLEVBQUdELEdBQ2xCMG5ELEVBQWNBLEVBQVkxN0IsSUFBSXVDLEVBQVN4NkIsTUFHL0MsSUFBSyxJQUFJMlYsRUFBSyxFQUFHaytDLEVBQWVMLEVBQVk3OUMsRUFBS2srQyxFQUFheHlELE9BQVFzVSxJQUFNLENBQ3BFdWxCLEVBQVEyNEIsRUFBYWwrQyxHQUN6Qis5QyxFQUFjanZELEtBQUt5MkIsRUFBTW5CLFNBQ3pCLElBQUssSUFBSW5rQixFQUFLLEVBQUdrK0MsRUFBSzU0QixFQUFNaEIsVUFBV3RrQixFQUFLaytDLEVBQUd6eUQsT0FBUXVVLElBQU0sQ0FDckQ0a0IsRUFBV3M1QixFQUFHbCtDLEdBQ2xCKzlDLEVBQWNBLEVBQVkxN0IsSUFBSXVDLEVBQVN4NkIsTUFLL0MsT0FBT3F6RCxFQUNGbEUsYUFBYWp4QixFQUFLeTFCLEdBQ2xCdndELE1BQUssU0FBVTJ3RCxHQUNoQixNQUFPLENBQ0hBLGtCQUFtQkEsRUFDbkJOLGdCQUFpQkEsRUFDakJDLGNBQWVBLGFBS3ZDLEtBQUssRUFLRCxPQUpBcHdELEVBQVMySSxFQUFHakksT0FDWmhELEtBQUs4dUQsY0FBZ0JzRCxFQUNyQnB5RCxLQUFLK3RELGVBQWlCc0UsRUFDdEJyeUQsS0FBSzJ4RCxZQUFZN0Qsc0JBQXNCOXRELEtBQUsrdEQsZ0JBQ3JDLENBQUMsRUFBY3pyRCxXQU0xQ292RCxFQUFXcnlELFVBQVUyekQsV0FBYSxTQUFVOTVCLEdBQ3hDLElBR0krNUIsRUFIQXZwRCxFQUFRMUosS0FDUmc1QixFQUFpQjdGLEdBQVV4aUIsTUFDM0J4RixFQUFPK3RCLEVBQVVjLFFBQU8sU0FBVTd1QixFQUFNdE4sR0FBSyxPQUFPc04sRUFBSzhyQixJQUFJcDVCLEVBQUVtQixPQUFTMDVCLE1BRTVFLE9BQU8xNEIsS0FBS29pRCxZQUNQNWtCLGVBQWUsMEJBQTJCLHdCQUF3QixTQUFVTixHQUk3RSxPQUFPeHpCLEVBQU1xa0QsZUFBZUksYUFBYWp4QixFQUFLL3hCLEdBQU0vSSxNQUFLLFNBQVVpdEQsR0FDL0Q0RCxFQUFlNUQsRUFPZixJQURBLElBQUlwMkIsRUFBZ0IsR0FDWHR1QixFQUFLLEVBQUdrNEIsRUFBYzNKLEVBQVd2dUIsRUFBS2s0QixFQUFZeGlDLE9BQVFzSyxJQUFNLENBQ3JFLElBQUk2dUIsRUFBV3FKLEVBQVlsNEIsR0FDdkJ1b0QsRUFBWTE1QixFQUFTa1MsaUJBQWlCdW5CLEVBQWEzMEQsSUFBSWs3QixFQUFTeDZCLE1BQ25ELE1BQWJrMEQsR0FJQWo2QixFQUFjeDFCLEtBQUssSUFBSWtvQyxHQUFjblMsRUFBU3g2QixJQUFLazBELEVBQVdBLEVBQVV0bkIsWUFBYWpCLEdBQWFFLFFBQU8sS0FHakgsT0FBT25oQyxFQUFNb2xELGNBQWN4c0IsaUJBQWlCcEYsRUFBS2xFLEVBQWdCQyxFQUFlQyxTQUduRjEyQixNQUFLLFNBQVUwM0IsR0FDaEIsSUFBSXdYLEVBQVV4WCxFQUFNTix3QkFBd0JxNUIsR0FDNUMsTUFBTyxDQUFFbDZCLFFBQVNtQixFQUFNbkIsUUFBUzJZLFFBQVNBLE9BS2xEZ2dCLEVBQVdyeUQsVUFBVTh6RCx3QkFBMEIsU0FBVXA2QixHQUNyRCxJQUFJcnZCLEVBQVExSixLQUNaLE9BQU9BLEtBQUtvaUQsWUFBWTVrQixlQUFlLDRCQUE2Qix1QkFBdUIsU0FBVU4sR0FDakcsT0FBT3h6QixFQUFNb2xELGNBQ1J4ckIsbUJBQW1CcEcsRUFBS25FLEdBQ3hCMzJCLE1BQUssU0FBVStJLEdBQ2hCLE9BQUlBLEVBQ096QixFQUFNcWtELGVBQWVJLGFBQWFqeEIsRUFBSy94QixHQUd2Q292QixHQUFtQnY0QixRQUFRLGFBbUJsRDB2RCxFQUFXcnlELFVBQVUwaUMsaUJBQW1CLFNBQVV6SSxHQUM5QyxJQUFJNXZCLEVBQVExSixLQUNaLE9BQU9BLEtBQUtvaUQsWUFBWTVrQixlQUFlLG9CQUFxQixnQ0FBZ0MsU0FBVU4sR0FDbEcsSUFBSWsyQixFQUFXOTVCLEVBQVlZLE1BQU0vdUIsT0FDN0Jrb0QsRUFBaUIzcEQsRUFBTXVvRCxnQkFBZ0JwZCxnQkFBZ0IsQ0FDdkRDLGVBQWUsSUFFbkIsT0FBT3ByQyxFQUFNb2xELGNBQ1Ivc0IsaUJBQWlCN0UsRUFBSzVELEVBQVlZLE1BQU9aLEVBQVljLGFBQ3JEaDRCLE1BQUssV0FDTixPQUFPc0gsRUFBTTRwRCw0QkFBNEJwMkIsRUFBSzVELEVBQWErNUIsTUFFMURqeEQsTUFBSyxXQUFjLE9BQU9peEQsRUFBZS95RCxNQUFNNDhCLE1BQy9DOTZCLE1BQUssV0FBYyxPQUFPc0gsRUFBTW9sRCxjQUFjeHBCLHdCQUF3QnBJLE1BQ3RFOTZCLE1BQUssV0FBYyxPQUFPc0gsRUFBTXFrRCxlQUFlSSxhQUFhanhCLEVBQUtrMkIsVUFTOUUxQixFQUFXcnlELFVBQVVrMEQsWUFBYyxTQUFVeDZCLEdBQ3pDLElBQUlydkIsRUFBUTFKLEtBQ1osT0FBT0EsS0FBS29pRCxZQUFZNWtCLGVBQWUsZUFBZ0IsZ0NBQWdDLFNBQVVOLEdBQzdGLElBQUlzMkIsRUFDSixPQUFPOXBELEVBQU1vbEQsY0FDUjFyQixvQkFBb0JsRyxFQUFLbkUsR0FDekIzMkIsTUFBSyxTQUFVODNCLEdBR2hCLE9BRkFyMEIsRUFBaUIsT0FBVnEwQixFQUFnQix3Q0FDdkJzNUIsRUFBZXQ1QixFQUFNL3VCLE9BQ2R6QixFQUFNb2xELGNBQWM3cEIsb0JBQW9CL0gsRUFBS2hELE1BRW5EOTNCLE1BQUssV0FDTixPQUFPc0gsRUFBTW9sRCxjQUFjeHBCLHdCQUF3QnBJLE1BRWxEOTZCLE1BQUssV0FDTixPQUFPc0gsRUFBTXFrRCxlQUFlSSxhQUFhanhCLEVBQUtzMkIsVUFRMUQ5QixFQUFXcnlELFVBQVVza0MsZ0NBQWtDLFdBQ25ELElBQUlqNkIsRUFBUTFKLEtBQ1osT0FBT0EsS0FBS29pRCxZQUFZNWtCLGVBQWUsc0NBQXVDLHVCQUF1QixTQUFVTixHQUMzRyxPQUFPeHpCLEVBQU1vbEQsY0FBY25yQixnQ0FBZ0N6RyxPQUluRXcwQixFQUFXcnlELFVBQVUraUMsbUJBQXFCLFdBQ3RDLElBQUkxNEIsRUFBUTFKLEtBQ1osT0FBT0EsS0FBS29pRCxZQUFZNWtCLGVBQWUsd0JBQXlCLHVCQUF1QixTQUFVTixHQUM3RixPQUFPeHpCLEVBQU1vbEQsY0FBYzFzQixtQkFBbUJsRixPQVF0RHcwQixFQUFXcnlELFVBQVVnakMsbUJBQXFCLFNBQVVqSSxHQUNoRCxJQUFJMXdCLEVBQVExSixLQUNaLE9BQU9BLEtBQUtvaUQsWUFBWTVrQixlQUFlLHdCQUF5QixnQ0FBZ0MsU0FBVU4sR0FDdEcsT0FBT3h6QixFQUFNb2xELGNBQWN6c0IsbUJBQW1CbkYsRUFBSzlDLE9BTzNEczNCLEVBQVdyeUQsVUFBVWdvQyw2QkFBK0IsV0FDaEQsSUFBSTM5QixFQUFRMUosS0FDWixPQUFPQSxLQUFLb2lELFlBQVk1a0IsZUFBZSxtQ0FBb0MsdUJBQXVCLFNBQVVOLEdBQU8sT0FBT3h6QixFQUFNcTRDLFlBQVkxYSw2QkFBNkJuSyxPQVU3S3cwQixFQUFXcnlELFVBQVVvMEQsaUJBQW1CLFNBQVVDLEdBQzlDLElBQUlocUQsRUFBUTFKLEtBQ1IyekQsRUFBZ0JELEVBQVk5WSxnQkFDNUJnWixFQUEyQjV6RCxLQUFLOHhELG1CQUNwQyxPQUFPOXhELEtBQUtvaUQsWUFDUDVrQixlQUFlLHFCQUFzQixnQ0FBZ0MsU0FBVU4sR0FDaEYsSUFBSW0yQixFQUFpQjNwRCxFQUFNdW9ELGdCQUFnQnBkLGdCQUFnQixDQUN2REMsZUFBZSxJQUduQjhlLEVBQTJCbHFELEVBQU1vb0QsbUJBQ2pDLElBQUluMkIsRUFBVyxHQUNmalYsRUFBY2d0QyxFQUFZRyxlQUFlLFNBQVU1N0IsRUFBVTY3QixHQUN6RCxJQUFJQyxFQUFnQkgsRUFBeUJ0MUQsSUFBSTI1QixHQUNqRCxHQUFLODdCLEVBQUwsQ0FNQXA0QixFQUFTbDRCLEtBQUtpRyxFQUFNcTRDLFlBQ2YxWSxtQkFBbUJuTSxFQUFLNDJCLEVBQU8zdUIsaUJBQWtCbE4sR0FDakQ3MUIsTUFBSyxXQUNOLE9BQU9zSCxFQUFNcTRDLFlBQVk5WSxnQkFBZ0IvTCxFQUFLNDJCLEVBQU9FLGVBQWdCLzdCLE9BRXpFLElBQUlzaEIsRUFBY3VhLEVBQU92YSxZQUV6QixHQUFJQSxFQUFZbDVDLE9BQVMsRUFBRyxDQUN4QixJQUFJNHpELEVBQWdCRixFQUNmalosZ0JBQWdCdkIsRUFBYW9hLEdBQzdCOVksbUJBQW1CM2QsRUFBSXFiLHVCQUM1QnFiLEVBQTJCQSxFQUF5QjV5QyxPQUFPaVgsRUFBVWc4QixHQUdqRXZDLEVBQVd3Qyx3QkFBd0JILEVBQWVFLEVBQWVILElBQ2pFbjRCLEVBQVNsNEIsS0FBS2lHLEVBQU1xNEMsWUFBWS9aLGlCQUFpQjlLLEVBQUsrMkIsU0FJbEUsSUFBSTNmLEVBQWNuYyxLQUNkZzhCLEVBQWN6N0IsS0F5Q2xCLEdBeENBZzdCLEVBQVlVLGdCQUFnQjVpRCxTQUFRLFNBQVV4UyxFQUFLdXRDLEdBQy9DNG5CLEVBQWNBLEVBQVlsOUIsSUFBSWo0QixNQUlsQzI4QixFQUFTbDRCLEtBQUs0dkQsRUFBZWhoQixXQUFXblYsRUFBS2kzQixHQUFhL3hELE1BQUssU0FBVTZ3RCxHQUNyRVMsRUFBWVUsZ0JBQWdCNWlELFNBQVEsU0FBVXhTLEVBQUt1dEMsR0FDL0MsSUFBSThuQixFQUFjcEIsRUFBYTMwRCxJQUFJVSxHQUsvQnV0QyxhQUFlWSxJQUNmWixFQUFJajJCLFFBQVFnVSxRQUFRc0osR0FBZ0JLLE1BSXBDby9CLEVBQWVwaEIsWUFBWWp6QyxFQUFLMjBELEdBQ2hDcmYsRUFBY0EsRUFBWXR6QixPQUFPaGlCLEVBQUt1dEMsSUFFbEIsTUFBZjhuQixHQUNMOW5CLEVBQUlqMkIsUUFBUThWLFVBQVVpb0MsRUFBWS85QyxTQUFXLEdBQ0csSUFBL0NpMkIsRUFBSWoyQixRQUFROFYsVUFBVWlvQyxFQUFZLzlDLFVBQy9CKzlDLEVBQVl6RixrQkFDaEIvb0QsR0FBUSt0QixHQUFnQkssSUFBSTNKLFFBQVFxcEMsR0FBZ0IseURBQ3BETixFQUFleGhCLFNBQVN0RixFQUFLb25CLEdBQzdCcmYsRUFBY0EsRUFBWXR6QixPQUFPaGlCLEVBQUt1dEMsSUFHdEM1MEIsRUF2WVIsYUF1WXlCLHNDQUF1QzNZLEVBQUsscUJBQXNCcTFELEVBQVkvOUMsUUFBUyxrQkFBbUJpMkIsRUFBSWoyQixTQUUvSG85QyxFQUFZWSx1QkFBdUJ0Z0QsSUFBSWhWLElBQ3ZDMjhCLEVBQVNsNEIsS0FBS2lHLEVBQU0wNEMsWUFBWXBoQixrQkFBa0I0bUIsb0JBQW9CMXFCLEVBQUtsK0IsWUFRbEYyMEQsRUFBY3JwQyxRQUFRc0osR0FBZ0JLLEtBQU0sQ0FDN0MsSUFBSXNnQyxFQUFzQjdxRCxFQUFNcTRDLFlBQzNCMWEsNkJBQTZCbkssR0FDN0I5NkIsTUFBSyxTQUFVa2xDLEdBS2hCLE9BSkF6aEMsRUFBTzh0RCxFQUFjdm5DLFVBQVVrYixJQUE4QixFQUFHLGdEQUM1RHFzQixFQUNBLE1BQ0Fyc0IsR0FDRzU5QixFQUFNcTRDLFlBQVl0YSxtQkFBbUJ2SyxFQUFLQSxFQUFJcWIsc0JBQXVCb2IsTUFFaEZoNEIsRUFBU2w0QixLQUFLOHdELEdBRWxCLE9BQU9oNkIsR0FBbUJXLFFBQVFTLEdBQzdCdjVCLE1BQUssV0FBYyxPQUFPaXhELEVBQWUveUQsTUFBTTQ4QixNQUMvQzk2QixNQUFLLFdBQ04sT0FBT3NILEVBQU1xa0QsZUFBZXlCLHdCQUF3QnR5QixFQUFLb1gsU0FHNUQ5eEMsTUFBSyxTQUFVOHhDLEdBRWhCLE9BREE1cUMsRUFBTW9vRCxtQkFBcUI4QixFQUNwQnRmLE1BY2ZvZCxFQUFXd0Msd0JBQTBCLFNBQVVILEVBQWVFLEVBQWVILEdBR3pFLE9BRkFqdUQsRUFBT291RCxFQUFjMWEsWUFBWWw1QyxPQUFTLEVBQUcseURBRUosSUFBckMwekQsRUFBY3hhLFlBQVlsNUMsU0FRZDR6RCxFQUFjclosZ0JBQWdCMW1CLGlCQUMxQzYvQixFQUFjblosZ0JBQWdCMW1CLGtCQUNqQmwwQixLQUFLdzBELDZCQVFSVixFQUFPRSxlQUFlcm1DLEtBQ2hDbW1DLEVBQU9XLGtCQUFrQjltQyxLQUN6Qm1tQyxFQUFPM3VCLGlCQUFpQnhYLEtBQ1gsSUFLckIrakMsRUFBV3J5RCxVQUFVcTFELHVCQUF5QixTQUFVQyxHQUVwRCxJQURBLElBQUlqckQsRUFBUTFKLEtBQ0gySyxFQUFLLEVBQUdpcUQsRUFBZ0JELEVBQWFocUQsRUFBS2lxRCxFQUFjdjBELE9BQVFzSyxJQUFNLENBQzNFLElBQUlrcUQsRUFBYUQsRUFBY2pxRCxHQUMzQnN0QixFQUFXNDhCLEVBQVc1OEIsU0FHMUIsR0FGQWo0QixLQUFLNnhELG9CQUFvQmQsY0FBYzhELEVBQVdDLFVBQVc3OEIsR0FDN0RqNEIsS0FBSzZ4RCxvQkFBb0JaLGlCQUFpQjRELEVBQVdFLFlBQWE5OEIsSUFDN0Q0OEIsRUFBV0csVUFBVyxDQUN2QixJQUFJcHRCLEVBQWE1bkMsS0FBSzh4RCxtQkFBbUJ4ekQsSUFBSTI1QixHQUM3Q3B5QixFQUFzQixPQUFmK2hDLEVBQXFCLDZEQUErRDNQLEdBRTNGLElBQUl3aEIsRUFBK0I3UixFQUFXZ1QsZ0JBQzFDcWEsRUFBb0JydEIsRUFBV21ULGlDQUFpQ3RCLEdBQ3BFejVDLEtBQUs4eEQsbUJBQXFCOXhELEtBQUs4eEQsbUJBQW1COXdDLE9BQU9pWCxFQUFVZzlCLElBRzNFLE9BQU9qMUQsS0FBS29pRCxZQUFZNWtCLGVBQWUseUJBQTBCLHdCQUF3QixTQUFVTixHQUMvRixPQUFPM0MsR0FBbUIvb0IsUUFBUW1qRCxHQUFhLFNBQVVFLEdBQ3JELE9BQU90NkIsR0FBbUIvb0IsUUFBUXFqRCxFQUFXRSxhQUFhLFNBQVUvMUQsR0FDaEUsT0FBTzBLLEVBQU0wNEMsWUFBWXBoQixrQkFBa0JzSSxnQkFBZ0JwTSxFQUFLbCtCLGFBV2hGMHlELEVBQVdyeUQsVUFBVTYxRCxrQkFBb0IsU0FBVUMsR0FDL0MsSUFBSXpyRCxFQUFRMUosS0FDWixPQUFPQSxLQUFLb2lELFlBQVk1a0IsZUFBZSwwQkFBMkIsdUJBQXVCLFNBQVVOLEdBSS9GLFlBSHFCM3pCLElBQWpCNHJELElBQ0FBLEdBemxRTSxHQTJsUUh6ckQsRUFBTW9sRCxjQUFjdnJCLGlDQUFpQ3JHLEVBQUtpNEIsT0FPekV6RCxFQUFXcnlELFVBQVUrMUQsYUFBZSxTQUFVcDJELEdBQzFDLElBQUkwSyxFQUFRMUosS0FDWixPQUFPQSxLQUFLb2lELFlBQVk1a0IsZUFBZSxnQkFBaUIsdUJBQXVCLFNBQVVOLEdBQ3JGLE9BQU94ekIsRUFBTXFrRCxlQUFlZ0IsWUFBWTd4QixFQUFLbCtCLE9BV3JEMHlELEVBQVdyeUQsVUFBVWcyRCxlQUFpQixTQUFVdjBELEdBQzVDLElBQUk0SSxFQUFRMUosS0FDWixPQUFPQSxLQUFLb2lELFlBQ1A1a0IsZUFBZSxrQkFBbUIsd0JBQXdCLFNBQVVOLEdBQ3JFLElBQUkwSyxFQUNKLE9BQU9sK0IsRUFBTXE0QyxZQUNSblosY0FBYzFMLEVBQUtwOEIsR0FDbkJzQixNQUFLLFNBQVVrekQsR0FDaEIsT0FBSUEsR0FJQTF0QixFQUFhMHRCLEVBQ04vNkIsR0FBbUJ2NEIsUUFBUTRsQyxJQUczQmwrQixFQUFNcTRDLFlBQVk5YSxpQkFBaUIvSixHQUFLOTZCLE1BQUssU0FBVTYxQixHQUUxRCxPQURBMlAsRUFBYSxJQUFJOFMsR0FBVzU1QyxFQUFRbTNCLEVBQVUraEIsR0FBY3lDLE9BQVF2ZixFQUFJcWIsdUJBQ2pFN3VDLEVBQU1xNEMsWUFDUnBhLGNBQWN6SyxFQUFLMEssR0FDbkJ4bEMsTUFBSyxXQUFjLE9BQU93bEMsY0FLMUNwbEMsTUFBSyxTQUFVb2xDLEdBS2hCLE9BSjBELE9BQXREbCtCLEVBQU1vb0QsbUJBQW1CeHpELElBQUlzcEMsRUFBVzNQLFlBQ3hDdnVCLEVBQU1vb0QsbUJBQXFCcG9ELEVBQU1vb0QsbUJBQW1COXdDLE9BQU80bUIsRUFBVzNQLFNBQVUyUCxHQUNoRmwrQixFQUFNcW9ELGlCQUFpQjc5QyxJQUFJcFQsRUFBUThtQyxFQUFXM1AsV0FFM0MyUCxNQVFmOHBCLEVBQVdyeUQsVUFBVXVwQyxjQUFnQixTQUFVenJCLEVBQWFyYyxHQUN4RCxJQUFJbTNCLEVBQVdqNEIsS0FBSyt4RCxpQkFBaUJ6ekQsSUFBSXdDLEdBQ3pDLFlBQWlCeUksSUFBYjB1QixFQUNPc0MsR0FBbUJ2NEIsUUFBUWhDLEtBQUs4eEQsbUJBQW1CeHpELElBQUkyNUIsSUFHdkRqNEIsS0FBSytoRCxZQUFZblosY0FBY3pyQixFQUFhcmMsSUFXM0Q0d0QsRUFBV3J5RCxVQUFVazJELGNBQWdCLFNBQVV0OUIsRUFBVXU5QixHQUNyRCxJQUFJOXJELEVBQVExSixLQUNSNG5DLEVBQWE1bkMsS0FBSzh4RCxtQkFBbUJ4ekQsSUFBSTI1QixHQUM3Q3B5QixFQUFzQixPQUFmK2hDLEVBQXFCLHdDQUEwQzNQLEdBQ3RFLElBQUlyNUIsRUFBTzQyRCxFQUNMLHVCQUNBLCtCQUNOLE9BQU94MUQsS0FBS29pRCxZQUNQNWtCLGVBQWUsaUJBQWtCNStCLEdBQU0sU0FBVXMrQixHQVdsRCxJQUFJdTRCLEVBQVUvckQsRUFBTW1vRCxvQkFBb0JYLHNCQUFzQmo1QixHQUM5RCxPQUFLdTlCLEVBUU1qN0IsR0FBbUJ2NEIsVUFQbkJ1NEIsR0FBbUIvb0IsUUFBUWlrRCxHQUFTLFNBQVV6MkQsR0FDakQsT0FBTzBLLEVBQU0wNEMsWUFBWXBoQixrQkFBa0JzSSxnQkFBZ0JwTSxFQUFLbCtCLE1BQ2pFb0QsTUFBSyxXQUNKc0gsRUFBTTA0QyxZQUFZcGhCLGtCQUFrQjJtQixhQUFhenFCLEVBQUswSyxTQU83RHBsQyxNQUFLLFdBQ05rSCxFQUFNb29ELG1CQUFxQnBvRCxFQUFNb29ELG1CQUFtQnh3QyxPQUFPMlcsR0FDM0R2dUIsRUFBTXFvRCxpQkFBaUI3OEMsT0FBTzB5QixFQUFXOW1DLFlBV2pENHdELEVBQVdyeUQsVUFBVXEyRCxhQUFlLFNBQVV4M0MsRUFBT3kzQyxHQUNqRCxJQUFJanNELEVBQVExSixLQUNSeTVDLEVBQStCN2xCLEdBQWdCSyxJQUMvQ2c2QixFQUFhdjFCLEtBQ2pCLE9BQU8xNEIsS0FBS29pRCxZQUFZNWtCLGVBQWUsZ0JBQWlCLHVCQUF1QixTQUFVTixHQUNyRixPQUFPeHpCLEVBQU1rL0IsY0FBYzFMLEVBQUtoZixFQUFNOHNDLFlBQ2pDNW9ELE1BQUssU0FBVXdsQyxHQUNoQixHQUFJQSxFQUdBLE9BRkE2UixFQUNJN1IsRUFBVzZSLDZCQUNSL3ZDLEVBQU1xNEMsWUFDUnhZLDJCQUEyQnJNLEVBQUswSyxFQUFXM1AsVUFDM0M3MUIsTUFBSyxTQUFVRSxHQUNoQjJyRCxFQUFhM3JELFFBSXBCRixNQUFLLFdBQ04sT0FBT3NILEVBQU1pb0QsWUFBWWhlLDBCQUEwQnpXLEVBQUtoZixFQUFPeTNDLEVBQ3pEbGMsRUFDQTdsQixHQUFnQkssSUFBSzBoQyxFQUFxQjFILEVBQWF2MUIsU0FFNUR0MkIsTUFBSyxTQUFVazZDLEdBQ2hCLE1BQU8sQ0FBRUEsVUFBV0EsRUFBVzJSLFdBQVlBLFVBUXZEeUQsRUFBV3J5RCxVQUFVdTJELG1CQUFxQixTQUFVMzlCLEdBQ2hELElBQUl2dUIsRUFBUTFKLEtBQ1osT0FBT0EsS0FBS29pRCxZQUFZNWtCLGVBQWUsdUJBQXdCLHVCQUF1QixTQUFVTixHQUM1RixPQUFPeHpCLEVBQU1xNEMsWUFBWXhZLDJCQUEyQnJNLEVBQUtqRixPQUlqRXk1QixFQUFXcnlELFVBQVVpbUQsaUJBQW1CLFdBQ3BDLE9BQU90bEQsS0FBS29pRCxZQUFZa0Qsb0JBRzVCb00sRUFBV3J5RCxVQUFVdzJELGtDQUFvQyxTQUFVOThCLEdBQy9ELzRCLEtBQUs4dUQsY0FBYzFwQix5QkFBeUJyTSxJQUdoRDI0QixFQUFXcnlELFVBQVU0akQsa0JBQW9CLFNBQVVuSixHQUMvQzk1QyxLQUFLb2lELFlBQVlhLGtCQUFrQm5KLElBRXZDNFgsRUFBV3J5RCxVQUFVaTBELDRCQUE4QixTQUFVcDJCLEVBQUs1RCxFQUFhKzVCLEdBQzNFLElBQUkzcEQsRUFBUTFKLEtBQ1JrNkIsRUFBUVosRUFBWVksTUFDcEI0N0IsRUFBVTU3QixFQUFNL3VCLE9BQ2hCNHFELEVBQWV4N0IsR0FBbUJ2NEIsVUE0QnRDLE9BM0JBOHpELEVBQVF0a0QsU0FBUSxTQUFVNG5CLEdBQ3RCMjhCLEVBQWVBLEVBQ1YzekQsTUFBSyxXQUNOLE9BQU9peEQsRUFBZW5oQixTQUFTaFYsRUFBSzlELE1BRW5DaDNCLE1BQUssU0FBVTg0QyxHQUNoQixJQUFJM08sRUFBTTJPLEVBQ044YSxFQUFhMThCLEVBQVllLFlBQVkvN0IsSUFBSTg2QixHQUM3Q3Z6QixFQUFzQixPQUFmbXdELEVBQXFCLHdEQUN2QnpwQixHQUFPQSxFQUFJajJCLFFBQVE4VixVQUFVNHBDLEdBQWMsTUFDNUN6cEIsRUFBTXJTLEVBQU1mLHNCQUFzQkMsRUFBUW1ULEVBQUtqVCxJQVkzQys1QixFQUFleGhCLFNBQVN0RixFQUFLalQsRUFBWWEsZUFWekN0MEIsR0FBUXExQyxFQUFXLGtCQUNmaGhCLEVBQ0Esd0JBQ0FnaEIsRUFDQSw0QkFXYjZhLEVBQWEzekQsTUFBSyxXQUNyQixPQUFPc0gsRUFBTW9sRCxjQUFjN3BCLG9CQUFvQi9ILEVBQUtoRCxPQUc1RHczQixFQUFXcnlELFVBQVVnZ0QsZUFBaUIsU0FBVVIsR0FDNUMsSUFBSW4xQyxFQUFRMUosS0FDWixPQUFPQSxLQUFLb2lELFlBQVk1a0IsZUFBZSxrQkFBbUIsZ0NBQWdDLFNBQVVOLEdBQU8sT0FBTzJoQixFQUFpQm1CLFFBQVE5aUIsRUFBS3h6QixFQUFNb29ELHdCQUcxSkosRUFBV3J5RCxVQUFVZ2dCLFVBQVksU0FBVTRZLEdBQ3ZDLElBQUl2dUIsRUFBUTFKLEtBQ1JpMkQsRUFBbUJqMkQsS0FBSzh4RCxtQkFBbUJ4ekQsSUFBSTI1QixHQUNuRCxPQUFJZytCLEVBQ09sMEQsUUFBUUMsUUFBUWkwRCxFQUFpQm4xRCxRQUdqQ2QsS0FBS29pRCxZQUFZNWtCLGVBQWUsa0JBQW1CLHVCQUF1QixTQUFVTixHQUN2RixPQUFPeHpCLEVBQU1xNEMsWUFDUnRZLHVCQUF1QnZNLEVBQUtqRixHQUM1QjcxQixNQUFLLFNBQVV3bEMsR0FBYyxPQUFRQSxFQUFhQSxFQUFXOW1DLE9BQVMsWUFXdkY0d0QsRUFBV3J5RCxVQUFVZzFDLHNCQUF3QixXQUN6QyxJQUFJM3FDLEVBQVExSixLQUNaLE9BQU9BLEtBQUtvaUQsWUFDUDVrQixlQUFlLDJCQUE0Qix1QkFBdUIsU0FBVU4sR0FDN0UsT0FBT3h6QixFQUFNdW9ELGdCQUFnQjVkLHNCQUFzQm5YLEVBQUt4ekIsRUFBTXNvRCwrQkFFN0R4dkQsTUFBSyxTQUFVeUksR0FDaEIsSUFBSXFwQyxFQUFjcnBDLEVBQUdxcEMsWUFBYXZDLEVBQVc5bUMsRUFBRzhtQyxTQUVoRCxPQURBcm9DLEVBQU1zb0QsMkJBQTZCamdCLEVBQzVCdUMsTUFTZm9kLEVBQVdyeUQsVUFBVTZ5RCxzQ0FBd0MsV0FDekQsT0FBTzFzRCxFQUFNOUQsVUFBVTFCLFVBQU0sT0FBUSxHQUFRLFdBQ3pDLElBQUlrMkQsRUFDQXhzRCxFQUFRMUosS0FDWixPQUFPd0YsRUFBTS9DLFlBQVl6QyxNQUFNLFNBQVVpTCxHQUNyQyxPQUFJakwsS0FBS2l5RCwyQkFBMkJ6ZixJQUNoQzBqQixFQUF3QmwyRCxLQUFLaXlELGdCQUN0QixDQUFDLEVBQWNqeUQsS0FBS29pRCxZQUNsQjVrQixlQUFlLDZDQUE4Qyx1QkFBdUIsU0FBVU4sR0FBTyxPQUFPZzVCLEVBQXNCdmhCLHNCQUFzQnpYLE1BQ3hKMTZCLE1BQUssU0FBVXlJLEdBQ2hCLElBQUk4bUMsRUFBVzltQyxFQUFHOG1DLFNBQ2xCcm9DLEVBQU1zb0QsMkJBQTZCamdCLE9BR3hDLENBQUMsVUFXcEIyZixFQUFXOEMsNEJBQThCLElBQ2xDOUMsRUFwdEJvQixHQXV1QjNCeUUsR0FBcUMsV0FDckMsU0FBU0EsRUFBb0JwMUIsRUFBY0MsR0FDdkNoaEMsS0FBSytnQyxhQUFlQSxFQUNwQi9nQyxLQUFLZ2hDLGtCQUFvQkEsRUFLekJoaEMsS0FBSzh1RCxjQUFnQixHQUVyQjl1RCxLQUFLd2pDLFlBQWMsRUFLbkJ4akMsS0FBS2lpQyxnQkFBa0JqZCxJQUV2QmhsQixLQUFLbzJELHFCQUF1QixJQUFJci9CLEdBQVU0NUIsR0FBYXpnQixjQTBOM0QsT0F4TkFpbUIsRUFBb0I5MkQsVUFBVWlpQyxXQUFhLFNBQVVua0IsR0FDakQsT0FBT29kLEdBQW1CdjRCLFFBQXNDLElBQTlCaEMsS0FBSzh1RCxjQUFjenVELFNBRXpEODFELEVBQW9COTJELFVBQVUwaUMsaUJBQW1CLFNBQVU1a0IsRUFBYStjLEVBQU9FLEdBQzNFLElBQUlyQixFQUFVbUIsRUFBTW5CLFFBQ2hCczlCLEVBQWFyMkQsS0FBS3MyRCx1QkFBdUJ2OUIsRUFBUyxnQkFDdERsekIsRUFBc0IsSUFBZnd3RCxFQUFrQiw4REFFekIsSUFBSXovQixFQUFRNTJCLEtBQUs4dUQsY0FBY3VILEdBTS9CLE9BTEF4d0QsRUFBT2t6QixJQUFZbkMsRUFBTW1DLFFBQVMsMENBQzlCQSxFQUNBLGVBQ0FuQyxFQUFNbUMsU0FDVi80QixLQUFLaWlDLGdCQUFrQjdILEVBQ2hCRyxHQUFtQnY0QixXQUU5Qm0wRCxFQUFvQjkyRCxVQUFVK2lDLG1CQUFxQixTQUFVamxCLEdBQ3pELE9BQU9vZCxHQUFtQnY0QixRQUFRaEMsS0FBS2lpQyxrQkFFM0NrMEIsRUFBb0I5MkQsVUFBVWdqQyxtQkFBcUIsU0FBVWxsQixFQUFhaWQsR0FFdEUsT0FEQXA2QixLQUFLaWlDLGdCQUFrQjdILEVBQ2hCRyxHQUFtQnY0QixXQUU5Qm0wRCxFQUFvQjkyRCxVQUFVaWpDLGlCQUFtQixTQUFVbmxCLEVBQWE2YixFQUFnQkMsRUFBZUMsR0FDbkdyekIsRUFBNEIsSUFBckJxekIsRUFBVTc0QixPQUFjLHdDQUMvQixJQUFJMDRCLEVBQVUvNEIsS0FBS3dqQyxhQUNuQnhqQyxLQUFLd2pDLGNBQ0R4akMsS0FBSzh1RCxjQUFjenVELE9BQVMsSUFFNUJ3RixFQURZN0YsS0FBSzh1RCxjQUFjOXVELEtBQUs4dUQsY0FBY3p1RCxPQUFTLEdBQzlDMDRCLFFBQVVBLEVBQVMsNERBRXBDLElBQUltQixFQUFRLElBQUlwQixHQUFjQyxFQUFTQyxFQUFnQkMsRUFBZUMsR0FDdEVsNUIsS0FBSzh1RCxjQUFjcnJELEtBQUt5MkIsR0FFeEIsSUFBSyxJQUFJdnZCLEVBQUssRUFBR2s0QixFQUFjM0osRUFBV3Z1QixFQUFLazRCLEVBQVl4aUMsT0FBUXNLLElBQU0sQ0FDckUsSUFBSTZ1QixFQUFXcUosRUFBWWw0QixHQUMzQjNLLEtBQUtvMkQscUJBQXVCcDJELEtBQUtvMkQscUJBQXFCbi9CLElBQUksSUFBSTA1QixHQUFhbjNCLEVBQVN4NkIsSUFBSys1QixJQUN6Ri80QixLQUFLK2dDLGFBQWFtQywyQkFBMkIvbEIsRUFBYXFjLEVBQVN4NkIsSUFBSXl2QixLQUFLYixXQUVoRixPQUFPMk0sR0FBbUJ2NEIsUUFBUWs0QixJQUV0Q2k4QixFQUFvQjkyRCxVQUFVK2pDLG9CQUFzQixTQUFVam1CLEVBQWE0YixHQUN2RSxPQUFPd0IsR0FBbUJ2NEIsUUFBUWhDLEtBQUt1MkQsa0JBQWtCeDlCLEtBRTdEbzlCLEVBQW9COTJELFVBQVVpa0MsbUJBQXFCLFNBQVVubUIsRUFBYTRiLEdBQ3RFLElBQUl5OUIsRUFBZ0J4MkQsS0FBS3UyRCxrQkFBa0J4OUIsR0FFM0MsT0FEQWx6QixFQUF3QixNQUFqQjJ3RCxFQUF1Qix3Q0FDdkJqOEIsR0FBbUJ2NEIsUUFBUXcwRCxFQUFjcnJELFNBRXBEZ3JELEVBQW9COTJELFVBQVVra0MsaUNBQW1DLFNBQVVwbUIsRUFBYTRiLEdBQ3BGLElBQUl5SyxFQUFjekssRUFBVSxFQUd4QjA5QixFQUFXejJELEtBQUswMkQsZUFBZWx6QixHQUMvQnJuQixFQUFRczZDLEVBQVcsRUFBSSxFQUFJQSxFQUMvQixPQUFPbDhCLEdBQW1CdjRCLFFBQVFoQyxLQUFLOHVELGNBQWN6dUQsT0FBUzhiLEVBQVFuYyxLQUFLOHVELGNBQWMzeUMsR0FBUyxPQUV0R2c2QyxFQUFvQjkyRCxVQUFVc2tDLGdDQUFrQyxXQUM1RCxPQUFPcEosR0FBbUJ2NEIsUUFBc0MsSUFBOUJoQyxLQUFLOHVELGNBQWN6dUQsUUE5OFF2QyxFQTg4UXdFTCxLQUFLd2pDLFlBQWMsSUFFN0cyeUIsRUFBb0I5MkQsVUFBVXdrQyxzQkFBd0IsU0FBVTFtQixHQUM1RCxPQUFPb2QsR0FBbUJ2NEIsUUFBUWhDLEtBQUs4dUQsY0FBYzFqRCxVQUV6RCtxRCxFQUFvQjkyRCxVQUFVMGtDLDBDQUE0QyxTQUFVNW1CLEVBQWE2bUIsR0FDN0YsSUFBSXQ2QixFQUFRMUosS0FDUnF3QixFQUFRLElBQUlzZ0MsR0FBYTNzQixFQUFhLEdBQ3RDOVYsRUFBTSxJQUFJeWlDLEdBQWEzc0IsRUFBYXBkLE9BQU8rYSxtQkFDM0NyL0IsRUFBUyxHQU9iLE9BTkF0QyxLQUFLbzJELHFCQUFxQjkrQixlQUFlLENBQUNqSCxFQUFPbkMsSUFBTSxTQUFVNGlDLEdBQzdEanJELEVBQU9tK0IsRUFBWTFaLFFBQVF3bUMsRUFBSTl4RCxLQUFNLG1EQUNyQyxJQUFJazdCLEVBQVF4d0IsRUFBTTZzRCxrQkFBa0J6RixFQUFJVyxpQkFDeEM1ckQsRUFBaUIsT0FBVnEwQixFQUFnQixxREFDdkI1M0IsRUFBT21CLEtBQUt5MkIsTUFFVEssR0FBbUJ2NEIsUUFBUU0sSUFFdEM2ekQsRUFBb0I5MkQsVUFBVWlsQywyQ0FBNkMsU0FBVW5uQixFQUFhb25CLEdBQzlGLElBQUk3NkIsRUFBUTFKLEtBQ1J3a0MsRUFBaUIsSUFBSXpOLEdBQVU3TSxHQVNuQyxPQVJBcWEsRUFBYS95QixTQUFRLFNBQVV3eUIsR0FDM0IsSUFBSTNULEVBQVEsSUFBSXNnQyxHQUFhM3NCLEVBQWEsR0FDdEM5VixFQUFNLElBQUl5aUMsR0FBYTNzQixFQUFhcGQsT0FBTythLG1CQUMvQ2o0QixFQUFNMHNELHFCQUFxQjkrQixlQUFlLENBQUNqSCxFQUFPbkMsSUFBTSxTQUFVNGlDLEdBQzlEanJELEVBQU9tK0IsRUFBWTFaLFFBQVF3bUMsRUFBSTl4RCxLQUFNLGlFQUNyQ3dsQyxFQUFpQkEsRUFBZXZOLElBQUk2NUIsRUFBSVcsdUJBR3pDbDNCLEdBQW1CdjRCLFFBQVFoQyxLQUFLMjJELG9CQUFvQm55QixLQUUvRDJ4QixFQUFvQjkyRCxVQUFVc2xDLG9DQUFzQyxTQUFVeG5CLEVBQWFlLEdBQ3ZGclksR0FBUXFZLEVBQU0ybUIseUJBQTBCLG1FQUd4QyxJQUFJK3hCLEVBQVMxNEMsRUFBTXVRLEtBQ2ZvbEIsRUFBOEIraUIsRUFBT3YyRCxPQUFTLEVBSzlDdzJELEVBQVlELEVBQ1h4bkMsR0FBWUMsY0FBY3duQyxLQUMzQkEsRUFBWUEsRUFBVXhwQyxNQUFNLEtBRWhDLElBQUlnRCxFQUFRLElBQUlzZ0MsR0FBYSxJQUFJdmhDLEdBQVl5bkMsR0FBWSxHQUdyRHJ5QixFQUFpQixJQUFJek4sR0FBVTdNLEdBa0JuQyxPQWpCQWxxQixLQUFLbzJELHFCQUFxQjMrQixjQUFhLFNBQVVxNUIsR0FDN0MsSUFBSWdHLEVBQWFoRyxFQUFJOXhELElBQUl5dkIsS0FDekIsUUFBS21vQyxFQUFPN29DLFdBQVcrb0MsS0FTZkEsRUFBV3oyRCxTQUFXd3pDLElBQ3RCclAsRUFBaUJBLEVBQWV2TixJQUFJNjVCLEVBQUlXLG1CQUVyQyxLQUVacGhDLEdBQ0lrSyxHQUFtQnY0QixRQUFRaEMsS0FBSzIyRCxvQkFBb0JueUIsS0FFL0QyeEIsRUFBb0I5MkQsVUFBVXMzRCxvQkFBc0IsU0FBVTN4QixHQUMxRCxJQUFJdDdCLEVBQVExSixLQUdSc0MsRUFBUyxHQU9iLE9BTkEwaUMsRUFBU3h6QixTQUFRLFNBQVV1bkIsR0FDdkIsSUFBSW1CLEVBQVF4d0IsRUFBTTZzRCxrQkFBa0J4OUIsR0FDdEIsT0FBVm1CLEdBQ0E1M0IsRUFBT21CLEtBQUt5MkIsTUFHYjUzQixHQUVYNnpELEVBQW9COTJELFVBQVU0bEMsb0JBQXNCLFNBQVU5bkIsRUFBYStjLEdBQ3ZFLElBQUl4d0IsRUFBUTFKLEtBSVo2RixFQUFzQixJQURMN0YsS0FBS3MyRCx1QkFBdUJwOEIsRUFBTW5CLFFBQVMsV0FDbkMseURBQ3pCLzRCLEtBQUs4dUQsY0FBY2hxRCxRQUNuQixJQUFJeWIsRUFBYXZnQixLQUFLbzJELHFCQUN0QixPQUFPNzdCLEdBQW1CL29CLFFBQVEwb0IsRUFBTWhCLFdBQVcsU0FBVU0sR0FDekQsSUFBSXMzQixFQUFNLElBQUlILEdBQWFuM0IsRUFBU3g2QixJQUFLazdCLEVBQU1uQixTQUUvQyxPQURBeFksRUFBYUEsRUFBV3JMLE9BQU80N0MsR0FDeEJwbkQsRUFBTXMzQixrQkFBa0JxRSx3QkFBd0Jsb0IsRUFBYXFjLEVBQVN4NkIsUUFDOUVvRCxNQUFLLFdBQ0pzSCxFQUFNMHNELHFCQUF1QjcxQyxNQUdyQzQxQyxFQUFvQjkyRCxVQUFVK2xDLHlCQUEyQixTQUFVck0sS0FHbkVvOUIsRUFBb0I5MkQsVUFBVXFtQyxZQUFjLFNBQVV4SSxFQUFLbCtCLEdBQ3ZELElBQUk4eEQsRUFBTSxJQUFJSCxHQUFhM3hELEVBQUssR0FDNUJ3eUQsRUFBV3h4RCxLQUFLbzJELHFCQUFxQjErQixrQkFBa0JvNUIsR0FDM0QsT0FBT3YyQixHQUFtQnY0QixRQUFRaEQsRUFBSXNyQixRQUFRa25DLEdBQVlBLEVBQVN4eUQsT0FFdkVtM0QsRUFBb0I5MkQsVUFBVWltQyx3QkFBMEIsU0FBVXBJLEdBSTlELE9BSGtDLElBQTlCbDlCLEtBQUs4dUQsY0FBY3p1RCxRQUNuQndGLEVBQU83RixLQUFLbzJELHFCQUFxQnBtRCxVQUFXLCtFQUV6Q3VxQixHQUFtQnY0QixXQVU5Qm0wRCxFQUFvQjkyRCxVQUFVaTNELHVCQUF5QixTQUFVdjlCLEVBQVNoRSxHQUN0RSxJQUFJNVksRUFBUW5jLEtBQUswMkQsZUFBZTM5QixHQUVoQyxPQURBbHpCLEVBQU9zVyxHQUFTLEdBQUtBLEVBQVFuYyxLQUFLOHVELGNBQWN6dUQsT0FBUSw0QkFBOEIwMEIsR0FDL0U1WSxHQVdYZzZDLEVBQW9COTJELFVBQVVxM0QsZUFBaUIsU0FBVTM5QixHQUNyRCxPQUFrQyxJQUE5Qi80QixLQUFLOHVELGNBQWN6dUQsT0FFWixFQU9KMDRCLEVBRFkvNEIsS0FBSzh1RCxjQUFjLEdBQUcvMUIsU0FPN0NvOUIsRUFBb0I5MkQsVUFBVWszRCxrQkFBb0IsU0FBVXg5QixHQUN4RCxJQUFJNWMsRUFBUW5jLEtBQUswMkQsZUFBZTM5QixHQUNoQyxHQUFJNWMsRUFBUSxHQUFLQSxHQUFTbmMsS0FBSzh1RCxjQUFjenVELE9BQ3pDLE9BQU8sS0FFWCxJQUFJNjVCLEVBQVFsNkIsS0FBSzh1RCxjQUFjM3lDLEdBRS9CLE9BREF0VyxFQUFPcTBCLEVBQU1uQixVQUFZQSxFQUFTLDZCQUMzQm1CLEdBRUppOEIsRUEzTzZCLEdBaVF4QyxJQXF5QklZLEdBcnlCQUMsR0FBMkMsV0FLM0MsU0FBU0EsRUFBMEJqMkIsRUFBY2syQixHQUM3Q2ozRCxLQUFLK2dDLGFBQWVBLEVBQ3BCL2dDLEtBQUtpM0QsTUFBUUEsRUFFYmozRCxLQUFLcXZELEtBWEYsSUFBSWo3QixHQUFVaEYsR0FBWWhDLFlBYTdCcHRCLEtBQUsydEIsS0FBTyxFQWtIaEIsT0ExR0FxcEMsRUFBMEIzM0QsVUFBVXd5QyxTQUFXLFNBQVUxMEIsRUFBYW92QixFQUFLd0YsR0FDdkVsc0MsR0FBUWtzQyxFQUFTem5CLFFBQVFzSixHQUFnQkssS0FBTSxrREFDL0MsSUFBSWoxQixFQUFNdXRDLEVBQUl2dEMsSUFDVnk3QyxFQUFRejZDLEtBQUtxdkQsS0FBSy93RCxJQUFJVSxHQUN0QnEyQyxFQUFlb0YsRUFBUUEsRUFBTTlzQixLQUFPLEVBQ3BDdXBDLEVBQWNsM0QsS0FBS2kzRCxNQUFNMXFCLEdBTzdCLE9BTkF2c0MsS0FBS3F2RCxLQUFPcnZELEtBQUtxdkQsS0FBS3J1QyxPQUFPaGlCLEVBQUssQ0FDOUI4eUMsY0FBZXZGLEVBQ2Y1ZSxLQUFNdXBDLEVBQ05ubEIsU0FBVUEsSUFFZC94QyxLQUFLMnRCLE1BQVF1cEMsRUFBYzdoQixFQUNwQnIxQyxLQUFLK2dDLGFBQWFtQywyQkFBMkIvbEIsRUFBYW5lLEVBQUl5dkIsS0FBS2IsWUFROUVvcEMsRUFBMEIzM0QsVUFBVTR5QyxZQUFjLFNBQVVqTyxHQUN4RCxJQUFJeVcsRUFBUXo2QyxLQUFLcXZELEtBQUsvd0QsSUFBSTBsQyxHQUN0QnlXLElBQ0F6NkMsS0FBS3F2RCxLQUFPcnZELEtBQUtxdkQsS0FBSy90QyxPQUFPMGlCLEdBQzdCaGtDLEtBQUsydEIsTUFBUThzQixFQUFNOXNCLE9BRzNCcXBDLEVBQTBCMzNELFVBQVU2eUMsU0FBVyxTQUFVLzBCLEVBQWE2bUIsR0FDbEUsSUFBSXlXLEVBQVF6NkMsS0FBS3F2RCxLQUFLL3dELElBQUkwbEMsR0FDMUIsT0FBT3pKLEdBQW1CdjRCLFFBQVF5NEMsRUFBUUEsRUFBTTNJLGNBQWdCLE9BRXBFa2xCLEVBQTBCMzNELFVBQVVnekMsV0FBYSxTQUFVbDFCLEVBQWFvbkIsR0FDcEUsSUFBSTc2QixFQUFRMUosS0FDUnFwQixFQUFVK08sS0FLZCxPQUpBbU0sRUFBYS95QixTQUFRLFNBQVV3eUIsR0FDM0IsSUFBSXlXLEVBQVEvd0MsRUFBTTJsRCxLQUFLL3dELElBQUkwbEMsR0FDM0IzYSxFQUFVQSxFQUFRckksT0FBT2dqQixFQUFheVcsRUFBUUEsRUFBTTNJLGNBQWdCLFNBRWpFdlgsR0FBbUJ2NEIsUUFBUXFuQixJQUV0QzJ0QyxFQUEwQjMzRCxVQUFVczBDLDBCQUE0QixTQUFVeDJCLEVBQWFlLEVBQU8wMUIsR0FDMUYvdEMsR0FBUXFZLEVBQU0ybUIseUJBQTBCLG1FQU14QyxJQUxBLElBQUl4YixFQUFVaVAsS0FHVnMrQixFQUFTLElBQUl4bkMsR0FBWWxSLEVBQU11USxLQUFLcEIsTUFBTSxLQUMxQ2pxQixFQUFXcEQsS0FBS3F2RCxLQUFLajZCLGdCQUFnQndoQyxHQUNsQ3h6RCxFQUFTdXlCLFdBQVcsQ0FDdkIsSUFBSTFxQixFQUFLN0gsRUFBU3N5QixVQUFXMTJCLEVBQU1pTSxFQUFHak0sSUFBS2tNLEVBQUtELEVBQUd2TSxNQUFPb3pDLEVBQWdCNW1DLEVBQUc0bUMsY0FBZUMsRUFBVzdtQyxFQUFHNm1DLFNBQzFHLElBQUs3ekIsRUFBTXVRLEtBQUtWLFdBQVcvdUIsRUFBSXl2QixNQUMzQixNQUVBc2pCLEVBQVMzbEIsVUFBVXduQixJQUFrQixHQUdyQzlCLGFBQXlCL0csSUFBWTdzQixFQUFNbXpCLFFBQVFTLEtBQ25Eem9CLEVBQVVBLEVBQVFySSxPQUFPOHdCLEVBQWM5eUMsSUFBSzh5QyxJQUdwRCxPQUFPdlgsR0FBbUJ2NEIsUUFBUXFuQixJQUV0QzJ0QyxFQUEwQjMzRCxVQUFVODNELG1CQUFxQixTQUFVaDZDLEVBQWF4YSxHQUM1RSxPQUFPNDNCLEdBQW1CL29CLFFBQVF4UixLQUFLcXZELE1BQU0sU0FBVXJ3RCxHQUFPLE9BQU8yRCxFQUFFM0QsT0FFM0VnNEQsRUFBMEIzM0QsVUFBVWcxQyxzQkFBd0IsU0FBVWwzQixFQUFheTJCLEdBQy9FLE1BQU0sSUFBSTN0QyxNQUFNLG9FQUVwQit3RCxFQUEwQjMzRCxVQUFVdzFDLGdCQUFrQixTQUFVdmdDLEdBRzVELE9BQU8sSUFBSTBpRCxFQUEwQnZsQiwyQkFBMkJ6eEMsT0FFcEVnM0QsRUFBMEIzM0QsVUFBVTAxQyxRQUFVLFNBQVU3WCxHQUNwRCxPQUFPM0MsR0FBbUJ2NEIsUUFBUWhDLEtBQUsydEIsT0FLM0NxcEMsRUFBMEJ2bEIsMkJBQTRDLFNBQVV0bkMsR0FFNUUsU0FBUytxQyxFQUFRQyxHQUNiLElBQUl6ckMsRUFBUVMsRUFBT3ZNLEtBQUtvQyxPQUFTQSxLQUVqQyxPQURBMEosRUFBTXlyQyxjQUFnQkEsRUFDZnpyQyxFQXFCWCxPQXpCQWxFLEVBQU0xRixVQUFVbzFDLEVBQVMvcUMsR0FNekIrcUMsRUFBUTcxQyxVQUFVa3pDLGFBQWUsU0FBVXAxQixHQUN2QyxJQUFJelQsRUFBUTFKLEtBQ1IyN0IsRUFBVyxHQVNmLE9BUkEzN0IsS0FBSzB4QyxRQUFRbGdDLFNBQVEsU0FBVXhTLEVBQUt1dEMsR0FDNUJBLEVBQ0E1USxFQUFTbDRCLEtBQUtpRyxFQUFNeXJDLGNBQWN0RCxTQUFTMTBCLEVBQWFvdkIsRUFBSzdpQyxFQUFNcW9DLFdBR25Fcm9DLEVBQU15ckMsY0FBY2xELFlBQVlqekMsTUFHakN1N0IsR0FBbUJXLFFBQVFTLElBRXRDdVosRUFBUTcxQyxVQUFVK3lDLGFBQWUsU0FBVWoxQixFQUFhNm1CLEdBQ3BELE9BQU9oa0MsS0FBS20xQyxjQUFjakQsU0FBUy8wQixFQUFhNm1CLElBRXBEa1IsRUFBUTcxQyxVQUFVaXpDLGdCQUFrQixTQUFVbjFCLEVBQWFvbkIsR0FDdkQsT0FBT3ZrQyxLQUFLbTFDLGNBQWM5QyxXQUFXbDFCLEVBQWFvbkIsSUFFL0MyUSxFQTFCMEQsQ0EyQm5FekQsSUFDS3VsQixFQTdIbUMsR0FnSjFDSSxHQUFtQyxXQUNuQyxTQUFTQSxFQUFrQmhWLEdBQ3ZCcGlELEtBQUtvaUQsWUFBY0EsRUFJbkJwaUQsS0FBS3EzRCxRQUFVLElBQUlubUIsSUFBVSxTQUFVdnlDLEdBQUssT0FBT0EsRUFBRWtxQyxpQkFFckQ3b0MsS0FBS3NuQywwQkFBNEIxVCxHQUFnQkssSUFFakRqMEIsS0FBS21uQyxnQkFBa0IsRUFFdkJubkMsS0FBS3MzRCxzQkFBd0IsRUFLN0J0M0QsS0FBS3VnQixXQUFhLElBQUlrd0MsR0FDdEJ6d0QsS0FBSzhuQyxZQUFjLEVBQ25COW5DLEtBQUtnbkMsa0JBQW9CWCxHQUFrQk0saUJBa0gvQyxPQWhIQXl3QixFQUFrQi8zRCxVQUFVa3BDLGNBQWdCLFNBQVVyTCxFQUFLdjZCLEdBRXZELE9BREEzQyxLQUFLcTNELFFBQVE3bEQsU0FBUSxTQUFVMU8sRUFBRzhrQyxHQUFjLE9BQU9qbEMsRUFBRWlsQyxNQUNsRHJOLEdBQW1CdjRCLFdBRTlCbzFELEVBQWtCLzNELFVBQVVnb0MsNkJBQStCLFNBQVVscUIsR0FDakUsT0FBT29kLEdBQW1CdjRCLFFBQVFoQyxLQUFLc25DLDRCQUUzQzh2QixFQUFrQi8zRCxVQUFVa29DLHlCQUEyQixTQUFVcHFCLEdBQzdELE9BQU9vZCxHQUFtQnY0QixRQUFRaEMsS0FBS3MzRCx3QkFFM0NGLEVBQWtCLzNELFVBQVU0bkMsaUJBQW1CLFNBQVU5cEIsR0FDckQsSUFBSW82QyxFQUFldjNELEtBQUtnbkMsa0JBQWtCTixNQUFNMW1DLEtBQUttbkMsaUJBRXJELE9BREFubkMsS0FBS21uQyxnQkFBa0Jvd0IsRUFDaEJoOUIsR0FBbUJ2NEIsUUFBUXUxRCxJQUV0Q0gsRUFBa0IvM0QsVUFBVW9vQyxtQkFBcUIsU0FBVXRxQixFQUFhdXFCLEVBQTZCSixHQU9qRyxPQU5JQSxJQUNBdG5DLEtBQUtzbkMsMEJBQTRCQSxHQUVqQ0ksRUFBOEIxbkMsS0FBS3MzRCx3QkFDbkN0M0QsS0FBS3MzRCxzQkFBd0I1dkIsR0FFMUJuTixHQUFtQnY0QixXQUU5Qm8xRCxFQUFrQi8zRCxVQUFVd29DLGVBQWlCLFNBQVVELEdBQ25ENW5DLEtBQUtxM0QsUUFBUW5qRCxJQUFJMHpCLEVBQVc5bUMsT0FBUThtQyxHQUNwQyxJQUFJM1AsRUFBVzJQLEVBQVczUCxTQUN0QkEsRUFBV2o0QixLQUFLbW5DLGtCQUNoQm5uQyxLQUFLbW5DLGdCQUFrQmxQLEdBRXZCMlAsRUFBV25iLGVBQWlCenNCLEtBQUtzM0Qsd0JBQ2pDdDNELEtBQUtzM0Qsc0JBQXdCMXZCLEVBQVduYixpQkFHaEQycUMsRUFBa0IvM0QsVUFBVXNvQyxjQUFnQixTQUFVeHFCLEVBQWF5cUIsR0FJL0QsT0FIQS9oQyxHQUFRN0YsS0FBS3EzRCxRQUFRcmpELElBQUk0ekIsRUFBVzltQyxRQUFTLHVDQUM3Q2QsS0FBSzZuQyxlQUFlRCxHQUNwQjVuQyxLQUFLOG5DLGFBQWUsRUFDYnZOLEdBQW1CdjRCLFdBRTlCbzFELEVBQWtCLzNELFVBQVUyb0MsaUJBQW1CLFNBQVU3cUIsRUFBYXlxQixHQUdsRSxPQUZBL2hDLEVBQU83RixLQUFLcTNELFFBQVFyakQsSUFBSTR6QixFQUFXOW1DLFFBQVMsa0NBQzVDZCxLQUFLNm5DLGVBQWVELEdBQ2JyTixHQUFtQnY0QixXQUU5Qm8xRCxFQUFrQi8zRCxVQUFVNG9DLGlCQUFtQixTQUFVOXFCLEVBQWF5cUIsR0FNbEUsT0FMQS9oQyxFQUFPN0YsS0FBSzhuQyxZQUFjLEVBQUcseUNBQzdCamlDLEVBQU83RixLQUFLcTNELFFBQVFyakQsSUFBSTR6QixFQUFXOW1DLFFBQVMsaURBQzVDZCxLQUFLcTNELFFBQVFuaUQsT0FBTzB5QixFQUFXOW1DLFFBQy9CZCxLQUFLdWdCLFdBQVcyd0Msc0JBQXNCdHBCLEVBQVczUCxVQUNqRGo0QixLQUFLOG5DLGFBQWUsRUFDYnZOLEdBQW1CdjRCLFdBRTlCbzFELEVBQWtCLzNELFVBQVUrb0MsY0FBZ0IsU0FBVWpyQixFQUFheW1CLEVBQVl5RSxHQUMzRSxJQUFJMytCLEVBQVExSixLQUNSbWUsRUFBUSxFQUNScTVDLEVBQVcsR0FTZixPQVJBeDNELEtBQUtxM0QsUUFBUTdsRCxTQUFRLFNBQVV4UyxFQUFLNG9DLEdBQzVCQSxFQUFXbmIsZ0JBQWtCbVgsR0FDZ0IsT0FBN0N5RSxFQUFnQi9wQyxJQUFJc3BDLEVBQVczUCxZQUMvQnZ1QixFQUFNMnRELFFBQVFuaUQsT0FBT2xXLEdBQ3JCdzRELEVBQVMvekQsS0FBS2lHLEVBQU13K0IsOEJBQThCL3FCLEVBQWF5cUIsRUFBVzNQLFdBQzFFOVosUUFHRG9jLEdBQW1CVyxRQUFRczhCLEdBQVVwMUQsTUFBSyxXQUFjLE9BQU8rYixNQUUxRWk1QyxFQUFrQi8zRCxVQUFVc3BDLGVBQWlCLFNBQVV4ckIsR0FDbkQsT0FBT29kLEdBQW1CdjRCLFFBQVFoQyxLQUFLOG5DLGNBRTNDc3ZCLEVBQWtCLzNELFVBQVV1cEMsY0FBZ0IsU0FBVXpyQixFQUFhcmMsR0FDL0QsSUFBSThtQyxFQUFhNW5DLEtBQUtxM0QsUUFBUS80RCxJQUFJd0MsSUFBVyxLQUM3QyxPQUFPeTVCLEdBQW1CdjRCLFFBQVE0bEMsSUFFdEN3dkIsRUFBa0IvM0QsVUFBVW9xQyx1QkFBeUIsU0FBVXRzQixFQUFhOGEsR0FHeEUsT0FBT3BULEVBQUsseUJBRWhCdXlDLEVBQWtCLzNELFVBQVU0cEMsZ0JBQWtCLFNBQVUvTCxFQUFLL3hCLEVBQU04c0IsR0FDL0RqNEIsS0FBS3VnQixXQUFXd3dDLGNBQWM1bEQsRUFBTThzQixHQUNwQyxJQUFJK0ksRUFBb0JoaEMsS0FBS29pRCxZQUFZcGhCLGtCQUNyQ3JGLEVBQVcsR0FNZixPQUxJcUYsR0FDQTcxQixFQUFLcUcsU0FBUSxTQUFVeFMsR0FDbkIyOEIsRUFBU2w0QixLQUFLdTlCLEVBQWtCb0ksYUFBYWxNLEVBQUtsK0IsT0FHbkR1N0IsR0FBbUJXLFFBQVFTLElBRXRDeTdCLEVBQWtCLzNELFVBQVVncUMsbUJBQXFCLFNBQVVuTSxFQUFLL3hCLEVBQU04c0IsR0FDbEVqNEIsS0FBS3VnQixXQUFXMHdDLGlCQUFpQjlsRCxFQUFNOHNCLEdBQ3ZDLElBQUkrSSxFQUFvQmhoQyxLQUFLb2lELFlBQVlwaEIsa0JBQ3JDckYsRUFBVyxHQU1mLE9BTElxRixHQUNBNzFCLEVBQUtxRyxTQUFRLFNBQVV4UyxHQUNuQjI4QixFQUFTbDRCLEtBQUt1OUIsRUFBa0JzSSxnQkFBZ0JwTSxFQUFLbCtCLE9BR3REdTdCLEdBQW1CVyxRQUFRUyxJQUV0Q3k3QixFQUFrQi8zRCxVQUFVNm9DLDhCQUFnQyxTQUFVaEwsRUFBS2pGLEdBRXZFLE9BREFqNEIsS0FBS3VnQixXQUFXMndDLHNCQUFzQmo1QixHQUMvQnNDLEdBQW1CdjRCLFdBRTlCbzFELEVBQWtCLzNELFVBQVVrcUMsMkJBQTZCLFNBQVVyTSxFQUFLakYsR0FDcEUsSUFBSXcvQixFQUFlejNELEtBQUt1Z0IsV0FBV2d4QyxnQkFBZ0J0NUIsR0FDbkQsT0FBT3NDLEdBQW1CdjRCLFFBQVF5MUQsSUFFdENMLEVBQWtCLzNELFVBQVVxbUMsWUFBYyxTQUFVeEksRUFBS2wrQixHQUNyRCxPQUFPdTdCLEdBQW1CdjRCLFFBQVFoQyxLQUFLdWdCLFdBQVdtbEIsWUFBWTFtQyxLQUUzRG80RCxFQXJJMkIsR0E2SmxDTSxHQUFtQyxXQU9uQyxTQUFTQSxFQUFrQjlkLEVBQVUrZCxHQUNqQyxJQUFJanVELEVBQVExSixLQUNaQSxLQUFLNDVDLFNBQVdBLEVBQ2hCNTVDLEtBQUs0M0QsZUFBaUIsR0FDdEI1M0QsS0FBSzJpRCxlQUFpQixJQUFJdDJCLEdBQWUsR0FDekNyc0IsS0FBS3FoRCxVQUFXLEVBQ2hCcmhELEtBQUtxaEQsVUFBVyxFQUNoQnJoRCxLQUFLZ2hDLGtCQUFvQjIyQixFQUF5QjMzRCxNQUNsREEsS0FBSytoRCxZQUFjLElBQUlxVixHQUFrQnAzRCxNQUl6Q0EsS0FBSytnQyxhQUFlLElBQUk0VSxHQUN4QjMxQyxLQUFLZ2lELG9CQUFzQixJQUFJZ1YsR0FBMEJoM0QsS0FBSytnQyxjQUpsRCxTQUFVd0wsR0FDbEIsT0FBTzdpQyxFQUFNczNCLGtCQUFrQjYyQixhQUFhdHJCLE1Bb0ZwRCxPQS9FQW1yQixFQUFrQkkscUJBQXVCLFNBQVVsZSxFQUFVOVksRUFBWXh2QixHQUlyRSxPQUFPLElBQUlvbUQsRUFBa0I5ZCxHQUhmLFNBQVVyNkMsR0FDcEIsT0FBTyxJQUFJdzRELEdBQWtCeDRELEVBQUcsSUFBSXk3QyxHQUFnQmxhLEdBQWF4dkIsT0FJekVvbUQsRUFBa0JNLHVCQUF5QixTQUFVcGUsR0FJakQsT0FBTyxJQUFJOGQsRUFBa0I5ZCxHQUhmLFNBQVVyNkMsR0FDcEIsT0FBTyxJQUFJMDRELEdBQW9CMTRELE9BSXZDbTRELEVBQWtCcjRELFVBQVUwbEQsU0FBVyxXQUduQyxPQURBL2tELEtBQUtxaEQsVUFBVyxFQUNUdC9DLFFBQVFDLFdBRW5CN0QsT0FBT0MsZUFBZXM1RCxFQUFrQnI0RCxVQUFXLFVBQVcsQ0FDMURmLElBQUssV0FDRCxPQUFPMEIsS0FBS3FoRCxVQUVoQmhqRCxZQUFZLEVBQ1prWixjQUFjLElBRWxCbWdELEVBQWtCcjRELFVBQVVpbUQsaUJBQW1CLFdBQzNDLE9BQU85L0MsRUFBTTlELFVBQVUxQixVQUFNLE9BQVEsR0FBUSxXQUN6QyxPQUFPd0YsRUFBTS9DLFlBQVl6QyxNQUFNLFNBQVVpTCxHQUNyQyxNQUFPLENBQUMsRUFBYyxDQUFDakwsS0FBSzQ1QyxrQkFJeEM4ZCxFQUFrQnI0RCxVQUFVdWpELHdCQUEwQixTQUFVakIsR0FFNUQsT0FBT0EsR0FBcUIsSUFFaEMrVixFQUFrQnI0RCxVQUFVeWpELDJCQUE2QixhQUd6RDRVLEVBQWtCcjRELFVBQVU0akQsa0JBQW9CLFNBQVVuSixLQUcxRDRkLEVBQWtCcjRELFVBQVV1bUQsZ0JBQWtCLFdBQzFDLE9BQU81bEQsS0FBSytnQyxjQUVoQjIyQixFQUFrQnI0RCxVQUFVb21ELGlCQUFtQixTQUFVdGtCLEdBQ3JELElBQUlrWCxFQUFRcjRDLEtBQUs0M0QsZUFBZXoyQixFQUFLKzJCLFNBS3JDLE9BSks3ZixJQUNEQSxFQUFRLElBQUk4ZCxHQUFvQm4yRCxLQUFLK2dDLGFBQWMvZ0MsS0FBS2doQyxtQkFDeERoaEMsS0FBSzQzRCxlQUFlejJCLEVBQUsrMkIsU0FBVzdmLEdBRWpDQSxHQUVYcWYsRUFBa0JyNEQsVUFBVXFtRCxlQUFpQixXQUN6QyxPQUFPMWxELEtBQUsraEQsYUFFaEIyVixFQUFrQnI0RCxVQUFVc21ELHVCQUF5QixXQUNqRCxPQUFPM2xELEtBQUtnaUQscUJBRWhCMFYsRUFBa0JyNEQsVUFBVW0rQixlQUFpQixTQUFVekksRUFBUW4yQixFQUFNaW5ELEdBQ2pFLElBQUluOEMsRUFBUTFKLEtBQ1oyWCxFQXZGUSxvQkF1RlMsd0JBQXlCb2QsR0FDMUMsSUFBSW1JLEVBQU0sSUFBSWk3QixHQUFrQm40RCxLQUFLMmlELGVBQWV2Z0QsUUFFcEQsT0FEQXBDLEtBQUtnaEMsa0JBQWtCbzNCLHVCQUNoQnZTLEVBQXFCM29CLEdBQ3ZCOTZCLE1BQUssU0FBVUUsR0FDaEIsT0FBT29ILEVBQU1zM0Isa0JBQ1JxM0IsdUJBQXVCbjdCLEdBQ3ZCOTZCLE1BQUssV0FBYyxPQUFPRSxRQUU5QjA0QixZQUNBeDRCLE1BQUssU0FBVUYsR0FFaEIsT0FEQTQ2QixFQUFJNmpCLHdCQUNHeitDLE1BR2ZvMUQsRUFBa0JyNEQsVUFBVW1vRCx5QkFBMkIsU0FBVXJxQyxFQUFhbmUsR0FDMUUsT0FBT3U3QixHQUFtQmMsSUF4eldsQmx0QixFQXd6VzRCbk8sS0FBSzQzRCxlQXZ6V3pDVSxFQUFLLEdBQ1Q5bUQsRUFBUXJELEdBQUssU0FBVXJMLEVBQUdPLEdBQUssT0FBT2kxRCxFQUFHNzBELEtBQUtKLE1BQ3ZDaTFELEdBc3pXRXJuRCxLQUFJLFNBQVVvbkMsR0FBUyxPQUFPLFdBQWMsT0FBT0EsRUFBTTNTLFlBQVl2b0IsRUFBYW5lLFFBenpXL0YsSUFBZ0JtUCxFQUNSbXFELEdBMHpXR1osRUFyRzJCLEdBMkdsQ1MsR0FBbUMsU0FBVWh1RCxHQUU3QyxTQUFTZ3VELEVBQWtCNWYsR0FDdkIsSUFBSTd1QyxFQUFRUyxFQUFPdk0sS0FBS29DLE9BQVNBLEtBRWpDLE9BREEwSixFQUFNNnVDLHNCQUF3QkEsRUFDdkI3dUMsRUFFWCxPQU5BbEUsRUFBTTFGLFVBQVVxNEQsRUFBbUJodUQsR0FNNUJndUQsRUFQMkIsQ0FRcEN2WCxJQUNFcVgsR0FBcUMsV0FDckMsU0FBU0EsRUFBb0I3VixHQUN6QnBpRCxLQUFLb2lELFlBQWNBLEVBQ25CcGlELEtBQUtnbkQsYUFBZSxLQUNwQmhuRCxLQUFLdTRELG1CQUFxQixLQWlGOUIsT0EvRUFwNkQsT0FBT0MsZUFBZTY1RCxFQUFvQjU0RCxVQUFXLG9CQUFxQixDQUN0RWYsSUFBSyxXQUNELEdBQUswQixLQUFLdTRELG1CQUlOLE9BQU92NEQsS0FBS3U0RCxtQkFIWixNQUFNMXpDLEVBQUssMERBTW5CeG1CLFlBQVksRUFDWmtaLGNBQWMsSUFFbEIwZ0QsRUFBb0I1NEQsVUFBVWlvRCxnQkFBa0IsU0FBVU4sR0FDdERobkQsS0FBS2duRCxhQUFlQSxHQUV4QmlSLEVBQW9CNTRELFVBQVUrcEMsYUFBZSxTQUFVbE0sRUFBS2wrQixHQUV4RCxPQURBZ0IsS0FBS3c0RCxrQkFBa0J0akQsT0FBT2xXLEdBQ3ZCdTdCLEdBQW1CdjRCLFdBRTlCaTJELEVBQW9CNTRELFVBQVVpcUMsZ0JBQWtCLFNBQVVwTSxFQUFLbCtCLEdBRTNELE9BREFnQixLQUFLdzRELGtCQUFrQnZoQyxJQUFJajRCLEdBQ3BCdTdCLEdBQW1CdjRCLFdBRTlCaTJELEVBQW9CNTRELFVBQVVnbUMsd0JBQTBCLFNBQVVuSSxFQUFLbCtCLEdBRW5FLE9BREFnQixLQUFLdzRELGtCQUFrQnZoQyxJQUFJajRCLEdBQ3BCdTdCLEdBQW1CdjRCLFdBRTlCaTJELEVBQW9CNTRELFVBQVVzb0QsYUFBZSxTQUFVenFCLEVBQUswSyxHQUN4RCxJQUFJbCtCLEVBQVExSixLQUNSODRDLEVBQVE5NEMsS0FBS29pRCxZQUFZc0QsaUJBQzdCLE9BQU81TSxFQUNGdlAsMkJBQTJCck0sRUFBSzBLLEVBQVczUCxVQUMzQzcxQixNQUFLLFNBQVUrSSxHQUNoQkEsRUFBS3FHLFNBQVEsU0FBVXhTLEdBQU8sT0FBTzBLLEVBQU04dUQsa0JBQWtCdmhDLElBQUlqNEIsU0FFaEVvRCxNQUFLLFdBQWMsT0FBTzAyQyxFQUFNN1EsaUJBQWlCL0ssRUFBSzBLLE9BRS9EcXdCLEVBQW9CNTRELFVBQVUrNEQscUJBQXVCLFdBQ2pEcDRELEtBQUt1NEQsbUJBQXFCLElBQUlodEIsS0FFbEMwc0IsRUFBb0I1NEQsVUFBVWc1RCx1QkFBeUIsU0FBVW43QixHQUM3RCxJQUFJeHpCLEVBQVExSixLQUdSeW5ELEVBRFF6bkQsS0FBS29pRCxZQUFZdUQseUJBQ0o5USxrQkFDekIsT0FBT3RhLEdBQW1CL29CLFFBQVF4UixLQUFLdzRELG1CQUFtQixTQUFVeDVELEdBQ2hFLE9BQU8wSyxFQUFNK3VELGFBQWF2N0IsRUFBS2wrQixHQUFLb0QsTUFBSyxTQUFVcTJELEdBQzFDQSxHQUNEaFIsRUFBYXhWLFlBQVlqekMsU0FHbENvRCxNQUFLLFdBRUosT0FEQXNILEVBQU02dUQsbUJBQXFCLEtBQ3BCOVEsRUFBYW5uRCxNQUFNNDhCLE9BR2xDKzZCLEVBQW9CNTRELFVBQVV1b0Qsb0JBQXNCLFNBQVUxcUIsRUFBS2wrQixHQUMvRCxJQUFJMEssRUFBUTFKLEtBQ1osT0FBT0EsS0FBS3k0RCxhQUFhdjdCLEVBQUtsK0IsR0FBS29ELE1BQUssU0FBVXEyRCxHQUMxQ0EsRUFDQS91RCxFQUFNOHVELGtCQUFrQnRqRCxPQUFPbFcsR0FHL0IwSyxFQUFNOHVELGtCQUFrQnZoQyxJQUFJajRCLE9BSXhDaTVELEVBQW9CNTRELFVBQVV3NEQsYUFBZSxTQUFVdHJCLEdBRW5ELE9BQU8sR0FFWDByQixFQUFvQjU0RCxVQUFVbzVELGFBQWUsU0FBVXY3QixFQUFLbCtCLEdBQ3hELElBQUkwSyxFQUFRMUosS0FDWixPQUFPdTZCLEdBQW1CYyxHQUFHLENBQ3pCLFdBQWMsT0FBTzN4QixFQUFNMDRDLFlBQVlzRCxpQkFBaUJoZ0IsWUFBWXhJLEVBQUtsK0IsSUFDekUsV0FBYyxPQUFPMEssRUFBTTA0QyxZQUFZb0YseUJBQXlCdHFCLEVBQUtsK0IsSUFDckUsV0FBYyxPQUFPdTdCLEdBQW1CdjRCLFFBQVEwSCxFQUFNczlDLGFBQWF0aEIsWUFBWTFtQyxRQUdoRmk1RCxFQXJGNkIsR0F1RnBDRixHQUFtQyxXQUNuQyxTQUFTQSxFQUFrQjNWLEVBQWF0aEIsRUFBWXNnQixHQUNoRHBoRCxLQUFLb2lELFlBQWNBLEVBQ25CcGlELEtBQUs4Z0MsV0FBYUEsRUFDbEI5Z0MsS0FBS2duRCxhQUFlLEtBQ3BCaG5ELEtBQUswNEQsd0JBQTBCLElBQUl4bkIsSUFBVSxTQUFVL3NDLEdBQUssT0FBT3l1QixHQUFPenVCLEVBQUVzcUIsU0FDNUV6dUIsS0FBSzYrQyxpQkFBbUIsSUFBSVUsR0FBb0J2L0MsS0FBTW9oRCxHQW9IMUQsT0FoSEEyVyxFQUFrQjE0RCxVQUFVKzRELHFCQUF1QixhQUNuREwsRUFBa0IxNEQsVUFBVWc1RCx1QkFBeUIsU0FBVW43QixHQUMzRCxPQUFPM0MsR0FBbUJ2NEIsV0FFOUIrMUQsRUFBa0IxNEQsVUFBVWtwQyxjQUFnQixTQUFVckwsRUFBS3Y2QixHQUN2RCxPQUFPM0MsS0FBS29pRCxZQUFZc0QsaUJBQWlCbmQsY0FBY3JMLEVBQUt2NkIsSUFFaEVvMUQsRUFBa0IxNEQsVUFBVXNnRCx1QkFBeUIsU0FBVXppQixHQUMzRCxJQUFJK3BCLEVBQWtCam5ELEtBQUsyNEQsc0JBQXNCejdCLEdBSWpELE9BSHlCbDlCLEtBQUtvaUQsWUFDekJzRCxpQkFDQS9jLGVBQWV6TCxHQUNNOTZCLE1BQUssU0FBVTBsQyxHQUNyQyxPQUFPbWYsRUFBZ0I3a0QsTUFBSyxTQUFVK2tELEdBQVksT0FBT3JmLEVBQWNxZixTQUcvRTRRLEVBQWtCMTRELFVBQVVzNUQsc0JBQXdCLFNBQVV6N0IsR0FDMUQsSUFBSWtxQixFQUFnQixFQUNwQixPQUFPcG5ELEtBQUs2L0Msc0NBQXNDM2lCLEdBQUssU0FBVXA2QixHQUM3RHNrRCxPQUNEaGxELE1BQUssV0FBYyxPQUFPZ2xELE1BRWpDMlEsRUFBa0IxNEQsVUFBVXdnRCxzQ0FBd0MsU0FBVTNpQixFQUFLdjZCLEdBQy9FLElBQUkrRyxFQUFRMUosS0FDWixPQUFPdTZCLEdBQW1CL29CLFFBQVF4UixLQUFLMDRELHlCQUF5QixTQUFVMTVELEVBQUt5dEIsR0FHM0UsT0FBTy9pQixFQUFNNjlDLFNBQVNycUIsRUFBS2wrQixFQUFLeXRCLEdBQWdCcnFCLE1BQUssU0FBVW1sRCxHQUMzRCxPQUFLQSxFQUlNaHRCLEdBQW1CdjRCLFVBSG5CVyxFQUFFOHBCLFVBUXpCc3JDLEVBQWtCMTRELFVBQVVpb0QsZ0JBQWtCLFNBQVVOLEdBQ3BEaG5ELEtBQUtnbkQsYUFBZUEsR0FFeEIrUSxFQUFrQjE0RCxVQUFVK29DLGNBQWdCLFNBQVVsTCxFQUFLMEcsRUFBWXlFLEdBQ25FLE9BQU9yb0MsS0FBS29pRCxZQUNQc0QsaUJBQ0F0ZCxjQUFjbEwsRUFBSzBHLEVBQVl5RSxJQUV4QzB2QixFQUFrQjE0RCxVQUFVMGdELHdCQUEwQixTQUFVN2lCLEVBQUswRyxHQUNqRSxJQUFJbDZCLEVBQVExSixLQUNSbWUsRUFBUSxFQUNSMjZCLEVBQVE5NEMsS0FBS29pRCxZQUFZdUQseUJBQ3pCOEIsRUFBZTNPLEVBQU1qRSxrQkFTekIsT0FSUWlFLEVBQU1xZSxtQkFBbUJqNkIsR0FBSyxTQUFVbCtCLEdBQzVDLE9BQU8wSyxFQUFNNjlDLFNBQVNycUIsRUFBS2wrQixFQUFLNGtDLEdBQVl4aEMsTUFBSyxTQUFVbWxELEdBQ2xEQSxJQUNEcHBDLElBQ0FzcEMsRUFBYXhWLFlBQVlqekMsVUFJNUJvRCxNQUFLLFdBQWMsT0FBT3FsRCxFQUFhbm5ELE1BQU00OEIsTUFBUzk2QixNQUFLLFdBQWMsT0FBTytiLE1BRTdGNDVDLEVBQWtCMTRELFVBQVVnbUMsd0JBQTBCLFNBQVVuSSxFQUFLbCtCLEdBRWpFLE9BREFnQixLQUFLMDRELHdCQUF3QnhrRCxJQUFJbFYsRUFBS2srQixFQUFJcWIsdUJBQ25DaGUsR0FBbUJ2NEIsV0FFOUIrMUQsRUFBa0IxNEQsVUFBVXNvRCxhQUFlLFNBQVV6cUIsRUFBSzBLLEdBQ3RELElBQUljLEVBQVVkLEVBQVdpVCxtQkFBbUIzZCxFQUFJcWIsdUJBQ2hELE9BQU92NEMsS0FBS29pRCxZQUFZc0QsaUJBQWlCMWQsaUJBQWlCOUssRUFBS3dMLElBRW5FcXZCLEVBQWtCMTRELFVBQVUrcEMsYUFBZSxTQUFVbE0sRUFBS2wrQixHQUV0RCxPQURBZ0IsS0FBSzA0RCx3QkFBd0J4a0QsSUFBSWxWLEVBQUtrK0IsRUFBSXFiLHVCQUNuQ2hlLEdBQW1CdjRCLFdBRTlCKzFELEVBQWtCMTRELFVBQVVpcUMsZ0JBQWtCLFNBQVVwTSxFQUFLbCtCLEdBRXpELE9BREFnQixLQUFLMDRELHdCQUF3QnhrRCxJQUFJbFYsRUFBS2srQixFQUFJcWIsdUJBQ25DaGUsR0FBbUJ2NEIsV0FFOUIrMUQsRUFBa0IxNEQsVUFBVXVvRCxvQkFBc0IsU0FBVTFxQixFQUFLbCtCLEdBRTdELE9BREFnQixLQUFLMDRELHdCQUF3QnhrRCxJQUFJbFYsRUFBS2srQixFQUFJcWIsdUJBQ25DaGUsR0FBbUJ2NEIsV0FFOUIrMUQsRUFBa0IxNEQsVUFBVXc0RCxhQUFlLFNBQVV4K0IsR0FDakQsSUFDSTM2QixFQURBazZELEVBQWlCNTRELEtBQUs4Z0MsV0FBV3dVLG1CQUFtQmpjLEVBQVVBLEVBQVMvaUIsU0FFM0UsR0FBSXNpRCxFQUFleDVDLFNBQ2YxZ0IsRUFBUWs2RCxFQUFleDVDLGNBRXRCLEdBQUl3NUMsRUFBZW5qQixnQkFDcEIvMkMsRUFBUWs2RCxFQUFlbmpCLG9CQUV0QixLQUFJbWpCLEVBQWVsakIsV0FJcEIsTUFBTTd3QixFQUFLLGdDQUhYbm1CLEVBQVFrNkQsRUFBZWxqQixXQUszQixPQUFPaHFDLEtBQUtzRyxVQUFVdFQsR0FBTzJCLFFBRWpDMDNELEVBQWtCMTRELFVBQVVrb0QsU0FBVyxTQUFVcnFCLEVBQUtsK0IsRUFBSzRrQyxHQUN2RCxJQUFJbDZCLEVBQVExSixLQUNaLE9BQU91NkIsR0FBbUJjLEdBQUcsQ0FDekIsV0FBYyxPQUFPM3hCLEVBQU0wNEMsWUFBWW9GLHlCQUF5QnRxQixFQUFLbCtCLElBQ3JFLFdBQWMsT0FBT3U3QixHQUFtQnY0QixRQUFRMEgsRUFBTXM5QyxhQUFhdGhCLFlBQVkxbUMsS0FDL0UsV0FBYyxPQUFPMEssRUFBTTA0QyxZQUFZc0QsaUJBQWlCaGdCLFlBQVl4SSxFQUFLbCtCLElBQ3pFLFdBQ0ksSUFBSTY1RCxFQUFhbnZELEVBQU1ndkQsd0JBQXdCcDZELElBQUlVLEdBQ25ELE9BQU91N0IsR0FBbUJ2NEIsYUFBdUJ1SCxJQUFmc3ZELEdBQTRCQSxFQUFhajFCLE9BSXZGbTBCLEVBQWtCMTRELFVBQVU0Z0QsYUFBZSxTQUFVL2lCLEdBQ2pELE9BQU9sOUIsS0FBS29pRCxZQUFZdUQseUJBQXlCNVEsUUFBUTdYLElBRXRENjZCLEVBMUgyQixHQWtKbENlLEdBQW1DLElBQ25DQyxHQUF5QixJQUV6QkMsR0FBK0IsSUFVL0JDLEdBQW9DLFdBQ3BDLFNBQVNBLEVBSVQ1Z0IsRUFJQXRvQixFQU1BbXBDLEVBS0FDLEVBTUFDLFFBQzJCLElBQW5CRixJQUE2QkEsRUFBaUJKLFNBQzVCLElBQWxCSyxJQUE0QkEsRUFBZ0JKLFNBQzdCLElBQWZLLElBQXlCQSxFQUFhSixJQUMxQ2g1RCxLQUFLcTRDLE1BQVFBLEVBQ2JyNEMsS0FBSyt2QixRQUFVQSxFQUNmL3ZCLEtBQUtrNUQsZUFBaUJBLEVBQ3RCbDVELEtBQUttNUQsY0FBZ0JBLEVBQ3JCbjVELEtBQUtvNUQsV0FBYUEsRUFDbEJwNUQsS0FBS3E1RCxjQUFnQixFQUNyQnI1RCxLQUFLczVELGFBQWUsS0FFcEJ0NUQsS0FBS3U1RCxnQkFBa0Jsd0QsS0FBS3NILE1BQzVCM1EsS0FBSzJNLFFBaUVULE9BeERBc3NELEVBQW1CNTVELFVBQVVzTixNQUFRLFdBQ2pDM00sS0FBS3E1RCxjQUFnQixHQU16QkosRUFBbUI1NUQsVUFBVW02RCxXQUFhLFdBQ3RDeDVELEtBQUtxNUQsY0FBZ0JyNUQsS0FBS281RCxZQU85QkgsRUFBbUI1NUQsVUFBVW82RCxjQUFnQixTQUFVbjJELEdBQ25ELElBQUlvRyxFQUFRMUosS0FFWkEsS0FBSzB3QixTQUdMLElBQUlncEMsRUFBMkI5b0QsS0FBS0MsTUFBTTdRLEtBQUtxNUQsY0FBZ0JyNUQsS0FBSzI1RCxpQkFFaEVDLEVBQWVocEQsS0FBS2tjLElBQUksRUFBR3pqQixLQUFLc0gsTUFBUTNRLEtBQUt1NUQsaUJBRTdDTSxFQUFtQmpwRCxLQUFLa2MsSUFBSSxFQUFHNHNDLEVBQTJCRSxHQUMxRDU1RCxLQUFLcTVELGNBQWdCLEdBQ3JCMWhELEVBN0ZJLHFCQTZGYSxtQkFBcUJraUQsRUFBbUIsb0JBQ2xDNzVELEtBQUtxNUQsY0FBZ0IsMkJBQ2ZLLEVBQTJCLHNCQUNoQ0UsRUFBZSxZQUUzQzU1RCxLQUFLczVELGFBQWV0NUQsS0FBS3E0QyxNQUFNeG1CLGtCQUFrQjd4QixLQUFLK3ZCLFFBQVM4cEMsR0FBa0IsV0FFN0UsT0FEQW53RCxFQUFNNnZELGdCQUFrQmx3RCxLQUFLc0gsTUFDdEJyTixPQUlYdEQsS0FBS3E1RCxlQUFpQnI1RCxLQUFLbTVELGNBQ3ZCbjVELEtBQUtxNUQsY0FBZ0JyNUQsS0FBS2s1RCxpQkFDMUJsNUQsS0FBS3E1RCxjQUFnQnI1RCxLQUFLazVELGdCQUUxQmw1RCxLQUFLcTVELGNBQWdCcjVELEtBQUtvNUQsYUFDMUJwNUQsS0FBS3E1RCxjQUFnQnI1RCxLQUFLbzVELGFBR2xDSCxFQUFtQjU1RCxVQUFVcXhCLE9BQVMsV0FDUixPQUF0QjF3QixLQUFLczVELGVBQ0x0NUQsS0FBS3M1RCxhQUFhNW9DLFNBQ2xCMXdCLEtBQUtzNUQsYUFBZSxPQUk1QkwsRUFBbUI1NUQsVUFBVXM2RCxjQUFnQixXQUN6QyxPQUFRL29ELEtBQUtxWixTQUFXLElBQU9qcUIsS0FBS3E1RCxlQUVqQ0osRUF4RzRCOzs7Ozs7Ozs7Ozs7Ozs7O0lBK0l2QyxTQUFXbEMsR0FNUEEsRUFBc0JBLEVBQStCLFFBQUksR0FBSyxVQU05REEsRUFBc0JBLEVBQWdDLFNBQUksR0FBSyxXQUsvREEsRUFBc0JBLEVBQTRCLEtBQUksR0FBSyxPQUszREEsRUFBc0JBLEVBQTZCLE1BQUksR0FBSyxRQU81REEsRUFBc0JBLEVBQStCLFFBQUksR0FBSyxVQTdCbEUsQ0E4QkdBLEtBQTBCQSxHQUF3QixLQUVyRCxJQXN4QkkrQyxHQXVCQUMsR0E1d0JBQyxHQUFrQyxXQUNsQyxTQUFTQSxFQUFpQjNoQixFQUFPNGhCLEVBQW1CQyxFQUFhQyxFQUFZQyxFQUFxQnRaLEdBQzlGOWdELEtBQUtxNEMsTUFBUUEsRUFDYnI0QyxLQUFLazZELFlBQWNBLEVBQ25CbDZELEtBQUttNkQsV0FBYUEsRUFDbEJuNkQsS0FBS282RCxvQkFBc0JBLEVBQzNCcDZELEtBQUs4Z0QsU0FBV0EsRUFDaEI5Z0QsS0FBS3E2RCxNQUFRdEQsR0FBc0J1RCxRQU1uQ3Q2RCxLQUFLdTZELFdBQWEsRUFDbEJ2NkQsS0FBS3c2RCxVQUFZLEtBQ2pCeDZELEtBQUt5NkQsT0FBUyxLQUNkejZELEtBQUswNkQsUUFBVSxJQUFJekIsR0FBbUI1Z0IsRUFBTzRoQixHQStRakQsT0F0UUFELEVBQWlCMzZELFVBQVVzN0QsVUFBWSxXQUNuQyxPQUFRMzZELEtBQUtxNkQsUUFBVXRELEdBQXNCNkQsVUFDekM1NkQsS0FBS3E2RCxRQUFVdEQsR0FBc0I4RCxNQUNyQzc2RCxLQUFLcTZELFFBQVV0RCxHQUFzQitELFNBTTdDZCxFQUFpQjM2RCxVQUFVMDdELE9BQVMsV0FDaEMsT0FBTy82RCxLQUFLcTZELFFBQVV0RCxHQUFzQjhELE1BU2hEYixFQUFpQjM2RCxVQUFVZ3hCLE1BQVEsV0FDM0Jyd0IsS0FBS3E2RCxRQUFVdEQsR0FBc0I5d0QsT0FJekNKLEVBQU83RixLQUFLcTZELFFBQVV0RCxHQUFzQnVELFFBQVMsbUJBQ3JEdDZELEtBQUtnN0QsUUFKRGg3RCxLQUFLaTdELGtCQVliakIsRUFBaUIzNkQsVUFBVTYvQyxLQUFPLFdBQzlCLE9BQU8xNUMsRUFBTTlELFVBQVUxQixVQUFNLE9BQVEsR0FBUSxXQUN6QyxPQUFPd0YsRUFBTS9DLFlBQVl6QyxNQUFNLFNBQVVpTCxHQUNyQyxPQUFRQSxFQUFHbEksT0FDUCxLQUFLLEVBQ0QsT0FBSy9DLEtBQUsyNkQsWUFDSCxDQUFDLEVBQWEzNkQsS0FBSytOLE1BQU1ncEQsR0FBc0J1RCxVQUR4QixDQUFDLEVBQWEsR0FFaEQsS0FBSyxFQUNEcnZELEVBQUdqSSxPQUNIaUksRUFBR2xJLE1BQVEsRUFDZixLQUFLLEVBQUcsTUFBTyxDQUFDLFdBYWhDaTNELEVBQWlCMzZELFVBQVU2N0QsZUFBaUIsV0FDeENyMUQsR0FBUTdGLEtBQUsyNkQsWUFBYSwrQ0FDMUIzNkQsS0FBS3E2RCxNQUFRdEQsR0FBc0J1RCxRQUNuQ3Q2RCxLQUFLMDZELFFBQVEvdEQsU0FZakJxdEQsRUFBaUIzNkQsVUFBVTg3RCxTQUFXLFdBQ2xDLElBQUl6eEQsRUFBUTFKLEtBR1JBLEtBQUsrNkQsVUFBK0IsT0FBbkIvNkQsS0FBS3c2RCxZQUN0Qng2RCxLQUFLdzZELFVBQVl4NkQsS0FBS3E0QyxNQUFNeG1CLGtCQUFrQjd4QixLQUFLazZELFlBdEl6QyxLQXNJdUUsV0FBYyxPQUFPeHdELEVBQU0weEQsNEJBSXBIcEIsRUFBaUIzNkQsVUFBVWc4RCxZQUFjLFNBQVU5MkMsR0FDL0N2a0IsS0FBS3M3RCxrQkFDTHQ3RCxLQUFLeTZELE9BQU9jLEtBQUtoM0MsSUFHckJ5MUMsRUFBaUIzNkQsVUFBVSs3RCxxQkFBdUIsV0FDOUMsT0FBTzUxRCxFQUFNOUQsVUFBVTFCLFVBQU0sT0FBUSxHQUFRLFdBQ3pDLE9BQU93RixFQUFNL0MsWUFBWXpDLE1BQU0sU0FBVWlMLEdBQ3JDLE9BQUlqTCxLQUFLKzZELFNBR0UsQ0FBQyxFQUFjLzZELEtBQUsrTixNQUFNZ3BELEdBQXNCdUQsVUFFcEQsQ0FBQyxVQUtwQk4sRUFBaUIzNkQsVUFBVWk4RCxnQkFBa0IsV0FDckN0N0QsS0FBS3c2RCxZQUNMeDZELEtBQUt3NkQsVUFBVTlwQyxTQUNmMXdCLEtBQUt3NkQsVUFBWSxPQWdCekJSLEVBQWlCMzZELFVBQVUwTyxNQUFRLFNBQVV5dEQsRUFBWTdwQyxHQUNyRCxPQUFPbnNCLEVBQU05RCxVQUFVMUIsVUFBTSxPQUFRLEdBQVEsV0FDekMsT0FBT3dGLEVBQU0vQyxZQUFZekMsTUFBTSxTQUFVaUwsR0FDckMsT0FBUUEsRUFBR2xJLE9BQ1AsS0FBSyxFQWtDRCxPQWpDQThDLEVBQU83RixLQUFLMjZELFlBQWEsMENBQ3pCOTBELEVBQU8yMUQsSUFBZXpFLEdBQXNCOXdELE9BQVNvaUQsR0FBa0IxMkIsR0FBVSxzREFFakYzeEIsS0FBS3M3RCxrQkFDTHQ3RCxLQUFLMDZELFFBQVFocUMsU0FHYjF3QixLQUFLdTZELGFBQ0RpQixJQUFlekUsR0FBc0I5d0QsTUFFckNqRyxLQUFLMDZELFFBQVEvdEQsUUFFUmdsQixHQUFXQSxFQUFRdm5CLE9BQVM2YSxFQUFLVSxvQkFFdEM3aEIsRUFBTTZ0QixFQUFRbm1CLFlBQ2QxSCxFQUFNLG1FQUNOOUQsS0FBSzA2RCxRQUFRbEIsY0FFUjduQyxHQUFXQSxFQUFRdm5CLE9BQVM2YSxFQUFLUyxpQkFHdEMxbEIsS0FBS282RCxvQkFBb0JxQixrQkFHVCxPQUFoQno3RCxLQUFLeTZELFNBQ0x6NkQsS0FBSzA3RCxXQUNMMTdELEtBQUt5NkQsT0FBTzFzRCxRQUNaL04sS0FBS3k2RCxPQUFTLE1BSWxCejZELEtBQUtxNkQsTUFBUW1CLEVBRU4sQ0FBQyxFQUFheDdELEtBQUs4Z0QsU0FBUzZhLFFBQVFocUMsSUFDL0MsS0FBSyxFQUdELE9BREExbUIsRUFBR2pJLE9BQ0ksQ0FBQyxXQVM1QmczRCxFQUFpQjM2RCxVQUFVcThELFNBQVcsYUFDdEMxQixFQUFpQjM2RCxVQUFVMjdELEtBQU8sV0FDOUIsSUFBSXR4RCxFQUFRMUosS0FDWjZGLEVBQU83RixLQUFLcTZELFFBQVV0RCxHQUFzQnVELFFBQVMsb0NBQ3JEdDZELEtBQUtxNkQsTUFBUXRELEdBQXNCNkQsU0FDbkMsSUFBSWdCLEVBQXNCNTdELEtBQUs2N0QsMEJBQTBCNzdELEtBQUt1NkQsWUFFMURBLEVBQWF2NkQsS0FBS3U2RCxXQUN0QnY2RCxLQUFLbzZELG9CQUFvQjBCLFdBQVd0NUQsTUFBSyxTQUFVcUosR0FLM0NuQyxFQUFNNndELGFBQWVBLEdBSXJCN3dELEVBQU1xeUQsWUFBWWx3RCxNQUV2QixTQUFVL0gsR0FDVDgzRCxHQUFvQixXQUNoQixJQUFJSSxFQUFXLElBQUk5MUMsRUFBZWpCLEVBQUtHLFFBQVMsK0JBQWlDdGhCLEVBQU1pQyxTQUN2RixPQUFPMkQsRUFBTXV5RCxrQkFBa0JELFVBSTNDaEMsRUFBaUIzNkQsVUFBVTA4RCxZQUFjLFNBQVVsd0QsR0FDL0MsSUFBSW5DLEVBQVExSixLQUNaNkYsRUFBTzdGLEtBQUtxNkQsUUFBVXRELEdBQXNCNkQsU0FBVSxrREFDdEQsSUFBSWdCLEVBQXNCNTdELEtBQUs2N0QsMEJBQTBCNzdELEtBQUt1NkQsWUFDOUR2NkQsS0FBS3k2RCxPQUFTejZELEtBQUtrOEQsU0FBU3J3RCxHQUM1QjdMLEtBQUt5NkQsT0FBTzBCLFFBQU8sV0FDZlAsR0FBb0IsV0FHaEIsT0FGQS8xRCxFQUFPNkQsRUFBTTJ3RCxRQUFVdEQsR0FBc0I2RCxTQUFVLG9EQUFzRGx4RCxFQUFNMndELE9BQ25IM3dELEVBQU0yd0QsTUFBUXRELEdBQXNCOEQsS0FDN0JueEQsRUFBTW8zQyxTQUFTcWIsZUFHOUJuOEQsS0FBS3k2RCxPQUFPa0IsU0FBUSxTQUFVNzNELEdBQzFCODNELEdBQW9CLFdBQ2hCLE9BQU9seUQsRUFBTXV5RCxrQkFBa0JuNEQsU0FHdkM5RCxLQUFLeTZELE9BQU8yQixXQUFVLFNBQVU3M0MsR0FDNUJxM0MsR0FBb0IsV0FDaEIsT0FBT2x5RCxFQUFNMHlELFVBQVU3M0MsVUFJbkN5MUMsRUFBaUIzNkQsVUFBVTQ3RCxlQUFpQixXQUN4QyxJQUFJdnhELEVBQVExSixLQUNaNkYsRUFBTzdGLEtBQUtxNkQsUUFBVXRELEdBQXNCOXdELE1BQU8sbURBQ25EakcsS0FBS3E2RCxNQUFRdEQsR0FBc0IrRCxRQUNuQzk2RCxLQUFLMDZELFFBQVFqQixlQUFjLFdBQWMsT0FBT2owRCxFQUFNOUQsVUFBVWdJLE9BQU8sT0FBUSxHQUFRLFdBQ25GLE9BQU9sRSxFQUFNL0MsWUFBWXpDLE1BQU0sU0FBVWlMLEdBS3JDLE9BSkFwRixFQUFPN0YsS0FBS3E2RCxRQUFVdEQsR0FBc0IrRCxRQUFTLHFDQUF1Qzk2RCxLQUFLcTZELE9BQ2pHcjZELEtBQUtxNkQsTUFBUXRELEdBQXNCdUQsUUFDbkN0NkQsS0FBS3F3QixRQUNMeHFCLEVBQU83RixLQUFLMjZELFlBQWEsd0NBQ2xCLENBQUMsYUFLcEJYLEVBQWlCMzZELFVBQVU0OEQsa0JBQW9CLFNBQVVuNEQsR0FRckQsT0FQQStCLEVBQU83RixLQUFLMjZELFlBQWEsbURBQ3pCaGpELEVBeFZRLG1CQXdWUyxxQkFBdUI3VCxHQUN4QzlELEtBQUt5NkQsT0FBUyxLQUtQejZELEtBQUsrTixNQUFNZ3BELEdBQXNCOXdELE1BQU9uQyxJQVFuRGsyRCxFQUFpQjM2RCxVQUFVdzhELDBCQUE0QixTQUFVUSxHQUM3RCxJQUFJM3lELEVBQVExSixLQUNaLE9BQU8sU0FBVTRPLEdBQ2JsRixFQUFNMnVDLE1BQU14bkIsa0JBQWlCLFdBQ3pCLE9BQUlubkIsRUFBTTZ3RCxhQUFlOEIsRUFDZHp0RCxLQUdQK0ksRUE5V0osbUJBOFdxQix5REFDVjVWLFFBQVFDLGdCQUt4Qmc0RCxFQS9SMEIsR0F3U2pDc0MsR0FBd0MsU0FBVW55RCxHQUVsRCxTQUFTbXlELEVBQXVCamtCLEVBQU84aEIsRUFBWW9DLEVBQWF6N0IsRUFBWWdnQixHQUN4RSxJQUFJcDNDLEVBQVFTLEVBQU92TSxLQUFLb0MsS0FBTXE0QyxFQUFPenRCLEdBQVE0eEMsOEJBQStCNXhDLEdBQVE2eEMsaUJBQWtCdEMsRUFBWW9DLEVBQWF6YixJQUFhOWdELEtBRTVJLE9BREEwSixFQUFNbzNCLFdBQWFBLEVBQ1pwM0IsRUFzQ1gsT0ExQ0FsRSxFQUFNMUYsVUFBVXc4RCxFQUF3Qm55RCxHQU14Q215RCxFQUF1Qmo5RCxVQUFVNjhELFNBQVcsU0FBVXJ3RCxHQUNsRCxPQUFPN0wsS0FBS202RCxXQUFXdUMsV0FBVyxTQUFVN3dELElBRWhEeXdELEVBQXVCajlELFVBQVUrOEQsVUFBWSxTQUFVTyxHQUVuRDM4RCxLQUFLMDZELFFBQVEvdEQsUUFDYixJQUFJaXdELEVBQWM1OEQsS0FBSzhnQyxXQUFXKzdCLGdCQUFnQkYsR0FDOUNHLEVBQVc5OEQsS0FBSzhnQyxXQUFXaThCLDBCQUEwQkosR0FDekQsT0FBTzM4RCxLQUFLOGdELFNBQVNrYyxjQUFjSixFQUFhRSxJQVFwRFIsRUFBdUJqOUQsVUFBVTQ5RCxNQUFRLFNBQVVyMUIsR0FDL0MsSUFBSXhzQixFQUFVLEdBQ2RBLEVBQVErUSxTQUFXbnNCLEtBQUs4Z0MsV0FBV284QixrQkFDbkM5aEQsRUFBUStoRCxVQUFZbjlELEtBQUs4Z0MsV0FBV2txQixTQUFTcGpCLEdBQzdDLElBQUl3MUIsRUFBU3A5RCxLQUFLOGdDLFdBQVd1OEIsc0JBQXNCejFCLEdBQy9DdzFCLElBQ0FoaUQsRUFBUWdpRCxPQUFTQSxHQUVyQnA5RCxLQUFLcTdELFlBQVlqZ0QsSUFNckJraEQsRUFBdUJqOUQsVUFBVWkrRCxRQUFVLFNBQVVybEMsR0FDakQsSUFBSTdjLEVBQVUsR0FDZEEsRUFBUStRLFNBQVduc0IsS0FBSzhnQyxXQUFXbzhCLGtCQUNuQzloRCxFQUFRdXNDLGFBQWUxdkIsRUFDdkJqNEIsS0FBS3E3RCxZQUFZamdELElBRWRraEQsRUEzQ2dDLENBNEN6Q3RDLElBa0JFdUQsR0FBdUMsU0FBVXB6RCxHQUVqRCxTQUFTb3pELEVBQXNCbGxCLEVBQU84aEIsRUFBWW9DLEVBQWF6N0IsRUFBWWdnQixHQUN2RSxJQUFJcDNDLEVBQVFTLEVBQU92TSxLQUFLb0MsS0FBTXE0QyxFQUFPenRCLEdBQVE0eUMsNkJBQThCNXlDLEdBQVE2eUMsZ0JBQWlCdEQsRUFBWW9DLEVBQWF6YixJQUFhOWdELEtBWTFJLE9BWEEwSixFQUFNbzNCLFdBQWFBLEVBQ25CcDNCLEVBQU1nMEQsb0JBQXFCLEVBUzNCaDBELEVBQU11NEIsZ0JBQWtCamQsSUFDakJ0YixFQTBFWCxPQXhGQWxFLEVBQU0xRixVQUFVeTlELEVBQXVCcHpELEdBZ0J2Q2hNLE9BQU9DLGVBQWVtL0QsRUFBc0JsK0QsVUFBVyxvQkFBcUIsQ0FLeEVmLElBQUssV0FDRCxPQUFPMEIsS0FBSzA5RCxvQkFFaEJyL0QsWUFBWSxFQUNaa1osY0FBYyxJQUdsQmdtRCxFQUFzQmwrRCxVQUFVZ3hCLE1BQVEsV0FDcENyd0IsS0FBSzA5RCxvQkFBcUIsRUFDMUJ2ekQsRUFBTzlLLFVBQVVneEIsTUFBTXp5QixLQUFLb0MsT0FFaEN1OUQsRUFBc0JsK0QsVUFBVXE4RCxTQUFXLFdBQ25DMTdELEtBQUswOUQsb0JBQ0wxOUQsS0FBSzI5RCxlQUFlLEtBRzVCSixFQUFzQmwrRCxVQUFVNjhELFNBQVcsU0FBVXJ3RCxHQUNqRCxPQUFPN0wsS0FBS202RCxXQUFXdUMsV0FBVyxRQUFTN3dELElBRS9DMHhELEVBQXNCbCtELFVBQVUrOEQsVUFBWSxTQUFVd0IsR0FJbEQsR0FGQS8zRCxJQUFTKzNELEVBQWN4akMsWUFBYSwrQ0FDcENwNkIsS0FBS2lpQyxnQkFBa0IyN0IsRUFBY3hqQyxZQUNoQ3A2QixLQUFLMDlELG1CQU1MLENBSUQxOUQsS0FBSzA2RCxRQUFRL3RELFFBQ2IsSUFBSTBjLEVBQVVycEIsS0FBSzhnQyxXQUFXKzhCLGlCQUFpQkQsRUFBY0UsYUFBY0YsRUFBY0csWUFDckY1akMsRUFBZ0JuNkIsS0FBSzhnQyxXQUFXc1YsWUFBWXduQixFQUFjRyxZQUM5RCxPQUFPLzlELEtBQUs4Z0QsU0FBU2tkLGlCQUFpQjdqQyxFQUFlOVEsR0FUckQsT0FGQXhqQixHQUFRKzNELEVBQWNFLGNBQXNELElBQXRDRixFQUFjRSxhQUFhejlELE9BQWMsc0NBQy9FTCxLQUFLMDlELG9CQUFxQixFQUNuQjE5RCxLQUFLOGdELFNBQVNtZCx1QkFpQjdCVixFQUFzQmwrRCxVQUFVNitELGVBQWlCLFdBQzdDcjRELEVBQU83RixLQUFLKzZELFNBQVUsK0NBQ3RCbDFELEdBQVE3RixLQUFLMDlELG1CQUFvQiwrQkFHakMsSUFBSXRpRCxFQUFVLEdBQ2RBLEVBQVErUSxTQUFXbnNCLEtBQUs4Z0MsV0FBV284QixrQkFDbkNsOUQsS0FBS3E3RCxZQUFZamdELElBR3JCbWlELEVBQXNCbCtELFVBQVVzK0QsZUFBaUIsU0FBVXprQyxHQUN2RCxJQUFJeHZCLEVBQVExSixLQUNaNkYsRUFBTzdGLEtBQUsrNkQsU0FBVSwrQ0FDdEJsMUQsRUFBTzdGLEtBQUswOUQsbUJBQW9CLHVEQUNoQzczRCxFQUFPN0YsS0FBS2lpQyxnQkFBZ0I1aEMsT0FBUyxFQUFHLDRDQUN4QyxJQUFJK2EsRUFBVSxDQUdWZ2YsWUFBYXA2QixLQUFLaWlDLGdCQUNsQms4QixPQUFRamxDLEVBQVVqb0IsS0FBSSxTQUFVdW9CLEdBQVksT0FBTzl2QixFQUFNbzNCLFdBQVcrYSxXQUFXcmlCLE9BRW5GeDVCLEtBQUtxN0QsWUFBWWpnRCxJQUVkbWlELEVBekYrQixDQTBGeEN2RCxJQXVCRW9FLEdBQTJCLFdBQzNCLFNBQVNBLEVBQVUvbEIsRUFBTzhoQixFQUFZb0MsRUFBYXo3QixHQUMvQzlnQyxLQUFLcTRDLE1BQVFBLEVBQ2JyNEMsS0FBS202RCxXQUFhQSxFQUNsQm42RCxLQUFLdThELFlBQWNBLEVBQ25CdjhELEtBQUs4Z0MsV0FBYUEsRUFxRXRCLE9BbkVBczlCLEVBQVUvK0QsVUFBVWcvRCx5QkFBMkIsU0FBVXZkLEdBQ3JELE9BQU8sSUFBSXljLEdBQXNCdjlELEtBQUtxNEMsTUFBT3I0QyxLQUFLbTZELFdBQVluNkQsS0FBS3U4RCxZQUFhdjhELEtBQUs4Z0MsV0FBWWdnQixJQUVyR3NkLEVBQVUvK0QsVUFBVWkvRCx5QkFBMkIsU0FBVXhkLEdBQ3JELE9BQU8sSUFBSXdiLEdBQXVCdDhELEtBQUtxNEMsTUFBT3I0QyxLQUFLbTZELFdBQVluNkQsS0FBS3U4RCxZQUFhdjhELEtBQUs4Z0MsV0FBWWdnQixJQUV0R3NkLEVBQVUvK0QsVUFBVWsvRCxPQUFTLFNBQVVybEMsR0FDbkMsSUFBSXh2QixFQUFRMUosS0FDUnNSLEVBQVMsQ0FDVDZhLFNBQVVuc0IsS0FBSzhnQyxXQUFXbzhCLGtCQUMxQmlCLE9BQVFqbEMsRUFBVWpvQixLQUFJLFNBQVVwVCxHQUFLLE9BQU82TCxFQUFNbzNCLFdBQVcrYSxXQUFXaCtDLE9BRTVFLE9BQU9tQyxLQUFLdytELFVBQVUsU0FBVWx0RCxHQUFROU8sTUFBSyxTQUFVaThELEdBQ25ELE9BQU8vMEQsRUFBTW8zQixXQUFXKzhCLGlCQUFpQlksRUFBU1gsYUFBY1csRUFBU1YsZ0JBR2pGSyxFQUFVLytELFVBQVVxL0QsT0FBUyxTQUFVdnpELEdBQ25DLElBQUl6QixFQUFRMUosS0FDUnNSLEVBQVMsQ0FDVDZhLFNBQVVuc0IsS0FBSzhnQyxXQUFXbzhCLGtCQUMxQjVnQixVQUFXbnhDLEVBQUs4RixLQUFJLFNBQVU5TSxHQUFLLE9BQU91RixFQUFNbzNCLFdBQVc2OUIsT0FBT3g2RCxPQUV0RSxPQUFPbkUsS0FBSzQrRCxtQkFBbUIsb0JBQXFCdHRELEdBQVE5TyxNQUFLLFNBQVVpOEQsR0FDdkUsSUFBSXBQLEVBQU9sM0IsS0FDWHNtQyxFQUFTanRELFNBQVEsU0FBVTgrQixHQUN2QixJQUFJL0QsRUFBTTdpQyxFQUFNbzNCLFdBQVcrOUIsa0JBQWtCdnVCLEdBQzdDK2UsRUFBT0EsRUFBS3J1QyxPQUFPdXJCLEVBQUl2dEMsSUFBS3V0QyxNQUVoQyxJQUFJanFDLEVBQVMsR0FNYixPQUxBNkksRUFBS3FHLFNBQVEsU0FBVXhTLEdBQ25CLElBQUl1dEMsRUFBTThpQixFQUFLL3dELElBQUlVLEdBQ25CNkcsSUFBUzBtQyxFQUFLLHdDQUEwQ3Z0QyxHQUN4RHNELEVBQU9tQixLQUFLOG9DLE1BRVRqcUMsTUFJZjg3RCxFQUFVLytELFVBQVVtL0QsVUFBWSxTQUFVTSxFQUFTMWpELEdBQy9DLElBQUkxUixFQUFRMUosS0FDWixPQUFPQSxLQUFLdThELFlBQ1BULFdBQ0F0NUQsTUFBSyxTQUFVcUosR0FDaEIsT0FBT25DLEVBQU15d0QsV0FBV3FFLFVBQVVNLEVBQVMxakQsRUFBU3ZQLE1BRW5EL0IsT0FBTSxTQUFVaEcsR0FJakIsTUFISUEsRUFBTXNHLE9BQVM2YSxFQUFLUyxpQkFDcEJoYyxFQUFNNnlELFlBQVlkLGtCQUVoQjMzRCxNQUlkczZELEVBQVUvK0QsVUFBVXUvRCxtQkFBcUIsU0FBVUUsRUFBUzFqRCxHQUN4RCxJQUFJMVIsRUFBUTFKLEtBQ1osT0FBT0EsS0FBS3U4RCxZQUNQVCxXQUNBdDVELE1BQUssU0FBVXFKLEdBQ2hCLE9BQU9uQyxFQUFNeXdELFdBQVd5RSxtQkFBbUJFLEVBQVMxakQsRUFBU3ZQLE1BRTVEL0IsT0FBTSxTQUFVaEcsR0FJakIsTUFISUEsRUFBTXNHLE9BQVM2YSxFQUFLUyxpQkFDcEJoYyxFQUFNNnlELFlBQVlkLGtCQUVoQjMzRCxNQUdQczZELEVBMUVtQixHQWlHMUJ6aEQsR0FBNkIsV0FDN0IsU0FBU0EsRUFBWW9pRCxHQUNqQi8rRCxLQUFLKytELFVBQVlBLEVBRWpCLytELEtBQUtnL0QsYUFBZXhtQyxLQUNwQng0QixLQUFLazVCLFVBQVksR0FDakJsNUIsS0FBS2kvRCxXQUFZLEVBS2pCai9ELEtBQUtrL0QsZUFBaUIsS0FPdEJsL0QsS0FBS20vRCxZQUFjLElBQUk1ekIsSUFpSjNCLE9BL0lBNXVCLEVBQVl0ZCxVQUFVcS9ELE9BQVMsU0FBVXZ6RCxHQUNyQyxPQUFPM0YsRUFBTTlELFVBQVUxQixVQUFNLE9BQVEsR0FBUSxXQUN6QyxJQUFJcXZELEVBQ0EzbEQsRUFBUTFKLEtBQ1osT0FBT3dGLEVBQU0vQyxZQUFZekMsTUFBTSxTQUFVaUwsR0FDckMsT0FBUUEsRUFBR2xJLE9BQ1AsS0FBSyxFQUVELEdBREEvQyxLQUFLby9ELHdCQUNEcC9ELEtBQUtrNUIsVUFBVTc0QixPQUFTLEVBQ3hCLE1BQU0sSUFBSTZsQixFQUFlakIsRUFBS0ksaUJBQWtCLDhFQUVwRCxNQUFPLENBQUMsRUFBYXJsQixLQUFLKytELFVBQVVMLE9BQU92ekQsSUFDL0MsS0FBSyxFQVVELE9BVEFra0QsRUFBT3BrRCxFQUFHakksUUFDTHdPLFNBQVEsU0FBVSs2QixHQUNmQSxhQUFlWSxJQUFjWixhQUFleEIsR0FDNUNyaEMsRUFBTTIxRCxjQUFjOXlCLEdBR3BCMW5CLEVBQUssbUNBQXFDMG5CLEVBQUl0c0MsWUFBWWpDLFNBRzNELENBQUMsRUFBY3F4RCxXQUsxQzF5QyxFQUFZdGQsVUFBVTZVLElBQU0sU0FBVWxWLEVBQUswTCxHQUN2QzFLLEtBQUtzL0QsTUFBTTUwRCxFQUFLNjBELFlBQVl2Z0UsRUFBS2dCLEtBQUtzckMsYUFBYXRzQyxLQUNuRGdCLEtBQUttL0QsWUFBWWxvQyxJQUFJajRCLElBRXpCMmQsRUFBWXRkLFVBQVUyTixPQUFTLFNBQVVoTyxFQUFLMEwsR0FDMUMsSUFDSTFLLEtBQUtzL0QsTUFBTTUwRCxFQUFLNjBELFlBQVl2Z0UsRUFBS2dCLEtBQUt3L0Qsc0JBQXNCeGdFLEtBRWhFLE1BQU93QixHQUNIUixLQUFLay9ELGVBQWlCMStELEVBRTFCUixLQUFLbS9ELFlBQVlsb0MsSUFBSWo0QixJQUV6QjJkLEVBQVl0ZCxVQUFVNlYsT0FBUyxTQUFVbFcsR0FDckNnQixLQUFLcy9ELE1BQU0sQ0FBQyxJQUFJcnlCLEdBQWVqdUMsRUFBS2dCLEtBQUtzckMsYUFBYXRzQyxNQUN0RGdCLEtBQUttL0QsWUFBWWxvQyxJQUFJajRCLElBRXpCMmQsRUFBWXRkLFVBQVVrL0QsT0FBUyxXQUMzQixPQUFPLzRELEVBQU05RCxVQUFVMUIsVUFBTSxPQUFRLEdBQVEsV0FDekMsSUFBSXkvRCxFQUNKLE9BQU9qNkQsRUFBTS9DLFlBQVl6QyxNQUFNLFNBQVVpTCxHQUNyQyxPQUFRQSxFQUFHbEksT0FDUCxLQUFLLEVBRUQsR0FEQS9DLEtBQUtvL0Qsd0JBQ0RwL0QsS0FBS2svRCxlQUNMLE1BQU1sL0QsS0FBS2svRCxlQU9mLEdBTEFPLEVBQVl6L0QsS0FBS2cvRCxhQUVqQmgvRCxLQUFLazVCLFVBQVUxbkIsU0FBUSxTQUFVZ29CLEdBQzdCaW1DLEVBQVlBLEVBQVVuK0MsT0FBT2tZLEVBQVN4NkIsU0FFckN5Z0UsRUFBVXp2RCxVQUNYLE1BQU0sSUFBSWtXLEVBQWVqQixFQUFLSSxpQkFBa0IsOERBRXBELE1BQU8sQ0FBQyxFQUFhcmxCLEtBQUsrK0QsVUFBVVIsT0FBT3YrRCxLQUFLazVCLFlBQ3BELEtBQUssRUFHRCxPQUZBanVCLEVBQUdqSSxPQUNIaEQsS0FBS2kvRCxXQUFZLEVBQ1YsQ0FBQyxXQUs1QnRpRCxFQUFZdGQsVUFBVWdnRSxjQUFnQixTQUFVOXlCLEdBQzVDLElBQUltekIsRUFDSixHQUFJbnpCLGFBQWV4QixHQUNmMjBCLEVBQWFuekIsRUFBSWoyQixZQUVoQixNQUFJaTJCLGFBQWVZLElBS3BCLE1BQU10b0IsRUFBSyxtQ0FBcUMwbkIsRUFBSXRzQyxZQUFZakMsTUFIaEUwaEUsRUFBYTlyQyxHQUFnQkksZ0JBS2pDLElBQUkyckMsRUFBa0IzL0QsS0FBS2cvRCxhQUFhMWdFLElBQUlpdUMsRUFBSXZ0QyxLQUNoRCxHQUF3QixPQUFwQjJnRSxHQUNBLElBQUtELEVBQVdwMUMsUUFBUXExQyxHQUVwQixNQUFNLElBQUl6NUMsRUFBZWpCLEVBQUtZLFFBQVMsb0RBSTNDN2xCLEtBQUtnL0QsYUFBZWgvRCxLQUFLZy9ELGFBQWFoK0MsT0FBT3VyQixFQUFJdnRDLElBQUswZ0UsSUFPOUQvaUQsRUFBWXRkLFVBQVVpc0MsYUFBZSxTQUFVdHNDLEdBQzNDLElBQUlzWCxFQUFVdFcsS0FBS2cvRCxhQUFhMWdFLElBQUlVLEdBQ3BDLE9BQUtnQixLQUFLbS9ELFlBQVluckQsSUFBSWhWLElBQVFzWCxFQUN2QnEwQixHQUFhQyxXQUFXdDBCLEdBR3hCcTBCLEdBQWFNLE1BTTVCdHVCLEVBQVl0ZCxVQUFVbWdFLHNCQUF3QixTQUFVeGdFLEdBQ3BELElBQUlzWCxFQUFVdFcsS0FBS2cvRCxhQUFhMWdFLElBQUlVLEdBR3BDLElBQUtnQixLQUFLbS9ELFlBQVluckQsSUFBSWhWLElBQVFzWCxFQUFTLENBQ3ZDLEdBQUlBLEVBQVFnVSxRQUFRc0osR0FBZ0JJLGlCQVVoQyxNQUFNLElBQUk5TixFQUFlakIsRUFBS0ksaUJBQWtCLCtDQUdwRCxPQUFPc2xCLEdBQWFDLFdBQVd0MEIsR0FLL0IsT0FBT3EwQixHQUFhRSxRQUFPLElBR25DbHVCLEVBQVl0ZCxVQUFVaWdFLE1BQVEsU0FBVXBtQyxHQUNwQ2w1QixLQUFLby9ELHdCQUNMcC9ELEtBQUtrNUIsVUFBWWw1QixLQUFLazVCLFVBQVVsMUIsT0FBT2sxQixJQUUzQ3ZjLEVBQVl0ZCxVQUFVKy9ELHNCQUF3QixXQUMxQ3Y1RCxHQUFRN0YsS0FBS2kvRCxVQUFXLG9GQUVyQnRpRCxFQW5LcUIsSUE4TGhDLFNBQVdtOUMsR0FPUEEsRUFBWUEsRUFBcUIsUUFBSSxHQUFLLFVBTTFDQSxFQUFZQSxFQUFvQixPQUFJLEdBQUssU0FNekNBLEVBQVlBLEVBQXFCLFFBQUksR0FBSyxVQW5COUMsQ0FvQkdBLEtBQWdCQSxHQUFjLEtBR2pDLFNBQVdDLEdBQ1BBLEVBQWtCQSxFQUErQixZQUFJLEdBQUssY0FDMURBLEVBQWtCQSxFQUFxQyxrQkFBSSxHQUFLLG9CQUZwRSxDQUdHQSxLQUFzQkEsR0FBb0I7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBa0I3QyxJQXdLSTZGLEdBakpBQyxHQUFvQyxXQUNwQyxTQUFTQSxFQUFtQi92QyxFQUFZZ3dDLEdBQ3BDOS9ELEtBQUs4dkIsV0FBYUEsRUFDbEI5dkIsS0FBSzgvRCxtQkFBcUJBLEVBRTFCOS9ELEtBQUtxNkQsTUFBUVAsR0FBWWlHLFFBTXpCLy9ELEtBQUtnZ0Usb0JBQXNCLEVBTTNCaGdFLEtBQUtpZ0UsaUJBQW1CLEtBTXhCamdFLEtBQUtrZ0UsMkJBQTRCLEVBNkZyQyxPQXBGQUwsRUFBbUJ4Z0UsVUFBVThnRSx1QkFBeUIsV0FDbEQsSUFBSXoyRCxFQUFRMUosS0FDcUIsSUFBN0JBLEtBQUtnZ0Usc0JBQ0xoZ0UsS0FBS29nRSxnQkFBZ0J0RyxHQUFZaUcsU0FDakNsNkQsRUFBaUMsT0FBMUI3RixLQUFLaWdFLGlCQUEyQiw2Q0FDdkNqZ0UsS0FBS2lnRSxpQkFBbUJqZ0UsS0FBSzh2QixXQUFXK0Isa0JBQWtCakgsR0FBUXkxQyxtQkFqRGhELEtBaUQ2RixXQVMzRyxPQVJBMzJELEVBQU11MkQsaUJBQW1CLEtBQ3pCcDZELEVBQU82RCxFQUFNMndELFFBQVVQLEdBQVlpRyxRQUFTLHFFQUM1Q3IyRCxFQUFNNDJELG1DQUFtQyw2Q0FFekM1MkQsRUFBTTAyRCxnQkFBZ0J0RyxHQUFZeUcsU0FJM0J4K0QsUUFBUUMsZUFVM0I2OUQsRUFBbUJ4Z0UsVUFBVW1oRSx5QkFBMkIsU0FBVTE4RCxHQUMxRDlELEtBQUtxNkQsUUFBVVAsR0FBWTJHLFFBQzNCemdFLEtBQUtvZ0UsZ0JBQWdCdEcsR0FBWWlHLFNBR2pDbDZELEVBQW9DLElBQTdCN0YsS0FBS2dnRSxvQkFBMkIsaUNBQ3ZDbjZELEVBQWlDLE9BQTFCN0YsS0FBS2lnRSxpQkFBMkIsbUNBR3ZDamdFLEtBQUtnZ0Usc0JBQ0RoZ0UsS0FBS2dnRSxxQkFuRlcsSUFvRmhCaGdFLEtBQUswZ0Usd0JBQ0wxZ0UsS0FBS3NnRSxtQ0FBbUMsaURBQ0p4OEQsRUFBTTBILFlBQzFDeEwsS0FBS29nRSxnQkFBZ0J0RyxHQUFZeUcsWUFXN0NWLEVBQW1CeGdFLFVBQVU2VSxJQUFNLFNBQVV5c0QsR0FDekMzZ0UsS0FBSzBnRSx3QkFDTDFnRSxLQUFLZ2dFLG9CQUFzQixFQUN2QlcsSUFBYTdHLEdBQVkyRyxTQUd6QnpnRSxLQUFLa2dFLDJCQUE0QixHQUVyQ2xnRSxLQUFLb2dFLGdCQUFnQk8sSUFFekJkLEVBQW1CeGdFLFVBQVUrZ0UsZ0JBQWtCLFNBQVVPLEdBQ2pEQSxJQUFhM2dFLEtBQUtxNkQsUUFDbEJyNkQsS0FBS3E2RCxNQUFRc0csRUFDYjNnRSxLQUFLOC9ELG1CQUFtQmEsS0FHaENkLEVBQW1CeGdFLFVBQVVpaEUsbUNBQXFDLFNBQVVNLEdBQ3hFLElBQUk3NkQsRUFBVSw0Q0FBOEM2NkQsRUFBVSwwTUFJbEU1Z0UsS0FBS2tnRSwyQkFDTHA4RCxFQUFNaUMsR0FDTi9GLEtBQUtrZ0UsMkJBQTRCLEdBR2pDdm9ELEVBbElJLHFCQWtJYTVSLElBR3pCODVELEVBQW1CeGdFLFVBQVVxaEUsc0JBQXdCLFdBQ25CLE9BQTFCMWdFLEtBQUtpZ0UsbUJBQ0xqZ0UsS0FBS2lnRSxpQkFBaUJ2dkMsU0FDdEIxd0IsS0FBS2lnRSxpQkFBbUIsT0FHekJKLEVBcEg0QixHQTJLdkMsU0FBU2dCLEdBQWlCejJELEdBQ3RCLE9BQVFBLEdBQ0osS0FBSzZhLEVBQUtDLEdBQ04sT0FBT0wsRUFBSyw4QkFDaEIsS0FBS0ksRUFBS0UsVUFDVixLQUFLRixFQUFLRyxRQUNWLEtBQUtILEVBQUtLLGtCQUNWLEtBQUtMLEVBQUtVLG1CQUNWLEtBQUtWLEVBQUt6UCxTQUNWLEtBQUt5UCxFQUFLZSxZQUdWLEtBQUtmLEVBQUtTLGdCQUNOLE9BQU8sRUFDWCxLQUFLVCxFQUFLSSxpQkFDVixLQUFLSixFQUFLTSxVQUNWLEtBQUtOLEVBQUtPLGVBQ1YsS0FBS1AsRUFBS1Esa0JBQ1YsS0FBS1IsRUFBS1csb0JBSVYsS0FBS1gsRUFBS1ksUUFDVixLQUFLWixFQUFLYSxhQUNWLEtBQUtiLEVBQUtjLGNBQ1YsS0FBS2QsRUFBS2dCLFVBQ04sT0FBTyxFQUNYLFFBQ0ksT0FBT3BCLEVBQUssd0JBQTBCemEsSUF3Q2xELFNBQVMwMkQsR0FBbUIxMkQsR0FDeEIsUUFBYWIsSUFBVGEsRUFJQSxPQURBdEcsRUFBTSwyQkFDQ21oQixFQUFLRyxRQUVoQixPQUFRaGIsR0FDSixLQUFLdzFELEdBQVExNkMsR0FDVCxPQUFPRCxFQUFLQyxHQUNoQixLQUFLMDZDLEdBQVF6NkMsVUFDVCxPQUFPRixFQUFLRSxVQUNoQixLQUFLeTZDLEdBQVF4NkMsUUFDVCxPQUFPSCxFQUFLRyxRQUNoQixLQUFLdzZDLEdBQVF0NkMsa0JBQ1QsT0FBT0wsRUFBS0ssa0JBQ2hCLEtBQUtzNkMsR0FBUWo2QyxtQkFDVCxPQUFPVixFQUFLVSxtQkFDaEIsS0FBS2k2QyxHQUFRcHFELFNBQ1QsT0FBT3lQLEVBQUt6UCxTQUNoQixLQUFLb3FELEdBQVE1NUMsWUFDVCxPQUFPZixFQUFLZSxZQUNoQixLQUFLNDVDLEdBQVFsNkMsZ0JBQ1QsT0FBT1QsRUFBS1MsZ0JBQ2hCLEtBQUtrNkMsR0FBUXY2QyxpQkFDVCxPQUFPSixFQUFLSSxpQkFDaEIsS0FBS3U2QyxHQUFRcjZDLFVBQ1QsT0FBT04sRUFBS00sVUFDaEIsS0FBS3E2QyxHQUFRcDZDLGVBQ1QsT0FBT1AsRUFBS08sZUFDaEIsS0FBS282QyxHQUFRbjZDLGtCQUNULE9BQU9SLEVBQUtRLGtCQUNoQixLQUFLbTZDLEdBQVFoNkMsb0JBQ1QsT0FBT1gsRUFBS1csb0JBQ2hCLEtBQUtnNkMsR0FBUS81QyxRQUNULE9BQU9aLEVBQUtZLFFBQ2hCLEtBQUsrNUMsR0FBUTk1QyxhQUNULE9BQU9iLEVBQUthLGFBQ2hCLEtBQUs4NUMsR0FBUTc1QyxjQUNULE9BQU9kLEVBQUtjLGNBQ2hCLEtBQUs2NUMsR0FBUTM1QyxVQUNULE9BQU9oQixFQUFLZ0IsVUFDaEIsUUFDSSxPQUFPcEIsRUFBSyx3QkFBMEJ6YSxJQU9sRCxTQUFTMjJELEdBQW1CMzJELEdBQ3hCLFFBQWFiLElBQVRhLEVBQ0EsT0FBT3cxRCxHQUFRMTZDLEdBRW5CLE9BQVE5YSxHQUNKLEtBQUs2YSxFQUFLQyxHQUNOLE9BQU8wNkMsR0FBUTE2QyxHQUNuQixLQUFLRCxFQUFLRSxVQUNOLE9BQU95NkMsR0FBUXo2QyxVQUNuQixLQUFLRixFQUFLRyxRQUNOLE9BQU93NkMsR0FBUXg2QyxRQUNuQixLQUFLSCxFQUFLSyxrQkFDTixPQUFPczZDLEdBQVF0NkMsa0JBQ25CLEtBQUtMLEVBQUtVLG1CQUNOLE9BQU9pNkMsR0FBUWo2QyxtQkFDbkIsS0FBS1YsRUFBS3pQLFNBQ04sT0FBT29xRCxHQUFRcHFELFNBQ25CLEtBQUt5UCxFQUFLZSxZQUNOLE9BQU80NUMsR0FBUTU1QyxZQUNuQixLQUFLZixFQUFLUyxnQkFDTixPQUFPazZDLEdBQVFsNkMsZ0JBQ25CLEtBQUtULEVBQUtJLGlCQUNOLE9BQU91NkMsR0FBUXY2QyxpQkFDbkIsS0FBS0osRUFBS00sVUFDTixPQUFPcTZDLEdBQVFyNkMsVUFDbkIsS0FBS04sRUFBS08sZUFDTixPQUFPbzZDLEdBQVFwNkMsZUFDbkIsS0FBS1AsRUFBS1Esa0JBQ04sT0FBT202QyxHQUFRbjZDLGtCQUNuQixLQUFLUixFQUFLVyxvQkFDTixPQUFPZzZDLEdBQVFoNkMsb0JBQ25CLEtBQUtYLEVBQUtZLFFBQ04sT0FBTys1QyxHQUFRLzVDLFFBQ25CLEtBQUtaLEVBQUthLGFBQ04sT0FBTzg1QyxHQUFROTVDLGFBQ25CLEtBQUtiLEVBQUtjLGNBQ04sT0FBTzY1QyxHQUFRNzVDLGNBQ25CLEtBQUtkLEVBQUtnQixVQUNOLE9BQU8yNUMsR0FBUTM1QyxVQUNuQixRQUNJLE9BQU9wQixFQUFLLHdCQUEwQnphLEtBdkxsRCxTQUFXdzFELEdBQ1BBLEVBQVFBLEVBQVksR0FBSSxHQUFLLEtBQzdCQSxFQUFRQSxFQUFtQixVQUFJLEdBQUssWUFDcENBLEVBQVFBLEVBQWlCLFFBQUksR0FBSyxVQUNsQ0EsRUFBUUEsRUFBMEIsaUJBQUksR0FBSyxtQkFDM0NBLEVBQVFBLEVBQTJCLGtCQUFJLEdBQUssb0JBQzVDQSxFQUFRQSxFQUFtQixVQUFJLEdBQUssWUFDcENBLEVBQVFBLEVBQXdCLGVBQUksR0FBSyxpQkFDekNBLEVBQVFBLEVBQTJCLGtCQUFJLEdBQUssb0JBQzVDQSxFQUFRQSxFQUF5QixnQkFBSSxJQUFNLGtCQUMzQ0EsRUFBUUEsRUFBNEIsbUJBQUksR0FBSyxxQkFDN0NBLEVBQVFBLEVBQTZCLG9CQUFJLEdBQUssc0JBQzlDQSxFQUFRQSxFQUFpQixRQUFJLElBQU0sVUFDbkNBLEVBQVFBLEVBQXNCLGFBQUksSUFBTSxlQUN4Q0EsRUFBUUEsRUFBdUIsY0FBSSxJQUFNLGdCQUN6Q0EsRUFBUUEsRUFBa0IsU0FBSSxJQUFNLFdBQ3BDQSxFQUFRQSxFQUFxQixZQUFJLElBQU0sY0FDdkNBLEVBQVFBLEVBQW1CLFVBQUksSUFBTSxZQWpCekMsQ0FrQkdBLEtBQVlBLEdBQVU7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBNk16QixJQW9JSW9CLEdBT0FDLEdBM0lBQyxHQUE2QixXQUU3QixTQUFTQSxFQUFZL1YsR0FJYm5yRCxLQUFLb3RCLFdBREwrOUIsRUFDa0IsU0FBVWhiLEVBQUlDLEdBQzVCLE9BQU8rYSxFQUFLaGIsRUFBSUMsSUFBT2hoQixHQUFZaEMsV0FBVytpQixFQUFHbnhDLElBQUtveEMsRUFBR3B4QyxNQUkzQyxTQUFVbXhDLEVBQUlDLEdBQzVCLE9BQU9oaEIsR0FBWWhDLFdBQVcraUIsRUFBR254QyxJQUFLb3hDLEVBQUdweEMsTUFHakRnQixLQUFLbWhFLFNBQVc3b0MsS0FDaEJ0NEIsS0FBS29oRSxVQUFZLElBQUlodEMsR0FBVXAwQixLQUFLb3RCLFlBaUd4QyxPQTNGQTh6QyxFQUFZRyxTQUFXLFNBQVVDLEdBQzdCLE9BQU8sSUFBSUosRUFBWUksRUFBT2wwQyxhQUVsQzh6QyxFQUFZN2hFLFVBQVUyVSxJQUFNLFNBQVVoVixHQUNsQyxPQUFpQyxNQUExQmdCLEtBQUttaEUsU0FBUzdpRSxJQUFJVSxJQUU3QmtpRSxFQUFZN2hFLFVBQVVmLElBQU0sU0FBVVUsR0FDbEMsT0FBT2dCLEtBQUttaEUsU0FBUzdpRSxJQUFJVSxJQUU3QmtpRSxFQUFZN2hFLFVBQVU4M0IsTUFBUSxXQUMxQixPQUFPbjNCLEtBQUtvaEUsVUFBVXhzQyxVQUUxQnNzQyxFQUFZN2hFLFVBQVUrM0IsS0FBTyxXQUN6QixPQUFPcDNCLEtBQUtvaEUsVUFBVXZzQyxVQUUxQnFzQyxFQUFZN2hFLFVBQVUyUSxRQUFVLFdBQzVCLE9BQU9oUSxLQUFLb2hFLFVBQVVweEQsV0FNMUJreEQsRUFBWTdoRSxVQUFVb0IsUUFBVSxTQUFVekIsR0FDdEMsSUFBSXV0QyxFQUFNdnNDLEtBQUttaEUsU0FBUzdpRSxJQUFJVSxHQUM1QixPQUFPdXRDLEVBQU12c0MsS0FBS29oRSxVQUFVM2dFLFFBQVE4ckMsSUFBUSxHQUVoRHB1QyxPQUFPQyxlQUFlOGlFLEVBQVk3aEUsVUFBVyxPQUFRLENBQ2pEZixJQUFLLFdBQ0QsT0FBTzBCLEtBQUtvaEUsVUFBVXp6QyxNQUUxQnR2QixZQUFZLEVBQ1prWixjQUFjLElBR2xCMnBELEVBQVk3aEUsVUFBVW1TLFFBQVUsU0FBVTZsQixHQUN0Q3IzQixLQUFLb2hFLFVBQVV0c0Msa0JBQWlCLFNBQVUzd0IsRUFBR2QsR0FFekMsT0FEQWcwQixFQUFHbHpCLElBQ0ksTUFJZis4RCxFQUFZN2hFLFVBQVU0M0IsSUFBTSxTQUFVc1YsR0FFbEMsSUFBSXI0QixFQUFNbFUsS0FBS2tWLE9BQU9xM0IsRUFBSXZ0QyxLQUMxQixPQUFPa1YsRUFBSXFnQixLQUFLcmdCLEVBQUlpdEQsU0FBU25nRCxPQUFPdXJCLEVBQUl2dEMsSUFBS3V0QyxHQUFNcjRCLEVBQUlrdEQsVUFBVXBnRCxPQUFPdXJCLEVBQUssUUFHakYyMEIsRUFBWTdoRSxVQUFVNlYsT0FBUyxTQUFVbFcsR0FDckMsSUFBSXV0QyxFQUFNdnNDLEtBQUsxQixJQUFJVSxHQUNuQixPQUFLdXRDLEVBR0V2c0MsS0FBS3UwQixLQUFLdjBCLEtBQUttaEUsU0FBUzcvQyxPQUFPdGlCLEdBQU1nQixLQUFLb2hFLFVBQVU5L0MsT0FBT2lyQixJQUZ2RHZzQyxNQUlma2hFLEVBQVk3aEUsVUFBVWlyQixRQUFVLFNBQVVpQixHQUN0QyxLQUFNQSxhQUFpQjIxQyxHQUNuQixPQUFPLEVBRVgsR0FBSWxoRSxLQUFLMnRCLE9BQVNwQyxFQUFNb0MsS0FDcEIsT0FBTyxFQUlYLElBRkEsSUFBSWtLLEVBQVM3M0IsS0FBS29oRSxVQUFVbHNDLGNBQ3hCNEMsRUFBVXZNLEVBQU02MUMsVUFBVWxzQyxjQUN2QjJDLEVBQU9sQyxXQUFXLENBQ3JCLElBQUk0ckMsRUFBVTFwQyxFQUFPbkMsVUFBVTEyQixJQUMzQndpRSxFQUFXMXBDLEVBQVFwQyxVQUFVMTJCLElBQ2pDLElBQUt1aUUsRUFBUWozQyxRQUFRazNDLEdBQ2pCLE9BQU8sRUFHZixPQUFPLEdBRVhOLEVBQVk3aEUsVUFBVW1NLFNBQVcsV0FDN0IsSUFBSWkyRCxFQUFhLEdBSWpCLE9BSEF6aEUsS0FBS3dSLFNBQVEsU0FBVSs2QixHQUNuQmsxQixFQUFXaCtELEtBQUs4b0MsRUFBSS9nQyxlQUVFLElBQXRCaTJELEVBQVdwaEUsT0FDSixpQkFHQSxvQkFBc0JvaEUsRUFBVzM1RCxLQUFLLFFBQVUsT0FHL0RvNUQsRUFBWTdoRSxVQUFVazFCLEtBQU8sU0FBVTRzQyxFQUFVQyxHQUM3QyxJQUFJTSxFQUFTLElBQUlSLEVBSWpCLE9BSEFRLEVBQU90MEMsV0FBYXB0QixLQUFLb3RCLFdBQ3pCczBDLEVBQU9QLFNBQVdBLEVBQ2xCTyxFQUFPTixVQUFZQSxFQUNaTSxHQUVKUixFQWpIcUI7Ozs7Ozs7Ozs7Ozs7Ozs7SUFxSWhDLFNBQVdGLEdBQ1BBLEVBQVdBLEVBQWtCLE1BQUksR0FBSyxRQUN0Q0EsRUFBV0EsRUFBb0IsUUFBSSxHQUFLLFVBQ3hDQSxFQUFXQSxFQUFxQixTQUFJLEdBQUssV0FDekNBLEVBQVdBLEVBQXFCLFNBQUksR0FBSyxXQUo3QyxDQUtHQSxLQUFlQSxHQUFhLEtBRS9CLFNBQVdDLEdBQ1BBLEVBQVVBLEVBQWlCLE1BQUksR0FBSyxRQUNwQ0EsRUFBVUEsRUFBa0IsT0FBSSxHQUFLLFNBRnpDLENBR0dBLEtBQWNBLEdBQVksS0FLN0IsSUE4U0lVLEdBOVNBQyxHQUFtQyxXQUNuQyxTQUFTQSxJQUNMNWhFLEtBQUs2aEUsVUFBWSxJQUFJenRDLEdBQVVoRixHQUFZaEMsWUEwRS9DLE9BeEVBdzBDLEVBQWtCdmlFLFVBQVV5aUUsTUFBUSxTQUFVaE8sR0FDMUMsSUFBSTkwRCxFQUFNODBELEVBQU92bkIsSUFBSXZ0QyxJQUNqQitpRSxFQUFZL2hFLEtBQUs2aEUsVUFBVXZqRSxJQUFJVSxHQUM5QitpRSxFQUtEak8sRUFBT2hoRCxPQUFTa3VELEdBQVdnQixPQUMzQkQsRUFBVWp2RCxPQUFTa3VELEdBQVdpQixTQUM5QmppRSxLQUFLNmhFLFVBQVk3aEUsS0FBSzZoRSxVQUFVN2dELE9BQU9oaUIsRUFBSzgwRCxHQUV2Q0EsRUFBT2hoRCxPQUFTa3VELEdBQVdpQixVQUNoQ0YsRUFBVWp2RCxPQUFTa3VELEdBQVdrQixRQUM5QmxpRSxLQUFLNmhFLFVBQVk3aEUsS0FBSzZoRSxVQUFVN2dELE9BQU9oaUIsRUFBSyxDQUN4QzhULEtBQU1pdkQsRUFBVWp2RCxLQUNoQnk1QixJQUFLdW5CLEVBQU92bkIsTUFHWHVuQixFQUFPaGhELE9BQVNrdUQsR0FBV21CLFVBQ2hDSixFQUFVanZELE9BQVNrdUQsR0FBV21CLFNBQzlCbmlFLEtBQUs2aEUsVUFBWTdoRSxLQUFLNmhFLFVBQVU3Z0QsT0FBT2hpQixFQUFLLENBQ3hDOFQsS0FBTWt1RCxHQUFXbUIsU0FDakI1MUIsSUFBS3VuQixFQUFPdm5CLE1BR1h1bkIsRUFBT2hoRCxPQUFTa3VELEdBQVdtQixVQUNoQ0osRUFBVWp2RCxPQUFTa3VELEdBQVdnQixNQUM5QmhpRSxLQUFLNmhFLFVBQVk3aEUsS0FBSzZoRSxVQUFVN2dELE9BQU9oaUIsRUFBSyxDQUN4QzhULEtBQU1rdUQsR0FBV2dCLE1BQ2pCejFCLElBQUt1bkIsRUFBT3ZuQixNQUdYdW5CLEVBQU9oaEQsT0FBU2t1RCxHQUFXa0IsU0FDaENILEVBQVVqdkQsT0FBU2t1RCxHQUFXZ0IsTUFDOUJoaUUsS0FBSzZoRSxVQUFZN2hFLEtBQUs2aEUsVUFBVXZnRCxPQUFPdGlCLEdBRWxDODBELEVBQU9oaEQsT0FBU2t1RCxHQUFXa0IsU0FDaENILEVBQVVqdkQsT0FBU2t1RCxHQUFXbUIsU0FDOUJuaUUsS0FBSzZoRSxVQUFZN2hFLEtBQUs2aEUsVUFBVTdnRCxPQUFPaGlCLEVBQUssQ0FDeEM4VCxLQUFNa3VELEdBQVdrQixRQUNqQjMxQixJQUFLdzFCLEVBQVV4MUIsTUFHZHVuQixFQUFPaGhELE9BQVNrdUQsR0FBV2dCLE9BQ2hDRCxFQUFVanZELE9BQVNrdUQsR0FBV2tCLFFBQzlCbGlFLEtBQUs2aEUsVUFBWTdoRSxLQUFLNmhFLFVBQVU3Z0QsT0FBT2hpQixFQUFLLENBQ3hDOFQsS0FBTWt1RCxHQUFXbUIsU0FDakI1MUIsSUFBS3VuQixFQUFPdm5CLE1BV2hCMW5CLEVBQUssdUNBQ0RuWixLQUFLc0csVUFBVThoRCxHQUNmLFVBQ0Fwb0QsS0FBS3NHLFVBQVUrdkQsSUExRG5CL2hFLEtBQUs2aEUsVUFBWTdoRSxLQUFLNmhFLFVBQVU3Z0QsT0FBT2hpQixFQUFLODBELElBNkRwRDhOLEVBQWtCdmlFLFVBQVUraUUsV0FBYSxXQUNyQyxJQUFJMXdCLEVBQVUsR0FJZCxPQUhBMXhDLEtBQUs2aEUsVUFBVS9zQyxrQkFBaUIsU0FBVTkxQixFQUFLODBELEdBQzNDcGlCLEVBQVFqdUMsS0FBS3F3RCxNQUVWcGlCLEdBRUprd0IsRUE1RTJCLEdBOEVsQ1MsR0FBOEIsV0FDOUIsU0FBU0EsRUFBYW5rRCxFQUFPbXhDLEVBQU1pVCxFQUFTQyxFQUFZQyxFQUFheE4sRUFBV3lOLEVBQWtCQyxHQUM5RjFpRSxLQUFLa2UsTUFBUUEsRUFDYmxlLEtBQUtxdkQsS0FBT0EsRUFDWnJ2RCxLQUFLc2lFLFFBQVVBLEVBQ2Z0aUUsS0FBS3VpRSxXQUFhQSxFQUNsQnZpRSxLQUFLd2lFLFlBQWNBLEVBQ25CeGlFLEtBQUtnMUQsVUFBWUEsRUFDakJoMUQsS0FBS3lpRSxpQkFBbUJBLEVBQ3hCemlFLEtBQUswaUUsd0JBQTBCQSxFQXlDbkMsT0F0Q0FMLEVBQWFNLHFCQUF1QixTQUFVemtELEVBQU9vK0IsRUFBV2ttQixFQUFheE4sR0FDekUsSUFBSXRqQixFQUFVLEdBSWQsT0FIQTRLLEVBQVU5cUMsU0FBUSxTQUFVKzZCLEdBQ3hCbUYsRUFBUWp1QyxLQUFLLENBQUVxUCxLQUFNa3VELEdBQVdnQixNQUFPejFCLElBQUtBLE9BRXpDLElBQUk4MUIsRUFBYW5rRCxFQUFPbytCLEVBQVc0a0IsR0FBWUcsU0FBUy9rQixHQUFZNUssRUFBUzh3QixFQUFheE4sR0FDekUsR0FDTyxJQUVuQzcyRCxPQUFPQyxlQUFlaWtFLEVBQWFoakUsVUFBVyxtQkFBb0IsQ0FDOURmLElBQUssV0FDRCxPQUFRMEIsS0FBS3dpRSxZQUFZeHlELFdBRTdCM1IsWUFBWSxFQUNaa1osY0FBYyxJQUVsQjhxRCxFQUFhaGpFLFVBQVVpckIsUUFBVSxTQUFVaUIsR0FDdkMsS0FBSXZyQixLQUFLZzFELFlBQWN6cEMsRUFBTXlwQyxXQUN6QmgxRCxLQUFLeWlFLG1CQUFxQmwzQyxFQUFNazNDLGtCQUMvQnppRSxLQUFLd2lFLFlBQVlsNEMsUUFBUWlCLEVBQU1pM0MsY0FDL0J4aUUsS0FBS2tlLE1BQU1vTSxRQUFRaUIsRUFBTXJOLFFBQ3pCbGUsS0FBS3F2RCxLQUFLL2tDLFFBQVFpQixFQUFNOGpDLE9BQ3hCcnZELEtBQUtzaUUsUUFBUWg0QyxRQUFRaUIsRUFBTSsyQyxVQUM1QixPQUFPLEVBRVgsSUFBSTV3QixFQUFVMXhDLEtBQUt1aUUsV0FDZkssRUFBZXIzQyxFQUFNZzNDLFdBQ3pCLEdBQUk3d0IsRUFBUXJ4QyxTQUFXdWlFLEVBQWF2aUUsT0FDaEMsT0FBTyxFQUVYLElBQUssSUFBSTVDLEVBQUksRUFBR0EsRUFBSWkwQyxFQUFRcnhDLE9BQVE1QyxJQUNoQyxHQUFJaTBDLEVBQVFqMEMsR0FBR3FWLE9BQVM4dkQsRUFBYW5sRSxHQUFHcVYsT0FDbkM0K0IsRUFBUWowQyxHQUFHOHVDLElBQUlqaUIsUUFBUXM0QyxFQUFhbmxFLEdBQUc4dUMsS0FDeEMsT0FBTyxFQUdmLE9BQU8sR0FFSjgxQixFQWxEc0IsR0EwRTdCUSxHQUE2QixXQUM3QixTQUFTQSxFQUlUam9CLEVBSUFpWixFQUtBaVAsRUFLQTFPLEVBSUFFLEdBQ0l0MEQsS0FBSzQ2QyxnQkFBa0JBLEVBQ3ZCNTZDLEtBQUs2ekQsY0FBZ0JBLEVBQ3JCN3pELEtBQUs4aUUsaUJBQW1CQSxFQUN4QjlpRSxLQUFLbzBELGdCQUFrQkEsRUFDdkJwMEQsS0FBS3MwRCx1QkFBeUJBLEVBZ0JsQyxPQVBBdU8sRUFBWUUsNkNBQStDLFNBQVU5cUMsRUFBVWhKLEdBQzNFLElBQUloa0IsRUFDQTRvRCxJQUFpQjVvRCxFQUFLLElBQ25CZ3RCLEdBQVkrcUMsR0FBYUMsOENBQThDaHJDLEVBQVVoSixHQUNwRmhrQixHQUNKLE9BQU8sSUFBSTQzRCxFQUFZanZDLEdBQWdCSyxJQUFLNC9CLEVBQWVoN0IsS0FBZVYsS0FBb0JPLE9BRTNGbXFDLEVBNUNxQixHQXNENUJHLEdBQThCLFdBQzlCLFNBQVNBLEVBT1R6cEIsRUFNQXRxQixFQUtBK2tDLEVBS0FTLEVBS0F0dkIsR0FDSW5sQyxLQUFLdTVDLFlBQWNBLEVBQ25CdjVDLEtBQUtpdkIsUUFBVUEsRUFDZmp2QixLQUFLZzBELGVBQWlCQSxFQUN0QmgwRCxLQUFLeTBELGtCQUFvQkEsRUFDekJ6MEQsS0FBS21sQyxpQkFBbUJBLEVBVTVCLE9BSEE2OUIsRUFBYUMsOENBQWdELFNBQVVockMsRUFBVWhKLEdBQzdFLE9BQU8sSUFBSSt6QyxFQUFhaCtDLElBQW1CaUssRUFBU3lKLEtBQWtCQSxLQUFrQkEsT0FFckZzcUMsRUE1Q3NCLEdBcUU3QkUsR0FDQSxTQUVBQyxFQUVBQyxFQUVBcGtFLEVBS0Fxa0UsR0FDSXJqRSxLQUFLbWpFLGlCQUFtQkEsRUFDeEJuakUsS0FBS29qRSxpQkFBbUJBLEVBQ3hCcGpFLEtBQUtoQixJQUFNQSxFQUNYZ0IsS0FBS3FqRSxPQUFTQSxHQUlsQkMsR0FDQSxTQUErQnJyQyxFQUFVc3JDLEdBQ3JDdmpFLEtBQUtpNEIsU0FBV0EsRUFDaEJqNEIsS0FBS3VqRSxnQkFBa0JBLElBSy9CLFNBQVc1QixHQUNQQSxFQUF1QkEsRUFBaUMsU0FBSSxHQUFLLFdBQ2pFQSxFQUF1QkEsRUFBOEIsTUFBSSxHQUFLLFFBQzlEQSxFQUF1QkEsRUFBZ0MsUUFBSSxHQUFLLFVBQ2hFQSxFQUF1QkEsRUFBZ0MsUUFBSSxHQUFLLFVBQ2hFQSxFQUF1QkEsRUFBOEIsTUFBSSxHQUFLLFFBTGxFLENBTUdBLEtBQTJCQSxHQUF5QixLQUN2RCxJQUFJNkIsR0FDQSxTQUVBbkosRUFFQW9KLEVBT0FscUIsRUFFQW1xQixRQUN3QixJQUFoQm5xQixJQUEwQkEsRUFBY3YwQixVQUM5QixJQUFWMCtDLElBQW9CQSxFQUFRLE1BQ2hDMWpFLEtBQUtxNkQsTUFBUUEsRUFDYnI2RCxLQUFLeWpFLFVBQVlBLEVBQ2pCempFLEtBQUt1NUMsWUFBY0EsRUFDbkJ2NUMsS0FBSzBqRSxNQUFRQSxHQUtqQkMsR0FBNkIsV0FDN0IsU0FBU0EsSUFLTDNqRSxLQUFLNGpFLGlCQUFtQixFQU94QjVqRSxLQUFLNmpFLGdCQUFrQkMsS0FFdkI5akUsS0FBSytqRSxhQUFlLytDLElBQ3BCaGxCLEtBQUtna0UsVUFBVyxFQU1oQmhrRSxLQUFLaWtFLG9CQUFxQixFQXVHOUIsT0FyR0E5bEUsT0FBT0MsZUFBZXVsRSxFQUFZdGtFLFVBQVcsVUFBVyxDQVNwRGYsSUFBSyxXQUNELE9BQU8wQixLQUFLZ2tFLFVBRWhCM2xFLFlBQVksRUFDWmtaLGNBQWMsSUFFbEJwWixPQUFPQyxlQUFldWxFLEVBQVl0a0UsVUFBVyxjQUFlLENBRXhEZixJQUFLLFdBQ0QsT0FBTzBCLEtBQUsrakUsY0FFaEIxbEUsWUFBWSxFQUNaa1osY0FBYyxJQUVsQnBaLE9BQU9DLGVBQWV1bEUsRUFBWXRrRSxVQUFXLFlBQWEsQ0FFdERmLElBQUssV0FDRCxPQUFpQyxJQUExQjBCLEtBQUs0akUsa0JBRWhCdmxFLFlBQVksRUFDWmtaLGNBQWMsSUFFbEJwWixPQUFPQyxlQUFldWxFLEVBQVl0a0UsVUFBVyxvQkFBcUIsQ0FFOURmLElBQUssV0FDRCxPQUFPMEIsS0FBS2lrRSxvQkFFaEI1bEUsWUFBWSxFQUNaa1osY0FBYyxJQU1sQm9zRCxFQUFZdGtFLFVBQVU2a0Usa0JBQW9CLFNBQVUzcUIsR0FDNUNBLEVBQVlsNUMsT0FBUyxJQUNyQkwsS0FBS2lrRSxvQkFBcUIsRUFDMUJqa0UsS0FBSytqRSxhQUFleHFCLElBUzVCb3FCLEVBQVl0a0UsVUFBVThrRSxlQUFpQixXQUNuQyxJQUFJblEsRUFBaUJ0N0IsS0FDakIrN0IsRUFBb0IvN0IsS0FDcEJ5TSxFQUFtQnpNLEtBZ0J2QixPQWZBMTRCLEtBQUs2akUsZ0JBQWdCcnlELFNBQVEsU0FBVXhTLEVBQUtvbEUsR0FDeEMsT0FBUUEsR0FDSixLQUFLcEQsR0FBV2dCLE1BQ1poTyxFQUFpQkEsRUFBZS84QixJQUFJajRCLEdBQ3BDLE1BQ0osS0FBS2dpRSxHQUFXbUIsU0FDWjFOLEVBQW9CQSxFQUFrQng5QixJQUFJajRCLEdBQzFDLE1BQ0osS0FBS2dpRSxHQUFXa0IsUUFDWi84QixFQUFtQkEsRUFBaUJsTyxJQUFJajRCLEdBQ3hDLE1BQ0osUUFDSTZsQixFQUFLLG9DQUFzQ3UvQyxPQUdoRCxJQUFJcEIsR0FBYWhqRSxLQUFLK2pFLGFBQWMvakUsS0FBS2drRSxTQUFVaFEsRUFBZ0JTLEVBQW1CdHZCLElBS2pHdytCLEVBQVl0a0UsVUFBVWdsRSxvQkFBc0IsV0FDeENya0UsS0FBS2lrRSxvQkFBcUIsRUFDMUJqa0UsS0FBSzZqRSxnQkFBa0JDLE1BRTNCSCxFQUFZdGtFLFVBQVVpbEUsa0JBQW9CLFNBQVV0bEUsRUFBS29sRSxHQUNyRHBrRSxLQUFLaWtFLG9CQUFxQixFQUMxQmprRSxLQUFLNmpFLGdCQUFrQjdqRSxLQUFLNmpFLGdCQUFnQjdpRCxPQUFPaGlCLEVBQUtvbEUsSUFFNURULEVBQVl0a0UsVUFBVWtsRSxxQkFBdUIsU0FBVXZsRSxHQUNuRGdCLEtBQUtpa0Usb0JBQXFCLEVBQzFCamtFLEtBQUs2akUsZ0JBQWtCN2pFLEtBQUs2akUsZ0JBQWdCdmlELE9BQU90aUIsSUFFdkQya0UsRUFBWXRrRSxVQUFVbWxFLDJCQUE2QixXQUMvQ3hrRSxLQUFLNGpFLGtCQUFvQixHQUU3QkQsRUFBWXRrRSxVQUFVb2xFLHFCQUF1QixXQUN6Q3prRSxLQUFLNGpFLGtCQUFvQixHQUU3QkQsRUFBWXRrRSxVQUFVcWxFLFlBQWMsV0FDaEMxa0UsS0FBS2lrRSxvQkFBcUIsRUFDMUJqa0UsS0FBS2drRSxVQUFXLEdBRWJMLEVBN0hxQixHQW1JNUJnQixHQUF1QyxXQUN2QyxTQUFTQSxFQUFzQkMsR0FDM0I1a0UsS0FBSzRrRSxpQkFBbUJBLEVBRXhCNWtFLEtBQUs2a0UsYUFBZSxHQUVwQjdrRSxLQUFLOGtFLHVCQUF5QjNzQyxLQUU5Qm40QixLQUFLK2tFLDZCQUErQkMsS0FNcENobEUsS0FBS2lsRSxvQkFBc0IsSUFBSWx1QyxHQUFVN00sR0F1VDdDLE9BbFRBeTZDLEVBQXNCdGxFLFVBQVU2bEUscUJBQXVCLFNBQVVDLEdBQzdELElBQUssSUFBSXg2RCxFQUFLLEVBQUdNLEVBQUtrNkQsRUFBVWhDLGlCQUFrQng0RCxFQUFLTSxFQUFHNUssT0FBUXNLLElBQU0sQ0FDcEUsSUFBSXN0QixFQUFXaHRCLEVBQUdOLEdBQ2R3NkQsRUFBVTlCLGtCQUFrQnQ0QixHQUM1Qi9xQyxLQUFLb2xFLG9CQUFvQm50QyxFQUFVa3RDLEVBQVU5QixRQUV4QzhCLEVBQVU5QixrQkFBa0JsMkIsSUFDakNudEMsS0FBS3FsRSx5QkFBeUJwdEMsRUFBVWt0QyxFQUFVbm1FLElBQUttbUUsRUFBVTlCLFFBR3pFLElBQUssSUFBSW40RCxFQUFLLEVBQUd5SixFQUFLd3dELEVBQVUvQixpQkFBa0JsNEQsRUFBS3lKLEVBQUd0VSxPQUFRNkssSUFBTSxDQUNoRStzQixFQUFXdGpCLEVBQUd6SixHQUNsQmxMLEtBQUtxbEUseUJBQXlCcHRDLEVBQVVrdEMsRUFBVW5tRSxJQUFLbW1FLEVBQVU5QixVQUl6RXNCLEVBQXNCdGxFLFVBQVVpbUUsbUJBQXFCLFNBQVVDLEdBQzNELElBQUk3N0QsRUFBUTFKLEtBQ1pBLEtBQUt1b0MsY0FBY2c5QixHQUFjLFNBQVV0dEMsR0FDdkMsSUFBSXV0QyxFQUFjOTdELEVBQU0rN0Qsa0JBQWtCeHRDLEdBQzFDLE9BQVFzdEMsRUFBYWxMLE9BQ2pCLEtBQUtzSCxHQUF1QitELFNBQ3BCaDhELEVBQU1pOEQsZUFBZTF0QyxJQUNyQnV0QyxFQUFZdEIsa0JBQWtCcUIsRUFBYWhzQixhQUUvQyxNQUNKLEtBQUtvb0IsR0FBdUJLLE1BR3hCd0QsRUFBWWYsdUJBQ1BlLEVBQVlJLFdBSWJKLEVBQVluQixzQkFFaEJtQixFQUFZdEIsa0JBQWtCcUIsRUFBYWhzQixhQUMzQyxNQUNKLEtBQUtvb0IsR0FBdUJPLFFBS3hCc0QsRUFBWWYsdUJBQ1BlLEVBQVlJLFdBQ2JsOEQsRUFBTWkrQyxhQUFhMXZCLEdBRXZCcHlCLEdBQVEwL0QsRUFBYTdCLE1BQU8seURBQzVCLE1BQ0osS0FBSy9CLEdBQXVCa0UsUUFDcEJuOEQsRUFBTWk4RCxlQUFlMXRDLEtBQ3JCdXRDLEVBQVlkLGNBQ1pjLEVBQVl0QixrQkFBa0JxQixFQUFhaHNCLGNBRS9DLE1BQ0osS0FBS29vQixHQUF1Qm1FLE1BQ3BCcDhELEVBQU1pOEQsZUFBZTF0QyxLQUlyQnZ1QixFQUFNcThELFlBQVk5dEMsR0FDbEJ1dEMsRUFBWXRCLGtCQUFrQnFCLEVBQWFoc0IsY0FFL0MsTUFDSixRQUNJMTBCLEVBQUssc0NBQXdDMGdELEVBQWFsTCxZQVMxRXNLLEVBQXNCdGxFLFVBQVVrcEMsY0FBZ0IsU0FBVWc5QixFQUFjMzJELEdBQ2hFMjJELEVBQWE5QixVQUFVcGpFLE9BQVMsRUFDaENrbEUsRUFBYTlCLFVBQVVqeUQsUUFBUTVDLEdBRy9COFgsRUFBYzFtQixLQUFLNmtFLGFBQWNqMkQsSUFRekMrMUQsRUFBc0J0bEUsVUFBVTJtRSxzQkFBd0IsU0FBVXBKLEdBQzlELElBQUkza0MsRUFBVzJrQyxFQUFZM2tDLFNBQ3ZCa0QsRUFBZ0J5aEMsRUFBWTJHLGdCQUFnQnBsRCxNQUM1Q3lwQixFQUFhNW5DLEtBQUtpbUUsMEJBQTBCaHVDLEdBQ2hELEdBQUkyUCxFQUFZLENBQ1osSUFBSTltQyxFQUFTOG1DLEVBQVc5bUMsT0FDeEIsR0FBSUEsRUFBTzhqQyxrQkFDUCxHQUFzQixJQUFsQnpKLEVBQXFCLENBT3JCLElBQUluOEIsRUFBTSxJQUFJb3dCLEdBQVl0dUIsRUFBTzJ0QixNQUNqQ3p1QixLQUFLcWxFLHlCQUF5QnB0QyxFQUFVajVCLEVBQUssSUFBSW11QyxHQUFXbnVDLEVBQUs0MEIsR0FBZ0JJLHVCQUdqRm51QixFQUF5QixJQUFsQnMxQixFQUFxQixnREFBa0RBLFFBSWhFbjdCLEtBQUtrbUUsaUNBQWlDanVDLEtBQ3BDa0QsSUFHaEJuN0IsS0FBSytsRSxZQUFZOXRDLEdBQ2pCajRCLEtBQUtpbEUsb0JBQXNCamxFLEtBQUtpbEUsb0JBQW9CaHVDLElBQUlnQixNQVN4RTBzQyxFQUFzQnRsRSxVQUFVOG1FLGtCQUFvQixTQUFVdnJCLEdBQzFELElBQUlseEMsRUFBUTFKLEtBQ1I2ekQsRUFBZ0IsR0FDcEJudEMsRUFBYzFtQixLQUFLNmtFLGNBQWMsU0FBVTVzQyxFQUFVdXRDLEdBQ2pELElBQUk1OUIsRUFBYWwrQixFQUFNdThELDBCQUEwQmh1QyxHQUNqRCxHQUFJMlAsRUFBWSxDQUNaLEdBQUk0OUIsRUFBWXYyQyxTQUFXMlksRUFBVzltQyxPQUFPOGpDLGtCQUFtQixDQVU1RCxJQUFJNWxDLEVBQU0sSUFBSW93QixHQUFZd1ksRUFBVzltQyxPQUFPMnRCLE1BQ0UsT0FBMUMva0IsRUFBTW83RCx1QkFBdUJ4bUUsSUFBSVUsSUFDaEMwSyxFQUFNMDhELHVCQUF1Qm51QyxFQUFVajVCLElBQ3hDMEssRUFBTTI3RCx5QkFBeUJwdEMsRUFBVWo1QixFQUFLLElBQUltdUMsR0FBV251QyxFQUFLNDdDLElBR3RFNHFCLEVBQVlhLG9CQUNaeFMsRUFBYzU3QixHQUFZdXRDLEVBQVlyQixpQkFDdENxQixFQUFZbkIsMkJBSXhCLElBQUkvUCxFQUF5QjU3QixLQU03QjE0QixLQUFLK2tFLDZCQUE2QnZ6RCxTQUFRLFNBQVV4UyxFQUFLcTRELEdBQ3JELElBQUlpUCxHQUFvQixFQUN4QmpQLEVBQVE1L0IsY0FBYSxTQUFVUSxHQUMzQixJQUFJMlAsRUFBYWwrQixFQUFNdThELDBCQUEwQmh1QyxHQUNqRCxPQUFJMlAsR0FDQUEsRUFBVytTLFVBQVlYLEdBQWN1c0Isa0JBQ3JDRCxHQUFvQixHQUNiLE1BSVhBLElBQ0FoUyxFQUF5QkEsRUFBdUJyOUIsSUFBSWo0QixPQUc1RCxJQUFJMDBELEVBQWMsSUFBSW1QLEdBQVlqb0IsRUFBaUJpWixFQUFlN3pELEtBQUtpbEUsb0JBQXFCamxFLEtBQUs4a0UsdUJBQXdCeFEsR0FJekgsT0FIQXQwRCxLQUFLOGtFLHVCQUF5QjNzQyxLQUM5Qm40QixLQUFLK2tFLDZCQUErQkMsS0FDcENobEUsS0FBS2lsRSxvQkFBc0IsSUFBSWx1QyxHQUFVN00sR0FDbEN3cEMsR0FPWGlSLEVBQXNCdGxFLFVBQVUrbEUsb0JBQXNCLFNBQVVudEMsRUFBVTdZLEdBQ3RFLEdBQUtwZixLQUFLMmxFLGVBQWUxdEMsR0FBekIsQ0FHQSxJQUFJbXNDLEVBQWFwa0UsS0FBS29tRSx1QkFBdUJudUMsRUFBVTdZLEVBQVNwZ0IsS0FDMURnaUUsR0FBV21CLFNBQ1huQixHQUFXZ0IsTUFDQ2hpRSxLQUFLeWxFLGtCQUFrQnh0QyxHQUM3QnFzQyxrQkFBa0JsbEQsRUFBU3BnQixJQUFLb2xFLEdBQzVDcGtFLEtBQUs4a0UsdUJBQXlCOWtFLEtBQUs4a0UsdUJBQXVCOWpELE9BQU81QixFQUFTcGdCLElBQUtvZ0IsR0FDL0VwZixLQUFLK2tFLDZCQUErQi9rRSxLQUFLK2tFLDZCQUE2Qi9qRCxPQUFPNUIsRUFBU3BnQixJQUFLZ0IsS0FBS3dtRSw0QkFBNEJwbkQsRUFBU3BnQixLQUFLaTRCLElBQUlnQixNQVVsSjBzQyxFQUFzQnRsRSxVQUFVZ21FLHlCQUEyQixTQUFVcHRDLEVBQVVqNUIsRUFBS3luRSxHQUNoRixHQUFLem1FLEtBQUsybEUsZUFBZTF0QyxHQUF6QixDQUdBLElBQUl1dEMsRUFBY3hsRSxLQUFLeWxFLGtCQUFrQnh0QyxHQUNyQ2o0QixLQUFLb21FLHVCQUF1Qm51QyxFQUFVajVCLEdBQ3RDd21FLEVBQVlsQixrQkFBa0J0bEUsRUFBS2dpRSxHQUFXa0IsU0FLOUNzRCxFQUFZakIscUJBQXFCdmxFLEdBRXJDZ0IsS0FBSytrRSw2QkFBK0Iva0UsS0FBSytrRSw2QkFBNkIvakQsT0FBT2hpQixFQUFLZ0IsS0FBS3dtRSw0QkFBNEJ4bkUsR0FBS2tXLE9BQU8raUIsSUFDM0h3dUMsSUFDQXptRSxLQUFLOGtFLHVCQUF5QjlrRSxLQUFLOGtFLHVCQUF1QjlqRCxPQUFPaGlCLEVBQUt5bkUsTUFHOUU5QixFQUFzQnRsRSxVQUFVc29ELGFBQWUsU0FBVTF2QixVQUM5Q2o0QixLQUFLNmtFLGFBQWE1c0MsSUFPN0Iwc0MsRUFBc0J0bEUsVUFBVTZtRSxpQ0FBbUMsU0FBVWp1QyxHQUN6RSxJQUNJc3RDLEVBRGN2bEUsS0FBS3lsRSxrQkFBa0J4dEMsR0FDVmtzQyxpQkFDL0IsT0FBUW5rRSxLQUFLNGtFLGlCQUFpQjhCLHVCQUF1Qnp1QyxHQUFVdEssS0FDM0Q0M0MsRUFBYXZSLGVBQWVybUMsS0FDNUI0M0MsRUFBYXBnQyxpQkFBaUJ4WCxNQU10Q2czQyxFQUFzQnRsRSxVQUFVbWxFLDJCQUE2QixTQUFVdnNDLEdBRWpEajRCLEtBQUt5bEUsa0JBQWtCeHRDLEdBQzdCdXNDLDhCQUVoQkcsRUFBc0J0bEUsVUFBVW9tRSxrQkFBb0IsU0FBVXh0QyxHQUkxRCxPQUhLajRCLEtBQUs2a0UsYUFBYTVzQyxLQUNuQmo0QixLQUFLNmtFLGFBQWE1c0MsR0FBWSxJQUFJMHJDLElBRS9CM2pFLEtBQUs2a0UsYUFBYTVzQyxJQUU3QjBzQyxFQUFzQnRsRSxVQUFVbW5FLDRCQUE4QixTQUFVeG5FLEdBQ3BFLElBQUkybkUsRUFBZ0IzbUUsS0FBSytrRSw2QkFBNkJ6bUUsSUFBSVUsR0FLMUQsT0FKSzJuRSxJQUNEQSxFQUFnQixJQUFJNXZDLEdBQVU3TSxHQUM5QmxxQixLQUFLK2tFLDZCQUErQi9rRSxLQUFLK2tFLDZCQUE2Qi9qRCxPQUFPaGlCLEVBQUsybkUsSUFFL0VBLEdBT1hoQyxFQUFzQnRsRSxVQUFVc21FLGVBQWlCLFNBQVUxdEMsR0FDdkQsSUFBSTJ1QyxFQUE0RCxPQUE3QzVtRSxLQUFLaW1FLDBCQUEwQmh1QyxHQUlsRCxPQUhLMnVDLEdBQ0RqdkQsRUFsU0ksd0JBa1NhLDJCQUE0QnNnQixHQUUxQzJ1QyxHQU1YakMsRUFBc0J0bEUsVUFBVTRtRSwwQkFBNEIsU0FBVWh1QyxHQUNsRSxJQUFJdXRDLEVBQWN4bEUsS0FBSzZrRSxhQUFhNXNDLEdBQ3BDLE9BQU91dEMsR0FBZUEsRUFBWUksVUFDNUIsS0FDQTVsRSxLQUFLNGtFLGlCQUFpQm43Qix1QkFBdUJ4UixJQU92RDBzQyxFQUFzQnRsRSxVQUFVMG1FLFlBQWMsU0FBVTl0QyxHQUNwRCxJQUFJdnVCLEVBQVExSixLQUNaNkYsR0FBUTdGLEtBQUs2a0UsYUFBYTVzQyxHQUFVMnRDLFVBQVcsb0NBQy9DNWxFLEtBQUs2a0UsYUFBYTVzQyxHQUFZLElBQUkwckMsR0FJZjNqRSxLQUFLNGtFLGlCQUFpQjhCLHVCQUF1Qnp1QyxHQUNuRHptQixTQUFRLFNBQVV4UyxHQUMzQjBLLEVBQU0yN0QseUJBQXlCcHRDLEVBQVVqNUIsRUFBMEIsVUFPM0UybEUsRUFBc0J0bEUsVUFBVSttRSx1QkFBeUIsU0FBVW51QyxFQUFVajVCLEdBRXpFLE9BRG1CZ0IsS0FBSzRrRSxpQkFBaUI4Qix1QkFBdUJ6dUMsR0FDNUNqa0IsSUFBSWhWLElBRXJCMmxFLEVBclUrQixHQXVVMUMsU0FBU0ssS0FDTCxPQUFPLElBQUk1d0MsR0FBVWhGLEdBQVloQyxZQUVyQyxTQUFTMDJDLEtBQ0wsT0FBTyxJQUFJMXZDLEdBQVVoRixHQUFZaEM7Ozs7Ozs7Ozs7Ozs7Ozs7R0FtQnJDLElBQUl5NUMsR0FBWSxjQXNCWkMsR0FBNkIsV0FDN0IsU0FBU0EsRUFJVGhvQixFQUVBaWdCLEVBQVdqdkMsRUFBWWd3QyxFQUFvQmlILEdBQ3ZDLElBQUlyOUQsRUFBUTFKLEtBQ1pBLEtBQUs4K0MsV0FBYUEsRUFDbEI5K0MsS0FBSysrRCxVQUFZQSxFQWtCakIvK0QsS0FBS2duRSxjQUFnQixHQVVyQmhuRSxLQUFLaW5FLGNBQWdCLEdBQ3JCam5FLEtBQUtrbkUsc0JBQXdCLEtBSzdCbG5FLEtBQUs4NUMsZ0JBQWlCLEVBQ3RCOTVDLEtBQUtzaEQsV0FBWSxFQUNqQnRoRCxLQUFLK21FLG9CQUFzQkEsRUFDM0IvbUUsS0FBSyttRSxvQkFBb0JJLGFBQVksU0FBVUMsR0FDM0N0M0MsRUFBV2Usa0JBQWlCLFdBQWMsT0FBT3JyQixFQUFNOUQsVUFBVWdJLE9BQU8sT0FBUSxHQUFRLFdBQ3BGLE9BQU9sRSxFQUFNL0MsWUFBWXpDLE1BQU0sU0FBVWlMLEdBQ3JDLE9BQVFBLEVBQUdsSSxPQUNQLEtBQUssRUFDRCxPQUFLL0MsS0FBS3FuRSxpQkFDVjF2RCxFQUFNa3ZELEdBQVcsdURBQ1YsQ0FBQyxFQUFhN21FLEtBQUtzbkUsbUJBRlEsQ0FBQyxFQUFhLEdBR3BELEtBQUssRUFDRHI4RCxFQUFHakksT0FDSGlJLEVBQUdsSSxNQUFRLEVBQ2YsS0FBSyxFQUFHLE1BQU8sQ0FBQyxnQkFLaEMvQyxLQUFLdW5FLG1CQUFxQixJQUFJMUgsR0FBbUIvdkMsRUFBWWd3QyxHQUU3RDkvRCxLQUFLd25FLFlBQWN4bkUsS0FBSysrRCxVQUFVVCx5QkFBeUIsQ0FDdkRuQyxPQUFRbjhELEtBQUt5bkUsa0JBQWtCeG9FLEtBQUtlLE1BQ3BDMjdELFFBQVMzN0QsS0FBSzBuRSxtQkFBbUJ6b0UsS0FBS2UsTUFDdENnOUQsY0FBZWg5RCxLQUFLMm5FLG9CQUFvQjFvRSxLQUFLZSxRQUVqREEsS0FBSzRuRSxZQUFjNW5FLEtBQUsrK0QsVUFBVVYseUJBQXlCLENBQ3ZEbEMsT0FBUW44RCxLQUFLNm5FLGtCQUFrQjVvRSxLQUFLZSxNQUNwQzI3RCxRQUFTMzdELEtBQUs4bkUsbUJBQW1CN29FLEtBQUtlLE1BQ3RDaStELG9CQUFxQmorRCxLQUFLK25FLHlCQUF5QjlvRSxLQUFLZSxNQUN4RGcrRCxpQkFBa0JoK0QsS0FBS2crRCxpQkFBaUIvK0QsS0FBS2UsUUFta0JyRCxPQTVqQkE4bUUsRUFBWXpuRSxVQUFVZ3hCLE1BQVEsV0FDMUIsT0FBT3J3QixLQUFLZ29FLGlCQUdoQmxCLEVBQVl6bkUsVUFBVTJvRSxjQUFnQixXQUNsQyxPQUFPeGlFLEVBQU05RCxVQUFVMUIsVUFBTSxPQUFRLEdBQVEsV0FDekMsSUFBSWlMLEVBQ0osT0FBT3pGLEVBQU0vQyxZQUFZekMsTUFBTSxTQUFVa0wsR0FDckMsT0FBUUEsRUFBR25JLE9BQ1AsS0FBSyxFQUVELE9BREEvQyxLQUFLODVDLGdCQUFpQixFQUNqQjk1QyxLQUFLcW5FLGlCQUNWcDhELEVBQUtqTCxLQUFLNG5FLFlBQ0gsQ0FBQyxFQUFhNW5FLEtBQUs4K0MsV0FBVzFjLHVCQUZILENBQUMsRUFBYSxHQUdwRCxLQUFLLEVBU0QsT0FSQW4zQixFQUFHZzNCLGdCQUFrQi8yQixFQUFHbEksT0FDcEJoRCxLQUFLaW9FLHlCQUNMam9FLEtBQUtrb0UsbUJBR0xsb0UsS0FBS3VuRSxtQkFBbUJyekQsSUFBSTRsRCxHQUFZaUcsU0FHckMsQ0FBQyxFQUFhLy9ELEtBQUttb0UscUJBQzlCLEtBQUssRUFFRGo5RCxFQUFHbEksT0FDSGtJLEVBQUduSSxNQUFRLEVBQ2YsS0FBSyxFQUFHLE1BQU8sQ0FBQyxXQVNoQytqRSxFQUFZem5FLFVBQVUrb0UsZUFBaUIsV0FDbkMsT0FBTzVpRSxFQUFNOUQsVUFBVTFCLFVBQU0sT0FBUSxHQUFRLFdBQ3pDLE9BQU93RixFQUFNL0MsWUFBWXpDLE1BQU0sU0FBVWlMLEdBQ3JDLE9BQVFBLEVBQUdsSSxPQUNQLEtBQUssRUFFRCxPQURBL0MsS0FBSzg1QyxnQkFBaUIsRUFDZixDQUFDLEVBQWE5NUMsS0FBS3FvRSwwQkFDOUIsS0FBSyxFQUlELE9BSEFwOUQsRUFBR2pJLE9BRUhoRCxLQUFLdW5FLG1CQUFtQnJ6RCxJQUFJNGxELEdBQVl5RyxTQUNqQyxDQUFDLFdBSzVCdUcsRUFBWXpuRSxVQUFVZ3BFLHVCQUF5QixXQUMzQyxPQUFPN2lFLEVBQU05RCxVQUFVMUIsVUFBTSxPQUFRLEdBQVEsV0FDekMsT0FBT3dGLEVBQU0vQyxZQUFZekMsTUFBTSxTQUFVaUwsR0FDckMsT0FBUUEsRUFBR2xJLE9BQ1AsS0FBSyxFQUFHLE1BQU8sQ0FBQyxFQUFhL0MsS0FBSzRuRSxZQUFZMW9CLFFBQzlDLEtBQUssRUFFRCxPQURBajBDLEVBQUdqSSxPQUNJLENBQUMsRUFBYWhELEtBQUt3bkUsWUFBWXRvQixRQUMxQyxLQUFLLEVBT0QsT0FOQWowQyxFQUFHakksT0FDQ2hELEtBQUtnbkUsY0FBYzNtRSxPQUFTLElBQzVCc1gsRUFBTWt2RCxHQUFXLDhCQUFnQzdtRSxLQUFLZ25FLGNBQWMzbUUsT0FBUyxtQkFDN0VMLEtBQUtnbkUsY0FBZ0IsSUFFekJobkUsS0FBS3NvRSwwQkFDRSxDQUFDLFdBSzVCeEIsRUFBWXpuRSxVQUFVMGxELFNBQVcsV0FDN0IsT0FBT3YvQyxFQUFNOUQsVUFBVTFCLFVBQU0sT0FBUSxHQUFRLFdBQ3pDLE9BQU93RixFQUFNL0MsWUFBWXpDLE1BQU0sU0FBVWlMLEdBQ3JDLE9BQVFBLEVBQUdsSSxPQUNQLEtBQUssRUFHRCxPQUZBNFUsRUFBTWt2RCxHQUFXLDhCQUNqQjdtRSxLQUFLODVDLGdCQUFpQixFQUNmLENBQUMsRUFBYTk1QyxLQUFLcW9FLDBCQUM5QixLQUFLLEVBTUQsT0FMQXA5RCxFQUFHakksT0FDSGhELEtBQUsrbUUsb0JBQW9CaGlCLFdBR3pCL2tELEtBQUt1bkUsbUJBQW1CcnpELElBQUk0bEQsR0FBWWlHLFNBQ2pDLENBQUMsV0FTNUIrRyxFQUFZem5FLFVBQVVrcEUsT0FBUyxTQUFVM2dDLEdBQ2pDbjRCLEVBQVN6UCxLQUFLaW5FLGNBQWVyL0IsRUFBVzNQLFlBSTVDajRCLEtBQUtpbkUsY0FBY3IvQixFQUFXM1AsVUFBWTJQLEVBQ3RDNW5DLEtBQUtpb0UseUJBRUxqb0UsS0FBS2tvRSxtQkFFQWxvRSxLQUFLd25FLFlBQVl6TSxVQUN0Qi82RCxLQUFLd29FLGlCQUFpQjVnQyxLQU85QmsvQixFQUFZem5FLFVBQVVvcEUsU0FBVyxTQUFVeHdDLEdBQ3ZDcHlCLEVBQU80SixFQUFTelAsS0FBS2luRSxjQUFlaHZDLEdBQVcsbURBQXFEQSxVQUM3Rmo0QixLQUFLaW5FLGNBQWNodkMsR0FDdEJqNEIsS0FBS3duRSxZQUFZek0sVUFDakIvNkQsS0FBSzBvRSxtQkFBbUJ6d0MsR0FFeEJqb0IsRUFBUWhRLEtBQUtpbkUsaUJBQ1RqbkUsS0FBS3duRSxZQUFZek0sU0FDakIvNkQsS0FBS3duRSxZQUFZck0sV0FFWm43RCxLQUFLcW5FLGlCQUlWcm5FLEtBQUt1bkUsbUJBQW1CcnpELElBQUk0bEQsR0FBWWlHLFdBS3BEK0csRUFBWXpuRSxVQUFVb3FDLHVCQUF5QixTQUFVeFIsR0FDckQsT0FBT2o0QixLQUFLaW5FLGNBQWNodkMsSUFBYSxNQUczQzZ1QyxFQUFZem5FLFVBQVVxbkUsdUJBQXlCLFNBQVV6dUMsR0FDckQsT0FBT2o0QixLQUFLMm9FLFdBQVdqQyx1QkFBdUJ6dUMsSUFNbEQ2dUMsRUFBWXpuRSxVQUFVbXBFLGlCQUFtQixTQUFVNWdDLEdBQy9DNW5DLEtBQUtrbkUsc0JBQXNCMUMsMkJBQTJCNThCLEVBQVczUCxVQUNqRWo0QixLQUFLd25FLFlBQVl2SyxNQUFNcjFCLElBTzNCay9CLEVBQVl6bkUsVUFBVXFwRSxtQkFBcUIsU0FBVXp3QyxHQUNqRGo0QixLQUFLa25FLHNCQUFzQjFDLDJCQUEyQnZzQyxHQUN0RGo0QixLQUFLd25FLFlBQVlsSyxRQUFRcmxDLElBRTdCNnVDLEVBQVl6bkUsVUFBVTZvRSxpQkFBbUIsV0FDckNyaUUsRUFBTzdGLEtBQUtpb0UseUJBQTBCLHFFQUN0Q2pvRSxLQUFLa25FLHNCQUF3QixJQUFJdkMsR0FBc0Iza0UsTUFDdkRBLEtBQUt3bkUsWUFBWW4zQyxRQUNqQnJ3QixLQUFLdW5FLG1CQUFtQnBILDBCQU01QjJHLEVBQVl6bkUsVUFBVTRvRSx1QkFBeUIsV0FDM0MsT0FBUWpvRSxLQUFLcW5FLGtCQUNScm5FLEtBQUt3bkUsWUFBWTdNLGNBQ2pCM3FELEVBQVFoUSxLQUFLaW5FLGdCQUV0QkgsRUFBWXpuRSxVQUFVZ29FLGNBQWdCLFdBQ2xDLE9BQU9ybkUsS0FBS3NoRCxXQUFhdGhELEtBQUs4NUMsZ0JBRWxDZ3RCLEVBQVl6bkUsVUFBVWlwRSx3QkFBMEIsV0FDNUN0b0UsS0FBS2tuRSxzQkFBd0IsTUFFakNKLEVBQVl6bkUsVUFBVW9vRSxrQkFBb0IsV0FDdEMsT0FBT2ppRSxFQUFNOUQsVUFBVTFCLFVBQU0sT0FBUSxHQUFRLFdBQ3pDLElBQUkwSixFQUFRMUosS0FDWixPQUFPd0YsRUFBTS9DLFlBQVl6QyxNQUFNLFNBQVVpTCxHQUlyQyxPQUhBeWIsRUFBYzFtQixLQUFLaW5FLGVBQWUsU0FBVWh2QyxFQUFVMlAsR0FDbERsK0IsRUFBTTgrRCxpQkFBaUI1Z0MsTUFFcEIsQ0FBQyxVQUlwQmsvQixFQUFZem5FLFVBQVVxb0UsbUJBQXFCLFNBQVU1akUsR0FDakQsT0FBTzBCLEVBQU05RCxVQUFVMUIsVUFBTSxPQUFRLEdBQVEsV0FDekMsT0FBT3dGLEVBQU0vQyxZQUFZekMsTUFBTSxTQUFVaUwsR0FrQnJDLFlBakJjMUIsSUFBVnpGLEdBR0ErQixHQUFRN0YsS0FBS2lvRSx5QkFBMEIsMkRBRTNDam9FLEtBQUtzb0UsMEJBRUR0b0UsS0FBS2lvRSwwQkFDTGpvRSxLQUFLdW5FLG1CQUFtQi9HLHlCQUF5QjE4RCxHQUNqRDlELEtBQUtrb0Usb0JBTUxsb0UsS0FBS3VuRSxtQkFBbUJyekQsSUFBSTRsRCxHQUFZaUcsU0FFckMsQ0FBQyxVQUlwQitHLEVBQVl6bkUsVUFBVXNvRSxvQkFBc0IsU0FBVS9LLEVBQWFoaUIsR0FDL0QsT0FBT3AxQyxFQUFNOUQsVUFBVTFCLFVBQU0sT0FBUSxHQUFRLFdBQ3pDLElBQUlzbkMsRUFDSixPQUFPOWhDLEVBQU0vQyxZQUFZekMsTUFBTSxTQUFVaUwsR0FDckMsT0FBUUEsRUFBR2xJLE9BQ1AsS0FBSyxFQUdELE9BREEvQyxLQUFLdW5FLG1CQUFtQnJ6RCxJQUFJNGxELEdBQVkyRyxRQUNwQzdELGFBQXVCNEcsSUFDdkI1RyxFQUFZdkMsUUFBVXNILEdBQXVCTyxTQUM3Q3RGLEVBQVk4RyxNQUdMLENBQUMsRUFBYzFqRSxLQUFLNG9FLGtCQUFrQmhNLEtBRTdDQSxhQUF1QnNHLEdBQ3ZCbGpFLEtBQUtrbkUsc0JBQXNCaEMscUJBQXFCdEksR0FFM0NBLGFBQXVCMEcsR0FDNUJ0akUsS0FBS2tuRSxzQkFBc0JsQixzQkFBc0JwSixJQUdqRC8yRCxFQUFPKzJELGFBQXVCNEcsR0FBbUIsK0RBQ2pEeGpFLEtBQUtrbkUsc0JBQXNCNUIsbUJBQW1CMUksSUFFNUNoaUIsRUFBZ0J0d0IsUUFBUXNKLEdBQWdCSyxLQUFhLENBQUMsRUFBYSxHQUNsRSxDQUFDLEVBQWFqMEIsS0FBSzgrQyxXQUFXelgsaUNBQ3pDLEtBQUssRUFFRCxPQURBQyxFQUE0QnI4QixFQUFHakksT0FDekI0M0MsRUFBZ0J4dUIsVUFBVWtiLElBQThCLEVBR3ZELENBQUMsRUFBYXRuQyxLQUFLNm9FLG1CQUFtQmp1QixJQUg0QixDQUFDLEVBQWEsR0FJM0YsS0FBSyxFQUdEM3ZDLEVBQUdqSSxPQUNIaUksRUFBR2xJLE1BQVEsRUFDZixLQUFLLEVBQUcsTUFBTyxDQUFDLFdBVWhDK2pFLEVBQVl6bkUsVUFBVXdwRSxtQkFBcUIsU0FBVWp1QixHQUNqRCxJQUFJbHhDLEVBQVExSixLQUNaNkYsR0FBUSswQyxFQUFnQnR3QixRQUFRc0osR0FBZ0JLLEtBQU0saURBQ3RELElBQUl5L0IsRUFBYzF6RCxLQUFLa25FLHNCQUFzQmYsa0JBQWtCdnJCLEdBa0MvRCxPQS9CQWwwQixFQUFjZ3RDLEVBQVlHLGVBQWUsU0FBVTU3QixFQUFVNjdCLEdBQ3pELEdBQUlBLEVBQU92YSxZQUFZbDVDLE9BQVMsRUFBRyxDQUMvQixJQUFJdW5DLEVBQWFsK0IsRUFBTXU5RCxjQUFjaHZDLEdBRWpDMlAsSUFDQWwrQixFQUFNdTlELGNBQWNodkMsR0FBWTJQLEVBQVdrVCxnQkFBZ0JnWixFQUFPdmEsWUFBYXFCLFFBTTNGOFksRUFBWW9QLGlCQUFpQnR4RCxTQUFRLFNBQVV5bUIsR0FDM0MsSUFBSTJQLEVBQWFsK0IsRUFBTXU5RCxjQUFjaHZDLEdBQ3JDLEdBQUsyUCxFQUFMLENBTUFsK0IsRUFBTXU5RCxjQUFjaHZDLEdBQVkyUCxFQUFXa1QsZ0JBQWdCOTFCLElBQW1CNGlCLEVBQVdnVCxpQkFHekZseEMsRUFBTWcvRCxtQkFBbUJ6d0MsR0FLekIsSUFBSTZ3QyxFQUFvQixJQUFJcHVCLEdBQVc5UyxFQUFXOW1DLE9BQVFtM0IsRUFBVStoQixHQUFjK3VCLHdCQUF5Qm5oQyxFQUFXbmIsZ0JBQ3RIL2lCLEVBQU04K0QsaUJBQWlCTSxPQUdwQjlvRSxLQUFLMm9FLFdBQVdsVixpQkFBaUJDLElBRzVDb1QsRUFBWXpuRSxVQUFVdXBFLGtCQUFvQixTQUFVaE0sR0FDaEQsSUFBSWx6RCxFQUFRMUosS0FDWjZGLElBQVMrMkQsRUFBWThHLE1BQU8seUNBQzVCLElBQUk1L0QsRUFBUTg0RCxFQUFZOEcsTUFDcEIzTixFQUFlaDBELFFBQVFDLFVBYzNCLE9BYkE0NkQsRUFBWTZHLFVBQVVqeUQsU0FBUSxTQUFVeW1CLEdBQ3BDODlCLEVBQWVBLEVBQWF2ekQsTUFBSyxXQUFjLE9BQU9nRCxFQUFNOUQsVUFBVWdJLE9BQU8sT0FBUSxHQUFRLFdBQ3pGLE9BQU9sRSxFQUFNL0MsWUFBWXpDLE1BQU0sU0FBVWlMLEdBRXJDLE9BQUl3RSxFQUFTelAsS0FBS2luRSxjQUFlaHZDLFdBQ3RCajRCLEtBQUtpbkUsY0FBY2h2QyxHQUMxQmo0QixLQUFLa25FLHNCQUFzQnZmLGFBQWExdkIsR0FDakMsQ0FBQyxFQUFjajRCLEtBQUsyb0UsV0FBV0ssYUFBYS93QyxFQUFVbjBCLEtBRTFELENBQUMsZUFJYml5RCxHQVVYK1EsRUFBWXpuRSxVQUFVOG9FLGtCQUFvQixXQUN0QyxPQUFPM2lFLEVBQU05RCxVQUFVMUIsVUFBTSxPQUFRLEdBQVEsV0FDekMsSUFBSWlwRSxFQUFzQi91QyxFQUMxQixPQUFPMTBCLEVBQU0vQyxZQUFZekMsTUFBTSxTQUFVaUwsR0FDckMsT0FBUUEsRUFBR2xJLE9BQ1AsS0FBSyxFQUNELE9BQUsvQyxLQUFLa3BFLHlCQUNWRCxFQUF1QmpwRSxLQUFLZ25FLGNBQWMzbUUsT0FBUyxFQUM3Q0wsS0FBS2duRSxjQUFjaG5FLEtBQUtnbkUsY0FBYzNtRSxPQUFTLEdBQUcwNEIsU0EvZ1kxRCxFQWloWVMsQ0FBQyxFQUFhLzRCLEtBQUs4K0MsV0FBV29XLGtCQUFrQitULEtBSmIsQ0FBQyxFQUFhLEdBSzVELEtBQUssRUFFRCxPQUFnQixRQURoQi91QyxFQUFRanZCLEVBQUdqSSxRQUNtQixDQUFDLEVBQWEsSUFDVixJQUE5QmhELEtBQUtnbkUsY0FBYzNtRSxRQUNuQkwsS0FBSzRuRSxZQUFZek0sV0FFZCxDQUFDLEVBQWEsSUFDekIsS0FBSyxFQUVELE9BREFuN0QsS0FBS21wRSxtQkFBbUJqdkMsR0FDakIsQ0FBQyxFQUFhbDZCLEtBQUttb0UscUJBQzlCLEtBQUssRUFDRGw5RCxFQUFHakksT0FDSGlJLEVBQUdsSSxNQUFRLEVBQ2YsS0FBSyxFQUlELE9BSEkvQyxLQUFLb3BFLDBCQUNMcHBFLEtBQUtxcEUsbUJBRUYsQ0FBQyxXQVM1QnZDLEVBQVl6bkUsVUFBVTZwRSxzQkFBd0IsV0FDMUMsT0FBUWxwRSxLQUFLcW5FLGlCQUFtQnJuRSxLQUFLZ25FLGNBQWMzbUUsT0FwZGxDLElBdWRyQnltRSxFQUFZem5FLFVBQVVpcUUsa0JBQW9CLFdBQ3RDLE9BQU90cEUsS0FBS2duRSxjQUFjM21FLFFBTTlCeW1FLEVBQVl6bkUsVUFBVThwRSxtQkFBcUIsU0FBVWp2QyxHQUNqRHIwQixFQUFPN0YsS0FBS2twRSx3QkFBeUIsbURBQ3JDbHBFLEtBQUtnbkUsY0FBY3ZqRSxLQUFLeTJCLEdBQ3BCbDZCLEtBQUs0bkUsWUFBWTdNLFVBQVkvNkQsS0FBSzRuRSxZQUFZMkIsbUJBQzlDdnBFLEtBQUs0bkUsWUFBWWpLLGVBQWV6akMsRUFBTWhCLFlBRzlDNHRDLEVBQVl6bkUsVUFBVStwRSx1QkFBeUIsV0FDM0MsT0FBUXBwRSxLQUFLcW5FLGtCQUNScm5FLEtBQUs0bkUsWUFBWWpOLGFBQ2xCMzZELEtBQUtnbkUsY0FBYzNtRSxPQUFTLEdBRXBDeW1FLEVBQVl6bkUsVUFBVWdxRSxpQkFBbUIsV0FDckN4akUsRUFBTzdGLEtBQUtvcEUseUJBQTBCLHFFQUN0Q3BwRSxLQUFLNG5FLFlBQVl2M0MsU0FFckJ5MkMsRUFBWXpuRSxVQUFVd29FLGtCQUFvQixXQUN0QyxPQUFPcmlFLEVBQU05RCxVQUFVMUIsVUFBTSxPQUFRLEdBQVEsV0FDekMsT0FBT3dGLEVBQU0vQyxZQUFZekMsTUFBTSxTQUFVaUwsR0FFckMsT0FEQWpMLEtBQUs0bkUsWUFBWTFKLGlCQUNWLENBQUMsVUFJcEI0SSxFQUFZem5FLFVBQVUwb0UseUJBQTJCLFdBQzdDLElBQUlyK0QsRUFBUTFKLEtBRVosT0FBT0EsS0FBSzgrQyxXQUNQemMsbUJBQW1CcmlDLEtBQUs0bkUsWUFBWTNsQyxpQkFDcEN6L0IsTUFBSyxXQUVOLElBQUssSUFBSW1JLEVBQUssRUFBR00sRUFBS3ZCLEVBQU1zOUQsY0FBZXI4RCxFQUFLTSxFQUFHNUssT0FBUXNLLElBQU0sQ0FDN0QsSUFBSXV2QixFQUFRanZCLEVBQUdOLEdBQ2ZqQixFQUFNaytELFlBQVlqSyxlQUFlempDLEVBQU1oQixlQUcxQ3B2QixNQUFNdzFDLEtBRWZ3bkIsRUFBWXpuRSxVQUFVMitELGlCQUFtQixTQUFVN2pDLEVBQWU5USxHQUM5RCxJQUFJM2YsRUFBUTFKLEtBR1o2RixFQUFPN0YsS0FBS2duRSxjQUFjM21FLE9BQVMsRUFBRyx1Q0FDdEMsSUFBSTY1QixFQUFRbDZCLEtBQUtnbkUsY0FBY2xpRSxRQUMzQnMrQyxFQUFVbnBCLEdBQW9CN2tCLEtBQUs4a0IsRUFBT0MsRUFBZTlRLEVBQVNycEIsS0FBSzRuRSxZQUFZM2xDLGlCQUN2RixPQUFPamlDLEtBQUsyb0UsV0FBV2EscUJBQXFCcG1CLEdBQVM1Z0QsTUFBSyxXQUd0RCxPQUFPa0gsRUFBTXkrRCx3QkFHckJyQixFQUFZem5FLFVBQVV5b0UsbUJBQXFCLFNBQVVoa0UsR0FDakQsT0FBTzBCLEVBQU05RCxVQUFVMUIsVUFBTSxPQUFRLEdBQVEsV0FDekMsSUFDSTBKLEVBQVExSixLQUNaLE9BQU93RixFQUFNL0MsWUFBWXpDLE1BQU0sU0FBVWlMLEdBUXJDLFlBUGMxQixJQUFWekYsR0FHQStCLEdBQVE3RixLQUFLb3BFLHlCQUEwQiwyREFJdkN0bEUsR0FBUzlELEtBQUtnbkUsY0FBYzNtRSxPQUFTLFFBQ3JCLEVBV1QsQ0FBQyxHQVZKTCxLQUFLNG5FLFlBQVkyQixrQkFFRHZwRSxLQUFLeXBFLGlCQUFpQjNsRSxHQU10QjlELEtBQUswcEUscUJBQXFCNWxFLElBRVZ0QixNQUFLLFdBRzdCa0gsRUFBTTAvRCwwQkFDTjEvRCxFQUFNMi9ELHdCQUlmLENBQUMsVUFJcEJ2QyxFQUFZem5FLFVBQVVxcUUscUJBQXVCLFNBQVU1bEUsR0FDbkQsT0FBTzBCLEVBQU05RCxVQUFVMUIsVUFBTSxPQUFRLEdBQVEsV0FDekMsT0FBT3dGLEVBQU0vQyxZQUFZekMsTUFBTSxTQUFVaUwsR0FJckMsT0FBSTQxRCxHQUFpQi84RCxFQUFNc0csT0FDdkJ1TixFQUFNa3ZELEdBQVcseUVBQTBFN21FLEtBQUs0bkUsWUFBWTNsQyxpQkFDNUdqaUMsS0FBSzRuRSxZQUFZM2xDLGdCQUFrQmpkLElBQzVCLENBQUMsRUFBY2hsQixLQUFLOCtDLFdBQ2xCemMsbUJBQW1CcmQsS0FDbkJsYixNQUFNdzFDLE1BRVosQ0FBQyxVQUlwQnduQixFQUFZem5FLFVBQVVvcUUsaUJBQW1CLFNBQVUzbEUsR0FDL0MsT0FBTzBCLEVBQU05RCxVQUFVMUIsVUFBTSxPQUFRLEdBQVEsV0FDekMsSUFBSWs2QixFQUNBeHdCLEVBQVExSixLQUNaLE9BQU93RixFQUFNL0MsWUFBWXpDLE1BQU0sU0FBVWlMLEdBR3JDLE9BN3FETDQxRCxHQURvQnoyRCxFQThxRFd0RyxFQUFNc0csT0E3cURYQSxJQUFTNmEsRUFBS1ksU0E4cUQvQnFVLEVBQVFsNkIsS0FBS2duRSxjQUFjbGlFLFFBSTNCOUUsS0FBSzRuRSxZQUFZMU0saUJBQ1YsQ0FBQyxFQUFjbDdELEtBQUsyb0UsV0FDbEJnQixrQkFBa0J6dkMsRUFBTW5CLFFBQVNqMUIsR0FDakN0QixNQUFLLFdBR04sT0FBT2tILEVBQU15K0QseUJBR2xCLENBQUMsR0E1ckR4QixJQUErQi85RCxTQWdzRDNCMDhELEVBQVl6bkUsVUFBVXVxRSxrQkFBb0IsV0FDdEMsT0FBTyxJQUFJanRELEdBQVkzYyxLQUFLKytELFlBRWhDK0gsRUFBWXpuRSxVQUFVaW9FLGVBQWlCLFdBQ25DLE9BQU85aEUsRUFBTTlELFVBQVUxQixVQUFNLE9BQVEsR0FBUSxXQUN6QyxPQUFPd0YsRUFBTS9DLFlBQVl6QyxNQUFNLFNBQVVpTCxHQUNyQyxPQUFRQSxFQUFHbEksT0FDUCxLQUFLLEVBRUQsT0FEQS9DLEtBQUs4NUMsZ0JBQWlCLEVBQ2YsQ0FBQyxFQUFhOTVDLEtBQUtxb0UsMEJBQzlCLEtBQUssRUFHRCxPQUZBcDlELEVBQUdqSSxPQUNIaEQsS0FBS3VuRSxtQkFBbUJyekQsSUFBSTRsRCxHQUFZaUcsU0FDakMsQ0FBQyxFQUFhLy9ELEtBQUtnb0UsaUJBQzlCLEtBQUssRUFFRCxPQURBLzhELEVBQUdqSSxPQUNJLENBQUMsV0FLNUI4akUsRUFBWXpuRSxVQUFVd3FFLHVCQUF5QixXQUMzQyxPQUFPcmtFLEVBQU05RCxVQUFVMUIsVUFBTSxPQUFRLEdBQVEsV0FDekMsT0FBT3dGLEVBQU0vQyxZQUFZekMsTUFBTSxTQUFVaUwsR0FDckMsT0FBUUEsRUFBR2xJLE9BQ1AsS0FBSyxFQUNELE9BQUsvQyxLQUFLcW5FLGlCQUlWMXZELEVBQU1rdkQsR0FBVyxxREFDVixDQUFDLEVBQWE3bUUsS0FBS3NuRSxtQkFMUSxDQUFDLEVBQWEsR0FNcEQsS0FBSyxFQUNEcjhELEVBQUdqSSxPQUNIaUksRUFBR2xJLE1BQVEsRUFDZixLQUFLLEVBQUcsTUFBTyxDQUFDLFdBUWhDK2pFLEVBQVl6bkUsVUFBVXlxRSxrQkFBb0IsU0FBVXhvQixHQUNoRCxPQUFPOTdDLEVBQU05RCxVQUFVMUIsVUFBTSxPQUFRLEdBQVEsV0FDekMsT0FBT3dGLEVBQU0vQyxZQUFZekMsTUFBTSxTQUFVaUwsR0FDckMsT0FBUUEsRUFBR2xJLE9BQ1AsS0FBSyxFQUVELE9BREEvQyxLQUFLc2hELFVBQVlBLEVBQ1hBLEdBQWF0aEQsS0FBSzg1QyxlQUNqQixDQUFDLEVBQWE5NUMsS0FBS2dvRSxpQkFEc0IsQ0FBQyxFQUFhLEdBRWxFLEtBQUssRUFFRCxPQURBLzhELEVBQUdqSSxPQUNJLENBQUMsRUFBYSxHQUN6QixLQUFLLEVBQ0QsT0FBTXMrQyxFQUFrQixDQUFDLEVBQWEsR0FDL0IsQ0FBQyxFQUFhdGhELEtBQUtxb0UsMEJBQzlCLEtBQUssRUFDRHA5RCxFQUFHakksT0FDSGhELEtBQUt1bkUsbUJBQW1CcnpELElBQUk0bEQsR0FBWWlHLFNBQ3hDOTBELEVBQUdsSSxNQUFRLEVBQ2YsS0FBSyxFQUFHLE1BQU8sQ0FBQyxXQUt6QitqRSxFQTdvQnFCLEdBb3FCNUJpRCxHQUEwQixXQUMxQixTQUFTQSxFQUFTQyxFQUFVQyxHQUl4QixHQUhBaGpELEVBQTBCLFdBQVk3bUIsVUFBVyxHQUNqRG1uQixFQUFnQixXQUFZLFNBQVUsRUFBR3lpRCxHQUN6Q3ppRCxFQUFnQixXQUFZLFNBQVUsRUFBRzBpRCxJQUNwQzdoQixTQUFTNGhCLElBQWFBLEdBQVksSUFBTUEsRUFBVyxHQUNwRCxNQUFNLElBQUk5akQsRUFBZWpCLEVBQUtJLGlCQUFrQiwwREFBNEQya0QsR0FFaEgsSUFBSzVoQixTQUFTNmhCLElBQWNBLEdBQWEsS0FBT0EsRUFBWSxJQUN4RCxNQUFNLElBQUkvakQsRUFBZWpCLEVBQUtJLGlCQUFrQiw2REFBK0Q0a0QsR0FFbkhqcUUsS0FBS2txRSxLQUFPRixFQUNaaHFFLEtBQUttcUUsTUFBUUYsRUFpQ2pCLE9BL0JBOXJFLE9BQU9DLGVBQWUyckUsRUFBUzFxRSxVQUFXLFdBQVksQ0FJbERmLElBQUssV0FDRCxPQUFPMEIsS0FBS2txRSxNQUVoQjdyRSxZQUFZLEVBQ1prWixjQUFjLElBRWxCcFosT0FBT0MsZUFBZTJyRSxFQUFTMXFFLFVBQVcsWUFBYSxDQUluRGYsSUFBSyxXQUNELE9BQU8wQixLQUFLbXFFLE9BRWhCOXJFLFlBQVksRUFDWmtaLGNBQWMsSUFFbEJ3eUQsRUFBUzFxRSxVQUFVaXJCLFFBQVUsU0FBVWlCLEdBQ25DLE9BQU92ckIsS0FBS2txRSxPQUFTMytDLEVBQU0yK0MsTUFBUWxxRSxLQUFLbXFFLFFBQVU1K0MsRUFBTTQrQyxPQU01REosRUFBUzFxRSxVQUFVbXNCLFdBQWEsU0FBVUQsR0FDdEMsT0FBUXJCLEVBQW9CbHFCLEtBQUtrcUUsS0FBTTMrQyxFQUFNMitDLE9BQ3pDaGdELEVBQW9CbHFCLEtBQUttcUUsTUFBTzUrQyxFQUFNNCtDLFFBRXZDSixFQTdDa0IsR0FpRXpCSyxHQUEwQyxXQUMxQyxTQUFTQSxLQWVULE9BYkFBLEVBQXlCL3FFLFVBQVVxNkIsaUJBQW1CLFNBQVVwTixFQUFlME0sR0FDM0UsT0FBTyxJQUFJK1YsR0FBcUIvVixFQUFnQjFNLElBRXBEODlDLEVBQXlCL3FFLFVBQVU4NUIsc0JBQXdCLFNBQVU3TSxFQUFlKzlDLEdBQ2hGLE9BQU9BLEdBRVhELEVBQXlCL3FFLFVBQVUydEMsaUJBQW1CLFNBQVUxZ0IsR0FDNUQsT0FBTyxNQUVYODlDLEVBQXlCL3FFLFVBQVVpckIsUUFBVSxTQUFVaUIsR0FDbkQsT0FBT0EsYUFBaUI2K0MsR0FFNUJBLEVBQXlCajJELFNBQVcsSUFBSWkyRCxFQUNqQ0EsRUFoQmtDLEdBbUJ6Q0UsR0FBOEMsV0FDOUMsU0FBU0EsRUFBNkJDLEdBQ2xDdnFFLEtBQUt1cUUsU0FBV0EsRUErQnBCLE9BN0JBRCxFQUE2QmpyRSxVQUFVcTZCLGlCQUFtQixTQUFVcE4sRUFBZTBNLEdBQy9FLE9BQU9oNUIsS0FBS00sTUFBTWdzQixJQUV0QmcrQyxFQUE2QmpyRSxVQUFVODVCLHNCQUF3QixTQUFVN00sRUFBZSs5QyxHQUlwRixPQUFPcnFFLEtBQUtNLE1BQU1nc0IsSUFFdEJnK0MsRUFBNkJqckUsVUFBVWlCLE1BQVEsU0FBVWdzQixHQU9yRCxJQU5BLElBQUlocUIsRUFBU2tvRSxHQUF3QmwrQyxHQUNqQy9hLEVBQVUsU0FBVWs1RCxHQUNmbm9FLEVBQU9vaUQsTUFBSyxTQUFVMzdCLEdBQVcsT0FBT0EsRUFBUXVCLFFBQVFtZ0QsT0FDekRub0UsRUFBT21CLEtBQUtnbkUsSUFHWDkvRCxFQUFLLEVBQUdNLEVBQUtqTCxLQUFLdXFFLFNBQVU1L0QsRUFBS00sRUFBRzVLLE9BQVFzSyxJQUFNLENBRXZENEcsRUFEY3RHLEVBQUdOLElBR3JCLE9BQU8sSUFBSW9sQyxHQUFXenRDLElBRTFCZ29FLEVBQTZCanJFLFVBQVUydEMsaUJBQW1CLFNBQVUxZ0IsR0FDaEUsT0FBTyxNQUVYZytDLEVBQTZCanJFLFVBQVVpckIsUUFBVSxTQUFVaUIsR0FDdkQsT0FBUUEsYUFBaUIrK0MsR0FDckJqZ0QsRUFBWWtCLEVBQU1nL0MsU0FBVXZxRSxLQUFLdXFFLFdBRWxDRCxFQWpDc0MsR0FvQzdDSSxHQUErQyxXQUMvQyxTQUFTQSxFQUE4QkgsR0FDbkN2cUUsS0FBS3VxRSxTQUFXQSxFQTZCcEIsT0EzQkFHLEVBQThCcnJFLFVBQVVxNkIsaUJBQW1CLFNBQVVwTixFQUFlME0sR0FDaEYsT0FBT2g1QixLQUFLTSxNQUFNZ3NCLElBRXRCbytDLEVBQThCcnJFLFVBQVU4NUIsc0JBQXdCLFNBQVU3TSxFQUFlKzlDLEdBSXJGLE9BQU9ycUUsS0FBS00sTUFBTWdzQixJQUV0Qm8rQyxFQUE4QnJyRSxVQUFVaUIsTUFBUSxTQUFVZ3NCLEdBS3RELElBSkEsSUFBSWhxQixFQUFTa29FLEdBQXdCbCtDLEdBQ2pDcStDLEVBQVUsU0FBVUMsR0FDcEJ0b0UsRUFBU0EsRUFBT2lULFFBQU8sU0FBVXdULEdBQVcsT0FBUUEsRUFBUXVCLFFBQVFzZ0QsT0FFL0RqZ0UsRUFBSyxFQUFHTSxFQUFLakwsS0FBS3VxRSxTQUFVNS9ELEVBQUtNLEVBQUc1SyxPQUFRc0ssSUFBTSxDQUV2RGdnRSxFQURlMS9ELEVBQUdOLElBR3RCLE9BQU8sSUFBSW9sQyxHQUFXenRDLElBRTFCb29FLEVBQThCcnJFLFVBQVUydEMsaUJBQW1CLFNBQVUxZ0IsR0FDakUsT0FBTyxNQUVYbytDLEVBQThCcnJFLFVBQVVpckIsUUFBVSxTQUFVaUIsR0FDeEQsT0FBUUEsYUFBaUJtL0MsR0FDckJyZ0QsRUFBWWtCLEVBQU1nL0MsU0FBVXZxRSxLQUFLdXFFLFdBRWxDRyxFQS9CdUMsR0F1QzlDRyxHQUFvRCxXQUNwRCxTQUFTQSxFQUFtQ0MsR0FDeEM5cUUsS0FBSzhxRSxRQUFVQSxFQW9DbkIsT0FsQ0FELEVBQW1DeHJFLFVBQVVxNkIsaUJBQW1CLFNBQVVwTixFQUFlME0sR0FDckYsSUFBSWs2QixFQUFZbHpELEtBQUtndEMsaUJBQWlCMWdCLEdBTXRDLEdBQUk0bUMsYUFBcUIxa0IsSUFDckJ4dUMsS0FBSzhxRSxtQkFBbUJ0OEIsR0FBYyxDQUN0QyxJQUFJdThCLEVBQU03WCxFQUFVbGxCLGNBQWdCaHVDLEtBQUs4cUUsUUFBUTk4QixjQUNqRCxPQUFPLElBQUlRLEdBQWF1OEIsR0FHcEJBLEVBQU03WCxFQUFVbGxCLGNBQWdCaHVDLEtBQUs4cUUsUUFBUTk4QixjQUNqRCxPQUFPLElBQUlTLEdBQVlzOEIsSUFHL0JGLEVBQW1DeHJFLFVBQVU4NUIsc0JBQXdCLFNBQVU3TSxFQUFlKzlDLEdBRTFGLE9BREF4a0UsRUFBMkIsT0FBcEJ3a0UsRUFBMEIsNERBQzFCQSxHQU1YUSxFQUFtQ3hyRSxVQUFVMnRDLGlCQUFtQixTQUFVMWdCLEdBQ3RFLE9BQU9BLGFBQXlCZ2lCLEdBQzFCaGlCLEVBQ0EsSUFBSWtpQixHQUFhLElBRTNCcThCLEVBQW1DeHJFLFVBQVVpckIsUUFBVSxTQUFVaUIsR0FDN0QsT0FBUUEsYUFBaUJzL0MsR0FDckI3cUUsS0FBSzhxRSxRQUFReGdELFFBQVFpQixFQUFNdS9DLFVBRTVCRCxFQXRDNEMsR0F3Q3ZELFNBQVNMLEdBQXdCOXJFLEdBQzdCLE9BQUlBLGFBQWlCcXhDLEdBQ1ZyeEMsRUFBTXN2QyxjQUFjNWlDLFFBSXBCOzs7Ozs7Ozs7Ozs7Ozs7O0dBb0JmLElBNEJRNC9ELEdBTUE5bkUsR0FsQ0orbkUsR0FBaUMsV0FFakMsU0FBU0EsRUFBZ0I5c0QsR0FDckJuZSxLQUFLbWUsTUFBUUEsRUFLakIsT0FIQThzRCxFQUFnQjVyRSxVQUFVaXJCLFFBQVUsU0FBVWlCLEdBQzFDLE9BQU9BLEdBQVNBLEVBQU1wTixRQUFVbmUsS0FBS21lLE9BRWxDOHNELEVBUnlCLEdBMkJoQ0MsS0FDSUYsR0FBTyxJQUNOaGhCLEdBQVVDLFVBQVVqc0QsTUFBUSxZQUNqQ2d0RSxHQUFLaGhCLEdBQVU4QixXQUFXOXRELE1BQVEsYUFDM0JndEUsSUFFUEcsS0FDSWpvRSxHQUFNLElBQ05rcEQsR0FBU0MsVUFBVXJ1RCxNQUFRLFlBQy9Ca0YsR0FBSWtwRCxHQUFTRSxtQkFBbUJ0dUQsTUFBUSxxQkFDeENrRixHQUFJa3BELEdBQVNLLGFBQWF6dUQsTUFBUSxlQUNsQ2tGLEdBQUlrcEQsR0FBU0ksc0JBQXNCeHVELE1BQVEsd0JBQzNDa0YsR0FBSWtwRCxHQUFTRyxNQUFNdnVELE1BQVEsUUFDM0JrRixHQUFJa3BELEdBQVNNLGVBQWUxdUQsTUFBUSxpQkFDcENrRixHQUFJa3BELEdBQVNPLEdBQUczdUQsTUFBUSxLQUN4QmtGLEdBQUlrcEQsR0FBU1EsbUJBQW1CNXVELE1BQVEscUJBQ2pDa0YsSUFHUGtvRSxHQUFjLElBQUlDLE9BQU87Ozs7Ozs7Ozs7Ozs7Ozs7R0FDN0IsU0FBU0MsR0FBYzVzRSxFQUFPdXFCLEdBQzFCcGpCLEdBQVF3aUQsR0FBa0IzcEQsR0FBUXVxQixFQUFjLGVBRXBELFNBQVNzaUQsR0FBVzdzRSxHQUVoQixNQUFxQixpQkFBVkEsRUFDQUEsRUFFZSxpQkFBVkEsRUFDTGtvQixPQUFPbG9CLEdBR1BtbUIsRUFBSyxlQUFpQm5tQixHQVNyQyxJQUFJOHNFLEdBQXFDLFdBQ3JDLFNBQVNBLEVBQW9CNy9DLEVBQVlyWCxHQUNyQ3RVLEtBQUsyckIsV0FBYUEsRUFDbEIzckIsS0FBS3NVLFFBQVVBLEVBb2xDbkIsT0FsbENBazNELEVBQW9CbnNFLFVBQVUybEIsZ0JBQWtCLFdBQzVDLE9BQUlobEIsS0FBS3NVLFFBQVFtM0QsY0FDTixHQUdBLElBQUloaEQsV0FBVyxJQUc5QitnRCxFQUFvQm5zRSxVQUFVcXNFLDBCQUE0QixTQUFVQyxHQUdoRSxPQUFPQSxHQUVYSCxFQUFvQm5zRSxVQUFVdXNFLGNBQWdCLFNBQVV4RSxHQUNwRCxJQUFJaDlELE9BQXVCYixJQUFoQjY5RCxFQUFPaDlELEtBQ1o2YSxFQUFLRyxRQUNMMDdDLEdBQW1Cc0csRUFBT2g5RCxNQUNoQyxPQUFPLElBQUk4YixFQUFlOWIsRUFBTWc5RCxFQUFPcmhFLFNBQVcsS0FVdER5bEUsRUFBb0Juc0UsVUFBVXdzRSxhQUFlLFNBQVV2MEQsR0FDbkQsT0FBSXRYLEtBQUtzVSxRQUFRbTNELGVBQWlCcGpCLEdBQWtCL3dDLEdBQ3pDQSxFQU1BLENBQUU1WSxNQUFPNFksSUFVeEJrMEQsRUFBb0Juc0UsVUFBVXlzRSxlQUFpQixTQUFVeDBELEdBQ3JELElBQUloVixFQVdKLE9BQU8rbEQsR0FQSC9sRCxFQUhlLGlCQUFSZ1YsRUFHRUEsRUFBSTVZLE1BS0o0WSxHQUVzQixLQUFPaFYsR0FTOUNrcEUsRUFBb0Juc0UsVUFBVTgwQixZQUFjLFNBQVVOLEdBQ2xELE9BQUk3ekIsS0FBS3NVLFFBQVFtM0QsY0FJRyxJQUFJcGlFLEtBQXlCLElBQXBCd3FCLEVBQVVULFNBQWdCOVksY0FFbkJoUCxRQUFRLFFBQVMsSUFBSUEsUUFBUSxJQUFLLElBR3pDLEtBRFYsWUFBY3VvQixFQUFVUixhQUFham9CLE9BQU8sR0FDbEIsSUFHbEMsQ0FDSGdvQixRQUFTLEdBQUtTLEVBQVVULFFBQ3hCMjRDLE1BQU9sNEMsRUFBVVIsY0FLN0JtNEMsRUFBb0Juc0UsVUFBVTAwQixjQUFnQixTQUFVUCxHQUlwRCxHQUFvQixpQkFBVEEsRUFJUCxPQUFPeHpCLEtBQUtnc0Usa0JBQWtCeDRDLEdBRzlCM3RCLElBQVMydEIsRUFBTSxtREFJZixJQUFJSixFQUFVbTRDLEdBQVcvM0MsRUFBS0osU0FBVyxLQUNyQzI0QyxFQUFRdjRDLEVBQUt1NEMsT0FBUyxFQUMxQixPQUFPLElBQUk1NEMsR0FBVUMsRUFBUzI0QyxJQUd0Q1AsRUFBb0Juc0UsVUFBVTJzRSxrQkFBb0IsU0FBVUMsR0FJeEQsSUFBSUYsRUFBUSxFQUNSRyxFQUFXZCxHQUFZOWhELEtBQUsyaUQsR0FFaEMsR0FEQXBtRSxJQUFTcW1FLEVBQVUsc0JBQXdCRCxHQUN2Q0MsRUFBUyxHQUFJLENBRWIsSUFBSUMsRUFBVUQsRUFBUyxHQUN2QkMsR0FBV0EsRUFBVSxhQUFhQyxPQUFPLEVBQUcsR0FDNUNMLEVBQVFubEQsT0FBT3VsRCxHQUduQixJQUFJMzRDLEVBQU8sSUFBSW5xQixLQUFLNGlFLEdBQ2hCNzRDLEVBQVV4aUIsS0FBS0MsTUFBTTJpQixFQUFLbHFCLFVBQVksS0FDMUMsT0FBTyxJQUFJNnBCLEdBQVVDLEVBQVMyNEMsSUFTbENQLEVBQW9CbnNFLFVBQVVndEUsUUFBVSxTQUFVbmtFLEdBQzlDLE9BQUlsSSxLQUFLc1UsUUFBUW0zRCxjQUNOdmpFLEVBQU1rakIsV0FJTnByQixLQUFLMHJFLDBCQUEwQnhqRSxFQUFNbWpCLGlCQVFwRG1nRCxFQUFvQm5zRSxVQUFVaXRFLFNBQVcsU0FBVUMsR0FDL0MsTUFBb0IsaUJBQVRBLEdBQ1AxbUUsRUFBTzdGLEtBQUtzVSxRQUFRbTNELGNBQWUsMkVBQzVCNWdELEdBQUtHLGlCQUFpQnVoRCxLQUc3QjFtRSxHQUFRN0YsS0FBS3NVLFFBQVFtM0QsY0FBZSwyRUFDN0I1Z0QsR0FBS0ksZUFBZXNoRCxLQUduQ2YsRUFBb0Juc0UsVUFBVWczQyxVQUFZLFNBQVUvL0IsR0FDaEQsT0FBT3RXLEtBQUttMEIsWUFBWTdkLEVBQVE2ZCxnQkFFcENxM0MsRUFBb0Juc0UsVUFBVSsyQyxZQUFjLFNBQVU5L0IsR0FFbEQsT0FEQXpRLElBQVN5USxFQUFTLGdEQUNYc2QsR0FBZ0JHLGNBQWMvekIsS0FBSyt6QixjQUFjemQsS0FFNURrMUQsRUFBb0Juc0UsVUFBVW10RSxlQUFpQixTQUFVN2dELEVBQVk4QyxHQUNqRSxPQUFPenVCLEtBQUt5c0UseUJBQXlCOWdELEdBQ2hDMEIsTUFBTSxhQUNOQSxNQUFNb0IsR0FDTkYsbUJBRVRpOUMsRUFBb0Juc0UsVUFBVXF0RSxpQkFBbUIsU0FBVTF1RSxHQUN2RCxJQUFJMnVFLEVBQVdyK0MsR0FBYUUsV0FBV3h3QixHQUV2QyxPQURBNkgsRUFBTzdGLEtBQUs0c0Usb0JBQW9CRCxHQUFXLG9DQUFzQ0EsRUFBU25oRSxZQUNuRm1oRSxHQUVYbkIsRUFBb0Juc0UsVUFBVXMvRCxPQUFTLFNBQVUzL0QsR0FDN0MsT0FBT2dCLEtBQUt3c0UsZUFBZXhzRSxLQUFLMnJCLFdBQVkzc0IsRUFBSXl2QixPQUVwRCs4QyxFQUFvQm5zRSxVQUFVd3RFLFNBQVcsU0FBVTd1RSxHQUMvQyxJQUFJMnVFLEVBQVczc0UsS0FBSzBzRSxpQkFBaUIxdUUsR0FVckMsT0FUQTZILEVBQU84bUUsRUFBU3J1RSxJQUFJLEtBQU8wQixLQUFLMnJCLFdBQVdPLFVBQVcsb0RBQ2xEeWdELEVBQVNydUUsSUFBSSxHQUNiLE9BQ0EwQixLQUFLMnJCLFdBQVdPLFdBQ3BCcm1CLEdBQVM4bUUsRUFBU3J1RSxJQUFJLEtBQU8wQixLQUFLMnJCLFdBQVdRLFVBQ3pDd2dELEVBQVNydUUsSUFBSSxLQUFPMEIsS0FBSzJyQixXQUFXUSxTQUFVLHFEQUM5Q3dnRCxFQUFTcnVFLElBQUksR0FDYixPQUNBMEIsS0FBSzJyQixXQUFXUSxVQUNiLElBQUlpRCxHQUFZcHZCLEtBQUs4c0UsaUNBQWlDSCxLQUVqRW5CLEVBQW9CbnNFLFVBQVUwdEUsWUFBYyxTQUFVdCtDLEdBQ2xELE9BQU96dUIsS0FBS3dzRSxlQUFleHNFLEtBQUsyckIsV0FBWThDLElBRWhEKzhDLEVBQW9CbnNFLFVBQVUydEUsY0FBZ0IsU0FBVWh2RSxHQUNwRCxJQUFJaXZFLEVBQWVqdEUsS0FBSzBzRSxpQkFBaUIxdUUsR0FLekMsT0FBNEIsSUFBeEJpdkUsRUFBYTVzRSxPQUNOaXVCLEdBQWFJLFdBRWpCMXVCLEtBQUs4c0UsaUNBQWlDRyxJQUVqRDl1RSxPQUFPQyxlQUFlb3RFLEVBQW9CbnNFLFVBQVcsb0JBQXFCLENBQ3RFZixJQUFLLFdBT0QsT0FOVyxJQUFJZ3dCLEdBQWEsQ0FDeEIsV0FDQXR1QixLQUFLMnJCLFdBQVdPLFVBQ2hCLFlBQ0Fsc0IsS0FBSzJyQixXQUFXUSxXQUVSb0MsbUJBRWhCbHdCLFlBQVksRUFDWmtaLGNBQWMsSUFFbEJpMEQsRUFBb0Juc0UsVUFBVW90RSx5QkFBMkIsU0FBVTlnRCxHQUMvRCxPQUFPLElBQUkyQyxHQUFhLENBQ3BCLFdBQ0EzQyxFQUFXTyxVQUNYLFlBQ0FQLEVBQVdRLFlBR25CcS9DLEVBQW9CbnNFLFVBQVV5dEUsaUNBQW1DLFNBQVVHLEdBRXZFLE9BREFwbkUsRUFBT29uRSxFQUFhNXNFLE9BQVMsR0FBNkIsY0FBeEI0c0UsRUFBYTN1RSxJQUFJLEdBQW9CLG9DQUFzQzJ1RSxFQUFhemhFLFlBQ25IeWhFLEVBQWF2L0MsU0FBUyxJQUVqQzg5QyxFQUFvQm5zRSxVQUFVdXRFLG9CQUFzQixTQUFVbitDLEdBRTFELE9BQVFBLEVBQUtwdUIsUUFBVSxHQUNILGFBQWhCb3VCLEVBQUtud0IsSUFBSSxJQUNPLGNBQWhCbXdCLEVBQUtud0IsSUFBSSxJQUVqQmt0RSxFQUFvQm5zRSxVQUFVNnRFLFFBQVUsU0FBVTUxRCxHQUM5QyxHQUFJQSxhQUFleTJCLEdBQ2YsTUFBTyxDQUFFby9CLFVBQVcsY0FFbkIsR0FBSTcxRCxhQUFlNDJCLEdBQ3BCLE1BQU8sQ0FBRWsvQixhQUFjOTFELEVBQUk1WSxTQUUxQixHQUFJNFksYUFBZWszQixHQUNwQixNQUFPLENBQUU2K0IsYUFBYyxHQUFLLzFELEVBQUk1WSxTQUUvQixHQUFJNFksYUFBZW0zQixHQUFhLENBQ2pDLElBQUk2K0IsRUFBY2gyRCxFQUFJNVksUUFDdEIsR0FBSXNCLEtBQUtzVSxRQUFRbTNELGNBQWUsQ0FJNUIsR0FBSTVrRCxNQUFNeW1ELEdBQ04sTUFBTyxDQUFFQSxZQUFhLE9BRXJCLEdBQUlBLElBQWdCMStCLElBQ3JCLE1BQU8sQ0FBRTArQixZQUFhLFlBRXJCLEdBQUlBLEtBQWlCMStCLElBQ3RCLE1BQU8sQ0FBRTArQixZQUFhLGFBRzlCLE1BQU8sQ0FBRUEsWUFBYWgyRCxFQUFJNVksU0FFekIsT0FBSTRZLGFBQWV1M0IsR0FDYixDQUFFMCtCLFlBQWFqMkQsRUFBSTVZLFNBRXJCNFksYUFBZTIwQixHQUNiLENBQUU2RSxTQUFVOXdDLEtBQUt3dEUsV0FBV2wyRCxJQUU5QkEsYUFBZXk0QixHQUNiLENBQUV1ZCxXQUFZdHRELEtBQUt5dEUsYUFBYW4yRCxJQUVsQ0EsYUFBZXczQixHQUNiLENBQ0g0K0IsZUFBZ0IxdEUsS0FBS20wQixZQUFZN2MsRUFBSTAyQixnQkFHcEMxMkIsYUFBZTQzQixHQUNiLENBQ0h5K0IsY0FBZSxDQUNYM0QsU0FBVTF5RCxFQUFJNVksUUFBUXNyRSxTQUN0QkMsVUFBVzN5RCxFQUFJNVksUUFBUXVyRSxZQUkxQjN5RCxhQUFlMDNCLEdBQ2IsQ0FDSDQrQixXQUFZNXRFLEtBQUtxc0UsUUFBUS8wRCxFQUFJNVksVUFHNUI0WSxhQUFlMjNCLEdBQ2IsQ0FDSDQrQixlQUFnQjd0RSxLQUFLd3NFLGVBQWVsMUQsRUFBSXFVLFdBQVlyVSxFQUFJdFksSUFBSXl2QixPQUl6RDVKLEVBQUssc0JBQXdCblosS0FBS3NHLFVBQVVzRixLQUczRGswRCxFQUFvQm5zRSxVQUFVeXVFLFVBQVksU0FBVTMvRCxHQUNoRCxJQUFJekUsRUFBUTFKLEtBQ1osR0FBSSxjQUFlbU8sRUFDZixPQUFPNC9CLEdBQVVFLFNBRWhCLEdBQUksaUJBQWtCOS9CLEVBQ3ZCLE9BQU8rL0IsR0FBYUMsR0FBR2hnQyxFQUFJaS9ELGNBRTFCLEdBQUksaUJBQWtCai9ELEVBQ3ZCLE9BQU8sSUFBSXFnQyxHQUFhKzhCLEdBQVdwOUQsRUFBSWsvRCxlQUV0QyxHQUFJLGdCQUFpQmwvRCxFQUFLLENBQzNCLEdBQUluTyxLQUFLc1UsUUFBUW0zRCxjQUFlLENBRTVCLEdBQXdCLFFBQXBCdDlELEVBQUltL0QsWUFDSixPQUFPNytCLEdBQVlDLElBRWxCLEdBQXdCLGFBQXBCdmdDLEVBQUltL0QsWUFDVCxPQUFPNytCLEdBQVk5TSxrQkFFbEIsR0FBd0IsY0FBcEJ4ekIsRUFBSW0vRCxZQUNULE9BQU83K0IsR0FBWS9NLGtCQUczQixPQUFPLElBQUkrTSxHQUFZdGdDLEVBQUltL0QsYUFFMUIsR0FBSSxnQkFBaUJuL0QsRUFDdEIsT0FBTyxJQUFJMGdDLEdBQVkxZ0MsRUFBSW8vRCxhQUUxQixHQUFJLGFBQWNwL0QsRUFDbkIsT0FBT25PLEtBQUsrdEUsV0FBVzUvRCxFQUFJMmlDLFNBQVNqSCxRQUFVLElBRTdDLEdBQUksZUFBZ0IxN0IsRUFBSyxDQUUxQm05RCxHQUFjbjlELEVBQUltL0MsV0FBWSxjQUM5QixJQUFJajRDLEVBQVNsSCxFQUFJbS9DLFdBQVdqNEMsUUFBVSxHQUN0QyxPQUFPLElBQUkwNkIsR0FBVzE2QixFQUFPcEUsS0FBSSxTQUFVNU4sR0FBSyxPQUFPcUcsRUFBTW9rRSxVQUFVenFFLE9BRXRFLEdBQUksbUJBQW9COEssRUFFekIsT0FEQW05RCxHQUFjbjlELEVBQUl1L0QsZUFBZ0Isa0JBQzNCLElBQUk1K0IsR0FBZTl1QyxLQUFLK3pCLGNBQWM1bEIsRUFBSXUvRCxpQkFFaEQsR0FBSSxrQkFBbUJ2L0QsRUFBSyxDQUM3Qm05RCxHQUFjbjlELEVBQUl3L0QsY0FBZSxpQkFDakMsSUFBSTNELEVBQVc3N0QsRUFBSXcvRCxjQUFjM0QsVUFBWSxFQUN6Q0MsRUFBWTk3RCxFQUFJdy9ELGNBQWMxRCxXQUFhLEVBQy9DLE9BQU8sSUFBSS82QixHQUFjLElBQUk2NkIsR0FBU0MsRUFBVUMsSUFFL0MsR0FBSSxlQUFnQjk3RCxFQUFLLENBQzFCbTlELEdBQWNuOUQsRUFBSXkvRCxXQUFZLGNBQzlCLElBQUlyQixFQUFPdnNFLEtBQUtzc0UsU0FBU24rRCxFQUFJeS9ELFlBQzdCLE9BQU8sSUFBSTUrQixHQUFVdTlCLEdBRXBCLEdBQUksbUJBQW9CcCtELEVBQUssQ0FDOUJtOUQsR0FBY245RCxFQUFJMC9ELGVBQWdCLGtCQUNsQyxJQUFJWixFQUFlanRFLEtBQUswc0UsaUJBQWlCditELEVBQUkwL0QsZ0JBQ3pDRyxFQUFPLElBQUkvaEQsR0FBV2doRCxFQUFhM3VFLElBQUksR0FBSTJ1RSxFQUFhM3VFLElBQUksSUFDNURVLEVBQU0sSUFBSW93QixHQUFZcHZCLEtBQUs4c0UsaUNBQWlDRyxJQUNoRSxPQUFPLElBQUloK0IsR0FBUysrQixFQUFNaHZFLEdBRzFCLE9BQU82bEIsRUFBSyx1QkFBeUJuWixLQUFLc0csVUFBVTdELEtBSTVEcTlELEVBQW9CbnNFLFVBQVU0dUUsbUJBQXFCLFNBQVVqdkUsRUFBSzZxQyxHQUM5RCxNQUFPLENBQ0g3ckMsS0FBTWdDLEtBQUsyK0QsT0FBTzMvRCxHQUNsQjZxQyxPQUFRN3BDLEtBQUtrdUUsU0FBU3JrQyxLQUc5QjJoQyxFQUFvQm5zRSxVQUFVaThDLFdBQWEsU0FBVWw4QixHQUVqRCxPQURBdlosR0FBUXVaLEVBQVNxc0Isa0JBQW1CLDZDQUM3QixDQUNIenRDLEtBQU1nQyxLQUFLMitELE9BQU92L0MsRUFBU3BnQixLQUMzQjZxQyxPQUFRN3BDLEtBQUtrdUUsU0FBUzl1RCxFQUFTMVUsUUFDL0JrZ0MsV0FBWTVxQyxLQUFLbTBCLFlBQVkvVSxFQUFTOUksUUFBUTZkLGlCQUd0RHEzQyxFQUFvQm5zRSxVQUFVODdDLGFBQWUsU0FBVS83QixFQUFVb3NCLEdBQzdELElBQUk5aEMsRUFBUTFKLEtBQ1JoQixFQUFNZ0IsS0FBSzZzRSxTQUFTenRELEVBQVNwaEIsTUFDN0JzWSxFQUFVdFcsS0FBS28yQyxZQUFZaDNCLEVBQVN3ckIsWUFDeEMsT0FBTyxJQUFJRyxHQUFTL3JDLEVBQUtzWCxFQUFTLENBQUVrMUIsd0JBQXlCQSxRQUF5QmppQyxFQUFXNlYsR0FBVSxTQUFVL2IsR0FBSyxPQUFPcUcsRUFBTW9rRSxVQUFVenFFLE9BRXJKbW9FLEVBQW9CbnNFLFVBQVU2dUUsU0FBVyxTQUFVcmtDLEdBQy9DLElBQUluZ0MsRUFBUTFKLEtBQ1JzQyxFQUFTLEdBSWIsT0FIQXVuQyxFQUFPcjRCLFNBQVEsU0FBVXhTLEVBQUtOLEdBQzFCNEQsRUFBT3RELEdBQU8wSyxFQUFNd2pFLFFBQVF4dUUsTUFFekI0RCxHQUVYa3BFLEVBQW9CbnNFLFVBQVUwdUUsV0FBYSxTQUFVNXVFLEdBQ2pELElBQUl1SyxFQUFRMUosS0FFUmlSLEVBQU05UixFQUNObUQsRUFBUzJwQyxHQUFZcmMsTUFJekIsT0FIQXBlLEVBQVFQLEdBQUssU0FBVWpTLEVBQUtOLEdBQ3hCNEQsRUFBU0EsRUFBTzRSLElBQUksSUFBSTBhLEdBQVUsQ0FBQzV2QixJQUFPMEssRUFBTW9rRSxVQUFVcHZFLE9BRXZENEQsR0FFWGtwRSxFQUFvQm5zRSxVQUFVbXVFLFdBQWEsU0FBVXY4RCxHQUNqRCxNQUFPLENBQ0g0NEIsT0FBUTdwQyxLQUFLa3VFLFNBQVNqOUQsS0FHOUJ1NkQsRUFBb0Juc0UsVUFBVW91RSxhQUFlLFNBQVV2aUQsR0FDbkQsSUFBSXhoQixFQUFRMUosS0FDUnNDLEVBQVMsR0FJYixPQUhBNG9CLEVBQU0xWixTQUFRLFNBQVU5UyxHQUNwQjRELEVBQU9tQixLQUFLaUcsRUFBTXdqRSxRQUFReHVFLE9BRXZCLENBQUUyVyxPQUFRL1MsSUFFckJrcEUsRUFBb0Juc0UsVUFBVTh1RSxVQUFZLFNBQVU1aEMsR0FDaEQsSUFBSTdpQyxFQUFRMUosS0FDWjZGLElBQVMwbUMsRUFBSXZELE1BQU8sa0VBQ3BCc2lDLEdBQWMvK0IsRUFBSXZELE1BQU1ockMsS0FBTSxrQkFDOUJzdEUsR0FBYy8rQixFQUFJdkQsTUFBTTRCLFdBQVksd0JBQ3BDLElBQUk1ckMsRUFBTWdCLEtBQUs2c0UsU0FBU3RnQyxFQUFJdkQsTUFBTWhyQyxNQUM5QnNZLEVBQVV0VyxLQUFLbzJDLFlBQVk3SixFQUFJdkQsTUFBTTRCLFlBQ3pDLE9BQU8sSUFBSUcsR0FBUy9yQyxFQUFLc1gsRUFBUyxRQUFJL00sRUFBV2dqQyxFQUFJdkQsT0FBTyxTQUFVM2xDLEdBQ2xFLE9BQU9xRyxFQUFNb2tFLFVBQVV6cUUsT0FHL0Jtb0UsRUFBb0Juc0UsVUFBVSt1RSxZQUFjLFNBQVU5ckUsR0FDbER1RCxJQUFTdkQsRUFBTytyRSxRQUFTLGtFQUN6QnhvRSxJQUFTdkQsRUFBT3l2QyxTQUFVLGdFQUMxQixJQUFJL3lDLEVBQU1nQixLQUFLNnNFLFNBQVN2cUUsRUFBTytyRSxTQUMzQi8zRCxFQUFVdFcsS0FBS28yQyxZQUFZOXpDLEVBQU95dkMsVUFDdEMsT0FBTyxJQUFJNUUsR0FBV251QyxFQUFLc1gsSUFFL0JrMUQsRUFBb0Juc0UsVUFBVXcvRCxrQkFBb0IsU0FBVXY4RCxHQUN4RCxNQUFJLFVBQVdBLEVBQ0p0QyxLQUFLbXVFLFVBQVU3ckUsR0FFakIsWUFBYUEsRUFDWHRDLEtBQUtvdUUsWUFBWTlyRSxHQUVyQnVpQixFQUFLLCtCQUFpQ25aLEtBQUtzRyxVQUFVMVAsS0FFaEVrcEUsRUFBb0Juc0UsVUFBVWl2RSx5QkFBMkIsU0FBVWpVLEdBQy9ELE9BQVFBLEdBQ0osS0FBS3NILEdBQXVCSyxNQUN4QixNQUFPLE1BQ1gsS0FBS0wsR0FBdUJrRSxRQUN4QixNQUFPLFVBQ1gsS0FBS2xFLEdBQXVCK0QsU0FDeEIsTUFBTyxZQUNYLEtBQUsvRCxHQUF1Qk8sUUFDeEIsTUFBTyxTQUNYLEtBQUtQLEdBQXVCbUUsTUFDeEIsTUFBTyxRQUNYLFFBQ0ksT0FBT2poRCxFQUFLLG1DQUFxQ3cxQyxLQUc3RG1SLEVBQW9CbnNFLFVBQVVrdkUsa0JBQW9CLFNBQVUzUixHQUN4RCxHQUFJQSxhQUF1QjBHLEdBQ3ZCLE1BQU8sQ0FDSC90RCxPQUFRLENBQ0o0SSxNQUFPeStDLEVBQVkyRyxnQkFBZ0JwbEQsTUFDbkM4WixTQUFVMmtDLEVBQVkza0MsV0FJbEMsR0FBSTJrQyxhQUF1QnNHLEdBQXFCLENBQzVDLEdBQUl0RyxFQUFZeUcsa0JBQWtCdDRCLEdBQVUsQ0FDeEMsSUFBSXdCLEVBQU1xd0IsRUFBWXlHLE9BQ3RCLE1BQU8sQ0FDSG1MLGVBQWdCLENBQ1pwdkQsU0FBVSxDQUNOcGhCLEtBQU1nQyxLQUFLMitELE9BQU9weUIsRUFBSXZ0QyxLQUN0QjZxQyxPQUFRN3BDLEtBQUtrdUUsU0FBUzNoQyxFQUFJN2hDLFFBQzFCa2dDLFdBQVk1cUMsS0FBS3EyQyxVQUFVOUosRUFBSWoyQixVQUVuQ210RCxVQUFXN0csRUFBWXVHLGlCQUN2QkMsaUJBQWtCeEcsRUFBWXdHLG1CQUlyQyxHQUFJeEcsRUFBWXlHLGtCQUFrQmwyQixHQUFZLENBQzNDWixFQUFNcXdCLEVBQVl5RyxPQUN0QixNQUFPLENBQ0hvTCxlQUFnQixDQUNacnZELFNBQVVwZixLQUFLMitELE9BQU9weUIsRUFBSXZ0QyxLQUMxQit5QyxTQUFVL3hDLEtBQUtxMkMsVUFBVTlKLEVBQUlqMkIsU0FDN0I4c0QsaUJBQWtCeEcsRUFBWXdHLG1CQUlyQyxHQUEyQixPQUF2QnhHLEVBQVl5RyxPQUNqQixNQUFPLENBQ0hxTCxlQUFnQixDQUNadHZELFNBQVVwZixLQUFLMitELE9BQU8vQixFQUFZNTlELEtBQ2xDb2tFLGlCQUFrQnhHLEVBQVl3RyxtQkFLOUMsR0FBSXhHLGFBQXVCNEcsR0FBbUIsQ0FDMUMsSUFBSUUsT0FBUW42RCxFQU9aLE9BTklxekQsRUFBWThHLFFBQ1pBLEVBQVEsQ0FDSnQ1RCxLQUFNMjJELEdBQW1CbkUsRUFBWThHLE1BQU10NUQsTUFDM0NyRSxRQUFTNjJELEVBQVk4RyxNQUFNMzlELFVBRzVCLENBQ0h3L0QsYUFBYyxDQUNWb0osaUJBQWtCM3VFLEtBQUtzdUUseUJBQXlCMVIsRUFBWXZDLE9BQzVEb0osVUFBVzdHLEVBQVk2RyxVQUN2QmxxQixZQUFhdjVDLEtBQUswckUsMEJBQTBCOU8sRUFBWXJqQixhQUN4RG1xQixNQUFPQSxJQUluQixPQUFPNytDLEVBQUssOEJBQWdDblosS0FBS3NHLFVBQVU0cUQsS0FFL0Q0TyxFQUFvQm5zRSxVQUFVdzlELGdCQUFrQixTQUFVL0ksR0FDdEQsSUFDSThJLEVBREFsekQsRUFBUTFKLEtBRVosR0FBSSxpQkFBa0I4ekQsRUFBUSxDQUMxQndYLEdBQWN4WCxFQUFPeVIsYUFBYyxnQkFHbkMsSUFBSWxMLEVBQVFyNkQsS0FBSzR1RSwyQkFBMkI5YSxFQUFPeVIsYUFBYW9KLGtCQUFvQixhQUNoRmxMLEVBQVkzUCxFQUFPeVIsYUFBYTlCLFdBQWEsR0FDN0NscUIsRUFBY3VhLEVBQU95UixhQUFhaHNCLGFBQWV2NUMsS0FBS2dsQixrQkFDdEQ2cEQsRUFBYS9hLEVBQU95UixhQUFhN0IsTUFDakNBLEVBQVFtTCxHQUFjN3VFLEtBQUs0ckUsY0FBY2lELEdBQzdDalMsRUFBYyxJQUFJNEcsR0FBa0JuSixFQUFPb0osRUFBV2xxQixFQUFhbXFCLEdBQVMsV0FFM0UsR0FBSSxtQkFBb0I1UCxFQUFRLENBQ2pDd1gsR0FBY3hYLEVBQU8wYSxlQUFnQixrQkFDckMsSUFBSU0sRUFBZWhiLEVBQU8wYSxlQUMxQmxELEdBQWN3RCxFQUFhMXZELFNBQVUsdUJBQ3JDa3NELEdBQWN3RCxFQUFhMXZELFNBQVNwaEIsS0FBTSxnQ0FDMUNzdEUsR0FBY3dELEVBQWExdkQsU0FBU3dyQixXQUFZLHNDQUNoRCxJQUFJNXJDLEVBQU1nQixLQUFLNnNFLFNBQVNpQyxFQUFhMXZELFNBQVNwaEIsTUFDMUNzWSxFQUFVdFcsS0FBS28yQyxZQUFZMDRCLEVBQWExdkQsU0FBU3dyQixZQUNqRDJCLEVBQU0sSUFBSXhCLEdBQVMvckMsRUFBS3NYLEVBQVMsUUFBSS9NLEVBQVd1bEUsRUFBYTF2RCxVQUFVLFNBQVUvYixHQUFLLE9BQU9xRyxFQUFNb2tFLFVBQVV6cUUsTUFDN0c4L0QsRUFBbUIyTCxFQUFhckwsV0FBYSxHQUM3Q0wsRUFBbUIwTCxFQUFhMUwsa0JBQW9CLEdBQ3hEeEcsRUFBYyxJQUFJc0csR0FBb0JDLEVBQWtCQyxFQUFrQjcyQixFQUFJdnRDLElBQUt1dEMsUUFFbEYsR0FBSSxtQkFBb0J1bkIsRUFBUSxDQUNqQ3dYLEdBQWN4WCxFQUFPMmEsZUFBZ0Isa0JBQ3JDLElBQUlNLEVBQVlqYixFQUFPMmEsZUFDdkJuRCxHQUFjeUQsRUFBVTN2RCxTQUFVLDJCQUM5QnBnQixFQUFNZ0IsS0FBSzZzRSxTQUFTa0MsRUFBVTN2RCxVQUM5QjlJLEVBQVV5NEQsRUFBVWg5QixTQUNsQi94QyxLQUFLbzJDLFlBQVkyNEIsRUFBVWg5QixVQUMzQm5lLEdBQWdCSSxnQkFDbEJ1WSxFQUFNLElBQUlZLEdBQVdudUMsRUFBS3NYLEdBQzFCOHNELEVBQW1CMkwsRUFBVTNMLGtCQUFvQixHQUNyRHhHLEVBQWMsSUFBSXNHLEdBQW9CLEdBQUlFLEVBQWtCNzJCLEVBQUl2dEMsSUFBS3V0QyxRQUVwRSxHQUFJLG1CQUFvQnVuQixFQUFRLENBQ2pDd1gsR0FBY3hYLEVBQU80YSxlQUFnQixrQkFDckMsSUFBSU0sRUFBWWxiLEVBQU80YSxlQUN2QnBELEdBQWMwRCxFQUFVNXZELFNBQVUsa0JBQzlCcGdCLEVBQU1nQixLQUFLNnNFLFNBQVNtQyxFQUFVNXZELFVBQzlCZ2tELEVBQW1CNEwsRUFBVTVMLGtCQUFvQixHQUNyRHhHLEVBQWMsSUFBSXNHLEdBQW9CLEdBQUlFLEVBQWtCcGtFLEVBQUssVUFFaEUsTUFBSSxXQUFZODBELEdBV2pCLE9BQU9qdkMsRUFBSyx1QkFBeUJuWixLQUFLc0csVUFBVThoRCxJQVRwRHdYLEdBQWN4WCxFQUFPditDLE9BQVEsVUFDN0IsSUFBSUEsRUFBU3UrQyxFQUFPditDLE9BQ3BCKzFELEdBQWMvMUQsRUFBTzBpQixTQUFVLG1CQUMvQixJQUFJOVosRUFBUTVJLEVBQU80SSxPQUFTLEVBQ3hCb2xELEVBQWtCLElBQUkwSCxHQUFnQjlzRCxHQUN0QzhaLEVBQVcxaUIsRUFBTzBpQixTQUN0QjJrQyxFQUFjLElBQUkwRyxHQUFzQnJyQyxFQUFVc3JDLEdBS3RELE9BQU8zRyxHQUVYNE8sRUFBb0Juc0UsVUFBVXV2RSwyQkFBNkIsU0FBVXZVLEdBQ2pFLE1BQWMsY0FBVkEsRUFDT3NILEdBQXVCK0QsU0FFZixRQUFWckwsRUFDRXNILEdBQXVCSyxNQUVmLFdBQVYzSCxFQUNFc0gsR0FBdUJPLFFBRWYsWUFBVjdILEVBQ0VzSCxHQUF1QmtFLFFBRWYsVUFBVnhMLEVBQ0VzSCxHQUF1Qm1FLE1BR3ZCamhELEVBQUssc0NBQXdDdzFDLElBRzVEbVIsRUFBb0Juc0UsVUFBVTA5RCwwQkFBNEIsU0FBVWpKLEdBSWhFLEtBQU0saUJBQWtCQSxHQUNwQixPQUFPbGdDLEdBQWdCSyxJQUUzQixJQUFJc3hDLEVBQWV6UixFQUFPeVIsYUFDMUIsT0FBSUEsRUFBYTlCLFdBQWE4QixFQUFhOUIsVUFBVXBqRSxPQUMxQ3V6QixHQUFnQkssSUFFdEJzeEMsRUFBYXh6QixTQUdYL3hDLEtBQUtvMkMsWUFBWW12QixFQUFheHpCLFVBRjFCbmUsR0FBZ0JLLEtBSS9CdTNDLEVBQW9CbnNFLFVBQVV3OEMsV0FBYSxTQUFVcmlCLEdBQ2pELElBQ0lsM0IsRUFEQW9ILEVBQVExSixLQUVaLEdBQUl3NUIsYUFBb0I2UixHQUNwQi9vQyxFQUFTLENBQ0wwSyxPQUFRaE4sS0FBS2l1RSxtQkFBbUJ6MEMsRUFBU3g2QixJQUFLdzZCLEVBQVM5NkIsYUFHMUQsR0FBSTg2QixhQUFvQnlULEdBQ3pCM3FDLEVBQVMsQ0FBRTRTLE9BQVFsVixLQUFLMitELE9BQU9ubEMsRUFBU3g2QixXQUV2QyxHQUFJdzZCLGFBQW9CbVMsR0FDekJycEMsRUFBUyxDQUNMMEssT0FBUWhOLEtBQUtpdUUsbUJBQW1CejBDLEVBQVN4NkIsSUFBS3c2QixFQUFTOXVCLE1BQ3ZEdWtFLFdBQVlqdkUsS0FBS2t2RSxlQUFlMTFDLEVBQVNvUyxnQkFHNUMsTUFBSXBTLGFBQW9CNFMsSUFXekIsT0FBT3ZuQixFQUFLLHlCQUEyQjJVLEVBQVMxbUIsTUFWaER4USxFQUFTLENBQ0xnb0MsVUFBVyxDQUNQbHJCLFNBQVVwZixLQUFLMitELE9BQU9ubEMsRUFBU3g2QixLQUMvQnF0QyxnQkFBaUI3UyxFQUFTNlMsZ0JBQWdCcDdCLEtBQUksU0FBVXE1QixHQUNwRCxPQUFPNWdDLEVBQU15bEUsaUJBQWlCN2tDLFFBVzlDLE9BSEs5USxFQUFTOFIsYUFBYU4sU0FDdkIxb0MsRUFBTzhzRSxnQkFBa0JwdkUsS0FBS3F2RSxlQUFlNzFDLEVBQVM4UixlQUVuRGhwQyxHQUVYa3BFLEVBQW9CbnNFLFVBQVUwOEMsYUFBZSxTQUFVekwsR0FDbkQsSUFBSTVtQyxFQUFRMUosS0FDUnNyQyxFQUFlZ0YsRUFBTTgrQixnQkFDbkJwdkUsS0FBS3N2RSxpQkFBaUJoL0IsRUFBTTgrQixpQkFDNUJ6a0MsR0FBYU0sS0FDbkIsR0FBSXFGLEVBQU10akMsT0FBUSxDQUNkcytELEdBQWNoN0IsRUFBTXRqQyxPQUFPaFAsS0FBTSxRQUNqQyxJQUFJZ0IsRUFBTWdCLEtBQUs2c0UsU0FBU3Y4QixFQUFNdGpDLE9BQU9oUCxNQUNqQ1UsRUFBUXNCLEtBQUsrdEUsV0FBV3o5QixFQUFNdGpDLE9BQU82OEIsUUFBVSxJQUNuRCxHQUFJeUcsRUFBTTIrQixXQUFZLENBQ2xCLElBQUlyakMsRUFBWTVyQyxLQUFLdXZFLGlCQUFpQmovQixFQUFNMitCLFlBQzVDLE9BQU8sSUFBSXRqQyxHQUFjM3NDLEVBQUtOLEVBQU9rdEMsRUFBV04sR0FHaEQsT0FBTyxJQUFJRCxHQUFZcnNDLEVBQUtOLEVBQU80c0MsR0FHdEMsR0FBSWdGLEVBQU1wN0IsT0FBUSxDQUNmbFcsRUFBTWdCLEtBQUs2c0UsU0FBU3Y4QixFQUFNcDdCLFFBQzlCLE9BQU8sSUFBSSszQixHQUFlanVDLEVBQUtzc0MsR0FFOUIsR0FBSWdGLEVBQU1oRyxVQUFXLENBQ2xCdHJDLEVBQU1nQixLQUFLNnNFLFNBQVN2OEIsRUFBTWhHLFVBQVVsckIsVUFBeEMsSUFDSWl0QixFQUFrQmlFLEVBQU1oRyxVQUFVK0IsZ0JBQWdCcDdCLEtBQUksU0FBVXE1QixHQUNoRSxPQUFPNWdDLEVBQU04bEUsbUJBQW1CbGxDLE1BR3BDLE9BREF6a0MsR0FBK0IsSUFBeEJ5bEMsRUFBYVQsT0FBaUIseURBQzlCLElBQUl1QixHQUFrQnB0QyxFQUFLcXRDLEdBR2xDLE9BQU94bkIsRUFBSywyQkFBNkJuWixLQUFLc0csVUFBVXMrQixLQUdoRWs3QixFQUFvQm5zRSxVQUFVZ3dFLGVBQWlCLFNBQVUvakMsR0FFckQsT0FEQXpsQyxHQUFReWxDLEVBQWFOLE9BQVEsOENBQ0d6aEMsSUFBNUIraEMsRUFBYVYsV0FDTixDQUNIQSxXQUFZNXFDLEtBQUtxMkMsVUFBVS9LLEVBQWFWLGtCQUdmcmhDLElBQXhCK2hDLEVBQWFULE9BQ1gsQ0FBRUEsT0FBUVMsRUFBYVQsUUFHdkJobUIsRUFBSyx5QkFHcEIybUQsRUFBb0Juc0UsVUFBVWl3RSxpQkFBbUIsU0FBVWhrQyxHQUN2RCxZQUFnQy9oQyxJQUE1QitoQyxFQUFhVixXQUNORCxHQUFhQyxXQUFXNXFDLEtBQUtvMkMsWUFBWTlLLEVBQWFWLGtCQUVoQ3JoQyxJQUF4QitoQyxFQUFhVCxPQUNYRixHQUFhRSxPQUFPUyxFQUFhVCxRQUdqQ0YsR0FBYU0sTUFHNUJ1Z0MsRUFBb0Juc0UsVUFBVW93RSxnQkFBa0IsU0FBVW4vQixFQUFPeXRCLEdBQzdELElBQUlyMEQsRUFBUTFKLEtBRVJzVyxFQUFVZzZCLEVBQU0xRixXQUNkNXFDLEtBQUtvMkMsWUFBWTlGLEVBQU0xRixZQUN2QjVxQyxLQUFLbzJDLFlBQVkybkIsR0FDbkJ6bkQsRUFBUWdVLFFBQVFzSixHQUFnQkssT0FNaEMzZCxFQUFVdFcsS0FBS28yQyxZQUFZMm5CLElBRS9CLElBQUl2ekIsRUFBbUIsS0FNdkIsT0FMSThGLEVBQU05RixrQkFBb0I4RixFQUFNOUYsaUJBQWlCbnFDLE9BQVMsSUFDMURtcUMsRUFBbUI4RixFQUFNOUYsaUJBQWlCdjVCLEtBQUksU0FBVTNPLEdBQ3BELE9BQU9vSCxFQUFNb2tFLFVBQVV4ckUsT0FHeEIsSUFBSWlvQyxHQUFlajBCLEVBQVNrMEIsSUFFdkNnaEMsRUFBb0Juc0UsVUFBVXcrRCxpQkFBbUIsU0FBVTZSLEVBQVEzUixHQUMvRCxJQUFJcjBELEVBQVExSixLQUNaLE9BQUkwdkUsR0FBVUEsRUFBT3J2RSxPQUFTLEdBQzFCd0YsT0FBc0IwRCxJQUFmdzBELEVBQTBCLGlEQUMxQjJSLEVBQU96K0QsS0FBSSxTQUFVcS9CLEdBQVMsT0FBTzVtQyxFQUFNK2xFLGdCQUFnQm4vQixFQUFPeXRCLE9BR2xFLElBR2Z5TixFQUFvQm5zRSxVQUFVOHZFLGlCQUFtQixTQUFVdGlDLEdBQ3ZELElBQUluakMsRUFBUTFKLEtBQ1JzcUMsRUFBWXVDLEVBQWV2QyxVQUMvQixHQUFJQSxhQUFxQjgvQixHQUNyQixNQUFPLENBQ0huZ0MsVUFBVzRDLEVBQWV4QyxNQUFNOWIsa0JBQ2hDb2hELGlCQUFrQixnQkFHckIsR0FBSXJsQyxhQUFxQmdnQyxHQUMxQixNQUFPLENBQ0hyZ0MsVUFBVzRDLEVBQWV4QyxNQUFNOWIsa0JBQ2hDcWhELHNCQUF1QixDQUNuQnY2RCxPQUFRaTFCLEVBQVVpZ0MsU0FBU3Q1RCxLQUFJLFNBQVU1TixHQUFLLE9BQU9xRyxFQUFNd2pFLFFBQVE3cEUsUUFJMUUsR0FBSWluQyxhQUFxQm9nQyxHQUMxQixNQUFPLENBQ0h6Z0MsVUFBVzRDLEVBQWV4QyxNQUFNOWIsa0JBQ2hDc2hELG1CQUFvQixDQUNoQng2RCxPQUFRaTFCLEVBQVVpZ0MsU0FBU3Q1RCxLQUFJLFNBQVU1TixHQUFLLE9BQU9xRyxFQUFNd2pFLFFBQVE3cEUsUUFJMUUsR0FBSWluQyxhQUFxQnVnQyxHQUMxQixNQUFPLENBQ0g1Z0MsVUFBVzRDLEVBQWV4QyxNQUFNOWIsa0JBQ2hDdWhELFVBQVc5dkUsS0FBS2t0RSxRQUFRNWlDLEVBQVV3Z0MsVUFJdEMsTUFBTWptRCxFQUFLLHNCQUF3QmdvQixFQUFldkMsWUFHMURraEMsRUFBb0Juc0UsVUFBVW13RSxtQkFBcUIsU0FBVWwvQixHQUN6RCxJQUFJNW1DLEVBQVExSixLQUNSc3FDLEVBQVksS0FDaEIsR0FBSSxxQkFBc0JnRyxFQUN0QnpxQyxFQUFrQyxpQkFBM0J5cUMsRUFBTXEvQixpQkFBcUMseUNBQTJDamtFLEtBQUtzRyxVQUFVcytCLElBQzVHaEcsRUFBWTgvQixHQUF5QmoyRCxjQUVwQyxHQUFJLDBCQUEyQm04QixFQUFPLENBQ3ZDLElBQUlqN0IsRUFBU2k3QixFQUFNcy9CLHNCQUFzQnY2RCxRQUFVLEdBQ25EaTFCLEVBQVksSUFBSWdnQyxHQUE2QmoxRCxFQUFPcEUsS0FBSSxTQUFVNU4sR0FBSyxPQUFPcUcsRUFBTW9rRSxVQUFVenFFLFlBRTdGLEdBQUksdUJBQXdCaXRDLEVBQU8sQ0FDaENqN0IsRUFBU2k3QixFQUFNdS9CLG1CQUFtQng2RCxRQUFVLEdBQ2hEaTFCLEVBQVksSUFBSW9nQyxHQUE4QnIxRCxFQUFPcEUsS0FBSSxTQUFVNU4sR0FBSyxPQUFPcUcsRUFBTW9rRSxVQUFVenFFLFlBRTlGLEdBQUksY0FBZWl0QyxFQUFPLENBQzNCLElBQUl3NkIsRUFBVTlxRSxLQUFLOHRFLFVBQVV4OUIsRUFBTXcvQixXQUNuQ2pxRSxFQUFPaWxFLGFBQW1CeDhCLEdBQWEsZ0RBQ3ZDaEUsRUFBWSxJQUFJdWdDLEdBQW1DQyxRQUduRGptRCxFQUFLLDRCQUE4Qm5aLEtBQUtzRyxVQUFVcytCLElBRXRELElBQUlyRyxFQUFZcmIsR0FBVUksaUJBQWlCc2hCLEVBQU1yRyxXQUNqRCxPQUFPLElBQUlHLEdBQWVILEVBQVdLLElBRXpDa2hDLEVBQW9CbnNFLFVBQVV1OUMsa0JBQW9CLFNBQVU5N0MsR0FDeEQsTUFBTyxDQUFFdzdDLFVBQVcsQ0FBQ3Q4QyxLQUFLK3NFLFlBQVlqc0UsRUFBTzJ0QixTQUVqRCs4QyxFQUFvQm5zRSxVQUFVazlDLG9CQUFzQixTQUFVd3pCLEdBQzFELElBQUk1eEQsRUFBUTR4RCxFQUFnQnp6QixVQUFVajhDLE9BQ3RDd0YsRUFBaUIsSUFBVnNZLEVBQWEsb0RBQXNEQSxHQUMxRSxJQUFJbmdCLEVBQU8reEUsRUFBZ0J6ekIsVUFBVSxHQUNyQyxPQUFPeU0sR0FBTU8sT0FBT3RwRCxLQUFLZ3RFLGNBQWNodkUsSUFBT2d0RCxZQUVsRHdnQixFQUFvQm5zRSxVQUFVdzlDLGNBQWdCLFNBQVUvN0MsR0FFcEQsSUFBSXdCLEVBQVMsQ0FBRTB0RSxnQkFBaUIsSUFDNUJ2aEQsRUFBTzN0QixFQUFPMnRCLEtBQ2EsT0FBM0IzdEIsRUFBTzJuRCxpQkFDUDVpRCxFQUFPNG9CLEVBQUtwdUIsT0FBUyxHQUFNLEVBQUcsc0VBQzlCaUMsRUFBTzJnQyxPQUFTampDLEtBQUsrc0UsWUFBWXQrQyxHQUNqQ25zQixFQUFPMHRFLGdCQUFnQjU2RCxLQUFPLENBQzFCLENBQ0ltYSxhQUFjenVCLEVBQU8ybkQsZ0JBQ3JCd25CLGdCQUFnQixNQUt4QnBxRSxFQUFPNG9CLEVBQUtwdUIsT0FBUyxHQUFNLEVBQUcsb0RBQzlCaUMsRUFBTzJnQyxPQUFTampDLEtBQUsrc0UsWUFBWXQrQyxFQUFLYixXQUN0Q3RyQixFQUFPMHRFLGdCQUFnQjU2RCxLQUFPLENBQUMsQ0FBRW1hLGFBQWNkLEVBQUtYLGlCQUV4RCxJQUFJb2lELEVBQVFsd0UsS0FBS213RSxTQUFTcnZFLEVBQU82bkQsU0FDN0J1bkIsSUFDQTV0RSxFQUFPMHRFLGdCQUFnQkUsTUFBUUEsR0FFbkMsSUFBSXhuQixFQUFVMW9ELEtBQUtvd0UsUUFBUXR2RSxFQUFPNG5ELFNBQzlCQSxJQUNBcG1ELEVBQU8wdEUsZ0JBQWdCdG5CLFFBQVVBLEdBRXJDLElBQUluN0IsRUFBUXZ0QixLQUFLNnJFLGFBQWEvcUUsRUFBT3lzQixPQVVyQyxPQVRjLE9BQVZBLElBQ0FqckIsRUFBTzB0RSxnQkFBZ0J6aUQsTUFBUUEsR0FFL0J6c0IsRUFBTzhuRCxVQUNQdG1ELEVBQU8wdEUsZ0JBQWdCcG5CLFFBQVU1b0QsS0FBS3F3RSxTQUFTdnZFLEVBQU84bkQsVUFFdEQ5bkQsRUFBTytuRCxRQUNQdm1ELEVBQU8wdEUsZ0JBQWdCbm5CLE1BQVE3b0QsS0FBS3F3RSxTQUFTdnZFLEVBQU8rbkQsUUFFakR2bUQsR0FFWGtwRSxFQUFvQm5zRSxVQUFVbTlDLGdCQUFrQixTQUFVMTdDLEdBQ3RELElBQUkydEIsRUFBT3p1QixLQUFLZ3RFLGNBQWNsc0UsRUFBT21pQyxRQUNqQy9rQixFQUFRcGQsRUFBT2t2RSxnQkFDZk0sRUFBWXB5RCxFQUFNOUksS0FBTzhJLEVBQU05SSxLQUFLL1UsT0FBUyxFQUM3Q29vRCxFQUFrQixLQUN0QixHQUFJNm5CLEVBQVksRUFBRyxDQUNmenFFLEVBQXFCLElBQWR5cUUsRUFBaUIsd0VBQ3hCLElBQUlsN0QsRUFBTzhJLEVBQU05SSxLQUFLLEdBQ2xCQSxFQUFLNjZELGVBQ0x4bkIsRUFBa0JyekMsRUFBS21hLGFBR3ZCZCxFQUFPQSxFQUFLcEIsTUFBTWpZLEVBQUttYSxjQUcvQixJQUFJZ2hELEVBQVcsR0FDWHJ5RCxFQUFNZ3lELFFBQ05LLEVBQVd2d0UsS0FBS3d3RSxXQUFXdHlELEVBQU1neUQsUUFFckMsSUFBSXhuQixFQUFVLEdBQ1Z4cUMsRUFBTXdxQyxVQUNOQSxFQUFVMW9ELEtBQUt5d0UsVUFBVXZ5RCxFQUFNd3FDLFVBRW5DLElBQUluN0IsRUFBUSxLQUNSclAsRUFBTXFQLFFBQ05BLEVBQVF2dEIsS0FBSzhyRSxlQUFlNXRELEVBQU1xUCxRQUV0QyxJQUFJcTdCLEVBQVUsS0FDVjFxQyxFQUFNMHFDLFVBQ05BLEVBQVU1b0QsS0FBSzB3RSxXQUFXeHlELEVBQU0wcUMsVUFFcEMsSUFBSUMsRUFBUSxLQUlaLE9BSEkzcUMsRUFBTTJxQyxRQUNOQSxFQUFRN29ELEtBQUswd0UsV0FBV3h5RCxFQUFNMnFDLFFBRTNCLElBQUlFLEdBQU10NkIsRUFBTWc2QixFQUFpQkMsRUFBUzZuQixFQUFVaGpELEVBQU9nN0IsR0FBVVcsTUFBT04sRUFBU0MsR0FBT21DLFlBRXZHd2dCLEVBQW9CbnNFLFVBQVVnK0Qsc0JBQXdCLFNBQVV6MUIsR0FDNUQsSUFBSWxwQyxFQUFRc0IsS0FBSzJ3RSxRQUFRL29DLEVBQVcrUyxTQUNwQyxPQUFhLE1BQVRqOEMsRUFDTyxLQUdBLENBQ0gsbUJBQW9CQSxJQUloQzhzRSxFQUFvQm5zRSxVQUFVc3hFLFFBQVUsU0FBVWgyQixHQUM5QyxPQUFRQSxHQUNKLEtBQUtYLEdBQWN5QyxPQUNmLE9BQU8sS0FDWCxLQUFLekMsR0FBYyt1Qix3QkFDZixNQUFPLDRCQUNYLEtBQUsvdUIsR0FBY3VzQixnQkFDZixNQUFPLGlCQUNYLFFBQ0ksT0FBTzFoRCxFQUFLLCtCQUFpQzgxQixLQUd6RDZ3QixFQUFvQm5zRSxVQUFVMnJELFNBQVcsU0FBVXBqQixHQUMvQyxJQUFJdGxDLEVBQ0F4QixFQUFTOG1DLEVBQVc5bUMsT0FXeEIsT0FUSXdCLEVBREF4QixFQUFPOGpDLGtCQUNFLENBQUUwWCxVQUFXdDhDLEtBQUs0OEMsa0JBQWtCOTdDLElBR3BDLENBQUVvZCxNQUFPbGUsS0FBSzY4QyxjQUFjLzdDLEtBRWxDbTNCLFNBQVcyUCxFQUFXM1AsU0FDekIyUCxFQUFXMlIsWUFBWWw1QyxPQUFTLElBQ2hDaUMsRUFBT2kzQyxZQUFjdjVDLEtBQUswckUsMEJBQTBCOWpDLEVBQVcyUixjQUU1RGozQyxHQUVYa3BFLEVBQW9CbnNFLFVBQVU4d0UsU0FBVyxTQUFVeG5CLEdBQy9DLElBQUlqL0MsRUFBUTFKLEtBQ1osR0FBdUIsSUFBbkIyb0QsRUFBUXRvRCxPQUFaLENBR0EsSUFBSXF2RSxFQUFTL21CLEVBQVExM0MsS0FBSSxTQUFVc0UsR0FDL0IsT0FBSUEsYUFBa0I2MEMsR0FDWDFnRCxFQUFNa25FLHFCQUFxQnI3RCxHQUczQnNQLEVBQUssd0JBQTBCblosS0FBS3NHLFVBQVV1RCxPQUc3RCxPQUFzQixJQUFsQm02RCxFQUFPcnZFLE9BQ0FxdkUsRUFBTyxHQUVYLENBQUVtQixnQkFBaUIsQ0FBRXZ0RSxHQUFJLE1BQU9xbEQsUUFBUyttQixNQUVwRGxFLEVBQW9CbnNFLFVBQVVteEUsV0FBYSxTQUFVajdELEdBQ2pELElBQUk3TCxFQUFRMUosS0FDWixPQUFLdVYsT0FHMkJoTSxJQUF2QmdNLEVBQU91N0QsWUFDTCxDQUFDOXdFLEtBQUsrd0UsZ0JBQWdCeDdELFNBRURoTSxJQUF2QmdNLEVBQU95N0QsWUFDTCxDQUFDaHhFLEtBQUtpeEUsZ0JBQWdCMTdELFNBRUdoTSxJQUEzQmdNLEVBQU9zN0QsZ0JBQ0x0N0QsRUFBT3M3RCxnQkFDVGxvQixRQUFRMTNDLEtBQUksU0FBVXRPLEdBQUssT0FBTytHLEVBQU04bUUsV0FBVzd0RSxNQUNuRHEzQixRQUFPLFNBQVVrM0MsRUFBT2ppRCxHQUFXLE9BQU9paUQsRUFBTWx0RSxPQUFPaXJCLE1BR3JEcEssRUFBSyxtQkFBcUJuWixLQUFLc0csVUFBVXVELElBZHpDLElBaUJmaTJELEVBQW9CbnNFLFVBQVUrd0UsUUFBVSxTQUFVdmtCLEdBQzlDLElBQUluaUQsRUFBUTFKLEtBQ1osR0FBd0IsSUFBcEI2ckQsRUFBU3hyRCxPQUdiLE9BQU93ckQsRUFBUzU2QyxLQUFJLFNBQVVrZ0UsR0FBUyxPQUFPem5FLEVBQU0wbkUsZ0JBQWdCRCxPQUV4RTNGLEVBQW9CbnNFLFVBQVVveEUsVUFBWSxTQUFVNWtCLEdBQ2hELElBQUluaUQsRUFBUTFKLEtBQ1osT0FBTzZyRCxFQUFTNTZDLEtBQUksU0FBVWtnRSxHQUFTLE9BQU96bkUsRUFBTTJuRSxrQkFBa0JGLE9BRTFFM0YsRUFBb0Juc0UsVUFBVWd4RSxTQUFXLFNBQVVoMEQsR0FDL0MsSUFBSTNTLEVBQVExSixLQUNaLE1BQU8sQ0FDSGdzRCxPQUFRM3ZDLEVBQU8ydkMsT0FDZjMyQyxPQUFRZ0gsRUFBT21MLFNBQVN2VyxLQUFJLFNBQVV3QyxHQUFhLE9BQU8vSixFQUFNd2pFLFFBQVF6NUQsUUFHaEYrM0QsRUFBb0Juc0UsVUFBVXF4RSxXQUFhLFNBQVVyMEQsR0FDakQsSUFBSTNTLEVBQVExSixLQUNSZ3NELElBQVczdkMsRUFBTzJ2QyxPQUNsQnhrQyxFQUFXbkwsRUFBT2hILE9BQU9wRSxLQUFJLFNBQVV3QyxHQUFhLE9BQU8vSixFQUFNb2tFLFVBQVVyNkQsTUFDL0UsT0FBTyxJQUFJczRDLEdBQU12a0MsRUFBVXdrQyxJQUcvQndmLEVBQW9CbnNFLFVBQVVpeUUsWUFBYyxTQUFVdm5CLEdBQ2xELE9BQU9taEIsR0FBV25oQixFQUFJL3JELE9BRzFCd3RFLEVBQW9CbnNFLFVBQVVreUUsY0FBZ0IsU0FBVXhuQixHQUNwRCxPQUFRQSxHQUNKLElBQUssWUFDRCxPQUFPQyxHQUFVQyxVQUNyQixJQUFLLGFBQ0QsT0FBT0QsR0FBVThCLFdBQ3JCLFFBQ0ksU0FJWjBmLEVBQW9CbnNFLFVBQVVteUUsZUFBaUIsU0FBVWx1RSxHQUNyRCxPQUFPNm5FLEdBQVU3bkUsRUFBR3RGLE9BRXhCd3RFLEVBQW9CbnNFLFVBQVVveUUsaUJBQW1CLFNBQVVudUUsR0FDdkQsT0FBUUEsR0FDSixJQUFLLFFBQ0QsT0FBTzhvRCxHQUFTRyxNQUNwQixJQUFLLGVBQ0QsT0FBT0gsR0FBU0ssYUFDcEIsSUFBSyx3QkFDRCxPQUFPTCxHQUFTSSxzQkFDcEIsSUFBSyxZQUNELE9BQU9KLEdBQVNDLFVBQ3BCLElBQUsscUJBQ0QsT0FBT0QsR0FBU0UsbUJBQ3BCLElBQUssaUJBQ0QsT0FBT0YsR0FBU00sZUFDcEIsSUFBSyxLQUNELE9BQU9OLEdBQVNPLEdBQ3BCLElBQUsscUJBQ0QsT0FBT1AsR0FBU1EsbUJBQ3BCLElBQUssdUJBQ0QsT0FBTy9uQyxFQUFLLHdCQUNoQixRQUNJLE9BQU9BLEVBQUssc0JBR3hCMm1ELEVBQW9CbnNFLFVBQVVxeUUscUJBQXVCLFNBQVVqakQsR0FDM0QsTUFBTyxDQUFFd2IsVUFBV3hiLEVBQUtGLG9CQUU3Qmk5QyxFQUFvQm5zRSxVQUFVc3lFLHVCQUF5QixTQUFVQyxHQUM3RCxPQUFPaGpELEdBQVVJLGlCQUFpQjRpRCxFQUFlM25DLFlBR3JEdWhDLEVBQW9CbnNFLFVBQVUreEUsZ0JBQWtCLFNBQVUxb0IsR0FDdEQsTUFBTyxDQUNIcmUsTUFBT3JxQyxLQUFLMHhFLHFCQUFxQmhwQixFQUFRcmUsT0FDekNoSyxVQUFXcmdDLEtBQUtzeEUsWUFBWTVvQixFQUFRcUIsT0FHNUN5aEIsRUFBb0Juc0UsVUFBVWd5RSxrQkFBb0IsU0FBVTNvQixHQUN4RCxPQUFPLElBQUlrQixHQUFRNXBELEtBQUsyeEUsdUJBQXVCanBCLEVBQVFyZSxPQUFRcnFDLEtBQUt1eEUsY0FBYzdvQixFQUFRcm9CLGFBRTlGbXJDLEVBQW9CbnNFLFVBQVU0eEUsZ0JBQWtCLFNBQVUxN0QsR0FDdEQsT0FBTzYwQyxHQUFZcnJELE9BQU9pQixLQUFLMnhFLHVCQUF1QnA4RCxFQUFPeTdELFlBQVkzbUMsT0FBUXJxQyxLQUFLeXhFLGlCQUFpQmw4RCxFQUFPeTdELFlBQVkxdEUsSUFBS3RELEtBQUs4dEUsVUFBVXY0RCxFQUFPeTdELFlBQVl0eUUsU0FHcks4c0UsRUFBb0Juc0UsVUFBVXV4RSxxQkFBdUIsU0FBVXI3RCxHQUMzRCxHQUFJQSxFQUFPalMsS0FBTzhvRCxHQUFTRyxNQUFPLENBQzlCLEdBQUloM0MsRUFBTzdXLE1BQU00ckIsUUFBUW1rQixHQUFZQyxLQUNqQyxNQUFPLENBQ0hvaUMsWUFBYSxDQUNUem1DLE1BQU9ycUMsS0FBSzB4RSxxQkFBcUJuOEQsRUFBTzgwQixPQUN4Qy9tQyxHQUFJLFdBSVgsR0FBSWlTLEVBQU83VyxNQUFNNHJCLFFBQVF5akIsR0FBVUUsVUFDcEMsTUFBTyxDQUNINmlDLFlBQWEsQ0FDVHptQyxNQUFPcnFDLEtBQUsweEUscUJBQXFCbjhELEVBQU84MEIsT0FDeEMvbUMsR0FBSSxZQUtwQixNQUFPLENBQ0gwdEUsWUFBYSxDQUNUM21DLE1BQU9ycUMsS0FBSzB4RSxxQkFBcUJuOEQsRUFBTzgwQixPQUN4Qy9tQyxHQUFJdEQsS0FBS3d4RSxlQUFlajhELEVBQU9qUyxJQUMvQjVFLE1BQU9zQixLQUFLa3RFLFFBQVEzM0QsRUFBTzdXLFVBSXZDOHNFLEVBQW9CbnNFLFVBQVUweEUsZ0JBQWtCLFNBQVV4N0QsR0FDdEQsT0FBUUEsRUFBT3U3RCxZQUFZeHRFLElBQ3ZCLElBQUssU0FDRCxJQUFJdXVFLEVBQVc3eEUsS0FBSzJ4RSx1QkFBdUJwOEQsRUFBT3U3RCxZQUFZem1DLE9BQzlELE9BQU8rZixHQUFZcnJELE9BQU84eUUsRUFBVXpsQixHQUFTRyxNQUFPOWQsR0FBWUMsS0FDcEUsSUFBSyxVQUNELElBQUlvakMsRUFBWTl4RSxLQUFLMnhFLHVCQUF1QnA4RCxFQUFPdTdELFlBQVl6bUMsT0FDL0QsT0FBTytmLEdBQVlyckQsT0FBTyt5RSxFQUFXMWxCLEdBQVNHLE1BQU94ZSxHQUFVRSxVQUNuRSxJQUFLLHVCQUNELE9BQU9wcEIsRUFBSyxzQkFDaEIsUUFDSSxPQUFPQSxFQUFLLG9CQUd4QjJtRCxFQUFvQm5zRSxVQUFVNnZFLGVBQWlCLFNBQVV0akMsR0FDckQsSUFBSW1tQyxFQUFrQixHQUl0QixPQUhBbm1DLEVBQVUvQixPQUFPcjRCLFNBQVEsU0FBVTY0QixHQUMvQixPQUFPMG5DLEVBQWdCdHVFLEtBQUs0bUMsRUFBTTliLHNCQUUvQixDQUNIeWpELFdBQVlELElBR3BCdkcsRUFBb0Juc0UsVUFBVWt3RSxpQkFBbUIsU0FBVWovQixHQUN2RCxJQUNJekcsR0FEUXlHLEVBQU0waEMsWUFBYyxJQUNiL2dFLEtBQUksU0FBVXdkLEdBQVEsT0FBT0csR0FBVUksaUJBQWlCUCxNQUMzRSxPQUFPbWIsR0FBVUcsVUFBVUYsSUFFeEIyaEMsRUF2bEM2QixHQThtQ3BDeUcsR0FDQSxXQUNJanlFLEtBQUtreUUsU0FBVyxLQUNoQmx5RSxLQUFLaTRCLFNBQVcsRUFDaEJqNEIsS0FBS215RSxVQUFZLElBU3JCQyxHQUE4QixXQUM5QixTQUFTQSxFQUFhekosR0FDbEIzb0UsS0FBSzJvRSxXQUFhQSxFQUNsQjNvRSxLQUFLcXlFLFFBQVUsSUFBSW5oQyxJQUFVLFNBQVV4c0MsR0FDbkMsT0FBT0EsRUFBRW1rQyxpQkFFYjdvQyxLQUFLc3lFLFlBQWN4WSxHQUFZaUcsUUFDL0IvL0QsS0FBS3V5RSx5QkFBMkIsSUFBSWhuQyxJQUNwQ3ZyQyxLQUFLMm9FLFdBQVcxNkQsVUFBVWpPLE1Bb0g5QixPQWxIQW95RSxFQUFhL3lFLFVBQVVrcEUsT0FBUyxTQUFVem5CLEdBQ3RDLElBQUk1aUMsRUFBUTRpQyxFQUFTNWlDLE1BQ2pCczBELEdBQWMsRUFDZEMsRUFBWXp5RSxLQUFLcXlFLFFBQVEvekUsSUFBSTRmLElBQzVCdTBELElBQ0RELEdBQWMsRUFDZEMsRUFBWSxJQUFJUixHQUNoQmp5RSxLQUFLcXlFLFFBQVFuK0QsSUFBSWdLLEVBQU91MEQsSUFFNUJBLEVBQVVOLFVBQVUxdUUsS0FBS3E5QyxHQUd6Qmo3QyxHQURrQmk3QyxFQUFTNHhCLHVCQUF1QjF5RSxLQUFLc3lFLGFBQ2xDLDhFQUNqQkcsRUFBVVAsWUFDVXB4QixFQUFTNnhCLGVBQWVGLEVBQVVQLFdBRWxEbHlFLEtBQUs0eUUsNkJBR2IsT0FBSUosRUFDT3h5RSxLQUFLMm9FLFdBQVdKLE9BQU9ycUQsR0FBTzFiLE1BQUssU0FBVXkxQixHQUVoRCxPQURBdzZDLEVBQVV4NkMsU0FBV0EsRUFDZEEsS0FJSmwyQixRQUFRQyxRQUFReXdFLEVBQVV4NkMsV0FHekNtNkMsRUFBYS95RSxVQUFVb3BFLFNBQVcsU0FBVTNuQixHQUN4QyxPQUFPdDdDLEVBQU05RCxVQUFVMUIsVUFBTSxPQUFRLEdBQVEsV0FDekMsSUFBSWtlLEVBQU8yMEQsRUFBWUosRUFBV2gxRSxFQUNsQyxPQUFPK0gsRUFBTS9DLFlBQVl6QyxNQUFNLFNBQVVpTCxHQVdyQyxPQVZBaVQsRUFBUTRpQyxFQUFTNWlDLE1BQ2pCMjBELEdBQWEsR0FDYkosRUFBWXp5RSxLQUFLcXlFLFFBQVEvekUsSUFBSTRmLE1BRXpCemdCLEVBQUlnMUUsRUFBVU4sVUFBVTF4RSxRQUFRcWdELEtBQ3ZCLElBQ0wyeEIsRUFBVU4sVUFBVXh2RCxPQUFPbGxCLEVBQUcsR0FDOUJvMUUsRUFBNEMsSUFBL0JKLEVBQVVOLFVBQVU5eEUsUUFHckN3eUUsR0FDQTd5RSxLQUFLcXlFLFFBQVFuOUQsT0FBT2dKLEdBQ2IsQ0FBQyxFQUFjbGUsS0FBSzJvRSxXQUFXRixTQUFTdnFELEtBRTVDLENBQUMsVUFJcEJrMEQsRUFBYS95RSxVQUFVMjlELGNBQWdCLFNBQVU4VixHQUU3QyxJQURBLElBQUlDLEdBQWMsRUFDVHBvRSxFQUFLLEVBQUdxb0UsRUFBY0YsRUFBV25vRSxFQUFLcW9FLEVBQVkzeUUsT0FBUXNLLElBQU0sQ0FDckUsSUFBSXVuRSxFQUFXYyxFQUFZcm9FLEdBQ3ZCdVQsRUFBUWcwRCxFQUFTaDBELE1BQ2pCdTBELEVBQVl6eUUsS0FBS3F5RSxRQUFRL3pFLElBQUk0ZixHQUNqQyxHQUFJdTBELEVBQVcsQ0FDWCxJQUFLLElBQUl4bkUsRUFBSyxFQUFHQyxFQUFLdW5FLEVBQVVOLFVBQVdsbkUsRUFBS0MsRUFBRzdLLE9BQVE0SyxJQUFNLENBQzlDQyxFQUFHRCxHQUNMMG5FLGVBQWVULEtBQ3hCYSxHQUFjLEdBR3RCTixFQUFVUCxTQUFXQSxHQUd6QmEsR0FDQS95RSxLQUFLNHlFLDZCQUdiUixFQUFhL3lFLFVBQVU0ekUsYUFBZSxTQUFVLzBELEVBQU9wYSxHQUNuRCxJQUFJMnVFLEVBQVl6eUUsS0FBS3F5RSxRQUFRL3pFLElBQUk0ZixHQUNqQyxHQUFJdTBELEVBQ0EsSUFBSyxJQUFJOW5FLEVBQUssRUFBR00sRUFBS3duRSxFQUFVTixVQUFXeG5FLEVBQUtNLEVBQUc1SyxPQUFRc0ssSUFBTSxDQUM5Q00sRUFBR04sR0FDVDBFLFFBQVF2TCxHQUt6QjlELEtBQUtxeUUsUUFBUW45RCxPQUFPZ0osSUFFeEJrMEQsRUFBYS95RSxVQUFVNnpFLG9CQUFzQixTQUFVWixHQUNuRHR5RSxLQUFLc3lFLFlBQWNBLEVBQ25CLElBQUlTLEdBQWMsRUFDbEIveUUsS0FBS3F5RSxRQUFRN2dFLFNBQVEsU0FBVTFPLEVBQUcydkUsR0FDOUIsSUFBSyxJQUFJOW5FLEVBQUssRUFBR00sRUFBS3duRSxFQUFVTixVQUFXeG5FLEVBQUtNLEVBQUc1SyxPQUFRc0ssSUFBTSxDQUM5Q00sRUFBR04sR0FFTCtuRSx1QkFBdUJKLEtBQ2hDUyxHQUFjLE9BSXRCQSxHQUNBL3lFLEtBQUs0eUUsNkJBR2JSLEVBQWEveUUsVUFBVTh6RSwyQkFBNkIsU0FBVXJsRSxHQUMxRDlOLEtBQUt1eUUseUJBQXlCdDdDLElBQUlucEIsR0FHbENBLEVBQVMxTCxRQUViZ3dFLEVBQWEveUUsVUFBVSt6RSw4QkFBZ0MsU0FBVXRsRSxHQUM3RDlOLEtBQUt1eUUseUJBQXlCcjlELE9BQU9wSCxJQUd6Q3NrRSxFQUFhL3lFLFVBQVV1ekUsMEJBQTRCLFdBQy9DNXlFLEtBQUt1eUUseUJBQXlCL2dFLFNBQVEsU0FBVTFELEdBQzVDQSxFQUFTMUwsV0FHVmd3RSxFQTVIc0IsR0FvSTdCaUIsR0FBK0IsV0FDL0IsU0FBU0EsRUFBY24xRCxFQUFPbzFELEVBQWVoL0QsR0FDekN0VSxLQUFLa2UsTUFBUUEsRUFDYmxlLEtBQUtzekUsY0FBZ0JBLEVBS3JCdHpFLEtBQUt1ekUsb0JBQXFCLEVBQzFCdnpFLEtBQUt3ekUsS0FBTyxLQUNaeHpFLEtBQUtzeUUsWUFBY3hZLEdBQVlpRyxRQUMvQi8vRCxLQUFLc1UsUUFBVUEsR0FBVyxHQTRGOUIsT0FwRkErK0QsRUFBY2gwRSxVQUFVc3pFLGVBQWlCLFNBQVVhLEdBRS9DLEdBREEzdEUsRUFBTzJ0RSxFQUFLalIsV0FBV2xpRSxPQUFTLEdBQUttekUsRUFBSy9RLGlCQUFrQiwyQ0FDdkR6aUUsS0FBS3NVLFFBQVFtL0QsdUJBQXdCLENBR3RDLElBREEsSUFBSWxSLEVBQWEsR0FDUjUzRCxFQUFLLEVBQUdNLEVBQUt1b0UsRUFBS2pSLFdBQVk1M0QsRUFBS00sRUFBRzVLLE9BQVFzSyxJQUFNLENBQ3pELElBQUl3NkQsRUFBWWw2RCxFQUFHTixHQUNmdzZELEVBQVVyeUQsT0FBU2t1RCxHQUFXaUIsVUFDOUJNLEVBQVc5K0QsS0FBSzBoRSxHQUd4QnFPLEVBQU8sSUFBSW5SLEdBQWFtUixFQUFLdDFELE1BQU9zMUQsRUFBS25rQixLQUFNbWtCLEVBQUtsUixRQUFTQyxFQUFZaVIsRUFBS2hSLFlBQWFnUixFQUFLeGUsVUFBV3dlLEVBQUsvUSxrQkFDakYsR0FFbkMsSUFBSXNRLEdBQWMsRUFZbEIsT0FYSy95RSxLQUFLdXpFLG1CQU1EdnpFLEtBQUswekUsaUJBQWlCRixLQUMzQnh6RSxLQUFLc3pFLGNBQWNseEUsS0FBS294RSxHQUN4QlQsR0FBYyxHQVBWL3lFLEtBQUsyekUsd0JBQXdCSCxFQUFNeHpFLEtBQUtzeUUsZUFDeEN0eUUsS0FBSzR6RSxrQkFBa0JKLEdBQ3ZCVCxHQUFjLEdBT3RCL3lFLEtBQUt3ekUsS0FBT0EsRUFDTFQsR0FFWE0sRUFBY2gwRSxVQUFVZ1EsUUFBVSxTQUFVdkwsR0FDeEM5RCxLQUFLc3pFLGNBQWN4dkUsTUFBTUEsSUFHN0J1dkUsRUFBY2gwRSxVQUFVcXpFLHVCQUF5QixTQUFVSixHQUN2RHR5RSxLQUFLc3lFLFlBQWNBLEVBQ25CLElBQUlTLEdBQWMsRUFPbEIsT0FOSS95RSxLQUFLd3pFLE9BQ0p4ekUsS0FBS3V6RSxvQkFDTnZ6RSxLQUFLMnpFLHdCQUF3QjN6RSxLQUFLd3pFLEtBQU1sQixLQUN4Q3R5RSxLQUFLNHpFLGtCQUFrQjV6RSxLQUFLd3pFLE1BQzVCVCxHQUFjLEdBRVhBLEdBRVhNLEVBQWNoMEUsVUFBVXMwRSx3QkFBMEIsU0FBVUgsRUFBTWxCLEdBRzlELEdBRkF6c0UsR0FBUTdGLEtBQUt1ekUsbUJBQW9CLHlFQUU1QkMsRUFBS3hlLFVBQ04sT0FBTyxFQUlYLElBQUk2ZSxFQUFjdkIsSUFBZ0J4WSxHQUFZeUcsUUFHOUMsT0FBSXZnRSxLQUFLc1UsUUFBUXcvRCx1QkFBeUJELEdBQ3RDaHVFLEVBQU8ydEUsRUFBS3hlLFVBQVcscURBQ2hCLElBR0h3ZSxFQUFLbmtCLEtBQUtyL0MsV0FBYXNpRSxJQUFnQnhZLEdBQVl5RyxTQUUvRDhTLEVBQWNoMEUsVUFBVXEwRSxpQkFBbUIsU0FBVUYsR0FLakQsR0FBSUEsRUFBS2pSLFdBQVdsaUUsT0FBUyxFQUN6QixPQUFPLEVBRVgsSUFBSTB6RSxFQUEwQi96RSxLQUFLd3pFLE1BQVF4ekUsS0FBS3d6RSxLQUFLNWtCLG1CQUFxQjRrQixFQUFLNWtCLGlCQUMvRSxTQUFJNGtCLEVBQUsvUSxtQkFBb0JzUixLQUNzQixJQUF4Qy96RSxLQUFLc1UsUUFBUW0vRCx3QkFPNUJKLEVBQWNoMEUsVUFBVXUwRSxrQkFBb0IsU0FBVUosR0FDbEQzdEUsR0FBUTdGLEtBQUt1ekUsbUJBQW9CLGtEQUNqQ0MsRUFBT25SLEdBQWFNLHFCQUFxQjZRLEVBQUt0MUQsTUFBT3MxRCxFQUFLbmtCLEtBQU1ta0IsRUFBS2hSLFlBQWFnUixFQUFLeGUsV0FDdkZoMUQsS0FBS3V6RSxvQkFBcUIsRUFDMUJ2ekUsS0FBS3N6RSxjQUFjbHhFLEtBQUtveEUsSUFFckJILEVBdkd1QixHQStIOUJXLEdBQWtDLFdBQ2xDLFNBQVNBLEVBQWlCLzdDLEVBQVUrOEIsRUFBV0YsRUFBV0MsR0FDdEQvMEQsS0FBS2k0QixTQUFXQSxFQUNoQmo0QixLQUFLZzFELFVBQVlBLEVBQ2pCaDFELEtBQUs4MEQsVUFBWUEsRUFDakI5MEQsS0FBSyswRCxZQUFjQSxFQW1CdkIsT0FqQkFpZixFQUFpQkMsYUFBZSxTQUFVaDhDLEVBQVVpOEMsR0FHaEQsSUFGQSxJQUFJcGYsRUFBWXA4QixLQUNacThCLEVBQWNyOEIsS0FDVC90QixFQUFLLEVBQUdNLEVBQUtpcEUsRUFBYTNSLFdBQVk1M0QsRUFBS00sRUFBRzVLLE9BQVFzSyxJQUFNLENBQ2pFLElBQUl3NkQsRUFBWWw2RCxFQUFHTixHQUNuQixPQUFRdzZELEVBQVVyeUQsTUFDZCxLQUFLa3VELEdBQVdnQixNQUNabE4sRUFBWUEsRUFBVTc5QixJQUFJa3VDLEVBQVU1NEIsSUFBSXZ0QyxLQUN4QyxNQUNKLEtBQUtnaUUsR0FBV2tCLFFBQ1puTixFQUFjQSxFQUFZOTlCLElBQUlrdUMsRUFBVTU0QixJQUFJdnRDLE1BS3hELE9BQU8sSUFBSWcxRSxFQUFpQi83QyxFQUFVaThDLEVBQWFsZixVQUFXRixFQUFXQyxJQUV0RWlmLEVBeEIwQixHQTJDakNHLEdBQ0EsU0FBNEJuMUUsR0FDeEJnQixLQUFLaEIsSUFBTUEsR0FJZm8xRSxHQUNBLFNBQThCcDFFLEdBQzFCZ0IsS0FBS2hCLElBQU1BLEdBU2ZxMUUsR0FBc0IsV0FDdEIsU0FBU0EsRUFBS24yRCxFQUVkbzJELEdBQ0l0MEUsS0FBS2tlLE1BQVFBLEVBQ2JsZSxLQUFLczBFLGlCQUFtQkEsRUFDeEJ0MEUsS0FBS3UwRSxVQUFZLEtBT2pCdjBFLEtBQUtpdkIsU0FBVSxFQUVmanZCLEtBQUt3MEUsZUFBaUI5N0MsS0FFdEIxNEIsS0FBS3dpRSxZQUFjOXBDLEtBQ25CMTRCLEtBQUt5MEUsWUFBYyxJQUFJdlQsR0FBWWhqRCxFQUFNK3NDLGNBQWNoc0QsS0FBS2lmLElBdVVoRSxPQXJVQS9mLE9BQU9DLGVBQWVpMkUsRUFBS2gxRSxVQUFXLGtCQUFtQixDQUtyRGYsSUFBSyxXQUNELE9BQU8wQixLQUFLczBFLGtCQUVoQmoyRSxZQUFZLEVBQ1prWixjQUFjLElBWWxCODhELEVBQUtoMUUsVUFBVXExRSxrQkFBb0IsU0FBVW5TLEVBQVlvUyxHQUNyRCxJQUFJanJFLEVBQVExSixLQUNSNDBFLEVBQVlELEVBQ1ZBLEVBQWdCQyxVQUNoQixJQUFJaFQsR0FDTmlULEVBQWlCRixFQUNmQSxFQUFnQkYsWUFDaEJ6MEUsS0FBS3kwRSxZQUNQSyxFQUFpQkgsRUFDZkEsRUFBZ0JuUyxZQUNoQnhpRSxLQUFLd2lFLFlBQ1B1UyxFQUFpQkYsRUFDakJ2bUIsR0FBYyxFQVVkMG1CLEVBQWlCaDFFLEtBQUtrZSxNQUFNdXRDLG1CQUFxQm9wQixFQUFlbG5ELE9BQVMzdEIsS0FBS2tlLE1BQU1xUCxNQUNsRnNuRCxFQUFlejlDLE9BQ2YsS0FDRjY5QyxFQUFrQmoxRSxLQUFLa2UsTUFBTXd0QyxrQkFBb0JtcEIsRUFBZWxuRCxPQUFTM3RCLEtBQUtrZSxNQUFNcVAsTUFDbEZzbkQsRUFBZTE5QyxRQUNmLEtBOEVOLEdBN0VBb3JDLEVBQVd6dEMsa0JBQWlCLFNBQVU5MUIsRUFBS2syRSxHQUN2QyxJQUFJQyxFQUFTTixFQUFldjJFLElBQUlVLEdBQzVCcWtFLEVBQVM2UixhQUF1Qm5xQyxHQUFXbXFDLEVBQWMsS0FDekQ3UixJQUNBeDlELEVBQU83RyxFQUFJc3JCLFFBQVErNEMsRUFBT3JrRSxLQUFNLCtDQUM1QkEsRUFDQSxPQUNBcWtFLEVBQU9ya0UsS0FDWHFrRSxFQUFTMzVELEVBQU13VSxNQUFNbXpCLFFBQVFneUIsR0FBVUEsRUFBUyxNQUVwRCxJQUFJK1IsSUFBNEJELEdBQzFCenJFLEVBQU04NEQsWUFBWXh1RCxJQUFJbWhFLEVBQU9uMkUsS0FFL0JxMkUsSUFBNEJoUyxJQUMxQkEsRUFBTzUzQixtQkFHSi9oQyxFQUFNODRELFlBQVl4dUQsSUFBSXF2RCxFQUFPcmtFLE1BQVFxa0UsRUFBTzczQix1QkFFakQ4cEMsR0FBZ0IsRUFFaEJILEdBQVU5UixFQUNNOFIsRUFBT3pxRSxPQUFPNGYsUUFBUSs0QyxFQUFPMzRELFFBbUJwQzBxRSxJQUE4QkMsSUFDbkNULEVBQVU5UyxNQUFNLENBQUVodkQsS0FBTWt1RCxHQUFXaUIsU0FBVTExQixJQUFLODJCLElBQ2xEaVMsR0FBZ0IsR0FuQlg1ckUsRUFBTTZyRSw0QkFBNEJKLEVBQVE5UixLQUMzQ3VSLEVBQVU5UyxNQUFNLENBQ1podkQsS0FBTWt1RCxHQUFXbUIsU0FDakI1MUIsSUFBSzgyQixJQUVUaVMsR0FBZ0IsR0FDWE4sR0FDRHRyRSxFQUFNd1UsTUFBTStzQyxjQUFjb1ksRUFBUTJSLEdBQWtCLEdBQ25EQyxHQUNHdnJFLEVBQU13VSxNQUFNK3NDLGNBQWNvWSxFQUFRNFIsR0FBbUIsS0FJekQzbUIsR0FBYyxLQVNwQjZtQixHQUFVOVIsR0FDaEJ1UixFQUFVOVMsTUFBTSxDQUFFaHZELEtBQU1rdUQsR0FBV2dCLE1BQU96MUIsSUFBSzgyQixJQUMvQ2lTLEdBQWdCLEdBRVhILElBQVc5UixJQUNoQnVSLEVBQVU5UyxNQUFNLENBQUVodkQsS0FBTWt1RCxHQUFXa0IsUUFBUzMxQixJQUFLNG9DLElBQ2pERyxHQUFnQixHQUNaTixHQUFrQkMsS0FJbEIzbUIsR0FBYyxJQUdsQmduQixJQUNJalMsR0FDQTBSLEVBQWlCQSxFQUFlOTlDLElBQUlvc0MsR0FFaEN5UixFQURBTyxFQUNpQlAsRUFBZTc5QyxJQUFJajRCLEdBR25CODFFLEVBQWU1L0QsT0FBT2xXLEtBSTNDKzFFLEVBQWlCQSxFQUFlNy9ELE9BQU9sVyxHQUN2QzgxRSxFQUFpQkEsRUFBZTUvRCxPQUFPbFcsUUFLL0NnQixLQUFLa2UsTUFBTXV0QyxtQkFBcUJ6ckQsS0FBS2tlLE1BQU13dEMsaUJBQzNDLEtBQU9xcEIsRUFBZXBuRCxLQUFPM3RCLEtBQUtrZSxNQUFNcVAsT0FBTyxDQUMzQyxJQUFJNG5ELEVBQVNuMUUsS0FBS2tlLE1BQU11dEMsa0JBQ2xCc3BCLEVBQWUzOUMsT0FDZjI5QyxFQUFlNTlDLFFBQ3JCNDlDLEVBQWlCQSxFQUFlNy9ELE9BQU9pZ0UsRUFBT24yRSxLQUM5QzgxRSxFQUFpQkEsRUFBZTUvRCxPQUFPaWdFLEVBQU9uMkUsS0FDOUM0MUUsRUFBVTlTLE1BQU0sQ0FBRWh2RCxLQUFNa3VELEdBQVdrQixRQUFTMzFCLElBQUs0b0MsSUFJekQsT0FEQXR2RSxHQUFReW9ELElBQWdCcW1CLEVBQWlCLGtFQUNsQyxDQUNIRixZQUFhTSxFQUNiSCxVQUFXQSxFQUNYdG1CLFlBQWFBLEVBQ2JrVSxZQUFhc1MsSUFHckJULEVBQUtoMUUsVUFBVWsyRSw0QkFBOEIsU0FBVUosRUFBUTlSLEdBUTNELE9BQVE4UixFQUFPMXBDLG1CQUNYNDNCLEVBQU83M0Isd0JBQ042M0IsRUFBTzUzQixtQkFhaEI0b0MsRUFBS2gxRSxVQUFVa3pDLGFBQWUsU0FBVWd3QixFQUFZaVQsRUFBc0JqUSxHQUN0RSxJQUFJNzdELEVBQVExSixLQUNaNkYsR0FBUTA4RCxFQUFXalUsWUFBYSwyQ0FDaEMsSUFBSWdVLEVBQVV0aUUsS0FBS3kwRSxZQUNuQnowRSxLQUFLeTBFLFlBQWNsUyxFQUFXa1MsWUFDOUJ6MEUsS0FBS3dpRSxZQUFjRCxFQUFXQyxZQUU5QixJQUFJOXdCLEVBQVU2d0IsRUFBV3FTLFVBQVV4UyxhQUNuQzF3QixFQUFRcGYsTUFBSyxTQUFVbHFCLEVBQUlHLEdBQ3ZCLE9BdUpaLFNBQTJCSCxFQUFJRyxHQUMzQixJQUFJNG9FLEVBQVEsU0FBVXJkLEdBQ2xCLE9BQVFBLEdBQ0osS0FBS2tOLEdBQVdnQixNQUNaLE9BQU8sRUFDWCxLQUFLaEIsR0FBV21CLFNBRWhCLEtBQUtuQixHQUFXaUIsU0FJWixPQUFPLEVBQ1gsS0FBS2pCLEdBQVdrQixRQUNaLE9BQU8sRUFDWCxRQUNJLE9BQU9yOUMsRUFBSyx1QkFBeUJpdkMsS0FHakQsT0FBT3FkLEVBQU0vb0UsR0FBTStvRSxFQUFNNW9FOzs7Ozs7Ozs7Ozs7Ozs7O0dBektUa3RFLENBQWtCcnRFLEVBQUcwSyxLQUFNdkssRUFBR3VLLE9BQ2xDcEosRUFBTXdVLE1BQU0rc0MsY0FBYzdpRCxFQUFHbWtDLElBQUtoa0MsRUFBR2drQyxRQUU3Q3ZzQyxLQUFLMDFFLGtCQUFrQm5RLEdBQ3ZCLElBQUlvUSxFQUFlSCxFQUNieDFFLEtBQUt3MUUsdUJBQ0wsR0FFRkksRUFEc0MsSUFBN0I1MUUsS0FBS3cwRSxlQUFlN21ELE1BQWMzdEIsS0FBS2l2QixRQUN4Qmd5QyxHQUFVNFUsT0FBUzVVLEdBQVU2VSxNQUNyRHJULEVBQW1CbVQsSUFBaUI1MUUsS0FBS3UwRSxVQUU3QyxPQURBdjBFLEtBQUt1MEUsVUFBWXFCLEVBQ00sSUFBbkJsa0MsRUFBUXJ4QyxRQUFpQm9pRSxFQU9sQixDQUNIM0YsU0FITyxJQUFJdUYsR0FBYXJpRSxLQUFLa2UsTUFBT3FrRCxFQUFXa1MsWUFBYW5TLEVBQVM1d0IsRUFBUzZ3QixFQUFXQyxZQUFhb1QsSUFBaUIzVSxHQUFVNlUsTUFBT3JULEdBQzdHLEdBRzNCa1QsYUFBY0EsR0FQWCxDQUFFQSxhQUFjQSxJQWUvQnRCLEVBQUtoMUUsVUFBVXF6RSx1QkFBeUIsU0FBVUosR0FDOUMsT0FBSXR5RSxLQUFLaXZCLFNBQVdxakQsSUFBZ0J4WSxHQUFZeUcsU0FLNUN2Z0UsS0FBS2l2QixTQUFVLEVBQ1JqdkIsS0FBS3V5QyxhQUFhLENBQ3JCa2lDLFlBQWF6MEUsS0FBS3kwRSxZQUNsQkcsVUFBVyxJQUFJaFQsR0FDZlksWUFBYXhpRSxLQUFLd2lFLFlBQ2xCbFUsYUFBYSxJQUVXLElBSXJCLENBQUVxbkIsYUFBYyxLQU0vQnRCLEVBQUtoMUUsVUFBVTAyRSxnQkFBa0IsU0FBVS8yRSxHQUV2QyxPQUFJZ0IsS0FBS3MwRSxpQkFBaUJ0Z0UsSUFBSWhWLE9BSXpCZ0IsS0FBS3kwRSxZQUFZemdFLElBQUloVixLQU90QmdCLEtBQUt5MEUsWUFBWW4yRSxJQUFJVSxHQUFLeXNDLG9CQVVsQzRvQyxFQUFLaDFFLFVBQVVxMkUsa0JBQW9CLFNBQVVuUSxHQUN6QyxJQUFJNzdELEVBQVExSixLQUNSdWxFLElBQ0FBLEVBQWF2UixlQUFleGlELFNBQVEsU0FBVXhTLEdBQU8sT0FBUTBLLEVBQU00cUUsaUJBQW1CNXFFLEVBQU00cUUsaUJBQWlCcjlDLElBQUlqNEIsTUFDakh1bUUsRUFBYTlRLGtCQUFrQmpqRCxTQUFRLFNBQVV4UyxHQUM3QyxPQUFPNkcsRUFBTzZELEVBQU00cUUsaUJBQWlCdGdFLElBQUloVixHQUFNLHFCQUF1QkEsRUFBTSwwQkFFaEZ1bUUsRUFBYXBnQyxpQkFBaUIzekIsU0FBUSxTQUFVeFMsR0FBTyxPQUFRMEssRUFBTTRxRSxpQkFBbUI1cUUsRUFBTTRxRSxpQkFBaUJwL0QsT0FBT2xXLE1BQ3RIZ0IsS0FBS2l2QixRQUFVczJDLEVBQWF0MkMsVUFHcENvbEQsRUFBS2gxRSxVQUFVbTJFLHFCQUF1QixXQUNsQyxJQUFJOXJFLEVBQVExSixLQUVaLElBQUtBLEtBQUtpdkIsUUFDTixNQUFPLEdBSVgsSUFBSSttRCxFQUFvQmgyRSxLQUFLdzBFLGVBQzdCeDBFLEtBQUt3MEUsZUFBaUI5N0MsS0FDdEIxNEIsS0FBS3kwRSxZQUFZampFLFNBQVEsU0FBVSs2QixHQUMzQjdpQyxFQUFNcXNFLGdCQUFnQnhwQyxFQUFJdnRDLE9BQzFCMEssRUFBTThxRSxlQUFpQjlxRSxFQUFNOHFFLGVBQWV2OUMsSUFBSXNWLEVBQUl2dEMsU0FJNUQsSUFBSTB5QyxFQUFVLEdBV2QsT0FWQXNrQyxFQUFrQnhrRSxTQUFRLFNBQVV4UyxHQUMzQjBLLEVBQU04cUUsZUFBZXhnRSxJQUFJaFYsSUFDMUIweUMsRUFBUWp1QyxLQUFLLElBQUkyd0UsR0FBcUJwMUUsT0FHOUNnQixLQUFLdzBFLGVBQWVoakUsU0FBUSxTQUFVeFMsR0FDN0JnM0UsRUFBa0JoaUUsSUFBSWhWLElBQ3ZCMHlDLEVBQVFqdUMsS0FBSyxJQUFJMHdFLEdBQW1CbjFFLE9BR3JDMHlDLEdBc0JYMmlDLEVBQUtoMUUsVUFBVTQyRSw4QkFBZ0MsU0FBVUMsR0FDckRsMkUsS0FBS3MwRSxpQkFBbUI0QixFQUFZam9CLFdBQ3BDanVELEtBQUt3MEUsZUFBaUI5N0MsS0FDdEIsSUFBSTZwQyxFQUFhdmlFLEtBQUswMEUsa0JBQWtCd0IsRUFBWTU1QixXQUNwRCxPQUFPdDhDLEtBQUt1eUMsYUFBYWd3QixHQUFzQyxJQVFuRThSLEVBQUtoMUUsVUFBVTgyRSx1QkFBeUIsV0FDcEMsT0FBTzlULEdBQWFNLHFCQUFxQjNpRSxLQUFLa2UsTUFBT2xlLEtBQUt5MEUsWUFBYXowRSxLQUFLd2lFLFlBQWF4aUUsS0FBS3UwRSxZQUFjdFQsR0FBVTZVLFFBRW5IekIsRUF6VmM7Ozs7Ozs7Ozs7Ozs7Ozs7R0FnWXpCLElBQUkrQixHQUFjLEVBS2RDLEdBQW1DLFdBQ25DLFNBQVNBLEVBQWtCdm1ELEVBQVl3bUQsRUFBYUMsRUFBZ0J0aUUsR0FDaEVqVSxLQUFLOHZCLFdBQWFBLEVBQ2xCOXZCLEtBQUtzMkUsWUFBY0EsRUFDbkJ0MkUsS0FBS3UyRSxlQUFpQkEsRUFDdEJ2MkUsS0FBS2lVLFNBQVdBLEVBQ2hCalUsS0FBS3cyRSxRQUFVSixHQUNmcDJFLEtBQUswNkQsUUFBVSxJQUFJekIsR0FBbUJqNUQsS0FBSzh2QixXQUFZbEYsR0FBUTZyRCxrQkE2RW5FLE9BMUVBSixFQUFrQmgzRSxVQUFVcTNFLElBQU0sV0FDOUIxMkUsS0FBSzIyRSxrQkFFVE4sRUFBa0JoM0UsVUFBVXMzRSxlQUFpQixXQUN6QyxJQUFJanRFLEVBQVExSixLQUNaQSxLQUFLMDZELFFBQVFqQixlQUFjLFdBQWMsT0FBT2owRCxFQUFNOUQsVUFBVWdJLE9BQU8sT0FBUSxHQUFRLFdBQ25GLElBQUl5VCxFQUFhK2lCLEVBQ2J4MkIsRUFBUTFKLEtBQ1osT0FBT3dGLEVBQU0vQyxZQUFZekMsTUFBTSxTQUFVaUwsR0FxQnJDLE9BcEJBa1MsRUFBY25kLEtBQUtzMkUsWUFBWTFNLHFCQUMvQjFwQyxFQUFjbGdDLEtBQUs0MkUscUJBQXFCejVELEtBRXBDK2lCLEVBQ0sxOUIsTUFBSyxTQUFVRixHQUNoQm9ILEVBQU1vbUIsV0FBV2Usa0JBQWlCLFdBQzlCLE9BQU8xVCxFQUNGb2hELFNBQ0EvN0QsTUFBSyxXQUNOa0gsRUFBTXVLLFNBQVNqUyxRQUFRTSxNQUV0QndILE9BQU0sU0FBVStzRSxHQUNqQm50RSxFQUFNb3RFLHVCQUF1QkQsWUFJcEMvc0UsT0FBTSxTQUFVaXRFLEdBQ2pCcnRFLEVBQU1vdEUsdUJBQXVCQyxNQUc5QixDQUFDLGFBSXBCVixFQUFrQmgzRSxVQUFVdTNFLHFCQUF1QixTQUFVejVELEdBQ3pELElBQ0ksSUFBSStpQixFQUFjbGdDLEtBQUt1MkUsZUFBZXA1RCxHQUN0QyxPQUFJa3JDLEdBQWtCbm9CLElBQ2pCQSxFQUFZcDJCLE9BQ1pvMkIsRUFBWTE5QixLQUlWMDlCLEdBSEhsZ0MsS0FBS2lVLFNBQVNoUyxPQUFPZ0UsTUFBTSwrQ0FDcEIsTUFJZixNQUFPbkMsR0FHSCxPQURBOUQsS0FBS2lVLFNBQVNoUyxPQUFPNkIsR0FDZCxPQUdmdXlFLEVBQWtCaDNFLFVBQVV5M0UsdUJBQXlCLFNBQVVoekUsR0FDM0QsSUFBSTRGLEVBQVExSixLQUNSQSxLQUFLdzJFLFFBQVUsR0FBS3gyRSxLQUFLZzNFLDRCQUE0Qmx6RSxJQUNyRDlELEtBQUt3MkUsU0FBVyxFQUNoQngyRSxLQUFLOHZCLFdBQVdlLGtCQUFpQixXQUU3QixPQURBbm5CLEVBQU1pdEUsaUJBQ0M1MEUsUUFBUUMsY0FJbkJoQyxLQUFLaVUsU0FBU2hTLE9BQU82QixJQUc3QnV5RSxFQUFrQmgzRSxVQUFVMjNFLDRCQUE4QixTQUFVbHpFLEdBQ2hFLEdBQW1CLGtCQUFmQSxFQUFNOUYsS0FBMEIsQ0FHaEMsSUFBSW9NLEVBQU90RyxFQUFNc0csS0FDakIsTUFBaUIsWUFBVEEsR0FDSyx3QkFBVEEsSUFDQ3kyRCxHQUFpQnoyRCxHQUUxQixPQUFPLEdBRUppc0UsRUFwRjJCLEdBNEdsQ1ksR0FDQSxTQUlBLzRELEVBS0ErWixFQU9BaS9DLEdBQ0lsM0UsS0FBS2tlLE1BQVFBLEVBQ2JsZSxLQUFLaTRCLFNBQVdBLEVBQ2hCajRCLEtBQUtrM0UsS0FBT0EsR0FLaEIzUSxHQUNBLFNBQXlCdm5FLEdBQ3JCZ0IsS0FBS2hCLElBQU1BLEVBT1hnQixLQUFLbTNFLGtCQUFtQixHQWtCNUJyd0MsR0FBNEIsV0FDNUIsU0FBU0EsRUFBV2dZLEVBQVl3M0IsRUFFaENjLEVBQW1CQyxHQUNmcjNFLEtBQUs4K0MsV0FBYUEsRUFDbEI5K0MsS0FBS3MyRSxZQUFjQSxFQUNuQnQyRSxLQUFLbzNFLGtCQUFvQkEsRUFDekJwM0UsS0FBS3EzRSxZQUFjQSxFQUNuQnIzRSxLQUFLczNFLG1CQUFxQixLQUMxQnQzRSxLQUFLdTNFLGtCQUFvQixJQUFJcm1DLElBQVUsU0FBVXhzQyxHQUM3QyxPQUFPQSxFQUFFbWtDLGlCQUViN29DLEtBQUt3M0UsZ0JBQWtCLEdBQ3ZCeDNFLEtBQUt5M0Usa0JBQW9CLElBQUlyakQsR0FBVWhGLEdBQVloQyxZQUNuRHB0QixLQUFLMDNFLHlCQUEyQixHQUNoQzEzRSxLQUFLMjNFLGtCQUFvQixJQUFJbG5CLEdBRTdCendELEtBQUs0M0Usc0JBQXdCLEdBRTdCNTNFLEtBQUs2M0UsdUJBQXlCLElBQUlsa0UsSUFDbEMzVCxLQUFLODNFLHVCQUF5Qnp4QyxHQUFrQlEsZ0JBSWhEN21DLEtBQUtzaEQsZUFBWS8zQyxFQUNqQnZKLEtBQUtzeUUsWUFBY3hZLEdBQVlpRyxRQSsrQm5DLE9BNytCQTVoRSxPQUFPQyxlQUFlMG9DLEVBQVd6bkMsVUFBVyxrQkFBbUIsQ0FFM0RmLElBQUssV0FDRCxPQUEwQixJQUFuQjBCLEtBQUtzaEQsV0FFaEJqakQsWUFBWSxFQUNaa1osY0FBYyxJQUdsQnV2QixFQUFXem5DLFVBQVU0TyxVQUFZLFNBQVVxcEUsR0FDdkN6eEUsRUFBOEIsT0FBdkJ5eEUsRUFBNkIsc0NBQ3BDenhFLEVBQW1DLE9BQTVCN0YsS0FBS3MzRSxtQkFBNkIsd0NBQ3pDdDNFLEtBQUtzM0UsbUJBQXFCQSxHQU85Qnh3QyxFQUFXem5DLFVBQVVrcEUsT0FBUyxTQUFVcnFELEdBQ3BDLE9BQU8xWSxFQUFNOUQsVUFBVTFCLFVBQU0sT0FBUSxHQUFRLFdBQ3pDLElBQUlpNEIsRUFBVWk4QyxFQUFjNkQsRUFBV253QyxFQUFZb3dDLEVBQ25ELE9BQU94eUUsRUFBTS9DLFlBQVl6QyxNQUFNLFNBQVVpTCxHQUNyQyxPQUFRQSxFQUFHbEksT0FDUCxLQUFLLEVBR0QsT0FGQS9DLEtBQUtpNEUsaUJBQWlCLGFBQ3RCRixFQUFZLzNFLEtBQUt1M0Usa0JBQWtCajVFLElBQUk0ZixLQVF2QytaLEVBQVc4L0MsRUFBVTkvQyxTQUNyQmo0QixLQUFLbzNFLGtCQUFrQmMsb0JBQW9CamdELEdBQzNDaThDLEVBQWU2RCxFQUFVYixLQUFLZix5QkFDdkIsQ0FBQyxFQUFhLElBVkUsQ0FBQyxFQUFhLEdBV3pDLEtBQUssRUFBRyxNQUFPLENBQUMsRUFBYW4yRSxLQUFLOCtDLFdBQVd1VyxlQUFlbjNDLEVBQU04c0MsYUFDbEUsS0FBSyxFQUlELE9BSEFwakIsRUFBYTM4QixFQUFHakksT0FDaEJnMUUsRUFBV2g0RSxLQUFLbzNFLGtCQUFrQmMsb0JBQW9CdHdDLEVBQVczUCxVQUNqRUEsRUFBVzJQLEVBQVczUCxTQUNmLENBQUMsRUFBYWo0QixLQUFLbTRFLGlDQUFpQ2o2RCxFQUFPK1osRUFBdUIsWUFBYisvQyxJQUNoRixLQUFLLEVBQ0Q5RCxFQUFlanBFLEVBQUdqSSxPQUNkaEQsS0FBS3NoRCxXQUNMdGhELEtBQUtzMkUsWUFBWS9OLE9BQU8zZ0MsR0FFNUIzOEIsRUFBR2xJLE1BQVEsRUFDZixLQUFLLEVBRUQsT0FEQS9DLEtBQUtzM0UsbUJBQW1CdGEsY0FBYyxDQUFDa1gsSUFDaEMsQ0FBQyxFQUFjajhDLFdBUzFDNk8sRUFBV3puQyxVQUFVODRFLGlDQUFtQyxTQUFVajZELEVBQU8rWixFQUFVaEosR0FDL0UsT0FBT3pwQixFQUFNOUQsVUFBVTFCLFVBQU0sT0FBUSxHQUFRLFdBQ3pDLElBQUlrMkUsRUFBYWdCLEVBQU1rQixFQUFnQkMsRUFBeUJ4akIsRUFBWW5xRCxFQUM1RSxPQUFPbEYsRUFBTS9DLFlBQVl6QyxNQUFNLFNBQVVpTCxHQUNyQyxPQUFRQSxFQUFHbEksT0FDUCxLQUFLLEVBQUcsTUFBTyxDQUFDLEVBQWEvQyxLQUFLOCtDLFdBQVc0VyxhQUFheDNDLEdBQzVCLElBQzlCLEtBQUssRUFlRCxPQWRBZzRELEVBQWNqckUsRUFBR2pJLE9BQ2pCazBFLEVBQU8sSUFBSTdDLEdBQUtuMkQsRUFBT2c0RCxFQUFZam9CLFlBQ25DbXFCLEVBQWlCbEIsRUFBS3hDLGtCQUFrQndCLEVBQVk1NUIsV0FDcEQrN0IsRUFBMEJyVixHQUFhQyw4Q0FBOENockMsRUFBVWhKLEdBQVdqdkIsS0FBS3N5RSxjQUFnQnhZLEdBQVl5RyxTQUczSTE2RCxFQUEwQyxLQUYxQ2d2RCxFQUFhcWlCLEVBQUsza0MsYUFBYTZsQyxHQUNnQixJQUFuQnA0RSxLQUFLc2hELFVBQW9CKzJCLElBQ25DMUMsYUFBYXQxRSxPQUFjLCtEQUM3Q3dGLElBQVNndkQsRUFBV2lJLFNBQVUsNkRBQzlCcHlELEVBQU8sSUFBSXVzRSxHQUFVLzRELEVBQU8rWixFQUFVaS9DLEdBQ3RDbDNFLEtBQUt1M0Usa0JBQWtCcmpFLElBQUlnSyxFQUFPeFQsR0FDN0IxSyxLQUFLdzNFLGdCQUFnQnYvQyxLQUN0Qmo0QixLQUFLdzNFLGdCQUFnQnYvQyxHQUFZLElBRXJDajRCLEtBQUt3M0UsZ0JBQWdCdi9DLEdBQVV4MEIsS0FBS3lhLEdBQzdCLENBQUMsRUFBYzIyQyxFQUFXaUksa0JBVXJEaDJCLEVBQVd6bkMsVUFBVWk1RSxrQ0FBb0MsU0FBVVAsR0FDL0QsT0FBT3Z5RSxFQUFNOUQsVUFBVTFCLFVBQU0sT0FBUSxHQUFRLFdBQ3pDLElBQUlrMkUsRUFBYWhDLEVBQ2pCLE9BQU8xdUUsRUFBTS9DLFlBQVl6QyxNQUFNLFNBQVVpTCxHQUNyQyxPQUFRQSxFQUFHbEksT0FDUCxLQUFLLEVBQUcsTUFBTyxDQUFDLEVBQWEvQyxLQUFLOCtDLFdBQVc0VyxhQUFhcWlCLEVBQVU3NUQsT0FDdEMsSUFDOUIsS0FBSyxFQU1ELE9BTEFnNEQsRUFBY2pyRSxFQUFHakksT0FDakJreEUsRUFBZTZELEVBQVViLEtBQUtqQiw4QkFBOEJDLEdBQ3hEbDJFLEtBQUtzaEQsV0FDTHRoRCxLQUFLdTRFLG9CQUFvQlIsRUFBVTkvQyxTQUFVaThDLEVBQWF5QixjQUV2RCxDQUFDLEVBQWN6QixXQU0xQ3B0QyxFQUFXem5DLFVBQVVvcEUsU0FBVyxTQUFVdnFELEdBQ3RDLE9BQU8xWSxFQUFNOUQsVUFBVTFCLFVBQU0sT0FBUSxHQUFRLFdBQ3pDLElBQUkrM0UsRUFBVzFGLEVBQ1gzb0UsRUFBUTFKLEtBQ1osT0FBT3dGLEVBQU0vQyxZQUFZekMsTUFBTSxTQUFVaUwsR0FDckMsT0FBUUEsRUFBR2xJLE9BQ1AsS0FBSyxFQUtELE9BSkEvQyxLQUFLaTRFLGlCQUFpQixjQUV0QnB5RSxLQURBa3lFLEVBQVkvM0UsS0FBS3UzRSxrQkFBa0JqNUUsSUFBSTRmLElBQ25CLHlDQUEyQ0EsSUFDL0RtMEQsRUFBVXJ5RSxLQUFLdzNFLGdCQUFnQk8sRUFBVTkvQyxXQUM3QjUzQixPQUFTLEdBQ2pCTCxLQUFLdzNFLGdCQUFnQk8sRUFBVTkvQyxVQUFZbzZDLEVBQVE5OEQsUUFBTyxTQUFVN1EsR0FBSyxPQUFRQSxFQUFFNGxCLFFBQVFwTSxNQUMzRmxlLEtBQUt1M0Usa0JBQWtCcmlFLE9BQU9nSixHQUN2QixDQUFDLElBRVBsZSxLQUFLc2hELFdBR1Z0aEQsS0FBS28zRSxrQkFBa0JvQix1QkFBdUJULEVBQVU5L0MsVUFDbENqNEIsS0FBS28zRSxrQkFBa0JxQixvQkFBb0JWLEVBQVU5L0MsVUFDekMsQ0FBQyxFQUFhLEdBQ3pDLENBQUMsRUFBYWo0QixLQUFLOCtDLFdBQ2pCeVcsY0FBY3dpQixFQUFVOS9DLFVBQXVDLEdBQy9EejFCLE1BQUssV0FDTmtILEVBQU0wdEUsa0JBQWtCc0IsZ0JBQWdCWCxFQUFVOS9DLFVBQ2xEdnVCLEVBQU00c0UsWUFBWTdOLFNBQVNzUCxFQUFVOS9DLFVBQ3JDdnVCLEVBQU1pdkUsdUJBQXVCWixFQUFVOS9DLGFBRXRDbnVCLE1BQU13MUMsTUFiYSxDQUFDLEVBQWEsR0FjOUMsS0FBSyxFQUNEcjBDLEVBQUdqSSxPQUNIaUksRUFBR2xJLE1BQVEsRUFDZixLQUFLLEVBQUcsTUFBTyxDQUFDLEVBQWEsR0FDN0IsS0FBSyxFQUVELE9BREEvQyxLQUFLMjRFLHVCQUF1QlosRUFBVTkvQyxVQUMvQixDQUFDLEVBQWFqNEIsS0FBSzgrQyxXQUFXeVcsY0FBY3dpQixFQUFVOS9DLFVBQzVCLElBQ3JDLEtBQUssRUFDRGh0QixFQUFHakksT0FDSGlJLEVBQUdsSSxNQUFRLEVBQ2YsS0FBSyxFQUFHLE1BQU8sQ0FBQyxXQWVoQytqQyxFQUFXem5DLFVBQVVpZ0UsTUFBUSxTQUFVcGxDLEVBQU8wK0MsR0FDMUMsT0FBT3B6RSxFQUFNOUQsVUFBVTFCLFVBQU0sT0FBUSxHQUFRLFdBQ3pDLElBQUlzQyxFQUNKLE9BQU9rRCxFQUFNL0MsWUFBWXpDLE1BQU0sU0FBVWlMLEdBQ3JDLE9BQVFBLEVBQUdsSSxPQUNQLEtBQUssRUFFRCxPQURBL0MsS0FBS2k0RSxpQkFBaUIsV0FDZixDQUFDLEVBQWFqNEUsS0FBSzgrQyxXQUFXa1UsV0FBVzk0QixJQUNwRCxLQUFLLEVBSUQsT0FIQTUzQixFQUFTMkksRUFBR2pJLE9BQ1poRCxLQUFLbzNFLGtCQUFrQnlCLG1CQUFtQnYyRSxFQUFPeTJCLFNBQ2pELzRCLEtBQUs4NEUsb0JBQW9CeDJFLEVBQU95MkIsUUFBUzYvQyxHQUNsQyxDQUFDLEVBQWE1NEUsS0FBSys0RSxnQ0FBZ0N6MkUsRUFBT292QyxVQUNyRSxLQUFLLEVBRUQsT0FEQXptQyxFQUFHakksT0FDSSxDQUFDLEVBQWFoRCxLQUFLczJFLFlBQVluTyxxQkFDMUMsS0FBSyxFQUVELE9BREFsOUQsRUFBR2pJLE9BQ0ksQ0FBQyxXQXNCNUI4akMsRUFBV3puQyxVQUFVbStCLGVBQWlCLFNBQVUxTixFQUFZeW1ELEVBQWdCdGlFLEdBQ3hFLElBQUlvaUUsR0FBa0J2bUQsRUFBWTl2QixLQUFLczJFLFlBQWFDLEVBQWdCdGlFLEdBQVV5aUUsT0FFbEY1dkMsRUFBV3puQyxVQUFVbzBELGlCQUFtQixTQUFVQyxHQUM5QyxPQUFPbHVELEVBQU05RCxVQUFVMUIsVUFBTSxPQUFRLEdBQVEsV0FDekMsSUFBSTB4QyxFQUNBaG9DLEVBQVExSixLQUNaLE9BQU93RixFQUFNL0MsWUFBWXpDLE1BQU0sU0FBVWlMLEdBQ3JDLE9BQVFBLEVBQUdsSSxPQUNQLEtBQUssRUFDRC9DLEtBQUtpNEUsaUJBQWlCLHNCQUN0Qmh0RSxFQUFHbEksTUFBUSxFQUNmLEtBQUssRUFFRCxPQURBa0ksRUFBR2hJLEtBQUtRLEtBQUssQ0FBQyxFQUFHLEVBQUcsQ0FBRSxJQUNmLENBQUMsRUFBYXpELEtBQUs4K0MsV0FBVzJVLGlCQUFpQkMsSUFDMUQsS0FBSyxFQXdCRCxPQXZCQWhpQixFQUFVem1DLEVBQUdqSSxPQUVid08sRUFBUWtpRCxFQUFZRyxlQUFlLFNBQVU1N0IsRUFBVXN0QyxHQUNuRCxJQUFJeVQsRUFBa0J0dkUsRUFBTWd1RSx5QkFBeUI5d0QsT0FBT3FSLElBQ3hEK2dELElBR0FuekUsRUFBTzAvRCxFQUFhdlIsZUFBZXJtQyxLQUMvQjQzQyxFQUFhOVEsa0JBQWtCOW1DLEtBQy9CNDNDLEVBQWFwZ0MsaUJBQWlCeFgsTUFDOUIsRUFBRyxtRUFDSDQzQyxFQUFhdlIsZUFBZXJtQyxLQUFPLEVBQ25DcXJELEVBQWdCN0Isa0JBQW1CLEVBRTlCNVIsRUFBYTlRLGtCQUFrQjltQyxLQUFPLEVBQzNDOW5CLEVBQU9tekUsRUFBZ0I3QixpQkFBa0IsMERBRXBDNVIsRUFBYXBnQyxpQkFBaUJ4WCxLQUFPLElBQzFDOW5CLEVBQU9tekUsRUFBZ0I3QixpQkFBa0IsMERBQ3pDNkIsRUFBZ0I3QixrQkFBbUIsT0FJeEMsQ0FBQyxFQUFhbjNFLEtBQUsrNEUsZ0NBQWdDcm5DLEVBQVNnaUIsSUFDdkUsS0FBSyxFQUVELE9BREF6b0QsRUFBR2pJLE9BQ0ksQ0FBQyxFQUFhLEdBQ3pCLEtBQUssRUFFRCxNQUFPLENBQUMsRUFBYXM4QyxHQURYcjBDLEVBQUdqSSxTQUVqQixLQUFLLEVBRUQsT0FEQWlJLEVBQUdqSSxPQUNJLENBQUMsRUFBYSxHQUN6QixLQUFLLEVBQUcsTUFBTyxDQUFDLFdBU2hDOGpDLEVBQVd6bkMsVUFBVXF6RSx1QkFBeUIsU0FBVUosRUFBYWxwRSxHQUtqRSxHQUFLcEosS0FBS3NoRCxXQUFhbDRDLElBQVcyd0QsR0FBa0IrTSxjQUM5QzltRSxLQUFLc2hELFdBQWFsNEMsSUFBVzJ3RCxHQUFrQmtmLGtCQUFvQixDQUNyRWo1RSxLQUFLaTRFLGlCQUFpQiw0QkFDdEIsSUFBSWlCLEVBQXFCLEdBQ3pCbDVFLEtBQUt1M0Usa0JBQWtCL2xFLFNBQVEsU0FBVTBNLEVBQU82NUQsR0FDNUMsSUFBSWxqQixFQUFha2pCLEVBQVViLEtBQUt4RSx1QkFBdUJKLEdBQ3ZEenNFLEVBQTBDLElBQW5DZ3ZELEVBQVc4Z0IsYUFBYXQxRSxPQUFjLGtEQUN6Q3cwRCxFQUFXaUksVUFDWG9jLEVBQW1CejFFLEtBQUtveEQsRUFBV2lJLGFBRzNDOThELEtBQUtzM0UsbUJBQW1CcEUsb0JBQW9CWixHQUM1Q3R5RSxLQUFLczNFLG1CQUFtQnRhLGNBQWNrYyxHQUN0Q2w1RSxLQUFLc3lFLFlBQWNBLEVBQ2Z0eUUsS0FBS3NoRCxXQUNMdGhELEtBQUtvM0Usa0JBQWtCK0IsZUFBZTdHLEtBSWxEeHJDLEVBQVd6bkMsVUFBVTJwRSxhQUFlLFNBQVUvd0MsRUFBVW5wQixHQUNwRCxPQUFPdEosRUFBTTlELFVBQVUxQixVQUFNLE9BQVEsR0FBUSxXQUN6QyxJQUFJZzVFLEVBQWlCSSxFQUFVaGxCLEVBQWlCRSxFQUF3QitrQixFQUNwRTN2RSxFQUFRMUosS0FDWixPQUFPd0YsRUFBTS9DLFlBQVl6QyxNQUFNLFNBQVVpTCxHQUNyQyxPQUFRQSxFQUFHbEksT0FDUCxLQUFLLEVBTUQsT0FMQS9DLEtBQUtpNEUsaUJBQWlCLG1CQUV0Qmo0RSxLQUFLbzNFLGtCQUFrQmtDLGlCQUFpQnJoRCxFQUFVLFdBQVlucEIsR0FDOURrcUUsRUFBa0JoNUUsS0FBSzAzRSx5QkFBeUJ6L0MsSUFDaERtaEQsRUFBV0osR0FBbUJBLEVBQWdCaDZFLE1BSTlDZ0IsS0FBS3kzRSxrQkFBb0J6M0UsS0FBS3kzRSxrQkFBa0JuMkQsT0FBTzgzRCxVQUNoRHA1RSxLQUFLMDNFLHlCQUF5QnovQyxHQUVyQ204QixHQURBQSxFQUFrQixJQUFJaGdDLEdBQVVoRixHQUFZaEMsYUFDVnBNLE9BQU9vNEQsRUFBVSxJQUFJanNDLEdBQVdpc0MsRUFBVXhsRCxHQUFnQkksa0JBQzVGc2dDLEVBQXlCNTdCLEtBQWlCekIsSUFBSW1pRCxHQUM5Q0MsRUFBVSxJQUFJeFcsR0FBWWp2QyxHQUFnQkssSUFDckIsR0FDRyxJQUFJOEMsR0FBVTdNLEdBQXNCa3FDLEVBQWlCRSxHQUN0RSxDQUFDLEVBQWN0MEQsS0FBS3l6RCxpQkFBaUI0bEIsS0FYdEIsQ0FBQyxFQUFhLEdBWXhDLEtBQUssRUFBRyxNQUFPLENBQUMsRUFBYXI1RSxLQUFLOCtDLFdBQ3pCeVcsY0FBY3Q5QixHQUF3QyxHQUN0RHoxQixNQUFLLFdBQWMsT0FBT2tILEVBQU1pdkUsdUJBQXVCMWdELEVBQVVucEIsTUFDakVoRixNQUFNdzFDLEtBQ2YsS0FBSyxFQUNEcjBDLEVBQUdqSSxPQUNIaUksRUFBR2xJLE1BQVEsRUFDZixLQUFLLEVBQUcsTUFBTyxDQUFDLFdBTWhDK2pDLEVBQVd6bkMsVUFBVWs2RSxnQkFBa0IsU0FBVXhnRCxFQUFTeWdELEVBQVkxMUUsR0FDbEUsT0FBTzBCLEVBQU05RCxVQUFVMUIsVUFBTSxPQUFRLEdBQVEsV0FDekMsSUFBSXM4QyxFQUNKLE9BQU85MkMsRUFBTS9DLFlBQVl6QyxNQUFNLFNBQVVpTCxHQUNyQyxPQUFRQSxFQUFHbEksT0FDUCxLQUFLLEVBRUQsT0FEQS9DLEtBQUtpNEUsaUJBQWlCLHFCQUNmLENBQUMsRUFBYWo0RSxLQUFLOCtDLFdBQVdxVSx3QkFBd0JwNkIsSUFDakUsS0FBSyxFQUVELE9BQWtCLFFBRGxCdWpCLEVBQVlyeEMsRUFBR2pJLFNBU1gyVSxFQTdhWixhQTZhNkIsd0NBQTBDb2hCLEdBQ3BELENBQUMsSUFFUyxZQUFmeWdELEVBQWtDLENBQUMsRUFBYSxHQUkvQyxDQUFDLEVBQWF4NUUsS0FBS3MyRSxZQUFZbk8scUJBQzFDLEtBQUssRUFLRCxPQURBbDlELEVBQUdqSSxPQUNJLENBQUMsRUFBYSxHQUN6QixLQUFLLEVBQ2tCLGlCQUFmdzJFLEdBQWdELGFBQWZBLEdBR2pDeDVFLEtBQUt5NUUsb0JBQW9CMWdELEVBQVNqMUIsR0FBZ0IsTUFDbEQ5RCxLQUFLOCtDLFdBQVcrVyxrQ0FBa0M5OEIsSUFHbERsVSxFQUFLLHVCQUF5QjIwRCxHQUVsQ3Z1RSxFQUFHbEksTUFBUSxFQUNmLEtBQUssRUFBRyxNQUFPLENBQUMsRUFBYS9DLEtBQUsrNEUsZ0NBQWdDejhCLElBQ2xFLEtBQUssRUFFRCxPQURBcnhDLEVBQUdqSSxPQUNJLENBQUMsV0FLNUI4akMsRUFBV3puQyxVQUFVbXFFLHFCQUF1QixTQUFVa1EsR0FDbEQsT0FBT2wwRSxFQUFNOUQsVUFBVTFCLFVBQU0sT0FBUSxHQUFRLFdBQ3pDLElBQUkrNEIsRUFBUzJZLEVBQ2IsT0FBT2xzQyxFQUFNL0MsWUFBWXpDLE1BQU0sU0FBVWlMLEdBQ3JDLE9BQVFBLEVBQUdsSSxPQUNQLEtBQUssRUFDRC9DLEtBQUtpNEUsaUJBQWlCLDBCQUN0QmwvQyxFQUFVMmdELEVBQW9CeC9DLE1BQU1uQixRQUtwQy80QixLQUFLeTVFLG9CQUFvQjFnRCxFQUFvQixNQUM3Qy80QixLQUFLMjVFLDhCQUE4QjVnRCxHQUNuQzl0QixFQUFHbEksTUFBUSxFQUNmLEtBQUssRUFFRCxPQURBa0ksRUFBR2hJLEtBQUtRLEtBQUssQ0FBQyxFQUFHLEVBQUcsQ0FBRSxJQUNmLENBQUMsRUFBYXpELEtBQUs4K0MsV0FBVy9jLGlCQUFpQjIzQyxJQUMxRCxLQUFLLEVBR0QsT0FGQWhvQyxFQUFVem1DLEVBQUdqSSxPQUNiaEQsS0FBS28zRSxrQkFBa0J3QyxvQkFBb0I3Z0QsRUFBUyxnQkFDN0MsQ0FBQyxFQUFhLzRCLEtBQUsrNEUsZ0NBQWdDcm5DLElBQzlELEtBQUssRUFFRCxPQURBem1DLEVBQUdqSSxPQUNJLENBQUMsRUFBYSxHQUN6QixLQUFLLEVBRUQsTUFBTyxDQUFDLEVBQWFzOEMsR0FEWHIwQyxFQUFHakksU0FFakIsS0FBSyxFQUVELE9BREFpSSxFQUFHakksT0FDSSxDQUFDLEVBQWEsR0FDekIsS0FBSyxFQUFHLE1BQU8sQ0FBQyxXQUtoQzhqQyxFQUFXem5DLFVBQVVzcUUsa0JBQW9CLFNBQVU1d0MsRUFBU2oxQixHQUN4RCxPQUFPMEIsRUFBTTlELFVBQVUxQixVQUFNLE9BQVEsR0FBUSxXQUN6QyxJQUFJMHhDLEVBQ0osT0FBT2xzQyxFQUFNL0MsWUFBWXpDLE1BQU0sU0FBVWlMLEdBQ3JDLE9BQVFBLEVBQUdsSSxPQUNQLEtBQUssRUFDRC9DLEtBQUtpNEUsaUJBQWlCLHVCQUt0Qmo0RSxLQUFLeTVFLG9CQUFvQjFnRCxFQUFTajFCLEdBQ2xDOUQsS0FBSzI1RSw4QkFBOEI1Z0QsR0FDbkM5dEIsRUFBR2xJLE1BQVEsRUFDZixLQUFLLEVBRUQsT0FEQWtJLEVBQUdoSSxLQUFLUSxLQUFLLENBQUMsRUFBRyxFQUFHLENBQUUsSUFDZixDQUFDLEVBQWF6RCxLQUFLOCtDLFdBQVd5VSxZQUFZeDZCLElBQ3JELEtBQUssRUFHRCxPQUZBMlksRUFBVXptQyxFQUFHakksT0FDYmhELEtBQUtvM0Usa0JBQWtCd0Msb0JBQW9CN2dELEVBQVMsV0FBWWoxQixHQUN6RCxDQUFDLEVBQWE5RCxLQUFLKzRFLGdDQUFnQ3JuQyxJQUM5RCxLQUFLLEVBRUQsT0FEQXptQyxFQUFHakksT0FDSSxDQUFDLEVBQWEsR0FDekIsS0FBSyxFQUVELE1BQU8sQ0FBQyxFQUFhczhDLEdBRFhyMEMsRUFBR2pJLFNBRWpCLEtBQUssRUFFRCxPQURBaUksRUFBR2pJLE9BQ0ksQ0FBQyxFQUFhLEdBQ3pCLEtBQUssRUFBRyxNQUFPLENBQUMsV0FTaEM4akMsRUFBV3puQyxVQUFVdzZFLDhCQUFnQyxTQUFVaHdFLEdBQzNELE9BQU9yRSxFQUFNOUQsVUFBVTFCLFVBQU0sT0FBUSxHQUFRLFdBQ3pDLElBQUk4NUUsRUFBZ0JDLEVBQ3BCLE9BQU92MEUsRUFBTS9DLFlBQVl6QyxNQUFNLFNBQVVpTCxHQUNyQyxPQUFRQSxFQUFHbEksT0FDUCxLQUFLLEVBS0QsT0FKSy9DLEtBQUtzMkUsWUFBWWpQLGlCQUNsQjF2RCxFQWhpQlosYUFnaUI2Qix3SEFHZCxDQUFDLEVBQWEzWCxLQUFLOCtDLFdBQVduYixtQ0FDekMsS0FBSyxFQUVELE9BbGdlRixLQWlnZUVtMkMsRUFBaUI3dUUsRUFBR2pJLFNBR2hCNkcsRUFBUzdILFVBQ0YsQ0FBQyxNQUVaKzNFLEVBQVkvNUUsS0FBSzYzRSx1QkFBdUJ2NUUsSUFBSXc3RSxJQUFtQixJQUNyRHIyRSxLQUFLb0csR0FDZjdKLEtBQUs2M0UsdUJBQXVCM2pFLElBQUk0bEUsRUFBZ0JDLEdBQ3pDLENBQUMsWUFTNUJqekMsRUFBV3puQyxVQUFVczZFLDhCQUFnQyxTQUFVNWdELElBQzFELzRCLEtBQUs2M0UsdUJBQXVCdjVFLElBQUl5NkIsSUFBWSxJQUFJdm5CLFNBQVEsU0FBVTNILEdBQy9EQSxFQUFTN0gsYUFFYmhDLEtBQUs2M0UsdUJBQXVCM2lFLE9BQU82akIsSUFHdkMrTixFQUFXem5DLFVBQVUyNkUsd0NBQTBDLFNBQVVDLEdBQ3JFajZFLEtBQUs2M0UsdUJBQXVCcm1FLFNBQVEsU0FBVXVvRSxHQUMxQ0EsRUFBVXZvRSxTQUFRLFNBQVUzSCxHQUN4QkEsRUFBUzVILE9BQU8sSUFBSWlrQixFQUFlakIsRUFBS0UsVUFBVzgwRCxVQUczRGo2RSxLQUFLNjNFLHVCQUF1QnFDLFNBRWhDcHpDLEVBQVd6bkMsVUFBVXk1RSxvQkFBc0IsU0FBVS8vQyxFQUFTbHZCLEdBQzFELElBQUlzd0UsRUFBZW42RSxLQUFLNDNFLHNCQUFzQjUzRSxLQUFLcTNFLFlBQVluZixTQUMxRGlpQixJQUNEQSxFQUFlLElBQUkvbEQsR0FBVWxLLElBRWpDaXdELEVBQWVBLEVBQWFuNUQsT0FBTytYLEVBQVNsdkIsR0FDNUM3SixLQUFLNDNFLHNCQUFzQjUzRSxLQUFLcTNFLFlBQVluZixTQUFXaWlCLEdBTTNEcnpDLEVBQVd6bkMsVUFBVW82RSxvQkFBc0IsU0FBVTFnRCxFQUFTajFCLEdBQzFELElBQUlxMkUsRUFBZW42RSxLQUFLNDNFLHNCQUFzQjUzRSxLQUFLcTNFLFlBQVluZixTQUcvRCxHQUFJaWlCLEVBQWMsQ0FDZCxJQUFJdHdFLEVBQVdzd0UsRUFBYTc3RSxJQUFJeTZCLEdBQzVCbHZCLElBQ0FoRSxFQUFPa3pCLElBQVlvaEQsRUFBYXZsRCxTQUFVLDhDQUN0Qzl3QixFQUNBK0YsRUFBUzVILE9BQU82QixHQUdoQitGLEVBQVM3SCxVQUVibTRFLEVBQWVBLEVBQWE3NEQsT0FBT3lYLElBRXZDLzRCLEtBQUs0M0Usc0JBQXNCNTNFLEtBQUtxM0UsWUFBWW5mLFNBQVdpaUIsSUFHL0RyekMsRUFBV3puQyxVQUFVczVFLHVCQUF5QixTQUFVMWdELEVBQVVuMEIsR0FDOUQsSUFBSTRGLEVBQVExSixVQUNFLElBQVY4RCxJQUFvQkEsRUFBUSxNQUNoQzlELEtBQUtvM0Usa0JBQWtCb0IsdUJBQXVCdmdELEdBQzlDcHlCLEVBQU83RixLQUFLdzNFLGdCQUFnQnYvQyxJQUNrQixJQUExQ2o0QixLQUFLdzNFLGdCQUFnQnYvQyxHQUFVNTNCLE9BQWMsNENBQThDNDNCLEdBQy9GLElBQUssSUFBSXR0QixFQUFLLEVBQUdNLEVBQUtqTCxLQUFLdzNFLGdCQUFnQnYvQyxHQUFXdHRCLEVBQUtNLEVBQUc1SyxPQUFRc0ssSUFBTSxDQUN4RSxJQUFJdVQsRUFBUWpULEVBQUdOLEdBQ2YzSyxLQUFLdTNFLGtCQUFrQnJpRSxPQUFPZ0osR0FDMUJwYSxHQUNBOUQsS0FBS3MzRSxtQkFBbUJyRSxhQUFhLzBELEVBQU9wYSxHQUlwRCxVQURPOUQsS0FBS3czRSxnQkFBZ0J2L0MsR0FDeEJqNEIsS0FBS3NoRCxVQUFXLENBQ2hCLElBQUk4NEIsRUFBWXA2RSxLQUFLMjNFLGtCQUFrQnBtQixnQkFBZ0J0NUIsR0FDdkRqNEIsS0FBSzIzRSxrQkFBa0J6bUIsc0JBQXNCajVCLEdBQzdDbWlELEVBQVU1b0UsU0FBUSxTQUFVNG5FLEdBQ0wxdkUsRUFBTWl1RSxrQkFBa0JqeUMsWUFBWTB6QyxJQUduRDF2RSxFQUFNMndFLGtCQUFrQmpCLFFBS3hDdHlDLEVBQVd6bkMsVUFBVWc3RSxrQkFBb0IsU0FBVXI3RSxHQUcvQyxJQUFJczdFLEVBQWdCdDZFLEtBQUt5M0Usa0JBQWtCbjVFLElBQUlVLEdBQ3pCLE9BQWxCczdFLElBSUp0NkUsS0FBS3MyRSxZQUFZN04sU0FBUzZSLEdBQzFCdDZFLEtBQUt5M0Usa0JBQW9CejNFLEtBQUt5M0Usa0JBQWtCbjJELE9BQU90aUIsVUFDaERnQixLQUFLMDNFLHlCQUF5QjRDLEtBRXpDeHpDLEVBQVd6bkMsVUFBVWs1RSxvQkFBc0IsU0FBVXRnRCxFQUFVMDlDLEdBQzNELElBQUssSUFBSWhyRSxFQUFLLEVBQUc0dkUsRUFBaUI1RSxFQUFjaHJFLEVBQUs0dkUsRUFBZWw2RSxPQUFRc0ssSUFBTSxDQUM5RSxJQUFJNnZFLEVBQWNELEVBQWU1dkUsR0FDakMsR0FBSTZ2RSxhQUF1QnJHLEdBQ3ZCbjBFLEtBQUsyM0Usa0JBQWtCdnVDLGFBQWFveEMsRUFBWXg3RSxJQUFLaTVCLEdBQ3JEajRCLEtBQUt5NkUsaUJBQWlCRCxRQUVyQixHQUFJQSxhQUF1QnBHLEdBQXNCLENBQ2xEejhELEVBbnBCQSxhQW1wQmlCLGdDQUFrQzZpRSxFQUFZeDdFLEtBQy9EZ0IsS0FBSzIzRSxrQkFBa0JydUMsZ0JBQWdCa3hDLEVBQVl4N0UsSUFBS2k1QixHQUNyQ2o0QixLQUFLMjNFLGtCQUFrQmp5QyxZQUFZODBDLEVBQVl4N0UsTUFHOURnQixLQUFLcTZFLGtCQUFrQkcsRUFBWXg3RSxVQUl2QzZsQixFQUFLLHlCQUEyQm5aLEtBQUtzRyxVQUFVd29FLE1BSTNEMXpDLEVBQVd6bkMsVUFBVW83RSxpQkFBbUIsU0FBVUQsR0FDOUMsSUFBSXg3RSxFQUFNdzdFLEVBQVl4N0UsSUFDdEIsSUFBS2dCLEtBQUt5M0Usa0JBQWtCbjVFLElBQUlVLEdBQU0sQ0FDbEMyWSxFQW5xQkksYUFtcUJhLDBCQUE0QjNZLEdBQzdDLElBQUlzN0UsRUFBZ0J0NkUsS0FBSzgzRSx1QkFBdUIxMUUsT0FDNUM4YixFQUFRNnFDLEdBQU1PLE9BQU90cUQsRUFBSXl2QixNQUM3Qnp1QixLQUFLMDNFLHlCQUF5QjRDLEdBQWlCLElBQUkvVCxHQUFnQnZuRSxHQUNuRWdCLEtBQUtzMkUsWUFBWS9OLE9BQU8sSUFBSTd0QixHQUFXeDhCLEVBQU04c0MsV0FBWXN2QixFQUFldGdDLEdBQWN1c0IsZ0JBQWlCbDZDLEdBQWVXLFVBQ3RIaHRCLEtBQUt5M0Usa0JBQW9CejNFLEtBQUt5M0Usa0JBQWtCejJELE9BQU9oaUIsRUFBS3M3RSxLQUlwRXh6QyxFQUFXem5DLFVBQVVxN0UsaUJBQW1CLFdBQ3BDLE9BQU8xNkUsS0FBS3kzRSxtQkFFaEIzd0MsRUFBV3puQyxVQUFVMDVFLGdDQUFrQyxTQUFVcm5DLEVBQVNnaUIsR0FDdEUsT0FBT2x1RCxFQUFNOUQsVUFBVTFCLFVBQU0sT0FBUSxHQUFRLFdBQ3pDLElBQUkyNkUsRUFBVUMsRUFBc0JDLEVBQ2hDbnhFLEVBQVExSixLQUNaLE9BQU93RixFQUFNL0MsWUFBWXpDLE1BQU0sU0FBVWlMLEdBQ3JDLE9BQVFBLEVBQUdsSSxPQUNQLEtBQUssRUFvQ0QsT0FuQ0E0M0UsRUFBVyxHQUNYQyxFQUF1QixHQUN2QkMsRUFBbUIsR0FDbkI3NkUsS0FBS3UzRSxrQkFBa0IvbEUsU0FBUSxTQUFVMU8sRUFBR2kxRSxHQUN4QzhDLEVBQWlCcDNFLEtBQUsxQixRQUFRQyxVQUN6QlEsTUFBSyxXQUNOLElBQUk0MUUsRUFBaUJMLEVBQVViLEtBQUt4QyxrQkFBa0JoakMsR0FDdEQsT0FBSzBtQyxFQUFlOXBCLFlBTWI1a0QsRUFBTW8xQyxXQUNSNFcsYUFBYXFpQixFQUFVNzVELE9BQWlDLEdBQ3hEMWIsTUFBSyxTQUFVeUksR0FDaEIsSUFBSXF4QyxFQUFZcnhDLEVBQUdxeEMsVUFDbkIsT0FBT3k3QixFQUFVYixLQUFLeEMsa0JBQWtCcDRCLEVBQVc4N0IsTUFUNUNBLEtBWVY1MUUsTUFBSyxTQUFVNDFFLEdBQ2hCLElBQUk3UyxFQUFlN1IsR0FBZUEsRUFBWUcsY0FBY2trQixFQUFVOS9DLFVBQ2xFNDhCLEVBQWFrakIsRUFBVWIsS0FBSzNrQyxhQUFhNmxDLEdBQ0csSUFBcEIxdUUsRUFBTTQzQyxVQUFvQmlrQixHQUV0RCxHQURBNzdELEVBQU02dUUsb0JBQW9CUixFQUFVOS9DLFNBQVU0OEIsRUFBVzhnQixjQUNyRDlnQixFQUFXaUksU0FBVSxDQUNqQnB6RCxFQUFNNDNDLFdBQ041M0MsRUFBTTB0RSxrQkFBa0JrQyxpQkFBaUJ2QixFQUFVOS9DLFNBQVU0OEIsRUFBV2lJLFNBQVM5SCxVQUFZLGNBQWdCLFdBRWpIMmxCLEVBQVNsM0UsS0FBS294RCxFQUFXaUksVUFDekIsSUFBSXlGLEVBQWF5UixHQUFpQkMsYUFBYThELEVBQVU5L0MsU0FBVTQ4QixFQUFXaUksVUFDOUU4ZCxFQUFxQm4zRSxLQUFLOCtELFdBSS9CLENBQUMsRUFBYXhnRSxRQUFRdVQsSUFBSXVsRSxJQUNyQyxLQUFLLEVBR0QsT0FGQTV2RSxFQUFHakksT0FDSGhELEtBQUtzM0UsbUJBQW1CdGEsY0FBYzJkLEdBQy9CLENBQUMsRUFBYTM2RSxLQUFLOCtDLFdBQVc0Vix1QkFBdUJrbUIsSUFDaEUsS0FBSyxFQUVELE9BREEzdkUsRUFBR2pJLE9BQ0ksQ0FBQyxXQUs1QjhqQyxFQUFXem5DLFVBQVU0NEUsaUJBQW1CLFNBQVVqcEUsR0FDOUNuSixFQUFtQyxPQUE1QjdGLEtBQUtzM0UsbUJBQTZCLGtCQUFvQnRvRSxFQUFTLGlDQUUxRTgzQixFQUFXem5DLFVBQVV3cUUsdUJBQXlCLFNBQVUxb0MsR0FDcEQsT0FBTzM3QixFQUFNOUQsVUFBVTFCLFVBQU0sT0FBUSxHQUFRLFdBQ3pDLElBQUk4NkUsRUFBYXg0RSxFQUNqQixPQUFPa0QsRUFBTS9DLFlBQVl6QyxNQUFNLFNBQVVpTCxHQUNyQyxPQUFRQSxFQUFHbEksT0FDUCxLQUFLLEVBR0QsT0FGQSszRSxHQUFlOTZFLEtBQUtxM0UsWUFBWS9zRCxRQUFRNlcsR0FDeENuaEMsS0FBS3EzRSxZQUFjbDJDLEVBQ2QyNUMsR0FFTDk2RSxLQUFLZzZFLHdDQUF3QyxvRUFDdEMsQ0FBQyxFQUFhaDZFLEtBQUs4K0MsV0FBV3FULGlCQUFpQmh4QixLQUg3QixDQUFDLEVBQWEsR0FJM0MsS0FBSyxFQUlELE9BSEE3K0IsRUFBUzJJLEVBQUdqSSxPQUVaaEQsS0FBS28zRSxrQkFBa0JqbEIsaUJBQWlCaHhCLEVBQU03K0IsRUFBT213RCxnQkFBaUJud0QsRUFBT293RCxlQUN0RSxDQUFDLEVBQWExeUQsS0FBSys0RSxnQ0FBZ0N6MkUsRUFBT3l3RCxvQkFDckUsS0FBSyxFQUNEOW5ELEVBQUdqSSxPQUNIaUksRUFBR2xJLE1BQVEsRUFDZixLQUFLLEVBQUcsTUFBTyxDQUFDLEVBQWEvQyxLQUFLczJFLFlBQVl6TSwwQkFDOUMsS0FBSyxFQUVELE9BREE1K0QsRUFBR2pJLE9BQ0ksQ0FBQyxXQU01QjhqQyxFQUFXem5DLFVBQVV5cUUsa0JBQW9CLFNBQVV4b0IsR0FDL0MsT0FBTzk3QyxFQUFNOUQsVUFBVTFCLFVBQU0sT0FBUSxHQUFRLFdBQ3pDLElBQUkrNkUsRUFBZUMsRUFBZXJ3RSxFQUFJc3dFLEVBQWlCcnpDLEVBQVlzekMsRUFBaUJDLEVBQ2hGenhFLEVBQVExSixLQUNaLE9BQU93RixFQUFNL0MsWUFBWXpDLE1BQU0sU0FBVWlMLEdBQ3JDLE9BQVFBLEVBQUdsSSxPQUNQLEtBQUssRUFDRCxPQUFvQixJQUFkdStDLElBQXlDLElBQW5CdGhELEtBQUtzaEQsVUFBNEIsQ0FBQyxFQUFhLElBQzNFdGhELEtBQUtzaEQsV0FBWSxFQUNWLENBQUMsRUFBYXRoRCxLQUFLczJFLFlBQVl4TSxtQkFBa0IsS0FDNUQsS0FBSyxFQUdELE9BRkE3K0QsRUFBR2pJLE9BQ0grM0UsRUFBZ0IvNkUsS0FBS28zRSxrQkFBa0JnRSwyQkFDaEMsQ0FBQyxFQUFhcDdFLEtBQUtxN0UsdUNBQXVDTixFQUFjOS9ELFlBQ25GLEtBQUssRUFFRCxJQURBKy9ELEVBQWdCL3ZFLEVBQUdqSSxPQUNkMkgsRUFBSyxFQUFHc3dFLEVBQWtCRCxFQUFlcndFLEVBQUtzd0UsRUFBZ0I1NkUsT0FBUXNLLElBQ3ZFaTlCLEVBQWFxekMsRUFBZ0J0d0UsR0FDN0IzSyxLQUFLczJFLFlBQVkvTixPQUFPM2dDLEdBRTVCLE1BQU8sQ0FBQyxFQUFhLEdBQ3pCLEtBQUssRUFDRCxPQUFvQixJQUFkMFosSUFBMEMsSUFBbkJ0aEQsS0FBS3NoRCxVQUE2QixDQUFDLEVBQWEsSUFDN0V0aEQsS0FBS3NoRCxXQUFZLEVBQ2pCNDVCLEVBQWtCLEdBQ2xCQyxFQUFNcDVFLFFBQVFDLFVBQ2Qwa0IsRUFBYzFtQixLQUFLdzNFLGlCQUFpQixTQUFVdi9DLEVBQVVuMUIsR0FDaEQ0RyxFQUFNMHRFLGtCQUFrQmtFLG1CQUFtQnJqRCxHQUMzQ2lqRCxFQUFnQnozRSxLQUFLdzBCLEdBR3JCa2pELEVBQU1BLEVBQUkzNEUsTUFBSyxXQUVYLE9BREFrSCxFQUFNaXZFLHVCQUF1QjFnRCxHQUN0QnZ1QixFQUFNbzFDLFdBQVd5VyxjQUFjdDlCLEdBQ1QsTUFHckN2dUIsRUFBTTRzRSxZQUFZN04sU0FBU3h3QyxNQUV4QixDQUFDLEVBQWFrakQsSUFDekIsS0FBSyxFQUVELE9BREFsd0UsRUFBR2pJLE9BQ0ksQ0FBQyxFQUFhaEQsS0FBS3E3RSx1Q0FBdUNILElBQ3JFLEtBQUssRUFHRCxPQUZBandFLEVBQUdqSSxPQUNIaEQsS0FBS3U3RSxzQkFDRSxDQUFDLEVBQWF2N0UsS0FBS3MyRSxZQUFZeE0sbUJBQWtCLElBQzVELEtBQUssRUFDRDcrRCxFQUFHakksT0FDSGlJLEVBQUdsSSxNQUFRLEVBQ2YsS0FBSyxFQUFHLE1BQU8sQ0FBQyxXQU1oQytqQyxFQUFXem5DLFVBQVVrOEUsb0JBQXNCLFdBQ3ZDLElBQUk3eEUsRUFBUTFKLEtBQ1owbUIsRUFBYzFtQixLQUFLMDNFLDBCQUEwQixTQUFVei9DLEdBQ25EdnVCLEVBQU00c0UsWUFBWTdOLFNBQVN4d0MsTUFFL0JqNEIsS0FBSzIzRSxrQkFBa0JybUIsc0JBQ3ZCdHhELEtBQUswM0UseUJBQTJCLEdBQ2hDMTNFLEtBQUt5M0Usa0JBQW9CLElBQUlyakQsR0FBVWhGLEdBQVloQyxhQVF2RDBaLEVBQVd6bkMsVUFBVWc4RSx1Q0FBeUMsU0FBVWhrQixHQUNwRSxPQUFPN3hELEVBQU05RCxVQUFVMUIsVUFBTSxPQUFRLEdBQVEsV0FDekMsSUFBSWc3RSxFQUFlUSxFQUFrQjd3RSxFQUFJOHdFLEVBQVd4akQsRUFBVTJQLEVBQVl5cUMsRUFBU3BuRSxFQUFJeXdFLEVBQVd4OUQsRUFBTzY1RCxFQUFXbGpCLEVBQVkvekQsRUFDaEksT0FBTzBFLEVBQU0vQyxZQUFZekMsTUFBTSxTQUFVa0wsR0FDckMsT0FBUUEsRUFBR25JLE9BQ1AsS0FBSyxFQUNEaTRFLEVBQWdCLEdBQ2hCUSxFQUFtQixHQUNuQjd3RSxFQUFLLEVBQUc4d0UsRUFBWXBrQixFQUNwQm5zRCxFQUFHbkksTUFBUSxFQUNmLEtBQUssRUFDRCxPQUFNNEgsRUFBSzh3RSxFQUFVcDdFLFFBQ3JCNDNCLEVBQVd3akQsRUFBVTl3RSxHQUNyQmk5QixPQUFhLEdBQ2J5cUMsRUFBVXJ5RSxLQUFLdzNFLGdCQUFnQnYvQyxLQUNLLElBQW5CbzZDLEVBQVFoeUUsT0FLbEIsQ0FBQyxFQUFhTCxLQUFLOCtDLFdBQVd5VyxjQUFjdDlCLEdBQ2xCLElBTmMsQ0FBQyxFQUFhLElBSnhCLENBQUMsRUFBYSxJQVd2RCxLQUFLLEVBTUQsT0FEQS9zQixFQUFHbEksT0FDSSxDQUFDLEVBQWFoRCxLQUFLOCtDLFdBQVd1VyxlQUFlZ2QsRUFBUSxHQUFHcm5CLGFBQ25FLEtBQUssRUFDRHBqQixFQUFhMThCLEVBQUdsSSxPQUNoQmlJLEVBQUssRUFBR3l3RSxFQUFZckosRUFDcEJubkUsRUFBR25JLE1BQVEsRUFDZixLQUFLLEVBQ0QsT0FBTWtJLEVBQUt5d0UsRUFBVXI3RSxRQUNyQjZkLEVBQVF3OUQsRUFBVXp3RSxHQUVsQnBGLEtBREFreUUsRUFBWS8zRSxLQUFLdTNFLGtCQUFrQmo1RSxJQUFJNGYsSUFDbkIsMkJBQTZCQSxHQUMxQyxDQUFDLEVBQWFsZSxLQUFLczRFLGtDQUFrQ1AsS0FKdkIsQ0FBQyxFQUFhLEdBS3ZELEtBQUssR0FDRGxqQixFQUFhM3BELEVBQUdsSSxRQUNEODVELFVBQ1gwZSxFQUFpQi8zRSxLQUFLb3hELEVBQVdpSSxVQUVyQzV4RCxFQUFHbkksTUFBUSxFQUNmLEtBQUssRUFFRCxPQURBa0ksSUFDTyxDQUFDLEVBQWEsR0FDekIsS0FBSyxFQUFHLE1BQU8sQ0FBQyxFQUFhLElBQzdCLEtBQUssRUFFRCxPQURBcEYsR0FBMEIsSUFBbkI3RixLQUFLc2hELFVBQW9CLCtFQUN6QixDQUFDLEVBQWF0aEQsS0FBSzgrQyxXQUFXei9CLFVBQVU0WSxJQUNuRCxLQUFLLEVBR0QsT0FEQXB5QixLQURBL0UsRUFBU29LLEVBQUdsSSxRQUNLLGlCQUFtQmkxQixFQUFXLGNBQ3hDLENBQUMsRUFBYWo0QixLQUFLOCtDLFdBQVd1VyxlQUFldjBELElBQ3hELEtBQUssR0FFRCxPQURBOG1DLEVBQWExOEIsRUFBR2xJLE9BQ1QsQ0FBQyxFQUFhaEQsS0FBS200RSxpQ0FBaUNuNEUsS0FBSzI3RSx3QkFBd0I3NkUsR0FBU20zQixHQUNoRixJQUNyQixLQUFLLEdBQ0Qvc0IsRUFBR2xJLE9BQ0hrSSxFQUFHbkksTUFBUSxHQUNmLEtBQUssR0FDRGk0RSxFQUFjdjNFLEtBQUtta0MsR0FDbkIxOEIsRUFBR25JLE1BQVEsR0FDZixLQUFLLEdBRUQsT0FEQTRILElBQ08sQ0FBQyxFQUFhLEdBQ3pCLEtBQUssR0FFRCxPQURBM0ssS0FBS3MzRSxtQkFBbUJ0YSxjQUFjd2UsR0FDL0IsQ0FBQyxFQUFjUixXQWdCMUNsMEMsRUFBV3puQyxVQUFVczhFLHdCQUEwQixTQUFVNzZFLEdBQ3JELE9BQU8sSUFBSWlvRCxHQUFNam9ELEVBQU8ydEIsS0FBTTN0QixFQUFPMm5ELGdCQUFpQjNuRCxFQUFPNG5ELFFBQVM1bkQsRUFBTzZuRCxRQUFTN25ELEVBQU95c0IsTUFBT2c3QixHQUFVVyxNQUFPcG9ELEVBQU84bkQsUUFBUzluRCxFQUFPK25ELFFBR2hKL2hCLEVBQVd6bkMsVUFBVWltRCxpQkFBbUIsV0FDcEMsT0FBT3RsRCxLQUFLOCtDLFdBQVd3RyxvQkFHM0J4ZSxFQUFXem5DLFVBQVV1OEUsaUJBQW1CLFNBQVUzakQsRUFBVW9pQyxFQUFPdjJELEdBQy9ELE9BQU8wQixFQUFNOUQsVUFBVTFCLFVBQU0sT0FBUSxHQUFRLFdBQ3pDLElBQVEweEMsRUFBU21xQyxFQUNqQixPQUFPcjJFLEVBQU0vQyxZQUFZekMsTUFBTSxTQUFVa0wsR0FDckMsT0FBUUEsRUFBR25JLE9BQ1AsS0FBSyxFQUNELEdBQUkvQyxLQUFLc2hELFVBSUwsT0FEQTNwQyxFQXA3QlosYUFvN0I2QixpREFDVixDQUFDLEdBRVosSUFBSzNYLEtBQUt3M0UsZ0JBQWdCdi9DLEdBQVcsTUFBTyxDQUFDLEVBQWEsR0FFMUQsT0FES29pQyxHQUVELElBQUssVUFDTCxJQUFLLGNBQWUsTUFBTyxDQUFDLEVBQWEsR0FDekMsSUFBSyxXQUFZLE1BQU8sQ0FBQyxFQUFhLEdBRTFDLE1BQU8sQ0FBQyxFQUFhLEdBQ3pCLEtBQUssRUFBRyxNQUFPLENBQUMsRUFBYXI2RCxLQUFLOCtDLFdBQVd6Syx5QkFDN0MsS0FBSyxFQUdELE9BRkEzQyxFQUFVeG1DLEVBQUdsSSxPQUNiNjRFLEVBQXlCaFosR0FBWUUsNkNBQTZDOXFDLEVBQW9CLFlBQVZvaUMsR0FDckYsQ0FBQyxFQUFhcjZELEtBQUsrNEUsZ0NBQWdDcm5DLEVBQVNtcUMsSUFDdkUsS0FBSyxFQUVELE9BREEzd0UsRUFBR2xJLE9BQ0ksQ0FBQyxFQUFhLEdBQ3pCLEtBQUssRUFBRyxNQUFPLENBQUMsRUFBYWhELEtBQUs4K0MsV0FBV3lXLGNBQWN0OUIsR0FDekIsSUFDbEMsS0FBSyxFQUdELE9BRkEvc0IsRUFBR2xJLE9BQ0hoRCxLQUFLMjRFLHVCQUF1QjFnRCxFQUFVbjBCLEdBQy9CLENBQUMsRUFBYSxHQUN6QixLQUFLLEVBQ0QrZ0IsRUFBSyw0QkFBOEJ3MUMsR0FDbkNudkQsRUFBR25JLE1BQVEsRUFDZixLQUFLLEVBQUcsTUFBTyxDQUFDLFdBTWhDK2pDLEVBQVd6bkMsVUFBVXk4RSx5QkFBMkIsU0FBVTVsQyxFQUFPdWYsR0FDN0QsT0FBT2p3RCxFQUFNOUQsVUFBVTFCLFVBQU0sT0FBUSxHQUFRLFdBQ3pDLElBQUkySyxFQUFJb3hFLEVBQW1CajdFLEVBQVE4bUMsRUFBWXIyQixFQUFTdXNCLEVBQVE3eUIsRUFBSSt3RSxFQUFXL2pELEVBQzNFdnVCLEVBQVExSixLQUNaLE9BQU93RixFQUFNL0MsWUFBWXpDLE1BQU0sU0FBVWtMLEdBQ3JDLE9BQVFBLEVBQUduSSxPQUNQLEtBQUssRUFDRCxJQUFLL0MsS0FBS3NoRCxVQUNOLE1BQU8sQ0FBQyxHQUVaMzJDLEVBQUssRUFBR294RSxFQUFVN2xDLEVBQ2xCaHJDLEVBQUduSSxNQUFRLEVBQ2YsS0FBSyxFQUNELE9BQU00SCxFQUFLb3hFLEVBQVExN0UsUUFDbkI0M0IsRUFBVzhqRCxFQUFRcHhFLEdBQ25COUUsR0FBUTdGLEtBQUt3M0UsZ0JBQWdCdi9DLEdBQVcsMENBQ2pDLENBQUMsRUFBYWo0QixLQUFLOCtDLFdBQVd6L0IsVUFBVTRZLEtBSFosQ0FBQyxFQUFhLEdBSXJELEtBQUssRUFHRCxPQURBcHlCLEtBREEvRSxFQUFTb0ssRUFBR2xJLFFBQ0ssZ0NBQWtDaTFCLEVBQVcsY0FDdkQsQ0FBQyxFQUFhajRCLEtBQUs4K0MsV0FBV3VXLGVBQWV2MEQsSUFDeEQsS0FBSyxFQUVELE9BREE4bUMsRUFBYTE4QixFQUFHbEksT0FDVCxDQUFDLEVBQWFoRCxLQUFLbTRFLGlDQUFpQ240RSxLQUFLMjdFLHdCQUF3Qjc2RSxHQUFTOG1DLEVBQVczUCxVQUMzRixJQUNyQixLQUFLLEVBQ0Qvc0IsRUFBR2xJLE9BQ0hoRCxLQUFLczJFLFlBQVkvTixPQUFPM2dDLEdBQ3hCMThCLEVBQUduSSxNQUFRLEVBQ2YsS0FBSyxFQUVELE9BREE0SCxJQUNPLENBQUMsRUFBYSxHQUN6QixLQUFLLEVBQ0Q0RyxFQUFVLFNBQVUwbUIsR0FDaEIsT0FBT3p5QixFQUFNL0MsWUFBWXpDLE1BQU0sU0FBVWlMLEdBQ3JDLE9BQVFBLEVBQUdsSSxPQUNQLEtBQUssRUFHRCxPQUFLKzZCLEVBQU8wNUMsZ0JBQWdCdi9DLEdBSXJCLENBQUMsRUFBYTZGLEVBQU9naEIsV0FDbkJ5VyxjQUFjdDlCLEdBQXdDLEdBQ3REejFCLE1BQUssV0FDTmtILEVBQU00c0UsWUFBWTdOLFNBQVN4d0MsR0FDM0J2dUIsRUFBTWl2RSx1QkFBdUIxZ0QsTUFFNUJudUIsTUFBTXcxQyxLQVRKLENBQUMsRUFBYyxZQVU5QixLQUFLLEVBR0QsT0FEQXIwQyxFQUFHakksT0FDSSxDQUFDLFFBSXhCODZCLEVBQVM5OUIsS0FDVGlMLEVBQUssRUFBRyt3RSxFQUFZdm1CLEVBQ3BCdnFELEVBQUduSSxNQUFRLEVBQ2YsS0FBSyxFQUNELE9BQU1rSSxFQUFLK3dFLEVBQVUzN0UsUUFDckI0M0IsRUFBVytqRCxFQUFVL3dFLEdBQ2QsQ0FBQyxFQUFjc0csRUFBUTBtQixLQUZPLENBQUMsRUFBYSxJQUd2RCxLQUFLLEVBQ0Qvc0IsRUFBR2xJLE9BQ0hrSSxFQUFHbkksTUFBUSxFQUNmLEtBQUssRUFFRCxPQURBa0ksSUFDTyxDQUFDLEVBQWEsR0FDekIsS0FBSyxHQUFJLE1BQU8sQ0FBQyxXQU9qQzY3QixFQUFXem5DLFVBQVUyb0UsY0FBZ0IsV0FFakMsT0FEQWhvRSxLQUFLOCtDLFdBQVdtRSxtQkFBa0IsR0FDM0JqakQsS0FBS3MyRSxZQUFZdE8saUJBSTVCbGhDLEVBQVd6bkMsVUFBVStvRSxlQUFpQixXQUVsQyxPQURBcG9FLEtBQUs4K0MsV0FBV21FLG1CQUFrQixHQUMzQmpqRCxLQUFLczJFLFlBQVlsTyxrQkFFNUJ0aEMsRUFBV3puQyxVQUFVcW5FLHVCQUF5QixTQUFVenVDLEdBQ3BELElBQUkrZ0QsRUFBa0JoNUUsS0FBSzAzRSx5QkFBeUJ6L0MsR0FDcEQsR0FBSStnRCxHQUFtQkEsRUFBZ0I3QixpQkFDbkMsT0FBT3orQyxLQUFpQnpCLElBQUkraEQsRUFBZ0JoNkUsS0FHNUMsSUFBSWk5RSxFQUFTdmpELEtBQ1QyNUMsRUFBVXJ5RSxLQUFLdzNFLGdCQUFnQnYvQyxHQUNuQyxJQUFLbzZDLEVBQ0QsT0FBTzRKLEVBRVgsSUFBSyxJQUFJdHhFLEVBQUssRUFBR3V4RSxFQUFZN0osRUFBUzFuRSxFQUFLdXhFLEVBQVU3N0UsT0FBUXNLLElBQU0sQ0FDL0QsSUFBSXVULEVBQVFnK0QsRUFBVXZ4RSxHQUNsQm90RSxFQUFZLzNFLEtBQUt1M0Usa0JBQWtCajVFLElBQUk0ZixHQUMzQ3JZLElBQVNreUUsRUFBVywyQkFBNkI3NUQsR0FDakQrOUQsRUFBU0EsRUFBT3JrRCxVQUFVbWdELEVBQVViLEtBQUtpRixpQkFFN0MsT0FBT0YsR0FHUm4xQyxFQXhnQ29CLEdBK2hDM0JzMUMsR0FBc0IsV0FDdEIsU0FBU0EsRUFBS2g3QyxHQUNWcGhDLEtBQUtvaEMsSUFBTUEsRUEwQmYsT0F4QkFnN0MsRUFBSy84RSxVQUFVZ2lDLGdCQUFrQixXQUM3QixPQUFtQixNQUFacmhDLEtBQUtvaEMsS0FNaEJnN0MsRUFBSy84RSxVQUFVNjRELE1BQVEsV0FDbkIsT0FBSWw0RCxLQUFLcWhDLGtCQUNFLE9BQVNyaEMsS0FBS29oQyxJQUdkLGtCQUdmZzdDLEVBQUsvOEUsVUFBVWlyQixRQUFVLFNBQVUreEQsR0FDL0IsT0FBT0EsRUFBVWo3QyxNQUFRcGhDLEtBQUtvaEMsS0FHbENnN0MsRUFBSzEyRCxnQkFBa0IsSUFBSTAyRCxFQUFLLE1BR2hDQSxFQUFLRSxtQkFBcUIsSUFBSUYsRUFBSywwQkFDbkNBLEVBQUtHLFlBQWMsSUFBSUgsRUFBSyxtQkFDckJBLEVBNUJjLEdBaURyQkksR0FBMEIsb0JBRTlCLFNBQVNDLEdBQStCN3dELEVBQWdCZ3VCLEdBRXBELE9BREEvekMsR0FBa0MsSUFBM0IrekMsRUFBU241QyxRQUFRLEtBQWEsMkNBQTZDbTVDLEVBQVcsS0FDdEY0aUMsR0FBMEIsSUFBTTV3RCxFQUFpQixJQUFNZ3VCLEVBU2xFLElBQUk4aUMsR0FBNEIsc0JBRWhDLFNBQVNDLEdBQWlDL3dELEVBQWdCdVYsRUFBTXBJLEdBQzVELElBQUk2akQsRUFBY0YsR0FBNEIsSUFBTTl3RCxFQUFpQixJQUFNbU4sRUFJM0UsT0FISW9JLEVBQUtFLG9CQUNMdTdDLEdBQWUsSUFBTXo3QyxFQUFLQyxLQUV2Qnc3QyxFQUlYLElBQUlDLEdBQTBCLG9CQUU5QixTQUFTQyxHQUF1Q2x4RCxFQUFnQnFNLEdBQzVELE9BQU80a0QsR0FBMEIsSUFBTWp4RCxFQUFpQixJQUFNcU0sRUFLbEUsSUFBSThrRCxHQUEwQix5QkFPOUIsSUFBSUMsR0FBNkI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBc0JqQyxJQUFJQyxHQUFZLG9CQU1aQyxHQUFrQyxXQUNsQyxTQUFTQSxFQUFpQi83QyxFQUFNcEksRUFBU3NoQyxFQUFPdjJELEdBQzVDOUQsS0FBS21oQyxLQUFPQSxFQUNabmhDLEtBQUsrNEIsUUFBVUEsRUFDZi80QixLQUFLcTZELE1BQVFBLEVBQ2JyNkQsS0FBSzhELE1BQVFBLEVBQ2IrQixPQUFrQjBELElBQVZ6RixJQUFvQyxhQUFWdTJELEdBQXVCLGtFQTJDN0QsT0FyQ0E2aUIsRUFBaUJDLG9CQUFzQixTQUFVaDhDLEVBQU1wSSxFQUFTcjZCLEdBQzVELElBQUk4M0QsRUFBZ0I5cUQsS0FBS0MsTUFBTWpOLEdBQzNCMCtFLEVBQXFDLGlCQUFsQjVtQixJQUVkLElBREwsQ0FBQyxVQUFXLGVBQWdCLFlBQVkvMUQsUUFBUSsxRCxFQUFjNkQsY0FFckM5d0QsSUFBeEJpdEQsRUFBYzF5RCxPQUNvQixpQkFBeEIweUQsRUFBYzF5RCxPQUN6QnU1RSxPQUFpQjl6RSxFQVNyQixPQVJJNnpFLEdBQWE1bUIsRUFBYzF5RCxRQUMzQnM1RSxFQUMyQyxpQkFBaEM1bUIsRUFBYzF5RCxNQUFNaUMsU0FDYSxpQkFBN0J5d0QsRUFBYzF5RCxNQUFNc0csUUFFL0JpekUsRUFBaUIsSUFBSW4zRCxFQUFlc3dDLEVBQWMxeUQsTUFBTXNHLEtBQU1vc0QsRUFBYzF5RCxNQUFNaUMsVUFHdEZxM0UsRUFDTyxJQUFJRixFQUFpQi83QyxFQUFNcEksRUFBU3k5QixFQUFjNkQsTUFBT2dqQixJQUdoRXY1RSxFQUFNbTVFLEdBQVcsMENBQTRDbGtELEVBQVUsTUFBUXI2QixHQUN4RSxPQUdmdytFLEVBQWlCNzlFLFVBQVVpK0UsaUJBQW1CLFdBQzFDLElBQUlDLEVBQWdCLENBQ2hCbGpCLE1BQU9yNkQsS0FBS3E2RCxNQUNaeGdCLGFBQWN4d0MsS0FBS3NILE9BUXZCLE9BTkkzUSxLQUFLOEQsUUFDTHk1RSxFQUFjejVFLE1BQVEsQ0FDbEJzRyxLQUFNcEssS0FBSzhELE1BQU1zRyxLQUNqQnJFLFFBQVMvRixLQUFLOEQsTUFBTWlDLFVBR3JCMkYsS0FBS3NHLFVBQVV1ckUsSUFFbkJMLEVBakQwQixHQXdEakNNLEdBQXFDLFdBQ3JDLFNBQVNBLEVBQW9CdmxELEVBQVVvaUMsRUFBT3YyRCxHQUMxQzlELEtBQUtpNEIsU0FBV0EsRUFDaEJqNEIsS0FBS3E2RCxNQUFRQSxFQUNicjZELEtBQUs4RCxNQUFRQSxFQUNiK0IsT0FBa0IwRCxJQUFWekYsSUFBb0MsYUFBVnUyRCxHQUF1QixxRUEyQzdELE9BckNBbWpCLEVBQW9CTCxvQkFBc0IsU0FBVWxsRCxFQUFVdjVCLEdBQzFELElBQUk4bUUsRUFBYzk1RCxLQUFLQyxNQUFNak4sR0FDekIwK0UsRUFBbUMsaUJBQWhCNVgsSUFFZCxJQURMLENBQUMsY0FBZSxVQUFXLFlBQVkva0UsUUFBUStrRSxFQUFZbkwsY0FFcEM5d0QsSUFBdEJpOEQsRUFBWTFoRSxPQUNvQixpQkFBdEIwaEUsRUFBWTFoRSxPQUN2QnU1RSxPQUFpQjl6RSxFQVNyQixPQVJJNnpFLEdBQWE1WCxFQUFZMWhFLFFBQ3pCczVFLEVBQ3lDLGlCQUE5QjVYLEVBQVkxaEUsTUFBTWlDLFNBQ2EsaUJBQTNCeS9ELEVBQVkxaEUsTUFBTXNHLFFBRTdCaXpFLEVBQWlCLElBQUluM0QsRUFBZXMvQyxFQUFZMWhFLE1BQU1zRyxLQUFNbzdELEVBQVkxaEUsTUFBTWlDLFVBR2xGcTNFLEVBQ08sSUFBSUksRUFBb0J2bEQsRUFBVXV0QyxFQUFZbkwsTUFBT2dqQixJQUc1RHY1RSxFQUFNbTVFLEdBQVcsd0NBQTBDaGxELEVBQVcsTUFBUXY1QixHQUN2RSxPQUdmOCtFLEVBQW9CbitFLFVBQVVpK0UsaUJBQW1CLFdBQzdDLElBQUk5WCxFQUFjLENBQ2RuTCxNQUFPcjZELEtBQUtxNkQsTUFDWnhnQixhQUFjeHdDLEtBQUtzSCxPQVF2QixPQU5JM1EsS0FBSzhELFFBQ0wwaEUsRUFBWTFoRSxNQUFRLENBQ2hCc0csS0FBTXBLLEtBQUs4RCxNQUFNc0csS0FDakJyRSxRQUFTL0YsS0FBSzhELE1BQU1pQyxVQUdyQjJGLEtBQUtzRyxVQUFVd3pELElBRW5CZ1ksRUFoRDZCLEdBc0RwQ0MsR0FBbUMsV0FDbkMsU0FBU0EsRUFBa0I3akMsRUFBVXZSLEdBQ2pDcm9DLEtBQUs0NUMsU0FBV0EsRUFDaEI1NUMsS0FBS3FvQyxnQkFBa0JBLEVBdUIzQixPQWpCQW8xQyxFQUFrQk4sb0JBQXNCLFNBQVV2akMsRUFBVWw3QyxHQUt4RCxJQUpBLElBQUlnL0UsRUFBY2h5RSxLQUFLQyxNQUFNak4sR0FDekIwK0UsRUFBbUMsaUJBQWhCTSxHQUNuQkEsRUFBWXIxQywyQkFBMkJ4b0MsTUFDdkM4OUUsRUFBcUI5a0QsS0FDaEJwN0IsRUFBSSxFQUFHMi9FLEdBQWEzL0UsRUFBSWlnRixFQUFZcjFDLGdCQUFnQmhvQyxTQUFVNUMsRUFDbkUyL0UsRUFBWTkwQixHQUFjbzFCLEVBQVlyMUMsZ0JBQWdCNXFDLElBQ3REa2dGLEVBQXFCQSxFQUFtQjFtRCxJQUFJeW1ELEVBQVlyMUMsZ0JBQWdCNXFDLElBRTVFLE9BQUkyL0UsRUFDTyxJQUFJSyxFQUFrQjdqQyxFQUFVK2pDLElBR3ZDNzVFLEVBQU1tNUUsR0FBVyw2Q0FBK0NyakMsRUFBVyxNQUFRbDdDLEdBQzVFLE9BR1IrK0UsRUExQjJCLEdBaUNsQ0csR0FBbUMsV0FDbkMsU0FBU0EsRUFBa0Joa0MsRUFBVTA0QixHQUNqQ3R5RSxLQUFLNDVDLFNBQVdBLEVBQ2hCNTVDLEtBQUtzeUUsWUFBY0EsRUFtQnZCLE9BYkFzTCxFQUFrQlQsb0JBQXNCLFNBQVV6K0UsR0FDOUMsSUFBSTR6RSxFQUFjNW1FLEtBQUtDLE1BQU1qTixHQUk3QixNQUh1QyxpQkFBaEI0ekUsR0FDbkJBLEVBQVlBLGVBQWV4WSxJQUNLLGlCQUF6QndZLEVBQVkxNEIsU0FFWixJQUFJZ2tDLEVBQWtCdEwsRUFBWTE0QixTQUFVa2dCLEdBQVl3WSxFQUFZQSxlQUczRXh1RSxFQUFNbTVFLEdBQVcsaUNBQW1DditFLEdBQzdDLE9BR1JrL0UsRUF0QjJCLEdBbUNsQ0MsR0FBa0MsV0FDbEMsU0FBU0EsSUFDTDc5RSxLQUFLcW9DLGdCQUFrQnhQLEtBbUIzQixPQWpCQWdsRCxFQUFpQngrRSxVQUFVeStFLGVBQWlCLFNBQVU3bEQsR0FDbERqNEIsS0FBS3FvQyxnQkFBa0Jyb0MsS0FBS3FvQyxnQkFBZ0JwUixJQUFJZ0IsSUFFcEQ0bEQsRUFBaUJ4K0UsVUFBVTArRSxrQkFBb0IsU0FBVTlsRCxHQUNyRGo0QixLQUFLcW9DLGdCQUFrQnJvQyxLQUFLcW9DLGdCQUFnQm56QixPQUFPK2lCLElBTXZENGxELEVBQWlCeCtFLFVBQVVpK0UsaUJBQW1CLFdBQzFDLElBQUk1eUUsRUFBTyxDQUNQMjlCLGdCQUFpQnJvQyxLQUFLcW9DLGdCQUFnQnB0QixVQUN0QzQrQixhQUFjeHdDLEtBQUtzSCxPQUV2QixPQUFPakYsS0FBS3NHLFVBQVV0SCxJQUVuQm16RSxFQXJCMEIsR0E0QmpDRyxHQUE2QyxXQUM3QyxTQUFTQSxFQUE0QjNsQyxFQUFPNXpCLEVBQVVtSCxFQUFnQnF5RCxFQUFlcnNCLEdBZ0JqRixHQWZBNXhELEtBQUtxNEMsTUFBUUEsRUFDYnI0QyxLQUFLeWtCLFNBQVdBLEVBQ2hCemtCLEtBQUs0ckIsZUFBaUJBLEVBQ3RCNXJCLEtBQUtpK0UsY0FBZ0JBLEVBQ3JCaitFLEtBQUsyb0UsV0FBYSxLQUNsQjNvRSxLQUFLOC9ELG1CQUFxQixLQUMxQjkvRCxLQUFLd3NCLHNCQUF3QixLQUM3QnhzQixLQUFLaytFLGNBQWdCLEdBQ3JCbCtFLEtBQUttK0UsZ0JBQWtCbitFLEtBQUtvK0Usc0JBQXNCbi9FLEtBQUtlLE1BQ3ZEQSxLQUFLcWlELFNBQVUsRUFLZnJpRCxLQUFLcStFLFlBQWMsSUFDZEwsRUFBNEIvaEQsWUFBWWo4QixLQUFLeWtCLFVBQzlDLE1BQU0sSUFBSXlCLEVBQWVqQixFQUFLYyxjQUFlLG1EQUlqRCxJQUFJdTRELEVBQXdCMXlELEVBQWV0Z0IsUUFBUSxzQkFBdUIsUUFDMUV0TCxLQUFLdStFLFFBQVV2K0UsS0FBS3lrQixTQUFTdlUsT0FBTyt4QyxhQUNwQ2ppRCxLQUFLcTNFLFlBQWN6bEIsRUFDbkI1eEQsS0FBS3crRSxzQkFBd0IvQixHQUErQno4RSxLQUFLNHJCLGVBQWdCNXJCLEtBQUtpK0UsZUFDdEZqK0UsS0FBS3krRSxrQkFsUWIsU0FBMkM3eUQsR0FDdkMsT0FBT294RCxHQUE2QixJQUFNcHhELEVBaVFiOHlELENBQWtDMStFLEtBQUs0ckIsZ0JBQ2hFNXJCLEtBQUtrK0UsY0FBY2wrRSxLQUFLaStFLGVBQWlCLElBQUlKLEdBQzdDNzlFLEtBQUsyK0UsaUJBQW1CLElBQUl0VCxPQUFPLElBQU1tUixHQUEwQixJQUFNOEIsRUFBd0IsYUFDakd0K0UsS0FBSzQrRSxtQkFBcUIsSUFBSXZULE9BQU8sSUFBTXFSLEdBQTRCLElBQU00QixFQUF3QixzQkFDckd0K0UsS0FBSzYrRSxpQkFBbUIsSUFBSXhULE9BQU8sSUFBTXdSLEdBQTBCLElBQU15QixFQUF3QixZQUNqR3QrRSxLQUFLOCtFLGVBOVFiLFNBQXdDbHpELEdBQ3BDLE9BQU9teEQsR0FBMEIsSUFBTW54RCxFQTZRYm16RCxDQUErQi8rRSxLQUFLNHJCLGdCQU8xRDVyQixLQUFLeWtCLFNBQVN2VSxPQUFPczJDLGlCQUFpQixVQUFXeG1ELEtBQUttK0UsaUJBMFYxRCxPQXZWQUgsRUFBNEIvaEQsWUFBYyxTQUFVeFgsR0FDaEQsU0FBVUEsRUFBU3ZVLFFBQTBDLE1BQWhDdVUsRUFBU3ZVLE9BQU8reEMsZUFFakQrN0IsRUFBNEIzK0UsVUFBVWd4QixNQUFRLFdBQzFDLE9BQU83cUIsRUFBTTlELFVBQVUxQixVQUFNLE9BQVEsR0FBUSxXQUN6QyxJQUFJK2pELEVBQWlCcDVDLEVBQUlxMEUsRUFBbUJwbEMsRUFBVXFsQyxFQUFhdkIsRUFBYXdCLEVBQWlCNU0sRUFBYXJuRSxFQUFJQyxFQUFJbXVFLEVBQ2xIM3ZFLEVBQVExSixLQUNaLE9BQU93RixFQUFNL0MsWUFBWXpDLE1BQU0sU0FBVTJVLEdBQ3JDLE9BQVFBLEVBQUc1UixPQUNQLEtBQUssRUFJRCxPQUhBOEMsR0FBUTdGLEtBQUtxaUQsUUFBUywrQ0FDdEJ4OEMsRUFBMkIsT0FBcEI3RixLQUFLMm9FLFdBQXFCLDBEQUNqQzlpRSxFQUFtQyxPQUE1QjdGLEtBQUs4L0QsbUJBQTZCLGtFQUNsQyxDQUFDLEVBQWE5L0QsS0FBSzJvRSxXQUFXcmpCLG9CQUN6QyxLQUFLLEVBRUQsSUFEQXZCLEVBQWtCcHZDLEVBQUczUixPQUNoQjJILEVBQUssRUFBR3EwRSxFQUFvQmo3QixFQUFpQnA1QyxFQUFLcTBFLEVBQWtCMytFLE9BQVFzSyxLQUM3RWl2QyxFQUFXb2xDLEVBQWtCcjBFLE1BQ1ozSyxLQUFLaStFLGdCQUd0QmdCLEVBQWNqL0UsS0FBSzRtRCxRQUFRNjFCLEdBQStCejhFLEtBQUs0ckIsZUFBZ0JndUIsT0FFM0U4akMsRUFBY0QsR0FBa0JOLG9CQUFvQnZqQyxFQUFVcWxDLE1BRTFEai9FLEtBQUtrK0UsY0FBY1IsRUFBWTlqQyxVQUFZOGpDLEdBWXZELElBUkExOUUsS0FBS20vRSxzQkFDTEQsRUFBa0JsL0UsS0FBS3UrRSxRQUFRMzNCLFFBQVE1bUQsS0FBSzgrRSxtQkFFeEN4TSxFQUFjdHlFLEtBQUtvL0UsMEJBQTBCRixLQUV6Q2wvRSxLQUFLcS9FLHVCQUF1Qi9NLEdBRy9Ccm5FLEVBQUssRUFBR0MsRUFBS2xMLEtBQUtxK0UsWUFBYXB6RSxFQUFLQyxFQUFHN0ssT0FBUTRLLElBQ2hEb3VFLEVBQVVudUUsRUFBR0QsR0FDYmpMLEtBQUtvK0Usc0JBQXNCL0UsR0FPL0IsT0FMQXI1RSxLQUFLcStFLFlBQWMsR0FHbkJyK0UsS0FBS3lrQixTQUFTdlUsT0FBT3MyQyxpQkFBaUIsVUFBVSxXQUFjLE9BQU85OEMsRUFBTXE3QyxjQUMzRS9rRCxLQUFLcWlELFNBQVUsRUFDUixDQUFDLFdBSzVCMjdCLEVBQTRCMytFLFVBQVV1dEIsb0JBQXNCLFNBQVVILEdBQ2xFenNCLEtBQUs2bUQsUUFBUTdtRCxLQUFLeStFLGtCQUFtQi95RSxLQUFLc0csVUFBVXlhLEtBRXhEdXhELEVBQTRCMytFLFVBQVUrN0UseUJBQTJCLFdBQzdELElBQUlMLEVBQWdCbGlELEtBSXBCLE9BSEFybkIsRUFBUXhSLEtBQUtrK0UsZUFBZSxTQUFVbC9FLEVBQUtOLEdBQ3ZDcThFLEVBQWdCQSxFQUFjbmpELFVBQVVsNUIsRUFBTTJwQyxvQkFFM0MweUMsR0FFWGlELEVBQTRCMytFLFVBQVVvNUUsb0JBQXNCLFNBQVV4Z0QsR0FHbEUsSUFBSyxJQUFJMmhCLEtBQVk1NUMsS0FBS2srRSxjQUN0QixHQUFJbCtFLEtBQUtrK0UsY0FBYzUrRSxlQUFlczZDLElBQzlCNTVDLEtBQUtrK0UsY0FBY3RrQyxHQUFVdlIsZ0JBQWdCcjBCLElBQUlpa0IsR0FDakQsT0FBTyxFQUluQixPQUFPLEdBRVgrbEQsRUFBNEIzK0UsVUFBVXc1RSxtQkFBcUIsU0FBVTkvQyxHQUNqRS80QixLQUFLcy9FLHFCQUFxQnZtRCxFQUFTLFlBRXZDaWxELEVBQTRCMytFLFVBQVV1NkUsb0JBQXNCLFNBQVU3Z0QsRUFBU3NoQyxFQUFPdjJELEdBQ2xGOUQsS0FBS3MvRSxxQkFBcUJ2bUQsRUFBU3NoQyxFQUFPdjJELEdBSTFDOUQsS0FBS3UvRSxvQkFBb0J4bUQsSUFFN0JpbEQsRUFBNEIzK0UsVUFBVTY0RSxvQkFBc0IsU0FBVWpnRCxHQUNsRSxJQUFJdW5ELEVBQWEsY0FHakIsR0FBSXgvRSxLQUFLeTRFLG9CQUFvQnhnRCxHQUFXLENBQ3BDLElBQUlnbkQsRUFBY2ovRSxLQUFLdStFLFFBQVEzM0IsUUFBUWsyQixHQUF1Qzk4RSxLQUFLNHJCLGVBQWdCcU0sSUFDbkcsR0FBSWduRCxFQUFhLENBQ2IsSUFBSXg5RSxFQUFXKzdFLEdBQW9CTCxvQkFBb0JsbEQsRUFBVWduRCxHQUM3RHg5RSxJQUNBKzlFLEVBQWEvOUUsRUFBUzQ0RCxRQU1sQyxPQUZBcjZELEtBQUt5L0UsaUJBQWlCM0IsZUFBZTdsRCxHQUNyQ2o0QixLQUFLbS9FLHFCQUNFSyxHQUVYeEIsRUFBNEIzK0UsVUFBVW01RSx1QkFBeUIsU0FBVXZnRCxHQUNyRWo0QixLQUFLeS9FLGlCQUFpQjFCLGtCQUFrQjlsRCxHQUN4Q2o0QixLQUFLbS9FLHNCQUVUbkIsRUFBNEIzK0UsVUFBVWk4RSxtQkFBcUIsU0FBVXJqRCxHQUNqRSxPQUFPajRCLEtBQUt5L0UsaUJBQWlCcDNDLGdCQUFnQnIwQixJQUFJaWtCLElBRXJEK2xELEVBQTRCMytFLFVBQVVxNUUsZ0JBQWtCLFNBQVV6Z0QsR0FDOURqNEIsS0FBS3FrRCxXQUFXeTRCLEdBQXVDOThFLEtBQUs0ckIsZUFBZ0JxTSxLQUVoRitsRCxFQUE0QjMrRSxVQUFVaTZFLGlCQUFtQixTQUFVcmhELEVBQVVvaUMsRUFBT3YyRCxHQUNoRjlELEtBQUswL0Usd0JBQXdCem5ELEVBQVVvaUMsRUFBT3YyRCxJQUVsRGs2RSxFQUE0QjMrRSxVQUFVOHlELGlCQUFtQixTQUFVaHhCLEVBQU1zeEIsRUFBaUJDLEdBQ3RGLElBQUlocEQsRUFBUTFKLEtBQ1p5eUQsRUFBZ0JqaEQsU0FBUSxTQUFVdW5CLEdBQzlCcnZCLEVBQU02MUUsb0JBQW9CeG1ELE1BRTlCLzRCLEtBQUtxM0UsWUFBY2wyQyxFQUNuQnV4QixFQUFjbGhELFNBQVEsU0FBVXVuQixHQUM1QnJ2QixFQUFNbXZFLG1CQUFtQjkvQyxPQUdqQ2lsRCxFQUE0QjMrRSxVQUFVODVFLGVBQWlCLFNBQVU3RyxHQUM3RHR5RSxLQUFLMi9FLG1CQUFtQnJOLElBRTVCMEwsRUFBNEIzK0UsVUFBVTBsRCxTQUFXLFdBQ3pDL2tELEtBQUtxaUQsVUFDTHJpRCxLQUFLeWtCLFNBQVN2VSxPQUFPdzJDLG9CQUFvQixVQUFXMW1ELEtBQUttK0UsaUJBQ3pEbitFLEtBQUtxa0QsV0FBV3JrRCxLQUFLdytFLHVCQUNyQngrRSxLQUFLcWlELFNBQVUsSUFHdkIyN0IsRUFBNEIzK0UsVUFBVXVuRCxRQUFVLFNBQVU1bkQsR0FDdEQsSUFBSU4sRUFBUXNCLEtBQUt1K0UsUUFBUTMzQixRQUFRNW5ELEdBRWpDLE9BREEyWSxFQUFNc2xFLEdBQVcsT0FBUWorRSxFQUFLTixHQUN2QkEsR0FFWHMvRSxFQUE0QjMrRSxVQUFVd25ELFFBQVUsU0FBVTduRCxFQUFLTixHQUMzRGlaLEVBQU1zbEUsR0FBVyxNQUFPaitFLEVBQUtOLEdBQzdCc0IsS0FBS3UrRSxRQUFRMTNCLFFBQVE3bkQsRUFBS04sSUFFOUJzL0UsRUFBNEIzK0UsVUFBVWdsRCxXQUFhLFNBQVVybEQsR0FDekQyWSxFQUFNc2xFLEdBQVcsU0FBVWorRSxHQUMzQmdCLEtBQUt1K0UsUUFBUWw2QixXQUFXcmxELElBRTVCZy9FLEVBQTRCMytFLFVBQVUrK0Usc0JBQXdCLFNBQVV6L0QsR0FDcEUsSUFBSWpWLEVBQVExSixLQUNaLEdBQUkyZSxFQUFNaWhFLGNBQWdCNS9FLEtBQUt1K0UsUUFBUyxDQUVwQyxHQURBNW1FLEVBQU1zbEUsR0FBVyxRQUFTdCtELEVBQU0zZixJQUFLMmYsRUFBTXd0QixVQUN2Q3h0QixFQUFNM2YsTUFBUWdCLEtBQUt3K0Usc0JBR25CLFlBRkExNkUsRUFBTSw0R0FJVjlELEtBQUtxNEMsTUFBTXhuQixrQkFBaUIsV0FBYyxPQUFPcnJCLEVBQU05RCxVQUFVZ0ksT0FBTyxPQUFRLEdBQVEsV0FDcEYsSUFBSWcwRSxFQUFhOWpDLEVBQVVpbUMsRUFBa0JDLEVBQXFCeE4sRUFBYTdsRCxFQUMvRSxPQUFPam5CLEVBQU0vQyxZQUFZekMsTUFBTSxTQUFVaUwsR0FDckMsSUFBS2pMLEtBQUtxaUQsUUFFTixPQURBcmlELEtBQUtxK0UsWUFBWTU2RSxLQUFLa2IsR0FDZixDQUFDLEdBRVosR0FBa0IsT0FBZEEsRUFBTTNmLElBQ04sTUFBTyxDQUFDLEdBRVosR0FBSWdCLEtBQUsyK0UsaUJBQWlCeHVFLEtBQUt3TyxFQUFNM2YsS0FBTSxDQUN2QyxHQUFzQixNQUFsQjJmLEVBQU13dEIsU0FRTixPQURBeU4sRUFBVzU1QyxLQUFLKy9FLDZCQUE2QnBoRSxFQUFNM2YsS0FDNUMsQ0FBQyxFQUFjZ0IsS0FBS2dnRix1QkFBdUJwbUMsRUFBVSxPQU41RCxHQURBOGpDLEVBQWMxOUUsS0FBS2lnRiwwQkFBMEJ0aEUsRUFBTTNmLElBQUsyZixFQUFNd3RCLFVBRTFELE1BQU8sQ0FBQyxFQUFjbnNDLEtBQUtnZ0YsdUJBQXVCdEMsRUFBWTlqQyxTQUFVOGpDLFNBUS9FLEdBQUkxOUUsS0FBSzQrRSxtQkFBbUJ6dUUsS0FBS3dPLEVBQU0zZixNQUN4QyxHQUF1QixPQUFuQjJmLEVBQU13dEIsV0FDTjB6QyxFQUFtQjcvRSxLQUFLa2dGLCtCQUErQnZoRSxFQUFNM2YsSUFBSzJmLEVBQU13dEIsV0FFcEUsTUFBTyxDQUFDLEVBQWNuc0MsS0FBS21nRix5QkFBeUJOLFNBSTNELEdBQUk3L0UsS0FBSzYrRSxpQkFBaUIxdUUsS0FBS3dPLEVBQU0zZixNQUN0QyxHQUF1QixPQUFuQjJmLEVBQU13dEIsV0FDTjJ6QyxFQUFzQjkvRSxLQUFLb2dGLGtDQUFrQ3poRSxFQUFNM2YsSUFBSzJmLEVBQU13dEIsV0FFMUUsTUFBTyxDQUFDLEVBQWNuc0MsS0FBS3FnRix1QkFBdUJQLFNBSXpELEdBQUluaEUsRUFBTTNmLE1BQVFnQixLQUFLOCtFLGdCQUN4QixHQUF1QixPQUFuQm5nRSxFQUFNd3RCLFdBQ05tbUMsRUFBY3R5RSxLQUFLby9FLDBCQUEwQnpnRSxFQUFNd3RCLFdBRS9DLE1BQU8sQ0FBQyxFQUFjbnNDLEtBQUtxL0UsdUJBQXVCL00sU0FJckQzekQsRUFBTTNmLE1BQVFnQixLQUFLeStFLG9CQUN4QjU0RSxJQUFTN0YsS0FBS3dzQixzQkFBdUIsa0NBQ3JDQyxFQThJeEIsU0FBc0M2ekQsR0FDbEMsSUFBSTd6RCxFQUFpQkosR0FBZVcsUUFDcEMsR0FBaUIsTUFBYnN6RCxFQUNBLElBQ0ksSUFBSUMsRUFBUzcwRSxLQUFLQyxNQUFNMjBFLEdBQ3hCejZFLEVBQXlCLGlCQUFYMDZFLEVBQXFCLHFDQUNuQzl6RCxFQUFpQjh6RCxFQUVyQixNQUFPLy9FLEdBQ0hzRCxFQUFNbTVFLEdBQVcsaURBQWtEejhFLEdBRzNFLE9BQU9pc0IsRUExSjhCK3pELENBQTZCN2hFLEVBQU13dEIsYUFDN0I5ZixHQUFlVyxTQUNsQ2h0QixLQUFLd3NCLHNCQUFzQkMsSUFHbkMsTUFBTyxDQUFDLGNBS3hCdHVCLE9BQU9DLGVBQWU0L0UsRUFBNEIzK0UsVUFBVyxtQkFBb0IsQ0FDN0VmLElBQUssV0FDRCxPQUFPMEIsS0FBS2srRSxjQUFjbCtFLEtBQUtpK0UsZ0JBRW5DNS9FLFlBQVksRUFDWmtaLGNBQWMsSUFFbEJ5bUUsRUFBNEIzK0UsVUFBVTgvRSxtQkFBcUIsV0FDdkRuL0UsS0FBSzZtRCxRQUFRN21ELEtBQUt3K0Usc0JBQXVCeCtFLEtBQUt5L0UsaUJBQWlCbkMscUJBRW5FVSxFQUE0QjMrRSxVQUFVaWdGLHFCQUF1QixTQUFVdm1ELEVBQVNzaEMsRUFBT3YyRCxHQUNuRixJQUFJMjhFLEVBQWdCLElBQUl2RCxHQUFpQmw5RSxLQUFLcTNFLFlBQWF0K0MsRUFBU3NoQyxFQUFPdjJELEdBQ3ZFODRFLEVBQWNELEdBQWlDMzhFLEtBQUs0ckIsZUFBZ0I1ckIsS0FBS3EzRSxZQUFhdCtDLEdBQzFGLzRCLEtBQUs2bUQsUUFBUSsxQixFQUFhNkQsRUFBY25ELHFCQUU1Q1UsRUFBNEIzK0UsVUFBVWtnRixvQkFBc0IsU0FBVXhtRCxHQUNsRSxJQUFJNmpELEVBQWNELEdBQWlDMzhFLEtBQUs0ckIsZUFBZ0I1ckIsS0FBS3EzRSxZQUFhdCtDLEdBQzFGLzRCLEtBQUtxa0QsV0FBV3U0QixJQUVwQm9CLEVBQTRCMytFLFVBQVVzZ0YsbUJBQXFCLFNBQVVyTixHQUNqRSxJQUFJNzNCLEVBQVEsQ0FDUmIsU0FBVTU1QyxLQUFLaStFLGNBQ2YzTCxZQUFheFksR0FBWXdZLElBRTdCdHlFLEtBQUt1K0UsUUFBUTEzQixRQUFRN21ELEtBQUs4K0UsZUFBZ0JwekUsS0FBS3NHLFVBQVV5b0MsS0FFN0R1akMsRUFBNEIzK0UsVUFBVXFnRix3QkFBMEIsU0FBVXpuRCxFQUFVb2lDLEVBQU92MkQsR0FDdkYsSUFBSTQ4RSxFQUFZNUQsR0FBdUM5OEUsS0FBSzRyQixlQUFnQnFNLEdBQ3hFMG9ELEVBQWlCLElBQUluRCxHQUFvQnZsRCxFQUFVb2lDLEVBQU92MkQsR0FDOUQ5RCxLQUFLNm1ELFFBQVE2NUIsRUFBV0MsRUFBZXJELHFCQU0zQ1UsRUFBNEIzK0UsVUFBVTBnRiw2QkFBK0IsU0FBVS9nRixHQUMzRSxJQUFJNFosRUFBUTVZLEtBQUsyK0UsaUJBQWlCcjFELEtBQUt0cUIsR0FDdkMsT0FBTzRaLEVBQVFBLEVBQU0sR0FBSyxNQU05Qm9sRSxFQUE0QjMrRSxVQUFVNGdGLDBCQUE0QixTQUFVamhGLEVBQUtOLEdBQzdFLElBQUlrN0MsRUFBVzU1QyxLQUFLKy9FLDZCQUE2Qi9nRixHQUVqRCxPQURBNkcsRUFBb0IsT0FBYit6QyxFQUFtQixrQ0FBb0M1NkMsRUFBTSxLQUM3RHkrRSxHQUFrQk4sb0JBQW9CdmpDLEVBQVVsN0MsSUFNM0RzL0UsRUFBNEIzK0UsVUFBVTZnRiwrQkFBaUMsU0FBVWxoRixFQUFLTixHQUNsRixJQUFJa2EsRUFBUTVZLEtBQUs0K0UsbUJBQW1CdDFELEtBQUt0cUIsR0FDekM2RyxFQUFpQixPQUFWK1MsRUFBZ0Isb0NBQXNDNVosRUFBTSxLQUNuRSxJQUFJKzVCLEVBQVVuUyxPQUFPaE8sRUFBTSxJQUN2QmlvQixPQUFzQnQzQixJQUFicVAsRUFBTSxHQUFtQkEsRUFBTSxHQUFLLEtBQ2pELE9BQU9za0UsR0FBaUJDLG9CQUFvQixJQUFJZixHQUFLdjdDLEdBQVM5SCxFQUFTcjZCLElBTTNFcy9FLEVBQTRCMytFLFVBQVUrZ0Ysa0NBQW9DLFNBQVVwaEYsRUFBS04sR0FDckYsSUFBSWthLEVBQVE1WSxLQUFLNitFLGlCQUFpQnYxRCxLQUFLdHFCLEdBQ3ZDNkcsRUFBaUIsT0FBVitTLEVBQWdCLGtDQUFvQzVaLEVBQU0sS0FDakUsSUFBSWk1QixFQUFXclIsT0FBT2hPLEVBQU0sSUFDNUIsT0FBTzRrRSxHQUFvQkwsb0JBQW9CbGxELEVBQVV2NUIsSUFNN0RzL0UsRUFBNEIzK0UsVUFBVSsvRSwwQkFBNEIsU0FBVTFnRixHQUN4RSxPQUFPay9FLEdBQWtCVCxvQkFBb0J6K0UsSUFFakRzL0UsRUFBNEIzK0UsVUFBVThnRix5QkFBMkIsU0FBVTNwQixHQUN2RSxPQUFPaHhELEVBQU05RCxVQUFVMUIsVUFBTSxPQUFRLEdBQVEsV0FDekMsT0FBT3dGLEVBQU0vQyxZQUFZekMsTUFBTSxTQUFVaUwsR0FDckMsT0FBSXVyRCxFQUFjcjFCLEtBQUtDLE1BQVFwaEMsS0FBS3EzRSxZQUFZajJDLEtBQzVDenBCLEVBQU1zbEUsR0FBVyx5Q0FBMkN6bUIsRUFBY3IxQixLQUFLQyxLQUN4RSxDQUFDLElBRUwsQ0FBQyxFQUFjcGhDLEtBQUsyb0UsV0FBVzRRLGdCQUFnQi9pQixFQUFjejlCLFFBQVN5OUIsRUFBYzZELE1BQU83RCxFQUFjMXlELGVBSTVIazZFLEVBQTRCMytFLFVBQVVnaEYsdUJBQXlCLFNBQVVNLEdBQ3JFLE9BQU8zZ0YsS0FBSzJvRSxXQUFXaVQsaUJBQWlCK0UsRUFBZTFvRCxTQUFVMG9ELEVBQWV0bUIsTUFBT3NtQixFQUFlNzhFLFFBRTFHazZFLEVBQTRCMytFLFVBQVUyZ0YsdUJBQXlCLFNBQVVwbUMsRUFBVThqQyxHQUMvRSxJQUFJaDBFLEVBQVExSixLQUNSNGdGLEVBQWtCNWdGLEtBQUtvN0UsMkJBQ3ZCc0MsRUFDQTE5RSxLQUFLaytFLGNBQWN0a0MsR0FBWThqQyxTQUd4QjE5RSxLQUFLaytFLGNBQWN0a0MsR0FFOUIsSUFBSWluQyxFQUFhN2dGLEtBQUtvN0UsMkJBQ2xCMEYsRUFBZSxHQUNmQyxFQUFpQixHQWlCckIsT0FoQkFGLEVBQVdydkUsU0FBUSxTQUFVeW1CLEdBQVksT0FBT3p5QixFQUFNOUQsVUFBVWdJLE9BQU8sT0FBUSxHQUFRLFdBQ25GLE9BQU9sRSxFQUFNL0MsWUFBWXpDLE1BQU0sU0FBVWlMLEdBSXJDLE9BSEsyMUUsRUFBZ0I1c0UsSUFBSWlrQixJQUNyQjZvRCxFQUFhcjlFLEtBQUt3MEIsR0FFZixDQUFDLFlBR2hCMm9ELEVBQWdCcHZFLFNBQVEsU0FBVXltQixHQUFZLE9BQU96eUIsRUFBTTlELFVBQVVnSSxPQUFPLE9BQVEsR0FBUSxXQUN4RixPQUFPbEUsRUFBTS9DLFlBQVl6QyxNQUFNLFNBQVVpTCxHQUlyQyxPQUhLNDFFLEVBQVc3c0UsSUFBSWlrQixJQUNoQjhvRCxFQUFldDlFLEtBQUt3MEIsR0FFakIsQ0FBQyxZQUdUajRCLEtBQUsyb0UsV0FBV21ULHlCQUF5QmdGLEVBQWNDLElBRWxFL0MsRUFBNEIzK0UsVUFBVWdnRix1QkFBeUIsU0FBVS9NLEdBTWpFdHlFLEtBQUtrK0UsY0FBYzVMLEVBQVkxNEIsV0FDL0I1NUMsS0FBSzgvRCxtQkFBbUJ3UyxFQUFZQSxjQUdyQzBMLEVBaFlxQyxHQXFaaEQsSUFBSWdELEdBQXlDLFdBQ3pDLFNBQVNBLElBQ0xoaEYsS0FBS2loRixXQUFhLElBQUlwRCxHQUN0Qjc5RSxLQUFLdy9FLFdBQWEsR0FDbEJ4L0UsS0FBSzJvRSxXQUFhLEtBQ2xCM29FLEtBQUs4L0QsbUJBQXFCLEtBQzFCOS9ELEtBQUt3c0Isc0JBQXdCLEtBMENqQyxPQXhDQXcwRCxFQUF3QjNoRixVQUFVdzVFLG1CQUFxQixTQUFVOS9DLEtBR2pFaW9ELEVBQXdCM2hGLFVBQVV1NkUsb0JBQXNCLFNBQVU3Z0QsRUFBU3NoQyxFQUFPdjJELEtBR2xGazlFLEVBQXdCM2hGLFVBQVU2NEUsb0JBQXNCLFNBQVVqZ0QsR0FFOUQsT0FEQWo0QixLQUFLaWhGLFdBQVduRCxlQUFlN2xELEdBQ3hCajRCLEtBQUt3L0UsV0FBV3ZuRCxJQUFhLGVBRXhDK29ELEVBQXdCM2hGLFVBQVVpNkUsaUJBQW1CLFNBQVVyaEQsRUFBVW9pQyxFQUFPdjJELEdBQzVFOUQsS0FBS3cvRSxXQUFXdm5ELEdBQVlvaUMsR0FFaEMybUIsRUFBd0IzaEYsVUFBVW01RSx1QkFBeUIsU0FBVXZnRCxHQUNqRWo0QixLQUFLaWhGLFdBQVdsRCxrQkFBa0I5bEQsSUFFdEMrb0QsRUFBd0IzaEYsVUFBVWk4RSxtQkFBcUIsU0FBVXJqRCxHQUM3RCxPQUFPajRCLEtBQUtpaEYsV0FBVzU0QyxnQkFBZ0JyMEIsSUFBSWlrQixJQUUvQytvRCxFQUF3QjNoRixVQUFVcTVFLGdCQUFrQixTQUFVemdELFVBQ25EajRCLEtBQUt3L0UsV0FBV3ZuRCxJQUUzQitvRCxFQUF3QjNoRixVQUFVKzdFLHlCQUEyQixXQUN6RCxPQUFPcDdFLEtBQUtpaEYsV0FBVzU0QyxpQkFFM0IyNEMsRUFBd0IzaEYsVUFBVW81RSxvQkFBc0IsU0FBVXhnRCxHQUM5RCxPQUFPajRCLEtBQUtpaEYsV0FBVzU0QyxnQkFBZ0JyMEIsSUFBSWlrQixJQUUvQytvRCxFQUF3QjNoRixVQUFVZ3hCLE1BQVEsV0FFdEMsT0FEQXJ3QixLQUFLaWhGLFdBQWEsSUFBSXBELEdBQ2Y5N0UsUUFBUUMsV0FFbkJnL0UsRUFBd0IzaEYsVUFBVTh5RCxpQkFBbUIsU0FBVWh4QixFQUFNc3hCLEVBQWlCQyxLQUd0RnN1QixFQUF3QjNoRixVQUFVODVFLGVBQWlCLFNBQVU3RyxLQUc3RDBPLEVBQXdCM2hGLFVBQVUwbEQsU0FBVyxhQUM3Q2k4QixFQUF3QjNoRixVQUFVdXRCLG9CQUFzQixTQUFVSCxLQUMzRHUwRCxFQWhEaUMsR0F3RXhDRSxHQUE4QyxXQUM5QyxTQUFTQSxFQUE2QkMsRUFBZ0JDLEdBQ2xEcGhGLEtBQUttaEYsZUFBaUJBLEVBQ3RCbmhGLEtBQUtvaEYsZ0JBQWtCQSxFQUszQixPQUhBRixFQUE2QjdoRixVQUFVK2hELFVBQVksV0FDL0MsT0FBT3JELEdBQVVJLGNBQWNuK0MsS0FBS21oRixpQkFFakNELEVBUnNDLEdBVTdDRyxHQUNBLGFBU0FDLEdBQWlDLFdBQ2pDLFNBQVNBLEVBQWdCNzhELEVBQVU0aEMsRUFBY2tXLEVBU2pEenNDLEdBQ0k5dkIsS0FBS3lrQixTQUFXQSxFQUNoQnprQixLQUFLcW1ELGFBQWVBLEVBQ3BCcm1ELEtBQUt1OEQsWUFBY0EsRUFDbkJ2OEQsS0FBSzh2QixXQUFhQSxFQUNsQjl2QixLQUFLNDVDLFNBQVcvdkIsRUFBT0MsUUFzZTNCLE9BamNBdzNELEVBQWdCamlGLFVBQVVneEIsTUFBUSxTQUFVa3hELEdBQ3hDLElBQUk3M0UsRUFBUTFKLEtBQ1pBLEtBQUt3aEYsc0JBUUwsSUFBSUMsRUFBcUIsSUFBSWg0RSxHQU96Qmk0RSxFQUFvQixJQUFJajRFLEdBQ3hCazRFLEdBQWMsRUFxQmxCLE9BcEJBM2hGLEtBQUt1OEQsWUFBWXFsQixtQkFBa0IsU0FBVXpnRCxHQUNwQ3dnRCxFQU9EajRFLEVBQU1vbUIsV0FBV2Usa0JBQWlCLFdBQzlCLE9BQU9ubkIsRUFBTW1nRSx1QkFBdUIxb0MsT0FQeEN3Z0QsR0FBYyxFQUNkajRFLEVBQU1tNEUsc0JBQXNCTixFQUFxQkcsRUFBbUJ2Z0QsR0FDL0QzK0IsTUFBSyxTQUFVcy9FLEdBQWMsT0FBT3A0RSxFQUFNcTRFLGVBQWU1Z0QsRUFBTTJnRCxNQUMvRHQvRSxLQUFLaS9FLEVBQW1Cei9FLFFBQVN5L0UsRUFBbUJ4L0UsWUFTakVqQyxLQUFLOHZCLFdBQVdlLGtCQUFpQixXQUM3QixPQUFPNHdELEVBQW1COTNFLFdBS3ZCKzNFLEVBQWtCLzNFLFNBRzdCMjNFLEVBQWdCamlGLFVBQVUyb0UsY0FBZ0IsV0FDdEMsSUFBSXQrRCxFQUFRMUosS0FFWixPQURBQSxLQUFLd2hGLHNCQUNFeGhGLEtBQUs4dkIsV0FBV3NCLFNBQVEsV0FDM0IsT0FBTzFuQixFQUFNaS9ELFdBQVdYLG9CQW9CaENzWixFQUFnQmppRixVQUFVd2lGLHNCQUF3QixTQUFVTixFQUFxQkcsRUFBbUJ2Z0QsR0FDaEcsSUFBSXozQixFQUFRMUosS0FDWixPQUFJdWhGLGFBQStCTCxHQUN4QmxoRixLQUFLZ2lGLDBCQUEwQjdnRCxFQUFNb2dELEdBQ3ZDLytFLE1BQUssU0FBVXMvRSxHQUVoQixPQURBSixFQUFrQjEvRSxVQUNYOC9FLEtBRU5oNEUsT0FBTSxTQUFVaEcsR0FLakIsR0FGQTQ5RSxFQUFrQnovRSxPQUFPNkIsSUFFcEI0RixFQUFNdTRFLFlBQVluK0UsR0FDbkIsTUFBTUEsRUFLVixPQUhBb0YsUUFBUW1DLEtBQUssNkVBRVR2SCxHQUNHNEYsRUFBTXc0RSw2QkFRakJSLEVBQWtCMS9FLFVBQ1hoQyxLQUFLa2lGLDJCQU9wQlosRUFBZ0JqaUYsVUFBVTRpRixZQUFjLFNBQVVuK0UsR0FDOUMsT0FBSUEsYUFBaUJvaUIsRUFDVHBpQixFQUFNc0csT0FBUzZhLEVBQUtXLHFCQUN4QjloQixFQUFNc0csT0FBUzZhLEVBQUtjLGdCQUVLLG9CQUFqQm84RCxjQUNacitFLGFBQWlCcStFLGdCQXBMTSxLQWdNdkJyK0UsRUFBTXNHLE1Bak1VLEtBa01adEcsRUFBTXNHLE1Bbk1ZLEtBc01sQnRHLEVBQU1zRyxPQVFsQmszRSxFQUFnQmppRixVQUFVbWlGLG9CQUFzQixXQUM1QyxHQUFJeGhGLEtBQUs4dkIsV0FBV3N5RCxlQUNoQixNQUFNLElBQUlsOEQsRUFBZWpCLEVBQUtXLG9CQUFxQiw0Q0FRM0QwN0QsRUFBZ0JqaUYsVUFBVTJpRiwwQkFBNEIsU0FBVTdnRCxFQUFNa2hELEdBQ2xFLElBQUkzNEUsRUFBUTFKLEtBR1I0ckIsRUFBaUJzYSxHQUFxQmtnQixtQkFBbUJwbUQsS0FBS3FtRCxjQUU5RHZsQixFQUFhLElBQUkwcUMsR0FBb0J4ckUsS0FBS3FtRCxhQUFhMTZCLFdBQVksQ0FDbkU4L0MsZUFBZSxJQUVuQixPQUFPMXBFLFFBQVFDLFVBQVVRLE1BQUssV0FBYyxPQUFPZ0QsRUFBTTlELFVBQVVnSSxPQUFPLE9BQVEsR0FBUSxXQUN0RixJQUFJMDNDLEVBQVdnQixFQUNmLE9BQU81OEMsRUFBTS9DLFlBQVl6QyxNQUFNLFNBQVVpTCxHQUNyQyxPQUFRQSxFQUFHbEksT0FDUCxLQUFLLEVBQ0QsR0FBSXMvRSxFQUFTakIsa0JBQ1JwRCxHQUE0Qi9oRCxZQUFZajhCLEtBQUt5a0IsVUFDOUMsTUFBTSxJQUFJeUIsRUFBZWpCLEVBQUtjLGNBQWUsbUZBTWpELE9BSkFxN0IsRUFBWWloQyxFQUFTamhDLFlBQ3JCcGhELEtBQUtvM0Usa0JBQW9CaUwsRUFBU2pCLGdCQUM1QixJQUFJcEQsR0FBNEJoK0UsS0FBSzh2QixXQUFZOXZCLEtBQUt5a0IsU0FBVW1ILEVBQWdCNXJCLEtBQUs0NUMsU0FBVXpZLEdBQy9GLElBQUk2L0MsR0FDSCxDQUFDLEVBQWE5NkMsR0FBcUJpYywyQkFBMkIsQ0FDN0RqSix3QkFBeUJtcEMsRUFBU2pCLGdCQUNsQ3gxRCxlQUFnQkEsRUFDaEJndUIsU0FBVTU1QyxLQUFLNDVDLFNBQ2ZuMUIsU0FBVXprQixLQUFLeWtCLFNBQ2Y0ekIsTUFBT3I0QyxLQUFLOHZCLFdBQ1pnUixXQUFZQSxFQUNac2dCLFVBQVdBLEVBQ1g3MEIscUJBQXNCdnNCLEtBQUtvM0UscUJBRXZDLEtBQUssRUFHRCxPQUZBaDFCLEVBQWNuM0MsRUFBR2pJLE9BQ2pCaEQsS0FBS29pRCxZQUFjQSxFQUNaLENBQUMsRUFBY0EsRUFBWXBoQixrQkFBa0I2ZCw2QkFVeEV5aUMsRUFBZ0JqaUYsVUFBVTZpRix1QkFBeUIsV0FHL0MsT0FGQWxpRixLQUFLb2lELFlBQWNzVixHQUFrQk0sdUJBQXVCaDRELEtBQUs0NUMsVUFDakU1NUMsS0FBS28zRSxrQkFBb0IsSUFBSTRKLEdBQ3RCai9FLFFBQVFDLFFBQVEsT0FPM0JzL0UsRUFBZ0JqaUYsVUFBVTBpRixlQUFpQixTQUFVNWdELEVBQU0yZ0QsR0FDdkQsSUFBSXA0RSxFQUFRMUosS0FFWixPQURBMlgsRUFuUlEsa0JBbVJTLHNCQUF1QndwQixFQUFLQyxLQUN0Q3BoQyxLQUFLeWtCLFNBQ1A2OUQsZUFBZXRpRixLQUFLcW1ELGNBQ3BCN2pELE1BQUssU0FBVTIzRCxHQUFjLE9BQU8zMEQsRUFBTTlELFVBQVVnSSxPQUFPLE9BQVEsR0FBUSxXQUM1RSxJQUFJaW9ELEVBQWFvVixFQUFxQmptQyxFQUFZaStCLEVBQVd3akIsRUFBc0NDLEVBQy9GOTRFLEVBQVExSixLQUNaLE9BQU93RixFQUFNL0MsWUFBWXpDLE1BQU0sU0FBVWlMLEdBQ3JDLE9BQVFBLEVBQUdsSSxPQUNQLEtBQUssRUFHRCxPQUZBNHVELEVBQWMsSUFBSTlELEdBQ2xCN3RELEtBQUs4K0MsV0FBYSxJQUFJNFMsR0FBVzF4RCxLQUFLb2lELFlBQWF1UCxFQUFheHdCLEdBQ3pELENBQUMsRUFBYW5oQyxLQUFLOCtDLFdBQVd6dUIsU0FDekMsS0FBSyxFQXVCRCxPQXRCQXBsQixFQUFHakksT0FDQzgrRSxJQUVBOWhGLEtBQUt5aUYsYUFBZSxJQUFJN2pDLEdBQWFrakMsRUFBWTloRixLQUFLOHZCLFdBQVk5dkIsS0FBSzgrQyxhQUUzRWlvQixFQUFzQi9tRSxLQUFLeWtCLFNBQVNpK0QseUJBQ3BDNWhELEVBQWE5Z0MsS0FBS3lrQixTQUFTaytELGNBQWMzaUYsS0FBS3FtRCxhQUFhMTZCLFlBQzNEb3pDLEVBQVksSUFBSVgsR0FBVXArRCxLQUFLOHZCLFdBQVlxcUMsRUFBWW42RCxLQUFLdThELFlBQWF6N0IsR0FDekV5aEQsRUFBdUMsU0FBVWpRLEdBQzdDLE9BQU81b0UsRUFBTWkvRCxXQUFXK0osdUJBQXVCSixFQUFhdlksR0FBa0IrTSxjQUVsRjBiLEVBQTZDLFNBQVVsUSxHQUNuRCxPQUFPNW9FLEVBQU1pL0QsV0FBVytKLHVCQUF1QkosRUFBYXZZLEdBQWtCa2Ysb0JBRWxGajVFLEtBQUtzMkUsWUFBYyxJQUFJeFAsR0FBWTltRSxLQUFLOCtDLFdBQVlpZ0IsRUFBVy8rRCxLQUFLOHZCLFdBQVl5eUQsRUFBc0N4YixHQUN0SC9tRSxLQUFLMm9FLFdBQWEsSUFBSTdoQyxHQUFXOW1DLEtBQUs4K0MsV0FBWTkrQyxLQUFLczJFLFlBQWF0MkUsS0FBS28zRSxrQkFBbUJqMkMsR0FDNUZuaEMsS0FBS28zRSxrQkFBa0J0WCxtQkFBcUIwaUIsRUFFNUN4aUYsS0FBS3MyRSxZQUFZM04sV0FBYTNvRSxLQUFLMm9FLFdBQ25DM29FLEtBQUtvM0Usa0JBQWtCek8sV0FBYTNvRSxLQUFLMm9FLFdBQ3pDM29FLEtBQUs0aUYsU0FBVyxJQUFJeFEsR0FBYXB5RSxLQUFLMm9FLFlBRS9CLENBQUMsRUFBYTNvRSxLQUFLbzNFLGtCQUFrQi9tRCxTQUNoRCxLQUFLLEVBR0QsT0FEQXBsQixFQUFHakksT0FDSSxDQUFDLEVBQWFoRCxLQUFLczJFLFlBQVlqbUQsU0FDMUMsS0FBSyxFQUlELE9BSEFwbEIsRUFBR2pJLE9BR0ksQ0FBQyxFQUFhaEQsS0FBS29pRCxZQUFZUSx5QkFBd0IsU0FBVXRCLEdBQWEsT0FBTzk3QyxFQUFNOUQsVUFBVWdJLE9BQU8sT0FBUSxHQUFRLFdBQzNILE9BQU9sRSxFQUFNL0MsWUFBWXpDLE1BQU0sU0FBVWlMLEdBQ3JDLE9BQVFBLEVBQUdsSSxPQUNQLEtBQUssRUFBRyxNQUFPLENBQUMsRUFBYS9DLEtBQUsyb0UsV0FBV21CLGtCQUFrQnhvQixJQUMvRCxLQUFLLEVBVUQsT0FUQXIyQyxFQUFHakksT0FDQ2hELEtBQUt5aUYsZUFDRG5oQyxJQUFjdGhELEtBQUt5aUYsYUFBYXBnQyxRQUNoQ3JpRCxLQUFLeWlGLGFBQWFweUQsUUFFWml4QixHQUNOdGhELEtBQUt5aUYsYUFBYXZqQyxRQUduQixDQUFDLGNBSWhDLEtBQUssRUFNRCxPQUhBajBDLEVBQUdqSSxPQUdJLENBQUMsRUFBYWhELEtBQUtvaUQsWUFBWVUsNEJBQTJCLFdBQWMsT0FBT3Q5QyxFQUFNOUQsVUFBVWdJLE9BQU8sT0FBUSxHQUFRLFdBQ3JILE9BQU9sRSxFQUFNL0MsWUFBWXpDLE1BQU0sU0FBVWlMLEdBQ3JDLE9BQVFBLEVBQUdsSSxPQUNQLEtBQUssRUFBRyxNQUFPLENBQUMsRUFBYS9DLEtBQUs2aUYsYUFDbEMsS0FBSyxFQUVELE9BREE1M0UsRUFBR2pJLE9BQ0ksQ0FBQyxjQUloQyxLQUFLLEVBSUQsT0FEQWlJLEVBQUdqSSxPQUNJLENBQUMsY0FLNUJzK0UsRUFBZ0JqaUYsVUFBVXdxRSx1QkFBeUIsU0FBVTFvQyxHQUd6RCxPQUZBbmhDLEtBQUs4dkIsV0FBV2tDLDRCQUNoQnJhLEVBNVdRLGtCQTRXUyxxQ0FBdUN3cEIsRUFBS0MsS0FDdERwaEMsS0FBSzJvRSxXQUFXa0IsdUJBQXVCMW9DLElBR2xEbWdELEVBQWdCamlGLFVBQVUrb0UsZUFBaUIsV0FDdkMsSUFBSTErRCxFQUFRMUosS0FFWixPQURBQSxLQUFLd2hGLHNCQUNFeGhGLEtBQUs4dkIsV0FBV3NCLFNBQVEsV0FDM0IsT0FBTzFuQixFQUFNaS9ELFdBQVdQLHFCQUdoQ2taLEVBQWdCamlGLFVBQVV3akYsVUFBWSxXQUNsQyxJQUFJbjVFLEVBQVExSixLQUNaLE9BQU9BLEtBQUs4dkIsV0FBVzJCLDRCQUEyQixXQUFjLE9BQU9qc0IsRUFBTTlELFVBQVVnSSxPQUFPLE9BQVEsR0FBUSxXQUMxRyxPQUFPbEUsRUFBTS9DLFlBQVl6QyxNQUFNLFNBQVVpTCxHQUNyQyxPQUFRQSxFQUFHbEksT0FDUCxLQUFLLEVBS0QsT0FISS9DLEtBQUt5aUYsY0FDTHppRixLQUFLeWlGLGFBQWF2akMsT0FFZixDQUFDLEVBQWFsL0MsS0FBS3MyRSxZQUFZdnhCLFlBQzFDLEtBQUssRUFFRCxPQURBOTVDLEVBQUdqSSxPQUNJLENBQUMsRUFBYWhELEtBQUtvM0Usa0JBQWtCcnlCLFlBQ2hELEtBQUssRUFFRCxPQURBOTVDLEVBQUdqSSxPQUNJLENBQUMsRUFBYWhELEtBQUtvaUQsWUFBWTJDLFlBQzFDLEtBQUssRUFNRCxPQUxBOTVDLEVBQUdqSSxPQUlIaEQsS0FBS3U4RCxZQUFZdW1CLHVCQUNWLENBQUMsY0FVNUJ4QixFQUFnQmppRixVQUFVMGpGLHFCQUF1QixXQUM3QyxJQUFJcjVFLEVBQVExSixLQUNaQSxLQUFLd2hGLHNCQUNMLElBQUl2dEUsRUFBVyxJQUFJeEssR0FJbkIsT0FIQXpKLEtBQUs4dkIsV0FBV2Usa0JBQWlCLFdBQzdCLE9BQU9ubkIsRUFBTWkvRCxXQUFXa1IsOEJBQThCNWxFLE1BRW5EQSxFQUFTdEssU0FFcEIyM0UsRUFBZ0JqaUYsVUFBVWtwRSxPQUFTLFNBQVVycUQsRUFBT3BRLEVBQVV3RyxHQUMxRCxJQUFJNUssRUFBUTFKLEtBQ1pBLEtBQUt3aEYsc0JBQ0wsSUFBSTFnQyxFQUFXLElBQUl1eUIsR0FBY24xRCxFQUFPcFEsRUFBVXdHLEdBSWxELE9BSEF0VSxLQUFLOHZCLFdBQVdlLGtCQUFpQixXQUM3QixPQUFPbm5CLEVBQU1rNUUsU0FBU3JhLE9BQU96bkIsTUFFMUJBLEdBRVh3Z0MsRUFBZ0JqaUYsVUFBVW9wRSxTQUFXLFNBQVUzbkIsR0FDM0MsSUFBSXAzQyxFQUFRMUosS0FHUkEsS0FBS2dqRixrQkFHVGhqRixLQUFLOHZCLFdBQVdlLGtCQUFpQixXQUM3QixPQUFPbm5CLEVBQU1rNUUsU0FBU25hLFNBQVMzbkIsT0FHdkN3Z0MsRUFBZ0JqaUYsVUFBVTRqRiwwQkFBNEIsU0FBVTdwRCxHQUM1RCxJQUFJMXZCLEVBQVExSixLQUVaLE9BREFBLEtBQUt3aEYsc0JBQ0V4aEYsS0FBSzh2QixXQUNQc0IsU0FBUSxXQUNULE9BQU8xbkIsRUFBTW8xQyxXQUFXc1csYUFBYWg4QixNQUVwQzUyQixNQUFLLFNBQVU2MkIsR0FDaEIsR0FBSUEsYUFBb0IwUixHQUNwQixPQUFPMVIsRUFFTixHQUFJQSxhQUFvQjhULEdBQ3pCLE9BQU8sS0FHUCxNQUFNLElBQUlqbkIsRUFBZWpCLEVBQUtlLFlBQWEsc01BT3ZEczdELEVBQWdCamlGLFVBQVU2akYsMkJBQTZCLFNBQVVobEUsR0FDN0QsSUFBSXhVLEVBQVExSixLQUVaLE9BREFBLEtBQUt3aEYsc0JBQ0V4aEYsS0FBSzh2QixXQUFXc0IsU0FBUSxXQUFjLE9BQU81ckIsRUFBTTlELFVBQVVnSSxPQUFPLE9BQVEsR0FBUSxXQUN2RixJQUFJd3NFLEVBQWFnQixFQUFNa0IsRUFDdkIsT0FBTzV5RSxFQUFNL0MsWUFBWXpDLE1BQU0sU0FBVWlMLEdBQ3JDLE9BQVFBLEVBQUdsSSxPQUNQLEtBQUssRUFBRyxNQUFPLENBQUMsRUFBYS9DLEtBQUs4K0MsV0FBVzRXLGFBQWF4M0MsR0FDNUIsSUFDOUIsS0FBSyxFQUlELE9BSEFnNEQsRUFBY2pyRSxFQUFHakksT0FDakJrMEUsRUFBTyxJQUFJN0MsR0FBS24yRCxFQUFPZzRELEVBQVlqb0IsWUFDbkNtcUIsRUFBaUJsQixFQUFLeEMsa0JBQWtCd0IsRUFBWTU1QixXQUM3QyxDQUFDLEVBQWM0NkIsRUFBSzNrQyxhQUFhNmxDLEdBQ1IsR0FBT3RiLHFCQUszRHdrQixFQUFnQmppRixVQUFVaWdFLE1BQVEsU0FBVXBtQyxHQUN4QyxJQUFJeHZCLEVBQVExSixLQUNaQSxLQUFLd2hGLHNCQUNMLElBQUl2dEUsRUFBVyxJQUFJeEssR0FJbkIsT0FIQXpKLEtBQUs4dkIsV0FBV2Usa0JBQWlCLFdBQzdCLE9BQU9ubkIsRUFBTWkvRCxXQUFXckosTUFBTXBtQyxFQUFXamxCLE1BRXRDQSxFQUFTdEssU0FFcEIyM0UsRUFBZ0JqaUYsVUFBVXNzQixXQUFhLFdBQ25DLE9BQU8zckIsS0FBS3FtRCxhQUFhMTZCLFlBRTdCMjFELEVBQWdCamlGLFVBQVU4ekUsMkJBQTZCLFNBQVVybEUsR0FDN0QsSUFBSXBFLEVBQVExSixLQUNaQSxLQUFLd2hGLHNCQUNMeGhGLEtBQUs4dkIsV0FBV2Usa0JBQWlCLFdBRTdCLE9BREFubkIsRUFBTWs1RSxTQUFTelAsMkJBQTJCcmxFLEdBQ25DL0wsUUFBUUMsY0FHdkJzL0UsRUFBZ0JqaUYsVUFBVSt6RSw4QkFBZ0MsU0FBVXRsRSxHQUc1RDlOLEtBQUtnakYsa0JBR1RoakYsS0FBSzRpRixTQUFTeFAsOEJBQThCdGxFLElBRWhEM1AsT0FBT0MsZUFBZWtqRixFQUFnQmppRixVQUFXLG1CQUFvQixDQUNqRWYsSUFBSyxXQUlELE9BQU8wQixLQUFLOHZCLFdBQVdzeUQsZ0JBRTNCL2pGLFlBQVksRUFDWmtaLGNBQWMsSUFFbEIrcEUsRUFBZ0JqaUYsVUFBVThkLFlBQWMsU0FBVW81RCxHQUM5QyxJQUFJN3NFLEVBQVExSixLQUNaQSxLQUFLd2hGLHNCQUNMLElBQUl2dEUsRUFBVyxJQUFJeEssR0FLbkIsT0FKQXpKLEtBQUs4dkIsV0FBV2Usa0JBQWlCLFdBRTdCLE9BREFubkIsRUFBTWkvRCxXQUFXbnJDLGVBQWU5ekIsRUFBTW9tQixXQUFZeW1ELEVBQWdCdGlFLEdBQzNEbFMsUUFBUUMsYUFFWmlTLEVBQVN0SyxTQUViMjNFLEVBcmZ5QixHQTZnQmhDNkIsR0FBK0IsV0FDL0IsU0FBU0EsRUFBY3IxRSxHQUNuQjlOLEtBQUs4TixTQUFXQSxFQUtoQjlOLEtBQUtvakYsT0FBUSxFQXFCakIsT0FuQkFELEVBQWM5akYsVUFBVStDLEtBQU8sU0FBVTFELEdBQ3JDc0IsS0FBS3FqRixjQUFjcmpGLEtBQUs4TixTQUFTMUwsS0FBTTFELElBRTNDeWtGLEVBQWM5akYsVUFBVXlFLE1BQVEsU0FBVUEsR0FDdEM5RCxLQUFLcWpGLGNBQWNyakYsS0FBSzhOLFNBQVNoSyxNQUFPQSxJQUU1Q3EvRSxFQUFjOWpGLFVBQVVpa0YsS0FBTyxXQUMzQnRqRixLQUFLb2pGLE9BQVEsR0FFakJELEVBQWM5akYsVUFBVWdrRixjQUFnQixTQUFVRSxFQUFjNWtFLEdBQzVELElBQUlqVixFQUFRMUosS0FDUEEsS0FBS29qRixPQUNON3lELFlBQVcsV0FDRjdtQixFQUFNMDVFLE9BQ1BHLEVBQWE1a0UsS0FFbEIsSUFHSndrRSxFQTVCdUIsR0F1RDlCSyxHQUE2QixXQU83QixTQUFTQSxJQUVMLElBREEsSUFBSUMsRUFBYSxHQUNSOTRFLEVBQUssRUFBR0EsRUFBS3ZLLFVBQVVDLE9BQVFzSyxJQUNwQzg0RSxFQUFXOTRFLEdBQU12SyxVQUFVdUssSUF4bW1CdkMsU0FBbURvYyxFQUFjcm9CLEVBQU9WLEVBQU0wbEYsR0FDMUUsS0FBTWhsRixhQUFpQm1CLFFBQVVuQixFQUFNMkIsT0FBU3FqRixFQUM1QyxNQUFNLElBQUl4OUQsRUFBZWpCLEVBQUtJLGlCQUFrQixZQUFjMEIsRUFBZSxtQkFBcUIvb0IsRUFBTywwQ0FFcEdncEIsRUFBYTA4RCxFQUFxQixXQUFhLEtBc21tQnBEQyxDQUEwQyxZQUFhRixFQUFZLGFBQWMsR0FDakYsSUFBSyxJQUFJaG1GLEVBQUksRUFBR0EsRUFBSWdtRixFQUFXcGpGLFNBQVU1QyxFQUVyQyxHQURBOHBCLEVBQWdCLFlBQWEsU0FBVTlwQixFQUFHZ21GLEVBQVdobUYsSUFDeEIsSUFBekJnbUYsRUFBV2htRixHQUFHNEMsT0FDZCxNQUFNLElBQUk2bEIsRUFBZWpCLEVBQUtJLGlCQUFrQiwyRUFJeERybEIsS0FBSzRqRixjQUFnQixJQUFJaDFELEdBQVU2MEQsR0FrQnZDLE9BaEJBRCxFQUFZSyxXQUFhLFdBQ3JCLE9BQU9MLEVBQVlNLGNBRXZCTixFQUFZbmtGLFVBQVVpckIsUUFBVSxTQUFVaUIsR0FDdEMsS0FBTUEsYUFBaUJpNEQsR0FDbkIsTUFBTTc1RCxFQUFrQixVQUFXLFlBQWEsRUFBRzRCLEdBRXZELE9BQU92ckIsS0FBSzRqRixjQUFjdDVELFFBQVFpQixFQUFNcTRELGdCQVE1Q0osRUFBWU0sYUFBZSxJQUFJTixFQUFZNTBELEdBQVVHLFdBQVdSLG1CQUN6RGkxRCxFQXRDcUIsR0EyQzVCTyxHQUFXLElBQUkxWSxPQUFPOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFtQzFCLElBQUkyWSxHQUNBLFNBQW9CdGxGLEVBQU95aUMsR0FDdkJuaEMsS0FBS21oQyxLQUFPQSxFQUNabmhDLEtBQUs4UyxLQUFPLFFBQ1o5UyxLQUFLaWtGLFlBQWMsR0FFbkJqa0YsS0FBS2lrRixZQUEyQixjQUFJLFVBQVl2bEYsR0FLcER3bEYsR0FBMEMsV0FDMUMsU0FBU0EsSUFNTGxrRixLQUFLbWtGLGVBQWlCLEtBZ0IxQixPQWRBRCxFQUF5QjdrRixVQUFVeThELFNBQVcsV0FDMUMsT0FBTy81RCxRQUFRQyxRQUFRLE9BRTNCa2lGLEVBQXlCN2tGLFVBQVVvOEQsZ0JBQWtCLGFBQ3JEeW9CLEVBQXlCN2tGLFVBQVV1aUYsa0JBQW9CLFNBQVV1QyxHQUM3RHQrRSxHQUFRN0YsS0FBS21rRixlQUFnQiwyQ0FDN0Jua0YsS0FBS21rRixlQUFpQkEsRUFFdEJBLEVBQWUvSCxHQUFLMTJELGtCQUV4QncrRCxFQUF5QjdrRixVQUFVeWpGLHFCQUF1QixXQUN0RGo5RSxFQUErQixPQUF4QjdGLEtBQUtta0YsZUFBeUIsc0RBQ3JDbmtGLEtBQUtta0YsZUFBaUIsTUFFbkJELEVBdkJrQyxHQXlCekNFLEdBQTZDLFdBQzdDLFNBQVNBLEVBQTRCQyxHQUNqQyxJQUFJMzZFLEVBQVExSixLQUtaQSxLQUFLc2tGLGNBQWdCLEtBRXJCdGtGLEtBQUtxM0UsWUFBYytFLEdBQUsxMkQsZ0JBQ3hCMWxCLEtBQUt1a0YscUJBQXNCLEVBSzNCdmtGLEtBQUt3a0YsYUFBZSxFQUVwQnhrRixLQUFLbWtGLGVBQWlCLEtBQ3RCbmtGLEtBQUt5a0YsY0FBZSxFQUNwQnprRixLQUFLc2tGLGNBQWdCLFdBQ2pCNTZFLEVBQU04NkUsZUFDTjk2RSxFQUFNMnRFLFlBQWMzdEUsRUFBTWc3RSxVQUMxQmg3RSxFQUFNNjZFLHFCQUFzQixFQUN4Qjc2RSxFQUFNeTZFLGdCQUNOejZFLEVBQU15NkUsZUFBZXo2RSxFQUFNMnRFLGNBR25DcjNFLEtBQUt3a0YsYUFBZSxFQUNwQnhrRixLQUFLZzdELEtBQU9xcEIsRUFBYWh3RSxhQUFhLENBQUVuRixVQUFVLElBQzlDbFAsS0FBS2c3RCxLQUNMaDdELEtBQUtnN0QsS0FBSzJwQixxQkFBcUIza0YsS0FBS3NrRixnQkFJcEN0a0YsS0FBS3NrRixjQUFjLE1BQ25CRCxFQUFhL2xGLE1BQU1rRSxNQUFLLFNBQVV3NEQsR0FDOUJ0eEQsRUFBTXN4RCxLQUFPQSxFQUNUdHhELEVBQU00NkUsZUFFTjU2RSxFQUFNc3hELEtBQUsycEIscUJBQXFCajdFLEVBQU00NkUsa0JBRTNDLGdCQWdFWCxPQTNEQUYsRUFBNEIva0YsVUFBVXk4RCxTQUFXLFdBQzdDLElBQUlweUQsRUFBUTFKLEtBQ1o2RixFQUE2QixNQUF0QjdGLEtBQUtza0YsY0FBdUIscURBSW5DLElBQUlNLEVBQXNCNWtGLEtBQUt3a0YsYUFDM0JDLEVBQWV6a0YsS0FBS3lrRixhQUV4QixPQURBemtGLEtBQUt5a0YsY0FBZSxFQUNmemtGLEtBQUtnN0QsS0FHSGg3RCxLQUFLZzdELEtBQUtjLFNBQVMyb0IsR0FBY2ppRixNQUFLLFNBQVVxaUYsR0FJbkQsR0FBSW43RSxFQUFNODZFLGVBQWlCSSxFQUN2QixNQUFNLElBQUkxK0QsRUFBZWpCLEVBQUtZLFFBQVMseUNBR3ZDLE9BQUlnL0QsR0FDQWgvRSxFQUF3QyxpQkFBMUJnL0UsRUFBVUMsWUFBMEIsOENBQWdERCxHQUMzRixJQUFJYixHQUFXYSxFQUFVQyxZQUFhcDdFLEVBQU0ydEUsY0FHNUMsUUFmUnQxRSxRQUFRQyxRQUFRLE9Bb0IvQm9pRixFQUE0Qi9rRixVQUFVbzhELGdCQUFrQixXQUNwRHo3RCxLQUFLeWtGLGNBQWUsR0FFeEJMLEVBQTRCL2tGLFVBQVV1aUYsa0JBQW9CLFNBQVV1QyxHQUNoRXQrRSxHQUFRN0YsS0FBS21rRixlQUFnQiwyQ0FDN0Jua0YsS0FBS21rRixlQUFpQkEsRUFFbEJua0YsS0FBS3VrRixxQkFDTEosRUFBZW5rRixLQUFLcTNFLGNBRzVCK00sRUFBNEIva0YsVUFBVXlqRixxQkFBdUIsV0FDekRqOUUsRUFBNkIsTUFBdEI3RixLQUFLc2tGLGNBQXVCLHVDQUNuQ3orRSxFQUErQixPQUF4QjdGLEtBQUtta0YsZUFBeUIsNkRBQ2pDbmtGLEtBQUtnN0QsTUFDTGg3RCxLQUFLZzdELEtBQUsrcEIsd0JBQXdCL2tGLEtBQUtza0YsZUFFM0N0a0YsS0FBS3NrRixjQUFnQixLQUNyQnRrRixLQUFLbWtGLGVBQWlCLE1BTTFCQyxFQUE0Qi9rRixVQUFVcWxGLFFBQVUsV0FDNUMsSUFBSU0sRUFBYWhsRixLQUFLZzdELE1BQVFoN0QsS0FBS2c3RCxLQUFLaXFCLFNBRXhDLE9BREFwL0UsRUFBc0IsT0FBZm0vRSxHQUE2QyxpQkFBZkEsRUFBeUIseUJBQTJCQSxHQUNsRixJQUFJNUksR0FBSzRJLElBRWJaLEVBekdxQyxHQWtINUNjLEdBQWlDLFdBQ2pDLFNBQVNBLEVBQWdCQyxFQUFNQyxHQUMzQnBsRixLQUFLbWxGLEtBQU9BLEVBQ1pubEYsS0FBS29sRixhQUFlQSxFQUNwQnBsRixLQUFLOFMsS0FBTyxhQUNaOVMsS0FBS21oQyxLQUFPaTdDLEdBQUtHLFlBZ0JyQixPQWRBcCtFLE9BQU9DLGVBQWU4bUYsRUFBZ0I3bEYsVUFBVyxjQUFlLENBQzVEZixJQUFLLFdBQ0QsSUFBSSttRixFQUFVLENBQ1Ysa0JBQW1CcmxGLEtBQUtvbEYsY0FFeEJFLEVBQWF0bEYsS0FBS21sRixLQUFLbnFCLEtBQUt1cUIsZ0NBQWdDLElBSWhFLE9BSElELElBQ0FELEVBQXVCLGNBQUlDLEdBRXhCRCxHQUVYaG5GLFlBQVksRUFDWmtaLGNBQWMsSUFFWDJ0RSxFQXJCeUIsR0E0QmhDTSxHQUErQyxXQUMvQyxTQUFTQSxFQUE4QkwsRUFBTUMsR0FDekNwbEYsS0FBS21sRixLQUFPQSxFQUNabmxGLEtBQUtvbEYsYUFBZUEsRUFXeEIsT0FUQUksRUFBOEJubUYsVUFBVXk4RCxTQUFXLFdBQy9DLE9BQU8vNUQsUUFBUUMsUUFBUSxJQUFJa2pGLEdBQWdCbGxGLEtBQUttbEYsS0FBTW5sRixLQUFLb2xGLGdCQUUvREksRUFBOEJubUYsVUFBVXVpRixrQkFBb0IsU0FBVXVDLEdBRWxFQSxFQUFlL0gsR0FBS0csY0FFeEJpSixFQUE4Qm5tRixVQUFVeWpGLHFCQUF1QixhQUMvRDBDLEVBQThCbm1GLFVBQVVvOEQsZ0JBQWtCLGFBQ25EK3BCLEVBZHVDLEdBb0JsRCxTQUFTQyxHQUF3QmxwQixHQUM3QixJQUFLQSxFQUNELE9BQU8sSUFBSTJuQixHQUVmLE9BQVEzbkIsRUFBWXpwRCxNQUNoQixJQUFLLE9BQ0QsSUFBSXF4QyxFQUFTb1ksRUFBWXBZLE9BTXpCLE9BSkF0K0MsSUFBNEIsaUJBQVhzK0MsR0FDRixPQUFYQSxJQUNBQSxFQUFhLE9BQ2JBLEVBQWEsS0FBbUMsaUNBQUksNkJBQ2pELElBQUlxaEMsR0FBOEJyaEMsRUFBUW9ZLEVBQVk2b0IsY0FBZ0IsS0FDakYsSUFBSyxXQUNELE9BQU83b0IsRUFBWXBZLE9BQ3ZCLFFBQ0ksTUFBTSxJQUFJaitCLEVBQWVqQixFQUFLSSxpQkFBa0I7Ozs7Ozs7Ozs7Ozs7Ozs7R0FvQjVELFNBQVNxZ0UsR0FBa0J2M0UsR0FDdkIsT0FNSixTQUE4QkEsRUFBS0MsR0FDL0IsR0FBbUIsaUJBQVJELEdBQTRCLE9BQVJBLEVBQzNCLE9BQU8sRUFHWCxJQURBLElBQUloUCxFQUFTZ1AsRUFDSnhELEVBQUssRUFBRzBELEVBQVlELEVBQVN6RCxFQUFLMEQsRUFBVWhPLE9BQVFzSyxJQUFNLENBQy9ELElBQUkyRCxFQUFTRCxFQUFVMUQsR0FDdkIsR0FBSTJELEtBQVVuUCxHQUFvQyxtQkFBbkJBLEVBQU9tUCxHQUNsQyxPQUFPLEVBR2YsT0FBTzs7Ozs7Ozs7Ozs7Ozs7OztHQWpCQUMsQ0FBcUJKLEVBQUssQ0FBQyxPQUFRLFFBQVMsYUF3Q3ZELElBOEpJdzNFLEdBOUpBQyxHQUFnQyxXQUNoQyxTQUFTQSxFQUFlQyxHQUNwQjdsRixLQUFLNmxGLFlBQWNBLEVBc0N2QixPQXBDQUQsRUFBZTF3RSxPQUFTLFdBRXBCLE9BREE0UixFQUFlLG9CQUFxQjFtQixXQUM3QjBsRixHQUFxQjN4RSxVQUVoQ3l4RSxFQUFlRyxnQkFBa0IsV0FFN0IsT0FEQWovRCxFQUFlLDZCQUE4QjFtQixXQUN0QzRsRixHQUE4Qjd4RSxVQUV6Q3l4RSxFQUFlSyxXQUFhLFdBRXhCLElBREEsSUFBSTFiLEVBQVcsR0FDTjUvRCxFQUFLLEVBQUdBLEVBQUt2SyxVQUFVQyxPQUFRc0ssSUFDcEM0L0QsRUFBUzUvRCxHQUFNdkssVUFBVXVLLEdBSzdCLE9BSEF3YyxFQUE0Qix3QkFBeUIvbUIsVUFBVyxHQUd6RCxJQUFJOGxGLEdBQXlCM2IsSUFFeENxYixFQUFlTyxZQUFjLFdBRXpCLElBREEsSUFBSTViLEVBQVcsR0FDTjUvRCxFQUFLLEVBQUdBLEVBQUt2SyxVQUFVQyxPQUFRc0ssSUFDcEM0L0QsRUFBUzUvRCxHQUFNdkssVUFBVXVLLEdBSzdCLE9BSEF3YyxFQUE0Qix5QkFBMEIvbUIsVUFBVyxHQUcxRCxJQUFJZ21GLEdBQTBCN2IsSUFFekNxYixFQUFlOVYsVUFBWSxTQUFVNXdFLEdBR2pDLE9BRkFxb0IsRUFBZ0IsdUJBQXdCLFNBQVUsRUFBR3JvQixHQUNyRCtuQixFQUEwQix1QkFBd0I3bUIsVUFBVyxHQUN0RCxJQUFJaW1GLEdBQStCbm5GLElBRTlDMG1GLEVBQWV2bUYsVUFBVWlyQixRQUFVLFNBQVVpQixHQUN6QyxPQUFPdnJCLE9BQVN1ckIsR0FFYnE2RCxFQXhDd0IsR0EwQy9CRSxHQUFzQyxTQUFVMzdFLEdBRWhELFNBQVMyN0UsSUFDTCxPQUFPMzdFLEVBQU92TSxLQUFLb0MsS0FBTSxzQkFBd0JBLEtBSXJELE9BTkF3RixFQUFNMUYsVUFBVWdtRixFQUFzQjM3RSxHQUt0QzI3RSxFQUFxQjN4RSxTQUFXLElBQUkyeEUsRUFDN0JBLEVBUDhCLENBUXZDRixJQUNFSSxHQUErQyxTQUFVNzdFLEdBRXpELFNBQVM2N0UsSUFDTCxPQUFPNzdFLEVBQU92TSxLQUFLb0MsS0FBTSwrQkFBaUNBLEtBSTlELE9BTkF3RixFQUFNMUYsVUFBVWttRixFQUErQjc3RSxHQUsvQzY3RSxFQUE4Qjd4RSxTQUFXLElBQUk2eEUsRUFDdENBLEVBUHVDLENBUWhESixJQUNFTSxHQUEwQyxTQUFVLzdFLEdBRXBELFNBQVMrN0UsRUFBeUJJLEdBQzlCLElBQUk1OEUsRUFBUVMsRUFBT3ZNLEtBQUtvQyxLQUFNLDBCQUE0QkEsS0FFMUQsT0FEQTBKLEVBQU00OEUsVUFBWUEsRUFDWDU4RSxFQUVYLE9BTkFsRSxFQUFNMUYsVUFBVW9tRixFQUEwQi83RSxHQU1uQys3RSxFQVBrQyxDQVEzQ04sSUFDRVEsR0FBMkMsU0FBVWo4RSxHQUVyRCxTQUFTaThFLEVBQTBCRSxHQUMvQixJQUFJNThFLEVBQVFTLEVBQU92TSxLQUFLb0MsS0FBTSwyQkFBNkJBLEtBRTNELE9BREEwSixFQUFNNDhFLFVBQVlBLEVBQ1g1OEUsRUFFWCxPQU5BbEUsRUFBTTFGLFVBQVVzbUYsRUFBMkJqOEUsR0FNcENpOEUsRUFQbUMsQ0FRNUNSLElBQ0VTLEdBQWdELFNBQVVsOEUsR0FFMUQsU0FBU2s4RSxFQUErQkUsR0FDcEMsSUFBSTc4RSxFQUFRUyxFQUFPdk0sS0FBS29DLEtBQU0seUJBQTJCQSxLQUV6RCxPQURBMEosRUFBTTY4RSxTQUFXQSxFQUNWNzhFLEVBRVgsT0FOQWxFLEVBQU0xRixVQUFVdW1GLEVBQWdDbDhFLEdBTXpDazhFLEVBUHdDLENBUWpEVCxJQVFFWSxHQUFtQnJnRSxFQUF1QnkvRCxHQUFnQixxQ0FrQjFEYSxHQUF1QixXQUV2QkMsR0FBK0IsV0FDL0IsU0FBU0EsRUFBY2g4RSxFQUFNa2hDLEVBQVdTLEdBQ3BDcnNDLEtBQUswSyxLQUFPQSxFQUNaMUssS0FBSzRyQyxVQUFZQSxFQUNqQjVyQyxLQUFLcXNDLGdCQUFrQkEsRUFlM0IsT0FiQXE2QyxFQUFjcm5GLFVBQVVrZ0UsWUFBYyxTQUFVdmdFLEVBQUtzc0MsR0FDakQsSUFBSXBTLEVBQVksR0FVaEIsT0FUdUIsT0FBbkJsNUIsS0FBSzRyQyxVQUNMMVMsRUFBVXoxQixLQUFLLElBQUlrb0MsR0FBYzNzQyxFQUFLZ0IsS0FBSzBLLEtBQU0xSyxLQUFLNHJDLFVBQVdOLElBR2pFcFMsRUFBVXoxQixLQUFLLElBQUk0bkMsR0FBWXJzQyxFQUFLZ0IsS0FBSzBLLEtBQU00Z0MsSUFFL0N0ckMsS0FBS3FzQyxnQkFBZ0Joc0MsT0FBUyxHQUM5QjY0QixFQUFVejFCLEtBQUssSUFBSTJvQyxHQUFrQnB0QyxFQUFLZ0IsS0FBS3FzQyxrQkFFNUNuVCxHQUVKd3RELEVBbkJ1QixHQXNCOUJDLEdBQWtDLFdBQ2xDLFNBQVNBLEVBQWlCajhFLEVBQU1raEMsRUFBV1MsR0FDdkNyc0MsS0FBSzBLLEtBQU9BLEVBQ1oxSyxLQUFLNHJDLFVBQVlBLEVBQ2pCNXJDLEtBQUtxc0MsZ0JBQWtCQSxFQVczQixPQVRBczZDLEVBQWlCdG5GLFVBQVVrZ0UsWUFBYyxTQUFVdmdFLEVBQUtzc0MsR0FDcEQsSUFBSXBTLEVBQVksQ0FDWixJQUFJeVMsR0FBYzNzQyxFQUFLZ0IsS0FBSzBLLEtBQU0xSyxLQUFLNHJDLFVBQVdOLElBS3RELE9BSEl0ckMsS0FBS3FzQyxnQkFBZ0Joc0MsT0FBUyxHQUM5QjY0QixFQUFVejFCLEtBQUssSUFBSTJvQyxHQUFrQnB0QyxFQUFLZ0IsS0FBS3FzQyxrQkFFNUNuVCxHQUVKeXRELEVBZjBCLEdBc0NyQyxTQUFTQyxHQUFRQyxHQUNiLE9BQVFBLEdBQ0osS0FBS2xCLEdBQWVwNkMsSUFDcEIsS0FBS282QyxHQUFlbUIsU0FDcEIsS0FBS25CLEdBQWVvQixPQUNoQixPQUFPLEVBQ1gsS0FBS3BCLEdBQWVxQixTQUNwQixLQUFLckIsR0FBZXNCLGNBQ2hCLE9BQU8sRUFDWCxRQUNJLE1BQU1waUUsRUFBSyx1Q0FBeUNnaUUsS0F6QmhFLFNBQVdsQixHQUNQQSxFQUFlQSxFQUFvQixJQUFJLEdBQUssTUFDNUNBLEVBQWVBLEVBQXVCLE9BQUksR0FBSyxTQUMvQ0EsRUFBZUEsRUFBeUIsU0FBSSxHQUFLLFdBS2pEQSxFQUFlQSxFQUF5QixTQUFJLEdBQUssV0FLakRBLEVBQWVBLEVBQThCLGNBQUksR0FBSyxnQkFiMUQsQ0FjR0EsS0FBbUJBLEdBQWlCLEtBZXZDLElBQUl1QixHQUE4QixXQXVCOUIsU0FBU0EsRUFBYUwsRUFBWXJwRSxFQUFZaVIsRUFBTTA0RCxFQUFjOTZDLEVBQWlCVCxHQUMvRTVyQyxLQUFLNm1GLFdBQWFBLEVBQ2xCN21GLEtBQUt3ZCxXQUFhQSxFQUNsQnhkLEtBQUt5dUIsS0FBT0EsRUFDWnp1QixLQUFLbW5GLGFBQWVBLE9BR0k1OUUsSUFBcEI4aUMsR0FDQXJzQyxLQUFLb25GLGVBRVRwbkYsS0FBS21uRixrQkFBZ0M1OUUsSUFBakI0OUUsR0FBNkJBLEVBQ2pEbm5GLEtBQUtxc0MsZ0JBQWtCQSxHQUFtQixHQUMxQ3JzQyxLQUFLNHJDLFVBQVlBLEdBQWEsR0F3RGxDLE9BdERBczdDLEVBQWE3bkYsVUFBVWdvRixxQkFBdUIsU0FBVWg5QyxHQUNwRCxJQUFJaTlDLEVBQXlCLE1BQWJ0bkYsS0FBS3l1QixLQUFlLEtBQU96dUIsS0FBS3l1QixLQUFLcEIsTUFBTWdkLEdBQ3ZENzNCLEVBQVUsSUFBSTAwRSxFQUFhbG5GLEtBQUs2bUYsV0FBWTdtRixLQUFLd2QsV0FBWThwRSxHQUMvQyxFQUFPdG5GLEtBQUtxc0MsZ0JBQWlCcnNDLEtBQUs0ckMsV0FFcEQsT0FEQXA1QixFQUFRKzBFLG9CQUFvQmw5QyxHQUNyQjczQixHQUVYMDBFLEVBQWE3bkYsVUFBVW1vRix5QkFBMkIsU0FBVW45QyxHQUN4RCxJQUFJaTlDLEVBQXlCLE1BQWJ0bkYsS0FBS3l1QixLQUFlLEtBQU96dUIsS0FBS3l1QixLQUFLcEIsTUFBTWdkLEdBQ3ZENzNCLEVBQVUsSUFBSTAwRSxFQUFhbG5GLEtBQUs2bUYsV0FBWTdtRixLQUFLd2QsV0FBWThwRSxHQUMvQyxFQUFPdG5GLEtBQUtxc0MsZ0JBQWlCcnNDLEtBQUs0ckMsV0FFcEQsT0FEQXA1QixFQUFRNDBFLGVBQ0Q1MEUsR0FFWDAwRSxFQUFhN25GLFVBQVVvb0YscUJBQXVCLFNBQVV0ckUsR0FHcEQsT0FBTyxJQUFJK3FFLEVBQWFsbkYsS0FBSzZtRixXQUFZN21GLEtBQUt3ZCxXQUNwQyxNQUNRLEVBQU14ZCxLQUFLcXNDLGdCQUFpQnJzQyxLQUFLNHJDLFlBRXZEczdDLEVBQWE3bkYsVUFBVXFvRixZQUFjLFNBQVUvMkQsR0FDM0MsSUFBSWczRCxFQUFpQyxPQUFkM25GLEtBQUt5dUIsTUFBaUJ6dUIsS0FBS3l1QixLQUFLemUsVUFDakQsR0FDQSxvQkFBc0JoUSxLQUFLeXVCLEtBQUtqakIsV0FBYSxJQUNuRCxPQUFPLElBQUkwYSxFQUFlakIsRUFBS0ksaUJBQWtCLFlBQWNybEIsS0FBS3dkLFdBQWEsZ0NBQzdFbVQsRUFDQWczRCxJQUdSVCxFQUFhN25GLFVBQVVvUSxTQUFXLFNBQVV3NkIsR0FDeEMsWUFBMEYxZ0MsSUFBbEZ2SixLQUFLNHJDLFVBQVU4WSxNQUFLLFNBQVVyYSxHQUFTLE9BQU9KLEVBQVVsYyxXQUFXc2MsWUFHaEU5Z0MsSUFGUHZKLEtBQUtxc0MsZ0JBQWdCcVksTUFBSyxTQUFVcGEsR0FDaEMsT0FBT0wsRUFBVWxjLFdBQVd1YyxFQUFVRCxXQUdsRDY4QyxFQUFhN25GLFVBQVUrbkYsYUFBZSxXQUdsQyxHQUFrQixPQUFkcG5GLEtBQUt5dUIsS0FHVCxJQUFLLElBQUloeEIsRUFBSSxFQUFHQSxFQUFJdUMsS0FBS3l1QixLQUFLcHVCLE9BQVE1QyxJQUNsQ3VDLEtBQUt1bkYsb0JBQW9Cdm5GLEtBQUt5dUIsS0FBS253QixJQUFJYixLQUcvQ3lwRixFQUFhN25GLFVBQVVrb0Ysb0JBQXNCLFNBQVUvNUQsR0FDbkQsR0FBdUIsSUFBbkJBLEVBQVFudEIsT0FDUixNQUFNTCxLQUFLMG5GLFlBQVkscUNBRTNCLEdBQUlkLEdBQVE1bUYsS0FBSzZtRixhQUFlSixHQUFxQnQyRSxLQUFLcWQsR0FDdEQsTUFBTXh0QixLQUFLMG5GLFlBQVksbURBR3hCUixFQTNGc0IsR0FrRzdCVSxHQUNBLFNBQThCajhELEVBQVkzc0IsR0FDdENnQixLQUFLMnJCLFdBQWFBLEVBQ2xCM3JCLEtBQUtoQixJQUFNQSxHQVFmNm9GLEdBQW1DLFdBQ25DLFNBQVNBLEVBQWtCQyxHQUN2QjluRixLQUFLOG5GLGFBQWVBLEVBbVV4QixPQWhVQUQsRUFBa0J4b0YsVUFBVTBvRixhQUFlLFNBQVV2cUUsRUFBWXpXLEdBQzdELElBQUl5TCxFQUFVLElBQUkwMEUsR0FBYXZCLEdBQWVwNkMsSUFBSy90QixFQUFZb1IsR0FBVUYsWUFDekVzNUQsR0FBb0Isc0NBQXVDeDFFLEVBQVN6TCxHQUNwRSxJQUFJa2hGLEVBQWFqb0YsS0FBS2tvRixVQUFVbmhGLEVBQU95TCxHQUN2QyxPQUFPLElBQUlrMEUsR0FBY3VCLEVBQ1IsS0FBTXoxRSxFQUFRNjVCLGtCQUduQ3c3QyxFQUFrQnhvRixVQUFVOG9GLGVBQWlCLFNBQVUzcUUsRUFBWXpXLEVBQU9pckUsR0FDdEUsSUFBSXgvRCxFQUFVLElBQUkwMEUsR0FBYXZCLEdBQWVtQixTQUFVdHBFLEVBQVlvUixHQUFVRixZQUM5RXM1RCxHQUFvQixzQ0FBdUN4MUUsRUFBU3pMLEdBQ3BFLElBQ0k2a0MsRUFDQVMsRUFGQTQ3QyxFQUFham9GLEtBQUtrb0YsVUFBVW5oRixFQUFPeUwsR0FHdkMsR0FBS3cvRCxFQUlBLENBRUQsSUFEQSxJQUFJb1csRUFBc0IsSUFBSXJ4RCxHQUFVbkksR0FBVXhCLFlBQ3pDemlCLEVBQUssRUFBRzA5RSxFQUFlclcsRUFBWXJuRSxFQUFLMDlFLEVBQWFob0YsT0FBUXNLLElBQU0sQ0FDeEUsSUFBSTI5RSxFQUFvQkQsRUFBYTE5RSxHQUNqQ3MvQixPQUFZLEVBQ2hCLEdBQUlxK0MsYUFBNkI5RSxHQUM3QnY1QyxFQUFZcStDLEVBQWtCMUUsa0JBRTdCLElBQWlDLGlCQUF0QjBFLEVBSVosTUFBTXpqRSxFQUFLLDREQUhYb2xCLEVBQVlzK0MsR0FBZ0MvcUUsRUFBWThxRSxHQUs1RCxJQUFLOTFFLEVBQVEvQyxTQUFTdzZCLEdBQ2xCLE1BQU0sSUFBSS9qQixFQUFlakIsRUFBS0ksaUJBQWtCLFVBQVk0a0IsRUFBWSx1RUFFNUVtK0MsRUFBc0JBLEVBQW9CbnhELElBQUlnVCxHQUVsRDJCLEVBQVloQyxHQUFVRSxRQUFRcytDLEdBQzlCLzdDLEVBQWtCNzVCLEVBQVE2NUIsZ0JBQWdCOTJCLFFBQU8sU0FBVSswQixHQUN2RCxPQUFPc0IsRUFBVTFCLE9BQU9JLEVBQVVELGVBeEJ0Q3VCLEVBQVloQyxHQUFVRyxVQUFVdjNCLEVBQVFvNUIsV0FDeENTLEVBQWtCNzVCLEVBQVE2NUIsZ0JBMEI5QixPQUFPLElBQUlxNkMsR0FBY3VCLEVBQVlyOEMsRUFBV1MsSUFHcER3N0MsRUFBa0J4b0YsVUFBVW1wRixnQkFBa0IsU0FBVWhyRSxFQUFZelcsR0FDaEUsSUFBSTJDLEVBQVExSixLQUNSd1MsRUFBVSxJQUFJMDBFLEdBQWF2QixHQUFlb0IsT0FBUXZwRSxFQUFZb1IsR0FBVUYsWUFDNUVzNUQsR0FBb0Isc0NBQXVDeDFFLEVBQVN6TCxHQUNwRSxJQUFJMGhGLEVBQWlCLElBQUkxeEQsR0FBVW5JLEdBQVV4QixZQUN6QzY2RCxFQUFhaDhDLEdBQVlyYyxNQUM3QnBlLEVBQVF6SyxHQUFPLFNBQVUvSCxFQUFLTixHQUMxQixJQUFJK3ZCLEVBQU84NUQsR0FBZ0MvcUUsRUFBWXhlLEdBQ25EMHBGLEVBQWVsMkUsRUFBUWcxRSx5QkFBeUIvNEQsR0FFcEQsSUFEQS92QixFQUFRZ0wsRUFBTWkvRSxnQkFBZ0JqcUYsRUFBT2dxRixjQUNoQjVDLEdBRWpCMkMsRUFBaUJBLEVBQWV4eEQsSUFBSXhJLE9BRW5DLENBQ0QsSUFBSW02RCxFQUFjbC9FLEVBQU13K0UsVUFBVXhwRixFQUFPZ3FGLEdBQ3RCLE1BQWZFLElBQ0FILEVBQWlCQSxFQUFleHhELElBQUl4SSxHQUNwQ3c1RCxFQUFhQSxFQUFXL3pFLElBQUl1YSxFQUFNbTZELFFBSTlDLElBQUlDLEVBQU9qL0MsR0FBVUUsUUFBUTIrQyxHQUM3QixPQUFPLElBQUk5QixHQUFpQnNCLEVBQVlZLEVBQU1yMkUsRUFBUTY1QixrQkFHMUR3N0MsRUFBa0J4b0YsVUFBVXlwRixtQkFBcUIsU0FBVXRyRSxFQUFZNnNCLEVBQU8zckMsRUFBT3FxRixHQUNqRixJQUFJdjJFLEVBQVUsSUFBSTAwRSxHQUFhdkIsR0FBZW9CLE9BQVF2cEUsRUFBWW9SLEdBQVVGLFlBQ3hFdmpCLEVBQU8sQ0FBQzY5RSxHQUFzQnhyRSxFQUFZNnNCLElBQzFDaDFCLEVBQVMsQ0FBQzNXLEdBQ2QsR0FBSXFxRixFQUFvQjFvRixPQUFTLEdBQU0sRUFDbkMsTUFBTSxJQUFJNmxCLEVBQWVqQixFQUFLSSxpQkFBa0IsWUFBYzdILEVBQWEseUdBRy9FLElBQUssSUFBSS9mLEVBQUksRUFBR0EsRUFBSXNyRixFQUFvQjFvRixPQUFRNUMsR0FBSyxFQUNqRDBOLEVBQUsxSCxLQUFLdWxGLEdBQXNCeHJFLEVBQVl1ckUsRUFBb0J0ckYsS0FDaEU0WCxFQUFPNVIsS0FBS3NsRixFQUFvQnRyRixFQUFJLElBRXhDLElBQUlnckYsRUFBaUIsSUFBSTF4RCxHQUFVbkksR0FBVXhCLFlBQ3pDNjZELEVBQWFoOEMsR0FBWXJjLE1BQzdCLElBQVNueUIsRUFBSSxFQUFHQSxFQUFJME4sRUFBSzlLLFNBQVU1QyxFQUFHLENBQ2xDLElBQUlneEIsRUFBT3RqQixFQUFLMU4sR0FDWmlyRixFQUFlbDJFLEVBQVFnMUUseUJBQXlCLzRELEdBQ2hEdzZELEVBQVVqcEYsS0FBSzJvRixnQkFBZ0J0ekUsRUFBTzVYLEdBQUlpckYsR0FDOUMsR0FBSU8sYUFBbUJuRCxHQUVuQjJDLEVBQWlCQSxFQUFleHhELElBQUl4SSxPQUVuQyxDQUNELElBQUltNkQsRUFBYzVvRixLQUFLa29GLFVBQVVlLEVBQVNQLEdBQ3ZCLE1BQWZFLElBQ0FILEVBQWlCQSxFQUFleHhELElBQUl4SSxHQUNwQ3c1RCxFQUFhQSxFQUFXL3pFLElBQUl1YSxFQUFNbTZELEtBSTlDLElBQUlDLEVBQU9qL0MsR0FBVUUsUUFBUTIrQyxHQUM3QixPQUFPLElBQUk5QixHQUFpQnNCLEVBQVlZLEVBQU1yMkUsRUFBUTY1QixrQkFTMUR3N0MsRUFBa0J4b0YsVUFBVTZwRixnQkFBa0IsU0FBVTFyRSxFQUFZelcsRUFBT29pRixRQUNuRCxJQUFoQkEsSUFBMEJBLEdBQWMsR0FDNUMsSUFBSTMyRSxFQUFVLElBQUkwMEUsR0FBYWlDLEVBQWN4RCxHQUFlc0IsY0FBZ0J0QixHQUFlcUIsU0FBVXhwRSxFQUFZb1IsR0FBVUYsWUFDdkg2eEQsRUFBU3ZnRixLQUFLa29GLFVBQVVuaEYsRUFBT3lMLEdBR25DLE9BRkEzTSxFQUFpQixNQUFWMDZFLEVBQWdCLG1DQUN2QjE2RSxFQUEwQyxJQUFuQzJNLEVBQVE2NUIsZ0JBQWdCaHNDLE9BQWMsaURBQ3RDa2dGLEdBR1hzSCxFQUFrQnhvRixVQUFVc3BGLGdCQUFrQixTQUFVNWhGLEVBQU95TCxHQUMzRCxJQUNJLE9BQU94UyxLQUFLOG5GLGFBQWEvZ0YsR0FFN0IsTUFBT3ZHLEdBQ0gsSUFBSXVGLEVBQVVrMEUsR0FBYXo1RSxHQUMzQixNQUFNZ1MsRUFBUWsxRSxZQUFZM2hGLEtBWWxDOGhGLEVBQWtCeG9GLFVBQVU2b0YsVUFBWSxTQUFVbmhGLEVBQU95TCxHQUVyRCxHQUFJNDJFLEdBREpyaUYsRUFBUS9HLEtBQUsyb0YsZ0JBQWdCNWhGLEVBQU95TCxJQUdoQyxPQURBdzFFLEdBQW9CLDJCQUE0QngxRSxFQUFTekwsR0FDbEQvRyxLQUFLcXBGLFlBQVl0aUYsRUFBT3lMLEdBRTlCLEdBQUl6TCxhQUFpQjYrRSxHQU90QixPQURBNWxGLEtBQUtzcEYsd0JBQXdCdmlGLEVBQU95TCxHQUM3QixLQVFQLEdBSElBLEVBQVFpYyxNQUNSamMsRUFBUW81QixVQUFVbm9DLEtBQUsrTyxFQUFRaWMsTUFFL0IxbkIsYUFBaUJsSCxNQUFPLENBT3hCLEdBQUkyUyxFQUFRMjBFLGNBQ1IzMEUsRUFBUXEwRSxhQUFlbEIsR0FBZXNCLGNBQ3RDLE1BQU16MEUsRUFBUWsxRSxZQUFZLG1DQUU5QixPQUFPMW5GLEtBQUt1cEYsV0FBV3hpRixFQUFPeUwsR0FHOUIsT0FBT3hTLEtBQUt3cEYsaUJBQWlCemlGLEVBQU95TCxJQUloRHExRSxFQUFrQnhvRixVQUFVZ3FGLFlBQWMsU0FBVWw3RSxFQUFLcUUsR0FDckQsSUFBSTlJLEVBQVExSixLQUNSc0MsRUFBUyxJQUFJOHhCLEdBQVVsSyxHQWdCM0IsT0FmSWxhLEVBQVE3QixHQUdKcUUsRUFBUWljLE1BQVFqYyxFQUFRaWMsS0FBS3B1QixPQUFTLEdBQ3RDbVMsRUFBUW81QixVQUFVbm9DLEtBQUsrTyxFQUFRaWMsTUFJbkNqZCxFQUFRckQsR0FBSyxTQUFVblAsRUFBS3NZLEdBQ3hCLElBQUlzeEUsRUFBY2wvRSxFQUFNdytFLFVBQVU1d0UsRUFBSzlFLEVBQVE2MEUscUJBQXFCcm9GLElBQ2pELE1BQWY0cEYsSUFDQXRtRixFQUFTQSxFQUFPMGUsT0FBT2hpQixFQUFLNHBGLE9BSWpDLElBQUkzOEMsR0FBWTNwQyxJQUUzQnVsRixFQUFrQnhvRixVQUFVa3FGLFdBQWEsU0FBVXIrRCxFQUFPMVksR0FHdEQsSUFGQSxJQUFJbFEsRUFBUyxHQUNUbW5GLEVBQWEsRUFDUjkrRSxFQUFLLEVBQUcrK0UsRUFBVXgrRCxFQUFPdmdCLEVBQUsrK0UsRUFBUXJwRixPQUFRc0ssSUFBTSxDQUN6RCxJQUFJOHZDLEVBQVFpdkMsRUFBUS8rRSxHQUNoQmcvRSxFQUFjM3BGLEtBQUtrb0YsVUFBVXp0QyxFQUFPam9DLEVBQVFpMUUscUJBQXFCZ0MsSUFDbEQsTUFBZkUsSUFHQUEsRUFBYzU3QyxHQUFVRSxVQUU1QjNyQyxFQUFPbUIsS0FBS2ttRixHQUNaRixJQUVKLE9BQU8sSUFBSTE1QyxHQUFXenRDLElBTTFCdWxGLEVBQWtCeG9GLFVBQVVpcUYsd0JBQTBCLFNBQVU1cUYsRUFBTzhULEdBRW5FLElBQUtvMEUsR0FBUXAwRSxFQUFRcTBFLFlBQ2pCLE1BQU1yMEUsRUFBUWsxRSxZQUFZaHBGLEVBQU1tbkYsWUFBYywrQ0FFbEQsR0FBcUIsT0FBakJyekUsRUFBUWljLEtBQ1IsTUFBTWpjLEVBQVFrMUUsWUFBWWhwRixFQUFNbW5GLFlBQWMsK0NBRWxELEdBQUlubkYsYUFBaUJvbkYsR0FBc0IsQ0FDdkMsR0FBSXR6RSxFQUFRcTBFLGFBQWVsQixHQUFlbUIsU0FLckMsTUFBSXQwRSxFQUFRcTBFLGFBQWVsQixHQUFlb0IsUUFDM0NsaEYsRUFBTzJNLEVBQVFpYyxLQUFLcHVCLE9BQVMsRUFBRywwRUFFMUJtUyxFQUFRazFFLFlBQVksNkVBS3BCbDFFLEVBQVFrMUUsWUFBWSw4RUFWMUJsMUUsRUFBUW81QixVQUFVbm9DLEtBQUsrTyxFQUFRaWMsV0FjbEMsR0FBSS92QixhQUFpQnNuRixHQUN0Qnh6RSxFQUFRNjVCLGdCQUFnQjVvQyxLQUFLLElBQUkybUMsR0FBZTUzQixFQUFRaWMsS0FBTTI3QyxHQUF5QmoyRCxnQkFFdEYsR0FBSXpWLGFBQWlCd25GLEdBQTBCLENBQ2hELElBQUkwRCxFQUFpQjVwRixLQUFLNnBGLDRCQUE0Qm5yRixFQUFNbW5GLFlBQWFubkYsRUFBTTRuRixXQUMzRUwsRUFBYSxJQUFJM2IsR0FBNkJzZixHQUNsRHAzRSxFQUFRNjVCLGdCQUFnQjVvQyxLQUFLLElBQUkybUMsR0FBZTUzQixFQUFRaWMsS0FBTXczRCxTQUU3RCxHQUFJdm5GLGFBQWlCMG5GLEdBQTJCLENBQzdDd0QsRUFBaUI1cEYsS0FBSzZwRiw0QkFBNEJuckYsRUFBTW1uRixZQUFhbm5GLEVBQU00bkYsV0FBL0UsSUFDSUgsRUFBYyxJQUFJemIsR0FBOEJrZixHQUNwRHAzRSxFQUFRNjVCLGdCQUFnQjVvQyxLQUFLLElBQUkybUMsR0FBZTUzQixFQUFRaWMsS0FBTTAzRCxTQUU3RCxHQUFJem5GLGFBQWlCMm5GLEdBQWdDLENBQ3RELElBQUl2YixFQUFVOXFFLEtBQUtrcEYsZ0JBQWdCLHVCQUF3QnhxRixFQUFNNm5GLFVBQzdEdUQsRUFBbUIsSUFBSWpmLEdBQW1DQyxHQUM5RHQ0RCxFQUFRNjVCLGdCQUFnQjVvQyxLQUFLLElBQUkybUMsR0FBZTUzQixFQUFRaWMsS0FBTXE3RCxTQUc5RGpsRSxFQUFLLDRCQUE4Qm5tQixJQVEzQ21wRixFQUFrQnhvRixVQUFVbXFGLGlCQUFtQixTQUFVOXFGLEVBQU84VCxHQUM1RCxHQUFjLE9BQVY5VCxFQUNBLE9BQU9xdkMsR0FBVUUsU0FFaEIsR0FBcUIsaUJBQVZ2dkMsRUFDWixPQUFJNHBELEdBQWM1cEQsR0FDUCxJQUFJOHZDLEdBQWE5dkMsR0FHakIsSUFBSSt2QyxHQUFZL3ZDLEdBRzFCLEdBQXFCLGtCQUFWQSxFQUNaLE9BQU93dkMsR0FBYUMsR0FBR3p2QyxHQUV0QixHQUFxQixpQkFBVkEsRUFDWixPQUFPLElBQUltd0MsR0FBWW53QyxHQUV0QixHQUFJQSxhQUFpQjJLLEtBQ3RCLE9BQU8sSUFBSXlsQyxHQUFlM2IsR0FBVUksU0FBUzcwQixJQUU1QyxHQUFJQSxhQUFpQnkwQixHQUl0QixPQUFPLElBQUkyYixHQUFlLElBQUkzYixHQUFVejBCLEVBQU0wMEIsUUFBZ0QsSUFBdkN4aUIsS0FBS0MsTUFBTW5TLEVBQU0yMEIsWUFBYyxPQUVyRixHQUFJMzBCLGFBQWlCcXJFLEdBQ3RCLE9BQU8sSUFBSTc2QixHQUFjeHdDLEdBRXhCLEdBQUlBLGFBQWlCbXNCLEdBQ3RCLE9BQU8sSUFBSW1rQixHQUFVdHdDLEdBRXBCLEdBQUlBLGFBQWlCa3BGLEdBQ3RCLE9BQU8sSUFBSTM0QyxHQUFTdndDLEVBQU1pdEIsV0FBWWp0QixFQUFNTSxLQUc1QyxNQUFNd1QsRUFBUWsxRSxZQUFZLDRCQUE4QnYvRCxFQUFpQnpwQixLQUdqRm1wRixFQUFrQnhvRixVQUFVd3FGLDRCQUE4QixTQUFVcnNFLEVBQVkrc0QsR0FDNUUsSUFBSTdnRSxFQUFRMUosS0FDWixPQUFPdXFFLEVBQVN0NUQsS0FBSSxTQUFVOFgsRUFBU3RyQixHQUluQyxJQUFJK1UsRUFBVSxJQUFJMDBFLEdBQWF2QixHQUFlcUIsU0FBVXhwRSxFQUFZb1IsR0FBVUYsWUFDOUUsT0FBT2hsQixFQUFNdytFLFVBQVVuL0QsRUFBU3ZXLEVBQVFpMUUscUJBQXFCaHFGLFFBRzlEb3FGLEVBclUyQixHQThVdEMsU0FBU3VCLEdBQW9CcmlGLEdBQ3pCLFFBQXlCLGlCQUFWQSxHQUNELE9BQVZBLEdBQ0VBLGFBQWlCbEgsT0FDakJrSCxhQUFpQnNDLE1BQ2pCdEMsYUFBaUJvc0IsSUFDakJwc0IsYUFBaUJnakUsSUFDakJoakUsYUFBaUI4akIsSUFDakI5akIsYUFBaUI2Z0YsSUFDakI3Z0YsYUFBaUI2K0UsSUFFM0IsU0FBU29DLEdBQW9CamlGLEVBQVN5TSxFQUFTekwsR0FDM0MsSUFBS3FpRixHQUFvQnJpRixLQUFXaWlCLEVBQWNqaUIsR0FBUSxDQUN0RCxJQUFJa2lCLEVBQWNkLEVBQWlCcGhCLEdBQ25DLEtBQW9CLGNBQWhCa2lCLEVBRU16VyxFQUFRazFFLFlBQVkzaEYsRUFBVSxvQkFHOUJ5TSxFQUFRazFFLFlBQVkzaEYsRUFBVSxJQUFNa2pCLElBT3RELFNBQVMrL0QsR0FBc0J4ckUsRUFBWWlSLEdBQ3ZDLEdBQUlBLGFBQWdCKzBELEdBQ2hCLE9BQU8vMEQsRUFBS20xRCxjQUVYLEdBQW9CLGlCQUFUbjFELEVBQ1osT0FBTzg1RCxHQUFnQy9xRSxFQUFZaVIsR0FJbkQsTUFBTSxJQUFJdkksRUFBZWpCLEVBQUtJLGlCQUFrQixZQUFjN0gsRUFBYSwwRkFVbkYsU0FBUytxRSxHQUFnQy9xRSxFQUFZaVIsR0FDakQsSUFDSSxPQXg5QlIsU0FBZ0NBLEdBRTVCLEdBRFlBLEVBQUtzN0QsT0FBT2hHLEtBQ1gsRUFDVCxNQUFNLElBQUk3OUQsRUFBZWpCLEVBQUtJLGlCQUFrQix1QkFBeUJvSixFQUFPLHdEQUdwRixJQUNJLE9BQU8sSUFBSyswRCxHQUFZdmtGLEtBQUtxQixNQUFNa2pGLEdBQWFoK0UsRUFBTXZCLGVBQWUsTUFBQyxHQUFTd3FCLEVBQUt2aUIsTUFBTSxRQUU5RixNQUFPMUwsR0FDSCxNQUFNLElBQUkwbEIsRUFBZWpCLEVBQUtJLGlCQUFrQix1QkFBeUJvSixFQUFPLDhFQTg4QnpFdTdELENBQXVCdjdELEdBQU1tMUQsY0FFeEMsTUFBT3BqRixHQUNILElBQUl1RixFQUFVazBFLEdBQWF6NUUsR0FDM0IsTUFBTSxJQUFJMGxCLEVBQWVqQixFQUFLSSxpQkFBa0IsWUFBYzdILEVBQWEsZ0NBQWtDelgsSUFPckgsU0FBU2swRSxHQUFhbjJFLEdBQ2xCLE9BQU9BLGFBQWlCbUMsTUFBUW5DLEVBQU1pQyxRQUFVakMsRUFBTTBIOzs7Ozs7Ozs7Ozs7Ozs7O0dBb0IxRCxJQUFJeStFLEdBQWUsMkJBQ2ZDLElBQWMsRUFDZEMsSUFBa0MsRUFDbENDLElBQTZCLEVBTTdCQyxHQUF1QnRzQyxHQUFVUSxvQkFRakMrckMsR0FBbUMsV0FDbkMsU0FBU0EsRUFBa0JqSSxHQUN2QixRQUFzQjk0RSxJQUFsQjg0RSxFQUFTeDJELEtBQW9CLENBQzdCLFFBQXFCdGlCLElBQWpCODRFLEVBQVN2MkQsSUFDVCxNQUFNLElBQUk1RixFQUFlakIsRUFBS0ksaUJBQWtCLHNEQUVwRHJsQixLQUFLNnJCLEtBQU9vK0QsR0FDWmpxRixLQUFLOHJCLElBQU1vK0QsUUFHWHJpRSxFQUFrQixXQUFZLG1CQUFvQixPQUFRdzZELEVBQVN4MkQsTUFDbkU3ckIsS0FBSzZyQixLQUFPdzJELEVBQVN4MkQsS0FDckI5RCxFQUEwQixXQUFZLFVBQVcsTUFBT3M2RCxFQUFTdjJELEtBQ2pFOXJCLEtBQUs4ckIsSUFBTXRGLEVBQVU2N0QsRUFBU3YyRCxJQUFLbytELElBdUJ2QyxHQXJCQXpnRSxFQUFvQixXQUFZNDRELEVBQVUsQ0FDdEMsT0FDQSxNQUNBLGNBQ0Esd0JBQ0EsaUJBQ0EsaUNBRUp0NkQsRUFBMEIsV0FBWSxTQUFVLGNBQWVzNkQsRUFBUzlsQixhQUN4RXY4RCxLQUFLdThELFlBQWM4bEIsRUFBUzlsQixZQUM1QngwQyxFQUEwQixXQUFZLFVBQVcsd0JBQXlCczZELEVBQVMvMEMsd0JBRzVDLElBQW5DKzBDLEVBQVMvMEMsc0JBQ1R4cEMsRUFBTSxvUUFFa0MsSUFBbkN1K0UsRUFBUy8wQyx1QkFDZHhwQyxFQUFNLG1zQkFFVjlELEtBQUtzdEMsc0JBQXdCOW1CLEVBQVU2N0QsRUFBUy8wQyxzQkFBdUI2OEMsSUFDdkVwaUUsRUFBMEIsV0FBWSxTQUFVLGlCQUFrQnM2RCxFQUFTbEIscUJBQzNDNTNFLElBQTVCODRFLEVBQVNsQixlQUNUbmhGLEtBQUttaEYsZUFBaUJwakMsR0FBVVUsNkJBRS9CLENBQ0QsR0FBSTRqQyxFQUFTbEIsaUJBQW1Ca0osSUFDNUJoSSxFQUFTbEIsZUFBaUJwakMsR0FBVVMseUJBQ3BDLE1BQU0sSUFBSXQ0QixFQUFlakIsRUFBS0ksaUJBQWtCLG1DQUFxQzA0QixHQUFVUywwQkFHL0Z4K0MsS0FBS21oRixlQUFpQmtCLEVBQVNsQixlQUd2Q3A1RCxFQUEwQixXQUFZLFVBQVcsK0JBQWdDczZELEVBQVNrSSw4QkFDMUZ2cUYsS0FBSytyQixzQkFDeUN4aUIsSUFBMUM4NEUsRUFBU2tJLDZCQUNISCxHQUNBL0gsRUFBU2tJLDZCQVV2QixPQVJBRCxFQUFrQmpyRixVQUFVaXJCLFFBQVUsU0FBVWlCLEdBQzVDLE9BQVF2ckIsS0FBSzZyQixPQUFTTixFQUFNTSxNQUN4QjdyQixLQUFLOHJCLE1BQVFQLEVBQU1PLEtBQ25COXJCLEtBQUtzdEMsd0JBQTBCL2hCLEVBQU0raEIsdUJBQ3JDdHRDLEtBQUt1OEQsY0FBZ0JoeEMsRUFBTWd4QyxhQUMzQnY4RCxLQUFLbWhGLGlCQUFtQjUxRCxFQUFNNDFELGdCQUM5Qm5oRixLQUFLK3JCLG1CQUFxQlIsRUFBTVEsa0JBRWpDdStELEVBOUQyQixHQW1FbENFLEdBQTJCLFdBQzNCLFNBQVNBLEVBQVVDLEVBQWlCcEcsR0FDaEMsSUFBSTM2RSxFQUFRMUosS0FxQlosR0FwQkFBLEtBQUswcUYsYUFBZSxLQUdwQjFxRixLQUFLMnFGLE9BQVMsSUFBSTc1RCxHQUNsQjl3QixLQUFLd1YsU0FBVyxDQUNaTixPQUFRLFdBQWMsT0FBTzFQLEVBQU05RCxVQUFVZ0ksT0FBTyxPQUFRLEdBQVEsV0FDaEUsT0FBT2xFLEVBQU0vQyxZQUFZekMsTUFBTSxTQUFVaUwsR0FDckMsT0FBUUEsRUFBR2xJLE9BQ1AsS0FBSyxFQUlELE9BREEvQyxLQUFLNHFGLHlCQUNFLENBQUMsRUFBYTVxRixLQUFLNnFGLGlCQUFpQmhJLGFBQy9DLEtBQUssRUFFRCxPQURBNTNFLEVBQUdqSSxPQUNJLENBQUMsWUFLVyxpQkFBNUJ5bkYsRUFBZ0JuMkUsUUFBc0IsQ0FHN0MsSUFBSWdFLEVBQU1teUUsRUFDVnpxRixLQUFLMHFGLGFBQWVweUUsRUFDcEJ0WSxLQUFLOHFGLFlBQWNOLEVBQVVPLGtCQUFrQnp5RSxHQUMvQ3RZLEtBQUtnckYsZ0JBQWtCMXlFLEVBQUl0YSxLQUMzQmdDLEtBQUtpckYsYUFBZSxJQUFJN0csR0FBNEJDLE9BRW5ELENBQ0QsSUFBSTZHLEVBQWFULEVBQ2pCLElBQUtTLEVBQVdoL0QsVUFDWixNQUFNLElBQUloRyxFQUFlakIsRUFBS0ksaUJBQWtCLDBCQUVwRHJsQixLQUFLOHFGLFlBQWMsSUFBSTcrRCxHQUFXaS9ELEVBQVdoL0QsVUFBV2cvRCxFQUFXLytELFVBRW5FbnNCLEtBQUtnckYsZ0JBQWtCLFlBQ3ZCaHJGLEtBQUtpckYsYUFBZSxJQUFJL0csR0FFNUJsa0YsS0FBS21yRixVQUFZLElBQUliLEdBQWtCLElBQ3ZDdHFGLEtBQUtvckYsZUFBaUJwckYsS0FBS3FyRixvQkFBb0JyckYsS0FBSzhxRixhQStQeEQsT0E3UEFOLEVBQVVuckYsVUFBVWdqRixTQUFXLFNBQVVpSixHQUdyQyxHQUZBcmtFLEVBQTBCLHFCQUFzQjdtQixVQUFXLEdBQzNEbW5CLEVBQWdCLHFCQUFzQixTQUFVLEVBQUcrakUsR0FDL0M3N0UsRUFBUzY3RSxFQUFpQixlQUMxQixNQUFNLElBQUlwbEUsRUFBZWpCLEVBQUtJLGlCQUFrQix5RkFHcEQsSUFBSWttRSxFQUFjLElBQUlqQixHQUFrQmdCLEdBQ3hDLEdBQUl0ckYsS0FBSzZxRixtQkFBcUI3cUYsS0FBS21yRixVQUFVN2dFLFFBQVFpaEUsR0FDakQsTUFBTSxJQUFJcmxFLEVBQWVqQixFQUFLVyxvQkFBcUIsc0tBSXZENWxCLEtBQUttckYsVUFBWUksT0FDZWhpRixJQUE1QmdpRixFQUFZaHZCLGNBQ1p2OEQsS0FBS2lyRixhQUFleEYsR0FBd0I4RixFQUFZaHZCLGVBR2hFaXVCLEVBQVVuckYsVUFBVTJvRSxjQUFnQixXQUVoQyxPQURBaG9FLEtBQUs0cUYseUJBQ0U1cUYsS0FBSzZxRixpQkFBaUI3aUIsaUJBRWpDd2lCLEVBQVVuckYsVUFBVStvRSxlQUFpQixXQUVqQyxPQURBcG9FLEtBQUs0cUYseUJBQ0U1cUYsS0FBSzZxRixpQkFBaUJ6aUIsa0JBRWpDb2lCLEVBQVVuckYsVUFBVW1zRixrQkFBb0IsU0FBVW5KLEdBQzlDLEdBQUlyaUYsS0FBSzZxRixpQkFDTCxNQUFNLElBQUkza0UsRUFBZWpCLEVBQUtXLG9CQUFxQiw4S0FJdkQsSUFBSXc3RCxHQUFrQixFQVl0QixPQVhJaUIsU0FDZ0Q5NEUsSUFBNUM4NEUsRUFBU29KLGdDQUNUM25GLEVBQU0sZ1BBS1ZzOUUsRUFBa0I1NkQsT0FBdUNqZCxJQUE3Qjg0RSxFQUFTakIsZ0JBQy9CaUIsRUFBU2pCLGdCQUNUaUIsRUFBU29KLGdDQWhLSSxJQWtLaEJ6ckYsS0FBSzByRixnQkFBZ0IsSUFBSXhLLEdBQTZCbGhGLEtBQUttckYsVUFBVWhLLGVBQWdCQyxLQUVoR29KLEVBQVVuckYsVUFBVW1tRCxpQkFBbUIsV0FDbkMsSUFBSTk3QyxFQUFRMUosS0FDUjRyQixFQUFpQnNhLEdBQXFCa2dCLG1CQUFtQnBtRCxLQUFLMnJGLG9CQUM5RDEzRSxFQUFXLElBQUl4SyxHQXdCbkIsT0F2QkF6SixLQUFLMnFGLE9BQU90NUQsbUNBQWtDLFdBQWMsT0FBTzdyQixFQUFNOUQsVUFBVWdJLE9BQU8sT0FBUSxHQUFRLFdBQ3RHLElBQUkrSyxFQUNKLE9BQU9qUCxFQUFNL0MsWUFBWXpDLE1BQU0sU0FBVWlMLEdBQ3JDLE9BQVFBLEVBQUdsSSxPQUNQLEtBQUssRUFFRCxHQURBa0ksRUFBR2hJLEtBQUtRLEtBQUssQ0FBQyxFQUFHLEVBQUcsQ0FBRSxTQUNROEYsSUFBMUJ2SixLQUFLNnFGLG1CQUNKN3FGLEtBQUs2cUYsaUJBQWlCN0gsaUJBQ3ZCLE1BQU0sSUFBSTk4RCxFQUFlakIsRUFBS1csb0JBQXFCLCtFQUV2RCxNQUFPLENBQUMsRUFBYXNnQixHQUFxQnNmLGlCQUFpQjU1QixJQUMvRCxLQUFLLEVBR0QsT0FGQTNnQixFQUFHakksT0FDSGlSLEVBQVNqUyxVQUNGLENBQUMsRUFBYSxHQUN6QixLQUFLLEVBR0QsT0FGQXlTLEVBQU14SixFQUFHakksT0FDVGlSLEVBQVNoUyxPQUFPd1MsR0FDVCxDQUFDLEVBQWEsR0FDekIsS0FBSyxFQUFHLE1BQU8sQ0FBQyxhQUlyQlIsRUFBU3RLLFNBRXBCNmdGLEVBQVVuckYsVUFBVXdqRixVQUFZLFdBRTVCLE9BREE3aUYsS0FBS3NZLElBQUlaLHVCQUF1QixhQUN6QjFYLEtBQUt3VixTQUFTTixVQUV6Qi9XLE9BQU9DLGVBQWVvc0YsRUFBVW5yRixVQUFXLGdCQUFpQixDQUN4RGYsSUFBSyxXQUVELE9BREEwQixLQUFLNHFGLHlCQUNFNXFGLEtBQUs2cUYsaUJBQWlCN0gsa0JBRWpDM2tGLFlBQVksRUFDWmtaLGNBQWMsSUFFbEJpekUsRUFBVW5yRixVQUFVMGpGLHFCQUF1QixXQUV2QyxPQURBL2lGLEtBQUs0cUYseUJBQ0U1cUYsS0FBSzZxRixpQkFBaUI5SCx3QkFFakN5SCxFQUFVbnJGLFVBQVV1c0Ysa0JBQW9CLFNBQVVDLEdBRTlDLEdBREE3ckYsS0FBSzRxRix5QkFDRGxGLEdBQWtCbUcsR0FDbEIsT0FBTzdyRixLQUFLOHJGLDBCQUEwQkQsR0FHdEN0a0UsRUFBZ0IsOEJBQStCLFdBQVksRUFBR3NrRSxHQUM5RCxJQUFJLzlFLEVBQVcsQ0FDWDFMLEtBQU15cEYsR0FFVixPQUFPN3JGLEtBQUs4ckYsMEJBQTBCaCtFLElBRzlDMDhFLEVBQVVuckYsVUFBVXlzRiwwQkFBNEIsU0FBVWgrRSxHQUN0RCxJQUFJcEUsRUFBUTFKLEtBSVIrckYsRUFBZ0IsSUFBSTVJLEdBQWMsQ0FDbEMvZ0YsS0FBTSxXQUNFMEwsRUFBUzFMLE1BQ1QwTCxFQUFTMUwsUUFHakIwQixNQVRhLFNBQVVnTCxHQUN2QixNQUFNK1YsRUFBSywwQ0FXZixPQURBN2tCLEtBQUs2cUYsaUJBQWlCMVgsMkJBQTJCNFksR0FDMUMsV0FDSEEsRUFBY3pJLE9BQ2Q1NUUsRUFBTW1oRixpQkFBaUJ6WCw4QkFBOEIyWSxLQUc3RHZCLEVBQVVuckYsVUFBVXVyRix1QkFBeUIsV0FNekMsT0FMSzVxRixLQUFLNnFGLGtCQUdON3FGLEtBQUswckYsZ0JBQWdCLElBQUlySyxJQUV0QnJoRixLQUFLNnFGLGtCQUVoQkwsRUFBVW5yRixVQUFVc3NGLGlCQUFtQixXQUNuQyxPQUFPLElBQUlqZ0UsR0FBYTFyQixLQUFLOHFGLFlBQWE5cUYsS0FBS2dyRixnQkFBaUJockYsS0FBS21yRixVQUFVdC9ELEtBQU03ckIsS0FBS21yRixVQUFVci9ELElBQUs5ckIsS0FBS21yRixVQUFVcC9ELG1CQUU1SHkrRCxFQUFVbnJGLFVBQVVxc0YsZ0JBQWtCLFNBQVVuSyxHQUM1QzE3RSxJQUFTN0YsS0FBS21yRixVQUFVdC9ELEtBQU0scUNBQzlCaG1CLEdBQVE3RixLQUFLNnFGLGlCQUFrQiwyQ0FDL0IsSUFBSXhrQyxFQUFlcm1ELEtBQUsyckYsbUJBRXhCLE9BREEzckYsS0FBSzZxRixpQkFBbUIsSUFBSXZKLEdBQWdCNThELEVBQWdCQyxjQUFlMGhDLEVBQWNybUQsS0FBS2lyRixhQUFjanJGLEtBQUsycUYsUUFDMUczcUYsS0FBSzZxRixpQkFBaUJ4NkQsTUFBTWt4RCxJQUV2Q2lKLEVBQVVuckYsVUFBVWdzRixvQkFBc0IsU0FBVTEvRCxHQWdCaEQsT0FBTyxJQUFJazhELElBZlEsU0FBVW5wRixHQUN6QixHQUFJQSxhQUFpQnN0RixHQUFtQixDQUNwQyxJQUFJQyxFQUFTdGdFLEVBQ1R1Z0UsRUFBVXh0RixFQUFNeXRGLFVBQVVyQixZQUM5QixJQUFLb0IsRUFBUTVoRSxRQUFRMmhFLEdBQ2pCLE1BQU0sSUFBSS9sRSxFQUFlakIsRUFBS0ksaUJBQWtCLHNDQUMzQzZtRSxFQUFRaGdFLFVBQVksSUFBTWdnRSxFQUFRLy9ELFNBQVcsK0JBQzNCOC9ELEVBQU8vL0QsVUFBWSxJQUFNKy9ELEVBQU85L0QsVUFFM0QsT0FBTyxJQUFJeTdELEdBQXFCajhELEVBQVlqdEIsRUFBTTB0RixNQUdsRCxPQUFPMXRGLE1BS25COHJGLEVBQVVPLGtCQUFvQixTQUFVenlFLEdBQ3BDLElBQUloRSxFQUFVZ0UsRUFBSWhFLFFBQ2xCLElBQUs3RSxFQUFTNkUsRUFBUyxhQUNuQixNQUFNLElBQUk0UixFQUFlakIsRUFBS0ksaUJBQWtCLHVEQUVwRCxJQUFJNkcsRUFBWTVYLEVBQW1CLFVBQ25DLElBQUs0WCxHQUFrQyxpQkFBZEEsRUFDckIsTUFBTSxJQUFJaEcsRUFBZWpCLEVBQUtJLGlCQUFrQixxREFFcEQsT0FBTyxJQUFJNEcsR0FBV0MsSUFFMUIvdEIsT0FBT0MsZUFBZW9zRixFQUFVbnJGLFVBQVcsTUFBTyxDQUM5Q2YsSUFBSyxXQUNELElBQUswQixLQUFLMHFGLGFBQ04sTUFBTSxJQUFJeGtFLEVBQWVqQixFQUFLVyxvQkFBcUIsZ0ZBR3ZELE9BQU81bEIsS0FBSzBxRixjQUVoQnJzRixZQUFZLEVBQ1prWixjQUFjLElBRWxCaXpFLEVBQVVuckYsVUFBVXE4QixXQUFhLFNBQVUyd0QsR0FJdkMsT0FIQXBsRSxFQUEwQix1QkFBd0I3bUIsVUFBVyxHQUM3RG1uQixFQUFnQix1QkFBd0IsbUJBQW9CLEVBQUc4a0UsR0FDL0Ryc0YsS0FBSzRxRix5QkFDRSxJQUFJMEIsR0FBb0JoK0QsR0FBYUUsV0FBVzY5RCxHQUFhcnNGLE9BRXhFd3FGLEVBQVVuckYsVUFBVWt0QyxJQUFNLFNBQVU4L0MsR0FJaEMsT0FIQXBsRSxFQUEwQixnQkFBaUI3bUIsVUFBVyxHQUN0RG1uQixFQUFnQixnQkFBaUIsbUJBQW9CLEVBQUc4a0UsR0FDeERyc0YsS0FBSzRxRix5QkFDRW9CLEdBQWtCTyxRQUFRaitELEdBQWFFLFdBQVc2OUQsR0FBYXJzRixPQUUxRXdxRixFQUFVbnJGLFVBQVVvcEQsZ0JBQWtCLFNBQVVsNUIsR0FHNUMsR0FGQXRJLEVBQTBCLDRCQUE2QjdtQixVQUFXLEdBQ2xFbW5CLEVBQWdCLDRCQUE2QixtQkFBb0IsRUFBR2dJLEdBQ2hFQSxFQUFhOXVCLFFBQVEsTUFBUSxFQUM3QixNQUFNLElBQUl5bEIsRUFBZWpCLEVBQUtJLGlCQUFrQiwwQkFBNEJrSyxFQUFlLDBGQUkvRixPQURBdnZCLEtBQUs0cUYseUJBQ0UsSUFBSTRCLEdBQVEsSUFBSXpqQyxHQUFNejZCLEdBQWFJLFdBQVlhLEdBQWV2dkIsT0FFekV3cUYsRUFBVW5yRixVQUFVbStCLGVBQWlCLFNBQVUrNEMsR0FDM0MsSUFBSTdzRSxFQUFRMUosS0FHWixPQUZBaW5CLEVBQTBCLDJCQUE0QjdtQixVQUFXLEdBQ2pFbW5CLEVBQWdCLDJCQUE0QixXQUFZLEVBQUdndkQsR0FDcER2MkUsS0FBSzRxRix5QkFBeUJ6dEUsYUFBWSxTQUFVQSxHQUN2RCxPQUFPbzVELEVBQWUsSUFBSWtXLEdBQWMvaUYsRUFBT3lULFFBR3ZEcXRFLEVBQVVuckYsVUFBVTY2QixNQUFRLFdBRXhCLE9BREFsNkIsS0FBSzRxRix5QkFDRSxJQUFJOEIsR0FBVzFzRixPQUUxQjdCLE9BQU9DLGVBQWVvc0YsRUFBVyxXQUFZLENBQ3pDbHNGLElBQUssV0FDRCxPQUFRNmxCLEtBQ0osS0FBS25LLEVBQVNPLE1BQ1YsTUFBTyxRQUNYLEtBQUtQLEVBQVNXLE1BQ1YsTUFBTyxRQUNYLEtBQUtYLEVBQVNvSyxPQUNWLE1BQU8sU0FDWCxRQUNJLE9BQU9TLEVBQUssc0JBQXdCVixPQUdoRDlsQixZQUFZLEVBQ1prWixjQUFjLElBRWxCaXpFLEVBQVUxdkUsWUFBYyxTQUFVQyxHQUc5QixPQUZBa00sRUFBMEIsd0JBQXlCN21CLFVBQVcsR0FDOURtbkIsRUFBZ0Isd0JBQXlCLG1CQUFvQixFQUFHeE0sR0FDeERBLEdBQ0osSUFBSyxRQUNERCxFQUFZZCxFQUFTTyxPQUNyQixNQUNKLElBQUssUUFDRE8sRUFBWWQsRUFBU1csT0FDckIsTUFDSixJQUFLLFNBQ0RHLEVBQVlkLEVBQVNvSyxRQUNyQixNQUNKLFFBQ0ksTUFBTSxJQUFJOEIsRUFBZWpCLEVBQUtJLGlCQUFrQixzQkFBd0J0SyxLQUtwRnl2RSxFQUFVbnJGLFVBQVVzdEYsaUNBQW1DLFdBQ25ELE9BQU8zc0YsS0FBS21yRixVQUFVNzlDLHVCQUVuQms5QyxFQTFTbUIsR0ErUzFCaUMsR0FBK0IsV0FDL0IsU0FBUzl2RSxFQUFZaXdFLEVBQVlDLEdBQzdCN3NGLEtBQUs0c0YsV0FBYUEsRUFDbEI1c0YsS0FBSzZzRixhQUFlQSxFQWtFeEIsT0FoRUFsd0UsRUFBWXRkLFVBQVVmLElBQU0sU0FBVXd1RixHQUNsQyxJQUFJcGpGLEVBQVExSixLQUNaaW5CLEVBQTBCLGtCQUFtQjdtQixVQUFXLEdBQ3hELElBQUkwd0QsRUFBTWk4QixHQUFrQixrQkFBbUJELEVBQWE5c0YsS0FBSzRzRixZQUNqRSxPQUFPNXNGLEtBQUs2c0YsYUFDUG51QixPQUFPLENBQUM1TixFQUFJczdCLE9BQ1o1cEYsTUFBSyxTQUFVNnNELEdBQ2hCLElBQUtBLEdBQXdCLElBQWhCQSxFQUFLaHZELE9BQ2QsT0FBT3drQixFQUFLLG1EQUVoQixJQUFJMG5CLEVBQU04aUIsRUFBSyxHQUNmLEdBQUk5aUIsYUFBZVksR0FDZixPQUFPLElBQUk2L0MsR0FBaUJ0akYsRUFBTWtqRixXQUFZOTdCLEVBQUlzN0IsS0FBTSxNQUN2QyxHQUNPLEVBQU90N0IsRUFBSW04QixZQUVsQyxHQUFJMWdELGFBQWV4QixHQUNwQixPQUFPLElBQUlpaUQsR0FBaUJ0akYsRUFBTWtqRixXQUFZOTdCLEVBQUlzN0IsS0FBTTcvQyxHQUN2QyxHQUNPLEVBQU91a0IsRUFBSW04QixZQUduQyxNQUFNcG9FLEVBQUssK0RBQWlFMG5CLEVBQUl0c0MsWUFBWWpDLFVBSXhHMmUsRUFBWXRkLFVBQVU2VSxJQUFNLFNBQVU0NEUsRUFBYXB1RixFQUFPNFYsR0FDdEQrUyxFQUE0QixrQkFBbUJqbkIsVUFBVyxFQUFHLEdBQzdELElBQUkwd0QsRUFBTWk4QixHQUFrQixrQkFBbUJELEVBQWE5c0YsS0FBSzRzRixZQUNqRXQ0RSxFQUFVNDRFLEdBQW1CLGtCQUFtQjU0RSxHQUNoRCxJQUFJckosRUFBS2tpRixHQUE0QnI4QixFQUFJbThCLFdBQVl2dUYsRUFBTyxtQkFBb0IwdUYsRUFBaUJuaUYsRUFBRyxHQUFJOGIsRUFBZTliLEVBQUcsR0FDdEhzMUUsRUFBU2pzRSxFQUFRKzRFLE9BQVMvNEUsRUFBUWc1RSxZQUNoQ3R0RixLQUFLNHNGLFdBQVd4QixlQUFlakQsZUFBZXBoRSxFQUFjcW1FLEVBQWdCOTRFLEVBQVFnNUUsYUFDcEZ0dEYsS0FBSzRzRixXQUFXeEIsZUFBZXJELGFBQWFoaEUsRUFBY3FtRSxHQUVoRSxPQURBcHRGLEtBQUs2c0YsYUFBYTM0RSxJQUFJNDhDLEVBQUlzN0IsS0FBTTdMLEdBQ3pCdmdGLE1BRVgyYyxFQUFZdGQsVUFBVTJOLE9BQVMsU0FBVTgvRSxFQUFhUyxFQUFtQjd1RixHQUVyRSxJQURBLElBSUlveUQsRUFDQXl2QixFQUxBd0ksRUFBc0IsR0FDakJwK0UsRUFBSyxFQUFHQSxFQUFLdkssVUFBVUMsT0FBUXNLLElBQ3BDbytFLEVBQW9CcCtFLEVBQUssR0FBS3ZLLFVBQVV1SyxHQWdCNUMsTUFaaUMsaUJBQXRCNGlGLEdBQ1BBLGFBQTZCL0osSUFDN0JyOEQsRUFBNEIscUJBQXNCL21CLFVBQVcsR0FDN0Qwd0QsRUFBTWk4QixHQUFrQixxQkFBc0JELEVBQWE5c0YsS0FBSzRzRixZQUNoRXJNLEVBQVN2Z0YsS0FBSzRzRixXQUFXeEIsZUFBZXRDLG1CQUFtQixxQkFBc0J5RSxFQUFtQjd1RixFQUFPcXFGLEtBRzNHOWhFLEVBQTBCLHFCQUFzQjdtQixVQUFXLEdBQzNEMHdELEVBQU1pOEIsR0FBa0IscUJBQXNCRCxFQUFhOXNGLEtBQUs0c0YsWUFDaEVyTSxFQUFTdmdGLEtBQUs0c0YsV0FBV3hCLGVBQWU1QyxnQkFBZ0IscUJBQXNCK0UsSUFFbEZ2dEYsS0FBSzZzRixhQUFhNy9FLE9BQU84akQsRUFBSXM3QixLQUFNN0wsR0FDNUJ2Z0YsTUFFWDJjLEVBQVl0ZCxVQUFVNlYsT0FBUyxTQUFVNDNFLEdBQ3JDN2xFLEVBQTBCLHFCQUFzQjdtQixVQUFXLEdBQzNELElBQUkwd0QsRUFBTWk4QixHQUFrQixxQkFBc0JELEVBQWE5c0YsS0FBSzRzRixZQUVwRSxPQURBNXNGLEtBQUs2c0YsYUFBYTMzRSxPQUFPNDdDLEVBQUlzN0IsTUFDdEJwc0YsTUFFSjJjLEVBckV1QixHQXVFOUIrdkUsR0FBNEIsV0FDNUIsU0FBU0EsRUFBV0UsR0FDaEI1c0YsS0FBSzRzRixXQUFhQSxFQUNsQjVzRixLQUFLd3RGLFdBQWEsR0FDbEJ4dEYsS0FBS3l0RixZQUFhLEVBNkR0QixPQTNEQWYsRUFBV3J0RixVQUFVNlUsSUFBTSxTQUFVNDRFLEVBQWFwdUYsRUFBTzRWLEdBQ3JEK1MsRUFBNEIsaUJBQWtCam5CLFVBQVcsRUFBRyxHQUM1REosS0FBSzB0RixxQkFDTCxJQUFJNThCLEVBQU1pOEIsR0FBa0IsaUJBQWtCRCxFQUFhOXNGLEtBQUs0c0YsWUFDaEV0NEUsRUFBVTQ0RSxHQUFtQixpQkFBa0I1NEUsR0FDL0MsSUFBSXJKLEVBQUtraUYsR0FBNEJyOEIsRUFBSW04QixXQUFZdnVGLEVBQU8sa0JBQW1CMHVGLEVBQWlCbmlGLEVBQUcsR0FBSThiLEVBQWU5YixFQUFHLEdBQ3JIczFFLEVBQVNqc0UsRUFBUSs0RSxPQUFTLzRFLEVBQVFnNUUsWUFDaEN0dEYsS0FBSzRzRixXQUFXeEIsZUFBZWpELGVBQWVwaEUsRUFBY3FtRSxFQUFnQjk0RSxFQUFRZzVFLGFBQ3BGdHRGLEtBQUs0c0YsV0FBV3hCLGVBQWVyRCxhQUFhaGhFLEVBQWNxbUUsR0FFaEUsT0FEQXB0RixLQUFLd3RGLFdBQWF4dEYsS0FBS3d0RixXQUFXeHBGLE9BQU91OEUsRUFBT2hoQixZQUFZek8sRUFBSXM3QixLQUFNemhELEdBQWFNLE9BQzVFanJDLE1BRVgwc0YsRUFBV3J0RixVQUFVMk4sT0FBUyxTQUFVOC9FLEVBQWFTLEVBQW1CN3VGLEdBRXBFLElBREEsSUFLSW95RCxFQUNBeXZCLEVBTkF3SSxFQUFzQixHQUNqQnArRSxFQUFLLEVBQUdBLEVBQUt2SyxVQUFVQyxPQUFRc0ssSUFDcENvK0UsRUFBb0JwK0UsRUFBSyxHQUFLdkssVUFBVXVLLEdBaUI1QyxPQWZBM0ssS0FBSzB0RixxQkFHNEIsaUJBQXRCSCxHQUNQQSxhQUE2Qi9KLElBQzdCcjhELEVBQTRCLG9CQUFxQi9tQixVQUFXLEdBQzVEMHdELEVBQU1pOEIsR0FBa0Isb0JBQXFCRCxFQUFhOXNGLEtBQUs0c0YsWUFDL0RyTSxFQUFTdmdGLEtBQUs0c0YsV0FBV3hCLGVBQWV0QyxtQkFBbUIsb0JBQXFCeUUsRUFBbUI3dUYsRUFBT3FxRixLQUcxRzloRSxFQUEwQixvQkFBcUI3bUIsVUFBVyxHQUMxRDB3RCxFQUFNaThCLEdBQWtCLG9CQUFxQkQsRUFBYTlzRixLQUFLNHNGLFlBQy9Eck0sRUFBU3ZnRixLQUFLNHNGLFdBQVd4QixlQUFlNUMsZ0JBQWdCLG9CQUFxQitFLElBRWpGdnRGLEtBQUt3dEYsV0FBYXh0RixLQUFLd3RGLFdBQVd4cEYsT0FBT3U4RSxFQUFPaGhCLFlBQVl6TyxFQUFJczdCLEtBQU16aEQsR0FBYUUsUUFBTyxLQUNuRjdxQyxNQUVYMHNGLEVBQVdydEYsVUFBVTZWLE9BQVMsU0FBVTQzRSxHQUNwQzdsRSxFQUEwQixvQkFBcUI3bUIsVUFBVyxHQUMxREosS0FBSzB0RixxQkFDTCxJQUFJNThCLEVBQU1pOEIsR0FBa0Isb0JBQXFCRCxFQUFhOXNGLEtBQUs0c0YsWUFFbkUsT0FEQTVzRixLQUFLd3RGLFdBQWF4dEYsS0FBS3d0RixXQUFXeHBGLE9BQU8sSUFBSWlwQyxHQUFlNmpCLEVBQUlzN0IsS0FBTXpoRCxHQUFhTSxPQUM1RWpyQyxNQUVYMHNGLEVBQVdydEYsVUFBVWsvRCxPQUFTLFdBQzFCLE9BQU8vNEQsRUFBTTlELFVBQVUxQixVQUFNLE9BQVEsR0FBUSxXQUN6QyxPQUFPd0YsRUFBTS9DLFlBQVl6QyxNQUFNLFNBQVVpTCxHQUdyQyxPQUZBakwsS0FBSzB0RixxQkFDTDF0RixLQUFLeXRGLFlBQWEsRUFDZHp0RixLQUFLd3RGLFdBQVdudEYsT0FBUyxFQUNsQixDQUFDLEVBQWNMLEtBQUs0c0YsV0FBV2hDLHlCQUF5QnRyQixNQUFNdC9ELEtBQUt3dEYsYUFFdkUsQ0FBQyxVQUlwQmQsRUFBV3J0RixVQUFVcXVGLG1CQUFxQixXQUN0QyxHQUFJMXRGLEtBQUt5dEYsV0FDTCxNQUFNLElBQUl2bkUsRUFBZWpCLEVBQUtXLG9CQUFxQix3RUFJcEQ4bUUsRUFqRW9CLEdBc0UzQlYsR0FBbUMsV0FDbkMsU0FBU0EsRUFBa0JJLEVBQU1ELEVBQVdjLEdBQ3hDanRGLEtBQUtvc0YsS0FBT0EsRUFDWnBzRixLQUFLbXNGLFVBQVlBLEVBQ2pCbnNGLEtBQUtpdEYsV0FBYUEsRUFDbEJqdEYsS0FBSzZxRixpQkFBbUI3cUYsS0FBS21zRixVQUFVdkIseUJBdU0zQyxPQXJNQW9CLEVBQWtCTyxRQUFVLFNBQVU5OUQsRUFBTTA5RCxFQUFXNTdDLEdBQ25ELEdBQUk5aEIsRUFBS3B1QixPQUFTLEdBQU0sRUFDcEIsTUFBTSxJQUFJNmxCLEVBQWVqQixFQUFLSSxpQkFBa0IsNkZBRTNDb0osRUFBS0Ysa0JBQW9CLFFBQVVFLEVBQUtwdUIsUUFFakQsT0FBTyxJQUFJMnJGLEVBQWtCLElBQUk1OEQsR0FBWVgsR0FBTzA5RCxFQUFXNTdDLElBRW5FcHlDLE9BQU9DLGVBQWU0dEYsRUFBa0Izc0YsVUFBVyxLQUFNLENBQ3JEZixJQUFLLFdBQ0QsT0FBTzBCLEtBQUtvc0YsS0FBSzM5RCxLQUFLWCxlQUUxQnp2QixZQUFZLEVBQ1prWixjQUFjLElBRWxCcFosT0FBT0MsZUFBZTR0RixFQUFrQjNzRixVQUFXLFNBQVUsQ0FDekRmLElBQUssV0FDRCxPQUFPLElBQUlndUYsR0FBb0J0c0YsS0FBS29zRixLQUFLMzlELEtBQUtiLFVBQVc1dEIsS0FBS21zRixVQUFXbnNGLEtBQUtpdEYsYUFFbEY1dUYsWUFBWSxFQUNaa1osY0FBYyxJQUVsQnBaLE9BQU9DLGVBQWU0dEYsRUFBa0Izc0YsVUFBVyxPQUFRLENBQ3ZEZixJQUFLLFdBQ0QsT0FBTzBCLEtBQUtvc0YsS0FBSzM5RCxLQUFLRixtQkFFMUJsd0IsWUFBWSxFQUNaa1osY0FBYyxJQUVsQnkwRSxFQUFrQjNzRixVQUFVcThCLFdBQWEsU0FBVTJ3RCxHQUcvQyxHQUZBcGxFLEVBQTBCLCtCQUFnQzdtQixVQUFXLEdBQ3JFbW5CLEVBQWdCLCtCQUFnQyxtQkFBb0IsRUFBRzhrRSxJQUNsRUEsRUFDRCxNQUFNLElBQUlubUUsRUFBZWpCLEVBQUtJLGlCQUFrQiw0REFFcEQsSUFBSW9KLEVBQU9ILEdBQWFFLFdBQVc2OUQsR0FDbkMsT0FBTyxJQUFJQyxHQUFvQnRzRixLQUFLb3NGLEtBQUszOUQsS0FBS3BCLE1BQU1vQixHQUFPenVCLEtBQUttc0YsWUFFcEVILEVBQWtCM3NGLFVBQVVpckIsUUFBVSxTQUFVaUIsR0FDNUMsS0FBTUEsYUFBaUJ5Z0UsR0FDbkIsTUFBTXJpRSxFQUFrQixVQUFXLG9CQUFxQixFQUFHNEIsR0FFL0QsT0FBUXZyQixLQUFLbXNGLFlBQWM1Z0UsRUFBTTRnRSxXQUM3Qm5zRixLQUFLb3NGLEtBQUs5aEUsUUFBUWlCLEVBQU02Z0UsT0FDeEJwc0YsS0FBS2l0RixhQUFlMWhFLEVBQU0waEUsWUFFbENqQixFQUFrQjNzRixVQUFVNlUsSUFBTSxTQUFVeFYsRUFBTzRWLEdBQy9DK1MsRUFBNEIsd0JBQXlCam5CLFVBQVcsRUFBRyxHQUNuRWtVLEVBQVU0NEUsR0FBbUIsd0JBQXlCNTRFLEdBQ3RELElBQUlySixFQUFLa2lGLEdBQTRCbnRGLEtBQUtpdEYsV0FBWXZ1RixFQUFPLHlCQUEwQjB1RixFQUFpQm5pRixFQUFHLEdBQUk4YixFQUFlOWIsRUFBRyxHQUM3SHMxRSxFQUFTanNFLEVBQVErNEUsT0FBUy80RSxFQUFRZzVFLFlBQ2hDdHRGLEtBQUttc0YsVUFBVWYsZUFBZWpELGVBQWVwaEUsRUFBY3FtRSxFQUFnQjk0RSxFQUFRZzVFLGFBQ25GdHRGLEtBQUttc0YsVUFBVWYsZUFBZXJELGFBQWFoaEUsRUFBY3FtRSxHQUMvRCxPQUFPcHRGLEtBQUs2cUYsaUJBQWlCdnJCLE1BQU1paEIsRUFBT2hoQixZQUFZdi9ELEtBQUtvc0YsS0FBTXpoRCxHQUFhTSxRQUVsRitnRCxFQUFrQjNzRixVQUFVMk4sT0FBUyxTQUFVdWdGLEVBQW1CN3VGLEdBRTlELElBREEsSUFJSTZoRixFQUpBd0ksRUFBc0IsR0FDakJwK0UsRUFBSyxFQUFHQSxFQUFLdkssVUFBVUMsT0FBUXNLLElBQ3BDbytFLEVBQW9CcCtFLEVBQUssR0FBS3ZLLFVBQVV1SyxHQVk1QyxNQVRpQyxpQkFBdEI0aUYsR0FDUEEsYUFBNkIvSixJQUM3QnI4RCxFQUE0QiwyQkFBNEIvbUIsVUFBVyxHQUNuRW1nRixFQUFTdmdGLEtBQUttc0YsVUFBVWYsZUFBZXRDLG1CQUFtQiwyQkFBNEJ5RSxFQUFtQjd1RixFQUFPcXFGLEtBR2hIOWhFLEVBQTBCLDJCQUE0QjdtQixVQUFXLEdBQ2pFbWdGLEVBQVN2Z0YsS0FBS21zRixVQUFVZixlQUFlNUMsZ0JBQWdCLDJCQUE0QitFLElBRWhGdnRGLEtBQUs2cUYsaUJBQWlCdnJCLE1BQU1paEIsRUFBT2hoQixZQUFZdi9ELEtBQUtvc0YsS0FBTXpoRCxHQUFhRSxRQUFPLE1BRXpGbWhELEVBQWtCM3NGLFVBQVU2VixPQUFTLFdBRWpDLE9BREErUixFQUEwQiwyQkFBNEI3bUIsVUFBVyxHQUMxREosS0FBSzZxRixpQkFBaUJ2ckIsTUFBTSxDQUMvQixJQUFJcnlCLEdBQWVqdEMsS0FBS29zRixLQUFNemhELEdBQWFNLFNBR25EK2dELEVBQWtCM3NGLFVBQVVzdUYsV0FBYSxXQUVyQyxJQURBLElBQUlyK0UsRUFBTyxHQUNGM0UsRUFBSyxFQUFHQSxFQUFLdkssVUFBVUMsT0FBUXNLLElBQ3BDMkUsRUFBSzNFLEdBQU12SyxVQUFVdUssR0FFekIwYyxFQUE0QiwrQkFBZ0NqbkIsVUFBVyxFQUFHLEdBQzFFLElBR0kwTixFQUhBd0csRUFBVSxDQUNWbS9ELHdCQUF3QixHQUd4Qm1hLEVBQVUsRUFDZSxpQkFBbEJ0K0UsRUFBS3MrRSxJQUNYbEksR0FBa0JwMkUsRUFBS3MrRSxNQUV4Qm5rRSxFQUFvQiwrQkFEcEJuVixFQUFVaEYsRUFBS3MrRSxHQUM4QyxDQUN6RCwyQkFFSjdsRSxFQUEwQiwrQkFBZ0MsVUFBVyx5QkFBMEJ6VCxFQUFRbS9ELHdCQUN2R21hLEtBRUosSUFBSUMsRUFBa0IsQ0FDbEJwYSx1QkFBd0JuL0QsRUFBUW0vRCx3QkFlcEMsT0FiSWlTLEdBQWtCcDJFLEVBQUtzK0UsSUFDdkI5L0UsRUFBV3dCLEVBQUtzK0UsSUFHaEJybUUsRUFBZ0IsK0JBQWdDLFdBQVlxbUUsRUFBU3QrRSxFQUFLcytFLElBQzFFaG1FLEVBQXdCLCtCQUFnQyxXQUFZZ21FLEVBQVUsRUFBR3QrRSxFQUFLcytFLEVBQVUsSUFDaEdobUUsRUFBd0IsK0JBQWdDLFdBQVlnbUUsRUFBVSxFQUFHdCtFLEVBQUtzK0UsRUFBVSxJQUNoRzkvRSxFQUFXLENBQ1AxTCxLQUFNa04sRUFBS3MrRSxHQUNYOXBGLE1BQU93TCxFQUFLcytFLEVBQVUsR0FDdEI1L0UsU0FBVXNCLEVBQUtzK0UsRUFBVSxLQUcxQjV0RixLQUFLOHRGLG1CQUFtQkQsRUFBaUIvL0UsSUFFcERrK0UsRUFBa0Izc0YsVUFBVXl1RixtQkFBcUIsU0FBVXg1RSxFQUFTeEcsR0FDaEUsSUFBSXBFLEVBQVExSixLQUNSK3RGLEVBQWEsU0FBVWovRSxHQUN2QjVGLFFBQVFwRixNQUFNLGdDQUFpQ2dMLElBRS9DaEIsRUFBU2hLLFFBQ1RpcUYsRUFBYWpnRixFQUFTaEssTUFBTTdFLEtBQUs2TyxJQUVyQyxJQUFJaStFLEVBQWdCLElBQUk1SSxHQUFjLENBQ2xDL2dGLEtBQU0sU0FBVTA2RCxHQUNaLEdBQUlodkQsRUFBUzFMLEtBQU0sQ0FDZnlELEVBQU9pM0QsRUFBU3pOLEtBQUsxaEMsTUFBUSxFQUFHLG1EQUNoQyxJQUFJNGUsRUFBTXV3QixFQUFTek4sS0FBSy93RCxJQUFJb0wsRUFBTTBpRixNQUNsQ3QrRSxFQUFTMUwsS0FBSyxJQUFJNHFGLEdBQWlCdGpGLEVBQU15aUYsVUFBV3ppRixFQUFNMGlGLEtBQU03L0MsRUFBS3V3QixFQUFTOUgsVUFBVzhILEVBQVNsTyxpQkFBa0JsbEQsRUFBTXVqRixlQUdsSW5wRixNQUFPaXFGLElBRVBDLEVBQW1CaHVGLEtBQUs2cUYsaUJBQWlCdGlCLE9BQU94ZixHQUFNTyxPQUFPdHBELEtBQUtvc0YsS0FBSzM5RCxNQUFPczlELEVBQWV6M0UsR0FDakcsT0FBTyxXQUNIeTNFLEVBQWN6SSxPQUNkNTVFLEVBQU1taEYsaUJBQWlCcGlCLFNBQVN1bEIsS0FHeENoQyxFQUFrQjNzRixVQUFVZixJQUFNLFNBQVVnVyxHQUN4QyxJQUFJNUssRUFBUTFKLEtBR1osT0FGQXFuQixFQUE0Qix3QkFBeUJqbkIsVUFBVyxFQUFHLEdBQ25FNnRGLEdBQW1CLHdCQUF5QjM1RSxHQUNyQyxJQUFJdlMsU0FBUSxTQUFVQyxFQUFTQyxHQUM5QnFTLEdBQThCLFVBQW5CQSxFQUFRbEwsT0FDbkJNLEVBQU15aUYsVUFDRHZCLHlCQUNBM0gsMEJBQTBCdjVFLEVBQU0waUYsTUFDaEM1cEYsTUFBSyxTQUFVK3BDLEdBQ2hCdnFDLEVBQVEsSUFBSWdyRixHQUFpQnRqRixFQUFNeWlGLFVBQVd6aUYsRUFBTTBpRixLQUFNNy9DLEdBQzNDLEVBQU1BLGFBQWV4QixJQUFXd0IsRUFBSWQsa0JBQTJCL2hDLEVBQU11akYsZUFDckZockYsR0FHSHlILEVBQU13a0YsdUJBQXVCbHNGLEVBQVNDLEVBQVFxUyxPQUkxRDAzRSxFQUFrQjNzRixVQUFVNnVGLHVCQUF5QixTQUFVbHNGLEVBQVNDLEVBQVFxUyxHQUM1RSxJQUFJbTBELEVBQVd6b0UsS0FBSzh0RixtQkFBbUIsQ0FDbkNyYSx3QkFBd0IsRUFDeEJLLHVCQUF1QixHQUN4QixDQUNDMXhFLEtBQU0sU0FBVW94RSxHQUdaL0ssS0FDSytLLEVBQUszb0MsUUFBVTJvQyxFQUFLL3hFLFNBQVN1ekQsVUFROUIveUQsRUFBTyxJQUFJaWtCLEVBQWVqQixFQUFLZSxZQUFhLDBEQUV2Q3d0RCxFQUFLM29DLFFBQ1Yyb0MsRUFBSy94RSxTQUFTdXpELFdBQ2QxZ0QsR0FDbUIsV0FBbkJBLEVBQVFsTCxPQUNSbkgsRUFBTyxJQUFJaWtCLEVBQWVqQixFQUFLZSxZQUFhLDhLQU01Q2hrQixFQUFRd3hFLElBR2hCMXZFLE1BQU83QixLQUdmK3BGLEVBQWtCM3NGLFVBQVU4dUYsY0FBZ0IsU0FBVTU5QyxHQUNsRCxPQUFPLElBQUl5N0MsRUFBa0Joc0YsS0FBS29zRixLQUFNcHNGLEtBQUttc0YsVUFBVzU3QyxJQUVyRHk3QyxFQTVNMkIsR0E4TWxDb0MsR0FBa0MsV0FDbEMsU0FBU0EsRUFBaUJ4L0IsRUFBa0JvRyxHQUN4Q2gxRCxLQUFLNHVELGlCQUFtQkEsRUFDeEI1dUQsS0FBS2cxRCxVQUFZQSxFQU1yQixPQUpBbzVCLEVBQWlCL3VGLFVBQVVpckIsUUFBVSxTQUFVaUIsR0FDM0MsT0FBUXZyQixLQUFLNHVELG1CQUFxQnJqQyxFQUFNcWpDLGtCQUNwQzV1RCxLQUFLZzFELFlBQWN6cEMsRUFBTXlwQyxXQUUxQm81QixFQVQwQixHQVdqQ3BCLEdBQWtDLFdBQ2xDLFNBQVNBLEVBQWlCSixFQUFZUixFQUFNaUMsRUFBV0MsRUFBWUMsRUFBbUJ0QixHQUNsRmp0RixLQUFLNHNGLFdBQWFBLEVBQ2xCNXNGLEtBQUtvc0YsS0FBT0EsRUFDWnBzRixLQUFLcXVGLFVBQVlBLEVBQ2pCcnVGLEtBQUtzdUYsV0FBYUEsRUFDbEJ0dUYsS0FBS3V1RixrQkFBb0JBLEVBQ3pCdnVGLEtBQUtpdEYsV0FBYUEsRUFnSHRCLE9BOUdBRCxFQUFpQjN0RixVQUFVcUwsS0FBTyxTQUFVNEosR0FHeEMsR0FGQStTLEVBQTRCLHdCQUF5QmpuQixVQUFXLEVBQUcsR0FDbkVrVSxFQUFVazZFLEdBQXdCLHdCQUF5Qmw2RSxHQUN0RHRVLEtBQUtxdUYsVUFHTCxDQUdELEdBQUlydUYsS0FBS2l0RixXQUFZLENBQ2pCLElBQUlud0IsRUFBVyxJQUFJMnhCLEdBQXNCenVGLEtBQUs0c0YsV0FBWTVzRixLQUFLb3NGLEtBQU1wc0YsS0FBS3F1RixVQUFXcnVGLEtBQUtzdUYsV0FBWXR1RixLQUFLdXVGLG1CQUMzRyxPQUFPdnVGLEtBQUtpdEYsV0FBV3lCLGNBQWM1eEIsRUFBVXhvRCxHQUcvQyxPQUFPdFUsS0FBSzJ1RixXQUFXM3VGLEtBQUtxdUYsVUFBVTNqRixPQUFRMGlDLEdBQWtCRyxvQkFBb0JqNUIsRUFBU3RVLEtBQUs0c0YsV0FBV0QsdUNBSXpISyxFQUFpQjN0RixVQUFVZixJQUFNLFNBQVUyckMsRUFBVzMxQixHQUdsRCxHQUZBK1MsRUFBNEIsdUJBQXdCam5CLFVBQVcsRUFBRyxHQUNsRWtVLEVBQVVrNkUsR0FBd0IsdUJBQXdCbDZFLEdBQ3REdFUsS0FBS3F1RixVQUFXLENBQ2hCLElBQUkzdkYsRUFBUXNCLEtBQUtxdUYsVUFDWjNqRixPQUNBMi9CLE1BQU0yK0MsR0FBc0IsdUJBQXdCLytDLElBQ3pELEdBQWMsT0FBVnZyQyxFQUNBLE9BQU9zQixLQUFLNHVGLFVBQVVsd0YsRUFBTzB1QyxHQUFrQkcsb0JBQW9CajVCLEVBQVN0VSxLQUFLNHNGLFdBQVdELHVDQUt4R3h1RixPQUFPQyxlQUFlNHVGLEVBQWlCM3RGLFVBQVcsS0FBTSxDQUNwRGYsSUFBSyxXQUNELE9BQU8wQixLQUFLb3NGLEtBQUszOUQsS0FBS1gsZUFFMUJ6dkIsWUFBWSxFQUNaa1osY0FBYyxJQUVsQnBaLE9BQU9DLGVBQWU0dUYsRUFBaUIzdEYsVUFBVyxNQUFPLENBQ3JEZixJQUFLLFdBQ0QsT0FBTyxJQUFJMHRGLEdBQWtCaHNGLEtBQUtvc0YsS0FBTXBzRixLQUFLNHNGLFdBQVk1c0YsS0FBS2l0RixhQUVsRTV1RixZQUFZLEVBQ1prWixjQUFjLElBRWxCcFosT0FBT0MsZUFBZTR1RixFQUFpQjN0RixVQUFXLFNBQVUsQ0FDeERmLElBQUssV0FDRCxPQUEwQixPQUFuQjBCLEtBQUtxdUYsV0FFaEJod0YsWUFBWSxFQUNaa1osY0FBYyxJQUVsQnBaLE9BQU9DLGVBQWU0dUYsRUFBaUIzdEYsVUFBVyxXQUFZLENBQzFEZixJQUFLLFdBQ0QsT0FBTyxJQUFJOHZGLEdBQWlCcHVGLEtBQUt1dUYsa0JBQW1CdnVGLEtBQUtzdUYsYUFFN0Rqd0YsWUFBWSxFQUNaa1osY0FBYyxJQUVsQnkxRSxFQUFpQjN0RixVQUFVaXJCLFFBQVUsU0FBVWlCLEdBQzNDLEtBQU1BLGFBQWlCeWhFLEdBQ25CLE1BQU1yakUsRUFBa0IsVUFBVyxtQkFBb0IsRUFBRzRCLEdBRTlELE9BQVF2ckIsS0FBSzRzRixhQUFlcmhFLEVBQU1xaEUsWUFDOUI1c0YsS0FBS3N1RixhQUFlL2lFLEVBQU0raUUsWUFDMUJ0dUYsS0FBS29zRixLQUFLOWhFLFFBQVFpQixFQUFNNmdFLFFBQ0osT0FBbkJwc0YsS0FBS3F1RixVQUNvQixPQUFwQjlpRSxFQUFNOGlFLFVBQ05ydUYsS0FBS3F1RixVQUFVL2pFLFFBQVFpQixFQUFNOGlFLGFBQ25DcnVGLEtBQUtpdEYsYUFBZTFoRSxFQUFNMGhFLFlBRWxDRCxFQUFpQjN0RixVQUFVc3ZGLFdBQWEsU0FBVWprRixFQUFNNEosR0FDcEQsSUFBSTVLLEVBQVExSixLQUNSc0MsRUFBUyxHQUliLE9BSEFvSSxFQUFLOEcsU0FBUSxTQUFVeFMsRUFBS04sR0FDeEI0RCxFQUFPdEQsR0FBTzBLLEVBQU1rbEYsVUFBVWx3RixFQUFPNFYsTUFFbENoUyxHQUVYMHFGLEVBQWlCM3RGLFVBQVV1dkYsVUFBWSxTQUFVbHdGLEVBQU80VixHQUNwRCxHQUFJNVYsYUFBaUJ1dEMsR0FDakIsT0FBT2pzQyxLQUFLMnVGLFdBQVdqd0YsRUFBTzRWLEdBRTdCLEdBQUk1VixhQUFpQnF4QyxHQUN0QixPQUFPL3ZDLEtBQUs2dUYsVUFBVW53RixFQUFPNFYsR0FFNUIsR0FBSTVWLGFBQWlCdXdDLEdBQVUsQ0FDaEMsSUFBSWp3QyxFQUFNTixFQUFNQSxNQUFNNFYsR0FDbEI2WCxFQUFXbnNCLEtBQUs0c0YsV0FBV2hDLHlCQUF5QmovRCxhQVV4RCxPQVRLanRCLEVBQU1pdEIsV0FBV3JCLFFBQVE2QixJQUUxQnJvQixFQUFNLFlBQWM5RCxLQUFLb3NGLEtBQUszOUQsS0FBTywrREFFaEMvdkIsRUFBTWl0QixXQUFXTyxVQUFZLElBQU14dEIsRUFBTWl0QixXQUFXUSxTQUFXLHdGQUVoREEsRUFBU0QsVUFBWSxJQUFNQyxFQUFTQSxTQUFXLGNBR2hFLElBQUk2L0QsR0FBa0JodEYsRUFBS2dCLEtBQUs0c0YsV0FBWTVzRixLQUFLaXRGLFlBR3hELE9BQU92dUYsRUFBTUEsTUFBTTRWLElBRzNCMDRFLEVBQWlCM3RGLFVBQVV3dkYsVUFBWSxTQUFVbmtGLEVBQU00SixHQUNuRCxJQUFJNUssRUFBUTFKLEtBQ1osT0FBTzBLLEVBQUtzakMsY0FBYy84QixLQUFJLFNBQVV2UyxHQUNwQyxPQUFPZ0wsRUFBTWtsRixVQUFVbHdGLEVBQU80VixPQUcvQjA0RSxFQXZIMEIsR0F5SGpDeUIsR0FBdUMsU0FBVXRrRixHQUVqRCxTQUFTc2tGLElBQ0wsT0FBa0IsT0FBWHRrRixHQUFtQkEsRUFBTzdKLE1BQU1OLEtBQU1JLFlBQWNKLEtBTy9ELE9BVEF3RixFQUFNMUYsVUFBVTJ1RixFQUF1QnRrRixHQUl2Q3NrRixFQUFzQnB2RixVQUFVcUwsS0FBTyxTQUFVNEosR0FDN0MsSUFBSTVKLEVBQU9QLEVBQU85SyxVQUFVcUwsS0FBSzlNLEtBQUtvQyxLQUFNc1UsR0FFNUMsT0FEQXpPLE9BQWdCMEQsSUFBVG1CLEVBQW9CLG9EQUNwQkEsR0FFSitqRixFQVYrQixDQVd4Q3pCLElBQ0VSLEdBQXlCLFdBQ3pCLFNBQVN6akMsRUFBTStsQyxFQUFRM0MsRUFBV2MsR0FDOUJqdEYsS0FBSzh1RixPQUFTQSxFQUNkOXVGLEtBQUttc0YsVUFBWUEsRUFDakJuc0YsS0FBS2l0RixXQUFhQSxFQXdkdEIsT0F0ZEFsa0MsRUFBTTFwRCxVQUFVNndFLE1BQVEsU0FBVTdsQyxFQUFPMGtELEVBQU9yd0YsR0FDNUN1b0IsRUFBMEIsY0FBZTdtQixVQUFXLEdBQ3BEb3BCLEVBQWdCLGNBQWUsRUFBRzlxQixHQUVsQyxJQVdJZ3lDLEVBWEFzK0MsRUFBcUIsQ0FDckIsSUFDQSxLQUNBLEtBQ0EsS0FDQSxJQUNBLGlCQUNBLEtBQ0Esc0JBRUpwbUUsRUFBbUIsY0FBZW9tRSxFQUFvQixFQUFHRCxHQUV6RCxJQUFJOWtELEVBQVkrK0MsR0FBc0IsY0FBZTMrQyxHQUNqRDRrRCxFQUFXN2lDLEdBQVM1OUIsV0FBV3VnRSxHQUNuQyxHQUFJOWtELEVBQVVuYixhQUFjLENBQ3hCLEdBQUltZ0UsSUFBYTdpQyxHQUFTTSxnQkFDdEJ1aUMsSUFBYTdpQyxHQUFTUSxtQkFDdEIsTUFBTSxJQUFJMW1DLEVBQWVqQixFQUFLSSxpQkFBa0IscUNBQXVDNHBFLEVBQVN6akYsV0FBYSx3Q0FHNUcsR0FBSXlqRixJQUFhN2lDLEdBQVNPLEdBQUksQ0FDL0Izc0QsS0FBS2t2RixrQ0FBa0N4d0YsRUFBT3V3RixHQUU5QyxJQURBLElBQUlFLEVBQWdCLEdBQ1h4a0YsRUFBSyxFQUFHTSxFQUFLdk0sRUFBT2lNLEVBQUtNLEVBQUc1SyxPQUFRc0ssSUFBTSxDQUMvQyxJQUFJMmlELEVBQWFyaUQsRUFBR04sR0FDcEJ3a0YsRUFBYzFyRixLQUFLekQsS0FBS292RixxQkFBcUI5aEMsSUFFakQ1YyxFQUFhLElBQUlYLEdBQVdvL0MsUUFHNUJ6K0MsRUFBYTF3QyxLQUFLb3ZGLHFCQUFxQjF3RixRQUl2Q3V3RixJQUFhN2lDLEdBQVNPLElBQ3RCc2lDLElBQWE3aUMsR0FBU1Esb0JBQ3RCNXNELEtBQUtrdkYsa0NBQWtDeHdGLEVBQU91d0YsR0FFbER2K0MsRUFBYTF3QyxLQUFLbXNGLFVBQVVmLGVBQWVsQyxnQkFBZ0IsY0FBZXhxRixFQUVyRHV3RixJQUFhN2lDLEdBQVNPLElBRS9DLElBQUlwM0MsRUFBUzYwQyxHQUFZcnJELE9BQU9rckMsRUFBV2dsRCxFQUFVditDLEdBRXJELE9BREExd0MsS0FBS3F2RixrQkFBa0I5NUUsR0FDaEIsSUFBSXd6QyxFQUFNL29ELEtBQUs4dUYsT0FBTzNrQyxVQUFVNTBDLEdBQVN2VixLQUFLbXNGLFVBQVduc0YsS0FBS2l0RixhQUV6RWxrQyxFQUFNMXBELFVBQVVxcEQsUUFBVSxTQUFVcmUsRUFBT2lsRCxHQUd2QyxJQUFJanZELEVBQ0osR0FIQWhaLEVBQTRCLGdCQUFpQmpuQixVQUFXLEVBQUcsR0FDM0R3bkIsRUFBd0IsZ0JBQWlCLG1CQUFvQixFQUFHMG5FLFFBRTNDL2xGLElBQWpCK2xGLEdBQStDLFFBQWpCQSxFQUM5Qmp2RCxFQUFZMnBCLEdBQVVDLGNBRXJCLElBQXFCLFNBQWpCcWxDLEVBSUwsTUFBTSxJQUFJcHBFLEVBQWVqQixFQUFLSSxpQkFBa0IsbURBQXFEaXFFLEVBQWUsZ0NBSHBIanZELEVBQVkycEIsR0FBVThCLFdBTTFCLEdBQTRCLE9BQXhCOXJELEtBQUs4dUYsT0FBT2xtQyxRQUNaLE1BQU0sSUFBSTFpQyxFQUFlakIsRUFBS0ksaUJBQWtCLDBHQUdwRCxHQUEwQixPQUF0QnJsQixLQUFLOHVGLE9BQU9qbUMsTUFDWixNQUFNLElBQUkzaUMsRUFBZWpCLEVBQUtJLGlCQUFrQix1R0FHcEQsSUFBSTRrQixFQUFZKytDLEdBQXNCLGdCQUFpQjMrQyxHQUNuRHFlLEVBQVUsSUFBSWtCLEdBQVEzZixFQUFXNUosR0FFckMsT0FEQXJnQyxLQUFLdXZGLG1CQUFtQjdtQyxHQUNqQixJQUFJSyxFQUFNL29ELEtBQUs4dUYsT0FBT3ZrQyxXQUFXN0IsR0FBVTFvRCxLQUFLbXNGLFVBQVduc0YsS0FBS2l0RixhQUUzRWxrQyxFQUFNMXBELFVBQVVrdUIsTUFBUSxTQUFVcnVCLEdBSTlCLE9BSEErbkIsRUFBMEIsY0FBZTdtQixVQUFXLEdBQ3BEbW5CLEVBQWdCLGNBQWUsU0FBVSxFQUFHcm9CLEdBQzVDMHFCLEVBQXVCLGNBQWUsRUFBRzFxQixHQUNsQyxJQUFJNnBELEVBQU0vb0QsS0FBSzh1RixPQUFPcmtDLGlCQUFpQnZyRCxHQUFJYyxLQUFLbXNGLFVBQVduc0YsS0FBS2l0RixhQUUzRWxrQyxFQUFNMXBELFVBQVVtd0YsWUFBYyxTQUFVdHdGLEdBSXBDLE9BSEErbkIsRUFBMEIsb0JBQXFCN21CLFVBQVcsR0FDMURtbkIsRUFBZ0Isb0JBQXFCLFNBQVUsRUFBR3JvQixHQUNsRDBxQixFQUF1QixvQkFBcUIsRUFBRzFxQixHQUN4QyxJQUFJNnBELEVBQU0vb0QsS0FBSzh1RixPQUFPcGtDLGdCQUFnQnhyRCxHQUFJYyxLQUFLbXNGLFVBQVduc0YsS0FBS2l0RixhQUUxRWxrQyxFQUFNMXBELFVBQVV1cEQsUUFBVSxTQUFVNm1DLEdBRWhDLElBREEsSUFBSTVsRCxFQUFTLEdBQ0psL0IsRUFBSyxFQUFHQSxFQUFLdkssVUFBVUMsT0FBUXNLLElBQ3BDay9CLEVBQU9sL0IsRUFBSyxHQUFLdkssVUFBVXVLLEdBRS9Cd2MsRUFBNEIsZ0JBQWlCL21CLFVBQVcsR0FDeEQsSUFBSXFoQyxFQUFRemhDLEtBQUswdkYscUJBQXFCLGdCQUFpQkQsRUFBWTVsRCxHQUN2RCxHQUNaLE9BQU8sSUFBSWtmLEVBQU0vb0QsS0FBSzh1RixPQUFPbGtDLFlBQVlucEIsR0FBUXpoQyxLQUFLbXNGLFVBQVduc0YsS0FBS2l0RixhQUUxRWxrQyxFQUFNMXBELFVBQVVzd0YsV0FBYSxTQUFVRixHQUVuQyxJQURBLElBQUk1bEQsRUFBUyxHQUNKbC9CLEVBQUssRUFBR0EsRUFBS3ZLLFVBQVVDLE9BQVFzSyxJQUNwQ2svQixFQUFPbC9CLEVBQUssR0FBS3ZLLFVBQVV1SyxHQUUvQndjLEVBQTRCLG1CQUFvQi9tQixVQUFXLEdBQzNELElBQUlxaEMsRUFBUXpoQyxLQUFLMHZGLHFCQUFxQixtQkFBb0JELEVBQVk1bEQsR0FDMUQsR0FDWixPQUFPLElBQUlrZixFQUFNL29ELEtBQUs4dUYsT0FBT2xrQyxZQUFZbnBCLEdBQVF6aEMsS0FBS21zRixVQUFXbnNGLEtBQUtpdEYsYUFFMUVsa0MsRUFBTTFwRCxVQUFVdXdGLFVBQVksU0FBVUgsR0FFbEMsSUFEQSxJQUFJNWxELEVBQVMsR0FDSmwvQixFQUFLLEVBQUdBLEVBQUt2SyxVQUFVQyxPQUFRc0ssSUFDcENrL0IsRUFBT2wvQixFQUFLLEdBQUt2SyxVQUFVdUssR0FFL0J3YyxFQUE0QixrQkFBbUIvbUIsVUFBVyxHQUMxRCxJQUFJcWhDLEVBQVF6aEMsS0FBSzB2RixxQkFBcUIsa0JBQW1CRCxFQUFZNWxELEdBQ3pELEdBQ1osT0FBTyxJQUFJa2YsRUFBTS9vRCxLQUFLOHVGLE9BQU9qa0MsVUFBVXBwQixHQUFRemhDLEtBQUttc0YsVUFBV25zRixLQUFLaXRGLGFBRXhFbGtDLEVBQU0xcEQsVUFBVXdwRCxNQUFRLFNBQVU0bUMsR0FFOUIsSUFEQSxJQUFJNWxELEVBQVMsR0FDSmwvQixFQUFLLEVBQUdBLEVBQUt2SyxVQUFVQyxPQUFRc0ssSUFDcENrL0IsRUFBT2wvQixFQUFLLEdBQUt2SyxVQUFVdUssR0FFL0J3YyxFQUE0QixjQUFlL21CLFVBQVcsR0FDdEQsSUFBSXFoQyxFQUFRemhDLEtBQUswdkYscUJBQXFCLGNBQWVELEVBQVk1bEQsR0FDckQsR0FDWixPQUFPLElBQUlrZixFQUFNL29ELEtBQUs4dUYsT0FBT2prQyxVQUFVcHBCLEdBQVF6aEMsS0FBS21zRixVQUFXbnNGLEtBQUtpdEYsYUFFeEVsa0MsRUFBTTFwRCxVQUFVaXJCLFFBQVUsU0FBVWlCLEdBQ2hDLEtBQU1BLGFBQWlCdzlCLEdBQ25CLE1BQU1wL0IsRUFBa0IsVUFBVyxRQUFTLEVBQUc0QixHQUVuRCxPQUFRdnJCLEtBQUttc0YsWUFBYzVnRSxFQUFNNGdFLFdBQWFuc0YsS0FBSzh1RixPQUFPeGtFLFFBQVFpQixFQUFNdWpFLFNBRTVFL2xDLEVBQU0xcEQsVUFBVTh1RixjQUFnQixTQUFVNTlDLEdBQ3RDLE9BQU8sSUFBSXdZLEVBQU0vb0QsS0FBSzh1RixPQUFROXVGLEtBQUttc0YsVUFBVzU3QyxJQUdsRHdZLEVBQU0xcEQsVUFBVXF3RixxQkFBdUIsU0FBVWx5RSxFQUFZaXlFLEVBQVk1bEQsRUFBUW1pQixHQUU3RSxHQURBeGlDLEVBQWdCaE0sRUFBWSxFQUFHaXlFLEdBQzNCQSxhQUFzQnpDLEdBQWtCLENBQ3hDLEdBQUluakQsRUFBT3hwQyxPQUFTLEVBQ2hCLE1BQU0sSUFBSTZsQixFQUFlakIsRUFBS0ksaUJBQWtCLGtDQUFvQzdILEVBQWEsT0FFckcsSUFBSWcyRCxFQUFPaWMsRUFDWCxJQUFLamMsRUFBSzNvQyxPQUNOLE1BQU0sSUFBSTNrQixFQUFlakIsRUFBS00sVUFBVyx1REFDcEMvSCxFQUFhLE9BRXRCLE9BQU94ZCxLQUFLNnZGLGtCQUFrQnJ5RSxFQUFZZzJELEVBQUs2YSxVQUFXcmlDLEdBRzFELElBQUk4akMsRUFBWSxDQUFDTCxHQUFZenJGLE9BQU82bEMsR0FDcEMsT0FBTzdwQyxLQUFLK3ZGLGdCQUFnQnZ5RSxFQUFZc3lFLEVBQVc5akMsSUFjM0RqRCxFQUFNMXBELFVBQVV3d0Ysa0JBQW9CLFNBQVVyeUUsRUFBWSt1QixFQUFLeWYsR0FTM0QsSUFSQSxJQUFJNzBDLEVBQWEsR0FRUnhNLEVBQUssRUFBR00sRUFBS2pMLEtBQUs4dUYsT0FBT3BtQyxRQUFTLzlDLEVBQUtNLEVBQUc1SyxPQUFRc0ssSUFBTSxDQUM3RCxJQUFJKzlDLEVBQVV6OUMsRUFBR04sR0FDakIsR0FBSSs5QyxFQUFRcmUsTUFBTXZiLGFBQ2QzWCxFQUFXMVQsS0FBSyxJQUFJd3JDLEdBQVNqdkMsS0FBS21zRixVQUFVckIsWUFBYXYrQyxFQUFJdnRDLFVBRTVELENBQ0QsSUFBSU4sRUFBUTZ0QyxFQUFJbEMsTUFBTXFlLEVBQVFyZSxPQUM5QixHQUFJM3JDLGFBQWlCcXdDLEdBQ2pCLE1BQU0sSUFBSTdvQixFQUFlakIsRUFBS0ksaUJBQWtCLCtGQUU1Q3FqQyxFQUFRcmUsTUFDUiwySEFHSCxHQUFjLE9BQVYzckMsRUFHSixDQUNELElBQUkyckMsRUFBUXFlLEVBQVFyZSxNQUFNOWIsa0JBQzFCLE1BQU0sSUFBSXJJLEVBQWVqQixFQUFLSSxpQkFBa0IsK0ZBQ1JnbEIsRUFBUSwyQ0FMaERsekIsRUFBVzFULEtBQUsvRSxJQVU1QixPQUFPLElBQUlxdEQsR0FBTTUwQyxFQUFZNjBDLElBS2pDakQsRUFBTTFwRCxVQUFVMHdGLGdCQUFrQixTQUFVdnlFLEVBQVluSSxFQUFRMjJDLEdBRTVELElBQUl0RCxFQUFVMW9ELEtBQUs4dUYsT0FBTzlsQyxnQkFDMUIsR0FBSTN6QyxFQUFPaFYsT0FBU3FvRCxFQUFRcm9ELE9BQ3hCLE1BQU0sSUFBSTZsQixFQUFlakIsRUFBS0ksaUJBQWtCLGtDQUFvQzdILEVBQWEsbUdBS3JHLElBREEsSUFBSXJHLEVBQWEsR0FDUjFaLEVBQUksRUFBR0EsRUFBSTRYLEVBQU9oVixPQUFRNUMsSUFBSyxDQUNwQyxJQUFJdXlGLEVBQVczNkUsRUFBTzVYLEdBRXRCLEdBRHVCaXJELEVBQVFqckQsR0FDVjRzQyxNQUFNdmIsYUFBYyxDQUNyQyxHQUF3QixpQkFBYmtoRSxFQUNQLE1BQU0sSUFBSTlwRSxFQUFlakIsRUFBS0ksaUJBQWtCLHVEQUMzQzdILEVBQWEsd0JBQTBCd3lFLEdBRWhELElBQUtod0YsS0FBSzh1RixPQUFPanFELDJCQUNjLElBQTNCbXJELEVBQVN2dkYsUUFBUSxLQUNqQixNQUFNLElBQUl5bEIsRUFBZWpCLEVBQUtJLGlCQUFrQix5R0FDbEI3SCxFQUFhLHdDQUNoQ3d5RSxFQUFXLHVCQUUxQixJQUFJdmhFLEVBQU96dUIsS0FBSzh1RixPQUFPcmdFLEtBQUtwQixNQUFNaUIsR0FBYUUsV0FBV3doRSxJQUMxRCxJQUFLNWdFLEdBQVlDLGNBQWNaLEdBQzNCLE1BQU0sSUFBSXZJLEVBQWVqQixFQUFLSSxpQkFBa0IsK0dBQ003SCxFQUFhLGlEQUMvQmlSLEVBQU8sMkRBRy9DLElBQUl6dkIsRUFBTSxJQUFJb3dCLEdBQVlYLEdBQzFCdFgsRUFBVzFULEtBQUssSUFBSXdyQyxHQUFTanZDLEtBQUttc0YsVUFBVXJCLFlBQWE5ckYsUUFFeEQsQ0FDRCxJQUFJaXhGLEVBQVVqd0YsS0FBS21zRixVQUFVZixlQUFlbEMsZ0JBQWdCMXJFLEVBQVl3eUUsR0FDeEU3NEUsRUFBVzFULEtBQUt3c0YsSUFHeEIsT0FBTyxJQUFJbGtDLEdBQU01MEMsRUFBWTYwQyxJQUVqQ2pELEVBQU0xcEQsVUFBVXN1RixXQUFhLFdBRXpCLElBREEsSUFBSXIrRSxFQUFPLEdBQ0YzRSxFQUFLLEVBQUdBLEVBQUt2SyxVQUFVQyxPQUFRc0ssSUFDcEMyRSxFQUFLM0UsR0FBTXZLLFVBQVV1SyxHQUV6QjBjLEVBQTRCLG1CQUFvQmpuQixVQUFXLEVBQUcsR0FDOUQsSUFDSTBOLEVBREF3RyxFQUFVLEdBRVZzNUUsRUFBVSxFQXdCZCxNQXZCNkIsaUJBQWxCdCtFLEVBQUtzK0UsSUFDWGxJLEdBQWtCcDJFLEVBQUtzK0UsTUFFeEJua0UsRUFBb0IsbUJBRHBCblYsRUFBVWhGLEVBQUtzK0UsR0FDa0MsQ0FDN0MsMkJBRUo3bEUsRUFBMEIsbUJBQW9CLFVBQVcseUJBQTBCelQsRUFBUW0vRCx3QkFDM0ZtYSxLQUVBbEksR0FBa0JwMkUsRUFBS3MrRSxJQUN2QjkvRSxFQUFXd0IsRUFBS3MrRSxJQUdoQnJtRSxFQUFnQixtQkFBb0IsV0FBWXFtRSxFQUFTdCtFLEVBQUtzK0UsSUFDOURobUUsRUFBd0IsbUJBQW9CLFdBQVlnbUUsRUFBVSxFQUFHdCtFLEVBQUtzK0UsRUFBVSxJQUNwRmhtRSxFQUF3QixtQkFBb0IsV0FBWWdtRSxFQUFVLEVBQUd0K0UsRUFBS3MrRSxFQUFVLElBQ3BGOS9FLEVBQVcsQ0FDUDFMLEtBQU1rTixFQUFLcytFLEdBQ1g5cEYsTUFBT3dMLEVBQUtzK0UsRUFBVSxHQUN0QjUvRSxTQUFVc0IsRUFBS3MrRSxFQUFVLEtBR2pDNXRGLEtBQUtrd0YseUNBQXlDbHdGLEtBQUs4dUYsUUFDNUM5dUYsS0FBSzh0RixtQkFBbUJ4NUUsRUFBU3hHLElBRTVDaTdDLEVBQU0xcEQsVUFBVXl1RixtQkFBcUIsU0FBVXg1RSxFQUFTeEcsR0FDcEQsSUFBSXBFLEVBQVExSixLQUNSK3RGLEVBQWEsU0FBVWovRSxHQUN2QjVGLFFBQVFwRixNQUFNLGdDQUFpQ2dMLElBRS9DaEIsRUFBU2hLLFFBQ1RpcUYsRUFBYWpnRixFQUFTaEssTUFBTTdFLEtBQUs2TyxJQUVyQyxJQUFJaStFLEVBQWdCLElBQUk1SSxHQUFjLENBQ2xDL2dGLEtBQU0sU0FBVUUsR0FDUndMLEVBQVMxTCxNQUNUMEwsRUFBUzFMLEtBQUssSUFBSSt0RixHQUFjem1GLEVBQU15aUYsVUFBV3ppRixFQUFNb2xGLE9BQVF4c0YsRUFBUW9ILEVBQU11akYsY0FHckZucEYsTUFBT2lxRixJQUVQcUMsRUFBa0Jwd0YsS0FBS21zRixVQUFVdkIseUJBQ2pDb0QsRUFBbUJvQyxFQUFnQjduQixPQUFPdm9FLEtBQUs4dUYsT0FBUS9DLEVBQWV6M0UsR0FDMUUsT0FBTyxXQUNIeTNFLEVBQWN6SSxPQUNkOE0sRUFBZ0IzbkIsU0FBU3VsQixLQUdqQ2psQyxFQUFNMXBELFVBQVU2d0YseUNBQTJDLFNBQVVoeUUsR0FDakUsR0FBSUEsRUFBTXd0QyxrQkFBcUQsSUFBakN4dEMsRUFBTThxQyxnQkFBZ0Izb0QsT0FDaEQsTUFBTSxJQUFJNmxCLEVBQWVqQixFQUFLYyxjQUFlLDJFQUdyRGdqQyxFQUFNMXBELFVBQVVmLElBQU0sU0FBVWdXLEdBQzVCLElBQUk1SyxFQUFRMUosS0FJWixPQUhBcW5CLEVBQTRCLFlBQWFqbkIsVUFBVyxFQUFHLEdBQ3ZENnRGLEdBQW1CLFlBQWEzNUUsR0FDaEN0VSxLQUFLa3dGLHlDQUF5Q2x3RixLQUFLOHVGLFFBQzVDLElBQUkvc0YsU0FBUSxTQUFVQyxFQUFTQyxHQUM5QnFTLEdBQThCLFVBQW5CQSxFQUFRbEwsT0FDbkJNLEVBQU15aUYsVUFDRHZCLHlCQUNBMUgsMkJBQTJCeDVFLEVBQU1vbEYsUUFDakN0c0YsTUFBSyxTQUFVMHZFLEdBQ2hCbHdFLEVBQVEsSUFBSW11RixHQUFjem1GLEVBQU15aUYsVUFBV3ppRixFQUFNb2xGLE9BQVE1YyxFQUFVeG9FLEVBQU11akYsZUFDMUVockYsR0FHSHlILEVBQU13a0YsdUJBQXVCbHNGLEVBQVNDLEVBQVFxUyxPQUkxRHkwQyxFQUFNMXBELFVBQVU2dUYsdUJBQXlCLFNBQVVsc0YsRUFBU0MsRUFBUXFTLEdBQ2hFLElBQUltMEQsRUFBV3pvRSxLQUFLOHRGLG1CQUFtQixDQUNuQ3JhLHdCQUF3QixFQUN4QkssdUJBQXVCLEdBQ3hCLENBQ0MxeEUsS0FBTSxTQUFVRSxHQUdabW1FLElBQ0lubUUsRUFBT2IsU0FBU3V6RCxXQUNoQjFnRCxHQUNtQixXQUFuQkEsRUFBUWxMLE9BQ1JuSCxFQUFPLElBQUlpa0IsRUFBZWpCLEVBQUtlLFlBQWEsaUxBTTVDaGtCLEVBQVFNLElBR2hCd0IsTUFBTzdCLEtBUWY4bUQsRUFBTTFwRCxVQUFVK3ZGLHFCQUF1QixTQUFVaUIsR0FDN0MsR0FBK0IsaUJBQXBCQSxFQUE4QixDQUNyQyxHQUF3QixLQUFwQkEsRUFDQSxNQUFNLElBQUlucUUsRUFBZWpCLEVBQUtJLGlCQUFrQiwrSEFHcEQsSUFBS3JsQixLQUFLOHVGLE9BQU9qcUQsMkJBQ3FCLElBQWxDd3JELEVBQWdCNXZGLFFBQVEsS0FDeEIsTUFBTSxJQUFJeWxCLEVBQWVqQixFQUFLSSxpQkFBa0IsbUhBRXJDZ3JFLEVBQWtCLCtCQUVqQyxJQUFJNWhFLEVBQU96dUIsS0FBSzh1RixPQUFPcmdFLEtBQUtwQixNQUFNaUIsR0FBYUUsV0FBVzZoRSxJQUMxRCxJQUFLamhFLEdBQVlDLGNBQWNaLEdBQzNCLE1BQU0sSUFBSXZJLEVBQWVqQixFQUFLSSxpQkFBa0IsNElBRWpDb0osRUFBTyxzREFBd0RBLEVBQUtwdUIsT0FBUyxNQUVoRyxPQUFPLElBQUk0dUMsR0FBU2p2QyxLQUFLbXNGLFVBQVVyQixZQUFhLElBQUkxN0QsR0FBWVgsSUFFL0QsR0FBSTRoRSxhQUEyQnJFLEdBQW1CLENBQ25ELElBQUlsN0IsRUFBTXUvQixFQUNWLE9BQU8sSUFBSXBoRCxHQUFTanZDLEtBQUttc0YsVUFBVXJCLFlBQWFoNkIsRUFBSXM3QixNQUdwRCxNQUFNLElBQUlsbUUsRUFBZWpCLEVBQUtJLGlCQUFrQixpSUFFM0M4QyxFQUFpQmtvRSxHQUFtQixNQU9qRHRuQyxFQUFNMXBELFVBQVU2dkYsa0NBQW9DLFNBQVV4d0YsRUFBT3V3RixHQUNqRSxJQUFLcHZGLE1BQU1vSCxRQUFRdkksSUFBMkIsSUFBakJBLEVBQU0yQixPQUMvQixNQUFNLElBQUk2bEIsRUFBZWpCLEVBQUtJLGlCQUFrQixxREFDckM0cEUsRUFBU3pqRixXQUFhLGNBRXJDLEdBQUk5TSxFQUFNMkIsT0FBUyxHQUNmLE1BQU0sSUFBSTZsQixFQUFlakIsRUFBS0ksaUJBQWtCLG1CQUFxQjRwRSxFQUFTempGLFdBQWEsa0VBRy9GLEdBQUk5TSxFQUFNK0IsUUFBUSxPQUFTLEVBQ3ZCLE1BQU0sSUFBSXlsQixFQUFlakIsRUFBS0ksaUJBQWtCLG1CQUFxQjRwRSxFQUFTempGLFdBQWEsdURBRy9GLEdBQUk5TSxFQUFNNlcsUUFBTyxTQUFVd1QsR0FBVyxPQUFPbkMsT0FBT0MsTUFBTWtDLE1BQWExb0IsT0FBUyxFQUM1RSxNQUFNLElBQUk2bEIsRUFBZWpCLEVBQUtJLGlCQUFrQixtQkFBcUI0cEUsRUFBU3pqRixXQUFhLHVEQUluR3U5QyxFQUFNMXBELFVBQVVnd0Ysa0JBQW9CLFNBQVU5NUUsR0FDMUMsR0FBSUEsYUFBa0I2MEMsR0FBYSxDQUMvQixJQUFJa21DLEVBQVcsQ0FBQ2xrQyxHQUFTTSxlQUFnQk4sR0FBU1Esb0JBQzlDMmpDLEVBQWlCLENBQUNua0MsR0FBU08sR0FBSVAsR0FBU1Esb0JBQ3hDNGpDLEVBQVlGLEVBQVM3dkYsUUFBUThVLEVBQU9qUyxLQUFPLEVBQzNDbXRGLEVBQWtCRixFQUFlOXZGLFFBQVE4VSxFQUFPalMsS0FBTyxFQUMzRCxHQUFJaVMsRUFBTzgwQyxlQUFnQixDQUN2QixJQUFJcW1DLEVBQWdCMXdGLEtBQUs4dUYsT0FBT3RsQywyQkFDaEMsR0FBc0IsT0FBbEJrbkMsSUFBMkJBLEVBQWNwbUUsUUFBUS9VLEVBQU84MEIsT0FDeEQsTUFBTSxJQUFJbmtCLEVBQWVqQixFQUFLSSxpQkFBa0Isd0lBRWRxckUsRUFBY2xsRixXQUFhLFVBQzdDK0osRUFBTzgwQixNQUFNNytCLFdBQWEsS0FFOUMsSUFBSWkrQyxFQUFvQnpwRCxLQUFLOHVGLE9BQU9wbEMsdUJBQ1YsT0FBdEJELEdBQ0F6cEQsS0FBSzJ3RixrQ0FBa0NwN0UsRUFBTzgwQixNQUFPb2YsUUFHeEQsR0FBSWduQyxHQUFtQkQsRUFBVyxDQUduQyxJQUFJSSxFQUFnQixLQU9wQixHQU5JSCxJQUNBRyxFQUFnQjV3RixLQUFLOHVGLE9BQU9uakMsbUJBQW1CNGtDLElBRTdCLE9BQWxCSyxHQUEwQkosSUFDMUJJLEVBQWdCNXdGLEtBQUs4dUYsT0FBT25qQyxtQkFBbUIya0MsSUFFOUIsTUFBakJNLEVBRUEsTUFBSUEsSUFBa0JyN0UsRUFBT2pTLEdBQ25CLElBQUk0aUIsRUFBZWpCLEVBQUtJLGlCQUFrQixnREFDckM5UCxFQUFPalMsR0FBR2tJLFdBQWEsYUFHNUIsSUFBSTBhLEVBQWVqQixFQUFLSSxpQkFBa0Isa0NBQW9DOVAsRUFBT2pTLEdBQUdrSSxXQUFhLG1CQUMzRm9sRixFQUFjcGxGLFdBQWEsaUJBTS9EdTlDLEVBQU0xcEQsVUFBVWt3RixtQkFBcUIsU0FBVTdtQyxHQUMzQyxHQUEyQyxPQUF2QzFvRCxLQUFLOHVGLE9BQU9wbEMsdUJBQWlDLENBRTdDLElBQUlILEVBQWtCdnBELEtBQUs4dUYsT0FBT3RsQywyQkFDVixPQUFwQkQsR0FDQXZwRCxLQUFLMndGLGtDQUFrQ3BuQyxFQUFpQmIsRUFBUXJlLFNBSTVFMGUsRUFBTTFwRCxVQUFVc3hGLGtDQUFvQyxTQUFVRSxFQUFZbm9DLEdBQ3RFLElBQUtBLEVBQVFwK0IsUUFBUXVtRSxHQUNqQixNQUFNLElBQUkzcUUsRUFBZWpCLEVBQUtJLGlCQUFrQix5RkFDVndyRSxFQUFXcmxGLFdBQWEsK0JBQzFCcWxGLEVBQVdybEYsV0FBYSxnRkFFckNrOUMsRUFBUWw5QyxXQUFhLGVBRzdDdTlDLEVBNWRpQixHQThkeEJvbkMsR0FBK0IsV0FDL0IsU0FBU0EsRUFBY3ZELEVBQVlrRSxFQUFnQkMsRUFBVzlELEdBQzFEanRGLEtBQUs0c0YsV0FBYUEsRUFDbEI1c0YsS0FBSzh3RixlQUFpQkEsRUFDdEI5d0YsS0FBSyt3RixVQUFZQSxFQUNqQi93RixLQUFLaXRGLFdBQWFBLEVBQ2xCanRGLEtBQUtneEYsZUFBaUIsS0FDdEJoeEYsS0FBS2l4RixxQ0FBdUMsS0FDNUNqeEYsS0FBS3lCLFNBQVcsSUFBSTJzRixHQUFpQjJDLEVBQVVuaUMsaUJBQWtCbWlDLEVBQVUvN0IsV0F3RS9FLE9BdEVBNzJELE9BQU9DLGVBQWUreEYsRUFBYzl3RixVQUFXLE9BQVEsQ0FDbkRmLElBQUssV0FDRCxJQUFJZ0UsRUFBUyxHQUViLE9BREF0QyxLQUFLd1IsU0FBUSxTQUFVKzZCLEdBQU8sT0FBT2pxQyxFQUFPbUIsS0FBSzhvQyxNQUMxQ2pxQyxHQUVYakUsWUFBWSxFQUNaa1osY0FBYyxJQUVsQnBaLE9BQU9DLGVBQWUreEYsRUFBYzl3RixVQUFXLFFBQVMsQ0FDcERmLElBQUssV0FDRCxPQUFPMEIsS0FBSyt3RixVQUFVMWhDLEtBQUtyL0MsV0FFL0IzUixZQUFZLEVBQ1prWixjQUFjLElBRWxCcFosT0FBT0MsZUFBZSt4RixFQUFjOXdGLFVBQVcsT0FBUSxDQUNuRGYsSUFBSyxXQUNELE9BQU8wQixLQUFLK3dGLFVBQVUxaEMsS0FBSzFoQyxNQUUvQnR2QixZQUFZLEVBQ1prWixjQUFjLElBRWxCNDRFLEVBQWM5d0YsVUFBVW1TLFFBQVUsU0FBVTNILEVBQVVsSSxHQUNsRCxJQUFJK0gsRUFBUTFKLEtBQ1pxbkIsRUFBNEIsd0JBQXlCam5CLFVBQVcsRUFBRyxHQUNuRW1uQixFQUFnQix3QkFBeUIsV0FBWSxFQUFHMWQsR0FDeEQ3SixLQUFLK3dGLFVBQVUxaEMsS0FBSzc5QyxTQUFRLFNBQVUrNkIsR0FDbEMxaUMsRUFBU2pNLEtBQUsrRCxFQUFTK0gsRUFBTXduRixzQkFBc0Iza0QsUUFHM0RwdUMsT0FBT0MsZUFBZSt4RixFQUFjOXdGLFVBQVcsUUFBUyxDQUNwRGYsSUFBSyxXQUNELE9BQU8sSUFBSWt1RixHQUFReHNGLEtBQUs4d0YsZUFBZ0I5d0YsS0FBSzRzRixXQUFZNXNGLEtBQUtpdEYsYUFFbEU1dUYsWUFBWSxFQUNaa1osY0FBYyxJQUVsQjQ0RSxFQUFjOXdGLFVBQVVrakUsV0FBYSxTQUFVanVELEdBQ3ZDQSxJQUNBbVYsRUFBb0IsMkJBQTRCblYsRUFBUyxDQUNyRCwyQkFFSnlULEVBQTBCLDJCQUE0QixVQUFXLHlCQUEwQnpULEVBQVFtL0QseUJBRXZHLElBQUlBLEtBQTRCbi9ELElBQVdBLEVBQVFtL0Qsd0JBQ25ELEdBQUlBLEdBQTBCenpFLEtBQUsrd0YsVUFBVXJ1Qix3QkFDekMsTUFBTSxJQUFJeDhDLEVBQWVqQixFQUFLSSxpQkFBa0IsK0hBUXBELE9BTEtybEIsS0FBS2d4RixnQkFDTmh4RixLQUFLaXhGLHVDQUF5Q3hkLElBQzlDenpFLEtBQUtneEYsZUFtS2pCLFNBQTZCN0UsRUFBVzFZLEVBQXdCM1csRUFBVXZzQixHQUN0RSxHQUFJdXNCLEVBQVN3RixRQUFRdHlELFVBQVcsQ0FHNUIsSUFBSW1oRixFQUNBQyxFQUFVLEVBQ2QsT0FBT3QwQixFQUFTeUYsV0FBV3R4RCxLQUFJLFNBQVU2aUQsR0FDckMsSUFBSXZuQixFQUFNLElBQUlraUQsR0FBc0J0QyxFQUFXcjRCLEVBQU92bkIsSUFBSXZ0QyxJQUFLODBELEVBQU92bkIsSUFBS3V3QixFQUFTOUgsVUFBVzhILEVBQVMwRixZQUFZeHVELElBQUk4L0MsRUFBT3ZuQixJQUFJdnRDLEtBQU11eEMsR0FJekksT0FIQTFxQyxFQUFPaXVELEVBQU9oaEQsT0FBU2t1RCxHQUFXZ0IsTUFBTyx5Q0FDekNuOEQsR0FBUXNyRixHQUFhcjBCLEVBQVM1K0MsTUFBTStzQyxjQUFja21DLEVBQVdyOUIsRUFBT3ZuQixLQUFPLEVBQUcsbUNBQzlFNGtELEVBQVlyOUIsRUFBT3ZuQixJQUNaLENBQ0h6NUIsS0FBTSxRQUNOeTVCLElBQUtBLEVBQ0w4a0QsVUFBVyxFQUNYQyxTQUFVRixRQU9sQixJQUFJRyxFQUFpQnowQixFQUFTd0YsUUFDOUIsT0FBT3hGLEVBQVN5RixXQUNYaHRELFFBQU8sU0FBVXUrQyxHQUFVLE9BQU8yZixHQUEwQjNmLEVBQU9oaEQsT0FBU2t1RCxHQUFXaUIsWUFDdkZoeEQsS0FBSSxTQUFVNmlELEdBQ2YsSUFBSXZuQixFQUFNLElBQUlraUQsR0FBc0J0QyxFQUFXcjRCLEVBQU92bkIsSUFBSXZ0QyxJQUFLODBELEVBQU92bkIsSUFBS3V3QixFQUFTOUgsVUFBVzhILEVBQVMwRixZQUFZeHVELElBQUk4L0MsRUFBT3ZuQixJQUFJdnRDLEtBQU11eEMsR0FDckk4Z0QsR0FBWSxFQUNaQyxHQUFZLEVBVWhCLE9BVEl4OUIsRUFBT2hoRCxPQUFTa3VELEdBQVdnQixRQUUzQm44RCxHQURBd3JGLEVBQVdFLEVBQWU5d0YsUUFBUXF6RCxFQUFPdm5CLElBQUl2dEMsT0FDMUIsRUFBRyxnQ0FDdEJ1eUYsRUFBaUJBLEVBQWVyOEUsT0FBTzQrQyxFQUFPdm5CLElBQUl2dEMsTUFFbEQ4MEQsRUFBT2hoRCxPQUFTa3VELEdBQVdrQixVQUUzQm92QixHQURBQyxFQUFpQkEsRUFBZXQ2RCxJQUFJNjhCLEVBQU92bkIsTUFDakI5ckMsUUFBUXF6RCxFQUFPdm5CLElBQUl2dEMsTUFFMUMsQ0FBRThULEtBQU0wK0UsR0FBaUIxOUIsRUFBT2hoRCxNQUFPeTVCLElBQUtBLEVBQUs4a0QsU0FBVUEsRUFBVUMsU0FBVUEsTUF6TWhFRyxDQUFvQnp4RixLQUFLNHNGLFdBQVluWixFQUF3Qnp6RSxLQUFLK3dGLFVBQVcvd0YsS0FBS2l0RixZQUN4R2p0RixLQUFLaXhGLHFDQUF1Q3hkLEdBRXpDenpFLEtBQUtneEYsZ0JBR2hCYixFQUFjOXdGLFVBQVVpckIsUUFBVSxTQUFVaUIsR0FDeEMsS0FBTUEsYUFBaUI0a0UsR0FDbkIsTUFBTXhtRSxFQUFrQixVQUFXLGdCQUFpQixFQUFHNEIsR0FFM0QsT0FBUXZyQixLQUFLNHNGLGFBQWVyaEUsRUFBTXFoRSxZQUM5QjVzRixLQUFLOHdGLGVBQWV4bUUsUUFBUWlCLEVBQU11bEUsaUJBQ2xDOXdGLEtBQUsrd0YsVUFBVXptRSxRQUFRaUIsRUFBTXdsRSxZQUM3Qi93RixLQUFLaXRGLGFBQWUxaEUsRUFBTTBoRSxZQUVsQ2tELEVBQWM5d0YsVUFBVTZ4RixzQkFBd0IsU0FBVTNrRCxHQUN0RCxPQUFPLElBQUlraUQsR0FBc0J6dUYsS0FBSzRzRixXQUFZcmdELEVBQUl2dEMsSUFBS3V0QyxFQUFLdnNDLEtBQUt5QixTQUFTdXpELFVBQVdoMUQsS0FBSyt3RixVQUFVdnVCLFlBQVl4dUQsSUFBSXU0QixFQUFJdnRDLEtBQU1nQixLQUFLaXRGLGFBRXBJa0QsRUFoRnVCLEdBNkZHM3FGLEVBQU12QixlQUFlLENBQ3RELFNBQ0EsVUFDQSxPQUNrQixvQkFBWHpGLE9BQXlCLENBQUNBLE9BQU80RSxVQUFZLElBQ3pCb08sU0FBUSxTQUFVcFMsR0FRN0MsSUFDSWpCLE9BQU9DLGVBQWUreEYsR0FBYzl3RixVQUFVa2pFLFdBQVluakUsRUFBVSxDQUNoRWQsSUFBSyxXQUFjLE9BcEIvQixXQUNJLE1BQU0sSUFBSTRuQixFQUFlakIsRUFBS0ksaUJBQWtCLGlLQW1CZHFzRSxNQUdsQyxNQUFPNWlGLFFBRVgsSUFBSXc5RSxHQUFxQyxTQUFVbmlGLEdBRS9DLFNBQVNtaUYsRUFBb0JxRixFQUFPeEYsRUFBV2MsR0FDM0MsSUFBSXZqRixFQUFRUyxFQUFPdk0sS0FBS29DLEtBQU0rb0QsR0FBTU8sT0FBT3FvQyxHQUFReEYsRUFBV2MsSUFBZWp0RixLQUU3RSxHQURBMEosRUFBTWlvRixNQUFRQSxFQUNWQSxFQUFNdHhGLE9BQVMsR0FBTSxFQUNyQixNQUFNLElBQUk2bEIsRUFBZWpCLEVBQUtJLGlCQUFrQixnR0FFM0Nzc0UsRUFBTXBqRSxrQkFBb0IsUUFBVW9qRSxFQUFNdHhGLFFBRW5ELE9BQU9xSixFQW9EWCxPQTdEQWxFLEVBQU0xRixVQUFVd3NGLEVBQXFCbmlGLEdBV3JDaE0sT0FBT0MsZUFBZWt1RixFQUFvQmp0RixVQUFXLEtBQU0sQ0FDdkRmLElBQUssV0FDRCxPQUFPMEIsS0FBSzh1RixPQUFPcmdFLEtBQUtYLGVBRTVCenZCLFlBQVksRUFDWmtaLGNBQWMsSUFFbEJwWixPQUFPQyxlQUFla3VGLEVBQW9CanRGLFVBQVcsU0FBVSxDQUMzRGYsSUFBSyxXQUNELElBQUkwM0MsRUFBYWgyQyxLQUFLOHVGLE9BQU9yZ0UsS0FBS2IsVUFDbEMsT0FBSW9vQixFQUFXaG1DLFVBQ0osS0FHQSxJQUFJZzhFLEdBQWtCLElBQUk1OEQsR0FBWTRtQixHQUFhaDJDLEtBQUttc0YsWUFHdkU5dEYsWUFBWSxFQUNaa1osY0FBYyxJQUVsQnBaLE9BQU9DLGVBQWVrdUYsRUFBb0JqdEYsVUFBVyxPQUFRLENBQ3pEZixJQUFLLFdBQ0QsT0FBTzBCLEtBQUs4dUYsT0FBT3JnRSxLQUFLRixtQkFFNUJsd0IsWUFBWSxFQUNaa1osY0FBYyxJQUVsQiswRSxFQUFvQmp0RixVQUFVa3RDLElBQU0sU0FBVTgvQyxHQVExQyxHQVBBaGxFLEVBQTRCLDBCQUEyQmpuQixVQUFXLEVBQUcsR0FHNUMsSUFBckJBLFVBQVVDLFNBQ1Znc0YsRUFBYXhpRSxFQUFPQyxTQUV4QnZDLEVBQWdCLDBCQUEyQixtQkFBb0IsRUFBRzhrRSxHQUMvQyxLQUFmQSxFQUNBLE1BQU0sSUFBSW5tRSxFQUFlakIsRUFBS0ksaUJBQWtCLDRDQUVwRCxJQUFJb0osRUFBT0gsR0FBYUUsV0FBVzY5RCxHQUNuQyxPQUFPTCxHQUFrQk8sUUFBUXZzRixLQUFLOHVGLE9BQU9yZ0UsS0FBS3BCLE1BQU1vQixHQUFPenVCLEtBQUttc0YsVUFBV25zRixLQUFLaXRGLGFBRXhGWCxFQUFvQmp0RixVQUFVNDNCLElBQU0sU0FBVXY0QixHQUMxQ3VvQixFQUEwQiwwQkFBMkI3bUIsVUFBVyxHQUNoRW1uQixFQUFnQiwwQkFBMkIsU0FBVSxFQUFHN29CLEdBQ3hELElBQUlrekYsRUFBUzV4RixLQUFLdXNDLE1BQ2xCLE9BQU9xbEQsRUFBTzE5RSxJQUFJeFYsR0FBTzhELE1BQUssV0FBYyxPQUFPb3ZGLE1BRXZEdEYsRUFBb0JqdEYsVUFBVTh1RixjQUFnQixTQUFVNTlDLEdBQ3BELE9BQU8sSUFBSSs3QyxFQUFvQnRzRixLQUFLMnhGLE1BQU8zeEYsS0FBS21zRixVQUFXNTdDLElBRXhEKzdDLEVBOUQ2QixDQStEdENFLElBQ0YsU0FBU1UsR0FBbUIxdkUsRUFBWWxKLEdBQ3BDLFFBQWdCL0ssSUFBWitLLEVBQ0EsTUFBTyxDQUNIKzRFLE9BQU8sR0FRZixHQUxBNWpFLEVBQW9Cak0sRUFBWWxKLEVBQVMsQ0FBQyxRQUFTLGdCQUNuRHlULEVBQTBCdkssRUFBWSxVQUFXLFFBQVNsSixFQUFRKzRFLE9BQ2xFcmxFLEVBQThCeEssRUFBWSxjQUFlLDBCQUEyQmxKLEVBQVFnNUUsYUFBYSxTQUFVdmtFLEdBQy9HLE1BQTBCLGlCQUFaQSxHQUF3QkEsYUFBbUJ5NkQsV0FFakNqNkUsSUFBeEIrSyxFQUFRZzVFLGtCQUErQy9qRixJQUFsQitLLEVBQVErNEUsTUFDN0MsTUFBTSxJQUFJbm5FLEVBQWVqQixFQUFLSSxpQkFBa0Isc0NBQXdDN0gsRUFBYSwwREFHekcsT0FBT2xKLEVBRVgsU0FBU2s2RSxHQUF3Qmh4RSxFQUFZbEosR0FDekMsWUFBZ0IvSyxJQUFaK0ssRUFDTyxJQUVYbVYsRUFBb0JqTSxFQUFZbEosRUFBUyxDQUFDLHFCQUMxQytULEVBQW9DN0ssRUFBWSxFQUFXLG1CQUFvQmxKLEVBQVFrNUIsaUJBQWtCLENBQUMsV0FBWSxXQUFZLFNBQzNIbDVCLEdBRVgsU0FBUzI1RSxHQUFtQnp3RSxFQUFZbEosR0FDcENzVCxFQUF3QnBLLEVBQVksU0FBVSxFQUFHbEosR0FDN0NBLElBQ0FtVixFQUFvQmpNLEVBQVlsSixFQUFTLENBQUMsV0FDMUMrVCxFQUFvQzdLLEVBQVksRUFBVyxTQUFVbEosRUFBUWxMLE9BQVEsQ0FBQyxVQUFXLFNBQVUsV0FHbkgsU0FBUzJqRixHQUFrQnZ2RSxFQUFZc3ZFLEVBQWFYLEdBQ2hELEdBQU1XLGFBQXVCZCxHQUd4QixJQUFJYyxFQUFZWCxZQUFjQSxFQUMvQixNQUFNLElBQUlqbUUsRUFBZWpCLEVBQUtJLGlCQUFrQix1RUFHaEQsT0FBT3luRSxFQU5QLE1BQU1uakUsRUFBa0JuTSxFQUFZLG9CQUFxQixFQUFHc3ZFLEdBd0RwRSxTQUFTMEUsR0FBaUIxK0UsR0FDdEIsT0FBUUEsR0FDSixLQUFLa3VELEdBQVdnQixNQUNaLE1BQU8sUUFDWCxLQUFLaEIsR0FBV21CLFNBQ2hCLEtBQUtuQixHQUFXaUIsU0FDWixNQUFPLFdBQ1gsS0FBS2pCLEdBQVdrQixRQUNaLE1BQU8sVUFDWCxRQUNJLE9BQU9yOUMsRUFBSyx3QkFBMEIvUixJQVlsRCxTQUFTcTZFLEdBQTRCNThDLEVBQVc3eEMsRUFBT3FvQixHQUNuRCxJQUFJcW1FLEVBUUosT0FQSTc4QyxHQUNBNjhDLEVBQWlCNzhDLEVBQVVzaEQsWUFBWW56RixHQUN2Q3FvQixFQUFlLG9CQUFzQkEsR0FHckNxbUUsRUFBaUIxdUYsRUFFZCxDQUFDMHVGLEVBQWdCcm1FLEdBTTVCLElBQUkrcUUsR0FBa0IzckUsRUFBdUJxa0UsR0FBVyxxQ0FDcER1SCxHQUFvQjVyRSxFQUF1QnNtRSxHQUFlLHNEQUMxRHVGLEdBQW1CN3JFLEVBQXVCdW1FLEdBQVksNkNBQ3REdUYsR0FBMEI5ckUsRUFBdUI2bEUsR0FBbUIsMkNBQ3BFa0csR0FBeUIvckUsRUFBdUI2bUUsSUFDaERtRixHQUE4QmhzRSxFQUF1QnNvRSxJQUNyRDJELEdBQWNqc0UsRUFBdUJxbUUsSUFDckM2RixHQUFzQmxzRSxFQUF1QmdxRSxJQUM3Q21DLEdBQTRCbnNFLEVBQXVCbW1FLEdBQXFCLGtEQWtCeEVpRyxHQUFxQixDQUNyQi9ILFVBQVdzSCxHQUNYL25CLFNBQVVBLEdBQ1Y1MkMsVUFBV0EsR0FDWHRJLEtBQU1ZLEdBQ045TyxZQUFhbzFFLEdBQ2JyRixXQUFZc0YsR0FDWmhHLGtCQUFtQmlHLEdBQ25CakYsaUJBQWtCa0YsR0FDbEJucEMsTUFBT3FwQyxHQUNQM0Qsc0JBQXVCMEQsR0FDdkJoQyxjQUFla0MsR0FDZi9GLG9CQUFxQmdHLEdBQ3JCMWpFLFVBQVc0MEQsR0FDWDUxQyxXQUFZNDRDLEdBQ1oxckUsWUFBYTB2RSxHQUFVMXZFLFlBQ3ZCdXZFLHFCQUFzQkEsSUFLMUIsU0FBU21JLEdBQXFCeDZFLEdBQzFCQSxFQUFTeEMsU0FBU3VELGtCQUFrQixJQUFJdEYsRUFBVWIsVUFBVSxhQUFhLFNBQVVZLEdBQy9FLElBQUk4RSxFQUFNOUUsRUFBVXVDLFlBQVksT0FBTzFCLGVBQ3ZDLE9BQU8sSUFBSW0yRSxHQUFVbHlFLEVBQUs5RSxFQUFVdUMsWUFBWSxvQkFDakQsVUFBdUIzQyxnQkFuNXJCOUIsU0FBcUJqRixHQUNqQnRJLEVBQU9zSSxHQUFzQixpQkFBUkEsRUFBa0IsMkNBQ3ZDLElBQUk3TCxFQUFTLEdBQ2IsSUFBSyxJQUFJdEQsS0FBT21QLEVBQ1JoUSxPQUFPa0IsVUFBVUMsZUFBZTFCLEtBQUt1USxFQUFLblAsS0FDMUNzRCxFQUFPdEQsR0FBT21QLEVBQUluUCxJQUcxQixPQUFPc0QsRUEyNHJCbUNtd0YsQ0FBWUY7Ozs7Ozs7Ozs7Ozs7Ozs7R0FtQjFELElBQUlHLEdBQXlDLFdBQ3pDLFNBQVNBLEtBUVQsT0FOQUEsRUFBd0JyekYsVUFBVThuRSxZQUFjLFNBQVV0OUQsS0FHMUQ2b0YsRUFBd0JyekYsVUFBVTBsRCxTQUFXLGFBR3RDMnRDLEVBVGlDLEdBZ0N4Q0MsR0FBNEMsV0FDNUMsU0FBU0EsSUFDTCxJQUFJanBGLEVBQVExSixLQUNaQSxLQUFLNHlGLHlCQUEyQixXQUM1QixPQUFPbHBGLEVBQU1tcEYsc0JBRWpCN3lGLEtBQUs4eUYsMkJBQTZCLFdBQzlCLE9BQU9wcEYsRUFBTXFwRix3QkFFakIveUYsS0FBSys1RSxVQUFZLEdBQ2pCLzVFLEtBQUtnekYsNkJBbUNULE9BakNBTCxFQUEyQnR6RixVQUFVOG5FLFlBQWMsU0FBVXQ5RCxHQUN6RDdKLEtBQUsrNUUsVUFBVXQyRSxLQUFLb0csSUFFeEI4b0YsRUFBMkJ0ekYsVUFBVTBsRCxTQUFXLFdBQzVDNzBDLE9BQU93MkMsb0JBQW9CLFNBQVUxbUQsS0FBSzR5RiwwQkFDMUMxaUYsT0FBT3cyQyxvQkFBb0IsVUFBVzFtRCxLQUFLOHlGLDZCQUUvQ0gsRUFBMkJ0ekYsVUFBVTJ6RiwyQkFBNkIsV0FDOUQ5aUYsT0FBT3MyQyxpQkFBaUIsU0FBVXhtRCxLQUFLNHlGLDBCQUN2QzFpRixPQUFPczJDLGlCQUFpQixVQUFXeG1ELEtBQUs4eUYsNkJBRTVDSCxFQUEyQnR6RixVQUFVd3pGLG1CQUFxQixXQUN0RGw3RSxFQTVCUSxzQkE0QlMsMkNBQ2pCLElBQUssSUFBSWhOLEVBQUssRUFBR00sRUFBS2pMLEtBQUsrNUUsVUFBV3B2RSxFQUFLTSxFQUFHNUssT0FBUXNLLElBQU0sRUFFeERkLEVBRGVvQixFQUFHTixJQUNULEtBR2pCZ29GLEVBQTJCdHpGLFVBQVUwekYscUJBQXVCLFdBQ3hEcDdFLEVBbkNRLHNCQW1DUyw2Q0FDakIsSUFBSyxJQUFJaE4sRUFBSyxFQUFHTSxFQUFLakwsS0FBSys1RSxVQUFXcHZFLEVBQUtNLEVBQUc1SyxPQUFRc0ssSUFBTSxFQUV4RGQsRUFEZW9CLEVBQUdOLElBQ1QsS0FNakJnb0YsRUFBMkIxMkQsWUFBYyxXQUNyQyxNQUEwQixvQkFBWC9yQixhQUNpQjNHLElBQTVCMkcsT0FBT3MyQyx1QkFDd0JqOUMsSUFBL0IyRyxPQUFPdzJDLHFCQUVSaXNDLEVBN0NvQyxHQXFFM0NNLEdBQThCLFdBQzlCLFNBQVNBLEVBQWEzakYsR0FDbEJ0UCxLQUFLa3pGLE9BQVM1akYsRUFBSzRqRixPQUNuQmx6RixLQUFLbXpGLFFBQVU3akYsRUFBSzZqRixRQWdDeEIsT0E5QkFGLEVBQWE1ekYsVUFBVTg4RCxPQUFTLFNBQVV0eUQsR0FDdENoRSxHQUFRN0YsS0FBS296RixjQUFlLGtDQUM1QnB6RixLQUFLb3pGLGNBQWdCdnBGLEdBRXpCb3BGLEVBQWE1ekYsVUFBVXM4RCxRQUFVLFNBQVU5eEQsR0FDdkNoRSxHQUFRN0YsS0FBS3F6RixlQUFnQixtQ0FDN0JyekYsS0FBS3F6RixlQUFpQnhwRixHQUUxQm9wRixFQUFhNXpGLFVBQVUrOEQsVUFBWSxTQUFVdnlELEdBQ3pDaEUsR0FBUTdGLEtBQUtzekYsaUJBQWtCLHFDQUMvQnR6RixLQUFLc3pGLGlCQUFtQnpwRixHQUU1Qm9wRixFQUFhNXpGLFVBQVUwTyxNQUFRLFdBQzNCL04sS0FBS216RixXQUVURixFQUFhNXpGLFVBQVVrOEQsS0FBTyxTQUFVaDNDLEdBQ3BDdmtCLEtBQUtrekYsT0FBTzN1RSxJQUVoQjB1RSxFQUFhNXpGLFVBQVVrMEYsV0FBYSxXQUNoQzF0RixPQUE4QjBELElBQXZCdkosS0FBS296RixjQUE2QixrREFDekNwekYsS0FBS296RixpQkFFVEgsRUFBYTV6RixVQUFVbTBGLFlBQWMsU0FBVTFrRixHQUMzQ2pKLE9BQStCMEQsSUFBeEJ2SixLQUFLcXpGLGVBQThCLG1EQUMxQ3J6RixLQUFLcXpGLGVBQWV2a0YsSUFFeEJta0YsRUFBYTV6RixVQUFVbzBGLGNBQWdCLFNBQVVsdkUsR0FDN0MxZSxPQUFpQzBELElBQTFCdkosS0FBS3N6RixpQkFBZ0MscURBQzVDdHpGLEtBQUtzekYsaUJBQWlCL3VFLElBRW5CMHVFLEVBbkNzQixHQXNEN0JTLEdBQVksYUFPWkMsR0FBd0IsQ0FDNUIsa0JBQTZDLFdBQzdDLE9BQWtDLFVBSTlCQyxHQUEwQixlQUFpQmh1RixFQUUzQ2l1RixHQUFzQyxXQUN0QyxTQUFTQSxFQUFxQnA1RSxHQUMxQnphLEtBQUsyckIsV0FBYWxSLEVBQUtrUixXQUN2QixJQUFJMmtCLEVBQVE3MUIsRUFBS3FSLElBQU0sUUFBVSxPQUNqQzlyQixLQUFLOHpGLFFBQVV4akQsRUFBUSxNQUFRNzFCLEVBQUtvUixLQUNwQzdyQixLQUFLK3JCLGlCQUFtQnRSLEVBQUtzUixpQkF1UmpDLE9BalJBOG5FLEVBQXFCeDBGLFVBQVUwMEYsd0JBQTBCLFNBQVUxTyxFQUFTeDVFLEdBQ3hFLEdBQUlBLEVBQ0EsSUFBSyxJQUFJQyxLQUFVRCxFQUFNbzRFLFlBQ2pCcDRFLEVBQU1vNEUsWUFBWTNrRixlQUFld00sS0FDakN1NUUsRUFBUXY1RSxHQUFVRCxFQUFNbzRFLFlBQVluNEUsSUFJaER1NUUsRUFBUSxxQkFBdUJ1TyxJQUVuQ0MsRUFBcUJ4MEYsVUFBVW0vRCxVQUFZLFNBQVVNLEVBQVMxakQsRUFBU3ZQLEdBQ25FLElBQUluQyxFQUFRMUosS0FDUjhqQixFQUFNOWpCLEtBQUtnMEYsUUFBUWwxQixHQUN2QixPQUFPLElBQUkvOEQsU0FBUSxTQUFVQyxFQUFTQyxHQUNsQyxJQUFJZ3lGLEVBQU0sSUFBSWh3RSxFQUFrQml3RSxNQUNoQ0QsRUFBSUUsV0FBV2x3RSxFQUFrQm13RSxVQUFVQyxVQUFVLFdBQ2pELElBQ0ksT0FBUUosRUFBSUssb0JBQ1IsS0FBS3J3RSxFQUFrQnN3RSxVQUFVQyxTQUM3QixJQUFJQyxFQUFPUixFQUFJUyxrQkFDZi84RSxFQUFNKzdFLEdBQVcsZ0JBQWlCaG9GLEtBQUtzRyxVQUFVeWlGLElBQ2pEenlGLEVBQVF5eUYsR0FDUixNQUNKLEtBQUt4d0UsRUFBa0Jzd0UsVUFBVUksUUFDN0JoOUUsRUFBTSs3RSxHQUFXLFFBQVU1MEIsRUFBVSxlQUNyQzc4RCxFQUFPLElBQUlpa0IsRUFBZWpCLEVBQUtLLGtCQUFtQixxQkFDbEQsTUFDSixLQUFLckIsRUFBa0Jzd0UsVUFBVUssV0FDN0IsSUFBSTVjLEVBQVdpYyxFQUFJWSxZQUVuQixHQURBbDlFLEVBQU0rN0UsR0FBVyxRQUFVNTBCLEVBQVUsd0JBQXlCa1osRUFBVSxpQkFBa0JpYyxFQUFJYSxtQkFDMUY5YyxFQUFXLEVBQUcsQ0FDZCxJQUFJK2MsRUFBZ0JkLEVBQUlTLGtCQUNuQjV3RixNQUNMLEdBQU1peEYsR0FDQUEsRUFBYzN0QixRQUNkMnRCLEVBQWNodkYsUUFBUyxDQUN6QixJQUFJaXZGLEdBdnZTSTV0QixFQXV2U29EMnRCLEVBQWMzdEIsT0F0dlN0RzZ0QixFQUFjN3RCLEVBQU84dEIsY0FBYzVwRixRQUFRLElBQUssS0FDN0NuTixPQUFPa1gsT0FBTzRQLEdBQU14a0IsUUFBUXcwRixJQUFnQixFQUM3Q0EsRUFDQWh3RSxFQUFLRyxTQW92U3FCbmpCLEVBQU8sSUFBSWlrQixFQUFlOHVFLEVBQW9CRCxFQUFjaHZGLGVBRzVEOUQsRUFBTyxJQUFJaWtCLEVBQWVqQixFQUFLRyxRQUFTLGdDQUFrQzZ1RSxFQUFJWSxtQkFNbEZsOUUsRUFBTSs3RSxHQUFXLFFBQVU1MEIsRUFBVSxZQUNyQzc4RCxFQUFPLElBQUlpa0IsRUFBZWpCLEVBQUtlLFlBQWEsdUJBRWhELE1BQ0osUUFDSW5CLEVBQUssUUFDRGk2QyxFQUNBLGdEQUVBbTFCLEVBQUlLLG1CQUNKLEtBQ0FMLEVBQUlrQixlQUNKLGlCQUdoQixRQUNJeDlFLEVBQU0rN0UsR0FBVyxRQUFVNTBCLEVBQVUsZ0JBanhTekQsSUFBNENzSSxFQUNwQzZ0QixLQXN4U0ksSUFBSUcsRUFBVTV2RixFQUFNdEYsU0FBUyxHQUFJa2IsVUFDMUJnNkUsRUFBUWpwRSxTQUNmLElBQUlrcEUsRUFBZ0IzcEYsS0FBS3NHLFVBQVVvakYsR0FDbkN6OUUsRUFBTSs3RSxHQUFXLGdCQUFpQjV2RSxFQUFNLElBQU11eEUsR0FNOUMsSUFBSWhRLEVBQVUsQ0FBRSxlQUFnQixjQUNoQzM3RSxFQUFNcXFGLHdCQUF3QjFPLEVBQVN4NUUsR0FDdkNvb0YsRUFBSTE0QixLQUFLejNDLEVBQUssT0FBUXV4RSxFQUFlaFEsRUEzRjFCLFFBOEZuQndPLEVBQXFCeDBGLFVBQVV1L0QsbUJBQXFCLFNBQVVFLEVBQVMxakQsRUFBU3ZQLEdBRzVFLE9BQU83TCxLQUFLdytELFVBQVVNLEVBQVMxakQsRUFBU3ZQLElBRTVDZ29GLEVBQXFCeDBGLFVBQVVxOUQsV0FBYSxTQUFVb0MsRUFBU2p6RCxHQUMzRCxJQUFJeXBGLEVBQVcsQ0FDWHQxRixLQUFLOHpGLFFBQ0wsSUFuSGEsZ0NBcUhiLElBQ0FoMUIsRUFDQSxZQUVBeTJCLEVBQXNCdHhFLEVBQWtCdXhFLDRCQUN4Q3A2RSxFQUFVLENBS1ZxNkUsdUJBQXVCLEVBR3ZCQyxtQkFBb0IsYUFDcEJDLG1CQUFvQixHQUNwQkMsaUJBQWtCLENBR2R6cEUsU0FBVSxZQUFjbnNCLEtBQUsyckIsV0FBV08sVUFBWSxjQUFnQmxzQixLQUFLMnJCLFdBQVdRLFVBRXhGMHBFLGFBQWEsRUFDYkMsd0JBQXdCLEVBQ3hCQyxzQkFBdUIsQ0FPbkJDLCtCQUFnQyxLQUVwQ2pxRSxpQkFBa0IvckIsS0FBSytyQixrQkFFM0IvckIsS0FBSyt6Rix3QkFBd0IzNEUsRUFBUXU2RSxtQkFBb0I5cEYsR0FrQnBEOEcsRUFBS25DLGtCQUNONEssRUFBUTY2RSwwQkFBNEIsZ0JBRXhDLElBQUlueUUsRUFBTXd4RSxFQUFTeHRGLEtBQUssSUFDeEI2UCxFQUFNKzdFLEdBQVcsd0JBQTBCNXZFLEVBQU0sSUFBTTFJLEdBQ3ZELElBQUk4NkUsRUFBVVgsRUFBb0JZLGlCQUFpQnJ5RSxFQUFLMUksR0FNcERnN0UsR0FBUyxFQUlUQyxHQUFTLEVBQ1RDLEVBQWUsSUFBSXJELEdBQWEsQ0FDaENDLE9BQVEsU0FBVTN1RSxHQUNUOHhFLEVBVUQxK0UsRUFBTSs3RSxHQUFXLDRDQUE2Q252RSxJQVR6RDZ4RSxJQUNEeitFLEVBQU0rN0UsR0FBVyxpQ0FDakJ3QyxFQUFRaDZELE9BQ1JrNkQsR0FBUyxHQUVieitFLEVBQU0rN0UsR0FBVyxzQkFBdUJudkUsR0FDeEMyeEUsRUFBUTM2QixLQUFLaDNDLEtBTXJCNHVFLFFBQVMsV0FBYyxPQUFPK0MsRUFBUW5vRixXQU10Q3dvRixFQUF1QixTQUFVempGLEVBQU1sRSxHQUd2Q3NuRixFQUFRM3RCLE9BQU96MUQsR0FBTSxTQUFVMGpGLEdBQzNCLElBQ0k1bkYsRUFBRzRuRixHQUVQLE1BQU9oMkYsR0FDSCt2QixZQUFXLFdBQ1AsTUFBTS92QixJQUNQLFFBbUVmLE9BL0RBKzFGLEVBQXFCdHlFLEVBQWtCd3lFLFdBQVdyQyxVQUFVc0MsTUFBTSxXQUN6REwsR0FDRDErRSxFQUFNKzdFLEdBQVcsbUNBR3pCNkMsRUFBcUJ0eUUsRUFBa0J3eUUsV0FBV3JDLFVBQVV1QyxPQUFPLFdBQzFETixJQUNEQSxHQUFTLEVBQ1QxK0UsRUFBTSs3RSxHQUFXLCtCQUNqQjRDLEVBQWE5QyxrQkFHckIrQyxFQUFxQnR5RSxFQUFrQnd5RSxXQUFXckMsVUFBVXo1RSxPQUFPLFNBQVU3TCxHQUNwRXVuRixJQUNEQSxHQUFTLEVBQ1QxK0UsRUFBTSs3RSxHQUFXLGdDQUFpQzVrRixHQUNsRHduRixFQUFhOUMsWUFBWSxJQUFJdHRFLEVBQWVqQixFQUFLZSxZQUFhLDZDQUd0RXV3RSxFQUFxQnR5RSxFQUFrQnd5RSxXQUFXckMsVUFBVXdDLFNBQVMsU0FBVXJ5RSxHQUMzRSxJQUFJdFosRUFDSixJQUFLb3JGLEVBQVEsQ0FDVCxJQUFJUSxFQUFVdHlFLEVBQUk3WixLQUFLLEdBQ3ZCN0UsSUFBU2d4RixFQUFTLDBDQU1sQixJQUFJQyxFQUFpQkQsRUFDakIveUYsRUFBUWd6RixFQUFlaHpGLFFBQXVDLFFBQTVCbUgsRUFBSzZyRixFQUFlLFVBQXVCLElBQVA3ckYsT0FBZ0IsRUFBU0EsRUFBR25ILE9BQ3RHLEdBQUlBLEVBQU8sQ0FDUDZULEVBQU0rN0UsR0FBVyw2QkFBOEI1dkYsR0FFL0MsSUFBSWl6RixFQUFXanpGLEVBQU1zakUsT0FDakJoOUQsRUE3aVR4QixTQUE4Qmc5RCxHQUcxQixJQUFJaDlELEVBQU93MUQsR0FBUXdILEdBQ25CLFFBQWE3OUQsSUFBVGEsRUFHSixPQUFPMDJELEdBQW1CMTJELEdBc2lUQzRzRixDQUFxQkQsR0FDNUJoeEYsRUFBVWpDLEVBQU1pQyxhQUNQd0QsSUFBVGEsSUFDQUEsRUFBTzZhLEVBQUt6UCxTQUNaelAsRUFDSSx5QkFDSWd4RixFQUNBLGlCQUNBanpGLEVBQU1pQyxTQUdsQnN3RixHQUFTLEVBQ1RDLEVBQWE5QyxZQUFZLElBQUl0dEUsRUFBZTliLEVBQU1yRSxJQUNsRG13RixFQUFRbm9GLGFBR1I0SixFQUFNKzdFLEdBQVcsdUJBQXdCbUQsR0FDekNQLEVBQWE3QyxjQUFjb0QsT0FJdkN0bUUsWUFBVyxXQUtQK2xFLEVBQWEvQyxlQUNkLEdBQ0krQyxHQUdYekMsRUFBcUJ4MEYsVUFBVTIwRixRQUFVLFNBQVVsMUIsR0FDL0MsSUFBSW00QixFQUFhdEQsR0FBc0I3MEIsR0FFdkMsT0FEQWo1RCxPQUFzQjBELElBQWYwdEYsRUFBMEIsNkJBQStCbjRCLEdBQ3hEOStELEtBQUs4ekYsUUFDVCxnQkFHQTl6RixLQUFLMnJCLFdBQVdPLFVBQ2hCLGNBQ0Fsc0IsS0FBSzJyQixXQUFXUSxTQUNoQixjQUNBOHFFLEdBRURwRCxFQTVSOEIsR0ErU3JDcUQsR0FBaUMsV0FDakMsU0FBU0EsSUFDTGwzRixLQUFLZ2xCLGdCQUFrQixHQUN2QmhsQixLQUFLMnFCLGdCQUFrQyxvQkFBVDlqQixLQXVDbEMsT0FyQ0ExSSxPQUFPQyxlQUFlODRGLEVBQWdCNzNGLFVBQVcsV0FBWSxDQUN6RGYsSUFBSyxXQUNELE1BQTJCLG9CQUFiOGdCLFNBQTJCQSxTQUFXLE1BRXhEL2dCLFlBQVksRUFDWmtaLGNBQWMsSUFFbEJwWixPQUFPQyxlQUFlODRGLEVBQWdCNzNGLFVBQVcsU0FBVSxDQUN2RGYsSUFBSyxXQUNELE1BQXlCLG9CQUFYNFIsT0FBeUJBLE9BQVMsTUFFcEQ3UixZQUFZLEVBQ1prWixjQUFjLElBRWxCMi9FLEVBQWdCNzNGLFVBQVVpakYsZUFBaUIsU0FBVWo4QixHQUNqRCxPQUFPdGtELFFBQVFDLFFBQVEsSUFBSTZ4RixHQUFxQnh0QyxLQUVwRDZ3QyxFQUFnQjczRixVQUFVcWpGLHVCQUF5QixXQUMvQyxPQUFJaVEsR0FBMkIxMkQsY0FDcEIsSUFBSTAyRCxHQUdKLElBQUlELElBR25Cd0UsRUFBZ0I3M0YsVUFBVXNqRixjQUFnQixTQUFVaDNELEdBQ2hELE9BQU8sSUFBSTYvQyxHQUFvQjcvQyxFQUFZLENBQUU4L0MsZUFBZSxLQUVoRXlyQixFQUFnQjczRixVQUFVdWxCLFdBQWEsU0FBVWxtQixHQUM3QyxPQUFPZ04sS0FBS3NHLFVBQVV0VCxJQUUxQnc0RixFQUFnQjczRixVQUFVd0gsS0FBTyxTQUFVc3dGLEdBQ3ZDLE9BQU90d0YsS0FBS3N3RixJQUVoQkQsRUFBZ0I3M0YsVUFBVTJJLEtBQU8sU0FBVTdDLEdBQ3ZDLE9BQU82QyxLQUFLN0MsSUFFVCt4RixFQTFDeUI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQW9FcEN4eUUsRUFBZ0JLLFlBQVksSUFBSW15RSxJQUVoQyxJQUFJbDVGLEdBQU8sc0JBQ1BzWSxHQUFVOzs7Ozs7Ozs7Ozs7Ozs7OztBQWtCZCxTQUFTOGdGLEdBQWtCampGLEdBQ3ZCcStFLEdBQXFCcitFLEdBQ3JCQSxFQUFTb0UsZ0JBQWdCdmEsR0FBTXNZLElBRW5DOGdGLEdBQWtCcC9FLEdBRWxCemEsRUFBUTY1RixrQkFBb0JBLEssZ0NDaDd0QjVCLElBT0lDLEVBQ0FDLEVBUkFobkYsRUFBVTlTLEVBQU9ELFFBQVUsR0FVL0IsU0FBU2c2RixJQUNMLE1BQU0sSUFBSXR4RixNQUFNLG1DQUVwQixTQUFTdXhGLElBQ0wsTUFBTSxJQUFJdnhGLE1BQU0scUNBc0JwQixTQUFTd3hGLEVBQVdDLEdBQ2hCLEdBQUlMLElBQXFCOW1FLFdBRXJCLE9BQU9BLFdBQVdtbkUsRUFBSyxHQUczQixJQUFLTCxJQUFxQkUsSUFBcUJGLElBQXFCOW1FLFdBRWhFLE9BREE4bUUsRUFBbUI5bUUsV0FDWkEsV0FBV21uRSxFQUFLLEdBRTNCLElBRUksT0FBT0wsRUFBaUJLLEVBQUssR0FDL0IsTUFBTWwzRixHQUNKLElBRUksT0FBTzYyRixFQUFpQno1RixLQUFLLEtBQU04NUYsRUFBSyxHQUMxQyxNQUFNbDNGLEdBRUosT0FBTzYyRixFQUFpQno1RixLQUFLb0MsS0FBTTAzRixFQUFLLE1BdkNuRCxXQUNHLElBRVFMLEVBRHNCLG1CQUFmOW1FLFdBQ1lBLFdBRUFnbkUsRUFFekIsTUFBTy8yRixHQUNMNjJGLEVBQW1CRSxFQUV2QixJQUVRRCxFQUR3QixtQkFBakIxbUUsYUFDY0EsYUFFQTRtRSxFQUUzQixNQUFPaDNGLEdBQ0w4MkYsRUFBcUJFLEdBakI3QixHQXdFQSxJQUVJRyxFQUZBdC9DLEVBQVEsR0FDUnUvQyxHQUFXLEVBRVhDLEdBQWMsRUFFbEIsU0FBU0MsSUFDQUYsR0FBYUQsSUFHbEJDLEdBQVcsRUFDUEQsRUFBYXQzRixPQUNiZzRDLEVBQVFzL0MsRUFBYTN6RixPQUFPcTBDLEdBRTVCdy9DLEdBQWMsRUFFZHgvQyxFQUFNaDRDLFFBQ04wM0YsS0FJUixTQUFTQSxJQUNMLElBQUlILEVBQUosQ0FHQSxJQUFJSSxFQUFVUCxFQUFXSyxHQUN6QkYsR0FBVyxFQUdYLElBREEsSUFBSXpxRSxFQUFNa3JCLEVBQU1oNEMsT0FDVjhzQixHQUFLLENBR1AsSUFGQXdxRSxFQUFldC9DLEVBQ2ZBLEVBQVEsS0FDQ3cvQyxFQUFhMXFFLEdBQ2R3cUUsR0FDQUEsRUFBYUUsR0FBWW5oQixNQUdqQ21oQixHQUFjLEVBQ2QxcUUsRUFBTWtyQixFQUFNaDRDLE9BRWhCczNGLEVBQWUsS0FDZkMsR0FBVyxFQW5FZixTQUF5QkssR0FDckIsR0FBSVgsSUFBdUIxbUUsYUFFdkIsT0FBT0EsYUFBYXFuRSxHQUd4QixJQUFLWCxJQUF1QkUsSUFBd0JGLElBQXVCMW1FLGFBRXZFLE9BREEwbUUsRUFBcUIxbUUsYUFDZEEsYUFBYXFuRSxHQUV4QixJQUVXWCxFQUFtQlcsR0FDNUIsTUFBT3ozRixHQUNMLElBRUksT0FBTzgyRixFQUFtQjE1RixLQUFLLEtBQU1xNkYsR0FDdkMsTUFBT3ozRixHQUdMLE9BQU84MkYsRUFBbUIxNUYsS0FBS29DLEtBQU1pNEYsS0FnRDdDQyxDQUFnQkYsSUFpQnBCLFNBQVNHLEVBQUtULEVBQUt4c0UsR0FDZmxyQixLQUFLMDNGLElBQU1BLEVBQ1gxM0YsS0FBS2tyQixNQUFRQSxFQVlqQixTQUFTMWMsS0E1QlQ4QixFQUFROG5GLFNBQVcsU0FBVVYsR0FDekIsSUFBSXBvRixFQUFPLElBQUl6UCxNQUFNTyxVQUFVQyxPQUFTLEdBQ3hDLEdBQUlELFVBQVVDLE9BQVMsRUFDbkIsSUFBSyxJQUFJNUMsRUFBSSxFQUFHQSxFQUFJMkMsVUFBVUMsT0FBUTVDLElBQ2xDNlIsRUFBSzdSLEVBQUksR0FBSzJDLFVBQVUzQyxHQUdoQzQ2QyxFQUFNNTBDLEtBQUssSUFBSTAwRixFQUFLVCxFQUFLcG9GLElBQ0osSUFBakIrb0MsRUFBTWg0QyxRQUFpQnUzRixHQUN2QkgsRUFBV00sSUFTbkJJLEVBQUs5NEYsVUFBVXEzRSxJQUFNLFdBQ2pCMTJFLEtBQUswM0YsSUFBSXAzRixNQUFNLEtBQU1OLEtBQUtrckIsUUFFOUI1YSxFQUFRK25GLE1BQVEsVUFDaEIvbkYsRUFBUWdvRixTQUFVLEVBQ2xCaG9GLEVBQVF5c0IsSUFBTSxHQUNkenNCLEVBQVFpb0YsS0FBTyxHQUNmam9GLEVBQVFnRyxRQUFVLEdBQ2xCaEcsRUFBUWtvRixTQUFXLEdBSW5CbG9GLEVBQVFtb0YsR0FBS2pxRixFQUNiOEIsRUFBUW9vRixZQUFjbHFGLEVBQ3RCOEIsRUFBUXFvRixLQUFPbnFGLEVBQ2Y4QixFQUFRc29GLElBQU1wcUYsRUFDZDhCLEVBQVF1b0YsZUFBaUJycUYsRUFDekI4QixFQUFRd29GLG1CQUFxQnRxRixFQUM3QjhCLEVBQVF5b0YsS0FBT3ZxRixFQUNmOEIsRUFBUTBvRixnQkFBa0J4cUYsRUFDMUI4QixFQUFRMm9GLG9CQUFzQnpxRixFQUU5QjhCLEVBQVE2aEUsVUFBWSxTQUFVbjBFLEdBQVEsTUFBTyxJQUU3Q3NTLEVBQVE0b0YsUUFBVSxTQUFVbDdGLEdBQ3hCLE1BQU0sSUFBSWlJLE1BQU0scUNBR3BCcUssRUFBUTZvRixJQUFNLFdBQWMsTUFBTyxLQUNuQzdvRixFQUFROG9GLE1BQVEsU0FBVXJ2QyxHQUN0QixNQUFNLElBQUk5akQsTUFBTSxtQ0FFcEJxSyxFQUFRK29GLE1BQVEsV0FBYSxPQUFPLEksNkJDdkxwQywyUEFFSXgyRixFQUZBeTJGLEVBQXVDLG9CQUFmQyxXQUE2QkEsV0FBK0Isb0JBQVhycEYsT0FBeUJBLFlBQTJCLElBQVhHLEVBQXlCQSxFQUF5QixvQkFBVE4sS0FBdUJBLEtBQU8sR0FFdkx5cEYsRUFBS0EsR0FBTSxHQUFHcjFGLEVBQUVtMUYsRUFBZSxTQUFTejdGLEVBQUV1RyxHQUFHLE1BQU8saUJBQWlCQSxFQUFFLFNBQVNxMUYsRUFBR3IxRixHQUFHLE1BQU8saUJBQWlCQSxFQUFFLFNBQVNsRixFQUFFa0YsRUFBRTFFLEdBQUcwRSxFQUFFQSxFQUFFOEgsTUFBTSxLQUFLeE0sRUFBRUEsR0FBR3lFLEVBQUUsSUFBSSxJQUFJckcsRUFBRSxFQUFFQSxFQUFFc0csRUFBRS9ELE9BQU92QyxJQUFJLEdBQWEsT0FBVjRCLEVBQUVBLEVBQUUwRSxFQUFFdEcsS0FBWSxPQUFPLEtBQUssT0FBTzRCLEVBQUUsU0FBU2c2RixLQUMxTyxTQUFTbjZGLEVBQUU2RSxHQUFHLElBQUkxRSxTQUFTMEUsRUFBRSxHQUFHLFVBQVUxRSxFQUFFLEtBQUcwRSxFQUFnZSxNQUFPLE9BQXBlLEdBQUdBLGFBQWF2RSxNQUFNLE1BQU8sUUFBUSxHQUFHdUUsYUFBYWpHLE9BQU8sT0FBT3VCLEVBQUUsSUFBSTVCLEVBQUVLLE9BQU9rQixVQUFVbU0sU0FBUzVOLEtBQUt3RyxHQUFHLEdBQUcsbUJBQW1CdEcsRUFBRSxNQUFPLFNBQVMsR0FBRyxrQkFBa0JBLEdBQUcsaUJBQWlCc0csRUFBRS9ELGFBQVEsSUFBb0IrRCxFQUFFdWUsYUFBUSxJQUFvQnZlLEVBQUV6RCx1QkFBdUJ5RCxFQUFFekQscUJBQXFCLFVBQVUsTUFBTyxRQUFRLEdBQUcscUJBQXFCN0MsUUFBRyxJQUFvQnNHLEVBQUV4RyxXQUFNLElBQW9Cd0csRUFBRXpELHVCQUF1QnlELEVBQUV6RCxxQkFBcUIsUUFBUSxNQUFPLGdCQUMxZixHQUFHLFlBQVlqQixRQUFHLElBQW9CMEUsRUFBRXhHLEtBQUssTUFBTyxTQUFTLE9BQU84QixFQUFFLFNBQVNnRixFQUFFTixHQUFHLE1BQU8sU0FBUzdFLEVBQUU2RSxHQUFHLFNBQVN1MUYsRUFBR3YxRixHQUFHLElBQUkxRSxFQUFFSCxFQUFFNkUsR0FBRyxNQUFPLFNBQVMxRSxHQUFHLFVBQVVBLEdBQUcsaUJBQWlCMEUsRUFBRS9ELE9BQU8sU0FBUzlCLEVBQUU2RixHQUFHLElBQUkxRSxTQUFTMEUsRUFBRSxNQUFPLFVBQVUxRSxHQUFHLE1BQU0wRSxHQUFHLFlBQVkxRSxFQUFFLElBQUlmLEVBQUUsZ0JBQWdCLElBQUlpUyxLQUFLcVosV0FBVyxHQUFHMnZFLEVBQUcsRUFBRSxTQUFTQyxFQUFHejFGLEVBQUUxRSxFQUFFNUIsR0FBRyxPQUFPc0csRUFBRXhHLEtBQUswQyxNQUFNOEQsRUFBRW5GLEtBQUttQixXQUMxVyxTQUFTMDVGLEVBQUcxMUYsRUFBRTFFLEVBQUU1QixHQUFHLElBQUlzRyxFQUFFLE1BQU02QixRQUFRLEdBQUcsRUFBRTdGLFVBQVVDLE9BQU8sQ0FBQyxJQUFJdEMsRUFBRThCLE1BQU1SLFVBQVUrTCxNQUFNeE4sS0FBS3dDLFVBQVUsR0FBRyxPQUFPLFdBQVcsSUFBSUksRUFBRVgsTUFBTVIsVUFBVStMLE1BQU14TixLQUFLd0MsV0FBOEMsT0FBbkNQLE1BQU1SLFVBQVUwNkYsUUFBUXo1RixNQUFNRSxFQUFFekMsR0FBVXFHLEVBQUU5RCxNQUFNWixFQUFFYyxJQUFJLE9BQU8sV0FBVyxPQUFPNEQsRUFBRTlELE1BQU1aLEVBQUVVLFlBQVksU0FBU29JLEVBQUVwRSxFQUFFMUUsRUFBRTVCLEdBQW9HLE9BQVYwSyxFQUF2RnVSLFNBQVMxYSxVQUFVSixPQUFPLEdBQUc4YSxTQUFTMWEsVUFBVUosS0FBS3VNLFdBQVcvSyxRQUFRLGVBQWlCbzVGLEVBQUtDLEdBQVl4NUYsTUFBTSxLQUFLRixXQUN4WixTQUFTaUQsRUFBRWUsRUFBRTFFLEdBQUcsSUFBSTVCLEVBQUUrQixNQUFNUixVQUFVK0wsTUFBTXhOLEtBQUt3QyxVQUFVLEdBQUcsT0FBTyxXQUFXLElBQUlyQyxFQUFFRCxFQUFFc04sUUFBa0MsT0FBMUJyTixFQUFFMEYsS0FBS25ELE1BQU12QyxFQUFFcUMsV0FBa0JnRSxFQUFFOUQsTUFBTU4sS0FBS2pDLElBQUksSUFBSWk4RixFQUFFM3dGLEtBQUtzSCxLQUFLLFdBQVcsT0FBUSxJQUFJdEgsTUFBTSxTQUFTNHdGLEVBQUU3MUYsRUFBRTFFLEdBQUcsU0FBUzVCLEtBQUtBLEVBQUV1QixVQUFVSyxFQUFFTCxVQUFVK0UsRUFBRTgxRixFQUFFeDZGLEVBQUVMLFVBQVUrRSxFQUFFL0UsVUFBVSxJQUFJdkIsRUFBRXNHLEVBQUUvRSxVQUFVWSxZQUFZbUUsRUFBRUEsRUFBRSsxRixHQUFHLFNBQVNwOEYsRUFBRXlDLEVBQUVtQyxHQUFHLElBQUksSUFBSXkzRixFQUFFdjZGLE1BQU1PLFVBQVVDLE9BQU8sR0FBRzNDLEVBQUUsRUFBRUEsRUFBRTBDLFVBQVVDLE9BQU8zQyxJQUFJMDhGLEVBQUUxOEYsRUFBRSxHQUFHMEMsVUFBVTFDLEdBQUcsT0FBT2dDLEVBQUVMLFVBQVVtQixHQUFHRixNQUFNdkMsRUFBRXE4RixJQUFLLFNBQVN4M0YsSUFBSTVDLEtBQUtxRSxFQUFFckUsS0FBS3FFLEVBQUVyRSxLQUFLdkMsRUFBRXVDLEtBQUt2QyxFQUFZbUYsRUFBRXZELFVBQVVnRixHQUFFLEVBQUd6QixFQUFFdkQsVUFBVWc3RixHQUFHLFdBQVcsSUFBSXI2RixLQUFLcUUsSUFBSXJFLEtBQUtxRSxHQUFFLEVBQUdyRSxLQUFLczZGLElBQUksR0FBY3Q2RixLQUFLckIsS0FBS3FCLEtBQUtyQixLQUFLaTdGLElBQU9oM0YsRUFBRXZELFVBQVVpN0YsRUFBRSxXQUFXLEdBQUd0NkYsS0FBS3ZDLEVBQUUsS0FBS3VDLEtBQUt2QyxFQUFFNEMsUUFBUUwsS0FBS3ZDLEVBQUVxSCxPQUFQOUUsSUFBbUIsSUFBSXU2RixFQUFHMTZGLE1BQU1SLFVBQVVvQixRQUFRLFNBQVMyRCxFQUFFMUUsR0FBRyxPQUFPRyxNQUFNUixVQUFVb0IsUUFBUTdDLEtBQUt3RyxFQUFFMUUsT0FBRSxJQUFTLFNBQVMwRSxFQUFFMUUsR0FBRyxHQUFHN0IsRUFBRXVHLEdBQUcsT0FBT3ZHLEVBQUU2QixJQUFJLEdBQUdBLEVBQUVXLE9BQU8rRCxFQUFFM0QsUUFBUWYsRUFBRSxJQUFJLEVBQUUsSUFBSSxJQUFJNUIsRUFBRSxFQUFFQSxFQUFFc0csRUFBRS9ELE9BQU92QyxJQUFJLEdBQUdBLEtBQUtzRyxHQUFHQSxFQUFFdEcsS0FBSzRCLEVBQUUsT0FBTzVCLEVBQUUsT0FBUSxHQUFHdThGLEVBQUd4NkYsTUFBTVIsVUFBVW1TLFFBQVEsU0FBU3BOLEVBQUUxRSxFQUFFNUIsR0FBRytCLE1BQU1SLFVBQVVtUyxRQUFRNVQsS0FBS3dHLEVBQUUxRSxFQUFFNUIsSUFBSyxTQUFTc0csRUFBRTFFLEVBQUU1QixHQUFHLElBQUksSUFBSUMsRUFBRXFHLEVBQUUvRCxPQUFPRyxFQUFFM0MsRUFBRXVHLEdBQUdBLEVBQUU4SCxNQUFNLElBQUk5SCxFQUFFekIsRUFBRSxFQUFFQSxFQUFFNUUsRUFBRTRFLElBQUlBLEtBQUtuQyxHQUFHZCxFQUFFOUIsS0FBS0UsRUFBRTBDLEVBQUVtQyxHQUFHQSxFQUFFeUIsSUFDajVCLFNBQVNvMkYsRUFBR3AyRixHQUFHLE9BQU92RSxNQUFNUixVQUFVMkUsT0FBTzFELE1BQU0sR0FBR0YsV0FBVyxTQUFTcTZGLEVBQUdyMkYsR0FBRyxJQUFJMUUsRUFBRTBFLEVBQUUvRCxPQUFPLEdBQUcsRUFBRVgsRUFBRSxDQUFDLElBQUksSUFBSTVCLEVBQUUrQixNQUFNSCxHQUFHM0IsRUFBRSxFQUFFQSxFQUFFMkIsRUFBRTNCLElBQUlELEVBQUVDLEdBQUdxRyxFQUFFckcsR0FBRyxPQUFPRCxFQUFFLE1BQU8sR0FBRyxTQUFTNDhGLEVBQUd0MkYsR0FBRyxNQUFPLGNBQWMrTCxLQUFLL0wsR0FBRyxJQUE2TXUyRixFQUF6TUMsRUFBR3Z5RixPQUFPaEosVUFBVXc3RixLQUFLLFNBQVN6MkYsR0FBRyxPQUFPQSxFQUFFeTJGLFFBQVEsU0FBU3oyRixHQUFHLE1BQU8saUNBQWlDa2xCLEtBQUtsbEIsR0FBRyxJQUFJLFNBQVMwMkYsRUFBRTEyRixFQUFFMUUsR0FBRyxPQUFRLEdBQUcwRSxFQUFFM0QsUUFBUWYsR0FBRyxTQUFTcTdGLEVBQUczMkYsRUFBRTFFLEdBQUcsT0FBTzBFLEVBQUUxRSxHQUFHLEVBQUUwRSxFQUFFMUUsRUFBRSxFQUFFLEVBQVEwRSxFQUFFLENBQUMsSUFBSTQyRixFQUFHNzJGLEVBQUU2RixVQUFVLEdBQUdneEYsRUFBRyxDQUFDLElBQUl2K0QsRUFBR3UrRCxFQUFHQyxVQUFVLEdBQUd4K0QsRUFBRyxDQUFDaytELEVBQUVsK0QsRUFBRyxNQUFNcjRCLEdBQUd1MkYsRUFBRSxHQUFJLFNBQVNPLEVBQUc5MkYsRUFBRTFFLEVBQUU1QixHQUFHLElBQUksSUFBSUMsS0FBS3FHLEVBQUUxRSxFQUFFOUIsS0FBS0UsRUFBRXNHLEVBQUVyRyxHQUFHQSxFQUFFcUcsR0FBSSxTQUFTKzJGLEVBQUcvMkYsR0FBRyxJQUFTdEcsRUFBTDRCLEVBQUUsR0FBSyxJQUFJNUIsS0FBS3NHLEVBQUUxRSxFQUFFNUIsR0FBR3NHLEVBQUV0RyxHQUFHLE9BQU80QixFQUFFLElBQUkwN0YsRUFBRyxnR0FBZ0dsdkYsTUFBTSxLQUFLLFNBQVNtdkYsRUFBR2ozRixFQUFFMUUsR0FBRyxJQUFJLElBQUk1QixFQUFFQyxFQUFFeUMsRUFBRSxFQUFFQSxFQUFFSixVQUFVQyxPQUFPRyxJQUFJLENBQWdCLElBQUkxQyxLQUFuQkMsRUFBRXFDLFVBQVVJLEdBQWM0RCxFQUFFdEcsR0FBR0MsRUFBRUQsR0FBRyxJQUFJLElBQUk2RSxFQUFFLEVBQUVBLEVBQUV5NEYsRUFBRy82RixPQUFPc0MsSUFBSTdFLEVBQUVzOUYsRUFBR3o0RixHQUFHeEUsT0FBT2tCLFVBQVVDLGVBQWUxQixLQUFLRyxFQUFFRCxLQUFLc0csRUFBRXRHLEdBQUdDLEVBQUVELEtBQU0sU0FBU3c5RixFQUFHbDNGLEdBQWMsT0FBWGszRixFQUFHLEtBQUtsM0YsR0FBVUEsRUFBRWszRixFQUFHLEtBQUs1QixFQUE2RixJQUFxUzZCLEVBQzc3Q24zRixFQUQ0cENvM0YsRUFBR1YsRUFBRUgsRUFBRSxTQUFTYyxFQUFFWCxFQUFFSCxFQUFFLFlBQVlHLEVBQUVILEVBQUUsUUFBUWUsRUFBR1osRUFBRUgsRUFBRSxRQUFRZ0IsRUFBR0QsR0FBSUQsRUFBRUcsRUFBR2QsRUFBRUgsRUFBRSxZQUFZRyxFQUFFSCxFQUFFekYsY0FBYyxZQUFZNEYsRUFBRUgsRUFBRSxZQUFZRyxFQUFFSCxFQUFFLFlBQVlHLEVBQUVILEVBQUUsV0FBV0csRUFBRUgsRUFBRSxRQUFRa0IsRUFBR2YsRUFBRUgsRUFBRXpGLGNBQWMsWUFBWTRGLEVBQUVILEVBQUUsUUFBUSxTQUFTbUIsSUFBSyxJQUFJMTNGLEVBQUVELEVBQUVpYixTQUFTLE9BQU9oYixFQUFFQSxFQUFFMjNGLGtCQUFhLEVBQ2o5QzMzRixFQUFFLENBQUMsSUFBSTQzRixFQUFHLEdBQUdDLEdBQWtCNzNGLEVBQUV1MkYsRUFBS2lCLEVBQVUscUJBQXFCdHlFLEtBQUtsbEIsR0FBTXMzRixFQUFVLGtCQUFrQnB5RSxLQUFLbGxCLEdBQU1xM0YsRUFBUyxtQ0FBbUNueUUsS0FBS2xsQixHQUFNeTNGLEVBQVUsZ0JBQWdCdnlFLEtBQUtsbEIsR0FBTW8zRixFQUFVLHlCQUF5Qmx5RSxLQUFLbGxCLFFBQTNDLEdBQXNFLEdBQXJCNjNGLElBQUtELEVBQUdDLEVBQUdBLEVBQUcsR0FBRyxJQUFPUixFQUFFLENBQUMsSUFBSVMsRUFBR0osSUFBSyxHQUFHLE1BQU1JLEdBQUlBLEVBQUdDLFdBQVdILEdBQUksQ0FBQ1QsRUFBR2x6RixPQUFPNnpGLEdBQUksTUFBTTkzRixHQUFHbTNGLEVBQUdTLEVBQUksSUFDd0hJLEVBRHBIQyxFQUFHLEdBQzdXLFNBQVNDLEdBQUdsNEYsR0FBRyxPQUY4a0MsU0FBWUEsRUFBRTFFLEdBQUcsSUFBSTVCLEVBQUV1K0YsRUFBRyxPQUFPbCtGLE9BQU9rQixVQUFVQyxlQUFlMUIsS0FBS0UsRUFBRXNHLEdBQUd0RyxFQUFFc0csR0FBR3RHLEVBQUVzRyxHQUFHMUUsRUFBRTBFLEdBRTlwQ200RixDQUFHbjRGLEdBQUUsV0FBVyxJQUFJLElBQUkxRSxFQUFFLEVBQUU1QixFQUFFODhGLEVBQUd2eUYsT0FBT2t6RixJQUFLcnZGLE1BQU0sS0FBS25PLEVBQUU2OEYsRUFBR3Z5RixPQUFPakUsSUFBSThILE1BQU0sS0FBSzFMLEVBQUVvUSxLQUFLa2MsSUFBSWh2QixFQUFFdUMsT0FBT3RDLEVBQUVzQyxRQUFRc0MsRUFBRSxFQUFFLEdBQUdqRCxHQUFHaUQsRUFBRW5DLEVBQUVtQyxJQUFJLENBQUMsSUFBSXkzRixFQUFFdDhGLEVBQUU2RSxJQUFJLEdBQUdqRixFQUFFSyxFQUFFNEUsSUFBSSxHQUFHLEVBQUUsQ0FBcUYsR0FBcEZ5M0YsRUFBRSxpQkFBaUI5d0UsS0FBSzh3RSxJQUFJLENBQUMsR0FBRyxHQUFHLEdBQUcsSUFBSTE4RixFQUFFLGlCQUFpQjRyQixLQUFLNXJCLElBQUksQ0FBQyxHQUFHLEdBQUcsR0FBRyxJQUFPLEdBQUcwOEYsRUFBRSxHQUFHLzVGLFFBQVEsR0FBRzNDLEVBQUUsR0FBRzJDLE9BQU8sTUFBTVgsRUFBRXE3RixFQUFHLEdBQUdYLEVBQUUsR0FBRy81RixPQUFPLEVBQUVtOEYsU0FBU3BDLEVBQUUsR0FBRyxJQUFJLEdBQUcxOEYsRUFBRSxHQUFHMkMsT0FBTyxFQUFFbThGLFNBQVM5K0YsRUFBRSxHQUFHLE1BQU1xOUYsRUFBRyxHQUFHWCxFQUFFLEdBQUcvNUYsT0FBTyxHQUFHM0MsRUFBRSxHQUFHMkMsU0FBUzA2RixFQUFHWCxFQUFFLEdBQUcxOEYsRUFBRSxJQUFJMDhGLEVBQUVBLEVBQUUsR0FBRzE4RixFQUFFQSxFQUFFLFNBQVUsR0FBR2dDLEdBQUcsT0FBTyxHQUFHQSxLQUFXLElBQUkrOEYsR0FBR3Q0RixFQUFFaWIsU0FDMWVnOUUsRUFBR0ssSUFBSWhCLEVBQUVLLE1BQU8sY0FBY1csR0FBR0MsV0FBV0YsU0FBU2pCLEVBQUcsSUFBSSxRQUFHLEVBQU8sSUFBSW9CLElBQUlsQixHQUFHLEdBQUc3MEUsT0FBT3cxRSxHQUFJUSxHQUFHbkIsSUFBSWEsR0FBRyxLQUFLTyxHQUFHLFdBQVcsSUFBSTE0RixFQUFFcWlELG1CQUFtQnJvRCxPQUFPQyxlQUFlLE9BQU8sRUFBRyxJQUFJZ0csR0FBRSxFQUFHMUUsRUFBRXZCLE9BQU9DLGVBQWUsR0FBRyxVQUFVLENBQUNFLElBQUksV0FBVzhGLEdBQUUsS0FBTyxJQUFJRCxFQUFFcWlELGlCQUFpQixPQUFPa3pDLEVBQUdoNkYsR0FBR3lFLEVBQUV1aUQsb0JBQW9CLE9BQU9nekMsRUFBR2g2RixHQUFJLE1BQU01QixJQUFJLE9BQU9zRyxFQUFwTyxHQUF5TyxTQUFTMDRGLEdBQUUxNEYsRUFBRTFFLEdBQUdNLEtBQUs4UyxLQUFLMU8sRUFBRXBFLEtBQUtvRSxFQUFFcEUsS0FBS2MsT0FBT3BCLEVBQUVNLEtBQUt1N0YsSUFBRyxFQUEwQyxTQUFTd0IsR0FBRTM0RixFQUFFMUUsR0FBNlAsR0FBMVBvOUYsR0FBRWwvRixLQUFLb0MsS0FBS29FLEVBQUVBLEVBQUUwTyxLQUFLLElBQUk5UyxLQUFLZzlGLGNBQWNoOUYsS0FBS29FLEVBQUVwRSxLQUFLYyxPQUFPLEtBQUtkLEtBQUtpOUYsT0FBT2o5RixLQUFLazlGLFFBQVFsOUYsS0FBS205RixRQUFRbjlGLEtBQUtvOUYsUUFBUXA5RixLQUFLcTlGLFFBQVEsRUFBRXI5RixLQUFLaEIsSUFBSSxHQUFHZ0IsS0FBS3M5RixRQUFRdDlGLEtBQUt1OUYsU0FBU3Y5RixLQUFLdzlGLE9BQU94OUYsS0FBS3k5RixTQUFRLEVBQUd6OUYsS0FBSzA5RixVQUFVLEVBQUUxOUYsS0FBSzI5RixZQUFZLEdBQUczOUYsS0FBS2xDLEVBQUUsS0FBUXNHLEVBQUUsQ0FBQyxJQUFJdEcsRUFBRWtDLEtBQUs4UyxLQUFLMU8sRUFBRTBPLEtBQUsvVSxFQUFFcUcsRUFBRXc1RixnQkFBZ0J4NUYsRUFBRXc1RixlQUFldjlGLE9BQU8rRCxFQUFFdzVGLGVBQWUsR0FBRyxLQUFpRCxHQUE1QzU5RixLQUFLYyxPQUFPc0QsRUFBRXRELFFBQVFzRCxFQUFFeTVGLFdBQVc3OUYsS0FBS29FLEVBQUUxRSxFQUFLQSxFQUFFMEUsRUFBRTQ0RixlQUFlLEdBQUdwQixFQUFHLENBQUN4M0YsRUFBRSxDQUFDLElBQUlrM0YsRUFBRzU3RixFQUFFbytGLFVBQVUsSUFBSXQ5RixHQUFFLEVBQUcsTUFBTTRELEVBQUUsTUFBTXpCLElBQUluQyxHQUFFLEVBQUlBLElBQUlkLEVBQUUsV0FBWSxhQUMzN0I1QixFQUFFNEIsRUFBRTBFLEVBQUUyNUYsWUFBWSxZQUFZamdHLElBQUk0QixFQUFFMEUsRUFBRTQ1RixXQUFXaCtGLEtBQUtnOUYsY0FBY3Q5RixFQUFFM0IsR0FBR2lDLEtBQUtxOUYsYUFBUSxJQUFTdC9GLEVBQUVzL0YsUUFBUXQvRixFQUFFcy9GLFFBQVF0L0YsRUFBRWtnRyxNQUFNaitGLEtBQUtvOUYsYUFBUSxJQUFTci9GLEVBQUVxL0YsUUFBUXIvRixFQUFFcS9GLFFBQVFyL0YsRUFBRW1nRyxNQUFNbCtGLEtBQUttOUYsUUFBUXAvRixFQUFFby9GLFNBQVMsRUFBRW45RixLQUFLazlGLFFBQVFuL0YsRUFBRW0vRixTQUFTLElBQUlsOUYsS0FBS3E5RixhQUFRLElBQVNqNUYsRUFBRWk1RixRQUFRajVGLEVBQUVpNUYsUUFBUWo1RixFQUFFNjVGLE1BQU1qK0YsS0FBS285RixhQUFRLElBQVNoNUYsRUFBRWc1RixRQUFRaDVGLEVBQUVnNUYsUUFBUWg1RixFQUFFODVGLE1BQU1sK0YsS0FBS205RixRQUFRLzRGLEVBQUUrNEYsU0FBUyxFQUFFbjlGLEtBQUtrOUYsUUFBUTk0RixFQUFFODRGLFNBQVMsR0FBR2w5RixLQUFLaTlGLE9BQU83NEYsRUFBRTY0RixPQUFPajlGLEtBQUtoQixJQUFJb0YsRUFBRXBGLEtBQUssR0FBR2dCLEtBQUt5OUYsUUFBUXI1RixFQUFFcTVGLFFBQVF6OUYsS0FBS3c5RixPQUFPcDVGLEVBQUVvNUYsT0FBT3g5RixLQUFLdTlGLFNBQVNuNUYsRUFBRW01RixTQUFTdjlGLEtBQUtzOUYsUUFDOWVsNUYsRUFBRWs1RixRQUFRdDlGLEtBQUswOUYsVUFBVXQ1RixFQUFFczVGLFdBQVcsRUFBRTE5RixLQUFLMjlGLFlBQVk5L0YsRUFBRXVHLEVBQUV1NUYsYUFBYXY1RixFQUFFdTVGLFlBQVlRLEdBQUcvNUYsRUFBRXU1RixjQUFjLEdBQUczOUYsS0FBS2xDLEVBQUVzRyxFQUFFQSxFQUFFZzZGLGtCQUFrQnArRixLQUFLTixLQUZ1UW85RixHQUFFejlGLFVBQVVLLEVBQUUsV0FBV00sS0FBS3U3RixJQUFHLEdBRWxTdEIsRUFBRThDLEdBQUVELElBQUcsSUFBSXFCLEdBQUcsQ0FBQ0UsRUFBRSxRQUFRQyxFQUFFLE1BQU1DLEVBQUUsU0FBU3hCLEdBQUUxOUYsVUFBVUssRUFBRSxXQUFXcTlGLEdBQUU3QyxFQUFFeDZGLEVBQUU5QixLQUFLb0MsTUFBTSxJQUFJb0UsRUFBRXBFLEtBQUtsQyxFQUFFLEdBQUdzRyxFQUFFbzZGLGVBQWVwNkYsRUFBRW82RixzQkFBc0IsR0FBR3A2RixFQUFFcTZGLGFBQVksRUFBRzdCLEdBQUcsS0FBT3g0RixFQUFFcTVGLFNBQVMsS0FBS3I1RixFQUFFczZGLFNBQVMsS0FBS3Q2RixFQUFFczZGLFdBQVF0NkYsRUFBRXM2RixTQUFTLEdBQUcsTUFBTWgvRixNQUFNLElBQUlpL0YsR0FBRSx1QkFBdUIsSUFBSS90RixLQUFLcVosU0FBUyxHQUFHMjBFLEdBQUcsRUFBRSxTQUFTQyxHQUFHejZGLEVBQUUxRSxFQUFFNUIsRUFBRUMsRUFBRXlDLEdBQUdSLEtBQUs4Z0QsU0FBUzE4QyxFQUFFcEUsS0FBSzJQLE1BQU0sS0FBSzNQLEtBQUs4K0YsSUFBSXAvRixFQUFFTSxLQUFLOFMsS0FBS2hWLEVBQUVrQyxLQUFLKytGLFVBQVVoaEcsRUFBRWlDLEtBQUs0NUYsR0FBR3A1RixFQUFFUixLQUFLaEIsTUFBTTQvRixHQUFHNStGLEtBQUtnL0YsRUFBRWgvRixLQUFLaS9GLEdBQUUsRUFBSSxTQUFTQyxHQUFHOTZGLEdBQUdBLEVBQUU0NkYsR0FBRSxFQUFHNTZGLEVBQUUwOEMsU0FBUyxLQUFLMThDLEVBQUV1TCxNQUFNLEtBQUt2TCxFQUFFMDZGLElBQUksS0FBSzE2RixFQUFFdzFGLEdBQUcsS0FBTSxTQUFTdUYsR0FBRy82RixHQUFHcEUsS0FBSzgrRixJQUFJMTZGLEVBQUVwRSxLQUFLb0UsRUFBRSxHQUFHcEUsS0FBS04sRUFBRSxFQUF5TSxTQUFTMC9GLEdBQUdoN0YsRUFBRTFFLEdBQUcsSUFBSTVCLEVBQUU0QixFQUFFb1QsS0FBSyxHQUFHaFYsS0FBS3NHLEVBQUVBLEVBQUUsQ0FBQyxJQUF1QnpCLEVBQW5CNUUsRUFBRXFHLEVBQUVBLEVBQUV0RyxHQUFHMEMsRUFBRSs1RixFQUFHeDhGLEVBQUUyQixJQUFNaUQsRUFBRSxHQUFHbkMsSUFBSVgsTUFBTVIsVUFBVXNqQixPQUFPL2tCLEtBQUtHLEVBQUV5QyxFQUFFLEdBQUdtQyxJQUFJdThGLEdBQUd4L0YsR0FBRyxHQUFHMEUsRUFBRUEsRUFBRXRHLEdBQUd1QyxnQkFBZ0IrRCxFQUFFQSxFQUFFdEcsR0FBR3NHLEVBQUUxRSxPQUNsaUMsU0FBUzIvRixHQUFHajdGLEVBQUUxRSxFQUFFNUIsRUFBRUMsR0FBRyxJQUFJLElBQUl5QyxFQUFFLEVBQUVBLEVBQUU0RCxFQUFFL0QsU0FBU0csRUFBRSxDQUFDLElBQUltQyxFQUFFeUIsRUFBRTVELEdBQUcsSUFBSW1DLEVBQUVxOEYsR0FBR3I4RixFQUFFbStDLFVBQVVwaEQsR0FBR2lELEVBQUVvOEYsV0FBV2poRyxHQUFHNkUsRUFBRWkzRixJQUFJNzdGLEVBQUUsT0FBT3lDLEVBQUUsT0FBUSxFQURpa0IyK0YsR0FBRzkvRixVQUFVNDNCLElBQUksU0FBUzd5QixFQUFFMUUsRUFBRTVCLEVBQUVDLEVBQUV5QyxHQUFHLElBQUltQyxFQUFFeUIsRUFBRW9ILFlBQVdwSCxFQUFFcEUsS0FBS29FLEVBQUV6QixNQUFPeUIsRUFBRXBFLEtBQUtvRSxFQUFFekIsR0FBRyxHQUFHM0MsS0FBS04sS0FBSyxJQUFJMDZGLEVBQUVpRixHQUFHajdGLEVBQUUxRSxFQUFFM0IsRUFBRXlDLEdBQTRFLE9BQXhFLEVBQUU0NUYsR0FBRzE2RixFQUFFMEUsRUFBRWcyRixHQUFHdDhGLElBQUk0QixFQUFFdS9GLEdBQUUsTUFBTXYvRixFQUFFLElBQUltL0YsR0FBR24vRixFQUFFTSxLQUFLOCtGLElBQUluOEYsSUFBSTVFLEVBQUV5QyxJQUFLeStGLEVBQUVuaEcsRUFBRXNHLEVBQUVYLEtBQUsvRCxJQUFXQSxHQUNsd0IsSUFBSTQvRixHQUFHLGVBQWUsSUFBSTF1RixLQUFLcVosU0FBUyxHQUFHczFFLEdBQUcsR0FBRyxTQUFTQyxHQUFHcDdGLEVBQUUxRSxFQUFFNUIsRUFBRUMsRUFBRXlDLEdBQUcsR0FBR3pDLEdBQUdBLEVBQUU0NkYsS0FBSyxPQUNtYixTQUFTdGhFLEVBQUdqekIsRUFBRTFFLEVBQUU1QixFQUFFQyxFQUFFeUMsR0FBRyxHQUFHa0UsRUFBRWhGLEdBQUcsQ0FBQyxJQUFJLElBQUlpRCxFQUFFLEVBQUVBLEVBQUVqRCxFQUFFVyxPQUFPc0MsSUFBSTAwQixFQUFHanpCLEVBQUUxRSxFQUFFaUQsR0FBRzdFLEVBQUVDLEVBQUV5QyxHQUFHLE9BQU8sS0FBYSxPQUFSMUMsRUFBRW1mLEdBQUduZixHQUFVc0csR0FBR0EsRUFBRXU2RixJQUFHdjZGLEVBQUVtNEYsR0FBRzc4RixFQUFFNUIsRUFBRVMsRUFBRVIsS0FBS0EsRUFBRWdoRyxVQUFVaGhHLEVBQUV5QyxHQUFHaS9GLEdBQUdyN0YsRUFBRTFFLEVBQUU1QixHQUFFLEVBQUdDLEVBQUV5QyxHQUQxa0I2MkIsQ0FBR2p6QixFQUFFMUUsRUFBRTVCLEVBQUVDLEVBQUV5QyxHQUFHLEdBQUdrRSxFQUFFaEYsR0FBRyxDQUFDLElBQUksSUFBSWlELEVBQUUsRUFBRUEsRUFBRWpELEVBQUVXLE9BQU9zQyxJQUFJNjhGLEdBQUdwN0YsRUFBRTFFLEVBQUVpRCxHQUFHN0UsRUFBRUMsRUFBRXlDLEdBQUcsT0FBTyxLQUFhLE9BQVIxQyxFQUFFbWYsR0FBR25mLEdBQVVzRyxHQUFHQSxFQUFFdTZGLElBQUd2NkYsRUFBRWszRixHQUFHNTdGLEVBQUU1QixFQUFFUyxFQUFFUixLQUFLQSxFQUFFZ2hHLFVBQVVoaEcsRUFBRXlDLEdBQUdpL0YsR0FBR3I3RixFQUFFMUUsRUFBRTVCLEdBQUUsRUFBR0MsRUFBRXlDLEdBQ2hYLFNBQVNpL0YsR0FBR3I3RixFQUFFMUUsRUFBRTVCLEVBQUVDLEVBQUV5QyxFQUFFbUMsR0FBRyxJQUFJakQsRUFBRSxNQUFNdUcsTUFBTSxzQkFBc0IsSUFBSW0wRixFQUFFNzdGLEVBQUVpQyxLQUFLQSxFQUFFdStGLFVBQVV2K0YsRUFBRSxHQUFHNDVGLElBQUl1QyxHQUFHLE9BQU8sS0FBSyxJQUFJai9GLEVBQUVnaUcsR0FBR3Q3RixHQUE2QyxHQUExQzFHLElBQUkwRyxFQUFFazdGLElBQUk1aEcsRUFBRSxJQUFJeWhHLEdBQUcvNkYsS0FBSXRHLEVBQUVKLEVBQUV1NUIsSUFBSXYzQixFQUFFNUIsRUFBRUMsRUFBRXE4RixFQUFFejNGLElBQVFnTixNQUFNLE9BQU83UixFQUF3QyxHQUF0Q0MsRUFBOFQsV0FBYyxJQUFJcUcsRUFBRXU3RixHQUFHamdHLEVBQUVpOUYsR0FBRyxTQUFTNytGLEdBQUcsT0FBT3NHLEVBQUV4RyxLQUFLOEIsRUFBRW8vRixJQUFJcC9GLEVBQUVvaEQsU0FBU2hqRCxJQUFJLFNBQVNBLEdBQWdDLEtBQTdCQSxFQUFFc0csRUFBRXhHLEtBQUs4QixFQUFFby9GLElBQUlwL0YsRUFBRW9oRCxTQUFTaGpELElBQVMsT0FBT0EsR0FBRyxPQUFPNEIsRUFBdmNrZ0csR0FBSzloRyxFQUFFNlIsTUFBTTVSLEVBQUVBLEVBQUUrZ0csSUFBSTE2RixFQUFFckcsRUFBRStpRCxTQUFTaGpELEVBQUtzRyxFQUFFb2lELGlCQUFpQnEyQyxLQUFLcjhGLEVBQUU0NUYsUUFBRyxJQUFTNTVGLElBQUlBLEdBQUUsR0FBSTRELEVBQUVvaUQsaUJBQWlCOW1ELEVBQUU4TCxXQUFXek4sRUFBRXlDLFFBQVEsR0FBRzRELEVBQUV5N0YsWUFBWXo3RixFQUFFeTdGLFlBQVlDLEdBQUdwZ0csRUFBRThMLFlBQVl6TixPQUFRLEtBQUdxRyxFQUFFczBGLGNBQWF0MEYsRUFBRXkwRixlQUFxQyxNQUFNNXlGLE1BQU0scURBQWxDN0IsRUFBRXMwRixZQUFZMzZGLEdBQXlFLE9BQU9ELEVBRXhmLFNBQVNpaUcsR0FBRzM3RixHQUFHLElBQUlxMUYsRUFBR3IxRixJQUFJQSxJQUFJQSxFQUFFNDZGLEVBQUUsQ0FBQyxJQUFJdC9GLEVBQUUwRSxFQUFFMDZGLElBQUksR0FBR3AvRixHQUFHQSxFQUFFaS9GLElBQUdTLEdBQUcxL0YsRUFBRTVCLEVBQUVzRyxPQUFPLENBQUMsSUFBSXRHLEVBQUVzRyxFQUFFME8sS0FBSy9VLEVBQUVxRyxFQUFFdUwsTUFBTWpRLEVBQUVnbkQsb0JBQW9CaG5ELEVBQUVnbkQsb0JBQW9CNW9ELEVBQUVDLEVBQUVxRyxFQUFFMjZGLFNBQVNyL0YsRUFBRXNnRyxZQUFZdGdHLEVBQUVzZ0csWUFBWUYsR0FBR2hpRyxHQUFHQyxHQUFHMkIsRUFBRWc1RixhQUFhaDVGLEVBQUVtNUYsZ0JBQWdCbjVGLEVBQUVtNUYsZUFBZTk2RixJQUFJRCxFQUFFNGhHLEdBQUdoZ0csS0FBSzAvRixHQUFHdGhHLEVBQUVzRyxHQUFHLEdBQUd0RyxFQUFFNEIsSUFBSTVCLEVBQUVnaEcsSUFBSSxLQUFLcC9GLEVBQUU0L0YsSUFBSSxPQUFPSixHQUFHOTZGLEtBQU0sU0FBUzA3RixHQUFHMTdGLEdBQUcsT0FBT0EsS0FBS203RixHQUFHQSxHQUFHbjdGLEdBQUdtN0YsR0FBR243RixHQUFHLEtBQUtBLEVBQUUsU0FBUzY3RixHQUFHNzdGLEVBQUUxRSxHQUFHLElBQUk1QixFQUFFc0csRUFBRTA4QyxTQUFTL2lELEVBQUVxRyxFQUFFdzFGLElBQUl4MUYsRUFBRTA2RixJQUFlLE9BQVgxNkYsRUFBRTY2RixHQUFHYyxHQUFHMzdGLEdBQVV0RyxFQUFFRixLQUFLRyxFQUFFMkIsR0FDOWEsU0FBU2lnRyxHQUFHdjdGLEVBQUUxRSxHQUFHLFFBQU8wRSxFQUFFNDZGLElBQUtyQyxHQUFHc0QsR0FBRzc3RixFQUFFLElBQUkyNEYsR0FBRXI5RixFQUFFTSxPQUEyQ2lnRyxHQUFHNzdGLEVBQXRDMUUsRUFBRSxJQUFJcTlGLEdBQUVyOUYsR0FBR1IsRUFBRSxnQkFBZ0JjLFFBQWUsU0FBUzAvRixHQUFHdDdGLEdBQVcsT0FBUkEsRUFBRUEsRUFBRWs3RixlQUF3QkgsR0FBRy82RixFQUFFLEtBQUssSUFBSTg3RixHQUFHLHdCQUF3QixJQUFJdHZGLEtBQUtxWixXQUFXLEdBQUcsU0FBU2hOLEdBQUc3WSxHQUFHLE1BQUcsWUFBWTdFLEVBQUU2RSxHQUFVQSxHQUFFQSxFQUFFODdGLE1BQU05N0YsRUFBRTg3RixJQUFJLFNBQVN4Z0csR0FBRyxPQUFPMEUsRUFBRSs3RixZQUFZemdHLEtBQVkwRSxFQUFFODdGLEtBQUksU0FBUzVGLEtBQUkxM0YsRUFBRWhGLEtBQUtvQyxNQUFNQSxLQUFLbEMsRUFBRSxJQUFJcWhHLEdBQUduL0YsTUFBTUEsS0FBS29nRyxFQUFFcGdHLEtBQUtBLEtBQUt5N0YsRUFBRSxLQUc1WCxTQUFTNEUsR0FBR2o4RixFQUFFMUUsRUFBRTVCLEVBQUVDLEdBQXNCLEtBQW5CMkIsRUFBRTBFLEVBQUV0RyxFQUFFc0csRUFBRWlFLE9BQU8zSSxLQUFVLE9BQU8sRUFBR0EsRUFBRUEsRUFBRXNFLFNBQVMsSUFBSSxJQUFJeEQsR0FBRSxFQUFHbUMsRUFBRSxFQUFFQSxFQUFFakQsRUFBRVcsU0FBU3NDLEVBQUUsQ0FBQyxJQUFJeTNGLEVBQUUxNkYsRUFBRWlELEdBQUcsR0FBR3kzRixJQUFJQSxFQUFFNEUsR0FBRzVFLEVBQUUyRSxTQUFTamhHLEVBQUUsQ0FBQyxJQUFJSixFQUFFMDhGLEVBQUV0NUMsU0FBU3cvQyxFQUFFbEcsRUFBRVIsSUFBSVEsRUFBRTBFLElBQUkxRSxFQUFFNkUsR0FBR0csR0FBR2g3RixFQUFFdEcsRUFBRXM4RixHQUFHNTVGLEdBQUUsSUFBSzlDLEVBQUVFLEtBQUswaUcsRUFBRXZpRyxJQUFJeUMsR0FBSSxPQUFPQSxHQUFHLEdBQUd6QyxFQUFFdzlGLEdBSGtLdEIsRUFBRUssR0FBRTEzRixHQUFHMDNGLEdBQUVqN0YsVUFBVXMvRixLQUFHLEdBQUc5N0YsRUFBRXkzRixHQUFFajdGLFdBQVltbkQsaUJBQWlCLFNBQVNwaUQsRUFBRTFFLEVBQUU1QixFQUFFQyxHQUFHeWhHLEdBQUd4L0YsS0FBS29FLEVBQUUxRSxFQUFFNUIsRUFBRUMsSUFBSzhFLEVBQUU2akQsb0JBQW9CLFNBQVN0aUQsRUFBRTFFLEVBQUU1QixFQUFFQyxJQUZ0Z0IsU0FBU3dpRyxFQUFHbjhGLEVBQUUxRSxFQUFFNUIsRUFBRUMsRUFBRXlDLEdBQUcsR0FBR2tFLEVBQUVoRixHQUFHLElBQUksSUFBSWlELEVBQUUsRUFBRUEsRUFBRWpELEVBQUVXLE9BQU9zQyxJQUFJNDlGLEVBQUduOEYsRUFBRTFFLEVBQUVpRCxHQUFHN0UsRUFBRUMsRUFBRXlDLFFBQVF6QyxFQUFFUSxFQUFFUixLQUFLQSxFQUFFZ2hHLFVBQVVoaEcsRUFBRUQsRUFBRW1mLEdBQUduZixHQUFHc0csR0FBR0EsRUFBRXU2RixLQUFLdjZGLEVBQUVBLEVBQUV0RyxHQUFFNEIsRUFBRTJJLE9BQU8zSSxHQUFHOEwsY0FBZ0JwSCxFQUFFQSxLQUE0QixHQUFmdEcsRUFBRXVoRyxHQUFYMThGLEVBQUV5QixFQUFFQSxFQUFFMUUsR0FBVTVCLEVBQUVDLEVBQUV5QyxNQUFVMCtGLEdBQUd2OEYsRUFBRTdFLElBQUkrQixNQUFNUixVQUFVc2pCLE9BQU8va0IsS0FBSytFLEVBQUU3RSxFQUFFLEdBQUcsR0FBRzZFLEVBQUV0QyxnQkFBZ0IrRCxFQUFFQSxFQUFFMUUsR0FBRzBFLEVBQUUxRSxRQUFRMEUsSUFBSUEsRUFBRXM3RixHQUFHdDdGLE1BQU0xRSxFQUFFMEUsRUFBRUEsRUFBRTFFLEVBQUU4TCxZQUFZcEgsR0FBRyxFQUFFMUUsSUFBSTBFLEVBQUVpN0YsR0FBRzMvRixFQUFFNUIsRUFBRUMsRUFBRXlDLEtBQUsxQyxHQUFHLEVBQUVzRyxFQUFFMUUsRUFBRTBFLEdBQUcsT0FBTzI3RixHQUFHamlHLElBRXNLeWlHLENBQUd2Z0csS0FBS29FLEVBQUUxRSxFQUFFNUIsRUFBRUMsSUFDdmhCOEUsRUFBRTI5RixjQUFjLFNBQVNwOEYsR0FBRyxJQUFJMUUsRUFBRTVCLEVBQUVrQyxLQUFLeTdGLEVBQUUsR0FBRzM5RixFQUFFLElBQUk0QixFQUFFLEdBQUc1QixFQUFFQSxFQUFFQSxFQUFFMjlGLEVBQUUvN0YsRUFBRStELEtBQUszRixHQUFHQSxFQUFFa0MsS0FBS29nRyxFQUFFLElBQUlyaUcsRUFBRXFHLEVBQUUwTyxNQUFNMU8sRUFBRSxHQUFHdkcsRUFBRXVHLEdBQUdBLEVBQUUsSUFBSTA0RixHQUFFMTRGLEVBQUV0RyxRQUFRLEdBQUdzRyxhQUFhMDRGLEdBQUUxNEYsRUFBRXRELE9BQU9zRCxFQUFFdEQsUUFBUWhELE1BQU0sQ0FBQyxJQUFJMEMsRUFBRTRELEVBQWVpM0YsRUFBYmozRixFQUFFLElBQUkwNEYsR0FBRS8rRixFQUFFRCxHQUFRMEMsR0FBUyxHQUFMQSxHQUFFLEVBQU1kLEVBQUUsSUFBSSxJQUFJaUQsRUFBRWpELEVBQUVXLE9BQU8sRUFBRSxHQUFHc0MsRUFBRUEsSUFBSSxDQUFDLElBQUl5M0YsRUFBRWgyRixFQUFFQSxFQUFFMUUsRUFBRWlELEdBQUduQyxFQUFFNi9GLEdBQUdqRyxFQUFFcjhGLEdBQUUsRUFBR3FHLElBQUk1RCxFQUErQyxHQUFwQ0EsRUFBRTYvRixHQUFWakcsRUFBRWgyRixFQUFFQSxFQUFFdEcsRUFBU0MsR0FBRSxFQUFHcUcsSUFBSTVELEVBQUVBLEVBQUU2L0YsR0FBR2pHLEVBQUVyOEYsR0FBRSxFQUFHcUcsSUFBSTVELEVBQUtkLEVBQUUsSUFBSWlELEVBQUUsRUFBRUEsRUFBRWpELEVBQUVXLE9BQU9zQyxJQUFlbkMsRUFBRTYvRixHQUFiakcsRUFBRWgyRixFQUFFQSxFQUFFMUUsRUFBRWlELEdBQVU1RSxHQUFFLEVBQUdxRyxJQUFJNUQsRUFBRSxPQUFPQSxHQUMvWHFDLEVBQUV5M0YsRUFBRSxXQUE0QixHQUFqQkEsR0FBRUosRUFBRUksRUFBRTE4RixLQUFLb0MsTUFBU0EsS0FBS2xDLEVBQUUsQ0FBQyxJQUFhQSxFQUFUc0csRUFBRXBFLEtBQUtsQyxFQUFJLElBQUlBLEtBQUtzRyxFQUFFQSxFQUFFLENBQUMsSUFBSSxJQUFJckcsRUFBRXFHLEVBQUVBLEVBQUV0RyxHQUFHMEMsRUFBRSxFQUFFQSxFQUFFekMsRUFBRXNDLE9BQU9HLElBQUkwK0YsR0FBR25oRyxFQUFFeUMsV0FBVzRELEVBQUVBLEVBQUV0RyxHQUFHc0csRUFBRTFFLEtBQU1NLEtBQUt5N0YsRUFBRSxNQUFPNTRGLEVBQUV5NEYsR0FBRyxTQUFTbDNGLEVBQUUxRSxFQUFFNUIsRUFBRUMsR0FBRyxPQUFPaUMsS0FBS2xDLEVBQUVtNUIsSUFBSTV1QixPQUFPakUsR0FBRzFFLEdBQUUsRUFBRzVCLEVBQUVDLElBQUk4RSxFQUFFMDVGLEdBQUcsU0FBU240RixFQUFFMUUsRUFBRTVCLEVBQUVDLEdBQUcsT0FBT2lDLEtBQUtsQyxFQUFFbTVCLElBQUk1dUIsT0FBT2pFLEdBQUcxRSxHQUFFLEVBQUc1QixFQUFFQyxJQUM5QyxJQUFJMGlHLEdBQUd0OEYsRUFBRXVILEtBQUtzRyxVQUFVLFNBQVMwdUYsR0FBR3Q4RixFQUFFMUUsR0FBR00sS0FBS2xDLEVBQUVzRyxFQUFFcEUsS0FBSzJDLEVBQUVqRCxFQUFFTSxLQUFLTixFQUFFLEVBQUVNLEtBQUtvRSxFQUFFLEtBQTBILFNBQVN1OEYsS0FBSzNnRyxLQUFLTixFQUFFTSxLQUFLb0UsRUFBRSxLQUFoSnM4RixHQUFHcmhHLFVBQVVmLElBQUksV0FBVyxHQUFHLEVBQUUwQixLQUFLTixFQUFFLENBQUNNLEtBQUtOLElBQUksSUFBSTBFLEVBQUVwRSxLQUFLb0UsRUFBRXBFLEtBQUtvRSxFQUFFQSxFQUFFaEMsS0FBS2dDLEVBQUVoQyxLQUFLLFVBQVdnQyxFQUFFcEUsS0FBS2xDLElBQUksT0FBT3NHLEdBQXFDLElBQTRoQisxRixHQUF4aEJ5RyxHQUFHLElBQUlGLElBQUcsV0FBVyxPQUFPLElBQUlHLE1BQUksU0FBU3o4RixHQUFHQSxFQUFFdUksV0FBNkcsU0FBU20wRixLQUFLLElBQUkxOEYsRUFBRTI4RixHQUFHcmhHLEVBQUUsS0FBMkQsT0FBdEQwRSxFQUFFQSxJQUFJMUUsRUFBRTBFLEVBQUVBLEVBQUVBLEVBQUVBLEVBQUVBLEVBQUVBLEVBQUVoQyxLQUFLZ0MsRUFBRUEsSUFBSUEsRUFBRTFFLEVBQUUsTUFBTUEsRUFBRTBDLEtBQUssTUFBYTFDLEVBQUUsU0FBU21oRyxLQUFLN2dHLEtBQUtvQyxLQUFLcEMsS0FBS04sRUFBRU0sS0FBS29FLEVBQUUsS0FBcUksU0FBUzQ4RixHQUFHNThGLEdBQUdELEVBQUVvc0IsWUFBVyxXQUFXLE1BQU1uc0IsSUFBSSxHQUFJLFNBQVM2OEYsR0FBRzc4RixFQUFFMUUsR0FBR3k2RixJQUE4QyxXQUFjLElBQUkvMUYsRUFBRUQsRUFBRXBDLFFBQVFDLGFBQVEsR0FBUW00RixHQUFHLFdBQVcvMUYsRUFBRTVCLEtBQUswK0YsS0FBN0dDLEdBQUtDLEtBQUtqSCxLQUFLaUgsSUFBRyxHQUFJTCxHQUFHOXBFLElBQUk3eUIsRUFBRTFFLEdBQW5kaWhHLEdBQUd0aEcsVUFBVTQzQixJQUFJLFNBQVM3eUIsRUFBRTFFLEdBQUcsSUFBSTVCLEVBQUU4aUcsR0FBR3RpRyxNQUFNUixFQUFFb1csSUFBSTlQLEVBQUUxRSxHQUFHTSxLQUFLTixFQUFFTSxLQUFLTixFQUFFMEMsS0FBS3RFLEVBQUVrQyxLQUFLb0UsRUFBRXRHLEVBQUVrQyxLQUFLTixFQUFFNUIsR0FBNkkraUcsR0FBR3hoRyxVQUFVNlUsSUFBSSxTQUFTOVAsRUFBRTFFLEdBQUdNLEtBQUtvRSxFQUFFQSxFQUFFcEUsS0FBS04sRUFBRUEsRUFBRU0sS0FBS29DLEtBQUssTUFBT3krRixHQUFHeGhHLFVBQVVzTixNQUFNLFdBQVczTSxLQUFLb0MsS0FBS3BDLEtBQUtOLEVBQUVNLEtBQUtvRSxFQUFFLE1BQXFNLElBQUlnOUYsSUFBRyxFQUFHTCxHQUFHLElBQUlKLEdBQUcsU0FBU08sS0FBSyxJQUFJLElBQUk5OEYsRUFBRUEsRUFBRTA4RixNQUFNLENBQUMsSUFBSTE4RixFQUFFQSxFQUFFeEcsS0FBS3dHLEVBQUUxRSxHQUFJLE1BQU01QixHQUFHa2pHLEdBQUdsakcsR0FBSSxJQUFJNEIsRUFBRWtoRyxHQUFHbGhHLEVBQUVpRCxFQUFFeUIsR0FBRyxJQUFJMUUsRUFBRUEsSUFBSUEsRUFBRUEsSUFBSTBFLEVBQUVoQyxLQUFLMUMsRUFBRTBFLEVBQUUxRSxFQUFFMEUsRUFBRUEsR0FBSWc5RixJQUFHLEVBQUksU0FBU0MsR0FBR2o5RixFQUFFMUUsR0FBRzQ2RixHQUFFMThGLEtBQUtvQyxNQUFNQSxLQUFLTixFQUFFMEUsR0FBRyxFQUFFcEUsS0FBS29FLEVBQUUxRSxHQUFHeUUsRUFBRW5FLEtBQUsyQyxFQUFFNkYsRUFBRXhJLEtBQUswL0YsR0FBRzEvRixNQUFNQSxLQUFLNkMsRUFBRW0zRixJQUFxVyxTQUFTc0gsR0FBR2w5RixHQUFHQSxFQUFFczFGLElBQUcsRUFBR3QxRixFQUFFbTlGLElBQUluOUYsRUFBRUEsRUFBRXdzQixhQUFheHNCLEVBQUVtOUYsR0FBR245RixFQUFFbTlGLEVBQUUsTUFDM25ELFNBQVNDLEdBQUdwOUYsRUFBRTFFLEVBQUU1QixHQUFHLEdBQUcsWUFBWXlCLEVBQUU2RSxHQUFHdEcsSUFBSXNHLEVBQUVvRSxFQUFFcEUsRUFBRXRHLFFBQVMsS0FBR3NHLEdBQUcsbUJBQW1CQSxFQUFFKzdGLFlBQXNDLE1BQU1sNkYsTUFBTSw2QkFBdEM3QixFQUFFb0UsRUFBRXBFLEVBQUUrN0YsWUFBWS83RixHQUFpRCxPQUFPLFdBQVd3aUIsT0FBT2xuQixJQUFJLEVBQUV5RSxFQUFFb3NCLFdBQVduc0IsRUFBRTFFLEdBQUcsR0FBRyxTQUFTK2hHLEdBQUdyOUYsRUFBRTFFLEVBQUU1QixHQUFHOEUsRUFBRWhGLEtBQUtvQyxNQUFNQSxLQUFLMkMsRUFBRSxNQUFNN0UsRUFBRTBLLEVBQUVwRSxFQUFFdEcsR0FBR3NHLEVBQUVwRSxLQUFLbEMsRUFBRTRCLEVBQUVNLEtBQUtOLEVBQUU4SSxFQUFFeEksS0FBS3UvRixHQUFHdi9GLE1BQU1BLEtBQUtvRSxFQUFFLEdBQTZRLFNBQVNzOUYsR0FBR3Q5RixHQUFHQSxFQUFFdTlGLEVBQUVILEdBQUdwOUYsRUFBRTFFLEVBQUUwRSxFQUFFdEcsR0FBR3NHLEVBQUV6QixFQUFFckMsTUFBTSxLQUFLOEQsRUFBRUEsR0FBSSxTQUFTdzlGLEdBQUV4OUYsR0FBR3hCLEVBQUVoRixLQUFLb0MsTUFBTUEsS0FBS04sRUFBRTBFLEVBQUVwRSxLQUFLb0UsRUFBRSxHQURpa0I2MUYsRUFBRW9ILEdBQUcvRyxLQUFHejNGLEVBQUV3K0YsR0FBR2hpRyxXQUFZcTZGLElBQUcsRUFBRzcyRixFQUFFMCtGLEVBQUUsS0FBSzErRixFQUFFNjhGLEdBQUcsV0FBVyxHQUFHMS9GLEtBQUswNUYsR0FBRyxDQUFDLElBQUl0MUYsRUFBRTQxRixJQUFJaDZGLEtBQUs2QyxFQUFFLEVBQUV1QixHQUFHQSxFQUFFLEdBQUdwRSxLQUFLTixFQUFFTSxLQUFLdWhHLEVBQUV2aEcsS0FBS29FLEVBQUVtc0IsV0FBV3Z3QixLQUFLMkMsRUFBRTNDLEtBQUtOLEVBQUUwRSxJQUFJcEUsS0FBS3VoRyxJQUFJdmhHLEtBQUtvRSxFQUFFd3NCLGFBQWE1d0IsS0FBS3VoRyxHQUFHdmhHLEtBQUt1aEcsRUFBRSxNQUFNdmhHLEtBQUt3Z0csY0FBYyxRQUFReGdHLEtBQUswNUYsS0FBSzRILEdBQUd0aEcsTUFBTUEsS0FBS3F3QixZQUFheHRCLEVBQUV3dEIsTUFBTSxXQUFXcndCLEtBQUswNUYsSUFBRyxFQUFHMTVGLEtBQUt1aEcsSUFBSXZoRyxLQUFLdWhHLEVBQUV2aEcsS0FBS29FLEVBQUVtc0IsV0FBV3Z3QixLQUFLMkMsRUFBRTNDLEtBQUtOLEdBQUdNLEtBQUs2QyxFQUFFbTNGLE1BQ3ZuRG4zRixFQUFFeTNGLEVBQUUsV0FBVytHLEdBQUduSCxFQUFFSSxFQUFFMThGLEtBQUtvQyxNQUFNc2hHLEdBQUd0aEcsYUFBYUEsS0FBS29FLEdBQStUNjFGLEVBQUV3SCxHQUFHNytGLElBQUdDLEVBQUU0K0YsR0FBR3BpRyxXQUFZdzZGLElBQUcsRUFBR2gzRixFQUFFOCtGLEVBQUUsS0FBSzkrRixFQUFFKzdGLEdBQUcsU0FBU3g2RixHQUFHcEUsS0FBS29FLEVBQUVoRSxVQUFVSixLQUFLMmhHLEVBQUUzaEcsS0FBSzY1RixJQUFHLEVBQUc2SCxHQUFHMWhHLE9BQVE2QyxFQUFFeTNGLEVBQUUsV0FBV21ILEdBQUd2SCxFQUFFSSxFQUFFMThGLEtBQUtvQyxNQUFNQSxLQUFLMmhHLElBQUl4OUYsRUFBRXlzQixhQUFhNXdCLEtBQUsyaEcsR0FBRzNoRyxLQUFLMmhHLEVBQUUsS0FBSzNoRyxLQUFLNjVGLElBQUcsRUFBRzc1RixLQUFLb0UsRUFBRSxLQUFNdkIsRUFBRTA4RixHQUFHLFdBQVd2L0YsS0FBSzJoRyxFQUFFLEtBQUszaEcsS0FBSzY1RixLQUFLNzVGLEtBQUs2NUYsSUFBRyxFQUFHNkgsR0FBRzFoRyxRQUE0R2k2RixFQUFFMkgsR0FBRWgvRixHQUFHLElBQUlpL0YsR0FBRyxHQUFHLFNBQVNDLEdBQUcxOUYsRUFBRTFFLEVBQUU1QixFQUFFQyxHQUFHMkcsRUFBRTVHLEtBQUtBLElBQUkrakcsR0FBRyxHQUFHL2pHLEVBQUUwTixZQUFZMU4sRUFBRStqRyxJQUFJLElBQUksSUFBSXJoRyxFQUFFLEVBQUVBLEVBQUUxQyxFQUFFdUMsT0FBT0csSUFBSSxDQUFDLElBQUltQyxFQUFFNjhGLEdBQUc5L0YsRUFBRTVCLEVBQUUwQyxHQUFHekMsR0FBR3FHLEVBQUUrN0YsYUFBWSxFQUFHLzdGLEVBQUUxRSxHQUFHMEUsR0FBRyxJQUFJekIsRUFBRSxNQUFNeUIsRUFBRUEsRUFBRXpCLEVBQUUzRCxLQUFLMkQsR0FBSSxTQUFTby9GLEdBQUczOUYsR0FBRzgyRixFQUFHOTJGLEVBQUVBLEdBQUUsU0FBUzFFLEVBQUU1QixHQUFHa0MsS0FBS29FLEVBQUU5RSxlQUFleEIsSUFBSWlpRyxHQUFHcmdHLEtBQUswRSxHQUFHQSxFQUFFQSxFQUFFLEdBQXNKLFNBQVM0OUYsTUFBM0pKLEdBQUV2aUcsVUFBVWk3RixFQUFFLFdBQVdzSCxHQUFFMUgsRUFBRUksRUFBRTE4RixLQUFLb0MsTUFBTStoRyxHQUFHL2hHLE9BQVE0aEcsR0FBRXZpRyxVQUFVOGdHLFlBQVksV0FBVyxNQUFNbDZGLE1BQU0sNkNBQTZELElBQUlnOEYsR0FBRSxJQUFJM0gsR0FBRSxTQUFTNEgsR0FBRzk5RixHQUFHMDRGLEdBQUVsL0YsS0FBS29DLEtBQUsscUJBQXFCb0UsR0FBWSxTQUFTZzhGLEdBQUVoOEYsR0FBRzY5RixHQUFFekIsY0FBYyxJQUFJMEIsR0FBR0QsR0FBRTc5RixJQUFLLFNBQVMrOUYsR0FBRy85RixHQUFHMDRGLEdBQUVsL0YsS0FBS29DLEtBQUssWUFBWW9FLEdBQVksU0FBU2crRixHQUFFaCtGLEdBQUc2OUYsR0FBRXpCLGNBQWMsSUFBSTJCLEdBQUdGLEdBQUU3OUYsSUFBSyxTQUFTaStGLEdBQUdqK0YsR0FBRzA0RixHQUFFbC9GLEtBQUtvQyxLQUFLLGNBQWNvRSxHQUFZLFNBQVNrK0YsR0FBR2wrRixFQUFFMUUsR0FBRyxHQUFHLFlBQVlILEVBQUU2RSxHQUFHLE1BQU02QixNQUFNLDhDQUE4QyxPQUFPOUIsRUFBRW9zQixZQUFXLFdBQVduc0IsTUFBTTFFLEdBQTVVdTZGLEVBQUVpSSxHQUFHcEYsSUFBMEY3QyxFQUFFa0ksR0FBR3JGLElBQTRGN0MsRUFBRW9JLEdBQUd2RixJQUEwSSxJQUFJeUYsR0FBRyxDQUFDL04sU0FBUyxFQUFFb0wsR0FBRyxFQUFFUyxHQUFHLEVBQUVILEdBQUcsRUFBRUssR0FBRyxFQUFFTixHQUFHLEVBQUVRLEdBQUcsRUFBRXZFLEdBQUcsRUFBRXZILFFBQVEsRUFBRWtNLEdBQUcsR0FBTzJCLEdBQUcsQ0FBQzdDLEdBQUcsV0FBV3FCLEdBQUcsVUFBVTFFLEdBQUcsUUFBUUosR0FBRyxRQUFRNEUsR0FBRyxRQUFRQyxHQUFHLG1CQUFtQnBNLFFBQVEsVUFBVStMLEdBQUcsa0JBQWtCRSxHQUFHLFdBQVdiLEdBQUcsbUJBQW1Ca0IsR0FBRyxrQkFBa0IsU0FBU3dCLE1BQTBCLFNBQVNDLEdBQUd0K0YsR0FBRyxJQUFJMUUsRUFBc0IsT0FBbkJBLEVBQUUwRSxFQUFFQSxLQUFLMUUsRUFBRTBFLEVBQUVBLEVBQUUsSUFBVzFFLEVBQUUsU0FBU2lqRyxNQUEvRUYsR0FBR3BqRyxVQUFVK0UsRUFBRSxLQUFzRSxJQUEwSHcrRixHQUF0SHJCLEdBQUUsQ0FBQzdLLEtBQUssSUFBSW9KLEdBQUcsSUFBSXhELEdBQUcsSUFBSXFFLEdBQUcsS0FBSyxTQUFTa0MsS0FBSy9GLEdBQUVsL0YsS0FBS29DLEtBQUssS0FBYyxTQUFTOGlHLEtBQUtoRyxHQUFFbC9GLEtBQUtvQyxLQUFLLEtBQXFCLFNBQVMraUcsTUFBeUIsU0FBU0MsR0FBRTUrRixFQUFFMUUsRUFBRTVCLEdBQUdrQyxLQUFLNkMsRUFBRXVCLEVBQUVwRSxLQUFLK00sRUFBRXJOLEVBQUVNLEtBQUtpakcsRUFBRW5sRyxHQUFHLEVBQUVrQyxLQUFLaWlHLEVBQUUsSUFBSUwsR0FBRTVoRyxNQUFNQSxLQUFLa2pHLEVBQUVDLEdBQUcvK0YsRUFBRXUzRixFQUFHLFNBQUksRUFBTzM3RixLQUFLNkIsRUFBRSxJQUFJdy9GLEdBQUdqOUYsR0FBR3BFLEtBQUtvNkYsRUFBRSxLQUFLcDZGLEtBQUtOLEdBQUUsRUFBR00sS0FBS3RDLEVBQUVzQyxLQUFLKzhGLEVBQUUvOEYsS0FBSzJDLEVBQUUzQyxLQUFLMitGLEVBQUUzK0YsS0FBS3FELEVBQUVyRCxLQUFLb2pHLEVBQUVwakcsS0FBS3ZDLEVBQUUsS0FBS3VDLEtBQUtxRSxFQUFFLEdBQUdyRSxLQUFLb0UsRUFBRSxLQUFLcEUsS0FBSzI2RixFQUFFLEVBQUUzNkYsS0FBS2xDLEVBQUVrQyxLQUFLZzZGLEVBQUUsS0FBS2g2RixLQUFLOUIsR0FBRyxFQUFFOEIsS0FBS25DLEdBQUUsRUFBR21DLEtBQUtvZ0csRUFBRSxFQUFFcGdHLEtBQUt5N0YsRUFBRSxLQUFLejdGLEtBQUtSLEVBQUVRLEtBQUtxakcsRUFBRXJqRyxLQUFLNGhHLEdBQUUsRUFBblkzSCxFQUFFNEksR0FBRy9GLElBQW1DN0MsRUFBRTZJLEdBQUdoRyxJQUF5QjdDLEVBQUU4SSxHQUFHTixJQUFJRyxHQUFHLElBQUlHLEdBQWlULElBQUlJLEdBQUcsS0FBS0csR0FBRyxHQUFHQyxHQUFHLEdBQXFELFNBQVNDLEdBQUdwL0YsRUFBRTFFLEVBQUU1QixHQUFHc0csRUFBRXU2RixFQUFFLEVBQUV2NkYsRUFBRXpCLEVBQUU4Z0csR0FBR3ZKLEdBQUV4NkYsSUFBSTBFLEVBQUUxRyxFQUFFSSxFQUFFc0csRUFBRXc5RixHQUFFLEVBQUc4QixHQUFHdC9GLEVBQUUsTUFBTyxTQUFTdS9GLEdBQUd2L0YsRUFBRTFFLEVBQUU1QixFQUFFQyxHQUFHcUcsRUFBRXU2RixFQUFFLEVBQUV2NkYsRUFBRXpCLEVBQUU4Z0csR0FBR3ZKLEdBQUV4NkYsSUFBSTBFLEVBQUUxRyxFQUFFLEtBQUswRyxFQUFFdzlGLEVBQUU5akcsRUFBRTRsRyxHQUFHdC9GLEVBQUVyRyxHQUN0Z0YsU0FBUzJsRyxHQUFHdC9GLEVBQUUxRSxHQUFHMEUsRUFBRWYsRUFBRTIyRixJQUFJNEosR0FBR3gvRixHQUFHQSxFQUFFMjRGLEVBQUU3QyxHQUFFOTFGLEVBQUV6QixHQUFHa2hHLEdBQUd6L0YsRUFBRTI0RixFQUFFLElBQUkzNEYsRUFBRTYrRixHQUFHNytGLEVBQUV1MkYsRUFBRSxFQUFFdjJGLEVBQUVBLEVBQUVBLEVBQUV2QixFQUFFaWhHLEVBQUUxL0YsRUFBRXZCLEVBQUVraEcsSUFBSXJrRyxFQUFFLE1BQU0sRUFBRTBFLEVBQUVnOEYsSUFBSWg4RixFQUFFcTNGLEVBQUUsSUFBSWdHLEdBQUdqNUYsRUFBRXBFLEVBQUU0M0YsR0FBRzUzRixFQUFFQSxFQUFFQSxHQUFHQSxFQUFFZzhGLElBQUkwQixHQUFHMTlGLEVBQUU2OUYsRUFBRTc5RixFQUFFQSxFQUFFLG1CQUFtQkEsRUFBRWl6QixJQUFJMzNCLEVBQUUwRSxFQUFFZzJGLEVBQUVlLEVBQUcvMkYsRUFBRWcyRixHQUFHLEdBQUdoMkYsRUFBRTFHLEdBQUcwRyxFQUFFNDFGLElBQUk1MUYsRUFBRTQxRixFQUFFLFFBQVF0NkYsRUFBRSxnQkFBZ0Isb0NBQW9DMEUsRUFBRUEsRUFBRXUxRixHQUFHdjFGLEVBQUUyNEYsRUFBRTM0RixFQUFFNDFGLEVBQUU1MUYsRUFBRTFHLEVBQUVnQyxLQUFLMEUsRUFBRTQxRixFQUFFLE1BQU01MUYsRUFBRUEsRUFBRXUxRixHQUFHdjFGLEVBQUUyNEYsRUFBRTM0RixFQUFFNDFGLEVBQUUsS0FBS3Q2RixJQUFJMGdHLEdBQUUsR0FFckgsU0FBUzRELEdBQUc1L0YsRUFBRTFFLEVBQUU1QixHQUFHLElBQUksSUFBSUMsR0FBRSxHQUFJcUcsRUFBRXZHLEdBQUd1RyxFQUFFdTJGLEVBQUU3OEYsRUFBRXVDLFFBQVEsQ0FBQyxJQUFJRyxFQUFFeWpHLEdBQUc3L0YsRUFBRXRHLEdBQUcsR0FBRzBDLEdBQUcraUcsR0FBRyxDQUFDLEdBQUc3akcsSUFBSTBFLEVBQUV0RyxFQUFFLEVBQUVza0csR0FBRSxJQUFJcmtHLEdBQUUsR0FBSSxNQUFXLEdBQUd5QyxHQUFHOGlHLEdBQUcsQ0FBQ2wvRixFQUFFdEcsRUFBRSxFQUFFc2tHLEdBQUUsSUFBSXJrRyxHQUFFLEVBQUcsTUFBV21tRyxHQUFHOS9GLEVBQUU1RCxHQUFJLEdBQUdkLEdBQUcsR0FBRzVCLEVBQUV1QyxTQUFTK0QsRUFBRXRHLEVBQUUsRUFBRXNrRyxHQUFFLElBQUlya0csR0FBRSxHQUFJcUcsRUFBRTFFLEVBQUUwRSxFQUFFMUUsR0FBRzNCLEVBQUVBLElBQUk4RCxHQUFFdUMsR0FBRysvRixHQUFHLy9GLElBQzNTLFNBQVM2L0YsR0FBRzcvRixFQUFFMUUsR0FBRyxJQUFJNUIsRUFBRXNHLEVBQUV1MkYsRUFBRTU4RixFQUFFMkIsRUFBRWUsUUFBUSxLQUFLM0MsR0FBRyxPQUFJLEdBQUdDLEVBQVN3bEcsSUFBR3psRyxFQUFFOG9CLE9BQU9sbkIsRUFBRXlwQixVQUFVcnJCLEVBQUVDLElBQU84b0IsTUFBTS9vQixHQUFVd2xHLElBQUd2bEcsR0FBRyxHQUFPRCxFQUFFNEIsRUFBRVcsT0FBY2tqRyxJQUFHN2pHLEVBQUVBLEVBQUUwc0UsT0FBT3J1RSxFQUFFRCxHQUFHc0csRUFBRXUyRixFQUFFNThGLEVBQUVELEVBQVM0QixJQUEwQyxTQUFTa2tHLEdBQUd4L0YsR0FBR0EsRUFBRWcvRixFQUFFcEosSUFBSTUxRixFQUFFOCtGLEVBQUVrQixHQUFHaGdHLEVBQUVBLEVBQUU4K0YsR0FBSSxTQUFTa0IsR0FBR2hnRyxFQUFFMUUsR0FBRyxHQUFHLE1BQU0wRSxFQUFFM0csRUFBRSxNQUFNd0ksTUFBTSwyQkFBMkI3QixFQUFFM0csRUFBRTZrRyxHQUFHOTVGLEVBQUVwRSxFQUFFaWdHLEdBQUdqZ0csR0FBRzFFLEdBQ25kLFNBQVM0a0csR0FBR2xnRyxHQUFHQSxFQUFFM0csSUFBSTBHLEVBQUV5c0IsYUFBYXhzQixFQUFFM0csR0FBRzJHLEVBQUUzRyxFQUFFLE1BQWlJLFNBQVMwbUcsR0FBRy8vRixHQUFHQSxFQUFFdkIsRUFBRTI0RixNQUFNcDNGLEVBQUV2RyxHQUFHdUcsRUFBRXZCLEVBQUUwaEcsR0FBR25nRyxHQUFJLFNBQVN2QyxHQUFFdUMsR0FBR2tnRyxHQUFHbGdHLEdBQUcsSUFBSTFFLEVBQUUwRSxFQUFFcTNGLEVBQUUvN0YsR0FBRyxtQkFBbUJBLEVBQUUyNkYsSUFBSTM2RixFQUFFMjZGLEtBQUtqMkYsRUFBRXEzRixFQUFFLEtBQUs2RixHQUFHbDlGLEVBQUV2QyxHQUFHa2dHLEdBQUczOUYsRUFBRTY5RixHQUFHNzlGLEVBQUVBLElBQUkxRSxFQUFFMEUsRUFBRUEsRUFBRUEsRUFBRUEsRUFBRSxLQUFLMUUsRUFBRTQrQixRQUFRNStCLEVBQUUyNkYsTUFBTyxTQUFTNkosR0FBRzkvRixFQUFFMUUsR0FBRyxJQUFJMEUsRUFBRXZCLEVBQUUrNEYsR0FBR3gzRixFQUFFMUUsR0FBRzBnRyxHQUFFLEdBQUksTUFBTXRpRyxLQUN0WSxTQUFTMG1HLEdBQUdwZ0csRUFBRTFFLEdBQUcsR0FBRzBFLEVBQUVvTixTQUFTLG1CQUFtQnBOLEVBQUVvTixRQUFRcE4sRUFBRW9OLFFBQVE5UixPQUFFLFFBQWEsR0FBR2k2RixFQUFHdjFGLElBQUl2RyxFQUFFdUcsR0FBR2kyRixFQUFHajJGLEVBQUUxRSxPQUFFLE9BQVksQ0FBQyxHQUFHMEUsRUFBRWcrRixHQUFHLG1CQUFtQmgrRixFQUFFZytGLEVBQUUsSUFBSXRrRyxFQUFFc0csRUFBRWcrRixTQUFTLEdBQUdoK0YsRUFBRTA0RixHQUFHLG1CQUFtQjE0RixFQUFFMDRGLEVBQUVoL0YsT0FBRSxPQUFZLEdBQUc2N0YsRUFBR3YxRixJQUFJdkcsRUFBRXVHLEdBQUcsQ0FBQ3RHLEVBQUUsR0FBRyxJQUFJLElBQUlDLEVBQUVxRyxFQUFFL0QsT0FBT0csRUFBRSxFQUFFQSxFQUFFekMsRUFBRXlDLElBQUkxQyxFQUFFMkYsS0FBS2pELFFBQVMsSUFBSUEsS0FBSzFDLEVBQUUsR0FBR0MsRUFBRSxFQUFFcUcsRUFBRXRHLEVBQUVDLEtBQUt5QyxFQUFVQSxHQUFSekMsRUFEcUYsU0FBWXFHLEdBQUcsR0FBR0EsRUFBRTA0RixHQUFHLG1CQUFtQjE0RixFQUFFMDRGLEVBQUUsT0FBTzE0RixFQUFFMDRGLElBQUksR0FBR2ovRixFQUFFdUcsR0FBRyxPQUFPQSxFQUFFOEgsTUFBTSxJQUFJLEdBQUd5dEYsRUFBR3YxRixHQUFHLENBQUMsSUFBSSxJQUFJMUUsRUFBRSxHQUFHNUIsRUFBRXNHLEVBQUUvRCxPQUFPdEMsRUFBRSxFQUFFQSxFQUFFRCxFQUFFQyxJQUFJMkIsRUFBRStELEtBQUtXLEVBQUVyRyxJQUFJLE9BQU8yQixFQUFXLElBQUkzQixLQUFiMkIsRUFBRSxHQUFHNUIsRUFBRSxFQUFXc0csRUFBRTFFLEVBQUU1QixLQUFLc0csRUFBRXJHLEdBQUcsT0FBTzJCLEVBQ3BSK2tHLENBQUdyZ0csSUFBTy9ELE9BQU8sSUFBSSxJQUFJc0MsRUFBRSxFQUFFQSxFQUFFbkMsRUFBRW1DLElBQUlqRCxFQUFFOUIsVUFBSyxFQUFPRyxFQUFFNEUsR0FBRzdFLEdBQUdBLEVBQUU2RSxHQUFHeUIsSUFBSyxTQUFTc2dHLEdBQUV0Z0csRUFBRTFFLEdBQUdNLEtBQUtOLEVBQUUsR0FBR00sS0FBS29FLEVBQUUsR0FBR3BFLEtBQUtsQyxFQUFFLEVBQUUsSUFBSUEsRUFBRXNDLFVBQVVDLE9BQU8sR0FBRyxFQUFFdkMsRUFBRSxDQUFDLEdBQUdBLEVBQUUsRUFBRSxNQUFNbUksTUFBTSw4QkFBOEIsSUFBSSxJQUFJbEksRUFBRSxFQUFFQSxFQUFFRCxFQUFFQyxHQUFHLEVBQUVpQyxLQUFLa1UsSUFBSTlULFVBQVVyQyxHQUFHcUMsVUFBVXJDLEVBQUUsU0FBVSxHQUFHcUcsRUFBRSxHQUFHQSxhQUFhc2dHLEdBQUUsSUFBSTVtRyxFQUFFc0csRUFBRWcrRixJQUFJcmtHLEVBQUUsRUFBRUEsRUFBRUQsRUFBRXVDLE9BQU90QyxJQUFJaUMsS0FBS2tVLElBQUlwVyxFQUFFQyxHQUFHcUcsRUFBRTlGLElBQUlSLEVBQUVDLFVBQVUsSUFBSUEsS0FBS3FHLEVBQUVwRSxLQUFLa1UsSUFBSW5XLEVBQUVxRyxFQUFFckcsSUFDL25CLFNBQVM0bUcsR0FBR3ZnRyxFQUFFMUUsR0FBRzBqRyxHQUFFaC9GLEVBQUUxRSxFQUFFQSxZQUFZMEUsRUFBRTFFLEVBQUVBLEdBQUcwRSxFQUFFdEcsSUFBSXNHLEVBQUVBLEVBQUUvRCxPQUFPLEVBQUUrRCxFQUFFdEcsR0FBRzhtRyxHQUFHeGdHLElBQUssU0FBU3dnRyxHQUFHeGdHLEdBQUcsR0FBR0EsRUFBRXRHLEdBQUdzRyxFQUFFQSxFQUFFL0QsT0FBTyxDQUFDLElBQUksSUFBSVgsRUFBRSxFQUFFNUIsRUFBRSxFQUFFNEIsRUFBRTBFLEVBQUVBLEVBQUUvRCxRQUFRLENBQUMsSUFBSXRDLEVBQUVxRyxFQUFFQSxFQUFFMUUsR0FBRzBqRyxHQUFFaC9GLEVBQUUxRSxFQUFFM0IsS0FBS3FHLEVBQUVBLEVBQUV0RyxLQUFLQyxHQUFHMkIsSUFBSzBFLEVBQUVBLEVBQUUvRCxPQUFPdkMsRUFBRyxHQUFHc0csRUFBRXRHLEdBQUdzRyxFQUFFQSxFQUFFL0QsT0FBTyxDQUFDLElBQUlHLEVBQUUsR0FBRyxJQUFJMUMsRUFBRTRCLEVBQUUsRUFBRUEsRUFBRTBFLEVBQUVBLEVBQUUvRCxRQUFpQitpRyxHQUFFNWlHLEVBQVh6QyxFQUFFcUcsRUFBRUEsRUFBRTFFLE1BQVkwRSxFQUFFQSxFQUFFdEcsS0FBS0MsRUFBRXlDLEVBQUV6QyxHQUFHLEdBQUcyQixJQUFJMEUsRUFBRUEsRUFBRS9ELE9BQU92QyxHQUN4TyxTQUFTc2xHLEdBQUVoL0YsRUFBRTFFLEdBQUcsT0FBT3ZCLE9BQU9rQixVQUFVQyxlQUFlMUIsS0FBS3dHLEVBQUUxRSxJQVI2cUVtRCxFQUFFbWdHLEdBQUUzakcsV0FBWWt4QixXQUFXLFNBQVNuc0IsR0FBR3BFLEtBQUtrakcsRUFBRTkrRixHQUNwa0V2QixFQUFFdzBCLEdBQUcsU0FBU2p6QixHQUFHQSxFQUFFQSxFQUFFdEQsT0FBTyxJQUFJcEIsRUFBRU0sS0FBS3k3RixFQUFFLzdGLEdBQUcsR0FBR3dqRyxHQUFFOStGLEdBQUcxRSxFQUFFay9GLEtBQUs1K0YsS0FBS2c4RixHQUFHNTNGLElBQ3RZdkIsRUFBRW01RixHQUFHLFNBQVM1M0YsR0FBRyxJQUFJLEdBQUdBLEdBQUdwRSxLQUFLb0UsRUFBRUEsRUFBRSxDQUFDLElBQUkxRSxFQUFFd2pHLEdBQUVsakcsS0FBS29FLEdBQUd0RyxFQUFFa0MsS0FBS29FLEVBQUVpM0YsS0FBS3Q5RixFQUFFaUMsS0FBS29FLEVBQUV5Z0csSUFBSSxLQUFLLEVBQUVubEcsR0FBRyxHQUFHQSxJQUFJaThGLElBQUszN0YsS0FBS29FLEVBQUVxMUYsTUFBTSxDQUFDejVGLEtBQUtuQyxHQUFHLEdBQUc2QixHQUFHLEdBQUc1QixHQUFlc2lHLEdBQVgsR0FBR3RpRyxHQUFHLEdBQUdDLEVBQUksRUFBSyxHQUFJdW1HLEdBQUd0a0csTUFBTSxJQUFJUSxFQUFFUixLQUFLb0UsRUFBRXlnRyxJQUFJN2tHLEtBQUs5QixFQUFFc0MsRUFBRSxJQUFJbUMsRUFBRTNDLEtBQUtvRSxFQUFFcTFGLEtBQUssR0FBR3o1RixLQUFLTixFQUFFLEtBQUtjLEVBQUUsQ0FBQyxHQUFHUixLQUFLcWpHLElBQUlyakcsS0FBS1IsRUFBRSxDQUFDRSxFQUFFLENBQUMsR0FBR00sS0FBS29FLEVBQUUsQ0FBQyxJQUFJZzJGLEVBQUUwSyxHQUFHOWtHLEtBQUtvRSxFQUFFLDJCQUEyQixHQUFHZzJGLElBQUlNLEVBQUdOLEdBQUcsQ0FBQyxJQUFJMThGLEVBQUUwOEYsRUFBRSxNQUFNMTZGLEdBQUdoQyxFQUFFLEtBQU0sSUFBR0EsRUFBMkIsQ0FBQ3NDLEtBQUtOLEdBQUUsRUFBR00sS0FBS2xDLEVBQUUsRUFBRXNrRyxHQUFFLElBQUl2Z0csR0FBRTdCLE1BQU1ta0csR0FBR25rRyxNQUFNLE1BQU1vRSxFQUExRXBFLEtBQUtSLEdBQUUsRUFBRzBrRyxHQUFHbGtHLEtBQUt0QyxHQUEyRHNDLEtBQUs0aEcsR0FBR29DLEdBQUdoa0csS0FBS04sRUFBRWlELEdBQUdnNUYsR0FBSTM3RixLQUFLTixHQUFHLEdBQUdBLElBQUlvaUcsR0FBRzloRyxLQUFLaWlHLEVBQUVqaUcsS0FBSzZCLEVBQUUsT0FBTzdCLEtBQUt3L0YsSUFBSXgvRixLQUFLNkIsRUFBRXd1QixVQUM1ZjZ6RSxHQUFHbGtHLEtBQUsyQyxHQUFHLEdBQUdqRCxHQUFHbUMsR0FBRTdCLE1BQU1BLEtBQUtOLElBQUlNLEtBQUtuQyxJQUFJLEdBQUc2QixFQUFFTSxLQUFLNkMsRUFBRTBoRyxHQUFHdmtHLE9BQU9BLEtBQUtOLEdBQUUsRUFBR2trRyxHQUFHNWpHLGFBQWMsS0FBS1EsR0FBRyxFQUFFbUMsRUFBRWxDLFFBQVEsZ0JBQWdCVCxLQUFLbEMsRUFBRSxFQUFFc2tHLEdBQUUsTUFBTXBpRyxLQUFLbEMsRUFBRSxFQUFFc2tHLEdBQUUsS0FBS3ZnRyxHQUFFN0IsTUFBTW1rRyxHQUFHbmtHLFFBQVMsTUFBTXNnRyxNQUMzTHo5RixFQUFFMjhGLEdBQUcsV0FBVyxHQUFHeC9GLEtBQUtvRSxFQUFFLENBQUMsSUFBSUEsRUFBRTgrRixHQUFFbGpHLEtBQUtvRSxHQUFHMUUsRUFBRU0sS0FBS29FLEVBQUVxMUYsS0FBS3o1RixLQUFLMjZGLEVBQUVqN0YsRUFBRVcsU0FBU2lrRyxHQUFHdGtHLE1BQU1na0csR0FBR2hrRyxLQUFLb0UsRUFBRTFFLEdBQUdNLEtBQUtOLEdBQUcsR0FBRzBFLEdBQUd3L0YsR0FBRzVqRyxTQUE2TDZDLEVBQUU2dEIsT0FBTyxXQUFXMXdCLEtBQUtuQyxHQUFFLEVBQUdnRSxHQUFFN0IsT0FDM1I2QyxFQUFFd2hHLEdBQUcsV0FBV3JrRyxLQUFLdkMsRUFBRSxLQUFLLElBQUkyRyxFQUFFNDFGLElBQUksR0FBRzUxRixFQUFFcEUsS0FBS29qRyxHQUFHLEdBQUdwakcsS0FBSzIrRixJQUFJeUIsR0FBRSxHQUFHZ0MsR0FBRSxLQUFLdmdHLEdBQUU3QixNQUFNQSxLQUFLbEMsRUFBRSxFQUFFcW1HLEdBQUdua0csT0FBT29rRyxHQUFHcGtHLEtBQUtBLEtBQUtvakcsRUFBRWgvRixLQUNxZ0J2QixFQUFFNmhHLEdBQUVybEcsV0FBWXk5RixFQUFFLFdBQVc4SCxHQUFHNWtHLE1BQU0sSUFBSSxJQUFJb0UsRUFBRSxHQUFHMUUsRUFBRSxFQUFFQSxFQUFFTSxLQUFLb0UsRUFBRS9ELE9BQU9YLElBQUkwRSxFQUFFWCxLQUFLekQsS0FBS04sRUFBRU0sS0FBS29FLEVBQUUxRSxLQUFLLE9BQU8wRSxHQUFHdkIsRUFBRXUvRixFQUFFLFdBQW9CLE9BQVR3QyxHQUFHNWtHLE1BQWFBLEtBQUtvRSxFQUFFSixVQUN6ZW5CLEVBQUV2RSxJQUFJLFNBQVM4RixFQUFFMUUsR0FBRyxPQUFPMGpHLEdBQUVwakcsS0FBS04sRUFBRTBFLEdBQUdwRSxLQUFLTixFQUFFMEUsR0FBRzFFLEdBQUdtRCxFQUFFcVIsSUFBSSxTQUFTOVAsRUFBRTFFLEdBQUcwakcsR0FBRXBqRyxLQUFLTixFQUFFMEUsS0FBS3BFLEtBQUtsQyxJQUFJa0MsS0FBS29FLEVBQUVYLEtBQUtXLElBQUlwRSxLQUFLTixFQUFFMEUsR0FBRzFFLEdBQ25kbUQsRUFBRTJPLFFBQVEsU0FBU3BOLEVBQUUxRSxHQUFHLElBQUksSUFBSTVCLEVBQUVrQyxLQUFLb2lHLElBQUlya0csRUFBRSxFQUFFQSxFQUFFRCxFQUFFdUMsT0FBT3RDLElBQUksQ0FBQyxJQUFJeUMsRUFBRTFDLEVBQUVDLEdBQUc0RSxFQUFFM0MsS0FBSzFCLElBQUlrQyxHQUFHNEQsRUFBRXhHLEtBQUs4QixFQUFFaUQsRUFBRW5DLEVBQUVSLFFBQTBFLElBQUkra0csR0FBRyx1SEFBb1YsU0FBUzFCLEdBQUVqL0YsRUFBRTFFLEdBQWtFLElBQUk1QixFQUFuRWtDLEtBQUtOLEVBQUVNLEtBQUtxRSxFQUFFckUsS0FBSzJDLEVBQUUsR0FBRzNDLEtBQUt2QyxFQUFFLEtBQUt1QyxLQUFLNkMsRUFBRTdDLEtBQUtvRSxFQUFFLEdBQUdwRSxLQUFLbzZGLEdBQUUsRUFBU2gyRixhQUFhaS9GLElBQUdyakcsS0FBS282RixPQUFFLElBQVMxNkYsRUFBRUEsRUFBRTBFLEVBQUVnMkYsRUFBRTRLLEdBQUdobEcsS0FBS29FLEVBQUV6QixHQUFHM0MsS0FBS3FFLEVBQUVELEVBQUVDLEVBQUU0Z0csR0FBR2psRyxLQUFLb0UsRUFBRTFFLEdBQUd3bEcsR0FBR2xsRyxLQUFLb0UsRUFBRTNHLEdBQUd1QyxLQUFLb0UsRUFBRUEsRUFBRUEsRUFBRStnRyxHQUFHbmxHLEtBQUtvbEcsR0FBR2hoRyxFQUFFdEcsSUFBSWtDLEtBQUs2QyxFQUFFdUIsRUFBRXZCLEdBQUd1QixJQUFJdEcsRUFBRXVLLE9BQU9qRSxHQUFHd1UsTUFBTW1zRixNQUFNL2tHLEtBQUtvNkYsSUFBSTE2RixFQUFFc2xHLEdBQUdobEcsS0FBS2xDLEVBQUUsSUFBSSxJQUFHLEdBQUlrQyxLQUFLcUUsRUFBRWdoRyxHQUFHdm5HLEVBQUUsSUFBSSxJQUFJbW5HLEdBQUdqbEcsS0FBS2xDLEVBQUUsSUFBSSxJQUFHLEdBQUlvbkcsR0FBR2xsRyxLQUFLbEMsRUFBRSxJQUFJa0MsS0FBS29FLEVBQUVpaEcsR0FBR3ZuRyxFQUFFLElBQUksSUFBRyxHQUFJcW5HLEdBQUdubEcsS0FBS2xDLEVBQUUsSUFBSSxJQUFHLEdBQUlrQyxLQUFLNkMsRUFBRXdpRyxHQUFHdm5HLEVBQUUsSUFBSSxNQUFNa0MsS0FBS282RixJQUFJMTZGLEVBQUVNLEtBQUtsQyxFQUFFLElBQUl3bkcsR0FBRyxLQUFLdGxHLEtBQUtvNkYsSUFHeHlCLFNBQVNGLEdBQUU5MUYsR0FBRyxPQUFPLElBQUlpL0YsR0FBRWovRixHQUFHLFNBQVM0Z0csR0FBRzVnRyxFQUFFMUUsRUFBRTVCLEdBQUdzRyxFQUFFekIsRUFBRTdFLEVBQUV1bkcsR0FBRzNsRyxHQUFFLEdBQUlBLEVBQUUwRSxFQUFFekIsSUFBSXlCLEVBQUV6QixFQUFFeUIsRUFBRXpCLEVBQUUySSxRQUFRLEtBQUssS0FBTSxTQUFTMjVGLEdBQUc3Z0csRUFBRTFFLEVBQUU1QixHQUFHc0csRUFBRTFFLEVBQUU1QixFQUFFdW5HLEdBQUczbEcsR0FBRSxHQUFJQSxFQUFHLFNBQVN3bEcsR0FBRzlnRyxFQUFFMUUsR0FBRyxHQUFHQSxFQUFFLENBQWEsR0FBWkEsRUFBRWtuQixPQUFPbG5CLEdBQU1tbkIsTUFBTW5uQixJQUFJLEVBQUVBLEVBQUUsTUFBTXVHLE1BQU0sbUJBQW1CdkcsR0FBRzBFLEVBQUUzRyxFQUFFaUMsT0FBUTBFLEVBQUUzRyxFQUFFLEtBQU0sU0FBUzBuRyxHQUFHL2dHLEVBQUUxRSxFQUFFNUIsR0FBRzRCLGFBQWE0bEcsSUFBSWxoRyxFQUFFdEcsRUFBRTRCLEVBTXBTLFNBQVkwRSxFQUFFMUUsR0FBR0EsSUFBSTBFLEVBQUV6QixJQUFJZy9GLEdBQUV2OUYsR0FBR0EsRUFBRXRHLEVBQUUsS0FBS3NHLEVBQUVBLEVBQUVvTixTQUFRLFNBQVMxVCxFQUFFQyxHQUFHLElBQUl5QyxFQUFFekMsRUFBRW0zRixjQUFjbjNGLEdBQUd5QyxJQUFJK2tHLEdBQUd2bEcsS0FBS2pDLEdBQUd5bkcsR0FBR3hsRyxLQUFLUSxFQUFFMUMsTUFBTXNHLElBQUlBLEVBQUV6QixFQUFFakQsRUFObUsrbEcsQ0FBR3JoRyxFQUFFdEcsRUFBRXNHLEVBQUVnMkYsS0FBS3Q4RixJQUFJNEIsRUFBRWdtRyxHQUFHaG1HLEVBQUVpbUcsS0FBS3ZoRyxFQUFFdEcsRUFBRSxJQUFJd25HLEdBQUc1bEcsRUFBRTBFLEVBQUVnMkYsSUFDNWQsU0FBU3lLLEdBQUV6Z0csRUFBRTFFLEVBQUU1QixHQUFHc0csRUFBRXRHLEVBQUVvVyxJQUFJeFUsRUFBRTVCLEdBQUksU0FBUytsRyxHQUFHei9GLEVBQUUxRSxFQUFFNUIsR0FBRzRHLEVBQUU1RyxLQUFLQSxFQUFFLENBQUN1SyxPQUFPdkssS0FBSzBuRyxHQUFHcGhHLEVBQUV0RyxFQUFFNEIsRUFBRTVCLEdBQUksU0FBUzJsRyxHQUFHci9GLEdBQStILE9BQTVIeWdHLEdBQUV6Z0csRUFBRSxLQUFLd00sS0FBS0MsTUFBTSxXQUFXRCxLQUFLcVosVUFBVXplLFNBQVMsSUFBSW9GLEtBQUtnMUYsSUFBSWgxRixLQUFLQyxNQUFNLFdBQVdELEtBQUtxWixVQUFVK3ZFLEtBQUt4dUYsU0FBUyxLQUFZcEgsRUFBK0osU0FBU2loRyxHQUFHamhHLEVBQUUxRSxHQUFHLE9BQU8wRSxFQUFFMUUsRUFBRW1tRyxVQUFVemhHLEVBQUVrSCxRQUFRLE9BQU8sVUFBVXc2RixtQkFBbUIxaEcsR0FBRyxHQUM5ZCxTQUFTc2hHLEdBQUd0aEcsRUFBRTFFLEVBQUU1QixHQUFHLE9BQU9ELEVBQUV1RyxJQUFJQSxFQUFFMmhHLFVBQVUzaEcsR0FBR2tILFFBQVE1TCxFQUFFc21HLElBQUlsb0csSUFBSXNHLEVBQUVBLEVBQUVrSCxRQUFRLHVCQUF1QixRQUFRbEgsR0FBRyxLQUFLLFNBQVM0aEcsR0FBRzVoRyxHQUFxQixNQUFPLE1BQXpCQSxFQUFFQSxFQUFFaUMsV0FBVyxLQUFrQixFQUFFLElBQUltRixTQUFTLEtBQU8sR0FBRnBILEdBQU1vSCxTQUFTLElBSnZNNjNGLEdBQUVoa0csVUFBVW1NLFNBQVMsV0FBVyxJQUFJcEgsRUFBRSxHQUFHMUUsRUFBRU0sS0FBSzJDLEVBQUVqRCxHQUFHMEUsRUFBRVgsS0FBS2lpRyxHQUFHaG1HLEVBQUV1bUcsSUFBRyxHQUFJLEtBQUssSUFBSW5vRyxFQUFFa0MsS0FBS04sRUFBdVYsT0FBbFY1QixHQUFHLFFBQVE0QixLQUFFMEUsRUFBRVgsS0FBSyxPQUFPL0QsRUFBRU0sS0FBS3FFLElBQUlELEVBQUVYLEtBQUtpaUcsR0FBR2htRyxFQUFFdW1HLElBQUcsR0FBSSxLQUFLN2hHLEVBQUVYLEtBQUtpTyxtQkFBbUJySixPQUFPdkssSUFBSXdOLFFBQVEsdUJBQXVCLFFBQWlCLE9BQVR4TixFQUFFa0MsS0FBS3ZDLElBQVcyRyxFQUFFWCxLQUFLLElBQUk0RSxPQUFPdkssTUFBT0EsRUFBRWtDLEtBQUtvRSxLQUFFcEUsS0FBS04sR0FBRyxLQUFLNUIsRUFBRStLLE9BQU8sSUFBSXpFLEVBQUVYLEtBQUssS0FBS1csRUFBRVgsS0FBS2lpRyxHQUFHNW5HLEVBQUUsS0FBS0EsRUFBRStLLE9BQU8sR0FBR3E5RixHQUFHQyxJQUFHLE1BQU1yb0csRUFBRWtDLEtBQUtsQyxFQUFFME4sYUFBYXBILEVBQUVYLEtBQUssSUFBSTNGLElBQUlBLEVBQUVrQyxLQUFLNkMsSUFBSXVCLEVBQUVYLEtBQUssSUFBSWlpRyxHQUFHNW5HLEVBQUVzb0csS0FBWWhpRyxFQUFFMEQsS0FBSyxLQUM3YnU3RixHQUFFaGtHLFVBQVUyQyxRQUFRLFNBQVNvQyxHQUFHLElBQUkxRSxFQUFFdzZGLEdBQUVsNkYsTUFBTWxDLElBQUlzRyxFQUFFekIsRUFBRTdFLEVBQUVrbkcsR0FBR3RsRyxFQUFFMEUsRUFBRXpCLEdBQUc3RSxJQUFJc0csRUFBRUMsRUFBRXZHLEVBQUU0QixFQUFFMkUsRUFBRUQsRUFBRUMsRUFBRXZHLElBQUlzRyxFQUFFMUUsRUFBRTVCLEVBQUVtbkcsR0FBR3ZsRyxFQUFFMEUsRUFBRTFFLEdBQUc1QixFQUFFLE1BQU1zRyxFQUFFM0csRUFBRSxJQUFJTSxFQUFFcUcsRUFBRUEsRUFBRSxHQUFHdEcsRUFBRW9uRyxHQUFHeGxHLEVBQUUwRSxFQUFFM0csUUFBUSxHQUFHSyxJQUFJc0csRUFBRUEsRUFBRSxDQUFDLEdBQUcsS0FBS3JHLEVBQUU4SyxPQUFPLEdBQUcsR0FBRzdJLEtBQUtOLElBQUlNLEtBQUtvRSxFQUFFckcsRUFBRSxJQUFJQSxNQUFNLENBQUMsSUFBSXlDLEVBQUVkLEVBQUUwRSxFQUFFaWlHLFlBQVksTUFBTSxHQUFHN2xHLElBQUl6QyxFQUFFMkIsRUFBRTBFLEVBQUVnb0UsT0FBTyxFQUFFNXJFLEVBQUUsR0FBR3pDLEdBQVEsR0FBRyxPQUFQeUMsRUFBRXpDLElBQWMsS0FBS3lDLEVBQUV6QyxFQUFFLFFBQVEsR0FBRys4RixFQUFFdDZGLEVBQUUsT0FBT3M2RixFQUFFdDZGLEVBQUUsTUFBTSxDQUFDekMsRUFBRSxHQUFHeUMsRUFBRTZsRyxZQUFZLElBQUksR0FBRzdsRyxFQUFFQSxFQUFFMEwsTUFBTSxLQUFLLElBQUksSUFBSXZKLEVBQUUsR0FBR3kzRixFQUFFLEVBQUVBLEVBQUU1NUYsRUFBRUgsUUFBUSxDQUFDLElBQUkzQyxFQUFFOEMsRUFBRTQ1RixLQUFLLEtBQUsxOEYsRUFBRUssR0FBR3E4RixHQUFHNTVGLEVBQUVILFFBQVFzQyxFQUFFYyxLQUFLLElBQUksTUFBTS9GLElBQUksRUFBRWlGLEVBQUV0QyxRQUFRLEdBQUdzQyxFQUFFdEMsUUFBUSxJQUFJc0MsRUFBRSxLQUFLQSxFQUFFYSxNQUFNekYsR0FDbmZxOEYsR0FBRzU1RixFQUFFSCxRQUFRc0MsRUFBRWMsS0FBSyxNQUFNZCxFQUFFYyxLQUFLL0YsR0FBR0ssR0FBRSxHQUFLQSxFQUFFNEUsRUFBRW1GLEtBQUssVUFBVy9KLEVBQUV5QyxFQUFzRSxPQUFuRTFDLEVBQUU0QixFQUFFMEUsRUFBRXJHLEVBQUVELEVBQUUsS0FBS3NHLEVBQUV0RyxFQUFFME4sV0FBVzFOLEVBQUVxbkcsR0FBR3psRyxFQUFFMGxHLEdBQUdoaEcsRUFBRXRHLElBQUlBLElBQUlzRyxFQUFFdkIsRUFBRS9FLElBQUk0QixFQUFFbUQsRUFBRXVCLEVBQUV2QixHQUFVbkQsR0FFNkQsSUFBSXVtRyxHQUFHLFlBQVlFLEdBQUcsVUFBVUQsR0FBRyxTQUFTUCxHQUFHLFVBQVVTLEdBQUcsS0FBSyxTQUFTZCxHQUFHbGhHLEVBQUUxRSxHQUFHTSxLQUFLTixFQUFFTSxLQUFLb0UsRUFBRSxLQUFLcEUsS0FBS2xDLEVBQUVzRyxHQUFHLEtBQUtwRSxLQUFLMkMsSUFBSWpELEVBQUcsU0FBU2lpRyxHQUFFdjlGLEdBQUdBLEVBQUVBLElBQUlBLEVBQUVBLEVBQUUsSUFBSXNnRyxHQUFFdGdHLEVBQUUxRSxFQUFFLEVBQUUwRSxFQUFFdEcsR0FMcEUsU0FBWXNHLEVBQUUxRSxHQUFHLEdBQUcwRSxFQUFFLENBQUNBLEVBQUVBLEVBQUU4SCxNQUFNLEtBQUssSUFBSSxJQUFJcE8sRUFBRSxFQUFFQSxFQUFFc0csRUFBRS9ELE9BQU92QyxJQUFJLENBQUMsSUFBSUMsRUFBRXFHLEVBQUV0RyxHQUFHMkMsUUFBUSxLQUFLRCxFQUFFLEtBQUssR0FBRyxHQUFHekMsRUFBRSxDQUFDLElBQUk0RSxFQUFFeUIsRUFBRXRHLEdBQUdxckIsVUFBVSxFQUFFcHJCLEdBQUd5QyxFQUFFNEQsRUFBRXRHLEdBQUdxckIsVUFBVXByQixFQUFFLFFBQVM0RSxFQUFFeUIsRUFBRXRHLEdBQUc0QixFQUFFaUQsRUFBRW5DLEVBQUVzbEcsbUJBQW1CdGxHLEVBQUU4SyxRQUFRLE1BQU0sTUFBTSxNQUsvSWc3RixDQUFHbGlHLEVBQUV0RyxHQUFFLFNBQVM0QixFQUFFNUIsR0FBR3NHLEVBQUU2eUIsSUFBSTZ1RSxtQkFBbUJwbUcsRUFBRTRMLFFBQVEsTUFBTSxNQUFNeE4sT0FDelQsU0FBU3luRyxHQUFHbmhHLEVBQUUxRSxHQUFHaWlHLEdBQUV2OUYsR0FBRzFFLEVBQUV1akcsR0FBRTcrRixFQUFFMUUsR0FBRzBqRyxHQUFFaC9GLEVBQUVBLEVBQUUxRSxFQUFFQSxLQUFLMEUsRUFBRXRHLEVBQUUsS0FBS3NHLEVBQUUxRSxHQUFHMEUsRUFBRUEsRUFBRTlGLElBQUlvQixHQUFHVyxPQUFPc2tHLEdBQUd2Z0csRUFBRUEsRUFBRTFFLElBQUssU0FBUzZtRyxHQUFHbmlHLEVBQUUxRSxHQUFpQixPQUFkaWlHLEdBQUV2OUYsR0FBRzFFLEVBQUV1akcsR0FBRTcrRixFQUFFMUUsR0FBVTBqRyxHQUFFaC9GLEVBQUVBLEVBQUUxRSxFQUFFQSxHQUVwTCxTQUFTOGxHLEdBQUdwaEcsRUFBRTFFLEVBQUU1QixHQUFHeW5HLEdBQUduaEcsRUFBRTFFLEdBQUcsRUFBRTVCLEVBQUV1QyxTQUFTK0QsRUFBRXRHLEVBQUUsS0FBS3NHLEVBQUVBLEVBQUU4UCxJQUFJK3VGLEdBQUU3K0YsRUFBRTFFLEdBQUcrNkYsRUFBRzM4RixJQUFJc0csRUFBRTFFLEdBQUc1QixFQUFFdUMsUUFDL0osU0FBUytrRyxHQUFHaGhHLEdBQUcsSUFBSTFFLEVBQUUsSUFBSTRsRyxHQUF5QyxPQUF0QzVsRyxFQUFFNUIsRUFBRXNHLEVBQUV0RyxFQUFFc0csRUFBRUEsSUFBSTFFLEVBQUUwRSxFQUFFLElBQUlzZ0csR0FBRXRnRyxFQUFFQSxHQUFHMUUsRUFBRUEsRUFBRTBFLEVBQUUxRSxHQUFVQSxFQUFFLFNBQVN1akcsR0FBRTcrRixFQUFFMUUsR0FBd0MsT0FBckNBLEVBQUUySSxPQUFPM0ksR0FBRzBFLEVBQUV6QixJQUFJakQsRUFBRUEsRUFBRXcxRixlQUFzQngxRixFQUErSyxTQUFTOG1HLEdBQUdwaUcsR0FBR3BFLEtBQUtvRSxFQUFFQSxFQUFFcEUsS0FBS04sRUFBRU0sS0FBS282RixFQUFFLEtBQUtwNkYsS0FBSzZDLEdBQUUsRUFBRzdDLEtBQUt2QyxFQUFFLEtBQUt1QyxLQUFLbEMsR0FBRyxFQUFFa0MsS0FBS3RDLEVBQUVzQyxLQUFLMkMsRUFBRSxLQUE4QixTQUFTOGpHLEdBQUdyaUcsR0FBRyxJQUFJMUUsRUFBRTBFLEVBQUVBLEVBQUV1NkYsRUFBRXY2RixFQUFFLEdBQUcsTUFBTTFFLEVBQUUwaUcsR0FBRSxHQUFHMWlHLEdBQUcwaUcsR0FBRSxJQUFJc0UsR0FBR3RpRyxFQUFFQSxFQUFFQSxHQUFFLEtBQU1nK0YsR0FBRSxJQUFJc0UsR0FBR3RpRyxFQUFFQSxFQUFFQSxHQUFFLFFBQVMsQ0FBQ0EsRUFBRTFFLEVBQUUsSUFBSXNqRyxHQUFFNStGLE9BQUUsT0FBTyxHQUFRQSxFQUFFMUUsRUFBRTA2RixFQUFFaDJGLEVBQUVnMkYsRUFBUTE2RixFQUFFaW5HLEdBQVJqbkcsRUFBRTBFLEVBQUVBLEVBQVMxRSxFQUFFcWtHLElBQUkzL0YsRUFBRXpCLEVBQUUsS0FBS3lCLEVBQUUzRyxHQUFHMmtHLEdBQUUsR0FBR3lCLEdBQUdua0csRUFBRSxPQUFPLFdBQVcsSUFBSTVCLEVBQUVzRyxFQUFFQSxFQUFFQyxFQUFFdEcsRUFBRXFHLEVBQUVBLEVBQUU2OUYsRUFBRW5rRyxHQUFHQyxHQUFHOG1HLEdBQUVubEcsRUFBRTVCLEVBQUVDLEdBQUc0bEcsR0FBR3YvRixFQUFFMUUsRUFBRUEsR0FBRSxFQUFHMEUsRUFBRXpCLElBRTlYLFNBQVNpa0csS0FBSzVtRyxLQUFLb0UsRUFBRXBFLEtBQUtOLEVBQUUsS0FBTSxTQUFTbW5HLEtBQUs3bUcsS0FBS29FLEVBQUUsSUFBSXNnRyxHQUFHLFNBQVNvQyxHQUFHMWlHLEdBQUcsSUFBSTFFLFNBQVMwRSxFQUFFLE1BQU8sVUFBVTFFLEdBQUcwRSxHQUFHLFlBQVkxRSxFQUFFLEtBQUswRSxFQUFFekYsS0FBS3lGLEVBQUV6RixLQUFLaTdGLElBQUtsNkYsRUFBRW1KLE9BQU8sR0FBR3pFLEVBQWtHLFNBQVMyaUcsR0FBRzNpRyxFQUFFMUUsR0FBR00sS0FBS04sRUFBRTBFLEVBQUVwRSxLQUFLb0UsRUFBRTFFLEVBQUcsU0FBU3NuRyxHQUFHNWlHLEdBQUdwRSxLQUFLNkMsRUFBRXVCLEdBQUc2aUcsR0FBRzlpRyxFQUFFK2lHLDRCQUE0RTlpRyxFQUFFLEdBQWpEQSxFQUFFRCxFQUFFZ2pHLFlBQVlDLGlCQUFpQixlQUFvQi9tRyxTQUFTLE1BQU0rRCxFQUFFLEdBQUdpakcsaUJBQWlCLE1BQU1qakcsRUFBRSxHQUFHaWpHLGlCQUFrQmpqRyxLQUFLRCxFQUFFbWpHLElBQUluakcsRUFBRW1qRyxHQUFHNUwsSUFBSXYzRixFQUFFbWpHLEdBQUc1TCxNQUFNdjNGLEVBQUVtakcsR0FBRzVMLEtBQUt5RixJQUFJbmhHLEtBQUsyQyxFQUFFeUIsRUFBRXBFLEtBQUs2QyxFQUFFLEVBQUU3QyxLQUFLb0UsRUFBRSxLQUFLLEVBQUVwRSxLQUFLMkMsSUFBSTNDLEtBQUtvRSxFQUFFLElBQUl5aUcsSUFBSTdtRyxLQUFLTixFQUFFLEtBQUtNLEtBQUtsQyxFQUFFLElBTnJiK0UsRUFBRXlpRyxHQUFHam1HLFdBQ25jNDNCLElBQUksU0FBUzd5QixFQUFFMUUsR0FBR2lpRyxHQUFFM2hHLE1BQU1BLEtBQUtsQyxFQUFFLEtBQUtzRyxFQUFFNitGLEdBQUVqakcsS0FBS29FLEdBQUcsSUFBSXRHLEVBQUVrQyxLQUFLb0UsRUFBRTlGLElBQUk4RixHQUE2QyxPQUExQ3RHLEdBQUdrQyxLQUFLb0UsRUFBRThQLElBQUk5UCxFQUFFdEcsRUFBRSxJQUFJQSxFQUFFMkYsS0FBSy9ELEdBQUdNLEtBQUtOLEdBQUcsRUFBU00sTUFBK0k2QyxFQUFFMk8sUUFBUSxTQUFTcE4sRUFBRTFFLEdBQUdpaUcsR0FBRTNoRyxNQUFNQSxLQUFLb0UsRUFBRW9OLFNBQVEsU0FBUzFULEVBQUVDLEdBQUdzOEYsRUFBR3Y4RixHQUFFLFNBQVMwQyxHQUFHNEQsRUFBRXhHLEtBQUs4QixFQUFFYyxFQUFFekMsRUFBRWlDLFFBQVFBLFFBQVFBLE9BQ25YNkMsRUFBRXUvRixFQUFFLFdBQVdULEdBQUUzaEcsTUFBTSxJQUFJLElBQUlvRSxFQUFFcEUsS0FBS29FLEVBQUUwNEYsSUFBSXA5RixFQUFFTSxLQUFLb0UsRUFBRWcrRixJQUFJdGtHLEVBQUUsR0FBR0MsRUFBRSxFQUFFQSxFQUFFMkIsRUFBRVcsT0FBT3RDLElBQUksSUFBSSxJQUFJeUMsRUFBRTRELEVBQUVyRyxHQUFHNEUsRUFBRSxFQUFFQSxFQUFFbkMsRUFBRUgsT0FBT3NDLElBQUk3RSxFQUFFMkYsS0FBSy9ELEVBQUUzQixJQUFJLE9BQU9ELEdBQUcrRSxFQUFFaTZGLEVBQUUsU0FBUzE0RixHQUFHdTlGLEdBQUUzaEcsTUFBTSxJQUFJTixFQUFFLEdBQUcsR0FBRzdCLEVBQUV1RyxHQUFHbWlHLEdBQUd2bUcsS0FBS29FLEtBQUsxRSxFQUFFODZGLEVBQUc5NkYsRUFBRU0sS0FBS29FLEVBQUU5RixJQUFJMmtHLEdBQUVqakcsS0FBS29FLFVBQVUsQ0FBQ0EsRUFBRXBFLEtBQUtvRSxFQUFFMDRGLElBQUksSUFBSSxJQUFJaC9GLEVBQUUsRUFBRUEsRUFBRXNHLEVBQUUvRCxPQUFPdkMsSUFBSTRCLEVBQUU4NkYsRUFBRzk2RixFQUFFMEUsRUFBRXRHLElBQUssT0FBTzRCLEdBQUdtRCxFQUFFcVIsSUFBSSxTQUFTOVAsRUFBRTFFLEdBQTBHLE9BQXZHaWlHLEdBQUUzaEcsTUFBTUEsS0FBS2xDLEVBQUUsS0FBaUJ5b0csR0FBR3ZtRyxLQUFmb0UsRUFBRTYrRixHQUFFampHLEtBQUtvRSxNQUFnQnBFLEtBQUtOLEdBQUdNLEtBQUtvRSxFQUFFOUYsSUFBSThGLEdBQUcvRCxRQUFRTCxLQUFLb0UsRUFBRThQLElBQUk5UCxFQUFFLENBQUMxRSxJQUFJTSxLQUFLTixHQUFHLEVBQVNNLE1BQ3RhNkMsRUFBRXZFLElBQUksU0FBUzhGLEVBQUUxRSxHQUFHLE9BQUkwRSxHQUE4QixHQUFuQkEsRUFBRXBFLEtBQUs4OEYsRUFBRTE0RixJQUFjL0QsT0FBT2dJLE9BQU9qRSxFQUFFLElBQXpDMUUsR0FBdUltRCxFQUFFMkksU0FBUyxXQUFXLEdBQUd4TCxLQUFLbEMsRUFBRSxPQUFPa0MsS0FBS2xDLEVBQUUsSUFBSWtDLEtBQUtvRSxFQUFFLE1BQU8sR0FBRyxJQUFJLElBQUlBLEVBQUUsR0FBRzFFLEVBQUVNLEtBQUtvRSxFQUFFZytGLElBQUl0a0csRUFBRSxFQUFFQSxFQUFFNEIsRUFBRVcsT0FBT3ZDLElBQUksQ0FBQyxJQUFJQyxFQUFFMkIsRUFBRTVCLEdBQUcwQyxFQUFFa1IsbUJBQW1CckosT0FBT3RLLElBQUlBLEVBQUVpQyxLQUFLODhGLEVBQUUvK0YsR0FBRyxJQUFJLElBQUk0RSxFQUFFLEVBQUVBLEVBQUU1RSxFQUFFc0MsT0FBT3NDLElBQUksQ0FBQyxJQUFJeTNGLEVBQUU1NUYsRUFBRSxLQUFLekMsRUFBRTRFLEtBQUt5M0YsR0FBRyxJQUFJMW9GLG1CQUFtQnJKLE9BQU90SyxFQUFFNEUsTUFBTXlCLEVBQUVYLEtBQUsyMkYsSUFBSyxPQUFPcDZGLEtBQUtsQyxFQUFFc0csRUFBRTBELEtBQUssTUFDN0pteUYsR0FBZixlQUFmLGdCQUFzSXAzRixFQUFFMmpHLEdBQUdubkcsV0FBWTJqRyxFQUFFLEtBQTJQbmdHLEVBQUVpaEcsRUFBRSxTQUFTMS9GLEdBQUcsT0FBT3BFLEtBQUtvRSxFQUFFMC9GLEVBQUUxL0YsSUFBSXZCLEVBQUV5N0IsTUFBTSxXQUFXdCtCLEtBQUtOLElBQUlNLEtBQUtOLEVBQUVneEIsU0FBUzF3QixLQUFLTixFQUFFLE1BQU1NLEtBQUtsQyxHQUFHLEdBQUkrRSxFQUFFMjRGLEdBQUcsV0FBVyxPQUFPLEdBQ255QjM0RixFQUFFKzRGLEdBQUcsU0FBU3gzRixFQUFFMUUsR0FBYyxHQUFYTSxLQUFLbEMsRUFBRXNHLEVBQUVsRyxFQUFLLEdBQUc4QixLQUFLZ2pHLEVBQUUsQ0FBQyxJQUFJaGpHLEtBQUtvRSxFQUFFbEcsSUFBSWtHLEVBQUVBLEVBQUVBLEdBQUcsQ0FBQyxJQUFJdEcsRUFBRWduRyxHQUFHMWdHLEVBQUUsMEJBQTBCcEUsS0FBS3RDLEVBQUVJLEdBQUksS0FBS2tDLEtBQUtvRSxFQUFFQyxJQUFJRCxFQUFFMGdHLEdBQUcxZ0csRUFBRSx3QkFBd0JwRSxLQUFLb0UsRUFBRTY5RixFQUFFNzlGLEdBQUksR0FBRzFFLEVBQUUsQ0FBQyxJQUFJLElBQUkzQixFQUFFaUMsS0FBS29FLEVBQUVtMkYsR0FBR24yRixFQUFFdUgsTUFBTWpNLEdBQUksTUFBTWMsR0FBOEIsT0FBM0JkLEVBQUVNLEtBQUtvRSxHQUFJdkcsRUFBRW1DLEtBQUtsQyxPQUFFaVAsR0FBRXJOLEVBQUUsR0FBVU0sS0FBSzJDLEVBQUU1RSxFQUFFLFFBQVMyQixFQUFFTSxLQUFLb0UsR0FBSXZHLEVBQUVtQyxLQUFLbEMsRUFBRWlQLEdBQUVyTixFQUFFLFFBQVksR0FBR00sS0FBS2dqRyxJQUFLaGpHLEtBQUs2QyxFQUFFdS9GLEdBQUUsR0FBVyxTQUFTMWlHLEdBQU0waUcsR0FBRSxHQUFHcGlHLEtBQUs2QyxHQUFFLElBQUk0NEYsR0FBRyxJQUFJNzBFLE9BQU93MUUsTUFBSXA4RixLQUFLbEMsRUFBRSxJQUFJa0MsS0FBS04sRUFBRWd4QixTQUFTMHhFLEdBQUUsSUFBSXNFLEdBQUcxbUcsS0FBS29FLEVBQUVwRSxNQUFLLE1BQVVvaUcsR0FBRSxHQUFHcGlHLEtBQUs2QyxHQUFFLEtBQzljQSxFQUFFMGhHLEdBQUcsV0FBMkIsR0FBaEJ2a0csS0FBS2xDLEVBQUVrQyxLQUFLTixFQUFFeEIsRUFBSzhCLEtBQUtOLEVBQUVBLEVBQUUsR0FBR00sS0FBS2dqRyxHQUFHaGpHLEtBQUtnakcsRUFBRSxFQUFFeUQsR0FBR3ptRyxPQUFPLEdBQUdBLEtBQUtnakcsSUFBSWhqRyxLQUFLNkMsR0FBR3UvRixHQUFFLElBQUlzRSxHQUFHMW1HLEtBQUtvRSxFQUFFcEUsTUFBSyxLQUFNb2lHLEdBQUUsSUFBSXNFLEdBQUcxbUcsS0FBS29FLEVBQUVwRSxNQUFLLFNBQVUsQ0FBQyxHQUFHQSxLQUFLZ2pHLEVBQUVaLEdBQUUsR0FBRyxHQUFHcGlHLEtBQUtnakcsR0FBR1osR0FBRSxHQUFHLElBQUloK0YsRUFBRXBFLEtBQUtvRSxFQUFFQSxFQUFFdkcsRUFBRW1DLEtBQUtsQyxFQUFFaVAsR0FBRTNJLEVBQUUsS0FBTXZCLEVBQUVraEcsRUFBRSxXQUFXLE9BQU8vakcsS0FBS29FLEVBQUUyL0YsS0FBS2xoRyxFQUFFMGtHLEdBQUcsV0FBVyxPQUFPdm5HLEtBQUtvRSxFQUFFbWpHLE1BQTZLVixHQUFHeG5HLFVBQVU0M0IsSUFBSSxTQUFTN3lCLEdBQUdwRSxLQUFLb0UsRUFBRThQLElBQUk0eUYsR0FBRzFpRyxHQUFHQSxJQUFLeWlHLEdBQUd4bkcsVUFBVXk5RixFQUFFLFdBQVcsT0FBTzk4RixLQUFLb0UsRUFBRTA0RixLQUF1VixJQUFJbUssR0FBRyxHQUFHLFNBQVNPLEdBQUdwakcsRUFBRTFFLElBQUkwRSxFQUFFQSxJQUFJMDJGLEVBQUVwN0YsRUFBRSxTQUFTbzdGLEVBQUVwN0YsRUFBRSxTQUFTbzdGLEVBQUVwN0YsRUFBRSxTQUFTMEUsRUFBRXpCLEVBQUV5QixFQUFFdkIsRUFBRXVCLEVBQUVBLEVBQUUsSUFBSXlpRyxHQUFHemlHLEVBQUUxRSxJQUFJK25HLEdBQUdyakcsRUFBRUEsRUFBRTFFLEdBQUcwRSxFQUFFMUUsRUFBRSxPQUFRLFNBQVNnb0csR0FBR3RqRyxHQUFHLFFBQU9BLEVBQUUxRSxLQUFLMEUsRUFBRUEsR0FBRUEsRUFBRUEsRUFBRUEsRUFBRXRHLEdBQUdzRyxFQUFFekIsRUFDN2hDLFNBQVNnbEcsR0FBR3ZqRyxHQUFHLE9BQU9BLEVBQUUxRSxFQUFFLEVBQUUwRSxFQUFFQSxFQUFFQSxFQUFFQSxFQUFFQSxFQUFFdEcsRUFBRSxFQUFFLFNBQVM4cEcsR0FBR3hqRyxFQUFFMUUsR0FBa0QsT0FBL0MwRSxFQUFFMUUsRUFBRTBFLEVBQUVBLEVBQUUxRSxHQUFHQSxFQUFFMEUsRUFBRUEsR0FBRzFFLEVBQUVvbkcsR0FBR3BuRyxHQUFHMEUsRUFBRWcvRixHQUFFaC9GLEVBQUVBLEVBQUVBLEVBQUUxRSxFQUFFQSxJQUFJMEUsR0FBRSxFQUFVQSxFQUFFLFNBQVNxakcsR0FBR3JqRyxFQUFFMUUsR0FBRzBFLEVBQUVBLEVBQUVBLEVBQUVBLEVBQUU2eUIsSUFBSXYzQixHQUFHMEUsRUFBRTFFLEVBQUVBLEVBQUcsU0FBU21vRyxHQUFHempHLEVBQUUxRSxHQUFnQyxJQUFJNUIsRUFBOUJzRyxFQUFFMUUsR0FBRzBFLEVBQUUxRSxHQUFHQSxFQUFFMEUsRUFBRTFFLEVBQUUsT0FBbUI1QixFQUFFc0csRUFBRUEsS0FBRXRHLEVBQUVncEcsR0FBR3BuRyxHQUFHNUIsRUFBRXNsRyxHQUFFaC9GLEVBQUVBLEVBQUVBLEVBQUUxRSxFQUFFNUIsSUFBR0EsR0FBRzZtRyxHQUFHdmdHLEVBQUVBLEVBQUVBLEVBQUUwaUcsR0FBR3BuRyxLQUM3UCxTQUFTd2dCLEdBQUc5YixHQUFHLEdBQUcsTUFBTUEsRUFBRTFFLEVBQUUsT0FBTzBFLEVBQUV0RyxFQUFFa0csT0FBT0ksRUFBRTFFLEVBQUUyRSxHQUFHLEdBQUcsTUFBTUQsRUFBRUEsR0FBRyxHQUFHQSxFQUFFQSxFQUFFQSxFQUFFdEcsRUFBRSxDQUFDLElBQUk0QixFQUFFMEUsRUFBRXRHLEVBQTRDLE9BQTFDdThGLEVBQUdqMkYsRUFBRUEsRUFBRTA0RixLQUFJLFNBQVNoL0YsR0FBRzRCLEVBQUVBLEVBQUVzRSxPQUFPbEcsRUFBRXVHLE1BQWEzRSxFQUFFLE9BQU8rNkYsRUFBR3IyRixFQUFFdEcsR0FBRyxTQUFTZ3FHLE1BQTBJLFNBQVNDLEtBQUsvbkcsS0FBS29FLEVBQUUsSUFBSTBqRyxHQUFJLFNBQVNFLEdBQUc1akcsRUFBRTFFLEVBQUU1QixHQUFHLElBQUlDLEVBQUVELEdBQUcsR0FBRyxJQUFJMG1HLEdBQUdwZ0csR0FBRSxTQUFTNUQsRUFBRW1DLEdBQUcsSUFBSXkzRixFQUFFNTVGLEVBQUVqQyxFQUFFaUMsS0FBSzQ1RixFQUFFcUcsR0FBR2pnRyxJQUFJZCxFQUFFK0QsS0FBSzFGLEVBQUU0RSxFQUFFLElBQUkrTyxtQkFBbUIwb0YsT0FBUSxNQUFNNTVGLEdBQUcsTUFBTWQsRUFBRStELEtBQUsxRixFQUFFLFFBQVEyVCxtQkFBbUIsWUFBWWxSLEdBQW1WLFNBQVN5bkcsR0FBRzdqRyxFQUFFMUUsRUFBRTVCLEVBQUVDLEVBQUV5QyxHQUFHLElBQUlkLEVBQUV3b0csT0FBTyxLQUFLeG9HLEVBQUU0YixRQUFRLEtBQUs1YixFQUFFcWQsUUFBUSxLQUFLcmQsRUFBRXlvRyxVQUFVLEtBQUszbkcsRUFBRXpDLEdBQUksTUFBTTRFLEtBRHRyQnFrRyxHQUFHM25HLFVBQVVxeEIsT0FBTyxXQUFXMXdCLEtBQUtsQyxFQUFFb2lCLEdBQUdsZ0IsTUFBTUEsS0FBS04sR0FBR00sS0FBS04sRUFBRWd4QixTQUFTMXdCLEtBQUtOLEVBQUUsTUFBTU0sS0FBS29FLEdBQUcsR0FBR3BFLEtBQUtvRSxFQUFFQSxFQUFFdEcsSUFBSXU4RixFQUFHcjZGLEtBQUtvRSxFQUFFMDRGLEtBQUksU0FBUzE0RixHQUFHQSxFQUFFc3NCLFlBYjNZLFNBQVl0c0IsR0FBR0EsRUFBRTFFLEVBQUUsR0FBRzBFLEVBQUVBLEVBQUUvRCxPQUFPLEVBQUUrRCxFQUFFdEcsRUFBRSxFQWFnWHNxRyxDQUFHcG9HLEtBQUtvRSxFQUFFQSxLQUN2UDBqRyxHQUFHem9HLFVBQVUyUyxVQUFVLFNBQVM1TixHQUFHLE9BQU9ELEVBQUV1SCxLQUFLc0csVUFBVTVOLE9BQUUsSUFBUzBqRyxHQUFHem9HLFVBQVVzTSxNQUFNLFNBQVN2SCxHQUFHLE9BQU9ELEVBQUV1SCxLQUFLQyxNQUFNdkgsT0FBRSxJQUF5cEIsSUFBSWlrRyxHQUFHbGtHLEVBQUV1SCxLQUFLQyxNQUFNLFNBQVNxekYsR0FBRTU2RixHQUFHazJGLEdBQUUxOEYsS0FBS29DLE1BQU1BLEtBQUtxbEYsUUFBUSxJQUFJcWYsR0FBRTFrRyxLQUFLNGhHLEVBQUV4OUYsR0FBRyxLQUFLcEUsS0FBS04sR0FBRSxFQUFHTSxLQUFLUixFQUFFUSxLQUFLb0UsRUFBRSxLQUFLcEUsS0FBSzI2RixFQUFFLEdBQUczNkYsS0FBS282RixFQUFFLEVBQUVwNkYsS0FBSzJDLEVBQUUsR0FBRzNDLEtBQUs2QyxFQUFFN0MsS0FBS2c2RixFQUFFaDZGLEtBQUt0QyxFQUFFc0MsS0FBS3FELEdBQUUsRUFBR3JELEtBQUs5QixFQUFFLEVBQUU4QixLQUFLbkMsRUFBRSxLQUFLbUMsS0FBS2lpRyxFQUFFcUcsR0FBR3RvRyxLQUFLKzhGLEVBQUUvOEYsS0FBSzIrRixHQUFFLEVBQUkxRSxFQUFFK0UsR0FBRTFFLElBQUcsSUFBSWdPLEdBQUcsR0FBR0MsR0FBRyxZQUFZQyxHQUFHLENBQUMsT0FBTyxPQUdob0MsU0FBU2pFLEdBQUduZ0csR0FBRyxNQUFPLGdCQUFnQkEsRUFBRTh3RixjQUF5SyxTQUFTdVQsR0FBR3JrRyxFQUFFMUUsR0FBRzBFLEVBQUUxRSxHQUFFLEVBQUcwRSxFQUFFQSxJQUFJQSxFQUFFdkIsR0FBRSxFQUFHdUIsRUFBRUEsRUFBRWs2QixRQUFRbDZCLEVBQUV2QixHQUFFLEdBQUl1QixFQUFFekIsRUFBRWpELEVBQUUwRSxFQUFFZzJGLEVBQUUsRUFBRXNPLEdBQUd0a0csR0FBR3VrRyxHQUFHdmtHLEdBQUksU0FBU3NrRyxHQUFHdGtHLEdBQUdBLEVBQUVmLElBQUllLEVBQUVmLEdBQUUsRUFBR2UsRUFBRW84RixjQUFjLFlBQVlwOEYsRUFBRW84RixjQUFjLFVBRS9hLFNBQVNvSSxHQUFHeGtHLEdBQUcsR0FBR0EsRUFBRTFFLFFBQUcsSUFBb0I4NUYsS0FBUXAxRixFQUFFNUUsRUFBRSxJQUFJLEdBQUcwakcsR0FBRTkrRixJQUFJLEdBQUdBLEVBQUV5Z0csS0FBSyxHQUFHemdHLEVBQUUxRyxHQUFHLEdBQUd3bEcsR0FBRTkrRixHQUFHbzlGLEdBQUdwOUYsRUFBRXUzRixHQUFHLEVBQUV2M0YsUUFBUSxHQUFHQSxFQUFFbzhGLGNBQWMsb0JBQW9CLEdBQUcwQyxHQUFFOStGLEdBQUcsQ0FBQ0EsRUFBRTFFLEdBQUUsRUFBRyxJQUFJLElBQTJIM0IsRUFBdkgyQixFQUFFMEUsRUFBRXlnRyxJQUFJemdHLEVBQUUsT0FBTzFFLEdBQUcsS0FBSyxJQUFJLEtBQUssSUFBSSxLQUFLLElBQUksS0FBSyxJQUFJLEtBQUssSUFBSSxLQUFLLElBQUksS0FBSyxLQUFLLElBQUk1QixHQUFFLEVBQUcsTUFBTXNHLEVBQUUsUUFBUXRHLEdBQUUsRUFBVSxLQUFLQyxFQUFFRCxHQUFHLENBQUMsSUFBSTBDLEVBQUUsR0FBR0EsRUFBRSxJQUFJZCxFQUFFLENBQUMsSUFBSWlELEVBQUUwRixPQUFPakUsRUFBRXUyRixHQUFHL2hGLE1BQU1tc0YsSUFBSSxJQUFJLEtBQUssSUFBSXBpRyxHQUFHd0IsRUFBRTRMLE1BQU01TCxFQUFFNEwsS0FBSzg0RixTQUFTLENBQUMsSUFBSXpPLEVBQUVqMkYsRUFBRTRMLEtBQUs4NEYsU0FBU0MsU0FBU25tRyxFQUFFeTNGLEVBQUVodUIsT0FBTyxFQUFFZ3VCLEVBQUUvNUYsT0FBTyxHQUFJRyxHQUFHK25HLEdBQUdwNEYsS0FBS3hOLEVBQUVBLEVBQUV1eUYsY0FBYyxJQUFLbjNGLEVBQUV5QyxFQUFHLEdBQUd6QyxFQUFFcUcsRUFBRW84RixjQUFjLFlBQy9mcDhGLEVBQUVvOEYsY0FBYyxlQUFlLENBQUNwOEYsRUFBRWcyRixFQUFFLEVBQUUsSUFBSSxJQUFJMThGLEVBQUUsRUFBRXdsRyxHQUFFOStGLEdBQUdBLEVBQUVBLEVBQUUya0csV0FBVyxHQUFJLE1BQU16SSxHQUFHNWlHLEVBQUUsR0FBSTBHLEVBQUV6QixFQUFFakYsRUFBRSxLQUFLMEcsRUFBRXlnRyxJQUFJLElBQUk2RCxHQUFHdGtHLElBQUssUUFBUXVrRyxHQUFHdmtHLEtBQU0sU0FBU3VrRyxHQUFHdmtHLEVBQUUxRSxHQUFHLEdBQUcwRSxFQUFFQSxFQUFFLENBQUM0a0csR0FBRzVrRyxHQUFHLElBQUl0RyxFQUFFc0csRUFBRUEsRUFBRXJHLEVBQUVxRyxFQUFFNUUsRUFBRSxHQUFHazZGLEVBQUcsS0FBS3QxRixFQUFFQSxFQUFFLEtBQUtBLEVBQUU1RSxFQUFFLEtBQUtFLEdBQUcwRSxFQUFFbzhGLGNBQWMsU0FBUyxJQUFJMWlHLEVBQUVtckcsbUJBQW1CbHJHLEVBQUcsTUFBTXlDLE1BQU0sU0FBU3dvRyxHQUFHNWtHLEdBQUdBLEVBQUVBLEdBQUdBLEVBQUUyNEYsSUFBSTM0RixFQUFFQSxFQUFFK2pHLFVBQVUsTUFBTS9qRyxFQUFFdkcsSUFBSXNHLEVBQUV5c0IsYUFBYXhzQixFQUFFdkcsR0FBR3VHLEVBQUV2RyxFQUFFLE1BQU8sU0FBU3FsRyxHQUFFOStGLEdBQUcsT0FBT0EsRUFBRUEsRUFBRUEsRUFBRUEsRUFBRThrRyxXQUFXLEVBQ2pOLFNBQVNwRSxHQUFHMWdHLEVBQUUxRSxHQUFHLE9BQU8wRSxFQUFFQSxFQUFFQSxFQUFFQSxFQUFFK2tHLGtCQUFrQnpwRyxHQUFHLEtBQThLLFNBQVMwcEcsR0FBR2hsRyxFQUFFMUUsRUFBRTVCLEdBQUdzRyxFQUFFLENBQUMsSUFBSXJHLEtBQUtELEVBQUUsQ0FBQyxJQUFJQyxHQUFFLEVBQUcsTUFBTXFHLEVBQUVyRyxHQUFFLEVBQUksR0FBR0EsRUFBRSxPQUFPcUcsRUFBVSxHQUFSdEcsRUFBekosU0FBWXNHLEdBQUcsSUFBSTFFLEVBQUUsR0FBb0QsT0FBakR3N0YsRUFBRzkyRixHQUFFLFNBQVN0RyxFQUFFQyxHQUFHMkIsR0FBRzNCLEVBQUUyQixHQUFHLElBQUlBLEdBQUc1QixFQUFFNEIsR0FBRyxVQUFpQkEsRUFBMkUycEcsQ0FBR3ZyRyxHQUFNRCxFQUFFdUcsR0FBRyxDQUFnRixHQUEvRTFFLEVBQUVnUyxtQkFBbUJySixPQUFPM0ksSUFBc0RBLEdBQWxENUIsRUFBRSxNQUFNQSxFQUFFLElBQUk0VCxtQkFBbUJySixPQUFPdkssSUFBSSxHQUFXLENBQXFELEdBQW5DLEdBQWpCQSxFQUFFc0csRUFBRTNELFFBQVEsUUFBVzNDLEVBQUVzRyxFQUFFL0QsUUFBNEIsR0FBcEJ0QyxFQUFFcUcsRUFBRTNELFFBQVEsT0FBYTFDLEVBQUVELEVBQUUsQ0FBQ0MsRUFBRUQsRUFBRSxJQUFJMEMsRUFBRSxRQUFTQSxFQUFFNEQsRUFBRStrQixVQUFVcHJCLEVBQUUsRUFBRUQsR0FBbUNBLEdBQWhDc0csRUFBRSxDQUFDQSxFQUFFZ29FLE9BQU8sRUFBRXJ1RSxHQUFHeUMsRUFBRTRELEVBQUVnb0UsT0FBT3R1RSxLQUFRLEdBQUdzRyxFQUFFLEdBQUcxRSxFQUFFNUIsRUFBRUEsRUFBRSxJQUFJNEIsRUFBRUEsRUFBRTVCLEVBQUVzRyxFQUFFQSxFQUFFLElBQUlBLEVBQUUsR0FBRyxJQUFJQSxFQUFFLEdBQUcsSUFBSUEsRUFBRSxHQUFJLE9BQU9BLEVBQVcsT0FBVHlnRyxHQUFFemdHLEVBQUUxRSxFQUFFNUIsR0FBVXNHLEVBQUUsU0FBU2tsRyxHQUFHbGxHLEdBQUdwRSxLQUFLMkMsRUFBRSxHQUFHM0MsS0FBSzIrRixFQUFFLElBQUlpSSxHQUFHNW1HLEtBQUt1cEcsR0FBR3ZwRyxLQUFLeTZGLEdBQUd6NkYsS0FBS3k3RixFQUFFejdGLEtBQUt3cEcsR0FBR3hwRyxLQUFLb0UsRUFBRXBFLEtBQUtpaUcsRUFBRWppRyxLQUFLcUUsRUFBRXJFLEtBQUtpakcsRUFBRWpqRyxLQUFLNkMsRUFBRTdDLEtBQUtvZ0csRUFBRXBnRyxLQUFLdkMsRUFBRSxLQUFLdUMsS0FBSzQ4RixHQUFHNThGLEtBQUs2QixFQUFFLEVBQUU3QixLQUFLeThGLEtBQUt2OUYsRUFBRSxpQ0FBaUNrRixHQUFHcEUsS0FBS3lwRyxHQUFHenBHLEtBQUtnNkYsRUFBRWg2RixLQUFLUixFQUFFUSxLQUFLdEMsRUFBRXNDLEtBQUtvNkYsRUFBRXA2RixLQUFLbEMsRUFBRSxLQUFLa0MsS0FBS3c2RixJQUFHLEVBQUd4NkYsS0FBS25DLEVBQUVtQyxLQUFLNDZGLEdBQUc1NkYsS0FBS2tqRyxHQUFHLEVBQUVsakcsS0FBS3FqRyxFQUFFcmpHLEtBQUtxRCxFQUFFckQsS0FBSzI2RixFQUFFLEVBQUUzNkYsS0FBS284RixHQUFHbDlGLEVBQUUseUNBQXlDa0YsSUFBSSxJQUFJcEUsS0FBSzY4RixHQUFHMzlGLEVBQUUseUNBQXlDa0YsSUFBSSxJQUFJcEUsS0FBSzI4RixHQUFHejlGLEVBQUUsaURBQWlEa0YsSUFBSSxFQUFFcEUsS0FBSzA2RixHQUFHeDdGLEVBQUUsdURBQzd4Q2tGLElBQUksSUFBSXBFLEtBQUtpOEYsR0FBRzczRixHQUFHQSxFQUFFZzlGLFNBQUksRUFBT3BoRyxLQUFLKzhGLE9BQUUsRUFBTy84RixLQUFLb2pHLEVBQUVoL0YsR0FBR0EsRUFBRTB4Rix5QkFBd0IsRUFBRzkxRixLQUFLNGhHLEVBQUUsR0FBRzVoRyxLQUFLTixFQUFFLElBQUlzbkcsR0FBRzVpRyxHQUFHQSxFQUFFc2xHLHdCQUF3QjFwRyxLQUFLdTZGLEdBQUcsSUFBSXdOLEdBQUcvbkcsS0FBSzlCLEdBQUVrRyxRQUFHLElBQVNBLEVBQUVxeEYsdUJBQXNCcnhGLEVBQUVxeEYsdUJBQTBCejFGLEtBQUsrTSxFQUFFM0ksR0FBR0EsRUFBRXVsRyxnQkFBZSxLQUFNM3BHLEtBQUs5QixJQUFJOEIsS0FBSzlCLEdBQUUsR0FBSWtHLEdBQUdBLEVBQUUybkIsbUJBQW1CL3JCLEtBQUt3NkYsSUFBRyxHQUFJeDZGLEtBQUs4NUYsUUFBRyxFQUNqVSxTQUFTOFAsR0FBR3hsRyxHQUFTLEdBQU55bEcsR0FBR3psRyxHQUFNLEdBQUdBLEVBQUVvRSxFQUFFLENBQUMsSUFBSTlJLEVBQUUwRSxFQUFFdkMsSUFBSS9ELEVBQUVvOEYsR0FBRTkxRixFQUFFcTNGLEdBQUdvSixHQUFFL21HLEVBQUUsTUFBTXNHLEVBQUV3OUYsR0FBR2lELEdBQUUvbUcsRUFBRSxNQUFNNEIsR0FBR21sRyxHQUFFL21HLEVBQUUsT0FBTyxhQUFhZ3NHLEdBQUcxbEcsRUFBRXRHLElBQUc0QixFQUFFLElBQUlzakcsR0FBRTUrRixFQUFFMUUsT0FBRSxJQUFVaS9GLEVBQUUsRUFBRWovRixFQUFFaUQsRUFBRThnRyxHQUFHdkosR0FBRXA4RixJQUFJQSxHQUFFLEVBQUdxRyxFQUFFNkYsV0FBVzdGLEVBQUU2RixVQUFVKy9GLGFBQWFqc0csRUFBRXFHLEVBQUU2RixVQUFVKy9GLFdBQVdycUcsRUFBRWlELEVBQUU2SSxXQUFXLE1BQU0xTixHQUFHcUcsRUFBRTZsRyxTQUFRLElBQUtBLE9BQU9sTCxJQUFJcC9GLEVBQUVpRCxFQUFFN0UsR0FBRSxHQUFJQSxJQUFJNEIsRUFBRTBFLEVBQUUxRSxFQUFFbUQsRUFBRWloRyxFQUFFLE1BQU1wa0csRUFBRTBFLEVBQUV1MUYsR0FBR2o2RixFQUFFaUQsSUFBSWpELEVBQUUyRCxFQUFFMjJGLElBQUk0SixHQUFHbGtHLEdBQUl1cUcsR0FBRzdsRyxHQUMzVSxTQUFTeWxHLEdBQUd6bEcsR0FBR0EsRUFBRTQxRixJQUFJNTFGLEVBQUU0MUYsRUFBRTE3RCxRQUFRbDZCLEVBQUU0MUYsRUFBRSxNQUFNNTFGLEVBQUVBLElBQUlBLEVBQUVBLEVBQUVzc0IsU0FBU3RzQixFQUFFQSxFQUFFLE1BQU1BLEVBQUUxRyxJQUFJeUcsRUFBRXlzQixhQUFheHNCLEVBQUUxRyxHQUFHMEcsRUFBRTFHLEVBQUUsTUFBTXdzRyxHQUFHOWxHLEdBQUdBLEVBQUUxRSxFQUFFZ3hCLFNBQVN0c0IsRUFBRWcyRixJQUFJWCxFQUFHcjFGLEVBQUVnMkYsSUFBSWoyRixFQUFFeXNCLGFBQWF4c0IsRUFBRWcyRixHQUFHaDJGLEVBQUVnMkYsRUFBRSxNQUFPLFNBQVMrUCxHQUFHL2xHLEVBQUUxRSxHQUFHMEUsRUFBRXpCLEVBQUVjLEtBQUssSUFBSXNqRyxHQUFHM2lHLEVBQUV3NEYsS0FBS2w5RixJQUFJLEdBQUcwRSxFQUFFb0UsR0FBRzRoRyxHQUFHaG1HLEdBQXNDLFNBQVNnbUcsR0FBR2htRyxHQUFHc2pHLEdBQUd0akcsRUFBRTFFLElBQUkwRSxFQUFFZzJGLElBQUloMkYsRUFBRWcyRixHQUFFLEVBQUc2RyxHQUFHNzhGLEVBQUUwM0YsR0FBRzEzRixHQUFHQSxFQUFFdTJGLEVBQUUsR0FJOVQsU0FBUzBQLEdBQUdqbUcsRUFBRTFFLEdBQUcsSUFBSTVCLEVBQUlBLEVBQUY0QixFQUFJQSxFQUFFcU4sRUFBSTNJLEVBQUV2QyxJQUFJLElBQUk5RCxFQUFFbThGLEdBQUU5MUYsRUFBRXEzRixHQUFHb0osR0FBRTltRyxFQUFFLE1BQU1xRyxFQUFFdzlGLEdBQUdpRCxHQUFFOW1HLEVBQUUsTUFBTUQsR0FBRyttRyxHQUFFOW1HLEVBQUUsTUFBTXFHLEVBQUU4K0YsR0FBRzRHLEdBQUcxbEcsRUFBRXJHLEdBQUdxRyxFQUFFdkIsR0FBR3VCLEVBQUUzRyxHQUFHMnJHLEdBQUdyckcsRUFBRXFHLEVBQUV2QixFQUFFdUIsRUFBRTNHLEdBQUdLLEVBQUUsSUFBSWtsRyxHQUFFNStGLEVBQUV0RyxFQUFFc0csRUFBRXUyRixFQUFFLEdBQUcsT0FBT3YyRixFQUFFdkIsSUFBSS9FLEVBQUVzOEYsRUFBRWgyRixFQUFFM0csR0FBR2lDLElBQUkwRSxFQUFFekIsRUFBRWpELEVBQUUyRSxFQUFFTCxPQUFPSSxFQUFFekIsSUFBSWpELEVBQUU0cUcsR0FBR2xtRyxFQUFFdEcsRUFBRSxLQUFLQSxFQUFFeXlCLFdBQVczZixLQUFLMjVGLE1BQU0sR0FBR25tRyxFQUFFczJGLElBQUk5cEYsS0FBSzI1RixNQUFNLEdBQUdubUcsRUFBRXMyRixHQUFHOXBGLEtBQUtxWixXQUFXdzlFLEdBQUdyakcsRUFBRTFFLEVBQUU1QixHQUFHMGxHLEdBQUcxbEcsRUFBRUMsRUFBRTJCLEdBQUksU0FBU29xRyxHQUFHMWxHLEVBQUUxRSxHQUFHMEUsRUFBRXRHLEdBQUcwbUcsR0FBRyxJQUFHLFNBQVMxbUcsRUFBRUMsR0FBRzhtRyxHQUFFbmxHLEVBQUUzQixFQUFFRCxNQUN4VixTQUFTd3NHLEdBQUdsbUcsRUFBRTFFLEVBQUU1QixHQUFHQSxFQUFFOFMsS0FBS3lkLElBQUlqcUIsRUFBRXpCLEVBQUV0QyxPQUFPdkMsR0FBRyxJQUFJQyxFQUFFcUcsRUFBRXRHLEVBQUUwSyxFQUFFcEUsRUFBRXRHLEVBQUVxZ0csR0FBRy81RixFQUFFdEcsRUFBRXNHLEdBQUcsS0FBS0EsRUFBRSxJQUFJLElBQUk1RCxFQUFFNEQsRUFBRXpCLEVBQUVBLEdBQUcsSUFBSSxDQUFDLElBQUl5M0YsRUFBRSxDQUFDLFNBQVN0OEYsSUFBSSxHQUFHNkUsRUFBRSxFQUFFN0UsR0FBRzZFLEVBQUVuQyxFQUFFLEdBQUdkLEVBQUUwNkYsRUFBRTMyRixLQUFLLE9BQU9kLElBQUlBLEVBQUUsRUFBRXkzRixFQUFFMzJGLEtBQUssT0FBT2QsR0FBRyxJQUFJLElBQUlqRixHQUFFLEVBQUc0aUcsRUFBRSxFQUFFQSxFQUFFeGlHLEVBQUV3aUcsSUFBSSxDQUFDLElBQUlrSyxFQUFHaHFHLEVBQUU4L0YsR0FBRzVnRyxFQUFFK3FHLEVBQUdqcUcsRUFBRTgvRixHQUFHbDhGLEVBQVEsR0FBRyxHQUFUb21HLEdBQUk3bkcsR0FBVUEsRUFBRWlPLEtBQUtrYyxJQUFJLEVBQUV0c0IsRUFBRTgvRixHQUFHNWdHLEVBQUUsS0FBS2hDLEdBQUUsT0FBUSxJQUFJc3FHLEdBQUd5QyxFQUFHclEsRUFBRSxNQUFNb1EsRUFBRyxLQUFNLE1BQU1FLEdBQUkzc0csR0FBR0EsRUFBRTBzRyxJQUFNLEdBQUcvc0csRUFBRSxDQUFDSyxFQUFFcThGLEVBQUV0eUYsS0FBSyxLQUFLLE1BQU0xRCxHQUEyQixPQUF4QkEsRUFBRUEsRUFBRXpCLEVBQUVnZ0IsT0FBTyxFQUFFN2tCLEdBQUc0QixFQUFFMkUsRUFBRUQsRUFBU3JHLEVBQUUsU0FBUzRzRyxHQUFHdm1HLEdBQUdBLEVBQUVBLEdBQUdBLEVBQUUxRyxJQUFJMEcsRUFBRWkvRixFQUFFLEVBQUVwQyxHQUFHNzhGLEVBQUV5M0YsR0FBR3ozRixHQUFHQSxFQUFFZixFQUFFLEdBQ2piLFNBQVN1bkcsR0FBR3htRyxHQUFHLFFBQUdBLEVBQUVBLEdBQUdBLEVBQUUxRyxHQUFHLEdBQUcwRyxFQUFFZixLQUFZZSxFQUFFaS9GLElBQUlqL0YsRUFBRTFHLEVBQUU0a0csR0FBRzk1RixFQUFFcEUsRUFBRXkzRixHQUFHejNGLEdBQUd5bUcsR0FBR3ptRyxFQUFFQSxFQUFFZixJQUFJZSxFQUFFZixLQUFXLEdBQzVGLFNBQVNxakcsR0FBR3RpRyxFQUFFMUUsRUFBRTVCLEdBQUcsSUFBSUMsRUFBRTJCLEVBQUVoQyxFQUFFSyxHQUFHeXBHLEdBQUdwakcsRUFBRTFFLEVBQUUzQixHQUFHcUcsRUFBRXFsRyxHQUFHcmxHLEVBQUVvMkYsSUFBSTE4RixFQUFFc0csRUFBRXZHLEVBQUU2QixFQUFFNUIsRUFBRXNHLEVBQUVxM0YsRUFBRWtMLEdBQUd2aUcsRUFBRSxLQUFLQSxFQUFFb2xHLElBQUlZLEdBQUdobUcsR0FHZ08sU0FBUzhsRyxHQUFHOWxHLEdBQUcsTUFBTUEsRUFBRTVFLElBQUkyRSxFQUFFeXNCLGFBQWF4c0IsRUFBRTVFLEdBQUc0RSxFQUFFNUUsRUFBRSxNQUV6VyxTQUFTcXJHLEdBQUd6bUcsRUFBRTFFLEdBQUcsSUFBSTVCLEVBQUVzRyxFQUFFZzRGLEdBQUd4ckYsS0FBS0MsTUFBTUQsS0FBS3FaLFNBQVM3bEIsRUFBRXk0RixJQUFtQixPQUFmejRGLEVBQUVtakcsT0FBT3pwRyxHQUFHLEdBQVVBLEVBQUU0QixFQUFFLFNBQVNxTixHQUFFM0ksRUFBRTFFLEdBQUcsR0FBRyxHQUFHQSxFQUFFLENBQUMsSUFBSTVCLEVBQUUsS0FBS3NHLEVBQUV0RyxJQUFJQSxFQUFFLE1BQU0sSUFBSUMsRUFBRXlLLEVBQUVwRSxFQUFFcTdGLEdBQUdyN0YsR0FBR3RHLElBQUlBLEVBQUUsSUFBSXVsRyxHQUFFLHdDQUF3Q2wvRixFQUFFMGtHLFVBQVUsUUFBUTFrRyxFQUFFMGtHLFNBQVNDLFVBQVU5RCxHQUFHbG5HLEVBQUUsU0FBUzJsRyxHQUFHM2xHLElBdEJpUSxTQUFZc0csRUFBRTFFLEdBQUcsSUFBSTVCLEVBQUUsSUFBSWtrRyxHQUFHLEdBQUc3OUYsRUFBRTZsRyxNQUFNLENBQUMsSUFBSWpzRyxFQUFFLElBQUlpc0csTUFBTWpzRyxFQUFFbXFHLE9BQU83a0csRUFBRTRrRyxHQUFHbnFHLEVBQUVDLEVBQUUseUJBQXdCLEVBQUcyQixHQUFHM0IsRUFBRXVkLFFBQVFqWSxFQUFFNGtHLEdBQUducUcsRUFBRUMsRUFBRSx3QkFBdUIsRUFBRzJCLEdBQUczQixFQUFFZ2YsUUFBUTFaLEVBQUU0a0csR0FBR25xRyxFQUFFQyxFQUFFLHdCQUF1QixFQUFHMkIsR0FBRzNCLEVBQUVvcUcsVUFBVTlrRyxFQUFFNGtHLEdBQUducUcsRUFBRUMsRUFBRSwwQkFBeUIsRUFBRzJCLEdBQUd5RSxFQUFFb3NCLFlBQVcsV0FBY3h5QixFQUFFb3FHLFdBQVVwcUcsRUFBRW9xRyxjQUFjLEtBQUtwcUcsRUFBRStnRyxJQUFJMTZGLE9BQVExRSxHQUFFLEdBc0J2a0JvckcsQ0FBR2h0RyxFQUFFME4sV0FBV3pOLFFBQVNxa0csR0FBRSxHQUFHaCtGLEVBQUVvRSxFQUFFLEVBQUVwRSxFQUFFdEcsR0FBR3NHLEVBQUV0RyxFQUFFazlGLEdBQUd0N0YsR0FBR3VxRyxHQUFHN2xHLEdBQUd5bEcsR0FBR3psRyxHQUFtQyxTQUFTNmxHLEdBQUc3bEcsR0FBR0EsRUFBRW9FLEVBQUUsRUFBRXBFLEVBQUV2RyxHQUFHLEVBQUt1RyxFQUFFdEcsSUFBTSxHQUFHb2lCLEdBQUc5YixFQUFFMUUsR0FBR1csUUFBUSxHQUFHK0QsRUFBRXpCLEVBQUV0QyxTQUFPK0QsRUFBRTFFLEVBQUU1QixFQUFFdUMsT0FBTyxFQUFFbzZGLEVBQUdyMkYsRUFBRXpCLEdBQUd5QixFQUFFekIsRUFBRXRDLE9BQU8sR0FBRStELEVBQUV0RyxFQUFFaTlGLE1BQ3hkLFNBQVM0TCxHQUFHdmlHLEVBQUUxRSxFQUFFNUIsR0FBRyxJQUFJQyxFQWhDbU4sU0FBWXFHLEdBQUcsT0FBT0EsYUFBYWkvRixHQUFFbkosR0FBRTkxRixHQUFHLElBQUlpL0YsR0FBRWovRixPQUFFLEdBZ0NuUTJtRyxDQUFHanRHLEdBQUcsR0FBRyxJQUFJQyxFQUFFMkIsRUFBRUEsR0FBR3VsRyxHQUFHbG5HLEVBQUUyQixFQUFFLElBQUkzQixFQUFFMkIsR0FBR3dsRyxHQUFHbm5HLEVBQUVBLEVBQUVOLE9BQU8sQ0FBQyxJQUFpQmtGLEVBQWJuQyxFQUFFMkQsRUFBRTBrRyxTQUFhbG1HLEVBQUZqRCxFQUFJQSxFQUFFLElBQUljLEVBQUV3cUcsU0FBV3hxRyxFQUFFd3FHLFNBQVNqdEcsRUFoQ21LLFNBQVlxRyxFQUFFMUUsRUFBRTVCLEVBQUVDLEdBQUcsSUFBSXlDLEVBQUUsSUFBSTZpRyxHQUFFLFVBQUssR0FBb0QsT0FBNUNqL0YsR0FBRzRnRyxHQUFHeGtHLEVBQUU0RCxHQUFHMUUsR0FBR3VsRyxHQUFHemtHLEVBQUVkLEdBQUc1QixHQUFHb25HLEdBQUcxa0csRUFBRTFDLEdBQUdDLElBQUl5QyxFQUFFNEQsRUFBRXJHLEdBQVV5QyxFQWdDbFF5cUcsQ0FBR3pxRyxFQUFFc29HLFNBQVNubUcsR0FBR25DLEVBQUUwcUcsS0FBS3B0RyxHQUE2RixPQUF6RnNHLEVBQUU2K0YsR0FBRy9ILEVBQUc5MkYsRUFBRTYrRixHQUFFLFNBQVM3SSxFQUFFMThGLEdBQUdtbkcsR0FBRTltRyxFQUFFTCxFQUFFMDhGLE1BQU0xNkYsRUFBRTBFLEVBQUVDLEVBQUV2RyxFQUFFc0csRUFBRTY5RixFQUFFdmlHLEdBQUc1QixHQUFHK21HLEdBQUU5bUcsRUFBRTJCLEVBQUU1QixHQUFHK21HLEdBQUU5bUcsRUFBRSxNQUFNcUcsRUFBRSsyRixJQUFJMk8sR0FBRzFsRyxFQUFFckcsR0FBVUEsRUFBNE0sU0FBU290RyxNQUM1TCxTQUFTQyxLQUFLLEdBQUczUCxLQUFLLElBQUk3MEUsT0FBT3cxRSxJQUFLLE1BQU1uMkYsTUFBTSxnREFDMVUsU0FBUzg5RixHQUFFMy9GLEVBQUUxRSxHQUFHNDZGLEdBQUUxOEYsS0FBS29DLE1BQU1BLEtBQUtvRSxFQUFFLElBQUlrbEcsR0FBRzVwRyxHQUFHTSxLQUFLNkMsRUFBRXVCLEVBQUVwRSxLQUFLbkMsRUFBRTZCLEdBQUdBLEVBQUUyckcsUUFBUTNyRyxFQUFFMnJHLFFBREwsU0FBWWpuRyxHQUFHLElBQUksSUFBSTFFLEVBQUVVLFVBQVUsR0FBR3RDLEVBQUUsRUFBRUEsRUFBRXNDLFVBQVVDLE9BQU92QyxJQUFJLENBQUMsSUFBMkQwQyxFQUF2RHpDLEVBQUVxQyxVQUFVdEMsR0FBRyxHQUFHLEdBQUdDLEVBQUVzb0csWUFBWSxJQUFJLEdBQUczbUcsRUFBRTNCLE9BQWN5QyxFQUFFLElBQUlkLEtBQWtCYyxFQUFFLElBQWZBLEVBQUVkLEVBQUVXLE9BQU8sSUFBVVgsRUFBRWUsUUFBUSxJQUFJRCxJQUFJQSxHQUFLZCxHQUFGYyxFQUFLekMsRUFBSyxJQUFJQSxFQUFJLE9BQU8yQixFQUNqTTRyRyxDQUFHdHJHLEtBQUs2QyxFQUFFLFFBQVE3QyxLQUFLTixFQUFFQSxHQUFHQSxFQUFFazJGLGtCQUFrQixLQUFLeHhGLEVBQUUxRSxHQUFHQSxFQUFFNnJHLGdCQUFnQixLQUFLN3JHLEdBQUdBLEVBQUU4ckcsK0JBQStCcG5HLEVBQUVBLEVBQUUscUJBQXFCLGFBQWFBLEVBQUUsQ0FBQyxvQkFBb0IsZUFBZXBFLEtBQUtvRSxFQUFFM0csRUFBRTJHLEVBQUVBLEVBQUUxRSxHQUFHQSxFQUFFaTJGLG9CQUFvQixLQUFLajJGLEdBQUdBLEVBQUUrckcscUJBQXFCcm5HLEVBQUVBLEVBQUUsNkJBQTZCMUUsRUFBRStyRyxtQkFBbUJybkcsRUFBRSxDQUFDLDRCQUE0QjFFLEVBQUUrckcscUJBQXFCL3JHLEdBQUdBLEVBQUUwN0YsS0FBS2gzRixFQUFFQSxFQUFFLCtCQUErQjFFLEVBQUUwN0YsR0FDdGZoM0YsRUFBRSxDQUFDLDhCQUE4QjFFLEVBQUUwN0YsS0FBS3A3RixLQUFLb0UsRUFBRWc4RixFQUFFaDhGLEdBQUdBLEVBQUUxRSxHQUFHQSxFQUFFdTJGLDZCQUE2QnlFLEVBQUd0MkYsS0FBS3BFLEtBQUtvRSxFQUFFdkIsRUFBRXVCLEdBQUdwRSxLQUFLdEMsRUFBRWdDLEdBQUdBLEVBQUVvMkYseUJBQXdCLEVBQUc5MUYsS0FBS282RixFQUFFMTZGLEdBQUdBLEVBQUVtMkYsY0FBYSxHQUFJbjJGLEVBQUVBLEdBQUdBLEVBQUVnMkYsc0JBQXNCZ0YsRUFBR2g3RixLQUFLTSxLQUFLb0UsRUFBRUMsRUFBRTNFLEVBQVcsUUFBVDBFLEVBQUVwRSxLQUFLTixJQUFZQSxLQUFLMEUsSUFBYTFFLEtBQVQwRSxFQUFFcEUsS0FBS04sV0FBaUIwRSxFQUFFMUUsS0FBS00sS0FBSzJDLEVBQUUsSUFBSXM4RixHQUFFai9GLE1BRW5GLFNBQVMwckcsR0FBR3RuRyxHQUFHeStGLEdBQUdqbEcsS0FBS29DLE1BQU0sSUFBSU4sRUFBRTBFLEVBQUV1bkcsT0FBTyxHQUFHanNHLEVBQUUsQ0FBQzBFLEVBQUUsQ0FBQyxJQUFJLElBQUl0RyxLQUFLNEIsRUFBRSxDQUFDMEUsRUFBRXRHLEVBQUUsTUFBTXNHLEVBQUVBLE9BQUUsR0FBU3BFLEtBQUtsQyxFQUFFc0csSUFBSUEsRUFBRXBFLEtBQUtsQyxFQUFFa0MsS0FBSzBLLEtBQUssT0FBT2hMLEdBQUcwRSxLQUFLMUUsRUFBRUEsRUFBRTBFLFFBQUcsR0FBUXBFLEtBQUswSyxLQUFLaEwsT0FBUU0sS0FBSzBLLEtBQUt0RyxFQUFZLFNBQVN3bkcsS0FBSzlJLEdBQUdsbEcsS0FBS29DLE1BQU1BLEtBQUtvbkUsT0FBTyxFQUFZLFNBQVM2M0IsR0FBRTc2RixHQUFHcEUsS0FBS29FLEVBQUVBLEdBNUI2dUJ2QixFQUFFbThGLEdBQUUzL0YsV0FDN3NDczZGLEdBQUcsU0FBU3YxRixFQUFFMUUsRUFBRTVCLEVBQUVDLEdBQUcsR0FBR2lDLEtBQUtvRSxFQUFFLE1BQU02QixNQUFNLDBEQUEwRGpHLEtBQUsyNkYsRUFBRSxZQUFZdjJGLEdBQUcxRSxFQUFFQSxFQUFFQSxFQUFFbXNHLGNBQWMsTUFBTTdyRyxLQUFLMjZGLEVBQUV2MkYsRUFBRXBFLEtBQUsyQyxFQUFFLEdBQUczQyxLQUFLbzZGLEVBQUUsRUFBRXA2RixLQUFLcUQsR0FBRSxFQUFHckQsS0FBS04sR0FBRSxFQUFHTSxLQUFLb0UsRUFBRSxJQUFJMG5HLGVBQWU5ckcsS0FBS1IsRUFBRVEsS0FBSzRoRyxFQUFFYyxHQUFHMWlHLEtBQUs0aEcsR0FBR2MsR0FBR0UsSUFBSTVpRyxLQUFLb0UsRUFBRTZrRyxtQkFBbUJ6Z0csRUFBRXhJLEtBQUsyN0YsR0FBRzM3RixNQUFNLElBQUlBLEtBQUtnNkYsR0FBRSxFQUFHaDZGLEtBQUtvRSxFQUFFODNCLEtBQUt4OEIsRUFBRTJJLE9BQU9qRSxJQUFHLEdBQUlwRSxLQUFLZzZGLEdBQUUsRUFBSSxNQUFNcjNGLEdBQWMsWUFBWDhsRyxHQUFHem9HLEtBQUsyQyxHQUFVeUIsRUFBRXRHLEdBQUcsR0FBRyxJQUFJMEMsRUFBRSxJQUFJa2tHLEdBQUUxa0csS0FBS3FsRixTQUFTdG5GLEdBQUd5bUcsR0FBR3ptRyxHQUFFLFNBQVM0RSxFQUFFeTNGLEdBQUc1NUYsRUFBRTBULElBQUlrbUYsRUFBRXozRixNQUFNNUUsRUFwQ2pjLFNBQVlxRyxHQUFHQSxFQUFFLENBQVUsSUFBVCxJQUFJMUUsRUFBRTZrRyxHQUFXem1HLEVBQUVzRyxFQUFFL0QsT0FBT3RDLEVBQUVGLEVBQUV1RyxHQUFHQSxFQUFFOEgsTUFBTSxJQUFJOUgsRUFBRTVELEVBQUUsRUFBRUEsRUFBRTFDLEVBQUUwQyxJQUFJLEdBQUdBLEtBQUt6QyxHQUFHMkIsRUFBRTlCLFVBQUssRUFBT0csRUFBRXlDLEdBQUdBLEVBQUU0RCxHQUFHLENBQUMxRSxFQUFFYyxFQUFFLE1BQU00RCxFQUFFMUUsR0FBRyxFQUFHLE9BQU8sRUFBRUEsRUFBRSxLQUFLN0IsRUFBRXVHLEdBQUdBLEVBQUV5RSxPQUFPbkosR0FBRzBFLEVBQUUxRSxHQW9DMlI2bkcsQ0FBRy9tRyxFQUFFNGhHLEtBQUt0a0csRUFBRXFHLEVBQUU0bkcsVUFBVTNuRyxhQUFhRCxFQUFFNG5HLFdBQVcsR0FDcmZ4UixFQUFHaU8sR0FBRzlvRyxLQUFLM0IsR0FBR0QsR0FBRzBDLEVBQUUwVCxJQUFJLGVBQWUsbURBQW1EMVQsRUFBRWdSLFNBQVEsU0FBUzdPLEVBQUV5M0YsR0FBR3A2RixLQUFLb0UsRUFBRTRuRyxpQkFBaUI1UixFQUFFejNGLEtBQUszQyxNQUFNQSxLQUFLaWlHLElBQUlqaUcsS0FBS29FLEVBQUU2bkcsYUFBYWpzRyxLQUFLaWlHLEdBQUcsb0JBQW9CamlHLEtBQUtvRSxHQUFHcEUsS0FBS29FLEVBQUU4bkcsa0JBQWtCbHNHLEtBQUsyK0YsSUFBSTMrRixLQUFLb0UsRUFBRThuRyxnQkFBZ0Jsc0csS0FBSzIrRixHQUFHLElBQUlxSyxHQUFHaHBHLE1BQU0sRUFBRUEsS0FBSzlCLEtBQUs4QixLQUFLKzhGLEVBQ3RULFNBQVkzNEYsR0FBRyxPQUFPcTNGLEdBQUdhLEdBQUcsSUFBSTdDLEVBQUdyMUYsRUFBRTR6RixlQUFVLElBQVM1ekYsRUFBRStqRyxVQUQ4UGdFLENBQUduc0csS0FBS29FLEtBQUtwRSxLQUFLb0UsRUFBRTR6RixRQUFRaDRGLEtBQUs5QixFQUFFOEIsS0FBS29FLEVBQUUrakcsVUFBVTMvRixFQUFFeEksS0FBS3E4RixHQUFHcjhGLE9BQU9BLEtBQUtuQyxFQUFFMmpHLEdBQUd4aEcsS0FBS3E4RixHQUFHcjhGLEtBQUs5QixFQUFFOEIsT0FBT0EsS0FBS3RDLEdBQUUsRUFBR3NDLEtBQUtvRSxFQUFFbTNELEtBQUtuM0QsR0FBR3BFLEtBQUt0QyxHQUFFLEVBQUksTUFBTWlGLEdBQUc4bEcsR0FBR3pvRyxLQUFLMkMsS0FDeFZFLEVBQUV3NUYsR0FBRyxnQkFBVyxJQUFvQjdDLEdBQU14NUYsS0FBS29FLElBQUlwRSxLQUFLMkMsRUFBRSxtQkFBbUIzQyxLQUFLOUIsRUFBRSxlQUFlOEIsS0FBS282RixFQUFFLEVBQUVwNkYsS0FBS3dnRyxjQUFjLFdBQVd4Z0csS0FBS3MrQixNQUFNLEtBQy9RejdCLEVBQUV5N0IsTUFBTSxTQUFTbDZCLEdBQUdwRSxLQUFLb0UsR0FBR3BFLEtBQUtOLElBQUlNLEtBQUtOLEdBQUUsRUFBR00sS0FBSzZDLEdBQUUsRUFBRzdDLEtBQUtvRSxFQUFFazZCLFFBQVF0K0IsS0FBSzZDLEdBQUUsRUFBRzdDLEtBQUtvNkYsRUFBRWgyRixHQUFHLEVBQUVwRSxLQUFLd2dHLGNBQWMsWUFBWXhnRyxLQUFLd2dHLGNBQWMsU0FBU21JLEdBQUczb0csUUFBUzZDLEVBQUV5M0YsRUFBRSxXQUFXdDZGLEtBQUtvRSxJQUFJcEUsS0FBS04sSUFBSU0sS0FBS04sR0FBRSxFQUFHTSxLQUFLNkMsR0FBRSxFQUFHN0MsS0FBS29FLEVBQUVrNkIsUUFBUXQrQixLQUFLNkMsR0FBRSxHQUFJOGxHLEdBQUczb0csTUFBSyxJQUFLZy9GLEdBQUU5RSxFQUFFSSxFQUFFMThGLEtBQUtvQyxPQUFRNkMsRUFBRTg0RixHQUFHLFdBQVczN0YsS0FBS3FFLElBQUlyRSxLQUFLZzZGLEdBQUdoNkYsS0FBS3RDLEdBQUdzQyxLQUFLNkMsRUFBRStsRyxHQUFHNW9HLE1BQU1BLEtBQUtzL0YsT0FBUXo4RixFQUFFeThGLEdBQUcsV0FBV3NKLEdBQUc1b0csT0FFdUM2QyxFQUFFZ2lHLEVBQUUsV0FBVyxJQUFJLE9BQU8sRUFBRTNCLEdBQUVsakcsTUFBTUEsS0FBS29FLEVBQUVnakUsUUFBUSxFQUFFLE1BQU1oakUsR0FBRyxPQUFRLElBQzFkdkIsRUFBRTQyRixHQUFHLFdBQVcsSUFBSSxPQUFPejVGLEtBQUtvRSxFQUFFcEUsS0FBS29FLEVBQUVnb0csYUFBYSxHQUFHLE1BQU1ob0csR0FBRyxNQUFPLEtBQUt2QixFQUFFZzhGLEdBQUcsU0FBU3o2RixHQUFHLEdBQUdwRSxLQUFLb0UsRUFBRSxDQUFDLElBQUkxRSxFQUFFTSxLQUFLb0UsRUFBRWdvRyxhQUEyRCxPQUE5Q2hvRyxHQUFHLEdBQUcxRSxFQUFFZSxRQUFRMkQsS0FBSzFFLEVBQUVBLEVBQUV5cEIsVUFBVS9rQixFQUFFL0QsU0FBZ0Jnb0csR0FBRzNvRyxLQUErRG1ELEVBQUV3NEYsR0FBRyxXQUFXLE9BQU9yN0YsS0FBS282RixHQUFHdjNGLEVBQUV3OEYsR0FBRyxXQUFXLE9BQU94aEcsRUFBRW1DLEtBQUsyQyxHQUFHM0MsS0FBSzJDLEVBQUUwRixPQUFPckksS0FBSzJDLEtBQ0xFLEVBQUV5bUcsR0FBR2pxRyxXQUFZODdGLEdBQUcsRUFBRXQ0RixFQUFFMkYsRUFBRSxFQUUzSDNGLEVBQUUyNEYsR0FBRyxXQUFXLE9BQU8sR0FBR3g3RixLQUFLd0ksR0FFdlEzRixFQUFFaTVGLEdBQUcsU0FBUzEzRixHQUFHLEdBQUdwRSxLQUFLbzZGLEVBQUUsR0FBR3A2RixLQUFLbzZGLEVBQUUsS0FBSyxHQUFHcDZGLEtBQUt3SSxHQUFHLElBQUlwRSxFQUFFLENBQUNwRSxLQUFLNkIsRUFBRStPLEtBQUtDLE1BQU0sSUFBSUQsS0FBS3FaLFVBQXFCLElBQTJHbHNCLEVBQXZHMkIsRUFBRSxJQUFJc2pHLEdBQUVoakcsS0FBdkJvRSxFQUFFcEUsS0FBSzZCLFNBQXVCLEdBQVEvRCxFQUFFa0MsS0FBS3ZDLEVBQTJFLEdBQXpFdUMsS0FBS29nRyxJQUFJdGlHLEVBQVd1OUYsRUFBUnY5RixFQUFFcTlGLEVBQUdyOUYsR0FBUWtDLEtBQUtvZ0csR0FBSXRpRyxFQUFFa0MsS0FBS29nRyxHQUFHLE9BQU9wZ0csS0FBSzZDLElBQUluRCxFQUFFMDZGLEVBQUV0OEYsR0FBWWtDLEtBQUsrTSxFQUFFM0ksRUFBRSxDQUFDLElBQUksSUFBSTVELEVBQUV6QyxFQUFFLEVBQUV5QyxFQUFFUixLQUFLMkMsRUFBRXRDLE9BQU9HLElBQUksQ0FBSSxJQUFJbUMsRUFBRTNDLEtBQUsyQyxFQUFFbkMsR0FBNEUsUUFBRyxLQUFoQ21DLEVBQXpDLGFBQWFBLEVBQUV5QixHQUFtQnZHLEVBQWY4RSxFQUFFQSxFQUFFeUIsRUFBRWlvRyxVQUFrQjFwRyxFQUFFdEMsWUFBaUIsR0FBc0IsTUFBVyxHQUFHLE1BQVJ0QyxHQUFHNEUsR0FBWSxDQUFDNUUsRUFBRXlDLEVBQUUsTUFBTTRELEVBQUUsR0FBRyxPQUFPckcsR0FBR3lDLElBQUlSLEtBQUsyQyxFQUFFdEMsT0FBTyxFQUFFLENBQUN0QyxFQUFFeUMsRUFBRSxFQUFFLE1BQU00RCxHQUFHckcsRUFBRSxTQUFVQSxFQUFFLElBQUlBLEVBQUV1c0csR0FBR3RxRyxLQUFLTixFQUFFM0IsR0FBZThtRyxHQUFacmtHLEVBQUUwNUYsR0FBRWw2RixLQUFLeTdGLEdBQ2hmLE1BQU1yM0YsR0FBR3lnRyxHQUFFcmtHLEVBQUUsT0FBTyxJQUFJUixLQUFLOUIsR0FBRzhCLEtBQUtxRSxHQUFHd2dHLEdBQUVya0csRUFBRSxvQkFBb0JSLEtBQUtxRSxHQUFHeWxHLEdBQUc5cEcsS0FBS1EsR0FBR1IsS0FBSzZDLEdBQUcvRSxHQUFHc3JHLEdBQUc1b0csRUFBRVIsS0FBSzZDLEVBQUUvRSxHQUFHMnBHLEdBQUd6bkcsS0FBS04sRUFBRUEsR0FBR00sS0FBSytNLEdBQUc4M0YsR0FBRXJrRyxFQUFFLE9BQU96QyxHQUFHOG1HLEdBQUVya0csRUFBRSxNQUFNLFFBQVFkLEVBQUUyakcsR0FBRSxFQUFHRyxHQUFHOWpHLEVBQUVjLEVBQUUsT0FBT2dqRyxHQUFHOWpHLEVBQUVjLEVBQUV6QyxHQUFHaUMsS0FBS3dJLEVBQUUsUUFBUyxHQUFHeEksS0FBS3dJLElBQUlwRSxFQUFFaW1HLEdBQUdycUcsS0FBS29FLEdBQUcsR0FBR3BFLEtBQUsyQyxFQUFFdEMsUUFBUXFuRyxHQUFHMW5HLEtBQUtOLElBQUkycUcsR0FBR3JxRyxRQUc1SzZDLEVBQUVnNUYsR0FBRyxXQUFXNzdGLEtBQUt0QyxFQUFFLEtBQUtzQyxLQUFLb0UsRUFBRSxJQUFJNCtGLEdBQUVoakcsS0FBSyxNQUFNQSxLQUFLcWpHLEdBQUcsT0FBT3JqRyxLQUFLNkMsSUFBSTdDLEtBQUtvRSxFQUFFZzJGLEVBQUVwNkYsS0FBS3ZDLEdBQUd1QyxLQUFLb0UsRUFBRWc4RixFQUFFLEVBQUUsSUFBSWg4RixFQUFFODFGLEdBQUVsNkYsS0FBS3k2RixJQUFJb0ssR0FBRXpnRyxFQUFFLE1BQU0sT0FBT3lnRyxHQUFFemdHLEVBQUUsTUFBTXBFLEtBQUs0aEcsR0FBR2lELEdBQUV6Z0csRUFBRSxLQUFLcEUsS0FBS3lwRyxHQUFHLElBQUksS0FBSzVFLEdBQUV6Z0csRUFBRSxNQUFNcEUsS0FBS2tqRyxHQUFHNEcsR0FBRzlwRyxLQUFLb0UsR0FBR3lnRyxHQUFFemdHLEVBQUUsT0FBTyxXQUFXcEUsS0FBSzZDLEdBQUc3QyxLQUFLdkMsR0FBRzJyRyxHQUFHaGxHLEVBQUVwRSxLQUFLNkMsRUFBRTdDLEtBQUt2QyxHQUFHdUMsS0FBSys4RixHQUFHLzhGLEtBQUtvRSxFQUFFbXNCLFdBQVd2d0IsS0FBSys4RixHQUFHNEcsR0FBRzNqRyxLQUFLb0UsRUFBRUEsR0FBRSxFQUFHcEUsS0FBS3VwRyxLQUVsYTFtRyxFQUFFKzRGLEdBQUcsU0FBU3gzRixFQUFFMUUsR0FBRyxHQUFHLEdBQUdNLEtBQUt3SSxJQUFJeEksS0FBS29FLEdBQUdBLEdBQUd3akcsR0FBRzVuRyxLQUFLTixFQUFFMEUsSUFBSSxHQUFHcEUsS0FBS25DLEVBQUV1RyxFQUFFbEcsR0FBR2tHLEVBQUU1RSxHQUFHb29HLEdBQUc1bkcsS0FBS04sRUFBRTBFLElBQUksR0FBR3BFLEtBQUt3SSxFQUFFLENBQUMsSUFBSSxJQUFJMUssRUFBRWtDLEtBQUt1NkYsR0FBR24yRixFQUFFdUgsTUFBTWpNLEdBQUksTUFBTWlELEdBQUc3RSxFQUFFLEtBQU0sR0FBRzRHLEVBQUU1RyxJQUFJLEdBQUdBLEVBQUV1QyxPQUFPLENBQUssR0FBRyxJQUFQWCxFQUFFNUIsR0FBVSxJQUFHc0csRUFBRyxJQUFJcEUsS0FBS3RDLEVBQUUsQ0FBQyxHQUFHc0MsS0FBS29FLEVBQUUsTUFBR3BFLEtBQUtvRSxFQUFFZixFQUFFLElBQUllLEVBQUVmLEdBQTRDLE1BQU1lLEVBQWhEOGxHLEdBQUdscUcsTUFBTUEsS0FBS29FLEVBQUVzc0IsU0FBUzF3QixLQUFLb0UsRUFBRSxLQUFrQndtRyxHQUFHNXFHLE1BQU1vaUcsR0FBRSxVQUFXcGlHLEtBQUs0NkYsR0FBR2w3RixFQUFFLEdBQUcsRUFBRU0sS0FBSzQ2RixHQUFHNTZGLEtBQUtrakcsR0FBRyxNQUFNeGpHLEVBQUUsSUFBSU0sS0FBS3lwRyxJQUFJLEdBQUd6cEcsS0FBS3FELElBQUlyRCxLQUFLUixJQUFJUSxLQUFLUixFQUFFOGlHLEdBQUc5NUYsRUFBRXhJLEtBQUtvL0YsR0FBR3AvRixNQUFNLE1BQU0sR0FBRyxHQUFHMm5HLEdBQUczbkcsS0FBS04sSUFBSU0sS0FBSzg1RixHQUFHLENBQUMsSUFBSTk1RixLQUFLODVGLEtBQU0sTUFBTW4zRixJQUFJM0MsS0FBSzg1RixRQUFHLFFBQWMvc0YsR0FBRS9NLEtBQUssU0FBVSxJQUFJb0UsRUFBRTVFLEdBQzNmUSxLQUFLb0UsR0FBR0EsSUFBSThsRyxHQUFHbHFHLE9BQU8wNkYsRUFBR2g3RixHQUFHLElBQUlBLEVBQUU1QixFQUFFa0MsS0FBS3U2RixHQUFHbjJGLEVBQUV1SCxNQUFNak0sR0FBRzVCLEVBQUUsRUFBRUEsRUFBRTRCLEVBQUVXLE9BQU92QyxJQUFJLENBQUMsSUFBSUMsRUFBRTJCLEVBQUU1QixHQUFzQixHQUFuQmtDLEtBQUtrakcsRUFBRW5sRyxFQUFFLEdBQUdBLEVBQUVBLEVBQUUsR0FBTSxHQUFHaUMsS0FBS3dJLEVBQUUsR0FBRyxLQUFLekssRUFBRSxHQUFHLENBQUNpQyxLQUFLNGhHLEVBQUU3akcsRUFBRSxHQUFHaUMsS0FBS3VwRyxHQUFHeHJHLEVBQUUsR0FBRyxJQUFJeUMsRUFBRXpDLEVBQUUsR0FBRyxNQUFNeUMsSUFBSVIsS0FBS203RixHQUFHMzZGLEdBQVUsT0FBUHpDLEVBQUVBLEVBQUUsS0FBWTA3RixFQUFHMTdGLElBQUksRUFBRUEsSUFBSWlDLEtBQUsrOEYsRUFBRSxJQUFJaC9GLEdBQUdpQyxLQUFLOUIsSUFBSUgsRUFBRXFHLEVBQUVBLE1BQU01RCxFQUFFc2tHLEdBQUcvbUcsRUFBRSw0QkFBNEJ5cEcsR0FBR3huRyxLQUFLTixFQUFFYyxHQUFHUixLQUFLcUUsSUFBSXRHLEVBQUUrbUcsR0FBRy9tRyxFQUFFLHlCQUF5QmlDLEtBQUtpaUcsRUFBRWxrRyxFQUFFOG1HLEdBQUU3a0csS0FBS3k3RixFQUFFejdGLEtBQUtxRSxFQUFFdEcsSUFBSWlDLEtBQUt3SSxFQUFFLEVBQUV4SSxLQUFLbEMsR0FBR2tDLEtBQUtsQyxFQUFFbzlGLEtBQUtuOUYsRUFBRXFHLEVBQUVwRSxLQUFLeTZGLEdBQUdrTSxHQUFHM21HLEtBQUtBLEtBQUsrakcsSUFBSS9qRyxLQUFLdXBHLEdBQUcsS0FBS3ZwRyxLQUFLd3BHLElBQUl6ckcsRUFBRXlCLEdBQUdxb0csR0FBRzduRyxLQUFLTixFQUFFM0IsSUFBSXlDLEVBQUVSLEtBQUsrOEYsSUFBSWgvRixFQUFFd3lCLFdBQVcvdkIsR0FBR3pDLEVBQUVOLElBQUk2bUcsR0FBR3ZtRyxHQUN4ZjZsRyxHQUFHN2xHLElBQUlpQyxLQUFLb0UsRUFBRXJHLEdBQUc0c0csR0FBRzNxRyxNQUFNLEVBQUVBLEtBQUsyQyxFQUFFdEMsUUFBUStwRyxHQUFHcHFHLFVBQVcsUUFBUWpDLEVBQUUsSUFBSSxTQUFTQSxFQUFFLElBQUlnUCxHQUFFL00sS0FBSyxRQUFRLEdBQUdBLEtBQUt3SSxJQUFJLFFBQVF6SyxFQUFFLElBQUksU0FBU0EsRUFBRSxHQUFHLFFBQVFBLEVBQUUsR0FBR2dQLEdBQUUvTSxLQUFLLEdBQUc0cEcsR0FBRzVwRyxNQUFNLFFBQVFqQyxFQUFFLElBQUlpQyxLQUFLbEMsR0FBR2tDLEtBQUtsQyxFQUFFMitCLEdBQUcxK0IsR0FBR2lDLEtBQUtxRCxFQUFFLEtBQU1SLEVBQUV1OEYsR0FBRyxXQUFXLE1BQU1wL0YsS0FBS1IsSUFBSVEsS0FBS1IsRUFBRSxLQUFLUSxLQUFLb0UsRUFBRXNzQixTQUFTMXdCLEtBQUtvRSxFQUFFLEtBQUt3bUcsR0FBRzVxRyxNQUFNb2lHLEdBQUUsTUFDL1N2L0YsRUFBRTBoRyxHQUFHLFNBQVNuZ0csR0FBRyxJQUFJMUUsRUFBRSxLQUFLLEdBQUdNLEtBQUtvRSxHQUFHQSxFQUFFLENBQUM4bEcsR0FBR2xxRyxNQUFNQSxLQUFLb0UsRUFBRSxLQUFLLElBQUl0RyxFQUFFLE1BQVEsS0FBRzhwRyxHQUFHNW5HLEtBQUtOLEVBQUUwRSxHQUErQixPQUE1QjFFLEVBQUUwRSxFQUFFQyxFQUFFd2pHLEdBQUc3bkcsS0FBS04sRUFBRTBFLEdBQUd0RyxFQUFFLEVBQXlCLEdBQVhrQyxLQUFLbkMsRUFBRXVHLEVBQUVsRyxFQUFLLEdBQUc4QixLQUFLd0ksRUFBRSxHQUFHcEUsRUFBRTFFLEVBQUUsR0FBRzVCLEdBQUc0QixFQUFFczZGLElBQUk1MUYsRUFBRWYsRUFBRTQrRixHQUFFekIsY0FBYyxJQUFJNkIsR0FBR0osR0FBRTc5RixFQUFFMUcsRUFBRTBHLEVBQUUxRyxFQUFFMkMsT0FBTyxFQUFFWCxFQUFFTSxLQUFLMjZGLElBQUl5UCxHQUFHcHFHLE9BQU8ycUcsR0FBRzNxRyxVQUFVLENBQUMsSUFBSWpDLEVBQUVxRyxFQUFFdEcsRUFBRSxHQUFHLEdBQUdDLEdBQUcsR0FBR0EsR0FBRyxFQUFFaUMsS0FBS25DLEtBQUssR0FBR0MsR0FWcFMsU0FBWXNHLEVBQUUxRSxHQUFHLFFBQUdpb0csR0FBR3ZqRyxFQUFFMUUsSUFBSTBFLEVBQUUxRSxFQUFFaUQsR0FBR3lCLEVBQUVnMkYsRUFBRSxFQUFFLE1BQWdCaDJGLEVBQUVnMkYsR0FBU2gyRixFQUFFekIsRUFBRWpELEVBQUUyRSxFQUFFTCxPQUFPSSxFQUFFekIsSUFBRyxLQUFNLEdBQUd5QixFQUFFb0UsR0FBRyxHQUFHcEUsRUFBRW9FLEdBQUdwRSxFQUFFdTJGLElBQUl2MkYsRUFBRXE0RixHQUFHLEVBQUVyNEYsRUFBRXU0RixPQUFjdjRGLEVBQUVnMkYsRUFBRWtJLEdBQUc5NUYsRUFBRXBFLEVBQUUwM0YsR0FBRzEzRixFQUFFMUUsR0FBR21yRyxHQUFHem1HLEVBQUVBLEVBQUV1MkYsSUFBSXYyRixFQUFFdTJGLEtBQVcsSUFVZ0gyUixDQUFHdHNHLEtBQUtvRSxJQUFJLEdBQUd0RyxHQUFHOHNHLEdBQUc1cUcsT0FBTyxPQUFPTixHQUFHLEVBQUVBLEVBQUVXLFNBQVMrRCxFQUFFcEUsS0FBS04sRUFBRTBFLEVBQUV0RyxFQUFFc0csRUFBRXRHLEVBQUVrRyxPQUFPdEUsSUFBSTNCLEdBQUcsS0FBSyxFQUFFZ1AsR0FBRS9NLEtBQUssR0FBRyxNQUFNLEtBQUssRUFBRStNLEdBQUUvTSxLQUFLLElBQUksTUFBTSxLQUFLLEVBQUUrTSxHQUFFL00sS0FBSyxHQUFHLE1BQU0sUUFBUStNLEdBQUUvTSxLQUFLLE1BQ3JJNkMsRUFBRTQ4RixHQUFHLFNBQVNyN0YsR0FBS2crRixHQUFGaCtGLEVBQUksRUFBSyxJQUNsR3ZCLEVBQUVpaEcsRUFBRSxTQUFTMS9GLEdBQUcsR0FBR0EsSUFBSXBFLEtBQUtvakcsRUFBRSxNQUFNbjlGLE1BQU0sdURBQW1GLE9BQTVCN0IsRUFBRSxJQUFJNDZGLEdBQUVoL0YsS0FBS2k4RixLQUFNMEMsRUFBRTMrRixLQUFLb2pHLEVBQVNoL0YsR0FBR3ZCLEVBQUUwa0csR0FBRyxXQUFXLFFBQVN2bkcsS0FBS2xDLElBQUcsR0FBSStFLEVBQUVraEcsRUFBRSxXQUFXLE9BQU8vakcsS0FBS29qRyxJQUFrQnZnRyxFQUFFc29HLEdBQUc5ckcsV0FBWTY3RixHQUFHLGFBQzllcjRGLEVBQUU0NUIsR0FBRyxhQUFhNTVCLEVBQUVtNEYsR0FBRyxhQUFhbjRGLEVBQUVrNEYsR0FBRyxhQUFhbDRGLEVBQUVzN0YsR0FBRyxhQUFnVWlOLEdBQUcvckcsVUFBVStFLEVBQUUsU0FBU0EsRUFBRTFFLEdBQUcsT0FBTyxJQUFJcWtHLEdBQUUzL0YsRUFBRTFFLElBRXhIdTZGLEVBQUU4SixHQUFFekosS0FBR3ozRixFQUFFa2hHLEdBQUUxa0csV0FBWW1uRCxpQkFBaUIsU0FBU3BpRCxFQUFFMUUsRUFBRTVCLEVBQUVDLEdBQUdnbUcsR0FBRTdKLEVBQUUxekMsaUJBQWlCNW9ELEtBQUtvQyxLQUFLb0UsRUFBRTFFLEVBQUU1QixFQUFFQyxJQUFLOEUsRUFBRTZqRCxvQkFBb0IsU0FBU3RpRCxFQUFFMUUsRUFBRTVCLEVBQUVDLEdBQUdnbUcsR0FBRTdKLEVBQUV4ekMsb0JBQW9COW9ELEtBQUtvQyxLQUFLb0UsRUFBRTFFLEVBQUU1QixFQUFFQyxJQUNuZThFLEVBQUVxOEYsR0FBRyxXQUFXbC9GLEtBQUtvRSxFQUFFdEcsRUFBRWtDLEtBQUsyQyxFQUFFM0MsS0FBS3RDLElBQUlzQyxLQUFLb0UsRUFBRWcvRixHQUFFLEdBQUksSUFBSWgvRixFQUFFcEUsS0FBS29FLEVBQUUxRSxFQUFFTSxLQUFLbkMsRUFBRUMsRUFBRWtDLEtBQUs2QyxFQUFFOUUsRUFBRWlDLEtBQUtOLFFBQUcsRUFBTzBpRyxHQUFFLEdBQUdoK0YsRUFBRW9sRyxHQUFHMXJHLEVBQUVzRyxFQUFFNitGLEVBQUVsbEcsR0FBRyxHQUFHcUcsRUFBRWxHLElBQUlrRyxFQUFFdTZGLEVBQUVqL0YsRUFBRSxHQUFHMEUsRUFBRXU2RixFQUFFdjZGLEdBQUUsR0FBSUEsRUFBRTQxRixFQUFFLElBQUl3TSxHQUFHcGlHLEdBQUcsT0FBT0EsRUFBRXZCLElBQUl1QixFQUFFNDFGLEVBQUVJLEVBQUVoMkYsRUFBRTNHLEdBQUdLLEVBQUU0QixFQUFFMEUsRUFBRXZCLEdBQUd1QixFQUFFM0csSUFBSUssRUFBRXNyRyxHQUFHMXBHLEVBQUUwRSxFQUFFdkIsRUFBRXVCLEVBQUUzRyxLQUFJMkcsRUFBRUEsRUFBRTQxRixHQUFJdjhGLEVBQUVLLEVBQUU0QixFQUFFaW5HLEdBQUd2aUcsRUFBRUEsRUFBRSxLQUFLQSxFQUFFM0csR0FBRzJrRyxHQUFFLEdBQWEsT0FBVnRrRyxFQUFFc0csRUFBRUEsRUFBRXU2RixFQUFFai9GLElBQVcwRSxFQUFFekIsRUFBRTdFLEVBQUUsR0FBR3NHLEVBQUU0K0YsRUFBRSxFQUFFeUQsR0FBR3JpRyxLQUFLeS9GLEdBQUdua0csRUFBRSxPQUFPLFNBQVMwRSxFQUFFQSxFQUFFbEcsR0FBR2tHLEVBQUVBLEVBQUVDLEdBQUd3L0YsR0FBR25rRyxFQUFFLG9CQUFvQjBFLEVBQUVBLEVBQUVDLEdBQUdELEVBQUUxRSxFQUFFLElBQUlzakcsR0FBRTUrRixPQUFFLE9BQU8sR0FBUUEsRUFBRTFFLEVBQUUwNkYsRUFBRWgyRixFQUFFZzJGLEVBQUV1SixHQUFHdi9GLEVBQUUxRSxFQUFFQSxHQUFFLEVBQUcsTUFBTTBFLEVBQUU0K0YsRUFBRSxJQUFLbmdHLEVBQUVrTCxNQUFNLFdBQVc2N0YsR0FBRzVwRyxLQUFLb0UsSUFDdmN2QixFQUFFczhGLEdBQUcsU0FBUy82RixHQUFHLEdBQUd2RyxFQUFFdUcsR0FBRyxDQUFDLElBQUkxRSxFQUFFLEdBQUdBLEVBQUUyc0csU0FBU2pvRyxFQUFFK2xHLEdBQUducUcsS0FBS29FLEVBQUUxRSxRQUFTTSxLQUFLbzZGLElBQUcxNkYsRUFBRSxJQUFLMnNHLFNBQVM1TCxHQUFHcjhGLEdBQUcrbEcsR0FBR25xRyxLQUFLb0UsRUFBRTFFLElBQUl5cUcsR0FBR25xRyxLQUFLb0UsRUFBRUEsSUFBS3ZCLEVBQUV5M0YsRUFBRSxXQUFXdDZGLEtBQUtvRSxFQUFFdEcsRUFBRSxZQUFZa0MsS0FBSzJDLEVBQUVpbkcsR0FBRzVwRyxLQUFLb0UsVUFBVXBFLEtBQUtvRSxFQUFFMi9GLEdBQUU3SixFQUFFSSxFQUFFMThGLEtBQUtvQyxPQUErTGk2RixFQUFFeVIsR0FBRzdJLElBQStDNUksRUFBRTJSLEdBQUc5SSxJQUE0QjdJLEVBQUVnRixHQUFFa00sSUFBSWxNLEdBQUU1L0YsVUFBVTY3RixHQUFHLFdBQVdsN0YsS0FBS29FLEVBQUVvOEYsY0FBYyxNQUN4aEJ2QixHQUFFNS9GLFVBQVVvOUIsR0FBRyxTQUFTcjRCLEdBQUdwRSxLQUFLb0UsRUFBRW84RixjQUFjLElBQUlrTCxHQUFHdG5HLEtBQU02NkYsR0FBRTUvRixVQUFVMjdGLEdBQUcsU0FBUzUyRixHQUFHcEUsS0FBS29FLEVBQUVvOEYsY0FBYyxJQUFJb0wsR0FBR3huRyxLQUFNNjZGLEdBQUU1L0YsVUFBVTA3RixHQUFHLFdBQVcvNkYsS0FBS29FLEVBQUVvOEYsY0FBYyxNQUFPLElBQUkrTCxHQUFHbHBHLEdBQUUsU0FBU2UsRUFBRTFFLEdBQUcsU0FBUzVCLEtBQUtBLEVBQUV1QixVQUFVK0UsRUFBRS9FLFVBQVUsSUFBSXRCLEVBQUUsSUFBSUQsRUFBcUQsT0FBbkRzRyxFQUFFOUQsTUFBTXZDLEVBQUU4QixNQUFNUixVQUFVK0wsTUFBTXhOLEtBQUt3QyxVQUFVLElBQVdyQyxJQUFHcXRHLElBZ0J0VEEsR0FBRy9yRyxVQUFVODJGLGlCQUFpQmlWLEdBQUcvckcsVUFBVStFLEVBQUUyL0YsR0FBRTFrRyxVQUFVazhELEtBQUt3b0MsR0FBRTFrRyxVQUFVOC9GLEdBQUc0RSxHQUFFMWtHLFVBQVU2OEIsS0FBSzZuRSxHQUFFMWtHLFVBQVU2L0YsR0FBRzZFLEdBQUUxa0csVUFBVTBPLE1BQU1nMkYsR0FBRTFrRyxVQUFVME8sTUFBTXcwRixHQUFHL04sU0FBUyxFQUFFK04sR0FBRzVOLFFBQVEsRUFBRTROLEdBQUczTixXQUFXLEVBQUU0TixHQUFHbk8sU0FBUyxXQUFXc08sR0FBR3ZPLFVBQVVtTixHQUFFQSxHQUFFN0ssS0FBSyxJQUFJNkssR0FBRTVLLE1BQU0sSUFBSTRLLEdBQUU1bUYsTUFBTSxJQUFJNG1GLEdBQUUzSyxRQUFRLElBQUkwRCxHQUFFajdGLFVBQVVrcEUsT0FBTyt4QixHQUFFajdGLFVBQVVpOEYsR0FBRzBELEdBQUUzL0YsVUFBVTgwRixXQUFXNkssR0FBRTMvRixVQUFVazlGLEdBQUd5QyxHQUFFMy9GLFVBQVU4MUYsYUFBYTZKLEdBQUUzL0YsVUFBVWdnRyxHQUFHTCxHQUFFMy9GLFVBQVVpMUYsaUJBQWlCMEssR0FBRTMvRixVQUFVZzhGLEdBQUcyRCxHQUFFMy9GLFVBQVV3MUYsVUFBVW1LLEdBQUUzL0YsVUFBVXdsRyxFQUFFN0YsR0FBRTMvRixVQUFVcTFGLGdCQUFnQnNLLEdBQUUzL0YsVUFBVXcvRixHQUMzZkcsR0FBRTMvRixVQUFVeTFGLGdCQUFnQmtLLEdBQUUzL0YsVUFBVW82RixHQUFHdUYsR0FBRTMvRixVQUFVazhELEtBQUt5akMsR0FBRTMvRixVQUFVczZGLEdBQUcsSUFBSTZTLEdBQUksQ0FBQ2hYLDBCQUEwQitXLEdBQUdoWSxVQUFVZ08sR0FBR25PLFVBQVVvTyxHQUFHL0wsV0FBV2tNLEdBQUd6TyxNQUFNOEssSUFDM0p5TixHQUFRRCxHQUFJaFgsMEJBQ1prWCxHQUFRRixHQUFJalksVUFDWm9ZLEdBQVFILEdBQUlwWSxVQUNad1ksR0FBUUosR0FBSS9WLFdBQ1pvVyxHQUFRTCxHQUFJdFksTUFFRCxjLHlEQ2hGSDRZLEVBTUFDLEUsTUFOWixTQUFZRCxHQUNWLHlCQUNBLDZCQUNBLHlCQUhGLENBQVlBLE1BQTZCLEtBTXpDLFNBQVlDLEdBQ1YsMkJBQ0EscUJBQ0EsNkJBQ0EsMkJBQ0EsMkJBQ0EseUJBTkYsQ0FBWUEsTUFBd0IsS0FTcEMsSUN0QktDLEVEc0JMLEVBTUUsU0FBWUMsRUFBOERDLEVBQW1DQyxRQUFuQyxJQUFBRCxXQUFBLFFBQW1DLElBQUFDLFdBQUEsR0FDM0dudEcsS0FBSzhTLEtBQU9tNkYsRUFDWmp0RyxLQUFLa3RHLGFBQWVBLEVBQ3BCbHRHLEtBQUttdEcsUUFBVUEsR0FrQm5CLDJCQXNDQSxPQXBDUyxFQUFBQyxZQUFQLFNBQW1CQyxFQUFjQyxHQUMvQixPQUFPMThGLEtBQUsyOEYsS0FBSzM4RixLQUFLaW1CLElBQUt5MkUsRUFBSXJULEVBQUlvVCxFQUFJcFQsRUFBSSxHQUFNcnBGLEtBQUtpbUIsSUFBS3kyRSxFQUFJMXFHLEVBQUl5cUcsRUFBSXpxRyxFQUFJLEtBR3RFLEVBQUE0cUcsYUFBUCxTQUFvQkMsR0FDbEIsTUFBTyxDQUFFeFQsR0FBSXdULEVBQUssR0FBR3hULEVBQUl3VCxFQUFLLEdBQUd4VCxHQUFLLEVBQUdyM0YsR0FBSTZxRyxFQUFLLEdBQUc3cUcsRUFBSTZxRyxFQUFLLEdBQUc3cUcsR0FBSyxJQUdqRSxFQUFBOHFHLGNBQVAsU0FBcUJDLEVBQWFDLEdBQ2hDLE9BQVE1dEcsS0FBSzZ0RyxlQUFlRixFQUFNLEdBQUlDLEVBQU0sS0FBTzV0RyxLQUFLNnRHLGVBQWVGLEVBQU0sR0FBSUMsRUFBTSxLQUFTNXRHLEtBQUs2dEcsZUFBZUYsRUFBTSxHQUFJQyxFQUFNLEtBQU81dEcsS0FBSzZ0RyxlQUFlRixFQUFNLEdBQUlDLEVBQU0sS0FHMUssRUFBQUMsZUFBUCxTQUFzQkMsRUFBaUJDLEdBQ3JDLE9BQU9ELEVBQU83VCxJQUFNOFQsRUFBTzlULEdBQUs2VCxFQUFPbHJHLElBQU1tckcsRUFBT25yRyxHQU8vQyxFQUFBb3JHLGdCQUFQLFNBQXVCQyxFQUFnQm5oRyxHQUtyQyxJQUpBLElBQU1vaEcsRUFBeUIsRUFBVHBoRyxFQUNsQnFoRyxFQUFXRixFQUFNaFUsRUFBSW50RixFQUNyQnNoRyxFQUFXSCxFQUFNcnJHLEVBQUlrSyxFQUNuQnVoRyxFQUFlLEdBQ1o1d0csRUFBSSxFQUFHQSxFQUFJeXdHLEVBQWV6d0csSUFDakM0d0csRUFBYTVxRyxLQUFLLENBQUV3MkYsRUFBR2tVLEVBQVV2ckcsRUFBR3dyRyxHQUFZLElBQ2xELElBQVMzd0csRUFBSSxFQUFHQSxFQUFJeXdHLEVBQWV6d0csSUFDakM0d0csRUFBYTVxRyxLQUFLLENBQUV3MkYsRUFBR2tVLEdBQVksRUFBR3ZyRyxFQUFHd3JHLElBQzNDLElBQVMzd0csRUFBSSxFQUFHQSxFQUFJeXdHLEVBQWV6d0csSUFDakM0d0csRUFBYTVxRyxLQUFLLENBQUV3MkYsRUFBR2tVLEVBQVV2ckcsRUFBR3dyRyxHQUFZLElBQ2xELElBQVMzd0csRUFBSSxFQUFHQSxFQUFJeXdHLEVBQWV6d0csSUFDakM0d0csRUFBYTVxRyxLQUFLLENBQUV3MkYsRUFBR2tVLEdBQVksRUFBR3ZyRyxFQUFHd3JHLElBQzNDLE9BQU9DLEdBR1gsRUF0Q0EsRywwTEV2REEseUJBc1dBLE9BaldTLEVBQUFDLGNBQVAsU0FBcUJDLEdBQ25CLE9BQU8sSUFBSXhzRyxTQUFRLFNBQUNvUCxFQUFLcTlGLEdBQ3ZCLElBQU1DLEVBQVMsSUFBSUMsV0FDbkJELEVBQU9FLFdBQVdKLEVBQU0sU0FDeEJFLEVBQU92RyxPQUFTLFdBQ2QvMkYsRUFBSXM5RixFQUFPbnNHLFNBRWJtc0csRUFBT256RixRQUFVLFdBQ2ZwUyxRQUFRNE8sSUFBSSxnQ0FVWCxFQUFBODJGLGFBQVAsU0FBb0I5cUYsR0FDbEIsSUFBTXhTLEVBQWMsR0FDZHU5RixFQUFTenZGLFNBQVN3QixjQUFjLEtBQ3RDaXVGLEVBQU9DLEtBQU9ockYsRUFFZCxJQURBLElBQU1pckYsRUFBT0YsRUFBTzlrQixPQUFPNWdFLFVBQVUsR0FBR2pkLE1BQU0sS0FDckN6TyxFQUFJLEVBQUdBLEVBQUlzeEcsRUFBSzF1RyxPQUFRNUMsSUFBSyxDQUNwQyxJQUFNdXhHLEVBQU9ELEVBQUt0eEcsR0FBR3lPLE1BQU0sS0FDM0JvRixFQUFPMDlGLEVBQUssSUFBTWxKLG1CQUFtQmtKLEVBQUssSUFFNUMsT0FBTzE5RixHQU1GLEVBQUEyOUYsVUFBUCxTQUFpQng2RSxHQUNmLEtBQU9BLEVBQUt4UyxZQUFjd1MsRUFBSzdTLFlBQVk2UyxFQUFLeFMsZ0JBUTNDLEVBQUFpdEYsV0FBUCxTQUFrQm5tRixFQUE2QmpjLEVBQVlxaUcsUUFBWixJQUFBcmlHLE1BQUEsUUFBWSxJQUFBcWlHLE1BQUEsR0FDekQsSUFBTUMsRUFBT2h3RixTQUFTaXdGLGdCQUFnQiw2QkFBOEIsUUFPcEUsT0FOQUQsRUFBS3J1RixhQUFhLEtBQU1nSSxFQUFRdW1GLFVBQVVyVixFQUFJbnRGLEdBQVF0QixZQUN0RDRqRyxFQUFLcnVGLGFBQWEsS0FBTWdJLEVBQVF1bUYsVUFBVTFzRyxFQUFJa0ssR0FBUXRCLFlBQ3RENGpHLEVBQUtydUYsYUFBYSxTQUFVZ0ksRUFBUXVtRixVQUFVQyxNQUFpQixFQUFUemlHLEdBQVl0QixZQUNsRTRqRyxFQUFLcnVGLGFBQWEsVUFBV2dJLEVBQVF1bUYsVUFBVUUsT0FBa0IsRUFBVDFpRyxHQUFZdEIsWUFDcEU0akcsRUFBS3J1RixhQUFhLEtBQU1vdUYsRUFBTzNqRyxZQUMvQjRqRyxFQUFLcnVGLGFBQWEsS0FBTW91RixFQUFPM2pHLFlBQ3hCNGpHLEdBTUYsRUFBQUssWUFBUCxTQUFtQjFtRixFQUE2QmpjLEdBQzlDLFlBRDhDLElBQUFBLE1BQUEsR0FDL0IsSUFBWEEsRUFDSyxDQUNMbXRGLEVBQUdseEUsRUFBUXVtRixVQUFVclYsRUFBSW50RixFQUN6QmxLLEVBQUdtbUIsRUFBUXVtRixVQUFVMXNHLEVBQUlrSyxFQUN6QnlpRyxNQUFPeG1GLEVBQVF1bUYsVUFBVUMsTUFBaUIsRUFBVHppRyxFQUNqQzBpRyxPQUFRem1GLEVBQVF1bUYsVUFBVUUsT0FBa0IsRUFBVDFpRyxHQUc5QmljLEVBQVF1bUYsV0FRWixFQUFBSSxrQkFBUCxTQUF5Qmx2RyxFQUFlbXZHLEdBQ3RDLElBQU1DLEVBQVdELEVBQU9FLGlCQUl4QixPQUhBRCxFQUFTM1YsRUFBSXo1RixFQUFFNjhGLFFBQ2Z1UyxFQUFTaHRHLEVBQUlwQyxFQUFFNDhGLFFBRVJ3UyxFQUFTRSxnQkFBZ0JILEVBQU9JLGVBQWVDLFlBR2pELEVBQUFDLDBCQUFQLFNBQWlDenZHLEdBQy9CLE1BQU8sQ0FBRXk1RixFQUFHejVGLEVBQUU2OEYsUUFBU3o2RixFQUFHcEMsRUFBRTQ4RixVQUl2QixFQUFBOFMsT0FBUCxXQUNFLE9BQVEsSUFBTTFrRyxZQUFjLEtBQU8sS0FBTyxLQUFPLE1BQU1GLFFBQVEsVUFBVSxTQUFBeE4sR0FDdkUsT0FBQzhvQixPQUFPOW9CLEdBQUtxeUcsT0FBT0MsZ0JBQWdCLElBQUkzbEYsV0FBVyxJQUFJLEdBQUssSUFBTTdELE9BQU85b0IsR0FBSyxHQUFHME4sU0FBUyxRQUl2RixFQUFBNmtHLGNBQVAsU0FBcUJsaUcsR0FDbkIsSUFBSSxJQUFJblAsS0FBT21QLEVBQ2IsR0FBR0EsRUFBSTdPLGVBQWVOLEdBQ3BCLE9BQU8sRUFFWCxPQUFPLEdBR0YsRUFBQXN4RyxnQkFBUCxTQUF1QmxCLEdBQ3JCLElBQU1tQixFQUFVLENBQUV0VyxFQUFHbVYsRUFBS25WLEVBQUdyM0YsRUFBR3dzRyxFQUFLeHNHLEdBQy9CNHRHLEVBQVUsQ0FBRXZXLEVBQUdtVixFQUFLblYsRUFBSW1WLEVBQUtHLE1BQU8zc0csRUFBR3dzRyxFQUFLeHNHLEdBQzVDNnRHLEVBQVUsQ0FBRXhXLEVBQUdtVixFQUFLblYsRUFBSW1WLEVBQUtHLE1BQU8zc0csRUFBR3dzRyxFQUFLeHNHLEVBQUl3c0csRUFBS0ksUUFDckRrQixFQUFVLENBQUV6VyxFQUFHbVYsRUFBS25WLEVBQUdyM0YsRUFBR3dzRyxFQUFLeHNHLEVBQUl3c0csRUFBS0ksUUFDOUMsTUFBTyxDQUNMLENBQUNlLEVBQVNDLEdBQ1YsQ0FBQ0EsRUFBU0MsR0FDVixDQUFDQSxFQUFTQyxHQUNWLENBQUNBLEVBQVNILEtBUVAsRUFBQUksV0FBUCxTQUFrQnZCLEVBQWlCd0IsRUFBYUMsR0FDOUMsWUFEOEMsSUFBQUEsT0FBQSxHQUMxQ0EsRUFDTUQsRUFBRzNXLEdBQUttVixFQUFLblYsR0FBSzJXLEVBQUczVyxHQUFNbVYsRUFBS25WLEVBQUltVixFQUFLRyxPQUFZcUIsRUFBR2h1RyxHQUFLd3NHLEVBQUt4c0csR0FBS2d1RyxFQUFHaHVHLEdBQU13c0csRUFBS3hzRyxFQUFJd3NHLEVBQUtJLE9BRTlGb0IsRUFBRzNXLEVBQUltVixFQUFLblYsR0FBSzJXLEVBQUczVyxFQUFLbVYsRUFBS25WLEVBQUltVixFQUFLRyxPQUFZcUIsRUFBR2h1RyxFQUFJd3NHLEVBQUt4c0csR0FBS2d1RyxFQUFHaHVHLEVBQUt3c0csRUFBS3hzRyxFQUFJd3NHLEVBQUtJLFFBWS9GLEVBQUFzQixhQUFQLFNBQW9CckQsRUFBWTJCLEdBQzlCLE9BQVFwdkcsS0FBSzJ3RyxXQUFXdkIsRUFBTTNCLEVBQUssS0FBa0J6dEcsS0FBSzJ3RyxXQUFXdkIsRUFBTTNCLEVBQUssS0FVM0UsRUFBQXNELGFBQVAsU0FBb0JyeUcsRUFBZXN5RyxFQUFnQkMsRUFBZ0JKLEdBQ2pFLFlBRGlFLElBQUFBLE9BQUEsR0FDN0RBLEVBQ0tueUcsR0FBU2tTLEtBQUt5ZCxJQUFJMmlGLEVBQVFDLElBQVd2eUcsR0FBU2tTLEtBQUtrYyxJQUFJa2tGLEVBQVFDLEdBRS9EdnlHLEVBQVFrUyxLQUFLeWQsSUFBSTJpRixFQUFRQyxJQUFXdnlHLEVBQVFrUyxLQUFLa2MsSUFBSWtrRixFQUFRQyxJQUlqRSxFQUFBQyxpQkFBUCxTQUF3QnpELEdBQ3RCLE9BQU9BLEVBQUssR0FBRzdxRyxJQUFNNnFHLEVBQUssR0FBRzdxRyxHQUd4QixFQUFBdXVHLGVBQVAsU0FBc0IxRCxHQUNwQixPQUFPQSxFQUFLLEdBQUd4VCxJQUFNd1QsRUFBSyxHQUFHeFQsR0FLeEIsRUFBQW1YLGtCQUFQLFNBQXlCQyxFQUFnQkMsRUFBNEJDLFFBQTVCLElBQUFELFdBQUEsUUFBNEIsSUFBQUMsT0FBQSxHQUNuRSxJQUFNQyxPQUF3QmpvRyxJQUFWK25HLEVBQXNCQSxFQUFRRCxFQUFJLEdBQ2hESSxFQUFZSixFQUFJLytFLE1BQUssU0FBQ2x1QixFQUFHMUUsR0FDN0IsT0FBSWd5RyxFQUFhdEUsWUFBWW9FLEVBQWFwdEcsR0FBS3N0RyxFQUFhdEUsWUFBWW9FLEVBQWE5eEcsSUFDM0UsRUFDRGd5RyxFQUFhdEUsWUFBWW9FLEVBQWFwdEcsR0FBS3N0RyxFQUFhdEUsWUFBWW9FLEVBQWE5eEcsR0FDakYsRUFFQSxLQUVYLFlBQWtCNkosSUFBVituRyxJQUF3QyxJQUFqQkMsRUFBeUIsRUFBRCxDQUFFRCxHQUFVRyxHQUFhQSxHQU0zRSxFQUFBRSxnQkFBUCxTQUF1Qk4sR0FDckIsR0FBSUEsRUFBSWh4RyxPQUFTLEVBQUcsQ0FFbEIsSUFEQSxJQUFNNnNCLEVBQW1CLEdBQ2hCenZCLEVBQUksRUFBR0EsRUFBSTR6RyxFQUFJaHhHLE9BQVMsRUFBRzVDLElBQ2xDeXZCLEVBQVN6cEIsS0FBSyxDQUFDNHRHLEVBQUk1ekcsR0FBSTR6RyxFQUFJNXpHLEVBQUksS0FFakMsT0FBT3l2QixFQUVQLE9BQU8sTUFPSixFQUFBMGtGLHFCQUFQLFNBQTRCQyxFQUFrQkMsR0FDNUMsT0FBSUQsRUFBTTVYLElBQU02WCxFQUFNN1gsR0FBSzRYLEVBQU1qdkcsSUFBTWt2RyxFQUFNbHZHLEdBQUtpdkcsRUFBTXRDLFFBQVV1QyxFQUFNdkMsT0FBU3NDLEVBQU1yQyxTQUFXc0MsRUFBTXRDLE9BQy9GekMsRUFBeUJnRixNQUN2Qi94RyxLQUFLMndHLFdBQVdtQixFQUFPLENBQUU3WCxFQUFHNFgsRUFBTTVYLEVBQUdyM0YsRUFBR2l2RyxFQUFNanZHLEtBQ3ZENUMsS0FBSzJ3RyxXQUFXbUIsRUFBTyxDQUFFN1gsRUFBRzRYLEVBQU01WCxFQUFJNFgsRUFBTXRDLE1BQU8zc0csRUFBR2l2RyxFQUFNanZHLEtBQzVENUMsS0FBSzJ3RyxXQUFXbUIsRUFBTyxDQUFFN1gsRUFBRzRYLEVBQU01WCxFQUFJNFgsRUFBTXRDLE1BQU8zc0csRUFBR2l2RyxFQUFNanZHLEVBQUlpdkcsRUFBTXJDLFVBQ3RFeHZHLEtBQUsyd0csV0FBV21CLEVBQU8sQ0FBRTdYLEVBQUc0WCxFQUFNNVgsRUFBR3IzRixFQUFHaXZHLEVBQU1qdkcsRUFBSWl2RyxFQUFNckMsU0FDakR6QyxFQUF5QmlGLFNBQ3ZCaHlHLEtBQUsyd0csV0FBV2tCLEVBQU8sQ0FBRTVYLEVBQUc2WCxFQUFNN1gsRUFBR3IzRixFQUFHa3ZHLEVBQU1sdkcsS0FDdkQ1QyxLQUFLMndHLFdBQVdrQixFQUFPLENBQUU1WCxFQUFHNlgsRUFBTTdYLEVBQUk2WCxFQUFNdkMsTUFBTzNzRyxFQUFHa3ZHLEVBQU1sdkcsS0FDNUQ1QyxLQUFLMndHLFdBQVdrQixFQUFPLENBQUU1WCxFQUFHNlgsRUFBTTdYLEVBQUk2WCxFQUFNdkMsTUFBTzNzRyxFQUFHa3ZHLEVBQU1sdkcsRUFBSWt2RyxFQUFNdEMsVUFDdEV4dkcsS0FBSzJ3RyxXQUFXa0IsRUFBTyxDQUFFNVgsRUFBRzZYLEVBQU03WCxFQUFHcjNGLEVBQUdrdkcsRUFBTWx2RyxFQUFJa3ZHLEVBQU10QyxTQUNqRHpDLEVBQXlCa0YsU0FDdkJqeUcsS0FBSzJ3RyxXQUFXbUIsRUFBTyxDQUFFN1gsRUFBRzRYLEVBQU01WCxFQUFHcjNGLEVBQUdpdkcsRUFBTWp2RyxJQUFLLElBQzVENUMsS0FBSzJ3RyxXQUFXbUIsRUFBTyxDQUFFN1gsRUFBRzRYLEVBQU01WCxFQUFJNFgsRUFBTXRDLE1BQU8zc0csRUFBR2l2RyxFQUFNanZHLElBQUssSUFDakU1QyxLQUFLMndHLFdBQVdtQixFQUFPLENBQUU3WCxFQUFHNFgsRUFBTTVYLEVBQUk0WCxFQUFNdEMsTUFBTzNzRyxFQUFHaXZHLEVBQU1qdkcsRUFBSWl2RyxFQUFNckMsU0FBVSxJQUNoRnh2RyxLQUFLMndHLFdBQVdtQixFQUFPLENBQUU3WCxFQUFHNFgsRUFBTTVYLEVBQUdyM0YsRUFBR2l2RyxFQUFNanZHLEVBQUlpdkcsRUFBTXJDLFNBQVUsSUFDbEV4dkcsS0FBSzJ3RyxXQUFXa0IsRUFBTyxDQUFFNVgsRUFBRzZYLEVBQU03WCxFQUFHcjNGLEVBQUdrdkcsRUFBTWx2RyxJQUFLLElBQ25ENUMsS0FBSzJ3RyxXQUFXa0IsRUFBTyxDQUFFNVgsRUFBRzZYLEVBQU03WCxFQUFJNlgsRUFBTXZDLE1BQU8zc0csRUFBR2t2RyxFQUFNbHZHLElBQUssSUFDakU1QyxLQUFLMndHLFdBQVdrQixFQUFPLENBQUU1WCxFQUFHNlgsRUFBTTdYLEVBQUk2WCxFQUFNdkMsTUFBTzNzRyxFQUFHa3ZHLEVBQU1sdkcsRUFBSWt2RyxFQUFNdEMsU0FBVSxJQUNoRnh2RyxLQUFLMndHLFdBQVdrQixFQUFPLENBQUU1WCxFQUFHNlgsRUFBTTdYLEVBQUdyM0YsRUFBR2t2RyxFQUFNbHZHLEVBQUlrdkcsRUFBTXRDLFNBQVUsSUFDakV4dkcsS0FBSyt3RyxhQUFhYyxFQUFNanZHLEVBQUdrdkcsRUFBTWx2RyxFQUFHa3ZHLEVBQU1sdkcsRUFBSWt2RyxFQUFNdEMsUUFBUSxJQUFVcUMsRUFBTTVYLEdBQUs2WCxFQUFNN1gsR0FBTTRYLEVBQU01WCxFQUFJNFgsRUFBTXRDLE9BQVd1QyxFQUFNN1gsRUFBSTZYLEVBQU12QyxPQUN4SXZ2RyxLQUFLK3dHLGFBQWFlLEVBQU1sdkcsRUFBR2l2RyxFQUFNanZHLEVBQUdpdkcsRUFBTWp2RyxFQUFJaXZHLEVBQU1yQyxRQUFRLElBQVVzQyxFQUFNN1gsR0FBSzRYLEVBQU01WCxHQUFNNlgsRUFBTTdYLEVBQUk2WCxFQUFNdkMsT0FBV3NDLEVBQU01WCxFQUFJNFgsRUFBTXRDLE1BQ2xJeEMsRUFBeUJtRixVQUN2Qmx5RyxLQUFLMndHLFdBQVdtQixFQUFPLENBQUU3WCxFQUFHNFgsRUFBTTVYLEVBQUdyM0YsRUFBR2l2RyxFQUFNanZHLEtBQ3ZENUMsS0FBSzJ3RyxXQUFXbUIsRUFBTyxDQUFFN1gsRUFBRzRYLEVBQU01WCxFQUFJNFgsRUFBTXRDLE1BQU8zc0csRUFBR2l2RyxFQUFNanZHLEtBQzVENUMsS0FBSzJ3RyxXQUFXbUIsRUFBTyxDQUFFN1gsRUFBRzRYLEVBQU01WCxFQUFJNFgsRUFBTXRDLE1BQU8zc0csRUFBR2l2RyxFQUFNanZHLEVBQUlpdkcsRUFBTXJDLFVBQ3RFeHZHLEtBQUsyd0csV0FBV21CLEVBQU8sQ0FBRTdYLEVBQUc0WCxFQUFNNVgsRUFBR3IzRixFQUFHaXZHLEVBQU1qdkcsRUFBSWl2RyxFQUFNckMsVUFDeER4dkcsS0FBSzJ3RyxXQUFXa0IsRUFBTyxDQUFFNVgsRUFBRzZYLEVBQU03WCxFQUFHcjNGLEVBQUdrdkcsRUFBTWx2RyxLQUM5QzVDLEtBQUsyd0csV0FBV2tCLEVBQU8sQ0FBRTVYLEVBQUc2WCxFQUFNN1gsRUFBSTZYLEVBQU12QyxNQUFPM3NHLEVBQUdrdkcsRUFBTWx2RyxLQUM1RDVDLEtBQUsyd0csV0FBV2tCLEVBQU8sQ0FBRTVYLEVBQUc2WCxFQUFNN1gsRUFBSTZYLEVBQU12QyxNQUFPM3NHLEVBQUdrdkcsRUFBTWx2RyxFQUFJa3ZHLEVBQU10QyxVQUN0RXh2RyxLQUFLMndHLFdBQVdrQixFQUFPLENBQUU1WCxFQUFHNlgsRUFBTTdYLEVBQUdyM0YsRUFBR2t2RyxFQUFNbHZHLEVBQUlrdkcsRUFBTXRDLFNBQ2pEekMsRUFBeUJvRixRQUV6QnBGLEVBQXlCcUYsVUFPN0IsRUFBQUMsNkJBQVAsU0FBb0MxRSxFQUFhQyxHQUMvQyxHQUFJNXRHLEtBQUtreEcsaUJBQWlCdkQsSUFBVTN0RyxLQUFLbXhHLGVBQWV2RCxHQUN0RCxPQUFJNXRHLEtBQUsrd0csYUFBYXBELEVBQU0sR0FBRy9xRyxFQUFHZ3JHLEVBQU0sR0FBR2hyRyxFQUFHZ3JHLEVBQU0sR0FBR2hyRyxJQUFNNUMsS0FBSyt3RyxhQUFhbkQsRUFBTSxHQUFHM1QsRUFBRzBULEVBQU0sR0FBRzFULEVBQUcwVCxFQUFNLEdBQUcxVCxHQUN2RyxJQUFJcVksRUFBMEJ4RixFQUE4Qm9GLFVBQVcsQ0FBRWpZLEVBQUcyVCxFQUFNLEdBQUczVCxFQUFHcjNGLEVBQUcrcUcsRUFBTSxHQUFHL3FHLElBRXBHLElBQUkwdkcsRUFBMEJ4RixFQUE4QnlGLFNBRWhFLEdBQUl2eUcsS0FBS2t4RyxpQkFBaUJ0RCxJQUFVNXRHLEtBQUtteEcsZUFBZXhELEdBQzdELE9BQUkzdEcsS0FBSyt3RyxhQUFhbkQsRUFBTSxHQUFHaHJHLEVBQUcrcUcsRUFBTSxHQUFHL3FHLEVBQUcrcUcsRUFBTSxHQUFHL3FHLElBQU01QyxLQUFLK3dHLGFBQWFwRCxFQUFNLEdBQUcxVCxFQUFHMlQsRUFBTSxHQUFHM1QsRUFBRzJULEVBQU0sR0FBRzNULEdBQ3ZHLElBQUlxWSxFQUEwQnhGLEVBQThCb0YsVUFBVyxDQUFFalksRUFBRzBULEVBQU0sR0FBRzFULEVBQUdyM0YsRUFBR2dyRyxFQUFNLEdBQUdockcsSUFFcEcsSUFBSTB2RyxFQUEwQnhGLEVBQThCeUYsU0FFaEUsR0FBSXZ5RyxLQUFLa3hHLGlCQUFpQnZELElBQVUzdEcsS0FBS2t4RyxpQkFBaUJ0RCxHQUFRLENBQ3ZFLEdBQUlELEVBQU0sR0FBRy9xRyxJQUFNZ3JHLEVBQU0sR0FBR2hyRyxFQUFHLENBQzdCLElBQU00dkcsRUFBYzVoRyxLQUFLeWQsSUFBSXpkLEtBQUtrYyxJQUFJNmdGLEVBQU0sR0FBRzFULEVBQUcwVCxFQUFNLEdBQUcxVCxHQUFJcnBGLEtBQUtrYyxJQUFJOGdGLEVBQU0sR0FBRzNULEVBQUcyVCxFQUFNLEdBQUczVCxJQUN2RndZLEVBQVk3aEcsS0FBS2tjLElBQUlsYyxLQUFLeWQsSUFBSXMvRSxFQUFNLEdBQUcxVCxFQUFHMFQsRUFBTSxHQUFHMVQsR0FBSXJwRixLQUFLeWQsSUFBSXUvRSxFQUFNLEdBQUczVCxFQUFHMlQsRUFBTSxHQUFHM1QsSUFDM0YsT0FBSXVZLEdBQWVDLEVBQ1YsSUFBSUgsRUFBMEJ4RixFQUE4QjRGLGFBQVNucEcsRUFBVyxDQUFDLENBQUUwd0YsRUFBR3VZLEVBQWE1dkcsRUFBRytxRyxFQUFNLEdBQUcvcUcsR0FBSyxDQUFFcTNGLEVBQUd3WSxFQUFXN3ZHLEVBQUcrcUcsRUFBTSxHQUFHL3FHLEtBRWhKLElBQUkwdkcsRUFBMEJ4RixFQUE4QnlGLFNBR3JFLE9BQU8sSUFBSUQsRUFBMEJ4RixFQUE4QnlGLFNBRWhFLEdBQUl2eUcsS0FBS214RyxlQUFleEQsSUFBVTN0RyxLQUFLbXhHLGVBQWV2RCxHQUFRLENBQ25FLEdBQUlELEVBQU0sR0FBRzFULElBQU0yVCxFQUFNLEdBQUczVCxFQUFHLENBQzdCLElBQU0wWSxFQUFjL2hHLEtBQUt5ZCxJQUFJemQsS0FBS2tjLElBQUk2Z0YsRUFBTSxHQUFHL3FHLEVBQUcrcUcsRUFBTSxHQUFHL3FHLEdBQUlnTyxLQUFLa2MsSUFBSThnRixFQUFNLEdBQUdockcsRUFBR2dyRyxFQUFNLEdBQUdockcsSUFDdkZnd0csRUFBWWhpRyxLQUFLa2MsSUFBSWxjLEtBQUt5ZCxJQUFJcy9FLEVBQU0sR0FBRy9xRyxFQUFHK3FHLEVBQU0sR0FBRy9xRyxHQUFJZ08sS0FBS3lkLElBQUl1L0UsRUFBTSxHQUFHaHJHLEVBQUdnckcsRUFBTSxHQUFHaHJHLElBQzNGLE9BQUkrdkcsR0FBZUMsRUFDVixJQUFJTixFQUEwQnhGLEVBQThCNEYsYUFBU25wRyxFQUFXLENBQUMsQ0FBRTB3RixFQUFHMFQsRUFBTSxHQUFHMVQsRUFBR3IzRixFQUFHK3ZHLEdBQWUsQ0FBRTFZLEVBQUcwVCxFQUFNLEdBQUcxVCxFQUFHcjNGLEVBQUdnd0csS0FFeEksSUFBSU4sRUFBMEJ4RixFQUE4QnlGLFNBR3JFLE9BQU8sSUFBSUQsRUFBMEJ4RixFQUE4QnlGLFNBR3JFLE9BQU8sSUFBSUQsRUFBMEJ4RixFQUE4QnlGLFVBS2hFLEVBQUFNLHFCQUFQLFNBQTRCQyxHQUUxQixJQURBLElBQU1DLEVBQWdCLEdBQ2J0MUcsRUFBSSxFQUFHQSxFQUFJcTFHLEVBQU16eUcsT0FBUTVDLElBQ2hDczFHLEVBQWN0dkcsS0FBS3pELEtBQUtzd0csZ0JBQWdCd0MsRUFBTXIxRyxLQUNoRCxJQUFNdTFHLEVBQWdCLEdBQ2hCQyxFQUE2QixHQUNuQyxJQUFTeDFHLEVBQUksRUFBR0EsRUFBSXExRyxFQUFNenlHLE9BQVE1QyxJQUFLLENBRXJDLElBREEsSUFBSXkxRyxFQUFzQmx6RyxLQUFLc3dHLGdCQUFnQndDLEVBQU1yMUcsSSxXQUM1Q2lDLEdBRVAsR0FBSUEsR0FBS2pDLEVBQUcsQ0FDVixJQUFNMDFHLEVBQXlCLEdBQ3pCQyxFQUFnQixFQUFLeEIscUJBQXFCa0IsRUFBTXB6RyxHQUFJb3pHLEVBQU1yMUcsSUFFaEUsR0FBSTIxRyxJQUFrQnJHLEVBQXlCa0YsVUFBYXgwRyxFQUFJaUMsR0FBSzB6RyxJQUFrQnJHLEVBQXlCZ0YsTSxPQUM5R21CLEVBQW9CN3lHLE9BQVMsRSxRQUV4QixHQUFJK3lHLElBQWtCckcsRUFBeUJtRixXQUFha0IsSUFBa0JyRyxFQUF5Qm9GLFFBQVMsQ0FFckgsSUFEQSxJQUFNLEVBQWlDLEdBQzlCaHVHLEVBQUksRUFBR0EsRUFBSSt1RyxFQUFvQjd5RyxPQUFROEQsSUFBSyxDQUNuRCxJQUFNa3ZHLEVBQXVCLEdBQ3ZCMUYsRUFBUXVGLEVBQW9CL3VHLEdBQ2xDLElBQUssRUFBSzJzRyxhQUFhbkQsRUFBT21GLEVBQU1wekcsSUFBSyxDQUN2QyxJQUFLLElBQUlSLEVBQUksRUFBR0EsRUFBSTZ6RyxFQUFjcnpHLEdBQUdXLE9BQVFuQixJQUFLLENBQ2hELElBQU0wdUcsRUFBUW1GLEVBQWNyekcsR0FBR1IsR0FDekJvMEcsRUFBb0IsRUFBS2pCLDZCQUE2QjFFLEVBQU9DLEdBQy9EMEYsRUFBa0J4Z0csT0FBU2c2RixFQUE4Qm9GLFVBQ3ZEb0IsRUFBa0JwRyxjQUNwQm1HLEVBQXFCNXZHLEtBQUs2dkcsRUFBa0JwRyxjQUNyQ29HLEVBQWtCeGdHLE9BQVNnNkYsRUFBOEI0RixTQUM5RFksRUFBa0JuRyxTQUNwQixFQUF1QjFwRyxLQUFLNnZHLEVBQWtCbkcsU0FHcEQsR0FBSWtHLEVBQXFCaHpHLE9BQVMsRUFHaEMsSUFGQSxJQUFNa3pHLEVBQXNCLEVBQUtuQyxrQkFBa0JpQyxFQUFzQkgsRUFBb0IvdUcsR0FBRyxJQUFJLEdBQzlGcXZHLEVBQWtCLEVBQUs3QixnQkFBZ0IsRUFBSTRCLEVBQXFCLENBQUFMLEVBQW9CL3VHLEdBQUcsTUFDcEY1RSxFQUFJLEVBQUdBLEVBQUlpMEcsRUFBZ0JuekcsT0FBUWQsSUFDckMsRUFBS294RyxXQUFXbUMsRUFBTXB6RyxHQUFJZ3lHLEVBQWFsRSxhQUFhZ0csRUFBZ0JqMEcsTUFDdkU0ekcsRUFBdUIxdkcsS0FBSyt2RyxFQUFnQmowRyxTQUdoRDR6RyxFQUF1QjF2RyxLQUFLeXZHLEVBQW9CL3VHLEtBSXRELEdBQUksRUFBdUI5RCxPQUFTLEdBQUsreUcsSUFBa0JyRyxFQUF5Qm9GLFFBQ2xGLEksZUFBU3QwRyxHQUNGbzFHLEVBQW1CdnVELE1BQUssU0FBQWwzQixHQUFXLE9BQUFra0YsRUFBYWhFLGNBQWNsZ0YsRUFBUyxFQUF1QjN2QixRQUNqR28xRyxFQUFtQnh2RyxLQUFLLEVBQXVCNUYsS0FGMUNBLEVBQUksRUFBR0EsRUFBSSxFQUF1QndDLE9BQVF4QyxJLEVBQTFDQSxHQU1YcTFHLEVBQXNCQyxLLE9BN0NuQnp6RyxFQUFJLEVBQUdBLEVBQUlvekcsRUFBTXp5RyxPQUFRWCxJQUFLLEMsZUFBOUJBLEcsTUFpREx3ekcsRUFBb0I3eUcsT0FBUyxHQUMvQjJ5RyxFQUFjdnZHLEtBQUksTUFBbEJ1dkcsRUFBc0JFLEdBSTFCLE9BRklELEVBQW1CNXlHLE9BQVMsR0FDOUIyeUcsRUFBY3Z2RyxLQUFJLE1BQWxCdXZHLEVBQXNCQyxHQUNqQkQsR0FJRixFQUFBUyxpQkFBUCxTQUF3QnZtRixHQUl0QixJQUhBLElBQU11QixFQUFPclAsU0FBU2l3RixnQkFBZ0IsNkJBQThCLFFBQzlEcUUsRUFBYyxHQUVYajJHLEVBQUksRUFBR0EsRUFBSXl2QixFQUFTN3NCLE9BQVE1QyxJQUNuQ2kyRyxFQUFZandHLEtBQUssSUFBSXlwQixFQUFTenZCLEdBQUcsR0FBR3c4RixFQUFFMFosUUFGdEIsR0FFd0MsSUFBSXptRixFQUFTenZCLEdBQUcsR0FBR21GLEVBQUUrd0csUUFGN0QsR0FFK0UsSUFBSXptRixFQUFTenZCLEdBQUcsR0FBR3c4RixFQUFFMFosUUFGcEcsR0FFc0gsSUFBSXptRixFQUFTenZCLEdBQUcsR0FBR21GLEVBQUUrd0csUUFGM0ksSUFLbEIsT0FEQWxsRixFQUFLMU4sYUFBYSxJQUFLMnlGLEVBQVk1ckcsS0FBSyxLQUNqQzJtQixHQUVYLEVBdFdBLEdDQUEsYUFnQkUsV0FBWXp3QixFQUFja2lCLEdBUGpCLEtBQUEwekYsU0FBVyxJQUNYLEtBQUFDLFVBQVksS0FFckIsS0FBQUMsY0FBZSxFQUtiOXpHLEtBQUtoQyxLQUFPQSxFQUNaZ0MsS0FBS2tnQixHQUFLQSxFQUNWbGdCLEtBQUsrZSxRQUVML2UsS0FBSyt6RyxLQUFPL3pHLEtBQUsrekcsS0FBSzkwRyxLQUFLZSxNQXVEL0IsT0FwREUsWUFBQWcwRyxXQUFBLFNBQVdqMUYsR0FBWCxXQUNFL2UsS0FBSytlLFFBQVVLLFNBQVN3QixjQUFjLE9BQ3RDLElBQU1xekYsRUFBWSxJQUFJQyxVQUN0QmwwRyxLQUFLbTBHLFVBQVlGLEVBQVVHLGdCQUFnQnIxRixFQUFTLGlCQUFpQnMxRixnQkFDckVyMEcsS0FBSytlLFFBQVFrQyxZQUFZamhCLEtBQUttMEcsV0FFOUJuMEcsS0FBS20wRyxVQUFVM3RELGlCQUFpQixRQUFTeG1ELEtBQUsrekcsTUFFOUMvekcsS0FBS20wRyxVQUFVM3RELGlCQUFpQixhQUFhLFNBQUFobUQsR0FDekIsSUFBZEEsRUFBRTh6RyxVQUNKLEVBQUtSLGNBQWUsRUFDcEIsRUFBS1MsZ0JBQWtCLEVBQVM3RSxrQkFBa0JsdkcsRUFBRyxFQUFLMnpHLFdBQzFELEVBQUtLLFlBQWMsRUFBS0wsVUFBVU0sUUFBUUMsWUFHOUMxMEcsS0FBS20wRyxVQUFVM3RELGlCQUFpQixXQUFXLFdBQU0sU0FBS3N0RCxjQUFlLEtBQ3JFOXpHLEtBQUttMEcsVUFBVTN0RCxpQkFBaUIsY0FBYyxXQUFNLFNBQUtzdEQsY0FBZSxLQUN4RTl6RyxLQUFLbTBHLFVBQVUzdEQsaUJBQWlCLGFBQWEsU0FBQWhtRCxHQUN6QixJQUFkQSxFQUFFOHpHLFVBQXVDLElBQXRCLEVBQUtSLGVBQzFCLEVBQUtBLGNBQWUsRUFDcEIsRUFBS1MsZ0JBQWtCLEVBQVM3RSxrQkFBa0JsdkcsRUFBRyxFQUFLMnpHLFdBQzFELEVBQUtLLFlBQWMsRUFBS0wsVUFBVU0sUUFBUUMsU0FFeEMsRUFBS1osZUFDUCxFQUFLYSxjQUFnQixFQUFTakYsa0JBQWtCbHZHLEVBQUcsRUFBSzJ6RyxXQUN4RCxFQUFLQSxVQUFVTSxRQUFRQyxRQUFRemEsR0FBSyxFQUFLMGEsY0FBYzFhLElBQU0sRUFBS3NhLGdCQUFnQnRhLEVBQUksRUFBS3VhLFlBQVl2YSxHQUN2RyxFQUFLa2EsVUFBVU0sUUFBUUMsUUFBUTl4RyxHQUFLLEVBQUsreEcsY0FBYy94RyxJQUFNLEVBQUsyeEcsZ0JBQWdCM3hHLEVBQUksRUFBSzR4RyxZQUFZNXhHLFFBSzdHLFlBQUFneUcsb0JBQUEsV0FDRTUwRyxLQUFLNjBHLGNBQWdCejFGLFNBQVNpd0YsZ0JBQWdCLDZCQUE4QixLQUU1RXJ2RyxLQUFLbTBHLFVBQVVsekYsWUFBWWpoQixLQUFLNjBHLGdCQUcxQixZQUFBZCxLQUFSLFNBQWF2ekcsR0FDWEEsRUFBRWcrRixpQkFDRngrRixLQUFLMjBHLGNBQWdCLEVBQVNqRixrQkFBa0JsdkcsRUFBR1IsS0FBS20wRyxXQUN4RCxJQUFJVyxFQUFjdDBHLEVBQUV1MEcsT0FBUyxFQUFJLzBHLEtBQUs2ekcsVUFBWSxFQUFJN3pHLEtBQUs2ekcsVUFDdkRtQixHQUFTaDFHLEtBQUsyMEcsY0FBYzFhLEVBQUlqNkYsS0FBS20wRyxVQUFVTSxRQUFRQyxRQUFRemEsR0FBS2o2RixLQUFLbTBHLFVBQVVNLFFBQVFDLFFBQVFuRixNQUNuRzBGLEVBQU9qMUcsS0FBS20wRyxVQUFVTSxRQUFRQyxRQUFRbkYsTUFBUXVGLEVBQWE5MEcsS0FBS20wRyxVQUFVTSxRQUFRQyxRQUFRbkYsTUFDMUYyRixHQUFTbDFHLEtBQUsyMEcsY0FBYy94RyxFQUFJNUMsS0FBS20wRyxVQUFVTSxRQUFRQyxRQUFROXhHLEdBQUs1QyxLQUFLbTBHLFVBQVVNLFFBQVFDLFFBQVFsRixPQUNuRzJGLEVBQU9uMUcsS0FBS20wRyxVQUFVTSxRQUFRQyxRQUFRbEYsT0FBU3NGLEVBQWE5MEcsS0FBS20wRyxVQUFVTSxRQUFRQyxRQUFRbEYsUUFDM0ZodkcsRUFBRXUwRyxPQUFTLEVBQUkvMEcsS0FBS20wRyxVQUFVTSxRQUFRQyxRQUFRbkYsTUFBd0IsR0FBaEJ2dkcsS0FBSzR6RyxTQUFnQjV6RyxLQUFLbTBHLFVBQVVNLFFBQVFDLFFBQVFuRixNQUFRdnZHLEtBQUs0ekcsU0FBVyxNQUNwSTV6RyxLQUFLbTBHLFVBQVVNLFFBQVFDLFFBQVF6YSxHQUFLZ2IsRUFBT0QsRUFDM0NoMUcsS0FBS20wRyxVQUFVTSxRQUFRQyxRQUFRbkYsT0FBUzBGLEVBQ3hDajFHLEtBQUttMEcsVUFBVU0sUUFBUUMsUUFBUTl4RyxHQUFLdXlHLEVBQU9ELEVBQzNDbDFHLEtBQUttMEcsVUFBVU0sUUFBUUMsUUFBUWxGLFFBQVUyRixJQUcvQyxFQTVFQSxHQ0NlLFFBU2IsaUJBQWlCajNGLEVBQU9rM0YsR0FDdEIsTUFBTUMsRUFBYSxHQUNmbjNGLEVBQU1sZ0IsTUFBTXEzRyxFQUFXNXhHLEtBQUssU0FBWXlhLEVBQU1sZ0IsS0FBTyxLQUNyRGtnQixFQUFNbzNGLFVBQVVELEVBQVc1eEcsS0FBSyxJQUFPeWEsRUFBTW8zRixTQUFXLGlCQUN0QyxJQUFsQnAzRixFQUFNcTNGLFNBQW1CRixFQUFXNXhHLEtBQUssaUJBQ3pDeWEsRUFBTXMzRixhQUFhSCxFQUFXNXhHLEtBQUssc0JBQXlCeWEsRUFBTXMzRixZQUFjLEtBQ2hGdDNGLEVBQU11M0YsWUFBWUosRUFBVzV4RyxLQUFLLGlEQUN0QyxJQUFJMlgsRUFBVStwRSxLQUFLaGhDLE9BQU91eEQsTUFBTUMsTUFBTTcxRixLQUFLLENBQ3pDLFNBQVksR0FDWixPQUFVLGdDQUFnQ3MxRixFQUFpQixLQUFPQSxFQUFpQixNQUNuRixFQUFLQyxFQUFXdnRHLEtBQUssV0FZdkIsT0FWQXNULEVBQVE1WSxLQUFLMk8sSUFDWCxNQUFNd2tHLEVBQVF4a0csRUFBSTdPLE9BQU9xekcsTUFDckJBLEdBQVNBLEVBQU10MUcsT0FBUyxFQUMxQjZJLFFBQVE0TyxJQUFJNjlGLEdBRVp6c0csUUFBUTRPLElBQUksa0NBQW1DdTlGLEVBQVd2dEcsS0FBSyxXQUVoRWdILElBQ0Q1RixRQUFRcEYsTUFBTWdMLEVBQUlwTSxRQUViMFksRUFRVCxzQkFBc0J3NkYsR0FDcEIsSUFBSXg2RixFQUFVK3BFLEtBQUtoaEMsT0FBT3V4RCxNQUFNQyxNQUFNcjNHLElBQUksQ0FDeENzM0csT0FBUUEsRUFDUkMsSUFBSyxVQVFQLE9BTkF6NkYsRUFBUTVZLEtBQUsyTyxJQUNRLE1BQWZBLEVBQUlpMkQsUUFDTmwrRCxRQUFRNE8sSUFBSSxnQkFBa0I4OUYsRUFBUywyQkFDeEM5bUcsSUFDRDVGLFFBQVFwRixNQUFNZ0wsRUFBSXBNLFFBRWIwWSxFQVNULG1CQUFtQnc2RixFQUFRL3JFLEdBQ3pCLElBQUl6dUIsRUFBVStwRSxLQUFLaGhDLE9BQU91eEQsTUFBTUMsTUFBTXIzRyxJQUFJLENBQ3hDczNHLE9BQVFBLEVBQ1IvckUsT0FBUUEsSUFTVixPQVBBenVCLEVBQVE1WSxLQUFLMk8sSUFDUSxNQUFmQSxFQUFJaTJELFFBQ05sK0QsUUFBUTRPLElBQUksbUNBRWJoSixJQUNENUYsUUFBUXBGLE1BQU1nTCxLQUVUc00sRUFTVCxvQkFBb0JpOUUsRUFBT2lkLEVBQVcsU0FDcEMsTUFBTTV5RyxFQUFPLENBQ1gsS0FBUTIxRixFQUNSLFNBQVkscUNBQ1osUUFBd0IsVUFBYmlkLEVBQXVCLENBQUNBLEdBQVksSUFFM0NsNkYsRUFBVStwRSxLQUFLaGhDLE9BQU8vb0MsUUFBUSxDQUNsQyxLQUFRLDZDQUNSLE9BQVUsT0FDVixLQUFRMVksSUFLVixPQUhBMFksRUFBUTVZLEtBQUsyTyxJQUNYakksUUFBUTRPLElBQUl1Z0YsRUFBUSx3QkFBMEIzc0YsS0FBS0MsTUFBTXdGLEVBQUl6TyxNQUFNd2QsTUFFOUQ5RSxFQVdULGtCQUFrQjA2RixFQUFhQyxFQUFjQyxFQUFVQyxHQUNyRCxNQUFNMUgsRUFBTyxJQUFJMWpGLEtBQUssQ0FBQ2lyRixHQUFjLENBQUVoakcsS0FBTWlqRyxJQUN2Q3QwRyxFQUFXLENBQ2YsS0FBUXUwRyxFQUNSLFNBQVlELEVBQ1osUUFBVyxDQUFDRSxJQUVSbnhCLEVBQWNLLEtBQUtucUIsS0FBS2MsV0FBV282QyxhQUNuQ0MsRUFBTyxJQUFJcEssU0FDakJvSyxFQUFLQyxPQUFPLFdBQVksSUFBSXZyRixLQUFLLENBQUNuZixLQUFLc0csVUFBVXZRLElBQVksQ0FBRXFSLEtBQU0sc0JBQ3JFcWpHLEVBQUtDLE9BQU8sT0FBUTdILEdBRXBCLElBQUluekYsRUFBVWk3RixNQUFNLGtGQUFtRixDQUNyRy9uRyxPQUFRLE9BQ1IrMkUsUUFBUyxJQUFJaXhCLFFBQVEsQ0FBRSxjQUFpQixVQUFZeHhCLElBQ3BEcGlGLEtBQU15ekcsSUFTUixPQVBBLzZGLEVBQVE1WSxLQUFLMk8sS0FDSSxJQUFYQSxFQUFJb2xHLElBQThCLE1BQWZwbEcsRUFBSWkyRCxRQUN6QmwrRCxRQUFRNE8sSUFBSSxhQUFlaytGLEVBQVcsaUJBRXZDbG5HLElBQ0Q1RixRQUFRcEYsTUFBTWdMLEtBRVRzTSxFQVVULHlCQUF5QjA2RixFQUFhQyxFQUFjSCxHQUNsRCxNQUFNckgsRUFBTyxJQUFJMWpGLEtBQUssQ0FBQ2lyRixHQUFjLENBQUVoakcsS0FBTWlqRyxJQUN2Q3QwRyxFQUFXLENBQ2YsU0FBWXMwRyxHQUVSanhCLEVBQWNLLEtBQUtucUIsS0FBS2MsV0FBV282QyxhQUNuQ0MsRUFBTyxJQUFJcEssU0FDakJvSyxFQUFLQyxPQUFPLFdBQVksSUFBSXZyRixLQUFLLENBQUNuZixLQUFLc0csVUFBVXZRLElBQVksQ0FBRXFSLEtBQU0sc0JBQ3JFcWpHLEVBQUtDLE9BQU8sT0FBUTdILEdBRXBCLElBQUluekYsRUFBVWk3RixNQUFNLG9EQUFvRFQseUJBQStCLENBQ3JHdG5HLE9BQVEsUUFDUisyRSxRQUFTLElBQUlpeEIsUUFBUSxDQUFFLGNBQWlCLFVBQVl4eEIsSUFDcERwaUYsS0FBTXl6RyxJQVNSLE9BUEEvNkYsRUFBUTVZLEtBQUsyTyxLQUNJLElBQVhBLEVBQUlvbEcsSUFBOEIsTUFBZnBsRyxFQUFJaTJELFFBQ3pCbCtELFFBQVE0TyxJQUFJLHVCQUViaEosSUFDRDVGLFFBQVFwRixNQUFNZ0wsS0FFVHNNLEVBNkNULGtCQUFrQnc2RixFQUFRWSxHQUN4QixNQUFNcDdGLEVBQVUrcEUsS0FBS2hoQyxPQUFPdXhELE1BQU1DLE1BQU0zb0csT0FBTyxDQUM3QyxPQUFVNG9HLEVBQ1YsS0FBUVksRUFDUixXQUFjLFVBT2hCLE9BTEFwN0YsRUFBUTVZLEtBQUsyTyxNQUVWcTlGLElBQ0R0bEcsUUFBUXBGLE1BQU0sd0JBQTBCOHhHLEVBQVFwSCxLQUUzQ3B6RixFQVNULGtCQUFrQnc2RixFQUFRTixHQUN4QixNQUFNbDZGLEVBQVUrcEUsS0FBS2hoQyxPQUFPL29DLFFBQVEsQ0FDbEMsS0FBUSw2Q0FBK0N3NkYsRUFBUyxXQUNoRSxPQUFVLE9BQ1YsUUFBVyxDQUNULGVBQWdCLG9CQUVsQixLQUFRLENBQ04sR0FBTU4sS0FRVixPQUxBbDZGLEVBQVE1WSxLQUFLMk8sSUFDWGpJLFFBQVE0TyxJQUFJM0csSUFDWHE5RixJQUNEdGxHLFFBQVE0TyxJQUFJMDJGLEtBRVBwekYsRUFJVCxnQkFBZ0J3NkYsRUFBUU4sR0FDdEIsTUFBTTV5RyxFQUFPLENBQUUsR0FBTTR5RyxHQUNMbndCLEtBQUtoaEMsT0FBT3V4RCxNQUFNN2xELFFBQVE3dUMsT0FBTyxDQUMvQyxPQUFVNDBGLEVBQ1YsU0FBWWx6RyxJQUVOK3pHLFNBQVEsU0FBVUMsT0FRNUIsa0JBQWtCZCxHQUNoQixJQUFJeDZGLEVBQVUrcEUsS0FBS2hoQyxPQUFPdXhELE1BQU1DLE1BQU16Z0csT0FBTyxDQUMzQyxPQUFVMGdHLElBT1osT0FMQXg2RixFQUFRNVksS0FBSzJPLElBQ1hqSSxRQUFRNE8sSUFBSTNHLElBQ1hxOUYsSUFDRHRsRyxRQUFRNE8sSUFBSTAyRixLQUVQcHpGLEVBc0RULGlCQUFpQnc2RixFQUFRZSxFQUFjeDNELEVBQVEsR0FFN0MsT0FEdUIsSUFBSXA5QyxRQUFRb1AsR0FBT29mLFdBQVdwZixFQUFLZ3VDLElBQ3BDMzhDLEtBQUsyTyxJQUN6QixNQUFNaUssRUFBVStwRSxLQUFLaGhDLE9BQU8vb0MsUUFBUSxDQUNsQyxLQUFRLDZDQUE2Q3c2Riw4RkFDckQsT0FBVSxPQUNWLFFBQVcsQ0FDVCxlQUFnQixvQkFFbEIsS0FBUSxDQUNOLEtBQVEsU0FDUixLQUFRLE9BQ1IsYUFBZ0JlLEtBTXBCLE9BSEF2N0YsRUFBUTVZLEtBQUsyTyxJQUNYakksUUFBUTRPLElBQUkzRyxLQUVQaUssSUE0QlgsdUJBQXVCdzZGLEVBQVFnQixHQUM3QixNQUFNeDdGLEVBQVUrcEUsS0FBS2hoQyxPQUFPL29DLFFBQVEsQ0FDbEMsS0FBUSw2Q0FBK0N3NkYsRUFBUyxnQkFBa0JnQixFQUNsRixPQUFVLFNBQ1YsUUFBVyxDQUNULGVBQWdCLHNCQU1wQixPQUhBeDdGLEVBQVE1WSxLQUFLMk8sSUFDWGpJLFFBQVE0TyxJQUFJM0csS0FFUGlLLEVBU1QsMEJBQTBCOFEsR0FFeEIsTUFBTTlRLEVBQVUrcEUsS0FBS2hoQyxPQUFPL29DLFFBQVEsQ0FDbEMsS0FBUSw2Q0FBNkM4USwrRUFDckQsT0FBVSxNQUNWLFFBQVcsQ0FBRSxlQUFnQixzQkFPL0IsT0FMQTlRLEVBQVE1WSxLQUFLMk8sSUFDWGpJLFFBQVE0TyxJQUFJM0csSUFDWHE5RixJQUNEdGxHLFFBQVE0TyxJQUFJMDJGLEtBRVBwekYsRUFPVCxxQkFDRSxNQUFNQSxFQUFVK3BFLEtBQUtoaEMsT0FBT3V4RCxNQUFNbUIsTUFBTXY0RyxJQUFJLENBQzFDdXJDLE9BQVEsU0FLVixPQUhBenVCLEVBQVE1WSxLQUFLMk8sSUFDWGpJLFFBQVE0TyxJQUFJcE0sS0FBS0MsTUFBTXdGLEVBQUl6TyxNQUFNeStCLFFBRTVCL2xCLEVBV1QsK0JBQStCMDdGLEVBQVFDLEVBQVlDLEVBQWE5cUYsR0FDOUQsTUFBTTlRLEVBQVVpN0YsTUFBTSw4RUFBK0UsQ0FDbkcvbkcsT0FBUSxPQUNSKzJFLFFBQVMsQ0FDUCxlQUFnQixvQkFHbEIzaUYsS0FBTWdKLEtBQUtzRyxVQUFVLENBQUU4a0csU0FBUUMsYUFBWUMsY0FBYTlxRixnQkFVMUQsT0FSQTlRLEVBQVE1WSxLQUFLMk8sSUFDWGpJLFFBQVE0TyxJQUFJM0csSUFJWHJDLElBQ0Q1RixRQUFRcEYsTUFBTWdMLEtBRVRzTSxFQWNULHdCQUF3QjY3RixFQUFRQyxFQUFRQyxFQUFXQyxFQUFNSixFQUFhOXFGLEdBQ3BFLE1BQU05USxFQUFVaTdGLE1BQU0sMEZBQTJGLENBQy9HL25HLE9BQVEsT0FDUisyRSxRQUFTLENBQ1AsZUFBZ0Isb0JBRWxCM2lGLEtBQU1nSixLQUFLc0csVUFBVSxDQUFFaWxHLFNBQVFDLFNBQVFDLFlBQVdDLE9BQU1KLGNBQWE5cUYsZ0JBVXZFLE9BUkE5USxFQUFRNVksS0FBSzJPLElBQ1hqSSxRQUFRNE8sSUFBSTNHLElBSVhyQyxJQUNENUYsUUFBUXBGLE1BQU1nTCxLQUVUc00sRUFjVCwyQkFBMkJtekYsRUFBTThJLEVBQVNDLEdBRXhDLElBQUlDLEVBRUosTUFBTUMsUUFBdUIsRUFBU2xKLGNBQWNDLEdBQzlDdUgsRUFBY3BxRyxLQUFLQyxNQUFNNnJHLEdBVS9CLEdBVEF0dUcsUUFBUTRPLElBQUksaUJBQWtCZytGLEdBSzlCd0IsRUFBb0J0NUcsS0FBTzgzRyxFQUFZMkIsWUFBWXBmLE9BSTlDZ2YsRUFBUUssZ0JBQWlCLENBQzVCLE1BQ01DLFNBRHlCMzNHLEtBQUs0M0csVUFBVSxDQUFFNTVHLEtBQU0sZUFBZ0J5M0csWUFBWSxFQUFNRixTQUFTLEtBQ3REanpHLE9BQU9xekcsTUFDbEQsR0FBSWdDLEdBQXFCQSxFQUFrQnQzRyxPQUFTLEVBQ2xEZzNHLEVBQVFLLGdCQUFrQkMsRUFBa0IsR0FBR3ozRixPQUMxQyxDQUVMLE1BQU0yM0YsUUFBeUI3M0csS0FBSzgzRyxhQUFhLGdCQUNqRFQsRUFBUUssZ0JBQWtCaHNHLEtBQUtDLE1BQU1rc0csRUFBaUJuMUcsTUFBTXdkLEdBQzVEaFgsUUFBUTRPLElBQUksb0RBSWhCLElBQUlpZ0csRUFHSixRQUE2Qnh1RyxJQUF6Qjh0RyxFQUFRVyxjQUErQlgsRUFBUVcsYUFBYXR6RCxLQUFLdXpELEdBQVFBLEVBQUtqNkcsT0FBUzgzRyxFQUFZMkIsWUFBWXBmLE9BZ0J4R2dmLEVBQVFXLGFBQWF0ekQsS0FBS3V6RCxHQUFRQSxFQUFLajZHLE9BQVM4M0csRUFBWTJCLFlBQVlwZixPQUdqRmtmLEVBQVcsNEVBRVhydUcsUUFBUXBGLE1BQU0scUVBcEJkLElBQ0UsTUFBTW8wRyxRQUE4Qmw0RyxLQUFLODNHLGFBQWFoQyxFQUFZMkIsWUFBWXBmLE1BQU9nZixFQUFRSyxpQkFDN0ZLLEVBQWtCcnNHLEtBQUtDLE1BQU11c0csRUFBc0J4MUcsTUFBTXdkLEdBQ3pEbzNGLEVBQW9CcDNGLEdBQUs2M0YsRUFDekIsTUFBTUksRUFBb0IsQ0FBRWo0RixHQUFJNjNGLEVBQWlCLzVHLEtBQU04M0csRUFBWTJCLFlBQVlwZixZQUNsRDl1RixJQUF6Qjh0RyxFQUFRVyxhQUNWWCxFQUFRVyxhQUFlLENBQUNHLEdBQ2RkLEVBQVFXLGFBQWF0ekQsS0FBS3V6RCxHQUFRQSxFQUFLajZHLE9BQVM4M0csRUFBWTJCLFlBQVlwZixRQUNsRmdmLEVBQVFXLGFBQWF2MEcsS0FBSzAwRyxHQUU1QixNQUFPcnBHLEdBQ1A1RixRQUFRNE8sSUFBSWhKLEdBQ1p3b0csRUFBb0JwM0YsR0FBSyxXQUN6QnEzRixFQUFXN3JHLEtBQUtDLE1BQU1tRCxFQUFJcE0sTUFBTW9CLE1BQU1pQyxRQVcxQyxHQUFJZ3lHLEdBQW1CakMsRUFBWXNDLFNBQVUsQ0FDM0MsTUFBTUMsUUFBOEJyNEcsS0FBSzgzRyxhQUFhLFdBQVlDLEdBQzVETyxFQUFtQjVzRyxLQUFLQyxNQUFNMHNHLEVBQXNCMzFHLE1BQU13ZCxHQUNoRW0zRixFQUFRVyxhQUFhWCxFQUFRVyxhQUFhMzNHLE9BQVMsR0FBR2k0RyxpQkFBbUJBLEVBRXpFLE1BQU1DLEVBQW1CLEdBRXpCakIsRUFBb0JjLFNBQVcsR0FDL0IsSUFBSyxNQUFNSSxLQUFXMUMsRUFBWXNDLFNBQVUsQ0FDMUMsTUFBTUssRUFBaUJ6NEcsS0FBSzA0RyxXQUFXNUMsRUFBWXNDLFNBQVNJLEdBQVUsZ0JBQWlCQSxFQUFReDBHLE9BQU8sUUFBU3MwRyxHQUMvR0MsRUFBaUI5MEcsS0FBS2cxRyxHQUV0QixNQUFNRSxFQUFhLElBQUksRUFBUUgsT0FBU2p2RyxHQUN4Q292RyxFQUFXM0UsV0FBVzhCLEVBQVlzQyxTQUFTSSxJQUMzQ2xCLEVBQW9CYyxTQUFTMzBHLEtBQUtrMUcsR0FHcEMsTUFBTUMsRUFBVSxJQUFJQyxZQUFZLGVBQzFCOTJHLFFBQVF1VCxJQUFJaWpHLEdBQWtCLzFHLEtBQUtzMkcsSUFDdkNBLEVBQVV0bkcsUUFBUSxDQUFDTCxFQUFLMVQsTUFDUCxJQUFYMFQsRUFBSW9sRyxJQUE4QixNQUFmcGxHLEVBQUlpMkQsUUFDekJqMkQsRUFBSXpPLEtBQUtxMkcsWUFBWUMsT0FBT3gyRyxLQUFLLEVBQUc5RCxRQUFPNkQsV0FDekMsTUFBTTJkLEVBQUt4VSxLQUFLQyxNQUFNaXRHLEVBQVFodEcsT0FBT2xOLElBQVF3aEIsR0FFN0NvM0YsRUFBb0JjLFNBQVMzNkcsR0FBR3lpQixHQUFLQSxFQUNyQ2hYLFFBQVE0TyxJQUFJLG1CQUFxQm9JLEVBQUssZ0NBSTNDcFIsSUFDRDVGLFFBQVFwRixNQUFNZ0wsS0FLbEIsR0FBSWlwRyxHQUFtQmpDLEVBQVltRCxhQUFjLENBQy9DLE1BQU1DLFFBQWtDbDVHLEtBQUs4M0csYUFBYSxlQUFnQkMsR0FDcEVvQixFQUF1Qnp0RyxLQUFLQyxNQUFNdXRHLEVBQTBCeDJHLE1BQU13ZCxHQUN4RW0zRixFQUFRVyxhQUFhWCxFQUFRVyxhQUFhMzNHLE9BQVMsR0FBRzg0RyxxQkFBdUJBLEVBRTdFN0IsRUFBb0IyQixhQUFlbkQsRUFBWW1ELGFBRS9DLE1BQU1HLEVBQXVCLEdBQzdCLElBQUssTUFBTUMsS0FBZXZELEVBQVltRCxhQUFjLENBQ2xELE1BQU1LLEVBQXFCdDVHLEtBQUswNEcsV0FBV2h0RyxLQUFLc0csVUFBVThqRyxFQUFZbUQsYUFBYUksSUFBZSxtQkFBb0JBLEVBQVlyMUcsT0FBTyxTQUFVbTFHLEdBQ25KQyxFQUFxQjMxRyxLQUFLNjFHLFNBRXRCdjNHLFFBQVF1VCxJQUFJOGpHLEdBQ2Y1MkcsS0FBSzJPLElBRUpqSSxRQUFRNE8sSUFBSSw4Q0FDWGhKLElBQ0Q1RixRQUFRcEYsTUFBTWdMLEtBS3BCLE9BQUlpcEcsR0FDRjd1RyxRQUFRNE8sSUFBSSwrQkFBaUMzWixPQUFPZ04sS0FBSzJxRyxFQUFZc0MsVUFBVS8zRyxPQUFTLGNBQ2pGLENBQUU2ZixHQUFJNjNGLEVBQWlCLzVHLEtBQU04M0csRUFBWTJCLFlBQVlwZixRQUlyRHQyRixRQUFRRSxPQUFPLElBQUlnRSxNQUFNLDBCQUE0QnN4RyxJQVloRSw4QkFBOEJGLEVBQVNrQyxFQUFlLElBQ3BELEdBQXFCLEtBQWpCQSxFQUNGbEMsRUFBUUssZ0JBQWtCNkIsT0FDckIsSUFBS2xDLEVBQVFLLGdCQUFpQixDQUVuQyxNQUNNQyxTQUR5QjMzRyxLQUFLNDNHLFVBQVUsQ0FBRTU1RyxLQUFNLGVBQWdCeTNHLFlBQVksRUFBTUYsU0FBUyxLQUN0RGp6RyxPQUFPcXpHLE1BQ2xELEtBQUlnQyxHQUFxQkEsRUFBa0J0M0csT0FBUyxHQUlsRCxPQURBNkksUUFBUTRPLElBQUksdUJBQ0wvVixRQUFRRSxPQUFPLElBQUlnRSxNQUFNLHdCQUhoQ294RyxFQUFRSyxnQkFBa0JDLEVBQWtCLEdBQUd6M0YsR0FRbkQsTUFBTXM1RixRQUEyQng1RyxLQUFLNDNHLFVBQVUsQ0FBRXRDLFNBQVUrQixFQUFRSyxnQkFBaUJqQyxZQUFZLEVBQU1ELFlBQWEsY0FBZUQsU0FBUyxHQUFTLHVCQUNySixJQUFJa0UsRUFDSixNQUFNQyxFQUFzQkYsRUFBbUJsM0csT0FBT3F6RyxNQUNsRCtELEdBQXVCQSxFQUFvQnI1RyxPQUFTLFNBQ3pCa0osSUFBekI4dEcsRUFBUVcsY0FDVnlCLEVBQWNDLEVBQ2RyQyxFQUFRVyxhQUFleUIsR0FDZDU1RyxNQUFNb0gsUUFBUW93RyxFQUFRVyxnQkFDL0J5QixFQUFjRCxFQUFtQmwzRyxPQUFPcXpHLE1BQU1wZ0csT0FBT29rRyxRQUF5RXB3RyxJQUE5RDh0RyxFQUFRVyxhQUFhdHpELEtBQUt1ekQsR0FBUUEsRUFBSy8zRixLQUFPeTVGLEVBQVF6NUYsTUFDMUcxTyxRQUFReW1HLElBQ2xCWixFQUFRVyxhQUFhdjBHLEtBQUt3MEcsTUFJaEMvdUcsUUFBUXJELE9BQU93eEcsRUFBUVcsYUFBYTMzRyxPQUFTLEVBQUcsaUNBR2hELE1BQ011NUcsU0FEeUI1NUcsS0FBSzQzRyxVQUFVLENBQUV0QyxTQUFVK0IsRUFBUUssZ0JBQWlCMTVHLEtBQU0sY0FBZXkzRyxZQUFZLEtBQ3pFbnpHLE9BQU9xekcsTUFDOUNpRSxHQUFxQkEsRUFBa0J2NUcsT0FBUyxFQUNsRGczRyxFQUFRd0Msb0JBQXNCRCxFQUFrQixHQUFHMTVGLEdBRW5EaFgsUUFBUTRPLElBQUksNkJBSWQsTUFDTWdpRyxTQUR3Qjk1RyxLQUFLNDNHLFVBQVUsQ0FBRXRDLFNBQVUrQixFQUFRd0Msb0JBQXFCNzdHLEtBQU0saUJBQWtCeTNHLFlBQVksS0FDakZuekcsT0FBT3F6RyxNQUM1Q21FLEdBQW9CQSxFQUFpQno1RyxPQUFTLEVBQ2hEZzNHLEVBQVEwQyxlQUFpQkQsRUFBaUIsR0FBRzU1RixHQUU3Q2hYLFFBQVE0TyxJQUFJLDJCQUlkLE1BQ01raUcsU0FEZWg2RyxLQUFLNDNHLFVBQVUsQ0FBRXRDLFNBQVUrQixFQUFRMEMsa0JBQ2pDejNHLE9BQU9xekcsTUFZOUIsT0FYQTBCLEVBQVFXLGFBQWF4bUcsUUFBUXltRyxJQUMzQixNQUFNZ0MsRUFBbUJELEVBQVF0MUQsS0FBS3cxRCxHQUFPakMsRUFBSy8zRixLQUFPZzZGLEVBQUlsOEcsS0FBS3NOLFFBQVEsT0FBUSxLQUM5RTJ1RyxJQUNGaEMsRUFBS2tDLFFBQVVGLEVBQWlCLzVGLE1BR3BDaFgsUUFBUXJELE9BQU9tMEcsRUFBUTM1RyxPQUFTLEVBQUcsNEJBSzVCbzVHLEVBWVQsMEJBQTBCdnRGLEVBQVdtckYsR0FHbkMsSUFBSStDLEVBR0osR0FMQWx4RyxRQUFRNE8sSUFBSSxxQkFBdUJvVSxRQUtOM2lCLElBQXpCOHRHLEVBQVFXLGFBQTRCLENBQ3RDLE1BQU1xQyxRQUF1QnI2RyxLQUFLczZHLFlBQVlwdUYsRUFBVyxpQkFDcER4Z0IsS0FBS0MsTUFBTTB1RyxFQUFlMzNHLE1BQU02eUcsVUFDbkM4QixFQUFRVyxhQUFlLENBQUMsQ0FBRTkzRixHQUFJZ00sRUFBV2x1QixLQUFNME4sS0FBS0MsTUFBTTB1RyxFQUFlMzNHLE1BQU0xRSxPQUMvRW84RyxFQUFlLE9BRU0sYUFBZGx1RixJQUNUa3VGLEVBQWUvQyxFQUFRVyxhQUFhdUMsVUFBVXRDLEdBQVFBLEVBQUsvM0YsS0FBT2dNLElBSXBFLEdBQUlrdUYsR0FBZ0IsSUFBTS9DLEVBQVFXLGFBQWFvQyxHQUFjSSxZQUMzRCxJQUNFLE1BQ01DLFNBRDJCejZHLEtBQUswNkcsbUJBQW1CeHVGLElBQ1Y1cEIsT0FBT2s0RyxZQUNsREMsR0FBdUJBLEVBQW9CcDZHLE9BQVMsRUFDdERnM0csRUFBUVcsYUFBYW9DLEdBQWNJLFlBQWNDLEVBRWpEdnhHLFFBQVE0TyxJQUFJLGtDQUVkLE1BQU9oVSxHQUNQb0YsUUFBUTRPLElBQUkseUNBS2hCLEdBQUlzaUcsR0FBZ0IsSUFBTS9DLEVBQVFXLGFBQWFvQyxHQUFjTyxhQUFjLENBQ3pFLE1BQ01DLFNBRHdCNTZHLEtBQUs0M0csVUFBVSxDQUFFdEMsU0FBVXBwRixFQUFXbHVCLEtBQU0sMEJBQ2pDc0UsT0FBT3F6RyxNQUNoRCxHQUFJaUYsR0FBb0JBLEVBQWlCdjZHLE9BQVMsRUFBRyxDQUNuRCxNQUFNdzZHLFFBQStCNzZHLEtBQUs4NkcsZUFBZUYsRUFBaUIsR0FBRzE2RixJQUM3RW0zRixFQUFRVyxhQUFhb0MsR0FBY08sYUFBZUUsRUFBdUJuNEcsVUFFekV3RyxRQUFRNE8sSUFBSSxrQ0FLaEIsR0FBSXNpRyxHQUFnQixJQUFNL0MsRUFBUVcsYUFBYW9DLEdBQWNoQyxTQUFVLENBQ3JFLE1BQ00yQyxTQUQwQi82RyxLQUFLNDNHLFVBQVUsQ0FBRXRDLFNBQVVwcEYsRUFBV3VwRixZQUFZLEVBQU16M0csS0FBTSxjQUNqRHNFLE9BQU9xekcsTUFDcEQsR0FBSW9GLEdBQXNCQSxFQUFtQjE2RyxPQUFTLEVBQUcsQ0FDdkQsTUFBTTI2RyxRQUFvQmg3RyxLQUFLNDNHLFVBQVUsQ0FBRXRDLFNBQVV5RixFQUFtQixHQUFHNzZGLEdBQUlxMUYsU0FBUyxJQUN4RjhCLEVBQVFXLGFBQWFvQyxHQUFjaEMsU0FBVyxHQUM5QzRDLEVBQVkxNEcsT0FBT3F6RyxNQUFNbmtHLFFBQVFnbkcsSUFDVix1QkFBakJBLEVBQVF4NkcsS0FDVnE1RyxFQUFRVyxhQUFhb0MsR0FBY2EsaUJBQW1CekMsRUFBUXQ0RixHQUU5RG0zRixFQUFRVyxhQUFhb0MsR0FBY2hDLFNBQVMzMEcsS0FBSyxJQUFJLEVBQVErMEcsRUFBUXg2RyxLQUFLc04sUUFBUSxRQUFTLElBQUtrdEcsRUFBUXQ0RixZQUk1R2hYLFFBQVE0TyxJQUFJLDZCQUtoQixHQUFJc2lHLEdBQWdCLElBQU0vQyxFQUFRVyxhQUFhb0MsR0FBY25CLGFBQWMsQ0FDekUsTUFDTWlDLFNBRDhCbDdHLEtBQUs0M0csVUFBVSxDQUFFdEMsU0FBVXBwRixFQUFXdXBGLFlBQVksRUFBTXozRyxLQUFNLGtCQUM3Q3NFLE9BQU9xekcsTUFDNUQsR0FBSXVGLEdBQTBCQSxFQUF1Qjc2RyxPQUFTLEVBQUcsQ0FDL0QsTUFBTTg2RyxRQUF3Qm43RyxLQUFLNDNHLFVBQVUsQ0FBRXRDLFNBQVU0RixFQUF1QixHQUFHaDdGLEdBQUlxMUYsU0FBUyxJQUNoRzhCLEVBQVFXLGFBQWFvQyxHQUFjbkIsYUFBZWtDLEVBQWdCNzRHLE9BQU9xekcsV0FFekV6c0csUUFBUTRPLElBQUksaUNBS2hCLEdBQUlzaUcsR0FBZ0IsSUFBTS9DLEVBQVFXLGFBQWFvQyxHQUFjZ0IsU0FBVSxDQUVyRSxNQUNNQyxTQURvQnI3RyxLQUFLNDNHLFVBQVUsQ0FBRXRDLFNBQVVwcEYsRUFBV2x1QixLQUFNLGdCQUFpQnUzRyxTQUFTLEtBQy9EanpHLE9BQU9xekcsTUFDeEMsR0FBSTBGLEdBQWdCQSxFQUFhaDdHLE9BQVMsRUFBRyxDQUMzQ2czRyxFQUFRVyxhQUFhb0MsR0FBY2tCLGVBQWlCRCxFQUFhLEdBQUduN0YsR0FDcEUsTUFBTXE3RixRQUEyQnY3RyxLQUFLODZHLGVBQWVPLEVBQWEsR0FBR243RixJQUNyRW0zRixFQUFRVyxhQUFhb0MsR0FBY2dCLFNBQVcxdkcsS0FBS0MsTUFBTTR2RyxFQUFtQjc0RyxXQUU1RXdHLFFBQVE0TyxJQUFJLGdDQUtoQixHQUFJc2lHLEdBQWdCLElBQU0vQyxFQUFRVyxhQUFhb0MsR0FBY29CLE9BQVEsQ0FDbkUsTUFDTUMsU0FEd0J6N0csS0FBSzQzRyxVQUFVLENBQUV0QyxTQUFVcHBGLEVBQVd1cEYsWUFBWSxFQUFNejNHLEtBQU0sWUFDbkRzRSxPQUFPcXpHLE1BQ2hELEdBQUk4RixHQUFvQkEsRUFBaUJwN0csT0FBUyxFQUFHLENBQ25ELE1BQU1xN0csUUFBa0IxN0csS0FBSzQzRyxVQUFVLENBQUV0QyxTQUFVbUcsRUFBaUIsR0FBR3Y3RixLQUN2RW0zRixFQUFRVyxhQUFhb0MsR0FBY29CLE9BQVNFLEVBQVVwNUcsT0FBT3F6RyxXQUU3RHpzRyxRQUFRNE8sSUFBSSwyQkFJaEIsT0FBSXNpRyxHQUFnQixHQUNsQmx4RyxRQUFRNE8sSUFBSSwwQ0FDTHUvRixFQUFRVyxhQUFhb0MsSUFFckJyNEcsUUFBUUUsT0FBTyxJQUFJZ0UsTUFBTSw4Q0MveEJ0QyxhQU9FLFdBQVkwMUcsRUFBdUI1OEYsRUFBaUI2OEYsRyxXQUFBLElBQUFBLE1BQUEsSUFOcEQsS0FBQUQsWUFBd0IsR0FJeEIsS0FBQUUsZ0JBQWdDLElBRzlCLEVBQUE3N0csS0FBSzI3RyxhQUFZbDRHLEtBQUksUUFBSWs0RyxHQUN6QjM3RyxLQUFLK2UsUUFBVUEsRUFDZi9lLEtBQUs0N0csU0FBV0EsRUFDaEI1N0csS0FBS2tnQixHQUFLLEtBQU8sRUFBU2d3RixTQXNDOUIsT0FqQkUsWUFBQTRMLHFCQUFBLFNBQXFCakgsRUFBNEJ0cUMsR0FHL0MsSUFEQSxJQUFNd3hDLEVBQWEsR0FDVnQrRyxFQUFJLEVBQUdBLEVBQUk4c0UsRUFBU2xxRSxPQUFRNUMsSUFDbkNzK0csRUFBV3Q0RyxLQUFLLEVBQVNnc0csWUFBWWxsQyxFQUFTOXNFLEdBQUksS0FFcEQsSUFBTXl2QixFQUFXLEVBQVMybEYscUJBQXFCa0osR0FDekNDLEVBQWlCLEVBQVN2SSxpQkFBaUJ2bUYsR0FDakQ4dUYsRUFBZWo3RixhQUFhLFFBQVMsdUZBQ3JDaTdGLEVBQWVDLFFBQVEvN0YsR0FBS2xnQixLQUFLa2dCLEdBQ2pDMjBGLEVBQWM1ekYsWUFBWSs2RixHQUMxQmg4RyxLQUFLNjdHLGdCQUFnQnA0RyxLQUFLdTRHLElBTTlCLEVBakRBLElKTUEsU0FBS2hQLEdBQ0gscUJBQ0EsdUJBRkYsQ0FBS0EsTUFBYSxLQUtsQixJLEVLb0NJLEVMcENKLGFBd0JFLFdBQVlrUCxFQUE0QkMsR0FBeEMsV0FiQSxLQUFBQyxTQUEyQixHQUczQixLQUFBQyxXQUFhLElBQ2IsS0FBQUMsWUFBYyxJQUNkLEtBQUFDLGVBQWdCLEVBQ2hCLEtBQUFDLGdCQUFpQixFQVFmeDhHLEtBQUtrOEcsY0FBZ0JBLEVBRXJCbDhHLEtBQUt5OEcsZUFBaUJyOUYsU0FBU3dCLGNBQWMsT0FDN0M1Z0IsS0FBS3k4RyxlQUFlQyxVQUFVemxGLElBQUksWUFBYSxTQUMvQ2ozQixLQUFLMjhHLFVBQVl2OUYsU0FBU3dCLGNBQWMsT0FDeEM1Z0IsS0FBSzI4RyxVQUFVRCxVQUFVemxGLElBQUksY0FDN0JqM0IsS0FBS3k4RyxlQUFleDdGLFlBQVlqaEIsS0FBSzI4RyxXQUNyQzM4RyxLQUFLNDhHLGFBQWV4OUYsU0FBU3dCLGNBQWMsT0FDM0M1Z0IsS0FBSzQ4RyxhQUFhRixVQUFVemxGLElBQUksaUJBQ2hDajNCLEtBQUs2OEcsWUFBY3o5RixTQUFTd0IsY0FBYyxPQUMxQzVnQixLQUFLNjhHLFlBQVlILFVBQVV6bEYsSUFBSSxnQkFDL0JqM0IsS0FBSzg4RyxVQUFZMTlGLFNBQVN3QixjQUFjLE9BQ3hDNWdCLEtBQUs4OEcsVUFBVUosVUFBVXpsRixJQUFJLGNBQzdCajNCLEtBQUsrOEcsWUFBYzM5RixTQUFTd0IsY0FBYyxPQUMxQzVnQixLQUFLKzhHLFlBQVlMLFVBQVV6bEYsSUFBSSxnQkFDL0JqM0IsS0FBSzQ4RyxhQUFhMzdGLFlBQVlqaEIsS0FBSzY4RyxhQUNuQzc4RyxLQUFLNDhHLGFBQWEzN0YsWUFBWWpoQixLQUFLODhHLFdBQ25DOThHLEtBQUs0OEcsYUFBYTM3RixZQUFZamhCLEtBQUsrOEcsYUFDbkMvOEcsS0FBS3k4RyxlQUFleDdGLFlBQVlqaEIsS0FBSzQ4RyxjQUdyQ1QsRUFBVWEsbUJBQW1CeDJELGlCQUFpQixhQUFhLFNBQUFobUQsR0FDckQsRUFBSys3RyxjQUNQLEVBQUtVLFlBQVl6OEcsR0FDUixFQUFLZzhHLGdCQUNkLEVBQUtVLGFBQWExOEcsTUFHdEIyN0csRUFBVWEsbUJBQW1CeDJELGlCQUFpQixXQUFXLFdBQ3ZELEVBQUsrMUQsZUFBZ0IsRUFDckIsRUFBS0MsZ0JBQWlCLEtBR3hCeDhHLEtBQUttOUcsVUFBWW45RyxLQUFLbTlHLFVBQVVsK0csS0FBS2UsTUFDckNBLEtBQUs2OEcsWUFBWU8sUUFBVSxTQUFBNThHLEdBQ3pCLElBQU15OEYsRUFBVXo4RixFQUFFTSxPQUF1QnU4RyxRQUFRLGNBQzdDcGdCLElBQVdBLEVBQU95ZixVQUFVanRHLFNBQVMsV0FDdkMsRUFBSzB0RyxVQUFVbGdCLEVBQU9xZ0IsWUFHMUJ0OUcsS0FBS3U5RyxpQkFBbUJydEcsT0FBT3N0RyxXQUFXLHNCQUMxQ3g5RyxLQUFLeTlHLGFBQWV6OUcsS0FBS3k5RyxhQUFheCtHLEtBQUtlLE1BQzNDQSxLQUFLdTlHLGlCQUFpQjdrQixZQUFZMTRGLEtBQUt5OUcsY0FDdkN6OUcsS0FBS3k5RyxhQUFhejlHLEtBQUt1OUcsa0JBRXZCdjlHLEtBQUt5OEcsZUFBZTk3RixNQUFNKzhGLFlBQVksVUFBVzE5RyxLQUFLcThHLFdBQWEsTUFDbkVyOEcsS0FBS3k4RyxlQUFlOTdGLE1BQU0rOEYsWUFBWSxXQUFZMTlHLEtBQUtzOEcsWUFBYyxNQUNyRXQ4RyxLQUFLMjhHLFVBQVVnQixZQUFjLFNBQUFuOUcsR0FDdkIsRUFBS285RyxZQUFjNVEsRUFBYzZRLE9BQ25DLEVBQUt0QixlQUFnQixFQUNyQixFQUFLQyxnQkFBaUIsRUFDdEIsRUFBS3NCLE9BQVN0OUcsRUFBRXk5RixNQUNoQixFQUFLOGYsV0FBYSxFQUFLMUIsWUFDZCxFQUFLdUIsWUFBYzVRLEVBQWNnUixTQUMxQyxFQUFLeEIsZ0JBQWlCLEVBQ3RCLEVBQUtELGVBQWdCLEVBQ3JCLEVBQUswQixPQUFTejlHLEVBQUUwOUYsTUFDaEIsRUFBS2dnQixZQUFjLEVBQUs1QixjQUc1QkgsRUFBVWEsbUJBQW1CLzdGLFlBQVlqaEIsS0FBS3k4RyxnQkE4SWxELE9BM0lFLFlBQUFRLFlBQUEsU0FBWWtCLEdBQ1ZuK0csS0FBS3E4RyxXQUFhcjhHLEtBQUsrOUcsWUFBY0ksRUFBV2xnQixNQUFRaitGLEtBQUs4OUcsUUFDN0Q5OUcsS0FBS3k4RyxlQUFlOTdGLE1BQU0rOEYsWUFBWSxVQUFXMTlHLEtBQUtxOEcsV0FBYSxPQUdyRSxZQUFBYSxhQUFBLFNBQWFpQixHQUNYbitHLEtBQUtzOEcsWUFBY3Q4RyxLQUFLaytHLGFBQWVDLEVBQVdqZ0IsTUFBUWwrRixLQUFLaStHLFFBQy9EaitHLEtBQUt5OEcsZUFBZTk3RixNQUFNKzhGLFlBQVksV0FBWTE5RyxLQUFLczhHLFlBQWMsT0FHdkUsWUFBQXBnRixLQUFBLFdBQ0VsOEIsS0FBS3k4RyxlQUFlQyxVQUFVemxGLElBQUksUUFDbENqM0IsS0FBS3k5RyxhQUFhejlHLEtBQUt1OUcsa0JBQ3ZCdjlHLEtBQUsrNkQsUUFBUyxHQUdoQixZQUFBaHRELE1BQUEsV0FDRS9OLEtBQUt5OEcsZUFBZUMsVUFBVXA3RixPQUFPLFFBQ3JDdGhCLEtBQUsrNkQsUUFBUyxHQU1oQixZQUFBcWpELE9BQUEsU0FBT0MsR0FDREEsSUFBU3JSLEVBQWM2USxPQUN6Qjc5RyxLQUFLNDlHLFVBQVlTLEVBQ2pCcitHLEtBQUt5OEcsZUFBZUMsVUFBVXA3RixPQUFPLFVBQ3JDdGhCLEtBQUt5OEcsZUFBZUMsVUFBVXpsRixJQUFJLFNBQ2xDajNCLEtBQUs4OEcsVUFBVW43RixXQUFXblEsU0FBUSxTQUFDdU4sR0FDakNBLEVBQVEyOUYsVUFBVXA3RixPQUFPLGNBQ3pCdkMsRUFBUTI5RixVQUFVemxGLElBQUksZ0JBRWZvbkYsSUFBU3JSLEVBQWNnUixTQUNoQ2grRyxLQUFLNDlHLFVBQVlTLEVBQ2pCcitHLEtBQUt5OEcsZUFBZUMsVUFBVXA3RixPQUFPLFNBQ3JDdGhCLEtBQUt5OEcsZUFBZUMsVUFBVXpsRixJQUFJLFVBQ2xDajNCLEtBQUs4OEcsVUFBVW43RixXQUFXblEsU0FBUSxTQUFDdU4sR0FDakNBLEVBQVEyOUYsVUFBVXA3RixPQUFPLFlBQ3pCdkMsRUFBUTI5RixVQUFVemxGLElBQUksbUJBUzVCLFlBQUFrbUYsVUFBQSxTQUFVbi9HLEdBQ0pnQyxLQUFLcytHLGVBQ1B0K0csS0FBS3UrRyxZQUFZditHLEtBQUtzK0csZUFFeEJ0K0csS0FBS3MrRyxjQUFnQnQrRyxLQUFLbzhHLFNBQVMxM0QsTUFBSyxTQUFBbGxELEdBQUssT0FBQUEsRUFBRXhCLE9BQVNBLEtBQ3hEZ0MsS0FBS3MrRyxjQUFjcmhCLE9BQU95ZixVQUFVemxGLElBQUksVUFDeENqM0IsS0FBS3MrRyxjQUFjNTdHLEtBQUtnNkcsVUFBVXA3RixPQUFPLFdBTzNDLFlBQUFpOUYsWUFBQSxTQUFZQyxHQUNWQSxFQUFRdmhCLE9BQU95ZixVQUFVcDdGLE9BQU8sVUFDaENrOUYsRUFBUTk3RyxLQUFLZzZHLFVBQVV6bEYsSUFBSSxXQVM3QixZQUFBd25GLFdBQUEsU0FBV3pnSCxFQUFjMEUsRUFBbUJnOEcsRUFBaUJ2bkYsUUFBakIsSUFBQXVuRixPQUFBLFFBQWlCLElBQUF2bkYsT0FBQSxHQUMzRCxJQUFJcW5GLEVBQVV4K0csS0FBS284RyxTQUFTMTNELE1BQUssU0FBQWxsRCxHQUFLLE9BQUFBLEVBQUV4QixPQUFTQSxLQUNqRCxRQUFnQnVMLElBQVppMUcsRUFBdUIsQ0FFekIsSUFBTXZoQixFQUFTNzlFLFNBQVN3QixjQUFjLFFBQ3RDcThFLEVBQU9xZ0IsVUFBWXQvRyxFQUNuQmkvRixFQUFPZ2YsUUFBUTBDLElBQU0sR0FDckIzK0csS0FBSzY4RyxZQUFZNTdGLFlBQVlnOEUsR0FDN0JqOUYsS0FBSzg4RyxVQUFVNzdGLFlBQVl2ZSxHQUMzQjg3RyxFQUFVLENBQUV4Z0gsS0FBSSxFQUFFaS9GLE9BQU0sRUFBRXY2RixLQUFJLEdBRTFCeTBCLEVBQ0ZuM0IsS0FBS284RyxTQUFTcmlCLFFBQVF5a0IsR0FFdEJ4K0csS0FBS284RyxTQUFTMzRHLEtBQUsrNkcsR0FFbkJFLEVBQ0YxK0csS0FBS205RyxVQUFVcUIsRUFBUXhnSCxNQUV2QmdDLEtBQUt1K0csWUFBWUMsSUFRckIsWUFBQUksWUFBQSxTQUFZQyxHQUNWLElBQUssSUFBSXBoSCxFQUFJLEVBQUdBLEVBQUlvaEgsRUFBY3grRyxPQUFRNUMsSUFDeEN1QyxLQUFLeStHLFdBQVdJLEVBQWNwaEgsR0FBR08sS0FBTTZnSCxFQUFjcGhILEdBQUdpRixLQUFZLElBQU5qRixJQVFsRSxZQUFBcWhILGNBQUEsU0FBYzlnSCxHQUNaLElBQU0rZ0gsRUFBZS8rRyxLQUFLbzhHLFNBQVM3QixXQUFVLFNBQUEvNkcsR0FBSyxPQUFBQSxFQUFFeEIsT0FBU0EsS0FDN0QsR0FBSStnSCxHQUFnQixFQUFHLENBQ3JCLElBQU1QLEVBQVV4K0csS0FBS284RyxTQUFTejVGLE9BQU9vOEYsRUFBYyxHQUFHLEdBQ3REUCxFQUFRdmhCLE9BQU8zN0UsU0FDZnRoQixLQUFLazhHLGNBQWNqN0YsWUFBWXU5RixFQUFROTdHLE1BQ25DMUMsS0FBS284RyxTQUFTLzdHLE9BQVMsRUFFekJMLEtBQUttOUcsVUFBVW45RyxLQUFLbzhHLFNBQVMsR0FBR3ArRyxNQUVoQ2dDLEtBQUsrTixhQUdQN0UsUUFBUW1DLEtBQUssMkVBSWpCLFlBQUFveUcsYUFBQSxTQUFhdUIsR0FDUEEsRUFBVzN0RSxRQUNicnhDLEtBQUtvK0csT0FBT3BSLEVBQWNnUixRQUUxQmgrRyxLQUFLbytHLE9BQU9wUixFQUFjNlEsUUFJOUIsWUFBQW9CLEtBQUEsV0FFRWovRyxLQUFLNjhHLFlBQVlPLFFBQVUsS0FDM0JwOUcsS0FBSzI4RyxVQUFVZ0IsWUFBYyxNQUVqQyxFQW5PQSxHTVRBLGFBZUUsV0FBWXVCLEVBQThCQyxHQUExQyxXQUNFbi9HLEtBQUtrL0csWUFBY0EsRUFDbkJsL0csS0FBS20vRyxVQUFZQSxFQUNqQkQsRUFBWUUsU0FBVyxTQUFBNStHLEdBQU9BLEVBQUVnK0Ysa0JBQ2hDeCtGLEtBQUtxL0csZ0JBQWtCamdHLFNBQVNrZ0csZUFBZSxxQkFDL0N0L0csS0FBS3UvRyxjQUFnQm5nRyxTQUFTa2dHLGVBQWUsaUJBQzdDdC9HLEtBQUt3L0csVUFBWXBnRyxTQUFTa2dHLGVBQWUscUJBQ3pDdC9HLEtBQUt3L0csVUFBVXBDLFFBQVUsV0FBTSxTQUFLcUMsY0FBYyxFQUFLQyxZQUN2RDEvRyxLQUFLMi9HLFFBQVV2Z0csU0FBU2tnRyxlQUFlLG1CQUN2Q3QvRyxLQUFLMi9HLFFBQVF2QyxRQUFVLFdBQU0sU0FBS3dDLGtCQUFrQixFQUFLRixZQUN6RDEvRyxLQUFLNi9HLGdCQUFrQnpnRyxTQUFTa2dHLGVBQWUsa0JBQy9DdC9HLEtBQUs2L0csZ0JBQWdCekMsUUFBVSxXQUFNLFNBQUswQyxpQkFDMUM5L0csS0FBSysvRyxpQkFBbUIzZ0csU0FBU2tnRyxlQUFlLGtCQUNoRHQvRyxLQUFLZ2dILFVBQVlkLEVBQVkzMEMsU0FBUzAxQyxVQUFVLFdBQ2hEamdILEtBQUtrZ0gsZ0JBQWtCaEIsRUFBWTMvRixjQUFjLFlBQ2pEdmYsS0FBS21nSCxjQUFnQmpCLEVBQVkzMEMsU0FBUzAxQyxVQUFVLFdBQ3BEamdILEtBQUtvZ0gsYUFBZWxCLEVBQVkzL0YsY0FBYyxxQkE2SWxELE9BMUlFLFlBQUE4Z0csb0JBQUEsV0FDRXJnSCxLQUFLa2dILGdCQUFnQnhELFVBQVVwN0YsT0FBTyxXQUd4QyxZQUFBZy9GLG9CQUFBLFdBQ0V0Z0gsS0FBS2tnSCxnQkFBZ0J4RCxVQUFVemxGLElBQUksV0FNckMsWUFBQXNwRixzQkFBQSxTQUFzQjNoSCxHQUNwQixJQUFLLElBQUluQixFQUFJLEVBQUdBLEVBQUl1QyxLQUFLb2dILGFBQWFJLFNBQVNuZ0gsT0FBUTVDLElBQ2hEdUMsS0FBS29nSCxhQUFhSSxTQUFTL2lILEdBQW1CdytHLFFBQVFyOUcsT0FBU0EsRUFDakVvQixLQUFLb2dILGFBQWFJLFNBQVMvaUgsR0FBbUJrakIsTUFBTTgvRixRQUFVLE9BRTlEemdILEtBQUtvZ0gsYUFBYUksU0FBUy9pSCxHQUFtQmtqQixNQUFNOC9GLFFBQVUsUUFLckUsWUFBQWhCLGNBQUEsU0FBY0MsR0FDWixJQUFNdmpHLEVBQVFuYyxLQUFLbS9HLFVBQVUvRCxTQUFTYixXQUFVLFNBQUF6OEcsR0FBSyxPQUFBQSxFQUFFb2lCLEtBQU93L0YsS0FFOUQxL0csS0FBS20vRyxVQUFVL0QsU0FBU2ovRixHQUFPMC9GLGdCQUFnQnJxRyxTQUFRLFNBQUFqVCxHQUFLLE9BQUFBLEVBQUUraUIsWUFFOUR0aEIsS0FBS20vRyxVQUFVL0QsU0FBU3o0RixPQUFPeEcsRUFBTyxHQUV0Q25jLEtBQUttL0csVUFBVXVCLHNCQUlmMWdILEtBQUttL0csVUFBVXdCLFVBQVU3QixjQUFjLFlBR3pDLFlBQUE4QixZQUFBLFdBQ0U1Z0gsS0FBS2dnSCxVQUFVYSxVQUFXLEVBQzFCN2dILEtBQUttZ0gsY0FBY1UsVUFBVyxHQUdoQyxZQUFBQyxXQUFBLFdBQ0U5Z0gsS0FBS2dnSCxVQUFVYSxVQUFXLEVBQzFCN2dILEtBQUttZ0gsY0FBY1UsVUFBVyxHQUdoQyxZQUFBRSxZQUFBLFNBQVlyQixHQUNWLElBQU1zQixFQUFVaGhILEtBQUttL0csVUFBVS9ELFNBQVMxMkQsTUFBSyxTQUFBNW1ELEdBQUssT0FBQUEsRUFBRW9pQixLQUFPdy9GLEtBQ3ZEc0IsR0FDRmhoSCxLQUFLaWhILFdBQVdELEdBQ2hCaGhILEtBQUswL0csVUFBWXNCLEVBQVE5Z0csR0FDekJsZ0IsS0FBSzRnSCxjQUNMNWdILEtBQUt1Z0gsc0JBQXNCLFNBRTNCcjNHLFFBQVFtQyxLQUFLLGlDQUFrQ3EwRyxJQUluRCxZQUFBRSxrQkFBQSxTQUFrQkYsR0FBbEIsV0FDUXNCLEVBQVVoaEgsS0FBS20vRyxVQUFVL0QsU0FBUzEyRCxNQUFLLFNBQUE1bUQsR0FBSyxPQUFBQSxFQUFFb2lCLEtBQU93L0YsS0FDdkRzQixHQUNGaGhILEtBQUtpaEgsV0FBV0QsR0FDaEJoaEgsS0FBSzAvRyxVQUFZQSxFQUNqQjEvRyxLQUFLOGdILGFBQ0w5Z0gsS0FBS3VnSCxzQkFBc0IsUUFDM0J2Z0gsS0FBS2svRyxZQUFZZ0MsU0FBVyxXQUMxQixFQUFLbkIsaUJBQWlCckQsVUFBVXA3RixPQUFPLFlBQ3ZDLEVBQUt5K0YsaUJBQWlCM0MsUUFBVSxXQUFNLFNBQUsrRCxjQUFjekIsRUFBVyxFQUFLTSxVQUFVdGhILE1BQU8sRUFBSzBpSCx5QkFHakdsNEcsUUFBUW1DLEtBQUssaUNBQWtDcTBHLElBSW5ELFlBQUF5QixjQUFBLFNBQWN6QixFQUFtQnRJLEVBQWN3RSxHQUM3QyxJQUFNb0YsRUFBVWhoSCxLQUFLbS9HLFVBQVUvRCxTQUFTMTJELE1BQUssU0FBQTVtRCxHQUFLLE9BQUFBLEVBQUVvaUIsS0FBT3cvRixLQUN2RHNCLEdBQ0ZBLEVBQVFqaUcsUUFBVXE0RixFQUNsQjRKLEVBQVFwRixTQUFXQSxFQUNuQjU3RyxLQUFLbS9HLFVBQVV1QixzQkFDZjFnSCxLQUFLay9HLFlBQVlnQyxTQUFXLEtBQzVCbGhILEtBQUs0Z0gsY0FDTDVnSCxLQUFLdWdILHNCQUFzQixRQUMzQnZnSCxLQUFLKy9HLGlCQUFpQnJELFVBQVV6bEYsSUFBSSxZQUNwQ2ozQixLQUFLNi9HLGdCQUFnQm5ELFVBQVV6bEYsSUFBSSxZQUNuQ2ozQixLQUFLKy9HLGlCQUFpQjNDLFFBQVUsS0FDaENwOUcsS0FBSzYvRyxnQkFBZ0J6QyxRQUFVLE1BRS9CbDBHLFFBQVFtQyxLQUFLLGlDQUFrQ3EwRyxJQUluRCxZQUFBSSxjQUFBLHNCQUNRa0IsRUFBVWhoSCxLQUFLbS9HLFVBQVUvRCxTQUFTMTJELE1BQUssU0FBQTVtRCxHQUFLLE9BQUFBLEVBQUVvaUIsS0FBTyxFQUFLdy9GLGFBQzVEc0IsR0FDRmhoSCxLQUFLZ2dILFVBQVV0aEgsTUFBUXNpSCxFQUFRamlHLFFBRS9CL2UsS0FBS2svRyxZQUFZZ0MsU0FBVyxLQUM1QmxoSCxLQUFLNGdILGNBQ0w1Z0gsS0FBS3VnSCxzQkFBc0IsUUFDM0J2Z0gsS0FBSysvRyxpQkFBaUJyRCxVQUFVemxGLElBQUksWUFDcENqM0IsS0FBSysvRyxpQkFBaUIzQyxRQUFVLE1BRWhDbDBHLFFBQVFtQyxLQUFLLGlDQUFrQ3JMLEtBQUswL0csWUFPeEQsWUFBQTBCLG1CQUFBLFdBRUUsSUFEQSxJQUFNQyxFQUFrQixHQUNmNWpILEVBQUksRUFBR0EsRUFBSXVDLEtBQUttZ0gsY0FBY2tCLGdCQUFnQmhoSCxPQUFRNUMsSUFDN0Q0akgsRUFBZ0I1OUcsS0FBS3pELEtBQUttZ0gsY0FBY2tCLGdCQUFnQjVqSCxHQUFHaUIsT0FFN0QsT0FBTzJpSCxHQUdULFlBQUFKLFdBQUEsU0FBV0QsR0FBWCxXQUVFLEdBREFoaEgsS0FBS2dnSCxVQUFVdGhILE1BQVFzaUgsRUFBUWppRyxRQUMzQmlpRyxFQUFRcEYsU0FBU3Y3RyxPQUFTLEVBQUcsQ0FDL0IsSUFBTSxFQUFxQixHQUkzQjJnSCxFQUFRcEYsU0FBU3BxRyxTQUFRLFNBQUE4dkcsR0FDdkIsSUFBTUMsRUFBYSxFQUFLcEMsVUFBVTNFLFlBQVk5MUQsTUFBSyxTQUFBbmxELEdBQUssT0FBQUEsRUFBRW8zRyxlQUFpQjJLLEtBQzNFLEVBQVM3OUcsS0FBSyxrQkFBa0I2OUcsRUFBWSxNQUFLQyxFQUFhQSxFQUFXQyxZQUFjLGdCQUFjLGdCQUV2R3hoSCxLQUFLbWdILGNBQWNzQixVQUFZLEVBQVMzNUcsS0FBSyxTQUc3QyxFQUFTbW5HLFVBQVVqdkcsS0FBS21nSCxnQkFJNUIsWUFBQXh6RyxNQUFBLFdBQ0UzTSxLQUFLay9HLFlBQVl2eUcsU0FFckIsRUE1S0EsR0NVQSxhQTZCRSxXQUFZKzBHLEVBQTBCQyxHQUF0QyxXQWxCQSxLQUFBQyxvQkFBZ0MsR0FVaEMsS0FBQXhHLFNBQXNCLEdBRXRCLEtBQUF5RyxpQkFBcUMsR0FRbkM3aEgsS0FBS2c5RyxtQkFBcUI1OUYsU0FBU3dCLGNBQWMsT0FDakQ1Z0IsS0FBS2c5RyxtQkFBbUJOLFVBQVV6bEYsSUFBSSxhQUl0Q2ozQixLQUFLZzNHLFlBQWMwSyxFQUFZMWpILEtBQy9CZ0MsS0FBS2tzQixVQUFZdzFGLEVBQVl4aEcsR0FDN0JsZ0IsS0FBS3c2RyxZQUFja0gsRUFBWWxILFlBQy9CeDZHLEtBQUtvNkcsYUFBZXVILEVBQUkzSixhQUFhdUMsV0FBVSxTQUFDcHNHLEdBQXFCLE9BQUFBLEVBQUluUSxPQUFTMGpILEVBQVkxakgsUUFDMUYyakgsRUFBSXJLLHFCQUF1Qm9LLEVBQVl4aEcsS0FBT3loRyxFQUFJckssb0JBQW9CcDNGLEtBTXhFbGdCLEtBQUtvNEcsU0FBV3NKLEVBQVl0SixTQUM1QnA0RyxLQUFLaTdHLGlCQUFtQnlHLEVBQVl6RyxpQkFFcENqN0csS0FBS2k1RyxhQUFlLElBR3RCMEksRUFBSUcsZ0JBQWdCTCxVQUFZLFNBQVdDLEVBQVkxakgsS0FBTyxVQUM5RGdDLEtBQUsraEgsYUFBZUosRUFBSUksYUFDeEIvaEgsS0FBS2dpSCxRQUFVTCxFQUFJSyxRQUNuQmhpSCxLQUFLaWlILG1CQUFtQmppSCxLQUFLbzRHLFVBRTVCcDRHLEtBQUsraEgsYUFBYXZCLFNBQVMsR0FBbUJsRCxVQUFZLGlCQUMzRHQ5RyxLQUFLK2hILGFBQWFwaEcsTUFBTTgvRixRQUFVLFFBQ2xDa0IsRUFBSU8sa0JBQWtCdmhHLE1BQU04L0YsUUFBVSxPQUN0Q3pnSCxLQUFLZzRHLGFBQWUySixFQUFJM0osYUFDeEJoNEcsS0FBS21pSCxxQkFBdUIvaUcsU0FBU2tnRyxlQUFlLHdCQUNwRHQvRyxLQUFLb2lILHNCQUF3QmhqRyxTQUFTa2dHLGVBQWUseUJBQ2pEb0MsRUFBWXBHLGlCQUNkdDdHLEtBQUtzN0csZUFBaUJvRyxFQUFZcEcsZ0JBRWhDb0csRUFBWXRHLFdBQ2RzRyxFQUFZdEcsU0FBUzVwRyxTQUFRLFNBQUM2d0csR0FDNUIsSUFBTUMsRUFBYSxJQUFJLEVBQVFELEVBQVkxRyxZQUFhMEcsRUFBWXRqRyxRQUFTc2pHLEVBQVl6RyxVQUN6RixFQUFLUixTQUFTMzNHLEtBQUs2K0csR0FDbkIsSUFBSyxJQUFJN2tILEVBQUksRUFBR0EsRUFBSTRrSCxFQUFZMUcsWUFBWXQ3RyxPQUFRNUMsSUFDN0MsRUFBS29rSCxpQkFBaUJ2aUgsZUFBZStpSCxFQUFZMUcsWUFBWWwrRyxNQUNoRSxFQUFLb2tILGlCQUFpQlEsRUFBWTFHLFlBQVlsK0csSUFBTSxJQUN0RCxFQUFLb2tILGlCQUFpQlEsRUFBWTFHLFlBQVlsK0csSUFBSWdHLEtBQUs2K0csRUFBV3BpRyxPQUd0RWxnQixLQUFLbzRHLFNBQVM1bUcsU0FBUSxTQUFBZ25HLEdBQVcsT0FBQUEsRUFBUStKLGlCQUFrQixNQUU3RHZpSCxLQUFLMmdILFVBQVksSUFBSTZCLEVBQVViLEVBQUl6RixjQUFlbDhHLE1BQ2xEQSxLQUFLeWlILFlBQWMsSUFBSSxFQUFZcmpHLFNBQVNrZ0csZUFBZSxlQUFtQ3QvRyxNQUU5RkEsS0FBSzBpSCxrQkFBb0J0akcsU0FBU3dCLGNBQWMsT0FDaEQ1Z0IsS0FBSzBpSCxrQkFBa0JoRyxVQUFVemxGLElBQUkscUJBQ3JDajNCLEtBQUtnOUcsbUJBQW1CLzdGLFlBQVlqaEIsS0FBSzBpSCxtQkFFekNmLEVBQUlnQixvQkFBb0IxaEcsWUFBWWpoQixLQUFLZzlHLG9CQW1LN0MsT0F4SkUsWUFBQTRGLFlBQUEsU0FBWXBpSCxFQUFVcWlILEVBQStCN2tILFFBQ3hCdUwsSUFBdkJ2SixLQUFLOGlILG1CQUtldjVHLElBQXBCdkosS0FBSytpSCxXQUNQL2lILEtBQUsraUgsV0FBYSxJQUFJRixFQUFLN2tILEVBQU13QyxFQUFFd2lILGNBQThCaGpILE1BQ3hEQSxLQUFLK2lILFdBQVcva0gsT0FBU0EsR0FDbENnQyxLQUFLK2lILFdBQVc5RCxPQUNoQmovRyxLQUFLK2lILFdBQWEsSUFBSUYsRUFBSzdrSCxFQUFNd0MsRUFBRXdpSCxjQUE4QmhqSCxPQUN4REEsS0FBSytpSCxXQUFXL2tILE9BQVNBLElBQ2xDZ0MsS0FBSytpSCxXQUFXOUQsT0FDaEJqL0csS0FBSytpSCxnQkFBYXg1RyxHQVZsQkwsUUFBUTRPLElBQUksOEJBZWhCLFlBQUE0b0csb0JBQUEsV0FDRTFnSCxLQUFLaWpILHdCQUF5QixFQUM5QmpqSCxLQUFLZ2lILFFBQVF0RixVQUFVcDdGLE9BQU8sWUFDOUJ0aEIsS0FBS2dpSCxRQUFRdEYsVUFBVXpsRixJQUFJLFlBVTdCLFlBQUFpc0YsV0FBQSxTQUFXMUssR0FFVCxHQUFJeDRHLEtBQUs4aUgsZUFBaUI5aUgsS0FBSzhpSCxjQUFjOWtILE9BQVN3NkcsRUFBUXg2RyxLQUV4RGdDLEtBQUsraUgsWUFBYy9pSCxLQUFLK2lILFdBQVdJLGlCQUFpQjlpSCxPQUFTLEdBQy9ETCxLQUFLK2lILFdBQVdLLGlDQUFpQ3BqSCxLQUFLOGlILGVBRXhEOWlILEtBQUs4aUgsY0FBYy9qRyxRQUFRNEIsTUFBTTgvRixRQUFVLFlBQ3RDLEdBQUl6Z0gsS0FBSzhpSCxlQUFpQjlpSCxLQUFLOGlILGNBQWM5a0gsT0FBU3c2RyxFQUFReDZHLEtBQ25FLE9BbUJGLEdBYkF3NkcsRUFBUXo1RixRQUFRNEIsTUFBTTBpRyxXQUFhLFNBSTlCcmpILEtBQUs0aEgsb0JBQW9CMEIsU0FBUzlLLEVBQVF0NEYsSUFJN0NzNEYsRUFBUXo1RixRQUFRNEIsTUFBTTgvRixRQUFVLFNBSGhDemdILEtBQUs0aEgsb0JBQW9CbitHLEtBQUsrMEcsRUFBUXQ0RixJQUN0Q2xnQixLQUFLMGlILGtCQUFrQnRNLE9BQU9vQyxFQUFRejVGLFVBT3BDeTVGLEVBQVErSixnQkFBaUIsQ0FJM0IsUUFBOEJoNUcsSUFBMUJpdkcsRUFBUTNELGNBRVYsSUFEQSxJQUFJME8sR0FBZSxFQUNWbC9HLEVBQUksRUFBR0EsRUFBSXJFLEtBQUtvN0csU0FBUy82RyxPQUFRZ0UsSUFBSyxDQUU3QyxJQURBLElBQU1tL0csRUFBK0MsR0FDNUMvbEgsRUFBSSxFQUFHQSxFQUFJdUMsS0FBS283RyxTQUFTLzJHLEdBQUdzM0csWUFBWXQ3RyxPQUFRNUMsSUFBSyxDQUU1QyxRQURWc3JCLEVBQVV5dkYsRUFBUXo1RixRQUFRUSxjQUFjLGFBQWV2ZixLQUFLbzdHLFNBQVMvMkcsR0FBR3MzRyxZQUFZbCtHLEdBQUssUUFFN0YrbEgsRUFBOEIvL0csS0FBS3NsQixHQUduQ3k2RixFQUE4Qm5qSCxPQUFTLElBRXBDa2pILElBQ0gvSyxFQUFRNUQsc0JBRVIyTyxHQUFlLEdBRWpCdmpILEtBQUtvN0csU0FBUy8yRyxHQUFHeTNHLHFCQUFxQnRELEVBQVEzRCxjQUFlMk8sU0FNakUsSUFBU24vRyxFQUFJLEVBQUdBLEVBQUlyRSxLQUFLbzdHLFNBQVMvNkcsT0FBUWdFLElBRXhDLEdBQXVGLE9BQW5GbTBHLEVBQVEzRCxjQUFjdDFGLGNBQWMsYUFBZXZmLEtBQUtvN0csU0FBUy8yRyxHQUFHNmIsR0FBSyxNQUE3RSxDQUlBLElBRE1zakcsRUFBK0MsR0FDNUMvbEgsRUFBSSxFQUFHQSxFQUFJdUMsS0FBS283RyxTQUFTLzJHLEdBQUdzM0csWUFBWXQ3RyxPQUFRNUMsSUFBSyxDQUM1RCxJQUFNc3JCLEVBQ1UsUUFEVkEsRUFBVXl2RixFQUFRejVGLFFBQVFRLGNBQWMsYUFBZXZmLEtBQUtvN0csU0FBUy8yRyxHQUFHczNHLFlBQVlsK0csR0FBSyxRQUU3RitsSCxFQUE4Qi8vRyxLQUFLc2xCLEdBRW5DeTZGLEVBQThCbmpILE9BQVMsR0FDekNMLEtBQUtvN0csU0FBUy8yRyxHQUFHeTNHLHFCQUFxQnRELEVBQVEzRCxjQUFlMk8sR0FNbkVoTCxFQUFRK0osaUJBQWtCLEVBVXhCdmlILEtBQUsraUgsWUFBYy9pSCxLQUFLK2lILFdBQVdJLGlCQUFpQjlpSCxPQUFTLEdBQy9ETCxLQUFLK2lILFdBQVdVLDhCQUE4QmpMLEdBR2hEQSxFQUFRejVGLFFBQVE0QixNQUFNMGlHLFdBQWEsUUFHbkNyakgsS0FBSzhpSCxjQUFnQnRLLEdBT3ZCLFlBQUF5SixtQkFBQSxTQUFtQjdKLEdBQ2pCLElBQUlzTCxFQUEwQixHQUM5QnRMLEVBQVM1bUcsU0FBUSxTQUFBZ25HLEdBRWZrTCxFQUFjamdILEtBQUssUUFBTyswRyxFQUFRdDRGLEdBQUssWUFBZXM0RixFQUFRdDRGLEdBQUssSUFBTyxJQUFFLElBQUlzNEYsRUFBUXg2RyxLQUFJLFlBRTlGZ0MsS0FBSytoSCxhQUFheGlHLGNBQWMscUJBQXFCa2lHLFVBQVlpQyxFQUFjNTdHLEtBQUssS0FPdEYsWUFBQWlHLE1BQUEsV0FFRSxFQUFTa2hHLFVBQVVqdkcsS0FBSytoSCxhQUFheGlHLGNBQWMsMkJBRXBCaFcsSUFBM0J2SixLQUFLMmpILG1CQUNQM2pILEtBQUsyakgsa0JBQWtCcmlHLFNBSXpCdGhCLEtBQUswaUgsa0JBQWtCakIsVUFBWSxJQUV2QyxFQXhQQSxHQ1pBLGFBS0UsV0FBWXpqSCxFQUFjNGxILEVBQXNCekUsR0FDOUNuL0csS0FBS2hDLEtBQU9BLEVBQ1pnQyxLQUFLNGpILFFBQVVBLEVBQ2Y1akgsS0FBS20vRyxVQUFZQSxFQUNqQm4vRyxLQUFLNGpILFFBQVFsSCxVQUFVemxGLElBQUksb0JBTS9CLE9BSEUsWUFBQWdvRixLQUFBLFdBQ0VqL0csS0FBSzRqSCxRQUFRbEgsVUFBVXA3RixPQUFPLHFCQUVsQyxFQWZBLEcsb1RDSUEsY0FVRSxXQUFZdGpCLEVBQWM0bEgsRUFBc0J6RSxHQUFoRCxNQUNFLFlBQU1uaEgsRUFBTTRsSCxFQUFTekUsSUFBVSxLLE9BVmpDLEVBQUFnRSxpQkFBd0IsR0FLeEIsRUFBQVUsbUJBQW9CLEVBRXBCLEVBQUFDLG1CQUFxQixFQUtuQixFQUFLQyxnQkFBa0IsRUFBS0EsZ0JBQWdCOWtILEtBQUssR0FDakRrZ0gsRUFBVXVELGtCQUFrQmw4RCxpQkFBaUIsUUFBUyxFQUFLdTlELGlCLEVBd0ovRCxPQXRLc0MsT0EwQnBDLFlBQUFBLGdCQUFBLFNBQWdCdmpILEdBR2QsR0FGQVIsS0FBS2drSCxVQUFheGpILEVBQUVNLE9BQXNCdThHLFFBQVEsaUJBRTdDcjlHLEtBQUtna0gsVUFBVyxDQUNuQixJQUFNQyxFQUFTQyxFQUFTalUsMEJBQTBCenZHLEdBQ2xEMmpILEVBQ0EsSUFBSyxJQUFJMW1ILEVBQUksRUFBR0EsR0FBS3VDLEtBQUs4akgsbUJBQW9Ccm1ILElBRTVDLElBREEsSUFBTTJtSCxFQUFTMVMsRUFBYTFELGdCQUFnQmlXLEVBQVF4bUgsR0FDM0M0RyxFQUFJLEVBQUdBLEVBQUkrL0csRUFBTy9qSCxPQUFRZ0UsSUFBSyxDQUN0QyxJQUFNZ2dILEVBQUtqbEcsU0FBU2tsRyxpQkFBaUJGLEVBQU8vL0csR0FBRzQxRixFQUFHbXFCLEVBQU8vL0csR0FBR3pCLEdBRzVELEdBRkl5aEgsSUFDRnJrSCxLQUFLZ2tILFVBQVlLLEVBQUdoSCxRQUFRLGlCQUMxQnI5RyxLQUFLZ2tILFVBQVcsTUFBTUcsR0FLVCxPQUFuQm5rSCxLQUFLZ2tILFVBQ0hoa0gsS0FBSzZqSCxtQkFFUSxJQUREN2pILEtBQUttakgsaUJBQWlCMWlILFFBQVFULEtBQUtna0gsVUFBVS9ILFFBQVEvN0YsSUFFakVsZ0IsS0FBS3VrSCxPQUFPdmtILEtBQUtna0gsV0FFakJoa0gsS0FBS3drSCxTQUFTeGtILEtBQUtna0gsVUFBVS9ILFFBQVEvN0YsSUFHRixJQUFqQ2xnQixLQUFLbWpILGlCQUFpQjlpSCxPQUN4QkwsS0FBS3VrSCxPQUFPdmtILEtBQUtna0gsV0FDUmhrSCxLQUFLZ2tILFVBQVUvSCxRQUFRLzdGLEtBQU9sZ0IsS0FBS21qSCxpQkFBaUIsSUFDN0RuakgsS0FBS3drSCxTQUFTeGtILEtBQUttakgsaUJBQWlCLElBQ3BDbmpILEtBQUt1a0gsT0FBT3ZrSCxLQUFLZ2tILFlBQ1Joa0gsS0FBS2drSCxVQUFVL0gsUUFBUS83RixLQUFPbGdCLEtBQUttakgsaUJBQWlCLElBQzdEbmpILEtBQUt3a0gsU0FBU3hrSCxLQUFLbWpILGlCQUFpQixJQUl4Q25qSCxLQUFLeWtILG9CQUVQdjdHLFFBQVE0TyxJQUFJLGFBQWM5WCxLQUFLbWpILG1CQVFqQyxZQUFBb0IsT0FBQSxTQUFPeDdGLEdBQ0wvb0IsS0FBS21qSCxpQkFBaUIxL0csS0FBS3NsQixFQUFRa3pGLFFBQVEvN0YsSUFDM0NsZ0IsS0FBSzBrSCx1QkFBdUIzN0YsSUFROUIsWUFBQXk3RixTQUFBLFNBQVNHLEdBRVAsSUFBTXhvRyxFQUFRbmMsS0FBS21qSCxpQkFBaUIxaUgsUUFBUWtrSCxHQUM1QyxHQUFJeG9HLEdBQVMsRUFBRyxDQUNkbmMsS0FBS21qSCxpQkFBaUJ4Z0csT0FBT3hHLEVBQU8sR0FDcEMsSUFBTWtvRyxFQUFLcmtILEtBQUttL0csVUFBVTJELGNBQWMvakcsUUFBUVEsY0FBYyxhQUFlb2xHLEVBQVksTUFDckZOLEdBQUlya0gsS0FBSzRrSCx5QkFBeUJQLEtBUTFDLFlBQUFqQixpQ0FBQSxTQUFpQzVLLEdBQy9CLElBQUssSUFBSS82RyxFQUFJLEVBQUdBLEVBQUl1QyxLQUFLbWpILGlCQUFpQjlpSCxPQUFRNUMsSUFBSyxDQUNyRCxJQUFNc3JCLEVBQVV5dkYsRUFBUXo1RixRQUFRUSxjQUFjLGFBQWV2ZixLQUFLbWpILGlCQUFpQjFsSCxHQUFLLE1BQ3BGc3JCLEdBQVMvb0IsS0FBSzRrSCx5QkFBeUI3N0YsS0FRL0MsWUFBQTA2Riw4QkFBQSxTQUE4QmpMLEdBQzVCLElBQUssSUFBSS82RyxFQUFJLEVBQUdBLEVBQUl1QyxLQUFLbWpILGlCQUFpQjlpSCxPQUFRNUMsSUFBSyxDQUNyRCxJQUFNc3JCLEVBQVV5dkYsRUFBUXo1RixRQUFRUSxjQUFjLGFBQWV2ZixLQUFLbWpILGlCQUFpQjFsSCxHQUFLLE1BQ3BGc3JCLEdBQVMvb0IsS0FBSzBrSCx1QkFBdUIzN0YsS0FTN0MsWUFBQTY3Rix5QkFBQSxTQUF5Qjc3RixHQUN2QixJQUFLLElBQUl0ckIsRUFBSSxFQUFHQSxFQUFJc3JCLEVBQVF5M0YsU0FBU25nSCxPQUFRNUMsSUFDM0NzckIsRUFBUXkzRixTQUFTL2lILEdBQUdpL0csVUFBVXA3RixPQUFPLGFBUXpDLFlBQUFvakcsdUJBQUEsU0FBdUIzN0YsR0FDckIsSUFBSyxJQUFJdHJCLEVBQUksRUFBR0EsRUFBSXNyQixFQUFReTNGLFNBQVNuZ0gsT0FBUTVDLElBQzNDc3JCLEVBQVF5M0YsU0FBUy9pSCxHQUFHaS9HLFVBQVV6bEYsSUFBSSxhQU90QyxZQUFBd3RGLGtCQUFBLFdBQ0UsR0FBSXprSCxLQUFLbWpILGlCQUFpQjlpSCxPQUFTLEVBQUcsQ0FDcEMsSUFBSyxJQUFJNUMsRUFBSSxFQUFHQSxFQUFJdUMsS0FBS21qSCxpQkFBaUI5aUgsT0FBUTVDLElBQUssQ0FDckQsSUFBTXNyQixFQUFVL29CLEtBQUttL0csVUFBVTJELGNBQWMvakcsUUFBUVEsY0FBYyxhQUFldmYsS0FBS21qSCxpQkFBaUIxbEgsR0FBSyxNQUN6R3NyQixHQUFTL29CLEtBQUs0a0gseUJBQXlCNzdGLEdBRTdDL29CLEtBQUttakgsaUJBQWlCOWlILE9BQVMsSUFRbkMsWUFBQXdrSCwrQkFBQSxTQUErQnJNLEdBRTdCLElBREEsSUFBTXNNLEVBQWtDLEdBQy9Ccm5ILEVBQUksRUFBR0EsRUFBSXVDLEtBQUttakgsaUJBQWlCOWlILE9BQVE1QyxJQUFLLENBQ3JELElBQU1zckIsRUFBVXl2RixFQUFRejVGLFFBQVFRLGNBQWMsYUFBZXZmLEtBQUttakgsaUJBQWlCMWxILEdBQUssTUFDcEZzckIsR0FBUys3RixFQUFpQnJoSCxLQUFLc2xCLEdBRXJDLE9BQU8rN0YsR0FHVCxZQUFBN0YsS0FBQSxXQUNFLFlBQU1BLEtBQUksV0FDVmovRyxLQUFLbS9HLFVBQVV1RCxrQkFBa0JoOEQsb0JBQW9CLFFBQVMxbUQsS0FBSytqSCxpQkFDbkUvakgsS0FBS3lrSCxxQkFFVCxFQXRLQSxDQUFzQzVCLEcsMlVDRnRDLGNBT0UsV0FBWTdrSCxFQUFjNGxILEVBQXNCekUsR0FBaEQsTUFDRSxZQUFNbmhILEVBQU00bEgsRUFBU3pFLElBQVUsS0FJL0IsR0FYRixFQUFBMEUsbUJBQW9CLEVBRXBCLEVBQUFrQixtQkFBb0IsRUFFcEIsRUFBQUMsY0FBZSxFQUliOTdHLFFBQVE0TyxJQUFJLGlDQUNaLEVBQUttdEcsY0FBZ0IsRUFBS0EsY0FBY2htSCxLQUFLLEdBQzdDa2dILEVBQVVzRCxZQUFZcEQsZ0JBQWdCakMsUUFBVSxFQUFLNkgsY0FDakQ5RixFQUFVM0UsWUFBWW42RyxPQUFTLEVBQUcsQ0FDcEMsSUFBTSxFQUEwQixHQUMxQixFQUFtQjZQLE9BQU9nMUcsaUJBQWlCdk8sYUFDakR3SSxFQUFVM0UsWUFBWWhwRyxTQUFRLFNBQUEyekcsR0FDeEJBLEVBQU94TyxlQUFpQixHQUMxQixFQUFjbHpHLEtBQUssa0JBQWtCMGhILEVBQU94TyxhQUFZLEtBQUt3TyxFQUFPM0QsWUFBVyxnQkFHbkZyQyxFQUFVc0QsWUFBWXRDLGNBQWNzQixVQUFZLEVBQWMzNUcsS0FBSyxJQUNuRXEzRyxFQUFVc0QsWUFBWXBDLDJCQUV0QmxCLEVBQVVzRCxZQUFZbkMsc0IsT0FFeEIsRUFBSzhFLFdBQWEsRUFBS0EsV0FBV25tSCxLQUFLLEdBQ3ZDa2dILEVBQVVzRCxZQUFZbEQsY0FBY25DLFFBQVUsRUFBS2dJLFdBRW5EakcsRUFBVXNELFlBQVkzQixhQUN0QjNCLEVBQVVzRCxZQUFZOTFHLFEsRUErRjFCLE9BNUhnQyxPQW9DOUIsWUFBQW8zRyxnQkFBQSxTQUFnQnZqSCxHQUNkLFlBQU11akgsZ0JBQWUsVUFBQ3ZqSCxHQUNsQlIsS0FBS21qSCxpQkFBaUI5aUgsT0FBUyxHQUNqQ0wsS0FBSytrSCxtQkFBb0IsRUFHekIva0gsS0FBS20vRyxVQUFVc0QsWUFBWWxDLHNCQUFzQixVQUNqRHZnSCxLQUFLbS9HLFVBQVV3QixVQUFVbEMsV0FBVyxVQUFXeitHLEtBQUttL0csVUFBVXNELFlBQVl2RCxhQUMxRWwvRyxLQUFLbS9HLFVBQVV3QixVQUFVemtGLE9BQ3pCbDhCLEtBQUtnbEgsY0FBZSxHQUVwQmhsSCxLQUFLK2tILG1CQUFvQixHQUs3QixZQUFBSyxXQUFBLHNCQUNFLEdBQXFDLElBQWpDcGxILEtBQUttakgsaUJBQWlCOWlILE9BQTFCLENBTUEsSUFBSWdsSCxFQUNKLFFBTG1EOTdHLElBQS9DdkosS0FBS20vRyxVQUFVMkQsY0FBY2pPLGVBQy9CNzBHLEtBQUttL0csVUFBVTJELGNBQWNsTyxzQkFJM0I1MEcsS0FBS20vRyxVQUFVM0UsWUFBWW42RyxPQUFTLElBQ3RDZ2xILEVBQWlCcmxILEtBQUttL0csVUFBVXNELFlBQVlyQixzQkFDekIvZ0gsT0FBUyxFQUFHLENBQzdCLElBQU1pbEgsRUFBa0JwMUcsT0FBT2cxRyxpQkFBaUIxRCxZQUMxQytELEVBQW1CcjFHLE9BQU9nMUcsaUJBQWlCL04sVUFDakRuM0csS0FBS20vRyxVQUFVcUcsMkJBQTJCL2hILEtBQUssQ0FDN0N3ekcsT0FBUW9PLEVBQ1JJLFNBQVVILEVBQ1ZJLFVBQVdILEVBQ1hJLFlBQWEzbEgsS0FBS20vRyxVQUFVc0QsWUFBWXpDLFVBQVV0aEgsTUFDbERzNEcsWUFBYWgzRyxLQUFLbS9HLFVBQVVuSSxZQUM1QjlxRixVQUFXbHNCLEtBQUttL0csVUFBVWp6RixZQUloQyxJQUFNODBGLEVBQVUsSUFBSSxFQUFRaGhILEtBQUttakgsaUJBQWtCbmpILEtBQUttL0csVUFBVXNELFlBQVl6QyxVQUFVdGhILE1BQU8ybUgsR0FFekZPLEVBQWlCNWxILEtBQUs2a0gsK0JBQStCN2tILEtBQUttL0csVUFBVTJELGVBQzFFOUIsRUFBUWxGLHFCQUFxQjk3RyxLQUFLbS9HLFVBQVUyRCxjQUFjak8sY0FBZStRLEdBRXpFLElBQUssSUFBSW5vSCxFQUFJLEVBQUdBLEVBQUl1QyxLQUFLbWpILGlCQUFpQjlpSCxPQUFRNUMsSUFDM0N1QyxLQUFLbS9HLFVBQVUwQyxpQkFBaUJ2aUgsZUFBZVUsS0FBS21qSCxpQkFBaUIxbEgsTUFDeEV1QyxLQUFLbS9HLFVBQVUwQyxpQkFBaUI3aEgsS0FBS21qSCxpQkFBaUIxbEgsSUFBTSxJQUM5RHVDLEtBQUttL0csVUFBVTBDLGlCQUFpQjdoSCxLQUFLbWpILGlCQUFpQjFsSCxJQUFJZ0csS0FBS3U5RyxFQUFROWdHLElBRXpFaFgsUUFBUTRPLElBQUksb0JBQXFCOVgsS0FBS20vRyxVQUFVMEMsa0JBQ2hEN2hILEtBQUttL0csVUFBVS9ELFNBQVMzM0csS0FBS3U5RyxHQUM3QjkzRyxRQUFRNE8sSUFBSTlYLEtBQUttL0csVUFBVS9ELFVBQzNCcDdHLEtBQUttL0csVUFBVXNELFlBQVk5MUcsUUFDM0IzTSxLQUFLbS9HLFVBQVV3QixVQUFVNXlHLFFBQ3pCL04sS0FBSytrSCxtQkFBb0IsRUFFekIva0gsS0FBS20vRyxVQUFVdUIsc0JBQ2YxZ0gsS0FBS20vRyxVQUFVL0csU0FBUzVtRyxTQUFRLFNBQUFnbkcsR0FDMUJBLEVBQVF0NEYsS0FBTyxFQUFLaS9GLFVBQVUyRCxjQUFjNWlHLEtBQzlDczRGLEVBQVErSixpQkFBa0IsTUFHOUIsWUFBTWtDLGtCQUFpQixhQUl6QixZQUFBUSxjQUFBLFdBQ0VqbEgsS0FBS20vRyxVQUFVd0IsVUFBVTV5RyxRQUN6Qi9OLEtBQUttL0csVUFBVXNELFlBQVk5MUcsUUFDM0IzTSxLQUFLK2tILG1CQUFvQixFQUN6QixZQUFNTixrQkFBaUIsWUFJekIsWUFBQXhGLEtBQUEsV0FDRSxZQUFNQSxLQUFJLFdBQ1YvMUcsUUFBUTRPLElBQUksa0NBQ1I5WCxLQUFLK2tILG9CQUNQL2tILEtBQUttL0csVUFBVXNELFlBQVk5MUcsUUFDM0IzTSxLQUFLbS9HLFVBQVV3QixVQUFVNXlHLFNBRXZCL04sS0FBS2dsSCxjQUNQaGxILEtBQUttL0csVUFBVXdCLFVBQVU3QixjQUFjLFdBR3pDOStHLEtBQUttL0csVUFBVXNELFlBQVlsRCxjQUFjbkMsUUFBVSxLQUNuRHA5RyxLQUFLbS9HLFVBQVVzRCxZQUFZcEQsZ0JBQWdCakMsUUFBVSxNQUV6RCxFQTVIQSxDQUFnQyxHLHdwRENFaEMsY0FTRSxXQUFZcC9HLEVBQWM0bEgsRUFBc0J6RSxHQUFoRCxNQUNFLFlBQU1uaEgsRUFBTTRsSCxFQUFTekUsSUFBVSxLLE9BSGpDLEVBQUE2RixjQUFlLEVBSWI5N0csUUFBUTRPLElBQUksK0JBQ1osRUFBS21oRyxhQUFla0csRUFBVWxHLGFBQzlCLEVBQUtqQixhQUFlbUgsRUFBVW5ILGFBQzlCLEVBQUtvQyxhQUFlK0UsRUFBVS9FLGEsRUFzSGxDLE9BcElxQyxPQW9CbkMsWUFBQTJKLGdCQUFBLFNBQWdCdmpILEdBQ2QsWUFBTXVqSCxnQkFBZSxVQUFDdmpILEdBRUMsT0FBbkJSLEtBQUtna0gsV0FBc0Joa0gsS0FBS21qSCxpQkFBaUI5aUgsT0FBUyxHQUM1REwsS0FBSzZsSCxnQkFBZ0I3bEgsS0FBS2drSCxVQUFVL0gsUUFBUTZKLFNBQVU5bEgsS0FBS2drSCxVQUFVL0gsUUFBUS83RixJQUN6RWxnQixLQUFLZ2tILFVBQVUvSCxRQUFRK0UsU0FDekJoaEgsS0FBS20vRyxVQUFVc0QsWUFBWTFCLFlBQVkvZ0gsS0FBS2drSCxVQUFVL0gsUUFBUStFLFNBQzlEaGhILEtBQUttL0csVUFBVXdCLFVBQVVsQyxXQUFXLFVBQVd6K0csS0FBS20vRyxVQUFVc0QsWUFBWXZELGNBQ2pFbC9HLEtBQUttL0csVUFBVXdCLFVBQVV2RSxTQUFTMTNELE1BQUssU0FBQWxsRCxHQUFLLE1BQVcsWUFBWEEsRUFBRXhCLFNBRXZEZ0MsS0FBS20vRyxVQUFVd0IsVUFBVTdCLGNBQWMsWUFFaEM5K0csS0FBSytsSCxxQkFDZC9sSCxLQUFLK2xILHdCQUFxQng4RyxFQUMxQnZKLEtBQUttL0csVUFBVXdCLFVBQVU1eUcsUUFFekI3RSxRQUFRNE8sSUFBSSx5QkFVVixZQUFBK3RHLGdCQUFOLFNBQXNCQyxFQUFrQjVsRyxHLGtIQUNsQ2tqQyxHQUFVLEVBQ1ZwakQsS0FBS2k1RyxhQUFhNk0sSUFDcEI5bEgsS0FBSytsSCxtQkFBcUIvbEgsS0FBS2k1RyxhQUFhNk0sR0FBVXB5RyxVQUFVd00sR0FDaEVoWCxRQUFRNE8sSUFBSTlYLEtBQUsrbEgsb0IsT0FGZixNLG1CQUttQng4RyxLQURmeThHLEVBQWVobUgsS0FBS2c0RyxhQUFhaDRHLEtBQUtvNkcsY0FBY25CLGFBQWF2MEQsTUFBSyxTQUFBdjJDLEdBQU8sT0FBQUEsRUFBSW5RLEtBQUtzTixRQUFRLFFBQVMsTUFBUXc2RyxNQUNqSCxNQUVGLEdBQU0sRUFBSWhMLGVBQWVrTCxFQUFhOWxHLElBQUkxZCxNQUFLLFNBQUEyTyxHQUM3QyxFQUFLOG5HLGFBQWE2TSxHQUFZcDZHLEtBQUtDLE1BQU13RixFQUFJek8sTUFFN0MsRUFBS3FqSCxtQkFBcUIsRUFBSzlNLGFBQWE2TSxHQUFVcHlHLFVBQVV3TSxHQUNoRWhYLFFBQVE0TyxJQUFJLEVBQUtpdUcsdUJBQ2hCLFNBQUFqM0csR0FFRHMwQyxHQUFVLEVBRVZsNkMsUUFBUTRPLElBQUloSixPLGNBVGQsUyxhQVlBNUYsUUFBUTRPLElBQUksc0Msd0JBR1pzckMsSUFFRnBqRCxLQUFLbS9HLFVBQVVnRCxxQkFBcUJWLFVBQVl6aEgsS0FBS2ltSCxnQkFBZ0JqbUgsS0FBSytsSCxtQkFBbUJscUcsWUFDdkZ1Z0csRUFBMkIsQ0FBQyxDQUNoQ3ArRyxLQUFNLGFBQ04wRSxLQUFNMUMsS0FBS20vRyxVQUFVZ0QsdUJBRW5CbmlILEtBQUsrbEgsbUJBQW1CRyxXQUFXN2xILE9BQVMsSUFDOUNMLEtBQUttL0csVUFBVWlELHNCQUFzQlgsVUFBWXpoSCxLQUFLaW1ILGdCQUFnQmptSCxLQUFLK2xILG1CQUFtQkcsWUFDOUY5SixFQUFTMzRHLEtBQUssQ0FDWnpGLEtBQU0sYUFDTjBFLEtBQU0xQyxLQUFLbS9HLFVBQVVpRCx5QkFHekJwaUgsS0FBS20vRyxVQUFVd0IsVUFBVS9CLFlBQVl4QyxHQUNyQ3A4RyxLQUFLbS9HLFVBQVV3QixVQUFVemtGLE9BQ3pCbDhCLEtBQUtnbEgsY0FBZSxHLFlBU3hCLFlBQUFpQixnQkFBQSxTQUFnQkUsR0FHZCxJQUZBLElBQU1DLEVBQTZCLEdBQzdCQyxFQUErQixHQUM1QjVvSCxFQUFJLEVBQUdBLEVBQUkwb0gsRUFBWTlsSCxPQUFRNUMsSUFBSyxDQUMzQyxJQUFNcW9ILEVBQVdLLEVBQVkxb0gsR0FBR3FvSCxTQUMxQlEsRUFBZ0JGLEVBQWlCM2xILFFBQVFxbEgsR0FDekNTLEVBQVcsV0FBV0osRUFBWTFvSCxHQUFHTyxLQUFJLFlBQVltb0gsRUFBWTFvSCxHQUFHaUIsTUFBSyxjQUN4RCxJQUFuQjRuSCxFQUNGRCxFQUFpQkMsR0FBZTdpSCxLQUFLOGlILElBR3JDRixFQUFpQjVpSCxLQUFLLENBQUMsd0RBQXdEcWlILEVBQVEscUJBQXNCUyxJQUM3R0gsRUFBaUIzaUgsS0FBS3FpSCxJQUcxQixJQUFNVSxFQUFzQixHQUM1QixJQUFTL29ILEVBQUksRUFBR0EsRUFBSTRvSCxFQUFpQmhtSCxPQUFRNUMsSUFDM0Mrb0gsRUFBVS9pSCxLQUFLNGlILEVBQWlCNW9ILEdBQUdxSyxLQUFLLElBQU0sb0JBRWhELE9BQU8wK0csRUFBVTErRyxLQUFLLEtBSXhCLFlBQUFtM0csS0FBQSxXQUNFLFlBQU1BLEtBQUksV0FHTmovRyxLQUFLbS9HLFVBQVV3QixVQUFVNWxELFFBQzNCLzZELEtBQUttL0csVUFBVXdCLFVBQVU1eUcsUUFFdkIvTixLQUFLZ2xILGVBQ1BobEgsS0FBS20vRyxVQUFVd0IsVUFBVTdCLGNBQWMsY0FDdkM5K0csS0FBS20vRyxVQUFVd0IsVUFBVTdCLGNBQWMsZUFHekM1MUcsUUFBUTRPLElBQUksaUNBRWhCLEVBcElBLENBQXFDLEcsNjBDQ0RyQyxhQXlCRSxXQUFZMnVHLEVBQW9DOUUsR0FBaEQsV0FKQSxLQUFBK0UsZ0JBQTRCLEdBRTVCLEtBQUFDLGFBQXlCLEdBR3ZCM21ILEtBQUs0bUgsY0FBZ0JILEVBQ3JCem1ILEtBQUs2bUgsVUFBWUosRUFBc0JsbkcsY0FBYyxlQUNyRHZmLEtBQUs4bUgsa0JBQW9CTCxFQUFzQmxuRyxjQUFjLDRCQUM3RHZmLEtBQUsrbUgsbUJBQXFCTixFQUFzQmxuRyxjQUFjLG9CQUM5RHZmLEtBQUtnbkgsZUFBaUJQLEVBQXNCbG5HLGNBQWMscUJBQzFEdmYsS0FBS2luSCxpQkFBbUJSLEVBQXNCbG5HLGNBQWMsdUJBQzVEdmYsS0FBS2tuSCxpQkFBbUJULEVBQXNCbG5HLGNBQWMscUJBQzVEdmYsS0FBS21uSCxvQkFBc0JWLEVBQXNCbG5HLGNBQWMsa0JBQy9EdmYsS0FBS29uSCxrQkFBb0JYLEVBQXNCbG5HLGNBQWMsd0JBQzdEdmYsS0FBS3FuSCxvQkFBc0JaLEVBQXNCbG5HLGNBQWMsa0JBQy9EdmYsS0FBS3NuSCx1QkFBeUJiLEVBQXNCbG5HLGNBQWMsd0JBQ2xFdmYsS0FBS3VuSCwyQkFBNkJkLEVBQXNCbG5HLGNBQWMsdUJBQ3RFdmYsS0FBS3duSCx1QkFBeUJmLEVBQXNCbG5HLGNBQWMsK0JBR2xFdmYsS0FBS3NZLElBQU1xcEcsRUFFWDNoSCxLQUFLeW5ILGFBQWU5RixFQUFJOEYsYUFFeEJ6bkgsS0FBS29uSCxrQkFBa0I1Z0UsaUJBQWlCLFNBQVMsU0FBQWhtRCxHQUMvQyxHQUFLQSxFQUFFTSxPQUF1QnU4RyxRQUFRLGlCQUFrQixDQUN0RCxJQUFNcUssRUFBYWxuSCxFQUFFTSxPQUF1QnU4RyxRQUFRLGlCQUNuQixVQUE3QnFLLEVBQVV6TCxRQUFRbG5GLE9BQ3BCLEVBQUs0eUYsb0JBQW9CRCxFQUFVRSxlQUVuQyxFQUFLQyxzQkFBc0JILEVBQVVFLG1CQUszQzVuSCxLQUFLc25ILHVCQUF1QjlnRSxpQkFBaUIsU0FBUyxTQUFBaG1ELEdBQy9DQSxFQUFFTSxPQUF1QnU4RyxRQUFRLGtCQUNwQyxFQUFLeUssbUJBQW9CdG5ILEVBQUVNLE9BQXVCdThHLFFBQVEsaUJBQWlCdUssa0JBSS9FNW5ILEtBQUsrbkgsWUFBYy9uSCxLQUFLK25ILFlBQVk5b0gsS0FBS2UsTUFFekNBLEtBQUtnb0gsaUJBQW1CaG9ILEtBQUtnb0gsaUJBQWlCL29ILEtBQUtlLE1BQ25EQSxLQUFLNm1ILFVBQVV6SCxTQUFXcC9HLEtBQUtnb0gsaUJBbVJuQyxPQTVRRSxZQUFBQyxZQUFBLFNBQVl2RyxHQUVWMWhILEtBQUswbUgsZ0JBQWtCLEdBQ3ZCLEVBQVN6WCxVQUFVanZHLEtBQUtvbkgsbUJBQ3hCcG5ILEtBQUsybUgsYUFBZSxHQUNwQixFQUFTMVgsVUFBVWp2RyxLQUFLc25ILHdCQUN4QnRuSCxLQUFLcW5ILG9CQUFvQjNLLFVBQVV6bEYsSUFBSSxVQUN2Q2ozQixLQUFLdW5ILDJCQUEyQjdLLFVBQVV6bEYsSUFBSSxVQUM5QyxJQUFLLElBQUl4NUIsRUFBSSxFQUFHQSxFQUFJdUMsS0FBSyttSCxtQkFBbUJ2RyxTQUFTbmdILE9BQVE1QyxJQUMzRHVDLEtBQUsrbUgsbUJBQW1CdkcsU0FBUy9pSCxHQUFHaS9HLFVBQVV6bEYsSUFBSSxZQVNwRCxHQU5BajNCLEtBQUtnbkgsZUFBZTVKLFFBQVUsS0FDOUJwOUcsS0FBS2luSCxpQkFBaUI3SixRQUFVLEtBRWhDcDlHLEtBQUswaEgsWUFBY0EsRUFDbkIxaEgsS0FBS2tvSCxZQUFjbG9ILEtBQUt5bkgsYUFBYWxvRyxjQUFjLHdCQUEwQm1pRyxFQUFZeGhHLEdBQUssTUFFMUZ3aEcsRUFBWXlHLFFBQVV6RyxFQUFZbEgsWUFBYSxDQUNqRCxJQUFNLEVBQWtCLEdBQ2xCLEVBQW1CdHFHLE9BQU9nMUcsaUJBQWlCdk8sYUFHakQrSyxFQUFZbEgsWUFBWWhwRyxTQUFRLFNBQUEydkIsR0FDOUIsRUFBTTE5QixLQUFLLG9DQUNjMDlCLEVBQUtqaEIsR0FBRSxtRUFFZGloQixFQUFLZzJFLFVBQVMsbURBRWhCaDJFLEVBQUt3MUUsZUFBaUIsRUFBbUIsTUFBUXgxRSxFQUFLcWdGLGFBQVcsa0NBQ2pFcmdGLEVBQUt3MUUsYUFBWSxrRUFHYixVQUFkeDFFLEVBQUtpbkYsS0FaQyx3RUFDQyw0RkFXK0Isd0JBRzlDcG9ILEtBQUtvbkgsa0JBQWtCM0YsVUFBWSxFQUFNMzVHLEtBQUssSUFFOUM5SCxLQUFLbW5ILG9CQUFvQnpLLFVBQVVwN0YsT0FBTyxjQUUxQ3RoQixLQUFLbW5ILG9CQUFvQnpLLFVBQVV6bEYsSUFBSSxVQVMzQyxZQUFBK3dGLGlCQUFBLFNBQWlCeG5ILEdBQ2ZBLEVBQUVnK0YsaUJBQ0YsSUFBTW1ZLEVBQWlCbjJHLEVBQUVNLE9BQTJCeXBFLFNBQVMwMUMsVUFBVSxTQUE4QnZoSCxNQUNyRyxHQUFxQixLQUFqQmk0RyxHQUF3QjMyRyxLQUFLMm1ILGFBQWFyRCxTQUFTM00sU0FBNkZwdEcsSUFBNUV2SixLQUFLMGhILFlBQVlsSCxZQUFZOTFELE1BQUssU0FBQW5sRCxHQUFLLE9BQUFBLEVBQUVvM0csZUFBaUJBLEtBeUJoSTMyRyxLQUFLOG1ILGtCQUFrQnBLLFVBQVVwN0YsT0FBTyxVQUN4Q3BZLFFBQVE0TyxJQUFJLHlCQWhCWixHQVRBOVgsS0FBSzhtSCxrQkFBa0JwSyxVQUFVemxGLElBQUksVUFDckNqM0IsS0FBSzJtSCxhQUFhbGpILEtBQUtrekcsR0FDdkIzMkcsS0FBS3NuSCx1QkFBdUJlLG1CQUFtQixZQUFhLDZCQUN4QzFSLEVBQVksNkNBQ0VBLEVBQVksbUlBRzVDbjJHLEVBQUVNLE9BQTJCeXBFLFNBQVMwMUMsVUFBVSxTQUE4QnZoSCxNQUFRLEdBRXZELElBQTdCc0IsS0FBSzJtSCxhQUFhdG1ILFNBQ3BCTCxLQUFLcW5ILG9CQUFvQjNLLFVBQVVwN0YsT0FBTyxVQUMxQ3RoQixLQUFLdW5ILDJCQUEyQjdLLFVBQVVwN0YsT0FBTyxVQUNqRHRoQixLQUFLd25ILHVCQUF1QmMsU0FBVSxFQUVGLElBQWhDdG9ILEtBQUswbUgsZ0JBQWdCcm1ILFFBQWMsQ0FDckMsSUFBSyxJQUFJNUMsRUFBSSxFQUFHQSxFQUFJdUMsS0FBSyttSCxtQkFBbUJ2RyxTQUFTbmdILE9BQVE1QyxJQUMzRHVDLEtBQUsrbUgsbUJBQW1CdkcsU0FBUy9pSCxHQUFHaS9HLFVBQVVwN0YsT0FBTyxZQUd2RHRoQixLQUFLZ25ILGVBQWU1SixRQUFVcDlHLEtBQUsrbkgsWUFDbkMvbkgsS0FBS2luSCxpQkFBaUI3SixRQUFVcDlHLEtBQUtzWSxJQUFJaXdHLG1CQWNqRCxZQUFBVCxtQkFBQSxTQUFtQi8rRixHQUNqQixJQUFNeS9GLEVBQVl4b0gsS0FBSzJtSCxhQUFhbG1ILFFBQVFzb0IsRUFBUWt6RixRQUFRd00sT0FJNUQsR0FIQXpvSCxLQUFLMm1ILGFBQWFoa0csT0FBTzZsRyxFQUFXLEdBQ3BDei9GLEVBQVF6SCxTQUV5QixJQUE3QnRoQixLQUFLMm1ILGFBQWF0bUgsU0FDcEJMLEtBQUtxbkgsb0JBQW9CM0ssVUFBVXpsRixJQUFJLFVBQ3ZDajNCLEtBQUt1bkgsMkJBQTJCN0ssVUFBVXpsRixJQUFJLFVBQ1YsSUFBaENqM0IsS0FBSzBtSCxnQkFBZ0JybUgsUUFBYyxDQUNyQyxJQUFLLElBQUk1QyxFQUFJLEVBQUdBLEVBQUl1QyxLQUFLK21ILG1CQUFtQnZHLFNBQVNuZ0gsT0FBUTVDLElBQzNEdUMsS0FBSyttSCxtQkFBbUJ2RyxTQUFTL2lILEdBQUdpL0csVUFBVXpsRixJQUFJLFlBR3BEajNCLEtBQUtnbkgsZUFBZTVKLFFBQVUsS0FDOUJwOUcsS0FBS2luSCxpQkFBaUI3SixRQUFVLE9BVXRDLFlBQUF1SyxvQkFBQSxTQUFvQjUrRixHQUNsQi9vQixLQUFLMG1ILGdCQUFnQmpqSCxLQUFLc2xCLEVBQVFrekYsUUFBUXNGLFlBRTFDeDRGLEVBQVEyekYsVUFBVXpsRixJQUFJLGFBRXRCLElBQU15d0YsRUFBWTMrRixFQUFReEosY0FBYyxlQUl4QyxHQUhBbW9HLEVBQVVqRyxVQUFZLDRDQUN0QmlHLEVBQVV6TCxRQUFRbG5GLE9BQVMsVUFFTSxJQUE3Qi8wQixLQUFLMm1ILGFBQWF0bUgsUUFBZ0QsSUFBaENMLEtBQUswbUgsZ0JBQWdCcm1ILE9BQWMsQ0FDdkUsSUFBSyxJQUFJNUMsRUFBSSxFQUFHQSxFQUFJdUMsS0FBSyttSCxtQkFBbUJ2RyxTQUFTbmdILE9BQVE1QyxJQUMzRHVDLEtBQUsrbUgsbUJBQW1CdkcsU0FBUy9pSCxHQUFHaS9HLFVBQVVwN0YsT0FBTyxZQUd2RHRoQixLQUFLZ25ILGVBQWU1SixRQUFVcDlHLEtBQUsrbkgsWUFDbkMvbkgsS0FBS2luSCxpQkFBaUI3SixRQUFVcDlHLEtBQUtzWSxJQUFJaXdHLG1CQVM3QyxZQUFBVixzQkFBQSxTQUFzQjkrRixHQUVwQixJQUFNNU0sRUFBUW5jLEtBQUswbUgsZ0JBQWdCam1ILFFBQVFzb0IsRUFBUWt6RixRQUFRc0YsWUFDM0R2aEgsS0FBSzBtSCxnQkFBZ0IvakcsT0FBT3hHLEVBQU8sR0FFbkM0TSxFQUFRMnpGLFVBQVVwN0YsT0FBTyxhQUV6QixJQUFNb21HLEVBQVkzK0YsRUFBUXhKLGNBQWMsZUFJeEMsR0FIQW1vRyxFQUFVakcsVUFBWSwyQ0FDdEJpRyxFQUFVekwsUUFBUWxuRixPQUFTLFFBRVMsSUFBaEMvMEIsS0FBSzBtSCxnQkFBZ0JybUgsUUFBNkMsSUFBN0JMLEtBQUsybUgsYUFBYXRtSCxPQUFjLENBQ3ZFLElBQUssSUFBSTVDLEVBQUksRUFBR0EsRUFBSXVDLEtBQUsrbUgsbUJBQW1CdkcsU0FBU25nSCxPQUFRNUMsSUFDM0R1QyxLQUFLK21ILG1CQUFtQnZHLFNBQVMvaUgsR0FBR2kvRyxVQUFVemxGLElBQUksWUFHcERqM0IsS0FBS2duSCxlQUFlNUosUUFBVSxLQUM5QnA5RyxLQUFLaW5ILGlCQUFpQjdKLFFBQVUsT0E2QnBDLFlBQUFzTCxpQkFBQSxzQkFDUUMsRUFBb0YsR0FNMUYsT0FIQTNvSCxLQUFLMm1ILGFBQWFuMUcsU0FBUSxTQUFDaTNHLEVBQU9ockgsR0FDaENrckgsRUFBbUJsbEgsS0FBSyxFQUFJbWxILFVBQVUsRUFBS2xILFlBQVl4aEcsR0FBSXVvRyxFQUYvQyxJQUU4RGhySCxPQUVyRXNFLFFBQVF1VCxJQUFJcXpHLElBT3JCLFlBQUFFLG9CQUFBLHNCQUNRQyxFQUE2RCxHQUluRSxPQUhBOW9ILEtBQUswbUgsZ0JBQWdCbDFHLFNBQVEsU0FBQW9sRyxHQUMzQmtTLEVBQXNCcmxILEtBQUssRUFBSXNsSCxnQkFBZ0IsRUFBS3JILFlBQVl4aEcsR0FBSTAyRixPQUUvRDcwRyxRQUFRdVQsSUFBSXd6RyxJQU9mLFlBQUFmLFlBQU4sVyxnSEFDRS9uSCxLQUFLa25ILGlCQUFpQnhLLFVBQVVwN0YsT0FBTyxVQUNuQzBuRyxHQUFrQixFQUNsQkMsR0FBaUIsRUFFakJqcEgsS0FBSzBtSCxnQkFBZ0JybUgsT0FBUyxFQUNoQyxHQUFNTCxLQUFLNm9ILHNCQUFzQnJtSCxNQUFLLFNBQUEwbUgsR0FFcEMsRUFBS3hDLGdCQUFnQmwxRyxTQUFRLFNBQUFvbEcsR0FDM0IsSUFBTXo2RixFQUFRLEVBQUt1bEcsWUFBWWxILFlBQVlELFdBQVUsU0FBQWdILEdBQWMsT0FBQUEsRUFBV3JoRyxLQUFPMDJGLEtBQ3JGLEVBQUs4SyxZQUFZbEgsWUFBWTczRixPQUFPeEcsRUFBTyxTQUU1QyxTQUFBcXlGLEdBQ0R0bEcsUUFBUTRPLElBQUkwMkYsR0FDWnlhLEdBQWlCLE1BVGpCLE0sT0FDRixTLHdCQVlFanBILEtBQUsybUgsYUFBYXRtSCxPQUFTLEVBQzdCLEdBQU1MLEtBQUswb0gsbUJBQW1CbG1ILE1BQUssU0FBQTBtSCxHQUVqQ0EsRUFBTzEzRyxTQUFRLFNBQUNMLEVBQUsxVCxHQUNuQixFQUFLaWtILFlBQVlsSCxZQUFZLzJHLEtBQUssQ0FDaEN5YyxHQUFJL08sRUFBSTdPLE9BQU80ZCxHQUNmeTJGLGFBQWMsRUFBS2dRLGFBQWFscEgsR0FDaEMycUgsS0FBTWozRyxFQUFJN08sT0FBTzhsSCxLQUNqQjVHLFlBQWFyd0csRUFBSTdPLE9BQU9rL0csWUFDeEJySyxVQUFXaG1HLEVBQUk3TyxPQUFPNjBHLGVBR3RCLEVBQUtxUSx1QkFBdUJjLFNBQzlCLEVBQUlhLHdCQUF3Qmo1RyxPQUFPZzFHLGlCQUFpQjFELFlBQWEsRUFBS21GLGFBQWMsRUFBS2pGLFlBQVkxakgsS0FBTSxFQUFLMGpILFlBQVl4aEcsSUFJOUhoUSxPQUFPazVHLDhCQUNOLFNBQUE1YSxHQUNEdGxHLFFBQVE0TyxJQUFJMDJGLEdBQ1p3YSxHQUFrQixNQXBCbEIsTSxPQUNGLFMsd0JBdUJFQSxHQUFtQkMsR0FDdUIsSUFBeENqcEgsS0FBSzBoSCxZQUFZbEgsWUFBWW42RyxRQUMvQkwsS0FBSzBoSCxZQUFZeUcsUUFBUyxFQUN0Qm5vSCxLQUFLa29ILFlBQVkzb0csY0FBYyxnQkFDakN2ZixLQUFLa29ILFlBQVkzb0csY0FBYyxlQUFlK0IsV0FHaER0aEIsS0FBSzBoSCxZQUFZeUcsUUFBUyxFQUNyQm5vSCxLQUFLa29ILFlBQVkzb0csY0FBYyxnQkFDbEN2ZixLQUFLa29ILFlBQVlHLG1CQUFtQixhQUFjLGtFQUd0RHJvSCxLQUFLc1ksSUFBSSt3RyxZQUFZLFVBQVcsQ0FBQyx5Q0FBMEMsTUFFM0VycEgsS0FBS3NZLElBQUkrd0csWUFBWSxRQUFTLENBQUMsNERBRWpDcnBILEtBQUtrbkgsaUJBQWlCeEssVUFBVXpsRixJQUFJLFVBQ3BDajNCLEtBQUtzWSxJQUFJaXdHLG1CLFlBRWIsRUFwVkEsR0NZQSxhQU1FLHdCQUZBLEtBQUFlLGNBQXNDLEdBR3BDdHBILEtBQUt1cEgsaUJBQW1CbnFHLFNBQVNrZ0csZUFBZSxtQkFDaER0L0csS0FBS3dwSCx1QkFBeUJwcUcsU0FBU2tnRyxlQUFlLDBCQUN0RHQvRyxLQUFLeXBILGtCQUFvQnJxRyxTQUFTRyxjQUFjLGlEQUNoRHZmLEtBQUt1cEgsaUJBQWlCbk0sUUFBVSxXQUFNLFNBQUtvTSx1QkFBdUI5TSxVQUFVZ04sT0FBTyxTQUNuRjFwSCxLQUFLeXBILGtCQUFrQmpqRSxpQkFBaUIsU0FBUyxTQUFBaG1ELEdBQy9DLElBQU11b0IsRUFBV3ZvQixFQUFFTSxPQUF1QnU4RyxRQUFRLE1BQzlDdDBGLEdBQ0YsRUFBSzRnRyxpQkFBaUI1Z0csRUFBUWt6RixRQUFRLzdGLE9Bc0U5QyxPQWpERSxZQUFBMHBHLG9CQUFBLFNBQW9CbC9HLEdBQ2xCLElBQU1tL0csRUFBc0J6cUcsU0FBU3dCLGNBQWMsTUFDN0NrcEcsRUFBaUIsRUFBUzVaLFNBQ2hDMlosRUFBb0I1TixRQUFRLzdGLEdBQUs0cEcsRUFDakNELEVBQW9Cbk4sVUFBVXpsRixJQUFJLFdBQ2xDNHlGLEVBQW9CcEksVUFBWSxnREFDUy8yRyxFQUFLeXNHLFVBQVMsNkRBRTdDenNHLEVBQUt3c0csT0FBTSw4Q0FBOEN4c0csRUFBS3NzRyxZQUFXLHFCQUMxRXRzRyxFQUFLMHNHLEtBQUkscUJBRWxCcDNHLEtBQUt5cEgsa0JBQWtCTSxRQUFRRixHQUMvQjdwSCxLQUFLc3BILGNBQWM3bEgsS0FBSyxDQUFFeWMsR0FBSTRwRyxFQUFnQjlOLGVBQWdCNk4sRUFBcUJ4dkQsTUFBTyxVQUFXM3ZELEtBQU1BLElBRzNHMUssS0FBS3VwSCxpQkFBaUI3TSxVQUFVemxGLElBQUksV0FDRixJQUE5QmozQixLQUFLc3BILGNBQWNqcEgsUUFDckJMLEtBQUt3cEgsdUJBQXVCOU0sVUFBVXA3RixPQUFPLFVBVWpELFlBQUEwb0csb0JBQUEsU0FBb0JGLEdBQ2xCLElBQU0zdEcsRUFBUW5jLEtBQUtzcEgsY0FBYy9PLFdBQVUsU0FBQXI3RyxHQUFLLE9BQUFBLEVBQUVnaEIsS0FBTzRwRyxLQUN6RDlwSCxLQUFLc3BILGNBQWNudEcsR0FBTzYvRixlQUFlMTZGLFNBQ3pDdGhCLEtBQUtzcEgsY0FBYzNtRyxPQUFPeEcsRUFBTyxJQU9uQyxZQUFBd3RHLGlCQUFBLFNBQWlCRyxHQUNmLElBQU1HLEVBQWVqcUgsS0FBS3NwSCxjQUFjNWtFLE1BQUssU0FBQXhsRCxHQUFLLE9BQUFBLEVBQUVnaEIsS0FBTzRwRyxLQUMzREcsRUFBYTV2RCxNQUFRLE9BQ3JCNHZELEVBQWFqTyxlQUFlVSxVQUFVcDdGLE9BQU8sZ0JBR2UvWCxJQUF4RHZKLEtBQUtzcEgsY0FBYzVrRSxNQUFLLFNBQUF4bEQsR0FBSyxNQUFZLFlBQVpBLEVBQUVtN0QsVUFDakNyNkQsS0FBS3VwSCxpQkFBaUI3TSxVQUFVcDdGLE9BQU8sWUFLN0MsRUFwRkEsRyw2MENDZEEsYUFZRSxXQUFZNG9HLEVBQXFDdkksR0FBakQsV0FGQSxLQUFBd0ksZ0JBQWtCLElBQUk5K0MsT0FBTyxjQUczQnJyRSxLQUFLNG1ILGNBQWdCc0QsRUFDckJscUgsS0FBS29xSCxXQUFhRixFQUF1QjNxRyxjQUFjLFFBQ3ZEdmYsS0FBSytHLE1BQVFtakgsRUFBdUIzcUcsY0FBYyxrQ0FDbER2ZixLQUFLcXFILHNCQUF3QkgsRUFBdUIzcUcsY0FBYyxjQUNsRXZmLEtBQUtzcUgsVUFBWUosRUFBdUIzcUcsY0FBYyx1Q0FHdER2ZixLQUFLc1ksSUFBTXFwRyxFQUVYM2hILEtBQUt1cUgsY0FBZ0J2cUgsS0FBS3VxSCxjQUFjdHJILEtBQUtlLE1BQzdDQSxLQUFLb3FILFdBQVdoTCxTQUFXcC9HLEtBQUt1cUgsY0FFaEN2cUgsS0FBS3NxSCxVQUFVbE4sUUFBVSxTQUFBNThHLEdBQ3ZCQSxFQUFFZytGLGlCQUNGLEVBQUtnc0IsY0FBYyxJQUNuQjdJLEVBQUk0RyxvQkFpRFYsT0ExQ0UsWUFBQU4sWUFBQSxTQUFZd0MsR0FDVnpxSCxLQUFLeXFILGdCQUFrQkEsRUFDdkJ6cUgsS0FBS2tzQixVQUFZdStGLEVBQWdCeE8sUUFBUXlPLE9BQ3pDMXFILEtBQUsycUgsWUFBY0YsRUFBZ0J4TyxRQUFRaitHLEtBQzNDZ0MsS0FBS3FxSCxzQkFBc0IzTixVQUFVemxGLElBQUksVUFDekNqM0IsS0FBS3dxSCxjQUFjeHFILEtBQUsycUgsY0FHcEIsWUFBQUosY0FBTixTQUFvQi9wSCxHLHlHQUNsQkEsRUFBRWcrRixpQkFDdUIsS0FBckJ4K0YsS0FBSytHLE1BQU1ySSxPQUFnQnNCLEtBQUttcUgsZ0JBQWdCaDZHLEtBQUtuUSxLQUFLK0csTUFBTXJJLFFBQ2xFc0IsS0FBS3FxSCxzQkFBc0IzTixVQUFVcDdGLE9BQU8sVSxPQUQxQyxNLGNBRU90aEIsS0FBSytHLE1BQU1ySSxNQUFNbThGLFNBQVc3NkYsS0FBSzJxSCxZQUFqQyxPQUNUM3FILEtBQUt3cUgsY0FBYyxJQUNuQnhxSCxLQUFLc1ksSUFBSWl3RyxtQixjQUVUdm9ILEtBQUtxcUgsc0JBQXNCM04sVUFBVXpsRixJQUFJLFUsaUJBR2IsTyxzQkFBQSxHQUFNLEVBQUkyekYsV0FBVzVxSCxLQUFLa3NCLFVBQVdsc0IsS0FBSytHLE1BQU1ySSxNQUFNbThGLFMsY0FDL0MsT0FEM0Jnd0IsRUFBb0IsVUFDSnpqRCxRQUNwQnBuRSxLQUFLeXFILGdCQUFnQmxyRyxjQUFjLE1BQU0rOUYsVUFBWXVOLEVBQWtCdm9ILE9BQU90RSxLQUM5RWdDLEtBQUt5cUgsZ0JBQWdCeE8sUUFBUWorRyxLQUFPNnNILEVBQWtCdm9ILE9BQU90RSxLQUM3RGdDLEtBQUt3cUgsY0FBYyxJQUNuQnhxSCxLQUFLc1ksSUFBSWl3RyxtQkFDVHZvSCxLQUFLc1ksSUFBSSt3RyxZQUFZLFVBQVcsQ0FBQyxpQ0FBa0MsT0FFbkVycEgsS0FBS3NZLElBQUlpd0csbUJBQ1R2b0gsS0FBS3NZLElBQUkrd0csWUFBWSxRQUFTLENBQUMsK0NBQy9CbmdILFFBQVFwRixNQUFNLDRDQUE2QyttSCxJLCtCQUc3RDdxSCxLQUFLc1ksSUFBSWl3RyxtQkFDVHZvSCxLQUFLc1ksSUFBSSt3RyxZQUFZLFFBQVMsQ0FBQyw2Q0FBOEMsRUFBSS9tSCxPQUFPd0IsTUFBTWlDLFVBQzlGbUQsUUFBUXBGLE1BQU0sNENBQTZDLEcsK0JBS2pFLFlBQUEwbUgsY0FBQSxTQUFjOXJILEdBQ1pzQixLQUFLK0csTUFBTXJJLE1BQVFBLEdBRXZCLEVBN0VBLEdDV0EsYUFLRSx3QkFGQSxLQUFBb3NILFNBQVUsRUFHUjlxSCxLQUFLK3FILGNBQWdCM3JHLFNBQVN3QixjQUFjLE9BQzVDNWdCLEtBQUsrcUgsY0FBYzdxRyxHQUFLLGNBQ3hCbGdCLEtBQUtnckgsa0JBQW9CNXJHLFNBQVN3QixjQUFjLE1BQ2hENWdCLEtBQUsrcUgsY0FBYzlwRyxZQUFZamhCLEtBQUtnckgsbUJBQ3BDaHJILEtBQUsrcUgsY0FBY3BxRyxNQUFNOC9GLFFBQVUsT0FDbkN2d0csT0FBT3MyQyxpQkFBaUIsU0FBUyxXQUMzQixFQUFLc2tFLFNBQVMsRUFBS0csV0FBVyxXQUVwQy82RyxPQUFPczJDLGlCQUFpQixlQUFlLFNBQUFobUQsR0FDckNBLEVBQUVnK0YsaUJBQ0YsSUFBTTBzQixFQUFpQjFxSCxFQUFFTSxPQUF1QnU4RyxRQUFRLGlCQUNwRDZOLEdBQWlCQSxFQUFjNXJILGVBQWUsb0JBRWhELEVBQUs2ckgsWUFFTCxFQUFLQyxhQUFhRixFQUFjRyxpQkFFaEMsRUFBS0MsWUFBWTlxSCxFQUFFMDlGLE1BQU8xOUYsRUFBRXk5RixRQUNuQixFQUFLNnNCLFNBQ2QsRUFBS0csV0FBVyxXQUdwQi82RyxPQUFPa1AsU0FBUzFjLEtBQUt1ZSxZQUFZamhCLEtBQUsrcUgsZUEwQzFDLE9BcENFLFlBQUFFLFdBQUEsU0FBV00sR0FDVHZySCxLQUFLK3FILGNBQWNwcUcsTUFBTTgvRixRQUFzQixTQUFaOEssRUFBcUIsUUFBVSxPQUNsRXZySCxLQUFLOHFILFNBQVc5cUgsS0FBSzhxSCxTQU12QixZQUFBUSxZQUFBLFNBQVlFLEVBQWFyaEcsR0FDdkJucUIsS0FBSytxSCxjQUFjcHFHLE1BQU13SixLQUFVQSxFQUFJLEtBQ3ZDbnFCLEtBQUsrcUgsY0FBY3BxRyxNQUFNNnFHLElBQVNBLEVBQUcsS0FDckN4ckgsS0FBS2lySCxXQUFXLFNBTWxCLFlBQUFFLFVBQUEsV0FDRW5ySCxLQUFLZ3JILGtCQUFrQnJwRyxXQUFXblEsU0FBUSxTQUFDbXRHLEdBQXFCLE9BQUFBLEVBQUl2QixRQUFVLFFBQzlFLEVBQVNuTyxVQUFVanZHLEtBQUtnckgsb0JBTTFCLFlBQUFJLGFBQUEsU0FBYUMsR0FFWCxJQURBLElBQU1JLEVBQWlCLElBQUlDLGlCQUNsQmp1SCxFQUFJLEVBQUdBLEVBQUk0dEgsRUFBZ0JockgsT0FBUTVDLElBQUssQ0FDL0MsSUFBTXdpQixFQUFPYixTQUFTd0IsY0FBYyxNQUNwQ1gsRUFBS3E5RixVQUFZK04sRUFBZ0I1dEgsR0FBR08sS0FDcENpaUIsRUFBS205RixRQUFVaU8sRUFBZ0I1dEgsR0FBR3MzQixPQUNsQzAyRixFQUFleHFHLFlBQVloQixHQUU3QmpnQixLQUFLZ3JILGtCQUFrQi9wRyxZQUFZd3FHLElBR3ZDLEVBdEVBLEdDVEEsRUFHRSxTQUFZL0osRUFBMEJwcEcsR0FBdEMsV0FDRXRZLEtBQUsrcUgsY0FBZ0IzckcsU0FBU3dCLGNBQWMsVUFFckIsYUFBbkI4Z0csRUFBWXhoRyxJQUNkbGdCLEtBQUsrcUgsY0FBY3JPLFVBQVV6bEYsSUFBSSxVQUVuQ2ozQixLQUFLK3FILGNBQWM5TyxRQUFReU8sT0FBU2hKLEVBQVl4aEcsR0FDaERsZ0IsS0FBSytxSCxjQUFjOU8sUUFBUWorRyxLQUFPMGpILEVBQVkxakgsS0FDOUNnQyxLQUFLK3FILGNBQWNyTyxVQUFVemxGLElBQUksZUFDakMsSUFBSTAwRixFQUFrQixHQUNsQmpLLEVBQVl5RyxRQUNkd0QsRUFBZ0Jsb0gsS0FBSyw0REFFbkJpK0csRUFBWXZILFFBQ2R3UixFQUFnQmxvSCxLQUFLLDBEQUEwRGkrRyxFQUFZdkgsUUFBTyxNQUVsR3dSLEVBQWdCbG9ILEtBQUssZ1JBRXZCa29ILEVBQWdCbG9ILEtBQUssT0FBT2krRyxFQUFZMWpILEtBQUksU0FDNUNnQyxLQUFLK3FILGNBQWN0SixVQUFZa0ssRUFBZ0I3akgsS0FBSyxJQUdwRDlILEtBQUsrcUgsY0FBYzlPLFFBQVEyUCxPQUFTLEdBR3BDNXJILEtBQUsrcUgsY0FBY00sZ0JBQWtCLENBQ25DLENBQ0VydEgsS0FBTSxTQUNOKzJCLE9BQVEsV0FDTnpjLEVBQUl1ekcsbUJBQW1CLFNBQVUsdUNBQXVDbkssRUFBWTFqSCxLQUFJLFlBQWEsQ0FDbkcsQ0FDRUEsS0FBTSxTQUNOOHRILFNBQVUsV0FDUnh6RyxFQUFJdXpHLG1CQUFtQixTQUFVLFlBQVluSyxFQUFZMWpILEtBQUksYUFDN0QsRUFBSSt0SCxXQUFXckssRUFBWXhoRyxJQUFJMWQsTUFBSyxTQUFBMk8sR0FDbEMsRUFBSzQ1RyxjQUFjenBHLFNBQ25CLElBQU0wcUcsRUFBWTF6RyxFQUFJMC9GLGFBQWF1QyxXQUFVLFNBQUF0QyxHQUFRLE9BQUFBLEVBQUsvM0YsS0FBT3doRyxFQUFZeGhHLE1BQzdFNUgsRUFBSTAvRixhQUFhcjFGLE9BQU9xcEcsRUFBVyxHQUVuQzF6RyxFQUFJMnpHLHNCQUNKM3pHLEVBQUkrd0csWUFBWSxVQUFXLENBQUMsb0NBQzNCLFNBQUF2NkcsR0FDRHdKLEVBQUkyekcsc0JBQ0ozekcsRUFBSSt3RyxZQUFZLFFBQVMsQ0FBQyw2Q0FBOEN2NkcsRUFBSXhNLE9BQU93QixNQUFNaUMsZUFJL0YsQ0FDRS9ILEtBQU0sU0FDTjh0SCxTQUFVLFdBQ1J4ekcsRUFBSTJ6Ryw0QkFNZCxDQUNFanVILEtBQU0sZ0JBQ04rMkIsT0FBUSxXQUNOemMsRUFBSTR6RyxtQkFBbUJqRSxZQUFZdkcsR0FDbkNwcEcsRUFBSTZ6RyxnQkFBZ0I3ekcsRUFBSTR6RyxtQkFBbUJ0RixlQUMzQ3R1RyxFQUFJOHpHLHFCQUFxQjFQLFVBQVV6bEYsSUFBSSxxQkFHM0MsQ0FDRWo1QixLQUFNLFNBQ04rMkIsT0FBUSxXQUNOemMsRUFBSSt6RyxvQkFBb0JwRSxZQUFZLEVBQUs4QyxlQUN6Q3p5RyxFQUFJNnpHLGdCQUFnQjd6RyxFQUFJK3pHLG9CQUFvQnpGLG1CLDYwQ0MzRHRELGFBa0RFLHdCQUNFNW1ILEtBQUtzc0gsa0JBQW9CbHRHLFNBQVNrZ0csZUFBZSxhQUNqRHQvRyxLQUFLMmlILG9CQUFzQnZqRyxTQUFTa2dHLGVBQWUsY0FDbkR0L0csS0FBSzhoSCxnQkFBa0IxaUcsU0FBU2tnRyxlQUFlLG1CQUMvQ3QvRyxLQUFLK2hILGFBQWUzaUcsU0FBU2tnRyxlQUFlLGdCQUM1Q3QvRyxLQUFLa2lILGtCQUFvQjlpRyxTQUFTa2dHLGVBQWUscUJBRWpEdC9HLEtBQUtvc0gscUJBQXVCaHRHLFNBQVNrZ0csZUFBZSx3QkFDcER0L0csS0FBS3VzSCxtQkFBcUJ2c0gsS0FBS29zSCxxQkFBcUI3c0csY0FBYyxrQkFDbEV2ZixLQUFLd3NILG9CQUFzQnB0RyxTQUFTa2dHLGVBQWUsdUJBQ25EdC9HLEtBQUt5c0gsY0FBZ0JydEcsU0FBU2tnRyxlQUFlLGlCQUM3Q3QvRyxLQUFLdW9ILGlCQUFtQnZvSCxLQUFLdW9ILGlCQUFpQnRwSCxLQUFLZSxNQUNuREEsS0FBS3lzSCxjQUFjclAsUUFBVXA5RyxLQUFLdW9ILGlCQUVsQ3ZvSCxLQUFLMHNILGdCQUFrQnR0RyxTQUFTa2dHLGVBQWUsbUJBRS9DdC9HLEtBQUsyc0gsc0JBQXdCdnRHLFNBQVNrZ0csZUFBZSx5QkFDckR0L0csS0FBS3luSCxhQUFlcm9HLFNBQVNrZ0csZUFBZSxnQkFDNUN0L0csS0FBSzRzSCxxQkFBdUJ4dEcsU0FBU2tnRyxlQUFlLHdCQUVwRHQvRyxLQUFLazhHLGNBQWdCOThGLFNBQVNrZ0csZUFBZSxpQkFFN0N0L0csS0FBS2dpSCxRQUFVNWlHLFNBQVNrZ0csZUFBZSxXQUN2Q3QvRyxLQUFLNnNILGlCQUFtQjdzSCxLQUFLNnNILGlCQUFpQjV0SCxLQUFLZSxNQUNuREEsS0FBS2dpSCxRQUFRNUUsUUFBVXA5RyxLQUFLNnNILGlCQUU1QjdzSCxLQUFLOHNILGtCQUFvQjlzSCxLQUFLOHNILGtCQUFrQjd0SCxLQUFLZSxNQUNyREEsS0FBSzhoSCxnQkFBZ0IxRSxRQUFVLFdBQ2EsU0FBdEMsRUFBSzBFLGdCQUFnQjdGLFFBQVEvL0UsS0FDL0IsRUFBSzR3RixvQkFDMEMsVUFBdEMsRUFBS2hMLGdCQUFnQjdGLFFBQVEvL0UsTUFDdEMsRUFBSzZ3RixvQkFHVC9zSCxLQUFLNHNILHFCQUFxQnBtRSxpQkFBaUIsUUFBU3htRCxLQUFLOHNILG1CQUN6RDlzSCxLQUFLZ3RILFlBQWNodEgsS0FBS2d0SCxZQUFZL3RILEtBQUtlLE1BQ3pDQSxLQUFLeW5ILGFBQWFqaEUsaUJBQWlCLFFBQVN4bUQsS0FBS2d0SCxhQUVqRGh0SCxLQUFLaXRILGVBQWlCN3RHLFNBQVNrZ0csZUFBZSxrQkFDOUN0L0csS0FBS2t0SCxVQUFZOXRHLFNBQVNrZ0csZUFBZSxhQUN6Q3QvRyxLQUFLbXRILGNBQWdCbnRILEtBQUtpdEgsZUFBZTF0RyxjQUFjLHlCQUV2REgsU0FBU2tnRyxlQUFlLGlCQUFpQjk0RCxpQkFBaUIsU0FBUyxXQUNqRSxFQUFLMmxFLGdCQUFnQixFQUFLYyxnQkFDMUIsRUFBS2IscUJBQXFCMVAsVUFBVXpsRixJQUFJLHNCQVExQ2ozQixLQUFLa3RILFVBQVUxbUUsaUJBQWlCLFVBQVUsV0FDcEMsRUFBSzBtRSxVQUFVdlgsTUFBTXQxRyxPQUFTLEdBQ2hDLEVBQUs2c0gsVUFBVUUsbUJBQW1CM0wsVUFBWSxFQUFLeUwsVUFBVXZYLE1BQU0sR0FBRzMzRyxLQUN0RSxFQUFLbXZILGNBQWN6USxVQUFVcDdGLE9BQU8sY0FFcEMsRUFBSzRyRyxVQUFVRSxtQkFBbUIzTCxVQUFZLGdCQUM5QyxFQUFLMEwsY0FBY3pRLFVBQVV6bEYsSUFBSSxnQkFJckNqM0IsS0FBS2l0SCxlQUFlN04sU0FBVyxTQUFBNStHLEdBQzdCQSxFQUFFZytGLGlCQUVGcC9FLFNBQVNrZ0csZUFBZSxlQUFlMytGLE1BQU04L0YsUUFBVSxRQUN2RCxFQUFLME0sY0FBY3pRLFVBQVV6bEYsSUFBSSxZQUNqQyxFQUFLazJGLGNBQWMxTCxVQUFZLGlCQUM5QixFQUFLeUwsVUFBVUUsbUJBQW1DenNHLE1BQU04L0YsUUFBVSxPQUNuRSxJQUFNbFMsRUFBUy90RyxFQUFFTSxPQUEyQnlwRSxTQUFTMDFDLFVBQVUsUUFBNkJ0SyxNQUFNLEdBRWxHLEVBQUkwWCxjQUFjOWUsRUFBTSxFQUFNLEVBQUsrSSxxQkFBcUI5MEcsTUFBSyxTQUFDMk8sR0FDNUQsRUFBS204RyxtQkFBbUJuOEcsR0FDeEIsRUFBS28zRyxtQkFDTCxFQUFLYyxZQUFZLFVBQVcsQ0FBQyxtQ0FDN0IsRUFBSzZELFVBQVV4dUgsTUFBUSxHQUV2QjBnQixTQUFTa2dHLGVBQWUsZUFBZTMrRixNQUFNOC9GLFFBQVUsT0FDdkQsRUFBS3lNLFVBQVVFLG1CQUFtQjNMLFVBQVksZ0JBQzlDLEVBQUswTCxjQUFjMUwsVUFBWSxTQUM5QixFQUFLeUwsVUFBVUUsbUJBQW1DenNHLE1BQU04L0YsUUFBVSxXQUNsRSxTQUFBM3hHLEdBQ0QsRUFBS3k1RyxtQkFDTCxFQUFLK0UsbUJBQW1CLEVBQUtoVyxxQkFDN0JwdUcsUUFBUXBGLE1BQU1nTCxPQUlsQjlPLEtBQUtxc0gsb0JBQXNCLElBQUksRUFBY2p0RyxTQUFTa2dHLGVBQWUscUJBQXNCdC9HLE1BRTNGQSxLQUFLa3NILG1CQUFxQixJQUFJLEVBQWE5c0csU0FBU2tnRyxlQUFlLHNCQUF1QnQvRyxNQUUxRkEsS0FBS3V0SCxpQkFBbUJudUcsU0FBU2tnRyxlQUFlLG9CQUNoRHQvRyxLQUFLd3RILGFBQWV4dEgsS0FBS3d0SCxhQUFhdnVILEtBQUtlLE1BQzNDQSxLQUFLdXRILGlCQUFpQmh1RyxjQUFjLFVBQVU2OUYsUUFBVXA5RyxLQUFLd3RILGFBRTdEdDlHLE9BQU91OUcsU0FBV3p0SCxLQUFLMHRILFlBR3ZCdHVHLFNBQVNrZ0csZUFBZSxVQUFVOTRELGlCQUFpQixTQUFTLFNBQUNobUQsR0FBTSxTQUFLbXRILGlCQUFpQi9LLFlBQVlwaUgsRUFBRyxFQUFpQix1QkFDekg0ZSxTQUFTa2dHLGVBQWUsVUFBVTk0RCxpQkFBaUIsU0FBUyxTQUFDaG1ELEdBQU0sU0FBS210SCxpQkFBaUIvSyxZQUFZcGlILEVBQUcsRUFBWSxtQkFFcEhSLEtBQUs0dEgscUJBQXVCLElBQUksRUFFaEM1dEgsS0FBSzZ0SCxZQUFjLElBQUksRUEyYjNCLE9BbmJRLFlBQUFDLFlBQU4sU0FBa0JDLEcsWUFBQSxJQUFBQSxNQUFBLEksZ0dBQ1osRUFBUzFkLGNBQWMwZCxHQUNMLEdBQU0sRUFBSUMsZUFENUIsTSxjQUNJQyxFQUFjLFNBQ3BCanVILEtBQUsrdEgsU0FBV3JpSCxLQUFLQyxNQUFNc2lILEVBQVl2ckgsTUFBTXkrQixLLGFBRTdDbmhDLEtBQUsrdEgsU0FBV0EsRSx3QkFFbEIvdEgsS0FBS3NzSCxrQkFBa0I3SyxVQUFZLG9CQUN0QnpoSCxLQUFLK3RILFNBQVM1VyxVQUFTLGtDQUV4Qm4zRyxLQUFLK3RILFNBQVN2TSxZQUFXLDhCQUE4QnhoSCxLQUFLK3RILFNBQVNwWCxhQUFZLHlCLFlBVXpGLFlBQUFrVyxpQkFBTixXLGtJQUNNN3NILEtBQUsydEgsa0JBQW9CM3RILEtBQUsydEgsaUJBQWlCMUssd0JBQ2pEampILEtBQUtpakgsd0JBQXlCLEVBQzlCampILEtBQUtnaUgsUUFBUXRGLFVBQVVwN0YsT0FBTyxXQUM5QnRoQixLQUFLZ2lILFFBQVF0RixVQUFVemxGLElBQUksWUFDdkJpM0YsT0FBZ0IsRUFFZCxFQUF1QixHQUM3Qmx1SCxLQUFLMnRILGlCQUFpQnZTLFNBQVM1cEcsU0FBUSxTQUFBd3ZHLEdBQ3JDLEVBQVd2OUcsS0FBSyxDQUNkazRHLFlBQWFxRixFQUFRckYsWUFDckI1OEYsUUFBU2lpRyxFQUFRamlHLFFBQ2pCNjhGLFNBQVVvRixFQUFRcEYsY0FHaEJ1UyxFQUFpQnppSCxLQUFLc0csVUFBVSxHQUVqQ2hTLEtBQUsydEgsaUJBQWlCclMsZUFBdkIsTUFDOEIsR0FBTSxFQUFJNUMsV0FBV3lWLEVBQWdCLG1CQUFvQixnQkFBaUJudUgsS0FBSzJ0SCxpQkFBaUJ6aEcsYUFqQmhJLE8sWUFpQk1raUcsRUFBMEIsVUFDSjdYLElBQXlDLE1BQW5DNlgsRUFBd0JobkQsT0FBdEQsWSxpQkFHc0IsTyxzQkFEaEJ3eEMsRUFBVSxJQUFJQyxZQUFZLFNBQ1YsR0FBTXVWLEVBQXdCMXJILEtBQUtxMkcsWUFBWUMsUSxjQUFqRSxFQUFrQixTQUFoQnQ2RyxFQUFLLFFBQU0sT0FDWHdoQixFQUFLeFUsS0FBS0MsTUFBTWl0RyxFQUFRaHRHLE9BQU9sTixJQUFRd2hCLEdBRTdDbGdCLEtBQUsydEgsaUJBQWlCclMsZUFBaUJwN0YsRUFDdkNndUcsR0FBbUIsRSwrQkFFbkJobEgsUUFBUTRPLElBQUksaURBQWtELEcsZ0NBR2hFbzJHLEdBQW1CLEUscUNBS1MsU0FBTSxFQUFJRyxrQkFBa0JGLEVBQWdCLG1CQUFvQm51SCxLQUFLMnRILGlCQUFpQnJTLGlCLFFBQTlHZ1QsRUFBd0IsVUFDSi9YLElBQXVDLE1BQWpDK1gsRUFBc0JsbkQsU0FDcEQ4bUQsR0FBbUIsRywwQkFJbkJBLEdBQW9CbHVILEtBQUsydEgsaUJBQWlCbkksMkJBQTJCbmxILE9BQVMsR0FDMUUsRUFBNkMsR0FDbkRMLEtBQUsydEgsaUJBQWlCbkksMkJBQTJCaDBHLFNBQVEsU0FBQ3RTLEdBQ3hELElBQU1xdkgsRUFBc0IsRUFBSUMsaUJBQWlCdHZILEVBQUUrM0csT0FBUS8zRyxFQUFFdW1ILFNBQVV2bUgsRUFBRXdtSCxVQUFXeG1ILEVBQUV5bUgsWUFBYXptSCxFQUFFODNHLFlBQWE5M0csRUFBRWd0QixXQUNwSCxFQUFzQnpvQixLQUFLOHFILE1BRTdCLEdBQU14c0gsUUFBUXVULElBQUksR0FBdUI5UyxNQUFLLFNBQUFzMkcsR0FDNUM1dkcsUUFBUTRPLElBQUksK0JBQ1osRUFBSzYxRyxpQkFBaUJuSSwyQkFBMkJubEgsT0FBUyxLQUV6RCxTQUFBeU8sR0FDRDVGLFFBQVFtQyxLQUFLLCtCQUFpQ3lELFFBWDlDLE8sUUFNRixTLG1CQVFFby9HLEdBQ0ZsdUgsS0FBS2dpSCxRQUFRdEYsVUFBVXA3RixPQUFPLFlBQzlCdGhCLEtBQUtnaUgsUUFBUXRGLFVBQVV6bEYsSUFBSSxZQUMzQi90QixRQUFRNE8sSUFBSSw4QkFFWjlYLEtBQUtpakgsd0JBQXlCLEVBQzlCampILEtBQUtnaUgsUUFBUXRGLFVBQVVwN0YsT0FBTyxZQUM5QnRoQixLQUFLZ2lILFFBQVF0RixVQUFVemxGLElBQUksV0FDM0JqM0IsS0FBS3FwSCxZQUFZLFFBQVMsQ0FBQyxzREFDM0JuZ0gsUUFBUXBGLE1BQU0sc0QscUNBWXBCLFlBQUFrcEgsWUFBQSxTQUFZeHNILEdBQVosV0FDUTBuSCxFQUFlMW5ILEVBQUVNLE9BQXVCdThHLFFBQVEsa0JBQ2xDLE9BQWhCNkssSUFJQWxvSCxLQUFLMnRILGtCQUFvQjN0SCxLQUFLMnRILGlCQUFpQnpoRyxZQUFjZzhGLEVBQVlqTSxRQUFReU8sU0FLakYxcUgsS0FBS3MzRyxxQkFBdUI0USxFQUFZak0sUUFBUXlPLFNBQVcxcUgsS0FBS3MzRyxvQkFBb0JwM0YsSUFDbEQsYUFBaENsZ0IsS0FBS3MzRyxvQkFBb0JwM0YsSUFDM0JoWCxRQUFRNE8sSUFBSSw4R0FFZDlYLEtBQUt5dUgsWUFBWXp1SCxLQUFLczNHLHFCQUNsQnQzRyxLQUFLMHVILG9CQUNQMXVILEtBQUswdUgsbUJBQW1CaFMsVUFBVXA3RixPQUFPLFdBRTNDNG1HLEVBQVl4TCxVQUFVemxGLElBQUksV0FDMUJqM0IsS0FBSzB1SCxtQkFBcUJ4RyxFQUMxQmxvSCxLQUFLOGhILGdCQUFnQm5oRyxNQUFNOC9GLFFBQVUsVUFFckN6Z0gsS0FBSzZySCxtQkFBbUIsU0FBVSxtQkFBbUIzRCxFQUFZak0sUUFBUWorRyxNQUN6RSxFQUFJMndILGFBQWF6RyxFQUFZak0sUUFBUXlPLE9BQVExcUgsTUFDMUN3QyxNQUFLLFNBQUEyTyxHQUNKLEVBQUtzOUcsWUFBWXQ5RyxHQUNiLEVBQUt1OUcsb0JBQ1AsRUFBS0EsbUJBQW1CaFMsVUFBVXA3RixPQUFPLFdBRTNDNG1HLEVBQVl4TCxVQUFVemxGLElBQUksV0FDMUIsRUFBS3kzRixtQkFBcUJ4RyxFQUMxQixFQUFLcEcsZ0JBQWdCbmhHLE1BQU04L0YsUUFBVSxRQUNyQyxFQUFLd0wseUJBQ0osU0FBQW45RyxHQUNENUYsUUFBUTRPLElBQUloSixVQVFwQixZQUFBMi9HLFlBQUEsU0FBWUcsR0FDTjV1SCxLQUFLMnRILGtCQUNQM3RILEtBQUsydEgsaUJBQWlCNS9HLFFBRXhCL04sS0FBSzJ0SCxpQkFBbUIsSUFBSSxFQUFVaUIsRUFBUzV1SCxNQUMvQ0EsS0FBSzJzSCxzQkFBc0Joc0csTUFBTTgvRixRQUFVLE9BQzNDb08sUUFBUUMsYUFBYSxDQUFFQyxhQUFjSCxFQUFRNXdILE1BQVE0d0gsRUFBUTV3SCxLQUFNLE9BQVM0d0gsRUFBUTF1RyxLQU90RixZQUFBNHNHLGtCQUFBLFdBQ0U5c0gsS0FBSzJzSCxzQkFBc0Joc0csTUFBTTgvRixRQUFVLE9BQzNDemdILEtBQUsraEgsYUFBYXBoRyxNQUFNOC9GLFFBQVUsUUFDbEN6Z0gsS0FBS2tpSCxrQkFBa0J2aEcsTUFBTTgvRixRQUFVLE9BQ3ZDemdILEtBQUs4aEgsZ0JBQWdCN0YsUUFBUS8vRSxLQUFPLFNBT3RDLFlBQUE2d0YsaUJBQUEsMkJBQ2dDeGpILElBQTFCdkosS0FBSzJ0SCxpQkFDUDN0SCxLQUFLNHNILHFCQUFxQmxRLFVBQVV6bEYsSUFBSSxVQUV4Q2ozQixLQUFLNHNILHFCQUFxQmxRLFVBQVVwN0YsT0FBTyxVQUU3Q3RoQixLQUFLMnNILHNCQUFzQmhzRyxNQUFNOC9GLFFBQVUsUUFDM0N6Z0gsS0FBSzhoSCxnQkFBZ0I3RixRQUFRLy9FLEtBQU8sT0FFcENsOEIsS0FBSytoSCxhQUFhcGhHLE1BQU04L0YsUUFBVSxPQUNsQ3pnSCxLQUFLa2lILGtCQUFrQnZoRyxNQUFNOC9GLFFBQVUsYUFFYmwzRyxJQUF0QnZKLEtBQUtnNEcsY0FBOEJoNEcsS0FBS2c0RyxhQUFhMzNHLFFBQVUsS0FDakVMLEtBQUs2ckgsbUJBQW1CLFNBQVUsb0JBQ2xDLEVBQUltRCxpQkFBaUJodkgsTUFBTXdDLE1BQUssU0FBQzJPLEdBQy9CLEVBQUs4OUcsdUJBQXVCOTlHLEdBRTVCLEVBQUtzMkcsYUFBYTlsRyxXQUFXblEsU0FBUSxTQUFDeW1HLEdBQ2hDQSxFQUFLZ0UsU0FBV2hFLEVBQUtnRSxRQUFReU8sU0FBVyxFQUFLaUQsaUJBQWlCemhHLFlBQ2hFK3JGLEVBQUt5RSxVQUFVemxGLElBQUksV0FDbkIsRUFBS3kzRixtQkFBcUJ6VyxNQUc5QixFQUFLZ1UseUJBQ0osU0FBQXpkLEdBQ0QsRUFBS2laLGFBQWFoRyxVQUFZLDhEQUM5QixFQUFLd0ssMkJBUVgsWUFBQWdELHVCQUFBLFNBQXVCalgsR0FBdkIsV0FDRUEsRUFBYXhtRyxTQUFRLFNBQUEwOUcsR0FDbkIsSUFBTWhILEVBQWMsSUFBSSxFQUFZZ0gsRUFBVSxHQUM5QyxFQUFLekgsYUFBYXhtRyxZQUFZaW5HLEVBQVk2QyxrQkFFNUMvcUgsS0FBSzB0SCxlQU1QLFlBQUFBLFlBQUEsV0FDRSxJQUFNeUIsRUFBU3ZvRyxPQUFPd29HLGlCQUFpQnB2SCxLQUFLeW5ILGNBQWM0SCxpQkFBaUIsY0FDckVDLEVBQWF0dkgsS0FBS3luSCxhQUFhakgsU0FBU25nSCxPQUM5Q0wsS0FBS3luSCxhQUFhOW1HLE1BQU0rOEYsWUFBWSxxQkFBdUI5c0csS0FBSzIrRyxLQUFLRCxFQUFhSCxHQUFVQSxFQUFVRyxHQUFZOWpILGFBTXBILFlBQUE4aEgsbUJBQUEsU0FBbUI0QixHQUVibHZILEtBQUtnNEcsYUFBYTMzRyxRQUFVLEdBQzlCTCxLQUFLeW5ILGFBQWFsb0csY0FBYyxjQUFjK0IsU0FFaEQsSUFBTTRtRyxFQUFjLElBQUksRUFBWWdILEVBQVVsdkgsTUFDOUNBLEtBQUt5bkgsYUFBYXNDLFFBQVE3QixFQUFZNkMsZUFDdEMvcUgsS0FBSzB0SCxlQWVQLFlBQUFyRSxZQUFBLFNBQVl2MkcsRUFBYy9NLEVBQW1CeXBILEdBQTdDLFdBYUUsWUFiMkMsSUFBQUEsV0FBQSxHQUVBLEtBQXZDeHZILEtBQUt1dEgsaUJBQWlCdFIsUUFBUW5wRyxNQUNoQzlTLEtBQUt1dEgsaUJBQWlCN1EsVUFBVXA3RixPQUFPdGhCLEtBQUt1dEgsaUJBQWlCdFIsUUFBUW5wRyxNQUNqRTlTLEtBQUt5dkgsaUJBQ1B2L0csT0FBTzBnQixhQUFhNXdCLEtBQUt5dkgsZ0JBQ3pCenZILEtBQUt5dkgsb0JBQWlCbG1ILElBR3hCdkosS0FBS3V0SCxpQkFBaUI1c0csTUFBTTgvRixRQUFVLE9BRXhDemdILEtBQUt1dEgsaUJBQWlCdFIsUUFBUW5wRyxLQUFPQSxFQUNyQzlTLEtBQUt1dEgsaUJBQWlCaHVHLGNBQWMsb0JBQW9Ca2lHLFVBQVkxN0csRUFBUWtMLEtBQUksU0FBQXBULEdBQUssWUFBTUEsRUFBQyxVQUFRaUssS0FBSyxJQUNqR2dMLEdBQ04sSUFBSyxVQUNIOVMsS0FBS3V0SCxpQkFBaUI3USxVQUFVemxGLElBQUksV0FDcEMsTUFDRixJQUFLLFVBQ0hqM0IsS0FBS3V0SCxpQkFBaUI3USxVQUFVemxGLElBQUksV0FDcEMsTUFDRixJQUFLLFFBQ0hqM0IsS0FBS3V0SCxpQkFBaUI3USxVQUFVemxGLElBQUksU0FHcEN1NEYsSUFDRnh2SCxLQUFLeXZILGVBQWlCdi9HLE9BQU9xZ0IsWUFBVyxXQUFNLFNBQUtpOUYsaUJBQWdCZ0MsS0FPdkUsWUFBQWhDLGFBQUEsV0FDRXh0SCxLQUFLdXRILGlCQUFpQjVzRyxNQUFNOC9GLFFBQVUsT0FDdEN6Z0gsS0FBS3V0SCxpQkFBaUI3USxVQUFVcDdGLE9BQU90aEIsS0FBS3V0SCxpQkFBaUJ0UixRQUFRbnBHLE1BQ3JFOVMsS0FBS3V0SCxpQkFBaUJ0UixRQUFRbnBHLEtBQU8sR0FDakM5UyxLQUFLeXZILGlCQUNQNytGLGFBQWE1d0IsS0FBS3l2SCxnQkFDbEJ6dkgsS0FBS3l2SCxvQkFBaUJsbUgsSUFjMUIsWUFBQXNpSCxtQkFBQSxTQUFtQi80RyxFQUF1Qy9NLEVBQWlCMnBILFFBQUEsSUFBQUEsTUFBQSxJQUNyRTF2SCxLQUFLMHNILGdCQUFnQm50RyxjQUFjLG9CQUNyQ3ZmLEtBQUswc0gsZ0JBQWdCaUQsaUJBQWlCLDRCQUE0Qm4rRyxTQUFRLFNBQUNtdEcsR0FBcUIsT0FBQUEsRUFBSXZCLFFBQVUsUUFFaEgsRUFBU25PLFVBQVVqdkcsS0FBSzBzSCxpQkFFeEIsSUFBTWtELEVBQWlCeHdHLFNBQVN3QixjQUFjLE9BQzlDLEdBQWEsV0FBVDlOLEVBQ0Y4OEcsRUFBZW5PLFVBQVksTUFBTTE3RyxFQUFPLGlFQUNuQyxHQUFhLFdBQVQrTSxHQUFxQjQ4RyxFQUFRcnZILE9BQVMsRUFBRyxDQUNsRHV2SCxFQUFlbk8sVUFBWSxNQUFNMTdHLEVBQU8sT0FDeEMsSUFBTSxFQUFnQnFaLFNBQVN3QixjQUFjLE9BQzdDLEVBQWM4N0YsVUFBVXpsRixJQUFJLGtCQUM1Qnk0RixFQUFRbCtHLFNBQVEsU0FBQXVqQixHQUNkLElBQU1rb0UsRUFBUzc5RSxTQUFTd0IsY0FBYyxVQUN0Q3E4RSxFQUFPd2tCLFVBQVkxc0YsRUFBTy8yQixLQUMxQmkvRixFQUFPeWYsVUFBVXpsRixJQUFJLGFBQWMsU0FDbkNnbUUsRUFBT21nQixRQUFVcm9GLEVBQU8rMkYsU0FDeEIsRUFBYzdxRyxZQUFZZzhFLE1BRTVCMnlCLEVBQWUzdUcsWUFBWSxPQUNULFlBQVRuTyxJQUNUODhHLEVBQWVuTyxVQUFZLE1BQVExN0csRUFBVSxRQUUvQy9GLEtBQUswc0gsZ0JBQWdCenJHLFlBQVkydUcsR0FDakM1dkgsS0FBSzBzSCxnQkFBZ0JoUSxVQUFVemxGLElBQUksV0FNckMsWUFBQWcxRixvQkFBQSxXQUNFanNILEtBQUswc0gsZ0JBQWdCaFEsVUFBVXA3RixPQUFPLFdBZXhDLFlBQUE2cUcsZ0JBQUEsU0FBZ0JwdEcsRUFBc0I4d0csRUFBNEJDLFFBQTVCLElBQUFELE1BQUEsb0JBQTRCLElBQUFDLE9BQUEsR0FDaEU5dkgsS0FBS29zSCxxQkFBcUIxUCxVQUFVaCtHLE1BQVEsR0FDekIsZ0JBQWZteEgsRUFDRjd2SCxLQUFLb3NILHFCQUFxQjFQLFVBQVV6bEYsSUFBSSxtQkFDaEIsV0FBZjQ0RixHQUNUN3ZILEtBQUtvc0gscUJBQXFCMVAsVUFBVXpsRixJQUFJLGVBR3hDajNCLEtBQUt5c0gsY0FBYzlyRyxNQUFNOC9GLFFBRHZCcVAsRUFDaUMsUUFFQSxPQUVyQzl2SCxLQUFLdXNILG1CQUFtQnRyRyxZQUFZbEMsR0FDcEMvZSxLQUFLb3NILHFCQUFxQnpyRyxNQUFNOC9GLFFBQVUsUUFNNUMsWUFBQThILGlCQUFBLFdBQ0UsSUFBTXhwRyxFQUFVL2UsS0FBS3VzSCxtQkFBbUJ3RCxrQkFDeEMvdkgsS0FBS29zSCxxQkFBcUJ6ckcsTUFBTTgvRixRQUFVLE9BQzFDemdILEtBQUt3c0gsb0JBQW9CdnJHLFlBQVlsQyxJQVd2QyxZQUFBc1IsTUFBQSxTQUFNLEdBQU4sV0FBTSxhQUFzQyxHQUFFLEVBQXZDLElBQUFuRSxpQkFBUyxJQUFHLEtBQUUsRUFBRSxJQUFBcXRGLG9CQUFZLElBQUcsS0FBRSxFQUV0Q242RixTQUFTRyxjQUFjLFVBQVVvQixNQUFNOC9GLFFBQVUsT0FDakRyaEcsU0FBU0csY0FBYyxRQUFRb0IsTUFBTTgvRixRQUFVLFFBRTdCLEtBQWR2MEYsR0FDRmxzQixLQUFLNnJILG1CQUFtQixTQUFVLG1CQUNsQyxFQUFJOEMsYUFBYXppRyxFQUFXbHNCLE1BQ3pCd0MsTUFBSyxTQUFBMk8sR0FDSixFQUFLdzhHLGlCQUFtQixJQUFJLEVBQVV4OEcsRUFBSyxHQUMzQyxFQUFLODlHLHVCQUF1QixDQUFDOTlHLElBQzdCLEVBQUsyd0csZ0JBQWdCbmhHLE1BQU04L0YsUUFBVSxRQUNyQyxFQUFLd0wsc0JBTUQ5NkcsRUFBSXFwRyxZQUFZbjZHLE9BQVMsR0FDM0I2UCxPQUFPazVHLDhCQUVSLFNBQUE1YSxHQUNEdGxHLFFBQVE0TyxJQUFJMDJGLEdBQ1osSUFBTXYwQixPQUE0QjF3RSxJQUFiaWxHLEVBQUk5ckcsS0FBcUI4ckcsRUFBTSxZQUFZOWlHLEtBQUtDLE1BQU02aUcsRUFBSTlyRyxNQUFNb0IsTUFBTWlDLFFBQU8sVUFBVTJGLEtBQUtDLE1BQU02aUcsRUFBSTlyRyxNQUFNb0IsTUFBTXNHLEtBQ3ZJLEVBQUt5aEgsbUJBQW1CLFNBQVU1eEMsRUFBYyxDQUM5QyxDQUNFajhFLEtBQU0scUJBQ044dEgsU0FBVSxXQUNSLEVBQUtpQixtQkFDbUIsS0FBcEJsa0IsU0FBUzllLFFBQ1g4a0MsUUFBUUMsYUFBYSxDQUFFa0IsS0FBTSxpQkFBbUIsZ0JBQWlCbm5CLFNBQVNpRyxLQUFLeGpHLFFBQVF1OUYsU0FBUzllLE9BQVEsY0FRNUYsS0FBcEI4ZSxTQUFTOWUsUUFDWDhrQyxRQUFRQyxhQUFhLENBQUVrQixLQUFNLGlCQUFtQixnQkFBaUJubkIsU0FBU2lHLEtBQUt4akcsUUFBUXU5RixTQUFTOWUsT0FBUSxLQUUxRy9wRixLQUFLMnNILHNCQUFzQmhzRyxNQUFNOC9GLFFBQVUsUUFDM0N6Z0gsS0FBSzZySCxtQkFBbUIsU0FBVSxvQkFFbEMsRUFBSW1ELGlCQUFpQmh2SCxLQUFNdTVHLEdBQThCLElBQUkvMkcsTUFBSyxTQUFDMk8sR0FLakUsR0FKQSxFQUFLODlHLHVCQUF1Qjk5RyxHQUM1QixFQUFLODZHLHNCQUdELzdHLE9BQU8rL0csaUJBQ1QsSUFBSyxJQUFJeHlILEVBQUksRUFBR0EsRUFBSTBULEVBQUk5USxPQUFRNUMsSUFDOUIsR0FBSTBULEVBQUkxVCxHQUFHKzhHLFlBQVluNkcsT0FBUyxFQUFHLENBQ2pDNlAsT0FBT2s1RywyQkFDUCxVQUlMLFNBQUE1YSxHQUNELEVBQUtpWixhQUFhaEcsVUFBWSw4REFDOUIsRUFBS3dLLDJCQUliLEVBcmxCQSxHLG1EWlhJLEVBQU8sMEJBQ1AzMUcsRUFBVSxRQWtCVjQ1RyxFQUFxQixJQUNyQkMsRUFBa0IsS0FBTzc1RyxFQUN6Qjg1RyxFQUF3QixTQUN4QkMsRUFBd0Isa0RBQ3hCQyxFQUEwQixLQXFCMUJDLElBQXlCLEVBQUssSUFDM0IsNkJBQStELGtEQUNsRSxFQUFHLGtCQUF5QywyQ0FDNUMsRUFBRywwQkFBeUQsbUNBQzVELEVBQUcsa0JBQXlDLDZGQUM1QyxFQUFHLGVBQW1DLGtEQUN0QyxFQUFHLCtCQUFtRSwyRUFDdEUsR0FDQWw2RyxHQUFnQixJQUFJLGVBNUJWLGdCQUNLLGdCQTJCeUNrNkcsR0FFNUQsU0FBU0MsR0FBYzFzSCxHQUNuQixPQUFRQSxhQUFpQixpQkFDckJBLEVBQU1zRyxLQUFLazVHLFNBQVM7Ozs7Ozs7Ozs7Ozs7Ozs7R0FtQjVCLFNBQVNtTixHQUF5QnhsSCxHQUM5QixJQUFJaWhCLEVBQVlqaEIsRUFBR2loQixVQUNuQixPQUFPbWtHLEVBQXdCLGFBQWVua0csRUFBWSxpQkFFOUQsU0FBU3drRyxHQUFpQ2p5RCxHQUN0QyxNQUFPLENBQ0g1eUQsTUFBTzR5RCxFQUFTNXlELE1BQ2hCOGtILGNBQWUsRUFDZkMsV0EyRG1DQyxFQTNEVXB5RCxFQUFTbXlELFVBNkRuRGhxRyxPQUFPaXFHLEVBQWtCdmxILFFBQVEsSUFBSyxTQTVEekN3bEgsYUFBY3puSCxLQUFLc0gsT0EwRDNCLElBQTJDa2dILEVBdkQzQyxTQUFTRSxHQUFxQkMsRUFBYXZ5RCxHQUN2QyxPQUFPLG9CQUFVeitELFVBQU0sT0FBUSxHQUFRLFdBQ25DLElBQUlpeEgsRUFBY0MsRUFDbEIsT0FBTyxzQkFBWWx4SCxNQUFNLFNBQVVpTCxHQUMvQixPQUFRQSxFQUFHbEksT0FDUCxLQUFLLEVBQUcsTUFBTyxDQUFDLEVBQWEwN0QsRUFBU2cyQixRQUN0QyxLQUFLLEVBR0QsT0FGQXc4QixFQUFlaG1ILEVBQUdqSSxPQUNsQmt1SCxFQUFZRCxFQUFhbnRILE1BQ2xCLENBQUMsRUFBY3VTLEdBQWN0WCxPQUFPLGlCQUF1QyxDQUMxRWl5SCxZQUFhQSxFQUNiRyxXQUFZRCxFQUFVOW1ILEtBQ3RCZ25ILGNBQWVGLEVBQVVuckgsUUFDekJzckgsYUFBY0gsRUFBVTlwRCxpQkFNcEQsU0FBU2txRCxHQUFXcm1ILEdBQ2hCLElBQUlzbUgsRUFBU3RtSCxFQUFHc21ILE9BQ2hCLE9BQU8sSUFBSWpiLFFBQVEsQ0FDZixlQUFnQixtQkFDaEJrYixPQUFRLG1CQUNSLGlCQUFrQkQsSUFHMUIsU0FBU0UsR0FBbUJDLEVBQVd6bUgsR0FDbkMsSUFBSTBtSCxFQUFlMW1ILEVBQUcwbUgsYUFDbEJ0c0MsRUFBVWlzQyxHQUFXSSxHQUV6QixPQURBcnNDLEVBQVErd0IsT0FBTyxnQkE2Qm5CLFNBQWdDdWIsR0FDNUIsT0FBT3ZCLEVBQXdCLElBQU11Qjs7Ozs7Ozs7Ozs7Ozs7OztHQTlCTEMsQ0FBdUJELElBQ2hEdHNDLEVBT1gsU0FBU3dzQyxHQUFtQmpqSCxHQUN4QixPQUFPLG9CQUFVNU8sVUFBTSxPQUFRLEdBQVEsV0FDbkMsSUFBSXNDLEVBQ0osT0FBTyxzQkFBWXRDLE1BQU0sU0FBVWlMLEdBQy9CLE9BQVFBLEVBQUdsSSxPQUNQLEtBQUssRUFBRyxNQUFPLENBQUMsRUFBYTZMLEtBQzdCLEtBQUssRUFFRCxPQURBdE0sRUFBUzJJLEVBQUdqSSxRQUNEb2tFLFFBQVUsS0FBTzlrRSxFQUFPOGtFLE9BQVMsSUFFakMsQ0FBQyxFQUFjeDRELEtBRW5CLENBQUMsRUFBY3RNLFVBNkIxQyxTQUFTd3ZILEdBQTBCSixFQUFXem1ILEdBQzFDLElBQUk4bUgsRUFBTTltSCxFQUFHOG1ILElBQ2IsT0FBTyxvQkFBVS94SCxVQUFNLE9BQVEsR0FBUSxXQUNuQyxJQUFJZ3lILEVBQVUzc0MsRUFBUzNpRixFQUFNMFksRUFBU3FqRCxFQUFVd3pELEVBQ2hELE9BQU8sc0JBQVlqeUgsTUFBTSxTQUFVa0wsR0FDL0IsT0FBUUEsRUFBR25JLE9BQ1AsS0FBSyxFQWNELE9BYkFpdkgsRUFBV3ZCLEdBQXlCaUIsR0FDcENyc0MsRUFBVWlzQyxHQUFXSSxHQUNyQmh2SCxFQUFPLENBQ0hxdkgsSUFBS0EsRUFDTEcsWUFBYTlCLEVBQ2IrQixNQUFPVCxFQUFVUyxNQUNqQng0RyxXQUFZdzJHLEdBRWhCLzBHLEVBQVUsQ0FDTjlNLE9BQVEsT0FDUisyRSxRQUFTQSxFQUNUM2lGLEtBQU1nSixLQUFLc0csVUFBVXRQLElBRWxCLENBQUMsRUFBYW12SCxJQUFtQixXQUFjLE9BQU94YixNQUFNMmIsRUFBVTUyRyxPQUNqRixLQUFLLEVBRUQsT0FEQXFqRCxFQUFXdnpELEVBQUdsSSxRQUNBdXpHLEdBQ1AsQ0FBQyxFQUFhOTNDLEVBQVNnMkIsUUFETCxDQUFDLEVBQWEsR0FFM0MsS0FBSyxFQVFELE9BUEF3OUIsRUFBZ0IvbUgsRUFBR2xJLE9BT1osQ0FBQyxFQU5zQixDQUMxQit1SCxJQUFLRSxFQUFjRixLQUFPQSxFQUMxQkssbUJBQW9CLEVBQ3BCVCxhQUFjTSxFQUFjTixhQUM1QlUsVUFBVzNCLEdBQWlDdUIsRUFBY0ksYUFHbEUsS0FBSyxFQUFHLE1BQU8sQ0FBQyxFQUFhdEIsR0FBcUIsc0JBQXVCdHlELElBQ3pFLEtBQUssRUFBRyxNQUFNdnpELEVBQUdsSTs7Ozs7Ozs7Ozs7Ozs7OztHQXVCakMsU0FBU3N2SCxHQUFNQyxHQUNYLE9BQU8sSUFBSXh3SCxTQUFRLFNBQVVDLEdBQ3pCdXVCLFdBQVd2dUIsRUFBU3V3SDs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBeUM1QixJQUFJQyxHQUFvQixvQkFDcEJDLEdBQWMsR0FLbEIsU0FBU0MsS0FDTCxJQUdJLElBQUlDLEVBQWUsSUFBSWxvRyxXQUFXLEtBQ25CMWEsS0FBS29nRyxRQUFVcGdHLEtBQUs2aUgsVUFDMUJ4aUIsZ0JBQWdCdWlCLEdBRXpCQSxFQUFhLEdBQUssSUFBT0EsRUFBYSxHQUFLLEdBQzNDLElBQUlaLEVBU1osU0FBZ0JZLEdBSVosT0FqRDJCem5HLEVBOENXeW5HLEVBN0M1QjNxSCxLQUFLSyxPQUFPQyxhQUFhaEksTUFBTStILE9BQVEsbUJBQVM2aUIsS0FDL0M1ZixRQUFRLE1BQU8sS0FBS0EsUUFBUSxNQUFPLE1BK0M3QjhnRSxPQUFPLEVBQUcsSUFqRC9CLElBQStCbGhEOzs7Ozs7Ozs7Ozs7Ozs7O0dBb0NiMEgsQ0FBTysvRixHQUNqQixPQUFPSCxHQUFrQnJpSCxLQUFLNGhILEdBQU9BLEVBQU1VLEdBRS9DLE1BQU94bkgsR0FFSCxPQUFPd25ILElBMkJmLElBMHpCK0J0K0csR0ExekIzQjArRyxHQUFnQixrQ0FDaEJDLEdBQW1CLEVBQ25CQyxHQUFvQiwrQkFDcEJDLEdBQVksS0FDaEIsU0FBU0MsS0FjTCxPQWJLRCxLQUNEQSxHQUFZLGlCQUFPSCxHQUFlQyxJQUFrQixTQUFVSSxHQU0xRCxPQUFRQSxFQUFVaDJHLFlBQ2QsS0FBSyxFQUNEZzJHLEVBQVVyMUcsa0JBQWtCazFHLFNBSXJDQyxHQUdYLFNBQVM5K0csR0FBSXc5RyxFQUFXaHpILEdBQ3BCLE9BQU8sb0JBQVVzQixVQUFNLE9BQVEsR0FBUSxXQUNuQyxJQUFJaEIsRUFBS2llLEVBQUlrMkcsRUFDYixPQUFPLHNCQUFZbnpILE1BQU0sU0FBVWlMLEdBQy9CLE9BQVFBLEVBQUdsSSxPQUNQLEtBQUssRUFFRCxPQURBL0QsRUFBTW8wSCxHQUFPMUIsR0FDTixDQUFDLEVBQWF1QixNQUN6QixLQUFLLEVBR0QsT0FGQWgyRyxFQUFLaFMsRUFBR2pJLE9BRUQsQ0FBQyxHQURSbXdILEVBQUtsMkcsRUFBR0UsWUFBWTQxRyxHQUFtQixjQUNmcDFHLFlBQVlvMUcsSUFBbUI1ekYsSUFBSXpnQyxFQUFPTSxJQUN0RSxLQUFLLEVBRUQsT0FEQWlNLEVBQUdqSSxPQUNJLENBQUMsRUFBYW13SCxFQUFHbmxILFVBQzVCLEtBQUssRUFFRCxPQURBL0MsRUFBR2pJLE9BQ0ksQ0FBQyxFQUFjdEUsVUFNMUMsU0FBUzRpQixHQUFPb3dHLEdBQ1osT0FBTyxvQkFBVTF4SCxVQUFNLE9BQVEsR0FBUSxXQUNuQyxJQUFJaEIsRUFBS2llLEVBQUlrMkcsRUFDYixPQUFPLHNCQUFZbnpILE1BQU0sU0FBVWlMLEdBQy9CLE9BQVFBLEVBQUdsSSxPQUNQLEtBQUssRUFFRCxPQURBL0QsRUFBTW8wSCxHQUFPMUIsR0FDTixDQUFDLEVBQWF1QixNQUN6QixLQUFLLEVBR0QsT0FGQWgyRyxFQUFLaFMsRUFBR2pJLE9BRUQsQ0FBQyxHQURSbXdILEVBQUtsMkcsRUFBR0UsWUFBWTQxRyxHQUFtQixjQUNmcDFHLFlBQVlvMUcsSUFBbUI3OUcsT0FBT2xXLElBQ2xFLEtBQUssRUFFRCxPQURBaU0sRUFBR2pJLE9BQ0ksQ0FBQyxFQUFhbXdILEVBQUdubEgsVUFDNUIsS0FBSyxFQUVELE9BREEvQyxFQUFHakksT0FDSSxDQUFDLFVBVzVCLFNBQVNnSyxHQUFPMGtILEVBQVcyQixHQUN2QixPQUFPLG9CQUFVcnpILFVBQU0sT0FBUSxHQUFRLFdBQ25DLElBQUloQixFQUFLaWUsRUFBSWsyRyxFQUFJMTJHLEVBQU82MkcsRUFBVW5uRixFQUNsQyxPQUFPLHNCQUFZbnNDLE1BQU0sU0FBVWlMLEdBQy9CLE9BQVFBLEVBQUdsSSxPQUNQLEtBQUssRUFFRCxPQURBL0QsRUFBTW8wSCxHQUFPMUIsR0FDTixDQUFDLEVBQWF1QixNQUN6QixLQUFLLEVBSUQsT0FIQWgyRyxFQUFLaFMsRUFBR2pJLE9BQ1Jtd0gsRUFBS2wyRyxFQUFHRSxZQUFZNDFHLEdBQW1CLGFBRWhDLENBQUMsR0FEUnQyRyxFQUFRMDJHLEVBQUd4MUcsWUFBWW8xRyxLQUNJejBILElBQUlVLElBQ25DLEtBQUssRUFHRCxPQUZBczBILEVBQVdyb0gsRUFBR2pJLFlBRUt1RyxLQURuQjRpQyxFQUFXa25GLEVBQVNDLElBQ2tCLENBQUMsRUFBYSxHQUM3QyxDQUFDLEVBQWE3MkcsRUFBTXZILE9BQU9sVyxJQUN0QyxLQUFLLEVBRUQsT0FEQWlNLEVBQUdqSSxPQUNJLENBQUMsRUFBYSxHQUN6QixLQUFLLEVBQUcsTUFBTyxDQUFDLEVBQWF5WixFQUFNMGlCLElBQUlnTixFQUFVbnRDLElBQ2pELEtBQUssRUFDRGlNLEVBQUdqSSxPQUNIaUksRUFBR2xJLE1BQVEsRUFDZixLQUFLLEVBQUcsTUFBTyxDQUFDLEVBQWFvd0gsRUFBR25sSCxVQUNoQyxLQUFLLEVBRUQsT0FEQS9DLEVBQUdqSSxPQUNJLENBQUMsRUFBY21wQyxVQUsxQyxTQUFTaW5GLEdBQU8xQixHQUNaLE9BQU9BLEVBQVU3NUcsUUFBVSxJQUFNNjVHLEVBQVVTOzs7Ozs7Ozs7Ozs7Ozs7O0dBdUIvQyxTQUFTb0IsR0FBcUI3QixHQUMxQixPQUFPLG9CQUFVMXhILFVBQU0sT0FBUSxHQUFRLFdBQ25DLElBQUl3ekgsRUFBcUJDLEVBQW1CeG9ILEVBQzVDLE9BQU8sc0JBQVlqTCxNQUFNLFNBQVVrTCxHQUMvQixPQUFRQSxFQUFHbkksT0FDUCxLQUFLLEVBQUcsTUFBTyxDQUFDLEVBQWFpSyxHQUFPMGtILEdBQVcsU0FBVWdDLEdBQ2pELElBQUlELEVBeUI1QixTQUF5Q0MsR0FLckMsT0FBT0MsR0FKS0QsR0FBWSxDQUNwQjNCLElBQUtXLEtBQ0xOLG1CQUFvQixJQTVCb0J3QixDQUFnQ0YsR0FDcERHLEVBc0M1QixTQUF3Q25DLEVBQVcrQixHQUMvQyxHQUE2QyxJQUF6Q0EsRUFBa0JyQixtQkFBNEMsQ0FDOUQsSUFBS3BvSCxVQUFVOHBILE9BQVEsQ0FFbkIsSUFBSUMsRUFBK0JoeUgsUUFBUUUsT0FBT29VLEdBQWN0WCxPQUFPLGdCQUN2RSxNQUFPLENBQ0gwMEgsa0JBQW1CQSxFQUNuQkQsb0JBQXFCTyxHQUk3QixJQUFJQyxFQUFrQixDQUNsQmpDLElBQUswQixFQUFrQjFCLElBQ3ZCSyxtQkFBb0IsRUFDcEI2QixpQkFBa0I1cUgsS0FBS3NILE9BRXZCNmlILEVBY1osU0FBOEI5QixFQUFXK0IsR0FDckMsT0FBTyxvQkFBVXp6SCxVQUFNLE9BQVEsR0FBUSxXQUNuQyxJQUFJazBILEVBQTZCei9HLEVBQ2pDLE9BQU8sc0JBQVl6VSxNQUFNLFNBQVVpTCxHQUMvQixPQUFRQSxFQUFHbEksT0FDUCxLQUFLLEVBRUQsT0FEQWtJLEVBQUdoSSxLQUFLUSxLQUFLLENBQUMsRUFBRyxFQUFHLENBQUUsSUFDZixDQUFDLEVBQWFxdUgsR0FBMEJKLEVBQVcrQixJQUM5RCxLQUFLLEVBRUQsT0FEQVMsRUFBOEJqcEgsRUFBR2pJLE9BQzFCLENBQUMsRUFBY2tSLEdBQUl3OUcsRUFBV3dDLElBQ3pDLEtBQUssRUFFRCxPQUFNMUQsR0FETi83RyxFQUFNeEosRUFBR2pJLFNBQ3NDLE1BQW5CeVIsRUFBSTA4RyxXQUd6QixDQUFDLEVBQWE3dkcsR0FBT293RyxJQUhnQyxDQUFDLEVBQWEsR0FJOUUsS0FBSyxFQUlELE9BREF6bUgsRUFBR2pJLE9BQ0ksQ0FBQyxFQUFhLEdBQ3pCLEtBQUssRUFFTCxNQUFPLENBQUMsRUFBYWtSLEdBQUl3OUcsRUFBVyxDQUM1QkssSUFBSzBCLEVBQWtCMUIsSUFDdkJLLG1CQUFvQixLQUU1QixLQUFLLEVBRURubkgsRUFBR2pJLE9BQ0hpSSxFQUFHbEksTUFBUSxFQUNmLEtBQUssRUFBRyxNQUFNMFIsRUFDZCxLQUFLLEVBQUcsTUFBTyxDQUFDLFVBL0NFMC9HLENBQXFCekMsRUFBV3NDLEdBQzFELE1BQU8sQ0FBRVAsa0JBQW1CTyxFQUFpQlIsb0JBQXFCQSxHQUVqRSxPQUE2QyxJQUF6Q0MsRUFBa0JyQixtQkFDaEIsQ0FDSHFCLGtCQUFtQkEsRUFDbkJELG9CQUFxQlksR0FBeUIxQyxJQUkzQyxDQUFFK0Isa0JBQW1CQSxHQWhFV1ksQ0FBK0IzQyxFQUFXK0IsR0FFakUsT0FEQUQsRUFBc0JLLEVBQWlCTCxvQkFDaENLLEVBQWlCSixzQkFFaEMsS0FBSyxFQUVELE9BREFBLEVBQW9Cdm9ILEVBQUdsSSxRQUNDK3VILE1BQVFVLEdBQXFCLENBQUMsRUFBYSxJQUNuRXhuSCxFQUFLLEdBQ0UsQ0FBQyxFQUFhdW9ILElBQ3pCLEtBQUssRUFFTCxNQUFPLENBQUMsR0FBZXZvSCxFQUFHd29ILGtCQUFvQnZvSCxFQUFHbEksT0FBUWlJLElBQ3pELEtBQUssRUFBRyxNQUFPLENBQUMsRUFBYyxDQUN0QndvSCxrQkFBbUJBLEVBQ25CRCxvQkFBcUJBLFdBNkY3QyxTQUFTWSxHQUF5QjFDLEdBQzlCLE9BQU8sb0JBQVUxeEgsVUFBTSxPQUFRLEdBQVEsV0FDbkMsSUFBSXk2QyxFQUFPeHZDLEVBQUl3b0gsRUFBbUJELEVBQ2xDLE9BQU8sc0JBQVl4ekgsTUFBTSxTQUFVa0wsR0FDL0IsT0FBUUEsRUFBR25JLE9BQ1AsS0FBSyxFQUFHLE1BQU8sQ0FBQyxFQUFhdXhILEdBQTBCNUMsSUFDdkQsS0FBSyxFQUNEajNFLEVBQVF2dkMsRUFBR2xJLE9BQ1hrSSxFQUFHbkksTUFBUSxFQUNmLEtBQUssRUFDRCxPQUFtQyxJQUE3QjAzQyxFQUFNMjNFLG1CQUFvRCxDQUFDLEVBQWEsR0FFdkUsQ0FBQyxFQUFhRSxHQUFNLE1BQy9CLEtBQUssRUFHRCxPQURBcG5ILEVBQUdsSSxPQUNJLENBQUMsRUFBYXN4SCxHQUEwQjVDLElBQ25ELEtBQUssRUFFRCxPQURBajNFLEVBQVF2dkMsRUFBR2xJLE9BQ0osQ0FBQyxFQUFhLEdBQ3pCLEtBQUssRUFDRCxPQUFtQyxJQUE3QnkzQyxFQUFNMjNFLG1CQUFvRCxDQUFDLEVBQWEsR0FDdkUsQ0FBQyxFQUFhbUIsR0FBcUI3QixJQUM5QyxLQUFLLEVBRUQsT0FEQXptSCxFQUFLQyxFQUFHbEksT0FBUXl3SCxFQUFvQnhvSCxFQUFHd29ILG1CQUFtQkQsRUFBc0J2b0gsRUFBR3VvSCxxQkFFeEUsQ0FBQyxFQUFjQSxHQUlmLENBQUMsRUFBY0MsR0FFOUIsS0FBSyxFQUFHLE1BQU8sQ0FBQyxFQUFjaDVFLFVBYTlDLFNBQVM2NUUsR0FBMEI1QyxHQUMvQixPQUFPMWtILEdBQU8wa0gsR0FBVyxTQUFVZ0MsR0FDL0IsSUFBS0EsRUFDRCxNQUFNcjlHLEdBQWN0WCxPQUFPLDBCQUUvQixPQUFPNDBILEdBQXFCRCxNQUdwQyxTQUFTQyxHQUFxQmw1RSxHQUMxQixPQVNpRCxLQURiZzVFLEVBUkRoNUUsR0FTVDIzRSxvQkFDdEJxQixFQUFrQlEsaUJBQW1CL0QsRUFBcUI3bUgsS0FBS3NILE1BVHhELENBQ0hvaEgsSUFBS3QzRSxFQUFNczNFLElBQ1hLLG1CQUFvQixHQUdyQjMzRSxFQUVYLElBQXdDZzVFOzs7Ozs7Ozs7Ozs7Ozs7O0lBcUJ4QyxTQUFTYyxHQUF5QnRwSCxFQUFJd29ILEdBQ2xDLElBQUkvQixFQUFZem1ILEVBQUd5bUgsVUFBVzhDLEVBQXlCdnBILEVBQUd1cEgsdUJBQzFELE9BQU8sb0JBQVV4MEgsVUFBTSxPQUFRLEdBQVEsV0FDbkMsSUFBSWd5SCxFQUFVM3NDLEVBQVNvdkMsRUFBZ0IveEgsRUFBTTBZLEVBQVNxakQsRUFBVXd6RCxFQUNoRSxPQUFPLHNCQUFZanlILE1BQU0sU0FBVWtMLEdBQy9CLE9BQVFBLEVBQUduSSxPQUNQLEtBQUssRUFtQkQsT0FsQkFpdkgsRUFpQ3BCLFNBQXNDTixFQUFXem1ILEdBQzdDLElBQUk4bUgsRUFBTTltSCxFQUFHOG1ILElBQ2IsT0FBT3RCLEdBQXlCaUIsR0FBYSxJQUFNSyxFQUFNOzs7Ozs7Ozs7Ozs7Ozs7O0dBbkM5QjJDLENBQTZCaEQsRUFBVytCLEdBQ25EcHVDLEVBQVVvc0MsR0FBbUJDLEVBQVcrQixJQUN4Q2dCLEVBQWlCRCxFQUF1Qm5nSCxhQUFhLENBQ2pEbkYsVUFBVSxNQUdWbTJFLEVBQVErd0IsT0FBTyxvQkFBcUJxZSxFQUFlajdHLHlCQUV2RDlXLEVBQU8sQ0FDSGl5SCxhQUFjLENBQ1ZoN0csV0FBWXcyRyxJQUdwQi8wRyxFQUFVLENBQ045TSxPQUFRLE9BQ1IrMkUsUUFBU0EsRUFDVDNpRixLQUFNZ0osS0FBS3NHLFVBQVV0UCxJQUVsQixDQUFDLEVBQWFtdkgsSUFBbUIsV0FBYyxPQUFPeGIsTUFBTTJiLEVBQVU1MkcsT0FDakYsS0FBSyxFQUVELE9BREFxakQsRUFBV3Z6RCxFQUFHbEksUUFDQXV6RyxHQUNQLENBQUMsRUFBYTkzQyxFQUFTZzJCLFFBREwsQ0FBQyxFQUFhLEdBRTNDLEtBQUssRUFHRCxPQUZBdzlCLEVBQWdCL21ILEVBQUdsSSxPQUVaLENBQUMsRUFEYTB0SCxHQUFpQ3VCLElBRTFELEtBQUssRUFBRyxNQUFPLENBQUMsRUFBYWxCLEdBQXFCLHNCQUF1QnR5RCxJQUN6RSxLQUFLLEVBQUcsTUFBTXZ6RCxFQUFHbEksY0FnQ2pDLFNBQVM0eEgsR0FBaUJDLEVBQWNwd0MsR0FFcEMsWUFEcUIsSUFBakJBLElBQTJCQSxHQUFlLEdBQ3ZDLG9CQUFVemtGLFVBQU0sT0FBUSxHQUFRLFdBQ25DLElBQUk4MEgsRUFBY3I2RSxFQUFrQnh2QyxFQUNwQyxPQUFPLHNCQUFZakwsTUFBTSxTQUFVa0wsR0FDL0IsT0FBUUEsRUFBR25JLE9BQ1AsS0FBSyxFQUFHLE1BQU8sQ0FBQyxFQUFhaUssR0FBTzZuSCxFQUFhbkQsV0FBVyxTQUFVZ0MsR0FDOUQsSUFBS3FCLEdBQWtCckIsR0FDbkIsTUFBTXI5RyxHQUFjdFgsT0FBTyxrQkFFL0IsSUFBSWkySCxFQUFldEIsRUFBU3JCLFVBQzVCLElBQUs1dEMsR0F5STdCLFNBQTBCNHRDLEdBQ3RCLE9BQW9DLElBQTVCQSxFQUFVMUIsZ0JBR3RCLFNBQTRCMEIsR0FDeEIsSUFBSTFoSCxFQUFNdEgsS0FBS3NILE1BQ2YsT0FBUUEsRUFBTTBoSCxFQUFVdkIsY0FDcEJ1QixFQUFVdkIsYUFBZXVCLEVBQVV6QixVQUFZamdILEVBQU0yL0csRUFMcEQyRSxDQUFtQjVDLEdBM0lpQjZDLENBQWlCRixHQUVsQyxPQUFPdEIsRUFFTixHQUFtQyxJQUEvQnNCLEVBQWFyRSxjQUdsQixPQURBbUUsRUFvQzVCLFNBQW1DRCxFQUFjcHdDLEdBQzdDLE9BQU8sb0JBQVV6a0YsVUFBTSxPQUFRLEdBQVEsV0FDbkMsSUFBSXk2QyxFQUFPNDNFLEVBQ1gsT0FBTyxzQkFBWXJ5SCxNQUFNLFNBQVVpTCxHQUMvQixPQUFRQSxFQUFHbEksT0FDUCxLQUFLLEVBQUcsTUFBTyxDQUFDLEVBQWFveUgsR0FBdUJOLEVBQWFuRCxZQUNqRSxLQUFLLEVBQ0RqM0UsRUFBUXh2QyxFQUFHakksT0FDWGlJLEVBQUdsSSxNQUFRLEVBQ2YsS0FBSyxFQUNELE9BQXdDLElBQWxDMDNDLEVBQU00M0UsVUFBVTFCLGNBQStDLENBQUMsRUFBYSxHQUU1RSxDQUFDLEVBQWEyQixHQUFNLE1BQy9CLEtBQUssRUFHRCxPQURBcm5ILEVBQUdqSSxPQUNJLENBQUMsRUFBYW15SCxHQUF1Qk4sRUFBYW5ELFlBQzdELEtBQUssRUFFRCxPQURBajNFLEVBQVF4dkMsRUFBR2pJLE9BQ0osQ0FBQyxFQUFhLEdBQ3pCLEtBQUssRUFFRCxPQUFnQyxLQURoQ3F2SCxFQUFZNTNFLEVBQU00M0UsV0FDSjFCLGNBRUgsQ0FBQyxFQUFjaUUsR0FBaUJDLEVBQWNwd0MsSUFHOUMsQ0FBQyxFQUFjNHRDLFVBL0RIK0MsQ0FBMEJQLEVBQWNwd0MsR0FDaERpdkMsRUFJUCxJQUFLMXBILFVBQVU4cEgsT0FDWCxNQUFNejlHLEdBQWN0WCxPQUFPLGVBRS9CLElBQUlpMUgsRUFxSWhDLFNBQTZDTixHQUN6QyxJQUFJMkIsRUFBc0IsQ0FDdEIxRSxjQUFlLEVBQ2YyRSxZQUFhanNILEtBQUtzSCxPQUV0QixPQUFPLG1CQUFTLG1CQUFTLEdBQUkraUgsR0FBVyxDQUFFckIsVUFBV2dELElBMUlQRSxDQUFvQzdCLEdBRTFELE9BREFvQixFQWdGNUIsU0FBa0NELEVBQWNwQixHQUM1QyxPQUFPLG9CQUFVenpILFVBQU0sT0FBUSxHQUFRLFdBQ25DLElBQUlxeUgsRUFBcUM1OUcsRUFBSytnSCxFQUM5QyxPQUFPLHNCQUFZeDFILE1BQU0sU0FBVWlMLEdBQy9CLE9BQVFBLEVBQUdsSSxPQUNQLEtBQUssRUFFRCxPQURBa0ksRUFBR2hJLEtBQUtRLEtBQUssQ0FBQyxFQUFHLEVBQUcsQ0FBRSxJQUNmLENBQUMsRUFBYTh3SCxHQUF5Qk0sRUFBY3BCLElBQ2hFLEtBQUssRUFHRCxPQUZBcEIsRUFBWXBuSCxFQUFHakksT0FDZnd5SCxFQUEyQixtQkFBUyxtQkFBUyxHQUFJL0IsR0FBb0IsQ0FBRXBCLFVBQVdBLElBQzNFLENBQUMsRUFBYW4rRyxHQUFJMmdILEVBQWFuRCxVQUFXOEQsSUFDckQsS0FBSyxFQUVELE9BREF2cUgsRUFBR2pJLE9BQ0ksQ0FBQyxFQUFjcXZILEdBQzFCLEtBQUssRUFFRCxPQUFNN0IsR0FETi83RyxFQUFNeEosRUFBR2pJLFNBQ3VDLE1BQW5CeVIsRUFBSTA4RyxZQUF5QyxNQUFuQjE4RyxFQUFJMDhHLFdBQTZCLENBQUMsRUFBYSxHQUcvRixDQUFDLEVBQWE3dkcsR0FBT3V6RyxFQUFhbkQsWUFDN0MsS0FBSyxFQUlELE9BREF6bUgsRUFBR2pJLE9BQ0ksQ0FBQyxFQUFhLEdBQ3pCLEtBQUssRUFFRCxPQURBd3lILEVBQTJCLG1CQUFTLG1CQUFTLEdBQUkvQixHQUFvQixDQUFFcEIsVUFBVyxDQUFFMUIsY0FBZSxLQUM1RixDQUFDLEVBQWF6OEcsR0FBSTJnSCxFQUFhbkQsVUFBVzhELElBQ3JELEtBQUssRUFDRHZxSCxFQUFHakksT0FDSGlJLEVBQUdsSSxNQUFRLEVBQ2YsS0FBSyxFQUFHLE1BQU0wUixFQUNkLEtBQUssRUFBRyxNQUFPLENBQUMsVUFqSFdnaEgsQ0FBeUJaLEVBQWNiLEdBQy9DQSxNQUduQixLQUFLLEVBRUQsT0FEQXY1RSxFQUFRdnZDLEVBQUdsSSxPQUNOOHhILEVBQ0UsQ0FBQyxFQUFhQSxHQURLLENBQUMsRUFBYSxHQUU1QyxLQUFLLEVBRUQsT0FEQTdwSCxFQUFLQyxFQUFHbEksT0FDRCxDQUFDLEVBQWEsR0FDekIsS0FBSyxFQUNEaUksRUFBS3d2QyxFQUFNNDNFLFVBQ1hubkgsRUFBR25JLE1BQVEsRUFDZixLQUFLLEVBRUQsTUFBTyxDQUFDLEVBRElrSSxVQXFEaEMsU0FBU2txSCxHQUF1QnpELEdBQzVCLE9BQU8xa0gsR0FBTzBrSCxHQUFXLFNBQVVnQyxHQUMvQixJQUFLcUIsR0FBa0JyQixHQUNuQixNQUFNcjlHLEdBQWN0WCxPQUFPLGtCQUUvQixJQWtFNkJzekgsRUFsRXpCMkMsRUFBZXRCLEVBQVNyQixVQUM1QixPQWtFZ0MsS0FESEEsRUFqRUcyQyxHQWtFbEJyRSxlQUNkMEIsRUFBVWlELFlBQWNwRixFQUFxQjdtSCxLQUFLc0gsTUFsRXZDLG1CQUFTLG1CQUFTLEdBQUkraUgsR0FBVyxDQUFFckIsVUFBVyxDQUFFMUIsY0FBZSxLQUVuRStDLEtBeUNmLFNBQVNxQixHQUFrQnRCLEdBQ3ZCLFlBQThCbHFILElBQXRCa3FILEdBQ3FDLElBQXpDQSxFQUFrQnJCLG1CQStGMUIsU0FBU3NELEdBQWlDaEUsR0FDdEMsT0FBTyxvQkFBVTF4SCxVQUFNLE9BQVEsR0FBUSxXQUNuQyxJQUFJd3pILEVBQ0osT0FBTyxzQkFBWXh6SCxNQUFNLFNBQVVpTCxHQUMvQixPQUFRQSxFQUFHbEksT0FDUCxLQUFLLEVBQUcsTUFBTyxDQUFDLEVBQWF3d0gsR0FBcUI3QixJQUNsRCxLQUFLLEVBRUQsT0FEQThCLEVBQXVCdm9ILEVBQUdqSSxPQUFRd3dILHFCQUczQixDQUFDLEVBQWFBLEdBRlksQ0FBQyxFQUFhLEdBR25ELEtBQUssRUFFRHZvSCxFQUFHakksT0FDSGlJLEVBQUdsSSxNQUFRLEVBQ2YsS0FBSyxFQUFHLE1BQU8sQ0FBQzs7Ozs7Ozs7Ozs7Ozs7OztHQXNCaEMsU0FBUzR5SCxHQUEwQmpFLEVBQVcrQixHQUMxQyxPQUFPLG9CQUFVenpILFVBQU0sT0FBUSxHQUFRLFdBQ25DLElBQUlneUgsRUFBVTNzQyxFQUFTanFFLEVBQVNxakQsRUFDaEMsT0FBTyxzQkFBWXorRCxNQUFNLFNBQVVpTCxHQUMvQixPQUFRQSxFQUFHbEksT0FDUCxLQUFLLEVBT0QsT0FOQWl2SCxFQWlCcEIsU0FBMkJOLEVBQVd6bUgsR0FDbEMsSUFBSThtSCxFQUFNOW1ILEVBQUc4bUgsSUFDYixPQUFPdEIsR0FBeUJpQixHQUFhLElBQU1LOzs7Ozs7Ozs7Ozs7Ozs7O0dBbkJ4QjZELENBQWtCbEUsRUFBVytCLEdBQ3hDcHVDLEVBQVVvc0MsR0FBbUJDLEVBQVcrQixHQUN4Q3I0RyxFQUFVLENBQ045TSxPQUFRLFNBQ1IrMkUsUUFBU0EsR0FFTixDQUFDLEVBQWF3c0MsSUFBbUIsV0FBYyxPQUFPeGIsTUFBTTJiLEVBQVU1MkcsT0FDakYsS0FBSyxFQUVELE9BREFxakQsRUFBV3h6RCxFQUFHakksUUFDQ3V6RyxHQUFXLENBQUMsRUFBYSxHQUNqQyxDQUFDLEVBQWF3YSxHQUFxQixzQkFBdUJ0eUQsSUFDckUsS0FBSyxFQUFHLE1BQU14ekQsRUFBR2pJLE9BQ2pCLEtBQUssRUFBRyxNQUFPLENBQUMsVUFtSGhDLFNBQVM2eUgsR0FBcUJDLEdBQzFCLE9BQU96L0csR0FBY3RYLE9BQU8sNEJBQTZELENBQ3JGKzJILFVBQVdBOzs7Ozs7Ozs7Ozs7Ozs7O0lBb0JZM2hILEdBc0JULEtBcEJUcUIsU0FBU3VELGtCQUFrQixJQUFJLFlBRGhCLGlCQUM2QyxTQUFVdkYsR0FDM0UsSUFBSThFLEVBQU05RSxFQUFVdUMsWUFBWSxPQUFPMUIsZUFJbkN3Z0gsRUFBZSxDQUNmbkQ7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBbEVaLFNBQTBCcDVHLEdBQ3RCLElBQUk3RCxFQUFLeEosRUFDVCxJQUFLcU4sSUFBUUEsRUFBSWhFLFFBQ2IsTUFBTXVoSCxHQUFxQixxQkFFL0IsSUFBS3Y5RyxFQUFJdGEsS0FDTCxNQUFNNjNILEdBQXFCLFlBUS9CLElBQ0ksSUFBSyxJQUFJRSxFQUFlLG1CQU5YLENBQ2IsWUFDQSxTQUNBLFVBRzhDQyxFQUFpQkQsRUFBYTN6SCxRQUFTNHpILEVBQWV6ekgsS0FBTXl6SCxFQUFpQkQsRUFBYTN6SCxPQUFRLENBQzVJLElBQUk2ekgsRUFBVUQsRUFBZXQzSCxNQUM3QixJQUFLNFosRUFBSWhFLFFBQVEyaEgsR0FDYixNQUFNSixHQUFxQkksSUFJdkMsTUFBT2xoSCxHQUFTTixFQUFNLENBQUUzUSxNQUFPaVIsR0FDL0IsUUFDSSxJQUNRaWhILElBQW1CQSxFQUFlenpILE9BQVMwSSxFQUFLOHFILEVBQWEvZ0gsU0FBUy9KLEVBQUdyTixLQUFLbTRILEdBRXRGLFFBQVUsR0FBSXRoSCxFQUFLLE1BQU1BLEVBQUkzUSxPQUVqQyxNQUFPLENBQ0grVCxRQUFTUyxFQUFJdGEsS0FDYmt1QixVQUFXNVQsRUFBSWhFLFFBQVE0WCxVQUN2QnFsRyxPQUFRajVHLEVBQUloRSxRQUFRaTlHLE9BQ3BCWSxNQUFPNzVHLEVBQUloRSxRQUFRNjlHLE9BOEJIK0QsQ0FBaUI1OUcsR0FJN0JrOEcsdUJBSHlCaGhILEVBQVV1QyxZQUFZLG9CQUtuRCxNQUFPLENBQ0h1QyxJQUFLQSxFQUNMNjlHLE1BQU87Ozs7Ozs7Ozs7Ozs7Ozs7R0FBYyxPQXBRakMsU0FBZXRCLEdBQ1gsT0FBTyxvQkFBVTcwSCxVQUFNLE9BQVEsR0FBUSxXQUNuQyxJQUFJaUwsRUFBSXdvSCxFQUFtQkQsRUFDM0IsT0FBTyxzQkFBWXh6SCxNQUFNLFNBQVVrTCxHQUMvQixPQUFRQSxFQUFHbkksT0FDUCxLQUFLLEVBQUcsTUFBTyxDQUFDLEVBQWF3d0gsR0FBcUJzQixFQUFhbkQsWUFDL0QsS0FBSyxFQVVELE9BVEF6bUgsRUFBS0MsRUFBR2xJLE9BQVF5d0gsRUFBb0J4b0gsRUFBR3dvSCxtQkFBbUJELEVBQXNCdm9ILEVBQUd1b0gscUJBRS9FQSxFQUFvQjFwSCxNQUFNWixRQUFRcEYsT0FLbEM4d0gsR0FBaUJDLEdBQWMvcUgsTUFBTVosUUFBUXBGLE9BRTFDLENBQUMsRUFBYzJ2SCxFQUFrQjFCOzs7Ozs7Ozs7Ozs7Ozs7O0dBb1BwQm9FLENBQU10QixJQUNsQy80RCxTQUFVLFNBQVUyb0IsR0FDaEIsT0FoT2hCLFNBQWtCb3dDLEVBQWNwd0MsR0FFNUIsWUFEcUIsSUFBakJBLElBQTJCQSxHQUFlLEdBQ3ZDLG9CQUFVemtGLFVBQU0sT0FBUSxHQUFRLFdBRW5DLE9BQU8sc0JBQVlBLE1BQU0sU0FBVWlMLEdBQy9CLE9BQVFBLEVBQUdsSSxPQUNQLEtBQUssRUFBRyxNQUFPLENBQUMsRUFBYTJ5SCxHQUFpQ2IsRUFBYW5ELFlBQzNFLEtBQUssRUFFRCxPQURBem1ILEVBQUdqSSxPQUNJLENBQUMsRUFBYTR4SCxHQUFpQkMsRUFBY3B3QyxJQUN4RCxLQUFLLEVBRUQsTUFBTyxDQUFDLEVBREl4NUUsRUFBR2pJLE9BQ2lCNkksY0FvTjdCaXdELENBQVMrNEQsRUFBY3B3QyxJQUVsQ3Z2RSxPQUFRLFdBQWMsT0FoSWxDLFNBQTRCMi9HLEdBQ3hCLE9BQU8sb0JBQVU3MEgsVUFBTSxPQUFRLEdBQVEsV0FDbkMsSUFBSTB4SCxFQUFXajNFLEVBQ2YsT0FBTyxzQkFBWXo2QyxNQUFNLFNBQVVpTCxHQUMvQixPQUFRQSxFQUFHbEksT0FDUCxLQUFLLEVBRUQsTUFBTyxDQUFDLEVBQWFpSyxHQURyQjBrSCxFQUFZbUQsRUFBYW5ELFdBQ2MsU0FBVWdDLEdBQ3pDLElBQUlBLEdBQTRDLElBQWhDQSxFQUFTdEIsbUJBSXpCLE9BQU9zQixNQUVuQixLQUFLLEVBRUQsS0FEQWo1RSxFQUFReHZDLEVBQUdqSSxRQUNDLE1BQU8sQ0FBQyxFQUFhLEdBQ2pDLEdBQW1DLElBQTdCeTNDLEVBQU0yM0UsbUJBQTZDLE1BQU8sQ0FBQyxFQUFhLEdBRTlFLE1BQU0vN0csR0FBY3RYLE9BQU8sK0JBQy9CLEtBQUssRUFDRCxHQUFtQyxJQUE3QjA3QyxFQUFNMjNFLG1CQUEyQyxNQUFPLENBQUMsRUFBYSxHQUM1RSxHQUFNcG9ILFVBQVU4cEgsT0FBUSxNQUFPLENBQUMsRUFBYSxHQUM3QyxNQUFNejlHLEdBQWN0WCxPQUFPLGVBQy9CLEtBQUssRUFBRyxNQUFPLENBQUMsRUFBYTQySCxHQUEwQmpFLEVBQVdqM0UsSUFDbEUsS0FBSyxFQUVELE9BREF4dkMsRUFBR2pJLE9BQ0ksQ0FBQyxFQUFhc2UsR0FBT293RyxJQUNoQyxLQUFLLEVBQ0R6bUgsRUFBR2pJLE9BQ0hpSSxFQUFHbEksTUFBUSxFQUNmLEtBQUssRUFBRyxNQUFPLENBQUMsVUFpR1NxekgsQ0FBbUJ2QixPQUVyRCxXQUNIMWdILEdBQVNvRSxnQkFBZ0IsRUFBTWpDOzs7Ozs7Ozs7Ozs7Ozs7OztBYXhuQ25DLElBS0krL0csR0FVQUMsR0EwVUEsR0F6VkFDLEdBQXFCLGdCQUVyQkMsR0FBYSxjQUNiQyxHQUFhLFNBQ2JDLEdBQVcsMkNBaVNmLFNBQVNDLEdBQWlCQyxFQUEwQkMsRUFBZUMsR0FFL0QsSUFBSUMsRUFBVyxXQUVYLElBREEsSUFBSUMsRUFBUSxHQUNIcnNILEVBQUssRUFBR0EsRUFBS3ZLLFVBQVVDLE9BQVFzSyxJQUNwQ3FzSCxFQUFNcnNILEdBQU12SyxVQUFVdUssR0FHMUJ1RixPQUFPMm1ILEdBQWVwekgsS0FBS3JELFlBUy9CLE9BTkk4UCxPQUFPNG1ILElBQzZCLG1CQUE3QjVtSCxPQUFPNG1ILEtBRWRDLEVBQVc3bUgsT0FBTzRtSCxJQUV0QjVtSCxPQUFPNG1ILEdBekZYLFNBQWtCQyxFQUFVSCxHQUN4QixPQUFPLFNBQVVyTCxFQUFTMEwsRUFBa0JDLEdBRXhDLEdBQUkzTCxJQUFZOEssR0FBWWMsTUFBTyxDQUMvQixJQUFJQyxFQUFrQyxHQUd0QyxHQUFJRixHQUFjQSxFQUFvQixRQUFHLENBQ3JDLElBQUlHLEVBQWVILEVBQW9CLFFBRWxDcjNILE1BQU1vSCxRQUFRb3dILEtBQ2ZBLEVBQWUsQ0FBQ0EsSUFFcEIsSUFBSyxJQUFJMXNILEVBQUssRUFBRzJzSCxFQUFpQkQsRUFBYzFzSCxFQUFLMnNILEVBQWVqM0gsT0FBUXNLLElBQU0sQ0FDOUUsSUFBSTRzSCxFQUFXRCxFQUFlM3NILEdBQzFCNnNILEVBQXdCWixFQUF5QlcsR0FFckQsSUFBSUMsRUFHQyxDQUlESixFQUFrQyxHQUNsQyxNQVBBQSxFQUFnQzN6SCxLQUFLK3pILElBY2pELEdBQStDLElBQTNDSixFQUFnQy8ySCxPQUNoQyxJQUFLLElBQUk0SyxFQUFLLEVBQUdDLEVBQUsvTSxPQUFPa1gsT0FBT3VoSCxHQUEyQjNySCxFQUFLQyxFQUFHN0ssT0FBUTRLLElBQU0sQ0FDakYsSUFBSXdzSCxFQUFZdnNILEVBQUdELEdBQ25CbXNILEVBQWdDM3pILEtBQUtnMEgsR0FLN0MxMUgsUUFBUXVULElBQUk4aEgsR0FFUDUwSCxNQUFLLFdBQ04sT0FBT3UwSCxFQUFTVixHQUFZYyxNQUFPRixFQUFrQkMsR0FBYyxPQUVsRXB0SCxPQUFNLFNBQVV0SixHQUFLLE9BQU8wSSxRQUFRcEYsTUFBTXRELFdBRTlDLEdBQUkrcUgsSUFBWThLLEdBQVlxQixPQUFRLEVBQ0hkLEVBQXlCSyxJQUN2RGwxSCxRQUFRQyxXQUVQUSxNQUFLLFdBQ051MEgsRUFBU1YsR0FBWXFCLE9BQVFULEVBQWtCQyxNQUU5Q3B0SCxPQUFNLFNBQVV0SixHQUFLLE9BQU8wSSxRQUFRcEYsTUFBTXRELFdBTS9DdTJILEVBQVNWLEdBQVlzQixJQUFLVixJQTZCUFcsQ0FBU2IsRUFBVUgsR0FDdkMsQ0FDSEcsU0FBVUEsRUFDVmMsWUFBYTNuSCxPQUFPNG1ILEtBbFQ1QixTQUFXVCxHQUNQQSxFQUFtQixNQUFJLFFBQ3ZCQSxFQUFpQixJQUFJLE1BQ3JCQSxFQUFvQixPQUFJLFNBSDVCLENBSUdBLEtBQWdCQSxHQUFjLEtBTWpDLFNBQVdDLEdBQ1BBLEVBQTRCLGlCQUFJLG1CQUNoQ0EsRUFBdUIsWUFBSSxjQUMzQkEsRUFBMkIsZ0JBQUksa0JBQy9CQSxFQUEwQixlQUFJLGlCQUM5QkEsRUFBNkIsa0JBQUksb0JBQ2pDQSxFQUFxQixVQUFJLFlBQ3pCQSxFQUF5QixjQUFJLGdCQUM3QkEsRUFBaUIsTUFBSSxRQUNyQkEsRUFBcUIsVUFBSSxZQUN6QkEsRUFBb0IsU0FBSSxXQUN4QkEsRUFBa0IsT0FBSSxTQUN0QkEsRUFBNEIsaUJBQUksbUJBQ2hDQSxFQUF1QixZQUFJLGNBQzNCQSxFQUFrQixPQUFJLFNBQ3RCQSxFQUEwQixlQUFJLGlCQUM5QkEsRUFBK0Isb0JBQUksc0JBQ25DQSxFQUFpQixNQUFJLFFBQ3JCQSxFQUFtQixRQUFJLFVBQ3ZCQSxFQUEyQixnQkFBSSxrQkFDL0JBLEVBQXFCLFVBQUksWUFDekJBLEVBQTBCLGVBQUksaUJBQzlCQSxFQUEwQixlQUFJLGlCQUM5QkEsRUFBK0Isb0JBQUksc0JBdkJ2QyxDQXdCR0EsS0FBY0EsR0FBWSxLQWtUN0IsSUE4Q0l3QixHQUtBQyxHQW5EQTNoSCxLQUFVLEdBQUssSUFDWixZQUE2QixJQUFPbWdILEdBQXFCLGlIQUc1RCxHQUFHLGtCQUF5Qyw0SkFHNUMsR0FBRyx1QkFBbUQsaUpBR3RELEdBQUcsZ0NBQXFFLDZEQUN4RSxJQUNBLEdBQWdCLElBQUksZUFBYSxZQUFhLFlBQWFuZ0gsSUFxQjNEd2dILEdBQTJCLEdBSTNCQyxHQUFnQixZQUloQm1CLEdBQVcsT0FlWEMsSUFBaUIsRUFpQnJCLFNBQVM1MUMsR0FBUy90RSxHQUNkLEdBQUkyakgsR0FDQSxNQUFNLEdBQWNsNUgsT0FBTyx1QkFFM0J1VixFQUFRdWlILGdCQUNSQSxHQUFnQnZpSCxFQUFRdWlILGVBRXhCdmlILEVBQVEwakgsV0FDUkEsR0FBVzFqSCxFQUFRMGpILFVBRzNCLFNBQVNuNUcsR0FBUXZHLEVBQUs0L0csR0FDbEIsSUFBSUMsRUFBYzcvRyxFQUFJaEUsUUFBUWlpSCxJQUM5QixJQUFLNEIsRUFDRCxNQUFNLEdBQWNwNUgsT0FBTyxZQUUvQixHQUE2QyxNQUF6QzYzSCxHQUF5QnVCLEdBQ3pCLE1BQU0sR0FBY3A1SCxPQUFPLGlCQUF1QyxDQUM5RG1oQixHQUFJaTRHLElBR1osSUFBS0YsR0FBZ0IsRUExSHpCLFdBRUksSUFEQSxJQUFJRyxFQUFhbG9ILE9BQU9rUCxTQUFTaTVHLHFCQUFxQixVQUM3QzF0SCxFQUFLLEVBQUdNLEVBQUs5TSxPQUFPa1gsT0FBTytpSCxHQUFhenRILEVBQUtNLEVBQUc1SyxPQUFRc0ssSUFBTSxDQUNuRSxJQUFJMlosRUFBTXJaLEVBQUdOLEdBQ2IsR0FBSTJaLEVBQUl3NkUsS0FBT3g2RSxFQUFJdzZFLElBQUl3a0IsU0FBU29ULElBQzVCLE9BQU9weUcsRUFHZixPQUFPOzs7Ozs7Ozs7Ozs7Ozs7O0lBc0hFZzBHLElBN1BiLFNBQXlCekIsR0FDckIsSUFBSTBCLEVBQVNuNUcsU0FBU3dCLGNBQWMsVUFHcEMyM0csRUFBT3o1QixJQUFNNDNCLEdBQVcsTUFBUUcsRUFDaEMwQixFQUFPbnBILE9BQVEsRUFDZmdRLFNBQVNNLEtBQUt1QixZQUFZczNHLEdBd1BsQkMsQ0FBZ0IzQixJQW5QNUIsU0FBOEJBLEdBRTFCLElBQUk0QixFQUFZLEdBQ1o1NEgsTUFBTW9ILFFBQVFpSixPQUFPMm1ILElBQ3JCNEIsRUFBWXZvSCxPQUFPMm1ILEdBR25CM21ILE9BQU8ybUgsR0FBaUI0QixFQThPeEJDLENBQXFCN0IsSUFDckIsSUFBSTVySCxFQUFLMHJILEdBQWlCQyxHQUEwQkMsR0FBZW1CLElBQVdILEVBQWM1c0gsRUFBRzRzSCxZQUFhZCxFQUFXOXJILEVBQUc4ckgsU0FDMUhnQixHQUFzQkYsRUFDdEJDLEdBQW1CZixFQUNuQmtCLElBQWlCLEVBc0JyQixPQW5CQXJCLEdBQXlCdUI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBbFM3QixTQUF3QjcvRyxFQUFLNC9HLEVBQWVuQixHQUN4QyxPQUFPLG9CQUFVLzJILFVBQU0sT0FBUSxHQUFRLFdBQ25DLElBQUkreEgsRUFDQTltSCxFQUNKLE9BQU8sc0JBQVlqTCxNQUFNLFNBQVVrTCxHQUMvQixPQUFRQSxFQUFHbkksT0FDUCxLQUFLLEVBQUcsTUFBTyxDQUFDLEVBQWFtMUgsRUFBYy9CLFNBQzNDLEtBQUssRUFlRCxPQWRBcEUsRUFBTTdtSCxFQUFHbEksT0FLVCt6SCxFQUFTLEtBQU0sSUFBSTF0SCxNQUduQjB0SCxFQUFTVixHQUFZcUIsT0FBUXAvRyxFQUFJaEUsUUFBUWlpSCxNQUFzQnRySCxFQUFLLElBQzdEdXJILElBQWN6RSxFQUVqQjltSCxFQUFHd3JILElBQWMsV0FDakJ4ckgsRUFBRytCLFFBQVMsRUFDWi9CLElBQ0csQ0FBQyxVQTRRZ0IwdEgsQ0FBZXJnSCxFQUFLNC9HLEVBQWVKLElBQ25ELENBQ3BCeC9HLElBQUtBLEVBQ0xzZ0gsU0FBVSxTQUFVQyxFQUFXQyxFQUFheGtIOzs7Ozs7Ozs7Ozs7Ozs7OztBQUN4QyxPQXpZWixTQUFrQnlrSCxFQUFjWixFQUFhVSxFQUFXQyxFQUFheGtILEdBQ2pFLElBQUloRCxFQUFTd25ILEdBQWUsR0FDdkJ4a0gsR0FBWUEsRUFBUWpFLFNBQ3JCaUIsRUFBUyxtQkFBUyxtQkFBUyxHQUFJd25ILEdBQWMsQ0FBRSxRQUFXWCxLQUc5RFksRUFBYTFDLEdBQVljLE1BQU8wQixFQUFXdm5ILEdBQVUsSUFtWXRDc25ILENBQVNiLEdBQXFCSSxFQUFhVSxFQUFXQyxFQUFheGtILElBRTlFMGtILGlCQUFrQixTQUFVQyxFQUFZM2tILEdBQ3BDLE9BN1haLFNBQTBCeWtILEVBQWNaLEVBQWFjLEVBQVkza0gsR0FDekRBLEdBQVdBLEVBQVFqRSxPQUNuQjBvSCxFQUFhMUMsR0FBWXNCLElBQUssQ0FBRSxZQUFlc0IsSUFHL0NGLEVBQWExQyxHQUFZcUIsT0FBUVMsRUFBYSxDQUMxQ25ySCxRQUFRLEVBQ1IsWUFBZWlzSCxJQXNYUkQsQ0FBaUJqQixHQUFxQkksRUFBYWMsRUFBWTNrSCxJQUUxRTRrSCxVQUFXLFNBQVVoNUcsRUFBSTVMLEdBQ3JCLE9BL1daLFNBQW1CeWtILEVBQWNaLEVBQWFqNEcsRUFBSTVMLEdBQzFDQSxHQUFXQSxFQUFRakUsT0FDbkIwb0gsRUFBYTFDLEdBQVlzQixJQUFLLENBQUUsUUFBV3ozRyxJQUczQzY0RyxFQUFhMUMsR0FBWXFCLE9BQVFTLEVBQWEsQ0FDMUNuckgsUUFBUSxFQUNSLFFBQVdrVCxJQXdXSmc1RyxDQUFVbkIsR0FBcUJJLEVBQWFqNEcsRUFBSTVMLElBRTNENmtILGtCQUFtQixTQUFVdDlHLEVBQVl2SCxHQUNyQyxPQWpXWixTQUEyQnlrSCxFQUFjWixFQUFhdDhHLEVBQVl2SCxHQUM5RCxHQUFJQSxHQUFXQSxFQUFRakUsT0FBUSxDQUUzQixJQURBLElBQUkrb0gsRUFBaUIsR0FDWnp1SCxFQUFLLEVBQUdNLEVBQUs5TSxPQUFPZ04sS0FBSzBRLEdBQWFsUixFQUFLTSxFQUFHNUssT0FBUXNLLElBQU0sQ0FDakUsSUFBSTNMLEVBQU1pTSxFQUFHTixHQUVieXVILEVBQWUsbUJBQXFCcDZILEdBQU82YyxFQUFXN2MsR0FFMUQrNUgsRUFBYTFDLEdBQVlzQixJQUFLeUIsUUFHOUJMLEVBQWExQyxHQUFZcUIsT0FBUVMsRUFBYSxDQUMxQ25ySCxRQUFRLEVBQ1IsZ0JBQW1CNk8sSUFvVlpzOUcsQ0FBa0JwQixHQUFxQkksRUFBYXQ4RyxFQUFZdkgsSUFFM0Ura0gsOEJBQStCLFNBQVVDLEdBQ3JDLE9BOVVaLFNBQXVDbkIsRUFBYW1CLEdBQ2hEcHBILE9BQU8sY0FBZ0Jpb0gsSUFBZ0JtQixFQTZVeEJELENBQThCbEIsRUFBYW1CLEtBTTlELElBQUksR0FBTyxzQkFDUCxHQUFVLFFBcUJWQyxHQUFpQixhQUNyQixTQUEyQnBsSCxHQUN2QkEsRUFBU3FCLFNBQVN1RCxrQkFBa0IsSUFBSSxZQUFVd2dILElBQWdCLFNBQVUvbEgsR0FNeEUsT0FBT3FMLEdBSkdyTCxFQUFVdUMsWUFBWSxPQUFPMUIsZUFDbkJiLEVBQ2Z1QyxZQUFZLGlCQUNaMUIsa0JBRU4sVUFBdUJqQixnQkFBZ0IsQ0FDdENpdkUsU0FBVUEsR0FDVmkwQyxVQUFXQSxNQUVmbmlILEVBQVNxQixTQUFTdUQsa0JBQWtCLElBQUksWUFBVSxzQkFFbEQsU0FBeUJ2RixHQUNyQixJQUVJLE1BQU8sQ0FDSG9sSCxTQUZZcGxILEVBQVV1QyxZQUFZd2pILElBQWdCbGxILGVBRTlCdWtILFVBRzVCLE1BQU9wNEgsR0FDSCxNQUFNLEdBQWN6QixPQUFPLCtCQUFtRSxDQUMxRjR4QixPQUFRbndCLE9BWHFFLFlBQ3pGMlQsRUFBU29FLGdCQUFnQixHQUFNLElBZW5DaWhILENBQWtCLEs7Ozs7Ozs7Ozs7Ozs7Ozs7T0MvZ0JkLEdBb0tBQyxHQW5LQUMsS0FBYSxHQUFLLElBQ2YsNEJBQXdELGdEQUMzRCxHQUFHLHdCQUFnRCx3REFDbkQsR0FBRyx1QkFBbUQsdURBQ3RELEdBQUcsaUJBQXVDLCtHQUUxQyxHQUFHLHNCQUFpRCxtRUFDcEQsR0FBRyxzQkFBaUQsaUVBQ3BELEdBQUcsdUJBQW1ELDJFQUV0RCxHQUFHLHlCQUF1RCxtQ0FDMUQsR0FBRyxxQ0FBeUUsK0VBRTVFLEdBQUcsNEJBQTZELHdEQUNoRSxHQUFHLDJCQUEyRCx5RUFFOUQsR0FBRyx1QkFBbUQsK0NBQ3RELEdBQUcsb0JBQTZDLDZEQUNoRCxHQUFHLDBCQUF5RCxvRUFDNUQsR0FBRyw0QkFBNkQsMkRBQ2hFLEdBQUcsNEJBQTZELHdFQUVoRSxHQUFHLHVCQUFtRCxtRUFDdEQsR0FBRyx5QkFBdUQsd0RBQzFELEdBQUcsMkJBQTJELDRJQUU5RCxHQUFHLHdCQUFxRCxrRkFFeEQsR0FBRywwQkFBeUQsb0ZBRTVELEdBQUcsMEJBQXlELG1HQUU1RCxHQUFHLGdDQUFxRSxpRUFDeEUsR0FBRywyQkFBMkQsK0RBQzlELEdBQUcseUJBQXVELDBJQUcxRCxHQUFHLGdDQUFxRSx1SEFHeEUsR0FBRywwQkFBeUQsOENBQzVELEdBQUcsZ0JBQXFDLHVIQUV4QyxHQUFHLGFBQStCLHlFQUVsQyxHQUFHLGlCQUF1QywwREFDMUMsR0FBRyxvQkFBNkMscURBQ2hELEdBQUcsYUFBK0Isd0VBRWxDLEdBQUcsMkJBQTJELHNDQUM5RCxHQUFHLDRCQUE2RCx5Q0FDaEUsR0FBRyxtQ0FBMkUsd0lBRTlFLEdBQUcsc0NBQTJFLDhEQUM5RSxJQUNBQyxHQUFlLElBQUksZUFBYSxZQUFhLFlBQWFELElBa0IxREUsR0FBMkIsSUFBSW52RyxXQUFXLENBQzFDLEVBQ0EsR0FDQSxJQUNBLElBQ0EsSUFDQSxJQUNBLElBQ0EsSUFDQSxJQUNBLEVBQ0EsSUFDQSxHQUNBLEdBQ0EsSUFDQSxJQUNBLEdBQ0EsSUFDQSxHQUNBLElBQ0EsSUFDQSxJQUNBLEdBQ0EsSUFDQSxJQUNBLEdBQ0EsR0FDQSxHQUNBLElBQ0EsSUFDQSxJQUNBLElBQ0EsSUFDQSxHQUNBLElBQ0EsSUFDQSxJQUNBLElBQ0EsSUFDQSxJQUNBLEdBQ0EsSUFDQSxHQUNBLElBQ0EsSUFDQSxJQUNBLElBQ0EsSUFDQSxJQUNBLEdBQ0EsR0FDQSxHQUNBLEdBQ0EsRUFDQSxJQUNBLElBQ0EsR0FDQSxJQUNBLEdBQ0EsSUFDQSxJQUNBLElBQ0EsR0FDQSxJQUNBLElBQ0EsTUFFQW92RyxHQUFXOzs7Ozs7Ozs7Ozs7Ozs7OztBQTZDZixTQUFTQyxHQUFtQjExSCxFQUFHMUUsR0FDM0IsR0FBUyxNQUFMMEUsR0FBa0IsTUFBTDFFLEVBQ2IsT0FBTyxFQUVYLEdBQUkwRSxJQUFNMUUsRUFDTixPQUFPLEVBRVgsR0FBSTBFLEVBQUUyMUgsYUFBZXI2SCxFQUFFcTZILFdBQ25CLE9BQU8sRUFJWCxJQUZBLElBQUlDLEVBQVEsSUFBSUMsU0FBUzcxSCxHQUNyQjgxSCxFQUFRLElBQUlELFNBQVN2NkgsR0FDaEJqQyxFQUFJLEVBQUdBLEVBQUkyRyxFQUFFMjFILFdBQVl0OEgsSUFDOUIsR0FBSXU4SCxFQUFNRyxTQUFTMThILEtBQU95OEgsRUFBTUMsU0FBUzE4SCxHQUNyQyxPQUFPLEVBR2YsT0FBTzs7Ozs7Ozs7Ozs7Ozs7OztHQXVCWCxTQUFTMjhILEdBQW9CQyxHQUV6QixPQU5KLFNBQWtCQSxHQUNkLElBQUlDLEVBQWUsSUFBSTd2RyxXQUFXNHZHLEdBQ2xDLE9BQU9yeUgsS0FBS0ssT0FBT0MsYUFBYWhJLE1BQU0rSCxPQUFRLG1CQUFTaXlILEtBR3BDbHZHLENBQVNpdkcsR0FFdkIvdUgsUUFBUSxLQUFNLElBQ2RBLFFBQVEsTUFBTyxLQUNmQSxRQUFRLE1BQU87Ozs7Ozs7Ozs7Ozs7Ozs7SUFsRXhCLFNBQVdtdUgsR0FDUEEsRUFBK0Isa0JBQUksb0JBQ25DQSxFQUFrQyxxQkFBSSx1QkFGMUMsQ0FHR0EsS0FBZ0JBLEdBQWMsS0FrRmpDLElBQUksR0FBcUMsV0FDckMsU0FBU2MsS0FtSVQsT0FqSUFBLEVBQW9CbDdILFVBQVV5OEQsU0FBVyxTQUFVM21ELEVBQVVxbEgsRUFBY0MsR0FDdkUsT0FBTyxvQkFBVXo2SCxVQUFNLE9BQVEsR0FBUSxXQUNuQyxJQUFJcWxGLEVBQVMzaUYsRUFBTWc0SCxFQUFrQkMsRUFBd0JDLEVBQU83MEgsRUFDcEUsT0FBTyxzQkFBWS9GLE1BQU0sU0FBVWlMLEdBQy9CLE9BQVFBLEVBQUdsSSxPQUNQLEtBQUssRUFBRyxNQUFPLENBQUMsRUFBYSxHQUFXb1MsSUFDeEMsS0FBSyxFQUNEa3dFLEVBQVVwNkUsRUFBR2pJLE9BQ2JOLEVBQU9tNEgsR0FBUUwsRUFBY0MsR0FDN0JDLEVBQW1CLENBQ2Zwc0gsT0FBUSxPQUNSKzJFLFFBQVNBLEVBQ1QzaUYsS0FBTWdKLEtBQUtzRyxVQUFVdFAsSUFFekJ1SSxFQUFHbEksTUFBUSxFQUNmLEtBQUssRUFFRCxPQURBa0ksRUFBR2hJLEtBQUtRLEtBQUssQ0FBQyxFQUFHLEVBQUcsQ0FBRSxJQUNmLENBQUMsRUFBYTR5RyxNQUFNeWtCLEdBQVkzbEgsRUFBU21ELEtBQU1vaUgsSUFDMUQsS0FBSyxFQUVELE1BQU8sQ0FBQyxFQURHenZILEVBQUdqSSxPQUNnQnl4RixRQUNsQyxLQUFLLEVBRUQsT0FEQWttQyxFQUFlMXZILEVBQUdqSSxPQUNYLENBQUMsRUFBYSxHQUN6QixLQUFLLEVBRUQsTUFEQTQzSCxFQUFRM3ZILEVBQUdqSSxPQUNMMjJILEdBQWE1NkgsT0FBTyx5QkFBdUQsQ0FDN0VnOEgsVUFBV0gsSUFFbkIsS0FBSyxFQUNELEdBQUlELEVBQWE3MkgsTUFFYixNQURBaUMsRUFBVTQwSCxFQUFhNzJILE1BQU1pQyxRQUN2QjR6SCxHQUFhNTZILE9BQU8seUJBQXVELENBQzdFZzhILFVBQVdoMUgsSUFHbkIsSUFBSzQwSCxFQUFhOXVILE1BQ2QsTUFBTTh0SCxHQUFhNTZILE9BQU8sNEJBRTlCLE1BQU8sQ0FBQyxFQUFjNDdILEVBQWE5dUgsZUFRdkQwdUgsRUFBb0JsN0gsVUFBVTI3SCxZQUFjLFNBQVVDLEVBQWM5bEgsRUFBVXFsSCxFQUFjQyxHQUN4RixPQUFPLG9CQUFVejZILFVBQU0sT0FBUSxHQUFRLFdBQ25DLElBQUlxbEYsRUFBUzNpRixFQUFNdzRILEVBQWVQLEVBQXdCUSxFQUFPcDFILEVBQ2pFLE9BQU8sc0JBQVkvRixNQUFNLFNBQVVpTCxHQUMvQixPQUFRQSxFQUFHbEksT0FDUCxLQUFLLEVBQUcsTUFBTyxDQUFDLEVBQWEsR0FBV29TLElBQ3hDLEtBQUssRUFDRGt3RSxFQUFVcDZFLEVBQUdqSSxPQUNiTixFQUFPbTRILEdBQVFMLEVBQWNDLEdBQzdCUyxFQUFnQixDQUNaNXNILE9BQVEsUUFDUisyRSxRQUFTQSxFQUNUM2lGLEtBQU1nSixLQUFLc0csVUFBVXRQLElBRXpCdUksRUFBR2xJLE1BQVEsRUFDZixLQUFLLEVBRUQsT0FEQWtJLEVBQUdoSSxLQUFLUSxLQUFLLENBQUMsRUFBRyxFQUFHLENBQUUsSUFDZixDQUFDLEVBQWE0eUcsTUFBTXlrQixHQUFZM2xILEVBQVNtRCxLQUFPLElBQU0yaUgsRUFBYUcsU0FBVUYsSUFDeEYsS0FBSyxFQUVELE1BQU8sQ0FBQyxFQURHandILEVBQUdqSSxPQUNnQnl4RixRQUNsQyxLQUFLLEVBRUQsT0FEQWttQyxFQUFlMXZILEVBQUdqSSxPQUNYLENBQUMsRUFBYSxHQUN6QixLQUFLLEVBRUQsTUFEQW00SCxFQUFRbHdILEVBQUdqSSxPQUNMMjJILEdBQWE1NkgsT0FBTyxzQkFBaUQsQ0FDdkVnOEgsVUFBV0ksSUFFbkIsS0FBSyxFQUNELEdBQUlSLEVBQWE3MkgsTUFFYixNQURBaUMsRUFBVTQwSCxFQUFhNzJILE1BQU1pQyxRQUN2QjR6SCxHQUFhNTZILE9BQU8sc0JBQWlELENBQ3ZFZzhILFVBQVdoMUgsSUFHbkIsSUFBSzQwSCxFQUFhOXVILE1BQ2QsTUFBTTh0SCxHQUFhNTZILE9BQU8seUJBRTlCLE1BQU8sQ0FBQyxFQUFjNDdILEVBQWE5dUgsZUFLdkQwdUgsRUFBb0JsN0gsVUFBVWc4SCxZQUFjLFNBQVVsbUgsRUFBVThsSCxHQUM1RCxPQUFPLG9CQUFVajdILFVBQU0sT0FBUSxHQUFRLFdBQ25DLElBQUlxbEYsRUFBU2kyQyxFQUE4QlgsRUFBYzUwSCxFQUFTdzFILEVBQ2xFLE9BQU8sc0JBQVl2N0gsTUFBTSxTQUFVaUwsR0FDL0IsT0FBUUEsRUFBR2xJLE9BQ1AsS0FBSyxFQUFHLE1BQU8sQ0FBQyxFQUFhLEdBQVdvUyxJQUN4QyxLQUFLLEVBQ0Rrd0UsRUFBVXA2RSxFQUFHakksT0FDYnM0SCxFQUFxQixDQUNqQmh0SCxPQUFRLFNBQ1IrMkUsUUFBU0EsR0FFYnA2RSxFQUFHbEksTUFBUSxFQUNmLEtBQUssRUFFRCxPQURBa0ksRUFBR2hJLEtBQUtRLEtBQUssQ0FBQyxFQUFHLEVBQUcsQ0FBRSxJQUNmLENBQUMsRUFBYTR5RyxNQUFNeWtCLEdBQVkzbEgsRUFBU21ELEtBQU8sSUFBTTJpSCxFQUFhRyxTQUFVRSxJQUN4RixLQUFLLEVBRUQsTUFBTyxDQUFDLEVBREdyd0gsRUFBR2pJLE9BQ2dCeXhGLFFBQ2xDLEtBQUssRUFFRCxJQURBa21DLEVBQWUxdkgsRUFBR2pJLFFBQ0RjLE1BRWIsTUFEQWlDLEVBQVU0MEgsRUFBYTcySCxNQUFNaUMsUUFDdkI0ekgsR0FBYTU2SCxPQUFPLDJCQUEyRCxDQUNqRmc4SCxVQUFXaDFILElBR25CLE1BQU8sQ0FBQyxFQUFhLEdBQ3pCLEtBQUssRUFFRCxNQURBdzFILEVBQVF0d0gsRUFBR2pJLE9BQ0wyMkgsR0FBYTU2SCxPQUFPLDJCQUEyRCxDQUNqRmc4SCxVQUFXUSxJQUVuQixLQUFLLEVBQUcsTUFBTyxDQUFDLFdBS3pCaEIsRUFwSTZCLEdBc0l4QyxTQUFTTyxHQUFZeGlILEdBQ2pCLE9BQU91aEgsR0FBVyxhQUFldmhILEVBQUloRSxRQUFRNFgsVUFBWSxpQkFFN0QsU0FBUyxHQUFXamhCLEdBQ2hCLElBQUlxTixFQUFNck4sRUFBR3FOLElBQUs0L0csRUFBZ0JqdEgsRUFBR2l0SCxjQUNyQyxPQUFPLG9CQUFVbDRILFVBQU0sT0FBUSxHQUFRLFdBQ25DLElBQUlxeUgsRUFDSixPQUFPLHNCQUFZcnlILE1BQU0sU0FBVWtMLEdBQy9CLE9BQVFBLEVBQUduSSxPQUNQLEtBQUssRUFBRyxNQUFPLENBQUMsRUFBYW0xSCxFQUFjcDhELFlBQzNDLEtBQUssRUFFRCxPQURBdTJELEVBQVlubkgsRUFBR2xJLE9BQ1IsQ0FBQyxFQUFjLElBQUlzekcsUUFBUSxDQUMxQixlQUFnQixtQkFDaEJrYixPQUFRLG1CQUNSLGlCQUFrQmw1RyxFQUFJaEUsUUFBUWk5RyxPQUM5QixxQ0FBc0MsT0FBU2MsWUFNM0UsU0FBU3dJLEdBQVFMLEVBQWNDLEdBQzNCLElBQUllLEVBQVNwQixHQUFvQkksRUFBYXBILE9BQU8sV0FDakRwNEQsRUFBT28vRCxHQUFvQkksRUFBYXBILE9BQU8sU0FDL0Mxd0gsRUFBTyxDQUNQKzRILElBQUssQ0FDRHpKLFNBQVV3SSxFQUFheEksU0FDdkJ3SixPQUFRQSxFQUNSeGdFLEtBQU1BLElBTWQsT0FISzgrRCxHQUFtQlcsRUFBU252RyxPQUFRc3VHLEdBQXlCdHVHLFVBQzlENW9CLEVBQUsrNEgsSUFBSUMsa0JBQW9CdEIsR0FBb0JLLElBRTlDLzNIOzs7Ozs7Ozs7Ozs7Ozs7O0dBbUJYLFNBQVNpNUgsR0FBb0JDLEdBT3pCLElBTkEsSUFDSXQxSCxHQUFVczFILEVBREEsSUFBSUMsUUFBUSxFQUFLRCxFQUFhdjdILE9BQVMsR0FBTSxJQUV0RGlMLFFBQVEsTUFBTyxLQUNmQSxRQUFRLEtBQU0sS0FDZnd3SCxFQUFVajFILEtBQUtQLEdBQ2Z5MUgsRUFBYyxJQUFJdHhHLFdBQVdxeEcsRUFBUXo3SCxRQUNoQzVDLEVBQUksRUFBR0EsRUFBSXErSCxFQUFRejdILFNBQVU1QyxFQUNsQ3MrSCxFQUFZdCtILEdBQUtxK0gsRUFBUXoxSCxXQUFXNUksR0FFeEMsT0FBT3MrSDs7Ozs7Ozs7Ozs7Ozs7OztHQW1CWCxJQUFJQyxHQUFjLFlBQ2RDLEdBQXdCLHlCQStCNUIsU0FBU0MsR0FBUS9tSCxHQUNiLElBQUlpRyxFQUFVcUQsVUFBVXlkLEtBQUs4L0YsSUFDN0I1Z0gsRUFBUUUsUUFBVSxTQUFVNmdILEtBRzVCL2dILEVBQVFDLFVBQVksU0FBVThnSCxJQW5DbEMsU0FBa0JsL0csRUFBSTlILEdBQ2xCLEdBQUs4SCxFQUFHK2hCLGlCQUFpQnZ2QixTQUFTd3NILElBQWxDLENBS0EsSUFDSXQrRyxFQURjVixFQUFHRSxZQUFZOCtHLElBQ0h0K0csWUFBWXMrRyxJQUN0Q0csRUFBc0IsSUFBSSxHQUMxQkMsRUFBb0IxK0csRUFBWTZpQixhQUNwQzY3RixFQUFrQi9nSCxRQUFVLFNBQVVxRCxHQUVsQ3pWLFFBQVFtQyxLQUFLLDZCQUE4QnNULElBRS9DMDlHLEVBQWtCaGhILFVBQVksV0FDMUIsSUFBSWdCLEVBQVNnZ0gsRUFBa0IvNUgsT0FDL0IsR0FBSStaLEVBQVEsQ0FHUixJQUFJNCtHLEVBQWU1K0csRUFBTzNkLE1BRTFCMDlILEVBQW9CZixZQUFZbG1ILEVBQVU4bEgsR0FDMUM1K0csRUFBT2lDLGdCQUdQckIsRUFBR2xQLFFBQ0gwUSxVQUFVOGQsZUFBZXkvRixNQVc3Qk0sQ0FEU2xoSCxFQUFROVksT0FDSjZTOzs7Ozs7Ozs7Ozs7Ozs7O0dBb0JyQixJQUFJLEdBQTZCLFdBQzdCLFNBQVNvbkgsSUFDTHY4SCxLQUFLZ3pILFVBQVksS0E4RnJCLE9BM0ZBdUosRUFBWWw5SCxVQUFVZixJQUFNLFNBQVVVLEdBQ2xDLE9BQU9nQixLQUFLNHBFLG1CQUFrQixTQUFVanNELEdBQWUsT0FBT0EsRUFBWXJmLElBQUlVLE9BR2xGdTlILEVBQVlsOUgsVUFBVW05SCxTQUFXLFNBQVVyZ0gsRUFBT25kLEdBSzlDLE9BQU9nQixLQUFLNHBFLG1CQUpaLFNBQW9CanNELEdBRWhCLE9BRGVBLEVBQVl4QixNQUFNQSxHQUNqQjdkLElBQUlVLE9BTTVCdTlILEVBQVlsOUgsVUFBVTgvQixJQUFNLFNBQVV6Z0MsR0FDbEMsT0FBT3NCLEtBQUs0cEUsbUJBQWtCLFNBQVVqc0QsR0FBZSxPQUFPQSxFQUFZd2hCLElBQUl6Z0MsS0FBVyxjQUc3RjY5SCxFQUFZbDlILFVBQVU2VixPQUFTLFNBQVVsVyxHQUNyQyxPQUFPZ0IsS0FBSzRwRSxtQkFBa0IsU0FBVWpzRCxHQUFlLE9BQU9BLEVBQVl6SSxPQUFPbFcsS0FBUyxjQUs5RnU5SCxFQUFZbDlILFVBQVVvOUgsY0FBZ0IsV0FDbEMsT0FBTyxvQkFBVXo4SCxVQUFNLE9BQVEsR0FBUSxXQUVuQyxPQUFPLHNCQUFZQSxNQUFNLFNBQVVpTCxHQUMvQixPQUFRQSxFQUFHbEksT0FDUCxLQUFLLEVBQ0QsT0FBSy9DLEtBQUtnekgsVUFDSCxDQUFDLEVBQWFoekgsS0FBS2d6SCxXQURFLENBQUMsRUFBYSxHQUU5QyxLQUFLLEVBQ0kvbkgsRUFBR2pJLE9BQ0wrSyxRQUNIL04sS0FBS2d6SCxVQUFZLEtBQ2pCL25ILEVBQUdsSSxNQUFRLEVBQ2YsS0FBSyxFQUFHLE1BQU8sQ0FBQyxXQVdoQ3c1SCxFQUFZbDlILFVBQVV1cUUsa0JBQW9CLFNBQVU4eUQsRUFBWTk5SCxHQUU1RCxZQURhLElBQVRBLElBQW1CQSxFQUFPLFlBQ3ZCLG9CQUFVb0IsVUFBTSxPQUFRLEdBQVEsV0FDbkMsSUFBSWlkLEVBQUlFLEVBQWEvQixFQUFTOVksRUFDOUIsT0FBTyxzQkFBWXRDLE1BQU0sU0FBVWlMLEdBQy9CLE9BQVFBLEVBQUdsSSxPQUNQLEtBQUssRUFBRyxNQUFPLENBQUMsRUFBYS9DLEtBQUsyOEgsU0FDbEMsS0FBSyxFQUlELE9BSEExL0csRUFBS2hTLEVBQUdqSSxPQUNSbWEsRUFBY0YsRUFBR0UsWUFBWW5kLEtBQUs0OEgsZ0JBQWlCaCtILEdBQ25Ed2MsRUFBVStCLEVBQVlRLFlBQVkzZCxLQUFLNDhILGlCQUNoQyxDQUFDLEVBQWFDLEdBQVVILEVBQVd0aEgsS0FDOUMsS0FBSyxFQUVELE9BREE5WSxFQUFTMkksRUFBR2pJLE9BQ0wsQ0FBQyxFQUFjLElBQUlqQixTQUFRLFNBQVVDLEVBQVNDLEdBQzdDa2IsRUFBWUwsV0FBYSxXQUNyQjlhLEVBQVFNLElBRVo2YSxFQUFZN0IsUUFBVSxXQUNsQnJaLEVBQU9rYixFQUFZclosb0JBUW5EeTRILEVBQVlsOUgsVUFBVXM5SCxNQUFRLFdBQzFCLElBQUlqekgsRUFBUTFKLEtBY1osT0FiS0EsS0FBS2d6SCxZQUNOaHpILEtBQUtnekgsVUFBWSxJQUFJanhILFNBQVEsU0FBVUMsRUFBU0MsR0FDNUMsSUFBSW1aLEVBQVVxRCxVQUFVeWQsS0FBS3h5QixFQUFNbTRDLE9BQVFuNEMsRUFBTW96SCxXQUNqRDFoSCxFQUFRQyxVQUFZLFdBQ2hCclosRUFBUW9aLEVBQVE5WSxTQUVwQjhZLEVBQVFFLFFBQVUsV0FDZDVSLEVBQU1zcEgsVUFBWSxLQUNsQi93SCxFQUFPbVosRUFBUXRYLFFBRW5Cc1gsRUFBUXNELGdCQUFrQixTQUFVQyxHQUFTLE9BQU9qVixFQUFNcXpILFlBQVkzaEgsRUFBU3VELFFBR2hGM2UsS0FBS2d6SCxXQUVUdUosRUFoR3FCLEdBbUdoQyxTQUFTTSxHQUFVemhILEdBQ2YsT0FBTyxJQUFJclosU0FBUSxTQUFVQyxFQUFTQyxHQUNsQ21aLEVBQVFDLFVBQVksV0FDaEJyWixFQUFRb1osRUFBUTlZLFNBRXBCOFksRUFBUUUsUUFBVSxXQUNkclosRUFBT21aLEVBQVF0WDs7Ozs7Ozs7Ozs7Ozs7OztHQXFCM0IsSUFBSSxHQUFtQyxTQUFVcUcsR0FFN0MsU0FBUzZ5SCxFQUFrQjduSCxHQUN2QixJQUFJekwsRUFBUVMsRUFBT3ZNLEtBQUtvQyxPQUFTQSxLQUtqQyxPQUpBMEosRUFBTXlMLFNBQVdBLEVBQ2pCekwsRUFBTW00QyxPQUFTLHVCQUNmbjRDLEVBQU1vekgsVUFBWSxFQUNsQnB6SCxFQUFNa3pILGdCQUFrQix5QkFDakJsekgsRUFtS1gsT0ExS0Esb0JBQVVzekgsRUFBbUI3eUgsR0FTN0I2eUgsRUFBa0IzOUgsVUFBVTA5SCxZQUFjLFNBQVUzaEgsRUFBU3VELEdBQ3pELElBQUkxQixFQUFLN0IsRUFBUTlZLE9BRWpCLE9BQVFxYyxFQUFNekIsWUFDVixLQUFLLEdBRUdTLEVBQWNWLEVBQUdZLGtCQUFrQjdkLEtBQUs0OEgsZ0JBQWlCLENBQ3pELzJGLFFBQVMsYUFHRHBvQixZQUFZLGNBQWUsY0FBZSxDQUNsRGk1QixRQUFRLElBRVovNEIsRUFBWUYsWUFBWSxXQUFZLFdBQVksQ0FBRWk1QixRQUFRLElBRTlELEtBQUssRUFJRHdsRixHQUFRbDhILEtBQUttVixVQUVqQixLQUFLLEVBSUQsSUFDSThuSCxHQURBdC9HLEVBQWN2QyxFQUFRK0IsWUFBWVEsWUFBWTNkLEtBQUs0OEgsa0JBQ3JCcDhGLGFBQ2xDeThGLEVBQWdCNWhILFVBQVksV0FDeEIsSUFBSWdCLEVBQVM0Z0gsRUFBZ0IzNkgsT0FDN0IsR0FBSStaLEVBQVEsQ0FDUixJQUFJM2QsRUFBUTJkLEVBQU8zZCxNQUNmeXRDLEVBQVcsbUJBQVMsR0FBSXp0QyxHQUN2QkEsRUFBTXcrSCxhQUNQL3dGLEVBQVMrd0YsV0FBYTd6SCxLQUFLc0gsT0FFRCxpQkFBbkJqUyxFQUFNKzdILFdBQ2J0dUYsRUFBU3N1RixTQUFXa0IsR0FBb0JqOUgsRUFBTSs3SCxXQUV4QixpQkFBZi83SCxFQUFNczhELE9BQ2I3dUIsRUFBUzZ1QixLQUFPMmdFLEdBQW9CajlILEVBQU1zOEQsTUFBTTF2QyxRQUUxQixpQkFBZjVzQixFQUFNczhELE9BQ2I3dUIsRUFBU3F2RixPQUFTRyxHQUFvQmo5SCxFQUFNODhILFFBQVFsd0csUUFFeEIsaUJBQXJCNXNCLEVBQU15K0gsbUJBQ05oeEYsRUFBU2d4RixXQUVwQjlnSCxFQUFPclAsT0FBT20vQixHQUNkOXZCLEVBQU9pQyxhQUlmLE1BRUosS0FBSyxFQUVELElBQUlYLEVBQ0F5L0csR0FEQXovRyxFQUFjdkMsRUFBUStCLFlBQVlRLFlBQVkzZCxLQUFLNDhILGtCQUNyQnA4RixhQUNsQzQ4RixFQUFnQi9oSCxVQUFZLFdBQ3hCLElBQUlnQixFQUFTK2dILEVBQWdCOTZILE9BQzdCLEdBQUkrWixFQUFRLENBQ1IsSUFBSTNkLEVBQVEyZCxFQUFPM2QsTUFDZnl0QyxFQUFXLG1CQUFTLEdBQUl6dEMsR0FDSSxpQkFBckJBLEVBQU15K0gsbUJBQ05oeEYsRUFBU2d4RixXQUVwQjlnSCxFQUFPclAsT0FBT20vQixHQUNkOXZCLEVBQU9pQyxlQVMzQjArRyxFQUFrQjM5SCxVQUFVZytILHlCQUEyQixTQUFVakMsR0FDN0QsT0FBTyxvQkFBVXA3SCxVQUFNLE9BQVEsR0FBUSxXQUNuQyxPQUFPLHNCQUFZQSxNQUFNLFNBQVVpTCxHQUMvQixJQUFLbXdILEVBQ0QsTUFBTXpCLEdBQWE1NkgsT0FBTyxhQUc5QixPQURBdStILEdBQWUsQ0FBRWxDLFNBQVVBLElBQ3BCLENBQUMsRUFBY3A3SCxLQUFLdzhILFNBQVMsV0FBWXBCLFdBUzVENEIsRUFBa0IzOUgsVUFBVWsrSCwyQkFBNkIsU0FBVUMsR0FDL0QsT0FBTyxvQkFBVXg5SCxVQUFNLE9BQVEsR0FBUSxXQUNuQyxPQUFPLHNCQUFZQSxNQUFNLFNBQVVpTCxHQUMvQixJQUFLdXlILEVBQ0QsTUFBTTdELEdBQWE1NkgsT0FBTyxhQUc5QixPQURBdStILEdBQWUsQ0FBRUUsUUFBU0EsSUFDbkIsQ0FBQyxFQUFjeDlILEtBQUsxQixJQUFJay9ILFdBUTNDUixFQUFrQjM5SCxVQUFVbytILGlCQUFtQixTQUFVeEMsR0FDckQsT0FBTyxvQkFBVWo3SCxVQUFNLE9BQVEsR0FBUSxXQUNuQyxPQUFPLHNCQUFZQSxNQUFNLFNBQVVpTCxHQUMvQixJQUFLZ3dILEVBQWF1QyxRQUNkLE1BQU03RCxHQUFhNTZILE9BQU8sYUFFOUIsSUFBS2s4SCxFQUFhUixTQUNkLE1BQU1kLEdBQWE1NkgsT0FBTyxpQkFFOUIsSUFBS2s4SCxFQUFhakosV0FBYWlKLEVBQWFqZ0UsT0FBU2lnRSxFQUFhTyxPQUM5RCxNQUFNN0IsR0FBYTU2SCxPQUFPLG9CQUU5QixJQUFLazhILEVBQWF5QyxZQUNkLE1BQU0vRCxHQUFhNTZILE9BQU8saUJBRTlCLElBQUtrOEgsRUFBYUcsU0FDZCxNQUFNekIsR0FBYTU2SCxPQUFPLGFBRzlCLE9BREF1K0gsR0FBZXJDLEdBQ1IsQ0FBQyxFQUFjajdILEtBQUttL0IsSUFBSTg3RixXQVkzQytCLEVBQWtCMzlILFVBQVVnOEgsWUFBYyxTQUFVeHZILEdBQ2hELE9BQU8sb0JBQVU3TCxVQUFNLE9BQVEsR0FBUSxXQUNuQyxJQUFJNGdFLEVBQ0osT0FBTyxzQkFBWTVnRSxNQUFNLFNBQVVpTCxHQUMvQixPQUFRQSxFQUFHbEksT0FDUCxLQUFLLEVBQ0QsTUFBcUIsaUJBQVY4SSxHQUF1QyxJQUFqQkEsRUFBTXhMLE9BQzVCLENBQUMsRUFBYzBCLFFBQVFFLE9BQU8wM0gsR0FBYTU2SCxPQUFPLDBCQUV0RCxDQUFDLEVBQWFpQixLQUFLcTlILHlCQUF5Qnh4SCxJQUN2RCxLQUFLLEVBRUQsS0FEQSswRCxFQUFVMzFELEVBQUdqSSxRQUVULE1BQU0yMkgsR0FBYTU2SCxPQUFPLDBCQUU5QixNQUFPLENBQUMsRUFBYWlCLEtBQUtrVixPQUFPMHJELEVBQVE0OEQsVUFDN0MsS0FBSyxFQUVELE9BREF2eUgsRUFBR2pJLE9BQ0ksQ0FBQyxFQUFjNDlELFdBS25DbzhELEVBM0syQixDQTRLcEMsSUFNRixTQUFTTSxHQUFldjJILEdBQ3BCLEdBQUlBLEVBQU1xMEgsV0FDd0IsaUJBQW5CcjBILEVBQU1xMEgsVUFBbUQsSUFBMUJyMEgsRUFBTXEwSCxTQUFTLzZILFFBQ3JELE1BQU1zNUgsR0FBYTU2SCxPQUFPLGFBR2xDLEdBQUlnSSxFQUFNeTJILFVBQ3VCLGlCQUFsQnoySCxFQUFNeTJILFNBQWlELElBQXpCejJILEVBQU15MkgsUUFBUW45SCxRQUNuRCxNQUFNczVILEdBQWE1NkgsT0FBTyxhQUdsQyxHQUFJZ0ksRUFBTTB6SCxhQUNBMXpILEVBQU0wekgsb0JBQW9CaHdHLGFBQ0YsS0FBMUIxakIsRUFBTTB6SCxTQUFTcDZILFFBQ2YsTUFBTXM1SCxHQUFhNTZILE9BQU8saUJBR2xDLEdBQUlnSSxFQUFNaXJILFdBQ3dCLGlCQUFuQmpySCxFQUFNaXJILFVBQW1ELElBQTFCanJILEVBQU1pckgsU0FBUzN4SCxRQUNyRCxNQUFNczVILEdBQWE1NkgsT0FBTyxvQkFHbEMsR0FBSWdJLEVBQU1pMEQsUUFDQWowRCxFQUFNaTBELGdCQUFnQjJpRSxhQUN4QixNQUFNaEUsR0FBYTU2SCxPQUFPLG9CQUdsQyxHQUFJZ0ksRUFBTXkwSCxVQUNBejBILEVBQU15MEgsa0JBQWtCbUMsYUFDMUIsTUFBTWhFLEdBQWE1NkgsT0FBTyxvQkFHbEMsR0FBSWdJLEVBQU0yMkgsY0FDMkIsaUJBQXRCMzJILEVBQU0yMkgsYUFDZ0IsSUFBN0IzMkgsRUFBTTIySCxZQUFZcjlILFFBQ2xCLE1BQU1zNUgsR0FBYTU2SCxPQUFPOzs7Ozs7Ozs7Ozs7Ozs7O0dBcUJ0QyxJQUNJLEdBQW1DLFNBQVVvTCxHQUU3QyxTQUFTeXpILElBQ0wsSUFBSWwwSCxFQUFtQixPQUFYUyxHQUFtQkEsRUFBTzdKLE1BQU1OLEtBQU1JLFlBQWNKLEtBSWhFLE9BSEEwSixFQUFNbTRDLE9BQVMsdUJBQ2ZuNEMsRUFBTW96SCxVQUFZLEVBQ2xCcHpILEVBQU1rekgsZ0JBQWtCLHlCQUNqQmx6SCxFQXdFWCxPQTlFQSxvQkFBVWswSCxFQUFtQnp6SCxHQVE3Qnl6SCxFQUFrQnYrSCxVQUFVMDlILFlBQWMsU0FBVTNoSCxHQUN2Q0EsRUFBUTlZLE9BQ2R1YixrQkFBa0I3ZCxLQUFLNDhILGdCQUFpQixDQUFFLzJGLFFBQVMsYUFNMUQrM0YsRUFBa0J2K0gsVUFBVXcrSCxvQkFBc0IsU0FBVUwsR0FDeEQsT0FBTyxvQkFBVXg5SCxVQUFNLE9BQVEsR0FBUSxXQUNuQyxJQUFJc0MsRUFDSixPQUFPLHNCQUFZdEMsTUFBTSxTQUFVaUwsR0FDL0IsT0FBUUEsRUFBR2xJLE9BQ1AsS0FBSyxFQUNELEdBQXVCLGlCQUFaeTZILEdBQTJDLElBQW5CQSxFQUFRbjlILE9BQ3ZDLE1BQU1zNUgsR0FBYTU2SCxPQUFPLGFBRTlCLE1BQU8sQ0FBQyxFQUFhaUIsS0FBSzFCLElBQUlrL0gsSUFDbEMsS0FBSyxFQUVELE1BQU8sQ0FBQyxHQURSbDdILEVBQVMySSxFQUFHakksUUFDbUJWLEVBQU9tNEgsY0FBV2x4SCxXQVFyRXEwSCxFQUFrQnYrSCxVQUFVeStILGlCQUFtQixTQUFVTixFQUFTL0MsR0FDOUQsT0FBTyxvQkFBVXo2SCxVQUFNLE9BQVEsR0FBUSxXQUNuQyxJQUFJNGdFLEVBQ0osT0FBTyxzQkFBWTVnRSxNQUFNLFNBQVVpTCxHQUMvQixHQUF1QixpQkFBWnV5SCxHQUEyQyxJQUFuQkEsRUFBUW45SCxPQUN2QyxNQUFNczVILEdBQWE1NkgsT0FBTyxhQUU5QixHQUFpQixPQUFiMDdILEdBN0NlLEtBNkNNQSxFQUFTcDZILE9BQzlCLE1BQU1zNUgsR0FBYTU2SCxPQUFPLGlCQU05QixPQUpBNmhFLEVBQVUsQ0FDTjQ4RCxRQUFTQSxFQUNUL0MsU0FBVUEsR0FFUCxDQUFDLEVBQWN6NkgsS0FBS20vQixJQUFJeWhDLFdBUzNDZzlELEVBQWtCditILFVBQVUwK0gsbUJBQXFCLFNBQVVQLEdBQ3ZELE9BQU8sb0JBQVV4OUgsVUFBTSxPQUFRLEdBQVEsV0FDbkMsSUFBSXk2SCxFQUNKLE9BQU8sc0JBQVl6NkgsTUFBTSxTQUFVaUwsR0FDL0IsT0FBUUEsRUFBR2xJLE9BQ1AsS0FBSyxFQUFHLE1BQU8sQ0FBQyxFQUFhL0MsS0FBSzY5SCxvQkFBb0JMLElBQ3RELEtBQUssRUFFRCxLQURBL0MsRUFBV3h2SCxFQUFHakksUUFFVixNQUFNMjJILEdBQWE1NkgsT0FBTywwQkFFOUIsTUFBTyxDQUFDLEVBQWFpQixLQUFLa1YsT0FBT3NvSCxJQUNyQyxLQUFLLEVBRUQsT0FEQXZ5SCxFQUFHakksT0FDSSxDQUFDLEVBQWN5M0gsV0FLbkNtRCxFQS9FMkIsQ0FnRnBDLElBb0JFLEdBQWdDLFdBQ2hDLFNBQVNJLEVBQWU3b0gsR0FDcEIsSUFBSXpMLEVBQVExSixLQUNaQSxLQUFLbVYsU0FBV0EsRUFDaEJuVixLQUFLaStILGtCQUFvQixJQUFJLEdBQzdCaitILEtBQUtvOEgsb0JBQXNCLElBQUksR0FDL0IsSUFBSTlqSCxFQUFNbkQsRUFBU21ELElBRW5CLEdBREF0WSxLQUFLc1ksSUFBTUEsR0FDTkEsRUFBSWhFLFFBQVE0cEgsbUJBQzRCLGlCQUFsQzVsSCxFQUFJaEUsUUFBUTRwSCxrQkFDbkIsTUFBTXZFLEdBQWE1NkgsT0FBTyxpQkFFOUJpQixLQUFLd1YsU0FBVyxDQUNaTixPQUFRLFdBQWMsT0FBT3hMLEVBQU13TCxXQUV2Q2xWLEtBQUttK0gsa0JBQW9CLElBQUksR0FBa0JocEgsR0E4VG5ELE9BNVRBNm9ILEVBQWUzK0gsVUFBVXk4RCxTQUFXLFdBQ2hDLE9BQU8sb0JBQVU5N0QsVUFBTSxPQUFRLEdBQVEsV0FDbkMsSUFBSXVoSCxFQUFZNmMsRUFBT0MsRUFBZ0JDLEVBQWtCckQsRUFDekQsT0FBTyxzQkFBWWo3SCxNQUFNLFNBQVVpTCxHQUMvQixPQUFRQSxFQUFHbEksT0FDUCxLQUFLLEVBRUQsTUFBcUIsYUFEckJ3K0csRUFBYXZoSCxLQUFLdStILDZCQUNzQixDQUFDLEVBQWEsR0FDL0MsQ0FBQyxFQUFhditILEtBQUt3K0gsaUNBQzlCLEtBQUssRUFFRGpkLEVBQWF0MkcsRUFBR2pJLE9BQ2hCaUksRUFBR2xJLE1BQVEsRUFDZixLQUFLLEVBQ0QsR0FBbUIsWUFBZncrRyxFQUNBLE1BQU1vWSxHQUFhNTZILE9BQU8seUJBRTlCLE1BQU8sQ0FBQyxFQUFhaUIsS0FBS3krSCxzQkFDOUIsS0FBSyxFQUVELE9BREFMLEVBQVFuekgsRUFBR2pJLE9BQ0osQ0FBQyxFQUFhaEQsS0FBSzArSCxzQkFDOUIsS0FBSyxFQUVELE9BREFMLEVBQWlCcHpILEVBQUdqSSxPQUNiLENBQUMsRUFBYWhELEtBQUsyK0gsb0JBQW9CUCxFQUFPQyxJQUN6RCxLQUFLLEVBRUQsT0FEQUMsRUFBbUJyekgsRUFBR2pJLE9BQ2YsQ0FBQyxFQUFhaEQsS0FBS20rSCxrQkFBa0JaLDJCQUEyQmEsRUFBTVEsUUFDakYsS0FBSyxFQUVELE9BREEzRCxFQUFlaHdILEVBQUdqSSxRQUVQLENBQUMsRUFBY2hELEtBQUs2K0gsb0JBQW9CVCxFQUFPRSxFQUFrQkQsRUFBZ0JwRCxJQUVyRixDQUFDLEVBQWNqN0gsS0FBSzgrSCxZQUFZVixFQUFPRSxFQUFrQkQsWUFjcEZMLEVBQWUzK0gsVUFBVXcvSCxvQkFBc0IsU0FBVVQsRUFBT0UsRUFBa0JELEVBQWdCcEQsR0FDOUYsT0FBTyxvQkFBVWo3SCxVQUFNLE9BQVEsR0FBUSxXQUVuQyxPQUFPLHNCQUFZQSxNQUFNLFNBQVVpTCxHQUMvQixPQUFRQSxFQUFHbEksT0FDUCxLQUFLLEVBRUQsT0E0UXhCLFNBQTJCdTdILEVBQWtCRCxFQUFnQnBELEdBQ3pELElBQUtBLEVBQWFSLFdBQ2JYLEdBQW1CdUUsRUFBZS95RyxPQUFRMnZHLEVBQWFSLFNBQVNudkcsUUFDakUsT0FBTyxFQUVYLElBQUl5ekcsRUFBa0JULEVBQWlCdE0sV0FBYWlKLEVBQWFqSixTQUM3RGdOLEVBQWNsRixHQUFtQndFLEVBQWlCbEwsT0FBTyxRQUFTNkgsRUFBYWpnRSxNQUMvRWlrRSxFQUFnQm5GLEdBQW1Cd0UsRUFBaUJsTCxPQUFPLFVBQVc2SCxFQUFhTyxRQUN2RixPQUFPdUQsR0FBbUJDLEdBQWVDOzs7Ozs7Ozs7Ozs7Ozs7O0dBclJOQyxDQUFrQlosRUFBa0JELEVBQWdCcEQsR0FFN0Q1eEgsS0FBS3NILE1BQ0RzcUgsRUFBYWlDLFdBekVqQixPQTBFSyxDQUFDLEVBQWNqQyxFQUFhRyxVQUc1QixDQUFDLEVBQWNwN0gsS0FBS2c3SCxZQUFZb0QsRUFBT0UsRUFBa0JELEVBQWdCcEQsSUFOMUQsQ0FBQyxFQUFhLEdBUTVDLEtBQUssRUFLTCxNQUFPLENBQUMsRUFBYWo3SCxLQUFLbS9ILGtCQUFrQmxFLEVBQWFHLFdBQ3pELEtBQUssRUFNRCxPQURBbndILEVBQUdqSSxPQUNJLENBQUMsRUFBY2hELEtBQUs4K0gsWUFBWVYsRUFBT0UsRUFBa0JELElBQ3BFLEtBQUssRUFBRyxNQUFPLENBQUMsV0FLaENMLEVBQWUzK0gsVUFBVTI3SCxZQUFjLFNBQVVvRCxFQUFPRSxFQUFrQkQsRUFBZ0JwRCxHQUN0RixPQUFPLG9CQUFVajdILFVBQU0sT0FBUSxHQUFRLFdBQ25DLElBQUlvL0gsRUFBY0MsRUFBWTVxSCxFQUM5QixPQUFPLHNCQUFZelUsTUFBTSxTQUFVaUwsR0FDL0IsT0FBUUEsRUFBR2xJLE9BQ1AsS0FBSyxFQUVELE9BREFrSSxFQUFHaEksS0FBS1EsS0FBSyxDQUFDLEVBQUcsRUFBRyxDQUFFLElBQ2YsQ0FBQyxFQUFhekQsS0FBS284SCxvQkFBb0JwQixZQUFZQyxFQUFjajdILEtBQUttVixTQUFVbXBILEVBQWtCRCxJQUM3RyxLQUFLLEVBWUQsT0FYQWUsRUFBZW4wSCxFQUFHakksT0FDbEJxOEgsRUFBYSxDQUNUN0IsUUFBU1ksRUFBTVEsTUFDZm5FLFNBQVU0RCxFQUNWWCxZQUFhMTlILEtBQUttVixTQUFTbUQsSUFBSWhFLFFBQVE0cEgsa0JBQ3ZDOUMsU0FBVWdFLEVBQ1ZsQyxXQUFZN3pILEtBQUtzSCxNQUNqQnFoSCxTQUFVc00sRUFBaUJ0TSxTQUMzQmgzRCxLQUFNc2pFLEVBQWlCbEwsT0FBTyxRQUM5Qm9JLE9BQVE4QyxFQUFpQmxMLE9BQU8sV0FFN0IsQ0FBQyxFQUFhcHpILEtBQUttK0gsa0JBQWtCVixpQkFBaUI0QixJQUNqRSxLQUFLLEVBRUQsT0FEQXAwSCxFQUFHakksT0FDSSxDQUFDLEVBQWFoRCxLQUFLaStILGtCQUFrQkgsaUJBQWlCTSxFQUFNUSxNQUFPUCxJQUM5RSxLQUFLLEVBRUQsT0FEQXB6SCxFQUFHakksT0FDSSxDQUFDLEVBQWNvOEgsR0FDMUIsS0FBSyxFQUVELE9BREEzcUgsRUFBTXhKLEVBQUdqSSxPQUNGLENBQUMsRUFBYWhELEtBQUtxN0gsWUFBWUosRUFBYUcsV0FDdkQsS0FBSyxFQUVELE1BREFud0gsRUFBR2pJLE9BQ0d5UixFQUNWLEtBQUssRUFBRyxNQUFPLENBQUMsV0FLaEN1cEgsRUFBZTMrSCxVQUFVeS9ILFlBQWMsU0FBVVYsRUFBT0UsRUFBa0JELEdBQ3RFLE9BQU8sb0JBQVVyK0gsVUFBTSxPQUFRLEdBQVEsV0FDbkMsSUFBSXMvSCxFQUFVRCxFQUNkLE9BQU8sc0JBQVlyL0gsTUFBTSxTQUFVaUwsR0FDL0IsT0FBUUEsRUFBR2xJLE9BQ1AsS0FBSyxFQUFHLE1BQU8sQ0FBQyxFQUFhL0MsS0FBS284SCxvQkFBb0J0Z0UsU0FBUzk3RCxLQUFLbVYsU0FBVW1wSCxFQUFrQkQsSUFDaEcsS0FBSyxFQVlELE9BWEFpQixFQUFXcjBILEVBQUdqSSxPQUNkcThILEVBQWEsQ0FDVDdCLFFBQVNZLEVBQU1RLE1BQ2ZuRSxTQUFVNEQsRUFDVlgsWUFBYTE5SCxLQUFLc1ksSUFBSWhFLFFBQVE0cEgsa0JBQzlCOUMsU0FBVWtFLEVBQ1ZwQyxXQUFZN3pILEtBQUtzSCxNQUNqQnFoSCxTQUFVc00sRUFBaUJ0TSxTQUMzQmgzRCxLQUFNc2pFLEVBQWlCbEwsT0FBTyxRQUM5Qm9JLE9BQVE4QyxFQUFpQmxMLE9BQU8sV0FFN0IsQ0FBQyxFQUFhcHpILEtBQUttK0gsa0JBQWtCVixpQkFBaUI0QixJQUNqRSxLQUFLLEVBRUQsT0FEQXAwSCxFQUFHakksT0FDSSxDQUFDLEVBQWFoRCxLQUFLaStILGtCQUFrQkgsaUJBQWlCTSxFQUFNUSxNQUFPUCxJQUM5RSxLQUFLLEVBRUQsT0FEQXB6SCxFQUFHakksT0FDSSxDQUFDLEVBQWNzOEgsV0FXMUN0QixFQUFlMytILFVBQVVnOEgsWUFBYyxTQUFVeHZILEdBQzdDLE9BQU8sb0JBQVU3TCxVQUFNLE9BQVEsR0FBUSxXQUNuQyxJQUFJdS9ILEVBQWNqQixFQUNsQixPQUFPLHNCQUFZdCtILE1BQU0sU0FBVWlMLEdBQy9CLE9BQVFBLEVBQUdsSSxPQUNQLEtBQUssRUFFTCxNQUFPLENBQUMsRUFBYS9DLEtBQUttL0gsa0JBQWtCdHpILElBQzVDLEtBQUssRUFHRCxPQURBWixFQUFHakksT0FDSSxDQUFDLEVBQWFoRCxLQUFLeStILHNCQUM5QixLQUFLLEVBRUQsT0FEQWMsRUFBZXQwSCxFQUFHakksUUFFWCxDQUFDLEVBQWF1OEgsRUFBYUMsWUFBWUMsbUJBRHBCLENBQUMsRUFBYSxHQUU1QyxLQUFLLEVBRUQsR0FEQW5CLEVBQW1CcnpILEVBQUdqSSxPQUVsQixNQUFPLENBQUMsRUFBY3M3SCxFQUFpQm9CLGVBRTNDejBILEVBQUdsSSxNQUFRLEVBQ2YsS0FBSyxFQUVMLE1BQU8sQ0FBQyxHQUFjLFdBVXRDaTdILEVBQWUzK0gsVUFBVTgvSCxrQkFBb0IsU0FBVXR6SCxHQUNuRCxPQUFPLG9CQUFVN0wsVUFBTSxPQUFRLEdBQVEsV0FDbkMsSUFBSWk3SCxFQUFjMEUsRUFDbEIsT0FBTyxzQkFBWTMvSCxNQUFNLFNBQVVpTCxHQUMvQixPQUFRQSxFQUFHbEksT0FDUCxLQUFLLEVBQUcsTUFBTyxDQUFDLEVBQWEvQyxLQUFLbStILGtCQUFrQjlDLFlBQVl4dkgsSUFDaEUsS0FBSyxFQUNEb3ZILEVBQWVod0gsRUFBR2pJLE9BQ2xCaUksRUFBR2xJLE1BQVEsRUFDZixLQUFLLEVBRUQsT0FEQWtJLEVBQUdoSSxLQUFLUSxLQUFLLENBQUMsRUFBRyxFQUFHLENBQUUsSUFDZixDQUFDLEVBQWF6RCxLQUFLbzhILG9CQUFvQmYsWUFBWXI3SCxLQUFLbVYsU0FBVThsSCxJQUM3RSxLQUFLLEVBRUQsT0FEQWh3SCxFQUFHakksT0FDSSxDQUFDLEVBQWEsR0FDekIsS0FBSyxFQUlELE9BSEEyOEgsRUFBTTEwSCxFQUFHakksT0FFVGtHLFFBQVFwRixNQUFNNjdILEdBQ1AsQ0FBQyxFQUFhLEdBQ3pCLEtBQUssRUFBRyxNQUFPLENBQUMsV0FRaEMzQixFQUFlMytILFVBQVVzL0gsb0JBQXNCLFNBQVVpQixFQUFnQnZCLEdBQ3JFLE9BQU8sb0JBQVVyK0gsVUFBTSxPQUFRLEdBQVEsV0FDbkMsSUFBSXc2SCxFQUNKLE9BQU8sc0JBQVl4NkgsTUFBTSxTQUFVaUwsR0FDL0IsT0FBUUEsRUFBR2xJLE9BQ1AsS0FBSyxFQUFHLE1BQU8sQ0FBQyxFQUFhNjhILEVBQWVKLFlBQVlDLG1CQUN4RCxLQUFLLEVBRUQsT0FEQWpGLEVBQWV2dkgsRUFBR2pJLFFBRVAsQ0FBQyxFQUFjdzNILEdBRW5CLENBQUMsRUFBY29GLEVBQWVKLFlBQVl2eEgsVUFBVSxDQUNuRDR4SCxpQkFBaUIsRUFDakJDLHFCQUFzQnpCLGFBYWxETCxFQUFlMytILFVBQVUwZ0ksa0JBQW9CLFdBQ3pDLE1BQU1wRyxHQUFhNTZILE9BQU8sNkJBRTlCaS9ILEVBQWUzK0gsVUFBVTJnSSxpQkFBbUIsU0FBVUMsR0FDbEQsTUFBTXRHLEdBQWE1NkgsT0FBTyw2QkFFOUJpL0gsRUFBZTMrSCxVQUFVNmdJLGtCQUFvQixTQUFVQyxHQUNuRCxNQUFNeEcsR0FBYTU2SCxPQUFPLDZCQUU5QmkvSCxFQUFlMytILFVBQVUrOEQsVUFBWSxTQUFVZ2tFLEVBQWlCQyxFQUFRQyxHQUNwRSxNQUFNM0csR0FBYTU2SCxPQUFPLDZCQUU5QmkvSCxFQUFlMytILFVBQVVraEksZUFBaUIsU0FBVUgsRUFBaUJDLEVBQVFDLEdBQ3pFLE1BQU0zRyxHQUFhNTZILE9BQU8sNkJBSzlCaS9ILEVBQWUzK0gsVUFBVW1oSSw0QkFBOEIsU0FBVUMsR0FDN0QsTUFBTTlHLEdBQWE1NkgsT0FBTyx5QkFVOUJpL0gsRUFBZTMrSCxVQUFVNlYsT0FBUyxXQUM5QixPQUFPLG9CQUFVbFYsVUFBTSxPQUFRLEdBQVEsV0FDbkMsT0FBTyxzQkFBWUEsTUFBTSxTQUFVaUwsR0FDL0IsT0FBUUEsRUFBR2xJLE9BQ1AsS0FBSyxFQUFHLE1BQU8sQ0FBQyxFQUFhaEIsUUFBUXVULElBQUksQ0FDakN0VixLQUFLbStILGtCQUFrQjFCLGdCQUN2Qno4SCxLQUFLaStILGtCQUFrQnhCLG1CQUUvQixLQUFLLEVBRUQsT0FEQXh4SCxFQUFHakksT0FDSSxDQUFDLFdBUTVCZzdILEVBQWUzK0gsVUFBVWsvSCwwQkFBNEIsV0FDakQsT0FBT21DLGFBQWFuZixZQUt4QnljLEVBQWUzK0gsVUFBVW0vSCw4QkFBZ0MsV0FDckQsT0FBTyxvQkFBVXgrSCxVQUFNLE9BQVEsR0FBUSxXQUNuQyxPQUFPLHNCQUFZQSxNQUFNLFNBQVVpTCxHQUMvQixPQUFLeTFILGFBQWFYLGtCQUtYLENBQUMsRUFBY1csYUFBYVgscUJBRnhCLENBQUMsRUFBY1csYUFBYW5mLG1CQU1uRHljLEVBQWUzK0gsVUFBVXNoSSxxQkFBdUIsV0FDNUMsT0FBTzNnSSxLQUFLbStILG1CQUVoQkgsRUFBZTMrSCxVQUFVdWhJLHFCQUF1QixXQUM1QyxPQUFPNWdJLEtBQUtpK0gsbUJBSWhCRCxFQUFlMytILFVBQVV3aEksdUJBQXlCLFdBQzlDLE9BQU83Z0ksS0FBS284SCxxQkFFVDRCLEVBN1V3QixHQTZXbkMsSUFDSSxHQUE4QixTQUFVN3pILEdBRXhDLFNBQVMyMkgsRUFBYTNySCxHQUNsQixJQUFJekwsRUFBUVMsRUFBT3ZNLEtBQUtvQyxLQUFNbVYsSUFBYW5WLEtBVzNDLE9BVkEwSixFQUFNcTNILGlCQUFtQixLQUN6Qmh4SCxLQUFLeTJDLGlCQUFpQixRQUFRLFNBQVVobUQsR0FDcENrSixFQUFNczNILE9BQU94Z0ksTUFFakJ1UCxLQUFLeTJDLGlCQUFpQiwwQkFBMEIsU0FBVWhtRCxHQUN0RGtKLEVBQU11M0gsWUFBWXpnSSxNQUV0QnVQLEtBQUt5MkMsaUJBQWlCLHFCQUFxQixTQUFVaG1ELEdBQ2pEa0osRUFBTXczSCxvQkFBb0IxZ0ksTUFFdkJrSixFQXNYWCxPQW5ZQSxvQkFBVW8zSCxFQUFjMzJILEdBaUJ4QjIySCxFQUFhemhJLFVBQVUyaEksT0FBUyxTQUFVcmlILEdBQ3RDQSxFQUFNd2lILFVBQVVuaEksS0FBS29oSSxRQUFRemlILEtBSWpDbWlILEVBQWF6aEksVUFBVTRoSSxZQUFjLFNBQVV0aUgsR0FDM0NBLEVBQU13aUgsVUFBVW5oSSxLQUFLcWhJLGFBQWExaUgsS0FJdENtaUgsRUFBYXpoSSxVQUFVNmhJLG9CQUFzQixTQUFVdmlILEdBQ25EQSxFQUFNd2lILFVBQVVuaEksS0FBS3NoSSxxQkFBcUIzaUgsS0FjOUNtaUgsRUFBYXpoSSxVQUFVK2hJLFFBQVUsU0FBVXppSCxHQUN2QyxPQUFPLG9CQUFVM2UsVUFBTSxPQUFRLEdBQVEsV0FDbkMsSUFBSXVoSSxFQUErQkMsRUFBcUJDLEVBQW1CQyxFQUFLaFMsRUFBU2lTLEVBQ3pGLE9BQU8sc0JBQVkzaEksTUFBTSxTQUFVaUwsR0FDL0IsT0FBUUEsRUFBR2xJLE9BQ1AsS0FBSyxFQUNELElBQUs0YixFQUFNalUsS0FDUCxNQUFPLENBQUMsR0FFWixJQUNJNjJILEVBQWE1aUgsRUFBTWpVLEtBQUsrcEYsT0FFNUIsTUFBTzNsRixHQUVILE1BQU8sQ0FBQyxHQUVaLE1BQU8sQ0FBQyxFQUFhOU8sS0FBSzRoSSxzQkFDOUIsS0FBSyxFQUVELE9BRG9CMzJILEVBQUdqSSxPQUdaLENBQUMsRUFBY2hELEtBQUs2aEksNEJBQTRCTixLQUUzREMsRUFBc0J4aEksS0FBSzhoSSxxQkFBcUJQLEtBRWhERSxFQUFvQkQsRUFBb0JucEMsT0FBUyxHQUMxQyxDQUFDLEVBQWFyNEYsS0FBS3krSCx1QkFGTyxDQUFDLEVBQWEsR0FHbkQsS0FBSyxFQVFELE9BUEFpRCxFQUFNejJILEVBQUdqSSxPQUNUMHNILEVBQVU4UixFQUFvQjlSLFFBQzlCaVMsRUFBYWpCLGFBQWFpQixXQUN0QmpTLEdBQVdpUyxHQUFjalMsRUFBUXJ2SCxPQUFTc2hJLEdBQzFDejRILFFBQVFtQyxLQUFLLDhCQUFnQ3MySCxFQUFhLHlEQUd2RCxDQUFDLEVBQWNELEVBQUlLLGlCQUFpQk4sRUFBbUJELElBQ2xFLEtBQUssRUFDRCxPQUFLeGhJLEtBQUsrZ0ksaUJBQ0gsQ0FBQyxFQUFhL2dJLEtBQUsrZ0ksaUJBQWlCUSxJQURSLENBQUMsRUFBYSxHQUVyRCxLQUFLLEVBRUQsT0FEQXQySCxFQUFHakksT0FDSSxDQUFDLEdBQ1osS0FBSyxFQUFHLE1BQU8sQ0FBQyxXQUtoQzg5SCxFQUFhemhJLFVBQVVnaUksYUFBZSxTQUFVbEYsR0FDNUMsT0FBTyxvQkFBVW44SCxVQUFNLE9BQVEsR0FBUSxXQUNuQyxJQUFJdS9ILEVBQWMzRSxFQUFPTyxFQUEwQkYsRUFDbkQsT0FBTyxzQkFBWWo3SCxNQUFNLFNBQVVpTCxHQUMvQixPQUFRQSxFQUFHbEksT0FDUCxLQUFLLEVBRUQsT0FEQWtJLEVBQUdoSSxLQUFLUSxLQUFLLENBQUMsRUFBRyxFQUFHLENBQUUsSUFDZixDQUFDLEVBQWF6RCxLQUFLeStILHNCQUM5QixLQUFLLEVBRUQsT0FEQWMsRUFBZXQwSCxFQUFHakksT0FDWCxDQUFDLEVBQWEsR0FDekIsS0FBSyxFQUVELE1BREE0M0gsRUFBUTN2SCxFQUFHakksT0FDTDIySCxHQUFhNTZILE9BQU8sd0JBQXFELENBQzNFZzhILFVBQVdILElBRW5CLEtBQUssRUFFRCxPQURBM3ZILEVBQUdoSSxLQUFLUSxLQUFLLENBQUMsRUFBRyxFQUFHLENBQUUsSUFDZixDQUFDLEVBQWE4N0gsRUFBYUMsWUFBWUMsbUJBQ2xELEtBQUssRUFFRCxPQURBeDBILEVBQUdqSSxPQUNJLENBQUMsRUFBYSxHQUN6QixLQUFLLEVBR0QsT0FGQW00SCxFQUFRbHdILEVBQUdqSSxPQUVKLENBQUMsRUFEWWhELEtBQUsyZ0ksdUJBQ2NwRCwyQkFBMkJnQyxFQUFhWCxRQUNuRixLQUFLLEVBRUQsS0FEQTNELEVBQWVod0gsRUFBR2pJLFFBSWQsTUFBTW00SCxFQUdWLE1BQU8sQ0FBQyxFQUFhbjdILEtBQUtxN0gsWUFBWUosRUFBYUcsV0FDdkQsS0FBSyxFQUdELE1BREFud0gsRUFBR2pJLE9BQ0dtNEgsRUFDVixLQUFLLEVBQUcsTUFBTyxDQUFDLFdBS2hDMkYsRUFBYXpoSSxVQUFVaWlJLHFCQUF1QixTQUFVM2lILEdBQ3BELE9BQU8sb0JBQVUzZSxVQUFNLE9BQVEsR0FBUSxXQUNuQyxJQUFJdWhJLEVBQVlTLEVBQU1DLEVBQWNDLEVBQ3BDLE9BQU8sc0JBQVlsaUksTUFBTSxTQUFVaUwsR0FDL0IsT0FBUUEsRUFBR2xJLE9BQ1AsS0FBSyxFQUNELEtBQUs0YixFQUFNc3JHLGNBQ050ckcsRUFBTXNyRyxhQUFhdi9HLE1BQ25CaVUsRUFBTXNyRyxhQUFhdi9HLEtBQVksU0FFaEMsTUFBTyxDQUFDLEdBRVAsR0FBSWlVLEVBQU1vVyxPQUlYLE1BQU8sQ0FBQyxHQU1aLEdBSEFwVyxFQUFNd2pILDJCQUNOeGpILEVBQU1zckcsYUFBYWw4RyxVQUNuQnd6SCxFQUFhNWlILEVBQU1zckcsYUFBYXYvRyxLQUFZLFNBQzVCdS9HLGFBRVosTUFBTyxDQUFDLEdBSVosS0FGQStYLEVBQVFULEVBQVdhLFlBQWNiLEVBQVdhLFdBQVdKLE1BQ25EVCxFQUFXdFgsYUFBYW9ZLGNBQ2pCLENBQ1AsS0FBSWQsRUFBVzcySCxNQTkxQ3RCLG9CQTgxQ2dENjJILEVBQVc3MkgsTUFLaEQsTUFBTyxDQUFDLEdBSlJzM0gsRUFBT2p5SCxLQUFLODRGLFNBQVN5NUIsT0FPN0IsTUFBTyxDQUFDLEVBQWF0aUksS0FBS3VpSSxpQkFBaUJQLElBQy9DLEtBQUssRUFFRCxPQURBQyxFQUFlaDNILEVBQUdqSSxRQUNTLENBQUMsRUFBYSxHQUNsQyxDQUFDLEVBQWErTSxLQUFLcTFDLFFBQVFvOUUsV0FBV1IsSUFDakQsS0FBSyxFQUtELE9BSEFDLEVBQWVoM0gsRUFBR2pJLE9BR1gsQ0FBQyxHQThOakJ1dkgsRUE5Tm9DLElBK054QyxJQUFJeHdILFNBQVEsU0FBVUMsR0FDekJ1dUIsV0FBV3Z1QixFQUFTdXdILFFBL05SLEtBQUssRUFJRCxPQURBdG5ILEVBQUdqSSxPQUNJLENBQUMsRUFBYSxHQUN6QixLQUFLLEVBQUcsTUFBTyxDQUFDLEVBQWFpL0gsRUFBYVEsU0FDMUMsS0FBSyxFQUNEUixFQUFlaDNILEVBQUdqSSxPQUNsQmlJLEVBQUdsSSxNQUFRLEVBQ2YsS0FBSyxFQUNELE9BQUtrL0gsVUFNRVYsRUFBV3RYLG9CQUNYc1gsRUFBV2EsV0FDbEJGLEVBQWNRLEdBQWFqSixHQUFZa0oscUJBQXNCcEIsR0FHdEQsQ0FBQyxFQUFjdmhJLEtBQUs0aUksd0JBQXdCWCxFQUFjQyxLQVR0RCxDQUFDLEdBaU5wQyxJQUFlM1A7Ozs7Ozs7Ozs7Ozs7Ozs7V0FqTVh1TyxFQUFhemhJLFVBQVV5aUkscUJBQXVCLFNBQVVQLEdBQ3BELElBQUl0MkgsRUFDSixHQUFLczJILEdBR2tDLGlCQUE1QkEsRUFBV3RYLGFBQXRCLENBR0EsSUFBSTRZLEVBQTBCLG1CQUFTLEdBQUl0QixFQUFXdFgsY0FNdEQsT0FEQTRZLEVBQXdCbjRILEtBQU8sbUJBQVMsbUJBQVMsR0FBSTYySCxFQUFXdFgsYUFBYXYvRyxRQUFRTyxFQUFLLElBQWMsUUFBSXMySCxFQUFZdDJILElBQ2pINDNILElBaUJYL0IsRUFBYXpoSSxVQUFVbWhJLDRCQUE4QixTQUFVMzJILEdBQzNELElBQUtBLEdBQWdDLG1CQUFiQSxFQUNwQixNQUFNOHZILEdBQWE1NkgsT0FBTyxnQ0FFOUJpQixLQUFLK2dJLGlCQUFtQmwzSCxHQVE1QmkzSCxFQUFhemhJLFVBQVVrakksaUJBQW1CLFNBQVV6K0csR0FDaEQsT0FBTyxvQkFBVTlqQixVQUFNLE9BQVEsR0FBUSxXQUNuQyxJQUFJOGlJLEVBQVdDLEVBQVlDLEVBQWdCdmxJLEVBQzNDLE9BQU8sc0JBQVl1QyxNQUFNLFNBQVVpTCxHQUMvQixPQUFRQSxFQUFHbEksT0FDUCxLQUFLLEVBRUQsT0FEQSsvSCxFQUFZLElBQUlHLElBQUluL0csRUFBSy9ULEtBQUs4NEYsU0FBU2lHLE1BQU1BLEtBQ3RDLENBQUMsRUFBYW8wQixNQUN6QixLQUFLLEVBR0QsSUFGQUgsRUFBYTkzSCxFQUFHakksT0FDaEJnZ0ksRUFBaUIsS0FDWnZsSSxFQUFJLEVBQUdBLEVBQUlzbEksRUFBVzFpSSxPQUFRNUMsSUFHL0IsR0FGa0IsSUFBSXdsSSxJQUFJRixFQUFXdGxJLEdBQUdxbUIsSUFBSy9ULEtBQUs4NEYsU0FBU2lHLE1BQ3REQSxPQUNtQmcwQixFQUFXLENBQy9CRSxFQUFpQkQsRUFBV3RsSSxHQUM1QixNQUdSLE1BQU8sQ0FBQyxFQUFjdWxJLFdBYzFDbEMsRUFBYXpoSSxVQUFVdWpJLHdCQUEwQixTQUFVeitFLEVBQVFwK0MsR0FDL0QsT0FBTyxvQkFBVS9GLFVBQU0sT0FBUSxHQUFRLFdBQ25DLE9BQU8sc0JBQVlBLE1BQU0sU0FBVWlMLEdBRy9CLElBQUtrNUMsRUFDRCxNQUFNdzFFLEdBQWE1NkgsT0FBTywyQkFHOUIsT0FEQW9sRCxFQUFPZy9FLFlBQVlwOUgsR0FDWixDQUFDLFVBVXBCKzZILEVBQWF6aEksVUFBVXVpSSxtQkFBcUIsV0FDeEMsT0FBTyxvQkFBVTVoSSxVQUFNLE9BQVEsR0FBUSxXQUVuQyxPQUFPLHNCQUFZQSxNQUFNLFNBQVVpTCxHQUMvQixPQUFRQSxFQUFHbEksT0FDUCxLQUFLLEVBQUcsTUFBTyxDQUFDLEVBQWFtZ0ksTUFDN0IsS0FBSyxFQUVELE1BQU8sQ0FBQyxFQURLajRILEVBQUdqSSxPQUNpQjhsQixNQUFLLFNBQVVxN0IsR0FDeEMsTUFBa0MsWUFBM0JBLEVBQU9zQyxrQkFHVHRDLEVBQU9yZ0MsSUFBSWthLFdBQVcsbUNBY3ZEOGlHLEVBQWF6aEksVUFBVXdpSSw0QkFBOEIsU0FBVU4sR0FDM0QsT0FBTyxvQkFBVXZoSSxVQUFNLE9BQVEsR0FBUSxXQUNuQyxJQUFJK2lJLEVBQVliLEVBQ1p4NEgsRUFBUTFKLEtBQ1osT0FBTyxzQkFBWUEsTUFBTSxTQUFVaUwsR0FDL0IsT0FBUUEsRUFBR2xJLE9BQ1AsS0FBSyxFQUFHLE1BQU8sQ0FBQyxFQUFhbWdJLE1BQzdCLEtBQUssRUFHRCxPQUZBSCxFQUFhOTNILEVBQUdqSSxPQUNoQmsvSCxFQUFjUSxHQUFhakosR0FBWTJKLGtCQUFtQjdCLEdBQ25ELENBQUMsRUFBYXgvSCxRQUFRdVQsSUFBSXl0SCxFQUFXOXhILEtBQUksU0FBVWt6QyxHQUNsRCxPQUFPejZDLEVBQU1rNUgsd0JBQXdCeitFLEVBQVErOUUsUUFFekQsS0FBSyxFQUVELE9BREFqM0gsRUFBR2pJLE9BQ0ksQ0FBQyxXQVM1Qjg5SCxFQUFhemhJLFVBQVVvL0gsbUJBQXFCLFdBQ3hDLE9BQU8sb0JBQVV6K0gsVUFBTSxPQUFRLEdBQVEsV0FDbkMsT0FBTyxzQkFBWUEsTUFBTSxTQUFVaUwsR0FDL0IsTUFBTyxDQUFDLEVBQWM4RSxLQUFLd3ZILHFCQVF2Q3VCLEVBQWF6aEksVUFBVXEvSCxtQkFBcUIsV0FDeEMsT0FBTyxvQkFBVTErSCxVQUFNLE9BQVEsR0FBUSxXQUNuQyxJQUFJbytILEVBQU9pRixFQUNYLE9BQU8sc0JBQVlyakksTUFBTSxTQUFVaUwsR0FDL0IsT0FBUUEsRUFBR2xJLE9BQ1AsS0FBSyxFQUFHLE1BQU8sQ0FBQyxFQUFhL0MsS0FBS3krSCxzQkFDbEMsS0FBSyxFQUVELEtBREFMLEVBQVFuekgsRUFBR2pJLFFBRVAsTUFBTTIySCxHQUFhNTZILE9BQU8sNEJBRTlCLE1BQU8sQ0FBQyxFQUFhaUIsS0FBSzRnSSx1QkFBdUIvQyxvQkFBb0JPLEVBQU1RLFFBQy9FLEtBQUssRUFFRCxPQUE0QixPQUQ1QnlFLEVBQXVCcDRILEVBQUdqSSxRQUVmLENBQUMsRUFBYzQySCxJQUVuQixDQUFDLEVBQWN5SixXQUtuQ3ZDLEVBcFlzQixDQXFZL0IsSUFDRixTQUFTb0MsS0FDTCxPQUFPbnpILEtBQUtxMUMsUUFBUWsrRSxTQUFTLENBQ3pCeHdILEtBQU0sU0FDTnl3SCxxQkFBcUIsSUFJN0IsU0FBU2IsR0FBYWMsRUFBUzNzQyxHQUMzQixNQUFPLENBQ0g0c0Msc0JBQXVCRCxFQUN2QkUsc0JBQXVCN3NDLEdBeUIvQixJQW1CSSxHQUFrQyxTQUFVMXNGLEdBSzVDLFNBQVN3NUgsRUFBaUJ4dUgsR0FDdEIsSUFBSXpMLEVBQVFTLEVBQU92TSxLQUFLb0MsS0FBTW1WLElBQWFuVixLQWEzQyxPQVpBMEosRUFBTWs2SCxrQkFBb0IsS0FDMUJsNkgsRUFBTW02SCxvQkFBc0IsS0FDNUJuNkgsRUFBTW82SCxnQkFBa0IsS0FFeEJwNkgsRUFBTXE2SCxxQkFBdUIsS0FDN0JyNkgsRUFBTXM2SCxrQkFBb0IsMkJBQWdCLFNBQVVsMkgsR0FDaERwRSxFQUFNbzZILGdCQUFrQmgySCxLQUU1QnBFLEVBQU11NkgsdUJBQXlCLDJCQUFnQixTQUFVbjJILEdBQ3JEcEUsRUFBTXE2SCxxQkFBdUJqMkgsS0FFakNwRSxFQUFNdzZILDBCQUNDeDZILEVBOE9YLE9BaFFBLG9CQUFVaTZILEVBQWtCeDVILEdBNEI1Qnc1SCxFQUFpQnRrSSxVQUFVMGdJLGtCQUFvQixXQUMzQyxPQUFPLG9CQUFVLy9ILFVBQU0sT0FBUSxHQUFRLFdBQ25DLElBQUlta0ksRUFDSixPQUFPLHNCQUFZbmtJLE1BQU0sU0FBVWlMLEdBQy9CLE9BQVFBLEVBQUdsSSxPQUNQLEtBQUssRUFDRCxNQUFnQyxZQUE1QjI5SCxhQUFhbmYsV0FDTixDQUFDLEdBRUwsQ0FBQyxFQUFhbWYsYUFBYVgscUJBQ3RDLEtBQUssRUFFRCxHQUF5QixhQUR6Qm9FLEVBQW1CbDVILEVBQUdqSSxRQUVsQixNQUFPLENBQUMsR0FFUCxLQUF5QixXQUFyQm1oSSxFQUNDeEssR0FBYTU2SCxPQUFPLHNCQUdwQjQ2SCxHQUFhNTZILE9BQU8sOEJBYWxENGtJLEVBQWlCdGtJLFVBQVUyZ0ksaUJBQW1CLFNBQVVULEdBQ3BELEtBQU1BLGFBQXdCNkUsMkJBQzFCLE1BQU16SyxHQUFhNTZILE9BQU8sNEJBRTlCLEdBQThCLE1BQTFCaUIsS0FBSzRqSSxrQkFDTCxNQUFNakssR0FBYTU2SCxPQUFPLDJCQUU5QmlCLEtBQUs0akksa0JBQW9CckUsR0FRN0JvRSxFQUFpQnRrSSxVQUFVNmdJLGtCQUFvQixTQUFVbUUsR0FDckQsR0FBeUIsaUJBQWRBLEVBQ1AsTUFBTTFLLEdBQWE1NkgsT0FBTyw0QkFFOUIsR0FBZ0MsTUFBNUJpQixLQUFLNmpJLG9CQUNMLE1BQU1sSyxHQUFhNTZILE9BQU8sbUNBRTlCLElBQUl1bEksRUFBWTNJLEdBQW9CMEksR0FDcEMsR0FBeUIsS0FBckJDLEVBQVVqa0ksT0FDVixNQUFNczVILEdBQWE1NkgsT0FBTyxzQ0FFOUJpQixLQUFLNmpJLG9CQUFzQlMsR0FVL0JYLEVBQWlCdGtJLFVBQVUrOEQsVUFBWSxTQUFVbHVELEVBQWdCcEssRUFBT3lnSSxHQUNwRSxNQUE4QixtQkFBbkJyMkgsRUFDQWxPLEtBQUtna0ksa0JBQWtCOTFILEVBQWdCcEssRUFBT3lnSSxHQUc5Q3ZrSSxLQUFLZ2tJLGtCQUFrQjkxSCxJQVV0Q3kxSCxFQUFpQnRrSSxVQUFVa2hJLGVBQWlCLFNBQVVyeUgsRUFBZ0JwSyxFQUFPeWdJLEdBQ3pFLE1BQThCLG1CQUFuQnIySCxFQUNBbE8sS0FBS2lrSSx1QkFBdUIvMUgsRUFBZ0JwSyxFQUFPeWdJLEdBR25EdmtJLEtBQUtpa0ksdUJBQXVCLzFILElBVzNDeTFILEVBQWlCdGtJLFVBQVVtbEksK0JBQWlDLFNBQVVqRixHQUNsRSxJQUFJa0YsRUFBZ0JsRixFQUFhbUYsWUFBY25GLEVBQWFvRixTQUFXcEYsRUFBYXY3RSxPQUNwRixPQUFPLElBQUlqaUQsU0FBUSxTQUFVQyxFQUFTQyxHQUNsQyxHQUFLd2lJLEVBT0wsR0FBNEIsY0FBeEJBLEVBQWNwcUUsTUFJbEIsR0FBNEIsY0FBeEJvcUUsRUFBY3BxRSxNQUFsQixDQUlBLElBQUl1cUUsRUFBc0IsV0FDdEIsR0FBNEIsY0FBeEJILEVBQWNwcUUsTUFDZHI0RCxFQUFRdTlILE9BRVAsSUFBNEIsY0FBeEJrRixFQUFjcHFFLE1BS25CLE9BSkFwNEQsRUFBTzAzSCxHQUFhNTZILE9BQU8scUJBTS9CMGxJLEVBQWMvOUUsb0JBQW9CLGNBQWVrK0UsSUFFckRILEVBQWNqK0UsaUJBQWlCLGNBQWVvK0UsUUFoQjFDM2lJLEVBQU8wM0gsR0FBYTU2SCxPQUFPLDBCQUozQmlELEVBQVF1OUgsUUFOUnQ5SCxFQUFPMDNILEdBQWE1NkgsT0FBTyxxQkFpQ3ZDNGtJLEVBQWlCdGtJLFVBQVVvL0gsbUJBQXFCLFdBQzVDLElBQUkvMEgsRUFBUTFKLEtBQ1osT0FBSUEsS0FBSzRqSSxrQkFDRTVqSSxLQUFLd2tJLCtCQUErQnhrSSxLQUFLNGpJLG9CQUlwRDVqSSxLQUFLNGpJLGtCQUFvQixLQUNsQjU1SCxVQUFVeTZILGNBQ1pJLFNBbE1TLDRCQWtNaUIsQ0FDM0JqRyxNQWxNVyx5Q0FvTVY5MEgsT0FBTSxTQUFVZ0YsR0FDakIsTUFBTTZxSCxHQUFhNTZILE9BQU8sb0NBQXVFLENBQzdGK2xJLG9CQUFxQmgySCxFQUFJL0ksYUFHNUJ2RCxNQUFLLFNBQVUrOEgsR0FDaEIsT0FBTzcxSCxFQUFNODZILCtCQUErQmpGLEdBQWMvOEgsTUFBSyxXQU8zRCxPQU5Ba0gsRUFBTWs2SCxrQkFBb0JyRSxFQUsxQkEsRUFBYXZ5SCxTQUNOdXlILFVBUW5Cb0UsRUFBaUJ0a0ksVUFBVXEvSCxtQkFBcUIsV0FDNUMsT0FBTyxvQkFBVTErSCxVQUFNLE9BQVEsR0FBUSxXQUNuQyxPQUFPLHNCQUFZQSxNQUFNLFNBQVVpTCxHQUMvQixPQUFJakwsS0FBSzZqSSxvQkFDRSxDQUFDLEVBQWM3akksS0FBSzZqSSxxQkFFeEIsQ0FBQyxFQUFjakssV0FXbEMrSixFQUFpQnRrSSxVQUFVNmtJLHdCQUEwQixXQUNqRCxJQUFJeDZILEVBQVExSixLQUNaZ0ssVUFBVXk2SCxjQUFjaitFLGlCQUFpQixXQUFXLFNBQVU3bkMsR0FBUyxPQUFPLG9CQUFValYsT0FBTyxPQUFRLEdBQVEsV0FDM0csSUFBSXVCLEVBQUl3NEgsRUFBdUJDLEVBQXVCaDVILEVBQU1xNkgsRUFDNUQsT0FBTyxzQkFBWS9rSSxNQUFNLFNBQVVrTCxHQUMvQixPQUFRQSxFQUFHbkksT0FDUCxLQUFLLEVBQ0QsT0FBSzRiLEVBQU1qVSxNQUNOaVUsRUFBTWpVLEtBQUsrNEgsdUJBQ1g5a0gsRUFBTWpVLEtBQUtnNUgsdUJBSWhCejRILEVBQUswVCxFQUFNalUsS0FBTSs0SCxFQUF3Qng0SCxFQUFHdzRILHNCQUF1QkMsRUFBd0J6NEgsRUFBR3k0SCxzQkFDMUYxakksS0FBSzhqSSxpQkFDTDlqSSxLQUFLOGpJLGdCQUFnQjFoSSxLQUFLc2hJLElBRTlCaDVILEVBQU9nNUgsRUFBc0JoNUgsT0FoMkRoQyxvQkFrMkR5QkEsR0FDc0IsTUFBeENBLEVBLzFEUSxpQkFnMkRacTZILEVBc0J4QixTQUFzQkMsR0FDbEIsT0FBUUEsR0FDSixLQUFLdkwsR0FBWWtKLHFCQUNiLE1BQU8sb0JBQ1gsS0FBS2xKLEdBQVkySixrQkFDYixNQUFPLDBCQUNYLFFBQ0ksTUFBTSxJQUFJbjlILE9BN0JjZy9ILENBQWF4QixHQUNsQixDQUFDLEVBQWF6akksS0FBS21WLFNBQVMrdkgsa0JBQWtCNW1JLFFBRkksQ0FBQyxFQUFhLElBVDVELENBQUMsR0FZaEIsS0FBSyxFQUNXNE0sRUFBR2xJLE9BQ0w0MUgsU0FBU21NLEVBRW5CLENBQ0lJLGFBQWN6NkgsRUExMkRuQixrQkEyMkRLMDZILFdBQVkxNkgsRUE1MkRuQixtQkE2MkRPMjZILGFBQWMzNkgsRUEzMkRuQixpQkE0MkRLNDZILG9CQUFxQjEwSCxLQUFLQyxNQUFNeEgsS0FBS3NILE1BQVEsT0FJakR6RixFQUFHbkksTUFBUSxFQUNmLEtBQUssRUFBRyxNQUFPLENBQUMsYUFHckIsSUFFSjRnSSxFQWpRMEIsQ0FrUW5DLElBWUYsSUFBSSxHQUFPLHNCQUNQLEdBQVUsUUFpRGQsU0FBUzRCLEtBQ0wsT0FBSXgxSCxNQUFRLDZCQUE4QkEsS0F5QmxDLGdCQUFpQkEsTUFDckIsaUJBQWtCQSxNQUNsQnEwSCwwQkFBMEIva0ksVUFBVUMsZUFBZSxxQkFDbkRrbUksaUJBQWlCbm1JLFVBQVVDLGVBQWUsVUFmdEMwSyxVQUFVeTdILGVBQ2Qsa0JBQW1CejdILFdBQ25CLGdCQUFpQmtHLFFBQ2pCLGlCQUFrQkEsUUFDbEIsVUFBV0EsUUFDWGswSCwwQkFBMEIva0ksVUFBVUMsZUFBZSxxQkFDbkRrbUksaUJBQWlCbm1JLFVBQVVDLGVBQWU7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBbkRsRCxTQUEyQjZVLEdBQ3ZCLElBdUJJdXhILEVBQW1CLENBQ25CSCxZQUFhQSxJQUVqQnB4SCxFQUFTcUIsU0FBU3VELGtCQUFrQixJQUFJLFlBMUJwQixhQUNBLFNBQVV2RixHQUUxQixJQUdJbXlILEVBQW1CLENBQ25CcnRILElBSk05RSxFQUFVdUMsWUFBWSxPQUFPMUIsZUFLbkM2akgsY0FKZ0Ixa0gsRUFBVXVDLFlBQVksaUJBQWlCMUIsZUFLdkQ2d0gsa0JBSm9CMXhILEVBQVV1QyxZQUFZLHVCQU05QyxJQUFLd3ZILEtBQ0QsTUFBTTVMLEdBQWE1NkgsT0FBTyx1QkFFOUIsT0FBSWdSLE1BQVEsNkJBQThCQSxLQUUvQixJQUFJLEdBQWE0MUgsR0FJakIsSUFBSSxHQUFpQkEsS0FNNEMsVUFBdUJ2eUgsZ0JBQWdCc3lILElBQ3ZIdnhILEVBQVNvRSxnQkFBZ0IsR0FBTSxJQUVuQ3F0SCxDQUFrQixLQ2hrRWxCLGdCQVh1QixDQUNyQnJVLE9BQVEsMENBQ1JzVSxXQUFZLDhDQUNaQyxZQUFhLHFEQUNiNTVHLFVBQVcsOEJBQ1g2NUcsY0FBZSwwQ0FDZjdILGtCQUFtQixlQUNuQi9MLE1BQU8sOENBVVQsa0JBR0UsV0FBWTc1RyxHQUFaLFdBRUV0WSxLQUFLZ21JLFVBQVksY0FHakJobUksS0FBS2dtSSxVQUFVNXBFLFdBQVUsU0FBQTZwRSxHQUN2Qi84SCxRQUFRNE8sSUFBSSxxQkFBc0JtdUgsR0FDbEMsSUFBTXY3SCxFQUFPdTdILEVBQVF2N0gsS0FDckI0TixFQUFJczFHLHFCQUFxQmhFLG9CQUFvQmwvRyxNQUkvQzFLLEtBQUtnbUksVUFBVXpGLGdCQUFlLFdBQzVCLEVBQUt5RixVQUFVbHFFLFdBQVd0NUQsTUFBSyxTQUFBMGpJLEdBQzdCaDlILFFBQVE0TyxJQUFJLHVCQUF3Qm91SCxHQUVwQyxjQUFxQnhxRyxXQUFXLGFBQWE2USxJQUFJMjVGLEdBQzlDaHlILElBQUksQ0FBRXUwRyxNQUFPbndHLEVBQUl5MUcsU0FBU3BYLGtCQUM1QjdzRyxPQUFNLFNBQUFnRixHQUNQNUYsUUFBUTRPLElBQUksc0NBQXVDaEosU0FRdkRvQixPQUFPaTJILGtCQUFvQixXQUN6QixjQUFxQnJxRSxXQUNsQnQ1RCxNQUFLLFNBQUFxSixHQUNKM0MsUUFBUTRPLElBQUlqTSxNQUViL0IsT0FBTSxTQUFBZ0YsR0FDTDVGLFFBQVFwRixNQUFNZ0wsT0FRcEJvQixPQUFPazVHLHlCQUEyQixzQkFDM0JnZCxlQUFleC9FLFFBQVEsZ0JBQzFCLGNBQXFCa1YsV0FBV3Q1RCxNQUFLLFNBQUFxSixHQUMvQkEsR0FDRjNDLFFBQVE0TyxJQUFJLHVCQUF3QmpNLEdBRXBDLGNBQXFCNnZCLFdBQVcsYUFBYTZRLElBQUkxZ0MsR0FDOUNxSSxJQUFJLENBQUV1MEcsTUFBT253RyxFQUFJeTFHLFNBQVNwWCxlQUU3Qnl2QixlQUFldi9FLFFBQVEsY0FBZWg3QyxJQUd0QyxFQUFLdzZILHFDQUVOdjhILE9BQU0sU0FBQWdGLEdBQ1A1RixRQUFRcEYsTUFBTSwyQkFBNEJnTCxPQXFDcEQsT0ExQkUsWUFBQXUzSCxnQ0FBQSxXQUNFbjlILFFBQVE0TyxJQUFJLDBDQUNaLGNBQXFCaW9ILG9CQUFvQnY5SCxNQUFLLFdBQzVDMEcsUUFBUTRPLElBQUksb0NBQ1o1SCxPQUFPazVHLDhCQUNOdC9HLE9BQU0sU0FBQWdGLEdBQ1A1RixRQUFRcEYsTUFBTSxzQ0FBdUNnTCxPQW9CM0QsRUFoR0EsRywrMENDWE0sR0FBTSxJQUFJLEVBS1Z3M0gsR0FBTSxJQUFJLEdBQVUsS0FHMUJwMkgsT0FBTysvRyxrQkFBbUIsRUFNdEIsa0JBQW1Cam1ILFdBQ3JCa0csT0FBT3MyQyxpQkFBaUIsUUFBUSxXQUM5Qng4QyxVQUFVeTZILGNBQWNJLFNBQVMsc0JBQzlCcmlJLE1BQUssU0FBQWsvSCxHQUNKeDRILFFBQVE0TyxJQUFJLDZCQUE4QjRwSCxHQUV0Q3h4SCxPQUFPKy9HLGtCQUFrQnFXLEdBQUlOLFVBQVVoRyxpQkFBaUIwQixNQUU3RDUzSCxPQUFNLFNBQUFnRixHQUNMNUYsUUFBUXBGLE1BQU0sdUJBQXdCZ0wsU0FROUNvQixPQUFPZzFHLGVBQWlCLFdBQ3RCLE9BQU8sR0FBSTZJLFVBUVQ3OUcsT0FBT3EySCxrQkFDZ0IsSUFBSUEsaUJBQWlCLGVBRTdCQyxVQUFZLFNBQUFobUksR0FDTCxvQkFBbEJBLEVBQUVrSyxLQUFLcXFCLFNBQ1Q3ckIsUUFBUTRPLElBQUksaUNBQ1osR0FBSTgxRyxxQkFBcUJoRSxvQkFBb0JwcEgsRUFBRWtLLEtBQUtxVSxXQUl4RDdWLFFBQVFtQyxLQUFLLG1EQU1FK1QsU0FBU2tnRyxlQUFlLFlBRWhDbEMsUUFBVSxXQUNqQmwwRyxRQUFRNE8sSUFBSSwwQkFFWjVILE9BQU8rL0csa0JBQW1CLEVBSTFCLEdBQUluQyxZQUFZLENBQUV0TSxZQUFhLFlBQWE3SyxhQUFjLHVCQUF3QlEsVUFBVywyQkFDN0YsR0FBSTltRixNQUFNLENBQUVrcEYsYUFBYyxzQ0FDMUJrdEIsR0FBVTlsSCxNQUFNOC9GLFFBQVUsUUFhNUIsSUFHSWltQixHQUhFQyxHQUFZLDJFQU1oQkQsR0FBVSwwQ0FNWixJQWFRbk8sR0FiRnFPLEdBQWlCLENBQUMsOERBR2xCQyxHQUFTLHdDQUVUQyxHQUFrQjFuSCxTQUFTa2dHLGVBQWUsZ0JBQzFDeW5CLEdBQWdCM25ILFNBQVNrZ0csZUFBZSxjQXdCOUMsU0FBUzBuQixLQUNQN2hELEtBQUtoaEMsT0FBTzhpRixLQUFLLENBQ2YxVixPQUFRbVYsR0FDUjlzRixTQUFVK3NGLEdBQ1ZPLGNBQWVOLEdBQ2ZoSSxNQUFPaUksS0FDTnJrSSxNQUFLLFdBRU4yaUYsS0FBS2dpRCxNQUFNQyxrQkFBa0JDLFdBQVc5K0QsT0FBTysrRCxJQUcvQ0EsR0FBbUJuaUQsS0FBS2dpRCxNQUFNQyxrQkFBa0JDLFdBQVcvb0ksT0FDM0R3b0ksR0FBZ0IxcEIsUUFBVW1xQixHQUMxQlIsR0FBYzNwQixRQUFVb3FCLE1BQ3ZCLFNBQVUxakksR0FDWG9GLFFBQVE0TyxJQUFJcE0sS0FBS3NHLFVBQVVsTyxFQUFPLEtBQU0sT0FTNUMsU0FBU3dqSSxHQUFtQkQsR0FDMUIsR0FBSUEsRUFBWSxDQUNkbitILFFBQVE0TyxJQUFJLGVBRVosSUFBTW9VLEVBQVksRUFBUzBpRixhQUFhMStGLE9BQU8yNEYsU0FBU2lHLE1BQU01dUYsR0FFOUR1bUgsR0FBVTlsSCxNQUFNOC9GLFFBQVUsT0FFMUIsR0FBSXFOLGNBRUosR0FBSXo5RixNQUFNbkUsUUFFVmhqQixRQUFRNE8sSUFBSSxrQkErQmQydUgsR0FBVTlsSCxNQUFNOC9GLFFBQVUsT0FJMUJyaEcsU0FBU0csY0FBYyxVQUFVb0IsTUFBTTgvRixRQUFVLE9BQ2pEcmhHLFNBQVNHLGNBQWMsUUFBUW9CLE1BQU04L0YsUUFBVSxPQUMvQyxHQUFJa00sc0JBQXNCaHNHLE1BQU04L0YsUUFBVSxPQUsxQyxFQUFTeFIsVUFBVSxHQUFJd1ksY0FDdkJvSCxRQUFRQyxhQUFhLENBQUVrQixLQUFNLGtCQUFvQixpQkFBa0JubkIsU0FBU2lHLEtBQUt4akcsUUFBUXU5RixTQUFTOWUsT0FBUSxLQWxDNUcsU0FBU3c5QyxLQUNQcGlELEtBQUtnaUQsTUFBTUMsa0JBQWtCSyxTQU8vQixTQUFTRCxLQUNQcmlELEtBQUtnaUQsTUFBTUMsa0JBQWtCTSxXQXZFdkJuUCxHQUFTbjVHLFNBQVN3QixjQUFjLFdBQy9COU4sS0FBTyxrQkFDZHlsSCxHQUFPb1AsT0FBUSxFQUNmcFAsR0FBT3J3QixPQUFTLFdBT2hCL2lCLEtBQUt5aUQsS0FBSyxlQUFnQlosS0FOMUJ6TyxHQUFPejVCLElBQU0sb0NBQ2IxL0UsU0FBU0csY0FBYyxRQUFRMEIsWUFBWXMzRyxJQXlFN0MsSUFBTWtPLEdBQVlybkgsU0FBU2tnRyxlQUFlLGFBeUIxQyxJQTRFSXVvQixHQTVFQUMsR0FBa0QsS0FFaERDLEdBQWdCM29ILFNBQVNrZ0csZUFBZSxjQUU5Q3lvQixHQUFjdmhGLGlCQUFpQixTQTJCL0IsU0FBb0JobUQsR0FFbEJzbkksR0FBc0JFLFNBRXJCeG5JLEVBQUVNLE9BQXVCbW5JLFFBQVMsRUFFbkNILEdBQXNCSSxXQUNuQjFsSSxNQUFLLFNBQUEybEksR0FDbUIsYUFBbkJBLEVBQU9DLFFBQ1RsL0gsUUFBUTRPLElBQUksZ0NBQWlDcXdILEdBRTdDai9ILFFBQVE0TyxJQUFJLGlDQUFrQ3F3SCxHQUVoREwsR0FBd0IsV0FwQzlCNTNILE9BQU9zMkMsaUJBQWlCLHVCQVF4QixTQUFzQ2htRCxHQUdwQ0EsRUFBRWcrRixpQkFFRnNwQyxHQUF3QnRuSSxFQUV4QnVuSSxHQUFjaG1ILGdCQUFnQixhQTRCaEM3UixPQUFPczJDLGlCQUFpQixnQkFPeEIsU0FBeUJobUQsR0FDdkIwSSxRQUFRNE8sSUFBSSwyQ0FBNEN0WCxNQW1CMUQsR0FBSXVoSCxhQUFheGlHLGNBQWMscUJBQXFCaW5DLGlCQUFpQixTQUFTLFNBQWdCaG1ELEcsMkdBQ3hGcW5JLElBQ0ZBLEdBQWtCbnJCLFVBQVVwN0YsT0FBTyxVQUVyQ3VtSCxHQUFxQnJuSSxFQUFFTSxPQUNqQnVuSSxFQUFZUixHQUFrQjVyQixRQUFRLzdGLEdBRzNDLEdBQUk2aEcsYUFBYXZCLFNBQVMsR0FBbUJsRCxVQUFZdXFCLEdBQWtCdnFCLFVBQzVFdXFCLEdBQWtCbnJCLFVBQVV6bEYsSUFBSSxVQUcxQnF4RyxFQUFtQixHQUFJM2EsaUJBQWlCdlYsU0FBUzF6RCxNQUFLLFNBQUEzbUQsR0FBSyxPQUFBQSxFQUFFbWlCLEtBQU9tb0gsVUFLM0I5K0gsSUFBM0MsR0FBSW9rSCxpQkFBaUJoSyxrQkFBckIsWSxRQUM0Q3A2RyxJQUExQyxHQUFJb2tILGlCQUFpQjFTLGlCQUFyQixZQUNFc3RCLE9BQVMsRSxpQkFFQyxPLHNCQUFBLEdBQU0sRUFBSXp0QixlQUFlLEdBQUk2UyxpQkFBaUIxUyxtQixjQUExRHN0QixFQUFZLFMsNkJBRVpyL0gsUUFBUXBGLE1BQU0sb0Qsb0JBRVp5a0ksS0FDSUMsRUFBV3BwSCxTQUFTd0IsY0FBYyxVQUMvQjA4RixVQUFZaXJCLEVBQVU3bEksS0FDL0IwYyxTQUFTTSxLQUFLdUIsWUFBWXVuSCxHQUMxQixHQUFJN2EsaUJBQWlCaEssa0JBQW9CNmtCLEcsYUFHM0N0L0gsUUFBUW1DLEtBQUssaUUsNkJBS2dCOUIsSUFBN0IrK0gsRUFBaUJ2cEgsUUFDbkIsR0FBSTR1RyxpQkFBaUJ6SyxXQUFXb2xCLElBRWhDLEdBQUl6YyxtQkFBbUIsU0FBVSxtQkFDakMsRUFBSS9RLGVBQWV1dEIsR0FBVzdsSSxNQUFLLFNBQUEyTyxHQUNqQ20zSCxFQUFpQnQwQixXQUFXN2lHLEVBQUl6TyxNQUNoQyxHQUFJaXJILGlCQUFpQnpLLFdBQVdvbEIsR0FDaEMsR0FBSXJjLHNCQUNKL2lILFFBQVE0TyxJQUFJLHVCQUNYLFNBQUFoSixHQUNENUYsUUFBUTRPLElBQUloSixPLGNBVWxCLElBRkEsSUFBTTI1SCxHQUFZcnBILFNBQVNzcEgsdUJBQXVCLHNCLFlBRXpDanJJLEdBQ1BnckksR0FBVWhySSxHQUFHK2lILFNBQVMsR0FBR2g2RCxpQkFBaUIsU0FBUyxXQUNqRGlpRixHQUFVaHJJLEdBQUdpL0csVUFBVWdOLE9BQU8sV0FFaEMrZSxHQUFVaHJJLEdBQUcrb0QsaUJBQWlCLGNBQWMsU0FBQWhtRCxHQUN6Q0EsRUFBRXdpSCxjQUE4QnRHLFVBQVVwN0YsT0FBTyxZQUw3QyxHQUFJLEVBQUcsR0FBSW1uSCxHQUFVcG9JLE9BQVEsSyxHQUE3QixJQVlULElBQU1zb0ksR0FBZ0J2cEgsU0FBU2tnRyxlQUFlLGlCQUU5Q3FwQixHQUFjbmlGLGlCQUFpQixTQUFTLFdBQ3RDcG5DLFNBQVNrZ0csZUFBZSxvQkFBb0I1QyxVQUFVZ04sT0FBTyxVQUM3RGlmLEdBQWNqc0IsVUFBVWdOLE9BQU8iLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAxOSk7XG4iLCIvKiEgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbkxpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZVxyXG50aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4gWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZVxyXG5MaWNlbnNlIGF0IGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG5cclxuVEhJUyBDT0RFIElTIFBST1ZJREVEIE9OIEFOICpBUyBJUyogQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxyXG5LSU5ELCBFSVRIRVIgRVhQUkVTUyBPUiBJTVBMSUVELCBJTkNMVURJTkcgV0lUSE9VVCBMSU1JVEFUSU9OIEFOWSBJTVBMSUVEXHJcbldBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBUSVRMRSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UsXHJcbk1FUkNIQU5UQUJMSVRZIE9SIE5PTi1JTkZSSU5HRU1FTlQuXHJcblxyXG5TZWUgdGhlIEFwYWNoZSBWZXJzaW9uIDIuMCBMaWNlbnNlIGZvciBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnNcclxuYW5kIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqL1xyXG4vKiBnbG9iYWwgUmVmbGVjdCwgUHJvbWlzZSAqL1xyXG5cclxudmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbihkLCBiKSB7XHJcbiAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XHJcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxyXG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xyXG4gICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19leHRlbmRzKGQsIGIpIHtcclxuICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxufVxyXG5cclxuZXhwb3J0IHZhciBfX2Fzc2lnbiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgX19hc3NpZ24gPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uIF9fYXNzaWduKHQpIHtcclxuICAgICAgICBmb3IgKHZhciBzLCBpID0gMSwgbiA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcclxuICAgICAgICAgICAgcyA9IGFyZ3VtZW50c1tpXTtcclxuICAgICAgICAgICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApKSB0W3BdID0gc1twXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHQ7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gX19hc3NpZ24uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcmVzdChzLCBlKSB7XHJcbiAgICB2YXIgdCA9IHt9O1xyXG4gICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApICYmIGUuaW5kZXhPZihwKSA8IDApXHJcbiAgICAgICAgdFtwXSA9IHNbcF07XHJcbiAgICBpZiAocyAhPSBudWxsICYmIHR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzID09PSBcImZ1bmN0aW9uXCIpXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIHAgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHMpOyBpIDwgcC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAoZS5pbmRleE9mKHBbaV0pIDwgMCAmJiBPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwocywgcFtpXSkpXHJcbiAgICAgICAgICAgICAgICB0W3BbaV1dID0gc1twW2ldXTtcclxuICAgICAgICB9XHJcbiAgICByZXR1cm4gdDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcclxuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XHJcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xyXG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcclxuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3BhcmFtKHBhcmFtSW5kZXgsIGRlY29yYXRvcikge1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0YXJnZXQsIGtleSkgeyBkZWNvcmF0b3IodGFyZ2V0LCBrZXksIHBhcmFtSW5kZXgpOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX21ldGFkYXRhKG1ldGFkYXRhS2V5LCBtZXRhZGF0YVZhbHVlKSB7XHJcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QubWV0YWRhdGEgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIFJlZmxlY3QubWV0YWRhdGEobWV0YWRhdGFLZXksIG1ldGFkYXRhVmFsdWUpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hd2FpdGVyKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xyXG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZShyZXN1bHQudmFsdWUpOyB9KS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XHJcbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2dlbmVyYXRvcih0aGlzQXJnLCBib2R5KSB7XHJcbiAgICB2YXIgXyA9IHsgbGFiZWw6IDAsIHNlbnQ6IGZ1bmN0aW9uKCkgeyBpZiAodFswXSAmIDEpIHRocm93IHRbMV07IHJldHVybiB0WzFdOyB9LCB0cnlzOiBbXSwgb3BzOiBbXSB9LCBmLCB5LCB0LCBnO1xyXG4gICAgcmV0dXJuIGcgPSB7IG5leHQ6IHZlcmIoMCksIFwidGhyb3dcIjogdmVyYigxKSwgXCJyZXR1cm5cIjogdmVyYigyKSB9LCB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgKGdbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSksIGc7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgcmV0dXJuIGZ1bmN0aW9uICh2KSB7IHJldHVybiBzdGVwKFtuLCB2XSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHN0ZXAob3ApIHtcclxuICAgICAgICBpZiAoZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy5cIik7XHJcbiAgICAgICAgd2hpbGUgKF8pIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChmID0gMSwgeSAmJiAodCA9IG9wWzBdICYgMiA/IHlbXCJyZXR1cm5cIl0gOiBvcFswXSA/IHlbXCJ0aHJvd1wiXSB8fCAoKHQgPSB5W1wicmV0dXJuXCJdKSAmJiB0LmNhbGwoeSksIDApIDogeS5uZXh0KSAmJiAhKHQgPSB0LmNhbGwoeSwgb3BbMV0pKS5kb25lKSByZXR1cm4gdDtcclxuICAgICAgICAgICAgaWYgKHkgPSAwLCB0KSBvcCA9IFtvcFswXSAmIDIsIHQudmFsdWVdO1xyXG4gICAgICAgICAgICBzd2l0Y2ggKG9wWzBdKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6IGNhc2UgMTogdCA9IG9wOyBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgNDogXy5sYWJlbCsrOyByZXR1cm4geyB2YWx1ZTogb3BbMV0sIGRvbmU6IGZhbHNlIH07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDU6IF8ubGFiZWwrKzsgeSA9IG9wWzFdOyBvcCA9IFswXTsgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDc6IG9wID0gXy5vcHMucG9wKCk7IF8udHJ5cy5wb3AoKTsgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghKHQgPSBfLnRyeXMsIHQgPSB0Lmxlbmd0aCA+IDAgJiYgdFt0Lmxlbmd0aCAtIDFdKSAmJiAob3BbMF0gPT09IDYgfHwgb3BbMF0gPT09IDIpKSB7IF8gPSAwOyBjb250aW51ZTsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gMyAmJiAoIXQgfHwgKG9wWzFdID4gdFswXSAmJiBvcFsxXSA8IHRbM10pKSkgeyBfLmxhYmVsID0gb3BbMV07IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSA2ICYmIF8ubGFiZWwgPCB0WzFdKSB7IF8ubGFiZWwgPSB0WzFdOyB0ID0gb3A7IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHQgJiYgXy5sYWJlbCA8IHRbMl0pIHsgXy5sYWJlbCA9IHRbMl07IF8ub3BzLnB1c2gob3ApOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0WzJdKSBfLm9wcy5wb3AoKTtcclxuICAgICAgICAgICAgICAgICAgICBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG9wID0gYm9keS5jYWxsKHRoaXNBcmcsIF8pO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHsgb3AgPSBbNiwgZV07IHkgPSAwOyB9IGZpbmFsbHkgeyBmID0gdCA9IDA7IH1cclxuICAgICAgICBpZiAob3BbMF0gJiA1KSB0aHJvdyBvcFsxXTsgcmV0dXJuIHsgdmFsdWU6IG9wWzBdID8gb3BbMV0gOiB2b2lkIDAsIGRvbmU6IHRydWUgfTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZXhwb3J0U3RhcihtLCBleHBvcnRzKSB7XHJcbiAgICBmb3IgKHZhciBwIGluIG0pIGlmICghZXhwb3J0cy5oYXNPd25Qcm9wZXJ0eShwKSkgZXhwb3J0c1twXSA9IG1bcF07XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3ZhbHVlcyhvKSB7XHJcbiAgICB2YXIgbSA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvW1N5bWJvbC5pdGVyYXRvcl0sIGkgPSAwO1xyXG4gICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDtcclxuICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9O1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3JlYWQobywgbikge1xyXG4gICAgdmFyIG0gPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb1tTeW1ib2wuaXRlcmF0b3JdO1xyXG4gICAgaWYgKCFtKSByZXR1cm4gbztcclxuICAgIHZhciBpID0gbS5jYWxsKG8pLCByLCBhciA9IFtdLCBlO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICB3aGlsZSAoKG4gPT09IHZvaWQgMCB8fCBuLS0gPiAwKSAmJiAhKHIgPSBpLm5leHQoKSkuZG9uZSkgYXIucHVzaChyLnZhbHVlKTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlcnJvcikgeyBlID0geyBlcnJvcjogZXJyb3IgfTsgfVxyXG4gICAgZmluYWxseSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKHIgJiYgIXIuZG9uZSAmJiAobSA9IGlbXCJyZXR1cm5cIl0pKSBtLmNhbGwoaSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZpbmFsbHkgeyBpZiAoZSkgdGhyb3cgZS5lcnJvcjsgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGFyO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19zcHJlYWQoKSB7XHJcbiAgICBmb3IgKHZhciBhciA9IFtdLCBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKylcclxuICAgICAgICBhciA9IGFyLmNvbmNhdChfX3JlYWQoYXJndW1lbnRzW2ldKSk7XHJcbiAgICByZXR1cm4gYXI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3NwcmVhZEFycmF5cygpIHtcclxuICAgIGZvciAodmFyIHMgPSAwLCBpID0gMCwgaWwgPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgaWw7IGkrKykgcyArPSBhcmd1bWVudHNbaV0ubGVuZ3RoO1xyXG4gICAgZm9yICh2YXIgciA9IEFycmF5KHMpLCBrID0gMCwgaSA9IDA7IGkgPCBpbDsgaSsrKVxyXG4gICAgICAgIGZvciAodmFyIGEgPSBhcmd1bWVudHNbaV0sIGogPSAwLCBqbCA9IGEubGVuZ3RoOyBqIDwgamw7IGorKywgaysrKVxyXG4gICAgICAgICAgICByW2tdID0gYVtqXTtcclxuICAgIHJldHVybiByO1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXdhaXQodikge1xyXG4gICAgcmV0dXJuIHRoaXMgaW5zdGFuY2VvZiBfX2F3YWl0ID8gKHRoaXMudiA9IHYsIHRoaXMpIDogbmV3IF9fYXdhaXQodik7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jR2VuZXJhdG9yKHRoaXNBcmcsIF9hcmd1bWVudHMsIGdlbmVyYXRvcikge1xyXG4gICAgaWYgKCFTeW1ib2wuYXN5bmNJdGVyYXRvcikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5hc3luY0l0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxuICAgIHZhciBnID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pLCBpLCBxID0gW107XHJcbiAgICByZXR1cm4gaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIpLCB2ZXJiKFwicmV0dXJuXCIpLCBpW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgaWYgKGdbbl0pIGlbbl0gPSBmdW5jdGlvbiAodikgeyByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKGEsIGIpIHsgcS5wdXNoKFtuLCB2LCBhLCBiXSkgPiAxIHx8IHJlc3VtZShuLCB2KTsgfSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHJlc3VtZShuLCB2KSB7IHRyeSB7IHN0ZXAoZ1tuXSh2KSk7IH0gY2F0Y2ggKGUpIHsgc2V0dGxlKHFbMF1bM10sIGUpOyB9IH1cclxuICAgIGZ1bmN0aW9uIHN0ZXAocikgeyByLnZhbHVlIGluc3RhbmNlb2YgX19hd2FpdCA/IFByb21pc2UucmVzb2x2ZShyLnZhbHVlLnYpLnRoZW4oZnVsZmlsbCwgcmVqZWN0KSA6IHNldHRsZShxWzBdWzJdLCByKTsgfVxyXG4gICAgZnVuY3Rpb24gZnVsZmlsbCh2YWx1ZSkgeyByZXN1bWUoXCJuZXh0XCIsIHZhbHVlKTsgfVxyXG4gICAgZnVuY3Rpb24gcmVqZWN0KHZhbHVlKSB7IHJlc3VtZShcInRocm93XCIsIHZhbHVlKTsgfVxyXG4gICAgZnVuY3Rpb24gc2V0dGxlKGYsIHYpIHsgaWYgKGYodiksIHEuc2hpZnQoKSwgcS5sZW5ndGgpIHJlc3VtZShxWzBdWzBdLCBxWzBdWzFdKTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY0RlbGVnYXRvcihvKSB7XHJcbiAgICB2YXIgaSwgcDtcclxuICAgIHJldHVybiBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiwgZnVuY3Rpb24gKGUpIHsgdGhyb3cgZTsgfSksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4sIGYpIHsgaVtuXSA9IG9bbl0gPyBmdW5jdGlvbiAodikgeyByZXR1cm4gKHAgPSAhcCkgPyB7IHZhbHVlOiBfX2F3YWl0KG9bbl0odikpLCBkb25lOiBuID09PSBcInJldHVyblwiIH0gOiBmID8gZih2KSA6IHY7IH0gOiBmOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jVmFsdWVzKG8pIHtcclxuICAgIGlmICghU3ltYm9sLmFzeW5jSXRlcmF0b3IpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTeW1ib2wuYXN5bmNJdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XHJcbiAgICB2YXIgbSA9IG9bU3ltYm9sLmFzeW5jSXRlcmF0b3JdLCBpO1xyXG4gICAgcmV0dXJuIG0gPyBtLmNhbGwobykgOiAobyA9IHR5cGVvZiBfX3ZhbHVlcyA9PT0gXCJmdW5jdGlvblwiID8gX192YWx1ZXMobykgOiBvW1N5bWJvbC5pdGVyYXRvcl0oKSwgaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIpLCB2ZXJiKFwicmV0dXJuXCIpLCBpW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGkpO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IGlbbl0gPSBvW25dICYmIGZ1bmN0aW9uICh2KSB7IHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7IHYgPSBvW25dKHYpLCBzZXR0bGUocmVzb2x2ZSwgcmVqZWN0LCB2LmRvbmUsIHYudmFsdWUpOyB9KTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gc2V0dGxlKHJlc29sdmUsIHJlamVjdCwgZCwgdikgeyBQcm9taXNlLnJlc29sdmUodikudGhlbihmdW5jdGlvbih2KSB7IHJlc29sdmUoeyB2YWx1ZTogdiwgZG9uZTogZCB9KTsgfSwgcmVqZWN0KTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19tYWtlVGVtcGxhdGVPYmplY3QoY29va2VkLCByYXcpIHtcclxuICAgIGlmIChPYmplY3QuZGVmaW5lUHJvcGVydHkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KGNvb2tlZCwgXCJyYXdcIiwgeyB2YWx1ZTogcmF3IH0pOyB9IGVsc2UgeyBjb29rZWQucmF3ID0gcmF3OyB9XHJcbiAgICByZXR1cm4gY29va2VkO1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9faW1wb3J0U3Rhcihtb2QpIHtcclxuICAgIGlmIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpIHJldHVybiBtb2Q7XHJcbiAgICB2YXIgcmVzdWx0ID0ge307XHJcbiAgICBpZiAobW9kICE9IG51bGwpIGZvciAodmFyIGsgaW4gbW9kKSBpZiAoT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobW9kLCBrKSkgcmVzdWx0W2tdID0gbW9kW2tdO1xyXG4gICAgcmVzdWx0LmRlZmF1bHQgPSBtb2Q7XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19pbXBvcnREZWZhdWx0KG1vZCkge1xyXG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBkZWZhdWx0OiBtb2QgfTtcclxufVxyXG4iLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG5cbnZhciB0c2xpYiA9IHJlcXVpcmUoJ3RzbGliJyk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQGZpbGVvdmVydmlldyBGaXJlYmFzZSBjb25zdGFudHMuICBTb21lIG9mIHRoZXNlIChAZGVmaW5lcykgY2FuIGJlIG92ZXJyaWRkZW4gYXQgY29tcGlsZS10aW1lLlxyXG4gKi9cclxudmFyIENPTlNUQU5UUyA9IHtcclxuICAgIC8qKlxyXG4gICAgICogQGRlZmluZSB7Ym9vbGVhbn0gV2hldGhlciB0aGlzIGlzIHRoZSBjbGllbnQgTm9kZS5qcyBTREsuXHJcbiAgICAgKi9cclxuICAgIE5PREVfQ0xJRU5UOiBmYWxzZSxcclxuICAgIC8qKlxyXG4gICAgICogQGRlZmluZSB7Ym9vbGVhbn0gV2hldGhlciB0aGlzIGlzIHRoZSBBZG1pbiBOb2RlLmpzIFNESy5cclxuICAgICAqL1xyXG4gICAgTk9ERV9BRE1JTjogZmFsc2UsXHJcbiAgICAvKipcclxuICAgICAqIEZpcmViYXNlIFNESyBWZXJzaW9uXHJcbiAgICAgKi9cclxuICAgIFNES19WRVJTSU9OOiAnJHtKU0NPUkVfVkVSU0lPTn0nXHJcbn07XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogVGhyb3dzIGFuIGVycm9yIGlmIHRoZSBwcm92aWRlZCBhc3NlcnRpb24gaXMgZmFsc3lcclxuICovXHJcbnZhciBhc3NlcnQgPSBmdW5jdGlvbiAoYXNzZXJ0aW9uLCBtZXNzYWdlKSB7XHJcbiAgICBpZiAoIWFzc2VydGlvbikge1xyXG4gICAgICAgIHRocm93IGFzc2VydGlvbkVycm9yKG1lc3NhZ2UpO1xyXG4gICAgfVxyXG59O1xyXG4vKipcclxuICogUmV0dXJucyBhbiBFcnJvciBvYmplY3Qgc3VpdGFibGUgZm9yIHRocm93aW5nLlxyXG4gKi9cclxudmFyIGFzc2VydGlvbkVycm9yID0gZnVuY3Rpb24gKG1lc3NhZ2UpIHtcclxuICAgIHJldHVybiBuZXcgRXJyb3IoJ0ZpcmViYXNlIERhdGFiYXNlICgnICtcclxuICAgICAgICBDT05TVEFOVFMuU0RLX1ZFUlNJT04gK1xyXG4gICAgICAgICcpIElOVEVSTkFMIEFTU0VSVCBGQUlMRUQ6ICcgK1xyXG4gICAgICAgIG1lc3NhZ2UpO1xyXG59O1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxudmFyIHN0cmluZ1RvQnl0ZUFycmF5ID0gZnVuY3Rpb24gKHN0cikge1xyXG4gICAgLy8gVE9ETyh1c2VyKTogVXNlIG5hdGl2ZSBpbXBsZW1lbnRhdGlvbnMgaWYvd2hlbiBhdmFpbGFibGVcclxuICAgIHZhciBvdXQgPSBbXTtcclxuICAgIHZhciBwID0gMDtcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgdmFyIGMgPSBzdHIuY2hhckNvZGVBdChpKTtcclxuICAgICAgICBpZiAoYyA8IDEyOCkge1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IGM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGMgPCAyMDQ4KSB7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgPj4gNikgfCAxOTI7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKChjICYgMHhmYzAwKSA9PT0gMHhkODAwICYmXHJcbiAgICAgICAgICAgIGkgKyAxIDwgc3RyLmxlbmd0aCAmJlxyXG4gICAgICAgICAgICAoc3RyLmNoYXJDb2RlQXQoaSArIDEpICYgMHhmYzAwKSA9PT0gMHhkYzAwKSB7XHJcbiAgICAgICAgICAgIC8vIFN1cnJvZ2F0ZSBQYWlyXHJcbiAgICAgICAgICAgIGMgPSAweDEwMDAwICsgKChjICYgMHgwM2ZmKSA8PCAxMCkgKyAoc3RyLmNoYXJDb2RlQXQoKytpKSAmIDB4MDNmZik7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgPj4gMTgpIHwgMjQwO1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9ICgoYyA+PiAxMikgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKChjID4+IDYpICYgNjMpIHwgMTI4O1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjICYgNjMpIHwgMTI4O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyA+PiAxMikgfCAyMjQ7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKChjID4+IDYpICYgNjMpIHwgMTI4O1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjICYgNjMpIHwgMTI4O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBvdXQ7XHJcbn07XHJcbi8qKlxyXG4gKiBUdXJucyBhbiBhcnJheSBvZiBudW1iZXJzIGludG8gdGhlIHN0cmluZyBnaXZlbiBieSB0aGUgY29uY2F0ZW5hdGlvbiBvZiB0aGVcclxuICogY2hhcmFjdGVycyB0byB3aGljaCB0aGUgbnVtYmVycyBjb3JyZXNwb25kLlxyXG4gKiBAcGFyYW0gYnl0ZXMgQXJyYXkgb2YgbnVtYmVycyByZXByZXNlbnRpbmcgY2hhcmFjdGVycy5cclxuICogQHJldHVybiBTdHJpbmdpZmljYXRpb24gb2YgdGhlIGFycmF5LlxyXG4gKi9cclxudmFyIGJ5dGVBcnJheVRvU3RyaW5nID0gZnVuY3Rpb24gKGJ5dGVzKSB7XHJcbiAgICAvLyBUT0RPKHVzZXIpOiBVc2UgbmF0aXZlIGltcGxlbWVudGF0aW9ucyBpZi93aGVuIGF2YWlsYWJsZVxyXG4gICAgdmFyIG91dCA9IFtdO1xyXG4gICAgdmFyIHBvcyA9IDAsIGMgPSAwO1xyXG4gICAgd2hpbGUgKHBvcyA8IGJ5dGVzLmxlbmd0aCkge1xyXG4gICAgICAgIHZhciBjMSA9IGJ5dGVzW3BvcysrXTtcclxuICAgICAgICBpZiAoYzEgPCAxMjgpIHtcclxuICAgICAgICAgICAgb3V0W2MrK10gPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGMxKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoYzEgPiAxOTEgJiYgYzEgPCAyMjQpIHtcclxuICAgICAgICAgICAgdmFyIGMyID0gYnl0ZXNbcG9zKytdO1xyXG4gICAgICAgICAgICBvdXRbYysrXSA9IFN0cmluZy5mcm9tQ2hhckNvZGUoKChjMSAmIDMxKSA8PCA2KSB8IChjMiAmIDYzKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGMxID4gMjM5ICYmIGMxIDwgMzY1KSB7XHJcbiAgICAgICAgICAgIC8vIFN1cnJvZ2F0ZSBQYWlyXHJcbiAgICAgICAgICAgIHZhciBjMiA9IGJ5dGVzW3BvcysrXTtcclxuICAgICAgICAgICAgdmFyIGMzID0gYnl0ZXNbcG9zKytdO1xyXG4gICAgICAgICAgICB2YXIgYzQgPSBieXRlc1twb3MrK107XHJcbiAgICAgICAgICAgIHZhciB1ID0gKCgoYzEgJiA3KSA8PCAxOCkgfCAoKGMyICYgNjMpIDw8IDEyKSB8ICgoYzMgJiA2MykgPDwgNikgfCAoYzQgJiA2MykpIC1cclxuICAgICAgICAgICAgICAgIDB4MTAwMDA7XHJcbiAgICAgICAgICAgIG91dFtjKytdID0gU3RyaW5nLmZyb21DaGFyQ29kZSgweGQ4MDAgKyAodSA+PiAxMCkpO1xyXG4gICAgICAgICAgICBvdXRbYysrXSA9IFN0cmluZy5mcm9tQ2hhckNvZGUoMHhkYzAwICsgKHUgJiAxMDIzKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB2YXIgYzIgPSBieXRlc1twb3MrK107XHJcbiAgICAgICAgICAgIHZhciBjMyA9IGJ5dGVzW3BvcysrXTtcclxuICAgICAgICAgICAgb3V0W2MrK10gPSBTdHJpbmcuZnJvbUNoYXJDb2RlKCgoYzEgJiAxNSkgPDwgMTIpIHwgKChjMiAmIDYzKSA8PCA2KSB8IChjMyAmIDYzKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG91dC5qb2luKCcnKTtcclxufTtcclxuLy8gV2UgZGVmaW5lIGl0IGFzIGFuIG9iamVjdCBsaXRlcmFsIGluc3RlYWQgb2YgYSBjbGFzcyBiZWNhdXNlIGEgY2xhc3MgY29tcGlsZWQgZG93biB0byBlczUgY2FuJ3RcclxuLy8gYmUgdHJlZXNoYWtlZC4gaHR0cHM6Ly9naXRodWIuY29tL3JvbGx1cC9yb2xsdXAvaXNzdWVzLzE2OTFcclxuLy8gU3RhdGljIGxvb2t1cCBtYXBzLCBsYXppbHkgcG9wdWxhdGVkIGJ5IGluaXRfKClcclxudmFyIGJhc2U2NCA9IHtcclxuICAgIC8qKlxyXG4gICAgICogTWFwcyBieXRlcyB0byBjaGFyYWN0ZXJzLlxyXG4gICAgICovXHJcbiAgICBieXRlVG9DaGFyTWFwXzogbnVsbCxcclxuICAgIC8qKlxyXG4gICAgICogTWFwcyBjaGFyYWN0ZXJzIHRvIGJ5dGVzLlxyXG4gICAgICovXHJcbiAgICBjaGFyVG9CeXRlTWFwXzogbnVsbCxcclxuICAgIC8qKlxyXG4gICAgICogTWFwcyBieXRlcyB0byB3ZWJzYWZlIGNoYXJhY3RlcnMuXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICBieXRlVG9DaGFyTWFwV2ViU2FmZV86IG51bGwsXHJcbiAgICAvKipcclxuICAgICAqIE1hcHMgd2Vic2FmZSBjaGFyYWN0ZXJzIHRvIGJ5dGVzLlxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgY2hhclRvQnl0ZU1hcFdlYlNhZmVfOiBudWxsLFxyXG4gICAgLyoqXHJcbiAgICAgKiBPdXIgZGVmYXVsdCBhbHBoYWJldCwgc2hhcmVkIGJldHdlZW5cclxuICAgICAqIEVOQ09ERURfVkFMUyBhbmQgRU5DT0RFRF9WQUxTX1dFQlNBRkVcclxuICAgICAqL1xyXG4gICAgRU5DT0RFRF9WQUxTX0JBU0U6ICdBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWicgKyAnYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXonICsgJzAxMjM0NTY3ODknLFxyXG4gICAgLyoqXHJcbiAgICAgKiBPdXIgZGVmYXVsdCBhbHBoYWJldC4gVmFsdWUgNjQgKD0pIGlzIHNwZWNpYWw7IGl0IG1lYW5zIFwibm90aGluZy5cIlxyXG4gICAgICovXHJcbiAgICBnZXQgRU5DT0RFRF9WQUxTKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLkVOQ09ERURfVkFMU19CQVNFICsgJysvPSc7XHJcbiAgICB9LFxyXG4gICAgLyoqXHJcbiAgICAgKiBPdXIgd2Vic2FmZSBhbHBoYWJldC5cclxuICAgICAqL1xyXG4gICAgZ2V0IEVOQ09ERURfVkFMU19XRUJTQUZFKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLkVOQ09ERURfVkFMU19CQVNFICsgJy1fLic7XHJcbiAgICB9LFxyXG4gICAgLyoqXHJcbiAgICAgKiBXaGV0aGVyIHRoaXMgYnJvd3NlciBzdXBwb3J0cyB0aGUgYXRvYiBhbmQgYnRvYSBmdW5jdGlvbnMuIFRoaXMgZXh0ZW5zaW9uXHJcbiAgICAgKiBzdGFydGVkIGF0IE1vemlsbGEgYnV0IGlzIG5vdyBpbXBsZW1lbnRlZCBieSBtYW55IGJyb3dzZXJzLiBXZSB1c2UgdGhlXHJcbiAgICAgKiBBU1NVTUVfKiB2YXJpYWJsZXMgdG8gYXZvaWQgcHVsbGluZyBpbiB0aGUgZnVsbCB1c2VyYWdlbnQgZGV0ZWN0aW9uIGxpYnJhcnlcclxuICAgICAqIGJ1dCBzdGlsbCBhbGxvd2luZyB0aGUgc3RhbmRhcmQgcGVyLWJyb3dzZXIgY29tcGlsYXRpb25zLlxyXG4gICAgICpcclxuICAgICAqL1xyXG4gICAgSEFTX05BVElWRV9TVVBQT1JUOiB0eXBlb2YgYXRvYiA9PT0gJ2Z1bmN0aW9uJyxcclxuICAgIC8qKlxyXG4gICAgICogQmFzZTY0LWVuY29kZSBhbiBhcnJheSBvZiBieXRlcy5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gaW5wdXQgQW4gYXJyYXkgb2YgYnl0ZXMgKG51bWJlcnMgd2l0aFxyXG4gICAgICogICAgIHZhbHVlIGluIFswLCAyNTVdKSB0byBlbmNvZGUuXHJcbiAgICAgKiBAcGFyYW0gd2ViU2FmZSBCb29sZWFuIGluZGljYXRpbmcgd2Ugc2hvdWxkIHVzZSB0aGVcclxuICAgICAqICAgICBhbHRlcm5hdGl2ZSBhbHBoYWJldC5cclxuICAgICAqIEByZXR1cm4gVGhlIGJhc2U2NCBlbmNvZGVkIHN0cmluZy5cclxuICAgICAqL1xyXG4gICAgZW5jb2RlQnl0ZUFycmF5OiBmdW5jdGlvbiAoaW5wdXQsIHdlYlNhZmUpIHtcclxuICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkoaW5wdXQpKSB7XHJcbiAgICAgICAgICAgIHRocm93IEVycm9yKCdlbmNvZGVCeXRlQXJyYXkgdGFrZXMgYW4gYXJyYXkgYXMgYSBwYXJhbWV0ZXInKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5pbml0XygpO1xyXG4gICAgICAgIHZhciBieXRlVG9DaGFyTWFwID0gd2ViU2FmZVxyXG4gICAgICAgICAgICA/IHRoaXMuYnl0ZVRvQ2hhck1hcFdlYlNhZmVfXHJcbiAgICAgICAgICAgIDogdGhpcy5ieXRlVG9DaGFyTWFwXztcclxuICAgICAgICB2YXIgb3V0cHV0ID0gW107XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpbnB1dC5sZW5ndGg7IGkgKz0gMykge1xyXG4gICAgICAgICAgICB2YXIgYnl0ZTEgPSBpbnB1dFtpXTtcclxuICAgICAgICAgICAgdmFyIGhhdmVCeXRlMiA9IGkgKyAxIDwgaW5wdXQubGVuZ3RoO1xyXG4gICAgICAgICAgICB2YXIgYnl0ZTIgPSBoYXZlQnl0ZTIgPyBpbnB1dFtpICsgMV0gOiAwO1xyXG4gICAgICAgICAgICB2YXIgaGF2ZUJ5dGUzID0gaSArIDIgPCBpbnB1dC5sZW5ndGg7XHJcbiAgICAgICAgICAgIHZhciBieXRlMyA9IGhhdmVCeXRlMyA/IGlucHV0W2kgKyAyXSA6IDA7XHJcbiAgICAgICAgICAgIHZhciBvdXRCeXRlMSA9IGJ5dGUxID4+IDI7XHJcbiAgICAgICAgICAgIHZhciBvdXRCeXRlMiA9ICgoYnl0ZTEgJiAweDAzKSA8PCA0KSB8IChieXRlMiA+PiA0KTtcclxuICAgICAgICAgICAgdmFyIG91dEJ5dGUzID0gKChieXRlMiAmIDB4MGYpIDw8IDIpIHwgKGJ5dGUzID4+IDYpO1xyXG4gICAgICAgICAgICB2YXIgb3V0Qnl0ZTQgPSBieXRlMyAmIDB4M2Y7XHJcbiAgICAgICAgICAgIGlmICghaGF2ZUJ5dGUzKSB7XHJcbiAgICAgICAgICAgICAgICBvdXRCeXRlNCA9IDY0O1xyXG4gICAgICAgICAgICAgICAgaWYgKCFoYXZlQnl0ZTIpIHtcclxuICAgICAgICAgICAgICAgICAgICBvdXRCeXRlMyA9IDY0O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG91dHB1dC5wdXNoKGJ5dGVUb0NoYXJNYXBbb3V0Qnl0ZTFdLCBieXRlVG9DaGFyTWFwW291dEJ5dGUyXSwgYnl0ZVRvQ2hhck1hcFtvdXRCeXRlM10sIGJ5dGVUb0NoYXJNYXBbb3V0Qnl0ZTRdKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG91dHB1dC5qb2luKCcnKTtcclxuICAgIH0sXHJcbiAgICAvKipcclxuICAgICAqIEJhc2U2NC1lbmNvZGUgYSBzdHJpbmcuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGlucHV0IEEgc3RyaW5nIHRvIGVuY29kZS5cclxuICAgICAqIEBwYXJhbSB3ZWJTYWZlIElmIHRydWUsIHdlIHNob3VsZCB1c2UgdGhlXHJcbiAgICAgKiAgICAgYWx0ZXJuYXRpdmUgYWxwaGFiZXQuXHJcbiAgICAgKiBAcmV0dXJuIFRoZSBiYXNlNjQgZW5jb2RlZCBzdHJpbmcuXHJcbiAgICAgKi9cclxuICAgIGVuY29kZVN0cmluZzogZnVuY3Rpb24gKGlucHV0LCB3ZWJTYWZlKSB7XHJcbiAgICAgICAgLy8gU2hvcnRjdXQgZm9yIE1vemlsbGEgYnJvd3NlcnMgdGhhdCBpbXBsZW1lbnRcclxuICAgICAgICAvLyBhIG5hdGl2ZSBiYXNlNjQgZW5jb2RlciBpbiB0aGUgZm9ybSBvZiBcImJ0b2EvYXRvYlwiXHJcbiAgICAgICAgaWYgKHRoaXMuSEFTX05BVElWRV9TVVBQT1JUICYmICF3ZWJTYWZlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBidG9hKGlucHV0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5jb2RlQnl0ZUFycmF5KHN0cmluZ1RvQnl0ZUFycmF5KGlucHV0KSwgd2ViU2FmZSk7XHJcbiAgICB9LFxyXG4gICAgLyoqXHJcbiAgICAgKiBCYXNlNjQtZGVjb2RlIGEgc3RyaW5nLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBpbnB1dCB0byBkZWNvZGUuXHJcbiAgICAgKiBAcGFyYW0gd2ViU2FmZSBUcnVlIGlmIHdlIHNob3VsZCB1c2UgdGhlXHJcbiAgICAgKiAgICAgYWx0ZXJuYXRpdmUgYWxwaGFiZXQuXHJcbiAgICAgKiBAcmV0dXJuIHN0cmluZyByZXByZXNlbnRpbmcgdGhlIGRlY29kZWQgdmFsdWUuXHJcbiAgICAgKi9cclxuICAgIGRlY29kZVN0cmluZzogZnVuY3Rpb24gKGlucHV0LCB3ZWJTYWZlKSB7XHJcbiAgICAgICAgLy8gU2hvcnRjdXQgZm9yIE1vemlsbGEgYnJvd3NlcnMgdGhhdCBpbXBsZW1lbnRcclxuICAgICAgICAvLyBhIG5hdGl2ZSBiYXNlNjQgZW5jb2RlciBpbiB0aGUgZm9ybSBvZiBcImJ0b2EvYXRvYlwiXHJcbiAgICAgICAgaWYgKHRoaXMuSEFTX05BVElWRV9TVVBQT1JUICYmICF3ZWJTYWZlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBhdG9iKGlucHV0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGJ5dGVBcnJheVRvU3RyaW5nKHRoaXMuZGVjb2RlU3RyaW5nVG9CeXRlQXJyYXkoaW5wdXQsIHdlYlNhZmUpKTtcclxuICAgIH0sXHJcbiAgICAvKipcclxuICAgICAqIEJhc2U2NC1kZWNvZGUgYSBzdHJpbmcuXHJcbiAgICAgKlxyXG4gICAgICogSW4gYmFzZS02NCBkZWNvZGluZywgZ3JvdXBzIG9mIGZvdXIgY2hhcmFjdGVycyBhcmUgY29udmVydGVkIGludG8gdGhyZWVcclxuICAgICAqIGJ5dGVzLiAgSWYgdGhlIGVuY29kZXIgZGlkIG5vdCBhcHBseSBwYWRkaW5nLCB0aGUgaW5wdXQgbGVuZ3RoIG1heSBub3RcclxuICAgICAqIGJlIGEgbXVsdGlwbGUgb2YgNC5cclxuICAgICAqXHJcbiAgICAgKiBJbiB0aGlzIGNhc2UsIHRoZSBsYXN0IGdyb3VwIHdpbGwgaGF2ZSBmZXdlciB0aGFuIDQgY2hhcmFjdGVycywgYW5kXHJcbiAgICAgKiBwYWRkaW5nIHdpbGwgYmUgaW5mZXJyZWQuICBJZiB0aGUgZ3JvdXAgaGFzIG9uZSBvciB0d28gY2hhcmFjdGVycywgaXQgZGVjb2Rlc1xyXG4gICAgICogdG8gb25lIGJ5dGUuICBJZiB0aGUgZ3JvdXAgaGFzIHRocmVlIGNoYXJhY3RlcnMsIGl0IGRlY29kZXMgdG8gdHdvIGJ5dGVzLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBpbnB1dCBJbnB1dCB0byBkZWNvZGUuXHJcbiAgICAgKiBAcGFyYW0gd2ViU2FmZSBUcnVlIGlmIHdlIHNob3VsZCB1c2UgdGhlIHdlYi1zYWZlIGFscGhhYmV0LlxyXG4gICAgICogQHJldHVybiBieXRlcyByZXByZXNlbnRpbmcgdGhlIGRlY29kZWQgdmFsdWUuXHJcbiAgICAgKi9cclxuICAgIGRlY29kZVN0cmluZ1RvQnl0ZUFycmF5OiBmdW5jdGlvbiAoaW5wdXQsIHdlYlNhZmUpIHtcclxuICAgICAgICB0aGlzLmluaXRfKCk7XHJcbiAgICAgICAgdmFyIGNoYXJUb0J5dGVNYXAgPSB3ZWJTYWZlXHJcbiAgICAgICAgICAgID8gdGhpcy5jaGFyVG9CeXRlTWFwV2ViU2FmZV9cclxuICAgICAgICAgICAgOiB0aGlzLmNoYXJUb0J5dGVNYXBfO1xyXG4gICAgICAgIHZhciBvdXRwdXQgPSBbXTtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGlucHV0Lmxlbmd0aDspIHtcclxuICAgICAgICAgICAgdmFyIGJ5dGUxID0gY2hhclRvQnl0ZU1hcFtpbnB1dC5jaGFyQXQoaSsrKV07XHJcbiAgICAgICAgICAgIHZhciBoYXZlQnl0ZTIgPSBpIDwgaW5wdXQubGVuZ3RoO1xyXG4gICAgICAgICAgICB2YXIgYnl0ZTIgPSBoYXZlQnl0ZTIgPyBjaGFyVG9CeXRlTWFwW2lucHV0LmNoYXJBdChpKV0gOiAwO1xyXG4gICAgICAgICAgICArK2k7XHJcbiAgICAgICAgICAgIHZhciBoYXZlQnl0ZTMgPSBpIDwgaW5wdXQubGVuZ3RoO1xyXG4gICAgICAgICAgICB2YXIgYnl0ZTMgPSBoYXZlQnl0ZTMgPyBjaGFyVG9CeXRlTWFwW2lucHV0LmNoYXJBdChpKV0gOiA2NDtcclxuICAgICAgICAgICAgKytpO1xyXG4gICAgICAgICAgICB2YXIgaGF2ZUJ5dGU0ID0gaSA8IGlucHV0Lmxlbmd0aDtcclxuICAgICAgICAgICAgdmFyIGJ5dGU0ID0gaGF2ZUJ5dGU0ID8gY2hhclRvQnl0ZU1hcFtpbnB1dC5jaGFyQXQoaSldIDogNjQ7XHJcbiAgICAgICAgICAgICsraTtcclxuICAgICAgICAgICAgaWYgKGJ5dGUxID09IG51bGwgfHwgYnl0ZTIgPT0gbnVsbCB8fCBieXRlMyA9PSBudWxsIHx8IGJ5dGU0ID09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IEVycm9yKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIG91dEJ5dGUxID0gKGJ5dGUxIDw8IDIpIHwgKGJ5dGUyID4+IDQpO1xyXG4gICAgICAgICAgICBvdXRwdXQucHVzaChvdXRCeXRlMSk7XHJcbiAgICAgICAgICAgIGlmIChieXRlMyAhPT0gNjQpIHtcclxuICAgICAgICAgICAgICAgIHZhciBvdXRCeXRlMiA9ICgoYnl0ZTIgPDwgNCkgJiAweGYwKSB8IChieXRlMyA+PiAyKTtcclxuICAgICAgICAgICAgICAgIG91dHB1dC5wdXNoKG91dEJ5dGUyKTtcclxuICAgICAgICAgICAgICAgIGlmIChieXRlNCAhPT0gNjQpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgb3V0Qnl0ZTMgPSAoKGJ5dGUzIDw8IDYpICYgMHhjMCkgfCBieXRlNDtcclxuICAgICAgICAgICAgICAgICAgICBvdXRwdXQucHVzaChvdXRCeXRlMyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG91dHB1dDtcclxuICAgIH0sXHJcbiAgICAvKipcclxuICAgICAqIExhenkgc3RhdGljIGluaXRpYWxpemF0aW9uIGZ1bmN0aW9uLiBDYWxsZWQgYmVmb3JlXHJcbiAgICAgKiBhY2Nlc3NpbmcgYW55IG9mIHRoZSBzdGF0aWMgbWFwIHZhcmlhYmxlcy5cclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIGluaXRfOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmJ5dGVUb0NoYXJNYXBfKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYnl0ZVRvQ2hhck1hcF8gPSB7fTtcclxuICAgICAgICAgICAgdGhpcy5jaGFyVG9CeXRlTWFwXyA9IHt9O1xyXG4gICAgICAgICAgICB0aGlzLmJ5dGVUb0NoYXJNYXBXZWJTYWZlXyA9IHt9O1xyXG4gICAgICAgICAgICB0aGlzLmNoYXJUb0J5dGVNYXBXZWJTYWZlXyA9IHt9O1xyXG4gICAgICAgICAgICAvLyBXZSB3YW50IHF1aWNrIG1hcHBpbmdzIGJhY2sgYW5kIGZvcnRoLCBzbyB3ZSBwcmVjb21wdXRlIHR3byBtYXBzLlxyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuRU5DT0RFRF9WQUxTLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmJ5dGVUb0NoYXJNYXBfW2ldID0gdGhpcy5FTkNPREVEX1ZBTFMuY2hhckF0KGkpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jaGFyVG9CeXRlTWFwX1t0aGlzLmJ5dGVUb0NoYXJNYXBfW2ldXSA9IGk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmJ5dGVUb0NoYXJNYXBXZWJTYWZlX1tpXSA9IHRoaXMuRU5DT0RFRF9WQUxTX1dFQlNBRkUuY2hhckF0KGkpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jaGFyVG9CeXRlTWFwV2ViU2FmZV9bdGhpcy5ieXRlVG9DaGFyTWFwV2ViU2FmZV9baV1dID0gaTtcclxuICAgICAgICAgICAgICAgIC8vIEJlIGZvcmdpdmluZyB3aGVuIGRlY29kaW5nIGFuZCBjb3JyZWN0bHkgZGVjb2RlIGJvdGggZW5jb2RpbmdzLlxyXG4gICAgICAgICAgICAgICAgaWYgKGkgPj0gdGhpcy5FTkNPREVEX1ZBTFNfQkFTRS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNoYXJUb0J5dGVNYXBfW3RoaXMuRU5DT0RFRF9WQUxTX1dFQlNBRkUuY2hhckF0KGkpXSA9IGk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGFyVG9CeXRlTWFwV2ViU2FmZV9bdGhpcy5FTkNPREVEX1ZBTFMuY2hhckF0KGkpXSA9IGk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn07XHJcbi8qKlxyXG4gKiBVUkwtc2FmZSBiYXNlNjQgZW5jb2RpbmdcclxuICovXHJcbnZhciBiYXNlNjRFbmNvZGUgPSBmdW5jdGlvbiAoc3RyKSB7XHJcbiAgICB2YXIgdXRmOEJ5dGVzID0gc3RyaW5nVG9CeXRlQXJyYXkoc3RyKTtcclxuICAgIHJldHVybiBiYXNlNjQuZW5jb2RlQnl0ZUFycmF5KHV0ZjhCeXRlcywgdHJ1ZSk7XHJcbn07XHJcbi8qKlxyXG4gKiBVUkwtc2FmZSBiYXNlNjQgZGVjb2RpbmdcclxuICpcclxuICogTk9URTogRE8gTk9UIHVzZSB0aGUgZ2xvYmFsIGF0b2IoKSBmdW5jdGlvbiAtIGl0IGRvZXMgTk9UIHN1cHBvcnQgdGhlXHJcbiAqIGJhc2U2NFVybCB2YXJpYW50IGVuY29kaW5nLlxyXG4gKlxyXG4gKiBAcGFyYW0gc3RyIFRvIGJlIGRlY29kZWRcclxuICogQHJldHVybiBEZWNvZGVkIHJlc3VsdCwgaWYgcG9zc2libGVcclxuICovXHJcbnZhciBiYXNlNjREZWNvZGUgPSBmdW5jdGlvbiAoc3RyKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIHJldHVybiBiYXNlNjQuZGVjb2RlU3RyaW5nKHN0ciwgdHJ1ZSk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ2Jhc2U2NERlY29kZSBmYWlsZWQ6ICcsIGUpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG51bGw7XHJcbn07XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogRG8gYSBkZWVwLWNvcHkgb2YgYmFzaWMgSmF2YVNjcmlwdCBPYmplY3RzIG9yIEFycmF5cy5cclxuICovXHJcbmZ1bmN0aW9uIGRlZXBDb3B5KHZhbHVlKSB7XHJcbiAgICByZXR1cm4gZGVlcEV4dGVuZCh1bmRlZmluZWQsIHZhbHVlKTtcclxufVxyXG4vKipcclxuICogQ29weSBwcm9wZXJ0aWVzIGZyb20gc291cmNlIHRvIHRhcmdldCAocmVjdXJzaXZlbHkgYWxsb3dzIGV4dGVuc2lvblxyXG4gKiBvZiBPYmplY3RzIGFuZCBBcnJheXMpLiAgU2NhbGFyIHZhbHVlcyBpbiB0aGUgdGFyZ2V0IGFyZSBvdmVyLXdyaXR0ZW4uXHJcbiAqIElmIHRhcmdldCBpcyB1bmRlZmluZWQsIGFuIG9iamVjdCBvZiB0aGUgYXBwcm9wcmlhdGUgdHlwZSB3aWxsIGJlIGNyZWF0ZWRcclxuICogKGFuZCByZXR1cm5lZCkuXHJcbiAqXHJcbiAqIFdlIHJlY3Vyc2l2ZWx5IGNvcHkgYWxsIGNoaWxkIHByb3BlcnRpZXMgb2YgcGxhaW4gT2JqZWN0cyBpbiB0aGUgc291cmNlLSBzb1xyXG4gKiB0aGF0IG5hbWVzcGFjZS0gbGlrZSBkaWN0aW9uYXJpZXMgYXJlIG1lcmdlZC5cclxuICpcclxuICogTm90ZSB0aGF0IHRoZSB0YXJnZXQgY2FuIGJlIGEgZnVuY3Rpb24sIGluIHdoaWNoIGNhc2UgdGhlIHByb3BlcnRpZXMgaW5cclxuICogdGhlIHNvdXJjZSBPYmplY3QgYXJlIGNvcGllZCBvbnRvIGl0IGFzIHN0YXRpYyBwcm9wZXJ0aWVzIG9mIHRoZSBGdW5jdGlvbi5cclxuICovXHJcbmZ1bmN0aW9uIGRlZXBFeHRlbmQodGFyZ2V0LCBzb3VyY2UpIHtcclxuICAgIGlmICghKHNvdXJjZSBpbnN0YW5jZW9mIE9iamVjdCkpIHtcclxuICAgICAgICByZXR1cm4gc291cmNlO1xyXG4gICAgfVxyXG4gICAgc3dpdGNoIChzb3VyY2UuY29uc3RydWN0b3IpIHtcclxuICAgICAgICBjYXNlIERhdGU6XHJcbiAgICAgICAgICAgIC8vIFRyZWF0IERhdGVzIGxpa2Ugc2NhbGFyczsgaWYgdGhlIHRhcmdldCBkYXRlIG9iamVjdCBoYWQgYW55IGNoaWxkXHJcbiAgICAgICAgICAgIC8vIHByb3BlcnRpZXMgLSB0aGV5IHdpbGwgYmUgbG9zdCFcclxuICAgICAgICAgICAgdmFyIGRhdGVWYWx1ZSA9IHNvdXJjZTtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBEYXRlKGRhdGVWYWx1ZS5nZXRUaW1lKCkpO1xyXG4gICAgICAgIGNhc2UgT2JqZWN0OlxyXG4gICAgICAgICAgICBpZiAodGFyZ2V0ID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIHRhcmdldCA9IHt9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgQXJyYXk6XHJcbiAgICAgICAgICAgIC8vIEFsd2F5cyBjb3B5IHRoZSBhcnJheSBzb3VyY2UgYW5kIG92ZXJ3cml0ZSB0aGUgdGFyZ2V0LlxyXG4gICAgICAgICAgICB0YXJnZXQgPSBbXTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgLy8gTm90IGEgcGxhaW4gT2JqZWN0IC0gdHJlYXQgaXQgYXMgYSBzY2FsYXIuXHJcbiAgICAgICAgICAgIHJldHVybiBzb3VyY2U7XHJcbiAgICB9XHJcbiAgICBmb3IgKHZhciBwcm9wIGluIHNvdXJjZSkge1xyXG4gICAgICAgIGlmICghc291cmNlLmhhc093blByb3BlcnR5KHByb3ApKSB7XHJcbiAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0YXJnZXRbcHJvcF0gPSBkZWVwRXh0ZW5kKHRhcmdldFtwcm9wXSwgc291cmNlW3Byb3BdKTtcclxuICAgIH1cclxuICAgIHJldHVybiB0YXJnZXQ7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnZhciBEZWZlcnJlZCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIERlZmVycmVkKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5yZWplY3QgPSBmdW5jdGlvbiAoKSB7IH07XHJcbiAgICAgICAgdGhpcy5yZXNvbHZlID0gZnVuY3Rpb24gKCkgeyB9O1xyXG4gICAgICAgIHRoaXMucHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgX3RoaXMucmVzb2x2ZSA9IHJlc29sdmU7XHJcbiAgICAgICAgICAgIF90aGlzLnJlamVjdCA9IHJlamVjdDtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogT3VyIEFQSSBpbnRlcm5hbHMgYXJlIG5vdCBwcm9taXNlaWZpZWQgYW5kIGNhbm5vdCBiZWNhdXNlIG91ciBjYWxsYmFjayBBUElzIGhhdmUgc3VidGxlIGV4cGVjdGF0aW9ucyBhcm91bmRcclxuICAgICAqIGludm9raW5nIHByb21pc2VzIGlubGluZSwgd2hpY2ggUHJvbWlzZXMgYXJlIGZvcmJpZGRlbiB0byBkby4gVGhpcyBtZXRob2QgYWNjZXB0cyBhbiBvcHRpb25hbCBub2RlLXN0eWxlIGNhbGxiYWNrXHJcbiAgICAgKiBhbmQgcmV0dXJucyBhIG5vZGUtc3R5bGUgY2FsbGJhY2sgd2hpY2ggd2lsbCByZXNvbHZlIG9yIHJlamVjdCB0aGUgRGVmZXJyZWQncyBwcm9taXNlLlxyXG4gICAgICovXHJcbiAgICBEZWZlcnJlZC5wcm90b3R5cGUud3JhcENhbGxiYWNrID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGVycm9yLCB2YWx1ZSkge1xyXG4gICAgICAgICAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLnJlamVjdChlcnJvcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5yZXNvbHZlKHZhbHVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodHlwZW9mIGNhbGxiYWNrID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBBdHRhY2hpbmcgbm9vcCBoYW5kbGVyIGp1c3QgaW4gY2FzZSBkZXZlbG9wZXIgd2Fzbid0IGV4cGVjdGluZ1xyXG4gICAgICAgICAgICAgICAgLy8gcHJvbWlzZXNcclxuICAgICAgICAgICAgICAgIF90aGlzLnByb21pc2UuY2F0Y2goZnVuY3Rpb24gKCkgeyB9KTtcclxuICAgICAgICAgICAgICAgIC8vIFNvbWUgb2Ygb3VyIGNhbGxiYWNrcyBkb24ndCBleHBlY3QgYSB2YWx1ZSBhbmQgb3VyIG93biB0ZXN0c1xyXG4gICAgICAgICAgICAgICAgLy8gYXNzZXJ0IHRoYXQgdGhlIHBhcmFtZXRlciBsZW5ndGggaXMgMVxyXG4gICAgICAgICAgICAgICAgaWYgKGNhbGxiYWNrLmxlbmd0aCA9PT0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKGVycm9yKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKGVycm9yLCB2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfTtcclxuICAgIHJldHVybiBEZWZlcnJlZDtcclxufSgpKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBSZXR1cm5zIG5hdmlnYXRvci51c2VyQWdlbnQgc3RyaW5nIG9yICcnIGlmIGl0J3Mgbm90IGRlZmluZWQuXHJcbiAqIEByZXR1cm4gdXNlciBhZ2VudCBzdHJpbmdcclxuICovXHJcbmZ1bmN0aW9uIGdldFVBKCkge1xyXG4gICAgaWYgKHR5cGVvZiBuYXZpZ2F0b3IgIT09ICd1bmRlZmluZWQnICYmXHJcbiAgICAgICAgdHlwZW9mIG5hdmlnYXRvclsndXNlckFnZW50J10gPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgcmV0dXJuIG5hdmlnYXRvclsndXNlckFnZW50J107XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICByZXR1cm4gJyc7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIERldGVjdCBDb3Jkb3ZhIC8gUGhvbmVHYXAgLyBJb25pYyBmcmFtZXdvcmtzIG9uIGEgbW9iaWxlIGRldmljZS5cclxuICpcclxuICogRGVsaWJlcmF0ZWx5IGRvZXMgbm90IHJlbHkgb24gY2hlY2tpbmcgYGZpbGU6Ly9gIFVSTHMgKGFzIHRoaXMgZmFpbHMgUGhvbmVHYXBcclxuICogaW4gdGhlIFJpcHBsZSBlbXVsYXRvcikgbm9yIENvcmRvdmEgYG9uRGV2aWNlUmVhZHlgLCB3aGljaCB3b3VsZCBub3JtYWxseVxyXG4gKiB3YWl0IGZvciBhIGNhbGxiYWNrLlxyXG4gKi9cclxuZnVuY3Rpb24gaXNNb2JpbGVDb3Jkb3ZhKCkge1xyXG4gICAgcmV0dXJuICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJlxyXG4gICAgICAgIC8vIEB0cy1pZ25vcmUgU2V0dGluZyB1cCBhbiBicm9hZGx5IGFwcGxpY2FibGUgaW5kZXggc2lnbmF0dXJlIGZvciBXaW5kb3dcclxuICAgICAgICAvLyBqdXN0IHRvIGRlYWwgd2l0aCB0aGlzIGNhc2Ugd291bGQgcHJvYmFibHkgYmUgYSBiYWQgaWRlYS5cclxuICAgICAgICAhISh3aW5kb3dbJ2NvcmRvdmEnXSB8fCB3aW5kb3dbJ3Bob25lZ2FwJ10gfHwgd2luZG93WydQaG9uZUdhcCddKSAmJlxyXG4gICAgICAgIC9pb3N8aXBob25lfGlwb2R8aXBhZHxhbmRyb2lkfGJsYWNrYmVycnl8aWVtb2JpbGUvaS50ZXN0KGdldFVBKCkpKTtcclxufVxyXG4vKipcclxuICogRGV0ZWN0IE5vZGUuanMuXHJcbiAqXHJcbiAqIEByZXR1cm4gdHJ1ZSBpZiBOb2RlLmpzIGVudmlyb25tZW50IGlzIGRldGVjdGVkLlxyXG4gKi9cclxuLy8gTm9kZSBkZXRlY3Rpb24gbG9naWMgZnJvbTogaHR0cHM6Ly9naXRodWIuY29tL2lsaWFrYW4vZGV0ZWN0LW5vZGUvXHJcbmZ1bmN0aW9uIGlzTm9kZSgpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgcmV0dXJuIChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZ2xvYmFsLnByb2Nlc3MpID09PSAnW29iamVjdCBwcm9jZXNzXScpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIERldGVjdCBCcm93c2VyIEVudmlyb25tZW50XHJcbiAqL1xyXG5mdW5jdGlvbiBpc0Jyb3dzZXIoKSB7XHJcbiAgICByZXR1cm4gdHlwZW9mIHNlbGYgPT09ICdvYmplY3QnICYmIHNlbGYuc2VsZiA9PT0gc2VsZjtcclxufVxyXG4vKipcclxuICogRGV0ZWN0IFJlYWN0IE5hdGl2ZS5cclxuICpcclxuICogQHJldHVybiB0cnVlIGlmIFJlYWN0TmF0aXZlIGVudmlyb25tZW50IGlzIGRldGVjdGVkLlxyXG4gKi9cclxuZnVuY3Rpb24gaXNSZWFjdE5hdGl2ZSgpIHtcclxuICAgIHJldHVybiAodHlwZW9mIG5hdmlnYXRvciA9PT0gJ29iamVjdCcgJiYgbmF2aWdhdG9yWydwcm9kdWN0J10gPT09ICdSZWFjdE5hdGl2ZScpO1xyXG59XHJcbi8qKlxyXG4gKiBEZXRlY3Qgd2hldGhlciB0aGUgY3VycmVudCBTREsgYnVpbGQgaXMgdGhlIE5vZGUgdmVyc2lvbi5cclxuICpcclxuICogQHJldHVybiB0cnVlIGlmIGl0J3MgdGhlIE5vZGUgU0RLIGJ1aWxkLlxyXG4gKi9cclxuZnVuY3Rpb24gaXNOb2RlU2RrKCkge1xyXG4gICAgcmV0dXJuIENPTlNUQU5UUy5OT0RFX0NMSUVOVCA9PT0gdHJ1ZSB8fCBDT05TVEFOVFMuTk9ERV9BRE1JTiA9PT0gdHJ1ZTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxudmFyIEVSUk9SX05BTUUgPSAnRmlyZWJhc2VFcnJvcic7XHJcbi8vIEJhc2VkIG9uIGNvZGUgZnJvbTpcclxuLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvRXJyb3IjQ3VzdG9tX0Vycm9yX1R5cGVzXHJcbnZhciBGaXJlYmFzZUVycm9yID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgdHNsaWIuX19leHRlbmRzKEZpcmViYXNlRXJyb3IsIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBGaXJlYmFzZUVycm9yKGNvZGUsIG1lc3NhZ2UpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBtZXNzYWdlKSB8fCB0aGlzO1xyXG4gICAgICAgIF90aGlzLmNvZGUgPSBjb2RlO1xyXG4gICAgICAgIF90aGlzLm5hbWUgPSBFUlJPUl9OQU1FO1xyXG4gICAgICAgIC8vIEZpeCBGb3IgRVM1XHJcbiAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL01pY3Jvc29mdC9UeXBlU2NyaXB0LXdpa2kvYmxvYi9tYXN0ZXIvQnJlYWtpbmctQ2hhbmdlcy5tZCNleHRlbmRpbmctYnVpbHQtaW5zLWxpa2UtZXJyb3ItYXJyYXktYW5kLW1hcC1tYXktbm8tbG9uZ2VyLXdvcmtcclxuICAgICAgICBPYmplY3Quc2V0UHJvdG90eXBlT2YoX3RoaXMsIEZpcmViYXNlRXJyb3IucHJvdG90eXBlKTtcclxuICAgICAgICAvLyBNYWludGFpbnMgcHJvcGVyIHN0YWNrIHRyYWNlIGZvciB3aGVyZSBvdXIgZXJyb3Igd2FzIHRocm93bi5cclxuICAgICAgICAvLyBPbmx5IGF2YWlsYWJsZSBvbiBWOC5cclxuICAgICAgICBpZiAoRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UpIHtcclxuICAgICAgICAgICAgRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UoX3RoaXMsIEVycm9yRmFjdG9yeS5wcm90b3R5cGUuY3JlYXRlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIEZpcmViYXNlRXJyb3I7XHJcbn0oRXJyb3IpKTtcclxudmFyIEVycm9yRmFjdG9yeSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEVycm9yRmFjdG9yeShzZXJ2aWNlLCBzZXJ2aWNlTmFtZSwgZXJyb3JzKSB7XHJcbiAgICAgICAgdGhpcy5zZXJ2aWNlID0gc2VydmljZTtcclxuICAgICAgICB0aGlzLnNlcnZpY2VOYW1lID0gc2VydmljZU5hbWU7XHJcbiAgICAgICAgdGhpcy5lcnJvcnMgPSBlcnJvcnM7XHJcbiAgICB9XHJcbiAgICBFcnJvckZhY3RvcnkucHJvdG90eXBlLmNyZWF0ZSA9IGZ1bmN0aW9uIChjb2RlKSB7XHJcbiAgICAgICAgdmFyIGRhdGEgPSBbXTtcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDE7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICBkYXRhW19pIC0gMV0gPSBhcmd1bWVudHNbX2ldO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgY3VzdG9tRGF0YSA9IGRhdGFbMF0gfHwge307XHJcbiAgICAgICAgdmFyIGZ1bGxDb2RlID0gdGhpcy5zZXJ2aWNlICsgXCIvXCIgKyBjb2RlO1xyXG4gICAgICAgIHZhciB0ZW1wbGF0ZSA9IHRoaXMuZXJyb3JzW2NvZGVdO1xyXG4gICAgICAgIHZhciBtZXNzYWdlID0gdGVtcGxhdGUgPyByZXBsYWNlVGVtcGxhdGUodGVtcGxhdGUsIGN1c3RvbURhdGEpIDogJ0Vycm9yJztcclxuICAgICAgICAvLyBTZXJ2aWNlIE5hbWU6IEVycm9yIG1lc3NhZ2UgKHNlcnZpY2UvY29kZSkuXHJcbiAgICAgICAgdmFyIGZ1bGxNZXNzYWdlID0gdGhpcy5zZXJ2aWNlTmFtZSArIFwiOiBcIiArIG1lc3NhZ2UgKyBcIiAoXCIgKyBmdWxsQ29kZSArIFwiKS5cIjtcclxuICAgICAgICB2YXIgZXJyb3IgPSBuZXcgRmlyZWJhc2VFcnJvcihmdWxsQ29kZSwgZnVsbE1lc3NhZ2UpO1xyXG4gICAgICAgIC8vIEtleXMgd2l0aCBhbiB1bmRlcnNjb3JlIGF0IHRoZSBlbmQgb2YgdGhlaXIgbmFtZSBhcmUgbm90IGluY2x1ZGVkIGluXHJcbiAgICAgICAgLy8gZXJyb3IuZGF0YSBmb3Igc29tZSByZWFzb24uXHJcbiAgICAgICAgLy8gVE9ETzogUmVwbGFjZSB3aXRoIE9iamVjdC5lbnRyaWVzIHdoZW4gbGliIGlzIHVwZGF0ZWQgdG8gZXMyMDE3LlxyXG4gICAgICAgIGZvciAodmFyIF9hID0gMCwgX2IgPSBPYmplY3Qua2V5cyhjdXN0b21EYXRhKTsgX2EgPCBfYi5sZW5ndGg7IF9hKyspIHtcclxuICAgICAgICAgICAgdmFyIGtleSA9IF9iW19hXTtcclxuICAgICAgICAgICAgaWYgKGtleS5zbGljZSgtMSkgIT09ICdfJykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGtleSBpbiBlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihcIk92ZXJ3cml0aW5nIEZpcmViYXNlRXJyb3IgYmFzZSBmaWVsZCBcXFwiXCIgKyBrZXkgKyBcIlxcXCIgY2FuIGNhdXNlIHVuZXhwZWN0ZWQgYmVoYXZpb3IuXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZXJyb3Jba2V5XSA9IGN1c3RvbURhdGFba2V5XTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZXJyb3I7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEVycm9yRmFjdG9yeTtcclxufSgpKTtcclxuZnVuY3Rpb24gcmVwbGFjZVRlbXBsYXRlKHRlbXBsYXRlLCBkYXRhKSB7XHJcbiAgICByZXR1cm4gdGVtcGxhdGUucmVwbGFjZShQQVRURVJOLCBmdW5jdGlvbiAoXywga2V5KSB7XHJcbiAgICAgICAgdmFyIHZhbHVlID0gZGF0YVtrZXldO1xyXG4gICAgICAgIHJldHVybiB2YWx1ZSAhPSBudWxsID8gdmFsdWUudG9TdHJpbmcoKSA6IFwiPFwiICsga2V5ICsgXCI/PlwiO1xyXG4gICAgfSk7XHJcbn1cclxudmFyIFBBVFRFUk4gPSAvXFx7XFwkKFtefV0rKX0vZztcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBFdmFsdWF0ZXMgYSBKU09OIHN0cmluZyBpbnRvIGEgamF2YXNjcmlwdCBvYmplY3QuXHJcbiAqXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHIgQSBzdHJpbmcgY29udGFpbmluZyBKU09OLlxyXG4gKiBAcmV0dXJuIHsqfSBUaGUgamF2YXNjcmlwdCBvYmplY3QgcmVwcmVzZW50aW5nIHRoZSBzcGVjaWZpZWQgSlNPTi5cclxuICovXHJcbmZ1bmN0aW9uIGpzb25FdmFsKHN0cikge1xyXG4gICAgcmV0dXJuIEpTT04ucGFyc2Uoc3RyKTtcclxufVxyXG4vKipcclxuICogUmV0dXJucyBKU09OIHJlcHJlc2VudGluZyBhIGphdmFzY3JpcHQgb2JqZWN0LlxyXG4gKiBAcGFyYW0geyp9IGRhdGEgSmF2YXNjcmlwdCBvYmplY3QgdG8gYmUgc3RyaW5naWZpZWQuXHJcbiAqIEByZXR1cm4ge3N0cmluZ30gVGhlIEpTT04gY29udGVudHMgb2YgdGhlIG9iamVjdC5cclxuICovXHJcbmZ1bmN0aW9uIHN0cmluZ2lmeShkYXRhKSB7XHJcbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoZGF0YSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBEZWNvZGVzIGEgRmlyZWJhc2UgYXV0aC4gdG9rZW4gaW50byBjb25zdGl0dWVudCBwYXJ0cy5cclxuICpcclxuICogTm90ZXM6XHJcbiAqIC0gTWF5IHJldHVybiB3aXRoIGludmFsaWQgLyBpbmNvbXBsZXRlIGNsYWltcyBpZiB0aGVyZSdzIG5vIG5hdGl2ZSBiYXNlNjQgZGVjb2Rpbmcgc3VwcG9ydC5cclxuICogLSBEb2Vzbid0IGNoZWNrIGlmIHRoZSB0b2tlbiBpcyBhY3R1YWxseSB2YWxpZC5cclxuICovXHJcbnZhciBkZWNvZGUgPSBmdW5jdGlvbiAodG9rZW4pIHtcclxuICAgIHZhciBoZWFkZXIgPSB7fSwgY2xhaW1zID0ge30sIGRhdGEgPSB7fSwgc2lnbmF0dXJlID0gJyc7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIHZhciBwYXJ0cyA9IHRva2VuLnNwbGl0KCcuJyk7XHJcbiAgICAgICAgaGVhZGVyID0ganNvbkV2YWwoYmFzZTY0RGVjb2RlKHBhcnRzWzBdKSB8fCAnJyk7XHJcbiAgICAgICAgY2xhaW1zID0ganNvbkV2YWwoYmFzZTY0RGVjb2RlKHBhcnRzWzFdKSB8fCAnJyk7XHJcbiAgICAgICAgc2lnbmF0dXJlID0gcGFydHNbMl07XHJcbiAgICAgICAgZGF0YSA9IGNsYWltc1snZCddIHx8IHt9O1xyXG4gICAgICAgIGRlbGV0ZSBjbGFpbXNbJ2QnXTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7IH1cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgaGVhZGVyOiBoZWFkZXIsXHJcbiAgICAgICAgY2xhaW1zOiBjbGFpbXMsXHJcbiAgICAgICAgZGF0YTogZGF0YSxcclxuICAgICAgICBzaWduYXR1cmU6IHNpZ25hdHVyZVxyXG4gICAgfTtcclxufTtcclxuLyoqXHJcbiAqIERlY29kZXMgYSBGaXJlYmFzZSBhdXRoLiB0b2tlbiBhbmQgY2hlY2tzIHRoZSB2YWxpZGl0eSBvZiBpdHMgdGltZS1iYXNlZCBjbGFpbXMuIFdpbGwgcmV0dXJuIHRydWUgaWYgdGhlXHJcbiAqIHRva2VuIGlzIHdpdGhpbiB0aGUgdGltZSB3aW5kb3cgYXV0aG9yaXplZCBieSB0aGUgJ25iZicgKG5vdC1iZWZvcmUpIGFuZCAnaWF0JyAoaXNzdWVkLWF0KSBjbGFpbXMuXHJcbiAqXHJcbiAqIE5vdGVzOlxyXG4gKiAtIE1heSByZXR1cm4gYSBmYWxzZSBuZWdhdGl2ZSBpZiB0aGVyZSdzIG5vIG5hdGl2ZSBiYXNlNjQgZGVjb2Rpbmcgc3VwcG9ydC5cclxuICogLSBEb2Vzbid0IGNoZWNrIGlmIHRoZSB0b2tlbiBpcyBhY3R1YWxseSB2YWxpZC5cclxuICovXHJcbnZhciBpc1ZhbGlkVGltZXN0YW1wID0gZnVuY3Rpb24gKHRva2VuKSB7XHJcbiAgICB2YXIgY2xhaW1zID0gZGVjb2RlKHRva2VuKS5jbGFpbXM7XHJcbiAgICB2YXIgbm93ID0gTWF0aC5mbG9vcihuZXcgRGF0ZSgpLmdldFRpbWUoKSAvIDEwMDApO1xyXG4gICAgdmFyIHZhbGlkU2luY2UgPSAwLCB2YWxpZFVudGlsID0gMDtcclxuICAgIGlmICh0eXBlb2YgY2xhaW1zID09PSAnb2JqZWN0Jykge1xyXG4gICAgICAgIGlmIChjbGFpbXMuaGFzT3duUHJvcGVydHkoJ25iZicpKSB7XHJcbiAgICAgICAgICAgIHZhbGlkU2luY2UgPSBjbGFpbXNbJ25iZiddO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChjbGFpbXMuaGFzT3duUHJvcGVydHkoJ2lhdCcpKSB7XHJcbiAgICAgICAgICAgIHZhbGlkU2luY2UgPSBjbGFpbXNbJ2lhdCddO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoY2xhaW1zLmhhc093blByb3BlcnR5KCdleHAnKSkge1xyXG4gICAgICAgICAgICB2YWxpZFVudGlsID0gY2xhaW1zWydleHAnXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIHRva2VuIHdpbGwgZXhwaXJlIGFmdGVyIDI0aCBieSBkZWZhdWx0XHJcbiAgICAgICAgICAgIHZhbGlkVW50aWwgPSB2YWxpZFNpbmNlICsgODY0MDA7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuICghIW5vdyAmJlxyXG4gICAgICAgICEhdmFsaWRTaW5jZSAmJlxyXG4gICAgICAgICEhdmFsaWRVbnRpbCAmJlxyXG4gICAgICAgIG5vdyA+PSB2YWxpZFNpbmNlICYmXHJcbiAgICAgICAgbm93IDw9IHZhbGlkVW50aWwpO1xyXG59O1xyXG4vKipcclxuICogRGVjb2RlcyBhIEZpcmViYXNlIGF1dGguIHRva2VuIGFuZCByZXR1cm5zIGl0cyBpc3N1ZWQgYXQgdGltZSBpZiB2YWxpZCwgbnVsbCBvdGhlcndpc2UuXHJcbiAqXHJcbiAqIE5vdGVzOlxyXG4gKiAtIE1heSByZXR1cm4gbnVsbCBpZiB0aGVyZSdzIG5vIG5hdGl2ZSBiYXNlNjQgZGVjb2Rpbmcgc3VwcG9ydC5cclxuICogLSBEb2Vzbid0IGNoZWNrIGlmIHRoZSB0b2tlbiBpcyBhY3R1YWxseSB2YWxpZC5cclxuICovXHJcbnZhciBpc3N1ZWRBdFRpbWUgPSBmdW5jdGlvbiAodG9rZW4pIHtcclxuICAgIHZhciBjbGFpbXMgPSBkZWNvZGUodG9rZW4pLmNsYWltcztcclxuICAgIGlmICh0eXBlb2YgY2xhaW1zID09PSAnb2JqZWN0JyAmJiBjbGFpbXMuaGFzT3duUHJvcGVydHkoJ2lhdCcpKSB7XHJcbiAgICAgICAgcmV0dXJuIGNsYWltc1snaWF0J107XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbnVsbDtcclxufTtcclxuLyoqXHJcbiAqIERlY29kZXMgYSBGaXJlYmFzZSBhdXRoLiB0b2tlbiBhbmQgY2hlY2tzIHRoZSB2YWxpZGl0eSBvZiBpdHMgZm9ybWF0LiBFeHBlY3RzIGEgdmFsaWQgaXNzdWVkLWF0IHRpbWUuXHJcbiAqXHJcbiAqIE5vdGVzOlxyXG4gKiAtIE1heSByZXR1cm4gYSBmYWxzZSBuZWdhdGl2ZSBpZiB0aGVyZSdzIG5vIG5hdGl2ZSBiYXNlNjQgZGVjb2Rpbmcgc3VwcG9ydC5cclxuICogLSBEb2Vzbid0IGNoZWNrIGlmIHRoZSB0b2tlbiBpcyBhY3R1YWxseSB2YWxpZC5cclxuICovXHJcbnZhciBpc1ZhbGlkRm9ybWF0ID0gZnVuY3Rpb24gKHRva2VuKSB7XHJcbiAgICB2YXIgZGVjb2RlZCA9IGRlY29kZSh0b2tlbiksIGNsYWltcyA9IGRlY29kZWQuY2xhaW1zO1xyXG4gICAgcmV0dXJuICEhY2xhaW1zICYmIHR5cGVvZiBjbGFpbXMgPT09ICdvYmplY3QnICYmIGNsYWltcy5oYXNPd25Qcm9wZXJ0eSgnaWF0Jyk7XHJcbn07XHJcbi8qKlxyXG4gKiBBdHRlbXB0cyB0byBwZWVyIGludG8gYW4gYXV0aCB0b2tlbiBhbmQgZGV0ZXJtaW5lIGlmIGl0J3MgYW4gYWRtaW4gYXV0aCB0b2tlbiBieSBsb29raW5nIGF0IHRoZSBjbGFpbXMgcG9ydGlvbi5cclxuICpcclxuICogTm90ZXM6XHJcbiAqIC0gTWF5IHJldHVybiBhIGZhbHNlIG5lZ2F0aXZlIGlmIHRoZXJlJ3Mgbm8gbmF0aXZlIGJhc2U2NCBkZWNvZGluZyBzdXBwb3J0LlxyXG4gKiAtIERvZXNuJ3QgY2hlY2sgaWYgdGhlIHRva2VuIGlzIGFjdHVhbGx5IHZhbGlkLlxyXG4gKi9cclxudmFyIGlzQWRtaW4gPSBmdW5jdGlvbiAodG9rZW4pIHtcclxuICAgIHZhciBjbGFpbXMgPSBkZWNvZGUodG9rZW4pLmNsYWltcztcclxuICAgIHJldHVybiB0eXBlb2YgY2xhaW1zID09PSAnb2JqZWN0JyAmJiBjbGFpbXNbJ2FkbWluJ10gPT09IHRydWU7XHJcbn07XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBjb250YWlucyhvYmosIGtleSkge1xyXG4gICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSk7XHJcbn1cclxuZnVuY3Rpb24gc2FmZUdldChvYmosIGtleSkge1xyXG4gICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIHtcclxuICAgICAgICByZXR1cm4gb2JqW2tleV07XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGlzRW1wdHkob2JqKSB7XHJcbiAgICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7XHJcbiAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiB0cnVlO1xyXG59XHJcbmZ1bmN0aW9uIG1hcChvYmosIGZuLCBjb250ZXh0T2JqKSB7XHJcbiAgICB2YXIgcmVzID0ge307XHJcbiAgICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7XHJcbiAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIHtcclxuICAgICAgICAgICAgcmVzW2tleV0gPSBmbi5jYWxsKGNvbnRleHRPYmosIG9ialtrZXldLCBrZXksIG9iaik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlcztcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFJldHVybnMgYSBxdWVyeXN0cmluZy1mb3JtYXR0ZWQgc3RyaW5nIChlLmcuICZhcmc9dmFsJmFyZzI9dmFsMikgZnJvbSBhXHJcbiAqIHBhcmFtcyBvYmplY3QgKGUuZy4ge2FyZzogJ3ZhbCcsIGFyZzI6ICd2YWwyJ30pXHJcbiAqIE5vdGU6IFlvdSBtdXN0IHByZXBlbmQgaXQgd2l0aCA/IHdoZW4gYWRkaW5nIGl0IHRvIGEgVVJMLlxyXG4gKi9cclxuZnVuY3Rpb24gcXVlcnlzdHJpbmcocXVlcnlzdHJpbmdQYXJhbXMpIHtcclxuICAgIHZhciBwYXJhbXMgPSBbXTtcclxuICAgIHZhciBfbG9vcF8xID0gZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcclxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcclxuICAgICAgICAgICAgdmFsdWUuZm9yRWFjaChmdW5jdGlvbiAoYXJyYXlWYWwpIHtcclxuICAgICAgICAgICAgICAgIHBhcmFtcy5wdXNoKGVuY29kZVVSSUNvbXBvbmVudChrZXkpICsgJz0nICsgZW5jb2RlVVJJQ29tcG9uZW50KGFycmF5VmFsKSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcGFyYW1zLnB1c2goZW5jb2RlVVJJQ29tcG9uZW50KGtleSkgKyAnPScgKyBlbmNvZGVVUklDb21wb25lbnQodmFsdWUpKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IE9iamVjdC5lbnRyaWVzKHF1ZXJ5c3RyaW5nUGFyYW1zKTsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICB2YXIgX2IgPSBfYVtfaV0sIGtleSA9IF9iWzBdLCB2YWx1ZSA9IF9iWzFdO1xyXG4gICAgICAgIF9sb29wXzEoa2V5LCB2YWx1ZSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcGFyYW1zLmxlbmd0aCA/ICcmJyArIHBhcmFtcy5qb2luKCcmJykgOiAnJztcclxufVxyXG4vKipcclxuICogRGVjb2RlcyBhIHF1ZXJ5c3RyaW5nIChlLmcuID9hcmc9dmFsJmFyZzI9dmFsMikgaW50byBhIHBhcmFtcyBvYmplY3RcclxuICogKGUuZy4ge2FyZzogJ3ZhbCcsIGFyZzI6ICd2YWwyJ30pXHJcbiAqL1xyXG5mdW5jdGlvbiBxdWVyeXN0cmluZ0RlY29kZShxdWVyeXN0cmluZykge1xyXG4gICAgdmFyIG9iaiA9IHt9O1xyXG4gICAgdmFyIHRva2VucyA9IHF1ZXJ5c3RyaW5nLnJlcGxhY2UoL15cXD8vLCAnJykuc3BsaXQoJyYnKTtcclxuICAgIHRva2Vucy5mb3JFYWNoKGZ1bmN0aW9uICh0b2tlbikge1xyXG4gICAgICAgIGlmICh0b2tlbikge1xyXG4gICAgICAgICAgICB2YXIga2V5ID0gdG9rZW4uc3BsaXQoJz0nKTtcclxuICAgICAgICAgICAgb2JqW2tleVswXV0gPSBrZXlbMV07XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gb2JqO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQGZpbGVvdmVydmlldyBTSEEtMSBjcnlwdG9ncmFwaGljIGhhc2guXHJcbiAqIFZhcmlhYmxlIG5hbWVzIGZvbGxvdyB0aGUgbm90YXRpb24gaW4gRklQUyBQVUIgMTgwLTM6XHJcbiAqIGh0dHA6Ly9jc3JjLm5pc3QuZ292L3B1YmxpY2F0aW9ucy9maXBzL2ZpcHMxODAtMy9maXBzMTgwLTNfZmluYWwucGRmLlxyXG4gKlxyXG4gKiBVc2FnZTpcclxuICogICB2YXIgc2hhMSA9IG5ldyBzaGExKCk7XHJcbiAqICAgc2hhMS51cGRhdGUoYnl0ZXMpO1xyXG4gKiAgIHZhciBoYXNoID0gc2hhMS5kaWdlc3QoKTtcclxuICpcclxuICogUGVyZm9ybWFuY2U6XHJcbiAqICAgQ2hyb21lIDIzOiAgIH40MDAgTWJpdC9zXHJcbiAqICAgRmlyZWZveCAxNjogIH4yNTAgTWJpdC9zXHJcbiAqXHJcbiAqL1xyXG4vKipcclxuICogU0hBLTEgY3J5cHRvZ3JhcGhpYyBoYXNoIGNvbnN0cnVjdG9yLlxyXG4gKlxyXG4gKiBUaGUgcHJvcGVydGllcyBkZWNsYXJlZCBoZXJlIGFyZSBkaXNjdXNzZWQgaW4gdGhlIGFib3ZlIGFsZ29yaXRobSBkb2N1bWVudC5cclxuICogQGNvbnN0cnVjdG9yXHJcbiAqIEBmaW5hbFxyXG4gKiBAc3RydWN0XHJcbiAqL1xyXG52YXIgU2hhMSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFNoYTEoKSB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogSG9sZHMgdGhlIHByZXZpb3VzIHZhbHVlcyBvZiBhY2N1bXVsYXRlZCB2YXJpYWJsZXMgYS1lIGluIHRoZSBjb21wcmVzc19cclxuICAgICAgICAgKiBmdW5jdGlvbi5cclxuICAgICAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuY2hhaW5fID0gW107XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQSBidWZmZXIgaG9sZGluZyB0aGUgcGFydGlhbGx5IGNvbXB1dGVkIGhhc2ggcmVzdWx0LlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5idWZfID0gW107XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQW4gYXJyYXkgb2YgODAgYnl0ZXMsIGVhY2ggYSBwYXJ0IG9mIHRoZSBtZXNzYWdlIHRvIGJlIGhhc2hlZC4gIFJlZmVycmVkIHRvXHJcbiAgICAgICAgICogYXMgdGhlIG1lc3NhZ2Ugc2NoZWR1bGUgaW4gdGhlIGRvY3MuXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLldfID0gW107XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ29udGFpbnMgZGF0YSBuZWVkZWQgdG8gcGFkIG1lc3NhZ2VzIGxlc3MgdGhhbiA2NCBieXRlcy5cclxuICAgICAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMucGFkXyA9IFtdO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBwcml2YXRlIHtudW1iZXJ9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5pbmJ1Zl8gPSAwO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBwcml2YXRlIHtudW1iZXJ9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy50b3RhbF8gPSAwO1xyXG4gICAgICAgIHRoaXMuYmxvY2tTaXplID0gNTEyIC8gODtcclxuICAgICAgICB0aGlzLnBhZF9bMF0gPSAxMjg7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCB0aGlzLmJsb2NrU2l6ZTsgKytpKSB7XHJcbiAgICAgICAgICAgIHRoaXMucGFkX1tpXSA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMucmVzZXQoKTtcclxuICAgIH1cclxuICAgIFNoYTEucHJvdG90eXBlLnJlc2V0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuY2hhaW5fWzBdID0gMHg2NzQ1MjMwMTtcclxuICAgICAgICB0aGlzLmNoYWluX1sxXSA9IDB4ZWZjZGFiODk7XHJcbiAgICAgICAgdGhpcy5jaGFpbl9bMl0gPSAweDk4YmFkY2ZlO1xyXG4gICAgICAgIHRoaXMuY2hhaW5fWzNdID0gMHgxMDMyNTQ3NjtcclxuICAgICAgICB0aGlzLmNoYWluX1s0XSA9IDB4YzNkMmUxZjA7XHJcbiAgICAgICAgdGhpcy5pbmJ1Zl8gPSAwO1xyXG4gICAgICAgIHRoaXMudG90YWxfID0gMDtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEludGVybmFsIGNvbXByZXNzIGhlbHBlciBmdW5jdGlvbi5cclxuICAgICAqIEBwYXJhbSBidWYgQmxvY2sgdG8gY29tcHJlc3MuXHJcbiAgICAgKiBAcGFyYW0gb2Zmc2V0IE9mZnNldCBvZiB0aGUgYmxvY2sgaW4gdGhlIGJ1ZmZlci5cclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIFNoYTEucHJvdG90eXBlLmNvbXByZXNzXyA9IGZ1bmN0aW9uIChidWYsIG9mZnNldCkge1xyXG4gICAgICAgIGlmICghb2Zmc2V0KSB7XHJcbiAgICAgICAgICAgIG9mZnNldCA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBXID0gdGhpcy5XXztcclxuICAgICAgICAvLyBnZXQgMTYgYmlnIGVuZGlhbiB3b3Jkc1xyXG4gICAgICAgIGlmICh0eXBlb2YgYnVmID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDE2OyBpKyspIHtcclxuICAgICAgICAgICAgICAgIC8vIFRPRE8odXNlcik6IFtidWcgODE0MDEyMl0gUmVjZW50IHZlcnNpb25zIG9mIFNhZmFyaSBmb3IgTWFjIE9TIGFuZCBpT1NcclxuICAgICAgICAgICAgICAgIC8vIGhhdmUgYSBidWcgdGhhdCB0dXJucyB0aGUgcG9zdC1pbmNyZW1lbnQgKysgb3BlcmF0b3IgaW50byBwcmUtaW5jcmVtZW50XHJcbiAgICAgICAgICAgICAgICAvLyBkdXJpbmcgSklUIGNvbXBpbGF0aW9uLiAgV2UgaGF2ZSBjb2RlIHRoYXQgZGVwZW5kcyBoZWF2aWx5IG9uIFNIQS0xIGZvclxyXG4gICAgICAgICAgICAgICAgLy8gY29ycmVjdG5lc3MgYW5kIHdoaWNoIGlzIGFmZmVjdGVkIGJ5IHRoaXMgYnVnLCBzbyBJJ3ZlIHJlbW92ZWQgYWxsIHVzZXNcclxuICAgICAgICAgICAgICAgIC8vIG9mIHBvc3QtaW5jcmVtZW50ICsrIGluIHdoaWNoIHRoZSByZXN1bHQgdmFsdWUgaXMgdXNlZC4gIFdlIGNhbiByZXZlcnRcclxuICAgICAgICAgICAgICAgIC8vIHRoaXMgY2hhbmdlIG9uY2UgdGhlIFNhZmFyaSBidWdcclxuICAgICAgICAgICAgICAgIC8vIChodHRwczovL2J1Z3Mud2Via2l0Lm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MTA5MDM2KSBoYXMgYmVlbiBmaXhlZCBhbmRcclxuICAgICAgICAgICAgICAgIC8vIG1vc3QgY2xpZW50cyBoYXZlIGJlZW4gdXBkYXRlZC5cclxuICAgICAgICAgICAgICAgIFdbaV0gPVxyXG4gICAgICAgICAgICAgICAgICAgIChidWYuY2hhckNvZGVBdChvZmZzZXQpIDw8IDI0KSB8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIChidWYuY2hhckNvZGVBdChvZmZzZXQgKyAxKSA8PCAxNikgfFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAoYnVmLmNoYXJDb2RlQXQob2Zmc2V0ICsgMikgPDwgOCkgfFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBidWYuY2hhckNvZGVBdChvZmZzZXQgKyAzKTtcclxuICAgICAgICAgICAgICAgIG9mZnNldCArPSA0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDE2OyBpKyspIHtcclxuICAgICAgICAgICAgICAgIFdbaV0gPVxyXG4gICAgICAgICAgICAgICAgICAgIChidWZbb2Zmc2V0XSA8PCAyNCkgfFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAoYnVmW29mZnNldCArIDFdIDw8IDE2KSB8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIChidWZbb2Zmc2V0ICsgMl0gPDwgOCkgfFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBidWZbb2Zmc2V0ICsgM107XHJcbiAgICAgICAgICAgICAgICBvZmZzZXQgKz0gNDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBleHBhbmQgdG8gODAgd29yZHNcclxuICAgICAgICBmb3IgKHZhciBpID0gMTY7IGkgPCA4MDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciB0ID0gV1tpIC0gM10gXiBXW2kgLSA4XSBeIFdbaSAtIDE0XSBeIFdbaSAtIDE2XTtcclxuICAgICAgICAgICAgV1tpXSA9ICgodCA8PCAxKSB8ICh0ID4+PiAzMSkpICYgMHhmZmZmZmZmZjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGEgPSB0aGlzLmNoYWluX1swXTtcclxuICAgICAgICB2YXIgYiA9IHRoaXMuY2hhaW5fWzFdO1xyXG4gICAgICAgIHZhciBjID0gdGhpcy5jaGFpbl9bMl07XHJcbiAgICAgICAgdmFyIGQgPSB0aGlzLmNoYWluX1szXTtcclxuICAgICAgICB2YXIgZSA9IHRoaXMuY2hhaW5fWzRdO1xyXG4gICAgICAgIHZhciBmLCBrO1xyXG4gICAgICAgIC8vIFRPRE8odXNlcik6IFRyeSB0byB1bnJvbGwgdGhpcyBsb29wIHRvIHNwZWVkIHVwIHRoZSBjb21wdXRhdGlvbi5cclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDgwOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKGkgPCA0MCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGkgPCAyMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGYgPSBkIF4gKGIgJiAoYyBeIGQpKTtcclxuICAgICAgICAgICAgICAgICAgICBrID0gMHg1YTgyNzk5OTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGYgPSBiIF4gYyBeIGQ7XHJcbiAgICAgICAgICAgICAgICAgICAgayA9IDB4NmVkOWViYTE7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaSA8IDYwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZiA9IChiICYgYykgfCAoZCAmIChiIHwgYykpO1xyXG4gICAgICAgICAgICAgICAgICAgIGsgPSAweDhmMWJiY2RjO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZiA9IGIgXiBjIF4gZDtcclxuICAgICAgICAgICAgICAgICAgICBrID0gMHhjYTYyYzFkNjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgdCA9ICgoKGEgPDwgNSkgfCAoYSA+Pj4gMjcpKSArIGYgKyBlICsgayArIFdbaV0pICYgMHhmZmZmZmZmZjtcclxuICAgICAgICAgICAgZSA9IGQ7XHJcbiAgICAgICAgICAgIGQgPSBjO1xyXG4gICAgICAgICAgICBjID0gKChiIDw8IDMwKSB8IChiID4+PiAyKSkgJiAweGZmZmZmZmZmO1xyXG4gICAgICAgICAgICBiID0gYTtcclxuICAgICAgICAgICAgYSA9IHQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuY2hhaW5fWzBdID0gKHRoaXMuY2hhaW5fWzBdICsgYSkgJiAweGZmZmZmZmZmO1xyXG4gICAgICAgIHRoaXMuY2hhaW5fWzFdID0gKHRoaXMuY2hhaW5fWzFdICsgYikgJiAweGZmZmZmZmZmO1xyXG4gICAgICAgIHRoaXMuY2hhaW5fWzJdID0gKHRoaXMuY2hhaW5fWzJdICsgYykgJiAweGZmZmZmZmZmO1xyXG4gICAgICAgIHRoaXMuY2hhaW5fWzNdID0gKHRoaXMuY2hhaW5fWzNdICsgZCkgJiAweGZmZmZmZmZmO1xyXG4gICAgICAgIHRoaXMuY2hhaW5fWzRdID0gKHRoaXMuY2hhaW5fWzRdICsgZSkgJiAweGZmZmZmZmZmO1xyXG4gICAgfTtcclxuICAgIFNoYTEucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uIChieXRlcywgbGVuZ3RoKSB7XHJcbiAgICAgICAgLy8gVE9ETyhqb2hubGVueik6IHRpZ2h0ZW4gdGhlIGZ1bmN0aW9uIHNpZ25hdHVyZSBhbmQgcmVtb3ZlIHRoaXMgY2hlY2tcclxuICAgICAgICBpZiAoYnl0ZXMgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChsZW5ndGggPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBsZW5ndGggPSBieXRlcy5sZW5ndGg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBsZW5ndGhNaW51c0Jsb2NrID0gbGVuZ3RoIC0gdGhpcy5ibG9ja1NpemU7XHJcbiAgICAgICAgdmFyIG4gPSAwO1xyXG4gICAgICAgIC8vIFVzaW5nIGxvY2FsIGluc3RlYWQgb2YgbWVtYmVyIHZhcmlhYmxlcyBnaXZlcyB+NSUgc3BlZWR1cCBvbiBGaXJlZm94IDE2LlxyXG4gICAgICAgIHZhciBidWYgPSB0aGlzLmJ1Zl87XHJcbiAgICAgICAgdmFyIGluYnVmID0gdGhpcy5pbmJ1Zl87XHJcbiAgICAgICAgLy8gVGhlIG91dGVyIHdoaWxlIGxvb3Agc2hvdWxkIGV4ZWN1dGUgYXQgbW9zdCB0d2ljZS5cclxuICAgICAgICB3aGlsZSAobiA8IGxlbmd0aCkge1xyXG4gICAgICAgICAgICAvLyBXaGVuIHdlIGhhdmUgbm8gZGF0YSBpbiB0aGUgYmxvY2sgdG8gdG9wIHVwLCB3ZSBjYW4gZGlyZWN0bHkgcHJvY2VzcyB0aGVcclxuICAgICAgICAgICAgLy8gaW5wdXQgYnVmZmVyIChhc3N1bWluZyBpdCBjb250YWlucyBzdWZmaWNpZW50IGRhdGEpLiBUaGlzIGdpdmVzIH4yNSVcclxuICAgICAgICAgICAgLy8gc3BlZWR1cCBvbiBDaHJvbWUgMjMgYW5kIH4xNSUgc3BlZWR1cCBvbiBGaXJlZm94IDE2LCBidXQgcmVxdWlyZXMgdGhhdFxyXG4gICAgICAgICAgICAvLyB0aGUgZGF0YSBpcyBwcm92aWRlZCBpbiBsYXJnZSBjaHVua3MgKG9yIGluIG11bHRpcGxlcyBvZiA2NCBieXRlcykuXHJcbiAgICAgICAgICAgIGlmIChpbmJ1ZiA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgd2hpbGUgKG4gPD0gbGVuZ3RoTWludXNCbG9jaykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29tcHJlc3NfKGJ5dGVzLCBuKTtcclxuICAgICAgICAgICAgICAgICAgICBuICs9IHRoaXMuYmxvY2tTaXplO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgYnl0ZXMgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAobiA8IGxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGJ1ZltpbmJ1Zl0gPSBieXRlcy5jaGFyQ29kZUF0KG4pO1xyXG4gICAgICAgICAgICAgICAgICAgICsraW5idWY7XHJcbiAgICAgICAgICAgICAgICAgICAgKytuO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbmJ1ZiA9PT0gdGhpcy5ibG9ja1NpemUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21wcmVzc18oYnVmKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5idWYgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBKdW1wIHRvIHRoZSBvdXRlciBsb29wIHNvIHdlIHVzZSB0aGUgZnVsbC1ibG9jayBvcHRpbWl6YXRpb24uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHdoaWxlIChuIDwgbGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnVmW2luYnVmXSA9IGJ5dGVzW25dO1xyXG4gICAgICAgICAgICAgICAgICAgICsraW5idWY7XHJcbiAgICAgICAgICAgICAgICAgICAgKytuO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbmJ1ZiA9PT0gdGhpcy5ibG9ja1NpemUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21wcmVzc18oYnVmKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5idWYgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBKdW1wIHRvIHRoZSBvdXRlciBsb29wIHNvIHdlIHVzZSB0aGUgZnVsbC1ibG9jayBvcHRpbWl6YXRpb24uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmluYnVmXyA9IGluYnVmO1xyXG4gICAgICAgIHRoaXMudG90YWxfICs9IGxlbmd0aDtcclxuICAgIH07XHJcbiAgICAvKiogQG92ZXJyaWRlICovXHJcbiAgICBTaGExLnByb3RvdHlwZS5kaWdlc3QgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGRpZ2VzdCA9IFtdO1xyXG4gICAgICAgIHZhciB0b3RhbEJpdHMgPSB0aGlzLnRvdGFsXyAqIDg7XHJcbiAgICAgICAgLy8gQWRkIHBhZCAweDgwIDB4MDAqLlxyXG4gICAgICAgIGlmICh0aGlzLmluYnVmXyA8IDU2KSB7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlKHRoaXMucGFkXywgNTYgLSB0aGlzLmluYnVmXyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZSh0aGlzLnBhZF8sIHRoaXMuYmxvY2tTaXplIC0gKHRoaXMuaW5idWZfIC0gNTYpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gQWRkICMgYml0cy5cclxuICAgICAgICBmb3IgKHZhciBpID0gdGhpcy5ibG9ja1NpemUgLSAxOyBpID49IDU2OyBpLS0pIHtcclxuICAgICAgICAgICAgdGhpcy5idWZfW2ldID0gdG90YWxCaXRzICYgMjU1O1xyXG4gICAgICAgICAgICB0b3RhbEJpdHMgLz0gMjU2OyAvLyBEb24ndCB1c2UgYml0LXNoaWZ0aW5nIGhlcmUhXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuY29tcHJlc3NfKHRoaXMuYnVmXyk7XHJcbiAgICAgICAgdmFyIG4gPSAwO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgNTsgaSsrKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGogPSAyNDsgaiA+PSAwOyBqIC09IDgpIHtcclxuICAgICAgICAgICAgICAgIGRpZ2VzdFtuXSA9ICh0aGlzLmNoYWluX1tpXSA+PiBqKSAmIDI1NTtcclxuICAgICAgICAgICAgICAgICsrbjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZGlnZXN0O1xyXG4gICAgfTtcclxuICAgIHJldHVybiBTaGExO1xyXG59KCkpO1xuXG4vKipcclxuICogSGVscGVyIHRvIG1ha2UgYSBTdWJzY3JpYmUgZnVuY3Rpb24gKGp1c3QgbGlrZSBQcm9taXNlIGhlbHBzIG1ha2UgYVxyXG4gKiBUaGVuYWJsZSkuXHJcbiAqXHJcbiAqIEBwYXJhbSBleGVjdXRvciBGdW5jdGlvbiB3aGljaCBjYW4gbWFrZSBjYWxscyB0byBhIHNpbmdsZSBPYnNlcnZlclxyXG4gKiAgICAgYXMgYSBwcm94eS5cclxuICogQHBhcmFtIG9uTm9PYnNlcnZlcnMgQ2FsbGJhY2sgd2hlbiBjb3VudCBvZiBPYnNlcnZlcnMgZ29lcyB0byB6ZXJvLlxyXG4gKi9cclxuZnVuY3Rpb24gY3JlYXRlU3Vic2NyaWJlKGV4ZWN1dG9yLCBvbk5vT2JzZXJ2ZXJzKSB7XHJcbiAgICB2YXIgcHJveHkgPSBuZXcgT2JzZXJ2ZXJQcm94eShleGVjdXRvciwgb25Ob09ic2VydmVycyk7XHJcbiAgICByZXR1cm4gcHJveHkuc3Vic2NyaWJlLmJpbmQocHJveHkpO1xyXG59XHJcbi8qKlxyXG4gKiBJbXBsZW1lbnQgZmFuLW91dCBmb3IgYW55IG51bWJlciBvZiBPYnNlcnZlcnMgYXR0YWNoZWQgdmlhIGEgc3Vic2NyaWJlXHJcbiAqIGZ1bmN0aW9uLlxyXG4gKi9cclxudmFyIE9ic2VydmVyUHJveHkgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSBleGVjdXRvciBGdW5jdGlvbiB3aGljaCBjYW4gbWFrZSBjYWxscyB0byBhIHNpbmdsZSBPYnNlcnZlclxyXG4gICAgICogICAgIGFzIGEgcHJveHkuXHJcbiAgICAgKiBAcGFyYW0gb25Ob09ic2VydmVycyBDYWxsYmFjayB3aGVuIGNvdW50IG9mIE9ic2VydmVycyBnb2VzIHRvIHplcm8uXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIE9ic2VydmVyUHJveHkoZXhlY3V0b3IsIG9uTm9PYnNlcnZlcnMpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMub2JzZXJ2ZXJzID0gW107XHJcbiAgICAgICAgdGhpcy51bnN1YnNjcmliZXMgPSBbXTtcclxuICAgICAgICB0aGlzLm9ic2VydmVyQ291bnQgPSAwO1xyXG4gICAgICAgIC8vIE1pY3JvLXRhc2sgc2NoZWR1bGluZyBieSBjYWxsaW5nIHRhc2sudGhlbigpLlxyXG4gICAgICAgIHRoaXMudGFzayA9IFByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgICAgIHRoaXMuZmluYWxpemVkID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5vbk5vT2JzZXJ2ZXJzID0gb25Ob09ic2VydmVycztcclxuICAgICAgICAvLyBDYWxsIHRoZSBleGVjdXRvciBhc3luY2hyb25vdXNseSBzbyBzdWJzY3JpYmVycyB0aGF0IGFyZSBjYWxsZWRcclxuICAgICAgICAvLyBzeW5jaHJvbm91c2x5IGFmdGVyIHRoZSBjcmVhdGlvbiBvZiB0aGUgc3Vic2NyaWJlIGZ1bmN0aW9uXHJcbiAgICAgICAgLy8gY2FuIHN0aWxsIHJlY2VpdmUgdGhlIHZlcnkgZmlyc3QgdmFsdWUgZ2VuZXJhdGVkIGluIHRoZSBleGVjdXRvci5cclxuICAgICAgICB0aGlzLnRhc2tcclxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBleGVjdXRvcihfdGhpcyk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIF90aGlzLmVycm9yKGUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgT2JzZXJ2ZXJQcm94eS5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMuZm9yRWFjaE9ic2VydmVyKGZ1bmN0aW9uIChvYnNlcnZlcikge1xyXG4gICAgICAgICAgICBvYnNlcnZlci5uZXh0KHZhbHVlKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBPYnNlcnZlclByb3h5LnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgIHRoaXMuZm9yRWFjaE9ic2VydmVyKGZ1bmN0aW9uIChvYnNlcnZlcikge1xyXG4gICAgICAgICAgICBvYnNlcnZlci5lcnJvcihlcnJvcik7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5jbG9zZShlcnJvcik7XHJcbiAgICB9O1xyXG4gICAgT2JzZXJ2ZXJQcm94eS5wcm90b3R5cGUuY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5mb3JFYWNoT2JzZXJ2ZXIoZnVuY3Rpb24gKG9ic2VydmVyKSB7XHJcbiAgICAgICAgICAgIG9ic2VydmVyLmNvbXBsZXRlKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogU3Vic2NyaWJlIGZ1bmN0aW9uIHRoYXQgY2FuIGJlIHVzZWQgdG8gYWRkIGFuIE9ic2VydmVyIHRvIHRoZSBmYW4tb3V0IGxpc3QuXHJcbiAgICAgKlxyXG4gICAgICogLSBXZSByZXF1aXJlIHRoYXQgbm8gZXZlbnQgaXMgc2VudCB0byBhIHN1YnNjcmliZXIgc3ljaHJvbm91c2x5IHRvIHRoZWlyXHJcbiAgICAgKiAgIGNhbGwgdG8gc3Vic2NyaWJlKCkuXHJcbiAgICAgKi9cclxuICAgIE9ic2VydmVyUHJveHkucHJvdG90eXBlLnN1YnNjcmliZSA9IGZ1bmN0aW9uIChuZXh0T3JPYnNlcnZlciwgZXJyb3IsIGNvbXBsZXRlKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgb2JzZXJ2ZXI7XHJcbiAgICAgICAgaWYgKG5leHRPck9ic2VydmVyID09PSB1bmRlZmluZWQgJiZcclxuICAgICAgICAgICAgZXJyb3IgPT09IHVuZGVmaW5lZCAmJlxyXG4gICAgICAgICAgICBjb21wbGV0ZSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBPYnNlcnZlci4nKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gQXNzZW1ibGUgYW4gT2JzZXJ2ZXIgb2JqZWN0IHdoZW4gcGFzc2VkIGFzIGNhbGxiYWNrIGZ1bmN0aW9ucy5cclxuICAgICAgICBpZiAoaW1wbGVtZW50c0FueU1ldGhvZHMobmV4dE9yT2JzZXJ2ZXIsIFtcclxuICAgICAgICAgICAgJ25leHQnLFxyXG4gICAgICAgICAgICAnZXJyb3InLFxyXG4gICAgICAgICAgICAnY29tcGxldGUnXHJcbiAgICAgICAgXSkpIHtcclxuICAgICAgICAgICAgb2JzZXJ2ZXIgPSBuZXh0T3JPYnNlcnZlcjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIG9ic2VydmVyID0ge1xyXG4gICAgICAgICAgICAgICAgbmV4dDogbmV4dE9yT2JzZXJ2ZXIsXHJcbiAgICAgICAgICAgICAgICBlcnJvcjogZXJyb3IsXHJcbiAgICAgICAgICAgICAgICBjb21wbGV0ZTogY29tcGxldGVcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG9ic2VydmVyLm5leHQgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBvYnNlcnZlci5uZXh0ID0gbm9vcDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG9ic2VydmVyLmVycm9yID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgb2JzZXJ2ZXIuZXJyb3IgPSBub29wO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAob2JzZXJ2ZXIuY29tcGxldGUgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBvYnNlcnZlci5jb21wbGV0ZSA9IG5vb3A7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciB1bnN1YiA9IHRoaXMudW5zdWJzY3JpYmVPbmUuYmluZCh0aGlzLCB0aGlzLm9ic2VydmVycy5sZW5ndGgpO1xyXG4gICAgICAgIC8vIEF0dGVtcHQgdG8gc3Vic2NyaWJlIHRvIGEgdGVybWluYXRlZCBPYnNlcnZhYmxlIC0gd2VcclxuICAgICAgICAvLyBqdXN0IHJlc3BvbmQgdG8gdGhlIE9ic2VydmVyIHdpdGggdGhlIGZpbmFsIGVycm9yIG9yIGNvbXBsZXRlXHJcbiAgICAgICAgLy8gZXZlbnQuXHJcbiAgICAgICAgaWYgKHRoaXMuZmluYWxpemVkKSB7XHJcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZmxvYXRpbmctcHJvbWlzZXNcclxuICAgICAgICAgICAgdGhpcy50YXNrLnRoZW4oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMuZmluYWxFcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvYnNlcnZlci5lcnJvcihfdGhpcy5maW5hbEVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9ic2VydmVyLmNvbXBsZXRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBub3RoaW5nXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLm9ic2VydmVycy5wdXNoKG9ic2VydmVyKTtcclxuICAgICAgICByZXR1cm4gdW5zdWI7XHJcbiAgICB9O1xyXG4gICAgLy8gVW5zdWJzY3JpYmUgaXMgc3luY2hyb25vdXMgLSB3ZSBndWFyYW50ZWUgdGhhdCBubyBldmVudHMgYXJlIHNlbnQgdG9cclxuICAgIC8vIGFueSB1bnN1YnNjcmliZWQgT2JzZXJ2ZXIuXHJcbiAgICBPYnNlcnZlclByb3h5LnByb3RvdHlwZS51bnN1YnNjcmliZU9uZSA9IGZ1bmN0aW9uIChpKSB7XHJcbiAgICAgICAgaWYgKHRoaXMub2JzZXJ2ZXJzID09PSB1bmRlZmluZWQgfHwgdGhpcy5vYnNlcnZlcnNbaV0gPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGRlbGV0ZSB0aGlzLm9ic2VydmVyc1tpXTtcclxuICAgICAgICB0aGlzLm9ic2VydmVyQ291bnQgLT0gMTtcclxuICAgICAgICBpZiAodGhpcy5vYnNlcnZlckNvdW50ID09PSAwICYmIHRoaXMub25Ob09ic2VydmVycyAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMub25Ob09ic2VydmVycyh0aGlzKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgT2JzZXJ2ZXJQcm94eS5wcm90b3R5cGUuZm9yRWFjaE9ic2VydmVyID0gZnVuY3Rpb24gKGZuKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZmluYWxpemVkKSB7XHJcbiAgICAgICAgICAgIC8vIEFscmVhZHkgY2xvc2VkIGJ5IHByZXZpb3VzIGV2ZW50Li4uLmp1c3QgZWF0IHRoZSBhZGRpdGlvbmFsIHZhbHVlcy5cclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBTaW5jZSBzZW5kT25lIGNhbGxzIGFzeW5jaHJvbm91c2x5IC0gdGhlcmUgaXMgbm8gY2hhbmNlIHRoYXRcclxuICAgICAgICAvLyB0aGlzLm9ic2VydmVycyB3aWxsIGJlY29tZSB1bmRlZmluZWQuXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLm9ic2VydmVycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB0aGlzLnNlbmRPbmUoaSwgZm4pO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvLyBDYWxsIHRoZSBPYnNlcnZlciB2aWEgb25lIG9mIGl0J3MgY2FsbGJhY2sgZnVuY3Rpb24uIFdlIGFyZSBjYXJlZnVsIHRvXHJcbiAgICAvLyBjb25maXJtIHRoYXQgdGhlIG9ic2VydmUgaGFzIG5vdCBiZWVuIHVuc3Vic2NyaWJlZCBzaW5jZSB0aGlzIGFzeW5jaHJvbm91c1xyXG4gICAgLy8gZnVuY3Rpb24gaGFkIGJlZW4gcXVldWVkLlxyXG4gICAgT2JzZXJ2ZXJQcm94eS5wcm90b3R5cGUuc2VuZE9uZSA9IGZ1bmN0aW9uIChpLCBmbikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgLy8gRXhlY3V0ZSB0aGUgY2FsbGJhY2sgYXN5bmNocm9ub3VzbHlcclxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWZsb2F0aW5nLXByb21pc2VzXHJcbiAgICAgICAgdGhpcy50YXNrLnRoZW4oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAoX3RoaXMub2JzZXJ2ZXJzICE9PSB1bmRlZmluZWQgJiYgX3RoaXMub2JzZXJ2ZXJzW2ldICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm4oX3RoaXMub2JzZXJ2ZXJzW2ldKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gSWdub3JlIGV4Y2VwdGlvbnMgcmFpc2VkIGluIE9ic2VydmVycyBvciBtaXNzaW5nIG1ldGhvZHMgb2YgYW5cclxuICAgICAgICAgICAgICAgICAgICAvLyBPYnNlcnZlci5cclxuICAgICAgICAgICAgICAgICAgICAvLyBMb2cgZXJyb3IgdG8gY29uc29sZS4gYi8zMTQwNDgwNlxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgY29uc29sZSAhPT0gJ3VuZGVmaW5lZCcgJiYgY29uc29sZS5lcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIE9ic2VydmVyUHJveHkucHJvdG90eXBlLmNsb3NlID0gZnVuY3Rpb24gKGVycikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgaWYgKHRoaXMuZmluYWxpemVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5maW5hbGl6ZWQgPSB0cnVlO1xyXG4gICAgICAgIGlmIChlcnIgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aGlzLmZpbmFsRXJyb3IgPSBlcnI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFByb3h5IGlzIG5vIGxvbmdlciBuZWVkZWQgLSBnYXJiYWdlIGNvbGxlY3QgcmVmZXJlbmNlc1xyXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZmxvYXRpbmctcHJvbWlzZXNcclxuICAgICAgICB0aGlzLnRhc2sudGhlbihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIF90aGlzLm9ic2VydmVycyA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgX3RoaXMub25Ob09ic2VydmVycyA9IHVuZGVmaW5lZDtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gT2JzZXJ2ZXJQcm94eTtcclxufSgpKTtcclxuLyoqIFR1cm4gc3luY2hyb25vdXMgZnVuY3Rpb24gaW50byBvbmUgY2FsbGVkIGFzeW5jaHJvbm91c2x5LiAqL1xyXG5mdW5jdGlvbiBhc3luYyhmbiwgb25FcnJvcikge1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgYXJncyA9IFtdO1xyXG4gICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzW19pXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgUHJvbWlzZS5yZXNvbHZlKHRydWUpXHJcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgZm4uYXBwbHkodm9pZCAwLCBhcmdzKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGlmIChvbkVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICBvbkVycm9yKGVycm9yKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxufVxyXG4vKipcclxuICogUmV0dXJuIHRydWUgaWYgdGhlIG9iamVjdCBwYXNzZWQgaW4gaW1wbGVtZW50cyBhbnkgb2YgdGhlIG5hbWVkIG1ldGhvZHMuXHJcbiAqL1xyXG5mdW5jdGlvbiBpbXBsZW1lbnRzQW55TWV0aG9kcyhvYmosIG1ldGhvZHMpIHtcclxuICAgIGlmICh0eXBlb2Ygb2JqICE9PSAnb2JqZWN0JyB8fCBvYmogPT09IG51bGwpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBmb3IgKHZhciBfaSA9IDAsIG1ldGhvZHNfMSA9IG1ldGhvZHM7IF9pIDwgbWV0aG9kc18xLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgIHZhciBtZXRob2QgPSBtZXRob2RzXzFbX2ldO1xyXG4gICAgICAgIGlmIChtZXRob2QgaW4gb2JqICYmIHR5cGVvZiBvYmpbbWV0aG9kXSA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbn1cclxuZnVuY3Rpb24gbm9vcCgpIHtcclxuICAgIC8vIGRvIG5vdGhpbmdcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIENoZWNrIHRvIG1ha2Ugc3VyZSB0aGUgYXBwcm9wcmlhdGUgbnVtYmVyIG9mIGFyZ3VtZW50cyBhcmUgcHJvdmlkZWQgZm9yIGEgcHVibGljIGZ1bmN0aW9uLlxyXG4gKiBUaHJvd3MgYW4gZXJyb3IgaWYgaXQgZmFpbHMuXHJcbiAqXHJcbiAqIEBwYXJhbSBmbk5hbWUgVGhlIGZ1bmN0aW9uIG5hbWVcclxuICogQHBhcmFtIG1pbkNvdW50IFRoZSBtaW5pbXVtIG51bWJlciBvZiBhcmd1bWVudHMgdG8gYWxsb3cgZm9yIHRoZSBmdW5jdGlvbiBjYWxsXHJcbiAqIEBwYXJhbSBtYXhDb3VudCBUaGUgbWF4aW11bSBudW1iZXIgb2YgYXJndW1lbnQgdG8gYWxsb3cgZm9yIHRoZSBmdW5jdGlvbiBjYWxsXHJcbiAqIEBwYXJhbSBhcmdDb3VudCBUaGUgYWN0dWFsIG51bWJlciBvZiBhcmd1bWVudHMgcHJvdmlkZWQuXHJcbiAqL1xyXG52YXIgdmFsaWRhdGVBcmdDb3VudCA9IGZ1bmN0aW9uIChmbk5hbWUsIG1pbkNvdW50LCBtYXhDb3VudCwgYXJnQ291bnQpIHtcclxuICAgIHZhciBhcmdFcnJvcjtcclxuICAgIGlmIChhcmdDb3VudCA8IG1pbkNvdW50KSB7XHJcbiAgICAgICAgYXJnRXJyb3IgPSAnYXQgbGVhc3QgJyArIG1pbkNvdW50O1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoYXJnQ291bnQgPiBtYXhDb3VudCkge1xyXG4gICAgICAgIGFyZ0Vycm9yID0gbWF4Q291bnQgPT09IDAgPyAnbm9uZScgOiAnbm8gbW9yZSB0aGFuICcgKyBtYXhDb3VudDtcclxuICAgIH1cclxuICAgIGlmIChhcmdFcnJvcikge1xyXG4gICAgICAgIHZhciBlcnJvciA9IGZuTmFtZSArXHJcbiAgICAgICAgICAgICcgZmFpbGVkOiBXYXMgY2FsbGVkIHdpdGggJyArXHJcbiAgICAgICAgICAgIGFyZ0NvdW50ICtcclxuICAgICAgICAgICAgKGFyZ0NvdW50ID09PSAxID8gJyBhcmd1bWVudC4nIDogJyBhcmd1bWVudHMuJykgK1xyXG4gICAgICAgICAgICAnIEV4cGVjdHMgJyArXHJcbiAgICAgICAgICAgIGFyZ0Vycm9yICtcclxuICAgICAgICAgICAgJy4nO1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvcik7XHJcbiAgICB9XHJcbn07XHJcbi8qKlxyXG4gKiBHZW5lcmF0ZXMgYSBzdHJpbmcgdG8gcHJlZml4IGFuIGVycm9yIG1lc3NhZ2UgYWJvdXQgZmFpbGVkIGFyZ3VtZW50IHZhbGlkYXRpb25cclxuICpcclxuICogQHBhcmFtIGZuTmFtZSBUaGUgZnVuY3Rpb24gbmFtZVxyXG4gKiBAcGFyYW0gYXJndW1lbnROdW1iZXIgVGhlIGluZGV4IG9mIHRoZSBhcmd1bWVudFxyXG4gKiBAcGFyYW0gb3B0aW9uYWwgV2hldGhlciBvciBub3QgdGhlIGFyZ3VtZW50IGlzIG9wdGlvbmFsXHJcbiAqIEByZXR1cm4gVGhlIHByZWZpeCB0byBhZGQgdG8gdGhlIGVycm9yIHRocm93biBmb3IgdmFsaWRhdGlvbi5cclxuICovXHJcbmZ1bmN0aW9uIGVycm9yUHJlZml4KGZuTmFtZSwgYXJndW1lbnROdW1iZXIsIG9wdGlvbmFsKSB7XHJcbiAgICB2YXIgYXJnTmFtZSA9ICcnO1xyXG4gICAgc3dpdGNoIChhcmd1bWVudE51bWJlcikge1xyXG4gICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgYXJnTmFtZSA9IG9wdGlvbmFsID8gJ2ZpcnN0JyA6ICdGaXJzdCc7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgYXJnTmFtZSA9IG9wdGlvbmFsID8gJ3NlY29uZCcgOiAnU2Vjb25kJztcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICBhcmdOYW1lID0gb3B0aW9uYWwgPyAndGhpcmQnIDogJ1RoaXJkJztcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSA0OlxyXG4gICAgICAgICAgICBhcmdOYW1lID0gb3B0aW9uYWwgPyAnZm91cnRoJyA6ICdGb3VydGgnO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2Vycm9yUHJlZml4IGNhbGxlZCB3aXRoIGFyZ3VtZW50TnVtYmVyID4gNC4gIE5lZWQgdG8gdXBkYXRlIGl0PycpO1xyXG4gICAgfVxyXG4gICAgdmFyIGVycm9yID0gZm5OYW1lICsgJyBmYWlsZWQ6ICc7XHJcbiAgICBlcnJvciArPSBhcmdOYW1lICsgJyBhcmd1bWVudCAnO1xyXG4gICAgcmV0dXJuIGVycm9yO1xyXG59XHJcbi8qKlxyXG4gKiBAcGFyYW0gZm5OYW1lXHJcbiAqIEBwYXJhbSBhcmd1bWVudE51bWJlclxyXG4gKiBAcGFyYW0gbmFtZXNwYWNlXHJcbiAqIEBwYXJhbSBvcHRpb25hbFxyXG4gKi9cclxuZnVuY3Rpb24gdmFsaWRhdGVOYW1lc3BhY2UoZm5OYW1lLCBhcmd1bWVudE51bWJlciwgbmFtZXNwYWNlLCBvcHRpb25hbCkge1xyXG4gICAgaWYgKG9wdGlvbmFsICYmICFuYW1lc3BhY2UpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBpZiAodHlwZW9mIG5hbWVzcGFjZSAhPT0gJ3N0cmluZycpIHtcclxuICAgICAgICAvL1RPRE86IEkgc2hvdWxkIGRvIG1vcmUgdmFsaWRhdGlvbiBoZXJlLiBXZSBvbmx5IGFsbG93IGNlcnRhaW4gY2hhcnMgaW4gbmFtZXNwYWNlcy5cclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3JQcmVmaXgoZm5OYW1lLCBhcmd1bWVudE51bWJlciwgb3B0aW9uYWwpICtcclxuICAgICAgICAgICAgJ211c3QgYmUgYSB2YWxpZCBmaXJlYmFzZSBuYW1lc3BhY2UuJyk7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gdmFsaWRhdGVDYWxsYmFjayhmbk5hbWUsIGFyZ3VtZW50TnVtYmVyLCBjYWxsYmFjaywgb3B0aW9uYWwpIHtcclxuICAgIGlmIChvcHRpb25hbCAmJiAhY2FsbGJhY2spIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBpZiAodHlwZW9mIGNhbGxiYWNrICE9PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yUHJlZml4KGZuTmFtZSwgYXJndW1lbnROdW1iZXIsIG9wdGlvbmFsKSArXHJcbiAgICAgICAgICAgICdtdXN0IGJlIGEgdmFsaWQgZnVuY3Rpb24uJyk7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gdmFsaWRhdGVDb250ZXh0T2JqZWN0KGZuTmFtZSwgYXJndW1lbnROdW1iZXIsIGNvbnRleHQsIG9wdGlvbmFsKSB7XHJcbiAgICBpZiAob3B0aW9uYWwgJiYgIWNvbnRleHQpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBpZiAodHlwZW9mIGNvbnRleHQgIT09ICdvYmplY3QnIHx8IGNvbnRleHQgPT09IG51bGwpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3JQcmVmaXgoZm5OYW1lLCBhcmd1bWVudE51bWJlciwgb3B0aW9uYWwpICtcclxuICAgICAgICAgICAgJ211c3QgYmUgYSB2YWxpZCBjb250ZXh0IG9iamVjdC4nKTtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLy8gQ29kZSBvcmlnaW5hbGx5IGNhbWUgZnJvbSBnb29nLmNyeXB0LnN0cmluZ1RvVXRmOEJ5dGVBcnJheSwgYnV0IGZvciBzb21lIHJlYXNvbiB0aGV5XHJcbi8vIGF1dG9tYXRpY2FsbHkgcmVwbGFjZWQgJ1xcclxcbicgd2l0aCAnXFxuJywgYW5kIHRoZXkgZGlkbid0IGhhbmRsZSBzdXJyb2dhdGUgcGFpcnMsXHJcbi8vIHNvIGl0J3MgYmVlbiBtb2RpZmllZC5cclxuLy8gTm90ZSB0aGF0IG5vdCBhbGwgVW5pY29kZSBjaGFyYWN0ZXJzIGFwcGVhciBhcyBzaW5nbGUgY2hhcmFjdGVycyBpbiBKYXZhU2NyaXB0IHN0cmluZ3MuXHJcbi8vIGZyb21DaGFyQ29kZSByZXR1cm5zIHRoZSBVVEYtMTYgZW5jb2Rpbmcgb2YgYSBjaGFyYWN0ZXIgLSBzbyBzb21lIFVuaWNvZGUgY2hhcmFjdGVyc1xyXG4vLyB1c2UgMiBjaGFyYWN0ZXJzIGluIEphdmFzY3JpcHQuICBBbGwgNC1ieXRlIFVURi04IGNoYXJhY3RlcnMgYmVnaW4gd2l0aCBhIGZpcnN0XHJcbi8vIGNoYXJhY3RlciBpbiB0aGUgcmFuZ2UgMHhEODAwIC0gMHhEQkZGICh0aGUgZmlyc3QgY2hhcmFjdGVyIG9mIGEgc28tY2FsbGVkIHN1cnJvZ2F0ZVxyXG4vLyBwYWlyKS5cclxuLy8gU2VlIGh0dHA6Ly93d3cuZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi81LjEvI3NlYy0xNS4xLjNcclxuLyoqXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHJcclxuICogQHJldHVybiB7QXJyYXl9XHJcbiAqL1xyXG52YXIgc3RyaW5nVG9CeXRlQXJyYXkkMSA9IGZ1bmN0aW9uIChzdHIpIHtcclxuICAgIHZhciBvdXQgPSBbXTtcclxuICAgIHZhciBwID0gMDtcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgdmFyIGMgPSBzdHIuY2hhckNvZGVBdChpKTtcclxuICAgICAgICAvLyBJcyB0aGlzIHRoZSBsZWFkIHN1cnJvZ2F0ZSBpbiBhIHN1cnJvZ2F0ZSBwYWlyP1xyXG4gICAgICAgIGlmIChjID49IDB4ZDgwMCAmJiBjIDw9IDB4ZGJmZikge1xyXG4gICAgICAgICAgICB2YXIgaGlnaCA9IGMgLSAweGQ4MDA7IC8vIHRoZSBoaWdoIDEwIGJpdHMuXHJcbiAgICAgICAgICAgIGkrKztcclxuICAgICAgICAgICAgYXNzZXJ0KGkgPCBzdHIubGVuZ3RoLCAnU3Vycm9nYXRlIHBhaXIgbWlzc2luZyB0cmFpbCBzdXJyb2dhdGUuJyk7XHJcbiAgICAgICAgICAgIHZhciBsb3cgPSBzdHIuY2hhckNvZGVBdChpKSAtIDB4ZGMwMDsgLy8gdGhlIGxvdyAxMCBiaXRzLlxyXG4gICAgICAgICAgICBjID0gMHgxMDAwMCArIChoaWdoIDw8IDEwKSArIGxvdztcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGMgPCAxMjgpIHtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSBjO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChjIDwgMjA0OCkge1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjID4+IDYpIHwgMTkyO1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjICYgNjMpIHwgMTI4O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChjIDwgNjU1MzYpIHtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyA+PiAxMikgfCAyMjQ7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKChjID4+IDYpICYgNjMpIHwgMTI4O1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjICYgNjMpIHwgMTI4O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyA+PiAxOCkgfCAyNDA7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKChjID4+IDEyKSAmIDYzKSB8IDEyODtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoKGMgPj4gNikgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG91dDtcclxufTtcclxuLyoqXHJcbiAqIENhbGN1bGF0ZSBsZW5ndGggd2l0aG91dCBhY3R1YWxseSBjb252ZXJ0aW5nOyB1c2VmdWwgZm9yIGRvaW5nIGNoZWFwZXIgdmFsaWRhdGlvbi5cclxuICogQHBhcmFtIHtzdHJpbmd9IHN0clxyXG4gKiBAcmV0dXJuIHtudW1iZXJ9XHJcbiAqL1xyXG52YXIgc3RyaW5nTGVuZ3RoID0gZnVuY3Rpb24gKHN0cikge1xyXG4gICAgdmFyIHAgPSAwO1xyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICB2YXIgYyA9IHN0ci5jaGFyQ29kZUF0KGkpO1xyXG4gICAgICAgIGlmIChjIDwgMTI4KSB7XHJcbiAgICAgICAgICAgIHArKztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoYyA8IDIwNDgpIHtcclxuICAgICAgICAgICAgcCArPSAyO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChjID49IDB4ZDgwMCAmJiBjIDw9IDB4ZGJmZikge1xyXG4gICAgICAgICAgICAvLyBMZWFkIHN1cnJvZ2F0ZSBvZiBhIHN1cnJvZ2F0ZSBwYWlyLiAgVGhlIHBhaXIgdG9nZXRoZXIgd2lsbCB0YWtlIDQgYnl0ZXMgdG8gcmVwcmVzZW50LlxyXG4gICAgICAgICAgICBwICs9IDQ7XHJcbiAgICAgICAgICAgIGkrKzsgLy8gc2tpcCB0cmFpbCBzdXJyb2dhdGUuXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBwICs9IDM7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHA7XHJcbn07XG5cbmV4cG9ydHMuQ09OU1RBTlRTID0gQ09OU1RBTlRTO1xuZXhwb3J0cy5EZWZlcnJlZCA9IERlZmVycmVkO1xuZXhwb3J0cy5FcnJvckZhY3RvcnkgPSBFcnJvckZhY3Rvcnk7XG5leHBvcnRzLkZpcmViYXNlRXJyb3IgPSBGaXJlYmFzZUVycm9yO1xuZXhwb3J0cy5TaGExID0gU2hhMTtcbmV4cG9ydHMuYXNzZXJ0ID0gYXNzZXJ0O1xuZXhwb3J0cy5hc3NlcnRpb25FcnJvciA9IGFzc2VydGlvbkVycm9yO1xuZXhwb3J0cy5hc3luYyA9IGFzeW5jO1xuZXhwb3J0cy5iYXNlNjQgPSBiYXNlNjQ7XG5leHBvcnRzLmJhc2U2NERlY29kZSA9IGJhc2U2NERlY29kZTtcbmV4cG9ydHMuYmFzZTY0RW5jb2RlID0gYmFzZTY0RW5jb2RlO1xuZXhwb3J0cy5jb250YWlucyA9IGNvbnRhaW5zO1xuZXhwb3J0cy5jcmVhdGVTdWJzY3JpYmUgPSBjcmVhdGVTdWJzY3JpYmU7XG5leHBvcnRzLmRlY29kZSA9IGRlY29kZTtcbmV4cG9ydHMuZGVlcENvcHkgPSBkZWVwQ29weTtcbmV4cG9ydHMuZGVlcEV4dGVuZCA9IGRlZXBFeHRlbmQ7XG5leHBvcnRzLmVycm9yUHJlZml4ID0gZXJyb3JQcmVmaXg7XG5leHBvcnRzLmdldFVBID0gZ2V0VUE7XG5leHBvcnRzLmlzQWRtaW4gPSBpc0FkbWluO1xuZXhwb3J0cy5pc0Jyb3dzZXIgPSBpc0Jyb3dzZXI7XG5leHBvcnRzLmlzRW1wdHkgPSBpc0VtcHR5O1xuZXhwb3J0cy5pc01vYmlsZUNvcmRvdmEgPSBpc01vYmlsZUNvcmRvdmE7XG5leHBvcnRzLmlzTm9kZSA9IGlzTm9kZTtcbmV4cG9ydHMuaXNOb2RlU2RrID0gaXNOb2RlU2RrO1xuZXhwb3J0cy5pc1JlYWN0TmF0aXZlID0gaXNSZWFjdE5hdGl2ZTtcbmV4cG9ydHMuaXNWYWxpZEZvcm1hdCA9IGlzVmFsaWRGb3JtYXQ7XG5leHBvcnRzLmlzVmFsaWRUaW1lc3RhbXAgPSBpc1ZhbGlkVGltZXN0YW1wO1xuZXhwb3J0cy5pc3N1ZWRBdFRpbWUgPSBpc3N1ZWRBdFRpbWU7XG5leHBvcnRzLmpzb25FdmFsID0ganNvbkV2YWw7XG5leHBvcnRzLm1hcCA9IG1hcDtcbmV4cG9ydHMucXVlcnlzdHJpbmcgPSBxdWVyeXN0cmluZztcbmV4cG9ydHMucXVlcnlzdHJpbmdEZWNvZGUgPSBxdWVyeXN0cmluZ0RlY29kZTtcbmV4cG9ydHMuc2FmZUdldCA9IHNhZmVHZXQ7XG5leHBvcnRzLnN0cmluZ0xlbmd0aCA9IHN0cmluZ0xlbmd0aDtcbmV4cG9ydHMuc3RyaW5nVG9CeXRlQXJyYXkgPSBzdHJpbmdUb0J5dGVBcnJheSQxO1xuZXhwb3J0cy5zdHJpbmdpZnkgPSBzdHJpbmdpZnk7XG5leHBvcnRzLnZhbGlkYXRlQXJnQ291bnQgPSB2YWxpZGF0ZUFyZ0NvdW50O1xuZXhwb3J0cy52YWxpZGF0ZUNhbGxiYWNrID0gdmFsaWRhdGVDYWxsYmFjaztcbmV4cG9ydHMudmFsaWRhdGVDb250ZXh0T2JqZWN0ID0gdmFsaWRhdGVDb250ZXh0T2JqZWN0O1xuZXhwb3J0cy52YWxpZGF0ZU5hbWVzcGFjZSA9IHZhbGlkYXRlTmFtZXNwYWNlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguY2pzLmpzLm1hcFxuIiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuXG52YXIgdHNsaWIgPSByZXF1aXJlKCd0c2xpYicpO1xudmFyIHV0aWwgPSByZXF1aXJlKCdAZmlyZWJhc2UvdXRpbCcpO1xuXG4vKipcclxuICogQ29tcG9uZW50IGZvciBzZXJ2aWNlIG5hbWUgVCwgZS5nLiBgYXV0aGAsIGBhdXRoLWludGVybmFsYFxyXG4gKi9cclxudmFyIENvbXBvbmVudCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBuYW1lIFRoZSBwdWJsaWMgc2VydmljZSBuYW1lLCBlLmcuIGFwcCwgYXV0aCwgZmlyZXN0b3JlLCBkYXRhYmFzZVxyXG4gICAgICogQHBhcmFtIGluc3RhbmNlRmFjdG9yeSBTZXJ2aWNlIGZhY3RvcnkgcmVzcG9uc2libGUgZm9yIGNyZWF0aW5nIHRoZSBwdWJsaWMgaW50ZXJmYWNlXHJcbiAgICAgKiBAcGFyYW0gdHlwZSB3aGVodGVyIHRoZSBzZXJ2aWNlIHByb3ZpZGVkIGJ5IHRoZSBjb21wb25lbnQgaXMgcHVibGljIG9yIHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gQ29tcG9uZW50KG5hbWUsIGluc3RhbmNlRmFjdG9yeSwgdHlwZSkge1xyXG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XHJcbiAgICAgICAgdGhpcy5pbnN0YW5jZUZhY3RvcnkgPSBpbnN0YW5jZUZhY3Rvcnk7XHJcbiAgICAgICAgdGhpcy50eXBlID0gdHlwZTtcclxuICAgICAgICB0aGlzLm11bHRpcGxlSW5zdGFuY2VzID0gZmFsc2U7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogUHJvcGVydGllcyB0byBiZSBhZGRlZCB0byB0aGUgc2VydmljZSBuYW1lc3BhY2VcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLnNlcnZpY2VQcm9wcyA9IHt9O1xyXG4gICAgICAgIHRoaXMuaW5zdGFudGlhdGlvbk1vZGUgPSBcIkxBWllcIiAvKiBMQVpZICovO1xyXG4gICAgfVxyXG4gICAgQ29tcG9uZW50LnByb3RvdHlwZS5zZXRJbnN0YW50aWF0aW9uTW9kZSA9IGZ1bmN0aW9uIChtb2RlKSB7XHJcbiAgICAgICAgdGhpcy5pbnN0YW50aWF0aW9uTW9kZSA9IG1vZGU7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9O1xyXG4gICAgQ29tcG9uZW50LnByb3RvdHlwZS5zZXRNdWx0aXBsZUluc3RhbmNlcyA9IGZ1bmN0aW9uIChtdWx0aXBsZUluc3RhbmNlcykge1xyXG4gICAgICAgIHRoaXMubXVsdGlwbGVJbnN0YW5jZXMgPSBtdWx0aXBsZUluc3RhbmNlcztcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH07XHJcbiAgICBDb21wb25lbnQucHJvdG90eXBlLnNldFNlcnZpY2VQcm9wcyA9IGZ1bmN0aW9uIChwcm9wcykge1xyXG4gICAgICAgIHRoaXMuc2VydmljZVByb3BzID0gcHJvcHM7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIENvbXBvbmVudDtcclxufSgpKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnZhciBERUZBVUxUX0VOVFJZX05BTUUgPSAnW0RFRkFVTFRdJztcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBQcm92aWRlciBmb3IgaW5zdGFuY2UgZm9yIHNlcnZpY2UgbmFtZSBULCBlLmcuICdhdXRoJywgJ2F1dGgtaW50ZXJuYWwnXHJcbiAqIE5hbWVTZXJ2aWNlTWFwcGluZ1tUXSBpcyBhbiBhbGlhcyBmb3IgdGhlIHR5cGUgb2YgdGhlIGluc3RhbmNlXHJcbiAqL1xyXG52YXIgUHJvdmlkZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBQcm92aWRlcihuYW1lLCBjb250YWluZXIpIHtcclxuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyID0gY29udGFpbmVyO1xyXG4gICAgICAgIHRoaXMuY29tcG9uZW50ID0gbnVsbDtcclxuICAgICAgICB0aGlzLmluc3RhbmNlcyA9IG5ldyBNYXAoKTtcclxuICAgICAgICB0aGlzLmluc3RhbmNlc0RlZmVycmVkID0gbmV3IE1hcCgpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0gaWRlbnRpZmllciBBIHByb3ZpZGVyIGNhbiBwcm92aWRlIG11bGl0cGxlIGluc3RhbmNlcyBvZiBhIHNlcnZpY2VcclxuICAgICAqIGlmIHRoaXMuY29tcG9uZW50Lm11bHRpcGxlSW5zdGFuY2VzIGlzIHRydWUuXHJcbiAgICAgKi9cclxuICAgIFByb3ZpZGVyLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoaWRlbnRpZmllcikge1xyXG4gICAgICAgIGlmIChpZGVudGlmaWVyID09PSB2b2lkIDApIHsgaWRlbnRpZmllciA9IERFRkFVTFRfRU5UUllfTkFNRTsgfVxyXG4gICAgICAgIC8vIGlmIG11bHRpcGxlSW5zdGFuY2VzIGlzIG5vdCBzdXBwb3J0ZWQsIHVzZSB0aGUgZGVmYXVsdCBuYW1lXHJcbiAgICAgICAgdmFyIG5vcm1hbGl6ZWRJZGVudGlmaWVyID0gdGhpcy5ub3JtYWxpemVJbnN0YW5jZUlkZW50aWZpZXIoaWRlbnRpZmllcik7XHJcbiAgICAgICAgaWYgKCF0aGlzLmluc3RhbmNlc0RlZmVycmVkLmhhcyhub3JtYWxpemVkSWRlbnRpZmllcikpIHtcclxuICAgICAgICAgICAgdmFyIGRlZmVycmVkID0gbmV3IHV0aWwuRGVmZXJyZWQoKTtcclxuICAgICAgICAgICAgdGhpcy5pbnN0YW5jZXNEZWZlcnJlZC5zZXQobm9ybWFsaXplZElkZW50aWZpZXIsIGRlZmVycmVkKTtcclxuICAgICAgICAgICAgLy8gSWYgdGhlIHNlcnZpY2UgaW5zdGFuY2UgaXMgYXZhaWxhYmxlLCByZXNvbHZlIHRoZSBwcm9taXNlIHdpdGggaXQgaW1tZWRpYXRlbHlcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIHZhciBpbnN0YW5jZSA9IHRoaXMuZ2V0T3JJbml0aWFsaXplU2VydmljZShub3JtYWxpemVkSWRlbnRpZmllcik7XHJcbiAgICAgICAgICAgICAgICBpZiAoaW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKGluc3RhbmNlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgLy8gd2hlbiB0aGUgaW5zdGFuY2UgZmFjdG9yeSB0aHJvd3MgYW4gZXhjZXB0aW9uIGR1cmluZyBnZXQoKSwgaXQgc2hvdWxkIG5vdCBjYXVzZVxyXG4gICAgICAgICAgICAgICAgLy8gYSBmYXRhbCBlcnJvci4gV2UganVzdCByZXR1cm4gdGhlIHVucmVzb2x2ZWQgcHJvbWlzZSBpbiB0aGlzIGNhc2UuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5zdGFuY2VzRGVmZXJyZWQuZ2V0KG5vcm1hbGl6ZWRJZGVudGlmaWVyKS5wcm9taXNlO1xyXG4gICAgfTtcclxuICAgIFByb3ZpZGVyLnByb3RvdHlwZS5nZXRJbW1lZGlhdGUgPSBmdW5jdGlvbiAob3B0aW9ucykge1xyXG4gICAgICAgIHZhciBfYSA9IHRzbGliLl9fYXNzaWduKHsgaWRlbnRpZmllcjogREVGQVVMVF9FTlRSWV9OQU1FLCBvcHRpb25hbDogZmFsc2UgfSwgb3B0aW9ucyksIGlkZW50aWZpZXIgPSBfYS5pZGVudGlmaWVyLCBvcHRpb25hbCA9IF9hLm9wdGlvbmFsO1xyXG4gICAgICAgIC8vIGlmIG11bHRpcGxlSW5zdGFuY2VzIGlzIG5vdCBzdXBwb3J0ZWQsIHVzZSB0aGUgZGVmYXVsdCBuYW1lXHJcbiAgICAgICAgdmFyIG5vcm1hbGl6ZWRJZGVudGlmaWVyID0gdGhpcy5ub3JtYWxpemVJbnN0YW5jZUlkZW50aWZpZXIoaWRlbnRpZmllcik7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgdmFyIGluc3RhbmNlID0gdGhpcy5nZXRPckluaXRpYWxpemVTZXJ2aWNlKG5vcm1hbGl6ZWRJZGVudGlmaWVyKTtcclxuICAgICAgICAgICAgaWYgKCFpbnN0YW5jZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbmFsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBFcnJvcihcIlNlcnZpY2UgXCIgKyB0aGlzLm5hbWUgKyBcIiBpcyBub3QgYXZhaWxhYmxlXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBpbnN0YW5jZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgaWYgKG9wdGlvbmFsKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRocm93IGU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgUHJvdmlkZXIucHJvdG90eXBlLmdldENvbXBvbmVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jb21wb25lbnQ7XHJcbiAgICB9O1xyXG4gICAgUHJvdmlkZXIucHJvdG90eXBlLnNldENvbXBvbmVudCA9IGZ1bmN0aW9uIChjb21wb25lbnQpIHtcclxuICAgICAgICB2YXIgZV8xLCBfYTtcclxuICAgICAgICBpZiAoY29tcG9uZW50Lm5hbWUgIT09IHRoaXMubmFtZSkge1xyXG4gICAgICAgICAgICB0aHJvdyBFcnJvcihcIk1pc21hdGNoaW5nIENvbXBvbmVudCBcIiArIGNvbXBvbmVudC5uYW1lICsgXCIgZm9yIFByb3ZpZGVyIFwiICsgdGhpcy5uYW1lICsgXCIuXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5jb21wb25lbnQpIHtcclxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoXCJDb21wb25lbnQgZm9yIFwiICsgdGhpcy5uYW1lICsgXCIgaGFzIGFscmVhZHkgYmVlbiBwcm92aWRlZFwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jb21wb25lbnQgPSBjb21wb25lbnQ7XHJcbiAgICAgICAgLy8gaWYgdGhlIHNlcnZpY2UgaXMgZWFnZXIsIGluaXRpYWxpemUgdGhlIGRlZmF1bHQgaW5zdGFuY2VcclxuICAgICAgICBpZiAoaXNDb21wb25lbnRFYWdlcihjb21wb25lbnQpKSB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmdldE9ySW5pdGlhbGl6ZVNlcnZpY2UoREVGQVVMVF9FTlRSWV9OQU1FKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgLy8gd2hlbiB0aGUgaW5zdGFuY2UgZmFjdG9yeSBmb3IgYW4gZWFnZXIgQ29tcG9uZW50IHRocm93cyBhbiBleGNlcHRpb24gZHVyaW5nIHRoZSBlYWdlclxyXG4gICAgICAgICAgICAgICAgLy8gaW5pdGlhbGl6YXRpb24sIGl0IHNob3VsZCBub3QgY2F1c2UgYSBmYXRhbCBlcnJvci5cclxuICAgICAgICAgICAgICAgIC8vIFRPRE86IEludmVzdGlnYXRlIGlmIHdlIG5lZWQgdG8gbWFrZSBpdCBjb25maWd1cmFibGUsIGJlY2F1c2Ugc29tZSBjb21wb25lbnQgbWF5IHdhbnQgdG8gY2F1c2VcclxuICAgICAgICAgICAgICAgIC8vIGEgZmF0YWwgZXJyb3IgaW4gdGhpcyBjYXNlP1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIC8vIENyZWF0ZSBzZXJ2aWNlIGluc3RhbmNlcyBmb3IgdGhlIHBlbmRpbmcgcHJvbWlzZXMgYW5kIHJlc29sdmUgdGhlbVxyXG4gICAgICAgICAgICAvLyBOT1RFOiBpZiB0aGlzLm11bHRpcGxlSW5zdGFuY2VzIGlzIGZhbHNlLCBvbmx5IHRoZSBkZWZhdWx0IGluc3RhbmNlIHdpbGwgYmUgY3JlYXRlZFxyXG4gICAgICAgICAgICAvLyBhbmQgYWxsIHByb21pc2VzIHdpdGggcmVzb2x2ZSB3aXRoIGl0IHJlZ2FyZGxlc3Mgb2YgdGhlIGlkZW50aWZpZXIuXHJcbiAgICAgICAgICAgIGZvciAodmFyIF9iID0gdHNsaWIuX192YWx1ZXModGhpcy5pbnN0YW5jZXNEZWZlcnJlZC5lbnRyaWVzKCkpLCBfYyA9IF9iLm5leHQoKTsgIV9jLmRvbmU7IF9jID0gX2IubmV4dCgpKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgX2QgPSB0c2xpYi5fX3JlYWQoX2MudmFsdWUsIDIpLCBpbnN0YW5jZUlkZW50aWZpZXIgPSBfZFswXSwgaW5zdGFuY2VEZWZlcnJlZCA9IF9kWzFdO1xyXG4gICAgICAgICAgICAgICAgdmFyIG5vcm1hbGl6ZWRJZGVudGlmaWVyID0gdGhpcy5ub3JtYWxpemVJbnN0YW5jZUlkZW50aWZpZXIoaW5zdGFuY2VJZGVudGlmaWVyKTtcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gYGdldE9ySW5pdGlhbGl6ZVNlcnZpY2UoKWAgc2hvdWxkIGFsd2F5cyByZXR1cm4gYSB2YWxpZCBpbnN0YW5jZSBzaW5jZSBhIGNvbXBvbmVudCBpcyBndWFyYW50ZWVkLiB1c2UgISB0byBtYWtlIHR5cGVzY3JpcHQgaGFwcHkuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGluc3RhbmNlID0gdGhpcy5nZXRPckluaXRpYWxpemVTZXJ2aWNlKG5vcm1hbGl6ZWRJZGVudGlmaWVyKTtcclxuICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZURlZmVycmVkLnJlc29sdmUoaW5zdGFuY2UpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyB3aGVuIHRoZSBpbnN0YW5jZSBmYWN0b3J5IHRocm93cyBhbiBleGNlcHRpb24sIGl0IHNob3VsZCBub3QgY2F1c2VcclxuICAgICAgICAgICAgICAgICAgICAvLyBhIGZhdGFsIGVycm9yLiBXZSBqdXN0IGxlYXZlIHRoZSBwcm9taXNlIHVucmVzb2x2ZWQuXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH1cclxuICAgICAgICBmaW5hbGx5IHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGlmIChfYyAmJiAhX2MuZG9uZSAmJiAoX2EgPSBfYi5yZXR1cm4pKSBfYS5jYWxsKF9iKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFByb3ZpZGVyLnByb3RvdHlwZS5jbGVhckluc3RhbmNlID0gZnVuY3Rpb24gKGlkZW50aWZpZXIpIHtcclxuICAgICAgICBpZiAoaWRlbnRpZmllciA9PT0gdm9pZCAwKSB7IGlkZW50aWZpZXIgPSBERUZBVUxUX0VOVFJZX05BTUU7IH1cclxuICAgICAgICB0aGlzLmluc3RhbmNlc0RlZmVycmVkLmRlbGV0ZShpZGVudGlmaWVyKTtcclxuICAgICAgICB0aGlzLmluc3RhbmNlcy5kZWxldGUoaWRlbnRpZmllcik7XHJcbiAgICB9O1xyXG4gICAgLy8gYXBwLmRlbGV0ZSgpIHdpbGwgY2FsbCB0aGlzIG1ldGhvZCBvbiBldmVyeSBwcm92aWRlciB0byBkZWxldGUgdGhlIHNlcnZpY2VzXHJcbiAgICAvLyBUT0RPOiBzaG91bGQgd2UgbWFyayB0aGUgcHJvdmlkZXIgYXMgZGVsZXRlZD9cclxuICAgIFByb3ZpZGVyLnByb3RvdHlwZS5kZWxldGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRzbGliLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgc2VydmljZXM7XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYi5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlcnZpY2VzID0gQXJyYXkuZnJvbSh0aGlzLmluc3RhbmNlcy52YWx1ZXMoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIFByb21pc2UuYWxsKHNlcnZpY2VzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZpbHRlcihmdW5jdGlvbiAoc2VydmljZSkgeyByZXR1cm4gJ0lOVEVSTkFMJyBpbiBzZXJ2aWNlOyB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcChmdW5jdGlvbiAoc2VydmljZSkgeyByZXR1cm4gc2VydmljZS5JTlRFUk5BTC5kZWxldGUoKTsgfSkpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBQcm92aWRlci5wcm90b3R5cGUuaXNDb21wb25lbnRTZXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY29tcG9uZW50ICE9IG51bGw7XHJcbiAgICB9O1xyXG4gICAgUHJvdmlkZXIucHJvdG90eXBlLmdldE9ySW5pdGlhbGl6ZVNlcnZpY2UgPSBmdW5jdGlvbiAoaWRlbnRpZmllcikge1xyXG4gICAgICAgIHZhciBpbnN0YW5jZSA9IHRoaXMuaW5zdGFuY2VzLmdldChpZGVudGlmaWVyKTtcclxuICAgICAgICBpZiAoIWluc3RhbmNlICYmIHRoaXMuY29tcG9uZW50KSB7XHJcbiAgICAgICAgICAgIGluc3RhbmNlID0gdGhpcy5jb21wb25lbnQuaW5zdGFuY2VGYWN0b3J5KHRoaXMuY29udGFpbmVyLCBub3JtYWxpemVJZGVudGlmaWVyRm9yRmFjdG9yeShpZGVudGlmaWVyKSk7XHJcbiAgICAgICAgICAgIHRoaXMuaW5zdGFuY2VzLnNldChpZGVudGlmaWVyLCBpbnN0YW5jZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBpbnN0YW5jZSB8fCBudWxsO1xyXG4gICAgfTtcclxuICAgIFByb3ZpZGVyLnByb3RvdHlwZS5ub3JtYWxpemVJbnN0YW5jZUlkZW50aWZpZXIgPSBmdW5jdGlvbiAoaWRlbnRpZmllcikge1xyXG4gICAgICAgIGlmICh0aGlzLmNvbXBvbmVudCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb21wb25lbnQubXVsdGlwbGVJbnN0YW5jZXMgPyBpZGVudGlmaWVyIDogREVGQVVMVF9FTlRSWV9OQU1FO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIGlkZW50aWZpZXI7IC8vIGFzc3VtZSBtdWx0aXBsZSBpbnN0YW5jZXMgYXJlIHN1cHBvcnRlZCBiZWZvcmUgdGhlIGNvbXBvbmVudCBpcyBwcm92aWRlZC5cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFByb3ZpZGVyO1xyXG59KCkpO1xyXG4vLyB1bmRlZmluZWQgc2hvdWxkIGJlIHBhc3NlZCB0byB0aGUgc2VydmljZSBmYWN0b3J5IGZvciB0aGUgZGVmYXVsdCBpbnN0YW5jZVxyXG5mdW5jdGlvbiBub3JtYWxpemVJZGVudGlmaWVyRm9yRmFjdG9yeShpZGVudGlmaWVyKSB7XHJcbiAgICByZXR1cm4gaWRlbnRpZmllciA9PT0gREVGQVVMVF9FTlRSWV9OQU1FID8gdW5kZWZpbmVkIDogaWRlbnRpZmllcjtcclxufVxyXG5mdW5jdGlvbiBpc0NvbXBvbmVudEVhZ2VyKGNvbXBvbmVudCkge1xyXG4gICAgcmV0dXJuIGNvbXBvbmVudC5pbnN0YW50aWF0aW9uTW9kZSA9PT0gXCJFQUdFUlwiIC8qIEVBR0VSICovO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQ29tcG9uZW50Q29udGFpbmVyIHRoYXQgcHJvdmlkZXMgUHJvdmlkZXJzIGZvciBzZXJ2aWNlIG5hbWUgVCwgZS5nLiBgYXV0aGAsIGBhdXRoLWludGVybmFsYFxyXG4gKi9cclxudmFyIENvbXBvbmVudENvbnRhaW5lciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIENvbXBvbmVudENvbnRhaW5lcihuYW1lKSB7XHJcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcclxuICAgICAgICB0aGlzLnByb3ZpZGVycyA9IG5ldyBNYXAoKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBjb21wb25lbnQgQ29tcG9uZW50IGJlaW5nIGFkZGVkXHJcbiAgICAgKiBAcGFyYW0gb3ZlcndyaXRlIFdoZW4gYSBjb21wb25lbnQgd2l0aCB0aGUgc2FtZSBuYW1lIGhhcyBhbHJlYWR5IGJlZW4gcmVnaXN0ZXJlZCxcclxuICAgICAqIGlmIG92ZXJ3cml0ZSBpcyB0cnVlOiBvdmVyd3JpdGUgdGhlIGV4aXN0aW5nIGNvbXBvbmVudCB3aXRoIHRoZSBuZXcgY29tcG9uZW50IGFuZCBjcmVhdGUgYSBuZXdcclxuICAgICAqIHByb3ZpZGVyIHdpdGggdGhlIG5ldyBjb21wb25lbnQuIEl0IGNhbiBiZSB1c2VmdWwgaW4gdGVzdHMgd2hlcmUgeW91IHdhbnQgdG8gdXNlIGRpZmZlcmVudCBtb2Nrc1xyXG4gICAgICogZm9yIGRpZmZlcmVudCB0ZXN0cy5cclxuICAgICAqIGlmIG92ZXJ3cml0ZSBpcyBmYWxzZTogdGhyb3cgYW4gZXhjZXB0aW9uXHJcbiAgICAgKi9cclxuICAgIENvbXBvbmVudENvbnRhaW5lci5wcm90b3R5cGUuYWRkQ29tcG9uZW50ID0gZnVuY3Rpb24gKGNvbXBvbmVudCkge1xyXG4gICAgICAgIHZhciBwcm92aWRlciA9IHRoaXMuZ2V0UHJvdmlkZXIoY29tcG9uZW50Lm5hbWUpO1xyXG4gICAgICAgIGlmIChwcm92aWRlci5pc0NvbXBvbmVudFNldCgpKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNvbXBvbmVudCBcIiArIGNvbXBvbmVudC5uYW1lICsgXCIgaGFzIGFscmVhZHkgYmVlbiByZWdpc3RlcmVkIHdpdGggXCIgKyB0aGlzLm5hbWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwcm92aWRlci5zZXRDb21wb25lbnQoY29tcG9uZW50KTtcclxuICAgIH07XHJcbiAgICBDb21wb25lbnRDb250YWluZXIucHJvdG90eXBlLmFkZE9yT3ZlcndyaXRlQ29tcG9uZW50ID0gZnVuY3Rpb24gKGNvbXBvbmVudCkge1xyXG4gICAgICAgIHZhciBwcm92aWRlciA9IHRoaXMuZ2V0UHJvdmlkZXIoY29tcG9uZW50Lm5hbWUpO1xyXG4gICAgICAgIGlmIChwcm92aWRlci5pc0NvbXBvbmVudFNldCgpKSB7XHJcbiAgICAgICAgICAgIC8vIGRlbGV0ZSB0aGUgZXhpc3RpbmcgcHJvdmlkZXIgZnJvbSB0aGUgY29udGFpbmVyLCBzbyB3ZSBjYW4gcmVnaXN0ZXIgdGhlIG5ldyBjb21wb25lbnRcclxuICAgICAgICAgICAgdGhpcy5wcm92aWRlcnMuZGVsZXRlKGNvbXBvbmVudC5uYW1lKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5hZGRDb21wb25lbnQoY29tcG9uZW50KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIGdldFByb3ZpZGVyIHByb3ZpZGVzIGEgdHlwZSBzYWZlIGludGVyZmFjZSB3aGVyZSBpdCBjYW4gb25seSBiZSBjYWxsZWQgd2l0aCBhIGZpZWxkIG5hbWVcclxuICAgICAqIHByZXNlbnQgaW4gTmFtZVNlcnZpY2VNYXBwaW5nIGludGVyZmFjZS5cclxuICAgICAqXHJcbiAgICAgKiBGaXJlYmFzZSBTREtzIHByb3ZpZGluZyBzZXJ2aWNlcyBzaG91bGQgZXh0ZW5kIE5hbWVTZXJ2aWNlTWFwcGluZyBpbnRlcmZhY2UgdG8gcmVnaXN0ZXJcclxuICAgICAqIHRoZW1zZWx2ZXMuXHJcbiAgICAgKi9cclxuICAgIENvbXBvbmVudENvbnRhaW5lci5wcm90b3R5cGUuZ2V0UHJvdmlkZXIgPSBmdW5jdGlvbiAobmFtZSkge1xyXG4gICAgICAgIGlmICh0aGlzLnByb3ZpZGVycy5oYXMobmFtZSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvdmlkZXJzLmdldChuYW1lKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gY3JlYXRlIGEgUHJvdmlkZXIgZm9yIGEgc2VydmljZSB0aGF0IGhhc24ndCByZWdpc3RlcmVkIHdpdGggRmlyZWJhc2VcclxuICAgICAgICB2YXIgcHJvdmlkZXIgPSBuZXcgUHJvdmlkZXIobmFtZSwgdGhpcyk7XHJcbiAgICAgICAgdGhpcy5wcm92aWRlcnMuc2V0KG5hbWUsIHByb3ZpZGVyKTtcclxuICAgICAgICByZXR1cm4gcHJvdmlkZXI7XHJcbiAgICB9O1xyXG4gICAgQ29tcG9uZW50Q29udGFpbmVyLnByb3RvdHlwZS5nZXRQcm92aWRlcnMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5wcm92aWRlcnMudmFsdWVzKCkpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBDb21wb25lbnRDb250YWluZXI7XHJcbn0oKSk7XG5cbmV4cG9ydHMuQ29tcG9uZW50ID0gQ29tcG9uZW50O1xuZXhwb3J0cy5Db21wb25lbnRDb250YWluZXIgPSBDb21wb25lbnRDb250YWluZXI7XG5leHBvcnRzLlByb3ZpZGVyID0gUHJvdmlkZXI7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5janMuanMubWFwXG4iLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG5cbnZhciB0c2xpYiA9IHJlcXVpcmUoJ3RzbGliJyk7XG52YXIgdXRpbCA9IHJlcXVpcmUoJ0BmaXJlYmFzZS91dGlsJyk7XG52YXIgY29tcG9uZW50ID0gcmVxdWlyZSgnQGZpcmViYXNlL2NvbXBvbmVudCcpO1xudmFyIGxvZ2dlciQxID0gcmVxdWlyZSgnQGZpcmViYXNlL2xvZ2dlcicpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxudmFyIF9hO1xyXG52YXIgRVJST1JTID0gKF9hID0ge30sXHJcbiAgICBfYVtcIm5vLWFwcFwiIC8qIE5PX0FQUCAqL10gPSBcIk5vIEZpcmViYXNlIEFwcCAneyRhcHBOYW1lfScgaGFzIGJlZW4gY3JlYXRlZCAtIFwiICtcclxuICAgICAgICAnY2FsbCBGaXJlYmFzZSBBcHAuaW5pdGlhbGl6ZUFwcCgpJyxcclxuICAgIF9hW1wiYmFkLWFwcC1uYW1lXCIgLyogQkFEX0FQUF9OQU1FICovXSA9IFwiSWxsZWdhbCBBcHAgbmFtZTogJ3skYXBwTmFtZX1cIixcclxuICAgIF9hW1wiZHVwbGljYXRlLWFwcFwiIC8qIERVUExJQ0FURV9BUFAgKi9dID0gXCJGaXJlYmFzZSBBcHAgbmFtZWQgJ3skYXBwTmFtZX0nIGFscmVhZHkgZXhpc3RzXCIsXHJcbiAgICBfYVtcImFwcC1kZWxldGVkXCIgLyogQVBQX0RFTEVURUQgKi9dID0gXCJGaXJlYmFzZSBBcHAgbmFtZWQgJ3skYXBwTmFtZX0nIGFscmVhZHkgZGVsZXRlZFwiLFxyXG4gICAgX2FbXCJpbnZhbGlkLWFwcC1hcmd1bWVudFwiIC8qIElOVkFMSURfQVBQX0FSR1VNRU5UICovXSA9ICdmaXJlYmFzZS57JGFwcE5hbWV9KCkgdGFrZXMgZWl0aGVyIG5vIGFyZ3VtZW50IG9yIGEgJyArXHJcbiAgICAgICAgJ0ZpcmViYXNlIEFwcCBpbnN0YW5jZS4nLFxyXG4gICAgX2EpO1xyXG52YXIgRVJST1JfRkFDVE9SWSA9IG5ldyB1dGlsLkVycm9yRmFjdG9yeSgnYXBwJywgJ0ZpcmViYXNlJywgRVJST1JTKTtcblxudmFyIG5hbWUgPSBcIkBmaXJlYmFzZS9hcHBcIjtcbnZhciB2ZXJzaW9uID0gXCIwLjUuMFwiO1xuXG52YXIgbmFtZSQxID0gXCJAZmlyZWJhc2UvYW5hbHl0aWNzXCI7XG5cbnZhciBuYW1lJDIgPSBcIkBmaXJlYmFzZS9hdXRoXCI7XG5cbnZhciBuYW1lJDMgPSBcIkBmaXJlYmFzZS9kYXRhYmFzZVwiO1xuXG52YXIgbmFtZSQ0ID0gXCJAZmlyZWJhc2UvZnVuY3Rpb25zXCI7XG5cbnZhciBuYW1lJDUgPSBcIkBmaXJlYmFzZS9pbnN0YWxsYXRpb25zXCI7XG5cbnZhciBuYW1lJDYgPSBcIkBmaXJlYmFzZS9tZXNzYWdpbmdcIjtcblxudmFyIG5hbWUkNyA9IFwiQGZpcmViYXNlL3BlcmZvcm1hbmNlXCI7XG5cbnZhciBuYW1lJDggPSBcIkBmaXJlYmFzZS9yZW1vdGUtY29uZmlnXCI7XG5cbnZhciBuYW1lJDkgPSBcIkBmaXJlYmFzZS9zdG9yYWdlXCI7XG5cbnZhciBuYW1lJGEgPSBcIkBmaXJlYmFzZS9maXJlc3RvcmVcIjtcblxudmFyIG5hbWUkYiA9IFwiZmlyZWJhc2Utd3JhcHBlclwiO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxudmFyIF9hJDE7XHJcbnZhciBERUZBVUxUX0VOVFJZX05BTUUgPSAnW0RFRkFVTFRdJztcclxudmFyIFBMQVRGT1JNX0xPR19TVFJJTkcgPSAoX2EkMSA9IHt9LFxyXG4gICAgX2EkMVtuYW1lXSA9ICdmaXJlLWNvcmUnLFxyXG4gICAgX2EkMVtuYW1lJDFdID0gJ2ZpcmUtYW5hbHl0aWNzJyxcclxuICAgIF9hJDFbbmFtZSQyXSA9ICdmaXJlLWF1dGgnLFxyXG4gICAgX2EkMVtuYW1lJDNdID0gJ2ZpcmUtcnRkYicsXHJcbiAgICBfYSQxW25hbWUkNF0gPSAnZmlyZS1mbicsXHJcbiAgICBfYSQxW25hbWUkNV0gPSAnZmlyZS1paWQnLFxyXG4gICAgX2EkMVtuYW1lJDZdID0gJ2ZpcmUtZmNtJyxcclxuICAgIF9hJDFbbmFtZSQ3XSA9ICdmaXJlLXBlcmYnLFxyXG4gICAgX2EkMVtuYW1lJDhdID0gJ2ZpcmUtcmMnLFxyXG4gICAgX2EkMVtuYW1lJDldID0gJ2ZpcmUtZ2NzJyxcclxuICAgIF9hJDFbbmFtZSRhXSA9ICdmaXJlLWZzdCcsXHJcbiAgICBfYSQxWydmaXJlLWpzJ10gPSAnZmlyZS1qcycsXHJcbiAgICBfYSQxW25hbWUkYl0gPSAnZmlyZS1qcy1hbGwnLFxyXG4gICAgX2EkMSk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG52YXIgbG9nZ2VyID0gbmV3IGxvZ2dlciQxLkxvZ2dlcignQGZpcmViYXNlL2FwcCcpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEdsb2JhbCBjb250ZXh0IG9iamVjdCBmb3IgYSBjb2xsZWN0aW9uIG9mIHNlcnZpY2VzIHVzaW5nXHJcbiAqIGEgc2hhcmVkIGF1dGhlbnRpY2F0aW9uIHN0YXRlLlxyXG4gKi9cclxudmFyIEZpcmViYXNlQXBwSW1wbCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEZpcmViYXNlQXBwSW1wbChvcHRpb25zLCBjb25maWcsIGZpcmViYXNlXykge1xyXG4gICAgICAgIHZhciBlXzEsIF9hO1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5maXJlYmFzZV8gPSBmaXJlYmFzZV87XHJcbiAgICAgICAgdGhpcy5pc0RlbGV0ZWRfID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5uYW1lXyA9IGNvbmZpZy5uYW1lO1xyXG4gICAgICAgIHRoaXMuYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkXyA9XHJcbiAgICAgICAgICAgIGNvbmZpZy5hdXRvbWF0aWNEYXRhQ29sbGVjdGlvbkVuYWJsZWQgfHwgZmFsc2U7XHJcbiAgICAgICAgdGhpcy5vcHRpb25zXyA9IHV0aWwuZGVlcENvcHkob3B0aW9ucyk7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIgPSBuZXcgY29tcG9uZW50LkNvbXBvbmVudENvbnRhaW5lcihjb25maWcubmFtZSk7XHJcbiAgICAgICAgLy8gYWRkIGl0c2VsZiB0byBjb250YWluZXJcclxuICAgICAgICB0aGlzLl9hZGRDb21wb25lbnQobmV3IGNvbXBvbmVudC5Db21wb25lbnQoJ2FwcCcsIGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzOyB9LCBcIlBVQkxJQ1wiIC8qIFBVQkxJQyAqLykpO1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIC8vIHBvcHVsYXRlIENvbXBvbmVudENvbnRhaW5lciB3aXRoIGV4aXN0aW5nIGNvbXBvbmVudHNcclxuICAgICAgICAgICAgZm9yICh2YXIgX2IgPSB0c2xpYi5fX3ZhbHVlcyh0aGlzLmZpcmViYXNlXy5JTlRFUk5BTC5jb21wb25lbnRzLnZhbHVlcygpKSwgX2MgPSBfYi5uZXh0KCk7ICFfYy5kb25lOyBfYyA9IF9iLm5leHQoKSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGNvbXBvbmVudCQxID0gX2MudmFsdWU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9hZGRDb21wb25lbnQoY29tcG9uZW50JDEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlXzFfMSkgeyBlXzEgPSB7IGVycm9yOiBlXzFfMSB9OyB9XHJcbiAgICAgICAgZmluYWxseSB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoX2MgJiYgIV9jLmRvbmUgJiYgKF9hID0gX2IucmV0dXJuKSkgX2EuY2FsbChfYik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZmluYWxseSB7IGlmIChlXzEpIHRocm93IGVfMS5lcnJvcjsgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShGaXJlYmFzZUFwcEltcGwucHJvdG90eXBlLCBcImF1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZFwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2hlY2tEZXN0cm95ZWRfKCk7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmF1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZF87XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWwpIHtcclxuICAgICAgICAgICAgdGhpcy5jaGVja0Rlc3Ryb3llZF8oKTtcclxuICAgICAgICAgICAgdGhpcy5hdXRvbWF0aWNEYXRhQ29sbGVjdGlvbkVuYWJsZWRfID0gdmFsO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEZpcmViYXNlQXBwSW1wbC5wcm90b3R5cGUsIFwibmFtZVwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2hlY2tEZXN0cm95ZWRfKCk7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm5hbWVfO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEZpcmViYXNlQXBwSW1wbC5wcm90b3R5cGUsIFwib3B0aW9uc1wiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2hlY2tEZXN0cm95ZWRfKCk7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm9wdGlvbnNfO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgRmlyZWJhc2VBcHBJbXBsLnByb3RvdHlwZS5kZWxldGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcclxuICAgICAgICAgICAgX3RoaXMuY2hlY2tEZXN0cm95ZWRfKCk7XHJcbiAgICAgICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIF90aGlzLmZpcmViYXNlXy5JTlRFUk5BTC5yZW1vdmVBcHAoX3RoaXMubmFtZV8pO1xyXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwoX3RoaXMuY29udGFpbmVyLmdldFByb3ZpZGVycygpLm1hcChmdW5jdGlvbiAocHJvdmlkZXIpIHsgcmV0dXJuIHByb3ZpZGVyLmRlbGV0ZSgpOyB9KSk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBfdGhpcy5pc0RlbGV0ZWRfID0gdHJ1ZTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJldHVybiBhIHNlcnZpY2UgaW5zdGFuY2UgYXNzb2NpYXRlZCB3aXRoIHRoaXMgYXBwIChjcmVhdGluZyBpdFxyXG4gICAgICogb24gZGVtYW5kKSwgaWRlbnRpZmllZCBieSB0aGUgcGFzc2VkIGluc3RhbmNlSWRlbnRpZmllci5cclxuICAgICAqXHJcbiAgICAgKiBOT1RFOiBDdXJyZW50bHkgc3RvcmFnZSBhbmQgZnVuY3Rpb25zIGFyZSB0aGUgb25seSBvbmVzIHRoYXQgYXJlIGxldmVyYWdpbmcgdGhpc1xyXG4gICAgICogZnVuY3Rpb25hbGl0eS4gVGhleSBpbnZva2UgaXQgYnkgY2FsbGluZzpcclxuICAgICAqXHJcbiAgICAgKiBgYGBqYXZhc2NyaXB0XHJcbiAgICAgKiBmaXJlYmFzZS5hcHAoKS5zdG9yYWdlKCdTVE9SQUdFIEJVQ0tFVCBJRCcpXHJcbiAgICAgKiBgYGBcclxuICAgICAqXHJcbiAgICAgKiBUaGUgc2VydmljZSBuYW1lIGlzIHBhc3NlZCB0byB0aGlzIGFscmVhZHlcclxuICAgICAqIEBpbnRlcm5hbFxyXG4gICAgICovXHJcbiAgICBGaXJlYmFzZUFwcEltcGwucHJvdG90eXBlLl9nZXRTZXJ2aWNlID0gZnVuY3Rpb24gKG5hbWUsIGluc3RhbmNlSWRlbnRpZmllcikge1xyXG4gICAgICAgIGlmIChpbnN0YW5jZUlkZW50aWZpZXIgPT09IHZvaWQgMCkgeyBpbnN0YW5jZUlkZW50aWZpZXIgPSBERUZBVUxUX0VOVFJZX05BTUU7IH1cclxuICAgICAgICB0aGlzLmNoZWNrRGVzdHJveWVkXygpO1xyXG4gICAgICAgIC8vIGdldEltbWVkaWF0ZSB3aWxsIGFsd2F5cyBzdWNjZWVkIGJlY2F1c2UgX2dldFNlcnZpY2UgaXMgb25seSBjYWxsZWQgZm9yIHJlZ2lzdGVyZWQgY29tcG9uZW50cy5cclxuICAgICAgICByZXR1cm4gdGhpcy5jb250YWluZXIuZ2V0UHJvdmlkZXIobmFtZSkuZ2V0SW1tZWRpYXRlKHtcclxuICAgICAgICAgICAgaWRlbnRpZmllcjogaW5zdGFuY2VJZGVudGlmaWVyXHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZW1vdmUgYSBzZXJ2aWNlIGluc3RhbmNlIGZyb20gdGhlIGNhY2hlLCBzbyB3ZSB3aWxsIGNyZWF0ZSBhIG5ldyBpbnN0YW5jZSBmb3IgdGhpcyBzZXJ2aWNlXHJcbiAgICAgKiB3aGVuIHBlb3BsZSB0cnkgdG8gZ2V0IHRoaXMgc2VydmljZSBhZ2Fpbi5cclxuICAgICAqXHJcbiAgICAgKiBOT1RFOiBjdXJyZW50bHkgb25seSBmaXJlc3RvcmUgaXMgdXNpbmcgdGhpcyBmdW5jdGlvbmFsaXR5IHRvIHN1cHBvcnQgZmlyZXN0b3JlIHNodXRkb3duLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBuYW1lIFRoZSBzZXJ2aWNlIG5hbWVcclxuICAgICAqIEBwYXJhbSBpbnN0YW5jZUlkZW50aWZpZXIgaW5zdGFuY2UgaWRlbnRpZmllciBpbiBjYXNlIG11bHRpcGxlIGluc3RhbmNlcyBhcmUgYWxsb3dlZFxyXG4gICAgICogQGludGVybmFsXHJcbiAgICAgKi9cclxuICAgIEZpcmViYXNlQXBwSW1wbC5wcm90b3R5cGUuX3JlbW92ZVNlcnZpY2VJbnN0YW5jZSA9IGZ1bmN0aW9uIChuYW1lLCBpbnN0YW5jZUlkZW50aWZpZXIpIHtcclxuICAgICAgICBpZiAoaW5zdGFuY2VJZGVudGlmaWVyID09PSB2b2lkIDApIHsgaW5zdGFuY2VJZGVudGlmaWVyID0gREVGQVVMVF9FTlRSWV9OQU1FOyB9XHJcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuICAgICAgICB0aGlzLmNvbnRhaW5lci5nZXRQcm92aWRlcihuYW1lKS5jbGVhckluc3RhbmNlKGluc3RhbmNlSWRlbnRpZmllcik7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0gY29tcG9uZW50IHRoZSBjb21wb25lbnQgYmVpbmcgYWRkZWQgdG8gdGhpcyBhcHAncyBjb250YWluZXJcclxuICAgICAqL1xyXG4gICAgRmlyZWJhc2VBcHBJbXBsLnByb3RvdHlwZS5fYWRkQ29tcG9uZW50ID0gZnVuY3Rpb24gKGNvbXBvbmVudCkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyLmFkZENvbXBvbmVudChjb21wb25lbnQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICBsb2dnZXIuZGVidWcoXCJDb21wb25lbnQgXCIgKyBjb21wb25lbnQubmFtZSArIFwiIGZhaWxlZCB0byByZWdpc3RlciB3aXRoIEZpcmViYXNlQXBwIFwiICsgdGhpcy5uYW1lLCBlKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgRmlyZWJhc2VBcHBJbXBsLnByb3RvdHlwZS5fYWRkT3JPdmVyd3JpdGVDb21wb25lbnQgPSBmdW5jdGlvbiAoY29tcG9uZW50KSB7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIuYWRkT3JPdmVyd3JpdGVDb21wb25lbnQoY29tcG9uZW50KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFRoaXMgZnVuY3Rpb24gd2lsbCB0aHJvdyBhbiBFcnJvciBpZiB0aGUgQXBwIGhhcyBhbHJlYWR5IGJlZW4gZGVsZXRlZCAtXHJcbiAgICAgKiB1c2UgYmVmb3JlIHBlcmZvcm1pbmcgQVBJIGFjdGlvbnMgb24gdGhlIEFwcC5cclxuICAgICAqL1xyXG4gICAgRmlyZWJhc2VBcHBJbXBsLnByb3RvdHlwZS5jaGVja0Rlc3Ryb3llZF8gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNEZWxldGVkXykge1xyXG4gICAgICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImFwcC1kZWxldGVkXCIgLyogQVBQX0RFTEVURUQgKi8sIHsgYXBwTmFtZTogdGhpcy5uYW1lXyB9KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEZpcmViYXNlQXBwSW1wbDtcclxufSgpKTtcclxuLy8gUHJldmVudCBkZWFkLWNvZGUgZWxpbWluYXRpb24gb2YgdGhlc2UgbWV0aG9kcyB3L28gaW52YWxpZCBwcm9wZXJ0eVxyXG4vLyBjb3B5aW5nLlxyXG4oRmlyZWJhc2VBcHBJbXBsLnByb3RvdHlwZS5uYW1lICYmIEZpcmViYXNlQXBwSW1wbC5wcm90b3R5cGUub3B0aW9ucykgfHxcclxuICAgIEZpcmViYXNlQXBwSW1wbC5wcm90b3R5cGUuZGVsZXRlIHx8XHJcbiAgICBjb25zb2xlLmxvZygnZGMnKTtcblxudmFyIHZlcnNpb24kMSA9IFwiNy42LjBcIjtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBCZWNhdXNlIGF1dGggY2FuJ3Qgc2hhcmUgY29kZSB3aXRoIG90aGVyIGNvbXBvbmVudHMsIHdlIGF0dGFjaCB0aGUgdXRpbGl0eSBmdW5jdGlvbnNcclxuICogaW4gYW4gaW50ZXJuYWwgbmFtZXNwYWNlIHRvIHNoYXJlIGNvZGUuXHJcbiAqIFRoaXMgZnVuY3Rpb24gcmV0dXJuIGEgZmlyZWJhc2UgbmFtZXNwYWNlIG9iamVjdCB3aXRob3V0XHJcbiAqIGFueSB1dGlsaXR5IGZ1bmN0aW9ucywgc28gaXQgY2FuIGJlIHNoYXJlZCBiZXR3ZWVuIHRoZSByZWd1bGFyIGZpcmViYXNlTmFtZXNwYWNlIGFuZFxyXG4gKiB0aGUgbGl0ZSB2ZXJzaW9uLlxyXG4gKi9cclxuZnVuY3Rpb24gY3JlYXRlRmlyZWJhc2VOYW1lc3BhY2VDb3JlKGZpcmViYXNlQXBwSW1wbCkge1xyXG4gICAgdmFyIGFwcHMgPSB7fTtcclxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbiAgICB2YXIgY29tcG9uZW50cyA9IG5ldyBNYXAoKTtcclxuICAgIC8vIEEgbmFtZXNwYWNlIGlzIGEgcGxhaW4gSmF2YVNjcmlwdCBPYmplY3QuXHJcbiAgICB2YXIgbmFtZXNwYWNlID0ge1xyXG4gICAgICAgIC8vIEhhY2sgdG8gcHJldmVudCBCYWJlbCBmcm9tIG1vZGlmeWluZyB0aGUgb2JqZWN0IHJldHVybmVkXHJcbiAgICAgICAgLy8gYXMgdGhlIGZpcmViYXNlIG5hbWVzcGFjZS5cclxuICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgX19lc01vZHVsZTogdHJ1ZSxcclxuICAgICAgICBpbml0aWFsaXplQXBwOiBpbml0aWFsaXplQXBwLFxyXG4gICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICBhcHA6IGFwcCxcclxuICAgICAgICByZWdpc3RlclZlcnNpb246IHJlZ2lzdGVyVmVyc2lvbixcclxuICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgYXBwczogbnVsbCxcclxuICAgICAgICBTREtfVkVSU0lPTjogdmVyc2lvbiQxLFxyXG4gICAgICAgIElOVEVSTkFMOiB7XHJcbiAgICAgICAgICAgIHJlZ2lzdGVyQ29tcG9uZW50OiByZWdpc3RlckNvbXBvbmVudCxcclxuICAgICAgICAgICAgcmVtb3ZlQXBwOiByZW1vdmVBcHAsXHJcbiAgICAgICAgICAgIGNvbXBvbmVudHM6IGNvbXBvbmVudHMsXHJcbiAgICAgICAgICAgIHVzZUFzU2VydmljZTogdXNlQXNTZXJ2aWNlXHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8vIEluamVjdCBhIGNpcmN1bGFyIGRlZmF1bHQgZXhwb3J0IHRvIGFsbG93IEJhYmVsIHVzZXJzIHdobyB3ZXJlIHByZXZpb3VzbHlcclxuICAgIC8vIHVzaW5nOlxyXG4gICAgLy9cclxuICAgIC8vICAgaW1wb3J0IGZpcmViYXNlIGZyb20gJ2ZpcmViYXNlJztcclxuICAgIC8vICAgd2hpY2ggYmVjb21lczogdmFyIGZpcmViYXNlID0gcmVxdWlyZSgnZmlyZWJhc2UnKS5kZWZhdWx0O1xyXG4gICAgLy9cclxuICAgIC8vIGluc3RlYWQgb2ZcclxuICAgIC8vXHJcbiAgICAvLyAgIGltcG9ydCAqIGFzIGZpcmViYXNlIGZyb20gJ2ZpcmViYXNlJztcclxuICAgIC8vICAgd2hpY2ggYmVjb21lczogdmFyIGZpcmViYXNlID0gcmVxdWlyZSgnZmlyZWJhc2UnKTtcclxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbiAgICBuYW1lc3BhY2VbJ2RlZmF1bHQnXSA9IG5hbWVzcGFjZTtcclxuICAgIC8vIGZpcmViYXNlLmFwcHMgaXMgYSByZWFkLW9ubHkgZ2V0dGVyLlxyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG5hbWVzcGFjZSwgJ2FwcHMnLCB7XHJcbiAgICAgICAgZ2V0OiBnZXRBcHBzXHJcbiAgICB9KTtcclxuICAgIC8qKlxyXG4gICAgICogQ2FsbGVkIGJ5IEFwcC5kZWxldGUoKSAtIGJ1dCBiZWZvcmUgYW55IHNlcnZpY2VzIGFzc29jaWF0ZWQgd2l0aCB0aGUgQXBwXHJcbiAgICAgKiBhcmUgZGVsZXRlZC5cclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gcmVtb3ZlQXBwKG5hbWUpIHtcclxuICAgICAgICBkZWxldGUgYXBwc1tuYW1lXTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogR2V0IHRoZSBBcHAgb2JqZWN0IGZvciBhIGdpdmVuIG5hbWUgKG9yIERFRkFVTFQpLlxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBhcHAobmFtZSkge1xyXG4gICAgICAgIG5hbWUgPSBuYW1lIHx8IERFRkFVTFRfRU5UUllfTkFNRTtcclxuICAgICAgICBpZiAoIXV0aWwuY29udGFpbnMoYXBwcywgbmFtZSkpIHtcclxuICAgICAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJuby1hcHBcIiAvKiBOT19BUFAgKi8sIHsgYXBwTmFtZTogbmFtZSB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGFwcHNbbmFtZV07XHJcbiAgICB9XHJcbiAgICAvLyBAdHMtaWdub3JlXHJcbiAgICBhcHBbJ0FwcCddID0gZmlyZWJhc2VBcHBJbXBsO1xyXG4gICAgZnVuY3Rpb24gaW5pdGlhbGl6ZUFwcChvcHRpb25zLCByYXdDb25maWcpIHtcclxuICAgICAgICBpZiAocmF3Q29uZmlnID09PSB2b2lkIDApIHsgcmF3Q29uZmlnID0ge307IH1cclxuICAgICAgICBpZiAodHlwZW9mIHJhd0NvbmZpZyAhPT0gJ29iamVjdCcgfHwgcmF3Q29uZmlnID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHZhciBuYW1lXzEgPSByYXdDb25maWc7XHJcbiAgICAgICAgICAgIHJhd0NvbmZpZyA9IHsgbmFtZTogbmFtZV8xIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBjb25maWcgPSByYXdDb25maWc7XHJcbiAgICAgICAgaWYgKGNvbmZpZy5uYW1lID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgY29uZmlnLm5hbWUgPSBERUZBVUxUX0VOVFJZX05BTUU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBuYW1lID0gY29uZmlnLm5hbWU7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBuYW1lICE9PSAnc3RyaW5nJyB8fCAhbmFtZSkge1xyXG4gICAgICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImJhZC1hcHAtbmFtZVwiIC8qIEJBRF9BUFBfTkFNRSAqLywge1xyXG4gICAgICAgICAgICAgICAgYXBwTmFtZTogU3RyaW5nKG5hbWUpXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodXRpbC5jb250YWlucyhhcHBzLCBuYW1lKSkge1xyXG4gICAgICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImR1cGxpY2F0ZS1hcHBcIiAvKiBEVVBMSUNBVEVfQVBQICovLCB7IGFwcE5hbWU6IG5hbWUgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBhcHAgPSBuZXcgZmlyZWJhc2VBcHBJbXBsKG9wdGlvbnMsIGNvbmZpZywgbmFtZXNwYWNlKTtcclxuICAgICAgICBhcHBzW25hbWVdID0gYXBwO1xyXG4gICAgICAgIHJldHVybiBhcHA7XHJcbiAgICB9XHJcbiAgICAvKlxyXG4gICAgICogUmV0dXJuIGFuIGFycmF5IG9mIGFsbCB0aGUgbm9uLWRlbGV0ZWQgRmlyZWJhc2VBcHBzLlxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBnZXRBcHBzKCkge1xyXG4gICAgICAgIC8vIE1ha2UgYSBjb3B5IHNvIGNhbGxlciBjYW5ub3QgbXV0YXRlIHRoZSBhcHBzIGxpc3QuXHJcbiAgICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKGFwcHMpLm1hcChmdW5jdGlvbiAobmFtZSkgeyByZXR1cm4gYXBwc1tuYW1lXTsgfSk7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiByZWdpc3RlckNvbXBvbmVudChjb21wb25lbnQpIHtcclxuICAgICAgICB2YXIgZV8xLCBfYTtcclxuICAgICAgICB2YXIgY29tcG9uZW50TmFtZSA9IGNvbXBvbmVudC5uYW1lO1xyXG4gICAgICAgIGlmIChjb21wb25lbnRzLmhhcyhjb21wb25lbnROYW1lKSkge1xyXG4gICAgICAgICAgICBsb2dnZXIuZGVidWcoXCJUaGVyZSB3ZXJlIG11bHRpcGxlIGF0dGVtcHRzIHRvIHJlZ2lzdGVyIGNvbXBvbmVudCBcIiArIGNvbXBvbmVudE5hbWUgKyBcIi5cIik7XHJcbiAgICAgICAgICAgIHJldHVybiBjb21wb25lbnQudHlwZSA9PT0gXCJQVUJMSUNcIiAvKiBQVUJMSUMgKi9cclxuICAgICAgICAgICAgICAgID8gLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuICAgICAgICAgICAgICAgICAgICBuYW1lc3BhY2VbY29tcG9uZW50TmFtZV1cclxuICAgICAgICAgICAgICAgIDogbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29tcG9uZW50cy5zZXQoY29tcG9uZW50TmFtZSwgY29tcG9uZW50KTtcclxuICAgICAgICAvLyBjcmVhdGUgc2VydmljZSBuYW1lc3BhY2UgZm9yIHB1YmxpYyBjb21wb25lbnRzXHJcbiAgICAgICAgaWYgKGNvbXBvbmVudC50eXBlID09PSBcIlBVQkxJQ1wiIC8qIFBVQkxJQyAqLykge1xyXG4gICAgICAgICAgICAvLyBUaGUgU2VydmljZSBuYW1lc3BhY2UgaXMgYW4gYWNjZXNzb3IgZnVuY3Rpb24gLi4uXHJcbiAgICAgICAgICAgIHZhciBzZXJ2aWNlTmFtZXNwYWNlID0gZnVuY3Rpb24gKGFwcEFyZykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGFwcEFyZyA9PT0gdm9pZCAwKSB7IGFwcEFyZyA9IGFwcCgpOyB9XHJcbiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBhcHBBcmdbY29tcG9uZW50TmFtZV0gIT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBJbnZhbGlkIGFyZ3VtZW50LlxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgaGFwcGVucyBpbiB0aGUgZm9sbG93aW5nIGNhc2U6IGZpcmViYXNlLnN0b3JhZ2UoJ2dzOi8nKVxyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiaW52YWxpZC1hcHAtYXJndW1lbnRcIiAvKiBJTlZBTElEX0FQUF9BUkdVTUVOVCAqLywge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhcHBOYW1lOiBjb21wb25lbnROYW1lXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBGb3J3YXJkIHNlcnZpY2UgaW5zdGFuY2UgbG9va3VwIHRvIHRoZSBGaXJlYmFzZUFwcC5cclxuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYXBwQXJnW2NvbXBvbmVudE5hbWVdKCk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIC8vIC4uLiBhbmQgYSBjb250YWluZXIgZm9yIHNlcnZpY2UtbGV2ZWwgcHJvcGVydGllcy5cclxuICAgICAgICAgICAgaWYgKGNvbXBvbmVudC5zZXJ2aWNlUHJvcHMgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgdXRpbC5kZWVwRXh0ZW5kKHNlcnZpY2VOYW1lc3BhY2UsIGNvbXBvbmVudC5zZXJ2aWNlUHJvcHMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbiAgICAgICAgICAgIG5hbWVzcGFjZVtjb21wb25lbnROYW1lXSA9IHNlcnZpY2VOYW1lc3BhY2U7XHJcbiAgICAgICAgICAgIC8vIFBhdGNoIHRoZSBGaXJlYmFzZUFwcEltcGwgcHJvdG90eXBlXHJcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbiAgICAgICAgICAgIGZpcmViYXNlQXBwSW1wbC5wcm90b3R5cGVbY29tcG9uZW50TmFtZV0gPVxyXG4gICAgICAgICAgICAgICAgLy8gVE9ETzogVGhlIGVzbGludCBkaXNhYmxlIGNhbiBiZSByZW1vdmVkIGFuZCB0aGUgJ2lnbm9yZVJlc3RBcmdzJ1xyXG4gICAgICAgICAgICAgICAgLy8gb3B0aW9uIGFkZGVkIHRvIHRoZSBuby1leHBsaWNpdC1hbnkgcnVsZSB3aGVuIEVTbGludCByZWxlYXNlcyBpdC5cclxuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFyZ3MgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBzZXJ2aWNlRnhuID0gdGhpcy5fZ2V0U2VydmljZS5iaW5kKHRoaXMsIGNvbXBvbmVudE5hbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzZXJ2aWNlRnhuLmFwcGx5KHRoaXMsIGNvbXBvbmVudC5tdWx0aXBsZUluc3RhbmNlcyA/IGFyZ3MgOiBbXSk7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAvLyBhZGQgdGhlIGNvbXBvbmVudCB0byBleGlzdGluZyBhcHAgaW5zdGFuY2VzXHJcbiAgICAgICAgICAgIGZvciAodmFyIF9iID0gdHNsaWIuX192YWx1ZXMoT2JqZWN0LmtleXMoYXBwcykpLCBfYyA9IF9iLm5leHQoKTsgIV9jLmRvbmU7IF9jID0gX2IubmV4dCgpKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYXBwTmFtZSA9IF9jLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgYXBwc1thcHBOYW1lXS5fYWRkQ29tcG9uZW50KGNvbXBvbmVudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH1cclxuICAgICAgICBmaW5hbGx5IHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGlmIChfYyAmJiAhX2MuZG9uZSAmJiAoX2EgPSBfYi5yZXR1cm4pKSBfYS5jYWxsKF9iKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBjb21wb25lbnQudHlwZSA9PT0gXCJQVUJMSUNcIiAvKiBQVUJMSUMgKi9cclxuICAgICAgICAgICAgPyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG4gICAgICAgICAgICAgICAgbmFtZXNwYWNlW2NvbXBvbmVudE5hbWVdXHJcbiAgICAgICAgICAgIDogbnVsbDtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIHJlZ2lzdGVyVmVyc2lvbihsaWJyYXJ5S2V5T3JOYW1lLCB2ZXJzaW9uLCB2YXJpYW50KSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIC8vIFRPRE86IFdlIGNhbiB1c2UgdGhpcyBjaGVjayB0byB3aGl0ZWxpc3Qgc3RyaW5ncyB3aGVuL2lmIHdlIHNldCB1cFxyXG4gICAgICAgIC8vIGEgZ29vZCB3aGl0ZWxpc3Qgc3lzdGVtLlxyXG4gICAgICAgIHZhciBsaWJyYXJ5ID0gKF9hID0gUExBVEZPUk1fTE9HX1NUUklOR1tsaWJyYXJ5S2V5T3JOYW1lXSwgKF9hICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IGxpYnJhcnlLZXlPck5hbWUpKTtcclxuICAgICAgICBpZiAodmFyaWFudCkge1xyXG4gICAgICAgICAgICBsaWJyYXJ5ICs9IFwiLVwiICsgdmFyaWFudDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGxpYnJhcnlNaXNtYXRjaCA9IGxpYnJhcnkubWF0Y2goL1xcc3xcXC8vKTtcclxuICAgICAgICB2YXIgdmVyc2lvbk1pc21hdGNoID0gdmVyc2lvbi5tYXRjaCgvXFxzfFxcLy8pO1xyXG4gICAgICAgIGlmIChsaWJyYXJ5TWlzbWF0Y2ggfHwgdmVyc2lvbk1pc21hdGNoKSB7XHJcbiAgICAgICAgICAgIHZhciB3YXJuaW5nID0gW1xyXG4gICAgICAgICAgICAgICAgXCJVbmFibGUgdG8gcmVnaXN0ZXIgbGlicmFyeSBcXFwiXCIgKyBsaWJyYXJ5ICsgXCJcXFwiIHdpdGggdmVyc2lvbiBcXFwiXCIgKyB2ZXJzaW9uICsgXCJcXFwiOlwiXHJcbiAgICAgICAgICAgIF07XHJcbiAgICAgICAgICAgIGlmIChsaWJyYXJ5TWlzbWF0Y2gpIHtcclxuICAgICAgICAgICAgICAgIHdhcm5pbmcucHVzaChcImxpYnJhcnkgbmFtZSBcXFwiXCIgKyBsaWJyYXJ5ICsgXCJcXFwiIGNvbnRhaW5zIGlsbGVnYWwgY2hhcmFjdGVycyAod2hpdGVzcGFjZSBvciBcXFwiL1xcXCIpXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChsaWJyYXJ5TWlzbWF0Y2ggJiYgdmVyc2lvbk1pc21hdGNoKSB7XHJcbiAgICAgICAgICAgICAgICB3YXJuaW5nLnB1c2goJ2FuZCcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh2ZXJzaW9uTWlzbWF0Y2gpIHtcclxuICAgICAgICAgICAgICAgIHdhcm5pbmcucHVzaChcInZlcnNpb24gbmFtZSBcXFwiXCIgKyB2ZXJzaW9uICsgXCJcXFwiIGNvbnRhaW5zIGlsbGVnYWwgY2hhcmFjdGVycyAod2hpdGVzcGFjZSBvciBcXFwiL1xcXCIpXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGxvZ2dlci53YXJuKHdhcm5pbmcuam9pbignICcpKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZWdpc3RlckNvbXBvbmVudChuZXcgY29tcG9uZW50LkNvbXBvbmVudChsaWJyYXJ5ICsgXCItdmVyc2lvblwiLCBmdW5jdGlvbiAoKSB7IHJldHVybiAoeyBsaWJyYXJ5OiBsaWJyYXJ5LCB2ZXJzaW9uOiB2ZXJzaW9uIH0pOyB9LCBcIlZFUlNJT05cIiAvKiBWRVJTSU9OICovKSk7XHJcbiAgICB9XHJcbiAgICAvLyBNYXAgdGhlIHJlcXVlc3RlZCBzZXJ2aWNlIHRvIGEgcmVnaXN0ZXJlZCBzZXJ2aWNlIG5hbWVcclxuICAgIC8vICh1c2VkIHRvIG1hcCBhdXRoIHRvIHNlcnZlckF1dGggc2VydmljZSB3aGVuIG5lZWRlZCkuXHJcbiAgICBmdW5jdGlvbiB1c2VBc1NlcnZpY2UoYXBwLCBuYW1lKSB7XHJcbiAgICAgICAgaWYgKG5hbWUgPT09ICdzZXJ2ZXJBdXRoJykge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIHVzZVNlcnZpY2UgPSBuYW1lO1xyXG4gICAgICAgIHJldHVybiB1c2VTZXJ2aWNlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG5hbWVzcGFjZTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFJldHVybiBhIGZpcmViYXNlIG5hbWVzcGFjZSBvYmplY3QuXHJcbiAqXHJcbiAqIEluIHByb2R1Y3Rpb24sIHRoaXMgd2lsbCBiZSBjYWxsZWQgZXhhY3RseSBvbmNlIGFuZCB0aGUgcmVzdWx0XHJcbiAqIGFzc2lnbmVkIHRvIHRoZSAnZmlyZWJhc2UnIGdsb2JhbC4gIEl0IG1heSBiZSBjYWxsZWQgbXVsdGlwbGUgdGltZXNcclxuICogaW4gdW5pdCB0ZXN0cy5cclxuICovXHJcbmZ1bmN0aW9uIGNyZWF0ZUZpcmViYXNlTmFtZXNwYWNlKCkge1xyXG4gICAgdmFyIG5hbWVzcGFjZSA9IGNyZWF0ZUZpcmViYXNlTmFtZXNwYWNlQ29yZShGaXJlYmFzZUFwcEltcGwpO1xyXG4gICAgbmFtZXNwYWNlLklOVEVSTkFMID0gdHNsaWIuX19hc3NpZ24odHNsaWIuX19hc3NpZ24oe30sIG5hbWVzcGFjZS5JTlRFUk5BTCksIHsgY3JlYXRlRmlyZWJhc2VOYW1lc3BhY2U6IGNyZWF0ZUZpcmViYXNlTmFtZXNwYWNlLFxyXG4gICAgICAgIGV4dGVuZE5hbWVzcGFjZTogZXh0ZW5kTmFtZXNwYWNlLFxyXG4gICAgICAgIGNyZWF0ZVN1YnNjcmliZTogdXRpbC5jcmVhdGVTdWJzY3JpYmUsXHJcbiAgICAgICAgRXJyb3JGYWN0b3J5OiB1dGlsLkVycm9yRmFjdG9yeSxcclxuICAgICAgICBkZWVwRXh0ZW5kOiB1dGlsLmRlZXBFeHRlbmQgfSk7XHJcbiAgICAvKipcclxuICAgICAqIFBhdGNoIHRoZSB0b3AtbGV2ZWwgZmlyZWJhc2UgbmFtZXNwYWNlIHdpdGggYWRkaXRpb25hbCBwcm9wZXJ0aWVzLlxyXG4gICAgICpcclxuICAgICAqIGZpcmViYXNlLklOVEVSTkFMLmV4dGVuZE5hbWVzcGFjZSgpXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIGV4dGVuZE5hbWVzcGFjZShwcm9wcykge1xyXG4gICAgICAgIHV0aWwuZGVlcEV4dGVuZChuYW1lc3BhY2UsIHByb3BzKTtcclxuICAgIH1cclxuICAgIHJldHVybiBuYW1lc3BhY2U7XHJcbn1cclxudmFyIGZpcmViYXNlID0gY3JlYXRlRmlyZWJhc2VOYW1lc3BhY2UoKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnZhciBQbGF0Zm9ybUxvZ2dlclNlcnZpY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBQbGF0Zm9ybUxvZ2dlclNlcnZpY2UoY29udGFpbmVyKSB7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXI7XHJcbiAgICB9XHJcbiAgICAvLyBJbiBpbml0aWFsIGltcGxlbWVudGF0aW9uLCB0aGlzIHdpbGwgYmUgY2FsbGVkIGJ5IGluc3RhbGxhdGlvbnMgb25cclxuICAgIC8vIGF1dGggdG9rZW4gcmVmcmVzaCwgYW5kIGluc3RhbGxhdGlvbnMgd2lsbCBzZW5kIHRoaXMgc3RyaW5nLlxyXG4gICAgUGxhdGZvcm1Mb2dnZXJTZXJ2aWNlLnByb3RvdHlwZS5nZXRQbGF0Zm9ybUluZm9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHByb3ZpZGVycyA9IHRoaXMuY29udGFpbmVyLmdldFByb3ZpZGVycygpO1xyXG4gICAgICAgIC8vIExvb3AgdGhyb3VnaCBwcm92aWRlcnMgYW5kIGdldCBsaWJyYXJ5L3ZlcnNpb24gcGFpcnMgZnJvbSBhbnkgdGhhdCBhcmVcclxuICAgICAgICAvLyB2ZXJzaW9uIGNvbXBvbmVudHMuXHJcbiAgICAgICAgcmV0dXJuIHByb3ZpZGVyc1xyXG4gICAgICAgICAgICAubWFwKGZ1bmN0aW9uIChwcm92aWRlcikge1xyXG4gICAgICAgICAgICBpZiAoaXNWZXJzaW9uU2VydmljZVByb3ZpZGVyKHByb3ZpZGVyKSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHNlcnZpY2UgPSBwcm92aWRlci5nZXRJbW1lZGlhdGUoKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBzZXJ2aWNlLmxpYnJhcnkgKyBcIi9cIiArIHNlcnZpY2UudmVyc2lvbjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLmZpbHRlcihmdW5jdGlvbiAobG9nU3RyaW5nKSB7IHJldHVybiBsb2dTdHJpbmc7IH0pXHJcbiAgICAgICAgICAgIC5qb2luKCcgJyk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFBsYXRmb3JtTG9nZ2VyU2VydmljZTtcclxufSgpKTtcclxuLyoqXHJcbiAqXHJcbiAqIEBwYXJhbSBwcm92aWRlciBjaGVjayBpZiB0aGlzIHByb3ZpZGVyIHByb3ZpZGVzIGEgVmVyc2lvblNlcnZpY2VcclxuICpcclxuICogTk9URTogVXNpbmcgUHJvdmlkZXI8J2FwcC12ZXJzaW9uJz4gaXMgYSBoYWNrIHRvIGluZGljYXRlIHRoYXQgdGhlIHByb3ZpZGVyXHJcbiAqIHByb3ZpZGVzIFZlcnNpb25TZXJ2aWNlLiBUaGUgcHJvdmlkZXIgaXMgbm90IG5lY2Vzc2FyaWx5IGEgJ2FwcC12ZXJzaW9uJ1xyXG4gKiBwcm92aWRlci5cclxuICovXHJcbmZ1bmN0aW9uIGlzVmVyc2lvblNlcnZpY2VQcm92aWRlcihwcm92aWRlcikge1xyXG4gICAgdmFyIF9hO1xyXG4gICAgdmFyIGNvbXBvbmVudCA9IHByb3ZpZGVyLmdldENvbXBvbmVudCgpO1xyXG4gICAgcmV0dXJuICgoX2EgPSBjb21wb25lbnQpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS50eXBlKSA9PT0gXCJWRVJTSU9OXCIgLyogVkVSU0lPTiAqLztcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gcmVnaXN0ZXJDb3JlQ29tcG9uZW50cyhmaXJlYmFzZSwgdmFyaWFudCkge1xyXG4gICAgZmlyZWJhc2UuSU5URVJOQUwucmVnaXN0ZXJDb21wb25lbnQobmV3IGNvbXBvbmVudC5Db21wb25lbnQoJ3BsYXRmb3JtLWxvZ2dlcicsIGZ1bmN0aW9uIChjb250YWluZXIpIHsgcmV0dXJuIG5ldyBQbGF0Zm9ybUxvZ2dlclNlcnZpY2UoY29udGFpbmVyKTsgfSwgXCJQUklWQVRFXCIgLyogUFJJVkFURSAqLykpO1xyXG4gICAgLy8gUmVnaXN0ZXIgYGFwcGAgcGFja2FnZS5cclxuICAgIGZpcmViYXNlLnJlZ2lzdGVyVmVyc2lvbihuYW1lLCB2ZXJzaW9uLCB2YXJpYW50KTtcclxuICAgIC8vIFJlZ2lzdGVyIHBsYXRmb3JtIFNESyBpZGVudGlmaWVyIChubyB2ZXJzaW9uKS5cclxuICAgIGZpcmViYXNlLnJlZ2lzdGVyVmVyc2lvbignZmlyZS1qcycsICcnKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLy8gRmlyZWJhc2UgTGl0ZSBkZXRlY3Rpb25cclxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuaWYgKHV0aWwuaXNCcm93c2VyKCkgJiYgc2VsZi5maXJlYmFzZSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICBsb2dnZXIud2FybihcIlxcbiAgICBXYXJuaW5nOiBGaXJlYmFzZSBpcyBhbHJlYWR5IGRlZmluZWQgaW4gdGhlIGdsb2JhbCBzY29wZS4gUGxlYXNlIG1ha2Ugc3VyZVxcbiAgICBGaXJlYmFzZSBsaWJyYXJ5IGlzIG9ubHkgbG9hZGVkIG9uY2UuXFxuICBcIik7XHJcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmVcclxuICAgIHZhciBzZGtWZXJzaW9uID0gc2VsZi5maXJlYmFzZS5TREtfVkVSU0lPTjtcclxuICAgIGlmIChzZGtWZXJzaW9uICYmIHNka1ZlcnNpb24uaW5kZXhPZignTElURScpID49IDApIHtcclxuICAgICAgICBsb2dnZXIud2FybihcIlxcbiAgICBXYXJuaW5nOiBZb3UgYXJlIHRyeWluZyB0byBsb2FkIEZpcmViYXNlIHdoaWxlIHVzaW5nIEZpcmViYXNlIFBlcmZvcm1hbmNlIHN0YW5kYWxvbmUgc2NyaXB0LlxcbiAgICBZb3Ugc2hvdWxkIGxvYWQgRmlyZWJhc2UgUGVyZm9ybWFuY2Ugd2l0aCB0aGlzIGluc3RhbmNlIG9mIEZpcmViYXNlIHRvIGF2b2lkIGxvYWRpbmcgZHVwbGljYXRlIGNvZGUuXFxuICAgIFwiKTtcclxuICAgIH1cclxufVxyXG52YXIgaW5pdGlhbGl6ZUFwcCA9IGZpcmViYXNlLmluaXRpYWxpemVBcHA7XHJcbi8vIFRPRE86IFRoaXMgZGlzYWJsZSBjYW4gYmUgcmVtb3ZlZCBhbmQgdGhlICdpZ25vcmVSZXN0QXJncycgb3B0aW9uIGFkZGVkIHRvXHJcbi8vIHRoZSBuby1leHBsaWNpdC1hbnkgcnVsZSB3aGVuIEVTbGludCByZWxlYXNlcyBpdC5cclxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuZmlyZWJhc2UuaW5pdGlhbGl6ZUFwcCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBhcmdzID0gW107XHJcbiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzW19pXTtcclxuICAgIH1cclxuICAgIC8vIEVudmlyb25tZW50IGNoZWNrIGJlZm9yZSBpbml0aWFsaXppbmcgYXBwXHJcbiAgICAvLyBEbyB0aGUgY2hlY2sgaW4gaW5pdGlhbGl6ZUFwcCwgc28gcGVvcGxlIGhhdmUgYSBjaGFuY2UgdG8gZGlzYWJsZSBpdCBieSBzZXR0aW5nIGxvZ0xldmVsXHJcbiAgICAvLyBpbiBAZmlyZWJhc2UvbG9nZ2VyXHJcbiAgICBpZiAodXRpbC5pc05vZGUoKSkge1xyXG4gICAgICAgIGxvZ2dlci53YXJuKFwiXFxuICAgICAgV2FybmluZzogVGhpcyBpcyBhIGJyb3dzZXItdGFyZ2V0ZWQgRmlyZWJhc2UgYnVuZGxlIGJ1dCBpdCBhcHBlYXJzIGl0IGlzIGJlaW5nXFxuICAgICAgcnVuIGluIGEgTm9kZSBlbnZpcm9ubWVudC4gIElmIHJ1bm5pbmcgaW4gYSBOb2RlIGVudmlyb25tZW50LCBtYWtlIHN1cmUgeW91XFxuICAgICAgYXJlIHVzaW5nIHRoZSBidW5kbGUgc3BlY2lmaWVkIGJ5IHRoZSBcXFwibWFpblxcXCIgZmllbGQgaW4gcGFja2FnZS5qc29uLlxcbiAgICAgIFxcbiAgICAgIElmIHlvdSBhcmUgdXNpbmcgV2VicGFjaywgeW91IGNhbiBzcGVjaWZ5IFxcXCJtYWluXFxcIiBhcyB0aGUgZmlyc3QgaXRlbSBpblxcbiAgICAgIFxcXCJyZXNvbHZlLm1haW5GaWVsZHNcXFwiOlxcbiAgICAgIGh0dHBzOi8vd2VicGFjay5qcy5vcmcvY29uZmlndXJhdGlvbi9yZXNvbHZlLyNyZXNvbHZlbWFpbmZpZWxkc1xcbiAgICAgIFxcbiAgICAgIElmIHVzaW5nIFJvbGx1cCwgdXNlIHRoZSByb2xsdXAtcGx1Z2luLW5vZGUtcmVzb2x2ZSBwbHVnaW4gYW5kIHNwZWNpZnkgXFxcIm1haW5cXFwiXFxuICAgICAgYXMgdGhlIGZpcnN0IGl0ZW0gaW4gXFxcIm1haW5GaWVsZHNcXFwiLCBlLmcuIFsnbWFpbicsICdtb2R1bGUnXS5cXG4gICAgICBodHRwczovL2dpdGh1Yi5jb20vcm9sbHVwL3JvbGx1cC1wbHVnaW4tbm9kZS1yZXNvbHZlXFxuICAgICAgXCIpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGluaXRpYWxpemVBcHAuYXBwbHkodW5kZWZpbmVkLCBhcmdzKTtcclxufTtcclxudmFyIGZpcmViYXNlJDEgPSBmaXJlYmFzZTtcclxucmVnaXN0ZXJDb3JlQ29tcG9uZW50cyhmaXJlYmFzZSQxKTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gZmlyZWJhc2UkMTtcbmV4cG9ydHMuZmlyZWJhc2UgPSBmaXJlYmFzZSQxO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguY2pzLmpzLm1hcFxuIiwiJ3VzZSBzdHJpY3QnO1xuXG5mdW5jdGlvbiBfaW50ZXJvcERlZmF1bHQgKGV4KSB7IHJldHVybiAoZXggJiYgKHR5cGVvZiBleCA9PT0gJ29iamVjdCcpICYmICdkZWZhdWx0JyBpbiBleCkgPyBleFsnZGVmYXVsdCddIDogZXg7IH1cblxudmFyIGZpcmViYXNlID0gX2ludGVyb3BEZWZhdWx0KHJlcXVpcmUoJ0BmaXJlYmFzZS9hcHAnKSk7XG5cbnZhciBuYW1lID0gXCJmaXJlYmFzZVwiO1xudmFyIHZlcnNpb24gPSBcIjcuNi4xXCI7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5maXJlYmFzZS5yZWdpc3RlclZlcnNpb24obmFtZSwgdmVyc2lvbiwgJ2FwcCcpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZpcmViYXNlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguY2pzLmpzLm1hcFxuIiwidmFyIGc7XG5cbi8vIFRoaXMgd29ya3MgaW4gbm9uLXN0cmljdCBtb2RlXG5nID0gKGZ1bmN0aW9uKCkge1xuXHRyZXR1cm4gdGhpcztcbn0pKCk7XG5cbnRyeSB7XG5cdC8vIFRoaXMgd29ya3MgaWYgZXZhbCBpcyBhbGxvd2VkIChzZWUgQ1NQKVxuXHRnID0gZyB8fCBuZXcgRnVuY3Rpb24oXCJyZXR1cm4gdGhpc1wiKSgpO1xufSBjYXRjaCAoZSkge1xuXHQvLyBUaGlzIHdvcmtzIGlmIHRoZSB3aW5kb3cgcmVmZXJlbmNlIGlzIGF2YWlsYWJsZVxuXHRpZiAodHlwZW9mIHdpbmRvdyA9PT0gXCJvYmplY3RcIikgZyA9IHdpbmRvdztcbn1cblxuLy8gZyBjYW4gc3RpbGwgYmUgdW5kZWZpbmVkLCBidXQgbm90aGluZyB0byBkbyBhYm91dCBpdC4uLlxuLy8gV2UgcmV0dXJuIHVuZGVmaW5lZCwgaW5zdGVhZCBvZiBub3RoaW5nIGhlcmUsIHNvIGl0J3Ncbi8vIGVhc2llciB0byBoYW5kbGUgdGhpcyBjYXNlLiBpZighZ2xvYmFsKSB7IC4uLn1cblxubW9kdWxlLmV4cG9ydHMgPSBnO1xuIiwiLyohICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbkNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG5MaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2VcclxudGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGVcclxuTGljZW5zZSBhdCBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuXHJcblRISVMgQ09ERSBJUyBQUk9WSURFRCBPTiBBTiAqQVMgSVMqIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcclxuS0lORCwgRUlUSEVSIEVYUFJFU1MgT1IgSU1QTElFRCwgSU5DTFVESU5HIFdJVEhPVVQgTElNSVRBVElPTiBBTlkgSU1QTElFRFxyXG5XQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgVElUTEUsIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLFxyXG5NRVJDSEFOVEFCTElUWSBPUiBOT04tSU5GUklOR0VNRU5ULlxyXG5cclxuU2VlIHRoZSBBcGFjaGUgVmVyc2lvbiAyLjAgTGljZW5zZSBmb3Igc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zXHJcbmFuZCBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi9cclxuXHJcbmZ1bmN0aW9uIF9fc3ByZWFkQXJyYXlzKCkge1xyXG4gICAgZm9yICh2YXIgcyA9IDAsIGkgPSAwLCBpbCA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBpbDsgaSsrKSBzICs9IGFyZ3VtZW50c1tpXS5sZW5ndGg7XHJcbiAgICBmb3IgKHZhciByID0gQXJyYXkocyksIGsgPSAwLCBpID0gMDsgaSA8IGlsOyBpKyspXHJcbiAgICAgICAgZm9yICh2YXIgYSA9IGFyZ3VtZW50c1tpXSwgaiA9IDAsIGpsID0gYS5sZW5ndGg7IGogPCBqbDsgaisrLCBrKyspXHJcbiAgICAgICAgICAgIHJba10gPSBhW2pdO1xyXG4gICAgcmV0dXJuIHI7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBBIGNvbnRhaW5lciBmb3IgYWxsIG9mIHRoZSBMb2dnZXIgaW5zdGFuY2VzXHJcbiAqL1xyXG52YXIgaW5zdGFuY2VzID0gW107XHJcbi8qKlxyXG4gKiBUaGUgSlMgU0RLIHN1cHBvcnRzIDUgbG9nIGxldmVscyBhbmQgYWxzbyBhbGxvd3MgYSB1c2VyIHRoZSBhYmlsaXR5IHRvXHJcbiAqIHNpbGVuY2UgdGhlIGxvZ3MgYWx0b2dldGhlci5cclxuICpcclxuICogVGhlIG9yZGVyIGlzIGEgZm9sbG93czpcclxuICogREVCVUcgPCBWRVJCT1NFIDwgSU5GTyA8IFdBUk4gPCBFUlJPUlxyXG4gKlxyXG4gKiBBbGwgb2YgdGhlIGxvZyB0eXBlcyBhYm92ZSB0aGUgY3VycmVudCBsb2cgbGV2ZWwgd2lsbCBiZSBjYXB0dXJlZCAoaS5lLiBpZlxyXG4gKiB5b3Ugc2V0IHRoZSBsb2cgbGV2ZWwgdG8gYElORk9gLCBlcnJvcnMgd2lsbCBzdGlsbCBiZSBsb2dnZWQsIGJ1dCBgREVCVUdgIGFuZFxyXG4gKiBgVkVSQk9TRWAgbG9ncyB3aWxsIG5vdClcclxuICovXHJcbnZhciBMb2dMZXZlbDtcclxuKGZ1bmN0aW9uIChMb2dMZXZlbCkge1xyXG4gICAgTG9nTGV2ZWxbTG9nTGV2ZWxbXCJERUJVR1wiXSA9IDBdID0gXCJERUJVR1wiO1xyXG4gICAgTG9nTGV2ZWxbTG9nTGV2ZWxbXCJWRVJCT1NFXCJdID0gMV0gPSBcIlZFUkJPU0VcIjtcclxuICAgIExvZ0xldmVsW0xvZ0xldmVsW1wiSU5GT1wiXSA9IDJdID0gXCJJTkZPXCI7XHJcbiAgICBMb2dMZXZlbFtMb2dMZXZlbFtcIldBUk5cIl0gPSAzXSA9IFwiV0FSTlwiO1xyXG4gICAgTG9nTGV2ZWxbTG9nTGV2ZWxbXCJFUlJPUlwiXSA9IDRdID0gXCJFUlJPUlwiO1xyXG4gICAgTG9nTGV2ZWxbTG9nTGV2ZWxbXCJTSUxFTlRcIl0gPSA1XSA9IFwiU0lMRU5UXCI7XHJcbn0pKExvZ0xldmVsIHx8IChMb2dMZXZlbCA9IHt9KSk7XHJcbi8qKlxyXG4gKiBUaGUgZGVmYXVsdCBsb2cgbGV2ZWxcclxuICovXHJcbnZhciBkZWZhdWx0TG9nTGV2ZWwgPSBMb2dMZXZlbC5JTkZPO1xyXG4vKipcclxuICogVGhlIGRlZmF1bHQgbG9nIGhhbmRsZXIgd2lsbCBmb3J3YXJkIERFQlVHLCBWRVJCT1NFLCBJTkZPLCBXQVJOLCBhbmQgRVJST1JcclxuICogbWVzc2FnZXMgb24gdG8gdGhlaXIgY29ycmVzcG9uZGluZyBjb25zb2xlIGNvdW50ZXJwYXJ0cyAoaWYgdGhlIGxvZyBtZXRob2RcclxuICogaXMgc3VwcG9ydGVkIGJ5IHRoZSBjdXJyZW50IGxvZyBsZXZlbClcclxuICovXHJcbnZhciBkZWZhdWx0TG9nSGFuZGxlciA9IGZ1bmN0aW9uIChpbnN0YW5jZSwgbG9nVHlwZSkge1xyXG4gICAgdmFyIGFyZ3MgPSBbXTtcclxuICAgIGZvciAodmFyIF9pID0gMjsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgYXJnc1tfaSAtIDJdID0gYXJndW1lbnRzW19pXTtcclxuICAgIH1cclxuICAgIGlmIChsb2dUeXBlIDwgaW5zdGFuY2UubG9nTGV2ZWwpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICB2YXIgbm93ID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xyXG4gICAgc3dpdGNoIChsb2dUeXBlKSB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQnkgZGVmYXVsdCwgYGNvbnNvbGUuZGVidWdgIGlzIG5vdCBkaXNwbGF5ZWQgaW4gdGhlIGRldmVsb3BlciBjb25zb2xlIChpblxyXG4gICAgICAgICAqIGNocm9tZSkuIFRvIGF2b2lkIGZvcmNpbmcgdXNlcnMgdG8gaGF2ZSB0byBvcHQtaW4gdG8gdGhlc2UgbG9ncyB0d2ljZVxyXG4gICAgICAgICAqIChpLmUuIG9uY2UgZm9yIGZpcmViYXNlLCBhbmQgb25jZSBpbiB0aGUgY29uc29sZSksIHdlIGFyZSBzZW5kaW5nIGBERUJVR2BcclxuICAgICAgICAgKiBsb2dzIHRvIHRoZSBgY29uc29sZS5sb2dgIGZ1bmN0aW9uLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGNhc2UgTG9nTGV2ZWwuREVCVUc6XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nLmFwcGx5KGNvbnNvbGUsIF9fc3ByZWFkQXJyYXlzKFtcIltcIiArIG5vdyArIFwiXSAgXCIgKyBpbnN0YW5jZS5uYW1lICsgXCI6XCJdLCBhcmdzKSk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgTG9nTGV2ZWwuVkVSQk9TRTpcclxuICAgICAgICAgICAgY29uc29sZS5sb2cuYXBwbHkoY29uc29sZSwgX19zcHJlYWRBcnJheXMoW1wiW1wiICsgbm93ICsgXCJdICBcIiArIGluc3RhbmNlLm5hbWUgKyBcIjpcIl0sIGFyZ3MpKTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBMb2dMZXZlbC5JTkZPOlxyXG4gICAgICAgICAgICBjb25zb2xlLmluZm8uYXBwbHkoY29uc29sZSwgX19zcHJlYWRBcnJheXMoW1wiW1wiICsgbm93ICsgXCJdICBcIiArIGluc3RhbmNlLm5hbWUgKyBcIjpcIl0sIGFyZ3MpKTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBMb2dMZXZlbC5XQVJOOlxyXG4gICAgICAgICAgICBjb25zb2xlLndhcm4uYXBwbHkoY29uc29sZSwgX19zcHJlYWRBcnJheXMoW1wiW1wiICsgbm93ICsgXCJdICBcIiArIGluc3RhbmNlLm5hbWUgKyBcIjpcIl0sIGFyZ3MpKTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBMb2dMZXZlbC5FUlJPUjpcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvci5hcHBseShjb25zb2xlLCBfX3NwcmVhZEFycmF5cyhbXCJbXCIgKyBub3cgKyBcIl0gIFwiICsgaW5zdGFuY2UubmFtZSArIFwiOlwiXSwgYXJncykpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJBdHRlbXB0ZWQgdG8gbG9nIGEgbWVzc2FnZSB3aXRoIGFuIGludmFsaWQgbG9nVHlwZSAodmFsdWU6IFwiICsgbG9nVHlwZSArIFwiKVwiKTtcclxuICAgIH1cclxufTtcclxudmFyIExvZ2dlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIC8qKlxyXG4gICAgICogR2l2ZXMgeW91IGFuIGluc3RhbmNlIG9mIGEgTG9nZ2VyIHRvIGNhcHR1cmUgbWVzc2FnZXMgYWNjb3JkaW5nIHRvXHJcbiAgICAgKiBGaXJlYmFzZSdzIGxvZ2dpbmcgc2NoZW1lLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBuYW1lIFRoZSBuYW1lIHRoYXQgdGhlIGxvZ3Mgd2lsbCBiZSBhc3NvY2lhdGVkIHdpdGhcclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gTG9nZ2VyKG5hbWUpIHtcclxuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRoZSBsb2cgbGV2ZWwgb2YgdGhlIGdpdmVuIExvZ2dlciBpbnN0YW5jZS5cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLl9sb2dMZXZlbCA9IGRlZmF1bHRMb2dMZXZlbDtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBUaGUgbG9nIGhhbmRsZXIgZm9yIHRoZSBMb2dnZXIgaW5zdGFuY2UuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5fbG9nSGFuZGxlciA9IGRlZmF1bHRMb2dIYW5kbGVyO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENhcHR1cmUgdGhlIGN1cnJlbnQgaW5zdGFuY2UgZm9yIGxhdGVyIHVzZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGluc3RhbmNlcy5wdXNoKHRoaXMpO1xyXG4gICAgfVxyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KExvZ2dlci5wcm90b3R5cGUsIFwibG9nTGV2ZWxcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fbG9nTGV2ZWw7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWwpIHtcclxuICAgICAgICAgICAgaWYgKCEodmFsIGluIExvZ0xldmVsKSkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignSW52YWxpZCB2YWx1ZSBhc3NpZ25lZCB0byBgbG9nTGV2ZWxgJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5fbG9nTGV2ZWwgPSB2YWw7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTG9nZ2VyLnByb3RvdHlwZSwgXCJsb2dIYW5kbGVyXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2xvZ0hhbmRsZXI7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWwpIHtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWwgIT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1ZhbHVlIGFzc2lnbmVkIHRvIGBsb2dIYW5kbGVyYCBtdXN0IGJlIGEgZnVuY3Rpb24nKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLl9sb2dIYW5kbGVyID0gdmFsO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgZnVuY3Rpb25zIGJlbG93IGFyZSBhbGwgYmFzZWQgb24gdGhlIGBjb25zb2xlYCBpbnRlcmZhY2VcclxuICAgICAqL1xyXG4gICAgTG9nZ2VyLnByb3RvdHlwZS5kZWJ1ZyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgYXJncyA9IFtdO1xyXG4gICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzW19pXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fbG9nSGFuZGxlci5hcHBseSh0aGlzLCBfX3NwcmVhZEFycmF5cyhbdGhpcywgTG9nTGV2ZWwuREVCVUddLCBhcmdzKSk7XHJcbiAgICB9O1xyXG4gICAgTG9nZ2VyLnByb3RvdHlwZS5sb2cgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGFyZ3MgPSBbXTtcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICBhcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX2xvZ0hhbmRsZXIuYXBwbHkodGhpcywgX19zcHJlYWRBcnJheXMoW3RoaXMsIExvZ0xldmVsLlZFUkJPU0VdLCBhcmdzKSk7XHJcbiAgICB9O1xyXG4gICAgTG9nZ2VyLnByb3RvdHlwZS5pbmZvID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBhcmdzID0gW107XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9sb2dIYW5kbGVyLmFwcGx5KHRoaXMsIF9fc3ByZWFkQXJyYXlzKFt0aGlzLCBMb2dMZXZlbC5JTkZPXSwgYXJncykpO1xyXG4gICAgfTtcclxuICAgIExvZ2dlci5wcm90b3R5cGUud2FybiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgYXJncyA9IFtdO1xyXG4gICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzW19pXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fbG9nSGFuZGxlci5hcHBseSh0aGlzLCBfX3NwcmVhZEFycmF5cyhbdGhpcywgTG9nTGV2ZWwuV0FSTl0sIGFyZ3MpKTtcclxuICAgIH07XHJcbiAgICBMb2dnZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBhcmdzID0gW107XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9sb2dIYW5kbGVyLmFwcGx5KHRoaXMsIF9fc3ByZWFkQXJyYXlzKFt0aGlzLCBMb2dMZXZlbC5FUlJPUl0sIGFyZ3MpKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gTG9nZ2VyO1xyXG59KCkpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gc2V0TG9nTGV2ZWwobGV2ZWwpIHtcclxuICAgIGluc3RhbmNlcy5mb3JFYWNoKGZ1bmN0aW9uIChpbnN0KSB7XHJcbiAgICAgICAgaW5zdC5sb2dMZXZlbCA9IGxldmVsO1xyXG4gICAgfSk7XHJcbn1cblxuZXhwb3J0IHsgTG9nTGV2ZWwsIExvZ2dlciwgc2V0TG9nTGV2ZWwgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmVzbS5qcy5tYXBcbiIsIihmdW5jdGlvbiAoZ2xvYmFsLCBmYWN0b3J5KSB7XG4gIHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyA/IGZhY3RvcnkoZXhwb3J0cykgOlxuICB0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQgPyBkZWZpbmUoWydleHBvcnRzJ10sIGZhY3RvcnkpIDpcbiAgKGdsb2JhbCA9IGdsb2JhbCB8fCBzZWxmLCBmYWN0b3J5KGdsb2JhbC5pZGIgPSB7fSkpO1xufSh0aGlzLCBmdW5jdGlvbiAoZXhwb3J0cykgeyAndXNlIHN0cmljdCc7XG5cbiAgZnVuY3Rpb24gdG9BcnJheShhcnIpIHtcbiAgICByZXR1cm4gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJyKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHByb21pc2lmeVJlcXVlc3QocmVxdWVzdCkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgIHJlcXVlc3Qub25zdWNjZXNzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJlc29sdmUocmVxdWVzdC5yZXN1bHQpO1xuICAgICAgfTtcblxuICAgICAgcmVxdWVzdC5vbmVycm9yID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJlamVjdChyZXF1ZXN0LmVycm9yKTtcbiAgICAgIH07XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBwcm9taXNpZnlSZXF1ZXN0Q2FsbChvYmosIG1ldGhvZCwgYXJncykge1xuICAgIHZhciByZXF1ZXN0O1xuICAgIHZhciBwID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICByZXF1ZXN0ID0gb2JqW21ldGhvZF0uYXBwbHkob2JqLCBhcmdzKTtcbiAgICAgIHByb21pc2lmeVJlcXVlc3QocmVxdWVzdCkudGhlbihyZXNvbHZlLCByZWplY3QpO1xuICAgIH0pO1xuXG4gICAgcC5yZXF1ZXN0ID0gcmVxdWVzdDtcbiAgICByZXR1cm4gcDtcbiAgfVxuXG4gIGZ1bmN0aW9uIHByb21pc2lmeUN1cnNvclJlcXVlc3RDYWxsKG9iaiwgbWV0aG9kLCBhcmdzKSB7XG4gICAgdmFyIHAgPSBwcm9taXNpZnlSZXF1ZXN0Q2FsbChvYmosIG1ldGhvZCwgYXJncyk7XG4gICAgcmV0dXJuIHAudGhlbihmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgaWYgKCF2YWx1ZSkgcmV0dXJuO1xuICAgICAgcmV0dXJuIG5ldyBDdXJzb3IodmFsdWUsIHAucmVxdWVzdCk7XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBwcm94eVByb3BlcnRpZXMoUHJveHlDbGFzcywgdGFyZ2V0UHJvcCwgcHJvcGVydGllcykge1xuICAgIHByb3BlcnRpZXMuZm9yRWFjaChmdW5jdGlvbihwcm9wKSB7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoUHJveHlDbGFzcy5wcm90b3R5cGUsIHByb3AsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICByZXR1cm4gdGhpc1t0YXJnZXRQcm9wXVtwcm9wXTtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbih2YWwpIHtcbiAgICAgICAgICB0aGlzW3RhcmdldFByb3BdW3Byb3BdID0gdmFsO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHByb3h5UmVxdWVzdE1ldGhvZHMoUHJveHlDbGFzcywgdGFyZ2V0UHJvcCwgQ29uc3RydWN0b3IsIHByb3BlcnRpZXMpIHtcbiAgICBwcm9wZXJ0aWVzLmZvckVhY2goZnVuY3Rpb24ocHJvcCkge1xuICAgICAgaWYgKCEocHJvcCBpbiBDb25zdHJ1Y3Rvci5wcm90b3R5cGUpKSByZXR1cm47XG4gICAgICBQcm94eUNsYXNzLnByb3RvdHlwZVtwcm9wXSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gcHJvbWlzaWZ5UmVxdWVzdENhbGwodGhpc1t0YXJnZXRQcm9wXSwgcHJvcCwgYXJndW1lbnRzKTtcbiAgICAgIH07XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBwcm94eU1ldGhvZHMoUHJveHlDbGFzcywgdGFyZ2V0UHJvcCwgQ29uc3RydWN0b3IsIHByb3BlcnRpZXMpIHtcbiAgICBwcm9wZXJ0aWVzLmZvckVhY2goZnVuY3Rpb24ocHJvcCkge1xuICAgICAgaWYgKCEocHJvcCBpbiBDb25zdHJ1Y3Rvci5wcm90b3R5cGUpKSByZXR1cm47XG4gICAgICBQcm94eUNsYXNzLnByb3RvdHlwZVtwcm9wXSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpc1t0YXJnZXRQcm9wXVtwcm9wXS5hcHBseSh0aGlzW3RhcmdldFByb3BdLCBhcmd1bWVudHMpO1xuICAgICAgfTtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHByb3h5Q3Vyc29yUmVxdWVzdE1ldGhvZHMoUHJveHlDbGFzcywgdGFyZ2V0UHJvcCwgQ29uc3RydWN0b3IsIHByb3BlcnRpZXMpIHtcbiAgICBwcm9wZXJ0aWVzLmZvckVhY2goZnVuY3Rpb24ocHJvcCkge1xuICAgICAgaWYgKCEocHJvcCBpbiBDb25zdHJ1Y3Rvci5wcm90b3R5cGUpKSByZXR1cm47XG4gICAgICBQcm94eUNsYXNzLnByb3RvdHlwZVtwcm9wXSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gcHJvbWlzaWZ5Q3Vyc29yUmVxdWVzdENhbGwodGhpc1t0YXJnZXRQcm9wXSwgcHJvcCwgYXJndW1lbnRzKTtcbiAgICAgIH07XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBJbmRleChpbmRleCkge1xuICAgIHRoaXMuX2luZGV4ID0gaW5kZXg7XG4gIH1cblxuICBwcm94eVByb3BlcnRpZXMoSW5kZXgsICdfaW5kZXgnLCBbXG4gICAgJ25hbWUnLFxuICAgICdrZXlQYXRoJyxcbiAgICAnbXVsdGlFbnRyeScsXG4gICAgJ3VuaXF1ZSdcbiAgXSk7XG5cbiAgcHJveHlSZXF1ZXN0TWV0aG9kcyhJbmRleCwgJ19pbmRleCcsIElEQkluZGV4LCBbXG4gICAgJ2dldCcsXG4gICAgJ2dldEtleScsXG4gICAgJ2dldEFsbCcsXG4gICAgJ2dldEFsbEtleXMnLFxuICAgICdjb3VudCdcbiAgXSk7XG5cbiAgcHJveHlDdXJzb3JSZXF1ZXN0TWV0aG9kcyhJbmRleCwgJ19pbmRleCcsIElEQkluZGV4LCBbXG4gICAgJ29wZW5DdXJzb3InLFxuICAgICdvcGVuS2V5Q3Vyc29yJ1xuICBdKTtcblxuICBmdW5jdGlvbiBDdXJzb3IoY3Vyc29yLCByZXF1ZXN0KSB7XG4gICAgdGhpcy5fY3Vyc29yID0gY3Vyc29yO1xuICAgIHRoaXMuX3JlcXVlc3QgPSByZXF1ZXN0O1xuICB9XG5cbiAgcHJveHlQcm9wZXJ0aWVzKEN1cnNvciwgJ19jdXJzb3InLCBbXG4gICAgJ2RpcmVjdGlvbicsXG4gICAgJ2tleScsXG4gICAgJ3ByaW1hcnlLZXknLFxuICAgICd2YWx1ZSdcbiAgXSk7XG5cbiAgcHJveHlSZXF1ZXN0TWV0aG9kcyhDdXJzb3IsICdfY3Vyc29yJywgSURCQ3Vyc29yLCBbXG4gICAgJ3VwZGF0ZScsXG4gICAgJ2RlbGV0ZSdcbiAgXSk7XG5cbiAgLy8gcHJveHkgJ25leHQnIG1ldGhvZHNcbiAgWydhZHZhbmNlJywgJ2NvbnRpbnVlJywgJ2NvbnRpbnVlUHJpbWFyeUtleSddLmZvckVhY2goZnVuY3Rpb24obWV0aG9kTmFtZSkge1xuICAgIGlmICghKG1ldGhvZE5hbWUgaW4gSURCQ3Vyc29yLnByb3RvdHlwZSkpIHJldHVybjtcbiAgICBDdXJzb3IucHJvdG90eXBlW21ldGhvZE5hbWVdID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgY3Vyc29yID0gdGhpcztcbiAgICAgIHZhciBhcmdzID0gYXJndW1lbnRzO1xuICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgIGN1cnNvci5fY3Vyc29yW21ldGhvZE5hbWVdLmFwcGx5KGN1cnNvci5fY3Vyc29yLCBhcmdzKTtcbiAgICAgICAgcmV0dXJuIHByb21pc2lmeVJlcXVlc3QoY3Vyc29yLl9yZXF1ZXN0KS50aGVuKGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgaWYgKCF2YWx1ZSkgcmV0dXJuO1xuICAgICAgICAgIHJldHVybiBuZXcgQ3Vyc29yKHZhbHVlLCBjdXJzb3IuX3JlcXVlc3QpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH07XG4gIH0pO1xuXG4gIGZ1bmN0aW9uIE9iamVjdFN0b3JlKHN0b3JlKSB7XG4gICAgdGhpcy5fc3RvcmUgPSBzdG9yZTtcbiAgfVxuXG4gIE9iamVjdFN0b3JlLnByb3RvdHlwZS5jcmVhdGVJbmRleCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBuZXcgSW5kZXgodGhpcy5fc3RvcmUuY3JlYXRlSW5kZXguYXBwbHkodGhpcy5fc3RvcmUsIGFyZ3VtZW50cykpO1xuICB9O1xuXG4gIE9iamVjdFN0b3JlLnByb3RvdHlwZS5pbmRleCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBuZXcgSW5kZXgodGhpcy5fc3RvcmUuaW5kZXguYXBwbHkodGhpcy5fc3RvcmUsIGFyZ3VtZW50cykpO1xuICB9O1xuXG4gIHByb3h5UHJvcGVydGllcyhPYmplY3RTdG9yZSwgJ19zdG9yZScsIFtcbiAgICAnbmFtZScsXG4gICAgJ2tleVBhdGgnLFxuICAgICdpbmRleE5hbWVzJyxcbiAgICAnYXV0b0luY3JlbWVudCdcbiAgXSk7XG5cbiAgcHJveHlSZXF1ZXN0TWV0aG9kcyhPYmplY3RTdG9yZSwgJ19zdG9yZScsIElEQk9iamVjdFN0b3JlLCBbXG4gICAgJ3B1dCcsXG4gICAgJ2FkZCcsXG4gICAgJ2RlbGV0ZScsXG4gICAgJ2NsZWFyJyxcbiAgICAnZ2V0JyxcbiAgICAnZ2V0QWxsJyxcbiAgICAnZ2V0S2V5JyxcbiAgICAnZ2V0QWxsS2V5cycsXG4gICAgJ2NvdW50J1xuICBdKTtcblxuICBwcm94eUN1cnNvclJlcXVlc3RNZXRob2RzKE9iamVjdFN0b3JlLCAnX3N0b3JlJywgSURCT2JqZWN0U3RvcmUsIFtcbiAgICAnb3BlbkN1cnNvcicsXG4gICAgJ29wZW5LZXlDdXJzb3InXG4gIF0pO1xuXG4gIHByb3h5TWV0aG9kcyhPYmplY3RTdG9yZSwgJ19zdG9yZScsIElEQk9iamVjdFN0b3JlLCBbXG4gICAgJ2RlbGV0ZUluZGV4J1xuICBdKTtcblxuICBmdW5jdGlvbiBUcmFuc2FjdGlvbihpZGJUcmFuc2FjdGlvbikge1xuICAgIHRoaXMuX3R4ID0gaWRiVHJhbnNhY3Rpb247XG4gICAgdGhpcy5jb21wbGV0ZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgaWRiVHJhbnNhY3Rpb24ub25jb21wbGV0ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXNvbHZlKCk7XG4gICAgICB9O1xuICAgICAgaWRiVHJhbnNhY3Rpb24ub25lcnJvciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZWplY3QoaWRiVHJhbnNhY3Rpb24uZXJyb3IpO1xuICAgICAgfTtcbiAgICAgIGlkYlRyYW5zYWN0aW9uLm9uYWJvcnQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmVqZWN0KGlkYlRyYW5zYWN0aW9uLmVycm9yKTtcbiAgICAgIH07XG4gICAgfSk7XG4gIH1cblxuICBUcmFuc2FjdGlvbi5wcm90b3R5cGUub2JqZWN0U3RvcmUgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gbmV3IE9iamVjdFN0b3JlKHRoaXMuX3R4Lm9iamVjdFN0b3JlLmFwcGx5KHRoaXMuX3R4LCBhcmd1bWVudHMpKTtcbiAgfTtcblxuICBwcm94eVByb3BlcnRpZXMoVHJhbnNhY3Rpb24sICdfdHgnLCBbXG4gICAgJ29iamVjdFN0b3JlTmFtZXMnLFxuICAgICdtb2RlJ1xuICBdKTtcblxuICBwcm94eU1ldGhvZHMoVHJhbnNhY3Rpb24sICdfdHgnLCBJREJUcmFuc2FjdGlvbiwgW1xuICAgICdhYm9ydCdcbiAgXSk7XG5cbiAgZnVuY3Rpb24gVXBncmFkZURCKGRiLCBvbGRWZXJzaW9uLCB0cmFuc2FjdGlvbikge1xuICAgIHRoaXMuX2RiID0gZGI7XG4gICAgdGhpcy5vbGRWZXJzaW9uID0gb2xkVmVyc2lvbjtcbiAgICB0aGlzLnRyYW5zYWN0aW9uID0gbmV3IFRyYW5zYWN0aW9uKHRyYW5zYWN0aW9uKTtcbiAgfVxuXG4gIFVwZ3JhZGVEQi5wcm90b3R5cGUuY3JlYXRlT2JqZWN0U3RvcmUgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gbmV3IE9iamVjdFN0b3JlKHRoaXMuX2RiLmNyZWF0ZU9iamVjdFN0b3JlLmFwcGx5KHRoaXMuX2RiLCBhcmd1bWVudHMpKTtcbiAgfTtcblxuICBwcm94eVByb3BlcnRpZXMoVXBncmFkZURCLCAnX2RiJywgW1xuICAgICduYW1lJyxcbiAgICAndmVyc2lvbicsXG4gICAgJ29iamVjdFN0b3JlTmFtZXMnXG4gIF0pO1xuXG4gIHByb3h5TWV0aG9kcyhVcGdyYWRlREIsICdfZGInLCBJREJEYXRhYmFzZSwgW1xuICAgICdkZWxldGVPYmplY3RTdG9yZScsXG4gICAgJ2Nsb3NlJ1xuICBdKTtcblxuICBmdW5jdGlvbiBEQihkYikge1xuICAgIHRoaXMuX2RiID0gZGI7XG4gIH1cblxuICBEQi5wcm90b3R5cGUudHJhbnNhY3Rpb24gPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gbmV3IFRyYW5zYWN0aW9uKHRoaXMuX2RiLnRyYW5zYWN0aW9uLmFwcGx5KHRoaXMuX2RiLCBhcmd1bWVudHMpKTtcbiAgfTtcblxuICBwcm94eVByb3BlcnRpZXMoREIsICdfZGInLCBbXG4gICAgJ25hbWUnLFxuICAgICd2ZXJzaW9uJyxcbiAgICAnb2JqZWN0U3RvcmVOYW1lcydcbiAgXSk7XG5cbiAgcHJveHlNZXRob2RzKERCLCAnX2RiJywgSURCRGF0YWJhc2UsIFtcbiAgICAnY2xvc2UnXG4gIF0pO1xuXG4gIC8vIEFkZCBjdXJzb3IgaXRlcmF0b3JzXG4gIC8vIFRPRE86IHJlbW92ZSB0aGlzIG9uY2UgYnJvd3NlcnMgZG8gdGhlIHJpZ2h0IHRoaW5nIHdpdGggcHJvbWlzZXNcbiAgWydvcGVuQ3Vyc29yJywgJ29wZW5LZXlDdXJzb3InXS5mb3JFYWNoKGZ1bmN0aW9uKGZ1bmNOYW1lKSB7XG4gICAgW09iamVjdFN0b3JlLCBJbmRleF0uZm9yRWFjaChmdW5jdGlvbihDb25zdHJ1Y3Rvcikge1xuICAgICAgLy8gRG9uJ3QgY3JlYXRlIGl0ZXJhdGVLZXlDdXJzb3IgaWYgb3BlbktleUN1cnNvciBkb2Vzbid0IGV4aXN0LlxuICAgICAgaWYgKCEoZnVuY05hbWUgaW4gQ29uc3RydWN0b3IucHJvdG90eXBlKSkgcmV0dXJuO1xuXG4gICAgICBDb25zdHJ1Y3Rvci5wcm90b3R5cGVbZnVuY05hbWUucmVwbGFjZSgnb3BlbicsICdpdGVyYXRlJyldID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBhcmdzID0gdG9BcnJheShhcmd1bWVudHMpO1xuICAgICAgICB2YXIgY2FsbGJhY2sgPSBhcmdzW2FyZ3MubGVuZ3RoIC0gMV07XG4gICAgICAgIHZhciBuYXRpdmVPYmplY3QgPSB0aGlzLl9zdG9yZSB8fCB0aGlzLl9pbmRleDtcbiAgICAgICAgdmFyIHJlcXVlc3QgPSBuYXRpdmVPYmplY3RbZnVuY05hbWVdLmFwcGx5KG5hdGl2ZU9iamVjdCwgYXJncy5zbGljZSgwLCAtMSkpO1xuICAgICAgICByZXF1ZXN0Lm9uc3VjY2VzcyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGNhbGxiYWNrKHJlcXVlc3QucmVzdWx0KTtcbiAgICAgICAgfTtcbiAgICAgIH07XG4gICAgfSk7XG4gIH0pO1xuXG4gIC8vIHBvbHlmaWxsIGdldEFsbFxuICBbSW5kZXgsIE9iamVjdFN0b3JlXS5mb3JFYWNoKGZ1bmN0aW9uKENvbnN0cnVjdG9yKSB7XG4gICAgaWYgKENvbnN0cnVjdG9yLnByb3RvdHlwZS5nZXRBbGwpIHJldHVybjtcbiAgICBDb25zdHJ1Y3Rvci5wcm90b3R5cGUuZ2V0QWxsID0gZnVuY3Rpb24ocXVlcnksIGNvdW50KSB7XG4gICAgICB2YXIgaW5zdGFuY2UgPSB0aGlzO1xuICAgICAgdmFyIGl0ZW1zID0gW107XG5cbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlKSB7XG4gICAgICAgIGluc3RhbmNlLml0ZXJhdGVDdXJzb3IocXVlcnksIGZ1bmN0aW9uKGN1cnNvcikge1xuICAgICAgICAgIGlmICghY3Vyc29yKSB7XG4gICAgICAgICAgICByZXNvbHZlKGl0ZW1zKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgICAgaXRlbXMucHVzaChjdXJzb3IudmFsdWUpO1xuXG4gICAgICAgICAgaWYgKGNvdW50ICE9PSB1bmRlZmluZWQgJiYgaXRlbXMubGVuZ3RoID09IGNvdW50KSB7XG4gICAgICAgICAgICByZXNvbHZlKGl0ZW1zKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgICAgY3Vyc29yLmNvbnRpbnVlKCk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfTtcbiAgfSk7XG5cbiAgZnVuY3Rpb24gb3BlbkRiKG5hbWUsIHZlcnNpb24sIHVwZ3JhZGVDYWxsYmFjaykge1xuICAgIHZhciBwID0gcHJvbWlzaWZ5UmVxdWVzdENhbGwoaW5kZXhlZERCLCAnb3BlbicsIFtuYW1lLCB2ZXJzaW9uXSk7XG4gICAgdmFyIHJlcXVlc3QgPSBwLnJlcXVlc3Q7XG5cbiAgICBpZiAocmVxdWVzdCkge1xuICAgICAgcmVxdWVzdC5vbnVwZ3JhZGVuZWVkZWQgPSBmdW5jdGlvbihldmVudCkge1xuICAgICAgICBpZiAodXBncmFkZUNhbGxiYWNrKSB7XG4gICAgICAgICAgdXBncmFkZUNhbGxiYWNrKG5ldyBVcGdyYWRlREIocmVxdWVzdC5yZXN1bHQsIGV2ZW50Lm9sZFZlcnNpb24sIHJlcXVlc3QudHJhbnNhY3Rpb24pKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9XG5cbiAgICByZXR1cm4gcC50aGVuKGZ1bmN0aW9uKGRiKSB7XG4gICAgICByZXR1cm4gbmV3IERCKGRiKTtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGRlbGV0ZURiKG5hbWUpIHtcbiAgICByZXR1cm4gcHJvbWlzaWZ5UmVxdWVzdENhbGwoaW5kZXhlZERCLCAnZGVsZXRlRGF0YWJhc2UnLCBbbmFtZV0pO1xuICB9XG5cbiAgZXhwb3J0cy5vcGVuRGIgPSBvcGVuRGI7XG4gIGV4cG9ydHMuZGVsZXRlRGIgPSBkZWxldGVEYjtcblxuICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuXG59KSk7XG4iLCJ2YXIgYXBpID0gcmVxdWlyZShcIiEuLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbmplY3RTdHlsZXNJbnRvU3R5bGVUYWcuanNcIik7XG4gICAgICAgICAgICB2YXIgY29udGVudCA9IHJlcXVpcmUoXCIhIS4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvY2pzLmpzIS4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9kaXN0L2Nqcy5qcz8/cmVmLS03LTIhLi9zdHlsZXMuc2Nzc1wiKTtcblxuICAgICAgICAgICAgY29udGVudCA9IGNvbnRlbnQuX19lc01vZHVsZSA/IGNvbnRlbnQuZGVmYXVsdCA6IGNvbnRlbnQ7XG5cbiAgICAgICAgICAgIGlmICh0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xuICAgICAgICAgICAgfVxuXG52YXIgb3B0aW9ucyA9IHt9O1xuXG5vcHRpb25zLmluc2VydCA9IFwiaGVhZFwiO1xub3B0aW9ucy5zaW5nbGV0b24gPSBmYWxzZTtcblxudmFyIHVwZGF0ZSA9IGFwaShjb250ZW50LCBvcHRpb25zKTtcblxuXG5cbm1vZHVsZS5leHBvcnRzID0gY29udGVudC5sb2NhbHMgfHwge307IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBpc09sZElFID0gZnVuY3Rpb24gaXNPbGRJRSgpIHtcbiAgdmFyIG1lbW87XG4gIHJldHVybiBmdW5jdGlvbiBtZW1vcml6ZSgpIHtcbiAgICBpZiAodHlwZW9mIG1lbW8gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAvLyBUZXN0IGZvciBJRSA8PSA5IGFzIHByb3Bvc2VkIGJ5IEJyb3dzZXJoYWNrc1xuICAgICAgLy8gQHNlZSBodHRwOi8vYnJvd3NlcmhhY2tzLmNvbS8jaGFjay1lNzFkODY5MmY2NTMzNDE3M2ZlZTcxNWMyMjJjYjgwNVxuICAgICAgLy8gVGVzdHMgZm9yIGV4aXN0ZW5jZSBvZiBzdGFuZGFyZCBnbG9iYWxzIGlzIHRvIGFsbG93IHN0eWxlLWxvYWRlclxuICAgICAgLy8gdG8gb3BlcmF0ZSBjb3JyZWN0bHkgaW50byBub24tc3RhbmRhcmQgZW52aXJvbm1lbnRzXG4gICAgICAvLyBAc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS93ZWJwYWNrLWNvbnRyaWIvc3R5bGUtbG9hZGVyL2lzc3Vlcy8xNzdcbiAgICAgIG1lbW8gPSBCb29sZWFuKHdpbmRvdyAmJiBkb2N1bWVudCAmJiBkb2N1bWVudC5hbGwgJiYgIXdpbmRvdy5hdG9iKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbWVtbztcbiAgfTtcbn0oKTtcblxudmFyIGdldFRhcmdldCA9IGZ1bmN0aW9uIGdldFRhcmdldCgpIHtcbiAgdmFyIG1lbW8gPSB7fTtcbiAgcmV0dXJuIGZ1bmN0aW9uIG1lbW9yaXplKHRhcmdldCkge1xuICAgIGlmICh0eXBlb2YgbWVtb1t0YXJnZXRdID09PSAndW5kZWZpbmVkJykge1xuICAgICAgdmFyIHN0eWxlVGFyZ2V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0YXJnZXQpOyAvLyBTcGVjaWFsIGNhc2UgdG8gcmV0dXJuIGhlYWQgb2YgaWZyYW1lIGluc3RlYWQgb2YgaWZyYW1lIGl0c2VsZlxuXG4gICAgICBpZiAod2luZG93LkhUTUxJRnJhbWVFbGVtZW50ICYmIHN0eWxlVGFyZ2V0IGluc3RhbmNlb2Ygd2luZG93LkhUTUxJRnJhbWVFbGVtZW50KSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgLy8gVGhpcyB3aWxsIHRocm93IGFuIGV4Y2VwdGlvbiBpZiBhY2Nlc3MgdG8gaWZyYW1lIGlzIGJsb2NrZWRcbiAgICAgICAgICAvLyBkdWUgdG8gY3Jvc3Mtb3JpZ2luIHJlc3RyaWN0aW9uc1xuICAgICAgICAgIHN0eWxlVGFyZ2V0ID0gc3R5bGVUYXJnZXQuY29udGVudERvY3VtZW50LmhlYWQ7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAvLyBpc3RhbmJ1bCBpZ25vcmUgbmV4dFxuICAgICAgICAgIHN0eWxlVGFyZ2V0ID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBtZW1vW3RhcmdldF0gPSBzdHlsZVRhcmdldDtcbiAgICB9XG5cbiAgICByZXR1cm4gbWVtb1t0YXJnZXRdO1xuICB9O1xufSgpO1xuXG52YXIgc3R5bGVzSW5Eb20gPSBbXTtcblxuZnVuY3Rpb24gZ2V0SW5kZXhCeUlkZW50aWZpZXIoaWRlbnRpZmllcikge1xuICB2YXIgcmVzdWx0ID0gLTE7XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHlsZXNJbkRvbS5sZW5ndGg7IGkrKykge1xuICAgIGlmIChzdHlsZXNJbkRvbVtpXS5pZGVudGlmaWVyID09PSBpZGVudGlmaWVyKSB7XG4gICAgICByZXN1bHQgPSBpO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuZnVuY3Rpb24gbW9kdWxlc1RvRG9tKGxpc3QsIG9wdGlvbnMpIHtcbiAgdmFyIGlkQ291bnRNYXAgPSB7fTtcbiAgdmFyIGlkZW50aWZpZXJzID0gW107XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGl0ZW0gPSBsaXN0W2ldO1xuICAgIHZhciBpZCA9IG9wdGlvbnMuYmFzZSA/IGl0ZW1bMF0gKyBvcHRpb25zLmJhc2UgOiBpdGVtWzBdO1xuICAgIHZhciBjb3VudCA9IGlkQ291bnRNYXBbaWRdIHx8IDA7XG4gICAgdmFyIGlkZW50aWZpZXIgPSBcIlwiLmNvbmNhdChpZCwgXCIgXCIpLmNvbmNhdChjb3VudCk7XG4gICAgaWRDb3VudE1hcFtpZF0gPSBjb3VudCArIDE7XG4gICAgdmFyIGluZGV4ID0gZ2V0SW5kZXhCeUlkZW50aWZpZXIoaWRlbnRpZmllcik7XG4gICAgdmFyIG9iaiA9IHtcbiAgICAgIGNzczogaXRlbVsxXSxcbiAgICAgIG1lZGlhOiBpdGVtWzJdLFxuICAgICAgc291cmNlTWFwOiBpdGVtWzNdXG4gICAgfTtcblxuICAgIGlmIChpbmRleCAhPT0gLTEpIHtcbiAgICAgIHN0eWxlc0luRG9tW2luZGV4XS5yZWZlcmVuY2VzKys7XG4gICAgICBzdHlsZXNJbkRvbVtpbmRleF0udXBkYXRlcihvYmopO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdHlsZXNJbkRvbS5wdXNoKHtcbiAgICAgICAgaWRlbnRpZmllcjogaWRlbnRpZmllcixcbiAgICAgICAgdXBkYXRlcjogYWRkU3R5bGUob2JqLCBvcHRpb25zKSxcbiAgICAgICAgcmVmZXJlbmNlczogMVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWRlbnRpZmllcnMucHVzaChpZGVudGlmaWVyKTtcbiAgfVxuXG4gIHJldHVybiBpZGVudGlmaWVycztcbn1cblxuZnVuY3Rpb24gaW5zZXJ0U3R5bGVFbGVtZW50KG9wdGlvbnMpIHtcbiAgdmFyIHN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcbiAgdmFyIGF0dHJpYnV0ZXMgPSBvcHRpb25zLmF0dHJpYnV0ZXMgfHwge307XG5cbiAgaWYgKHR5cGVvZiBhdHRyaWJ1dGVzLm5vbmNlID09PSAndW5kZWZpbmVkJykge1xuICAgIHZhciBub25jZSA9IHR5cGVvZiBfX3dlYnBhY2tfbm9uY2VfXyAhPT0gJ3VuZGVmaW5lZCcgPyBfX3dlYnBhY2tfbm9uY2VfXyA6IG51bGw7XG5cbiAgICBpZiAobm9uY2UpIHtcbiAgICAgIGF0dHJpYnV0ZXMubm9uY2UgPSBub25jZTtcbiAgICB9XG4gIH1cblxuICBPYmplY3Qua2V5cyhhdHRyaWJ1dGVzKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICBzdHlsZS5zZXRBdHRyaWJ1dGUoa2V5LCBhdHRyaWJ1dGVzW2tleV0pO1xuICB9KTtcblxuICBpZiAodHlwZW9mIG9wdGlvbnMuaW5zZXJ0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgb3B0aW9ucy5pbnNlcnQoc3R5bGUpO1xuICB9IGVsc2Uge1xuICAgIHZhciB0YXJnZXQgPSBnZXRUYXJnZXQob3B0aW9ucy5pbnNlcnQgfHwgJ2hlYWQnKTtcblxuICAgIGlmICghdGFyZ2V0KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDb3VsZG4ndCBmaW5kIGEgc3R5bGUgdGFyZ2V0LiBUaGlzIHByb2JhYmx5IG1lYW5zIHRoYXQgdGhlIHZhbHVlIGZvciB0aGUgJ2luc2VydCcgcGFyYW1ldGVyIGlzIGludmFsaWQuXCIpO1xuICAgIH1cblxuICAgIHRhcmdldC5hcHBlbmRDaGlsZChzdHlsZSk7XG4gIH1cblxuICByZXR1cm4gc3R5bGU7XG59XG5cbmZ1bmN0aW9uIHJlbW92ZVN0eWxlRWxlbWVudChzdHlsZSkge1xuICAvLyBpc3RhbmJ1bCBpZ25vcmUgaWZcbiAgaWYgKHN0eWxlLnBhcmVudE5vZGUgPT09IG51bGwpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBzdHlsZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHN0eWxlKTtcbn1cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICAqL1xuXG5cbnZhciByZXBsYWNlVGV4dCA9IGZ1bmN0aW9uIHJlcGxhY2VUZXh0KCkge1xuICB2YXIgdGV4dFN0b3JlID0gW107XG4gIHJldHVybiBmdW5jdGlvbiByZXBsYWNlKGluZGV4LCByZXBsYWNlbWVudCkge1xuICAgIHRleHRTdG9yZVtpbmRleF0gPSByZXBsYWNlbWVudDtcbiAgICByZXR1cm4gdGV4dFN0b3JlLmZpbHRlcihCb29sZWFuKS5qb2luKCdcXG4nKTtcbiAgfTtcbn0oKTtcblxuZnVuY3Rpb24gYXBwbHlUb1NpbmdsZXRvblRhZyhzdHlsZSwgaW5kZXgsIHJlbW92ZSwgb2JqKSB7XG4gIHZhciBjc3MgPSByZW1vdmUgPyAnJyA6IG9iai5tZWRpYSA/IFwiQG1lZGlhIFwiLmNvbmNhdChvYmoubWVkaWEsIFwiIHtcIikuY29uY2F0KG9iai5jc3MsIFwifVwiKSA6IG9iai5jc3M7IC8vIEZvciBvbGQgSUVcblxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgICovXG5cbiAgaWYgKHN0eWxlLnN0eWxlU2hlZXQpIHtcbiAgICBzdHlsZS5zdHlsZVNoZWV0LmNzc1RleHQgPSByZXBsYWNlVGV4dChpbmRleCwgY3NzKTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgY3NzTm9kZSA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNzcyk7XG4gICAgdmFyIGNoaWxkTm9kZXMgPSBzdHlsZS5jaGlsZE5vZGVzO1xuXG4gICAgaWYgKGNoaWxkTm9kZXNbaW5kZXhdKSB7XG4gICAgICBzdHlsZS5yZW1vdmVDaGlsZChjaGlsZE5vZGVzW2luZGV4XSk7XG4gICAgfVxuXG4gICAgaWYgKGNoaWxkTm9kZXMubGVuZ3RoKSB7XG4gICAgICBzdHlsZS5pbnNlcnRCZWZvcmUoY3NzTm9kZSwgY2hpbGROb2Rlc1tpbmRleF0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdHlsZS5hcHBlbmRDaGlsZChjc3NOb2RlKTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gYXBwbHlUb1RhZyhzdHlsZSwgb3B0aW9ucywgb2JqKSB7XG4gIHZhciBjc3MgPSBvYmouY3NzO1xuICB2YXIgbWVkaWEgPSBvYmoubWVkaWE7XG4gIHZhciBzb3VyY2VNYXAgPSBvYmouc291cmNlTWFwO1xuXG4gIGlmIChtZWRpYSkge1xuICAgIHN0eWxlLnNldEF0dHJpYnV0ZSgnbWVkaWEnLCBtZWRpYSk7XG4gIH0gZWxzZSB7XG4gICAgc3R5bGUucmVtb3ZlQXR0cmlidXRlKCdtZWRpYScpO1xuICB9XG5cbiAgaWYgKHNvdXJjZU1hcCAmJiBidG9hKSB7XG4gICAgY3NzICs9IFwiXFxuLyojIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCxcIi5jb25jYXQoYnRvYSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoc291cmNlTWFwKSkpKSwgXCIgKi9cIik7XG4gIH0gLy8gRm9yIG9sZCBJRVxuXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAgKi9cblxuXG4gIGlmIChzdHlsZS5zdHlsZVNoZWV0KSB7XG4gICAgc3R5bGUuc3R5bGVTaGVldC5jc3NUZXh0ID0gY3NzO1xuICB9IGVsc2Uge1xuICAgIHdoaWxlIChzdHlsZS5maXJzdENoaWxkKSB7XG4gICAgICBzdHlsZS5yZW1vdmVDaGlsZChzdHlsZS5maXJzdENoaWxkKTtcbiAgICB9XG5cbiAgICBzdHlsZS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjc3MpKTtcbiAgfVxufVxuXG52YXIgc2luZ2xldG9uID0gbnVsbDtcbnZhciBzaW5nbGV0b25Db3VudGVyID0gMDtcblxuZnVuY3Rpb24gYWRkU3R5bGUob2JqLCBvcHRpb25zKSB7XG4gIHZhciBzdHlsZTtcbiAgdmFyIHVwZGF0ZTtcbiAgdmFyIHJlbW92ZTtcblxuICBpZiAob3B0aW9ucy5zaW5nbGV0b24pIHtcbiAgICB2YXIgc3R5bGVJbmRleCA9IHNpbmdsZXRvbkNvdW50ZXIrKztcbiAgICBzdHlsZSA9IHNpbmdsZXRvbiB8fCAoc2luZ2xldG9uID0gaW5zZXJ0U3R5bGVFbGVtZW50KG9wdGlvbnMpKTtcbiAgICB1cGRhdGUgPSBhcHBseVRvU2luZ2xldG9uVGFnLmJpbmQobnVsbCwgc3R5bGUsIHN0eWxlSW5kZXgsIGZhbHNlKTtcbiAgICByZW1vdmUgPSBhcHBseVRvU2luZ2xldG9uVGFnLmJpbmQobnVsbCwgc3R5bGUsIHN0eWxlSW5kZXgsIHRydWUpO1xuICB9IGVsc2Uge1xuICAgIHN0eWxlID0gaW5zZXJ0U3R5bGVFbGVtZW50KG9wdGlvbnMpO1xuICAgIHVwZGF0ZSA9IGFwcGx5VG9UYWcuYmluZChudWxsLCBzdHlsZSwgb3B0aW9ucyk7XG5cbiAgICByZW1vdmUgPSBmdW5jdGlvbiByZW1vdmUoKSB7XG4gICAgICByZW1vdmVTdHlsZUVsZW1lbnQoc3R5bGUpO1xuICAgIH07XG4gIH1cblxuICB1cGRhdGUob2JqKTtcbiAgcmV0dXJuIGZ1bmN0aW9uIHVwZGF0ZVN0eWxlKG5ld09iaikge1xuICAgIGlmIChuZXdPYmopIHtcbiAgICAgIGlmIChuZXdPYmouY3NzID09PSBvYmouY3NzICYmIG5ld09iai5tZWRpYSA9PT0gb2JqLm1lZGlhICYmIG5ld09iai5zb3VyY2VNYXAgPT09IG9iai5zb3VyY2VNYXApIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB1cGRhdGUob2JqID0gbmV3T2JqKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVtb3ZlKCk7XG4gICAgfVxuICB9O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChsaXN0LCBvcHRpb25zKSB7XG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9OyAvLyBGb3JjZSBzaW5nbGUtdGFnIHNvbHV0aW9uIG9uIElFNi05LCB3aGljaCBoYXMgYSBoYXJkIGxpbWl0IG9uIHRoZSAjIG9mIDxzdHlsZT5cbiAgLy8gdGFncyBpdCB3aWxsIGFsbG93IG9uIGEgcGFnZVxuXG4gIGlmICghb3B0aW9ucy5zaW5nbGV0b24gJiYgdHlwZW9mIG9wdGlvbnMuc2luZ2xldG9uICE9PSAnYm9vbGVhbicpIHtcbiAgICBvcHRpb25zLnNpbmdsZXRvbiA9IGlzT2xkSUUoKTtcbiAgfVxuXG4gIGxpc3QgPSBsaXN0IHx8IFtdO1xuICB2YXIgbGFzdElkZW50aWZpZXJzID0gbW9kdWxlc1RvRG9tKGxpc3QsIG9wdGlvbnMpO1xuICByZXR1cm4gZnVuY3Rpb24gdXBkYXRlKG5ld0xpc3QpIHtcbiAgICBuZXdMaXN0ID0gbmV3TGlzdCB8fCBbXTtcblxuICAgIGlmIChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobmV3TGlzdCkgIT09ICdbb2JqZWN0IEFycmF5XScpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxhc3RJZGVudGlmaWVycy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGlkZW50aWZpZXIgPSBsYXN0SWRlbnRpZmllcnNbaV07XG4gICAgICB2YXIgaW5kZXggPSBnZXRJbmRleEJ5SWRlbnRpZmllcihpZGVudGlmaWVyKTtcbiAgICAgIHN0eWxlc0luRG9tW2luZGV4XS5yZWZlcmVuY2VzLS07XG4gICAgfVxuXG4gICAgdmFyIG5ld0xhc3RJZGVudGlmaWVycyA9IG1vZHVsZXNUb0RvbShuZXdMaXN0LCBvcHRpb25zKTtcblxuICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBsYXN0SWRlbnRpZmllcnMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICB2YXIgX2lkZW50aWZpZXIgPSBsYXN0SWRlbnRpZmllcnNbX2ldO1xuXG4gICAgICB2YXIgX2luZGV4ID0gZ2V0SW5kZXhCeUlkZW50aWZpZXIoX2lkZW50aWZpZXIpO1xuXG4gICAgICBpZiAoc3R5bGVzSW5Eb21bX2luZGV4XS5yZWZlcmVuY2VzID09PSAwKSB7XG4gICAgICAgIHN0eWxlc0luRG9tW19pbmRleF0udXBkYXRlcigpO1xuXG4gICAgICAgIHN0eWxlc0luRG9tLnNwbGljZShfaW5kZXgsIDEpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGxhc3RJZGVudGlmaWVycyA9IG5ld0xhc3RJZGVudGlmaWVycztcbiAgfTtcbn07IiwiLy8gSW1wb3J0c1xudmFyIF9fX0NTU19MT0FERVJfQVBJX0lNUE9SVF9fXyA9IHJlcXVpcmUoXCIuLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvYXBpLmpzXCIpO1xudmFyIF9fX0NTU19MT0FERVJfR0VUX1VSTF9JTVBPUlRfX18gPSByZXF1aXJlKFwiLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL2dldFVybC5qc1wiKTtcbnZhciBfX19DU1NfTE9BREVSX1VSTF9JTVBPUlRfMF9fXyA9IHJlcXVpcmUoXCIuLi9hc3NldHMvaWNvbnMvaGFtYnVyZ2VySWNvbi5zdmdcIik7XG52YXIgX19fQ1NTX0xPQURFUl9VUkxfSU1QT1JUXzFfX18gPSByZXF1aXJlKFwiLi4vYXNzZXRzL2ljb25zL2Nyb3NzSWNvbi5zdmdcIik7XG52YXIgX19fQ1NTX0xPQURFUl9VUkxfSU1QT1JUXzJfX18gPSByZXF1aXJlKFwiLi4vYXNzZXRzL2ljb25zL3Byb2plY3RzTGlzdEljb24uc3ZnXCIpO1xuZXhwb3J0cyA9IF9fX0NTU19MT0FERVJfQVBJX0lNUE9SVF9fXyhmYWxzZSk7XG52YXIgX19fQ1NTX0xPQURFUl9VUkxfUkVQTEFDRU1FTlRfMF9fXyA9IF9fX0NTU19MT0FERVJfR0VUX1VSTF9JTVBPUlRfX18oX19fQ1NTX0xPQURFUl9VUkxfSU1QT1JUXzBfX18pO1xudmFyIF9fX0NTU19MT0FERVJfVVJMX1JFUExBQ0VNRU5UXzFfX18gPSBfX19DU1NfTE9BREVSX0dFVF9VUkxfSU1QT1JUX19fKF9fX0NTU19MT0FERVJfVVJMX0lNUE9SVF8xX19fKTtcbnZhciBfX19DU1NfTE9BREVSX1VSTF9SRVBMQUNFTUVOVF8yX19fID0gX19fQ1NTX0xPQURFUl9HRVRfVVJMX0lNUE9SVF9fXyhfX19DU1NfTE9BREVSX1VSTF9JTVBPUlRfMl9fXyk7XG4vLyBNb2R1bGVcbmV4cG9ydHMucHVzaChbbW9kdWxlLmlkLCBcIi5tYWluUGFuZWx7ZGlzcGxheTpmbGV4O3Bvc2l0aW9uOmFic29sdXRlO2JhY2tncm91bmQtY29sb3I6cmdiYSgyNDYsMjQ2LDI0NiwuOSk7dHJhbnNpdGlvbjpyaWdodCAxcyxib3R0b20gMXM7LS13aWR0aDogMjUwcHg7LS1oZWlnaHQ6IDIwMHB4fS5tYWluUGFuZWwucmlnaHR7aGVpZ2h0OjEwMCU7d2lkdGg6dmFyKC0td2lkdGgpO3RvcDowO3JpZ2h0OmNhbGModmFyKC0td2lkdGgpICogLTEpfS5tYWluUGFuZWwuYm90dG9te2ZsZXgtZGlyZWN0aW9uOmNvbHVtbjtoZWlnaHQ6dmFyKC0taGVpZ2h0KTt3aWR0aDoxMDAlO2JvdHRvbTpjYWxjKHZhcigtLWhlaWdodCkgKiAtMSl9Lm1haW5QYW5lbC5yaWdodD4ucGFuZWwtY29udGVudHt3aWR0aDoxMDAlfS5tYWluUGFuZWwuYm90dG9tPi5wYW5lbC1jb250ZW50e2Rpc3BsYXk6ZmxleDtoZWlnaHQ6MTAwJX0ubWFpblBhbmVsLnJpZ2h0Lm9wZW57cmlnaHQ6MH0ubWFpblBhbmVsLmJvdHRvbS5vcGVue2JvdHRvbTowfS5tYWluUGFuZWw+LnBhbmVsLWdyaXB7YmFja2dyb3VuZDojMmE4ZmIxfS5tYWluUGFuZWwucmlnaHQ+LnBhbmVsLWdyaXB7ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtwYWRkaW5nOjAgNXB4O2N1cnNvcjpjb2wtcmVzaXplfS5tYWluUGFuZWwuYm90dG9tPi5wYW5lbC1ncmlwe3BhZGRpbmc6NXB4IDA7Y3Vyc29yOnJvdy1yZXNpemV9Lm1haW5QYW5lbD4ucGFuZWwtZ3JpcDo6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXCI7ZGlzcGxheTpibG9ja30ubWFpblBhbmVsLnJpZ2h0Pi5wYW5lbC1ncmlwOjpiZWZvcmV7aGVpZ2h0OjI3cHg7Ym9yZGVyLXJpZ2h0OjNweCBkb3VibGUgI2ZmZn0ubWFpblBhbmVsLmJvdHRvbT4ucGFuZWwtZ3JpcDo6YmVmb3Jle3dpZHRoOjI3cHg7Ym9yZGVyLXRvcDozcHggZG91YmxlICNmZmY7bWFyZ2luOmF1dG99Lm1haW5QYW5lbD4ucGFuZWwtY29udGVudD4ucGFuZWwtaGVhZGVye2Rpc3BsYXk6ZmxleDtqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYXJvdW5kO2FsaWduLWl0ZW1zOmNlbnRlcjt0ZXh0LWFsaWduOmNlbnRlcn0ubWFpblBhbmVsLmJvdHRvbT4ucGFuZWwtY29udGVudD4ucGFuZWwtaGVhZGVye2ZsZXgtZGlyZWN0aW9uOmNvbHVtbn0ubWFpblBhbmVsPi5wYW5lbC1jb250ZW50Pi5wYW5lbC1oZWFkZXI+c3BhbntwYWRkaW5nOi4ycmVtO2ZsZXgtZ3JvdzoxfS5tYWluUGFuZWwuYm90dG9tPi5wYW5lbC1jb250ZW50Pi5wYW5lbC1oZWFkZXI+c3Bhbnt3aWR0aDozNXB4O3dyaXRpbmctbW9kZTp2ZXJ0aWNhbC1ybDstd2Via2l0LXdyaXRpbmctbW9kZTp2ZXJ0aWNhbC1ybH0ubWFpblBhbmVsPi5wYW5lbC1jb250ZW50Pi5wYW5lbC1oZWFkZXI+c3Bhbjpub3QoLmFjdGl2ZSl7Y3Vyc29yOnBvaW50ZXI7YmFja2dyb3VuZC1jb2xvcjojZTRlNGU0fS5tYWluUGFuZWwucmlnaHQ+LnBhbmVsLWNvbnRlbnQ+LnBhbmVsLWhlYWRlcj5zcGFuOm5vdCguYWN0aXZlKXtib3JkZXItYm90dG9tOjFweCBzb2xpZCAjYTZhNmE2fS5tYWluUGFuZWwuYm90dG9tPi5wYW5lbC1jb250ZW50Pi5wYW5lbC1oZWFkZXI+c3Bhbjpub3QoLmFjdGl2ZSl7Ym9yZGVyLXJpZ2h0OjFweCBzb2xpZCAjYTZhNmE2fS5tYWluUGFuZWwucmlnaHQ+LnBhbmVsLWNvbnRlbnQ+LnBhbmVsLWhlYWRlcj5zcGFuOm5vdCg6bGFzdC1jaGlsZCl7Ym9yZGVyLXJpZ2h0OjFweCBzb2xpZCAjYTZhNmE2fS5tYWluUGFuZWwuYm90dG9tPi5wYW5lbC1jb250ZW50Pi5wYW5lbC1oZWFkZXI+c3Bhbjpub3QoOmxhc3QtY2hpbGQpe2JvcmRlci1ib3R0b206MXB4IHNvbGlkICNhNmE2YTZ9Lm1haW5QYW5lbD4ucGFuZWwtY29udGVudD4ucGFuZWwtYm9keXtmbGV4LWdyb3c6MTtwYWRkaW5nOi41cmVtfS5tYWluUGFuZWw+LnBhbmVsLWNvbnRlbnQ+LnBhbmVsLWJvZHk+LmhpZGRlbntkaXNwbGF5Om5vbmV9I3Byb2plY3RzTGlzdENvbnRhaW5lcntoZWlnaHQ6MTAwJTt3aWR0aDoxMDAlO3Bvc2l0aW9uOmFic29sdXRlO2JhY2tncm91bmQtY29sb3I6I2ZmZn0jcHJvamVjdHNMaXN0Q29udGFpbmVyPmRpdjpmaXJzdC1jaGlsZHtkaXNwbGF5OmZsZXg7anVzdGlmeS1jb250ZW50OnNwYWNlLWJldHdlZW47cGFkZGluZzoxcmVtfSNwcm9qZWN0c0xpc3RDb250YWluZXI+ZGl2OmZpcnN0LWNoaWxkPnNwYW57d2lkdGg6MjAlfUBtZWRpYShtYXgtd2lkdGg6IDUwMHB4KXsjY2xvc2VQcm9qZWN0c0xpc3RCdG57ZGlzcGxheTpub25lfX0jY2xvc2VQcm9qZWN0c0xpc3RCdG57ZmxvYXQ6cmlnaHR9I3Byb2plY3RzTGlzdENvbnRhaW5lcj5kaXY6Zmlyc3QtY2hpbGQ+aDR7b3ZlcmZsb3cteDpoaWRkZW47Zm9udC13ZWlnaHQ6bm9ybWFsO2ZvbnQtc2l6ZToxLjZyZW19I3Byb2plY3RzTGlzdHtkaXNwbGF5OmZsZXg7ZmxleC13cmFwOndyYXA7bWFyZ2luLWxlZnQ6MXJlbTstLWl0ZW1zLWg6IDY7LS1pdGVtLXdpZHRoOiBjYWxjKCgxMDAlIC8gdmFyKC0taXRlbXMtaCkpIC0gMXJlbSk7LS1yZW1haW5pbmctaXRlbXM6IHVuc2V0fUBtZWRpYShtYXgtd2lkdGg6IDEwMDBweCl7I3Byb2plY3RzTGlzdHstLWl0ZW1zLWg6IDV9fUBtZWRpYShtYXgtd2lkdGg6IDgwMHB4KXsjcHJvamVjdHNMaXN0ey0taXRlbXMtaDogNH19QG1lZGlhKG1heC13aWR0aDogNjAwcHgpeyNwcm9qZWN0c0xpc3R7LS1pdGVtcy1oOiAzfX1AbWVkaWEobWF4LXdpZHRoOiA0MDBweCl7I3Byb2plY3RzTGlzdHstLWl0ZW1zLWg6IDJ9fUBtZWRpYShtYXgtd2lkdGg6IDI4MHB4KXsjcHJvamVjdHNMaXN0ey0taXRlbXMtaDogMX19I3Byb2plY3RzTGlzdDo6YWZ0ZXJ7Y29udGVudDpcXFwiXFxcIjtmbGV4LWdyb3c6dmFyKC0tcmVtYWluaW5nLWl0ZW1zKTt3aWR0aDpjYWxjKCh2YXIoLS1pdGVtLXdpZHRoKSArIDFyZW0pICogdmFyKC0tcmVtYWluaW5nLWl0ZW1zKSl9I3Byb2plY3RzTGlzdD4uZW1wdHktbXNne3dpZHRoOjEwMCU7bWFyZ2luLXRvcDozcmVtO21hcmdpbi1ib3R0b206M3JlbTt0ZXh0LWFsaWduOmNlbnRlcn0ucHJvamVjdEl0ZW17ZmxleC1ncm93OjE7d2lkdGg6dmFyKC0taXRlbS13aWR0aCk7bWFyZ2luLWJvdHRvbToxcmVtO21hcmdpbi1yaWdodDoxcmVtO3Bvc2l0aW9uOnJlbGF0aXZlO2N1cnNvcjpwb2ludGVyO2ZvbnQtZmFtaWx5OmluaGVyaXQ7Ym94LXNoYWRvdzoycHggMnB4IDdweCAjYjJiMmIyfS5wcm9qZWN0SXRlbT5oNHtiYWNrZ3JvdW5kLWNvbG9yOiNmOWY5Zjl9LnByb2plY3RJdGVtLmN1cnJlbnR7Y3Vyc29yOmF1dG87b3V0bGluZTo0cHggc29saWQgIzdkYTViNjtib3gtc2hhZG93Om5vbmV9LnByb2plY3RJdGVtLnVuc3luY3tvcGFjaXR5Oi41fS5wcm9qZWN0SXRlbTpub3QoLmN1cnJlbnQpOmhvdmVye2JveC1zaGFkb3c6MnB4IDJweCA3cHggIzZiNmI2Yn0ucHJvamVjdEl0ZW0+LnNoYXJlZEljb257cG9zaXRpb246YWJzb2x1dGU7d2lkdGg6MzBweDtoZWlnaHQ6MzBweDtyaWdodDo2cHg7dG9wOjZweDtiYWNrZ3JvdW5kLWNvbG9yOiNlZWU7cGFkZGluZzo1cHg7Ym9yZGVyLXJhZGl1czo1MCV9LnByb2plY3RJdGVtPi50aHVtYntkaXNwbGF5OmJsb2NrO3dpZHRoOjEwMCU7aGVpZ2h0OjE1MHB4O29iamVjdC1maXQ6Y292ZXJ9LnByb2plY3RJdGVtPmg0e3BhZGRpbmc6LjZyZW07Zm9udC13ZWlnaHQ6bm9ybWFsfSNsb2FkTW9yZVByb2pCdG57ZGlzcGxheTpibG9jazttYXJnaW46YXV0b30jbW9kYWxEaWFsb2dDb250YWluZXJ7anVzdGlmeS1jb250ZW50OmNlbnRlcjthbGlnbi1pdGVtczpjZW50ZXI7cG9zaXRpb246YWJzb2x1dGU7dG9wOjA7cmlnaHQ6MDtib3R0b206MDtsZWZ0OjB9I21vZGFsRGlhbG9nQ29udGFpbmVyPmRpdntwYWRkaW5nOjFyZW07YmFja2dyb3VuZC1jb2xvcjojZmZmfSNtb2RhbERpYWxvZ0NvbnRhaW5lci5ncmF5VHJhbnNsdWNlbnR7YmFja2dyb3VuZC1jb2xvcjpyZ2JhKDIxNiwyMTYsMjE2LC44KX0jbW9kYWxEaWFsb2dDb250YWluZXIubGlnaHRPcGFxdWV7YmFja2dyb3VuZC1jb2xvcjojZmZmfSNjbG9zZU1vZGFsQnRue2Zsb2F0OnJpZ2h0fSNtb2RhbERpYWxvZ0NvbnRhaW5lciAubW9kYWwtbWFpbi1idG5ze2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpmbGV4LWVuZDtqdXN0aWZ5LWNvbnRlbnQ6ZmxleC1lbmQ7bWFyZ2luLXRvcDouM3JlbX0jbW9kYWxEaWFsb2dDb250YWluZXIgLm1vZGFsLW1haW4tYnRucz5idXR0b246bm90KDpmaXJzdC1jaGlsZCl7bWFyZ2luLWxlZnQ6LjVyZW19I2xvZ2luUGFnZXtmbGV4LWRpcmVjdGlvbjpjb2x1bW47anVzdGlmeS1jb250ZW50OmNlbnRlcjthbGlnbi1pdGVtczpjZW50ZXI7cG9zaXRpb246YWJzb2x1dGU7dG9wOjA7cmlnaHQ6MDtib3R0b206MDtsZWZ0OjA7ei1pbmRleDoxMDA7YmFja2dyb3VuZC1jb2xvcjojZmZmfSNsb2dpblBhZ2U+LmxvZ2luLWJ1dHRvbnN7cG9zaXRpb246YWJzb2x1dGU7cmlnaHQ6MTBweDt0b3A6MTBweH0jbG9naW5QYWdlPi5tYWluLXRpdGxle21hcmdpbi10b3A6MS40cmVtO21hcmdpbi1ib3R0b206MnJlbTtmb250LXNpemU6MnJlbTtmb250LXdlaWdodDo1MDB9I3RyeUl0QnRue3BhZGRpbmc6MXJlbTtib3JkZXItc3R5bGU6bm9uZTtmb250LXNpemU6MnJlbTtmb250LWZhbWlseTpzYW5zLXNlcmlmO2JveC1zaGFkb3c6MHB4IDBweCA4cHggcmdiYSgwLDAsMCwuNik7Y3Vyc29yOnBvaW50ZXJ9I3VwbG9hZEZpbGVGb3Jte2Rpc3BsYXk6ZmxleDtmbGV4LWRpcmVjdGlvbjpjb2x1bW47bWluLXdpZHRoOjIwMHB4O3BhZGRpbmc6MXJlbTtiYWNrZ3JvdW5kLWNvbG9yOiNmZmZ9I3VwbG9hZEZpbGVGb3JtPmlucHV0e2ZvbnQtZmFtaWx5OmluaGVyaXR9I3VwbG9hZEZpbGVGb3JtPmxhYmVse21hcmdpbi10b3A6MXJlbTt0ZXh0LWFsaWduOmNlbnRlcjtjdXJzb3I6cG9pbnRlcjtmb250LXNpemU6LjlyZW19I3VwbG9hZEZpbGVGb3JtPmJ1dHRvbjpsYXN0LWNoaWxke21hcmdpbi10b3A6LjVyZW19I2xvYWRpbmdGaWxle3BhZGRpbmc6MXJlbTt0ZXh0LWFsaWduOmNlbnRlcn0jc2lkZU5hdkNvbnRhaW5lcntkaXNwbGF5OmZsZXg7ZmxleC1kaXJlY3Rpb246Y29sdW1uO3Bvc2l0aW9uOmFic29sdXRlO2hlaWdodDoxMDB2aDt3aWR0aDozMTRweDt0b3A6MDtyaWdodDowO3otaW5kZXg6OTk5O3RyYW5zZm9ybTp0cmFuc2xhdGVYKDMxNHB4KTtiYWNrZ3JvdW5kLWNvbG9yOiNmZmZ9I3NpZGVOYXZDb250YWluZXIuYWN0aXZle3RyYW5zZm9ybTp0cmFuc2xhdGVYKDApfS5zaWRlLW5hdi1oZWFkZXJ7cGFkZGluZy1yaWdodDoxcmVtO3BhZGRpbmctbGVmdDoxcmVtfSN1c2VyLWluZm97ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmZsZXgtZW5kO21hcmdpbi10b3A6dmFyKC0taGVhZGVyLWhlaWdodCl9I3VzZXItaW5mbz5pbWd7bWFyZ2luLXJpZ2h0Oi42cmVtfSN1c2VyLWluZm8+c3BhbntvdmVyZmxvdy14OmhpZGRlbn0jdXNlci1pbmZvPnNwYW4+c3BhbntkaXNwbGF5OmJsb2NrfSN1c2VyLWluZm8gLmVtYWlse2ZvbnQtd2VpZ2h0OmxpZ2h0ZXJ9LnNpZGUtbmF2LWJvZHl7ZGlzcGxheTpmbGV4O2ZsZXgtZGlyZWN0aW9uOmNvbHVtbjthbGlnbi1pdGVtczpjZW50ZXI7ZmxleC1ncm93OjE7cGFkZGluZzoxcmVtO3RleHQtYWxpZ246Y2VudGVyfS5zaWRlLW5hdi1ib2R5IGJ1dHRvbnt3aWR0aDo4MCV9LnNpZGUtbmF2LWJvZHk+LnNpZGUtbmF2LXNlY3Rpb257d2lkdGg6MTAwJTtwYWRkaW5nLWJvdHRvbToxcmVtfS5zaWRlLW5hdi1ib2R5Pi5zaWRlLW5hdi1zZWN0aW9uLmdyb3d7ZmxleC1ncm93OjF9I3NpZGVOYXZUb2dnbGV7d2lkdGg6MjRweDtoZWlnaHQ6MjRweDttYXJnaW46LjRyZW07Y3Vyc29yOnBvaW50ZXI7Ym9yZGVyLXN0eWxlOm5vbmU7YmFja2dyb3VuZC1pbWFnZTp1cmwoXCIgKyBfX19DU1NfTE9BREVSX1VSTF9SRVBMQUNFTUVOVF8wX19fICsgXCIpO2JhY2tncm91bmQtcmVwZWF0Om5vLXJlcGVhdDtiYWNrZ3JvdW5kLXBvc2l0aW9uOmNlbnRlcn0jc2lkZU5hdlRvZ2dsZS5hY3RpdmV7YmFja2dyb3VuZC1pbWFnZTp1cmwoXCIgKyBfX19DU1NfTE9BREVSX1VSTF9SRVBMQUNFTUVOVF8xX19fICsgXCIpfSNzaWRlTmF2Q29udGFpbmVyKy5zaWRlLW5hdi1zaGFkZXtwb3NpdGlvbjphYnNvbHV0ZTt6LWluZGV4OjEwO2JhY2tncm91bmQtY29sb3I6IzAwMDt3aWR0aDoxMDAlO2hlaWdodDoxMDB2aDt0b3A6MDtvcGFjaXR5OjA7bGVmdDoxMDAlO3RyYW5zaXRpb246b3BhY2l0eSAuMjVzIGVhc2Utb3V0LGxlZnQgMHMgbGluZWFyIC4yNXN9I3NpZGVOYXZDb250YWluZXIuYWN0aXZlKy5zaWRlLW5hdi1zaGFkZXtvcGFjaXR5Oi43O2xlZnQ6MDt0cmFuc2l0aW9uOm9wYWNpdHkgLjI1cyBlYXNlLW91dCxsZWZ0IDBzIGxpbmVhcn0uc2lkZS1uYXYtZm9vdGVye3BhZGRpbmc6MXJlbTtmb250LXdlaWdodDpsaWdodGVyfSNjb21tZW50Rm9ybT4uaW5wdXRze21hcmdpbi1ib3R0b206LjhyZW19I2NvbW1lbnRGb3JtPi5pbnB1dHM+dGV4dGFyZWF7d2lkdGg6MTAwJTttaW4taGVpZ2h0OjE1MHB4fSNjb21tZW50Rm9ybS5ob3Jpem9udGFse2Rpc3BsYXk6ZmxleH0jY29tbWVudEZvcm0uaG9yaXpvbnRhbD4uaW5wdXRze2ZsZXgtZ3JvdzoxfSNjb21tZW50Rm9ybS5ob3Jpem9udGFsPi5pbnB1dHM+dGV4dGFyZWF7bWluLWhlaWdodDo2MHB4fSNjb21tZW50Rm9ybT4uaW5wdXRzPi5tZW1iZXJze21hcmdpbi10b3A6LjVyZW19I2NvbW1lbnRGb3JtPi5pbnB1dHM+Lm1lbWJlcnMuaGlkZGVue2Rpc3BsYXk6bm9uZX0jY29tbWVudEZvcm0+LmlucHV0cz4ubWVtYmVycz5wOmZpcnN0LWNoaWxke2ZvbnQtd2VpZ2h0OmxpZ2h0ZXI7bWFyZ2luLWJvdHRvbTouMnJlbX0jY29tbWVudEZvcm0+LmlucHV0cz4ubWVtYmVycz5zZWxlY3R7d2lkdGg6MTAwJX0jY29tbWVudEZvcm0gLmluZm97bWFyZ2luLXRvcDouMXJlbTtmb250LXNpemU6LjdyZW07Zm9udC13ZWlnaHQ6bGlnaHRlcn0jY29tbWVudEZvcm0+LmZvcm1CdXR0b25zTW9kZXM+LmJ1dHRvbnNDb250YWluZXJ7ZGlzcGxheTpmbGV4O2p1c3RpZnktY29udGVudDpzcGFjZS1iZXR3ZWVufSNjb21tZW50Rm9ybS5ob3Jpem9udGFsPi5mb3JtQnV0dG9uc01vZGVze21hcmdpbi1sZWZ0Oi41cmVtfSNjb21tZW50Rm9ybS5ob3Jpem9udGFsPi5mb3JtQnV0dG9uc01vZGVzPi5idXR0b25zQ29udGFpbmVye2ZsZXgtZGlyZWN0aW9uOmNvbHVtbn0jY29tbWVudEZvcm0uaG9yaXpvbnRhbD4uZm9ybUJ1dHRvbnNNb2Rlcz4uYnV0dG9uc0NvbnRhaW5lcj5idXR0b257aGVpZ2h0OjUwcHh9I2NvbW1lbnRGb3JtLmhvcml6b250YWw+LmZvcm1CdXR0b25zTW9kZXM+LmJ1dHRvbnNDb250YWluZXI+YnV0dG9uOmZpcnN0LWNoaWxke21hcmdpbi10b3A6LjZyZW07b3JkZXI6MX0jc2hhcmVQcm9qZWN0RGlhbG9ne2Rpc3BsYXk6ZmxleDtmbGV4LWRpcmVjdGlvbjpjb2x1bW47cG9zaXRpb246cmVsYXRpdmU7bWluLWhlaWdodDozNTBweDttaW4td2lkdGg6NDAwcHg7YmFja2dyb3VuZC1jb2xvcjojZmZmfSNzaGFyZVByb2plY3REaWFsb2cgLnRhYmxlLXdyYXBwZXJ7bWFyZ2luLXRvcDouNXJlbTttYXJnaW4tYm90dG9tOjFyZW07YmFja2dyb3VuZC1jb2xvcjojZjFmMWYxfSNzaGFyZVByb2plY3REaWFsb2cgLnRhYmxlLXdyYXBwZXIuZml4ZWQtaGVpZ2h0e2hlaWdodDoxMDBweDtvdmVyZmxvdy15OmF1dG99I3NoYXJlUHJvamVjdERpYWxvZyAudGFibGUtd3JhcHBlcj50YWJsZXt3aWR0aDoxMDAlO2JvcmRlci1jb2xsYXBzZTpjb2xsYXBzZTtiYWNrZ3JvdW5kLWNvbG9yOiNlZWV9I3NoYXJlUHJvamVjdERpYWxvZyAudGFibGUtd3JhcHBlcj4uZW1wdHktbXNne2Rpc3BsYXk6bm9uZTtoZWlnaHQ6MTAwJTthbGlnbi1pdGVtczpjZW50ZXI7anVzdGlmeS1jb250ZW50OmNlbnRlcjtwYWRkaW5nOjFyZW19I3NoYXJlUHJvamVjdERpYWxvZz4udXNlcnMtY29udGFpbmVyLmVtcHR5IC5lbXB0eS1tc2d7ZGlzcGxheTpmbGV4fSNzaGFyZVByb2plY3REaWFsb2c+LnVzZXJzLWNvbnRhaW5lci5lbXB0eSB0YWJsZXtkaXNwbGF5Om5vbmV9I3NoYXJlUHJvamVjdERpYWxvZz4udXNlcnMtY29udGFpbmVyLmhpZGRlbnt2aXNpYmlsaXR5OmhpZGRlbn0jc2hhcmVQcm9qZWN0RGlhbG9nIHRkOmxhc3QtY2hpbGR7d2lkdGg6NDBweDt0ZXh0LWFsaWduOmNlbnRlcn0jc2hhcmVQcm9qZWN0RGlhbG9nIHRkOmxhc3QtY2hpbGQ+c3Zne3dpZHRoOjEycHg7aGVpZ2h0OjEycHh9I3NoYXJlUHJvamVjdERpYWxvZyB0ZC5hY3Rpb24tYnRue2N1cnNvcjpwb2ludGVyfSNzaGFyZVByb2plY3REaWFsb2cgdGQuYWN0aW9uLWJ0bjpob3ZlcntiYWNrZ3JvdW5kLWNvbG9yOiNkYmRiZGJ9I3NoYXJlUHJvamVjdERpYWxvZyB0cntib3JkZXItYm90dG9tOjJweCBzb2xpZCAjZmZmfSNzaGFyZVByb2plY3REaWFsb2cgdHIudG8tZGVsZXRlPnRkOmZpcnN0LWNoaWxke29wYWNpdHk6LjR9I3NoYXJlUHJvamVjdERpYWxvZyB0ZC51c2VyLWRhdGE+aW1ne2Zsb2F0OmxlZnQ7aGVpZ2h0OjY0cHg7d2lkdGg6NjRweDttYXJnaW4tcmlnaHQ6LjVyZW19I3NoYXJlUHJvamVjdERpYWxvZyB0ZC51c2VyLWRhdGE+ZGl2e2Rpc3BsYXk6ZmxleDtoZWlnaHQ6NjRweDtwYWRkaW5nOi40cmVtO2ZsZXgtZGlyZWN0aW9uOmNvbHVtbjtqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYXJvdW5kfSNzaGFyZVByb2plY3REaWFsb2cgdGQudXNlci1kYXRhPmRpdj5zcGFuOm50aC1jaGlsZCgyKXtmb250LXdlaWdodDpsaWdodGVyfSNzaGFyZVByb2plY3REaWFsb2c+LnBlbmRpbmctdXNlcnMgdGQudXNlci1kYXRhe3BhZGRpbmc6LjRyZW19I3NoYXJlUHJvamVjdERpYWxvZz5mb3JtPmxhYmVse2Rpc3BsYXk6YmxvY2t9I3NoYXJlUHJvamVjdERpYWxvZz5mb3JtPmRpdntkaXNwbGF5OmZsZXh9I3NoYXJlUHJvamVjdERpYWxvZz5mb3JtIGlucHV0e2ZsZXgtZ3JvdzoxfSNzaGFyZVByb2plY3REaWFsb2c+Zm9ybSBidXR0b257d2lkdGg6NjBweH0jc2hhcmVQcm9qZWN0RGlhbG9nPi5sb2FkZXItY29udGFpbmVye2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7anVzdGlmeS1jb250ZW50OmNlbnRlcjtwb3NpdGlvbjphYnNvbHV0ZTt3aWR0aDoxMDAlO2hlaWdodDoxMDAlO3RvcDowO2xlZnQ6MDtiYWNrZ3JvdW5kLWNvbG9yOnJnYmEoMjU1LDI1NSwyNTUsLjcpfSNzaGFyZVByb2plY3REaWFsb2c+LmxvYWRlci1jb250YWluZXIuaGlkZGVue2Rpc3BsYXk6bm9uZX0jc2hhcmVQcm9qZWN0RGlhbG9nIC5zaGFyZS1ub3RpZmljYXRpb257cG9zaXRpb246YWJzb2x1dGU7Ym90dG9tOjB9I3NoYXJlUHJvamVjdERpYWxvZyAuc2hhcmUtbm90aWZpY2F0aW9uLmhpZGRlbnt2aXNpYmlsaXR5OmhpZGRlbn1kaXYjcHJvcHNUYWJsZXNDb250YWluZXJ7ZGlzcGxheTpmbGV4fS5tYWluUGFuZWwucmlnaHQgZGl2I3Byb3BzVGFibGVzQ29udGFpbmVye2ZsZXgtZGlyZWN0aW9uOmNvbHVtbn0uZGF0YS10YWJsZXt0ZXh0LWFsaWduOmxlZnQ7d2lkdGg6MTAwJX0uZGF0YS10YWJsZT50aGVhZCB0aHtwYWRkaW5nLWxlZnQ6LjNyZW07cGFkZGluZy1yaWdodDouM3JlbTtiYWNrZ3JvdW5kLWNvbG9yOiNkZGR9LmRhdGEtdGFibGU+dGJvZHkgdGh7d2lkdGg6NTAlO2ZvbnQtd2VpZ2h0Om5vcm1hbH0uZGF0YS10YWJsZSB0ZHtmb250LXdlaWdodDpsaWdodGVyfSNtZXNzYWdlQ29udGFpbmVye3Bvc2l0aW9uOmFic29sdXRlO3BhZGRpbmc6MXJlbTttYXgtd2lkdGg6MzAwcHg7ZmxleC1kaXJlY3Rpb246Y29sdW1uO2FsaWduLWl0ZW1zOmZsZXgtZW5kO2JvdHRvbToycmVtO3JpZ2h0OjJyZW07Ym94LXNoYWRvdzoycHggMnB4IDZweCAjYjJiMmIyfSNtZXNzYWdlQ29udGFpbmVyPmJ1dHRvbnttYXJnaW4tYm90dG9tOi41cmVtfSNtZXNzYWdlQ29udGFpbmVyPmJ1dHRvbj5pbWd7d2lkdGg6MXJlbX0jbWVzc2FnZUNvbnRhaW5lci5zdWNjZXNze2JhY2tncm91bmQtY29sb3I6I2FlZjVhZH0jbWVzc2FnZUNvbnRhaW5lci5lcnJvcntiYWNrZ3JvdW5kLWNvbG9yOiNkYzkzOTN9I21lc3NhZ2VDb250YWluZXIud2FybmluZ3tiYWNrZ3JvdW5kLWNvbG9yOiNlY2RhYTR9I3ZpZXdwb3J0TWVzc2FnZXtkaXNwbGF5Om5vbmU7cG9zaXRpb246YWJzb2x1dGU7d2lkdGg6MTAwJTtoZWlnaHQ6MTAwJTt0b3A6MDtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyO2FsaWduLWl0ZW1zOmNlbnRlcjt0ZXh0LWFsaWduOmNlbnRlcjtmb250LXdlaWdodDpsaWdodGVyO2JhY2tncm91bmQtY29sb3I6cmdiYSgyNTUsMjU1LDI1NSwuOTUpfSN2aWV3cG9ydE1lc3NhZ2UuYWN0aXZle2Rpc3BsYXk6ZmxleH0jdmlld3BvcnRNZXNzYWdlIHB7cGFkZGluZy1ib3R0b206MXJlbX0jdmlld3BvcnRNZXNzYWdlIC5idG5zLWNvbnRhaW5lcntkaXNwbGF5OmZsZXg7anVzdGlmeS1jb250ZW50OnNwYWNlLWFyb3VuZH0jbm90aWZpY2F0aW9uc0NvbnRhaW5lcntkaXNwbGF5Om5vbmU7cG9zaXRpb246YWJzb2x1dGU7d2lkdGg6NDUwcHg7dG9wOmNhbGModmFyKC0taGVhZGVyLWhlaWdodCkgKyAxcmVtKTtyaWdodDoxcmVtO29wYWNpdHk6MDt0cmFuc2l0aW9uOm9wYWNpdHkgLjJzIGVhc2UtaW47YmFja2dyb3VuZC1jb2xvcjojZjZmNmY2O2JveC1zaGFkb3c6MCAwIDEycHggcmdiYSgwLDAsMCwuMil9I25vdGlmaWNhdGlvbnNDb250YWluZXI+LmVtcHR5LW1zZ3tkaXNwbGF5Om5vbmU7cGFkZGluZzoycmVtIC44cmVtO3RleHQtYWxpZ246Y2VudGVyfSNub3RpZmljYXRpb25zQ29udGFpbmVyLm9wZW57ZGlzcGxheTp1bnNldDtvcGFjaXR5OjF9I25vdGlmaWNhdGlvbnNDb250YWluZXIuZW1wdHk+Lm5vdGlmaWNhdGlvbnMtYm9keXtkaXNwbGF5Om5vbmV9I25vdGlmaWNhdGlvbnNDb250YWluZXIuZW1wdHk+LmVtcHR5LW1zZ3tkaXNwbGF5OmJsb2NrfS5ub3RpZmljYXRpb25zLWhlYWRlcntwYWRkaW5nOi44cmVtO2JhY2tncm91bmQtY29sb3I6I2ZiZmJmYjtib3JkZXItYm90dG9tOjJweCBzb2xpZCAjZGJkYmRifS5ub3RpZmljYXRpb25zLWJvZHl7bWF4LWhlaWdodDozNTBweDtvdmVyZmxvdzphdXRvfS5ub3RpZmljYXRpb25zLWJvZHk+bGl7ZGlzcGxheTpmbGV4O3BhZGRpbmc6LjhyZW07Y3Vyc29yOnBvaW50ZXI7Ym9yZGVyLWJvdHRvbToxcHggc29saWQgI2RiZGJkYn0ubm90aWZpY2F0aW9ucy1ib2R5PmxpLnBlbmRpbmd7YmFja2dyb3VuZC1jb2xvcjojY2JlYWY1fS5ub3RpZmljYXRpb25zLWJvZHk+bGkucGVuZGluZzpob3ZlcntiYWNrZ3JvdW5kLWNvbG9yOiNjMmUwZWF9Lm5vdGlmaWNhdGlvbnMtYm9keT5saTpob3ZlcntiYWNrZ3JvdW5kLWNvbG9yOiNlYWVhZWF9Lm5vdGlmaWNhdGlvbi10aHVtYntoZWlnaHQ6NTBweDttYXJnaW4tcmlnaHQ6MXJlbX0ubm90aWZpY2F0aW9uLWNvbnRlbnQ+aDR7bWFyZ2luLWJvdHRvbTouMnJlbTtmb250LXdlaWdodDo1MDB9Lm5vdGlmaWNhdGlvbi1jb250ZW50PnB7Zm9udC13ZWlnaHQ6bGlnaHRlcn0jY29udGV4dE1lbnV7d2lkdGg6MTIwcHg7cG9zaXRpb246YWJzb2x1dGU7cGFkZGluZy10b3A6LjVyZW07YmFja2dyb3VuZC1jb2xvcjojZmZmO2JveC1zaGFkb3c6MnB4IDJweCA3cHggcmdiYSgwLDAsMCwuMil9I2NvbnRleHRNZW51PnVsPmxpe3BhZGRpbmc6LjZyZW07Y3Vyc29yOnBvaW50ZXJ9I2NvbnRleHRNZW51PnVsPmxpOmhvdmVye2JhY2tncm91bmQtY29sb3I6cmdiYSgwLDAsMCwuMil9LnNlbGVjdGVkey0tZmlsbDogI2ZmYmQwMDstLXN0cm9rZTogI2U4OTgwNzstLXN0cm9rZS13OiA4cHh9LnNlbGVjdGVkLmZpbGwuc3Ryb2tlPnBhdGgsLnNlbGVjdGVkLmZpbGwuc3Ryb2tlPnBvbHlnb24sLnNlbGVjdGVkLmZpbGwuc3Ryb2tlPmNpcmNsZSwuc2VsZWN0ZWQuZmlsbC5zdHJva2U+cmVjdHtmaWxsOnZhcigtLWZpbGwpO3N0cm9rZTp2YXIoLS1zdHJva2UpO3N0cm9rZS13aWR0aDp2YXIoLS1zdHJva2Utdyl9LnNlbGVjdGVkLnN0cm9rZT5wYXRoLC5zZWxlY3RlZC5zdHJva2U+cG9seWxpbmUsLnNlbGVjdGVkLnN0cm9rZT5saW5le3N0cm9rZTp2YXIoLS1zdHJva2UpO3N0cm9rZS13aWR0aDp2YXIoLS1zdHJva2Utdyl9LnNlbGVjdGVkLmZpbGw+cGF0aCwuc2VsZWN0ZWQuZmlsbD5wb2x5Z29uLC5zZWxlY3RlZC5maWxsPmNpcmNsZXtmaWxsOnZhcigtLWZpbGwpfS5zZWxlY3RlZC5zdHJva2U+LmhhdGNoPmxpbmV7c3Ryb2tlOnZhcigtLXN0cm9rZSk7c3Ryb2tlLXdpZHRoOnZhcigtLXN0cm9rZS13KX06cm9vdHstLWhlYWRlci1oZWlnaHQ6IDIuNXJlbTstLXRoZW1lLWJsdWU6ICMyYThmYjE7LS10aGVtZS15ZWxsb3c6ICNlYThjMTV9KiwqOjpiZWZvcmUsKjo6YWZ0ZXJ7Ym94LXNpemluZzpib3JkZXItYm94fWgxLGgyLGgzLGg0LGg1LHB7bWFyZ2luLXRvcDowO21hcmdpbi1ib3R0b206MH11bCxvbHtsaXN0LXN0eWxlLXR5cGU6bm9uZTttYXJnaW4tdG9wOjA7bWFyZ2luLWJvdHRvbTowO3BhZGRpbmctbGVmdDowfWJ1dHRvbntib3JkZXItc3R5bGU6bm9uZTtwYWRkaW5nOjA7YmFja2dyb3VuZC1jb2xvcjp1bnNldH1ib2R5e2Rpc3BsYXk6ZmxleDtmbGV4LWRpcmVjdGlvbjpjb2x1bW47bWFyZ2luOjA7b3ZlcmZsb3c6aGlkZGVuO2NvbG9yOiM1NDU0NTQ7Zm9udC1mYW1pbHk6XFxcIk9zd2FsZFxcXCIsc2Fucy1zZXJpZn1zdmcuc3ZnLWxvYWRlcnt3aWR0aDoxMzBweDtoZWlnaHQ6OTBweH0uYnV0dG9uQmFzZXtwYWRkaW5nOi40cmVtO2N1cnNvcjpwb2ludGVyO2JvcmRlci13aWR0aDoxcHg7Ym9yZGVyLXN0eWxlOnNvbGlkO2ZvbnQtZmFtaWx5OmluaGVyaXR9LmJ1dHRvbkJhc2Uuc2lkZXN7Ym9yZGVyLXRvcC1zdHlsZTpub25lO2JvcmRlci1ib3R0b20tc3R5bGU6bm9uZX0uYnV0dG9uQmFzZS5saWdodHtjb2xvcjojMzczNzM3O2JvcmRlci1jb2xvcjojY2ZjZmNmfS5idXR0b25CYXNlLmxpZ2h0Om5vdCguZGlzYWJsZWQpOmhvdmVye2JhY2tncm91bmQtY29sb3I6I2VjZWNlY30uYnV0dG9uQmFzZS5lbXBoYXNpemV7Ym9yZGVyLWNvbG9yOiNlMGUwZTA7YmFja2dyb3VuZC1jb2xvcjojZDFmMGVjfS5idXR0b25CYXNlLmVtcGhhc2l6ZTpub3QoLmRpc2FibGVkKTpob3ZlcntiYWNrZ3JvdW5kLWNvbG9yOiNhY2QzY2V9LmJ1dHRvbkJhc2UuZGFuZ2Vye2NvbG9yOiNmNTUyNTI7Ym9yZGVyLWNvbG9yOiNmYmE0YTR9LmJ1dHRvbkJhc2UuZGFuZ2VyOm5vdCguZGlzYWJsZWQpOmhvdmVye2JhY2tncm91bmQtY29sb3I6I2ZmZTllOX0uYnV0dG9uQmFzZS5kaXNhYmxlZHtjdXJzb3I6dW5zZXQ7b3BhY2l0eTouNX1idXR0b24uZGlzYWJsZWQ6Zm9jdXN7b3V0bGluZS1zdHlsZTpub25lfS5idXR0b25CYXNlLmxvY2tlZHtjdXJzb3I6dW5zZXR9LmJ1dHRvbkJhc2UubG9ja2VkOmhvdmVye2JhY2tncm91bmQtY29sb3I6dW5zZXR9Lmljb24tYnRue2N1cnNvcjpwb2ludGVyfWhlYWRlciAuaWNvbi1idG57cGFkZGluZzpjYWxjKCgodmFyKC0taGVhZGVyLWhlaWdodCkgLSAycHgpIC0gMjRweCkgLyAyKTtoZWlnaHQ6Y2FsYyh2YXIoLS1oZWFkZXItaGVpZ2h0KSAtIDJweCk7d2lkdGg6Y2FsYyh2YXIoLS1oZWFkZXItaGVpZ2h0KSAtIDJweCl9Lmljb24tYnRuOm5vdCguZGlzYWJsZWQpOm5vdCguYnRuLXRvb2wtZW5hYmxlZCk6aG92ZXJ7YmFja2dyb3VuZC1jb2xvcjojZWNlY2VjfS5pY29uLWJ0bj5zdmd7ZGlzcGxheTpibG9jazt3aWR0aDoyNHB4O2hlaWdodDoyNHB4fS5pY29uLWJ0bi5kaXNhYmxlZHtvcGFjaXR5Oi4xO2N1cnNvcjphdXRvfS5pY29uLWJ0bi5oaWRkZW57ZGlzcGxheTpub25lfS5idG4tdG9vbC1lbmFibGVke2JhY2tncm91bmQtY29sb3I6Izk2Y2JkYn0uYnRuLWJnLWltZ3twYWRkaW5nLWxlZnQ6Mi40cmVtO2JhY2tncm91bmQtcmVwZWF0Om5vLXJlcGVhdDtiYWNrZ3JvdW5kLXBvc2l0aW9uLXk6Y2VudGVyO2JhY2tncm91bmQtcG9zaXRpb24teDouOHJlbX0uZ29vZ2xlLWxvZ297YmFja2dyb3VuZC1pbWFnZTp1cmwoZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCxQSE4yWnlCM2FXUjBhRDBpTVRnaUlHaGxhV2RvZEQwaU1UZ2lJSFpwWlhkQ2IzZzlJakFnTUNBeE9DQXhPQ0lnZUcxc2JuTTlJbWgwZEhBNkx5OTNkM2N1ZHpNdWIzSm5Mekl3TURBdmMzWm5JajQ4ZEdsMGJHVStjM1Z3WlhJZ1p6d3ZkR2wwYkdVK1BHY2dabWxzYkMxeWRXeGxQU0psZG1WdWIyUmtJajQ4Y0dGMGFDQmtQU0pOT1NBekxqUTRZekV1TmprZ01DQXlMamd6TGpjeklETXVORGdnTVM0ek5Hd3lMalUwTFRJdU5EaERNVE11TkRZdU9Ea2dNVEV1TkRNZ01DQTVJREFnTlM0ME9DQXdJREl1TkRRZ01pNHdNaTQ1TmlBMExqazJiREl1T1RFZ01pNHlOa00wTGpZZ05TNHdOU0EyTGpZeUlETXVORGdnT1NBekxqUTRlaUlnWm1sc2JEMGlJMFZCTkRNek5TSXZQanh3WVhSb0lHUTlJazB4Tnk0Mk5DQTVMakpqTUMwdU56UXRMakEyTFRFdU1qZ3RMakU1TFRFdU9EUklPWFl6TGpNMGFEUXVPVFpqTFM0eExqZ3pMUzQyTkNBeUxqQTRMVEV1T0RRZ01pNDVNbXd5TGpnMElESXVNbU14TGpjdE1TNDFOeUF5TGpZNExUTXVPRGdnTWk0Mk9DMDJMall5ZWlJZ1ptbHNiRDBpSXpReU9EVkdOQ0l2UGp4d1lYUm9JR1E5SWswekxqZzRJREV3TGpjNFFUVXVOVFFnTlM0MU5DQXdJREFnTVNBekxqVTRJRGxqTUMwdU5qSXVNVEV0TVM0eU1pNHlPUzB4TGpjNFRDNDVOaUEwTGprMlFUa3VNREE0SURrdU1EQTRJREFnTUNBd0lEQWdPV013SURFdU5EVXVNelVnTWk0NE1pNDVOaUEwTGpBMGJESXVPVEl0TWk0eU5ub2lJR1pwYkd3OUlpTkdRa0pETURVaUx6NDhjR0YwYUNCa1BTSk5PU0F4T0dNeUxqUXpJREFnTkM0ME55MHVPQ0ExTGprMkxUSXVNVGhzTFRJdU9EUXRNaTR5WXkwdU56WXVOVE10TVM0M09DNDVMVE11TVRJdU9TMHlMak00SURBdE5DNDBMVEV1TlRjdE5TNHhNaTB6TGpjMFRDNDVOeUF4TXk0d05FTXlMalExSURFMUxqazRJRFV1TkRnZ01UZ2dPU0F4T0hvaUlHWnBiR3c5SWlNek5FRTROVE1pTHo0OGNHRjBhQ0JtYVd4c1BTSnViMjVsSWlCa1BTSk5NQ0F3YURFNGRqRTRTREI2SWk4K1BDOW5Qand2YzNablBnPT0pfSNzYXZlQnRuLmVuYWJsZWQ+c3ZnLCNub3RpZmljYXRpb25CdG4uZW5hYmxlZD5zdmd7ZmlsbDp2YXIoLS10aGVtZS15ZWxsb3cpO3RyYW5zZm9ybTpzY2FsZSgxLjIpfSNzYXZlQnRuPnN2Zy5wcm9ncmVzcy1pY29ue2Rpc3BsYXk6bm9uZX0jc2F2ZUJ0bi5wcm9ncmVzczpob3ZlcntjdXJzb3I6YXV0bztiYWNrZ3JvdW5kLWNvbG9yOnVuc2V0fSNzYXZlQnRuLnByb2dyZXNzPnN2Zy5zYXZlLWljb257ZGlzcGxheTpub25lfSNzYXZlQnRuLnByb2dyZXNzPnN2Zy5wcm9ncmVzcy1pY29ue2Rpc3BsYXk6YmxvY2t9aGVhZGVye2hlaWdodDp2YXIoLS1oZWFkZXItaGVpZ2h0KTtwYWRkaW5nLXJpZ2h0OjhyZW07YWxpZ24taXRlbXM6c3RyZXRjaDt6LWluZGV4OjE7YmFja2dyb3VuZC1jb2xvcjojZjZmNmY2O2JvcmRlci1ib3R0b206MnB4IHNvbGlkIHZhcigtLXRoZW1lLWJsdWUpfWhlYWRlcj5zcGFuOmZpcnN0LWNoaWxke3dpZHRoOjRyZW19aGVhZGVyPnNwYW46Zmlyc3QtY2hpbGQ+aW1ne2hlaWdodDoxMDAlO3BhZGRpbmc6LjNyZW07bWFyZ2luOmF1dG87ZGlzcGxheTpibG9ja31oZWFkZXI+aDF7cG9zaXRpb246YWJzb2x1dGU7cmlnaHQ6MTAwJX0jcHJvamVjdHNMaXN0QnRue21pbi13aWR0aDoxMHJlbTtmb250LXNpemU6MXJlbTtmb250LXdlaWdodDpub3JtYWx9I3Byb2plY3RzTGlzdEJ0bj5zcGFue2Rpc3BsYXk6aW5saW5lLWJsb2NrO3dpZHRoOjEwMCU7dGV4dC1hbGlnbjpjZW50ZXJ9QG1lZGlhKG1heC13aWR0aDogNTAwcHgpeyNwcm9qZWN0c0xpc3RCdG57ZGlzcGxheTp1bnNldDttaW4td2lkdGg6dW5zZXQ7d2lkdGg6Mi41cmVtO2ZvbnQtc2l6ZTowO2JvcmRlci1sZWZ0LXN0eWxlOm5vbmU7YmFja2dyb3VuZC1yZXBlYXQ6bm8tcmVwZWF0O2JhY2tncm91bmQtcG9zaXRpb246Y2VudGVyO2JhY2tncm91bmQtaW1hZ2U6dXJsKFwiICsgX19fQ1NTX0xPQURFUl9VUkxfUkVQTEFDRU1FTlRfMl9fXyArIFwiKTtiYWNrZ3JvdW5kLXNpemU6MjRweH19I3Rvb2xiYXJzQ29udGFpbmVye2ZsZXgtZ3JvdzoxO2p1c3RpZnktY29udGVudDpmbGV4LWVuZH0jZHJhd2luZ3NCdG5ze21pbi13aWR0aDo4cmVtO3RleHQtYWxpZ246Y2VudGVyfSNkcmF3aW5nc0J0bnM+YnV0dG9ue2hlaWdodDpjYWxjKHZhcigtLWhlYWRlci1oZWlnaHQpIC0gMnB4KTt3aWR0aDoxMDAlO2JvcmRlci1sZWZ0LXN0eWxlOm5vbmV9I2RyYXdpbmdzQnRucz51bHtmb250LXNpemU6LjlyZW07Zm9udC13ZWlnaHQ6bGlnaHRlcjtjdXJzb3I6cG9pbnRlcjtiYWNrZ3JvdW5kLWNvbG9yOiNmNmY2ZjY7Ym94LXNoYWRvdzowcHggMnB4IDVweCAjYjZiNmI2fSNkcmF3aW5nc0J0bnM+dWw+bGl7cGFkZGluZzouNHJlbX0jZHJhd2luZ3NCdG5zPnVsPmxpLmFjdGl2ZXtiYWNrZ3JvdW5kLWNvbG9yOiNjMmMyYzI7Y3Vyc29yOmF1dG99I2RyYXdpbmdzQnRucz51bD5saTpub3QoLmFjdGl2ZSk6aG92ZXJ7YmFja2dyb3VuZC1jb2xvcjojZGZkZmRmfS5nbG9iYWwtbmF2LWJ0bnN7ZGlzcGxheTpmbGV4O3Bvc2l0aW9uOmFic29sdXRlO3RvcDowO3JpZ2h0OjA7ei1pbmRleDoxMDAwO2JvcmRlci1sZWZ0OjFweCBzb2xpZCAjYzhjOGM4fUBtZWRpYShtYXgtd2lkdGg6IDUwMHB4KXtoZWFkZXJ7b3JkZXI6MTtib3JkZXItdG9wOjJweCBzb2xpZCB2YXIoLS10aGVtZS1ibHVlKTtib3JkZXItYm90dG9tOnVuc2V0fWhlYWRlcj5zcGFuOmZpcnN0LWNoaWxke2Rpc3BsYXk6bm9uZX0jdG9vbGJhcnNDb250YWluZXJ7cG9zaXRpb246YWJzb2x1dGU7cmlnaHQ6MH0jZHJhd2luZ3NCdG5zPnVse2JveC1zaGFkb3c6MHB4IC0ycHggN3B4ICNiNmI2YjZ9fS5kcm9wZG93bi1jb250YWluZXJ7ei1pbmRleDoxO3Bvc2l0aW9uOnJlbGF0aXZlfS5kcm9wZG93bi1jb250YWluZXI+LmRyb3Bkb3duLWNvbnRlbnR7ZGlzcGxheTpmbGV4O2ZsZXgtZGlyZWN0aW9uOmNvbHVtbjt0cmFuc2l0aW9uOi42czt0cmFuc2Zvcm06dHJhbnNsYXRlWSgtMTAwJSk7b3BhY2l0eTowO3otaW5kZXg6LTE7cG9zaXRpb246YWJzb2x1dGU7cmlnaHQ6MDtsZWZ0OjA7dG9wOmNhbGModmFyKC0taGVhZGVyLWhlaWdodCkgLSAycHgpfS5kcm9wZG93bi1jb250YWluZXIucmVzcG9uc2l2ZT4uZHJvcGRvd24tY29udGVudHtkaXNwbGF5OmlubGluZTtvcGFjaXR5OnVuc2V0O3otaW5kZXg6dW5zZXQ7cG9zaXRpb246dW5zZXR9QG1lZGlhKG1heC13aWR0aDogODAwcHgpey5kcm9wZG93bi1jb250YWluZXIucmVzcG9uc2l2ZT4uZHJvcGRvd24tY29udGVudHtkaXNwbGF5OmZsZXg7b3BhY2l0eTowO3otaW5kZXg6LTE7cG9zaXRpb246YWJzb2x1dGV9fS5kcm9wZG93bi1jb250YWluZXIub3Blbj4uZHJvcGRvd24tY29udGVudHt0cmFuc2Zvcm06dHJhbnNsYXRlWSgwJSk7b3BhY2l0eToxfUBtZWRpYShtYXgtd2lkdGg6IDUwMHB4KXsuZHJvcGRvd24tY29udGFpbmVyPi5kcm9wZG93bi1jb250ZW50e3RyYW5zZm9ybTp1bnNldH0uZHJvcGRvd24tY29udGFpbmVyLm9wZW4+LmRyb3Bkb3duLWNvbnRlbnR7dHJhbnNmb3JtOnRyYW5zbGF0ZVkoY2FsYygtMTAwJSAtIDIuNXJlbSArIDJweCkpfX1tYWlue3Bvc2l0aW9uOnJlbGF0aXZlO2hlaWdodDpjYWxjKDEwMHZoIC0gdmFyKC0taGVhZGVyLWhlaWdodCkpfSN3b3Jrc3BhY2Vze2hlaWdodDoxMDAlfS53b3Jrc3BhY2V7aGVpZ2h0OjEwMCV9Zm9ybSAudG9wLWxhYmVse21hcmdpbi1ib3R0b206LjVyZW19Zm9ybSAuYmFzZS1pbnB1dHtwYWRkaW5nOi40cmVtfWZvcm0gLmVycm9yLW1zZ3tmb250LXNpemU6LjlyZW07Zm9udC13ZWlnaHQ6bGlnaHRlcjtjb2xvcjpyZWR9Zm9ybSAuZXJyb3ItbXNnLmhpZGRlbnt2aXNpYmlsaXR5OmhpZGRlbn0jcmVuYW1lUHJvamVjdEZvcm0gLnJlbmFtZS1mb3JtLWNvbnRlbnR7ZGlzcGxheTpmbGV4O3dpZHRoOjEwMCU7ZmxleC1kaXJlY3Rpb246Y29sdW1ufS5kcmF3aW5nc0NvbnRhaW5lcntoZWlnaHQ6MTAwJX0uZHJhd2luZ3NDb250YWluZXI+ZGl2e2hlaWdodDoxMDAlfS5kcmF3aW5nc0NvbnRhaW5lcj5kaXY+c3Zne2hlaWdodDoxMDAlO3dpZHRoOjEwMCV9QG1lZGlhIGFsbCBhbmQgKGRpc3BsYXktbW9kZTogc3RhbmRhbG9uZSl7aGVhZGVye2JvcmRlci10b3A6MXB4IHNvbGlkICNkZWRlZGV9fVwiLCBcIlwiXSk7XG4vLyBFeHBvcnRzXG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHM7XG4iLCJcInVzZSBzdHJpY3RcIjtcblxuLypcbiAgTUlUIExpY2Vuc2UgaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZS5waHBcbiAgQXV0aG9yIFRvYmlhcyBLb3BwZXJzIEBzb2tyYVxuKi9cbi8vIGNzcyBiYXNlIGNvZGUsIGluamVjdGVkIGJ5IHRoZSBjc3MtbG9hZGVyXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZnVuYy1uYW1lc1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAodXNlU291cmNlTWFwKSB7XG4gIHZhciBsaXN0ID0gW107IC8vIHJldHVybiB0aGUgbGlzdCBvZiBtb2R1bGVzIGFzIGNzcyBzdHJpbmdcblxuICBsaXN0LnRvU3RyaW5nID0gZnVuY3Rpb24gdG9TdHJpbmcoKSB7XG4gICAgcmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICB2YXIgY29udGVudCA9IGNzc1dpdGhNYXBwaW5nVG9TdHJpbmcoaXRlbSwgdXNlU291cmNlTWFwKTtcblxuICAgICAgaWYgKGl0ZW1bMl0pIHtcbiAgICAgICAgcmV0dXJuIFwiQG1lZGlhIFwiLmNvbmNhdChpdGVtWzJdLCBcIiB7XCIpLmNvbmNhdChjb250ZW50LCBcIn1cIik7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBjb250ZW50O1xuICAgIH0pLmpvaW4oJycpO1xuICB9OyAvLyBpbXBvcnQgYSBsaXN0IG9mIG1vZHVsZXMgaW50byB0aGUgbGlzdFxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZnVuYy1uYW1lc1xuXG5cbiAgbGlzdC5pID0gZnVuY3Rpb24gKG1vZHVsZXMsIG1lZGlhUXVlcnksIGRlZHVwZSkge1xuICAgIGlmICh0eXBlb2YgbW9kdWxlcyA9PT0gJ3N0cmluZycpIHtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICAgICAgbW9kdWxlcyA9IFtbbnVsbCwgbW9kdWxlcywgJyddXTtcbiAgICB9XG5cbiAgICB2YXIgYWxyZWFkeUltcG9ydGVkTW9kdWxlcyA9IHt9O1xuXG4gICAgaWYgKGRlZHVwZSkge1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBwcmVmZXItZGVzdHJ1Y3R1cmluZ1xuICAgICAgICB2YXIgaWQgPSB0aGlzW2ldWzBdO1xuXG4gICAgICAgIGlmIChpZCAhPSBudWxsKSB7XG4gICAgICAgICAgYWxyZWFkeUltcG9ydGVkTW9kdWxlc1tpZF0gPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IG1vZHVsZXMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICB2YXIgaXRlbSA9IFtdLmNvbmNhdChtb2R1bGVzW19pXSk7XG5cbiAgICAgIGlmIChkZWR1cGUgJiYgYWxyZWFkeUltcG9ydGVkTW9kdWxlc1tpdGVtWzBdXSkge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29udGludWVcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGlmIChtZWRpYVF1ZXJ5KSB7XG4gICAgICAgIGlmICghaXRlbVsyXSkge1xuICAgICAgICAgIGl0ZW1bMl0gPSBtZWRpYVF1ZXJ5O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGl0ZW1bMl0gPSBcIlwiLmNvbmNhdChtZWRpYVF1ZXJ5LCBcIiBhbmQgXCIpLmNvbmNhdChpdGVtWzJdKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBsaXN0LnB1c2goaXRlbSk7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBsaXN0O1xufTtcblxuZnVuY3Rpb24gY3NzV2l0aE1hcHBpbmdUb1N0cmluZyhpdGVtLCB1c2VTb3VyY2VNYXApIHtcbiAgdmFyIGNvbnRlbnQgPSBpdGVtWzFdIHx8ICcnOyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcHJlZmVyLWRlc3RydWN0dXJpbmdcblxuICB2YXIgY3NzTWFwcGluZyA9IGl0ZW1bM107XG5cbiAgaWYgKCFjc3NNYXBwaW5nKSB7XG4gICAgcmV0dXJuIGNvbnRlbnQ7XG4gIH1cblxuICBpZiAodXNlU291cmNlTWFwICYmIHR5cGVvZiBidG9hID09PSAnZnVuY3Rpb24nKSB7XG4gICAgdmFyIHNvdXJjZU1hcHBpbmcgPSB0b0NvbW1lbnQoY3NzTWFwcGluZyk7XG4gICAgdmFyIHNvdXJjZVVSTHMgPSBjc3NNYXBwaW5nLnNvdXJjZXMubWFwKGZ1bmN0aW9uIChzb3VyY2UpIHtcbiAgICAgIHJldHVybiBcIi8qIyBzb3VyY2VVUkw9XCIuY29uY2F0KGNzc01hcHBpbmcuc291cmNlUm9vdCB8fCAnJykuY29uY2F0KHNvdXJjZSwgXCIgKi9cIik7XG4gICAgfSk7XG4gICAgcmV0dXJuIFtjb250ZW50XS5jb25jYXQoc291cmNlVVJMcykuY29uY2F0KFtzb3VyY2VNYXBwaW5nXSkuam9pbignXFxuJyk7XG4gIH1cblxuICByZXR1cm4gW2NvbnRlbnRdLmpvaW4oJ1xcbicpO1xufSAvLyBBZGFwdGVkIGZyb20gY29udmVydC1zb3VyY2UtbWFwIChNSVQpXG5cblxuZnVuY3Rpb24gdG9Db21tZW50KHNvdXJjZU1hcCkge1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW5kZWZcbiAgdmFyIGJhc2U2NCA9IGJ0b2EodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KEpTT04uc3RyaW5naWZ5KHNvdXJjZU1hcCkpKSk7XG4gIHZhciBkYXRhID0gXCJzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04O2Jhc2U2NCxcIi5jb25jYXQoYmFzZTY0KTtcbiAgcmV0dXJuIFwiLyojIFwiLmNvbmNhdChkYXRhLCBcIiAqL1wiKTtcbn0iLCJcInVzZSBzdHJpY3RcIjtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAodXJsLCBvcHRpb25zKSB7XG4gIGlmICghb3B0aW9ucykge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICAgIG9wdGlvbnMgPSB7fTtcbiAgfSAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW5kZXJzY29yZS1kYW5nbGUsIG5vLXBhcmFtLXJlYXNzaWduXG5cblxuICB1cmwgPSB1cmwgJiYgdXJsLl9fZXNNb2R1bGUgPyB1cmwuZGVmYXVsdCA6IHVybDtcblxuICBpZiAodHlwZW9mIHVybCAhPT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gdXJsO1xuICB9IC8vIElmIHVybCBpcyBhbHJlYWR5IHdyYXBwZWQgaW4gcXVvdGVzLCByZW1vdmUgdGhlbVxuXG5cbiAgaWYgKC9eWydcIl0uKlsnXCJdJC8udGVzdCh1cmwpKSB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduXG4gICAgdXJsID0gdXJsLnNsaWNlKDEsIC0xKTtcbiAgfVxuXG4gIGlmIChvcHRpb25zLmhhc2gpIHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICB1cmwgKz0gb3B0aW9ucy5oYXNoO1xuICB9IC8vIFNob3VsZCB1cmwgYmUgd3JhcHBlZD9cbiAgLy8gU2VlIGh0dHBzOi8vZHJhZnRzLmNzc3dnLm9yZy9jc3MtdmFsdWVzLTMvI3VybHNcblxuXG4gIGlmICgvW1wiJygpIFxcdFxcbl0vLnRlc3QodXJsKSB8fCBvcHRpb25zLm5lZWRRdW90ZXMpIHtcbiAgICByZXR1cm4gXCJcXFwiXCIuY29uY2F0KHVybC5yZXBsYWNlKC9cIi9nLCAnXFxcXFwiJykucmVwbGFjZSgvXFxuL2csICdcXFxcbicpLCBcIlxcXCJcIik7XG4gIH1cblxuICByZXR1cm4gdXJsO1xufTsiLCJleHBvcnQgZGVmYXVsdCBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwiNmE1MTZmZjVmYWMyODEzOWE1ZjA1YzU5Mjk3NGFkN2Euc3ZnXCI7IiwiZXhwb3J0IGRlZmF1bHQgX193ZWJwYWNrX3B1YmxpY19wYXRoX18gKyBcImUyNjg0ZDIxN2E4ODJhZTAyYzg2MWI3ZmM1MzE0ZTcyLnN2Z1wiOyIsImV4cG9ydCBkZWZhdWx0IF9fd2VicGFja19wdWJsaWNfcGF0aF9fICsgXCI2OTk0ODVhZDQyNGY2OGZmOTA2OGExMTFkZWFiYTA0Ny5zdmdcIjsiLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wRGVmYXVsdCAoZXgpIHsgcmV0dXJuIChleCAmJiAodHlwZW9mIGV4ID09PSAnb2JqZWN0JykgJiYgJ2RlZmF1bHQnIGluIGV4KSA/IGV4WydkZWZhdWx0J10gOiBleDsgfVxuXG52YXIgZmlyZWJhc2UgPSBfaW50ZXJvcERlZmF1bHQocmVxdWlyZSgnQGZpcmViYXNlL2FwcCcpKTtcbnZhciB0c2xpYiA9IHJlcXVpcmUoJ3RzbGliJyk7XG52YXIgbG9nZ2VyID0gcmVxdWlyZSgnQGZpcmViYXNlL2xvZ2dlcicpO1xudmFyIHV0aWwgPSByZXF1aXJlKCdAZmlyZWJhc2UvdXRpbCcpO1xudmFyIGNvbXBvbmVudCA9IHJlcXVpcmUoJ0BmaXJlYmFzZS9jb21wb25lbnQnKTtcbnZhciB3ZWJjaGFubmVsV3JhcHBlciA9IHJlcXVpcmUoJ0BmaXJlYmFzZS93ZWJjaGFubmVsLXdyYXBwZXInKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKiBUaGUgc2VtdmVyICh3d3cuc2VtdmVyLm9yZykgdmVyc2lvbiBvZiB0aGUgU0RLLiAqL1xyXG52YXIgU0RLX1ZFUlNJT04gPSBmaXJlYmFzZS5TREtfVkVSU0lPTjtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnZhciBsb2dDbGllbnQgPSBuZXcgbG9nZ2VyLkxvZ2dlcignQGZpcmViYXNlL2ZpcmVzdG9yZScpO1xyXG52YXIgTG9nTGV2ZWw7XHJcbihmdW5jdGlvbiAoTG9nTGV2ZWwpIHtcclxuICAgIExvZ0xldmVsW0xvZ0xldmVsW1wiREVCVUdcIl0gPSAwXSA9IFwiREVCVUdcIjtcclxuICAgIExvZ0xldmVsW0xvZ0xldmVsW1wiRVJST1JcIl0gPSAxXSA9IFwiRVJST1JcIjtcclxuICAgIExvZ0xldmVsW0xvZ0xldmVsW1wiU0lMRU5UXCJdID0gMl0gPSBcIlNJTEVOVFwiO1xyXG59KShMb2dMZXZlbCB8fCAoTG9nTGV2ZWwgPSB7fSkpO1xyXG4vLyBIZWxwZXIgbWV0aG9kcyBhcmUgbmVlZGVkIGJlY2F1c2UgdmFyaWFibGVzIGNhbid0IGJlIGV4cG9ydGVkIGFzIHJlYWQvd3JpdGVcclxuZnVuY3Rpb24gZ2V0TG9nTGV2ZWwoKSB7XHJcbiAgICBpZiAobG9nQ2xpZW50LmxvZ0xldmVsID09PSBsb2dnZXIuTG9nTGV2ZWwuREVCVUcpIHtcclxuICAgICAgICByZXR1cm4gTG9nTGV2ZWwuREVCVUc7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChsb2dDbGllbnQubG9nTGV2ZWwgPT09IGxvZ2dlci5Mb2dMZXZlbC5TSUxFTlQpIHtcclxuICAgICAgICByZXR1cm4gTG9nTGV2ZWwuU0lMRU5UO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIExvZ0xldmVsLkVSUk9SO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIHNldExvZ0xldmVsKG5ld0xldmVsKSB7XHJcbiAgICAvKipcclxuICAgICAqIE1hcCB0aGUgbmV3IGxvZyBsZXZlbCB0byB0aGUgYXNzb2NpYXRlZCBGaXJlYmFzZSBMb2cgTGV2ZWxcclxuICAgICAqL1xyXG4gICAgc3dpdGNoIChuZXdMZXZlbCkge1xyXG4gICAgICAgIGNhc2UgTG9nTGV2ZWwuREVCVUc6XHJcbiAgICAgICAgICAgIGxvZ0NsaWVudC5sb2dMZXZlbCA9IGxvZ2dlci5Mb2dMZXZlbC5ERUJVRztcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBMb2dMZXZlbC5FUlJPUjpcclxuICAgICAgICAgICAgbG9nQ2xpZW50LmxvZ0xldmVsID0gbG9nZ2VyLkxvZ0xldmVsLkVSUk9SO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIExvZ0xldmVsLlNJTEVOVDpcclxuICAgICAgICAgICAgbG9nQ2xpZW50LmxvZ0xldmVsID0gbG9nZ2VyLkxvZ0xldmVsLlNJTEVOVDtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgbG9nQ2xpZW50LmVycm9yKFwiRmlyZXN0b3JlIChcIiArIFNES19WRVJTSU9OICsgXCIpOiBJbnZhbGlkIHZhbHVlIHBhc3NlZCB0byBgc2V0TG9nTGV2ZWxgXCIpO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGRlYnVnKHRhZywgbXNnKSB7XHJcbiAgICB2YXIgb2JqID0gW107XHJcbiAgICBmb3IgKHZhciBfaSA9IDI7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgIG9ialtfaSAtIDJdID0gYXJndW1lbnRzW19pXTtcclxuICAgIH1cclxuICAgIGlmIChsb2dDbGllbnQubG9nTGV2ZWwgPD0gbG9nZ2VyLkxvZ0xldmVsLkRFQlVHKSB7XHJcbiAgICAgICAgdmFyIGFyZ3MgPSBvYmoubWFwKGFyZ1RvU3RyaW5nKTtcclxuICAgICAgICBsb2dDbGllbnQuZGVidWcuYXBwbHkobG9nQ2xpZW50LCB0c2xpYi5fX3NwcmVhZEFycmF5cyhbXCJGaXJlc3RvcmUgKFwiICsgU0RLX1ZFUlNJT04gKyBcIikgW1wiICsgdGFnICsgXCJdOiBcIiArIG1zZ10sIGFyZ3MpKTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBlcnJvcihtc2cpIHtcclxuICAgIHZhciBvYmogPSBbXTtcclxuICAgIGZvciAodmFyIF9pID0gMTsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgb2JqW19pIC0gMV0gPSBhcmd1bWVudHNbX2ldO1xyXG4gICAgfVxyXG4gICAgaWYgKGxvZ0NsaWVudC5sb2dMZXZlbCA8PSBsb2dnZXIuTG9nTGV2ZWwuRVJST1IpIHtcclxuICAgICAgICB2YXIgYXJncyA9IG9iai5tYXAoYXJnVG9TdHJpbmcpO1xyXG4gICAgICAgIGxvZ0NsaWVudC5lcnJvci5hcHBseShsb2dDbGllbnQsIHRzbGliLl9fc3ByZWFkQXJyYXlzKFtcIkZpcmVzdG9yZSAoXCIgKyBTREtfVkVSU0lPTiArIFwiKTogXCIgKyBtc2ddLCBhcmdzKSk7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIENvbnZlcnRzIGFuIGFkZGl0aW9uYWwgbG9nIHBhcmFtZXRlciB0byBhIHN0cmluZyByZXByZXNlbnRhdGlvbi5cclxuICovXHJcbmZ1bmN0aW9uIGFyZ1RvU3RyaW5nKG9iaikge1xyXG4gICAgaWYgKHR5cGVvZiBvYmogPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgcmV0dXJuIG9iajtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHZhciBwbGF0Zm9ybSA9IFBsYXRmb3JtU3VwcG9ydC5nZXRQbGF0Zm9ybSgpO1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHJldHVybiBwbGF0Zm9ybS5mb3JtYXRKU09OKG9iaik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIC8vIENvbnZlcnRpbmcgdG8gSlNPTiBmYWlsZWQsIGp1c3QgbG9nIHRoZSBvYmplY3QgZGlyZWN0bHlcclxuICAgICAgICAgICAgcmV0dXJuIG9iajtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBVbmNvbmRpdGlvbmFsbHkgZmFpbHMsIHRocm93aW5nIGFuIEVycm9yIHdpdGggdGhlIGdpdmVuIG1lc3NhZ2UuXHJcbiAqXHJcbiAqIFJldHVybnMgYW55IHNvIGl0IGNhbiBiZSB1c2VkIGluIGV4cHJlc3Npb25zOlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBsZXQgZnV0dXJlVmFyID0gZmFpbCgnbm90IGltcGxlbWVudGVkIHlldCcpO1xyXG4gKi9cclxuZnVuY3Rpb24gZmFpbChmYWlsdXJlKSB7XHJcbiAgICAvLyBMb2cgdGhlIGZhaWx1cmUgaW4gYWRkaXRpb24gdG8gdGhyb3cgYW4gZXhjZXB0aW9uLCBqdXN0IGluIGNhc2UgdGhlXHJcbiAgICAvLyBleGNlcHRpb24gaXMgc3dhbGxvd2VkLlxyXG4gICAgdmFyIG1lc3NhZ2UgPSBcIkZJUkVTVE9SRSAoXCIgKyBTREtfVkVSU0lPTiArIFwiKSBJTlRFUk5BTCBBU1NFUlRJT04gRkFJTEVEOiBcIiArIGZhaWx1cmU7XHJcbiAgICBlcnJvcihtZXNzYWdlKTtcclxuICAgIC8vIE5PVEU6IFdlIGRvbid0IHVzZSBGaXJlc3RvcmVFcnJvciBoZXJlIGJlY2F1c2UgdGhlc2UgYXJlIGludGVybmFsIGZhaWx1cmVzXHJcbiAgICAvLyB0aGF0IGNhbm5vdCBiZSBoYW5kbGVkIGJ5IHRoZSB1c2VyLiAoQWxzbyBpdCB3b3VsZCBjcmVhdGUgYSBjaXJjdWxhclxyXG4gICAgLy8gZGVwZW5kZW5jeSBiZXR3ZWVuIHRoZSBlcnJvciBhbmQgYXNzZXJ0IG1vZHVsZXMgd2hpY2ggZG9lc24ndCB3b3JrLilcclxuICAgIHRocm93IG5ldyBFcnJvcihtZXNzYWdlKTtcclxufVxyXG4vKipcclxuICogRmFpbHMgaWYgdGhlIGdpdmVuIGFzc2VydGlvbiBjb25kaXRpb24gaXMgZmFsc2UsIHRocm93aW5nIGFuIEVycm9yIHdpdGggdGhlXHJcbiAqIGdpdmVuIG1lc3NhZ2UgaWYgaXQgZGlkLlxyXG4gKi9cclxuZnVuY3Rpb24gYXNzZXJ0KGFzc2VydGlvbiwgbWVzc2FnZSkge1xyXG4gICAgaWYgKCFhc3NlcnRpb24pIHtcclxuICAgICAgICBmYWlsKG1lc3NhZ2UpO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogUHJvdmlkZXMgc2luZ2xldG9uIGhlbHBlcnMgd2hlcmUgc2V0dXAgY29kZSBjYW4gaW5qZWN0IGEgcGxhdGZvcm0gYXQgcnVudGltZS5cclxuICogc2V0UGxhdGZvcm0gbmVlZHMgdG8gYmUgc2V0IGJlZm9yZSBGaXJlc3RvcmUgaXMgdXNlZCBhbmQgbXVzdCBiZSBzZXQgZXhhY3RseVxyXG4gKiBvbmNlLlxyXG4gKi9cclxudmFyIFBsYXRmb3JtU3VwcG9ydCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFBsYXRmb3JtU3VwcG9ydCgpIHtcclxuICAgIH1cclxuICAgIFBsYXRmb3JtU3VwcG9ydC5zZXRQbGF0Zm9ybSA9IGZ1bmN0aW9uIChwbGF0Zm9ybSkge1xyXG4gICAgICAgIGlmIChQbGF0Zm9ybVN1cHBvcnQucGxhdGZvcm0pIHtcclxuICAgICAgICAgICAgZmFpbCgnUGxhdGZvcm0gYWxyZWFkeSBkZWZpbmVkJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFBsYXRmb3JtU3VwcG9ydC5wbGF0Zm9ybSA9IHBsYXRmb3JtO1xyXG4gICAgfTtcclxuICAgIFBsYXRmb3JtU3VwcG9ydC5nZXRQbGF0Zm9ybSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoIVBsYXRmb3JtU3VwcG9ydC5wbGF0Zm9ybSkge1xyXG4gICAgICAgICAgICBmYWlsKCdQbGF0Zm9ybSBub3Qgc2V0Jyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBQbGF0Zm9ybVN1cHBvcnQucGxhdGZvcm07XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFBsYXRmb3JtU3VwcG9ydDtcclxufSgpKTtcclxuLyoqXHJcbiAqIFJldHVybnMgdGhlIHJlcHJlc2VudGF0aW9uIG9mIGFuIGVtcHR5IFwicHJvdG9cIiBieXRlIHN0cmluZyBmb3IgdGhlXHJcbiAqIHBsYXRmb3JtLlxyXG4gKi9cclxuZnVuY3Rpb24gZW1wdHlCeXRlU3RyaW5nKCkge1xyXG4gICAgcmV0dXJuIFBsYXRmb3JtU3VwcG9ydC5nZXRQbGF0Zm9ybSgpLmVtcHR5Qnl0ZVN0cmluZztcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxudmFyIENvZGUgPSB7XHJcbiAgICAvLyBDYXVzZXMgYXJlIGNvcGllZCBmcm9tOlxyXG4gICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2dycGMvZ3JwYy9ibG9iL2JjZWVjOTRlYTRmYzVmMDA4NWQ4MTIzNWQ4ZTFjMDY3OThkYzM0MWEvaW5jbHVkZS9ncnBjJTJCJTJCL2ltcGwvY29kZWdlbi9zdGF0dXNfY29kZV9lbnVtLmhcclxuICAgIC8qKiBOb3QgYW4gZXJyb3I7IHJldHVybmVkIG9uIHN1Y2Nlc3MuICovXHJcbiAgICBPSzogJ29rJyxcclxuICAgIC8qKiBUaGUgb3BlcmF0aW9uIHdhcyBjYW5jZWxsZWQgKHR5cGljYWxseSBieSB0aGUgY2FsbGVyKS4gKi9cclxuICAgIENBTkNFTExFRDogJ2NhbmNlbGxlZCcsXHJcbiAgICAvKiogVW5rbm93biBlcnJvciBvciBhbiBlcnJvciBmcm9tIGEgZGlmZmVyZW50IGVycm9yIGRvbWFpbi4gKi9cclxuICAgIFVOS05PV046ICd1bmtub3duJyxcclxuICAgIC8qKlxyXG4gICAgICogQ2xpZW50IHNwZWNpZmllZCBhbiBpbnZhbGlkIGFyZ3VtZW50LiBOb3RlIHRoYXQgdGhpcyBkaWZmZXJzIGZyb21cclxuICAgICAqIEZBSUxFRF9QUkVDT05ESVRJT04uIElOVkFMSURfQVJHVU1FTlQgaW5kaWNhdGVzIGFyZ3VtZW50cyB0aGF0IGFyZVxyXG4gICAgICogcHJvYmxlbWF0aWMgcmVnYXJkbGVzcyBvZiB0aGUgc3RhdGUgb2YgdGhlIHN5c3RlbSAoZS5nLiwgYSBtYWxmb3JtZWQgZmlsZVxyXG4gICAgICogbmFtZSkuXHJcbiAgICAgKi9cclxuICAgIElOVkFMSURfQVJHVU1FTlQ6ICdpbnZhbGlkLWFyZ3VtZW50JyxcclxuICAgIC8qKlxyXG4gICAgICogRGVhZGxpbmUgZXhwaXJlZCBiZWZvcmUgb3BlcmF0aW9uIGNvdWxkIGNvbXBsZXRlLiBGb3Igb3BlcmF0aW9ucyB0aGF0XHJcbiAgICAgKiBjaGFuZ2UgdGhlIHN0YXRlIG9mIHRoZSBzeXN0ZW0sIHRoaXMgZXJyb3IgbWF5IGJlIHJldHVybmVkIGV2ZW4gaWYgdGhlXHJcbiAgICAgKiBvcGVyYXRpb24gaGFzIGNvbXBsZXRlZCBzdWNjZXNzZnVsbHkuIEZvciBleGFtcGxlLCBhIHN1Y2Nlc3NmdWwgcmVzcG9uc2VcclxuICAgICAqIGZyb20gYSBzZXJ2ZXIgY291bGQgaGF2ZSBiZWVuIGRlbGF5ZWQgbG9uZyBlbm91Z2ggZm9yIHRoZSBkZWFkbGluZSB0b1xyXG4gICAgICogZXhwaXJlLlxyXG4gICAgICovXHJcbiAgICBERUFETElORV9FWENFRURFRDogJ2RlYWRsaW5lLWV4Y2VlZGVkJyxcclxuICAgIC8qKiBTb21lIHJlcXVlc3RlZCBlbnRpdHkgKGUuZy4sIGZpbGUgb3IgZGlyZWN0b3J5KSB3YXMgbm90IGZvdW5kLiAqL1xyXG4gICAgTk9UX0ZPVU5EOiAnbm90LWZvdW5kJyxcclxuICAgIC8qKlxyXG4gICAgICogU29tZSBlbnRpdHkgdGhhdCB3ZSBhdHRlbXB0ZWQgdG8gY3JlYXRlIChlLmcuLCBmaWxlIG9yIGRpcmVjdG9yeSkgYWxyZWFkeVxyXG4gICAgICogZXhpc3RzLlxyXG4gICAgICovXHJcbiAgICBBTFJFQURZX0VYSVNUUzogJ2FscmVhZHktZXhpc3RzJyxcclxuICAgIC8qKlxyXG4gICAgICogVGhlIGNhbGxlciBkb2VzIG5vdCBoYXZlIHBlcm1pc3Npb24gdG8gZXhlY3V0ZSB0aGUgc3BlY2lmaWVkIG9wZXJhdGlvbi5cclxuICAgICAqIFBFUk1JU1NJT05fREVOSUVEIG11c3Qgbm90IGJlIHVzZWQgZm9yIHJlamVjdGlvbnMgY2F1c2VkIGJ5IGV4aGF1c3RpbmdcclxuICAgICAqIHNvbWUgcmVzb3VyY2UgKHVzZSBSRVNPVVJDRV9FWEhBVVNURUQgaW5zdGVhZCBmb3IgdGhvc2UgZXJyb3JzKS5cclxuICAgICAqIFBFUk1JU1NJT05fREVOSUVEIG11c3Qgbm90IGJlIHVzZWQgaWYgdGhlIGNhbGxlciBjYW4gbm90IGJlIGlkZW50aWZpZWRcclxuICAgICAqICh1c2UgVU5BVVRIRU5USUNBVEVEIGluc3RlYWQgZm9yIHRob3NlIGVycm9ycykuXHJcbiAgICAgKi9cclxuICAgIFBFUk1JU1NJT05fREVOSUVEOiAncGVybWlzc2lvbi1kZW5pZWQnLFxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgcmVxdWVzdCBkb2VzIG5vdCBoYXZlIHZhbGlkIGF1dGhlbnRpY2F0aW9uIGNyZWRlbnRpYWxzIGZvciB0aGVcclxuICAgICAqIG9wZXJhdGlvbi5cclxuICAgICAqL1xyXG4gICAgVU5BVVRIRU5USUNBVEVEOiAndW5hdXRoZW50aWNhdGVkJyxcclxuICAgIC8qKlxyXG4gICAgICogU29tZSByZXNvdXJjZSBoYXMgYmVlbiBleGhhdXN0ZWQsIHBlcmhhcHMgYSBwZXItdXNlciBxdW90YSwgb3IgcGVyaGFwcyB0aGVcclxuICAgICAqIGVudGlyZSBmaWxlIHN5c3RlbSBpcyBvdXQgb2Ygc3BhY2UuXHJcbiAgICAgKi9cclxuICAgIFJFU09VUkNFX0VYSEFVU1RFRDogJ3Jlc291cmNlLWV4aGF1c3RlZCcsXHJcbiAgICAvKipcclxuICAgICAqIE9wZXJhdGlvbiB3YXMgcmVqZWN0ZWQgYmVjYXVzZSB0aGUgc3lzdGVtIGlzIG5vdCBpbiBhIHN0YXRlIHJlcXVpcmVkIGZvclxyXG4gICAgICogdGhlIG9wZXJhdGlvbidzIGV4ZWN1dGlvbi4gRm9yIGV4YW1wbGUsIGRpcmVjdG9yeSB0byBiZSBkZWxldGVkIG1heSBiZVxyXG4gICAgICogbm9uLWVtcHR5LCBhbiBybWRpciBvcGVyYXRpb24gaXMgYXBwbGllZCB0byBhIG5vbi1kaXJlY3RvcnksIGV0Yy5cclxuICAgICAqXHJcbiAgICAgKiBBIGxpdG11cyB0ZXN0IHRoYXQgbWF5IGhlbHAgYSBzZXJ2aWNlIGltcGxlbWVudG9yIGluIGRlY2lkaW5nXHJcbiAgICAgKiBiZXR3ZWVuIEZBSUxFRF9QUkVDT05ESVRJT04sIEFCT1JURUQsIGFuZCBVTkFWQUlMQUJMRTpcclxuICAgICAqICAoYSkgVXNlIFVOQVZBSUxBQkxFIGlmIHRoZSBjbGllbnQgY2FuIHJldHJ5IGp1c3QgdGhlIGZhaWxpbmcgY2FsbC5cclxuICAgICAqICAoYikgVXNlIEFCT1JURUQgaWYgdGhlIGNsaWVudCBzaG91bGQgcmV0cnkgYXQgYSBoaWdoZXItbGV2ZWxcclxuICAgICAqICAgICAgKGUuZy4sIHJlc3RhcnRpbmcgYSByZWFkLW1vZGlmeS13cml0ZSBzZXF1ZW5jZSkuXHJcbiAgICAgKiAgKGMpIFVzZSBGQUlMRURfUFJFQ09ORElUSU9OIGlmIHRoZSBjbGllbnQgc2hvdWxkIG5vdCByZXRyeSB1bnRpbFxyXG4gICAgICogICAgICB0aGUgc3lzdGVtIHN0YXRlIGhhcyBiZWVuIGV4cGxpY2l0bHkgZml4ZWQuIEUuZy4sIGlmIGFuIFwicm1kaXJcIlxyXG4gICAgICogICAgICBmYWlscyBiZWNhdXNlIHRoZSBkaXJlY3RvcnkgaXMgbm9uLWVtcHR5LCBGQUlMRURfUFJFQ09ORElUSU9OXHJcbiAgICAgKiAgICAgIHNob3VsZCBiZSByZXR1cm5lZCBzaW5jZSB0aGUgY2xpZW50IHNob3VsZCBub3QgcmV0cnkgdW5sZXNzXHJcbiAgICAgKiAgICAgIHRoZXkgaGF2ZSBmaXJzdCBmaXhlZCB1cCB0aGUgZGlyZWN0b3J5IGJ5IGRlbGV0aW5nIGZpbGVzIGZyb20gaXQuXHJcbiAgICAgKiAgKGQpIFVzZSBGQUlMRURfUFJFQ09ORElUSU9OIGlmIHRoZSBjbGllbnQgcGVyZm9ybXMgY29uZGl0aW9uYWxcclxuICAgICAqICAgICAgUkVTVCBHZXQvVXBkYXRlL0RlbGV0ZSBvbiBhIHJlc291cmNlIGFuZCB0aGUgcmVzb3VyY2Ugb24gdGhlXHJcbiAgICAgKiAgICAgIHNlcnZlciBkb2VzIG5vdCBtYXRjaCB0aGUgY29uZGl0aW9uLiBFLmcuLCBjb25mbGljdGluZ1xyXG4gICAgICogICAgICByZWFkLW1vZGlmeS13cml0ZSBvbiB0aGUgc2FtZSByZXNvdXJjZS5cclxuICAgICAqL1xyXG4gICAgRkFJTEVEX1BSRUNPTkRJVElPTjogJ2ZhaWxlZC1wcmVjb25kaXRpb24nLFxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgb3BlcmF0aW9uIHdhcyBhYm9ydGVkLCB0eXBpY2FsbHkgZHVlIHRvIGEgY29uY3VycmVuY3kgaXNzdWUgbGlrZVxyXG4gICAgICogc2VxdWVuY2VyIGNoZWNrIGZhaWx1cmVzLCB0cmFuc2FjdGlvbiBhYm9ydHMsIGV0Yy5cclxuICAgICAqXHJcbiAgICAgKiBTZWUgbGl0bXVzIHRlc3QgYWJvdmUgZm9yIGRlY2lkaW5nIGJldHdlZW4gRkFJTEVEX1BSRUNPTkRJVElPTiwgQUJPUlRFRCxcclxuICAgICAqIGFuZCBVTkFWQUlMQUJMRS5cclxuICAgICAqL1xyXG4gICAgQUJPUlRFRDogJ2Fib3J0ZWQnLFxyXG4gICAgLyoqXHJcbiAgICAgKiBPcGVyYXRpb24gd2FzIGF0dGVtcHRlZCBwYXN0IHRoZSB2YWxpZCByYW5nZS4gRS5nLiwgc2Vla2luZyBvciByZWFkaW5nXHJcbiAgICAgKiBwYXN0IGVuZCBvZiBmaWxlLlxyXG4gICAgICpcclxuICAgICAqIFVubGlrZSBJTlZBTElEX0FSR1VNRU5ULCB0aGlzIGVycm9yIGluZGljYXRlcyBhIHByb2JsZW0gdGhhdCBtYXkgYmUgZml4ZWRcclxuICAgICAqIGlmIHRoZSBzeXN0ZW0gc3RhdGUgY2hhbmdlcy4gRm9yIGV4YW1wbGUsIGEgMzItYml0IGZpbGUgc3lzdGVtIHdpbGxcclxuICAgICAqIGdlbmVyYXRlIElOVkFMSURfQVJHVU1FTlQgaWYgYXNrZWQgdG8gcmVhZCBhdCBhbiBvZmZzZXQgdGhhdCBpcyBub3QgaW4gdGhlXHJcbiAgICAgKiByYW5nZSBbMCwyXjMyLTFdLCBidXQgaXQgd2lsbCBnZW5lcmF0ZSBPVVRfT0ZfUkFOR0UgaWYgYXNrZWQgdG8gcmVhZCBmcm9tXHJcbiAgICAgKiBhbiBvZmZzZXQgcGFzdCB0aGUgY3VycmVudCBmaWxlIHNpemUuXHJcbiAgICAgKlxyXG4gICAgICogVGhlcmUgaXMgYSBmYWlyIGJpdCBvZiBvdmVybGFwIGJldHdlZW4gRkFJTEVEX1BSRUNPTkRJVElPTiBhbmRcclxuICAgICAqIE9VVF9PRl9SQU5HRS4gV2UgcmVjb21tZW5kIHVzaW5nIE9VVF9PRl9SQU5HRSAodGhlIG1vcmUgc3BlY2lmaWMgZXJyb3IpXHJcbiAgICAgKiB3aGVuIGl0IGFwcGxpZXMgc28gdGhhdCBjYWxsZXJzIHdobyBhcmUgaXRlcmF0aW5nIHRocm91Z2ggYSBzcGFjZSBjYW5cclxuICAgICAqIGVhc2lseSBsb29rIGZvciBhbiBPVVRfT0ZfUkFOR0UgZXJyb3IgdG8gZGV0ZWN0IHdoZW4gdGhleSBhcmUgZG9uZS5cclxuICAgICAqL1xyXG4gICAgT1VUX09GX1JBTkdFOiAnb3V0LW9mLXJhbmdlJyxcclxuICAgIC8qKiBPcGVyYXRpb24gaXMgbm90IGltcGxlbWVudGVkIG9yIG5vdCBzdXBwb3J0ZWQvZW5hYmxlZCBpbiB0aGlzIHNlcnZpY2UuICovXHJcbiAgICBVTklNUExFTUVOVEVEOiAndW5pbXBsZW1lbnRlZCcsXHJcbiAgICAvKipcclxuICAgICAqIEludGVybmFsIGVycm9ycy4gTWVhbnMgc29tZSBpbnZhcmlhbnRzIGV4cGVjdGVkIGJ5IHVuZGVybHlpbmcgU3lzdGVtIGhhc1xyXG4gICAgICogYmVlbiBicm9rZW4uIElmIHlvdSBzZWUgb25lIG9mIHRoZXNlIGVycm9ycywgU29tZXRoaW5nIGlzIHZlcnkgYnJva2VuLlxyXG4gICAgICovXHJcbiAgICBJTlRFUk5BTDogJ2ludGVybmFsJyxcclxuICAgIC8qKlxyXG4gICAgICogVGhlIHNlcnZpY2UgaXMgY3VycmVudGx5IHVuYXZhaWxhYmxlLiBUaGlzIGlzIGEgbW9zdCBsaWtlbHkgYSB0cmFuc2llbnRcclxuICAgICAqIGNvbmRpdGlvbiBhbmQgbWF5IGJlIGNvcnJlY3RlZCBieSByZXRyeWluZyB3aXRoIGEgYmFja29mZi5cclxuICAgICAqXHJcbiAgICAgKiBTZWUgbGl0bXVzIHRlc3QgYWJvdmUgZm9yIGRlY2lkaW5nIGJldHdlZW4gRkFJTEVEX1BSRUNPTkRJVElPTiwgQUJPUlRFRCxcclxuICAgICAqIGFuZCBVTkFWQUlMQUJMRS5cclxuICAgICAqL1xyXG4gICAgVU5BVkFJTEFCTEU6ICd1bmF2YWlsYWJsZScsXHJcbiAgICAvKiogVW5yZWNvdmVyYWJsZSBkYXRhIGxvc3Mgb3IgY29ycnVwdGlvbi4gKi9cclxuICAgIERBVEFfTE9TUzogJ2RhdGEtbG9zcydcclxufTtcclxuLyoqXHJcbiAqIEFuIGVycm9yIGNsYXNzIHVzZWQgZm9yIEZpcmVzdG9yZS1nZW5lcmF0ZWQgZXJyb3JzLiBJZGVhbGx5IHdlIHNob3VsZCBiZVxyXG4gKiB1c2luZyBGaXJlYmFzZUVycm9yLCBidXQgaW50ZWdyYXRpbmcgd2l0aCBpdCBpcyBvdmVybHkgYXJkdW91cyBhdCB0aGUgbW9tZW50LFxyXG4gKiBzbyB3ZSBkZWZpbmUgb3VyIG93biBjb21wYXRpYmxlIGVycm9yIGNsYXNzICh3aXRoIGEgYG5hbWVgIG9mICdGaXJlYmFzZUVycm9yJ1xyXG4gKiBhbmQgY29tcGF0aWJsZSBgY29kZWAgYW5kIGBtZXNzYWdlYCBmaWVsZHMuKVxyXG4gKi9cclxudmFyIEZpcmVzdG9yZUVycm9yID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgdHNsaWIuX19leHRlbmRzKEZpcmVzdG9yZUVycm9yLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gRmlyZXN0b3JlRXJyb3IoY29kZSwgbWVzc2FnZSkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIG1lc3NhZ2UpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMuY29kZSA9IGNvZGU7XHJcbiAgICAgICAgX3RoaXMubWVzc2FnZSA9IG1lc3NhZ2U7XHJcbiAgICAgICAgX3RoaXMubmFtZSA9ICdGaXJlYmFzZUVycm9yJztcclxuICAgICAgICAvLyBIQUNLOiBXZSB3cml0ZSBhIHRvU3RyaW5nIHByb3BlcnR5IGRpcmVjdGx5IGJlY2F1c2UgRXJyb3IgaXMgbm90IGEgcmVhbFxyXG4gICAgICAgIC8vIGNsYXNzIGFuZCBzbyBpbmhlcml0YW5jZSBkb2VzIG5vdCB3b3JrIGNvcnJlY3RseS4gV2UgY291bGQgYWx0ZXJuYXRpdmVseVxyXG4gICAgICAgIC8vIGRvIHRoZSBzYW1lIFwiYmFjay1kb29yIGluaGVyaXRhbmNlXCIgdHJpY2sgdGhhdCBGaXJlYmFzZUVycm9yIGRvZXMuXHJcbiAgICAgICAgX3RoaXMudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5uYW1lICsgXCI6IFtjb2RlPVwiICsgX3RoaXMuY29kZSArIFwiXTogXCIgKyBfdGhpcy5tZXNzYWdlOyB9O1xyXG4gICAgICAgIHJldHVybiBfdGhpcztcclxuICAgIH1cclxuICAgIHJldHVybiBGaXJlc3RvcmVFcnJvcjtcclxufShFcnJvcikpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEhlbHBlciBmdW5jdGlvbiB0byBwcmV2ZW50IGluc3RhbnRpYXRpb24gdGhyb3VnaCB0aGUgY29uc3RydWN0b3IuXHJcbiAqXHJcbiAqIFRoaXMgbWV0aG9kIGNyZWF0ZXMgYSBuZXcgY29uc3RydWN0b3IgdGhhdCB0aHJvd3Mgd2hlbiBpdCdzIGludm9rZWQuXHJcbiAqIFRoZSBwcm90b3R5cGUgb2YgdGhhdCBjb25zdHJ1Y3RvciBpcyB0aGVuIHNldCB0byB0aGUgcHJvdG90eXBlIG9mIHRoZSBoaWRkZW5cclxuICogXCJjbGFzc1wiIHRvIGV4cG9zZSBhbGwgdGhlIHByb3RvdHlwZSBtZXRob2RzIGFuZCBhbGxvdyBmb3IgaW5zdGFuY2VvZlxyXG4gKiBjaGVja3MuXHJcbiAqXHJcbiAqIFRvIGFsc28gbWFrZSBhbGwgdGhlIHN0YXRpYyBtZXRob2RzIGF2YWlsYWJsZSwgYWxsIHByb3BlcnRpZXMgb2YgdGhlXHJcbiAqIG9yaWdpbmFsIGNvbnN0cnVjdG9yIGFyZSBjb3BpZWQgdG8gdGhlIG5ldyBjb25zdHJ1Y3Rvci5cclxuICovXHJcbmZ1bmN0aW9uIG1ha2VDb25zdHJ1Y3RvclByaXZhdGUoY2xzLCBvcHRpb25hbE1lc3NhZ2UpIHtcclxuICAgIGZ1bmN0aW9uIFB1YmxpY0NvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHZhciBlcnJvciA9ICdUaGlzIGNvbnN0cnVjdG9yIGlzIHByaXZhdGUuJztcclxuICAgICAgICBpZiAob3B0aW9uYWxNZXNzYWdlKSB7XHJcbiAgICAgICAgICAgIGVycm9yICs9ICcgJztcclxuICAgICAgICAgICAgZXJyb3IgKz0gb3B0aW9uYWxNZXNzYWdlO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5JTlZBTElEX0FSR1VNRU5ULCBlcnJvcik7XHJcbiAgICB9XHJcbiAgICAvLyBNYWtlIHN1cmUgaW5zdGFuY2VvZiBjaGVja3Mgd29yayBhbmQgYWxsIG1ldGhvZHMgYXJlIGV4cG9zZWQgb24gdGhlIHB1YmxpY1xyXG4gICAgLy8gY29uc3RydWN0b3JcclxuICAgIFB1YmxpY0NvbnN0cnVjdG9yLnByb3RvdHlwZSA9IGNscy5wcm90b3R5cGU7XHJcbiAgICAvLyBDb3B5IGFueSBzdGF0aWMgbWV0aG9kcy9tZW1iZXJzXHJcbiAgICBmb3IgKHZhciBzdGF0aWNQcm9wZXJ0eSBpbiBjbHMpIHtcclxuICAgICAgICBpZiAoY2xzLmhhc093blByb3BlcnR5KHN0YXRpY1Byb3BlcnR5KSkge1xyXG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG4gICAgICAgICAgICBQdWJsaWNDb25zdHJ1Y3RvcltzdGF0aWNQcm9wZXJ0eV0gPSBjbHNbc3RhdGljUHJvcGVydHldO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbiAgICByZXR1cm4gUHVibGljQ29uc3RydWN0b3I7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIGNvbnRhaW5zKG9iaiwga2V5KSB7XHJcbiAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KTtcclxufVxyXG4vKiogUmV0dXJucyB0aGUgZ2l2ZW4gdmFsdWUgaWYgaXQncyBkZWZpbmVkIG9yIHRoZSBkZWZhdWx0VmFsdWUgb3RoZXJ3aXNlLiAqL1xyXG5mdW5jdGlvbiBkZWZhdWx0ZWQodmFsdWUsIGRlZmF1bHRWYWx1ZSkge1xyXG4gICAgcmV0dXJuIHZhbHVlICE9PSB1bmRlZmluZWQgPyB2YWx1ZSA6IGRlZmF1bHRWYWx1ZTtcclxufVxyXG5mdW5jdGlvbiBmb3JFYWNoTnVtYmVyKG9iaiwgZm4pIHtcclxuICAgIGZvciAodmFyIGtleSBpbiBvYmopIHtcclxuICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkge1xyXG4gICAgICAgICAgICB2YXIgbnVtID0gTnVtYmVyKGtleSk7XHJcbiAgICAgICAgICAgIGlmICghaXNOYU4obnVtKSkge1xyXG4gICAgICAgICAgICAgICAgZm4obnVtLCBvYmpba2V5XSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gdmFsdWVzKG9iaikge1xyXG4gICAgdmFyIHZzID0gW107XHJcbiAgICBmb3JFYWNoKG9iaiwgZnVuY3Rpb24gKF8sIHYpIHsgcmV0dXJuIHZzLnB1c2godik7IH0pO1xyXG4gICAgcmV0dXJuIHZzO1xyXG59XHJcbmZ1bmN0aW9uIGZvckVhY2gob2JqLCBmbikge1xyXG4gICAgZm9yICh2YXIga2V5IGluIG9iaikge1xyXG4gICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSB7XHJcbiAgICAgICAgICAgIGZuKGtleSwgb2JqW2tleV0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBpc0VtcHR5KG9iaikge1xyXG4gICAgYXNzZXJ0KG9iaiAhPSBudWxsICYmIHR5cGVvZiBvYmogPT09ICdvYmplY3QnLCAnaXNFbXB0eSgpIGV4cGVjdHMgb2JqZWN0IHBhcmFtZXRlci4nKTtcclxuICAgIGZvciAodmFyIGtleSBpbiBvYmopIHtcclxuICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRydWU7XHJcbn1cclxuZnVuY3Rpb24gc2hhbGxvd0NvcHkob2JqKSB7XHJcbiAgICBhc3NlcnQob2JqICYmIHR5cGVvZiBvYmogPT09ICdvYmplY3QnLCAnc2hhbGxvd0NvcHkoKSBleHBlY3RzIG9iamVjdCBwYXJhbWV0ZXIuJyk7XHJcbiAgICB2YXIgcmVzdWx0ID0ge307XHJcbiAgICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7XHJcbiAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIHtcclxuICAgICAgICAgICAgcmVzdWx0W2tleV0gPSBvYmpba2V5XTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogVmFsaWRhdGVzIHRoYXQgbm8gYXJndW1lbnRzIHdlcmUgcGFzc2VkIGluIHRoZSBpbnZvY2F0aW9uIG9mIGZ1bmN0aW9uTmFtZS5cclxuICpcclxuICogRm9yd2FyZCB0aGUgbWFnaWMgXCJhcmd1bWVudHNcIiB2YXJpYWJsZSBhcyBzZWNvbmQgcGFyYW1ldGVyIG9uIHdoaWNoIHRoZVxyXG4gKiBwYXJhbWV0ZXIgdmFsaWRhdGlvbiBpcyBwZXJmb3JtZWQ6XHJcbiAqIHZhbGlkYXRlTm9BcmdzKCdteUZ1bmN0aW9uJywgYXJndW1lbnRzKTtcclxuICovXHJcbmZ1bmN0aW9uIHZhbGlkYXRlTm9BcmdzKGZ1bmN0aW9uTmFtZSwgYXJncykge1xyXG4gICAgaWYgKGFyZ3MubGVuZ3RoICE9PSAwKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuSU5WQUxJRF9BUkdVTUVOVCwgXCJGdW5jdGlvbiBcIiArIGZ1bmN0aW9uTmFtZSArIFwiKCkgZG9lcyBub3Qgc3VwcG9ydCBhcmd1bWVudHMsIFwiICtcclxuICAgICAgICAgICAgJ2J1dCB3YXMgY2FsbGVkIHdpdGggJyArXHJcbiAgICAgICAgICAgIGZvcm1hdFBsdXJhbChhcmdzLmxlbmd0aCwgJ2FyZ3VtZW50JykgK1xyXG4gICAgICAgICAgICAnLicpO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBWYWxpZGF0ZXMgdGhlIGludm9jYXRpb24gb2YgZnVuY3Rpb25OYW1lIGhhcyB0aGUgZXhhY3QgbnVtYmVyIG9mIGFyZ3VtZW50cy5cclxuICpcclxuICogRm9yd2FyZCB0aGUgbWFnaWMgXCJhcmd1bWVudHNcIiB2YXJpYWJsZSBhcyBzZWNvbmQgcGFyYW1ldGVyIG9uIHdoaWNoIHRoZVxyXG4gKiBwYXJhbWV0ZXIgdmFsaWRhdGlvbiBpcyBwZXJmb3JtZWQ6XHJcbiAqIHZhbGlkYXRlRXhhY3ROdW1iZXJPZkFyZ3MoJ215RnVuY3Rpb24nLCBhcmd1bWVudHMsIDIpO1xyXG4gKi9cclxuZnVuY3Rpb24gdmFsaWRhdGVFeGFjdE51bWJlck9mQXJncyhmdW5jdGlvbk5hbWUsIGFyZ3MsIG51bWJlck9mQXJncykge1xyXG4gICAgaWYgKGFyZ3MubGVuZ3RoICE9PSBudW1iZXJPZkFyZ3MpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5JTlZBTElEX0FSR1VNRU5ULCBcIkZ1bmN0aW9uIFwiICsgZnVuY3Rpb25OYW1lICsgXCIoKSByZXF1aXJlcyBcIiArXHJcbiAgICAgICAgICAgIGZvcm1hdFBsdXJhbChudW1iZXJPZkFyZ3MsICdhcmd1bWVudCcpICtcclxuICAgICAgICAgICAgJywgYnV0IHdhcyBjYWxsZWQgd2l0aCAnICtcclxuICAgICAgICAgICAgZm9ybWF0UGx1cmFsKGFyZ3MubGVuZ3RoLCAnYXJndW1lbnQnKSArXHJcbiAgICAgICAgICAgICcuJyk7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkYXRlcyB0aGUgaW52b2NhdGlvbiBvZiBmdW5jdGlvbk5hbWUgaGFzIGF0IGxlYXN0IHRoZSBwcm92aWRlZCBudW1iZXIgb2ZcclxuICogYXJndW1lbnRzIChidXQgY2FuIGhhdmUgbWFueSBtb3JlKS5cclxuICpcclxuICogRm9yd2FyZCB0aGUgbWFnaWMgXCJhcmd1bWVudHNcIiB2YXJpYWJsZSBhcyBzZWNvbmQgcGFyYW1ldGVyIG9uIHdoaWNoIHRoZVxyXG4gKiBwYXJhbWV0ZXIgdmFsaWRhdGlvbiBpcyBwZXJmb3JtZWQ6XHJcbiAqIHZhbGlkYXRlQXRMZWFzdE51bWJlck9mQXJncygnbXlGdW5jdGlvbicsIGFyZ3VtZW50cywgMik7XHJcbiAqL1xyXG5mdW5jdGlvbiB2YWxpZGF0ZUF0TGVhc3ROdW1iZXJPZkFyZ3MoZnVuY3Rpb25OYW1lLCBhcmdzLCBtaW5OdW1iZXJPZkFyZ3MpIHtcclxuICAgIGlmIChhcmdzLmxlbmd0aCA8IG1pbk51bWJlck9mQXJncykge1xyXG4gICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLklOVkFMSURfQVJHVU1FTlQsIFwiRnVuY3Rpb24gXCIgKyBmdW5jdGlvbk5hbWUgKyBcIigpIHJlcXVpcmVzIGF0IGxlYXN0IFwiICtcclxuICAgICAgICAgICAgZm9ybWF0UGx1cmFsKG1pbk51bWJlck9mQXJncywgJ2FyZ3VtZW50JykgK1xyXG4gICAgICAgICAgICAnLCBidXQgd2FzIGNhbGxlZCB3aXRoICcgK1xyXG4gICAgICAgICAgICBmb3JtYXRQbHVyYWwoYXJncy5sZW5ndGgsICdhcmd1bWVudCcpICtcclxuICAgICAgICAgICAgJy4nKTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogVmFsaWRhdGVzIHRoZSBpbnZvY2F0aW9uIG9mIGZ1bmN0aW9uTmFtZSBoYXMgbnVtYmVyIG9mIGFyZ3VtZW50cyBiZXR3ZWVuXHJcbiAqIHRoZSB2YWx1ZXMgcHJvdmlkZWQuXHJcbiAqXHJcbiAqIEZvcndhcmQgdGhlIG1hZ2ljIFwiYXJndW1lbnRzXCIgdmFyaWFibGUgYXMgc2Vjb25kIHBhcmFtZXRlciBvbiB3aGljaCB0aGVcclxuICogcGFyYW1ldGVyIHZhbGlkYXRpb24gaXMgcGVyZm9ybWVkOlxyXG4gKiB2YWxpZGF0ZUJldHdlZW5OdW1iZXJPZkFyZ3MoJ215RnVuY3Rpb24nLCBhcmd1bWVudHMsIDIsIDMpO1xyXG4gKi9cclxuZnVuY3Rpb24gdmFsaWRhdGVCZXR3ZWVuTnVtYmVyT2ZBcmdzKGZ1bmN0aW9uTmFtZSwgYXJncywgbWluTnVtYmVyT2ZBcmdzLCBtYXhOdW1iZXJPZkFyZ3MpIHtcclxuICAgIGlmIChhcmdzLmxlbmd0aCA8IG1pbk51bWJlck9mQXJncyB8fCBhcmdzLmxlbmd0aCA+IG1heE51bWJlck9mQXJncykge1xyXG4gICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLklOVkFMSURfQVJHVU1FTlQsIFwiRnVuY3Rpb24gXCIgKyBmdW5jdGlvbk5hbWUgKyBcIigpIHJlcXVpcmVzIGJldHdlZW4gXCIgKyBtaW5OdW1iZXJPZkFyZ3MgKyBcIiBhbmQgXCIgK1xyXG4gICAgICAgICAgICAobWF4TnVtYmVyT2ZBcmdzICsgXCIgYXJndW1lbnRzLCBidXQgd2FzIGNhbGxlZCB3aXRoIFwiKSArXHJcbiAgICAgICAgICAgIGZvcm1hdFBsdXJhbChhcmdzLmxlbmd0aCwgJ2FyZ3VtZW50JykgK1xyXG4gICAgICAgICAgICAnLicpO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBWYWxpZGF0ZXMgdGhlIHByb3ZpZGVkIGFyZ3VtZW50IGlzIGFuIGFycmF5IGFuZCBoYXMgYXMgbGVhc3QgdGhlIGV4cGVjdGVkXHJcbiAqIG51bWJlciBvZiBlbGVtZW50cy5cclxuICovXHJcbmZ1bmN0aW9uIHZhbGlkYXRlTmFtZWRBcnJheUF0TGVhc3ROdW1iZXJPZkVsZW1lbnRzKGZ1bmN0aW9uTmFtZSwgdmFsdWUsIG5hbWUsIG1pbk51bWJlck9mRWxlbWVudHMpIHtcclxuICAgIGlmICghKHZhbHVlIGluc3RhbmNlb2YgQXJyYXkpIHx8IHZhbHVlLmxlbmd0aCA8IG1pbk51bWJlck9mRWxlbWVudHMpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5JTlZBTElEX0FSR1VNRU5ULCBcIkZ1bmN0aW9uIFwiICsgZnVuY3Rpb25OYW1lICsgXCIoKSByZXF1aXJlcyBpdHMgXCIgKyBuYW1lICsgXCIgYXJndW1lbnQgdG8gYmUgYW4gXCIgK1xyXG4gICAgICAgICAgICAnYXJyYXkgd2l0aCBhdCBsZWFzdCAnICtcclxuICAgICAgICAgICAgKGZvcm1hdFBsdXJhbChtaW5OdW1iZXJPZkVsZW1lbnRzLCAnZWxlbWVudCcpICsgXCIuXCIpKTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogVmFsaWRhdGVzIHRoZSBwcm92aWRlZCBwb3NpdGlvbmFsIGFyZ3VtZW50IGhhcyB0aGUgbmF0aXZlIEphdmFTY3JpcHQgdHlwZVxyXG4gKiB1c2luZyB0eXBlb2YgY2hlY2tzLlxyXG4gKi9cclxuZnVuY3Rpb24gdmFsaWRhdGVBcmdUeXBlKGZ1bmN0aW9uTmFtZSwgdHlwZSwgcG9zaXRpb24sIGFyZ3VtZW50KSB7XHJcbiAgICB2YWxpZGF0ZVR5cGUoZnVuY3Rpb25OYW1lLCB0eXBlLCBvcmRpbmFsKHBvc2l0aW9uKSArIFwiIGFyZ3VtZW50XCIsIGFyZ3VtZW50KTtcclxufVxyXG4vKipcclxuICogVmFsaWRhdGVzIHRoZSBwcm92aWRlZCBhcmd1bWVudCBoYXMgdGhlIG5hdGl2ZSBKYXZhU2NyaXB0IHR5cGUgdXNpbmdcclxuICogdHlwZW9mIGNoZWNrcyBvciBpcyB1bmRlZmluZWQuXHJcbiAqL1xyXG5mdW5jdGlvbiB2YWxpZGF0ZU9wdGlvbmFsQXJnVHlwZShmdW5jdGlvbk5hbWUsIHR5cGUsIHBvc2l0aW9uLCBhcmd1bWVudCkge1xyXG4gICAgaWYgKGFyZ3VtZW50ICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICB2YWxpZGF0ZUFyZ1R5cGUoZnVuY3Rpb25OYW1lLCB0eXBlLCBwb3NpdGlvbiwgYXJndW1lbnQpO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBWYWxpZGF0ZXMgdGhlIHByb3ZpZGVkIG5hbWVkIG9wdGlvbiBoYXMgdGhlIG5hdGl2ZSBKYXZhU2NyaXB0IHR5cGUgdXNpbmdcclxuICogdHlwZW9mIGNoZWNrcy5cclxuICovXHJcbmZ1bmN0aW9uIHZhbGlkYXRlTmFtZWRUeXBlKGZ1bmN0aW9uTmFtZSwgdHlwZSwgb3B0aW9uTmFtZSwgYXJndW1lbnQpIHtcclxuICAgIHZhbGlkYXRlVHlwZShmdW5jdGlvbk5hbWUsIHR5cGUsIG9wdGlvbk5hbWUgKyBcIiBvcHRpb25cIiwgYXJndW1lbnQpO1xyXG59XHJcbi8qKlxyXG4gKiBWYWxpZGF0ZXMgdGhlIHByb3ZpZGVkIG5hbWVkIG9wdGlvbiBoYXMgdGhlIG5hdGl2ZSBKYXZhU2NyaXB0IHR5cGUgdXNpbmdcclxuICogdHlwZW9mIGNoZWNrcyBvciBpcyB1bmRlZmluZWQuXHJcbiAqL1xyXG5mdW5jdGlvbiB2YWxpZGF0ZU5hbWVkT3B0aW9uYWxUeXBlKGZ1bmN0aW9uTmFtZSwgdHlwZSwgb3B0aW9uTmFtZSwgYXJndW1lbnQpIHtcclxuICAgIGlmIChhcmd1bWVudCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgdmFsaWRhdGVOYW1lZFR5cGUoZnVuY3Rpb25OYW1lLCB0eXBlLCBvcHRpb25OYW1lLCBhcmd1bWVudCk7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gdmFsaWRhdGVBcnJheUVsZW1lbnRzKGZ1bmN0aW9uTmFtZSwgb3B0aW9uTmFtZSwgdHlwZURlc2NyaXB0aW9uLCBhcmd1bWVudCwgdmFsaWRhdG9yKSB7XHJcbiAgICBpZiAoIShhcmd1bWVudCBpbnN0YW5jZW9mIEFycmF5KSkge1xyXG4gICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLklOVkFMSURfQVJHVU1FTlQsIFwiRnVuY3Rpb24gXCIgKyBmdW5jdGlvbk5hbWUgKyBcIigpIHJlcXVpcmVzIGl0cyBcIiArIG9wdGlvbk5hbWUgKyBcIiBcIiArXHJcbiAgICAgICAgICAgIChcIm9wdGlvbiB0byBiZSBhbiBhcnJheSwgYnV0IGl0IHdhczogXCIgKyB2YWx1ZURlc2NyaXB0aW9uKGFyZ3VtZW50KSkpO1xyXG4gICAgfVxyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcmd1bWVudC5sZW5ndGg7ICsraSkge1xyXG4gICAgICAgIGlmICghdmFsaWRhdG9yKGFyZ3VtZW50W2ldKSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5JTlZBTElEX0FSR1VNRU5ULCBcIkZ1bmN0aW9uIFwiICsgZnVuY3Rpb25OYW1lICsgXCIoKSByZXF1aXJlcyBhbGwgXCIgKyBvcHRpb25OYW1lICsgXCIgXCIgK1xyXG4gICAgICAgICAgICAgICAgKFwiZWxlbWVudHMgdG8gYmUgXCIgKyB0eXBlRGVzY3JpcHRpb24gKyBcIiwgYnV0IHRoZSB2YWx1ZSBhdCBpbmRleCBcIiArIGkgKyBcIiBcIikgK1xyXG4gICAgICAgICAgICAgICAgKFwid2FzOiBcIiArIHZhbHVlRGVzY3JpcHRpb24oYXJndW1lbnRbaV0pKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIHZhbGlkYXRlT3B0aW9uYWxBcnJheUVsZW1lbnRzKGZ1bmN0aW9uTmFtZSwgb3B0aW9uTmFtZSwgdHlwZURlc2NyaXB0aW9uLCBhcmd1bWVudCwgdmFsaWRhdG9yKSB7XHJcbiAgICBpZiAoYXJndW1lbnQgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIHZhbGlkYXRlQXJyYXlFbGVtZW50cyhmdW5jdGlvbk5hbWUsIG9wdGlvbk5hbWUsIHR5cGVEZXNjcmlwdGlvbiwgYXJndW1lbnQsIHZhbGlkYXRvcik7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkYXRlcyB0aGF0IHRoZSBwcm92aWRlZCBuYW1lZCBvcHRpb24gZXF1YWxzIG9uZSBvZiB0aGUgZXhwZWN0ZWQgdmFsdWVzLlxyXG4gKi9cclxuZnVuY3Rpb24gdmFsaWRhdGVOYW1lZFByb3BlcnR5RXF1YWxzKGZ1bmN0aW9uTmFtZSwgaW5wdXROYW1lLCBvcHRpb25OYW1lLCBpbnB1dCwgZXhwZWN0ZWQpIHtcclxuICAgIHZhciBleHBlY3RlZERlc2NyaXB0aW9uID0gW107XHJcbiAgICBmb3IgKHZhciBfaSA9IDAsIGV4cGVjdGVkXzEgPSBleHBlY3RlZDsgX2kgPCBleHBlY3RlZF8xLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgIHZhciB2YWwgPSBleHBlY3RlZF8xW19pXTtcclxuICAgICAgICBpZiAodmFsID09PSBpbnB1dCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGV4cGVjdGVkRGVzY3JpcHRpb24ucHVzaCh2YWx1ZURlc2NyaXB0aW9uKHZhbCkpO1xyXG4gICAgfVxyXG4gICAgdmFyIGFjdHVhbERlc2NyaXB0aW9uID0gdmFsdWVEZXNjcmlwdGlvbihpbnB1dCk7XHJcbiAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5JTlZBTElEX0FSR1VNRU5ULCBcIkludmFsaWQgdmFsdWUgXCIgKyBhY3R1YWxEZXNjcmlwdGlvbiArIFwiIHByb3ZpZGVkIHRvIGZ1bmN0aW9uIFwiICsgZnVuY3Rpb25OYW1lICsgXCIoKSBmb3Igb3B0aW9uIFwiICtcclxuICAgICAgICAoXCJcXFwiXCIgKyBvcHRpb25OYW1lICsgXCJcXFwiLiBBY2NlcHRhYmxlIHZhbHVlczogXCIgKyBleHBlY3RlZERlc2NyaXB0aW9uLmpvaW4oJywgJykpKTtcclxufVxyXG4vKipcclxuICogVmFsaWRhdGVzIHRoYXQgdGhlIHByb3ZpZGVkIG5hbWVkIG9wdGlvbiBlcXVhbHMgb25lIG9mIHRoZSBleHBlY3RlZCB2YWx1ZXMgb3JcclxuICogaXMgdW5kZWZpbmVkLlxyXG4gKi9cclxuZnVuY3Rpb24gdmFsaWRhdGVOYW1lZE9wdGlvbmFsUHJvcGVydHlFcXVhbHMoZnVuY3Rpb25OYW1lLCBpbnB1dE5hbWUsIG9wdGlvbk5hbWUsIGlucHV0LCBleHBlY3RlZCkge1xyXG4gICAgaWYgKGlucHV0ICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICB2YWxpZGF0ZU5hbWVkUHJvcGVydHlFcXVhbHMoZnVuY3Rpb25OYW1lLCBpbnB1dE5hbWUsIG9wdGlvbk5hbWUsIGlucHV0LCBleHBlY3RlZCk7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkYXRlcyB0aGF0IHRoZSBwcm92aWRlZCBhcmd1bWVudCBpcyBhIHZhbGlkIGVudW0uXHJcbiAqXHJcbiAqIEBwYXJhbSBmdW5jdGlvbk5hbWUgRnVuY3Rpb24gbWFraW5nIHRoZSB2YWxpZGF0aW9uIGNhbGwuXHJcbiAqIEBwYXJhbSBlbnVtcyBBcnJheSBjb250YWluaW5nIGFsbCBwb3NzaWJsZSB2YWx1ZXMgZm9yIHRoZSBlbnVtLlxyXG4gKiBAcGFyYW0gcG9zaXRpb24gUG9zaXRpb24gb2YgdGhlIGFyZ3VtZW50IGluIGBmdW5jdGlvbk5hbWVgLlxyXG4gKiBAcGFyYW0gYXJndW1lbnQgQXJ1Z21lbnQgdG8gdmFsaWRhdGUuXHJcbiAqL1xyXG5mdW5jdGlvbiB2YWxpZGF0ZVN0cmluZ0VudW0oZnVuY3Rpb25OYW1lLCBlbnVtcywgcG9zaXRpb24sIGFyZ3VtZW50KSB7XHJcbiAgICBpZiAoIWVudW1zLnNvbWUoZnVuY3Rpb24gKGVsZW1lbnQpIHsgcmV0dXJuIGVsZW1lbnQgPT09IGFyZ3VtZW50OyB9KSkge1xyXG4gICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLklOVkFMSURfQVJHVU1FTlQsIFwiSW52YWxpZCB2YWx1ZSBcIiArIHZhbHVlRGVzY3JpcHRpb24oYXJndW1lbnQpICsgXCIgcHJvdmlkZWQgdG8gZnVuY3Rpb24gXCIgK1xyXG4gICAgICAgICAgICAoZnVuY3Rpb25OYW1lICsgXCIoKSBmb3IgaXRzIFwiICsgb3JkaW5hbChwb3NpdGlvbikgKyBcIiBhcmd1bWVudC4gQWNjZXB0YWJsZSBcIikgK1xyXG4gICAgICAgICAgICAoXCJ2YWx1ZXM6IFwiICsgZW51bXMuam9pbignLCAnKSkpO1xyXG4gICAgfVxyXG59XHJcbi8qKiBIZWxwZXIgdG8gdmFsaWRhdGUgdGhlIHR5cGUgb2YgYSBwcm92aWRlZCBpbnB1dC4gKi9cclxuZnVuY3Rpb24gdmFsaWRhdGVUeXBlKGZ1bmN0aW9uTmFtZSwgdHlwZSwgaW5wdXROYW1lLCBpbnB1dCkge1xyXG4gICAgdmFyIHZhbGlkID0gZmFsc2U7XHJcbiAgICBpZiAodHlwZSA9PT0gJ29iamVjdCcpIHtcclxuICAgICAgICB2YWxpZCA9IGlzUGxhaW5PYmplY3QoaW5wdXQpO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAodHlwZSA9PT0gJ25vbi1lbXB0eSBzdHJpbmcnKSB7XHJcbiAgICAgICAgdmFsaWQgPSB0eXBlb2YgaW5wdXQgPT09ICdzdHJpbmcnICYmIGlucHV0ICE9PSAnJztcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHZhbGlkID0gdHlwZW9mIGlucHV0ID09PSB0eXBlO1xyXG4gICAgfVxyXG4gICAgaWYgKCF2YWxpZCkge1xyXG4gICAgICAgIHZhciBkZXNjcmlwdGlvbiA9IHZhbHVlRGVzY3JpcHRpb24oaW5wdXQpO1xyXG4gICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLklOVkFMSURfQVJHVU1FTlQsIFwiRnVuY3Rpb24gXCIgKyBmdW5jdGlvbk5hbWUgKyBcIigpIHJlcXVpcmVzIGl0cyBcIiArIGlucHV0TmFtZSArIFwiIFwiICtcclxuICAgICAgICAgICAgKFwidG8gYmUgb2YgdHlwZSBcIiArIHR5cGUgKyBcIiwgYnV0IGl0IHdhczogXCIgKyBkZXNjcmlwdGlvbikpO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBSZXR1cm5zIHRydWUgaWYgaXQncyBhIG5vbi1udWxsIG9iamVjdCB3aXRob3V0IGEgY3VzdG9tIHByb3RvdHlwZVxyXG4gKiAoaS5lLiBleGNsdWRlcyBBcnJheSwgRGF0ZSwgZXRjLikuXHJcbiAqL1xyXG5mdW5jdGlvbiBpc1BsYWluT2JqZWN0KGlucHV0KSB7XHJcbiAgICByZXR1cm4gKHR5cGVvZiBpbnB1dCA9PT0gJ29iamVjdCcgJiZcclxuICAgICAgICBpbnB1dCAhPT0gbnVsbCAmJlxyXG4gICAgICAgIChPYmplY3QuZ2V0UHJvdG90eXBlT2YoaW5wdXQpID09PSBPYmplY3QucHJvdG90eXBlIHx8XHJcbiAgICAgICAgICAgIE9iamVjdC5nZXRQcm90b3R5cGVPZihpbnB1dCkgPT09IG51bGwpKTtcclxufVxyXG4vKiogUmV0dXJucyBhIHN0cmluZyBkZXNjcmliaW5nIHRoZSB0eXBlIC8gdmFsdWUgb2YgdGhlIHByb3ZpZGVkIGlucHV0LiAqL1xyXG5mdW5jdGlvbiB2YWx1ZURlc2NyaXB0aW9uKGlucHV0KSB7XHJcbiAgICBpZiAoaW5wdXQgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIHJldHVybiAndW5kZWZpbmVkJztcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGlucHV0ID09PSBudWxsKSB7XHJcbiAgICAgICAgcmV0dXJuICdudWxsJztcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKHR5cGVvZiBpbnB1dCA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICBpZiAoaW5wdXQubGVuZ3RoID4gMjApIHtcclxuICAgICAgICAgICAgaW5wdXQgPSBpbnB1dC5zdWJzdHJpbmcoMCwgMjApICsgXCIuLi5cIjtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGlucHV0KTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKHR5cGVvZiBpbnB1dCA9PT0gJ251bWJlcicgfHwgdHlwZW9mIGlucHV0ID09PSAnYm9vbGVhbicpIHtcclxuICAgICAgICByZXR1cm4gJycgKyBpbnB1dDtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKHR5cGVvZiBpbnB1dCA9PT0gJ29iamVjdCcpIHtcclxuICAgICAgICBpZiAoaW5wdXQgaW5zdGFuY2VvZiBBcnJheSkge1xyXG4gICAgICAgICAgICByZXR1cm4gJ2FuIGFycmF5JztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHZhciBjdXN0b21PYmplY3ROYW1lID0gdHJ5R2V0Q3VzdG9tT2JqZWN0VHlwZShpbnB1dCk7XHJcbiAgICAgICAgICAgIGlmIChjdXN0b21PYmplY3ROYW1lKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJhIGN1c3RvbSBcIiArIGN1c3RvbU9iamVjdE5hbWUgKyBcIiBvYmplY3RcIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAnYW4gb2JqZWN0JztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGVsc2UgaWYgKHR5cGVvZiBpbnB1dCA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgIHJldHVybiAnYSBmdW5jdGlvbic7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICByZXR1cm4gZmFpbCgnVW5rbm93biB3cm9uZyB0eXBlOiAnICsgdHlwZW9mIGlucHV0KTtcclxuICAgIH1cclxufVxyXG4vKiogSGFja3kgbWV0aG9kIHRvIHRyeSB0byBnZXQgdGhlIGNvbnN0cnVjdG9yIG5hbWUgZm9yIGFuIG9iamVjdC4gKi9cclxuZnVuY3Rpb24gdHJ5R2V0Q3VzdG9tT2JqZWN0VHlwZShpbnB1dCkge1xyXG4gICAgaWYgKGlucHV0LmNvbnN0cnVjdG9yKSB7XHJcbiAgICAgICAgdmFyIGZ1bmNOYW1lUmVnZXggPSAvZnVuY3Rpb25cXHMrKFteXFxzKF0rKVxccypcXCgvO1xyXG4gICAgICAgIHZhciByZXN1bHRzID0gZnVuY05hbWVSZWdleC5leGVjKGlucHV0LmNvbnN0cnVjdG9yLnRvU3RyaW5nKCkpO1xyXG4gICAgICAgIGlmIChyZXN1bHRzICYmIHJlc3VsdHMubGVuZ3RoID4gMSkge1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0c1sxXTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbnVsbDtcclxufVxyXG4vKiogVmFsaWRhdGVzIHRoZSBwcm92aWRlZCBhcmd1bWVudCBpcyBkZWZpbmVkLiAqL1xyXG5mdW5jdGlvbiB2YWxpZGF0ZURlZmluZWQoZnVuY3Rpb25OYW1lLCBwb3NpdGlvbiwgYXJndW1lbnQpIHtcclxuICAgIGlmIChhcmd1bWVudCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuSU5WQUxJRF9BUkdVTUVOVCwgXCJGdW5jdGlvbiBcIiArIGZ1bmN0aW9uTmFtZSArIFwiKCkgcmVxdWlyZXMgYSB2YWxpZCBcIiArIG9yZGluYWwocG9zaXRpb24pICsgXCIgXCIgK1xyXG4gICAgICAgICAgICBcImFyZ3VtZW50LCBidXQgaXQgd2FzIHVuZGVmaW5lZC5cIik7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkYXRlcyB0aGUgcHJvdmlkZWQgcG9zaXRpb25hbCBhcmd1bWVudCBpcyBhbiBvYmplY3QsIGFuZCBpdHMga2V5cyBhbmRcclxuICogdmFsdWVzIG1hdGNoIHRoZSBleHBlY3RlZCBrZXlzIGFuZCB0eXBlcyBwcm92aWRlZCBpbiBvcHRpb25UeXBlcy5cclxuICovXHJcbmZ1bmN0aW9uIHZhbGlkYXRlT3B0aW9uTmFtZXMoZnVuY3Rpb25OYW1lLCBvcHRpb25zLCBvcHRpb25OYW1lcykge1xyXG4gICAgZm9yRWFjaChvcHRpb25zLCBmdW5jdGlvbiAoa2V5LCBfKSB7XHJcbiAgICAgICAgaWYgKG9wdGlvbk5hbWVzLmluZGV4T2Yoa2V5KSA8IDApIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuSU5WQUxJRF9BUkdVTUVOVCwgXCJVbmtub3duIG9wdGlvbiAnXCIgKyBrZXkgKyBcIicgcGFzc2VkIHRvIGZ1bmN0aW9uIFwiICsgZnVuY3Rpb25OYW1lICsgXCIoKS4gXCIgK1xyXG4gICAgICAgICAgICAgICAgJ0F2YWlsYWJsZSBvcHRpb25zOiAnICtcclxuICAgICAgICAgICAgICAgIG9wdGlvbk5hbWVzLmpvaW4oJywgJykpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59XHJcbi8qKlxyXG4gKiBIZWxwZXIgbWV0aG9kIHRvIHRocm93IGFuIGVycm9yIHRoYXQgdGhlIHByb3ZpZGVkIGFyZ3VtZW50IGRpZCBub3QgcGFzc1xyXG4gKiBhbiBpbnN0YW5jZW9mIGNoZWNrLlxyXG4gKi9cclxuZnVuY3Rpb24gaW52YWxpZENsYXNzRXJyb3IoZnVuY3Rpb25OYW1lLCB0eXBlLCBwb3NpdGlvbiwgYXJndW1lbnQpIHtcclxuICAgIHZhciBkZXNjcmlwdGlvbiA9IHZhbHVlRGVzY3JpcHRpb24oYXJndW1lbnQpO1xyXG4gICAgcmV0dXJuIG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLklOVkFMSURfQVJHVU1FTlQsIFwiRnVuY3Rpb24gXCIgKyBmdW5jdGlvbk5hbWUgKyBcIigpIHJlcXVpcmVzIGl0cyBcIiArIG9yZGluYWwocG9zaXRpb24pICsgXCIgXCIgK1xyXG4gICAgICAgIChcImFyZ3VtZW50IHRvIGJlIGEgXCIgKyB0eXBlICsgXCIsIGJ1dCBpdCB3YXM6IFwiICsgZGVzY3JpcHRpb24pKTtcclxufVxyXG5mdW5jdGlvbiB2YWxpZGF0ZVBvc2l0aXZlTnVtYmVyKGZ1bmN0aW9uTmFtZSwgcG9zaXRpb24sIG4pIHtcclxuICAgIGlmIChuIDw9IDApIHtcclxuICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5JTlZBTElEX0FSR1VNRU5ULCBcIkZ1bmN0aW9uIFxcXCJcIiArIGZ1bmN0aW9uTmFtZSArIFwiKClcXFwiIHJlcXVpcmVzIGl0cyBcIiArIG9yZGluYWwocG9zaXRpb24pICsgXCIgYXJndW1lbnQgdG8gYmUgYSBwb3NpdGl2ZSBudW1iZXIsIGJ1dCBpdCB3YXM6IFwiICsgbiArIFwiLlwiKTtcclxuICAgIH1cclxufVxyXG4vKiogQ29udmVydHMgYSBudW1iZXIgdG8gaXRzIGVuZ2xpc2ggd29yZCByZXByZXNlbnRhdGlvbiAqL1xyXG5mdW5jdGlvbiBvcmRpbmFsKG51bSkge1xyXG4gICAgc3dpdGNoIChudW0pIHtcclxuICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgIHJldHVybiAnZmlyc3QnO1xyXG4gICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgcmV0dXJuICdzZWNvbmQnO1xyXG4gICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgcmV0dXJuICd0aGlyZCc7XHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgcmV0dXJuIG51bSArICd0aCc7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIEZvcm1hdHMgdGhlIGdpdmVuIHdvcmQgYXMgcGx1cmFsIGNvbmRpdGlvbmFsbHkgZ2l2ZW4gdGhlIHByZWNlZGluZyBudW1iZXIuXHJcbiAqL1xyXG5mdW5jdGlvbiBmb3JtYXRQbHVyYWwobnVtLCBzdHIpIHtcclxuICAgIHJldHVybiBudW0gKyBcIiBcIiArIHN0ciArIChudW0gPT09IDEgPyAnJyA6ICdzJyk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnZhciBBdXRvSWQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBBdXRvSWQoKSB7XHJcbiAgICB9XHJcbiAgICBBdXRvSWQubmV3SWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy8gQWxwaGFudW1lcmljIGNoYXJhY3RlcnNcclxuICAgICAgICB2YXIgY2hhcnMgPSAnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODknO1xyXG4gICAgICAgIHZhciBhdXRvSWQgPSAnJztcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDIwOyBpKyspIHtcclxuICAgICAgICAgICAgYXV0b0lkICs9IGNoYXJzLmNoYXJBdChNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBjaGFycy5sZW5ndGgpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgYXNzZXJ0KGF1dG9JZC5sZW5ndGggPT09IDIwLCAnSW52YWxpZCBhdXRvIElEOiAnICsgYXV0b0lkKTtcclxuICAgICAgICByZXR1cm4gYXV0b0lkO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBBdXRvSWQ7XHJcbn0oKSk7XHJcbmZ1bmN0aW9uIHByaW1pdGl2ZUNvbXBhcmF0b3IobGVmdCwgcmlnaHQpIHtcclxuICAgIGlmIChsZWZ0IDwgcmlnaHQpIHtcclxuICAgICAgICByZXR1cm4gLTE7XHJcbiAgICB9XHJcbiAgICBpZiAobGVmdCA+IHJpZ2h0KSB7XHJcbiAgICAgICAgcmV0dXJuIDE7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gMDtcclxufVxyXG4vKiogSGVscGVyIHRvIGNvbXBhcmUgbnVsbGFibGUgKG9yIHVuZGVmaW5lZC1hYmxlKSBvYmplY3RzIHVzaW5nIGlzRXF1YWwoKS4gKi9cclxuZnVuY3Rpb24gZXF1YWxzKGxlZnQsIHJpZ2h0KSB7XHJcbiAgICBpZiAobGVmdCAhPT0gbnVsbCAmJiBsZWZ0ICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICByZXR1cm4gISEocmlnaHQgJiYgbGVmdC5pc0VxdWFsKHJpZ2h0KSk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICAvLyBIQUNLOiBFeHBsaWNpdGx5IGNhc3Qgc2luY2UgVHlwZVNjcmlwdCdzIHR5cGUgbmFycm93aW5nIGFwcGFyZW50bHkgaXNuJ3RcclxuICAgICAgICAvLyBzbWFydCBlbm91Z2guXHJcbiAgICAgICAgcmV0dXJuIGxlZnQgPT09IHJpZ2h0O1xyXG4gICAgfVxyXG59XHJcbi8qKiBIZWxwZXIgdG8gY29tcGFyZSBhcnJheXMgdXNpbmcgaXNFcXVhbCgpLiAqL1xyXG5mdW5jdGlvbiBhcnJheUVxdWFscyhsZWZ0LCByaWdodCkge1xyXG4gICAgaWYgKGxlZnQubGVuZ3RoICE9PSByaWdodC5sZW5ndGgpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlZnQubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBpZiAoIWxlZnRbaV0uaXNFcXVhbChyaWdodFtpXSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiB0cnVlO1xyXG59XHJcbi8qKlxyXG4gKiBSZXR1cm5zIHRoZSBpbW1lZGlhdGUgbGV4aWNvZ3JhcGhpY2FsbHktZm9sbG93aW5nIHN0cmluZy4gVGhpcyBpcyB1c2VmdWwgdG9cclxuICogY29uc3RydWN0IGFuIGluY2x1c2l2ZSByYW5nZSBmb3IgaW5kZXhlZGRiIGl0ZXJhdG9ycy5cclxuICovXHJcbmZ1bmN0aW9uIGltbWVkaWF0ZVN1Y2Nlc3NvcihzKSB7XHJcbiAgICAvLyBSZXR1cm4gdGhlIGlucHV0IHN0cmluZywgd2l0aCBhbiBhZGRpdGlvbmFsIE5VTCBieXRlIGFwcGVuZGVkLlxyXG4gICAgcmV0dXJuIHMgKyAnXFwwJztcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqIEhlbHBlciBmdW5jdGlvbiB0byBhc3NlcnQgVWludDhBcnJheSBpcyBhdmFpbGFibGUgYXQgcnVudGltZS4gKi9cclxuZnVuY3Rpb24gYXNzZXJ0VWludDhBcnJheUF2YWlsYWJsZSgpIHtcclxuICAgIGlmICh0eXBlb2YgVWludDhBcnJheSA9PT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5VTklNUExFTUVOVEVELCAnVWludDhBcnJheXMgYXJlIG5vdCBhdmFpbGFibGUgaW4gdGhpcyBlbnZpcm9ubWVudC4nKTtcclxuICAgIH1cclxufVxyXG4vKiogSGVscGVyIGZ1bmN0aW9uIHRvIGFzc2VydCBCYXNlNjQgZnVuY3Rpb25zIGFyZSBhdmFpbGFibGUgYXQgcnVudGltZS4gKi9cclxuZnVuY3Rpb24gYXNzZXJ0QmFzZTY0QXZhaWxhYmxlKCkge1xyXG4gICAgaWYgKCFQbGF0Zm9ybVN1cHBvcnQuZ2V0UGxhdGZvcm0oKS5iYXNlNjRBdmFpbGFibGUpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5VTklNUExFTUVOVEVELCAnQmxvYnMgYXJlIHVuYXZhaWxhYmxlIGluIEZpcmVzdG9yZSBpbiB0aGlzIGVudmlyb25tZW50LicpO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBJbW11dGFibGUgY2xhc3MgaG9sZGluZyBhIGJsb2IgKGJpbmFyeSBkYXRhKS5cclxuICogVGhpcyBjbGFzcyBpcyBkaXJlY3RseSBleHBvc2VkIGluIHRoZSBwdWJsaWMgQVBJLlxyXG4gKlxyXG4gKiBOb3RlIHRoYXQgd2hpbGUgeW91IGNhbid0IGhpZGUgdGhlIGNvbnN0cnVjdG9yIGluIEphdmFTY3JpcHQgY29kZSwgd2UgYXJlXHJcbiAqIHVzaW5nIHRoZSBoYWNrIGFib3ZlIHRvIG1ha2Ugc3VyZSBuby1vbmUgb3V0c2lkZSB0aGlzIG1vZHVsZSBjYW4gY2FsbCBpdC5cclxuICovXHJcbnZhciBCbG9iID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gQmxvYihiaW5hcnlTdHJpbmcpIHtcclxuICAgICAgICBhc3NlcnRCYXNlNjRBdmFpbGFibGUoKTtcclxuICAgICAgICB0aGlzLl9iaW5hcnlTdHJpbmcgPSBiaW5hcnlTdHJpbmc7XHJcbiAgICB9XHJcbiAgICBCbG9iLmZyb21CYXNlNjRTdHJpbmcgPSBmdW5jdGlvbiAoYmFzZTY0KSB7XHJcbiAgICAgICAgdmFsaWRhdGVFeGFjdE51bWJlck9mQXJncygnQmxvYi5mcm9tQmFzZTY0U3RyaW5nJywgYXJndW1lbnRzLCAxKTtcclxuICAgICAgICB2YWxpZGF0ZUFyZ1R5cGUoJ0Jsb2IuZnJvbUJhc2U2NFN0cmluZycsICdzdHJpbmcnLCAxLCBiYXNlNjQpO1xyXG4gICAgICAgIGFzc2VydEJhc2U2NEF2YWlsYWJsZSgpO1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHZhciBiaW5hcnlTdHJpbmcgPSBQbGF0Zm9ybVN1cHBvcnQuZ2V0UGxhdGZvcm0oKS5hdG9iKGJhc2U2NCk7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgQmxvYihiaW5hcnlTdHJpbmcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5JTlZBTElEX0FSR1VNRU5ULCAnRmFpbGVkIHRvIGNvbnN0cnVjdCBCbG9iIGZyb20gQmFzZTY0IHN0cmluZzogJyArIGUpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBCbG9iLmZyb21VaW50OEFycmF5ID0gZnVuY3Rpb24gKGFycmF5KSB7XHJcbiAgICAgICAgdmFsaWRhdGVFeGFjdE51bWJlck9mQXJncygnQmxvYi5mcm9tVWludDhBcnJheScsIGFyZ3VtZW50cywgMSk7XHJcbiAgICAgICAgYXNzZXJ0VWludDhBcnJheUF2YWlsYWJsZSgpO1xyXG4gICAgICAgIGlmICghKGFycmF5IGluc3RhbmNlb2YgVWludDhBcnJheSkpIHtcclxuICAgICAgICAgICAgdGhyb3cgaW52YWxpZENsYXNzRXJyb3IoJ0Jsb2IuZnJvbVVpbnQ4QXJyYXknLCAnVWludDhBcnJheScsIDEsIGFycmF5KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gV2UgY2FuJ3QgY2FsbCBhcnJheS5tYXAgZGlyZWN0bHkgYmVjYXVzZSBpdCBleHBlY3RzIHRoZSByZXR1cm4gdHlwZSB0b1xyXG4gICAgICAgIC8vIGJlIGEgVWludDhBcnJheSwgd2hlcmVhcyB3ZSBjYW4gY29udmVydCBpdCB0byBhIHJlZ3VsYXIgYXJyYXkgYnkgaW52b2tpbmdcclxuICAgICAgICAvLyBtYXAgb24gdGhlIEFycmF5IHByb3RvdHlwZS5cclxuICAgICAgICB2YXIgYmluYXJ5U3RyaW5nID0gQXJyYXkucHJvdG90eXBlLm1hcFxyXG4gICAgICAgICAgICAuY2FsbChhcnJheSwgZnVuY3Rpb24gKGNoYXIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUoY2hhcik7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLmpvaW4oJycpO1xyXG4gICAgICAgIHJldHVybiBuZXcgQmxvYihiaW5hcnlTdHJpbmcpO1xyXG4gICAgfTtcclxuICAgIEJsb2IucHJvdG90eXBlLnRvQmFzZTY0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhbGlkYXRlRXhhY3ROdW1iZXJPZkFyZ3MoJ0Jsb2IudG9CYXNlNjQnLCBhcmd1bWVudHMsIDApO1xyXG4gICAgICAgIGFzc2VydEJhc2U2NEF2YWlsYWJsZSgpO1xyXG4gICAgICAgIHJldHVybiBQbGF0Zm9ybVN1cHBvcnQuZ2V0UGxhdGZvcm0oKS5idG9hKHRoaXMuX2JpbmFyeVN0cmluZyk7XHJcbiAgICB9O1xyXG4gICAgQmxvYi5wcm90b3R5cGUudG9VaW50OEFycmF5ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhbGlkYXRlRXhhY3ROdW1iZXJPZkFyZ3MoJ0Jsb2IudG9VaW50OEFycmF5JywgYXJndW1lbnRzLCAwKTtcclxuICAgICAgICBhc3NlcnRVaW50OEFycmF5QXZhaWxhYmxlKCk7XHJcbiAgICAgICAgdmFyIGJ1ZmZlciA9IG5ldyBVaW50OEFycmF5KHRoaXMuX2JpbmFyeVN0cmluZy5sZW5ndGgpO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5fYmluYXJ5U3RyaW5nLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGJ1ZmZlcltpXSA9IHRoaXMuX2JpbmFyeVN0cmluZy5jaGFyQ29kZUF0KGkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gYnVmZmVyO1xyXG4gICAgfTtcclxuICAgIEJsb2IucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiAnQmxvYihiYXNlNjQ6ICcgKyB0aGlzLnRvQmFzZTY0KCkgKyAnKSc7XHJcbiAgICB9O1xyXG4gICAgQmxvYi5wcm90b3R5cGUuaXNFcXVhbCA9IGZ1bmN0aW9uIChvdGhlcikge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9iaW5hcnlTdHJpbmcgPT09IG90aGVyLl9iaW5hcnlTdHJpbmc7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBBY3R1YWxseSBwcml2YXRlIHRvIEpTIGNvbnN1bWVycyBvZiBvdXIgQVBJLCBzbyB0aGlzIGZ1bmN0aW9uIGlzIHByZWZpeGVkXHJcbiAgICAgKiB3aXRoIGFuIHVuZGVyc2NvcmUuXHJcbiAgICAgKi9cclxuICAgIEJsb2IucHJvdG90eXBlLl9jb21wYXJlVG8gPSBmdW5jdGlvbiAob3RoZXIpIHtcclxuICAgICAgICByZXR1cm4gcHJpbWl0aXZlQ29tcGFyYXRvcih0aGlzLl9iaW5hcnlTdHJpbmcsIG90aGVyLl9iaW5hcnlTdHJpbmcpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBCbG9iO1xyXG59KCkpO1xyXG4vLyBQdWJsaWMgaW5zdGFuY2UgdGhhdCBkaXNhbGxvd3MgY29uc3RydWN0aW9uIGF0IHJ1bnRpbWUuIFRoaXMgY29uc3RydWN0b3IgaXNcclxuLy8gdXNlZCB3aGVuIGV4cG9ydGluZyBCbG9iIG9uIGZpcmViYXNlLmZpcmVzdG9yZS5CbG9iIGFuZCB3aWxsIGJlIGNhbGxlZCBCbG9iXHJcbi8vIHB1YmxpY2x5LiBJbnRlcm5hbGx5IHdlIHN0aWxsIHVzZSBCbG9iIHdoaWNoIGhhcyBhIHR5cGUgY2hlY2tlZCBwcml2YXRlXHJcbi8vIGNvbnN0cnVjdG9yLiBOb3RlIHRoYXQgQmxvYiBhbmQgUHVibGljQmxvYiBjYW4gYmUgdXNlZCBpbnRlcmNoYW5nZWFibHkgaW5cclxuLy8gaW5zdGFuY2VvZiBjaGVja3MuXHJcbi8vIEZvciBvdXIgaW50ZXJuYWwgVHlwZVNjcmlwdCBjb2RlIFB1YmxpY0Jsb2IgZG9lc24ndCBleGlzdCBhcyBhIHR5cGUsIGFuZCBzb1xyXG4vLyB3ZSBuZWVkIHRvIHVzZSBCbG9iIGFzIHR5cGUgYW5kIGV4cG9ydCBpdCB0b28uXHJcbnZhciBQdWJsaWNCbG9iID0gbWFrZUNvbnN0cnVjdG9yUHJpdmF0ZShCbG9iLCAnVXNlIEJsb2IuZnJvbVVpbnQ4QXJyYXkoKSBvciBCbG9iLmZyb21CYXNlNjRTdHJpbmcoKSBpbnN0ZWFkLicpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxudmFyIERhdGFiYXNlSW5mbyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIC8qKlxyXG4gICAgICogQ29uc3RydWN0cyBhIERhdGFiYXNlSW5mbyB1c2luZyB0aGUgcHJvdmlkZWQgaG9zdCwgZGF0YWJhc2VJZCBhbmRcclxuICAgICAqIHBlcnNpc3RlbmNlS2V5LlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBkYXRhYmFzZUlkIFRoZSBkYXRhYmFzZSB0byB1c2UuXHJcbiAgICAgKiBAcGFyYW0gcGVyc2lzdGVuY2VLZXkgQSB1bmlxdWUgaWRlbnRpZmllciBmb3IgdGhpcyBGaXJlc3RvcmUncyBsb2NhbFxyXG4gICAgICogc3RvcmFnZSAodXNlZCBpbiBjb25qdW5jdGlvbiB3aXRoIHRoZSBkYXRhYmFzZUlkKS5cclxuICAgICAqIEBwYXJhbSBob3N0IFRoZSBGaXJlc3RvcmUgYmFja2VuZCBob3N0IHRvIGNvbm5lY3QgdG8uXHJcbiAgICAgKiBAcGFyYW0gc3NsIFdoZXRoZXIgdG8gdXNlIFNTTCB3aGVuIGNvbm5lY3RpbmcuXHJcbiAgICAgKiBAcGFyYW0gZm9yY2VMb25nUG9sbGluZyBXaGV0aGVyIHRvIHVzZSB0aGUgZm9yY2VMb25nUG9sbGluZyBvcHRpb25cclxuICAgICAqIHdoZW4gdXNpbmcgV2ViQ2hhbm5lbCBhcyB0aGUgbmV0d29yayB0cmFuc3BvcnQuXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIERhdGFiYXNlSW5mbyhkYXRhYmFzZUlkLCBwZXJzaXN0ZW5jZUtleSwgaG9zdCwgc3NsLCBmb3JjZUxvbmdQb2xsaW5nKSB7XHJcbiAgICAgICAgdGhpcy5kYXRhYmFzZUlkID0gZGF0YWJhc2VJZDtcclxuICAgICAgICB0aGlzLnBlcnNpc3RlbmNlS2V5ID0gcGVyc2lzdGVuY2VLZXk7XHJcbiAgICAgICAgdGhpcy5ob3N0ID0gaG9zdDtcclxuICAgICAgICB0aGlzLnNzbCA9IHNzbDtcclxuICAgICAgICB0aGlzLmZvcmNlTG9uZ1BvbGxpbmcgPSBmb3JjZUxvbmdQb2xsaW5nO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIERhdGFiYXNlSW5mbztcclxufSgpKTtcclxuLyoqIFRoZSBkZWZhdWx0IGRhdGFiYXNlIG5hbWUgZm9yIGEgcHJvamVjdC4gKi9cclxudmFyIERFRkFVTFRfREFUQUJBU0VfTkFNRSA9ICcoZGVmYXVsdCknO1xyXG4vKiogUmVwcmVzZW50cyB0aGUgZGF0YWJhc2UgSUQgYSBGaXJlc3RvcmUgY2xpZW50IGlzIGFzc29jaWF0ZWQgd2l0aC4gKi9cclxudmFyIERhdGFiYXNlSWQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBEYXRhYmFzZUlkKHByb2plY3RJZCwgZGF0YWJhc2UpIHtcclxuICAgICAgICB0aGlzLnByb2plY3RJZCA9IHByb2plY3RJZDtcclxuICAgICAgICB0aGlzLmRhdGFiYXNlID0gZGF0YWJhc2UgPyBkYXRhYmFzZSA6IERFRkFVTFRfREFUQUJBU0VfTkFNRTtcclxuICAgIH1cclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShEYXRhYmFzZUlkLnByb3RvdHlwZSwgXCJpc0RlZmF1bHREYXRhYmFzZVwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRhdGFiYXNlID09PSBERUZBVUxUX0RBVEFCQVNFX05BTUU7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBEYXRhYmFzZUlkLnByb3RvdHlwZS5pc0VxdWFsID0gZnVuY3Rpb24gKG90aGVyKSB7XHJcbiAgICAgICAgcmV0dXJuIChvdGhlciBpbnN0YW5jZW9mIERhdGFiYXNlSWQgJiZcclxuICAgICAgICAgICAgb3RoZXIucHJvamVjdElkID09PSB0aGlzLnByb2plY3RJZCAmJlxyXG4gICAgICAgICAgICBvdGhlci5kYXRhYmFzZSA9PT0gdGhpcy5kYXRhYmFzZSk7XHJcbiAgICB9O1xyXG4gICAgRGF0YWJhc2VJZC5wcm90b3R5cGUuY29tcGFyZVRvID0gZnVuY3Rpb24gKG90aGVyKSB7XHJcbiAgICAgICAgcmV0dXJuIChwcmltaXRpdmVDb21wYXJhdG9yKHRoaXMucHJvamVjdElkLCBvdGhlci5wcm9qZWN0SWQpIHx8XHJcbiAgICAgICAgICAgIHByaW1pdGl2ZUNvbXBhcmF0b3IodGhpcy5kYXRhYmFzZSwgb3RoZXIuZGF0YWJhc2UpKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gRGF0YWJhc2VJZDtcclxufSgpKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBgTGlzdGVuU2VxdWVuY2VgIGlzIGEgbW9ub3RvbmljIHNlcXVlbmNlLiBJdCBpcyBpbml0aWFsaXplZCB3aXRoIGEgbWluaW11bSB2YWx1ZSB0b1xyXG4gKiBleGNlZWQuIEFsbCBzdWJzZXF1ZW50IGNhbGxzIHRvIG5leHQgd2lsbCByZXR1cm4gaW5jcmVhc2luZyB2YWx1ZXMuIElmIHByb3ZpZGVkIHdpdGggYVxyXG4gKiBgU2VxdWVuY2VOdW1iZXJTeW5jZXJgLCBpdCB3aWxsIGFkZGl0aW9uYWxseSBidW1wIGl0cyBuZXh0IHZhbHVlIHdoZW4gdG9sZCBvZiBhIG5ldyB2YWx1ZSwgYXNcclxuICogd2VsbCBhcyB3cml0ZSBvdXQgc2VxdWVuY2UgbnVtYmVycyB0aGF0IGl0IHByb2R1Y2VzIHZpYSBgbmV4dCgpYC5cclxuICovXHJcbnZhciBMaXN0ZW5TZXF1ZW5jZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIExpc3RlblNlcXVlbmNlKHByZXZpb3VzVmFsdWUsIHNlcXVlbmNlTnVtYmVyU3luY2VyKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB0aGlzLnByZXZpb3VzVmFsdWUgPSBwcmV2aW91c1ZhbHVlO1xyXG4gICAgICAgIGlmIChzZXF1ZW5jZU51bWJlclN5bmNlcikge1xyXG4gICAgICAgICAgICBzZXF1ZW5jZU51bWJlclN5bmNlci5zZXF1ZW5jZU51bWJlckhhbmRsZXIgPSBmdW5jdGlvbiAoc2VxdWVuY2VOdW1iZXIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5zZXRQcmV2aW91c1ZhbHVlKHNlcXVlbmNlTnVtYmVyKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgdGhpcy53cml0ZU5ld1NlcXVlbmNlTnVtYmVyID0gZnVuY3Rpb24gKHNlcXVlbmNlTnVtYmVyKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gc2VxdWVuY2VOdW1iZXJTeW5jZXIud3JpdGVTZXF1ZW5jZU51bWJlcihzZXF1ZW5jZU51bWJlcik7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgTGlzdGVuU2VxdWVuY2UucHJvdG90eXBlLnNldFByZXZpb3VzVmFsdWUgPSBmdW5jdGlvbiAoZXh0ZXJuYWxQcmV2aW91c1ZhbHVlKSB7XHJcbiAgICAgICAgdGhpcy5wcmV2aW91c1ZhbHVlID0gTWF0aC5tYXgoZXh0ZXJuYWxQcmV2aW91c1ZhbHVlLCB0aGlzLnByZXZpb3VzVmFsdWUpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnByZXZpb3VzVmFsdWU7XHJcbiAgICB9O1xyXG4gICAgTGlzdGVuU2VxdWVuY2UucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIG5leHRWYWx1ZSA9ICsrdGhpcy5wcmV2aW91c1ZhbHVlO1xyXG4gICAgICAgIGlmICh0aGlzLndyaXRlTmV3U2VxdWVuY2VOdW1iZXIpIHtcclxuICAgICAgICAgICAgdGhpcy53cml0ZU5ld1NlcXVlbmNlTnVtYmVyKG5leHRWYWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBuZXh0VmFsdWU7XHJcbiAgICB9O1xyXG4gICAgTGlzdGVuU2VxdWVuY2UuSU5WQUxJRCA9IC0xO1xyXG4gICAgcmV0dXJuIExpc3RlblNlcXVlbmNlO1xyXG59KCkpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxudmFyIERPQ1VNRU5UX0tFWV9OQU1FID0gJ19fbmFtZV9fJztcclxuLyoqXHJcbiAqIFBhdGggcmVwcmVzZW50cyBhbiBvcmRlcmVkIHNlcXVlbmNlIG9mIHN0cmluZyBzZWdtZW50cy5cclxuICovXHJcbnZhciBCYXNlUGF0aCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEJhc2VQYXRoKHNlZ21lbnRzLCBvZmZzZXQsIGxlbmd0aCkge1xyXG4gICAgICAgIGlmIChvZmZzZXQgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBvZmZzZXQgPSAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChvZmZzZXQgPiBzZWdtZW50cy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgZmFpbCgnb2Zmc2V0ICcgKyBvZmZzZXQgKyAnIG91dCBvZiByYW5nZSAnICsgc2VnbWVudHMubGVuZ3RoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGxlbmd0aCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGxlbmd0aCA9IHNlZ21lbnRzLmxlbmd0aCAtIG9mZnNldDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAobGVuZ3RoID4gc2VnbWVudHMubGVuZ3RoIC0gb2Zmc2V0KSB7XHJcbiAgICAgICAgICAgIGZhaWwoJ2xlbmd0aCAnICsgbGVuZ3RoICsgJyBvdXQgb2YgcmFuZ2UgJyArIChzZWdtZW50cy5sZW5ndGggLSBvZmZzZXQpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zZWdtZW50cyA9IHNlZ21lbnRzO1xyXG4gICAgICAgIHRoaXMub2Zmc2V0ID0gb2Zmc2V0O1xyXG4gICAgICAgIHRoaXMubGVuID0gbGVuZ3RoO1xyXG4gICAgfVxyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEJhc2VQYXRoLnByb3RvdHlwZSwgXCJsZW5ndGhcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5sZW47XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBCYXNlUGF0aC5wcm90b3R5cGUuaXNFcXVhbCA9IGZ1bmN0aW9uIChvdGhlcikge1xyXG4gICAgICAgIHJldHVybiBCYXNlUGF0aC5jb21wYXJhdG9yKHRoaXMsIG90aGVyKSA9PT0gMDtcclxuICAgIH07XHJcbiAgICBCYXNlUGF0aC5wcm90b3R5cGUuY2hpbGQgPSBmdW5jdGlvbiAobmFtZU9yUGF0aCkge1xyXG4gICAgICAgIHZhciBzZWdtZW50cyA9IHRoaXMuc2VnbWVudHMuc2xpY2UodGhpcy5vZmZzZXQsIHRoaXMubGltaXQoKSk7XHJcbiAgICAgICAgaWYgKG5hbWVPclBhdGggaW5zdGFuY2VvZiBCYXNlUGF0aCkge1xyXG4gICAgICAgICAgICBuYW1lT3JQYXRoLmZvckVhY2goZnVuY3Rpb24gKHNlZ21lbnQpIHtcclxuICAgICAgICAgICAgICAgIHNlZ21lbnRzLnB1c2goc2VnbWVudCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgc2VnbWVudHMucHVzaChuYW1lT3JQYXRoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY29uc3RydWN0KHNlZ21lbnRzKTtcclxuICAgIH07XHJcbiAgICAvKiogVGhlIGluZGV4IG9mIG9uZSBwYXN0IHRoZSBsYXN0IHNlZ21lbnQgb2YgdGhlIHBhdGguICovXHJcbiAgICBCYXNlUGF0aC5wcm90b3R5cGUubGltaXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMub2Zmc2V0ICsgdGhpcy5sZW5ndGg7XHJcbiAgICB9O1xyXG4gICAgQmFzZVBhdGgucHJvdG90eXBlLnBvcEZpcnN0ID0gZnVuY3Rpb24gKHNpemUpIHtcclxuICAgICAgICBzaXplID0gc2l6ZSA9PT0gdW5kZWZpbmVkID8gMSA6IHNpemU7XHJcbiAgICAgICAgYXNzZXJ0KHRoaXMubGVuZ3RoID49IHNpemUsIFwiQ2FuJ3QgY2FsbCBwb3BGaXJzdCgpIHdpdGggbGVzcyBzZWdtZW50c1wiKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3QodGhpcy5zZWdtZW50cywgdGhpcy5vZmZzZXQgKyBzaXplLCB0aGlzLmxlbmd0aCAtIHNpemUpO1xyXG4gICAgfTtcclxuICAgIEJhc2VQYXRoLnByb3RvdHlwZS5wb3BMYXN0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGFzc2VydCghdGhpcy5pc0VtcHR5KCksIFwiQ2FuJ3QgY2FsbCBwb3BMYXN0KCkgb24gZW1wdHkgcGF0aFwiKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3QodGhpcy5zZWdtZW50cywgdGhpcy5vZmZzZXQsIHRoaXMubGVuZ3RoIC0gMSk7XHJcbiAgICB9O1xyXG4gICAgQmFzZVBhdGgucHJvdG90eXBlLmZpcnN0U2VnbWVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBhc3NlcnQoIXRoaXMuaXNFbXB0eSgpLCBcIkNhbid0IGNhbGwgZmlyc3RTZWdtZW50KCkgb24gZW1wdHkgcGF0aFwiKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5zZWdtZW50c1t0aGlzLm9mZnNldF07XHJcbiAgICB9O1xyXG4gICAgQmFzZVBhdGgucHJvdG90eXBlLmxhc3RTZWdtZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldCh0aGlzLmxlbmd0aCAtIDEpO1xyXG4gICAgfTtcclxuICAgIEJhc2VQYXRoLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoaW5kZXgpIHtcclxuICAgICAgICBhc3NlcnQoaW5kZXggPCB0aGlzLmxlbmd0aCwgJ0luZGV4IG91dCBvZiByYW5nZScpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNlZ21lbnRzW3RoaXMub2Zmc2V0ICsgaW5kZXhdO1xyXG4gICAgfTtcclxuICAgIEJhc2VQYXRoLnByb3RvdHlwZS5pc0VtcHR5ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmxlbmd0aCA9PT0gMDtcclxuICAgIH07XHJcbiAgICBCYXNlUGF0aC5wcm90b3R5cGUuaXNQcmVmaXhPZiA9IGZ1bmN0aW9uIChvdGhlcikge1xyXG4gICAgICAgIGlmIChvdGhlci5sZW5ndGggPCB0aGlzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5nZXQoaSkgIT09IG90aGVyLmdldChpKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfTtcclxuICAgIEJhc2VQYXRoLnByb3RvdHlwZS5pc0ltbWVkaWF0ZVBhcmVudE9mID0gZnVuY3Rpb24gKHBvdGVudGlhbENoaWxkKSB7XHJcbiAgICAgICAgaWYgKHRoaXMubGVuZ3RoICsgMSAhPT0gcG90ZW50aWFsQ2hpbGQubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmdldChpKSAhPT0gcG90ZW50aWFsQ2hpbGQuZ2V0KGkpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9O1xyXG4gICAgQmFzZVBhdGgucHJvdG90eXBlLmZvckVhY2ggPSBmdW5jdGlvbiAoZm4pIHtcclxuICAgICAgICBmb3IgKHZhciBpID0gdGhpcy5vZmZzZXQsIGVuZCA9IHRoaXMubGltaXQoKTsgaSA8IGVuZDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGZuKHRoaXMuc2VnbWVudHNbaV0pO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBCYXNlUGF0aC5wcm90b3R5cGUudG9BcnJheSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zZWdtZW50cy5zbGljZSh0aGlzLm9mZnNldCwgdGhpcy5saW1pdCgpKTtcclxuICAgIH07XHJcbiAgICBCYXNlUGF0aC5jb21wYXJhdG9yID0gZnVuY3Rpb24gKHAxLCBwMikge1xyXG4gICAgICAgIHZhciBsZW4gPSBNYXRoLm1pbihwMS5sZW5ndGgsIHAyLmxlbmd0aCk7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xyXG4gICAgICAgICAgICB2YXIgbGVmdCA9IHAxLmdldChpKTtcclxuICAgICAgICAgICAgdmFyIHJpZ2h0ID0gcDIuZ2V0KGkpO1xyXG4gICAgICAgICAgICBpZiAobGVmdCA8IHJpZ2h0KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gLTE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGxlZnQgPiByaWdodCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIDE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHAxLmxlbmd0aCA8IHAyLmxlbmd0aCkge1xyXG4gICAgICAgICAgICByZXR1cm4gLTE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChwMS5sZW5ndGggPiBwMi5sZW5ndGgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIDE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiAwO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBCYXNlUGF0aDtcclxufSgpKTtcclxuLyoqXHJcbiAqIEEgc2xhc2gtc2VwYXJhdGVkIHBhdGggZm9yIG5hdmlnYXRpbmcgcmVzb3VyY2VzIChkb2N1bWVudHMgYW5kIGNvbGxlY3Rpb25zKVxyXG4gKiB3aXRoaW4gRmlyZXN0b3JlLlxyXG4gKi9cclxudmFyIFJlc291cmNlUGF0aCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIHRzbGliLl9fZXh0ZW5kcyhSZXNvdXJjZVBhdGgsIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBSZXNvdXJjZVBhdGgoKSB7XHJcbiAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xyXG4gICAgfVxyXG4gICAgUmVzb3VyY2VQYXRoLnByb3RvdHlwZS5jb25zdHJ1Y3QgPSBmdW5jdGlvbiAoc2VnbWVudHMsIG9mZnNldCwgbGVuZ3RoKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBSZXNvdXJjZVBhdGgoc2VnbWVudHMsIG9mZnNldCwgbGVuZ3RoKTtcclxuICAgIH07XHJcbiAgICBSZXNvdXJjZVBhdGgucHJvdG90eXBlLmNhbm9uaWNhbFN0cmluZyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvLyBOT1RFOiBUaGUgY2xpZW50IGlzIGlnbm9yYW50IG9mIGFueSBwYXRoIHNlZ21lbnRzIGNvbnRhaW5pbmcgZXNjYXBlXHJcbiAgICAgICAgLy8gc2VxdWVuY2VzIChlLmcuIF9faWQxMjNfXykgYW5kIGp1c3QgcGFzc2VzIHRoZW0gdGhyb3VnaCByYXcgKHRoZXkgZXhpc3RcclxuICAgICAgICAvLyBmb3IgbGVnYWN5IHJlYXNvbnMgYW5kIHNob3VsZCBub3QgYmUgdXNlZCBmcmVxdWVudGx5KS5cclxuICAgICAgICByZXR1cm4gdGhpcy50b0FycmF5KCkuam9pbignLycpO1xyXG4gICAgfTtcclxuICAgIFJlc291cmNlUGF0aC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY2Fub25pY2FsU3RyaW5nKCk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGVzIGEgcmVzb3VyY2UgcGF0aCBmcm9tIHRoZSBnaXZlbiBzbGFzaC1kZWxpbWl0ZWQgc3RyaW5nLlxyXG4gICAgICovXHJcbiAgICBSZXNvdXJjZVBhdGguZnJvbVN0cmluZyA9IGZ1bmN0aW9uIChwYXRoKSB7XHJcbiAgICAgICAgLy8gTk9URTogVGhlIGNsaWVudCBpcyBpZ25vcmFudCBvZiBhbnkgcGF0aCBzZWdtZW50cyBjb250YWluaW5nIGVzY2FwZVxyXG4gICAgICAgIC8vIHNlcXVlbmNlcyAoZS5nLiBfX2lkMTIzX18pIGFuZCBqdXN0IHBhc3NlcyB0aGVtIHRocm91Z2ggcmF3ICh0aGV5IGV4aXN0XHJcbiAgICAgICAgLy8gZm9yIGxlZ2FjeSByZWFzb25zIGFuZCBzaG91bGQgbm90IGJlIHVzZWQgZnJlcXVlbnRseSkuXHJcbiAgICAgICAgaWYgKHBhdGguaW5kZXhPZignLy8nKSA+PSAwKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLklOVkFMSURfQVJHVU1FTlQsIFwiSW52YWxpZCBwYXRoIChcIiArIHBhdGggKyBcIikuIFBhdGhzIG11c3Qgbm90IGNvbnRhaW4gLy8gaW4gdGhlbS5cIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFdlIG1heSBzdGlsbCBoYXZlIGFuIGVtcHR5IHNlZ21lbnQgYXQgdGhlIGJlZ2lubmluZyBvciBlbmQgaWYgdGhleSBoYWQgYVxyXG4gICAgICAgIC8vIGxlYWRpbmcgb3IgdHJhaWxpbmcgc2xhc2ggKHdoaWNoIHdlIGFsbG93KS5cclxuICAgICAgICB2YXIgc2VnbWVudHMgPSBwYXRoLnNwbGl0KCcvJykuZmlsdGVyKGZ1bmN0aW9uIChzZWdtZW50KSB7IHJldHVybiBzZWdtZW50Lmxlbmd0aCA+IDA7IH0pO1xyXG4gICAgICAgIHJldHVybiBuZXcgUmVzb3VyY2VQYXRoKHNlZ21lbnRzKTtcclxuICAgIH07XHJcbiAgICBSZXNvdXJjZVBhdGguRU1QVFlfUEFUSCA9IG5ldyBSZXNvdXJjZVBhdGgoW10pO1xyXG4gICAgcmV0dXJuIFJlc291cmNlUGF0aDtcclxufShCYXNlUGF0aCkpO1xyXG52YXIgaWRlbnRpZmllclJlZ0V4cCA9IC9eW19hLXpBLVpdW19hLXpBLVowLTldKiQvO1xyXG4vKiogQSBkb3Qtc2VwYXJhdGVkIHBhdGggZm9yIG5hdmlnYXRpbmcgc3ViLW9iamVjdHMgd2l0aGluIGEgZG9jdW1lbnQuICovXHJcbnZhciBGaWVsZFBhdGggPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICB0c2xpYi5fX2V4dGVuZHMoRmllbGRQYXRoLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gRmllbGRQYXRoKCkge1xyXG4gICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcclxuICAgIH1cclxuICAgIEZpZWxkUGF0aC5wcm90b3R5cGUuY29uc3RydWN0ID0gZnVuY3Rpb24gKHNlZ21lbnRzLCBvZmZzZXQsIGxlbmd0aCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgRmllbGRQYXRoKHNlZ21lbnRzLCBvZmZzZXQsIGxlbmd0aCk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhlIHN0cmluZyBjb3VsZCBiZSB1c2VkIGFzIGEgc2VnbWVudCBpbiBhIGZpZWxkIHBhdGhcclxuICAgICAqIHdpdGhvdXQgZXNjYXBpbmcuXHJcbiAgICAgKi9cclxuICAgIEZpZWxkUGF0aC5pc1ZhbGlkSWRlbnRpZmllciA9IGZ1bmN0aW9uIChzZWdtZW50KSB7XHJcbiAgICAgICAgcmV0dXJuIGlkZW50aWZpZXJSZWdFeHAudGVzdChzZWdtZW50KTtcclxuICAgIH07XHJcbiAgICBGaWVsZFBhdGgucHJvdG90eXBlLmNhbm9uaWNhbFN0cmluZyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy50b0FycmF5KClcclxuICAgICAgICAgICAgLm1hcChmdW5jdGlvbiAoc3RyKSB7XHJcbiAgICAgICAgICAgIHN0ciA9IHN0ci5yZXBsYWNlKCdcXFxcJywgJ1xcXFxcXFxcJykucmVwbGFjZSgnYCcsICdcXFxcYCcpO1xyXG4gICAgICAgICAgICBpZiAoIUZpZWxkUGF0aC5pc1ZhbGlkSWRlbnRpZmllcihzdHIpKSB7XHJcbiAgICAgICAgICAgICAgICBzdHIgPSAnYCcgKyBzdHIgKyAnYCc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHN0cjtcclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAuam9pbignLicpO1xyXG4gICAgfTtcclxuICAgIEZpZWxkUGF0aC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY2Fub25pY2FsU3RyaW5nKCk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhpcyBmaWVsZCByZWZlcmVuY2VzIHRoZSBrZXkgb2YgYSBkb2N1bWVudC5cclxuICAgICAqL1xyXG4gICAgRmllbGRQYXRoLnByb3RvdHlwZS5pc0tleUZpZWxkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmxlbmd0aCA9PT0gMSAmJiB0aGlzLmdldCgwKSA9PT0gRE9DVU1FTlRfS0VZX05BTUU7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgZmllbGQgZGVzaWduYXRpbmcgdGhlIGtleSBvZiBhIGRvY3VtZW50LlxyXG4gICAgICovXHJcbiAgICBGaWVsZFBhdGgua2V5RmllbGQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBGaWVsZFBhdGgoW0RPQ1VNRU5UX0tFWV9OQU1FXSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBQYXJzZXMgYSBmaWVsZCBzdHJpbmcgZnJvbSB0aGUgZ2l2ZW4gc2VydmVyLWZvcm1hdHRlZCBzdHJpbmcuXHJcbiAgICAgKlxyXG4gICAgICogLSBTcGxpdHRpbmcgdGhlIGVtcHR5IHN0cmluZyBpcyBub3QgYWxsb3dlZCAoZm9yIG5vdyBhdCBsZWFzdCkuXHJcbiAgICAgKiAtIEVtcHR5IHNlZ21lbnRzIHdpdGhpbiB0aGUgc3RyaW5nIChlLmcuIGlmIHRoZXJlIGFyZSB0d28gY29uc2VjdXRpdmVcclxuICAgICAqICAgc2VwYXJhdG9ycykgYXJlIG5vdCBhbGxvd2VkLlxyXG4gICAgICpcclxuICAgICAqIFRPRE8oYi8zNzI0NDE1Nyk6IHdlIHNob3VsZCBtYWtlIHRoaXMgbW9yZSBzdHJpY3QuIFJpZ2h0IG5vdywgaXQgYWxsb3dzXHJcbiAgICAgKiBub24taWRlbnRpZmllciBwYXRoIGNvbXBvbmVudHMsIGV2ZW4gaWYgdGhleSBhcmVuJ3QgZXNjYXBlZC5cclxuICAgICAqL1xyXG4gICAgRmllbGRQYXRoLmZyb21TZXJ2ZXJGb3JtYXQgPSBmdW5jdGlvbiAocGF0aCkge1xyXG4gICAgICAgIHZhciBzZWdtZW50cyA9IFtdO1xyXG4gICAgICAgIHZhciBjdXJyZW50ID0gJyc7XHJcbiAgICAgICAgdmFyIGkgPSAwO1xyXG4gICAgICAgIHZhciBhZGRDdXJyZW50U2VnbWVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKGN1cnJlbnQubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5JTlZBTElEX0FSR1VNRU5ULCBcIkludmFsaWQgZmllbGQgcGF0aCAoXCIgKyBwYXRoICsgXCIpLiBQYXRocyBtdXN0IG5vdCBiZSBlbXB0eSwgYmVnaW4gXCIgK1xyXG4gICAgICAgICAgICAgICAgICAgIFwid2l0aCAnLicsIGVuZCB3aXRoICcuJywgb3IgY29udGFpbiAnLi4nXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHNlZ21lbnRzLnB1c2goY3VycmVudCk7XHJcbiAgICAgICAgICAgIGN1cnJlbnQgPSAnJztcclxuICAgICAgICB9O1xyXG4gICAgICAgIHZhciBpbkJhY2t0aWNrcyA9IGZhbHNlO1xyXG4gICAgICAgIHdoaWxlIChpIDwgcGF0aC5sZW5ndGgpIHtcclxuICAgICAgICAgICAgdmFyIGMgPSBwYXRoW2ldO1xyXG4gICAgICAgICAgICBpZiAoYyA9PT0gJ1xcXFwnKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaSArIDEgPT09IHBhdGgubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuSU5WQUxJRF9BUkdVTUVOVCwgJ1BhdGggaGFzIHRyYWlsaW5nIGVzY2FwZSBjaGFyYWN0ZXI6ICcgKyBwYXRoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHZhciBuZXh0ID0gcGF0aFtpICsgMV07XHJcbiAgICAgICAgICAgICAgICBpZiAoIShuZXh0ID09PSAnXFxcXCcgfHwgbmV4dCA9PT0gJy4nIHx8IG5leHQgPT09ICdgJykpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5JTlZBTElEX0FSR1VNRU5ULCAnUGF0aCBoYXMgaW52YWxpZCBlc2NhcGUgc2VxdWVuY2U6ICcgKyBwYXRoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGN1cnJlbnQgKz0gbmV4dDtcclxuICAgICAgICAgICAgICAgIGkgKz0gMjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChjID09PSAnYCcpIHtcclxuICAgICAgICAgICAgICAgIGluQmFja3RpY2tzID0gIWluQmFja3RpY2tzO1xyXG4gICAgICAgICAgICAgICAgaSsrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGMgPT09ICcuJyAmJiAhaW5CYWNrdGlja3MpIHtcclxuICAgICAgICAgICAgICAgIGFkZEN1cnJlbnRTZWdtZW50KCk7XHJcbiAgICAgICAgICAgICAgICBpKys7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjdXJyZW50ICs9IGM7XHJcbiAgICAgICAgICAgICAgICBpKys7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgYWRkQ3VycmVudFNlZ21lbnQoKTtcclxuICAgICAgICBpZiAoaW5CYWNrdGlja3MpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuSU5WQUxJRF9BUkdVTUVOVCwgJ1VudGVybWluYXRlZCBgIGluIHBhdGg6ICcgKyBwYXRoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG5ldyBGaWVsZFBhdGgoc2VnbWVudHMpO1xyXG4gICAgfTtcclxuICAgIEZpZWxkUGF0aC5FTVBUWV9QQVRIID0gbmV3IEZpZWxkUGF0aChbXSk7XHJcbiAgICByZXR1cm4gRmllbGRQYXRoO1xyXG59KEJhc2VQYXRoKSk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG52YXIgRG9jdW1lbnRLZXkgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBEb2N1bWVudEtleShwYXRoKSB7XHJcbiAgICAgICAgdGhpcy5wYXRoID0gcGF0aDtcclxuICAgICAgICBhc3NlcnQoRG9jdW1lbnRLZXkuaXNEb2N1bWVudEtleShwYXRoKSwgJ0ludmFsaWQgRG9jdW1lbnRLZXkgd2l0aCBhbiBvZGQgbnVtYmVyIG9mIHNlZ21lbnRzOiAnICtcclxuICAgICAgICAgICAgcGF0aC50b0FycmF5KCkuam9pbignLycpKTtcclxuICAgIH1cclxuICAgIC8qKiBSZXR1cm5zIHRydWUgaWYgdGhlIGRvY3VtZW50IGlzIGluIHRoZSBzcGVjaWZpZWQgY29sbGVjdGlvbklkLiAqL1xyXG4gICAgRG9jdW1lbnRLZXkucHJvdG90eXBlLmhhc0NvbGxlY3Rpb25JZCA9IGZ1bmN0aW9uIChjb2xsZWN0aW9uSWQpIHtcclxuICAgICAgICByZXR1cm4gKHRoaXMucGF0aC5sZW5ndGggPj0gMiAmJlxyXG4gICAgICAgICAgICB0aGlzLnBhdGguZ2V0KHRoaXMucGF0aC5sZW5ndGggLSAyKSA9PT0gY29sbGVjdGlvbklkKTtcclxuICAgIH07XHJcbiAgICBEb2N1bWVudEtleS5wcm90b3R5cGUuaXNFcXVhbCA9IGZ1bmN0aW9uIChvdGhlcikge1xyXG4gICAgICAgIHJldHVybiAob3RoZXIgIT09IG51bGwgJiYgUmVzb3VyY2VQYXRoLmNvbXBhcmF0b3IodGhpcy5wYXRoLCBvdGhlci5wYXRoKSA9PT0gMCk7XHJcbiAgICB9O1xyXG4gICAgRG9jdW1lbnRLZXkucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnBhdGgudG9TdHJpbmcoKTtcclxuICAgIH07XHJcbiAgICBEb2N1bWVudEtleS5jb21wYXJhdG9yID0gZnVuY3Rpb24gKGsxLCBrMikge1xyXG4gICAgICAgIHJldHVybiBSZXNvdXJjZVBhdGguY29tcGFyYXRvcihrMS5wYXRoLCBrMi5wYXRoKTtcclxuICAgIH07XHJcbiAgICBEb2N1bWVudEtleS5pc0RvY3VtZW50S2V5ID0gZnVuY3Rpb24gKHBhdGgpIHtcclxuICAgICAgICByZXR1cm4gcGF0aC5sZW5ndGggJSAyID09PSAwO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhbmQgcmV0dXJucyBhIG5ldyBkb2N1bWVudCBrZXkgd2l0aCB0aGUgZ2l2ZW4gc2VnbWVudHMuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHBhdGggVGhlIHNlZ21lbnRzIG9mIHRoZSBwYXRoIHRvIHRoZSBkb2N1bWVudFxyXG4gICAgICogQHJldHVybiBBIG5ldyBpbnN0YW5jZSBvZiBEb2N1bWVudEtleVxyXG4gICAgICovXHJcbiAgICBEb2N1bWVudEtleS5mcm9tU2VnbWVudHMgPSBmdW5jdGlvbiAoc2VnbWVudHMpIHtcclxuICAgICAgICByZXR1cm4gbmV3IERvY3VtZW50S2V5KG5ldyBSZXNvdXJjZVBhdGgoc2VnbWVudHMuc2xpY2UoKSkpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhbmQgcmV0dXJucyBhIG5ldyBkb2N1bWVudCBrZXkgdXNpbmcgJy8nIHRvIHNwbGl0IHRoZSBzdHJpbmcgaW50b1xyXG4gICAgICogc2VnbWVudHMuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHBhdGggVGhlIHNsYXNoLXNlcGFyYXRlZCBwYXRoIHN0cmluZyB0byB0aGUgZG9jdW1lbnRcclxuICAgICAqIEByZXR1cm4gQSBuZXcgaW5zdGFuY2Ugb2YgRG9jdW1lbnRLZXlcclxuICAgICAqL1xyXG4gICAgRG9jdW1lbnRLZXkuZnJvbVBhdGhTdHJpbmcgPSBmdW5jdGlvbiAocGF0aCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgRG9jdW1lbnRLZXkoUmVzb3VyY2VQYXRoLmZyb21TdHJpbmcocGF0aCkpO1xyXG4gICAgfTtcclxuICAgIERvY3VtZW50S2V5LkVNUFRZID0gbmV3IERvY3VtZW50S2V5KG5ldyBSZXNvdXJjZVBhdGgoW10pKTtcclxuICAgIHJldHVybiBEb2N1bWVudEtleTtcclxufSgpKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnZhciBEZWZlcnJlZCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIERlZmVycmVkKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5wcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICBfdGhpcy5yZXNvbHZlID0gcmVzb2x2ZTtcclxuICAgICAgICAgICAgX3RoaXMucmVqZWN0ID0gcmVqZWN0O1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIERlZmVycmVkO1xyXG59KCkpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFdlbGxrbm93biBcInRpbWVyXCIgSURzIHVzZWQgd2hlbiBzY2hlZHVsaW5nIGRlbGF5ZWQgb3BlcmF0aW9ucyBvbiB0aGVcclxuICogQXN5bmNRdWV1ZS4gVGhlc2UgSURzIGNhbiB0aGVuIGJlIHVzZWQgZnJvbSB0ZXN0cyB0byBjaGVjayBmb3IgdGhlIHByZXNlbmNlXHJcbiAqIG9mIG9wZXJhdGlvbnMgb3IgdG8gcnVuIHRoZW0gZWFybHkuXHJcbiAqXHJcbiAqIFRoZSBzdHJpbmcgdmFsdWVzIGFyZSB1c2VkIHdoZW4gZW5jb2RpbmcgdGhlc2UgdGltZXIgSURzIGluIEpTT04gc3BlYyB0ZXN0cy5cclxuICovXHJcbnZhciBUaW1lcklkO1xyXG4oZnVuY3Rpb24gKFRpbWVySWQpIHtcclxuICAgIC8qKiBBbGwgY2FuIGJlIHVzZWQgd2l0aCBydW5EZWxheWVkT3BlcmF0aW9uc0Vhcmx5KCkgdG8gcnVuIGFsbCB0aW1lcnMuICovXHJcbiAgICBUaW1lcklkW1wiQWxsXCJdID0gXCJhbGxcIjtcclxuICAgIC8qKlxyXG4gICAgICogVGhlIGZvbGxvd2luZyA0IHRpbWVycyBhcmUgdXNlZCBpbiBwZXJzaXN0ZW50X3N0cmVhbS50cyBmb3IgdGhlIGxpc3RlbiBhbmRcclxuICAgICAqIHdyaXRlIHN0cmVhbXMuIFRoZSBcIklkbGVcIiB0aW1lciBpcyB1c2VkIHRvIGNsb3NlIHRoZSBzdHJlYW0gZHVlIHRvXHJcbiAgICAgKiBpbmFjdGl2aXR5LiBUaGUgXCJDb25uZWN0aW9uQmFja29mZlwiIHRpbWVyIGlzIHVzZWQgdG8gcmVzdGFydCBhIHN0cmVhbSBvbmNlXHJcbiAgICAgKiB0aGUgYXBwcm9wcmlhdGUgYmFja29mZiBkZWxheSBoYXMgZWxhcHNlZC5cclxuICAgICAqL1xyXG4gICAgVGltZXJJZFtcIkxpc3RlblN0cmVhbUlkbGVcIl0gPSBcImxpc3Rlbl9zdHJlYW1faWRsZVwiO1xyXG4gICAgVGltZXJJZFtcIkxpc3RlblN0cmVhbUNvbm5lY3Rpb25CYWNrb2ZmXCJdID0gXCJsaXN0ZW5fc3RyZWFtX2Nvbm5lY3Rpb25fYmFja29mZlwiO1xyXG4gICAgVGltZXJJZFtcIldyaXRlU3RyZWFtSWRsZVwiXSA9IFwid3JpdGVfc3RyZWFtX2lkbGVcIjtcclxuICAgIFRpbWVySWRbXCJXcml0ZVN0cmVhbUNvbm5lY3Rpb25CYWNrb2ZmXCJdID0gXCJ3cml0ZV9zdHJlYW1fY29ubmVjdGlvbl9iYWNrb2ZmXCI7XHJcbiAgICAvKipcclxuICAgICAqIEEgdGltZXIgdXNlZCBpbiBvbmxpbmVfc3RhdGVfdHJhY2tlci50cyB0byB0cmFuc2l0aW9uIGZyb21cclxuICAgICAqIE9ubGluZVN0YXRlLlVua25vd24gdG8gT2ZmbGluZSBhZnRlciBhIHNldCB0aW1lb3V0LCByYXRoZXIgdGhhbiB3YWl0aW5nXHJcbiAgICAgKiBpbmRlZmluaXRlbHkgZm9yIHN1Y2Nlc3Mgb3IgZmFpbHVyZS5cclxuICAgICAqL1xyXG4gICAgVGltZXJJZFtcIk9ubGluZVN0YXRlVGltZW91dFwiXSA9IFwib25saW5lX3N0YXRlX3RpbWVvdXRcIjtcclxuICAgIC8qKlxyXG4gICAgICogQSB0aW1lciB1c2VkIHRvIHVwZGF0ZSB0aGUgY2xpZW50IG1ldGFkYXRhIGluIEluZGV4ZWREYiwgd2hpY2ggaXMgdXNlZFxyXG4gICAgICogdG8gZGV0ZXJtaW5lIHRoZSBwcmltYXJ5IGxlYXNlaG9sZGVyLlxyXG4gICAgICovXHJcbiAgICBUaW1lcklkW1wiQ2xpZW50TWV0YWRhdGFSZWZyZXNoXCJdID0gXCJjbGllbnRfbWV0YWRhdGFfcmVmcmVzaFwiO1xyXG4gICAgLyoqIEEgdGltZXIgdXNlZCB0byBwZXJpb2RpY2FsbHkgYXR0ZW1wdCBMUlUgR2FyYmFnZSBjb2xsZWN0aW9uICovXHJcbiAgICBUaW1lcklkW1wiTHJ1R2FyYmFnZUNvbGxlY3Rpb25cIl0gPSBcImxydV9nYXJiYWdlX2NvbGxlY3Rpb25cIjtcclxuICAgIC8qKlxyXG4gICAgICogQSB0aW1lciB1c2VkIHRvIHJldHJ5IHRyYW5zYWN0aW9ucy4gU2luY2UgdGhlcmUgY2FuIGJlIG11bHRpcGxlIGNvbmN1cnJlbnRcclxuICAgICAqIHRyYW5zYWN0aW9ucywgbXVsdGlwbGUgb2YgdGhlc2UgbWF5IGJlIGluIHRoZSBxdWV1ZSBhdCBhIGdpdmVuIHRpbWUuXHJcbiAgICAgKi9cclxuICAgIFRpbWVySWRbXCJSZXRyeVRyYW5zYWN0aW9uXCJdID0gXCJyZXRyeV90cmFuc2FjdGlvblwiO1xyXG59KShUaW1lcklkIHx8IChUaW1lcklkID0ge30pKTtcclxuLyoqXHJcbiAqIFJlcHJlc2VudHMgYW4gb3BlcmF0aW9uIHNjaGVkdWxlZCB0byBiZSBydW4gaW4gdGhlIGZ1dHVyZSBvbiBhbiBBc3luY1F1ZXVlLlxyXG4gKlxyXG4gKiBJdCBpcyBjcmVhdGVkIHZpYSBEZWxheWVkT3BlcmF0aW9uLmNyZWF0ZUFuZFNjaGVkdWxlKCkuXHJcbiAqXHJcbiAqIFN1cHBvcnRzIGNhbmNlbGxhdGlvbiAodmlhIGNhbmNlbCgpKSBhbmQgZWFybHkgZXhlY3V0aW9uICh2aWEgc2tpcERlbGF5KCkpLlxyXG4gKi9cclxudmFyIERlbGF5ZWRPcGVyYXRpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBEZWxheWVkT3BlcmF0aW9uKGFzeW5jUXVldWUsIHRpbWVySWQsIHRhcmdldFRpbWVNcywgb3AsIHJlbW92YWxDYWxsYmFjaykge1xyXG4gICAgICAgIHRoaXMuYXN5bmNRdWV1ZSA9IGFzeW5jUXVldWU7XHJcbiAgICAgICAgdGhpcy50aW1lcklkID0gdGltZXJJZDtcclxuICAgICAgICB0aGlzLnRhcmdldFRpbWVNcyA9IHRhcmdldFRpbWVNcztcclxuICAgICAgICB0aGlzLm9wID0gb3A7XHJcbiAgICAgICAgdGhpcy5yZW1vdmFsQ2FsbGJhY2sgPSByZW1vdmFsQ2FsbGJhY2s7XHJcbiAgICAgICAgdGhpcy5kZWZlcnJlZCA9IG5ldyBEZWZlcnJlZCgpO1xyXG4gICAgICAgIHRoaXMudGhlbiA9IHRoaXMuZGVmZXJyZWQucHJvbWlzZS50aGVuLmJpbmQodGhpcy5kZWZlcnJlZC5wcm9taXNlKTtcclxuICAgICAgICB0aGlzLmNhdGNoID0gdGhpcy5kZWZlcnJlZC5wcm9taXNlLmNhdGNoLmJpbmQodGhpcy5kZWZlcnJlZC5wcm9taXNlKTtcclxuICAgICAgICAvLyBJdCdzIG5vcm1hbCBmb3IgdGhlIGRlZmVycmVkIHByb21pc2UgdG8gYmUgY2FuY2VsZWQgKGR1ZSB0byBjYW5jZWxsYXRpb24pXHJcbiAgICAgICAgLy8gYW5kIHNvIHdlIGF0dGFjaCBhIGR1bW15IGNhdGNoIGNhbGxiYWNrIHRvIGF2b2lkXHJcbiAgICAgICAgLy8gJ1VuaGFuZGxlZFByb21pc2VSZWplY3Rpb25XYXJuaW5nJyBsb2cgc3BhbS5cclxuICAgICAgICB0aGlzLmRlZmVycmVkLnByb21pc2UuY2F0Y2goZnVuY3Rpb24gKGVycikgeyB9KTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhbmQgcmV0dXJucyBhIERlbGF5ZWRPcGVyYXRpb24gdGhhdCBoYXMgYmVlbiBzY2hlZHVsZWQgdG8gYmVcclxuICAgICAqIGV4ZWN1dGVkIG9uIHRoZSBwcm92aWRlZCBhc3luY1F1ZXVlIGFmdGVyIHRoZSBwcm92aWRlZCBkZWxheU1zLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBhc3luY1F1ZXVlIFRoZSBxdWV1ZSB0byBzY2hlZHVsZSB0aGUgb3BlcmF0aW9uIG9uLlxyXG4gICAgICogQHBhcmFtIGlkIEEgVGltZXIgSUQgaWRlbnRpZnlpbmcgdGhlIHR5cGUgb2Ygb3BlcmF0aW9uIHRoaXMgaXMuXHJcbiAgICAgKiBAcGFyYW0gZGVsYXlNcyBUaGUgZGVsYXkgKG1zKSBiZWZvcmUgdGhlIG9wZXJhdGlvbiBzaG91bGQgYmUgc2NoZWR1bGVkLlxyXG4gICAgICogQHBhcmFtIG9wIFRoZSBvcGVyYXRpb24gdG8gcnVuLlxyXG4gICAgICogQHBhcmFtIHJlbW92YWxDYWxsYmFjayBBIGNhbGxiYWNrIHRvIGJlIGNhbGxlZCBzeW5jaHJvbm91c2x5IG9uY2UgdGhlXHJcbiAgICAgKiAgIG9wZXJhdGlvbiBpcyBleGVjdXRlZCBvciBjYW5jZWxlZCwgbm90aWZ5aW5nIHRoZSBBc3luY1F1ZXVlIHRvIHJlbW92ZSBpdFxyXG4gICAgICogICBmcm9tIGl0cyBkZWxheWVkT3BlcmF0aW9ucyBsaXN0LlxyXG4gICAgICogICBQT1JUSU5HIE5PVEU6IFRoaXMgZXhpc3RzIHRvIHByZXZlbnQgbWFraW5nIHJlbW92ZURlbGF5ZWRPcGVyYXRpb24oKSBhbmRcclxuICAgICAqICAgdGhlIERlbGF5ZWRPcGVyYXRpb24gY2xhc3MgcHVibGljLlxyXG4gICAgICovXHJcbiAgICBEZWxheWVkT3BlcmF0aW9uLmNyZWF0ZUFuZFNjaGVkdWxlID0gZnVuY3Rpb24gKGFzeW5jUXVldWUsIHRpbWVySWQsIGRlbGF5TXMsIG9wLCByZW1vdmFsQ2FsbGJhY2spIHtcclxuICAgICAgICB2YXIgdGFyZ2V0VGltZSA9IERhdGUubm93KCkgKyBkZWxheU1zO1xyXG4gICAgICAgIHZhciBkZWxheWVkT3AgPSBuZXcgRGVsYXllZE9wZXJhdGlvbihhc3luY1F1ZXVlLCB0aW1lcklkLCB0YXJnZXRUaW1lLCBvcCwgcmVtb3ZhbENhbGxiYWNrKTtcclxuICAgICAgICBkZWxheWVkT3Auc3RhcnQoZGVsYXlNcyk7XHJcbiAgICAgICAgcmV0dXJuIGRlbGF5ZWRPcDtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFN0YXJ0cyB0aGUgdGltZXIuIFRoaXMgaXMgY2FsbGVkIGltbWVkaWF0ZWx5IGFmdGVyIGNvbnN0cnVjdGlvbiBieVxyXG4gICAgICogY3JlYXRlQW5kU2NoZWR1bGUoKS5cclxuICAgICAqL1xyXG4gICAgRGVsYXllZE9wZXJhdGlvbi5wcm90b3R5cGUuc3RhcnQgPSBmdW5jdGlvbiAoZGVsYXlNcykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy50aW1lckhhbmRsZSA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMuaGFuZGxlRGVsYXlFbGFwc2VkKCk7IH0sIGRlbGF5TXMpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUXVldWVzIHRoZSBvcGVyYXRpb24gdG8gcnVuIGltbWVkaWF0ZWx5IChpZiBpdCBoYXNuJ3QgYWxyZWFkeSBiZWVuIHJ1biBvclxyXG4gICAgICogY2FuY2VsZWQpLlxyXG4gICAgICovXHJcbiAgICBEZWxheWVkT3BlcmF0aW9uLnByb3RvdHlwZS5za2lwRGVsYXkgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaGFuZGxlRGVsYXlFbGFwc2VkKCk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBDYW5jZWxzIHRoZSBvcGVyYXRpb24gaWYgaXQgaGFzbid0IGFscmVhZHkgYmVlbiBleGVjdXRlZCBvciBjYW5jZWxlZC4gVGhlXHJcbiAgICAgKiBwcm9taXNlIHdpbGwgYmUgcmVqZWN0ZWQuXHJcbiAgICAgKlxyXG4gICAgICogQXMgbG9uZyBhcyB0aGUgb3BlcmF0aW9uIGhhcyBub3QgeWV0IGJlZW4gcnVuLCBjYWxsaW5nIGNhbmNlbCgpIHByb3ZpZGVzIGFcclxuICAgICAqIGd1YXJhbnRlZSB0aGF0IHRoZSBvcGVyYXRpb24gd2lsbCBub3QgYmUgcnVuLlxyXG4gICAgICovXHJcbiAgICBEZWxheWVkT3BlcmF0aW9uLnByb3RvdHlwZS5jYW5jZWwgPSBmdW5jdGlvbiAocmVhc29uKSB7XHJcbiAgICAgICAgaWYgKHRoaXMudGltZXJIYW5kbGUgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgdGhpcy5jbGVhclRpbWVvdXQoKTtcclxuICAgICAgICAgICAgdGhpcy5kZWZlcnJlZC5yZWplY3QobmV3IEZpcmVzdG9yZUVycm9yKENvZGUuQ0FOQ0VMTEVELCAnT3BlcmF0aW9uIGNhbmNlbGxlZCcgKyAocmVhc29uID8gJzogJyArIHJlYXNvbiA6ICcnKSkpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBEZWxheWVkT3BlcmF0aW9uLnByb3RvdHlwZS5oYW5kbGVEZWxheUVsYXBzZWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB0aGlzLmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmIChfdGhpcy50aW1lckhhbmRsZSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuY2xlYXJUaW1lb3V0KCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMub3AoKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuZGVmZXJyZWQucmVzb2x2ZShyZXN1bHQpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBEZWxheWVkT3BlcmF0aW9uLnByb3RvdHlwZS5jbGVhclRpbWVvdXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMudGltZXJIYW5kbGUgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgdGhpcy5yZW1vdmFsQ2FsbGJhY2sodGhpcyk7XHJcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnRpbWVySGFuZGxlKTtcclxuICAgICAgICAgICAgdGhpcy50aW1lckhhbmRsZSA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHJldHVybiBEZWxheWVkT3BlcmF0aW9uO1xyXG59KCkpO1xyXG52YXIgQXN5bmNRdWV1ZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEFzeW5jUXVldWUoKSB7XHJcbiAgICAgICAgLy8gVGhlIGxhc3QgcHJvbWlzZSBpbiB0aGUgcXVldWUuXHJcbiAgICAgICAgdGhpcy50YWlsID0gUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICAgICAgLy8gSXMgdGhpcyBBc3luY1F1ZXVlIGJlaW5nIHNodXQgZG93bj8gT25jZSBpdCBpcyBzZXQgdG8gdHJ1ZSwgaXQgd2lsbCBub3RcclxuICAgICAgICAvLyBiZSBjaGFuZ2VkIGFnYWluLlxyXG4gICAgICAgIHRoaXMuX2lzU2h1dHRpbmdEb3duID0gZmFsc2U7XHJcbiAgICAgICAgLy8gT3BlcmF0aW9ucyBzY2hlZHVsZWQgdG8gYmUgcXVldWVkIGluIHRoZSBmdXR1cmUuIE9wZXJhdGlvbnMgYXJlXHJcbiAgICAgICAgLy8gYXV0b21hdGljYWxseSByZW1vdmVkIGFmdGVyIHRoZXkgYXJlIHJ1biBvciBjYW5jZWxlZC5cclxuICAgICAgICB0aGlzLmRlbGF5ZWRPcGVyYXRpb25zID0gW107XHJcbiAgICAgICAgLy8gdmlzaWJsZSBmb3IgdGVzdGluZ1xyXG4gICAgICAgIHRoaXMuZmFpbHVyZSA9IG51bGw7XHJcbiAgICAgICAgLy8gRmxhZyBzZXQgd2hpbGUgdGhlcmUncyBhbiBvdXRzdGFuZGluZyBBc3luY1F1ZXVlIG9wZXJhdGlvbiwgdXNlZCBmb3JcclxuICAgICAgICAvLyBhc3NlcnRpb24gc2FuaXR5LWNoZWNrcy5cclxuICAgICAgICB0aGlzLm9wZXJhdGlvbkluUHJvZ3Jlc3MgPSBmYWxzZTtcclxuICAgICAgICAvLyBMaXN0IG9mIFRpbWVySWRzIHRvIGZhc3QtZm9yd2FyZCBkZWxheXMgZm9yLlxyXG4gICAgICAgIHRoaXMudGltZXJJZHNUb1NraXAgPSBbXTtcclxuICAgIH1cclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShBc3luY1F1ZXVlLnByb3RvdHlwZSwgXCJpc1NodXR0aW5nRG93blwiLCB7XHJcbiAgICAgICAgLy8gSXMgdGhpcyBBc3luY1F1ZXVlIGJlaW5nIHNodXQgZG93bj8gSWYgdHJ1ZSwgdGhpcyBpbnN0YW5jZSB3aWxsIG5vdCBlbnF1ZXVlXHJcbiAgICAgICAgLy8gYW55IG5ldyBvcGVyYXRpb25zLCBQcm9taXNlcyBmcm9tIGVucXVldWUgcmVxdWVzdHMgd2lsbCBub3QgcmVzb2x2ZS5cclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2lzU2h1dHRpbmdEb3duO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgLyoqXHJcbiAgICAgKiBBZGRzIGEgbmV3IG9wZXJhdGlvbiB0byB0aGUgcXVldWUgd2l0aG91dCB3YWl0aW5nIGZvciBpdCB0byBjb21wbGV0ZSAoaS5lLlxyXG4gICAgICogd2UgaWdub3JlIHRoZSBQcm9taXNlIHJlc3VsdCkuXHJcbiAgICAgKi9cclxuICAgIEFzeW5jUXVldWUucHJvdG90eXBlLmVucXVldWVBbmRGb3JnZXQgPSBmdW5jdGlvbiAob3ApIHtcclxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWZsb2F0aW5nLXByb21pc2VzXHJcbiAgICAgICAgdGhpcy5lbnF1ZXVlKG9wKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJlZ2FyZGxlc3MgaWYgdGhlIHF1ZXVlIGhhcyBpbml0aWFsaXplZCBzaHV0ZG93biwgYWRkcyBhIG5ldyBvcGVyYXRpb24gdG8gdGhlXHJcbiAgICAgKiBxdWV1ZSB3aXRob3V0IHdhaXRpbmcgZm9yIGl0IHRvIGNvbXBsZXRlIChpLmUuIHdlIGlnbm9yZSB0aGUgUHJvbWlzZSByZXN1bHQpLlxyXG4gICAgICovXHJcbiAgICBBc3luY1F1ZXVlLnByb3RvdHlwZS5lbnF1ZXVlQW5kRm9yZ2V0RXZlbkFmdGVyU2h1dGRvd24gPSBmdW5jdGlvbiAob3ApIHtcclxuICAgICAgICB0aGlzLnZlcmlmeU5vdEZhaWxlZCgpO1xyXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZmxvYXRpbmctcHJvbWlzZXNcclxuICAgICAgICB0aGlzLmVucXVldWVJbnRlcm5hbChvcCk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZWdhcmRsZXNzIGlmIHRoZSBxdWV1ZSBoYXMgaW5pdGlhbGl6ZWQgc2h1dGRvd24sIGFkZHMgYSBuZXcgb3BlcmF0aW9uIHRvIHRoZVxyXG4gICAgICogcXVldWUuXHJcbiAgICAgKi9cclxuICAgIEFzeW5jUXVldWUucHJvdG90eXBlLmVucXVldWVFdmVuQWZ0ZXJTaHV0ZG93biA9IGZ1bmN0aW9uIChvcCkge1xyXG4gICAgICAgIHRoaXMudmVyaWZ5Tm90RmFpbGVkKCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5xdWV1ZUludGVybmFsKG9wKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEFkZHMgYSBuZXcgb3BlcmF0aW9uIHRvIHRoZSBxdWV1ZSBhbmQgaW5pdGlhbGl6ZSB0aGUgc2h1dCBkb3duIG9mIHRoaXMgcXVldWUuXHJcbiAgICAgKiBSZXR1cm5zIGEgcHJvbWlzZSB0aGF0IHdpbGwgYmUgcmVzb2x2ZWQgd2hlbiB0aGUgcHJvbWlzZSByZXR1cm5lZCBieSB0aGUgbmV3XHJcbiAgICAgKiBvcGVyYXRpb24gaXMgKHdpdGggaXRzIHZhbHVlKS5cclxuICAgICAqIE9uY2UgdGhpcyBtZXRob2QgaXMgY2FsbGVkLCB0aGUgb25seSBwb3NzaWJsZSB3YXkgdG8gcmVxdWVzdCBydW5uaW5nIGFuIG9wZXJhdGlvblxyXG4gICAgICogaXMgdGhyb3VnaCBgZW5xdWV1ZUFuZEZvcmdldEV2ZW5BZnRlclNodXRkb3duYC5cclxuICAgICAqL1xyXG4gICAgQXN5bmNRdWV1ZS5wcm90b3R5cGUuZW5xdWV1ZUFuZEluaXRpYXRlU2h1dGRvd24gPSBmdW5jdGlvbiAob3ApIHtcclxuICAgICAgICByZXR1cm4gdHNsaWIuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYi5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudmVyaWZ5Tm90RmFpbGVkKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghIXRoaXMuX2lzU2h1dHRpbmdEb3duKSByZXR1cm4gWzMgLypicmVhayovLCAyXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5faXNTaHV0dGluZ0Rvd24gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmVucXVldWVFdmVuQWZ0ZXJTaHV0ZG93bihvcCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDI7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOiByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQWRkcyBhIG5ldyBvcGVyYXRpb24gdG8gdGhlIHF1ZXVlLiBSZXR1cm5zIGEgcHJvbWlzZSB0aGF0IHdpbGwgYmUgcmVzb2x2ZWRcclxuICAgICAqIHdoZW4gdGhlIHByb21pc2UgcmV0dXJuZWQgYnkgdGhlIG5ldyBvcGVyYXRpb24gaXMgKHdpdGggaXRzIHZhbHVlKS5cclxuICAgICAqL1xyXG4gICAgQXN5bmNRdWV1ZS5wcm90b3R5cGUuZW5xdWV1ZSA9IGZ1bmN0aW9uIChvcCkge1xyXG4gICAgICAgIHRoaXMudmVyaWZ5Tm90RmFpbGVkKCk7XHJcbiAgICAgICAgaWYgKHRoaXMuX2lzU2h1dHRpbmdEb3duKSB7XHJcbiAgICAgICAgICAgIC8vIFJldHVybiBhIFByb21pc2Ugd2hpY2ggbmV2ZXIgcmVzb2x2ZXMuXHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkgeyB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5xdWV1ZUludGVybmFsKG9wKTtcclxuICAgIH07XHJcbiAgICBBc3luY1F1ZXVlLnByb3RvdHlwZS5lbnF1ZXVlSW50ZXJuYWwgPSBmdW5jdGlvbiAob3ApIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhciBuZXdUYWlsID0gdGhpcy50YWlsLnRoZW4oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBfdGhpcy5vcGVyYXRpb25JblByb2dyZXNzID0gdHJ1ZTtcclxuICAgICAgICAgICAgcmV0dXJuIG9wKClcclxuICAgICAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbiAoZXJyb3IkMSkge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuZmFpbHVyZSA9IGVycm9yJDE7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5vcGVyYXRpb25JblByb2dyZXNzID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB2YXIgbWVzc2FnZSA9IGVycm9yJDEuc3RhY2sgfHwgZXJyb3IkMS5tZXNzYWdlIHx8ICcnO1xyXG4gICAgICAgICAgICAgICAgZXJyb3IoJ0lOVEVSTkFMIFVOSEFORExFRCBFUlJPUjogJywgbWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICAvLyBFc2NhcGUgdGhlIHByb21pc2UgY2hhaW4gYW5kIHRocm93IHRoZSBlcnJvciBnbG9iYWxseSBzbyB0aGF0XHJcbiAgICAgICAgICAgICAgICAvLyBlLmcuIGFueSBnbG9iYWwgY3Jhc2ggcmVwb3J0aW5nIGxpYnJhcnkgZGV0ZWN0cyBhbmQgcmVwb3J0cyBpdC5cclxuICAgICAgICAgICAgICAgIC8vIChidXQgbm90IGZvciBzaW11bGF0ZWQgZXJyb3JzIGluIG91ciB0ZXN0cyBzaW5jZSB0aGlzIGJyZWFrcyBtb2NoYSlcclxuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmluZGV4T2YoJ0ZpcmVzdG9yZSBUZXN0IFNpbXVsYXRlZCBFcnJvcicpIDwgMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnJvciQxO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sIDApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gUmUtdGhyb3cgdGhlIGVycm9yIHNvIHRoYXQgdGhpcy50YWlsIGJlY29tZXMgYSByZWplY3RlZCBQcm9taXNlIGFuZFxyXG4gICAgICAgICAgICAgICAgLy8gYWxsIGZ1cnRoZXIgYXR0ZW1wdHMgdG8gY2hhaW4gKHZpYSAudGhlbikgd2lsbCBqdXN0IHNob3J0LWNpcmN1aXRcclxuICAgICAgICAgICAgICAgIC8vIGFuZCByZXR1cm4gdGhlIHJlamVjdGVkIFByb21pc2UuXHJcbiAgICAgICAgICAgICAgICB0aHJvdyBlcnJvciQxO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMub3BlcmF0aW9uSW5Qcm9ncmVzcyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy50YWlsID0gbmV3VGFpbDtcclxuICAgICAgICByZXR1cm4gbmV3VGFpbDtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFNjaGVkdWxlcyBhbiBvcGVyYXRpb24gdG8gYmUgcXVldWVkIG9uIHRoZSBBc3luY1F1ZXVlIG9uY2UgdGhlIHNwZWNpZmllZFxyXG4gICAgICogYGRlbGF5TXNgIGhhcyBlbGFwc2VkLiBUaGUgcmV0dXJuZWQgQ2FuY2VsYWJsZVByb21pc2UgY2FuIGJlIHVzZWQgdG8gY2FuY2VsXHJcbiAgICAgKiB0aGUgb3BlcmF0aW9uIHByaW9yIHRvIGl0cyBydW5uaW5nLlxyXG4gICAgICovXHJcbiAgICBBc3luY1F1ZXVlLnByb3RvdHlwZS5lbnF1ZXVlQWZ0ZXJEZWxheSA9IGZ1bmN0aW9uICh0aW1lcklkLCBkZWxheU1zLCBvcCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy52ZXJpZnlOb3RGYWlsZWQoKTtcclxuICAgICAgICBhc3NlcnQoZGVsYXlNcyA+PSAwLCBcIkF0dGVtcHRlZCB0byBzY2hlZHVsZSBhbiBvcGVyYXRpb24gd2l0aCBhIG5lZ2F0aXZlIGRlbGF5IG9mIFwiICsgZGVsYXlNcyk7XHJcbiAgICAgICAgLy8gRmFzdC1mb3J3YXJkIGRlbGF5cyBmb3IgdGltZXJJZHMgdGhhdCBoYXZlIGJlZW4gb3ZlcnJpZGVuLlxyXG4gICAgICAgIGlmICh0aGlzLnRpbWVySWRzVG9Ta2lwLmluZGV4T2YodGltZXJJZCkgPiAtMSkge1xyXG4gICAgICAgICAgICBkZWxheU1zID0gMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGRlbGF5ZWRPcCA9IERlbGF5ZWRPcGVyYXRpb24uY3JlYXRlQW5kU2NoZWR1bGUodGhpcywgdGltZXJJZCwgZGVsYXlNcywgb3AsIGZ1bmN0aW9uIChyZW1vdmVkT3ApIHtcclxuICAgICAgICAgICAgcmV0dXJuIF90aGlzLnJlbW92ZURlbGF5ZWRPcGVyYXRpb24ocmVtb3ZlZE9wKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmRlbGF5ZWRPcGVyYXRpb25zLnB1c2goZGVsYXllZE9wKTtcclxuICAgICAgICByZXR1cm4gZGVsYXllZE9wO1xyXG4gICAgfTtcclxuICAgIEFzeW5jUXVldWUucHJvdG90eXBlLnZlcmlmeU5vdEZhaWxlZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAodGhpcy5mYWlsdXJlKSB7XHJcbiAgICAgICAgICAgIGZhaWwoJ0FzeW5jUXVldWUgaXMgYWxyZWFkeSBmYWlsZWQ6ICcgK1xyXG4gICAgICAgICAgICAgICAgKHRoaXMuZmFpbHVyZS5zdGFjayB8fCB0aGlzLmZhaWx1cmUubWVzc2FnZSkpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFZlcmlmaWVzIHRoZXJlJ3MgYW4gb3BlcmF0aW9uIGN1cnJlbnRseSBpbi1wcm9ncmVzcyBvbiB0aGUgQXN5bmNRdWV1ZS5cclxuICAgICAqIFVuZm9ydHVuYXRlbHkgd2UgY2FuJ3QgdmVyaWZ5IHRoYXQgdGhlIHJ1bm5pbmcgY29kZSBpcyBpbiB0aGUgcHJvbWlzZSBjaGFpblxyXG4gICAgICogb2YgdGhhdCBvcGVyYXRpb24sIHNvIHRoaXMgaXNuJ3QgYSBmb29scHJvb2YgY2hlY2ssIGJ1dCBpdCBzaG91bGQgYmUgZW5vdWdoXHJcbiAgICAgKiB0byBjYXRjaCBzb21lIGJ1Z3MuXHJcbiAgICAgKi9cclxuICAgIEFzeW5jUXVldWUucHJvdG90eXBlLnZlcmlmeU9wZXJhdGlvbkluUHJvZ3Jlc3MgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgYXNzZXJ0KHRoaXMub3BlcmF0aW9uSW5Qcm9ncmVzcywgJ3ZlcmlmeU9wSW5Qcm9ncmVzcygpIGNhbGxlZCB3aGVuIG5vIG9wIGluIHByb2dyZXNzIG9uIHRoaXMgcXVldWUuJyk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBXYWl0cyB1bnRpbCBhbGwgY3VycmVudGx5IHF1ZXVlZCB0YXNrcyBhcmUgZmluaXNoZWQgZXhlY3V0aW5nLiBEZWxheWVkXHJcbiAgICAgKiBvcGVyYXRpb25zIGFyZSBub3QgcnVuLlxyXG4gICAgICovXHJcbiAgICBBc3luY1F1ZXVlLnByb3RvdHlwZS5kcmFpbiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvLyBJdCBzaG91bGQgc3RpbGwgYmUgcG9zc2libGUgdG8gZHJhaW4gdGhlIHF1ZXVlIGFmdGVyIGl0IGlzIHNodXR0aW5nIGRvd24uXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5xdWV1ZUV2ZW5BZnRlclNodXRkb3duKGZ1bmN0aW9uICgpIHsgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpOyB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEZvciBUZXN0czogRGV0ZXJtaW5lIGlmIGEgZGVsYXllZCBvcGVyYXRpb24gd2l0aCBhIHBhcnRpY3VsYXIgVGltZXJJZFxyXG4gICAgICogZXhpc3RzLlxyXG4gICAgICovXHJcbiAgICBBc3luY1F1ZXVlLnByb3RvdHlwZS5jb250YWluc0RlbGF5ZWRPcGVyYXRpb24gPSBmdW5jdGlvbiAodGltZXJJZCkge1xyXG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSB0aGlzLmRlbGF5ZWRPcGVyYXRpb25zOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICB2YXIgb3AgPSBfYVtfaV07XHJcbiAgICAgICAgICAgIGlmIChvcC50aW1lcklkID09PSB0aW1lcklkKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBGb3IgVGVzdHM6IFJ1bnMgc29tZSBvciBhbGwgZGVsYXllZCBvcGVyYXRpb25zIGVhcmx5LlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBsYXN0VGltZXJJZCBEZWxheWVkIG9wZXJhdGlvbnMgdXAgdG8gYW5kIGluY2x1ZGluZyB0aGlzIFRpbWVySWQgd2lsbFxyXG4gICAgICogIGJlIGRyYWluZWQuIFRocm93cyBpZiBubyBzdWNoIG9wZXJhdGlvbiBleGlzdHMuIFBhc3MgVGltZXJJZC5BbGwgdG8gcnVuXHJcbiAgICAgKiAgYWxsIGRlbGF5ZWQgb3BlcmF0aW9ucy5cclxuICAgICAqIEByZXR1cm5zIGEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIG9uY2UgYWxsIG9wZXJhdGlvbnMgaGF2ZSBiZWVuIHJ1bi5cclxuICAgICAqL1xyXG4gICAgQXN5bmNRdWV1ZS5wcm90b3R5cGUucnVuRGVsYXllZE9wZXJhdGlvbnNFYXJseSA9IGZ1bmN0aW9uIChsYXN0VGltZXJJZCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgLy8gTm90ZSB0aGF0IGRyYWluaW5nIG1heSBnZW5lcmF0ZSBtb3JlIGRlbGF5ZWQgb3BzLCBzbyB3ZSBkbyB0aGF0IGZpcnN0LlxyXG4gICAgICAgIHJldHVybiB0aGlzLmRyYWluKCkudGhlbihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGFzc2VydChsYXN0VGltZXJJZCA9PT0gVGltZXJJZC5BbGwgfHxcclxuICAgICAgICAgICAgICAgIF90aGlzLmNvbnRhaW5zRGVsYXllZE9wZXJhdGlvbihsYXN0VGltZXJJZCksIFwiQXR0ZW1wdGVkIHRvIGRyYWluIHRvIG1pc3Npbmcgb3BlcmF0aW9uIFwiICsgbGFzdFRpbWVySWQpO1xyXG4gICAgICAgICAgICAvLyBSdW4gb3BzIGluIHRoZSBzYW1lIG9yZGVyIHRoZXknZCBydW4gaWYgdGhleSByYW4gbmF0dXJhbGx5LlxyXG4gICAgICAgICAgICBfdGhpcy5kZWxheWVkT3BlcmF0aW9ucy5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7IHJldHVybiBhLnRhcmdldFRpbWVNcyAtIGIudGFyZ2V0VGltZU1zOyB9KTtcclxuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IF90aGlzLmRlbGF5ZWRPcGVyYXRpb25zOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIG9wID0gX2FbX2ldO1xyXG4gICAgICAgICAgICAgICAgb3Auc2tpcERlbGF5KCk7XHJcbiAgICAgICAgICAgICAgICBpZiAobGFzdFRpbWVySWQgIT09IFRpbWVySWQuQWxsICYmIG9wLnRpbWVySWQgPT09IGxhc3RUaW1lcklkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIF90aGlzLmRyYWluKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBGb3IgVGVzdHM6IFNraXAgYWxsIHN1YnNlcXVlbnQgZGVsYXlzIGZvciBhIHRpbWVyIGlkLlxyXG4gICAgICovXHJcbiAgICBBc3luY1F1ZXVlLnByb3RvdHlwZS5za2lwRGVsYXlzRm9yVGltZXJJZCA9IGZ1bmN0aW9uICh0aW1lcklkKSB7XHJcbiAgICAgICAgdGhpcy50aW1lcklkc1RvU2tpcC5wdXNoKHRpbWVySWQpO1xyXG4gICAgfTtcclxuICAgIC8qKiBDYWxsZWQgb25jZSBhIERlbGF5ZWRPcGVyYXRpb24gaXMgcnVuIG9yIGNhbmNlbGVkLiAqL1xyXG4gICAgQXN5bmNRdWV1ZS5wcm90b3R5cGUucmVtb3ZlRGVsYXllZE9wZXJhdGlvbiA9IGZ1bmN0aW9uIChvcCkge1xyXG4gICAgICAgIC8vIE5PVEU6IGluZGV4T2YgLyBzbGljZSBhcmUgTyhuKSwgYnV0IGRlbGF5ZWRPcGVyYXRpb25zIGlzIGV4cGVjdGVkIHRvIGJlIHNtYWxsLlxyXG4gICAgICAgIHZhciBpbmRleCA9IHRoaXMuZGVsYXllZE9wZXJhdGlvbnMuaW5kZXhPZihvcCk7XHJcbiAgICAgICAgYXNzZXJ0KGluZGV4ID49IDAsICdEZWxheWVkIG9wZXJhdGlvbiBub3QgZm91bmQuJyk7XHJcbiAgICAgICAgdGhpcy5kZWxheWVkT3BlcmF0aW9ucy5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBBc3luY1F1ZXVlO1xyXG59KCkpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxudmFyIGVzY2FwZUNoYXIgPSAnXFx1MDAwMSc7XHJcbnZhciBlbmNvZGVkU2VwYXJhdG9yQ2hhciA9ICdcXHUwMDAxJztcclxudmFyIGVuY29kZWROdWwgPSAnXFx1MDAxMCc7XHJcbnZhciBlbmNvZGVkRXNjYXBlID0gJ1xcdTAwMTEnO1xyXG4vKipcclxuICogRW5jb2RlcyBhIHJlc291cmNlIHBhdGggaW50byBhIEluZGV4ZWREYi1jb21wYXRpYmxlIHN0cmluZyBmb3JtLlxyXG4gKi9cclxuZnVuY3Rpb24gZW5jb2RlKHBhdGgpIHtcclxuICAgIHZhciByZXN1bHQgPSAnJztcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcGF0aC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGlmIChyZXN1bHQubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICByZXN1bHQgPSBlbmNvZGVTZXBhcmF0b3IocmVzdWx0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmVzdWx0ID0gZW5jb2RlU2VnbWVudChwYXRoLmdldChpKSwgcmVzdWx0KTtcclxuICAgIH1cclxuICAgIHJldHVybiBlbmNvZGVTZXBhcmF0b3IocmVzdWx0KTtcclxufVxyXG4vKiogRW5jb2RlcyBhIHNpbmdsZSBzZWdtZW50IG9mIGEgcmVzb3VyY2UgcGF0aCBpbnRvIHRoZSBnaXZlbiByZXN1bHQgKi9cclxuZnVuY3Rpb24gZW5jb2RlU2VnbWVudChzZWdtZW50LCByZXN1bHRCdWYpIHtcclxuICAgIHZhciByZXN1bHQgPSByZXN1bHRCdWY7XHJcbiAgICB2YXIgbGVuZ3RoID0gc2VnbWVudC5sZW5ndGg7XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgdmFyIGMgPSBzZWdtZW50LmNoYXJBdChpKTtcclxuICAgICAgICBzd2l0Y2ggKGMpIHtcclxuICAgICAgICAgICAgY2FzZSAnXFwwJzpcclxuICAgICAgICAgICAgICAgIHJlc3VsdCArPSBlc2NhcGVDaGFyICsgZW5jb2RlZE51bDtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIGVzY2FwZUNoYXI6XHJcbiAgICAgICAgICAgICAgICByZXN1bHQgKz0gZXNjYXBlQ2hhciArIGVuY29kZWRFc2NhcGU7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIHJlc3VsdCArPSBjO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiByZXN1bHQ7XHJcbn1cclxuLyoqIEVuY29kZXMgYSBwYXRoIHNlcGFyYXRvciBpbnRvIHRoZSBnaXZlbiByZXN1bHQgKi9cclxuZnVuY3Rpb24gZW5jb2RlU2VwYXJhdG9yKHJlc3VsdCkge1xyXG4gICAgcmV0dXJuIHJlc3VsdCArIGVzY2FwZUNoYXIgKyBlbmNvZGVkU2VwYXJhdG9yQ2hhcjtcclxufVxyXG4vKipcclxuICogRGVjb2RlcyB0aGUgZ2l2ZW4gSW5kZXhlZERiLWNvbXBhdGlibGUgc3RyaW5nIGZvcm0gb2YgYSByZXNvdXJjZSBwYXRoIGludG9cclxuICogYSBSZXNvdXJjZVBhdGggaW5zdGFuY2UuIE5vdGUgdGhhdCB0aGlzIG1ldGhvZCBpcyBub3Qgc3VpdGFibGUgZm9yIHVzZSB3aXRoXHJcbiAqIGRlY29kaW5nIHJlc291cmNlIG5hbWVzIGZyb20gdGhlIHNlcnZlcjsgdGhvc2UgYXJlIE9uZSBQbGF0Zm9ybSBmb3JtYXRcclxuICogc3RyaW5ncy5cclxuICovXHJcbmZ1bmN0aW9uIGRlY29kZShwYXRoKSB7XHJcbiAgICAvLyBFdmVudCB0aGUgZW1wdHkgcGF0aCBtdXN0IGVuY29kZSBhcyBhIHBhdGggb2YgYXQgbGVhc3QgbGVuZ3RoIDIuIEEgcGF0aFxyXG4gICAgLy8gd2l0aCBleGFjdGx5IDIgbXVzdCBiZSB0aGUgZW1wdHkgcGF0aC5cclxuICAgIHZhciBsZW5ndGggPSBwYXRoLmxlbmd0aDtcclxuICAgIGFzc2VydChsZW5ndGggPj0gMiwgJ0ludmFsaWQgcGF0aCAnICsgcGF0aCk7XHJcbiAgICBpZiAobGVuZ3RoID09PSAyKSB7XHJcbiAgICAgICAgYXNzZXJ0KHBhdGguY2hhckF0KDApID09PSBlc2NhcGVDaGFyICYmIHBhdGguY2hhckF0KDEpID09PSBlbmNvZGVkU2VwYXJhdG9yQ2hhciwgJ05vbi1lbXB0eSBwYXRoICcgKyBwYXRoICsgJyBoYWQgbGVuZ3RoIDInKTtcclxuICAgICAgICByZXR1cm4gUmVzb3VyY2VQYXRoLkVNUFRZX1BBVEg7XHJcbiAgICB9XHJcbiAgICAvLyBFc2NhcGUgY2hhcmFjdGVycyBjYW5ub3QgZXhpc3QgcGFzdCB0aGUgc2Vjb25kLXRvLWxhc3QgcG9zaXRpb24gaW4gdGhlXHJcbiAgICAvLyBzb3VyY2UgdmFsdWUuXHJcbiAgICB2YXIgbGFzdFJlYXNvbmFibGVFc2NhcGVJbmRleCA9IGxlbmd0aCAtIDI7XHJcbiAgICB2YXIgc2VnbWVudHMgPSBbXTtcclxuICAgIHZhciBzZWdtZW50QnVpbGRlciA9ICcnO1xyXG4gICAgZm9yICh2YXIgc3RhcnQgPSAwOyBzdGFydCA8IGxlbmd0aDspIHtcclxuICAgICAgICAvLyBUaGUgbGFzdCB0d28gY2hhcmFjdGVycyBvZiBhIHZhbGlkIGVuY29kZWQgcGF0aCBtdXN0IGJlIGEgc2VwYXJhdG9yLCBzb1xyXG4gICAgICAgIC8vIHRoZXJlIG11c3QgYmUgYW4gZW5kIHRvIHRoaXMgc2VnbWVudC5cclxuICAgICAgICB2YXIgZW5kID0gcGF0aC5pbmRleE9mKGVzY2FwZUNoYXIsIHN0YXJ0KTtcclxuICAgICAgICBpZiAoZW5kIDwgMCB8fCBlbmQgPiBsYXN0UmVhc29uYWJsZUVzY2FwZUluZGV4KSB7XHJcbiAgICAgICAgICAgIGZhaWwoJ0ludmFsaWQgZW5jb2RlZCByZXNvdXJjZSBwYXRoOiBcIicgKyBwYXRoICsgJ1wiJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBuZXh0ID0gcGF0aC5jaGFyQXQoZW5kICsgMSk7XHJcbiAgICAgICAgc3dpdGNoIChuZXh0KSB7XHJcbiAgICAgICAgICAgIGNhc2UgZW5jb2RlZFNlcGFyYXRvckNoYXI6XHJcbiAgICAgICAgICAgICAgICB2YXIgY3VycmVudFBpZWNlID0gcGF0aC5zdWJzdHJpbmcoc3RhcnQsIGVuZCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgc2VnbWVudCA9IHZvaWQgMDtcclxuICAgICAgICAgICAgICAgIGlmIChzZWdtZW50QnVpbGRlci5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBBdm9pZCBjb3B5aW5nIGZvciB0aGUgY29tbW9uIGNhc2Ugb2YgYSBzZWdtZW50IHRoYXQgZXhjbHVkZXMgXFwwXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gYW5kIFxcMDAxXHJcbiAgICAgICAgICAgICAgICAgICAgc2VnbWVudCA9IGN1cnJlbnRQaWVjZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHNlZ21lbnRCdWlsZGVyICs9IGN1cnJlbnRQaWVjZTtcclxuICAgICAgICAgICAgICAgICAgICBzZWdtZW50ID0gc2VnbWVudEJ1aWxkZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VnbWVudEJ1aWxkZXIgPSAnJztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHNlZ21lbnRzLnB1c2goc2VnbWVudCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBlbmNvZGVkTnVsOlxyXG4gICAgICAgICAgICAgICAgc2VnbWVudEJ1aWxkZXIgKz0gcGF0aC5zdWJzdHJpbmcoc3RhcnQsIGVuZCk7XHJcbiAgICAgICAgICAgICAgICBzZWdtZW50QnVpbGRlciArPSAnXFwwJztcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIGVuY29kZWRFc2NhcGU6XHJcbiAgICAgICAgICAgICAgICAvLyBUaGUgZXNjYXBlIGNoYXJhY3RlciBjYW4gYmUgdXNlZCBpbiB0aGUgb3V0cHV0IHRvIGVuY29kZSBpdHNlbGYuXHJcbiAgICAgICAgICAgICAgICBzZWdtZW50QnVpbGRlciArPSBwYXRoLnN1YnN0cmluZyhzdGFydCwgZW5kICsgMSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIGZhaWwoJ0ludmFsaWQgZW5jb2RlZCByZXNvdXJjZSBwYXRoOiBcIicgKyBwYXRoICsgJ1wiJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHN0YXJ0ID0gZW5kICsgMjtcclxuICAgIH1cclxuICAgIHJldHVybiBuZXcgUmVzb3VyY2VQYXRoKHNlZ21lbnRzKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxudmFyIFRpbWVzdGFtcCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFRpbWVzdGFtcChzZWNvbmRzLCBuYW5vc2Vjb25kcykge1xyXG4gICAgICAgIHRoaXMuc2Vjb25kcyA9IHNlY29uZHM7XHJcbiAgICAgICAgdGhpcy5uYW5vc2Vjb25kcyA9IG5hbm9zZWNvbmRzO1xyXG4gICAgICAgIGlmIChuYW5vc2Vjb25kcyA8IDApIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuSU5WQUxJRF9BUkdVTUVOVCwgJ1RpbWVzdGFtcCBuYW5vc2Vjb25kcyBvdXQgb2YgcmFuZ2U6ICcgKyBuYW5vc2Vjb25kcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChuYW5vc2Vjb25kcyA+PSAxZTkpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuSU5WQUxJRF9BUkdVTUVOVCwgJ1RpbWVzdGFtcCBuYW5vc2Vjb25kcyBvdXQgb2YgcmFuZ2U6ICcgKyBuYW5vc2Vjb25kcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIE1pZG5pZ2h0IGF0IHRoZSBiZWdpbm5pbmcgb2YgMS8xLzEgaXMgdGhlIGVhcmxpZXN0IEZpcmVzdG9yZSBzdXBwb3J0cy5cclxuICAgICAgICBpZiAoc2Vjb25kcyA8IC02MjEzNTU5NjgwMCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5JTlZBTElEX0FSR1VNRU5ULCAnVGltZXN0YW1wIHNlY29uZHMgb3V0IG9mIHJhbmdlOiAnICsgc2Vjb25kcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFRoaXMgd2lsbCBicmVhayBpbiB0aGUgeWVhciAxMCwwMDAuXHJcbiAgICAgICAgaWYgKHNlY29uZHMgPj0gMjUzNDAyMzAwODAwKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLklOVkFMSURfQVJHVU1FTlQsICdUaW1lc3RhbXAgc2Vjb25kcyBvdXQgb2YgcmFuZ2U6ICcgKyBzZWNvbmRzKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBUaW1lc3RhbXAubm93ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBUaW1lc3RhbXAuZnJvbU1pbGxpcyhEYXRlLm5vdygpKTtcclxuICAgIH07XHJcbiAgICBUaW1lc3RhbXAuZnJvbURhdGUgPSBmdW5jdGlvbiAoZGF0ZSkge1xyXG4gICAgICAgIHJldHVybiBUaW1lc3RhbXAuZnJvbU1pbGxpcyhkYXRlLmdldFRpbWUoKSk7XHJcbiAgICB9O1xyXG4gICAgVGltZXN0YW1wLmZyb21NaWxsaXMgPSBmdW5jdGlvbiAobWlsbGlzZWNvbmRzKSB7XHJcbiAgICAgICAgdmFyIHNlY29uZHMgPSBNYXRoLmZsb29yKG1pbGxpc2Vjb25kcyAvIDEwMDApO1xyXG4gICAgICAgIHZhciBuYW5vcyA9IChtaWxsaXNlY29uZHMgLSBzZWNvbmRzICogMTAwMCkgKiAxZTY7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBUaW1lc3RhbXAoc2Vjb25kcywgbmFub3MpO1xyXG4gICAgfTtcclxuICAgIFRpbWVzdGFtcC5wcm90b3R5cGUudG9EYXRlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgRGF0ZSh0aGlzLnRvTWlsbGlzKCkpO1xyXG4gICAgfTtcclxuICAgIFRpbWVzdGFtcC5wcm90b3R5cGUudG9NaWxsaXMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc2Vjb25kcyAqIDEwMDAgKyB0aGlzLm5hbm9zZWNvbmRzIC8gMWU2O1xyXG4gICAgfTtcclxuICAgIFRpbWVzdGFtcC5wcm90b3R5cGUuX2NvbXBhcmVUbyA9IGZ1bmN0aW9uIChvdGhlcikge1xyXG4gICAgICAgIGlmICh0aGlzLnNlY29uZHMgPT09IG90aGVyLnNlY29uZHMpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHByaW1pdGl2ZUNvbXBhcmF0b3IodGhpcy5uYW5vc2Vjb25kcywgb3RoZXIubmFub3NlY29uZHMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcHJpbWl0aXZlQ29tcGFyYXRvcih0aGlzLnNlY29uZHMsIG90aGVyLnNlY29uZHMpO1xyXG4gICAgfTtcclxuICAgIFRpbWVzdGFtcC5wcm90b3R5cGUuaXNFcXVhbCA9IGZ1bmN0aW9uIChvdGhlcikge1xyXG4gICAgICAgIHJldHVybiAob3RoZXIuc2Vjb25kcyA9PT0gdGhpcy5zZWNvbmRzICYmIG90aGVyLm5hbm9zZWNvbmRzID09PSB0aGlzLm5hbm9zZWNvbmRzKTtcclxuICAgIH07XHJcbiAgICBUaW1lc3RhbXAucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiAoJ1RpbWVzdGFtcChzZWNvbmRzPScgK1xyXG4gICAgICAgICAgICB0aGlzLnNlY29uZHMgK1xyXG4gICAgICAgICAgICAnLCBuYW5vc2Vjb25kcz0nICtcclxuICAgICAgICAgICAgdGhpcy5uYW5vc2Vjb25kcyArXHJcbiAgICAgICAgICAgICcpJyk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFRpbWVzdGFtcDtcclxufSgpKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBBIHZlcnNpb24gb2YgYSBkb2N1bWVudCBpbiBGaXJlc3RvcmUuIFRoaXMgY29ycmVzcG9uZHMgdG8gdGhlIHZlcnNpb25cclxuICogdGltZXN0YW1wLCBzdWNoIGFzIHVwZGF0ZV90aW1lIG9yIHJlYWRfdGltZS5cclxuICovXHJcbnZhciBTbmFwc2hvdFZlcnNpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBTbmFwc2hvdFZlcnNpb24odGltZXN0YW1wKSB7XHJcbiAgICAgICAgdGhpcy50aW1lc3RhbXAgPSB0aW1lc3RhbXA7XHJcbiAgICB9XHJcbiAgICAvLyBUT0RPKGIvMzQxNzYzNDQpOiBPbmNlIHdlIG5vIGxvbmdlciBuZWVkIHRvIHVzZSB0aGUgb2xkIGFscGhhIHByb3RvcyxcclxuICAgIC8vIGRlbGV0ZSB0aGlzIGNvbnN0cnVjdG9yIGFuZCB1c2UgYSB0aW1lc3RhbXAtYmFja2VkIHZlcnNpb24gZXZlcnl3aGVyZS5cclxuICAgIFNuYXBzaG90VmVyc2lvbi5mcm9tTWljcm9zZWNvbmRzID0gZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgICAgdmFyIHNlY29uZHMgPSBNYXRoLmZsb29yKHZhbHVlIC8gMWU2KTtcclxuICAgICAgICB2YXIgbmFub3MgPSAodmFsdWUgJSAxZTYpICogMWUzO1xyXG4gICAgICAgIHJldHVybiBuZXcgU25hcHNob3RWZXJzaW9uKG5ldyBUaW1lc3RhbXAoc2Vjb25kcywgbmFub3MpKTtcclxuICAgIH07XHJcbiAgICBTbmFwc2hvdFZlcnNpb24uZnJvbVRpbWVzdGFtcCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgIHJldHVybiBuZXcgU25hcHNob3RWZXJzaW9uKHZhbHVlKTtcclxuICAgIH07XHJcbiAgICBTbmFwc2hvdFZlcnNpb24uZm9yRGVsZXRlZERvYyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gU25hcHNob3RWZXJzaW9uLk1JTjtcclxuICAgIH07XHJcbiAgICBTbmFwc2hvdFZlcnNpb24ucHJvdG90eXBlLmNvbXBhcmVUbyA9IGZ1bmN0aW9uIChvdGhlcikge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnRpbWVzdGFtcC5fY29tcGFyZVRvKG90aGVyLnRpbWVzdGFtcCk7XHJcbiAgICB9O1xyXG4gICAgU25hcHNob3RWZXJzaW9uLnByb3RvdHlwZS5pc0VxdWFsID0gZnVuY3Rpb24gKG90aGVyKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudGltZXN0YW1wLmlzRXF1YWwob3RoZXIudGltZXN0YW1wKTtcclxuICAgIH07XHJcbiAgICAvKiogUmV0dXJucyBhIG51bWJlciByZXByZXNlbnRhdGlvbiBvZiB0aGUgdmVyc2lvbiBmb3IgdXNlIGluIHNwZWMgdGVzdHMuICovXHJcbiAgICBTbmFwc2hvdFZlcnNpb24ucHJvdG90eXBlLnRvTWljcm9zZWNvbmRzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vIENvbnZlcnQgdG8gbWljcm9zZWNvbmRzLlxyXG4gICAgICAgIHJldHVybiB0aGlzLnRpbWVzdGFtcC5zZWNvbmRzICogMWU2ICsgdGhpcy50aW1lc3RhbXAubmFub3NlY29uZHMgLyAxMDAwO1xyXG4gICAgfTtcclxuICAgIFNuYXBzaG90VmVyc2lvbi5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuICdTbmFwc2hvdFZlcnNpb24oJyArIHRoaXMudGltZXN0YW1wLnRvU3RyaW5nKCkgKyAnKSc7XHJcbiAgICB9O1xyXG4gICAgU25hcHNob3RWZXJzaW9uLnByb3RvdHlwZS50b1RpbWVzdGFtcCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy50aW1lc3RhbXA7XHJcbiAgICB9O1xyXG4gICAgU25hcHNob3RWZXJzaW9uLk1JTiA9IG5ldyBTbmFwc2hvdFZlcnNpb24obmV3IFRpbWVzdGFtcCgwLCAwKSk7XHJcbiAgICByZXR1cm4gU25hcHNob3RWZXJzaW9uO1xyXG59KCkpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLy8gQW4gaW1tdXRhYmxlIHNvcnRlZCBtYXAgaW1wbGVtZW50YXRpb24sIGJhc2VkIG9uIGEgTGVmdC1sZWFuaW5nIFJlZC1CbGFja1xyXG4vLyB0cmVlLlxyXG52YXIgU29ydGVkTWFwID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gU29ydGVkTWFwKGNvbXBhcmF0b3IsIHJvb3QpIHtcclxuICAgICAgICB0aGlzLmNvbXBhcmF0b3IgPSBjb21wYXJhdG9yO1xyXG4gICAgICAgIHRoaXMucm9vdCA9IHJvb3QgPyByb290IDogTExSQk5vZGUuRU1QVFk7XHJcbiAgICB9XHJcbiAgICAvLyBSZXR1cm5zIGEgY29weSBvZiB0aGUgbWFwLCB3aXRoIHRoZSBzcGVjaWZpZWQga2V5L3ZhbHVlIGFkZGVkIG9yIHJlcGxhY2VkLlxyXG4gICAgU29ydGVkTWFwLnByb3RvdHlwZS5pbnNlcnQgPSBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xyXG4gICAgICAgIHJldHVybiBuZXcgU29ydGVkTWFwKHRoaXMuY29tcGFyYXRvciwgdGhpcy5yb290XHJcbiAgICAgICAgICAgIC5pbnNlcnQoa2V5LCB2YWx1ZSwgdGhpcy5jb21wYXJhdG9yKVxyXG4gICAgICAgICAgICAuY29weShudWxsLCBudWxsLCBMTFJCTm9kZS5CTEFDSywgbnVsbCwgbnVsbCkpO1xyXG4gICAgfTtcclxuICAgIC8vIFJldHVybnMgYSBjb3B5IG9mIHRoZSBtYXAsIHdpdGggdGhlIHNwZWNpZmllZCBrZXkgcmVtb3ZlZC5cclxuICAgIFNvcnRlZE1hcC5wcm90b3R5cGUucmVtb3ZlID0gZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgIHJldHVybiBuZXcgU29ydGVkTWFwKHRoaXMuY29tcGFyYXRvciwgdGhpcy5yb290XHJcbiAgICAgICAgICAgIC5yZW1vdmUoa2V5LCB0aGlzLmNvbXBhcmF0b3IpXHJcbiAgICAgICAgICAgIC5jb3B5KG51bGwsIG51bGwsIExMUkJOb2RlLkJMQUNLLCBudWxsLCBudWxsKSk7XHJcbiAgICB9O1xyXG4gICAgLy8gUmV0dXJucyB0aGUgdmFsdWUgb2YgdGhlIG5vZGUgd2l0aCB0aGUgZ2l2ZW4ga2V5LCBvciBudWxsLlxyXG4gICAgU29ydGVkTWFwLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgICAgdmFyIG5vZGUgPSB0aGlzLnJvb3Q7XHJcbiAgICAgICAgd2hpbGUgKCFub2RlLmlzRW1wdHkoKSkge1xyXG4gICAgICAgICAgICB2YXIgY21wID0gdGhpcy5jb21wYXJhdG9yKGtleSwgbm9kZS5rZXkpO1xyXG4gICAgICAgICAgICBpZiAoY21wID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbm9kZS52YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChjbXAgPCAwKSB7XHJcbiAgICAgICAgICAgICAgICBub2RlID0gbm9kZS5sZWZ0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGNtcCA+IDApIHtcclxuICAgICAgICAgICAgICAgIG5vZGUgPSBub2RlLnJpZ2h0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfTtcclxuICAgIC8vIFJldHVybnMgdGhlIGluZGV4IG9mIHRoZSBlbGVtZW50IGluIHRoaXMgc29ydGVkIG1hcCwgb3IgLTEgaWYgaXQgZG9lc24ndFxyXG4gICAgLy8gZXhpc3QuXHJcbiAgICBTb3J0ZWRNYXAucHJvdG90eXBlLmluZGV4T2YgPSBmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgICAgLy8gTnVtYmVyIG9mIG5vZGVzIHRoYXQgd2VyZSBwcnVuZWQgd2hlbiBkZXNjZW5kaW5nIHJpZ2h0XHJcbiAgICAgICAgdmFyIHBydW5lZE5vZGVzID0gMDtcclxuICAgICAgICB2YXIgbm9kZSA9IHRoaXMucm9vdDtcclxuICAgICAgICB3aGlsZSAoIW5vZGUuaXNFbXB0eSgpKSB7XHJcbiAgICAgICAgICAgIHZhciBjbXAgPSB0aGlzLmNvbXBhcmF0b3Ioa2V5LCBub2RlLmtleSk7XHJcbiAgICAgICAgICAgIGlmIChjbXAgPT09IDApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBwcnVuZWROb2RlcyArIG5vZGUubGVmdC5zaXplO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGNtcCA8IDApIHtcclxuICAgICAgICAgICAgICAgIG5vZGUgPSBub2RlLmxlZnQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBDb3VudCBhbGwgbm9kZXMgbGVmdCBvZiB0aGUgbm9kZSBwbHVzIHRoZSBub2RlIGl0c2VsZlxyXG4gICAgICAgICAgICAgICAgcHJ1bmVkTm9kZXMgKz0gbm9kZS5sZWZ0LnNpemUgKyAxO1xyXG4gICAgICAgICAgICAgICAgbm9kZSA9IG5vZGUucmlnaHQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gTm9kZSBub3QgZm91bmRcclxuICAgICAgICByZXR1cm4gLTE7XHJcbiAgICB9O1xyXG4gICAgU29ydGVkTWFwLnByb3RvdHlwZS5pc0VtcHR5ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnJvb3QuaXNFbXB0eSgpO1xyXG4gICAgfTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTb3J0ZWRNYXAucHJvdG90eXBlLCBcInNpemVcIiwge1xyXG4gICAgICAgIC8vIFJldHVybnMgdGhlIHRvdGFsIG51bWJlciBvZiBub2RlcyBpbiB0aGUgbWFwLlxyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yb290LnNpemU7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICAvLyBSZXR1cm5zIHRoZSBtaW5pbXVtIGtleSBpbiB0aGUgbWFwLlxyXG4gICAgU29ydGVkTWFwLnByb3RvdHlwZS5taW5LZXkgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucm9vdC5taW5LZXkoKTtcclxuICAgIH07XHJcbiAgICAvLyBSZXR1cm5zIHRoZSBtYXhpbXVtIGtleSBpbiB0aGUgbWFwLlxyXG4gICAgU29ydGVkTWFwLnByb3RvdHlwZS5tYXhLZXkgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucm9vdC5tYXhLZXkoKTtcclxuICAgIH07XHJcbiAgICAvLyBUcmF2ZXJzZXMgdGhlIG1hcCBpbiBrZXkgb3JkZXIgYW5kIGNhbGxzIHRoZSBzcGVjaWZpZWQgYWN0aW9uIGZ1bmN0aW9uXHJcbiAgICAvLyBmb3IgZWFjaCBrZXkvdmFsdWUgcGFpci4gSWYgYWN0aW9uIHJldHVybnMgdHJ1ZSwgdHJhdmVyc2FsIGlzIGFib3J0ZWQuXHJcbiAgICAvLyBSZXR1cm5zIHRoZSBmaXJzdCB0cnV0aHkgdmFsdWUgcmV0dXJuZWQgYnkgYWN0aW9uLCBvciB0aGUgbGFzdCBmYWxzZXlcclxuICAgIC8vIHZhbHVlIHJldHVybmVkIGJ5IGFjdGlvbi5cclxuICAgIFNvcnRlZE1hcC5wcm90b3R5cGUuaW5vcmRlclRyYXZlcnNhbCA9IGZ1bmN0aW9uIChhY3Rpb24pIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5yb290Lmlub3JkZXJUcmF2ZXJzYWwoYWN0aW9uKTtcclxuICAgIH07XHJcbiAgICBTb3J0ZWRNYXAucHJvdG90eXBlLmZvckVhY2ggPSBmdW5jdGlvbiAoZm4pIHtcclxuICAgICAgICB0aGlzLmlub3JkZXJUcmF2ZXJzYWwoZnVuY3Rpb24gKGssIHYpIHtcclxuICAgICAgICAgICAgZm4oaywgdik7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBTb3J0ZWRNYXAucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBkZXNjcmlwdGlvbnMgPSBbXTtcclxuICAgICAgICB0aGlzLmlub3JkZXJUcmF2ZXJzYWwoZnVuY3Rpb24gKGssIHYpIHtcclxuICAgICAgICAgICAgZGVzY3JpcHRpb25zLnB1c2goayArIFwiOlwiICsgdik7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gXCJ7XCIgKyBkZXNjcmlwdGlvbnMuam9pbignLCAnKSArIFwifVwiO1xyXG4gICAgfTtcclxuICAgIC8vIFRyYXZlcnNlcyB0aGUgbWFwIGluIHJldmVyc2Uga2V5IG9yZGVyIGFuZCBjYWxscyB0aGUgc3BlY2lmaWVkIGFjdGlvblxyXG4gICAgLy8gZnVuY3Rpb24gZm9yIGVhY2gga2V5L3ZhbHVlIHBhaXIuIElmIGFjdGlvbiByZXR1cm5zIHRydWUsIHRyYXZlcnNhbCBpc1xyXG4gICAgLy8gYWJvcnRlZC5cclxuICAgIC8vIFJldHVybnMgdGhlIGZpcnN0IHRydXRoeSB2YWx1ZSByZXR1cm5lZCBieSBhY3Rpb24sIG9yIHRoZSBsYXN0IGZhbHNleVxyXG4gICAgLy8gdmFsdWUgcmV0dXJuZWQgYnkgYWN0aW9uLlxyXG4gICAgU29ydGVkTWFwLnByb3RvdHlwZS5yZXZlcnNlVHJhdmVyc2FsID0gZnVuY3Rpb24gKGFjdGlvbikge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnJvb3QucmV2ZXJzZVRyYXZlcnNhbChhY3Rpb24pO1xyXG4gICAgfTtcclxuICAgIC8vIFJldHVybnMgYW4gaXRlcmF0b3Igb3ZlciB0aGUgU29ydGVkTWFwLlxyXG4gICAgU29ydGVkTWFwLnByb3RvdHlwZS5nZXRJdGVyYXRvciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFNvcnRlZE1hcEl0ZXJhdG9yKHRoaXMucm9vdCwgbnVsbCwgdGhpcy5jb21wYXJhdG9yLCBmYWxzZSk7XHJcbiAgICB9O1xyXG4gICAgU29ydGVkTWFwLnByb3RvdHlwZS5nZXRJdGVyYXRvckZyb20gPSBmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBTb3J0ZWRNYXBJdGVyYXRvcih0aGlzLnJvb3QsIGtleSwgdGhpcy5jb21wYXJhdG9yLCBmYWxzZSk7XHJcbiAgICB9O1xyXG4gICAgU29ydGVkTWFwLnByb3RvdHlwZS5nZXRSZXZlcnNlSXRlcmF0b3IgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBTb3J0ZWRNYXBJdGVyYXRvcih0aGlzLnJvb3QsIG51bGwsIHRoaXMuY29tcGFyYXRvciwgdHJ1ZSk7XHJcbiAgICB9O1xyXG4gICAgU29ydGVkTWFwLnByb3RvdHlwZS5nZXRSZXZlcnNlSXRlcmF0b3JGcm9tID0gZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgIHJldHVybiBuZXcgU29ydGVkTWFwSXRlcmF0b3IodGhpcy5yb290LCBrZXksIHRoaXMuY29tcGFyYXRvciwgdHJ1ZSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFNvcnRlZE1hcDtcclxufSgpKTsgLy8gZW5kIFNvcnRlZE1hcFxyXG4vLyBBbiBpdGVyYXRvciBvdmVyIGFuIExMUkJOb2RlLlxyXG52YXIgU29ydGVkTWFwSXRlcmF0b3IgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBTb3J0ZWRNYXBJdGVyYXRvcihub2RlLCBzdGFydEtleSwgY29tcGFyYXRvciwgaXNSZXZlcnNlKSB7XHJcbiAgICAgICAgdGhpcy5pc1JldmVyc2UgPSBpc1JldmVyc2U7XHJcbiAgICAgICAgdGhpcy5ub2RlU3RhY2sgPSBbXTtcclxuICAgICAgICB2YXIgY21wID0gMTtcclxuICAgICAgICB3aGlsZSAoIW5vZGUuaXNFbXB0eSgpKSB7XHJcbiAgICAgICAgICAgIGNtcCA9IHN0YXJ0S2V5ID8gY29tcGFyYXRvcihub2RlLmtleSwgc3RhcnRLZXkpIDogMTtcclxuICAgICAgICAgICAgLy8gZmxpcCB0aGUgY29tcGFyaXNvbiBpZiB3ZSdyZSBnb2luZyBpbiByZXZlcnNlXHJcbiAgICAgICAgICAgIGlmIChpc1JldmVyc2UpIHtcclxuICAgICAgICAgICAgICAgIGNtcCAqPSAtMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoY21wIDwgMCkge1xyXG4gICAgICAgICAgICAgICAgLy8gVGhpcyBub2RlIGlzIGxlc3MgdGhhbiBvdXIgc3RhcnQga2V5LiBpZ25vcmUgaXRcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzUmV2ZXJzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG5vZGUgPSBub2RlLmxlZnQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBub2RlID0gbm9kZS5yaWdodDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChjbXAgPT09IDApIHtcclxuICAgICAgICAgICAgICAgIC8vIFRoaXMgbm9kZSBpcyBleGFjdGx5IGVxdWFsIHRvIG91ciBzdGFydCBrZXkuIFB1c2ggaXQgb24gdGhlIHN0YWNrLFxyXG4gICAgICAgICAgICAgICAgLy8gYnV0IHN0b3AgaXRlcmF0aW5nO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ub2RlU3RhY2sucHVzaChub2RlKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gVGhpcyBub2RlIGlzIGdyZWF0ZXIgdGhhbiBvdXIgc3RhcnQga2V5LCBhZGQgaXQgdG8gdGhlIHN0YWNrIGFuZCBtb3ZlXHJcbiAgICAgICAgICAgICAgICAvLyB0byB0aGUgbmV4dCBvbmVcclxuICAgICAgICAgICAgICAgIHRoaXMubm9kZVN0YWNrLnB1c2gobm9kZSk7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pc1JldmVyc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICBub2RlID0gbm9kZS5yaWdodDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIG5vZGUgPSBub2RlLmxlZnQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBTb3J0ZWRNYXBJdGVyYXRvci5wcm90b3R5cGUuZ2V0TmV4dCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBhc3NlcnQodGhpcy5ub2RlU3RhY2subGVuZ3RoID4gMCwgJ2dldE5leHQoKSBjYWxsZWQgb24gaXRlcmF0b3Igd2hlbiBoYXNOZXh0KCkgaXMgZmFsc2UuJyk7XHJcbiAgICAgICAgdmFyIG5vZGUgPSB0aGlzLm5vZGVTdGFjay5wb3AoKTtcclxuICAgICAgICB2YXIgcmVzdWx0ID0geyBrZXk6IG5vZGUua2V5LCB2YWx1ZTogbm9kZS52YWx1ZSB9O1xyXG4gICAgICAgIGlmICh0aGlzLmlzUmV2ZXJzZSkge1xyXG4gICAgICAgICAgICBub2RlID0gbm9kZS5sZWZ0O1xyXG4gICAgICAgICAgICB3aGlsZSAoIW5vZGUuaXNFbXB0eSgpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm5vZGVTdGFjay5wdXNoKG5vZGUpO1xyXG4gICAgICAgICAgICAgICAgbm9kZSA9IG5vZGUucmlnaHQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIG5vZGUgPSBub2RlLnJpZ2h0O1xyXG4gICAgICAgICAgICB3aGlsZSAoIW5vZGUuaXNFbXB0eSgpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm5vZGVTdGFjay5wdXNoKG5vZGUpO1xyXG4gICAgICAgICAgICAgICAgbm9kZSA9IG5vZGUubGVmdDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfTtcclxuICAgIFNvcnRlZE1hcEl0ZXJhdG9yLnByb3RvdHlwZS5oYXNOZXh0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm5vZGVTdGFjay5sZW5ndGggPiAwO1xyXG4gICAgfTtcclxuICAgIFNvcnRlZE1hcEl0ZXJhdG9yLnByb3RvdHlwZS5wZWVrID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICh0aGlzLm5vZGVTdGFjay5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBub2RlID0gdGhpcy5ub2RlU3RhY2tbdGhpcy5ub2RlU3RhY2subGVuZ3RoIC0gMV07XHJcbiAgICAgICAgcmV0dXJuIHsga2V5OiBub2RlLmtleSwgdmFsdWU6IG5vZGUudmFsdWUgfTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gU29ydGVkTWFwSXRlcmF0b3I7XHJcbn0oKSk7IC8vIGVuZCBTb3J0ZWRNYXBJdGVyYXRvclxyXG4vLyBSZXByZXNlbnRzIGEgbm9kZSBpbiBhIExlZnQtbGVhbmluZyBSZWQtQmxhY2sgdHJlZS5cclxudmFyIExMUkJOb2RlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gTExSQk5vZGUoa2V5LCB2YWx1ZSwgY29sb3IsIGxlZnQsIHJpZ2h0KSB7XHJcbiAgICAgICAgdGhpcy5rZXkgPSBrZXk7XHJcbiAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xyXG4gICAgICAgIHRoaXMuY29sb3IgPSBjb2xvciAhPSBudWxsID8gY29sb3IgOiBMTFJCTm9kZS5SRUQ7XHJcbiAgICAgICAgdGhpcy5sZWZ0ID0gbGVmdCAhPSBudWxsID8gbGVmdCA6IExMUkJOb2RlLkVNUFRZO1xyXG4gICAgICAgIHRoaXMucmlnaHQgPSByaWdodCAhPSBudWxsID8gcmlnaHQgOiBMTFJCTm9kZS5FTVBUWTtcclxuICAgICAgICB0aGlzLnNpemUgPSB0aGlzLmxlZnQuc2l6ZSArIDEgKyB0aGlzLnJpZ2h0LnNpemU7XHJcbiAgICB9XHJcbiAgICAvLyBSZXR1cm5zIGEgY29weSBvZiB0aGUgY3VycmVudCBub2RlLCBvcHRpb25hbGx5IHJlcGxhY2luZyBwaWVjZXMgb2YgaXQuXHJcbiAgICBMTFJCTm9kZS5wcm90b3R5cGUuY29weSA9IGZ1bmN0aW9uIChrZXksIHZhbHVlLCBjb2xvciwgbGVmdCwgcmlnaHQpIHtcclxuICAgICAgICByZXR1cm4gbmV3IExMUkJOb2RlKGtleSAhPSBudWxsID8ga2V5IDogdGhpcy5rZXksIHZhbHVlICE9IG51bGwgPyB2YWx1ZSA6IHRoaXMudmFsdWUsIGNvbG9yICE9IG51bGwgPyBjb2xvciA6IHRoaXMuY29sb3IsIGxlZnQgIT0gbnVsbCA/IGxlZnQgOiB0aGlzLmxlZnQsIHJpZ2h0ICE9IG51bGwgPyByaWdodCA6IHRoaXMucmlnaHQpO1xyXG4gICAgfTtcclxuICAgIExMUkJOb2RlLnByb3RvdHlwZS5pc0VtcHR5ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH07XHJcbiAgICAvLyBUcmF2ZXJzZXMgdGhlIHRyZWUgaW4ga2V5IG9yZGVyIGFuZCBjYWxscyB0aGUgc3BlY2lmaWVkIGFjdGlvbiBmdW5jdGlvblxyXG4gICAgLy8gZm9yIGVhY2ggbm9kZS4gSWYgYWN0aW9uIHJldHVybnMgdHJ1ZSwgdHJhdmVyc2FsIGlzIGFib3J0ZWQuXHJcbiAgICAvLyBSZXR1cm5zIHRoZSBmaXJzdCB0cnV0aHkgdmFsdWUgcmV0dXJuZWQgYnkgYWN0aW9uLCBvciB0aGUgbGFzdCBmYWxzZXlcclxuICAgIC8vIHZhbHVlIHJldHVybmVkIGJ5IGFjdGlvbi5cclxuICAgIExMUkJOb2RlLnByb3RvdHlwZS5pbm9yZGVyVHJhdmVyc2FsID0gZnVuY3Rpb24gKGFjdGlvbikge1xyXG4gICAgICAgIHJldHVybiAodGhpcy5sZWZ0Lmlub3JkZXJUcmF2ZXJzYWwoYWN0aW9uKSB8fFxyXG4gICAgICAgICAgICBhY3Rpb24odGhpcy5rZXksIHRoaXMudmFsdWUpIHx8XHJcbiAgICAgICAgICAgIHRoaXMucmlnaHQuaW5vcmRlclRyYXZlcnNhbChhY3Rpb24pKTtcclxuICAgIH07XHJcbiAgICAvLyBUcmF2ZXJzZXMgdGhlIHRyZWUgaW4gcmV2ZXJzZSBrZXkgb3JkZXIgYW5kIGNhbGxzIHRoZSBzcGVjaWZpZWQgYWN0aW9uXHJcbiAgICAvLyBmdW5jdGlvbiBmb3IgZWFjaCBub2RlLiBJZiBhY3Rpb24gcmV0dXJucyB0cnVlLCB0cmF2ZXJzYWwgaXMgYWJvcnRlZC5cclxuICAgIC8vIFJldHVybnMgdGhlIGZpcnN0IHRydXRoeSB2YWx1ZSByZXR1cm5lZCBieSBhY3Rpb24sIG9yIHRoZSBsYXN0IGZhbHNleVxyXG4gICAgLy8gdmFsdWUgcmV0dXJuZWQgYnkgYWN0aW9uLlxyXG4gICAgTExSQk5vZGUucHJvdG90eXBlLnJldmVyc2VUcmF2ZXJzYWwgPSBmdW5jdGlvbiAoYWN0aW9uKSB7XHJcbiAgICAgICAgcmV0dXJuICh0aGlzLnJpZ2h0LnJldmVyc2VUcmF2ZXJzYWwoYWN0aW9uKSB8fFxyXG4gICAgICAgICAgICBhY3Rpb24odGhpcy5rZXksIHRoaXMudmFsdWUpIHx8XHJcbiAgICAgICAgICAgIHRoaXMubGVmdC5yZXZlcnNlVHJhdmVyc2FsKGFjdGlvbikpO1xyXG4gICAgfTtcclxuICAgIC8vIFJldHVybnMgdGhlIG1pbmltdW0gbm9kZSBpbiB0aGUgdHJlZS5cclxuICAgIExMUkJOb2RlLnByb3RvdHlwZS5taW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMubGVmdC5pc0VtcHR5KCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5sZWZ0Lm1pbigpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvLyBSZXR1cm5zIHRoZSBtYXhpbXVtIGtleSBpbiB0aGUgdHJlZS5cclxuICAgIExMUkJOb2RlLnByb3RvdHlwZS5taW5LZXkgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubWluKCkua2V5O1xyXG4gICAgfTtcclxuICAgIC8vIFJldHVybnMgdGhlIG1heGltdW0ga2V5IGluIHRoZSB0cmVlLlxyXG4gICAgTExSQk5vZGUucHJvdG90eXBlLm1heEtleSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAodGhpcy5yaWdodC5pc0VtcHR5KCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMua2V5O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucmlnaHQubWF4S2V5KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8vIFJldHVybnMgbmV3IHRyZWUsIHdpdGggdGhlIGtleS92YWx1ZSBhZGRlZC5cclxuICAgIExMUkJOb2RlLnByb3RvdHlwZS5pbnNlcnQgPSBmdW5jdGlvbiAoa2V5LCB2YWx1ZSwgY29tcGFyYXRvcikge1xyXG4gICAgICAgIHZhciBuID0gdGhpcztcclxuICAgICAgICB2YXIgY21wID0gY29tcGFyYXRvcihrZXksIG4ua2V5KTtcclxuICAgICAgICBpZiAoY21wIDwgMCkge1xyXG4gICAgICAgICAgICBuID0gbi5jb3B5KG51bGwsIG51bGwsIG51bGwsIG4ubGVmdC5pbnNlcnQoa2V5LCB2YWx1ZSwgY29tcGFyYXRvciksIG51bGwpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChjbXAgPT09IDApIHtcclxuICAgICAgICAgICAgbiA9IG4uY29weShudWxsLCB2YWx1ZSwgbnVsbCwgbnVsbCwgbnVsbCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBuID0gbi5jb3B5KG51bGwsIG51bGwsIG51bGwsIG51bGwsIG4ucmlnaHQuaW5zZXJ0KGtleSwgdmFsdWUsIGNvbXBhcmF0b3IpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG4uZml4VXAoKTtcclxuICAgIH07XHJcbiAgICBMTFJCTm9kZS5wcm90b3R5cGUucmVtb3ZlTWluID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmxlZnQuaXNFbXB0eSgpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBMTFJCTm9kZS5FTVBUWTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIG4gPSB0aGlzO1xyXG4gICAgICAgIGlmICghbi5sZWZ0LmlzUmVkKCkgJiYgIW4ubGVmdC5sZWZ0LmlzUmVkKCkpIHtcclxuICAgICAgICAgICAgbiA9IG4ubW92ZVJlZExlZnQoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbiA9IG4uY29weShudWxsLCBudWxsLCBudWxsLCBuLmxlZnQucmVtb3ZlTWluKCksIG51bGwpO1xyXG4gICAgICAgIHJldHVybiBuLmZpeFVwKCk7XHJcbiAgICB9O1xyXG4gICAgLy8gUmV0dXJucyBuZXcgdHJlZSwgd2l0aCB0aGUgc3BlY2lmaWVkIGl0ZW0gcmVtb3ZlZC5cclxuICAgIExMUkJOb2RlLnByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbiAoa2V5LCBjb21wYXJhdG9yKSB7XHJcbiAgICAgICAgdmFyIHNtYWxsZXN0O1xyXG4gICAgICAgIHZhciBuID0gdGhpcztcclxuICAgICAgICBpZiAoY29tcGFyYXRvcihrZXksIG4ua2V5KSA8IDApIHtcclxuICAgICAgICAgICAgaWYgKCFuLmxlZnQuaXNFbXB0eSgpICYmICFuLmxlZnQuaXNSZWQoKSAmJiAhbi5sZWZ0LmxlZnQuaXNSZWQoKSkge1xyXG4gICAgICAgICAgICAgICAgbiA9IG4ubW92ZVJlZExlZnQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBuID0gbi5jb3B5KG51bGwsIG51bGwsIG51bGwsIG4ubGVmdC5yZW1vdmUoa2V5LCBjb21wYXJhdG9yKSwgbnVsbCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAobi5sZWZ0LmlzUmVkKCkpIHtcclxuICAgICAgICAgICAgICAgIG4gPSBuLnJvdGF0ZVJpZ2h0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKCFuLnJpZ2h0LmlzRW1wdHkoKSAmJiAhbi5yaWdodC5pc1JlZCgpICYmICFuLnJpZ2h0LmxlZnQuaXNSZWQoKSkge1xyXG4gICAgICAgICAgICAgICAgbiA9IG4ubW92ZVJlZFJpZ2h0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGNvbXBhcmF0b3Ioa2V5LCBuLmtleSkgPT09IDApIHtcclxuICAgICAgICAgICAgICAgIGlmIChuLnJpZ2h0LmlzRW1wdHkoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBMTFJCTm9kZS5FTVBUWTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHNtYWxsZXN0ID0gbi5yaWdodC5taW4oKTtcclxuICAgICAgICAgICAgICAgICAgICBuID0gbi5jb3B5KHNtYWxsZXN0LmtleSwgc21hbGxlc3QudmFsdWUsIG51bGwsIG51bGwsIG4ucmlnaHQucmVtb3ZlTWluKCkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG4gPSBuLmNvcHkobnVsbCwgbnVsbCwgbnVsbCwgbnVsbCwgbi5yaWdodC5yZW1vdmUoa2V5LCBjb21wYXJhdG9yKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBuLmZpeFVwKCk7XHJcbiAgICB9O1xyXG4gICAgTExSQk5vZGUucHJvdG90eXBlLmlzUmVkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNvbG9yO1xyXG4gICAgfTtcclxuICAgIC8vIFJldHVybnMgbmV3IHRyZWUgYWZ0ZXIgcGVyZm9ybWluZyBhbnkgbmVlZGVkIHJvdGF0aW9ucy5cclxuICAgIExMUkJOb2RlLnByb3RvdHlwZS5maXhVcCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgbiA9IHRoaXM7XHJcbiAgICAgICAgaWYgKG4ucmlnaHQuaXNSZWQoKSAmJiAhbi5sZWZ0LmlzUmVkKCkpIHtcclxuICAgICAgICAgICAgbiA9IG4ucm90YXRlTGVmdCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAobi5sZWZ0LmlzUmVkKCkgJiYgbi5sZWZ0LmxlZnQuaXNSZWQoKSkge1xyXG4gICAgICAgICAgICBuID0gbi5yb3RhdGVSaWdodCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAobi5sZWZ0LmlzUmVkKCkgJiYgbi5yaWdodC5pc1JlZCgpKSB7XHJcbiAgICAgICAgICAgIG4gPSBuLmNvbG9yRmxpcCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbjtcclxuICAgIH07XHJcbiAgICBMTFJCTm9kZS5wcm90b3R5cGUubW92ZVJlZExlZnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIG4gPSB0aGlzLmNvbG9yRmxpcCgpO1xyXG4gICAgICAgIGlmIChuLnJpZ2h0LmxlZnQuaXNSZWQoKSkge1xyXG4gICAgICAgICAgICBuID0gbi5jb3B5KG51bGwsIG51bGwsIG51bGwsIG51bGwsIG4ucmlnaHQucm90YXRlUmlnaHQoKSk7XHJcbiAgICAgICAgICAgIG4gPSBuLnJvdGF0ZUxlZnQoKTtcclxuICAgICAgICAgICAgbiA9IG4uY29sb3JGbGlwKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBuO1xyXG4gICAgfTtcclxuICAgIExMUkJOb2RlLnByb3RvdHlwZS5tb3ZlUmVkUmlnaHQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIG4gPSB0aGlzLmNvbG9yRmxpcCgpO1xyXG4gICAgICAgIGlmIChuLmxlZnQubGVmdC5pc1JlZCgpKSB7XHJcbiAgICAgICAgICAgIG4gPSBuLnJvdGF0ZVJpZ2h0KCk7XHJcbiAgICAgICAgICAgIG4gPSBuLmNvbG9yRmxpcCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbjtcclxuICAgIH07XHJcbiAgICBMTFJCTm9kZS5wcm90b3R5cGUucm90YXRlTGVmdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgbmwgPSB0aGlzLmNvcHkobnVsbCwgbnVsbCwgTExSQk5vZGUuUkVELCBudWxsLCB0aGlzLnJpZ2h0LmxlZnQpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnJpZ2h0LmNvcHkobnVsbCwgbnVsbCwgdGhpcy5jb2xvciwgbmwsIG51bGwpO1xyXG4gICAgfTtcclxuICAgIExMUkJOb2RlLnByb3RvdHlwZS5yb3RhdGVSaWdodCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgbnIgPSB0aGlzLmNvcHkobnVsbCwgbnVsbCwgTExSQk5vZGUuUkVELCB0aGlzLmxlZnQucmlnaHQsIG51bGwpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmxlZnQuY29weShudWxsLCBudWxsLCB0aGlzLmNvbG9yLCBudWxsLCBucik7XHJcbiAgICB9O1xyXG4gICAgTExSQk5vZGUucHJvdG90eXBlLmNvbG9yRmxpcCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgbGVmdCA9IHRoaXMubGVmdC5jb3B5KG51bGwsIG51bGwsICF0aGlzLmxlZnQuY29sb3IsIG51bGwsIG51bGwpO1xyXG4gICAgICAgIHZhciByaWdodCA9IHRoaXMucmlnaHQuY29weShudWxsLCBudWxsLCAhdGhpcy5yaWdodC5jb2xvciwgbnVsbCwgbnVsbCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY29weShudWxsLCBudWxsLCAhdGhpcy5jb2xvciwgbGVmdCwgcmlnaHQpO1xyXG4gICAgfTtcclxuICAgIC8vIEZvciB0ZXN0aW5nLlxyXG4gICAgTExSQk5vZGUucHJvdG90eXBlLmNoZWNrTWF4RGVwdGggPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGJsYWNrRGVwdGggPSB0aGlzLmNoZWNrKCk7XHJcbiAgICAgICAgaWYgKE1hdGgucG93KDIuMCwgYmxhY2tEZXB0aCkgPD0gdGhpcy5zaXplICsgMSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLy8gSW4gYSBiYWxhbmNlZCBSQiB0cmVlLCB0aGUgYmxhY2stZGVwdGggKG51bWJlciBvZiBibGFjayBub2RlcykgZnJvbSByb290IHRvXHJcbiAgICAvLyBsZWF2ZXMgaXMgZXF1YWwgb24gYm90aCBzaWRlcy4gIFRoaXMgZnVuY3Rpb24gdmVyaWZpZXMgdGhhdCBvciBhc3NlcnRzLlxyXG4gICAgTExSQk5vZGUucHJvdG90eXBlLmNoZWNrID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmlzUmVkKCkgJiYgdGhpcy5sZWZ0LmlzUmVkKCkpIHtcclxuICAgICAgICAgICAgdGhyb3cgZmFpbCgnUmVkIG5vZGUgaGFzIHJlZCBjaGlsZCgnICsgdGhpcy5rZXkgKyAnLCcgKyB0aGlzLnZhbHVlICsgJyknKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMucmlnaHQuaXNSZWQoKSkge1xyXG4gICAgICAgICAgICB0aHJvdyBmYWlsKCdSaWdodCBjaGlsZCBvZiAoJyArIHRoaXMua2V5ICsgJywnICsgdGhpcy52YWx1ZSArICcpIGlzIHJlZCcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgYmxhY2tEZXB0aCA9IHRoaXMubGVmdC5jaGVjaygpO1xyXG4gICAgICAgIGlmIChibGFja0RlcHRoICE9PSB0aGlzLnJpZ2h0LmNoZWNrKCkpIHtcclxuICAgICAgICAgICAgdGhyb3cgZmFpbCgnQmxhY2sgZGVwdGhzIGRpZmZlcicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIGJsYWNrRGVwdGggKyAodGhpcy5pc1JlZCgpID8gMCA6IDEpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvLyBFbXB0eSBub2RlIGlzIHNoYXJlZCBiZXR3ZWVuIGFsbCBMTFJCIHRyZWVzLlxyXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuICAgIExMUkJOb2RlLkVNUFRZID0gbnVsbDtcclxuICAgIExMUkJOb2RlLlJFRCA9IHRydWU7XHJcbiAgICBMTFJCTm9kZS5CTEFDSyA9IGZhbHNlO1xyXG4gICAgcmV0dXJuIExMUkJOb2RlO1xyXG59KCkpOyAvLyBlbmQgTExSQk5vZGVcclxuLy8gUmVwcmVzZW50cyBhbiBlbXB0eSBub2RlIChhIGxlYWYgbm9kZSBpbiB0aGUgUmVkLUJsYWNrIFRyZWUpLlxyXG52YXIgTExSQkVtcHR5Tm9kZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIExMUkJFbXB0eU5vZGUoKSB7XHJcbiAgICAgICAgdGhpcy5zaXplID0gMDtcclxuICAgIH1cclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShMTFJCRW1wdHlOb2RlLnByb3RvdHlwZSwgXCJrZXlcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB0aHJvdyBmYWlsKCdMTFJCRW1wdHlOb2RlIGhhcyBubyBrZXkuJyk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTExSQkVtcHR5Tm9kZS5wcm90b3R5cGUsIFwidmFsdWVcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB0aHJvdyBmYWlsKCdMTFJCRW1wdHlOb2RlIGhhcyBubyB2YWx1ZS4nKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShMTFJCRW1wdHlOb2RlLnByb3RvdHlwZSwgXCJjb2xvclwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHRocm93IGZhaWwoJ0xMUkJFbXB0eU5vZGUgaGFzIG5vIGNvbG9yLicpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KExMUkJFbXB0eU5vZGUucHJvdG90eXBlLCBcImxlZnRcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB0aHJvdyBmYWlsKCdMTFJCRW1wdHlOb2RlIGhhcyBubyBsZWZ0IGNoaWxkLicpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KExMUkJFbXB0eU5vZGUucHJvdG90eXBlLCBcInJpZ2h0XCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdGhyb3cgZmFpbCgnTExSQkVtcHR5Tm9kZSBoYXMgbm8gcmlnaHQgY2hpbGQuJyk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICAvLyBSZXR1cm5zIGEgY29weSBvZiB0aGUgY3VycmVudCBub2RlLlxyXG4gICAgTExSQkVtcHR5Tm9kZS5wcm90b3R5cGUuY29weSA9IGZ1bmN0aW9uIChrZXksIHZhbHVlLCBjb2xvciwgbGVmdCwgcmlnaHQpIHtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH07XHJcbiAgICAvLyBSZXR1cm5zIGEgY29weSBvZiB0aGUgdHJlZSwgd2l0aCB0aGUgc3BlY2lmaWVkIGtleS92YWx1ZSBhZGRlZC5cclxuICAgIExMUkJFbXB0eU5vZGUucHJvdG90eXBlLmluc2VydCA9IGZ1bmN0aW9uIChrZXksIHZhbHVlLCBjb21wYXJhdG9yKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBMTFJCTm9kZShrZXksIHZhbHVlKTtcclxuICAgIH07XHJcbiAgICAvLyBSZXR1cm5zIGEgY29weSBvZiB0aGUgdHJlZSwgd2l0aCB0aGUgc3BlY2lmaWVkIGtleSByZW1vdmVkLlxyXG4gICAgTExSQkVtcHR5Tm9kZS5wcm90b3R5cGUucmVtb3ZlID0gZnVuY3Rpb24gKGtleSwgY29tcGFyYXRvcikge1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfTtcclxuICAgIExMUkJFbXB0eU5vZGUucHJvdG90eXBlLmlzRW1wdHkgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9O1xyXG4gICAgTExSQkVtcHR5Tm9kZS5wcm90b3R5cGUuaW5vcmRlclRyYXZlcnNhbCA9IGZ1bmN0aW9uIChhY3Rpb24pIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9O1xyXG4gICAgTExSQkVtcHR5Tm9kZS5wcm90b3R5cGUucmV2ZXJzZVRyYXZlcnNhbCA9IGZ1bmN0aW9uIChhY3Rpb24pIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9O1xyXG4gICAgTExSQkVtcHR5Tm9kZS5wcm90b3R5cGUubWluS2V5ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfTtcclxuICAgIExMUkJFbXB0eU5vZGUucHJvdG90eXBlLm1heEtleSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH07XHJcbiAgICBMTFJCRW1wdHlOb2RlLnByb3RvdHlwZS5pc1JlZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9O1xyXG4gICAgLy8gRm9yIHRlc3RpbmcuXHJcbiAgICBMTFJCRW1wdHlOb2RlLnByb3RvdHlwZS5jaGVja01heERlcHRoID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfTtcclxuICAgIExMUkJFbXB0eU5vZGUucHJvdG90eXBlLmNoZWNrID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiAwO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBMTFJCRW1wdHlOb2RlO1xyXG59KCkpOyAvLyBlbmQgTExSQkVtcHR5Tm9kZVxyXG5MTFJCTm9kZS5FTVBUWSA9IG5ldyBMTFJCRW1wdHlOb2RlKCk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogU29ydGVkU2V0IGlzIGFuIGltbXV0YWJsZSAoY29weS1vbi13cml0ZSkgY29sbGVjdGlvbiB0aGF0IGhvbGRzIGVsZW1lbnRzXHJcbiAqIGluIG9yZGVyIHNwZWNpZmllZCBieSB0aGUgcHJvdmlkZWQgY29tcGFyYXRvci5cclxuICpcclxuICogTk9URTogaWYgcHJvdmlkZWQgY29tcGFyYXRvciByZXR1cm5zIDAgZm9yIHR3byBlbGVtZW50cywgd2UgY29uc2lkZXIgdGhlbSB0b1xyXG4gKiBiZSBlcXVhbCFcclxuICovXHJcbnZhciBTb3J0ZWRTZXQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBTb3J0ZWRTZXQoY29tcGFyYXRvcikge1xyXG4gICAgICAgIHRoaXMuY29tcGFyYXRvciA9IGNvbXBhcmF0b3I7XHJcbiAgICAgICAgdGhpcy5kYXRhID0gbmV3IFNvcnRlZE1hcCh0aGlzLmNvbXBhcmF0b3IpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGVzIGEgU29ydGVkU2V0IGZyb20gdGhlIGtleXMgb2YgdGhlIG1hcC5cclxuICAgICAqIFRoaXMgaXMgY3VycmVudGx5IGltcGxlbWVudGVkIGFzIGFuIE8obikgY29weS5cclxuICAgICAqL1xyXG4gICAgU29ydGVkU2V0LmZyb21NYXBLZXlzID0gZnVuY3Rpb24gKG1hcCkge1xyXG4gICAgICAgIHZhciBrZXlzID0gbmV3IFNvcnRlZFNldChtYXAuY29tcGFyYXRvcik7XHJcbiAgICAgICAgbWFwLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgICAgICBrZXlzID0ga2V5cy5hZGQoa2V5KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4ga2V5cztcclxuICAgIH07XHJcbiAgICBTb3J0ZWRTZXQucHJvdG90eXBlLmhhcyA9IGZ1bmN0aW9uIChlbGVtKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YS5nZXQoZWxlbSkgIT09IG51bGw7XHJcbiAgICB9O1xyXG4gICAgU29ydGVkU2V0LnByb3RvdHlwZS5maXJzdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5kYXRhLm1pbktleSgpO1xyXG4gICAgfTtcclxuICAgIFNvcnRlZFNldC5wcm90b3R5cGUubGFzdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5kYXRhLm1heEtleSgpO1xyXG4gICAgfTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTb3J0ZWRTZXQucHJvdG90eXBlLCBcInNpemVcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kYXRhLnNpemU7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBTb3J0ZWRTZXQucHJvdG90eXBlLmluZGV4T2YgPSBmdW5jdGlvbiAoZWxlbSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRhdGEuaW5kZXhPZihlbGVtKTtcclxuICAgIH07XHJcbiAgICAvKiogSXRlcmF0ZXMgZWxlbWVudHMgaW4gb3JkZXIgZGVmaW5lZCBieSBcImNvbXBhcmF0b3JcIiAqL1xyXG4gICAgU29ydGVkU2V0LnByb3RvdHlwZS5mb3JFYWNoID0gZnVuY3Rpb24gKGNiKSB7XHJcbiAgICAgICAgdGhpcy5kYXRhLmlub3JkZXJUcmF2ZXJzYWwoZnVuY3Rpb24gKGssIHYpIHtcclxuICAgICAgICAgICAgY2Ioayk7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKiogSXRlcmF0ZXMgb3ZlciBgZWxlbWBzIHN1Y2ggdGhhdDogcmFuZ2VbMF0gPD0gZWxlbSA8IHJhbmdlWzFdLiAqL1xyXG4gICAgU29ydGVkU2V0LnByb3RvdHlwZS5mb3JFYWNoSW5SYW5nZSA9IGZ1bmN0aW9uIChyYW5nZSwgY2IpIHtcclxuICAgICAgICB2YXIgaXRlciA9IHRoaXMuZGF0YS5nZXRJdGVyYXRvckZyb20ocmFuZ2VbMF0pO1xyXG4gICAgICAgIHdoaWxlIChpdGVyLmhhc05leHQoKSkge1xyXG4gICAgICAgICAgICB2YXIgZWxlbSA9IGl0ZXIuZ2V0TmV4dCgpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5jb21wYXJhdG9yKGVsZW0ua2V5LCByYW5nZVsxXSkgPj0gMCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNiKGVsZW0ua2V5KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBJdGVyYXRlcyBvdmVyIGBlbGVtYHMgc3VjaCB0aGF0OiBzdGFydCA8PSBlbGVtIHVudGlsIGZhbHNlIGlzIHJldHVybmVkLlxyXG4gICAgICovXHJcbiAgICBTb3J0ZWRTZXQucHJvdG90eXBlLmZvckVhY2hXaGlsZSA9IGZ1bmN0aW9uIChjYiwgc3RhcnQpIHtcclxuICAgICAgICB2YXIgaXRlcjtcclxuICAgICAgICBpZiAoc3RhcnQgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBpdGVyID0gdGhpcy5kYXRhLmdldEl0ZXJhdG9yRnJvbShzdGFydCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBpdGVyID0gdGhpcy5kYXRhLmdldEl0ZXJhdG9yKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHdoaWxlIChpdGVyLmhhc05leHQoKSkge1xyXG4gICAgICAgICAgICB2YXIgZWxlbSA9IGl0ZXIuZ2V0TmV4dCgpO1xyXG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gY2IoZWxlbS5rZXkpO1xyXG4gICAgICAgICAgICBpZiAoIXJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKiBGaW5kcyB0aGUgbGVhc3QgZWxlbWVudCBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gYGVsZW1gLiAqL1xyXG4gICAgU29ydGVkU2V0LnByb3RvdHlwZS5maXJzdEFmdGVyT3JFcXVhbCA9IGZ1bmN0aW9uIChlbGVtKSB7XHJcbiAgICAgICAgdmFyIGl0ZXIgPSB0aGlzLmRhdGEuZ2V0SXRlcmF0b3JGcm9tKGVsZW0pO1xyXG4gICAgICAgIHJldHVybiBpdGVyLmhhc05leHQoKSA/IGl0ZXIuZ2V0TmV4dCgpLmtleSA6IG51bGw7XHJcbiAgICB9O1xyXG4gICAgU29ydGVkU2V0LnByb3RvdHlwZS5nZXRJdGVyYXRvciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFNvcnRlZFNldEl0ZXJhdG9yKHRoaXMuZGF0YS5nZXRJdGVyYXRvcigpKTtcclxuICAgIH07XHJcbiAgICBTb3J0ZWRTZXQucHJvdG90eXBlLmdldEl0ZXJhdG9yRnJvbSA9IGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFNvcnRlZFNldEl0ZXJhdG9yKHRoaXMuZGF0YS5nZXRJdGVyYXRvckZyb20oa2V5KSk7XHJcbiAgICB9O1xyXG4gICAgLyoqIEluc2VydHMgb3IgdXBkYXRlcyBhbiBlbGVtZW50ICovXHJcbiAgICBTb3J0ZWRTZXQucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uIChlbGVtKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY29weSh0aGlzLmRhdGEucmVtb3ZlKGVsZW0pLmluc2VydChlbGVtLCB0cnVlKSk7XHJcbiAgICB9O1xyXG4gICAgLyoqIERlbGV0ZXMgYW4gZWxlbWVudCAqL1xyXG4gICAgU29ydGVkU2V0LnByb3RvdHlwZS5kZWxldGUgPSBmdW5jdGlvbiAoZWxlbSkge1xyXG4gICAgICAgIGlmICghdGhpcy5oYXMoZWxlbSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLmNvcHkodGhpcy5kYXRhLnJlbW92ZShlbGVtKSk7XHJcbiAgICB9O1xyXG4gICAgU29ydGVkU2V0LnByb3RvdHlwZS5pc0VtcHR5ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRhdGEuaXNFbXB0eSgpO1xyXG4gICAgfTtcclxuICAgIFNvcnRlZFNldC5wcm90b3R5cGUudW5pb25XaXRoID0gZnVuY3Rpb24gKG90aGVyKSB7XHJcbiAgICAgICAgdmFyIHJlc3VsdCA9IHRoaXM7XHJcbiAgICAgICAgb3RoZXIuZm9yRWFjaChmdW5jdGlvbiAoZWxlbSkge1xyXG4gICAgICAgICAgICByZXN1bHQgPSByZXN1bHQuYWRkKGVsZW0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9O1xyXG4gICAgU29ydGVkU2V0LnByb3RvdHlwZS5pc0VxdWFsID0gZnVuY3Rpb24gKG90aGVyKSB7XHJcbiAgICAgICAgaWYgKCEob3RoZXIgaW5zdGFuY2VvZiBTb3J0ZWRTZXQpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuc2l6ZSAhPT0gb3RoZXIuc2l6ZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciB0aGlzSXQgPSB0aGlzLmRhdGEuZ2V0SXRlcmF0b3IoKTtcclxuICAgICAgICB2YXIgb3RoZXJJdCA9IG90aGVyLmRhdGEuZ2V0SXRlcmF0b3IoKTtcclxuICAgICAgICB3aGlsZSAodGhpc0l0Lmhhc05leHQoKSkge1xyXG4gICAgICAgICAgICB2YXIgdGhpc0VsZW0gPSB0aGlzSXQuZ2V0TmV4dCgpLmtleTtcclxuICAgICAgICAgICAgdmFyIG90aGVyRWxlbSA9IG90aGVySXQuZ2V0TmV4dCgpLmtleTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuY29tcGFyYXRvcih0aGlzRWxlbSwgb3RoZXJFbGVtKSAhPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfTtcclxuICAgIFNvcnRlZFNldC5wcm90b3R5cGUudG9BcnJheSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgcmVzID0gW107XHJcbiAgICAgICAgdGhpcy5mb3JFYWNoKGZ1bmN0aW9uICh0YXJnZXRJZCkge1xyXG4gICAgICAgICAgICByZXMucHVzaCh0YXJnZXRJZCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHJlcztcclxuICAgIH07XHJcbiAgICBTb3J0ZWRTZXQucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciByZXN1bHQgPSBbXTtcclxuICAgICAgICB0aGlzLmZvckVhY2goZnVuY3Rpb24gKGVsZW0pIHsgcmV0dXJuIHJlc3VsdC5wdXNoKGVsZW0pOyB9KTtcclxuICAgICAgICByZXR1cm4gJ1NvcnRlZFNldCgnICsgcmVzdWx0LnRvU3RyaW5nKCkgKyAnKSc7XHJcbiAgICB9O1xyXG4gICAgU29ydGVkU2V0LnByb3RvdHlwZS5jb3B5ID0gZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IFNvcnRlZFNldCh0aGlzLmNvbXBhcmF0b3IpO1xyXG4gICAgICAgIHJlc3VsdC5kYXRhID0gZGF0YTtcclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfTtcclxuICAgIHJldHVybiBTb3J0ZWRTZXQ7XHJcbn0oKSk7XHJcbnZhciBTb3J0ZWRTZXRJdGVyYXRvciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFNvcnRlZFNldEl0ZXJhdG9yKGl0ZXIpIHtcclxuICAgICAgICB0aGlzLml0ZXIgPSBpdGVyO1xyXG4gICAgfVxyXG4gICAgU29ydGVkU2V0SXRlcmF0b3IucHJvdG90eXBlLmdldE5leHQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaXRlci5nZXROZXh0KCkua2V5O1xyXG4gICAgfTtcclxuICAgIFNvcnRlZFNldEl0ZXJhdG9yLnByb3RvdHlwZS5oYXNOZXh0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLml0ZXIuaGFzTmV4dCgpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBTb3J0ZWRTZXRJdGVyYXRvcjtcclxufSgpKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnZhciBFTVBUWV9NQVlCRV9ET0NVTUVOVF9NQVAgPSBuZXcgU29ydGVkTWFwKERvY3VtZW50S2V5LmNvbXBhcmF0b3IpO1xyXG5mdW5jdGlvbiBtYXliZURvY3VtZW50TWFwKCkge1xyXG4gICAgcmV0dXJuIEVNUFRZX01BWUJFX0RPQ1VNRU5UX01BUDtcclxufVxyXG5mdW5jdGlvbiBudWxsYWJsZU1heWJlRG9jdW1lbnRNYXAoKSB7XHJcbiAgICByZXR1cm4gbWF5YmVEb2N1bWVudE1hcCgpO1xyXG59XHJcbnZhciBFTVBUWV9ET0NVTUVOVF9NQVAgPSBuZXcgU29ydGVkTWFwKERvY3VtZW50S2V5LmNvbXBhcmF0b3IpO1xyXG5mdW5jdGlvbiBkb2N1bWVudE1hcCgpIHtcclxuICAgIHJldHVybiBFTVBUWV9ET0NVTUVOVF9NQVA7XHJcbn1cclxudmFyIEVNUFRZX0RPQ1VNRU5UX1ZFUlNJT05fTUFQID0gbmV3IFNvcnRlZE1hcChEb2N1bWVudEtleS5jb21wYXJhdG9yKTtcclxuZnVuY3Rpb24gZG9jdW1lbnRWZXJzaW9uTWFwKCkge1xyXG4gICAgcmV0dXJuIEVNUFRZX0RPQ1VNRU5UX1ZFUlNJT05fTUFQO1xyXG59XHJcbnZhciBFTVBUWV9ET0NVTUVOVF9LRVlfU0VUID0gbmV3IFNvcnRlZFNldChEb2N1bWVudEtleS5jb21wYXJhdG9yKTtcclxuZnVuY3Rpb24gZG9jdW1lbnRLZXlTZXQoKSB7XHJcbiAgICB2YXIga2V5cyA9IFtdO1xyXG4gICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICBrZXlzW19pXSA9IGFyZ3VtZW50c1tfaV07XHJcbiAgICB9XHJcbiAgICB2YXIgc2V0ID0gRU1QVFlfRE9DVU1FTlRfS0VZX1NFVDtcclxuICAgIGZvciAodmFyIF9hID0gMCwga2V5c18xID0ga2V5czsgX2EgPCBrZXlzXzEubGVuZ3RoOyBfYSsrKSB7XHJcbiAgICAgICAgdmFyIGtleSA9IGtleXNfMVtfYV07XHJcbiAgICAgICAgc2V0ID0gc2V0LmFkZChrZXkpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHNldDtcclxufVxyXG52YXIgRU1QVFlfVEFSR0VUX0lEX1NFVCA9IG5ldyBTb3J0ZWRTZXQocHJpbWl0aXZlQ29tcGFyYXRvcik7XHJcbmZ1bmN0aW9uIHRhcmdldElkU2V0KCkge1xyXG4gICAgcmV0dXJuIEVNUFRZX1RBUkdFVF9JRF9TRVQ7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnZhciBCQVRDSElEX1VOS05PV04gPSAtMTtcclxuLyoqXHJcbiAqIEEgYmF0Y2ggb2YgbXV0YXRpb25zIHRoYXQgd2lsbCBiZSBzZW50IGFzIG9uZSB1bml0IHRvIHRoZSBiYWNrZW5kLlxyXG4gKi9cclxudmFyIE11dGF0aW9uQmF0Y2ggPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSBiYXRjaElkIFRoZSB1bmlxdWUgSUQgb2YgdGhpcyBtdXRhdGlvbiBiYXRjaC5cclxuICAgICAqIEBwYXJhbSBsb2NhbFdyaXRlVGltZSBUaGUgb3JpZ2luYWwgd3JpdGUgdGltZSBvZiB0aGlzIG11dGF0aW9uLlxyXG4gICAgICogQHBhcmFtIGJhc2VNdXRhdGlvbnMgTXV0YXRpb25zIHRoYXQgYXJlIHVzZWQgdG8gcG9wdWxhdGUgdGhlIGJhc2VcclxuICAgICAqIHZhbHVlcyB3aGVuIHRoaXMgbXV0YXRpb24gaXMgYXBwbGllZCBsb2NhbGx5LiBUaGlzIGNhbiBiZSB1c2VkIHRvIGxvY2FsbHlcclxuICAgICAqIG92ZXJ3cml0ZSB2YWx1ZXMgdGhhdCBhcmUgcGVyc2lzdGVkIGluIHRoZSByZW1vdGUgZG9jdW1lbnQgY2FjaGUuIEJhc2VcclxuICAgICAqIG11dGF0aW9ucyBhcmUgbmV2ZXIgc2VudCB0byB0aGUgYmFja2VuZC5cclxuICAgICAqIEBwYXJhbSBtdXRhdGlvbnMgVGhlIHVzZXItcHJvdmlkZWQgbXV0YXRpb25zIGluIHRoaXMgbXV0YXRpb24gYmF0Y2guXHJcbiAgICAgKiBVc2VyLXByb3ZpZGVkIG11dGF0aW9ucyBhcmUgYXBwbGllZCBib3RoIGxvY2FsbHkgYW5kIHJlbW90ZWx5IG9uIHRoZVxyXG4gICAgICogYmFja2VuZC5cclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gTXV0YXRpb25CYXRjaChiYXRjaElkLCBsb2NhbFdyaXRlVGltZSwgYmFzZU11dGF0aW9ucywgbXV0YXRpb25zKSB7XHJcbiAgICAgICAgdGhpcy5iYXRjaElkID0gYmF0Y2hJZDtcclxuICAgICAgICB0aGlzLmxvY2FsV3JpdGVUaW1lID0gbG9jYWxXcml0ZVRpbWU7XHJcbiAgICAgICAgdGhpcy5iYXNlTXV0YXRpb25zID0gYmFzZU11dGF0aW9ucztcclxuICAgICAgICB0aGlzLm11dGF0aW9ucyA9IG11dGF0aW9ucztcclxuICAgICAgICBhc3NlcnQobXV0YXRpb25zLmxlbmd0aCA+IDAsICdDYW5ub3QgY3JlYXRlIGFuIGVtcHR5IG11dGF0aW9uIGJhdGNoJyk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEFwcGxpZXMgYWxsIHRoZSBtdXRhdGlvbnMgaW4gdGhpcyBNdXRhdGlvbkJhdGNoIHRvIHRoZSBzcGVjaWZpZWQgZG9jdW1lbnRcclxuICAgICAqIHRvIGNyZWF0ZSBhIG5ldyByZW1vdGUgZG9jdW1lbnRcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gZG9jS2V5IFRoZSBrZXkgb2YgdGhlIGRvY3VtZW50IHRvIGFwcGx5IG11dGF0aW9ucyB0by5cclxuICAgICAqIEBwYXJhbSBtYXliZURvYyBUaGUgZG9jdW1lbnQgdG8gYXBwbHkgbXV0YXRpb25zIHRvLlxyXG4gICAgICogQHBhcmFtIGJhdGNoUmVzdWx0IFRoZSByZXN1bHQgb2YgYXBwbHlpbmcgdGhlIE11dGF0aW9uQmF0Y2ggdG8gdGhlXHJcbiAgICAgKiBiYWNrZW5kLlxyXG4gICAgICovXHJcbiAgICBNdXRhdGlvbkJhdGNoLnByb3RvdHlwZS5hcHBseVRvUmVtb3RlRG9jdW1lbnQgPSBmdW5jdGlvbiAoZG9jS2V5LCBtYXliZURvYywgYmF0Y2hSZXN1bHQpIHtcclxuICAgICAgICBpZiAobWF5YmVEb2MpIHtcclxuICAgICAgICAgICAgYXNzZXJ0KG1heWJlRG9jLmtleS5pc0VxdWFsKGRvY0tleSksIFwiYXBwbHlUb1JlbW90ZURvY3VtZW50OiBrZXkgXCIgKyBkb2NLZXkgKyBcIiBzaG91bGQgbWF0Y2ggbWF5YmVEb2Mga2V5XFxuICAgICAgICBcIiArIG1heWJlRG9jLmtleSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBtdXRhdGlvblJlc3VsdHMgPSBiYXRjaFJlc3VsdC5tdXRhdGlvblJlc3VsdHM7XHJcbiAgICAgICAgYXNzZXJ0KG11dGF0aW9uUmVzdWx0cy5sZW5ndGggPT09IHRoaXMubXV0YXRpb25zLmxlbmd0aCwgXCJNaXNtYXRjaCBiZXR3ZWVuIG11dGF0aW9ucyBsZW5ndGhcXG4gICAgICAoXCIgKyB0aGlzLm11dGF0aW9ucy5sZW5ndGggKyBcIikgYW5kIG11dGF0aW9uIHJlc3VsdHMgbGVuZ3RoXFxuICAgICAgKFwiICsgbXV0YXRpb25SZXN1bHRzLmxlbmd0aCArIFwiKS5cIik7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLm11dGF0aW9ucy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB2YXIgbXV0YXRpb24gPSB0aGlzLm11dGF0aW9uc1tpXTtcclxuICAgICAgICAgICAgaWYgKG11dGF0aW9uLmtleS5pc0VxdWFsKGRvY0tleSkpIHtcclxuICAgICAgICAgICAgICAgIHZhciBtdXRhdGlvblJlc3VsdCA9IG11dGF0aW9uUmVzdWx0c1tpXTtcclxuICAgICAgICAgICAgICAgIG1heWJlRG9jID0gbXV0YXRpb24uYXBwbHlUb1JlbW90ZURvY3VtZW50KG1heWJlRG9jLCBtdXRhdGlvblJlc3VsdCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG1heWJlRG9jO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQ29tcHV0ZXMgdGhlIGxvY2FsIHZpZXcgb2YgYSBkb2N1bWVudCBnaXZlbiBhbGwgdGhlIG11dGF0aW9ucyBpbiB0aGlzXHJcbiAgICAgKiBiYXRjaC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gZG9jS2V5IFRoZSBrZXkgb2YgdGhlIGRvY3VtZW50IHRvIGFwcGx5IG11dGF0aW9ucyB0by5cclxuICAgICAqIEBwYXJhbSBtYXliZURvYyBUaGUgZG9jdW1lbnQgdG8gYXBwbHkgbXV0YXRpb25zIHRvLlxyXG4gICAgICovXHJcbiAgICBNdXRhdGlvbkJhdGNoLnByb3RvdHlwZS5hcHBseVRvTG9jYWxWaWV3ID0gZnVuY3Rpb24gKGRvY0tleSwgbWF5YmVEb2MpIHtcclxuICAgICAgICBpZiAobWF5YmVEb2MpIHtcclxuICAgICAgICAgICAgYXNzZXJ0KG1heWJlRG9jLmtleS5pc0VxdWFsKGRvY0tleSksIFwiYXBwbHlUb0xvY2FsRG9jdW1lbnQ6IGtleSBcIiArIGRvY0tleSArIFwiIHNob3VsZCBtYXRjaCBtYXliZURvYyBrZXlcXG4gICAgICAgIFwiICsgbWF5YmVEb2Mua2V5KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gRmlyc3QsIGFwcGx5IHRoZSBiYXNlIHN0YXRlLiBUaGlzIGFsbG93cyB1cyB0byBhcHBseSBub24taWRlbXBvdGVudFxyXG4gICAgICAgIC8vIHRyYW5zZm9ybSBhZ2FpbnN0IGEgY29uc2lzdGVudCBzZXQgb2YgdmFsdWVzLlxyXG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSB0aGlzLmJhc2VNdXRhdGlvbnM7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBtdXRhdGlvbiA9IF9hW19pXTtcclxuICAgICAgICAgICAgaWYgKG11dGF0aW9uLmtleS5pc0VxdWFsKGRvY0tleSkpIHtcclxuICAgICAgICAgICAgICAgIG1heWJlRG9jID0gbXV0YXRpb24uYXBwbHlUb0xvY2FsVmlldyhtYXliZURvYywgbWF5YmVEb2MsIHRoaXMubG9jYWxXcml0ZVRpbWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBiYXNlRG9jID0gbWF5YmVEb2M7XHJcbiAgICAgICAgLy8gU2Vjb25kLCBhcHBseSBhbGwgdXNlci1wcm92aWRlZCBtdXRhdGlvbnMuXHJcbiAgICAgICAgZm9yICh2YXIgX2IgPSAwLCBfYyA9IHRoaXMubXV0YXRpb25zOyBfYiA8IF9jLmxlbmd0aDsgX2IrKykge1xyXG4gICAgICAgICAgICB2YXIgbXV0YXRpb24gPSBfY1tfYl07XHJcbiAgICAgICAgICAgIGlmIChtdXRhdGlvbi5rZXkuaXNFcXVhbChkb2NLZXkpKSB7XHJcbiAgICAgICAgICAgICAgICBtYXliZURvYyA9IG11dGF0aW9uLmFwcGx5VG9Mb2NhbFZpZXcobWF5YmVEb2MsIGJhc2VEb2MsIHRoaXMubG9jYWxXcml0ZVRpbWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBtYXliZURvYztcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIENvbXB1dGVzIHRoZSBsb2NhbCB2aWV3IGZvciBhbGwgcHJvdmlkZWQgZG9jdW1lbnRzIGdpdmVuIHRoZSBtdXRhdGlvbnMgaW5cclxuICAgICAqIHRoaXMgYmF0Y2guXHJcbiAgICAgKi9cclxuICAgIE11dGF0aW9uQmF0Y2gucHJvdG90eXBlLmFwcGx5VG9Mb2NhbERvY3VtZW50U2V0ID0gZnVuY3Rpb24gKG1heWJlRG9jcykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgLy8gVE9ETyhtcnNjaG1pZHQpOiBUaGlzIGltcGxlbWVudGF0aW9uIGlzIE8obl4yKS4gSWYgd2UgYXBwbHkgdGhlIG11dGF0aW9uc1xyXG4gICAgICAgIC8vIGRpcmVjdGx5IChhcyBkb25lIGluIGBhcHBseVRvTG9jYWxWaWV3KClgKSwgd2UgY2FuIHJlZHVjZSB0aGUgY29tcGxleGl0eVxyXG4gICAgICAgIC8vIHRvIE8obikuXHJcbiAgICAgICAgdmFyIG11dGF0ZWREb2N1bWVudHMgPSBtYXliZURvY3M7XHJcbiAgICAgICAgdGhpcy5tdXRhdGlvbnMuZm9yRWFjaChmdW5jdGlvbiAobSkge1xyXG4gICAgICAgICAgICB2YXIgbXV0YXRlZERvY3VtZW50ID0gX3RoaXMuYXBwbHlUb0xvY2FsVmlldyhtLmtleSwgbWF5YmVEb2NzLmdldChtLmtleSkpO1xyXG4gICAgICAgICAgICBpZiAobXV0YXRlZERvY3VtZW50KSB7XHJcbiAgICAgICAgICAgICAgICBtdXRhdGVkRG9jdW1lbnRzID0gbXV0YXRlZERvY3VtZW50cy5pbnNlcnQobS5rZXksIG11dGF0ZWREb2N1bWVudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gbXV0YXRlZERvY3VtZW50cztcclxuICAgIH07XHJcbiAgICBNdXRhdGlvbkJhdGNoLnByb3RvdHlwZS5rZXlzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm11dGF0aW9ucy5yZWR1Y2UoZnVuY3Rpb24gKGtleXMsIG0pIHsgcmV0dXJuIGtleXMuYWRkKG0ua2V5KTsgfSwgZG9jdW1lbnRLZXlTZXQoKSk7XHJcbiAgICB9O1xyXG4gICAgTXV0YXRpb25CYXRjaC5wcm90b3R5cGUuaXNFcXVhbCA9IGZ1bmN0aW9uIChvdGhlcikge1xyXG4gICAgICAgIHJldHVybiAodGhpcy5iYXRjaElkID09PSBvdGhlci5iYXRjaElkICYmXHJcbiAgICAgICAgICAgIGFycmF5RXF1YWxzKHRoaXMubXV0YXRpb25zLCBvdGhlci5tdXRhdGlvbnMpICYmXHJcbiAgICAgICAgICAgIGFycmF5RXF1YWxzKHRoaXMuYmFzZU11dGF0aW9ucywgb3RoZXIuYmFzZU11dGF0aW9ucykpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBNdXRhdGlvbkJhdGNoO1xyXG59KCkpO1xyXG4vKiogVGhlIHJlc3VsdCBvZiBhcHBseWluZyBhIG11dGF0aW9uIGJhdGNoIHRvIHRoZSBiYWNrZW5kLiAqL1xyXG52YXIgTXV0YXRpb25CYXRjaFJlc3VsdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIE11dGF0aW9uQmF0Y2hSZXN1bHQoYmF0Y2gsIGNvbW1pdFZlcnNpb24sIG11dGF0aW9uUmVzdWx0cywgc3RyZWFtVG9rZW4sIFxyXG4gICAgLyoqXHJcbiAgICAgKiBBIHByZS1jb21wdXRlZCBtYXBwaW5nIGZyb20gZWFjaCBtdXRhdGVkIGRvY3VtZW50IHRvIHRoZSByZXN1bHRpbmdcclxuICAgICAqIHZlcnNpb24uXHJcbiAgICAgKi9cclxuICAgIGRvY1ZlcnNpb25zKSB7XHJcbiAgICAgICAgdGhpcy5iYXRjaCA9IGJhdGNoO1xyXG4gICAgICAgIHRoaXMuY29tbWl0VmVyc2lvbiA9IGNvbW1pdFZlcnNpb247XHJcbiAgICAgICAgdGhpcy5tdXRhdGlvblJlc3VsdHMgPSBtdXRhdGlvblJlc3VsdHM7XHJcbiAgICAgICAgdGhpcy5zdHJlYW1Ub2tlbiA9IHN0cmVhbVRva2VuO1xyXG4gICAgICAgIHRoaXMuZG9jVmVyc2lvbnMgPSBkb2NWZXJzaW9ucztcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhIG5ldyBNdXRhdGlvbkJhdGNoUmVzdWx0IGZvciB0aGUgZ2l2ZW4gYmF0Y2ggYW5kIHJlc3VsdHMuIFRoZXJlXHJcbiAgICAgKiBtdXN0IGJlIG9uZSByZXN1bHQgZm9yIGVhY2ggbXV0YXRpb24gaW4gdGhlIGJhdGNoLiBUaGlzIHN0YXRpYyBmYWN0b3J5XHJcbiAgICAgKiBjYWNoZXMgYSBkb2N1bWVudD0+dmVyc2lvbiBtYXBwaW5nIChkb2NWZXJzaW9ucykuXHJcbiAgICAgKi9cclxuICAgIE11dGF0aW9uQmF0Y2hSZXN1bHQuZnJvbSA9IGZ1bmN0aW9uIChiYXRjaCwgY29tbWl0VmVyc2lvbiwgcmVzdWx0cywgc3RyZWFtVG9rZW4pIHtcclxuICAgICAgICBhc3NlcnQoYmF0Y2gubXV0YXRpb25zLmxlbmd0aCA9PT0gcmVzdWx0cy5sZW5ndGgsICdNdXRhdGlvbnMgc2VudCAnICtcclxuICAgICAgICAgICAgYmF0Y2gubXV0YXRpb25zLmxlbmd0aCArXHJcbiAgICAgICAgICAgICcgbXVzdCBlcXVhbCByZXN1bHRzIHJlY2VpdmVkICcgK1xyXG4gICAgICAgICAgICByZXN1bHRzLmxlbmd0aCk7XHJcbiAgICAgICAgdmFyIHZlcnNpb25NYXAgPSBkb2N1bWVudFZlcnNpb25NYXAoKTtcclxuICAgICAgICB2YXIgbXV0YXRpb25zID0gYmF0Y2gubXV0YXRpb25zO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbXV0YXRpb25zLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHZlcnNpb25NYXAgPSB2ZXJzaW9uTWFwLmluc2VydChtdXRhdGlvbnNbaV0ua2V5LCByZXN1bHRzW2ldLnZlcnNpb24pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbmV3IE11dGF0aW9uQmF0Y2hSZXN1bHQoYmF0Y2gsIGNvbW1pdFZlcnNpb24sIHJlc3VsdHMsIHN0cmVhbVRva2VuLCB2ZXJzaW9uTWFwKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gTXV0YXRpb25CYXRjaFJlc3VsdDtcclxufSgpKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBQZXJzaXN0ZW5jZVByb21pc2U8PiBpcyBlc3NlbnRpYWxseSBhIHJlLWltcGxlbWVudGF0aW9uIG9mIFByb21pc2U8PiBleGNlcHRcclxuICogaXQgaGFzIGEgLm5leHQoKSBtZXRob2QgaW5zdGVhZCBvZiAudGhlbigpIGFuZCAubmV4dCgpIGFuZCAuY2F0Y2goKSBjYWxsYmFja3NcclxuICogYXJlIGV4ZWN1dGVkIHN5bmNocm9ub3VzbHkgd2hlbiBhIFBlcnNpc3RlbmNlUHJvbWlzZSByZXNvbHZlcyByYXRoZXIgdGhhblxyXG4gKiBhc3luY2hyb25vdXNseSAoUHJvbWlzZTw+IGltcGxlbWVudGF0aW9ucyB1c2Ugc2V0SW1tZWRpYXRlKCkgb3Igc2ltaWxhcikuXHJcbiAqXHJcbiAqIFRoaXMgaXMgbmVjZXNzYXJ5IHRvIGludGVyb3BlcmF0ZSB3aXRoIEluZGV4ZWREQiB3aGljaCB3aWxsIGF1dG9tYXRpY2FsbHlcclxuICogY29tbWl0IHRyYW5zYWN0aW9ucyBpZiBjb250cm9sIGlzIHJldHVybmVkIHRvIHRoZSBldmVudCBsb29wIHdpdGhvdXRcclxuICogc3luY2hyb25vdXNseSBpbml0aWF0aW5nIGFub3RoZXIgb3BlcmF0aW9uIG9uIHRoZSB0cmFuc2FjdGlvbi5cclxuICpcclxuICogTk9URTogLnRoZW4oKSBhbmQgLmNhdGNoKCkgb25seSBhbGxvdyBhIHNpbmdsZSBjb25zdW1lciwgdW5saWtlIG5vcm1hbFxyXG4gKiBQcm9taXNlcy5cclxuICovXHJcbnZhciBQZXJzaXN0ZW5jZVByb21pc2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBQZXJzaXN0ZW5jZVByb21pc2UoY2FsbGJhY2spIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIC8vIE5PVEU6IG5leHQvY2F0Y2hDYWxsYmFjayB3aWxsIGFsd2F5cyBwb2ludCB0byBvdXIgb3duIHdyYXBwZXIgZnVuY3Rpb25zLFxyXG4gICAgICAgIC8vIG5vdCB0aGUgdXNlcidzIHJhdyBuZXh0KCkgb3IgY2F0Y2goKSBjYWxsYmFja3MuXHJcbiAgICAgICAgdGhpcy5uZXh0Q2FsbGJhY2sgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuY2F0Y2hDYWxsYmFjayA9IG51bGw7XHJcbiAgICAgICAgLy8gV2hlbiB0aGUgb3BlcmF0aW9uIHJlc29sdmVzLCB3ZSdsbCBzZXQgcmVzdWx0IG9yIGVycm9yIGFuZCBtYXJrIGlzRG9uZS5cclxuICAgICAgICB0aGlzLnJlc3VsdCA9IHVuZGVmaW5lZDtcclxuICAgICAgICB0aGlzLmVycm9yID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIHRoaXMuaXNEb25lID0gZmFsc2U7XHJcbiAgICAgICAgLy8gU2V0IHRvIHRydWUgd2hlbiAudGhlbigpIG9yIC5jYXRjaCgpIGFyZSBjYWxsZWQgYW5kIHByZXZlbnRzIGFkZGl0aW9uYWxcclxuICAgICAgICAvLyBjaGFpbmluZy5cclxuICAgICAgICB0aGlzLmNhbGxiYWNrQXR0YWNoZWQgPSBmYWxzZTtcclxuICAgICAgICBjYWxsYmFjayhmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICAgICAgX3RoaXMuaXNEb25lID0gdHJ1ZTtcclxuICAgICAgICAgICAgX3RoaXMucmVzdWx0ID0gdmFsdWU7XHJcbiAgICAgICAgICAgIGlmIChfdGhpcy5uZXh0Q2FsbGJhY2spIHtcclxuICAgICAgICAgICAgICAgIC8vIHZhbHVlIHNob3VsZCBiZSBkZWZpbmVkIHVubGVzcyBUIGlzIFZvaWQsIGJ1dCB3ZSBjYW4ndCBleHByZXNzXHJcbiAgICAgICAgICAgICAgICAvLyB0aGF0IGluIHRoZSB0eXBlIHN5c3RlbS5cclxuICAgICAgICAgICAgICAgIF90aGlzLm5leHRDYWxsYmFjayh2YWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgX3RoaXMuaXNEb25lID0gdHJ1ZTtcclxuICAgICAgICAgICAgX3RoaXMuZXJyb3IgPSBlcnJvcjtcclxuICAgICAgICAgICAgaWYgKF90aGlzLmNhdGNoQ2FsbGJhY2spIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLmNhdGNoQ2FsbGJhY2soZXJyb3IpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBQZXJzaXN0ZW5jZVByb21pc2UucHJvdG90eXBlLmNhdGNoID0gZnVuY3Rpb24gKGZuKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubmV4dCh1bmRlZmluZWQsIGZuKTtcclxuICAgIH07XHJcbiAgICBQZXJzaXN0ZW5jZVByb21pc2UucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAobmV4dEZuLCBjYXRjaEZuKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBpZiAodGhpcy5jYWxsYmFja0F0dGFjaGVkKSB7XHJcbiAgICAgICAgICAgIGZhaWwoJ0NhbGxlZCBuZXh0KCkgb3IgY2F0Y2goKSB0d2ljZSBmb3IgUGVyc2lzdGVuY2VQcm9taXNlJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuY2FsbGJhY2tBdHRhY2hlZCA9IHRydWU7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNEb25lKSB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5lcnJvcikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMud3JhcFN1Y2Nlc3MobmV4dEZuLCB0aGlzLnJlc3VsdCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy53cmFwRmFpbHVyZShjYXRjaEZuLCB0aGlzLmVycm9yKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBQZXJzaXN0ZW5jZVByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMubmV4dENhbGxiYWNrID0gZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMud3JhcFN1Y2Nlc3MobmV4dEZuLCB2YWx1ZSkubmV4dChyZXNvbHZlLCByZWplY3QpO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIF90aGlzLmNhdGNoQ2FsbGJhY2sgPSBmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICBfdGhpcy53cmFwRmFpbHVyZShjYXRjaEZuLCBlcnJvcikubmV4dChyZXNvbHZlLCByZWplY3QpO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFBlcnNpc3RlbmNlUHJvbWlzZS5wcm90b3R5cGUudG9Qcm9taXNlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgX3RoaXMubmV4dChyZXNvbHZlLCByZWplY3QpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIFBlcnNpc3RlbmNlUHJvbWlzZS5wcm90b3R5cGUud3JhcFVzZXJGdW5jdGlvbiA9IGZ1bmN0aW9uIChmbikge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSBmbigpO1xyXG4gICAgICAgICAgICBpZiAocmVzdWx0IGluc3RhbmNlb2YgUGVyc2lzdGVuY2VQcm9taXNlKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKHJlc3VsdCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZWplY3QoZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFBlcnNpc3RlbmNlUHJvbWlzZS5wcm90b3R5cGUud3JhcFN1Y2Nlc3MgPSBmdW5jdGlvbiAobmV4dEZuLCB2YWx1ZSkge1xyXG4gICAgICAgIGlmIChuZXh0Rm4pIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMud3JhcFVzZXJGdW5jdGlvbihmdW5jdGlvbiAoKSB7IHJldHVybiBuZXh0Rm4odmFsdWUpOyB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIElmIHRoZXJlJ3Mgbm8gbmV4dEZuLCB0aGVuIFIgbXVzdCBiZSB0aGUgc2FtZSBhcyBUXHJcbiAgICAgICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSh2YWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFBlcnNpc3RlbmNlUHJvbWlzZS5wcm90b3R5cGUud3JhcEZhaWx1cmUgPSBmdW5jdGlvbiAoY2F0Y2hGbiwgZXJyb3IpIHtcclxuICAgICAgICBpZiAoY2F0Y2hGbikge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy53cmFwVXNlckZ1bmN0aW9uKGZ1bmN0aW9uICgpIHsgcmV0dXJuIGNhdGNoRm4oZXJyb3IpOyB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVqZWN0KGVycm9yKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUgPSBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQZXJzaXN0ZW5jZVByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICByZXNvbHZlKHJlc3VsdCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgUGVyc2lzdGVuY2VQcm9taXNlLnJlamVjdCA9IGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgIHJldHVybiBuZXcgUGVyc2lzdGVuY2VQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBQZXJzaXN0ZW5jZVByb21pc2Uud2FpdEZvciA9IGZ1bmN0aW9uIChcclxuICAgIC8vIEFjY2VwdCBhbGwgUHJvbWlzZSB0eXBlcyBpbiB3YWl0Rm9yKCkuXHJcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG4gICAgYWxsKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQZXJzaXN0ZW5jZVByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICB2YXIgZXhwZWN0ZWRDb3VudCA9IDA7XHJcbiAgICAgICAgICAgIHZhciByZXNvbHZlZENvdW50ID0gMDtcclxuICAgICAgICAgICAgdmFyIGRvbmUgPSBmYWxzZTtcclxuICAgICAgICAgICAgYWxsLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgICsrZXhwZWN0ZWRDb3VudDtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQubmV4dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgKytyZXNvbHZlZENvdW50O1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChkb25lICYmIHJlc29sdmVkQ291bnQgPT09IGV4cGVjdGVkQ291bnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnIpIHsgcmV0dXJuIHJlamVjdChlcnIpOyB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGRvbmUgPSB0cnVlO1xyXG4gICAgICAgICAgICBpZiAocmVzb2x2ZWRDb3VudCA9PT0gZXhwZWN0ZWRDb3VudCkge1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBHaXZlbiBhbiBhcnJheSBvZiBwcmVkaWNhdGUgZnVuY3Rpb25zIHRoYXQgYXN5bmNocm9ub3VzbHkgZXZhbHVhdGUgdG8gYVxyXG4gICAgICogYm9vbGVhbiwgaW1wbGVtZW50cyBhIHNob3J0LWNpcmN1aXRpbmcgYG9yYCBiZXR3ZWVuIHRoZSByZXN1bHRzLiBQcmVkaWNhdGVzXHJcbiAgICAgKiB3aWxsIGJlIGV2YWx1YXRlZCB1bnRpbCBvbmUgb2YgdGhlbSByZXR1cm5zIGB0cnVlYCwgdGhlbiBzdG9wLiBUaGUgZmluYWxcclxuICAgICAqIHJlc3VsdCB3aWxsIGJlIHdoZXRoZXIgYW55IG9mIHRoZW0gcmV0dXJuZWQgYHRydWVgLlxyXG4gICAgICovXHJcbiAgICBQZXJzaXN0ZW5jZVByb21pc2Uub3IgPSBmdW5jdGlvbiAocHJlZGljYXRlcykge1xyXG4gICAgICAgIHZhciBwID0gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoZmFsc2UpO1xyXG4gICAgICAgIHZhciBfbG9vcF8xID0gZnVuY3Rpb24gKHByZWRpY2F0ZSkge1xyXG4gICAgICAgICAgICBwID0gcC5uZXh0KGZ1bmN0aW9uIChpc1RydWUpIHtcclxuICAgICAgICAgICAgICAgIGlmIChpc1RydWUpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoaXNUcnVlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwcmVkaWNhdGUoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIHByZWRpY2F0ZXNfMSA9IHByZWRpY2F0ZXM7IF9pIDwgcHJlZGljYXRlc18xLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICB2YXIgcHJlZGljYXRlID0gcHJlZGljYXRlc18xW19pXTtcclxuICAgICAgICAgICAgX2xvb3BfMShwcmVkaWNhdGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcDtcclxuICAgIH07XHJcbiAgICBQZXJzaXN0ZW5jZVByb21pc2UuZm9yRWFjaCA9IGZ1bmN0aW9uIChjb2xsZWN0aW9uLCBmKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgcHJvbWlzZXMgPSBbXTtcclxuICAgICAgICBjb2xsZWN0aW9uLmZvckVhY2goZnVuY3Rpb24gKHIsIHMpIHtcclxuICAgICAgICAgICAgcHJvbWlzZXMucHVzaChmLmNhbGwoX3RoaXMsIHIsIHMpKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gdGhpcy53YWl0Rm9yKHByb21pc2VzKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlO1xyXG59KCkpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxudmFyIExPR19UQUcgPSAnU2ltcGxlRGInO1xyXG4vKipcclxuICogVGhlIG1heGltdW0gbnVtYmVyIG9mIHJldHJ5IGF0dGVtcHRzIGZvciBhbiBJbmRleGVkRGIgdHJhbnNhY3Rpb24gdGhhdCBmYWlsc1xyXG4gKiB3aXRoIGEgRE9NRXhjZXB0aW9uLlxyXG4gKi9cclxudmFyIFRSQU5TQUNUSU9OX1JFVFJZX0NPVU5UID0gMztcclxuLyoqXHJcbiAqIFByb3ZpZGVzIGEgd3JhcHBlciBhcm91bmQgSW5kZXhlZERiIHdpdGggYSBzaW1wbGlmaWVkIGludGVyZmFjZSB0aGF0IHVzZXNcclxuICogUHJvbWlzZS1saWtlIHJldHVybiB2YWx1ZXMgdG8gY2hhaW4gb3BlcmF0aW9ucy4gUmVhbCBwcm9taXNlcyBjYW5ub3QgYmUgdXNlZFxyXG4gKiBzaW5jZSAudGhlbigpIGNvbnRpbnVhdGlvbnMgYXJlIGV4ZWN1dGVkIGFzeW5jaHJvbm91c2x5IChlLmcuIHZpYVxyXG4gKiAuc2V0SW1tZWRpYXRlKSwgd2hpY2ggd291bGQgY2F1c2UgSW5kZXhlZERCIHRvIGVuZCB0aGUgdHJhbnNhY3Rpb24uXHJcbiAqIFNlZSBQZXJzaXN0ZW5jZVByb21pc2UgZm9yIG1vcmUgZGV0YWlscy5cclxuICovXHJcbnZhciBTaW1wbGVEYiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFNpbXBsZURiKGRiKSB7XHJcbiAgICAgICAgdGhpcy5kYiA9IGRiO1xyXG4gICAgICAgIHZhciBpT1NWZXJzaW9uID0gU2ltcGxlRGIuZ2V0SU9TVmVyc2lvbih1dGlsLmdldFVBKCkpO1xyXG4gICAgICAgIC8vIE5PVEU6IEFjY29yZGluZyB0byBodHRwczovL2J1Z3Mud2Via2l0Lm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MTk3MDUwLCB0aGVcclxuICAgICAgICAvLyBidWcgd2UncmUgY2hlY2tpbmcgZm9yIHNob3VsZCBleGlzdCBpbiBpT1MgPj0gMTIuMiBhbmQgPCAxMywgYnV0IGZvclxyXG4gICAgICAgIC8vIHdoYXRldmVyIHJlYXNvbiBpdCdzIG11Y2ggaGFyZGVyIHRvIGhpdCBhZnRlciAxMi4yIHNvIHdlIG9ubHkgcHJvYWN0aXZlbHlcclxuICAgICAgICAvLyBsb2cgb24gMTIuMi5cclxuICAgICAgICBpZiAoaU9TVmVyc2lvbiA9PT0gMTIuMikge1xyXG4gICAgICAgICAgICBlcnJvcignRmlyZXN0b3JlIHBlcnNpc3RlbmNlIHN1ZmZlcnMgZnJvbSBhIGJ1ZyBpbiBpT1MgMTIuMiAnICtcclxuICAgICAgICAgICAgICAgICdTYWZhcmkgdGhhdCBtYXkgY2F1c2UgeW91ciBhcHAgdG8gc3RvcCB3b3JraW5nLiBTZWUgJyArXHJcbiAgICAgICAgICAgICAgICAnaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xLzU2NDk2Mjk2LzExMDkxNSBmb3IgZGV0YWlscyAnICtcclxuICAgICAgICAgICAgICAgICdhbmQgYSBwb3RlbnRpYWwgd29ya2Fyb3VuZC4nKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIE9wZW5zIHRoZSBzcGVjaWZpZWQgZGF0YWJhc2UsIGNyZWF0aW5nIG9yIHVwZ3JhZGluZyBpdCBpZiBuZWNlc3NhcnkuXHJcbiAgICAgKlxyXG4gICAgICogTm90ZSB0aGF0IGB2ZXJzaW9uYCBtdXN0IG5vdCBiZSBhIGRvd25ncmFkZS4gSW5kZXhlZERCIGRvZXMgbm90IHN1cHBvcnQgZG93bmdyYWRpbmcgdGhlIHNjaGVtYVxyXG4gICAgICogdmVyc2lvbi4gV2UgY3VycmVudGx5IGRvIG5vdCBzdXBwb3J0IGFueSB3YXkgdG8gZG8gdmVyc2lvbmluZyBvdXRzaWRlIG9mIEluZGV4ZWREQidzIHZlcnNpb25pbmdcclxuICAgICAqIG1lY2hhbmlzbSwgYXMgb25seSB2ZXJzaW9uLXVwZ3JhZGUgdHJhbnNhY3Rpb25zIGFyZSBhbGxvd2VkIHRvIGRvIHRoaW5ncyBsaWtlIGNyZWF0ZVxyXG4gICAgICogb2JqZWN0c3RvcmVzLlxyXG4gICAgICovXHJcbiAgICBTaW1wbGVEYi5vcGVuT3JDcmVhdGUgPSBmdW5jdGlvbiAobmFtZSwgdmVyc2lvbiwgc2NoZW1hQ29udmVydGVyKSB7XHJcbiAgICAgICAgYXNzZXJ0KFNpbXBsZURiLmlzQXZhaWxhYmxlKCksICdJbmRleGVkREIgbm90IHN1cHBvcnRlZCBpbiBjdXJyZW50IGVudmlyb25tZW50LicpO1xyXG4gICAgICAgIGRlYnVnKExPR19UQUcsICdPcGVuaW5nIGRhdGFiYXNlOicsIG5hbWUpO1xyXG4gICAgICAgIHJldHVybiBuZXcgUGVyc2lzdGVuY2VQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgLy8gVE9ETyhtaWtlbGVoZW4pOiBJbnZlc3RpZ2F0ZSBicm93c2VyIGNvbXBhdGliaWxpdHkuXHJcbiAgICAgICAgICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9JbmRleGVkREJfQVBJL1VzaW5nX0luZGV4ZWREQlxyXG4gICAgICAgICAgICAvLyBzdWdnZXN0cyBJRTkgYW5kIG9sZGVyIFdlYktpdCBicm93c2VycyBoYW5kbGUgdXBncmFkZVxyXG4gICAgICAgICAgICAvLyBkaWZmZXJlbnRseS4gVGhleSBleHBlY3Qgc2V0VmVyc2lvbiwgYXMgZGVzY3JpYmVkIGhlcmU6XHJcbiAgICAgICAgICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9JREJWZXJzaW9uQ2hhbmdlUmVxdWVzdC9zZXRWZXJzaW9uXHJcbiAgICAgICAgICAgIHZhciByZXF1ZXN0ID0gd2luZG93LmluZGV4ZWREQi5vcGVuKG5hbWUsIHZlcnNpb24pO1xyXG4gICAgICAgICAgICByZXF1ZXN0Lm9uc3VjY2VzcyA9IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGRiID0gZXZlbnQudGFyZ2V0LnJlc3VsdDtcclxuICAgICAgICAgICAgICAgIHJlc29sdmUobmV3IFNpbXBsZURiKGRiKSk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHJlcXVlc3Qub25ibG9ja2VkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcmVqZWN0KG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLkZBSUxFRF9QUkVDT05ESVRJT04sICdDYW5ub3QgdXBncmFkZSBJbmRleGVkREIgc2NoZW1hIHdoaWxlIGFub3RoZXIgdGFiIGlzIG9wZW4uICcgK1xyXG4gICAgICAgICAgICAgICAgICAgICdDbG9zZSBhbGwgdGFicyB0aGF0IGFjY2VzcyBGaXJlc3RvcmUgYW5kIHJlbG9hZCB0aGlzIHBhZ2UgdG8gcHJvY2VlZC4nKSk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHJlcXVlc3Qub25lcnJvciA9IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGVycm9yID0gZXZlbnQudGFyZ2V0LmVycm9yO1xyXG4gICAgICAgICAgICAgICAgaWYgKGVycm9yLm5hbWUgPT09ICdWZXJzaW9uRXJyb3InKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLkZBSUxFRF9QUkVDT05ESVRJT04sICdBIG5ld2VyIHZlcnNpb24gb2YgdGhlIEZpcmVzdG9yZSBTREsgd2FzIHByZXZpb3VzbHkgdXNlZCBhbmQgc28gdGhlIHBlcnNpc3RlZCAnICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ2RhdGEgaXMgbm90IGNvbXBhdGlibGUgd2l0aCB0aGUgdmVyc2lvbiBvZiB0aGUgU0RLIHlvdSBhcmUgbm93IHVzaW5nLiBUaGUgU0RLICcgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnd2lsbCBvcGVyYXRlIHdpdGggcGVyc2lzdGVuY2UgZGlzYWJsZWQuIElmIHlvdSBuZWVkIHBlcnNpc3RlbmNlLCBwbGVhc2UgJyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICdyZS11cGdyYWRlIHRvIGEgbmV3ZXIgdmVyc2lvbiBvZiB0aGUgU0RLIG9yIGVsc2UgY2xlYXIgdGhlIHBlcnNpc3RlZCBJbmRleGVkREIgJyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICdkYXRhIGZvciB5b3VyIGFwcCB0byBzdGFydCBmcmVzaC4nKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZWplY3QoZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICByZXF1ZXN0Lm9udXBncmFkZW5lZWRlZCA9IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICAgICAgZGVidWcoTE9HX1RBRywgJ0RhdGFiYXNlIFwiJyArIG5hbWUgKyAnXCIgcmVxdWlyZXMgdXBncmFkZSBmcm9tIHZlcnNpb246JywgZXZlbnQub2xkVmVyc2lvbik7XHJcbiAgICAgICAgICAgICAgICB2YXIgZGIgPSBldmVudC50YXJnZXQucmVzdWx0O1xyXG4gICAgICAgICAgICAgICAgc2NoZW1hQ29udmVydGVyXHJcbiAgICAgICAgICAgICAgICAgICAgLmNyZWF0ZU9yVXBncmFkZShkYiwgcmVxdWVzdC50cmFuc2FjdGlvbiwgZXZlbnQub2xkVmVyc2lvbiwgU0NIRU1BX1ZFUlNJT04pXHJcbiAgICAgICAgICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlYnVnKExPR19UQUcsICdEYXRhYmFzZSB1cGdyYWRlIHRvIHZlcnNpb24gJyArIFNDSEVNQV9WRVJTSU9OICsgJyBjb21wbGV0ZScpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfSkudG9Qcm9taXNlKCk7XHJcbiAgICB9O1xyXG4gICAgLyoqIERlbGV0ZXMgdGhlIHNwZWNpZmllZCBkYXRhYmFzZS4gKi9cclxuICAgIFNpbXBsZURiLmRlbGV0ZSA9IGZ1bmN0aW9uIChuYW1lKSB7XHJcbiAgICAgICAgZGVidWcoTE9HX1RBRywgJ1JlbW92aW5nIGRhdGFiYXNlOicsIG5hbWUpO1xyXG4gICAgICAgIHJldHVybiB3cmFwUmVxdWVzdCh3aW5kb3cuaW5kZXhlZERCLmRlbGV0ZURhdGFiYXNlKG5hbWUpKS50b1Byb21pc2UoKTtcclxuICAgIH07XHJcbiAgICAvKiogUmV0dXJucyB0cnVlIGlmIEluZGV4ZWREQiBpcyBhdmFpbGFibGUgaW4gdGhlIGN1cnJlbnQgZW52aXJvbm1lbnQuICovXHJcbiAgICBTaW1wbGVEYi5pc0F2YWlsYWJsZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCcgfHwgd2luZG93LmluZGV4ZWREQiA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKFNpbXBsZURiLmlzTW9ja1BlcnNpc3RlbmNlKCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIEluIHNvbWUgTm9kZSBlbnZpcm9ubWVudHMsIGB3aW5kb3dgIGlzIGRlZmluZWQsIGJ1dCBgd2luZG93Lm5hdmlnYXRvcmAgaXNcclxuICAgICAgICAvLyBub3QuIFdlIGRvbid0IHN1cHBvcnQgSW5kZXhlZERCIHBlcnNpc3RlbmNlIGluIE5vZGUgaWYgdGhlXHJcbiAgICAgICAgLy8gaXNNb2NrUGVyc2lzdGVuY2UoKSBjaGVjayBhYm92ZSByZXR1cm5zIGZhbHNlLlxyXG4gICAgICAgIGlmICh3aW5kb3cubmF2aWdhdG9yID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBXZSBleHRlbnNpdmVseSB1c2UgaW5kZXhlZCBhcnJheSB2YWx1ZXMgYW5kIGNvbXBvdW5kIGtleXMsXHJcbiAgICAgICAgLy8gd2hpY2ggSUUgYW5kIEVkZ2UgZG8gbm90IHN1cHBvcnQuIEhvd2V2ZXIsIHRoZXkgc3RpbGwgaGF2ZSBpbmRleGVkREJcclxuICAgICAgICAvLyBkZWZpbmVkIG9uIHRoZSB3aW5kb3csIHNvIHdlIG5lZWQgdG8gY2hlY2sgZm9yIHRoZW0gaGVyZSBhbmQgbWFrZSBzdXJlXHJcbiAgICAgICAgLy8gdG8gcmV0dXJuIHRoYXQgcGVyc2lzdGVuY2UgaXMgbm90IGVuYWJsZWQgZm9yIHRob3NlIGJyb3dzZXJzLlxyXG4gICAgICAgIC8vIEZvciB0cmFja2luZyBzdXBwb3J0IG9mIHRoaXMgZmVhdHVyZSwgc2VlIGhlcmU6XHJcbiAgICAgICAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIubWljcm9zb2Z0LmNvbS9lbi11cy9taWNyb3NvZnQtZWRnZS9wbGF0Zm9ybS9zdGF0dXMvaW5kZXhlZGRiYXJyYXlzYW5kbXVsdGllbnRyeXN1cHBvcnQvXHJcbiAgICAgICAgLy8gQ2hlY2sgdGhlIFVBIHN0cmluZyB0byBmaW5kIG91dCB0aGUgYnJvd3Nlci5cclxuICAgICAgICB2YXIgdWEgPSB1dGlsLmdldFVBKCk7XHJcbiAgICAgICAgLy8gSUUgMTBcclxuICAgICAgICAvLyB1YSA9ICdNb3ppbGxhLzUuMCAoY29tcGF0aWJsZTsgTVNJRSAxMC4wOyBXaW5kb3dzIE5UIDYuMjsgVHJpZGVudC82LjApJztcclxuICAgICAgICAvLyBJRSAxMVxyXG4gICAgICAgIC8vIHVhID0gJ01vemlsbGEvNS4wIChXaW5kb3dzIE5UIDYuMzsgVHJpZGVudC83LjA7IHJ2OjExLjApIGxpa2UgR2Vja28nO1xyXG4gICAgICAgIC8vIEVkZ2VcclxuICAgICAgICAvLyB1YSA9ICdNb3ppbGxhLzUuMCAoV2luZG93cyBOVCAxMC4wOyBXT1c2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCxcclxuICAgICAgICAvLyBsaWtlIEdlY2tvKSBDaHJvbWUvMzkuMC4yMTcxLjcxIFNhZmFyaS81MzcuMzYgRWRnZS8xMi4wJztcclxuICAgICAgICAvLyBpT1MgU2FmYXJpOiBEaXNhYmxlIGZvciB1c2VycyBydW5uaW5nIGlPUyB2ZXJzaW9uIDwgMTAuXHJcbiAgICAgICAgdmFyIGlPU1ZlcnNpb24gPSBTaW1wbGVEYi5nZXRJT1NWZXJzaW9uKHVhKTtcclxuICAgICAgICB2YXIgaXNVbnN1cHBvcnRlZElPUyA9IDAgPCBpT1NWZXJzaW9uICYmIGlPU1ZlcnNpb24gPCAxMDtcclxuICAgICAgICAvLyBBbmRyb2lkIGJyb3dzZXI6IERpc2FibGUgZm9yIHVzZXJzZSBydW5uaW5nIHZlcnNpb24gPCA0LjUuXHJcbiAgICAgICAgdmFyIGFuZHJvaWRWZXJzaW9uID0gU2ltcGxlRGIuZ2V0QW5kcm9pZFZlcnNpb24odWEpO1xyXG4gICAgICAgIHZhciBpc1Vuc3VwcG9ydGVkQW5kcm9pZCA9IDAgPCBhbmRyb2lkVmVyc2lvbiAmJiBhbmRyb2lkVmVyc2lvbiA8IDQuNTtcclxuICAgICAgICBpZiAodWEuaW5kZXhPZignTVNJRSAnKSA+IDAgfHxcclxuICAgICAgICAgICAgdWEuaW5kZXhPZignVHJpZGVudC8nKSA+IDAgfHxcclxuICAgICAgICAgICAgdWEuaW5kZXhPZignRWRnZS8nKSA+IDAgfHxcclxuICAgICAgICAgICAgaXNVbnN1cHBvcnRlZElPUyB8fFxyXG4gICAgICAgICAgICBpc1Vuc3VwcG9ydGVkQW5kcm9pZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhlIGJhY2tpbmcgSW5kZXhlZERCIHN0b3JlIGlzIHRoZSBOb2RlIEluZGV4ZWREQlNoaW1cclxuICAgICAqIChzZWUgaHR0cHM6Ly9naXRodWIuY29tL2F4ZW1jbGlvbi9JbmRleGVkREJTaGltKS5cclxuICAgICAqL1xyXG4gICAgU2ltcGxlRGIuaXNNb2NrUGVyc2lzdGVuY2UgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIHJldHVybiAodHlwZW9mIHByb2Nlc3MgIT09ICd1bmRlZmluZWQnICYmXHJcbiAgICAgICAgICAgICgoX2EgPSBwcm9jZXNzLmVudikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLlVTRV9NT0NLX1BFUlNJU1RFTkNFKSA9PT0gJ1lFUycpO1xyXG4gICAgfTtcclxuICAgIC8qKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmcm9tIGEgdHJhbnNhY3Rpb24uICovXHJcbiAgICBTaW1wbGVEYi5nZXRTdG9yZSA9IGZ1bmN0aW9uICh0eG4sIHN0b3JlKSB7XHJcbiAgICAgICAgcmV0dXJuIHR4bi5zdG9yZShzdG9yZSk7XHJcbiAgICB9O1xyXG4gICAgLy8gdmlzaWJsZSBmb3IgdGVzdGluZ1xyXG4gICAgLyoqIFBhcnNlIFVzZXIgQWdlbnQgdG8gZGV0ZXJtaW5lIGlPUyB2ZXJzaW9uLiBSZXR1cm5zIC0xIGlmIG5vdCBmb3VuZC4gKi9cclxuICAgIFNpbXBsZURiLmdldElPU1ZlcnNpb24gPSBmdW5jdGlvbiAodWEpIHtcclxuICAgICAgICB2YXIgaU9TVmVyc2lvblJlZ2V4ID0gdWEubWF0Y2goL2koPzpwaG9uZXxwYWR8cG9kKSBvcyAoW1xcZF9dKykvaSk7XHJcbiAgICAgICAgdmFyIHZlcnNpb24gPSBpT1NWZXJzaW9uUmVnZXhcclxuICAgICAgICAgICAgPyBpT1NWZXJzaW9uUmVnZXhbMV1cclxuICAgICAgICAgICAgICAgIC5zcGxpdCgnXycpXHJcbiAgICAgICAgICAgICAgICAuc2xpY2UoMCwgMilcclxuICAgICAgICAgICAgICAgIC5qb2luKCcuJylcclxuICAgICAgICAgICAgOiAnLTEnO1xyXG4gICAgICAgIHJldHVybiBOdW1iZXIodmVyc2lvbik7XHJcbiAgICB9O1xyXG4gICAgLy8gdmlzaWJsZSBmb3IgdGVzdGluZ1xyXG4gICAgLyoqIFBhcnNlIFVzZXIgQWdlbnQgdG8gZGV0ZXJtaW5lIEFuZHJvaWQgdmVyc2lvbi4gUmV0dXJucyAtMSBpZiBub3QgZm91bmQuICovXHJcbiAgICBTaW1wbGVEYi5nZXRBbmRyb2lkVmVyc2lvbiA9IGZ1bmN0aW9uICh1YSkge1xyXG4gICAgICAgIHZhciBhbmRyb2lkVmVyc2lvblJlZ2V4ID0gdWEubWF0Y2goL0FuZHJvaWQgKFtcXGQuXSspL2kpO1xyXG4gICAgICAgIHZhciB2ZXJzaW9uID0gYW5kcm9pZFZlcnNpb25SZWdleFxyXG4gICAgICAgICAgICA/IGFuZHJvaWRWZXJzaW9uUmVnZXhbMV1cclxuICAgICAgICAgICAgICAgIC5zcGxpdCgnLicpXHJcbiAgICAgICAgICAgICAgICAuc2xpY2UoMCwgMilcclxuICAgICAgICAgICAgICAgIC5qb2luKCcuJylcclxuICAgICAgICAgICAgOiAnLTEnO1xyXG4gICAgICAgIHJldHVybiBOdW1iZXIodmVyc2lvbik7XHJcbiAgICB9O1xyXG4gICAgU2ltcGxlRGIucHJvdG90eXBlLnNldFZlcnNpb25DaGFuZ2VMaXN0ZW5lciA9IGZ1bmN0aW9uICh2ZXJzaW9uQ2hhbmdlTGlzdGVuZXIpIHtcclxuICAgICAgICB0aGlzLmRiLm9udmVyc2lvbmNoYW5nZSA9IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdmVyc2lvbkNoYW5nZUxpc3RlbmVyKGV2ZW50KTtcclxuICAgICAgICB9O1xyXG4gICAgfTtcclxuICAgIFNpbXBsZURiLnByb3RvdHlwZS5ydW5UcmFuc2FjdGlvbiA9IGZ1bmN0aW9uIChtb2RlLCBvYmplY3RTdG9yZXMsIHRyYW5zYWN0aW9uRm4pIHtcclxuICAgICAgICByZXR1cm4gdHNsaWIuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciByZWFkb25seSwgaWRlbXBvdGVudCwgYXR0ZW1wdE51bWJlciwgX2xvb3BfMSwgdGhpc18xLCBzdGF0ZV8xO1xyXG4gICAgICAgICAgICByZXR1cm4gdHNsaWIuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWFkb25seSA9IG1vZGUuc3RhcnRzV2l0aCgncmVhZG9ubHknKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWRlbXBvdGVudCA9IG1vZGUuZW5kc1dpdGgoJ2lkZW1wb3RlbnQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXR0ZW1wdE51bWJlciA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9sb29wXzEgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdHJhbnNhY3Rpb24sIHRyYW5zYWN0aW9uRm5SZXN1bHQsIGVycm9yXzEsIHJldHJ5YWJsZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0c2xpYi5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsrYXR0ZW1wdE51bWJlcjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uID0gU2ltcGxlRGJUcmFuc2FjdGlvbi5vcGVuKHRoaXNfMS5kYiwgcmVhZG9ubHkgPyAncmVhZG9ubHknIDogJ3JlYWR3cml0ZScsIG9iamVjdFN0b3Jlcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9hLnRyeXMucHVzaChbMSwgMywgLCA0XSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2FjdGlvbkZuUmVzdWx0ID0gdHJhbnNhY3Rpb25Gbih0cmFuc2FjdGlvbilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWJvcnQgdGhlIHRyYW5zYWN0aW9uIGlmIHRoZXJlIHdhcyBhbiBlcnJvci5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2FjdGlvbi5hYm9ydChlcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gV2UgY2Fubm90IGFjdHVhbGx5IHJlY292ZXIsIGFuZCBjYWxsaW5nIGBhYm9ydCgpYCB3aWxsIGNhdXNlIHRoZSB0cmFuc2FjdGlvbidzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29tcGxldGlvbiBwcm9taXNlIHRvIGJlIHJlamVjdGVkLiBUaGlzIGluIHR1cm4gbWVhbnMgdGhhdCB3ZSB3b24ndCB1c2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBgdHJhbnNhY3Rpb25GblJlc3VsdGAgYmVsb3cuIFdlIHJldHVybiBhIHJlamVjdGlvbiBoZXJlIHNvIHRoYXQgd2UgZG9uJ3QgYWRkIHRoZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHBvc3NpYmlsaXR5IG9mIHJldHVybmluZyBgdm9pZGAgdG8gdGhlIHR5cGUgb2YgYHRyYW5zYWN0aW9uRm5SZXN1bHRgLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVqZWN0KGVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRvUHJvbWlzZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQXMgbm90ZWQgYWJvdmUsIGVycm9ycyBhcmUgcHJvcGFnYXRlZCBieSBhYm9ydGluZyB0aGUgdHJhbnNhY3Rpb24uIFNvXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB3ZSBzd2FsbG93IGFueSBlcnJvciBoZXJlIHRvIGF2b2lkIHRoZSBicm93c2VyIGxvZ2dpbmcgaXQgYXMgdW5oYW5kbGVkLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb25GblJlc3VsdC5jYXRjaChmdW5jdGlvbiAoKSB7IH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gV2FpdCBmb3IgdGhlIHRyYW5zYWN0aW9uIHRvIGNvbXBsZXRlIChpLmUuIEluZGV4ZWREYidzIG9uc3VjY2VzcyBldmVudCB0b1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZmlyZSksIGJ1dCBzdGlsbCByZXR1cm4gdGhlIG9yaWdpbmFsIHRyYW5zYWN0aW9uRm5SZXN1bHQgYmFjayB0byB0aGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNhbGxlci5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRyYW5zYWN0aW9uLmNvbXBsZXRpb25Qcm9taXNlXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gV2FpdCBmb3IgdGhlIHRyYW5zYWN0aW9uIHRvIGNvbXBsZXRlIChpLmUuIEluZGV4ZWREYidzIG9uc3VjY2VzcyBldmVudCB0b1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZmlyZSksIGJ1dCBzdGlsbCByZXR1cm4gdGhlIG9yaWdpbmFsIHRyYW5zYWN0aW9uRm5SZXN1bHQgYmFjayB0byB0aGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNhbGxlci5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB7IHZhbHVlOiB0cmFuc2FjdGlvbkZuUmVzdWx0IH1dO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvcl8xID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0cnlhYmxlID0gaWRlbXBvdGVudCAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yXzEubmFtZSAhPT0gJ0ZpcmViYXNlRXJyb3InICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0ZW1wdE51bWJlciA8IFRSQU5TQUNUSU9OX1JFVFJZX0NPVU5UO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVidWcoTE9HX1RBRywgJ1RyYW5zYWN0aW9uIGZhaWxlZCB3aXRoIGVycm9yOiAlcy4gUmV0cnlpbmc6ICVzLicsIGVycm9yXzEubWVzc2FnZSwgcmV0cnlhYmxlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghcmV0cnlhYmxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHsgdmFsdWU6IFByb21pc2UucmVqZWN0KGVycm9yXzEpIH1dO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgNF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzXzEgPSB0aGlzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzUgLyp5aWVsZCoqLywgX2xvb3BfMSgpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlXzEgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygc3RhdGVfMSA9PT0gXCJvYmplY3RcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBzdGF0ZV8xLnZhbHVlXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgMV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOiByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIFNpbXBsZURiLnByb3RvdHlwZS5jbG9zZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmRiLmNsb3NlKCk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFNpbXBsZURiO1xyXG59KCkpO1xyXG4vKipcclxuICogQSBjb250cm9sbGVyIGZvciBpdGVyYXRpbmcgb3ZlciBhIGtleSByYW5nZSBvciBpbmRleC4gSXQgYWxsb3dzIGFuIGl0ZXJhdGVcclxuICogY2FsbGJhY2sgdG8gZGVsZXRlIHRoZSBjdXJyZW50bHktcmVmZXJlbmNlZCBvYmplY3QsIG9yIGp1bXAgdG8gYSBuZXcga2V5XHJcbiAqIHdpdGhpbiB0aGUga2V5IHJhbmdlIG9yIGluZGV4LlxyXG4gKi9cclxudmFyIEl0ZXJhdGlvbkNvbnRyb2xsZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBJdGVyYXRpb25Db250cm9sbGVyKGRiQ3Vyc29yKSB7XHJcbiAgICAgICAgdGhpcy5kYkN1cnNvciA9IGRiQ3Vyc29yO1xyXG4gICAgICAgIHRoaXMuc2hvdWxkU3RvcCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMubmV4dEtleSA9IG51bGw7XHJcbiAgICB9XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoSXRlcmF0aW9uQ29udHJvbGxlci5wcm90b3R5cGUsIFwiaXNEb25lXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2hvdWxkU3RvcDtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShJdGVyYXRpb25Db250cm9sbGVyLnByb3RvdHlwZSwgXCJza2lwVG9LZXlcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5uZXh0S2V5O1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEl0ZXJhdGlvbkNvbnRyb2xsZXIucHJvdG90eXBlLCBcImN1cnNvclwiLCB7XHJcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICAgICAgdGhpcy5kYkN1cnNvciA9IHZhbHVlO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgLyoqXHJcbiAgICAgKiBUaGlzIGZ1bmN0aW9uIGNhbiBiZSBjYWxsZWQgdG8gc3RvcCBpdGVyYXRpb24gYXQgYW55IHBvaW50LlxyXG4gICAgICovXHJcbiAgICBJdGVyYXRpb25Db250cm9sbGVyLnByb3RvdHlwZS5kb25lID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuc2hvdWxkU3RvcCA9IHRydWU7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBUaGlzIGZ1bmN0aW9uIGNhbiBiZSBjYWxsZWQgdG8gc2tpcCB0byB0aGF0IG5leHQga2V5LCB3aGljaCBjb3VsZCBiZVxyXG4gICAgICogYW4gaW5kZXggb3IgYSBwcmltYXJ5IGtleS5cclxuICAgICAqL1xyXG4gICAgSXRlcmF0aW9uQ29udHJvbGxlci5wcm90b3R5cGUuc2tpcCA9IGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICB0aGlzLm5leHRLZXkgPSBrZXk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBEZWxldGUgdGhlIGN1cnJlbnQgY3Vyc29yIHZhbHVlIGZyb20gdGhlIG9iamVjdCBzdG9yZS5cclxuICAgICAqXHJcbiAgICAgKiBOT1RFOiBZb3UgQ0FOTk9UIGRvIHRoaXMgd2l0aCBhIGtleXNPbmx5IHF1ZXJ5LlxyXG4gICAgICovXHJcbiAgICBJdGVyYXRpb25Db250cm9sbGVyLnByb3RvdHlwZS5kZWxldGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHdyYXBSZXF1ZXN0KHRoaXMuZGJDdXJzb3IuZGVsZXRlKCkpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBJdGVyYXRpb25Db250cm9sbGVyO1xyXG59KCkpO1xyXG4vKipcclxuICogV3JhcHMgYW4gSURCVHJhbnNhY3Rpb24gYW5kIGV4cG9zZXMgYSBzdG9yZSgpIG1ldGhvZCB0byBnZXQgYSBoYW5kbGUgdG8gYVxyXG4gKiBzcGVjaWZpYyBvYmplY3Qgc3RvcmUuXHJcbiAqL1xyXG52YXIgU2ltcGxlRGJUcmFuc2FjdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFNpbXBsZURiVHJhbnNhY3Rpb24odHJhbnNhY3Rpb24pIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMudHJhbnNhY3Rpb24gPSB0cmFuc2FjdGlvbjtcclxuICAgICAgICB0aGlzLmFib3J0ZWQgPSBmYWxzZTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBBIHByb21pc2UgdGhhdCByZXNvbHZlcyB3aXRoIHRoZSByZXN1bHQgb2YgdGhlIEluZGV4ZWREYiB0cmFuc2FjdGlvbi5cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLmNvbXBsZXRpb25EZWZlcnJlZCA9IG5ldyBEZWZlcnJlZCgpO1xyXG4gICAgICAgIHRoaXMudHJhbnNhY3Rpb24ub25jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgX3RoaXMuY29tcGxldGlvbkRlZmVycmVkLnJlc29sdmUoKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMudHJhbnNhY3Rpb24ub25hYm9ydCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKHRyYW5zYWN0aW9uLmVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5jb21wbGV0aW9uRGVmZXJyZWQucmVqZWN0KHRyYW5zYWN0aW9uLmVycm9yKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLmNvbXBsZXRpb25EZWZlcnJlZC5yZXNvbHZlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMudHJhbnNhY3Rpb24ub25lcnJvciA9IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICB2YXIgZXJyb3IgPSBjaGVja0ZvckFuZFJlcG9ydGlPU0Vycm9yKGV2ZW50LnRhcmdldC5lcnJvcik7XHJcbiAgICAgICAgICAgIF90aGlzLmNvbXBsZXRpb25EZWZlcnJlZC5yZWplY3QoZXJyb3IpO1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICBTaW1wbGVEYlRyYW5zYWN0aW9uLm9wZW4gPSBmdW5jdGlvbiAoZGIsIG1vZGUsIG9iamVjdFN0b3JlTmFtZXMpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFNpbXBsZURiVHJhbnNhY3Rpb24oZGIudHJhbnNhY3Rpb24ob2JqZWN0U3RvcmVOYW1lcywgbW9kZSkpO1xyXG4gICAgfTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTaW1wbGVEYlRyYW5zYWN0aW9uLnByb3RvdHlwZSwgXCJjb21wbGV0aW9uUHJvbWlzZVwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbXBsZXRpb25EZWZlcnJlZC5wcm9taXNlO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgU2ltcGxlRGJUcmFuc2FjdGlvbi5wcm90b3R5cGUuYWJvcnQgPSBmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgdGhpcy5jb21wbGV0aW9uRGVmZXJyZWQucmVqZWN0KGVycm9yKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCF0aGlzLmFib3J0ZWQpIHtcclxuICAgICAgICAgICAgZGVidWcoTE9HX1RBRywgJ0Fib3J0aW5nIHRyYW5zYWN0aW9uOicsIGVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdDbGllbnQtaW5pdGlhdGVkIGFib3J0Jyk7XHJcbiAgICAgICAgICAgIHRoaXMuYWJvcnRlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIHRoaXMudHJhbnNhY3Rpb24uYWJvcnQoKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIGEgU2ltcGxlRGJTdG9yZTxLZXlUeXBlLCBWYWx1ZVR5cGU+IGZvciB0aGUgc3BlY2lmaWVkIHN0b3JlLiBBbGxcclxuICAgICAqIG9wZXJhdGlvbnMgcGVyZm9ybWVkIG9uIHRoZSBTaW1wbGVEYlN0b3JlIGhhcHBlbiB3aXRoaW4gdGhlIGNvbnRleHQgb2YgdGhpc1xyXG4gICAgICogdHJhbnNhY3Rpb24gYW5kIGl0IGNhbm5vdCBiZSB1c2VkIGFueW1vcmUgb25jZSB0aGUgdHJhbnNhY3Rpb24gaXNcclxuICAgICAqIGNvbXBsZXRlZC5cclxuICAgICAqXHJcbiAgICAgKiBOb3RlIHRoYXQgd2UgY2FuJ3QgYWN0dWFsbHkgZW5mb3JjZSB0aGF0IHRoZSBLZXlUeXBlIGFuZCBWYWx1ZVR5cGUgYXJlXHJcbiAgICAgKiBjb3JyZWN0LCBidXQgdGhleSBhbGxvdyB0eXBlIHNhZmV0eSB0aHJvdWdoIHRoZSByZXN0IG9mIHRoZSBjb25zdW1pbmcgY29kZS5cclxuICAgICAqL1xyXG4gICAgU2ltcGxlRGJUcmFuc2FjdGlvbi5wcm90b3R5cGUuc3RvcmUgPSBmdW5jdGlvbiAoc3RvcmVOYW1lKSB7XHJcbiAgICAgICAgdmFyIHN0b3JlID0gdGhpcy50cmFuc2FjdGlvbi5vYmplY3RTdG9yZShzdG9yZU5hbWUpO1xyXG4gICAgICAgIGFzc2VydCghIXN0b3JlLCAnT2JqZWN0IHN0b3JlIG5vdCBwYXJ0IG9mIHRyYW5zYWN0aW9uOiAnICsgc3RvcmVOYW1lKTtcclxuICAgICAgICByZXR1cm4gbmV3IFNpbXBsZURiU3RvcmUoc3RvcmUpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBTaW1wbGVEYlRyYW5zYWN0aW9uO1xyXG59KCkpO1xyXG4vKipcclxuICogQSB3cmFwcGVyIGFyb3VuZCBhbiBJREJPYmplY3RTdG9yZSBwcm92aWRpbmcgYW4gQVBJIHRoYXQ6XHJcbiAqXHJcbiAqIDEpIEhhcyBnZW5lcmljIEtleVR5cGUgLyBWYWx1ZVR5cGUgcGFyYW1ldGVycyB0byBwcm92aWRlIHN0cm9uZ2x5LXR5cGVkXHJcbiAqIG1ldGhvZHMgZm9yIGFjdGluZyBhZ2FpbnN0IHRoZSBvYmplY3Qgc3RvcmUuXHJcbiAqIDIpIERlYWxzIHdpdGggSW5kZXhlZERCJ3Mgb25zdWNjZXNzIC8gb25lcnJvciBldmVudCBjYWxsYmFja3MsIG1ha2luZyBldmVyeVxyXG4gKiBtZXRob2QgcmV0dXJuIGEgUGVyc2lzdGVuY2VQcm9taXNlIGluc3RlYWQuXHJcbiAqIDMpIFByb3ZpZGVzIGEgaGlnaGVyLWxldmVsIEFQSSB0byBhdm9pZCBuZWVkaW5nIHRvIGRvIGV4Y2Vzc2l2ZSB3cmFwcGluZyBvZlxyXG4gKiBpbnRlcm1lZGlhdGUgSW5kZXhlZERCIHR5cGVzIChJREJDdXJzb3JXaXRoVmFsdWUsIGV0Yy4pXHJcbiAqL1xyXG52YXIgU2ltcGxlRGJTdG9yZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFNpbXBsZURiU3RvcmUoc3RvcmUpIHtcclxuICAgICAgICB0aGlzLnN0b3JlID0gc3RvcmU7XHJcbiAgICB9XHJcbiAgICBTaW1wbGVEYlN0b3JlLnByb3RvdHlwZS5wdXQgPSBmdW5jdGlvbiAoa2V5T3JWYWx1ZSwgdmFsdWUpIHtcclxuICAgICAgICB2YXIgcmVxdWVzdDtcclxuICAgICAgICBpZiAodmFsdWUgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBkZWJ1ZyhMT0dfVEFHLCAnUFVUJywgdGhpcy5zdG9yZS5uYW1lLCBrZXlPclZhbHVlLCB2YWx1ZSk7XHJcbiAgICAgICAgICAgIHJlcXVlc3QgPSB0aGlzLnN0b3JlLnB1dCh2YWx1ZSwga2V5T3JWYWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBkZWJ1ZyhMT0dfVEFHLCAnUFVUJywgdGhpcy5zdG9yZS5uYW1lLCAnPGF1dG8ta2V5PicsIGtleU9yVmFsdWUpO1xyXG4gICAgICAgICAgICByZXF1ZXN0ID0gdGhpcy5zdG9yZS5wdXQoa2V5T3JWYWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB3cmFwUmVxdWVzdChyZXF1ZXN0KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEFkZHMgYSBuZXcgdmFsdWUgaW50byBhbiBPYmplY3QgU3RvcmUgYW5kIHJldHVybnMgdGhlIG5ldyBrZXkuIFNpbWlsYXIgdG9cclxuICAgICAqIEluZGV4ZWREYidzIGBhZGQoKWAsIHRoaXMgbWV0aG9kIHdpbGwgZmFpbCBvbiBwcmltYXJ5IGtleSBjb2xsaXNpb25zLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB2YWx1ZSBUaGUgb2JqZWN0IHRvIHdyaXRlLlxyXG4gICAgICogQHJldHVybiBUaGUga2V5IG9mIHRoZSB2YWx1ZSB0byBhZGQuXHJcbiAgICAgKi9cclxuICAgIFNpbXBsZURiU3RvcmUucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgIGRlYnVnKExPR19UQUcsICdBREQnLCB0aGlzLnN0b3JlLm5hbWUsIHZhbHVlLCB2YWx1ZSk7XHJcbiAgICAgICAgdmFyIHJlcXVlc3QgPSB0aGlzLnN0b3JlLmFkZCh2YWx1ZSk7XHJcbiAgICAgICAgcmV0dXJuIHdyYXBSZXF1ZXN0KHJlcXVlc3QpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogR2V0cyB0aGUgb2JqZWN0IHdpdGggdGhlIHNwZWNpZmllZCBrZXkgZnJvbSB0aGUgc3BlY2lmaWVkIHN0b3JlLCBvciBudWxsXHJcbiAgICAgKiBpZiBubyBvYmplY3QgZXhpc3RzIHdpdGggdGhlIHNwZWNpZmllZCBrZXkuXHJcbiAgICAgKlxyXG4gICAgICogQGtleSBUaGUga2V5IG9mIHRoZSBvYmplY3QgdG8gZ2V0LlxyXG4gICAgICogQHJldHVybiBUaGUgb2JqZWN0IHdpdGggdGhlIHNwZWNpZmllZCBrZXkgb3IgbnVsbCBpZiBubyBvYmplY3QgZXhpc3RzLlxyXG4gICAgICovXHJcbiAgICBTaW1wbGVEYlN0b3JlLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgcmVxdWVzdCA9IHRoaXMuc3RvcmUuZ2V0KGtleSk7XHJcbiAgICAgICAgLy8gV2UncmUgZG9pbmcgYW4gdW5zYWZlIGNhc3QgdG8gVmFsdWVUeXBlLlxyXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbiAgICAgICAgcmV0dXJuIHdyYXBSZXF1ZXN0KHJlcXVlc3QpLm5leHQoZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAvLyBOb3JtYWxpemUgbm9uZXhpc3RlbmNlIHRvIG51bGwuXHJcbiAgICAgICAgICAgIGlmIChyZXN1bHQgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBkZWJ1ZyhMT0dfVEFHLCAnR0VUJywgX3RoaXMuc3RvcmUubmFtZSwga2V5LCByZXN1bHQpO1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIFNpbXBsZURiU3RvcmUucHJvdG90eXBlLmRlbGV0ZSA9IGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICBkZWJ1ZyhMT0dfVEFHLCAnREVMRVRFJywgdGhpcy5zdG9yZS5uYW1lLCBrZXkpO1xyXG4gICAgICAgIHZhciByZXF1ZXN0ID0gdGhpcy5zdG9yZS5kZWxldGUoa2V5KTtcclxuICAgICAgICByZXR1cm4gd3JhcFJlcXVlc3QocmVxdWVzdCk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBJZiB3ZSBldmVyIG5lZWQgbW9yZSBvZiB0aGUgY291bnQgdmFyaWFudHMsIHdlIGNhbiBhZGQgb3ZlcmxvYWRzLiBGb3Igbm93LFxyXG4gICAgICogYWxsIHdlIG5lZWQgaXMgdG8gY291bnQgZXZlcnl0aGluZyBpbiBhIHN0b3JlLlxyXG4gICAgICpcclxuICAgICAqIFJldHVybnMgdGhlIG51bWJlciBvZiByb3dzIGluIHRoZSBzdG9yZS5cclxuICAgICAqL1xyXG4gICAgU2ltcGxlRGJTdG9yZS5wcm90b3R5cGUuY291bnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgZGVidWcoTE9HX1RBRywgJ0NPVU5UJywgdGhpcy5zdG9yZS5uYW1lKTtcclxuICAgICAgICB2YXIgcmVxdWVzdCA9IHRoaXMuc3RvcmUuY291bnQoKTtcclxuICAgICAgICByZXR1cm4gd3JhcFJlcXVlc3QocmVxdWVzdCk7XHJcbiAgICB9O1xyXG4gICAgU2ltcGxlRGJTdG9yZS5wcm90b3R5cGUubG9hZEFsbCA9IGZ1bmN0aW9uIChpbmRleE9yUmFuZ2UsIHJhbmdlKSB7XHJcbiAgICAgICAgdmFyIGN1cnNvciA9IHRoaXMuY3Vyc29yKHRoaXMub3B0aW9ucyhpbmRleE9yUmFuZ2UsIHJhbmdlKSk7XHJcbiAgICAgICAgdmFyIHJlc3VsdHMgPSBbXTtcclxuICAgICAgICByZXR1cm4gdGhpcy5pdGVyYXRlQ3Vyc29yKGN1cnNvciwgZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcclxuICAgICAgICAgICAgcmVzdWx0cy5wdXNoKHZhbHVlKTtcclxuICAgICAgICB9KS5uZXh0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdHM7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgU2ltcGxlRGJTdG9yZS5wcm90b3R5cGUuZGVsZXRlQWxsID0gZnVuY3Rpb24gKGluZGV4T3JSYW5nZSwgcmFuZ2UpIHtcclxuICAgICAgICBkZWJ1ZyhMT0dfVEFHLCAnREVMRVRFIEFMTCcsIHRoaXMuc3RvcmUubmFtZSk7XHJcbiAgICAgICAgdmFyIG9wdGlvbnMgPSB0aGlzLm9wdGlvbnMoaW5kZXhPclJhbmdlLCByYW5nZSk7XHJcbiAgICAgICAgb3B0aW9ucy5rZXlzT25seSA9IGZhbHNlO1xyXG4gICAgICAgIHZhciBjdXJzb3IgPSB0aGlzLmN1cnNvcihvcHRpb25zKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5pdGVyYXRlQ3Vyc29yKGN1cnNvciwgZnVuY3Rpb24gKGtleSwgdmFsdWUsIGNvbnRyb2wpIHtcclxuICAgICAgICAgICAgLy8gTk9URTogQ2FsbGluZyBkZWxldGUoKSBvbiBhIGN1cnNvciBpcyBkb2N1bWVudGVkIGFzIG1vcmUgZWZmaWNpZW50IHRoYW5cclxuICAgICAgICAgICAgLy8gY2FsbGluZyBkZWxldGUoKSBvbiBhbiBvYmplY3Qgc3RvcmUgd2l0aCBhIHNpbmdsZSBrZXlcclxuICAgICAgICAgICAgLy8gKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9JREJPYmplY3RTdG9yZS9kZWxldGUpLFxyXG4gICAgICAgICAgICAvLyBob3dldmVyLCB0aGlzIHJlcXVpcmVzIHVzICpub3QqIHRvIHVzZSBhIGtleXNPbmx5IGN1cnNvclxyXG4gICAgICAgICAgICAvLyAoaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0lEQkN1cnNvci9kZWxldGUpLiBXZVxyXG4gICAgICAgICAgICAvLyBtYXkgd2FudCB0byBjb21wYXJlIHRoZSBwZXJmb3JtYW5jZSBvZiBlYWNoIG1ldGhvZC5cclxuICAgICAgICAgICAgcmV0dXJuIGNvbnRyb2wuZGVsZXRlKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgU2ltcGxlRGJTdG9yZS5wcm90b3R5cGUuaXRlcmF0ZSA9IGZ1bmN0aW9uIChvcHRpb25zT3JDYWxsYmFjaywgY2FsbGJhY2spIHtcclxuICAgICAgICB2YXIgb3B0aW9ucztcclxuICAgICAgICBpZiAoIWNhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgIG9wdGlvbnMgPSB7fTtcclxuICAgICAgICAgICAgY2FsbGJhY2sgPSBvcHRpb25zT3JDYWxsYmFjaztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIG9wdGlvbnMgPSBvcHRpb25zT3JDYWxsYmFjaztcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGN1cnNvciA9IHRoaXMuY3Vyc29yKG9wdGlvbnMpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLml0ZXJhdGVDdXJzb3IoY3Vyc29yLCBjYWxsYmFjayk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBJdGVyYXRlcyBvdmVyIGEgc3RvcmUsIGJ1dCB3YWl0cyBmb3IgdGhlIGdpdmVuIGNhbGxiYWNrIHRvIGNvbXBsZXRlIGZvclxyXG4gICAgICogZWFjaCBlbnRyeSBiZWZvcmUgaXRlcmF0aW5nIHRoZSBuZXh0IGVudHJ5LiBUaGlzIGFsbG93cyB0aGUgY2FsbGJhY2sgdG8gZG9cclxuICAgICAqIGFzeW5jaHJvbm91cyB3b3JrIHRvIGRldGVybWluZSBpZiB0aGlzIGl0ZXJhdGlvbiBzaG91bGQgY29udGludWUuXHJcbiAgICAgKlxyXG4gICAgICogVGhlIHByb3ZpZGVkIGNhbGxiYWNrIHNob3VsZCByZXR1cm4gYHRydWVgIHRvIGNvbnRpbnVlIGl0ZXJhdGlvbiwgYW5kXHJcbiAgICAgKiBgZmFsc2VgIG90aGVyd2lzZS5cclxuICAgICAqL1xyXG4gICAgU2ltcGxlRGJTdG9yZS5wcm90b3R5cGUuaXRlcmF0ZVNlcmlhbCA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xyXG4gICAgICAgIHZhciBjdXJzb3JSZXF1ZXN0ID0gdGhpcy5jdXJzb3Ioe30pO1xyXG4gICAgICAgIHJldHVybiBuZXcgUGVyc2lzdGVuY2VQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgY3Vyc29yUmVxdWVzdC5vbmVycm9yID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZXJyb3IgPSBjaGVja0ZvckFuZFJlcG9ydGlPU0Vycm9yKGV2ZW50LnRhcmdldC5lcnJvcik7XHJcbiAgICAgICAgICAgICAgICByZWplY3QoZXJyb3IpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBjdXJzb3JSZXF1ZXN0Lm9uc3VjY2VzcyA9IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGN1cnNvciA9IGV2ZW50LnRhcmdldC5yZXN1bHQ7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWN1cnNvcikge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhjdXJzb3IucHJpbWFyeUtleSwgY3Vyc29yLnZhbHVlKS5uZXh0KGZ1bmN0aW9uIChzaG91bGRDb250aW51ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzaG91bGRDb250aW51ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJzb3IuY29udGludWUoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBTaW1wbGVEYlN0b3JlLnByb3RvdHlwZS5pdGVyYXRlQ3Vyc29yID0gZnVuY3Rpb24gKGN1cnNvclJlcXVlc3QsIGZuKSB7XHJcbiAgICAgICAgdmFyIHJlc3VsdHMgPSBbXTtcclxuICAgICAgICByZXR1cm4gbmV3IFBlcnNpc3RlbmNlUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgIGN1cnNvclJlcXVlc3Qub25lcnJvciA9IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICAgICAgcmVqZWN0KGV2ZW50LnRhcmdldC5lcnJvcik7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGN1cnNvclJlcXVlc3Qub25zdWNjZXNzID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgY3Vyc29yID0gZXZlbnQudGFyZ2V0LnJlc3VsdDtcclxuICAgICAgICAgICAgICAgIGlmICghY3Vyc29yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHZhciBjb250cm9sbGVyID0gbmV3IEl0ZXJhdGlvbkNvbnRyb2xsZXIoY3Vyc29yKTtcclxuICAgICAgICAgICAgICAgIHZhciB1c2VyUmVzdWx0ID0gZm4oY3Vyc29yLnByaW1hcnlLZXksIGN1cnNvci52YWx1ZSwgY29udHJvbGxlcik7XHJcbiAgICAgICAgICAgICAgICBpZiAodXNlclJlc3VsdCBpbnN0YW5jZW9mIFBlcnNpc3RlbmNlUHJvbWlzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB1c2VyUHJvbWlzZSA9IHVzZXJSZXN1bHQuY2F0Y2goZnVuY3Rpb24gKGVycikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyLmRvbmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZWplY3QoZXJyKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHRzLnB1c2godXNlclByb21pc2UpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKGNvbnRyb2xsZXIuaXNEb25lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoY29udHJvbGxlci5za2lwVG9LZXkgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjdXJzb3IuY29udGludWUoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGN1cnNvci5jb250aW51ZShjb250cm9sbGVyLnNraXBUb0tleSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfSkubmV4dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2Uud2FpdEZvcihyZXN1bHRzKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBTaW1wbGVEYlN0b3JlLnByb3RvdHlwZS5vcHRpb25zID0gZnVuY3Rpb24gKGluZGV4T3JSYW5nZSwgcmFuZ2UpIHtcclxuICAgICAgICB2YXIgaW5kZXhOYW1lID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIGlmIChpbmRleE9yUmFuZ2UgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIGluZGV4T3JSYW5nZSA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgICAgIGluZGV4TmFtZSA9IGluZGV4T3JSYW5nZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGFzc2VydChyYW5nZSA9PT0gdW5kZWZpbmVkLCAnM3JkIGFyZ3VtZW50IG11c3Qgbm90IGJlIGRlZmluZWQgaWYgMm5kIGlzIGEgcmFuZ2UuJyk7XHJcbiAgICAgICAgICAgICAgICByYW5nZSA9IGluZGV4T3JSYW5nZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4geyBpbmRleDogaW5kZXhOYW1lLCByYW5nZTogcmFuZ2UgfTtcclxuICAgIH07XHJcbiAgICBTaW1wbGVEYlN0b3JlLnByb3RvdHlwZS5jdXJzb3IgPSBmdW5jdGlvbiAob3B0aW9ucykge1xyXG4gICAgICAgIHZhciBkaXJlY3Rpb24gPSAnbmV4dCc7XHJcbiAgICAgICAgaWYgKG9wdGlvbnMucmV2ZXJzZSkge1xyXG4gICAgICAgICAgICBkaXJlY3Rpb24gPSAncHJldic7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChvcHRpb25zLmluZGV4KSB7XHJcbiAgICAgICAgICAgIHZhciBpbmRleCA9IHRoaXMuc3RvcmUuaW5kZXgob3B0aW9ucy5pbmRleCk7XHJcbiAgICAgICAgICAgIGlmIChvcHRpb25zLmtleXNPbmx5KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gaW5kZXgub3BlbktleUN1cnNvcihvcHRpb25zLnJhbmdlLCBkaXJlY3Rpb24pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGluZGV4Lm9wZW5DdXJzb3Iob3B0aW9ucy5yYW5nZSwgZGlyZWN0aW9uKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3RvcmUub3BlbkN1cnNvcihvcHRpb25zLnJhbmdlLCBkaXJlY3Rpb24pO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICByZXR1cm4gU2ltcGxlRGJTdG9yZTtcclxufSgpKTtcclxuLyoqXHJcbiAqIFdyYXBzIGFuIElEQlJlcXVlc3QgaW4gYSBQZXJzaXN0ZW5jZVByb21pc2UsIHVzaW5nIHRoZSBvbnN1Y2Nlc3MgLyBvbmVycm9yXHJcbiAqIGhhbmRsZXJzIHRvIHJlc29sdmUgLyByZWplY3QgdGhlIFBlcnNpc3RlbmNlUHJvbWlzZSBhcyBhcHByb3ByaWF0ZS5cclxuICovXHJcbmZ1bmN0aW9uIHdyYXBSZXF1ZXN0KHJlcXVlc3QpIHtcclxuICAgIHJldHVybiBuZXcgUGVyc2lzdGVuY2VQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICByZXF1ZXN0Lm9uc3VjY2VzcyA9IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gZXZlbnQudGFyZ2V0LnJlc3VsdDtcclxuICAgICAgICAgICAgcmVzb2x2ZShyZXN1bHQpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmVxdWVzdC5vbmVycm9yID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIHZhciBlcnJvciA9IGNoZWNrRm9yQW5kUmVwb3J0aU9TRXJyb3IoZXZlbnQudGFyZ2V0LmVycm9yKTtcclxuICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcclxuICAgICAgICB9O1xyXG4gICAgfSk7XHJcbn1cclxuLy8gR3VhcmQgc28gd2Ugb25seSByZXBvcnQgdGhlIGVycm9yIG9uY2UuXHJcbnZhciByZXBvcnRlZElPU0Vycm9yID0gZmFsc2U7XHJcbmZ1bmN0aW9uIGNoZWNrRm9yQW5kUmVwb3J0aU9TRXJyb3IoZXJyb3IpIHtcclxuICAgIHZhciBpT1NWZXJzaW9uID0gU2ltcGxlRGIuZ2V0SU9TVmVyc2lvbih1dGlsLmdldFVBKCkpO1xyXG4gICAgaWYgKGlPU1ZlcnNpb24gPj0gMTIuMiAmJiBpT1NWZXJzaW9uIDwgMTMpIHtcclxuICAgICAgICB2YXIgSU9TX0VSUk9SID0gJ0FuIGludGVybmFsIGVycm9yIHdhcyBlbmNvdW50ZXJlZCBpbiB0aGUgSW5kZXhlZCBEYXRhYmFzZSBzZXJ2ZXInO1xyXG4gICAgICAgIGlmIChlcnJvci5tZXNzYWdlLmluZGV4T2YoSU9TX0VSUk9SKSA+PSAwKSB7XHJcbiAgICAgICAgICAgIC8vIFdyYXAgZXJyb3IgaW4gYSBtb3JlIGRlc2NyaXB0aXZlIG9uZS5cclxuICAgICAgICAgICAgdmFyIG5ld0Vycm9yXzEgPSBuZXcgRmlyZXN0b3JlRXJyb3IoJ2ludGVybmFsJywgXCJJT1NfSU5ERVhFRERCX0JVRzE6IEluZGV4ZWREYiBoYXMgdGhyb3duICdcIiArIElPU19FUlJPUiArIFwiJy4gVGhpcyBpcyBsaWtlbHkgXCIgK1xyXG4gICAgICAgICAgICAgICAgXCJkdWUgdG8gYW4gdW5hdm9pZGFibGUgYnVnIGluIGlPUy4gU2VlIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcS81NjQ5NjI5Ni8xMTA5MTUgXCIgK1xyXG4gICAgICAgICAgICAgICAgXCJmb3IgZGV0YWlscyBhbmQgYSBwb3RlbnRpYWwgd29ya2Fyb3VuZC5cIik7XHJcbiAgICAgICAgICAgIGlmICghcmVwb3J0ZWRJT1NFcnJvcikge1xyXG4gICAgICAgICAgICAgICAgcmVwb3J0ZWRJT1NFcnJvciA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAvLyBUaHJvdyBhIGdsb2JhbCBleGNlcHRpb24gb3V0c2lkZSBvZiB0aGlzIHByb21pc2UgY2hhaW4sIGZvciB0aGUgdXNlciB0b1xyXG4gICAgICAgICAgICAgICAgLy8gcG90ZW50aWFsbHkgY2F0Y2guXHJcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXdFcnJvcl8xO1xyXG4gICAgICAgICAgICAgICAgfSwgMCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIG5ld0Vycm9yXzE7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGVycm9yO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKiogQSBtdXRhdGlvbiBxdWV1ZSBmb3IgYSBzcGVjaWZpYyB1c2VyLCBiYWNrZWQgYnkgSW5kZXhlZERCLiAqL1xyXG52YXIgSW5kZXhlZERiTXV0YXRpb25RdWV1ZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEluZGV4ZWREYk11dGF0aW9uUXVldWUoXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBub3JtYWxpemVkIHVzZXJJZCAoZS5nLiBudWxsIFVJRCA9PiBcIlwiIHVzZXJJZCkgdXNlZCB0byBzdG9yZSAvXHJcbiAgICAgKiByZXRyaWV2ZSBtdXRhdGlvbnMuXHJcbiAgICAgKi9cclxuICAgIHVzZXJJZCwgc2VyaWFsaXplciwgaW5kZXhNYW5hZ2VyLCByZWZlcmVuY2VEZWxlZ2F0ZSkge1xyXG4gICAgICAgIHRoaXMudXNlcklkID0gdXNlcklkO1xyXG4gICAgICAgIHRoaXMuc2VyaWFsaXplciA9IHNlcmlhbGl6ZXI7XHJcbiAgICAgICAgdGhpcy5pbmRleE1hbmFnZXIgPSBpbmRleE1hbmFnZXI7XHJcbiAgICAgICAgdGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZSA9IHJlZmVyZW5jZURlbGVnYXRlO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENhY2hlcyB0aGUgZG9jdW1lbnQga2V5cyBmb3IgcGVuZGluZyBtdXRhdGlvbiBiYXRjaGVzLiBJZiB0aGUgbXV0YXRpb25cclxuICAgICAgICAgKiBoYXMgYmVlbiByZW1vdmVkIGZyb20gSW5kZXhlZERiLCB0aGUgY2FjaGVkIHZhbHVlIG1heSBjb250aW51ZSB0b1xyXG4gICAgICAgICAqIGJlIHVzZWQgdG8gcmV0cmlldmUgdGhlIGJhdGNoJ3MgZG9jdW1lbnQga2V5cy4gVG8gcmVtb3ZlIGEgY2FjaGVkIHZhbHVlXHJcbiAgICAgICAgICogbG9jYWxseSwgYHJlbW92ZUNhY2hlZE11dGF0aW9uS2V5cygpYCBzaG91bGQgYmUgaW52b2tlZCBlaXRoZXIgZGlyZWN0bHlcclxuICAgICAgICAgKiBvciB0aHJvdWdoIGByZW1vdmVNdXRhdGlvbkJhdGNoZXMoKWAuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBXaXRoIG11bHRpLXRhYiwgd2hlbiB0aGUgcHJpbWFyeSBjbGllbnQgYWNrbm93bGVkZ2VzIG9yIHJlamVjdHMgYSBtdXRhdGlvbixcclxuICAgICAgICAgKiB0aGlzIGNhY2hlIGlzIHVzZWQgYnkgc2Vjb25kYXJ5IGNsaWVudHMgdG8gaW52YWxpZGF0ZSB0aGUgbG9jYWxcclxuICAgICAgICAgKiB2aWV3IG9mIHRoZSBkb2N1bWVudHMgdGhhdCB3ZXJlIHByZXZpb3VzbHkgYWZmZWN0ZWQgYnkgdGhlIG11dGF0aW9uLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktdGFiIG9ubHkuXHJcbiAgICAgICAgdGhpcy5kb2N1bWVudEtleXNCeUJhdGNoSWQgPSB7fTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhIG5ldyBtdXRhdGlvbiBxdWV1ZSBmb3IgdGhlIGdpdmVuIHVzZXIuXHJcbiAgICAgKiBAcGFyYW0gdXNlciBUaGUgdXNlciBmb3Igd2hpY2ggdG8gY3JlYXRlIGEgbXV0YXRpb24gcXVldWUuXHJcbiAgICAgKiBAcGFyYW0gc2VyaWFsaXplciBUaGUgc2VyaWFsaXplciB0byB1c2Ugd2hlbiBwZXJzaXN0aW5nIHRvIEluZGV4ZWREYi5cclxuICAgICAqL1xyXG4gICAgSW5kZXhlZERiTXV0YXRpb25RdWV1ZS5mb3JVc2VyID0gZnVuY3Rpb24gKHVzZXIsIHNlcmlhbGl6ZXIsIGluZGV4TWFuYWdlciwgcmVmZXJlbmNlRGVsZWdhdGUpIHtcclxuICAgICAgICAvLyBUT0RPKG1jZyk6IEZpZ3VyZSBvdXQgd2hhdCBjb25zdHJhaW50cyB0aGVyZSBhcmUgb24gdXNlcklEc1xyXG4gICAgICAgIC8vIEluIHBhcnRpY3VsYXIsIGFyZSB0aGVyZSBhbnkgcmVzZXJ2ZWQgY2hhcmFjdGVycz8gYXJlIGVtcHR5IGlkcyBhbGxvd2VkP1xyXG4gICAgICAgIC8vIEZvciB0aGUgbW9tZW50IHN0b3JlIHRoZXNlIHRvZ2V0aGVyIGluIHRoZSBzYW1lIG11dGF0aW9ucyB0YWJsZSBhc3N1bWluZ1xyXG4gICAgICAgIC8vIHRoYXQgZW1wdHkgdXNlcklEcyBhcmVuJ3QgYWxsb3dlZC5cclxuICAgICAgICBhc3NlcnQodXNlci51aWQgIT09ICcnLCAnVXNlcklEIG11c3Qgbm90IGJlIGFuIGVtcHR5IHN0cmluZy4nKTtcclxuICAgICAgICB2YXIgdXNlcklkID0gdXNlci5pc0F1dGhlbnRpY2F0ZWQoKSA/IHVzZXIudWlkIDogJyc7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBJbmRleGVkRGJNdXRhdGlvblF1ZXVlKHVzZXJJZCwgc2VyaWFsaXplciwgaW5kZXhNYW5hZ2VyLCByZWZlcmVuY2VEZWxlZ2F0ZSk7XHJcbiAgICB9O1xyXG4gICAgSW5kZXhlZERiTXV0YXRpb25RdWV1ZS5wcm90b3R5cGUuY2hlY2tFbXB0eSA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbikge1xyXG4gICAgICAgIHZhciBlbXB0eSA9IHRydWU7XHJcbiAgICAgICAgdmFyIHJhbmdlID0gSURCS2V5UmFuZ2UuYm91bmQoW3RoaXMudXNlcklkLCBOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFldLCBbdGhpcy51c2VySWQsIE51bWJlci5QT1NJVElWRV9JTkZJTklUWV0pO1xyXG4gICAgICAgIHJldHVybiBtdXRhdGlvbnNTdG9yZSh0cmFuc2FjdGlvbilcclxuICAgICAgICAgICAgLml0ZXJhdGUoeyBpbmRleDogRGJNdXRhdGlvbkJhdGNoLnVzZXJNdXRhdGlvbnNJbmRleCwgcmFuZ2U6IHJhbmdlIH0sIGZ1bmN0aW9uIChrZXksIHZhbHVlLCBjb250cm9sKSB7XHJcbiAgICAgICAgICAgIGVtcHR5ID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGNvbnRyb2wuZG9uZSgpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIGVtcHR5OyB9KTtcclxuICAgIH07XHJcbiAgICBJbmRleGVkRGJNdXRhdGlvblF1ZXVlLnByb3RvdHlwZS5hY2tub3dsZWRnZUJhdGNoID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCBiYXRjaCwgc3RyZWFtVG9rZW4pIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRNdXRhdGlvblF1ZXVlTWV0YWRhdGEodHJhbnNhY3Rpb24pLm5leHQoZnVuY3Rpb24gKG1ldGFkYXRhKSB7XHJcbiAgICAgICAgICAgIG1ldGFkYXRhLmxhc3RTdHJlYW1Ub2tlbiA9IGNvbnZlcnRTdHJlYW1Ub2tlbihzdHJlYW1Ub2tlbik7XHJcbiAgICAgICAgICAgIHJldHVybiBtdXRhdGlvblF1ZXVlc1N0b3JlKHRyYW5zYWN0aW9uKS5wdXQobWV0YWRhdGEpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIEluZGV4ZWREYk11dGF0aW9uUXVldWUucHJvdG90eXBlLmdldExhc3RTdHJlYW1Ub2tlbiA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbikge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldE11dGF0aW9uUXVldWVNZXRhZGF0YSh0cmFuc2FjdGlvbikubmV4dChmdW5jdGlvbiAobWV0YWRhdGEpIHsgcmV0dXJuIG1ldGFkYXRhLmxhc3RTdHJlYW1Ub2tlbjsgfSk7XHJcbiAgICB9O1xyXG4gICAgSW5kZXhlZERiTXV0YXRpb25RdWV1ZS5wcm90b3R5cGUuc2V0TGFzdFN0cmVhbVRva2VuID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCBzdHJlYW1Ub2tlbikge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldE11dGF0aW9uUXVldWVNZXRhZGF0YSh0cmFuc2FjdGlvbikubmV4dChmdW5jdGlvbiAobWV0YWRhdGEpIHtcclxuICAgICAgICAgICAgbWV0YWRhdGEubGFzdFN0cmVhbVRva2VuID0gY29udmVydFN0cmVhbVRva2VuKHN0cmVhbVRva2VuKTtcclxuICAgICAgICAgICAgcmV0dXJuIG11dGF0aW9uUXVldWVzU3RvcmUodHJhbnNhY3Rpb24pLnB1dChtZXRhZGF0YSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgSW5kZXhlZERiTXV0YXRpb25RdWV1ZS5wcm90b3R5cGUuYWRkTXV0YXRpb25CYXRjaCA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwgbG9jYWxXcml0ZVRpbWUsIGJhc2VNdXRhdGlvbnMsIG11dGF0aW9ucykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIGRvY3VtZW50U3RvcmUgPSBkb2N1bWVudE11dGF0aW9uc1N0b3JlKHRyYW5zYWN0aW9uKTtcclxuICAgICAgICB2YXIgbXV0YXRpb25TdG9yZSA9IG11dGF0aW9uc1N0b3JlKHRyYW5zYWN0aW9uKTtcclxuICAgICAgICAvLyBUaGUgSW5kZXhlZERiIGltcGxlbWVudGF0aW9uIGluIENocm9tZSAoYW5kIEZpcmVmb3gpIGRvZXMgbm90IGhhbmRsZVxyXG4gICAgICAgIC8vIGNvbXBvdW5kIGluZGljZXMgdGhhdCBpbmNsdWRlIGF1dG8tZ2VuZXJhdGVkIGtleXMgY29ycmVjdGx5LiBUbyBlbnN1cmVcclxuICAgICAgICAvLyB0aGF0IHRoZSBpbmRleCBlbnRyeSBpcyBhZGRlZCBjb3JyZWN0bHkgaW4gYWxsIGJyb3dzZXJzLCB3ZSBwZXJmb3JtIHR3b1xyXG4gICAgICAgIC8vIHdyaXRlczogVGhlIGZpcnN0IHdyaXRlIGlzIHVzZWQgdG8gcmV0cmlldmUgdGhlIG5leHQgYXV0by1nZW5lcmF0ZWQgQmF0Y2hcclxuICAgICAgICAvLyBJRCwgYW5kIHRoZSBzZWNvbmQgd3JpdGUgcG9wdWxhdGVzIHRoZSBpbmRleCBhbmQgc3RvcmVzIHRoZSBhY3R1YWxcclxuICAgICAgICAvLyBtdXRhdGlvbiBiYXRjaC5cclxuICAgICAgICAvLyBTZWU6IGh0dHBzOi8vYnVncy5jaHJvbWl1bS5vcmcvcC9jaHJvbWl1bS9pc3N1ZXMvZGV0YWlsP2lkPTcwMTk3MlxyXG4gICAgICAgIC8vIFdlIHdyaXRlIGFuIGVtcHR5IG9iamVjdCB0byBvYnRhaW4ga2V5XHJcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuICAgICAgICByZXR1cm4gbXV0YXRpb25TdG9yZS5hZGQoe30pLm5leHQoZnVuY3Rpb24gKGJhdGNoSWQpIHtcclxuICAgICAgICAgICAgYXNzZXJ0KHR5cGVvZiBiYXRjaElkID09PSAnbnVtYmVyJywgJ0F1dG8tZ2VuZXJhdGVkIGtleSBpcyBub3QgYSBudW1iZXInKTtcclxuICAgICAgICAgICAgdmFyIGJhdGNoID0gbmV3IE11dGF0aW9uQmF0Y2goYmF0Y2hJZCwgbG9jYWxXcml0ZVRpbWUsIGJhc2VNdXRhdGlvbnMsIG11dGF0aW9ucyk7XHJcbiAgICAgICAgICAgIHZhciBkYkJhdGNoID0gX3RoaXMuc2VyaWFsaXplci50b0RiTXV0YXRpb25CYXRjaChfdGhpcy51c2VySWQsIGJhdGNoKTtcclxuICAgICAgICAgICAgdmFyIHByb21pc2VzID0gW107XHJcbiAgICAgICAgICAgIHZhciBjb2xsZWN0aW9uUGFyZW50cyA9IG5ldyBTb3J0ZWRTZXQoZnVuY3Rpb24gKGwsIHIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBwcmltaXRpdmVDb21wYXJhdG9yKGwuY2Fub25pY2FsU3RyaW5nKCksIHIuY2Fub25pY2FsU3RyaW5nKCkpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBtdXRhdGlvbnNfMSA9IG11dGF0aW9uczsgX2kgPCBtdXRhdGlvbnNfMS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgICAgIHZhciBtdXRhdGlvbiA9IG11dGF0aW9uc18xW19pXTtcclxuICAgICAgICAgICAgICAgIHZhciBpbmRleEtleSA9IERiRG9jdW1lbnRNdXRhdGlvbi5rZXkoX3RoaXMudXNlcklkLCBtdXRhdGlvbi5rZXkucGF0aCwgYmF0Y2hJZCk7XHJcbiAgICAgICAgICAgICAgICBjb2xsZWN0aW9uUGFyZW50cyA9IGNvbGxlY3Rpb25QYXJlbnRzLmFkZChtdXRhdGlvbi5rZXkucGF0aC5wb3BMYXN0KCkpO1xyXG4gICAgICAgICAgICAgICAgcHJvbWlzZXMucHVzaChtdXRhdGlvblN0b3JlLnB1dChkYkJhdGNoKSk7XHJcbiAgICAgICAgICAgICAgICBwcm9taXNlcy5wdXNoKGRvY3VtZW50U3RvcmUucHV0KGluZGV4S2V5LCBEYkRvY3VtZW50TXV0YXRpb24uUExBQ0VIT0xERVIpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb2xsZWN0aW9uUGFyZW50cy5mb3JFYWNoKGZ1bmN0aW9uIChwYXJlbnQpIHtcclxuICAgICAgICAgICAgICAgIHByb21pc2VzLnB1c2goX3RoaXMuaW5kZXhNYW5hZ2VyLmFkZFRvQ29sbGVjdGlvblBhcmVudEluZGV4KHRyYW5zYWN0aW9uLCBwYXJlbnQpKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHRyYW5zYWN0aW9uLmFkZE9uQ29tbWl0dGVkTGlzdGVuZXIoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuZG9jdW1lbnRLZXlzQnlCYXRjaElkW2JhdGNoSWRdID0gYmF0Y2gua2V5cygpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS53YWl0Rm9yKHByb21pc2VzKS5uZXh0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIGJhdGNoOyB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBJbmRleGVkRGJNdXRhdGlvblF1ZXVlLnByb3RvdHlwZS5sb29rdXBNdXRhdGlvbkJhdGNoID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCBiYXRjaElkKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICByZXR1cm4gbXV0YXRpb25zU3RvcmUodHJhbnNhY3Rpb24pXHJcbiAgICAgICAgICAgIC5nZXQoYmF0Y2hJZClcclxuICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKGRiQmF0Y2gpIHtcclxuICAgICAgICAgICAgaWYgKGRiQmF0Y2gpIHtcclxuICAgICAgICAgICAgICAgIGFzc2VydChkYkJhdGNoLnVzZXJJZCA9PT0gX3RoaXMudXNlcklkLCBcIlVuZXhwZWN0ZWQgdXNlciAnXCIgKyBkYkJhdGNoLnVzZXJJZCArIFwiJyBmb3IgbXV0YXRpb24gYmF0Y2ggXCIgKyBiYXRjaElkKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5zZXJpYWxpemVyLmZyb21EYk11dGF0aW9uQmF0Y2goZGJCYXRjaCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgSW5kZXhlZERiTXV0YXRpb25RdWV1ZS5wcm90b3R5cGUubG9va3VwTXV0YXRpb25LZXlzID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCBiYXRjaElkKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBpZiAodGhpcy5kb2N1bWVudEtleXNCeUJhdGNoSWRbYmF0Y2hJZF0pIHtcclxuICAgICAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKHRoaXMuZG9jdW1lbnRLZXlzQnlCYXRjaElkW2JhdGNoSWRdKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmxvb2t1cE11dGF0aW9uQmF0Y2godHJhbnNhY3Rpb24sIGJhdGNoSWQpLm5leHQoZnVuY3Rpb24gKGJhdGNoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoYmF0Y2gpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIga2V5cyA9IGJhdGNoLmtleXMoKTtcclxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5kb2N1bWVudEtleXNCeUJhdGNoSWRbYmF0Y2hJZF0gPSBrZXlzO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBrZXlzO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBJbmRleGVkRGJNdXRhdGlvblF1ZXVlLnByb3RvdHlwZS5nZXROZXh0TXV0YXRpb25CYXRjaEFmdGVyQmF0Y2hJZCA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwgYmF0Y2hJZCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIG5leHRCYXRjaElkID0gYmF0Y2hJZCArIDE7XHJcbiAgICAgICAgdmFyIHJhbmdlID0gSURCS2V5UmFuZ2UubG93ZXJCb3VuZChbdGhpcy51c2VySWQsIG5leHRCYXRjaElkXSk7XHJcbiAgICAgICAgdmFyIGZvdW5kQmF0Y2ggPSBudWxsO1xyXG4gICAgICAgIHJldHVybiBtdXRhdGlvbnNTdG9yZSh0cmFuc2FjdGlvbilcclxuICAgICAgICAgICAgLml0ZXJhdGUoeyBpbmRleDogRGJNdXRhdGlvbkJhdGNoLnVzZXJNdXRhdGlvbnNJbmRleCwgcmFuZ2U6IHJhbmdlIH0sIGZ1bmN0aW9uIChrZXksIGRiQmF0Y2gsIGNvbnRyb2wpIHtcclxuICAgICAgICAgICAgaWYgKGRiQmF0Y2gudXNlcklkID09PSBfdGhpcy51c2VySWQpIHtcclxuICAgICAgICAgICAgICAgIGFzc2VydChkYkJhdGNoLmJhdGNoSWQgPj0gbmV4dEJhdGNoSWQsICdTaG91bGQgaGF2ZSBmb3VuZCBtdXRhdGlvbiBhZnRlciAnICsgbmV4dEJhdGNoSWQpO1xyXG4gICAgICAgICAgICAgICAgZm91bmRCYXRjaCA9IF90aGlzLnNlcmlhbGl6ZXIuZnJvbURiTXV0YXRpb25CYXRjaChkYkJhdGNoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb250cm9sLmRvbmUoKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAubmV4dChmdW5jdGlvbiAoKSB7IHJldHVybiBmb3VuZEJhdGNoOyB9KTtcclxuICAgIH07XHJcbiAgICBJbmRleGVkRGJNdXRhdGlvblF1ZXVlLnByb3RvdHlwZS5nZXRIaWdoZXN0VW5hY2tub3dsZWRnZWRCYXRjaElkID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uKSB7XHJcbiAgICAgICAgdmFyIHJhbmdlID0gSURCS2V5UmFuZ2UudXBwZXJCb3VuZChbXHJcbiAgICAgICAgICAgIHRoaXMudXNlcklkLFxyXG4gICAgICAgICAgICBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFlcclxuICAgICAgICBdKTtcclxuICAgICAgICB2YXIgYmF0Y2hJZCA9IEJBVENISURfVU5LTk9XTjtcclxuICAgICAgICByZXR1cm4gbXV0YXRpb25zU3RvcmUodHJhbnNhY3Rpb24pXHJcbiAgICAgICAgICAgIC5pdGVyYXRlKHsgaW5kZXg6IERiTXV0YXRpb25CYXRjaC51c2VyTXV0YXRpb25zSW5kZXgsIHJhbmdlOiByYW5nZSwgcmV2ZXJzZTogdHJ1ZSB9LCBmdW5jdGlvbiAoa2V5LCBkYkJhdGNoLCBjb250cm9sKSB7XHJcbiAgICAgICAgICAgIGJhdGNoSWQgPSBkYkJhdGNoLmJhdGNoSWQ7XHJcbiAgICAgICAgICAgIGNvbnRyb2wuZG9uZSgpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIGJhdGNoSWQ7IH0pO1xyXG4gICAgfTtcclxuICAgIEluZGV4ZWREYk11dGF0aW9uUXVldWUucHJvdG90eXBlLmdldEFsbE11dGF0aW9uQmF0Y2hlcyA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIHJhbmdlID0gSURCS2V5UmFuZ2UuYm91bmQoW3RoaXMudXNlcklkLCBCQVRDSElEX1VOS05PV05dLCBbdGhpcy51c2VySWQsIE51bWJlci5QT1NJVElWRV9JTkZJTklUWV0pO1xyXG4gICAgICAgIHJldHVybiBtdXRhdGlvbnNTdG9yZSh0cmFuc2FjdGlvbilcclxuICAgICAgICAgICAgLmxvYWRBbGwoRGJNdXRhdGlvbkJhdGNoLnVzZXJNdXRhdGlvbnNJbmRleCwgcmFuZ2UpXHJcbiAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uIChkYkJhdGNoZXMpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGRiQmF0Y2hlcy5tYXAoZnVuY3Rpb24gKGRiQmF0Y2gpIHsgcmV0dXJuIF90aGlzLnNlcmlhbGl6ZXIuZnJvbURiTXV0YXRpb25CYXRjaChkYkJhdGNoKTsgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgSW5kZXhlZERiTXV0YXRpb25RdWV1ZS5wcm90b3R5cGUuZ2V0QWxsTXV0YXRpb25CYXRjaGVzQWZmZWN0aW5nRG9jdW1lbnRLZXkgPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24sIGRvY3VtZW50S2V5KSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICAvLyBTY2FuIHRoZSBkb2N1bWVudC1tdXRhdGlvbiBpbmRleCBzdGFydGluZyB3aXRoIGEgcHJlZml4IHN0YXJ0aW5nIHdpdGhcclxuICAgICAgICAvLyB0aGUgZ2l2ZW4gZG9jdW1lbnRLZXkuXHJcbiAgICAgICAgdmFyIGluZGV4UHJlZml4ID0gRGJEb2N1bWVudE11dGF0aW9uLnByZWZpeEZvclBhdGgodGhpcy51c2VySWQsIGRvY3VtZW50S2V5LnBhdGgpO1xyXG4gICAgICAgIHZhciBpbmRleFN0YXJ0ID0gSURCS2V5UmFuZ2UubG93ZXJCb3VuZChpbmRleFByZWZpeCk7XHJcbiAgICAgICAgdmFyIHJlc3VsdHMgPSBbXTtcclxuICAgICAgICByZXR1cm4gZG9jdW1lbnRNdXRhdGlvbnNTdG9yZSh0cmFuc2FjdGlvbilcclxuICAgICAgICAgICAgLml0ZXJhdGUoeyByYW5nZTogaW5kZXhTdGFydCB9LCBmdW5jdGlvbiAoaW5kZXhLZXksIF8sIGNvbnRyb2wpIHtcclxuICAgICAgICAgICAgdmFyIHVzZXJJRCA9IGluZGV4S2V5WzBdLCBlbmNvZGVkUGF0aCA9IGluZGV4S2V5WzFdLCBiYXRjaElkID0gaW5kZXhLZXlbMl07XHJcbiAgICAgICAgICAgIC8vIE9ubHkgY29uc2lkZXIgcm93cyBtYXRjaGluZyBleGFjdGx5IHRoZSBzcGVjaWZpYyBrZXkgb2ZcclxuICAgICAgICAgICAgLy8gaW50ZXJlc3QuIE5vdGUgdGhhdCBiZWNhdXNlIHdlIG9yZGVyIGJ5IHBhdGggZmlyc3QsIGFuZCB3ZVxyXG4gICAgICAgICAgICAvLyBvcmRlciB0ZXJtaW5hdG9ycyBiZWZvcmUgcGF0aCBzZXBhcmF0b3JzLCB3ZSdsbCBlbmNvdW50ZXIgYWxsXHJcbiAgICAgICAgICAgIC8vIHRoZSBpbmRleCByb3dzIGZvciBkb2N1bWVudEtleSBjb250aWd1b3VzbHkuIEluIHBhcnRpY3VsYXIsIGFsbFxyXG4gICAgICAgICAgICAvLyB0aGUgcm93cyBmb3IgZG9jdW1lbnRLZXkgd2lsbCBvY2N1ciBiZWZvcmUgYW55IHJvd3MgZm9yXHJcbiAgICAgICAgICAgIC8vIGRvY3VtZW50cyBuZXN0ZWQgaW4gYSBzdWJjb2xsZWN0aW9uIGJlbmVhdGggZG9jdW1lbnRLZXkgc28gd2VcclxuICAgICAgICAgICAgLy8gY2FuIHN0b3AgYXMgc29vbiBhcyB3ZSBoaXQgYW55IHN1Y2ggcm93LlxyXG4gICAgICAgICAgICB2YXIgcGF0aCA9IGRlY29kZShlbmNvZGVkUGF0aCk7XHJcbiAgICAgICAgICAgIGlmICh1c2VySUQgIT09IF90aGlzLnVzZXJJZCB8fCAhZG9jdW1lbnRLZXkucGF0aC5pc0VxdWFsKHBhdGgpKSB7XHJcbiAgICAgICAgICAgICAgICBjb250cm9sLmRvbmUoKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBMb29rIHVwIHRoZSBtdXRhdGlvbiBiYXRjaCBpbiB0aGUgc3RvcmUuXHJcbiAgICAgICAgICAgIHJldHVybiBtdXRhdGlvbnNTdG9yZSh0cmFuc2FjdGlvbilcclxuICAgICAgICAgICAgICAgIC5nZXQoYmF0Y2hJZClcclxuICAgICAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uIChtdXRhdGlvbikge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFtdXRhdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IGZhaWwoJ0RhbmdsaW5nIGRvY3VtZW50LW11dGF0aW9uIHJlZmVyZW5jZSBmb3VuZDogJyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4S2V5ICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJyB3aGljaCBwb2ludHMgdG8gJyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhdGNoSWQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYXNzZXJ0KG11dGF0aW9uLnVzZXJJZCA9PT0gX3RoaXMudXNlcklkLCBcIlVuZXhwZWN0ZWQgdXNlciAnXCIgKyBtdXRhdGlvbi51c2VySWQgKyBcIicgZm9yIG11dGF0aW9uIGJhdGNoIFwiICsgYmF0Y2hJZCk7XHJcbiAgICAgICAgICAgICAgICByZXN1bHRzLnB1c2goX3RoaXMuc2VyaWFsaXplci5mcm9tRGJNdXRhdGlvbkJhdGNoKG11dGF0aW9uKSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIHJlc3VsdHM7IH0pO1xyXG4gICAgfTtcclxuICAgIEluZGV4ZWREYk11dGF0aW9uUXVldWUucHJvdG90eXBlLmdldEFsbE11dGF0aW9uQmF0Y2hlc0FmZmVjdGluZ0RvY3VtZW50S2V5cyA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwgZG9jdW1lbnRLZXlzKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgdW5pcXVlQmF0Y2hJRHMgPSBuZXcgU29ydGVkU2V0KHByaW1pdGl2ZUNvbXBhcmF0b3IpO1xyXG4gICAgICAgIHZhciBwcm9taXNlcyA9IFtdO1xyXG4gICAgICAgIGRvY3VtZW50S2V5cy5mb3JFYWNoKGZ1bmN0aW9uIChkb2N1bWVudEtleSkge1xyXG4gICAgICAgICAgICB2YXIgaW5kZXhTdGFydCA9IERiRG9jdW1lbnRNdXRhdGlvbi5wcmVmaXhGb3JQYXRoKF90aGlzLnVzZXJJZCwgZG9jdW1lbnRLZXkucGF0aCk7XHJcbiAgICAgICAgICAgIHZhciByYW5nZSA9IElEQktleVJhbmdlLmxvd2VyQm91bmQoaW5kZXhTdGFydCk7XHJcbiAgICAgICAgICAgIHZhciBwcm9taXNlID0gZG9jdW1lbnRNdXRhdGlvbnNTdG9yZSh0cmFuc2FjdGlvbikuaXRlcmF0ZSh7IHJhbmdlOiByYW5nZSB9LCBmdW5jdGlvbiAoaW5kZXhLZXksIF8sIGNvbnRyb2wpIHtcclxuICAgICAgICAgICAgICAgIHZhciB1c2VySUQgPSBpbmRleEtleVswXSwgZW5jb2RlZFBhdGggPSBpbmRleEtleVsxXSwgYmF0Y2hJRCA9IGluZGV4S2V5WzJdO1xyXG4gICAgICAgICAgICAgICAgLy8gT25seSBjb25zaWRlciByb3dzIG1hdGNoaW5nIGV4YWN0bHkgdGhlIHNwZWNpZmljIGtleSBvZlxyXG4gICAgICAgICAgICAgICAgLy8gaW50ZXJlc3QuIE5vdGUgdGhhdCBiZWNhdXNlIHdlIG9yZGVyIGJ5IHBhdGggZmlyc3QsIGFuZCB3ZVxyXG4gICAgICAgICAgICAgICAgLy8gb3JkZXIgdGVybWluYXRvcnMgYmVmb3JlIHBhdGggc2VwYXJhdG9ycywgd2UnbGwgZW5jb3VudGVyIGFsbFxyXG4gICAgICAgICAgICAgICAgLy8gdGhlIGluZGV4IHJvd3MgZm9yIGRvY3VtZW50S2V5IGNvbnRpZ3VvdXNseS4gSW4gcGFydGljdWxhciwgYWxsXHJcbiAgICAgICAgICAgICAgICAvLyB0aGUgcm93cyBmb3IgZG9jdW1lbnRLZXkgd2lsbCBvY2N1ciBiZWZvcmUgYW55IHJvd3MgZm9yXHJcbiAgICAgICAgICAgICAgICAvLyBkb2N1bWVudHMgbmVzdGVkIGluIGEgc3ViY29sbGVjdGlvbiBiZW5lYXRoIGRvY3VtZW50S2V5IHNvIHdlXHJcbiAgICAgICAgICAgICAgICAvLyBjYW4gc3RvcCBhcyBzb29uIGFzIHdlIGhpdCBhbnkgc3VjaCByb3cuXHJcbiAgICAgICAgICAgICAgICB2YXIgcGF0aCA9IGRlY29kZShlbmNvZGVkUGF0aCk7XHJcbiAgICAgICAgICAgICAgICBpZiAodXNlcklEICE9PSBfdGhpcy51c2VySWQgfHwgIWRvY3VtZW50S2V5LnBhdGguaXNFcXVhbChwYXRoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2wuZG9uZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHVuaXF1ZUJhdGNoSURzID0gdW5pcXVlQmF0Y2hJRHMuYWRkKGJhdGNoSUQpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcHJvbWlzZXMucHVzaChwcm9taXNlKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLndhaXRGb3IocHJvbWlzZXMpLm5leHQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXMubG9va3VwTXV0YXRpb25CYXRjaGVzKHRyYW5zYWN0aW9uLCB1bmlxdWVCYXRjaElEcyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgSW5kZXhlZERiTXV0YXRpb25RdWV1ZS5wcm90b3R5cGUuZ2V0QWxsTXV0YXRpb25CYXRjaGVzQWZmZWN0aW5nUXVlcnkgPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24sIHF1ZXJ5KSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBhc3NlcnQoIXF1ZXJ5LmlzRG9jdW1lbnRRdWVyeSgpLCBcIkRvY3VtZW50IHF1ZXJpZXMgc2hvdWxkbid0IGdvIGRvd24gdGhpcyBwYXRoXCIpO1xyXG4gICAgICAgIGFzc2VydCghcXVlcnkuaXNDb2xsZWN0aW9uR3JvdXBRdWVyeSgpLCAnQ29sbGVjdGlvbkdyb3VwIHF1ZXJpZXMgc2hvdWxkIGJlIGhhbmRsZWQgaW4gTG9jYWxEb2N1bWVudHNWaWV3Jyk7XHJcbiAgICAgICAgdmFyIHF1ZXJ5UGF0aCA9IHF1ZXJ5LnBhdGg7XHJcbiAgICAgICAgdmFyIGltbWVkaWF0ZUNoaWxkcmVuTGVuZ3RoID0gcXVlcnlQYXRoLmxlbmd0aCArIDE7XHJcbiAgICAgICAgLy8gVE9ETyhtY2cpOiBBY3R1YWxseSBpbXBsZW1lbnQgYSBzaW5nbGUtY29sbGVjdGlvbiBxdWVyeVxyXG4gICAgICAgIC8vXHJcbiAgICAgICAgLy8gVGhpcyBpcyBhY3R1YWxseSBleGVjdXRpbmcgYW4gYW5jZXN0b3IgcXVlcnksIHRyYXZlcnNpbmcgdGhlIHdob2xlXHJcbiAgICAgICAgLy8gc3VidHJlZSBiZWxvdyB0aGUgY29sbGVjdGlvbiB3aGljaCBjYW4gYmUgaG9ycmlmaWNhbGx5IGluZWZmaWNpZW50IGZvclxyXG4gICAgICAgIC8vIHNvbWUgc3RydWN0dXJlcy4gVGhlIHJpZ2h0IHdheSB0byBzb2x2ZSB0aGlzIGlzIHRvIGltcGxlbWVudCB0aGUgZnVsbFxyXG4gICAgICAgIC8vIHZhbHVlIGluZGV4LCBidXQgdGhhdCdzIG5vdCBpbiB0aGUgY2FyZHMgaW4gdGhlIG5lYXIgZnV0dXJlIHNvIHRoaXMgaXNcclxuICAgICAgICAvLyB0aGUgYmVzdCB3ZSBjYW4gZG8gZm9yIHRoZSBtb21lbnQuXHJcbiAgICAgICAgLy9cclxuICAgICAgICAvLyBTaW5jZSB3ZSBkb24ndCB5ZXQgaW5kZXggdGhlIGFjdHVhbCBwcm9wZXJ0aWVzIGluIHRoZSBtdXRhdGlvbnMsIG91clxyXG4gICAgICAgIC8vIGN1cnJlbnQgYXBwcm9hY2ggaXMgdG8ganVzdCByZXR1cm4gYWxsIG11dGF0aW9uIGJhdGNoZXMgdGhhdCBhZmZlY3RcclxuICAgICAgICAvLyBkb2N1bWVudHMgaW4gdGhlIGNvbGxlY3Rpb24gYmVpbmcgcXVlcmllZC5cclxuICAgICAgICB2YXIgaW5kZXhQcmVmaXggPSBEYkRvY3VtZW50TXV0YXRpb24ucHJlZml4Rm9yUGF0aCh0aGlzLnVzZXJJZCwgcXVlcnlQYXRoKTtcclxuICAgICAgICB2YXIgaW5kZXhTdGFydCA9IElEQktleVJhbmdlLmxvd2VyQm91bmQoaW5kZXhQcmVmaXgpO1xyXG4gICAgICAgIC8vIENvbGxlY3QgdXAgdW5pcXVlIGJhdGNoSURzIGVuY291bnRlcmVkIGR1cmluZyBhIHNjYW4gb2YgdGhlIGluZGV4LiBVc2UgYVxyXG4gICAgICAgIC8vIFNvcnRlZFNldCB0byBhY2N1bXVsYXRlIGJhdGNoIElEcyBzbyB0aGV5IGNhbiBiZSB0cmF2ZXJzZWQgaW4gb3JkZXIgaW4gYVxyXG4gICAgICAgIC8vIHNjYW4gb2YgdGhlIG1haW4gdGFibGUuXHJcbiAgICAgICAgdmFyIHVuaXF1ZUJhdGNoSURzID0gbmV3IFNvcnRlZFNldChwcmltaXRpdmVDb21wYXJhdG9yKTtcclxuICAgICAgICByZXR1cm4gZG9jdW1lbnRNdXRhdGlvbnNTdG9yZSh0cmFuc2FjdGlvbilcclxuICAgICAgICAgICAgLml0ZXJhdGUoeyByYW5nZTogaW5kZXhTdGFydCB9LCBmdW5jdGlvbiAoaW5kZXhLZXksIF8sIGNvbnRyb2wpIHtcclxuICAgICAgICAgICAgdmFyIHVzZXJJRCA9IGluZGV4S2V5WzBdLCBlbmNvZGVkUGF0aCA9IGluZGV4S2V5WzFdLCBiYXRjaElEID0gaW5kZXhLZXlbMl07XHJcbiAgICAgICAgICAgIHZhciBwYXRoID0gZGVjb2RlKGVuY29kZWRQYXRoKTtcclxuICAgICAgICAgICAgaWYgKHVzZXJJRCAhPT0gX3RoaXMudXNlcklkIHx8ICFxdWVyeVBhdGguaXNQcmVmaXhPZihwYXRoKSkge1xyXG4gICAgICAgICAgICAgICAgY29udHJvbC5kb25lKCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gUm93cyB3aXRoIGRvY3VtZW50IGtleXMgbW9yZSB0aGFuIG9uZSBzZWdtZW50IGxvbmdlciB0aGFuIHRoZVxyXG4gICAgICAgICAgICAvLyBxdWVyeSBwYXRoIGNhbid0IGJlIG1hdGNoZXMuIEZvciBleGFtcGxlLCBhIHF1ZXJ5IG9uICdyb29tcydcclxuICAgICAgICAgICAgLy8gY2FuJ3QgbWF0Y2ggdGhlIGRvY3VtZW50IC9yb29tcy9hYmMvbWVzc2FnZXMveHl4LlxyXG4gICAgICAgICAgICAvLyBUT0RPKG1jZyk6IHdlJ2xsIG5lZWQgYSBkaWZmZXJlbnQgc2Nhbm5lciB3aGVuIHdlIGltcGxlbWVudFxyXG4gICAgICAgICAgICAvLyBhbmNlc3RvciBxdWVyaWVzLlxyXG4gICAgICAgICAgICBpZiAocGF0aC5sZW5ndGggIT09IGltbWVkaWF0ZUNoaWxkcmVuTGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdW5pcXVlQmF0Y2hJRHMgPSB1bmlxdWVCYXRjaElEcy5hZGQoYmF0Y2hJRCk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMubG9va3VwTXV0YXRpb25CYXRjaGVzKHRyYW5zYWN0aW9uLCB1bmlxdWVCYXRjaElEcyk7IH0pO1xyXG4gICAgfTtcclxuICAgIEluZGV4ZWREYk11dGF0aW9uUXVldWUucHJvdG90eXBlLmxvb2t1cE11dGF0aW9uQmF0Y2hlcyA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwgYmF0Y2hJRHMpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhciByZXN1bHRzID0gW107XHJcbiAgICAgICAgdmFyIHByb21pc2VzID0gW107XHJcbiAgICAgICAgLy8gVE9ETyhyb2Nrd29vZCk6IEltcGxlbWVudCB0aGlzIHVzaW5nIGl0ZXJhdGUuXHJcbiAgICAgICAgYmF0Y2hJRHMuZm9yRWFjaChmdW5jdGlvbiAoYmF0Y2hJZCkge1xyXG4gICAgICAgICAgICBwcm9taXNlcy5wdXNoKG11dGF0aW9uc1N0b3JlKHRyYW5zYWN0aW9uKVxyXG4gICAgICAgICAgICAgICAgLmdldChiYXRjaElkKVxyXG4gICAgICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKG11dGF0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAobXV0YXRpb24gPT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBmYWlsKCdEYW5nbGluZyBkb2N1bWVudC1tdXRhdGlvbiByZWZlcmVuY2UgZm91bmQsICcgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnd2hpY2ggcG9pbnRzIHRvICcgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBiYXRjaElkKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGFzc2VydChtdXRhdGlvbi51c2VySWQgPT09IF90aGlzLnVzZXJJZCwgXCJVbmV4cGVjdGVkIHVzZXIgJ1wiICsgbXV0YXRpb24udXNlcklkICsgXCInIGZvciBtdXRhdGlvbiBiYXRjaCBcIiArIGJhdGNoSWQpO1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0cy5wdXNoKF90aGlzLnNlcmlhbGl6ZXIuZnJvbURiTXV0YXRpb25CYXRjaChtdXRhdGlvbikpO1xyXG4gICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS53YWl0Rm9yKHByb21pc2VzKS5uZXh0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIHJlc3VsdHM7IH0pO1xyXG4gICAgfTtcclxuICAgIEluZGV4ZWREYk11dGF0aW9uUXVldWUucHJvdG90eXBlLnJlbW92ZU11dGF0aW9uQmF0Y2ggPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24sIGJhdGNoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICByZXR1cm4gcmVtb3ZlTXV0YXRpb25CYXRjaCh0cmFuc2FjdGlvbi5zaW1wbGVEYlRyYW5zYWN0aW9uLCB0aGlzLnVzZXJJZCwgYmF0Y2gpLm5leHQoZnVuY3Rpb24gKHJlbW92ZWREb2N1bWVudHMpIHtcclxuICAgICAgICAgICAgdHJhbnNhY3Rpb24uYWRkT25Db21taXR0ZWRMaXN0ZW5lcihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5yZW1vdmVDYWNoZWRNdXRhdGlvbktleXMoYmF0Y2guYmF0Y2hJZCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLmZvckVhY2gocmVtb3ZlZERvY3VtZW50cywgZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLnJlZmVyZW5jZURlbGVnYXRlLnJlbW92ZU11dGF0aW9uUmVmZXJlbmNlKHRyYW5zYWN0aW9uLCBrZXkpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBJbmRleGVkRGJNdXRhdGlvblF1ZXVlLnByb3RvdHlwZS5yZW1vdmVDYWNoZWRNdXRhdGlvbktleXMgPSBmdW5jdGlvbiAoYmF0Y2hJZCkge1xyXG4gICAgICAgIGRlbGV0ZSB0aGlzLmRvY3VtZW50S2V5c0J5QmF0Y2hJZFtiYXRjaElkXTtcclxuICAgIH07XHJcbiAgICBJbmRleGVkRGJNdXRhdGlvblF1ZXVlLnByb3RvdHlwZS5wZXJmb3JtQ29uc2lzdGVuY3lDaGVjayA9IGZ1bmN0aW9uICh0eG4pIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNoZWNrRW1wdHkodHhuKS5uZXh0KGZ1bmN0aW9uIChlbXB0eSkge1xyXG4gICAgICAgICAgICBpZiAoIWVtcHR5KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBWZXJpZnkgdGhhdCB0aGVyZSBhcmUgbm8gZW50cmllcyBpbiB0aGUgZG9jdW1lbnRNdXRhdGlvbnMgaW5kZXggaWZcclxuICAgICAgICAgICAgLy8gdGhlIHF1ZXVlIGlzIGVtcHR5LlxyXG4gICAgICAgICAgICB2YXIgc3RhcnRSYW5nZSA9IElEQktleVJhbmdlLmxvd2VyQm91bmQoRGJEb2N1bWVudE11dGF0aW9uLnByZWZpeEZvclVzZXIoX3RoaXMudXNlcklkKSk7XHJcbiAgICAgICAgICAgIHZhciBkYW5nbGluZ011dGF0aW9uUmVmZXJlbmNlcyA9IFtdO1xyXG4gICAgICAgICAgICByZXR1cm4gZG9jdW1lbnRNdXRhdGlvbnNTdG9yZSh0eG4pXHJcbiAgICAgICAgICAgICAgICAuaXRlcmF0ZSh7IHJhbmdlOiBzdGFydFJhbmdlIH0sIGZ1bmN0aW9uIChrZXksIF8sIGNvbnRyb2wpIHtcclxuICAgICAgICAgICAgICAgIHZhciB1c2VySUQgPSBrZXlbMF07XHJcbiAgICAgICAgICAgICAgICBpZiAodXNlcklEICE9PSBfdGhpcy51c2VySWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb250cm9sLmRvbmUoKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcGF0aCA9IGRlY29kZShrZXlbMV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGRhbmdsaW5nTXV0YXRpb25SZWZlcmVuY2VzLnB1c2gocGF0aCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAubmV4dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBhc3NlcnQoZGFuZ2xpbmdNdXRhdGlvblJlZmVyZW5jZXMubGVuZ3RoID09PSAwLCAnRG9jdW1lbnQgbGVhayAtLSBkZXRlY3RlZCBkYW5nbGluZyBtdXRhdGlvbiByZWZlcmVuY2VzIHdoZW4gcXVldWUgaXMgZW1wdHkuICcgK1xyXG4gICAgICAgICAgICAgICAgICAgICdEYW5nbGluZyBrZXlzOiAnICtcclxuICAgICAgICAgICAgICAgICAgICBkYW5nbGluZ011dGF0aW9uUmVmZXJlbmNlcy5tYXAoZnVuY3Rpb24gKHApIHsgcmV0dXJuIHAuY2Fub25pY2FsU3RyaW5nKCk7IH0pKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgSW5kZXhlZERiTXV0YXRpb25RdWV1ZS5wcm90b3R5cGUuY29udGFpbnNLZXkgPSBmdW5jdGlvbiAodHhuLCBrZXkpIHtcclxuICAgICAgICByZXR1cm4gbXV0YXRpb25RdWV1ZUNvbnRhaW5zS2V5KHR4biwgdGhpcy51c2VySWQsIGtleSk7XHJcbiAgICB9O1xyXG4gICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS10YWIgb25seSAoc3RhdGUgaXMgaGVsZCBpbiBtZW1vcnkgaW4gb3RoZXIgY2xpZW50cykuXHJcbiAgICAvKiogUmV0dXJucyB0aGUgbXV0YXRpb24gcXVldWUncyBtZXRhZGF0YSBmcm9tIEluZGV4ZWREYi4gKi9cclxuICAgIEluZGV4ZWREYk11dGF0aW9uUXVldWUucHJvdG90eXBlLmdldE11dGF0aW9uUXVldWVNZXRhZGF0YSA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIG11dGF0aW9uUXVldWVzU3RvcmUodHJhbnNhY3Rpb24pXHJcbiAgICAgICAgICAgIC5nZXQodGhpcy51c2VySWQpXHJcbiAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uIChtZXRhZGF0YSkge1xyXG4gICAgICAgICAgICByZXR1cm4gKG1ldGFkYXRhIHx8XHJcbiAgICAgICAgICAgICAgICBuZXcgRGJNdXRhdGlvblF1ZXVlKF90aGlzLnVzZXJJZCwgQkFUQ0hJRF9VTktOT1dOLCBcclxuICAgICAgICAgICAgICAgIC8qbGFzdFN0cmVhbVRva2VuPSovICcnKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEluZGV4ZWREYk11dGF0aW9uUXVldWU7XHJcbn0oKSk7XHJcbi8qKlxyXG4gKiBAcmV0dXJuIHRydWUgaWYgdGhlIG11dGF0aW9uIHF1ZXVlIGZvciB0aGUgZ2l2ZW4gdXNlciBjb250YWlucyBhIHBlbmRpbmdcclxuICogICAgICAgICBtdXRhdGlvbiBmb3IgdGhlIGdpdmVuIGtleS5cclxuICovXHJcbmZ1bmN0aW9uIG11dGF0aW9uUXVldWVDb250YWluc0tleSh0eG4sIHVzZXJJZCwga2V5KSB7XHJcbiAgICB2YXIgaW5kZXhLZXkgPSBEYkRvY3VtZW50TXV0YXRpb24ucHJlZml4Rm9yUGF0aCh1c2VySWQsIGtleS5wYXRoKTtcclxuICAgIHZhciBlbmNvZGVkUGF0aCA9IGluZGV4S2V5WzFdO1xyXG4gICAgdmFyIHN0YXJ0UmFuZ2UgPSBJREJLZXlSYW5nZS5sb3dlckJvdW5kKGluZGV4S2V5KTtcclxuICAgIHZhciBjb250YWluc0tleSA9IGZhbHNlO1xyXG4gICAgcmV0dXJuIGRvY3VtZW50TXV0YXRpb25zU3RvcmUodHhuKVxyXG4gICAgICAgIC5pdGVyYXRlKHsgcmFuZ2U6IHN0YXJ0UmFuZ2UsIGtleXNPbmx5OiB0cnVlIH0sIGZ1bmN0aW9uIChrZXksIHZhbHVlLCBjb250cm9sKSB7XHJcbiAgICAgICAgdmFyIHVzZXJJRCA9IGtleVswXSwga2V5UGF0aCA9IGtleVsxXSwgLypiYXRjaElEKi8gXyA9IGtleVsyXTtcclxuICAgICAgICBpZiAodXNlcklEID09PSB1c2VySWQgJiYga2V5UGF0aCA9PT0gZW5jb2RlZFBhdGgpIHtcclxuICAgICAgICAgICAgY29udGFpbnNLZXkgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb250cm9sLmRvbmUoKTtcclxuICAgIH0pXHJcbiAgICAgICAgLm5leHQoZnVuY3Rpb24gKCkgeyByZXR1cm4gY29udGFpbnNLZXk7IH0pO1xyXG59XHJcbi8qKiBSZXR1cm5zIHRydWUgaWYgYW55IG11dGF0aW9uIHF1ZXVlIGNvbnRhaW5zIHRoZSBnaXZlbiBkb2N1bWVudC4gKi9cclxuZnVuY3Rpb24gbXV0YXRpb25RdWV1ZXNDb250YWluS2V5KHR4biwgZG9jS2V5KSB7XHJcbiAgICB2YXIgZm91bmQgPSBmYWxzZTtcclxuICAgIHJldHVybiBtdXRhdGlvblF1ZXVlc1N0b3JlKHR4bilcclxuICAgICAgICAuaXRlcmF0ZVNlcmlhbChmdW5jdGlvbiAodXNlcklkKSB7XHJcbiAgICAgICAgcmV0dXJuIG11dGF0aW9uUXVldWVDb250YWluc0tleSh0eG4sIHVzZXJJZCwgZG9jS2V5KS5uZXh0KGZ1bmN0aW9uIChjb250YWluc0tleSkge1xyXG4gICAgICAgICAgICBpZiAoY29udGFpbnNLZXkpIHtcclxuICAgICAgICAgICAgICAgIGZvdW5kID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoIWNvbnRhaW5zS2V5KTtcclxuICAgICAgICB9KTtcclxuICAgIH0pXHJcbiAgICAgICAgLm5leHQoZnVuY3Rpb24gKCkgeyByZXR1cm4gZm91bmQ7IH0pO1xyXG59XHJcbi8qKlxyXG4gKiBEZWxldGUgYSBtdXRhdGlvbiBiYXRjaCBhbmQgdGhlIGFzc29jaWF0ZWQgZG9jdW1lbnQgbXV0YXRpb25zLlxyXG4gKiBAcmV0dXJuIEEgUGVyc2lzdGVuY2VQcm9taXNlIG9mIHRoZSBkb2N1bWVudCBtdXRhdGlvbnMgdGhhdCB3ZXJlIHJlbW92ZWQuXHJcbiAqL1xyXG5mdW5jdGlvbiByZW1vdmVNdXRhdGlvbkJhdGNoKHR4biwgdXNlcklkLCBiYXRjaCkge1xyXG4gICAgdmFyIG11dGF0aW9uU3RvcmUgPSB0eG4uc3RvcmUoRGJNdXRhdGlvbkJhdGNoLnN0b3JlKTtcclxuICAgIHZhciBpbmRleFR4biA9IHR4bi5zdG9yZShEYkRvY3VtZW50TXV0YXRpb24uc3RvcmUpO1xyXG4gICAgdmFyIHByb21pc2VzID0gW107XHJcbiAgICB2YXIgcmFuZ2UgPSBJREJLZXlSYW5nZS5vbmx5KGJhdGNoLmJhdGNoSWQpO1xyXG4gICAgdmFyIG51bURlbGV0ZWQgPSAwO1xyXG4gICAgdmFyIHJlbW92ZVByb21pc2UgPSBtdXRhdGlvblN0b3JlLml0ZXJhdGUoeyByYW5nZTogcmFuZ2UgfSwgZnVuY3Rpb24gKGtleSwgdmFsdWUsIGNvbnRyb2wpIHtcclxuICAgICAgICBudW1EZWxldGVkKys7XHJcbiAgICAgICAgcmV0dXJuIGNvbnRyb2wuZGVsZXRlKCk7XHJcbiAgICB9KTtcclxuICAgIHByb21pc2VzLnB1c2gocmVtb3ZlUHJvbWlzZS5uZXh0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBhc3NlcnQobnVtRGVsZXRlZCA9PT0gMSwgJ0RhbmdsaW5nIGRvY3VtZW50LW11dGF0aW9uIHJlZmVyZW5jZSBmb3VuZDogTWlzc2luZyBiYXRjaCAnICtcclxuICAgICAgICAgICAgYmF0Y2guYmF0Y2hJZCk7XHJcbiAgICB9KSk7XHJcbiAgICB2YXIgcmVtb3ZlZERvY3VtZW50cyA9IFtdO1xyXG4gICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IGJhdGNoLm11dGF0aW9uczsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICB2YXIgbXV0YXRpb24gPSBfYVtfaV07XHJcbiAgICAgICAgdmFyIGluZGV4S2V5ID0gRGJEb2N1bWVudE11dGF0aW9uLmtleSh1c2VySWQsIG11dGF0aW9uLmtleS5wYXRoLCBiYXRjaC5iYXRjaElkKTtcclxuICAgICAgICBwcm9taXNlcy5wdXNoKGluZGV4VHhuLmRlbGV0ZShpbmRleEtleSkpO1xyXG4gICAgICAgIHJlbW92ZWREb2N1bWVudHMucHVzaChtdXRhdGlvbi5rZXkpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS53YWl0Rm9yKHByb21pc2VzKS5uZXh0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIHJlbW92ZWREb2N1bWVudHM7IH0pO1xyXG59XHJcbmZ1bmN0aW9uIGNvbnZlcnRTdHJlYW1Ub2tlbih0b2tlbikge1xyXG4gICAgaWYgKHRva2VuIGluc3RhbmNlb2YgVWludDhBcnJheSkge1xyXG4gICAgICAgIC8vIFRPRE8oYi83ODc3MTQwMyk6IENvbnZlcnQgdG9rZW5zIHRvIHN0cmluZ3MgZHVyaW5nIGRlc2VyaWFsaXphdGlvblxyXG4gICAgICAgIGFzc2VydChTaW1wbGVEYi5pc01vY2tQZXJzaXN0ZW5jZSgpLCAnUGVyc2lzdGluZyBub24tc3RyaW5nIHN0cmVhbSB0b2tlbnMgaXMgb25seSBzdXBwb3J0ZWQgd2l0aCBtb2NrIHBlcnNpc3RlbmNlLicpO1xyXG4gICAgICAgIHJldHVybiB0b2tlbi50b1N0cmluZygpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIHRva2VuO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmb3IgdGhlIG11dGF0aW9ucyBvYmplY3Qgc3RvcmUuXHJcbiAqL1xyXG5mdW5jdGlvbiBtdXRhdGlvbnNTdG9yZSh0eG4pIHtcclxuICAgIHJldHVybiBJbmRleGVkRGJQZXJzaXN0ZW5jZS5nZXRTdG9yZSh0eG4sIERiTXV0YXRpb25CYXRjaC5zdG9yZSk7XHJcbn1cclxuLyoqXHJcbiAqIEhlbHBlciB0byBnZXQgYSB0eXBlZCBTaW1wbGVEYlN0b3JlIGZvciB0aGUgbXV0YXRpb25RdWV1ZXMgb2JqZWN0IHN0b3JlLlxyXG4gKi9cclxuZnVuY3Rpb24gZG9jdW1lbnRNdXRhdGlvbnNTdG9yZSh0eG4pIHtcclxuICAgIHJldHVybiBJbmRleGVkRGJQZXJzaXN0ZW5jZS5nZXRTdG9yZSh0eG4sIERiRG9jdW1lbnRNdXRhdGlvbi5zdG9yZSk7XHJcbn1cclxuLyoqXHJcbiAqIEhlbHBlciB0byBnZXQgYSB0eXBlZCBTaW1wbGVEYlN0b3JlIGZvciB0aGUgbXV0YXRpb25RdWV1ZXMgb2JqZWN0IHN0b3JlLlxyXG4gKi9cclxuZnVuY3Rpb24gbXV0YXRpb25RdWV1ZXNTdG9yZSh0eG4pIHtcclxuICAgIHJldHVybiBJbmRleGVkRGJQZXJzaXN0ZW5jZS5nZXRTdG9yZSh0eG4sIERiTXV0YXRpb25RdWV1ZS5zdG9yZSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnZhciBSRVNFUlZFRF9CSVRTID0gMTtcclxudmFyIEdlbmVyYXRvcklkcztcclxuKGZ1bmN0aW9uIChHZW5lcmF0b3JJZHMpIHtcclxuICAgIEdlbmVyYXRvcklkc1tHZW5lcmF0b3JJZHNbXCJRdWVyeUNhY2hlXCJdID0gMF0gPSBcIlF1ZXJ5Q2FjaGVcIjtcclxuICAgIEdlbmVyYXRvcklkc1tHZW5lcmF0b3JJZHNbXCJTeW5jRW5naW5lXCJdID0gMV0gPSBcIlN5bmNFbmdpbmVcIjsgLy8gVGhlIHRhcmdldCBJRHMgZm9yIGxpbWJvIGRldGVjdGlvbiBhcmUgb2RkIChlbmQgaW4gMSkuXHJcbn0pKEdlbmVyYXRvcklkcyB8fCAoR2VuZXJhdG9ySWRzID0ge30pKTtcclxuLyoqXHJcbiAqIEdlbmVyYXRlcyBtb25vdG9uaWNhbGx5IGluY3JlYXNpbmcgdGFyZ2V0IElEcyBmb3Igc2VuZGluZyB0YXJnZXRzIHRvIHRoZVxyXG4gKiB3YXRjaCBzdHJlYW0uXHJcbiAqXHJcbiAqIFRoZSBjbGllbnQgY29uc3RydWN0cyB0d28gZ2VuZXJhdG9ycywgb25lIGZvciB0aGUgcXVlcnkgY2FjaGUgKHZpYVxyXG4gKiBmb3JRdWVyeUNhY2hlKCkpLCBhbmQgb25lIGZvciBsaW1ibyBkb2N1bWVudHMgKHZpYSBmb3JTeW5jRW5naW5lKCkpLiBUaGVzZVxyXG4gKiB0d28gZ2VuZXJhdG9ycyBwcm9kdWNlIG5vbi1vdmVybGFwcGluZyBJRHMgKGJ5IHVzaW5nIGV2ZW4gYW5kIG9kZCBJRHNcclxuICogcmVzcGVjdGl2ZWx5KS5cclxuICpcclxuICogQnkgc2VwYXJhdGluZyB0aGUgdGFyZ2V0IElEIHNwYWNlLCB0aGUgcXVlcnkgY2FjaGUgY2FuIGdlbmVyYXRlIHRhcmdldCBJRHNcclxuICogdGhhdCBwZXJzaXN0IGFjcm9zcyBjbGllbnQgcmVzdGFydHMsIHdoaWxlIHN5bmMgZW5naW5lIGNhbiBpbmRlcGVuZGVudGx5XHJcbiAqIGdlbmVyYXRlIGluLW1lbW9yeSB0YXJnZXQgSURzIHRoYXQgYXJlIHRyYW5zaWVudCBhbmQgY2FuIGJlIHJldXNlZCBhZnRlciBhXHJcbiAqIHJlc3RhcnQuXHJcbiAqL1xyXG4vLyBUT0RPKG1yc2NobWlkdCk6IEV4cGxvcmUgcmVtb3ZpbmcgdGhpcyBjbGFzcyBpbiBmYXZvciBvZiBnZW5lcmF0aW5nIHRoZXNlIElEc1xyXG4vLyBkaXJlY3RseSBpbiBTeW5jRW5naW5lIGFuZCBMb2NhbFN0b3JlLlxyXG52YXIgVGFyZ2V0SWRHZW5lcmF0b3IgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICAvKipcclxuICAgICAqIEluc3RhbnRpYXRlcyBhIG5ldyBUYXJnZXRJZEdlbmVyYXRvci4gSWYgYSBzZWVkIGlzIHByb3ZpZGVkLCB0aGUgZ2VuZXJhdG9yXHJcbiAgICAgKiB3aWxsIHVzZSB0aGUgc2VlZCB2YWx1ZSBhcyB0aGUgbmV4dCB0YXJnZXQgSUQuXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIFRhcmdldElkR2VuZXJhdG9yKGdlbmVyYXRvcklkLCBzZWVkKSB7XHJcbiAgICAgICAgdGhpcy5nZW5lcmF0b3JJZCA9IGdlbmVyYXRvcklkO1xyXG4gICAgICAgIGFzc2VydCgoZ2VuZXJhdG9ySWQgJiBSRVNFUlZFRF9CSVRTKSA9PT0gZ2VuZXJhdG9ySWQsIFwiR2VuZXJhdG9yIElEIFwiICsgZ2VuZXJhdG9ySWQgKyBcIiBjb250YWlucyBtb3JlIHRoYW4gXCIgKyBSRVNFUlZFRF9CSVRTICsgXCIgcmVzZXJ2ZWQgYml0c1wiKTtcclxuICAgICAgICB0aGlzLnNlZWsoc2VlZCAhPT0gdW5kZWZpbmVkID8gc2VlZCA6IHRoaXMuZ2VuZXJhdG9ySWQpO1xyXG4gICAgfVxyXG4gICAgVGFyZ2V0SWRHZW5lcmF0b3IucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIG5leHRJZCA9IHRoaXMubmV4dElkO1xyXG4gICAgICAgIHRoaXMubmV4dElkICs9IDEgPDwgUkVTRVJWRURfQklUUztcclxuICAgICAgICByZXR1cm4gbmV4dElkO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0aGUgSUQgdGhhdCBmb2xsb3dzIHRoZSBnaXZlbiBJRC4gU3Vic2VxdWVudCBjYWxscyB0byBgbmV4dCgpYFxyXG4gICAgICogdXNlIHRoZSBuZXdseSByZXR1cm5lZCB0YXJnZXQgSUQgYXMgdGhlaXIgYmFzZS5cclxuICAgICAqL1xyXG4gICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS10YWIgb25seS5cclxuICAgIFRhcmdldElkR2VuZXJhdG9yLnByb3RvdHlwZS5hZnRlciA9IGZ1bmN0aW9uICh0YXJnZXRJZCkge1xyXG4gICAgICAgIHRoaXMuc2Vlayh0YXJnZXRJZCArICgxIDw8IFJFU0VSVkVEX0JJVFMpKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5uZXh0KCk7XHJcbiAgICB9O1xyXG4gICAgVGFyZ2V0SWRHZW5lcmF0b3IucHJvdG90eXBlLnNlZWsgPSBmdW5jdGlvbiAodGFyZ2V0SWQpIHtcclxuICAgICAgICBhc3NlcnQoKHRhcmdldElkICYgUkVTRVJWRURfQklUUykgPT09IHRoaXMuZ2VuZXJhdG9ySWQsICdDYW5ub3Qgc3VwcGx5IHRhcmdldCBJRCBmcm9tIGRpZmZlcmVudCBnZW5lcmF0b3IgSUQnKTtcclxuICAgICAgICB0aGlzLm5leHRJZCA9IHRhcmdldElkO1xyXG4gICAgfTtcclxuICAgIFRhcmdldElkR2VuZXJhdG9yLmZvclRhcmdldENhY2hlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vIFdlIHNlZWQgdGhlIHF1ZXJ5IGNhY2hlIGdlbmVyYXRvciB0byByZXR1cm4gJzInIGFzIGl0cyBmaXJzdCBJRCwgYXMgdGhlcmVcclxuICAgICAgICAvLyBpcyBubyBkaWZmZXJlbnRpYXRpb24gaW4gdGhlIHByb3RvY29sIGxheWVyIGJldHdlZW4gYW4gdW5zZXQgbnVtYmVyIGFuZFxyXG4gICAgICAgIC8vIHRoZSBudW1iZXIgJzAnLiBJZiB3ZSB3ZXJlIHRvIHNlbnQgYSB0YXJnZXQgd2l0aCB0YXJnZXQgSUQgJzAnLCB0aGVcclxuICAgICAgICAvLyBiYWNrZW5kIHdvdWxkIGNvbnNpZGVyIGl0IHVuc2V0IGFuZCByZXBsYWNlIGl0IHdpdGggaXRzIG93biBJRC5cclxuICAgICAgICB2YXIgdGFyZ2V0SWRHZW5lcmF0b3IgPSBuZXcgVGFyZ2V0SWRHZW5lcmF0b3IoR2VuZXJhdG9ySWRzLlF1ZXJ5Q2FjaGUsIDIpO1xyXG4gICAgICAgIHJldHVybiB0YXJnZXRJZEdlbmVyYXRvcjtcclxuICAgIH07XHJcbiAgICBUYXJnZXRJZEdlbmVyYXRvci5mb3JTeW5jRW5naW5lID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vIFN5bmMgZW5naW5lIGFzc2lnbnMgdGFyZ2V0IElEcyBmb3IgbGltYm8gZG9jdW1lbnQgZGV0ZWN0aW9uLlxyXG4gICAgICAgIHJldHVybiBuZXcgVGFyZ2V0SWRHZW5lcmF0b3IoR2VuZXJhdG9ySWRzLlN5bmNFbmdpbmUpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBUYXJnZXRJZEdlbmVyYXRvcjtcclxufSgpKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnZhciBJbmRleGVkRGJUYXJnZXRDYWNoZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEluZGV4ZWREYlRhcmdldENhY2hlKHJlZmVyZW5jZURlbGVnYXRlLCBzZXJpYWxpemVyKSB7XHJcbiAgICAgICAgdGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZSA9IHJlZmVyZW5jZURlbGVnYXRlO1xyXG4gICAgICAgIHRoaXMuc2VyaWFsaXplciA9IHNlcmlhbGl6ZXI7XHJcbiAgICAgICAgLy8gUE9SVElORyBOT1RFOiBXZSBkb24ndCBjYWNoZSBnbG9iYWwgbWV0YWRhdGEgZm9yIHRoZSB0YXJnZXQgY2FjaGUsIHNpbmNlXHJcbiAgICAgICAgLy8gc29tZSBvZiBpdCAoaW4gcGFydGljdWxhciBgaGlnaGVzdFRhcmdldElkYCkgY2FuIGJlIG1vZGlmaWVkIGJ5IHNlY29uZGFyeVxyXG4gICAgICAgIC8vIHRhYnMuIFdlIGNvdWxkIHBlcmhhcHMgYmUgbW9yZSBncmFudWxhciAoYW5kIGUuZy4gc3RpbGwgY2FjaGVcclxuICAgICAgICAvLyBgbGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbmAgaW4gbWVtb3J5KSBidXQgZm9yIHNpbXBsaWNpdHkgd2UgY3VycmVudGx5IGdvXHJcbiAgICAgICAgLy8gdG8gSW5kZXhlZERiIHdoZW5ldmVyIHdlIG5lZWQgdG8gcmVhZCBtZXRhZGF0YS4gV2UgY2FuIHJldmlzaXQgaWYgaXQgdHVybnNcclxuICAgICAgICAvLyBvdXQgdG8gaGF2ZSBhIG1lYW5pbmdmdWwgcGVyZm9ybWFuY2UgaW1wYWN0LlxyXG4gICAgICAgIHRoaXMudGFyZ2V0SWRHZW5lcmF0b3IgPSBUYXJnZXRJZEdlbmVyYXRvci5mb3JUYXJnZXRDYWNoZSgpO1xyXG4gICAgfVxyXG4gICAgSW5kZXhlZERiVGFyZ2V0Q2FjaGUucHJvdG90eXBlLmFsbG9jYXRlVGFyZ2V0SWQgPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24pIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnJldHJpZXZlTWV0YWRhdGEodHJhbnNhY3Rpb24pLm5leHQoZnVuY3Rpb24gKG1ldGFkYXRhKSB7XHJcbiAgICAgICAgICAgIG1ldGFkYXRhLmhpZ2hlc3RUYXJnZXRJZCA9IF90aGlzLnRhcmdldElkR2VuZXJhdG9yLmFmdGVyKG1ldGFkYXRhLmhpZ2hlc3RUYXJnZXRJZCk7XHJcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5zYXZlTWV0YWRhdGEodHJhbnNhY3Rpb24sIG1ldGFkYXRhKS5uZXh0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIG1ldGFkYXRhLmhpZ2hlc3RUYXJnZXRJZDsgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgSW5kZXhlZERiVGFyZ2V0Q2FjaGUucHJvdG90eXBlLmdldExhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24gPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24pIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5yZXRyaWV2ZU1ldGFkYXRhKHRyYW5zYWN0aW9uKS5uZXh0KGZ1bmN0aW9uIChtZXRhZGF0YSkge1xyXG4gICAgICAgICAgICByZXR1cm4gU25hcHNob3RWZXJzaW9uLmZyb21UaW1lc3RhbXAobmV3IFRpbWVzdGFtcChtZXRhZGF0YS5sYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uLnNlY29uZHMsIG1ldGFkYXRhLmxhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24ubmFub3NlY29uZHMpKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBJbmRleGVkRGJUYXJnZXRDYWNoZS5wcm90b3R5cGUuZ2V0SGlnaGVzdFNlcXVlbmNlTnVtYmVyID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uKSB7XHJcbiAgICAgICAgcmV0dXJuIGdldEhpZ2hlc3RMaXN0ZW5TZXF1ZW5jZU51bWJlcih0cmFuc2FjdGlvbi5zaW1wbGVEYlRyYW5zYWN0aW9uKTtcclxuICAgIH07XHJcbiAgICBJbmRleGVkRGJUYXJnZXRDYWNoZS5wcm90b3R5cGUuc2V0VGFyZ2V0c01ldGFkYXRhID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCBoaWdoZXN0TGlzdGVuU2VxdWVuY2VOdW1iZXIsIGxhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24pIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnJldHJpZXZlTWV0YWRhdGEodHJhbnNhY3Rpb24pLm5leHQoZnVuY3Rpb24gKG1ldGFkYXRhKSB7XHJcbiAgICAgICAgICAgIG1ldGFkYXRhLmhpZ2hlc3RMaXN0ZW5TZXF1ZW5jZU51bWJlciA9IGhpZ2hlc3RMaXN0ZW5TZXF1ZW5jZU51bWJlcjtcclxuICAgICAgICAgICAgaWYgKGxhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24pIHtcclxuICAgICAgICAgICAgICAgIG1ldGFkYXRhLmxhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24gPSBsYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uLnRvVGltZXN0YW1wKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGhpZ2hlc3RMaXN0ZW5TZXF1ZW5jZU51bWJlciA+IG1ldGFkYXRhLmhpZ2hlc3RMaXN0ZW5TZXF1ZW5jZU51bWJlcikge1xyXG4gICAgICAgICAgICAgICAgbWV0YWRhdGEuaGlnaGVzdExpc3RlblNlcXVlbmNlTnVtYmVyID0gaGlnaGVzdExpc3RlblNlcXVlbmNlTnVtYmVyO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5zYXZlTWV0YWRhdGEodHJhbnNhY3Rpb24sIG1ldGFkYXRhKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBJbmRleGVkRGJUYXJnZXRDYWNoZS5wcm90b3R5cGUuYWRkVGFyZ2V0RGF0YSA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwgdGFyZ2V0RGF0YSkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc2F2ZVRhcmdldERhdGEodHJhbnNhY3Rpb24sIHRhcmdldERhdGEpLm5leHQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXMucmV0cmlldmVNZXRhZGF0YSh0cmFuc2FjdGlvbikubmV4dChmdW5jdGlvbiAobWV0YWRhdGEpIHtcclxuICAgICAgICAgICAgICAgIG1ldGFkYXRhLnRhcmdldENvdW50ICs9IDE7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy51cGRhdGVNZXRhZGF0YUZyb21UYXJnZXREYXRhKHRhcmdldERhdGEsIG1ldGFkYXRhKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5zYXZlTWV0YWRhdGEodHJhbnNhY3Rpb24sIG1ldGFkYXRhKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgSW5kZXhlZERiVGFyZ2V0Q2FjaGUucHJvdG90eXBlLnVwZGF0ZVRhcmdldERhdGEgPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24sIHRhcmdldERhdGEpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zYXZlVGFyZ2V0RGF0YSh0cmFuc2FjdGlvbiwgdGFyZ2V0RGF0YSk7XHJcbiAgICB9O1xyXG4gICAgSW5kZXhlZERiVGFyZ2V0Q2FjaGUucHJvdG90eXBlLnJlbW92ZVRhcmdldERhdGEgPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24sIHRhcmdldERhdGEpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnJlbW92ZU1hdGNoaW5nS2V5c0ZvclRhcmdldElkKHRyYW5zYWN0aW9uLCB0YXJnZXREYXRhLnRhcmdldElkKVxyXG4gICAgICAgICAgICAubmV4dChmdW5jdGlvbiAoKSB7IHJldHVybiB0YXJnZXRzU3RvcmUodHJhbnNhY3Rpb24pLmRlbGV0ZSh0YXJnZXREYXRhLnRhcmdldElkKTsgfSlcclxuICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMucmV0cmlldmVNZXRhZGF0YSh0cmFuc2FjdGlvbik7IH0pXHJcbiAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uIChtZXRhZGF0YSkge1xyXG4gICAgICAgICAgICBhc3NlcnQobWV0YWRhdGEudGFyZ2V0Q291bnQgPiAwLCAnUmVtb3ZpbmcgZnJvbSBhbiBlbXB0eSB0YXJnZXQgY2FjaGUnKTtcclxuICAgICAgICAgICAgbWV0YWRhdGEudGFyZ2V0Q291bnQgLT0gMTtcclxuICAgICAgICAgICAgcmV0dXJuIF90aGlzLnNhdmVNZXRhZGF0YSh0cmFuc2FjdGlvbiwgbWV0YWRhdGEpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogRHJvcHMgYW55IHRhcmdldHMgd2l0aCBzZXF1ZW5jZSBudW1iZXIgbGVzcyB0aGFuIG9yIGVxdWFsIHRvIHRoZSB1cHBlciBib3VuZCwgZXhjZXB0aW5nIHRob3NlXHJcbiAgICAgKiBwcmVzZW50IGluIGBhY3RpdmVUYXJnZXRJZHNgLiBEb2N1bWVudCBhc3NvY2lhdGlvbnMgZm9yIHRoZSByZW1vdmVkIHRhcmdldHMgYXJlIGFsc28gcmVtb3ZlZC5cclxuICAgICAqIFJldHVybnMgdGhlIG51bWJlciBvZiB0YXJnZXRzIHJlbW92ZWQuXHJcbiAgICAgKi9cclxuICAgIEluZGV4ZWREYlRhcmdldENhY2hlLnByb3RvdHlwZS5yZW1vdmVUYXJnZXRzID0gZnVuY3Rpb24gKHR4biwgdXBwZXJCb3VuZCwgYWN0aXZlVGFyZ2V0SWRzKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgY291bnQgPSAwO1xyXG4gICAgICAgIHZhciBwcm9taXNlcyA9IFtdO1xyXG4gICAgICAgIHJldHVybiB0YXJnZXRzU3RvcmUodHhuKVxyXG4gICAgICAgICAgICAuaXRlcmF0ZShmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xyXG4gICAgICAgICAgICB2YXIgdGFyZ2V0RGF0YSA9IF90aGlzLnNlcmlhbGl6ZXIuZnJvbURiVGFyZ2V0KHZhbHVlKTtcclxuICAgICAgICAgICAgaWYgKHRhcmdldERhdGEuc2VxdWVuY2VOdW1iZXIgPD0gdXBwZXJCb3VuZCAmJlxyXG4gICAgICAgICAgICAgICAgYWN0aXZlVGFyZ2V0SWRzLmdldCh0YXJnZXREYXRhLnRhcmdldElkKSA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgY291bnQrKztcclxuICAgICAgICAgICAgICAgIHByb21pc2VzLnB1c2goX3RoaXMucmVtb3ZlVGFyZ2V0RGF0YSh0eG4sIHRhcmdldERhdGEpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS53YWl0Rm9yKHByb21pc2VzKTsgfSlcclxuICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKCkgeyByZXR1cm4gY291bnQ7IH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQ2FsbCBwcm92aWRlZCBmdW5jdGlvbiB3aXRoIGVhY2ggYFRhcmdldERhdGFgIHRoYXQgd2UgaGF2ZSBjYWNoZWQuXHJcbiAgICAgKi9cclxuICAgIEluZGV4ZWREYlRhcmdldENhY2hlLnByb3RvdHlwZS5mb3JFYWNoVGFyZ2V0ID0gZnVuY3Rpb24gKHR4biwgZikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIHRhcmdldHNTdG9yZSh0eG4pLml0ZXJhdGUoZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcclxuICAgICAgICAgICAgdmFyIHRhcmdldERhdGEgPSBfdGhpcy5zZXJpYWxpemVyLmZyb21EYlRhcmdldCh2YWx1ZSk7XHJcbiAgICAgICAgICAgIGYodGFyZ2V0RGF0YSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgSW5kZXhlZERiVGFyZ2V0Q2FjaGUucHJvdG90eXBlLnJldHJpZXZlTWV0YWRhdGEgPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24pIHtcclxuICAgICAgICByZXR1cm4gcmV0cmlldmVNZXRhZGF0YSh0cmFuc2FjdGlvbi5zaW1wbGVEYlRyYW5zYWN0aW9uKTtcclxuICAgIH07XHJcbiAgICBJbmRleGVkRGJUYXJnZXRDYWNoZS5wcm90b3R5cGUuc2F2ZU1ldGFkYXRhID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCBtZXRhZGF0YSkge1xyXG4gICAgICAgIHJldHVybiBnbG9iYWxUYXJnZXRTdG9yZSh0cmFuc2FjdGlvbikucHV0KERiVGFyZ2V0R2xvYmFsLmtleSwgbWV0YWRhdGEpO1xyXG4gICAgfTtcclxuICAgIEluZGV4ZWREYlRhcmdldENhY2hlLnByb3RvdHlwZS5zYXZlVGFyZ2V0RGF0YSA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwgdGFyZ2V0RGF0YSkge1xyXG4gICAgICAgIHJldHVybiB0YXJnZXRzU3RvcmUodHJhbnNhY3Rpb24pLnB1dCh0aGlzLnNlcmlhbGl6ZXIudG9EYlRhcmdldCh0YXJnZXREYXRhKSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBJbi1wbGFjZSB1cGRhdGVzIHRoZSBwcm92aWRlZCBtZXRhZGF0YSB0byBhY2NvdW50IGZvciB2YWx1ZXMgaW4gdGhlIGdpdmVuXHJcbiAgICAgKiBUYXJnZXREYXRhLiBTYXZpbmcgaXMgZG9uZSBzZXBhcmF0ZWx5LiBSZXR1cm5zIHRydWUgaWYgdGhlcmUgd2VyZSBhbnlcclxuICAgICAqIGNoYW5nZXMgdG8gdGhlIG1ldGFkYXRhLlxyXG4gICAgICovXHJcbiAgICBJbmRleGVkRGJUYXJnZXRDYWNoZS5wcm90b3R5cGUudXBkYXRlTWV0YWRhdGFGcm9tVGFyZ2V0RGF0YSA9IGZ1bmN0aW9uICh0YXJnZXREYXRhLCBtZXRhZGF0YSkge1xyXG4gICAgICAgIHZhciB1cGRhdGVkID0gZmFsc2U7XHJcbiAgICAgICAgaWYgKHRhcmdldERhdGEudGFyZ2V0SWQgPiBtZXRhZGF0YS5oaWdoZXN0VGFyZ2V0SWQpIHtcclxuICAgICAgICAgICAgbWV0YWRhdGEuaGlnaGVzdFRhcmdldElkID0gdGFyZ2V0RGF0YS50YXJnZXRJZDtcclxuICAgICAgICAgICAgdXBkYXRlZCA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0YXJnZXREYXRhLnNlcXVlbmNlTnVtYmVyID4gbWV0YWRhdGEuaGlnaGVzdExpc3RlblNlcXVlbmNlTnVtYmVyKSB7XHJcbiAgICAgICAgICAgIG1ldGFkYXRhLmhpZ2hlc3RMaXN0ZW5TZXF1ZW5jZU51bWJlciA9IHRhcmdldERhdGEuc2VxdWVuY2VOdW1iZXI7XHJcbiAgICAgICAgICAgIHVwZGF0ZWQgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdXBkYXRlZDtcclxuICAgIH07XHJcbiAgICBJbmRleGVkRGJUYXJnZXRDYWNoZS5wcm90b3R5cGUuZ2V0VGFyZ2V0Q291bnQgPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24pIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5yZXRyaWV2ZU1ldGFkYXRhKHRyYW5zYWN0aW9uKS5uZXh0KGZ1bmN0aW9uIChtZXRhZGF0YSkgeyByZXR1cm4gbWV0YWRhdGEudGFyZ2V0Q291bnQ7IH0pO1xyXG4gICAgfTtcclxuICAgIEluZGV4ZWREYlRhcmdldENhY2hlLnByb3RvdHlwZS5nZXRUYXJnZXREYXRhID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCB0YXJnZXQpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIC8vIEl0ZXJhdGluZyBieSB0aGUgY2Fub25pY2FsSWQgbWF5IHlpZWxkIG1vcmUgdGhhbiBvbmUgcmVzdWx0IGJlY2F1c2VcclxuICAgICAgICAvLyBjYW5vbmljYWxJZCB2YWx1ZXMgYXJlIG5vdCByZXF1aXJlZCB0byBiZSB1bmlxdWUgcGVyIHRhcmdldC4gVGhpcyBxdWVyeVxyXG4gICAgICAgIC8vIGRlcGVuZHMgb24gdGhlIHF1ZXJ5VGFyZ2V0cyBpbmRleCB0byBiZSBlZmZpY2llbnQuXHJcbiAgICAgICAgdmFyIGNhbm9uaWNhbElkID0gdGFyZ2V0LmNhbm9uaWNhbElkKCk7XHJcbiAgICAgICAgdmFyIHJhbmdlID0gSURCS2V5UmFuZ2UuYm91bmQoW2Nhbm9uaWNhbElkLCBOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFldLCBbY2Fub25pY2FsSWQsIE51bWJlci5QT1NJVElWRV9JTkZJTklUWV0pO1xyXG4gICAgICAgIHZhciByZXN1bHQgPSBudWxsO1xyXG4gICAgICAgIHJldHVybiB0YXJnZXRzU3RvcmUodHJhbnNhY3Rpb24pXHJcbiAgICAgICAgICAgIC5pdGVyYXRlKHsgcmFuZ2U6IHJhbmdlLCBpbmRleDogRGJUYXJnZXQucXVlcnlUYXJnZXRzSW5kZXhOYW1lIH0sIGZ1bmN0aW9uIChrZXksIHZhbHVlLCBjb250cm9sKSB7XHJcbiAgICAgICAgICAgIHZhciBmb3VuZCA9IF90aGlzLnNlcmlhbGl6ZXIuZnJvbURiVGFyZ2V0KHZhbHVlKTtcclxuICAgICAgICAgICAgLy8gQWZ0ZXIgZmluZGluZyBhIHBvdGVudGlhbCBtYXRjaCwgY2hlY2sgdGhhdCB0aGUgdGFyZ2V0IGlzXHJcbiAgICAgICAgICAgIC8vIGFjdHVhbGx5IGVxdWFsIHRvIHRoZSByZXF1ZXN0ZWQgdGFyZ2V0LlxyXG4gICAgICAgICAgICBpZiAodGFyZ2V0LmlzRXF1YWwoZm91bmQudGFyZ2V0KSkge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gZm91bmQ7XHJcbiAgICAgICAgICAgICAgICBjb250cm9sLmRvbmUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIHJlc3VsdDsgfSk7XHJcbiAgICB9O1xyXG4gICAgSW5kZXhlZERiVGFyZ2V0Q2FjaGUucHJvdG90eXBlLmFkZE1hdGNoaW5nS2V5cyA9IGZ1bmN0aW9uICh0eG4sIGtleXMsIHRhcmdldElkKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICAvLyBQT1JUSU5HIE5PVEU6IFRoZSByZXZlcnNlIGluZGV4IChkb2N1bWVudHNUYXJnZXRzKSBpcyBtYWludGFpbmVkIGJ5XHJcbiAgICAgICAgLy8gSW5kZXhlZERiLlxyXG4gICAgICAgIHZhciBwcm9taXNlcyA9IFtdO1xyXG4gICAgICAgIHZhciBzdG9yZSA9IGRvY3VtZW50VGFyZ2V0U3RvcmUodHhuKTtcclxuICAgICAgICBrZXlzLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgICAgICB2YXIgcGF0aCA9IGVuY29kZShrZXkucGF0aCk7XHJcbiAgICAgICAgICAgIHByb21pc2VzLnB1c2goc3RvcmUucHV0KG5ldyBEYlRhcmdldERvY3VtZW50KHRhcmdldElkLCBwYXRoKSkpO1xyXG4gICAgICAgICAgICBwcm9taXNlcy5wdXNoKF90aGlzLnJlZmVyZW5jZURlbGVnYXRlLmFkZFJlZmVyZW5jZSh0eG4sIGtleSkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2Uud2FpdEZvcihwcm9taXNlcyk7XHJcbiAgICB9O1xyXG4gICAgSW5kZXhlZERiVGFyZ2V0Q2FjaGUucHJvdG90eXBlLnJlbW92ZU1hdGNoaW5nS2V5cyA9IGZ1bmN0aW9uICh0eG4sIGtleXMsIHRhcmdldElkKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICAvLyBQT1JUSU5HIE5PVEU6IFRoZSByZXZlcnNlIGluZGV4IChkb2N1bWVudHNUYXJnZXRzKSBpcyBtYWludGFpbmVkIGJ5XHJcbiAgICAgICAgLy8gSW5kZXhlZERiLlxyXG4gICAgICAgIHZhciBzdG9yZSA9IGRvY3VtZW50VGFyZ2V0U3RvcmUodHhuKTtcclxuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLmZvckVhY2goa2V5cywgZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgICAgICB2YXIgcGF0aCA9IGVuY29kZShrZXkucGF0aCk7XHJcbiAgICAgICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2Uud2FpdEZvcihbXHJcbiAgICAgICAgICAgICAgICBzdG9yZS5kZWxldGUoW3RhcmdldElkLCBwYXRoXSksXHJcbiAgICAgICAgICAgICAgICBfdGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZS5yZW1vdmVSZWZlcmVuY2UodHhuLCBrZXkpXHJcbiAgICAgICAgICAgIF0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIEluZGV4ZWREYlRhcmdldENhY2hlLnByb3RvdHlwZS5yZW1vdmVNYXRjaGluZ0tleXNGb3JUYXJnZXRJZCA9IGZ1bmN0aW9uICh0eG4sIHRhcmdldElkKSB7XHJcbiAgICAgICAgdmFyIHN0b3JlID0gZG9jdW1lbnRUYXJnZXRTdG9yZSh0eG4pO1xyXG4gICAgICAgIHZhciByYW5nZSA9IElEQktleVJhbmdlLmJvdW5kKFt0YXJnZXRJZF0sIFt0YXJnZXRJZCArIDFdLCBcclxuICAgICAgICAvKmxvd2VyT3Blbj0qLyBmYWxzZSwgXHJcbiAgICAgICAgLyp1cHBlck9wZW49Ki8gdHJ1ZSk7XHJcbiAgICAgICAgcmV0dXJuIHN0b3JlLmRlbGV0ZShyYW5nZSk7XHJcbiAgICB9O1xyXG4gICAgSW5kZXhlZERiVGFyZ2V0Q2FjaGUucHJvdG90eXBlLmdldE1hdGNoaW5nS2V5c0ZvclRhcmdldElkID0gZnVuY3Rpb24gKHR4biwgdGFyZ2V0SWQpIHtcclxuICAgICAgICB2YXIgcmFuZ2UgPSBJREJLZXlSYW5nZS5ib3VuZChbdGFyZ2V0SWRdLCBbdGFyZ2V0SWQgKyAxXSwgXHJcbiAgICAgICAgLypsb3dlck9wZW49Ki8gZmFsc2UsIFxyXG4gICAgICAgIC8qdXBwZXJPcGVuPSovIHRydWUpO1xyXG4gICAgICAgIHZhciBzdG9yZSA9IGRvY3VtZW50VGFyZ2V0U3RvcmUodHhuKTtcclxuICAgICAgICB2YXIgcmVzdWx0ID0gZG9jdW1lbnRLZXlTZXQoKTtcclxuICAgICAgICByZXR1cm4gc3RvcmVcclxuICAgICAgICAgICAgLml0ZXJhdGUoeyByYW5nZTogcmFuZ2UsIGtleXNPbmx5OiB0cnVlIH0sIGZ1bmN0aW9uIChrZXksIF8sIGNvbnRyb2wpIHtcclxuICAgICAgICAgICAgdmFyIHBhdGggPSBkZWNvZGUoa2V5WzFdKTtcclxuICAgICAgICAgICAgdmFyIGRvY0tleSA9IG5ldyBEb2N1bWVudEtleShwYXRoKTtcclxuICAgICAgICAgICAgcmVzdWx0ID0gcmVzdWx0LmFkZChkb2NLZXkpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIHJlc3VsdDsgfSk7XHJcbiAgICB9O1xyXG4gICAgSW5kZXhlZERiVGFyZ2V0Q2FjaGUucHJvdG90eXBlLmNvbnRhaW5zS2V5ID0gZnVuY3Rpb24gKHR4biwga2V5KSB7XHJcbiAgICAgICAgdmFyIHBhdGggPSBlbmNvZGUoa2V5LnBhdGgpO1xyXG4gICAgICAgIHZhciByYW5nZSA9IElEQktleVJhbmdlLmJvdW5kKFtwYXRoXSwgW2ltbWVkaWF0ZVN1Y2Nlc3NvcihwYXRoKV0sIFxyXG4gICAgICAgIC8qbG93ZXJPcGVuPSovIGZhbHNlLCBcclxuICAgICAgICAvKnVwcGVyT3Blbj0qLyB0cnVlKTtcclxuICAgICAgICB2YXIgY291bnQgPSAwO1xyXG4gICAgICAgIHJldHVybiBkb2N1bWVudFRhcmdldFN0b3JlKHR4bilcclxuICAgICAgICAgICAgLml0ZXJhdGUoe1xyXG4gICAgICAgICAgICBpbmRleDogRGJUYXJnZXREb2N1bWVudC5kb2N1bWVudFRhcmdldHNJbmRleCxcclxuICAgICAgICAgICAga2V5c09ubHk6IHRydWUsXHJcbiAgICAgICAgICAgIHJhbmdlOiByYW5nZVxyXG4gICAgICAgIH0sIGZ1bmN0aW9uIChfYSwgXywgY29udHJvbCkge1xyXG4gICAgICAgICAgICB2YXIgdGFyZ2V0SWQgPSBfYVswXSwgcGF0aCA9IF9hWzFdO1xyXG4gICAgICAgICAgICAvLyBIYXZpbmcgYSBzZW50aW5lbCByb3cgZm9yIGEgZG9jdW1lbnQgZG9lcyBub3QgY291bnQgYXMgY29udGFpbmluZyB0aGF0IGRvY3VtZW50O1xyXG4gICAgICAgICAgICAvLyBGb3IgdGhlIHRhcmdldCBjYWNoZSwgY29udGFpbmluZyB0aGUgZG9jdW1lbnQgbWVhbnMgdGhlIGRvY3VtZW50IGlzIHBhcnQgb2Ygc29tZVxyXG4gICAgICAgICAgICAvLyB0YXJnZXQuXHJcbiAgICAgICAgICAgIGlmICh0YXJnZXRJZCAhPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgY291bnQrKztcclxuICAgICAgICAgICAgICAgIGNvbnRyb2wuZG9uZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKCkgeyByZXR1cm4gY291bnQgPiAwOyB9KTtcclxuICAgIH07XHJcbiAgICBJbmRleGVkRGJUYXJnZXRDYWNoZS5wcm90b3R5cGUuZ2V0VGFyZ2V0RGF0YUZvclRhcmdldCA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwgdGFyZ2V0SWQpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiB0YXJnZXRzU3RvcmUodHJhbnNhY3Rpb24pXHJcbiAgICAgICAgICAgIC5nZXQodGFyZ2V0SWQpXHJcbiAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uIChmb3VuZCkge1xyXG4gICAgICAgICAgICBpZiAoZm91bmQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5zZXJpYWxpemVyLmZyb21EYlRhcmdldChmb3VuZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBJbmRleGVkRGJUYXJnZXRDYWNoZTtcclxufSgpKTtcclxuLyoqXHJcbiAqIEhlbHBlciB0byBnZXQgYSB0eXBlZCBTaW1wbGVEYlN0b3JlIGZvciB0aGUgcXVlcmllcyBvYmplY3Qgc3RvcmUuXHJcbiAqL1xyXG5mdW5jdGlvbiB0YXJnZXRzU3RvcmUodHhuKSB7XHJcbiAgICByZXR1cm4gSW5kZXhlZERiUGVyc2lzdGVuY2UuZ2V0U3RvcmUodHhuLCBEYlRhcmdldC5zdG9yZSk7XHJcbn1cclxuLyoqXHJcbiAqIEhlbHBlciB0byBnZXQgYSB0eXBlZCBTaW1wbGVEYlN0b3JlIGZvciB0aGUgdGFyZ2V0IGdsb2JhbHMgb2JqZWN0IHN0b3JlLlxyXG4gKi9cclxuZnVuY3Rpb24gZ2xvYmFsVGFyZ2V0U3RvcmUodHhuKSB7XHJcbiAgICByZXR1cm4gSW5kZXhlZERiUGVyc2lzdGVuY2UuZ2V0U3RvcmUodHhuLCBEYlRhcmdldEdsb2JhbC5zdG9yZSk7XHJcbn1cclxuZnVuY3Rpb24gcmV0cmlldmVNZXRhZGF0YSh0eG4pIHtcclxuICAgIHZhciBnbG9iYWxTdG9yZSA9IFNpbXBsZURiLmdldFN0b3JlKHR4biwgRGJUYXJnZXRHbG9iYWwuc3RvcmUpO1xyXG4gICAgcmV0dXJuIGdsb2JhbFN0b3JlLmdldChEYlRhcmdldEdsb2JhbC5rZXkpLm5leHQoZnVuY3Rpb24gKG1ldGFkYXRhKSB7XHJcbiAgICAgICAgYXNzZXJ0KG1ldGFkYXRhICE9PSBudWxsLCAnTWlzc2luZyBtZXRhZGF0YSByb3cuJyk7XHJcbiAgICAgICAgcmV0dXJuIG1ldGFkYXRhO1xyXG4gICAgfSk7XHJcbn1cclxuZnVuY3Rpb24gZ2V0SGlnaGVzdExpc3RlblNlcXVlbmNlTnVtYmVyKHR4bikge1xyXG4gICAgcmV0dXJuIHJldHJpZXZlTWV0YWRhdGEodHhuKS5uZXh0KGZ1bmN0aW9uICh0YXJnZXRHbG9iYWwpIHsgcmV0dXJuIHRhcmdldEdsb2JhbC5oaWdoZXN0TGlzdGVuU2VxdWVuY2VOdW1iZXI7IH0pO1xyXG59XHJcbi8qKlxyXG4gKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmb3IgdGhlIGRvY3VtZW50IHRhcmdldCBvYmplY3Qgc3RvcmUuXHJcbiAqL1xyXG5mdW5jdGlvbiBkb2N1bWVudFRhcmdldFN0b3JlKHR4bikge1xyXG4gICAgcmV0dXJuIEluZGV4ZWREYlBlcnNpc3RlbmNlLmdldFN0b3JlKHR4biwgRGJUYXJnZXREb2N1bWVudC5zdG9yZSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBQcm92aWRlcyBhIHNldCBvZiBmaWVsZHMgdGhhdCBjYW4gYmUgdXNlZCB0byBwYXJ0aWFsbHkgcGF0Y2ggYSBkb2N1bWVudC5cclxuICogRmllbGRNYXNrIGlzIHVzZWQgaW4gY29uanVuY3Rpb24gd2l0aCBPYmplY3RWYWx1ZS5cclxuICogRXhhbXBsZXM6XHJcbiAqICAgZm9vIC0gT3ZlcndyaXRlcyBmb28gZW50aXJlbHkgd2l0aCB0aGUgcHJvdmlkZWQgdmFsdWUuIElmIGZvbyBpcyBub3RcclxuICogICAgICAgICBwcmVzZW50IGluIHRoZSBjb21wYW5pb24gT2JqZWN0VmFsdWUsIHRoZSBmaWVsZCBpcyBkZWxldGVkLlxyXG4gKiAgIGZvby5iYXIgLSBPdmVyd3JpdGVzIG9ubHkgdGhlIGZpZWxkIGJhciBvZiB0aGUgb2JqZWN0IGZvby5cclxuICogICAgICAgICAgICAgSWYgZm9vIGlzIG5vdCBhbiBvYmplY3QsIGZvbyBpcyByZXBsYWNlZCB3aXRoIGFuIG9iamVjdFxyXG4gKiAgICAgICAgICAgICBjb250YWluaW5nIGZvb1xyXG4gKi9cclxudmFyIEZpZWxkTWFzayA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEZpZWxkTWFzayhmaWVsZHMpIHtcclxuICAgICAgICB0aGlzLmZpZWxkcyA9IGZpZWxkcztcclxuICAgICAgICAvLyBUT0RPKGRpbW9uZCk6IHZhbGlkYXRpb24gb2YgRmllbGRNYXNrXHJcbiAgICB9XHJcbiAgICBGaWVsZE1hc2suZnJvbVNldCA9IGZ1bmN0aW9uIChmaWVsZHMpIHtcclxuICAgICAgICByZXR1cm4gbmV3IEZpZWxkTWFzayhmaWVsZHMpO1xyXG4gICAgfTtcclxuICAgIEZpZWxkTWFzay5mcm9tQXJyYXkgPSBmdW5jdGlvbiAoZmllbGRzKSB7XHJcbiAgICAgICAgdmFyIGZpZWxkc0FzU2V0ID0gbmV3IFNvcnRlZFNldChGaWVsZFBhdGguY29tcGFyYXRvcik7XHJcbiAgICAgICAgZmllbGRzLmZvckVhY2goZnVuY3Rpb24gKGZpZWxkUGF0aCkgeyByZXR1cm4gKGZpZWxkc0FzU2V0ID0gZmllbGRzQXNTZXQuYWRkKGZpZWxkUGF0aCkpOyB9KTtcclxuICAgICAgICByZXR1cm4gbmV3IEZpZWxkTWFzayhmaWVsZHNBc1NldCk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBWZXJpZmllcyB0aGF0IGBmaWVsZFBhdGhgIGlzIGluY2x1ZGVkIGJ5IGF0IGxlYXN0IG9uZSBmaWVsZCBpbiB0aGlzIGZpZWxkXHJcbiAgICAgKiBtYXNrLlxyXG4gICAgICpcclxuICAgICAqIFRoaXMgaXMgYW4gTyhuKSBvcGVyYXRpb24sIHdoZXJlIGBuYCBpcyB0aGUgc2l6ZSBvZiB0aGUgZmllbGQgbWFzay5cclxuICAgICAqL1xyXG4gICAgRmllbGRNYXNrLnByb3RvdHlwZS5jb3ZlcnMgPSBmdW5jdGlvbiAoZmllbGRQYXRoKSB7XHJcbiAgICAgICAgdmFyIGZvdW5kID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5maWVsZHMuZm9yRWFjaChmdW5jdGlvbiAoZmllbGRNYXNrUGF0aCkge1xyXG4gICAgICAgICAgICBpZiAoZmllbGRNYXNrUGF0aC5pc1ByZWZpeE9mKGZpZWxkUGF0aCkpIHtcclxuICAgICAgICAgICAgICAgIGZvdW5kID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBmb3VuZDtcclxuICAgIH07XHJcbiAgICBGaWVsZE1hc2sucHJvdG90eXBlLmlzRXF1YWwgPSBmdW5jdGlvbiAob3RoZXIpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5maWVsZHMuaXNFcXVhbChvdGhlci5maWVsZHMpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBGaWVsZE1hc2s7XHJcbn0oKSk7XHJcbi8qKiBBIGZpZWxkIHBhdGggYW5kIHRoZSBUcmFuc2Zvcm1PcGVyYXRpb24gdG8gcGVyZm9ybSB1cG9uIGl0LiAqL1xyXG52YXIgRmllbGRUcmFuc2Zvcm0gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBGaWVsZFRyYW5zZm9ybShmaWVsZCwgdHJhbnNmb3JtKSB7XHJcbiAgICAgICAgdGhpcy5maWVsZCA9IGZpZWxkO1xyXG4gICAgICAgIHRoaXMudHJhbnNmb3JtID0gdHJhbnNmb3JtO1xyXG4gICAgfVxyXG4gICAgRmllbGRUcmFuc2Zvcm0ucHJvdG90eXBlLmlzRXF1YWwgPSBmdW5jdGlvbiAob3RoZXIpIHtcclxuICAgICAgICByZXR1cm4gKHRoaXMuZmllbGQuaXNFcXVhbChvdGhlci5maWVsZCkgJiYgdGhpcy50cmFuc2Zvcm0uaXNFcXVhbChvdGhlci50cmFuc2Zvcm0pKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gRmllbGRUcmFuc2Zvcm07XHJcbn0oKSk7XHJcbi8qKiBUaGUgcmVzdWx0IG9mIHN1Y2Nlc3NmdWxseSBhcHBseWluZyBhIG11dGF0aW9uIHRvIHRoZSBiYWNrZW5kLiAqL1xyXG52YXIgTXV0YXRpb25SZXN1bHQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBNdXRhdGlvblJlc3VsdChcclxuICAgIC8qKlxyXG4gICAgICogVGhlIHZlcnNpb24gYXQgd2hpY2ggdGhlIG11dGF0aW9uIHdhcyBjb21taXR0ZWQ6XHJcbiAgICAgKlxyXG4gICAgICogLSBGb3IgbW9zdCBvcGVyYXRpb25zLCB0aGlzIGlzIHRoZSB1cGRhdGVUaW1lIGluIHRoZSBXcml0ZVJlc3VsdC5cclxuICAgICAqIC0gRm9yIGRlbGV0ZXMsIHRoZSBjb21taXRUaW1lIG9mIHRoZSBXcml0ZVJlc3BvbnNlIChiZWNhdXNlIGRlbGV0ZXMgYXJlXHJcbiAgICAgKiAgIG5vdCBzdG9yZWQgYW5kIGhhdmUgbm8gdXBkYXRlVGltZSkuXHJcbiAgICAgKlxyXG4gICAgICogTm90ZSB0aGF0IHRoZXNlIHZlcnNpb25zIGNhbiBiZSBkaWZmZXJlbnQ6IE5vLW9wIHdyaXRlcyB3aWxsIG5vdCBjaGFuZ2VcclxuICAgICAqIHRoZSB1cGRhdGVUaW1lIGV2ZW4gdGhvdWdoIHRoZSBjb21taXRUaW1lIGFkdmFuY2VzLlxyXG4gICAgICovXHJcbiAgICB2ZXJzaW9uLCBcclxuICAgIC8qKlxyXG4gICAgICogVGhlIHJlc3VsdGluZyBmaWVsZHMgcmV0dXJuZWQgZnJvbSB0aGUgYmFja2VuZCBhZnRlciBhXHJcbiAgICAgKiBUcmFuc2Zvcm1NdXRhdGlvbiBoYXMgYmVlbiBjb21taXR0ZWQuIENvbnRhaW5zIG9uZSBGaWVsZFZhbHVlIGZvciBlYWNoXHJcbiAgICAgKiBGaWVsZFRyYW5zZm9ybSB0aGF0IHdhcyBpbiB0aGUgbXV0YXRpb24uXHJcbiAgICAgKlxyXG4gICAgICogV2lsbCBiZSBudWxsIGlmIHRoZSBtdXRhdGlvbiB3YXMgbm90IGEgVHJhbnNmb3JtTXV0YXRpb24uXHJcbiAgICAgKi9cclxuICAgIHRyYW5zZm9ybVJlc3VsdHMpIHtcclxuICAgICAgICB0aGlzLnZlcnNpb24gPSB2ZXJzaW9uO1xyXG4gICAgICAgIHRoaXMudHJhbnNmb3JtUmVzdWx0cyA9IHRyYW5zZm9ybVJlc3VsdHM7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gTXV0YXRpb25SZXN1bHQ7XHJcbn0oKSk7XHJcbnZhciBNdXRhdGlvblR5cGU7XHJcbihmdW5jdGlvbiAoTXV0YXRpb25UeXBlKSB7XHJcbiAgICBNdXRhdGlvblR5cGVbTXV0YXRpb25UeXBlW1wiU2V0XCJdID0gMF0gPSBcIlNldFwiO1xyXG4gICAgTXV0YXRpb25UeXBlW011dGF0aW9uVHlwZVtcIlBhdGNoXCJdID0gMV0gPSBcIlBhdGNoXCI7XHJcbiAgICBNdXRhdGlvblR5cGVbTXV0YXRpb25UeXBlW1wiVHJhbnNmb3JtXCJdID0gMl0gPSBcIlRyYW5zZm9ybVwiO1xyXG4gICAgTXV0YXRpb25UeXBlW011dGF0aW9uVHlwZVtcIkRlbGV0ZVwiXSA9IDNdID0gXCJEZWxldGVcIjtcclxufSkoTXV0YXRpb25UeXBlIHx8IChNdXRhdGlvblR5cGUgPSB7fSkpO1xyXG4vKipcclxuICogRW5jb2RlcyBhIHByZWNvbmRpdGlvbiBmb3IgYSBtdXRhdGlvbi4gVGhpcyBmb2xsb3dzIHRoZSBtb2RlbCB0aGF0IHRoZVxyXG4gKiBiYWNrZW5kIGFjY2VwdHMgd2l0aCB0aGUgc3BlY2lhbCBjYXNlIG9mIGFuIGV4cGxpY2l0IFwiZW1wdHlcIiBwcmVjb25kaXRpb25cclxuICogKG1lYW5pbmcgbm8gcHJlY29uZGl0aW9uKS5cclxuICovXHJcbnZhciBQcmVjb25kaXRpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBQcmVjb25kaXRpb24odXBkYXRlVGltZSwgZXhpc3RzKSB7XHJcbiAgICAgICAgdGhpcy51cGRhdGVUaW1lID0gdXBkYXRlVGltZTtcclxuICAgICAgICB0aGlzLmV4aXN0cyA9IGV4aXN0cztcclxuICAgICAgICBhc3NlcnQodXBkYXRlVGltZSA9PT0gdW5kZWZpbmVkIHx8IGV4aXN0cyA9PT0gdW5kZWZpbmVkLCAnUHJlY29uZGl0aW9uIGNhbiBzcGVjaWZ5IFwiZXhpc3RzXCIgb3IgXCJ1cGRhdGVUaW1lXCIgYnV0IG5vdCBib3RoJyk7XHJcbiAgICB9XHJcbiAgICAvKiogQ3JlYXRlcyBhIG5ldyBQcmVjb25kaXRpb24gd2l0aCBhbiBleGlzdHMgZmxhZy4gKi9cclxuICAgIFByZWNvbmRpdGlvbi5leGlzdHMgPSBmdW5jdGlvbiAoZXhpc3RzKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcmVjb25kaXRpb24odW5kZWZpbmVkLCBleGlzdHMpO1xyXG4gICAgfTtcclxuICAgIC8qKiBDcmVhdGVzIGEgbmV3IFByZWNvbmRpdGlvbiBiYXNlZCBvbiBhIHZlcnNpb24gYSBkb2N1bWVudCBleGlzdHMgYXQuICovXHJcbiAgICBQcmVjb25kaXRpb24udXBkYXRlVGltZSA9IGZ1bmN0aW9uICh2ZXJzaW9uKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcmVjb25kaXRpb24odmVyc2lvbik7XHJcbiAgICB9O1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFByZWNvbmRpdGlvbi5wcm90b3R5cGUsIFwiaXNOb25lXCIsIHtcclxuICAgICAgICAvKiogUmV0dXJucyB3aGV0aGVyIHRoaXMgUHJlY29uZGl0aW9uIGlzIGVtcHR5LiAqL1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy51cGRhdGVUaW1lID09PSB1bmRlZmluZWQgJiYgdGhpcy5leGlzdHMgPT09IHVuZGVmaW5lZDtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoZSBwcmVjb25kaXRpb25zIGlzIHZhbGlkIGZvciB0aGUgZ2l2ZW4gZG9jdW1lbnRcclxuICAgICAqIChvciBudWxsIGlmIG5vIGRvY3VtZW50IGlzIGF2YWlsYWJsZSkuXHJcbiAgICAgKi9cclxuICAgIFByZWNvbmRpdGlvbi5wcm90b3R5cGUuaXNWYWxpZEZvciA9IGZ1bmN0aW9uIChtYXliZURvYykge1xyXG4gICAgICAgIGlmICh0aGlzLnVwZGF0ZVRpbWUgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gKG1heWJlRG9jIGluc3RhbmNlb2YgRG9jdW1lbnQgJiZcclxuICAgICAgICAgICAgICAgIG1heWJlRG9jLnZlcnNpb24uaXNFcXVhbCh0aGlzLnVwZGF0ZVRpbWUpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodGhpcy5leGlzdHMgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5leGlzdHMgPT09IG1heWJlRG9jIGluc3RhbmNlb2YgRG9jdW1lbnQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBhc3NlcnQodGhpcy5pc05vbmUsICdQcmVjb25kaXRpb24gc2hvdWxkIGJlIGVtcHR5Jyk7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBQcmVjb25kaXRpb24ucHJvdG90eXBlLmlzRXF1YWwgPSBmdW5jdGlvbiAob3RoZXIpIHtcclxuICAgICAgICByZXR1cm4gKGVxdWFscyh0aGlzLnVwZGF0ZVRpbWUsIG90aGVyLnVwZGF0ZVRpbWUpICYmXHJcbiAgICAgICAgICAgIHRoaXMuZXhpc3RzID09PSBvdGhlci5leGlzdHMpO1xyXG4gICAgfTtcclxuICAgIFByZWNvbmRpdGlvbi5OT05FID0gbmV3IFByZWNvbmRpdGlvbigpO1xyXG4gICAgcmV0dXJuIFByZWNvbmRpdGlvbjtcclxufSgpKTtcclxuLyoqXHJcbiAqIEEgbXV0YXRpb24gZGVzY3JpYmVzIGEgc2VsZi1jb250YWluZWQgY2hhbmdlIHRvIGEgZG9jdW1lbnQuIE11dGF0aW9ucyBjYW5cclxuICogY3JlYXRlLCByZXBsYWNlLCBkZWxldGUsIGFuZCB1cGRhdGUgc3Vic2V0cyBvZiBkb2N1bWVudHMuXHJcbiAqXHJcbiAqIE11dGF0aW9ucyBub3Qgb25seSBhY3Qgb24gdGhlIHZhbHVlIG9mIHRoZSBkb2N1bWVudCBidXQgYWxzbyBpdCB2ZXJzaW9uLlxyXG4gKlxyXG4gKiBGb3IgbG9jYWwgbXV0YXRpb25zIChtdXRhdGlvbnMgdGhhdCBoYXZlbid0IGJlZW4gY29tbWl0dGVkIHlldCksIHdlIHByZXNlcnZlXHJcbiAqIHRoZSBleGlzdGluZyB2ZXJzaW9uIGZvciBTZXQsIFBhdGNoLCBhbmQgVHJhbnNmb3JtIG11dGF0aW9ucy4gRm9yIERlbGV0ZVxyXG4gKiBtdXRhdGlvbnMsIHdlIHJlc2V0IHRoZSB2ZXJzaW9uIHRvIDAuXHJcbiAqXHJcbiAqIEhlcmUncyB0aGUgZXhwZWN0ZWQgdHJhbnNpdGlvbiB0YWJsZS5cclxuICpcclxuICogTVVUQVRJT04gICAgICAgICAgIEFQUExJRUQgVE8gICAgICAgICAgICBSRVNVTFRTIElOXHJcbiAqXHJcbiAqIFNldE11dGF0aW9uICAgICAgICBEb2N1bWVudCh2MykgICAgICAgICAgRG9jdW1lbnQodjMpXHJcbiAqIFNldE11dGF0aW9uICAgICAgICBOb0RvY3VtZW50KHYzKSAgICAgICAgRG9jdW1lbnQodjApXHJcbiAqIFNldE11dGF0aW9uICAgICAgICBudWxsICAgICAgICAgICAgICAgICAgRG9jdW1lbnQodjApXHJcbiAqIFBhdGNoTXV0YXRpb24gICAgICBEb2N1bWVudCh2MykgICAgICAgICAgRG9jdW1lbnQodjMpXHJcbiAqIFBhdGNoTXV0YXRpb24gICAgICBOb0RvY3VtZW50KHYzKSAgICAgICAgTm9Eb2N1bWVudCh2MylcclxuICogUGF0Y2hNdXRhdGlvbiAgICAgIG51bGwgICAgICAgICAgICAgICAgICBudWxsXHJcbiAqIFRyYW5zZm9ybU11dGF0aW9uICBEb2N1bWVudCh2MykgICAgICAgICAgRG9jdW1lbnQodjMpXHJcbiAqIFRyYW5zZm9ybU11dGF0aW9uICBOb0RvY3VtZW50KHYzKSAgICAgICAgTm9Eb2N1bWVudCh2MylcclxuICogVHJhbnNmb3JtTXV0YXRpb24gIG51bGwgICAgICAgICAgICAgICAgICBudWxsXHJcbiAqIERlbGV0ZU11dGF0aW9uICAgICBEb2N1bWVudCh2MykgICAgICAgICAgTm9Eb2N1bWVudCh2MClcclxuICogRGVsZXRlTXV0YXRpb24gICAgIE5vRG9jdW1lbnQodjMpICAgICAgICBOb0RvY3VtZW50KHYwKVxyXG4gKiBEZWxldGVNdXRhdGlvbiAgICAgbnVsbCAgICAgICAgICAgICAgICAgIE5vRG9jdW1lbnQodjApXHJcbiAqXHJcbiAqIEZvciBhY2tub3dsZWRnZWQgbXV0YXRpb25zLCB3ZSB1c2UgdGhlIHVwZGF0ZVRpbWUgb2YgdGhlIFdyaXRlUmVzcG9uc2UgYXNcclxuICogdGhlIHJlc3VsdGluZyB2ZXJzaW9uIGZvciBTZXQsIFBhdGNoLCBhbmQgVHJhbnNmb3JtIG11dGF0aW9ucy4gQXMgZGVsZXRlc1xyXG4gKiBoYXZlIG5vIGV4cGxpY2l0IHVwZGF0ZSB0aW1lLCB3ZSB1c2UgdGhlIGNvbW1pdFRpbWUgb2YgdGhlIFdyaXRlUmVzcG9uc2UgZm9yXHJcbiAqIERlbGV0ZSBtdXRhdGlvbnMuXHJcbiAqXHJcbiAqIElmIGEgbXV0YXRpb24gaXMgYWNrbm93bGVkZ2VkIGJ5IHRoZSBiYWNrZW5kIGJ1dCBmYWlscyB0aGUgcHJlY29uZGl0aW9uIGNoZWNrXHJcbiAqIGxvY2FsbHksIHdlIHJldHVybiBhbiBgVW5rbm93bkRvY3VtZW50YCBhbmQgcmVseSBvbiBXYXRjaCB0byBzZW5kIHVzIHRoZVxyXG4gKiB1cGRhdGVkIHZlcnNpb24uXHJcbiAqXHJcbiAqIE5vdGUgdGhhdCBUcmFuc2Zvcm1NdXRhdGlvbnMgZG9uJ3QgY3JlYXRlIERvY3VtZW50cyAoaW4gdGhlIGNhc2Ugb2YgYmVpbmdcclxuICogYXBwbGllZCB0byBhIE5vRG9jdW1lbnQpLCBldmVuIHRob3VnaCB0aGV5IHdvdWxkIG9uIHRoZSBiYWNrZW5kLiBUaGlzIGlzXHJcbiAqIGJlY2F1c2UgdGhlIGNsaWVudCBhbHdheXMgY29tYmluZXMgdGhlIFRyYW5zZm9ybU11dGF0aW9uIHdpdGggYSBTZXRNdXRhdGlvblxyXG4gKiBvciBQYXRjaE11dGF0aW9uIGFuZCB3ZSBvbmx5IHdhbnQgdG8gYXBwbHkgdGhlIHRyYW5zZm9ybSBpZiB0aGUgcHJpb3JcclxuICogbXV0YXRpb24gcmVzdWx0ZWQgaW4gYSBEb2N1bWVudCAoYWx3YXlzIHRydWUgZm9yIGEgU2V0TXV0YXRpb24sIGJ1dCBub3RcclxuICogbmVjZXNzYXJpbHkgZm9yIGEgUGF0Y2hNdXRhdGlvbikuXHJcbiAqXHJcbiAqICMjIFN1YmNsYXNzaW5nIE5vdGVzXHJcbiAqXHJcbiAqIFN1YmNsYXNzZXMgb2YgTXV0YXRpb24gbmVlZCB0byBpbXBsZW1lbnQgYXBwbHlUb1JlbW90ZURvY3VtZW50KCkgYW5kXHJcbiAqIGFwcGx5VG9Mb2NhbFZpZXcoKSB0byBpbXBsZW1lbnQgdGhlIGFjdHVhbCBiZWhhdmlvciBvZiBhcHBseWluZyB0aGUgbXV0YXRpb25cclxuICogdG8gc29tZSBzb3VyY2UgZG9jdW1lbnQuXHJcbiAqL1xyXG52YXIgTXV0YXRpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBNdXRhdGlvbigpIHtcclxuICAgIH1cclxuICAgIE11dGF0aW9uLnByb3RvdHlwZS52ZXJpZnlLZXlNYXRjaGVzID0gZnVuY3Rpb24gKG1heWJlRG9jKSB7XHJcbiAgICAgICAgaWYgKG1heWJlRG9jICE9IG51bGwpIHtcclxuICAgICAgICAgICAgYXNzZXJ0KG1heWJlRG9jLmtleS5pc0VxdWFsKHRoaXMua2V5KSwgJ0NhbiBvbmx5IGFwcGx5IGEgbXV0YXRpb24gdG8gYSBkb2N1bWVudCB3aXRoIHRoZSBzYW1lIGtleScpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdGhlIHZlcnNpb24gZnJvbSB0aGUgZ2l2ZW4gZG9jdW1lbnQgZm9yIHVzZSBhcyB0aGUgcmVzdWx0IG9mIGFcclxuICAgICAqIG11dGF0aW9uLiBNdXRhdGlvbnMgYXJlIGRlZmluZWQgdG8gcmV0dXJuIHRoZSB2ZXJzaW9uIG9mIHRoZSBiYXNlIGRvY3VtZW50XHJcbiAgICAgKiBvbmx5IGlmIGl0IGlzIGFuIGV4aXN0aW5nIGRvY3VtZW50LiBEZWxldGVkIGFuZCB1bmtub3duIGRvY3VtZW50cyBoYXZlIGFcclxuICAgICAqIHBvc3QtbXV0YXRpb24gdmVyc2lvbiBvZiBTbmFwc2hvdFZlcnNpb24uTUlOLlxyXG4gICAgICovXHJcbiAgICBNdXRhdGlvbi5nZXRQb3N0TXV0YXRpb25WZXJzaW9uID0gZnVuY3Rpb24gKG1heWJlRG9jKSB7XHJcbiAgICAgICAgaWYgKG1heWJlRG9jIGluc3RhbmNlb2YgRG9jdW1lbnQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG1heWJlRG9jLnZlcnNpb247XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gU25hcHNob3RWZXJzaW9uLk1JTjtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIE11dGF0aW9uO1xyXG59KCkpO1xyXG4vKipcclxuICogQSBtdXRhdGlvbiB0aGF0IGNyZWF0ZXMgb3IgcmVwbGFjZXMgdGhlIGRvY3VtZW50IGF0IHRoZSBnaXZlbiBrZXkgd2l0aCB0aGVcclxuICogb2JqZWN0IHZhbHVlIGNvbnRlbnRzLlxyXG4gKi9cclxudmFyIFNldE11dGF0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgdHNsaWIuX19leHRlbmRzKFNldE11dGF0aW9uLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gU2V0TXV0YXRpb24oa2V5LCB2YWx1ZSwgcHJlY29uZGl0aW9uKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcclxuICAgICAgICBfdGhpcy5rZXkgPSBrZXk7XHJcbiAgICAgICAgX3RoaXMudmFsdWUgPSB2YWx1ZTtcclxuICAgICAgICBfdGhpcy5wcmVjb25kaXRpb24gPSBwcmVjb25kaXRpb247XHJcbiAgICAgICAgX3RoaXMudHlwZSA9IE11dGF0aW9uVHlwZS5TZXQ7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgU2V0TXV0YXRpb24ucHJvdG90eXBlLmFwcGx5VG9SZW1vdGVEb2N1bWVudCA9IGZ1bmN0aW9uIChtYXliZURvYywgbXV0YXRpb25SZXN1bHQpIHtcclxuICAgICAgICB0aGlzLnZlcmlmeUtleU1hdGNoZXMobWF5YmVEb2MpO1xyXG4gICAgICAgIGFzc2VydChtdXRhdGlvblJlc3VsdC50cmFuc2Zvcm1SZXN1bHRzID09IG51bGwsICdUcmFuc2Zvcm0gcmVzdWx0cyByZWNlaXZlZCBieSBTZXRNdXRhdGlvbi4nKTtcclxuICAgICAgICAvLyBVbmxpa2UgYXBwbHlUb0xvY2FsVmlldywgaWYgd2UncmUgYXBwbHlpbmcgYSBtdXRhdGlvbiB0byBhIHJlbW90ZVxyXG4gICAgICAgIC8vIGRvY3VtZW50IHRoZSBzZXJ2ZXIgaGFzIGFjY2VwdGVkIHRoZSBtdXRhdGlvbiBzbyB0aGUgcHJlY29uZGl0aW9uIG11c3RcclxuICAgICAgICAvLyBoYXZlIGhlbGQuXHJcbiAgICAgICAgdmFyIHZlcnNpb24gPSBtdXRhdGlvblJlc3VsdC52ZXJzaW9uO1xyXG4gICAgICAgIHJldHVybiBuZXcgRG9jdW1lbnQodGhpcy5rZXksIHZlcnNpb24sIHtcclxuICAgICAgICAgICAgaGFzQ29tbWl0dGVkTXV0YXRpb25zOiB0cnVlXHJcbiAgICAgICAgfSwgdGhpcy52YWx1ZSk7XHJcbiAgICB9O1xyXG4gICAgU2V0TXV0YXRpb24ucHJvdG90eXBlLmFwcGx5VG9Mb2NhbFZpZXcgPSBmdW5jdGlvbiAobWF5YmVEb2MsIGJhc2VEb2MsIGxvY2FsV3JpdGVUaW1lKSB7XHJcbiAgICAgICAgdGhpcy52ZXJpZnlLZXlNYXRjaGVzKG1heWJlRG9jKTtcclxuICAgICAgICBpZiAoIXRoaXMucHJlY29uZGl0aW9uLmlzVmFsaWRGb3IobWF5YmVEb2MpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBtYXliZURvYztcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIHZlcnNpb24gPSBNdXRhdGlvbi5nZXRQb3N0TXV0YXRpb25WZXJzaW9uKG1heWJlRG9jKTtcclxuICAgICAgICByZXR1cm4gbmV3IERvY3VtZW50KHRoaXMua2V5LCB2ZXJzaW9uLCB7XHJcbiAgICAgICAgICAgIGhhc0xvY2FsTXV0YXRpb25zOiB0cnVlXHJcbiAgICAgICAgfSwgdGhpcy52YWx1ZSk7XHJcbiAgICB9O1xyXG4gICAgU2V0TXV0YXRpb24ucHJvdG90eXBlLmV4dHJhY3RCYXNlVmFsdWUgPSBmdW5jdGlvbiAobWF5YmVEb2MpIHtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH07XHJcbiAgICBTZXRNdXRhdGlvbi5wcm90b3R5cGUuaXNFcXVhbCA9IGZ1bmN0aW9uIChvdGhlcikge1xyXG4gICAgICAgIHJldHVybiAob3RoZXIgaW5zdGFuY2VvZiBTZXRNdXRhdGlvbiAmJlxyXG4gICAgICAgICAgICB0aGlzLmtleS5pc0VxdWFsKG90aGVyLmtleSkgJiZcclxuICAgICAgICAgICAgdGhpcy52YWx1ZS5pc0VxdWFsKG90aGVyLnZhbHVlKSAmJlxyXG4gICAgICAgICAgICB0aGlzLnByZWNvbmRpdGlvbi5pc0VxdWFsKG90aGVyLnByZWNvbmRpdGlvbikpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBTZXRNdXRhdGlvbjtcclxufShNdXRhdGlvbikpO1xyXG4vKipcclxuICogQSBtdXRhdGlvbiB0aGF0IG1vZGlmaWVzIGZpZWxkcyBvZiB0aGUgZG9jdW1lbnQgYXQgdGhlIGdpdmVuIGtleSB3aXRoIHRoZVxyXG4gKiBnaXZlbiB2YWx1ZXMuIFRoZSB2YWx1ZXMgYXJlIGFwcGxpZWQgdGhyb3VnaCBhIGZpZWxkIG1hc2s6XHJcbiAqXHJcbiAqICAqIFdoZW4gYSBmaWVsZCBpcyBpbiBib3RoIHRoZSBtYXNrIGFuZCB0aGUgdmFsdWVzLCB0aGUgY29ycmVzcG9uZGluZyBmaWVsZFxyXG4gKiAgICBpcyB1cGRhdGVkLlxyXG4gKiAgKiBXaGVuIGEgZmllbGQgaXMgaW4gbmVpdGhlciB0aGUgbWFzayBub3IgdGhlIHZhbHVlcywgdGhlIGNvcnJlc3BvbmRpbmdcclxuICogICAgZmllbGQgaXMgdW5tb2RpZmllZC5cclxuICogICogV2hlbiBhIGZpZWxkIGlzIGluIHRoZSBtYXNrIGJ1dCBub3QgaW4gdGhlIHZhbHVlcywgdGhlIGNvcnJlc3BvbmRpbmcgZmllbGRcclxuICogICAgaXMgZGVsZXRlZC5cclxuICogICogV2hlbiBhIGZpZWxkIGlzIG5vdCBpbiB0aGUgbWFzayBidXQgaXMgaW4gdGhlIHZhbHVlcywgdGhlIHZhbHVlcyBtYXAgaXNcclxuICogICAgaWdub3JlZC5cclxuICovXHJcbnZhciBQYXRjaE11dGF0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgdHNsaWIuX19leHRlbmRzKFBhdGNoTXV0YXRpb24sIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBQYXRjaE11dGF0aW9uKGtleSwgZGF0YSwgZmllbGRNYXNrLCBwcmVjb25kaXRpb24pIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xyXG4gICAgICAgIF90aGlzLmtleSA9IGtleTtcclxuICAgICAgICBfdGhpcy5kYXRhID0gZGF0YTtcclxuICAgICAgICBfdGhpcy5maWVsZE1hc2sgPSBmaWVsZE1hc2s7XHJcbiAgICAgICAgX3RoaXMucHJlY29uZGl0aW9uID0gcHJlY29uZGl0aW9uO1xyXG4gICAgICAgIF90aGlzLnR5cGUgPSBNdXRhdGlvblR5cGUuUGF0Y2g7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgUGF0Y2hNdXRhdGlvbi5wcm90b3R5cGUuYXBwbHlUb1JlbW90ZURvY3VtZW50ID0gZnVuY3Rpb24gKG1heWJlRG9jLCBtdXRhdGlvblJlc3VsdCkge1xyXG4gICAgICAgIHRoaXMudmVyaWZ5S2V5TWF0Y2hlcyhtYXliZURvYyk7XHJcbiAgICAgICAgYXNzZXJ0KG11dGF0aW9uUmVzdWx0LnRyYW5zZm9ybVJlc3VsdHMgPT0gbnVsbCwgJ1RyYW5zZm9ybSByZXN1bHRzIHJlY2VpdmVkIGJ5IFBhdGNoTXV0YXRpb24uJyk7XHJcbiAgICAgICAgaWYgKCF0aGlzLnByZWNvbmRpdGlvbi5pc1ZhbGlkRm9yKG1heWJlRG9jKSkge1xyXG4gICAgICAgICAgICAvLyBTaW5jZSB0aGUgbXV0YXRpb24gd2FzIG5vdCByZWplY3RlZCwgd2Uga25vdyB0aGF0IHRoZSAgcHJlY29uZGl0aW9uXHJcbiAgICAgICAgICAgIC8vIG1hdGNoZWQgb24gdGhlIGJhY2tlbmQuIFdlIHRoZXJlZm9yZSBtdXN0IG5vdCBoYXZlIHRoZSBleHBlY3RlZCB2ZXJzaW9uXHJcbiAgICAgICAgICAgIC8vIG9mIHRoZSBkb2N1bWVudCBpbiBvdXIgY2FjaGUgYW5kIHJldHVybiBhbiBVbmtub3duRG9jdW1lbnQgd2l0aCB0aGVcclxuICAgICAgICAgICAgLy8ga25vd24gdXBkYXRlVGltZS5cclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBVbmtub3duRG9jdW1lbnQodGhpcy5rZXksIG11dGF0aW9uUmVzdWx0LnZlcnNpb24pO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgbmV3RGF0YSA9IHRoaXMucGF0Y2hEb2N1bWVudChtYXliZURvYyk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBEb2N1bWVudCh0aGlzLmtleSwgbXV0YXRpb25SZXN1bHQudmVyc2lvbiwge1xyXG4gICAgICAgICAgICBoYXNDb21taXR0ZWRNdXRhdGlvbnM6IHRydWVcclxuICAgICAgICB9LCBuZXdEYXRhKTtcclxuICAgIH07XHJcbiAgICBQYXRjaE11dGF0aW9uLnByb3RvdHlwZS5hcHBseVRvTG9jYWxWaWV3ID0gZnVuY3Rpb24gKG1heWJlRG9jLCBiYXNlRG9jLCBsb2NhbFdyaXRlVGltZSkge1xyXG4gICAgICAgIHRoaXMudmVyaWZ5S2V5TWF0Y2hlcyhtYXliZURvYyk7XHJcbiAgICAgICAgaWYgKCF0aGlzLnByZWNvbmRpdGlvbi5pc1ZhbGlkRm9yKG1heWJlRG9jKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbWF5YmVEb2M7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciB2ZXJzaW9uID0gTXV0YXRpb24uZ2V0UG9zdE11dGF0aW9uVmVyc2lvbihtYXliZURvYyk7XHJcbiAgICAgICAgdmFyIG5ld0RhdGEgPSB0aGlzLnBhdGNoRG9jdW1lbnQobWF5YmVEb2MpO1xyXG4gICAgICAgIHJldHVybiBuZXcgRG9jdW1lbnQodGhpcy5rZXksIHZlcnNpb24sIHtcclxuICAgICAgICAgICAgaGFzTG9jYWxNdXRhdGlvbnM6IHRydWVcclxuICAgICAgICB9LCBuZXdEYXRhKTtcclxuICAgIH07XHJcbiAgICBQYXRjaE11dGF0aW9uLnByb3RvdHlwZS5leHRyYWN0QmFzZVZhbHVlID0gZnVuY3Rpb24gKG1heWJlRG9jKSB7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9O1xyXG4gICAgUGF0Y2hNdXRhdGlvbi5wcm90b3R5cGUuaXNFcXVhbCA9IGZ1bmN0aW9uIChvdGhlcikge1xyXG4gICAgICAgIHJldHVybiAob3RoZXIgaW5zdGFuY2VvZiBQYXRjaE11dGF0aW9uICYmXHJcbiAgICAgICAgICAgIHRoaXMua2V5LmlzRXF1YWwob3RoZXIua2V5KSAmJlxyXG4gICAgICAgICAgICB0aGlzLmZpZWxkTWFzay5pc0VxdWFsKG90aGVyLmZpZWxkTWFzaykgJiZcclxuICAgICAgICAgICAgdGhpcy5wcmVjb25kaXRpb24uaXNFcXVhbChvdGhlci5wcmVjb25kaXRpb24pKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFBhdGNoZXMgdGhlIGRhdGEgb2YgZG9jdW1lbnQgaWYgYXZhaWxhYmxlIG9yIGNyZWF0ZXMgYSBuZXcgZG9jdW1lbnQuIE5vdGVcclxuICAgICAqIHRoYXQgdGhpcyBkb2VzIG5vdCBjaGVjayB3aGV0aGVyIG9yIG5vdCB0aGUgcHJlY29uZGl0aW9uIG9mIHRoaXMgcGF0Y2hcclxuICAgICAqIGhvbGRzLlxyXG4gICAgICovXHJcbiAgICBQYXRjaE11dGF0aW9uLnByb3RvdHlwZS5wYXRjaERvY3VtZW50ID0gZnVuY3Rpb24gKG1heWJlRG9jKSB7XHJcbiAgICAgICAgdmFyIGRhdGE7XHJcbiAgICAgICAgaWYgKG1heWJlRG9jIGluc3RhbmNlb2YgRG9jdW1lbnQpIHtcclxuICAgICAgICAgICAgZGF0YSA9IG1heWJlRG9jLmRhdGEoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGRhdGEgPSBPYmplY3RWYWx1ZS5FTVBUWTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucGF0Y2hPYmplY3QoZGF0YSk7XHJcbiAgICB9O1xyXG4gICAgUGF0Y2hNdXRhdGlvbi5wcm90b3R5cGUucGF0Y2hPYmplY3QgPSBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5maWVsZE1hc2suZmllbGRzLmZvckVhY2goZnVuY3Rpb24gKGZpZWxkUGF0aCkge1xyXG4gICAgICAgICAgICBpZiAoIWZpZWxkUGF0aC5pc0VtcHR5KCkpIHtcclxuICAgICAgICAgICAgICAgIHZhciBuZXdWYWx1ZSA9IF90aGlzLmRhdGEuZmllbGQoZmllbGRQYXRoKTtcclxuICAgICAgICAgICAgICAgIGlmIChuZXdWYWx1ZSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGEgPSBkYXRhLnNldChmaWVsZFBhdGgsIG5ld1ZhbHVlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGEgPSBkYXRhLmRlbGV0ZShmaWVsZFBhdGgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIGRhdGE7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFBhdGNoTXV0YXRpb247XHJcbn0oTXV0YXRpb24pKTtcclxuLyoqXHJcbiAqIEEgbXV0YXRpb24gdGhhdCBtb2RpZmllcyBzcGVjaWZpYyBmaWVsZHMgb2YgdGhlIGRvY3VtZW50IHdpdGggdHJhbnNmb3JtXHJcbiAqIG9wZXJhdGlvbnMuIEN1cnJlbnRseSB0aGUgb25seSBzdXBwb3J0ZWQgdHJhbnNmb3JtIGlzIGEgc2VydmVyIHRpbWVzdGFtcCwgYnV0XHJcbiAqIElQIEFkZHJlc3MsIGluY3JlbWVudChuKSwgZXRjLiBjb3VsZCBiZSBzdXBwb3J0ZWQgaW4gdGhlIGZ1dHVyZS5cclxuICpcclxuICogSXQgaXMgc29tZXdoYXQgc2ltaWxhciB0byBhIFBhdGNoTXV0YXRpb24gaW4gdGhhdCBpdCBwYXRjaGVzIHNwZWNpZmljIGZpZWxkc1xyXG4gKiBhbmQgaGFzIG5vIGVmZmVjdCB3aGVuIGFwcGxpZWQgdG8gYSBudWxsIG9yIE5vRG9jdW1lbnQgKHNlZSBjb21tZW50IG9uXHJcbiAqIE11dGF0aW9uIGZvciByYXRpb25hbGUpLlxyXG4gKi9cclxudmFyIFRyYW5zZm9ybU11dGF0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgdHNsaWIuX19leHRlbmRzKFRyYW5zZm9ybU11dGF0aW9uLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gVHJhbnNmb3JtTXV0YXRpb24oa2V5LCBmaWVsZFRyYW5zZm9ybXMpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xyXG4gICAgICAgIF90aGlzLmtleSA9IGtleTtcclxuICAgICAgICBfdGhpcy5maWVsZFRyYW5zZm9ybXMgPSBmaWVsZFRyYW5zZm9ybXM7XHJcbiAgICAgICAgX3RoaXMudHlwZSA9IE11dGF0aW9uVHlwZS5UcmFuc2Zvcm07XHJcbiAgICAgICAgLy8gTk9URTogV2Ugc2V0IGEgcHJlY29uZGl0aW9uIG9mIGV4aXN0czogdHJ1ZSBhcyBhIHNhZmV0eS1jaGVjaywgc2luY2Ugd2VcclxuICAgICAgICAvLyBhbHdheXMgY29tYmluZSBUcmFuc2Zvcm1NdXRhdGlvbnMgd2l0aCBhIFNldE11dGF0aW9uIG9yIFBhdGNoTXV0YXRpb24gd2hpY2hcclxuICAgICAgICAvLyAoaWYgc3VjY2Vzc2Z1bCkgc2hvdWxkIGVuZCB1cCB3aXRoIGFuIGV4aXN0aW5nIGRvY3VtZW50LlxyXG4gICAgICAgIF90aGlzLnByZWNvbmRpdGlvbiA9IFByZWNvbmRpdGlvbi5leGlzdHModHJ1ZSk7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgVHJhbnNmb3JtTXV0YXRpb24ucHJvdG90eXBlLmFwcGx5VG9SZW1vdGVEb2N1bWVudCA9IGZ1bmN0aW9uIChtYXliZURvYywgbXV0YXRpb25SZXN1bHQpIHtcclxuICAgICAgICB0aGlzLnZlcmlmeUtleU1hdGNoZXMobWF5YmVEb2MpO1xyXG4gICAgICAgIGFzc2VydChtdXRhdGlvblJlc3VsdC50cmFuc2Zvcm1SZXN1bHRzICE9IG51bGwsICdUcmFuc2Zvcm0gcmVzdWx0cyBtaXNzaW5nIGZvciBUcmFuc2Zvcm1NdXRhdGlvbi4nKTtcclxuICAgICAgICBpZiAoIXRoaXMucHJlY29uZGl0aW9uLmlzVmFsaWRGb3IobWF5YmVEb2MpKSB7XHJcbiAgICAgICAgICAgIC8vIFNpbmNlIHRoZSBtdXRhdGlvbiB3YXMgbm90IHJlamVjdGVkLCB3ZSBrbm93IHRoYXQgdGhlICBwcmVjb25kaXRpb25cclxuICAgICAgICAgICAgLy8gbWF0Y2hlZCBvbiB0aGUgYmFja2VuZC4gV2UgdGhlcmVmb3JlIG11c3Qgbm90IGhhdmUgdGhlIGV4cGVjdGVkIHZlcnNpb25cclxuICAgICAgICAgICAgLy8gb2YgdGhlIGRvY3VtZW50IGluIG91ciBjYWNoZSBhbmQgcmV0dXJuIGFuIFVua25vd25Eb2N1bWVudCB3aXRoIHRoZVxyXG4gICAgICAgICAgICAvLyBrbm93biB1cGRhdGVUaW1lLlxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFVua25vd25Eb2N1bWVudCh0aGlzLmtleSwgbXV0YXRpb25SZXN1bHQudmVyc2lvbik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBkb2MgPSB0aGlzLnJlcXVpcmVEb2N1bWVudChtYXliZURvYyk7XHJcbiAgICAgICAgdmFyIHRyYW5zZm9ybVJlc3VsdHMgPSB0aGlzLnNlcnZlclRyYW5zZm9ybVJlc3VsdHMobWF5YmVEb2MsIG11dGF0aW9uUmVzdWx0LnRyYW5zZm9ybVJlc3VsdHMpO1xyXG4gICAgICAgIHZhciB2ZXJzaW9uID0gbXV0YXRpb25SZXN1bHQudmVyc2lvbjtcclxuICAgICAgICB2YXIgbmV3RGF0YSA9IHRoaXMudHJhbnNmb3JtT2JqZWN0KGRvYy5kYXRhKCksIHRyYW5zZm9ybVJlc3VsdHMpO1xyXG4gICAgICAgIHJldHVybiBuZXcgRG9jdW1lbnQodGhpcy5rZXksIHZlcnNpb24sIHtcclxuICAgICAgICAgICAgaGFzQ29tbWl0dGVkTXV0YXRpb25zOiB0cnVlXHJcbiAgICAgICAgfSwgbmV3RGF0YSk7XHJcbiAgICB9O1xyXG4gICAgVHJhbnNmb3JtTXV0YXRpb24ucHJvdG90eXBlLmFwcGx5VG9Mb2NhbFZpZXcgPSBmdW5jdGlvbiAobWF5YmVEb2MsIGJhc2VEb2MsIGxvY2FsV3JpdGVUaW1lKSB7XHJcbiAgICAgICAgdGhpcy52ZXJpZnlLZXlNYXRjaGVzKG1heWJlRG9jKTtcclxuICAgICAgICBpZiAoIXRoaXMucHJlY29uZGl0aW9uLmlzVmFsaWRGb3IobWF5YmVEb2MpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBtYXliZURvYztcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGRvYyA9IHRoaXMucmVxdWlyZURvY3VtZW50KG1heWJlRG9jKTtcclxuICAgICAgICB2YXIgdHJhbnNmb3JtUmVzdWx0cyA9IHRoaXMubG9jYWxUcmFuc2Zvcm1SZXN1bHRzKGxvY2FsV3JpdGVUaW1lLCBtYXliZURvYywgYmFzZURvYyk7XHJcbiAgICAgICAgdmFyIG5ld0RhdGEgPSB0aGlzLnRyYW5zZm9ybU9iamVjdChkb2MuZGF0YSgpLCB0cmFuc2Zvcm1SZXN1bHRzKTtcclxuICAgICAgICByZXR1cm4gbmV3IERvY3VtZW50KHRoaXMua2V5LCBkb2MudmVyc2lvbiwge1xyXG4gICAgICAgICAgICBoYXNMb2NhbE11dGF0aW9uczogdHJ1ZVxyXG4gICAgICAgIH0sIG5ld0RhdGEpO1xyXG4gICAgfTtcclxuICAgIFRyYW5zZm9ybU11dGF0aW9uLnByb3RvdHlwZS5leHRyYWN0QmFzZVZhbHVlID0gZnVuY3Rpb24gKG1heWJlRG9jKSB7XHJcbiAgICAgICAgdmFyIGJhc2VPYmplY3QgPSBudWxsO1xyXG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSB0aGlzLmZpZWxkVHJhbnNmb3JtczsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgdmFyIGZpZWxkVHJhbnNmb3JtID0gX2FbX2ldO1xyXG4gICAgICAgICAgICB2YXIgZXhpc3RpbmdWYWx1ZSA9IG1heWJlRG9jIGluc3RhbmNlb2YgRG9jdW1lbnRcclxuICAgICAgICAgICAgICAgID8gbWF5YmVEb2MuZmllbGQoZmllbGRUcmFuc2Zvcm0uZmllbGQpXHJcbiAgICAgICAgICAgICAgICA6IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgdmFyIGNvZXJjZWRWYWx1ZSA9IGZpZWxkVHJhbnNmb3JtLnRyYW5zZm9ybS5jb21wdXRlQmFzZVZhbHVlKGV4aXN0aW5nVmFsdWUgfHwgbnVsbCk7XHJcbiAgICAgICAgICAgIGlmIChjb2VyY2VkVmFsdWUgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGJhc2VPYmplY3QgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGJhc2VPYmplY3QgPSBPYmplY3RWYWx1ZS5FTVBUWS5zZXQoZmllbGRUcmFuc2Zvcm0uZmllbGQsIGNvZXJjZWRWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBiYXNlT2JqZWN0ID0gYmFzZU9iamVjdC5zZXQoZmllbGRUcmFuc2Zvcm0uZmllbGQsIGNvZXJjZWRWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGJhc2VPYmplY3Q7XHJcbiAgICB9O1xyXG4gICAgVHJhbnNmb3JtTXV0YXRpb24ucHJvdG90eXBlLmlzRXF1YWwgPSBmdW5jdGlvbiAob3RoZXIpIHtcclxuICAgICAgICByZXR1cm4gKG90aGVyIGluc3RhbmNlb2YgVHJhbnNmb3JtTXV0YXRpb24gJiZcclxuICAgICAgICAgICAgdGhpcy5rZXkuaXNFcXVhbChvdGhlci5rZXkpICYmXHJcbiAgICAgICAgICAgIGFycmF5RXF1YWxzKHRoaXMuZmllbGRUcmFuc2Zvcm1zLCBvdGhlci5maWVsZFRyYW5zZm9ybXMpICYmXHJcbiAgICAgICAgICAgIHRoaXMucHJlY29uZGl0aW9uLmlzRXF1YWwob3RoZXIucHJlY29uZGl0aW9uKSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBBc3NlcnRzIHRoYXQgdGhlIGdpdmVuIE1heWJlRG9jdW1lbnQgaXMgYWN0dWFsbHkgYSBEb2N1bWVudCBhbmQgdmVyaWZpZXNcclxuICAgICAqIHRoYXQgaXQgbWF0Y2hlcyB0aGUga2V5IGZvciB0aGlzIG11dGF0aW9uLiBTaW5jZSB3ZSBvbmx5IHN1cHBvcnRcclxuICAgICAqIHRyYW5zZm9ybWF0aW9ucyB3aXRoIHByZWNvbmRpdGlvbiBleGlzdHMgdGhpcyBtZXRob2QgaXMgZ3VhcmFudGVlZCB0byBiZVxyXG4gICAgICogc2FmZS5cclxuICAgICAqL1xyXG4gICAgVHJhbnNmb3JtTXV0YXRpb24ucHJvdG90eXBlLnJlcXVpcmVEb2N1bWVudCA9IGZ1bmN0aW9uIChtYXliZURvYykge1xyXG4gICAgICAgIGFzc2VydChtYXliZURvYyBpbnN0YW5jZW9mIERvY3VtZW50LCAnVW5rbm93biBNYXliZURvY3VtZW50IHR5cGUgJyArIG1heWJlRG9jKTtcclxuICAgICAgICBhc3NlcnQobWF5YmVEb2Mua2V5LmlzRXF1YWwodGhpcy5rZXkpLCAnQ2FuIG9ubHkgdHJhbnNmb3JtIGEgZG9jdW1lbnQgd2l0aCB0aGUgc2FtZSBrZXknKTtcclxuICAgICAgICByZXR1cm4gbWF5YmVEb2M7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGVzIGEgbGlzdCBvZiBcInRyYW5zZm9ybSByZXN1bHRzXCIgKGEgdHJhbnNmb3JtIHJlc3VsdCBpcyBhIGZpZWxkIHZhbHVlXHJcbiAgICAgKiByZXByZXNlbnRpbmcgdGhlIHJlc3VsdCBvZiBhcHBseWluZyBhIHRyYW5zZm9ybSkgZm9yIHVzZSBhZnRlciBhXHJcbiAgICAgKiBUcmFuc2Zvcm1NdXRhdGlvbiBoYXMgYmVlbiBhY2tub3dsZWRnZWQgYnkgdGhlIHNlcnZlci5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gYmFzZURvYyBUaGUgZG9jdW1lbnQgcHJpb3IgdG8gYXBwbHlpbmcgdGhpcyBtdXRhdGlvbiBiYXRjaC5cclxuICAgICAqIEBwYXJhbSBzZXJ2ZXJUcmFuc2Zvcm1SZXN1bHRzIFRoZSB0cmFuc2Zvcm0gcmVzdWx0cyByZWNlaXZlZCBieSB0aGUgc2VydmVyLlxyXG4gICAgICogQHJldHVybiBUaGUgdHJhbnNmb3JtIHJlc3VsdHMgbGlzdC5cclxuICAgICAqL1xyXG4gICAgVHJhbnNmb3JtTXV0YXRpb24ucHJvdG90eXBlLnNlcnZlclRyYW5zZm9ybVJlc3VsdHMgPSBmdW5jdGlvbiAoYmFzZURvYywgc2VydmVyVHJhbnNmb3JtUmVzdWx0cykge1xyXG4gICAgICAgIHZhciB0cmFuc2Zvcm1SZXN1bHRzID0gW107XHJcbiAgICAgICAgYXNzZXJ0KHRoaXMuZmllbGRUcmFuc2Zvcm1zLmxlbmd0aCA9PT0gc2VydmVyVHJhbnNmb3JtUmVzdWx0cy5sZW5ndGgsIFwic2VydmVyIHRyYW5zZm9ybSByZXN1bHQgY291bnQgKFwiICsgc2VydmVyVHJhbnNmb3JtUmVzdWx0cy5sZW5ndGggKyBcIikgXCIgK1xyXG4gICAgICAgICAgICAoXCJzaG91bGQgbWF0Y2ggZmllbGQgdHJhbnNmb3JtIGNvdW50IChcIiArIHRoaXMuZmllbGRUcmFuc2Zvcm1zLmxlbmd0aCArIFwiKVwiKSk7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZXJ2ZXJUcmFuc2Zvcm1SZXN1bHRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBmaWVsZFRyYW5zZm9ybSA9IHRoaXMuZmllbGRUcmFuc2Zvcm1zW2ldO1xyXG4gICAgICAgICAgICB2YXIgdHJhbnNmb3JtID0gZmllbGRUcmFuc2Zvcm0udHJhbnNmb3JtO1xyXG4gICAgICAgICAgICB2YXIgcHJldmlvdXNWYWx1ZSA9IG51bGw7XHJcbiAgICAgICAgICAgIGlmIChiYXNlRG9jIGluc3RhbmNlb2YgRG9jdW1lbnQpIHtcclxuICAgICAgICAgICAgICAgIHByZXZpb3VzVmFsdWUgPSBiYXNlRG9jLmZpZWxkKGZpZWxkVHJhbnNmb3JtLmZpZWxkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0cmFuc2Zvcm1SZXN1bHRzLnB1c2godHJhbnNmb3JtLmFwcGx5VG9SZW1vdGVEb2N1bWVudChwcmV2aW91c1ZhbHVlLCBzZXJ2ZXJUcmFuc2Zvcm1SZXN1bHRzW2ldKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0cmFuc2Zvcm1SZXN1bHRzO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhIGxpc3Qgb2YgXCJ0cmFuc2Zvcm0gcmVzdWx0c1wiIChhIHRyYW5zZm9ybSByZXN1bHQgaXMgYSBmaWVsZCB2YWx1ZVxyXG4gICAgICogcmVwcmVzZW50aW5nIHRoZSByZXN1bHQgb2YgYXBwbHlpbmcgYSB0cmFuc2Zvcm0pIGZvciB1c2Ugd2hlbiBhcHBseWluZyBhXHJcbiAgICAgKiBUcmFuc2Zvcm1NdXRhdGlvbiBsb2NhbGx5LlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBsb2NhbFdyaXRlVGltZSBUaGUgbG9jYWwgdGltZSBvZiB0aGUgdHJhbnNmb3JtIG11dGF0aW9uICh1c2VkIHRvXHJcbiAgICAgKiAgICAgZ2VuZXJhdGUgU2VydmVyVGltZXN0YW1wVmFsdWVzKS5cclxuICAgICAqIEBwYXJhbSBtYXliZURvYyBUaGUgY3VycmVudCBzdGF0ZSBvZiB0aGUgZG9jdW1lbnQgYWZ0ZXIgYXBwbHlpbmcgYWxsXHJcbiAgICAgKiAgICAgcHJldmlvdXMgbXV0YXRpb25zLlxyXG4gICAgICogQHBhcmFtIGJhc2VEb2MgVGhlIGRvY3VtZW50IHByaW9yIHRvIGFwcGx5aW5nIHRoaXMgbXV0YXRpb24gYmF0Y2guXHJcbiAgICAgKiBAcmV0dXJuIFRoZSB0cmFuc2Zvcm0gcmVzdWx0cyBsaXN0LlxyXG4gICAgICovXHJcbiAgICBUcmFuc2Zvcm1NdXRhdGlvbi5wcm90b3R5cGUubG9jYWxUcmFuc2Zvcm1SZXN1bHRzID0gZnVuY3Rpb24gKGxvY2FsV3JpdGVUaW1lLCBtYXliZURvYywgYmFzZURvYykge1xyXG4gICAgICAgIHZhciB0cmFuc2Zvcm1SZXN1bHRzID0gW107XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHRoaXMuZmllbGRUcmFuc2Zvcm1zOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICB2YXIgZmllbGRUcmFuc2Zvcm0gPSBfYVtfaV07XHJcbiAgICAgICAgICAgIHZhciB0cmFuc2Zvcm0gPSBmaWVsZFRyYW5zZm9ybS50cmFuc2Zvcm07XHJcbiAgICAgICAgICAgIHZhciBwcmV2aW91c1ZhbHVlID0gbnVsbDtcclxuICAgICAgICAgICAgaWYgKG1heWJlRG9jIGluc3RhbmNlb2YgRG9jdW1lbnQpIHtcclxuICAgICAgICAgICAgICAgIHByZXZpb3VzVmFsdWUgPSBtYXliZURvYy5maWVsZChmaWVsZFRyYW5zZm9ybS5maWVsZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHByZXZpb3VzVmFsdWUgPT09IG51bGwgJiYgYmFzZURvYyBpbnN0YW5jZW9mIERvY3VtZW50KSB7XHJcbiAgICAgICAgICAgICAgICAvLyBJZiB0aGUgY3VycmVudCBkb2N1bWVudCBkb2VzIG5vdCBjb250YWluIGEgdmFsdWUgZm9yIHRoZSBtdXRhdGVkXHJcbiAgICAgICAgICAgICAgICAvLyBmaWVsZCwgdXNlIHRoZSB2YWx1ZSB0aGF0IGV4aXN0ZWQgYmVmb3JlIGFwcGx5aW5nIHRoaXMgbXV0YXRpb25cclxuICAgICAgICAgICAgICAgIC8vIGJhdGNoLiBUaGlzIHNvbHZlcyBhbiBlZGdlIGNhc2Ugd2hlcmUgYSBQYXRjaE11dGF0aW9uIGNsZWFycyB0aGVcclxuICAgICAgICAgICAgICAgIC8vIHZhbHVlcyBpbiBhIG5lc3RlZCBtYXAgYmVmb3JlIHRoZSBUcmFuc2Zvcm1NdXRhdGlvbiBpcyBhcHBsaWVkLlxyXG4gICAgICAgICAgICAgICAgcHJldmlvdXNWYWx1ZSA9IGJhc2VEb2MuZmllbGQoZmllbGRUcmFuc2Zvcm0uZmllbGQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRyYW5zZm9ybVJlc3VsdHMucHVzaCh0cmFuc2Zvcm0uYXBwbHlUb0xvY2FsVmlldyhwcmV2aW91c1ZhbHVlLCBsb2NhbFdyaXRlVGltZSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdHJhbnNmb3JtUmVzdWx0cztcclxuICAgIH07XHJcbiAgICBUcmFuc2Zvcm1NdXRhdGlvbi5wcm90b3R5cGUudHJhbnNmb3JtT2JqZWN0ID0gZnVuY3Rpb24gKGRhdGEsIHRyYW5zZm9ybVJlc3VsdHMpIHtcclxuICAgICAgICBhc3NlcnQodHJhbnNmb3JtUmVzdWx0cy5sZW5ndGggPT09IHRoaXMuZmllbGRUcmFuc2Zvcm1zLmxlbmd0aCwgJ1RyYW5zZm9ybVJlc3VsdHMgbGVuZ3RoIG1pc21hdGNoLicpO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5maWVsZFRyYW5zZm9ybXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdmFyIGZpZWxkVHJhbnNmb3JtID0gdGhpcy5maWVsZFRyYW5zZm9ybXNbaV07XHJcbiAgICAgICAgICAgIHZhciBmaWVsZFBhdGggPSBmaWVsZFRyYW5zZm9ybS5maWVsZDtcclxuICAgICAgICAgICAgZGF0YSA9IGRhdGEuc2V0KGZpZWxkUGF0aCwgdHJhbnNmb3JtUmVzdWx0c1tpXSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBUcmFuc2Zvcm1NdXRhdGlvbjtcclxufShNdXRhdGlvbikpO1xyXG4vKiogQSBtdXRhdGlvbiB0aGF0IGRlbGV0ZXMgdGhlIGRvY3VtZW50IGF0IHRoZSBnaXZlbiBrZXkuICovXHJcbnZhciBEZWxldGVNdXRhdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIHRzbGliLl9fZXh0ZW5kcyhEZWxldGVNdXRhdGlvbiwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIERlbGV0ZU11dGF0aW9uKGtleSwgcHJlY29uZGl0aW9uKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcclxuICAgICAgICBfdGhpcy5rZXkgPSBrZXk7XHJcbiAgICAgICAgX3RoaXMucHJlY29uZGl0aW9uID0gcHJlY29uZGl0aW9uO1xyXG4gICAgICAgIF90aGlzLnR5cGUgPSBNdXRhdGlvblR5cGUuRGVsZXRlO1xyXG4gICAgICAgIHJldHVybiBfdGhpcztcclxuICAgIH1cclxuICAgIERlbGV0ZU11dGF0aW9uLnByb3RvdHlwZS5hcHBseVRvUmVtb3RlRG9jdW1lbnQgPSBmdW5jdGlvbiAobWF5YmVEb2MsIG11dGF0aW9uUmVzdWx0KSB7XHJcbiAgICAgICAgdGhpcy52ZXJpZnlLZXlNYXRjaGVzKG1heWJlRG9jKTtcclxuICAgICAgICBhc3NlcnQobXV0YXRpb25SZXN1bHQudHJhbnNmb3JtUmVzdWx0cyA9PSBudWxsLCAnVHJhbnNmb3JtIHJlc3VsdHMgcmVjZWl2ZWQgYnkgRGVsZXRlTXV0YXRpb24uJyk7XHJcbiAgICAgICAgLy8gVW5saWtlIGFwcGx5VG9Mb2NhbFZpZXcsIGlmIHdlJ3JlIGFwcGx5aW5nIGEgbXV0YXRpb24gdG8gYSByZW1vdGVcclxuICAgICAgICAvLyBkb2N1bWVudCB0aGUgc2VydmVyIGhhcyBhY2NlcHRlZCB0aGUgbXV0YXRpb24gc28gdGhlIHByZWNvbmRpdGlvbiBtdXN0XHJcbiAgICAgICAgLy8gaGF2ZSBoZWxkLlxyXG4gICAgICAgIHJldHVybiBuZXcgTm9Eb2N1bWVudCh0aGlzLmtleSwgbXV0YXRpb25SZXN1bHQudmVyc2lvbiwge1xyXG4gICAgICAgICAgICBoYXNDb21taXR0ZWRNdXRhdGlvbnM6IHRydWVcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBEZWxldGVNdXRhdGlvbi5wcm90b3R5cGUuYXBwbHlUb0xvY2FsVmlldyA9IGZ1bmN0aW9uIChtYXliZURvYywgYmFzZURvYywgbG9jYWxXcml0ZVRpbWUpIHtcclxuICAgICAgICB0aGlzLnZlcmlmeUtleU1hdGNoZXMobWF5YmVEb2MpO1xyXG4gICAgICAgIGlmICghdGhpcy5wcmVjb25kaXRpb24uaXNWYWxpZEZvcihtYXliZURvYykpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG1heWJlRG9jO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAobWF5YmVEb2MpIHtcclxuICAgICAgICAgICAgYXNzZXJ0KG1heWJlRG9jLmtleS5pc0VxdWFsKHRoaXMua2V5KSwgJ0NhbiBvbmx5IGFwcGx5IG11dGF0aW9uIHRvIGRvY3VtZW50IHdpdGggc2FtZSBrZXknKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG5ldyBOb0RvY3VtZW50KHRoaXMua2V5LCBTbmFwc2hvdFZlcnNpb24uZm9yRGVsZXRlZERvYygpKTtcclxuICAgIH07XHJcbiAgICBEZWxldGVNdXRhdGlvbi5wcm90b3R5cGUuZXh0cmFjdEJhc2VWYWx1ZSA9IGZ1bmN0aW9uIChtYXliZURvYykge1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfTtcclxuICAgIERlbGV0ZU11dGF0aW9uLnByb3RvdHlwZS5pc0VxdWFsID0gZnVuY3Rpb24gKG90aGVyKSB7XHJcbiAgICAgICAgcmV0dXJuIChvdGhlciBpbnN0YW5jZW9mIERlbGV0ZU11dGF0aW9uICYmXHJcbiAgICAgICAgICAgIHRoaXMua2V5LmlzRXF1YWwob3RoZXIua2V5KSAmJlxyXG4gICAgICAgICAgICB0aGlzLnByZWNvbmRpdGlvbi5pc0VxdWFsKG90aGVyLnByZWNvbmRpdGlvbikpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBEZWxldGVNdXRhdGlvbjtcclxufShNdXRhdGlvbikpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxudmFyIFR5cGVPcmRlcjtcclxuKGZ1bmN0aW9uIChUeXBlT3JkZXIpIHtcclxuICAgIC8vIFRoaXMgb3JkZXIgaXMgZGVmaW5lZCBieSB0aGUgYmFja2VuZC5cclxuICAgIFR5cGVPcmRlcltUeXBlT3JkZXJbXCJOdWxsVmFsdWVcIl0gPSAwXSA9IFwiTnVsbFZhbHVlXCI7XHJcbiAgICBUeXBlT3JkZXJbVHlwZU9yZGVyW1wiQm9vbGVhblZhbHVlXCJdID0gMV0gPSBcIkJvb2xlYW5WYWx1ZVwiO1xyXG4gICAgVHlwZU9yZGVyW1R5cGVPcmRlcltcIk51bWJlclZhbHVlXCJdID0gMl0gPSBcIk51bWJlclZhbHVlXCI7XHJcbiAgICBUeXBlT3JkZXJbVHlwZU9yZGVyW1wiVGltZXN0YW1wVmFsdWVcIl0gPSAzXSA9IFwiVGltZXN0YW1wVmFsdWVcIjtcclxuICAgIFR5cGVPcmRlcltUeXBlT3JkZXJbXCJTdHJpbmdWYWx1ZVwiXSA9IDRdID0gXCJTdHJpbmdWYWx1ZVwiO1xyXG4gICAgVHlwZU9yZGVyW1R5cGVPcmRlcltcIkJsb2JWYWx1ZVwiXSA9IDVdID0gXCJCbG9iVmFsdWVcIjtcclxuICAgIFR5cGVPcmRlcltUeXBlT3JkZXJbXCJSZWZWYWx1ZVwiXSA9IDZdID0gXCJSZWZWYWx1ZVwiO1xyXG4gICAgVHlwZU9yZGVyW1R5cGVPcmRlcltcIkdlb1BvaW50VmFsdWVcIl0gPSA3XSA9IFwiR2VvUG9pbnRWYWx1ZVwiO1xyXG4gICAgVHlwZU9yZGVyW1R5cGVPcmRlcltcIkFycmF5VmFsdWVcIl0gPSA4XSA9IFwiQXJyYXlWYWx1ZVwiO1xyXG4gICAgVHlwZU9yZGVyW1R5cGVPcmRlcltcIk9iamVjdFZhbHVlXCJdID0gOV0gPSBcIk9iamVjdFZhbHVlXCI7XHJcbn0pKFR5cGVPcmRlciB8fCAoVHlwZU9yZGVyID0ge30pKTtcclxuLyoqIERlZmluZXMgdGhlIHJldHVybiB2YWx1ZSBmb3IgcGVuZGluZyBzZXJ2ZXIgdGltZXN0YW1wcy4gKi9cclxudmFyIFNlcnZlclRpbWVzdGFtcEJlaGF2aW9yO1xyXG4oZnVuY3Rpb24gKFNlcnZlclRpbWVzdGFtcEJlaGF2aW9yKSB7XHJcbiAgICBTZXJ2ZXJUaW1lc3RhbXBCZWhhdmlvcltTZXJ2ZXJUaW1lc3RhbXBCZWhhdmlvcltcIkRlZmF1bHRcIl0gPSAwXSA9IFwiRGVmYXVsdFwiO1xyXG4gICAgU2VydmVyVGltZXN0YW1wQmVoYXZpb3JbU2VydmVyVGltZXN0YW1wQmVoYXZpb3JbXCJFc3RpbWF0ZVwiXSA9IDFdID0gXCJFc3RpbWF0ZVwiO1xyXG4gICAgU2VydmVyVGltZXN0YW1wQmVoYXZpb3JbU2VydmVyVGltZXN0YW1wQmVoYXZpb3JbXCJQcmV2aW91c1wiXSA9IDJdID0gXCJQcmV2aW91c1wiO1xyXG59KShTZXJ2ZXJUaW1lc3RhbXBCZWhhdmlvciB8fCAoU2VydmVyVGltZXN0YW1wQmVoYXZpb3IgPSB7fSkpO1xyXG4vKiogSG9sZHMgcHJvcGVydGllcyB0aGF0IGRlZmluZSBmaWVsZCB2YWx1ZSBkZXNlcmlhbGl6YXRpb24gb3B0aW9ucy4gKi9cclxudmFyIEZpZWxkVmFsdWVPcHRpb25zID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gRmllbGRWYWx1ZU9wdGlvbnMoc2VydmVyVGltZXN0YW1wQmVoYXZpb3IsIHRpbWVzdGFtcHNJblNuYXBzaG90cykge1xyXG4gICAgICAgIHRoaXMuc2VydmVyVGltZXN0YW1wQmVoYXZpb3IgPSBzZXJ2ZXJUaW1lc3RhbXBCZWhhdmlvcjtcclxuICAgICAgICB0aGlzLnRpbWVzdGFtcHNJblNuYXBzaG90cyA9IHRpbWVzdGFtcHNJblNuYXBzaG90cztcclxuICAgIH1cclxuICAgIEZpZWxkVmFsdWVPcHRpb25zLmZyb21TbmFwc2hvdE9wdGlvbnMgPSBmdW5jdGlvbiAob3B0aW9ucywgdGltZXN0YW1wc0luU25hcHNob3RzKSB7XHJcbiAgICAgICAgc3dpdGNoIChvcHRpb25zLnNlcnZlclRpbWVzdGFtcHMpIHtcclxuICAgICAgICAgICAgY2FzZSAnZXN0aW1hdGUnOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBGaWVsZFZhbHVlT3B0aW9ucyhTZXJ2ZXJUaW1lc3RhbXBCZWhhdmlvci5Fc3RpbWF0ZSwgdGltZXN0YW1wc0luU25hcHNob3RzKTtcclxuICAgICAgICAgICAgY2FzZSAncHJldmlvdXMnOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBGaWVsZFZhbHVlT3B0aW9ucyhTZXJ2ZXJUaW1lc3RhbXBCZWhhdmlvci5QcmV2aW91cywgdGltZXN0YW1wc0luU25hcHNob3RzKTtcclxuICAgICAgICAgICAgY2FzZSAnbm9uZSc6IC8vIEZhbGwtdGhyb3VnaCBpbnRlbmRlZC5cclxuICAgICAgICAgICAgY2FzZSB1bmRlZmluZWQ6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEZpZWxkVmFsdWVPcHRpb25zKFNlcnZlclRpbWVzdGFtcEJlaGF2aW9yLkRlZmF1bHQsIHRpbWVzdGFtcHNJblNuYXBzaG90cyk7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFpbCgnZnJvbVNuYXBzaG90T3B0aW9ucygpIGNhbGxlZCB3aXRoIGludmFsaWQgb3B0aW9ucy4nKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEZpZWxkVmFsdWVPcHRpb25zO1xyXG59KCkpO1xyXG4vKipcclxuICogQSBmaWVsZCB2YWx1ZSByZXByZXNlbnRzIGEgZGF0YXR5cGUgYXMgc3RvcmVkIGJ5IEZpcmVzdG9yZS5cclxuICovXHJcbnZhciBGaWVsZFZhbHVlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gRmllbGRWYWx1ZSgpIHtcclxuICAgIH1cclxuICAgIEZpZWxkVmFsdWUucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciB2YWwgPSB0aGlzLnZhbHVlKCk7XHJcbiAgICAgICAgcmV0dXJuIHZhbCA9PT0gbnVsbCA/ICdudWxsJyA6IHZhbC50b1N0cmluZygpO1xyXG4gICAgfTtcclxuICAgIEZpZWxkVmFsdWUucHJvdG90eXBlLmRlZmF1bHRDb21wYXJlVG8gPSBmdW5jdGlvbiAob3RoZXIpIHtcclxuICAgICAgICBhc3NlcnQodGhpcy50eXBlT3JkZXIgIT09IG90aGVyLnR5cGVPcmRlciwgJ0RlZmF1bHQgY29tcGFyZVRvIHNob3VsZCBub3QgYmUgdXNlZCBmb3IgdmFsdWVzIG9mIHNhbWUgdHlwZS4nKTtcclxuICAgICAgICB2YXIgY21wID0gcHJpbWl0aXZlQ29tcGFyYXRvcih0aGlzLnR5cGVPcmRlciwgb3RoZXIudHlwZU9yZGVyKTtcclxuICAgICAgICByZXR1cm4gY21wO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBGaWVsZFZhbHVlO1xyXG59KCkpO1xyXG52YXIgTnVsbFZhbHVlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgdHNsaWIuX19leHRlbmRzKE51bGxWYWx1ZSwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIE51bGxWYWx1ZSgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xyXG4gICAgICAgIF90aGlzLnR5cGVPcmRlciA9IFR5cGVPcmRlci5OdWxsVmFsdWU7XHJcbiAgICAgICAgLy8gaW50ZXJuYWxWYWx1ZSBpcyB1bnVzZWQgYnV0IHdlIGFkZCBpdCB0byB3b3JrIGFyb3VuZFxyXG4gICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9NaWNyb3NvZnQvVHlwZVNjcmlwdC9pc3N1ZXMvMTU1ODVcclxuICAgICAgICBfdGhpcy5pbnRlcm5hbFZhbHVlID0gbnVsbDtcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICBOdWxsVmFsdWUucHJvdG90eXBlLnZhbHVlID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH07XHJcbiAgICBOdWxsVmFsdWUucHJvdG90eXBlLmlzRXF1YWwgPSBmdW5jdGlvbiAob3RoZXIpIHtcclxuICAgICAgICByZXR1cm4gb3RoZXIgaW5zdGFuY2VvZiBOdWxsVmFsdWU7XHJcbiAgICB9O1xyXG4gICAgTnVsbFZhbHVlLnByb3RvdHlwZS5jb21wYXJlVG8gPSBmdW5jdGlvbiAob3RoZXIpIHtcclxuICAgICAgICBpZiAob3RoZXIgaW5zdGFuY2VvZiBOdWxsVmFsdWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLmRlZmF1bHRDb21wYXJlVG8ob3RoZXIpO1xyXG4gICAgfTtcclxuICAgIE51bGxWYWx1ZS5JTlNUQU5DRSA9IG5ldyBOdWxsVmFsdWUoKTtcclxuICAgIHJldHVybiBOdWxsVmFsdWU7XHJcbn0oRmllbGRWYWx1ZSkpO1xyXG52YXIgQm9vbGVhblZhbHVlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgdHNsaWIuX19leHRlbmRzKEJvb2xlYW5WYWx1ZSwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIEJvb2xlYW5WYWx1ZShpbnRlcm5hbFZhbHVlKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcclxuICAgICAgICBfdGhpcy5pbnRlcm5hbFZhbHVlID0gaW50ZXJuYWxWYWx1ZTtcclxuICAgICAgICBfdGhpcy50eXBlT3JkZXIgPSBUeXBlT3JkZXIuQm9vbGVhblZhbHVlO1xyXG4gICAgICAgIHJldHVybiBfdGhpcztcclxuICAgIH1cclxuICAgIEJvb2xlYW5WYWx1ZS5wcm90b3R5cGUudmFsdWUgPSBmdW5jdGlvbiAob3B0aW9ucykge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmludGVybmFsVmFsdWU7XHJcbiAgICB9O1xyXG4gICAgQm9vbGVhblZhbHVlLnByb3RvdHlwZS5pc0VxdWFsID0gZnVuY3Rpb24gKG90aGVyKSB7XHJcbiAgICAgICAgcmV0dXJuIChvdGhlciBpbnN0YW5jZW9mIEJvb2xlYW5WYWx1ZSAmJlxyXG4gICAgICAgICAgICB0aGlzLmludGVybmFsVmFsdWUgPT09IG90aGVyLmludGVybmFsVmFsdWUpO1xyXG4gICAgfTtcclxuICAgIEJvb2xlYW5WYWx1ZS5wcm90b3R5cGUuY29tcGFyZVRvID0gZnVuY3Rpb24gKG90aGVyKSB7XHJcbiAgICAgICAgaWYgKG90aGVyIGluc3RhbmNlb2YgQm9vbGVhblZhbHVlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBwcmltaXRpdmVDb21wYXJhdG9yKHRoaXMsIG90aGVyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGVmYXVsdENvbXBhcmVUbyhvdGhlcik7XHJcbiAgICB9O1xyXG4gICAgQm9vbGVhblZhbHVlLm9mID0gZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgICAgcmV0dXJuIHZhbHVlID8gQm9vbGVhblZhbHVlLlRSVUUgOiBCb29sZWFuVmFsdWUuRkFMU0U7XHJcbiAgICB9O1xyXG4gICAgQm9vbGVhblZhbHVlLlRSVUUgPSBuZXcgQm9vbGVhblZhbHVlKHRydWUpO1xyXG4gICAgQm9vbGVhblZhbHVlLkZBTFNFID0gbmV3IEJvb2xlYW5WYWx1ZShmYWxzZSk7XHJcbiAgICByZXR1cm4gQm9vbGVhblZhbHVlO1xyXG59KEZpZWxkVmFsdWUpKTtcclxuLyoqIEJhc2UgY2xhc3MgZm9yIEludGVnZXJWYWx1ZSBhbmQgRG91YmxlVmFsdWUuICovXHJcbnZhciBOdW1iZXJWYWx1ZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIHRzbGliLl9fZXh0ZW5kcyhOdW1iZXJWYWx1ZSwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIE51bWJlclZhbHVlKGludGVybmFsVmFsdWUpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xyXG4gICAgICAgIF90aGlzLmludGVybmFsVmFsdWUgPSBpbnRlcm5hbFZhbHVlO1xyXG4gICAgICAgIF90aGlzLnR5cGVPcmRlciA9IFR5cGVPcmRlci5OdW1iZXJWYWx1ZTtcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICBOdW1iZXJWYWx1ZS5wcm90b3R5cGUudmFsdWUgPSBmdW5jdGlvbiAob3B0aW9ucykge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmludGVybmFsVmFsdWU7XHJcbiAgICB9O1xyXG4gICAgTnVtYmVyVmFsdWUucHJvdG90eXBlLmNvbXBhcmVUbyA9IGZ1bmN0aW9uIChvdGhlcikge1xyXG4gICAgICAgIGlmIChvdGhlciBpbnN0YW5jZW9mIE51bWJlclZhbHVlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudW1lcmljQ29tcGFyYXRvcih0aGlzLmludGVybmFsVmFsdWUsIG90aGVyLmludGVybmFsVmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5kZWZhdWx0Q29tcGFyZVRvKG90aGVyKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gTnVtYmVyVmFsdWU7XHJcbn0oRmllbGRWYWx1ZSkpO1xyXG4vKiogVXRpbGl0eSBmdW5jdGlvbiB0byBjb21wYXJlIGRvdWJsZXMgKHVzaW5nIEZpcmVzdG9yZSBzZW1hbnRpY3MgZm9yIE5hTikuICovXHJcbmZ1bmN0aW9uIG51bWVyaWNDb21wYXJhdG9yKGxlZnQsIHJpZ2h0KSB7XHJcbiAgICBpZiAobGVmdCA8IHJpZ2h0KSB7XHJcbiAgICAgICAgcmV0dXJuIC0xO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAobGVmdCA+IHJpZ2h0KSB7XHJcbiAgICAgICAgcmV0dXJuIDE7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChsZWZ0ID09PSByaWdodCkge1xyXG4gICAgICAgIHJldHVybiAwO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgLy8gb25lIG9yIGJvdGggYXJlIE5hTi5cclxuICAgICAgICBpZiAoaXNOYU4obGVmdCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGlzTmFOKHJpZ2h0KSA/IDAgOiAtMTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiAxO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4vKipcclxuICogVXRpbGl0eSBmdW5jdGlvbiB0byBjaGVjayBudW1iZXJzIGZvciBlcXVhbGl0eSB1c2luZyBGaXJlc3RvcmUgc2VtYW50aWNzXHJcbiAqIChOYU4gPT09IE5hTiwgLTAuMCAhPT0gMC4wKS5cclxuICovXHJcbmZ1bmN0aW9uIG51bWVyaWNFcXVhbHMobGVmdCwgcmlnaHQpIHtcclxuICAgIC8vIEltcGxlbWVudGVkIGJhc2VkIG9uIE9iamVjdC5pcygpIHBvbHlmaWxsIGZyb21cclxuICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL09iamVjdC9pc1xyXG4gICAgaWYgKGxlZnQgPT09IHJpZ2h0KSB7XHJcbiAgICAgICAgLy8gKzAgIT0gLTBcclxuICAgICAgICByZXR1cm4gbGVmdCAhPT0gMCB8fCAxIC8gbGVmdCA9PT0gMSAvIHJpZ2h0O1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgLy8gTmFOID09IE5hTlxyXG4gICAgICAgIHJldHVybiBsZWZ0ICE9PSBsZWZ0ICYmIHJpZ2h0ICE9PSByaWdodDtcclxuICAgIH1cclxufVxyXG52YXIgSW50ZWdlclZhbHVlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgdHNsaWIuX19leHRlbmRzKEludGVnZXJWYWx1ZSwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIEludGVnZXJWYWx1ZSgpIHtcclxuICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XHJcbiAgICB9XHJcbiAgICBJbnRlZ2VyVmFsdWUucHJvdG90eXBlLmlzRXF1YWwgPSBmdW5jdGlvbiAob3RoZXIpIHtcclxuICAgICAgICAvLyBOT1RFOiBEb3VibGVWYWx1ZSBhbmQgSW50ZWdlclZhbHVlIGluc3RhbmNlcyBtYXkgY29tcGFyZVRvKCkgdGhlIHNhbWUsXHJcbiAgICAgICAgLy8gYnV0IHRoYXQgZG9lc24ndCBtYWtlIHRoZW0gZXF1YWwgdmlhIGlzRXF1YWwoKS5cclxuICAgICAgICBpZiAob3RoZXIgaW5zdGFuY2VvZiBJbnRlZ2VyVmFsdWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bWVyaWNFcXVhbHModGhpcy5pbnRlcm5hbFZhbHVlLCBvdGhlci5pbnRlcm5hbFZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEludGVnZXJWYWx1ZTtcclxufShOdW1iZXJWYWx1ZSkpO1xyXG52YXIgRG91YmxlVmFsdWUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICB0c2xpYi5fX2V4dGVuZHMoRG91YmxlVmFsdWUsIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBEb3VibGVWYWx1ZSgpIHtcclxuICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XHJcbiAgICB9XHJcbiAgICBEb3VibGVWYWx1ZS5wcm90b3R5cGUuaXNFcXVhbCA9IGZ1bmN0aW9uIChvdGhlcikge1xyXG4gICAgICAgIC8vIE5PVEU6IERvdWJsZVZhbHVlIGFuZCBJbnRlZ2VyVmFsdWUgaW5zdGFuY2VzIG1heSBjb21wYXJlVG8oKSB0aGUgc2FtZSxcclxuICAgICAgICAvLyBidXQgdGhhdCBkb2Vzbid0IG1ha2UgdGhlbSBlcXVhbCB2aWEgaXNFcXVhbCgpLlxyXG4gICAgICAgIGlmIChvdGhlciBpbnN0YW5jZW9mIERvdWJsZVZhbHVlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudW1lcmljRXF1YWxzKHRoaXMuaW50ZXJuYWxWYWx1ZSwgb3RoZXIuaW50ZXJuYWxWYWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIERvdWJsZVZhbHVlLk5BTiA9IG5ldyBEb3VibGVWYWx1ZShOYU4pO1xyXG4gICAgRG91YmxlVmFsdWUuUE9TSVRJVkVfSU5GSU5JVFkgPSBuZXcgRG91YmxlVmFsdWUoSW5maW5pdHkpO1xyXG4gICAgRG91YmxlVmFsdWUuTkVHQVRJVkVfSU5GSU5JVFkgPSBuZXcgRG91YmxlVmFsdWUoLUluZmluaXR5KTtcclxuICAgIHJldHVybiBEb3VibGVWYWx1ZTtcclxufShOdW1iZXJWYWx1ZSkpO1xyXG4vLyBUT0RPKGIvMzcyNjc4ODUpOiBBZGQgdHJ1bmNhdGlvbiBzdXBwb3J0XHJcbnZhciBTdHJpbmdWYWx1ZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIHRzbGliLl9fZXh0ZW5kcyhTdHJpbmdWYWx1ZSwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIFN0cmluZ1ZhbHVlKGludGVybmFsVmFsdWUpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xyXG4gICAgICAgIF90aGlzLmludGVybmFsVmFsdWUgPSBpbnRlcm5hbFZhbHVlO1xyXG4gICAgICAgIF90aGlzLnR5cGVPcmRlciA9IFR5cGVPcmRlci5TdHJpbmdWYWx1ZTtcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICBTdHJpbmdWYWx1ZS5wcm90b3R5cGUudmFsdWUgPSBmdW5jdGlvbiAob3B0aW9ucykge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmludGVybmFsVmFsdWU7XHJcbiAgICB9O1xyXG4gICAgU3RyaW5nVmFsdWUucHJvdG90eXBlLmlzRXF1YWwgPSBmdW5jdGlvbiAob3RoZXIpIHtcclxuICAgICAgICByZXR1cm4gKG90aGVyIGluc3RhbmNlb2YgU3RyaW5nVmFsdWUgJiYgdGhpcy5pbnRlcm5hbFZhbHVlID09PSBvdGhlci5pbnRlcm5hbFZhbHVlKTtcclxuICAgIH07XHJcbiAgICBTdHJpbmdWYWx1ZS5wcm90b3R5cGUuY29tcGFyZVRvID0gZnVuY3Rpb24gKG90aGVyKSB7XHJcbiAgICAgICAgaWYgKG90aGVyIGluc3RhbmNlb2YgU3RyaW5nVmFsdWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHByaW1pdGl2ZUNvbXBhcmF0b3IodGhpcy5pbnRlcm5hbFZhbHVlLCBvdGhlci5pbnRlcm5hbFZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGVmYXVsdENvbXBhcmVUbyhvdGhlcik7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFN0cmluZ1ZhbHVlO1xyXG59KEZpZWxkVmFsdWUpKTtcclxudmFyIFRpbWVzdGFtcFZhbHVlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgdHNsaWIuX19leHRlbmRzKFRpbWVzdGFtcFZhbHVlLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gVGltZXN0YW1wVmFsdWUoaW50ZXJuYWxWYWx1ZSkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMuaW50ZXJuYWxWYWx1ZSA9IGludGVybmFsVmFsdWU7XHJcbiAgICAgICAgX3RoaXMudHlwZU9yZGVyID0gVHlwZU9yZGVyLlRpbWVzdGFtcFZhbHVlO1xyXG4gICAgICAgIHJldHVybiBfdGhpcztcclxuICAgIH1cclxuICAgIFRpbWVzdGFtcFZhbHVlLnByb3RvdHlwZS52YWx1ZSA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XHJcbiAgICAgICAgaWYgKCFvcHRpb25zIHx8IG9wdGlvbnMudGltZXN0YW1wc0luU25hcHNob3RzKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmludGVybmFsVmFsdWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pbnRlcm5hbFZhbHVlLnRvRGF0ZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBUaW1lc3RhbXBWYWx1ZS5wcm90b3R5cGUuaXNFcXVhbCA9IGZ1bmN0aW9uIChvdGhlcikge1xyXG4gICAgICAgIHJldHVybiAob3RoZXIgaW5zdGFuY2VvZiBUaW1lc3RhbXBWYWx1ZSAmJlxyXG4gICAgICAgICAgICB0aGlzLmludGVybmFsVmFsdWUuaXNFcXVhbChvdGhlci5pbnRlcm5hbFZhbHVlKSk7XHJcbiAgICB9O1xyXG4gICAgVGltZXN0YW1wVmFsdWUucHJvdG90eXBlLmNvbXBhcmVUbyA9IGZ1bmN0aW9uIChvdGhlcikge1xyXG4gICAgICAgIGlmIChvdGhlciBpbnN0YW5jZW9mIFRpbWVzdGFtcFZhbHVlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmludGVybmFsVmFsdWUuX2NvbXBhcmVUbyhvdGhlci5pbnRlcm5hbFZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAob3RoZXIgaW5zdGFuY2VvZiBTZXJ2ZXJUaW1lc3RhbXBWYWx1ZSkge1xyXG4gICAgICAgICAgICAvLyBDb25jcmV0ZSB0aW1lc3RhbXBzIGNvbWUgYmVmb3JlIHNlcnZlciB0aW1lc3RhbXBzLlxyXG4gICAgICAgICAgICByZXR1cm4gLTE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kZWZhdWx0Q29tcGFyZVRvKG90aGVyKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFRpbWVzdGFtcFZhbHVlO1xyXG59KEZpZWxkVmFsdWUpKTtcclxuLyoqXHJcbiAqIFJlcHJlc2VudHMgYSBsb2NhbGx5LWFwcGxpZWQgU2VydmVyVGltZXN0YW1wLlxyXG4gKlxyXG4gKiBOb3RlczpcclxuICogLSBTZXJ2ZXJUaW1lc3RhbXBWYWx1ZSBpbnN0YW5jZXMgYXJlIGNyZWF0ZWQgYXMgdGhlIHJlc3VsdCBvZiBhcHBseWluZyBhXHJcbiAqICAgVHJhbnNmb3JtTXV0YXRpb24gKHNlZSBUcmFuc2Zvcm1NdXRhdGlvbi5hcHBseVRvKCkpLiBUaGV5IGNhbiBvbmx5IGV4aXN0IGluXHJcbiAqICAgdGhlIGxvY2FsIHZpZXcgb2YgYSBkb2N1bWVudC4gVGhlcmVmb3JlIHRoZXkgZG8gbm90IG5lZWQgdG8gYmUgcGFyc2VkIG9yXHJcbiAqICAgc2VyaWFsaXplZC5cclxuICogLSBXaGVuIGV2YWx1YXRlZCBsb2NhbGx5IChlLmcuIGZvciBzbmFwc2hvdC5kYXRhKCkpLCB0aGV5IGJ5IGRlZmF1bHRcclxuICogICBldmFsdWF0ZSB0byBgbnVsbGAuIFRoaXMgYmVoYXZpb3IgY2FuIGJlIGNvbmZpZ3VyZWQgYnkgcGFzc2luZyBjdXN0b21cclxuICogICBGaWVsZFZhbHVlT3B0aW9ucyB0byB2YWx1ZSgpLlxyXG4gKiAtIFdpdGggcmVzcGVjdCB0byBvdGhlciBTZXJ2ZXJUaW1lc3RhbXBWYWx1ZXMsIHRoZXkgc29ydCBieSB0aGVpclxyXG4gKiAgIGxvY2FsV3JpdGVUaW1lLlxyXG4gKi9cclxudmFyIFNlcnZlclRpbWVzdGFtcFZhbHVlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgdHNsaWIuX19leHRlbmRzKFNlcnZlclRpbWVzdGFtcFZhbHVlLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gU2VydmVyVGltZXN0YW1wVmFsdWUobG9jYWxXcml0ZVRpbWUsIHByZXZpb3VzVmFsdWUpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xyXG4gICAgICAgIF90aGlzLmxvY2FsV3JpdGVUaW1lID0gbG9jYWxXcml0ZVRpbWU7XHJcbiAgICAgICAgX3RoaXMucHJldmlvdXNWYWx1ZSA9IHByZXZpb3VzVmFsdWU7XHJcbiAgICAgICAgX3RoaXMudHlwZU9yZGVyID0gVHlwZU9yZGVyLlRpbWVzdGFtcFZhbHVlO1xyXG4gICAgICAgIHJldHVybiBfdGhpcztcclxuICAgIH1cclxuICAgIFNlcnZlclRpbWVzdGFtcFZhbHVlLnByb3RvdHlwZS52YWx1ZSA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XHJcbiAgICAgICAgaWYgKG9wdGlvbnMgJiZcclxuICAgICAgICAgICAgb3B0aW9ucy5zZXJ2ZXJUaW1lc3RhbXBCZWhhdmlvciA9PT0gU2VydmVyVGltZXN0YW1wQmVoYXZpb3IuRXN0aW1hdGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBUaW1lc3RhbXBWYWx1ZSh0aGlzLmxvY2FsV3JpdGVUaW1lKS52YWx1ZShvcHRpb25zKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAob3B0aW9ucyAmJlxyXG4gICAgICAgICAgICBvcHRpb25zLnNlcnZlclRpbWVzdGFtcEJlaGF2aW9yID09PSBTZXJ2ZXJUaW1lc3RhbXBCZWhhdmlvci5QcmV2aW91cykge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcmV2aW91c1ZhbHVlID8gdGhpcy5wcmV2aW91c1ZhbHVlLnZhbHVlKG9wdGlvbnMpIDogbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBTZXJ2ZXJUaW1lc3RhbXBWYWx1ZS5wcm90b3R5cGUuaXNFcXVhbCA9IGZ1bmN0aW9uIChvdGhlcikge1xyXG4gICAgICAgIHJldHVybiAob3RoZXIgaW5zdGFuY2VvZiBTZXJ2ZXJUaW1lc3RhbXBWYWx1ZSAmJlxyXG4gICAgICAgICAgICB0aGlzLmxvY2FsV3JpdGVUaW1lLmlzRXF1YWwob3RoZXIubG9jYWxXcml0ZVRpbWUpKTtcclxuICAgIH07XHJcbiAgICBTZXJ2ZXJUaW1lc3RhbXBWYWx1ZS5wcm90b3R5cGUuY29tcGFyZVRvID0gZnVuY3Rpb24gKG90aGVyKSB7XHJcbiAgICAgICAgaWYgKG90aGVyIGluc3RhbmNlb2YgU2VydmVyVGltZXN0YW1wVmFsdWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubG9jYWxXcml0ZVRpbWUuX2NvbXBhcmVUbyhvdGhlci5sb2NhbFdyaXRlVGltZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKG90aGVyIGluc3RhbmNlb2YgVGltZXN0YW1wVmFsdWUpIHtcclxuICAgICAgICAgICAgLy8gU2VydmVyIHRpbWVzdGFtcHMgY29tZSBhZnRlciBhbGwgY29uY3JldGUgdGltZXN0YW1wcy5cclxuICAgICAgICAgICAgcmV0dXJuIDE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kZWZhdWx0Q29tcGFyZVRvKG90aGVyKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgU2VydmVyVGltZXN0YW1wVmFsdWUucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiAnPFNlcnZlclRpbWVzdGFtcCBsb2NhbFRpbWU9JyArIHRoaXMubG9jYWxXcml0ZVRpbWUudG9TdHJpbmcoKSArICc+JztcclxuICAgIH07XHJcbiAgICByZXR1cm4gU2VydmVyVGltZXN0YW1wVmFsdWU7XHJcbn0oRmllbGRWYWx1ZSkpO1xyXG52YXIgQmxvYlZhbHVlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgdHNsaWIuX19leHRlbmRzKEJsb2JWYWx1ZSwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIEJsb2JWYWx1ZShpbnRlcm5hbFZhbHVlKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcclxuICAgICAgICBfdGhpcy5pbnRlcm5hbFZhbHVlID0gaW50ZXJuYWxWYWx1ZTtcclxuICAgICAgICBfdGhpcy50eXBlT3JkZXIgPSBUeXBlT3JkZXIuQmxvYlZhbHVlO1xyXG4gICAgICAgIHJldHVybiBfdGhpcztcclxuICAgIH1cclxuICAgIEJsb2JWYWx1ZS5wcm90b3R5cGUudmFsdWUgPSBmdW5jdGlvbiAob3B0aW9ucykge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmludGVybmFsVmFsdWU7XHJcbiAgICB9O1xyXG4gICAgQmxvYlZhbHVlLnByb3RvdHlwZS5pc0VxdWFsID0gZnVuY3Rpb24gKG90aGVyKSB7XHJcbiAgICAgICAgcmV0dXJuIChvdGhlciBpbnN0YW5jZW9mIEJsb2JWYWx1ZSAmJlxyXG4gICAgICAgICAgICB0aGlzLmludGVybmFsVmFsdWUuaXNFcXVhbChvdGhlci5pbnRlcm5hbFZhbHVlKSk7XHJcbiAgICB9O1xyXG4gICAgQmxvYlZhbHVlLnByb3RvdHlwZS5jb21wYXJlVG8gPSBmdW5jdGlvbiAob3RoZXIpIHtcclxuICAgICAgICBpZiAob3RoZXIgaW5zdGFuY2VvZiBCbG9iVmFsdWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaW50ZXJuYWxWYWx1ZS5fY29tcGFyZVRvKG90aGVyLmludGVybmFsVmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5kZWZhdWx0Q29tcGFyZVRvKG90aGVyKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gQmxvYlZhbHVlO1xyXG59KEZpZWxkVmFsdWUpKTtcclxudmFyIFJlZlZhbHVlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgdHNsaWIuX19leHRlbmRzKFJlZlZhbHVlLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gUmVmVmFsdWUoZGF0YWJhc2VJZCwga2V5KSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcclxuICAgICAgICBfdGhpcy5kYXRhYmFzZUlkID0gZGF0YWJhc2VJZDtcclxuICAgICAgICBfdGhpcy5rZXkgPSBrZXk7XHJcbiAgICAgICAgX3RoaXMudHlwZU9yZGVyID0gVHlwZU9yZGVyLlJlZlZhbHVlO1xyXG4gICAgICAgIHJldHVybiBfdGhpcztcclxuICAgIH1cclxuICAgIFJlZlZhbHVlLnByb3RvdHlwZS52YWx1ZSA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMua2V5O1xyXG4gICAgfTtcclxuICAgIFJlZlZhbHVlLnByb3RvdHlwZS5pc0VxdWFsID0gZnVuY3Rpb24gKG90aGVyKSB7XHJcbiAgICAgICAgaWYgKG90aGVyIGluc3RhbmNlb2YgUmVmVmFsdWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuICh0aGlzLmtleS5pc0VxdWFsKG90aGVyLmtleSkgJiYgdGhpcy5kYXRhYmFzZUlkLmlzRXF1YWwob3RoZXIuZGF0YWJhc2VJZCkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBSZWZWYWx1ZS5wcm90b3R5cGUuY29tcGFyZVRvID0gZnVuY3Rpb24gKG90aGVyKSB7XHJcbiAgICAgICAgaWYgKG90aGVyIGluc3RhbmNlb2YgUmVmVmFsdWUpIHtcclxuICAgICAgICAgICAgdmFyIGNtcCA9IHRoaXMuZGF0YWJhc2VJZC5jb21wYXJlVG8ob3RoZXIuZGF0YWJhc2VJZCk7XHJcbiAgICAgICAgICAgIHJldHVybiBjbXAgIT09IDAgPyBjbXAgOiBEb2N1bWVudEtleS5jb21wYXJhdG9yKHRoaXMua2V5LCBvdGhlci5rZXkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5kZWZhdWx0Q29tcGFyZVRvKG90aGVyKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gUmVmVmFsdWU7XHJcbn0oRmllbGRWYWx1ZSkpO1xyXG52YXIgR2VvUG9pbnRWYWx1ZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIHRzbGliLl9fZXh0ZW5kcyhHZW9Qb2ludFZhbHVlLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gR2VvUG9pbnRWYWx1ZShpbnRlcm5hbFZhbHVlKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcclxuICAgICAgICBfdGhpcy5pbnRlcm5hbFZhbHVlID0gaW50ZXJuYWxWYWx1ZTtcclxuICAgICAgICBfdGhpcy50eXBlT3JkZXIgPSBUeXBlT3JkZXIuR2VvUG9pbnRWYWx1ZTtcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICBHZW9Qb2ludFZhbHVlLnByb3RvdHlwZS52YWx1ZSA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaW50ZXJuYWxWYWx1ZTtcclxuICAgIH07XHJcbiAgICBHZW9Qb2ludFZhbHVlLnByb3RvdHlwZS5pc0VxdWFsID0gZnVuY3Rpb24gKG90aGVyKSB7XHJcbiAgICAgICAgcmV0dXJuIChvdGhlciBpbnN0YW5jZW9mIEdlb1BvaW50VmFsdWUgJiZcclxuICAgICAgICAgICAgdGhpcy5pbnRlcm5hbFZhbHVlLmlzRXF1YWwob3RoZXIuaW50ZXJuYWxWYWx1ZSkpO1xyXG4gICAgfTtcclxuICAgIEdlb1BvaW50VmFsdWUucHJvdG90eXBlLmNvbXBhcmVUbyA9IGZ1bmN0aW9uIChvdGhlcikge1xyXG4gICAgICAgIGlmIChvdGhlciBpbnN0YW5jZW9mIEdlb1BvaW50VmFsdWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaW50ZXJuYWxWYWx1ZS5fY29tcGFyZVRvKG90aGVyLmludGVybmFsVmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5kZWZhdWx0Q29tcGFyZVRvKG90aGVyKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gR2VvUG9pbnRWYWx1ZTtcclxufShGaWVsZFZhbHVlKSk7XHJcbnZhciBPYmplY3RWYWx1ZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIHRzbGliLl9fZXh0ZW5kcyhPYmplY3RWYWx1ZSwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIE9iamVjdFZhbHVlKGludGVybmFsVmFsdWUpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xyXG4gICAgICAgIF90aGlzLmludGVybmFsVmFsdWUgPSBpbnRlcm5hbFZhbHVlO1xyXG4gICAgICAgIF90aGlzLnR5cGVPcmRlciA9IFR5cGVPcmRlci5PYmplY3RWYWx1ZTtcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICBPYmplY3RWYWx1ZS5wcm90b3R5cGUudmFsdWUgPSBmdW5jdGlvbiAob3B0aW9ucykge1xyXG4gICAgICAgIHZhciByZXN1bHQgPSB7fTtcclxuICAgICAgICB0aGlzLmludGVybmFsVmFsdWUuaW5vcmRlclRyYXZlcnNhbChmdW5jdGlvbiAoa2V5LCB2YWwpIHtcclxuICAgICAgICAgICAgcmVzdWx0W2tleV0gPSB2YWwudmFsdWUob3B0aW9ucyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH07XHJcbiAgICBPYmplY3RWYWx1ZS5wcm90b3R5cGUuZm9yRWFjaCA9IGZ1bmN0aW9uIChhY3Rpb24pIHtcclxuICAgICAgICB0aGlzLmludGVybmFsVmFsdWUuaW5vcmRlclRyYXZlcnNhbChhY3Rpb24pO1xyXG4gICAgfTtcclxuICAgIE9iamVjdFZhbHVlLnByb3RvdHlwZS5pc0VxdWFsID0gZnVuY3Rpb24gKG90aGVyKSB7XHJcbiAgICAgICAgaWYgKG90aGVyIGluc3RhbmNlb2YgT2JqZWN0VmFsdWUpIHtcclxuICAgICAgICAgICAgdmFyIGl0MSA9IHRoaXMuaW50ZXJuYWxWYWx1ZS5nZXRJdGVyYXRvcigpO1xyXG4gICAgICAgICAgICB2YXIgaXQyID0gb3RoZXIuaW50ZXJuYWxWYWx1ZS5nZXRJdGVyYXRvcigpO1xyXG4gICAgICAgICAgICB3aGlsZSAoaXQxLmhhc05leHQoKSAmJiBpdDIuaGFzTmV4dCgpKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbmV4dDEgPSBpdDEuZ2V0TmV4dCgpO1xyXG4gICAgICAgICAgICAgICAgdmFyIG5leHQyID0gaXQyLmdldE5leHQoKTtcclxuICAgICAgICAgICAgICAgIGlmIChuZXh0MS5rZXkgIT09IG5leHQyLmtleSB8fCAhbmV4dDEudmFsdWUuaXNFcXVhbChuZXh0Mi52YWx1ZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuICFpdDEuaGFzTmV4dCgpICYmICFpdDIuaGFzTmV4dCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9O1xyXG4gICAgT2JqZWN0VmFsdWUucHJvdG90eXBlLmNvbXBhcmVUbyA9IGZ1bmN0aW9uIChvdGhlcikge1xyXG4gICAgICAgIGlmIChvdGhlciBpbnN0YW5jZW9mIE9iamVjdFZhbHVlKSB7XHJcbiAgICAgICAgICAgIHZhciBpdDEgPSB0aGlzLmludGVybmFsVmFsdWUuZ2V0SXRlcmF0b3IoKTtcclxuICAgICAgICAgICAgdmFyIGl0MiA9IG90aGVyLmludGVybmFsVmFsdWUuZ2V0SXRlcmF0b3IoKTtcclxuICAgICAgICAgICAgd2hpbGUgKGl0MS5oYXNOZXh0KCkgJiYgaXQyLmhhc05leHQoKSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG5leHQxID0gaXQxLmdldE5leHQoKTtcclxuICAgICAgICAgICAgICAgIHZhciBuZXh0MiA9IGl0Mi5nZXROZXh0KCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgY21wID0gcHJpbWl0aXZlQ29tcGFyYXRvcihuZXh0MS5rZXksIG5leHQyLmtleSkgfHxcclxuICAgICAgICAgICAgICAgICAgICBuZXh0MS52YWx1ZS5jb21wYXJlVG8obmV4dDIudmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGNtcCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjbXA7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gT25seSBlcXVhbCBpZiBib3RoIGl0ZXJhdG9ycyBhcmUgZXhoYXVzdGVkXHJcbiAgICAgICAgICAgIHJldHVybiBwcmltaXRpdmVDb21wYXJhdG9yKGl0MS5oYXNOZXh0KCksIGl0Mi5oYXNOZXh0KCkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGVmYXVsdENvbXBhcmVUbyhvdGhlcik7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIE9iamVjdFZhbHVlLnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAocGF0aCwgdG8pIHtcclxuICAgICAgICBhc3NlcnQoIXBhdGguaXNFbXB0eSgpLCAnQ2Fubm90IHNldCBmaWVsZCBmb3IgZW1wdHkgcGF0aCBvbiBPYmplY3RWYWx1ZScpO1xyXG4gICAgICAgIGlmIChwYXRoLmxlbmd0aCA9PT0gMSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zZXRDaGlsZChwYXRoLmZpcnN0U2VnbWVudCgpLCB0byk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB2YXIgY2hpbGQgPSB0aGlzLmNoaWxkKHBhdGguZmlyc3RTZWdtZW50KCkpO1xyXG4gICAgICAgICAgICBpZiAoIShjaGlsZCBpbnN0YW5jZW9mIE9iamVjdFZhbHVlKSkge1xyXG4gICAgICAgICAgICAgICAgY2hpbGQgPSBPYmplY3RWYWx1ZS5FTVBUWTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgbmV3Q2hpbGQgPSBjaGlsZC5zZXQocGF0aC5wb3BGaXJzdCgpLCB0byk7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNldENoaWxkKHBhdGguZmlyc3RTZWdtZW50KCksIG5ld0NoaWxkKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgT2JqZWN0VmFsdWUucHJvdG90eXBlLmRlbGV0ZSA9IGZ1bmN0aW9uIChwYXRoKSB7XHJcbiAgICAgICAgYXNzZXJ0KCFwYXRoLmlzRW1wdHkoKSwgJ0Nhbm5vdCBkZWxldGUgZmllbGQgZm9yIGVtcHR5IHBhdGggb24gT2JqZWN0VmFsdWUnKTtcclxuICAgICAgICBpZiAocGF0aC5sZW5ndGggPT09IDEpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBPYmplY3RWYWx1ZSh0aGlzLmludGVybmFsVmFsdWUucmVtb3ZlKHBhdGguZmlyc3RTZWdtZW50KCkpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIG5lc3RlZCBmaWVsZFxyXG4gICAgICAgICAgICB2YXIgY2hpbGQgPSB0aGlzLmNoaWxkKHBhdGguZmlyc3RTZWdtZW50KCkpO1xyXG4gICAgICAgICAgICBpZiAoY2hpbGQgaW5zdGFuY2VvZiBPYmplY3RWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG5ld0NoaWxkID0gY2hpbGQuZGVsZXRlKHBhdGgucG9wRmlyc3QoKSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IE9iamVjdFZhbHVlKHRoaXMuaW50ZXJuYWxWYWx1ZS5pbnNlcnQocGF0aC5maXJzdFNlZ21lbnQoKSwgbmV3Q2hpbGQpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIERvbid0IGFjdHVhbGx5IGNoYW5nZSBhIHByaW1pdGl2ZSB2YWx1ZSB0byBhbiBvYmplY3QgZm9yIGEgZGVsZXRlXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBPYmplY3RWYWx1ZS5wcm90b3R5cGUuY29udGFpbnMgPSBmdW5jdGlvbiAocGF0aCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmZpZWxkKHBhdGgpICE9PSBudWxsO1xyXG4gICAgfTtcclxuICAgIE9iamVjdFZhbHVlLnByb3RvdHlwZS5maWVsZCA9IGZ1bmN0aW9uIChwYXRoKSB7XHJcbiAgICAgICAgYXNzZXJ0KCFwYXRoLmlzRW1wdHkoKSwgXCJDYW4ndCBnZXQgZmllbGQgb2YgZW1wdHkgcGF0aFwiKTtcclxuICAgICAgICB2YXIgZmllbGQgPSB0aGlzO1xyXG4gICAgICAgIHBhdGguZm9yRWFjaChmdW5jdGlvbiAocGF0aFNlZ21lbnQpIHtcclxuICAgICAgICAgICAgaWYgKGZpZWxkIGluc3RhbmNlb2YgT2JqZWN0VmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIGZpZWxkID0gZmllbGQuaW50ZXJuYWxWYWx1ZS5nZXQocGF0aFNlZ21lbnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZmllbGQgPSBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIGZpZWxkO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyBhIEZpZWxkTWFzayBidWlsdCBmcm9tIGFsbCBGaWVsZFBhdGhzIHN0YXJ0aW5nIGZyb20gdGhpcyBPYmplY3RWYWx1ZSxcclxuICAgICAqIGluY2x1ZGluZyBwYXRocyBmcm9tIG5lc3RlZCBvYmplY3RzLlxyXG4gICAgICovXHJcbiAgICBPYmplY3RWYWx1ZS5wcm90b3R5cGUuZmllbGRNYXNrID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBmaWVsZHMgPSBuZXcgU29ydGVkU2V0KEZpZWxkUGF0aC5jb21wYXJhdG9yKTtcclxuICAgICAgICB0aGlzLmludGVybmFsVmFsdWUuZm9yRWFjaChmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xyXG4gICAgICAgICAgICB2YXIgY3VycmVudFBhdGggPSBuZXcgRmllbGRQYXRoKFtrZXldKTtcclxuICAgICAgICAgICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgT2JqZWN0VmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIHZhciBuZXN0ZWRNYXNrID0gdmFsdWUuZmllbGRNYXNrKCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgbmVzdGVkRmllbGRzID0gbmVzdGVkTWFzay5maWVsZHM7XHJcbiAgICAgICAgICAgICAgICBpZiAobmVzdGVkRmllbGRzLmlzRW1wdHkoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFByZXNlcnZlIHRoZSBlbXB0eSBtYXAgYnkgYWRkaW5nIGl0IHRvIHRoZSBGaWVsZE1hc2suXHJcbiAgICAgICAgICAgICAgICAgICAgZmllbGRzID0gZmllbGRzLmFkZChjdXJyZW50UGF0aCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBGb3IgbmVzdGVkIGFuZCBub24tZW1wdHkgT2JqZWN0VmFsdWVzLCBhZGQgdGhlIEZpZWxkUGF0aCBvZiB0aGVcclxuICAgICAgICAgICAgICAgICAgICAvLyBsZWFmIG5vZGVzLlxyXG4gICAgICAgICAgICAgICAgICAgIG5lc3RlZEZpZWxkcy5mb3JFYWNoKGZ1bmN0aW9uIChuZXN0ZWRQYXRoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkcyA9IGZpZWxkcy5hZGQoY3VycmVudFBhdGguY2hpbGQobmVzdGVkUGF0aCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZmllbGRzID0gZmllbGRzLmFkZChjdXJyZW50UGF0aCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gRmllbGRNYXNrLmZyb21TZXQoZmllbGRzKTtcclxuICAgIH07XHJcbiAgICBPYmplY3RWYWx1ZS5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaW50ZXJuYWxWYWx1ZS50b1N0cmluZygpO1xyXG4gICAgfTtcclxuICAgIE9iamVjdFZhbHVlLnByb3RvdHlwZS5jaGlsZCA9IGZ1bmN0aW9uIChjaGlsZE5hbWUpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5pbnRlcm5hbFZhbHVlLmdldChjaGlsZE5hbWUpIHx8IHVuZGVmaW5lZDtcclxuICAgIH07XHJcbiAgICBPYmplY3RWYWx1ZS5wcm90b3R5cGUuc2V0Q2hpbGQgPSBmdW5jdGlvbiAoY2hpbGROYW1lLCB2YWx1ZSkge1xyXG4gICAgICAgIHJldHVybiBuZXcgT2JqZWN0VmFsdWUodGhpcy5pbnRlcm5hbFZhbHVlLmluc2VydChjaGlsZE5hbWUsIHZhbHVlKSk7XHJcbiAgICB9O1xyXG4gICAgT2JqZWN0VmFsdWUuRU1QVFkgPSBuZXcgT2JqZWN0VmFsdWUobmV3IFNvcnRlZE1hcChwcmltaXRpdmVDb21wYXJhdG9yKSk7XHJcbiAgICByZXR1cm4gT2JqZWN0VmFsdWU7XHJcbn0oRmllbGRWYWx1ZSkpO1xyXG52YXIgQXJyYXlWYWx1ZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIHRzbGliLl9fZXh0ZW5kcyhBcnJheVZhbHVlLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gQXJyYXlWYWx1ZShpbnRlcm5hbFZhbHVlKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcclxuICAgICAgICBfdGhpcy5pbnRlcm5hbFZhbHVlID0gaW50ZXJuYWxWYWx1ZTtcclxuICAgICAgICBfdGhpcy50eXBlT3JkZXIgPSBUeXBlT3JkZXIuQXJyYXlWYWx1ZTtcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICBBcnJheVZhbHVlLnByb3RvdHlwZS52YWx1ZSA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaW50ZXJuYWxWYWx1ZS5tYXAoZnVuY3Rpb24gKHYpIHsgcmV0dXJuIHYudmFsdWUob3B0aW9ucyk7IH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoZSBnaXZlbiB2YWx1ZSBpcyBjb250YWluZWQgaW4gdGhpcyBhcnJheS5cclxuICAgICAqL1xyXG4gICAgQXJyYXlWYWx1ZS5wcm90b3R5cGUuY29udGFpbnMgPSBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gdGhpcy5pbnRlcm5hbFZhbHVlOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICB2YXIgZWxlbWVudCA9IF9hW19pXTtcclxuICAgICAgICAgICAgaWYgKGVsZW1lbnQuaXNFcXVhbCh2YWx1ZSkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH07XHJcbiAgICBBcnJheVZhbHVlLnByb3RvdHlwZS5mb3JFYWNoID0gZnVuY3Rpb24gKGFjdGlvbikge1xyXG4gICAgICAgIHRoaXMuaW50ZXJuYWxWYWx1ZS5mb3JFYWNoKGFjdGlvbik7XHJcbiAgICB9O1xyXG4gICAgQXJyYXlWYWx1ZS5wcm90b3R5cGUuaXNFcXVhbCA9IGZ1bmN0aW9uIChvdGhlcikge1xyXG4gICAgICAgIGlmIChvdGhlciBpbnN0YW5jZW9mIEFycmF5VmFsdWUpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuaW50ZXJuYWxWYWx1ZS5sZW5ndGggIT09IG90aGVyLmludGVybmFsVmFsdWUubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmludGVybmFsVmFsdWUubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5pbnRlcm5hbFZhbHVlW2ldLmlzRXF1YWwob3RoZXIuaW50ZXJuYWxWYWx1ZVtpXSkpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH07XHJcbiAgICBBcnJheVZhbHVlLnByb3RvdHlwZS5jb21wYXJlVG8gPSBmdW5jdGlvbiAob3RoZXIpIHtcclxuICAgICAgICBpZiAob3RoZXIgaW5zdGFuY2VvZiBBcnJheVZhbHVlKSB7XHJcbiAgICAgICAgICAgIHZhciBtaW5MZW5ndGggPSBNYXRoLm1pbih0aGlzLmludGVybmFsVmFsdWUubGVuZ3RoLCBvdGhlci5pbnRlcm5hbFZhbHVlLmxlbmd0aCk7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWluTGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHZhciBjbXAgPSB0aGlzLmludGVybmFsVmFsdWVbaV0uY29tcGFyZVRvKG90aGVyLmludGVybmFsVmFsdWVbaV0pO1xyXG4gICAgICAgICAgICAgICAgaWYgKGNtcCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjbXA7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHByaW1pdGl2ZUNvbXBhcmF0b3IodGhpcy5pbnRlcm5hbFZhbHVlLmxlbmd0aCwgb3RoZXIuaW50ZXJuYWxWYWx1ZS5sZW5ndGgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGVmYXVsdENvbXBhcmVUbyhvdGhlcik7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIEFycmF5VmFsdWUucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBkZXNjcmlwdGlvbnMgPSB0aGlzLmludGVybmFsVmFsdWUubWFwKGZ1bmN0aW9uICh2KSB7IHJldHVybiB2LnRvU3RyaW5nKCk7IH0pO1xyXG4gICAgICAgIHJldHVybiBcIltcIiArIGRlc2NyaXB0aW9ucy5qb2luKCcsJykgKyBcIl1cIjtcclxuICAgIH07XHJcbiAgICByZXR1cm4gQXJyYXlWYWx1ZTtcclxufShGaWVsZFZhbHVlKSk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogVGhlIHJlc3VsdCBvZiBhIGxvb2t1cCBmb3IgYSBnaXZlbiBwYXRoIG1heSBiZSBhbiBleGlzdGluZyBkb2N1bWVudCBvciBhXHJcbiAqIG1hcmtlciB0aGF0IHRoaXMgZG9jdW1lbnQgZG9lcyBub3QgZXhpc3QgYXQgYSBnaXZlbiB2ZXJzaW9uLlxyXG4gKi9cclxudmFyIE1heWJlRG9jdW1lbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBNYXliZURvY3VtZW50KGtleSwgdmVyc2lvbikge1xyXG4gICAgICAgIHRoaXMua2V5ID0ga2V5O1xyXG4gICAgICAgIHRoaXMudmVyc2lvbiA9IHZlcnNpb247XHJcbiAgICB9XHJcbiAgICBNYXliZURvY3VtZW50LmNvbXBhcmVCeUtleSA9IGZ1bmN0aW9uIChkMSwgZDIpIHtcclxuICAgICAgICByZXR1cm4gRG9jdW1lbnRLZXkuY29tcGFyYXRvcihkMS5rZXksIGQyLmtleSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIE1heWJlRG9jdW1lbnQ7XHJcbn0oKSk7XHJcbi8qKlxyXG4gKiBSZXByZXNlbnRzIGEgZG9jdW1lbnQgaW4gRmlyZXN0b3JlIHdpdGggYSBrZXksIHZlcnNpb24sIGRhdGEgYW5kIHdoZXRoZXIgdGhlXHJcbiAqIGRhdGEgaGFzIGxvY2FsIG11dGF0aW9ucyBhcHBsaWVkIHRvIGl0LlxyXG4gKi9cclxudmFyIERvY3VtZW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgdHNsaWIuX19leHRlbmRzKERvY3VtZW50LCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gRG9jdW1lbnQoa2V5LCB2ZXJzaW9uLCBvcHRpb25zLCBvYmplY3RWYWx1ZSwgcHJvdG8sIGNvbnZlcnRlcikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGtleSwgdmVyc2lvbikgfHwgdGhpcztcclxuICAgICAgICBfdGhpcy5vYmplY3RWYWx1ZSA9IG9iamVjdFZhbHVlO1xyXG4gICAgICAgIF90aGlzLnByb3RvID0gcHJvdG87XHJcbiAgICAgICAgX3RoaXMuY29udmVydGVyID0gY29udmVydGVyO1xyXG4gICAgICAgIGFzc2VydChfdGhpcy5vYmplY3RWYWx1ZSAhPT0gdW5kZWZpbmVkIHx8XHJcbiAgICAgICAgICAgIChfdGhpcy5wcm90byAhPT0gdW5kZWZpbmVkICYmIF90aGlzLmNvbnZlcnRlciAhPT0gdW5kZWZpbmVkKSwgJ0lmIG9iamVjdFZhbHVlIGlzIG5vdCBkZWZpbmVkLCBwcm90byBhbmQgY29udmVydGVyIG5lZWQgdG8gYmUgc2V0LicpO1xyXG4gICAgICAgIF90aGlzLmhhc0xvY2FsTXV0YXRpb25zID0gISFvcHRpb25zLmhhc0xvY2FsTXV0YXRpb25zO1xyXG4gICAgICAgIF90aGlzLmhhc0NvbW1pdHRlZE11dGF0aW9ucyA9ICEhb3B0aW9ucy5oYXNDb21taXR0ZWRNdXRhdGlvbnM7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgRG9jdW1lbnQucHJvdG90eXBlLmZpZWxkID0gZnVuY3Rpb24gKHBhdGgpIHtcclxuICAgICAgICBpZiAodGhpcy5vYmplY3RWYWx1ZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5vYmplY3RWYWx1ZS5maWVsZChwYXRoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5maWVsZFZhbHVlQ2FjaGUpIHtcclxuICAgICAgICAgICAgICAgIC8vIFRPRE8oYi8xMzYwOTA0NDUpOiBSZW1vdmUgdGhlIGNhY2hlIHdoZW4gYGdldEZpZWxkYCBpcyBubyBsb25nZXJcclxuICAgICAgICAgICAgICAgIC8vIGNhbGxlZCBkdXJpbmcgUXVlcnkgb3JkZXJpbmcuXHJcbiAgICAgICAgICAgICAgICB0aGlzLmZpZWxkVmFsdWVDYWNoZSA9IG5ldyBNYXAoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgY2Fub25pY2FsUGF0aCA9IHBhdGguY2Fub25pY2FsU3RyaW5nKCk7XHJcbiAgICAgICAgICAgIHZhciBmaWVsZFZhbHVlID0gdGhpcy5maWVsZFZhbHVlQ2FjaGUuZ2V0KGNhbm9uaWNhbFBhdGgpO1xyXG4gICAgICAgICAgICBpZiAoZmllbGRWYWx1ZSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBJbnN0ZWFkIG9mIGRlc2VyaWFsaXppbmcgdGhlIGZ1bGwgRG9jdW1lbnQgcHJvdG8sIHdlIG9ubHlcclxuICAgICAgICAgICAgICAgIC8vIGRlc2VyaWFsaXplIHRoZSB2YWx1ZSBhdCB0aGUgcmVxdWVzdGVkIGZpZWxkIHBhdGguIFRoaXMgc3BlZWRzIHVwXHJcbiAgICAgICAgICAgICAgICAvLyBRdWVyeSBleGVjdXRpb24gYXMgcXVlcnkgZmlsdGVycyBjYW4gZGlzY2FyZCBkb2N1bWVudHMgYmFzZWQgb24gYVxyXG4gICAgICAgICAgICAgICAgLy8gc2luZ2xlIGZpZWxkLlxyXG4gICAgICAgICAgICAgICAgdmFyIHByb3RvVmFsdWUgPSB0aGlzLmdldFByb3RvRmllbGQocGF0aCk7XHJcbiAgICAgICAgICAgICAgICBpZiAocHJvdG9WYWx1ZSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZmllbGRWYWx1ZSA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBmaWVsZFZhbHVlID0gdGhpcy5jb252ZXJ0ZXIocHJvdG9WYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLmZpZWxkVmFsdWVDYWNoZS5zZXQoY2Fub25pY2FsUGF0aCwgZmllbGRWYWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGZpZWxkVmFsdWU7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIERvY3VtZW50LnByb3RvdHlwZS5kYXRhID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgaWYgKCF0aGlzLm9iamVjdFZhbHVlKSB7XHJcbiAgICAgICAgICAgIHZhciByZXN1bHRfMSA9IE9iamVjdFZhbHVlLkVNUFRZO1xyXG4gICAgICAgICAgICBmb3JFYWNoKHRoaXMucHJvdG8uZmllbGRzIHx8IHt9LCBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0XzEgPSByZXN1bHRfMS5zZXQobmV3IEZpZWxkUGF0aChba2V5XSksIF90aGlzLmNvbnZlcnRlcih2YWx1ZSkpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdGhpcy5vYmplY3RWYWx1ZSA9IHJlc3VsdF8xO1xyXG4gICAgICAgICAgICAvLyBPbmNlIG9iamVjdFZhbHVlIGlzIGNvbXB1dGVkLCB2YWx1ZXMgaW5zaWRlIHRoZSBmaWVsZFZhbHVlQ2FjaGUgYXJlIG5vXHJcbiAgICAgICAgICAgIC8vIGxvbmdlciBhY2Nlc3NlZC5cclxuICAgICAgICAgICAgdGhpcy5maWVsZFZhbHVlQ2FjaGUgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLm9iamVjdFZhbHVlO1xyXG4gICAgfTtcclxuICAgIERvY3VtZW50LnByb3RvdHlwZS52YWx1ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5kYXRhKCkudmFsdWUoKTtcclxuICAgIH07XHJcbiAgICBEb2N1bWVudC5wcm90b3R5cGUuaXNFcXVhbCA9IGZ1bmN0aW9uIChvdGhlcikge1xyXG4gICAgICAgIHJldHVybiAob3RoZXIgaW5zdGFuY2VvZiBEb2N1bWVudCAmJlxyXG4gICAgICAgICAgICB0aGlzLmtleS5pc0VxdWFsKG90aGVyLmtleSkgJiZcclxuICAgICAgICAgICAgdGhpcy52ZXJzaW9uLmlzRXF1YWwob3RoZXIudmVyc2lvbikgJiZcclxuICAgICAgICAgICAgdGhpcy5oYXNMb2NhbE11dGF0aW9ucyA9PT0gb3RoZXIuaGFzTG9jYWxNdXRhdGlvbnMgJiZcclxuICAgICAgICAgICAgdGhpcy5oYXNDb21taXR0ZWRNdXRhdGlvbnMgPT09IG90aGVyLmhhc0NvbW1pdHRlZE11dGF0aW9ucyAmJlxyXG4gICAgICAgICAgICB0aGlzLmRhdGEoKS5pc0VxdWFsKG90aGVyLmRhdGEoKSkpO1xyXG4gICAgfTtcclxuICAgIERvY3VtZW50LnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gKFwiRG9jdW1lbnQoXCIgKyB0aGlzLmtleSArIFwiLCBcIiArIHRoaXMudmVyc2lvbiArIFwiLCBcIiArIHRoaXMuZGF0YSgpLnRvU3RyaW5nKCkgKyBcIiwgXCIgK1xyXG4gICAgICAgICAgICAoXCJ7aGFzTG9jYWxNdXRhdGlvbnM6IFwiICsgdGhpcy5oYXNMb2NhbE11dGF0aW9ucyArIFwifSksIFwiKSArXHJcbiAgICAgICAgICAgIChcIntoYXNDb21taXR0ZWRNdXRhdGlvbnM6IFwiICsgdGhpcy5oYXNDb21taXR0ZWRNdXRhdGlvbnMgKyBcIn0pXCIpKTtcclxuICAgIH07XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoRG9jdW1lbnQucHJvdG90eXBlLCBcImhhc1BlbmRpbmdXcml0ZXNcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5oYXNMb2NhbE11dGF0aW9ucyB8fCB0aGlzLmhhc0NvbW1pdHRlZE11dGF0aW9ucztcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0aGUgbmVzdGVkIFByb3RvYnVmIHZhbHVlIGZvciAncGF0aGAuIENhbiBvbmx5IGJlIGNhbGxlZCBpZlxyXG4gICAgICogYHByb3RvYCB3YXMgcHJvdmlkZWQgYXQgY29uc3RydWN0aW9uIHRpbWUuXHJcbiAgICAgKi9cclxuICAgIERvY3VtZW50LnByb3RvdHlwZS5nZXRQcm90b0ZpZWxkID0gZnVuY3Rpb24gKHBhdGgpIHtcclxuICAgICAgICBhc3NlcnQodGhpcy5wcm90byAhPT0gdW5kZWZpbmVkLCAnQ2FuIG9ubHkgY2FsbCBnZXRQcm90b0ZpZWxkKCkgd2hlbiBwcm90byBpcyBkZWZpbmVkJyk7XHJcbiAgICAgICAgdmFyIHByb3RvVmFsdWUgPSB0aGlzLnByb3RvLmZpZWxkc1xyXG4gICAgICAgICAgICA/IHRoaXMucHJvdG8uZmllbGRzW3BhdGguZmlyc3RTZWdtZW50KCldXHJcbiAgICAgICAgICAgIDogdW5kZWZpbmVkO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgcGF0aC5sZW5ndGg7ICsraSkge1xyXG4gICAgICAgICAgICBpZiAoIXByb3RvVmFsdWUgfHwgIXByb3RvVmFsdWUubWFwVmFsdWUgfHwgIXByb3RvVmFsdWUubWFwVmFsdWUuZmllbGRzKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHByb3RvVmFsdWUgPSBwcm90b1ZhbHVlLm1hcFZhbHVlLmZpZWxkc1twYXRoLmdldChpKV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBwcm90b1ZhbHVlO1xyXG4gICAgfTtcclxuICAgIERvY3VtZW50LmNvbXBhcmVCeUZpZWxkID0gZnVuY3Rpb24gKGZpZWxkLCBkMSwgZDIpIHtcclxuICAgICAgICB2YXIgdjEgPSBkMS5maWVsZChmaWVsZCk7XHJcbiAgICAgICAgdmFyIHYyID0gZDIuZmllbGQoZmllbGQpO1xyXG4gICAgICAgIGlmICh2MSAhPT0gbnVsbCAmJiB2MiAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdjEuY29tcGFyZVRvKHYyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWlsKFwiVHJ5aW5nIHRvIGNvbXBhcmUgZG9jdW1lbnRzIG9uIGZpZWxkcyB0aGF0IGRvbid0IGV4aXN0XCIpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICByZXR1cm4gRG9jdW1lbnQ7XHJcbn0oTWF5YmVEb2N1bWVudCkpO1xyXG4vKipcclxuICogQSBjbGFzcyByZXByZXNlbnRpbmcgYSBkZWxldGVkIGRvY3VtZW50LlxyXG4gKiBWZXJzaW9uIGlzIHNldCB0byAwIGlmIHdlIGRvbid0IHBvaW50IHRvIGFueSBzcGVjaWZpYyB0aW1lLCBvdGhlcndpc2UgaXRcclxuICogZGVub3RlcyB0aW1lIHdlIGtub3cgaXQgZGlkbid0IGV4aXN0IGF0LlxyXG4gKi9cclxudmFyIE5vRG9jdW1lbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICB0c2xpYi5fX2V4dGVuZHMoTm9Eb2N1bWVudCwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIE5vRG9jdW1lbnQoa2V5LCB2ZXJzaW9uLCBvcHRpb25zKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywga2V5LCB2ZXJzaW9uKSB8fCB0aGlzO1xyXG4gICAgICAgIF90aGlzLmhhc0NvbW1pdHRlZE11dGF0aW9ucyA9ICEhKG9wdGlvbnMgJiYgb3B0aW9ucy5oYXNDb21taXR0ZWRNdXRhdGlvbnMpO1xyXG4gICAgICAgIHJldHVybiBfdGhpcztcclxuICAgIH1cclxuICAgIE5vRG9jdW1lbnQucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBcIk5vRG9jdW1lbnQoXCIgKyB0aGlzLmtleSArIFwiLCBcIiArIHRoaXMudmVyc2lvbiArIFwiKVwiO1xyXG4gICAgfTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOb0RvY3VtZW50LnByb3RvdHlwZSwgXCJoYXNQZW5kaW5nV3JpdGVzXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaGFzQ29tbWl0dGVkTXV0YXRpb25zO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgTm9Eb2N1bWVudC5wcm90b3R5cGUuaXNFcXVhbCA9IGZ1bmN0aW9uIChvdGhlcikge1xyXG4gICAgICAgIHJldHVybiAob3RoZXIgaW5zdGFuY2VvZiBOb0RvY3VtZW50ICYmXHJcbiAgICAgICAgICAgIG90aGVyLmhhc0NvbW1pdHRlZE11dGF0aW9ucyA9PT0gdGhpcy5oYXNDb21taXR0ZWRNdXRhdGlvbnMgJiZcclxuICAgICAgICAgICAgb3RoZXIudmVyc2lvbi5pc0VxdWFsKHRoaXMudmVyc2lvbikgJiZcclxuICAgICAgICAgICAgb3RoZXIua2V5LmlzRXF1YWwodGhpcy5rZXkpKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gTm9Eb2N1bWVudDtcclxufShNYXliZURvY3VtZW50KSk7XHJcbi8qKlxyXG4gKiBBIGNsYXNzIHJlcHJlc2VudGluZyBhbiBleGlzdGluZyBkb2N1bWVudCB3aG9zZSBkYXRhIGlzIHVua25vd24gKGUuZy4gYVxyXG4gKiBkb2N1bWVudCB0aGF0IHdhcyB1cGRhdGVkIHdpdGhvdXQgYSBrbm93biBiYXNlIGRvY3VtZW50KS5cclxuICovXHJcbnZhciBVbmtub3duRG9jdW1lbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICB0c2xpYi5fX2V4dGVuZHMoVW5rbm93bkRvY3VtZW50LCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gVW5rbm93bkRvY3VtZW50KCkge1xyXG4gICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcclxuICAgIH1cclxuICAgIFVua25vd25Eb2N1bWVudC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIFwiVW5rbm93bkRvY3VtZW50KFwiICsgdGhpcy5rZXkgKyBcIiwgXCIgKyB0aGlzLnZlcnNpb24gKyBcIilcIjtcclxuICAgIH07XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVW5rbm93bkRvY3VtZW50LnByb3RvdHlwZSwgXCJoYXNQZW5kaW5nV3JpdGVzXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBVbmtub3duRG9jdW1lbnQucHJvdG90eXBlLmlzRXF1YWwgPSBmdW5jdGlvbiAob3RoZXIpIHtcclxuICAgICAgICByZXR1cm4gKG90aGVyIGluc3RhbmNlb2YgVW5rbm93bkRvY3VtZW50ICYmXHJcbiAgICAgICAgICAgIG90aGVyLnZlcnNpb24uaXNFcXVhbCh0aGlzLnZlcnNpb24pICYmXHJcbiAgICAgICAgICAgIG90aGVyLmtleS5pc0VxdWFsKHRoaXMua2V5KSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFVua25vd25Eb2N1bWVudDtcclxufShNYXliZURvY3VtZW50KSk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQSBtYXAgaW1wbGVtZW50YXRpb24gdGhhdCB1c2VzIG9iamVjdHMgYXMga2V5cy4gT2JqZWN0cyBtdXN0IGltcGxlbWVudCB0aGVcclxuICogRXF1YXRhYmxlIGludGVyZmFjZSBhbmQgbXVzdCBiZSBpbW11dGFibGUuIEVudHJpZXMgaW4gdGhlIG1hcCBhcmUgc3RvcmVkXHJcbiAqIHRvZ2V0aGVyIHdpdGggdGhlIGtleSBiZWluZyBwcm9kdWNlZCBmcm9tIHRoZSBtYXBLZXlGbi4gVGhpcyBtYXBcclxuICogYXV0b21hdGljYWxseSBoYW5kbGVzIGNvbGxpc2lvbnMgb2Yga2V5cy5cclxuICovXHJcbnZhciBPYmplY3RNYXAgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBPYmplY3RNYXAobWFwS2V5Rm4pIHtcclxuICAgICAgICB0aGlzLm1hcEtleUZuID0gbWFwS2V5Rm47XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVGhlIGlubmVyIG1hcCBmb3IgYSBrZXkgLT4gdmFsdWUgcGFpci4gRHVlIHRvIHRoZSBwb3NzaWJpbGl0eSBvZlxyXG4gICAgICAgICAqIGNvbGxpc2lvbnMgd2Uga2VlcCBhIGxpc3Qgb2YgZW50cmllcyB0aGF0IHdlIGRvIGEgbGluZWFyIHNlYXJjaCB0aHJvdWdoXHJcbiAgICAgICAgICogdG8gZmluZCBhbiBhY3R1YWwgbWF0Y2guIE5vdGUgdGhhdCBjb2xsaXNpb25zIHNob3VsZCBiZSByYXJlLCBzbyB3ZSBzdGlsbFxyXG4gICAgICAgICAqIGV4cGVjdCBuZWFyIGNvbnN0YW50IHRpbWUgbG9va3VwcyBpbiBwcmFjdGljZS5cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLmlubmVyID0ge307XHJcbiAgICB9XHJcbiAgICAvKiogR2V0IGEgdmFsdWUgZm9yIHRoaXMga2V5LCBvciB1bmRlZmluZWQgaWYgaXQgZG9lcyBub3QgZXhpc3QuICovXHJcbiAgICBPYmplY3RNYXAucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICB2YXIgaWQgPSB0aGlzLm1hcEtleUZuKGtleSk7XHJcbiAgICAgICAgdmFyIG1hdGNoZXMgPSB0aGlzLmlubmVyW2lkXTtcclxuICAgICAgICBpZiAobWF0Y2hlcyA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgbWF0Y2hlc18xID0gbWF0Y2hlczsgX2kgPCBtYXRjaGVzXzEubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBfYSA9IG1hdGNoZXNfMVtfaV0sIG90aGVyS2V5ID0gX2FbMF0sIHZhbHVlID0gX2FbMV07XHJcbiAgICAgICAgICAgIGlmIChvdGhlcktleS5pc0VxdWFsKGtleSkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgfTtcclxuICAgIE9iamVjdE1hcC5wcm90b3R5cGUuaGFzID0gZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldChrZXkpICE9PSB1bmRlZmluZWQ7XHJcbiAgICB9O1xyXG4gICAgLyoqIFB1dCB0aGlzIGtleSBhbmQgdmFsdWUgaW4gdGhlIG1hcC4gKi9cclxuICAgIE9iamVjdE1hcC5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcclxuICAgICAgICB2YXIgaWQgPSB0aGlzLm1hcEtleUZuKGtleSk7XHJcbiAgICAgICAgdmFyIG1hdGNoZXMgPSB0aGlzLmlubmVyW2lkXTtcclxuICAgICAgICBpZiAobWF0Y2hlcyA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaW5uZXJbaWRdID0gW1trZXksIHZhbHVlXV07XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXRjaGVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmIChtYXRjaGVzW2ldWzBdLmlzRXF1YWwoa2V5KSkge1xyXG4gICAgICAgICAgICAgICAgbWF0Y2hlc1tpXSA9IFtrZXksIHZhbHVlXTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBtYXRjaGVzLnB1c2goW2tleSwgdmFsdWVdKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJlbW92ZSB0aGlzIGtleSBmcm9tIHRoZSBtYXAuIFJldHVybnMgYSBib29sZWFuIGlmIGFueXRoaW5nIHdhcyBkZWxldGVkLlxyXG4gICAgICovXHJcbiAgICBPYmplY3RNYXAucHJvdG90eXBlLmRlbGV0ZSA9IGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICB2YXIgaWQgPSB0aGlzLm1hcEtleUZuKGtleSk7XHJcbiAgICAgICAgdmFyIG1hdGNoZXMgPSB0aGlzLmlubmVyW2lkXTtcclxuICAgICAgICBpZiAobWF0Y2hlcyA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXRjaGVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmIChtYXRjaGVzW2ldWzBdLmlzRXF1YWwoa2V5KSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKG1hdGNoZXMubGVuZ3RoID09PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMuaW5uZXJbaWRdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWF0Y2hlcy5zcGxpY2UoaSwgMSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9O1xyXG4gICAgT2JqZWN0TWFwLnByb3RvdHlwZS5mb3JFYWNoID0gZnVuY3Rpb24gKGZuKSB7XHJcbiAgICAgICAgZm9yRWFjaCh0aGlzLmlubmVyLCBmdW5jdGlvbiAoXywgZW50cmllcykge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGVudHJpZXNfMSA9IGVudHJpZXM7IF9pIDwgZW50cmllc18xLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIF9hID0gZW50cmllc18xW19pXSwgayA9IF9hWzBdLCB2ID0gX2FbMV07XHJcbiAgICAgICAgICAgICAgICBmbihrLCB2KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIE9iamVjdE1hcC5wcm90b3R5cGUuaXNFbXB0eSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gaXNFbXB0eSh0aGlzLmlubmVyKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gT2JqZWN0TWFwO1xyXG59KCkpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEFuIGluLW1lbW9yeSBidWZmZXIgb2YgZW50cmllcyB0byBiZSB3cml0dGVuIHRvIGEgUmVtb3RlRG9jdW1lbnRDYWNoZS5cclxuICogSXQgY2FuIGJlIHVzZWQgdG8gYmF0Y2ggdXAgYSBzZXQgb2YgY2hhbmdlcyB0byBiZSB3cml0dGVuIHRvIHRoZSBjYWNoZSwgYnV0XHJcbiAqIGFkZGl0aW9uYWxseSBzdXBwb3J0cyByZWFkaW5nIGVudHJpZXMgYmFjayB3aXRoIHRoZSBgZ2V0RW50cnkoKWAgbWV0aG9kLFxyXG4gKiBmYWxsaW5nIGJhY2sgdG8gdGhlIHVuZGVybHlpbmcgUmVtb3RlRG9jdW1lbnRDYWNoZSBpZiBubyBlbnRyeSBpc1xyXG4gKiBidWZmZXJlZC5cclxuICpcclxuICogRW50cmllcyBhZGRlZCB0byB0aGUgY2FjaGUgKm11c3QqIGJlIHJlYWQgZmlyc3QuIFRoaXMgaXMgdG8gZmFjaWxpdGF0ZVxyXG4gKiBjYWxjdWxhdGluZyB0aGUgc2l6ZSBkZWx0YSBvZiB0aGUgcGVuZGluZyBjaGFuZ2VzLlxyXG4gKlxyXG4gKiBQT1JUSU5HIE5PVEU6IFRoaXMgY2xhc3Mgd2FzIGltcGxlbWVudGVkIHRoZW4gcmVtb3ZlZCBmcm9tIG90aGVyIHBsYXRmb3Jtcy5cclxuICogSWYgYnl0ZS1jb3VudGluZyBlbmRzIHVwIGJlaW5nIG5lZWRlZCBvbiB0aGUgb3RoZXIgcGxhdGZvcm1zLCBjb25zaWRlclxyXG4gKiBwb3J0aW5nIHRoaXMgY2xhc3MgYXMgcGFydCBvZiB0aGF0IGltcGxlbWVudGF0aW9uIHdvcmsuXHJcbiAqL1xyXG52YXIgUmVtb3RlRG9jdW1lbnRDaGFuZ2VCdWZmZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBSZW1vdGVEb2N1bWVudENoYW5nZUJ1ZmZlcigpIHtcclxuICAgICAgICAvLyBBIG1hcHBpbmcgb2YgZG9jdW1lbnQga2V5IHRvIHRoZSBuZXcgY2FjaGUgZW50cnkgdGhhdCBzaG91bGQgYmUgd3JpdHRlbiAob3IgbnVsbCBpZiBhbnlcclxuICAgICAgICAvLyBleGlzdGluZyBjYWNoZSBlbnRyeSBzaG91bGQgYmUgcmVtb3ZlZCkuXHJcbiAgICAgICAgdGhpcy5jaGFuZ2VzID0gbmV3IE9iamVjdE1hcChmdW5jdGlvbiAoa2V5KSB7IHJldHVybiBrZXkudG9TdHJpbmcoKTsgfSk7XHJcbiAgICAgICAgdGhpcy5jaGFuZ2VzQXBwbGllZCA9IGZhbHNlO1xyXG4gICAgfVxyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFJlbW90ZURvY3VtZW50Q2hhbmdlQnVmZmVyLnByb3RvdHlwZSwgXCJyZWFkVGltZVwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGFzc2VydCh0aGlzLl9yZWFkVGltZSAhPT0gdW5kZWZpbmVkLCAnUmVhZCB0aW1lIGlzIG5vdCBzZXQuIEFsbCByZW1vdmVFbnRyeSgpIGNhbGxzIG11c3QgaW5jbHVkZSBhIHJlYWRUaW1lIGlmIGB0cmFja1JlbW92YWxzYCBpcyB1c2VkLicpO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fcmVhZFRpbWU7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgICAgICAvLyBSaWdodCBub3cgKGZvciBzaW1wbGljaXR5KSB3ZSBqdXN0IHRyYWNrIGEgc2luZ2xlIHJlYWRUaW1lIGZvciBhbGwgdGhlXHJcbiAgICAgICAgICAgIC8vIGFkZGVkIGVudHJpZXMgc2luY2Ugd2UgZXhwZWN0IHRoZW0gdG8gYWxsIGJlIHRoZSBzYW1lLCBidXQgd2UgY291bGRcclxuICAgICAgICAgICAgLy8gcmV3b3JrIHRvIHN0b3JlIHBlci1lbnRyeSByZWFkVGltZXMgaWYgbmVjZXNzYXJ5LlxyXG4gICAgICAgICAgICBhc3NlcnQodGhpcy5fcmVhZFRpbWUgPT09IHVuZGVmaW5lZCB8fCB0aGlzLl9yZWFkVGltZS5pc0VxdWFsKHZhbHVlKSwgJ0FsbCBjaGFuZ2VzIGluIGEgUmVtb3RlRG9jdW1lbnRDaGFuZ2VCdWZmZXIgbXVzdCBoYXZlIHRoZSBzYW1lIHJlYWQgdGltZScpO1xyXG4gICAgICAgICAgICB0aGlzLl9yZWFkVGltZSA9IHZhbHVlO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgLyoqXHJcbiAgICAgKiBCdWZmZXJzIGEgYFJlbW90ZURvY3VtZW50Q2FjaGUuYWRkRW50cnkoKWAgY2FsbC5cclxuICAgICAqXHJcbiAgICAgKiBZb3UgY2FuIG9ubHkgbW9kaWZ5IGRvY3VtZW50cyB0aGF0IGhhdmUgYWxyZWFkeSBiZWVuIHJldHJpZXZlZCB2aWFcclxuICAgICAqIGBnZXRFbnRyeSgpL2dldEVudHJpZXMoKWAgKGVuZm9yY2VkIHZpYSBJbmRleGVkRGJzIGBhcHBseSgpYCkuXHJcbiAgICAgKi9cclxuICAgIFJlbW90ZURvY3VtZW50Q2hhbmdlQnVmZmVyLnByb3RvdHlwZS5hZGRFbnRyeSA9IGZ1bmN0aW9uIChtYXliZURvY3VtZW50LCByZWFkVGltZSkge1xyXG4gICAgICAgIHRoaXMuYXNzZXJ0Tm90QXBwbGllZCgpO1xyXG4gICAgICAgIHRoaXMucmVhZFRpbWUgPSByZWFkVGltZTtcclxuICAgICAgICB0aGlzLmNoYW5nZXMuc2V0KG1heWJlRG9jdW1lbnQua2V5LCBtYXliZURvY3VtZW50KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEJ1ZmZlcnMgYSBgUmVtb3RlRG9jdW1lbnRDYWNoZS5yZW1vdmVFbnRyeSgpYCBjYWxsLlxyXG4gICAgICpcclxuICAgICAqIFlvdSBjYW4gb25seSByZW1vdmUgZG9jdW1lbnRzIHRoYXQgaGF2ZSBhbHJlYWR5IGJlZW4gcmV0cmlldmVkIHZpYVxyXG4gICAgICogYGdldEVudHJ5KCkvZ2V0RW50cmllcygpYCAoZW5mb3JjZWQgdmlhIEluZGV4ZWREYnMgYGFwcGx5KClgKS5cclxuICAgICAqL1xyXG4gICAgUmVtb3RlRG9jdW1lbnRDaGFuZ2VCdWZmZXIucHJvdG90eXBlLnJlbW92ZUVudHJ5ID0gZnVuY3Rpb24gKGtleSwgcmVhZFRpbWUpIHtcclxuICAgICAgICB0aGlzLmFzc2VydE5vdEFwcGxpZWQoKTtcclxuICAgICAgICBpZiAocmVhZFRpbWUpIHtcclxuICAgICAgICAgICAgdGhpcy5yZWFkVGltZSA9IHJlYWRUaW1lO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmNoYW5nZXMuc2V0KGtleSwgbnVsbCk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBMb29rcyB1cCBhbiBlbnRyeSBpbiB0aGUgY2FjaGUuIFRoZSBidWZmZXJlZCBjaGFuZ2VzIHdpbGwgZmlyc3QgYmUgY2hlY2tlZCxcclxuICAgICAqIGFuZCBpZiBubyBidWZmZXJlZCBjaGFuZ2UgYXBwbGllcywgdGhpcyB3aWxsIGZvcndhcmQgdG9cclxuICAgICAqIGBSZW1vdGVEb2N1bWVudENhY2hlLmdldEVudHJ5KClgLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB0cmFuc2FjdGlvbiBUaGUgdHJhbnNhY3Rpb24gaW4gd2hpY2ggdG8gcGVyZm9ybSBhbnkgcGVyc2lzdGVuY2VcclxuICAgICAqICAgICBvcGVyYXRpb25zLlxyXG4gICAgICogQHBhcmFtIGRvY3VtZW50S2V5IFRoZSBrZXkgb2YgdGhlIGVudHJ5IHRvIGxvb2sgdXAuXHJcbiAgICAgKiBAcmV0dXJuIFRoZSBjYWNoZWQgRG9jdW1lbnQgb3IgTm9Eb2N1bWVudCBlbnRyeSwgb3IgbnVsbCBpZiB3ZSBoYXZlIG5vdGhpbmdcclxuICAgICAqIGNhY2hlZC5cclxuICAgICAqL1xyXG4gICAgUmVtb3RlRG9jdW1lbnRDaGFuZ2VCdWZmZXIucHJvdG90eXBlLmdldEVudHJ5ID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCBkb2N1bWVudEtleSkge1xyXG4gICAgICAgIHRoaXMuYXNzZXJ0Tm90QXBwbGllZCgpO1xyXG4gICAgICAgIHZhciBidWZmZXJlZEVudHJ5ID0gdGhpcy5jaGFuZ2VzLmdldChkb2N1bWVudEtleSk7XHJcbiAgICAgICAgaWYgKGJ1ZmZlcmVkRW50cnkgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoYnVmZmVyZWRFbnRyeSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRGcm9tQ2FjaGUodHJhbnNhY3Rpb24sIGRvY3VtZW50S2V5KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBMb29rcyB1cCBzZXZlcmFsIGVudHJpZXMgaW4gdGhlIGNhY2hlLCBmb3J3YXJkaW5nIHRvXHJcbiAgICAgKiBgUmVtb3RlRG9jdW1lbnRDYWNoZS5nZXRFbnRyeSgpYC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gdHJhbnNhY3Rpb24gVGhlIHRyYW5zYWN0aW9uIGluIHdoaWNoIHRvIHBlcmZvcm0gYW55IHBlcnNpc3RlbmNlXHJcbiAgICAgKiAgICAgb3BlcmF0aW9ucy5cclxuICAgICAqIEBwYXJhbSBkb2N1bWVudEtleXMgVGhlIGtleXMgb2YgdGhlIGVudHJpZXMgdG8gbG9vayB1cC5cclxuICAgICAqIEByZXR1cm4gQSBtYXAgb2YgY2FjaGVkIGBEb2N1bWVudGBzIG9yIGBOb0RvY3VtZW50YHMsIGluZGV4ZWQgYnkga2V5LiBJZiBhblxyXG4gICAgICogICAgIGVudHJ5IGNhbm5vdCBiZSBmb3VuZCwgdGhlIGNvcnJlc3BvbmRpbmcga2V5IHdpbGwgYmUgbWFwcGVkIHRvIGEgbnVsbFxyXG4gICAgICogICAgIHZhbHVlLlxyXG4gICAgICovXHJcbiAgICBSZW1vdGVEb2N1bWVudENoYW5nZUJ1ZmZlci5wcm90b3R5cGUuZ2V0RW50cmllcyA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwgZG9jdW1lbnRLZXlzKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0QWxsRnJvbUNhY2hlKHRyYW5zYWN0aW9uLCBkb2N1bWVudEtleXMpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQXBwbGllcyBidWZmZXJlZCBjaGFuZ2VzIHRvIHRoZSB1bmRlcmx5aW5nIFJlbW90ZURvY3VtZW50Q2FjaGUsIHVzaW5nXHJcbiAgICAgKiB0aGUgcHJvdmlkZWQgdHJhbnNhY3Rpb24uXHJcbiAgICAgKi9cclxuICAgIFJlbW90ZURvY3VtZW50Q2hhbmdlQnVmZmVyLnByb3RvdHlwZS5hcHBseSA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbikge1xyXG4gICAgICAgIHRoaXMuYXNzZXJ0Tm90QXBwbGllZCgpO1xyXG4gICAgICAgIHRoaXMuY2hhbmdlc0FwcGxpZWQgPSB0cnVlO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmFwcGx5Q2hhbmdlcyh0cmFuc2FjdGlvbik7XHJcbiAgICB9O1xyXG4gICAgLyoqIEhlbHBlciB0byBhc3NlcnQgdGhpcy5jaGFuZ2VzIGlzIG5vdCBudWxsICAqL1xyXG4gICAgUmVtb3RlRG9jdW1lbnRDaGFuZ2VCdWZmZXIucHJvdG90eXBlLmFzc2VydE5vdEFwcGxpZWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgYXNzZXJ0KCF0aGlzLmNoYW5nZXNBcHBsaWVkLCAnQ2hhbmdlcyBoYXZlIGFscmVhZHkgYmVlbiBhcHBsaWVkLicpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBSZW1vdGVEb2N1bWVudENoYW5nZUJ1ZmZlcjtcclxufSgpKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnZhciBJbmRleGVkRGJSZW1vdGVEb2N1bWVudENhY2hlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0ge0xvY2FsU2VyaWFsaXplcn0gc2VyaWFsaXplciBUaGUgZG9jdW1lbnQgc2VyaWFsaXplci5cclxuICAgICAqIEBwYXJhbSB7SW5kZXhNYW5hZ2VyfSBpbmRleE1hbmFnZXIgVGhlIHF1ZXJ5IGluZGV4ZXMgdGhhdCBuZWVkIHRvIGJlIG1haW50YWluZWQuXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIEluZGV4ZWREYlJlbW90ZURvY3VtZW50Q2FjaGUoc2VyaWFsaXplciwgaW5kZXhNYW5hZ2VyKSB7XHJcbiAgICAgICAgdGhpcy5zZXJpYWxpemVyID0gc2VyaWFsaXplcjtcclxuICAgICAgICB0aGlzLmluZGV4TWFuYWdlciA9IGluZGV4TWFuYWdlcjtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQWRkcyB0aGUgc3VwcGxpZWQgZW50cmllcyB0byB0aGUgY2FjaGUuXHJcbiAgICAgKlxyXG4gICAgICogQWxsIGNhbGxzIG9mIGBhZGRFbnRyeWAgYXJlIHJlcXVpcmVkIHRvIGdvIHRocm91Z2ggdGhlIFJlbW90ZURvY3VtZW50Q2hhbmdlQnVmZmVyXHJcbiAgICAgKiByZXR1cm5lZCBieSBgbmV3Q2hhbmdlQnVmZmVyKClgIHRvIGVuc3VyZSBwcm9wZXIgYWNjb3VudGluZyBvZiBtZXRhZGF0YS5cclxuICAgICAqL1xyXG4gICAgSW5kZXhlZERiUmVtb3RlRG9jdW1lbnRDYWNoZS5wcm90b3R5cGUuYWRkRW50cnkgPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24sIGtleSwgZG9jKSB7XHJcbiAgICAgICAgdmFyIGRvY3VtZW50U3RvcmUgPSByZW1vdGVEb2N1bWVudHNTdG9yZSh0cmFuc2FjdGlvbik7XHJcbiAgICAgICAgcmV0dXJuIGRvY3VtZW50U3RvcmUucHV0KGRiS2V5KGtleSksIGRvYyk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZW1vdmVzIGEgZG9jdW1lbnQgZnJvbSB0aGUgY2FjaGUuXHJcbiAgICAgKlxyXG4gICAgICogQWxsIGNhbGxzIG9mIGByZW1vdmVFbnRyeWAgIGFyZSByZXF1aXJlZCB0byBnbyB0aHJvdWdoIHRoZSBSZW1vdGVEb2N1bWVudENoYW5nZUJ1ZmZlclxyXG4gICAgICogcmV0dXJuZWQgYnkgYG5ld0NoYW5nZUJ1ZmZlcigpYCB0byBlbnN1cmUgcHJvcGVyIGFjY291bnRpbmcgb2YgbWV0YWRhdGEuXHJcbiAgICAgKi9cclxuICAgIEluZGV4ZWREYlJlbW90ZURvY3VtZW50Q2FjaGUucHJvdG90eXBlLnJlbW92ZUVudHJ5ID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCBkb2N1bWVudEtleSkge1xyXG4gICAgICAgIHZhciBzdG9yZSA9IHJlbW90ZURvY3VtZW50c1N0b3JlKHRyYW5zYWN0aW9uKTtcclxuICAgICAgICB2YXIga2V5ID0gZGJLZXkoZG9jdW1lbnRLZXkpO1xyXG4gICAgICAgIHJldHVybiBzdG9yZS5kZWxldGUoa2V5KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFVwZGF0ZXMgdGhlIGN1cnJlbnQgY2FjaGUgc2l6ZS5cclxuICAgICAqXHJcbiAgICAgKiBDYWxsZXJzIHRvIGBhZGRFbnRyeSgpYCBhbmQgYHJlbW92ZUVudHJ5KClgICptdXN0KiBjYWxsIHRoaXMgYWZ0ZXJ3YXJkcyB0byB1cGRhdGUgdGhlXHJcbiAgICAgKiBjYWNoZSdzIG1ldGFkYXRhLlxyXG4gICAgICovXHJcbiAgICBJbmRleGVkRGJSZW1vdGVEb2N1bWVudENhY2hlLnByb3RvdHlwZS51cGRhdGVNZXRhZGF0YSA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwgc2l6ZURlbHRhKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRNZXRhZGF0YSh0cmFuc2FjdGlvbikubmV4dChmdW5jdGlvbiAobWV0YWRhdGEpIHtcclxuICAgICAgICAgICAgbWV0YWRhdGEuYnl0ZVNpemUgKz0gc2l6ZURlbHRhO1xyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXMuc2V0TWV0YWRhdGEodHJhbnNhY3Rpb24sIG1ldGFkYXRhKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBJbmRleGVkRGJSZW1vdGVEb2N1bWVudENhY2hlLnByb3RvdHlwZS5nZXRFbnRyeSA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwgZG9jdW1lbnRLZXkpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiByZW1vdGVEb2N1bWVudHNTdG9yZSh0cmFuc2FjdGlvbilcclxuICAgICAgICAgICAgLmdldChkYktleShkb2N1bWVudEtleSkpXHJcbiAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uIChkYlJlbW90ZURvYykge1xyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXMubWF5YmVEZWNvZGVEb2N1bWVudChkYlJlbW90ZURvYyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBMb29rcyB1cCBhbiBlbnRyeSBpbiB0aGUgY2FjaGUuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGRvY3VtZW50S2V5IFRoZSBrZXkgb2YgdGhlIGVudHJ5IHRvIGxvb2sgdXAuXHJcbiAgICAgKiBAcmV0dXJuIFRoZSBjYWNoZWQgTWF5YmVEb2N1bWVudCBlbnRyeSBhbmQgaXRzIHNpemUsIG9yIG51bGwgaWYgd2UgaGF2ZSBub3RoaW5nIGNhY2hlZC5cclxuICAgICAqL1xyXG4gICAgSW5kZXhlZERiUmVtb3RlRG9jdW1lbnRDYWNoZS5wcm90b3R5cGUuZ2V0U2l6ZWRFbnRyeSA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwgZG9jdW1lbnRLZXkpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiByZW1vdGVEb2N1bWVudHNTdG9yZSh0cmFuc2FjdGlvbilcclxuICAgICAgICAgICAgLmdldChkYktleShkb2N1bWVudEtleSkpXHJcbiAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uIChkYlJlbW90ZURvYykge1xyXG4gICAgICAgICAgICB2YXIgZG9jID0gX3RoaXMubWF5YmVEZWNvZGVEb2N1bWVudChkYlJlbW90ZURvYyk7XHJcbiAgICAgICAgICAgIHJldHVybiBkb2NcclxuICAgICAgICAgICAgICAgID8ge1xyXG4gICAgICAgICAgICAgICAgICAgIG1heWJlRG9jdW1lbnQ6IGRvYyxcclxuICAgICAgICAgICAgICAgICAgICBzaXplOiBkYkRvY3VtZW50U2l6ZShkYlJlbW90ZURvYylcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIDogbnVsbDtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBJbmRleGVkRGJSZW1vdGVEb2N1bWVudENhY2hlLnByb3RvdHlwZS5nZXRFbnRyaWVzID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCBkb2N1bWVudEtleXMpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhciByZXN1bHRzID0gbnVsbGFibGVNYXliZURvY3VtZW50TWFwKCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZm9yRWFjaERiRW50cnkodHJhbnNhY3Rpb24sIGRvY3VtZW50S2V5cywgZnVuY3Rpb24gKGtleSwgZGJSZW1vdGVEb2MpIHtcclxuICAgICAgICAgICAgdmFyIGRvYyA9IF90aGlzLm1heWJlRGVjb2RlRG9jdW1lbnQoZGJSZW1vdGVEb2MpO1xyXG4gICAgICAgICAgICByZXN1bHRzID0gcmVzdWx0cy5pbnNlcnQoa2V5LCBkb2MpO1xyXG4gICAgICAgIH0pLm5leHQoZnVuY3Rpb24gKCkgeyByZXR1cm4gcmVzdWx0czsgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBMb29rcyB1cCBzZXZlcmFsIGVudHJpZXMgaW4gdGhlIGNhY2hlLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBkb2N1bWVudEtleXMgVGhlIHNldCBvZiBrZXlzIGVudHJpZXMgdG8gbG9vayB1cC5cclxuICAgICAqIEByZXR1cm4gQSBtYXAgb2YgTWF5YmVEb2N1bWVudHMgaW5kZXhlZCBieSBrZXkgKGlmIGEgZG9jdW1lbnQgY2Fubm90IGJlXHJcbiAgICAgKiAgICAgZm91bmQsIHRoZSBrZXkgd2lsbCBiZSBtYXBwZWQgdG8gbnVsbCkgYW5kIGEgbWFwIG9mIHNpemVzIGluZGV4ZWQgYnlcclxuICAgICAqICAgICBrZXkgKHplcm8gaWYgdGhlIGtleSBjYW5ub3QgYmUgZm91bmQpLlxyXG4gICAgICovXHJcbiAgICBJbmRleGVkRGJSZW1vdGVEb2N1bWVudENhY2hlLnByb3RvdHlwZS5nZXRTaXplZEVudHJpZXMgPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24sIGRvY3VtZW50S2V5cykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIHJlc3VsdHMgPSBudWxsYWJsZU1heWJlRG9jdW1lbnRNYXAoKTtcclxuICAgICAgICB2YXIgc2l6ZU1hcCA9IG5ldyBTb3J0ZWRNYXAoRG9jdW1lbnRLZXkuY29tcGFyYXRvcik7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZm9yRWFjaERiRW50cnkodHJhbnNhY3Rpb24sIGRvY3VtZW50S2V5cywgZnVuY3Rpb24gKGtleSwgZGJSZW1vdGVEb2MpIHtcclxuICAgICAgICAgICAgdmFyIGRvYyA9IF90aGlzLm1heWJlRGVjb2RlRG9jdW1lbnQoZGJSZW1vdGVEb2MpO1xyXG4gICAgICAgICAgICBpZiAoZG9jKSB7XHJcbiAgICAgICAgICAgICAgICByZXN1bHRzID0gcmVzdWx0cy5pbnNlcnQoa2V5LCBkb2MpO1xyXG4gICAgICAgICAgICAgICAgc2l6ZU1hcCA9IHNpemVNYXAuaW5zZXJ0KGtleSwgZGJEb2N1bWVudFNpemUoZGJSZW1vdGVEb2MpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJlc3VsdHMgPSByZXN1bHRzLmluc2VydChrZXksIG51bGwpO1xyXG4gICAgICAgICAgICAgICAgc2l6ZU1hcCA9IHNpemVNYXAuaW5zZXJ0KGtleSwgMCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KS5uZXh0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHsgbWF5YmVEb2N1bWVudHM6IHJlc3VsdHMsIHNpemVNYXA6IHNpemVNYXAgfTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBJbmRleGVkRGJSZW1vdGVEb2N1bWVudENhY2hlLnByb3RvdHlwZS5mb3JFYWNoRGJFbnRyeSA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwgZG9jdW1lbnRLZXlzLCBjYWxsYmFjaykge1xyXG4gICAgICAgIGlmIChkb2N1bWVudEtleXMuaXNFbXB0eSgpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgcmFuZ2UgPSBJREJLZXlSYW5nZS5ib3VuZChkb2N1bWVudEtleXMuZmlyc3QoKS5wYXRoLnRvQXJyYXkoKSwgZG9jdW1lbnRLZXlzLmxhc3QoKS5wYXRoLnRvQXJyYXkoKSk7XHJcbiAgICAgICAgdmFyIGtleUl0ZXIgPSBkb2N1bWVudEtleXMuZ2V0SXRlcmF0b3IoKTtcclxuICAgICAgICB2YXIgbmV4dEtleSA9IGtleUl0ZXIuZ2V0TmV4dCgpO1xyXG4gICAgICAgIHJldHVybiByZW1vdGVEb2N1bWVudHNTdG9yZSh0cmFuc2FjdGlvbilcclxuICAgICAgICAgICAgLml0ZXJhdGUoeyByYW5nZTogcmFuZ2UgfSwgZnVuY3Rpb24gKHBvdGVudGlhbEtleVJhdywgZGJSZW1vdGVEb2MsIGNvbnRyb2wpIHtcclxuICAgICAgICAgICAgdmFyIHBvdGVudGlhbEtleSA9IERvY3VtZW50S2V5LmZyb21TZWdtZW50cyhwb3RlbnRpYWxLZXlSYXcpO1xyXG4gICAgICAgICAgICAvLyBHbyB0aHJvdWdoIGtleXMgbm90IGZvdW5kIGluIGNhY2hlLlxyXG4gICAgICAgICAgICB3aGlsZSAobmV4dEtleSAmJiBEb2N1bWVudEtleS5jb21wYXJhdG9yKG5leHRLZXksIHBvdGVudGlhbEtleSkgPCAwKSB7XHJcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhuZXh0S2V5LCBudWxsKTtcclxuICAgICAgICAgICAgICAgIG5leHRLZXkgPSBrZXlJdGVyLmdldE5leHQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAobmV4dEtleSAmJiBuZXh0S2V5LmlzRXF1YWwocG90ZW50aWFsS2V5KSkge1xyXG4gICAgICAgICAgICAgICAgLy8gS2V5IGZvdW5kIGluIGNhY2hlLlxyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2sobmV4dEtleSwgZGJSZW1vdGVEb2MpO1xyXG4gICAgICAgICAgICAgICAgbmV4dEtleSA9IGtleUl0ZXIuaGFzTmV4dCgpID8ga2V5SXRlci5nZXROZXh0KCkgOiBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIFNraXAgdG8gdGhlIG5leHQga2V5IChpZiB0aGVyZSBpcyBvbmUpLlxyXG4gICAgICAgICAgICBpZiAobmV4dEtleSkge1xyXG4gICAgICAgICAgICAgICAgY29udHJvbC5za2lwKG5leHRLZXkucGF0aC50b0FycmF5KCkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY29udHJvbC5kb25lKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAubmV4dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIC8vIFRoZSByZXN0IG9mIHRoZSBrZXlzIGFyZSBub3QgaW4gdGhlIGNhY2hlLiBPbmUgY2FzZSB3aGVyZSBgaXRlcmF0ZWBcclxuICAgICAgICAgICAgLy8gYWJvdmUgd29uJ3QgZ28gdGhyb3VnaCB0aGVtIGlzIHdoZW4gdGhlIGNhY2hlIGlzIGVtcHR5LlxyXG4gICAgICAgICAgICB3aGlsZSAobmV4dEtleSkge1xyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2sobmV4dEtleSwgbnVsbCk7XHJcbiAgICAgICAgICAgICAgICBuZXh0S2V5ID0ga2V5SXRlci5oYXNOZXh0KCkgPyBrZXlJdGVyLmdldE5leHQoKSA6IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBJbmRleGVkRGJSZW1vdGVEb2N1bWVudENhY2hlLnByb3RvdHlwZS5nZXREb2N1bWVudHNNYXRjaGluZ1F1ZXJ5ID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCBxdWVyeSwgc2luY2VSZWFkVGltZSkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgYXNzZXJ0KCFxdWVyeS5pc0NvbGxlY3Rpb25Hcm91cFF1ZXJ5KCksICdDb2xsZWN0aW9uR3JvdXAgcXVlcmllcyBzaG91bGQgYmUgaGFuZGxlZCBpbiBMb2NhbERvY3VtZW50c1ZpZXcnKTtcclxuICAgICAgICB2YXIgcmVzdWx0cyA9IGRvY3VtZW50TWFwKCk7XHJcbiAgICAgICAgdmFyIGltbWVkaWF0ZUNoaWxkcmVuUGF0aExlbmd0aCA9IHF1ZXJ5LnBhdGgubGVuZ3RoICsgMTtcclxuICAgICAgICB2YXIgaXRlcmF0aW9uT3B0aW9ucyA9IHt9O1xyXG4gICAgICAgIGlmIChzaW5jZVJlYWRUaW1lLmlzRXF1YWwoU25hcHNob3RWZXJzaW9uLk1JTikpIHtcclxuICAgICAgICAgICAgLy8gRG9jdW1lbnRzIGFyZSBvcmRlcmVkIGJ5IGtleSwgc28gd2UgY2FuIHVzZSBhIHByZWZpeCBzY2FuIHRvIG5hcnJvd1xyXG4gICAgICAgICAgICAvLyBkb3duIHRoZSBkb2N1bWVudHMgd2UgbmVlZCB0byBtYXRjaCB0aGUgcXVlcnkgYWdhaW5zdC5cclxuICAgICAgICAgICAgdmFyIHN0YXJ0S2V5ID0gcXVlcnkucGF0aC50b0FycmF5KCk7XHJcbiAgICAgICAgICAgIGl0ZXJhdGlvbk9wdGlvbnMucmFuZ2UgPSBJREJLZXlSYW5nZS5sb3dlckJvdW5kKHN0YXJ0S2V5KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIEV4ZWN1dGUgYW4gaW5kZXgtZnJlZSBxdWVyeSBhbmQgZmlsdGVyIGJ5IHJlYWQgdGltZS4gVGhpcyBpcyBzYWZlXHJcbiAgICAgICAgICAgIC8vIHNpbmNlIGFsbCBkb2N1bWVudCBjaGFuZ2VzIHRvIHF1ZXJpZXMgdGhhdCBoYXZlIGFcclxuICAgICAgICAgICAgLy8gbGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbiAoYHNpbmNlUmVhZFRpbWVgKSBoYXZlIGEgcmVhZCB0aW1lIHNldC5cclxuICAgICAgICAgICAgdmFyIGNvbGxlY3Rpb25LZXkgPSBxdWVyeS5wYXRoLnRvQXJyYXkoKTtcclxuICAgICAgICAgICAgdmFyIHJlYWRUaW1lS2V5ID0gdGhpcy5zZXJpYWxpemVyLnRvRGJUaW1lc3RhbXBLZXkoc2luY2VSZWFkVGltZSk7XHJcbiAgICAgICAgICAgIGl0ZXJhdGlvbk9wdGlvbnMucmFuZ2UgPSBJREJLZXlSYW5nZS5sb3dlckJvdW5kKFtjb2xsZWN0aW9uS2V5LCByZWFkVGltZUtleV0sIFxyXG4gICAgICAgICAgICAvKiBvcGVuPSAqLyB0cnVlKTtcclxuICAgICAgICAgICAgaXRlcmF0aW9uT3B0aW9ucy5pbmRleCA9IERiUmVtb3RlRG9jdW1lbnQuY29sbGVjdGlvblJlYWRUaW1lSW5kZXg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZW1vdGVEb2N1bWVudHNTdG9yZSh0cmFuc2FjdGlvbilcclxuICAgICAgICAgICAgLml0ZXJhdGUoaXRlcmF0aW9uT3B0aW9ucywgZnVuY3Rpb24gKGtleSwgZGJSZW1vdGVEb2MsIGNvbnRyb2wpIHtcclxuICAgICAgICAgICAgLy8gVGhlIHF1ZXJ5IGlzIGFjdHVhbGx5IHJldHVybmluZyBhbnkgcGF0aCB0aGF0IHN0YXJ0cyB3aXRoIHRoZSBxdWVyeVxyXG4gICAgICAgICAgICAvLyBwYXRoIHByZWZpeCB3aGljaCBtYXkgaW5jbHVkZSBkb2N1bWVudHMgaW4gc3ViY29sbGVjdGlvbnMuIEZvclxyXG4gICAgICAgICAgICAvLyBleGFtcGxlLCBhIHF1ZXJ5IG9uICdyb29tcycgd2lsbCByZXR1cm4gcm9vbXMvYWJjL21lc3NhZ2VzL3h5eCBidXQgd2VcclxuICAgICAgICAgICAgLy8gc2hvdWxkbid0IG1hdGNoIGl0LiBGaXggdGhpcyBieSBkaXNjYXJkaW5nIHJvd3Mgd2l0aCBkb2N1bWVudCBrZXlzXHJcbiAgICAgICAgICAgIC8vIG1vcmUgdGhhbiBvbmUgc2VnbWVudCBsb25nZXIgdGhhbiB0aGUgcXVlcnkgcGF0aC5cclxuICAgICAgICAgICAgaWYgKGtleS5sZW5ndGggIT09IGltbWVkaWF0ZUNoaWxkcmVuUGF0aExlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciBtYXliZURvYyA9IF90aGlzLnNlcmlhbGl6ZXIuZnJvbURiUmVtb3RlRG9jdW1lbnQoZGJSZW1vdGVEb2MpO1xyXG4gICAgICAgICAgICBpZiAoIXF1ZXJ5LnBhdGguaXNQcmVmaXhPZihtYXliZURvYy5rZXkucGF0aCkpIHtcclxuICAgICAgICAgICAgICAgIGNvbnRyb2wuZG9uZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKG1heWJlRG9jIGluc3RhbmNlb2YgRG9jdW1lbnQgJiYgcXVlcnkubWF0Y2hlcyhtYXliZURvYykpIHtcclxuICAgICAgICAgICAgICAgIHJlc3VsdHMgPSByZXN1bHRzLmluc2VydChtYXliZURvYy5rZXksIG1heWJlRG9jKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIHJlc3VsdHM7IH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0aGUgc2V0IG9mIGRvY3VtZW50cyB0aGF0IGhhdmUgYmVlbiB1cGRhdGVkIHNpbmNlIHRoZSBzcGVjaWZpZWQgcmVhZFxyXG4gICAgICogdGltZS5cclxuICAgICAqL1xyXG4gICAgLy8gUE9SVElORyBOT1RFOiBUaGlzIGlzIG9ubHkgdXNlZCBmb3IgbXVsdGktdGFiIHN5bmNocm9uaXphdGlvbi5cclxuICAgIEluZGV4ZWREYlJlbW90ZURvY3VtZW50Q2FjaGUucHJvdG90eXBlLmdldE5ld0RvY3VtZW50Q2hhbmdlcyA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwgc2luY2VSZWFkVGltZSkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIGNoYW5nZWREb2NzID0gbWF5YmVEb2N1bWVudE1hcCgpO1xyXG4gICAgICAgIHZhciBsYXN0UmVhZFRpbWUgPSB0aGlzLnNlcmlhbGl6ZXIudG9EYlRpbWVzdGFtcEtleShzaW5jZVJlYWRUaW1lKTtcclxuICAgICAgICB2YXIgZG9jdW1lbnRzU3RvcmUgPSByZW1vdGVEb2N1bWVudHNTdG9yZSh0cmFuc2FjdGlvbik7XHJcbiAgICAgICAgdmFyIHJhbmdlID0gSURCS2V5UmFuZ2UubG93ZXJCb3VuZChsYXN0UmVhZFRpbWUsIHRydWUpO1xyXG4gICAgICAgIHJldHVybiBkb2N1bWVudHNTdG9yZVxyXG4gICAgICAgICAgICAuaXRlcmF0ZSh7IGluZGV4OiBEYlJlbW90ZURvY3VtZW50LnJlYWRUaW1lSW5kZXgsIHJhbmdlOiByYW5nZSB9LCBmdW5jdGlvbiAoXywgZGJSZW1vdGVEb2MpIHtcclxuICAgICAgICAgICAgLy8gVW5saWtlIGBnZXRFbnRyeSgpYCBhbmQgb3RoZXJzLCBgZ2V0TmV3RG9jdW1lbnRDaGFuZ2VzKClgIHBhcnNlc1xyXG4gICAgICAgICAgICAvLyB0aGUgZG9jdW1lbnRzIGRpcmVjdGx5IHNpbmNlIHdlIHdhbnQgdG8ga2VlcCBzZW50aW5lbCBkZWxldGVzLlxyXG4gICAgICAgICAgICB2YXIgZG9jID0gX3RoaXMuc2VyaWFsaXplci5mcm9tRGJSZW1vdGVEb2N1bWVudChkYlJlbW90ZURvYyk7XHJcbiAgICAgICAgICAgIGNoYW5nZWREb2NzID0gY2hhbmdlZERvY3MuaW5zZXJ0KGRvYy5rZXksIGRvYyk7XHJcbiAgICAgICAgICAgIGxhc3RSZWFkVGltZSA9IGRiUmVtb3RlRG9jLnJlYWRUaW1lO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIGNoYW5nZWREb2NzOiBjaGFuZ2VkRG9jcyxcclxuICAgICAgICAgICAgICAgIHJlYWRUaW1lOiBfdGhpcy5zZXJpYWxpemVyLmZyb21EYlRpbWVzdGFtcEtleShsYXN0UmVhZFRpbWUpXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSBsYXN0IGRvY3VtZW50IHRoYXQgaGFzIGNoYW5nZWQsIGFzIHdlbGwgYXMgdGhlIHJlYWQgdGltZSBvZiB0aGVcclxuICAgICAqIGxhc3QgY2hhbmdlLiBJZiBubyBkb2N1bWVudCBoYXMgY2hhbmdlZCwgcmV0dXJucyBTbmFwc2hvdFZlcnNpb24uTUlOLlxyXG4gICAgICovXHJcbiAgICAvLyBQT1JUSU5HIE5PVEU6IFRoaXMgaXMgb25seSB1c2VkIGZvciBtdWx0aS10YWIgc3luY2hyb25pemF0aW9uLlxyXG4gICAgSW5kZXhlZERiUmVtb3RlRG9jdW1lbnRDYWNoZS5wcm90b3R5cGUuZ2V0TGFzdERvY3VtZW50Q2hhbmdlID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgZG9jdW1lbnRzU3RvcmUgPSByZW1vdGVEb2N1bWVudHNTdG9yZSh0cmFuc2FjdGlvbik7XHJcbiAgICAgICAgLy8gSWYgdGhlcmUgYXJlIG5vIGV4aXN0aW5nIGVudHJpZXMsIHdlIHJldHVybiBTbmFwc2hvdFZlcnNpb24uTUlOLlxyXG4gICAgICAgIHZhciByZWFkVGltZSA9IFNuYXBzaG90VmVyc2lvbi5NSU47XHJcbiAgICAgICAgdmFyIGNoYW5nZWREb2M7XHJcbiAgICAgICAgcmV0dXJuIGRvY3VtZW50c1N0b3JlXHJcbiAgICAgICAgICAgIC5pdGVyYXRlKHsgaW5kZXg6IERiUmVtb3RlRG9jdW1lbnQucmVhZFRpbWVJbmRleCwgcmV2ZXJzZTogdHJ1ZSB9LCBmdW5jdGlvbiAoa2V5LCBkYlJlbW90ZURvYywgY29udHJvbCkge1xyXG4gICAgICAgICAgICBjaGFuZ2VkRG9jID0gX3RoaXMuc2VyaWFsaXplci5mcm9tRGJSZW1vdGVEb2N1bWVudChkYlJlbW90ZURvYyk7XHJcbiAgICAgICAgICAgIGlmIChkYlJlbW90ZURvYy5yZWFkVGltZSkge1xyXG4gICAgICAgICAgICAgICAgcmVhZFRpbWUgPSBfdGhpcy5zZXJpYWxpemVyLmZyb21EYlRpbWVzdGFtcEtleShkYlJlbW90ZURvYy5yZWFkVGltZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29udHJvbC5kb25lKCk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4geyBjaGFuZ2VkRG9jOiBjaGFuZ2VkRG9jLCByZWFkVGltZTogcmVhZFRpbWUgfTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBJbmRleGVkRGJSZW1vdGVEb2N1bWVudENhY2hlLnByb3RvdHlwZS5uZXdDaGFuZ2VCdWZmZXIgPSBmdW5jdGlvbiAob3B0aW9ucykge1xyXG4gICAgICAgIHJldHVybiBuZXcgSW5kZXhlZERiUmVtb3RlRG9jdW1lbnRDYWNoZS5SZW1vdGVEb2N1bWVudENoYW5nZUJ1ZmZlcih0aGlzLCAhIW9wdGlvbnMgJiYgb3B0aW9ucy50cmFja1JlbW92YWxzKTtcclxuICAgIH07XHJcbiAgICBJbmRleGVkRGJSZW1vdGVEb2N1bWVudENhY2hlLnByb3RvdHlwZS5nZXRTaXplID0gZnVuY3Rpb24gKHR4bikge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldE1ldGFkYXRhKHR4bikubmV4dChmdW5jdGlvbiAobWV0YWRhdGEpIHsgcmV0dXJuIG1ldGFkYXRhLmJ5dGVTaXplOyB9KTtcclxuICAgIH07XHJcbiAgICBJbmRleGVkRGJSZW1vdGVEb2N1bWVudENhY2hlLnByb3RvdHlwZS5nZXRNZXRhZGF0YSA9IGZ1bmN0aW9uICh0eG4pIHtcclxuICAgICAgICByZXR1cm4gZG9jdW1lbnRHbG9iYWxTdG9yZSh0eG4pXHJcbiAgICAgICAgICAgIC5nZXQoRGJSZW1vdGVEb2N1bWVudEdsb2JhbC5rZXkpXHJcbiAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uIChtZXRhZGF0YSkge1xyXG4gICAgICAgICAgICBhc3NlcnQoISFtZXRhZGF0YSwgJ01pc3NpbmcgZG9jdW1lbnQgY2FjaGUgbWV0YWRhdGEnKTtcclxuICAgICAgICAgICAgcmV0dXJuIG1ldGFkYXRhO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIEluZGV4ZWREYlJlbW90ZURvY3VtZW50Q2FjaGUucHJvdG90eXBlLnNldE1ldGFkYXRhID0gZnVuY3Rpb24gKHR4biwgbWV0YWRhdGEpIHtcclxuICAgICAgICByZXR1cm4gZG9jdW1lbnRHbG9iYWxTdG9yZSh0eG4pLnB1dChEYlJlbW90ZURvY3VtZW50R2xvYmFsLmtleSwgbWV0YWRhdGEpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogRGVjb2RlcyBgcmVtb3RlRG9jYCBhbmQgcmV0dXJucyB0aGUgZG9jdW1lbnQgKG9yIG51bGwsIGlmIHRoZSBkb2N1bWVudFxyXG4gICAgICogY29ycmVzcG9uZHMgdG8gdGhlIGZvcm1hdCB1c2VkIGZvciBzZW50aW5lbCBkZWxldGVzKS5cclxuICAgICAqL1xyXG4gICAgSW5kZXhlZERiUmVtb3RlRG9jdW1lbnRDYWNoZS5wcm90b3R5cGUubWF5YmVEZWNvZGVEb2N1bWVudCA9IGZ1bmN0aW9uIChkYlJlbW90ZURvYykge1xyXG4gICAgICAgIGlmIChkYlJlbW90ZURvYykge1xyXG4gICAgICAgICAgICB2YXIgZG9jID0gdGhpcy5zZXJpYWxpemVyLmZyb21EYlJlbW90ZURvY3VtZW50KGRiUmVtb3RlRG9jKTtcclxuICAgICAgICAgICAgaWYgKGRvYyBpbnN0YW5jZW9mIE5vRG9jdW1lbnQgJiZcclxuICAgICAgICAgICAgICAgIGRvYy52ZXJzaW9uLmlzRXF1YWwoU25hcHNob3RWZXJzaW9uLmZvckRlbGV0ZWREb2MoKSkpIHtcclxuICAgICAgICAgICAgICAgIC8vIFRoZSBkb2N1bWVudCBpcyBhIHNlbnRpbmVsIHJlbW92YWwgYW5kIHNob3VsZCBvbmx5IGJlIHVzZWQgaW4gdGhlXHJcbiAgICAgICAgICAgICAgICAvLyBgZ2V0TmV3RG9jdW1lbnRDaGFuZ2VzKClgLlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGRvYztcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBIYW5kbGVzIHRoZSBkZXRhaWxzIG9mIGFkZGluZyBhbmQgdXBkYXRpbmcgZG9jdW1lbnRzIGluIHRoZSBJbmRleGVkRGJSZW1vdGVEb2N1bWVudENhY2hlLlxyXG4gICAgICpcclxuICAgICAqIFVubGlrZSB0aGUgTWVtb3J5UmVtb3RlRG9jdW1lbnRDaGFuZ2VCdWZmZXIsIHRoZSBJbmRleGVkRGIgaW1wbGVtZW50YXRpb24gY29tcHV0ZXMgdGhlIHNpemVcclxuICAgICAqIGRlbHRhIGZvciBhbGwgc3VibWl0dGVkIGNoYW5nZXMuIFRoaXMgYXZvaWRzIGhhdmluZyB0byByZS1yZWFkIGFsbCBkb2N1bWVudHMgZnJvbSBJbmRleGVkRGJcclxuICAgICAqIHdoZW4gd2UgYXBwbHkgdGhlIGNoYW5nZXMuXHJcbiAgICAgKi9cclxuICAgIEluZGV4ZWREYlJlbW90ZURvY3VtZW50Q2FjaGUuUmVtb3RlRG9jdW1lbnRDaGFuZ2VCdWZmZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICAgICAgdHNsaWIuX19leHRlbmRzKGNsYXNzXzEsIF9zdXBlcik7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQHBhcmFtIGRvY3VtZW50Q2FjaGUgVGhlIEluZGV4ZWREYlJlbW90ZURvY3VtZW50Q2FjaGUgdG8gYXBwbHkgdGhlIGNoYW5nZXMgdG8uXHJcbiAgICAgICAgICogQHBhcmFtIHRyYWNrUmVtb3ZhbHMgV2hldGhlciB0byBjcmVhdGUgc2VudGluZWwgZGVsZXRlcyB0aGF0IGNhbiBiZSB0cmFja2VkIGJ5XHJcbiAgICAgICAgICogYGdldE5ld0RvY3VtZW50Q2hhbmdlcygpYC5cclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBjbGFzc18xKGRvY3VtZW50Q2FjaGUsIHRyYWNrUmVtb3ZhbHMpIHtcclxuICAgICAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcclxuICAgICAgICAgICAgX3RoaXMuZG9jdW1lbnRDYWNoZSA9IGRvY3VtZW50Q2FjaGU7XHJcbiAgICAgICAgICAgIF90aGlzLnRyYWNrUmVtb3ZhbHMgPSB0cmFja1JlbW92YWxzO1xyXG4gICAgICAgICAgICAvLyBBIG1hcCBvZiBkb2N1bWVudCBzaXplcyBwcmlvciB0byBhcHBseWluZyB0aGUgY2hhbmdlcyBpbiB0aGlzIGJ1ZmZlci5cclxuICAgICAgICAgICAgX3RoaXMuZG9jdW1lbnRTaXplcyA9IG5ldyBPYmplY3RNYXAoZnVuY3Rpb24gKGtleSkgeyByZXR1cm4ga2V5LnRvU3RyaW5nKCk7IH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNsYXNzXzEucHJvdG90eXBlLmFwcGx5Q2hhbmdlcyA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbikge1xyXG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgICAgICB2YXIgcHJvbWlzZXMgPSBbXTtcclxuICAgICAgICAgICAgdmFyIHNpemVEZWx0YSA9IDA7XHJcbiAgICAgICAgICAgIHZhciBjb2xsZWN0aW9uUGFyZW50cyA9IG5ldyBTb3J0ZWRTZXQoZnVuY3Rpb24gKGwsIHIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBwcmltaXRpdmVDb21wYXJhdG9yKGwuY2Fub25pY2FsU3RyaW5nKCksIHIuY2Fub25pY2FsU3RyaW5nKCkpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdGhpcy5jaGFuZ2VzLmZvckVhY2goZnVuY3Rpb24gKGtleSwgbWF5YmVEb2N1bWVudCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHByZXZpb3VzU2l6ZSA9IF90aGlzLmRvY3VtZW50U2l6ZXMuZ2V0KGtleSk7XHJcbiAgICAgICAgICAgICAgICBhc3NlcnQocHJldmlvdXNTaXplICE9PSB1bmRlZmluZWQsIFwiQ2Fubm90IG1vZGlmeSBhIGRvY3VtZW50IHRoYXQgd2Fzbid0IHJlYWQgKGZvciBcIiArIGtleSArIFwiKVwiKTtcclxuICAgICAgICAgICAgICAgIGlmIChtYXliZURvY3VtZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXNzZXJ0KCFfdGhpcy5yZWFkVGltZS5pc0VxdWFsKFNuYXBzaG90VmVyc2lvbi5NSU4pLCAnQ2Fubm90IGFkZCBhIGRvY3VtZW50IHdpdGggYSByZWFkIHRpbWUgb2YgemVybycpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBkb2MgPSBfdGhpcy5kb2N1bWVudENhY2hlLnNlcmlhbGl6ZXIudG9EYlJlbW90ZURvY3VtZW50KG1heWJlRG9jdW1lbnQsIF90aGlzLnJlYWRUaW1lKTtcclxuICAgICAgICAgICAgICAgICAgICBjb2xsZWN0aW9uUGFyZW50cyA9IGNvbGxlY3Rpb25QYXJlbnRzLmFkZChrZXkucGF0aC5wb3BMYXN0KCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBzaXplID0gZGJEb2N1bWVudFNpemUoZG9jKTtcclxuICAgICAgICAgICAgICAgICAgICBzaXplRGVsdGEgKz0gc2l6ZSAtIHByZXZpb3VzU2l6ZTtcclxuICAgICAgICAgICAgICAgICAgICBwcm9taXNlcy5wdXNoKF90aGlzLmRvY3VtZW50Q2FjaGUuYWRkRW50cnkodHJhbnNhY3Rpb24sIGtleSwgZG9jKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBzaXplRGVsdGEgLT0gcHJldmlvdXNTaXplO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChfdGhpcy50cmFja1JlbW92YWxzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEluIG9yZGVyIHRvIHRyYWNrIHJlbW92YWxzLCB3ZSBzdG9yZSBhIFwic2VudGluZWwgZGVsZXRlXCIgaW4gdGhlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlbW90ZURvY3VtZW50Q2FjaGUuIFRoaXMgZW50cnkgaXMgcmVwcmVzZW50ZWQgYnkgYSBOb0RvY3VtZW50XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdpdGggYSB2ZXJzaW9uIG9mIDAgYW5kIGlnbm9yZWQgYnkgYG1heWJlRGVjb2RlRG9jdW1lbnQoKWAgYnV0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHByZXNlcnZlZCBpbiBgZ2V0TmV3RG9jdW1lbnRDaGFuZ2VzKClgLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGVsZXRlZERvYyA9IF90aGlzLmRvY3VtZW50Q2FjaGUuc2VyaWFsaXplci50b0RiUmVtb3RlRG9jdW1lbnQobmV3IE5vRG9jdW1lbnQoa2V5LCBTbmFwc2hvdFZlcnNpb24uZm9yRGVsZXRlZERvYygpKSwgX3RoaXMucmVhZFRpbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9taXNlcy5wdXNoKF90aGlzLmRvY3VtZW50Q2FjaGUuYWRkRW50cnkodHJhbnNhY3Rpb24sIGtleSwgZGVsZXRlZERvYykpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvbWlzZXMucHVzaChfdGhpcy5kb2N1bWVudENhY2hlLnJlbW92ZUVudHJ5KHRyYW5zYWN0aW9uLCBrZXkpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBjb2xsZWN0aW9uUGFyZW50cy5mb3JFYWNoKGZ1bmN0aW9uIChwYXJlbnQpIHtcclxuICAgICAgICAgICAgICAgIHByb21pc2VzLnB1c2goX3RoaXMuZG9jdW1lbnRDYWNoZS5pbmRleE1hbmFnZXIuYWRkVG9Db2xsZWN0aW9uUGFyZW50SW5kZXgodHJhbnNhY3Rpb24sIHBhcmVudCkpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcHJvbWlzZXMucHVzaCh0aGlzLmRvY3VtZW50Q2FjaGUudXBkYXRlTWV0YWRhdGEodHJhbnNhY3Rpb24sIHNpemVEZWx0YSkpO1xyXG4gICAgICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLndhaXRGb3IocHJvbWlzZXMpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgY2xhc3NfMS5wcm90b3R5cGUuZ2V0RnJvbUNhY2hlID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCBkb2N1bWVudEtleSkge1xyXG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgICAgICAvLyBSZWNvcmQgdGhlIHNpemUgb2YgZXZlcnl0aGluZyB3ZSBsb2FkIGZyb20gdGhlIGNhY2hlIHNvIHdlIGNhbiBjb21wdXRlIGEgZGVsdGEgbGF0ZXIuXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRvY3VtZW50Q2FjaGVcclxuICAgICAgICAgICAgICAgIC5nZXRTaXplZEVudHJ5KHRyYW5zYWN0aW9uLCBkb2N1bWVudEtleSlcclxuICAgICAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uIChnZXRSZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIGlmIChnZXRSZXN1bHQgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5kb2N1bWVudFNpemVzLnNldChkb2N1bWVudEtleSwgMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5kb2N1bWVudFNpemVzLnNldChkb2N1bWVudEtleSwgZ2V0UmVzdWx0LnNpemUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBnZXRSZXN1bHQubWF5YmVEb2N1bWVudDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBjbGFzc18xLnByb3RvdHlwZS5nZXRBbGxGcm9tQ2FjaGUgPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24sIGRvY3VtZW50S2V5cykge1xyXG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgICAgICAvLyBSZWNvcmQgdGhlIHNpemUgb2YgZXZlcnl0aGluZyB3ZSBsb2FkIGZyb20gdGhlIGNhY2hlIHNvIHdlIGNhbiBjb21wdXRlXHJcbiAgICAgICAgICAgIC8vIGEgZGVsdGEgbGF0ZXIuXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRvY3VtZW50Q2FjaGVcclxuICAgICAgICAgICAgICAgIC5nZXRTaXplZEVudHJpZXModHJhbnNhY3Rpb24sIGRvY3VtZW50S2V5cylcclxuICAgICAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG1heWJlRG9jdW1lbnRzID0gX2EubWF5YmVEb2N1bWVudHMsIHNpemVNYXAgPSBfYS5zaXplTWFwO1xyXG4gICAgICAgICAgICAgICAgLy8gTm90ZTogYGdldEFsbEZyb21DYWNoZWAgcmV0dXJucyB0d28gbWFwcyBpbnN0ZWFkIG9mIGEgc2luZ2xlIG1hcCBmcm9tXHJcbiAgICAgICAgICAgICAgICAvLyBrZXlzIHRvIGBEb2N1bWVudFNpemVFbnRyeWBzLiBUaGlzIGlzIHRvIGFsbG93IHJldHVybmluZyB0aGVcclxuICAgICAgICAgICAgICAgIC8vIGBOdWxsYWJsZU1heWJlRG9jdW1lbnRNYXBgIGRpcmVjdGx5LCB3aXRob3V0IGEgY29udmVyc2lvbi5cclxuICAgICAgICAgICAgICAgIHNpemVNYXAuZm9yRWFjaChmdW5jdGlvbiAoZG9jdW1lbnRLZXksIHNpemUpIHtcclxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5kb2N1bWVudFNpemVzLnNldChkb2N1bWVudEtleSwgc2l6ZSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBtYXliZURvY3VtZW50cztcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gY2xhc3NfMTtcclxuICAgIH0oUmVtb3RlRG9jdW1lbnRDaGFuZ2VCdWZmZXIpKTtcclxuICAgIHJldHVybiBJbmRleGVkRGJSZW1vdGVEb2N1bWVudENhY2hlO1xyXG59KCkpO1xyXG5mdW5jdGlvbiBkb2N1bWVudEdsb2JhbFN0b3JlKHR4bikge1xyXG4gICAgcmV0dXJuIEluZGV4ZWREYlBlcnNpc3RlbmNlLmdldFN0b3JlKHR4biwgRGJSZW1vdGVEb2N1bWVudEdsb2JhbC5zdG9yZSk7XHJcbn1cclxuLyoqXHJcbiAqIEhlbHBlciB0byBnZXQgYSB0eXBlZCBTaW1wbGVEYlN0b3JlIGZvciB0aGUgcmVtb3RlRG9jdW1lbnRzIG9iamVjdCBzdG9yZS5cclxuICovXHJcbmZ1bmN0aW9uIHJlbW90ZURvY3VtZW50c1N0b3JlKHR4bikge1xyXG4gICAgcmV0dXJuIEluZGV4ZWREYlBlcnNpc3RlbmNlLmdldFN0b3JlKHR4biwgRGJSZW1vdGVEb2N1bWVudC5zdG9yZSk7XHJcbn1cclxuZnVuY3Rpb24gZGJLZXkoZG9jS2V5KSB7XHJcbiAgICByZXR1cm4gZG9jS2V5LnBhdGgudG9BcnJheSgpO1xyXG59XHJcbi8qKlxyXG4gKiBSZXRydXNuIGFuIGFwcHJveGltYXRlIHNpemUgZm9yIHRoZSBnaXZlbiBkb2N1bWVudC5cclxuICovXHJcbmZ1bmN0aW9uIGRiRG9jdW1lbnRTaXplKGRvYykge1xyXG4gICAgdmFyIHZhbHVlO1xyXG4gICAgaWYgKGRvYy5kb2N1bWVudCkge1xyXG4gICAgICAgIHZhbHVlID0gZG9jLmRvY3VtZW50O1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoZG9jLnVua25vd25Eb2N1bWVudCkge1xyXG4gICAgICAgIHZhbHVlID0gZG9jLnVua25vd25Eb2N1bWVudDtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGRvYy5ub0RvY3VtZW50KSB7XHJcbiAgICAgICAgdmFsdWUgPSBkb2Mubm9Eb2N1bWVudDtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHRocm93IGZhaWwoJ1Vua25vd24gcmVtb3RlIGRvY3VtZW50IHR5cGUnKTtcclxuICAgIH1cclxuICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh2YWx1ZSkubGVuZ3RoO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQW4gaW4tbWVtb3J5IGltcGxlbWVudGF0aW9uIG9mIEluZGV4TWFuYWdlci5cclxuICovXHJcbnZhciBNZW1vcnlJbmRleE1hbmFnZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBNZW1vcnlJbmRleE1hbmFnZXIoKSB7XHJcbiAgICAgICAgdGhpcy5jb2xsZWN0aW9uUGFyZW50SW5kZXggPSBuZXcgTWVtb3J5Q29sbGVjdGlvblBhcmVudEluZGV4KCk7XHJcbiAgICB9XHJcbiAgICBNZW1vcnlJbmRleE1hbmFnZXIucHJvdG90eXBlLmFkZFRvQ29sbGVjdGlvblBhcmVudEluZGV4ID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCBjb2xsZWN0aW9uUGF0aCkge1xyXG4gICAgICAgIHRoaXMuY29sbGVjdGlvblBhcmVudEluZGV4LmFkZChjb2xsZWN0aW9uUGF0aCk7XHJcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5SW5kZXhNYW5hZ2VyLnByb3RvdHlwZS5nZXRDb2xsZWN0aW9uUGFyZW50cyA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwgY29sbGVjdGlvbklkKSB7XHJcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKHRoaXMuY29sbGVjdGlvblBhcmVudEluZGV4LmdldEVudHJpZXMoY29sbGVjdGlvbklkKSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIE1lbW9yeUluZGV4TWFuYWdlcjtcclxufSgpKTtcclxuLyoqXHJcbiAqIEludGVybmFsIGltcGxlbWVudGF0aW9uIG9mIHRoZSBjb2xsZWN0aW9uLXBhcmVudCBpbmRleCBleHBvc2VkIGJ5IE1lbW9yeUluZGV4TWFuYWdlci5cclxuICogQWxzbyB1c2VkIGZvciBpbi1tZW1vcnkgY2FjaGluZyBieSBJbmRleGVkRGJJbmRleE1hbmFnZXIgYW5kIGluaXRpYWwgaW5kZXggcG9wdWxhdGlvblxyXG4gKiBpbiBpbmRleGVkZGJfc2NoZW1hLnRzXHJcbiAqL1xyXG52YXIgTWVtb3J5Q29sbGVjdGlvblBhcmVudEluZGV4ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gTWVtb3J5Q29sbGVjdGlvblBhcmVudEluZGV4KCkge1xyXG4gICAgICAgIHRoaXMuaW5kZXggPSB7fTtcclxuICAgIH1cclxuICAgIC8vIFJldHVybnMgZmFsc2UgaWYgdGhlIGVudHJ5IGFscmVhZHkgZXhpc3RlZC5cclxuICAgIE1lbW9yeUNvbGxlY3Rpb25QYXJlbnRJbmRleC5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24gKGNvbGxlY3Rpb25QYXRoKSB7XHJcbiAgICAgICAgYXNzZXJ0KGNvbGxlY3Rpb25QYXRoLmxlbmd0aCAlIDIgPT09IDEsICdFeHBlY3RlZCBhIGNvbGxlY3Rpb24gcGF0aC4nKTtcclxuICAgICAgICB2YXIgY29sbGVjdGlvbklkID0gY29sbGVjdGlvblBhdGgubGFzdFNlZ21lbnQoKTtcclxuICAgICAgICB2YXIgcGFyZW50UGF0aCA9IGNvbGxlY3Rpb25QYXRoLnBvcExhc3QoKTtcclxuICAgICAgICB2YXIgZXhpc3RpbmdQYXJlbnRzID0gdGhpcy5pbmRleFtjb2xsZWN0aW9uSWRdIHx8XHJcbiAgICAgICAgICAgIG5ldyBTb3J0ZWRTZXQoUmVzb3VyY2VQYXRoLmNvbXBhcmF0b3IpO1xyXG4gICAgICAgIHZhciBhZGRlZCA9ICFleGlzdGluZ1BhcmVudHMuaGFzKHBhcmVudFBhdGgpO1xyXG4gICAgICAgIHRoaXMuaW5kZXhbY29sbGVjdGlvbklkXSA9IGV4aXN0aW5nUGFyZW50cy5hZGQocGFyZW50UGF0aCk7XHJcbiAgICAgICAgcmV0dXJuIGFkZGVkO1xyXG4gICAgfTtcclxuICAgIE1lbW9yeUNvbGxlY3Rpb25QYXJlbnRJbmRleC5wcm90b3R5cGUuaGFzID0gZnVuY3Rpb24gKGNvbGxlY3Rpb25QYXRoKSB7XHJcbiAgICAgICAgdmFyIGNvbGxlY3Rpb25JZCA9IGNvbGxlY3Rpb25QYXRoLmxhc3RTZWdtZW50KCk7XHJcbiAgICAgICAgdmFyIHBhcmVudFBhdGggPSBjb2xsZWN0aW9uUGF0aC5wb3BMYXN0KCk7XHJcbiAgICAgICAgdmFyIGV4aXN0aW5nUGFyZW50cyA9IHRoaXMuaW5kZXhbY29sbGVjdGlvbklkXTtcclxuICAgICAgICByZXR1cm4gZXhpc3RpbmdQYXJlbnRzICYmIGV4aXN0aW5nUGFyZW50cy5oYXMocGFyZW50UGF0aCk7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5Q29sbGVjdGlvblBhcmVudEluZGV4LnByb3RvdHlwZS5nZXRFbnRyaWVzID0gZnVuY3Rpb24gKGNvbGxlY3Rpb25JZCkge1xyXG4gICAgICAgIHZhciBwYXJlbnRQYXRocyA9IHRoaXMuaW5kZXhbY29sbGVjdGlvbklkXSB8fFxyXG4gICAgICAgICAgICBuZXcgU29ydGVkU2V0KFJlc291cmNlUGF0aC5jb21wYXJhdG9yKTtcclxuICAgICAgICByZXR1cm4gcGFyZW50UGF0aHMudG9BcnJheSgpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBNZW1vcnlDb2xsZWN0aW9uUGFyZW50SW5kZXg7XHJcbn0oKSk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogU2NoZW1hIFZlcnNpb24gZm9yIHRoZSBXZWIgY2xpZW50OlxyXG4gKiAxLiBJbml0aWFsIHZlcnNpb24gaW5jbHVkaW5nIE11dGF0aW9uIFF1ZXVlLCBRdWVyeSBDYWNoZSwgYW5kIFJlbW90ZSBEb2N1bWVudFxyXG4gKiAgICBDYWNoZVxyXG4gKiAyLiBVc2VkIHRvIGVuc3VyZSBhIHRhcmdldEdsb2JhbCBvYmplY3QgZXhpc3RzIGFuZCBhZGQgdGFyZ2V0Q291bnQgdG8gaXQuIE5vXHJcbiAqICAgIGxvbmdlciByZXF1aXJlZCBiZWNhdXNlIG1pZ3JhdGlvbiAzIHVuY29uZGl0aW9uYWxseSBjbGVhcnMgaXQuXHJcbiAqIDMuIERyb3BwZWQgYW5kIHJlLWNyZWF0ZWQgUXVlcnkgQ2FjaGUgdG8gZGVhbCB3aXRoIGNhY2hlIGNvcnJ1cHRpb24gcmVsYXRlZFxyXG4gKiAgICB0byBsaW1ibyByZXNvbHV0aW9uLiBBZGRyZXNzZXNcclxuICogICAgaHR0cHM6Ly9naXRodWIuY29tL2ZpcmViYXNlL2ZpcmViYXNlLWlvcy1zZGsvaXNzdWVzLzE1NDhcclxuICogNC4gTXVsdGktVGFiIFN1cHBvcnQuXHJcbiAqIDUuIFJlbW92YWwgb2YgaGVsZCB3cml0ZSBhY2tzLlxyXG4gKiA2LiBDcmVhdGUgZG9jdW1lbnQgZ2xvYmFsIGZvciB0cmFja2luZyBkb2N1bWVudCBjYWNoZSBzaXplLlxyXG4gKiA3LiBFbnN1cmUgZXZlcnkgY2FjaGVkIGRvY3VtZW50IGhhcyBhIHNlbnRpbmVsIHJvdyB3aXRoIGEgc2VxdWVuY2UgbnVtYmVyLlxyXG4gKiA4LiBBZGQgY29sbGVjdGlvbi1wYXJlbnQgaW5kZXggZm9yIENvbGxlY3Rpb24gR3JvdXAgcXVlcmllcy5cclxuICogOS4gQ2hhbmdlIFJlbW90ZURvY3VtZW50Q2hhbmdlcyBzdG9yZSB0byBiZSBrZXllZCBieSByZWFkVGltZSByYXRoZXIgdGhhblxyXG4gKiAgICBhbiBhdXRvLWluY3JlbWVudGluZyBJRC4gVGhpcyBpcyByZXF1aXJlZCBmb3IgSW5kZXgtRnJlZSBxdWVyaWVzLlxyXG4gKi9cclxudmFyIFNDSEVNQV9WRVJTSU9OID0gOTtcclxuLyoqIFBlcmZvcm1zIGRhdGFiYXNlIGNyZWF0aW9uIGFuZCBzY2hlbWEgdXBncmFkZXMuICovXHJcbnZhciBTY2hlbWFDb252ZXJ0ZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBTY2hlbWFDb252ZXJ0ZXIoc2VyaWFsaXplcikge1xyXG4gICAgICAgIHRoaXMuc2VyaWFsaXplciA9IHNlcmlhbGl6ZXI7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFBlcmZvcm1zIGRhdGFiYXNlIGNyZWF0aW9uIGFuZCBzY2hlbWEgdXBncmFkZXMuXHJcbiAgICAgKlxyXG4gICAgICogTm90ZSB0aGF0IGluIHByb2R1Y3Rpb24sIHRoaXMgbWV0aG9kIGlzIG9ubHkgZXZlciB1c2VkIHRvIHVwZ3JhZGUgdGhlIHNjaGVtYVxyXG4gICAgICogdG8gU0NIRU1BX1ZFUlNJT04uIERpZmZlcmVudCB2YWx1ZXMgb2YgdG9WZXJzaW9uIGFyZSBvbmx5IHVzZWQgZm9yIHRlc3RpbmdcclxuICAgICAqIGFuZCBsb2NhbCBmZWF0dXJlIGRldmVsb3BtZW50LlxyXG4gICAgICovXHJcbiAgICBTY2hlbWFDb252ZXJ0ZXIucHJvdG90eXBlLmNyZWF0ZU9yVXBncmFkZSA9IGZ1bmN0aW9uIChkYiwgdHhuLCBmcm9tVmVyc2lvbiwgdG9WZXJzaW9uKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBhc3NlcnQoZnJvbVZlcnNpb24gPCB0b1ZlcnNpb24gJiZcclxuICAgICAgICAgICAgZnJvbVZlcnNpb24gPj0gMCAmJlxyXG4gICAgICAgICAgICB0b1ZlcnNpb24gPD0gU0NIRU1BX1ZFUlNJT04sIFwiVW5leHBlY3RlZCBzY2hlbWEgdXBncmFkZSBmcm9tIHZcIiArIGZyb21WZXJzaW9uICsgXCIgdG8gdnt0b1ZlcnNpb259LlwiKTtcclxuICAgICAgICB2YXIgc2ltcGxlRGJUcmFuc2FjdGlvbiA9IG5ldyBTaW1wbGVEYlRyYW5zYWN0aW9uKHR4bik7XHJcbiAgICAgICAgaWYgKGZyb21WZXJzaW9uIDwgMSAmJiB0b1ZlcnNpb24gPj0gMSkge1xyXG4gICAgICAgICAgICBjcmVhdGVQcmltYXJ5Q2xpZW50U3RvcmUoZGIpO1xyXG4gICAgICAgICAgICBjcmVhdGVNdXRhdGlvblF1ZXVlKGRiKTtcclxuICAgICAgICAgICAgY3JlYXRlUXVlcnlDYWNoZShkYik7XHJcbiAgICAgICAgICAgIGNyZWF0ZVJlbW90ZURvY3VtZW50Q2FjaGUoZGIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBNaWdyYXRpb24gMiB0byBwb3B1bGF0ZSB0aGUgdGFyZ2V0R2xvYmFsIG9iamVjdCBubyBsb25nZXIgbmVlZGVkIHNpbmNlXHJcbiAgICAgICAgLy8gbWlncmF0aW9uIDMgdW5jb25kaXRpb25hbGx5IGNsZWFycyBpdC5cclxuICAgICAgICB2YXIgcCA9IFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICAgICAgaWYgKGZyb21WZXJzaW9uIDwgMyAmJiB0b1ZlcnNpb24gPj0gMykge1xyXG4gICAgICAgICAgICAvLyBCcmFuZCBuZXcgY2xpZW50cyBkb24ndCBuZWVkIHRvIGRyb3AgYW5kIHJlY3JlYXRlLS1vbmx5IGNsaWVudHMgdGhhdFxyXG4gICAgICAgICAgICAvLyBwb3RlbnRpYWxseSBoYXZlIGNvcnJ1cHQgZGF0YS5cclxuICAgICAgICAgICAgaWYgKGZyb21WZXJzaW9uICE9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBkcm9wUXVlcnlDYWNoZShkYik7XHJcbiAgICAgICAgICAgICAgICBjcmVhdGVRdWVyeUNhY2hlKGRiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBwID0gcC5uZXh0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIHdyaXRlRW1wdHlUYXJnZXRHbG9iYWxFbnRyeShzaW1wbGVEYlRyYW5zYWN0aW9uKTsgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChmcm9tVmVyc2lvbiA8IDQgJiYgdG9WZXJzaW9uID49IDQpIHtcclxuICAgICAgICAgICAgaWYgKGZyb21WZXJzaW9uICE9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBTY2hlbWEgdmVyc2lvbiAzIHVzZXMgYXV0by1nZW5lcmF0ZWQga2V5cyB0byBnZW5lcmF0ZSBnbG9iYWxseSB1bmlxdWVcclxuICAgICAgICAgICAgICAgIC8vIG11dGF0aW9uIGJhdGNoIElEcyAodGhpcyB3YXMgcHJldmlvdXNseSBlbnN1cmVkIGludGVybmFsbHkgYnkgdGhlXHJcbiAgICAgICAgICAgICAgICAvLyBjbGllbnQpLiBUbyBtaWdyYXRlIHRvIHRoZSBuZXcgc2NoZW1hLCB3ZSBoYXZlIHRvIHJlYWQgYWxsIG11dGF0aW9uc1xyXG4gICAgICAgICAgICAgICAgLy8gYW5kIHdyaXRlIHRoZW0gYmFjayBvdXQuIFdlIHByZXNlcnZlIHRoZSBleGlzdGluZyBiYXRjaCBJRHMgdG8gZ3VhcmFudGVlXHJcbiAgICAgICAgICAgICAgICAvLyBjb25zaXN0ZW5jeSB3aXRoIG90aGVyIG9iamVjdCBzdG9yZXMuIEFueSBmdXJ0aGVyIG11dGF0aW9uIGJhdGNoIElEcyB3aWxsXHJcbiAgICAgICAgICAgICAgICAvLyBiZSBhdXRvLWdlbmVyYXRlZC5cclxuICAgICAgICAgICAgICAgIHAgPSBwLm5leHQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB1cGdyYWRlTXV0YXRpb25CYXRjaFNjaGVtYUFuZE1pZ3JhdGVEYXRhKGRiLCBzaW1wbGVEYlRyYW5zYWN0aW9uKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHAgPSBwLm5leHQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgY3JlYXRlQ2xpZW50TWV0YWRhdGFTdG9yZShkYik7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZnJvbVZlcnNpb24gPCA1ICYmIHRvVmVyc2lvbiA+PSA1KSB7XHJcbiAgICAgICAgICAgIHAgPSBwLm5leHQoZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMucmVtb3ZlQWNrbm93bGVkZ2VkTXV0YXRpb25zKHNpbXBsZURiVHJhbnNhY3Rpb24pOyB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGZyb21WZXJzaW9uIDwgNiAmJiB0b1ZlcnNpb24gPj0gNikge1xyXG4gICAgICAgICAgICBwID0gcC5uZXh0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGNyZWF0ZURvY3VtZW50R2xvYmFsU3RvcmUoZGIpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLmFkZERvY3VtZW50R2xvYmFsKHNpbXBsZURiVHJhbnNhY3Rpb24pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGZyb21WZXJzaW9uIDwgNyAmJiB0b1ZlcnNpb24gPj0gNykge1xyXG4gICAgICAgICAgICBwID0gcC5uZXh0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLmVuc3VyZVNlcXVlbmNlTnVtYmVycyhzaW1wbGVEYlRyYW5zYWN0aW9uKTsgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChmcm9tVmVyc2lvbiA8IDggJiYgdG9WZXJzaW9uID49IDgpIHtcclxuICAgICAgICAgICAgcCA9IHAubmV4dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuY3JlYXRlQ29sbGVjdGlvblBhcmVudEluZGV4KGRiLCBzaW1wbGVEYlRyYW5zYWN0aW9uKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChmcm9tVmVyc2lvbiA8IDkgJiYgdG9WZXJzaW9uID49IDkpIHtcclxuICAgICAgICAgICAgcCA9IHAubmV4dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBNdWx0aS1UYWIgdXNlZCB0byBtYW5hZ2UgaXRzIG93biBjaGFuZ2Vsb2csIGJ1dCB0aGlzIGhhcyBiZWVuIG1vdmVkXHJcbiAgICAgICAgICAgICAgICAvLyB0byB0aGUgRGJSZW1vdGVEb2N1bWVudCBvYmplY3Qgc3RvcmUgaXRzZWxmLiBTaW5jZSB0aGUgcHJldmlvdXMgY2hhbmdlXHJcbiAgICAgICAgICAgICAgICAvLyBsb2cgb25seSBjb250YWluZWQgdHJhbnNpZW50IGRhdGEsIHdlIGNhbiBkcm9wIGl0cyBvYmplY3Qgc3RvcmUuXHJcbiAgICAgICAgICAgICAgICBkcm9wUmVtb3RlRG9jdW1lbnRDaGFuZ2VzU3RvcmUoZGIpO1xyXG4gICAgICAgICAgICAgICAgY3JlYXRlUmVtb3RlRG9jdW1lbnRSZWFkVGltZUluZGV4KHR4bik7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcDtcclxuICAgIH07XHJcbiAgICBTY2hlbWFDb252ZXJ0ZXIucHJvdG90eXBlLmFkZERvY3VtZW50R2xvYmFsID0gZnVuY3Rpb24gKHR4bikge1xyXG4gICAgICAgIHZhciBieXRlQ291bnQgPSAwO1xyXG4gICAgICAgIHJldHVybiB0eG5cclxuICAgICAgICAgICAgLnN0b3JlKERiUmVtb3RlRG9jdW1lbnQuc3RvcmUpXHJcbiAgICAgICAgICAgIC5pdGVyYXRlKGZ1bmN0aW9uIChfLCBkb2MpIHtcclxuICAgICAgICAgICAgYnl0ZUNvdW50ICs9IGRiRG9jdW1lbnRTaXplKGRvYyk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgbWV0YWRhdGEgPSBuZXcgRGJSZW1vdGVEb2N1bWVudEdsb2JhbChieXRlQ291bnQpO1xyXG4gICAgICAgICAgICByZXR1cm4gdHhuXHJcbiAgICAgICAgICAgICAgICAuc3RvcmUoRGJSZW1vdGVEb2N1bWVudEdsb2JhbC5zdG9yZSlcclxuICAgICAgICAgICAgICAgIC5wdXQoRGJSZW1vdGVEb2N1bWVudEdsb2JhbC5rZXksIG1ldGFkYXRhKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBTY2hlbWFDb252ZXJ0ZXIucHJvdG90eXBlLnJlbW92ZUFja25vd2xlZGdlZE11dGF0aW9ucyA9IGZ1bmN0aW9uICh0eG4pIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhciBxdWV1ZXNTdG9yZSA9IHR4bi5zdG9yZShEYk11dGF0aW9uUXVldWUuc3RvcmUpO1xyXG4gICAgICAgIHZhciBtdXRhdGlvbnNTdG9yZSA9IHR4bi5zdG9yZShEYk11dGF0aW9uQmF0Y2guc3RvcmUpO1xyXG4gICAgICAgIHJldHVybiBxdWV1ZXNTdG9yZS5sb2FkQWxsKCkubmV4dChmdW5jdGlvbiAocXVldWVzKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UuZm9yRWFjaChxdWV1ZXMsIGZ1bmN0aW9uIChxdWV1ZSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHJhbmdlID0gSURCS2V5UmFuZ2UuYm91bmQoW3F1ZXVlLnVzZXJJZCwgQkFUQ0hJRF9VTktOT1dOXSwgW3F1ZXVlLnVzZXJJZCwgcXVldWUubGFzdEFja25vd2xlZGdlZEJhdGNoSWRdKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBtdXRhdGlvbnNTdG9yZVxyXG4gICAgICAgICAgICAgICAgICAgIC5sb2FkQWxsKERiTXV0YXRpb25CYXRjaC51c2VyTXV0YXRpb25zSW5kZXgsIHJhbmdlKVxyXG4gICAgICAgICAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uIChkYkJhdGNoZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLmZvckVhY2goZGJCYXRjaGVzLCBmdW5jdGlvbiAoZGJCYXRjaCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhc3NlcnQoZGJCYXRjaC51c2VySWQgPT09IHF1ZXVlLnVzZXJJZCwgXCJDYW5ub3QgcHJvY2VzcyBiYXRjaCBcIiArIGRiQmF0Y2guYmF0Y2hJZCArIFwiIGZyb20gdW5leHBlY3RlZCB1c2VyXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYmF0Y2ggPSBfdGhpcy5zZXJpYWxpemVyLmZyb21EYk11dGF0aW9uQmF0Y2goZGJCYXRjaCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZW1vdmVNdXRhdGlvbkJhdGNoKHR4biwgcXVldWUudXNlcklkLCBiYXRjaCkubmV4dChmdW5jdGlvbiAoKSB7IH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogRW5zdXJlcyB0aGF0IGV2ZXJ5IGRvY3VtZW50IGluIHRoZSByZW1vdGUgZG9jdW1lbnQgY2FjaGUgaGFzIGEgY29ycmVzcG9uZGluZyBzZW50aW5lbCByb3dcclxuICAgICAqIHdpdGggYSBzZXF1ZW5jZSBudW1iZXIuIE1pc3Npbmcgcm93cyBhcmUgZ2l2ZW4gdGhlIG1vc3QgcmVjZW50bHkgdXNlZCBzZXF1ZW5jZSBudW1iZXIuXHJcbiAgICAgKi9cclxuICAgIFNjaGVtYUNvbnZlcnRlci5wcm90b3R5cGUuZW5zdXJlU2VxdWVuY2VOdW1iZXJzID0gZnVuY3Rpb24gKHR4bikge1xyXG4gICAgICAgIHZhciBkb2N1bWVudFRhcmdldFN0b3JlID0gdHhuLnN0b3JlKERiVGFyZ2V0RG9jdW1lbnQuc3RvcmUpO1xyXG4gICAgICAgIHZhciBkb2N1bWVudHNTdG9yZSA9IHR4bi5zdG9yZShEYlJlbW90ZURvY3VtZW50LnN0b3JlKTtcclxuICAgICAgICByZXR1cm4gZ2V0SGlnaGVzdExpc3RlblNlcXVlbmNlTnVtYmVyKHR4bikubmV4dChmdW5jdGlvbiAoY3VycmVudFNlcXVlbmNlTnVtYmVyKSB7XHJcbiAgICAgICAgICAgIHZhciB3cml0ZVNlbnRpbmVsS2V5ID0gZnVuY3Rpb24gKHBhdGgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBkb2N1bWVudFRhcmdldFN0b3JlLnB1dChuZXcgRGJUYXJnZXREb2N1bWVudCgwLCBlbmNvZGUocGF0aCksIGN1cnJlbnRTZXF1ZW5jZU51bWJlcikpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB2YXIgcHJvbWlzZXMgPSBbXTtcclxuICAgICAgICAgICAgcmV0dXJuIGRvY3VtZW50c1N0b3JlXHJcbiAgICAgICAgICAgICAgICAuaXRlcmF0ZShmdW5jdGlvbiAoa2V5LCBkb2MpIHtcclxuICAgICAgICAgICAgICAgIHZhciBwYXRoID0gbmV3IFJlc291cmNlUGF0aChrZXkpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGRvY1NlbnRpbmVsS2V5ID0gc2VudGluZWxLZXkocGF0aCk7XHJcbiAgICAgICAgICAgICAgICBwcm9taXNlcy5wdXNoKGRvY3VtZW50VGFyZ2V0U3RvcmUuZ2V0KGRvY1NlbnRpbmVsS2V5KS5uZXh0KGZ1bmN0aW9uIChtYXliZVNlbnRpbmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFtYXliZVNlbnRpbmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB3cml0ZVNlbnRpbmVsS2V5KHBhdGgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKCkgeyByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLndhaXRGb3IocHJvbWlzZXMpOyB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBTY2hlbWFDb252ZXJ0ZXIucHJvdG90eXBlLmNyZWF0ZUNvbGxlY3Rpb25QYXJlbnRJbmRleCA9IGZ1bmN0aW9uIChkYiwgdHhuKSB7XHJcbiAgICAgICAgLy8gQ3JlYXRlIHRoZSBpbmRleC5cclxuICAgICAgICBkYi5jcmVhdGVPYmplY3RTdG9yZShEYkNvbGxlY3Rpb25QYXJlbnQuc3RvcmUsIHtcclxuICAgICAgICAgICAga2V5UGF0aDogRGJDb2xsZWN0aW9uUGFyZW50LmtleVBhdGhcclxuICAgICAgICB9KTtcclxuICAgICAgICB2YXIgY29sbGVjdGlvblBhcmVudHNTdG9yZSA9IHR4bi5zdG9yZShEYkNvbGxlY3Rpb25QYXJlbnQuc3RvcmUpO1xyXG4gICAgICAgIC8vIEhlbHBlciB0byBhZGQgYW4gaW5kZXggZW50cnkgaWZmIHdlIGhhdmVuJ3QgYWxyZWFkeSB3cml0dGVuIGl0LlxyXG4gICAgICAgIHZhciBjYWNoZSA9IG5ldyBNZW1vcnlDb2xsZWN0aW9uUGFyZW50SW5kZXgoKTtcclxuICAgICAgICB2YXIgYWRkRW50cnkgPSBmdW5jdGlvbiAoY29sbGVjdGlvblBhdGgpIHtcclxuICAgICAgICAgICAgaWYgKGNhY2hlLmFkZChjb2xsZWN0aW9uUGF0aCkpIHtcclxuICAgICAgICAgICAgICAgIHZhciBjb2xsZWN0aW9uSWQgPSBjb2xsZWN0aW9uUGF0aC5sYXN0U2VnbWVudCgpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHBhcmVudFBhdGggPSBjb2xsZWN0aW9uUGF0aC5wb3BMYXN0KCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY29sbGVjdGlvblBhcmVudHNTdG9yZS5wdXQoe1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbGxlY3Rpb25JZDogY29sbGVjdGlvbklkLFxyXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudDogZW5jb2RlKHBhcmVudFBhdGgpXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgLy8gSW5kZXggZXhpc3RpbmcgcmVtb3RlIGRvY3VtZW50cy5cclxuICAgICAgICByZXR1cm4gdHhuXHJcbiAgICAgICAgICAgIC5zdG9yZShEYlJlbW90ZURvY3VtZW50LnN0b3JlKVxyXG4gICAgICAgICAgICAuaXRlcmF0ZSh7IGtleXNPbmx5OiB0cnVlIH0sIGZ1bmN0aW9uIChwYXRoU2VnbWVudHMsIF8pIHtcclxuICAgICAgICAgICAgdmFyIHBhdGggPSBuZXcgUmVzb3VyY2VQYXRoKHBhdGhTZWdtZW50cyk7XHJcbiAgICAgICAgICAgIHJldHVybiBhZGRFbnRyeShwYXRoLnBvcExhc3QoKSk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAvLyBJbmRleCBleGlzdGluZyBtdXRhdGlvbnMuXHJcbiAgICAgICAgICAgIHJldHVybiB0eG5cclxuICAgICAgICAgICAgICAgIC5zdG9yZShEYkRvY3VtZW50TXV0YXRpb24uc3RvcmUpXHJcbiAgICAgICAgICAgICAgICAuaXRlcmF0ZSh7IGtleXNPbmx5OiB0cnVlIH0sIGZ1bmN0aW9uIChfYSwgXykge1xyXG4gICAgICAgICAgICAgICAgdmFyIHVzZXJJRCA9IF9hWzBdLCBlbmNvZGVkUGF0aCA9IF9hWzFdLCBiYXRjaElkID0gX2FbMl07XHJcbiAgICAgICAgICAgICAgICB2YXIgcGF0aCA9IGRlY29kZShlbmNvZGVkUGF0aCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYWRkRW50cnkocGF0aC5wb3BMYXN0KCkpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gU2NoZW1hQ29udmVydGVyO1xyXG59KCkpO1xyXG5mdW5jdGlvbiBzZW50aW5lbEtleShwYXRoKSB7XHJcbiAgICByZXR1cm4gWzAsIGVuY29kZShwYXRoKV07XHJcbn1cclxuLyoqXHJcbiAqIFdyYXBwZXIgY2xhc3MgdG8gc3RvcmUgdGltZXN0YW1wcyAoc2Vjb25kcyBhbmQgbmFub3MpIGluIEluZGV4ZWREYiBvYmplY3RzLlxyXG4gKi9cclxudmFyIERiVGltZXN0YW1wID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gRGJUaW1lc3RhbXAoc2Vjb25kcywgbmFub3NlY29uZHMpIHtcclxuICAgICAgICB0aGlzLnNlY29uZHMgPSBzZWNvbmRzO1xyXG4gICAgICAgIHRoaXMubmFub3NlY29uZHMgPSBuYW5vc2Vjb25kcztcclxuICAgIH1cclxuICAgIHJldHVybiBEYlRpbWVzdGFtcDtcclxufSgpKTtcclxuLyoqXHJcbiAqIEEgc2luZ2xldG9uIG9iamVjdCB0byBiZSBzdG9yZWQgaW4gdGhlICdvd25lcicgc3RvcmUgaW4gSW5kZXhlZERiLlxyXG4gKlxyXG4gKiBBIGdpdmVuIGRhdGFiYXNlIGNhbiBoYXZlIGEgc2luZ2xlIHByaW1hcnkgdGFiIGFzc2lnbmVkIGF0IGEgZ2l2ZW4gdGltZS4gVGhhdFxyXG4gKiB0YWIgbXVzdCB2YWxpZGF0ZSB0aGF0IGl0IGlzIHN0aWxsIGhvbGRpbmcgdGhlIHByaW1hcnkgbGVhc2UgYmVmb3JlIGV2ZXJ5XHJcbiAqIG9wZXJhdGlvbiB0aGF0IHJlcXVpcmVzIGxvY2tlZCBhY2Nlc3MuIFRoZSBwcmltYXJ5IHRhYiBzaG91bGQgcmVndWxhcmx5XHJcbiAqIHdyaXRlIGFuIHVwZGF0ZWQgdGltZXN0YW1wIHRvIHRoaXMgbGVhc2UgdG8gcHJldmVudCBvdGhlciB0YWJzIGZyb21cclxuICogXCJzdGVhbGluZ1wiIHRoZSBwcmltYXJ5IGxlYXNlXHJcbiAqL1xyXG52YXIgRGJQcmltYXJ5Q2xpZW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gRGJQcmltYXJ5Q2xpZW50KG93bmVySWQsIFxyXG4gICAgLyoqIFdoZXRoZXIgdG8gYWxsb3cgc2hhcmVkIGFjY2VzcyBmcm9tIG11bHRpcGxlIHRhYnMuICovXHJcbiAgICBhbGxvd1RhYlN5bmNocm9uaXphdGlvbiwgbGVhc2VUaW1lc3RhbXBNcykge1xyXG4gICAgICAgIHRoaXMub3duZXJJZCA9IG93bmVySWQ7XHJcbiAgICAgICAgdGhpcy5hbGxvd1RhYlN5bmNocm9uaXphdGlvbiA9IGFsbG93VGFiU3luY2hyb25pemF0aW9uO1xyXG4gICAgICAgIHRoaXMubGVhc2VUaW1lc3RhbXBNcyA9IGxlYXNlVGltZXN0YW1wTXM7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIE5hbWUgb2YgdGhlIEluZGV4ZWREYiBvYmplY3Qgc3RvcmUuXHJcbiAgICAgKlxyXG4gICAgICogTm90ZSB0aGF0IHRoZSBuYW1lICdvd25lcicgaXMgY2hvc2VuIHRvIGVuc3VyZSBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eSB3aXRoXHJcbiAgICAgKiBvbGRlciBjbGllbnRzIHRoYXQgb25seSBzdXBwb3J0ZWQgc2luZ2xlIGxvY2tlZCBhY2Nlc3MgdG8gdGhlIHBlcnNpc3RlbmNlXHJcbiAgICAgKiBsYXllci5cclxuICAgICAqL1xyXG4gICAgRGJQcmltYXJ5Q2xpZW50LnN0b3JlID0gJ293bmVyJztcclxuICAgIC8qKlxyXG4gICAgICogVGhlIGtleSBzdHJpbmcgdXNlZCBmb3IgdGhlIHNpbmdsZSBvYmplY3QgdGhhdCBleGlzdHMgaW4gdGhlXHJcbiAgICAgKiBEYlByaW1hcnlDbGllbnQgc3RvcmUuXHJcbiAgICAgKi9cclxuICAgIERiUHJpbWFyeUNsaWVudC5rZXkgPSAnb3duZXInO1xyXG4gICAgcmV0dXJuIERiUHJpbWFyeUNsaWVudDtcclxufSgpKTtcclxuZnVuY3Rpb24gY3JlYXRlUHJpbWFyeUNsaWVudFN0b3JlKGRiKSB7XHJcbiAgICBkYi5jcmVhdGVPYmplY3RTdG9yZShEYlByaW1hcnlDbGllbnQuc3RvcmUpO1xyXG59XHJcbi8qKlxyXG4gKiBBbiBvYmplY3QgdG8gYmUgc3RvcmVkIGluIHRoZSAnbXV0YXRpb25RdWV1ZXMnIHN0b3JlIGluIEluZGV4ZWREYi5cclxuICpcclxuICogRWFjaCB1c2VyIGdldHMgYSBzaW5nbGUgcXVldWUgb2YgTXV0YXRpb25CYXRjaGVzIHRvIGFwcGx5IHRvIHRoZSBzZXJ2ZXIuXHJcbiAqIERiTXV0YXRpb25RdWV1ZSB0cmFja3MgdGhlIG1ldGFkYXRhIGFib3V0IHRoZSBxdWV1ZS5cclxuICovXHJcbnZhciBEYk11dGF0aW9uUXVldWUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBEYk11dGF0aW9uUXVldWUoXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBub3JtYWxpemVkIHVzZXIgSUQgdG8gd2hpY2ggdGhpcyBxdWV1ZSBiZWxvbmdzLlxyXG4gICAgICovXHJcbiAgICB1c2VySWQsIFxyXG4gICAgLyoqXHJcbiAgICAgKiBBbiBpZGVudGlmaWVyIGZvciB0aGUgaGlnaGVzdCBudW1iZXJlZCBiYXRjaCB0aGF0IGhhcyBiZWVuIGFja25vd2xlZGdlZFxyXG4gICAgICogYnkgdGhlIHNlcnZlci4gQWxsIE11dGF0aW9uQmF0Y2hlcyBpbiB0aGlzIHF1ZXVlIHdpdGggYmF0Y2hJZHMgbGVzc1xyXG4gICAgICogdGhhbiBvciBlcXVhbCB0byB0aGlzIHZhbHVlIGFyZSBjb25zaWRlcmVkIHRvIGhhdmUgYmVlbiBhY2tub3dsZWRnZWQgYnlcclxuICAgICAqIHRoZSBzZXJ2ZXIuXHJcbiAgICAgKlxyXG4gICAgICogTk9URTogdGhpcyBpcyBkZXByZWNhdGVkIGFuZCBubyBsb25nZXIgdXNlZCBieSB0aGUgY29kZS5cclxuICAgICAqL1xyXG4gICAgbGFzdEFja25vd2xlZGdlZEJhdGNoSWQsIFxyXG4gICAgLyoqXHJcbiAgICAgKiBBIHN0cmVhbSB0b2tlbiB0aGF0IHdhcyBwcmV2aW91c2x5IHNlbnQgYnkgdGhlIHNlcnZlci5cclxuICAgICAqXHJcbiAgICAgKiBTZWUgU3RyZWFtaW5nV3JpdGVSZXF1ZXN0IGluIGRhdGFzdG9yZS5wcm90byBmb3IgbW9yZSBkZXRhaWxzIGFib3V0XHJcbiAgICAgKiB1c2FnZS5cclxuICAgICAqXHJcbiAgICAgKiBBZnRlciBzZW5kaW5nIHRoaXMgdG9rZW4sIGVhcmxpZXIgdG9rZW5zIG1heSBub3QgYmUgdXNlZCBhbnltb3JlIHNvXHJcbiAgICAgKiBvbmx5IGEgc2luZ2xlIHN0cmVhbSB0b2tlbiBpcyByZXRhaW5lZC5cclxuICAgICAqL1xyXG4gICAgbGFzdFN0cmVhbVRva2VuKSB7XHJcbiAgICAgICAgdGhpcy51c2VySWQgPSB1c2VySWQ7XHJcbiAgICAgICAgdGhpcy5sYXN0QWNrbm93bGVkZ2VkQmF0Y2hJZCA9IGxhc3RBY2tub3dsZWRnZWRCYXRjaElkO1xyXG4gICAgICAgIHRoaXMubGFzdFN0cmVhbVRva2VuID0gbGFzdFN0cmVhbVRva2VuO1xyXG4gICAgfVxyXG4gICAgLyoqIE5hbWUgb2YgdGhlIEluZGV4ZWREYiBvYmplY3Qgc3RvcmUuICAqL1xyXG4gICAgRGJNdXRhdGlvblF1ZXVlLnN0b3JlID0gJ211dGF0aW9uUXVldWVzJztcclxuICAgIC8qKiBLZXlzIGFyZSBhdXRvbWF0aWNhbGx5IGFzc2lnbmVkIHZpYSB0aGUgdXNlcklkIHByb3BlcnR5LiAqL1xyXG4gICAgRGJNdXRhdGlvblF1ZXVlLmtleVBhdGggPSAndXNlcklkJztcclxuICAgIHJldHVybiBEYk11dGF0aW9uUXVldWU7XHJcbn0oKSk7XHJcbi8qKlxyXG4gKiBBbiBvYmplY3QgdG8gYmUgc3RvcmVkIGluIHRoZSAnbXV0YXRpb25zJyBzdG9yZSBpbiBJbmRleGVkRGIuXHJcbiAqXHJcbiAqIFJlcHJlc2VudHMgYSBiYXRjaCBvZiB1c2VyLWxldmVsIG11dGF0aW9ucyBpbnRlbmRlZCB0byBiZSBzZW50IHRvIHRoZSBzZXJ2ZXJcclxuICogaW4gYSBzaW5nbGUgd3JpdGUuIEVhY2ggdXNlci1sZXZlbCBiYXRjaCBnZXRzIGEgc2VwYXJhdGUgRGJNdXRhdGlvbkJhdGNoXHJcbiAqIHdpdGggYSBuZXcgYmF0Y2hJZC5cclxuICovXHJcbnZhciBEYk11dGF0aW9uQmF0Y2ggPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBEYk11dGF0aW9uQmF0Y2goXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBub3JtYWxpemVkIHVzZXIgSUQgdG8gd2hpY2ggdGhpcyBiYXRjaCBiZWxvbmdzLlxyXG4gICAgICovXHJcbiAgICB1c2VySWQsIFxyXG4gICAgLyoqXHJcbiAgICAgKiBBbiBpZGVudGlmaWVyIGZvciB0aGlzIGJhdGNoLCBhbGxvY2F0ZWQgdXNpbmcgYW4gYXV0by1nZW5lcmF0ZWQga2V5LlxyXG4gICAgICovXHJcbiAgICBiYXRjaElkLCBcclxuICAgIC8qKlxyXG4gICAgICogVGhlIGxvY2FsIHdyaXRlIHRpbWUgb2YgdGhlIGJhdGNoLCBzdG9yZWQgYXMgbWlsbGlzZWNvbmRzIHNpbmNlIHRoZVxyXG4gICAgICogZXBvY2guXHJcbiAgICAgKi9cclxuICAgIGxvY2FsV3JpdGVUaW1lTXMsIFxyXG4gICAgLyoqXHJcbiAgICAgKiBBIGxpc3Qgb2YgXCJtdXRhdGlvbnNcIiB0aGF0IHJlcHJlc2VudCBhIHBhcnRpYWwgYmFzZSBzdGF0ZSBmcm9tIHdoZW4gdGhpc1xyXG4gICAgICogd3JpdGUgYmF0Y2ggd2FzIGluaXRpYWxseSBjcmVhdGVkLiBEdXJpbmcgbG9jYWwgYXBwbGljYXRpb24gb2YgdGhlIHdyaXRlXHJcbiAgICAgKiBiYXRjaCwgdGhlc2UgYmFzZU11dGF0aW9ucyBhcmUgYXBwbGllZCBwcmlvciB0byB0aGUgcmVhbCB3cml0ZXMgaW4gb3JkZXJcclxuICAgICAqIHRvIG92ZXJyaWRlIGNlcnRhaW4gZG9jdW1lbnQgZmllbGRzIGZyb20gdGhlIHJlbW90ZSBkb2N1bWVudCBjYWNoZS4gVGhpc1xyXG4gICAgICogaXMgbmVjZXNzYXJ5IGluIHRoZSBjYXNlIG9mIG5vbi1pZGVtcG90ZW50IHdyaXRlcyAoZS5nLiBgaW5jcmVtZW50KClgXHJcbiAgICAgKiB0cmFuc2Zvcm1zKSB0byBtYWtlIHN1cmUgdGhhdCB0aGUgbG9jYWwgdmlldyBvZiB0aGUgbW9kaWZpZWQgZG9jdW1lbnRzXHJcbiAgICAgKiBkb2Vzbid0IGZsaWNrZXIgaWYgdGhlIHJlbW90ZSBkb2N1bWVudCBjYWNoZSByZWNlaXZlcyB0aGUgcmVzdWx0IG9mIHRoZVxyXG4gICAgICogbm9uLWlkZW1wb3RlbnQgd3JpdGUgYmVmb3JlIHRoZSB3cml0ZSBpcyByZW1vdmVkIGZyb20gdGhlIHF1ZXVlLlxyXG4gICAgICpcclxuICAgICAqIFRoZXNlIG11dGF0aW9ucyBhcmUgbmV2ZXIgc2VudCB0byB0aGUgYmFja2VuZC5cclxuICAgICAqL1xyXG4gICAgYmFzZU11dGF0aW9ucywgXHJcbiAgICAvKipcclxuICAgICAqIEEgbGlzdCBvZiBtdXRhdGlvbnMgdG8gYXBwbHkuIEFsbCBtdXRhdGlvbnMgd2lsbCBiZSBhcHBsaWVkIGF0b21pY2FsbHkuXHJcbiAgICAgKlxyXG4gICAgICogTXV0YXRpb25zIGFyZSBzZXJpYWxpemVkIHZpYSBKc29uUHJvdG9TZXJpYWxpemVyLnRvTXV0YXRpb24oKS5cclxuICAgICAqL1xyXG4gICAgbXV0YXRpb25zKSB7XHJcbiAgICAgICAgdGhpcy51c2VySWQgPSB1c2VySWQ7XHJcbiAgICAgICAgdGhpcy5iYXRjaElkID0gYmF0Y2hJZDtcclxuICAgICAgICB0aGlzLmxvY2FsV3JpdGVUaW1lTXMgPSBsb2NhbFdyaXRlVGltZU1zO1xyXG4gICAgICAgIHRoaXMuYmFzZU11dGF0aW9ucyA9IGJhc2VNdXRhdGlvbnM7XHJcbiAgICAgICAgdGhpcy5tdXRhdGlvbnMgPSBtdXRhdGlvbnM7XHJcbiAgICB9XHJcbiAgICAvKiogTmFtZSBvZiB0aGUgSW5kZXhlZERiIG9iamVjdCBzdG9yZS4gICovXHJcbiAgICBEYk11dGF0aW9uQmF0Y2guc3RvcmUgPSAnbXV0YXRpb25zJztcclxuICAgIC8qKiBLZXlzIGFyZSBhdXRvbWF0aWNhbGx5IGFzc2lnbmVkIHZpYSB0aGUgdXNlcklkLCBiYXRjaElkIHByb3BlcnRpZXMuICovXHJcbiAgICBEYk11dGF0aW9uQmF0Y2gua2V5UGF0aCA9ICdiYXRjaElkJztcclxuICAgIC8qKiBUaGUgaW5kZXggbmFtZSBmb3IgbG9va3VwIG9mIG11dGF0aW9ucyBieSB1c2VyLiAqL1xyXG4gICAgRGJNdXRhdGlvbkJhdGNoLnVzZXJNdXRhdGlvbnNJbmRleCA9ICd1c2VyTXV0YXRpb25zSW5kZXgnO1xyXG4gICAgLyoqIFRoZSB1c2VyIG11dGF0aW9ucyBpbmRleCBpcyBrZXllZCBieSBbdXNlcklkLCBiYXRjaElkXSBwYWlycy4gKi9cclxuICAgIERiTXV0YXRpb25CYXRjaC51c2VyTXV0YXRpb25zS2V5UGF0aCA9IFsndXNlcklkJywgJ2JhdGNoSWQnXTtcclxuICAgIHJldHVybiBEYk11dGF0aW9uQmF0Y2g7XHJcbn0oKSk7XHJcbmZ1bmN0aW9uIGNyZWF0ZU11dGF0aW9uUXVldWUoZGIpIHtcclxuICAgIGRiLmNyZWF0ZU9iamVjdFN0b3JlKERiTXV0YXRpb25RdWV1ZS5zdG9yZSwge1xyXG4gICAgICAgIGtleVBhdGg6IERiTXV0YXRpb25RdWV1ZS5rZXlQYXRoXHJcbiAgICB9KTtcclxuICAgIHZhciBtdXRhdGlvbkJhdGNoZXNTdG9yZSA9IGRiLmNyZWF0ZU9iamVjdFN0b3JlKERiTXV0YXRpb25CYXRjaC5zdG9yZSwge1xyXG4gICAgICAgIGtleVBhdGg6IERiTXV0YXRpb25CYXRjaC5rZXlQYXRoLFxyXG4gICAgICAgIGF1dG9JbmNyZW1lbnQ6IHRydWVcclxuICAgIH0pO1xyXG4gICAgbXV0YXRpb25CYXRjaGVzU3RvcmUuY3JlYXRlSW5kZXgoRGJNdXRhdGlvbkJhdGNoLnVzZXJNdXRhdGlvbnNJbmRleCwgRGJNdXRhdGlvbkJhdGNoLnVzZXJNdXRhdGlvbnNLZXlQYXRoLCB7IHVuaXF1ZTogdHJ1ZSB9KTtcclxuICAgIGRiLmNyZWF0ZU9iamVjdFN0b3JlKERiRG9jdW1lbnRNdXRhdGlvbi5zdG9yZSk7XHJcbn1cclxuLyoqXHJcbiAqIFVwZ3JhZGUgZnVuY3Rpb24gdG8gbWlncmF0ZSB0aGUgJ211dGF0aW9ucycgc3RvcmUgZnJvbSBWMSB0byBWMy4gTG9hZHNcclxuICogYW5kIHJld3JpdGVzIGFsbCBkYXRhLlxyXG4gKi9cclxuZnVuY3Rpb24gdXBncmFkZU11dGF0aW9uQmF0Y2hTY2hlbWFBbmRNaWdyYXRlRGF0YShkYiwgdHhuKSB7XHJcbiAgICB2YXIgdjFNdXRhdGlvbnNTdG9yZSA9IHR4bi5zdG9yZShEYk11dGF0aW9uQmF0Y2guc3RvcmUpO1xyXG4gICAgcmV0dXJuIHYxTXV0YXRpb25zU3RvcmUubG9hZEFsbCgpLm5leHQoZnVuY3Rpb24gKGV4aXN0aW5nTXV0YXRpb25zKSB7XHJcbiAgICAgICAgZGIuZGVsZXRlT2JqZWN0U3RvcmUoRGJNdXRhdGlvbkJhdGNoLnN0b3JlKTtcclxuICAgICAgICB2YXIgbXV0YXRpb25zU3RvcmUgPSBkYi5jcmVhdGVPYmplY3RTdG9yZShEYk11dGF0aW9uQmF0Y2guc3RvcmUsIHtcclxuICAgICAgICAgICAga2V5UGF0aDogRGJNdXRhdGlvbkJhdGNoLmtleVBhdGgsXHJcbiAgICAgICAgICAgIGF1dG9JbmNyZW1lbnQ6IHRydWVcclxuICAgICAgICB9KTtcclxuICAgICAgICBtdXRhdGlvbnNTdG9yZS5jcmVhdGVJbmRleChEYk11dGF0aW9uQmF0Y2gudXNlck11dGF0aW9uc0luZGV4LCBEYk11dGF0aW9uQmF0Y2gudXNlck11dGF0aW9uc0tleVBhdGgsIHsgdW5pcXVlOiB0cnVlIH0pO1xyXG4gICAgICAgIHZhciB2M011dGF0aW9uc1N0b3JlID0gdHhuLnN0b3JlKERiTXV0YXRpb25CYXRjaC5zdG9yZSk7XHJcbiAgICAgICAgdmFyIHdyaXRlQWxsID0gZXhpc3RpbmdNdXRhdGlvbnMubWFwKGZ1bmN0aW9uIChtdXRhdGlvbikge1xyXG4gICAgICAgICAgICByZXR1cm4gdjNNdXRhdGlvbnNTdG9yZS5wdXQobXV0YXRpb24pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2Uud2FpdEZvcih3cml0ZUFsbCk7XHJcbiAgICB9KTtcclxufVxyXG4vKipcclxuICogQW4gb2JqZWN0IHRvIGJlIHN0b3JlZCBpbiB0aGUgJ2RvY3VtZW50TXV0YXRpb25zJyBzdG9yZSBpbiBJbmRleGVkRGIuXHJcbiAqXHJcbiAqIEEgbWFudWFsbHkgbWFpbnRhaW5lZCBpbmRleCBvZiBhbGwgdGhlIG11dGF0aW9uIGJhdGNoZXMgdGhhdCBhZmZlY3QgYSBnaXZlblxyXG4gKiBkb2N1bWVudCBrZXkuIFRoZSByb3dzIGluIHRoaXMgdGFibGUgYXJlIHJlZmVyZW5jZXMgYmFzZWQgb24gdGhlIGNvbnRlbnRzIG9mXHJcbiAqIERiTXV0YXRpb25CYXRjaC5tdXRhdGlvbnMuXHJcbiAqL1xyXG52YXIgRGJEb2N1bWVudE11dGF0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gRGJEb2N1bWVudE11dGF0aW9uKCkge1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGVzIGEgW3VzZXJJZF0ga2V5IGZvciB1c2UgaW4gdGhlIERiRG9jdW1lbnRNdXRhdGlvbnMgaW5kZXggdG8gaXRlcmF0ZVxyXG4gICAgICogb3ZlciBhbGwgb2YgYSB1c2VyJ3MgZG9jdW1lbnQgbXV0YXRpb25zLlxyXG4gICAgICovXHJcbiAgICBEYkRvY3VtZW50TXV0YXRpb24ucHJlZml4Rm9yVXNlciA9IGZ1bmN0aW9uICh1c2VySWQpIHtcclxuICAgICAgICByZXR1cm4gW3VzZXJJZF07XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGVzIGEgW3VzZXJJZCwgZW5jb2RlZFBhdGhdIGtleSBmb3IgdXNlIGluIHRoZSBEYkRvY3VtZW50TXV0YXRpb25zXHJcbiAgICAgKiBpbmRleCB0byBpdGVyYXRlIG92ZXIgYWxsIGF0IGRvY3VtZW50IG11dGF0aW9ucyBmb3IgYSBnaXZlbiBwYXRoIG9yIGxvd2VyLlxyXG4gICAgICovXHJcbiAgICBEYkRvY3VtZW50TXV0YXRpb24ucHJlZml4Rm9yUGF0aCA9IGZ1bmN0aW9uICh1c2VySWQsIHBhdGgpIHtcclxuICAgICAgICByZXR1cm4gW3VzZXJJZCwgZW5jb2RlKHBhdGgpXTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYSBmdWxsIGluZGV4IGtleSBvZiBbdXNlcklkLCBlbmNvZGVkUGF0aCwgYmF0Y2hJZF0gZm9yIGluc2VydGluZ1xyXG4gICAgICogYW5kIGRlbGV0aW5nIGludG8gdGhlIERiRG9jdW1lbnRNdXRhdGlvbnMgaW5kZXguXHJcbiAgICAgKi9cclxuICAgIERiRG9jdW1lbnRNdXRhdGlvbi5rZXkgPSBmdW5jdGlvbiAodXNlcklkLCBwYXRoLCBiYXRjaElkKSB7XHJcbiAgICAgICAgcmV0dXJuIFt1c2VySWQsIGVuY29kZShwYXRoKSwgYmF0Y2hJZF07XHJcbiAgICB9O1xyXG4gICAgRGJEb2N1bWVudE11dGF0aW9uLnN0b3JlID0gJ2RvY3VtZW50TXV0YXRpb25zJztcclxuICAgIC8qKlxyXG4gICAgICogQmVjYXVzZSB3ZSBzdG9yZSBhbGwgdGhlIHVzZWZ1bCBpbmZvcm1hdGlvbiBmb3IgdGhpcyBzdG9yZSBpbiB0aGUga2V5LFxyXG4gICAgICogdGhlcmUgaXMgbm8gdXNlZnVsIGluZm9ybWF0aW9uIHRvIHN0b3JlIGFzIHRoZSB2YWx1ZS4gVGhlIHJhdyAodW5lbmNvZGVkKVxyXG4gICAgICogcGF0aCBjYW5ub3QgYmUgc3RvcmVkIGJlY2F1c2UgSW5kZXhlZERiIGRvZXNuJ3Qgc3RvcmUgcHJvdG90eXBlXHJcbiAgICAgKiBpbmZvcm1hdGlvbi5cclxuICAgICAqL1xyXG4gICAgRGJEb2N1bWVudE11dGF0aW9uLlBMQUNFSE9MREVSID0gbmV3IERiRG9jdW1lbnRNdXRhdGlvbigpO1xyXG4gICAgcmV0dXJuIERiRG9jdW1lbnRNdXRhdGlvbjtcclxufSgpKTtcclxuZnVuY3Rpb24gY3JlYXRlUmVtb3RlRG9jdW1lbnRDYWNoZShkYikge1xyXG4gICAgZGIuY3JlYXRlT2JqZWN0U3RvcmUoRGJSZW1vdGVEb2N1bWVudC5zdG9yZSk7XHJcbn1cclxuLyoqXHJcbiAqIFJlcHJlc2VudHMgdGhlIGtub3duIGFic2VuY2Ugb2YgYSBkb2N1bWVudCBhdCBhIHBhcnRpY3VsYXIgdmVyc2lvbi5cclxuICogU3RvcmVkIGluIEluZGV4ZWREYiBhcyBwYXJ0IG9mIGEgRGJSZW1vdGVEb2N1bWVudCBvYmplY3QuXHJcbiAqL1xyXG52YXIgRGJOb0RvY3VtZW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gRGJOb0RvY3VtZW50KHBhdGgsIHJlYWRUaW1lKSB7XHJcbiAgICAgICAgdGhpcy5wYXRoID0gcGF0aDtcclxuICAgICAgICB0aGlzLnJlYWRUaW1lID0gcmVhZFRpbWU7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gRGJOb0RvY3VtZW50O1xyXG59KCkpO1xyXG4vKipcclxuICogUmVwcmVzZW50cyBhIGRvY3VtZW50IHRoYXQgaXMga25vd24gdG8gZXhpc3QgYnV0IHdob3NlIGRhdGEgaXMgdW5rbm93bi5cclxuICogU3RvcmVkIGluIEluZGV4ZWREYiBhcyBwYXJ0IG9mIGEgRGJSZW1vdGVEb2N1bWVudCBvYmplY3QuXHJcbiAqL1xyXG52YXIgRGJVbmtub3duRG9jdW1lbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBEYlVua25vd25Eb2N1bWVudChwYXRoLCB2ZXJzaW9uKSB7XHJcbiAgICAgICAgdGhpcy5wYXRoID0gcGF0aDtcclxuICAgICAgICB0aGlzLnZlcnNpb24gPSB2ZXJzaW9uO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIERiVW5rbm93bkRvY3VtZW50O1xyXG59KCkpO1xyXG4vKipcclxuICogQW4gb2JqZWN0IHRvIGJlIHN0b3JlZCBpbiB0aGUgJ3JlbW90ZURvY3VtZW50cycgc3RvcmUgaW4gSW5kZXhlZERiLlxyXG4gKiBJdCByZXByZXNlbnRzIGVpdGhlcjpcclxuICpcclxuICogLSBBIGNvbXBsZXRlIGRvY3VtZW50LlxyXG4gKiAtIEEgXCJubyBkb2N1bWVudFwiIHJlcHJlc2VudGluZyBhIGRvY3VtZW50IHRoYXQgaXMga25vd24gbm90IHRvIGV4aXN0IChhdFxyXG4gKiBzb21lIHZlcnNpb24pLlxyXG4gKiAtIEFuIFwidW5rbm93biBkb2N1bWVudFwiIHJlcHJlc2VudGluZyBhIGRvY3VtZW50IHRoYXQgaXMga25vd24gdG8gZXhpc3QgKGF0XHJcbiAqIHNvbWUgdmVyc2lvbikgYnV0IHdob3NlIGNvbnRlbnRzIGFyZSB1bmtub3duLlxyXG4gKlxyXG4gKiBOb3RlOiBUaGlzIGlzIHRoZSBwZXJzaXN0ZWQgZXF1aXZhbGVudCBvZiBhIE1heWJlRG9jdW1lbnQgYW5kIGNvdWxkIHBlcmhhcHNcclxuICogYmUgbWFkZSBtb3JlIGdlbmVyYWwgaWYgbmVjZXNzYXJ5LlxyXG4gKi9cclxudmFyIERiUmVtb3RlRG9jdW1lbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICAvLyBUT0RPOiBXZSBhcmUgY3VycmVudGx5IHN0b3JpbmcgZnVsbCBkb2N1bWVudCBrZXlzIGFsbW9zdCB0aHJlZSB0aW1lc1xyXG4gICAgLy8gKG9uY2UgYXMgcGFydCBvZiB0aGUgcHJpbWFyeSBrZXksIG9uY2UgLSBwYXJ0bHkgLSBhcyBgcGFyZW50UGF0aGAgYW5kIG9uY2VcclxuICAgIC8vIGluc2lkZSB0aGUgZW5jb2RlZCBkb2N1bWVudHMpLiBEdXJpbmcgb3VyIG5leHQgbWlncmF0aW9uLCB3ZSBzaG91bGRcclxuICAgIC8vIHJld3JpdGUgdGhlIHByaW1hcnkga2V5IGFzIHBhcmVudFBhdGggKyBkb2N1bWVudCBJRCB3aGljaCB3b3VsZCBhbGxvdyB1c1xyXG4gICAgLy8gdG8gZHJvcCBvbmUgdmFsdWUuXHJcbiAgICBmdW5jdGlvbiBEYlJlbW90ZURvY3VtZW50KFxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXQgdG8gYW4gaW5zdGFuY2Ugb2YgRGJVbmtub3duRG9jdW1lbnQgaWYgdGhlIGRhdGEgZm9yIGEgZG9jdW1lbnQgaXNcclxuICAgICAqIG5vdCBrbm93biwgYnV0IGl0IGlzIGtub3duIHRoYXQgYSBkb2N1bWVudCBleGlzdHMgYXQgdGhlIHNwZWNpZmllZFxyXG4gICAgICogdmVyc2lvbiAoZS5nLiBpdCBoYWQgYSBzdWNjZXNzZnVsIHVwZGF0ZSBhcHBsaWVkIHRvIGl0KVxyXG4gICAgICovXHJcbiAgICB1bmtub3duRG9jdW1lbnQsIFxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXQgdG8gYW4gaW5zdGFuY2Ugb2YgYSBEYk5vRG9jdW1lbnQgaWYgaXQgaXMga25vd24gdGhhdCBubyBkb2N1bWVudFxyXG4gICAgICogZXhpc3RzLlxyXG4gICAgICovXHJcbiAgICBub0RvY3VtZW50LCBcclxuICAgIC8qKlxyXG4gICAgICogU2V0IHRvIGFuIGluc3RhbmNlIG9mIGEgRG9jdW1lbnQgaWYgdGhlcmUncyBhIGNhY2hlZCB2ZXJzaW9uIG9mIHRoZVxyXG4gICAgICogZG9jdW1lbnQuXHJcbiAgICAgKi9cclxuICAgIGRvY3VtZW50LCBcclxuICAgIC8qKlxyXG4gICAgICogRG9jdW1lbnRzIHRoYXQgd2VyZSB3cml0dGVuIHRvIHRoZSByZW1vdGUgZG9jdW1lbnQgc3RvcmUgYmFzZWQgb25cclxuICAgICAqIGEgd3JpdGUgYWNrbm93bGVkZ21lbnQgYXJlIG1hcmtlZCB3aXRoIGBoYXNDb21taXR0ZWRNdXRhdGlvbnNgLiBUaGVzZVxyXG4gICAgICogZG9jdW1lbnRzIGFyZSBwb3RlbnRpYWxseSBpbmNvbnNpc3RlbnQgd2l0aCB0aGUgYmFja2VuZCdzIGNvcHkgYW5kIHVzZVxyXG4gICAgICogdGhlIHdyaXRlJ3MgY29tbWl0IHZlcnNpb24gYXMgdGhlaXIgZG9jdW1lbnQgdmVyc2lvbi5cclxuICAgICAqL1xyXG4gICAgaGFzQ29tbWl0dGVkTXV0YXRpb25zLCBcclxuICAgIC8qKlxyXG4gICAgICogV2hlbiB0aGUgZG9jdW1lbnQgd2FzIHJlYWQgZnJvbSB0aGUgYmFja2VuZC4gVW5kZWZpbmVkIGZvciBkYXRhIHdyaXR0ZW5cclxuICAgICAqIHByaW9yIHRvIHNjaGVtYSB2ZXJzaW9uIDkuXHJcbiAgICAgKi9cclxuICAgIHJlYWRUaW1lLCBcclxuICAgIC8qKlxyXG4gICAgICogVGhlIHBhdGggb2YgdGhlIGNvbGxlY3Rpb24gdGhpcyBkb2N1bWVudCBpcyBwYXJ0IG9mLiBVbmRlZmluZWQgZm9yIGRhdGFcclxuICAgICAqIHdyaXR0ZW4gcHJpb3IgdG8gc2NoZW1hIHZlcnNpb24gOS5cclxuICAgICAqL1xyXG4gICAgcGFyZW50UGF0aCkge1xyXG4gICAgICAgIHRoaXMudW5rbm93bkRvY3VtZW50ID0gdW5rbm93bkRvY3VtZW50O1xyXG4gICAgICAgIHRoaXMubm9Eb2N1bWVudCA9IG5vRG9jdW1lbnQ7XHJcbiAgICAgICAgdGhpcy5kb2N1bWVudCA9IGRvY3VtZW50O1xyXG4gICAgICAgIHRoaXMuaGFzQ29tbWl0dGVkTXV0YXRpb25zID0gaGFzQ29tbWl0dGVkTXV0YXRpb25zO1xyXG4gICAgICAgIHRoaXMucmVhZFRpbWUgPSByZWFkVGltZTtcclxuICAgICAgICB0aGlzLnBhcmVudFBhdGggPSBwYXJlbnRQYXRoO1xyXG4gICAgfVxyXG4gICAgRGJSZW1vdGVEb2N1bWVudC5zdG9yZSA9ICdyZW1vdGVEb2N1bWVudHMnO1xyXG4gICAgLyoqXHJcbiAgICAgKiBBbiBpbmRleCB0aGF0IHByb3ZpZGVzIGFjY2VzcyB0byBhbGwgZW50cmllcyBzb3J0ZWQgYnkgcmVhZCB0aW1lICh3aGljaFxyXG4gICAgICogY29ycmVzcG9uZHMgdG8gdGhlIGxhc3QgbW9kaWZpY2F0aW9uIHRpbWUgb2YgZWFjaCByb3cpLlxyXG4gICAgICpcclxuICAgICAqIFRoaXMgaW5kZXggaXMgdXNlZCB0byBwcm92aWRlIGEgY2hhbmdlbG9nIGZvciBNdWx0aS1UYWIuXHJcbiAgICAgKi9cclxuICAgIERiUmVtb3RlRG9jdW1lbnQucmVhZFRpbWVJbmRleCA9ICdyZWFkVGltZUluZGV4JztcclxuICAgIERiUmVtb3RlRG9jdW1lbnQucmVhZFRpbWVJbmRleFBhdGggPSAncmVhZFRpbWUnO1xyXG4gICAgLyoqXHJcbiAgICAgKiBBbiBpbmRleCB0aGF0IHByb3ZpZGVzIGFjY2VzcyB0byBkb2N1bWVudHMgaW4gYSBjb2xsZWN0aW9uIHNvcnRlZCBieSByZWFkXHJcbiAgICAgKiB0aW1lLlxyXG4gICAgICpcclxuICAgICAqIFRoaXMgaW5kZXggaXMgdXNlZCB0byBhbGxvdyB0aGUgUmVtb3RlRG9jdW1lbnRDYWNoZSB0byBmZXRjaCBuZXdseSBjaGFuZ2VkXHJcbiAgICAgKiBkb2N1bWVudHMgaW4gYSBjb2xsZWN0aW9uLlxyXG4gICAgICovXHJcbiAgICBEYlJlbW90ZURvY3VtZW50LmNvbGxlY3Rpb25SZWFkVGltZUluZGV4ID0gJ2NvbGxlY3Rpb25SZWFkVGltZUluZGV4JztcclxuICAgIERiUmVtb3RlRG9jdW1lbnQuY29sbGVjdGlvblJlYWRUaW1lSW5kZXhQYXRoID0gWydwYXJlbnRQYXRoJywgJ3JlYWRUaW1lJ107XHJcbiAgICByZXR1cm4gRGJSZW1vdGVEb2N1bWVudDtcclxufSgpKTtcclxuLyoqXHJcbiAqIENvbnRhaW5zIGEgc2luZ2xlIGVudHJ5IHRoYXQgaGFzIG1ldGFkYXRhIGFib3V0IHRoZSByZW1vdGUgZG9jdW1lbnQgY2FjaGUuXHJcbiAqL1xyXG52YXIgRGJSZW1vdGVEb2N1bWVudEdsb2JhbCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIGJ5dGVTaXplIEFwcHJveGltYXRlbHkgdGhlIHRvdGFsIHNpemUgaW4gYnl0ZXMgb2YgYWxsIHRoZSBkb2N1bWVudHMgaW4gdGhlIGRvY3VtZW50XHJcbiAgICAgKiBjYWNoZS5cclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gRGJSZW1vdGVEb2N1bWVudEdsb2JhbChieXRlU2l6ZSkge1xyXG4gICAgICAgIHRoaXMuYnl0ZVNpemUgPSBieXRlU2l6ZTtcclxuICAgIH1cclxuICAgIERiUmVtb3RlRG9jdW1lbnRHbG9iYWwuc3RvcmUgPSAncmVtb3RlRG9jdW1lbnRHbG9iYWwnO1xyXG4gICAgRGJSZW1vdGVEb2N1bWVudEdsb2JhbC5rZXkgPSAncmVtb3RlRG9jdW1lbnRHbG9iYWxLZXknO1xyXG4gICAgcmV0dXJuIERiUmVtb3RlRG9jdW1lbnRHbG9iYWw7XHJcbn0oKSk7XHJcbmZ1bmN0aW9uIGNyZWF0ZURvY3VtZW50R2xvYmFsU3RvcmUoZGIpIHtcclxuICAgIGRiLmNyZWF0ZU9iamVjdFN0b3JlKERiUmVtb3RlRG9jdW1lbnRHbG9iYWwuc3RvcmUpO1xyXG59XHJcbi8qKlxyXG4gKiBBbiBvYmplY3QgdG8gYmUgc3RvcmVkIGluIHRoZSAndGFyZ2V0cycgc3RvcmUgaW4gSW5kZXhlZERiLlxyXG4gKlxyXG4gKiBUaGlzIGlzIGJhc2VkIG9uIGFuZCBzaG91bGQgYmUga2VwdCBpbiBzeW5jIHdpdGggdGhlIHByb3RvIHVzZWQgaW4gdGhlIGlPU1xyXG4gKiBjbGllbnQuXHJcbiAqXHJcbiAqIEVhY2ggcXVlcnkgdGhlIGNsaWVudCBsaXN0ZW5zIHRvIGFnYWluc3QgdGhlIHNlcnZlciBpcyB0cmFja2VkIG9uIGRpc2sgc29cclxuICogdGhhdCB0aGUgcXVlcnkgY2FuIGJlIGVmZmljaWVudGx5IHJlc3VtZWQgb24gcmVzdGFydC5cclxuICovXHJcbnZhciBEYlRhcmdldCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIERiVGFyZ2V0KFxyXG4gICAgLyoqXHJcbiAgICAgKiBBbiBhdXRvLWdlbmVyYXRlZCBzZXF1ZW50aWFsIG51bWVyaWMgaWRlbnRpZmllciBmb3IgdGhlIHF1ZXJ5LlxyXG4gICAgICpcclxuICAgICAqIFF1ZXJpZXMgYXJlIHN0b3JlZCB1c2luZyB0aGVpciBjYW5vbmljYWxJZCBhcyB0aGUga2V5LCBidXQgdGhlc2VcclxuICAgICAqIGNhbm9uaWNhbElkcyBjYW4gYmUgcXVpdGUgbG9uZyBzbyB3ZSBhZGRpdGlvbmFsbHkgYXNzaWduIGEgdW5pcXVlXHJcbiAgICAgKiBxdWVyeUlkIHdoaWNoIGNhbiBiZSB1c2VkIGJ5IHJlZmVyZW5jZWQgZGF0YSBzdHJ1Y3R1cmVzIChlLmcuXHJcbiAgICAgKiBpbmRleGVzKSB0byBtaW5pbWl6ZSB0aGUgb24tZGlzayBjb3N0LlxyXG4gICAgICovXHJcbiAgICB0YXJnZXRJZCwgXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBjYW5vbmljYWwgc3RyaW5nIHJlcHJlc2VudGluZyB0aGlzIHF1ZXJ5LiBUaGlzIGlzIG5vdCB1bmlxdWUuXHJcbiAgICAgKi9cclxuICAgIGNhbm9uaWNhbElkLCBcclxuICAgIC8qKlxyXG4gICAgICogVGhlIGxhc3QgcmVhZFRpbWUgcmVjZWl2ZWQgZnJvbSB0aGUgV2F0Y2ggU2VydmljZSBmb3IgdGhpcyBxdWVyeS5cclxuICAgICAqXHJcbiAgICAgKiBUaGlzIGlzIHRoZSBzYW1lIHZhbHVlIGFzIFRhcmdldENoYW5nZS5yZWFkX3RpbWUgaW4gdGhlIHByb3Rvcy5cclxuICAgICAqL1xyXG4gICAgcmVhZFRpbWUsIFxyXG4gICAgLyoqXHJcbiAgICAgKiBBbiBvcGFxdWUsIHNlcnZlci1hc3NpZ25lZCB0b2tlbiB0aGF0IGFsbG93cyB3YXRjaGluZyBhIHF1ZXJ5IHRvIGJlXHJcbiAgICAgKiByZXN1bWVkIGFmdGVyIGRpc2Nvbm5lY3Rpbmcgd2l0aG91dCByZXRyYW5zbWl0dGluZyBhbGwgdGhlIGRhdGFcclxuICAgICAqIHRoYXQgbWF0Y2hlcyB0aGUgcXVlcnkuIFRoZSByZXN1bWUgdG9rZW4gZXNzZW50aWFsbHkgaWRlbnRpZmllcyBhXHJcbiAgICAgKiBwb2ludCBpbiB0aW1lIGZyb20gd2hpY2ggdGhlIHNlcnZlciBzaG91bGQgcmVzdW1lIHNlbmRpbmcgcmVzdWx0cy5cclxuICAgICAqXHJcbiAgICAgKiBUaGlzIGlzIHJlbGF0ZWQgdG8gdGhlIHNuYXBzaG90VmVyc2lvbiBpbiB0aGF0IHRoZSByZXN1bWVUb2tlblxyXG4gICAgICogZWZmZWN0aXZlbHkgYWxzbyBlbmNvZGVzIHRoYXQgdmFsdWUsIGJ1dCB0aGUgcmVzdW1lVG9rZW4gaXMgb3BhcXVlXHJcbiAgICAgKiBhbmQgc29tZXRpbWVzIGVuY29kZXMgYWRkaXRpb25hbCBpbmZvcm1hdGlvbi5cclxuICAgICAqXHJcbiAgICAgKiBBIGNvbnNlcXVlbmNlIG9mIHRoaXMgaXMgdGhhdCB0aGUgcmVzdW1lVG9rZW4gc2hvdWxkIGJlIHVzZWQgd2hlblxyXG4gICAgICogYXNraW5nIHRoZSBzZXJ2ZXIgdG8gcmVhc29uIGFib3V0IHdoZXJlIHRoaXMgY2xpZW50IGlzIGluIHRoZSB3YXRjaFxyXG4gICAgICogc3RyZWFtLCBidXQgdGhlIGNsaWVudCBzaG91bGQgdXNlIHRoZSBzbmFwc2hvdFZlcnNpb24gZm9yIGl0cyBvd25cclxuICAgICAqIHB1cnBvc2VzLlxyXG4gICAgICpcclxuICAgICAqIFRoaXMgaXMgdGhlIHNhbWUgdmFsdWUgYXMgVGFyZ2V0Q2hhbmdlLnJlc3VtZV90b2tlbiBpbiB0aGUgcHJvdG9zLlxyXG4gICAgICovXHJcbiAgICByZXN1bWVUb2tlbiwgXHJcbiAgICAvKipcclxuICAgICAqIEEgc2VxdWVuY2UgbnVtYmVyIHJlcHJlc2VudGluZyB0aGUgbGFzdCB0aW1lIHRoaXMgcXVlcnkgd2FzXHJcbiAgICAgKiBsaXN0ZW5lZCB0bywgdXNlZCBmb3IgZ2FyYmFnZSBjb2xsZWN0aW9uIHB1cnBvc2VzLlxyXG4gICAgICpcclxuICAgICAqIENvbnZlbnRpb25hbGx5IHRoaXMgd291bGQgYmUgYSB0aW1lc3RhbXAgdmFsdWUsIGJ1dCBkZXZpY2UtbG9jYWxcclxuICAgICAqIGNsb2NrcyBhcmUgdW5yZWxpYWJsZSBhbmQgdGhleSBtdXN0IGJlIGFibGUgdG8gY3JlYXRlIG5ldyBsaXN0ZW5zXHJcbiAgICAgKiBldmVuIHdoaWxlIGRpc2Nvbm5lY3RlZC4gSW5zdGVhZCB0aGlzIHNob3VsZCBiZSBhIG1vbm90b25pY2FsbHlcclxuICAgICAqIGluY3JlYXNpbmcgbnVtYmVyIHRoYXQncyBpbmNyZW1lbnRlZCBvbiBlYWNoIGxpc3RlbiBjYWxsLlxyXG4gICAgICpcclxuICAgICAqIFRoaXMgaXMgZGlmZmVyZW50IGZyb20gdGhlIHF1ZXJ5SWQgc2luY2UgdGhlIHF1ZXJ5SWQgaXMgYW5cclxuICAgICAqIGltbXV0YWJsZSBpZGVudGlmaWVyIGFzc2lnbmVkIHRvIHRoZSBRdWVyeSBvbiBmaXJzdCB1c2Ugd2hpbGVcclxuICAgICAqIGxhc3RMaXN0ZW5TZXF1ZW5jZU51bWJlciBpcyB1cGRhdGVkIGV2ZXJ5IHRpbWUgdGhlIHF1ZXJ5IGlzXHJcbiAgICAgKiBsaXN0ZW5lZCB0by5cclxuICAgICAqL1xyXG4gICAgbGFzdExpc3RlblNlcXVlbmNlTnVtYmVyLCBcclxuICAgIC8qKlxyXG4gICAgICogRGVub3RlcyB0aGUgbWF4aW11bSBzbmFwc2hvdCB2ZXJzaW9uIGF0IHdoaWNoIHRoZSBhc3NvY2lhdGVkIHF1ZXJ5IHZpZXdcclxuICAgICAqIGNvbnRhaW5lZCBubyBsaW1ibyBkb2N1bWVudHMuICBVbmRlZmluZWQgZm9yIGRhdGEgd3JpdHRlbiBwcmlvciB0b1xyXG4gICAgICogc2NoZW1hIHZlcnNpb24gOS5cclxuICAgICAqL1xyXG4gICAgbGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbiwgXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBxdWVyeSBmb3IgdGhpcyB0YXJnZXQuXHJcbiAgICAgKlxyXG4gICAgICogQmVjYXVzZSBjYW5vbmljYWwgaWRzIGFyZSBub3QgdW5pcXVlIHdlIG11c3Qgc3RvcmUgdGhlIGFjdHVhbCBxdWVyeS4gV2VcclxuICAgICAqIHVzZSB0aGUgcHJvdG8gdG8gaGF2ZSBhbiBvYmplY3Qgd2UgY2FuIHBlcnNpc3Qgd2l0aG91dCBoYXZpbmcgdG9cclxuICAgICAqIGR1cGxpY2F0ZSB0cmFuc2xhdGlvbiBsb2dpYyB0byBhbmQgZnJvbSBhIGBRdWVyeWAgb2JqZWN0LlxyXG4gICAgICovXHJcbiAgICBxdWVyeSkge1xyXG4gICAgICAgIHRoaXMudGFyZ2V0SWQgPSB0YXJnZXRJZDtcclxuICAgICAgICB0aGlzLmNhbm9uaWNhbElkID0gY2Fub25pY2FsSWQ7XHJcbiAgICAgICAgdGhpcy5yZWFkVGltZSA9IHJlYWRUaW1lO1xyXG4gICAgICAgIHRoaXMucmVzdW1lVG9rZW4gPSByZXN1bWVUb2tlbjtcclxuICAgICAgICB0aGlzLmxhc3RMaXN0ZW5TZXF1ZW5jZU51bWJlciA9IGxhc3RMaXN0ZW5TZXF1ZW5jZU51bWJlcjtcclxuICAgICAgICB0aGlzLmxhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24gPSBsYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uO1xyXG4gICAgICAgIHRoaXMucXVlcnkgPSBxdWVyeTtcclxuICAgIH1cclxuICAgIERiVGFyZ2V0LnN0b3JlID0gJ3RhcmdldHMnO1xyXG4gICAgLyoqIEtleXMgYXJlIGF1dG9tYXRpY2FsbHkgYXNzaWduZWQgdmlhIHRoZSB0YXJnZXRJZCBwcm9wZXJ0eS4gKi9cclxuICAgIERiVGFyZ2V0LmtleVBhdGggPSAndGFyZ2V0SWQnO1xyXG4gICAgLyoqIFRoZSBuYW1lIG9mIHRoZSBxdWVyeVRhcmdldHMgaW5kZXguICovXHJcbiAgICBEYlRhcmdldC5xdWVyeVRhcmdldHNJbmRleE5hbWUgPSAncXVlcnlUYXJnZXRzSW5kZXgnO1xyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgaW5kZXggb2YgYWxsIGNhbm9uaWNhbElkcyB0byB0aGUgdGFyZ2V0cyB0aGF0IHRoZXkgbWF0Y2guIFRoaXMgaXMgbm90XHJcbiAgICAgKiBhIHVuaXF1ZSBtYXBwaW5nIGJlY2F1c2UgY2Fub25pY2FsSWQgZG9lcyBub3QgcHJvbWlzZSBhIHVuaXF1ZSBuYW1lIGZvciBhbGxcclxuICAgICAqIHBvc3NpYmxlIHF1ZXJpZXMsIHNvIHdlIGFwcGVuZCB0aGUgdGFyZ2V0SWQgdG8gbWFrZSB0aGUgbWFwcGluZyB1bmlxdWUuXHJcbiAgICAgKi9cclxuICAgIERiVGFyZ2V0LnF1ZXJ5VGFyZ2V0c0tleVBhdGggPSBbJ2Nhbm9uaWNhbElkJywgJ3RhcmdldElkJ107XHJcbiAgICByZXR1cm4gRGJUYXJnZXQ7XHJcbn0oKSk7XHJcbi8qKlxyXG4gKiBBbiBvYmplY3QgcmVwcmVzZW50aW5nIGFuIGFzc29jaWF0aW9uIGJldHdlZW4gYSB0YXJnZXQgYW5kIGEgZG9jdW1lbnQsIG9yIGFcclxuICogc2VudGluZWwgcm93IG1hcmtpbmcgdGhlIGxhc3Qgc2VxdWVuY2UgbnVtYmVyIGF0IHdoaWNoIGEgZG9jdW1lbnQgd2FzIHVzZWQuXHJcbiAqIEVhY2ggZG9jdW1lbnQgY2FjaGVkIG11c3QgaGF2ZSBhIGNvcnJlc3BvbmRpbmcgc2VudGluZWwgcm93IGJlZm9yZSBscnVcclxuICogZ2FyYmFnZSBjb2xsZWN0aW9uIGlzIGVuYWJsZWQuXHJcbiAqXHJcbiAqIFRoZSB0YXJnZXQgYXNzb2NpYXRpb25zIGFuZCBzZW50aW5lbCByb3dzIGFyZSBjby1sb2NhdGVkIHNvIHRoYXQgb3JwaGFuZWRcclxuICogZG9jdW1lbnRzIGFuZCB0aGVpciBzZXF1ZW5jZSBudW1iZXJzIGNhbiBiZSBpZGVudGlmaWVkIGVmZmljaWVudGx5IHZpYSBhIHNjYW5cclxuICogb2YgdGhpcyBzdG9yZS5cclxuICovXHJcbnZhciBEYlRhcmdldERvY3VtZW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gRGJUYXJnZXREb2N1bWVudChcclxuICAgIC8qKlxyXG4gICAgICogVGhlIHRhcmdldElkIGlkZW50aWZ5aW5nIGEgdGFyZ2V0IG9yIDAgZm9yIGEgc2VudGluZWwgcm93LlxyXG4gICAgICovXHJcbiAgICB0YXJnZXRJZCwgXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBwYXRoIHRvIHRoZSBkb2N1bWVudCwgYXMgZW5jb2RlZCBpbiB0aGUga2V5LlxyXG4gICAgICovXHJcbiAgICBwYXRoLCBcclxuICAgIC8qKlxyXG4gICAgICogSWYgdGhpcyBpcyBhIHNlbnRpbmVsIHJvdywgdGhpcyBzaG91bGQgYmUgdGhlIHNlcXVlbmNlIG51bWJlciBvZiB0aGUgbGFzdFxyXG4gICAgICogdGltZSB0aGUgZG9jdW1lbnQgc3BlY2lmaWVkIGJ5IGBwYXRoYCB3YXMgdXNlZC4gT3RoZXJ3aXNlLCBpdCBzaG91bGQgYmVcclxuICAgICAqIGB1bmRlZmluZWRgLlxyXG4gICAgICovXHJcbiAgICBzZXF1ZW5jZU51bWJlcikge1xyXG4gICAgICAgIHRoaXMudGFyZ2V0SWQgPSB0YXJnZXRJZDtcclxuICAgICAgICB0aGlzLnBhdGggPSBwYXRoO1xyXG4gICAgICAgIHRoaXMuc2VxdWVuY2VOdW1iZXIgPSBzZXF1ZW5jZU51bWJlcjtcclxuICAgICAgICBhc3NlcnQoKHRhcmdldElkID09PSAwKSA9PT0gKHNlcXVlbmNlTnVtYmVyICE9PSB1bmRlZmluZWQpLCAnQSB0YXJnZXQtZG9jdW1lbnQgcm93IG11c3QgZWl0aGVyIGhhdmUgdGFyZ2V0SWQgPT0gMCBhbmQgYSBkZWZpbmVkIHNlcXVlbmNlIG51bWJlciwgb3IgYSBub24temVybyB0YXJnZXRJZCBhbmQgbm8gc2VxdWVuY2UgbnVtYmVyJyk7XHJcbiAgICB9XHJcbiAgICAvKiogTmFtZSBvZiB0aGUgSW5kZXhlZERiIG9iamVjdCBzdG9yZS4gICovXHJcbiAgICBEYlRhcmdldERvY3VtZW50LnN0b3JlID0gJ3RhcmdldERvY3VtZW50cyc7XHJcbiAgICAvKiogS2V5cyBhcmUgYXV0b21hdGljYWxseSBhc3NpZ25lZCB2aWEgdGhlIHRhcmdldElkLCBwYXRoIHByb3BlcnRpZXMuICovXHJcbiAgICBEYlRhcmdldERvY3VtZW50LmtleVBhdGggPSBbJ3RhcmdldElkJywgJ3BhdGgnXTtcclxuICAgIC8qKiBUaGUgaW5kZXggbmFtZSBmb3IgdGhlIHJldmVyc2UgaW5kZXguICovXHJcbiAgICBEYlRhcmdldERvY3VtZW50LmRvY3VtZW50VGFyZ2V0c0luZGV4ID0gJ2RvY3VtZW50VGFyZ2V0c0luZGV4JztcclxuICAgIC8qKiBXZSBhbHNvIG5lZWQgdG8gY3JlYXRlIHRoZSByZXZlcnNlIGluZGV4IGZvciB0aGVzZSBwcm9wZXJ0aWVzLiAqL1xyXG4gICAgRGJUYXJnZXREb2N1bWVudC5kb2N1bWVudFRhcmdldHNLZXlQYXRoID0gWydwYXRoJywgJ3RhcmdldElkJ107XHJcbiAgICByZXR1cm4gRGJUYXJnZXREb2N1bWVudDtcclxufSgpKTtcclxuLyoqXHJcbiAqIEEgcmVjb3JkIG9mIGdsb2JhbCBzdGF0ZSB0cmFja2VkIGFjcm9zcyBhbGwgVGFyZ2V0cywgdHJhY2tlZCBzZXBhcmF0ZWx5XHJcbiAqIHRvIGF2b2lkIHRoZSBuZWVkIGZvciBleHRyYSBpbmRleGVzLlxyXG4gKlxyXG4gKiBUaGlzIHNob3VsZCBiZSBrZXB0IGluLXN5bmMgd2l0aCB0aGUgcHJvdG8gdXNlZCBpbiB0aGUgaU9TIGNsaWVudC5cclxuICovXHJcbnZhciBEYlRhcmdldEdsb2JhbCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIERiVGFyZ2V0R2xvYmFsKFxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgaGlnaGVzdCBudW1iZXJlZCB0YXJnZXQgaWQgYWNyb3NzIGFsbCB0YXJnZXRzLlxyXG4gICAgICpcclxuICAgICAqIFNlZSBEYlRhcmdldC50YXJnZXRJZC5cclxuICAgICAqL1xyXG4gICAgaGlnaGVzdFRhcmdldElkLCBcclxuICAgIC8qKlxyXG4gICAgICogVGhlIGhpZ2hlc3QgbnVtYmVyZWQgbGFzdExpc3RlblNlcXVlbmNlTnVtYmVyIGFjcm9zcyBhbGwgdGFyZ2V0cy5cclxuICAgICAqXHJcbiAgICAgKiBTZWUgRGJUYXJnZXQubGFzdExpc3RlblNlcXVlbmNlTnVtYmVyLlxyXG4gICAgICovXHJcbiAgICBoaWdoZXN0TGlzdGVuU2VxdWVuY2VOdW1iZXIsIFxyXG4gICAgLyoqXHJcbiAgICAgKiBBIGdsb2JhbCBzbmFwc2hvdCB2ZXJzaW9uIHJlcHJlc2VudGluZyB0aGUgbGFzdCBjb25zaXN0ZW50IHNuYXBzaG90IHdlXHJcbiAgICAgKiByZWNlaXZlZCBmcm9tIHRoZSBiYWNrZW5kLiBUaGlzIGlzIG1vbm90b25pY2FsbHkgaW5jcmVhc2luZyBhbmQgYW55XHJcbiAgICAgKiBzbmFwc2hvdHMgcmVjZWl2ZWQgZnJvbSB0aGUgYmFja2VuZCBwcmlvciB0byB0aGlzIHZlcnNpb24gKGUuZy4gZm9yXHJcbiAgICAgKiB0YXJnZXRzIHJlc3VtZWQgd2l0aCBhIHJlc3VtZVRva2VuKSBzaG91bGQgYmUgc3VwcHJlc3NlZCAoYnVmZmVyZWQpXHJcbiAgICAgKiB1bnRpbCB0aGUgYmFja2VuZCBoYXMgY2F1Z2h0IHVwIHRvIHRoaXMgc25hcHNob3QgdmVyc2lvbiBhZ2Fpbi4gVGhpc1xyXG4gICAgICogcHJldmVudHMgb3VyIGNhY2hlIGZyb20gZXZlciBnb2luZyBiYWNrd2FyZHMgaW4gdGltZS5cclxuICAgICAqL1xyXG4gICAgbGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbiwgXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBudW1iZXIgb2YgdGFyZ2V0cyBwZXJzaXN0ZWQuXHJcbiAgICAgKi9cclxuICAgIHRhcmdldENvdW50KSB7XHJcbiAgICAgICAgdGhpcy5oaWdoZXN0VGFyZ2V0SWQgPSBoaWdoZXN0VGFyZ2V0SWQ7XHJcbiAgICAgICAgdGhpcy5oaWdoZXN0TGlzdGVuU2VxdWVuY2VOdW1iZXIgPSBoaWdoZXN0TGlzdGVuU2VxdWVuY2VOdW1iZXI7XHJcbiAgICAgICAgdGhpcy5sYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uID0gbGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbjtcclxuICAgICAgICB0aGlzLnRhcmdldENvdW50ID0gdGFyZ2V0Q291bnQ7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFRoZSBrZXkgc3RyaW5nIHVzZWQgZm9yIHRoZSBzaW5nbGUgb2JqZWN0IHRoYXQgZXhpc3RzIGluIHRoZVxyXG4gICAgICogRGJUYXJnZXRHbG9iYWwgc3RvcmUuXHJcbiAgICAgKi9cclxuICAgIERiVGFyZ2V0R2xvYmFsLmtleSA9ICd0YXJnZXRHbG9iYWxLZXknO1xyXG4gICAgRGJUYXJnZXRHbG9iYWwuc3RvcmUgPSAndGFyZ2V0R2xvYmFsJztcclxuICAgIHJldHVybiBEYlRhcmdldEdsb2JhbDtcclxufSgpKTtcclxuLyoqXHJcbiAqIEFuIG9iamVjdCByZXByZXNlbnRpbmcgYW4gYXNzb2NpYXRpb24gYmV0d2VlbiBhIENvbGxlY3Rpb24gaWQgKGUuZy4gJ21lc3NhZ2VzJylcclxuICogdG8gYSBwYXJlbnQgcGF0aCAoZS5nLiAnL2NoYXRzLzEyMycpIHRoYXQgY29udGFpbnMgaXQgYXMgYSAoc3ViKWNvbGxlY3Rpb24uXHJcbiAqIFRoaXMgaXMgdXNlZCB0byBlZmZpY2llbnRseSBmaW5kIGFsbCBjb2xsZWN0aW9ucyB0byBxdWVyeSB3aGVuIHBlcmZvcm1pbmdcclxuICogYSBDb2xsZWN0aW9uIEdyb3VwIHF1ZXJ5LlxyXG4gKi9cclxudmFyIERiQ29sbGVjdGlvblBhcmVudCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIERiQ29sbGVjdGlvblBhcmVudChcclxuICAgIC8qKlxyXG4gICAgICogVGhlIGNvbGxlY3Rpb25JZCAoZS5nLiAnbWVzc2FnZXMnKVxyXG4gICAgICovXHJcbiAgICBjb2xsZWN0aW9uSWQsIFxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgcGF0aCB0byB0aGUgcGFyZW50IChlaXRoZXIgYSBkb2N1bWVudCBsb2NhdGlvbiBvciBhbiBlbXB0eSBwYXRoIGZvclxyXG4gICAgICogYSByb290LWxldmVsIGNvbGxlY3Rpb24pLlxyXG4gICAgICovXHJcbiAgICBwYXJlbnQpIHtcclxuICAgICAgICB0aGlzLmNvbGxlY3Rpb25JZCA9IGNvbGxlY3Rpb25JZDtcclxuICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcclxuICAgIH1cclxuICAgIC8qKiBOYW1lIG9mIHRoZSBJbmRleGVkRGIgb2JqZWN0IHN0b3JlLiAqL1xyXG4gICAgRGJDb2xsZWN0aW9uUGFyZW50LnN0b3JlID0gJ2NvbGxlY3Rpb25QYXJlbnRzJztcclxuICAgIC8qKiBLZXlzIGFyZSBhdXRvbWF0aWNhbGx5IGFzc2lnbmVkIHZpYSB0aGUgY29sbGVjdGlvbklkLCBwYXJlbnQgcHJvcGVydGllcy4gKi9cclxuICAgIERiQ29sbGVjdGlvblBhcmVudC5rZXlQYXRoID0gWydjb2xsZWN0aW9uSWQnLCAncGFyZW50J107XHJcbiAgICByZXR1cm4gRGJDb2xsZWN0aW9uUGFyZW50O1xyXG59KCkpO1xyXG5mdW5jdGlvbiBjcmVhdGVRdWVyeUNhY2hlKGRiKSB7XHJcbiAgICB2YXIgdGFyZ2V0RG9jdW1lbnRzU3RvcmUgPSBkYi5jcmVhdGVPYmplY3RTdG9yZShEYlRhcmdldERvY3VtZW50LnN0b3JlLCB7XHJcbiAgICAgICAga2V5UGF0aDogRGJUYXJnZXREb2N1bWVudC5rZXlQYXRoXHJcbiAgICB9KTtcclxuICAgIHRhcmdldERvY3VtZW50c1N0b3JlLmNyZWF0ZUluZGV4KERiVGFyZ2V0RG9jdW1lbnQuZG9jdW1lbnRUYXJnZXRzSW5kZXgsIERiVGFyZ2V0RG9jdW1lbnQuZG9jdW1lbnRUYXJnZXRzS2V5UGF0aCwgeyB1bmlxdWU6IHRydWUgfSk7XHJcbiAgICB2YXIgdGFyZ2V0U3RvcmUgPSBkYi5jcmVhdGVPYmplY3RTdG9yZShEYlRhcmdldC5zdG9yZSwge1xyXG4gICAgICAgIGtleVBhdGg6IERiVGFyZ2V0LmtleVBhdGhcclxuICAgIH0pO1xyXG4gICAgLy8gTk9URTogVGhpcyBpcyB1bmlxdWUgb25seSBiZWNhdXNlIHRoZSBUYXJnZXRJZCBpcyB0aGUgc3VmZml4LlxyXG4gICAgdGFyZ2V0U3RvcmUuY3JlYXRlSW5kZXgoRGJUYXJnZXQucXVlcnlUYXJnZXRzSW5kZXhOYW1lLCBEYlRhcmdldC5xdWVyeVRhcmdldHNLZXlQYXRoLCB7IHVuaXF1ZTogdHJ1ZSB9KTtcclxuICAgIGRiLmNyZWF0ZU9iamVjdFN0b3JlKERiVGFyZ2V0R2xvYmFsLnN0b3JlKTtcclxufVxyXG5mdW5jdGlvbiBkcm9wUXVlcnlDYWNoZShkYikge1xyXG4gICAgZGIuZGVsZXRlT2JqZWN0U3RvcmUoRGJUYXJnZXREb2N1bWVudC5zdG9yZSk7XHJcbiAgICBkYi5kZWxldGVPYmplY3RTdG9yZShEYlRhcmdldC5zdG9yZSk7XHJcbiAgICBkYi5kZWxldGVPYmplY3RTdG9yZShEYlRhcmdldEdsb2JhbC5zdG9yZSk7XHJcbn1cclxuZnVuY3Rpb24gZHJvcFJlbW90ZURvY3VtZW50Q2hhbmdlc1N0b3JlKGRiKSB7XHJcbiAgICBpZiAoZGIub2JqZWN0U3RvcmVOYW1lcy5jb250YWlucygncmVtb3RlRG9jdW1lbnRDaGFuZ2VzJykpIHtcclxuICAgICAgICBkYi5kZWxldGVPYmplY3RTdG9yZSgncmVtb3RlRG9jdW1lbnRDaGFuZ2VzJyk7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIENyZWF0ZXMgdGhlIHRhcmdldCBnbG9iYWwgc2luZ2xldG9uIHJvdy5cclxuICpcclxuICogQHBhcmFtIHtJREJUcmFuc2FjdGlvbn0gdHhuIFRoZSB2ZXJzaW9uIHVwZ3JhZGUgdHJhbnNhY3Rpb24gZm9yIGluZGV4ZWRkYlxyXG4gKi9cclxuZnVuY3Rpb24gd3JpdGVFbXB0eVRhcmdldEdsb2JhbEVudHJ5KHR4bikge1xyXG4gICAgdmFyIGdsb2JhbFN0b3JlID0gdHhuLnN0b3JlKERiVGFyZ2V0R2xvYmFsLnN0b3JlKTtcclxuICAgIHZhciBtZXRhZGF0YSA9IG5ldyBEYlRhcmdldEdsb2JhbChcclxuICAgIC8qaGlnaGVzdFRhcmdldElkPSovIDAsIFxyXG4gICAgLypsYXN0TGlzdGVuU2VxdWVuY2VOdW1iZXI9Ki8gMCwgU25hcHNob3RWZXJzaW9uLk1JTi50b1RpbWVzdGFtcCgpLCBcclxuICAgIC8qdGFyZ2V0Q291bnQ9Ki8gMCk7XHJcbiAgICByZXR1cm4gZ2xvYmFsU3RvcmUucHV0KERiVGFyZ2V0R2xvYmFsLmtleSwgbWV0YWRhdGEpO1xyXG59XHJcbi8qKlxyXG4gKiBDcmVhdGVzIGluZGljZXMgb24gdGhlIFJlbW90ZURvY3VtZW50cyBzdG9yZSB1c2VkIGZvciBib3RoIG11bHRpLXRhYlxyXG4gKiBhbmQgSW5kZXgtRnJlZSBxdWVyaWVzLlxyXG4gKi9cclxuZnVuY3Rpb24gY3JlYXRlUmVtb3RlRG9jdW1lbnRSZWFkVGltZUluZGV4KHR4bikge1xyXG4gICAgdmFyIHJlbW90ZURvY3VtZW50U3RvcmUgPSB0eG4ub2JqZWN0U3RvcmUoRGJSZW1vdGVEb2N1bWVudC5zdG9yZSk7XHJcbiAgICByZW1vdGVEb2N1bWVudFN0b3JlLmNyZWF0ZUluZGV4KERiUmVtb3RlRG9jdW1lbnQucmVhZFRpbWVJbmRleCwgRGJSZW1vdGVEb2N1bWVudC5yZWFkVGltZUluZGV4UGF0aCwgeyB1bmlxdWU6IGZhbHNlIH0pO1xyXG4gICAgcmVtb3RlRG9jdW1lbnRTdG9yZS5jcmVhdGVJbmRleChEYlJlbW90ZURvY3VtZW50LmNvbGxlY3Rpb25SZWFkVGltZUluZGV4LCBEYlJlbW90ZURvY3VtZW50LmNvbGxlY3Rpb25SZWFkVGltZUluZGV4UGF0aCwgeyB1bmlxdWU6IGZhbHNlIH0pO1xyXG59XHJcbi8qKlxyXG4gKiBBIHJlY29yZCBvZiB0aGUgbWV0YWRhdGEgc3RhdGUgb2YgZWFjaCBjbGllbnQuXHJcbiAqXHJcbiAqIFBPUlRJTkcgTk9URTogVGhpcyBpcyB1c2VkIHRvIHN5bmNocm9uaXplIG11bHRpLXRhYiBzdGF0ZSBhbmQgZG9lcyBub3QgbmVlZFxyXG4gKiB0byBiZSBwb3J0ZWQgdG8gaU9TIG9yIEFuZHJvaWQuXHJcbiAqL1xyXG52YXIgRGJDbGllbnRNZXRhZGF0YSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIERiQ2xpZW50TWV0YWRhdGEoXHJcbiAgICAvLyBOb3RlOiBQcmV2aW91cyBzY2hlbWEgdmVyc2lvbnMgaW5jbHVkZWQgYSBmaWVsZFxyXG4gICAgLy8gXCJsYXN0UHJvY2Vzc2VkRG9jdW1lbnRDaGFuZ2VJZFwiLiBEb24ndCB1c2UgYW55bW9yZS5cclxuICAgIC8qKiBUaGUgYXV0by1nZW5lcmF0ZWQgY2xpZW50IGlkIGFzc2lnbmVkIGF0IGNsaWVudCBzdGFydHVwLiAqL1xyXG4gICAgY2xpZW50SWQsIFxyXG4gICAgLyoqIFRoZSBsYXN0IHRpbWUgdGhpcyBzdGF0ZSB3YXMgdXBkYXRlZC4gKi9cclxuICAgIHVwZGF0ZVRpbWVNcywgXHJcbiAgICAvKiogV2hldGhlciB0aGUgY2xpZW50J3MgbmV0d29yayBjb25uZWN0aW9uIGlzIGVuYWJsZWQuICovXHJcbiAgICBuZXR3b3JrRW5hYmxlZCwgXHJcbiAgICAvKiogV2hldGhlciB0aGlzIGNsaWVudCBpcyBydW5uaW5nIGluIGEgZm9yZWdyb3VuZCB0YWIuICovXHJcbiAgICBpbkZvcmVncm91bmQpIHtcclxuICAgICAgICB0aGlzLmNsaWVudElkID0gY2xpZW50SWQ7XHJcbiAgICAgICAgdGhpcy51cGRhdGVUaW1lTXMgPSB1cGRhdGVUaW1lTXM7XHJcbiAgICAgICAgdGhpcy5uZXR3b3JrRW5hYmxlZCA9IG5ldHdvcmtFbmFibGVkO1xyXG4gICAgICAgIHRoaXMuaW5Gb3JlZ3JvdW5kID0gaW5Gb3JlZ3JvdW5kO1xyXG4gICAgfVxyXG4gICAgLyoqIE5hbWUgb2YgdGhlIEluZGV4ZWREYiBvYmplY3Qgc3RvcmUuICovXHJcbiAgICBEYkNsaWVudE1ldGFkYXRhLnN0b3JlID0gJ2NsaWVudE1ldGFkYXRhJztcclxuICAgIC8qKiBLZXlzIGFyZSBhdXRvbWF0aWNhbGx5IGFzc2lnbmVkIHZpYSB0aGUgY2xpZW50SWQgcHJvcGVydGllcy4gKi9cclxuICAgIERiQ2xpZW50TWV0YWRhdGEua2V5UGF0aCA9ICdjbGllbnRJZCc7XHJcbiAgICByZXR1cm4gRGJDbGllbnRNZXRhZGF0YTtcclxufSgpKTtcclxuZnVuY3Rpb24gY3JlYXRlQ2xpZW50TWV0YWRhdGFTdG9yZShkYikge1xyXG4gICAgZGIuY3JlYXRlT2JqZWN0U3RvcmUoRGJDbGllbnRNZXRhZGF0YS5zdG9yZSwge1xyXG4gICAgICAgIGtleVBhdGg6IERiQ2xpZW50TWV0YWRhdGEua2V5UGF0aFxyXG4gICAgfSk7XHJcbn1cclxuLy8gVmlzaWJsZSBmb3IgdGVzdGluZ1xyXG52YXIgVjFfU1RPUkVTID0gW1xyXG4gICAgRGJNdXRhdGlvblF1ZXVlLnN0b3JlLFxyXG4gICAgRGJNdXRhdGlvbkJhdGNoLnN0b3JlLFxyXG4gICAgRGJEb2N1bWVudE11dGF0aW9uLnN0b3JlLFxyXG4gICAgRGJSZW1vdGVEb2N1bWVudC5zdG9yZSxcclxuICAgIERiVGFyZ2V0LnN0b3JlLFxyXG4gICAgRGJQcmltYXJ5Q2xpZW50LnN0b3JlLFxyXG4gICAgRGJUYXJnZXRHbG9iYWwuc3RvcmUsXHJcbiAgICBEYlRhcmdldERvY3VtZW50LnN0b3JlXHJcbl07XHJcbi8vIFYyIGlzIG5vIGxvbmdlciB1c2FibGUgKHNlZSBjb21tZW50IGF0IHRvcCBvZiBmaWxlKVxyXG4vLyBWaXNpYmxlIGZvciB0ZXN0aW5nXHJcbnZhciBWM19TVE9SRVMgPSBWMV9TVE9SRVM7XHJcbi8vIFZpc2libGUgZm9yIHRlc3RpbmdcclxuLy8gTm90ZTogRGJSZW1vdGVEb2N1bWVudENoYW5nZXMgaXMgbm8gbG9uZ2VyIHVzZWQgYW5kIGRyb3BwZWQgd2l0aCB2OS5cclxudmFyIFY0X1NUT1JFUyA9IHRzbGliLl9fc3ByZWFkQXJyYXlzKFYzX1NUT1JFUywgW0RiQ2xpZW50TWV0YWRhdGEuc3RvcmVdKTtcclxuLy8gVjUgZG9lcyBub3QgY2hhbmdlIHRoZSBzZXQgb2Ygc3RvcmVzLlxyXG52YXIgVjZfU1RPUkVTID0gdHNsaWIuX19zcHJlYWRBcnJheXMoVjRfU1RPUkVTLCBbRGJSZW1vdGVEb2N1bWVudEdsb2JhbC5zdG9yZV0pO1xyXG4vLyBWNyBkb2VzIG5vdCBjaGFuZ2UgdGhlIHNldCBvZiBzdG9yZXMuXHJcbnZhciBWOF9TVE9SRVMgPSB0c2xpYi5fX3NwcmVhZEFycmF5cyhWNl9TVE9SRVMsIFtEYkNvbGxlY3Rpb25QYXJlbnQuc3RvcmVdKTtcclxuLy8gVjkgZG9lcyBub3QgY2hhbmdlIHRoZSBzZXQgb2Ygc3RvcmVzLlxyXG4vKipcclxuICogVGhlIGxpc3Qgb2YgYWxsIGRlZmF1bHQgSW5kZXhlZERCIHN0b3JlcyB1c2VkIHRocm91Z2hvdXQgdGhlIFNESy4gVGhpcyBpc1xyXG4gKiB1c2VkIHdoZW4gY3JlYXRpbmcgdHJhbnNhY3Rpb25zIHNvIHRoYXQgYWNjZXNzIGFjcm9zcyBhbGwgc3RvcmVzIGlzIGRvbmVcclxuICogYXRvbWljYWxseS5cclxuICovXHJcbnZhciBBTExfU1RPUkVTID0gVjhfU1RPUkVTO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEEgcGVyc2lzdGVkIGltcGxlbWVudGF0aW9uIG9mIEluZGV4TWFuYWdlci5cclxuICovXHJcbnZhciBJbmRleGVkRGJJbmRleE1hbmFnZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBJbmRleGVkRGJJbmRleE1hbmFnZXIoKSB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQW4gaW4tbWVtb3J5IGNvcHkgb2YgdGhlIGluZGV4IGVudHJpZXMgd2UndmUgYWxyZWFkeSB3cml0dGVuIHNpbmNlIHRoZSBTREtcclxuICAgICAgICAgKiBsYXVuY2hlZC4gVXNlZCB0byBhdm9pZCByZS13cml0aW5nIHRoZSBzYW1lIGVudHJ5IHJlcGVhdGVkbHkuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBUaGlzIGlzICpOT1QqIGEgY29tcGxldGUgY2FjaGUgb2Ygd2hhdCdzIGluIHBlcnNpc3RlbmNlIGFuZCBzbyBjYW4gbmV2ZXIgYmUgdXNlZCB0b1xyXG4gICAgICAgICAqIHNhdGlzZnkgcmVhZHMuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5jb2xsZWN0aW9uUGFyZW50c0NhY2hlID0gbmV3IE1lbW9yeUNvbGxlY3Rpb25QYXJlbnRJbmRleCgpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBBZGRzIGEgbmV3IGVudHJ5IHRvIHRoZSBjb2xsZWN0aW9uIHBhcmVudCBpbmRleC5cclxuICAgICAqXHJcbiAgICAgKiBSZXBlYXRlZCBjYWxscyBmb3IgdGhlIHNhbWUgY29sbGVjdGlvblBhdGggc2hvdWxkIGJlIGF2b2lkZWQgd2l0aGluIGFcclxuICAgICAqIHRyYW5zYWN0aW9uIGFzIEluZGV4ZWREYkluZGV4TWFuYWdlciBvbmx5IGNhY2hlcyB3cml0ZXMgb25jZSBhIHRyYW5zYWN0aW9uXHJcbiAgICAgKiBoYXMgYmVlbiBjb21taXR0ZWQuXHJcbiAgICAgKi9cclxuICAgIEluZGV4ZWREYkluZGV4TWFuYWdlci5wcm90b3R5cGUuYWRkVG9Db2xsZWN0aW9uUGFyZW50SW5kZXggPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24sIGNvbGxlY3Rpb25QYXRoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBhc3NlcnQoY29sbGVjdGlvblBhdGgubGVuZ3RoICUgMiA9PT0gMSwgJ0V4cGVjdGVkIGEgY29sbGVjdGlvbiBwYXRoLicpO1xyXG4gICAgICAgIGlmICghdGhpcy5jb2xsZWN0aW9uUGFyZW50c0NhY2hlLmhhcyhjb2xsZWN0aW9uUGF0aCkpIHtcclxuICAgICAgICAgICAgdmFyIGNvbGxlY3Rpb25JZCA9IGNvbGxlY3Rpb25QYXRoLmxhc3RTZWdtZW50KCk7XHJcbiAgICAgICAgICAgIHZhciBwYXJlbnRQYXRoID0gY29sbGVjdGlvblBhdGgucG9wTGFzdCgpO1xyXG4gICAgICAgICAgICB0cmFuc2FjdGlvbi5hZGRPbkNvbW1pdHRlZExpc3RlbmVyKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIC8vIEFkZCB0aGUgY29sbGVjdGlvbiB0byB0aGUgaW4gbWVtb3J5IGNhY2hlIG9ubHkgaWYgdGhlIHRyYW5zYWN0aW9uIHdhc1xyXG4gICAgICAgICAgICAgICAgLy8gc3VjY2Vzc2Z1bGx5IGNvbW1pdHRlZC5cclxuICAgICAgICAgICAgICAgIF90aGlzLmNvbGxlY3Rpb25QYXJlbnRzQ2FjaGUuYWRkKGNvbGxlY3Rpb25QYXRoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHZhciBjb2xsZWN0aW9uUGFyZW50ID0ge1xyXG4gICAgICAgICAgICAgICAgY29sbGVjdGlvbklkOiBjb2xsZWN0aW9uSWQsXHJcbiAgICAgICAgICAgICAgICBwYXJlbnQ6IGVuY29kZShwYXJlbnRQYXRoKVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICByZXR1cm4gY29sbGVjdGlvblBhcmVudHNTdG9yZSh0cmFuc2FjdGlvbikucHV0KGNvbGxlY3Rpb25QYXJlbnQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoKTtcclxuICAgIH07XHJcbiAgICBJbmRleGVkRGJJbmRleE1hbmFnZXIucHJvdG90eXBlLmdldENvbGxlY3Rpb25QYXJlbnRzID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCBjb2xsZWN0aW9uSWQpIHtcclxuICAgICAgICB2YXIgcGFyZW50UGF0aHMgPSBbXTtcclxuICAgICAgICB2YXIgcmFuZ2UgPSBJREJLZXlSYW5nZS5ib3VuZChbY29sbGVjdGlvbklkLCAnJ10sIFtpbW1lZGlhdGVTdWNjZXNzb3IoY29sbGVjdGlvbklkKSwgJyddLCBcclxuICAgICAgICAvKmxvd2VyT3Blbj0qLyBmYWxzZSwgXHJcbiAgICAgICAgLyp1cHBlck9wZW49Ki8gdHJ1ZSk7XHJcbiAgICAgICAgcmV0dXJuIGNvbGxlY3Rpb25QYXJlbnRzU3RvcmUodHJhbnNhY3Rpb24pXHJcbiAgICAgICAgICAgIC5sb2FkQWxsKHJhbmdlKVxyXG4gICAgICAgICAgICAubmV4dChmdW5jdGlvbiAoZW50cmllcykge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGVudHJpZXNfMSA9IGVudHJpZXM7IF9pIDwgZW50cmllc18xLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGVudHJ5ID0gZW50cmllc18xW19pXTtcclxuICAgICAgICAgICAgICAgIC8vIFRoaXMgY29sbGVjdGlvbklkIGd1YXJkIHNob3VsZG4ndCBiZSBuZWNlc3NhcnkgKGFuZCBpc24ndCBhcyBsb25nXHJcbiAgICAgICAgICAgICAgICAvLyBhcyB3ZSdyZSBydW5uaW5nIGluIGEgcmVhbCBicm93c2VyKSwgYnV0IHRoZXJlJ3MgYSBidWcgaW5cclxuICAgICAgICAgICAgICAgIC8vIGluZGV4ZWRkYnNoaW0gdGhhdCBicmVha3Mgb3VyIHJhbmdlIGluIG91ciB0ZXN0cyBydW5uaW5nIGluIG5vZGU6XHJcbiAgICAgICAgICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vYXhlbWNsaW9uL0luZGV4ZWREQlNoaW0vaXNzdWVzLzMzNFxyXG4gICAgICAgICAgICAgICAgaWYgKGVudHJ5LmNvbGxlY3Rpb25JZCAhPT0gY29sbGVjdGlvbklkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBwYXJlbnRQYXRocy5wdXNoKGRlY29kZShlbnRyeS5wYXJlbnQpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gcGFyZW50UGF0aHM7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEluZGV4ZWREYkluZGV4TWFuYWdlcjtcclxufSgpKTtcclxuLyoqXHJcbiAqIEhlbHBlciB0byBnZXQgYSB0eXBlZCBTaW1wbGVEYlN0b3JlIGZvciB0aGUgY29sbGVjdGlvblBhcmVudHNcclxuICogZG9jdW1lbnQgc3RvcmUuXHJcbiAqL1xyXG5mdW5jdGlvbiBjb2xsZWN0aW9uUGFyZW50c1N0b3JlKHR4bikge1xyXG4gICAgcmV0dXJuIEluZGV4ZWREYlBlcnNpc3RlbmNlLmdldFN0b3JlKHR4biwgRGJDb2xsZWN0aW9uUGFyZW50LnN0b3JlKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqIEFuIGVudW1lcmF0aW9uIG9mIHRoZSBkaWZmZXJlbnQgcHVycG9zZXMgd2UgaGF2ZSBmb3IgdGFyZ2V0cy4gKi9cclxudmFyIFRhcmdldFB1cnBvc2U7XHJcbihmdW5jdGlvbiAoVGFyZ2V0UHVycG9zZSkge1xyXG4gICAgLyoqIEEgcmVndWxhciwgbm9ybWFsIHF1ZXJ5IHRhcmdldC4gKi9cclxuICAgIFRhcmdldFB1cnBvc2VbVGFyZ2V0UHVycG9zZVtcIkxpc3RlblwiXSA9IDBdID0gXCJMaXN0ZW5cIjtcclxuICAgIC8qKlxyXG4gICAgICogVGhlIHF1ZXJ5IHRhcmdldCB3YXMgdXNlZCB0byByZWZpbGwgYSBxdWVyeSBhZnRlciBhbiBleGlzdGVuY2UgZmlsdGVyIG1pc21hdGNoLlxyXG4gICAgICovXHJcbiAgICBUYXJnZXRQdXJwb3NlW1RhcmdldFB1cnBvc2VbXCJFeGlzdGVuY2VGaWx0ZXJNaXNtYXRjaFwiXSA9IDFdID0gXCJFeGlzdGVuY2VGaWx0ZXJNaXNtYXRjaFwiO1xyXG4gICAgLyoqIFRoZSBxdWVyeSB0YXJnZXQgd2FzIHVzZWQgdG8gcmVzb2x2ZSBhIGxpbWJvIGRvY3VtZW50LiAqL1xyXG4gICAgVGFyZ2V0UHVycG9zZVtUYXJnZXRQdXJwb3NlW1wiTGltYm9SZXNvbHV0aW9uXCJdID0gMl0gPSBcIkxpbWJvUmVzb2x1dGlvblwiO1xyXG59KShUYXJnZXRQdXJwb3NlIHx8IChUYXJnZXRQdXJwb3NlID0ge30pKTtcclxuLyoqXHJcbiAqIEFuIGltbXV0YWJsZSBzZXQgb2YgbWV0YWRhdGEgdGhhdCB0aGUgbG9jYWwgc3RvcmUgdHJhY2tzIGZvciBlYWNoIHRhcmdldC5cclxuICovXHJcbnZhciBUYXJnZXREYXRhID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gVGFyZ2V0RGF0YShcclxuICAgIC8qKiBUaGUgdGFyZ2V0IGJlaW5nIGxpc3RlbmVkIHRvLiAqL1xyXG4gICAgdGFyZ2V0LCBcclxuICAgIC8qKlxyXG4gICAgICogVGhlIHRhcmdldCBJRCB0byB3aGljaCB0aGUgdGFyZ2V0IGNvcnJlc3BvbmRzOyBBc3NpZ25lZCBieSB0aGVcclxuICAgICAqIExvY2FsU3RvcmUgZm9yIHVzZXIgbGlzdGVucyBhbmQgYnkgdGhlIFN5bmNFbmdpbmUgZm9yIGxpbWJvIHdhdGNoZXMuXHJcbiAgICAgKi9cclxuICAgIHRhcmdldElkLCBcclxuICAgIC8qKiBUaGUgcHVycG9zZSBvZiB0aGUgdGFyZ2V0LiAqL1xyXG4gICAgcHVycG9zZSwgXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBzZXF1ZW5jZSBudW1iZXIgb2YgdGhlIGxhc3QgdHJhbnNhY3Rpb24gZHVyaW5nIHdoaWNoIHRoaXMgdGFyZ2V0IGRhdGFcclxuICAgICAqIHdhcyBtb2RpZmllZC5cclxuICAgICAqL1xyXG4gICAgc2VxdWVuY2VOdW1iZXIsIFxyXG4gICAgLyoqIFRoZSBsYXRlc3Qgc25hcHNob3QgdmVyc2lvbiBzZWVuIGZvciB0aGlzIHRhcmdldC4gKi9cclxuICAgIHNuYXBzaG90VmVyc2lvbiwgXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBtYXhpbXVtIHNuYXBzaG90IHZlcnNpb24gYXQgd2hpY2ggdGhlIGFzc29jaWF0ZWQgdmlld1xyXG4gICAgICogY29udGFpbmVkIG5vIGxpbWJvIGRvY3VtZW50cy5cclxuICAgICAqL1xyXG4gICAgbGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbiwgXHJcbiAgICAvKipcclxuICAgICAqIEFuIG9wYXF1ZSwgc2VydmVyLWFzc2lnbmVkIHRva2VuIHRoYXQgYWxsb3dzIHdhdGNoaW5nIGEgdGFyZ2V0IHRvIGJlXHJcbiAgICAgKiByZXN1bWVkIGFmdGVyIGRpc2Nvbm5lY3Rpbmcgd2l0aG91dCByZXRyYW5zbWl0dGluZyBhbGwgdGhlIGRhdGEgdGhhdFxyXG4gICAgICogbWF0Y2hlcyB0aGUgdGFyZ2V0LiBUaGUgcmVzdW1lIHRva2VuIGVzc2VudGlhbGx5IGlkZW50aWZpZXMgYSBwb2ludCBpblxyXG4gICAgICogdGltZSBmcm9tIHdoaWNoIHRoZSBzZXJ2ZXIgc2hvdWxkIHJlc3VtZSBzZW5kaW5nIHJlc3VsdHMuXHJcbiAgICAgKi9cclxuICAgIHJlc3VtZVRva2VuKSB7XHJcbiAgICAgICAgaWYgKHNuYXBzaG90VmVyc2lvbiA9PT0gdm9pZCAwKSB7IHNuYXBzaG90VmVyc2lvbiA9IFNuYXBzaG90VmVyc2lvbi5NSU47IH1cclxuICAgICAgICBpZiAobGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbiA9PT0gdm9pZCAwKSB7IGxhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24gPSBTbmFwc2hvdFZlcnNpb24uTUlOOyB9XHJcbiAgICAgICAgaWYgKHJlc3VtZVRva2VuID09PSB2b2lkIDApIHsgcmVzdW1lVG9rZW4gPSBlbXB0eUJ5dGVTdHJpbmcoKTsgfVxyXG4gICAgICAgIHRoaXMudGFyZ2V0ID0gdGFyZ2V0O1xyXG4gICAgICAgIHRoaXMudGFyZ2V0SWQgPSB0YXJnZXRJZDtcclxuICAgICAgICB0aGlzLnB1cnBvc2UgPSBwdXJwb3NlO1xyXG4gICAgICAgIHRoaXMuc2VxdWVuY2VOdW1iZXIgPSBzZXF1ZW5jZU51bWJlcjtcclxuICAgICAgICB0aGlzLnNuYXBzaG90VmVyc2lvbiA9IHNuYXBzaG90VmVyc2lvbjtcclxuICAgICAgICB0aGlzLmxhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24gPSBsYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uO1xyXG4gICAgICAgIHRoaXMucmVzdW1lVG9rZW4gPSByZXN1bWVUb2tlbjtcclxuICAgIH1cclxuICAgIC8qKiBDcmVhdGVzIGEgbmV3IHRhcmdldCBkYXRhIGluc3RhbmNlIHdpdGggYW4gdXBkYXRlZCBzZXF1ZW5jZSBudW1iZXIuICovXHJcbiAgICBUYXJnZXREYXRhLnByb3RvdHlwZS53aXRoU2VxdWVuY2VOdW1iZXIgPSBmdW5jdGlvbiAoc2VxdWVuY2VOdW1iZXIpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFRhcmdldERhdGEodGhpcy50YXJnZXQsIHRoaXMudGFyZ2V0SWQsIHRoaXMucHVycG9zZSwgc2VxdWVuY2VOdW1iZXIsIHRoaXMuc25hcHNob3RWZXJzaW9uLCB0aGlzLmxhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24sIHRoaXMucmVzdW1lVG9rZW4pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhIG5ldyB0YXJnZXQgZGF0YSBpbnN0YW5jZSB3aXRoIGFuIHVwZGF0ZWQgcmVzdW1lIHRva2VuIGFuZFxyXG4gICAgICogc25hcHNob3QgdmVyc2lvbi5cclxuICAgICAqL1xyXG4gICAgVGFyZ2V0RGF0YS5wcm90b3R5cGUud2l0aFJlc3VtZVRva2VuID0gZnVuY3Rpb24gKHJlc3VtZVRva2VuLCBzbmFwc2hvdFZlcnNpb24pIHtcclxuICAgICAgICByZXR1cm4gbmV3IFRhcmdldERhdGEodGhpcy50YXJnZXQsIHRoaXMudGFyZ2V0SWQsIHRoaXMucHVycG9zZSwgdGhpcy5zZXF1ZW5jZU51bWJlciwgc25hcHNob3RWZXJzaW9uLCB0aGlzLmxhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24sIHJlc3VtZVRva2VuKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYSBuZXcgdGFyZ2V0IGRhdGEgaW5zdGFuY2Ugd2l0aCBhbiB1cGRhdGVkIGxhc3QgbGltYm8gZnJlZVxyXG4gICAgICogc25hcHNob3QgdmVyc2lvbiBudW1iZXIuXHJcbiAgICAgKi9cclxuICAgIFRhcmdldERhdGEucHJvdG90eXBlLndpdGhMYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uID0gZnVuY3Rpb24gKGxhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24pIHtcclxuICAgICAgICByZXR1cm4gbmV3IFRhcmdldERhdGEodGhpcy50YXJnZXQsIHRoaXMudGFyZ2V0SWQsIHRoaXMucHVycG9zZSwgdGhpcy5zZXF1ZW5jZU51bWJlciwgdGhpcy5zbmFwc2hvdFZlcnNpb24sIGxhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24sIHRoaXMucmVzdW1lVG9rZW4pO1xyXG4gICAgfTtcclxuICAgIFRhcmdldERhdGEucHJvdG90eXBlLmlzRXF1YWwgPSBmdW5jdGlvbiAob3RoZXIpIHtcclxuICAgICAgICByZXR1cm4gKHRoaXMudGFyZ2V0SWQgPT09IG90aGVyLnRhcmdldElkICYmXHJcbiAgICAgICAgICAgIHRoaXMucHVycG9zZSA9PT0gb3RoZXIucHVycG9zZSAmJlxyXG4gICAgICAgICAgICB0aGlzLnNlcXVlbmNlTnVtYmVyID09PSBvdGhlci5zZXF1ZW5jZU51bWJlciAmJlxyXG4gICAgICAgICAgICB0aGlzLnNuYXBzaG90VmVyc2lvbi5pc0VxdWFsKG90aGVyLnNuYXBzaG90VmVyc2lvbikgJiZcclxuICAgICAgICAgICAgdGhpcy5sYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uLmlzRXF1YWwob3RoZXIubGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbikgJiZcclxuICAgICAgICAgICAgdGhpcy5yZXN1bWVUb2tlbiA9PT0gb3RoZXIucmVzdW1lVG9rZW4gJiZcclxuICAgICAgICAgICAgdGhpcy50YXJnZXQuaXNFcXVhbChvdGhlci50YXJnZXQpKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gVGFyZ2V0RGF0YTtcclxufSgpKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKiBTZXJpYWxpemVyIGZvciB2YWx1ZXMgc3RvcmVkIGluIHRoZSBMb2NhbFN0b3JlLiAqL1xyXG52YXIgTG9jYWxTZXJpYWxpemVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gTG9jYWxTZXJpYWxpemVyKHJlbW90ZVNlcmlhbGl6ZXIpIHtcclxuICAgICAgICB0aGlzLnJlbW90ZVNlcmlhbGl6ZXIgPSByZW1vdGVTZXJpYWxpemVyO1xyXG4gICAgfVxyXG4gICAgLyoqIERlY29kZXMgYSByZW1vdGUgZG9jdW1lbnQgZnJvbSBzdG9yYWdlIGxvY2FsbHkgdG8gYSBEb2N1bWVudC4gKi9cclxuICAgIExvY2FsU2VyaWFsaXplci5wcm90b3R5cGUuZnJvbURiUmVtb3RlRG9jdW1lbnQgPSBmdW5jdGlvbiAocmVtb3RlRG9jKSB7XHJcbiAgICAgICAgaWYgKHJlbW90ZURvYy5kb2N1bWVudCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yZW1vdGVTZXJpYWxpemVyLmZyb21Eb2N1bWVudChyZW1vdGVEb2MuZG9jdW1lbnQsICEhcmVtb3RlRG9jLmhhc0NvbW1pdHRlZE11dGF0aW9ucyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHJlbW90ZURvYy5ub0RvY3VtZW50KSB7XHJcbiAgICAgICAgICAgIHZhciBrZXkgPSBEb2N1bWVudEtleS5mcm9tU2VnbWVudHMocmVtb3RlRG9jLm5vRG9jdW1lbnQucGF0aCk7XHJcbiAgICAgICAgICAgIHZhciB2ZXJzaW9uID0gdGhpcy5mcm9tRGJUaW1lc3RhbXAocmVtb3RlRG9jLm5vRG9jdW1lbnQucmVhZFRpbWUpO1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IE5vRG9jdW1lbnQoa2V5LCB2ZXJzaW9uLCB7XHJcbiAgICAgICAgICAgICAgICBoYXNDb21taXR0ZWRNdXRhdGlvbnM6ICEhcmVtb3RlRG9jLmhhc0NvbW1pdHRlZE11dGF0aW9uc1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAocmVtb3RlRG9jLnVua25vd25Eb2N1bWVudCkge1xyXG4gICAgICAgICAgICB2YXIga2V5ID0gRG9jdW1lbnRLZXkuZnJvbVNlZ21lbnRzKHJlbW90ZURvYy51bmtub3duRG9jdW1lbnQucGF0aCk7XHJcbiAgICAgICAgICAgIHZhciB2ZXJzaW9uID0gdGhpcy5mcm9tRGJUaW1lc3RhbXAocmVtb3RlRG9jLnVua25vd25Eb2N1bWVudC52ZXJzaW9uKTtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBVbmtub3duRG9jdW1lbnQoa2V5LCB2ZXJzaW9uKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWlsKCdVbmV4cGVjdGVkIERiUmVtb3RlRG9jdW1lbnQnKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqIEVuY29kZXMgYSBkb2N1bWVudCBmb3Igc3RvcmFnZSBsb2NhbGx5LiAqL1xyXG4gICAgTG9jYWxTZXJpYWxpemVyLnByb3RvdHlwZS50b0RiUmVtb3RlRG9jdW1lbnQgPSBmdW5jdGlvbiAobWF5YmVEb2MsIHJlYWRUaW1lKSB7XHJcbiAgICAgICAgdmFyIGRiUmVhZFRpbWUgPSB0aGlzLnRvRGJUaW1lc3RhbXBLZXkocmVhZFRpbWUpO1xyXG4gICAgICAgIHZhciBwYXJlbnRQYXRoID0gbWF5YmVEb2Mua2V5LnBhdGgucG9wTGFzdCgpLnRvQXJyYXkoKTtcclxuICAgICAgICBpZiAobWF5YmVEb2MgaW5zdGFuY2VvZiBEb2N1bWVudCkge1xyXG4gICAgICAgICAgICB2YXIgZG9jID0gbWF5YmVEb2MucHJvdG9cclxuICAgICAgICAgICAgICAgID8gbWF5YmVEb2MucHJvdG9cclxuICAgICAgICAgICAgICAgIDogdGhpcy5yZW1vdGVTZXJpYWxpemVyLnRvRG9jdW1lbnQobWF5YmVEb2MpO1xyXG4gICAgICAgICAgICB2YXIgaGFzQ29tbWl0dGVkTXV0YXRpb25zID0gbWF5YmVEb2MuaGFzQ29tbWl0dGVkTXV0YXRpb25zO1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IERiUmVtb3RlRG9jdW1lbnQoXHJcbiAgICAgICAgICAgIC8qIHVua25vd25Eb2N1bWVudD0gKi8gbnVsbCwgXHJcbiAgICAgICAgICAgIC8qIG5vRG9jdW1lbnQ9ICovIG51bGwsIGRvYywgaGFzQ29tbWl0dGVkTXV0YXRpb25zLCBkYlJlYWRUaW1lLCBwYXJlbnRQYXRoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAobWF5YmVEb2MgaW5zdGFuY2VvZiBOb0RvY3VtZW50KSB7XHJcbiAgICAgICAgICAgIHZhciBwYXRoID0gbWF5YmVEb2Mua2V5LnBhdGgudG9BcnJheSgpO1xyXG4gICAgICAgICAgICB2YXIgcmVhZFRpbWVfMSA9IHRoaXMudG9EYlRpbWVzdGFtcChtYXliZURvYy52ZXJzaW9uKTtcclxuICAgICAgICAgICAgdmFyIGhhc0NvbW1pdHRlZE11dGF0aW9ucyA9IG1heWJlRG9jLmhhc0NvbW1pdHRlZE11dGF0aW9ucztcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBEYlJlbW90ZURvY3VtZW50KFxyXG4gICAgICAgICAgICAvKiB1bmtub3duRG9jdW1lbnQ9ICovIG51bGwsIG5ldyBEYk5vRG9jdW1lbnQocGF0aCwgcmVhZFRpbWVfMSksIFxyXG4gICAgICAgICAgICAvKiBkb2N1bWVudD0gKi8gbnVsbCwgaGFzQ29tbWl0dGVkTXV0YXRpb25zLCBkYlJlYWRUaW1lLCBwYXJlbnRQYXRoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAobWF5YmVEb2MgaW5zdGFuY2VvZiBVbmtub3duRG9jdW1lbnQpIHtcclxuICAgICAgICAgICAgdmFyIHBhdGggPSBtYXliZURvYy5rZXkucGF0aC50b0FycmF5KCk7XHJcbiAgICAgICAgICAgIHZhciByZWFkVGltZV8yID0gdGhpcy50b0RiVGltZXN0YW1wKG1heWJlRG9jLnZlcnNpb24pO1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IERiUmVtb3RlRG9jdW1lbnQobmV3IERiVW5rbm93bkRvY3VtZW50KHBhdGgsIHJlYWRUaW1lXzIpLCBcclxuICAgICAgICAgICAgLyogbm9Eb2N1bWVudD0gKi8gbnVsbCwgXHJcbiAgICAgICAgICAgIC8qIGRvY3VtZW50PSAqLyBudWxsLCBcclxuICAgICAgICAgICAgLyogaGFzQ29tbWl0dGVkTXV0YXRpb25zPSAqLyB0cnVlLCBkYlJlYWRUaW1lLCBwYXJlbnRQYXRoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWlsKCdVbmV4cGVjdGVkIE1heWJlRG9jdW1lbnQnKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgTG9jYWxTZXJpYWxpemVyLnByb3RvdHlwZS50b0RiVGltZXN0YW1wS2V5ID0gZnVuY3Rpb24gKHNuYXBzaG90VmVyc2lvbikge1xyXG4gICAgICAgIHZhciB0aW1lc3RhbXAgPSBzbmFwc2hvdFZlcnNpb24udG9UaW1lc3RhbXAoKTtcclxuICAgICAgICByZXR1cm4gW3RpbWVzdGFtcC5zZWNvbmRzLCB0aW1lc3RhbXAubmFub3NlY29uZHNdO1xyXG4gICAgfTtcclxuICAgIExvY2FsU2VyaWFsaXplci5wcm90b3R5cGUuZnJvbURiVGltZXN0YW1wS2V5ID0gZnVuY3Rpb24gKGRiVGltZXN0YW1wS2V5KSB7XHJcbiAgICAgICAgdmFyIHRpbWVzdGFtcCA9IG5ldyBUaW1lc3RhbXAoZGJUaW1lc3RhbXBLZXlbMF0sIGRiVGltZXN0YW1wS2V5WzFdKTtcclxuICAgICAgICByZXR1cm4gU25hcHNob3RWZXJzaW9uLmZyb21UaW1lc3RhbXAodGltZXN0YW1wKTtcclxuICAgIH07XHJcbiAgICBMb2NhbFNlcmlhbGl6ZXIucHJvdG90eXBlLnRvRGJUaW1lc3RhbXAgPSBmdW5jdGlvbiAoc25hcHNob3RWZXJzaW9uKSB7XHJcbiAgICAgICAgdmFyIHRpbWVzdGFtcCA9IHNuYXBzaG90VmVyc2lvbi50b1RpbWVzdGFtcCgpO1xyXG4gICAgICAgIHJldHVybiBuZXcgRGJUaW1lc3RhbXAodGltZXN0YW1wLnNlY29uZHMsIHRpbWVzdGFtcC5uYW5vc2Vjb25kcyk7XHJcbiAgICB9O1xyXG4gICAgTG9jYWxTZXJpYWxpemVyLnByb3RvdHlwZS5mcm9tRGJUaW1lc3RhbXAgPSBmdW5jdGlvbiAoZGJUaW1lc3RhbXApIHtcclxuICAgICAgICB2YXIgdGltZXN0YW1wID0gbmV3IFRpbWVzdGFtcChkYlRpbWVzdGFtcC5zZWNvbmRzLCBkYlRpbWVzdGFtcC5uYW5vc2Vjb25kcyk7XHJcbiAgICAgICAgcmV0dXJuIFNuYXBzaG90VmVyc2lvbi5mcm9tVGltZXN0YW1wKHRpbWVzdGFtcCk7XHJcbiAgICB9O1xyXG4gICAgLyoqIEVuY29kZXMgYSBiYXRjaCBvZiBtdXRhdGlvbnMgaW50byBhIERiTXV0YXRpb25CYXRjaCBmb3IgbG9jYWwgc3RvcmFnZS4gKi9cclxuICAgIExvY2FsU2VyaWFsaXplci5wcm90b3R5cGUudG9EYk11dGF0aW9uQmF0Y2ggPSBmdW5jdGlvbiAodXNlcklkLCBiYXRjaCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIHNlcmlhbGl6ZWRCYXNlTXV0YXRpb25zID0gYmF0Y2guYmFzZU11dGF0aW9ucy5tYXAoZnVuY3Rpb24gKG0pIHtcclxuICAgICAgICAgICAgcmV0dXJuIF90aGlzLnJlbW90ZVNlcmlhbGl6ZXIudG9NdXRhdGlvbihtKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB2YXIgc2VyaWFsaXplZE11dGF0aW9ucyA9IGJhdGNoLm11dGF0aW9ucy5tYXAoZnVuY3Rpb24gKG0pIHtcclxuICAgICAgICAgICAgcmV0dXJuIF90aGlzLnJlbW90ZVNlcmlhbGl6ZXIudG9NdXRhdGlvbihtKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gbmV3IERiTXV0YXRpb25CYXRjaCh1c2VySWQsIGJhdGNoLmJhdGNoSWQsIGJhdGNoLmxvY2FsV3JpdGVUaW1lLnRvTWlsbGlzKCksIHNlcmlhbGl6ZWRCYXNlTXV0YXRpb25zLCBzZXJpYWxpemVkTXV0YXRpb25zKTtcclxuICAgIH07XHJcbiAgICAvKiogRGVjb2RlcyBhIERiTXV0YXRpb25CYXRjaCBpbnRvIGEgTXV0YXRpb25CYXRjaCAqL1xyXG4gICAgTG9jYWxTZXJpYWxpemVyLnByb3RvdHlwZS5mcm9tRGJNdXRhdGlvbkJhdGNoID0gZnVuY3Rpb24gKGRiQmF0Y2gpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhciBiYXNlTXV0YXRpb25zID0gKGRiQmF0Y2guYmFzZU11dGF0aW9ucyB8fCBbXSkubWFwKGZ1bmN0aW9uIChtKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5yZW1vdGVTZXJpYWxpemVyLmZyb21NdXRhdGlvbihtKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB2YXIgbXV0YXRpb25zID0gZGJCYXRjaC5tdXRhdGlvbnMubWFwKGZ1bmN0aW9uIChtKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5yZW1vdGVTZXJpYWxpemVyLmZyb21NdXRhdGlvbihtKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB2YXIgdGltZXN0YW1wID0gVGltZXN0YW1wLmZyb21NaWxsaXMoZGJCYXRjaC5sb2NhbFdyaXRlVGltZU1zKTtcclxuICAgICAgICByZXR1cm4gbmV3IE11dGF0aW9uQmF0Y2goZGJCYXRjaC5iYXRjaElkLCB0aW1lc3RhbXAsIGJhc2VNdXRhdGlvbnMsIG11dGF0aW9ucyk7XHJcbiAgICB9O1xyXG4gICAgLypcclxuICAgICAqIEVuY29kZXMgYSBzZXQgb2YgZG9jdW1lbnQga2V5cyBpbnRvIGFuIGFycmF5IG9mIEVuY29kZWRSZXNvdXJjZVBhdGhzLlxyXG4gICAgICovXHJcbiAgICBMb2NhbFNlcmlhbGl6ZXIucHJvdG90eXBlLnRvRGJSZXNvdXJjZVBhdGhzID0gZnVuY3Rpb24gKGtleXMpIHtcclxuICAgICAgICB2YXIgZW5jb2RlZEtleXMgPSBbXTtcclxuICAgICAgICBrZXlzLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgICAgICBlbmNvZGVkS2V5cy5wdXNoKGVuY29kZShrZXkucGF0aCkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBlbmNvZGVkS2V5cztcclxuICAgIH07XHJcbiAgICAvKiogRGVjb2RlcyBhbiBhcnJheSBvZiBFbmNvZGVkUmVzb3VyY2VQYXRocyBpbnRvIGEgc2V0IG9mIGRvY3VtZW50IGtleXMuICovXHJcbiAgICBMb2NhbFNlcmlhbGl6ZXIucHJvdG90eXBlLmZyb21EYlJlc291cmNlUGF0aHMgPSBmdW5jdGlvbiAoZW5jb2RlZFBhdGhzKSB7XHJcbiAgICAgICAgdmFyIGtleXMgPSBkb2N1bWVudEtleVNldCgpO1xyXG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgZW5jb2RlZFBhdGhzXzEgPSBlbmNvZGVkUGF0aHM7IF9pIDwgZW5jb2RlZFBhdGhzXzEubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBkb2N1bWVudEtleSA9IGVuY29kZWRQYXRoc18xW19pXTtcclxuICAgICAgICAgICAga2V5cyA9IGtleXMuYWRkKG5ldyBEb2N1bWVudEtleShkZWNvZGUoZG9jdW1lbnRLZXkpKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBrZXlzO1xyXG4gICAgfTtcclxuICAgIC8qKiBEZWNvZGVzIGEgRGJUYXJnZXQgaW50byBUYXJnZXREYXRhICovXHJcbiAgICBMb2NhbFNlcmlhbGl6ZXIucHJvdG90eXBlLmZyb21EYlRhcmdldCA9IGZ1bmN0aW9uIChkYlRhcmdldCkge1xyXG4gICAgICAgIHZhciB2ZXJzaW9uID0gdGhpcy5mcm9tRGJUaW1lc3RhbXAoZGJUYXJnZXQucmVhZFRpbWUpO1xyXG4gICAgICAgIHZhciBsYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uID0gZGJUYXJnZXQubGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbiAhPT0gdW5kZWZpbmVkXHJcbiAgICAgICAgICAgID8gdGhpcy5mcm9tRGJUaW1lc3RhbXAoZGJUYXJnZXQubGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbilcclxuICAgICAgICAgICAgOiBTbmFwc2hvdFZlcnNpb24uTUlOO1xyXG4gICAgICAgIC8vIFRPRE8oYi8xNDA1NzM0ODYpOiBDb252ZXJ0IHRvIHBsYXRmb3JtIHJlcHJlc2VudGF0aW9uXHJcbiAgICAgICAgdmFyIHJlc3VtZVRva2VuID0gZGJUYXJnZXQucmVzdW1lVG9rZW47XHJcbiAgICAgICAgdmFyIHRhcmdldDtcclxuICAgICAgICBpZiAoaXNEb2N1bWVudFF1ZXJ5KGRiVGFyZ2V0LnF1ZXJ5KSkge1xyXG4gICAgICAgICAgICB0YXJnZXQgPSB0aGlzLnJlbW90ZVNlcmlhbGl6ZXIuZnJvbURvY3VtZW50c1RhcmdldChkYlRhcmdldC5xdWVyeSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0YXJnZXQgPSB0aGlzLnJlbW90ZVNlcmlhbGl6ZXIuZnJvbVF1ZXJ5VGFyZ2V0KGRiVGFyZ2V0LnF1ZXJ5KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG5ldyBUYXJnZXREYXRhKHRhcmdldCwgZGJUYXJnZXQudGFyZ2V0SWQsIFRhcmdldFB1cnBvc2UuTGlzdGVuLCBkYlRhcmdldC5sYXN0TGlzdGVuU2VxdWVuY2VOdW1iZXIsIHZlcnNpb24sIGxhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24sIHJlc3VtZVRva2VuKTtcclxuICAgIH07XHJcbiAgICAvKiogRW5jb2RlcyBUYXJnZXREYXRhIGludG8gYSBEYlRhcmdldCBmb3Igc3RvcmFnZSBsb2NhbGx5LiAqL1xyXG4gICAgTG9jYWxTZXJpYWxpemVyLnByb3RvdHlwZS50b0RiVGFyZ2V0ID0gZnVuY3Rpb24gKHRhcmdldERhdGEpIHtcclxuICAgICAgICBhc3NlcnQoVGFyZ2V0UHVycG9zZS5MaXN0ZW4gPT09IHRhcmdldERhdGEucHVycG9zZSwgJ09ubHkgcXVlcmllcyB3aXRoIHB1cnBvc2UgJyArXHJcbiAgICAgICAgICAgIFRhcmdldFB1cnBvc2UuTGlzdGVuICtcclxuICAgICAgICAgICAgJyBtYXkgYmUgc3RvcmVkLCBnb3QgJyArXHJcbiAgICAgICAgICAgIHRhcmdldERhdGEucHVycG9zZSk7XHJcbiAgICAgICAgdmFyIGRiVGltZXN0YW1wID0gdGhpcy50b0RiVGltZXN0YW1wKHRhcmdldERhdGEuc25hcHNob3RWZXJzaW9uKTtcclxuICAgICAgICB2YXIgZGJMYXN0TGltYm9GcmVlVGltZXN0YW1wID0gdGhpcy50b0RiVGltZXN0YW1wKHRhcmdldERhdGEubGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbik7XHJcbiAgICAgICAgdmFyIHF1ZXJ5UHJvdG87XHJcbiAgICAgICAgaWYgKHRhcmdldERhdGEudGFyZ2V0LmlzRG9jdW1lbnRRdWVyeSgpKSB7XHJcbiAgICAgICAgICAgIHF1ZXJ5UHJvdG8gPSB0aGlzLnJlbW90ZVNlcmlhbGl6ZXIudG9Eb2N1bWVudHNUYXJnZXQodGFyZ2V0RGF0YS50YXJnZXQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcXVlcnlQcm90byA9IHRoaXMucmVtb3RlU2VyaWFsaXplci50b1F1ZXJ5VGFyZ2V0KHRhcmdldERhdGEudGFyZ2V0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIHJlc3VtZVRva2VuO1xyXG4gICAgICAgIGlmICh0YXJnZXREYXRhLnJlc3VtZVRva2VuIGluc3RhbmNlb2YgVWludDhBcnJheSkge1xyXG4gICAgICAgICAgICAvLyBUT0RPKGIvNzg3NzE0MDMpOiBDb252ZXJ0IHRva2VucyB0byBzdHJpbmdzIGR1cmluZyBkZXNlcmlhbGl6YXRpb25cclxuICAgICAgICAgICAgYXNzZXJ0KFNpbXBsZURiLmlzTW9ja1BlcnNpc3RlbmNlKCksICdQZXJzaXN0aW5nIG5vbi1zdHJpbmcgc3RyZWFtIHRva2VucyBpcyBvbmx5IHN1cHBvcnRlZCB3aXRoIG1vY2sgcGVyc2lzdGVuY2UgLicpO1xyXG4gICAgICAgICAgICByZXN1bWVUb2tlbiA9IHRhcmdldERhdGEucmVzdW1lVG9rZW4udG9TdHJpbmcoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJlc3VtZVRva2VuID0gdGFyZ2V0RGF0YS5yZXN1bWVUb2tlbjtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gbGFzdExpc3RlblNlcXVlbmNlTnVtYmVyIGlzIGFsd2F5cyAwIHVudGlsIHdlIGRvIHJlYWwgR0MuXHJcbiAgICAgICAgcmV0dXJuIG5ldyBEYlRhcmdldCh0YXJnZXREYXRhLnRhcmdldElkLCB0YXJnZXREYXRhLnRhcmdldC5jYW5vbmljYWxJZCgpLCBkYlRpbWVzdGFtcCwgcmVzdW1lVG9rZW4sIHRhcmdldERhdGEuc2VxdWVuY2VOdW1iZXIsIGRiTGFzdExpbWJvRnJlZVRpbWVzdGFtcCwgcXVlcnlQcm90byk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIExvY2FsU2VyaWFsaXplcjtcclxufSgpKTtcclxuLyoqXHJcbiAqIEEgaGVscGVyIGZ1bmN0aW9uIGZvciBmaWd1cmluZyBvdXQgd2hhdCBraW5kIG9mIHF1ZXJ5IGhhcyBiZWVuIHN0b3JlZC5cclxuICovXHJcbmZ1bmN0aW9uIGlzRG9jdW1lbnRRdWVyeShkYlF1ZXJ5KSB7XHJcbiAgICByZXR1cm4gZGJRdWVyeS5kb2N1bWVudHMgIT09IHVuZGVmaW5lZDtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gYnVmZmVyRW50cnlDb21wYXJhdG9yKF9hLCBfYikge1xyXG4gICAgdmFyIGFTZXF1ZW5jZSA9IF9hWzBdLCBhSW5kZXggPSBfYVsxXTtcclxuICAgIHZhciBiU2VxdWVuY2UgPSBfYlswXSwgYkluZGV4ID0gX2JbMV07XHJcbiAgICB2YXIgc2VxQ21wID0gcHJpbWl0aXZlQ29tcGFyYXRvcihhU2VxdWVuY2UsIGJTZXF1ZW5jZSk7XHJcbiAgICBpZiAoc2VxQ21wID09PSAwKSB7XHJcbiAgICAgICAgLy8gVGhpcyBvcmRlciBkb2Vzbid0IG1hdHRlciwgYnV0IHdlIGNhbiBiaWFzIGFnYWluc3QgY2h1cm4gYnkgc29ydGluZ1xyXG4gICAgICAgIC8vIGVudHJpZXMgY3JlYXRlZCBlYXJsaWVyIGFzIGxlc3MgdGhhbiBuZXdlciBlbnRyaWVzLlxyXG4gICAgICAgIHJldHVybiBwcmltaXRpdmVDb21wYXJhdG9yKGFJbmRleCwgYkluZGV4KTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBzZXFDbXA7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIFVzZWQgdG8gY2FsY3VsYXRlIHRoZSBudGggc2VxdWVuY2UgbnVtYmVyLiBLZWVwcyBhIHJvbGxpbmcgYnVmZmVyIG9mIHRoZVxyXG4gKiBsb3dlc3QgbiB2YWx1ZXMgcGFzc2VkIHRvIGBhZGRFbGVtZW50YCwgYW5kIGZpbmFsbHkgcmVwb3J0cyB0aGUgbGFyZ2VzdCBvZlxyXG4gKiB0aGVtIGluIGBtYXhWYWx1ZWAuXHJcbiAqL1xyXG52YXIgUm9sbGluZ1NlcXVlbmNlTnVtYmVyQnVmZmVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gUm9sbGluZ1NlcXVlbmNlTnVtYmVyQnVmZmVyKG1heEVsZW1lbnRzKSB7XHJcbiAgICAgICAgdGhpcy5tYXhFbGVtZW50cyA9IG1heEVsZW1lbnRzO1xyXG4gICAgICAgIHRoaXMuYnVmZmVyID0gbmV3IFNvcnRlZFNldChidWZmZXJFbnRyeUNvbXBhcmF0b3IpO1xyXG4gICAgICAgIHRoaXMucHJldmlvdXNJbmRleCA9IDA7XHJcbiAgICB9XHJcbiAgICBSb2xsaW5nU2VxdWVuY2VOdW1iZXJCdWZmZXIucHJvdG90eXBlLm5leHRJbmRleCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gKyt0aGlzLnByZXZpb3VzSW5kZXg7XHJcbiAgICB9O1xyXG4gICAgUm9sbGluZ1NlcXVlbmNlTnVtYmVyQnVmZmVyLnByb3RvdHlwZS5hZGRFbGVtZW50ID0gZnVuY3Rpb24gKHNlcXVlbmNlTnVtYmVyKSB7XHJcbiAgICAgICAgdmFyIGVudHJ5ID0gW3NlcXVlbmNlTnVtYmVyLCB0aGlzLm5leHRJbmRleCgpXTtcclxuICAgICAgICBpZiAodGhpcy5idWZmZXIuc2l6ZSA8IHRoaXMubWF4RWxlbWVudHMpIHtcclxuICAgICAgICAgICAgdGhpcy5idWZmZXIgPSB0aGlzLmJ1ZmZlci5hZGQoZW50cnkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdmFyIGhpZ2hlc3RWYWx1ZSA9IHRoaXMuYnVmZmVyLmxhc3QoKTtcclxuICAgICAgICAgICAgaWYgKGJ1ZmZlckVudHJ5Q29tcGFyYXRvcihlbnRyeSwgaGlnaGVzdFZhbHVlKSA8IDApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYnVmZmVyID0gdGhpcy5idWZmZXIuZGVsZXRlKGhpZ2hlc3RWYWx1ZSkuYWRkKGVudHJ5KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoUm9sbGluZ1NlcXVlbmNlTnVtYmVyQnVmZmVyLnByb3RvdHlwZSwgXCJtYXhWYWx1ZVwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIC8vIEd1YXJhbnRlZWQgdG8gYmUgbm9uLWVtcHR5LiBJZiB3ZSBkZWNpZGUgd2UgYXJlIG5vdCBjb2xsZWN0aW5nIGFueVxyXG4gICAgICAgICAgICAvLyBzZXF1ZW5jZSBudW1iZXJzLCBudGhTZXF1ZW5jZU51bWJlciBiZWxvdyBzaG9ydC1jaXJjdWl0cy4gSWYgd2UgaGF2ZVxyXG4gICAgICAgICAgICAvLyBkZWNpZGVkIHRoYXQgd2UgYXJlIGNvbGxlY3RpbmcgbiBzZXF1ZW5jZSBudW1iZXJzLCBpdCdzIGJlY2F1c2UgbiBpcyBzb21lXHJcbiAgICAgICAgICAgIC8vIHBlcmNlbnRhZ2Ugb2YgdGhlIGV4aXN0aW5nIHNlcXVlbmNlIG51bWJlcnMuIFRoYXQgbWVhbnMgd2Ugc2hvdWxkIG5ldmVyXHJcbiAgICAgICAgICAgIC8vIGJlIGluIGEgc2l0dWF0aW9uIHdoZXJlIHdlIGFyZSBjb2xsZWN0aW5nIHNlcXVlbmNlIG51bWJlcnMgYnV0IGRvbid0XHJcbiAgICAgICAgICAgIC8vIGFjdHVhbGx5IGhhdmUgYW55LlxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5idWZmZXIubGFzdCgpWzBdO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIFJvbGxpbmdTZXF1ZW5jZU51bWJlckJ1ZmZlcjtcclxufSgpKTtcclxudmFyIEdDX0RJRF9OT1RfUlVOID0ge1xyXG4gICAgZGlkUnVuOiBmYWxzZSxcclxuICAgIHNlcXVlbmNlTnVtYmVyc0NvbGxlY3RlZDogMCxcclxuICAgIHRhcmdldHNSZW1vdmVkOiAwLFxyXG4gICAgZG9jdW1lbnRzUmVtb3ZlZDogMFxyXG59O1xyXG52YXIgTHJ1UGFyYW1zID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gTHJ1UGFyYW1zKFxyXG4gICAgLy8gV2hlbiB3ZSBhdHRlbXB0IHRvIGNvbGxlY3QsIHdlIHdpbGwgb25seSBkbyBzbyBpZiB0aGUgY2FjaGUgc2l6ZSBpcyBncmVhdGVyIHRoYW4gdGhpc1xyXG4gICAgLy8gdGhyZXNob2xkLiBQYXNzaW5nIGBDT0xMRUNUSU9OX0RJU0FCTEVEYCBoZXJlIHdpbGwgY2F1c2UgY29sbGVjdGlvbiB0byBhbHdheXMgYmUgc2tpcHBlZC5cclxuICAgIGNhY2hlU2l6ZUNvbGxlY3Rpb25UaHJlc2hvbGQsIFxyXG4gICAgLy8gVGhlIHBlcmNlbnRhZ2Ugb2Ygc2VxdWVuY2UgbnVtYmVycyB0aGF0IHdlIHdpbGwgYXR0ZW1wdCB0byBjb2xsZWN0XHJcbiAgICBwZXJjZW50aWxlVG9Db2xsZWN0LCBcclxuICAgIC8vIEEgY2FwIG9uIHRoZSB0b3RhbCBudW1iZXIgb2Ygc2VxdWVuY2UgbnVtYmVycyB0aGF0IHdpbGwgYmUgY29sbGVjdGVkLiBUaGlzIHByZXZlbnRzXHJcbiAgICAvLyB1cyBmcm9tIGNvbGxlY3RpbmcgYSBodWdlIG51bWJlciBvZiBzZXF1ZW5jZSBudW1iZXJzIGlmIHRoZSBjYWNoZSBoYXMgZ3Jvd24gdmVyeSBsYXJnZS5cclxuICAgIG1heGltdW1TZXF1ZW5jZU51bWJlcnNUb0NvbGxlY3QpIHtcclxuICAgICAgICB0aGlzLmNhY2hlU2l6ZUNvbGxlY3Rpb25UaHJlc2hvbGQgPSBjYWNoZVNpemVDb2xsZWN0aW9uVGhyZXNob2xkO1xyXG4gICAgICAgIHRoaXMucGVyY2VudGlsZVRvQ29sbGVjdCA9IHBlcmNlbnRpbGVUb0NvbGxlY3Q7XHJcbiAgICAgICAgdGhpcy5tYXhpbXVtU2VxdWVuY2VOdW1iZXJzVG9Db2xsZWN0ID0gbWF4aW11bVNlcXVlbmNlTnVtYmVyc1RvQ29sbGVjdDtcclxuICAgIH1cclxuICAgIExydVBhcmFtcy53aXRoQ2FjaGVTaXplID0gZnVuY3Rpb24gKGNhY2hlU2l6ZSkge1xyXG4gICAgICAgIHJldHVybiBuZXcgTHJ1UGFyYW1zKGNhY2hlU2l6ZSwgTHJ1UGFyYW1zLkRFRkFVTFRfQ09MTEVDVElPTl9QRVJDRU5USUxFLCBMcnVQYXJhbXMuREVGQVVMVF9NQVhfU0VRVUVOQ0VfTlVNQkVSU19UT19DT0xMRUNUKTtcclxuICAgIH07XHJcbiAgICBMcnVQYXJhbXMuQ09MTEVDVElPTl9ESVNBQkxFRCA9IC0xO1xyXG4gICAgTHJ1UGFyYW1zLk1JTklNVU1fQ0FDSEVfU0laRV9CWVRFUyA9IDEgKiAxMDI0ICogMTAyNDtcclxuICAgIExydVBhcmFtcy5ERUZBVUxUX0NBQ0hFX1NJWkVfQllURVMgPSA0MCAqIDEwMjQgKiAxMDI0O1xyXG4gICAgTHJ1UGFyYW1zLkRFRkFVTFRfQ09MTEVDVElPTl9QRVJDRU5USUxFID0gMTA7XHJcbiAgICBMcnVQYXJhbXMuREVGQVVMVF9NQVhfU0VRVUVOQ0VfTlVNQkVSU19UT19DT0xMRUNUID0gMTAwMDtcclxuICAgIExydVBhcmFtcy5ERUZBVUxUID0gbmV3IExydVBhcmFtcyhMcnVQYXJhbXMuREVGQVVMVF9DQUNIRV9TSVpFX0JZVEVTLCBMcnVQYXJhbXMuREVGQVVMVF9DT0xMRUNUSU9OX1BFUkNFTlRJTEUsIExydVBhcmFtcy5ERUZBVUxUX01BWF9TRVFVRU5DRV9OVU1CRVJTX1RPX0NPTExFQ1QpO1xyXG4gICAgTHJ1UGFyYW1zLkRJU0FCTEVEID0gbmV3IExydVBhcmFtcyhMcnVQYXJhbXMuQ09MTEVDVElPTl9ESVNBQkxFRCwgMCwgMCk7XHJcbiAgICByZXR1cm4gTHJ1UGFyYW1zO1xyXG59KCkpO1xyXG4vKiogSG93IGxvbmcgd2Ugd2FpdCB0byB0cnkgcnVubmluZyBMUlUgR0MgYWZ0ZXIgU0RLIGluaXRpYWxpemF0aW9uLiAqL1xyXG52YXIgSU5JVElBTF9HQ19ERUxBWV9NUyA9IDEgKiA2MCAqIDEwMDA7XHJcbi8qKiBNaW5pbXVtIGFtb3VudCBvZiB0aW1lIGJldHdlZW4gR0MgY2hlY2tzLCBhZnRlciB0aGUgZmlyc3Qgb25lLiAqL1xyXG52YXIgUkVHVUxBUl9HQ19ERUxBWV9NUyA9IDUgKiA2MCAqIDEwMDA7XHJcbi8qKlxyXG4gKiBUaGlzIGNsYXNzIGlzIHJlc3BvbnNpYmxlIGZvciB0aGUgc2NoZWR1bGluZyBvZiBMUlUgZ2FyYmFnZSBjb2xsZWN0aW9uLiBJdCBoYW5kbGVzIGNoZWNraW5nXHJcbiAqIHdoZXRoZXIgb3Igbm90IEdDIGlzIGVuYWJsZWQsIGFzIHdlbGwgYXMgd2hpY2ggZGVsYXkgdG8gdXNlIGJlZm9yZSB0aGUgbmV4dCBydW4uXHJcbiAqL1xyXG52YXIgTHJ1U2NoZWR1bGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gTHJ1U2NoZWR1bGVyKGdhcmJhZ2VDb2xsZWN0b3IsIGFzeW5jUXVldWUsIGxvY2FsU3RvcmUpIHtcclxuICAgICAgICB0aGlzLmdhcmJhZ2VDb2xsZWN0b3IgPSBnYXJiYWdlQ29sbGVjdG9yO1xyXG4gICAgICAgIHRoaXMuYXN5bmNRdWV1ZSA9IGFzeW5jUXVldWU7XHJcbiAgICAgICAgdGhpcy5sb2NhbFN0b3JlID0gbG9jYWxTdG9yZTtcclxuICAgICAgICB0aGlzLmhhc1J1biA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuZ2NUYXNrID0gbnVsbDtcclxuICAgIH1cclxuICAgIExydVNjaGVkdWxlci5wcm90b3R5cGUuc3RhcnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgYXNzZXJ0KHRoaXMuZ2NUYXNrID09PSBudWxsLCAnQ2Fubm90IHN0YXJ0IGFuIGFscmVhZHkgc3RhcnRlZCBMcnVTY2hlZHVsZXInKTtcclxuICAgICAgICBpZiAodGhpcy5nYXJiYWdlQ29sbGVjdG9yLnBhcmFtcy5jYWNoZVNpemVDb2xsZWN0aW9uVGhyZXNob2xkICE9PVxyXG4gICAgICAgICAgICBMcnVQYXJhbXMuQ09MTEVDVElPTl9ESVNBQkxFRCkge1xyXG4gICAgICAgICAgICB0aGlzLnNjaGVkdWxlR0MoKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgTHJ1U2NoZWR1bGVyLnByb3RvdHlwZS5zdG9wID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmdjVGFzaykge1xyXG4gICAgICAgICAgICB0aGlzLmdjVGFzay5jYW5jZWwoKTtcclxuICAgICAgICAgICAgdGhpcy5nY1Rhc2sgPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTHJ1U2NoZWR1bGVyLnByb3RvdHlwZSwgXCJzdGFydGVkXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2NUYXNrICE9PSBudWxsO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgTHJ1U2NoZWR1bGVyLnByb3RvdHlwZS5zY2hlZHVsZUdDID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgYXNzZXJ0KHRoaXMuZ2NUYXNrID09PSBudWxsLCAnQ2Fubm90IHNjaGVkdWxlIEdDIHdoaWxlIGEgdGFzayBpcyBwZW5kaW5nJyk7XHJcbiAgICAgICAgdmFyIGRlbGF5ID0gdGhpcy5oYXNSdW4gPyBSRUdVTEFSX0dDX0RFTEFZX01TIDogSU5JVElBTF9HQ19ERUxBWV9NUztcclxuICAgICAgICBkZWJ1ZygnTHJ1R2FyYmFnZUNvbGxlY3RvcicsIFwiR2FyYmFnZSBjb2xsZWN0aW9uIHNjaGVkdWxlZCBpbiBcIiArIGRlbGF5ICsgXCJtc1wiKTtcclxuICAgICAgICB0aGlzLmdjVGFzayA9IHRoaXMuYXN5bmNRdWV1ZS5lbnF1ZXVlQWZ0ZXJEZWxheShUaW1lcklkLkxydUdhcmJhZ2VDb2xsZWN0aW9uLCBkZWxheSwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBfdGhpcy5nY1Rhc2sgPSBudWxsO1xyXG4gICAgICAgICAgICBfdGhpcy5oYXNSdW4gPSB0cnVlO1xyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXMubG9jYWxTdG9yZVxyXG4gICAgICAgICAgICAgICAgLmNvbGxlY3RHYXJiYWdlKF90aGlzLmdhcmJhZ2VDb2xsZWN0b3IpXHJcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5zY2hlZHVsZUdDKCk7IH0pXHJcbiAgICAgICAgICAgICAgICAuY2F0Y2goaWdub3JlSWZQcmltYXJ5TGVhc2VMb3NzKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gTHJ1U2NoZWR1bGVyO1xyXG59KCkpO1xyXG4vKiogSW1wbGVtZW50cyB0aGUgc3RlcHMgZm9yIExSVSBnYXJiYWdlIGNvbGxlY3Rpb24uICovXHJcbnZhciBMcnVHYXJiYWdlQ29sbGVjdG9yID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gTHJ1R2FyYmFnZUNvbGxlY3RvcihkZWxlZ2F0ZSwgcGFyYW1zKSB7XHJcbiAgICAgICAgdGhpcy5kZWxlZ2F0ZSA9IGRlbGVnYXRlO1xyXG4gICAgICAgIHRoaXMucGFyYW1zID0gcGFyYW1zO1xyXG4gICAgfVxyXG4gICAgLyoqIEdpdmVuIGEgcGVyY2VudGlsZSBvZiB0YXJnZXQgdG8gY29sbGVjdCwgcmV0dXJucyB0aGUgbnVtYmVyIG9mIHRhcmdldHMgdG8gY29sbGVjdC4gKi9cclxuICAgIExydUdhcmJhZ2VDb2xsZWN0b3IucHJvdG90eXBlLmNhbGN1bGF0ZVRhcmdldENvdW50ID0gZnVuY3Rpb24gKHR4biwgcGVyY2VudGlsZSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRlbGVnYXRlLmdldFNlcXVlbmNlTnVtYmVyQ291bnQodHhuKS5uZXh0KGZ1bmN0aW9uICh0YXJnZXRDb3VudCkge1xyXG4gICAgICAgICAgICByZXR1cm4gTWF0aC5mbG9vcigocGVyY2VudGlsZSAvIDEwMC4wKSAqIHRhcmdldENvdW50KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKiogUmV0dXJucyB0aGUgbnRoIHNlcXVlbmNlIG51bWJlciwgY291bnRpbmcgaW4gb3JkZXIgZnJvbSB0aGUgc21hbGxlc3QuICovXHJcbiAgICBMcnVHYXJiYWdlQ29sbGVjdG9yLnByb3RvdHlwZS5udGhTZXF1ZW5jZU51bWJlciA9IGZ1bmN0aW9uICh0eG4sIG4pIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIGlmIChuID09PSAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZShMaXN0ZW5TZXF1ZW5jZS5JTlZBTElEKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGJ1ZmZlciA9IG5ldyBSb2xsaW5nU2VxdWVuY2VOdW1iZXJCdWZmZXIobik7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGVsZWdhdGVcclxuICAgICAgICAgICAgLmZvckVhY2hUYXJnZXQodHhuLCBmdW5jdGlvbiAodGFyZ2V0KSB7IHJldHVybiBidWZmZXIuYWRkRWxlbWVudCh0YXJnZXQuc2VxdWVuY2VOdW1iZXIpOyB9KVxyXG4gICAgICAgICAgICAubmV4dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5kZWxlZ2F0ZS5mb3JFYWNoT3JwaGFuZWREb2N1bWVudFNlcXVlbmNlTnVtYmVyKHR4biwgZnVuY3Rpb24gKHNlcXVlbmNlTnVtYmVyKSB7IHJldHVybiBidWZmZXIuYWRkRWxlbWVudChzZXF1ZW5jZU51bWJlcik7IH0pO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIGJ1ZmZlci5tYXhWYWx1ZTsgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZW1vdmVzIHRhcmdldHMgd2l0aCBhIHNlcXVlbmNlIG51bWJlciBlcXVhbCB0byBvciBsZXNzIHRoYW4gdGhlIGdpdmVuIHVwcGVyIGJvdW5kLCBhbmQgcmVtb3Zlc1xyXG4gICAgICogZG9jdW1lbnQgYXNzb2NpYXRpb25zIHdpdGggdGhvc2UgdGFyZ2V0cy5cclxuICAgICAqL1xyXG4gICAgTHJ1R2FyYmFnZUNvbGxlY3Rvci5wcm90b3R5cGUucmVtb3ZlVGFyZ2V0cyA9IGZ1bmN0aW9uICh0eG4sIHVwcGVyQm91bmQsIGFjdGl2ZVRhcmdldElkcykge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRlbGVnYXRlLnJlbW92ZVRhcmdldHModHhuLCB1cHBlckJvdW5kLCBhY3RpdmVUYXJnZXRJZHMpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmVtb3ZlcyBkb2N1bWVudHMgdGhhdCBoYXZlIGEgc2VxdWVuY2UgbnVtYmVyIGVxdWFsIHRvIG9yIGxlc3MgdGhhbiB0aGUgdXBwZXIgYm91bmQgYW5kIGFyZSBub3RcclxuICAgICAqIG90aGVyd2lzZSBwaW5uZWQuXHJcbiAgICAgKi9cclxuICAgIExydUdhcmJhZ2VDb2xsZWN0b3IucHJvdG90eXBlLnJlbW92ZU9ycGhhbmVkRG9jdW1lbnRzID0gZnVuY3Rpb24gKHR4biwgdXBwZXJCb3VuZCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRlbGVnYXRlLnJlbW92ZU9ycGhhbmVkRG9jdW1lbnRzKHR4biwgdXBwZXJCb3VuZCk7XHJcbiAgICB9O1xyXG4gICAgTHJ1R2FyYmFnZUNvbGxlY3Rvci5wcm90b3R5cGUuY29sbGVjdCA9IGZ1bmN0aW9uICh0eG4sIGFjdGl2ZVRhcmdldElkcykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgaWYgKHRoaXMucGFyYW1zLmNhY2hlU2l6ZUNvbGxlY3Rpb25UaHJlc2hvbGQgPT09IExydVBhcmFtcy5DT0xMRUNUSU9OX0RJU0FCTEVEKSB7XHJcbiAgICAgICAgICAgIGRlYnVnKCdMcnVHYXJiYWdlQ29sbGVjdG9yJywgJ0dhcmJhZ2UgY29sbGVjdGlvbiBza2lwcGVkOyBkaXNhYmxlZCcpO1xyXG4gICAgICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoR0NfRElEX05PVF9SVU4pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRDYWNoZVNpemUodHhuKS5uZXh0KGZ1bmN0aW9uIChjYWNoZVNpemUpIHtcclxuICAgICAgICAgICAgaWYgKGNhY2hlU2l6ZSA8IF90aGlzLnBhcmFtcy5jYWNoZVNpemVDb2xsZWN0aW9uVGhyZXNob2xkKSB7XHJcbiAgICAgICAgICAgICAgICBkZWJ1ZygnTHJ1R2FyYmFnZUNvbGxlY3RvcicsIFwiR2FyYmFnZSBjb2xsZWN0aW9uIHNraXBwZWQ7IENhY2hlIHNpemUgXCIgKyBjYWNoZVNpemUgKyBcIiBcIiArXHJcbiAgICAgICAgICAgICAgICAgICAgKFwiaXMgbG93ZXIgdGhhbiB0aHJlc2hvbGQgXCIgKyBfdGhpcy5wYXJhbXMuY2FjaGVTaXplQ29sbGVjdGlvblRocmVzaG9sZCkpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIEdDX0RJRF9OT1RfUlVOO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLnJ1bkdhcmJhZ2VDb2xsZWN0aW9uKHR4biwgYWN0aXZlVGFyZ2V0SWRzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIExydUdhcmJhZ2VDb2xsZWN0b3IucHJvdG90eXBlLmdldENhY2hlU2l6ZSA9IGZ1bmN0aW9uICh0eG4pIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5kZWxlZ2F0ZS5nZXRDYWNoZVNpemUodHhuKTtcclxuICAgIH07XHJcbiAgICBMcnVHYXJiYWdlQ29sbGVjdG9yLnByb3RvdHlwZS5ydW5HYXJiYWdlQ29sbGVjdGlvbiA9IGZ1bmN0aW9uICh0eG4sIGFjdGl2ZVRhcmdldElkcykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIHVwcGVyQm91bmRTZXF1ZW5jZU51bWJlcjtcclxuICAgICAgICB2YXIgc2VxdWVuY2VOdW1iZXJzVG9Db2xsZWN0LCB0YXJnZXRzUmVtb3ZlZDtcclxuICAgICAgICAvLyBUaW1lc3RhbXBzIGZvciB2YXJpb3VzIHBpZWNlcyBvZiB0aGUgcHJvY2Vzc1xyXG4gICAgICAgIHZhciBjb3VudGVkVGFyZ2V0c1RzLCBmb3VuZFVwcGVyQm91bmRUcywgcmVtb3ZlZFRhcmdldHNUcywgcmVtb3ZlZERvY3VtZW50c1RzO1xyXG4gICAgICAgIHZhciBzdGFydFRzID0gRGF0ZS5ub3coKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5jYWxjdWxhdGVUYXJnZXRDb3VudCh0eG4sIHRoaXMucGFyYW1zLnBlcmNlbnRpbGVUb0NvbGxlY3QpXHJcbiAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uIChzZXF1ZW5jZU51bWJlcnMpIHtcclxuICAgICAgICAgICAgLy8gQ2FwIGF0IHRoZSBjb25maWd1cmVkIG1heFxyXG4gICAgICAgICAgICBpZiAoc2VxdWVuY2VOdW1iZXJzID4gX3RoaXMucGFyYW1zLm1heGltdW1TZXF1ZW5jZU51bWJlcnNUb0NvbGxlY3QpIHtcclxuICAgICAgICAgICAgICAgIGRlYnVnKCdMcnVHYXJiYWdlQ29sbGVjdG9yJywgJ0NhcHBpbmcgc2VxdWVuY2UgbnVtYmVycyB0byBjb2xsZWN0IGRvd24gJyArXHJcbiAgICAgICAgICAgICAgICAgICAgKFwidG8gdGhlIG1heGltdW0gb2YgXCIgKyBfdGhpcy5wYXJhbXMubWF4aW11bVNlcXVlbmNlTnVtYmVyc1RvQ29sbGVjdCArIFwiIFwiKSArXHJcbiAgICAgICAgICAgICAgICAgICAgKFwiZnJvbSBcIiArIHNlcXVlbmNlTnVtYmVycykpO1xyXG4gICAgICAgICAgICAgICAgc2VxdWVuY2VOdW1iZXJzVG9Db2xsZWN0ID0gX3RoaXMucGFyYW1zXHJcbiAgICAgICAgICAgICAgICAgICAgLm1heGltdW1TZXF1ZW5jZU51bWJlcnNUb0NvbGxlY3Q7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBzZXF1ZW5jZU51bWJlcnNUb0NvbGxlY3QgPSBzZXF1ZW5jZU51bWJlcnM7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY291bnRlZFRhcmdldHNUcyA9IERhdGUubm93KCk7XHJcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5udGhTZXF1ZW5jZU51bWJlcih0eG4sIHNlcXVlbmNlTnVtYmVyc1RvQ29sbGVjdCk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKHVwcGVyQm91bmQpIHtcclxuICAgICAgICAgICAgdXBwZXJCb3VuZFNlcXVlbmNlTnVtYmVyID0gdXBwZXJCb3VuZDtcclxuICAgICAgICAgICAgZm91bmRVcHBlckJvdW5kVHMgPSBEYXRlLm5vdygpO1xyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXMucmVtb3ZlVGFyZ2V0cyh0eG4sIHVwcGVyQm91bmRTZXF1ZW5jZU51bWJlciwgYWN0aXZlVGFyZ2V0SWRzKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAubmV4dChmdW5jdGlvbiAobnVtVGFyZ2V0c1JlbW92ZWQpIHtcclxuICAgICAgICAgICAgdGFyZ2V0c1JlbW92ZWQgPSBudW1UYXJnZXRzUmVtb3ZlZDtcclxuICAgICAgICAgICAgcmVtb3ZlZFRhcmdldHNUcyA9IERhdGUubm93KCk7XHJcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5yZW1vdmVPcnBoYW5lZERvY3VtZW50cyh0eG4sIHVwcGVyQm91bmRTZXF1ZW5jZU51bWJlcik7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKGRvY3VtZW50c1JlbW92ZWQpIHtcclxuICAgICAgICAgICAgcmVtb3ZlZERvY3VtZW50c1RzID0gRGF0ZS5ub3coKTtcclxuICAgICAgICAgICAgaWYgKGdldExvZ0xldmVsKCkgPD0gTG9nTGV2ZWwuREVCVUcpIHtcclxuICAgICAgICAgICAgICAgIHZhciBkZXNjID0gJ0xSVSBHYXJiYWdlIENvbGxlY3Rpb25cXG4nICtcclxuICAgICAgICAgICAgICAgICAgICAoXCJcXHRDb3VudGVkIHRhcmdldHMgaW4gXCIgKyAoY291bnRlZFRhcmdldHNUcyAtIHN0YXJ0VHMpICsgXCJtc1xcblwiKSArXHJcbiAgICAgICAgICAgICAgICAgICAgKFwiXFx0RGV0ZXJtaW5lZCBsZWFzdCByZWNlbnRseSB1c2VkIFwiICsgc2VxdWVuY2VOdW1iZXJzVG9Db2xsZWN0ICsgXCIgaW4gXCIpICtcclxuICAgICAgICAgICAgICAgICAgICAoZm91bmRVcHBlckJvdW5kVHMgLSBjb3VudGVkVGFyZ2V0c1RzICsgXCJtc1xcblwiKSArXHJcbiAgICAgICAgICAgICAgICAgICAgKFwiXFx0UmVtb3ZlZCBcIiArIHRhcmdldHNSZW1vdmVkICsgXCIgdGFyZ2V0cyBpbiBcIikgK1xyXG4gICAgICAgICAgICAgICAgICAgIChyZW1vdmVkVGFyZ2V0c1RzIC0gZm91bmRVcHBlckJvdW5kVHMgKyBcIm1zXFxuXCIpICtcclxuICAgICAgICAgICAgICAgICAgICAoXCJcXHRSZW1vdmVkIFwiICsgZG9jdW1lbnRzUmVtb3ZlZCArIFwiIGRvY3VtZW50cyBpbiBcIikgK1xyXG4gICAgICAgICAgICAgICAgICAgIChyZW1vdmVkRG9jdW1lbnRzVHMgLSByZW1vdmVkVGFyZ2V0c1RzICsgXCJtc1xcblwiKSArXHJcbiAgICAgICAgICAgICAgICAgICAgKFwiVG90YWwgRHVyYXRpb246IFwiICsgKHJlbW92ZWREb2N1bWVudHNUcyAtIHN0YXJ0VHMpICsgXCJtc1wiKTtcclxuICAgICAgICAgICAgICAgIGRlYnVnKCdMcnVHYXJiYWdlQ29sbGVjdG9yJywgZGVzYyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKHtcclxuICAgICAgICAgICAgICAgIGRpZFJ1bjogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHNlcXVlbmNlTnVtYmVyc0NvbGxlY3RlZDogc2VxdWVuY2VOdW1iZXJzVG9Db2xsZWN0LFxyXG4gICAgICAgICAgICAgICAgdGFyZ2V0c1JlbW92ZWQ6IHRhcmdldHNSZW1vdmVkLFxyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnRzUmVtb3ZlZDogZG9jdW1lbnRzUmVtb3ZlZFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gTHJ1R2FyYmFnZUNvbGxlY3RvcjtcclxufSgpKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBBIGJhc2UgY2xhc3MgcmVwcmVzZW50aW5nIGEgcGVyc2lzdGVuY2UgdHJhbnNhY3Rpb24sIGVuY2Fwc3VsYXRpbmcgYm90aCB0aGVcclxuICogdHJhbnNhY3Rpb24ncyBzZXF1ZW5jZSBudW1iZXJzIGFzIHdlbGwgYXMgYSBsaXN0IG9mIG9uQ29tbWl0dGVkIGxpc3RlbmVycy5cclxuICpcclxuICogV2hlbiB5b3UgY2FsbCBQZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbigpLCBpdCB3aWxsIGNyZWF0ZSBhIHRyYW5zYWN0aW9uIGFuZFxyXG4gKiBwYXNzIGl0IHRvIHlvdXIgY2FsbGJhY2suIFlvdSB0aGVuIHBhc3MgaXQgdG8gYW55IG1ldGhvZCB0aGF0IG9wZXJhdGVzXHJcbiAqIG9uIHBlcnNpc3RlbmNlLlxyXG4gKi9cclxudmFyIFBlcnNpc3RlbmNlVHJhbnNhY3Rpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBQZXJzaXN0ZW5jZVRyYW5zYWN0aW9uKCkge1xyXG4gICAgICAgIHRoaXMub25Db21taXR0ZWRMaXN0ZW5lcnMgPSBbXTtcclxuICAgIH1cclxuICAgIFBlcnNpc3RlbmNlVHJhbnNhY3Rpb24ucHJvdG90eXBlLmFkZE9uQ29tbWl0dGVkTGlzdGVuZXIgPSBmdW5jdGlvbiAobGlzdGVuZXIpIHtcclxuICAgICAgICB0aGlzLm9uQ29tbWl0dGVkTGlzdGVuZXJzLnB1c2gobGlzdGVuZXIpO1xyXG4gICAgfTtcclxuICAgIFBlcnNpc3RlbmNlVHJhbnNhY3Rpb24ucHJvdG90eXBlLnJhaXNlT25Db21taXR0ZWRFdmVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLm9uQ29tbWl0dGVkTGlzdGVuZXJzLmZvckVhY2goZnVuY3Rpb24gKGxpc3RlbmVyKSB7IHJldHVybiBsaXN0ZW5lcigpOyB9KTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gUGVyc2lzdGVuY2VUcmFuc2FjdGlvbjtcclxufSgpKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnZhciBMT0dfVEFHJDEgPSAnSW5kZXhlZERiUGVyc2lzdGVuY2UnO1xyXG4vKipcclxuICogT2xkZXN0IGFjY2VwdGFibGUgYWdlIGluIG1pbGxpc2Vjb25kcyBmb3IgY2xpZW50IG1ldGFkYXRhIGJlZm9yZSB0aGUgY2xpZW50XHJcbiAqIGlzIGNvbnNpZGVyZWQgaW5hY3RpdmUgYW5kIGl0cyBhc3NvY2lhdGVkIGRhdGEgaXMgZ2FyYmFnZSBjb2xsZWN0ZWQuXHJcbiAqL1xyXG52YXIgTUFYX0NMSUVOVF9BR0VfTVMgPSAzMCAqIDYwICogMTAwMDsgLy8gMzAgbWludXRlc1xyXG4vKipcclxuICogT2xkZXN0IGFjY2VwdGFibGUgbWV0YWRhdGEgYWdlIGZvciBjbGllbnRzIHRoYXQgbWF5IHBhcnRpY2lwYXRlIGluIHRoZVxyXG4gKiBwcmltYXJ5IGxlYXNlIGVsZWN0aW9uLiBDbGllbnRzIHRoYXQgaGF2ZSBub3QgdXBkYXRlZCB0aGVpciBjbGllbnQgbWV0YWRhdGFcclxuICogd2l0aGluIDUgc2Vjb25kcyBhcmUgbm90IGVsaWdpYmxlIHRvIHJlY2VpdmUgYSBwcmltYXJ5IGxlYXNlLlxyXG4gKi9cclxudmFyIE1BWF9QUklNQVJZX0VMSUdJQkxFX0FHRV9NUyA9IDUwMDA7XHJcbi8qKlxyXG4gKiBUaGUgaW50ZXJ2YWwgYXQgd2hpY2ggY2xpZW50cyB3aWxsIHVwZGF0ZSB0aGVpciBtZXRhZGF0YSwgaW5jbHVkaW5nXHJcbiAqIHJlZnJlc2hpbmcgdGhlaXIgcHJpbWFyeSBsZWFzZSBpZiBoZWxkIG9yIHBvdGVudGlhbGx5IHRyeWluZyB0byBhY3F1aXJlIGl0IGlmXHJcbiAqIG5vdCBoZWxkLlxyXG4gKlxyXG4gKiBQcmltYXJ5IGNsaWVudHMgbWF5IG9wcG9ydHVuaXN0aWNhbGx5IHJlZnJlc2ggdGhlaXIgbWV0YWRhdGEgZWFybGllclxyXG4gKiBpZiB0aGV5J3JlIGFscmVhZHkgcGVyZm9ybWluZyBhbiBJbmRleGVkREIgb3BlcmF0aW9uLlxyXG4gKi9cclxudmFyIENMSUVOVF9NRVRBREFUQV9SRUZSRVNIX0lOVEVSVkFMX01TID0gNDAwMDtcclxuLyoqIFVzZXItZmFjaW5nIGVycm9yIHdoZW4gdGhlIHByaW1hcnkgbGVhc2UgaXMgcmVxdWlyZWQgYnV0IG5vdCBhdmFpbGFibGUuICovXHJcbnZhciBQUklNQVJZX0xFQVNFX0xPU1RfRVJST1JfTVNHID0gJ1RoZSBjdXJyZW50IHRhYiBpcyBub3QgaW4gdGhlIHJlcXVpcmVkIHN0YXRlIHRvIHBlcmZvcm0gdGhpcyBvcGVyYXRpb24uICcgK1xyXG4gICAgJ0l0IG1pZ2h0IGJlIG5lY2Vzc2FyeSB0byByZWZyZXNoIHRoZSBicm93c2VyIHRhYi4nO1xyXG52YXIgUFJJTUFSWV9MRUFTRV9FWENMVVNJVkVfRVJST1JfTVNHID0gJ0Fub3RoZXIgdGFiIGhhcyBleGNsdXNpdmUgYWNjZXNzIHRvIHRoZSBwZXJzaXN0ZW5jZSBsYXllci4gJyArXHJcbiAgICAnVG8gYWxsb3cgc2hhcmVkIGFjY2VzcywgbWFrZSBzdXJlIHRvIGludm9rZSAnICtcclxuICAgICdgZW5hYmxlUGVyc2lzdGVuY2UoKWAgd2l0aCBgc3luY2hyb25pemVUYWJzOnRydWVgIGluIGFsbCB0YWJzLic7XHJcbnZhciBVTlNVUFBPUlRFRF9QTEFURk9STV9FUlJPUl9NU0cgPSAnVGhpcyBwbGF0Zm9ybSBpcyBlaXRoZXIgbWlzc2luZycgK1xyXG4gICAgJyBJbmRleGVkREIgb3IgaXMga25vd24gdG8gaGF2ZSBhbiBpbmNvbXBsZXRlIGltcGxlbWVudGF0aW9uLiBPZmZsaW5lJyArXHJcbiAgICAnIHBlcnNpc3RlbmNlIGhhcyBiZWVuIGRpc2FibGVkLic7XHJcbi8vIFRoZSBmb3JtYXQgb2YgdGhlIExvY2FsU3RvcmFnZSBrZXkgdGhhdCBzdG9yZXMgem9tYmllZCBjbGllbnQgaXM6XHJcbi8vICAgICBmaXJlc3RvcmVfem9tYmllXzxwZXJzaXN0ZW5jZV9wcmVmaXg+XzxpbnN0YW5jZV9rZXk+XHJcbnZhciBaT01CSUVEX0NMSUVOVFNfS0VZX1BSRUZJWCA9ICdmaXJlc3RvcmVfem9tYmllJztcclxudmFyIEluZGV4ZWREYlRyYW5zYWN0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgdHNsaWIuX19leHRlbmRzKEluZGV4ZWREYlRyYW5zYWN0aW9uLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gSW5kZXhlZERiVHJhbnNhY3Rpb24oc2ltcGxlRGJUcmFuc2FjdGlvbiwgY3VycmVudFNlcXVlbmNlTnVtYmVyKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcclxuICAgICAgICBfdGhpcy5zaW1wbGVEYlRyYW5zYWN0aW9uID0gc2ltcGxlRGJUcmFuc2FjdGlvbjtcclxuICAgICAgICBfdGhpcy5jdXJyZW50U2VxdWVuY2VOdW1iZXIgPSBjdXJyZW50U2VxdWVuY2VOdW1iZXI7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIEluZGV4ZWREYlRyYW5zYWN0aW9uO1xyXG59KFBlcnNpc3RlbmNlVHJhbnNhY3Rpb24pKTtcclxuLyoqXHJcbiAqIEFuIEluZGV4ZWREQi1iYWNrZWQgaW5zdGFuY2Ugb2YgUGVyc2lzdGVuY2UuIERhdGEgaXMgc3RvcmVkIHBlcnNpc3RlbnRseVxyXG4gKiBhY3Jvc3Mgc2Vzc2lvbnMuXHJcbiAqXHJcbiAqIE9uIFdlYiBvbmx5LCB0aGUgRmlyZXN0b3JlIFNES3Mgc3VwcG9ydCBzaGFyZWQgYWNjZXNzIHRvIGl0cyBwZXJzaXN0ZW5jZVxyXG4gKiBsYXllci4gVGhpcyBhbGxvd3MgbXVsdGlwbGUgYnJvd3NlciB0YWJzIHRvIHJlYWQgYW5kIHdyaXRlIHRvIEluZGV4ZWREYiBhbmRcclxuICogdG8gc3luY2hyb25pemUgc3RhdGUgZXZlbiB3aXRob3V0IG5ldHdvcmsgY29ubmVjdGl2aXR5LiBTaGFyZWQgYWNjZXNzIGlzXHJcbiAqIGN1cnJlbnRseSBvcHRpb25hbCBhbmQgbm90IGVuYWJsZWQgdW5sZXNzIGFsbCBjbGllbnRzIGludm9rZVxyXG4gKiBgZW5hYmxlUGVyc2lzdGVuY2UoKWAgd2l0aCBge3N5bmNocm9uaXplVGFiczp0cnVlfWAuXHJcbiAqXHJcbiAqIEluIG11bHRpLXRhYiBtb2RlLCBpZiBtdWx0aXBsZSBjbGllbnRzIGFyZSBhY3RpdmUgYXQgdGhlIHNhbWUgdGltZSwgdGhlIFNES1xyXG4gKiB3aWxsIGRlc2lnbmF0ZSBvbmUgY2xpZW50IGFzIHRoZSDigJxwcmltYXJ5IGNsaWVudOKAnS4gQW4gZWZmb3J0IGlzIG1hZGUgdG8gcGlja1xyXG4gKiBhIHZpc2libGUsIG5ldHdvcmstY29ubmVjdGVkIGFuZCBhY3RpdmUgY2xpZW50LCBhbmQgdGhpcyBjbGllbnQgaXNcclxuICogcmVzcG9uc2libGUgZm9yIGxldHRpbmcgb3RoZXIgY2xpZW50cyBrbm93IGFib3V0IGl0cyBwcmVzZW5jZS4gVGhlIHByaW1hcnlcclxuICogY2xpZW50IHdyaXRlcyBhIHVuaXF1ZSBjbGllbnQtZ2VuZXJhdGVkIGlkZW50aWZpZXIgKHRoZSBjbGllbnQgSUQpIHRvXHJcbiAqIEluZGV4ZWREYuKAmXMg4oCcb3duZXLigJ0gc3RvcmUgZXZlcnkgNCBzZWNvbmRzLiBJZiB0aGUgcHJpbWFyeSBjbGllbnQgZmFpbHMgdG9cclxuICogdXBkYXRlIHRoaXMgZW50cnksIGFub3RoZXIgY2xpZW50IGNhbiBhY3F1aXJlIHRoZSBsZWFzZSBhbmQgdGFrZSBvdmVyIGFzXHJcbiAqIHByaW1hcnkuXHJcbiAqXHJcbiAqIFNvbWUgcGVyc2lzdGVuY2Ugb3BlcmF0aW9ucyBpbiB0aGUgU0RLIGFyZSBkZXNpZ25hdGVkIGFzIHByaW1hcnktY2xpZW50IG9ubHlcclxuICogb3BlcmF0aW9ucy4gVGhpcyBpbmNsdWRlcyB0aGUgYWNrbm93bGVkZ21lbnQgb2YgbXV0YXRpb25zIGFuZCBhbGwgdXBkYXRlcyBvZlxyXG4gKiByZW1vdGUgZG9jdW1lbnRzLiBUaGUgZWZmZWN0cyBvZiB0aGVzZSBvcGVyYXRpb25zIGFyZSB3cml0dGVuIHRvIHBlcnNpc3RlbmNlXHJcbiAqIGFuZCB0aGVuIGJyb2FkY2FzdCB0byBvdGhlciB0YWJzIHZpYSBMb2NhbFN0b3JhZ2UgKHNlZVxyXG4gKiBgV2ViU3RvcmFnZVNoYXJlZENsaWVudFN0YXRlYCksIHdoaWNoIHRoZW4gcmVmcmVzaCB0aGVpciBzdGF0ZSBmcm9tXHJcbiAqIHBlcnNpc3RlbmNlLlxyXG4gKlxyXG4gKiBTaW1pbGFybHksIHRoZSBwcmltYXJ5IGNsaWVudCBsaXN0ZW5zIHRvIG5vdGlmaWNhdGlvbnMgc2VudCBieSBzZWNvbmRhcnlcclxuICogY2xpZW50cyB0byBkaXNjb3ZlciBwZXJzaXN0ZW5jZSBjaGFuZ2VzIHdyaXR0ZW4gYnkgc2Vjb25kYXJ5IGNsaWVudHMsIHN1Y2ggYXNcclxuICogdGhlIGFkZGl0aW9uIG9mIG5ldyBtdXRhdGlvbnMgYW5kIHF1ZXJ5IHRhcmdldHMuXHJcbiAqXHJcbiAqIElmIG11bHRpLXRhYiBpcyBub3QgZW5hYmxlZCBhbmQgYW5vdGhlciB0YWIgYWxyZWFkeSBvYnRhaW5lZCB0aGUgcHJpbWFyeVxyXG4gKiBsZWFzZSwgSW5kZXhlZERiUGVyc2lzdGVuY2UgZW50ZXJzIGEgZmFpbGVkIHN0YXRlIGFuZCBhbGwgc3Vic2VxdWVudFxyXG4gKiBvcGVyYXRpb25zIHdpbGwgYXV0b21hdGljYWxseSBmYWlsLlxyXG4gKlxyXG4gKiBBZGRpdGlvbmFsbHksIHRoZXJlIGlzIGFuIG9wdGltaXphdGlvbiBzbyB0aGF0IHdoZW4gYSB0YWIgaXMgY2xvc2VkLCB0aGVcclxuICogcHJpbWFyeSBsZWFzZSBpcyByZWxlYXNlZCBpbW1lZGlhdGVseSAodGhpcyBpcyBlc3BlY2lhbGx5IGltcG9ydGFudCB0byBtYWtlXHJcbiAqIHN1cmUgdGhhdCBhIHJlZnJlc2hlZCB0YWIgaXMgYWJsZSB0byBpbW1lZGlhdGVseSByZS1hY3F1aXJlIHRoZSBwcmltYXJ5XHJcbiAqIGxlYXNlKS4gVW5mb3J0dW5hdGVseSwgSW5kZXhlZERCIGNhbm5vdCBiZSByZWxpYWJseSB1c2VkIGluIHdpbmRvdy51bmxvYWRcclxuICogc2luY2UgaXQgaXMgYW4gYXN5bmNocm9ub3VzIEFQSS4gU28gaW4gYWRkaXRpb24gdG8gYXR0ZW1wdGluZyB0byBnaXZlIHVwIHRoZVxyXG4gKiBsZWFzZSwgdGhlIGxlYXNlaG9sZGVyIHdyaXRlcyBpdHMgY2xpZW50IElEIHRvIGEgXCJ6b21iaWVkQ2xpZW50XCIgZW50cnkgaW5cclxuICogTG9jYWxTdG9yYWdlIHdoaWNoIGFjdHMgYXMgYW4gaW5kaWNhdG9yIHRoYXQgYW5vdGhlciB0YWIgc2hvdWxkIGdvIGFoZWFkIGFuZFxyXG4gKiB0YWtlIHRoZSBwcmltYXJ5IGxlYXNlIGltbWVkaWF0ZWx5IHJlZ2FyZGxlc3Mgb2YgdGhlIGN1cnJlbnQgbGVhc2UgdGltZXN0YW1wLlxyXG4gKlxyXG4gKiBUT0RPKGIvMTE0MjI2MjM0KTogUmVtb3ZlIGBzeW5jaHJvbml6ZVRhYnNgIHNlY3Rpb24gd2hlbiBtdWx0aS10YWIgaXMgbm9cclxuICogbG9uZ2VyIG9wdGlvbmFsLlxyXG4gKi9cclxudmFyIEluZGV4ZWREYlBlcnNpc3RlbmNlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gSW5kZXhlZERiUGVyc2lzdGVuY2UoYWxsb3dUYWJTeW5jaHJvbml6YXRpb24sIHBlcnNpc3RlbmNlS2V5LCBjbGllbnRJZCwgcGxhdGZvcm0sIGxydVBhcmFtcywgcXVldWUsIHNlcmlhbGl6ZXIsIHNlcXVlbmNlTnVtYmVyU3luY2VyKSB7XHJcbiAgICAgICAgdGhpcy5hbGxvd1RhYlN5bmNocm9uaXphdGlvbiA9IGFsbG93VGFiU3luY2hyb25pemF0aW9uO1xyXG4gICAgICAgIHRoaXMucGVyc2lzdGVuY2VLZXkgPSBwZXJzaXN0ZW5jZUtleTtcclxuICAgICAgICB0aGlzLmNsaWVudElkID0gY2xpZW50SWQ7XHJcbiAgICAgICAgdGhpcy5xdWV1ZSA9IHF1ZXVlO1xyXG4gICAgICAgIHRoaXMuc2VxdWVuY2VOdW1iZXJTeW5jZXIgPSBzZXF1ZW5jZU51bWJlclN5bmNlcjtcclxuICAgICAgICB0aGlzLl9zdGFydGVkID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5pc1ByaW1hcnkgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLm5ldHdvcmtFbmFibGVkID0gdHJ1ZTtcclxuICAgICAgICAvKiogT3VyIHdpbmRvdy51bmxvYWQgaGFuZGxlciwgaWYgcmVnaXN0ZXJlZC4gKi9cclxuICAgICAgICB0aGlzLndpbmRvd1VubG9hZEhhbmRsZXIgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuaW5Gb3JlZ3JvdW5kID0gZmFsc2U7XHJcbiAgICAgICAgLyoqIE91ciAndmlzaWJpbGl0eWNoYW5nZScgbGlzdGVuZXIgaWYgcmVnaXN0ZXJlZC4gKi9cclxuICAgICAgICB0aGlzLmRvY3VtZW50VmlzaWJpbGl0eUhhbmRsZXIgPSBudWxsO1xyXG4gICAgICAgIC8qKiBUaGUgY2xpZW50IG1ldGFkYXRhIHJlZnJlc2ggdGFzay4gKi9cclxuICAgICAgICB0aGlzLmNsaWVudE1ldGFkYXRhUmVmcmVzaGVyID0gbnVsbDtcclxuICAgICAgICAvKiogVGhlIGxhc3QgdGltZSB3ZSBnYXJiYWdlIGNvbGxlY3RlZCB0aGUgY2xpZW50IG1ldGFkYXRhIG9iamVjdCBzdG9yZS4gKi9cclxuICAgICAgICB0aGlzLmxhc3RHYXJiYWdlQ29sbGVjdGlvblRpbWUgPSBOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFk7XHJcbiAgICAgICAgLyoqIEEgbGlzdGVuZXIgdG8gbm90aWZ5IG9uIHByaW1hcnkgc3RhdGUgY2hhbmdlcy4gKi9cclxuICAgICAgICB0aGlzLnByaW1hcnlTdGF0ZUxpc3RlbmVyID0gZnVuY3Rpb24gKF8pIHsgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpOyB9O1xyXG4gICAgICAgIHRoaXMucmVmZXJlbmNlRGVsZWdhdGUgPSBuZXcgSW5kZXhlZERiTHJ1RGVsZWdhdGUodGhpcywgbHJ1UGFyYW1zKTtcclxuICAgICAgICB0aGlzLmRiTmFtZSA9IHBlcnNpc3RlbmNlS2V5ICsgSW5kZXhlZERiUGVyc2lzdGVuY2UuTUFJTl9EQVRBQkFTRTtcclxuICAgICAgICB0aGlzLnNlcmlhbGl6ZXIgPSBuZXcgTG9jYWxTZXJpYWxpemVyKHNlcmlhbGl6ZXIpO1xyXG4gICAgICAgIHRoaXMuZG9jdW1lbnQgPSBwbGF0Zm9ybS5kb2N1bWVudDtcclxuICAgICAgICB0aGlzLnRhcmdldENhY2hlID0gbmV3IEluZGV4ZWREYlRhcmdldENhY2hlKHRoaXMucmVmZXJlbmNlRGVsZWdhdGUsIHRoaXMuc2VyaWFsaXplcik7XHJcbiAgICAgICAgdGhpcy5pbmRleE1hbmFnZXIgPSBuZXcgSW5kZXhlZERiSW5kZXhNYW5hZ2VyKCk7XHJcbiAgICAgICAgdGhpcy5yZW1vdGVEb2N1bWVudENhY2hlID0gbmV3IEluZGV4ZWREYlJlbW90ZURvY3VtZW50Q2FjaGUodGhpcy5zZXJpYWxpemVyLCB0aGlzLmluZGV4TWFuYWdlcik7XHJcbiAgICAgICAgaWYgKHBsYXRmb3JtLndpbmRvdyAmJiBwbGF0Zm9ybS53aW5kb3cubG9jYWxTdG9yYWdlKSB7XHJcbiAgICAgICAgICAgIHRoaXMud2luZG93ID0gcGxhdGZvcm0ud2luZG93O1xyXG4gICAgICAgICAgICB0aGlzLndlYlN0b3JhZ2UgPSB0aGlzLndpbmRvdy5sb2NhbFN0b3JhZ2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5VTklNUExFTUVOVEVELCAnSW5kZXhlZERCIHBlcnNpc3RlbmNlIGlzIG9ubHkgYXZhaWxhYmxlIG9uIHBsYXRmb3JtcyB0aGF0IHN1cHBvcnQgTG9jYWxTdG9yYWdlLicpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIEluZGV4ZWREYlBlcnNpc3RlbmNlLmdldFN0b3JlID0gZnVuY3Rpb24gKHR4biwgc3RvcmUpIHtcclxuICAgICAgICBpZiAodHhuIGluc3RhbmNlb2YgSW5kZXhlZERiVHJhbnNhY3Rpb24pIHtcclxuICAgICAgICAgICAgcmV0dXJuIFNpbXBsZURiLmdldFN0b3JlKHR4bi5zaW1wbGVEYlRyYW5zYWN0aW9uLCBzdG9yZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aHJvdyBmYWlsKCdJbmRleGVkRGJQZXJzaXN0ZW5jZSBtdXN0IHVzZSBpbnN0YW5jZXMgb2YgSW5kZXhlZERiVHJhbnNhY3Rpb24nKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgSW5kZXhlZERiUGVyc2lzdGVuY2UuY3JlYXRlSW5kZXhlZERiUGVyc2lzdGVuY2UgPSBmdW5jdGlvbiAob3B0aW9ucykge1xyXG4gICAgICAgIHJldHVybiB0c2xpYi5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHBlcnNpc3RlbmNlO1xyXG4gICAgICAgICAgICByZXR1cm4gdHNsaWIuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIUluZGV4ZWREYlBlcnNpc3RlbmNlLmlzQXZhaWxhYmxlKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLlVOSU1QTEVNRU5URUQsIFVOU1VQUE9SVEVEX1BMQVRGT1JNX0VSUk9SX01TRyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgcGVyc2lzdGVuY2UgPSBuZXcgSW5kZXhlZERiUGVyc2lzdGVuY2Uob3B0aW9ucy5hbGxvd1RhYlN5bmNocm9uaXphdGlvbiwgb3B0aW9ucy5wZXJzaXN0ZW5jZUtleSwgb3B0aW9ucy5jbGllbnRJZCwgb3B0aW9ucy5wbGF0Zm9ybSwgb3B0aW9ucy5scnVQYXJhbXMsIG9wdGlvbnMucXVldWUsIG9wdGlvbnMuc2VyaWFsaXplciwgb3B0aW9ucy5zZXF1ZW5jZU51bWJlclN5bmNlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHBlcnNpc3RlbmNlLnN0YXJ0KCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgcGVyc2lzdGVuY2VdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEF0dGVtcHQgdG8gc3RhcnQgSW5kZXhlZERiIHBlcnNpc3RlbmNlLlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm4ge1Byb21pc2U8dm9pZD59IFdoZXRoZXIgcGVyc2lzdGVuY2Ugd2FzIGVuYWJsZWQuXHJcbiAgICAgKi9cclxuICAgIEluZGV4ZWREYlBlcnNpc3RlbmNlLnByb3RvdHlwZS5zdGFydCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIGFzc2VydCghdGhpcy5zdGFydGVkLCAnSW5kZXhlZERiUGVyc2lzdGVuY2UgZG91YmxlLXN0YXJ0ZWQhJyk7XHJcbiAgICAgICAgYXNzZXJ0KHRoaXMud2luZG93ICE9PSBudWxsLCBcIkV4cGVjdGVkICd3aW5kb3cnIHRvIGJlIGRlZmluZWRcIik7XHJcbiAgICAgICAgcmV0dXJuIFNpbXBsZURiLm9wZW5PckNyZWF0ZSh0aGlzLmRiTmFtZSwgU0NIRU1BX1ZFUlNJT04sIG5ldyBTY2hlbWFDb252ZXJ0ZXIodGhpcy5zZXJpYWxpemVyKSlcclxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKGRiKSB7XHJcbiAgICAgICAgICAgIF90aGlzLnNpbXBsZURiID0gZGI7XHJcbiAgICAgICAgICAgIC8vIE5PVEU6IFRoaXMgaXMgZXhwZWN0ZWQgdG8gZmFpbCBzb21ldGltZXMgKGluIHRoZSBjYXNlIG9mIGFub3RoZXIgdGFiIGFscmVhZHlcclxuICAgICAgICAgICAgLy8gaGF2aW5nIHRoZSBwZXJzaXN0ZW5jZSBsb2NrKSwgc28gaXQncyB0aGUgZmlyc3QgdGhpbmcgd2Ugc2hvdWxkIGRvLlxyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXMudXBkYXRlQ2xpZW50TWV0YWRhdGFBbmRUcnlCZWNvbWVQcmltYXJ5KCk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBfdGhpcy5hdHRhY2hWaXNpYmlsaXR5SGFuZGxlcigpO1xyXG4gICAgICAgICAgICBfdGhpcy5hdHRhY2hXaW5kb3dVbmxvYWRIb29rKCk7XHJcbiAgICAgICAgICAgIF90aGlzLnNjaGVkdWxlQ2xpZW50TWV0YWRhdGFBbmRQcmltYXJ5TGVhc2VSZWZyZXNoZXMoKTtcclxuICAgICAgICAgICAgcmV0dXJuIF90aGlzLnNpbXBsZURiLnJ1blRyYW5zYWN0aW9uKCdyZWFkb25seS1pZGVtcG90ZW50JywgW0RiVGFyZ2V0R2xvYmFsLnN0b3JlXSwgZnVuY3Rpb24gKHR4bikgeyByZXR1cm4gZ2V0SGlnaGVzdExpc3RlblNlcXVlbmNlTnVtYmVyKHR4bik7IH0pO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChoaWdoZXN0TGlzdGVuU2VxdWVuY2VOdW1iZXIpIHtcclxuICAgICAgICAgICAgX3RoaXMubGlzdGVuU2VxdWVuY2UgPSBuZXcgTGlzdGVuU2VxdWVuY2UoaGlnaGVzdExpc3RlblNlcXVlbmNlTnVtYmVyLCBfdGhpcy5zZXF1ZW5jZU51bWJlclN5bmNlcik7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBfdGhpcy5fc3RhcnRlZCA9IHRydWU7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uIChyZWFzb24pIHtcclxuICAgICAgICAgICAgX3RoaXMuc2ltcGxlRGIgJiYgX3RoaXMuc2ltcGxlRGIuY2xvc2UoKTtcclxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KHJlYXNvbik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgSW5kZXhlZERiUGVyc2lzdGVuY2UucHJvdG90eXBlLnNldFByaW1hcnlTdGF0ZUxpc3RlbmVyID0gZnVuY3Rpb24gKHByaW1hcnlTdGF0ZUxpc3RlbmVyKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB0aGlzLnByaW1hcnlTdGF0ZUxpc3RlbmVyID0gZnVuY3Rpb24gKHByaW1hcnlTdGF0ZSkgeyByZXR1cm4gdHNsaWIuX19hd2FpdGVyKF90aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHNsaWIuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zdGFydGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHByaW1hcnlTdGF0ZUxpc3RlbmVyKHByaW1hcnlTdGF0ZSldO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTsgfTtcclxuICAgICAgICByZXR1cm4gcHJpbWFyeVN0YXRlTGlzdGVuZXIodGhpcy5pc1ByaW1hcnkpO1xyXG4gICAgfTtcclxuICAgIEluZGV4ZWREYlBlcnNpc3RlbmNlLnByb3RvdHlwZS5zZXREYXRhYmFzZURlbGV0ZWRMaXN0ZW5lciA9IGZ1bmN0aW9uIChkYXRhYmFzZURlbGV0ZWRMaXN0ZW5lcikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5zaW1wbGVEYi5zZXRWZXJzaW9uQ2hhbmdlTGlzdGVuZXIoZnVuY3Rpb24gKGV2ZW50KSB7IHJldHVybiB0c2xpYi5fX2F3YWl0ZXIoX3RoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYi5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKGV2ZW50Lm5ld1ZlcnNpb24gPT09IG51bGwpKSByZXR1cm4gWzMgLypicmVhayovLCAyXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgZGF0YWJhc2VEZWxldGVkTGlzdGVuZXIoKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLmxhYmVsID0gMjtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6IHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7IH0pO1xyXG4gICAgfTtcclxuICAgIEluZGV4ZWREYlBlcnNpc3RlbmNlLnByb3RvdHlwZS5zZXROZXR3b3JrRW5hYmxlZCA9IGZ1bmN0aW9uIChuZXR3b3JrRW5hYmxlZCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgaWYgKHRoaXMubmV0d29ya0VuYWJsZWQgIT09IG5ldHdvcmtFbmFibGVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMubmV0d29ya0VuYWJsZWQgPSBuZXR3b3JrRW5hYmxlZDtcclxuICAgICAgICAgICAgLy8gU2NoZWR1bGUgYSBwcmltYXJ5IGxlYXNlIHJlZnJlc2ggZm9yIGltbWVkaWF0ZSBleGVjdXRpb24uIFRoZSBldmVudHVhbFxyXG4gICAgICAgICAgICAvLyBsZWFzZSB1cGRhdGUgd2lsbCBiZSBwcm9wYWdhdGVkIHZpYSBgcHJpbWFyeVN0YXRlTGlzdGVuZXJgLlxyXG4gICAgICAgICAgICB0aGlzLnF1ZXVlLmVucXVldWVBbmRGb3JnZXQoZnVuY3Rpb24gKCkgeyByZXR1cm4gdHNsaWIuX19hd2FpdGVyKF90aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRzbGliLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLnN0YXJ0ZWQpIHJldHVybiBbMyAvKmJyZWFrKi8sIDJdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy51cGRhdGVDbGllbnRNZXRhZGF0YUFuZFRyeUJlY29tZVByaW1hcnkoKV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9hLmxhYmVsID0gMjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOiByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pOyB9KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBVcGRhdGVzIHRoZSBjbGllbnQgbWV0YWRhdGEgaW4gSW5kZXhlZERiIGFuZCBhdHRlbXB0cyB0byBlaXRoZXIgb2J0YWluIG9yXHJcbiAgICAgKiBleHRlbmQgdGhlIHByaW1hcnkgbGVhc2UgZm9yIHRoZSBsb2NhbCBjbGllbnQuIEFzeW5jaHJvbm91c2x5IG5vdGlmaWVzIHRoZVxyXG4gICAgICogcHJpbWFyeSBzdGF0ZSBsaXN0ZW5lciBpZiB0aGUgY2xpZW50IGVpdGhlciBuZXdseSBvYnRhaW5lZCBvciByZWxlYXNlZCBpdHNcclxuICAgICAqIHByaW1hcnkgbGVhc2UuXHJcbiAgICAgKi9cclxuICAgIEluZGV4ZWREYlBlcnNpc3RlbmNlLnByb3RvdHlwZS51cGRhdGVDbGllbnRNZXRhZGF0YUFuZFRyeUJlY29tZVByaW1hcnkgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICByZXR1cm4gdGhpcy5zaW1wbGVEYlxyXG4gICAgICAgICAgICAucnVuVHJhbnNhY3Rpb24oJ3JlYWR3cml0ZS1pZGVtcG90ZW50JywgQUxMX1NUT1JFUywgZnVuY3Rpb24gKHR4bikge1xyXG4gICAgICAgICAgICB2YXIgbWV0YWRhdGFTdG9yZSA9IGNsaWVudE1ldGFkYXRhU3RvcmUodHhuKTtcclxuICAgICAgICAgICAgcmV0dXJuIG1ldGFkYXRhU3RvcmVcclxuICAgICAgICAgICAgICAgIC5wdXQobmV3IERiQ2xpZW50TWV0YWRhdGEoX3RoaXMuY2xpZW50SWQsIERhdGUubm93KCksIF90aGlzLm5ldHdvcmtFbmFibGVkLCBfdGhpcy5pbkZvcmVncm91bmQpKVxyXG4gICAgICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKF90aGlzLmlzUHJpbWFyeSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy52ZXJpZnlQcmltYXJ5TGVhc2UodHhuKS5uZXh0KGZ1bmN0aW9uIChzdWNjZXNzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuaXNQcmltYXJ5ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5xdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMucHJpbWFyeVN0YXRlTGlzdGVuZXIoZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLmNhbkFjdEFzUHJpbWFyeSh0eG4pOyB9KVxyXG4gICAgICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKGNhbkFjdEFzUHJpbWFyeSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKF90aGlzLmlzUHJpbWFyeSAmJiAhY2FuQWN0QXNQcmltYXJ5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLnJlbGVhc2VQcmltYXJ5TGVhc2VJZkhlbGQodHhuKS5uZXh0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIGZhbHNlOyB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGNhbkFjdEFzUHJpbWFyeSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5hY3F1aXJlT3JFeHRlbmRQcmltYXJ5TGVhc2UodHhuKS5uZXh0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRydWU7IH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC8qIGNhbkFjdEFzUHJpbWFyeT0gKi8gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICBpZiAoIV90aGlzLmFsbG93VGFiU3luY2hyb25pemF0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGRlYnVnKExPR19UQUckMSwgJ1JlbGVhc2luZyBvd25lciBsZWFzZSBhZnRlciBlcnJvciBkdXJpbmcgbGVhc2UgcmVmcmVzaCcsIGUpO1xyXG4gICAgICAgICAgICByZXR1cm4gLyogaXNQcmltYXJ5PSAqLyBmYWxzZTtcclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoaXNQcmltYXJ5KSB7XHJcbiAgICAgICAgICAgIGlmIChfdGhpcy5pc1ByaW1hcnkgIT09IGlzUHJpbWFyeSkge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMucXVldWUuZW5xdWV1ZUFuZEZvcmdldChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLnByaW1hcnlTdGF0ZUxpc3RlbmVyKGlzUHJpbWFyeSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBfdGhpcy5pc1ByaW1hcnkgPSBpc1ByaW1hcnk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgSW5kZXhlZERiUGVyc2lzdGVuY2UucHJvdG90eXBlLnZlcmlmeVByaW1hcnlMZWFzZSA9IGZ1bmN0aW9uICh0eG4pIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhciBzdG9yZSA9IHByaW1hcnlDbGllbnRTdG9yZSh0eG4pO1xyXG4gICAgICAgIHJldHVybiBzdG9yZS5nZXQoRGJQcmltYXJ5Q2xpZW50LmtleSkubmV4dChmdW5jdGlvbiAocHJpbWFyeUNsaWVudCkge1xyXG4gICAgICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoX3RoaXMuaXNMb2NhbENsaWVudChwcmltYXJ5Q2xpZW50KSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgSW5kZXhlZERiUGVyc2lzdGVuY2UucHJvdG90eXBlLnJlbW92ZUNsaWVudE1ldGFkYXRhID0gZnVuY3Rpb24gKHR4bikge1xyXG4gICAgICAgIHZhciBtZXRhZGF0YVN0b3JlID0gY2xpZW50TWV0YWRhdGFTdG9yZSh0eG4pO1xyXG4gICAgICAgIHJldHVybiBtZXRhZGF0YVN0b3JlLmRlbGV0ZSh0aGlzLmNsaWVudElkKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIElmIHRoZSBnYXJiYWdlIGNvbGxlY3Rpb24gdGhyZXNob2xkIGhhcyBwYXNzZWQsIHBydW5lcyB0aGVcclxuICAgICAqIFJlbW90ZURvY3VtZW50Q2hhbmdlcyBhbmQgdGhlIENsaWVudE1ldGFkYXRhIHN0b3JlIGJhc2VkIG9uIHRoZSBsYXN0IHVwZGF0ZVxyXG4gICAgICogdGltZSBvZiBhbGwgY2xpZW50cy5cclxuICAgICAqL1xyXG4gICAgSW5kZXhlZERiUGVyc2lzdGVuY2UucHJvdG90eXBlLm1heWJlR2FyYmFnZUNvbGxlY3RNdWx0aUNsaWVudFN0YXRlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0c2xpYi5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGluYWN0aXZlQ2xpZW50cztcclxuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEodGhpcy5pc1ByaW1hcnkgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICF0aGlzLmlzV2l0aGluQWdlKHRoaXMubGFzdEdhcmJhZ2VDb2xsZWN0aW9uVGltZSwgTUFYX0NMSUVOVF9BR0VfTVMpKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgMl07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubGFzdEdhcmJhZ2VDb2xsZWN0aW9uVGltZSA9IERhdGUubm93KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMucnVuVHJhbnNhY3Rpb24oJ21heWJlR2FyYmFnZUNvbGxlY3RNdWx0aUNsaWVudFN0YXRlJywgJ3JlYWR3cml0ZS1wcmltYXJ5LWlkZW1wb3RlbnQnLCBmdW5jdGlvbiAodHhuKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1ldGFkYXRhU3RvcmUgPSBJbmRleGVkRGJQZXJzaXN0ZW5jZS5nZXRTdG9yZSh0eG4sIERiQ2xpZW50TWV0YWRhdGEuc3RvcmUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBtZXRhZGF0YVN0b3JlLmxvYWRBbGwoKS5uZXh0KGZ1bmN0aW9uIChleGlzdGluZ0NsaWVudHMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFjdGl2ZSA9IF90aGlzLmZpbHRlckFjdGl2ZUNsaWVudHMoZXhpc3RpbmdDbGllbnRzLCBNQVhfQ0xJRU5UX0FHRV9NUyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbmFjdGl2ZSA9IGV4aXN0aW5nQ2xpZW50cy5maWx0ZXIoZnVuY3Rpb24gKGNsaWVudCkgeyByZXR1cm4gYWN0aXZlLmluZGV4T2YoY2xpZW50KSA9PT0gLTE7IH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBEZWxldGUgbWV0YWRhdGEgZm9yIGNsaWVudHMgdGhhdCBhcmUgbm8gbG9uZ2VyIGNvbnNpZGVyZWQgYWN0aXZlLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLmZvckVhY2goaW5hY3RpdmUsIGZ1bmN0aW9uIChpbmFjdGl2ZUNsaWVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1ldGFkYXRhU3RvcmUuZGVsZXRlKGluYWN0aXZlQ2xpZW50LmNsaWVudElkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkubmV4dChmdW5jdGlvbiAoKSB7IHJldHVybiBpbmFjdGl2ZTsgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmFjdGl2ZUNsaWVudHMgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIERlbGV0ZSBwb3RlbnRpYWwgbGVmdG92ZXIgZW50cmllcyB0aGF0IG1heSBjb250aW51ZSB0byBtYXJrIHRoZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBpbmFjdGl2ZSBjbGllbnRzIGFzIHpvbWJpZWQgaW4gTG9jYWxTdG9yYWdlLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBJZGVhbGx5IHdlJ2QgZGVsZXRlIHRoZSBJbmRleGVkRGIgYW5kIExvY2FsU3RvcmFnZSB6b21iaWUgZW50cmllcyBmb3JcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIGNsaWVudCBhdG9taWNhbGx5LCBidXQgd2UgY2FuJ3QuIFNvIHdlIG9wdCB0byBkZWxldGUgdGhlIEluZGV4ZWREYlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBlbnRyaWVzIGZpcnN0IHRvIGF2b2lkIHBvdGVudGlhbGx5IHJldml2aW5nIGEgem9tYmllZCBjbGllbnQuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGluYWN0aXZlQ2xpZW50cy5mb3JFYWNoKGZ1bmN0aW9uIChpbmFjdGl2ZUNsaWVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMud2luZG93LmxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKF90aGlzLnpvbWJpZWRDbGllbnRMb2NhbFN0b3JhZ2VLZXkoaW5hY3RpdmVDbGllbnQuY2xpZW50SWQpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLmxhYmVsID0gMjtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6IHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBTY2hlZHVsZXMgYSByZWN1cnJpbmcgdGltZXIgdG8gdXBkYXRlIHRoZSBjbGllbnQgbWV0YWRhdGEgYW5kIHRvIGVpdGhlclxyXG4gICAgICogZXh0ZW5kIG9yIGFjcXVpcmUgdGhlIHByaW1hcnkgbGVhc2UgaWYgdGhlIGNsaWVudCBpcyBlbGlnaWJsZS5cclxuICAgICAqL1xyXG4gICAgSW5kZXhlZERiUGVyc2lzdGVuY2UucHJvdG90eXBlLnNjaGVkdWxlQ2xpZW50TWV0YWRhdGFBbmRQcmltYXJ5TGVhc2VSZWZyZXNoZXMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB0aGlzLmNsaWVudE1ldGFkYXRhUmVmcmVzaGVyID0gdGhpcy5xdWV1ZS5lbnF1ZXVlQWZ0ZXJEZWxheShUaW1lcklkLkNsaWVudE1ldGFkYXRhUmVmcmVzaCwgQ0xJRU5UX01FVEFEQVRBX1JFRlJFU0hfSU5URVJWQUxfTVMsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIF90aGlzLnVwZGF0ZUNsaWVudE1ldGFkYXRhQW5kVHJ5QmVjb21lUHJpbWFyeSgpXHJcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5tYXliZUdhcmJhZ2VDb2xsZWN0TXVsdGlDbGllbnRTdGF0ZSgpOyB9KVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMuc2NoZWR1bGVDbGllbnRNZXRhZGF0YUFuZFByaW1hcnlMZWFzZVJlZnJlc2hlcygpOyB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKiogQ2hlY2tzIHdoZXRoZXIgYGNsaWVudGAgaXMgdGhlIGxvY2FsIGNsaWVudC4gKi9cclxuICAgIEluZGV4ZWREYlBlcnNpc3RlbmNlLnByb3RvdHlwZS5pc0xvY2FsQ2xpZW50ID0gZnVuY3Rpb24gKGNsaWVudCkge1xyXG4gICAgICAgIHJldHVybiBjbGllbnQgPyBjbGllbnQub3duZXJJZCA9PT0gdGhpcy5jbGllbnRJZCA6IGZhbHNlO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogRXZhbHVhdGUgdGhlIHN0YXRlIG9mIGFsbCBhY3RpdmUgY2xpZW50cyBhbmQgZGV0ZXJtaW5lIHdoZXRoZXIgdGhlIGxvY2FsXHJcbiAgICAgKiBjbGllbnQgaXMgb3IgY2FuIGFjdCBhcyB0aGUgaG9sZGVyIG9mIHRoZSBwcmltYXJ5IGxlYXNlLiBSZXR1cm5zIHdoZXRoZXJcclxuICAgICAqIHRoZSBjbGllbnQgaXMgZWxpZ2libGUgZm9yIHRoZSBsZWFzZSwgYnV0IGRvZXMgbm90IGFjdHVhbGx5IGFjcXVpcmUgaXQuXHJcbiAgICAgKiBNYXkgcmV0dXJuICdmYWxzZScgZXZlbiBpZiB0aGVyZSBpcyBubyBhY3RpdmUgbGVhc2Vob2xkZXIgYW5kIGFub3RoZXJcclxuICAgICAqIChmb3JlZ3JvdW5kKSBjbGllbnQgc2hvdWxkIGJlY29tZSBsZWFzZWhvbGRlciBpbnN0ZWFkLlxyXG4gICAgICovXHJcbiAgICBJbmRleGVkRGJQZXJzaXN0ZW5jZS5wcm90b3R5cGUuY2FuQWN0QXNQcmltYXJ5ID0gZnVuY3Rpb24gKHR4bikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIHN0b3JlID0gcHJpbWFyeUNsaWVudFN0b3JlKHR4bik7XHJcbiAgICAgICAgcmV0dXJuIHN0b3JlXHJcbiAgICAgICAgICAgIC5nZXQoRGJQcmltYXJ5Q2xpZW50LmtleSlcclxuICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKGN1cnJlbnRQcmltYXJ5KSB7XHJcbiAgICAgICAgICAgIHZhciBjdXJyZW50TGVhc2VJc1ZhbGlkID0gY3VycmVudFByaW1hcnkgIT09IG51bGwgJiZcclxuICAgICAgICAgICAgICAgIF90aGlzLmlzV2l0aGluQWdlKGN1cnJlbnRQcmltYXJ5LmxlYXNlVGltZXN0YW1wTXMsIE1BWF9QUklNQVJZX0VMSUdJQkxFX0FHRV9NUykgJiZcclxuICAgICAgICAgICAgICAgICFfdGhpcy5pc0NsaWVudFpvbWJpZWQoY3VycmVudFByaW1hcnkub3duZXJJZCk7XHJcbiAgICAgICAgICAgIC8vIEEgY2xpZW50IGlzIGVsaWdpYmxlIGZvciB0aGUgcHJpbWFyeSBsZWFzZSBpZjpcclxuICAgICAgICAgICAgLy8gLSBpdHMgbmV0d29yayBpcyBlbmFibGVkIGFuZCB0aGUgY2xpZW50J3MgdGFiIGlzIGluIHRoZSBmb3JlZ3JvdW5kLlxyXG4gICAgICAgICAgICAvLyAtIGl0cyBuZXR3b3JrIGlzIGVuYWJsZWQgYW5kIG5vIG90aGVyIGNsaWVudCdzIHRhYiBpcyBpbiB0aGVcclxuICAgICAgICAgICAgLy8gICBmb3JlZ3JvdW5kLlxyXG4gICAgICAgICAgICAvLyAtIGV2ZXJ5IGNsaWVudHMgbmV0d29yayBpcyBkaXNhYmxlZCBhbmQgdGhlIGNsaWVudCdzIHRhYiBpcyBpbiB0aGVcclxuICAgICAgICAgICAgLy8gICBmb3JlZ3JvdW5kLlxyXG4gICAgICAgICAgICAvLyAtIGV2ZXJ5IGNsaWVudHMgbmV0d29yayBpcyBkaXNhYmxlZCBhbmQgbm8gb3RoZXIgY2xpZW50J3MgdGFiIGlzIGluXHJcbiAgICAgICAgICAgIC8vICAgdGhlIGZvcmVncm91bmQuXHJcbiAgICAgICAgICAgIGlmIChjdXJyZW50TGVhc2VJc1ZhbGlkKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoX3RoaXMuaXNMb2NhbENsaWVudChjdXJyZW50UHJpbWFyeSkgJiYgX3RoaXMubmV0d29ya0VuYWJsZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICghX3RoaXMuaXNMb2NhbENsaWVudChjdXJyZW50UHJpbWFyeSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWN1cnJlbnRQcmltYXJ5LmFsbG93VGFiU3luY2hyb25pemF0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZhaWwgdGhlIGBjYW5BY3RBc1ByaW1hcnlgIGNoZWNrIGlmIHRoZSBjdXJyZW50IGxlYXNlaG9sZGVyIGhhc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBub3Qgb3B0ZWQgaW50byBtdWx0aS10YWIgc3luY2hyb25pemF0aW9uLiBJZiB0aGlzIGhhcHBlbnMgYXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2xpZW50IHN0YXJ0dXAsIHdlIHJlamVjdCB0aGUgUHJvbWlzZSByZXR1cm5lZCBieVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBgZW5hYmxlUGVyc2lzdGVuY2UoKWAgYW5kIHRoZSB1c2VyIGNhbiBjb250aW51ZSB0byB1c2UgRmlyZXN0b3JlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdpdGggaW4tbWVtb3J5IHBlcnNpc3RlbmNlLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGlzIGZhaWxzIGR1cmluZyBhIGxlYXNlIHJlZnJlc2gsIHdlIHdpbGwgaW5zdGVhZCBibG9jayB0aGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQXN5bmNRdWV1ZSBmcm9tIGV4ZWN1dGluZyBmdXJ0aGVyIG9wZXJhdGlvbnMuIE5vdGUgdGhhdCB0aGlzIGlzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFjY2VwdGFibGUgc2luY2UgbWl4aW5nICYgbWF0Y2hpbmcgZGlmZmVyZW50IGBzeW5jaHJvbml6ZVRhYnNgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldHRpbmdzIGlzIG5vdCBzdXBwb3J0ZWQuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRPRE8oYi8xMTQyMjYyMzQpOiBSZW1vdmUgdGhpcyBjaGVjayB3aGVuIGBzeW5jaHJvbml6ZVRhYnNgIGNhblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBubyBsb25nZXIgYmUgdHVybmVkIG9mZi5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuRkFJTEVEX1BSRUNPTkRJVElPTiwgUFJJTUFSWV9MRUFTRV9FWENMVVNJVkVfRVJST1JfTVNHKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChfdGhpcy5uZXR3b3JrRW5hYmxlZCAmJiBfdGhpcy5pbkZvcmVncm91bmQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBjbGllbnRNZXRhZGF0YVN0b3JlKHR4bilcclxuICAgICAgICAgICAgICAgIC5sb2FkQWxsKClcclxuICAgICAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uIChleGlzdGluZ0NsaWVudHMpIHtcclxuICAgICAgICAgICAgICAgIC8vIFByb2Nlc3MgYWxsIGV4aXN0aW5nIGNsaWVudHMgYW5kIGRldGVybWluZSB3aGV0aGVyIGF0IGxlYXN0IG9uZSBvZlxyXG4gICAgICAgICAgICAgICAgLy8gdGhlbSBpcyBiZXR0ZXIgc3VpdGVkIHRvIG9idGFpbiB0aGUgcHJpbWFyeSBsZWFzZS5cclxuICAgICAgICAgICAgICAgIHZhciBwcmVmZXJyZWRDYW5kaWRhdGUgPSBfdGhpcy5maWx0ZXJBY3RpdmVDbGllbnRzKGV4aXN0aW5nQ2xpZW50cywgTUFYX1BSSU1BUllfRUxJR0lCTEVfQUdFX01TKS5maW5kKGZ1bmN0aW9uIChvdGhlckNsaWVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChfdGhpcy5jbGllbnRJZCAhPT0gb3RoZXJDbGllbnQuY2xpZW50SWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG90aGVyQ2xpZW50SGFzQmV0dGVyTmV0d29ya1N0YXRlID0gIV90aGlzLm5ldHdvcmtFbmFibGVkICYmIG90aGVyQ2xpZW50Lm5ldHdvcmtFbmFibGVkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgb3RoZXJDbGllbnRIYXNCZXR0ZXJWaXNpYmlsaXR5ID0gIV90aGlzLmluRm9yZWdyb3VuZCAmJiBvdGhlckNsaWVudC5pbkZvcmVncm91bmQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvdGhlckNsaWVudEhhc1NhbWVOZXR3b3JrU3RhdGUgPSBfdGhpcy5uZXR3b3JrRW5hYmxlZCA9PT0gb3RoZXJDbGllbnQubmV0d29ya0VuYWJsZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvdGhlckNsaWVudEhhc0JldHRlck5ldHdvcmtTdGF0ZSB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKG90aGVyQ2xpZW50SGFzQmV0dGVyVmlzaWJpbGl0eSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG90aGVyQ2xpZW50SGFzU2FtZU5ldHdvcmtTdGF0ZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHByZWZlcnJlZENhbmRpZGF0ZSA9PT0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAubmV4dChmdW5jdGlvbiAoY2FuQWN0QXNQcmltYXJ5KSB7XHJcbiAgICAgICAgICAgIGlmIChfdGhpcy5pc1ByaW1hcnkgIT09IGNhbkFjdEFzUHJpbWFyeSkge1xyXG4gICAgICAgICAgICAgICAgZGVidWcoTE9HX1RBRyQxLCBcIkNsaWVudCBcIiArIChjYW5BY3RBc1ByaW1hcnkgPyAnaXMnIDogJ2lzIG5vdCcpICsgXCIgZWxpZ2libGUgZm9yIGEgcHJpbWFyeSBsZWFzZS5cIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGNhbkFjdEFzUHJpbWFyeTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBJbmRleGVkRGJQZXJzaXN0ZW5jZS5wcm90b3R5cGUuc2h1dGRvd24gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRzbGliLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgICAgICByZXR1cm4gdHNsaWIuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGUgc2h1dGRvd24oKSBvcGVyYXRpb25zIGFyZSBpZGVtcG90ZW50IGFuZCBjYW4gYmUgY2FsbGVkIGV2ZW4gd2hlblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBzdGFydCgpIGFib3J0ZWQgKGUuZy4gYmVjYXVzZSBpdCBjb3VsZG4ndCBhY3F1aXJlIHRoZSBwZXJzaXN0ZW5jZSBsZWFzZSkuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3N0YXJ0ZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tYXJrQ2xpZW50Wm9tYmllZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5jbGllbnRNZXRhZGF0YVJlZnJlc2hlcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jbGllbnRNZXRhZGF0YVJlZnJlc2hlci5jYW5jZWwoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2xpZW50TWV0YWRhdGFSZWZyZXNoZXIgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGV0YWNoVmlzaWJpbGl0eUhhbmRsZXIoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZXRhY2hXaW5kb3dVbmxvYWRIb29rKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuc2ltcGxlRGIucnVuVHJhbnNhY3Rpb24oJ3JlYWR3cml0ZS1pZGVtcG90ZW50JywgW0RiUHJpbWFyeUNsaWVudC5zdG9yZSwgRGJDbGllbnRNZXRhZGF0YS5zdG9yZV0sIGZ1bmN0aW9uICh0eG4pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMucmVsZWFzZVByaW1hcnlMZWFzZUlmSGVsZCh0eG4pLm5leHQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMucmVtb3ZlQ2xpZW50TWV0YWRhdGEodHhuKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaW1wbGVEYi5jbG9zZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBSZW1vdmUgdGhlIGVudHJ5IG1hcmtpbmcgdGhlIGNsaWVudCBhcyB6b21iaWVkIGZyb20gTG9jYWxTdG9yYWdlIHNpbmNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdlIHN1Y2Nlc3NmdWxseSBkZWxldGVkIGl0cyBtZXRhZGF0YSBmcm9tIEluZGV4ZWREYi5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVDbGllbnRab21iaWVkRW50cnkoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgY2xpZW50cyB0aGF0IGFyZSBub3Qgem9tYmllZCBhbmQgaGF2ZSBhbiB1cGRhdGVUaW1lIHdpdGhpbiB0aGVcclxuICAgICAqIHByb3ZpZGVkIHRocmVzaG9sZC5cclxuICAgICAqL1xyXG4gICAgSW5kZXhlZERiUGVyc2lzdGVuY2UucHJvdG90eXBlLmZpbHRlckFjdGl2ZUNsaWVudHMgPSBmdW5jdGlvbiAoY2xpZW50cywgYWN0aXZpdHlUaHJlc2hvbGRNcykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIGNsaWVudHMuZmlsdGVyKGZ1bmN0aW9uIChjbGllbnQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIF90aGlzLmlzV2l0aGluQWdlKGNsaWVudC51cGRhdGVUaW1lTXMsIGFjdGl2aXR5VGhyZXNob2xkTXMpICYmXHJcbiAgICAgICAgICAgICAgICAhX3RoaXMuaXNDbGllbnRab21iaWVkKGNsaWVudC5jbGllbnRJZCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgSW5kZXhlZERiUGVyc2lzdGVuY2UucHJvdG90eXBlLmdldEFjdGl2ZUNsaWVudHMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICByZXR1cm4gdGhpcy5zaW1wbGVEYi5ydW5UcmFuc2FjdGlvbigncmVhZG9ubHktaWRlbXBvdGVudCcsIFtEYkNsaWVudE1ldGFkYXRhLnN0b3JlXSwgZnVuY3Rpb24gKHR4bikge1xyXG4gICAgICAgICAgICByZXR1cm4gY2xpZW50TWV0YWRhdGFTdG9yZSh0eG4pXHJcbiAgICAgICAgICAgICAgICAubG9hZEFsbCgpXHJcbiAgICAgICAgICAgICAgICAubmV4dChmdW5jdGlvbiAoY2xpZW50cykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLmZpbHRlckFjdGl2ZUNsaWVudHMoY2xpZW50cywgTUFYX0NMSUVOVF9BR0VfTVMpLm1hcChmdW5jdGlvbiAoY2xpZW50TWV0YWRhdGEpIHsgcmV0dXJuIGNsaWVudE1ldGFkYXRhLmNsaWVudElkOyB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgSW5kZXhlZERiUGVyc2lzdGVuY2UuY2xlYXJQZXJzaXN0ZW5jZSA9IGZ1bmN0aW9uIChwZXJzaXN0ZW5jZUtleSkge1xyXG4gICAgICAgIHJldHVybiB0c2xpYi5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGRiTmFtZTtcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFJbmRleGVkRGJQZXJzaXN0ZW5jZS5pc0F2YWlsYWJsZSgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgUHJvbWlzZS5yZXNvbHZlKCldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRiTmFtZSA9IHBlcnNpc3RlbmNlS2V5ICsgSW5kZXhlZERiUGVyc2lzdGVuY2UuTUFJTl9EQVRBQkFTRTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgU2ltcGxlRGIuZGVsZXRlKGRiTmFtZSldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShJbmRleGVkRGJQZXJzaXN0ZW5jZS5wcm90b3R5cGUsIFwic3RhcnRlZFwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9zdGFydGVkO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgSW5kZXhlZERiUGVyc2lzdGVuY2UucHJvdG90eXBlLmdldE11dGF0aW9uUXVldWUgPSBmdW5jdGlvbiAodXNlcikge1xyXG4gICAgICAgIGFzc2VydCh0aGlzLnN0YXJ0ZWQsICdDYW5ub3QgaW5pdGlhbGl6ZSBNdXRhdGlvblF1ZXVlIGJlZm9yZSBwZXJzaXN0ZW5jZSBpcyBzdGFydGVkLicpO1xyXG4gICAgICAgIHJldHVybiBJbmRleGVkRGJNdXRhdGlvblF1ZXVlLmZvclVzZXIodXNlciwgdGhpcy5zZXJpYWxpemVyLCB0aGlzLmluZGV4TWFuYWdlciwgdGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZSk7XHJcbiAgICB9O1xyXG4gICAgSW5kZXhlZERiUGVyc2lzdGVuY2UucHJvdG90eXBlLmdldFRhcmdldENhY2hlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGFzc2VydCh0aGlzLnN0YXJ0ZWQsICdDYW5ub3QgaW5pdGlhbGl6ZSBUYXJnZXRDYWNoZSBiZWZvcmUgcGVyc2lzdGVuY2UgaXMgc3RhcnRlZC4nKTtcclxuICAgICAgICByZXR1cm4gdGhpcy50YXJnZXRDYWNoZTtcclxuICAgIH07XHJcbiAgICBJbmRleGVkRGJQZXJzaXN0ZW5jZS5wcm90b3R5cGUuZ2V0UmVtb3RlRG9jdW1lbnRDYWNoZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBhc3NlcnQodGhpcy5zdGFydGVkLCAnQ2Fubm90IGluaXRpYWxpemUgUmVtb3RlRG9jdW1lbnRDYWNoZSBiZWZvcmUgcGVyc2lzdGVuY2UgaXMgc3RhcnRlZC4nKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5yZW1vdGVEb2N1bWVudENhY2hlO1xyXG4gICAgfTtcclxuICAgIEluZGV4ZWREYlBlcnNpc3RlbmNlLnByb3RvdHlwZS5nZXRJbmRleE1hbmFnZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgYXNzZXJ0KHRoaXMuc3RhcnRlZCwgJ0Nhbm5vdCBpbml0aWFsaXplIEluZGV4TWFuYWdlciBiZWZvcmUgcGVyc2lzdGVuY2UgaXMgc3RhcnRlZC4nKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5pbmRleE1hbmFnZXI7XHJcbiAgICB9O1xyXG4gICAgSW5kZXhlZERiUGVyc2lzdGVuY2UucHJvdG90eXBlLnJ1blRyYW5zYWN0aW9uID0gZnVuY3Rpb24gKGFjdGlvbiwgbW9kZSwgdHJhbnNhY3Rpb25PcGVyYXRpb24pIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIGRlYnVnKExPR19UQUckMSwgJ1N0YXJ0aW5nIHRyYW5zYWN0aW9uOicsIGFjdGlvbik7XHJcbiAgICAgICAgLy8gVE9ETyhzY2htaWR0LXNlYmFzdGlhbik6IFNpbXBsaWZ5IG9uY2UgYWxsIHRyYW5zYWN0aW9ucyBhcmUgaWRlbXBvdGVudC5cclxuICAgICAgICB2YXIgaWRlbXBvdGVudCA9IG1vZGUuZW5kc1dpdGgoJ2lkZW1wb3RlbnQnKTtcclxuICAgICAgICB2YXIgcmVhZG9ubHkgPSBtb2RlLnN0YXJ0c1dpdGgoJ3JlYWRvbmx5Jyk7XHJcbiAgICAgICAgdmFyIHNpbXBsZURiTW9kZSA9IHJlYWRvbmx5XHJcbiAgICAgICAgICAgID8gaWRlbXBvdGVudFxyXG4gICAgICAgICAgICAgICAgPyAncmVhZG9ubHktaWRlbXBvdGVudCdcclxuICAgICAgICAgICAgICAgIDogJ3JlYWRvbmx5J1xyXG4gICAgICAgICAgICA6IGlkZW1wb3RlbnRcclxuICAgICAgICAgICAgICAgID8gJ3JlYWR3cml0ZS1pZGVtcG90ZW50J1xyXG4gICAgICAgICAgICAgICAgOiAncmVhZHdyaXRlJztcclxuICAgICAgICB2YXIgcGVyc2lzdGVuY2VUcmFuc2FjdGlvbjtcclxuICAgICAgICAvLyBEbyBhbGwgdHJhbnNhY3Rpb25zIGFzIHJlYWR3cml0ZSBhZ2FpbnN0IGFsbCBvYmplY3Qgc3RvcmVzLCBzaW5jZSB3ZVxyXG4gICAgICAgIC8vIGFyZSB0aGUgb25seSByZWFkZXIvd3JpdGVyLlxyXG4gICAgICAgIHJldHVybiB0aGlzLnNpbXBsZURiXHJcbiAgICAgICAgICAgIC5ydW5UcmFuc2FjdGlvbihzaW1wbGVEYk1vZGUsIEFMTF9TVE9SRVMsIGZ1bmN0aW9uIChzaW1wbGVEYlR4bikge1xyXG4gICAgICAgICAgICBwZXJzaXN0ZW5jZVRyYW5zYWN0aW9uID0gbmV3IEluZGV4ZWREYlRyYW5zYWN0aW9uKHNpbXBsZURiVHhuLCBfdGhpcy5saXN0ZW5TZXF1ZW5jZS5uZXh0KCkpO1xyXG4gICAgICAgICAgICBpZiAobW9kZSA9PT0gJ3JlYWR3cml0ZS1wcmltYXJ5JyB8fFxyXG4gICAgICAgICAgICAgICAgbW9kZSA9PT0gJ3JlYWR3cml0ZS1wcmltYXJ5LWlkZW1wb3RlbnQnKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBXaGlsZSB3ZSBtZXJlbHkgdmVyaWZ5IHRoYXQgd2UgaGF2ZSAob3IgY2FuIGFjcXVpcmUpIHRoZSBsZWFzZVxyXG4gICAgICAgICAgICAgICAgLy8gaW1tZWRpYXRlbHksIHdlIHdhaXQgdG8gZXh0ZW5kIHRoZSBwcmltYXJ5IGxlYXNlIHVudGlsIGFmdGVyXHJcbiAgICAgICAgICAgICAgICAvLyBleGVjdXRpbmcgdHJhbnNhY3Rpb25PcGVyYXRpb24oKS4gVGhpcyBlbnN1cmVzIHRoYXQgZXZlbiBpZiB0aGVcclxuICAgICAgICAgICAgICAgIC8vIHRyYW5zYWN0aW9uT3BlcmF0aW9uIHRha2VzIGEgbG9uZyB0aW1lLCB3ZSdsbCB1c2UgYSByZWNlbnRcclxuICAgICAgICAgICAgICAgIC8vIGxlYXNlVGltZXN0YW1wTXMgaW4gdGhlIGV4dGVuZGVkIChvciBuZXdseSBhY3F1aXJlZCkgbGVhc2UuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMudmVyaWZ5UHJpbWFyeUxlYXNlKHNpbXBsZURiVHhuKVxyXG4gICAgICAgICAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uIChob2xkc1ByaW1hcnlMZWFzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChob2xkc1ByaW1hcnlMZWFzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gLyogaG9sZHNQcmltYXJ5TGVhc2U9ICovIHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5jYW5BY3RBc1ByaW1hcnkoc2ltcGxlRGJUeG4pO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAubmV4dChmdW5jdGlvbiAoaG9sZHNQcmltYXJ5TGVhc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWhvbGRzUHJpbWFyeUxlYXNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yKFwiRmFpbGVkIHRvIG9idGFpbiBwcmltYXJ5IGxlYXNlIGZvciBhY3Rpb24gJ1wiICsgYWN0aW9uICsgXCInLlwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuaXNQcmltYXJ5ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnF1ZXVlLmVucXVldWVBbmRGb3JnZXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLnByaW1hcnlTdGF0ZUxpc3RlbmVyKGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLkZBSUxFRF9QUkVDT05ESVRJT04sIFBSSU1BUllfTEVBU0VfTE9TVF9FUlJPUl9NU0cpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJhbnNhY3Rpb25PcGVyYXRpb24ocGVyc2lzdGVuY2VUcmFuc2FjdGlvbik7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuYWNxdWlyZU9yRXh0ZW5kUHJpbWFyeUxlYXNlKHNpbXBsZURiVHhuKS5uZXh0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIHJlc3VsdDsgfSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy52ZXJpZnlBbGxvd1RhYlN5bmNocm9uaXphdGlvbihzaW1wbGVEYlR4bikubmV4dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRyYW5zYWN0aW9uT3BlcmF0aW9uKHBlcnNpc3RlbmNlVHJhbnNhY3Rpb24pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgIHBlcnNpc3RlbmNlVHJhbnNhY3Rpb24ucmFpc2VPbkNvbW1pdHRlZEV2ZW50KCk7XHJcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBWZXJpZmllcyB0aGF0IHRoZSBjdXJyZW50IHRhYiBpcyB0aGUgcHJpbWFyeSBsZWFzZWhvbGRlciBvciBhbHRlcm5hdGl2ZWx5XHJcbiAgICAgKiB0aGF0IHRoZSBsZWFzZWhvbGRlciBoYXMgb3B0ZWQgaW50byBtdWx0aS10YWIgc3luY2hyb25pemF0aW9uLlxyXG4gICAgICovXHJcbiAgICAvLyBUT0RPKGIvMTE0MjI2MjM0KTogUmVtb3ZlIHRoaXMgY2hlY2sgd2hlbiBgc3luY2hyb25pemVUYWJzYCBjYW4gbm8gbG9uZ2VyXHJcbiAgICAvLyBiZSB0dXJuZWQgb2ZmLlxyXG4gICAgSW5kZXhlZERiUGVyc2lzdGVuY2UucHJvdG90eXBlLnZlcmlmeUFsbG93VGFiU3luY2hyb25pemF0aW9uID0gZnVuY3Rpb24gKHR4bikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIHN0b3JlID0gcHJpbWFyeUNsaWVudFN0b3JlKHR4bik7XHJcbiAgICAgICAgcmV0dXJuIHN0b3JlLmdldChEYlByaW1hcnlDbGllbnQua2V5KS5uZXh0KGZ1bmN0aW9uIChjdXJyZW50UHJpbWFyeSkge1xyXG4gICAgICAgICAgICB2YXIgY3VycmVudExlYXNlSXNWYWxpZCA9IGN1cnJlbnRQcmltYXJ5ICE9PSBudWxsICYmXHJcbiAgICAgICAgICAgICAgICBfdGhpcy5pc1dpdGhpbkFnZShjdXJyZW50UHJpbWFyeS5sZWFzZVRpbWVzdGFtcE1zLCBNQVhfUFJJTUFSWV9FTElHSUJMRV9BR0VfTVMpICYmXHJcbiAgICAgICAgICAgICAgICAhX3RoaXMuaXNDbGllbnRab21iaWVkKGN1cnJlbnRQcmltYXJ5Lm93bmVySWQpO1xyXG4gICAgICAgICAgICBpZiAoY3VycmVudExlYXNlSXNWYWxpZCAmJiAhX3RoaXMuaXNMb2NhbENsaWVudChjdXJyZW50UHJpbWFyeSkpIHtcclxuICAgICAgICAgICAgICAgIGlmICghY3VycmVudFByaW1hcnkuYWxsb3dUYWJTeW5jaHJvbml6YXRpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5GQUlMRURfUFJFQ09ORElUSU9OLCBQUklNQVJZX0xFQVNFX0VYQ0xVU0lWRV9FUlJPUl9NU0cpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBPYnRhaW5zIG9yIGV4dGVuZHMgdGhlIG5ldyBwcmltYXJ5IGxlYXNlIGZvciB0aGUgbG9jYWwgY2xpZW50LiBUaGlzXHJcbiAgICAgKiBtZXRob2QgZG9lcyBub3QgdmVyaWZ5IHRoYXQgdGhlIGNsaWVudCBpcyBlbGlnaWJsZSBmb3IgdGhpcyBsZWFzZS5cclxuICAgICAqL1xyXG4gICAgSW5kZXhlZERiUGVyc2lzdGVuY2UucHJvdG90eXBlLmFjcXVpcmVPckV4dGVuZFByaW1hcnlMZWFzZSA9IGZ1bmN0aW9uICh0eG4pIHtcclxuICAgICAgICB2YXIgbmV3UHJpbWFyeSA9IG5ldyBEYlByaW1hcnlDbGllbnQodGhpcy5jbGllbnRJZCwgdGhpcy5hbGxvd1RhYlN5bmNocm9uaXphdGlvbiwgRGF0ZS5ub3coKSk7XHJcbiAgICAgICAgcmV0dXJuIHByaW1hcnlDbGllbnRTdG9yZSh0eG4pLnB1dChEYlByaW1hcnlDbGllbnQua2V5LCBuZXdQcmltYXJ5KTtcclxuICAgIH07XHJcbiAgICBJbmRleGVkRGJQZXJzaXN0ZW5jZS5pc0F2YWlsYWJsZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gU2ltcGxlRGIuaXNBdmFpbGFibGUoKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEdlbmVyYXRlcyBhIHN0cmluZyB1c2VkIGFzIGEgcHJlZml4IHdoZW4gc3RvcmluZyBkYXRhIGluIEluZGV4ZWREQiBhbmRcclxuICAgICAqIExvY2FsU3RvcmFnZS5cclxuICAgICAqL1xyXG4gICAgSW5kZXhlZERiUGVyc2lzdGVuY2UuYnVpbGRTdG9yYWdlUHJlZml4ID0gZnVuY3Rpb24gKGRhdGFiYXNlSW5mbykge1xyXG4gICAgICAgIC8vIFVzZSB0d28gZGlmZmVyZW50IHByZWZpeCBmb3JtYXRzOlxyXG4gICAgICAgIC8vXHJcbiAgICAgICAgLy8gICAqIGZpcmVzdG9yZSAvIHBlcnNpc3RlbmNlS2V5IC8gcHJvamVjdElEIC4gZGF0YWJhc2VJRCAvIC4uLlxyXG4gICAgICAgIC8vICAgKiBmaXJlc3RvcmUgLyBwZXJzaXN0ZW5jZUtleSAvIHByb2plY3RJRCAvIC4uLlxyXG4gICAgICAgIC8vXHJcbiAgICAgICAgLy8gcHJvamVjdElEcyBhcmUgRE5TLWNvbXBhdGlibGUgbmFtZXMgYW5kIGNhbm5vdCBjb250YWluIGRvdHNcclxuICAgICAgICAvLyBzbyB0aGVyZSdzIG5vIGRhbmdlciBvZiBjb2xsaXNpb25zLlxyXG4gICAgICAgIHZhciBkYXRhYmFzZSA9IGRhdGFiYXNlSW5mby5kYXRhYmFzZUlkLnByb2plY3RJZDtcclxuICAgICAgICBpZiAoIWRhdGFiYXNlSW5mby5kYXRhYmFzZUlkLmlzRGVmYXVsdERhdGFiYXNlKSB7XHJcbiAgICAgICAgICAgIGRhdGFiYXNlICs9ICcuJyArIGRhdGFiYXNlSW5mby5kYXRhYmFzZUlkLmRhdGFiYXNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gJ2ZpcmVzdG9yZS8nICsgZGF0YWJhc2VJbmZvLnBlcnNpc3RlbmNlS2V5ICsgJy8nICsgZGF0YWJhc2UgKyAnLyc7XHJcbiAgICB9O1xyXG4gICAgLyoqIENoZWNrcyB0aGUgcHJpbWFyeSBsZWFzZSBhbmQgcmVtb3ZlcyBpdCBpZiB3ZSBhcmUgdGhlIGN1cnJlbnQgcHJpbWFyeS4gKi9cclxuICAgIEluZGV4ZWREYlBlcnNpc3RlbmNlLnByb3RvdHlwZS5yZWxlYXNlUHJpbWFyeUxlYXNlSWZIZWxkID0gZnVuY3Rpb24gKHR4bikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIHN0b3JlID0gcHJpbWFyeUNsaWVudFN0b3JlKHR4bik7XHJcbiAgICAgICAgcmV0dXJuIHN0b3JlLmdldChEYlByaW1hcnlDbGllbnQua2V5KS5uZXh0KGZ1bmN0aW9uIChwcmltYXJ5Q2xpZW50KSB7XHJcbiAgICAgICAgICAgIGlmIChfdGhpcy5pc0xvY2FsQ2xpZW50KHByaW1hcnlDbGllbnQpKSB7XHJcbiAgICAgICAgICAgICAgICBkZWJ1ZyhMT0dfVEFHJDEsICdSZWxlYXNpbmcgcHJpbWFyeSBsZWFzZS4nKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBzdG9yZS5kZWxldGUoRGJQcmltYXJ5Q2xpZW50LmtleSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKiBWZXJpZmllcyB0aGF0IGB1cGRhdGVUaW1lTXNgIGlzIHdpdGhpbiBgbWF4QWdlTXNgLiAqL1xyXG4gICAgSW5kZXhlZERiUGVyc2lzdGVuY2UucHJvdG90eXBlLmlzV2l0aGluQWdlID0gZnVuY3Rpb24gKHVwZGF0ZVRpbWVNcywgbWF4QWdlTXMpIHtcclxuICAgICAgICB2YXIgbm93ID0gRGF0ZS5ub3coKTtcclxuICAgICAgICB2YXIgbWluQWNjZXB0YWJsZSA9IG5vdyAtIG1heEFnZU1zO1xyXG4gICAgICAgIHZhciBtYXhBY2NlcHRhYmxlID0gbm93O1xyXG4gICAgICAgIGlmICh1cGRhdGVUaW1lTXMgPCBtaW5BY2NlcHRhYmxlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodXBkYXRlVGltZU1zID4gbWF4QWNjZXB0YWJsZSkge1xyXG4gICAgICAgICAgICBlcnJvcihcIkRldGVjdGVkIGFuIHVwZGF0ZSB0aW1lIHRoYXQgaXMgaW4gdGhlIGZ1dHVyZTogXCIgKyB1cGRhdGVUaW1lTXMgKyBcIiA+IFwiICsgbWF4QWNjZXB0YWJsZSk7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9O1xyXG4gICAgSW5kZXhlZERiUGVyc2lzdGVuY2UucHJvdG90eXBlLmF0dGFjaFZpc2liaWxpdHlIYW5kbGVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgaWYgKHRoaXMuZG9jdW1lbnQgIT09IG51bGwgJiZcclxuICAgICAgICAgICAgdHlwZW9mIHRoaXMuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lciA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICB0aGlzLmRvY3VtZW50VmlzaWJpbGl0eUhhbmRsZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5xdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5pbkZvcmVncm91bmQgPSBfdGhpcy5kb2N1bWVudC52aXNpYmlsaXR5U3RhdGUgPT09ICd2aXNpYmxlJztcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMudXBkYXRlQ2xpZW50TWV0YWRhdGFBbmRUcnlCZWNvbWVQcmltYXJ5KCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgdGhpcy5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCd2aXNpYmlsaXR5Y2hhbmdlJywgdGhpcy5kb2N1bWVudFZpc2liaWxpdHlIYW5kbGVyKTtcclxuICAgICAgICAgICAgdGhpcy5pbkZvcmVncm91bmQgPSB0aGlzLmRvY3VtZW50LnZpc2liaWxpdHlTdGF0ZSA9PT0gJ3Zpc2libGUnO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBJbmRleGVkRGJQZXJzaXN0ZW5jZS5wcm90b3R5cGUuZGV0YWNoVmlzaWJpbGl0eUhhbmRsZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZG9jdW1lbnRWaXNpYmlsaXR5SGFuZGxlcikge1xyXG4gICAgICAgICAgICBhc3NlcnQodGhpcy5kb2N1bWVudCAhPT0gbnVsbCAmJlxyXG4gICAgICAgICAgICAgICAgdHlwZW9mIHRoaXMuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lciA9PT0gJ2Z1bmN0aW9uJywgXCJFeHBlY3RlZCAnZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcicgdG8gYmUgYSBmdW5jdGlvblwiKTtcclxuICAgICAgICAgICAgdGhpcy5kb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCd2aXNpYmlsaXR5Y2hhbmdlJywgdGhpcy5kb2N1bWVudFZpc2liaWxpdHlIYW5kbGVyKTtcclxuICAgICAgICAgICAgdGhpcy5kb2N1bWVudFZpc2liaWxpdHlIYW5kbGVyID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBBdHRhY2hlcyBhIHdpbmRvdy51bmxvYWQgaGFuZGxlciB0aGF0IHdpbGwgc3luY2hyb25vdXNseSB3cml0ZSBvdXJcclxuICAgICAqIGNsaWVudElkIHRvIGEgXCJ6b21iaWUgY2xpZW50IGlkXCIgbG9jYXRpb24gaW4gTG9jYWxTdG9yYWdlLiBUaGlzIGNhbiBiZSB1c2VkXHJcbiAgICAgKiBieSB0YWJzIHRyeWluZyB0byBhY3F1aXJlIHRoZSBwcmltYXJ5IGxlYXNlIHRvIGRldGVybWluZSB0aGF0IHRoZSBsZWFzZVxyXG4gICAgICogaXMgbm8gbG9uZ2VyIHZhbGlkIGV2ZW4gaWYgdGhlIHRpbWVzdGFtcCBpcyByZWNlbnQuIFRoaXMgaXMgcGFydGljdWxhcmx5XHJcbiAgICAgKiBpbXBvcnRhbnQgZm9yIHRoZSByZWZyZXNoIGNhc2UgKHNvIHRoZSB0YWIgY29ycmVjdGx5IHJlLWFjcXVpcmVzIHRoZVxyXG4gICAgICogcHJpbWFyeSBsZWFzZSkuIExvY2FsU3RvcmFnZSBpcyB1c2VkIGZvciB0aGlzIHJhdGhlciB0aGFuIEluZGV4ZWREYiBiZWNhdXNlXHJcbiAgICAgKiBpdCBpcyBhIHN5bmNocm9ub3VzIEFQSSBhbmQgc28gY2FuIGJlIHVzZWQgcmVsaWFibHkgZnJvbSAgYW4gdW5sb2FkXHJcbiAgICAgKiBoYW5kbGVyLlxyXG4gICAgICovXHJcbiAgICBJbmRleGVkRGJQZXJzaXN0ZW5jZS5wcm90b3R5cGUuYXR0YWNoV2luZG93VW5sb2FkSG9vayA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lciA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICB0aGlzLndpbmRvd1VubG9hZEhhbmRsZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBOb3RlOiBJbiB0aGVvcnksIHRoaXMgc2hvdWxkIGJlIHNjaGVkdWxlZCBvbiB0aGUgQXN5bmNRdWV1ZSBzaW5jZSBpdFxyXG4gICAgICAgICAgICAgICAgLy8gYWNjZXNzZXMgaW50ZXJuYWwgc3RhdGUuIFdlIGV4ZWN1dGUgdGhpcyBjb2RlIGRpcmVjdGx5IGR1cmluZyBzaHV0ZG93blxyXG4gICAgICAgICAgICAgICAgLy8gdG8gbWFrZSBzdXJlIGl0IGdldHMgYSBjaGFuY2UgdG8gcnVuLlxyXG4gICAgICAgICAgICAgICAgX3RoaXMubWFya0NsaWVudFpvbWJpZWQoKTtcclxuICAgICAgICAgICAgICAgIF90aGlzLnF1ZXVlLmVucXVldWVBbmRGb3JnZXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIEF0dGVtcHQgZ3JhY2VmdWwgc2h1dGRvd24gKGluY2x1ZGluZyByZWxlYXNpbmcgb3VyIHByaW1hcnkgbGVhc2UpLFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGJ1dCB0aGVyZSdzIG5vIGd1YXJhbnRlZSBpdCB3aWxsIGNvbXBsZXRlLlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5zaHV0ZG93bigpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHRoaXMud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3VubG9hZCcsIHRoaXMud2luZG93VW5sb2FkSGFuZGxlcik7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIEluZGV4ZWREYlBlcnNpc3RlbmNlLnByb3RvdHlwZS5kZXRhY2hXaW5kb3dVbmxvYWRIb29rID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICh0aGlzLndpbmRvd1VubG9hZEhhbmRsZXIpIHtcclxuICAgICAgICAgICAgYXNzZXJ0KHR5cGVvZiB0aGlzLndpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyID09PSAnZnVuY3Rpb24nLCBcIkV4cGVjdGVkICd3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcicgdG8gYmUgYSBmdW5jdGlvblwiKTtcclxuICAgICAgICAgICAgdGhpcy53aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigndW5sb2FkJywgdGhpcy53aW5kb3dVbmxvYWRIYW5kbGVyKTtcclxuICAgICAgICAgICAgdGhpcy53aW5kb3dVbmxvYWRIYW5kbGVyID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHdoZXRoZXIgYSBjbGllbnQgaXMgXCJ6b21iaWVkXCIgYmFzZWQgb24gaXRzIExvY2FsU3RvcmFnZSBlbnRyeS5cclxuICAgICAqIENsaWVudHMgYmVjb21lIHpvbWJpZWQgd2hlbiB0aGVpciB0YWIgY2xvc2VzIHdpdGhvdXQgcnVubmluZyBhbGwgb2YgdGhlXHJcbiAgICAgKiBjbGVhbnVwIGxvZ2ljIGluIGBzaHV0ZG93bigpYC5cclxuICAgICAqL1xyXG4gICAgSW5kZXhlZERiUGVyc2lzdGVuY2UucHJvdG90eXBlLmlzQ2xpZW50Wm9tYmllZCA9IGZ1bmN0aW9uIChjbGllbnRJZCkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHZhciBpc1pvbWJpZWQgPSB0aGlzLndlYlN0b3JhZ2UuZ2V0SXRlbSh0aGlzLnpvbWJpZWRDbGllbnRMb2NhbFN0b3JhZ2VLZXkoY2xpZW50SWQpKSAhPT1cclxuICAgICAgICAgICAgICAgIG51bGw7XHJcbiAgICAgICAgICAgIGRlYnVnKExPR19UQUckMSwgXCJDbGllbnQgJ1wiICsgY2xpZW50SWQgKyBcIicgXCIgKyAoaXNab21iaWVkID8gJ2lzJyA6ICdpcyBub3QnKSArIFwiIHpvbWJpZWQgaW4gTG9jYWxTdG9yYWdlXCIpO1xyXG4gICAgICAgICAgICByZXR1cm4gaXNab21iaWVkO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAvLyBHcmFjZWZ1bGx5IGhhbmRsZSBpZiBMb2NhbFN0b3JhZ2UgaXNuJ3Qgd29ya2luZy5cclxuICAgICAgICAgICAgZXJyb3IoTE9HX1RBRyQxLCAnRmFpbGVkIHRvIGdldCB6b21iaWVkIGNsaWVudCBpZC4nLCBlKTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJlY29yZCBjbGllbnQgYXMgem9tYmllZCAoYSBjbGllbnQgdGhhdCBoYWQgaXRzIHRhYiBjbG9zZWQpLiBab21iaWVkXHJcbiAgICAgKiBjbGllbnRzIGFyZSBpZ25vcmVkIGR1cmluZyBwcmltYXJ5IHRhYiBzZWxlY3Rpb24uXHJcbiAgICAgKi9cclxuICAgIEluZGV4ZWREYlBlcnNpc3RlbmNlLnByb3RvdHlwZS5tYXJrQ2xpZW50Wm9tYmllZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICB0aGlzLndlYlN0b3JhZ2Uuc2V0SXRlbSh0aGlzLnpvbWJpZWRDbGllbnRMb2NhbFN0b3JhZ2VLZXkodGhpcy5jbGllbnRJZCksIFN0cmluZyhEYXRlLm5vdygpKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIC8vIEdyYWNlZnVsbHkgaGFuZGxlIGlmIExvY2FsU3RvcmFnZSBpc24ndCBhdmFpbGFibGUgLyB3b3JraW5nLlxyXG4gICAgICAgICAgICBlcnJvcignRmFpbGVkIHRvIHNldCB6b21iaWUgY2xpZW50IGlkLicsIGUpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKiogUmVtb3ZlcyB0aGUgem9tYmllZCBjbGllbnQgZW50cnkgaWYgaXQgZXhpc3RzLiAqL1xyXG4gICAgSW5kZXhlZERiUGVyc2lzdGVuY2UucHJvdG90eXBlLnJlbW92ZUNsaWVudFpvbWJpZWRFbnRyeSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICB0aGlzLndlYlN0b3JhZ2UucmVtb3ZlSXRlbSh0aGlzLnpvbWJpZWRDbGllbnRMb2NhbFN0b3JhZ2VLZXkodGhpcy5jbGllbnRJZCkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAvLyBJZ25vcmVcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgSW5kZXhlZERiUGVyc2lzdGVuY2UucHJvdG90eXBlLnpvbWJpZWRDbGllbnRMb2NhbFN0b3JhZ2VLZXkgPSBmdW5jdGlvbiAoY2xpZW50SWQpIHtcclxuICAgICAgICByZXR1cm4gWk9NQklFRF9DTElFTlRTX0tFWV9QUkVGSVggKyBcIl9cIiArIHRoaXMucGVyc2lzdGVuY2VLZXkgKyBcIl9cIiArIGNsaWVudElkO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogVGhlIG5hbWUgb2YgdGhlIG1haW4gKGFuZCBjdXJyZW50bHkgb25seSkgSW5kZXhlZERCIGRhdGFiYXNlLiB0aGlzIG5hbWUgaXNcclxuICAgICAqIGFwcGVuZGVkIHRvIHRoZSBwcmVmaXggcHJvdmlkZWQgdG8gdGhlIEluZGV4ZWREYlBlcnNpc3RlbmNlIGNvbnN0cnVjdG9yLlxyXG4gICAgICovXHJcbiAgICBJbmRleGVkRGJQZXJzaXN0ZW5jZS5NQUlOX0RBVEFCQVNFID0gJ21haW4nO1xyXG4gICAgcmV0dXJuIEluZGV4ZWREYlBlcnNpc3RlbmNlO1xyXG59KCkpO1xyXG5mdW5jdGlvbiBpc1ByaW1hcnlMZWFzZUxvc3RFcnJvcihlcnIpIHtcclxuICAgIHJldHVybiAoZXJyLmNvZGUgPT09IENvZGUuRkFJTEVEX1BSRUNPTkRJVElPTiAmJlxyXG4gICAgICAgIGVyci5tZXNzYWdlID09PSBQUklNQVJZX0xFQVNFX0xPU1RfRVJST1JfTVNHKTtcclxufVxyXG4vKipcclxuICogVmVyaWZpZXMgdGhlIGVycm9yIHRocm93biBieSBhIExvY2FsU3RvcmUgb3BlcmF0aW9uLiBJZiBhIExvY2FsU3RvcmVcclxuICogb3BlcmF0aW9uIGZhaWxzIGJlY2F1c2UgdGhlIHByaW1hcnkgbGVhc2UgaGFzIGJlZW4gdGFrZW4gYnkgYW5vdGhlciBjbGllbnQsXHJcbiAqIHdlIGlnbm9yZSB0aGUgZXJyb3IgKHRoZSBwZXJzaXN0ZW5jZSBsYXllciB3aWxsIGltbWVkaWF0ZWx5IGNhbGxcclxuICogYGFwcGx5UHJpbWFyeUxlYXNlYCB0byBwcm9wYWdhdGUgdGhlIHByaW1hcnkgc3RhdGUgY2hhbmdlKS4gQWxsIG90aGVyIGVycm9yc1xyXG4gKiBhcmUgcmUtdGhyb3duLlxyXG4gKlxyXG4gKiBAcGFyYW0gZXJyIEFuIGVycm9yIHJldHVybmVkIGJ5IGEgTG9jYWxTdG9yZSBvcGVyYXRpb24uXHJcbiAqIEByZXR1cm4gQSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgYWZ0ZXIgd2UgcmVjb3ZlcmVkLCBvciB0aGUgb3JpZ2luYWwgZXJyb3IuXHJcbiAqL1xyXG5mdW5jdGlvbiBpZ25vcmVJZlByaW1hcnlMZWFzZUxvc3MoZXJyKSB7XHJcbiAgICByZXR1cm4gdHNsaWIuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRzbGliLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICBpZiAoaXNQcmltYXJ5TGVhc2VMb3N0RXJyb3IoZXJyKSkge1xyXG4gICAgICAgICAgICAgICAgZGVidWcoTE9HX1RBRyQxLCAnVW5leHBlY3RlZGx5IGxvc3QgcHJpbWFyeSBsZWFzZScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgZXJyO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59XHJcbi8qKlxyXG4gKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmb3IgdGhlIHByaW1hcnkgY2xpZW50IG9iamVjdCBzdG9yZS5cclxuICovXHJcbmZ1bmN0aW9uIHByaW1hcnlDbGllbnRTdG9yZSh0eG4pIHtcclxuICAgIHJldHVybiB0eG4uc3RvcmUoRGJQcmltYXJ5Q2xpZW50LnN0b3JlKTtcclxufVxyXG4vKipcclxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSBjbGllbnQgbWV0YWRhdGEgb2JqZWN0IHN0b3JlLlxyXG4gKi9cclxuZnVuY3Rpb24gY2xpZW50TWV0YWRhdGFTdG9yZSh0eG4pIHtcclxuICAgIHJldHVybiB0eG4uc3RvcmUoRGJDbGllbnRNZXRhZGF0YS5zdG9yZSk7XHJcbn1cclxuLyoqIFByb3ZpZGVzIExSVSBmdW5jdGlvbmFsaXR5IGZvciBJbmRleGVkREIgcGVyc2lzdGVuY2UuICovXHJcbnZhciBJbmRleGVkRGJMcnVEZWxlZ2F0ZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEluZGV4ZWREYkxydURlbGVnYXRlKGRiLCBwYXJhbXMpIHtcclxuICAgICAgICB0aGlzLmRiID0gZGI7XHJcbiAgICAgICAgdGhpcy5pbk1lbW9yeVBpbnMgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuZ2FyYmFnZUNvbGxlY3RvciA9IG5ldyBMcnVHYXJiYWdlQ29sbGVjdG9yKHRoaXMsIHBhcmFtcyk7XHJcbiAgICB9XHJcbiAgICBJbmRleGVkRGJMcnVEZWxlZ2F0ZS5wcm90b3R5cGUuZ2V0U2VxdWVuY2VOdW1iZXJDb3VudCA9IGZ1bmN0aW9uICh0eG4pIHtcclxuICAgICAgICB2YXIgZG9jQ291bnRQcm9taXNlID0gdGhpcy5vcnBoYW5lZERvY21lbnRDb3VudCh0eG4pO1xyXG4gICAgICAgIHZhciB0YXJnZXRDb3VudFByb21pc2UgPSB0aGlzLmRiLmdldFRhcmdldENhY2hlKCkuZ2V0VGFyZ2V0Q291bnQodHhuKTtcclxuICAgICAgICByZXR1cm4gdGFyZ2V0Q291bnRQcm9taXNlLm5leHQoZnVuY3Rpb24gKHRhcmdldENvdW50KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBkb2NDb3VudFByb21pc2UubmV4dChmdW5jdGlvbiAoZG9jQ291bnQpIHsgcmV0dXJuIHRhcmdldENvdW50ICsgZG9jQ291bnQ7IH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIEluZGV4ZWREYkxydURlbGVnYXRlLnByb3RvdHlwZS5vcnBoYW5lZERvY21lbnRDb3VudCA9IGZ1bmN0aW9uICh0eG4pIHtcclxuICAgICAgICB2YXIgb3JwaGFuZWRDb3VudCA9IDA7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZm9yRWFjaE9ycGhhbmVkRG9jdW1lbnRTZXF1ZW5jZU51bWJlcih0eG4sIGZ1bmN0aW9uIChfKSB7XHJcbiAgICAgICAgICAgIG9ycGhhbmVkQ291bnQrKztcclxuICAgICAgICB9KS5uZXh0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIG9ycGhhbmVkQ291bnQ7IH0pO1xyXG4gICAgfTtcclxuICAgIEluZGV4ZWREYkxydURlbGVnYXRlLnByb3RvdHlwZS5mb3JFYWNoVGFyZ2V0ID0gZnVuY3Rpb24gKHR4biwgZikge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRiLmdldFRhcmdldENhY2hlKCkuZm9yRWFjaFRhcmdldCh0eG4sIGYpO1xyXG4gICAgfTtcclxuICAgIEluZGV4ZWREYkxydURlbGVnYXRlLnByb3RvdHlwZS5mb3JFYWNoT3JwaGFuZWREb2N1bWVudFNlcXVlbmNlTnVtYmVyID0gZnVuY3Rpb24gKHR4biwgZikge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmZvckVhY2hPcnBoYW5lZERvY3VtZW50KHR4biwgZnVuY3Rpb24gKGRvY0tleSwgc2VxdWVuY2VOdW1iZXIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGYoc2VxdWVuY2VOdW1iZXIpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIEluZGV4ZWREYkxydURlbGVnYXRlLnByb3RvdHlwZS5zZXRJbk1lbW9yeVBpbnMgPSBmdW5jdGlvbiAoaW5NZW1vcnlQaW5zKSB7XHJcbiAgICAgICAgdGhpcy5pbk1lbW9yeVBpbnMgPSBpbk1lbW9yeVBpbnM7XHJcbiAgICB9O1xyXG4gICAgSW5kZXhlZERiTHJ1RGVsZWdhdGUucHJvdG90eXBlLmFkZFJlZmVyZW5jZSA9IGZ1bmN0aW9uICh0eG4sIGtleSkge1xyXG4gICAgICAgIHJldHVybiB3cml0ZVNlbnRpbmVsS2V5KHR4biwga2V5KTtcclxuICAgIH07XHJcbiAgICBJbmRleGVkRGJMcnVEZWxlZ2F0ZS5wcm90b3R5cGUucmVtb3ZlUmVmZXJlbmNlID0gZnVuY3Rpb24gKHR4biwga2V5KSB7XHJcbiAgICAgICAgcmV0dXJuIHdyaXRlU2VudGluZWxLZXkodHhuLCBrZXkpO1xyXG4gICAgfTtcclxuICAgIEluZGV4ZWREYkxydURlbGVnYXRlLnByb3RvdHlwZS5yZW1vdmVUYXJnZXRzID0gZnVuY3Rpb24gKHR4biwgdXBwZXJCb3VuZCwgYWN0aXZlVGFyZ2V0SWRzKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGJcclxuICAgICAgICAgICAgLmdldFRhcmdldENhY2hlKClcclxuICAgICAgICAgICAgLnJlbW92ZVRhcmdldHModHhuLCB1cHBlckJvdW5kLCBhY3RpdmVUYXJnZXRJZHMpO1xyXG4gICAgfTtcclxuICAgIEluZGV4ZWREYkxydURlbGVnYXRlLnByb3RvdHlwZS5yZW1vdmVNdXRhdGlvblJlZmVyZW5jZSA9IGZ1bmN0aW9uICh0eG4sIGtleSkge1xyXG4gICAgICAgIHJldHVybiB3cml0ZVNlbnRpbmVsS2V5KHR4biwga2V5KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiBhbnl0aGluZyB3b3VsZCBwcmV2ZW50IHRoaXMgZG9jdW1lbnQgZnJvbSBiZWluZyBnYXJiYWdlXHJcbiAgICAgKiBjb2xsZWN0ZWQsIGdpdmVuIHRoYXQgdGhlIGRvY3VtZW50IGluIHF1ZXN0aW9uIGlzIG5vdCBwcmVzZW50IGluIGFueVxyXG4gICAgICogdGFyZ2V0cyBhbmQgaGFzIGEgc2VxdWVuY2UgbnVtYmVyIGxlc3MgdGhhbiBvciBlcXVhbCB0byB0aGUgdXBwZXIgYm91bmQgZm9yXHJcbiAgICAgKiB0aGUgY29sbGVjdGlvbiBydW4uXHJcbiAgICAgKi9cclxuICAgIEluZGV4ZWREYkxydURlbGVnYXRlLnByb3RvdHlwZS5pc1Bpbm5lZCA9IGZ1bmN0aW9uICh0eG4sIGRvY0tleSkge1xyXG4gICAgICAgIGlmICh0aGlzLmluTWVtb3J5UGlucy5jb250YWluc0tleShkb2NLZXkpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSh0cnVlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBtdXRhdGlvblF1ZXVlc0NvbnRhaW5LZXkodHhuLCBkb2NLZXkpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBJbmRleGVkRGJMcnVEZWxlZ2F0ZS5wcm90b3R5cGUucmVtb3ZlT3JwaGFuZWREb2N1bWVudHMgPSBmdW5jdGlvbiAodHhuLCB1cHBlckJvdW5kKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgZG9jdW1lbnRDYWNoZSA9IHRoaXMuZGIuZ2V0UmVtb3RlRG9jdW1lbnRDYWNoZSgpO1xyXG4gICAgICAgIHZhciBjaGFuZ2VCdWZmZXIgPSBkb2N1bWVudENhY2hlLm5ld0NoYW5nZUJ1ZmZlcigpO1xyXG4gICAgICAgIHZhciBwcm9taXNlcyA9IFtdO1xyXG4gICAgICAgIHZhciBkb2N1bWVudENvdW50ID0gMDtcclxuICAgICAgICB2YXIgaXRlcmF0aW9uID0gdGhpcy5mb3JFYWNoT3JwaGFuZWREb2N1bWVudCh0eG4sIGZ1bmN0aW9uIChkb2NLZXksIHNlcXVlbmNlTnVtYmVyKSB7XHJcbiAgICAgICAgICAgIGlmIChzZXF1ZW5jZU51bWJlciA8PSB1cHBlckJvdW5kKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcCA9IF90aGlzLmlzUGlubmVkKHR4biwgZG9jS2V5KS5uZXh0KGZ1bmN0aW9uIChpc1Bpbm5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghaXNQaW5uZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnRDb3VudCsrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBPdXIgc2l6ZSBhY2NvdW50aW5nIHJlcXVpcmVzIHVzIHRvIHJlYWQgYWxsIGRvY3VtZW50cyBiZWZvcmVcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVtb3ZpbmcgdGhlbS5cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNoYW5nZUJ1ZmZlci5nZXRFbnRyeSh0eG4sIGRvY0tleSkubmV4dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VCdWZmZXIucmVtb3ZlRW50cnkoZG9jS2V5KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkb2N1bWVudFRhcmdldFN0b3JlKHR4bikuZGVsZXRlKHNlbnRpbmVsS2V5JDEoZG9jS2V5KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgcHJvbWlzZXMucHVzaChwKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBpdGVyYXRpb25cclxuICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKCkgeyByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLndhaXRGb3IocHJvbWlzZXMpOyB9KVxyXG4gICAgICAgICAgICAubmV4dChmdW5jdGlvbiAoKSB7IHJldHVybiBjaGFuZ2VCdWZmZXIuYXBwbHkodHhuKTsgfSlcclxuICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKCkgeyByZXR1cm4gZG9jdW1lbnRDb3VudDsgfSk7XHJcbiAgICB9O1xyXG4gICAgSW5kZXhlZERiTHJ1RGVsZWdhdGUucHJvdG90eXBlLnJlbW92ZVRhcmdldCA9IGZ1bmN0aW9uICh0eG4sIHRhcmdldERhdGEpIHtcclxuICAgICAgICB2YXIgdXBkYXRlZCA9IHRhcmdldERhdGEud2l0aFNlcXVlbmNlTnVtYmVyKHR4bi5jdXJyZW50U2VxdWVuY2VOdW1iZXIpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRiLmdldFRhcmdldENhY2hlKCkudXBkYXRlVGFyZ2V0RGF0YSh0eG4sIHVwZGF0ZWQpO1xyXG4gICAgfTtcclxuICAgIEluZGV4ZWREYkxydURlbGVnYXRlLnByb3RvdHlwZS51cGRhdGVMaW1ib0RvY3VtZW50ID0gZnVuY3Rpb24gKHR4biwga2V5KSB7XHJcbiAgICAgICAgcmV0dXJuIHdyaXRlU2VudGluZWxLZXkodHhuLCBrZXkpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQ2FsbCBwcm92aWRlZCBmdW5jdGlvbiBmb3IgZWFjaCBkb2N1bWVudCBpbiB0aGUgY2FjaGUgdGhhdCBpcyAnb3JwaGFuZWQnLiBPcnBoYW5lZFxyXG4gICAgICogbWVhbnMgbm90IGEgcGFydCBvZiBhbnkgdGFyZ2V0LCBzbyB0aGUgb25seSBlbnRyeSBpbiB0aGUgdGFyZ2V0LWRvY3VtZW50IGluZGV4IGZvclxyXG4gICAgICogdGhhdCBkb2N1bWVudCB3aWxsIGJlIHRoZSBzZW50aW5lbCByb3cgKHRhcmdldElkIDApLCB3aGljaCB3aWxsIGFsc28gaGF2ZSB0aGUgc2VxdWVuY2VcclxuICAgICAqIG51bWJlciBmb3IgdGhlIGxhc3QgdGltZSB0aGUgZG9jdW1lbnQgd2FzIGFjY2Vzc2VkLlxyXG4gICAgICovXHJcbiAgICBJbmRleGVkRGJMcnVEZWxlZ2F0ZS5wcm90b3R5cGUuZm9yRWFjaE9ycGhhbmVkRG9jdW1lbnQgPSBmdW5jdGlvbiAodHhuLCBmKSB7XHJcbiAgICAgICAgdmFyIHN0b3JlID0gZG9jdW1lbnRUYXJnZXRTdG9yZSh0eG4pO1xyXG4gICAgICAgIHZhciBuZXh0VG9SZXBvcnQgPSBMaXN0ZW5TZXF1ZW5jZS5JTlZBTElEO1xyXG4gICAgICAgIHZhciBuZXh0UGF0aDtcclxuICAgICAgICByZXR1cm4gc3RvcmVcclxuICAgICAgICAgICAgLml0ZXJhdGUoe1xyXG4gICAgICAgICAgICBpbmRleDogRGJUYXJnZXREb2N1bWVudC5kb2N1bWVudFRhcmdldHNJbmRleFxyXG4gICAgICAgIH0sIGZ1bmN0aW9uIChfYSwgX2IpIHtcclxuICAgICAgICAgICAgdmFyIHRhcmdldElkID0gX2FbMF0sIGRvY0tleSA9IF9hWzFdO1xyXG4gICAgICAgICAgICB2YXIgcGF0aCA9IF9iLnBhdGgsIHNlcXVlbmNlTnVtYmVyID0gX2Iuc2VxdWVuY2VOdW1iZXI7XHJcbiAgICAgICAgICAgIGlmICh0YXJnZXRJZCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgLy8gaWYgbmV4dFRvUmVwb3J0IGlzIHZhbGlkLCByZXBvcnQgaXQsIHRoaXMgaXMgYSBuZXcga2V5IHNvIHRoZVxyXG4gICAgICAgICAgICAgICAgLy8gbGFzdCBvbmUgbXVzdCBub3QgYmUgYSBtZW1iZXIgb2YgYW55IHRhcmdldHMuXHJcbiAgICAgICAgICAgICAgICBpZiAobmV4dFRvUmVwb3J0ICE9PSBMaXN0ZW5TZXF1ZW5jZS5JTlZBTElEKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZihuZXcgRG9jdW1lbnRLZXkoZGVjb2RlKG5leHRQYXRoKSksIG5leHRUb1JlcG9ydCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBzZXQgbmV4dFRvUmVwb3J0IHRvIGJlIHRoaXMgc2VxdWVuY2UgbnVtYmVyLiBJdCdzIHRoZSBuZXh0IG9uZSB3ZVxyXG4gICAgICAgICAgICAgICAgLy8gbWlnaHQgcmVwb3J0LCBpZiB3ZSBkb24ndCBmaW5kIGFueSB0YXJnZXRzIGZvciB0aGlzIGRvY3VtZW50LlxyXG4gICAgICAgICAgICAgICAgLy8gTm90ZSB0aGF0IHRoZSBzZXF1ZW5jZSBudW1iZXIgbXVzdCBiZSBkZWZpbmVkIHdoZW4gdGhlIHRhcmdldElkXHJcbiAgICAgICAgICAgICAgICAvLyBpcyAwLlxyXG4gICAgICAgICAgICAgICAgbmV4dFRvUmVwb3J0ID0gc2VxdWVuY2VOdW1iZXI7XHJcbiAgICAgICAgICAgICAgICBuZXh0UGF0aCA9IHBhdGg7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBzZXQgbmV4dFRvUmVwb3J0IHRvIGJlIGludmFsaWQsIHdlIGtub3cgd2UgZG9uJ3QgbmVlZCB0byByZXBvcnRcclxuICAgICAgICAgICAgICAgIC8vIHRoaXMgb25lIHNpbmNlIHdlIGZvdW5kIGEgdGFyZ2V0IGZvciBpdC5cclxuICAgICAgICAgICAgICAgIG5leHRUb1JlcG9ydCA9IExpc3RlblNlcXVlbmNlLklOVkFMSUQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAubmV4dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIC8vIFNpbmNlIHdlIHJlcG9ydCBzZXF1ZW5jZSBudW1iZXJzIGFmdGVyIGdldHRpbmcgdG8gdGhlIG5leHQga2V5LCB3ZVxyXG4gICAgICAgICAgICAvLyBuZWVkIHRvIGNoZWNrIGlmIHRoZSBsYXN0IGtleSB3ZSBpdGVyYXRlZCBvdmVyIHdhcyBhbiBvcnBoYW5lZFxyXG4gICAgICAgICAgICAvLyBkb2N1bWVudCBhbmQgcmVwb3J0IGl0LlxyXG4gICAgICAgICAgICBpZiAobmV4dFRvUmVwb3J0ICE9PSBMaXN0ZW5TZXF1ZW5jZS5JTlZBTElEKSB7XHJcbiAgICAgICAgICAgICAgICBmKG5ldyBEb2N1bWVudEtleShkZWNvZGUobmV4dFBhdGgpKSwgbmV4dFRvUmVwb3J0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIEluZGV4ZWREYkxydURlbGVnYXRlLnByb3RvdHlwZS5nZXRDYWNoZVNpemUgPSBmdW5jdGlvbiAodHhuKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGIuZ2V0UmVtb3RlRG9jdW1lbnRDYWNoZSgpLmdldFNpemUodHhuKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gSW5kZXhlZERiTHJ1RGVsZWdhdGU7XHJcbn0oKSk7XHJcbmZ1bmN0aW9uIHNlbnRpbmVsS2V5JDEoa2V5KSB7XHJcbiAgICByZXR1cm4gWzAsIGVuY29kZShrZXkucGF0aCldO1xyXG59XHJcbi8qKlxyXG4gKiBAcmV0dXJuIEEgdmFsdWUgc3VpdGFibGUgZm9yIHdyaXRpbmcgYSBzZW50aW5lbCByb3cgaW4gdGhlIHRhcmdldC1kb2N1bWVudFxyXG4gKiBzdG9yZS5cclxuICovXHJcbmZ1bmN0aW9uIHNlbnRpbmVsUm93KGtleSwgc2VxdWVuY2VOdW1iZXIpIHtcclxuICAgIHJldHVybiBuZXcgRGJUYXJnZXREb2N1bWVudCgwLCBlbmNvZGUoa2V5LnBhdGgpLCBzZXF1ZW5jZU51bWJlcik7XHJcbn1cclxuZnVuY3Rpb24gd3JpdGVTZW50aW5lbEtleSh0eG4sIGtleSkge1xyXG4gICAgcmV0dXJuIGRvY3VtZW50VGFyZ2V0U3RvcmUodHhuKS5wdXQoc2VudGluZWxSb3coa2V5LCB0eG4uY3VycmVudFNlcXVlbmNlTnVtYmVyKSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8vIFVudHlwZWQgTnVtYmVyIGFsaWFzIHdlIGNhbiB1c2UgdG8gY2hlY2sgZm9yIEVTNiBtZXRob2RzIC8gcHJvcGVydGllcy5cclxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxudmFyIE51bWJlckFzQW55ID0gTnVtYmVyO1xyXG4vKipcclxuICogTWluaW11bSBzYWZlIGludGVnZXIgaW4gSmF2YXNjcmlwdCBiZWNhdXNlIG9mIGZsb2F0aW5nIHBvaW50IHByZWNpc2lvbi5cclxuICogQWRkZWQgdG8gbm90IHJlbHkgb24gRVM2IGZlYXR1cmVzLlxyXG4gKi9cclxudmFyIE1JTl9TQUZFX0lOVEVHRVIgPSBOdW1iZXJBc0FueS5NSU5fU0FGRV9JTlRFR0VSIHx8IC0oTWF0aC5wb3coMiwgNTMpIC0gMSk7XHJcbi8qKlxyXG4gKiBNYXhpbXVtIHNhZmUgaW50ZWdlciBpbiBKYXZhc2NyaXB0IGJlY2F1c2Ugb2YgZmxvYXRpbmcgcG9pbnQgcHJlY2lzaW9uLlxyXG4gKiBBZGRlZCB0byBub3QgcmVseSBvbiBFUzYgZmVhdHVyZXMuXHJcbiAqL1xyXG52YXIgTUFYX1NBRkVfSU5URUdFUiA9IE51bWJlckFzQW55Lk1BWF9TQUZFX0lOVEVHRVIgfHwgTWF0aC5wb3coMiwgNTMpIC0gMTtcclxuLyoqXHJcbiAqIFJldHVybnMgd2hldGhlciBhbiBudW1iZXIgaXMgYW4gaW50ZWdlciwgdXNlcyBuYXRpdmUgaW1wbGVtZW50YXRpb24gaWZcclxuICogYXZhaWxhYmxlLlxyXG4gKiBBZGRlZCB0byBub3QgcmVseSBvbiBFUzYgZmVhdHVyZXMuXHJcbiAqIEBwYXJhbSB2YWx1ZSBUaGUgdmFsdWUgdG8gdGVzdCBmb3IgYmVpbmcgYW4gaW50ZWdlclxyXG4gKi9cclxudmFyIGlzSW50ZWdlciA9IE51bWJlckFzQW55LmlzSW50ZWdlciB8fFxyXG4gICAgKGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInICYmXHJcbiAgICAgICAgICAgIGlzRmluaXRlKHZhbHVlKSAmJlxyXG4gICAgICAgICAgICBNYXRoLmZsb29yKHZhbHVlKSA9PT0gdmFsdWU7XHJcbiAgICB9KTtcclxuLyoqXHJcbiAqIFJldHVybnMgd2hldGhlciBhIHZhcmlhYmxlIGlzIGVpdGhlciB1bmRlZmluZWQgb3IgbnVsbC5cclxuICovXHJcbmZ1bmN0aW9uIGlzTnVsbE9yVW5kZWZpbmVkKHZhbHVlKSB7XHJcbiAgICByZXR1cm4gdmFsdWUgPT09IG51bGwgfHwgdmFsdWUgPT09IHVuZGVmaW5lZDtcclxufVxyXG4vKipcclxuICogUmV0dXJucyB3aGV0aGVyIGEgdmFsdWUgaXMgYW4gaW50ZWdlciBhbmQgaW4gdGhlIHNhZmUgaW50ZWdlciByYW5nZVxyXG4gKiBAcGFyYW0gdmFsdWUgVGhlIHZhbHVlIHRvIHRlc3QgZm9yIGJlaW5nIGFuIGludGVnZXIgYW5kIGluIHRoZSBzYWZlIHJhbmdlXHJcbiAqL1xyXG5mdW5jdGlvbiBpc1NhZmVJbnRlZ2VyKHZhbHVlKSB7XHJcbiAgICByZXR1cm4gKGlzSW50ZWdlcih2YWx1ZSkgJiZcclxuICAgICAgICB2YWx1ZSA8PSBNQVhfU0FGRV9JTlRFR0VSICYmXHJcbiAgICAgICAgdmFsdWUgPj0gTUlOX1NBRkVfSU5URUdFUik7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBBIFRhcmdldCByZXByZXNlbnRzIHRoZSBXYXRjaFRhcmdldCByZXByZXNlbnRhdGlvbiBvZiBhIFF1ZXJ5LCB3aGljaCBpcyB1c2VkXHJcbiAqIGJ5IHRoZSBMb2NhbFN0b3JlIGFuZCB0aGUgUmVtb3RlU3RvcmUgdG8ga2VlcCB0cmFjayBvZiBhbmQgdG8gZXhlY3V0ZVxyXG4gKiBiYWNrZW5kIHF1ZXJpZXMuIFdoaWxlIGEgUXVlcnkgY2FuIHJlcHJlc2VudCBtdWx0aXBsZSBUYXJnZXRzLCBlYWNoIFRhcmdldHNcclxuICogbWFwcyB0byBhIHNpbmdsZSBXYXRjaFRhcmdldCBpbiBSZW1vdGVTdG9yZSBhbmQgYSBzaW5nbGUgVGFyZ2V0RGF0YSBlbnRyeVxyXG4gKiBpbiBwZXJzaXN0ZW5jZS5cclxuICovXHJcbnZhciBUYXJnZXQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICAvKipcclxuICAgICAqIEluaXRpYWxpemVzIGEgVGFyZ2V0IHdpdGggYSBwYXRoIGFuZCBvcHRpb25hbCBhZGRpdGlvbmFsIHF1ZXJ5IGNvbnN0cmFpbnRzLlxyXG4gICAgICogUGF0aCBtdXN0IGN1cnJlbnRseSBiZSBlbXB0eSBpZiB0aGlzIGlzIGEgY29sbGVjdGlvbiBncm91cCBxdWVyeS5cclxuICAgICAqXHJcbiAgICAgKiBOT1RFOiB5b3Ugc2hvdWxkIGFsd2F5cyBjb25zdHJ1Y3QgYFRhcmdldGAgZnJvbSBgUXVlcnkudG9UYXJnZXRgIGluc3RlYWQgb2ZcclxuICAgICAqIHVzaW5nIHRoaXMgY29uc3RydWN0b3IsIGJlY2F1c2UgYFF1ZXJ5YCBwcm92aWRlcyBhbiBpbXBsaWNpdCBgb3JkZXJCeWBcclxuICAgICAqIHByb3BlcnR5LlxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBUYXJnZXQocGF0aCwgY29sbGVjdGlvbkdyb3VwLCBvcmRlckJ5LCBmaWx0ZXJzLCBsaW1pdCwgc3RhcnRBdCwgZW5kQXQpIHtcclxuICAgICAgICBpZiAoY29sbGVjdGlvbkdyb3VwID09PSB2b2lkIDApIHsgY29sbGVjdGlvbkdyb3VwID0gbnVsbDsgfVxyXG4gICAgICAgIGlmIChvcmRlckJ5ID09PSB2b2lkIDApIHsgb3JkZXJCeSA9IFtdOyB9XHJcbiAgICAgICAgaWYgKGZpbHRlcnMgPT09IHZvaWQgMCkgeyBmaWx0ZXJzID0gW107IH1cclxuICAgICAgICBpZiAobGltaXQgPT09IHZvaWQgMCkgeyBsaW1pdCA9IG51bGw7IH1cclxuICAgICAgICBpZiAoc3RhcnRBdCA9PT0gdm9pZCAwKSB7IHN0YXJ0QXQgPSBudWxsOyB9XHJcbiAgICAgICAgaWYgKGVuZEF0ID09PSB2b2lkIDApIHsgZW5kQXQgPSBudWxsOyB9XHJcbiAgICAgICAgdGhpcy5wYXRoID0gcGF0aDtcclxuICAgICAgICB0aGlzLmNvbGxlY3Rpb25Hcm91cCA9IGNvbGxlY3Rpb25Hcm91cDtcclxuICAgICAgICB0aGlzLm9yZGVyQnkgPSBvcmRlckJ5O1xyXG4gICAgICAgIHRoaXMuZmlsdGVycyA9IGZpbHRlcnM7XHJcbiAgICAgICAgdGhpcy5saW1pdCA9IGxpbWl0O1xyXG4gICAgICAgIHRoaXMuc3RhcnRBdCA9IHN0YXJ0QXQ7XHJcbiAgICAgICAgdGhpcy5lbmRBdCA9IGVuZEF0O1xyXG4gICAgICAgIHRoaXMubWVtb2l6ZWRDYW5vbmljYWxJZCA9IG51bGw7XHJcbiAgICB9XHJcbiAgICBUYXJnZXQucHJvdG90eXBlLmNhbm9uaWNhbElkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICh0aGlzLm1lbW9pemVkQ2Fub25pY2FsSWQgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgdmFyIGNhbm9uaWNhbElkID0gdGhpcy5wYXRoLmNhbm9uaWNhbFN0cmluZygpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5jb2xsZWN0aW9uR3JvdXAgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIGNhbm9uaWNhbElkICs9ICd8Y2c6JyArIHRoaXMuY29sbGVjdGlvbkdyb3VwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhbm9uaWNhbElkICs9ICd8ZjonO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gdGhpcy5maWx0ZXJzOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGZpbHRlciA9IF9hW19pXTtcclxuICAgICAgICAgICAgICAgIGNhbm9uaWNhbElkICs9IGZpbHRlci5jYW5vbmljYWxJZCgpO1xyXG4gICAgICAgICAgICAgICAgY2Fub25pY2FsSWQgKz0gJywnO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhbm9uaWNhbElkICs9ICd8b2I6JztcclxuICAgICAgICAgICAgLy8gVE9ETyhkaW1vbmQpOiBtYWtlIHRoaXMgY29sbGlzaW9uIHJlc2lzdGFudFxyXG4gICAgICAgICAgICBmb3IgKHZhciBfYiA9IDAsIF9jID0gdGhpcy5vcmRlckJ5OyBfYiA8IF9jLmxlbmd0aDsgX2IrKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIG9yZGVyQnkgPSBfY1tfYl07XHJcbiAgICAgICAgICAgICAgICBjYW5vbmljYWxJZCArPSBvcmRlckJ5LmNhbm9uaWNhbElkKCk7XHJcbiAgICAgICAgICAgICAgICBjYW5vbmljYWxJZCArPSAnLCc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKCFpc051bGxPclVuZGVmaW5lZCh0aGlzLmxpbWl0KSkge1xyXG4gICAgICAgICAgICAgICAgY2Fub25pY2FsSWQgKz0gJ3xsOic7XHJcbiAgICAgICAgICAgICAgICBjYW5vbmljYWxJZCArPSB0aGlzLmxpbWl0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnN0YXJ0QXQpIHtcclxuICAgICAgICAgICAgICAgIGNhbm9uaWNhbElkICs9ICd8bGI6JztcclxuICAgICAgICAgICAgICAgIGNhbm9uaWNhbElkICs9IHRoaXMuc3RhcnRBdC5jYW5vbmljYWxJZCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmVuZEF0KSB7XHJcbiAgICAgICAgICAgICAgICBjYW5vbmljYWxJZCArPSAnfHViOic7XHJcbiAgICAgICAgICAgICAgICBjYW5vbmljYWxJZCArPSB0aGlzLmVuZEF0LmNhbm9uaWNhbElkKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5tZW1vaXplZENhbm9uaWNhbElkID0gY2Fub25pY2FsSWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLm1lbW9pemVkQ2Fub25pY2FsSWQ7XHJcbiAgICB9O1xyXG4gICAgVGFyZ2V0LnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgc3RyID0gdGhpcy5wYXRoLmNhbm9uaWNhbFN0cmluZygpO1xyXG4gICAgICAgIGlmICh0aGlzLmNvbGxlY3Rpb25Hcm91cCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBzdHIgKz0gJyBjb2xsZWN0aW9uR3JvdXA9JyArIHRoaXMuY29sbGVjdGlvbkdyb3VwO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5maWx0ZXJzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgc3RyICs9IFwiLCBmaWx0ZXJzOiBbXCIgKyB0aGlzLmZpbHRlcnMuam9pbignLCAnKSArIFwiXVwiO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIWlzTnVsbE9yVW5kZWZpbmVkKHRoaXMubGltaXQpKSB7XHJcbiAgICAgICAgICAgIHN0ciArPSAnLCBsaW1pdDogJyArIHRoaXMubGltaXQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLm9yZGVyQnkubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBzdHIgKz0gXCIsIG9yZGVyQnk6IFtcIiArIHRoaXMub3JkZXJCeS5qb2luKCcsICcpICsgXCJdXCI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLnN0YXJ0QXQpIHtcclxuICAgICAgICAgICAgc3RyICs9ICcsIHN0YXJ0QXQ6ICcgKyB0aGlzLnN0YXJ0QXQuY2Fub25pY2FsSWQoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuZW5kQXQpIHtcclxuICAgICAgICAgICAgc3RyICs9ICcsIGVuZEF0OiAnICsgdGhpcy5lbmRBdC5jYW5vbmljYWxJZCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gXCJUYXJnZXQoXCIgKyBzdHIgKyBcIilcIjtcclxuICAgIH07XHJcbiAgICBUYXJnZXQucHJvdG90eXBlLmlzRXF1YWwgPSBmdW5jdGlvbiAob3RoZXIpIHtcclxuICAgICAgICBpZiAodGhpcy5saW1pdCAhPT0gb3RoZXIubGltaXQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5vcmRlckJ5Lmxlbmd0aCAhPT0gb3RoZXIub3JkZXJCeS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMub3JkZXJCeS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMub3JkZXJCeVtpXS5pc0VxdWFsKG90aGVyLm9yZGVyQnlbaV0pKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuZmlsdGVycy5sZW5ndGggIT09IG90aGVyLmZpbHRlcnMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmZpbHRlcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLmZpbHRlcnNbaV0uaXNFcXVhbChvdGhlci5maWx0ZXJzW2ldKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmNvbGxlY3Rpb25Hcm91cCAhPT0gb3RoZXIuY29sbGVjdGlvbkdyb3VwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCF0aGlzLnBhdGguaXNFcXVhbChvdGhlci5wYXRoKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLnN0YXJ0QXQgIT09IG51bGxcclxuICAgICAgICAgICAgPyAhdGhpcy5zdGFydEF0LmlzRXF1YWwob3RoZXIuc3RhcnRBdClcclxuICAgICAgICAgICAgOiBvdGhlci5zdGFydEF0ICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5kQXQgIT09IG51bGxcclxuICAgICAgICAgICAgPyB0aGlzLmVuZEF0LmlzRXF1YWwob3RoZXIuZW5kQXQpXHJcbiAgICAgICAgICAgIDogb3RoZXIuZW5kQXQgPT09IG51bGw7XHJcbiAgICB9O1xyXG4gICAgVGFyZ2V0LnByb3RvdHlwZS5pc0RvY3VtZW50UXVlcnkgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIChEb2N1bWVudEtleS5pc0RvY3VtZW50S2V5KHRoaXMucGF0aCkgJiZcclxuICAgICAgICAgICAgdGhpcy5jb2xsZWN0aW9uR3JvdXAgPT09IG51bGwgJiZcclxuICAgICAgICAgICAgdGhpcy5maWx0ZXJzLmxlbmd0aCA9PT0gMCk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFRhcmdldDtcclxufSgpKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnZhciBMaW1pdFR5cGU7XHJcbihmdW5jdGlvbiAoTGltaXRUeXBlKSB7XHJcbiAgICBMaW1pdFR5cGVbXCJGaXJzdFwiXSA9IFwiRlwiO1xyXG4gICAgTGltaXRUeXBlW1wiTGFzdFwiXSA9IFwiTFwiO1xyXG59KShMaW1pdFR5cGUgfHwgKExpbWl0VHlwZSA9IHt9KSk7XHJcbi8qKlxyXG4gKiBRdWVyeSBlbmNhcHN1bGF0ZXMgYWxsIHRoZSBxdWVyeSBhdHRyaWJ1dGVzIHdlIHN1cHBvcnQgaW4gdGhlIFNESy4gSXQgY2FuXHJcbiAqIGJlIHJ1biBhZ2FpbnN0IHRoZSBMb2NhbFN0b3JlLCBhcyB3ZWxsIGFzIGJlIGNvbnZlcnRlZCB0byBhIGBUYXJnZXRgIHRvXHJcbiAqIHF1ZXJ5IHRoZSBSZW1vdGVTdG9yZSByZXN1bHRzLlxyXG4gKi9cclxudmFyIFF1ZXJ5ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgLyoqXHJcbiAgICAgKiBJbml0aWFsaXplcyBhIFF1ZXJ5IHdpdGggYSBwYXRoIGFuZCBvcHRpb25hbCBhZGRpdGlvbmFsIHF1ZXJ5IGNvbnN0cmFpbnRzLlxyXG4gICAgICogUGF0aCBtdXN0IGN1cnJlbnRseSBiZSBlbXB0eSBpZiB0aGlzIGlzIGEgY29sbGVjdGlvbiBncm91cCBxdWVyeS5cclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gUXVlcnkocGF0aCwgY29sbGVjdGlvbkdyb3VwLCBleHBsaWNpdE9yZGVyQnksIGZpbHRlcnMsIGxpbWl0LCBsaW1pdFR5cGUsIHN0YXJ0QXQsIGVuZEF0KSB7XHJcbiAgICAgICAgaWYgKGNvbGxlY3Rpb25Hcm91cCA9PT0gdm9pZCAwKSB7IGNvbGxlY3Rpb25Hcm91cCA9IG51bGw7IH1cclxuICAgICAgICBpZiAoZXhwbGljaXRPcmRlckJ5ID09PSB2b2lkIDApIHsgZXhwbGljaXRPcmRlckJ5ID0gW107IH1cclxuICAgICAgICBpZiAoZmlsdGVycyA9PT0gdm9pZCAwKSB7IGZpbHRlcnMgPSBbXTsgfVxyXG4gICAgICAgIGlmIChsaW1pdCA9PT0gdm9pZCAwKSB7IGxpbWl0ID0gbnVsbDsgfVxyXG4gICAgICAgIGlmIChsaW1pdFR5cGUgPT09IHZvaWQgMCkgeyBsaW1pdFR5cGUgPSBMaW1pdFR5cGUuRmlyc3Q7IH1cclxuICAgICAgICBpZiAoc3RhcnRBdCA9PT0gdm9pZCAwKSB7IHN0YXJ0QXQgPSBudWxsOyB9XHJcbiAgICAgICAgaWYgKGVuZEF0ID09PSB2b2lkIDApIHsgZW5kQXQgPSBudWxsOyB9XHJcbiAgICAgICAgdGhpcy5wYXRoID0gcGF0aDtcclxuICAgICAgICB0aGlzLmNvbGxlY3Rpb25Hcm91cCA9IGNvbGxlY3Rpb25Hcm91cDtcclxuICAgICAgICB0aGlzLmV4cGxpY2l0T3JkZXJCeSA9IGV4cGxpY2l0T3JkZXJCeTtcclxuICAgICAgICB0aGlzLmZpbHRlcnMgPSBmaWx0ZXJzO1xyXG4gICAgICAgIHRoaXMubGltaXQgPSBsaW1pdDtcclxuICAgICAgICB0aGlzLmxpbWl0VHlwZSA9IGxpbWl0VHlwZTtcclxuICAgICAgICB0aGlzLnN0YXJ0QXQgPSBzdGFydEF0O1xyXG4gICAgICAgIHRoaXMuZW5kQXQgPSBlbmRBdDtcclxuICAgICAgICB0aGlzLm1lbW9pemVkT3JkZXJCeSA9IG51bGw7XHJcbiAgICAgICAgLy8gVGhlIGNvcnJlc3BvbmRpbmcgYFRhcmdldGAgb2YgdGhpcyBgUXVlcnlgIGluc3RhbmNlLlxyXG4gICAgICAgIHRoaXMubWVtb2l6ZWRUYXJnZXQgPSBudWxsO1xyXG4gICAgICAgIGlmICh0aGlzLnN0YXJ0QXQpIHtcclxuICAgICAgICAgICAgdGhpcy5hc3NlcnRWYWxpZEJvdW5kKHRoaXMuc3RhcnRBdCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmVuZEF0KSB7XHJcbiAgICAgICAgICAgIHRoaXMuYXNzZXJ0VmFsaWRCb3VuZCh0aGlzLmVuZEF0KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBRdWVyeS5hdFBhdGggPSBmdW5jdGlvbiAocGF0aCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgUXVlcnkocGF0aCk7XHJcbiAgICB9O1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFF1ZXJ5LnByb3RvdHlwZSwgXCJvcmRlckJ5XCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMubWVtb2l6ZWRPcmRlckJ5ID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgaW5lcXVhbGl0eUZpZWxkID0gdGhpcy5nZXRJbmVxdWFsaXR5RmlsdGVyRmllbGQoKTtcclxuICAgICAgICAgICAgICAgIHZhciBmaXJzdE9yZGVyQnlGaWVsZCA9IHRoaXMuZ2V0Rmlyc3RPcmRlckJ5RmllbGQoKTtcclxuICAgICAgICAgICAgICAgIGlmIChpbmVxdWFsaXR5RmllbGQgIT09IG51bGwgJiYgZmlyc3RPcmRlckJ5RmllbGQgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBJbiBvcmRlciB0byBpbXBsaWNpdGx5IGFkZCBrZXkgb3JkZXJpbmcsIHdlIG11c3QgYWxzbyBhZGQgdGhlXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gaW5lcXVhbGl0eSBmaWx0ZXIgZmllbGQgZm9yIGl0IHRvIGJlIGEgdmFsaWQgcXVlcnkuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gTm90ZSB0aGF0IHRoZSBkZWZhdWx0IGluZXF1YWxpdHkgZmllbGQgYW5kIGtleSBvcmRlcmluZyBpcyBhc2NlbmRpbmcuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGluZXF1YWxpdHlGaWVsZC5pc0tleUZpZWxkKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tZW1vaXplZE9yZGVyQnkgPSBbS0VZX09SREVSSU5HX0FTQ107XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1lbW9pemVkT3JkZXJCeSA9IFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBPcmRlckJ5KGluZXF1YWxpdHlGaWVsZCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBLRVlfT1JERVJJTkdfQVNDXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXNzZXJ0KGluZXF1YWxpdHlGaWVsZCA9PT0gbnVsbCB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAoZmlyc3RPcmRlckJ5RmllbGQgIT09IG51bGwgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZXF1YWxpdHlGaWVsZC5pc0VxdWFsKGZpcnN0T3JkZXJCeUZpZWxkKSksICdGaXJzdCBvcmRlckJ5IHNob3VsZCBtYXRjaCBpbmVxdWFsaXR5IGZpZWxkLicpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubWVtb2l6ZWRPcmRlckJ5ID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGZvdW5kS2V5T3JkZXJpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gdGhpcy5leHBsaWNpdE9yZGVyQnk7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvcmRlckJ5ID0gX2FbX2ldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1lbW9pemVkT3JkZXJCeS5wdXNoKG9yZGVyQnkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob3JkZXJCeS5maWVsZC5pc0tleUZpZWxkKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvdW5kS2V5T3JkZXJpbmcgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghZm91bmRLZXlPcmRlcmluZykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGUgb3JkZXIgb2YgdGhlIGltcGxpY2l0IGtleSBvcmRlcmluZyBhbHdheXMgbWF0Y2hlcyB0aGUgbGFzdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBleHBsaWNpdCBvcmRlciBieVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbGFzdERpcmVjdGlvbiA9IHRoaXMuZXhwbGljaXRPcmRlckJ5Lmxlbmd0aCA+IDBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gdGhpcy5leHBsaWNpdE9yZGVyQnlbdGhpcy5leHBsaWNpdE9yZGVyQnkubGVuZ3RoIC0gMV0uZGlyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IERpcmVjdGlvbi5BU0NFTkRJTkc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWVtb2l6ZWRPcmRlckJ5LnB1c2gobGFzdERpcmVjdGlvbiA9PT0gRGlyZWN0aW9uLkFTQ0VORElOR1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBLRVlfT1JERVJJTkdfQVNDXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IEtFWV9PUkRFUklOR19ERVNDKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubWVtb2l6ZWRPcmRlckJ5O1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgUXVlcnkucHJvdG90eXBlLmFkZEZpbHRlciA9IGZ1bmN0aW9uIChmaWx0ZXIpIHtcclxuICAgICAgICBhc3NlcnQodGhpcy5nZXRJbmVxdWFsaXR5RmlsdGVyRmllbGQoKSA9PSBudWxsIHx8XHJcbiAgICAgICAgICAgICEoZmlsdGVyIGluc3RhbmNlb2YgRmllbGRGaWx0ZXIpIHx8XHJcbiAgICAgICAgICAgICFmaWx0ZXIuaXNJbmVxdWFsaXR5KCkgfHxcclxuICAgICAgICAgICAgZmlsdGVyLmZpZWxkLmlzRXF1YWwodGhpcy5nZXRJbmVxdWFsaXR5RmlsdGVyRmllbGQoKSksICdRdWVyeSBtdXN0IG9ubHkgaGF2ZSBvbmUgaW5lcXVhbGl0eSBmaWVsZC4nKTtcclxuICAgICAgICBhc3NlcnQoIXRoaXMuaXNEb2N1bWVudFF1ZXJ5KCksICdObyBmaWx0ZXJpbmcgYWxsb3dlZCBmb3IgZG9jdW1lbnQgcXVlcnknKTtcclxuICAgICAgICB2YXIgbmV3RmlsdGVycyA9IHRoaXMuZmlsdGVycy5jb25jYXQoW2ZpbHRlcl0pO1xyXG4gICAgICAgIHJldHVybiBuZXcgUXVlcnkodGhpcy5wYXRoLCB0aGlzLmNvbGxlY3Rpb25Hcm91cCwgdGhpcy5leHBsaWNpdE9yZGVyQnkuc2xpY2UoKSwgbmV3RmlsdGVycywgdGhpcy5saW1pdCwgdGhpcy5saW1pdFR5cGUsIHRoaXMuc3RhcnRBdCwgdGhpcy5lbmRBdCk7XHJcbiAgICB9O1xyXG4gICAgUXVlcnkucHJvdG90eXBlLmFkZE9yZGVyQnkgPSBmdW5jdGlvbiAob3JkZXJCeSkge1xyXG4gICAgICAgIGFzc2VydCghdGhpcy5zdGFydEF0ICYmICF0aGlzLmVuZEF0LCAnQm91bmRzIG11c3QgYmUgc2V0IGFmdGVyIG9yZGVyQnknKTtcclxuICAgICAgICAvLyBUT0RPKGRpbW9uZCk6IHZhbGlkYXRlIHRoYXQgb3JkZXJCeSBkb2VzIG5vdCBsaXN0IHRoZSBzYW1lIGtleSB0d2ljZS5cclxuICAgICAgICB2YXIgbmV3T3JkZXJCeSA9IHRoaXMuZXhwbGljaXRPcmRlckJ5LmNvbmNhdChbb3JkZXJCeV0pO1xyXG4gICAgICAgIHJldHVybiBuZXcgUXVlcnkodGhpcy5wYXRoLCB0aGlzLmNvbGxlY3Rpb25Hcm91cCwgbmV3T3JkZXJCeSwgdGhpcy5maWx0ZXJzLnNsaWNlKCksIHRoaXMubGltaXQsIHRoaXMubGltaXRUeXBlLCB0aGlzLnN0YXJ0QXQsIHRoaXMuZW5kQXQpO1xyXG4gICAgfTtcclxuICAgIFF1ZXJ5LnByb3RvdHlwZS53aXRoTGltaXRUb0ZpcnN0ID0gZnVuY3Rpb24gKGxpbWl0KSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBRdWVyeSh0aGlzLnBhdGgsIHRoaXMuY29sbGVjdGlvbkdyb3VwLCB0aGlzLmV4cGxpY2l0T3JkZXJCeS5zbGljZSgpLCB0aGlzLmZpbHRlcnMuc2xpY2UoKSwgbGltaXQsIExpbWl0VHlwZS5GaXJzdCwgdGhpcy5zdGFydEF0LCB0aGlzLmVuZEF0KTtcclxuICAgIH07XHJcbiAgICBRdWVyeS5wcm90b3R5cGUud2l0aExpbWl0VG9MYXN0ID0gZnVuY3Rpb24gKGxpbWl0KSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBRdWVyeSh0aGlzLnBhdGgsIHRoaXMuY29sbGVjdGlvbkdyb3VwLCB0aGlzLmV4cGxpY2l0T3JkZXJCeS5zbGljZSgpLCB0aGlzLmZpbHRlcnMuc2xpY2UoKSwgbGltaXQsIExpbWl0VHlwZS5MYXN0LCB0aGlzLnN0YXJ0QXQsIHRoaXMuZW5kQXQpO1xyXG4gICAgfTtcclxuICAgIFF1ZXJ5LnByb3RvdHlwZS53aXRoU3RhcnRBdCA9IGZ1bmN0aW9uIChib3VuZCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgUXVlcnkodGhpcy5wYXRoLCB0aGlzLmNvbGxlY3Rpb25Hcm91cCwgdGhpcy5leHBsaWNpdE9yZGVyQnkuc2xpY2UoKSwgdGhpcy5maWx0ZXJzLnNsaWNlKCksIHRoaXMubGltaXQsIHRoaXMubGltaXRUeXBlLCBib3VuZCwgdGhpcy5lbmRBdCk7XHJcbiAgICB9O1xyXG4gICAgUXVlcnkucHJvdG90eXBlLndpdGhFbmRBdCA9IGZ1bmN0aW9uIChib3VuZCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgUXVlcnkodGhpcy5wYXRoLCB0aGlzLmNvbGxlY3Rpb25Hcm91cCwgdGhpcy5leHBsaWNpdE9yZGVyQnkuc2xpY2UoKSwgdGhpcy5maWx0ZXJzLnNsaWNlKCksIHRoaXMubGltaXQsIHRoaXMubGltaXRUeXBlLCB0aGlzLnN0YXJ0QXQsIGJvdW5kKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEhlbHBlciB0byBjb252ZXJ0IGEgY29sbGVjdGlvbiBncm91cCBxdWVyeSBpbnRvIGEgY29sbGVjdGlvbiBxdWVyeSBhdCBhXHJcbiAgICAgKiBzcGVjaWZpYyBwYXRoLiBUaGlzIGlzIHVzZWQgd2hlbiBleGVjdXRpbmcgY29sbGVjdGlvbiBncm91cCBxdWVyaWVzLCBzaW5jZVxyXG4gICAgICogd2UgaGF2ZSB0byBzcGxpdCB0aGUgcXVlcnkgaW50byBhIHNldCBvZiBjb2xsZWN0aW9uIHF1ZXJpZXMgYXQgbXVsdGlwbGVcclxuICAgICAqIHBhdGhzLlxyXG4gICAgICovXHJcbiAgICBRdWVyeS5wcm90b3R5cGUuYXNDb2xsZWN0aW9uUXVlcnlBdFBhdGggPSBmdW5jdGlvbiAocGF0aCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgUXVlcnkocGF0aCwgXHJcbiAgICAgICAgLypjb2xsZWN0aW9uR3JvdXA9Ki8gbnVsbCwgdGhpcy5leHBsaWNpdE9yZGVyQnkuc2xpY2UoKSwgdGhpcy5maWx0ZXJzLnNsaWNlKCksIHRoaXMubGltaXQsIHRoaXMubGltaXRUeXBlLCB0aGlzLnN0YXJ0QXQsIHRoaXMuZW5kQXQpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoaXMgcXVlcnkgZG9lcyBub3Qgc3BlY2lmeSBhbnkgcXVlcnkgY29uc3RyYWludHMgdGhhdFxyXG4gICAgICogY291bGQgcmVtb3ZlIHJlc3VsdHMuXHJcbiAgICAgKi9cclxuICAgIFF1ZXJ5LnByb3RvdHlwZS5tYXRjaGVzQWxsRG9jdW1lbnRzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiAodGhpcy5maWx0ZXJzLmxlbmd0aCA9PT0gMCAmJlxyXG4gICAgICAgICAgICB0aGlzLmxpbWl0ID09PSBudWxsICYmXHJcbiAgICAgICAgICAgIHRoaXMuc3RhcnRBdCA9PSBudWxsICYmXHJcbiAgICAgICAgICAgIHRoaXMuZW5kQXQgPT0gbnVsbCAmJlxyXG4gICAgICAgICAgICAodGhpcy5leHBsaWNpdE9yZGVyQnkubGVuZ3RoID09PSAwIHx8XHJcbiAgICAgICAgICAgICAgICAodGhpcy5leHBsaWNpdE9yZGVyQnkubGVuZ3RoID09PSAxICYmXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5leHBsaWNpdE9yZGVyQnlbMF0uZmllbGQuaXNLZXlGaWVsZCgpKSkpO1xyXG4gICAgfTtcclxuICAgIC8vIFRPRE8oYi8yOTE4MzE2NSk6IFRoaXMgaXMgdXNlZCB0byBnZXQgYSB1bmlxdWUgc3RyaW5nIGZyb20gYSBxdWVyeSB0bywgZm9yXHJcbiAgICAvLyBleGFtcGxlLCB1c2UgYXMgYSBkaWN0aW9uYXJ5IGtleSwgYnV0IHRoZSBpbXBsZW1lbnRhdGlvbiBpcyBzdWJqZWN0IHRvXHJcbiAgICAvLyBjb2xsaXNpb25zLiBNYWtlIGl0IGNvbGxpc2lvbi1mcmVlLlxyXG4gICAgUXVlcnkucHJvdG90eXBlLmNhbm9uaWNhbElkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnRvVGFyZ2V0KCkuY2Fub25pY2FsSWQoKSArIFwifGx0OlwiICsgdGhpcy5saW1pdFR5cGU7XHJcbiAgICB9O1xyXG4gICAgUXVlcnkucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBcIlF1ZXJ5KHRhcmdldD1cIiArIHRoaXMudG9UYXJnZXQoKS50b1N0cmluZygpICsgXCI7IGxpbWl0VHlwZT1cIiArIHRoaXMubGltaXRUeXBlICsgXCIpXCI7XHJcbiAgICB9O1xyXG4gICAgUXVlcnkucHJvdG90eXBlLmlzRXF1YWwgPSBmdW5jdGlvbiAob3RoZXIpIHtcclxuICAgICAgICByZXR1cm4gKHRoaXMudG9UYXJnZXQoKS5pc0VxdWFsKG90aGVyLnRvVGFyZ2V0KCkpICYmXHJcbiAgICAgICAgICAgIHRoaXMubGltaXRUeXBlID09PSBvdGhlci5saW1pdFR5cGUpO1xyXG4gICAgfTtcclxuICAgIFF1ZXJ5LnByb3RvdHlwZS5kb2NDb21wYXJhdG9yID0gZnVuY3Rpb24gKGQxLCBkMikge1xyXG4gICAgICAgIHZhciBjb21wYXJlZE9uS2V5RmllbGQgPSBmYWxzZTtcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gdGhpcy5vcmRlckJ5OyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICB2YXIgb3JkZXJCeSA9IF9hW19pXTtcclxuICAgICAgICAgICAgdmFyIGNvbXAgPSBvcmRlckJ5LmNvbXBhcmUoZDEsIGQyKTtcclxuICAgICAgICAgICAgaWYgKGNvbXAgIT09IDApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBjb21wO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbXBhcmVkT25LZXlGaWVsZCA9IGNvbXBhcmVkT25LZXlGaWVsZCB8fCBvcmRlckJ5LmZpZWxkLmlzS2V5RmllbGQoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gQXNzZXJ0IHRoYXQgd2UgYWN0dWFsbHkgY29tcGFyZWQgYnkga2V5XHJcbiAgICAgICAgYXNzZXJ0KGNvbXBhcmVkT25LZXlGaWVsZCwgXCJvcmRlckJ5IHVzZWQgdGhhdCBkb2Vzbid0IGNvbXBhcmUgb24ga2V5IGZpZWxkXCIpO1xyXG4gICAgICAgIHJldHVybiAwO1xyXG4gICAgfTtcclxuICAgIFF1ZXJ5LnByb3RvdHlwZS5tYXRjaGVzID0gZnVuY3Rpb24gKGRvYykge1xyXG4gICAgICAgIHJldHVybiAodGhpcy5tYXRjaGVzUGF0aEFuZENvbGxlY3Rpb25Hcm91cChkb2MpICYmXHJcbiAgICAgICAgICAgIHRoaXMubWF0Y2hlc09yZGVyQnkoZG9jKSAmJlxyXG4gICAgICAgICAgICB0aGlzLm1hdGNoZXNGaWx0ZXJzKGRvYykgJiZcclxuICAgICAgICAgICAgdGhpcy5tYXRjaGVzQm91bmRzKGRvYykpO1xyXG4gICAgfTtcclxuICAgIFF1ZXJ5LnByb3RvdHlwZS5oYXNMaW1pdFRvRmlyc3QgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuICFpc051bGxPclVuZGVmaW5lZCh0aGlzLmxpbWl0KSAmJiB0aGlzLmxpbWl0VHlwZSA9PT0gTGltaXRUeXBlLkZpcnN0O1xyXG4gICAgfTtcclxuICAgIFF1ZXJ5LnByb3RvdHlwZS5oYXNMaW1pdFRvTGFzdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gIWlzTnVsbE9yVW5kZWZpbmVkKHRoaXMubGltaXQpICYmIHRoaXMubGltaXRUeXBlID09PSBMaW1pdFR5cGUuTGFzdDtcclxuICAgIH07XHJcbiAgICBRdWVyeS5wcm90b3R5cGUuZ2V0Rmlyc3RPcmRlckJ5RmllbGQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZXhwbGljaXRPcmRlckJ5Lmxlbmd0aCA+IDBcclxuICAgICAgICAgICAgPyB0aGlzLmV4cGxpY2l0T3JkZXJCeVswXS5maWVsZFxyXG4gICAgICAgICAgICA6IG51bGw7XHJcbiAgICB9O1xyXG4gICAgUXVlcnkucHJvdG90eXBlLmdldEluZXF1YWxpdHlGaWx0ZXJGaWVsZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gdGhpcy5maWx0ZXJzOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICB2YXIgZmlsdGVyID0gX2FbX2ldO1xyXG4gICAgICAgICAgICBpZiAoZmlsdGVyIGluc3RhbmNlb2YgRmllbGRGaWx0ZXIgJiYgZmlsdGVyLmlzSW5lcXVhbGl0eSgpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmlsdGVyLmZpZWxkO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfTtcclxuICAgIC8vIENoZWNrcyBpZiBhbnkgb2YgdGhlIHByb3ZpZGVkIE9wZXJhdG9ycyBhcmUgaW5jbHVkZWQgaW4gdGhlIHF1ZXJ5IGFuZFxyXG4gICAgLy8gcmV0dXJucyB0aGUgZmlyc3Qgb25lIHRoYXQgaXMsIG9yIG51bGwgaWYgbm9uZSBhcmUuXHJcbiAgICBRdWVyeS5wcm90b3R5cGUuZmluZEZpbHRlck9wZXJhdG9yID0gZnVuY3Rpb24gKG9wZXJhdG9ycykge1xyXG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSB0aGlzLmZpbHRlcnM7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBmaWx0ZXIgPSBfYVtfaV07XHJcbiAgICAgICAgICAgIGlmIChmaWx0ZXIgaW5zdGFuY2VvZiBGaWVsZEZpbHRlcikge1xyXG4gICAgICAgICAgICAgICAgaWYgKG9wZXJhdG9ycy5pbmRleE9mKGZpbHRlci5vcCkgPj0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmaWx0ZXIub3A7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9O1xyXG4gICAgUXVlcnkucHJvdG90eXBlLmlzRG9jdW1lbnRRdWVyeSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy50b1RhcmdldCgpLmlzRG9jdW1lbnRRdWVyeSgpO1xyXG4gICAgfTtcclxuICAgIFF1ZXJ5LnByb3RvdHlwZS5pc0NvbGxlY3Rpb25Hcm91cFF1ZXJ5ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNvbGxlY3Rpb25Hcm91cCAhPT0gbnVsbDtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIENvbnZlcnRzIHRoaXMgYFF1ZXJ5YCBpbnN0YW5jZSB0byBpdCdzIGNvcnJlc3BvbmRpbmcgYFRhcmdldGBcclxuICAgICAqIHJlcHJlc2VudGF0aW9uLlxyXG4gICAgICovXHJcbiAgICBRdWVyeS5wcm90b3R5cGUudG9UYXJnZXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLm1lbW9pemVkVGFyZ2V0KSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmxpbWl0VHlwZSA9PT0gTGltaXRUeXBlLkZpcnN0KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1lbW9pemVkVGFyZ2V0ID0gbmV3IFRhcmdldCh0aGlzLnBhdGgsIHRoaXMuY29sbGVjdGlvbkdyb3VwLCB0aGlzLm9yZGVyQnksIHRoaXMuZmlsdGVycywgdGhpcy5saW1pdCwgdGhpcy5zdGFydEF0LCB0aGlzLmVuZEF0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIEZsaXAgdGhlIG9yZGVyQnkgZGlyZWN0aW9ucyBzaW5jZSB3ZSB3YW50IHRoZSBsYXN0IHJlc3VsdHNcclxuICAgICAgICAgICAgICAgIHZhciBvcmRlckJ5cyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHRoaXMub3JkZXJCeTsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgb3JkZXJCeSA9IF9hW19pXTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZGlyID0gb3JkZXJCeS5kaXIgPT09IERpcmVjdGlvbi5ERVNDRU5ESU5HXHJcbiAgICAgICAgICAgICAgICAgICAgICAgID8gRGlyZWN0aW9uLkFTQ0VORElOR1xyXG4gICAgICAgICAgICAgICAgICAgICAgICA6IERpcmVjdGlvbi5ERVNDRU5ESU5HO1xyXG4gICAgICAgICAgICAgICAgICAgIG9yZGVyQnlzLnB1c2gobmV3IE9yZGVyQnkob3JkZXJCeS5maWVsZCwgZGlyKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBXZSBuZWVkIHRvIHN3YXAgdGhlIGN1cnNvcnMgdG8gbWF0Y2ggdGhlIG5vdy1mbGlwcGVkIHF1ZXJ5IG9yZGVyaW5nLlxyXG4gICAgICAgICAgICAgICAgdmFyIHN0YXJ0QXQgPSB0aGlzLmVuZEF0XHJcbiAgICAgICAgICAgICAgICAgICAgPyBuZXcgQm91bmQodGhpcy5lbmRBdC5wb3NpdGlvbiwgIXRoaXMuZW5kQXQuYmVmb3JlKVxyXG4gICAgICAgICAgICAgICAgICAgIDogbnVsbDtcclxuICAgICAgICAgICAgICAgIHZhciBlbmRBdCA9IHRoaXMuc3RhcnRBdFxyXG4gICAgICAgICAgICAgICAgICAgID8gbmV3IEJvdW5kKHRoaXMuc3RhcnRBdC5wb3NpdGlvbiwgIXRoaXMuc3RhcnRBdC5iZWZvcmUpXHJcbiAgICAgICAgICAgICAgICAgICAgOiBudWxsO1xyXG4gICAgICAgICAgICAgICAgLy8gTm93IHJldHVybiBhcyBhIExpbWl0VHlwZS5GaXJzdCBxdWVyeS5cclxuICAgICAgICAgICAgICAgIHRoaXMubWVtb2l6ZWRUYXJnZXQgPSBuZXcgVGFyZ2V0KHRoaXMucGF0aCwgdGhpcy5jb2xsZWN0aW9uR3JvdXAsIG9yZGVyQnlzLCB0aGlzLmZpbHRlcnMsIHRoaXMubGltaXQsIHN0YXJ0QXQsIGVuZEF0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5tZW1vaXplZFRhcmdldDtcclxuICAgIH07XHJcbiAgICBRdWVyeS5wcm90b3R5cGUubWF0Y2hlc1BhdGhBbmRDb2xsZWN0aW9uR3JvdXAgPSBmdW5jdGlvbiAoZG9jKSB7XHJcbiAgICAgICAgdmFyIGRvY1BhdGggPSBkb2Mua2V5LnBhdGg7XHJcbiAgICAgICAgaWYgKHRoaXMuY29sbGVjdGlvbkdyb3VwICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIC8vIE5PVEU6IHRoaXMucGF0aCBpcyBjdXJyZW50bHkgYWx3YXlzIGVtcHR5IHNpbmNlIHdlIGRvbid0IGV4cG9zZSBDb2xsZWN0aW9uXHJcbiAgICAgICAgICAgIC8vIEdyb3VwIHF1ZXJpZXMgcm9vdGVkIGF0IGEgZG9jdW1lbnQgcGF0aCB5ZXQuXHJcbiAgICAgICAgICAgIHJldHVybiAoZG9jLmtleS5oYXNDb2xsZWN0aW9uSWQodGhpcy5jb2xsZWN0aW9uR3JvdXApICYmXHJcbiAgICAgICAgICAgICAgICB0aGlzLnBhdGguaXNQcmVmaXhPZihkb2NQYXRoKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKERvY3VtZW50S2V5LmlzRG9jdW1lbnRLZXkodGhpcy5wYXRoKSkge1xyXG4gICAgICAgICAgICAvLyBleGFjdCBtYXRjaCBmb3IgZG9jdW1lbnQgcXVlcmllc1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wYXRoLmlzRXF1YWwoZG9jUGF0aCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBzaGFsbG93IGFuY2VzdG9yIHF1ZXJpZXMgYnkgZGVmYXVsdFxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wYXRoLmlzSW1tZWRpYXRlUGFyZW50T2YoZG9jUGF0aCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQSBkb2N1bWVudCBtdXN0IGhhdmUgYSB2YWx1ZSBmb3IgZXZlcnkgb3JkZXJpbmcgY2xhdXNlIGluIG9yZGVyIHRvIHNob3cgdXBcclxuICAgICAqIGluIHRoZSByZXN1bHRzLlxyXG4gICAgICovXHJcbiAgICBRdWVyeS5wcm90b3R5cGUubWF0Y2hlc09yZGVyQnkgPSBmdW5jdGlvbiAoZG9jKSB7XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHRoaXMuZXhwbGljaXRPcmRlckJ5OyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICB2YXIgb3JkZXJCeSA9IF9hW19pXTtcclxuICAgICAgICAgICAgLy8gb3JkZXIgYnkga2V5IGFsd2F5cyBtYXRjaGVzXHJcbiAgICAgICAgICAgIGlmICghb3JkZXJCeS5maWVsZC5pc0tleUZpZWxkKCkgJiYgZG9jLmZpZWxkKG9yZGVyQnkuZmllbGQpID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9O1xyXG4gICAgUXVlcnkucHJvdG90eXBlLm1hdGNoZXNGaWx0ZXJzID0gZnVuY3Rpb24gKGRvYykge1xyXG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSB0aGlzLmZpbHRlcnM7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBmaWx0ZXIgPSBfYVtfaV07XHJcbiAgICAgICAgICAgIGlmICghZmlsdGVyLm1hdGNoZXMoZG9jKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogTWFrZXMgc3VyZSBhIGRvY3VtZW50IGlzIHdpdGhpbiB0aGUgYm91bmRzLCBpZiBwcm92aWRlZC5cclxuICAgICAqL1xyXG4gICAgUXVlcnkucHJvdG90eXBlLm1hdGNoZXNCb3VuZHMgPSBmdW5jdGlvbiAoZG9jKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuc3RhcnRBdCAmJiAhdGhpcy5zdGFydEF0LnNvcnRzQmVmb3JlRG9jdW1lbnQodGhpcy5vcmRlckJ5LCBkb2MpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuZW5kQXQgJiYgdGhpcy5lbmRBdC5zb3J0c0JlZm9yZURvY3VtZW50KHRoaXMub3JkZXJCeSwgZG9jKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfTtcclxuICAgIFF1ZXJ5LnByb3RvdHlwZS5hc3NlcnRWYWxpZEJvdW5kID0gZnVuY3Rpb24gKGJvdW5kKSB7XHJcbiAgICAgICAgYXNzZXJ0KGJvdW5kLnBvc2l0aW9uLmxlbmd0aCA8PSB0aGlzLm9yZGVyQnkubGVuZ3RoLCAnQm91bmQgaXMgbG9uZ2VyIHRoYW4gb3JkZXJCeScpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBRdWVyeTtcclxufSgpKTtcclxudmFyIEZpbHRlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEZpbHRlcigpIHtcclxuICAgIH1cclxuICAgIHJldHVybiBGaWx0ZXI7XHJcbn0oKSk7XHJcbnZhciBPcGVyYXRvciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIE9wZXJhdG9yKG5hbWUpIHtcclxuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xyXG4gICAgfVxyXG4gICAgT3BlcmF0b3IuZnJvbVN0cmluZyA9IGZ1bmN0aW9uIChvcCkge1xyXG4gICAgICAgIHN3aXRjaCAob3ApIHtcclxuICAgICAgICAgICAgY2FzZSAnPCc6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gT3BlcmF0b3IuTEVTU19USEFOO1xyXG4gICAgICAgICAgICBjYXNlICc8PSc6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gT3BlcmF0b3IuTEVTU19USEFOX09SX0VRVUFMO1xyXG4gICAgICAgICAgICBjYXNlICc9PSc6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gT3BlcmF0b3IuRVFVQUw7XHJcbiAgICAgICAgICAgIGNhc2UgJz49JzpcclxuICAgICAgICAgICAgICAgIHJldHVybiBPcGVyYXRvci5HUkVBVEVSX1RIQU5fT1JfRVFVQUw7XHJcbiAgICAgICAgICAgIGNhc2UgJz4nOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIE9wZXJhdG9yLkdSRUFURVJfVEhBTjtcclxuICAgICAgICAgICAgY2FzZSAnYXJyYXktY29udGFpbnMnOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIE9wZXJhdG9yLkFSUkFZX0NPTlRBSU5TO1xyXG4gICAgICAgICAgICBjYXNlICdpbic6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gT3BlcmF0b3IuSU47XHJcbiAgICAgICAgICAgIGNhc2UgJ2FycmF5LWNvbnRhaW5zLWFueSc6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gT3BlcmF0b3IuQVJSQVlfQ09OVEFJTlNfQU5ZO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhaWwoJ1Vua25vd24gRmllbGRGaWx0ZXIgb3BlcmF0b3I6ICcgKyBvcCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIE9wZXJhdG9yLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5uYW1lO1xyXG4gICAgfTtcclxuICAgIE9wZXJhdG9yLnByb3RvdHlwZS5pc0VxdWFsID0gZnVuY3Rpb24gKG90aGVyKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubmFtZSA9PT0gb3RoZXIubmFtZTtcclxuICAgIH07XHJcbiAgICBPcGVyYXRvci5MRVNTX1RIQU4gPSBuZXcgT3BlcmF0b3IoJzwnKTtcclxuICAgIE9wZXJhdG9yLkxFU1NfVEhBTl9PUl9FUVVBTCA9IG5ldyBPcGVyYXRvcignPD0nKTtcclxuICAgIE9wZXJhdG9yLkVRVUFMID0gbmV3IE9wZXJhdG9yKCc9PScpO1xyXG4gICAgT3BlcmF0b3IuR1JFQVRFUl9USEFOID0gbmV3IE9wZXJhdG9yKCc+Jyk7XHJcbiAgICBPcGVyYXRvci5HUkVBVEVSX1RIQU5fT1JfRVFVQUwgPSBuZXcgT3BlcmF0b3IoJz49Jyk7XHJcbiAgICBPcGVyYXRvci5BUlJBWV9DT05UQUlOUyA9IG5ldyBPcGVyYXRvcignYXJyYXktY29udGFpbnMnKTtcclxuICAgIE9wZXJhdG9yLklOID0gbmV3IE9wZXJhdG9yKCdpbicpO1xyXG4gICAgT3BlcmF0b3IuQVJSQVlfQ09OVEFJTlNfQU5ZID0gbmV3IE9wZXJhdG9yKCdhcnJheS1jb250YWlucy1hbnknKTtcclxuICAgIHJldHVybiBPcGVyYXRvcjtcclxufSgpKTtcclxudmFyIEZpZWxkRmlsdGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgdHNsaWIuX19leHRlbmRzKEZpZWxkRmlsdGVyLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gRmllbGRGaWx0ZXIoZmllbGQsIG9wLCB2YWx1ZSkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMuZmllbGQgPSBmaWVsZDtcclxuICAgICAgICBfdGhpcy5vcCA9IG9wO1xyXG4gICAgICAgIF90aGlzLnZhbHVlID0gdmFsdWU7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGVzIGEgZmlsdGVyIGJhc2VkIG9uIHRoZSBwcm92aWRlZCBhcmd1bWVudHMuXHJcbiAgICAgKi9cclxuICAgIEZpZWxkRmlsdGVyLmNyZWF0ZSA9IGZ1bmN0aW9uIChmaWVsZCwgb3AsIHZhbHVlKSB7XHJcbiAgICAgICAgaWYgKGZpZWxkLmlzS2V5RmllbGQoKSkge1xyXG4gICAgICAgICAgICBpZiAob3AgPT09IE9wZXJhdG9yLklOKSB7XHJcbiAgICAgICAgICAgICAgICBhc3NlcnQodmFsdWUgaW5zdGFuY2VvZiBBcnJheVZhbHVlLCAnQ29tcGFyaW5nIG9uIGtleSB3aXRoIElOLCBidXQgZmlsdGVyIHZhbHVlIG5vdCBhbiBBcnJheVZhbHVlJyk7XHJcbiAgICAgICAgICAgICAgICBhc3NlcnQodmFsdWUuaW50ZXJuYWxWYWx1ZS5ldmVyeShmdW5jdGlvbiAoZWxlbSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBlbGVtIGluc3RhbmNlb2YgUmVmVmFsdWU7XHJcbiAgICAgICAgICAgICAgICB9KSwgJ0NvbXBhcmluZyBvbiBrZXkgd2l0aCBJTiwgYnV0IGFuIGFycmF5IHZhbHVlIHdhcyBub3QgYSBSZWZWYWx1ZScpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBLZXlGaWVsZEluRmlsdGVyKGZpZWxkLCB2YWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBhc3NlcnQodmFsdWUgaW5zdGFuY2VvZiBSZWZWYWx1ZSwgJ0NvbXBhcmluZyBvbiBrZXksIGJ1dCBmaWx0ZXIgdmFsdWUgbm90IGEgUmVmVmFsdWUnKTtcclxuICAgICAgICAgICAgICAgIGFzc2VydChvcCAhPT0gT3BlcmF0b3IuQVJSQVlfQ09OVEFJTlMgJiYgb3AgIT09IE9wZXJhdG9yLkFSUkFZX0NPTlRBSU5TX0FOWSwgXCInXCIgKyBvcC50b1N0cmluZygpICsgXCInIHF1ZXJpZXMgZG9uJ3QgbWFrZSBzZW5zZSBvbiBkb2N1bWVudCBrZXlzLlwiKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgS2V5RmllbGRGaWx0ZXIoZmllbGQsIG9wLCB2YWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodmFsdWUuaXNFcXVhbChOdWxsVmFsdWUuSU5TVEFOQ0UpKSB7XHJcbiAgICAgICAgICAgIGlmIChvcCAhPT0gT3BlcmF0b3IuRVFVQUwpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLklOVkFMSURfQVJHVU1FTlQsICdJbnZhbGlkIHF1ZXJ5LiBOdWxsIHN1cHBvcnRzIG9ubHkgZXF1YWxpdHkgY29tcGFyaXNvbnMuJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBGaWVsZEZpbHRlcihmaWVsZCwgb3AsIHZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodmFsdWUuaXNFcXVhbChEb3VibGVWYWx1ZS5OQU4pKSB7XHJcbiAgICAgICAgICAgIGlmIChvcCAhPT0gT3BlcmF0b3IuRVFVQUwpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLklOVkFMSURfQVJHVU1FTlQsICdJbnZhbGlkIHF1ZXJ5LiBOYU4gc3VwcG9ydHMgb25seSBlcXVhbGl0eSBjb21wYXJpc29ucy4nKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEZpZWxkRmlsdGVyKGZpZWxkLCBvcCwgdmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChvcCA9PT0gT3BlcmF0b3IuQVJSQVlfQ09OVEFJTlMpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBBcnJheUNvbnRhaW5zRmlsdGVyKGZpZWxkLCB2YWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKG9wID09PSBPcGVyYXRvci5JTikge1xyXG4gICAgICAgICAgICBhc3NlcnQodmFsdWUgaW5zdGFuY2VvZiBBcnJheVZhbHVlLCAnSU4gZmlsdGVyIGhhcyBpbnZhbGlkIHZhbHVlOiAnICsgdmFsdWUudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgSW5GaWx0ZXIoZmllbGQsIHZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAob3AgPT09IE9wZXJhdG9yLkFSUkFZX0NPTlRBSU5TX0FOWSkge1xyXG4gICAgICAgICAgICBhc3NlcnQodmFsdWUgaW5zdGFuY2VvZiBBcnJheVZhbHVlLCAnQVJSQVlfQ09OVEFJTlNfQU5ZIGZpbHRlciBoYXMgaW52YWxpZCB2YWx1ZTogJyArIHZhbHVlLnRvU3RyaW5nKCkpO1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEFycmF5Q29udGFpbnNBbnlGaWx0ZXIoZmllbGQsIHZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgRmllbGRGaWx0ZXIoZmllbGQsIG9wLCB2YWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIEZpZWxkRmlsdGVyLnByb3RvdHlwZS5tYXRjaGVzID0gZnVuY3Rpb24gKGRvYykge1xyXG4gICAgICAgIHZhciBvdGhlciA9IGRvYy5maWVsZCh0aGlzLmZpZWxkKTtcclxuICAgICAgICAvLyBPbmx5IGNvbXBhcmUgdHlwZXMgd2l0aCBtYXRjaGluZyBiYWNrZW5kIG9yZGVyIChzdWNoIGFzIGRvdWJsZSBhbmQgaW50KS5cclxuICAgICAgICByZXR1cm4gKG90aGVyICE9PSBudWxsICYmXHJcbiAgICAgICAgICAgIHRoaXMudmFsdWUudHlwZU9yZGVyID09PSBvdGhlci50eXBlT3JkZXIgJiZcclxuICAgICAgICAgICAgdGhpcy5tYXRjaGVzQ29tcGFyaXNvbihvdGhlci5jb21wYXJlVG8odGhpcy52YWx1ZSkpKTtcclxuICAgIH07XHJcbiAgICBGaWVsZEZpbHRlci5wcm90b3R5cGUubWF0Y2hlc0NvbXBhcmlzb24gPSBmdW5jdGlvbiAoY29tcGFyaXNvbikge1xyXG4gICAgICAgIHN3aXRjaCAodGhpcy5vcCkge1xyXG4gICAgICAgICAgICBjYXNlIE9wZXJhdG9yLkxFU1NfVEhBTjpcclxuICAgICAgICAgICAgICAgIHJldHVybiBjb21wYXJpc29uIDwgMDtcclxuICAgICAgICAgICAgY2FzZSBPcGVyYXRvci5MRVNTX1RIQU5fT1JfRVFVQUw6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY29tcGFyaXNvbiA8PSAwO1xyXG4gICAgICAgICAgICBjYXNlIE9wZXJhdG9yLkVRVUFMOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbXBhcmlzb24gPT09IDA7XHJcbiAgICAgICAgICAgIGNhc2UgT3BlcmF0b3IuR1JFQVRFUl9USEFOOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbXBhcmlzb24gPiAwO1xyXG4gICAgICAgICAgICBjYXNlIE9wZXJhdG9yLkdSRUFURVJfVEhBTl9PUl9FUVVBTDpcclxuICAgICAgICAgICAgICAgIHJldHVybiBjb21wYXJpc29uID49IDA7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFpbCgnVW5rbm93biBGaWVsZEZpbHRlciBvcGVyYXRvcjogJyArIHRoaXMub3ApO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBGaWVsZEZpbHRlci5wcm90b3R5cGUuaXNJbmVxdWFsaXR5ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiAoW1xyXG4gICAgICAgICAgICBPcGVyYXRvci5MRVNTX1RIQU4sXHJcbiAgICAgICAgICAgIE9wZXJhdG9yLkxFU1NfVEhBTl9PUl9FUVVBTCxcclxuICAgICAgICAgICAgT3BlcmF0b3IuR1JFQVRFUl9USEFOLFxyXG4gICAgICAgICAgICBPcGVyYXRvci5HUkVBVEVSX1RIQU5fT1JfRVFVQUxcclxuICAgICAgICBdLmluZGV4T2YodGhpcy5vcCkgPj0gMCk7XHJcbiAgICB9O1xyXG4gICAgRmllbGRGaWx0ZXIucHJvdG90eXBlLmNhbm9uaWNhbElkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vIFRPRE8oYi8yOTE4MzE2NSk6IFRlY2huaWNhbGx5LCB0aGlzIHdvbid0IGJlIHVuaXF1ZSBpZiB0d28gdmFsdWVzIGhhdmVcclxuICAgICAgICAvLyB0aGUgc2FtZSBkZXNjcmlwdGlvbiwgc3VjaCBhcyB0aGUgaW50IDMgYW5kIHRoZSBzdHJpbmcgXCIzXCIuIFNvIHdlIHNob3VsZFxyXG4gICAgICAgIC8vIGFkZCB0aGUgdHlwZXMgaW4gaGVyZSBzb21laG93LCB0b28uXHJcbiAgICAgICAgcmV0dXJuICh0aGlzLmZpZWxkLmNhbm9uaWNhbFN0cmluZygpICsgdGhpcy5vcC50b1N0cmluZygpICsgdGhpcy52YWx1ZS50b1N0cmluZygpKTtcclxuICAgIH07XHJcbiAgICBGaWVsZEZpbHRlci5wcm90b3R5cGUuaXNFcXVhbCA9IGZ1bmN0aW9uIChvdGhlcikge1xyXG4gICAgICAgIGlmIChvdGhlciBpbnN0YW5jZW9mIEZpZWxkRmlsdGVyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAodGhpcy5vcC5pc0VxdWFsKG90aGVyLm9wKSAmJlxyXG4gICAgICAgICAgICAgICAgdGhpcy5maWVsZC5pc0VxdWFsKG90aGVyLmZpZWxkKSAmJlxyXG4gICAgICAgICAgICAgICAgdGhpcy52YWx1ZS5pc0VxdWFsKG90aGVyLnZhbHVlKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIEZpZWxkRmlsdGVyLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5maWVsZC5jYW5vbmljYWxTdHJpbmcoKSArIFwiIFwiICsgdGhpcy5vcCArIFwiIFwiICsgdGhpcy52YWx1ZS52YWx1ZSgpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBGaWVsZEZpbHRlcjtcclxufShGaWx0ZXIpKTtcclxuLyoqIEZpbHRlciB0aGF0IG1hdGNoZXMgb24ga2V5IGZpZWxkcyAoaS5lLiAnX19uYW1lX18nKS4gKi9cclxudmFyIEtleUZpZWxkRmlsdGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgdHNsaWIuX19leHRlbmRzKEtleUZpZWxkRmlsdGVyLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gS2V5RmllbGRGaWx0ZXIoKSB7XHJcbiAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xyXG4gICAgfVxyXG4gICAgS2V5RmllbGRGaWx0ZXIucHJvdG90eXBlLm1hdGNoZXMgPSBmdW5jdGlvbiAoZG9jKSB7XHJcbiAgICAgICAgdmFyIHJlZlZhbHVlID0gdGhpcy52YWx1ZTtcclxuICAgICAgICB2YXIgY29tcGFyaXNvbiA9IERvY3VtZW50S2V5LmNvbXBhcmF0b3IoZG9jLmtleSwgcmVmVmFsdWUua2V5KTtcclxuICAgICAgICByZXR1cm4gdGhpcy5tYXRjaGVzQ29tcGFyaXNvbihjb21wYXJpc29uKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gS2V5RmllbGRGaWx0ZXI7XHJcbn0oRmllbGRGaWx0ZXIpKTtcclxuLyoqIEZpbHRlciB0aGF0IG1hdGNoZXMgb24ga2V5IGZpZWxkcyB3aXRoaW4gYW4gYXJyYXkuICovXHJcbnZhciBLZXlGaWVsZEluRmlsdGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgdHNsaWIuX19leHRlbmRzKEtleUZpZWxkSW5GaWx0ZXIsIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBLZXlGaWVsZEluRmlsdGVyKGZpZWxkLCB2YWx1ZSkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGZpZWxkLCBPcGVyYXRvci5JTiwgdmFsdWUpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMudmFsdWUgPSB2YWx1ZTtcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICBLZXlGaWVsZEluRmlsdGVyLnByb3RvdHlwZS5tYXRjaGVzID0gZnVuY3Rpb24gKGRvYykge1xyXG4gICAgICAgIHZhciBhcnJheVZhbHVlID0gdGhpcy52YWx1ZTtcclxuICAgICAgICByZXR1cm4gYXJyYXlWYWx1ZS5pbnRlcm5hbFZhbHVlLnNvbWUoZnVuY3Rpb24gKHJlZlZhbHVlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBkb2Mua2V5LmlzRXF1YWwocmVmVmFsdWUua2V5KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gS2V5RmllbGRJbkZpbHRlcjtcclxufShGaWVsZEZpbHRlcikpO1xyXG4vKiogQSBGaWx0ZXIgdGhhdCBpbXBsZW1lbnRzIHRoZSBhcnJheS1jb250YWlucyBvcGVyYXRvci4gKi9cclxudmFyIEFycmF5Q29udGFpbnNGaWx0ZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICB0c2xpYi5fX2V4dGVuZHMoQXJyYXlDb250YWluc0ZpbHRlciwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIEFycmF5Q29udGFpbnNGaWx0ZXIoZmllbGQsIHZhbHVlKSB7XHJcbiAgICAgICAgcmV0dXJuIF9zdXBlci5jYWxsKHRoaXMsIGZpZWxkLCBPcGVyYXRvci5BUlJBWV9DT05UQUlOUywgdmFsdWUpIHx8IHRoaXM7XHJcbiAgICB9XHJcbiAgICBBcnJheUNvbnRhaW5zRmlsdGVyLnByb3RvdHlwZS5tYXRjaGVzID0gZnVuY3Rpb24gKGRvYykge1xyXG4gICAgICAgIHZhciBvdGhlciA9IGRvYy5maWVsZCh0aGlzLmZpZWxkKTtcclxuICAgICAgICByZXR1cm4gb3RoZXIgaW5zdGFuY2VvZiBBcnJheVZhbHVlICYmIG90aGVyLmNvbnRhaW5zKHRoaXMudmFsdWUpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBBcnJheUNvbnRhaW5zRmlsdGVyO1xyXG59KEZpZWxkRmlsdGVyKSk7XHJcbi8qKiBBIEZpbHRlciB0aGF0IGltcGxlbWVudHMgdGhlIElOIG9wZXJhdG9yLiAqL1xyXG52YXIgSW5GaWx0ZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICB0c2xpYi5fX2V4dGVuZHMoSW5GaWx0ZXIsIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBJbkZpbHRlcihmaWVsZCwgdmFsdWUpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBmaWVsZCwgT3BlcmF0b3IuSU4sIHZhbHVlKSB8fCB0aGlzO1xyXG4gICAgICAgIF90aGlzLnZhbHVlID0gdmFsdWU7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgSW5GaWx0ZXIucHJvdG90eXBlLm1hdGNoZXMgPSBmdW5jdGlvbiAoZG9jKSB7XHJcbiAgICAgICAgdmFyIGFycmF5VmFsdWUgPSB0aGlzLnZhbHVlO1xyXG4gICAgICAgIHZhciBvdGhlciA9IGRvYy5maWVsZCh0aGlzLmZpZWxkKTtcclxuICAgICAgICByZXR1cm4gb3RoZXIgIT09IG51bGwgJiYgYXJyYXlWYWx1ZS5jb250YWlucyhvdGhlcik7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEluRmlsdGVyO1xyXG59KEZpZWxkRmlsdGVyKSk7XHJcbi8qKiBBIEZpbHRlciB0aGF0IGltcGxlbWVudHMgdGhlIGFycmF5LWNvbnRhaW5zLWFueSBvcGVyYXRvci4gKi9cclxudmFyIEFycmF5Q29udGFpbnNBbnlGaWx0ZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICB0c2xpYi5fX2V4dGVuZHMoQXJyYXlDb250YWluc0FueUZpbHRlciwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIEFycmF5Q29udGFpbnNBbnlGaWx0ZXIoZmllbGQsIHZhbHVlKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgZmllbGQsIE9wZXJhdG9yLkFSUkFZX0NPTlRBSU5TX0FOWSwgdmFsdWUpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMudmFsdWUgPSB2YWx1ZTtcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICBBcnJheUNvbnRhaW5zQW55RmlsdGVyLnByb3RvdHlwZS5tYXRjaGVzID0gZnVuY3Rpb24gKGRvYykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIG90aGVyID0gZG9jLmZpZWxkKHRoaXMuZmllbGQpO1xyXG4gICAgICAgIHJldHVybiAob3RoZXIgaW5zdGFuY2VvZiBBcnJheVZhbHVlICYmXHJcbiAgICAgICAgICAgIG90aGVyLmludGVybmFsVmFsdWUuc29tZShmdW5jdGlvbiAobGhzRWxlbSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLnZhbHVlLmNvbnRhaW5zKGxoc0VsZW0pO1xyXG4gICAgICAgICAgICB9KSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEFycmF5Q29udGFpbnNBbnlGaWx0ZXI7XHJcbn0oRmllbGRGaWx0ZXIpKTtcclxuLyoqXHJcbiAqIFRoZSBkaXJlY3Rpb24gb2Ygc29ydGluZyBpbiBhbiBvcmRlciBieS5cclxuICovXHJcbnZhciBEaXJlY3Rpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBEaXJlY3Rpb24obmFtZSkge1xyXG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XHJcbiAgICB9XHJcbiAgICBEaXJlY3Rpb24ucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm5hbWU7XHJcbiAgICB9O1xyXG4gICAgRGlyZWN0aW9uLkFTQ0VORElORyA9IG5ldyBEaXJlY3Rpb24oJ2FzYycpO1xyXG4gICAgRGlyZWN0aW9uLkRFU0NFTkRJTkcgPSBuZXcgRGlyZWN0aW9uKCdkZXNjJyk7XHJcbiAgICByZXR1cm4gRGlyZWN0aW9uO1xyXG59KCkpO1xyXG4vKipcclxuICogUmVwcmVzZW50cyBhIGJvdW5kIG9mIGEgcXVlcnkuXHJcbiAqXHJcbiAqIFRoZSBib3VuZCBpcyBzcGVjaWZpZWQgd2l0aCB0aGUgZ2l2ZW4gY29tcG9uZW50cyByZXByZXNlbnRpbmcgYSBwb3NpdGlvbiBhbmRcclxuICogd2hldGhlciBpdCdzIGp1c3QgYmVmb3JlIG9yIGp1c3QgYWZ0ZXIgdGhlIHBvc2l0aW9uIChyZWxhdGl2ZSB0byB3aGF0ZXZlciB0aGVcclxuICogcXVlcnkgb3JkZXIgaXMpLlxyXG4gKlxyXG4gKiBUaGUgcG9zaXRpb24gcmVwcmVzZW50cyBhIGxvZ2ljYWwgaW5kZXggcG9zaXRpb24gZm9yIGEgcXVlcnkuIEl0J3MgYSBwcmVmaXhcclxuICogb2YgdmFsdWVzIGZvciB0aGUgKHBvdGVudGlhbGx5IGltcGxpY2l0KSBvcmRlciBieSBjbGF1c2VzIG9mIGEgcXVlcnkuXHJcbiAqXHJcbiAqIEJvdW5kIHByb3ZpZGVzIGEgZnVuY3Rpb24gdG8gZGV0ZXJtaW5lIHdoZXRoZXIgYSBkb2N1bWVudCBjb21lcyBiZWZvcmUgb3JcclxuICogYWZ0ZXIgYSBib3VuZC4gVGhpcyBpcyBpbmZsdWVuY2VkIGJ5IHdoZXRoZXIgdGhlIHBvc2l0aW9uIGlzIGp1c3QgYmVmb3JlIG9yXHJcbiAqIGp1c3QgYWZ0ZXIgdGhlIHByb3ZpZGVkIHZhbHVlcy5cclxuICovXHJcbnZhciBCb3VuZCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEJvdW5kKHBvc2l0aW9uLCBiZWZvcmUpIHtcclxuICAgICAgICB0aGlzLnBvc2l0aW9uID0gcG9zaXRpb247XHJcbiAgICAgICAgdGhpcy5iZWZvcmUgPSBiZWZvcmU7XHJcbiAgICB9XHJcbiAgICBCb3VuZC5wcm90b3R5cGUuY2Fub25pY2FsSWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy8gVE9ETyhiLzI5MTgzMTY1KTogTWFrZSB0aGlzIGNvbGxpc2lvbiByb2J1c3QuXHJcbiAgICAgICAgdmFyIGNhbm9uaWNhbElkID0gdGhpcy5iZWZvcmUgPyAnYjonIDogJ2E6JztcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gdGhpcy5wb3NpdGlvbjsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgdmFyIGNvbXBvbmVudCA9IF9hW19pXTtcclxuICAgICAgICAgICAgY2Fub25pY2FsSWQgKz0gY29tcG9uZW50LnRvU3RyaW5nKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBjYW5vbmljYWxJZDtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiBhIGRvY3VtZW50IHNvcnRzIGJlZm9yZSBhIGJvdW5kIHVzaW5nIHRoZSBwcm92aWRlZCBzb3J0XHJcbiAgICAgKiBvcmRlci5cclxuICAgICAqL1xyXG4gICAgQm91bmQucHJvdG90eXBlLnNvcnRzQmVmb3JlRG9jdW1lbnQgPSBmdW5jdGlvbiAob3JkZXJCeSwgZG9jKSB7XHJcbiAgICAgICAgYXNzZXJ0KHRoaXMucG9zaXRpb24ubGVuZ3RoIDw9IG9yZGVyQnkubGVuZ3RoLCBcIkJvdW5kIGhhcyBtb3JlIGNvbXBvbmVudHMgdGhhbiBxdWVyeSdzIG9yZGVyQnlcIik7XHJcbiAgICAgICAgdmFyIGNvbXBhcmlzb24gPSAwO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5wb3NpdGlvbi5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB2YXIgb3JkZXJCeUNvbXBvbmVudCA9IG9yZGVyQnlbaV07XHJcbiAgICAgICAgICAgIHZhciBjb21wb25lbnQgPSB0aGlzLnBvc2l0aW9uW2ldO1xyXG4gICAgICAgICAgICBpZiAob3JkZXJCeUNvbXBvbmVudC5maWVsZC5pc0tleUZpZWxkKCkpIHtcclxuICAgICAgICAgICAgICAgIGFzc2VydChjb21wb25lbnQgaW5zdGFuY2VvZiBSZWZWYWx1ZSwgJ0JvdW5kIGhhcyBhIG5vbi1rZXkgdmFsdWUgd2hlcmUgdGhlIGtleSBwYXRoIGlzIGJlaW5nIHVzZWQuJyk7XHJcbiAgICAgICAgICAgICAgICBjb21wYXJpc29uID0gRG9jdW1lbnRLZXkuY29tcGFyYXRvcihjb21wb25lbnQua2V5LCBkb2Mua2V5KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHZhciBkb2NWYWx1ZSA9IGRvYy5maWVsZChvcmRlckJ5Q29tcG9uZW50LmZpZWxkKTtcclxuICAgICAgICAgICAgICAgIGFzc2VydChkb2NWYWx1ZSAhPT0gbnVsbCwgJ0ZpZWxkIHNob3VsZCBleGlzdCBzaW5jZSBkb2N1bWVudCBtYXRjaGVkIHRoZSBvcmRlckJ5IGFscmVhZHkuJyk7XHJcbiAgICAgICAgICAgICAgICBjb21wYXJpc29uID0gY29tcG9uZW50LmNvbXBhcmVUbyhkb2NWYWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKG9yZGVyQnlDb21wb25lbnQuZGlyID09PSBEaXJlY3Rpb24uREVTQ0VORElORykge1xyXG4gICAgICAgICAgICAgICAgY29tcGFyaXNvbiA9IGNvbXBhcmlzb24gKiAtMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoY29tcGFyaXNvbiAhPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYmVmb3JlID8gY29tcGFyaXNvbiA8PSAwIDogY29tcGFyaXNvbiA8IDA7XHJcbiAgICB9O1xyXG4gICAgQm91bmQucHJvdG90eXBlLmlzRXF1YWwgPSBmdW5jdGlvbiAob3RoZXIpIHtcclxuICAgICAgICBpZiAob3RoZXIgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5iZWZvcmUgIT09IG90aGVyLmJlZm9yZSB8fFxyXG4gICAgICAgICAgICB0aGlzLnBvc2l0aW9uLmxlbmd0aCAhPT0gb3RoZXIucG9zaXRpb24ubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnBvc2l0aW9uLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciB0aGlzUG9zaXRpb24gPSB0aGlzLnBvc2l0aW9uW2ldO1xyXG4gICAgICAgICAgICB2YXIgb3RoZXJQb3NpdGlvbiA9IG90aGVyLnBvc2l0aW9uW2ldO1xyXG4gICAgICAgICAgICBpZiAoIXRoaXNQb3NpdGlvbi5pc0VxdWFsKG90aGVyUG9zaXRpb24pKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEJvdW5kO1xyXG59KCkpO1xyXG4vKipcclxuICogQW4gb3JkZXJpbmcgb24gYSBmaWVsZCwgaW4gc29tZSBEaXJlY3Rpb24uIERpcmVjdGlvbiBkZWZhdWx0cyB0byBBU0NFTkRJTkcuXHJcbiAqL1xyXG52YXIgT3JkZXJCeSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIE9yZGVyQnkoZmllbGQsIGRpcikge1xyXG4gICAgICAgIHRoaXMuZmllbGQgPSBmaWVsZDtcclxuICAgICAgICBpZiAoZGlyID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgZGlyID0gRGlyZWN0aW9uLkFTQ0VORElORztcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5kaXIgPSBkaXI7XHJcbiAgICAgICAgdGhpcy5pc0tleU9yZGVyQnkgPSBmaWVsZC5pc0tleUZpZWxkKCk7XHJcbiAgICB9XHJcbiAgICBPcmRlckJ5LnByb3RvdHlwZS5jb21wYXJlID0gZnVuY3Rpb24gKGQxLCBkMikge1xyXG4gICAgICAgIHZhciBjb21wYXJpc29uID0gdGhpcy5pc0tleU9yZGVyQnlcclxuICAgICAgICAgICAgPyBEb2N1bWVudC5jb21wYXJlQnlLZXkoZDEsIGQyKVxyXG4gICAgICAgICAgICA6IERvY3VtZW50LmNvbXBhcmVCeUZpZWxkKHRoaXMuZmllbGQsIGQxLCBkMik7XHJcbiAgICAgICAgc3dpdGNoICh0aGlzLmRpcikge1xyXG4gICAgICAgICAgICBjYXNlIERpcmVjdGlvbi5BU0NFTkRJTkc6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY29tcGFyaXNvbjtcclxuICAgICAgICAgICAgY2FzZSBEaXJlY3Rpb24uREVTQ0VORElORzpcclxuICAgICAgICAgICAgICAgIHJldHVybiAtMSAqIGNvbXBhcmlzb247XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFpbCgnVW5rbm93biBkaXJlY3Rpb246ICcgKyB0aGlzLmRpcik7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIE9yZGVyQnkucHJvdG90eXBlLmNhbm9uaWNhbElkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vIFRPRE8oYi8yOTE4MzE2NSk6IE1ha2UgdGhpcyBjb2xsaXNpb24gcm9idXN0LlxyXG4gICAgICAgIHJldHVybiB0aGlzLmZpZWxkLmNhbm9uaWNhbFN0cmluZygpICsgdGhpcy5kaXIudG9TdHJpbmcoKTtcclxuICAgIH07XHJcbiAgICBPcmRlckJ5LnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5maWVsZC5jYW5vbmljYWxTdHJpbmcoKSArIFwiIChcIiArIHRoaXMuZGlyICsgXCIpXCI7XHJcbiAgICB9O1xyXG4gICAgT3JkZXJCeS5wcm90b3R5cGUuaXNFcXVhbCA9IGZ1bmN0aW9uIChvdGhlcikge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRpciA9PT0gb3RoZXIuZGlyICYmIHRoaXMuZmllbGQuaXNFcXVhbChvdGhlci5maWVsZCk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIE9yZGVyQnk7XHJcbn0oKSk7XHJcbnZhciBLRVlfT1JERVJJTkdfQVNDID0gbmV3IE9yZGVyQnkoRmllbGRQYXRoLmtleUZpZWxkKCksIERpcmVjdGlvbi5BU0NFTkRJTkcpO1xyXG52YXIgS0VZX09SREVSSU5HX0RFU0MgPSBuZXcgT3JkZXJCeShGaWVsZFBhdGgua2V5RmllbGQoKSwgRGlyZWN0aW9uLkRFU0NFTkRJTkcpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLy8gVE9PRChiLzE0MDkzODUxMik6IERyb3AgU2ltcGxlUXVlcnlFbmdpbmUgYW5kIHJlbmFtZSBJbmRleEZyZWVRdWVyeUVuZ2luZS5cclxuLyoqXHJcbiAqIEEgcXVlcnkgZW5naW5lIHRoYXQgdGFrZXMgYWR2YW50YWdlIG9mIHRoZSB0YXJnZXQgZG9jdW1lbnQgbWFwcGluZyBpbiB0aGVcclxuICogUXVlcnlDYWNoZS4gVGhlIEluZGV4RnJlZVF1ZXJ5RW5naW5lIG9wdGltaXplcyBxdWVyeSBleGVjdXRpb24gYnkgb25seVxyXG4gKiByZWFkaW5nIHRoZSBkb2N1bWVudHMgdGhhdCBwcmV2aW91c2x5IG1hdGNoZWQgYSBxdWVyeSBwbHVzIGFueSBkb2N1bWVudHMgdGhhdCB3ZXJlXHJcbiAqIGVkaXRlZCBhZnRlciB0aGUgcXVlcnkgd2FzIGxhc3QgbGlzdGVuZWQgdG8uXHJcbiAqXHJcbiAqIFRoZXJlIGFyZSBzb21lIGNhc2VzIHdoZXJlIEluZGV4LUZyZWUgcXVlcmllcyBhcmUgbm90IGd1YXJhbnRlZWQgdG8gcHJvZHVjZVxyXG4gKiB0aGUgc2FtZSByZXN1bHRzIGFzIGZ1bGwgY29sbGVjdGlvbiBzY2Fucy4gSW4gdGhlc2UgY2FzZXMsIHRoZVxyXG4gKiBJbmRleEZyZWVRdWVyeUVuZ2luZSBmYWxscyBiYWNrIHRvIGZ1bGwgcXVlcnkgcHJvY2Vzc2luZy4gVGhlc2UgY2FzZXMgYXJlOlxyXG4gKlxyXG4gKiAtIExpbWl0IHF1ZXJpZXMgd2hlcmUgYSBkb2N1bWVudCB0aGF0IG1hdGNoZWQgdGhlIHF1ZXJ5IHByZXZpb3VzbHkgbm8gbG9uZ2VyXHJcbiAqICAgbWF0Y2hlcyB0aGUgcXVlcnkuXHJcbiAqXHJcbiAqIC0gTGltaXQgcXVlcmllcyB3aGVyZSBhIGRvY3VtZW50IGVkaXQgbWF5IGNhdXNlIHRoZSBkb2N1bWVudCB0byBzb3J0IGJlbG93XHJcbiAqICAgYW5vdGhlciBkb2N1bWVudCB0aGF0IGlzIGluIHRoZSBsb2NhbCBjYWNoZS5cclxuICpcclxuICogLSBRdWVyaWVzIHRoYXQgaGF2ZSBuZXZlciBiZWVuIENVUlJFTlQgb3IgZnJlZSBvZiBMaW1ibyBkb2N1bWVudHMuXHJcbiAqL1xyXG52YXIgSW5kZXhGcmVlUXVlcnlFbmdpbmUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBJbmRleEZyZWVRdWVyeUVuZ2luZSgpIHtcclxuICAgIH1cclxuICAgIEluZGV4RnJlZVF1ZXJ5RW5naW5lLnByb3RvdHlwZS5zZXRMb2NhbERvY3VtZW50c1ZpZXcgPSBmdW5jdGlvbiAobG9jYWxEb2N1bWVudHMpIHtcclxuICAgICAgICB0aGlzLmxvY2FsRG9jdW1lbnRzVmlldyA9IGxvY2FsRG9jdW1lbnRzO1xyXG4gICAgfTtcclxuICAgIEluZGV4RnJlZVF1ZXJ5RW5naW5lLnByb3RvdHlwZS5nZXREb2N1bWVudHNNYXRjaGluZ1F1ZXJ5ID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCBxdWVyeSwgbGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbiwgcmVtb3RlS2V5cykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgYXNzZXJ0KHRoaXMubG9jYWxEb2N1bWVudHNWaWV3ICE9PSB1bmRlZmluZWQsICdzZXRMb2NhbERvY3VtZW50c1ZpZXcoKSBub3QgY2FsbGVkJyk7XHJcbiAgICAgICAgLy8gUXVlcmllcyB0aGF0IG1hdGNoIGFsbCBkb2N1bWVudHMgZG9uJ3QgYmVuZWZpdCBmcm9tIHVzaW5nXHJcbiAgICAgICAgLy8gSW5kZXhGcmVlUXVlcmllcy4gSXQgaXMgbW9yZSBlZmZpY2llbnQgdG8gc2NhbiBhbGwgZG9jdW1lbnRzIGluIGFcclxuICAgICAgICAvLyBjb2xsZWN0aW9uLCByYXRoZXIgdGhhbiB0byBwZXJmb3JtIGluZGl2aWR1YWwgbG9va3Vwcy5cclxuICAgICAgICBpZiAocXVlcnkubWF0Y2hlc0FsbERvY3VtZW50cygpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmV4ZWN1dGVGdWxsQ29sbGVjdGlvblNjYW4odHJhbnNhY3Rpb24sIHF1ZXJ5KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gUXVlcmllcyB0aGF0IGhhdmUgbmV2ZXIgc2VlbiBhIHNuYXBzaG90IHdpdGhvdXQgbGltYm8gZnJlZSBkb2N1bWVudHNcclxuICAgICAgICAvLyBzaG91bGQgYWxzbyBiZSBydW4gYXMgYSBmdWxsIGNvbGxlY3Rpb24gc2Nhbi5cclxuICAgICAgICBpZiAobGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbi5pc0VxdWFsKFNuYXBzaG90VmVyc2lvbi5NSU4pKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmV4ZWN1dGVGdWxsQ29sbGVjdGlvblNjYW4odHJhbnNhY3Rpb24sIHF1ZXJ5KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubG9jYWxEb2N1bWVudHNWaWV3LmdldERvY3VtZW50cyh0cmFuc2FjdGlvbiwgcmVtb3RlS2V5cykubmV4dChmdW5jdGlvbiAoZG9jdW1lbnRzKSB7XHJcbiAgICAgICAgICAgIHZhciBwcmV2aW91c1Jlc3VsdHMgPSBfdGhpcy5hcHBseVF1ZXJ5KHF1ZXJ5LCBkb2N1bWVudHMpO1xyXG4gICAgICAgICAgICBpZiAoKHF1ZXJ5Lmhhc0xpbWl0VG9GaXJzdCgpIHx8IHF1ZXJ5Lmhhc0xpbWl0VG9MYXN0KCkpICYmXHJcbiAgICAgICAgICAgICAgICBfdGhpcy5uZWVkc1JlZmlsbChxdWVyeS5saW1pdFR5cGUsIHByZXZpb3VzUmVzdWx0cywgcmVtb3RlS2V5cywgbGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbikpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5leGVjdXRlRnVsbENvbGxlY3Rpb25TY2FuKHRyYW5zYWN0aW9uLCBxdWVyeSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGdldExvZ0xldmVsKCkgPD0gTG9nTGV2ZWwuREVCVUcpIHtcclxuICAgICAgICAgICAgICAgIGRlYnVnKCdJbmRleEZyZWVRdWVyeUVuZ2luZScsICdSZS11c2luZyBwcmV2aW91cyByZXN1bHQgZnJvbSAlcyB0byBleGVjdXRlIHF1ZXJ5OiAlcycsIGxhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24udG9TdHJpbmcoKSwgcXVlcnkudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gUmV0cmlldmUgYWxsIHJlc3VsdHMgZm9yIGRvY3VtZW50cyB0aGF0IHdlcmUgdXBkYXRlZCBzaW5jZSB0aGUgbGFzdFxyXG4gICAgICAgICAgICAvLyBsaW1iby1kb2N1bWVudCBmcmVlIHJlbW90ZSBzbmFwc2hvdC5cclxuICAgICAgICAgICAgcmV0dXJuIF90aGlzLmxvY2FsRG9jdW1lbnRzVmlldy5nZXREb2N1bWVudHNNYXRjaGluZ1F1ZXJ5KHRyYW5zYWN0aW9uLCBxdWVyeSwgbGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbikubmV4dChmdW5jdGlvbiAodXBkYXRlZFJlc3VsdHMpIHtcclxuICAgICAgICAgICAgICAgIC8vIFdlIG1lcmdlIGBwcmV2aW91c1Jlc3VsdHNgIGludG8gYHVwZGF0ZVJlc3VsdHNgLCBzaW5jZVxyXG4gICAgICAgICAgICAgICAgLy8gYHVwZGF0ZVJlc3VsdHNgIGlzIGFscmVhZHkgYSBEb2N1bWVudE1hcC4gSWYgYSBkb2N1bWVudCBpc1xyXG4gICAgICAgICAgICAgICAgLy8gY29udGFpbmVkIGluIGJvdGggbGlzdHMsIHRoZW4gaXRzIGNvbnRlbnRzIGFyZSB0aGUgc2FtZS5cclxuICAgICAgICAgICAgICAgIHByZXZpb3VzUmVzdWx0cy5mb3JFYWNoKGZ1bmN0aW9uIChkb2MpIHtcclxuICAgICAgICAgICAgICAgICAgICB1cGRhdGVkUmVzdWx0cyA9IHVwZGF0ZWRSZXN1bHRzLmluc2VydChkb2Mua2V5LCBkb2MpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdXBkYXRlZFJlc3VsdHM7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKiBBcHBsaWVzIHRoZSBxdWVyeSBmaWx0ZXIgYW5kIHNvcnRpbmcgdG8gdGhlIHByb3ZpZGVkIGRvY3VtZW50cy4gICovXHJcbiAgICBJbmRleEZyZWVRdWVyeUVuZ2luZS5wcm90b3R5cGUuYXBwbHlRdWVyeSA9IGZ1bmN0aW9uIChxdWVyeSwgZG9jdW1lbnRzKSB7XHJcbiAgICAgICAgLy8gU29ydCB0aGUgZG9jdW1lbnRzIGFuZCByZS1hcHBseSB0aGUgcXVlcnkgZmlsdGVyIHNpbmNlIHByZXZpb3VzbHlcclxuICAgICAgICAvLyBtYXRjaGluZyBkb2N1bWVudHMgZG8gbm90IG5lY2Vzc2FyaWx5IHN0aWxsIG1hdGNoIHRoZSBxdWVyeS5cclxuICAgICAgICB2YXIgcXVlcnlSZXN1bHRzID0gbmV3IFNvcnRlZFNldChmdW5jdGlvbiAoZDEsIGQyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBxdWVyeS5kb2NDb21wYXJhdG9yKGQxLCBkMik7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgZG9jdW1lbnRzLmZvckVhY2goZnVuY3Rpb24gKF8sIG1heWJlRG9jKSB7XHJcbiAgICAgICAgICAgIGlmIChtYXliZURvYyBpbnN0YW5jZW9mIERvY3VtZW50ICYmIHF1ZXJ5Lm1hdGNoZXMobWF5YmVEb2MpKSB7XHJcbiAgICAgICAgICAgICAgICBxdWVyeVJlc3VsdHMgPSBxdWVyeVJlc3VsdHMuYWRkKG1heWJlRG9jKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBxdWVyeVJlc3VsdHM7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBEZXRlcm1pbmVzIGlmIGEgbGltaXQgcXVlcnkgbmVlZHMgdG8gYmUgcmVmaWxsZWQgZnJvbSBjYWNoZSwgbWFraW5nIGl0XHJcbiAgICAgKiBpbmVsaWdpYmxlIGZvciBpbmRleC1mcmVlIGV4ZWN1dGlvbi5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gc29ydGVkUHJldmlvdXNSZXN1bHRzIFRoZSBkb2N1bWVudHMgdGhhdCBtYXRjaGVkIHRoZSBxdWVyeSB3aGVuIGl0XHJcbiAgICAgKiB3YXMgbGFzdCBzeW5jaHJvbml6ZWQsIHNvcnRlZCBieSB0aGUgcXVlcnkncyBjb21wYXJhdG9yLlxyXG4gICAgICogQHBhcmFtIHJlbW90ZUtleXMgVGhlIGRvY3VtZW50IGtleXMgdGhhdCBtYXRjaGVkIHRoZSBxdWVyeSBhdCB0aGUgbGFzdFxyXG4gICAgICogc25hcHNob3QuXHJcbiAgICAgKiBAcGFyYW0gbGltYm9GcmVlU25hcHNob3RWZXJzaW9uIFRoZSB2ZXJzaW9uIG9mIHRoZSBzbmFwc2hvdCB3aGVuIHRoZSBxdWVyeVxyXG4gICAgICogd2FzIGxhc3Qgc3luY2hyb25pemVkLlxyXG4gICAgICovXHJcbiAgICBJbmRleEZyZWVRdWVyeUVuZ2luZS5wcm90b3R5cGUubmVlZHNSZWZpbGwgPSBmdW5jdGlvbiAobGltaXRUeXBlLCBzb3J0ZWRQcmV2aW91c1Jlc3VsdHMsIHJlbW90ZUtleXMsIGxpbWJvRnJlZVNuYXBzaG90VmVyc2lvbikge1xyXG4gICAgICAgIC8vIFRoZSBxdWVyeSBuZWVkcyB0byBiZSByZWZpbGxlZCBpZiBhIHByZXZpb3VzbHkgbWF0Y2hpbmcgZG9jdW1lbnQgbm9cclxuICAgICAgICAvLyBsb25nZXIgbWF0Y2hlcy5cclxuICAgICAgICBpZiAocmVtb3RlS2V5cy5zaXplICE9PSBzb3J0ZWRQcmV2aW91c1Jlc3VsdHMuc2l6ZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gTGltaXQgcXVlcmllcyBhcmUgbm90IGVsaWdpYmxlIGZvciBpbmRleC1mcmVlIHF1ZXJ5IGV4ZWN1dGlvbiBpZiB0aGVyZSBpc1xyXG4gICAgICAgIC8vIGEgcG90ZW50aWFsIHRoYXQgYW4gb2xkZXIgZG9jdW1lbnQgZnJvbSBjYWNoZSBub3cgc29ydHMgYmVmb3JlIGEgZG9jdW1lbnRcclxuICAgICAgICAvLyB0aGF0IHdhcyBwcmV2aW91c2x5IHBhcnQgb2YgdGhlIGxpbWl0LiBUaGlzLCBob3dldmVyLCBjYW4gb25seSBoYXBwZW4gaWZcclxuICAgICAgICAvLyB0aGUgZG9jdW1lbnQgYXQgdGhlIGVkZ2Ugb2YgdGhlIGxpbWl0IGdvZXMgb3V0IG9mIGxpbWl0LlxyXG4gICAgICAgIC8vIElmIGEgZG9jdW1lbnQgdGhhdCBpcyBub3QgdGhlIGxpbWl0IGJvdW5kYXJ5IHNvcnRzIGRpZmZlcmVudGx5LFxyXG4gICAgICAgIC8vIHRoZSBib3VuZGFyeSBvZiB0aGUgbGltaXQgaXRzZWxmIGRpZCBub3QgY2hhbmdlIGFuZCBkb2N1bWVudHMgZnJvbSBjYWNoZVxyXG4gICAgICAgIC8vIHdpbGwgY29udGludWUgdG8gYmUgXCJyZWplY3RlZFwiIGJ5IHRoaXMgYm91bmRhcnkuIFRoZXJlZm9yZSwgd2UgY2FuIGlnbm9yZVxyXG4gICAgICAgIC8vIGFueSBtb2RpZmljYXRpb25zIHRoYXQgZG9uJ3QgYWZmZWN0IHRoZSBsYXN0IGRvY3VtZW50LlxyXG4gICAgICAgIHZhciBkb2NBdExpbWl0RWRnZSA9IGxpbWl0VHlwZSA9PT0gTGltaXRUeXBlLkZpcnN0XHJcbiAgICAgICAgICAgID8gc29ydGVkUHJldmlvdXNSZXN1bHRzLmxhc3QoKVxyXG4gICAgICAgICAgICA6IHNvcnRlZFByZXZpb3VzUmVzdWx0cy5maXJzdCgpO1xyXG4gICAgICAgIGlmICghZG9jQXRMaW1pdEVkZ2UpIHtcclxuICAgICAgICAgICAgLy8gV2UgZG9uJ3QgbmVlZCB0byByZWZpbGwgdGhlIHF1ZXJ5IGlmIHRoZXJlIHdlcmUgYWxyZWFkeSBubyBkb2N1bWVudHMuXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIChkb2NBdExpbWl0RWRnZS5oYXNQZW5kaW5nV3JpdGVzIHx8XHJcbiAgICAgICAgICAgIGRvY0F0TGltaXRFZGdlLnZlcnNpb24uY29tcGFyZVRvKGxpbWJvRnJlZVNuYXBzaG90VmVyc2lvbikgPiAwKTtcclxuICAgIH07XHJcbiAgICBJbmRleEZyZWVRdWVyeUVuZ2luZS5wcm90b3R5cGUuZXhlY3V0ZUZ1bGxDb2xsZWN0aW9uU2NhbiA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwgcXVlcnkpIHtcclxuICAgICAgICBpZiAoZ2V0TG9nTGV2ZWwoKSA8PSBMb2dMZXZlbC5ERUJVRykge1xyXG4gICAgICAgICAgICBkZWJ1ZygnSW5kZXhGcmVlUXVlcnlFbmdpbmUnLCAnVXNpbmcgZnVsbCBjb2xsZWN0aW9uIHNjYW4gdG8gZXhlY3V0ZSBxdWVyeTogJXMnLCBxdWVyeS50b1N0cmluZygpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubG9jYWxEb2N1bWVudHNWaWV3LmdldERvY3VtZW50c01hdGNoaW5nUXVlcnkodHJhbnNhY3Rpb24sIHF1ZXJ5LCBTbmFwc2hvdFZlcnNpb24uTUlOKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gSW5kZXhGcmVlUXVlcnlFbmdpbmU7XHJcbn0oKSk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQSByZWFkb25seSB2aWV3IG9mIHRoZSBsb2NhbCBzdGF0ZSBvZiBhbGwgZG9jdW1lbnRzIHdlJ3JlIHRyYWNraW5nIChpLmUuIHdlXHJcbiAqIGhhdmUgYSBjYWNoZWQgdmVyc2lvbiBpbiByZW1vdGVEb2N1bWVudENhY2hlIG9yIGxvY2FsIG11dGF0aW9ucyBmb3IgdGhlXHJcbiAqIGRvY3VtZW50KS4gVGhlIHZpZXcgaXMgY29tcHV0ZWQgYnkgYXBwbHlpbmcgdGhlIG11dGF0aW9ucyBpbiB0aGVcclxuICogTXV0YXRpb25RdWV1ZSB0byB0aGUgUmVtb3RlRG9jdW1lbnRDYWNoZS5cclxuICovXHJcbnZhciBMb2NhbERvY3VtZW50c1ZpZXcgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBMb2NhbERvY3VtZW50c1ZpZXcocmVtb3RlRG9jdW1lbnRDYWNoZSwgbXV0YXRpb25RdWV1ZSwgaW5kZXhNYW5hZ2VyKSB7XHJcbiAgICAgICAgdGhpcy5yZW1vdGVEb2N1bWVudENhY2hlID0gcmVtb3RlRG9jdW1lbnRDYWNoZTtcclxuICAgICAgICB0aGlzLm11dGF0aW9uUXVldWUgPSBtdXRhdGlvblF1ZXVlO1xyXG4gICAgICAgIHRoaXMuaW5kZXhNYW5hZ2VyID0gaW5kZXhNYW5hZ2VyO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgdGhlIGxvY2FsIHZpZXcgb2YgdGhlIGRvY3VtZW50IGlkZW50aWZpZWQgYnkgYGtleWAuXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybiBMb2NhbCB2aWV3IG9mIHRoZSBkb2N1bWVudCBvciBudWxsIGlmIHdlIGRvbid0IGhhdmUgYW55IGNhY2hlZFxyXG4gICAgICogc3RhdGUgZm9yIGl0LlxyXG4gICAgICovXHJcbiAgICBMb2NhbERvY3VtZW50c1ZpZXcucHJvdG90eXBlLmdldERvY3VtZW50ID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCBrZXkpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiB0aGlzLm11dGF0aW9uUXVldWVcclxuICAgICAgICAgICAgLmdldEFsbE11dGF0aW9uQmF0Y2hlc0FmZmVjdGluZ0RvY3VtZW50S2V5KHRyYW5zYWN0aW9uLCBrZXkpXHJcbiAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uIChiYXRjaGVzKSB7IHJldHVybiBfdGhpcy5nZXREb2N1bWVudEludGVybmFsKHRyYW5zYWN0aW9uLCBrZXksIGJhdGNoZXMpOyB9KTtcclxuICAgIH07XHJcbiAgICAvKiogSW50ZXJuYWwgdmVyc2lvbiBvZiBgZ2V0RG9jdW1lbnRgIHRoYXQgYWxsb3dzIHJldXNpbmcgYmF0Y2hlcy4gKi9cclxuICAgIExvY2FsRG9jdW1lbnRzVmlldy5wcm90b3R5cGUuZ2V0RG9jdW1lbnRJbnRlcm5hbCA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwga2V5LCBpbkJhdGNoZXMpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5yZW1vdGVEb2N1bWVudENhY2hlLmdldEVudHJ5KHRyYW5zYWN0aW9uLCBrZXkpLm5leHQoZnVuY3Rpb24gKGRvYykge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGluQmF0Y2hlc18xID0gaW5CYXRjaGVzOyBfaSA8IGluQmF0Y2hlc18xLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGJhdGNoID0gaW5CYXRjaGVzXzFbX2ldO1xyXG4gICAgICAgICAgICAgICAgZG9jID0gYmF0Y2guYXBwbHlUb0xvY2FsVmlldyhrZXksIGRvYyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGRvYztcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvLyBSZXR1cm5zIHRoZSB2aWV3IG9mIHRoZSBnaXZlbiBgZG9jc2AgYXMgdGhleSB3b3VsZCBhcHBlYXIgYWZ0ZXIgYXBwbHlpbmdcclxuICAgIC8vIGFsbCBtdXRhdGlvbnMgaW4gdGhlIGdpdmVuIGBiYXRjaGVzYC5cclxuICAgIExvY2FsRG9jdW1lbnRzVmlldy5wcm90b3R5cGUuYXBwbHlMb2NhbE11dGF0aW9uc1RvRG9jdW1lbnRzID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCBkb2NzLCBiYXRjaGVzKSB7XHJcbiAgICAgICAgdmFyIHJlc3VsdHMgPSBudWxsYWJsZU1heWJlRG9jdW1lbnRNYXAoKTtcclxuICAgICAgICBkb2NzLmZvckVhY2goZnVuY3Rpb24gKGtleSwgbG9jYWxWaWV3KSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgYmF0Y2hlc18xID0gYmF0Y2hlczsgX2kgPCBiYXRjaGVzXzEubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYmF0Y2ggPSBiYXRjaGVzXzFbX2ldO1xyXG4gICAgICAgICAgICAgICAgbG9jYWxWaWV3ID0gYmF0Y2guYXBwbHlUb0xvY2FsVmlldyhrZXksIGxvY2FsVmlldyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmVzdWx0cyA9IHJlc3VsdHMuaW5zZXJ0KGtleSwgbG9jYWxWaWV3KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gcmVzdWx0cztcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEdldHMgdGhlIGxvY2FsIHZpZXcgb2YgdGhlIGRvY3VtZW50cyBpZGVudGlmaWVkIGJ5IGBrZXlzYC5cclxuICAgICAqXHJcbiAgICAgKiBJZiB3ZSBkb24ndCBoYXZlIGNhY2hlZCBzdGF0ZSBmb3IgYSBkb2N1bWVudCBpbiBga2V5c2AsIGEgTm9Eb2N1bWVudCB3aWxsXHJcbiAgICAgKiBiZSBzdG9yZWQgZm9yIHRoYXQga2V5IGluIHRoZSByZXN1bHRpbmcgc2V0LlxyXG4gICAgICovXHJcbiAgICBMb2NhbERvY3VtZW50c1ZpZXcucHJvdG90eXBlLmdldERvY3VtZW50cyA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwga2V5cykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucmVtb3RlRG9jdW1lbnRDYWNoZVxyXG4gICAgICAgICAgICAuZ2V0RW50cmllcyh0cmFuc2FjdGlvbiwga2V5cylcclxuICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKGRvY3MpIHsgcmV0dXJuIF90aGlzLmdldExvY2FsVmlld09mRG9jdW1lbnRzKHRyYW5zYWN0aW9uLCBkb2NzKTsgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBTaW1pbGFyIHRvIGBnZXREb2N1bWVudHNgLCBidXQgY3JlYXRlcyB0aGUgbG9jYWwgdmlldyBmcm9tIHRoZSBnaXZlblxyXG4gICAgICogYGJhc2VEb2NzYCB3aXRob3V0IHJldHJpZXZpbmcgZG9jdW1lbnRzIGZyb20gdGhlIGxvY2FsIHN0b3JlLlxyXG4gICAgICovXHJcbiAgICBMb2NhbERvY3VtZW50c1ZpZXcucHJvdG90eXBlLmdldExvY2FsVmlld09mRG9jdW1lbnRzID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCBiYXNlRG9jcykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubXV0YXRpb25RdWV1ZVxyXG4gICAgICAgICAgICAuZ2V0QWxsTXV0YXRpb25CYXRjaGVzQWZmZWN0aW5nRG9jdW1lbnRLZXlzKHRyYW5zYWN0aW9uLCBiYXNlRG9jcylcclxuICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKGJhdGNoZXMpIHtcclxuICAgICAgICAgICAgdmFyIGRvY3MgPSBfdGhpcy5hcHBseUxvY2FsTXV0YXRpb25zVG9Eb2N1bWVudHModHJhbnNhY3Rpb24sIGJhc2VEb2NzLCBiYXRjaGVzKTtcclxuICAgICAgICAgICAgdmFyIHJlc3VsdHMgPSBtYXliZURvY3VtZW50TWFwKCk7XHJcbiAgICAgICAgICAgIGRvY3MuZm9yRWFjaChmdW5jdGlvbiAoa2V5LCBtYXliZURvYykge1xyXG4gICAgICAgICAgICAgICAgLy8gVE9ETyhodHRwOi8vYi8zMjI3NTM3OCk6IERvbid0IGNvbmZsYXRlIG1pc3NpbmcgLyBkZWxldGVkLlxyXG4gICAgICAgICAgICAgICAgaWYgKCFtYXliZURvYykge1xyXG4gICAgICAgICAgICAgICAgICAgIG1heWJlRG9jID0gbmV3IE5vRG9jdW1lbnQoa2V5LCBTbmFwc2hvdFZlcnNpb24uZm9yRGVsZXRlZERvYygpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJlc3VsdHMgPSByZXN1bHRzLmluc2VydChrZXksIG1heWJlRG9jKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiByZXN1bHRzO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUGVyZm9ybXMgYSBxdWVyeSBhZ2FpbnN0IHRoZSBsb2NhbCB2aWV3IG9mIGFsbCBkb2N1bWVudHMuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHRyYW5zYWN0aW9uIFRoZSBwZXJzaXN0ZW5jZSB0cmFuc2FjdGlvbi5cclxuICAgICAqIEBwYXJhbSBxdWVyeSBUaGUgcXVlcnkgdG8gbWF0Y2ggZG9jdW1lbnRzIGFnYWluc3QuXHJcbiAgICAgKiBAcGFyYW0gc2luY2VSZWFkVGltZSBJZiBub3Qgc2V0IHRvIFNuYXBzaG90VmVyc2lvbi5NSU4sIHJldHVybiBvbmx5XHJcbiAgICAgKiAgICAgZG9jdW1lbnRzIHRoYXQgaGF2ZSBiZWVuIHJlYWQgc2luY2UgdGhpcyBzbmFwc2hvdCB2ZXJzaW9uIChleGNsdXNpdmUpLlxyXG4gICAgICovXHJcbiAgICBMb2NhbERvY3VtZW50c1ZpZXcucHJvdG90eXBlLmdldERvY3VtZW50c01hdGNoaW5nUXVlcnkgPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24sIHF1ZXJ5LCBzaW5jZVJlYWRUaW1lKSB7XHJcbiAgICAgICAgaWYgKHF1ZXJ5LmlzRG9jdW1lbnRRdWVyeSgpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldERvY3VtZW50c01hdGNoaW5nRG9jdW1lbnRRdWVyeSh0cmFuc2FjdGlvbiwgcXVlcnkucGF0aCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHF1ZXJ5LmlzQ29sbGVjdGlvbkdyb3VwUXVlcnkoKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXREb2N1bWVudHNNYXRjaGluZ0NvbGxlY3Rpb25Hcm91cFF1ZXJ5KHRyYW5zYWN0aW9uLCBxdWVyeSwgc2luY2VSZWFkVGltZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXREb2N1bWVudHNNYXRjaGluZ0NvbGxlY3Rpb25RdWVyeSh0cmFuc2FjdGlvbiwgcXVlcnksIHNpbmNlUmVhZFRpbWUpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBMb2NhbERvY3VtZW50c1ZpZXcucHJvdG90eXBlLmdldERvY3VtZW50c01hdGNoaW5nRG9jdW1lbnRRdWVyeSA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwgZG9jUGF0aCkge1xyXG4gICAgICAgIC8vIEp1c3QgZG8gYSBzaW1wbGUgZG9jdW1lbnQgbG9va3VwLlxyXG4gICAgICAgIHJldHVybiB0aGlzLmdldERvY3VtZW50KHRyYW5zYWN0aW9uLCBuZXcgRG9jdW1lbnRLZXkoZG9jUGF0aCkpLm5leHQoZnVuY3Rpb24gKG1heWJlRG9jKSB7XHJcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSBkb2N1bWVudE1hcCgpO1xyXG4gICAgICAgICAgICBpZiAobWF5YmVEb2MgaW5zdGFuY2VvZiBEb2N1bWVudCkge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gcmVzdWx0Lmluc2VydChtYXliZURvYy5rZXksIG1heWJlRG9jKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIExvY2FsRG9jdW1lbnRzVmlldy5wcm90b3R5cGUuZ2V0RG9jdW1lbnRzTWF0Y2hpbmdDb2xsZWN0aW9uR3JvdXBRdWVyeSA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwgcXVlcnksIHNpbmNlUmVhZFRpbWUpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIGFzc2VydChxdWVyeS5wYXRoLmlzRW1wdHkoKSwgJ0N1cnJlbnRseSB3ZSBvbmx5IHN1cHBvcnQgY29sbGVjdGlvbiBncm91cCBxdWVyaWVzIGF0IHRoZSByb290LicpO1xyXG4gICAgICAgIHZhciBjb2xsZWN0aW9uSWQgPSBxdWVyeS5jb2xsZWN0aW9uR3JvdXA7XHJcbiAgICAgICAgdmFyIHJlc3VsdHMgPSBkb2N1bWVudE1hcCgpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmluZGV4TWFuYWdlclxyXG4gICAgICAgICAgICAuZ2V0Q29sbGVjdGlvblBhcmVudHModHJhbnNhY3Rpb24sIGNvbGxlY3Rpb25JZClcclxuICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKHBhcmVudHMpIHtcclxuICAgICAgICAgICAgLy8gUGVyZm9ybSBhIGNvbGxlY3Rpb24gcXVlcnkgYWdhaW5zdCBlYWNoIHBhcmVudCB0aGF0IGNvbnRhaW5zIHRoZVxyXG4gICAgICAgICAgICAvLyBjb2xsZWN0aW9uSWQgYW5kIGFnZ3JlZ2F0ZSB0aGUgcmVzdWx0cy5cclxuICAgICAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5mb3JFYWNoKHBhcmVudHMsIGZ1bmN0aW9uIChwYXJlbnQpIHtcclxuICAgICAgICAgICAgICAgIHZhciBjb2xsZWN0aW9uUXVlcnkgPSBxdWVyeS5hc0NvbGxlY3Rpb25RdWVyeUF0UGF0aChwYXJlbnQuY2hpbGQoY29sbGVjdGlvbklkKSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuZ2V0RG9jdW1lbnRzTWF0Y2hpbmdDb2xsZWN0aW9uUXVlcnkodHJhbnNhY3Rpb24sIGNvbGxlY3Rpb25RdWVyeSwgc2luY2VSZWFkVGltZSkubmV4dChmdW5jdGlvbiAocikge1xyXG4gICAgICAgICAgICAgICAgICAgIHIuZm9yRWFjaChmdW5jdGlvbiAoa2V5LCBkb2MpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0cyA9IHJlc3VsdHMuaW5zZXJ0KGtleSwgZG9jKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KS5uZXh0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIHJlc3VsdHM7IH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIExvY2FsRG9jdW1lbnRzVmlldy5wcm90b3R5cGUuZ2V0RG9jdW1lbnRzTWF0Y2hpbmdDb2xsZWN0aW9uUXVlcnkgPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24sIHF1ZXJ5LCBzaW5jZVJlYWRUaW1lKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICAvLyBRdWVyeSB0aGUgcmVtb3RlIGRvY3VtZW50cyBhbmQgb3ZlcmxheSBtdXRhdGlvbnMuXHJcbiAgICAgICAgdmFyIHJlc3VsdHM7XHJcbiAgICAgICAgdmFyIG11dGF0aW9uQmF0Y2hlcztcclxuICAgICAgICByZXR1cm4gdGhpcy5yZW1vdGVEb2N1bWVudENhY2hlXHJcbiAgICAgICAgICAgIC5nZXREb2N1bWVudHNNYXRjaGluZ1F1ZXJ5KHRyYW5zYWN0aW9uLCBxdWVyeSwgc2luY2VSZWFkVGltZSlcclxuICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKHF1ZXJ5UmVzdWx0cykge1xyXG4gICAgICAgICAgICByZXN1bHRzID0gcXVlcnlSZXN1bHRzO1xyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXMubXV0YXRpb25RdWV1ZS5nZXRBbGxNdXRhdGlvbkJhdGNoZXNBZmZlY3RpbmdRdWVyeSh0cmFuc2FjdGlvbiwgcXVlcnkpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uIChtYXRjaGluZ011dGF0aW9uQmF0Y2hlcykge1xyXG4gICAgICAgICAgICBtdXRhdGlvbkJhdGNoZXMgPSBtYXRjaGluZ011dGF0aW9uQmF0Y2hlcztcclxuICAgICAgICAgICAgLy8gSXQgaXMgcG9zc2libGUgdGhhdCBhIFBhdGNoTXV0YXRpb24gY2FuIG1ha2UgYSBkb2N1bWVudCBtYXRjaCBhIHF1ZXJ5LCBldmVuIGlmXHJcbiAgICAgICAgICAgIC8vIHRoZSB2ZXJzaW9uIGluIHRoZSBSZW1vdGVEb2N1bWVudENhY2hlIGlzIG5vdCBhIG1hdGNoIHlldCAod2FpdGluZyBmb3Igc2VydmVyXHJcbiAgICAgICAgICAgIC8vIHRvIGFjaykuIFRvIGhhbmRsZSB0aGlzLCB3ZSBmaW5kIGFsbCBkb2N1bWVudCBrZXlzIGFmZmVjdGVkIGJ5IHRoZSBQYXRjaE11dGF0aW9uc1xyXG4gICAgICAgICAgICAvLyB0aGF0IGFyZSBub3QgaW4gYHJlc3VsdGAgeWV0LCBhbmQgYmFjayBmaWxsIHRoZW0gdmlhIGByZW1vdGVEb2N1bWVudENhY2hlLmdldEVudHJpZXNgLFxyXG4gICAgICAgICAgICAvLyBvdGhlcndpc2UgdGhvc2UgYFBhdGNoTXV0YXRpb25zYCB3aWxsIGJlIGlnbm9yZWQgYmVjYXVzZSBubyBiYXNlIGRvY3VtZW50IGNhbiBiZSBmb3VuZCxcclxuICAgICAgICAgICAgLy8gYW5kIGxlYWQgdG8gbWlzc2luZyByZXN1bHQgZm9yIHRoZSBxdWVyeS5cclxuICAgICAgICAgICAgcmV0dXJuIF90aGlzLmFkZE1pc3NpbmdCYXNlRG9jdW1lbnRzKHRyYW5zYWN0aW9uLCBtdXRhdGlvbkJhdGNoZXMsIHJlc3VsdHMpLm5leHQoZnVuY3Rpb24gKG1lcmdlZERvY3VtZW50cykge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0cyA9IG1lcmdlZERvY3VtZW50cztcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgbXV0YXRpb25CYXRjaGVzXzEgPSBtdXRhdGlvbkJhdGNoZXM7IF9pIDwgbXV0YXRpb25CYXRjaGVzXzEubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJhdGNoID0gbXV0YXRpb25CYXRjaGVzXzFbX2ldO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIF9hID0gMCwgX2IgPSBiYXRjaC5tdXRhdGlvbnM7IF9hIDwgX2IubGVuZ3RoOyBfYSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtdXRhdGlvbiA9IF9iW19hXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGtleSA9IG11dGF0aW9uLmtleTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJhc2VEb2MgPSByZXN1bHRzLmdldChrZXkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbXV0YXRlZERvYyA9IG11dGF0aW9uLmFwcGx5VG9Mb2NhbFZpZXcoYmFzZURvYywgYmFzZURvYywgYmF0Y2gubG9jYWxXcml0ZVRpbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobXV0YXRlZERvYyBpbnN0YW5jZW9mIERvY3VtZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRzID0gcmVzdWx0cy5pbnNlcnQoa2V5LCBtdXRhdGVkRG9jKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdHMgPSByZXN1bHRzLnJlbW92ZShrZXkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAubmV4dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIC8vIEZpbmFsbHksIGZpbHRlciBvdXQgYW55IGRvY3VtZW50cyB0aGF0IGRvbid0IGFjdHVhbGx5IG1hdGNoXHJcbiAgICAgICAgICAgIC8vIHRoZSBxdWVyeS5cclxuICAgICAgICAgICAgcmVzdWx0cy5mb3JFYWNoKGZ1bmN0aW9uIChrZXksIGRvYykge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFxdWVyeS5tYXRjaGVzKGRvYykpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHRzID0gcmVzdWx0cy5yZW1vdmUoa2V5KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiByZXN1bHRzO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIExvY2FsRG9jdW1lbnRzVmlldy5wcm90b3R5cGUuYWRkTWlzc2luZ0Jhc2VEb2N1bWVudHMgPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24sIG1hdGNoaW5nTXV0YXRpb25CYXRjaGVzLCBleGlzdGluZ0RvY3VtZW50cykge1xyXG4gICAgICAgIHZhciBtaXNzaW5nQmFzZURvY0VudHJpZXNGb3JQYXRjaGluZyA9IGRvY3VtZW50S2V5U2V0KCk7XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBtYXRjaGluZ011dGF0aW9uQmF0Y2hlc18xID0gbWF0Y2hpbmdNdXRhdGlvbkJhdGNoZXM7IF9pIDwgbWF0Y2hpbmdNdXRhdGlvbkJhdGNoZXNfMS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgdmFyIGJhdGNoID0gbWF0Y2hpbmdNdXRhdGlvbkJhdGNoZXNfMVtfaV07XHJcbiAgICAgICAgICAgIGZvciAodmFyIF9hID0gMCwgX2IgPSBiYXRjaC5tdXRhdGlvbnM7IF9hIDwgX2IubGVuZ3RoOyBfYSsrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbXV0YXRpb24gPSBfYltfYV07XHJcbiAgICAgICAgICAgICAgICBpZiAobXV0YXRpb24gaW5zdGFuY2VvZiBQYXRjaE11dGF0aW9uICYmXHJcbiAgICAgICAgICAgICAgICAgICAgZXhpc3RpbmdEb2N1bWVudHMuZ2V0KG11dGF0aW9uLmtleSkgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICBtaXNzaW5nQmFzZURvY0VudHJpZXNGb3JQYXRjaGluZyA9IG1pc3NpbmdCYXNlRG9jRW50cmllc0ZvclBhdGNoaW5nLmFkZChtdXRhdGlvbi5rZXkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBtZXJnZWREb2N1bWVudHMgPSBleGlzdGluZ0RvY3VtZW50cztcclxuICAgICAgICByZXR1cm4gdGhpcy5yZW1vdGVEb2N1bWVudENhY2hlXHJcbiAgICAgICAgICAgIC5nZXRFbnRyaWVzKHRyYW5zYWN0aW9uLCBtaXNzaW5nQmFzZURvY0VudHJpZXNGb3JQYXRjaGluZylcclxuICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKG1pc3NpbmdCYXNlRG9jcykge1xyXG4gICAgICAgICAgICBtaXNzaW5nQmFzZURvY3MuZm9yRWFjaChmdW5jdGlvbiAoa2V5LCBkb2MpIHtcclxuICAgICAgICAgICAgICAgIGlmIChkb2MgIT09IG51bGwgJiYgZG9jIGluc3RhbmNlb2YgRG9jdW1lbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICBtZXJnZWREb2N1bWVudHMgPSBtZXJnZWREb2N1bWVudHMuaW5zZXJ0KGtleSwgZG9jKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiBtZXJnZWREb2N1bWVudHM7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIExvY2FsRG9jdW1lbnRzVmlldztcclxufSgpKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBBIGNvbGxlY3Rpb24gb2YgcmVmZXJlbmNlcyB0byBhIGRvY3VtZW50IGZyb20gc29tZSBraW5kIG9mIG51bWJlcmVkIGVudGl0eVxyXG4gKiAoZWl0aGVyIGEgdGFyZ2V0IElEIG9yIGJhdGNoIElEKS4gQXMgcmVmZXJlbmNlcyBhcmUgYWRkZWQgdG8gb3IgcmVtb3ZlZCBmcm9tXHJcbiAqIHRoZSBzZXQgY29ycmVzcG9uZGluZyBldmVudHMgYXJlIGVtaXR0ZWQgdG8gYSByZWdpc3RlcmVkIGdhcmJhZ2UgY29sbGVjdG9yLlxyXG4gKlxyXG4gKiBFYWNoIHJlZmVyZW5jZSBpcyByZXByZXNlbnRlZCBieSBhIERvY3VtZW50UmVmZXJlbmNlIG9iamVjdC4gRWFjaCBvZiB0aGVtXHJcbiAqIGNvbnRhaW5zIGVub3VnaCBpbmZvcm1hdGlvbiB0byB1bmlxdWVseSBpZGVudGlmeSB0aGUgcmVmZXJlbmNlLiBUaGV5IGFyZSBhbGxcclxuICogc3RvcmVkIHByaW1hcmlseSBpbiBhIHNldCBzb3J0ZWQgYnkga2V5LiBBIGRvY3VtZW50IGlzIGNvbnNpZGVyZWQgZ2FyYmFnZSBpZlxyXG4gKiB0aGVyZSdzIG5vIHJlZmVyZW5jZXMgaW4gdGhhdCBzZXQgKHRoaXMgY2FuIGJlIGVmZmljaWVudGx5IGNoZWNrZWQgdGhhbmtzIHRvXHJcbiAqIHNvcnRpbmcgYnkga2V5KS5cclxuICpcclxuICogUmVmZXJlbmNlU2V0IGFsc28ga2VlcHMgYSBzZWNvbmRhcnkgc2V0IHRoYXQgY29udGFpbnMgcmVmZXJlbmNlcyBzb3J0ZWQgYnlcclxuICogSURzLiBUaGlzIG9uZSBpcyB1c2VkIHRvIGVmZmljaWVudGx5IGltcGxlbWVudCByZW1vdmFsIG9mIGFsbCByZWZlcmVuY2VzIGJ5XHJcbiAqIHNvbWUgdGFyZ2V0IElELlxyXG4gKi9cclxudmFyIFJlZmVyZW5jZVNldCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFJlZmVyZW5jZVNldCgpIHtcclxuICAgICAgICAvLyBBIHNldCBvZiBvdXRzdGFuZGluZyByZWZlcmVuY2VzIHRvIGEgZG9jdW1lbnQgc29ydGVkIGJ5IGtleS5cclxuICAgICAgICB0aGlzLnJlZnNCeUtleSA9IG5ldyBTb3J0ZWRTZXQoRG9jUmVmZXJlbmNlLmNvbXBhcmVCeUtleSk7XHJcbiAgICAgICAgLy8gQSBzZXQgb2Ygb3V0c3RhbmRpbmcgcmVmZXJlbmNlcyB0byBhIGRvY3VtZW50IHNvcnRlZCBieSB0YXJnZXQgaWQuXHJcbiAgICAgICAgdGhpcy5yZWZzQnlUYXJnZXQgPSBuZXcgU29ydGVkU2V0KERvY1JlZmVyZW5jZS5jb21wYXJlQnlUYXJnZXRJZCk7XHJcbiAgICB9XHJcbiAgICAvKiogUmV0dXJucyB0cnVlIGlmIHRoZSByZWZlcmVuY2Ugc2V0IGNvbnRhaW5zIG5vIHJlZmVyZW5jZXMuICovXHJcbiAgICBSZWZlcmVuY2VTZXQucHJvdG90eXBlLmlzRW1wdHkgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucmVmc0J5S2V5LmlzRW1wdHkoKTtcclxuICAgIH07XHJcbiAgICAvKiogQWRkcyBhIHJlZmVyZW5jZSB0byB0aGUgZ2l2ZW4gZG9jdW1lbnQga2V5IGZvciB0aGUgZ2l2ZW4gSUQuICovXHJcbiAgICBSZWZlcmVuY2VTZXQucHJvdG90eXBlLmFkZFJlZmVyZW5jZSA9IGZ1bmN0aW9uIChrZXksIGlkKSB7XHJcbiAgICAgICAgdmFyIHJlZiA9IG5ldyBEb2NSZWZlcmVuY2Uoa2V5LCBpZCk7XHJcbiAgICAgICAgdGhpcy5yZWZzQnlLZXkgPSB0aGlzLnJlZnNCeUtleS5hZGQocmVmKTtcclxuICAgICAgICB0aGlzLnJlZnNCeVRhcmdldCA9IHRoaXMucmVmc0J5VGFyZ2V0LmFkZChyZWYpO1xyXG4gICAgfTtcclxuICAgIC8qKiBBZGQgcmVmZXJlbmNlcyB0byB0aGUgZ2l2ZW4gZG9jdW1lbnQga2V5cyBmb3IgdGhlIGdpdmVuIElELiAqL1xyXG4gICAgUmVmZXJlbmNlU2V0LnByb3RvdHlwZS5hZGRSZWZlcmVuY2VzID0gZnVuY3Rpb24gKGtleXMsIGlkKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBrZXlzLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyByZXR1cm4gX3RoaXMuYWRkUmVmZXJlbmNlKGtleSwgaWQpOyB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJlbW92ZXMgYSByZWZlcmVuY2UgdG8gdGhlIGdpdmVuIGRvY3VtZW50IGtleSBmb3IgdGhlIGdpdmVuXHJcbiAgICAgKiBJRC5cclxuICAgICAqL1xyXG4gICAgUmVmZXJlbmNlU2V0LnByb3RvdHlwZS5yZW1vdmVSZWZlcmVuY2UgPSBmdW5jdGlvbiAoa2V5LCBpZCkge1xyXG4gICAgICAgIHRoaXMucmVtb3ZlUmVmKG5ldyBEb2NSZWZlcmVuY2Uoa2V5LCBpZCkpO1xyXG4gICAgfTtcclxuICAgIFJlZmVyZW5jZVNldC5wcm90b3R5cGUucmVtb3ZlUmVmZXJlbmNlcyA9IGZ1bmN0aW9uIChrZXlzLCBpZCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAga2V5cy5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgcmV0dXJuIF90aGlzLnJlbW92ZVJlZmVyZW5jZShrZXksIGlkKTsgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBDbGVhcnMgYWxsIHJlZmVyZW5jZXMgd2l0aCBhIGdpdmVuIElELiBDYWxscyByZW1vdmVSZWYoKSBmb3IgZWFjaCBrZXlcclxuICAgICAqIHJlbW92ZWQuXHJcbiAgICAgKi9cclxuICAgIFJlZmVyZW5jZVNldC5wcm90b3R5cGUucmVtb3ZlUmVmZXJlbmNlc0ZvcklkID0gZnVuY3Rpb24gKGlkKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgZW1wdHlLZXkgPSBEb2N1bWVudEtleS5FTVBUWTtcclxuICAgICAgICB2YXIgc3RhcnRSZWYgPSBuZXcgRG9jUmVmZXJlbmNlKGVtcHR5S2V5LCBpZCk7XHJcbiAgICAgICAgdmFyIGVuZFJlZiA9IG5ldyBEb2NSZWZlcmVuY2UoZW1wdHlLZXksIGlkICsgMSk7XHJcbiAgICAgICAgdmFyIGtleXMgPSBbXTtcclxuICAgICAgICB0aGlzLnJlZnNCeVRhcmdldC5mb3JFYWNoSW5SYW5nZShbc3RhcnRSZWYsIGVuZFJlZl0sIGZ1bmN0aW9uIChyZWYpIHtcclxuICAgICAgICAgICAgX3RoaXMucmVtb3ZlUmVmKHJlZik7XHJcbiAgICAgICAgICAgIGtleXMucHVzaChyZWYua2V5KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4ga2V5cztcclxuICAgIH07XHJcbiAgICBSZWZlcmVuY2VTZXQucHJvdG90eXBlLnJlbW92ZUFsbFJlZmVyZW5jZXMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB0aGlzLnJlZnNCeUtleS5mb3JFYWNoKGZ1bmN0aW9uIChyZWYpIHsgcmV0dXJuIF90aGlzLnJlbW92ZVJlZihyZWYpOyB9KTtcclxuICAgIH07XHJcbiAgICBSZWZlcmVuY2VTZXQucHJvdG90eXBlLnJlbW92ZVJlZiA9IGZ1bmN0aW9uIChyZWYpIHtcclxuICAgICAgICB0aGlzLnJlZnNCeUtleSA9IHRoaXMucmVmc0J5S2V5LmRlbGV0ZShyZWYpO1xyXG4gICAgICAgIHRoaXMucmVmc0J5VGFyZ2V0ID0gdGhpcy5yZWZzQnlUYXJnZXQuZGVsZXRlKHJlZik7XHJcbiAgICB9O1xyXG4gICAgUmVmZXJlbmNlU2V0LnByb3RvdHlwZS5yZWZlcmVuY2VzRm9ySWQgPSBmdW5jdGlvbiAoaWQpIHtcclxuICAgICAgICB2YXIgZW1wdHlLZXkgPSBEb2N1bWVudEtleS5FTVBUWTtcclxuICAgICAgICB2YXIgc3RhcnRSZWYgPSBuZXcgRG9jUmVmZXJlbmNlKGVtcHR5S2V5LCBpZCk7XHJcbiAgICAgICAgdmFyIGVuZFJlZiA9IG5ldyBEb2NSZWZlcmVuY2UoZW1wdHlLZXksIGlkICsgMSk7XHJcbiAgICAgICAgdmFyIGtleXMgPSBkb2N1bWVudEtleVNldCgpO1xyXG4gICAgICAgIHRoaXMucmVmc0J5VGFyZ2V0LmZvckVhY2hJblJhbmdlKFtzdGFydFJlZiwgZW5kUmVmXSwgZnVuY3Rpb24gKHJlZikge1xyXG4gICAgICAgICAgICBrZXlzID0ga2V5cy5hZGQocmVmLmtleSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIGtleXM7XHJcbiAgICB9O1xyXG4gICAgUmVmZXJlbmNlU2V0LnByb3RvdHlwZS5jb250YWluc0tleSA9IGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICB2YXIgcmVmID0gbmV3IERvY1JlZmVyZW5jZShrZXksIDApO1xyXG4gICAgICAgIHZhciBmaXJzdFJlZiA9IHRoaXMucmVmc0J5S2V5LmZpcnN0QWZ0ZXJPckVxdWFsKHJlZik7XHJcbiAgICAgICAgcmV0dXJuIGZpcnN0UmVmICE9PSBudWxsICYmIGtleS5pc0VxdWFsKGZpcnN0UmVmLmtleSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFJlZmVyZW5jZVNldDtcclxufSgpKTtcclxudmFyIERvY1JlZmVyZW5jZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIERvY1JlZmVyZW5jZShrZXksIHRhcmdldE9yQmF0Y2hJZCkge1xyXG4gICAgICAgIHRoaXMua2V5ID0ga2V5O1xyXG4gICAgICAgIHRoaXMudGFyZ2V0T3JCYXRjaElkID0gdGFyZ2V0T3JCYXRjaElkO1xyXG4gICAgfVxyXG4gICAgLyoqIENvbXBhcmUgYnkga2V5IHRoZW4gYnkgSUQgKi9cclxuICAgIERvY1JlZmVyZW5jZS5jb21wYXJlQnlLZXkgPSBmdW5jdGlvbiAobGVmdCwgcmlnaHQpIHtcclxuICAgICAgICByZXR1cm4gKERvY3VtZW50S2V5LmNvbXBhcmF0b3IobGVmdC5rZXksIHJpZ2h0LmtleSkgfHxcclxuICAgICAgICAgICAgcHJpbWl0aXZlQ29tcGFyYXRvcihsZWZ0LnRhcmdldE9yQmF0Y2hJZCwgcmlnaHQudGFyZ2V0T3JCYXRjaElkKSk7XHJcbiAgICB9O1xyXG4gICAgLyoqIENvbXBhcmUgYnkgSUQgdGhlbiBieSBrZXkgKi9cclxuICAgIERvY1JlZmVyZW5jZS5jb21wYXJlQnlUYXJnZXRJZCA9IGZ1bmN0aW9uIChsZWZ0LCByaWdodCkge1xyXG4gICAgICAgIHJldHVybiAocHJpbWl0aXZlQ29tcGFyYXRvcihsZWZ0LnRhcmdldE9yQmF0Y2hJZCwgcmlnaHQudGFyZ2V0T3JCYXRjaElkKSB8fFxyXG4gICAgICAgICAgICBEb2N1bWVudEtleS5jb21wYXJhdG9yKGxlZnQua2V5LCByaWdodC5rZXkpKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gRG9jUmVmZXJlbmNlO1xyXG59KCkpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxudmFyIExPR19UQUckMiA9ICdMb2NhbFN0b3JlJztcclxuLyoqXHJcbiAqIExvY2FsIHN0b3JhZ2UgaW4gdGhlIEZpcmVzdG9yZSBjbGllbnQuIENvb3JkaW5hdGVzIHBlcnNpc3RlbmNlIGNvbXBvbmVudHNcclxuICogbGlrZSB0aGUgbXV0YXRpb24gcXVldWUgYW5kIHJlbW90ZSBkb2N1bWVudCBjYWNoZSB0byBwcmVzZW50IGFcclxuICogbGF0ZW5jeS1jb21wZW5zYXRlZCB2aWV3IG9mIHN0b3JlZCBkYXRhLlxyXG4gKlxyXG4gKiBUaGUgTG9jYWxTdG9yZSBpcyByZXNwb25zaWJsZSBmb3IgYWNjZXB0aW5nIG11dGF0aW9ucyBmcm9tIHRoZSBTeW5jIEVuZ2luZS5cclxuICogV3JpdGVzIGZyb20gdGhlIGNsaWVudCBhcmUgcHV0IGludG8gYSBxdWV1ZSBhcyBwcm92aXNpb25hbCBNdXRhdGlvbnMgdW50aWxcclxuICogdGhleSBhcmUgcHJvY2Vzc2VkIGJ5IHRoZSBSZW1vdGVTdG9yZSBhbmQgY29uZmlybWVkIGFzIGhhdmluZyBiZWVuIHdyaXR0ZW5cclxuICogdG8gdGhlIHNlcnZlci5cclxuICpcclxuICogVGhlIGxvY2FsIHN0b3JlIHByb3ZpZGVzIHRoZSBsb2NhbCB2ZXJzaW9uIG9mIGRvY3VtZW50cyB0aGF0IGhhdmUgYmVlblxyXG4gKiBtb2RpZmllZCBsb2NhbGx5LiBJdCBtYWludGFpbnMgdGhlIGNvbnN0cmFpbnQ6XHJcbiAqXHJcbiAqICAgTG9jYWxEb2N1bWVudCA9IFJlbW90ZURvY3VtZW50ICsgQWN0aXZlKExvY2FsTXV0YXRpb25zKVxyXG4gKlxyXG4gKiAoQWN0aXZlIG11dGF0aW9ucyBhcmUgdGhvc2UgdGhhdCBhcmUgZW5xdWV1ZWQgYW5kIGhhdmUgbm90IGJlZW4gcHJldmlvdXNseVxyXG4gKiBhY2tub3dsZWRnZWQgb3IgcmVqZWN0ZWQpLlxyXG4gKlxyXG4gKiBUaGUgUmVtb3RlRG9jdW1lbnQgKFwiZ3JvdW5kIHRydXRoXCIpIHN0YXRlIGlzIHByb3ZpZGVkIHZpYSB0aGVcclxuICogYXBwbHlDaGFuZ2VCYXRjaCBtZXRob2QuIEl0IHdpbGwgYmUgc29tZSB2ZXJzaW9uIG9mIGEgc2VydmVyLXByb3ZpZGVkXHJcbiAqIGRvY3VtZW50IE9SIHdpbGwgYmUgYSBzZXJ2ZXItcHJvdmlkZWQgZG9jdW1lbnQgUExVUyBhY2tub3dsZWRnZWQgbXV0YXRpb25zOlxyXG4gKlxyXG4gKiAgIFJlbW90ZURvY3VtZW50JyA9IFJlbW90ZURvY3VtZW50ICsgQWNrbm93bGVkZ2VkKExvY2FsTXV0YXRpb25zKVxyXG4gKlxyXG4gKiBOb3RlIHRoYXQgdGhpcyBcImRpcnR5XCIgdmVyc2lvbiBvZiBhIFJlbW90ZURvY3VtZW50IHdpbGwgbm90IGJlIGlkZW50aWNhbCB0byBhXHJcbiAqIHNlcnZlciBiYXNlIHZlcnNpb24sIHNpbmNlIGl0IGhhcyBMb2NhbE11dGF0aW9ucyBhZGRlZCB0byBpdCBwZW5kaW5nIGdldHRpbmdcclxuICogYW4gYXV0aG9yaXRhdGl2ZSBjb3B5IGZyb20gdGhlIHNlcnZlci5cclxuICpcclxuICogU2luY2UgTG9jYWxNdXRhdGlvbnMgY2FuIGJlIHJlamVjdGVkIGJ5IHRoZSBzZXJ2ZXIsIHdlIGhhdmUgdG8gYmUgYWJsZSB0b1xyXG4gKiByZXZlcnQgYSBMb2NhbE11dGF0aW9uIHRoYXQgaGFzIGFscmVhZHkgYmVlbiBhcHBsaWVkIHRvIHRoZSBMb2NhbERvY3VtZW50XHJcbiAqICh0eXBpY2FsbHkgZG9uZSBieSByZXBsYXlpbmcgYWxsIHJlbWFpbmluZyBMb2NhbE11dGF0aW9ucyB0byB0aGVcclxuICogUmVtb3RlRG9jdW1lbnQgdG8gcmUtYXBwbHkpLlxyXG4gKlxyXG4gKiBUaGUgTG9jYWxTdG9yZSBpcyByZXNwb25zaWJsZSBmb3IgdGhlIGdhcmJhZ2UgY29sbGVjdGlvbiBvZiB0aGUgZG9jdW1lbnRzIGl0XHJcbiAqIGNvbnRhaW5zLiBGb3Igbm93LCBpdCBldmVyeSBkb2MgcmVmZXJlbmNlZCBieSBhIHZpZXcsIHRoZSBtdXRhdGlvbiBxdWV1ZSwgb3JcclxuICogdGhlIFJlbW90ZVN0b3JlLlxyXG4gKlxyXG4gKiBJdCBhbHNvIG1haW50YWlucyB0aGUgcGVyc2lzdGVuY2Ugb2YgbWFwcGluZyBxdWVyaWVzIHRvIHJlc3VtZSB0b2tlbnMgYW5kXHJcbiAqIHRhcmdldCBpZHMuIEl0IG5lZWRzIHRvIGtub3cgdGhpcyBkYXRhIGFib3V0IHF1ZXJpZXMgdG8gcHJvcGVybHkga25vdyB3aGF0XHJcbiAqIGRvY3MgaXQgd291bGQgYmUgYWxsb3dlZCB0byBnYXJiYWdlIGNvbGxlY3QuXHJcbiAqXHJcbiAqIFRoZSBMb2NhbFN0b3JlIG11c3QgYmUgYWJsZSB0byBlZmZpY2llbnRseSBleGVjdXRlIHF1ZXJpZXMgYWdhaW5zdCBpdHMgbG9jYWxcclxuICogY2FjaGUgb2YgdGhlIGRvY3VtZW50cywgdG8gcHJvdmlkZSB0aGUgaW5pdGlhbCBzZXQgb2YgcmVzdWx0cyBiZWZvcmUgYW55XHJcbiAqIHJlbW90ZSBjaGFuZ2VzIGhhdmUgYmVlbiByZWNlaXZlZC5cclxuICpcclxuICogTm90ZTogSW4gVHlwZVNjcmlwdCwgbW9zdCBtZXRob2RzIHJldHVybiBQcm9taXNlcyBzaW5jZSB0aGUgaW1wbGVtZW50YXRpb25cclxuICogbWF5IHJlbHkgb24gZmV0Y2hpbmcgZGF0YSBmcm9tIEluZGV4ZWREQiB3aGljaCBpcyBhc3luYy5cclxuICogVGhlc2UgUHJvbWlzZXMgd2lsbCBvbmx5IGJlIHJlamVjdGVkIG9uIGFuIEkvTyBlcnJvciBvciBvdGhlciBpbnRlcm5hbFxyXG4gKiAodW5leHBlY3RlZCkgZmFpbHVyZSAoZS5nLiBmYWlsZWQgYXNzZXJ0KSBhbmQgYWx3YXlzIHJlcHJlc2VudCBhblxyXG4gKiB1bnJlY292ZXJhYmxlIGVycm9yIChzaG91bGQgYmUgY2F1Z2h0IC8gcmVwb3J0ZWQgYnkgdGhlIGFzeW5jX3F1ZXVlKS5cclxuICovXHJcbnZhciBMb2NhbFN0b3JlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gTG9jYWxTdG9yZShcclxuICAgIC8qKiBNYW5hZ2VzIG91ciBpbi1tZW1vcnkgb3IgZHVyYWJsZSBwZXJzaXN0ZW5jZS4gKi9cclxuICAgIHBlcnNpc3RlbmNlLCBxdWVyeUVuZ2luZSwgaW5pdGlhbFVzZXIpIHtcclxuICAgICAgICB0aGlzLnBlcnNpc3RlbmNlID0gcGVyc2lzdGVuY2U7XHJcbiAgICAgICAgdGhpcy5xdWVyeUVuZ2luZSA9IHF1ZXJ5RW5naW5lO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRoZSBzZXQgb2YgZG9jdW1lbnQgcmVmZXJlbmNlcyBtYWludGFpbmVkIGJ5IGFueSBsb2NhbCB2aWV3cy5cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLmxvY2FsVmlld1JlZmVyZW5jZXMgPSBuZXcgUmVmZXJlbmNlU2V0KCk7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogTWFwcyBhIHRhcmdldElEIHRvIGRhdGEgYWJvdXQgaXRzIHRhcmdldC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFBPUlRJTkcgTk9URTogV2UgYXJlIHVzaW5nIGFuIGltbXV0YWJsZSBkYXRhIHN0cnVjdHVyZSBvbiBXZWIgdG8gbWFrZSByZS1ydW5zXHJcbiAgICAgICAgICogb2YgYGFwcGx5UmVtb3RlRXZlbnQoKWAgaWRlbXBvdGVudC5cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLnRhcmdldERhdGFCeVRhcmdldCA9IG5ldyBTb3J0ZWRNYXAocHJpbWl0aXZlQ29tcGFyYXRvcik7XHJcbiAgICAgICAgLyoqIE1hcHMgYSB0YXJnZXQgdG8gaXRzIHRhcmdldElELiAqL1xyXG4gICAgICAgIC8vIFRPRE8od3VhbmR5KTogRXZhbHVhdGUgaWYgVGFyZ2V0SWQgY2FuIGJlIHBhcnQgb2YgVGFyZ2V0LlxyXG4gICAgICAgIHRoaXMudGFyZ2V0SWRCeVRhcmdldCA9IG5ldyBPYmplY3RNYXAoZnVuY3Rpb24gKHQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHQuY2Fub25pY2FsSWQoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBUaGUgcmVhZCB0aW1lIG9mIHRoZSBsYXN0IGVudHJ5IHByb2Nlc3NlZCBieSBgZ2V0TmV3RG9jdW1lbnRDaGFuZ2VzKClgLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogUE9SVElORyBOT1RFOiBUaGlzIGlzIG9ubHkgdXNlZCBmb3IgbXVsdGktdGFiIHN5bmNocm9uaXphdGlvbi5cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLmxhc3REb2N1bWVudENoYW5nZVJlYWRUaW1lID0gU25hcHNob3RWZXJzaW9uLk1JTjtcclxuICAgICAgICBhc3NlcnQocGVyc2lzdGVuY2Uuc3RhcnRlZCwgJ0xvY2FsU3RvcmUgd2FzIHBhc3NlZCBhbiB1bnN0YXJ0ZWQgcGVyc2lzdGVuY2UgaW1wbGVtZW50YXRpb24nKTtcclxuICAgICAgICB0aGlzLnBlcnNpc3RlbmNlLnJlZmVyZW5jZURlbGVnYXRlLnNldEluTWVtb3J5UGlucyh0aGlzLmxvY2FsVmlld1JlZmVyZW5jZXMpO1xyXG4gICAgICAgIHRoaXMubXV0YXRpb25RdWV1ZSA9IHBlcnNpc3RlbmNlLmdldE11dGF0aW9uUXVldWUoaW5pdGlhbFVzZXIpO1xyXG4gICAgICAgIHRoaXMucmVtb3RlRG9jdW1lbnRzID0gcGVyc2lzdGVuY2UuZ2V0UmVtb3RlRG9jdW1lbnRDYWNoZSgpO1xyXG4gICAgICAgIHRoaXMudGFyZ2V0Q2FjaGUgPSBwZXJzaXN0ZW5jZS5nZXRUYXJnZXRDYWNoZSgpO1xyXG4gICAgICAgIHRoaXMubG9jYWxEb2N1bWVudHMgPSBuZXcgTG9jYWxEb2N1bWVudHNWaWV3KHRoaXMucmVtb3RlRG9jdW1lbnRzLCB0aGlzLm11dGF0aW9uUXVldWUsIHRoaXMucGVyc2lzdGVuY2UuZ2V0SW5kZXhNYW5hZ2VyKCkpO1xyXG4gICAgICAgIHRoaXMucXVlcnlFbmdpbmUuc2V0TG9jYWxEb2N1bWVudHNWaWV3KHRoaXMubG9jYWxEb2N1bWVudHMpO1xyXG4gICAgfVxyXG4gICAgLyoqIFN0YXJ0cyB0aGUgTG9jYWxTdG9yZS4gKi9cclxuICAgIExvY2FsU3RvcmUucHJvdG90eXBlLnN0YXJ0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnN5bmNocm9uaXplTGFzdERvY3VtZW50Q2hhbmdlUmVhZFRpbWUoKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFRlbGxzIHRoZSBMb2NhbFN0b3JlIHRoYXQgdGhlIGN1cnJlbnRseSBhdXRoZW50aWNhdGVkIHVzZXIgaGFzIGNoYW5nZWQuXHJcbiAgICAgKlxyXG4gICAgICogSW4gcmVzcG9uc2UgdGhlIGxvY2FsIHN0b3JlIHN3aXRjaGVzIHRoZSBtdXRhdGlvbiBxdWV1ZSB0byB0aGUgbmV3IHVzZXIgYW5kXHJcbiAgICAgKiByZXR1cm5zIGFueSByZXN1bHRpbmcgZG9jdW1lbnQgY2hhbmdlcy5cclxuICAgICAqL1xyXG4gICAgLy8gUE9SVElORyBOT1RFOiBBbmRyb2lkIGFuZCBpT1Mgb25seSByZXR1cm4gdGhlIGRvY3VtZW50cyBhZmZlY3RlZCBieSB0aGVcclxuICAgIC8vIGNoYW5nZS5cclxuICAgIExvY2FsU3RvcmUucHJvdG90eXBlLmhhbmRsZVVzZXJDaGFuZ2UgPSBmdW5jdGlvbiAodXNlcikge1xyXG4gICAgICAgIHJldHVybiB0c2xpYi5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIG5ld011dGF0aW9uUXVldWUsIG5ld0xvY2FsRG9jdW1lbnRzLCByZXN1bHQ7XHJcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYi5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld011dGF0aW9uUXVldWUgPSB0aGlzLm11dGF0aW9uUXVldWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld0xvY2FsRG9jdW1lbnRzID0gdGhpcy5sb2NhbERvY3VtZW50cztcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbignSGFuZGxlIHVzZXIgY2hhbmdlJywgJ3JlYWRvbmx5LWlkZW1wb3RlbnQnLCBmdW5jdGlvbiAodHhuKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU3dhcCBvdXQgdGhlIG11dGF0aW9uIHF1ZXVlLCBncmFiYmluZyB0aGUgcGVuZGluZyBtdXRhdGlvbiBiYXRjaGVzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYmVmb3JlIGFuZCBhZnRlci5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgb2xkQmF0Y2hlcztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMubXV0YXRpb25RdWV1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZ2V0QWxsTXV0YXRpb25CYXRjaGVzKHR4bilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKHByb21pc2VkT2xkQmF0Y2hlcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbGRCYXRjaGVzID0gcHJvbWlzZWRPbGRCYXRjaGVzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdNdXRhdGlvblF1ZXVlID0gX3RoaXMucGVyc2lzdGVuY2UuZ2V0TXV0YXRpb25RdWV1ZSh1c2VyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVjcmVhdGUgb3VyIExvY2FsRG9jdW1lbnRzVmlldyB1c2luZyB0aGUgbmV3XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE11dGF0aW9uUXVldWUuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld0xvY2FsRG9jdW1lbnRzID0gbmV3IExvY2FsRG9jdW1lbnRzVmlldyhfdGhpcy5yZW1vdGVEb2N1bWVudHMsIG5ld011dGF0aW9uUXVldWUsIF90aGlzLnBlcnNpc3RlbmNlLmdldEluZGV4TWFuYWdlcigpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ld011dGF0aW9uUXVldWUuZ2V0QWxsTXV0YXRpb25CYXRjaGVzKHR4bik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKG5ld0JhdGNoZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlbW92ZWRCYXRjaElkcyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYWRkZWRCYXRjaElkcyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBVbmlvbiB0aGUgb2xkL25ldyBjaGFuZ2VkIGtleXMuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjaGFuZ2VkS2V5cyA9IGRvY3VtZW50S2V5U2V0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgb2xkQmF0Y2hlc18xID0gb2xkQmF0Y2hlczsgX2kgPCBvbGRCYXRjaGVzXzEubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYmF0Y2ggPSBvbGRCYXRjaGVzXzFbX2ldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3ZlZEJhdGNoSWRzLnB1c2goYmF0Y2guYmF0Y2hJZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBfYSA9IDAsIF9iID0gYmF0Y2gubXV0YXRpb25zOyBfYSA8IF9iLmxlbmd0aDsgX2ErKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtdXRhdGlvbiA9IF9iW19hXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VkS2V5cyA9IGNoYW5nZWRLZXlzLmFkZChtdXRhdGlvbi5rZXkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIF9jID0gMCwgbmV3QmF0Y2hlc18xID0gbmV3QmF0Y2hlczsgX2MgPCBuZXdCYXRjaGVzXzEubGVuZ3RoOyBfYysrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYmF0Y2ggPSBuZXdCYXRjaGVzXzFbX2NdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkZWRCYXRjaElkcy5wdXNoKGJhdGNoLmJhdGNoSWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgX2QgPSAwLCBfZSA9IGJhdGNoLm11dGF0aW9uczsgX2QgPCBfZS5sZW5ndGg7IF9kKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbXV0YXRpb24gPSBfZVtfZF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlZEtleXMgPSBjaGFuZ2VkS2V5cy5hZGQobXV0YXRpb24ua2V5KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBSZXR1cm4gdGhlIHNldCBvZiBhbGwgKHBvdGVudGlhbGx5KSBjaGFuZ2VkIGRvY3VtZW50cyBhbmQgdGhlIGxpc3RcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gb2YgbXV0YXRpb24gYmF0Y2ggSURzIHRoYXQgd2VyZSBhZmZlY3RlZCBieSBjaGFuZ2UuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXdMb2NhbERvY3VtZW50c1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmdldERvY3VtZW50cyh0eG4sIGNoYW5nZWRLZXlzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKGFmZmVjdGVkRG9jdW1lbnRzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFmZmVjdGVkRG9jdW1lbnRzOiBhZmZlY3RlZERvY3VtZW50cyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW1vdmVkQmF0Y2hJZHM6IHJlbW92ZWRCYXRjaElkcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGRlZEJhdGNoSWRzOiBhZGRlZEJhdGNoSWRzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tdXRhdGlvblF1ZXVlID0gbmV3TXV0YXRpb25RdWV1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2NhbERvY3VtZW50cyA9IG5ld0xvY2FsRG9jdW1lbnRzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnF1ZXJ5RW5naW5lLnNldExvY2FsRG9jdW1lbnRzVmlldyh0aGlzLmxvY2FsRG9jdW1lbnRzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHJlc3VsdF07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qIEFjY2VwdCBsb2NhbGx5IGdlbmVyYXRlZCBNdXRhdGlvbnMgYW5kIGNvbW1pdCB0aGVtIHRvIHN0b3JhZ2UuICovXHJcbiAgICBMb2NhbFN0b3JlLnByb3RvdHlwZS5sb2NhbFdyaXRlID0gZnVuY3Rpb24gKG11dGF0aW9ucykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIGxvY2FsV3JpdGVUaW1lID0gVGltZXN0YW1wLm5vdygpO1xyXG4gICAgICAgIHZhciBrZXlzID0gbXV0YXRpb25zLnJlZHVjZShmdW5jdGlvbiAoa2V5cywgbSkgeyByZXR1cm4ga2V5cy5hZGQobS5rZXkpOyB9LCBkb2N1bWVudEtleVNldCgpKTtcclxuICAgICAgICB2YXIgZXhpc3RpbmdEb2NzO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnBlcnNpc3RlbmNlXHJcbiAgICAgICAgICAgIC5ydW5UcmFuc2FjdGlvbignTG9jYWxseSB3cml0ZSBtdXRhdGlvbnMnLCAncmVhZHdyaXRlLWlkZW1wb3RlbnQnLCBmdW5jdGlvbiAodHhuKSB7XHJcbiAgICAgICAgICAgIC8vIExvYWQgYW5kIGFwcGx5IGFsbCBleGlzdGluZyBtdXRhdGlvbnMuIFRoaXMgbGV0cyB1cyBjb21wdXRlIHRoZVxyXG4gICAgICAgICAgICAvLyBjdXJyZW50IGJhc2Ugc3RhdGUgZm9yIGFsbCBub24taWRlbXBvdGVudCB0cmFuc2Zvcm1zIGJlZm9yZSBhcHBseWluZ1xyXG4gICAgICAgICAgICAvLyBhbnkgYWRkaXRpb25hbCB1c2VyLXByb3ZpZGVkIHdyaXRlcy5cclxuICAgICAgICAgICAgcmV0dXJuIF90aGlzLmxvY2FsRG9jdW1lbnRzLmdldERvY3VtZW50cyh0eG4sIGtleXMpLm5leHQoZnVuY3Rpb24gKGRvY3MpIHtcclxuICAgICAgICAgICAgICAgIGV4aXN0aW5nRG9jcyA9IGRvY3M7XHJcbiAgICAgICAgICAgICAgICAvLyBGb3Igbm9uLWlkZW1wb3RlbnQgbXV0YXRpb25zIChzdWNoIGFzIGBGaWVsZFZhbHVlLmluY3JlbWVudCgpYCksXHJcbiAgICAgICAgICAgICAgICAvLyB3ZSByZWNvcmQgdGhlIGJhc2Ugc3RhdGUgaW4gYSBzZXBhcmF0ZSBwYXRjaCBtdXRhdGlvbi4gVGhpcyBpc1xyXG4gICAgICAgICAgICAgICAgLy8gbGF0ZXIgdXNlZCB0byBndWFyYW50ZWUgY29uc2lzdGVudCB2YWx1ZXMgYW5kIHByZXZlbnRzIGZsaWNrZXJcclxuICAgICAgICAgICAgICAgIC8vIGV2ZW4gaWYgdGhlIGJhY2tlbmQgc2VuZHMgdXMgYW4gdXBkYXRlIHRoYXQgYWxyZWFkeSBpbmNsdWRlcyBvdXJcclxuICAgICAgICAgICAgICAgIC8vIHRyYW5zZm9ybS5cclxuICAgICAgICAgICAgICAgIHZhciBiYXNlTXV0YXRpb25zID0gW107XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIG11dGF0aW9uc18xID0gbXV0YXRpb25zOyBfaSA8IG11dGF0aW9uc18xLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBtdXRhdGlvbiA9IG11dGF0aW9uc18xW19pXTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgYmFzZVZhbHVlID0gbXV0YXRpb24uZXh0cmFjdEJhc2VWYWx1ZShleGlzdGluZ0RvY3MuZ2V0KG11dGF0aW9uLmtleSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChiYXNlVmFsdWUgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBOT1RFOiBUaGUgYmFzZSBzdGF0ZSBzaG91bGQgb25seSBiZSBhcHBsaWVkIGlmIHRoZXJlJ3Mgc29tZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBleGlzdGluZyBkb2N1bWVudCB0byBvdmVycmlkZSwgc28gdXNlIGEgUHJlY29uZGl0aW9uIG9mXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGV4aXN0cz10cnVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VNdXRhdGlvbnMucHVzaChuZXcgUGF0Y2hNdXRhdGlvbihtdXRhdGlvbi5rZXksIGJhc2VWYWx1ZSwgYmFzZVZhbHVlLmZpZWxkTWFzaygpLCBQcmVjb25kaXRpb24uZXhpc3RzKHRydWUpKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLm11dGF0aW9uUXVldWUuYWRkTXV0YXRpb25CYXRjaCh0eG4sIGxvY2FsV3JpdGVUaW1lLCBiYXNlTXV0YXRpb25zLCBtdXRhdGlvbnMpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoYmF0Y2gpIHtcclxuICAgICAgICAgICAgdmFyIGNoYW5nZXMgPSBiYXRjaC5hcHBseVRvTG9jYWxEb2N1bWVudFNldChleGlzdGluZ0RvY3MpO1xyXG4gICAgICAgICAgICByZXR1cm4geyBiYXRjaElkOiBiYXRjaC5iYXRjaElkLCBjaGFuZ2VzOiBjaGFuZ2VzIH07XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqIFJldHVybnMgdGhlIGxvY2FsIHZpZXcgb2YgdGhlIGRvY3VtZW50cyBhZmZlY3RlZCBieSBhIG11dGF0aW9uIGJhdGNoLiAqL1xyXG4gICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS10YWIgb25seS5cclxuICAgIExvY2FsU3RvcmUucHJvdG90eXBlLmxvb2t1cE11dGF0aW9uRG9jdW1lbnRzID0gZnVuY3Rpb24gKGJhdGNoSWQpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKCdMb29rdXAgbXV0YXRpb24gZG9jdW1lbnRzJywgJ3JlYWRvbmx5LWlkZW1wb3RlbnQnLCBmdW5jdGlvbiAodHhuKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5tdXRhdGlvblF1ZXVlXHJcbiAgICAgICAgICAgICAgICAubG9va3VwTXV0YXRpb25LZXlzKHR4biwgYmF0Y2hJZClcclxuICAgICAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uIChrZXlzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoa2V5cykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5sb2NhbERvY3VtZW50cy5nZXREb2N1bWVudHModHhuLCBrZXlzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZShudWxsKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBBY2tub3dsZWRnZSB0aGUgZ2l2ZW4gYmF0Y2guXHJcbiAgICAgKlxyXG4gICAgICogT24gdGhlIGhhcHB5IHBhdGggd2hlbiBhIGJhdGNoIGlzIGFja25vd2xlZGdlZCwgdGhlIGxvY2FsIHN0b3JlIHdpbGxcclxuICAgICAqXHJcbiAgICAgKiAgKyByZW1vdmUgdGhlIGJhdGNoIGZyb20gdGhlIG11dGF0aW9uIHF1ZXVlO1xyXG4gICAgICogICsgYXBwbHkgdGhlIGNoYW5nZXMgdG8gdGhlIHJlbW90ZSBkb2N1bWVudCBjYWNoZTtcclxuICAgICAqICArIHJlY2FsY3VsYXRlIHRoZSBsYXRlbmN5IGNvbXBlbnNhdGVkIHZpZXcgaW1wbGllZCBieSB0aG9zZSBjaGFuZ2VzICh0aGVyZVxyXG4gICAgICogICAgbWF5IGJlIG11dGF0aW9ucyBpbiB0aGUgcXVldWUgdGhhdCBhZmZlY3QgdGhlIGRvY3VtZW50cyBidXQgaGF2ZW4ndCBiZWVuXHJcbiAgICAgKiAgICBhY2tub3dsZWRnZWQgeWV0KTsgYW5kXHJcbiAgICAgKiAgKyBnaXZlIHRoZSBjaGFuZ2VkIGRvY3VtZW50cyBiYWNrIHRoZSBzeW5jIGVuZ2luZVxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm5zIFRoZSByZXN1bHRpbmcgKG1vZGlmaWVkKSBkb2N1bWVudHMuXHJcbiAgICAgKi9cclxuICAgIExvY2FsU3RvcmUucHJvdG90eXBlLmFja25vd2xlZGdlQmF0Y2ggPSBmdW5jdGlvbiAoYmF0Y2hSZXN1bHQpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKCdBY2tub3dsZWRnZSBiYXRjaCcsICdyZWFkd3JpdGUtcHJpbWFyeS1pZGVtcG90ZW50JywgZnVuY3Rpb24gKHR4bikge1xyXG4gICAgICAgICAgICB2YXIgYWZmZWN0ZWQgPSBiYXRjaFJlc3VsdC5iYXRjaC5rZXlzKCk7XHJcbiAgICAgICAgICAgIHZhciBkb2N1bWVudEJ1ZmZlciA9IF90aGlzLnJlbW90ZURvY3VtZW50cy5uZXdDaGFuZ2VCdWZmZXIoe1xyXG4gICAgICAgICAgICAgICAgdHJhY2tSZW1vdmFsczogdHJ1ZSAvLyBNYWtlIHN1cmUgZG9jdW1lbnQgcmVtb3ZhbHMgc2hvdyB1cCBpbiBgZ2V0TmV3RG9jdW1lbnRDaGFuZ2VzKClgXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXMubXV0YXRpb25RdWV1ZVxyXG4gICAgICAgICAgICAgICAgLmFja25vd2xlZGdlQmF0Y2godHhuLCBiYXRjaFJlc3VsdC5iYXRjaCwgYmF0Y2hSZXN1bHQuc3RyZWFtVG9rZW4pXHJcbiAgICAgICAgICAgICAgICAubmV4dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuYXBwbHlXcml0ZVRvUmVtb3RlRG9jdW1lbnRzKHR4biwgYmF0Y2hSZXN1bHQsIGRvY3VtZW50QnVmZmVyKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIGRvY3VtZW50QnVmZmVyLmFwcGx5KHR4bik7IH0pXHJcbiAgICAgICAgICAgICAgICAubmV4dChmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5tdXRhdGlvblF1ZXVlLnBlcmZvcm1Db25zaXN0ZW5jeUNoZWNrKHR4bik7IH0pXHJcbiAgICAgICAgICAgICAgICAubmV4dChmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5sb2NhbERvY3VtZW50cy5nZXREb2N1bWVudHModHhuLCBhZmZlY3RlZCk7IH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmVtb3ZlIG11dGF0aW9ucyBmcm9tIHRoZSBNdXRhdGlvblF1ZXVlIGZvciB0aGUgc3BlY2lmaWVkIGJhdGNoO1xyXG4gICAgICogTG9jYWxEb2N1bWVudHMgd2lsbCBiZSByZWNhbGN1bGF0ZWQuXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybnMgVGhlIHJlc3VsdGluZyBtb2RpZmllZCBkb2N1bWVudHMuXHJcbiAgICAgKi9cclxuICAgIExvY2FsU3RvcmUucHJvdG90eXBlLnJlamVjdEJhdGNoID0gZnVuY3Rpb24gKGJhdGNoSWQpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKCdSZWplY3QgYmF0Y2gnLCAncmVhZHdyaXRlLXByaW1hcnktaWRlbXBvdGVudCcsIGZ1bmN0aW9uICh0eG4pIHtcclxuICAgICAgICAgICAgdmFyIGFmZmVjdGVkS2V5cztcclxuICAgICAgICAgICAgcmV0dXJuIF90aGlzLm11dGF0aW9uUXVldWVcclxuICAgICAgICAgICAgICAgIC5sb29rdXBNdXRhdGlvbkJhdGNoKHR4biwgYmF0Y2hJZClcclxuICAgICAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uIChiYXRjaCkge1xyXG4gICAgICAgICAgICAgICAgYXNzZXJ0KGJhdGNoICE9PSBudWxsLCAnQXR0ZW1wdCB0byByZWplY3Qgbm9uZXhpc3RlbnQgYmF0Y2ghJyk7XHJcbiAgICAgICAgICAgICAgICBhZmZlY3RlZEtleXMgPSBiYXRjaC5rZXlzKCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMubXV0YXRpb25RdWV1ZS5yZW1vdmVNdXRhdGlvbkJhdGNoKHR4biwgYmF0Y2gpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLm11dGF0aW9uUXVldWUucGVyZm9ybUNvbnNpc3RlbmN5Q2hlY2sodHhuKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5sb2NhbERvY3VtZW50cy5nZXREb2N1bWVudHModHhuLCBhZmZlY3RlZEtleXMpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdGhlIGxhcmdlc3QgKGxhdGVzdCkgYmF0Y2ggaWQgaW4gbXV0YXRpb24gcXVldWUgdGhhdCBpcyBwZW5kaW5nIHNlcnZlciByZXNwb25zZS5cclxuICAgICAqIFJldHVybnMgYEJBVENISURfVU5LTk9XTmAgaWYgdGhlIHF1ZXVlIGlzIGVtcHR5LlxyXG4gICAgICovXHJcbiAgICBMb2NhbFN0b3JlLnByb3RvdHlwZS5nZXRIaWdoZXN0VW5hY2tub3dsZWRnZWRCYXRjaElkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oJ0dldCBoaWdoZXN0IHVuYWNrbm93bGVkZ2VkIGJhdGNoIGlkJywgJ3JlYWRvbmx5LWlkZW1wb3RlbnQnLCBmdW5jdGlvbiAodHhuKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5tdXRhdGlvblF1ZXVlLmdldEhpZ2hlc3RVbmFja25vd2xlZGdlZEJhdGNoSWQodHhuKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKiogUmV0dXJucyB0aGUgbGFzdCByZWNvcmRlZCBzdHJlYW0gdG9rZW4gZm9yIHRoZSBjdXJyZW50IHVzZXIuICovXHJcbiAgICBMb2NhbFN0b3JlLnByb3RvdHlwZS5nZXRMYXN0U3RyZWFtVG9rZW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICByZXR1cm4gdGhpcy5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbignR2V0IGxhc3Qgc3RyZWFtIHRva2VuJywgJ3JlYWRvbmx5LWlkZW1wb3RlbnQnLCBmdW5jdGlvbiAodHhuKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5tdXRhdGlvblF1ZXVlLmdldExhc3RTdHJlYW1Ub2tlbih0eG4pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogU2V0cyB0aGUgc3RyZWFtIHRva2VuIGZvciB0aGUgY3VycmVudCB1c2VyIHdpdGhvdXQgYWNrbm93bGVkZ2luZyBhbnlcclxuICAgICAqIG11dGF0aW9uIGJhdGNoLiBUaGlzIGlzIHVzdWFsbHkgb25seSB1c2VmdWwgYWZ0ZXIgYSBzdHJlYW0gaGFuZHNoYWtlIG9yIGluXHJcbiAgICAgKiByZXNwb25zZSB0byBhbiBlcnJvciB0aGF0IHJlcXVpcmVzIGNsZWFyaW5nIHRoZSBzdHJlYW0gdG9rZW4uXHJcbiAgICAgKi9cclxuICAgIExvY2FsU3RvcmUucHJvdG90eXBlLnNldExhc3RTdHJlYW1Ub2tlbiA9IGZ1bmN0aW9uIChzdHJlYW1Ub2tlbikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oJ1NldCBsYXN0IHN0cmVhbSB0b2tlbicsICdyZWFkd3JpdGUtcHJpbWFyeS1pZGVtcG90ZW50JywgZnVuY3Rpb24gKHR4bikge1xyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXMubXV0YXRpb25RdWV1ZS5zZXRMYXN0U3RyZWFtVG9rZW4odHhuLCBzdHJlYW1Ub2tlbik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSBsYXN0IGNvbnNpc3RlbnQgc25hcHNob3QgcHJvY2Vzc2VkICh1c2VkIGJ5IHRoZSBSZW1vdGVTdG9yZSB0b1xyXG4gICAgICogZGV0ZXJtaW5lIHdoZXRoZXIgdG8gYnVmZmVyIGluY29taW5nIHNuYXBzaG90cyBmcm9tIHRoZSBiYWNrZW5kKS5cclxuICAgICAqL1xyXG4gICAgTG9jYWxTdG9yZS5wcm90b3R5cGUuZ2V0TGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKCdHZXQgbGFzdCByZW1vdGUgc25hcHNob3QgdmVyc2lvbicsICdyZWFkb25seS1pZGVtcG90ZW50JywgZnVuY3Rpb24gKHR4bikgeyByZXR1cm4gX3RoaXMudGFyZ2V0Q2FjaGUuZ2V0TGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbih0eG4pOyB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFVwZGF0ZSB0aGUgXCJncm91bmQtc3RhdGVcIiAocmVtb3RlKSBkb2N1bWVudHMuIFdlIGFzc3VtZSB0aGF0IHRoZSByZW1vdGVcclxuICAgICAqIGV2ZW50IHJlZmxlY3RzIGFueSB3cml0ZSBiYXRjaGVzIHRoYXQgaGF2ZSBiZWVuIGFja25vd2xlZGdlZCBvciByZWplY3RlZFxyXG4gICAgICogKGkuZS4gd2UgZG8gbm90IHJlLWFwcGx5IGxvY2FsIG11dGF0aW9ucyB0byB1cGRhdGVzIGZyb20gdGhpcyBldmVudCkuXHJcbiAgICAgKlxyXG4gICAgICogTG9jYWxEb2N1bWVudHMgYXJlIHJlLWNhbGN1bGF0ZWQgaWYgdGhlcmUgYXJlIHJlbWFpbmluZyBtdXRhdGlvbnMgaW4gdGhlXHJcbiAgICAgKiBxdWV1ZS5cclxuICAgICAqL1xyXG4gICAgTG9jYWxTdG9yZS5wcm90b3R5cGUuYXBwbHlSZW1vdGVFdmVudCA9IGZ1bmN0aW9uIChyZW1vdGVFdmVudCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIHJlbW90ZVZlcnNpb24gPSByZW1vdGVFdmVudC5zbmFwc2hvdFZlcnNpb247XHJcbiAgICAgICAgdmFyIG5ld1RhcmdldERhdGFCeVRhcmdldE1hcCA9IHRoaXMudGFyZ2V0RGF0YUJ5VGFyZ2V0O1xyXG4gICAgICAgIHJldHVybiB0aGlzLnBlcnNpc3RlbmNlXHJcbiAgICAgICAgICAgIC5ydW5UcmFuc2FjdGlvbignQXBwbHkgcmVtb3RlIGV2ZW50JywgJ3JlYWR3cml0ZS1wcmltYXJ5LWlkZW1wb3RlbnQnLCBmdW5jdGlvbiAodHhuKSB7XHJcbiAgICAgICAgICAgIHZhciBkb2N1bWVudEJ1ZmZlciA9IF90aGlzLnJlbW90ZURvY3VtZW50cy5uZXdDaGFuZ2VCdWZmZXIoe1xyXG4gICAgICAgICAgICAgICAgdHJhY2tSZW1vdmFsczogdHJ1ZSAvLyBNYWtlIHN1cmUgZG9jdW1lbnQgcmVtb3ZhbHMgc2hvdyB1cCBpbiBgZ2V0TmV3RG9jdW1lbnRDaGFuZ2VzKClgXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAvLyBSZXNldCBuZXdUYXJnZXREYXRhQnlUYXJnZXRNYXAgaW4gY2FzZSB0aGlzIHRyYW5zYWN0aW9uIGdldHMgcmUtcnVuLlxyXG4gICAgICAgICAgICBuZXdUYXJnZXREYXRhQnlUYXJnZXRNYXAgPSBfdGhpcy50YXJnZXREYXRhQnlUYXJnZXQ7XHJcbiAgICAgICAgICAgIHZhciBwcm9taXNlcyA9IFtdO1xyXG4gICAgICAgICAgICBmb3JFYWNoTnVtYmVyKHJlbW90ZUV2ZW50LnRhcmdldENoYW5nZXMsIGZ1bmN0aW9uICh0YXJnZXRJZCwgY2hhbmdlKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgb2xkVGFyZ2V0RGF0YSA9IG5ld1RhcmdldERhdGFCeVRhcmdldE1hcC5nZXQodGFyZ2V0SWQpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFvbGRUYXJnZXREYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gT25seSB1cGRhdGUgdGhlIHJlbW90ZSBrZXlzIGlmIHRoZSB0YXJnZXQgaXMgc3RpbGwgYWN0aXZlLiBUaGlzXHJcbiAgICAgICAgICAgICAgICAvLyBlbnN1cmVzIHRoYXQgd2UgY2FuIHBlcnNpc3QgdGhlIHVwZGF0ZWQgdGFyZ2V0IGRhdGEgYWxvbmcgd2l0aFxyXG4gICAgICAgICAgICAgICAgLy8gdGhlIHVwZGF0ZWQgYXNzaWdubWVudC5cclxuICAgICAgICAgICAgICAgIHByb21pc2VzLnB1c2goX3RoaXMudGFyZ2V0Q2FjaGVcclxuICAgICAgICAgICAgICAgICAgICAucmVtb3ZlTWF0Y2hpbmdLZXlzKHR4biwgY2hhbmdlLnJlbW92ZWREb2N1bWVudHMsIHRhcmdldElkKVxyXG4gICAgICAgICAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMudGFyZ2V0Q2FjaGUuYWRkTWF0Y2hpbmdLZXlzKHR4biwgY2hhbmdlLmFkZGVkRG9jdW1lbnRzLCB0YXJnZXRJZCk7XHJcbiAgICAgICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgcmVzdW1lVG9rZW4gPSBjaGFuZ2UucmVzdW1lVG9rZW47XHJcbiAgICAgICAgICAgICAgICAvLyBVcGRhdGUgdGhlIHJlc3VtZSB0b2tlbiBpZiB0aGUgY2hhbmdlIGluY2x1ZGVzIG9uZS5cclxuICAgICAgICAgICAgICAgIGlmIChyZXN1bWVUb2tlbi5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5ld1RhcmdldERhdGEgPSBvbGRUYXJnZXREYXRhXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC53aXRoUmVzdW1lVG9rZW4ocmVzdW1lVG9rZW4sIHJlbW90ZVZlcnNpb24pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC53aXRoU2VxdWVuY2VOdW1iZXIodHhuLmN1cnJlbnRTZXF1ZW5jZU51bWJlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3VGFyZ2V0RGF0YUJ5VGFyZ2V0TWFwID0gbmV3VGFyZ2V0RGF0YUJ5VGFyZ2V0TWFwLmluc2VydCh0YXJnZXRJZCwgbmV3VGFyZ2V0RGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gVXBkYXRlIHRoZSB0YXJnZXQgZGF0YSBpZiB0aGVyZSBhcmUgdGFyZ2V0IGNoYW5nZXMgKG9yIGlmXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gc3VmZmljaWVudCB0aW1lIGhhcyBwYXNzZWQgc2luY2UgdGhlIGxhc3QgdXBkYXRlKS5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoTG9jYWxTdG9yZS5zaG91bGRQZXJzaXN0VGFyZ2V0RGF0YShvbGRUYXJnZXREYXRhLCBuZXdUYXJnZXREYXRhLCBjaGFuZ2UpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb21pc2VzLnB1c2goX3RoaXMudGFyZ2V0Q2FjaGUudXBkYXRlVGFyZ2V0RGF0YSh0eG4sIG5ld1RhcmdldERhdGEpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB2YXIgY2hhbmdlZERvY3MgPSBtYXliZURvY3VtZW50TWFwKCk7XHJcbiAgICAgICAgICAgIHZhciB1cGRhdGVkS2V5cyA9IGRvY3VtZW50S2V5U2V0KCk7XHJcbiAgICAgICAgICAgIHJlbW90ZUV2ZW50LmRvY3VtZW50VXBkYXRlcy5mb3JFYWNoKGZ1bmN0aW9uIChrZXksIGRvYykge1xyXG4gICAgICAgICAgICAgICAgdXBkYXRlZEtleXMgPSB1cGRhdGVkS2V5cy5hZGQoa2V5KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIC8vIEVhY2ggbG9vcCBpdGVyYXRpb24gb25seSBhZmZlY3RzIGl0cyBcIm93blwiIGRvYywgc28gaXQncyBzYWZlIHRvIGdldCBhbGwgdGhlIHJlbW90ZVxyXG4gICAgICAgICAgICAvLyBkb2N1bWVudHMgaW4gYWR2YW5jZSBpbiBhIHNpbmdsZSBjYWxsLlxyXG4gICAgICAgICAgICBwcm9taXNlcy5wdXNoKGRvY3VtZW50QnVmZmVyLmdldEVudHJpZXModHhuLCB1cGRhdGVkS2V5cykubmV4dChmdW5jdGlvbiAoZXhpc3RpbmdEb2NzKSB7XHJcbiAgICAgICAgICAgICAgICByZW1vdGVFdmVudC5kb2N1bWVudFVwZGF0ZXMuZm9yRWFjaChmdW5jdGlvbiAoa2V5LCBkb2MpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZXhpc3RpbmdEb2MgPSBleGlzdGluZ0RvY3MuZ2V0KGtleSk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gTm90ZTogVGhlIG9yZGVyIG9mIHRoZSBzdGVwcyBiZWxvdyBpcyBpbXBvcnRhbnQsIHNpbmNlIHdlIHdhbnRcclxuICAgICAgICAgICAgICAgICAgICAvLyB0byBlbnN1cmUgdGhhdCByZWplY3RlZCBsaW1ibyByZXNvbHV0aW9ucyAod2hpY2ggZmFicmljYXRlXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gTm9Eb2N1bWVudHMgd2l0aCBTbmFwc2hvdFZlcnNpb24uTUlOKSBuZXZlciBhZGQgZG9jdW1lbnRzIHRvXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY2FjaGUuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRvYyBpbnN0YW5jZW9mIE5vRG9jdW1lbnQgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgZG9jLnZlcnNpb24uaXNFcXVhbChTbmFwc2hvdFZlcnNpb24uTUlOKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBOb0RvY3VtZW50cyB3aXRoIFNuYXBzaG90VmVyc2lvbi5NSU4gYXJlIHVzZWQgaW4gbWFudWZhY3R1cmVkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGV2ZW50cy4gV2UgcmVtb3ZlIHRoZXNlIGRvY3VtZW50cyBmcm9tIGNhY2hlIHNpbmNlIHdlIGxvc3RcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYWNjZXNzLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudEJ1ZmZlci5yZW1vdmVFbnRyeShrZXksIHJlbW90ZVZlcnNpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VkRG9jcyA9IGNoYW5nZWREb2NzLmluc2VydChrZXksIGRvYyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGV4aXN0aW5nRG9jID09IG51bGwgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZG9jLnZlcnNpb24uY29tcGFyZVRvKGV4aXN0aW5nRG9jLnZlcnNpb24pID4gMCB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAoZG9jLnZlcnNpb24uY29tcGFyZVRvKGV4aXN0aW5nRG9jLnZlcnNpb24pID09PSAwICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGlzdGluZ0RvYy5oYXNQZW5kaW5nV3JpdGVzKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhc3NlcnQoIVNuYXBzaG90VmVyc2lvbi5NSU4uaXNFcXVhbChyZW1vdGVWZXJzaW9uKSwgJ0Nhbm5vdCBhZGQgYSBkb2N1bWVudCB3aGVuIHRoZSByZW1vdGUgdmVyc2lvbiBpcyB6ZXJvJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50QnVmZmVyLmFkZEVudHJ5KGRvYywgcmVtb3RlVmVyc2lvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZWREb2NzID0gY2hhbmdlZERvY3MuaW5zZXJ0KGtleSwgZG9jKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlYnVnKExPR19UQUckMiwgJ0lnbm9yaW5nIG91dGRhdGVkIHdhdGNoIHVwZGF0ZSBmb3IgJywga2V5LCAnLiBDdXJyZW50IHZlcnNpb246JywgZXhpc3RpbmdEb2MudmVyc2lvbiwgJyBXYXRjaCB2ZXJzaW9uOicsIGRvYy52ZXJzaW9uKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlbW90ZUV2ZW50LnJlc29sdmVkTGltYm9Eb2N1bWVudHMuaGFzKGtleSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvbWlzZXMucHVzaChfdGhpcy5wZXJzaXN0ZW5jZS5yZWZlcmVuY2VEZWxlZ2F0ZS51cGRhdGVMaW1ib0RvY3VtZW50KHR4biwga2V5KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pKTtcclxuICAgICAgICAgICAgLy8gSEFDSzogVGhlIG9ubHkgcmVhc29uIHdlIGFsbG93IGEgbnVsbCBzbmFwc2hvdCB2ZXJzaW9uIGlzIHNvIHRoYXQgd2VcclxuICAgICAgICAgICAgLy8gY2FuIHN5bnRoZXNpemUgcmVtb3RlIGV2ZW50cyB3aGVuIHdlIGdldCBwZXJtaXNzaW9uIGRlbmllZCBlcnJvcnMgd2hpbGVcclxuICAgICAgICAgICAgLy8gdHJ5aW5nIHRvIHJlc29sdmUgdGhlIHN0YXRlIG9mIGEgbG9jYWxseSBjYWNoZWQgZG9jdW1lbnQgdGhhdCBpcyBpblxyXG4gICAgICAgICAgICAvLyBsaW1iby5cclxuICAgICAgICAgICAgaWYgKCFyZW1vdGVWZXJzaW9uLmlzRXF1YWwoU25hcHNob3RWZXJzaW9uLk1JTikpIHtcclxuICAgICAgICAgICAgICAgIHZhciB1cGRhdGVSZW1vdGVWZXJzaW9uID0gX3RoaXMudGFyZ2V0Q2FjaGVcclxuICAgICAgICAgICAgICAgICAgICAuZ2V0TGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbih0eG4pXHJcbiAgICAgICAgICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKGxhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBhc3NlcnQocmVtb3RlVmVyc2lvbi5jb21wYXJlVG8obGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbikgPj0gMCwgJ1dhdGNoIHN0cmVhbSByZXZlcnRlZCB0byBwcmV2aW91cyBzbmFwc2hvdD8/ICcgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZW1vdGVWZXJzaW9uICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJyA8ICcgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMudGFyZ2V0Q2FjaGUuc2V0VGFyZ2V0c01ldGFkYXRhKHR4biwgdHhuLmN1cnJlbnRTZXF1ZW5jZU51bWJlciwgcmVtb3RlVmVyc2lvbik7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHByb21pc2VzLnB1c2godXBkYXRlUmVtb3RlVmVyc2lvbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS53YWl0Rm9yKHByb21pc2VzKVxyXG4gICAgICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKCkgeyByZXR1cm4gZG9jdW1lbnRCdWZmZXIuYXBwbHkodHhuKTsgfSlcclxuICAgICAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5sb2NhbERvY3VtZW50cy5nZXRMb2NhbFZpZXdPZkRvY3VtZW50cyh0eG4sIGNoYW5nZWREb2NzKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKGNoYW5nZWREb2NzKSB7XHJcbiAgICAgICAgICAgIF90aGlzLnRhcmdldERhdGFCeVRhcmdldCA9IG5ld1RhcmdldERhdGFCeVRhcmdldE1hcDtcclxuICAgICAgICAgICAgcmV0dXJuIGNoYW5nZWREb2NzO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoZSBuZXdUYXJnZXREYXRhIHNob3VsZCBiZSBwZXJzaXN0ZWQgZHVyaW5nIGFuIHVwZGF0ZSBvZlxyXG4gICAgICogYW4gYWN0aXZlIHRhcmdldC4gVGFyZ2V0RGF0YSBzaG91bGQgYWx3YXlzIGJlIHBlcnNpc3RlZCB3aGVuIGEgdGFyZ2V0IGlzXHJcbiAgICAgKiBiZWluZyByZWxlYXNlZCBhbmQgc2hvdWxkIG5vdCBjYWxsIHRoaXMgZnVuY3Rpb24uXHJcbiAgICAgKlxyXG4gICAgICogV2hpbGUgdGhlIHRhcmdldCBpcyBhY3RpdmUsIFRhcmdldERhdGEgdXBkYXRlcyBjYW4gYmUgb21pdHRlZCB3aGVuIG5vdGhpbmdcclxuICAgICAqIGFib3V0IHRoZSB0YXJnZXQgaGFzIGNoYW5nZWQgZXhjZXB0IG1ldGFkYXRhIGxpa2UgdGhlIHJlc3VtZSB0b2tlbiBvclxyXG4gICAgICogc25hcHNob3QgdmVyc2lvbi4gT2NjYXNpb25hbGx5IGl0J3Mgd29ydGggdGhlIGV4dHJhIHdyaXRlIHRvIHByZXZlbnQgdGhlc2VcclxuICAgICAqIHZhbHVlcyBmcm9tIGdldHRpbmcgdG9vIHN0YWxlIGFmdGVyIGEgY3Jhc2gsIGJ1dCB0aGlzIGRvZXNuJ3QgaGF2ZSB0byBiZVxyXG4gICAgICogdG9vIGZyZXF1ZW50LlxyXG4gICAgICovXHJcbiAgICBMb2NhbFN0b3JlLnNob3VsZFBlcnNpc3RUYXJnZXREYXRhID0gZnVuY3Rpb24gKG9sZFRhcmdldERhdGEsIG5ld1RhcmdldERhdGEsIGNoYW5nZSkge1xyXG4gICAgICAgIGFzc2VydChuZXdUYXJnZXREYXRhLnJlc3VtZVRva2VuLmxlbmd0aCA+IDAsICdBdHRlbXB0ZWQgdG8gcGVyc2lzdCB0YXJnZXQgZGF0YSB3aXRoIG5vIHJlc3VtZSB0b2tlbicpO1xyXG4gICAgICAgIC8vIEFsd2F5cyBwZXJzaXN0IHRhcmdldCBkYXRhIGlmIHdlIGRvbid0IGFscmVhZHkgaGF2ZSBhIHJlc3VtZSB0b2tlbi5cclxuICAgICAgICBpZiAob2xkVGFyZ2V0RGF0YS5yZXN1bWVUb2tlbi5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIERvbid0IGFsbG93IHJlc3VtZSB0b2tlbiBjaGFuZ2VzIHRvIGJlIGJ1ZmZlcmVkIGluZGVmaW5pdGVseS4gVGhpc1xyXG4gICAgICAgIC8vIGFsbG93cyB1cyB0byBiZSByZWFzb25hYmx5IHVwLXRvLWRhdGUgYWZ0ZXIgYSBjcmFzaCBhbmQgYXZvaWRzIG5lZWRpbmdcclxuICAgICAgICAvLyB0byBsb29wIG92ZXIgYWxsIGFjdGl2ZSBxdWVyaWVzIG9uIHNodXRkb3duLiBFc3BlY2lhbGx5IGluIHRoZSBicm93c2VyXHJcbiAgICAgICAgLy8gd2UgbWF5IG5vdCBnZXQgdGltZSB0byBkbyBhbnl0aGluZyBpbnRlcmVzdGluZyB3aGlsZSB0aGUgY3VycmVudCB0YWIgaXNcclxuICAgICAgICAvLyBjbG9zaW5nLlxyXG4gICAgICAgIHZhciB0aW1lRGVsdGEgPSBuZXdUYXJnZXREYXRhLnNuYXBzaG90VmVyc2lvbi50b01pY3Jvc2Vjb25kcygpIC1cclxuICAgICAgICAgICAgb2xkVGFyZ2V0RGF0YS5zbmFwc2hvdFZlcnNpb24udG9NaWNyb3NlY29uZHMoKTtcclxuICAgICAgICBpZiAodGltZURlbHRhID49IHRoaXMuUkVTVU1FX1RPS0VOX01BWF9BR0VfTUlDUk9TKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBPdGhlcndpc2UgaWYgdGhlIG9ubHkgdGhpbmcgdGhhdCBoYXMgY2hhbmdlZCBhYm91dCBhIHRhcmdldCBpcyBpdHMgcmVzdW1lXHJcbiAgICAgICAgLy8gdG9rZW4gaXQncyBub3Qgd29ydGggcGVyc2lzdGluZy4gTm90ZSB0aGF0IHRoZSBSZW1vdGVTdG9yZSBrZWVwcyBhblxyXG4gICAgICAgIC8vIGluLW1lbW9yeSB2aWV3IG9mIHRoZSBjdXJyZW50bHkgYWN0aXZlIHRhcmdldHMgd2hpY2ggaW5jbHVkZXMgdGhlIGN1cnJlbnRcclxuICAgICAgICAvLyByZXN1bWUgdG9rZW4sIHNvIHN0cmVhbSBmYWlsdXJlIG9yIHVzZXIgY2hhbmdlcyB3aWxsIHN0aWxsIHVzZSBhblxyXG4gICAgICAgIC8vIHVwLXRvLWRhdGUgcmVzdW1lIHRva2VuIHJlZ2FyZGxlc3Mgb2Ygd2hhdCB3ZSBkbyBoZXJlLlxyXG4gICAgICAgIHZhciBjaGFuZ2VzID0gY2hhbmdlLmFkZGVkRG9jdW1lbnRzLnNpemUgK1xyXG4gICAgICAgICAgICBjaGFuZ2UubW9kaWZpZWREb2N1bWVudHMuc2l6ZSArXHJcbiAgICAgICAgICAgIGNoYW5nZS5yZW1vdmVkRG9jdW1lbnRzLnNpemU7XHJcbiAgICAgICAgcmV0dXJuIGNoYW5nZXMgPiAwO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogTm90aWZ5IGxvY2FsIHN0b3JlIG9mIHRoZSBjaGFuZ2VkIHZpZXdzIHRvIGxvY2FsbHkgcGluIGRvY3VtZW50cy5cclxuICAgICAqL1xyXG4gICAgTG9jYWxTdG9yZS5wcm90b3R5cGUubm90aWZ5TG9jYWxWaWV3Q2hhbmdlcyA9IGZ1bmN0aW9uICh2aWV3Q2hhbmdlcykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCB2aWV3Q2hhbmdlc18xID0gdmlld0NoYW5nZXM7IF9pIDwgdmlld0NoYW5nZXNfMS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgdmFyIHZpZXdDaGFuZ2UgPSB2aWV3Q2hhbmdlc18xW19pXTtcclxuICAgICAgICAgICAgdmFyIHRhcmdldElkID0gdmlld0NoYW5nZS50YXJnZXRJZDtcclxuICAgICAgICAgICAgdGhpcy5sb2NhbFZpZXdSZWZlcmVuY2VzLmFkZFJlZmVyZW5jZXModmlld0NoYW5nZS5hZGRlZEtleXMsIHRhcmdldElkKTtcclxuICAgICAgICAgICAgdGhpcy5sb2NhbFZpZXdSZWZlcmVuY2VzLnJlbW92ZVJlZmVyZW5jZXModmlld0NoYW5nZS5yZW1vdmVkS2V5cywgdGFyZ2V0SWQpO1xyXG4gICAgICAgICAgICBpZiAoIXZpZXdDaGFuZ2UuZnJvbUNhY2hlKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0RGF0YSA9IHRoaXMudGFyZ2V0RGF0YUJ5VGFyZ2V0LmdldCh0YXJnZXRJZCk7XHJcbiAgICAgICAgICAgICAgICBhc3NlcnQodGFyZ2V0RGF0YSAhPT0gbnVsbCwgXCJDYW4ndCBzZXQgbGltYm8tZnJlZSBzbmFwc2hvdCB2ZXJzaW9uIGZvciB1bmtub3duIHRhcmdldDogXCIgKyB0YXJnZXRJZCk7XHJcbiAgICAgICAgICAgICAgICAvLyBBZHZhbmNlIHRoZSBsYXN0IGxpbWJvIGZyZWUgc25hcHNob3QgdmVyc2lvblxyXG4gICAgICAgICAgICAgICAgdmFyIGxhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24gPSB0YXJnZXREYXRhLnNuYXBzaG90VmVyc2lvbjtcclxuICAgICAgICAgICAgICAgIHZhciB1cGRhdGVkVGFyZ2V0RGF0YSA9IHRhcmdldERhdGEud2l0aExhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24obGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRhcmdldERhdGFCeVRhcmdldCA9IHRoaXMudGFyZ2V0RGF0YUJ5VGFyZ2V0Lmluc2VydCh0YXJnZXRJZCwgdXBkYXRlZFRhcmdldERhdGEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKCdub3RpZnlMb2NhbFZpZXdDaGFuZ2VzJywgJ3JlYWR3cml0ZS1pZGVtcG90ZW50JywgZnVuY3Rpb24gKHR4bikge1xyXG4gICAgICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLmZvckVhY2godmlld0NoYW5nZXMsIGZ1bmN0aW9uICh2aWV3Q2hhbmdlKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLmZvckVhY2godmlld0NoYW5nZS5yZW1vdmVkS2V5cywgZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5wZXJzaXN0ZW5jZS5yZWZlcmVuY2VEZWxlZ2F0ZS5yZW1vdmVSZWZlcmVuY2UodHhuLCBrZXkpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogR2V0cyB0aGUgbXV0YXRpb24gYmF0Y2ggYWZ0ZXIgdGhlIHBhc3NlZCBpbiBiYXRjaElkIGluIHRoZSBtdXRhdGlvbiBxdWV1ZVxyXG4gICAgICogb3IgbnVsbCBpZiBlbXB0eS5cclxuICAgICAqIEBwYXJhbSBhZnRlckJhdGNoSWQgSWYgcHJvdmlkZWQsIHRoZSBiYXRjaCB0byBzZWFyY2ggYWZ0ZXIuXHJcbiAgICAgKiBAcmV0dXJucyBUaGUgbmV4dCBtdXRhdGlvbiBvciBudWxsIGlmIHRoZXJlIHdhc24ndCBvbmUuXHJcbiAgICAgKi9cclxuICAgIExvY2FsU3RvcmUucHJvdG90eXBlLm5leHRNdXRhdGlvbkJhdGNoID0gZnVuY3Rpb24gKGFmdGVyQmF0Y2hJZCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oJ0dldCBuZXh0IG11dGF0aW9uIGJhdGNoJywgJ3JlYWRvbmx5LWlkZW1wb3RlbnQnLCBmdW5jdGlvbiAodHhuKSB7XHJcbiAgICAgICAgICAgIGlmIChhZnRlckJhdGNoSWQgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgYWZ0ZXJCYXRjaElkID0gQkFUQ0hJRF9VTktOT1dOO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5tdXRhdGlvblF1ZXVlLmdldE5leHRNdXRhdGlvbkJhdGNoQWZ0ZXJCYXRjaElkKHR4biwgYWZ0ZXJCYXRjaElkKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJlYWQgdGhlIGN1cnJlbnQgdmFsdWUgb2YgYSBEb2N1bWVudCB3aXRoIGEgZ2l2ZW4ga2V5IG9yIG51bGwgaWYgbm90XHJcbiAgICAgKiBmb3VuZCAtIHVzZWQgZm9yIHRlc3RpbmcuXHJcbiAgICAgKi9cclxuICAgIExvY2FsU3RvcmUucHJvdG90eXBlLnJlYWREb2N1bWVudCA9IGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKCdyZWFkIGRvY3VtZW50JywgJ3JlYWRvbmx5LWlkZW1wb3RlbnQnLCBmdW5jdGlvbiAodHhuKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5sb2NhbERvY3VtZW50cy5nZXREb2N1bWVudCh0eG4sIGtleSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBBc3NpZ25zIHRoZSBnaXZlbiB0YXJnZXQgYW4gaW50ZXJuYWwgSUQgc28gdGhhdCBpdHMgcmVzdWx0cyBjYW4gYmUgcGlubmVkIHNvXHJcbiAgICAgKiB0aGV5IGRvbid0IGdldCBHQydkLiBBIHRhcmdldCBtdXN0IGJlIGFsbG9jYXRlZCBpbiB0aGUgbG9jYWwgc3RvcmUgYmVmb3JlXHJcbiAgICAgKiB0aGUgc3RvcmUgY2FuIGJlIHVzZWQgdG8gbWFuYWdlIGl0cyB2aWV3LlxyXG4gICAgICpcclxuICAgICAqIEFsbG9jYXRpbmcgYW4gYWxyZWFkeSBhbGxvY2F0ZWQgYFRhcmdldGAgd2lsbCByZXR1cm4gdGhlIGV4aXN0aW5nIGBUYXJnZXREYXRhYFxyXG4gICAgICogZm9yIHRoYXQgYFRhcmdldGAuXHJcbiAgICAgKi9cclxuICAgIExvY2FsU3RvcmUucHJvdG90eXBlLmFsbG9jYXRlVGFyZ2V0ID0gZnVuY3Rpb24gKHRhcmdldCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucGVyc2lzdGVuY2VcclxuICAgICAgICAgICAgLnJ1blRyYW5zYWN0aW9uKCdBbGxvY2F0ZSB0YXJnZXQnLCAncmVhZHdyaXRlLWlkZW1wb3RlbnQnLCBmdW5jdGlvbiAodHhuKSB7XHJcbiAgICAgICAgICAgIHZhciB0YXJnZXREYXRhO1xyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXMudGFyZ2V0Q2FjaGVcclxuICAgICAgICAgICAgICAgIC5nZXRUYXJnZXREYXRhKHR4biwgdGFyZ2V0KVxyXG4gICAgICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKGNhY2hlZCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGNhY2hlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgdGFyZ2V0IGhhcyBiZWVuIGxpc3RlbmVkIHRvIHByZXZpb3VzbHksIHNvIHJldXNlIHRoZVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIHByZXZpb3VzIHRhcmdldElELlxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFRPRE8obWNnKTogZnJlc2hlbiBsYXN0IGFjY2Vzc2VkIGRhdGU/XHJcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0RGF0YSA9IGNhY2hlZDtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUodGFyZ2V0RGF0YSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMudGFyZ2V0Q2FjaGUuYWxsb2NhdGVUYXJnZXRJZCh0eG4pLm5leHQoZnVuY3Rpb24gKHRhcmdldElkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldERhdGEgPSBuZXcgVGFyZ2V0RGF0YSh0YXJnZXQsIHRhcmdldElkLCBUYXJnZXRQdXJwb3NlLkxpc3RlbiwgdHhuLmN1cnJlbnRTZXF1ZW5jZU51bWJlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy50YXJnZXRDYWNoZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFkZFRhcmdldERhdGEodHhuLCB0YXJnZXREYXRhKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKCkgeyByZXR1cm4gdGFyZ2V0RGF0YTsgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICh0YXJnZXREYXRhKSB7XHJcbiAgICAgICAgICAgIGlmIChfdGhpcy50YXJnZXREYXRhQnlUYXJnZXQuZ2V0KHRhcmdldERhdGEudGFyZ2V0SWQpID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy50YXJnZXREYXRhQnlUYXJnZXQgPSBfdGhpcy50YXJnZXREYXRhQnlUYXJnZXQuaW5zZXJ0KHRhcmdldERhdGEudGFyZ2V0SWQsIHRhcmdldERhdGEpO1xyXG4gICAgICAgICAgICAgICAgX3RoaXMudGFyZ2V0SWRCeVRhcmdldC5zZXQodGFyZ2V0LCB0YXJnZXREYXRhLnRhcmdldElkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gdGFyZ2V0RGF0YTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdGhlIFRhcmdldERhdGEgYXMgc2VlbiBieSB0aGUgTG9jYWxTdG9yZSwgaW5jbHVkaW5nIHVwZGF0ZXMgdGhhdCBtYXlcclxuICAgICAqIGhhdmUgbm90IHlldCBiZWVuIHBlcnNpc3RlZCB0byB0aGUgVGFyZ2V0Q2FjaGUuXHJcbiAgICAgKi9cclxuICAgIC8vIFZpc2libGUgZm9yIHRlc3RpbmcuXHJcbiAgICBMb2NhbFN0b3JlLnByb3RvdHlwZS5nZXRUYXJnZXREYXRhID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCB0YXJnZXQpIHtcclxuICAgICAgICB2YXIgdGFyZ2V0SWQgPSB0aGlzLnRhcmdldElkQnlUYXJnZXQuZ2V0KHRhcmdldCk7XHJcbiAgICAgICAgaWYgKHRhcmdldElkICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKHRoaXMudGFyZ2V0RGF0YUJ5VGFyZ2V0LmdldCh0YXJnZXRJZCkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMudGFyZ2V0Q2FjaGUuZ2V0VGFyZ2V0RGF0YSh0cmFuc2FjdGlvbiwgdGFyZ2V0KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBVbnBpbiBhbGwgdGhlIGRvY3VtZW50cyBhc3NvY2lhdGVkIHdpdGggdGhlIGdpdmVuIHRhcmdldC4gSWZcclxuICAgICAqIGBrZWVwUGVyc2lzdGVkVGFyZ2V0RGF0YWAgaXMgc2V0IHRvIGZhbHNlIGFuZCBFYWdlciBHQyBlbmFibGVkLCB0aGUgbWV0aG9kXHJcbiAgICAgKiBkaXJlY3RseSByZW1vdmVzIHRoZSBhc3NvY2lhdGVkIHRhcmdldCBkYXRhIGZyb20gdGhlIHRhcmdldCBjYWNoZS5cclxuICAgICAqXHJcbiAgICAgKiBSZWxlYXNpbmcgYSBub24tZXhpc3RpbmcgYFRhcmdldGAgaXMgYSBuby1vcC5cclxuICAgICAqL1xyXG4gICAgLy8gUE9SVElORyBOT1RFOiBga2VlcFBlcnNpc3RlZFRhcmdldERhdGFgIGlzIG11bHRpLXRhYiBvbmx5LlxyXG4gICAgTG9jYWxTdG9yZS5wcm90b3R5cGUucmVsZWFzZVRhcmdldCA9IGZ1bmN0aW9uICh0YXJnZXRJZCwga2VlcFBlcnNpc3RlZFRhcmdldERhdGEpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhciB0YXJnZXREYXRhID0gdGhpcy50YXJnZXREYXRhQnlUYXJnZXQuZ2V0KHRhcmdldElkKTtcclxuICAgICAgICBhc3NlcnQodGFyZ2V0RGF0YSAhPT0gbnVsbCwgXCJUcmllZCB0byByZWxlYXNlIG5vbmV4aXN0ZW50IHRhcmdldDogXCIgKyB0YXJnZXRJZCk7XHJcbiAgICAgICAgdmFyIG1vZGUgPSBrZWVwUGVyc2lzdGVkVGFyZ2V0RGF0YVxyXG4gICAgICAgICAgICA/ICdyZWFkd3JpdGUtaWRlbXBvdGVudCdcclxuICAgICAgICAgICAgOiAncmVhZHdyaXRlLXByaW1hcnktaWRlbXBvdGVudCc7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucGVyc2lzdGVuY2VcclxuICAgICAgICAgICAgLnJ1blRyYW5zYWN0aW9uKCdSZWxlYXNlIHRhcmdldCcsIG1vZGUsIGZ1bmN0aW9uICh0eG4pIHtcclxuICAgICAgICAgICAgLy8gUmVmZXJlbmNlcyBmb3IgZG9jdW1lbnRzIHNlbnQgdmlhIFdhdGNoIGFyZSBhdXRvbWF0aWNhbGx5IHJlbW92ZWRcclxuICAgICAgICAgICAgLy8gd2hlbiB3ZSBkZWxldGUgYSB0YXJnZXQncyBkYXRhIGZyb20gdGhlIHJlZmVyZW5jZSBkZWxlZ2F0ZS5cclxuICAgICAgICAgICAgLy8gU2luY2UgdGhpcyBkb2VzIG5vdCByZW1vdmUgcmVmZXJlbmNlcyBmb3IgbG9jYWxseSBtdXRhdGVkIGRvY3VtZW50cyxcclxuICAgICAgICAgICAgLy8gd2UgaGF2ZSB0byByZW1vdmUgdGhlIHRhcmdldCBhc3NvY2lhdGlvbnMgZm9yIHRoZXNlIGRvY3VtZW50c1xyXG4gICAgICAgICAgICAvLyBtYW51YWxseS5cclxuICAgICAgICAgICAgLy8gVGhpcyBvcGVyYXRpb24gbmVlZHMgdG8gYmUgcnVuIGluc2lkZSB0aGUgdHJhbnNhY3Rpb24gc2luY2UgRWFnZXJHQ1xyXG4gICAgICAgICAgICAvLyB1c2VzIHRoZSBsb2NhbCB2aWV3IHJlZmVyZW5jZXMgZHVyaW5nIHRoZSB0cmFuc2FjdGlvbidzIGNvbW1pdC5cclxuICAgICAgICAgICAgLy8gRm9ydHVuYXRlbHksIHRoZSBvcGVyYXRpb24gaXMgc2FmZSB0byBiZSByZS1ydW4gaW4gY2FzZSB0aGVcclxuICAgICAgICAgICAgLy8gdHJhbnNhY3Rpb24gZmFpbHMgc2luY2UgdGhlcmUgYXJlIG5vIHNpZGUgZWZmZWN0cyBpZiB0aGUgdGFyZ2V0IGhhc1xyXG4gICAgICAgICAgICAvLyBhbHJlYWR5IGJlZW4gcmVtb3ZlZC5cclxuICAgICAgICAgICAgdmFyIHJlbW92ZWQgPSBfdGhpcy5sb2NhbFZpZXdSZWZlcmVuY2VzLnJlbW92ZVJlZmVyZW5jZXNGb3JJZCh0YXJnZXRJZCk7XHJcbiAgICAgICAgICAgIGlmICgha2VlcFBlcnNpc3RlZFRhcmdldERhdGEpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UuZm9yRWFjaChyZW1vdmVkLCBmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLnBlcnNpc3RlbmNlLnJlZmVyZW5jZURlbGVnYXRlLnJlbW92ZVJlZmVyZW5jZSh0eG4sIGtleSk7XHJcbiAgICAgICAgICAgICAgICB9KS5uZXh0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5wZXJzaXN0ZW5jZS5yZWZlcmVuY2VEZWxlZ2F0ZS5yZW1vdmVUYXJnZXQodHhuLCB0YXJnZXREYXRhKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIF90aGlzLnRhcmdldERhdGFCeVRhcmdldCA9IF90aGlzLnRhcmdldERhdGFCeVRhcmdldC5yZW1vdmUodGFyZ2V0SWQpO1xyXG4gICAgICAgICAgICBfdGhpcy50YXJnZXRJZEJ5VGFyZ2V0LmRlbGV0ZSh0YXJnZXREYXRhLnRhcmdldCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSdW5zIHRoZSBzcGVjaWZpZWQgcXVlcnkgYWdhaW5zdCB0aGUgbG9jYWwgc3RvcmUgYW5kIHJldHVybnMgdGhlIHJlc3VsdHMsXHJcbiAgICAgKiBwb3RlbnRpYWxseSB0YWtpbmcgYWR2YW50YWdlIG9mIHF1ZXJ5IGRhdGEgZnJvbSBwcmV2aW91cyBleGVjdXRpb25zIChzdWNoXHJcbiAgICAgKiBhcyB0aGUgc2V0IG9mIHJlbW90ZSBrZXlzKS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gdXNlUHJldmlvdXNSZXN1bHRzIFdoZXRoZXIgcmVzdWx0cyBmcm9tIHByZXZpb3VzIGV4ZWN1dGlvbnMgY2FuXHJcbiAgICAgKiBiZSB1c2VkIHRvIG9wdGltaXplIHRoaXMgcXVlcnkgZXhlY3V0aW9uLlxyXG4gICAgICovXHJcbiAgICBMb2NhbFN0b3JlLnByb3RvdHlwZS5leGVjdXRlUXVlcnkgPSBmdW5jdGlvbiAocXVlcnksIHVzZVByZXZpb3VzUmVzdWx0cykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIGxhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24gPSBTbmFwc2hvdFZlcnNpb24uTUlOO1xyXG4gICAgICAgIHZhciByZW1vdGVLZXlzID0gZG9jdW1lbnRLZXlTZXQoKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbignRXhlY3V0ZSBxdWVyeScsICdyZWFkb25seS1pZGVtcG90ZW50JywgZnVuY3Rpb24gKHR4bikge1xyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXMuZ2V0VGFyZ2V0RGF0YSh0eG4sIHF1ZXJ5LnRvVGFyZ2V0KCkpXHJcbiAgICAgICAgICAgICAgICAubmV4dChmdW5jdGlvbiAodGFyZ2V0RGF0YSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRhcmdldERhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICBsYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uID1cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0RGF0YS5sYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy50YXJnZXRDYWNoZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuZ2V0TWF0Y2hpbmdLZXlzRm9yVGFyZ2V0SWQodHhuLCB0YXJnZXREYXRhLnRhcmdldElkKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAubmV4dChmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlbW90ZUtleXMgPSByZXN1bHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAubmV4dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMucXVlcnlFbmdpbmUuZ2V0RG9jdW1lbnRzTWF0Y2hpbmdRdWVyeSh0eG4sIHF1ZXJ5LCB1c2VQcmV2aW91c1Jlc3VsdHNcclxuICAgICAgICAgICAgICAgICAgICA/IGxhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb25cclxuICAgICAgICAgICAgICAgICAgICA6IFNuYXBzaG90VmVyc2lvbi5NSU4sIHVzZVByZXZpb3VzUmVzdWx0cyA/IHJlbW90ZUtleXMgOiBkb2N1bWVudEtleVNldCgpKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uIChkb2N1bWVudHMpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7IGRvY3VtZW50czogZG9jdW1lbnRzLCByZW1vdGVLZXlzOiByZW1vdGVLZXlzIH07XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0aGUga2V5cyBvZiB0aGUgZG9jdW1lbnRzIHRoYXQgYXJlIGFzc29jaWF0ZWQgd2l0aCB0aGUgZ2l2ZW5cclxuICAgICAqIHRhcmdldCBpZCBpbiB0aGUgcmVtb3RlIHRhYmxlLlxyXG4gICAgICovXHJcbiAgICBMb2NhbFN0b3JlLnByb3RvdHlwZS5yZW1vdGVEb2N1bWVudEtleXMgPSBmdW5jdGlvbiAodGFyZ2V0SWQpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKCdSZW1vdGUgZG9jdW1lbnQga2V5cycsICdyZWFkb25seS1pZGVtcG90ZW50JywgZnVuY3Rpb24gKHR4bikge1xyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXMudGFyZ2V0Q2FjaGUuZ2V0TWF0Y2hpbmdLZXlzRm9yVGFyZ2V0SWQodHhuLCB0YXJnZXRJZCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS10YWIgb25seS5cclxuICAgIExvY2FsU3RvcmUucHJvdG90eXBlLmdldEFjdGl2ZUNsaWVudHMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucGVyc2lzdGVuY2UuZ2V0QWN0aXZlQ2xpZW50cygpO1xyXG4gICAgfTtcclxuICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktdGFiIG9ubHkuXHJcbiAgICBMb2NhbFN0b3JlLnByb3RvdHlwZS5yZW1vdmVDYWNoZWRNdXRhdGlvbkJhdGNoTWV0YWRhdGEgPSBmdW5jdGlvbiAoYmF0Y2hJZCkge1xyXG4gICAgICAgIHRoaXMubXV0YXRpb25RdWV1ZS5yZW1vdmVDYWNoZWRNdXRhdGlvbktleXMoYmF0Y2hJZCk7XHJcbiAgICB9O1xyXG4gICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS10YWIgb25seS5cclxuICAgIExvY2FsU3RvcmUucHJvdG90eXBlLnNldE5ldHdvcmtFbmFibGVkID0gZnVuY3Rpb24gKG5ldHdvcmtFbmFibGVkKSB7XHJcbiAgICAgICAgdGhpcy5wZXJzaXN0ZW5jZS5zZXROZXR3b3JrRW5hYmxlZChuZXR3b3JrRW5hYmxlZCk7XHJcbiAgICB9O1xyXG4gICAgTG9jYWxTdG9yZS5wcm90b3R5cGUuYXBwbHlXcml0ZVRvUmVtb3RlRG9jdW1lbnRzID0gZnVuY3Rpb24gKHR4biwgYmF0Y2hSZXN1bHQsIGRvY3VtZW50QnVmZmVyKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgYmF0Y2ggPSBiYXRjaFJlc3VsdC5iYXRjaDtcclxuICAgICAgICB2YXIgZG9jS2V5cyA9IGJhdGNoLmtleXMoKTtcclxuICAgICAgICB2YXIgcHJvbWlzZUNoYWluID0gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoKTtcclxuICAgICAgICBkb2NLZXlzLmZvckVhY2goZnVuY3Rpb24gKGRvY0tleSkge1xyXG4gICAgICAgICAgICBwcm9taXNlQ2hhaW4gPSBwcm9taXNlQ2hhaW5cclxuICAgICAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBkb2N1bWVudEJ1ZmZlci5nZXRFbnRyeSh0eG4sIGRvY0tleSk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAubmV4dChmdW5jdGlvbiAocmVtb3RlRG9jKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZG9jID0gcmVtb3RlRG9jO1xyXG4gICAgICAgICAgICAgICAgdmFyIGFja1ZlcnNpb24gPSBiYXRjaFJlc3VsdC5kb2NWZXJzaW9ucy5nZXQoZG9jS2V5KTtcclxuICAgICAgICAgICAgICAgIGFzc2VydChhY2tWZXJzaW9uICE9PSBudWxsLCAnYWNrVmVyc2lvbnMgc2hvdWxkIGNvbnRhaW4gZXZlcnkgZG9jIGluIHRoZSB3cml0ZS4nKTtcclxuICAgICAgICAgICAgICAgIGlmICghZG9jIHx8IGRvYy52ZXJzaW9uLmNvbXBhcmVUbyhhY2tWZXJzaW9uKSA8IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBkb2MgPSBiYXRjaC5hcHBseVRvUmVtb3RlRG9jdW1lbnQoZG9jS2V5LCBkb2MsIGJhdGNoUmVzdWx0KTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWRvYykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhc3NlcnQoIXJlbW90ZURvYywgJ011dGF0aW9uIGJhdGNoICcgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmF0Y2ggK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJyBhcHBsaWVkIHRvIGRvY3VtZW50ICcgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3RlRG9jICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICcgcmVzdWx0ZWQgaW4gbnVsbCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gV2UgdXNlIHRoZSBjb21taXRWZXJzaW9uIGFzIHRoZSByZWFkVGltZSByYXRoZXIgdGhhbiB0aGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZG9jdW1lbnQncyB1cGRhdGVUaW1lIHNpbmNlIHRoZSB1cGRhdGVUaW1lIGlzIG5vdCBhZHZhbmNlZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBmb3IgdXBkYXRlcyB0aGF0IGRvIG5vdCBtb2RpZnkgdGhlIHVuZGVybHlpbmcgZG9jdW1lbnQuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50QnVmZmVyLmFkZEVudHJ5KGRvYywgYmF0Y2hSZXN1bHQuY29tbWl0VmVyc2lvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gcHJvbWlzZUNoYWluLm5leHQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXMubXV0YXRpb25RdWV1ZS5yZW1vdmVNdXRhdGlvbkJhdGNoKHR4biwgYmF0Y2gpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIExvY2FsU3RvcmUucHJvdG90eXBlLmNvbGxlY3RHYXJiYWdlID0gZnVuY3Rpb24gKGdhcmJhZ2VDb2xsZWN0b3IpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKCdDb2xsZWN0IGdhcmJhZ2UnLCAncmVhZHdyaXRlLXByaW1hcnktaWRlbXBvdGVudCcsIGZ1bmN0aW9uICh0eG4pIHsgcmV0dXJuIGdhcmJhZ2VDb2xsZWN0b3IuY29sbGVjdCh0eG4sIF90aGlzLnRhcmdldERhdGFCeVRhcmdldCk7IH0pO1xyXG4gICAgfTtcclxuICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktdGFiIG9ubHkuXHJcbiAgICBMb2NhbFN0b3JlLnByb3RvdHlwZS5nZXRUYXJnZXQgPSBmdW5jdGlvbiAodGFyZ2V0SWQpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhciBjYWNoZWRUYXJnZXREYXRhID0gdGhpcy50YXJnZXREYXRhQnlUYXJnZXQuZ2V0KHRhcmdldElkKTtcclxuICAgICAgICBpZiAoY2FjaGVkVGFyZ2V0RGF0YSkge1xyXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGNhY2hlZFRhcmdldERhdGEudGFyZ2V0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKCdHZXQgdGFyZ2V0IGRhdGEnLCAncmVhZG9ubHktaWRlbXBvdGVudCcsIGZ1bmN0aW9uICh0eG4pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy50YXJnZXRDYWNoZVxyXG4gICAgICAgICAgICAgICAgICAgIC5nZXRUYXJnZXREYXRhRm9yVGFyZ2V0KHR4biwgdGFyZ2V0SWQpXHJcbiAgICAgICAgICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKHRhcmdldERhdGEpIHsgcmV0dXJuICh0YXJnZXREYXRhID8gdGFyZ2V0RGF0YS50YXJnZXQgOiBudWxsKTsgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdGhlIHNldCBvZiBkb2N1bWVudHMgdGhhdCBoYXZlIGJlZW4gdXBkYXRlZCBzaW5jZSB0aGUgbGFzdCBjYWxsLlxyXG4gICAgICogSWYgdGhpcyBpcyB0aGUgZmlyc3QgY2FsbCwgcmV0dXJucyB0aGUgc2V0IG9mIGNoYW5nZXMgc2luY2UgY2xpZW50XHJcbiAgICAgKiBpbml0aWFsaXphdGlvbi4gRnVydGhlciBpbnZvY2F0aW9ucyB3aWxsIHJldHVybiBkb2N1bWVudCBjaGFuZ2VzIHNpbmNlXHJcbiAgICAgKiB0aGUgcG9pbnQgb2YgcmVqZWN0aW9uLlxyXG4gICAgICovXHJcbiAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLXRhYiBvbmx5LlxyXG4gICAgTG9jYWxTdG9yZS5wcm90b3R5cGUuZ2V0TmV3RG9jdW1lbnRDaGFuZ2VzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucGVyc2lzdGVuY2VcclxuICAgICAgICAgICAgLnJ1blRyYW5zYWN0aW9uKCdHZXQgbmV3IGRvY3VtZW50IGNoYW5nZXMnLCAncmVhZG9ubHktaWRlbXBvdGVudCcsIGZ1bmN0aW9uICh0eG4pIHtcclxuICAgICAgICAgICAgcmV0dXJuIF90aGlzLnJlbW90ZURvY3VtZW50cy5nZXROZXdEb2N1bWVudENoYW5nZXModHhuLCBfdGhpcy5sYXN0RG9jdW1lbnRDaGFuZ2VSZWFkVGltZSk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgIHZhciBjaGFuZ2VkRG9jcyA9IF9hLmNoYW5nZWREb2NzLCByZWFkVGltZSA9IF9hLnJlYWRUaW1lO1xyXG4gICAgICAgICAgICBfdGhpcy5sYXN0RG9jdW1lbnRDaGFuZ2VSZWFkVGltZSA9IHJlYWRUaW1lO1xyXG4gICAgICAgICAgICByZXR1cm4gY2hhbmdlZERvY3M7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZWFkcyB0aGUgbmV3ZXN0IGRvY3VtZW50IGNoYW5nZSBmcm9tIHBlcnNpc3RlbmNlIGFuZCBmb3J3YXJkcyB0aGUgaW50ZXJuYWxcclxuICAgICAqIHN5bmNocm9uaXphdGlvbiBtYXJrZXIgc28gdGhhdCBjYWxscyB0byBgZ2V0TmV3RG9jdW1lbnRDaGFuZ2VzKClgXHJcbiAgICAgKiBvbmx5IHJldHVybiBjaGFuZ2VzIHRoYXQgaGFwcGVuZWQgYWZ0ZXIgY2xpZW50IGluaXRpYWxpemF0aW9uLlxyXG4gICAgICovXHJcbiAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLXRhYiBvbmx5LlxyXG4gICAgTG9jYWxTdG9yZS5wcm90b3R5cGUuc3luY2hyb25pemVMYXN0RG9jdW1lbnRDaGFuZ2VSZWFkVGltZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdHNsaWIuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciByZW1vdGVEb2N1bWVudENhY2hlXzE7XHJcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYi5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnJlbW90ZURvY3VtZW50cyBpbnN0YW5jZW9mIEluZGV4ZWREYlJlbW90ZURvY3VtZW50Q2FjaGUpIHtcclxuICAgICAgICAgICAgICAgICAgICByZW1vdGVEb2N1bWVudENhY2hlXzEgPSB0aGlzLnJlbW90ZURvY3VtZW50cztcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdGhpcy5wZXJzaXN0ZW5jZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJ1blRyYW5zYWN0aW9uKCdTeW5jaHJvbml6ZSBsYXN0IGRvY3VtZW50IGNoYW5nZSByZWFkIHRpbWUnLCAncmVhZG9ubHktaWRlbXBvdGVudCcsIGZ1bmN0aW9uICh0eG4pIHsgcmV0dXJuIHJlbW90ZURvY3VtZW50Q2FjaGVfMS5nZXRMYXN0RG9jdW1lbnRDaGFuZ2UodHhuKTsgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlYWRUaW1lID0gX2EucmVhZFRpbWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5sYXN0RG9jdW1lbnRDaGFuZ2VSZWFkVGltZSA9IHJlYWRUaW1lO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KV07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogVGhlIG1heGltdW0gdGltZSB0byBsZWF2ZSBhIHJlc3VtZSB0b2tlbiBidWZmZXJlZCB3aXRob3V0IHdyaXRpbmcgaXQgb3V0LlxyXG4gICAgICogVGhpcyB2YWx1ZSBpcyBhcmJpdHJhcnk6IGl0J3MgbG9uZyBlbm91Z2ggdG8gYXZvaWQgc2V2ZXJhbCB3cml0ZXNcclxuICAgICAqIChwb3NzaWJseSBpbmRlZmluaXRlbHkgaWYgdXBkYXRlcyBjb21lIG1vcmUgZnJlcXVlbnRseSB0aGFuIHRoaXMpIGJ1dFxyXG4gICAgICogc2hvcnQgZW5vdWdoIHRoYXQgcmVzdGFydGluZyBhZnRlciBjcmFzaGluZyB3aWxsIHN0aWxsIGhhdmUgYSBwcmV0dHlcclxuICAgICAqIHJlY2VudCByZXN1bWUgdG9rZW4uXHJcbiAgICAgKi9cclxuICAgIExvY2FsU3RvcmUuUkVTVU1FX1RPS0VOX01BWF9BR0VfTUlDUk9TID0gNSAqIDYwICogMWU2O1xyXG4gICAgcmV0dXJuIExvY2FsU3RvcmU7XHJcbn0oKSk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG52YXIgTWVtb3J5TXV0YXRpb25RdWV1ZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIE1lbW9yeU11dGF0aW9uUXVldWUoaW5kZXhNYW5hZ2VyLCByZWZlcmVuY2VEZWxlZ2F0ZSkge1xyXG4gICAgICAgIHRoaXMuaW5kZXhNYW5hZ2VyID0gaW5kZXhNYW5hZ2VyO1xyXG4gICAgICAgIHRoaXMucmVmZXJlbmNlRGVsZWdhdGUgPSByZWZlcmVuY2VEZWxlZ2F0ZTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBUaGUgc2V0IG9mIGFsbCBtdXRhdGlvbnMgdGhhdCBoYXZlIGJlZW4gc2VudCBidXQgbm90IHlldCBiZWVuIGFwcGxpZWQgdG9cclxuICAgICAgICAgKiB0aGUgYmFja2VuZC5cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLm11dGF0aW9uUXVldWUgPSBbXTtcclxuICAgICAgICAvKiogTmV4dCB2YWx1ZSB0byB1c2Ugd2hlbiBhc3NpZ25pbmcgc2VxdWVudGlhbCBJRHMgdG8gZWFjaCBtdXRhdGlvbiBiYXRjaC4gKi9cclxuICAgICAgICB0aGlzLm5leHRCYXRjaElkID0gMTtcclxuICAgICAgICAvKiogVGhlIGxhc3QgcmVjZWl2ZWQgc3RyZWFtIHRva2VuIGZyb20gdGhlIHNlcnZlciwgdXNlZCB0byBhY2tub3dsZWRnZSB3aGljaFxyXG4gICAgICAgICAqIHJlc3BvbnNlcyB0aGUgY2xpZW50IGhhcyBwcm9jZXNzZWQuIFN0cmVhbSB0b2tlbnMgYXJlIG9wYXF1ZSBjaGVja3BvaW50XHJcbiAgICAgICAgICogbWFya2VycyB3aG9zZSBvbmx5IHJlYWwgdmFsdWUgaXMgdGhlaXIgaW5jbHVzaW9uIGluIHRoZSBuZXh0IHJlcXVlc3QuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5sYXN0U3RyZWFtVG9rZW4gPSBlbXB0eUJ5dGVTdHJpbmcoKTtcclxuICAgICAgICAvKiogQW4gb3JkZXJlZCBtYXBwaW5nIGJldHdlZW4gZG9jdW1lbnRzIGFuZCB0aGUgbXV0YXRpb25zIGJhdGNoIElEcy4gKi9cclxuICAgICAgICB0aGlzLmJhdGNoZXNCeURvY3VtZW50S2V5ID0gbmV3IFNvcnRlZFNldChEb2NSZWZlcmVuY2UuY29tcGFyZUJ5S2V5KTtcclxuICAgIH1cclxuICAgIE1lbW9yeU11dGF0aW9uUXVldWUucHJvdG90eXBlLmNoZWNrRW1wdHkgPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24pIHtcclxuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUodGhpcy5tdXRhdGlvblF1ZXVlLmxlbmd0aCA9PT0gMCk7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5TXV0YXRpb25RdWV1ZS5wcm90b3R5cGUuYWNrbm93bGVkZ2VCYXRjaCA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwgYmF0Y2gsIHN0cmVhbVRva2VuKSB7XHJcbiAgICAgICAgdmFyIGJhdGNoSWQgPSBiYXRjaC5iYXRjaElkO1xyXG4gICAgICAgIHZhciBiYXRjaEluZGV4ID0gdGhpcy5pbmRleE9mRXhpc3RpbmdCYXRjaElkKGJhdGNoSWQsICdhY2tub3dsZWRnZWQnKTtcclxuICAgICAgICBhc3NlcnQoYmF0Y2hJbmRleCA9PT0gMCwgJ0NhbiBvbmx5IGFja25vd2xlZGdlIHRoZSBmaXJzdCBiYXRjaCBpbiB0aGUgbXV0YXRpb24gcXVldWUnKTtcclxuICAgICAgICAvLyBWZXJpZnkgdGhhdCB0aGUgYmF0Y2ggaW4gdGhlIHF1ZXVlIGlzIHRoZSBvbmUgdG8gYmUgYWNrbm93bGVkZ2VkLlxyXG4gICAgICAgIHZhciBjaGVjayA9IHRoaXMubXV0YXRpb25RdWV1ZVtiYXRjaEluZGV4XTtcclxuICAgICAgICBhc3NlcnQoYmF0Y2hJZCA9PT0gY2hlY2suYmF0Y2hJZCwgJ1F1ZXVlIG9yZGVyaW5nIGZhaWx1cmU6IGV4cGVjdGVkIGJhdGNoICcgK1xyXG4gICAgICAgICAgICBiYXRjaElkICtcclxuICAgICAgICAgICAgJywgZ290IGJhdGNoICcgK1xyXG4gICAgICAgICAgICBjaGVjay5iYXRjaElkKTtcclxuICAgICAgICB0aGlzLmxhc3RTdHJlYW1Ub2tlbiA9IHN0cmVhbVRva2VuO1xyXG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgfTtcclxuICAgIE1lbW9yeU11dGF0aW9uUXVldWUucHJvdG90eXBlLmdldExhc3RTdHJlYW1Ub2tlbiA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbikge1xyXG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSh0aGlzLmxhc3RTdHJlYW1Ub2tlbik7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5TXV0YXRpb25RdWV1ZS5wcm90b3R5cGUuc2V0TGFzdFN0cmVhbVRva2VuID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCBzdHJlYW1Ub2tlbikge1xyXG4gICAgICAgIHRoaXMubGFzdFN0cmVhbVRva2VuID0gc3RyZWFtVG9rZW47XHJcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5TXV0YXRpb25RdWV1ZS5wcm90b3R5cGUuYWRkTXV0YXRpb25CYXRjaCA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwgbG9jYWxXcml0ZVRpbWUsIGJhc2VNdXRhdGlvbnMsIG11dGF0aW9ucykge1xyXG4gICAgICAgIGFzc2VydChtdXRhdGlvbnMubGVuZ3RoICE9PSAwLCAnTXV0YXRpb24gYmF0Y2hlcyBzaG91bGQgbm90IGJlIGVtcHR5Jyk7XHJcbiAgICAgICAgdmFyIGJhdGNoSWQgPSB0aGlzLm5leHRCYXRjaElkO1xyXG4gICAgICAgIHRoaXMubmV4dEJhdGNoSWQrKztcclxuICAgICAgICBpZiAodGhpcy5tdXRhdGlvblF1ZXVlLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgdmFyIHByaW9yID0gdGhpcy5tdXRhdGlvblF1ZXVlW3RoaXMubXV0YXRpb25RdWV1ZS5sZW5ndGggLSAxXTtcclxuICAgICAgICAgICAgYXNzZXJ0KHByaW9yLmJhdGNoSWQgPCBiYXRjaElkLCAnTXV0YXRpb24gYmF0Y2hJRHMgbXVzdCBiZSBtb25vdG9uaWNhbGx5IGluY3JlYXNpbmcgb3JkZXInKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGJhdGNoID0gbmV3IE11dGF0aW9uQmF0Y2goYmF0Y2hJZCwgbG9jYWxXcml0ZVRpbWUsIGJhc2VNdXRhdGlvbnMsIG11dGF0aW9ucyk7XHJcbiAgICAgICAgdGhpcy5tdXRhdGlvblF1ZXVlLnB1c2goYmF0Y2gpO1xyXG4gICAgICAgIC8vIFRyYWNrIHJlZmVyZW5jZXMgYnkgZG9jdW1lbnQga2V5IGFuZCBpbmRleCBjb2xsZWN0aW9uIHBhcmVudHMuXHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBtdXRhdGlvbnNfMSA9IG11dGF0aW9uczsgX2kgPCBtdXRhdGlvbnNfMS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgdmFyIG11dGF0aW9uID0gbXV0YXRpb25zXzFbX2ldO1xyXG4gICAgICAgICAgICB0aGlzLmJhdGNoZXNCeURvY3VtZW50S2V5ID0gdGhpcy5iYXRjaGVzQnlEb2N1bWVudEtleS5hZGQobmV3IERvY1JlZmVyZW5jZShtdXRhdGlvbi5rZXksIGJhdGNoSWQpKTtcclxuICAgICAgICAgICAgdGhpcy5pbmRleE1hbmFnZXIuYWRkVG9Db2xsZWN0aW9uUGFyZW50SW5kZXgodHJhbnNhY3Rpb24sIG11dGF0aW9uLmtleS5wYXRoLnBvcExhc3QoKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZShiYXRjaCk7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5TXV0YXRpb25RdWV1ZS5wcm90b3R5cGUubG9va3VwTXV0YXRpb25CYXRjaCA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwgYmF0Y2hJZCkge1xyXG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSh0aGlzLmZpbmRNdXRhdGlvbkJhdGNoKGJhdGNoSWQpKTtcclxuICAgIH07XHJcbiAgICBNZW1vcnlNdXRhdGlvblF1ZXVlLnByb3RvdHlwZS5sb29rdXBNdXRhdGlvbktleXMgPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24sIGJhdGNoSWQpIHtcclxuICAgICAgICB2YXIgbXV0YXRpb25CYXRjaCA9IHRoaXMuZmluZE11dGF0aW9uQmF0Y2goYmF0Y2hJZCk7XHJcbiAgICAgICAgYXNzZXJ0KG11dGF0aW9uQmF0Y2ggIT0gbnVsbCwgJ0ZhaWxlZCB0byBmaW5kIGxvY2FsIG11dGF0aW9uIGJhdGNoLicpO1xyXG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZShtdXRhdGlvbkJhdGNoLmtleXMoKSk7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5TXV0YXRpb25RdWV1ZS5wcm90b3R5cGUuZ2V0TmV4dE11dGF0aW9uQmF0Y2hBZnRlckJhdGNoSWQgPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24sIGJhdGNoSWQpIHtcclxuICAgICAgICB2YXIgbmV4dEJhdGNoSWQgPSBiYXRjaElkICsgMTtcclxuICAgICAgICAvLyBUaGUgcmVxdWVzdGVkIGJhdGNoSWQgbWF5IHN0aWxsIGJlIG91dCBvZiByYW5nZSBzbyBub3JtYWxpemUgaXQgdG8gdGhlXHJcbiAgICAgICAgLy8gc3RhcnQgb2YgdGhlIHF1ZXVlLlxyXG4gICAgICAgIHZhciByYXdJbmRleCA9IHRoaXMuaW5kZXhPZkJhdGNoSWQobmV4dEJhdGNoSWQpO1xyXG4gICAgICAgIHZhciBpbmRleCA9IHJhd0luZGV4IDwgMCA/IDAgOiByYXdJbmRleDtcclxuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUodGhpcy5tdXRhdGlvblF1ZXVlLmxlbmd0aCA+IGluZGV4ID8gdGhpcy5tdXRhdGlvblF1ZXVlW2luZGV4XSA6IG51bGwpO1xyXG4gICAgfTtcclxuICAgIE1lbW9yeU11dGF0aW9uUXVldWUucHJvdG90eXBlLmdldEhpZ2hlc3RVbmFja25vd2xlZGdlZEJhdGNoSWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKHRoaXMubXV0YXRpb25RdWV1ZS5sZW5ndGggPT09IDAgPyBCQVRDSElEX1VOS05PV04gOiB0aGlzLm5leHRCYXRjaElkIC0gMSk7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5TXV0YXRpb25RdWV1ZS5wcm90b3R5cGUuZ2V0QWxsTXV0YXRpb25CYXRjaGVzID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uKSB7XHJcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKHRoaXMubXV0YXRpb25RdWV1ZS5zbGljZSgpKTtcclxuICAgIH07XHJcbiAgICBNZW1vcnlNdXRhdGlvblF1ZXVlLnByb3RvdHlwZS5nZXRBbGxNdXRhdGlvbkJhdGNoZXNBZmZlY3RpbmdEb2N1bWVudEtleSA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwgZG9jdW1lbnRLZXkpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhciBzdGFydCA9IG5ldyBEb2NSZWZlcmVuY2UoZG9jdW1lbnRLZXksIDApO1xyXG4gICAgICAgIHZhciBlbmQgPSBuZXcgRG9jUmVmZXJlbmNlKGRvY3VtZW50S2V5LCBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFkpO1xyXG4gICAgICAgIHZhciByZXN1bHQgPSBbXTtcclxuICAgICAgICB0aGlzLmJhdGNoZXNCeURvY3VtZW50S2V5LmZvckVhY2hJblJhbmdlKFtzdGFydCwgZW5kXSwgZnVuY3Rpb24gKHJlZikge1xyXG4gICAgICAgICAgICBhc3NlcnQoZG9jdW1lbnRLZXkuaXNFcXVhbChyZWYua2V5KSwgXCJTaG91bGQgb25seSBpdGVyYXRlIG92ZXIgYSBzaW5nbGUga2V5J3MgYmF0Y2hlc1wiKTtcclxuICAgICAgICAgICAgdmFyIGJhdGNoID0gX3RoaXMuZmluZE11dGF0aW9uQmF0Y2gocmVmLnRhcmdldE9yQmF0Y2hJZCk7XHJcbiAgICAgICAgICAgIGFzc2VydChiYXRjaCAhPT0gbnVsbCwgJ0JhdGNoZXMgaW4gdGhlIGluZGV4IG11c3QgZXhpc3QgaW4gdGhlIG1haW4gdGFibGUnKTtcclxuICAgICAgICAgICAgcmVzdWx0LnB1c2goYmF0Y2gpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZShyZXN1bHQpO1xyXG4gICAgfTtcclxuICAgIE1lbW9yeU11dGF0aW9uUXVldWUucHJvdG90eXBlLmdldEFsbE11dGF0aW9uQmF0Y2hlc0FmZmVjdGluZ0RvY3VtZW50S2V5cyA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwgZG9jdW1lbnRLZXlzKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgdW5pcXVlQmF0Y2hJRHMgPSBuZXcgU29ydGVkU2V0KHByaW1pdGl2ZUNvbXBhcmF0b3IpO1xyXG4gICAgICAgIGRvY3VtZW50S2V5cy5mb3JFYWNoKGZ1bmN0aW9uIChkb2N1bWVudEtleSkge1xyXG4gICAgICAgICAgICB2YXIgc3RhcnQgPSBuZXcgRG9jUmVmZXJlbmNlKGRvY3VtZW50S2V5LCAwKTtcclxuICAgICAgICAgICAgdmFyIGVuZCA9IG5ldyBEb2NSZWZlcmVuY2UoZG9jdW1lbnRLZXksIE51bWJlci5QT1NJVElWRV9JTkZJTklUWSk7XHJcbiAgICAgICAgICAgIF90aGlzLmJhdGNoZXNCeURvY3VtZW50S2V5LmZvckVhY2hJblJhbmdlKFtzdGFydCwgZW5kXSwgZnVuY3Rpb24gKHJlZikge1xyXG4gICAgICAgICAgICAgICAgYXNzZXJ0KGRvY3VtZW50S2V5LmlzRXF1YWwocmVmLmtleSksIFwiRm9yIGVhY2gga2V5LCBzaG91bGQgb25seSBpdGVyYXRlIG92ZXIgYSBzaW5nbGUga2V5J3MgYmF0Y2hlc1wiKTtcclxuICAgICAgICAgICAgICAgIHVuaXF1ZUJhdGNoSURzID0gdW5pcXVlQmF0Y2hJRHMuYWRkKHJlZi50YXJnZXRPckJhdGNoSWQpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUodGhpcy5maW5kTXV0YXRpb25CYXRjaGVzKHVuaXF1ZUJhdGNoSURzKSk7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5TXV0YXRpb25RdWV1ZS5wcm90b3R5cGUuZ2V0QWxsTXV0YXRpb25CYXRjaGVzQWZmZWN0aW5nUXVlcnkgPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24sIHF1ZXJ5KSB7XHJcbiAgICAgICAgYXNzZXJ0KCFxdWVyeS5pc0NvbGxlY3Rpb25Hcm91cFF1ZXJ5KCksICdDb2xsZWN0aW9uR3JvdXAgcXVlcmllcyBzaG91bGQgYmUgaGFuZGxlZCBpbiBMb2NhbERvY3VtZW50c1ZpZXcnKTtcclxuICAgICAgICAvLyBVc2UgdGhlIHF1ZXJ5IHBhdGggYXMgYSBwcmVmaXggZm9yIHRlc3RpbmcgaWYgYSBkb2N1bWVudCBtYXRjaGVzIHRoZVxyXG4gICAgICAgIC8vIHF1ZXJ5LlxyXG4gICAgICAgIHZhciBwcmVmaXggPSBxdWVyeS5wYXRoO1xyXG4gICAgICAgIHZhciBpbW1lZGlhdGVDaGlsZHJlblBhdGhMZW5ndGggPSBwcmVmaXgubGVuZ3RoICsgMTtcclxuICAgICAgICAvLyBDb25zdHJ1Y3QgYSBkb2N1bWVudCByZWZlcmVuY2UgZm9yIGFjdHVhbGx5IHNjYW5uaW5nIHRoZSBpbmRleC4gVW5saWtlXHJcbiAgICAgICAgLy8gdGhlIHByZWZpeCB0aGUgZG9jdW1lbnQga2V5IGluIHRoaXMgcmVmZXJlbmNlIG11c3QgaGF2ZSBhbiBldmVuIG51bWJlciBvZlxyXG4gICAgICAgIC8vIHNlZ21lbnRzLiBUaGUgZW1wdHkgc2VnbWVudCBjYW4gYmUgdXNlZCBhIHN1ZmZpeCBvZiB0aGUgcXVlcnkgcGF0aFxyXG4gICAgICAgIC8vIGJlY2F1c2UgaXQgcHJlY2VkZXMgYWxsIG90aGVyIHNlZ21lbnRzIGluIGFuIG9yZGVyZWQgdHJhdmVyc2FsLlxyXG4gICAgICAgIHZhciBzdGFydFBhdGggPSBwcmVmaXg7XHJcbiAgICAgICAgaWYgKCFEb2N1bWVudEtleS5pc0RvY3VtZW50S2V5KHN0YXJ0UGF0aCkpIHtcclxuICAgICAgICAgICAgc3RhcnRQYXRoID0gc3RhcnRQYXRoLmNoaWxkKCcnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIHN0YXJ0ID0gbmV3IERvY1JlZmVyZW5jZShuZXcgRG9jdW1lbnRLZXkoc3RhcnRQYXRoKSwgMCk7XHJcbiAgICAgICAgLy8gRmluZCB1bmlxdWUgYmF0Y2hJRHMgcmVmZXJlbmNlZCBieSBhbGwgZG9jdW1lbnRzIHBvdGVudGlhbGx5IG1hdGNoaW5nIHRoZVxyXG4gICAgICAgIC8vIHF1ZXJ5LlxyXG4gICAgICAgIHZhciB1bmlxdWVCYXRjaElEcyA9IG5ldyBTb3J0ZWRTZXQocHJpbWl0aXZlQ29tcGFyYXRvcik7XHJcbiAgICAgICAgdGhpcy5iYXRjaGVzQnlEb2N1bWVudEtleS5mb3JFYWNoV2hpbGUoZnVuY3Rpb24gKHJlZikge1xyXG4gICAgICAgICAgICB2YXIgcm93S2V5UGF0aCA9IHJlZi5rZXkucGF0aDtcclxuICAgICAgICAgICAgaWYgKCFwcmVmaXguaXNQcmVmaXhPZihyb3dLZXlQYXRoKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gUm93cyB3aXRoIGRvY3VtZW50IGtleXMgbW9yZSB0aGFuIG9uZSBzZWdtZW50IGxvbmdlciB0aGFuIHRoZSBxdWVyeVxyXG4gICAgICAgICAgICAgICAgLy8gcGF0aCBjYW4ndCBiZSBtYXRjaGVzLiBGb3IgZXhhbXBsZSwgYSBxdWVyeSBvbiAncm9vbXMnIGNhbid0IG1hdGNoXHJcbiAgICAgICAgICAgICAgICAvLyB0aGUgZG9jdW1lbnQgL3Jvb21zL2FiYy9tZXNzYWdlcy94eXguXHJcbiAgICAgICAgICAgICAgICAvLyBUT0RPKG1jZyk6IHdlJ2xsIG5lZWQgYSBkaWZmZXJlbnQgc2Nhbm5lciB3aGVuIHdlIGltcGxlbWVudFxyXG4gICAgICAgICAgICAgICAgLy8gYW5jZXN0b3IgcXVlcmllcy5cclxuICAgICAgICAgICAgICAgIGlmIChyb3dLZXlQYXRoLmxlbmd0aCA9PT0gaW1tZWRpYXRlQ2hpbGRyZW5QYXRoTGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdW5pcXVlQmF0Y2hJRHMgPSB1bmlxdWVCYXRjaElEcy5hZGQocmVmLnRhcmdldE9yQmF0Y2hJZCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sIHN0YXJ0KTtcclxuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUodGhpcy5maW5kTXV0YXRpb25CYXRjaGVzKHVuaXF1ZUJhdGNoSURzKSk7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5TXV0YXRpb25RdWV1ZS5wcm90b3R5cGUuZmluZE11dGF0aW9uQmF0Y2hlcyA9IGZ1bmN0aW9uIChiYXRjaElEcykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgLy8gQ29uc3RydWN0IGFuIGFycmF5IG9mIG1hdGNoaW5nIGJhdGNoZXMsIHNvcnRlZCBieSBiYXRjaElEIHRvIGVuc3VyZSB0aGF0XHJcbiAgICAgICAgLy8gbXVsdGlwbGUgbXV0YXRpb25zIGFmZmVjdGluZyB0aGUgc2FtZSBkb2N1bWVudCBrZXkgYXJlIGFwcGxpZWQgaW4gb3JkZXIuXHJcbiAgICAgICAgdmFyIHJlc3VsdCA9IFtdO1xyXG4gICAgICAgIGJhdGNoSURzLmZvckVhY2goZnVuY3Rpb24gKGJhdGNoSWQpIHtcclxuICAgICAgICAgICAgdmFyIGJhdGNoID0gX3RoaXMuZmluZE11dGF0aW9uQmF0Y2goYmF0Y2hJZCk7XHJcbiAgICAgICAgICAgIGlmIChiYXRjaCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0LnB1c2goYmF0Y2gpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH07XHJcbiAgICBNZW1vcnlNdXRhdGlvblF1ZXVlLnByb3RvdHlwZS5yZW1vdmVNdXRhdGlvbkJhdGNoID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCBiYXRjaCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgLy8gRmluZCB0aGUgcG9zaXRpb24gb2YgdGhlIGZpcnN0IGJhdGNoIGZvciByZW1vdmFsLiBUaGlzIG5lZWQgbm90IGJlIHRoZVxyXG4gICAgICAgIC8vIGZpcnN0IGVudHJ5IGluIHRoZSBxdWV1ZS5cclxuICAgICAgICB2YXIgYmF0Y2hJbmRleCA9IHRoaXMuaW5kZXhPZkV4aXN0aW5nQmF0Y2hJZChiYXRjaC5iYXRjaElkLCAncmVtb3ZlZCcpO1xyXG4gICAgICAgIGFzc2VydChiYXRjaEluZGV4ID09PSAwLCAnQ2FuIG9ubHkgcmVtb3ZlIHRoZSBmaXJzdCBlbnRyeSBvZiB0aGUgbXV0YXRpb24gcXVldWUnKTtcclxuICAgICAgICB0aGlzLm11dGF0aW9uUXVldWUuc2hpZnQoKTtcclxuICAgICAgICB2YXIgcmVmZXJlbmNlcyA9IHRoaXMuYmF0Y2hlc0J5RG9jdW1lbnRLZXk7XHJcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5mb3JFYWNoKGJhdGNoLm11dGF0aW9ucywgZnVuY3Rpb24gKG11dGF0aW9uKSB7XHJcbiAgICAgICAgICAgIHZhciByZWYgPSBuZXcgRG9jUmVmZXJlbmNlKG11dGF0aW9uLmtleSwgYmF0Y2guYmF0Y2hJZCk7XHJcbiAgICAgICAgICAgIHJlZmVyZW5jZXMgPSByZWZlcmVuY2VzLmRlbGV0ZShyZWYpO1xyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXMucmVmZXJlbmNlRGVsZWdhdGUucmVtb3ZlTXV0YXRpb25SZWZlcmVuY2UodHJhbnNhY3Rpb24sIG11dGF0aW9uLmtleSk7XHJcbiAgICAgICAgfSkubmV4dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIF90aGlzLmJhdGNoZXNCeURvY3VtZW50S2V5ID0gcmVmZXJlbmNlcztcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBNZW1vcnlNdXRhdGlvblF1ZXVlLnByb3RvdHlwZS5yZW1vdmVDYWNoZWRNdXRhdGlvbktleXMgPSBmdW5jdGlvbiAoYmF0Y2hJZCkge1xyXG4gICAgICAgIC8vIE5vLW9wIHNpbmNlIHRoZSBtZW1vcnkgbXV0YXRpb24gcXVldWUgZG9lcyBub3QgbWFpbnRhaW4gYSBzZXBhcmF0ZSBjYWNoZS5cclxuICAgIH07XHJcbiAgICBNZW1vcnlNdXRhdGlvblF1ZXVlLnByb3RvdHlwZS5jb250YWluc0tleSA9IGZ1bmN0aW9uICh0eG4sIGtleSkge1xyXG4gICAgICAgIHZhciByZWYgPSBuZXcgRG9jUmVmZXJlbmNlKGtleSwgMCk7XHJcbiAgICAgICAgdmFyIGZpcnN0UmVmID0gdGhpcy5iYXRjaGVzQnlEb2N1bWVudEtleS5maXJzdEFmdGVyT3JFcXVhbChyZWYpO1xyXG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZShrZXkuaXNFcXVhbChmaXJzdFJlZiAmJiBmaXJzdFJlZi5rZXkpKTtcclxuICAgIH07XHJcbiAgICBNZW1vcnlNdXRhdGlvblF1ZXVlLnByb3RvdHlwZS5wZXJmb3JtQ29uc2lzdGVuY3lDaGVjayA9IGZ1bmN0aW9uICh0eG4pIHtcclxuICAgICAgICBpZiAodGhpcy5tdXRhdGlvblF1ZXVlLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICBhc3NlcnQodGhpcy5iYXRjaGVzQnlEb2N1bWVudEtleS5pc0VtcHR5KCksICdEb2N1bWVudCBsZWFrIC0tIGRldGVjdGVkIGRhbmdsaW5nIG11dGF0aW9uIHJlZmVyZW5jZXMgd2hlbiBxdWV1ZSBpcyBlbXB0eS4nKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBGaW5kcyB0aGUgaW5kZXggb2YgdGhlIGdpdmVuIGJhdGNoSWQgaW4gdGhlIG11dGF0aW9uIHF1ZXVlIGFuZCBhc3NlcnRzIHRoYXRcclxuICAgICAqIHRoZSByZXN1bHRpbmcgaW5kZXggaXMgd2l0aGluIHRoZSBib3VuZHMgb2YgdGhlIHF1ZXVlLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBiYXRjaElkIFRoZSBiYXRjaElkIHRvIHNlYXJjaCBmb3JcclxuICAgICAqIEBwYXJhbSBhY3Rpb24gQSBkZXNjcmlwdGlvbiBvZiB3aGF0IHRoZSBjYWxsZXIgaXMgZG9pbmcsIHBocmFzZWQgaW4gcGFzc2l2ZVxyXG4gICAgICogZm9ybSAoZS5nLiBcImFja25vd2xlZGdlZFwiIGluIGEgcm91dGluZSB0aGF0IGFja25vd2xlZGdlcyBiYXRjaGVzKS5cclxuICAgICAqL1xyXG4gICAgTWVtb3J5TXV0YXRpb25RdWV1ZS5wcm90b3R5cGUuaW5kZXhPZkV4aXN0aW5nQmF0Y2hJZCA9IGZ1bmN0aW9uIChiYXRjaElkLCBhY3Rpb24pIHtcclxuICAgICAgICB2YXIgaW5kZXggPSB0aGlzLmluZGV4T2ZCYXRjaElkKGJhdGNoSWQpO1xyXG4gICAgICAgIGFzc2VydChpbmRleCA+PSAwICYmIGluZGV4IDwgdGhpcy5tdXRhdGlvblF1ZXVlLmxlbmd0aCwgJ0JhdGNoZXMgbXVzdCBleGlzdCB0byBiZSAnICsgYWN0aW9uKTtcclxuICAgICAgICByZXR1cm4gaW5kZXg7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBGaW5kcyB0aGUgaW5kZXggb2YgdGhlIGdpdmVuIGJhdGNoSWQgaW4gdGhlIG11dGF0aW9uIHF1ZXVlLiBUaGlzIG9wZXJhdGlvblxyXG4gICAgICogaXMgTygxKS5cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJuIFRoZSBjb21wdXRlZCBpbmRleCBvZiB0aGUgYmF0Y2ggd2l0aCB0aGUgZ2l2ZW4gYmF0Y2hJZCwgYmFzZWQgb25cclxuICAgICAqIHRoZSBzdGF0ZSBvZiB0aGUgcXVldWUuIE5vdGUgdGhpcyBpbmRleCBjYW4gYmUgbmVnYXRpdmUgaWYgdGhlIHJlcXVlc3RlZFxyXG4gICAgICogYmF0Y2hJZCBoYXMgYWxyZWFkeSBiZWVuIHJlbXZvZWQgZnJvbSB0aGUgcXVldWUgb3IgcGFzdCB0aGUgZW5kIG9mIHRoZVxyXG4gICAgICogcXVldWUgaWYgdGhlIGJhdGNoSWQgaXMgbGFyZ2VyIHRoYW4gdGhlIGxhc3QgYWRkZWQgYmF0Y2guXHJcbiAgICAgKi9cclxuICAgIE1lbW9yeU11dGF0aW9uUXVldWUucHJvdG90eXBlLmluZGV4T2ZCYXRjaElkID0gZnVuY3Rpb24gKGJhdGNoSWQpIHtcclxuICAgICAgICBpZiAodGhpcy5tdXRhdGlvblF1ZXVlLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAvLyBBcyBhbiBpbmRleCB0aGlzIGlzIHBhc3QgdGhlIGVuZCBvZiB0aGUgcXVldWVcclxuICAgICAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIEV4YW1pbmUgdGhlIGZyb250IG9mIHRoZSBxdWV1ZSB0byBmaWd1cmUgb3V0IHRoZSBkaWZmZXJlbmNlIGJldHdlZW4gdGhlXHJcbiAgICAgICAgLy8gYmF0Y2hJZCBhbmQgaW5kZXhlcyBpbiB0aGUgYXJyYXkuIE5vdGUgdGhhdCBzaW5jZSB0aGUgcXVldWUgaXMgb3JkZXJlZFxyXG4gICAgICAgIC8vIGJ5IGJhdGNoSWQsIGlmIHRoZSBmaXJzdCBiYXRjaCBoYXMgYSBsYXJnZXIgYmF0Y2hJZCB0aGVuIHRoZSByZXF1ZXN0ZWRcclxuICAgICAgICAvLyBiYXRjaElkIGRvZXNuJ3QgZXhpc3QgaW4gdGhlIHF1ZXVlLlxyXG4gICAgICAgIHZhciBmaXJzdEJhdGNoSWQgPSB0aGlzLm11dGF0aW9uUXVldWVbMF0uYmF0Y2hJZDtcclxuICAgICAgICByZXR1cm4gYmF0Y2hJZCAtIGZpcnN0QmF0Y2hJZDtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEEgdmVyc2lvbiBvZiBsb29rdXBNdXRhdGlvbkJhdGNoIHRoYXQgZG9lc24ndCByZXR1cm4gYSBwcm9taXNlLCB0aGlzIG1ha2VzXHJcbiAgICAgKiBvdGhlciBmdW5jdGlvbnMgdGhhdCB1c2VzIHRoaXMgY29kZSBlYXNpZXIgdG8gcmVhZCBhbmQgbW9yZSBlZmZpY2VudC5cclxuICAgICAqL1xyXG4gICAgTWVtb3J5TXV0YXRpb25RdWV1ZS5wcm90b3R5cGUuZmluZE11dGF0aW9uQmF0Y2ggPSBmdW5jdGlvbiAoYmF0Y2hJZCkge1xyXG4gICAgICAgIHZhciBpbmRleCA9IHRoaXMuaW5kZXhPZkJhdGNoSWQoYmF0Y2hJZCk7XHJcbiAgICAgICAgaWYgKGluZGV4IDwgMCB8fCBpbmRleCA+PSB0aGlzLm11dGF0aW9uUXVldWUubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgYmF0Y2ggPSB0aGlzLm11dGF0aW9uUXVldWVbaW5kZXhdO1xyXG4gICAgICAgIGFzc2VydChiYXRjaC5iYXRjaElkID09PSBiYXRjaElkLCAnSWYgZm91bmQgYmF0Y2ggbXVzdCBtYXRjaCcpO1xyXG4gICAgICAgIHJldHVybiBiYXRjaDtcclxuICAgIH07XHJcbiAgICByZXR1cm4gTWVtb3J5TXV0YXRpb25RdWV1ZTtcclxufSgpKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIGRvY3VtZW50RW50cnlNYXAoKSB7XHJcbiAgICByZXR1cm4gbmV3IFNvcnRlZE1hcChEb2N1bWVudEtleS5jb21wYXJhdG9yKTtcclxufVxyXG52YXIgTWVtb3J5UmVtb3RlRG9jdW1lbnRDYWNoZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIHNpemVyIFVzZWQgdG8gYXNzZXNzIHRoZSBzaXplIG9mIGEgZG9jdW1lbnQuIEZvciBlYWdlciBHQywgdGhpcyBpcyBleHBlY3RlZCB0byBqdXN0XHJcbiAgICAgKiByZXR1cm4gMCB0byBhdm9pZCB1bm5lY2Vzc2FyaWx5IGRvaW5nIHRoZSB3b3JrIG9mIGNhbGN1bGF0aW5nIHRoZSBzaXplLlxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBNZW1vcnlSZW1vdGVEb2N1bWVudENhY2hlKGluZGV4TWFuYWdlciwgc2l6ZXIpIHtcclxuICAgICAgICB0aGlzLmluZGV4TWFuYWdlciA9IGluZGV4TWFuYWdlcjtcclxuICAgICAgICB0aGlzLnNpemVyID0gc2l6ZXI7XHJcbiAgICAgICAgLyoqIFVuZGVybHlpbmcgY2FjaGUgb2YgZG9jdW1lbnRzIGFuZCB0aGVpciByZWFkIHRpbWVzLiAqL1xyXG4gICAgICAgIHRoaXMuZG9jcyA9IGRvY3VtZW50RW50cnlNYXAoKTtcclxuICAgICAgICAvKiogU2l6ZSBvZiBhbGwgY2FjaGVkIGRvY3VtZW50cy4gKi9cclxuICAgICAgICB0aGlzLnNpemUgPSAwO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBBZGRzIHRoZSBzdXBwbGllZCBlbnRyeSB0byB0aGUgY2FjaGUgYW5kIHVwZGF0ZXMgdGhlIGNhY2hlIHNpemUgYXMgYXBwcm9wcmlhdGUuXHJcbiAgICAgKlxyXG4gICAgICogQWxsIGNhbGxzIG9mIGBhZGRFbnRyeWAgIGFyZSByZXF1aXJlZCB0byBnbyB0aHJvdWdoIHRoZSBSZW1vdGVEb2N1bWVudENoYW5nZUJ1ZmZlclxyXG4gICAgICogcmV0dXJuZWQgYnkgYG5ld0NoYW5nZUJ1ZmZlcigpYC5cclxuICAgICAqL1xyXG4gICAgTWVtb3J5UmVtb3RlRG9jdW1lbnRDYWNoZS5wcm90b3R5cGUuYWRkRW50cnkgPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24sIGRvYywgcmVhZFRpbWUpIHtcclxuICAgICAgICBhc3NlcnQoIXJlYWRUaW1lLmlzRXF1YWwoU25hcHNob3RWZXJzaW9uLk1JTiksICdDYW5ub3QgYWRkIGEgZG9jdW1lbnQgd2l0aCBhIHJlYWQgdGltZSBvZiB6ZXJvJyk7XHJcbiAgICAgICAgdmFyIGtleSA9IGRvYy5rZXk7XHJcbiAgICAgICAgdmFyIGVudHJ5ID0gdGhpcy5kb2NzLmdldChrZXkpO1xyXG4gICAgICAgIHZhciBwcmV2aW91c1NpemUgPSBlbnRyeSA/IGVudHJ5LnNpemUgOiAwO1xyXG4gICAgICAgIHZhciBjdXJyZW50U2l6ZSA9IHRoaXMuc2l6ZXIoZG9jKTtcclxuICAgICAgICB0aGlzLmRvY3MgPSB0aGlzLmRvY3MuaW5zZXJ0KGtleSwge1xyXG4gICAgICAgICAgICBtYXliZURvY3VtZW50OiBkb2MsXHJcbiAgICAgICAgICAgIHNpemU6IGN1cnJlbnRTaXplLFxyXG4gICAgICAgICAgICByZWFkVGltZTogcmVhZFRpbWVcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLnNpemUgKz0gY3VycmVudFNpemUgLSBwcmV2aW91c1NpemU7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5kZXhNYW5hZ2VyLmFkZFRvQ29sbGVjdGlvblBhcmVudEluZGV4KHRyYW5zYWN0aW9uLCBrZXkucGF0aC5wb3BMYXN0KCkpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmVtb3ZlcyB0aGUgc3BlY2lmaWVkIGVudHJ5IGZyb20gdGhlIGNhY2hlIGFuZCB1cGRhdGVzIHRoZSBjYWNoZSBzaXplIGFzIGFwcHJvcHJpYXRlLlxyXG4gICAgICpcclxuICAgICAqIEFsbCBjYWxscyBvZiBgcmVtb3ZlRW50cnlgIGFyZSByZXF1aXJlZCB0byBnbyB0aHJvdWdoIHRoZSBSZW1vdGVEb2N1bWVudENoYW5nZUJ1ZmZlclxyXG4gICAgICogcmV0dXJuZWQgYnkgYG5ld0NoYW5nZUJ1ZmZlcigpYC5cclxuICAgICAqL1xyXG4gICAgTWVtb3J5UmVtb3RlRG9jdW1lbnRDYWNoZS5wcm90b3R5cGUucmVtb3ZlRW50cnkgPSBmdW5jdGlvbiAoZG9jdW1lbnRLZXkpIHtcclxuICAgICAgICB2YXIgZW50cnkgPSB0aGlzLmRvY3MuZ2V0KGRvY3VtZW50S2V5KTtcclxuICAgICAgICBpZiAoZW50cnkpIHtcclxuICAgICAgICAgICAgdGhpcy5kb2NzID0gdGhpcy5kb2NzLnJlbW92ZShkb2N1bWVudEtleSk7XHJcbiAgICAgICAgICAgIHRoaXMuc2l6ZSAtPSBlbnRyeS5zaXplO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBNZW1vcnlSZW1vdGVEb2N1bWVudENhY2hlLnByb3RvdHlwZS5nZXRFbnRyeSA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwgZG9jdW1lbnRLZXkpIHtcclxuICAgICAgICB2YXIgZW50cnkgPSB0aGlzLmRvY3MuZ2V0KGRvY3VtZW50S2V5KTtcclxuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoZW50cnkgPyBlbnRyeS5tYXliZURvY3VtZW50IDogbnVsbCk7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5UmVtb3RlRG9jdW1lbnRDYWNoZS5wcm90b3R5cGUuZ2V0RW50cmllcyA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwgZG9jdW1lbnRLZXlzKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgcmVzdWx0cyA9IG51bGxhYmxlTWF5YmVEb2N1bWVudE1hcCgpO1xyXG4gICAgICAgIGRvY3VtZW50S2V5cy5mb3JFYWNoKGZ1bmN0aW9uIChkb2N1bWVudEtleSkge1xyXG4gICAgICAgICAgICB2YXIgZW50cnkgPSBfdGhpcy5kb2NzLmdldChkb2N1bWVudEtleSk7XHJcbiAgICAgICAgICAgIHJlc3VsdHMgPSByZXN1bHRzLmluc2VydChkb2N1bWVudEtleSwgZW50cnkgPyBlbnRyeS5tYXliZURvY3VtZW50IDogbnVsbCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKHJlc3VsdHMpO1xyXG4gICAgfTtcclxuICAgIE1lbW9yeVJlbW90ZURvY3VtZW50Q2FjaGUucHJvdG90eXBlLmdldERvY3VtZW50c01hdGNoaW5nUXVlcnkgPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24sIHF1ZXJ5LCBzaW5jZVJlYWRUaW1lKSB7XHJcbiAgICAgICAgYXNzZXJ0KCFxdWVyeS5pc0NvbGxlY3Rpb25Hcm91cFF1ZXJ5KCksICdDb2xsZWN0aW9uR3JvdXAgcXVlcmllcyBzaG91bGQgYmUgaGFuZGxlZCBpbiBMb2NhbERvY3VtZW50c1ZpZXcnKTtcclxuICAgICAgICB2YXIgcmVzdWx0cyA9IGRvY3VtZW50TWFwKCk7XHJcbiAgICAgICAgLy8gRG9jdW1lbnRzIGFyZSBvcmRlcmVkIGJ5IGtleSwgc28gd2UgY2FuIHVzZSBhIHByZWZpeCBzY2FuIHRvIG5hcnJvdyBkb3duXHJcbiAgICAgICAgLy8gdGhlIGRvY3VtZW50cyB3ZSBuZWVkIHRvIG1hdGNoIHRoZSBxdWVyeSBhZ2FpbnN0LlxyXG4gICAgICAgIHZhciBwcmVmaXggPSBuZXcgRG9jdW1lbnRLZXkocXVlcnkucGF0aC5jaGlsZCgnJykpO1xyXG4gICAgICAgIHZhciBpdGVyYXRvciA9IHRoaXMuZG9jcy5nZXRJdGVyYXRvckZyb20ocHJlZml4KTtcclxuICAgICAgICB3aGlsZSAoaXRlcmF0b3IuaGFzTmV4dCgpKSB7XHJcbiAgICAgICAgICAgIHZhciBfYSA9IGl0ZXJhdG9yLmdldE5leHQoKSwga2V5ID0gX2Eua2V5LCBfYiA9IF9hLnZhbHVlLCBtYXliZURvY3VtZW50ID0gX2IubWF5YmVEb2N1bWVudCwgcmVhZFRpbWUgPSBfYi5yZWFkVGltZTtcclxuICAgICAgICAgICAgaWYgKCFxdWVyeS5wYXRoLmlzUHJlZml4T2Yoa2V5LnBhdGgpKSB7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAocmVhZFRpbWUuY29tcGFyZVRvKHNpbmNlUmVhZFRpbWUpIDw9IDApIHtcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChtYXliZURvY3VtZW50IGluc3RhbmNlb2YgRG9jdW1lbnQgJiYgcXVlcnkubWF0Y2hlcyhtYXliZURvY3VtZW50KSkge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0cyA9IHJlc3VsdHMuaW5zZXJ0KG1heWJlRG9jdW1lbnQua2V5LCBtYXliZURvY3VtZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUocmVzdWx0cyk7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5UmVtb3RlRG9jdW1lbnRDYWNoZS5wcm90b3R5cGUuZm9yRWFjaERvY3VtZW50S2V5ID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCBmKSB7XHJcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5mb3JFYWNoKHRoaXMuZG9jcywgZnVuY3Rpb24gKGtleSkgeyByZXR1cm4gZihrZXkpOyB9KTtcclxuICAgIH07XHJcbiAgICBNZW1vcnlSZW1vdGVEb2N1bWVudENhY2hlLnByb3RvdHlwZS5nZXROZXdEb2N1bWVudENoYW5nZXMgPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24sIHNpbmNlUmVhZFRpbWUpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2dldE5ld0RvY3VtZW50Q2hhbmdlcygpIGlzIG5vdCBzdXBwb3J0ZWQgd2l0aCBNZW1vcnlQZXJzaXN0ZW5jZScpO1xyXG4gICAgfTtcclxuICAgIE1lbW9yeVJlbW90ZURvY3VtZW50Q2FjaGUucHJvdG90eXBlLm5ld0NoYW5nZUJ1ZmZlciA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XHJcbiAgICAgICAgLy8gYHRyYWNrUmVtb3ZhbHNgIGlzIGlnbm9yZXMgc2luY2UgdGhlIE1lbW9yeVJlbW90ZURvY3VtZW50Q2FjaGUga2VlcHNcclxuICAgICAgICAvLyBhIHNlcGFyYXRlIGNoYW5nZWxvZyBhbmQgZG9lcyBub3QgbmVlZCBzcGVjaWFsIGhhbmRsaW5nIGZvciByZW1vdmFscy5cclxuICAgICAgICByZXR1cm4gbmV3IE1lbW9yeVJlbW90ZURvY3VtZW50Q2FjaGUuUmVtb3RlRG9jdW1lbnRDaGFuZ2VCdWZmZXIodGhpcyk7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5UmVtb3RlRG9jdW1lbnRDYWNoZS5wcm90b3R5cGUuZ2V0U2l6ZSA9IGZ1bmN0aW9uICh0eG4pIHtcclxuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUodGhpcy5zaXplKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEhhbmRsZXMgdGhlIGRldGFpbHMgb2YgYWRkaW5nIGFuZCB1cGRhdGluZyBkb2N1bWVudHMgaW4gdGhlIE1lbW9yeVJlbW90ZURvY3VtZW50Q2FjaGUuXHJcbiAgICAgKi9cclxuICAgIE1lbW9yeVJlbW90ZURvY3VtZW50Q2FjaGUuUmVtb3RlRG9jdW1lbnRDaGFuZ2VCdWZmZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICAgICAgdHNsaWIuX19leHRlbmRzKGNsYXNzXzEsIF9zdXBlcik7XHJcbiAgICAgICAgZnVuY3Rpb24gY2xhc3NfMShkb2N1bWVudENhY2hlKSB7XHJcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XHJcbiAgICAgICAgICAgIF90aGlzLmRvY3VtZW50Q2FjaGUgPSBkb2N1bWVudENhY2hlO1xyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNsYXNzXzEucHJvdG90eXBlLmFwcGx5Q2hhbmdlcyA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbikge1xyXG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgICAgICB2YXIgcHJvbWlzZXMgPSBbXTtcclxuICAgICAgICAgICAgdGhpcy5jaGFuZ2VzLmZvckVhY2goZnVuY3Rpb24gKGtleSwgZG9jKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZG9jKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcHJvbWlzZXMucHVzaChfdGhpcy5kb2N1bWVudENhY2hlLmFkZEVudHJ5KHRyYW5zYWN0aW9uLCBkb2MsIF90aGlzLnJlYWRUaW1lKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5kb2N1bWVudENhY2hlLnJlbW92ZUVudHJ5KGtleSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLndhaXRGb3IocHJvbWlzZXMpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgY2xhc3NfMS5wcm90b3R5cGUuZ2V0RnJvbUNhY2hlID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCBkb2N1bWVudEtleSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kb2N1bWVudENhY2hlLmdldEVudHJ5KHRyYW5zYWN0aW9uLCBkb2N1bWVudEtleSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBjbGFzc18xLnByb3RvdHlwZS5nZXRBbGxGcm9tQ2FjaGUgPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24sIGRvY3VtZW50S2V5cykge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kb2N1bWVudENhY2hlLmdldEVudHJpZXModHJhbnNhY3Rpb24sIGRvY3VtZW50S2V5cyk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gY2xhc3NfMTtcclxuICAgIH0oUmVtb3RlRG9jdW1lbnRDaGFuZ2VCdWZmZXIpKTtcclxuICAgIHJldHVybiBNZW1vcnlSZW1vdGVEb2N1bWVudENhY2hlO1xyXG59KCkpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxudmFyIE1lbW9yeVRhcmdldENhY2hlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gTWVtb3J5VGFyZ2V0Q2FjaGUocGVyc2lzdGVuY2UpIHtcclxuICAgICAgICB0aGlzLnBlcnNpc3RlbmNlID0gcGVyc2lzdGVuY2U7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogTWFwcyBhIHRhcmdldCB0byB0aGUgZGF0YSBhYm91dCB0aGF0IHRhcmdldFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMudGFyZ2V0cyA9IG5ldyBPYmplY3RNYXAoZnVuY3Rpb24gKHQpIHsgcmV0dXJuIHQuY2Fub25pY2FsSWQoKTsgfSk7XHJcbiAgICAgICAgLyoqIFRoZSBsYXN0IHJlY2VpdmVkIHNuYXBzaG90IHZlcnNpb24uICovXHJcbiAgICAgICAgdGhpcy5sYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uID0gU25hcHNob3RWZXJzaW9uLk1JTjtcclxuICAgICAgICAvKiogVGhlIGhpZ2hlc3QgbnVtYmVyZWQgdGFyZ2V0IElEIGVuY291bnRlcmVkLiAqL1xyXG4gICAgICAgIHRoaXMuaGlnaGVzdFRhcmdldElkID0gMDtcclxuICAgICAgICAvKiogVGhlIGhpZ2hlc3Qgc2VxdWVuY2UgbnVtYmVyIGVuY291bnRlcmVkLiAqL1xyXG4gICAgICAgIHRoaXMuaGlnaGVzdFNlcXVlbmNlTnVtYmVyID0gMDtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBBIG9yZGVyZWQgYmlkaXJlY3Rpb25hbCBtYXBwaW5nIGJldHdlZW4gZG9jdW1lbnRzIGFuZCB0aGUgcmVtb3RlIHRhcmdldFxyXG4gICAgICAgICAqIElEcy5cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLnJlZmVyZW5jZXMgPSBuZXcgUmVmZXJlbmNlU2V0KCk7XHJcbiAgICAgICAgdGhpcy50YXJnZXRDb3VudCA9IDA7XHJcbiAgICAgICAgdGhpcy50YXJnZXRJZEdlbmVyYXRvciA9IFRhcmdldElkR2VuZXJhdG9yLmZvclRhcmdldENhY2hlKCk7XHJcbiAgICB9XHJcbiAgICBNZW1vcnlUYXJnZXRDYWNoZS5wcm90b3R5cGUuZm9yRWFjaFRhcmdldCA9IGZ1bmN0aW9uICh0eG4sIGYpIHtcclxuICAgICAgICB0aGlzLnRhcmdldHMuZm9yRWFjaChmdW5jdGlvbiAoXywgdGFyZ2V0RGF0YSkgeyByZXR1cm4gZih0YXJnZXREYXRhKTsgfSk7XHJcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5VGFyZ2V0Q2FjaGUucHJvdG90eXBlLmdldExhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24gPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24pIHtcclxuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUodGhpcy5sYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uKTtcclxuICAgIH07XHJcbiAgICBNZW1vcnlUYXJnZXRDYWNoZS5wcm90b3R5cGUuZ2V0SGlnaGVzdFNlcXVlbmNlTnVtYmVyID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uKSB7XHJcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKHRoaXMuaGlnaGVzdFNlcXVlbmNlTnVtYmVyKTtcclxuICAgIH07XHJcbiAgICBNZW1vcnlUYXJnZXRDYWNoZS5wcm90b3R5cGUuYWxsb2NhdGVUYXJnZXRJZCA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbikge1xyXG4gICAgICAgIHZhciBuZXh0VGFyZ2V0SWQgPSB0aGlzLnRhcmdldElkR2VuZXJhdG9yLmFmdGVyKHRoaXMuaGlnaGVzdFRhcmdldElkKTtcclxuICAgICAgICB0aGlzLmhpZ2hlc3RUYXJnZXRJZCA9IG5leHRUYXJnZXRJZDtcclxuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUobmV4dFRhcmdldElkKTtcclxuICAgIH07XHJcbiAgICBNZW1vcnlUYXJnZXRDYWNoZS5wcm90b3R5cGUuc2V0VGFyZ2V0c01ldGFkYXRhID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCBoaWdoZXN0TGlzdGVuU2VxdWVuY2VOdW1iZXIsIGxhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24pIHtcclxuICAgICAgICBpZiAobGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbikge1xyXG4gICAgICAgICAgICB0aGlzLmxhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24gPSBsYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoaGlnaGVzdExpc3RlblNlcXVlbmNlTnVtYmVyID4gdGhpcy5oaWdoZXN0U2VxdWVuY2VOdW1iZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5oaWdoZXN0U2VxdWVuY2VOdW1iZXIgPSBoaWdoZXN0TGlzdGVuU2VxdWVuY2VOdW1iZXI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgfTtcclxuICAgIE1lbW9yeVRhcmdldENhY2hlLnByb3RvdHlwZS5zYXZlVGFyZ2V0RGF0YSA9IGZ1bmN0aW9uICh0YXJnZXREYXRhKSB7XHJcbiAgICAgICAgdGhpcy50YXJnZXRzLnNldCh0YXJnZXREYXRhLnRhcmdldCwgdGFyZ2V0RGF0YSk7XHJcbiAgICAgICAgdmFyIHRhcmdldElkID0gdGFyZ2V0RGF0YS50YXJnZXRJZDtcclxuICAgICAgICBpZiAodGFyZ2V0SWQgPiB0aGlzLmhpZ2hlc3RUYXJnZXRJZCkge1xyXG4gICAgICAgICAgICB0aGlzLmhpZ2hlc3RUYXJnZXRJZCA9IHRhcmdldElkO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGFyZ2V0RGF0YS5zZXF1ZW5jZU51bWJlciA+IHRoaXMuaGlnaGVzdFNlcXVlbmNlTnVtYmVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaGlnaGVzdFNlcXVlbmNlTnVtYmVyID0gdGFyZ2V0RGF0YS5zZXF1ZW5jZU51bWJlcjtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5VGFyZ2V0Q2FjaGUucHJvdG90eXBlLmFkZFRhcmdldERhdGEgPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24sIHRhcmdldERhdGEpIHtcclxuICAgICAgICBhc3NlcnQoIXRoaXMudGFyZ2V0cy5oYXModGFyZ2V0RGF0YS50YXJnZXQpLCAnQWRkaW5nIGEgdGFyZ2V0IHRoYXQgYWxyZWFkeSBleGlzdHMnKTtcclxuICAgICAgICB0aGlzLnNhdmVUYXJnZXREYXRhKHRhcmdldERhdGEpO1xyXG4gICAgICAgIHRoaXMudGFyZ2V0Q291bnQgKz0gMTtcclxuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoKTtcclxuICAgIH07XHJcbiAgICBNZW1vcnlUYXJnZXRDYWNoZS5wcm90b3R5cGUudXBkYXRlVGFyZ2V0RGF0YSA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwgdGFyZ2V0RGF0YSkge1xyXG4gICAgICAgIGFzc2VydCh0aGlzLnRhcmdldHMuaGFzKHRhcmdldERhdGEudGFyZ2V0KSwgJ1VwZGF0aW5nIGEgbm9uLWV4aXN0ZW50IHRhcmdldCcpO1xyXG4gICAgICAgIHRoaXMuc2F2ZVRhcmdldERhdGEodGFyZ2V0RGF0YSk7XHJcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5VGFyZ2V0Q2FjaGUucHJvdG90eXBlLnJlbW92ZVRhcmdldERhdGEgPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24sIHRhcmdldERhdGEpIHtcclxuICAgICAgICBhc3NlcnQodGhpcy50YXJnZXRDb3VudCA+IDAsICdSZW1vdmluZyBhIHRhcmdldCBmcm9tIGFuIGVtcHR5IGNhY2hlJyk7XHJcbiAgICAgICAgYXNzZXJ0KHRoaXMudGFyZ2V0cy5oYXModGFyZ2V0RGF0YS50YXJnZXQpLCAnUmVtb3ZpbmcgYSBub24tZXhpc3RlbnQgdGFyZ2V0IGZyb20gdGhlIGNhY2hlJyk7XHJcbiAgICAgICAgdGhpcy50YXJnZXRzLmRlbGV0ZSh0YXJnZXREYXRhLnRhcmdldCk7XHJcbiAgICAgICAgdGhpcy5yZWZlcmVuY2VzLnJlbW92ZVJlZmVyZW5jZXNGb3JJZCh0YXJnZXREYXRhLnRhcmdldElkKTtcclxuICAgICAgICB0aGlzLnRhcmdldENvdW50IC09IDE7XHJcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5VGFyZ2V0Q2FjaGUucHJvdG90eXBlLnJlbW92ZVRhcmdldHMgPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24sIHVwcGVyQm91bmQsIGFjdGl2ZVRhcmdldElkcykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIGNvdW50ID0gMDtcclxuICAgICAgICB2YXIgcmVtb3ZhbHMgPSBbXTtcclxuICAgICAgICB0aGlzLnRhcmdldHMuZm9yRWFjaChmdW5jdGlvbiAoa2V5LCB0YXJnZXREYXRhKSB7XHJcbiAgICAgICAgICAgIGlmICh0YXJnZXREYXRhLnNlcXVlbmNlTnVtYmVyIDw9IHVwcGVyQm91bmQgJiZcclxuICAgICAgICAgICAgICAgIGFjdGl2ZVRhcmdldElkcy5nZXQodGFyZ2V0RGF0YS50YXJnZXRJZCkgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLnRhcmdldHMuZGVsZXRlKGtleSk7XHJcbiAgICAgICAgICAgICAgICByZW1vdmFscy5wdXNoKF90aGlzLnJlbW92ZU1hdGNoaW5nS2V5c0ZvclRhcmdldElkKHRyYW5zYWN0aW9uLCB0YXJnZXREYXRhLnRhcmdldElkKSk7XHJcbiAgICAgICAgICAgICAgICBjb3VudCsrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS53YWl0Rm9yKHJlbW92YWxzKS5uZXh0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIGNvdW50OyB9KTtcclxuICAgIH07XHJcbiAgICBNZW1vcnlUYXJnZXRDYWNoZS5wcm90b3R5cGUuZ2V0VGFyZ2V0Q291bnQgPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24pIHtcclxuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUodGhpcy50YXJnZXRDb3VudCk7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5VGFyZ2V0Q2FjaGUucHJvdG90eXBlLmdldFRhcmdldERhdGEgPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24sIHRhcmdldCkge1xyXG4gICAgICAgIHZhciB0YXJnZXREYXRhID0gdGhpcy50YXJnZXRzLmdldCh0YXJnZXQpIHx8IG51bGw7XHJcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKHRhcmdldERhdGEpO1xyXG4gICAgfTtcclxuICAgIE1lbW9yeVRhcmdldENhY2hlLnByb3RvdHlwZS5nZXRUYXJnZXREYXRhRm9yVGFyZ2V0ID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCB0YXJnZXRJZCkge1xyXG4gICAgICAgIC8vIFRoaXMgbWV0aG9kIGlzIG9ubHkgbmVlZGVkIGZvciBtdWx0aS10YWIgYW5kIHdlIGNhbid0IGltcGxlbWVudCBpdFxyXG4gICAgICAgIC8vIGVmZmljaWVudGx5IHdpdGhvdXQgYWRkaXRpb25hbCBkYXRhIHN0cnVjdHVyZXMuXHJcbiAgICAgICAgcmV0dXJuIGZhaWwoJ05vdCB5ZXQgaW1wbGVtZW50ZWQuJyk7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5VGFyZ2V0Q2FjaGUucHJvdG90eXBlLmFkZE1hdGNoaW5nS2V5cyA9IGZ1bmN0aW9uICh0eG4sIGtleXMsIHRhcmdldElkKSB7XHJcbiAgICAgICAgdGhpcy5yZWZlcmVuY2VzLmFkZFJlZmVyZW5jZXMoa2V5cywgdGFyZ2V0SWQpO1xyXG4gICAgICAgIHZhciByZWZlcmVuY2VEZWxlZ2F0ZSA9IHRoaXMucGVyc2lzdGVuY2UucmVmZXJlbmNlRGVsZWdhdGU7XHJcbiAgICAgICAgdmFyIHByb21pc2VzID0gW107XHJcbiAgICAgICAgaWYgKHJlZmVyZW5jZURlbGVnYXRlKSB7XHJcbiAgICAgICAgICAgIGtleXMuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgICAgICAgICAgICBwcm9taXNlcy5wdXNoKHJlZmVyZW5jZURlbGVnYXRlLmFkZFJlZmVyZW5jZSh0eG4sIGtleSkpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS53YWl0Rm9yKHByb21pc2VzKTtcclxuICAgIH07XHJcbiAgICBNZW1vcnlUYXJnZXRDYWNoZS5wcm90b3R5cGUucmVtb3ZlTWF0Y2hpbmdLZXlzID0gZnVuY3Rpb24gKHR4biwga2V5cywgdGFyZ2V0SWQpIHtcclxuICAgICAgICB0aGlzLnJlZmVyZW5jZXMucmVtb3ZlUmVmZXJlbmNlcyhrZXlzLCB0YXJnZXRJZCk7XHJcbiAgICAgICAgdmFyIHJlZmVyZW5jZURlbGVnYXRlID0gdGhpcy5wZXJzaXN0ZW5jZS5yZWZlcmVuY2VEZWxlZ2F0ZTtcclxuICAgICAgICB2YXIgcHJvbWlzZXMgPSBbXTtcclxuICAgICAgICBpZiAocmVmZXJlbmNlRGVsZWdhdGUpIHtcclxuICAgICAgICAgICAga2V5cy5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICAgICAgICAgIHByb21pc2VzLnB1c2gocmVmZXJlbmNlRGVsZWdhdGUucmVtb3ZlUmVmZXJlbmNlKHR4biwga2V5KSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLndhaXRGb3IocHJvbWlzZXMpO1xyXG4gICAgfTtcclxuICAgIE1lbW9yeVRhcmdldENhY2hlLnByb3RvdHlwZS5yZW1vdmVNYXRjaGluZ0tleXNGb3JUYXJnZXRJZCA9IGZ1bmN0aW9uICh0eG4sIHRhcmdldElkKSB7XHJcbiAgICAgICAgdGhpcy5yZWZlcmVuY2VzLnJlbW92ZVJlZmVyZW5jZXNGb3JJZCh0YXJnZXRJZCk7XHJcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5VGFyZ2V0Q2FjaGUucHJvdG90eXBlLmdldE1hdGNoaW5nS2V5c0ZvclRhcmdldElkID0gZnVuY3Rpb24gKHR4biwgdGFyZ2V0SWQpIHtcclxuICAgICAgICB2YXIgbWF0Y2hpbmdLZXlzID0gdGhpcy5yZWZlcmVuY2VzLnJlZmVyZW5jZXNGb3JJZCh0YXJnZXRJZCk7XHJcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKG1hdGNoaW5nS2V5cyk7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5VGFyZ2V0Q2FjaGUucHJvdG90eXBlLmNvbnRhaW5zS2V5ID0gZnVuY3Rpb24gKHR4biwga2V5KSB7XHJcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKHRoaXMucmVmZXJlbmNlcy5jb250YWluc0tleShrZXkpKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gTWVtb3J5VGFyZ2V0Q2FjaGU7XHJcbn0oKSk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG52YXIgTE9HX1RBRyQzID0gJ01lbW9yeVBlcnNpc3RlbmNlJztcclxuLyoqXHJcbiAqIEEgbWVtb3J5LWJhY2tlZCBpbnN0YW5jZSBvZiBQZXJzaXN0ZW5jZS4gRGF0YSBpcyBzdG9yZWQgb25seSBpbiBSQU0gYW5kXHJcbiAqIG5vdCBwZXJzaXN0ZWQgYWNyb3NzIHNlc3Npb25zLlxyXG4gKi9cclxudmFyIE1lbW9yeVBlcnNpc3RlbmNlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgY29uc3RydWN0b3IgYWNjZXB0cyBhIGZhY3RvcnkgZm9yIGNyZWF0aW5nIGEgcmVmZXJlbmNlIGRlbGVnYXRlLiBUaGlzXHJcbiAgICAgKiBhbGxvd3MgYm90aCB0aGUgZGVsZWdhdGUgYW5kIHRoaXMgaW5zdGFuY2UgdG8gaGF2ZSBzdHJvbmcgcmVmZXJlbmNlcyB0b1xyXG4gICAgICogZWFjaCBvdGhlciB3aXRob3V0IGhhdmluZyBudWxsYWJsZSBmaWVsZHMgdGhhdCB3b3VsZCB0aGVuIG5lZWQgdG8gYmVcclxuICAgICAqIGNoZWNrZWQgb3IgYXNzZXJ0ZWQgb24gZXZlcnkgYWNjZXNzLlxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBNZW1vcnlQZXJzaXN0ZW5jZShjbGllbnRJZCwgcmVmZXJlbmNlRGVsZWdhdGVGYWN0b3J5KSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB0aGlzLmNsaWVudElkID0gY2xpZW50SWQ7XHJcbiAgICAgICAgdGhpcy5tdXRhdGlvblF1ZXVlcyA9IHt9O1xyXG4gICAgICAgIHRoaXMubGlzdGVuU2VxdWVuY2UgPSBuZXcgTGlzdGVuU2VxdWVuY2UoMCk7XHJcbiAgICAgICAgdGhpcy5fc3RhcnRlZCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuX3N0YXJ0ZWQgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMucmVmZXJlbmNlRGVsZWdhdGUgPSByZWZlcmVuY2VEZWxlZ2F0ZUZhY3RvcnkodGhpcyk7XHJcbiAgICAgICAgdGhpcy50YXJnZXRDYWNoZSA9IG5ldyBNZW1vcnlUYXJnZXRDYWNoZSh0aGlzKTtcclxuICAgICAgICB2YXIgc2l6ZXIgPSBmdW5jdGlvbiAoZG9jKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZS5kb2N1bWVudFNpemUoZG9jKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuaW5kZXhNYW5hZ2VyID0gbmV3IE1lbW9yeUluZGV4TWFuYWdlcigpO1xyXG4gICAgICAgIHRoaXMucmVtb3RlRG9jdW1lbnRDYWNoZSA9IG5ldyBNZW1vcnlSZW1vdGVEb2N1bWVudENhY2hlKHRoaXMuaW5kZXhNYW5hZ2VyLCBzaXplcik7XHJcbiAgICB9XHJcbiAgICBNZW1vcnlQZXJzaXN0ZW5jZS5jcmVhdGVMcnVQZXJzaXN0ZW5jZSA9IGZ1bmN0aW9uIChjbGllbnRJZCwgc2VyaWFsaXplciwgcGFyYW1zKSB7XHJcbiAgICAgICAgdmFyIGZhY3RvcnkgPSBmdW5jdGlvbiAocCkge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IE1lbW9yeUxydURlbGVnYXRlKHAsIG5ldyBMb2NhbFNlcmlhbGl6ZXIoc2VyaWFsaXplciksIHBhcmFtcyk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gbmV3IE1lbW9yeVBlcnNpc3RlbmNlKGNsaWVudElkLCBmYWN0b3J5KTtcclxuICAgIH07XHJcbiAgICBNZW1vcnlQZXJzaXN0ZW5jZS5jcmVhdGVFYWdlclBlcnNpc3RlbmNlID0gZnVuY3Rpb24gKGNsaWVudElkKSB7XHJcbiAgICAgICAgdmFyIGZhY3RvcnkgPSBmdW5jdGlvbiAocCkge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IE1lbW9yeUVhZ2VyRGVsZWdhdGUocCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gbmV3IE1lbW9yeVBlcnNpc3RlbmNlKGNsaWVudElkLCBmYWN0b3J5KTtcclxuICAgIH07XHJcbiAgICBNZW1vcnlQZXJzaXN0ZW5jZS5wcm90b3R5cGUuc2h1dGRvd24gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy8gTm8gZHVyYWJsZSBzdGF0ZSB0byBlbnN1cmUgaXMgY2xvc2VkIG9uIHNodXRkb3duLlxyXG4gICAgICAgIHRoaXMuX3N0YXJ0ZWQgPSBmYWxzZTtcclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICB9O1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE1lbW9yeVBlcnNpc3RlbmNlLnByb3RvdHlwZSwgXCJzdGFydGVkXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3N0YXJ0ZWQ7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBNZW1vcnlQZXJzaXN0ZW5jZS5wcm90b3R5cGUuZ2V0QWN0aXZlQ2xpZW50cyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdHNsaWIuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYi5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBbdGhpcy5jbGllbnRJZF1dO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBNZW1vcnlQZXJzaXN0ZW5jZS5wcm90b3R5cGUuc2V0UHJpbWFyeVN0YXRlTGlzdGVuZXIgPSBmdW5jdGlvbiAocHJpbWFyeVN0YXRlTGlzdGVuZXIpIHtcclxuICAgICAgICAvLyBBbGwgY2xpZW50cyB1c2luZyBtZW1vcnkgcGVyc2lzdGVuY2UgYWN0IGFzIHByaW1hcnkuXHJcbiAgICAgICAgcmV0dXJuIHByaW1hcnlTdGF0ZUxpc3RlbmVyKHRydWUpO1xyXG4gICAgfTtcclxuICAgIE1lbW9yeVBlcnNpc3RlbmNlLnByb3RvdHlwZS5zZXREYXRhYmFzZURlbGV0ZWRMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvLyBObyBvcC5cclxuICAgIH07XHJcbiAgICBNZW1vcnlQZXJzaXN0ZW5jZS5wcm90b3R5cGUuc2V0TmV0d29ya0VuYWJsZWQgPSBmdW5jdGlvbiAobmV0d29ya0VuYWJsZWQpIHtcclxuICAgICAgICAvLyBObyBvcC5cclxuICAgIH07XHJcbiAgICBNZW1vcnlQZXJzaXN0ZW5jZS5wcm90b3R5cGUuZ2V0SW5kZXhNYW5hZ2VyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmluZGV4TWFuYWdlcjtcclxuICAgIH07XHJcbiAgICBNZW1vcnlQZXJzaXN0ZW5jZS5wcm90b3R5cGUuZ2V0TXV0YXRpb25RdWV1ZSA9IGZ1bmN0aW9uICh1c2VyKSB7XHJcbiAgICAgICAgdmFyIHF1ZXVlID0gdGhpcy5tdXRhdGlvblF1ZXVlc1t1c2VyLnRvS2V5KCldO1xyXG4gICAgICAgIGlmICghcXVldWUpIHtcclxuICAgICAgICAgICAgcXVldWUgPSBuZXcgTWVtb3J5TXV0YXRpb25RdWV1ZSh0aGlzLmluZGV4TWFuYWdlciwgdGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZSk7XHJcbiAgICAgICAgICAgIHRoaXMubXV0YXRpb25RdWV1ZXNbdXNlci50b0tleSgpXSA9IHF1ZXVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcXVldWU7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5UGVyc2lzdGVuY2UucHJvdG90eXBlLmdldFRhcmdldENhY2hlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnRhcmdldENhY2hlO1xyXG4gICAgfTtcclxuICAgIE1lbW9yeVBlcnNpc3RlbmNlLnByb3RvdHlwZS5nZXRSZW1vdGVEb2N1bWVudENhY2hlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnJlbW90ZURvY3VtZW50Q2FjaGU7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5UGVyc2lzdGVuY2UucHJvdG90eXBlLnJ1blRyYW5zYWN0aW9uID0gZnVuY3Rpb24gKGFjdGlvbiwgbW9kZSwgdHJhbnNhY3Rpb25PcGVyYXRpb24pIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIGRlYnVnKExPR19UQUckMywgJ1N0YXJ0aW5nIHRyYW5zYWN0aW9uOicsIGFjdGlvbik7XHJcbiAgICAgICAgdmFyIHR4biA9IG5ldyBNZW1vcnlUcmFuc2FjdGlvbih0aGlzLmxpc3RlblNlcXVlbmNlLm5leHQoKSk7XHJcbiAgICAgICAgdGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZS5vblRyYW5zYWN0aW9uU3RhcnRlZCgpO1xyXG4gICAgICAgIHJldHVybiB0cmFuc2FjdGlvbk9wZXJhdGlvbih0eG4pXHJcbiAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIF90aGlzLnJlZmVyZW5jZURlbGVnYXRlXHJcbiAgICAgICAgICAgICAgICAub25UcmFuc2FjdGlvbkNvbW1pdHRlZCh0eG4pXHJcbiAgICAgICAgICAgICAgICAubmV4dChmdW5jdGlvbiAoKSB7IHJldHVybiByZXN1bHQ7IH0pO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC50b1Byb21pc2UoKVxyXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgIHR4bi5yYWlzZU9uQ29tbWl0dGVkRXZlbnQoKTtcclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBNZW1vcnlQZXJzaXN0ZW5jZS5wcm90b3R5cGUubXV0YXRpb25RdWV1ZXNDb250YWluS2V5ID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCBrZXkpIHtcclxuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLm9yKHZhbHVlcyh0aGlzLm11dGF0aW9uUXVldWVzKVxyXG4gICAgICAgICAgICAubWFwKGZ1bmN0aW9uIChxdWV1ZSkgeyByZXR1cm4gZnVuY3Rpb24gKCkgeyByZXR1cm4gcXVldWUuY29udGFpbnNLZXkodHJhbnNhY3Rpb24sIGtleSk7IH07IH0pKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gTWVtb3J5UGVyc2lzdGVuY2U7XHJcbn0oKSk7XHJcbi8qKlxyXG4gKiBNZW1vcnkgcGVyc2lzdGVuY2UgaXMgbm90IGFjdHVhbGx5IHRyYW5zYWN0aW9uYWwsIGJ1dCBmdXR1cmUgaW1wbGVtZW50YXRpb25zXHJcbiAqIG1heSBoYXZlIHRyYW5zYWN0aW9uLXNjb3BlZCBzdGF0ZS5cclxuICovXHJcbnZhciBNZW1vcnlUcmFuc2FjdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIHRzbGliLl9fZXh0ZW5kcyhNZW1vcnlUcmFuc2FjdGlvbiwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIE1lbW9yeVRyYW5zYWN0aW9uKGN1cnJlbnRTZXF1ZW5jZU51bWJlcikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMuY3VycmVudFNlcXVlbmNlTnVtYmVyID0gY3VycmVudFNlcXVlbmNlTnVtYmVyO1xyXG4gICAgICAgIHJldHVybiBfdGhpcztcclxuICAgIH1cclxuICAgIHJldHVybiBNZW1vcnlUcmFuc2FjdGlvbjtcclxufShQZXJzaXN0ZW5jZVRyYW5zYWN0aW9uKSk7XHJcbnZhciBNZW1vcnlFYWdlckRlbGVnYXRlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gTWVtb3J5RWFnZXJEZWxlZ2F0ZShwZXJzaXN0ZW5jZSkge1xyXG4gICAgICAgIHRoaXMucGVyc2lzdGVuY2UgPSBwZXJzaXN0ZW5jZTtcclxuICAgICAgICB0aGlzLmluTWVtb3J5UGlucyA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5fb3JwaGFuZWREb2N1bWVudHMgPSBudWxsO1xyXG4gICAgfVxyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE1lbW9yeUVhZ2VyRGVsZWdhdGUucHJvdG90eXBlLCBcIm9ycGhhbmVkRG9jdW1lbnRzXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLl9vcnBoYW5lZERvY3VtZW50cykge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgZmFpbCgnb3JwaGFuZWREb2N1bWVudHMgaXMgb25seSB2YWxpZCBkdXJpbmcgYSB0cmFuc2FjdGlvbi4nKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9vcnBoYW5lZERvY3VtZW50cztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgTWVtb3J5RWFnZXJEZWxlZ2F0ZS5wcm90b3R5cGUuc2V0SW5NZW1vcnlQaW5zID0gZnVuY3Rpb24gKGluTWVtb3J5UGlucykge1xyXG4gICAgICAgIHRoaXMuaW5NZW1vcnlQaW5zID0gaW5NZW1vcnlQaW5zO1xyXG4gICAgfTtcclxuICAgIE1lbW9yeUVhZ2VyRGVsZWdhdGUucHJvdG90eXBlLmFkZFJlZmVyZW5jZSA9IGZ1bmN0aW9uICh0eG4sIGtleSkge1xyXG4gICAgICAgIHRoaXMub3JwaGFuZWREb2N1bWVudHMuZGVsZXRlKGtleSk7XHJcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5RWFnZXJEZWxlZ2F0ZS5wcm90b3R5cGUucmVtb3ZlUmVmZXJlbmNlID0gZnVuY3Rpb24gKHR4biwga2V5KSB7XHJcbiAgICAgICAgdGhpcy5vcnBoYW5lZERvY3VtZW50cy5hZGQoa2V5KTtcclxuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoKTtcclxuICAgIH07XHJcbiAgICBNZW1vcnlFYWdlckRlbGVnYXRlLnByb3RvdHlwZS5yZW1vdmVNdXRhdGlvblJlZmVyZW5jZSA9IGZ1bmN0aW9uICh0eG4sIGtleSkge1xyXG4gICAgICAgIHRoaXMub3JwaGFuZWREb2N1bWVudHMuYWRkKGtleSk7XHJcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5RWFnZXJEZWxlZ2F0ZS5wcm90b3R5cGUucmVtb3ZlVGFyZ2V0ID0gZnVuY3Rpb24gKHR4biwgdGFyZ2V0RGF0YSkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIGNhY2hlID0gdGhpcy5wZXJzaXN0ZW5jZS5nZXRUYXJnZXRDYWNoZSgpO1xyXG4gICAgICAgIHJldHVybiBjYWNoZVxyXG4gICAgICAgICAgICAuZ2V0TWF0Y2hpbmdLZXlzRm9yVGFyZ2V0SWQodHhuLCB0YXJnZXREYXRhLnRhcmdldElkKVxyXG4gICAgICAgICAgICAubmV4dChmdW5jdGlvbiAoa2V5cykge1xyXG4gICAgICAgICAgICBrZXlzLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyByZXR1cm4gX3RoaXMub3JwaGFuZWREb2N1bWVudHMuYWRkKGtleSk7IH0pO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIGNhY2hlLnJlbW92ZVRhcmdldERhdGEodHhuLCB0YXJnZXREYXRhKTsgfSk7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5RWFnZXJEZWxlZ2F0ZS5wcm90b3R5cGUub25UcmFuc2FjdGlvblN0YXJ0ZWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5fb3JwaGFuZWREb2N1bWVudHMgPSBuZXcgU2V0KCk7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5RWFnZXJEZWxlZ2F0ZS5wcm90b3R5cGUub25UcmFuc2FjdGlvbkNvbW1pdHRlZCA9IGZ1bmN0aW9uICh0eG4pIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIC8vIFJlbW92ZSBuZXdseSBvcnBoYW5lZCBkb2N1bWVudHMuXHJcbiAgICAgICAgdmFyIGNhY2hlID0gdGhpcy5wZXJzaXN0ZW5jZS5nZXRSZW1vdGVEb2N1bWVudENhY2hlKCk7XHJcbiAgICAgICAgdmFyIGNoYW5nZUJ1ZmZlciA9IGNhY2hlLm5ld0NoYW5nZUJ1ZmZlcigpO1xyXG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UuZm9yRWFjaCh0aGlzLm9ycGhhbmVkRG9jdW1lbnRzLCBmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5pc1JlZmVyZW5jZWQodHhuLCBrZXkpLm5leHQoZnVuY3Rpb24gKGlzUmVmZXJlbmNlZCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFpc1JlZmVyZW5jZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBjaGFuZ2VCdWZmZXIucmVtb3ZlRW50cnkoa2V5KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSkubmV4dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIF90aGlzLl9vcnBoYW5lZERvY3VtZW50cyA9IG51bGw7XHJcbiAgICAgICAgICAgIHJldHVybiBjaGFuZ2VCdWZmZXIuYXBwbHkodHhuKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBNZW1vcnlFYWdlckRlbGVnYXRlLnByb3RvdHlwZS51cGRhdGVMaW1ib0RvY3VtZW50ID0gZnVuY3Rpb24gKHR4biwga2V5KSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICByZXR1cm4gdGhpcy5pc1JlZmVyZW5jZWQodHhuLCBrZXkpLm5leHQoZnVuY3Rpb24gKGlzUmVmZXJlbmNlZCkge1xyXG4gICAgICAgICAgICBpZiAoaXNSZWZlcmVuY2VkKSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5vcnBoYW5lZERvY3VtZW50cy5kZWxldGUoa2V5KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLm9ycGhhbmVkRG9jdW1lbnRzLmFkZChrZXkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5RWFnZXJEZWxlZ2F0ZS5wcm90b3R5cGUuZG9jdW1lbnRTaXplID0gZnVuY3Rpb24gKGRvYykge1xyXG4gICAgICAgIC8vIEZvciBlYWdlciBHQywgd2UgZG9uJ3QgY2FyZSBhYm91dCB0aGUgZG9jdW1lbnQgc2l6ZSwgdGhlcmUgYXJlIG5vIHNpemUgdGhyZXNob2xkcy5cclxuICAgICAgICByZXR1cm4gMDtcclxuICAgIH07XHJcbiAgICBNZW1vcnlFYWdlckRlbGVnYXRlLnByb3RvdHlwZS5pc1JlZmVyZW5jZWQgPSBmdW5jdGlvbiAodHhuLCBrZXkpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2Uub3IoW1xyXG4gICAgICAgICAgICBmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5wZXJzaXN0ZW5jZS5nZXRUYXJnZXRDYWNoZSgpLmNvbnRhaW5zS2V5KHR4biwga2V5KTsgfSxcclxuICAgICAgICAgICAgZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMucGVyc2lzdGVuY2UubXV0YXRpb25RdWV1ZXNDb250YWluS2V5KHR4biwga2V5KTsgfSxcclxuICAgICAgICAgICAgZnVuY3Rpb24gKCkgeyByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoX3RoaXMuaW5NZW1vcnlQaW5zLmNvbnRhaW5zS2V5KGtleSkpOyB9XHJcbiAgICAgICAgXSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIE1lbW9yeUVhZ2VyRGVsZWdhdGU7XHJcbn0oKSk7XHJcbnZhciBNZW1vcnlMcnVEZWxlZ2F0ZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIE1lbW9yeUxydURlbGVnYXRlKHBlcnNpc3RlbmNlLCBzZXJpYWxpemVyLCBscnVQYXJhbXMpIHtcclxuICAgICAgICB0aGlzLnBlcnNpc3RlbmNlID0gcGVyc2lzdGVuY2U7XHJcbiAgICAgICAgdGhpcy5zZXJpYWxpemVyID0gc2VyaWFsaXplcjtcclxuICAgICAgICB0aGlzLmluTWVtb3J5UGlucyA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5vcnBoYW5lZFNlcXVlbmNlTnVtYmVycyA9IG5ldyBPYmplY3RNYXAoZnVuY3Rpb24gKGspIHsgcmV0dXJuIGVuY29kZShrLnBhdGgpOyB9KTtcclxuICAgICAgICB0aGlzLmdhcmJhZ2VDb2xsZWN0b3IgPSBuZXcgTHJ1R2FyYmFnZUNvbGxlY3Rvcih0aGlzLCBscnVQYXJhbXMpO1xyXG4gICAgfVxyXG4gICAgLy8gTm8tb3BzLCBwcmVzZW50IHNvIG1lbW9yeSBwZXJzaXN0ZW5jZSBkb2Vzbid0IGhhdmUgdG8gY2FyZSB3aGljaCBkZWxlZ2F0ZVxyXG4gICAgLy8gaXQgaGFzLlxyXG4gICAgTWVtb3J5THJ1RGVsZWdhdGUucHJvdG90eXBlLm9uVHJhbnNhY3Rpb25TdGFydGVkID0gZnVuY3Rpb24gKCkgeyB9O1xyXG4gICAgTWVtb3J5THJ1RGVsZWdhdGUucHJvdG90eXBlLm9uVHJhbnNhY3Rpb25Db21taXR0ZWQgPSBmdW5jdGlvbiAodHhuKSB7XHJcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5THJ1RGVsZWdhdGUucHJvdG90eXBlLmZvckVhY2hUYXJnZXQgPSBmdW5jdGlvbiAodHhuLCBmKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucGVyc2lzdGVuY2UuZ2V0VGFyZ2V0Q2FjaGUoKS5mb3JFYWNoVGFyZ2V0KHR4biwgZik7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5THJ1RGVsZWdhdGUucHJvdG90eXBlLmdldFNlcXVlbmNlTnVtYmVyQ291bnQgPSBmdW5jdGlvbiAodHhuKSB7XHJcbiAgICAgICAgdmFyIGRvY0NvdW50UHJvbWlzZSA9IHRoaXMub3JwaGFuZWREb2N1bWVudENvdW50KHR4bik7XHJcbiAgICAgICAgdmFyIHRhcmdldENvdW50UHJvbWlzZSA9IHRoaXMucGVyc2lzdGVuY2VcclxuICAgICAgICAgICAgLmdldFRhcmdldENhY2hlKClcclxuICAgICAgICAgICAgLmdldFRhcmdldENvdW50KHR4bik7XHJcbiAgICAgICAgcmV0dXJuIHRhcmdldENvdW50UHJvbWlzZS5uZXh0KGZ1bmN0aW9uICh0YXJnZXRDb3VudCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZG9jQ291bnRQcm9taXNlLm5leHQoZnVuY3Rpb24gKGRvY0NvdW50KSB7IHJldHVybiB0YXJnZXRDb3VudCArIGRvY0NvdW50OyB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBNZW1vcnlMcnVEZWxlZ2F0ZS5wcm90b3R5cGUub3JwaGFuZWREb2N1bWVudENvdW50ID0gZnVuY3Rpb24gKHR4bikge1xyXG4gICAgICAgIHZhciBvcnBoYW5lZENvdW50ID0gMDtcclxuICAgICAgICByZXR1cm4gdGhpcy5mb3JFYWNoT3JwaGFuZWREb2N1bWVudFNlcXVlbmNlTnVtYmVyKHR4biwgZnVuY3Rpb24gKF8pIHtcclxuICAgICAgICAgICAgb3JwaGFuZWRDb3VudCsrO1xyXG4gICAgICAgIH0pLm5leHQoZnVuY3Rpb24gKCkgeyByZXR1cm4gb3JwaGFuZWRDb3VudDsgfSk7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5THJ1RGVsZWdhdGUucHJvdG90eXBlLmZvckVhY2hPcnBoYW5lZERvY3VtZW50U2VxdWVuY2VOdW1iZXIgPSBmdW5jdGlvbiAodHhuLCBmKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLmZvckVhY2godGhpcy5vcnBoYW5lZFNlcXVlbmNlTnVtYmVycywgZnVuY3Rpb24gKGtleSwgc2VxdWVuY2VOdW1iZXIpIHtcclxuICAgICAgICAgICAgLy8gUGFzcyBpbiB0aGUgZXhhY3Qgc2VxdWVuY2UgbnVtYmVyIGFzIHRoZSB1cHBlciBib3VuZCBzbyB3ZSBrbm93IGl0IHdvbid0IGJlIHBpbm5lZCBieVxyXG4gICAgICAgICAgICAvLyBiZWluZyB0b28gcmVjZW50LlxyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXMuaXNQaW5uZWQodHhuLCBrZXksIHNlcXVlbmNlTnVtYmVyKS5uZXh0KGZ1bmN0aW9uIChpc1Bpbm5lZCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFpc1Bpbm5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmKHNlcXVlbmNlTnVtYmVyKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBNZW1vcnlMcnVEZWxlZ2F0ZS5wcm90b3R5cGUuc2V0SW5NZW1vcnlQaW5zID0gZnVuY3Rpb24gKGluTWVtb3J5UGlucykge1xyXG4gICAgICAgIHRoaXMuaW5NZW1vcnlQaW5zID0gaW5NZW1vcnlQaW5zO1xyXG4gICAgfTtcclxuICAgIE1lbW9yeUxydURlbGVnYXRlLnByb3RvdHlwZS5yZW1vdmVUYXJnZXRzID0gZnVuY3Rpb24gKHR4biwgdXBwZXJCb3VuZCwgYWN0aXZlVGFyZ2V0SWRzKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucGVyc2lzdGVuY2VcclxuICAgICAgICAgICAgLmdldFRhcmdldENhY2hlKClcclxuICAgICAgICAgICAgLnJlbW92ZVRhcmdldHModHhuLCB1cHBlckJvdW5kLCBhY3RpdmVUYXJnZXRJZHMpO1xyXG4gICAgfTtcclxuICAgIE1lbW9yeUxydURlbGVnYXRlLnByb3RvdHlwZS5yZW1vdmVPcnBoYW5lZERvY3VtZW50cyA9IGZ1bmN0aW9uICh0eG4sIHVwcGVyQm91bmQpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhciBjb3VudCA9IDA7XHJcbiAgICAgICAgdmFyIGNhY2hlID0gdGhpcy5wZXJzaXN0ZW5jZS5nZXRSZW1vdGVEb2N1bWVudENhY2hlKCk7XHJcbiAgICAgICAgdmFyIGNoYW5nZUJ1ZmZlciA9IGNhY2hlLm5ld0NoYW5nZUJ1ZmZlcigpO1xyXG4gICAgICAgIHZhciBwID0gY2FjaGUuZm9yRWFjaERvY3VtZW50S2V5KHR4biwgZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXMuaXNQaW5uZWQodHhuLCBrZXksIHVwcGVyQm91bmQpLm5leHQoZnVuY3Rpb24gKGlzUGlubmVkKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWlzUGlubmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY291bnQrKztcclxuICAgICAgICAgICAgICAgICAgICBjaGFuZ2VCdWZmZXIucmVtb3ZlRW50cnkoa2V5KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHAubmV4dChmdW5jdGlvbiAoKSB7IHJldHVybiBjaGFuZ2VCdWZmZXIuYXBwbHkodHhuKTsgfSkubmV4dChmdW5jdGlvbiAoKSB7IHJldHVybiBjb3VudDsgfSk7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5THJ1RGVsZWdhdGUucHJvdG90eXBlLnJlbW92ZU11dGF0aW9uUmVmZXJlbmNlID0gZnVuY3Rpb24gKHR4biwga2V5KSB7XHJcbiAgICAgICAgdGhpcy5vcnBoYW5lZFNlcXVlbmNlTnVtYmVycy5zZXQoa2V5LCB0eG4uY3VycmVudFNlcXVlbmNlTnVtYmVyKTtcclxuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoKTtcclxuICAgIH07XHJcbiAgICBNZW1vcnlMcnVEZWxlZ2F0ZS5wcm90b3R5cGUucmVtb3ZlVGFyZ2V0ID0gZnVuY3Rpb24gKHR4biwgdGFyZ2V0RGF0YSkge1xyXG4gICAgICAgIHZhciB1cGRhdGVkID0gdGFyZ2V0RGF0YS53aXRoU2VxdWVuY2VOdW1iZXIodHhuLmN1cnJlbnRTZXF1ZW5jZU51bWJlcik7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucGVyc2lzdGVuY2UuZ2V0VGFyZ2V0Q2FjaGUoKS51cGRhdGVUYXJnZXREYXRhKHR4biwgdXBkYXRlZCk7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5THJ1RGVsZWdhdGUucHJvdG90eXBlLmFkZFJlZmVyZW5jZSA9IGZ1bmN0aW9uICh0eG4sIGtleSkge1xyXG4gICAgICAgIHRoaXMub3JwaGFuZWRTZXF1ZW5jZU51bWJlcnMuc2V0KGtleSwgdHhuLmN1cnJlbnRTZXF1ZW5jZU51bWJlcik7XHJcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5THJ1RGVsZWdhdGUucHJvdG90eXBlLnJlbW92ZVJlZmVyZW5jZSA9IGZ1bmN0aW9uICh0eG4sIGtleSkge1xyXG4gICAgICAgIHRoaXMub3JwaGFuZWRTZXF1ZW5jZU51bWJlcnMuc2V0KGtleSwgdHhuLmN1cnJlbnRTZXF1ZW5jZU51bWJlcik7XHJcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5THJ1RGVsZWdhdGUucHJvdG90eXBlLnVwZGF0ZUxpbWJvRG9jdW1lbnQgPSBmdW5jdGlvbiAodHhuLCBrZXkpIHtcclxuICAgICAgICB0aGlzLm9ycGhhbmVkU2VxdWVuY2VOdW1iZXJzLnNldChrZXksIHR4bi5jdXJyZW50U2VxdWVuY2VOdW1iZXIpO1xyXG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgfTtcclxuICAgIE1lbW9yeUxydURlbGVnYXRlLnByb3RvdHlwZS5kb2N1bWVudFNpemUgPSBmdW5jdGlvbiAobWF5YmVEb2MpIHtcclxuICAgICAgICB2YXIgcmVtb3RlRG9jdW1lbnQgPSB0aGlzLnNlcmlhbGl6ZXIudG9EYlJlbW90ZURvY3VtZW50KG1heWJlRG9jLCBtYXliZURvYy52ZXJzaW9uKTtcclxuICAgICAgICB2YXIgdmFsdWU7XHJcbiAgICAgICAgaWYgKHJlbW90ZURvY3VtZW50LmRvY3VtZW50KSB7XHJcbiAgICAgICAgICAgIHZhbHVlID0gcmVtb3RlRG9jdW1lbnQuZG9jdW1lbnQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHJlbW90ZURvY3VtZW50LnVua25vd25Eb2N1bWVudCkge1xyXG4gICAgICAgICAgICB2YWx1ZSA9IHJlbW90ZURvY3VtZW50LnVua25vd25Eb2N1bWVudDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAocmVtb3RlRG9jdW1lbnQubm9Eb2N1bWVudCkge1xyXG4gICAgICAgICAgICB2YWx1ZSA9IHJlbW90ZURvY3VtZW50Lm5vRG9jdW1lbnQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aHJvdyBmYWlsKCdVbmtub3duIHJlbW90ZSBkb2N1bWVudCB0eXBlJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh2YWx1ZSkubGVuZ3RoO1xyXG4gICAgfTtcclxuICAgIE1lbW9yeUxydURlbGVnYXRlLnByb3RvdHlwZS5pc1Bpbm5lZCA9IGZ1bmN0aW9uICh0eG4sIGtleSwgdXBwZXJCb3VuZCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5vcihbXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLnBlcnNpc3RlbmNlLm11dGF0aW9uUXVldWVzQ29udGFpbktleSh0eG4sIGtleSk7IH0sXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uICgpIHsgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKF90aGlzLmluTWVtb3J5UGlucy5jb250YWluc0tleShrZXkpKTsgfSxcclxuICAgICAgICAgICAgZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMucGVyc2lzdGVuY2UuZ2V0VGFyZ2V0Q2FjaGUoKS5jb250YWluc0tleSh0eG4sIGtleSk7IH0sXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHZhciBvcnBoYW5lZEF0ID0gX3RoaXMub3JwaGFuZWRTZXF1ZW5jZU51bWJlcnMuZ2V0KGtleSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUob3JwaGFuZWRBdCAhPT0gdW5kZWZpbmVkICYmIG9ycGhhbmVkQXQgPiB1cHBlckJvdW5kKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIF0pO1xyXG4gICAgfTtcclxuICAgIE1lbW9yeUxydURlbGVnYXRlLnByb3RvdHlwZS5nZXRDYWNoZVNpemUgPSBmdW5jdGlvbiAodHhuKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucGVyc2lzdGVuY2UuZ2V0UmVtb3RlRG9jdW1lbnRDYWNoZSgpLmdldFNpemUodHhuKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gTWVtb3J5THJ1RGVsZWdhdGU7XHJcbn0oKSk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG52YXIgTE9HX1RBRyQ0ID0gJ0V4cG9uZW50aWFsQmFja29mZic7XHJcbi8qKlxyXG4gKiBJbml0aWFsIGJhY2tvZmYgdGltZSBpbiBtaWxsaXNlY29uZHMgYWZ0ZXIgYW4gZXJyb3IuXHJcbiAqIFNldCB0byAxcyBhY2NvcmRpbmcgdG8gaHR0cHM6Ly9jbG91ZC5nb29nbGUuY29tL2FwaXMvZGVzaWduL2Vycm9ycy5cclxuICovXHJcbnZhciBERUZBVUxUX0JBQ0tPRkZfSU5JVElBTF9ERUxBWV9NUyA9IDEwMDA7XHJcbnZhciBERUZBVUxUX0JBQ0tPRkZfRkFDVE9SID0gMS41O1xyXG4vKiogTWF4aW11bSBiYWNrb2ZmIHRpbWUgaW4gbWlsbGlzZWNvbmRzICovXHJcbnZhciBERUZBVUxUX0JBQ0tPRkZfTUFYX0RFTEFZX01TID0gNjAgKiAxMDAwO1xyXG4vKipcclxuICogQSBoZWxwZXIgZm9yIHJ1bm5pbmcgZGVsYXllZCB0YXNrcyBmb2xsb3dpbmcgYW4gZXhwb25lbnRpYWwgYmFja29mZiBjdXJ2ZVxyXG4gKiBiZXR3ZWVuIGF0dGVtcHRzLlxyXG4gKlxyXG4gKiBFYWNoIGRlbGF5IGlzIG1hZGUgdXAgb2YgYSBcImJhc2VcIiBkZWxheSB3aGljaCBmb2xsb3dzIHRoZSBleHBvbmVudGlhbFxyXG4gKiBiYWNrb2ZmIGN1cnZlLCBhbmQgYSArLy0gNTAlIFwiaml0dGVyXCIgdGhhdCBpcyBjYWxjdWxhdGVkIGFuZCBhZGRlZCB0byB0aGVcclxuICogYmFzZSBkZWxheS4gVGhpcyBwcmV2ZW50cyBjbGllbnRzIGZyb20gYWNjaWRlbnRhbGx5IHN5bmNocm9uaXppbmcgdGhlaXJcclxuICogZGVsYXlzIGNhdXNpbmcgc3Bpa2VzIG9mIGxvYWQgdG8gdGhlIGJhY2tlbmQuXHJcbiAqL1xyXG52YXIgRXhwb25lbnRpYWxCYWNrb2ZmID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gRXhwb25lbnRpYWxCYWNrb2ZmKFxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgQXN5bmNRdWV1ZSB0byBydW4gYmFja29mZiBvcGVyYXRpb25zIG9uLlxyXG4gICAgICovXHJcbiAgICBxdWV1ZSwgXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBJRCB0byB1c2Ugd2hlbiBzY2hlZHVsaW5nIGJhY2tvZmYgb3BlcmF0aW9ucyBvbiB0aGUgQXN5bmNRdWV1ZS5cclxuICAgICAqL1xyXG4gICAgdGltZXJJZCwgXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBpbml0aWFsIGRlbGF5ICh1c2VkIGFzIHRoZSBiYXNlIGRlbGF5IG9uIHRoZSBmaXJzdCByZXRyeSBhdHRlbXB0KS5cclxuICAgICAqIE5vdGUgdGhhdCBqaXR0ZXIgd2lsbCBzdGlsbCBiZSBhcHBsaWVkLCBzbyB0aGUgYWN0dWFsIGRlbGF5IGNvdWxkIGJlIGFzXHJcbiAgICAgKiBsaXR0bGUgYXMgMC41KmluaXRpYWxEZWxheU1zLlxyXG4gICAgICovXHJcbiAgICBpbml0aWFsRGVsYXlNcywgXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBtdWx0aXBsaWVyIHRvIHVzZSB0byBkZXRlcm1pbmUgdGhlIGV4dGVuZGVkIGJhc2UgZGVsYXkgYWZ0ZXIgZWFjaFxyXG4gICAgICogYXR0ZW1wdC5cclxuICAgICAqL1xyXG4gICAgYmFja29mZkZhY3RvciwgXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBtYXhpbXVtIGJhc2UgZGVsYXkgYWZ0ZXIgd2hpY2ggbm8gZnVydGhlciBiYWNrb2ZmIGlzIHBlcmZvcm1lZC5cclxuICAgICAqIE5vdGUgdGhhdCBqaXR0ZXIgd2lsbCBzdGlsbCBiZSBhcHBsaWVkLCBzbyB0aGUgYWN0dWFsIGRlbGF5IGNvdWxkIGJlIGFzXHJcbiAgICAgKiBtdWNoIGFzIDEuNSptYXhEZWxheU1zLlxyXG4gICAgICovXHJcbiAgICBtYXhEZWxheU1zKSB7XHJcbiAgICAgICAgaWYgKGluaXRpYWxEZWxheU1zID09PSB2b2lkIDApIHsgaW5pdGlhbERlbGF5TXMgPSBERUZBVUxUX0JBQ0tPRkZfSU5JVElBTF9ERUxBWV9NUzsgfVxyXG4gICAgICAgIGlmIChiYWNrb2ZmRmFjdG9yID09PSB2b2lkIDApIHsgYmFja29mZkZhY3RvciA9IERFRkFVTFRfQkFDS09GRl9GQUNUT1I7IH1cclxuICAgICAgICBpZiAobWF4RGVsYXlNcyA9PT0gdm9pZCAwKSB7IG1heERlbGF5TXMgPSBERUZBVUxUX0JBQ0tPRkZfTUFYX0RFTEFZX01TOyB9XHJcbiAgICAgICAgdGhpcy5xdWV1ZSA9IHF1ZXVlO1xyXG4gICAgICAgIHRoaXMudGltZXJJZCA9IHRpbWVySWQ7XHJcbiAgICAgICAgdGhpcy5pbml0aWFsRGVsYXlNcyA9IGluaXRpYWxEZWxheU1zO1xyXG4gICAgICAgIHRoaXMuYmFja29mZkZhY3RvciA9IGJhY2tvZmZGYWN0b3I7XHJcbiAgICAgICAgdGhpcy5tYXhEZWxheU1zID0gbWF4RGVsYXlNcztcclxuICAgICAgICB0aGlzLmN1cnJlbnRCYXNlTXMgPSAwO1xyXG4gICAgICAgIHRoaXMudGltZXJQcm9taXNlID0gbnVsbDtcclxuICAgICAgICAvKiogVGhlIGxhc3QgYmFja29mZiBhdHRlbXB0LCBhcyBlcG9jaCBtaWxsaXNlY29uZHMuICovXHJcbiAgICAgICAgdGhpcy5sYXN0QXR0ZW1wdFRpbWUgPSBEYXRlLm5vdygpO1xyXG4gICAgICAgIHRoaXMucmVzZXQoKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogUmVzZXRzIHRoZSBiYWNrb2ZmIGRlbGF5LlxyXG4gICAgICpcclxuICAgICAqIFRoZSB2ZXJ5IG5leHQgYmFja29mZkFuZFdhaXQoKSB3aWxsIGhhdmUgbm8gZGVsYXkuIElmIGl0IGlzIGNhbGxlZCBhZ2FpblxyXG4gICAgICogKGkuZS4gZHVlIHRvIGFuIGVycm9yKSwgaW5pdGlhbERlbGF5TXMgKHBsdXMgaml0dGVyKSB3aWxsIGJlIHVzZWQsIGFuZFxyXG4gICAgICogc3Vic2VxdWVudCBvbmVzIHdpbGwgaW5jcmVhc2UgYWNjb3JkaW5nIHRvIHRoZSBiYWNrb2ZmRmFjdG9yLlxyXG4gICAgICovXHJcbiAgICBFeHBvbmVudGlhbEJhY2tvZmYucHJvdG90eXBlLnJlc2V0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuY3VycmVudEJhc2VNcyA9IDA7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZXNldHMgdGhlIGJhY2tvZmYgZGVsYXkgdG8gdGhlIG1heGltdW0gZGVsYXkgKGUuZy4gZm9yIHVzZSBhZnRlciBhXHJcbiAgICAgKiBSRVNPVVJDRV9FWEhBVVNURUQgZXJyb3IpLlxyXG4gICAgICovXHJcbiAgICBFeHBvbmVudGlhbEJhY2tvZmYucHJvdG90eXBlLnJlc2V0VG9NYXggPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5jdXJyZW50QmFzZU1zID0gdGhpcy5tYXhEZWxheU1zO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyBhIHByb21pc2UgdGhhdCByZXNvbHZlcyBhZnRlciBjdXJyZW50RGVsYXlNcywgYW5kIGluY3JlYXNlcyB0aGVcclxuICAgICAqIGRlbGF5IGZvciBhbnkgc3Vic2VxdWVudCBhdHRlbXB0cy4gSWYgdGhlcmUgd2FzIGEgcGVuZGluZyBiYWNrb2ZmIG9wZXJhdGlvblxyXG4gICAgICogYWxyZWFkeSwgaXQgd2lsbCBiZSBjYW5jZWxlZC5cclxuICAgICAqL1xyXG4gICAgRXhwb25lbnRpYWxCYWNrb2ZmLnByb3RvdHlwZS5iYWNrb2ZmQW5kUnVuID0gZnVuY3Rpb24gKG9wKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICAvLyBDYW5jZWwgYW55IHBlbmRpbmcgYmFja29mZiBvcGVyYXRpb24uXHJcbiAgICAgICAgdGhpcy5jYW5jZWwoKTtcclxuICAgICAgICAvLyBGaXJzdCBzY2hlZHVsZSB1c2luZyB0aGUgY3VycmVudCBiYXNlICh3aGljaCBtYXkgYmUgMCBhbmQgc2hvdWxkIGJlXHJcbiAgICAgICAgLy8gaG9ub3JlZCBhcyBzdWNoKS5cclxuICAgICAgICB2YXIgZGVzaXJlZERlbGF5V2l0aEppdHRlck1zID0gTWF0aC5mbG9vcih0aGlzLmN1cnJlbnRCYXNlTXMgKyB0aGlzLmppdHRlckRlbGF5TXMoKSk7XHJcbiAgICAgICAgLy8gR3VhcmQgYWdhaW5zdCBsYXN0QXR0ZW1wdFRpbWUgYmVpbmcgaW4gdGhlIGZ1dHVyZSBkdWUgdG8gYSBjbG9jayBjaGFuZ2UuXHJcbiAgICAgICAgdmFyIGRlbGF5U29GYXJNcyA9IE1hdGgubWF4KDAsIERhdGUubm93KCkgLSB0aGlzLmxhc3RBdHRlbXB0VGltZSk7XHJcbiAgICAgICAgLy8gR3VhcmQgYWdhaW5zdCB0aGUgYmFja29mZiBkZWxheSBhbHJlYWR5IGJlaW5nIHBhc3QuXHJcbiAgICAgICAgdmFyIHJlbWFpbmluZ0RlbGF5TXMgPSBNYXRoLm1heCgwLCBkZXNpcmVkRGVsYXlXaXRoSml0dGVyTXMgLSBkZWxheVNvRmFyTXMpO1xyXG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRCYXNlTXMgPiAwKSB7XHJcbiAgICAgICAgICAgIGRlYnVnKExPR19UQUckNCwgXCJCYWNraW5nIG9mZiBmb3IgXCIgKyByZW1haW5pbmdEZWxheU1zICsgXCIgbXMgXCIgK1xyXG4gICAgICAgICAgICAgICAgKFwiKGJhc2UgZGVsYXk6IFwiICsgdGhpcy5jdXJyZW50QmFzZU1zICsgXCIgbXMsIFwiKSArXHJcbiAgICAgICAgICAgICAgICAoXCJkZWxheSB3aXRoIGppdHRlcjogXCIgKyBkZXNpcmVkRGVsYXlXaXRoSml0dGVyTXMgKyBcIiBtcywgXCIpICtcclxuICAgICAgICAgICAgICAgIChcImxhc3QgYXR0ZW1wdDogXCIgKyBkZWxheVNvRmFyTXMgKyBcIiBtcyBhZ28pXCIpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy50aW1lclByb21pc2UgPSB0aGlzLnF1ZXVlLmVucXVldWVBZnRlckRlbGF5KHRoaXMudGltZXJJZCwgcmVtYWluaW5nRGVsYXlNcywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBfdGhpcy5sYXN0QXR0ZW1wdFRpbWUgPSBEYXRlLm5vdygpO1xyXG4gICAgICAgICAgICByZXR1cm4gb3AoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyBBcHBseSBiYWNrb2ZmIGZhY3RvciB0byBkZXRlcm1pbmUgbmV4dCBkZWxheSBhbmQgZW5zdXJlIGl0IGlzIHdpdGhpblxyXG4gICAgICAgIC8vIGJvdW5kcy5cclxuICAgICAgICB0aGlzLmN1cnJlbnRCYXNlTXMgKj0gdGhpcy5iYWNrb2ZmRmFjdG9yO1xyXG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRCYXNlTXMgPCB0aGlzLmluaXRpYWxEZWxheU1zKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY3VycmVudEJhc2VNcyA9IHRoaXMuaW5pdGlhbERlbGF5TXM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRCYXNlTXMgPiB0aGlzLm1heERlbGF5TXMpIHtcclxuICAgICAgICAgICAgdGhpcy5jdXJyZW50QmFzZU1zID0gdGhpcy5tYXhEZWxheU1zO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBFeHBvbmVudGlhbEJhY2tvZmYucHJvdG90eXBlLmNhbmNlbCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAodGhpcy50aW1lclByb21pc2UgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgdGhpcy50aW1lclByb21pc2UuY2FuY2VsKCk7XHJcbiAgICAgICAgICAgIHRoaXMudGltZXJQcm9taXNlID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqIFJldHVybnMgYSByYW5kb20gdmFsdWUgaW4gdGhlIHJhbmdlIFstY3VycmVudEJhc2VNcy8yLCBjdXJyZW50QmFzZU1zLzJdICovXHJcbiAgICBFeHBvbmVudGlhbEJhY2tvZmYucHJvdG90eXBlLmppdHRlckRlbGF5TXMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIChNYXRoLnJhbmRvbSgpIC0gMC41KSAqIHRoaXMuY3VycmVudEJhc2VNcztcclxuICAgIH07XHJcbiAgICByZXR1cm4gRXhwb25lbnRpYWxCYWNrb2ZmO1xyXG59KCkpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxudmFyIExPR19UQUckNSA9ICdQZXJzaXN0ZW50U3RyZWFtJztcclxuLyoqXHJcbiAqIFBlcnNpc3RlbnRTdHJlYW0gY2FuIGJlIGluIG9uZSBvZiA1IHN0YXRlcyAoZWFjaCBkZXNjcmliZWQgaW4gZGV0YWlsIGJlbG93KVxyXG4gKiBiYXNlZCBvbiB0aGUgZm9sbG93aW5nIHN0YXRlIHRyYW5zaXRpb24gZGlhZ3JhbTpcclxuICpcclxuICogICAgICAgICAgc3RhcnQoKSBjYWxsZWQgICAgICAgICAgICAgYXV0aCAmIGNvbm5lY3Rpb24gc3VjY2VlZGVkXHJcbiAqIElOSVRJQUwgLS0tLS0tLS0tLS0tLS0tLT4gU1RBUlRJTkcgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+IE9QRU5cclxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgIF4gIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcclxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgIHwgICAgICAgICAgICAgICAgICAgIGVycm9yIG9jY3VycmVkIHxcclxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgIFxcLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS12LS0tLS0vXHJcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XHJcbiAqICAgICAgICAgICAgICAgICAgICBiYWNrb2ZmICB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XHJcbiAqICAgICAgICAgICAgICAgICAgICBlbGFwc2VkICB8ICAgICAgICAgICAgICBzdGFydCgpIGNhbGxlZCAgICB8XHJcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXC0tLSBCQUNLT0ZGIDwtLS0tLS0tLS0tLS0tLS0tIEVSUk9SXHJcbiAqXHJcbiAqIFthbnkgc3RhdGVdIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPiBJTklUSUFMXHJcbiAqICAgICAgICAgICAgICAgc3RvcCgpIGNhbGxlZCBvclxyXG4gKiAgICAgICAgICAgICAgIGlkbGUgdGltZXIgZXhwaXJlZFxyXG4gKi9cclxudmFyIFBlcnNpc3RlbnRTdHJlYW1TdGF0ZTtcclxuKGZ1bmN0aW9uIChQZXJzaXN0ZW50U3RyZWFtU3RhdGUpIHtcclxuICAgIC8qKlxyXG4gICAgICogVGhlIHN0cmVhbWluZyBSUEMgaXMgbm90IHlldCBydW5uaW5nIGFuZCB0aGVyZSdzIG5vIGVycm9yIGNvbmRpdGlvbi5cclxuICAgICAqIENhbGxpbmcgc3RhcnQoKSB3aWxsIHN0YXJ0IHRoZSBzdHJlYW0gaW1tZWRpYXRlbHkgd2l0aG91dCBiYWNrb2ZmLlxyXG4gICAgICogV2hpbGUgaW4gdGhpcyBzdGF0ZSBpc1N0YXJ0ZWQoKSB3aWxsIHJldHVybiBmYWxzZS5cclxuICAgICAqL1xyXG4gICAgUGVyc2lzdGVudFN0cmVhbVN0YXRlW1BlcnNpc3RlbnRTdHJlYW1TdGF0ZVtcIkluaXRpYWxcIl0gPSAwXSA9IFwiSW5pdGlhbFwiO1xyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgc3RyZWFtIGlzIHN0YXJ0aW5nLCBlaXRoZXIgd2FpdGluZyBmb3IgYW4gYXV0aCB0b2tlbiBvciBmb3IgdGhlIHN0cmVhbVxyXG4gICAgICogdG8gc3VjY2Vzc2Z1bGx5IG9wZW4uIFdoaWxlIGluIHRoaXMgc3RhdGUsIGlzU3RhcnRlZCgpIHdpbGwgcmV0dXJuIHRydWUgYnV0XHJcbiAgICAgKiBpc09wZW4oKSB3aWxsIHJldHVybiBmYWxzZS5cclxuICAgICAqL1xyXG4gICAgUGVyc2lzdGVudFN0cmVhbVN0YXRlW1BlcnNpc3RlbnRTdHJlYW1TdGF0ZVtcIlN0YXJ0aW5nXCJdID0gMV0gPSBcIlN0YXJ0aW5nXCI7XHJcbiAgICAvKipcclxuICAgICAqIFRoZSBzdHJlYW1pbmcgUlBDIGlzIHVwIGFuZCBydW5uaW5nLiBSZXF1ZXN0cyBhbmQgcmVzcG9uc2VzIGNhbiBmbG93XHJcbiAgICAgKiBmcmVlbHkuIEJvdGggaXNTdGFydGVkKCkgYW5kIGlzT3BlbigpIHdpbGwgcmV0dXJuIHRydWUuXHJcbiAgICAgKi9cclxuICAgIFBlcnNpc3RlbnRTdHJlYW1TdGF0ZVtQZXJzaXN0ZW50U3RyZWFtU3RhdGVbXCJPcGVuXCJdID0gMl0gPSBcIk9wZW5cIjtcclxuICAgIC8qKlxyXG4gICAgICogVGhlIHN0cmVhbSBlbmNvdW50ZXJlZCBhbiBlcnJvci4gVGhlIG5leHQgc3RhcnQgYXR0ZW1wdCB3aWxsIGJhY2sgb2ZmLlxyXG4gICAgICogV2hpbGUgaW4gdGhpcyBzdGF0ZSBpc1N0YXJ0ZWQoKSB3aWxsIHJldHVybiBmYWxzZS5cclxuICAgICAqL1xyXG4gICAgUGVyc2lzdGVudFN0cmVhbVN0YXRlW1BlcnNpc3RlbnRTdHJlYW1TdGF0ZVtcIkVycm9yXCJdID0gM10gPSBcIkVycm9yXCI7XHJcbiAgICAvKipcclxuICAgICAqIEFuIGluLWJldHdlZW4gc3RhdGUgYWZ0ZXIgYW4gZXJyb3Igd2hlcmUgdGhlIHN0cmVhbSBpcyB3YWl0aW5nIGJlZm9yZVxyXG4gICAgICogcmUtc3RhcnRpbmcuIEFmdGVyIHdhaXRpbmcgaXMgY29tcGxldGUsIHRoZSBzdHJlYW0gd2lsbCB0cnkgdG8gb3Blbi5cclxuICAgICAqIFdoaWxlIGluIHRoaXMgc3RhdGUgaXNTdGFydGVkKCkgd2lsbCByZXR1cm4gdHJ1ZSBidXQgaXNPcGVuKCkgd2lsbCByZXR1cm5cclxuICAgICAqIGZhbHNlLlxyXG4gICAgICovXHJcbiAgICBQZXJzaXN0ZW50U3RyZWFtU3RhdGVbUGVyc2lzdGVudFN0cmVhbVN0YXRlW1wiQmFja29mZlwiXSA9IDRdID0gXCJCYWNrb2ZmXCI7XHJcbn0pKFBlcnNpc3RlbnRTdHJlYW1TdGF0ZSB8fCAoUGVyc2lzdGVudFN0cmVhbVN0YXRlID0ge30pKTtcclxuLyoqIFRoZSB0aW1lIGEgc3RyZWFtIHN0YXlzIG9wZW4gYWZ0ZXIgaXQgaXMgbWFya2VkIGlkbGUuICovXHJcbnZhciBJRExFX1RJTUVPVVRfTVMgPSA2MCAqIDEwMDA7XHJcbi8qKlxyXG4gKiBBIFBlcnNpc3RlbnRTdHJlYW0gaXMgYW4gYWJzdHJhY3QgYmFzZSBjbGFzcyB0aGF0IHJlcHJlc2VudHMgYSBzdHJlYW1pbmcgUlBDXHJcbiAqIHRvIHRoZSBGaXJlc3RvcmUgYmFja2VuZC4gSXQncyBidWlsdCBvbiB0b3Agb2YgdGhlIGNvbm5lY3Rpb25zIG93biBzdXBwb3J0XHJcbiAqIGZvciBzdHJlYW1pbmcgUlBDcywgYW5kIGFkZHMgc2V2ZXJhbCBjcml0aWNhbCBmZWF0dXJlcyBmb3Igb3VyIGNsaWVudHM6XHJcbiAqXHJcbiAqICAgLSBFeHBvbmVudGlhbCBiYWNrb2ZmIG9uIGZhaWx1cmVcclxuICogICAtIEF1dGhlbnRpY2F0aW9uIHZpYSBDcmVkZW50aWFsc1Byb3ZpZGVyXHJcbiAqICAgLSBEaXNwYXRjaGluZyBhbGwgY2FsbGJhY2tzIGludG8gdGhlIHNoYXJlZCB3b3JrZXIgcXVldWVcclxuICogICAtIENsb3NpbmcgaWRsZSBzdHJlYW1zIGFmdGVyIDYwIHNlY29uZHMgb2YgaW5hY3Rpdml0eVxyXG4gKlxyXG4gKiBTdWJjbGFzc2VzIG9mIFBlcnNpc3RlbnRTdHJlYW0gaW1wbGVtZW50IHNlcmlhbGl6YXRpb24gb2YgbW9kZWxzIHRvIGFuZFxyXG4gKiBmcm9tIHRoZSBKU09OIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBwcm90b2NvbCBidWZmZXJzIGZvciBhIHNwZWNpZmljXHJcbiAqIHN0cmVhbWluZyBSUEMuXHJcbiAqXHJcbiAqICMjIFN0YXJ0aW5nIGFuZCBTdG9wcGluZ1xyXG4gKlxyXG4gKiBTdHJlYW1pbmcgUlBDcyBhcmUgc3RhdGVmdWwgYW5kIG5lZWQgdG8gYmUgc3RhcnQoKWVkIGJlZm9yZSBtZXNzYWdlcyBjYW5cclxuICogYmUgc2VudCBhbmQgcmVjZWl2ZWQuIFRoZSBQZXJzaXN0ZW50U3RyZWFtIHdpbGwgY2FsbCB0aGUgb25PcGVuKCkgZnVuY3Rpb25cclxuICogb2YgdGhlIGxpc3RlbmVyIG9uY2UgdGhlIHN0cmVhbSBpcyByZWFkeSB0byBhY2NlcHQgcmVxdWVzdHMuXHJcbiAqXHJcbiAqIFNob3VsZCBhIHN0YXJ0KCkgZmFpbCwgUGVyc2lzdGVudFN0cmVhbSB3aWxsIGNhbGwgdGhlIHJlZ2lzdGVyZWQgb25DbG9zZSgpXHJcbiAqIGxpc3RlbmVyIHdpdGggYSBGaXJlc3RvcmVFcnJvciBpbmRpY2F0aW5nIHdoYXQgd2VudCB3cm9uZy5cclxuICpcclxuICogQSBQZXJzaXN0ZW50U3RyZWFtIGNhbiBiZSBzdGFydGVkIGFuZCBzdG9wcGVkIHJlcGVhdGVkbHkuXHJcbiAqXHJcbiAqIEdlbmVyaWMgdHlwZXM6XHJcbiAqICBTZW5kVHlwZTogVGhlIHR5cGUgb2YgdGhlIG91dGdvaW5nIG1lc3NhZ2Ugb2YgdGhlIHVuZGVybHlpbmdcclxuICogICAgY29ubmVjdGlvbiBzdHJlYW1cclxuICogIFJlY2VpdmVUeXBlOiBUaGUgdHlwZSBvZiB0aGUgaW5jb21pbmcgbWVzc2FnZSBvZiB0aGUgdW5kZXJseWluZ1xyXG4gKiAgICBjb25uZWN0aW9uIHN0cmVhbVxyXG4gKiAgTGlzdGVuZXJUeXBlOiBUaGUgdHlwZSBvZiB0aGUgbGlzdGVuZXIgdGhhdCB3aWxsIGJlIHVzZWQgZm9yIGNhbGxiYWNrc1xyXG4gKi9cclxudmFyIFBlcnNpc3RlbnRTdHJlYW0gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBQZXJzaXN0ZW50U3RyZWFtKHF1ZXVlLCBjb25uZWN0aW9uVGltZXJJZCwgaWRsZVRpbWVySWQsIGNvbm5lY3Rpb24sIGNyZWRlbnRpYWxzUHJvdmlkZXIsIGxpc3RlbmVyKSB7XHJcbiAgICAgICAgdGhpcy5xdWV1ZSA9IHF1ZXVlO1xyXG4gICAgICAgIHRoaXMuaWRsZVRpbWVySWQgPSBpZGxlVGltZXJJZDtcclxuICAgICAgICB0aGlzLmNvbm5lY3Rpb24gPSBjb25uZWN0aW9uO1xyXG4gICAgICAgIHRoaXMuY3JlZGVudGlhbHNQcm92aWRlciA9IGNyZWRlbnRpYWxzUHJvdmlkZXI7XHJcbiAgICAgICAgdGhpcy5saXN0ZW5lciA9IGxpc3RlbmVyO1xyXG4gICAgICAgIHRoaXMuc3RhdGUgPSBQZXJzaXN0ZW50U3RyZWFtU3RhdGUuSW5pdGlhbDtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBBIGNsb3NlIGNvdW50IHRoYXQncyBpbmNyZW1lbnRlZCBldmVyeSB0aW1lIHRoZSBzdHJlYW0gaXMgY2xvc2VkOyB1c2VkIGJ5XHJcbiAgICAgICAgICogZ2V0Q2xvc2VHdWFyZGVkRGlzcGF0Y2hlcigpIHRvIGludmFsaWRhdGUgY2FsbGJhY2tzIHRoYXQgaGFwcGVuIGFmdGVyXHJcbiAgICAgICAgICogY2xvc2UuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5jbG9zZUNvdW50ID0gMDtcclxuICAgICAgICB0aGlzLmlkbGVUaW1lciA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5zdHJlYW0gPSBudWxsO1xyXG4gICAgICAgIHRoaXMuYmFja29mZiA9IG5ldyBFeHBvbmVudGlhbEJhY2tvZmYocXVldWUsIGNvbm5lY3Rpb25UaW1lcklkKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHN0YXJ0KCkgaGFzIGJlZW4gY2FsbGVkIGFuZCBubyBlcnJvciBoYXMgb2NjdXJyZWQuIFRydWVcclxuICAgICAqIGluZGljYXRlcyB0aGUgc3RyZWFtIGlzIG9wZW4gb3IgaW4gdGhlIHByb2Nlc3Mgb2Ygb3BlbmluZyAod2hpY2hcclxuICAgICAqIGVuY29tcGFzc2VzIHJlc3BlY3RpbmcgYmFja29mZiwgZ2V0dGluZyBhdXRoIHRva2VucywgYW5kIHN0YXJ0aW5nIHRoZVxyXG4gICAgICogYWN0dWFsIFJQQykuIFVzZSBpc09wZW4oKSB0byBkZXRlcm1pbmUgaWYgdGhlIHN0cmVhbSBpcyBvcGVuIGFuZCByZWFkeSBmb3JcclxuICAgICAqIG91dGJvdW5kIHJlcXVlc3RzLlxyXG4gICAgICovXHJcbiAgICBQZXJzaXN0ZW50U3RyZWFtLnByb3RvdHlwZS5pc1N0YXJ0ZWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuICh0aGlzLnN0YXRlID09PSBQZXJzaXN0ZW50U3RyZWFtU3RhdGUuU3RhcnRpbmcgfHxcclxuICAgICAgICAgICAgdGhpcy5zdGF0ZSA9PT0gUGVyc2lzdGVudFN0cmVhbVN0YXRlLk9wZW4gfHxcclxuICAgICAgICAgICAgdGhpcy5zdGF0ZSA9PT0gUGVyc2lzdGVudFN0cmVhbVN0YXRlLkJhY2tvZmYpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoZSB1bmRlcmx5aW5nIFJQQyBpcyBvcGVuICh0aGUgb25PcGVuKCkgbGlzdGVuZXIgaGFzIGJlZW5cclxuICAgICAqIGNhbGxlZCkgYW5kIHRoZSBzdHJlYW0gaXMgcmVhZHkgZm9yIG91dGJvdW5kIHJlcXVlc3RzLlxyXG4gICAgICovXHJcbiAgICBQZXJzaXN0ZW50U3RyZWFtLnByb3RvdHlwZS5pc09wZW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdGUgPT09IFBlcnNpc3RlbnRTdHJlYW1TdGF0ZS5PcGVuO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogU3RhcnRzIHRoZSBSUEMuIE9ubHkgYWxsb3dlZCBpZiBpc1N0YXJ0ZWQoKSByZXR1cm5zIGZhbHNlLiBUaGUgc3RyZWFtIGlzXHJcbiAgICAgKiBub3QgaW1tZWRpYXRlbHkgcmVhZHkgZm9yIHVzZTogb25PcGVuKCkgd2lsbCBiZSBpbnZva2VkIHdoZW4gdGhlIFJQQyBpc1xyXG4gICAgICogcmVhZHkgZm9yIG91dGJvdW5kIHJlcXVlc3RzLCBhdCB3aGljaCBwb2ludCBpc09wZW4oKSB3aWxsIHJldHVybiB0cnVlLlxyXG4gICAgICpcclxuICAgICAqIFdoZW4gc3RhcnQgcmV0dXJucywgaXNTdGFydGVkKCkgd2lsbCByZXR1cm4gdHJ1ZS5cclxuICAgICAqL1xyXG4gICAgUGVyc2lzdGVudFN0cmVhbS5wcm90b3R5cGUuc3RhcnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUgPT09IFBlcnNpc3RlbnRTdHJlYW1TdGF0ZS5FcnJvcikge1xyXG4gICAgICAgICAgICB0aGlzLnBlcmZvcm1CYWNrb2ZmKCk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgYXNzZXJ0KHRoaXMuc3RhdGUgPT09IFBlcnNpc3RlbnRTdHJlYW1TdGF0ZS5Jbml0aWFsLCAnQWxyZWFkeSBzdGFydGVkJyk7XHJcbiAgICAgICAgdGhpcy5hdXRoKCk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBTdG9wcyB0aGUgUlBDLiBUaGlzIGNhbGwgaXMgaWRlbXBvdGVudCBhbmQgYWxsb3dlZCByZWdhcmRsZXNzIG9mIHRoZVxyXG4gICAgICogY3VycmVudCBpc1N0YXJ0ZWQoKSBzdGF0ZS5cclxuICAgICAqXHJcbiAgICAgKiBXaGVuIHN0b3AgcmV0dXJucywgaXNTdGFydGVkKCkgYW5kIGlzT3BlbigpIHdpbGwgYm90aCByZXR1cm4gZmFsc2UuXHJcbiAgICAgKi9cclxuICAgIFBlcnNpc3RlbnRTdHJlYW0ucHJvdG90eXBlLnN0b3AgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRzbGliLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHNsaWIuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuaXNTdGFydGVkKCkpIHJldHVybiBbMyAvKmJyZWFrKi8sIDJdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmNsb3NlKFBlcnNpc3RlbnRTdHJlYW1TdGF0ZS5Jbml0aWFsKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLmxhYmVsID0gMjtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6IHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBBZnRlciBhbiBlcnJvciB0aGUgc3RyZWFtIHdpbGwgdXN1YWxseSBiYWNrIG9mZiBvbiB0aGUgbmV4dCBhdHRlbXB0IHRvXHJcbiAgICAgKiBzdGFydCBpdC4gSWYgdGhlIGVycm9yIHdhcnJhbnRzIGFuIGltbWVkaWF0ZSByZXN0YXJ0IG9mIHRoZSBzdHJlYW0sIHRoZVxyXG4gICAgICogc2VuZGVyIGNhbiB1c2UgdGhpcyB0byBpbmRpY2F0ZSB0aGF0IHRoZSByZWNlaXZlciBzaG91bGQgbm90IGJhY2sgb2ZmLlxyXG4gICAgICpcclxuICAgICAqIEVhY2ggZXJyb3Igd2lsbCBjYWxsIHRoZSBvbkNsb3NlKCkgbGlzdGVuZXIuIFRoYXQgZnVuY3Rpb24gY2FuIGRlY2lkZSB0b1xyXG4gICAgICogaW5oaWJpdCBiYWNrb2ZmIGlmIHJlcXVpcmVkLlxyXG4gICAgICovXHJcbiAgICBQZXJzaXN0ZW50U3RyZWFtLnByb3RvdHlwZS5pbmhpYml0QmFja29mZiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBhc3NlcnQoIXRoaXMuaXNTdGFydGVkKCksICdDYW4gb25seSBpbmhpYml0IGJhY2tvZmYgaW4gYSBzdG9wcGVkIHN0YXRlJyk7XHJcbiAgICAgICAgdGhpcy5zdGF0ZSA9IFBlcnNpc3RlbnRTdHJlYW1TdGF0ZS5Jbml0aWFsO1xyXG4gICAgICAgIHRoaXMuYmFja29mZi5yZXNldCgpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogTWFya3MgdGhpcyBzdHJlYW0gYXMgaWRsZS4gSWYgbm8gZnVydGhlciBhY3Rpb25zIGFyZSBwZXJmb3JtZWQgb24gdGhlXHJcbiAgICAgKiBzdHJlYW0gZm9yIG9uZSBtaW51dGUsIHRoZSBzdHJlYW0gd2lsbCBhdXRvbWF0aWNhbGx5IGNsb3NlIGl0c2VsZiBhbmRcclxuICAgICAqIG5vdGlmeSB0aGUgc3RyZWFtJ3Mgb25DbG9zZSgpIGhhbmRsZXIgd2l0aCBTdGF0dXMuT0suIFRoZSBzdHJlYW0gd2lsbCB0aGVuXHJcbiAgICAgKiBiZSBpbiBhICFpc1N0YXJ0ZWQoKSBzdGF0ZSwgcmVxdWlyaW5nIHRoZSBjYWxsZXIgdG8gc3RhcnQgdGhlIHN0cmVhbSBhZ2FpblxyXG4gICAgICogYmVmb3JlIGZ1cnRoZXIgdXNlLlxyXG4gICAgICpcclxuICAgICAqIE9ubHkgc3RyZWFtcyB0aGF0IGFyZSBpbiBzdGF0ZSAnT3BlbicgY2FuIGJlIG1hcmtlZCBpZGxlLCBhcyBhbGwgb3RoZXJcclxuICAgICAqIHN0YXRlcyBpbXBseSBwZW5kaW5nIG5ldHdvcmsgb3BlcmF0aW9ucy5cclxuICAgICAqL1xyXG4gICAgUGVyc2lzdGVudFN0cmVhbS5wcm90b3R5cGUubWFya0lkbGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICAvLyBTdGFydHMgdGhlIGlkbGUgdGltZSBpZiB3ZSBhcmUgaW4gc3RhdGUgJ09wZW4nIGFuZCBhcmUgbm90IHlldCBhbHJlYWR5XHJcbiAgICAgICAgLy8gcnVubmluZyBhIHRpbWVyIChpbiB3aGljaCBjYXNlIHRoZSBwcmV2aW91cyBpZGxlIHRpbWVvdXQgc3RpbGwgYXBwbGllcykuXHJcbiAgICAgICAgaWYgKHRoaXMuaXNPcGVuKCkgJiYgdGhpcy5pZGxlVGltZXIgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgdGhpcy5pZGxlVGltZXIgPSB0aGlzLnF1ZXVlLmVucXVldWVBZnRlckRlbGF5KHRoaXMuaWRsZVRpbWVySWQsIElETEVfVElNRU9VVF9NUywgZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMuaGFuZGxlSWRsZUNsb3NlVGltZXIoKTsgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKiBTZW5kcyBhIG1lc3NhZ2UgdG8gdGhlIHVuZGVybHlpbmcgc3RyZWFtLiAqL1xyXG4gICAgUGVyc2lzdGVudFN0cmVhbS5wcm90b3R5cGUuc2VuZFJlcXVlc3QgPSBmdW5jdGlvbiAobXNnKSB7XHJcbiAgICAgICAgdGhpcy5jYW5jZWxJZGxlQ2hlY2soKTtcclxuICAgICAgICB0aGlzLnN0cmVhbS5zZW5kKG1zZyk7XHJcbiAgICB9O1xyXG4gICAgLyoqIENhbGxlZCBieSB0aGUgaWRsZSB0aW1lciB3aGVuIHRoZSBzdHJlYW0gc2hvdWxkIGNsb3NlIGR1ZSB0byBpbmFjdGl2aXR5LiAqL1xyXG4gICAgUGVyc2lzdGVudFN0cmVhbS5wcm90b3R5cGUuaGFuZGxlSWRsZUNsb3NlVGltZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRzbGliLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHNsaWIuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pc09wZW4oKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFdoZW4gdGltaW5nIG91dCBhbiBpZGxlIHN0cmVhbSB0aGVyZSdzIG5vIHJlYXNvbiB0byBmb3JjZSB0aGUgc3RyZWFtIGludG8gYmFja29mZiB3aGVuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gaXQgcmVzdGFydHMgc28gc2V0IHRoZSBzdHJlYW0gc3RhdGUgdG8gSW5pdGlhbCBpbnN0ZWFkIG9mIEVycm9yLlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0aGlzLmNsb3NlKFBlcnNpc3RlbnRTdHJlYW1TdGF0ZS5Jbml0aWFsKV07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKiBNYXJrcyB0aGUgc3RyZWFtIGFzIGFjdGl2ZSBhZ2Fpbi4gKi9cclxuICAgIFBlcnNpc3RlbnRTdHJlYW0ucHJvdG90eXBlLmNhbmNlbElkbGVDaGVjayA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAodGhpcy5pZGxlVGltZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5pZGxlVGltZXIuY2FuY2VsKCk7XHJcbiAgICAgICAgICAgIHRoaXMuaWRsZVRpbWVyID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBDbG9zZXMgdGhlIHN0cmVhbSBhbmQgY2xlYW5zIHVwIGFzIG5lY2Vzc2FyeTpcclxuICAgICAqXHJcbiAgICAgKiAqIGNsb3NlcyB0aGUgdW5kZXJseWluZyBHUlBDIHN0cmVhbTtcclxuICAgICAqICogY2FsbHMgdGhlIG9uQ2xvc2UgaGFuZGxlciB3aXRoIHRoZSBnaXZlbiAnZXJyb3InO1xyXG4gICAgICogKiBzZXRzIGludGVybmFsIHN0cmVhbSBzdGF0ZSB0byAnZmluYWxTdGF0ZSc7XHJcbiAgICAgKiAqIGFkanVzdHMgdGhlIGJhY2tvZmYgdGltZXIgYmFzZWQgb24gdGhlIGVycm9yXHJcbiAgICAgKlxyXG4gICAgICogQSBuZXcgc3RyZWFtIGNhbiBiZSBvcGVuZWQgYnkgY2FsbGluZyBzdGFydCgpLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBmaW5hbFN0YXRlIHRoZSBpbnRlbmRlZCBzdGF0ZSBvZiB0aGUgc3RyZWFtIGFmdGVyIGNsb3NpbmcuXHJcbiAgICAgKiBAcGFyYW0gZXJyb3IgdGhlIGVycm9yIHRoZSBjb25uZWN0aW9uIHdhcyBjbG9zZWQgd2l0aC5cclxuICAgICAqL1xyXG4gICAgUGVyc2lzdGVudFN0cmVhbS5wcm90b3R5cGUuY2xvc2UgPSBmdW5jdGlvbiAoZmluYWxTdGF0ZSwgZXJyb3IkMSkge1xyXG4gICAgICAgIHJldHVybiB0c2xpYi5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXJ0KHRoaXMuaXNTdGFydGVkKCksICdPbmx5IHN0YXJ0ZWQgc3RyZWFtcyBzaG91bGQgYmUgY2xvc2VkLicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhc3NlcnQoZmluYWxTdGF0ZSA9PT0gUGVyc2lzdGVudFN0cmVhbVN0YXRlLkVycm9yIHx8IGlzTnVsbE9yVW5kZWZpbmVkKGVycm9yJDEpLCBcIkNhbid0IHByb3ZpZGUgYW4gZXJyb3Igd2hlbiBub3QgaW4gYW4gZXJyb3Igc3RhdGUuXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBDYW5jZWwgYW55IG91dHN0YW5kaW5nIHRpbWVycyAodGhleSdyZSBndWFyYW50ZWVkIG5vdCB0byBleGVjdXRlKS5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jYW5jZWxJZGxlQ2hlY2soKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5iYWNrb2ZmLmNhbmNlbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBJbnZhbGlkYXRlcyBhbnkgc3RyZWFtLXJlbGF0ZWQgY2FsbGJhY2tzIChlLmcuIGZyb20gYXV0aCBvciB0aGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdW5kZXJseWluZyBzdHJlYW0pLCBndWFyYW50ZWVpbmcgdGhleSB3b24ndCBleGVjdXRlLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlQ291bnQrKztcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZpbmFsU3RhdGUgIT09IFBlcnNpc3RlbnRTdHJlYW1TdGF0ZS5FcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhpcyBpcyBhbiBpbnRlbnRpb25hbCBjbG9zZSBlbnN1cmUgd2UgZG9uJ3QgZGVsYXkgb3VyIG5leHQgY29ubmVjdGlvbiBhdHRlbXB0LlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5iYWNrb2ZmLnJlc2V0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoZXJyb3IkMSAmJiBlcnJvciQxLmNvZGUgPT09IENvZGUuUkVTT1VSQ0VfRVhIQVVTVEVEKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBMb2cgdGhlIGVycm9yLiAoUHJvYmFibHkgZWl0aGVyICdxdW90YSBleGNlZWRlZCcgb3IgJ21heCBxdWV1ZSBsZW5ndGggcmVhY2hlZCcuKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3IoZXJyb3IkMS50b1N0cmluZygpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yKCdVc2luZyBtYXhpbXVtIGJhY2tvZmYgZGVsYXkgdG8gcHJldmVudCBvdmVybG9hZGluZyB0aGUgYmFja2VuZC4nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYmFja29mZi5yZXNldFRvTWF4KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoZXJyb3IkMSAmJiBlcnJvciQxLmNvZGUgPT09IENvZGUuVU5BVVRIRU5USUNBVEVEKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBcInVuYXV0aGVudGljYXRlZFwiIGVycm9yIG1lYW5zIHRoZSB0b2tlbiB3YXMgcmVqZWN0ZWQuIFRyeSBmb3JjZSByZWZyZXNoaW5nIGl0IGluIGNhc2UgaXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGp1c3QgZXhwaXJlZC5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3JlZGVudGlhbHNQcm92aWRlci5pbnZhbGlkYXRlVG9rZW4oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBDbGVhbiB1cCB0aGUgdW5kZXJseWluZyBzdHJlYW0gYmVjYXVzZSB3ZSBhcmUgbm8gbG9uZ2VyIGludGVyZXN0ZWQgaW4gZXZlbnRzLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5zdHJlYW0gIT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudGVhckRvd24oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RyZWFtLmNsb3NlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0cmVhbSA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhpcyBzdGF0ZSBtdXN0IGJlIGFzc2lnbmVkIGJlZm9yZSBjYWxsaW5nIG9uQ2xvc2UoKSB0byBhbGxvdyB0aGUgY2FsbGJhY2sgdG9cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gaW5oaWJpdCBiYWNrb2ZmIG9yIG90aGVyd2lzZSBtYW5pcHVsYXRlIHRoZSBzdGF0ZSBpbiBpdHMgbm9uLXN0YXJ0ZWQgc3RhdGUuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBmaW5hbFN0YXRlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBOb3RpZnkgdGhlIGxpc3RlbmVyIHRoYXQgdGhlIHN0cmVhbSBjbG9zZWQuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMubGlzdGVuZXIub25DbG9zZShlcnJvciQxKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBOb3RpZnkgdGhlIGxpc3RlbmVyIHRoYXQgdGhlIHN0cmVhbSBjbG9zZWQuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIENhbiBiZSBvdmVycmlkZGVuIHRvIHBlcmZvcm0gYWRkaXRpb25hbCBjbGVhbnVwIGJlZm9yZSB0aGUgc3RyZWFtIGlzIGNsb3NlZC5cclxuICAgICAqIENhbGxpbmcgc3VwZXIudGVhckRvd24oKSBpcyBub3QgcmVxdWlyZWQuXHJcbiAgICAgKi9cclxuICAgIFBlcnNpc3RlbnRTdHJlYW0ucHJvdG90eXBlLnRlYXJEb3duID0gZnVuY3Rpb24gKCkgeyB9O1xyXG4gICAgUGVyc2lzdGVudFN0cmVhbS5wcm90b3R5cGUuYXV0aCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIGFzc2VydCh0aGlzLnN0YXRlID09PSBQZXJzaXN0ZW50U3RyZWFtU3RhdGUuSW5pdGlhbCwgJ011c3QgYmUgaW4gaW5pdGlhbCBzdGF0ZSB0byBhdXRoJyk7XHJcbiAgICAgICAgdGhpcy5zdGF0ZSA9IFBlcnNpc3RlbnRTdHJlYW1TdGF0ZS5TdGFydGluZztcclxuICAgICAgICB2YXIgZGlzcGF0Y2hJZk5vdENsb3NlZCA9IHRoaXMuZ2V0Q2xvc2VHdWFyZGVkRGlzcGF0Y2hlcih0aGlzLmNsb3NlQ291bnQpO1xyXG4gICAgICAgIC8vIFRPRE8obWlrZWxlaGVuKTogSnVzdCB1c2UgZGlzcGF0Y2hJZk5vdENsb3NlZCwgYnV0IHNlZSBUT0RPIGJlbG93LlxyXG4gICAgICAgIHZhciBjbG9zZUNvdW50ID0gdGhpcy5jbG9zZUNvdW50O1xyXG4gICAgICAgIHRoaXMuY3JlZGVudGlhbHNQcm92aWRlci5nZXRUb2tlbigpLnRoZW4oZnVuY3Rpb24gKHRva2VuKSB7XHJcbiAgICAgICAgICAgIC8vIFN0cmVhbSBjYW4gYmUgc3RvcHBlZCB3aGlsZSB3YWl0aW5nIGZvciBhdXRoZW50aWNhdGlvbi5cclxuICAgICAgICAgICAgLy8gVE9ETyhtaWtlbGVoZW4pOiBXZSByZWFsbHkgc2hvdWxkIGp1c3QgdXNlIGRpc3BhdGNoSWZOb3RDbG9zZWRcclxuICAgICAgICAgICAgLy8gYW5kIGxldCB0aGlzIGRpc3BhdGNoIG9udG8gdGhlIHF1ZXVlLCBidXQgdGhhdCBvcGVuZWQgYSBzcGVjIHRlc3QgY2FuXHJcbiAgICAgICAgICAgIC8vIG9mIHdvcm1zIHRoYXQgSSBkb24ndCB3YW50IHRvIGRlYWwgd2l0aCBpbiB0aGlzIFBSLlxyXG4gICAgICAgICAgICBpZiAoX3RoaXMuY2xvc2VDb3VudCA9PT0gY2xvc2VDb3VudCkge1xyXG4gICAgICAgICAgICAgICAgLy8gTm9ybWFsbHkgd2UnZCBoYXZlIHRvIHNjaGVkdWxlIHRoZSBjYWxsYmFjayBvbiB0aGUgQXN5bmNRdWV1ZS5cclxuICAgICAgICAgICAgICAgIC8vIEhvd2V2ZXIsIHRoZSBmb2xsb3dpbmcgY2FsbHMgYXJlIHNhZmUgdG8gYmUgY2FsbGVkIG91dHNpZGUgdGhlXHJcbiAgICAgICAgICAgICAgICAvLyBBc3luY1F1ZXVlIHNpbmNlIHRoZXkgZG9uJ3QgY2hhaW4gYXN5bmNocm9ub3VzIGNhbGxzXHJcbiAgICAgICAgICAgICAgICBfdGhpcy5zdGFydFN0cmVhbSh0b2tlbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgZGlzcGF0Y2hJZk5vdENsb3NlZChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcnBjRXJyb3IgPSBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5VTktOT1dOLCAnRmV0Y2hpbmcgYXV0aCB0b2tlbiBmYWlsZWQ6ICcgKyBlcnJvci5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5oYW5kbGVTdHJlYW1DbG9zZShycGNFcnJvcik7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIFBlcnNpc3RlbnRTdHJlYW0ucHJvdG90eXBlLnN0YXJ0U3RyZWFtID0gZnVuY3Rpb24gKHRva2VuKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBhc3NlcnQodGhpcy5zdGF0ZSA9PT0gUGVyc2lzdGVudFN0cmVhbVN0YXRlLlN0YXJ0aW5nLCAnVHJ5aW5nIHRvIHN0YXJ0IHN0cmVhbSBpbiBhIG5vbi1zdGFydGluZyBzdGF0ZScpO1xyXG4gICAgICAgIHZhciBkaXNwYXRjaElmTm90Q2xvc2VkID0gdGhpcy5nZXRDbG9zZUd1YXJkZWREaXNwYXRjaGVyKHRoaXMuY2xvc2VDb3VudCk7XHJcbiAgICAgICAgdGhpcy5zdHJlYW0gPSB0aGlzLnN0YXJ0UnBjKHRva2VuKTtcclxuICAgICAgICB0aGlzLnN0cmVhbS5vbk9wZW4oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBkaXNwYXRjaElmTm90Q2xvc2VkKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGFzc2VydChfdGhpcy5zdGF0ZSA9PT0gUGVyc2lzdGVudFN0cmVhbVN0YXRlLlN0YXJ0aW5nLCAnRXhwZWN0ZWQgc3RyZWFtIHRvIGJlIGluIHN0YXRlIFN0YXJ0aW5nLCBidXQgd2FzICcgKyBfdGhpcy5zdGF0ZSk7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5zdGF0ZSA9IFBlcnNpc3RlbnRTdHJlYW1TdGF0ZS5PcGVuO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLmxpc3RlbmVyLm9uT3BlbigpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLnN0cmVhbS5vbkNsb3NlKGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgICAgICBkaXNwYXRjaElmTm90Q2xvc2VkKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5oYW5kbGVTdHJlYW1DbG9zZShlcnJvcik7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuc3RyZWFtLm9uTWVzc2FnZShmdW5jdGlvbiAobXNnKSB7XHJcbiAgICAgICAgICAgIGRpc3BhdGNoSWZOb3RDbG9zZWQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLm9uTWVzc2FnZShtc2cpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBQZXJzaXN0ZW50U3RyZWFtLnByb3RvdHlwZS5wZXJmb3JtQmFja29mZiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIGFzc2VydCh0aGlzLnN0YXRlID09PSBQZXJzaXN0ZW50U3RyZWFtU3RhdGUuRXJyb3IsICdTaG91bGQgb25seSBwZXJmb3JtIGJhY2tvZmYgd2hlbiBpbiBFcnJvciBzdGF0ZScpO1xyXG4gICAgICAgIHRoaXMuc3RhdGUgPSBQZXJzaXN0ZW50U3RyZWFtU3RhdGUuQmFja29mZjtcclxuICAgICAgICB0aGlzLmJhY2tvZmYuYmFja29mZkFuZFJ1bihmdW5jdGlvbiAoKSB7IHJldHVybiB0c2xpYi5fX2F3YWl0ZXIoX3RoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYi5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIGFzc2VydCh0aGlzLnN0YXRlID09PSBQZXJzaXN0ZW50U3RyZWFtU3RhdGUuQmFja29mZiwgJ0JhY2tvZmYgZWxhcHNlZCBidXQgc3RhdGUgaXMgbm93OiAnICsgdGhpcy5zdGF0ZSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXRlID0gUGVyc2lzdGVudFN0cmVhbVN0YXRlLkluaXRpYWw7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0KCk7XHJcbiAgICAgICAgICAgICAgICBhc3NlcnQodGhpcy5pc1N0YXJ0ZWQoKSwgJ1BlcnNpc3RlbnRTdHJlYW0gc2hvdWxkIGhhdmUgc3RhcnRlZCcpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTsgfSk7XHJcbiAgICB9O1xyXG4gICAgLy8gVmlzaWJsZSBmb3IgdGVzdHNcclxuICAgIFBlcnNpc3RlbnRTdHJlYW0ucHJvdG90eXBlLmhhbmRsZVN0cmVhbUNsb3NlID0gZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICAgICAgYXNzZXJ0KHRoaXMuaXNTdGFydGVkKCksIFwiQ2FuJ3QgaGFuZGxlIHNlcnZlciBjbG9zZSBvbiBub24tc3RhcnRlZCBzdHJlYW1cIik7XHJcbiAgICAgICAgZGVidWcoTE9HX1RBRyQ1LCBcImNsb3NlIHdpdGggZXJyb3I6IFwiICsgZXJyb3IpO1xyXG4gICAgICAgIHRoaXMuc3RyZWFtID0gbnVsbDtcclxuICAgICAgICAvLyBJbiB0aGVvcnkgdGhlIHN0cmVhbSBjb3VsZCBjbG9zZSBjbGVhbmx5LCBob3dldmVyLCBpbiBvdXIgY3VycmVudCBtb2RlbFxyXG4gICAgICAgIC8vIHdlIG5ldmVyIGV4cGVjdCB0aGlzIHRvIGhhcHBlbiBiZWNhdXNlIGlmIHdlIHN0b3AgYSBzdHJlYW0gb3Vyc2VsdmVzLFxyXG4gICAgICAgIC8vIHRoaXMgY2FsbGJhY2sgd2lsbCBuZXZlciBiZSBjYWxsZWQuIFRvIHByZXZlbnQgY2FzZXMgd2hlcmUgd2UgcmV0cnlcclxuICAgICAgICAvLyB3aXRob3V0IGEgYmFja29mZiBhY2NpZGVudGFsbHksIHdlIHNldCB0aGUgc3RyZWFtIHRvIGVycm9yIGluIGFsbCBjYXNlcy5cclxuICAgICAgICByZXR1cm4gdGhpcy5jbG9zZShQZXJzaXN0ZW50U3RyZWFtU3RhdGUuRXJyb3IsIGVycm9yKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgYSBcImRpc3BhdGNoZXJcIiBmdW5jdGlvbiB0aGF0IGRpc3BhdGNoZXMgb3BlcmF0aW9ucyBvbnRvIHRoZVxyXG4gICAgICogQXN5bmNRdWV1ZSBidXQgb25seSBydW5zIHRoZW0gaWYgY2xvc2VDb3VudCByZW1haW5zIHVuY2hhbmdlZC4gVGhpcyBhbGxvd3NcclxuICAgICAqIHVzIHRvIHR1cm4gYXV0aCAvIHN0cmVhbSBjYWxsYmFja3MgaW50byBuby1vcHMgaWYgdGhlIHN0cmVhbSBpcyBjbG9zZWQgL1xyXG4gICAgICogcmUtb3BlbmVkLCBldGMuXHJcbiAgICAgKi9cclxuICAgIFBlcnNpc3RlbnRTdHJlYW0ucHJvdG90eXBlLmdldENsb3NlR3VhcmRlZERpc3BhdGNoZXIgPSBmdW5jdGlvbiAoc3RhcnRDbG9zZUNvdW50KSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGZuKSB7XHJcbiAgICAgICAgICAgIF90aGlzLnF1ZXVlLmVucXVldWVBbmRGb3JnZXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKF90aGlzLmNsb3NlQ291bnQgPT09IHN0YXJ0Q2xvc2VDb3VudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmbigpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVidWcoTE9HX1RBRyQ1LCAnc3RyZWFtIGNhbGxiYWNrIHNraXBwZWQgYnkgZ2V0Q2xvc2VHdWFyZGVkRGlzcGF0Y2hlci4nKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFBlcnNpc3RlbnRTdHJlYW07XHJcbn0oKSk7XHJcbi8qKlxyXG4gKiBBIFBlcnNpc3RlbnRTdHJlYW0gdGhhdCBpbXBsZW1lbnRzIHRoZSBMaXN0ZW4gUlBDLlxyXG4gKlxyXG4gKiBPbmNlIHRoZSBMaXN0ZW4gc3RyZWFtIGhhcyBjYWxsZWQgdGhlIG9uT3BlbigpIGxpc3RlbmVyLCBhbnkgbnVtYmVyIG9mXHJcbiAqIGxpc3RlbigpIGFuZCB1bmxpc3RlbigpIGNhbGxzIGNhbiBiZSBtYWRlIHRvIGNvbnRyb2wgd2hhdCBjaGFuZ2VzIHdpbGwgYmVcclxuICogc2VudCBmcm9tIHRoZSBzZXJ2ZXIgZm9yIExpc3RlblJlc3BvbnNlcy5cclxuICovXHJcbnZhciBQZXJzaXN0ZW50TGlzdGVuU3RyZWFtID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgdHNsaWIuX19leHRlbmRzKFBlcnNpc3RlbnRMaXN0ZW5TdHJlYW0sIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBQZXJzaXN0ZW50TGlzdGVuU3RyZWFtKHF1ZXVlLCBjb25uZWN0aW9uLCBjcmVkZW50aWFscywgc2VyaWFsaXplciwgbGlzdGVuZXIpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBxdWV1ZSwgVGltZXJJZC5MaXN0ZW5TdHJlYW1Db25uZWN0aW9uQmFja29mZiwgVGltZXJJZC5MaXN0ZW5TdHJlYW1JZGxlLCBjb25uZWN0aW9uLCBjcmVkZW50aWFscywgbGlzdGVuZXIpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMuc2VyaWFsaXplciA9IHNlcmlhbGl6ZXI7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgUGVyc2lzdGVudExpc3RlblN0cmVhbS5wcm90b3R5cGUuc3RhcnRScGMgPSBmdW5jdGlvbiAodG9rZW4pIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jb25uZWN0aW9uLm9wZW5TdHJlYW0oJ0xpc3RlbicsIHRva2VuKTtcclxuICAgIH07XHJcbiAgICBQZXJzaXN0ZW50TGlzdGVuU3RyZWFtLnByb3RvdHlwZS5vbk1lc3NhZ2UgPSBmdW5jdGlvbiAod2F0Y2hDaGFuZ2VQcm90bykge1xyXG4gICAgICAgIC8vIEEgc3VjY2Vzc2Z1bCByZXNwb25zZSBtZWFucyB0aGUgc3RyZWFtIGlzIGhlYWx0aHlcclxuICAgICAgICB0aGlzLmJhY2tvZmYucmVzZXQoKTtcclxuICAgICAgICB2YXIgd2F0Y2hDaGFuZ2UgPSB0aGlzLnNlcmlhbGl6ZXIuZnJvbVdhdGNoQ2hhbmdlKHdhdGNoQ2hhbmdlUHJvdG8pO1xyXG4gICAgICAgIHZhciBzbmFwc2hvdCA9IHRoaXMuc2VyaWFsaXplci52ZXJzaW9uRnJvbUxpc3RlblJlc3BvbnNlKHdhdGNoQ2hhbmdlUHJvdG8pO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmxpc3RlbmVyLm9uV2F0Y2hDaGFuZ2Uod2F0Y2hDaGFuZ2UsIHNuYXBzaG90KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJlZ2lzdGVycyBpbnRlcmVzdCBpbiB0aGUgcmVzdWx0cyBvZiB0aGUgZ2l2ZW4gdGFyZ2V0LiBJZiB0aGUgdGFyZ2V0XHJcbiAgICAgKiBpbmNsdWRlcyBhIHJlc3VtZVRva2VuIGl0IHdpbGwgYmUgaW5jbHVkZWQgaW4gdGhlIHJlcXVlc3QuIFJlc3VsdHMgdGhhdFxyXG4gICAgICogYWZmZWN0IHRoZSB0YXJnZXQgd2lsbCBiZSBzdHJlYW1lZCBiYWNrIGFzIFdhdGNoQ2hhbmdlIG1lc3NhZ2VzIHRoYXRcclxuICAgICAqIHJlZmVyZW5jZSB0aGUgdGFyZ2V0SWQuXHJcbiAgICAgKi9cclxuICAgIFBlcnNpc3RlbnRMaXN0ZW5TdHJlYW0ucHJvdG90eXBlLndhdGNoID0gZnVuY3Rpb24gKHRhcmdldERhdGEpIHtcclxuICAgICAgICB2YXIgcmVxdWVzdCA9IHt9O1xyXG4gICAgICAgIHJlcXVlc3QuZGF0YWJhc2UgPSB0aGlzLnNlcmlhbGl6ZXIuZW5jb2RlZERhdGFiYXNlSWQ7XHJcbiAgICAgICAgcmVxdWVzdC5hZGRUYXJnZXQgPSB0aGlzLnNlcmlhbGl6ZXIudG9UYXJnZXQodGFyZ2V0RGF0YSk7XHJcbiAgICAgICAgdmFyIGxhYmVscyA9IHRoaXMuc2VyaWFsaXplci50b0xpc3RlblJlcXVlc3RMYWJlbHModGFyZ2V0RGF0YSk7XHJcbiAgICAgICAgaWYgKGxhYmVscykge1xyXG4gICAgICAgICAgICByZXF1ZXN0LmxhYmVscyA9IGxhYmVscztcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zZW5kUmVxdWVzdChyZXF1ZXN0KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFVucmVnaXN0ZXJzIGludGVyZXN0IGluIHRoZSByZXN1bHRzIG9mIHRoZSB0YXJnZXQgYXNzb2NpYXRlZCB3aXRoIHRoZVxyXG4gICAgICogZ2l2ZW4gdGFyZ2V0SWQuXHJcbiAgICAgKi9cclxuICAgIFBlcnNpc3RlbnRMaXN0ZW5TdHJlYW0ucHJvdG90eXBlLnVud2F0Y2ggPSBmdW5jdGlvbiAodGFyZ2V0SWQpIHtcclxuICAgICAgICB2YXIgcmVxdWVzdCA9IHt9O1xyXG4gICAgICAgIHJlcXVlc3QuZGF0YWJhc2UgPSB0aGlzLnNlcmlhbGl6ZXIuZW5jb2RlZERhdGFiYXNlSWQ7XHJcbiAgICAgICAgcmVxdWVzdC5yZW1vdmVUYXJnZXQgPSB0YXJnZXRJZDtcclxuICAgICAgICB0aGlzLnNlbmRSZXF1ZXN0KHJlcXVlc3QpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBQZXJzaXN0ZW50TGlzdGVuU3RyZWFtO1xyXG59KFBlcnNpc3RlbnRTdHJlYW0pKTtcclxuLyoqXHJcbiAqIEEgU3RyZWFtIHRoYXQgaW1wbGVtZW50cyB0aGUgV3JpdGUgUlBDLlxyXG4gKlxyXG4gKiBUaGUgV3JpdGUgUlBDIHJlcXVpcmVzIHRoZSBjYWxsZXIgdG8gbWFpbnRhaW4gc3BlY2lhbCBzdHJlYW1Ub2tlblxyXG4gKiBzdGF0ZSBpbiBiZXR3ZWVuIGNhbGxzLCB0byBoZWxwIHRoZSBzZXJ2ZXIgdW5kZXJzdGFuZCB3aGljaCByZXNwb25zZXMgdGhlXHJcbiAqIGNsaWVudCBoYXMgcHJvY2Vzc2VkIGJ5IHRoZSB0aW1lIHRoZSBuZXh0IHJlcXVlc3QgaXMgbWFkZS4gRXZlcnkgcmVzcG9uc2VcclxuICogd2lsbCBjb250YWluIGEgc3RyZWFtVG9rZW47IHRoaXMgdmFsdWUgbXVzdCBiZSBwYXNzZWQgdG8gdGhlIG5leHRcclxuICogcmVxdWVzdC5cclxuICpcclxuICogQWZ0ZXIgY2FsbGluZyBzdGFydCgpIG9uIHRoaXMgc3RyZWFtLCB0aGUgbmV4dCByZXF1ZXN0IG11c3QgYmUgYSBoYW5kc2hha2UsXHJcbiAqIGNvbnRhaW5pbmcgd2hhdGV2ZXIgc3RyZWFtVG9rZW4gaXMgb24gaGFuZC4gT25jZSBhIHJlc3BvbnNlIHRvIHRoaXNcclxuICogcmVxdWVzdCBpcyByZWNlaXZlZCwgYWxsIHBlbmRpbmcgbXV0YXRpb25zIG1heSBiZSBzdWJtaXR0ZWQuIFdoZW5cclxuICogc3VibWl0dGluZyBtdWx0aXBsZSBiYXRjaGVzIG9mIG11dGF0aW9ucyBhdCB0aGUgc2FtZSB0aW1lLCBpdCdzXHJcbiAqIG9rYXkgdG8gdXNlIHRoZSBzYW1lIHN0cmVhbVRva2VuIGZvciB0aGUgY2FsbHMgdG8gd3JpdGVNdXRhdGlvbnMuXHJcbiAqXHJcbiAqIFRPRE8oYi8zMzI3MTIzNSk6IFVzZSBwcm90byB0eXBlc1xyXG4gKi9cclxudmFyIFBlcnNpc3RlbnRXcml0ZVN0cmVhbSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIHRzbGliLl9fZXh0ZW5kcyhQZXJzaXN0ZW50V3JpdGVTdHJlYW0sIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBQZXJzaXN0ZW50V3JpdGVTdHJlYW0ocXVldWUsIGNvbm5lY3Rpb24sIGNyZWRlbnRpYWxzLCBzZXJpYWxpemVyLCBsaXN0ZW5lcikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHF1ZXVlLCBUaW1lcklkLldyaXRlU3RyZWFtQ29ubmVjdGlvbkJhY2tvZmYsIFRpbWVySWQuV3JpdGVTdHJlYW1JZGxlLCBjb25uZWN0aW9uLCBjcmVkZW50aWFscywgbGlzdGVuZXIpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMuc2VyaWFsaXplciA9IHNlcmlhbGl6ZXI7XHJcbiAgICAgICAgX3RoaXMuaGFuZHNoYWtlQ29tcGxldGVfID0gZmFsc2U7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVGhlIGxhc3QgcmVjZWl2ZWQgc3RyZWFtIHRva2VuIGZyb20gdGhlIHNlcnZlciwgdXNlZCB0byBhY2tub3dsZWRnZSB3aGljaFxyXG4gICAgICAgICAqIHJlc3BvbnNlcyB0aGUgY2xpZW50IGhhcyBwcm9jZXNzZWQuIFN0cmVhbSB0b2tlbnMgYXJlIG9wYXF1ZSBjaGVja3BvaW50XHJcbiAgICAgICAgICogbWFya2VycyB3aG9zZSBvbmx5IHJlYWwgdmFsdWUgaXMgdGhlaXIgaW5jbHVzaW9uIGluIHRoZSBuZXh0IHJlcXVlc3QuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBQZXJzaXN0ZW50V3JpdGVTdHJlYW0gbWFuYWdlcyBwcm9wYWdhdGluZyB0aGlzIHZhbHVlIGZyb20gcmVzcG9uc2VzIHRvIHRoZVxyXG4gICAgICAgICAqIG5leHQgcmVxdWVzdC5cclxuICAgICAgICAgKi9cclxuICAgICAgICBfdGhpcy5sYXN0U3RyZWFtVG9rZW4gPSBlbXB0eUJ5dGVTdHJpbmcoKTtcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoUGVyc2lzdGVudFdyaXRlU3RyZWFtLnByb3RvdHlwZSwgXCJoYW5kc2hha2VDb21wbGV0ZVwiLCB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVHJhY2tzIHdoZXRoZXIgb3Igbm90IGEgaGFuZHNoYWtlIGhhcyBiZWVuIHN1Y2Nlc3NmdWxseSBleGNoYW5nZWQgYW5kXHJcbiAgICAgICAgICogdGhlIHN0cmVhbSBpcyByZWFkeSB0byBhY2NlcHQgbXV0YXRpb25zLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5oYW5kc2hha2VDb21wbGV0ZV87XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICAvLyBPdmVycmlkZSBvZiBQZXJzaXN0ZW50U3RyZWFtLnN0YXJ0XHJcbiAgICBQZXJzaXN0ZW50V3JpdGVTdHJlYW0ucHJvdG90eXBlLnN0YXJ0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuaGFuZHNoYWtlQ29tcGxldGVfID0gZmFsc2U7XHJcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5zdGFydC5jYWxsKHRoaXMpO1xyXG4gICAgfTtcclxuICAgIFBlcnNpc3RlbnRXcml0ZVN0cmVhbS5wcm90b3R5cGUudGVhckRvd24gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaGFuZHNoYWtlQ29tcGxldGVfKSB7XHJcbiAgICAgICAgICAgIHRoaXMud3JpdGVNdXRhdGlvbnMoW10pO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBQZXJzaXN0ZW50V3JpdGVTdHJlYW0ucHJvdG90eXBlLnN0YXJ0UnBjID0gZnVuY3Rpb24gKHRva2VuKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY29ubmVjdGlvbi5vcGVuU3RyZWFtKCdXcml0ZScsIHRva2VuKTtcclxuICAgIH07XHJcbiAgICBQZXJzaXN0ZW50V3JpdGVTdHJlYW0ucHJvdG90eXBlLm9uTWVzc2FnZSA9IGZ1bmN0aW9uIChyZXNwb25zZVByb3RvKSB7XHJcbiAgICAgICAgLy8gQWx3YXlzIGNhcHR1cmUgdGhlIGxhc3Qgc3RyZWFtIHRva2VuLlxyXG4gICAgICAgIGFzc2VydCghIXJlc3BvbnNlUHJvdG8uc3RyZWFtVG9rZW4sICdHb3QgYSB3cml0ZSByZXNwb25zZSB3aXRob3V0IGEgc3RyZWFtIHRva2VuJyk7XHJcbiAgICAgICAgdGhpcy5sYXN0U3RyZWFtVG9rZW4gPSByZXNwb25zZVByb3RvLnN0cmVhbVRva2VuO1xyXG4gICAgICAgIGlmICghdGhpcy5oYW5kc2hha2VDb21wbGV0ZV8pIHtcclxuICAgICAgICAgICAgLy8gVGhlIGZpcnN0IHJlc3BvbnNlIGlzIGFsd2F5cyB0aGUgaGFuZHNoYWtlIHJlc3BvbnNlXHJcbiAgICAgICAgICAgIGFzc2VydCghcmVzcG9uc2VQcm90by53cml0ZVJlc3VsdHMgfHwgcmVzcG9uc2VQcm90by53cml0ZVJlc3VsdHMubGVuZ3RoID09PSAwLCAnR290IG11dGF0aW9uIHJlc3VsdHMgZm9yIGhhbmRzaGFrZScpO1xyXG4gICAgICAgICAgICB0aGlzLmhhbmRzaGFrZUNvbXBsZXRlXyA9IHRydWU7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmxpc3RlbmVyLm9uSGFuZHNoYWtlQ29tcGxldGUoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIEEgc3VjY2Vzc2Z1bCBmaXJzdCB3cml0ZSByZXNwb25zZSBtZWFucyB0aGUgc3RyZWFtIGlzIGhlYWx0aHksXHJcbiAgICAgICAgICAgIC8vIE5vdGUsIHRoYXQgd2UgY291bGQgY29uc2lkZXIgYSBzdWNjZXNzZnVsIGhhbmRzaGFrZSBoZWFsdGh5LCBob3dldmVyLFxyXG4gICAgICAgICAgICAvLyB0aGUgd3JpdGUgaXRzZWxmIG1pZ2h0IGJlIGNhdXNpbmcgYW4gZXJyb3Igd2Ugd2FudCB0byBiYWNrIG9mZiBmcm9tLlxyXG4gICAgICAgICAgICB0aGlzLmJhY2tvZmYucmVzZXQoKTtcclxuICAgICAgICAgICAgdmFyIHJlc3VsdHMgPSB0aGlzLnNlcmlhbGl6ZXIuZnJvbVdyaXRlUmVzdWx0cyhyZXNwb25zZVByb3RvLndyaXRlUmVzdWx0cywgcmVzcG9uc2VQcm90by5jb21taXRUaW1lKTtcclxuICAgICAgICAgICAgdmFyIGNvbW1pdFZlcnNpb24gPSB0aGlzLnNlcmlhbGl6ZXIuZnJvbVZlcnNpb24ocmVzcG9uc2VQcm90by5jb21taXRUaW1lKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubGlzdGVuZXIub25NdXRhdGlvblJlc3VsdChjb21taXRWZXJzaW9uLCByZXN1bHRzKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBTZW5kcyBhbiBpbml0aWFsIHN0cmVhbVRva2VuIHRvIHRoZSBzZXJ2ZXIsIHBlcmZvcm1pbmcgdGhlIGhhbmRzaGFrZVxyXG4gICAgICogcmVxdWlyZWQgdG8gbWFrZSB0aGUgU3RyZWFtaW5nV3JpdGUgUlBDIHdvcmsuIFN1YnNlcXVlbnRcclxuICAgICAqIGNhbGxzIHNob3VsZCB3YWl0IHVudGlsIG9uSGFuZHNoYWtlQ29tcGxldGUgd2FzIGNhbGxlZC5cclxuICAgICAqL1xyXG4gICAgUGVyc2lzdGVudFdyaXRlU3RyZWFtLnByb3RvdHlwZS53cml0ZUhhbmRzaGFrZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBhc3NlcnQodGhpcy5pc09wZW4oKSwgJ1dyaXRpbmcgaGFuZHNoYWtlIHJlcXVpcmVzIGFuIG9wZW5lZCBzdHJlYW0nKTtcclxuICAgICAgICBhc3NlcnQoIXRoaXMuaGFuZHNoYWtlQ29tcGxldGVfLCAnSGFuZHNoYWtlIGFscmVhZHkgY29tcGxldGVkJyk7XHJcbiAgICAgICAgLy8gVE9ETyhkaW1vbmQpOiBTdXBwb3J0IHN0cmVhbSByZXN1bXB0aW9uLiBXZSBpbnRlbnRpb25hbGx5IGRvIG5vdCBzZXQgdGhlXHJcbiAgICAgICAgLy8gc3RyZWFtIHRva2VuIG9uIHRoZSBoYW5kc2hha2UsIGlnbm9yaW5nIGFueSBzdHJlYW0gdG9rZW4gd2UgbWlnaHQgaGF2ZS5cclxuICAgICAgICB2YXIgcmVxdWVzdCA9IHt9O1xyXG4gICAgICAgIHJlcXVlc3QuZGF0YWJhc2UgPSB0aGlzLnNlcmlhbGl6ZXIuZW5jb2RlZERhdGFiYXNlSWQ7XHJcbiAgICAgICAgdGhpcy5zZW5kUmVxdWVzdChyZXF1ZXN0KTtcclxuICAgIH07XHJcbiAgICAvKiogU2VuZHMgYSBncm91cCBvZiBtdXRhdGlvbnMgdG8gdGhlIEZpcmVzdG9yZSBiYWNrZW5kIHRvIGFwcGx5LiAqL1xyXG4gICAgUGVyc2lzdGVudFdyaXRlU3RyZWFtLnByb3RvdHlwZS53cml0ZU11dGF0aW9ucyA9IGZ1bmN0aW9uIChtdXRhdGlvbnMpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIGFzc2VydCh0aGlzLmlzT3BlbigpLCAnV3JpdGluZyBtdXRhdGlvbnMgcmVxdWlyZXMgYW4gb3BlbmVkIHN0cmVhbScpO1xyXG4gICAgICAgIGFzc2VydCh0aGlzLmhhbmRzaGFrZUNvbXBsZXRlXywgJ0hhbmRzaGFrZSBtdXN0IGJlIGNvbXBsZXRlIGJlZm9yZSB3cml0aW5nIG11dGF0aW9ucycpO1xyXG4gICAgICAgIGFzc2VydCh0aGlzLmxhc3RTdHJlYW1Ub2tlbi5sZW5ndGggPiAwLCAnVHJ5aW5nIHRvIHdyaXRlIG11dGF0aW9uIHdpdGhvdXQgYSB0b2tlbicpO1xyXG4gICAgICAgIHZhciByZXF1ZXN0ID0ge1xyXG4gICAgICAgICAgICAvLyBQcm90b3MgYXJlIHR5cGVkIHdpdGggc3RyaW5nLCBidXQgd2Ugc3VwcG9ydCBVSW50OEFycmF5IG9uIE5vZGVcclxuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuICAgICAgICAgICAgc3RyZWFtVG9rZW46IHRoaXMubGFzdFN0cmVhbVRva2VuLFxyXG4gICAgICAgICAgICB3cml0ZXM6IG11dGF0aW9ucy5tYXAoZnVuY3Rpb24gKG11dGF0aW9uKSB7IHJldHVybiBfdGhpcy5zZXJpYWxpemVyLnRvTXV0YXRpb24obXV0YXRpb24pOyB9KVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5zZW5kUmVxdWVzdChyZXF1ZXN0KTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gUGVyc2lzdGVudFdyaXRlU3RyZWFtO1xyXG59KFBlcnNpc3RlbnRTdHJlYW0pKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBEYXRhc3RvcmUgaXMgYSB3cmFwcGVyIGFyb3VuZCB0aGUgZXh0ZXJuYWwgR29vZ2xlIENsb3VkIERhdGFzdG9yZSBncnBjIEFQSSxcclxuICogd2hpY2ggcHJvdmlkZXMgYW4gaW50ZXJmYWNlIHRoYXQgaXMgbW9yZSBjb252ZW5pZW50IGZvciB0aGUgcmVzdCBvZiB0aGVcclxuICogY2xpZW50IFNESyBhcmNoaXRlY3R1cmUgdG8gY29uc3VtZS5cclxuICovXHJcbnZhciBEYXRhc3RvcmUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBEYXRhc3RvcmUocXVldWUsIGNvbm5lY3Rpb24sIGNyZWRlbnRpYWxzLCBzZXJpYWxpemVyKSB7XHJcbiAgICAgICAgdGhpcy5xdWV1ZSA9IHF1ZXVlO1xyXG4gICAgICAgIHRoaXMuY29ubmVjdGlvbiA9IGNvbm5lY3Rpb247XHJcbiAgICAgICAgdGhpcy5jcmVkZW50aWFscyA9IGNyZWRlbnRpYWxzO1xyXG4gICAgICAgIHRoaXMuc2VyaWFsaXplciA9IHNlcmlhbGl6ZXI7XHJcbiAgICB9XHJcbiAgICBEYXRhc3RvcmUucHJvdG90eXBlLm5ld1BlcnNpc3RlbnRXcml0ZVN0cmVhbSA9IGZ1bmN0aW9uIChsaXN0ZW5lcikge1xyXG4gICAgICAgIHJldHVybiBuZXcgUGVyc2lzdGVudFdyaXRlU3RyZWFtKHRoaXMucXVldWUsIHRoaXMuY29ubmVjdGlvbiwgdGhpcy5jcmVkZW50aWFscywgdGhpcy5zZXJpYWxpemVyLCBsaXN0ZW5lcik7XHJcbiAgICB9O1xyXG4gICAgRGF0YXN0b3JlLnByb3RvdHlwZS5uZXdQZXJzaXN0ZW50V2F0Y2hTdHJlYW0gPSBmdW5jdGlvbiAobGlzdGVuZXIpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFBlcnNpc3RlbnRMaXN0ZW5TdHJlYW0odGhpcy5xdWV1ZSwgdGhpcy5jb25uZWN0aW9uLCB0aGlzLmNyZWRlbnRpYWxzLCB0aGlzLnNlcmlhbGl6ZXIsIGxpc3RlbmVyKTtcclxuICAgIH07XHJcbiAgICBEYXRhc3RvcmUucHJvdG90eXBlLmNvbW1pdCA9IGZ1bmN0aW9uIChtdXRhdGlvbnMpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhciBwYXJhbXMgPSB7XHJcbiAgICAgICAgICAgIGRhdGFiYXNlOiB0aGlzLnNlcmlhbGl6ZXIuZW5jb2RlZERhdGFiYXNlSWQsXHJcbiAgICAgICAgICAgIHdyaXRlczogbXV0YXRpb25zLm1hcChmdW5jdGlvbiAobSkgeyByZXR1cm4gX3RoaXMuc2VyaWFsaXplci50b011dGF0aW9uKG0pOyB9KVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaW52b2tlUlBDKCdDb21taXQnLCBwYXJhbXMpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5zZXJpYWxpemVyLmZyb21Xcml0ZVJlc3VsdHMocmVzcG9uc2Uud3JpdGVSZXN1bHRzLCByZXNwb25zZS5jb21taXRUaW1lKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBEYXRhc3RvcmUucHJvdG90eXBlLmxvb2t1cCA9IGZ1bmN0aW9uIChrZXlzKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgcGFyYW1zID0ge1xyXG4gICAgICAgICAgICBkYXRhYmFzZTogdGhpcy5zZXJpYWxpemVyLmVuY29kZWREYXRhYmFzZUlkLFxyXG4gICAgICAgICAgICBkb2N1bWVudHM6IGtleXMubWFwKGZ1bmN0aW9uIChrKSB7IHJldHVybiBfdGhpcy5zZXJpYWxpemVyLnRvTmFtZShrKTsgfSlcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiB0aGlzLmludm9rZVN0cmVhbWluZ1JQQygnQmF0Y2hHZXREb2N1bWVudHMnLCBwYXJhbXMpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgIHZhciBkb2NzID0gbWF5YmVEb2N1bWVudE1hcCgpO1xyXG4gICAgICAgICAgICByZXNwb25zZS5mb3JFYWNoKGZ1bmN0aW9uIChwcm90bykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGRvYyA9IF90aGlzLnNlcmlhbGl6ZXIuZnJvbU1heWJlRG9jdW1lbnQocHJvdG8pO1xyXG4gICAgICAgICAgICAgICAgZG9jcyA9IGRvY3MuaW5zZXJ0KGRvYy5rZXksIGRvYyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gW107XHJcbiAgICAgICAgICAgIGtleXMuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZG9jID0gZG9jcy5nZXQoa2V5KTtcclxuICAgICAgICAgICAgICAgIGFzc2VydCghIWRvYywgJ01pc3NpbmcgZW50aXR5IGluIHdyaXRlIHJlc3BvbnNlIGZvciAnICsga2V5KTtcclxuICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKGRvYyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKiBHZXRzIGFuIGF1dGggdG9rZW4gYW5kIGludm9rZXMgdGhlIHByb3ZpZGVkIFJQQy4gKi9cclxuICAgIERhdGFzdG9yZS5wcm90b3R5cGUuaW52b2tlUlBDID0gZnVuY3Rpb24gKHJwY05hbWUsIHJlcXVlc3QpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNyZWRlbnRpYWxzXHJcbiAgICAgICAgICAgIC5nZXRUb2tlbigpXHJcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICh0b2tlbikge1xyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXMuY29ubmVjdGlvbi5pbnZva2VSUEMocnBjTmFtZSwgcmVxdWVzdCwgdG9rZW4pO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgaWYgKGVycm9yLmNvZGUgPT09IENvZGUuVU5BVVRIRU5USUNBVEVEKSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5jcmVkZW50aWFscy5pbnZhbGlkYXRlVG9rZW4oKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKiogR2V0cyBhbiBhdXRoIHRva2VuIGFuZCBpbnZva2VzIHRoZSBwcm92aWRlZCBSUEMgd2l0aCBzdHJlYW1lZCByZXN1bHRzLiAqL1xyXG4gICAgRGF0YXN0b3JlLnByb3RvdHlwZS5pbnZva2VTdHJlYW1pbmdSUEMgPSBmdW5jdGlvbiAocnBjTmFtZSwgcmVxdWVzdCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY3JlZGVudGlhbHNcclxuICAgICAgICAgICAgLmdldFRva2VuKClcclxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHRva2VuKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5jb25uZWN0aW9uLmludm9rZVN0cmVhbWluZ1JQQyhycGNOYW1lLCByZXF1ZXN0LCB0b2tlbik7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgICAgICBpZiAoZXJyb3IuY29kZSA9PT0gQ29kZS5VTkFVVEhFTlRJQ0FURUQpIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLmNyZWRlbnRpYWxzLmludmFsaWRhdGVUb2tlbigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRocm93IGVycm9yO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBEYXRhc3RvcmU7XHJcbn0oKSk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogSW50ZXJuYWwgdHJhbnNhY3Rpb24gb2JqZWN0IHJlc3BvbnNpYmxlIGZvciBhY2N1bXVsYXRpbmcgdGhlIG11dGF0aW9ucyB0b1xyXG4gKiBwZXJmb3JtIGFuZCB0aGUgYmFzZSB2ZXJzaW9ucyBmb3IgYW55IGRvY3VtZW50cyByZWFkLlxyXG4gKi9cclxudmFyIFRyYW5zYWN0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gVHJhbnNhY3Rpb24oZGF0YXN0b3JlKSB7XHJcbiAgICAgICAgdGhpcy5kYXRhc3RvcmUgPSBkYXRhc3RvcmU7XHJcbiAgICAgICAgLy8gVGhlIHZlcnNpb24gb2YgZWFjaCBkb2N1bWVudCB0aGF0IHdhcyByZWFkIGR1cmluZyB0aGlzIHRyYW5zYWN0aW9uLlxyXG4gICAgICAgIHRoaXMucmVhZFZlcnNpb25zID0gZG9jdW1lbnRWZXJzaW9uTWFwKCk7XHJcbiAgICAgICAgdGhpcy5tdXRhdGlvbnMgPSBbXTtcclxuICAgICAgICB0aGlzLmNvbW1pdHRlZCA9IGZhbHNlO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEEgZGVmZXJyZWQgdXNhZ2UgZXJyb3IgdGhhdCBvY2N1cnJlZCBwcmV2aW91c2x5IGluIHRoaXMgdHJhbnNhY3Rpb24gdGhhdFxyXG4gICAgICAgICAqIHdpbGwgY2F1c2UgdGhlIHRyYW5zYWN0aW9uIHRvIGZhaWwgb25jZSBpdCBhY3R1YWxseSBjb21taXRzLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMubGFzdFdyaXRlRXJyb3IgPSBudWxsO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFNldCBvZiBkb2N1bWVudHMgdGhhdCBoYXZlIGJlZW4gd3JpdHRlbiBpbiB0aGUgdHJhbnNhY3Rpb24uXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBXaGVuIHRoZXJlJ3MgbW9yZSB0aGFuIG9uZSB3cml0ZSB0byB0aGUgc2FtZSBrZXkgaW4gYSB0cmFuc2FjdGlvbiwgYW55XHJcbiAgICAgICAgICogd3JpdGVzIGFmdGVyIGh0ZSBmaXJzdCBhcmUgaGFuZGxlZCBkaWZmZXJlbnRseS5cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLndyaXR0ZW5Eb2NzID0gbmV3IFNldCgpO1xyXG4gICAgfVxyXG4gICAgVHJhbnNhY3Rpb24ucHJvdG90eXBlLmxvb2t1cCA9IGZ1bmN0aW9uIChrZXlzKSB7XHJcbiAgICAgICAgcmV0dXJuIHRzbGliLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgZG9jcztcclxuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbnN1cmVDb21taXROb3RDYWxsZWQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMubXV0YXRpb25zLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLklOVkFMSURfQVJHVU1FTlQsICdGaXJlc3RvcmUgdHJhbnNhY3Rpb25zIHJlcXVpcmUgYWxsIHJlYWRzIHRvIGJlIGV4ZWN1dGVkIGJlZm9yZSBhbGwgd3JpdGVzLicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuZGF0YXN0b3JlLmxvb2t1cChrZXlzKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkb2NzID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkb2NzLmZvckVhY2goZnVuY3Rpb24gKGRvYykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRvYyBpbnN0YW5jZW9mIE5vRG9jdW1lbnQgfHwgZG9jIGluc3RhbmNlb2YgRG9jdW1lbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5yZWNvcmRWZXJzaW9uKGRvYyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmYWlsKCdEb2N1bWVudCBpbiBhIHRyYW5zYWN0aW9uIHdhcyBhICcgKyBkb2MuY29uc3RydWN0b3IubmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgZG9jc107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIFRyYW5zYWN0aW9uLnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAoa2V5LCBkYXRhKSB7XHJcbiAgICAgICAgdGhpcy53cml0ZShkYXRhLnRvTXV0YXRpb25zKGtleSwgdGhpcy5wcmVjb25kaXRpb24oa2V5KSkpO1xyXG4gICAgICAgIHRoaXMud3JpdHRlbkRvY3MuYWRkKGtleSk7XHJcbiAgICB9O1xyXG4gICAgVHJhbnNhY3Rpb24ucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uIChrZXksIGRhdGEpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICB0aGlzLndyaXRlKGRhdGEudG9NdXRhdGlvbnMoa2V5LCB0aGlzLnByZWNvbmRpdGlvbkZvclVwZGF0ZShrZXkpKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIHRoaXMubGFzdFdyaXRlRXJyb3IgPSBlO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLndyaXR0ZW5Eb2NzLmFkZChrZXkpO1xyXG4gICAgfTtcclxuICAgIFRyYW5zYWN0aW9uLnByb3RvdHlwZS5kZWxldGUgPSBmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgICAgdGhpcy53cml0ZShbbmV3IERlbGV0ZU11dGF0aW9uKGtleSwgdGhpcy5wcmVjb25kaXRpb24oa2V5KSldKTtcclxuICAgICAgICB0aGlzLndyaXR0ZW5Eb2NzLmFkZChrZXkpO1xyXG4gICAgfTtcclxuICAgIFRyYW5zYWN0aW9uLnByb3RvdHlwZS5jb21taXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRzbGliLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgdW53cml0dGVuO1xyXG4gICAgICAgICAgICByZXR1cm4gdHNsaWIuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVuc3VyZUNvbW1pdE5vdENhbGxlZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5sYXN0V3JpdGVFcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgdGhpcy5sYXN0V3JpdGVFcnJvcjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB1bndyaXR0ZW4gPSB0aGlzLnJlYWRWZXJzaW9ucztcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRm9yIGVhY2ggbXV0YXRpb24sIG5vdGUgdGhhdCB0aGUgZG9jIHdhcyB3cml0dGVuLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm11dGF0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uIChtdXRhdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdW53cml0dGVuID0gdW53cml0dGVuLnJlbW92ZShtdXRhdGlvbi5rZXkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF1bndyaXR0ZW4uaXNFbXB0eSgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5JTlZBTElEX0FSR1VNRU5ULCAnRXZlcnkgZG9jdW1lbnQgcmVhZCBpbiBhIHRyYW5zYWN0aW9uIG11c3QgYWxzbyBiZSB3cml0dGVuLicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuZGF0YXN0b3JlLmNvbW1pdCh0aGlzLm11dGF0aW9ucyldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbW1pdHRlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgVHJhbnNhY3Rpb24ucHJvdG90eXBlLnJlY29yZFZlcnNpb24gPSBmdW5jdGlvbiAoZG9jKSB7XHJcbiAgICAgICAgdmFyIGRvY1ZlcnNpb247XHJcbiAgICAgICAgaWYgKGRvYyBpbnN0YW5jZW9mIERvY3VtZW50KSB7XHJcbiAgICAgICAgICAgIGRvY1ZlcnNpb24gPSBkb2MudmVyc2lvbjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoZG9jIGluc3RhbmNlb2YgTm9Eb2N1bWVudCkge1xyXG4gICAgICAgICAgICAvLyBGb3IgZGVsZXRlZCBkb2NzLCB3ZSBtdXN0IHVzZSBiYXNlVmVyc2lvbiAwIHdoZW4gd2Ugb3ZlcndyaXRlIHRoZW0uXHJcbiAgICAgICAgICAgIGRvY1ZlcnNpb24gPSBTbmFwc2hvdFZlcnNpb24uZm9yRGVsZXRlZERvYygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhyb3cgZmFpbCgnRG9jdW1lbnQgaW4gYSB0cmFuc2FjdGlvbiB3YXMgYSAnICsgZG9jLmNvbnN0cnVjdG9yLm5hbWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgZXhpc3RpbmdWZXJzaW9uID0gdGhpcy5yZWFkVmVyc2lvbnMuZ2V0KGRvYy5rZXkpO1xyXG4gICAgICAgIGlmIChleGlzdGluZ1ZlcnNpb24gIT09IG51bGwpIHtcclxuICAgICAgICAgICAgaWYgKCFkb2NWZXJzaW9uLmlzRXF1YWwoZXhpc3RpbmdWZXJzaW9uKSkge1xyXG4gICAgICAgICAgICAgICAgLy8gVGhpcyB0cmFuc2FjdGlvbiB3aWxsIGZhaWwgbm8gbWF0dGVyIHdoYXQuXHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5BQk9SVEVELCAnRG9jdW1lbnQgdmVyc2lvbiBjaGFuZ2VkIGJldHdlZW4gdHdvIHJlYWRzLicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnJlYWRWZXJzaW9ucyA9IHRoaXMucmVhZFZlcnNpb25zLmluc2VydChkb2Mua2V5LCBkb2NWZXJzaW9uKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSB2ZXJzaW9uIG9mIHRoaXMgZG9jdW1lbnQgd2hlbiBpdCB3YXMgcmVhZCBpbiB0aGlzIHRyYW5zYWN0aW9uLFxyXG4gICAgICogYXMgYSBwcmVjb25kaXRpb24sIG9yIG5vIHByZWNvbmRpdGlvbiBpZiBpdCB3YXMgbm90IHJlYWQuXHJcbiAgICAgKi9cclxuICAgIFRyYW5zYWN0aW9uLnByb3RvdHlwZS5wcmVjb25kaXRpb24gPSBmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgICAgdmFyIHZlcnNpb24gPSB0aGlzLnJlYWRWZXJzaW9ucy5nZXQoa2V5KTtcclxuICAgICAgICBpZiAoIXRoaXMud3JpdHRlbkRvY3MuaGFzKGtleSkgJiYgdmVyc2lvbikge1xyXG4gICAgICAgICAgICByZXR1cm4gUHJlY29uZGl0aW9uLnVwZGF0ZVRpbWUodmVyc2lvbik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gUHJlY29uZGl0aW9uLk5PTkU7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0aGUgcHJlY29uZGl0aW9uIGZvciBhIGRvY3VtZW50IGlmIHRoZSBvcGVyYXRpb24gaXMgYW4gdXBkYXRlLlxyXG4gICAgICovXHJcbiAgICBUcmFuc2FjdGlvbi5wcm90b3R5cGUucHJlY29uZGl0aW9uRm9yVXBkYXRlID0gZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgIHZhciB2ZXJzaW9uID0gdGhpcy5yZWFkVmVyc2lvbnMuZ2V0KGtleSk7XHJcbiAgICAgICAgLy8gVGhlIGZpcnN0IHRpbWUgYSBkb2N1bWVudCBpcyB3cml0dGVuLCB3ZSB3YW50IHRvIHRha2UgaW50byBhY2NvdW50IHRoZVxyXG4gICAgICAgIC8vIHJlYWQgdGltZSBhbmQgZXhpc3RlbmNlXHJcbiAgICAgICAgaWYgKCF0aGlzLndyaXR0ZW5Eb2NzLmhhcyhrZXkpICYmIHZlcnNpb24pIHtcclxuICAgICAgICAgICAgaWYgKHZlcnNpb24uaXNFcXVhbChTbmFwc2hvdFZlcnNpb24uZm9yRGVsZXRlZERvYygpKSkge1xyXG4gICAgICAgICAgICAgICAgLy8gVGhlIGRvY3VtZW50IGRvZXNuJ3QgZXhpc3QsIHNvIGZhaWwgdGhlIHRyYW5zYWN0aW9uLlxyXG4gICAgICAgICAgICAgICAgLy8gVGhpcyBoYXMgdG8gYmUgdmFsaWRhdGVkIGxvY2FsbHkgYmVjYXVzZSB5b3UgY2FuJ3Qgc2VuZCBhXHJcbiAgICAgICAgICAgICAgICAvLyBwcmVjb25kaXRpb24gdGhhdCBhIGRvY3VtZW50IGRvZXMgbm90IGV4aXN0IHdpdGhvdXQgY2hhbmdpbmcgdGhlXHJcbiAgICAgICAgICAgICAgICAvLyBzZW1hbnRpY3Mgb2YgdGhlIGJhY2tlbmQgd3JpdGUgdG8gYmUgYW4gaW5zZXJ0LiBUaGlzIGlzIHRoZSByZXZlcnNlXHJcbiAgICAgICAgICAgICAgICAvLyBvZiB3aGF0IHdlIHdhbnQsIHNpbmNlIHdlIHdhbnQgdG8gYXNzZXJ0IHRoYXQgdGhlIGRvY3VtZW50IGRvZXNuJ3RcclxuICAgICAgICAgICAgICAgIC8vIGV4aXN0IGJ1dCB0aGVuIHNlbmQgdGhlIHVwZGF0ZSBhbmQgaGF2ZSBpdCBmYWlsLiBTaW5jZSB3ZSBjYW4ndFxyXG4gICAgICAgICAgICAgICAgLy8gZXhwcmVzcyB0aGF0IHRvIHRoZSBiYWNrZW5kLCB3ZSBoYXZlIHRvIHZhbGlkYXRlIGxvY2FsbHkuXHJcbiAgICAgICAgICAgICAgICAvLyBOb3RlOiB0aGlzIGNhbiBjaGFuZ2Ugb25jZSB3ZSBjYW4gc2VuZCBzZXBhcmF0ZSB2ZXJpZnkgd3JpdGVzIGluIHRoZVxyXG4gICAgICAgICAgICAgICAgLy8gdHJhbnNhY3Rpb24uXHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5JTlZBTElEX0FSR1VNRU5ULCBcIkNhbid0IHVwZGF0ZSBhIGRvY3VtZW50IHRoYXQgZG9lc24ndCBleGlzdC5cIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gRG9jdW1lbnQgZXhpc3RzLCBiYXNlIHByZWNvbmRpdGlvbiBvbiBkb2N1bWVudCB1cGRhdGUgdGltZS5cclxuICAgICAgICAgICAgcmV0dXJuIFByZWNvbmRpdGlvbi51cGRhdGVUaW1lKHZlcnNpb24pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gRG9jdW1lbnQgd2FzIG5vdCByZWFkLCBzbyB3ZSBqdXN0IHVzZSB0aGUgcHJlY29uZGl0aW9ucyBmb3IgYSBibGluZFxyXG4gICAgICAgICAgICAvLyB1cGRhdGUuXHJcbiAgICAgICAgICAgIHJldHVybiBQcmVjb25kaXRpb24uZXhpc3RzKHRydWUpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBUcmFuc2FjdGlvbi5wcm90b3R5cGUud3JpdGUgPSBmdW5jdGlvbiAobXV0YXRpb25zKSB7XHJcbiAgICAgICAgdGhpcy5lbnN1cmVDb21taXROb3RDYWxsZWQoKTtcclxuICAgICAgICB0aGlzLm11dGF0aW9ucyA9IHRoaXMubXV0YXRpb25zLmNvbmNhdChtdXRhdGlvbnMpO1xyXG4gICAgfTtcclxuICAgIFRyYW5zYWN0aW9uLnByb3RvdHlwZS5lbnN1cmVDb21taXROb3RDYWxsZWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgYXNzZXJ0KCF0aGlzLmNvbW1pdHRlZCwgJ0EgdHJhbnNhY3Rpb24gb2JqZWN0IGNhbm5vdCBiZSB1c2VkIGFmdGVyIGl0cyB1cGRhdGUgY2FsbGJhY2sgaGFzIGJlZW4gaW52b2tlZC4nKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gVHJhbnNhY3Rpb247XHJcbn0oKSk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogRGVzY3JpYmVzIHRoZSBvbmxpbmUgc3RhdGUgb2YgdGhlIEZpcmVzdG9yZSBjbGllbnQuIE5vdGUgdGhhdCB0aGlzIGRvZXMgbm90XHJcbiAqIGluZGljYXRlIHdoZXRoZXIgb3Igbm90IHRoZSByZW1vdGUgc3RvcmUgaXMgdHJ5aW5nIHRvIGNvbm5lY3Qgb3Igbm90LiBUaGlzIGlzXHJcbiAqIHByaW1hcmlseSB1c2VkIGJ5IHRoZSBWaWV3IC8gRXZlbnRNYW5hZ2VyIGNvZGUgdG8gY2hhbmdlIHRoZWlyIGJlaGF2aW9yIHdoaWxlXHJcbiAqIG9mZmxpbmUgKGUuZy4gZ2V0KCkgY2FsbHMgc2hvdWxkbid0IHdhaXQgZm9yIGRhdGEgZnJvbSB0aGUgc2VydmVyIGFuZFxyXG4gKiBzbmFwc2hvdCBldmVudHMgc2hvdWxkIHNldCBtZXRhZGF0YS5pc0Zyb21DYWNoZT10cnVlKS5cclxuICovXHJcbnZhciBPbmxpbmVTdGF0ZTtcclxuKGZ1bmN0aW9uIChPbmxpbmVTdGF0ZSkge1xyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgRmlyZXN0b3JlIGNsaWVudCBpcyBpbiBhbiB1bmtub3duIG9ubGluZSBzdGF0ZS4gVGhpcyBtZWFucyB0aGUgY2xpZW50XHJcbiAgICAgKiBpcyBlaXRoZXIgbm90IGFjdGl2ZWx5IHRyeWluZyB0byBlc3RhYmxpc2ggYSBjb25uZWN0aW9uIG9yIGl0IGlzIGN1cnJlbnRseVxyXG4gICAgICogdHJ5aW5nIHRvIGVzdGFibGlzaCBhIGNvbm5lY3Rpb24sIGJ1dCBpdCBoYXMgbm90IHN1Y2NlZWRlZCBvciBmYWlsZWQgeWV0LlxyXG4gICAgICogSGlnaGVyLWxldmVsIGNvbXBvbmVudHMgc2hvdWxkIG5vdCBvcGVyYXRlIGluIG9mZmxpbmUgbW9kZS5cclxuICAgICAqL1xyXG4gICAgT25saW5lU3RhdGVbT25saW5lU3RhdGVbXCJVbmtub3duXCJdID0gMF0gPSBcIlVua25vd25cIjtcclxuICAgIC8qKlxyXG4gICAgICogVGhlIGNsaWVudCBpcyBjb25uZWN0ZWQgYW5kIHRoZSBjb25uZWN0aW9ucyBhcmUgaGVhbHRoeS4gVGhpcyBzdGF0ZSBpc1xyXG4gICAgICogcmVhY2hlZCBhZnRlciBhIHN1Y2Nlc3NmdWwgY29ubmVjdGlvbiBhbmQgdGhlcmUgaGFzIGJlZW4gYXQgbGVhc3Qgb25lXHJcbiAgICAgKiBzdWNjZXNzZnVsIG1lc3NhZ2UgcmVjZWl2ZWQgZnJvbSB0aGUgYmFja2VuZHMuXHJcbiAgICAgKi9cclxuICAgIE9ubGluZVN0YXRlW09ubGluZVN0YXRlW1wiT25saW5lXCJdID0gMV0gPSBcIk9ubGluZVwiO1xyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgY2xpZW50IGlzIGVpdGhlciB0cnlpbmcgdG8gZXN0YWJsaXNoIGEgY29ubmVjdGlvbiBidXQgZmFpbGluZywgb3IgaXRcclxuICAgICAqIGhhcyBiZWVuIGV4cGxpY2l0bHkgbWFya2VkIG9mZmxpbmUgdmlhIGEgY2FsbCB0byBkaXNhYmxlTmV0d29yaygpLlxyXG4gICAgICogSGlnaGVyLWxldmVsIGNvbXBvbmVudHMgc2hvdWxkIG9wZXJhdGUgaW4gb2ZmbGluZSBtb2RlLlxyXG4gICAgICovXHJcbiAgICBPbmxpbmVTdGF0ZVtPbmxpbmVTdGF0ZVtcIk9mZmxpbmVcIl0gPSAyXSA9IFwiT2ZmbGluZVwiO1xyXG59KShPbmxpbmVTdGF0ZSB8fCAoT25saW5lU3RhdGUgPSB7fSkpO1xyXG4vKiogVGhlIHNvdXJjZSBvZiBhbiBvbmxpbmUgc3RhdGUgZXZlbnQuICovXHJcbnZhciBPbmxpbmVTdGF0ZVNvdXJjZTtcclxuKGZ1bmN0aW9uIChPbmxpbmVTdGF0ZVNvdXJjZSkge1xyXG4gICAgT25saW5lU3RhdGVTb3VyY2VbT25saW5lU3RhdGVTb3VyY2VbXCJSZW1vdGVTdG9yZVwiXSA9IDBdID0gXCJSZW1vdGVTdG9yZVwiO1xyXG4gICAgT25saW5lU3RhdGVTb3VyY2VbT25saW5lU3RhdGVTb3VyY2VbXCJTaGFyZWRDbGllbnRTdGF0ZVwiXSA9IDFdID0gXCJTaGFyZWRDbGllbnRTdGF0ZVwiO1xyXG59KShPbmxpbmVTdGF0ZVNvdXJjZSB8fCAoT25saW5lU3RhdGVTb3VyY2UgPSB7fSkpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxudmFyIExPR19UQUckNiA9ICdPbmxpbmVTdGF0ZVRyYWNrZXInO1xyXG4vLyBUbyBkZWFsIHdpdGggdHJhbnNpZW50IGZhaWx1cmVzLCB3ZSBhbGxvdyBtdWx0aXBsZSBzdHJlYW0gYXR0ZW1wdHMgYmVmb3JlXHJcbi8vIGdpdmluZyB1cCBhbmQgdHJhbnNpdGlvbmluZyBmcm9tIE9ubGluZVN0YXRlLlVua25vd24gdG8gT2ZmbGluZS5cclxuLy8gVE9ETyhtaWtlbGVoZW4pOiBUaGlzIHVzZWQgdG8gYmUgc2V0IHRvIDIgYXMgYSBtaXRpZ2F0aW9uIGZvciBiLzY2MjI4Mzk0LlxyXG4vLyBAamRpbW9uZCB0aGlua3MgdGhhdCBidWcgaXMgc3VmZmljaWVudGx5IGZpeGVkIHNvIHRoYXQgd2UgY2FuIHNldCB0aGlzIGJhY2tcclxuLy8gdG8gMS4gSWYgdGhhdCB3b3JrcyBva2F5LCB3ZSBjb3VsZCBwb3RlbnRpYWxseSByZW1vdmUgdGhpcyBsb2dpYyBlbnRpcmVseS5cclxudmFyIE1BWF9XQVRDSF9TVFJFQU1fRkFJTFVSRVMgPSAxO1xyXG4vLyBUbyBkZWFsIHdpdGggc3RyZWFtIGF0dGVtcHRzIHRoYXQgZG9uJ3Qgc3VjY2VlZCBvciBmYWlsIGluIGEgdGltZWx5IG1hbm5lcixcclxuLy8gd2UgaGF2ZSBhIHRpbWVvdXQgZm9yIE9ubGluZVN0YXRlIHRvIHJlYWNoIE9ubGluZSBvciBPZmZsaW5lLlxyXG4vLyBJZiB0aGUgdGltZW91dCBpcyByZWFjaGVkLCB3ZSB0cmFuc2l0aW9uIHRvIE9mZmxpbmUgcmF0aGVyIHRoYW4gd2FpdGluZ1xyXG4vLyBpbmRlZmluaXRlbHkuXHJcbnZhciBPTkxJTkVfU1RBVEVfVElNRU9VVF9NUyA9IDEwICogMTAwMDtcclxuLyoqXHJcbiAqIEEgY29tcG9uZW50IHVzZWQgYnkgdGhlIFJlbW90ZVN0b3JlIHRvIHRyYWNrIHRoZSBPbmxpbmVTdGF0ZSAodGhhdCBpcyxcclxuICogd2hldGhlciBvciBub3QgdGhlIGNsaWVudCBhcyBhIHdob2xlIHNob3VsZCBiZSBjb25zaWRlcmVkIHRvIGJlIG9ubGluZSBvclxyXG4gKiBvZmZsaW5lKSwgaW1wbGVtZW50aW5nIHRoZSBhcHByb3ByaWF0ZSBoZXVyaXN0aWNzLlxyXG4gKlxyXG4gKiBJbiBwYXJ0aWN1bGFyLCB3aGVuIHRoZSBjbGllbnQgaXMgdHJ5aW5nIHRvIGNvbm5lY3QgdG8gdGhlIGJhY2tlbmQsIHdlXHJcbiAqIGFsbG93IHVwIHRvIE1BWF9XQVRDSF9TVFJFQU1fRkFJTFVSRVMgd2l0aGluIE9OTElORV9TVEFURV9USU1FT1VUX01TIGZvclxyXG4gKiBhIGNvbm5lY3Rpb24gdG8gc3VjY2VlZC4gSWYgd2UgaGF2ZSB0b28gbWFueSBmYWlsdXJlcyBvciB0aGUgdGltZW91dCBlbGFwc2VzLFxyXG4gKiB0aGVuIHdlIHNldCB0aGUgT25saW5lU3RhdGUgdG8gT2ZmbGluZSwgYW5kIHRoZSBjbGllbnQgd2lsbCBiZWhhdmUgYXMgaWZcclxuICogaXQgaXMgb2ZmbGluZSAoZ2V0KClzIHdpbGwgcmV0dXJuIGNhY2hlZCBkYXRhLCBldGMuKS5cclxuICovXHJcbnZhciBPbmxpbmVTdGF0ZVRyYWNrZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBPbmxpbmVTdGF0ZVRyYWNrZXIoYXN5bmNRdWV1ZSwgb25saW5lU3RhdGVIYW5kbGVyKSB7XHJcbiAgICAgICAgdGhpcy5hc3luY1F1ZXVlID0gYXN5bmNRdWV1ZTtcclxuICAgICAgICB0aGlzLm9ubGluZVN0YXRlSGFuZGxlciA9IG9ubGluZVN0YXRlSGFuZGxlcjtcclxuICAgICAgICAvKiogVGhlIGN1cnJlbnQgT25saW5lU3RhdGUuICovXHJcbiAgICAgICAgdGhpcy5zdGF0ZSA9IE9ubGluZVN0YXRlLlVua25vd247XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQSBjb3VudCBvZiBjb25zZWN1dGl2ZSBmYWlsdXJlcyB0byBvcGVuIHRoZSBzdHJlYW0uIElmIGl0IHJlYWNoZXMgdGhlXHJcbiAgICAgICAgICogbWF4aW11bSBkZWZpbmVkIGJ5IE1BWF9XQVRDSF9TVFJFQU1fRkFJTFVSRVMsIHdlJ2xsIHNldCB0aGUgT25saW5lU3RhdGUgdG9cclxuICAgICAgICAgKiBPZmZsaW5lLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMud2F0Y2hTdHJlYW1GYWlsdXJlcyA9IDA7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQSB0aW1lciB0aGF0IGVsYXBzZXMgYWZ0ZXIgT05MSU5FX1NUQVRFX1RJTUVPVVRfTVMsIGF0IHdoaWNoIHBvaW50IHdlXHJcbiAgICAgICAgICogdHJhbnNpdGlvbiBmcm9tIE9ubGluZVN0YXRlLlVua25vd24gdG8gT25saW5lU3RhdGUuT2ZmbGluZSB3aXRob3V0IHdhaXRpbmdcclxuICAgICAgICAgKiBmb3IgdGhlIHN0cmVhbSB0byBhY3R1YWxseSBmYWlsIChNQVhfV0FUQ0hfU1RSRUFNX0ZBSUxVUkVTIHRpbWVzKS5cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLm9ubGluZVN0YXRlVGltZXIgPSBudWxsO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFdoZXRoZXIgdGhlIGNsaWVudCBzaG91bGQgbG9nIGEgd2FybmluZyBtZXNzYWdlIGlmIGl0IGZhaWxzIHRvIGNvbm5lY3QgdG9cclxuICAgICAgICAgKiB0aGUgYmFja2VuZCAoaW5pdGlhbGx5IHRydWUsIGNsZWFyZWQgYWZ0ZXIgYSBzdWNjZXNzZnVsIHN0cmVhbSwgb3IgaWYgd2UndmVcclxuICAgICAgICAgKiBsb2dnZWQgdGhlIG1lc3NhZ2UgYWxyZWFkeSkuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5zaG91bGRXYXJuQ2xpZW50SXNPZmZsaW5lID0gdHJ1ZTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQ2FsbGVkIGJ5IFJlbW90ZVN0b3JlIHdoZW4gYSB3YXRjaCBzdHJlYW0gaXMgc3RhcnRlZCAoaW5jbHVkaW5nIG9uIGVhY2hcclxuICAgICAqIGJhY2tvZmYgYXR0ZW1wdCkuXHJcbiAgICAgKlxyXG4gICAgICogSWYgdGhpcyBpcyB0aGUgZmlyc3QgYXR0ZW1wdCwgaXQgc2V0cyB0aGUgT25saW5lU3RhdGUgdG8gVW5rbm93biBhbmQgc3RhcnRzXHJcbiAgICAgKiB0aGUgb25saW5lU3RhdGVUaW1lci5cclxuICAgICAqL1xyXG4gICAgT25saW5lU3RhdGVUcmFja2VyLnByb3RvdHlwZS5oYW5kbGVXYXRjaFN0cmVhbVN0YXJ0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgaWYgKHRoaXMud2F0Y2hTdHJlYW1GYWlsdXJlcyA9PT0gMCkge1xyXG4gICAgICAgICAgICB0aGlzLnNldEFuZEJyb2FkY2FzdChPbmxpbmVTdGF0ZS5Vbmtub3duKTtcclxuICAgICAgICAgICAgYXNzZXJ0KHRoaXMub25saW5lU3RhdGVUaW1lciA9PT0gbnVsbCwgXCJvbmxpbmVTdGF0ZVRpbWVyIHNob3VsZG4ndCBiZSBzdGFydGVkIHlldFwiKTtcclxuICAgICAgICAgICAgdGhpcy5vbmxpbmVTdGF0ZVRpbWVyID0gdGhpcy5hc3luY1F1ZXVlLmVucXVldWVBZnRlckRlbGF5KFRpbWVySWQuT25saW5lU3RhdGVUaW1lb3V0LCBPTkxJTkVfU1RBVEVfVElNRU9VVF9NUywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMub25saW5lU3RhdGVUaW1lciA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICBhc3NlcnQoX3RoaXMuc3RhdGUgPT09IE9ubGluZVN0YXRlLlVua25vd24sICdUaW1lciBzaG91bGQgYmUgY2FuY2VsZWQgaWYgd2UgdHJhbnNpdGlvbmVkIHRvIGEgZGlmZmVyZW50IHN0YXRlLicpO1xyXG4gICAgICAgICAgICAgICAgX3RoaXMubG9nQ2xpZW50T2ZmbGluZVdhcm5pbmdJZk5lY2Vzc2FyeShcIkJhY2tlbmQgZGlkbid0IHJlc3BvbmQgd2l0aGluIFwiICsgT05MSU5FX1NUQVRFX1RJTUVPVVRfTVMgLyAxMDAwICsgXCIgXCIgK1xyXG4gICAgICAgICAgICAgICAgICAgIFwic2Vjb25kcy5cIik7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5zZXRBbmRCcm9hZGNhc3QoT25saW5lU3RhdGUuT2ZmbGluZSk7XHJcbiAgICAgICAgICAgICAgICAvLyBOT1RFOiBoYW5kbGVXYXRjaFN0cmVhbUZhaWx1cmUoKSB3aWxsIGNvbnRpbnVlIHRvIGluY3JlbWVudFxyXG4gICAgICAgICAgICAgICAgLy8gd2F0Y2hTdHJlYW1GYWlsdXJlcyBldmVuIHRob3VnaCB3ZSBhcmUgYWxyZWFkeSBtYXJrZWQgT2ZmbGluZSxcclxuICAgICAgICAgICAgICAgIC8vIGJ1dCB0aGlzIGlzIG5vbi1oYXJtZnVsLlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBVcGRhdGVzIG91ciBPbmxpbmVTdGF0ZSBhcyBhcHByb3ByaWF0ZSBhZnRlciB0aGUgd2F0Y2ggc3RyZWFtIHJlcG9ydHMgYVxyXG4gICAgICogZmFpbHVyZS4gVGhlIGZpcnN0IGZhaWx1cmUgbW92ZXMgdXMgdG8gdGhlICdVbmtub3duJyBzdGF0ZS4gV2UgdGhlbiBtYXlcclxuICAgICAqIGFsbG93IG11bHRpcGxlIGZhaWx1cmVzIChiYXNlZCBvbiBNQVhfV0FUQ0hfU1RSRUFNX0ZBSUxVUkVTKSBiZWZvcmUgd2VcclxuICAgICAqIGFjdHVhbGx5IHRyYW5zaXRpb24gdG8gdGhlICdPZmZsaW5lJyBzdGF0ZS5cclxuICAgICAqL1xyXG4gICAgT25saW5lU3RhdGVUcmFja2VyLnByb3RvdHlwZS5oYW5kbGVXYXRjaFN0cmVhbUZhaWx1cmUgPSBmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICBpZiAodGhpcy5zdGF0ZSA9PT0gT25saW5lU3RhdGUuT25saW5lKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0QW5kQnJvYWRjYXN0KE9ubGluZVN0YXRlLlVua25vd24pO1xyXG4gICAgICAgICAgICAvLyBUbyBnZXQgdG8gT25saW5lU3RhdGUuT25saW5lLCBzZXQoKSBtdXN0IGhhdmUgYmVlbiBjYWxsZWQgd2hpY2ggd291bGRcclxuICAgICAgICAgICAgLy8gaGF2ZSByZXNldCBvdXIgaGV1cmlzdGljcy5cclxuICAgICAgICAgICAgYXNzZXJ0KHRoaXMud2F0Y2hTdHJlYW1GYWlsdXJlcyA9PT0gMCwgJ3dhdGNoU3RyZWFtRmFpbHVyZXMgbXVzdCBiZSAwJyk7XHJcbiAgICAgICAgICAgIGFzc2VydCh0aGlzLm9ubGluZVN0YXRlVGltZXIgPT09IG51bGwsICdvbmxpbmVTdGF0ZVRpbWVyIG11c3QgYmUgbnVsbCcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy53YXRjaFN0cmVhbUZhaWx1cmVzKys7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLndhdGNoU3RyZWFtRmFpbHVyZXMgPj0gTUFYX1dBVENIX1NUUkVBTV9GQUlMVVJFUykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jbGVhck9ubGluZVN0YXRlVGltZXIoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMubG9nQ2xpZW50T2ZmbGluZVdhcm5pbmdJZk5lY2Vzc2FyeShcIkNvbm5lY3Rpb24gZmFpbGVkIFwiICsgTUFYX1dBVENIX1NUUkVBTV9GQUlMVVJFUyArIFwiIFwiICtcclxuICAgICAgICAgICAgICAgICAgICAoXCJ0aW1lcy4gTW9zdCByZWNlbnQgZXJyb3I6IFwiICsgZXJyb3IudG9TdHJpbmcoKSkpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRBbmRCcm9hZGNhc3QoT25saW5lU3RhdGUuT2ZmbGluZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBFeHBsaWNpdGx5IHNldHMgdGhlIE9ubGluZVN0YXRlIHRvIHRoZSBzcGVjaWZpZWQgc3RhdGUuXHJcbiAgICAgKlxyXG4gICAgICogTm90ZSB0aGF0IHRoaXMgcmVzZXRzIG91ciB0aW1lcnMgLyBmYWlsdXJlIGNvdW50ZXJzLCBldGMuIHVzZWQgYnkgb3VyXHJcbiAgICAgKiBPZmZsaW5lIGhldXJpc3RpY3MsIHNvIG11c3Qgbm90IGJlIHVzZWQgaW4gcGxhY2Ugb2ZcclxuICAgICAqIGhhbmRsZVdhdGNoU3RyZWFtU3RhcnQoKSBhbmQgaGFuZGxlV2F0Y2hTdHJlYW1GYWlsdXJlKCkuXHJcbiAgICAgKi9cclxuICAgIE9ubGluZVN0YXRlVHJhY2tlci5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24gKG5ld1N0YXRlKSB7XHJcbiAgICAgICAgdGhpcy5jbGVhck9ubGluZVN0YXRlVGltZXIoKTtcclxuICAgICAgICB0aGlzLndhdGNoU3RyZWFtRmFpbHVyZXMgPSAwO1xyXG4gICAgICAgIGlmIChuZXdTdGF0ZSA9PT0gT25saW5lU3RhdGUuT25saW5lKSB7XHJcbiAgICAgICAgICAgIC8vIFdlJ3ZlIGNvbm5lY3RlZCB0byB3YXRjaCBhdCBsZWFzdCBvbmNlLiBEb24ndCB3YXJuIHRoZSBkZXZlbG9wZXJcclxuICAgICAgICAgICAgLy8gYWJvdXQgYmVpbmcgb2ZmbGluZSBnb2luZyBmb3J3YXJkLlxyXG4gICAgICAgICAgICB0aGlzLnNob3VsZFdhcm5DbGllbnRJc09mZmxpbmUgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zZXRBbmRCcm9hZGNhc3QobmV3U3RhdGUpO1xyXG4gICAgfTtcclxuICAgIE9ubGluZVN0YXRlVHJhY2tlci5wcm90b3R5cGUuc2V0QW5kQnJvYWRjYXN0ID0gZnVuY3Rpb24gKG5ld1N0YXRlKSB7XHJcbiAgICAgICAgaWYgKG5ld1N0YXRlICE9PSB0aGlzLnN0YXRlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBuZXdTdGF0ZTtcclxuICAgICAgICAgICAgdGhpcy5vbmxpbmVTdGF0ZUhhbmRsZXIobmV3U3RhdGUpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBPbmxpbmVTdGF0ZVRyYWNrZXIucHJvdG90eXBlLmxvZ0NsaWVudE9mZmxpbmVXYXJuaW5nSWZOZWNlc3NhcnkgPSBmdW5jdGlvbiAoZGV0YWlscykge1xyXG4gICAgICAgIHZhciBtZXNzYWdlID0gXCJDb3VsZCBub3QgcmVhY2ggQ2xvdWQgRmlyZXN0b3JlIGJhY2tlbmQuIFwiICsgZGV0YWlscyArIFwiXFxuXCIgK1xyXG4gICAgICAgICAgICBcIlRoaXMgdHlwaWNhbGx5IGluZGljYXRlcyB0aGF0IHlvdXIgZGV2aWNlIGRvZXMgbm90IGhhdmUgYSBoZWFsdGh5IFwiICtcclxuICAgICAgICAgICAgXCJJbnRlcm5ldCBjb25uZWN0aW9uIGF0IHRoZSBtb21lbnQuIFRoZSBjbGllbnQgd2lsbCBvcGVyYXRlIGluIG9mZmxpbmUgXCIgK1xyXG4gICAgICAgICAgICBcIm1vZGUgdW50aWwgaXQgaXMgYWJsZSB0byBzdWNjZXNzZnVsbHkgY29ubmVjdCB0byB0aGUgYmFja2VuZC5cIjtcclxuICAgICAgICBpZiAodGhpcy5zaG91bGRXYXJuQ2xpZW50SXNPZmZsaW5lKSB7XHJcbiAgICAgICAgICAgIGVycm9yKG1lc3NhZ2UpO1xyXG4gICAgICAgICAgICB0aGlzLnNob3VsZFdhcm5DbGllbnRJc09mZmxpbmUgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGRlYnVnKExPR19UQUckNiwgbWVzc2FnZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIE9ubGluZVN0YXRlVHJhY2tlci5wcm90b3R5cGUuY2xlYXJPbmxpbmVTdGF0ZVRpbWVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICh0aGlzLm9ubGluZVN0YXRlVGltZXIgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgdGhpcy5vbmxpbmVTdGF0ZVRpbWVyLmNhbmNlbCgpO1xyXG4gICAgICAgICAgICB0aGlzLm9ubGluZVN0YXRlVGltZXIgPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICByZXR1cm4gT25saW5lU3RhdGVUcmFja2VyO1xyXG59KCkpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEVycm9yIENvZGVzIGRlc2NyaWJpbmcgdGhlIGRpZmZlcmVudCB3YXlzIEdSUEMgY2FuIGZhaWwuIFRoZXNlIGFyZSBjb3BpZWRcclxuICogZGlyZWN0bHkgZnJvbSBHUlBDJ3Mgc291cmNlcyBoZXJlOlxyXG4gKlxyXG4gKiBodHRwczovL2dpdGh1Yi5jb20vZ3JwYy9ncnBjL2Jsb2IvYmNlZWM5NGVhNGZjNWYwMDg1ZDgxMjM1ZDhlMWMwNjc5OGRjMzQxYS9pbmNsdWRlL2dycGMlMkIlMkIvaW1wbC9jb2RlZ2VuL3N0YXR1c19jb2RlX2VudW0uaFxyXG4gKlxyXG4gKiBJbXBvcnRhbnQhIFRoZSBuYW1lcyBvZiB0aGVzZSBpZGVudGlmaWVycyBtYXR0ZXIgYmVjYXVzZSB0aGUgc3RyaW5nIGZvcm1zXHJcbiAqIGFyZSB1c2VkIGZvciByZXZlcnNlIGxvb2t1cHMgZnJvbSB0aGUgd2ViY2hhbm5lbCBzdHJlYW0uIERvIE5PVCBjaGFuZ2UgdGhlXHJcbiAqIG5hbWVzIG9mIHRoZXNlIGlkZW50aWZpZXJzLlxyXG4gKi9cclxudmFyIFJwY0NvZGU7XHJcbihmdW5jdGlvbiAoUnBjQ29kZSkge1xyXG4gICAgUnBjQ29kZVtScGNDb2RlW1wiT0tcIl0gPSAwXSA9IFwiT0tcIjtcclxuICAgIFJwY0NvZGVbUnBjQ29kZVtcIkNBTkNFTExFRFwiXSA9IDFdID0gXCJDQU5DRUxMRURcIjtcclxuICAgIFJwY0NvZGVbUnBjQ29kZVtcIlVOS05PV05cIl0gPSAyXSA9IFwiVU5LTk9XTlwiO1xyXG4gICAgUnBjQ29kZVtScGNDb2RlW1wiSU5WQUxJRF9BUkdVTUVOVFwiXSA9IDNdID0gXCJJTlZBTElEX0FSR1VNRU5UXCI7XHJcbiAgICBScGNDb2RlW1JwY0NvZGVbXCJERUFETElORV9FWENFRURFRFwiXSA9IDRdID0gXCJERUFETElORV9FWENFRURFRFwiO1xyXG4gICAgUnBjQ29kZVtScGNDb2RlW1wiTk9UX0ZPVU5EXCJdID0gNV0gPSBcIk5PVF9GT1VORFwiO1xyXG4gICAgUnBjQ29kZVtScGNDb2RlW1wiQUxSRUFEWV9FWElTVFNcIl0gPSA2XSA9IFwiQUxSRUFEWV9FWElTVFNcIjtcclxuICAgIFJwY0NvZGVbUnBjQ29kZVtcIlBFUk1JU1NJT05fREVOSUVEXCJdID0gN10gPSBcIlBFUk1JU1NJT05fREVOSUVEXCI7XHJcbiAgICBScGNDb2RlW1JwY0NvZGVbXCJVTkFVVEhFTlRJQ0FURURcIl0gPSAxNl0gPSBcIlVOQVVUSEVOVElDQVRFRFwiO1xyXG4gICAgUnBjQ29kZVtScGNDb2RlW1wiUkVTT1VSQ0VfRVhIQVVTVEVEXCJdID0gOF0gPSBcIlJFU09VUkNFX0VYSEFVU1RFRFwiO1xyXG4gICAgUnBjQ29kZVtScGNDb2RlW1wiRkFJTEVEX1BSRUNPTkRJVElPTlwiXSA9IDldID0gXCJGQUlMRURfUFJFQ09ORElUSU9OXCI7XHJcbiAgICBScGNDb2RlW1JwY0NvZGVbXCJBQk9SVEVEXCJdID0gMTBdID0gXCJBQk9SVEVEXCI7XHJcbiAgICBScGNDb2RlW1JwY0NvZGVbXCJPVVRfT0ZfUkFOR0VcIl0gPSAxMV0gPSBcIk9VVF9PRl9SQU5HRVwiO1xyXG4gICAgUnBjQ29kZVtScGNDb2RlW1wiVU5JTVBMRU1FTlRFRFwiXSA9IDEyXSA9IFwiVU5JTVBMRU1FTlRFRFwiO1xyXG4gICAgUnBjQ29kZVtScGNDb2RlW1wiSU5URVJOQUxcIl0gPSAxM10gPSBcIklOVEVSTkFMXCI7XHJcbiAgICBScGNDb2RlW1JwY0NvZGVbXCJVTkFWQUlMQUJMRVwiXSA9IDE0XSA9IFwiVU5BVkFJTEFCTEVcIjtcclxuICAgIFJwY0NvZGVbUnBjQ29kZVtcIkRBVEFfTE9TU1wiXSA9IDE1XSA9IFwiREFUQV9MT1NTXCI7XHJcbn0pKFJwY0NvZGUgfHwgKFJwY0NvZGUgPSB7fSkpO1xyXG4vKipcclxuICogRGV0ZXJtaW5lcyB3aGV0aGVyIGFuIGVycm9yIGNvZGUgcmVwcmVzZW50cyBhIHBlcm1hbmVudCBlcnJvciB3aGVuIHJlY2VpdmVkXHJcbiAqIGluIHJlc3BvbnNlIHRvIGEgbm9uLXdyaXRlIG9wZXJhdGlvbi5cclxuICpcclxuICogU2VlIGlzUGVybWFuZW50V3JpdGVFcnJvciBmb3IgY2xhc3NpZnlpbmcgd3JpdGUgZXJyb3JzLlxyXG4gKi9cclxuZnVuY3Rpb24gaXNQZXJtYW5lbnRFcnJvcihjb2RlKSB7XHJcbiAgICBzd2l0Y2ggKGNvZGUpIHtcclxuICAgICAgICBjYXNlIENvZGUuT0s6XHJcbiAgICAgICAgICAgIHJldHVybiBmYWlsKCdUcmVhdGVkIHN0YXR1cyBPSyBhcyBlcnJvcicpO1xyXG4gICAgICAgIGNhc2UgQ29kZS5DQU5DRUxMRUQ6XHJcbiAgICAgICAgY2FzZSBDb2RlLlVOS05PV046XHJcbiAgICAgICAgY2FzZSBDb2RlLkRFQURMSU5FX0VYQ0VFREVEOlxyXG4gICAgICAgIGNhc2UgQ29kZS5SRVNPVVJDRV9FWEhBVVNURUQ6XHJcbiAgICAgICAgY2FzZSBDb2RlLklOVEVSTkFMOlxyXG4gICAgICAgIGNhc2UgQ29kZS5VTkFWQUlMQUJMRTpcclxuICAgICAgICAvLyBVbmF1dGhlbnRpY2F0ZWQgbWVhbnMgc29tZXRoaW5nIHdlbnQgd3Jvbmcgd2l0aCBvdXIgdG9rZW4gYW5kIHdlIG5lZWRcclxuICAgICAgICAvLyB0byByZXRyeSB3aXRoIG5ldyBjcmVkZW50aWFscyB3aGljaCB3aWxsIGhhcHBlbiBhdXRvbWF0aWNhbGx5LlxyXG4gICAgICAgIGNhc2UgQ29kZS5VTkFVVEhFTlRJQ0FURUQ6XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICBjYXNlIENvZGUuSU5WQUxJRF9BUkdVTUVOVDpcclxuICAgICAgICBjYXNlIENvZGUuTk9UX0ZPVU5EOlxyXG4gICAgICAgIGNhc2UgQ29kZS5BTFJFQURZX0VYSVNUUzpcclxuICAgICAgICBjYXNlIENvZGUuUEVSTUlTU0lPTl9ERU5JRUQ6XHJcbiAgICAgICAgY2FzZSBDb2RlLkZBSUxFRF9QUkVDT05ESVRJT046XHJcbiAgICAgICAgLy8gQWJvcnRlZCBtaWdodCBiZSByZXRyaWVkIGluIHNvbWUgc2NlbmFyaW9zLCBidXQgdGhhdCBpcyBkZXBlbmRhbnQgb25cclxuICAgICAgICAvLyB0aGUgY29udGV4dCBhbmQgc2hvdWxkIGhhbmRsZWQgaW5kaXZpZHVhbGx5IGJ5IHRoZSBjYWxsaW5nIGNvZGUuXHJcbiAgICAgICAgLy8gU2VlIGh0dHBzOi8vY2xvdWQuZ29vZ2xlLmNvbS9hcGlzL2Rlc2lnbi9lcnJvcnMuXHJcbiAgICAgICAgY2FzZSBDb2RlLkFCT1JURUQ6XHJcbiAgICAgICAgY2FzZSBDb2RlLk9VVF9PRl9SQU5HRTpcclxuICAgICAgICBjYXNlIENvZGUuVU5JTVBMRU1FTlRFRDpcclxuICAgICAgICBjYXNlIENvZGUuREFUQV9MT1NTOlxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICByZXR1cm4gZmFpbCgnVW5rbm93biBzdGF0dXMgY29kZTogJyArIGNvZGUpO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBEZXRlcm1pbmVzIHdoZXRoZXIgYW4gZXJyb3IgY29kZSByZXByZXNlbnRzIGEgcGVybWFuZW50IGVycm9yIHdoZW4gcmVjZWl2ZWRcclxuICogaW4gcmVzcG9uc2UgdG8gYSB3cml0ZSBvcGVyYXRpb24uXHJcbiAqXHJcbiAqIFdyaXRlIG9wZXJhdGlvbnMgbXVzdCBiZSBoYW5kbGVkIHNwZWNpYWxseSBiZWNhdXNlIGFzIG9mIGIvMTE5NDM3NzY0LCBBQk9SVEVEXHJcbiAqIGVycm9ycyBvbiB0aGUgd3JpdGUgc3RyZWFtIHNob3VsZCBiZSByZXRyaWVkIHRvbyAoZXZlbiB0aG91Z2ggQUJPUlRFRCBlcnJvcnNcclxuICogYXJlIG5vdCBnZW5lcmFsbHkgcmV0cnlhYmxlKS5cclxuICpcclxuICogTm90ZSB0aGF0IGR1cmluZyB0aGUgaW5pdGlhbCBoYW5kc2hha2Ugb24gdGhlIHdyaXRlIHN0cmVhbSBhbiBBQk9SVEVEIGVycm9yXHJcbiAqIHNpZ25hbHMgdGhhdCB3ZSBzaG91bGQgZGlzY2FyZCBvdXIgc3RyZWFtIHRva2VuIChpLmUuIGl0IGlzIHBlcm1hbmVudCkuIFRoaXNcclxuICogbWVhbnMgYSBoYW5kc2hha2UgZXJyb3Igc2hvdWxkIGJlIGNsYXNzaWZpZWQgd2l0aCBpc1Blcm1hbmVudEVycm9yLCBhYm92ZS5cclxuICovXHJcbmZ1bmN0aW9uIGlzUGVybWFuZW50V3JpdGVFcnJvcihjb2RlKSB7XHJcbiAgICByZXR1cm4gaXNQZXJtYW5lbnRFcnJvcihjb2RlKSAmJiBjb2RlICE9PSBDb2RlLkFCT1JURUQ7XHJcbn1cclxuLyoqXHJcbiAqIE1hcHMgYW4gZXJyb3IgQ29kZSBmcm9tIGEgR1JQQyBzdGF0dXMgaWRlbnRpZmllciBsaWtlICdOT1RfRk9VTkQnLlxyXG4gKlxyXG4gKiBAcmV0dXJucyBUaGUgQ29kZSBlcXVpdmFsZW50IHRvIHRoZSBnaXZlbiBzdGF0dXMgc3RyaW5nIG9yIHVuZGVmaW5lZCBpZlxyXG4gKiAgICAgdGhlcmUgaXMgbm8gbWF0Y2guXHJcbiAqL1xyXG5mdW5jdGlvbiBtYXBDb2RlRnJvbVJwY1N0YXR1cyhzdGF0dXMpIHtcclxuICAgIC8vIGxvb2t1cCBieSBzdHJpbmdcclxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbiAgICB2YXIgY29kZSA9IFJwY0NvZGVbc3RhdHVzXTtcclxuICAgIGlmIChjb2RlID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG1hcENvZGVGcm9tUnBjQ29kZShjb2RlKTtcclxufVxyXG4vKipcclxuICogTWFwcyBhbiBlcnJvciBDb2RlIGZyb20gR1JQQyBzdGF0dXMgY29kZSBudW1iZXIsIGxpa2UgMCwgMSwgb3IgMTQuIFRoZXNlXHJcbiAqIGFyZSBub3QgdGhlIHNhbWUgYXMgSFRUUCBzdGF0dXMgY29kZXMuXHJcbiAqXHJcbiAqIEByZXR1cm5zIFRoZSBDb2RlIGVxdWl2YWxlbnQgdG8gdGhlIGdpdmVuIEdSUEMgc3RhdHVzIGNvZGUuIEZhaWxzIGlmIHRoZXJlXHJcbiAqICAgICBpcyBubyBtYXRjaC5cclxuICovXHJcbmZ1bmN0aW9uIG1hcENvZGVGcm9tUnBjQ29kZShjb2RlKSB7XHJcbiAgICBpZiAoY29kZSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgLy8gVGhpcyBzaG91bGRuJ3Qgbm9ybWFsbHkgaGFwcGVuLCBidXQgaW4gY2VydGFpbiBlcnJvciBjYXNlcyAobGlrZSB0cnlpbmdcclxuICAgICAgICAvLyB0byBzZW5kIGludmFsaWQgcHJvdG8gbWVzc2FnZXMpIHdlIG1heSBnZXQgYW4gZXJyb3Igd2l0aCBubyBHUlBDIGNvZGUuXHJcbiAgICAgICAgZXJyb3IoJ0dSUEMgZXJyb3IgaGFzIG5vIC5jb2RlJyk7XHJcbiAgICAgICAgcmV0dXJuIENvZGUuVU5LTk9XTjtcclxuICAgIH1cclxuICAgIHN3aXRjaCAoY29kZSkge1xyXG4gICAgICAgIGNhc2UgUnBjQ29kZS5PSzpcclxuICAgICAgICAgICAgcmV0dXJuIENvZGUuT0s7XHJcbiAgICAgICAgY2FzZSBScGNDb2RlLkNBTkNFTExFRDpcclxuICAgICAgICAgICAgcmV0dXJuIENvZGUuQ0FOQ0VMTEVEO1xyXG4gICAgICAgIGNhc2UgUnBjQ29kZS5VTktOT1dOOlxyXG4gICAgICAgICAgICByZXR1cm4gQ29kZS5VTktOT1dOO1xyXG4gICAgICAgIGNhc2UgUnBjQ29kZS5ERUFETElORV9FWENFRURFRDpcclxuICAgICAgICAgICAgcmV0dXJuIENvZGUuREVBRExJTkVfRVhDRUVERUQ7XHJcbiAgICAgICAgY2FzZSBScGNDb2RlLlJFU09VUkNFX0VYSEFVU1RFRDpcclxuICAgICAgICAgICAgcmV0dXJuIENvZGUuUkVTT1VSQ0VfRVhIQVVTVEVEO1xyXG4gICAgICAgIGNhc2UgUnBjQ29kZS5JTlRFUk5BTDpcclxuICAgICAgICAgICAgcmV0dXJuIENvZGUuSU5URVJOQUw7XHJcbiAgICAgICAgY2FzZSBScGNDb2RlLlVOQVZBSUxBQkxFOlxyXG4gICAgICAgICAgICByZXR1cm4gQ29kZS5VTkFWQUlMQUJMRTtcclxuICAgICAgICBjYXNlIFJwY0NvZGUuVU5BVVRIRU5USUNBVEVEOlxyXG4gICAgICAgICAgICByZXR1cm4gQ29kZS5VTkFVVEhFTlRJQ0FURUQ7XHJcbiAgICAgICAgY2FzZSBScGNDb2RlLklOVkFMSURfQVJHVU1FTlQ6XHJcbiAgICAgICAgICAgIHJldHVybiBDb2RlLklOVkFMSURfQVJHVU1FTlQ7XHJcbiAgICAgICAgY2FzZSBScGNDb2RlLk5PVF9GT1VORDpcclxuICAgICAgICAgICAgcmV0dXJuIENvZGUuTk9UX0ZPVU5EO1xyXG4gICAgICAgIGNhc2UgUnBjQ29kZS5BTFJFQURZX0VYSVNUUzpcclxuICAgICAgICAgICAgcmV0dXJuIENvZGUuQUxSRUFEWV9FWElTVFM7XHJcbiAgICAgICAgY2FzZSBScGNDb2RlLlBFUk1JU1NJT05fREVOSUVEOlxyXG4gICAgICAgICAgICByZXR1cm4gQ29kZS5QRVJNSVNTSU9OX0RFTklFRDtcclxuICAgICAgICBjYXNlIFJwY0NvZGUuRkFJTEVEX1BSRUNPTkRJVElPTjpcclxuICAgICAgICAgICAgcmV0dXJuIENvZGUuRkFJTEVEX1BSRUNPTkRJVElPTjtcclxuICAgICAgICBjYXNlIFJwY0NvZGUuQUJPUlRFRDpcclxuICAgICAgICAgICAgcmV0dXJuIENvZGUuQUJPUlRFRDtcclxuICAgICAgICBjYXNlIFJwY0NvZGUuT1VUX09GX1JBTkdFOlxyXG4gICAgICAgICAgICByZXR1cm4gQ29kZS5PVVRfT0ZfUkFOR0U7XHJcbiAgICAgICAgY2FzZSBScGNDb2RlLlVOSU1QTEVNRU5URUQ6XHJcbiAgICAgICAgICAgIHJldHVybiBDb2RlLlVOSU1QTEVNRU5URUQ7XHJcbiAgICAgICAgY2FzZSBScGNDb2RlLkRBVEFfTE9TUzpcclxuICAgICAgICAgICAgcmV0dXJuIENvZGUuREFUQV9MT1NTO1xyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgIHJldHVybiBmYWlsKCdVbmtub3duIHN0YXR1cyBjb2RlOiAnICsgY29kZSk7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIE1hcHMgYW4gUlBDIGNvZGUgZnJvbSBhIENvZGUuIFRoaXMgaXMgdGhlIHJldmVyc2Ugb3BlcmF0aW9uIGZyb21cclxuICogbWFwQ29kZUZyb21ScGNDb2RlIGFuZCBzaG91bGQgcmVhbGx5IG9ubHkgYmUgdXNlZCBpbiB0ZXN0cy5cclxuICovXHJcbmZ1bmN0aW9uIG1hcFJwY0NvZGVGcm9tQ29kZShjb2RlKSB7XHJcbiAgICBpZiAoY29kZSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgcmV0dXJuIFJwY0NvZGUuT0s7XHJcbiAgICB9XHJcbiAgICBzd2l0Y2ggKGNvZGUpIHtcclxuICAgICAgICBjYXNlIENvZGUuT0s6XHJcbiAgICAgICAgICAgIHJldHVybiBScGNDb2RlLk9LO1xyXG4gICAgICAgIGNhc2UgQ29kZS5DQU5DRUxMRUQ6XHJcbiAgICAgICAgICAgIHJldHVybiBScGNDb2RlLkNBTkNFTExFRDtcclxuICAgICAgICBjYXNlIENvZGUuVU5LTk9XTjpcclxuICAgICAgICAgICAgcmV0dXJuIFJwY0NvZGUuVU5LTk9XTjtcclxuICAgICAgICBjYXNlIENvZGUuREVBRExJTkVfRVhDRUVERUQ6XHJcbiAgICAgICAgICAgIHJldHVybiBScGNDb2RlLkRFQURMSU5FX0VYQ0VFREVEO1xyXG4gICAgICAgIGNhc2UgQ29kZS5SRVNPVVJDRV9FWEhBVVNURUQ6XHJcbiAgICAgICAgICAgIHJldHVybiBScGNDb2RlLlJFU09VUkNFX0VYSEFVU1RFRDtcclxuICAgICAgICBjYXNlIENvZGUuSU5URVJOQUw6XHJcbiAgICAgICAgICAgIHJldHVybiBScGNDb2RlLklOVEVSTkFMO1xyXG4gICAgICAgIGNhc2UgQ29kZS5VTkFWQUlMQUJMRTpcclxuICAgICAgICAgICAgcmV0dXJuIFJwY0NvZGUuVU5BVkFJTEFCTEU7XHJcbiAgICAgICAgY2FzZSBDb2RlLlVOQVVUSEVOVElDQVRFRDpcclxuICAgICAgICAgICAgcmV0dXJuIFJwY0NvZGUuVU5BVVRIRU5USUNBVEVEO1xyXG4gICAgICAgIGNhc2UgQ29kZS5JTlZBTElEX0FSR1VNRU5UOlxyXG4gICAgICAgICAgICByZXR1cm4gUnBjQ29kZS5JTlZBTElEX0FSR1VNRU5UO1xyXG4gICAgICAgIGNhc2UgQ29kZS5OT1RfRk9VTkQ6XHJcbiAgICAgICAgICAgIHJldHVybiBScGNDb2RlLk5PVF9GT1VORDtcclxuICAgICAgICBjYXNlIENvZGUuQUxSRUFEWV9FWElTVFM6XHJcbiAgICAgICAgICAgIHJldHVybiBScGNDb2RlLkFMUkVBRFlfRVhJU1RTO1xyXG4gICAgICAgIGNhc2UgQ29kZS5QRVJNSVNTSU9OX0RFTklFRDpcclxuICAgICAgICAgICAgcmV0dXJuIFJwY0NvZGUuUEVSTUlTU0lPTl9ERU5JRUQ7XHJcbiAgICAgICAgY2FzZSBDb2RlLkZBSUxFRF9QUkVDT05ESVRJT046XHJcbiAgICAgICAgICAgIHJldHVybiBScGNDb2RlLkZBSUxFRF9QUkVDT05ESVRJT047XHJcbiAgICAgICAgY2FzZSBDb2RlLkFCT1JURUQ6XHJcbiAgICAgICAgICAgIHJldHVybiBScGNDb2RlLkFCT1JURUQ7XHJcbiAgICAgICAgY2FzZSBDb2RlLk9VVF9PRl9SQU5HRTpcclxuICAgICAgICAgICAgcmV0dXJuIFJwY0NvZGUuT1VUX09GX1JBTkdFO1xyXG4gICAgICAgIGNhc2UgQ29kZS5VTklNUExFTUVOVEVEOlxyXG4gICAgICAgICAgICByZXR1cm4gUnBjQ29kZS5VTklNUExFTUVOVEVEO1xyXG4gICAgICAgIGNhc2UgQ29kZS5EQVRBX0xPU1M6XHJcbiAgICAgICAgICAgIHJldHVybiBScGNDb2RlLkRBVEFfTE9TUztcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICByZXR1cm4gZmFpbCgnVW5rbm93biBzdGF0dXMgY29kZTogJyArIGNvZGUpO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBDb252ZXJ0cyBhbiBIVFRQIHJlc3BvbnNlJ3MgZXJyb3Igc3RhdHVzIHRvIHRoZSBlcXVpdmFsZW50IGVycm9yIGNvZGUuXHJcbiAqXHJcbiAqIEBwYXJhbSBzdGF0dXMgQW4gSFRUUCBlcnJvciByZXNwb25zZSBzdGF0dXMgKFwiRkFJTEVEX1BSRUNPTkRJVElPTlwiLFxyXG4gKiBcIlVOS05PV05cIiwgZXRjLilcclxuICogQHJldHVybnMgVGhlIGVxdWl2YWxlbnQgQ29kZS4gTm9uLW1hdGNoaW5nIHJlc3BvbnNlcyBhcmUgbWFwcGVkIHRvXHJcbiAqICAgICBDb2RlLlVOS05PV04uXHJcbiAqL1xyXG5mdW5jdGlvbiBtYXBDb2RlRnJvbUh0dHBSZXNwb25zZUVycm9yU3RhdHVzKHN0YXR1cykge1xyXG4gICAgdmFyIHNlcnZlckVycm9yID0gc3RhdHVzLnRvTG93ZXJDYXNlKCkucmVwbGFjZSgnXycsICctJyk7XHJcbiAgICByZXR1cm4gT2JqZWN0LnZhbHVlcyhDb2RlKS5pbmRleE9mKHNlcnZlckVycm9yKSA+PSAwXHJcbiAgICAgICAgPyBzZXJ2ZXJFcnJvclxyXG4gICAgICAgIDogQ29kZS5VTktOT1dOO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogRG9jdW1lbnRTZXQgaXMgYW4gaW1tdXRhYmxlIChjb3B5LW9uLXdyaXRlKSBjb2xsZWN0aW9uIHRoYXQgaG9sZHMgZG9jdW1lbnRzXHJcbiAqIGluIG9yZGVyIHNwZWNpZmllZCBieSB0aGUgcHJvdmlkZWQgY29tcGFyYXRvci4gV2UgYWx3YXlzIGFkZCBhIGRvY3VtZW50IGtleVxyXG4gKiBjb21wYXJhdG9yIG9uIHRvcCBvZiB3aGF0IGlzIHByb3ZpZGVkIHRvIGd1YXJhbnRlZSBkb2N1bWVudCBlcXVhbGl0eSBiYXNlZCBvblxyXG4gKiB0aGUga2V5LlxyXG4gKi9cclxudmFyIERvY3VtZW50U2V0ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgLyoqIFRoZSBkZWZhdWx0IG9yZGVyaW5nIGlzIGJ5IGtleSBpZiB0aGUgY29tcGFyYXRvciBpcyBvbWl0dGVkICovXHJcbiAgICBmdW5jdGlvbiBEb2N1bWVudFNldChjb21wKSB7XHJcbiAgICAgICAgLy8gV2UgYXJlIGFkZGluZyBkb2N1bWVudCBrZXkgY29tcGFyYXRvciB0byB0aGUgZW5kIGFzIGl0J3MgdGhlIG9ubHlcclxuICAgICAgICAvLyBndWFyYW50ZWVkIHVuaXF1ZSBwcm9wZXJ0eSBvZiBhIGRvY3VtZW50LlxyXG4gICAgICAgIGlmIChjb21wKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29tcGFyYXRvciA9IGZ1bmN0aW9uIChkMSwgZDIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBjb21wKGQxLCBkMikgfHwgRG9jdW1lbnRLZXkuY29tcGFyYXRvcihkMS5rZXksIGQyLmtleSk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmNvbXBhcmF0b3IgPSBmdW5jdGlvbiAoZDEsIGQyKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gRG9jdW1lbnRLZXkuY29tcGFyYXRvcihkMS5rZXksIGQyLmtleSk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMua2V5ZWRNYXAgPSBkb2N1bWVudE1hcCgpO1xyXG4gICAgICAgIHRoaXMuc29ydGVkU2V0ID0gbmV3IFNvcnRlZE1hcCh0aGlzLmNvbXBhcmF0b3IpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIGFuIGVtcHR5IGNvcHkgb2YgdGhlIGV4aXN0aW5nIERvY3VtZW50U2V0LCB1c2luZyB0aGUgc2FtZVxyXG4gICAgICogY29tcGFyYXRvci5cclxuICAgICAqL1xyXG4gICAgRG9jdW1lbnRTZXQuZW1wdHlTZXQgPSBmdW5jdGlvbiAob2xkU2V0KSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBEb2N1bWVudFNldChvbGRTZXQuY29tcGFyYXRvcik7XHJcbiAgICB9O1xyXG4gICAgRG9jdW1lbnRTZXQucHJvdG90eXBlLmhhcyA9IGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5rZXllZE1hcC5nZXQoa2V5KSAhPSBudWxsO1xyXG4gICAgfTtcclxuICAgIERvY3VtZW50U2V0LnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMua2V5ZWRNYXAuZ2V0KGtleSk7XHJcbiAgICB9O1xyXG4gICAgRG9jdW1lbnRTZXQucHJvdG90eXBlLmZpcnN0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNvcnRlZFNldC5taW5LZXkoKTtcclxuICAgIH07XHJcbiAgICBEb2N1bWVudFNldC5wcm90b3R5cGUubGFzdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zb3J0ZWRTZXQubWF4S2V5KCk7XHJcbiAgICB9O1xyXG4gICAgRG9jdW1lbnRTZXQucHJvdG90eXBlLmlzRW1wdHkgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc29ydGVkU2V0LmlzRW1wdHkoKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdGhlIGluZGV4IG9mIHRoZSBwcm92aWRlZCBrZXkgaW4gdGhlIGRvY3VtZW50IHNldCwgb3IgLTEgaWYgdGhlXHJcbiAgICAgKiBkb2N1bWVudCBrZXkgaXMgbm90IHByZXNlbnQgaW4gdGhlIHNldDtcclxuICAgICAqL1xyXG4gICAgRG9jdW1lbnRTZXQucHJvdG90eXBlLmluZGV4T2YgPSBmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgICAgdmFyIGRvYyA9IHRoaXMua2V5ZWRNYXAuZ2V0KGtleSk7XHJcbiAgICAgICAgcmV0dXJuIGRvYyA/IHRoaXMuc29ydGVkU2V0LmluZGV4T2YoZG9jKSA6IC0xO1xyXG4gICAgfTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShEb2N1bWVudFNldC5wcm90b3R5cGUsIFwic2l6ZVwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNvcnRlZFNldC5zaXplO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgLyoqIEl0ZXJhdGVzIGRvY3VtZW50cyBpbiBvcmRlciBkZWZpbmVkIGJ5IFwiY29tcGFyYXRvclwiICovXHJcbiAgICBEb2N1bWVudFNldC5wcm90b3R5cGUuZm9yRWFjaCA9IGZ1bmN0aW9uIChjYikge1xyXG4gICAgICAgIHRoaXMuc29ydGVkU2V0Lmlub3JkZXJUcmF2ZXJzYWwoZnVuY3Rpb24gKGssIHYpIHtcclxuICAgICAgICAgICAgY2Ioayk7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKiogSW5zZXJ0cyBvciB1cGRhdGVzIGEgZG9jdW1lbnQgd2l0aCB0aGUgc2FtZSBrZXkgKi9cclxuICAgIERvY3VtZW50U2V0LnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbiAoZG9jKSB7XHJcbiAgICAgICAgLy8gRmlyc3QgcmVtb3ZlIHRoZSBlbGVtZW50IGlmIHdlIGhhdmUgaXQuXHJcbiAgICAgICAgdmFyIHNldCA9IHRoaXMuZGVsZXRlKGRvYy5rZXkpO1xyXG4gICAgICAgIHJldHVybiBzZXQuY29weShzZXQua2V5ZWRNYXAuaW5zZXJ0KGRvYy5rZXksIGRvYyksIHNldC5zb3J0ZWRTZXQuaW5zZXJ0KGRvYywgbnVsbCkpO1xyXG4gICAgfTtcclxuICAgIC8qKiBEZWxldGVzIGEgZG9jdW1lbnQgd2l0aCBhIGdpdmVuIGtleSAqL1xyXG4gICAgRG9jdW1lbnRTZXQucHJvdG90eXBlLmRlbGV0ZSA9IGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICB2YXIgZG9jID0gdGhpcy5nZXQoa2V5KTtcclxuICAgICAgICBpZiAoIWRvYykge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY29weSh0aGlzLmtleWVkTWFwLnJlbW92ZShrZXkpLCB0aGlzLnNvcnRlZFNldC5yZW1vdmUoZG9jKSk7XHJcbiAgICB9O1xyXG4gICAgRG9jdW1lbnRTZXQucHJvdG90eXBlLmlzRXF1YWwgPSBmdW5jdGlvbiAob3RoZXIpIHtcclxuICAgICAgICBpZiAoIShvdGhlciBpbnN0YW5jZW9mIERvY3VtZW50U2V0KSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLnNpemUgIT09IG90aGVyLnNpemUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgdGhpc0l0ID0gdGhpcy5zb3J0ZWRTZXQuZ2V0SXRlcmF0b3IoKTtcclxuICAgICAgICB2YXIgb3RoZXJJdCA9IG90aGVyLnNvcnRlZFNldC5nZXRJdGVyYXRvcigpO1xyXG4gICAgICAgIHdoaWxlICh0aGlzSXQuaGFzTmV4dCgpKSB7XHJcbiAgICAgICAgICAgIHZhciB0aGlzRG9jID0gdGhpc0l0LmdldE5leHQoKS5rZXk7XHJcbiAgICAgICAgICAgIHZhciBvdGhlckRvYyA9IG90aGVySXQuZ2V0TmV4dCgpLmtleTtcclxuICAgICAgICAgICAgaWYgKCF0aGlzRG9jLmlzRXF1YWwob3RoZXJEb2MpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9O1xyXG4gICAgRG9jdW1lbnRTZXQucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBkb2NTdHJpbmdzID0gW107XHJcbiAgICAgICAgdGhpcy5mb3JFYWNoKGZ1bmN0aW9uIChkb2MpIHtcclxuICAgICAgICAgICAgZG9jU3RyaW5ncy5wdXNoKGRvYy50b1N0cmluZygpKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBpZiAoZG9jU3RyaW5ncy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuICdEb2N1bWVudFNldCAoKSc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gJ0RvY3VtZW50U2V0IChcXG4gICcgKyBkb2NTdHJpbmdzLmpvaW4oJyAgXFxuJykgKyAnXFxuKSc7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIERvY3VtZW50U2V0LnByb3RvdHlwZS5jb3B5ID0gZnVuY3Rpb24gKGtleWVkTWFwLCBzb3J0ZWRTZXQpIHtcclxuICAgICAgICB2YXIgbmV3U2V0ID0gbmV3IERvY3VtZW50U2V0KCk7XHJcbiAgICAgICAgbmV3U2V0LmNvbXBhcmF0b3IgPSB0aGlzLmNvbXBhcmF0b3I7XHJcbiAgICAgICAgbmV3U2V0LmtleWVkTWFwID0ga2V5ZWRNYXA7XHJcbiAgICAgICAgbmV3U2V0LnNvcnRlZFNldCA9IHNvcnRlZFNldDtcclxuICAgICAgICByZXR1cm4gbmV3U2V0O1xyXG4gICAgfTtcclxuICAgIHJldHVybiBEb2N1bWVudFNldDtcclxufSgpKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnZhciBDaGFuZ2VUeXBlO1xyXG4oZnVuY3Rpb24gKENoYW5nZVR5cGUpIHtcclxuICAgIENoYW5nZVR5cGVbQ2hhbmdlVHlwZVtcIkFkZGVkXCJdID0gMF0gPSBcIkFkZGVkXCI7XHJcbiAgICBDaGFuZ2VUeXBlW0NoYW5nZVR5cGVbXCJSZW1vdmVkXCJdID0gMV0gPSBcIlJlbW92ZWRcIjtcclxuICAgIENoYW5nZVR5cGVbQ2hhbmdlVHlwZVtcIk1vZGlmaWVkXCJdID0gMl0gPSBcIk1vZGlmaWVkXCI7XHJcbiAgICBDaGFuZ2VUeXBlW0NoYW5nZVR5cGVbXCJNZXRhZGF0YVwiXSA9IDNdID0gXCJNZXRhZGF0YVwiO1xyXG59KShDaGFuZ2VUeXBlIHx8IChDaGFuZ2VUeXBlID0ge30pKTtcclxudmFyIFN5bmNTdGF0ZTtcclxuKGZ1bmN0aW9uIChTeW5jU3RhdGUpIHtcclxuICAgIFN5bmNTdGF0ZVtTeW5jU3RhdGVbXCJMb2NhbFwiXSA9IDBdID0gXCJMb2NhbFwiO1xyXG4gICAgU3luY1N0YXRlW1N5bmNTdGF0ZVtcIlN5bmNlZFwiXSA9IDFdID0gXCJTeW5jZWRcIjtcclxufSkoU3luY1N0YXRlIHx8IChTeW5jU3RhdGUgPSB7fSkpO1xyXG4vKipcclxuICogRG9jdW1lbnRDaGFuZ2VTZXQga2VlcHMgdHJhY2sgb2YgYSBzZXQgb2YgY2hhbmdlcyB0byBkb2NzIGluIGEgcXVlcnksIG1lcmdpbmdcclxuICogZHVwbGljYXRlIGV2ZW50cyBmb3IgdGhlIHNhbWUgZG9jLlxyXG4gKi9cclxudmFyIERvY3VtZW50Q2hhbmdlU2V0ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gRG9jdW1lbnRDaGFuZ2VTZXQoKSB7XHJcbiAgICAgICAgdGhpcy5jaGFuZ2VNYXAgPSBuZXcgU29ydGVkTWFwKERvY3VtZW50S2V5LmNvbXBhcmF0b3IpO1xyXG4gICAgfVxyXG4gICAgRG9jdW1lbnRDaGFuZ2VTZXQucHJvdG90eXBlLnRyYWNrID0gZnVuY3Rpb24gKGNoYW5nZSkge1xyXG4gICAgICAgIHZhciBrZXkgPSBjaGFuZ2UuZG9jLmtleTtcclxuICAgICAgICB2YXIgb2xkQ2hhbmdlID0gdGhpcy5jaGFuZ2VNYXAuZ2V0KGtleSk7XHJcbiAgICAgICAgaWYgKCFvbGRDaGFuZ2UpIHtcclxuICAgICAgICAgICAgdGhpcy5jaGFuZ2VNYXAgPSB0aGlzLmNoYW5nZU1hcC5pbnNlcnQoa2V5LCBjaGFuZ2UpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIE1lcmdlIHRoZSBuZXcgY2hhbmdlIHdpdGggdGhlIGV4aXN0aW5nIGNoYW5nZS5cclxuICAgICAgICBpZiAoY2hhbmdlLnR5cGUgIT09IENoYW5nZVR5cGUuQWRkZWQgJiZcclxuICAgICAgICAgICAgb2xkQ2hhbmdlLnR5cGUgPT09IENoYW5nZVR5cGUuTWV0YWRhdGEpIHtcclxuICAgICAgICAgICAgdGhpcy5jaGFuZ2VNYXAgPSB0aGlzLmNoYW5nZU1hcC5pbnNlcnQoa2V5LCBjaGFuZ2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChjaGFuZ2UudHlwZSA9PT0gQ2hhbmdlVHlwZS5NZXRhZGF0YSAmJlxyXG4gICAgICAgICAgICBvbGRDaGFuZ2UudHlwZSAhPT0gQ2hhbmdlVHlwZS5SZW1vdmVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlTWFwID0gdGhpcy5jaGFuZ2VNYXAuaW5zZXJ0KGtleSwge1xyXG4gICAgICAgICAgICAgICAgdHlwZTogb2xkQ2hhbmdlLnR5cGUsXHJcbiAgICAgICAgICAgICAgICBkb2M6IGNoYW5nZS5kb2NcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGNoYW5nZS50eXBlID09PSBDaGFuZ2VUeXBlLk1vZGlmaWVkICYmXHJcbiAgICAgICAgICAgIG9sZENoYW5nZS50eXBlID09PSBDaGFuZ2VUeXBlLk1vZGlmaWVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlTWFwID0gdGhpcy5jaGFuZ2VNYXAuaW5zZXJ0KGtleSwge1xyXG4gICAgICAgICAgICAgICAgdHlwZTogQ2hhbmdlVHlwZS5Nb2RpZmllZCxcclxuICAgICAgICAgICAgICAgIGRvYzogY2hhbmdlLmRvY1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoY2hhbmdlLnR5cGUgPT09IENoYW5nZVR5cGUuTW9kaWZpZWQgJiZcclxuICAgICAgICAgICAgb2xkQ2hhbmdlLnR5cGUgPT09IENoYW5nZVR5cGUuQWRkZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5jaGFuZ2VNYXAgPSB0aGlzLmNoYW5nZU1hcC5pbnNlcnQoa2V5LCB7XHJcbiAgICAgICAgICAgICAgICB0eXBlOiBDaGFuZ2VUeXBlLkFkZGVkLFxyXG4gICAgICAgICAgICAgICAgZG9jOiBjaGFuZ2UuZG9jXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChjaGFuZ2UudHlwZSA9PT0gQ2hhbmdlVHlwZS5SZW1vdmVkICYmXHJcbiAgICAgICAgICAgIG9sZENoYW5nZS50eXBlID09PSBDaGFuZ2VUeXBlLkFkZGVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlTWFwID0gdGhpcy5jaGFuZ2VNYXAucmVtb3ZlKGtleSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGNoYW5nZS50eXBlID09PSBDaGFuZ2VUeXBlLlJlbW92ZWQgJiZcclxuICAgICAgICAgICAgb2xkQ2hhbmdlLnR5cGUgPT09IENoYW5nZVR5cGUuTW9kaWZpZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5jaGFuZ2VNYXAgPSB0aGlzLmNoYW5nZU1hcC5pbnNlcnQoa2V5LCB7XHJcbiAgICAgICAgICAgICAgICB0eXBlOiBDaGFuZ2VUeXBlLlJlbW92ZWQsXHJcbiAgICAgICAgICAgICAgICBkb2M6IG9sZENoYW5nZS5kb2NcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGNoYW5nZS50eXBlID09PSBDaGFuZ2VUeXBlLkFkZGVkICYmXHJcbiAgICAgICAgICAgIG9sZENoYW5nZS50eXBlID09PSBDaGFuZ2VUeXBlLlJlbW92ZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5jaGFuZ2VNYXAgPSB0aGlzLmNoYW5nZU1hcC5pbnNlcnQoa2V5LCB7XHJcbiAgICAgICAgICAgICAgICB0eXBlOiBDaGFuZ2VUeXBlLk1vZGlmaWVkLFxyXG4gICAgICAgICAgICAgICAgZG9jOiBjaGFuZ2UuZG9jXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gVGhpcyBpbmNsdWRlcyB0aGVzZSBjYXNlcywgd2hpY2ggZG9uJ3QgbWFrZSBzZW5zZTpcclxuICAgICAgICAgICAgLy8gQWRkZWQtPkFkZGVkXHJcbiAgICAgICAgICAgIC8vIFJlbW92ZWQtPlJlbW92ZWRcclxuICAgICAgICAgICAgLy8gTW9kaWZpZWQtPkFkZGVkXHJcbiAgICAgICAgICAgIC8vIFJlbW92ZWQtPk1vZGlmaWVkXHJcbiAgICAgICAgICAgIC8vIE1ldGFkYXRhLT5BZGRlZFxyXG4gICAgICAgICAgICAvLyBSZW1vdmVkLT5NZXRhZGF0YVxyXG4gICAgICAgICAgICBmYWlsKCd1bnN1cHBvcnRlZCBjb21iaW5hdGlvbiBvZiBjaGFuZ2VzOiAnICtcclxuICAgICAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KGNoYW5nZSkgK1xyXG4gICAgICAgICAgICAgICAgJyBhZnRlciAnICtcclxuICAgICAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KG9sZENoYW5nZSkpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBEb2N1bWVudENoYW5nZVNldC5wcm90b3R5cGUuZ2V0Q2hhbmdlcyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgY2hhbmdlcyA9IFtdO1xyXG4gICAgICAgIHRoaXMuY2hhbmdlTWFwLmlub3JkZXJUcmF2ZXJzYWwoZnVuY3Rpb24gKGtleSwgY2hhbmdlKSB7XHJcbiAgICAgICAgICAgIGNoYW5nZXMucHVzaChjaGFuZ2UpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBjaGFuZ2VzO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBEb2N1bWVudENoYW5nZVNldDtcclxufSgpKTtcclxudmFyIFZpZXdTbmFwc2hvdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFZpZXdTbmFwc2hvdChxdWVyeSwgZG9jcywgb2xkRG9jcywgZG9jQ2hhbmdlcywgbXV0YXRlZEtleXMsIGZyb21DYWNoZSwgc3luY1N0YXRlQ2hhbmdlZCwgZXhjbHVkZXNNZXRhZGF0YUNoYW5nZXMpIHtcclxuICAgICAgICB0aGlzLnF1ZXJ5ID0gcXVlcnk7XHJcbiAgICAgICAgdGhpcy5kb2NzID0gZG9jcztcclxuICAgICAgICB0aGlzLm9sZERvY3MgPSBvbGREb2NzO1xyXG4gICAgICAgIHRoaXMuZG9jQ2hhbmdlcyA9IGRvY0NoYW5nZXM7XHJcbiAgICAgICAgdGhpcy5tdXRhdGVkS2V5cyA9IG11dGF0ZWRLZXlzO1xyXG4gICAgICAgIHRoaXMuZnJvbUNhY2hlID0gZnJvbUNhY2hlO1xyXG4gICAgICAgIHRoaXMuc3luY1N0YXRlQ2hhbmdlZCA9IHN5bmNTdGF0ZUNoYW5nZWQ7XHJcbiAgICAgICAgdGhpcy5leGNsdWRlc01ldGFkYXRhQ2hhbmdlcyA9IGV4Y2x1ZGVzTWV0YWRhdGFDaGFuZ2VzO1xyXG4gICAgfVxyXG4gICAgLyoqIFJldHVybnMgYSB2aWV3IHNuYXBzaG90IGFzIGlmIGFsbCBkb2N1bWVudHMgaW4gdGhlIHNuYXBzaG90IHdlcmUgYWRkZWQuICovXHJcbiAgICBWaWV3U25hcHNob3QuZnJvbUluaXRpYWxEb2N1bWVudHMgPSBmdW5jdGlvbiAocXVlcnksIGRvY3VtZW50cywgbXV0YXRlZEtleXMsIGZyb21DYWNoZSkge1xyXG4gICAgICAgIHZhciBjaGFuZ2VzID0gW107XHJcbiAgICAgICAgZG9jdW1lbnRzLmZvckVhY2goZnVuY3Rpb24gKGRvYykge1xyXG4gICAgICAgICAgICBjaGFuZ2VzLnB1c2goeyB0eXBlOiBDaGFuZ2VUeXBlLkFkZGVkLCBkb2M6IGRvYyB9KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gbmV3IFZpZXdTbmFwc2hvdChxdWVyeSwgZG9jdW1lbnRzLCBEb2N1bWVudFNldC5lbXB0eVNldChkb2N1bWVudHMpLCBjaGFuZ2VzLCBtdXRhdGVkS2V5cywgZnJvbUNhY2hlLCBcclxuICAgICAgICAvKiBzeW5jU3RhdGVDaGFuZ2VkPSAqLyB0cnVlLCBcclxuICAgICAgICAvKiBleGNsdWRlc01ldGFkYXRhQ2hhbmdlcz0gKi8gZmFsc2UpO1xyXG4gICAgfTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShWaWV3U25hcHNob3QucHJvdG90eXBlLCBcImhhc1BlbmRpbmdXcml0ZXNcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gIXRoaXMubXV0YXRlZEtleXMuaXNFbXB0eSgpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgVmlld1NuYXBzaG90LnByb3RvdHlwZS5pc0VxdWFsID0gZnVuY3Rpb24gKG90aGVyKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZnJvbUNhY2hlICE9PSBvdGhlci5mcm9tQ2FjaGUgfHxcclxuICAgICAgICAgICAgdGhpcy5zeW5jU3RhdGVDaGFuZ2VkICE9PSBvdGhlci5zeW5jU3RhdGVDaGFuZ2VkIHx8XHJcbiAgICAgICAgICAgICF0aGlzLm11dGF0ZWRLZXlzLmlzRXF1YWwob3RoZXIubXV0YXRlZEtleXMpIHx8XHJcbiAgICAgICAgICAgICF0aGlzLnF1ZXJ5LmlzRXF1YWwob3RoZXIucXVlcnkpIHx8XHJcbiAgICAgICAgICAgICF0aGlzLmRvY3MuaXNFcXVhbChvdGhlci5kb2NzKSB8fFxyXG4gICAgICAgICAgICAhdGhpcy5vbGREb2NzLmlzRXF1YWwob3RoZXIub2xkRG9jcykpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgY2hhbmdlcyA9IHRoaXMuZG9jQ2hhbmdlcztcclxuICAgICAgICB2YXIgb3RoZXJDaGFuZ2VzID0gb3RoZXIuZG9jQ2hhbmdlcztcclxuICAgICAgICBpZiAoY2hhbmdlcy5sZW5ndGggIT09IG90aGVyQ2hhbmdlcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNoYW5nZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKGNoYW5nZXNbaV0udHlwZSAhPT0gb3RoZXJDaGFuZ2VzW2ldLnR5cGUgfHxcclxuICAgICAgICAgICAgICAgICFjaGFuZ2VzW2ldLmRvYy5pc0VxdWFsKG90aGVyQ2hhbmdlc1tpXS5kb2MpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFZpZXdTbmFwc2hvdDtcclxufSgpKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBBbiBldmVudCBmcm9tIHRoZSBSZW1vdGVTdG9yZS4gSXQgaXMgc3BsaXQgaW50byB0YXJnZXRDaGFuZ2VzIChjaGFuZ2VzIHRvIHRoZVxyXG4gKiBzdGF0ZSBvciB0aGUgc2V0IG9mIGRvY3VtZW50cyBpbiBvdXIgd2F0Y2hlZCB0YXJnZXRzKSBhbmQgZG9jdW1lbnRVcGRhdGVzXHJcbiAqIChjaGFuZ2VzIHRvIHRoZSBhY3R1YWwgZG9jdW1lbnRzKS5cclxuICovXHJcbnZhciBSZW1vdGVFdmVudCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFJlbW90ZUV2ZW50KFxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgc25hcHNob3QgdmVyc2lvbiB0aGlzIGV2ZW50IGJyaW5ncyB1cyB1cCB0bywgb3IgTUlOIGlmIG5vdCBzZXQuXHJcbiAgICAgKi9cclxuICAgIHNuYXBzaG90VmVyc2lvbiwgXHJcbiAgICAvKipcclxuICAgICAqIEEgbWFwIGZyb20gdGFyZ2V0IHRvIGNoYW5nZXMgdG8gdGhlIHRhcmdldC4gU2VlIFRhcmdldENoYW5nZS5cclxuICAgICAqL1xyXG4gICAgdGFyZ2V0Q2hhbmdlcywgXHJcbiAgICAvKipcclxuICAgICAqIEEgc2V0IG9mIHRhcmdldHMgdGhhdCBpcyBrbm93biB0byBiZSBpbmNvbnNpc3RlbnQuIExpc3RlbnMgZm9yIHRoZXNlXHJcbiAgICAgKiB0YXJnZXRzIHNob3VsZCBiZSByZS1lc3RhYmxpc2hlZCB3aXRob3V0IHJlc3VtZSB0b2tlbnMuXHJcbiAgICAgKi9cclxuICAgIHRhcmdldE1pc21hdGNoZXMsIFxyXG4gICAgLyoqXHJcbiAgICAgKiBBIHNldCBvZiB3aGljaCBkb2N1bWVudHMgaGF2ZSBjaGFuZ2VkIG9yIGJlZW4gZGVsZXRlZCwgYWxvbmcgd2l0aCB0aGVcclxuICAgICAqIGRvYydzIG5ldyB2YWx1ZXMgKGlmIG5vdCBkZWxldGVkKS5cclxuICAgICAqL1xyXG4gICAgZG9jdW1lbnRVcGRhdGVzLCBcclxuICAgIC8qKlxyXG4gICAgICogQSBzZXQgb2Ygd2hpY2ggZG9jdW1lbnQgdXBkYXRlcyBhcmUgZHVlIG9ubHkgdG8gbGltYm8gcmVzb2x1dGlvbiB0YXJnZXRzLlxyXG4gICAgICovXHJcbiAgICByZXNvbHZlZExpbWJvRG9jdW1lbnRzKSB7XHJcbiAgICAgICAgdGhpcy5zbmFwc2hvdFZlcnNpb24gPSBzbmFwc2hvdFZlcnNpb247XHJcbiAgICAgICAgdGhpcy50YXJnZXRDaGFuZ2VzID0gdGFyZ2V0Q2hhbmdlcztcclxuICAgICAgICB0aGlzLnRhcmdldE1pc21hdGNoZXMgPSB0YXJnZXRNaXNtYXRjaGVzO1xyXG4gICAgICAgIHRoaXMuZG9jdW1lbnRVcGRhdGVzID0gZG9jdW1lbnRVcGRhdGVzO1xyXG4gICAgICAgIHRoaXMucmVzb2x2ZWRMaW1ib0RvY3VtZW50cyA9IHJlc29sdmVkTGltYm9Eb2N1bWVudHM7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEhBQ0s6IFZpZXdzIHJlcXVpcmUgUmVtb3RlRXZlbnRzIGluIG9yZGVyIHRvIGRldGVybWluZSB3aGV0aGVyIHRoZSB2aWV3IGlzXHJcbiAgICAgKiBDVVJSRU5ULCBidXQgc2Vjb25kYXJ5IHRhYnMgZG9uJ3QgcmVjZWl2ZSByZW1vdGUgZXZlbnRzLiBTbyB0aGlzIG1ldGhvZCBpc1xyXG4gICAgICogdXNlZCB0byBjcmVhdGUgYSBzeW50aGVzaXplZCBSZW1vdGVFdmVudCB0aGF0IGNhbiBiZSB1c2VkIHRvIGFwcGx5IGFcclxuICAgICAqIENVUlJFTlQgc3RhdHVzIGNoYW5nZSB0byBhIFZpZXcsIGZvciBxdWVyaWVzIGV4ZWN1dGVkIGluIGEgZGlmZmVyZW50IHRhYi5cclxuICAgICAqL1xyXG4gICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS10YWIgb25seVxyXG4gICAgUmVtb3RlRXZlbnQuY3JlYXRlU3ludGhlc2l6ZWRSZW1vdGVFdmVudEZvckN1cnJlbnRDaGFuZ2UgPSBmdW5jdGlvbiAodGFyZ2V0SWQsIGN1cnJlbnQpIHtcclxuICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgdmFyIHRhcmdldENoYW5nZXMgPSAoX2EgPSB7fSxcclxuICAgICAgICAgICAgX2FbdGFyZ2V0SWRdID0gVGFyZ2V0Q2hhbmdlLmNyZWF0ZVN5bnRoZXNpemVkVGFyZ2V0Q2hhbmdlRm9yQ3VycmVudENoYW5nZSh0YXJnZXRJZCwgY3VycmVudCksXHJcbiAgICAgICAgICAgIF9hKTtcclxuICAgICAgICByZXR1cm4gbmV3IFJlbW90ZUV2ZW50KFNuYXBzaG90VmVyc2lvbi5NSU4sIHRhcmdldENoYW5nZXMsIHRhcmdldElkU2V0KCksIG1heWJlRG9jdW1lbnRNYXAoKSwgZG9jdW1lbnRLZXlTZXQoKSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFJlbW90ZUV2ZW50O1xyXG59KCkpO1xyXG4vKipcclxuICogQSBUYXJnZXRDaGFuZ2Ugc3BlY2lmaWVzIHRoZSBzZXQgb2YgY2hhbmdlcyBmb3IgYSBzcGVjaWZpYyB0YXJnZXQgYXMgcGFydCBvZlxyXG4gKiBhIFJlbW90ZUV2ZW50LiBUaGVzZSBjaGFuZ2VzIHRyYWNrIHdoaWNoIGRvY3VtZW50cyBhcmUgYWRkZWQsIG1vZGlmaWVkIG9yXHJcbiAqIHJlbW92ZWQsIGFzIHdlbGwgYXMgdGhlIHRhcmdldCdzIHJlc3VtZSB0b2tlbiBhbmQgd2hldGhlciB0aGUgdGFyZ2V0IGlzXHJcbiAqIG1hcmtlZCBDVVJSRU5ULlxyXG4gKiBUaGUgYWN0dWFsIGNoYW5nZXMgKnRvKiBkb2N1bWVudHMgYXJlIG5vdCBwYXJ0IG9mIHRoZSBUYXJnZXRDaGFuZ2Ugc2luY2VcclxuICogZG9jdW1lbnRzIG1heSBiZSBwYXJ0IG9mIG11bHRpcGxlIHRhcmdldHMuXHJcbiAqL1xyXG52YXIgVGFyZ2V0Q2hhbmdlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gVGFyZ2V0Q2hhbmdlKFxyXG4gICAgLyoqXHJcbiAgICAgKiBBbiBvcGFxdWUsIHNlcnZlci1hc3NpZ25lZCB0b2tlbiB0aGF0IGFsbG93cyB3YXRjaGluZyBhIHF1ZXJ5IHRvIGJlIHJlc3VtZWRcclxuICAgICAqIGFmdGVyIGRpc2Nvbm5lY3Rpbmcgd2l0aG91dCByZXRyYW5zbWl0dGluZyBhbGwgdGhlIGRhdGEgdGhhdCBtYXRjaGVzIHRoZVxyXG4gICAgICogcXVlcnkuIFRoZSByZXN1bWUgdG9rZW4gZXNzZW50aWFsbHkgaWRlbnRpZmllcyBhIHBvaW50IGluIHRpbWUgZnJvbSB3aGljaFxyXG4gICAgICogdGhlIHNlcnZlciBzaG91bGQgcmVzdW1lIHNlbmRpbmcgcmVzdWx0cy5cclxuICAgICAqL1xyXG4gICAgcmVzdW1lVG9rZW4sIFxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgXCJjdXJyZW50XCIgKHN5bmNlZCkgc3RhdHVzIG9mIHRoaXMgdGFyZ2V0LiBOb3RlIHRoYXQgXCJjdXJyZW50XCJcclxuICAgICAqIGhhcyBzcGVjaWFsIG1lYW5pbmcgaW4gdGhlIFJQQyBwcm90b2NvbCB0aGF0IGltcGxpZXMgdGhhdCBhIHRhcmdldCBpc1xyXG4gICAgICogYm90aCB1cC10by1kYXRlIGFuZCBjb25zaXN0ZW50IHdpdGggdGhlIHJlc3Qgb2YgdGhlIHdhdGNoIHN0cmVhbS5cclxuICAgICAqL1xyXG4gICAgY3VycmVudCwgXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBzZXQgb2YgZG9jdW1lbnRzIHRoYXQgd2VyZSBuZXdseSBhc3NpZ25lZCB0byB0aGlzIHRhcmdldCBhcyBwYXJ0IG9mXHJcbiAgICAgKiB0aGlzIHJlbW90ZSBldmVudC5cclxuICAgICAqL1xyXG4gICAgYWRkZWREb2N1bWVudHMsIFxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgc2V0IG9mIGRvY3VtZW50cyB0aGF0IHdlcmUgYWxyZWFkeSBhc3NpZ25lZCB0byB0aGlzIHRhcmdldCBidXQgcmVjZWl2ZWRcclxuICAgICAqIGFuIHVwZGF0ZSBkdXJpbmcgdGhpcyByZW1vdGUgZXZlbnQuXHJcbiAgICAgKi9cclxuICAgIG1vZGlmaWVkRG9jdW1lbnRzLCBcclxuICAgIC8qKlxyXG4gICAgICogVGhlIHNldCBvZiBkb2N1bWVudHMgdGhhdCB3ZXJlIHJlbW92ZWQgZnJvbSB0aGlzIHRhcmdldCBhcyBwYXJ0IG9mIHRoaXNcclxuICAgICAqIHJlbW90ZSBldmVudC5cclxuICAgICAqL1xyXG4gICAgcmVtb3ZlZERvY3VtZW50cykge1xyXG4gICAgICAgIHRoaXMucmVzdW1lVG9rZW4gPSByZXN1bWVUb2tlbjtcclxuICAgICAgICB0aGlzLmN1cnJlbnQgPSBjdXJyZW50O1xyXG4gICAgICAgIHRoaXMuYWRkZWREb2N1bWVudHMgPSBhZGRlZERvY3VtZW50cztcclxuICAgICAgICB0aGlzLm1vZGlmaWVkRG9jdW1lbnRzID0gbW9kaWZpZWREb2N1bWVudHM7XHJcbiAgICAgICAgdGhpcy5yZW1vdmVkRG9jdW1lbnRzID0gcmVtb3ZlZERvY3VtZW50cztcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogVGhpcyBtZXRob2QgaXMgdXNlZCB0byBjcmVhdGUgYSBzeW50aGVzaXplZCBUYXJnZXRDaGFuZ2VzIHRoYXQgY2FuIGJlIHVzZWQgdG9cclxuICAgICAqIGFwcGx5IGEgQ1VSUkVOVCBzdGF0dXMgY2hhbmdlIHRvIGEgVmlldyAoZm9yIHF1ZXJpZXMgZXhlY3V0ZWQgaW4gYSBkaWZmZXJlbnRcclxuICAgICAqIHRhYikgb3IgZm9yIG5ldyBxdWVyaWVzICh0byByYWlzZSBzbmFwc2hvdHMgd2l0aCBjb3JyZWN0IENVUlJFTlQgc3RhdHVzKS5cclxuICAgICAqL1xyXG4gICAgVGFyZ2V0Q2hhbmdlLmNyZWF0ZVN5bnRoZXNpemVkVGFyZ2V0Q2hhbmdlRm9yQ3VycmVudENoYW5nZSA9IGZ1bmN0aW9uICh0YXJnZXRJZCwgY3VycmVudCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgVGFyZ2V0Q2hhbmdlKGVtcHR5Qnl0ZVN0cmluZygpLCBjdXJyZW50LCBkb2N1bWVudEtleVNldCgpLCBkb2N1bWVudEtleVNldCgpLCBkb2N1bWVudEtleVNldCgpKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gVGFyZ2V0Q2hhbmdlO1xyXG59KCkpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFJlcHJlc2VudHMgYSBjaGFuZ2VkIGRvY3VtZW50IGFuZCBhIGxpc3Qgb2YgdGFyZ2V0IGlkcyB0byB3aGljaCB0aGlzIGNoYW5nZVxyXG4gKiBhcHBsaWVzLlxyXG4gKlxyXG4gKiBJZiBkb2N1bWVudCBoYXMgYmVlbiBkZWxldGVkIE5vRG9jdW1lbnQgd2lsbCBiZSBwcm92aWRlZC5cclxuICovXHJcbnZhciBEb2N1bWVudFdhdGNoQ2hhbmdlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gRG9jdW1lbnRXYXRjaENoYW5nZShcclxuICAgIC8qKiBUaGUgbmV3IGRvY3VtZW50IGFwcGxpZXMgdG8gYWxsIG9mIHRoZXNlIHRhcmdldHMuICovXHJcbiAgICB1cGRhdGVkVGFyZ2V0SWRzLCBcclxuICAgIC8qKiBUaGUgbmV3IGRvY3VtZW50IGlzIHJlbW92ZWQgZnJvbSBhbGwgb2YgdGhlc2UgdGFyZ2V0cy4gKi9cclxuICAgIHJlbW92ZWRUYXJnZXRJZHMsIFxyXG4gICAgLyoqIFRoZSBrZXkgb2YgdGhlIGRvY3VtZW50IGZvciB0aGlzIGNoYW5nZS4gKi9cclxuICAgIGtleSwgXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBuZXcgZG9jdW1lbnQgb3IgTm9Eb2N1bWVudCBpZiBpdCB3YXMgZGVsZXRlZC4gSXMgbnVsbCBpZiB0aGVcclxuICAgICAqIGRvY3VtZW50IHdlbnQgb3V0IG9mIHZpZXcgd2l0aG91dCB0aGUgc2VydmVyIHNlbmRpbmcgYSBuZXcgZG9jdW1lbnQuXHJcbiAgICAgKi9cclxuICAgIG5ld0RvYykge1xyXG4gICAgICAgIHRoaXMudXBkYXRlZFRhcmdldElkcyA9IHVwZGF0ZWRUYXJnZXRJZHM7XHJcbiAgICAgICAgdGhpcy5yZW1vdmVkVGFyZ2V0SWRzID0gcmVtb3ZlZFRhcmdldElkcztcclxuICAgICAgICB0aGlzLmtleSA9IGtleTtcclxuICAgICAgICB0aGlzLm5ld0RvYyA9IG5ld0RvYztcclxuICAgIH1cclxuICAgIHJldHVybiBEb2N1bWVudFdhdGNoQ2hhbmdlO1xyXG59KCkpO1xyXG52YXIgRXhpc3RlbmNlRmlsdGVyQ2hhbmdlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gRXhpc3RlbmNlRmlsdGVyQ2hhbmdlKHRhcmdldElkLCBleGlzdGVuY2VGaWx0ZXIpIHtcclxuICAgICAgICB0aGlzLnRhcmdldElkID0gdGFyZ2V0SWQ7XHJcbiAgICAgICAgdGhpcy5leGlzdGVuY2VGaWx0ZXIgPSBleGlzdGVuY2VGaWx0ZXI7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gRXhpc3RlbmNlRmlsdGVyQ2hhbmdlO1xyXG59KCkpO1xyXG52YXIgV2F0Y2hUYXJnZXRDaGFuZ2VTdGF0ZTtcclxuKGZ1bmN0aW9uIChXYXRjaFRhcmdldENoYW5nZVN0YXRlKSB7XHJcbiAgICBXYXRjaFRhcmdldENoYW5nZVN0YXRlW1dhdGNoVGFyZ2V0Q2hhbmdlU3RhdGVbXCJOb0NoYW5nZVwiXSA9IDBdID0gXCJOb0NoYW5nZVwiO1xyXG4gICAgV2F0Y2hUYXJnZXRDaGFuZ2VTdGF0ZVtXYXRjaFRhcmdldENoYW5nZVN0YXRlW1wiQWRkZWRcIl0gPSAxXSA9IFwiQWRkZWRcIjtcclxuICAgIFdhdGNoVGFyZ2V0Q2hhbmdlU3RhdGVbV2F0Y2hUYXJnZXRDaGFuZ2VTdGF0ZVtcIlJlbW92ZWRcIl0gPSAyXSA9IFwiUmVtb3ZlZFwiO1xyXG4gICAgV2F0Y2hUYXJnZXRDaGFuZ2VTdGF0ZVtXYXRjaFRhcmdldENoYW5nZVN0YXRlW1wiQ3VycmVudFwiXSA9IDNdID0gXCJDdXJyZW50XCI7XHJcbiAgICBXYXRjaFRhcmdldENoYW5nZVN0YXRlW1dhdGNoVGFyZ2V0Q2hhbmdlU3RhdGVbXCJSZXNldFwiXSA9IDRdID0gXCJSZXNldFwiO1xyXG59KShXYXRjaFRhcmdldENoYW5nZVN0YXRlIHx8IChXYXRjaFRhcmdldENoYW5nZVN0YXRlID0ge30pKTtcclxudmFyIFdhdGNoVGFyZ2V0Q2hhbmdlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gV2F0Y2hUYXJnZXRDaGFuZ2UoXHJcbiAgICAvKiogV2hhdCBraW5kIG9mIGNoYW5nZSBvY2N1cnJlZCB0byB0aGUgd2F0Y2ggdGFyZ2V0LiAqL1xyXG4gICAgc3RhdGUsIFxyXG4gICAgLyoqIFRoZSB0YXJnZXQgSURzIHRoYXQgd2VyZSBhZGRlZC9yZW1vdmVkL3NldC4gKi9cclxuICAgIHRhcmdldElkcywgXHJcbiAgICAvKipcclxuICAgICAqIEFuIG9wYXF1ZSwgc2VydmVyLWFzc2lnbmVkIHRva2VuIHRoYXQgYWxsb3dzIHdhdGNoaW5nIGEgdGFyZ2V0IHRvIGJlXHJcbiAgICAgKiByZXN1bWVkIGFmdGVyIGRpc2Nvbm5lY3Rpbmcgd2l0aG91dCByZXRyYW5zbWl0dGluZyBhbGwgdGhlIGRhdGEgdGhhdFxyXG4gICAgICogbWF0Y2hlcyB0aGUgdGFyZ2V0LiBUaGUgcmVzdW1lIHRva2VuIGVzc2VudGlhbGx5IGlkZW50aWZpZXMgYSBwb2ludCBpblxyXG4gICAgICogdGltZSBmcm9tIHdoaWNoIHRoZSBzZXJ2ZXIgc2hvdWxkIHJlc3VtZSBzZW5kaW5nIHJlc3VsdHMuXHJcbiAgICAgKi9cclxuICAgIHJlc3VtZVRva2VuLCBcclxuICAgIC8qKiBBbiBSUEMgZXJyb3IgaW5kaWNhdGluZyB3aHkgdGhlIHdhdGNoIGZhaWxlZC4gKi9cclxuICAgIGNhdXNlKSB7XHJcbiAgICAgICAgaWYgKHJlc3VtZVRva2VuID09PSB2b2lkIDApIHsgcmVzdW1lVG9rZW4gPSBlbXB0eUJ5dGVTdHJpbmcoKTsgfVxyXG4gICAgICAgIGlmIChjYXVzZSA9PT0gdm9pZCAwKSB7IGNhdXNlID0gbnVsbDsgfVxyXG4gICAgICAgIHRoaXMuc3RhdGUgPSBzdGF0ZTtcclxuICAgICAgICB0aGlzLnRhcmdldElkcyA9IHRhcmdldElkcztcclxuICAgICAgICB0aGlzLnJlc3VtZVRva2VuID0gcmVzdW1lVG9rZW47XHJcbiAgICAgICAgdGhpcy5jYXVzZSA9IGNhdXNlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIFdhdGNoVGFyZ2V0Q2hhbmdlO1xyXG59KCkpO1xyXG4vKiogVHJhY2tzIHRoZSBpbnRlcm5hbCBzdGF0ZSBvZiBhIFdhdGNoIHRhcmdldC4gKi9cclxudmFyIFRhcmdldFN0YXRlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gVGFyZ2V0U3RhdGUoKSB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVGhlIG51bWJlciBvZiBwZW5kaW5nIHJlc3BvbnNlcyAoYWRkcyBvciByZW1vdmVzKSB0aGF0IHdlIGFyZSB3YWl0aW5nIG9uLlxyXG4gICAgICAgICAqIFdlIG9ubHkgY29uc2lkZXIgdGFyZ2V0cyBhY3RpdmUgdGhhdCBoYXZlIG5vIHBlbmRpbmcgcmVzcG9uc2VzLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMucGVuZGluZ1Jlc3BvbnNlcyA9IDA7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogS2VlcHMgdHJhY2sgb2YgdGhlIGRvY3VtZW50IGNoYW5nZXMgc2luY2UgdGhlIGxhc3QgcmFpc2VkIHNuYXBzaG90LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogVGhlc2UgY2hhbmdlcyBhcmUgY29udGludW91c2x5IHVwZGF0ZWQgYXMgd2UgcmVjZWl2ZSBkb2N1bWVudCB1cGRhdGVzIGFuZFxyXG4gICAgICAgICAqIGFsd2F5cyByZWZsZWN0IHRoZSBjdXJyZW50IHNldCBvZiBjaGFuZ2VzIGFnYWluc3QgdGhlIGxhc3QgaXNzdWVkIHNuYXBzaG90LlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuZG9jdW1lbnRDaGFuZ2VzID0gc25hcHNob3RDaGFuZ2VzTWFwKCk7XHJcbiAgICAgICAgLyoqIFNlZSBwdWJsaWMgZ2V0dGVycyBmb3IgZXhwbGFuYXRpb25zIG9mIHRoZXNlIGZpZWxkcy4gKi9cclxuICAgICAgICB0aGlzLl9yZXN1bWVUb2tlbiA9IGVtcHR5Qnl0ZVN0cmluZygpO1xyXG4gICAgICAgIHRoaXMuX2N1cnJlbnQgPSBmYWxzZTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBXaGV0aGVyIHRoaXMgdGFyZ2V0IHN0YXRlIHNob3VsZCBiZSBpbmNsdWRlZCBpbiB0aGUgbmV4dCBzbmFwc2hvdC4gV2VcclxuICAgICAgICAgKiBpbml0aWFsaXplIHRvIHRydWUgc28gdGhhdCBuZXdseS1hZGRlZCB0YXJnZXRzIGFyZSBpbmNsdWRlZCBpbiB0aGUgbmV4dFxyXG4gICAgICAgICAqIFJlbW90ZUV2ZW50LlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuX2hhc1BlbmRpbmdDaGFuZ2VzID0gdHJ1ZTtcclxuICAgIH1cclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShUYXJnZXRTdGF0ZS5wcm90b3R5cGUsIFwiY3VycmVudFwiLCB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogV2hldGhlciB0aGlzIHRhcmdldCBoYXMgYmVlbiBtYXJrZWQgJ2N1cnJlbnQnLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogJ0N1cnJlbnQnIGhhcyBzcGVjaWFsIG1lYW5pbmcgaW4gdGhlIFJQQyBwcm90b2NvbDogSXQgaW1wbGllcyB0aGF0IHRoZVxyXG4gICAgICAgICAqIFdhdGNoIGJhY2tlbmQgaGFzIHNlbnQgdXMgYWxsIGNoYW5nZXMgdXAgdG8gdGhlIHBvaW50IGF0IHdoaWNoIHRoZSB0YXJnZXRcclxuICAgICAgICAgKiB3YXMgYWRkZWQgYW5kIHRoYXQgdGhlIHRhcmdldCBpcyBjb25zaXN0ZW50IHdpdGggdGhlIHJlc3Qgb2YgdGhlIHdhdGNoXHJcbiAgICAgICAgICogc3RyZWFtLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fY3VycmVudDtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShUYXJnZXRTdGF0ZS5wcm90b3R5cGUsIFwicmVzdW1lVG9rZW5cIiwge1xyXG4gICAgICAgIC8qKiBUaGUgbGFzdCByZXN1bWUgdG9rZW4gc2VudCB0byB1cyBmb3IgdGhpcyB0YXJnZXQuICovXHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9yZXN1bWVUb2tlbjtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShUYXJnZXRTdGF0ZS5wcm90b3R5cGUsIFwiaXNQZW5kaW5nXCIsIHtcclxuICAgICAgICAvKiogV2hldGhlciB0aGlzIHRhcmdldCBoYXMgcGVuZGluZyB0YXJnZXQgYWRkcyBvciB0YXJnZXQgcmVtb3Zlcy4gKi9cclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucGVuZGluZ1Jlc3BvbnNlcyAhPT0gMDtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShUYXJnZXRTdGF0ZS5wcm90b3R5cGUsIFwiaGFzUGVuZGluZ0NoYW5nZXNcIiwge1xyXG4gICAgICAgIC8qKiBXaGV0aGVyIHdlIGhhdmUgbW9kaWZpZWQgYW55IHN0YXRlIHRoYXQgc2hvdWxkIHRyaWdnZXIgYSBzbmFwc2hvdC4gKi9cclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2hhc1BlbmRpbmdDaGFuZ2VzO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgLyoqXHJcbiAgICAgKiBBcHBsaWVzIHRoZSByZXN1bWUgdG9rZW4gdG8gdGhlIFRhcmdldENoYW5nZSwgYnV0IG9ubHkgd2hlbiBpdCBoYXMgYSBuZXdcclxuICAgICAqIHZhbHVlLiBFbXB0eSByZXN1bWVUb2tlbnMgYXJlIGRpc2NhcmRlZC5cclxuICAgICAqL1xyXG4gICAgVGFyZ2V0U3RhdGUucHJvdG90eXBlLnVwZGF0ZVJlc3VtZVRva2VuID0gZnVuY3Rpb24gKHJlc3VtZVRva2VuKSB7XHJcbiAgICAgICAgaWYgKHJlc3VtZVRva2VuLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgdGhpcy5faGFzUGVuZGluZ0NoYW5nZXMgPSB0cnVlO1xyXG4gICAgICAgICAgICB0aGlzLl9yZXN1bWVUb2tlbiA9IHJlc3VtZVRva2VuO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYSB0YXJnZXQgY2hhbmdlIGZyb20gdGhlIGN1cnJlbnQgc2V0IG9mIGNoYW5nZXMuXHJcbiAgICAgKlxyXG4gICAgICogVG8gcmVzZXQgdGhlIGRvY3VtZW50IGNoYW5nZXMgYWZ0ZXIgcmFpc2luZyB0aGlzIHNuYXBzaG90LCBjYWxsXHJcbiAgICAgKiBgY2xlYXJQZW5kaW5nQ2hhbmdlcygpYC5cclxuICAgICAqL1xyXG4gICAgVGFyZ2V0U3RhdGUucHJvdG90eXBlLnRvVGFyZ2V0Q2hhbmdlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBhZGRlZERvY3VtZW50cyA9IGRvY3VtZW50S2V5U2V0KCk7XHJcbiAgICAgICAgdmFyIG1vZGlmaWVkRG9jdW1lbnRzID0gZG9jdW1lbnRLZXlTZXQoKTtcclxuICAgICAgICB2YXIgcmVtb3ZlZERvY3VtZW50cyA9IGRvY3VtZW50S2V5U2V0KCk7XHJcbiAgICAgICAgdGhpcy5kb2N1bWVudENoYW5nZXMuZm9yRWFjaChmdW5jdGlvbiAoa2V5LCBjaGFuZ2VUeXBlKSB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAoY2hhbmdlVHlwZSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSBDaGFuZ2VUeXBlLkFkZGVkOlxyXG4gICAgICAgICAgICAgICAgICAgIGFkZGVkRG9jdW1lbnRzID0gYWRkZWREb2N1bWVudHMuYWRkKGtleSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIENoYW5nZVR5cGUuTW9kaWZpZWQ6XHJcbiAgICAgICAgICAgICAgICAgICAgbW9kaWZpZWREb2N1bWVudHMgPSBtb2RpZmllZERvY3VtZW50cy5hZGQoa2V5KTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgQ2hhbmdlVHlwZS5SZW1vdmVkOlxyXG4gICAgICAgICAgICAgICAgICAgIHJlbW92ZWREb2N1bWVudHMgPSByZW1vdmVkRG9jdW1lbnRzLmFkZChrZXkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICBmYWlsKCdFbmNvdW50ZXJlZCBpbnZhbGlkIGNoYW5nZSB0eXBlOiAnICsgY2hhbmdlVHlwZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gbmV3IFRhcmdldENoYW5nZSh0aGlzLl9yZXN1bWVUb2tlbiwgdGhpcy5fY3VycmVudCwgYWRkZWREb2N1bWVudHMsIG1vZGlmaWVkRG9jdW1lbnRzLCByZW1vdmVkRG9jdW1lbnRzKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJlc2V0cyB0aGUgZG9jdW1lbnQgY2hhbmdlcyBhbmQgc2V0cyBgaGFzUGVuZGluZ0NoYW5nZXNgIHRvIGZhbHNlLlxyXG4gICAgICovXHJcbiAgICBUYXJnZXRTdGF0ZS5wcm90b3R5cGUuY2xlYXJQZW5kaW5nQ2hhbmdlcyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLl9oYXNQZW5kaW5nQ2hhbmdlcyA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuZG9jdW1lbnRDaGFuZ2VzID0gc25hcHNob3RDaGFuZ2VzTWFwKCk7XHJcbiAgICB9O1xyXG4gICAgVGFyZ2V0U3RhdGUucHJvdG90eXBlLmFkZERvY3VtZW50Q2hhbmdlID0gZnVuY3Rpb24gKGtleSwgY2hhbmdlVHlwZSkge1xyXG4gICAgICAgIHRoaXMuX2hhc1BlbmRpbmdDaGFuZ2VzID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLmRvY3VtZW50Q2hhbmdlcyA9IHRoaXMuZG9jdW1lbnRDaGFuZ2VzLmluc2VydChrZXksIGNoYW5nZVR5cGUpO1xyXG4gICAgfTtcclxuICAgIFRhcmdldFN0YXRlLnByb3RvdHlwZS5yZW1vdmVEb2N1bWVudENoYW5nZSA9IGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICB0aGlzLl9oYXNQZW5kaW5nQ2hhbmdlcyA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5kb2N1bWVudENoYW5nZXMgPSB0aGlzLmRvY3VtZW50Q2hhbmdlcy5yZW1vdmUoa2V5KTtcclxuICAgIH07XHJcbiAgICBUYXJnZXRTdGF0ZS5wcm90b3R5cGUucmVjb3JkUGVuZGluZ1RhcmdldFJlcXVlc3QgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5wZW5kaW5nUmVzcG9uc2VzICs9IDE7XHJcbiAgICB9O1xyXG4gICAgVGFyZ2V0U3RhdGUucHJvdG90eXBlLnJlY29yZFRhcmdldFJlc3BvbnNlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMucGVuZGluZ1Jlc3BvbnNlcyAtPSAxO1xyXG4gICAgfTtcclxuICAgIFRhcmdldFN0YXRlLnByb3RvdHlwZS5tYXJrQ3VycmVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLl9oYXNQZW5kaW5nQ2hhbmdlcyA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5fY3VycmVudCA9IHRydWU7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFRhcmdldFN0YXRlO1xyXG59KCkpO1xyXG52YXIgTE9HX1RBRyQ3ID0gJ1dhdGNoQ2hhbmdlQWdncmVnYXRvcic7XHJcbi8qKlxyXG4gKiBBIGhlbHBlciBjbGFzcyB0byBhY2N1bXVsYXRlIHdhdGNoIGNoYW5nZXMgaW50byBhIFJlbW90ZUV2ZW50LlxyXG4gKi9cclxudmFyIFdhdGNoQ2hhbmdlQWdncmVnYXRvciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFdhdGNoQ2hhbmdlQWdncmVnYXRvcihtZXRhZGF0YVByb3ZpZGVyKSB7XHJcbiAgICAgICAgdGhpcy5tZXRhZGF0YVByb3ZpZGVyID0gbWV0YWRhdGFQcm92aWRlcjtcclxuICAgICAgICAvKiogVGhlIGludGVybmFsIHN0YXRlIG9mIGFsbCB0cmFja2VkIHRhcmdldHMuICovXHJcbiAgICAgICAgdGhpcy50YXJnZXRTdGF0ZXMgPSB7fTtcclxuICAgICAgICAvKiogS2VlcHMgdHJhY2sgb2YgdGhlIGRvY3VtZW50cyB0byB1cGRhdGUgc2luY2UgdGhlIGxhc3QgcmFpc2VkIHNuYXBzaG90LiAqL1xyXG4gICAgICAgIHRoaXMucGVuZGluZ0RvY3VtZW50VXBkYXRlcyA9IG1heWJlRG9jdW1lbnRNYXAoKTtcclxuICAgICAgICAvKiogQSBtYXBwaW5nIG9mIGRvY3VtZW50IGtleXMgdG8gdGhlaXIgc2V0IG9mIHRhcmdldCBJRHMuICovXHJcbiAgICAgICAgdGhpcy5wZW5kaW5nRG9jdW1lbnRUYXJnZXRNYXBwaW5nID0gZG9jdW1lbnRUYXJnZXRNYXAoKTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBBIGxpc3Qgb2YgdGFyZ2V0cyB3aXRoIGV4aXN0ZW5jZSBmaWx0ZXIgbWlzbWF0Y2hlcy4gVGhlc2UgdGFyZ2V0cyBhcmVcclxuICAgICAgICAgKiBrbm93biB0byBiZSBpbmNvbnNpc3RlbnQgYW5kIHRoZWlyIGxpc3RlbnMgbmVlZHMgdG8gYmUgcmUtZXN0YWJsaXNoZWQgYnlcclxuICAgICAgICAgKiBSZW1vdGVTdG9yZS5cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLnBlbmRpbmdUYXJnZXRSZXNldHMgPSBuZXcgU29ydGVkU2V0KHByaW1pdGl2ZUNvbXBhcmF0b3IpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBQcm9jZXNzZXMgYW5kIGFkZHMgdGhlIERvY3VtZW50V2F0Y2hDaGFuZ2UgdG8gdGhlIGN1cnJlbnQgc2V0IG9mIGNoYW5nZXMuXHJcbiAgICAgKi9cclxuICAgIFdhdGNoQ2hhbmdlQWdncmVnYXRvci5wcm90b3R5cGUuaGFuZGxlRG9jdW1lbnRDaGFuZ2UgPSBmdW5jdGlvbiAoZG9jQ2hhbmdlKSB7XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IGRvY0NoYW5nZS51cGRhdGVkVGFyZ2V0SWRzOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICB2YXIgdGFyZ2V0SWQgPSBfYVtfaV07XHJcbiAgICAgICAgICAgIGlmIChkb2NDaGFuZ2UubmV3RG9jIGluc3RhbmNlb2YgRG9jdW1lbnQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYWRkRG9jdW1lbnRUb1RhcmdldCh0YXJnZXRJZCwgZG9jQ2hhbmdlLm5ld0RvYyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoZG9jQ2hhbmdlLm5ld0RvYyBpbnN0YW5jZW9mIE5vRG9jdW1lbnQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlRG9jdW1lbnRGcm9tVGFyZ2V0KHRhcmdldElkLCBkb2NDaGFuZ2Uua2V5LCBkb2NDaGFuZ2UubmV3RG9jKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKHZhciBfYiA9IDAsIF9jID0gZG9jQ2hhbmdlLnJlbW92ZWRUYXJnZXRJZHM7IF9iIDwgX2MubGVuZ3RoOyBfYisrKSB7XHJcbiAgICAgICAgICAgIHZhciB0YXJnZXRJZCA9IF9jW19iXTtcclxuICAgICAgICAgICAgdGhpcy5yZW1vdmVEb2N1bWVudEZyb21UYXJnZXQodGFyZ2V0SWQsIGRvY0NoYW5nZS5rZXksIGRvY0NoYW5nZS5uZXdEb2MpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKiogUHJvY2Vzc2VzIGFuZCBhZGRzIHRoZSBXYXRjaFRhcmdldENoYW5nZSB0byB0aGUgY3VycmVudCBzZXQgb2YgY2hhbmdlcy4gKi9cclxuICAgIFdhdGNoQ2hhbmdlQWdncmVnYXRvci5wcm90b3R5cGUuaGFuZGxlVGFyZ2V0Q2hhbmdlID0gZnVuY3Rpb24gKHRhcmdldENoYW5nZSkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5mb3JFYWNoVGFyZ2V0KHRhcmdldENoYW5nZSwgZnVuY3Rpb24gKHRhcmdldElkKSB7XHJcbiAgICAgICAgICAgIHZhciB0YXJnZXRTdGF0ZSA9IF90aGlzLmVuc3VyZVRhcmdldFN0YXRlKHRhcmdldElkKTtcclxuICAgICAgICAgICAgc3dpdGNoICh0YXJnZXRDaGFuZ2Uuc3RhdGUpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgV2F0Y2hUYXJnZXRDaGFuZ2VTdGF0ZS5Ob0NoYW5nZTpcclxuICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMuaXNBY3RpdmVUYXJnZXQodGFyZ2V0SWQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldFN0YXRlLnVwZGF0ZVJlc3VtZVRva2VuKHRhcmdldENoYW5nZS5yZXN1bWVUb2tlbik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBXYXRjaFRhcmdldENoYW5nZVN0YXRlLkFkZGVkOlxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFdlIG5lZWQgdG8gZGVjcmVtZW50IHRoZSBudW1iZXIgb2YgcGVuZGluZyBhY2tzIG5lZWRlZCBmcm9tIHdhdGNoXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gZm9yIHRoaXMgdGFyZ2V0SWQuXHJcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0U3RhdGUucmVjb3JkVGFyZ2V0UmVzcG9uc2UoKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXRhcmdldFN0YXRlLmlzUGVuZGluZykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBXZSBoYXZlIGEgZnJlc2hseSBhZGRlZCB0YXJnZXQsIHNvIHdlIG5lZWQgdG8gcmVzZXQgYW55IHN0YXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoYXQgd2UgaGFkIHByZXZpb3VzbHkuIFRoaXMgY2FuIGhhcHBlbiBlLmcuIHdoZW4gcmVtb3ZlIGFuZCBhZGRcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYmFjayBhIHRhcmdldCBmb3IgZXhpc3RlbmNlIGZpbHRlciBtaXNtYXRjaGVzLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRTdGF0ZS5jbGVhclBlbmRpbmdDaGFuZ2VzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldFN0YXRlLnVwZGF0ZVJlc3VtZVRva2VuKHRhcmdldENoYW5nZS5yZXN1bWVUb2tlbik7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFdhdGNoVGFyZ2V0Q2hhbmdlU3RhdGUuUmVtb3ZlZDpcclxuICAgICAgICAgICAgICAgICAgICAvLyBXZSBuZWVkIHRvIGtlZXAgdHJhY2sgb2YgcmVtb3ZlZCB0YXJnZXRzIHRvIHdlIGNhbiBwb3N0LWZpbHRlciBhbmRcclxuICAgICAgICAgICAgICAgICAgICAvLyByZW1vdmUgYW55IHRhcmdldCBjaGFuZ2VzLlxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFdlIG5lZWQgdG8gZGVjcmVtZW50IHRoZSBudW1iZXIgb2YgcGVuZGluZyBhY2tzIG5lZWRlZCBmcm9tIHdhdGNoXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gZm9yIHRoaXMgdGFyZ2V0SWQuXHJcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0U3RhdGUucmVjb3JkVGFyZ2V0UmVzcG9uc2UoKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXRhcmdldFN0YXRlLmlzUGVuZGluZykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5yZW1vdmVUYXJnZXQodGFyZ2V0SWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBhc3NlcnQoIXRhcmdldENoYW5nZS5jYXVzZSwgJ1dhdGNoQ2hhbmdlQWdncmVnYXRvciBkb2VzIG5vdCBoYW5kbGUgZXJyb3JlZCB0YXJnZXRzJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFdhdGNoVGFyZ2V0Q2hhbmdlU3RhdGUuQ3VycmVudDpcclxuICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMuaXNBY3RpdmVUYXJnZXQodGFyZ2V0SWQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldFN0YXRlLm1hcmtDdXJyZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldFN0YXRlLnVwZGF0ZVJlc3VtZVRva2VuKHRhcmdldENoYW5nZS5yZXN1bWVUb2tlbik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBXYXRjaFRhcmdldENoYW5nZVN0YXRlLlJlc2V0OlxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChfdGhpcy5pc0FjdGl2ZVRhcmdldCh0YXJnZXRJZCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVzZXQgdGhlIHRhcmdldCBhbmQgc3ludGhlc2l6ZXMgcmVtb3ZlcyBmb3IgYWxsIGV4aXN0aW5nXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRvY3VtZW50cy4gVGhlIGJhY2tlbmQgd2lsbCByZS1hZGQgYW55IGRvY3VtZW50cyB0aGF0IHN0aWxsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIG1hdGNoIHRoZSB0YXJnZXQgYmVmb3JlIGl0IHNlbmRzIHRoZSBuZXh0IGdsb2JhbCBzbmFwc2hvdC5cclxuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMucmVzZXRUYXJnZXQodGFyZ2V0SWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRTdGF0ZS51cGRhdGVSZXN1bWVUb2tlbih0YXJnZXRDaGFuZ2UucmVzdW1lVG9rZW4pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgZmFpbCgnVW5rbm93biB0YXJnZXQgd2F0Y2ggY2hhbmdlIHN0YXRlOiAnICsgdGFyZ2V0Q2hhbmdlLnN0YXRlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogSXRlcmF0ZXMgb3ZlciBhbGwgdGFyZ2V0SWRzIHRoYXQgdGhlIHdhdGNoIGNoYW5nZSBhcHBsaWVzIHRvOiBlaXRoZXIgdGhlXHJcbiAgICAgKiB0YXJnZXRJZHMgZXhwbGljaXRseSBsaXN0ZWQgaW4gdGhlIGNoYW5nZSBvciB0aGUgdGFyZ2V0SWRzIG9mIGFsbCBjdXJyZW50bHlcclxuICAgICAqIGFjdGl2ZSB0YXJnZXRzLlxyXG4gICAgICovXHJcbiAgICBXYXRjaENoYW5nZUFnZ3JlZ2F0b3IucHJvdG90eXBlLmZvckVhY2hUYXJnZXQgPSBmdW5jdGlvbiAodGFyZ2V0Q2hhbmdlLCBmbikge1xyXG4gICAgICAgIGlmICh0YXJnZXRDaGFuZ2UudGFyZ2V0SWRzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgdGFyZ2V0Q2hhbmdlLnRhcmdldElkcy5mb3JFYWNoKGZuKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGZvckVhY2hOdW1iZXIodGhpcy50YXJnZXRTdGF0ZXMsIGZuKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBIYW5kbGVzIGV4aXN0ZW5jZSBmaWx0ZXJzIGFuZCBzeW50aGVzaXplcyBkZWxldGVzIGZvciBmaWx0ZXIgbWlzbWF0Y2hlcy5cclxuICAgICAqIFRhcmdldHMgdGhhdCBhcmUgaW52YWxpZGF0ZWQgYnkgZmlsdGVyIG1pc21hdGNoZXMgYXJlIGFkZGVkIHRvXHJcbiAgICAgKiBgcGVuZGluZ1RhcmdldFJlc2V0c2AuXHJcbiAgICAgKi9cclxuICAgIFdhdGNoQ2hhbmdlQWdncmVnYXRvci5wcm90b3R5cGUuaGFuZGxlRXhpc3RlbmNlRmlsdGVyID0gZnVuY3Rpb24gKHdhdGNoQ2hhbmdlKSB7XHJcbiAgICAgICAgdmFyIHRhcmdldElkID0gd2F0Y2hDaGFuZ2UudGFyZ2V0SWQ7XHJcbiAgICAgICAgdmFyIGV4cGVjdGVkQ291bnQgPSB3YXRjaENoYW5nZS5leGlzdGVuY2VGaWx0ZXIuY291bnQ7XHJcbiAgICAgICAgdmFyIHRhcmdldERhdGEgPSB0aGlzLnRhcmdldERhdGFGb3JBY3RpdmVUYXJnZXQodGFyZ2V0SWQpO1xyXG4gICAgICAgIGlmICh0YXJnZXREYXRhKSB7XHJcbiAgICAgICAgICAgIHZhciB0YXJnZXQgPSB0YXJnZXREYXRhLnRhcmdldDtcclxuICAgICAgICAgICAgaWYgKHRhcmdldC5pc0RvY3VtZW50UXVlcnkoKSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGV4cGVjdGVkQ291bnQgPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBUaGUgZXhpc3RlbmNlIGZpbHRlciB0b2xkIHVzIHRoZSBkb2N1bWVudCBkb2VzIG5vdCBleGlzdC4gV2UgZGVkdWNlXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhhdCB0aGlzIGRvY3VtZW50IGRvZXMgbm90IGV4aXN0IGFuZCBhcHBseSBhIGRlbGV0ZWQgZG9jdW1lbnQgdG9cclxuICAgICAgICAgICAgICAgICAgICAvLyBvdXIgdXBkYXRlcy4gV2l0aG91dCBhcHBseWluZyB0aGlzIGRlbGV0ZWQgZG9jdW1lbnQgdGhlcmUgbWlnaHQgYmVcclxuICAgICAgICAgICAgICAgICAgICAvLyBhbm90aGVyIHF1ZXJ5IHRoYXQgd2lsbCByYWlzZSB0aGlzIGRvY3VtZW50IGFzIHBhcnQgb2YgYSBzbmFwc2hvdFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIHVudGlsIGl0IGlzIHJlc29sdmVkLCBlc3NlbnRpYWxseSBleHBvc2luZyBpbmNvbnNpc3RlbmN5IGJldHdlZW5cclxuICAgICAgICAgICAgICAgICAgICAvLyBxdWVyaWVzLlxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBrZXkgPSBuZXcgRG9jdW1lbnRLZXkodGFyZ2V0LnBhdGgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlRG9jdW1lbnRGcm9tVGFyZ2V0KHRhcmdldElkLCBrZXksIG5ldyBOb0RvY3VtZW50KGtleSwgU25hcHNob3RWZXJzaW9uLmZvckRlbGV0ZWREb2MoKSkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXNzZXJ0KGV4cGVjdGVkQ291bnQgPT09IDEsICdTaW5nbGUgZG9jdW1lbnQgZXhpc3RlbmNlIGZpbHRlciB3aXRoIGNvdW50OiAnICsgZXhwZWN0ZWRDb3VudCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgY3VycmVudFNpemUgPSB0aGlzLmdldEN1cnJlbnREb2N1bWVudENvdW50Rm9yVGFyZ2V0KHRhcmdldElkKTtcclxuICAgICAgICAgICAgICAgIGlmIChjdXJyZW50U2l6ZSAhPT0gZXhwZWN0ZWRDb3VudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIEV4aXN0ZW5jZSBmaWx0ZXIgbWlzbWF0Y2g6IFdlIHJlc2V0IHRoZSBtYXBwaW5nIGFuZCByYWlzZSBhIG5ld1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHNuYXBzaG90IHdpdGggYGlzRnJvbUNhY2hlOnRydWVgLlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVzZXRUYXJnZXQodGFyZ2V0SWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGVuZGluZ1RhcmdldFJlc2V0cyA9IHRoaXMucGVuZGluZ1RhcmdldFJlc2V0cy5hZGQodGFyZ2V0SWQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQ29udmVydHMgdGhlIGN1cnJlbnRseSBhY2N1bXVsYXRlZCBzdGF0ZSBpbnRvIGEgcmVtb3RlIGV2ZW50IGF0IHRoZVxyXG4gICAgICogcHJvdmlkZWQgc25hcHNob3QgdmVyc2lvbi4gUmVzZXRzIHRoZSBhY2N1bXVsYXRlZCBjaGFuZ2VzIGJlZm9yZSByZXR1cm5pbmcuXHJcbiAgICAgKi9cclxuICAgIFdhdGNoQ2hhbmdlQWdncmVnYXRvci5wcm90b3R5cGUuY3JlYXRlUmVtb3RlRXZlbnQgPSBmdW5jdGlvbiAoc25hcHNob3RWZXJzaW9uKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgdGFyZ2V0Q2hhbmdlcyA9IHt9O1xyXG4gICAgICAgIGZvckVhY2hOdW1iZXIodGhpcy50YXJnZXRTdGF0ZXMsIGZ1bmN0aW9uICh0YXJnZXRJZCwgdGFyZ2V0U3RhdGUpIHtcclxuICAgICAgICAgICAgdmFyIHRhcmdldERhdGEgPSBfdGhpcy50YXJnZXREYXRhRm9yQWN0aXZlVGFyZ2V0KHRhcmdldElkKTtcclxuICAgICAgICAgICAgaWYgKHRhcmdldERhdGEpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0YXJnZXRTdGF0ZS5jdXJyZW50ICYmIHRhcmdldERhdGEudGFyZ2V0LmlzRG9jdW1lbnRRdWVyeSgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gRG9jdW1lbnQgcXVlcmllcyBmb3IgZG9jdW1lbnQgdGhhdCBkb24ndCBleGlzdCBjYW4gcHJvZHVjZSBhbiBlbXB0eVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIHJlc3VsdCBzZXQuIFRvIHVwZGF0ZSBvdXIgbG9jYWwgY2FjaGUsIHdlIHN5bnRoZXNpemUgYSBkb2N1bWVudFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGRlbGV0ZSBpZiB3ZSBoYXZlIG5vdCBwcmV2aW91c2x5IHJlY2VpdmVkIHRoZSBkb2N1bWVudC4gVGhpc1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHJlc29sdmVzIHRoZSBsaW1ibyBzdGF0ZSBvZiB0aGUgZG9jdW1lbnQsIHJlbW92aW5nIGl0IGZyb21cclxuICAgICAgICAgICAgICAgICAgICAvLyBsaW1ib0RvY3VtZW50UmVmcy5cclxuICAgICAgICAgICAgICAgICAgICAvL1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFRPRE8oZGltb25kKTogSWRlYWxseSB3ZSB3b3VsZCBoYXZlIGFuIGV4cGxpY2l0IGxvb2t1cCB0YXJnZXRcclxuICAgICAgICAgICAgICAgICAgICAvLyBpbnN0ZWFkIHJlc3VsdGluZyBpbiBhbiBleHBsaWNpdCBkZWxldGUgbWVzc2FnZSBhbmQgd2UgY291bGRcclxuICAgICAgICAgICAgICAgICAgICAvLyByZW1vdmUgdGhpcyBzcGVjaWFsIGxvZ2ljLlxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBrZXkgPSBuZXcgRG9jdW1lbnRLZXkodGFyZ2V0RGF0YS50YXJnZXQucGF0aCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLnBlbmRpbmdEb2N1bWVudFVwZGF0ZXMuZ2V0KGtleSkgPT09IG51bGwgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgIV90aGlzLnRhcmdldENvbnRhaW5zRG9jdW1lbnQodGFyZ2V0SWQsIGtleSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMucmVtb3ZlRG9jdW1lbnRGcm9tVGFyZ2V0KHRhcmdldElkLCBrZXksIG5ldyBOb0RvY3VtZW50KGtleSwgc25hcHNob3RWZXJzaW9uKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKHRhcmdldFN0YXRlLmhhc1BlbmRpbmdDaGFuZ2VzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0Q2hhbmdlc1t0YXJnZXRJZF0gPSB0YXJnZXRTdGF0ZS50b1RhcmdldENoYW5nZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldFN0YXRlLmNsZWFyUGVuZGluZ0NoYW5nZXMoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHZhciByZXNvbHZlZExpbWJvRG9jdW1lbnRzID0gZG9jdW1lbnRLZXlTZXQoKTtcclxuICAgICAgICAvLyBXZSBleHRyYWN0IHRoZSBzZXQgb2YgbGltYm8tb25seSBkb2N1bWVudCB1cGRhdGVzIGFzIHRoZSBHQyBsb2dpY1xyXG4gICAgICAgIC8vIHNwZWNpYWwtY2FzZXMgZG9jdW1lbnRzIHRoYXQgZG8gbm90IGFwcGVhciBpbiB0aGUgdGFyZ2V0IGNhY2hlLlxyXG4gICAgICAgIC8vXHJcbiAgICAgICAgLy8gVE9ETyhnc29sdGlzKTogRXhwYW5kIG9uIHRoaXMgY29tbWVudCBvbmNlIEdDIGlzIGF2YWlsYWJsZSBpbiB0aGUgSlNcclxuICAgICAgICAvLyBjbGllbnQuXHJcbiAgICAgICAgdGhpcy5wZW5kaW5nRG9jdW1lbnRUYXJnZXRNYXBwaW5nLmZvckVhY2goZnVuY3Rpb24gKGtleSwgdGFyZ2V0cykge1xyXG4gICAgICAgICAgICB2YXIgaXNPbmx5TGltYm9UYXJnZXQgPSB0cnVlO1xyXG4gICAgICAgICAgICB0YXJnZXRzLmZvckVhY2hXaGlsZShmdW5jdGlvbiAodGFyZ2V0SWQpIHtcclxuICAgICAgICAgICAgICAgIHZhciB0YXJnZXREYXRhID0gX3RoaXMudGFyZ2V0RGF0YUZvckFjdGl2ZVRhcmdldCh0YXJnZXRJZCk7XHJcbiAgICAgICAgICAgICAgICBpZiAodGFyZ2V0RGF0YSAmJlxyXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldERhdGEucHVycG9zZSAhPT0gVGFyZ2V0UHVycG9zZS5MaW1ib1Jlc29sdXRpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBpc09ubHlMaW1ib1RhcmdldCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgaWYgKGlzT25seUxpbWJvVGFyZ2V0KSB7XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlZExpbWJvRG9jdW1lbnRzID0gcmVzb2x2ZWRMaW1ib0RvY3VtZW50cy5hZGQoa2V5KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHZhciByZW1vdGVFdmVudCA9IG5ldyBSZW1vdGVFdmVudChzbmFwc2hvdFZlcnNpb24sIHRhcmdldENoYW5nZXMsIHRoaXMucGVuZGluZ1RhcmdldFJlc2V0cywgdGhpcy5wZW5kaW5nRG9jdW1lbnRVcGRhdGVzLCByZXNvbHZlZExpbWJvRG9jdW1lbnRzKTtcclxuICAgICAgICB0aGlzLnBlbmRpbmdEb2N1bWVudFVwZGF0ZXMgPSBtYXliZURvY3VtZW50TWFwKCk7XHJcbiAgICAgICAgdGhpcy5wZW5kaW5nRG9jdW1lbnRUYXJnZXRNYXBwaW5nID0gZG9jdW1lbnRUYXJnZXRNYXAoKTtcclxuICAgICAgICB0aGlzLnBlbmRpbmdUYXJnZXRSZXNldHMgPSBuZXcgU29ydGVkU2V0KHByaW1pdGl2ZUNvbXBhcmF0b3IpO1xyXG4gICAgICAgIHJldHVybiByZW1vdGVFdmVudDtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEFkZHMgdGhlIHByb3ZpZGVkIGRvY3VtZW50IHRvIHRoZSBpbnRlcm5hbCBsaXN0IG9mIGRvY3VtZW50IHVwZGF0ZXMgYW5kXHJcbiAgICAgKiBpdHMgZG9jdW1lbnQga2V5IHRvIHRoZSBnaXZlbiB0YXJnZXQncyBtYXBwaW5nLlxyXG4gICAgICovXHJcbiAgICAvLyBWaXNpYmxlIGZvciB0ZXN0aW5nLlxyXG4gICAgV2F0Y2hDaGFuZ2VBZ2dyZWdhdG9yLnByb3RvdHlwZS5hZGREb2N1bWVudFRvVGFyZ2V0ID0gZnVuY3Rpb24gKHRhcmdldElkLCBkb2N1bWVudCkge1xyXG4gICAgICAgIGlmICghdGhpcy5pc0FjdGl2ZVRhcmdldCh0YXJnZXRJZCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgY2hhbmdlVHlwZSA9IHRoaXMudGFyZ2V0Q29udGFpbnNEb2N1bWVudCh0YXJnZXRJZCwgZG9jdW1lbnQua2V5KVxyXG4gICAgICAgICAgICA/IENoYW5nZVR5cGUuTW9kaWZpZWRcclxuICAgICAgICAgICAgOiBDaGFuZ2VUeXBlLkFkZGVkO1xyXG4gICAgICAgIHZhciB0YXJnZXRTdGF0ZSA9IHRoaXMuZW5zdXJlVGFyZ2V0U3RhdGUodGFyZ2V0SWQpO1xyXG4gICAgICAgIHRhcmdldFN0YXRlLmFkZERvY3VtZW50Q2hhbmdlKGRvY3VtZW50LmtleSwgY2hhbmdlVHlwZSk7XHJcbiAgICAgICAgdGhpcy5wZW5kaW5nRG9jdW1lbnRVcGRhdGVzID0gdGhpcy5wZW5kaW5nRG9jdW1lbnRVcGRhdGVzLmluc2VydChkb2N1bWVudC5rZXksIGRvY3VtZW50KTtcclxuICAgICAgICB0aGlzLnBlbmRpbmdEb2N1bWVudFRhcmdldE1hcHBpbmcgPSB0aGlzLnBlbmRpbmdEb2N1bWVudFRhcmdldE1hcHBpbmcuaW5zZXJ0KGRvY3VtZW50LmtleSwgdGhpcy5lbnN1cmVEb2N1bWVudFRhcmdldE1hcHBpbmcoZG9jdW1lbnQua2V5KS5hZGQodGFyZ2V0SWQpKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJlbW92ZXMgdGhlIHByb3ZpZGVkIGRvY3VtZW50IGZyb20gdGhlIHRhcmdldCBtYXBwaW5nLiBJZiB0aGVcclxuICAgICAqIGRvY3VtZW50IG5vIGxvbmdlciBtYXRjaGVzIHRoZSB0YXJnZXQsIGJ1dCB0aGUgZG9jdW1lbnQncyBzdGF0ZSBpcyBzdGlsbFxyXG4gICAgICoga25vd24gKGUuZy4gd2Uga25vdyB0aGF0IHRoZSBkb2N1bWVudCB3YXMgZGVsZXRlZCBvciB3ZSByZWNlaXZlZCB0aGUgY2hhbmdlXHJcbiAgICAgKiB0aGF0IGNhdXNlZCB0aGUgZmlsdGVyIG1pc21hdGNoKSwgdGhlIG5ldyBkb2N1bWVudCBjYW4gYmUgcHJvdmlkZWRcclxuICAgICAqIHRvIHVwZGF0ZSB0aGUgcmVtb3RlIGRvY3VtZW50IGNhY2hlLlxyXG4gICAgICovXHJcbiAgICAvLyBWaXNpYmxlIGZvciB0ZXN0aW5nLlxyXG4gICAgV2F0Y2hDaGFuZ2VBZ2dyZWdhdG9yLnByb3RvdHlwZS5yZW1vdmVEb2N1bWVudEZyb21UYXJnZXQgPSBmdW5jdGlvbiAodGFyZ2V0SWQsIGtleSwgdXBkYXRlZERvY3VtZW50KSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmlzQWN0aXZlVGFyZ2V0KHRhcmdldElkKSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciB0YXJnZXRTdGF0ZSA9IHRoaXMuZW5zdXJlVGFyZ2V0U3RhdGUodGFyZ2V0SWQpO1xyXG4gICAgICAgIGlmICh0aGlzLnRhcmdldENvbnRhaW5zRG9jdW1lbnQodGFyZ2V0SWQsIGtleSkpIHtcclxuICAgICAgICAgICAgdGFyZ2V0U3RhdGUuYWRkRG9jdW1lbnRDaGFuZ2Uoa2V5LCBDaGFuZ2VUeXBlLlJlbW92ZWQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gVGhlIGRvY3VtZW50IG1heSBoYXZlIGVudGVyZWQgYW5kIGxlZnQgdGhlIHRhcmdldCBiZWZvcmUgd2UgcmFpc2VkIGFcclxuICAgICAgICAgICAgLy8gc25hcHNob3QsIHNvIHdlIGNhbiBqdXN0IGlnbm9yZSB0aGUgY2hhbmdlLlxyXG4gICAgICAgICAgICB0YXJnZXRTdGF0ZS5yZW1vdmVEb2N1bWVudENoYW5nZShrZXkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnBlbmRpbmdEb2N1bWVudFRhcmdldE1hcHBpbmcgPSB0aGlzLnBlbmRpbmdEb2N1bWVudFRhcmdldE1hcHBpbmcuaW5zZXJ0KGtleSwgdGhpcy5lbnN1cmVEb2N1bWVudFRhcmdldE1hcHBpbmcoa2V5KS5kZWxldGUodGFyZ2V0SWQpKTtcclxuICAgICAgICBpZiAodXBkYXRlZERvY3VtZW50KSB7XHJcbiAgICAgICAgICAgIHRoaXMucGVuZGluZ0RvY3VtZW50VXBkYXRlcyA9IHRoaXMucGVuZGluZ0RvY3VtZW50VXBkYXRlcy5pbnNlcnQoa2V5LCB1cGRhdGVkRG9jdW1lbnQpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBXYXRjaENoYW5nZUFnZ3JlZ2F0b3IucHJvdG90eXBlLnJlbW92ZVRhcmdldCA9IGZ1bmN0aW9uICh0YXJnZXRJZCkge1xyXG4gICAgICAgIGRlbGV0ZSB0aGlzLnRhcmdldFN0YXRlc1t0YXJnZXRJZF07XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSBjdXJyZW50IGNvdW50IG9mIGRvY3VtZW50cyBpbiB0aGUgdGFyZ2V0LiBUaGlzIGluY2x1ZGVzIGJvdGhcclxuICAgICAqIHRoZSBudW1iZXIgb2YgZG9jdW1lbnRzIHRoYXQgdGhlIExvY2FsU3RvcmUgY29uc2lkZXJzIHRvIGJlIHBhcnQgb2YgdGhlXHJcbiAgICAgKiB0YXJnZXQgYXMgd2VsbCBhcyBhbnkgYWNjdW11bGF0ZWQgY2hhbmdlcy5cclxuICAgICAqL1xyXG4gICAgV2F0Y2hDaGFuZ2VBZ2dyZWdhdG9yLnByb3RvdHlwZS5nZXRDdXJyZW50RG9jdW1lbnRDb3VudEZvclRhcmdldCA9IGZ1bmN0aW9uICh0YXJnZXRJZCkge1xyXG4gICAgICAgIHZhciB0YXJnZXRTdGF0ZSA9IHRoaXMuZW5zdXJlVGFyZ2V0U3RhdGUodGFyZ2V0SWQpO1xyXG4gICAgICAgIHZhciB0YXJnZXRDaGFuZ2UgPSB0YXJnZXRTdGF0ZS50b1RhcmdldENoYW5nZSgpO1xyXG4gICAgICAgIHJldHVybiAodGhpcy5tZXRhZGF0YVByb3ZpZGVyLmdldFJlbW90ZUtleXNGb3JUYXJnZXQodGFyZ2V0SWQpLnNpemUgK1xyXG4gICAgICAgICAgICB0YXJnZXRDaGFuZ2UuYWRkZWREb2N1bWVudHMuc2l6ZSAtXHJcbiAgICAgICAgICAgIHRhcmdldENoYW5nZS5yZW1vdmVkRG9jdW1lbnRzLnNpemUpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogSW5jcmVtZW50IHRoZSBudW1iZXIgb2YgYWNrcyBuZWVkZWQgZnJvbSB3YXRjaCBiZWZvcmUgd2UgY2FuIGNvbnNpZGVyIHRoZVxyXG4gICAgICogc2VydmVyIHRvIGJlICdpbi1zeW5jJyB3aXRoIHRoZSBjbGllbnQncyBhY3RpdmUgdGFyZ2V0cy5cclxuICAgICAqL1xyXG4gICAgV2F0Y2hDaGFuZ2VBZ2dyZWdhdG9yLnByb3RvdHlwZS5yZWNvcmRQZW5kaW5nVGFyZ2V0UmVxdWVzdCA9IGZ1bmN0aW9uICh0YXJnZXRJZCkge1xyXG4gICAgICAgIC8vIEZvciBlYWNoIHJlcXVlc3Qgd2UgZ2V0IHdlIG5lZWQgdG8gcmVjb3JkIHdlIG5lZWQgYSByZXNwb25zZSBmb3IgaXQuXHJcbiAgICAgICAgdmFyIHRhcmdldFN0YXRlID0gdGhpcy5lbnN1cmVUYXJnZXRTdGF0ZSh0YXJnZXRJZCk7XHJcbiAgICAgICAgdGFyZ2V0U3RhdGUucmVjb3JkUGVuZGluZ1RhcmdldFJlcXVlc3QoKTtcclxuICAgIH07XHJcbiAgICBXYXRjaENoYW5nZUFnZ3JlZ2F0b3IucHJvdG90eXBlLmVuc3VyZVRhcmdldFN0YXRlID0gZnVuY3Rpb24gKHRhcmdldElkKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnRhcmdldFN0YXRlc1t0YXJnZXRJZF0pIHtcclxuICAgICAgICAgICAgdGhpcy50YXJnZXRTdGF0ZXNbdGFyZ2V0SWRdID0gbmV3IFRhcmdldFN0YXRlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLnRhcmdldFN0YXRlc1t0YXJnZXRJZF07XHJcbiAgICB9O1xyXG4gICAgV2F0Y2hDaGFuZ2VBZ2dyZWdhdG9yLnByb3RvdHlwZS5lbnN1cmVEb2N1bWVudFRhcmdldE1hcHBpbmcgPSBmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgICAgdmFyIHRhcmdldE1hcHBpbmcgPSB0aGlzLnBlbmRpbmdEb2N1bWVudFRhcmdldE1hcHBpbmcuZ2V0KGtleSk7XHJcbiAgICAgICAgaWYgKCF0YXJnZXRNYXBwaW5nKSB7XHJcbiAgICAgICAgICAgIHRhcmdldE1hcHBpbmcgPSBuZXcgU29ydGVkU2V0KHByaW1pdGl2ZUNvbXBhcmF0b3IpO1xyXG4gICAgICAgICAgICB0aGlzLnBlbmRpbmdEb2N1bWVudFRhcmdldE1hcHBpbmcgPSB0aGlzLnBlbmRpbmdEb2N1bWVudFRhcmdldE1hcHBpbmcuaW5zZXJ0KGtleSwgdGFyZ2V0TWFwcGluZyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0YXJnZXRNYXBwaW5nO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogVmVyaWZpZXMgdGhhdCB0aGUgdXNlciBpcyBzdGlsbCBpbnRlcmVzdGVkIGluIHRoaXMgdGFyZ2V0IChieSBjYWxsaW5nXHJcbiAgICAgKiBgZ2V0VGFyZ2V0RGF0YUZvclRhcmdldCgpYCkgYW5kIHRoYXQgd2UgYXJlIG5vdCB3YWl0aW5nIGZvciBwZW5kaW5nIEFERHNcclxuICAgICAqIGZyb20gd2F0Y2guXHJcbiAgICAgKi9cclxuICAgIFdhdGNoQ2hhbmdlQWdncmVnYXRvci5wcm90b3R5cGUuaXNBY3RpdmVUYXJnZXQgPSBmdW5jdGlvbiAodGFyZ2V0SWQpIHtcclxuICAgICAgICB2YXIgdGFyZ2V0QWN0aXZlID0gdGhpcy50YXJnZXREYXRhRm9yQWN0aXZlVGFyZ2V0KHRhcmdldElkKSAhPT0gbnVsbDtcclxuICAgICAgICBpZiAoIXRhcmdldEFjdGl2ZSkge1xyXG4gICAgICAgICAgICBkZWJ1ZyhMT0dfVEFHJDcsICdEZXRlY3RlZCBpbmFjdGl2ZSB0YXJnZXQnLCB0YXJnZXRJZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0YXJnZXRBY3RpdmU7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSBUYXJnZXREYXRhIGZvciBhbiBhY3RpdmUgdGFyZ2V0IChpLmUuIGEgdGFyZ2V0IHRoYXQgdGhlIHVzZXJcclxuICAgICAqIGlzIHN0aWxsIGludGVyZXN0ZWQgaW4gdGhhdCBoYXMgbm8gb3V0c3RhbmRpbmcgdGFyZ2V0IGNoYW5nZSByZXF1ZXN0cykuXHJcbiAgICAgKi9cclxuICAgIFdhdGNoQ2hhbmdlQWdncmVnYXRvci5wcm90b3R5cGUudGFyZ2V0RGF0YUZvckFjdGl2ZVRhcmdldCA9IGZ1bmN0aW9uICh0YXJnZXRJZCkge1xyXG4gICAgICAgIHZhciB0YXJnZXRTdGF0ZSA9IHRoaXMudGFyZ2V0U3RhdGVzW3RhcmdldElkXTtcclxuICAgICAgICByZXR1cm4gdGFyZ2V0U3RhdGUgJiYgdGFyZ2V0U3RhdGUuaXNQZW5kaW5nXHJcbiAgICAgICAgICAgID8gbnVsbFxyXG4gICAgICAgICAgICA6IHRoaXMubWV0YWRhdGFQcm92aWRlci5nZXRUYXJnZXREYXRhRm9yVGFyZ2V0KHRhcmdldElkKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJlc2V0cyB0aGUgc3RhdGUgb2YgYSBXYXRjaCB0YXJnZXQgdG8gaXRzIGluaXRpYWwgc3RhdGUgKGUuZy4gc2V0c1xyXG4gICAgICogJ2N1cnJlbnQnIHRvIGZhbHNlLCBjbGVhcnMgdGhlIHJlc3VtZSB0b2tlbiBhbmQgcmVtb3ZlcyBpdHMgdGFyZ2V0IG1hcHBpbmdcclxuICAgICAqIGZyb20gYWxsIGRvY3VtZW50cykuXHJcbiAgICAgKi9cclxuICAgIFdhdGNoQ2hhbmdlQWdncmVnYXRvci5wcm90b3R5cGUucmVzZXRUYXJnZXQgPSBmdW5jdGlvbiAodGFyZ2V0SWQpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIGFzc2VydCghdGhpcy50YXJnZXRTdGF0ZXNbdGFyZ2V0SWRdLmlzUGVuZGluZywgJ1Nob3VsZCBvbmx5IHJlc2V0IGFjdGl2ZSB0YXJnZXRzJyk7XHJcbiAgICAgICAgdGhpcy50YXJnZXRTdGF0ZXNbdGFyZ2V0SWRdID0gbmV3IFRhcmdldFN0YXRlKCk7XHJcbiAgICAgICAgLy8gVHJpZ2dlciByZW1vdmFsIGZvciBhbnkgZG9jdW1lbnRzIGN1cnJlbnRseSBtYXBwZWQgdG8gdGhpcyB0YXJnZXQuXHJcbiAgICAgICAgLy8gVGhlc2UgcmVtb3ZhbHMgd2lsbCBiZSBwYXJ0IG9mIHRoZSBpbml0aWFsIHNuYXBzaG90IGlmIFdhdGNoIGRvZXMgbm90XHJcbiAgICAgICAgLy8gcmVzZW5kIHRoZXNlIGRvY3VtZW50cy5cclxuICAgICAgICB2YXIgZXhpc3RpbmdLZXlzID0gdGhpcy5tZXRhZGF0YVByb3ZpZGVyLmdldFJlbW90ZUtleXNGb3JUYXJnZXQodGFyZ2V0SWQpO1xyXG4gICAgICAgIGV4aXN0aW5nS2V5cy5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICAgICAgX3RoaXMucmVtb3ZlRG9jdW1lbnRGcm9tVGFyZ2V0KHRhcmdldElkLCBrZXksIC8qdXBkYXRlZERvY3VtZW50PSovIG51bGwpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB3aGV0aGVyIHRoZSBMb2NhbFN0b3JlIGNvbnNpZGVycyB0aGUgZG9jdW1lbnQgdG8gYmUgcGFydCBvZiB0aGVcclxuICAgICAqIHNwZWNpZmllZCB0YXJnZXQuXHJcbiAgICAgKi9cclxuICAgIFdhdGNoQ2hhbmdlQWdncmVnYXRvci5wcm90b3R5cGUudGFyZ2V0Q29udGFpbnNEb2N1bWVudCA9IGZ1bmN0aW9uICh0YXJnZXRJZCwga2V5KSB7XHJcbiAgICAgICAgdmFyIGV4aXN0aW5nS2V5cyA9IHRoaXMubWV0YWRhdGFQcm92aWRlci5nZXRSZW1vdGVLZXlzRm9yVGFyZ2V0KHRhcmdldElkKTtcclxuICAgICAgICByZXR1cm4gZXhpc3RpbmdLZXlzLmhhcyhrZXkpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBXYXRjaENoYW5nZUFnZ3JlZ2F0b3I7XHJcbn0oKSk7XHJcbmZ1bmN0aW9uIGRvY3VtZW50VGFyZ2V0TWFwKCkge1xyXG4gICAgcmV0dXJuIG5ldyBTb3J0ZWRNYXAoRG9jdW1lbnRLZXkuY29tcGFyYXRvcik7XHJcbn1cclxuZnVuY3Rpb24gc25hcHNob3RDaGFuZ2VzTWFwKCkge1xyXG4gICAgcmV0dXJuIG5ldyBTb3J0ZWRNYXAoRG9jdW1lbnRLZXkuY29tcGFyYXRvcik7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnZhciBMT0dfVEFHJDggPSAnUmVtb3RlU3RvcmUnO1xyXG4vLyBUT0RPKGIvMzU4NTM0MDIpOiBOZWdvdGlhdGUgdGhpcyB3aXRoIHRoZSBzdHJlYW0uXHJcbnZhciBNQVhfUEVORElOR19XUklURVMgPSAxMDtcclxuLyoqXHJcbiAqIFJlbW90ZVN0b3JlIC0gQW4gaW50ZXJmYWNlIHRvIHJlbW90ZWx5IHN0b3JlZCBkYXRhLCBiYXNpY2FsbHkgcHJvdmlkaW5nIGFcclxuICogd3JhcHBlciBhcm91bmQgdGhlIERhdGFzdG9yZSB0aGF0IGlzIG1vcmUgcmVsaWFibGUgZm9yIHRoZSByZXN0IG9mIHRoZVxyXG4gKiBzeXN0ZW0uXHJcbiAqXHJcbiAqIFJlbW90ZVN0b3JlIGlzIHJlc3BvbnNpYmxlIGZvciBtYWludGFpbmluZyB0aGUgY29ubmVjdGlvbiB0byB0aGUgc2VydmVyLlxyXG4gKiAtIG1haW50YWluaW5nIGEgbGlzdCBvZiBhY3RpdmUgbGlzdGVucy5cclxuICogLSByZWNvbm5lY3Rpbmcgd2hlbiB0aGUgY29ubmVjdGlvbiBpcyBkcm9wcGVkLlxyXG4gKiAtIHJlc3VtaW5nIGFsbCB0aGUgYWN0aXZlIGxpc3RlbnMgb24gcmVjb25uZWN0LlxyXG4gKlxyXG4gKiBSZW1vdGVTdG9yZSBoYW5kbGVzIGFsbCBpbmNvbWluZyBldmVudHMgZnJvbSB0aGUgRGF0YXN0b3JlLlxyXG4gKiAtIGxpc3RlbmluZyB0byB0aGUgd2F0Y2ggc3RyZWFtIGFuZCByZXBhY2thZ2luZyB0aGUgZXZlbnRzIGFzIFJlbW90ZUV2ZW50c1xyXG4gKiAtIG5vdGlmeWluZyBTeW5jRW5naW5lIG9mIGFueSBjaGFuZ2VzIHRvIHRoZSBhY3RpdmUgbGlzdGVucy5cclxuICpcclxuICogUmVtb3RlU3RvcmUgdGFrZXMgd3JpdGVzIGZyb20gb3RoZXIgY29tcG9uZW50cyBhbmQgaGFuZGxlcyB0aGVtIHJlbGlhYmx5LlxyXG4gKiAtIHB1bGxpbmcgcGVuZGluZyBtdXRhdGlvbnMgZnJvbSBMb2NhbFN0b3JlIGFuZCBzZW5kaW5nIHRoZW0gdG8gRGF0YXN0b3JlLlxyXG4gKiAtIHJldHJ5aW5nIG11dGF0aW9ucyB0aGF0IGZhaWxlZCBiZWNhdXNlIG9mIG5ldHdvcmsgcHJvYmxlbXMuXHJcbiAqIC0gYWNraW5nIG11dGF0aW9ucyB0byB0aGUgU3luY0VuZ2luZSBvbmNlIHRoZXkgYXJlIGFjY2VwdGVkIG9yIHJlamVjdGVkLlxyXG4gKi9cclxudmFyIFJlbW90ZVN0b3JlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gUmVtb3RlU3RvcmUoXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBsb2NhbCBzdG9yZSwgdXNlZCB0byBmaWxsIHRoZSB3cml0ZSBwaXBlbGluZSB3aXRoIG91dGJvdW5kIG11dGF0aW9ucy5cclxuICAgICAqL1xyXG4gICAgbG9jYWxTdG9yZSwgXHJcbiAgICAvKiogVGhlIGNsaWVudC1zaWRlIHByb3h5IGZvciBpbnRlcmFjdGluZyB3aXRoIHRoZSBiYWNrZW5kLiAqL1xyXG4gICAgZGF0YXN0b3JlLCBhc3luY1F1ZXVlLCBvbmxpbmVTdGF0ZUhhbmRsZXIsIGNvbm5lY3Rpdml0eU1vbml0b3IpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMubG9jYWxTdG9yZSA9IGxvY2FsU3RvcmU7XHJcbiAgICAgICAgdGhpcy5kYXRhc3RvcmUgPSBkYXRhc3RvcmU7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQSBsaXN0IG9mIHVwIHRvIE1BWF9QRU5ESU5HX1dSSVRFUyB3cml0ZXMgdGhhdCB3ZSBoYXZlIGZldGNoZWQgZnJvbSB0aGVcclxuICAgICAgICAgKiBMb2NhbFN0b3JlIHZpYSBmaWxsV3JpdGVQaXBlbGluZSgpIGFuZCBoYXZlIG9yIHdpbGwgc2VuZCB0byB0aGUgd3JpdGVcclxuICAgICAgICAgKiBzdHJlYW0uXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBXaGVuZXZlciB3cml0ZVBpcGVsaW5lLmxlbmd0aCA+IDAgdGhlIFJlbW90ZVN0b3JlIHdpbGwgYXR0ZW1wdCB0byBzdGFydCBvclxyXG4gICAgICAgICAqIHJlc3RhcnQgdGhlIHdyaXRlIHN0cmVhbS4gV2hlbiB0aGUgc3RyZWFtIGlzIGVzdGFibGlzaGVkIHRoZSB3cml0ZXMgaW4gdGhlXHJcbiAgICAgICAgICogcGlwZWxpbmUgd2lsbCBiZSBzZW50IGluIG9yZGVyLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogV3JpdGVzIHJlbWFpbiBpbiB3cml0ZVBpcGVsaW5lIHVudGlsIHRoZXkgYXJlIGFja25vd2xlZGdlZCBieSB0aGUgYmFja2VuZFxyXG4gICAgICAgICAqIGFuZCB0aHVzIHdpbGwgYXV0b21hdGljYWxseSBiZSByZS1zZW50IGlmIHRoZSBzdHJlYW0gaXMgaW50ZXJydXB0ZWQgL1xyXG4gICAgICAgICAqIHJlc3RhcnRlZCBiZWZvcmUgdGhleSdyZSBhY2tub3dsZWRnZWQuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBXcml0ZSByZXNwb25zZXMgZnJvbSB0aGUgYmFja2VuZCBhcmUgbGlua2VkIHRvIHRoZWlyIG9yaWdpbmF0aW5nIHJlcXVlc3RcclxuICAgICAgICAgKiBwdXJlbHkgYmFzZWQgb24gb3JkZXIsIGFuZCBzbyB3ZSBjYW4ganVzdCBzaGlmdCgpIHdyaXRlcyBmcm9tIHRoZSBmcm9udCBvZlxyXG4gICAgICAgICAqIHRoZSB3cml0ZVBpcGVsaW5lIGFzIHdlIHJlY2VpdmUgcmVzcG9uc2VzLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMud3JpdGVQaXBlbGluZSA9IFtdO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEEgbWFwcGluZyBvZiB3YXRjaGVkIHRhcmdldHMgdGhhdCB0aGUgY2xpZW50IGNhcmVzIGFib3V0IHRyYWNraW5nIGFuZCB0aGVcclxuICAgICAgICAgKiB1c2VyIGhhcyBleHBsaWNpdGx5IGNhbGxlZCBhICdsaXN0ZW4nIGZvciB0aGlzIHRhcmdldC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFRoZXNlIHRhcmdldHMgbWF5IG9yIG1heSBub3QgaGF2ZSBiZWVuIHNlbnQgdG8gb3IgYWNrbm93bGVkZ2VkIGJ5IHRoZVxyXG4gICAgICAgICAqIHNlcnZlci4gT24gcmUtZXN0YWJsaXNoaW5nIHRoZSBsaXN0ZW4gc3RyZWFtLCB0aGVzZSB0YXJnZXRzIHNob3VsZCBiZSBzZW50XHJcbiAgICAgICAgICogdG8gdGhlIHNlcnZlci4gVGhlIHRhcmdldHMgcmVtb3ZlZCB3aXRoIHVubGlzdGVucyBhcmUgcmVtb3ZlZCBlYWdlcmx5XHJcbiAgICAgICAgICogd2l0aG91dCB3YWl0aW5nIGZvciBjb25maXJtYXRpb24gZnJvbSB0aGUgbGlzdGVuIHN0cmVhbS5cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLmxpc3RlblRhcmdldHMgPSB7fTtcclxuICAgICAgICB0aGlzLndhdGNoQ2hhbmdlQWdncmVnYXRvciA9IG51bGw7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogU2V0IHRvIHRydWUgYnkgZW5hYmxlTmV0d29yaygpIGFuZCBmYWxzZSBieSBkaXNhYmxlTmV0d29yaygpIGFuZCBpbmRpY2F0ZXNcclxuICAgICAgICAgKiB0aGUgdXNlci1wcmVmZXJyZWQgbmV0d29yayBzdGF0ZS5cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLm5ldHdvcmtFbmFibGVkID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5pc1ByaW1hcnkgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmNvbm5lY3Rpdml0eU1vbml0b3IgPSBjb25uZWN0aXZpdHlNb25pdG9yO1xyXG4gICAgICAgIHRoaXMuY29ubmVjdGl2aXR5TW9uaXRvci5hZGRDYWxsYmFjayhmdW5jdGlvbiAoc3RhdHVzKSB7XHJcbiAgICAgICAgICAgIGFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldChmdW5jdGlvbiAoKSB7IHJldHVybiB0c2xpYi5fX2F3YWl0ZXIoX3RoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHNsaWIuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuY2FuVXNlTmV0d29yaygpKSByZXR1cm4gWzMgLypicmVhayovLCAyXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlYnVnKExPR19UQUckOCwgJ1Jlc3RhcnRpbmcgc3RyZWFtcyBmb3IgbmV0d29yayByZWFjaGFiaWxpdHkgY2hhbmdlLicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5yZXN0YXJ0TmV0d29yaygpXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSAyO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI6IHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7IH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMub25saW5lU3RhdGVUcmFja2VyID0gbmV3IE9ubGluZVN0YXRlVHJhY2tlcihhc3luY1F1ZXVlLCBvbmxpbmVTdGF0ZUhhbmRsZXIpO1xyXG4gICAgICAgIC8vIENyZWF0ZSBzdHJlYW1zIChidXQgbm90ZSB0aGV5J3JlIG5vdCBzdGFydGVkIHlldCkuXHJcbiAgICAgICAgdGhpcy53YXRjaFN0cmVhbSA9IHRoaXMuZGF0YXN0b3JlLm5ld1BlcnNpc3RlbnRXYXRjaFN0cmVhbSh7XHJcbiAgICAgICAgICAgIG9uT3BlbjogdGhpcy5vbldhdGNoU3RyZWFtT3Blbi5iaW5kKHRoaXMpLFxyXG4gICAgICAgICAgICBvbkNsb3NlOiB0aGlzLm9uV2F0Y2hTdHJlYW1DbG9zZS5iaW5kKHRoaXMpLFxyXG4gICAgICAgICAgICBvbldhdGNoQ2hhbmdlOiB0aGlzLm9uV2F0Y2hTdHJlYW1DaGFuZ2UuYmluZCh0aGlzKVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMud3JpdGVTdHJlYW0gPSB0aGlzLmRhdGFzdG9yZS5uZXdQZXJzaXN0ZW50V3JpdGVTdHJlYW0oe1xyXG4gICAgICAgICAgICBvbk9wZW46IHRoaXMub25Xcml0ZVN0cmVhbU9wZW4uYmluZCh0aGlzKSxcclxuICAgICAgICAgICAgb25DbG9zZTogdGhpcy5vbldyaXRlU3RyZWFtQ2xvc2UuYmluZCh0aGlzKSxcclxuICAgICAgICAgICAgb25IYW5kc2hha2VDb21wbGV0ZTogdGhpcy5vbldyaXRlSGFuZHNoYWtlQ29tcGxldGUuYmluZCh0aGlzKSxcclxuICAgICAgICAgICAgb25NdXRhdGlvblJlc3VsdDogdGhpcy5vbk11dGF0aW9uUmVzdWx0LmJpbmQodGhpcylcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogU3RhcnRzIHVwIHRoZSByZW1vdGUgc3RvcmUsIGNyZWF0aW5nIHN0cmVhbXMsIHJlc3RvcmluZyBzdGF0ZSBmcm9tXHJcbiAgICAgKiBMb2NhbFN0b3JlLCBldGMuXHJcbiAgICAgKi9cclxuICAgIFJlbW90ZVN0b3JlLnByb3RvdHlwZS5zdGFydCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5lbmFibGVOZXR3b3JrKCk7XHJcbiAgICB9O1xyXG4gICAgLyoqIFJlLWVuYWJsZXMgdGhlIG5ldHdvcmsuIElkZW1wb3RlbnQuICovXHJcbiAgICBSZW1vdGVTdG9yZS5wcm90b3R5cGUuZW5hYmxlTmV0d29yayA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdHNsaWIuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBfYTtcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYikge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYi5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5uZXR3b3JrRW5hYmxlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5jYW5Vc2VOZXR3b3JrKCkpIHJldHVybiBbMyAvKmJyZWFrKi8sIDNdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYSA9IHRoaXMud3JpdGVTdHJlYW07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMubG9jYWxTdG9yZS5nZXRMYXN0U3RyZWFtVG9rZW4oKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5sYXN0U3RyZWFtVG9rZW4gPSBfYi5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnNob3VsZFN0YXJ0V2F0Y2hTdHJlYW0oKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGFydFdhdGNoU3RyZWFtKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9ubGluZVN0YXRlVHJhY2tlci5zZXQoT25saW5lU3RhdGUuVW5rbm93bik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhpcyB3aWxsIHN0YXJ0IHRoZSB3cml0ZSBzdHJlYW0gaWYgbmVjZXNzYXJ5LlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmZpbGxXcml0ZVBpcGVsaW5lKCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhpcyB3aWxsIHN0YXJ0IHRoZSB3cml0ZSBzdHJlYW0gaWYgbmVjZXNzYXJ5LlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYi5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9iLmxhYmVsID0gMztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6IHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBUZW1wb3JhcmlseSBkaXNhYmxlcyB0aGUgbmV0d29yay4gVGhlIG5ldHdvcmsgY2FuIGJlIHJlLWVuYWJsZWQgdXNpbmdcclxuICAgICAqIGVuYWJsZU5ldHdvcmsoKS5cclxuICAgICAqL1xyXG4gICAgUmVtb3RlU3RvcmUucHJvdG90eXBlLmRpc2FibGVOZXR3b3JrID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0c2xpYi5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5uZXR3b3JrRW5hYmxlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmRpc2FibGVOZXR3b3JrSW50ZXJuYWwoKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNldCB0aGUgT25saW5lU3RhdGUgdG8gT2ZmbGluZSBzbyBnZXQoKXMgcmV0dXJuIGZyb20gY2FjaGUsIGV0Yy5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vbmxpbmVTdGF0ZVRyYWNrZXIuc2V0KE9ubGluZVN0YXRlLk9mZmxpbmUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIFJlbW90ZVN0b3JlLnByb3RvdHlwZS5kaXNhYmxlTmV0d29ya0ludGVybmFsID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0c2xpYi5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDogcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy53cml0ZVN0cmVhbS5zdG9wKCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLndhdGNoU3RyZWFtLnN0b3AoKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLndyaXRlUGlwZWxpbmUubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVidWcoTE9HX1RBRyQ4LCBcIlN0b3BwaW5nIHdyaXRlIHN0cmVhbSB3aXRoIFwiICsgdGhpcy53cml0ZVBpcGVsaW5lLmxlbmd0aCArIFwiIHBlbmRpbmcgd3JpdGVzXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy53cml0ZVBpcGVsaW5lID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jbGVhblVwV2F0Y2hTdHJlYW1TdGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIFJlbW90ZVN0b3JlLnByb3RvdHlwZS5zaHV0ZG93biA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdHNsaWIuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYi5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlYnVnKExPR19UQUckOCwgJ1JlbW90ZVN0b3JlIHNodXR0aW5nIGRvd24uJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubmV0d29ya0VuYWJsZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5kaXNhYmxlTmV0d29ya0ludGVybmFsKCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbm5lY3Rpdml0eU1vbml0b3Iuc2h1dGRvd24oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2V0IHRoZSBPbmxpbmVTdGF0ZSB0byBVbmtub3duIChyYXRoZXIgdGhhbiBPZmZsaW5lKSB0byBhdm9pZCBwb3RlbnRpYWxseVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB0cmlnZ2VyaW5nIHNwdXJpb3VzIGxpc3RlbmVyIGV2ZW50cyB3aXRoIGNhY2hlZCBkYXRhLCBldGMuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub25saW5lU3RhdGVUcmFja2VyLnNldChPbmxpbmVTdGF0ZS5Vbmtub3duKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFN0YXJ0cyBuZXcgbGlzdGVuIGZvciB0aGUgZ2l2ZW4gdGFyZ2V0LiBVc2VzIHJlc3VtZSB0b2tlbiBpZiBwcm92aWRlZC4gSXRcclxuICAgICAqIGlzIGEgbm8tb3AgaWYgdGhlIHRhcmdldCBvZiBnaXZlbiBgVGFyZ2V0RGF0YWAgaXMgYWxyZWFkeSBiZWluZyBsaXN0ZW5lZCB0by5cclxuICAgICAqL1xyXG4gICAgUmVtb3RlU3RvcmUucHJvdG90eXBlLmxpc3RlbiA9IGZ1bmN0aW9uICh0YXJnZXREYXRhKSB7XHJcbiAgICAgICAgaWYgKGNvbnRhaW5zKHRoaXMubGlzdGVuVGFyZ2V0cywgdGFyZ2V0RGF0YS50YXJnZXRJZCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBNYXJrIHRoaXMgYXMgc29tZXRoaW5nIHRoZSBjbGllbnQgaXMgY3VycmVudGx5IGxpc3RlbmluZyBmb3IuXHJcbiAgICAgICAgdGhpcy5saXN0ZW5UYXJnZXRzW3RhcmdldERhdGEudGFyZ2V0SWRdID0gdGFyZ2V0RGF0YTtcclxuICAgICAgICBpZiAodGhpcy5zaG91bGRTdGFydFdhdGNoU3RyZWFtKCkpIHtcclxuICAgICAgICAgICAgLy8gVGhlIGxpc3RlbiB3aWxsIGJlIHNlbnQgaW4gb25XYXRjaFN0cmVhbU9wZW5cclxuICAgICAgICAgICAgdGhpcy5zdGFydFdhdGNoU3RyZWFtKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHRoaXMud2F0Y2hTdHJlYW0uaXNPcGVuKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5zZW5kV2F0Y2hSZXF1ZXN0KHRhcmdldERhdGEpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJlbW92ZXMgdGhlIGxpc3RlbiBmcm9tIHNlcnZlci4gSXQgaXMgYSBuby1vcCBpZiB0aGUgZ2l2ZW4gdGFyZ2V0IGlkIGlzXHJcbiAgICAgKiBub3QgYmVpbmcgbGlzdGVuZWQgdG8uXHJcbiAgICAgKi9cclxuICAgIFJlbW90ZVN0b3JlLnByb3RvdHlwZS51bmxpc3RlbiA9IGZ1bmN0aW9uICh0YXJnZXRJZCkge1xyXG4gICAgICAgIGFzc2VydChjb250YWlucyh0aGlzLmxpc3RlblRhcmdldHMsIHRhcmdldElkKSwgXCJ1bmxpc3RlbiBjYWxsZWQgb24gdGFyZ2V0IG5vIGN1cnJlbnRseSB3YXRjaGVkOiBcIiArIHRhcmdldElkKTtcclxuICAgICAgICBkZWxldGUgdGhpcy5saXN0ZW5UYXJnZXRzW3RhcmdldElkXTtcclxuICAgICAgICBpZiAodGhpcy53YXRjaFN0cmVhbS5pc09wZW4oKSkge1xyXG4gICAgICAgICAgICB0aGlzLnNlbmRVbndhdGNoUmVxdWVzdCh0YXJnZXRJZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChpc0VtcHR5KHRoaXMubGlzdGVuVGFyZ2V0cykpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMud2F0Y2hTdHJlYW0uaXNPcGVuKCkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMud2F0Y2hTdHJlYW0ubWFya0lkbGUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmICh0aGlzLmNhblVzZU5ldHdvcmsoKSkge1xyXG4gICAgICAgICAgICAgICAgLy8gUmV2ZXJ0IHRvIE9ubGluZVN0YXRlLlVua25vd24gaWYgdGhlIHdhdGNoIHN0cmVhbSBpcyBub3Qgb3BlbiBhbmQgd2VcclxuICAgICAgICAgICAgICAgIC8vIGhhdmUgbm8gbGlzdGVuZXJzLCBzaW5jZSB3aXRob3V0IGFueSBsaXN0ZW5zIHRvIHNlbmQgd2UgY2Fubm90XHJcbiAgICAgICAgICAgICAgICAvLyBjb25maXJtIGlmIHRoZSBzdHJlYW0gaXMgaGVhbHRoeSBhbmQgdXBncmFkZSB0byBPbmxpbmVTdGF0ZS5PbmxpbmUuXHJcbiAgICAgICAgICAgICAgICB0aGlzLm9ubGluZVN0YXRlVHJhY2tlci5zZXQoT25saW5lU3RhdGUuVW5rbm93bik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqIHtAbGluayBUYXJnZXRNZXRhZGF0YVByb3ZpZGVyLmdldFRhcmdldERhdGFGb3JUYXJnZXR9ICovXHJcbiAgICBSZW1vdGVTdG9yZS5wcm90b3R5cGUuZ2V0VGFyZ2V0RGF0YUZvclRhcmdldCA9IGZ1bmN0aW9uICh0YXJnZXRJZCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmxpc3RlblRhcmdldHNbdGFyZ2V0SWRdIHx8IG51bGw7XHJcbiAgICB9O1xyXG4gICAgLyoqIHtAbGluayBUYXJnZXRNZXRhZGF0YVByb3ZpZGVyLmdldFJlbW90ZUtleXNGb3JUYXJnZXR9ICovXHJcbiAgICBSZW1vdGVTdG9yZS5wcm90b3R5cGUuZ2V0UmVtb3RlS2V5c0ZvclRhcmdldCA9IGZ1bmN0aW9uICh0YXJnZXRJZCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnN5bmNFbmdpbmUuZ2V0UmVtb3RlS2V5c0ZvclRhcmdldCh0YXJnZXRJZCk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBXZSBuZWVkIHRvIGluY3JlbWVudCB0aGUgdGhlIGV4cGVjdGVkIG51bWJlciBvZiBwZW5kaW5nIHJlc3BvbnNlcyB3ZSdyZSBkdWVcclxuICAgICAqIGZyb20gd2F0Y2ggc28gd2Ugd2FpdCBmb3IgdGhlIGFjayB0byBwcm9jZXNzIGFueSBtZXNzYWdlcyBmcm9tIHRoaXMgdGFyZ2V0LlxyXG4gICAgICovXHJcbiAgICBSZW1vdGVTdG9yZS5wcm90b3R5cGUuc2VuZFdhdGNoUmVxdWVzdCA9IGZ1bmN0aW9uICh0YXJnZXREYXRhKSB7XHJcbiAgICAgICAgdGhpcy53YXRjaENoYW5nZUFnZ3JlZ2F0b3IucmVjb3JkUGVuZGluZ1RhcmdldFJlcXVlc3QodGFyZ2V0RGF0YS50YXJnZXRJZCk7XHJcbiAgICAgICAgdGhpcy53YXRjaFN0cmVhbS53YXRjaCh0YXJnZXREYXRhKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFdlIG5lZWQgdG8gaW5jcmVtZW50IHRoZSBleHBlY3RlZCBudW1iZXIgb2YgcGVuZGluZyByZXNwb25zZXMgd2UncmUgZHVlXHJcbiAgICAgKiBmcm9tIHdhdGNoIHNvIHdlIHdhaXQgZm9yIHRoZSByZW1vdmFsIG9uIHRoZSBzZXJ2ZXIgYmVmb3JlIHdlIHByb2Nlc3MgYW55XHJcbiAgICAgKiBtZXNzYWdlcyBmcm9tIHRoaXMgdGFyZ2V0LlxyXG4gICAgICovXHJcbiAgICBSZW1vdGVTdG9yZS5wcm90b3R5cGUuc2VuZFVud2F0Y2hSZXF1ZXN0ID0gZnVuY3Rpb24gKHRhcmdldElkKSB7XHJcbiAgICAgICAgdGhpcy53YXRjaENoYW5nZUFnZ3JlZ2F0b3IucmVjb3JkUGVuZGluZ1RhcmdldFJlcXVlc3QodGFyZ2V0SWQpO1xyXG4gICAgICAgIHRoaXMud2F0Y2hTdHJlYW0udW53YXRjaCh0YXJnZXRJZCk7XHJcbiAgICB9O1xyXG4gICAgUmVtb3RlU3RvcmUucHJvdG90eXBlLnN0YXJ0V2F0Y2hTdHJlYW0gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgYXNzZXJ0KHRoaXMuc2hvdWxkU3RhcnRXYXRjaFN0cmVhbSgpLCAnc3RhcnRXYXRjaFN0cmVhbSgpIGNhbGxlZCB3aGVuIHNob3VsZFN0YXJ0V2F0Y2hTdHJlYW0oKSBpcyBmYWxzZS4nKTtcclxuICAgICAgICB0aGlzLndhdGNoQ2hhbmdlQWdncmVnYXRvciA9IG5ldyBXYXRjaENoYW5nZUFnZ3JlZ2F0b3IodGhpcyk7XHJcbiAgICAgICAgdGhpcy53YXRjaFN0cmVhbS5zdGFydCgpO1xyXG4gICAgICAgIHRoaXMub25saW5lU3RhdGVUcmFja2VyLmhhbmRsZVdhdGNoU3RyZWFtU3RhcnQoKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgd2hldGhlciB0aGUgd2F0Y2ggc3RyZWFtIHNob3VsZCBiZSBzdGFydGVkIGJlY2F1c2UgaXQncyBuZWNlc3NhcnlcclxuICAgICAqIGFuZCBoYXMgbm90IHlldCBiZWVuIHN0YXJ0ZWQuXHJcbiAgICAgKi9cclxuICAgIFJlbW90ZVN0b3JlLnByb3RvdHlwZS5zaG91bGRTdGFydFdhdGNoU3RyZWFtID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiAodGhpcy5jYW5Vc2VOZXR3b3JrKCkgJiZcclxuICAgICAgICAgICAgIXRoaXMud2F0Y2hTdHJlYW0uaXNTdGFydGVkKCkgJiZcclxuICAgICAgICAgICAgIWlzRW1wdHkodGhpcy5saXN0ZW5UYXJnZXRzKSk7XHJcbiAgICB9O1xyXG4gICAgUmVtb3RlU3RvcmUucHJvdG90eXBlLmNhblVzZU5ldHdvcmsgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNQcmltYXJ5ICYmIHRoaXMubmV0d29ya0VuYWJsZWQ7XHJcbiAgICB9O1xyXG4gICAgUmVtb3RlU3RvcmUucHJvdG90eXBlLmNsZWFuVXBXYXRjaFN0cmVhbVN0YXRlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMud2F0Y2hDaGFuZ2VBZ2dyZWdhdG9yID0gbnVsbDtcclxuICAgIH07XHJcbiAgICBSZW1vdGVTdG9yZS5wcm90b3R5cGUub25XYXRjaFN0cmVhbU9wZW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRzbGliLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgICAgICByZXR1cm4gdHNsaWIuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBmb3JFYWNoTnVtYmVyKHRoaXMubGlzdGVuVGFyZ2V0cywgZnVuY3Rpb24gKHRhcmdldElkLCB0YXJnZXREYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuc2VuZFdhdGNoUmVxdWVzdCh0YXJnZXREYXRhKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBSZW1vdGVTdG9yZS5wcm90b3R5cGUub25XYXRjaFN0cmVhbUNsb3NlID0gZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICAgICAgcmV0dXJuIHRzbGliLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHNsaWIuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIEdyYWNlZnVsIHN0b3AgKGR1ZSB0byBzdG9wKCkgb3IgaWRsZSB0aW1lb3V0KS4gTWFrZSBzdXJlIHRoYXQnc1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGRlc2lyYWJsZS5cclxuICAgICAgICAgICAgICAgICAgICBhc3NlcnQoIXRoaXMuc2hvdWxkU3RhcnRXYXRjaFN0cmVhbSgpLCAnV2F0Y2ggc3RyZWFtIHdhcyBzdG9wcGVkIGdyYWNlZnVsbHkgd2hpbGUgc3RpbGwgbmVlZGVkLicpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5jbGVhblVwV2F0Y2hTdHJlYW1TdGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgLy8gSWYgd2Ugc3RpbGwgbmVlZCB0aGUgd2F0Y2ggc3RyZWFtLCByZXRyeSB0aGUgY29ubmVjdGlvbi5cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNob3VsZFN0YXJ0V2F0Y2hTdHJlYW0oKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMub25saW5lU3RhdGVUcmFja2VyLmhhbmRsZVdhdGNoU3RyZWFtRmFpbHVyZShlcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGFydFdhdGNoU3RyZWFtKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBObyBuZWVkIHRvIHJlc3RhcnQgd2F0Y2ggc3RyZWFtIGJlY2F1c2UgdGhlcmUgYXJlIG5vIGFjdGl2ZSB0YXJnZXRzLlxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFRoZSBvbmxpbmUgc3RhdGUgaXMgc2V0IHRvIHVua25vd24gYmVjYXVzZSB0aGVyZSBpcyBubyBhY3RpdmUgYXR0ZW1wdFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGF0IGVzdGFibGlzaGluZyBhIGNvbm5lY3Rpb25cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm9ubGluZVN0YXRlVHJhY2tlci5zZXQoT25saW5lU3RhdGUuVW5rbm93bik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIFJlbW90ZVN0b3JlLnByb3RvdHlwZS5vbldhdGNoU3RyZWFtQ2hhbmdlID0gZnVuY3Rpb24gKHdhdGNoQ2hhbmdlLCBzbmFwc2hvdFZlcnNpb24pIHtcclxuICAgICAgICByZXR1cm4gdHNsaWIuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBsYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uO1xyXG4gICAgICAgICAgICByZXR1cm4gdHNsaWIuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBNYXJrIHRoZSBjbGllbnQgYXMgb25saW5lIHNpbmNlIHdlIGdvdCBhIG1lc3NhZ2UgZnJvbSB0aGUgc2VydmVyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub25saW5lU3RhdGVUcmFja2VyLnNldChPbmxpbmVTdGF0ZS5PbmxpbmUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAod2F0Y2hDaGFuZ2UgaW5zdGFuY2VvZiBXYXRjaFRhcmdldENoYW5nZSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2F0Y2hDaGFuZ2Uuc3RhdGUgPT09IFdhdGNoVGFyZ2V0Q2hhbmdlU3RhdGUuUmVtb3ZlZCAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2F0Y2hDaGFuZ2UuY2F1c2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoZXJlIHdhcyBhbiBlcnJvciBvbiBhIHRhcmdldCwgZG9uJ3Qgd2FpdCBmb3IgYSBjb25zaXN0ZW50IHNuYXBzaG90XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0byByYWlzZSBldmVudHNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0aGlzLmhhbmRsZVRhcmdldEVycm9yKHdhdGNoQ2hhbmdlKV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHdhdGNoQ2hhbmdlIGluc3RhbmNlb2YgRG9jdW1lbnRXYXRjaENoYW5nZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy53YXRjaENoYW5nZUFnZ3JlZ2F0b3IuaGFuZGxlRG9jdW1lbnRDaGFuZ2Uod2F0Y2hDaGFuZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHdhdGNoQ2hhbmdlIGluc3RhbmNlb2YgRXhpc3RlbmNlRmlsdGVyQ2hhbmdlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLndhdGNoQ2hhbmdlQWdncmVnYXRvci5oYW5kbGVFeGlzdGVuY2VGaWx0ZXIod2F0Y2hDaGFuZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXJ0KHdhdGNoQ2hhbmdlIGluc3RhbmNlb2YgV2F0Y2hUYXJnZXRDaGFuZ2UsICdFeHBlY3RlZCB3YXRjaENoYW5nZSB0byBiZSBhbiBpbnN0YW5jZSBvZiBXYXRjaFRhcmdldENoYW5nZScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy53YXRjaENoYW5nZUFnZ3JlZ2F0b3IuaGFuZGxlVGFyZ2V0Q2hhbmdlKHdhdGNoQ2hhbmdlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoISFzbmFwc2hvdFZlcnNpb24uaXNFcXVhbChTbmFwc2hvdFZlcnNpb24uTUlOKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgM107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMubG9jYWxTdG9yZS5nZXRMYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uKCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbiA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEoc25hcHNob3RWZXJzaW9uLmNvbXBhcmVUbyhsYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uKSA+PSAwKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgM107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdlIGhhdmUgcmVjZWl2ZWQgYSB0YXJnZXQgY2hhbmdlIHdpdGggYSBnbG9iYWwgc25hcHNob3QgaWYgdGhlIHNuYXBzaG90XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHZlcnNpb24gaXMgbm90IGVxdWFsIHRvIFNuYXBzaG90VmVyc2lvbi5NSU4uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMucmFpc2VXYXRjaFNuYXBzaG90KHNuYXBzaG90VmVyc2lvbildO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gV2UgaGF2ZSByZWNlaXZlZCBhIHRhcmdldCBjaGFuZ2Ugd2l0aCBhIGdsb2JhbCBzbmFwc2hvdCBpZiB0aGUgc25hcHNob3RcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdmVyc2lvbiBpcyBub3QgZXF1YWwgdG8gU25hcHNob3RWZXJzaW9uLk1JTi5cclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDM7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOiByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogVGFrZXMgYSBiYXRjaCBvZiBjaGFuZ2VzIGZyb20gdGhlIERhdGFzdG9yZSwgcmVwYWNrYWdlcyB0aGVtIGFzIGFcclxuICAgICAqIFJlbW90ZUV2ZW50LCBhbmQgcGFzc2VzIHRoYXQgb24gdG8gdGhlIGxpc3RlbmVyLCB3aGljaCBpcyB0eXBpY2FsbHkgdGhlXHJcbiAgICAgKiBTeW5jRW5naW5lLlxyXG4gICAgICovXHJcbiAgICBSZW1vdGVTdG9yZS5wcm90b3R5cGUucmFpc2VXYXRjaFNuYXBzaG90ID0gZnVuY3Rpb24gKHNuYXBzaG90VmVyc2lvbikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgYXNzZXJ0KCFzbmFwc2hvdFZlcnNpb24uaXNFcXVhbChTbmFwc2hvdFZlcnNpb24uTUlOKSwgXCJDYW4ndCByYWlzZSBldmVudCBmb3IgdW5rbm93biBTbmFwc2hvdFZlcnNpb25cIik7XHJcbiAgICAgICAgdmFyIHJlbW90ZUV2ZW50ID0gdGhpcy53YXRjaENoYW5nZUFnZ3JlZ2F0b3IuY3JlYXRlUmVtb3RlRXZlbnQoc25hcHNob3RWZXJzaW9uKTtcclxuICAgICAgICAvLyBVcGRhdGUgaW4tbWVtb3J5IHJlc3VtZSB0b2tlbnMuIExvY2FsU3RvcmUgd2lsbCB1cGRhdGUgdGhlXHJcbiAgICAgICAgLy8gcGVyc2lzdGVudCB2aWV3IG9mIHRoZXNlIHdoZW4gYXBwbHlpbmcgdGhlIGNvbXBsZXRlZCBSZW1vdGVFdmVudC5cclxuICAgICAgICBmb3JFYWNoTnVtYmVyKHJlbW90ZUV2ZW50LnRhcmdldENoYW5nZXMsIGZ1bmN0aW9uICh0YXJnZXRJZCwgY2hhbmdlKSB7XHJcbiAgICAgICAgICAgIGlmIChjaGFuZ2UucmVzdW1lVG9rZW4ubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHRhcmdldERhdGEgPSBfdGhpcy5saXN0ZW5UYXJnZXRzW3RhcmdldElkXTtcclxuICAgICAgICAgICAgICAgIC8vIEEgd2F0Y2hlZCB0YXJnZXQgbWlnaHQgaGF2ZSBiZWVuIHJlbW92ZWQgYWxyZWFkeS5cclxuICAgICAgICAgICAgICAgIGlmICh0YXJnZXREYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMubGlzdGVuVGFyZ2V0c1t0YXJnZXRJZF0gPSB0YXJnZXREYXRhLndpdGhSZXN1bWVUb2tlbihjaGFuZ2UucmVzdW1lVG9rZW4sIHNuYXBzaG90VmVyc2lvbik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyBSZS1lc3RhYmxpc2ggbGlzdGVucyBmb3IgdGhlIHRhcmdldHMgdGhhdCBoYXZlIGJlZW4gaW52YWxpZGF0ZWQgYnlcclxuICAgICAgICAvLyBleGlzdGVuY2UgZmlsdGVyIG1pc21hdGNoZXMuXHJcbiAgICAgICAgcmVtb3RlRXZlbnQudGFyZ2V0TWlzbWF0Y2hlcy5mb3JFYWNoKGZ1bmN0aW9uICh0YXJnZXRJZCkge1xyXG4gICAgICAgICAgICB2YXIgdGFyZ2V0RGF0YSA9IF90aGlzLmxpc3RlblRhcmdldHNbdGFyZ2V0SWRdO1xyXG4gICAgICAgICAgICBpZiAoIXRhcmdldERhdGEpIHtcclxuICAgICAgICAgICAgICAgIC8vIEEgd2F0Y2hlZCB0YXJnZXQgbWlnaHQgaGF2ZSBiZWVuIHJlbW92ZWQgYWxyZWFkeS5cclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBDbGVhciB0aGUgcmVzdW1lIHRva2VuIGZvciB0aGUgdGFyZ2V0LCBzaW5jZSB3ZSdyZSBpbiBhIGtub3duIG1pc21hdGNoXHJcbiAgICAgICAgICAgIC8vIHN0YXRlLlxyXG4gICAgICAgICAgICBfdGhpcy5saXN0ZW5UYXJnZXRzW3RhcmdldElkXSA9IHRhcmdldERhdGEud2l0aFJlc3VtZVRva2VuKGVtcHR5Qnl0ZVN0cmluZygpLCB0YXJnZXREYXRhLnNuYXBzaG90VmVyc2lvbik7XHJcbiAgICAgICAgICAgIC8vIENhdXNlIGEgaGFyZCByZXNldCBieSB1bndhdGNoaW5nIGFuZCByZXdhdGNoaW5nIGltbWVkaWF0ZWx5LCBidXRcclxuICAgICAgICAgICAgLy8gZGVsaWJlcmF0ZWx5IGRvbid0IHNlbmQgYSByZXN1bWUgdG9rZW4gc28gdGhhdCB3ZSBnZXQgYSBmdWxsIHVwZGF0ZS5cclxuICAgICAgICAgICAgX3RoaXMuc2VuZFVud2F0Y2hSZXF1ZXN0KHRhcmdldElkKTtcclxuICAgICAgICAgICAgLy8gTWFyayB0aGUgdGFyZ2V0IHdlIHNlbmQgYXMgYmVpbmcgb24gYmVoYWxmIG9mIGFuIGV4aXN0ZW5jZSBmaWx0ZXJcclxuICAgICAgICAgICAgLy8gbWlzbWF0Y2gsIGJ1dCBkb24ndCBhY3R1YWxseSByZXRhaW4gdGhhdCBpbiBsaXN0ZW5UYXJnZXRzLiBUaGlzIGVuc3VyZXNcclxuICAgICAgICAgICAgLy8gdGhhdCB3ZSBmbGFnIHRoZSBmaXJzdCByZS1saXN0ZW4gdGhpcyB3YXkgd2l0aG91dCBpbXBhY3RpbmcgZnV0dXJlXHJcbiAgICAgICAgICAgIC8vIGxpc3RlbnMgb2YgdGhpcyB0YXJnZXQgKHRoYXQgbWlnaHQgaGFwcGVuIGUuZy4gb24gcmVjb25uZWN0KS5cclxuICAgICAgICAgICAgdmFyIHJlcXVlc3RUYXJnZXREYXRhID0gbmV3IFRhcmdldERhdGEodGFyZ2V0RGF0YS50YXJnZXQsIHRhcmdldElkLCBUYXJnZXRQdXJwb3NlLkV4aXN0ZW5jZUZpbHRlck1pc21hdGNoLCB0YXJnZXREYXRhLnNlcXVlbmNlTnVtYmVyKTtcclxuICAgICAgICAgICAgX3RoaXMuc2VuZFdhdGNoUmVxdWVzdChyZXF1ZXN0VGFyZ2V0RGF0YSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gRmluYWxseSByYWlzZSByZW1vdGUgZXZlbnRcclxuICAgICAgICByZXR1cm4gdGhpcy5zeW5jRW5naW5lLmFwcGx5UmVtb3RlRXZlbnQocmVtb3RlRXZlbnQpO1xyXG4gICAgfTtcclxuICAgIC8qKiBIYW5kbGVzIGFuIGVycm9yIG9uIGEgdGFyZ2V0ICovXHJcbiAgICBSZW1vdGVTdG9yZS5wcm90b3R5cGUuaGFuZGxlVGFyZ2V0RXJyb3IgPSBmdW5jdGlvbiAod2F0Y2hDaGFuZ2UpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIGFzc2VydCghIXdhdGNoQ2hhbmdlLmNhdXNlLCAnSGFuZGxpbmcgdGFyZ2V0IGVycm9yIHdpdGhvdXQgYSBjYXVzZScpO1xyXG4gICAgICAgIHZhciBlcnJvciA9IHdhdGNoQ2hhbmdlLmNhdXNlO1xyXG4gICAgICAgIHZhciBwcm9taXNlQ2hhaW4gPSBQcm9taXNlLnJlc29sdmUoKTtcclxuICAgICAgICB3YXRjaENoYW5nZS50YXJnZXRJZHMuZm9yRWFjaChmdW5jdGlvbiAodGFyZ2V0SWQpIHtcclxuICAgICAgICAgICAgcHJvbWlzZUNoYWluID0gcHJvbWlzZUNoYWluLnRoZW4oZnVuY3Rpb24gKCkgeyByZXR1cm4gdHNsaWIuX19hd2FpdGVyKF90aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRzbGliLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIEEgd2F0Y2hlZCB0YXJnZXQgbWlnaHQgaGF2ZSBiZWVuIHJlbW92ZWQgYWxyZWFkeS5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoY29udGFpbnModGhpcy5saXN0ZW5UYXJnZXRzLCB0YXJnZXRJZCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMubGlzdGVuVGFyZ2V0c1t0YXJnZXRJZF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMud2F0Y2hDaGFuZ2VBZ2dyZWdhdG9yLnJlbW92ZVRhcmdldCh0YXJnZXRJZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0aGlzLnN5bmNFbmdpbmUucmVqZWN0TGlzdGVuKHRhcmdldElkLCBlcnJvcildO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7IH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBwcm9taXNlQ2hhaW47XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBBdHRlbXB0cyB0byBmaWxsIG91ciB3cml0ZSBwaXBlbGluZSB3aXRoIHdyaXRlcyBmcm9tIHRoZSBMb2NhbFN0b3JlLlxyXG4gICAgICpcclxuICAgICAqIENhbGxlZCBpbnRlcm5hbGx5IHRvIGJvb3RzdHJhcCBvciByZWZpbGwgdGhlIHdyaXRlIHBpcGVsaW5lIGFuZCBieVxyXG4gICAgICogU3luY0VuZ2luZSB3aGVuZXZlciB0aGVyZSBhcmUgbmV3IG11dGF0aW9ucyB0byBwcm9jZXNzLlxyXG4gICAgICpcclxuICAgICAqIFN0YXJ0cyB0aGUgd3JpdGUgc3RyZWFtIGlmIG5lY2Vzc2FyeS5cclxuICAgICAqL1xyXG4gICAgUmVtb3RlU3RvcmUucHJvdG90eXBlLmZpbGxXcml0ZVBpcGVsaW5lID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0c2xpYi5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGxhc3RCYXRjaElkUmV0cmlldmVkLCBiYXRjaDtcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLmNhbkFkZFRvV3JpdGVQaXBlbGluZSgpKSByZXR1cm4gWzMgLypicmVhayovLCA0XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGFzdEJhdGNoSWRSZXRyaWV2ZWQgPSB0aGlzLndyaXRlUGlwZWxpbmUubGVuZ3RoID4gMFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB0aGlzLndyaXRlUGlwZWxpbmVbdGhpcy53cml0ZVBpcGVsaW5lLmxlbmd0aCAtIDFdLmJhdGNoSWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogQkFUQ0hJRF9VTktOT1dOO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmxvY2FsU3RvcmUubmV4dE11dGF0aW9uQmF0Y2gobGFzdEJhdGNoSWRSZXRyaWV2ZWQpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhdGNoID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShiYXRjaCA9PT0gbnVsbCkpIHJldHVybiBbMyAvKmJyZWFrKi8sIDJdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy53cml0ZVBpcGVsaW5lLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy53cml0ZVN0cmVhbS5tYXJrSWRsZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDRdO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRUb1dyaXRlUGlwZWxpbmUoYmF0Y2gpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmZpbGxXcml0ZVBpcGVsaW5lKCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDQ7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5zaG91bGRTdGFydFdyaXRlU3RyZWFtKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhcnRXcml0ZVN0cmVhbSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgd2UgY2FuIGFkZCB0byB0aGUgd3JpdGUgcGlwZWxpbmUgKGkuZS4gdGhlIG5ldHdvcmsgaXNcclxuICAgICAqIGVuYWJsZWQgYW5kIHRoZSB3cml0ZSBwaXBlbGluZSBpcyBub3QgZnVsbCkuXHJcbiAgICAgKi9cclxuICAgIFJlbW90ZVN0b3JlLnByb3RvdHlwZS5jYW5BZGRUb1dyaXRlUGlwZWxpbmUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuICh0aGlzLmNhblVzZU5ldHdvcmsoKSAmJiB0aGlzLndyaXRlUGlwZWxpbmUubGVuZ3RoIDwgTUFYX1BFTkRJTkdfV1JJVEVTKTtcclxuICAgIH07XHJcbiAgICAvLyBGb3IgdGVzdGluZ1xyXG4gICAgUmVtb3RlU3RvcmUucHJvdG90eXBlLm91dHN0YW5kaW5nV3JpdGVzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLndyaXRlUGlwZWxpbmUubGVuZ3RoO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUXVldWVzIGFkZGl0aW9uYWwgd3JpdGVzIHRvIGJlIHNlbnQgdG8gdGhlIHdyaXRlIHN0cmVhbSwgc2VuZGluZyB0aGVtXHJcbiAgICAgKiBpbW1lZGlhdGVseSBpZiB0aGUgd3JpdGUgc3RyZWFtIGlzIGVzdGFibGlzaGVkLlxyXG4gICAgICovXHJcbiAgICBSZW1vdGVTdG9yZS5wcm90b3R5cGUuYWRkVG9Xcml0ZVBpcGVsaW5lID0gZnVuY3Rpb24gKGJhdGNoKSB7XHJcbiAgICAgICAgYXNzZXJ0KHRoaXMuY2FuQWRkVG9Xcml0ZVBpcGVsaW5lKCksICdhZGRUb1dyaXRlUGlwZWxpbmUgY2FsbGVkIHdoZW4gcGlwZWxpbmUgaXMgZnVsbCcpO1xyXG4gICAgICAgIHRoaXMud3JpdGVQaXBlbGluZS5wdXNoKGJhdGNoKTtcclxuICAgICAgICBpZiAodGhpcy53cml0ZVN0cmVhbS5pc09wZW4oKSAmJiB0aGlzLndyaXRlU3RyZWFtLmhhbmRzaGFrZUNvbXBsZXRlKSB7XHJcbiAgICAgICAgICAgIHRoaXMud3JpdGVTdHJlYW0ud3JpdGVNdXRhdGlvbnMoYmF0Y2gubXV0YXRpb25zKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgUmVtb3RlU3RvcmUucHJvdG90eXBlLnNob3VsZFN0YXJ0V3JpdGVTdHJlYW0gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuICh0aGlzLmNhblVzZU5ldHdvcmsoKSAmJlxyXG4gICAgICAgICAgICAhdGhpcy53cml0ZVN0cmVhbS5pc1N0YXJ0ZWQoKSAmJlxyXG4gICAgICAgICAgICB0aGlzLndyaXRlUGlwZWxpbmUubGVuZ3RoID4gMCk7XHJcbiAgICB9O1xyXG4gICAgUmVtb3RlU3RvcmUucHJvdG90eXBlLnN0YXJ0V3JpdGVTdHJlYW0gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgYXNzZXJ0KHRoaXMuc2hvdWxkU3RhcnRXcml0ZVN0cmVhbSgpLCAnc3RhcnRXcml0ZVN0cmVhbSgpIGNhbGxlZCB3aGVuIHNob3VsZFN0YXJ0V3JpdGVTdHJlYW0oKSBpcyBmYWxzZS4nKTtcclxuICAgICAgICB0aGlzLndyaXRlU3RyZWFtLnN0YXJ0KCk7XHJcbiAgICB9O1xyXG4gICAgUmVtb3RlU3RvcmUucHJvdG90eXBlLm9uV3JpdGVTdHJlYW1PcGVuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0c2xpYi5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy53cml0ZVN0cmVhbS53cml0ZUhhbmRzaGFrZSgpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBSZW1vdGVTdG9yZS5wcm90b3R5cGUub25Xcml0ZUhhbmRzaGFrZUNvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgLy8gUmVjb3JkIHRoZSBzdHJlYW0gdG9rZW4uXHJcbiAgICAgICAgcmV0dXJuIHRoaXMubG9jYWxTdG9yZVxyXG4gICAgICAgICAgICAuc2V0TGFzdFN0cmVhbVRva2VuKHRoaXMud3JpdGVTdHJlYW0ubGFzdFN0cmVhbVRva2VuKVxyXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIC8vIFNlbmQgdGhlIHdyaXRlIHBpcGVsaW5lIG5vdyB0aGF0IHRoZSBzdHJlYW0gaXMgZXN0YWJsaXNoZWQuXHJcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBfdGhpcy53cml0ZVBpcGVsaW5lOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGJhdGNoID0gX2FbX2ldO1xyXG4gICAgICAgICAgICAgICAgX3RoaXMud3JpdGVTdHJlYW0ud3JpdGVNdXRhdGlvbnMoYmF0Y2gubXV0YXRpb25zKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5jYXRjaChpZ25vcmVJZlByaW1hcnlMZWFzZUxvc3MpO1xyXG4gICAgfTtcclxuICAgIFJlbW90ZVN0b3JlLnByb3RvdHlwZS5vbk11dGF0aW9uUmVzdWx0ID0gZnVuY3Rpb24gKGNvbW1pdFZlcnNpb24sIHJlc3VsdHMpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIC8vIFRoaXMgaXMgYSByZXNwb25zZSB0byBhIHdyaXRlIGNvbnRhaW5pbmcgbXV0YXRpb25zIGFuZCBzaG91bGQgYmVcclxuICAgICAgICAvLyBjb3JyZWxhdGVkIHRvIHRoZSBmaXJzdCB3cml0ZSBpbiBvdXIgd3JpdGUgcGlwZWxpbmUuXHJcbiAgICAgICAgYXNzZXJ0KHRoaXMud3JpdGVQaXBlbGluZS5sZW5ndGggPiAwLCAnR290IHJlc3VsdCBmb3IgZW1wdHkgd3JpdGUgcGlwZWxpbmUnKTtcclxuICAgICAgICB2YXIgYmF0Y2ggPSB0aGlzLndyaXRlUGlwZWxpbmUuc2hpZnQoKTtcclxuICAgICAgICB2YXIgc3VjY2VzcyA9IE11dGF0aW9uQmF0Y2hSZXN1bHQuZnJvbShiYXRjaCwgY29tbWl0VmVyc2lvbiwgcmVzdWx0cywgdGhpcy53cml0ZVN0cmVhbS5sYXN0U3RyZWFtVG9rZW4pO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnN5bmNFbmdpbmUuYXBwbHlTdWNjZXNzZnVsV3JpdGUoc3VjY2VzcykudGhlbihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIC8vIEl0J3MgcG9zc2libGUgdGhhdCB3aXRoIHRoZSBjb21wbGV0aW9uIG9mIHRoaXMgbXV0YXRpb24gYW5vdGhlclxyXG4gICAgICAgICAgICAvLyBzbG90IGhhcyBmcmVlZCB1cC5cclxuICAgICAgICAgICAgcmV0dXJuIF90aGlzLmZpbGxXcml0ZVBpcGVsaW5lKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgUmVtb3RlU3RvcmUucHJvdG90eXBlLm9uV3JpdGVTdHJlYW1DbG9zZSA9IGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgIHJldHVybiB0c2xpYi5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGVycm9ySGFuZGxpbmc7XHJcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYi5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIGlmIChlcnJvciA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gR3JhY2VmdWwgc3RvcCAoZHVlIHRvIHN0b3AoKSBvciBpZGxlIHRpbWVvdXQpLiBNYWtlIHN1cmUgdGhhdCdzXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gZGVzaXJhYmxlLlxyXG4gICAgICAgICAgICAgICAgICAgIGFzc2VydCghdGhpcy5zaG91bGRTdGFydFdyaXRlU3RyZWFtKCksICdXcml0ZSBzdHJlYW0gd2FzIHN0b3BwZWQgZ3JhY2VmdWxseSB3aGlsZSBzdGlsbCBuZWVkZWQuJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBJZiB0aGUgd3JpdGUgc3RyZWFtIGNsb3NlZCBkdWUgdG8gYW4gZXJyb3IsIGludm9rZSB0aGUgZXJyb3IgY2FsbGJhY2tzIGlmXHJcbiAgICAgICAgICAgICAgICAvLyB0aGVyZSBhcmUgcGVuZGluZyB3cml0ZXMuXHJcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IgJiYgdGhpcy53cml0ZVBpcGVsaW5lLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBlcnJvckhhbmRsaW5nID0gdm9pZCAwO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLndyaXRlU3RyZWFtLmhhbmRzaGFrZUNvbXBsZXRlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgZXJyb3IgYWZmZWN0cyB0aGUgYWN0dWFsIHdyaXRlLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvckhhbmRsaW5nID0gdGhpcy5oYW5kbGVXcml0ZUVycm9yKGVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZXJlIHdhcyBhbiBlcnJvciBiZWZvcmUgdGhlIGhhbmRzaGFrZSBoYXMgZmluaXNoZWQsIGl0J3NcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gcG9zc2libGUgdGhhdCB0aGUgc2VydmVyIGlzIHVuYWJsZSB0byBwcm9jZXNzIHRoZSBzdHJlYW0gdG9rZW5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gd2UncmUgc2VuZGluZy4gKFBlcmhhcHMgaXQncyB0b28gb2xkPylcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JIYW5kbGluZyA9IHRoaXMuaGFuZGxlSGFuZHNoYWtlRXJyb3IoZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgZXJyb3JIYW5kbGluZy50aGVuKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoZSB3cml0ZSBzdHJlYW0gbWlnaHQgaGF2ZSBiZWVuIHN0YXJ0ZWQgYnkgcmVmaWxsaW5nIHRoZSB3cml0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcGlwZWxpbmUgZm9yIGZhaWxlZCB3cml0ZXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfdGhpcy5zaG91bGRTdGFydFdyaXRlU3RyZWFtKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5zdGFydFdyaXRlU3RyZWFtKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgUmVtb3RlU3RvcmUucHJvdG90eXBlLmhhbmRsZUhhbmRzaGFrZUVycm9yID0gZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICAgICAgcmV0dXJuIHRzbGliLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHNsaWIuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBSZXNldCB0aGUgdG9rZW4gaWYgaXQncyBhIHBlcm1hbmVudCBlcnJvciwgc2lnbmFsaW5nIHRoZSB3cml0ZSBzdHJlYW0gaXNcclxuICAgICAgICAgICAgICAgIC8vIG5vIGxvbmdlciB2YWxpZC4gTm90ZSB0aGF0IHRoZSBoYW5kc2hha2UgZG9lcyBub3QgY291bnQgYXMgYSB3cml0ZTogc2VlXHJcbiAgICAgICAgICAgICAgICAvLyBjb21tZW50cyBvbiBpc1Blcm1hbmVudFdyaXRlRXJyb3IgZm9yIGRldGFpbHMuXHJcbiAgICAgICAgICAgICAgICBpZiAoaXNQZXJtYW5lbnRFcnJvcihlcnJvci5jb2RlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlYnVnKExPR19UQUckOCwgJ1JlbW90ZVN0b3JlIGVycm9yIGJlZm9yZSBjb21wbGV0ZWQgaGFuZHNoYWtlOyByZXNldHRpbmcgc3RyZWFtIHRva2VuOiAnLCB0aGlzLndyaXRlU3RyZWFtLmxhc3RTdHJlYW1Ub2tlbik7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy53cml0ZVN0cmVhbS5sYXN0U3RyZWFtVG9rZW4gPSBlbXB0eUJ5dGVTdHJpbmcoKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdGhpcy5sb2NhbFN0b3JlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2V0TGFzdFN0cmVhbVRva2VuKGVtcHR5Qnl0ZVN0cmluZygpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGlnbm9yZUlmUHJpbWFyeUxlYXNlTG9zcyldO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBSZW1vdGVTdG9yZS5wcm90b3R5cGUuaGFuZGxlV3JpdGVFcnJvciA9IGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgIHJldHVybiB0c2xpYi5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGJhdGNoO1xyXG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgICAgICByZXR1cm4gdHNsaWIuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBPbmx5IGhhbmRsZSBwZXJtYW5lbnQgZXJyb3JzIGhlcmUuIElmIGl0J3MgdHJhbnNpZW50LCBqdXN0IGxldCB0aGUgcmV0cnlcclxuICAgICAgICAgICAgICAgIC8vIGxvZ2ljIGtpY2sgaW4uXHJcbiAgICAgICAgICAgICAgICBpZiAoaXNQZXJtYW5lbnRXcml0ZUVycm9yKGVycm9yLmNvZGUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYmF0Y2ggPSB0aGlzLndyaXRlUGlwZWxpbmUuc2hpZnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBJbiB0aGlzIGNhc2UgaXQncyBhbHNvIHVubGlrZWx5IHRoYXQgdGhlIHNlcnZlciBpdHNlbGYgaXMgbWVsdGluZ1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGRvd24gLS0gdGhpcyB3YXMganVzdCBhIGJhZCByZXF1ZXN0IHNvIGluaGliaXQgYmFja29mZiBvbiB0aGUgbmV4dFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIHJlc3RhcnQuXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy53cml0ZVN0cmVhbS5pbmhpYml0QmFja29mZigpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0aGlzLnN5bmNFbmdpbmVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZWplY3RGYWlsZWRXcml0ZShiYXRjaC5iYXRjaElkLCBlcnJvcilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEl0J3MgcG9zc2libGUgdGhhdCB3aXRoIHRoZSBjb21wbGV0aW9uIG9mIHRoaXMgbXV0YXRpb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFub3RoZXIgc2xvdCBoYXMgZnJlZWQgdXAuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuZmlsbFdyaXRlUGlwZWxpbmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSldO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBSZW1vdGVTdG9yZS5wcm90b3R5cGUuY3JlYXRlVHJhbnNhY3Rpb24gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBUcmFuc2FjdGlvbih0aGlzLmRhdGFzdG9yZSk7XHJcbiAgICB9O1xyXG4gICAgUmVtb3RlU3RvcmUucHJvdG90eXBlLnJlc3RhcnROZXR3b3JrID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0c2xpYi5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5uZXR3b3JrRW5hYmxlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmRpc2FibGVOZXR3b3JrSW50ZXJuYWwoKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub25saW5lU3RhdGVUcmFja2VyLnNldChPbmxpbmVTdGF0ZS5Vbmtub3duKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5lbmFibGVOZXR3b3JrKCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIFJlbW90ZVN0b3JlLnByb3RvdHlwZS5oYW5kbGVDcmVkZW50aWFsQ2hhbmdlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0c2xpYi5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLmNhblVzZU5ldHdvcmsoKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgMl07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRlYXIgZG93biBhbmQgcmUtY3JlYXRlIG91ciBuZXR3b3JrIHN0cmVhbXMuIFRoaXMgd2lsbCBlbnN1cmUgd2UgZ2V0IGEgZnJlc2ggYXV0aCB0b2tlblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBmb3IgdGhlIG5ldyB1c2VyIGFuZCByZS1maWxsIHRoZSB3cml0ZSBwaXBlbGluZSB3aXRoIG5ldyBtdXRhdGlvbnMgZnJvbSB0aGUgTG9jYWxTdG9yZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAoc2luY2UgbXV0YXRpb25zIGFyZSBwZXItdXNlcikuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlYnVnKExPR19UQUckOCwgJ1JlbW90ZVN0b3JlIHJlc3RhcnRpbmcgc3RyZWFtcyBmb3IgbmV3IGNyZWRlbnRpYWwnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5yZXN0YXJ0TmV0d29yaygpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSAyO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFRvZ2dsZXMgdGhlIG5ldHdvcmsgc3RhdGUgd2hlbiB0aGUgY2xpZW50IGdhaW5zIG9yIGxvc2VzIGl0cyBwcmltYXJ5IGxlYXNlLlxyXG4gICAgICovXHJcbiAgICBSZW1vdGVTdG9yZS5wcm90b3R5cGUuYXBwbHlQcmltYXJ5U3RhdGUgPSBmdW5jdGlvbiAoaXNQcmltYXJ5KSB7XHJcbiAgICAgICAgcmV0dXJuIHRzbGliLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHNsaWIuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmlzUHJpbWFyeSA9IGlzUHJpbWFyeTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEoaXNQcmltYXJ5ICYmIHRoaXMubmV0d29ya0VuYWJsZWQpKSByZXR1cm4gWzMgLypicmVhayovLCAyXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5lbmFibGVOZXR3b3JrKCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCA0XTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghIWlzUHJpbWFyeSkgcmV0dXJuIFszIC8qYnJlYWsqLywgNF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuZGlzYWJsZU5ldHdvcmtJbnRlcm5hbCgpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vbmxpbmVTdGF0ZVRyYWNrZXIuc2V0KE9ubGluZVN0YXRlLlVua25vd24pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDQ7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OiByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBSZW1vdGVTdG9yZTtcclxufSgpKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBJbW11dGFibGUgY2xhc3MgcmVwcmVzZW50aW5nIGEgZ2VvIHBvaW50IGFzIGxhdGl0dWRlLWxvbmdpdHVkZSBwYWlyLlxyXG4gKiBUaGlzIGNsYXNzIGlzIGRpcmVjdGx5IGV4cG9zZWQgaW4gdGhlIHB1YmxpYyBBUEksIGluY2x1ZGluZyBpdHMgY29uc3RydWN0b3IuXHJcbiAqL1xyXG52YXIgR2VvUG9pbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBHZW9Qb2ludChsYXRpdHVkZSwgbG9uZ2l0dWRlKSB7XHJcbiAgICAgICAgdmFsaWRhdGVFeGFjdE51bWJlck9mQXJncygnR2VvUG9pbnQnLCBhcmd1bWVudHMsIDIpO1xyXG4gICAgICAgIHZhbGlkYXRlQXJnVHlwZSgnR2VvUG9pbnQnLCAnbnVtYmVyJywgMSwgbGF0aXR1ZGUpO1xyXG4gICAgICAgIHZhbGlkYXRlQXJnVHlwZSgnR2VvUG9pbnQnLCAnbnVtYmVyJywgMiwgbG9uZ2l0dWRlKTtcclxuICAgICAgICBpZiAoIWlzRmluaXRlKGxhdGl0dWRlKSB8fCBsYXRpdHVkZSA8IC05MCB8fCBsYXRpdHVkZSA+IDkwKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLklOVkFMSURfQVJHVU1FTlQsICdMYXRpdHVkZSBtdXN0IGJlIGEgbnVtYmVyIGJldHdlZW4gLTkwIGFuZCA5MCwgYnV0IHdhczogJyArIGxhdGl0dWRlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCFpc0Zpbml0ZShsb25naXR1ZGUpIHx8IGxvbmdpdHVkZSA8IC0xODAgfHwgbG9uZ2l0dWRlID4gMTgwKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLklOVkFMSURfQVJHVU1FTlQsICdMb25naXR1ZGUgbXVzdCBiZSBhIG51bWJlciBiZXR3ZWVuIC0xODAgYW5kIDE4MCwgYnV0IHdhczogJyArIGxvbmdpdHVkZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX2xhdCA9IGxhdGl0dWRlO1xyXG4gICAgICAgIHRoaXMuX2xvbmcgPSBsb25naXR1ZGU7XHJcbiAgICB9XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoR2VvUG9pbnQucHJvdG90eXBlLCBcImxhdGl0dWRlXCIsIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBSZXR1cm5zIHRoZSBsYXRpdHVkZSBvZiB0aGlzIGdlbyBwb2ludCwgYSBudW1iZXIgYmV0d2VlbiAtOTAgYW5kIDkwLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fbGF0O1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEdlb1BvaW50LnByb3RvdHlwZSwgXCJsb25naXR1ZGVcIiwge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFJldHVybnMgdGhlIGxvbmdpdHVkZSBvZiB0aGlzIGdlbyBwb2ludCwgYSBudW1iZXIgYmV0d2VlbiAtMTgwIGFuZCAxODAuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9sb25nO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgR2VvUG9pbnQucHJvdG90eXBlLmlzRXF1YWwgPSBmdW5jdGlvbiAob3RoZXIpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fbGF0ID09PSBvdGhlci5fbGF0ICYmIHRoaXMuX2xvbmcgPT09IG90aGVyLl9sb25nO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQWN0dWFsbHkgcHJpdmF0ZSB0byBKUyBjb25zdW1lcnMgb2Ygb3VyIEFQSSwgc28gdGhpcyBmdW5jdGlvbiBpcyBwcmVmaXhlZFxyXG4gICAgICogd2l0aCBhbiB1bmRlcnNjb3JlLlxyXG4gICAgICovXHJcbiAgICBHZW9Qb2ludC5wcm90b3R5cGUuX2NvbXBhcmVUbyA9IGZ1bmN0aW9uIChvdGhlcikge1xyXG4gICAgICAgIHJldHVybiAocHJpbWl0aXZlQ29tcGFyYXRvcih0aGlzLl9sYXQsIG90aGVyLl9sYXQpIHx8XHJcbiAgICAgICAgICAgIHByaW1pdGl2ZUNvbXBhcmF0b3IodGhpcy5fbG9uZywgb3RoZXIuX2xvbmcpKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gR2VvUG9pbnQ7XHJcbn0oKSk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKiogVHJhbnNmb3JtcyBhIHZhbHVlIGludG8gYSBzZXJ2ZXItZ2VuZXJhdGVkIHRpbWVzdGFtcC4gKi9cclxudmFyIFNlcnZlclRpbWVzdGFtcFRyYW5zZm9ybSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFNlcnZlclRpbWVzdGFtcFRyYW5zZm9ybSgpIHtcclxuICAgIH1cclxuICAgIFNlcnZlclRpbWVzdGFtcFRyYW5zZm9ybS5wcm90b3R5cGUuYXBwbHlUb0xvY2FsVmlldyA9IGZ1bmN0aW9uIChwcmV2aW91c1ZhbHVlLCBsb2NhbFdyaXRlVGltZSkge1xyXG4gICAgICAgIHJldHVybiBuZXcgU2VydmVyVGltZXN0YW1wVmFsdWUobG9jYWxXcml0ZVRpbWUsIHByZXZpb3VzVmFsdWUpO1xyXG4gICAgfTtcclxuICAgIFNlcnZlclRpbWVzdGFtcFRyYW5zZm9ybS5wcm90b3R5cGUuYXBwbHlUb1JlbW90ZURvY3VtZW50ID0gZnVuY3Rpb24gKHByZXZpb3VzVmFsdWUsIHRyYW5zZm9ybVJlc3VsdCkge1xyXG4gICAgICAgIHJldHVybiB0cmFuc2Zvcm1SZXN1bHQ7XHJcbiAgICB9O1xyXG4gICAgU2VydmVyVGltZXN0YW1wVHJhbnNmb3JtLnByb3RvdHlwZS5jb21wdXRlQmFzZVZhbHVlID0gZnVuY3Rpb24gKHByZXZpb3VzVmFsdWUpIHtcclxuICAgICAgICByZXR1cm4gbnVsbDsgLy8gU2VydmVyIHRpbWVzdGFtcHMgYXJlIGlkZW1wb3RlbnQgYW5kIGRvbid0IHJlcXVpcmUgYSBiYXNlIHZhbHVlLlxyXG4gICAgfTtcclxuICAgIFNlcnZlclRpbWVzdGFtcFRyYW5zZm9ybS5wcm90b3R5cGUuaXNFcXVhbCA9IGZ1bmN0aW9uIChvdGhlcikge1xyXG4gICAgICAgIHJldHVybiBvdGhlciBpbnN0YW5jZW9mIFNlcnZlclRpbWVzdGFtcFRyYW5zZm9ybTtcclxuICAgIH07XHJcbiAgICBTZXJ2ZXJUaW1lc3RhbXBUcmFuc2Zvcm0uaW5zdGFuY2UgPSBuZXcgU2VydmVyVGltZXN0YW1wVHJhbnNmb3JtKCk7XHJcbiAgICByZXR1cm4gU2VydmVyVGltZXN0YW1wVHJhbnNmb3JtO1xyXG59KCkpO1xyXG4vKiogVHJhbnNmb3JtcyBhbiBhcnJheSB2YWx1ZSB2aWEgYSB1bmlvbiBvcGVyYXRpb24uICovXHJcbnZhciBBcnJheVVuaW9uVHJhbnNmb3JtT3BlcmF0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gQXJyYXlVbmlvblRyYW5zZm9ybU9wZXJhdGlvbihlbGVtZW50cykge1xyXG4gICAgICAgIHRoaXMuZWxlbWVudHMgPSBlbGVtZW50cztcclxuICAgIH1cclxuICAgIEFycmF5VW5pb25UcmFuc2Zvcm1PcGVyYXRpb24ucHJvdG90eXBlLmFwcGx5VG9Mb2NhbFZpZXcgPSBmdW5jdGlvbiAocHJldmlvdXNWYWx1ZSwgbG9jYWxXcml0ZVRpbWUpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5hcHBseShwcmV2aW91c1ZhbHVlKTtcclxuICAgIH07XHJcbiAgICBBcnJheVVuaW9uVHJhbnNmb3JtT3BlcmF0aW9uLnByb3RvdHlwZS5hcHBseVRvUmVtb3RlRG9jdW1lbnQgPSBmdW5jdGlvbiAocHJldmlvdXNWYWx1ZSwgdHJhbnNmb3JtUmVzdWx0KSB7XHJcbiAgICAgICAgLy8gVGhlIHNlcnZlciBqdXN0IHNlbmRzIG51bGwgYXMgdGhlIHRyYW5zZm9ybSByZXN1bHQgZm9yIGFycmF5IG9wZXJhdGlvbnMsXHJcbiAgICAgICAgLy8gc28gd2UgaGF2ZSB0byBjYWxjdWxhdGUgYSByZXN1bHQgdGhlIHNhbWUgYXMgd2UgZG8gZm9yIGxvY2FsXHJcbiAgICAgICAgLy8gYXBwbGljYXRpb25zLlxyXG4gICAgICAgIHJldHVybiB0aGlzLmFwcGx5KHByZXZpb3VzVmFsdWUpO1xyXG4gICAgfTtcclxuICAgIEFycmF5VW5pb25UcmFuc2Zvcm1PcGVyYXRpb24ucHJvdG90eXBlLmFwcGx5ID0gZnVuY3Rpb24gKHByZXZpb3VzVmFsdWUpIHtcclxuICAgICAgICB2YXIgcmVzdWx0ID0gY29lcmNlZEZpZWxkVmFsdWVzQXJyYXkocHJldmlvdXNWYWx1ZSk7XHJcbiAgICAgICAgdmFyIF9sb29wXzEgPSBmdW5jdGlvbiAodG9Vbmlvbikge1xyXG4gICAgICAgICAgICBpZiAoIXJlc3VsdC5maW5kKGZ1bmN0aW9uIChlbGVtZW50KSB7IHJldHVybiBlbGVtZW50LmlzRXF1YWwodG9Vbmlvbik7IH0pKSB7XHJcbiAgICAgICAgICAgICAgICByZXN1bHQucHVzaCh0b1VuaW9uKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHRoaXMuZWxlbWVudHM7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciB0b1VuaW9uID0gX2FbX2ldO1xyXG4gICAgICAgICAgICBfbG9vcF8xKHRvVW5pb24pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbmV3IEFycmF5VmFsdWUocmVzdWx0KTtcclxuICAgIH07XHJcbiAgICBBcnJheVVuaW9uVHJhbnNmb3JtT3BlcmF0aW9uLnByb3RvdHlwZS5jb21wdXRlQmFzZVZhbHVlID0gZnVuY3Rpb24gKHByZXZpb3VzVmFsdWUpIHtcclxuICAgICAgICByZXR1cm4gbnVsbDsgLy8gQXJyYXkgdHJhbnNmb3JtcyBhcmUgaWRlbXBvdGVudCBhbmQgZG9uJ3QgcmVxdWlyZSBhIGJhc2UgdmFsdWUuXHJcbiAgICB9O1xyXG4gICAgQXJyYXlVbmlvblRyYW5zZm9ybU9wZXJhdGlvbi5wcm90b3R5cGUuaXNFcXVhbCA9IGZ1bmN0aW9uIChvdGhlcikge1xyXG4gICAgICAgIHJldHVybiAob3RoZXIgaW5zdGFuY2VvZiBBcnJheVVuaW9uVHJhbnNmb3JtT3BlcmF0aW9uICYmXHJcbiAgICAgICAgICAgIGFycmF5RXF1YWxzKG90aGVyLmVsZW1lbnRzLCB0aGlzLmVsZW1lbnRzKSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEFycmF5VW5pb25UcmFuc2Zvcm1PcGVyYXRpb247XHJcbn0oKSk7XHJcbi8qKiBUcmFuc2Zvcm1zIGFuIGFycmF5IHZhbHVlIHZpYSBhIHJlbW92ZSBvcGVyYXRpb24uICovXHJcbnZhciBBcnJheVJlbW92ZVRyYW5zZm9ybU9wZXJhdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEFycmF5UmVtb3ZlVHJhbnNmb3JtT3BlcmF0aW9uKGVsZW1lbnRzKSB7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50cyA9IGVsZW1lbnRzO1xyXG4gICAgfVxyXG4gICAgQXJyYXlSZW1vdmVUcmFuc2Zvcm1PcGVyYXRpb24ucHJvdG90eXBlLmFwcGx5VG9Mb2NhbFZpZXcgPSBmdW5jdGlvbiAocHJldmlvdXNWYWx1ZSwgbG9jYWxXcml0ZVRpbWUpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5hcHBseShwcmV2aW91c1ZhbHVlKTtcclxuICAgIH07XHJcbiAgICBBcnJheVJlbW92ZVRyYW5zZm9ybU9wZXJhdGlvbi5wcm90b3R5cGUuYXBwbHlUb1JlbW90ZURvY3VtZW50ID0gZnVuY3Rpb24gKHByZXZpb3VzVmFsdWUsIHRyYW5zZm9ybVJlc3VsdCkge1xyXG4gICAgICAgIC8vIFRoZSBzZXJ2ZXIganVzdCBzZW5kcyBudWxsIGFzIHRoZSB0cmFuc2Zvcm0gcmVzdWx0IGZvciBhcnJheSBvcGVyYXRpb25zLFxyXG4gICAgICAgIC8vIHNvIHdlIGhhdmUgdG8gY2FsY3VsYXRlIGEgcmVzdWx0IHRoZSBzYW1lIGFzIHdlIGRvIGZvciBsb2NhbFxyXG4gICAgICAgIC8vIGFwcGxpY2F0aW9ucy5cclxuICAgICAgICByZXR1cm4gdGhpcy5hcHBseShwcmV2aW91c1ZhbHVlKTtcclxuICAgIH07XHJcbiAgICBBcnJheVJlbW92ZVRyYW5zZm9ybU9wZXJhdGlvbi5wcm90b3R5cGUuYXBwbHkgPSBmdW5jdGlvbiAocHJldmlvdXNWYWx1ZSkge1xyXG4gICAgICAgIHZhciByZXN1bHQgPSBjb2VyY2VkRmllbGRWYWx1ZXNBcnJheShwcmV2aW91c1ZhbHVlKTtcclxuICAgICAgICB2YXIgX2xvb3BfMiA9IGZ1bmN0aW9uICh0b1JlbW92ZSkge1xyXG4gICAgICAgICAgICByZXN1bHQgPSByZXN1bHQuZmlsdGVyKGZ1bmN0aW9uIChlbGVtZW50KSB7IHJldHVybiAhZWxlbWVudC5pc0VxdWFsKHRvUmVtb3ZlKTsgfSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gdGhpcy5lbGVtZW50czsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgdmFyIHRvUmVtb3ZlID0gX2FbX2ldO1xyXG4gICAgICAgICAgICBfbG9vcF8yKHRvUmVtb3ZlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG5ldyBBcnJheVZhbHVlKHJlc3VsdCk7XHJcbiAgICB9O1xyXG4gICAgQXJyYXlSZW1vdmVUcmFuc2Zvcm1PcGVyYXRpb24ucHJvdG90eXBlLmNvbXB1dGVCYXNlVmFsdWUgPSBmdW5jdGlvbiAocHJldmlvdXNWYWx1ZSkge1xyXG4gICAgICAgIHJldHVybiBudWxsOyAvLyBBcnJheSB0cmFuc2Zvcm1zIGFyZSBpZGVtcG90ZW50IGFuZCBkb24ndCByZXF1aXJlIGEgYmFzZSB2YWx1ZS5cclxuICAgIH07XHJcbiAgICBBcnJheVJlbW92ZVRyYW5zZm9ybU9wZXJhdGlvbi5wcm90b3R5cGUuaXNFcXVhbCA9IGZ1bmN0aW9uIChvdGhlcikge1xyXG4gICAgICAgIHJldHVybiAob3RoZXIgaW5zdGFuY2VvZiBBcnJheVJlbW92ZVRyYW5zZm9ybU9wZXJhdGlvbiAmJlxyXG4gICAgICAgICAgICBhcnJheUVxdWFscyhvdGhlci5lbGVtZW50cywgdGhpcy5lbGVtZW50cykpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBBcnJheVJlbW92ZVRyYW5zZm9ybU9wZXJhdGlvbjtcclxufSgpKTtcclxuLyoqXHJcbiAqIEltcGxlbWVudHMgdGhlIGJhY2tlbmQgc2VtYW50aWNzIGZvciBsb2NhbGx5IGNvbXB1dGVkIE5VTUVSSUNfQUREIChpbmNyZW1lbnQpXHJcbiAqIHRyYW5zZm9ybXMuIENvbnZlcnRzIGFsbCBmaWVsZCB2YWx1ZXMgdG8gaW50ZWdlcnMgb3IgZG91YmxlcywgYnV0IHVubGlrZSB0aGVcclxuICogYmFja2VuZCBkb2VzIG5vdCBjYXAgaW50ZWdlciB2YWx1ZXMgYXQgMl42My4gSW5zdGVhZCwgSmF2YVNjcmlwdCBudW1iZXJcclxuICogYXJpdGhtZXRpYyBpcyB1c2VkIGFuZCBwcmVjaXNpb24gbG9zcyBjYW4gb2NjdXIgZm9yIHZhbHVlcyBncmVhdGVyIHRoYW4gMl41My5cclxuICovXHJcbnZhciBOdW1lcmljSW5jcmVtZW50VHJhbnNmb3JtT3BlcmF0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gTnVtZXJpY0luY3JlbWVudFRyYW5zZm9ybU9wZXJhdGlvbihvcGVyYW5kKSB7XHJcbiAgICAgICAgdGhpcy5vcGVyYW5kID0gb3BlcmFuZDtcclxuICAgIH1cclxuICAgIE51bWVyaWNJbmNyZW1lbnRUcmFuc2Zvcm1PcGVyYXRpb24ucHJvdG90eXBlLmFwcGx5VG9Mb2NhbFZpZXcgPSBmdW5jdGlvbiAocHJldmlvdXNWYWx1ZSwgbG9jYWxXcml0ZVRpbWUpIHtcclxuICAgICAgICB2YXIgYmFzZVZhbHVlID0gdGhpcy5jb21wdXRlQmFzZVZhbHVlKHByZXZpb3VzVmFsdWUpO1xyXG4gICAgICAgIC8vIFBPUlRJTkcgTk9URTogU2luY2UgSmF2YVNjcmlwdCdzIGludGVnZXIgYXJpdGhtZXRpYyBpcyBsaW1pdGVkIHRvIDUzIGJpdFxyXG4gICAgICAgIC8vIHByZWNpc2lvbiBhbmQgcmVzb2x2ZXMgb3ZlcmZsb3dzIGJ5IHJlZHVjaW5nIHByZWNpc2lvbiwgd2UgZG8gbm90XHJcbiAgICAgICAgLy8gbWFudWFsbHkgY2FwIG92ZXJmbG93cyBhdCAyXjYzLlxyXG4gICAgICAgIC8vIFJldHVybiBhbiBpbnRlZ2VyIHZhbHVlIGlmZiB0aGUgcHJldmlvdXMgdmFsdWUgYW5kIHRoZSBvcGVyYW5kIGlzIGFuXHJcbiAgICAgICAgLy8gaW50ZWdlci5cclxuICAgICAgICBpZiAoYmFzZVZhbHVlIGluc3RhbmNlb2YgSW50ZWdlclZhbHVlICYmXHJcbiAgICAgICAgICAgIHRoaXMub3BlcmFuZCBpbnN0YW5jZW9mIEludGVnZXJWYWx1ZSkge1xyXG4gICAgICAgICAgICB2YXIgc3VtID0gYmFzZVZhbHVlLmludGVybmFsVmFsdWUgKyB0aGlzLm9wZXJhbmQuaW50ZXJuYWxWYWx1ZTtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBJbnRlZ2VyVmFsdWUoc3VtKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHZhciBzdW0gPSBiYXNlVmFsdWUuaW50ZXJuYWxWYWx1ZSArIHRoaXMub3BlcmFuZC5pbnRlcm5hbFZhbHVlO1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IERvdWJsZVZhbHVlKHN1bSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIE51bWVyaWNJbmNyZW1lbnRUcmFuc2Zvcm1PcGVyYXRpb24ucHJvdG90eXBlLmFwcGx5VG9SZW1vdGVEb2N1bWVudCA9IGZ1bmN0aW9uIChwcmV2aW91c1ZhbHVlLCB0cmFuc2Zvcm1SZXN1bHQpIHtcclxuICAgICAgICBhc3NlcnQodHJhbnNmb3JtUmVzdWx0ICE9PSBudWxsLCBcIkRpZG4ndCByZWNlaXZlIHRyYW5zZm9ybVJlc3VsdCBmb3IgTlVNRVJJQ19BREQgdHJhbnNmb3JtXCIpO1xyXG4gICAgICAgIHJldHVybiB0cmFuc2Zvcm1SZXN1bHQ7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBJbnNwZWN0cyB0aGUgcHJvdmlkZWQgdmFsdWUsIHJldHVybmluZyB0aGUgcHJvdmlkZWQgdmFsdWUgaWYgaXQgaXMgYWxyZWFkeVxyXG4gICAgICogYSBOdW1iZXJWYWx1ZSwgb3RoZXJ3aXNlIHJldHVybmluZyBhIGNvZXJjZWQgSW50ZWdlclZhbHVlIG9mIDAuXHJcbiAgICAgKi9cclxuICAgIE51bWVyaWNJbmNyZW1lbnRUcmFuc2Zvcm1PcGVyYXRpb24ucHJvdG90eXBlLmNvbXB1dGVCYXNlVmFsdWUgPSBmdW5jdGlvbiAocHJldmlvdXNWYWx1ZSkge1xyXG4gICAgICAgIHJldHVybiBwcmV2aW91c1ZhbHVlIGluc3RhbmNlb2YgTnVtYmVyVmFsdWVcclxuICAgICAgICAgICAgPyBwcmV2aW91c1ZhbHVlXHJcbiAgICAgICAgICAgIDogbmV3IEludGVnZXJWYWx1ZSgwKTtcclxuICAgIH07XHJcbiAgICBOdW1lcmljSW5jcmVtZW50VHJhbnNmb3JtT3BlcmF0aW9uLnByb3RvdHlwZS5pc0VxdWFsID0gZnVuY3Rpb24gKG90aGVyKSB7XHJcbiAgICAgICAgcmV0dXJuIChvdGhlciBpbnN0YW5jZW9mIE51bWVyaWNJbmNyZW1lbnRUcmFuc2Zvcm1PcGVyYXRpb24gJiZcclxuICAgICAgICAgICAgdGhpcy5vcGVyYW5kLmlzRXF1YWwob3RoZXIub3BlcmFuZCkpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBOdW1lcmljSW5jcmVtZW50VHJhbnNmb3JtT3BlcmF0aW9uO1xyXG59KCkpO1xyXG5mdW5jdGlvbiBjb2VyY2VkRmllbGRWYWx1ZXNBcnJheSh2YWx1ZSkge1xyXG4gICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgQXJyYXlWYWx1ZSkge1xyXG4gICAgICAgIHJldHVybiB2YWx1ZS5pbnRlcm5hbFZhbHVlLnNsaWNlKCk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICAvLyBjb2VyY2UgdG8gZW1wdHkgYXJyYXkuXHJcbiAgICAgICAgcmV0dXJuIFtdO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG52YXIgRXhpc3RlbmNlRmlsdGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgLy8gVE9ETyhiLzMzMDc4MTYzKToganVzdCB1c2Ugc2ltcGxlc3QgZm9ybSBvZiBleGlzdGVuY2UgZmlsdGVyIGZvciBub3dcclxuICAgIGZ1bmN0aW9uIEV4aXN0ZW5jZUZpbHRlcihjb3VudCkge1xyXG4gICAgICAgIHRoaXMuY291bnQgPSBjb3VudDtcclxuICAgIH1cclxuICAgIEV4aXN0ZW5jZUZpbHRlci5wcm90b3R5cGUuaXNFcXVhbCA9IGZ1bmN0aW9uIChvdGhlcikge1xyXG4gICAgICAgIHJldHVybiBvdGhlciAmJiBvdGhlci5jb3VudCA9PT0gdGhpcy5jb3VudDtcclxuICAgIH07XHJcbiAgICByZXR1cm4gRXhpc3RlbmNlRmlsdGVyO1xyXG59KCkpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxudmFyIERJUkVDVElPTlMgPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGRpcnMgPSB7fTtcclxuICAgIGRpcnNbRGlyZWN0aW9uLkFTQ0VORElORy5uYW1lXSA9ICdBU0NFTkRJTkcnO1xyXG4gICAgZGlyc1tEaXJlY3Rpb24uREVTQ0VORElORy5uYW1lXSA9ICdERVNDRU5ESU5HJztcclxuICAgIHJldHVybiBkaXJzO1xyXG59KSgpO1xyXG52YXIgT1BFUkFUT1JTID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBvcHMgPSB7fTtcclxuICAgIG9wc1tPcGVyYXRvci5MRVNTX1RIQU4ubmFtZV0gPSAnTEVTU19USEFOJztcclxuICAgIG9wc1tPcGVyYXRvci5MRVNTX1RIQU5fT1JfRVFVQUwubmFtZV0gPSAnTEVTU19USEFOX09SX0VRVUFMJztcclxuICAgIG9wc1tPcGVyYXRvci5HUkVBVEVSX1RIQU4ubmFtZV0gPSAnR1JFQVRFUl9USEFOJztcclxuICAgIG9wc1tPcGVyYXRvci5HUkVBVEVSX1RIQU5fT1JfRVFVQUwubmFtZV0gPSAnR1JFQVRFUl9USEFOX09SX0VRVUFMJztcclxuICAgIG9wc1tPcGVyYXRvci5FUVVBTC5uYW1lXSA9ICdFUVVBTCc7XHJcbiAgICBvcHNbT3BlcmF0b3IuQVJSQVlfQ09OVEFJTlMubmFtZV0gPSAnQVJSQVlfQ09OVEFJTlMnO1xyXG4gICAgb3BzW09wZXJhdG9yLklOLm5hbWVdID0gJ0lOJztcclxuICAgIG9wc1tPcGVyYXRvci5BUlJBWV9DT05UQUlOU19BTlkubmFtZV0gPSAnQVJSQVlfQ09OVEFJTlNfQU5ZJztcclxuICAgIHJldHVybiBvcHM7XHJcbn0pKCk7XHJcbi8vIEEgUmVnRXhwIG1hdGNoaW5nIElTTyA4NjAxIFVUQyB0aW1lc3RhbXBzIHdpdGggb3B0aW9uYWwgZnJhY3Rpb24uXHJcbnZhciBJU09fUkVHX0VYUCA9IG5ldyBSZWdFeHAoL15cXGR7NH0tXFxkXFxkLVxcZFxcZFRcXGRcXGQ6XFxkXFxkOlxcZFxcZCg/OlxcLihcXGQrKSk/WiQvKTtcclxuZnVuY3Rpb24gYXNzZXJ0UHJlc2VudCh2YWx1ZSwgZGVzY3JpcHRpb24pIHtcclxuICAgIGFzc2VydCghaXNOdWxsT3JVbmRlZmluZWQodmFsdWUpLCBkZXNjcmlwdGlvbiArICcgaXMgbWlzc2luZycpO1xyXG59XHJcbmZ1bmN0aW9uIHBhcnNlSW50NjQodmFsdWUpIHtcclxuICAgIC8vIFRPRE8oYmpvcm5pY2spOiBIYW5kbGUgaW50NjQgZ3JlYXRlciB0aGFuIDUzIGJpdHMuXHJcbiAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJykge1xyXG4gICAgICAgIHJldHVybiB2YWx1ZTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICByZXR1cm4gTnVtYmVyKHZhbHVlKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBmYWlsKFwiY2FuJ3QgcGFyc2UgXCIgKyB2YWx1ZSk7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIEdlbmVyYXRlcyBKc29uT2JqZWN0IHZhbHVlcyBmb3IgdGhlIERhdGFzdG9yZSBBUEkgc3VpdGFibGUgZm9yIHNlbmRpbmcgdG9cclxuICogZWl0aGVyIEdSUEMgc3R1YiBtZXRob2RzIG9yIHZpYSB0aGUgSlNPTi9IVFRQIFJFU1QgQVBJLlxyXG4gKiBUT0RPKGtsaW10KTogV2UgY2FuIHJlbW92ZSB0aGUgZGF0YWJhc2VJZCBhcmd1bWVudCBpZiB3ZSBrZWVwIHRoZSBmdWxsXHJcbiAqIHJlc291cmNlIG5hbWUgaW4gZG9jdW1lbnRzLlxyXG4gKi9cclxudmFyIEpzb25Qcm90b1NlcmlhbGl6ZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBKc29uUHJvdG9TZXJpYWxpemVyKGRhdGFiYXNlSWQsIG9wdGlvbnMpIHtcclxuICAgICAgICB0aGlzLmRhdGFiYXNlSWQgPSBkYXRhYmFzZUlkO1xyXG4gICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XHJcbiAgICB9XHJcbiAgICBKc29uUHJvdG9TZXJpYWxpemVyLnByb3RvdHlwZS5lbXB0eUJ5dGVTdHJpbmcgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy51c2VQcm90bzNKc29uKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAnJztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgVWludDhBcnJheSgwKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgSnNvblByb3RvU2VyaWFsaXplci5wcm90b3R5cGUudW5zYWZlQ2FzdFByb3RvQnl0ZVN0cmluZyA9IGZ1bmN0aW9uIChieXRlU3RyaW5nKSB7XHJcbiAgICAgICAgLy8gYnl0ZVN0cmluZ3MgY2FuIGJlIGVpdGhlciBzdHJpbmcgb3IgVUludDhBcnJheSwgYnV0IHRoZSB0eXBpbmdzIHNheVxyXG4gICAgICAgIC8vIGl0J3MgYWx3YXlzIGEgc3RyaW5nLiBDYXN0IGFzIHN0cmluZyB0byBhdm9pZCB0eXBlIGNoZWNrIGZhaWxpbmdcclxuICAgICAgICByZXR1cm4gYnl0ZVN0cmluZztcclxuICAgIH07XHJcbiAgICBKc29uUHJvdG9TZXJpYWxpemVyLnByb3RvdHlwZS5mcm9tUnBjU3RhdHVzID0gZnVuY3Rpb24gKHN0YXR1cykge1xyXG4gICAgICAgIHZhciBjb2RlID0gc3RhdHVzLmNvZGUgPT09IHVuZGVmaW5lZFxyXG4gICAgICAgICAgICA/IENvZGUuVU5LTk9XTlxyXG4gICAgICAgICAgICA6IG1hcENvZGVGcm9tUnBjQ29kZShzdGF0dXMuY29kZSk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBGaXJlc3RvcmVFcnJvcihjb2RlLCBzdGF0dXMubWVzc2FnZSB8fCAnJyk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIGEgdmFsdWUgZm9yIGEgbnVtYmVyIChvciBudWxsKSB0aGF0J3MgYXBwcm9wcmlhdGUgdG8gcHV0IGludG9cclxuICAgICAqIGEgZ29vZ2xlLnByb3RvYnVmLkludDMyVmFsdWUgcHJvdG8uXHJcbiAgICAgKiBETyBOT1QgVVNFIFRISVMgRk9SIEFOWVRISU5HIEVMU0UuXHJcbiAgICAgKiBUaGlzIG1ldGhvZCBjaGVhdHMuIEl0J3MgdHlwZWQgYXMgcmV0dXJuaW5nIFwibnVtYmVyXCIgYmVjYXVzZSB0aGF0J3Mgd2hhdFxyXG4gICAgICogb3VyIGdlbmVyYXRlZCBwcm90byBpbnRlcmZhY2VzIHNheSBJbnQzMlZhbHVlIG11c3QgYmUuIEJ1dCBHUlBDIGFjdHVhbGx5XHJcbiAgICAgKiBleHBlY3RzIGEgeyB2YWx1ZTogPG51bWJlcj4gfSBzdHJ1Y3QuXHJcbiAgICAgKi9cclxuICAgIEpzb25Qcm90b1NlcmlhbGl6ZXIucHJvdG90eXBlLnRvSW50MzJWYWx1ZSA9IGZ1bmN0aW9uICh2YWwpIHtcclxuICAgICAgICBpZiAodGhpcy5vcHRpb25zLnVzZVByb3RvM0pzb24gfHwgaXNOdWxsT3JVbmRlZmluZWQodmFsKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdmFsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gUHJvdG9idWZKUyByZXF1aXJlcyB0aGF0IHdlIHdyYXAgSW50MzJWYWx1ZXMuXHJcbiAgICAgICAgICAgIC8vIFVzZSBhbnkgYmVjYXVzZSB3ZSBuZWVkIHRvIG1hdGNoIGdlbmVyYXRlZCBQcm90byB0eXBlcy5cclxuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IHZhbCB9O1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgYSBudW1iZXIgKG9yIG51bGwpIGZyb20gYSBnb29nbGUucHJvdG9idWYuSW50MzJWYWx1ZSBwcm90by5cclxuICAgICAqIERPIE5PVCBVU0UgVEhJUyBGT1IgQU5ZVEhJTkcgRUxTRS5cclxuICAgICAqIFRoaXMgbWV0aG9kIGNoZWF0cy4gSXQncyB0eXBlZCBhcyBhY2NlcHRpbmcgXCJudW1iZXJcIiBiZWNhdXNlIHRoYXQncyB3aGF0XHJcbiAgICAgKiBvdXIgZ2VuZXJhdGVkIHByb3RvIGludGVyZmFjZXMgc2F5IEludDMyVmFsdWUgbXVzdCBiZSwgYnV0IGl0IGFjdHVhbGx5XHJcbiAgICAgKiBhY2NlcHRzIHsgdmFsdWU6IG51bWJlciB9IHRvIG1hdGNoIG91ciBzZXJpYWxpemF0aW9uIGluIHRvSW50MzJWYWx1ZSgpLlxyXG4gICAgICovXHJcbiAgICBKc29uUHJvdG9TZXJpYWxpemVyLnByb3RvdHlwZS5mcm9tSW50MzJWYWx1ZSA9IGZ1bmN0aW9uICh2YWwpIHtcclxuICAgICAgICB2YXIgcmVzdWx0O1xyXG4gICAgICAgIGlmICh0eXBlb2YgdmFsID09PSAnb2JqZWN0Jykge1xyXG4gICAgICAgICAgICAvLyBVc2UgYW55IGJlY2F1c2Ugd2UgbmVlZCB0byBtYXRjaCBnZW5lcmF0ZWQgUHJvdG8gdHlwZXMuXHJcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbiAgICAgICAgICAgIHJlc3VsdCA9IHZhbC52YWx1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIFdlIGFjY2VwdCByYXcgbnVtYmVycyAod2l0aG91dCB0aGUge3ZhbHVlOiAuLi4gfSB3cmFwcGVyKSBmb3JcclxuICAgICAgICAgICAgLy8gY29tcGF0aWJpbGl0eSB3aXRoIGxlZ2FjeSBwZXJzaXN0ZWQgZGF0YS5cclxuICAgICAgICAgICAgcmVzdWx0ID0gdmFsO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gaXNOdWxsT3JVbmRlZmluZWQocmVzdWx0KSA/IG51bGwgOiByZXN1bHQ7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIGEgdmFsdWUgZm9yIGEgRGF0ZSB0aGF0J3MgYXBwcm9wcmlhdGUgdG8gcHV0IGludG8gYSBwcm90by5cclxuICAgICAqIERPIE5PVCBVU0UgVEhJUyBGT1IgQU5ZVEhJTkcgRUxTRS5cclxuICAgICAqIFRoaXMgbWV0aG9kIGNoZWF0cy4gSXQncyB0eXBlZCBhcyByZXR1cm5pbmcgXCJzdHJpbmdcIiBiZWNhdXNlIHRoYXQncyB3aGF0XHJcbiAgICAgKiBvdXIgZ2VuZXJhdGVkIHByb3RvIGludGVyZmFjZXMgc2F5IGRhdGVzIG11c3QgYmUuIEJ1dCBpdCdzIGVhc2llciBhbmQgc2FmZXJcclxuICAgICAqIHRvIGFjdHVhbGx5IHJldHVybiBhIFRpbWVzdGFtcCBwcm90by5cclxuICAgICAqL1xyXG4gICAgSnNvblByb3RvU2VyaWFsaXplci5wcm90b3R5cGUudG9UaW1lc3RhbXAgPSBmdW5jdGlvbiAodGltZXN0YW1wKSB7XHJcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy51c2VQcm90bzNKc29uKSB7XHJcbiAgICAgICAgICAgIC8vIFNlcmlhbGl6ZSB0byBJU08tODYwMSBkYXRlIGZvcm1hdCwgYnV0IHdpdGggZnVsbCBuYW5vIHJlc29sdXRpb24uXHJcbiAgICAgICAgICAgIC8vIFNpbmNlIEpTIERhdGUgaGFzIG9ubHkgbWlsbGlzLCBsZXQncyBvbmx5IHVzZSBpdCBmb3IgdGhlIHNlY29uZHMgYW5kXHJcbiAgICAgICAgICAgIC8vIHRoZW4gbWFudWFsbHkgYWRkIHRoZSBmcmFjdGlvbnMgdG8gdGhlIGVuZC5cclxuICAgICAgICAgICAgdmFyIGpzRGF0ZVN0ciA9IG5ldyBEYXRlKHRpbWVzdGFtcC5zZWNvbmRzICogMTAwMCkudG9JU09TdHJpbmcoKTtcclxuICAgICAgICAgICAgLy8gUmVtb3ZlIC54eHggZnJhYyBwYXJ0IGFuZCBaIGluIHRoZSBlbmQuXHJcbiAgICAgICAgICAgIHZhciBzdHJVbnRpbFNlY29uZHMgPSBqc0RhdGVTdHIucmVwbGFjZSgvXFwuXFxkKi8sICcnKS5yZXBsYWNlKCdaJywgJycpO1xyXG4gICAgICAgICAgICAvLyBQYWQgdGhlIGZyYWN0aW9uIG91dCB0byA5IGRpZ2l0cyAobmFub3MpLlxyXG4gICAgICAgICAgICB2YXIgbmFub1N0ciA9ICgnMDAwMDAwMDAwJyArIHRpbWVzdGFtcC5uYW5vc2Vjb25kcykuc2xpY2UoLTkpO1xyXG4gICAgICAgICAgICByZXR1cm4gc3RyVW50aWxTZWNvbmRzICsgXCIuXCIgKyBuYW5vU3RyICsgXCJaXCI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgc2Vjb25kczogJycgKyB0aW1lc3RhbXAuc2Vjb25kcyxcclxuICAgICAgICAgICAgICAgIG5hbm9zOiB0aW1lc3RhbXAubmFub3NlY29uZHNcclxuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIEpzb25Qcm90b1NlcmlhbGl6ZXIucHJvdG90eXBlLmZyb21UaW1lc3RhbXAgPSBmdW5jdGlvbiAoZGF0ZSkge1xyXG4gICAgICAgIC8vIFRoZSBqc29uIGludGVyZmFjZSAoZm9yIHRoZSBicm93c2VyKSB3aWxsIHJldHVybiBhbiBpc28gdGltZXN0YW1wIHN0cmluZyxcclxuICAgICAgICAvLyB3aGlsZSB0aGUgcHJvdG8ganMgbGlicmFyeSAoZm9yIG5vZGUpIHdpbGwgcmV0dXJuIGFcclxuICAgICAgICAvLyBnb29nbGUucHJvdG9idWYuVGltZXN0YW1wIGluc3RhbmNlLlxyXG4gICAgICAgIGlmICh0eXBlb2YgZGF0ZSA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgLy8gVE9ETyhiLzM3MjgyMjM3KTogVXNlIHN0cmluZ3MgZm9yIFByb3RvMyB0aW1lc3RhbXBzXHJcbiAgICAgICAgICAgIC8vIGFzc2VydCh0aGlzLm9wdGlvbnMudXNlUHJvdG8zSnNvbixcclxuICAgICAgICAgICAgLy8gICAnVGhlIHRpbWVzdGFtcCBzdHJpbmcgZm9ybWF0IHJlcXVpcmVzIFByb3RvMy4nKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZnJvbUlzbzg2MDFTdHJpbmcoZGF0ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBhc3NlcnQoISFkYXRlLCAnQ2Fubm90IGRlc2VyaWFsaXplIG51bGwgb3IgdW5kZWZpbmVkIHRpbWVzdGFtcC4nKTtcclxuICAgICAgICAgICAgLy8gVE9ETyhiLzM3MjgyMjM3KTogVXNlIHN0cmluZ3MgZm9yIFByb3RvMyB0aW1lc3RhbXBzXHJcbiAgICAgICAgICAgIC8vIGFzc2VydCghdGhpcy5vcHRpb25zLnVzZVByb3RvM0pzb24sXHJcbiAgICAgICAgICAgIC8vICAgJ1RoZSB0aW1lc3RhbXAgaW5zdGFuY2UgZm9ybWF0IHJlcXVpcmVzIFByb3RvIEpTLicpO1xyXG4gICAgICAgICAgICB2YXIgc2Vjb25kcyA9IHBhcnNlSW50NjQoZGF0ZS5zZWNvbmRzIHx8ICcwJyk7XHJcbiAgICAgICAgICAgIHZhciBuYW5vcyA9IGRhdGUubmFub3MgfHwgMDtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBUaW1lc3RhbXAoc2Vjb25kcywgbmFub3MpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBKc29uUHJvdG9TZXJpYWxpemVyLnByb3RvdHlwZS5mcm9tSXNvODYwMVN0cmluZyA9IGZ1bmN0aW9uICh1dGMpIHtcclxuICAgICAgICAvLyBUaGUgZGF0ZSBzdHJpbmcgY2FuIGhhdmUgaGlnaGVyIHByZWNpc2lvbiAobmFub3MpIHRoYW4gdGhlIERhdGUgY2xhc3NcclxuICAgICAgICAvLyAobWlsbGlzKSwgc28gd2UgZG8gc29tZSBjdXN0b20gcGFyc2luZyBoZXJlLlxyXG4gICAgICAgIC8vIFBhcnNlIHRoZSBuYW5vcyByaWdodCBvdXQgb2YgdGhlIHN0cmluZy5cclxuICAgICAgICB2YXIgbmFub3MgPSAwO1xyXG4gICAgICAgIHZhciBmcmFjdGlvbiA9IElTT19SRUdfRVhQLmV4ZWModXRjKTtcclxuICAgICAgICBhc3NlcnQoISFmcmFjdGlvbiwgJ2ludmFsaWQgdGltZXN0YW1wOiAnICsgdXRjKTtcclxuICAgICAgICBpZiAoZnJhY3Rpb25bMV0pIHtcclxuICAgICAgICAgICAgLy8gUGFkIHRoZSBmcmFjdGlvbiBvdXQgdG8gOSBkaWdpdHMgKG5hbm9zKS5cclxuICAgICAgICAgICAgdmFyIG5hbm9TdHIgPSBmcmFjdGlvblsxXTtcclxuICAgICAgICAgICAgbmFub1N0ciA9IChuYW5vU3RyICsgJzAwMDAwMDAwMCcpLnN1YnN0cigwLCA5KTtcclxuICAgICAgICAgICAgbmFub3MgPSBOdW1iZXIobmFub1N0cik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFBhcnNlIHRoZSBkYXRlIHRvIGdldCB0aGUgc2Vjb25kcy5cclxuICAgICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKHV0Yyk7XHJcbiAgICAgICAgdmFyIHNlY29uZHMgPSBNYXRoLmZsb29yKGRhdGUuZ2V0VGltZSgpIC8gMTAwMCk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBUaW1lc3RhbXAoc2Vjb25kcywgbmFub3MpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyBhIHZhbHVlIGZvciBieXRlcyB0aGF0J3MgYXBwcm9wcmlhdGUgdG8gcHV0IGluIGEgcHJvdG8uXHJcbiAgICAgKiBETyBOT1QgVVNFIFRISVMgRk9SIEFOWVRISU5HIEVMU0UuXHJcbiAgICAgKiBUaGlzIG1ldGhvZCBjaGVhdHMuIEl0J3MgdHlwZWQgYXMgcmV0dXJuaW5nIFwic3RyaW5nXCIgYmVjYXVzZSB0aGF0J3Mgd2hhdFxyXG4gICAgICogb3VyIGdlbmVyYXRlZCBwcm90byBpbnRlcmZhY2VzIHNheSBieXRlcyBtdXN0IGJlLiBCdXQgaXQgc2hvdWxkIHJldHVyblxyXG4gICAgICogYW4gVWludDhBcnJheSBpbiBOb2RlLlxyXG4gICAgICovXHJcbiAgICBKc29uUHJvdG9TZXJpYWxpemVyLnByb3RvdHlwZS50b0J5dGVzID0gZnVuY3Rpb24gKGJ5dGVzKSB7XHJcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy51c2VQcm90bzNKc29uKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBieXRlcy50b0Jhc2U2NCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gVGhlIHR5cGluZ3Mgc2F5IGl0J3MgYSBzdHJpbmcsIGJ1dCBpdCBuZWVkcyB0byBiZSBhIFVpbnQ4QXJyYXkgaW4gTm9kZS5cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMudW5zYWZlQ2FzdFByb3RvQnl0ZVN0cmluZyhieXRlcy50b1VpbnQ4QXJyYXkoKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUGFyc2UgdGhlIGJsb2IgZnJvbSB0aGUgcHJvdG9zIGludG8gdGhlIGludGVybmFsIEJsb2IgY2xhc3MuIE5vdGUgdGhhdCB0aGVcclxuICAgICAqIHR5cGluZ3MgYXNzdW1lIGFsbCBibG9icyBhcmUgc3RyaW5ncywgYnV0IHRoZXkgYXJlIGFjdHVhbGx5IFVpbnQ4QXJyYXlzXHJcbiAgICAgKiBvbiBOb2RlLlxyXG4gICAgICovXHJcbiAgICBKc29uUHJvdG9TZXJpYWxpemVyLnByb3RvdHlwZS5mcm9tQmxvYiA9IGZ1bmN0aW9uIChibG9iKSB7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBibG9iID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICBhc3NlcnQodGhpcy5vcHRpb25zLnVzZVByb3RvM0pzb24sICdFeHBlY3RlZCBieXRlcyB0byBiZSBwYXNzZWQgaW4gYXMgVWludDhBcnJheSwgYnV0IGdvdCBhIHN0cmluZyBpbnN0ZWFkLicpO1xyXG4gICAgICAgICAgICByZXR1cm4gQmxvYi5mcm9tQmFzZTY0U3RyaW5nKGJsb2IpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgYXNzZXJ0KCF0aGlzLm9wdGlvbnMudXNlUHJvdG8zSnNvbiwgJ0V4cGVjdGVkIGJ5dGVzIHRvIGJlIHBhc3NlZCBpbiBhcyBVaW50OEFycmF5LCBidXQgZ290IGEgc3RyaW5nIGluc3RlYWQuJyk7XHJcbiAgICAgICAgICAgIHJldHVybiBCbG9iLmZyb21VaW50OEFycmF5KGJsb2IpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBKc29uUHJvdG9TZXJpYWxpemVyLnByb3RvdHlwZS50b1ZlcnNpb24gPSBmdW5jdGlvbiAodmVyc2lvbikge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnRvVGltZXN0YW1wKHZlcnNpb24udG9UaW1lc3RhbXAoKSk7XHJcbiAgICB9O1xyXG4gICAgSnNvblByb3RvU2VyaWFsaXplci5wcm90b3R5cGUuZnJvbVZlcnNpb24gPSBmdW5jdGlvbiAodmVyc2lvbikge1xyXG4gICAgICAgIGFzc2VydCghIXZlcnNpb24sIFwiVHJ5aW5nIHRvIGRlc2VyaWFsaXplIHZlcnNpb24gdGhhdCBpc24ndCBzZXRcIik7XHJcbiAgICAgICAgcmV0dXJuIFNuYXBzaG90VmVyc2lvbi5mcm9tVGltZXN0YW1wKHRoaXMuZnJvbVRpbWVzdGFtcCh2ZXJzaW9uKSk7XHJcbiAgICB9O1xyXG4gICAgSnNvblByb3RvU2VyaWFsaXplci5wcm90b3R5cGUudG9SZXNvdXJjZU5hbWUgPSBmdW5jdGlvbiAoZGF0YWJhc2VJZCwgcGF0aCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmZ1bGx5UXVhbGlmaWVkUHJlZml4UGF0aChkYXRhYmFzZUlkKVxyXG4gICAgICAgICAgICAuY2hpbGQoJ2RvY3VtZW50cycpXHJcbiAgICAgICAgICAgIC5jaGlsZChwYXRoKVxyXG4gICAgICAgICAgICAuY2Fub25pY2FsU3RyaW5nKCk7XHJcbiAgICB9O1xyXG4gICAgSnNvblByb3RvU2VyaWFsaXplci5wcm90b3R5cGUuZnJvbVJlc291cmNlTmFtZSA9IGZ1bmN0aW9uIChuYW1lKSB7XHJcbiAgICAgICAgdmFyIHJlc291cmNlID0gUmVzb3VyY2VQYXRoLmZyb21TdHJpbmcobmFtZSk7XHJcbiAgICAgICAgYXNzZXJ0KHRoaXMuaXNWYWxpZFJlc291cmNlTmFtZShyZXNvdXJjZSksICdUcmllZCB0byBkZXNlcmlhbGl6ZSBpbnZhbGlkIGtleSAnICsgcmVzb3VyY2UudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgcmV0dXJuIHJlc291cmNlO1xyXG4gICAgfTtcclxuICAgIEpzb25Qcm90b1NlcmlhbGl6ZXIucHJvdG90eXBlLnRvTmFtZSA9IGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy50b1Jlc291cmNlTmFtZSh0aGlzLmRhdGFiYXNlSWQsIGtleS5wYXRoKTtcclxuICAgIH07XHJcbiAgICBKc29uUHJvdG9TZXJpYWxpemVyLnByb3RvdHlwZS5mcm9tTmFtZSA9IGZ1bmN0aW9uIChuYW1lKSB7XHJcbiAgICAgICAgdmFyIHJlc291cmNlID0gdGhpcy5mcm9tUmVzb3VyY2VOYW1lKG5hbWUpO1xyXG4gICAgICAgIGFzc2VydChyZXNvdXJjZS5nZXQoMSkgPT09IHRoaXMuZGF0YWJhc2VJZC5wcm9qZWN0SWQsICdUcmllZCB0byBkZXNlcmlhbGl6ZSBrZXkgZnJvbSBkaWZmZXJlbnQgcHJvamVjdDogJyArXHJcbiAgICAgICAgICAgIHJlc291cmNlLmdldCgxKSArXHJcbiAgICAgICAgICAgICcgdnMgJyArXHJcbiAgICAgICAgICAgIHRoaXMuZGF0YWJhc2VJZC5wcm9qZWN0SWQpO1xyXG4gICAgICAgIGFzc2VydCgoIXJlc291cmNlLmdldCgzKSAmJiAhdGhpcy5kYXRhYmFzZUlkLmRhdGFiYXNlKSB8fFxyXG4gICAgICAgICAgICByZXNvdXJjZS5nZXQoMykgPT09IHRoaXMuZGF0YWJhc2VJZC5kYXRhYmFzZSwgJ1RyaWVkIHRvIGRlc2VyaWFsaXplIGtleSBmcm9tIGRpZmZlcmVudCBkYXRhYmFzZTogJyArXHJcbiAgICAgICAgICAgIHJlc291cmNlLmdldCgzKSArXHJcbiAgICAgICAgICAgICcgdnMgJyArXHJcbiAgICAgICAgICAgIHRoaXMuZGF0YWJhc2VJZC5kYXRhYmFzZSk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBEb2N1bWVudEtleSh0aGlzLmV4dHJhY3RMb2NhbFBhdGhGcm9tUmVzb3VyY2VOYW1lKHJlc291cmNlKSk7XHJcbiAgICB9O1xyXG4gICAgSnNvblByb3RvU2VyaWFsaXplci5wcm90b3R5cGUudG9RdWVyeVBhdGggPSBmdW5jdGlvbiAocGF0aCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnRvUmVzb3VyY2VOYW1lKHRoaXMuZGF0YWJhc2VJZCwgcGF0aCk7XHJcbiAgICB9O1xyXG4gICAgSnNvblByb3RvU2VyaWFsaXplci5wcm90b3R5cGUuZnJvbVF1ZXJ5UGF0aCA9IGZ1bmN0aW9uIChuYW1lKSB7XHJcbiAgICAgICAgdmFyIHJlc291cmNlTmFtZSA9IHRoaXMuZnJvbVJlc291cmNlTmFtZShuYW1lKTtcclxuICAgICAgICAvLyBJbiB2MWJldGExIHF1ZXJpZXMgZm9yIGNvbGxlY3Rpb25zIGF0IHRoZSByb290IGRpZCBub3QgaGF2ZSBhIHRyYWlsaW5nXHJcbiAgICAgICAgLy8gXCIvZG9jdW1lbnRzXCIuIEluIHYxIGFsbCByZXNvdXJjZSBwYXRocyBjb250YWluIFwiL2RvY3VtZW50c1wiLiBQcmVzZXJ2ZSB0aGVcclxuICAgICAgICAvLyBhYmlsaXR5IHRvIHJlYWQgdGhlIHYxYmV0YTEgZm9ybSBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIHF1ZXJpZXMgcGVyc2lzdGVkXHJcbiAgICAgICAgLy8gaW4gdGhlIGxvY2FsIHRhcmdldCBjYWNoZS5cclxuICAgICAgICBpZiAocmVzb3VyY2VOYW1lLmxlbmd0aCA9PT0gNCkge1xyXG4gICAgICAgICAgICByZXR1cm4gUmVzb3VyY2VQYXRoLkVNUFRZX1BBVEg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLmV4dHJhY3RMb2NhbFBhdGhGcm9tUmVzb3VyY2VOYW1lKHJlc291cmNlTmFtZSk7XHJcbiAgICB9O1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEpzb25Qcm90b1NlcmlhbGl6ZXIucHJvdG90eXBlLCBcImVuY29kZWREYXRhYmFzZUlkXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHBhdGggPSBuZXcgUmVzb3VyY2VQYXRoKFtcclxuICAgICAgICAgICAgICAgICdwcm9qZWN0cycsXHJcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGFiYXNlSWQucHJvamVjdElkLFxyXG4gICAgICAgICAgICAgICAgJ2RhdGFiYXNlcycsXHJcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGFiYXNlSWQuZGF0YWJhc2VcclxuICAgICAgICAgICAgXSk7XHJcbiAgICAgICAgICAgIHJldHVybiBwYXRoLmNhbm9uaWNhbFN0cmluZygpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgSnNvblByb3RvU2VyaWFsaXplci5wcm90b3R5cGUuZnVsbHlRdWFsaWZpZWRQcmVmaXhQYXRoID0gZnVuY3Rpb24gKGRhdGFiYXNlSWQpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFJlc291cmNlUGF0aChbXHJcbiAgICAgICAgICAgICdwcm9qZWN0cycsXHJcbiAgICAgICAgICAgIGRhdGFiYXNlSWQucHJvamVjdElkLFxyXG4gICAgICAgICAgICAnZGF0YWJhc2VzJyxcclxuICAgICAgICAgICAgZGF0YWJhc2VJZC5kYXRhYmFzZVxyXG4gICAgICAgIF0pO1xyXG4gICAgfTtcclxuICAgIEpzb25Qcm90b1NlcmlhbGl6ZXIucHJvdG90eXBlLmV4dHJhY3RMb2NhbFBhdGhGcm9tUmVzb3VyY2VOYW1lID0gZnVuY3Rpb24gKHJlc291cmNlTmFtZSkge1xyXG4gICAgICAgIGFzc2VydChyZXNvdXJjZU5hbWUubGVuZ3RoID4gNCAmJiByZXNvdXJjZU5hbWUuZ2V0KDQpID09PSAnZG9jdW1lbnRzJywgJ3RyaWVkIHRvIGRlc2VyaWFsaXplIGludmFsaWQga2V5ICcgKyByZXNvdXJjZU5hbWUudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgcmV0dXJuIHJlc291cmNlTmFtZS5wb3BGaXJzdCg1KTtcclxuICAgIH07XHJcbiAgICBKc29uUHJvdG9TZXJpYWxpemVyLnByb3RvdHlwZS5pc1ZhbGlkUmVzb3VyY2VOYW1lID0gZnVuY3Rpb24gKHBhdGgpIHtcclxuICAgICAgICAvLyBSZXNvdXJjZSBuYW1lcyBoYXZlIGF0IGxlYXN0IDQgY29tcG9uZW50cyAocHJvamVjdCBJRCwgZGF0YWJhc2UgSUQpXHJcbiAgICAgICAgcmV0dXJuIChwYXRoLmxlbmd0aCA+PSA0ICYmXHJcbiAgICAgICAgICAgIHBhdGguZ2V0KDApID09PSAncHJvamVjdHMnICYmXHJcbiAgICAgICAgICAgIHBhdGguZ2V0KDIpID09PSAnZGF0YWJhc2VzJyk7XHJcbiAgICB9O1xyXG4gICAgSnNvblByb3RvU2VyaWFsaXplci5wcm90b3R5cGUudG9WYWx1ZSA9IGZ1bmN0aW9uICh2YWwpIHtcclxuICAgICAgICBpZiAodmFsIGluc3RhbmNlb2YgTnVsbFZhbHVlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7IG51bGxWYWx1ZTogJ05VTExfVkFMVUUnIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHZhbCBpbnN0YW5jZW9mIEJvb2xlYW5WYWx1ZSkge1xyXG4gICAgICAgICAgICByZXR1cm4geyBib29sZWFuVmFsdWU6IHZhbC52YWx1ZSgpIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHZhbCBpbnN0YW5jZW9mIEludGVnZXJWYWx1ZSkge1xyXG4gICAgICAgICAgICByZXR1cm4geyBpbnRlZ2VyVmFsdWU6ICcnICsgdmFsLnZhbHVlKCkgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodmFsIGluc3RhbmNlb2YgRG91YmxlVmFsdWUpIHtcclxuICAgICAgICAgICAgdmFyIGRvdWJsZVZhbHVlID0gdmFsLnZhbHVlKCk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMudXNlUHJvdG8zSnNvbikge1xyXG4gICAgICAgICAgICAgICAgLy8gUHJvdG8gMyBsZXQncyB1cyBlbmNvZGUgTmFOIGFuZCBJbmZpbml0eSBhcyBzdHJpbmcgdmFsdWVzIGFzXHJcbiAgICAgICAgICAgICAgICAvLyBleHBlY3RlZCBieSB0aGUgYmFja2VuZC4gVGhpcyBpcyBjdXJyZW50bHkgbm90IGNoZWNrZWQgYnkgb3VyIHVuaXRcclxuICAgICAgICAgICAgICAgIC8vIHRlc3RzIGJlY2F1c2UgdGhleSByZWx5IG9uIHByb3RvYnVmLmpzLlxyXG4gICAgICAgICAgICAgICAgaWYgKGlzTmFOKGRvdWJsZVZhbHVlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7IGRvdWJsZVZhbHVlOiAnTmFOJyB9O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoZG91YmxlVmFsdWUgPT09IEluZmluaXR5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgZG91YmxlVmFsdWU6ICdJbmZpbml0eScgfTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGRvdWJsZVZhbHVlID09PSAtSW5maW5pdHkpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4geyBkb3VibGVWYWx1ZTogJy1JbmZpbml0eScgfTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4geyBkb3VibGVWYWx1ZTogdmFsLnZhbHVlKCkgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodmFsIGluc3RhbmNlb2YgU3RyaW5nVmFsdWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHsgc3RyaW5nVmFsdWU6IHZhbC52YWx1ZSgpIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHZhbCBpbnN0YW5jZW9mIE9iamVjdFZhbHVlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7IG1hcFZhbHVlOiB0aGlzLnRvTWFwVmFsdWUodmFsKSB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh2YWwgaW5zdGFuY2VvZiBBcnJheVZhbHVlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7IGFycmF5VmFsdWU6IHRoaXMudG9BcnJheVZhbHVlKHZhbCkgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodmFsIGluc3RhbmNlb2YgVGltZXN0YW1wVmFsdWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHRpbWVzdGFtcFZhbHVlOiB0aGlzLnRvVGltZXN0YW1wKHZhbC5pbnRlcm5hbFZhbHVlKVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh2YWwgaW5zdGFuY2VvZiBHZW9Qb2ludFZhbHVlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBnZW9Qb2ludFZhbHVlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGF0aXR1ZGU6IHZhbC52YWx1ZSgpLmxhdGl0dWRlLFxyXG4gICAgICAgICAgICAgICAgICAgIGxvbmdpdHVkZTogdmFsLnZhbHVlKCkubG9uZ2l0dWRlXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHZhbCBpbnN0YW5jZW9mIEJsb2JWYWx1ZSkge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgYnl0ZXNWYWx1ZTogdGhpcy50b0J5dGVzKHZhbC52YWx1ZSgpKVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh2YWwgaW5zdGFuY2VvZiBSZWZWYWx1ZSkge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgcmVmZXJlbmNlVmFsdWU6IHRoaXMudG9SZXNvdXJjZU5hbWUodmFsLmRhdGFiYXNlSWQsIHZhbC5rZXkucGF0aClcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWlsKCdVbmtub3duIEZpZWxkVmFsdWUgJyArIEpTT04uc3RyaW5naWZ5KHZhbCkpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBKc29uUHJvdG9TZXJpYWxpemVyLnByb3RvdHlwZS5mcm9tVmFsdWUgPSBmdW5jdGlvbiAob2JqKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBpZiAoJ251bGxWYWx1ZScgaW4gb2JqKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBOdWxsVmFsdWUuSU5TVEFOQ0U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKCdib29sZWFuVmFsdWUnIGluIG9iaikge1xyXG4gICAgICAgICAgICByZXR1cm4gQm9vbGVhblZhbHVlLm9mKG9iai5ib29sZWFuVmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICgnaW50ZWdlclZhbHVlJyBpbiBvYmopIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBJbnRlZ2VyVmFsdWUocGFyc2VJbnQ2NChvYmouaW50ZWdlclZhbHVlKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKCdkb3VibGVWYWx1ZScgaW4gb2JqKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMudXNlUHJvdG8zSnNvbikge1xyXG4gICAgICAgICAgICAgICAgLy8gUHJvdG8gMyB1c2VzIHRoZSBzdHJpbmcgdmFsdWVzICdOYU4nIGFuZCAnSW5maW5pdHknLlxyXG4gICAgICAgICAgICAgICAgaWYgKG9iai5kb3VibGVWYWx1ZSA9PT0gJ05hTicpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gRG91YmxlVmFsdWUuTkFOO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAob2JqLmRvdWJsZVZhbHVlID09PSAnSW5maW5pdHknKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIERvdWJsZVZhbHVlLlBPU0lUSVZFX0lORklOSVRZO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAob2JqLmRvdWJsZVZhbHVlID09PSAnLUluZmluaXR5Jykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBEb3VibGVWYWx1ZS5ORUdBVElWRV9JTkZJTklUWTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IERvdWJsZVZhbHVlKG9iai5kb3VibGVWYWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKCdzdHJpbmdWYWx1ZScgaW4gb2JqKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgU3RyaW5nVmFsdWUob2JqLnN0cmluZ1ZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoJ21hcFZhbHVlJyBpbiBvYmopIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZnJvbUZpZWxkcyhvYmoubWFwVmFsdWUuZmllbGRzIHx8IHt9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoJ2FycmF5VmFsdWUnIGluIG9iaikge1xyXG4gICAgICAgICAgICAvLyBcInZhbHVlc1wiIGlzIG5vdCBwcmVzZW50IGlmIHRoZSBhcnJheSBpcyBlbXB0eVxyXG4gICAgICAgICAgICBhc3NlcnRQcmVzZW50KG9iai5hcnJheVZhbHVlLCAnYXJyYXlWYWx1ZScpO1xyXG4gICAgICAgICAgICB2YXIgdmFsdWVzID0gb2JqLmFycmF5VmFsdWUudmFsdWVzIHx8IFtdO1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEFycmF5VmFsdWUodmFsdWVzLm1hcChmdW5jdGlvbiAodikgeyByZXR1cm4gX3RoaXMuZnJvbVZhbHVlKHYpOyB9KSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKCd0aW1lc3RhbXBWYWx1ZScgaW4gb2JqKSB7XHJcbiAgICAgICAgICAgIGFzc2VydFByZXNlbnQob2JqLnRpbWVzdGFtcFZhbHVlLCAndGltZXN0YW1wVmFsdWUnKTtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBUaW1lc3RhbXBWYWx1ZSh0aGlzLmZyb21UaW1lc3RhbXAob2JqLnRpbWVzdGFtcFZhbHVlKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKCdnZW9Qb2ludFZhbHVlJyBpbiBvYmopIHtcclxuICAgICAgICAgICAgYXNzZXJ0UHJlc2VudChvYmouZ2VvUG9pbnRWYWx1ZSwgJ2dlb1BvaW50VmFsdWUnKTtcclxuICAgICAgICAgICAgdmFyIGxhdGl0dWRlID0gb2JqLmdlb1BvaW50VmFsdWUubGF0aXR1ZGUgfHwgMDtcclxuICAgICAgICAgICAgdmFyIGxvbmdpdHVkZSA9IG9iai5nZW9Qb2ludFZhbHVlLmxvbmdpdHVkZSB8fCAwO1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEdlb1BvaW50VmFsdWUobmV3IEdlb1BvaW50KGxhdGl0dWRlLCBsb25naXR1ZGUpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoJ2J5dGVzVmFsdWUnIGluIG9iaikge1xyXG4gICAgICAgICAgICBhc3NlcnRQcmVzZW50KG9iai5ieXRlc1ZhbHVlLCAnYnl0ZXNWYWx1ZScpO1xyXG4gICAgICAgICAgICB2YXIgYmxvYiA9IHRoaXMuZnJvbUJsb2Iob2JqLmJ5dGVzVmFsdWUpO1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEJsb2JWYWx1ZShibG9iKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoJ3JlZmVyZW5jZVZhbHVlJyBpbiBvYmopIHtcclxuICAgICAgICAgICAgYXNzZXJ0UHJlc2VudChvYmoucmVmZXJlbmNlVmFsdWUsICdyZWZlcmVuY2VWYWx1ZScpO1xyXG4gICAgICAgICAgICB2YXIgcmVzb3VyY2VOYW1lID0gdGhpcy5mcm9tUmVzb3VyY2VOYW1lKG9iai5yZWZlcmVuY2VWYWx1ZSk7XHJcbiAgICAgICAgICAgIHZhciBkYklkID0gbmV3IERhdGFiYXNlSWQocmVzb3VyY2VOYW1lLmdldCgxKSwgcmVzb3VyY2VOYW1lLmdldCgzKSk7XHJcbiAgICAgICAgICAgIHZhciBrZXkgPSBuZXcgRG9jdW1lbnRLZXkodGhpcy5leHRyYWN0TG9jYWxQYXRoRnJvbVJlc291cmNlTmFtZShyZXNvdXJjZU5hbWUpKTtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBSZWZWYWx1ZShkYklkLCBrZXkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhaWwoJ1Vua25vd24gVmFsdWUgcHJvdG8gJyArIEpTT04uc3RyaW5naWZ5KG9iaikpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKiogQ3JlYXRlcyBhbiBhcGkuRG9jdW1lbnQgZnJvbSBrZXkgYW5kIGZpZWxkcyAoYnV0IG5vIGNyZWF0ZS91cGRhdGUgdGltZSkgKi9cclxuICAgIEpzb25Qcm90b1NlcmlhbGl6ZXIucHJvdG90eXBlLnRvTXV0YXRpb25Eb2N1bWVudCA9IGZ1bmN0aW9uIChrZXksIGZpZWxkcykge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIG5hbWU6IHRoaXMudG9OYW1lKGtleSksXHJcbiAgICAgICAgICAgIGZpZWxkczogdGhpcy50b0ZpZWxkcyhmaWVsZHMpXHJcbiAgICAgICAgfTtcclxuICAgIH07XHJcbiAgICBKc29uUHJvdG9TZXJpYWxpemVyLnByb3RvdHlwZS50b0RvY3VtZW50ID0gZnVuY3Rpb24gKGRvY3VtZW50KSB7XHJcbiAgICAgICAgYXNzZXJ0KCFkb2N1bWVudC5oYXNMb2NhbE11dGF0aW9ucywgXCJDYW4ndCBzZXJpYWxpemUgZG9jdW1lbnRzIHdpdGggbXV0YXRpb25zLlwiKTtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBuYW1lOiB0aGlzLnRvTmFtZShkb2N1bWVudC5rZXkpLFxyXG4gICAgICAgICAgICBmaWVsZHM6IHRoaXMudG9GaWVsZHMoZG9jdW1lbnQuZGF0YSgpKSxcclxuICAgICAgICAgICAgdXBkYXRlVGltZTogdGhpcy50b1RpbWVzdGFtcChkb2N1bWVudC52ZXJzaW9uLnRvVGltZXN0YW1wKCkpXHJcbiAgICAgICAgfTtcclxuICAgIH07XHJcbiAgICBKc29uUHJvdG9TZXJpYWxpemVyLnByb3RvdHlwZS5mcm9tRG9jdW1lbnQgPSBmdW5jdGlvbiAoZG9jdW1lbnQsIGhhc0NvbW1pdHRlZE11dGF0aW9ucykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIGtleSA9IHRoaXMuZnJvbU5hbWUoZG9jdW1lbnQubmFtZSk7XHJcbiAgICAgICAgdmFyIHZlcnNpb24gPSB0aGlzLmZyb21WZXJzaW9uKGRvY3VtZW50LnVwZGF0ZVRpbWUpO1xyXG4gICAgICAgIHJldHVybiBuZXcgRG9jdW1lbnQoa2V5LCB2ZXJzaW9uLCB7IGhhc0NvbW1pdHRlZE11dGF0aW9uczogISFoYXNDb21taXR0ZWRNdXRhdGlvbnMgfSwgdW5kZWZpbmVkLCBkb2N1bWVudCwgZnVuY3Rpb24gKHYpIHsgcmV0dXJuIF90aGlzLmZyb21WYWx1ZSh2KTsgfSk7XHJcbiAgICB9O1xyXG4gICAgSnNvblByb3RvU2VyaWFsaXplci5wcm90b3R5cGUudG9GaWVsZHMgPSBmdW5jdGlvbiAoZmllbGRzKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgcmVzdWx0ID0ge307XHJcbiAgICAgICAgZmllbGRzLmZvckVhY2goZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcclxuICAgICAgICAgICAgcmVzdWx0W2tleV0gPSBfdGhpcy50b1ZhbHVlKHZhbHVlKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfTtcclxuICAgIEpzb25Qcm90b1NlcmlhbGl6ZXIucHJvdG90eXBlLmZyb21GaWVsZHMgPSBmdW5jdGlvbiAob2JqZWN0KSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICAvLyBQcm90byBtYXA8c3RyaW5nLCBWYWx1ZT4gZ2V0cyBtYXBwZWQgdG8gT2JqZWN0LCBzbyBjYXN0IGl0LlxyXG4gICAgICAgIHZhciBtYXAgPSBvYmplY3Q7XHJcbiAgICAgICAgdmFyIHJlc3VsdCA9IE9iamVjdFZhbHVlLkVNUFRZO1xyXG4gICAgICAgIGZvckVhY2gobWFwLCBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xyXG4gICAgICAgICAgICByZXN1bHQgPSByZXN1bHQuc2V0KG5ldyBGaWVsZFBhdGgoW2tleV0pLCBfdGhpcy5mcm9tVmFsdWUodmFsdWUpKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfTtcclxuICAgIEpzb25Qcm90b1NlcmlhbGl6ZXIucHJvdG90eXBlLnRvTWFwVmFsdWUgPSBmdW5jdGlvbiAobWFwKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgZmllbGRzOiB0aGlzLnRvRmllbGRzKG1hcClcclxuICAgICAgICB9O1xyXG4gICAgfTtcclxuICAgIEpzb25Qcm90b1NlcmlhbGl6ZXIucHJvdG90eXBlLnRvQXJyYXlWYWx1ZSA9IGZ1bmN0aW9uIChhcnJheSkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIHJlc3VsdCA9IFtdO1xyXG4gICAgICAgIGFycmF5LmZvckVhY2goZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKF90aGlzLnRvVmFsdWUodmFsdWUpKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4geyB2YWx1ZXM6IHJlc3VsdCB9O1xyXG4gICAgfTtcclxuICAgIEpzb25Qcm90b1NlcmlhbGl6ZXIucHJvdG90eXBlLmZyb21Gb3VuZCA9IGZ1bmN0aW9uIChkb2MpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIGFzc2VydCghIWRvYy5mb3VuZCwgJ1RyaWVkIHRvIGRlc2VyaWFsaXplIGEgZm91bmQgZG9jdW1lbnQgZnJvbSBhIG1pc3NpbmcgZG9jdW1lbnQuJyk7XHJcbiAgICAgICAgYXNzZXJ0UHJlc2VudChkb2MuZm91bmQubmFtZSwgJ2RvYy5mb3VuZC5uYW1lJyk7XHJcbiAgICAgICAgYXNzZXJ0UHJlc2VudChkb2MuZm91bmQudXBkYXRlVGltZSwgJ2RvYy5mb3VuZC51cGRhdGVUaW1lJyk7XHJcbiAgICAgICAgdmFyIGtleSA9IHRoaXMuZnJvbU5hbWUoZG9jLmZvdW5kLm5hbWUpO1xyXG4gICAgICAgIHZhciB2ZXJzaW9uID0gdGhpcy5mcm9tVmVyc2lvbihkb2MuZm91bmQudXBkYXRlVGltZSk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBEb2N1bWVudChrZXksIHZlcnNpb24sIHt9LCB1bmRlZmluZWQsIGRvYy5mb3VuZCwgZnVuY3Rpb24gKHYpIHtcclxuICAgICAgICAgICAgcmV0dXJuIF90aGlzLmZyb21WYWx1ZSh2KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBKc29uUHJvdG9TZXJpYWxpemVyLnByb3RvdHlwZS5mcm9tTWlzc2luZyA9IGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICBhc3NlcnQoISFyZXN1bHQubWlzc2luZywgJ1RyaWVkIHRvIGRlc2VyaWFsaXplIGEgbWlzc2luZyBkb2N1bWVudCBmcm9tIGEgZm91bmQgZG9jdW1lbnQuJyk7XHJcbiAgICAgICAgYXNzZXJ0KCEhcmVzdWx0LnJlYWRUaW1lLCAnVHJpZWQgdG8gZGVzZXJpYWxpemUgYSBtaXNzaW5nIGRvY3VtZW50IHdpdGhvdXQgYSByZWFkIHRpbWUuJyk7XHJcbiAgICAgICAgdmFyIGtleSA9IHRoaXMuZnJvbU5hbWUocmVzdWx0Lm1pc3NpbmcpO1xyXG4gICAgICAgIHZhciB2ZXJzaW9uID0gdGhpcy5mcm9tVmVyc2lvbihyZXN1bHQucmVhZFRpbWUpO1xyXG4gICAgICAgIHJldHVybiBuZXcgTm9Eb2N1bWVudChrZXksIHZlcnNpb24pO1xyXG4gICAgfTtcclxuICAgIEpzb25Qcm90b1NlcmlhbGl6ZXIucHJvdG90eXBlLmZyb21NYXliZURvY3VtZW50ID0gZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgIGlmICgnZm91bmQnIGluIHJlc3VsdCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5mcm9tRm91bmQocmVzdWx0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoJ21pc3NpbmcnIGluIHJlc3VsdCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5mcm9tTWlzc2luZyhyZXN1bHQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFpbCgnaW52YWxpZCBiYXRjaCBnZXQgcmVzcG9uc2U6ICcgKyBKU09OLnN0cmluZ2lmeShyZXN1bHQpKTtcclxuICAgIH07XHJcbiAgICBKc29uUHJvdG9TZXJpYWxpemVyLnByb3RvdHlwZS50b1dhdGNoVGFyZ2V0Q2hhbmdlU3RhdGUgPSBmdW5jdGlvbiAoc3RhdGUpIHtcclxuICAgICAgICBzd2l0Y2ggKHN0YXRlKSB7XHJcbiAgICAgICAgICAgIGNhc2UgV2F0Y2hUYXJnZXRDaGFuZ2VTdGF0ZS5BZGRlZDpcclxuICAgICAgICAgICAgICAgIHJldHVybiAnQUREJztcclxuICAgICAgICAgICAgY2FzZSBXYXRjaFRhcmdldENoYW5nZVN0YXRlLkN1cnJlbnQ6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJ0NVUlJFTlQnO1xyXG4gICAgICAgICAgICBjYXNlIFdhdGNoVGFyZ2V0Q2hhbmdlU3RhdGUuTm9DaGFuZ2U6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJ05PX0NIQU5HRSc7XHJcbiAgICAgICAgICAgIGNhc2UgV2F0Y2hUYXJnZXRDaGFuZ2VTdGF0ZS5SZW1vdmVkOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuICdSRU1PVkUnO1xyXG4gICAgICAgICAgICBjYXNlIFdhdGNoVGFyZ2V0Q2hhbmdlU3RhdGUuUmVzZXQ6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJ1JFU0VUJztcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWlsKCdVbmtub3duIFdhdGNoVGFyZ2V0Q2hhbmdlU3RhdGU6ICcgKyBzdGF0ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIEpzb25Qcm90b1NlcmlhbGl6ZXIucHJvdG90eXBlLnRvVGVzdFdhdGNoQ2hhbmdlID0gZnVuY3Rpb24gKHdhdGNoQ2hhbmdlKSB7XHJcbiAgICAgICAgaWYgKHdhdGNoQ2hhbmdlIGluc3RhbmNlb2YgRXhpc3RlbmNlRmlsdGVyQ2hhbmdlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBmaWx0ZXI6IHtcclxuICAgICAgICAgICAgICAgICAgICBjb3VudDogd2F0Y2hDaGFuZ2UuZXhpc3RlbmNlRmlsdGVyLmNvdW50LFxyXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldElkOiB3YXRjaENoYW5nZS50YXJnZXRJZFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAod2F0Y2hDaGFuZ2UgaW5zdGFuY2VvZiBEb2N1bWVudFdhdGNoQ2hhbmdlKSB7XHJcbiAgICAgICAgICAgIGlmICh3YXRjaENoYW5nZS5uZXdEb2MgaW5zdGFuY2VvZiBEb2N1bWVudCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGRvYyA9IHdhdGNoQ2hhbmdlLm5ld0RvYztcclxuICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnRDaGFuZ2U6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQ6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IHRoaXMudG9OYW1lKGRvYy5rZXkpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRzOiB0aGlzLnRvRmllbGRzKGRvYy5kYXRhKCkpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlVGltZTogdGhpcy50b1ZlcnNpb24oZG9jLnZlcnNpb24pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldElkczogd2F0Y2hDaGFuZ2UudXBkYXRlZFRhcmdldElkcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3ZlZFRhcmdldElkczogd2F0Y2hDaGFuZ2UucmVtb3ZlZFRhcmdldElkc1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAod2F0Y2hDaGFuZ2UubmV3RG9jIGluc3RhbmNlb2YgTm9Eb2N1bWVudCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGRvYyA9IHdhdGNoQ2hhbmdlLm5ld0RvYztcclxuICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnREZWxldGU6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQ6IHRoaXMudG9OYW1lKGRvYy5rZXkpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWFkVGltZTogdGhpcy50b1ZlcnNpb24oZG9jLnZlcnNpb24pLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZW1vdmVkVGFyZ2V0SWRzOiB3YXRjaENoYW5nZS5yZW1vdmVkVGFyZ2V0SWRzXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmICh3YXRjaENoYW5nZS5uZXdEb2MgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnRSZW1vdmU6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQ6IHRoaXMudG9OYW1lKHdhdGNoQ2hhbmdlLmtleSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZWRUYXJnZXRJZHM6IHdhdGNoQ2hhbmdlLnJlbW92ZWRUYXJnZXRJZHNcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh3YXRjaENoYW5nZSBpbnN0YW5jZW9mIFdhdGNoVGFyZ2V0Q2hhbmdlKSB7XHJcbiAgICAgICAgICAgIHZhciBjYXVzZSA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgaWYgKHdhdGNoQ2hhbmdlLmNhdXNlKSB7XHJcbiAgICAgICAgICAgICAgICBjYXVzZSA9IHtcclxuICAgICAgICAgICAgICAgICAgICBjb2RlOiBtYXBScGNDb2RlRnJvbUNvZGUod2F0Y2hDaGFuZ2UuY2F1c2UuY29kZSksXHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogd2F0Y2hDaGFuZ2UuY2F1c2UubWVzc2FnZVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgdGFyZ2V0Q2hhbmdlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0Q2hhbmdlVHlwZTogdGhpcy50b1dhdGNoVGFyZ2V0Q2hhbmdlU3RhdGUod2F0Y2hDaGFuZ2Uuc3RhdGUpLFxyXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldElkczogd2F0Y2hDaGFuZ2UudGFyZ2V0SWRzLFxyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VtZVRva2VuOiB0aGlzLnVuc2FmZUNhc3RQcm90b0J5dGVTdHJpbmcod2F0Y2hDaGFuZ2UucmVzdW1lVG9rZW4pLFxyXG4gICAgICAgICAgICAgICAgICAgIGNhdXNlOiBjYXVzZVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFpbCgnVW5yZWNvZ25pemVkIHdhdGNoIGNoYW5nZTogJyArIEpTT04uc3RyaW5naWZ5KHdhdGNoQ2hhbmdlKSk7XHJcbiAgICB9O1xyXG4gICAgSnNvblByb3RvU2VyaWFsaXplci5wcm90b3R5cGUuZnJvbVdhdGNoQ2hhbmdlID0gZnVuY3Rpb24gKGNoYW5nZSkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIHdhdGNoQ2hhbmdlO1xyXG4gICAgICAgIGlmICgndGFyZ2V0Q2hhbmdlJyBpbiBjaGFuZ2UpIHtcclxuICAgICAgICAgICAgYXNzZXJ0UHJlc2VudChjaGFuZ2UudGFyZ2V0Q2hhbmdlLCAndGFyZ2V0Q2hhbmdlJyk7XHJcbiAgICAgICAgICAgIC8vIHByb3RvMyBkZWZhdWx0IHZhbHVlIGlzIHVuc2V0IGluIEpTT04gKHVuZGVmaW5lZCksIHNvIHVzZSAnTk9fQ0hBTkdFJ1xyXG4gICAgICAgICAgICAvLyBpZiB1bnNldFxyXG4gICAgICAgICAgICB2YXIgc3RhdGUgPSB0aGlzLmZyb21XYXRjaFRhcmdldENoYW5nZVN0YXRlKGNoYW5nZS50YXJnZXRDaGFuZ2UudGFyZ2V0Q2hhbmdlVHlwZSB8fCAnTk9fQ0hBTkdFJyk7XHJcbiAgICAgICAgICAgIHZhciB0YXJnZXRJZHMgPSBjaGFuZ2UudGFyZ2V0Q2hhbmdlLnRhcmdldElkcyB8fCBbXTtcclxuICAgICAgICAgICAgdmFyIHJlc3VtZVRva2VuID0gY2hhbmdlLnRhcmdldENoYW5nZS5yZXN1bWVUb2tlbiB8fCB0aGlzLmVtcHR5Qnl0ZVN0cmluZygpO1xyXG4gICAgICAgICAgICB2YXIgY2F1c2VQcm90byA9IGNoYW5nZS50YXJnZXRDaGFuZ2UuY2F1c2U7XHJcbiAgICAgICAgICAgIHZhciBjYXVzZSA9IGNhdXNlUHJvdG8gJiYgdGhpcy5mcm9tUnBjU3RhdHVzKGNhdXNlUHJvdG8pO1xyXG4gICAgICAgICAgICB3YXRjaENoYW5nZSA9IG5ldyBXYXRjaFRhcmdldENoYW5nZShzdGF0ZSwgdGFyZ2V0SWRzLCByZXN1bWVUb2tlbiwgY2F1c2UgfHwgbnVsbCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKCdkb2N1bWVudENoYW5nZScgaW4gY2hhbmdlKSB7XHJcbiAgICAgICAgICAgIGFzc2VydFByZXNlbnQoY2hhbmdlLmRvY3VtZW50Q2hhbmdlLCAnZG9jdW1lbnRDaGFuZ2UnKTtcclxuICAgICAgICAgICAgdmFyIGVudGl0eUNoYW5nZSA9IGNoYW5nZS5kb2N1bWVudENoYW5nZTtcclxuICAgICAgICAgICAgYXNzZXJ0UHJlc2VudChlbnRpdHlDaGFuZ2UuZG9jdW1lbnQsICdkb2N1bWVudENoYW5nZS5uYW1lJyk7XHJcbiAgICAgICAgICAgIGFzc2VydFByZXNlbnQoZW50aXR5Q2hhbmdlLmRvY3VtZW50Lm5hbWUsICdkb2N1bWVudENoYW5nZS5kb2N1bWVudC5uYW1lJyk7XHJcbiAgICAgICAgICAgIGFzc2VydFByZXNlbnQoZW50aXR5Q2hhbmdlLmRvY3VtZW50LnVwZGF0ZVRpbWUsICdkb2N1bWVudENoYW5nZS5kb2N1bWVudC51cGRhdGVUaW1lJyk7XHJcbiAgICAgICAgICAgIHZhciBrZXkgPSB0aGlzLmZyb21OYW1lKGVudGl0eUNoYW5nZS5kb2N1bWVudC5uYW1lKTtcclxuICAgICAgICAgICAgdmFyIHZlcnNpb24gPSB0aGlzLmZyb21WZXJzaW9uKGVudGl0eUNoYW5nZS5kb2N1bWVudC51cGRhdGVUaW1lKTtcclxuICAgICAgICAgICAgdmFyIGRvYyA9IG5ldyBEb2N1bWVudChrZXksIHZlcnNpb24sIHt9LCB1bmRlZmluZWQsIGVudGl0eUNoYW5nZS5kb2N1bWVudCwgZnVuY3Rpb24gKHYpIHsgcmV0dXJuIF90aGlzLmZyb21WYWx1ZSh2KTsgfSk7XHJcbiAgICAgICAgICAgIHZhciB1cGRhdGVkVGFyZ2V0SWRzID0gZW50aXR5Q2hhbmdlLnRhcmdldElkcyB8fCBbXTtcclxuICAgICAgICAgICAgdmFyIHJlbW92ZWRUYXJnZXRJZHMgPSBlbnRpdHlDaGFuZ2UucmVtb3ZlZFRhcmdldElkcyB8fCBbXTtcclxuICAgICAgICAgICAgd2F0Y2hDaGFuZ2UgPSBuZXcgRG9jdW1lbnRXYXRjaENoYW5nZSh1cGRhdGVkVGFyZ2V0SWRzLCByZW1vdmVkVGFyZ2V0SWRzLCBkb2Mua2V5LCBkb2MpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICgnZG9jdW1lbnREZWxldGUnIGluIGNoYW5nZSkge1xyXG4gICAgICAgICAgICBhc3NlcnRQcmVzZW50KGNoYW5nZS5kb2N1bWVudERlbGV0ZSwgJ2RvY3VtZW50RGVsZXRlJyk7XHJcbiAgICAgICAgICAgIHZhciBkb2NEZWxldGUgPSBjaGFuZ2UuZG9jdW1lbnREZWxldGU7XHJcbiAgICAgICAgICAgIGFzc2VydFByZXNlbnQoZG9jRGVsZXRlLmRvY3VtZW50LCAnZG9jdW1lbnREZWxldGUuZG9jdW1lbnQnKTtcclxuICAgICAgICAgICAgdmFyIGtleSA9IHRoaXMuZnJvbU5hbWUoZG9jRGVsZXRlLmRvY3VtZW50KTtcclxuICAgICAgICAgICAgdmFyIHZlcnNpb24gPSBkb2NEZWxldGUucmVhZFRpbWVcclxuICAgICAgICAgICAgICAgID8gdGhpcy5mcm9tVmVyc2lvbihkb2NEZWxldGUucmVhZFRpbWUpXHJcbiAgICAgICAgICAgICAgICA6IFNuYXBzaG90VmVyc2lvbi5mb3JEZWxldGVkRG9jKCk7XHJcbiAgICAgICAgICAgIHZhciBkb2MgPSBuZXcgTm9Eb2N1bWVudChrZXksIHZlcnNpb24pO1xyXG4gICAgICAgICAgICB2YXIgcmVtb3ZlZFRhcmdldElkcyA9IGRvY0RlbGV0ZS5yZW1vdmVkVGFyZ2V0SWRzIHx8IFtdO1xyXG4gICAgICAgICAgICB3YXRjaENoYW5nZSA9IG5ldyBEb2N1bWVudFdhdGNoQ2hhbmdlKFtdLCByZW1vdmVkVGFyZ2V0SWRzLCBkb2Mua2V5LCBkb2MpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICgnZG9jdW1lbnRSZW1vdmUnIGluIGNoYW5nZSkge1xyXG4gICAgICAgICAgICBhc3NlcnRQcmVzZW50KGNoYW5nZS5kb2N1bWVudFJlbW92ZSwgJ2RvY3VtZW50UmVtb3ZlJyk7XHJcbiAgICAgICAgICAgIHZhciBkb2NSZW1vdmUgPSBjaGFuZ2UuZG9jdW1lbnRSZW1vdmU7XHJcbiAgICAgICAgICAgIGFzc2VydFByZXNlbnQoZG9jUmVtb3ZlLmRvY3VtZW50LCAnZG9jdW1lbnRSZW1vdmUnKTtcclxuICAgICAgICAgICAgdmFyIGtleSA9IHRoaXMuZnJvbU5hbWUoZG9jUmVtb3ZlLmRvY3VtZW50KTtcclxuICAgICAgICAgICAgdmFyIHJlbW92ZWRUYXJnZXRJZHMgPSBkb2NSZW1vdmUucmVtb3ZlZFRhcmdldElkcyB8fCBbXTtcclxuICAgICAgICAgICAgd2F0Y2hDaGFuZ2UgPSBuZXcgRG9jdW1lbnRXYXRjaENoYW5nZShbXSwgcmVtb3ZlZFRhcmdldElkcywga2V5LCBudWxsKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoJ2ZpbHRlcicgaW4gY2hhbmdlKSB7XHJcbiAgICAgICAgICAgIC8vIFRPRE8oZGltb25kKTogaW1wbGVtZW50IGV4aXN0ZW5jZSBmaWx0ZXIgcGFyc2luZyB3aXRoIHN0cmF0ZWd5LlxyXG4gICAgICAgICAgICBhc3NlcnRQcmVzZW50KGNoYW5nZS5maWx0ZXIsICdmaWx0ZXInKTtcclxuICAgICAgICAgICAgdmFyIGZpbHRlciA9IGNoYW5nZS5maWx0ZXI7XHJcbiAgICAgICAgICAgIGFzc2VydFByZXNlbnQoZmlsdGVyLnRhcmdldElkLCAnZmlsdGVyLnRhcmdldElkJyk7XHJcbiAgICAgICAgICAgIHZhciBjb3VudCA9IGZpbHRlci5jb3VudCB8fCAwO1xyXG4gICAgICAgICAgICB2YXIgZXhpc3RlbmNlRmlsdGVyID0gbmV3IEV4aXN0ZW5jZUZpbHRlcihjb3VudCk7XHJcbiAgICAgICAgICAgIHZhciB0YXJnZXRJZCA9IGZpbHRlci50YXJnZXRJZDtcclxuICAgICAgICAgICAgd2F0Y2hDaGFuZ2UgPSBuZXcgRXhpc3RlbmNlRmlsdGVyQ2hhbmdlKHRhcmdldElkLCBleGlzdGVuY2VGaWx0ZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhaWwoJ1Vua25vd24gY2hhbmdlIHR5cGUgJyArIEpTT04uc3RyaW5naWZ5KGNoYW5nZSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gd2F0Y2hDaGFuZ2U7XHJcbiAgICB9O1xyXG4gICAgSnNvblByb3RvU2VyaWFsaXplci5wcm90b3R5cGUuZnJvbVdhdGNoVGFyZ2V0Q2hhbmdlU3RhdGUgPSBmdW5jdGlvbiAoc3RhdGUpIHtcclxuICAgICAgICBpZiAoc3RhdGUgPT09ICdOT19DSEFOR0UnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBXYXRjaFRhcmdldENoYW5nZVN0YXRlLk5vQ2hhbmdlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChzdGF0ZSA9PT0gJ0FERCcpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFdhdGNoVGFyZ2V0Q2hhbmdlU3RhdGUuQWRkZWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHN0YXRlID09PSAnUkVNT1ZFJykge1xyXG4gICAgICAgICAgICByZXR1cm4gV2F0Y2hUYXJnZXRDaGFuZ2VTdGF0ZS5SZW1vdmVkO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChzdGF0ZSA9PT0gJ0NVUlJFTlQnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBXYXRjaFRhcmdldENoYW5nZVN0YXRlLkN1cnJlbnQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHN0YXRlID09PSAnUkVTRVQnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBXYXRjaFRhcmdldENoYW5nZVN0YXRlLlJlc2V0O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhaWwoJ0dvdCB1bmV4cGVjdGVkIFRhcmdldENoYW5nZS5zdGF0ZTogJyArIHN0YXRlKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgSnNvblByb3RvU2VyaWFsaXplci5wcm90b3R5cGUudmVyc2lvbkZyb21MaXN0ZW5SZXNwb25zZSA9IGZ1bmN0aW9uIChjaGFuZ2UpIHtcclxuICAgICAgICAvLyBXZSBoYXZlIG9ubHkgcmVhY2hlZCBhIGNvbnNpc3RlbnQgc25hcHNob3QgZm9yIHRoZSBlbnRpcmUgc3RyZWFtIGlmIHRoZXJlXHJcbiAgICAgICAgLy8gaXMgYSByZWFkX3RpbWUgc2V0IGFuZCBpdCBhcHBsaWVzIHRvIGFsbCB0YXJnZXRzIChpLmUuIHRoZSBsaXN0IG9mXHJcbiAgICAgICAgLy8gdGFyZ2V0cyBpcyBlbXB0eSkuIFRoZSBiYWNrZW5kIGlzIGd1YXJhbnRlZWQgdG8gc2VuZCBzdWNoIHJlc3BvbnNlcy5cclxuICAgICAgICBpZiAoISgndGFyZ2V0Q2hhbmdlJyBpbiBjaGFuZ2UpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBTbmFwc2hvdFZlcnNpb24uTUlOO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgdGFyZ2V0Q2hhbmdlID0gY2hhbmdlLnRhcmdldENoYW5nZTtcclxuICAgICAgICBpZiAodGFyZ2V0Q2hhbmdlLnRhcmdldElkcyAmJiB0YXJnZXRDaGFuZ2UudGFyZ2V0SWRzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICByZXR1cm4gU25hcHNob3RWZXJzaW9uLk1JTjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCF0YXJnZXRDaGFuZ2UucmVhZFRpbWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFNuYXBzaG90VmVyc2lvbi5NSU47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLmZyb21WZXJzaW9uKHRhcmdldENoYW5nZS5yZWFkVGltZSk7XHJcbiAgICB9O1xyXG4gICAgSnNvblByb3RvU2VyaWFsaXplci5wcm90b3R5cGUudG9NdXRhdGlvbiA9IGZ1bmN0aW9uIChtdXRhdGlvbikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIHJlc3VsdDtcclxuICAgICAgICBpZiAobXV0YXRpb24gaW5zdGFuY2VvZiBTZXRNdXRhdGlvbikge1xyXG4gICAgICAgICAgICByZXN1bHQgPSB7XHJcbiAgICAgICAgICAgICAgICB1cGRhdGU6IHRoaXMudG9NdXRhdGlvbkRvY3VtZW50KG11dGF0aW9uLmtleSwgbXV0YXRpb24udmFsdWUpXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKG11dGF0aW9uIGluc3RhbmNlb2YgRGVsZXRlTXV0YXRpb24pIHtcclxuICAgICAgICAgICAgcmVzdWx0ID0geyBkZWxldGU6IHRoaXMudG9OYW1lKG11dGF0aW9uLmtleSkgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAobXV0YXRpb24gaW5zdGFuY2VvZiBQYXRjaE11dGF0aW9uKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdCA9IHtcclxuICAgICAgICAgICAgICAgIHVwZGF0ZTogdGhpcy50b011dGF0aW9uRG9jdW1lbnQobXV0YXRpb24ua2V5LCBtdXRhdGlvbi5kYXRhKSxcclxuICAgICAgICAgICAgICAgIHVwZGF0ZU1hc2s6IHRoaXMudG9Eb2N1bWVudE1hc2sobXV0YXRpb24uZmllbGRNYXNrKVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChtdXRhdGlvbiBpbnN0YW5jZW9mIFRyYW5zZm9ybU11dGF0aW9uKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdCA9IHtcclxuICAgICAgICAgICAgICAgIHRyYW5zZm9ybToge1xyXG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50OiB0aGlzLnRvTmFtZShtdXRhdGlvbi5rZXkpLFxyXG4gICAgICAgICAgICAgICAgICAgIGZpZWxkVHJhbnNmb3JtczogbXV0YXRpb24uZmllbGRUcmFuc2Zvcm1zLm1hcChmdW5jdGlvbiAodHJhbnNmb3JtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy50b0ZpZWxkVHJhbnNmb3JtKHRyYW5zZm9ybSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWlsKCdVbmtub3duIG11dGF0aW9uIHR5cGUgJyArIG11dGF0aW9uLnR5cGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIW11dGF0aW9uLnByZWNvbmRpdGlvbi5pc05vbmUpIHtcclxuICAgICAgICAgICAgcmVzdWx0LmN1cnJlbnREb2N1bWVudCA9IHRoaXMudG9QcmVjb25kaXRpb24obXV0YXRpb24ucHJlY29uZGl0aW9uKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH07XHJcbiAgICBKc29uUHJvdG9TZXJpYWxpemVyLnByb3RvdHlwZS5mcm9tTXV0YXRpb24gPSBmdW5jdGlvbiAocHJvdG8pIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhciBwcmVjb25kaXRpb24gPSBwcm90by5jdXJyZW50RG9jdW1lbnRcclxuICAgICAgICAgICAgPyB0aGlzLmZyb21QcmVjb25kaXRpb24ocHJvdG8uY3VycmVudERvY3VtZW50KVxyXG4gICAgICAgICAgICA6IFByZWNvbmRpdGlvbi5OT05FO1xyXG4gICAgICAgIGlmIChwcm90by51cGRhdGUpIHtcclxuICAgICAgICAgICAgYXNzZXJ0UHJlc2VudChwcm90by51cGRhdGUubmFtZSwgJ25hbWUnKTtcclxuICAgICAgICAgICAgdmFyIGtleSA9IHRoaXMuZnJvbU5hbWUocHJvdG8udXBkYXRlLm5hbWUpO1xyXG4gICAgICAgICAgICB2YXIgdmFsdWUgPSB0aGlzLmZyb21GaWVsZHMocHJvdG8udXBkYXRlLmZpZWxkcyB8fCB7fSk7XHJcbiAgICAgICAgICAgIGlmIChwcm90by51cGRhdGVNYXNrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZmllbGRNYXNrID0gdGhpcy5mcm9tRG9jdW1lbnRNYXNrKHByb3RvLnVwZGF0ZU1hc2spO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBQYXRjaE11dGF0aW9uKGtleSwgdmFsdWUsIGZpZWxkTWFzaywgcHJlY29uZGl0aW9uKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgU2V0TXV0YXRpb24oa2V5LCB2YWx1ZSwgcHJlY29uZGl0aW9uKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChwcm90by5kZWxldGUpIHtcclxuICAgICAgICAgICAgdmFyIGtleSA9IHRoaXMuZnJvbU5hbWUocHJvdG8uZGVsZXRlKTtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBEZWxldGVNdXRhdGlvbihrZXksIHByZWNvbmRpdGlvbik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHByb3RvLnRyYW5zZm9ybSkge1xyXG4gICAgICAgICAgICB2YXIga2V5ID0gdGhpcy5mcm9tTmFtZShwcm90by50cmFuc2Zvcm0uZG9jdW1lbnQpO1xyXG4gICAgICAgICAgICB2YXIgZmllbGRUcmFuc2Zvcm1zID0gcHJvdG8udHJhbnNmb3JtLmZpZWxkVHJhbnNmb3Jtcy5tYXAoZnVuY3Rpb24gKHRyYW5zZm9ybSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLmZyb21GaWVsZFRyYW5zZm9ybSh0cmFuc2Zvcm0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgYXNzZXJ0KHByZWNvbmRpdGlvbi5leGlzdHMgPT09IHRydWUsICdUcmFuc2Zvcm1zIG9ubHkgc3VwcG9ydCBwcmVjb25kaXRpb24gXCJleGlzdHMgPT0gdHJ1ZVwiJyk7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgVHJhbnNmb3JtTXV0YXRpb24oa2V5LCBmaWVsZFRyYW5zZm9ybXMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhaWwoJ3Vua25vd24gbXV0YXRpb24gcHJvdG86ICcgKyBKU09OLnN0cmluZ2lmeShwcm90bykpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBKc29uUHJvdG9TZXJpYWxpemVyLnByb3RvdHlwZS50b1ByZWNvbmRpdGlvbiA9IGZ1bmN0aW9uIChwcmVjb25kaXRpb24pIHtcclxuICAgICAgICBhc3NlcnQoIXByZWNvbmRpdGlvbi5pc05vbmUsIFwiQ2FuJ3Qgc2VyaWFsaXplIGFuIGVtcHR5IHByZWNvbmRpdGlvblwiKTtcclxuICAgICAgICBpZiAocHJlY29uZGl0aW9uLnVwZGF0ZVRpbWUgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgdXBkYXRlVGltZTogdGhpcy50b1ZlcnNpb24ocHJlY29uZGl0aW9uLnVwZGF0ZVRpbWUpXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHByZWNvbmRpdGlvbi5leGlzdHMgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICByZXR1cm4geyBleGlzdHM6IHByZWNvbmRpdGlvbi5leGlzdHMgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWlsKCdVbmtub3duIHByZWNvbmRpdGlvbicpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBKc29uUHJvdG9TZXJpYWxpemVyLnByb3RvdHlwZS5mcm9tUHJlY29uZGl0aW9uID0gZnVuY3Rpb24gKHByZWNvbmRpdGlvbikge1xyXG4gICAgICAgIGlmIChwcmVjb25kaXRpb24udXBkYXRlVGltZSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBQcmVjb25kaXRpb24udXBkYXRlVGltZSh0aGlzLmZyb21WZXJzaW9uKHByZWNvbmRpdGlvbi51cGRhdGVUaW1lKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHByZWNvbmRpdGlvbi5leGlzdHMgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gUHJlY29uZGl0aW9uLmV4aXN0cyhwcmVjb25kaXRpb24uZXhpc3RzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBQcmVjb25kaXRpb24uTk9ORTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgSnNvblByb3RvU2VyaWFsaXplci5wcm90b3R5cGUuZnJvbVdyaXRlUmVzdWx0ID0gZnVuY3Rpb24gKHByb3RvLCBjb21taXRUaW1lKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICAvLyBOT1RFOiBEZWxldGVzIGRvbid0IGhhdmUgYW4gdXBkYXRlVGltZS5cclxuICAgICAgICB2YXIgdmVyc2lvbiA9IHByb3RvLnVwZGF0ZVRpbWVcclxuICAgICAgICAgICAgPyB0aGlzLmZyb21WZXJzaW9uKHByb3RvLnVwZGF0ZVRpbWUpXHJcbiAgICAgICAgICAgIDogdGhpcy5mcm9tVmVyc2lvbihjb21taXRUaW1lKTtcclxuICAgICAgICBpZiAodmVyc2lvbi5pc0VxdWFsKFNuYXBzaG90VmVyc2lvbi5NSU4pKSB7XHJcbiAgICAgICAgICAgIC8vIFRoZSBGaXJlc3RvcmUgRW11bGF0b3IgY3VycmVudGx5IHJldHVybnMgYW4gdXBkYXRlIHRpbWUgb2YgMCBmb3JcclxuICAgICAgICAgICAgLy8gZGVsZXRlcyBvZiBub24tZXhpc3RpbmcgZG9jdW1lbnRzIChyYXRoZXIgdGhhbiBudWxsKS4gVGhpcyBicmVha3MgdGhlXHJcbiAgICAgICAgICAgIC8vIHRlc3QgXCJnZXQgZGVsZXRlZCBkb2Mgd2hpbGUgb2ZmbGluZSB3aXRoIHNvdXJjZT1jYWNoZVwiIGFzIE5vRG9jdW1lbnRzXHJcbiAgICAgICAgICAgIC8vIHdpdGggdmVyc2lvbiAwIGFyZSBmaWx0ZXJlZCBieSBJbmRleGVkRGIncyBSZW1vdGVEb2N1bWVudENhY2hlLlxyXG4gICAgICAgICAgICAvLyBUT0RPKCMyMTQ5KTogUmVtb3ZlIHRoaXMgd2hlbiBFbXVsYXRvciBpcyBmaXhlZFxyXG4gICAgICAgICAgICB2ZXJzaW9uID0gdGhpcy5mcm9tVmVyc2lvbihjb21taXRUaW1lKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIHRyYW5zZm9ybVJlc3VsdHMgPSBudWxsO1xyXG4gICAgICAgIGlmIChwcm90by50cmFuc2Zvcm1SZXN1bHRzICYmIHByb3RvLnRyYW5zZm9ybVJlc3VsdHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICB0cmFuc2Zvcm1SZXN1bHRzID0gcHJvdG8udHJhbnNmb3JtUmVzdWx0cy5tYXAoZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLmZyb21WYWx1ZShyZXN1bHQpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG5ldyBNdXRhdGlvblJlc3VsdCh2ZXJzaW9uLCB0cmFuc2Zvcm1SZXN1bHRzKTtcclxuICAgIH07XHJcbiAgICBKc29uUHJvdG9TZXJpYWxpemVyLnByb3RvdHlwZS5mcm9tV3JpdGVSZXN1bHRzID0gZnVuY3Rpb24gKHByb3RvcywgY29tbWl0VGltZSkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgaWYgKHByb3RvcyAmJiBwcm90b3MubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBhc3NlcnQoY29tbWl0VGltZSAhPT0gdW5kZWZpbmVkLCAnUmVjZWl2ZWQgYSB3cml0ZSByZXN1bHQgd2l0aG91dCBhIGNvbW1pdCB0aW1lJyk7XHJcbiAgICAgICAgICAgIHJldHVybiBwcm90b3MubWFwKGZ1bmN0aW9uIChwcm90bykgeyByZXR1cm4gX3RoaXMuZnJvbVdyaXRlUmVzdWx0KHByb3RvLCBjb21taXRUaW1lKTsgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gW107XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIEpzb25Qcm90b1NlcmlhbGl6ZXIucHJvdG90eXBlLnRvRmllbGRUcmFuc2Zvcm0gPSBmdW5jdGlvbiAoZmllbGRUcmFuc2Zvcm0pIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhciB0cmFuc2Zvcm0gPSBmaWVsZFRyYW5zZm9ybS50cmFuc2Zvcm07XHJcbiAgICAgICAgaWYgKHRyYW5zZm9ybSBpbnN0YW5jZW9mIFNlcnZlclRpbWVzdGFtcFRyYW5zZm9ybSkge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgZmllbGRQYXRoOiBmaWVsZFRyYW5zZm9ybS5maWVsZC5jYW5vbmljYWxTdHJpbmcoKSxcclxuICAgICAgICAgICAgICAgIHNldFRvU2VydmVyVmFsdWU6ICdSRVFVRVNUX1RJTUUnXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHRyYW5zZm9ybSBpbnN0YW5jZW9mIEFycmF5VW5pb25UcmFuc2Zvcm1PcGVyYXRpb24pIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIGZpZWxkUGF0aDogZmllbGRUcmFuc2Zvcm0uZmllbGQuY2Fub25pY2FsU3RyaW5nKCksXHJcbiAgICAgICAgICAgICAgICBhcHBlbmRNaXNzaW5nRWxlbWVudHM6IHtcclxuICAgICAgICAgICAgICAgICAgICB2YWx1ZXM6IHRyYW5zZm9ybS5lbGVtZW50cy5tYXAoZnVuY3Rpb24gKHYpIHsgcmV0dXJuIF90aGlzLnRvVmFsdWUodik7IH0pXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHRyYW5zZm9ybSBpbnN0YW5jZW9mIEFycmF5UmVtb3ZlVHJhbnNmb3JtT3BlcmF0aW9uKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBmaWVsZFBhdGg6IGZpZWxkVHJhbnNmb3JtLmZpZWxkLmNhbm9uaWNhbFN0cmluZygpLFxyXG4gICAgICAgICAgICAgICAgcmVtb3ZlQWxsRnJvbUFycmF5OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWVzOiB0cmFuc2Zvcm0uZWxlbWVudHMubWFwKGZ1bmN0aW9uICh2KSB7IHJldHVybiBfdGhpcy50b1ZhbHVlKHYpOyB9KVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh0cmFuc2Zvcm0gaW5zdGFuY2VvZiBOdW1lcmljSW5jcmVtZW50VHJhbnNmb3JtT3BlcmF0aW9uKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBmaWVsZFBhdGg6IGZpZWxkVHJhbnNmb3JtLmZpZWxkLmNhbm9uaWNhbFN0cmluZygpLFxyXG4gICAgICAgICAgICAgICAgaW5jcmVtZW50OiB0aGlzLnRvVmFsdWUodHJhbnNmb3JtLm9wZXJhbmQpXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aHJvdyBmYWlsKCdVbmtub3duIHRyYW5zZm9ybTogJyArIGZpZWxkVHJhbnNmb3JtLnRyYW5zZm9ybSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIEpzb25Qcm90b1NlcmlhbGl6ZXIucHJvdG90eXBlLmZyb21GaWVsZFRyYW5zZm9ybSA9IGZ1bmN0aW9uIChwcm90bykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIHRyYW5zZm9ybSA9IG51bGw7XHJcbiAgICAgICAgaWYgKCdzZXRUb1NlcnZlclZhbHVlJyBpbiBwcm90bykge1xyXG4gICAgICAgICAgICBhc3NlcnQocHJvdG8uc2V0VG9TZXJ2ZXJWYWx1ZSA9PT0gJ1JFUVVFU1RfVElNRScsICdVbmtub3duIHNlcnZlciB2YWx1ZSB0cmFuc2Zvcm0gcHJvdG86ICcgKyBKU09OLnN0cmluZ2lmeShwcm90bykpO1xyXG4gICAgICAgICAgICB0cmFuc2Zvcm0gPSBTZXJ2ZXJUaW1lc3RhbXBUcmFuc2Zvcm0uaW5zdGFuY2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKCdhcHBlbmRNaXNzaW5nRWxlbWVudHMnIGluIHByb3RvKSB7XHJcbiAgICAgICAgICAgIHZhciB2YWx1ZXMgPSBwcm90by5hcHBlbmRNaXNzaW5nRWxlbWVudHMudmFsdWVzIHx8IFtdO1xyXG4gICAgICAgICAgICB0cmFuc2Zvcm0gPSBuZXcgQXJyYXlVbmlvblRyYW5zZm9ybU9wZXJhdGlvbih2YWx1ZXMubWFwKGZ1bmN0aW9uICh2KSB7IHJldHVybiBfdGhpcy5mcm9tVmFsdWUodik7IH0pKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoJ3JlbW92ZUFsbEZyb21BcnJheScgaW4gcHJvdG8pIHtcclxuICAgICAgICAgICAgdmFyIHZhbHVlcyA9IHByb3RvLnJlbW92ZUFsbEZyb21BcnJheS52YWx1ZXMgfHwgW107XHJcbiAgICAgICAgICAgIHRyYW5zZm9ybSA9IG5ldyBBcnJheVJlbW92ZVRyYW5zZm9ybU9wZXJhdGlvbih2YWx1ZXMubWFwKGZ1bmN0aW9uICh2KSB7IHJldHVybiBfdGhpcy5mcm9tVmFsdWUodik7IH0pKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoJ2luY3JlbWVudCcgaW4gcHJvdG8pIHtcclxuICAgICAgICAgICAgdmFyIG9wZXJhbmQgPSB0aGlzLmZyb21WYWx1ZShwcm90by5pbmNyZW1lbnQpO1xyXG4gICAgICAgICAgICBhc3NlcnQob3BlcmFuZCBpbnN0YW5jZW9mIE51bWJlclZhbHVlLCAnTlVNRVJJQ19BREQgdHJhbnNmb3JtIHJlcXVpcmVzIGEgTnVtYmVyVmFsdWUnKTtcclxuICAgICAgICAgICAgdHJhbnNmb3JtID0gbmV3IE51bWVyaWNJbmNyZW1lbnRUcmFuc2Zvcm1PcGVyYXRpb24ob3BlcmFuZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBmYWlsKCdVbmtub3duIHRyYW5zZm9ybSBwcm90bzogJyArIEpTT04uc3RyaW5naWZ5KHByb3RvKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBmaWVsZFBhdGggPSBGaWVsZFBhdGguZnJvbVNlcnZlckZvcm1hdChwcm90by5maWVsZFBhdGgpO1xyXG4gICAgICAgIHJldHVybiBuZXcgRmllbGRUcmFuc2Zvcm0oZmllbGRQYXRoLCB0cmFuc2Zvcm0pO1xyXG4gICAgfTtcclxuICAgIEpzb25Qcm90b1NlcmlhbGl6ZXIucHJvdG90eXBlLnRvRG9jdW1lbnRzVGFyZ2V0ID0gZnVuY3Rpb24gKHRhcmdldCkge1xyXG4gICAgICAgIHJldHVybiB7IGRvY3VtZW50czogW3RoaXMudG9RdWVyeVBhdGgodGFyZ2V0LnBhdGgpXSB9O1xyXG4gICAgfTtcclxuICAgIEpzb25Qcm90b1NlcmlhbGl6ZXIucHJvdG90eXBlLmZyb21Eb2N1bWVudHNUYXJnZXQgPSBmdW5jdGlvbiAoZG9jdW1lbnRzVGFyZ2V0KSB7XHJcbiAgICAgICAgdmFyIGNvdW50ID0gZG9jdW1lbnRzVGFyZ2V0LmRvY3VtZW50cy5sZW5ndGg7XHJcbiAgICAgICAgYXNzZXJ0KGNvdW50ID09PSAxLCAnRG9jdW1lbnRzVGFyZ2V0IGNvbnRhaW5lZCBvdGhlciB0aGFuIDEgZG9jdW1lbnQ6ICcgKyBjb3VudCk7XHJcbiAgICAgICAgdmFyIG5hbWUgPSBkb2N1bWVudHNUYXJnZXQuZG9jdW1lbnRzWzBdO1xyXG4gICAgICAgIHJldHVybiBRdWVyeS5hdFBhdGgodGhpcy5mcm9tUXVlcnlQYXRoKG5hbWUpKS50b1RhcmdldCgpO1xyXG4gICAgfTtcclxuICAgIEpzb25Qcm90b1NlcmlhbGl6ZXIucHJvdG90eXBlLnRvUXVlcnlUYXJnZXQgPSBmdW5jdGlvbiAodGFyZ2V0KSB7XHJcbiAgICAgICAgLy8gRGlzc2VjdCB0aGUgcGF0aCBpbnRvIHBhcmVudCwgY29sbGVjdGlvbklkLCBhbmQgb3B0aW9uYWwga2V5IGZpbHRlci5cclxuICAgICAgICB2YXIgcmVzdWx0ID0geyBzdHJ1Y3R1cmVkUXVlcnk6IHt9IH07XHJcbiAgICAgICAgdmFyIHBhdGggPSB0YXJnZXQucGF0aDtcclxuICAgICAgICBpZiAodGFyZ2V0LmNvbGxlY3Rpb25Hcm91cCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBhc3NlcnQocGF0aC5sZW5ndGggJSAyID09PSAwLCAnQ29sbGVjdGlvbiBHcm91cCBxdWVyaWVzIHNob3VsZCBiZSB3aXRoaW4gYSBkb2N1bWVudCBwYXRoIG9yIHJvb3QuJyk7XHJcbiAgICAgICAgICAgIHJlc3VsdC5wYXJlbnQgPSB0aGlzLnRvUXVlcnlQYXRoKHBhdGgpO1xyXG4gICAgICAgICAgICByZXN1bHQuc3RydWN0dXJlZFF1ZXJ5LmZyb20gPSBbXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29sbGVjdGlvbklkOiB0YXJnZXQuY29sbGVjdGlvbkdyb3VwLFxyXG4gICAgICAgICAgICAgICAgICAgIGFsbERlc2NlbmRhbnRzOiB0cnVlXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBhc3NlcnQocGF0aC5sZW5ndGggJSAyICE9PSAwLCAnRG9jdW1lbnQgcXVlcmllcyB3aXRoIGZpbHRlcnMgYXJlIG5vdCBzdXBwb3J0ZWQuJyk7XHJcbiAgICAgICAgICAgIHJlc3VsdC5wYXJlbnQgPSB0aGlzLnRvUXVlcnlQYXRoKHBhdGgucG9wTGFzdCgpKTtcclxuICAgICAgICAgICAgcmVzdWx0LnN0cnVjdHVyZWRRdWVyeS5mcm9tID0gW3sgY29sbGVjdGlvbklkOiBwYXRoLmxhc3RTZWdtZW50KCkgfV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciB3aGVyZSA9IHRoaXMudG9GaWx0ZXIodGFyZ2V0LmZpbHRlcnMpO1xyXG4gICAgICAgIGlmICh3aGVyZSkge1xyXG4gICAgICAgICAgICByZXN1bHQuc3RydWN0dXJlZFF1ZXJ5LndoZXJlID0gd2hlcmU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBvcmRlckJ5ID0gdGhpcy50b09yZGVyKHRhcmdldC5vcmRlckJ5KTtcclxuICAgICAgICBpZiAob3JkZXJCeSkge1xyXG4gICAgICAgICAgICByZXN1bHQuc3RydWN0dXJlZFF1ZXJ5Lm9yZGVyQnkgPSBvcmRlckJ5O1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgbGltaXQgPSB0aGlzLnRvSW50MzJWYWx1ZSh0YXJnZXQubGltaXQpO1xyXG4gICAgICAgIGlmIChsaW1pdCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICByZXN1bHQuc3RydWN0dXJlZFF1ZXJ5LmxpbWl0ID0gbGltaXQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0YXJnZXQuc3RhcnRBdCkge1xyXG4gICAgICAgICAgICByZXN1bHQuc3RydWN0dXJlZFF1ZXJ5LnN0YXJ0QXQgPSB0aGlzLnRvQ3Vyc29yKHRhcmdldC5zdGFydEF0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRhcmdldC5lbmRBdCkge1xyXG4gICAgICAgICAgICByZXN1bHQuc3RydWN0dXJlZFF1ZXJ5LmVuZEF0ID0gdGhpcy50b0N1cnNvcih0YXJnZXQuZW5kQXQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfTtcclxuICAgIEpzb25Qcm90b1NlcmlhbGl6ZXIucHJvdG90eXBlLmZyb21RdWVyeVRhcmdldCA9IGZ1bmN0aW9uICh0YXJnZXQpIHtcclxuICAgICAgICB2YXIgcGF0aCA9IHRoaXMuZnJvbVF1ZXJ5UGF0aCh0YXJnZXQucGFyZW50KTtcclxuICAgICAgICB2YXIgcXVlcnkgPSB0YXJnZXQuc3RydWN0dXJlZFF1ZXJ5O1xyXG4gICAgICAgIHZhciBmcm9tQ291bnQgPSBxdWVyeS5mcm9tID8gcXVlcnkuZnJvbS5sZW5ndGggOiAwO1xyXG4gICAgICAgIHZhciBjb2xsZWN0aW9uR3JvdXAgPSBudWxsO1xyXG4gICAgICAgIGlmIChmcm9tQ291bnQgPiAwKSB7XHJcbiAgICAgICAgICAgIGFzc2VydChmcm9tQ291bnQgPT09IDEsICdTdHJ1Y3R1cmVkUXVlcnkuZnJvbSB3aXRoIG1vcmUgdGhhbiBvbmUgY29sbGVjdGlvbiBpcyBub3Qgc3VwcG9ydGVkLicpO1xyXG4gICAgICAgICAgICB2YXIgZnJvbSA9IHF1ZXJ5LmZyb21bMF07XHJcbiAgICAgICAgICAgIGlmIChmcm9tLmFsbERlc2NlbmRhbnRzKSB7XHJcbiAgICAgICAgICAgICAgICBjb2xsZWN0aW9uR3JvdXAgPSBmcm9tLmNvbGxlY3Rpb25JZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHBhdGggPSBwYXRoLmNoaWxkKGZyb20uY29sbGVjdGlvbklkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgZmlsdGVyQnkgPSBbXTtcclxuICAgICAgICBpZiAocXVlcnkud2hlcmUpIHtcclxuICAgICAgICAgICAgZmlsdGVyQnkgPSB0aGlzLmZyb21GaWx0ZXIocXVlcnkud2hlcmUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgb3JkZXJCeSA9IFtdO1xyXG4gICAgICAgIGlmIChxdWVyeS5vcmRlckJ5KSB7XHJcbiAgICAgICAgICAgIG9yZGVyQnkgPSB0aGlzLmZyb21PcmRlcihxdWVyeS5vcmRlckJ5KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGxpbWl0ID0gbnVsbDtcclxuICAgICAgICBpZiAocXVlcnkubGltaXQpIHtcclxuICAgICAgICAgICAgbGltaXQgPSB0aGlzLmZyb21JbnQzMlZhbHVlKHF1ZXJ5LmxpbWl0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIHN0YXJ0QXQgPSBudWxsO1xyXG4gICAgICAgIGlmIChxdWVyeS5zdGFydEF0KSB7XHJcbiAgICAgICAgICAgIHN0YXJ0QXQgPSB0aGlzLmZyb21DdXJzb3IocXVlcnkuc3RhcnRBdCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBlbmRBdCA9IG51bGw7XHJcbiAgICAgICAgaWYgKHF1ZXJ5LmVuZEF0KSB7XHJcbiAgICAgICAgICAgIGVuZEF0ID0gdGhpcy5mcm9tQ3Vyc29yKHF1ZXJ5LmVuZEF0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG5ldyBRdWVyeShwYXRoLCBjb2xsZWN0aW9uR3JvdXAsIG9yZGVyQnksIGZpbHRlckJ5LCBsaW1pdCwgTGltaXRUeXBlLkZpcnN0LCBzdGFydEF0LCBlbmRBdCkudG9UYXJnZXQoKTtcclxuICAgIH07XHJcbiAgICBKc29uUHJvdG9TZXJpYWxpemVyLnByb3RvdHlwZS50b0xpc3RlblJlcXVlc3RMYWJlbHMgPSBmdW5jdGlvbiAodGFyZ2V0RGF0YSkge1xyXG4gICAgICAgIHZhciB2YWx1ZSA9IHRoaXMudG9MYWJlbCh0YXJnZXREYXRhLnB1cnBvc2UpO1xyXG4gICAgICAgIGlmICh2YWx1ZSA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICdnb29nLWxpc3Rlbi10YWdzJzogdmFsdWVcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgSnNvblByb3RvU2VyaWFsaXplci5wcm90b3R5cGUudG9MYWJlbCA9IGZ1bmN0aW9uIChwdXJwb3NlKSB7XHJcbiAgICAgICAgc3dpdGNoIChwdXJwb3NlKSB7XHJcbiAgICAgICAgICAgIGNhc2UgVGFyZ2V0UHVycG9zZS5MaXN0ZW46XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgY2FzZSBUYXJnZXRQdXJwb3NlLkV4aXN0ZW5jZUZpbHRlck1pc21hdGNoOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuICdleGlzdGVuY2UtZmlsdGVyLW1pc21hdGNoJztcclxuICAgICAgICAgICAgY2FzZSBUYXJnZXRQdXJwb3NlLkxpbWJvUmVzb2x1dGlvbjpcclxuICAgICAgICAgICAgICAgIHJldHVybiAnbGltYm8tZG9jdW1lbnQnO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhaWwoJ1VucmVjb2duaXplZCBxdWVyeSBwdXJwb3NlOiAnICsgcHVycG9zZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIEpzb25Qcm90b1NlcmlhbGl6ZXIucHJvdG90eXBlLnRvVGFyZ2V0ID0gZnVuY3Rpb24gKHRhcmdldERhdGEpIHtcclxuICAgICAgICB2YXIgcmVzdWx0O1xyXG4gICAgICAgIHZhciB0YXJnZXQgPSB0YXJnZXREYXRhLnRhcmdldDtcclxuICAgICAgICBpZiAodGFyZ2V0LmlzRG9jdW1lbnRRdWVyeSgpKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdCA9IHsgZG9jdW1lbnRzOiB0aGlzLnRvRG9jdW1lbnRzVGFyZ2V0KHRhcmdldCkgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJlc3VsdCA9IHsgcXVlcnk6IHRoaXMudG9RdWVyeVRhcmdldCh0YXJnZXQpIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJlc3VsdC50YXJnZXRJZCA9IHRhcmdldERhdGEudGFyZ2V0SWQ7XHJcbiAgICAgICAgaWYgKHRhcmdldERhdGEucmVzdW1lVG9rZW4ubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICByZXN1bHQucmVzdW1lVG9rZW4gPSB0aGlzLnVuc2FmZUNhc3RQcm90b0J5dGVTdHJpbmcodGFyZ2V0RGF0YS5yZXN1bWVUb2tlbik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9O1xyXG4gICAgSnNvblByb3RvU2VyaWFsaXplci5wcm90b3R5cGUudG9GaWx0ZXIgPSBmdW5jdGlvbiAoZmlsdGVycykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgaWYgKGZpbHRlcnMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIHByb3RvcyA9IGZpbHRlcnMubWFwKGZ1bmN0aW9uIChmaWx0ZXIpIHtcclxuICAgICAgICAgICAgaWYgKGZpbHRlciBpbnN0YW5jZW9mIEZpZWxkRmlsdGVyKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMudG9VbmFyeU9yRmllbGRGaWx0ZXIoZmlsdGVyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWlsKCdVbnJlY29nbml6ZWQgZmlsdGVyOiAnICsgSlNPTi5zdHJpbmdpZnkoZmlsdGVyKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICBpZiAocHJvdG9zLmxlbmd0aCA9PT0gMSkge1xyXG4gICAgICAgICAgICByZXR1cm4gcHJvdG9zWzBdO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4geyBjb21wb3NpdGVGaWx0ZXI6IHsgb3A6ICdBTkQnLCBmaWx0ZXJzOiBwcm90b3MgfSB9O1xyXG4gICAgfTtcclxuICAgIEpzb25Qcm90b1NlcmlhbGl6ZXIucHJvdG90eXBlLmZyb21GaWx0ZXIgPSBmdW5jdGlvbiAoZmlsdGVyKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBpZiAoIWZpbHRlcikge1xyXG4gICAgICAgICAgICByZXR1cm4gW107XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGZpbHRlci51bmFyeUZpbHRlciAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBbdGhpcy5mcm9tVW5hcnlGaWx0ZXIoZmlsdGVyKV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGZpbHRlci5maWVsZEZpbHRlciAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBbdGhpcy5mcm9tRmllbGRGaWx0ZXIoZmlsdGVyKV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGZpbHRlci5jb21wb3NpdGVGaWx0ZXIgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmlsdGVyLmNvbXBvc2l0ZUZpbHRlclxyXG4gICAgICAgICAgICAgICAgLmZpbHRlcnMubWFwKGZ1bmN0aW9uIChmKSB7IHJldHVybiBfdGhpcy5mcm9tRmlsdGVyKGYpOyB9KVxyXG4gICAgICAgICAgICAgICAgLnJlZHVjZShmdW5jdGlvbiAoYWNjdW0sIGN1cnJlbnQpIHsgcmV0dXJuIGFjY3VtLmNvbmNhdChjdXJyZW50KTsgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFpbCgnVW5rbm93biBmaWx0ZXI6ICcgKyBKU09OLnN0cmluZ2lmeShmaWx0ZXIpKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgSnNvblByb3RvU2VyaWFsaXplci5wcm90b3R5cGUudG9PcmRlciA9IGZ1bmN0aW9uIChvcmRlckJ5cykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgaWYgKG9yZGVyQnlzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBvcmRlckJ5cy5tYXAoZnVuY3Rpb24gKG9yZGVyKSB7IHJldHVybiBfdGhpcy50b1Byb3BlcnR5T3JkZXIob3JkZXIpOyB9KTtcclxuICAgIH07XHJcbiAgICBKc29uUHJvdG9TZXJpYWxpemVyLnByb3RvdHlwZS5mcm9tT3JkZXIgPSBmdW5jdGlvbiAob3JkZXJCeXMpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiBvcmRlckJ5cy5tYXAoZnVuY3Rpb24gKG9yZGVyKSB7IHJldHVybiBfdGhpcy5mcm9tUHJvcGVydHlPcmRlcihvcmRlcik7IH0pO1xyXG4gICAgfTtcclxuICAgIEpzb25Qcm90b1NlcmlhbGl6ZXIucHJvdG90eXBlLnRvQ3Vyc29yID0gZnVuY3Rpb24gKGN1cnNvcikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgYmVmb3JlOiBjdXJzb3IuYmVmb3JlLFxyXG4gICAgICAgICAgICB2YWx1ZXM6IGN1cnNvci5wb3NpdGlvbi5tYXAoZnVuY3Rpb24gKGNvbXBvbmVudCkgeyByZXR1cm4gX3RoaXMudG9WYWx1ZShjb21wb25lbnQpOyB9KVxyXG4gICAgICAgIH07XHJcbiAgICB9O1xyXG4gICAgSnNvblByb3RvU2VyaWFsaXplci5wcm90b3R5cGUuZnJvbUN1cnNvciA9IGZ1bmN0aW9uIChjdXJzb3IpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhciBiZWZvcmUgPSAhIWN1cnNvci5iZWZvcmU7XHJcbiAgICAgICAgdmFyIHBvc2l0aW9uID0gY3Vyc29yLnZhbHVlcy5tYXAoZnVuY3Rpb24gKGNvbXBvbmVudCkgeyByZXR1cm4gX3RoaXMuZnJvbVZhbHVlKGNvbXBvbmVudCk7IH0pO1xyXG4gICAgICAgIHJldHVybiBuZXcgQm91bmQocG9zaXRpb24sIGJlZm9yZSk7XHJcbiAgICB9O1xyXG4gICAgLy8gdmlzaWJsZSBmb3IgdGVzdGluZ1xyXG4gICAgSnNvblByb3RvU2VyaWFsaXplci5wcm90b3R5cGUudG9EaXJlY3Rpb24gPSBmdW5jdGlvbiAoZGlyKSB7XHJcbiAgICAgICAgcmV0dXJuIERJUkVDVElPTlNbZGlyLm5hbWVdO1xyXG4gICAgfTtcclxuICAgIC8vIHZpc2libGUgZm9yIHRlc3RpbmdcclxuICAgIEpzb25Qcm90b1NlcmlhbGl6ZXIucHJvdG90eXBlLmZyb21EaXJlY3Rpb24gPSBmdW5jdGlvbiAoZGlyKSB7XHJcbiAgICAgICAgc3dpdGNoIChkaXIpIHtcclxuICAgICAgICAgICAgY2FzZSAnQVNDRU5ESU5HJzpcclxuICAgICAgICAgICAgICAgIHJldHVybiBEaXJlY3Rpb24uQVNDRU5ESU5HO1xyXG4gICAgICAgICAgICBjYXNlICdERVNDRU5ESU5HJzpcclxuICAgICAgICAgICAgICAgIHJldHVybiBEaXJlY3Rpb24uREVTQ0VORElORztcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8vIHZpc2libGUgZm9yIHRlc3RpbmdcclxuICAgIEpzb25Qcm90b1NlcmlhbGl6ZXIucHJvdG90eXBlLnRvT3BlcmF0b3JOYW1lID0gZnVuY3Rpb24gKG9wKSB7XHJcbiAgICAgICAgcmV0dXJuIE9QRVJBVE9SU1tvcC5uYW1lXTtcclxuICAgIH07XHJcbiAgICBKc29uUHJvdG9TZXJpYWxpemVyLnByb3RvdHlwZS5mcm9tT3BlcmF0b3JOYW1lID0gZnVuY3Rpb24gKG9wKSB7XHJcbiAgICAgICAgc3dpdGNoIChvcCkge1xyXG4gICAgICAgICAgICBjYXNlICdFUVVBTCc6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gT3BlcmF0b3IuRVFVQUw7XHJcbiAgICAgICAgICAgIGNhc2UgJ0dSRUFURVJfVEhBTic6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gT3BlcmF0b3IuR1JFQVRFUl9USEFOO1xyXG4gICAgICAgICAgICBjYXNlICdHUkVBVEVSX1RIQU5fT1JfRVFVQUwnOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIE9wZXJhdG9yLkdSRUFURVJfVEhBTl9PUl9FUVVBTDtcclxuICAgICAgICAgICAgY2FzZSAnTEVTU19USEFOJzpcclxuICAgICAgICAgICAgICAgIHJldHVybiBPcGVyYXRvci5MRVNTX1RIQU47XHJcbiAgICAgICAgICAgIGNhc2UgJ0xFU1NfVEhBTl9PUl9FUVVBTCc6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gT3BlcmF0b3IuTEVTU19USEFOX09SX0VRVUFMO1xyXG4gICAgICAgICAgICBjYXNlICdBUlJBWV9DT05UQUlOUyc6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gT3BlcmF0b3IuQVJSQVlfQ09OVEFJTlM7XHJcbiAgICAgICAgICAgIGNhc2UgJ0lOJzpcclxuICAgICAgICAgICAgICAgIHJldHVybiBPcGVyYXRvci5JTjtcclxuICAgICAgICAgICAgY2FzZSAnQVJSQVlfQ09OVEFJTlNfQU5ZJzpcclxuICAgICAgICAgICAgICAgIHJldHVybiBPcGVyYXRvci5BUlJBWV9DT05UQUlOU19BTlk7XHJcbiAgICAgICAgICAgIGNhc2UgJ09QRVJBVE9SX1VOU1BFQ0lGSUVEJzpcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWlsKCdVbnNwZWNpZmllZCBvcGVyYXRvcicpO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhaWwoJ1Vua25vd24gb3BlcmF0b3InKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgSnNvblByb3RvU2VyaWFsaXplci5wcm90b3R5cGUudG9GaWVsZFBhdGhSZWZlcmVuY2UgPSBmdW5jdGlvbiAocGF0aCkge1xyXG4gICAgICAgIHJldHVybiB7IGZpZWxkUGF0aDogcGF0aC5jYW5vbmljYWxTdHJpbmcoKSB9O1xyXG4gICAgfTtcclxuICAgIEpzb25Qcm90b1NlcmlhbGl6ZXIucHJvdG90eXBlLmZyb21GaWVsZFBhdGhSZWZlcmVuY2UgPSBmdW5jdGlvbiAoZmllbGRSZWZlcmVuY2UpIHtcclxuICAgICAgICByZXR1cm4gRmllbGRQYXRoLmZyb21TZXJ2ZXJGb3JtYXQoZmllbGRSZWZlcmVuY2UuZmllbGRQYXRoKTtcclxuICAgIH07XHJcbiAgICAvLyB2aXNpYmxlIGZvciB0ZXN0aW5nXHJcbiAgICBKc29uUHJvdG9TZXJpYWxpemVyLnByb3RvdHlwZS50b1Byb3BlcnR5T3JkZXIgPSBmdW5jdGlvbiAob3JkZXJCeSkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGZpZWxkOiB0aGlzLnRvRmllbGRQYXRoUmVmZXJlbmNlKG9yZGVyQnkuZmllbGQpLFxyXG4gICAgICAgICAgICBkaXJlY3Rpb246IHRoaXMudG9EaXJlY3Rpb24ob3JkZXJCeS5kaXIpXHJcbiAgICAgICAgfTtcclxuICAgIH07XHJcbiAgICBKc29uUHJvdG9TZXJpYWxpemVyLnByb3RvdHlwZS5mcm9tUHJvcGVydHlPcmRlciA9IGZ1bmN0aW9uIChvcmRlckJ5KSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBPcmRlckJ5KHRoaXMuZnJvbUZpZWxkUGF0aFJlZmVyZW5jZShvcmRlckJ5LmZpZWxkKSwgdGhpcy5mcm9tRGlyZWN0aW9uKG9yZGVyQnkuZGlyZWN0aW9uKSk7XHJcbiAgICB9O1xyXG4gICAgSnNvblByb3RvU2VyaWFsaXplci5wcm90b3R5cGUuZnJvbUZpZWxkRmlsdGVyID0gZnVuY3Rpb24gKGZpbHRlcikge1xyXG4gICAgICAgIHJldHVybiBGaWVsZEZpbHRlci5jcmVhdGUodGhpcy5mcm9tRmllbGRQYXRoUmVmZXJlbmNlKGZpbHRlci5maWVsZEZpbHRlci5maWVsZCksIHRoaXMuZnJvbU9wZXJhdG9yTmFtZShmaWx0ZXIuZmllbGRGaWx0ZXIub3ApLCB0aGlzLmZyb21WYWx1ZShmaWx0ZXIuZmllbGRGaWx0ZXIudmFsdWUpKTtcclxuICAgIH07XHJcbiAgICAvLyB2aXNpYmxlIGZvciB0ZXN0aW5nXHJcbiAgICBKc29uUHJvdG9TZXJpYWxpemVyLnByb3RvdHlwZS50b1VuYXJ5T3JGaWVsZEZpbHRlciA9IGZ1bmN0aW9uIChmaWx0ZXIpIHtcclxuICAgICAgICBpZiAoZmlsdGVyLm9wID09PSBPcGVyYXRvci5FUVVBTCkge1xyXG4gICAgICAgICAgICBpZiAoZmlsdGVyLnZhbHVlLmlzRXF1YWwoRG91YmxlVmFsdWUuTkFOKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICAgICB1bmFyeUZpbHRlcjoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWVsZDogdGhpcy50b0ZpZWxkUGF0aFJlZmVyZW5jZShmaWx0ZXIuZmllbGQpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvcDogJ0lTX05BTidcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGZpbHRlci52YWx1ZS5pc0VxdWFsKE51bGxWYWx1ZS5JTlNUQU5DRSkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdW5hcnlGaWx0ZXI6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmllbGQ6IHRoaXMudG9GaWVsZFBhdGhSZWZlcmVuY2UoZmlsdGVyLmZpZWxkKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3A6ICdJU19OVUxMJ1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgZmllbGRGaWx0ZXI6IHtcclxuICAgICAgICAgICAgICAgIGZpZWxkOiB0aGlzLnRvRmllbGRQYXRoUmVmZXJlbmNlKGZpbHRlci5maWVsZCksXHJcbiAgICAgICAgICAgICAgICBvcDogdGhpcy50b09wZXJhdG9yTmFtZShmaWx0ZXIub3ApLFxyXG4gICAgICAgICAgICAgICAgdmFsdWU6IHRoaXMudG9WYWx1ZShmaWx0ZXIudmFsdWUpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfTtcclxuICAgIEpzb25Qcm90b1NlcmlhbGl6ZXIucHJvdG90eXBlLmZyb21VbmFyeUZpbHRlciA9IGZ1bmN0aW9uIChmaWx0ZXIpIHtcclxuICAgICAgICBzd2l0Y2ggKGZpbHRlci51bmFyeUZpbHRlci5vcCkge1xyXG4gICAgICAgICAgICBjYXNlICdJU19OQU4nOlxyXG4gICAgICAgICAgICAgICAgdmFyIG5hbkZpZWxkID0gdGhpcy5mcm9tRmllbGRQYXRoUmVmZXJlbmNlKGZpbHRlci51bmFyeUZpbHRlci5maWVsZCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gRmllbGRGaWx0ZXIuY3JlYXRlKG5hbkZpZWxkLCBPcGVyYXRvci5FUVVBTCwgRG91YmxlVmFsdWUuTkFOKTtcclxuICAgICAgICAgICAgY2FzZSAnSVNfTlVMTCc6XHJcbiAgICAgICAgICAgICAgICB2YXIgbnVsbEZpZWxkID0gdGhpcy5mcm9tRmllbGRQYXRoUmVmZXJlbmNlKGZpbHRlci51bmFyeUZpbHRlci5maWVsZCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gRmllbGRGaWx0ZXIuY3JlYXRlKG51bGxGaWVsZCwgT3BlcmF0b3IuRVFVQUwsIE51bGxWYWx1ZS5JTlNUQU5DRSk7XHJcbiAgICAgICAgICAgIGNhc2UgJ09QRVJBVE9SX1VOU1BFQ0lGSUVEJzpcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWlsKCdVbnNwZWNpZmllZCBmaWx0ZXInKTtcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWlsKCdVbmtub3duIGZpbHRlcicpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBKc29uUHJvdG9TZXJpYWxpemVyLnByb3RvdHlwZS50b0RvY3VtZW50TWFzayA9IGZ1bmN0aW9uIChmaWVsZE1hc2spIHtcclxuICAgICAgICB2YXIgY2Fub25pY2FsRmllbGRzID0gW107XHJcbiAgICAgICAgZmllbGRNYXNrLmZpZWxkcy5mb3JFYWNoKGZ1bmN0aW9uIChmaWVsZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gY2Fub25pY2FsRmllbGRzLnB1c2goZmllbGQuY2Fub25pY2FsU3RyaW5nKCkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGZpZWxkUGF0aHM6IGNhbm9uaWNhbEZpZWxkc1xyXG4gICAgICAgIH07XHJcbiAgICB9O1xyXG4gICAgSnNvblByb3RvU2VyaWFsaXplci5wcm90b3R5cGUuZnJvbURvY3VtZW50TWFzayA9IGZ1bmN0aW9uIChwcm90bykge1xyXG4gICAgICAgIHZhciBwYXRocyA9IHByb3RvLmZpZWxkUGF0aHMgfHwgW107XHJcbiAgICAgICAgdmFyIGZpZWxkcyA9IHBhdGhzLm1hcChmdW5jdGlvbiAocGF0aCkgeyByZXR1cm4gRmllbGRQYXRoLmZyb21TZXJ2ZXJGb3JtYXQocGF0aCk7IH0pO1xyXG4gICAgICAgIHJldHVybiBGaWVsZE1hc2suZnJvbUFycmF5KGZpZWxkcyk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEpzb25Qcm90b1NlcmlhbGl6ZXI7XHJcbn0oKSk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogSG9sZHMgdGhlIGxpc3RlbmVycyBhbmQgdGhlIGxhc3QgcmVjZWl2ZWQgVmlld1NuYXBzaG90IGZvciBhIHF1ZXJ5IGJlaW5nXHJcbiAqIHRyYWNrZWQgYnkgRXZlbnRNYW5hZ2VyLlxyXG4gKi9cclxudmFyIFF1ZXJ5TGlzdGVuZXJzSW5mbyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFF1ZXJ5TGlzdGVuZXJzSW5mbygpIHtcclxuICAgICAgICB0aGlzLnZpZXdTbmFwID0gbnVsbDtcclxuICAgICAgICB0aGlzLnRhcmdldElkID0gMDtcclxuICAgICAgICB0aGlzLmxpc3RlbmVycyA9IFtdO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIFF1ZXJ5TGlzdGVuZXJzSW5mbztcclxufSgpKTtcclxuLyoqXHJcbiAqIEV2ZW50TWFuYWdlciBpcyByZXNwb25zaWJsZSBmb3IgbWFwcGluZyBxdWVyaWVzIHRvIHF1ZXJ5IGV2ZW50IGVtaXR0ZXJzLlxyXG4gKiBJdCBoYW5kbGVzIFwiZmFuLW91dFwiLiAtLSBJZGVudGljYWwgcXVlcmllcyB3aWxsIHJlLXVzZSB0aGUgc2FtZSB3YXRjaCBvbiB0aGVcclxuICogYmFja2VuZC5cclxuICovXHJcbnZhciBFdmVudE1hbmFnZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBFdmVudE1hbmFnZXIoc3luY0VuZ2luZSkge1xyXG4gICAgICAgIHRoaXMuc3luY0VuZ2luZSA9IHN5bmNFbmdpbmU7XHJcbiAgICAgICAgdGhpcy5xdWVyaWVzID0gbmV3IE9iamVjdE1hcChmdW5jdGlvbiAocSkge1xyXG4gICAgICAgICAgICByZXR1cm4gcS5jYW5vbmljYWxJZCgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMub25saW5lU3RhdGUgPSBPbmxpbmVTdGF0ZS5Vbmtub3duO1xyXG4gICAgICAgIHRoaXMuc25hcHNob3RzSW5TeW5jTGlzdGVuZXJzID0gbmV3IFNldCgpO1xyXG4gICAgICAgIHRoaXMuc3luY0VuZ2luZS5zdWJzY3JpYmUodGhpcyk7XHJcbiAgICB9XHJcbiAgICBFdmVudE1hbmFnZXIucHJvdG90eXBlLmxpc3RlbiA9IGZ1bmN0aW9uIChsaXN0ZW5lcikge1xyXG4gICAgICAgIHZhciBxdWVyeSA9IGxpc3RlbmVyLnF1ZXJ5O1xyXG4gICAgICAgIHZhciBmaXJzdExpc3RlbiA9IGZhbHNlO1xyXG4gICAgICAgIHZhciBxdWVyeUluZm8gPSB0aGlzLnF1ZXJpZXMuZ2V0KHF1ZXJ5KTtcclxuICAgICAgICBpZiAoIXF1ZXJ5SW5mbykge1xyXG4gICAgICAgICAgICBmaXJzdExpc3RlbiA9IHRydWU7XHJcbiAgICAgICAgICAgIHF1ZXJ5SW5mbyA9IG5ldyBRdWVyeUxpc3RlbmVyc0luZm8oKTtcclxuICAgICAgICAgICAgdGhpcy5xdWVyaWVzLnNldChxdWVyeSwgcXVlcnlJbmZvKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcXVlcnlJbmZvLmxpc3RlbmVycy5wdXNoKGxpc3RlbmVyKTtcclxuICAgICAgICAvLyBSdW4gZ2xvYmFsIHNuYXBzaG90IGxpc3RlbmVycyBpZiBhIGNvbnNpc3RlbnQgc25hcHNob3QgaGFzIGJlZW4gZW1pdHRlZC5cclxuICAgICAgICB2YXIgcmFpc2VkRXZlbnQgPSBsaXN0ZW5lci5hcHBseU9ubGluZVN0YXRlQ2hhbmdlKHRoaXMub25saW5lU3RhdGUpO1xyXG4gICAgICAgIGFzc2VydCghcmFpc2VkRXZlbnQsIFwiYXBwbHlPbmxpbmVTdGF0ZUNoYW5nZSgpIHNob3VsZG4ndCByYWlzZSBhbiBldmVudCBmb3IgYnJhbmQtbmV3IGxpc3RlbmVycy5cIik7XHJcbiAgICAgICAgaWYgKHF1ZXJ5SW5mby52aWV3U25hcCkge1xyXG4gICAgICAgICAgICB2YXIgcmFpc2VkRXZlbnRfMSA9IGxpc3RlbmVyLm9uVmlld1NuYXBzaG90KHF1ZXJ5SW5mby52aWV3U25hcCk7XHJcbiAgICAgICAgICAgIGlmIChyYWlzZWRFdmVudF8xKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJhaXNlU25hcHNob3RzSW5TeW5jRXZlbnQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZmlyc3RMaXN0ZW4pIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3luY0VuZ2luZS5saXN0ZW4ocXVlcnkpLnRoZW4oZnVuY3Rpb24gKHRhcmdldElkKSB7XHJcbiAgICAgICAgICAgICAgICBxdWVyeUluZm8udGFyZ2V0SWQgPSB0YXJnZXRJZDtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0YXJnZXRJZDtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHF1ZXJ5SW5mby50YXJnZXRJZCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIEV2ZW50TWFuYWdlci5wcm90b3R5cGUudW5saXN0ZW4gPSBmdW5jdGlvbiAobGlzdGVuZXIpIHtcclxuICAgICAgICByZXR1cm4gdHNsaWIuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBxdWVyeSwgbGFzdExpc3RlbiwgcXVlcnlJbmZvLCBpO1xyXG4gICAgICAgICAgICByZXR1cm4gdHNsaWIuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBxdWVyeSA9IGxpc3RlbmVyLnF1ZXJ5O1xyXG4gICAgICAgICAgICAgICAgbGFzdExpc3RlbiA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgcXVlcnlJbmZvID0gdGhpcy5xdWVyaWVzLmdldChxdWVyeSk7XHJcbiAgICAgICAgICAgICAgICBpZiAocXVlcnlJbmZvKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaSA9IHF1ZXJ5SW5mby5saXN0ZW5lcnMuaW5kZXhPZihsaXN0ZW5lcik7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGkgPj0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBxdWVyeUluZm8ubGlzdGVuZXJzLnNwbGljZShpLCAxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGFzdExpc3RlbiA9IHF1ZXJ5SW5mby5saXN0ZW5lcnMubGVuZ3RoID09PSAwO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChsYXN0TGlzdGVuKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5xdWVyaWVzLmRlbGV0ZShxdWVyeSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMuc3luY0VuZ2luZS51bmxpc3RlbihxdWVyeSldO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBFdmVudE1hbmFnZXIucHJvdG90eXBlLm9uV2F0Y2hDaGFuZ2UgPSBmdW5jdGlvbiAodmlld1NuYXBzKSB7XHJcbiAgICAgICAgdmFyIHJhaXNlZEV2ZW50ID0gZmFsc2U7XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCB2aWV3U25hcHNfMSA9IHZpZXdTbmFwczsgX2kgPCB2aWV3U25hcHNfMS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgdmFyIHZpZXdTbmFwID0gdmlld1NuYXBzXzFbX2ldO1xyXG4gICAgICAgICAgICB2YXIgcXVlcnkgPSB2aWV3U25hcC5xdWVyeTtcclxuICAgICAgICAgICAgdmFyIHF1ZXJ5SW5mbyA9IHRoaXMucXVlcmllcy5nZXQocXVlcnkpO1xyXG4gICAgICAgICAgICBpZiAocXVlcnlJbmZvKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBfYSA9IDAsIF9iID0gcXVlcnlJbmZvLmxpc3RlbmVyczsgX2EgPCBfYi5sZW5ndGg7IF9hKyspIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbGlzdGVuZXIgPSBfYltfYV07XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGxpc3RlbmVyLm9uVmlld1NuYXBzaG90KHZpZXdTbmFwKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByYWlzZWRFdmVudCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcXVlcnlJbmZvLnZpZXdTbmFwID0gdmlld1NuYXA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHJhaXNlZEV2ZW50KSB7XHJcbiAgICAgICAgICAgIHRoaXMucmFpc2VTbmFwc2hvdHNJblN5bmNFdmVudCgpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBFdmVudE1hbmFnZXIucHJvdG90eXBlLm9uV2F0Y2hFcnJvciA9IGZ1bmN0aW9uIChxdWVyeSwgZXJyb3IpIHtcclxuICAgICAgICB2YXIgcXVlcnlJbmZvID0gdGhpcy5xdWVyaWVzLmdldChxdWVyeSk7XHJcbiAgICAgICAgaWYgKHF1ZXJ5SW5mbykge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gcXVlcnlJbmZvLmxpc3RlbmVyczsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgICAgIHZhciBsaXN0ZW5lciA9IF9hW19pXTtcclxuICAgICAgICAgICAgICAgIGxpc3RlbmVyLm9uRXJyb3IoZXJyb3IpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFJlbW92ZSBhbGwgbGlzdGVuZXJzLiBOT1RFOiBXZSBkb24ndCBuZWVkIHRvIGNhbGwgc3luY0VuZ2luZS51bmxpc3RlbigpXHJcbiAgICAgICAgLy8gYWZ0ZXIgYW4gZXJyb3IuXHJcbiAgICAgICAgdGhpcy5xdWVyaWVzLmRlbGV0ZShxdWVyeSk7XHJcbiAgICB9O1xyXG4gICAgRXZlbnRNYW5hZ2VyLnByb3RvdHlwZS5vbk9ubGluZVN0YXRlQ2hhbmdlID0gZnVuY3Rpb24gKG9ubGluZVN0YXRlKSB7XHJcbiAgICAgICAgdGhpcy5vbmxpbmVTdGF0ZSA9IG9ubGluZVN0YXRlO1xyXG4gICAgICAgIHZhciByYWlzZWRFdmVudCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMucXVlcmllcy5mb3JFYWNoKGZ1bmN0aW9uIChfLCBxdWVyeUluZm8pIHtcclxuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHF1ZXJ5SW5mby5saXN0ZW5lcnM7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbGlzdGVuZXIgPSBfYVtfaV07XHJcbiAgICAgICAgICAgICAgICAvLyBSdW4gZ2xvYmFsIHNuYXBzaG90IGxpc3RlbmVycyBpZiBhIGNvbnNpc3RlbnQgc25hcHNob3QgaGFzIGJlZW4gZW1pdHRlZC5cclxuICAgICAgICAgICAgICAgIGlmIChsaXN0ZW5lci5hcHBseU9ubGluZVN0YXRlQ2hhbmdlKG9ubGluZVN0YXRlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJhaXNlZEV2ZW50ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGlmIChyYWlzZWRFdmVudCkge1xyXG4gICAgICAgICAgICB0aGlzLnJhaXNlU25hcHNob3RzSW5TeW5jRXZlbnQoKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgRXZlbnRNYW5hZ2VyLnByb3RvdHlwZS5hZGRTbmFwc2hvdHNJblN5bmNMaXN0ZW5lciA9IGZ1bmN0aW9uIChvYnNlcnZlcikge1xyXG4gICAgICAgIHRoaXMuc25hcHNob3RzSW5TeW5jTGlzdGVuZXJzLmFkZChvYnNlcnZlcik7XHJcbiAgICAgICAgLy8gSW1tZWRpYXRlbHkgZmlyZSBhbiBpbml0aWFsIGV2ZW50LCBpbmRpY2F0aW5nIGFsbCBleGlzdGluZyBsaXN0ZW5lcnNcclxuICAgICAgICAvLyBhcmUgaW4tc3luYy5cclxuICAgICAgICBvYnNlcnZlci5uZXh0KCk7XHJcbiAgICB9O1xyXG4gICAgRXZlbnRNYW5hZ2VyLnByb3RvdHlwZS5yZW1vdmVTbmFwc2hvdHNJblN5bmNMaXN0ZW5lciA9IGZ1bmN0aW9uIChvYnNlcnZlcikge1xyXG4gICAgICAgIHRoaXMuc25hcHNob3RzSW5TeW5jTGlzdGVuZXJzLmRlbGV0ZShvYnNlcnZlcik7XHJcbiAgICB9O1xyXG4gICAgLy8gQ2FsbCBhbGwgZ2xvYmFsIHNuYXBzaG90IGxpc3RlbmVycyB0aGF0IGhhdmUgYmVlbiBzZXQuXHJcbiAgICBFdmVudE1hbmFnZXIucHJvdG90eXBlLnJhaXNlU25hcHNob3RzSW5TeW5jRXZlbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5zbmFwc2hvdHNJblN5bmNMaXN0ZW5lcnMuZm9yRWFjaChmdW5jdGlvbiAob2JzZXJ2ZXIpIHtcclxuICAgICAgICAgICAgb2JzZXJ2ZXIubmV4dCgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBFdmVudE1hbmFnZXI7XHJcbn0oKSk7XHJcbi8qKlxyXG4gKiBRdWVyeUxpc3RlbmVyIHRha2VzIGEgc2VyaWVzIG9mIGludGVybmFsIHZpZXcgc25hcHNob3RzIGFuZCBkZXRlcm1pbmVzXHJcbiAqIHdoZW4gdG8gcmFpc2UgdGhlIGV2ZW50LlxyXG4gKlxyXG4gKiBJdCB1c2VzIGFuIE9ic2VydmVyIHRvIGRpc3BhdGNoIGV2ZW50cy5cclxuICovXHJcbnZhciBRdWVyeUxpc3RlbmVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gUXVlcnlMaXN0ZW5lcihxdWVyeSwgcXVlcnlPYnNlcnZlciwgb3B0aW9ucykge1xyXG4gICAgICAgIHRoaXMucXVlcnkgPSBxdWVyeTtcclxuICAgICAgICB0aGlzLnF1ZXJ5T2JzZXJ2ZXIgPSBxdWVyeU9ic2VydmVyO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEluaXRpYWwgc25hcHNob3RzIChlLmcuIGZyb20gY2FjaGUpIG1heSBub3QgYmUgcHJvcGFnYXRlZCB0byB0aGUgd3JhcHBlZFxyXG4gICAgICAgICAqIG9ic2VydmVyLiBUaGlzIGZsYWcgaXMgc2V0IHRvIHRydWUgb25jZSB3ZSd2ZSBhY3R1YWxseSByYWlzZWQgYW4gZXZlbnQuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5yYWlzZWRJbml0aWFsRXZlbnQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLnNuYXAgPSBudWxsO1xyXG4gICAgICAgIHRoaXMub25saW5lU3RhdGUgPSBPbmxpbmVTdGF0ZS5Vbmtub3duO1xyXG4gICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnMgfHwge307XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEFwcGxpZXMgdGhlIG5ldyBWaWV3U25hcHNob3QgdG8gdGhpcyBsaXN0ZW5lciwgcmFpc2luZyBhIHVzZXItZmFjaW5nIGV2ZW50XHJcbiAgICAgKiBpZiBhcHBsaWNhYmxlIChkZXBlbmRpbmcgb24gd2hhdCBjaGFuZ2VkLCB3aGV0aGVyIHRoZSB1c2VyIGhhcyBvcHRlZCBpbnRvXHJcbiAgICAgKiBtZXRhZGF0YS1vbmx5IGNoYW5nZXMsIGV0Yy4pLiBSZXR1cm5zIHRydWUgaWYgYSB1c2VyLWZhY2luZyBldmVudCB3YXNcclxuICAgICAqIGluZGVlZCByYWlzZWQuXHJcbiAgICAgKi9cclxuICAgIFF1ZXJ5TGlzdGVuZXIucHJvdG90eXBlLm9uVmlld1NuYXBzaG90ID0gZnVuY3Rpb24gKHNuYXApIHtcclxuICAgICAgICBhc3NlcnQoc25hcC5kb2NDaGFuZ2VzLmxlbmd0aCA+IDAgfHwgc25hcC5zeW5jU3RhdGVDaGFuZ2VkLCAnV2UgZ290IGEgbmV3IHNuYXBzaG90IHdpdGggbm8gY2hhbmdlcz8nKTtcclxuICAgICAgICBpZiAoIXRoaXMub3B0aW9ucy5pbmNsdWRlTWV0YWRhdGFDaGFuZ2VzKSB7XHJcbiAgICAgICAgICAgIC8vIFJlbW92ZSB0aGUgbWV0YWRhdGEgb25seSBjaGFuZ2VzLlxyXG4gICAgICAgICAgICB2YXIgZG9jQ2hhbmdlcyA9IFtdO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gc25hcC5kb2NDaGFuZ2VzOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGRvY0NoYW5nZSA9IF9hW19pXTtcclxuICAgICAgICAgICAgICAgIGlmIChkb2NDaGFuZ2UudHlwZSAhPT0gQ2hhbmdlVHlwZS5NZXRhZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRvY0NoYW5nZXMucHVzaChkb2NDaGFuZ2UpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHNuYXAgPSBuZXcgVmlld1NuYXBzaG90KHNuYXAucXVlcnksIHNuYXAuZG9jcywgc25hcC5vbGREb2NzLCBkb2NDaGFuZ2VzLCBzbmFwLm11dGF0ZWRLZXlzLCBzbmFwLmZyb21DYWNoZSwgc25hcC5zeW5jU3RhdGVDaGFuZ2VkLCBcclxuICAgICAgICAgICAgLyogZXhjbHVkZXNNZXRhZGF0YUNoYW5nZXM9ICovIHRydWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgcmFpc2VkRXZlbnQgPSBmYWxzZTtcclxuICAgICAgICBpZiAoIXRoaXMucmFpc2VkSW5pdGlhbEV2ZW50KSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNob3VsZFJhaXNlSW5pdGlhbEV2ZW50KHNuYXAsIHRoaXMub25saW5lU3RhdGUpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJhaXNlSW5pdGlhbEV2ZW50KHNuYXApO1xyXG4gICAgICAgICAgICAgICAgcmFpc2VkRXZlbnQgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHRoaXMuc2hvdWxkUmFpc2VFdmVudChzbmFwKSkge1xyXG4gICAgICAgICAgICB0aGlzLnF1ZXJ5T2JzZXJ2ZXIubmV4dChzbmFwKTtcclxuICAgICAgICAgICAgcmFpc2VkRXZlbnQgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnNuYXAgPSBzbmFwO1xyXG4gICAgICAgIHJldHVybiByYWlzZWRFdmVudDtcclxuICAgIH07XHJcbiAgICBRdWVyeUxpc3RlbmVyLnByb3RvdHlwZS5vbkVycm9yID0gZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICAgICAgdGhpcy5xdWVyeU9ic2VydmVyLmVycm9yKGVycm9yKTtcclxuICAgIH07XHJcbiAgICAvKiogUmV0dXJucyB3aGV0aGVyIGEgc25hcHNob3Qgd2FzIHJhaXNlZC4gKi9cclxuICAgIFF1ZXJ5TGlzdGVuZXIucHJvdG90eXBlLmFwcGx5T25saW5lU3RhdGVDaGFuZ2UgPSBmdW5jdGlvbiAob25saW5lU3RhdGUpIHtcclxuICAgICAgICB0aGlzLm9ubGluZVN0YXRlID0gb25saW5lU3RhdGU7XHJcbiAgICAgICAgdmFyIHJhaXNlZEV2ZW50ID0gZmFsc2U7XHJcbiAgICAgICAgaWYgKHRoaXMuc25hcCAmJlxyXG4gICAgICAgICAgICAhdGhpcy5yYWlzZWRJbml0aWFsRXZlbnQgJiZcclxuICAgICAgICAgICAgdGhpcy5zaG91bGRSYWlzZUluaXRpYWxFdmVudCh0aGlzLnNuYXAsIG9ubGluZVN0YXRlKSkge1xyXG4gICAgICAgICAgICB0aGlzLnJhaXNlSW5pdGlhbEV2ZW50KHRoaXMuc25hcCk7XHJcbiAgICAgICAgICAgIHJhaXNlZEV2ZW50ID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJhaXNlZEV2ZW50O1xyXG4gICAgfTtcclxuICAgIFF1ZXJ5TGlzdGVuZXIucHJvdG90eXBlLnNob3VsZFJhaXNlSW5pdGlhbEV2ZW50ID0gZnVuY3Rpb24gKHNuYXAsIG9ubGluZVN0YXRlKSB7XHJcbiAgICAgICAgYXNzZXJ0KCF0aGlzLnJhaXNlZEluaXRpYWxFdmVudCwgJ0RldGVybWluaW5nIHdoZXRoZXIgdG8gcmFpc2UgZmlyc3QgZXZlbnQgYnV0IGFscmVhZHkgaGFkIGZpcnN0IGV2ZW50Jyk7XHJcbiAgICAgICAgLy8gQWx3YXlzIHJhaXNlIHRoZSBmaXJzdCBldmVudCB3aGVuIHdlJ3JlIHN5bmNlZFxyXG4gICAgICAgIGlmICghc25hcC5mcm9tQ2FjaGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIE5PVEU6IFdlIGNvbnNpZGVyIE9ubGluZVN0YXRlLlVua25vd24gYXMgb25saW5lIChpdCBzaG91bGQgYmVjb21lIE9mZmxpbmVcclxuICAgICAgICAvLyBvciBPbmxpbmUgaWYgd2Ugd2FpdCBsb25nIGVub3VnaCkuXHJcbiAgICAgICAgdmFyIG1heWJlT25saW5lID0gb25saW5lU3RhdGUgIT09IE9ubGluZVN0YXRlLk9mZmxpbmU7XHJcbiAgICAgICAgLy8gRG9uJ3QgcmFpc2UgdGhlIGV2ZW50IGlmIHdlJ3JlIG9ubGluZSwgYXJlbid0IHN5bmNlZCB5ZXQgKGNoZWNrZWRcclxuICAgICAgICAvLyBhYm92ZSkgYW5kIGFyZSB3YWl0aW5nIGZvciBhIHN5bmMuXHJcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy53YWl0Rm9yU3luY1doZW5PbmxpbmUgJiYgbWF5YmVPbmxpbmUpIHtcclxuICAgICAgICAgICAgYXNzZXJ0KHNuYXAuZnJvbUNhY2hlLCAnV2FpdGluZyBmb3Igc3luYywgYnV0IHNuYXBzaG90IGlzIG5vdCBmcm9tIGNhY2hlJyk7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gUmFpc2UgZGF0YSBmcm9tIGNhY2hlIGlmIHdlIGhhdmUgYW55IGRvY3VtZW50cyBvciB3ZSBhcmUgb2ZmbGluZVxyXG4gICAgICAgIHJldHVybiAhc25hcC5kb2NzLmlzRW1wdHkoKSB8fCBvbmxpbmVTdGF0ZSA9PT0gT25saW5lU3RhdGUuT2ZmbGluZTtcclxuICAgIH07XHJcbiAgICBRdWVyeUxpc3RlbmVyLnByb3RvdHlwZS5zaG91bGRSYWlzZUV2ZW50ID0gZnVuY3Rpb24gKHNuYXApIHtcclxuICAgICAgICAvLyBXZSBkb24ndCBuZWVkIHRvIGhhbmRsZSBpbmNsdWRlRG9jdW1lbnRNZXRhZGF0YUNoYW5nZXMgaGVyZSBiZWNhdXNlXHJcbiAgICAgICAgLy8gdGhlIE1ldGFkYXRhIG9ubHkgY2hhbmdlcyBoYXZlIGFscmVhZHkgYmVlbiBzdHJpcHBlZCBvdXQgaWYgbmVlZGVkLlxyXG4gICAgICAgIC8vIEF0IHRoaXMgcG9pbnQgdGhlIG9ubHkgY2hhbmdlcyB3ZSB3aWxsIHNlZSBhcmUgdGhlIG9uZXMgd2Ugc2hvdWxkXHJcbiAgICAgICAgLy8gcHJvcGFnYXRlLlxyXG4gICAgICAgIGlmIChzbmFwLmRvY0NoYW5nZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGhhc1BlbmRpbmdXcml0ZXNDaGFuZ2VkID0gdGhpcy5zbmFwICYmIHRoaXMuc25hcC5oYXNQZW5kaW5nV3JpdGVzICE9PSBzbmFwLmhhc1BlbmRpbmdXcml0ZXM7XHJcbiAgICAgICAgaWYgKHNuYXAuc3luY1N0YXRlQ2hhbmdlZCB8fCBoYXNQZW5kaW5nV3JpdGVzQ2hhbmdlZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zLmluY2x1ZGVNZXRhZGF0YUNoYW5nZXMgPT09IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIEdlbmVyYWxseSB3ZSBzaG91bGQgaGF2ZSBoaXQgb25lIG9mIHRoZSBjYXNlcyBhYm92ZSwgYnV0IGl0J3MgcG9zc2libGVcclxuICAgICAgICAvLyB0byBnZXQgaGVyZSBpZiB0aGVyZSB3ZXJlIG9ubHkgbWV0YWRhdGEgZG9jQ2hhbmdlcyBhbmQgdGhleSBnb3RcclxuICAgICAgICAvLyBzdHJpcHBlZCBvdXQuXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfTtcclxuICAgIFF1ZXJ5TGlzdGVuZXIucHJvdG90eXBlLnJhaXNlSW5pdGlhbEV2ZW50ID0gZnVuY3Rpb24gKHNuYXApIHtcclxuICAgICAgICBhc3NlcnQoIXRoaXMucmFpc2VkSW5pdGlhbEV2ZW50LCAnVHJ5aW5nIHRvIHJhaXNlIGluaXRpYWwgZXZlbnRzIGZvciBzZWNvbmQgdGltZScpO1xyXG4gICAgICAgIHNuYXAgPSBWaWV3U25hcHNob3QuZnJvbUluaXRpYWxEb2N1bWVudHMoc25hcC5xdWVyeSwgc25hcC5kb2NzLCBzbmFwLm11dGF0ZWRLZXlzLCBzbmFwLmZyb21DYWNoZSk7XHJcbiAgICAgICAgdGhpcy5yYWlzZWRJbml0aWFsRXZlbnQgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMucXVlcnlPYnNlcnZlci5uZXh0KHNuYXApO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBRdWVyeUxpc3RlbmVyO1xyXG59KCkpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEEgc2V0IG9mIGNoYW5nZXMgdG8gd2hhdCBkb2N1bWVudHMgYXJlIGN1cnJlbnRseSBpbiB2aWV3IGFuZCBvdXQgb2YgdmlldyBmb3JcclxuICogYSBnaXZlbiBxdWVyeS4gVGhlc2UgY2hhbmdlcyBhcmUgc2VudCB0byB0aGUgTG9jYWxTdG9yZSBieSB0aGUgVmlldyAodmlhXHJcbiAqIHRoZSBTeW5jRW5naW5lKSBhbmQgYXJlIHVzZWQgdG8gcGluIC8gdW5waW4gZG9jdW1lbnRzIGFzIGFwcHJvcHJpYXRlLlxyXG4gKi9cclxudmFyIExvY2FsVmlld0NoYW5nZXMgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBMb2NhbFZpZXdDaGFuZ2VzKHRhcmdldElkLCBmcm9tQ2FjaGUsIGFkZGVkS2V5cywgcmVtb3ZlZEtleXMpIHtcclxuICAgICAgICB0aGlzLnRhcmdldElkID0gdGFyZ2V0SWQ7XHJcbiAgICAgICAgdGhpcy5mcm9tQ2FjaGUgPSBmcm9tQ2FjaGU7XHJcbiAgICAgICAgdGhpcy5hZGRlZEtleXMgPSBhZGRlZEtleXM7XHJcbiAgICAgICAgdGhpcy5yZW1vdmVkS2V5cyA9IHJlbW92ZWRLZXlzO1xyXG4gICAgfVxyXG4gICAgTG9jYWxWaWV3Q2hhbmdlcy5mcm9tU25hcHNob3QgPSBmdW5jdGlvbiAodGFyZ2V0SWQsIHZpZXdTbmFwc2hvdCkge1xyXG4gICAgICAgIHZhciBhZGRlZEtleXMgPSBkb2N1bWVudEtleVNldCgpO1xyXG4gICAgICAgIHZhciByZW1vdmVkS2V5cyA9IGRvY3VtZW50S2V5U2V0KCk7XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHZpZXdTbmFwc2hvdC5kb2NDaGFuZ2VzOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICB2YXIgZG9jQ2hhbmdlID0gX2FbX2ldO1xyXG4gICAgICAgICAgICBzd2l0Y2ggKGRvY0NoYW5nZS50eXBlKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIENoYW5nZVR5cGUuQWRkZWQ6XHJcbiAgICAgICAgICAgICAgICAgICAgYWRkZWRLZXlzID0gYWRkZWRLZXlzLmFkZChkb2NDaGFuZ2UuZG9jLmtleSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIENoYW5nZVR5cGUuUmVtb3ZlZDpcclxuICAgICAgICAgICAgICAgICAgICByZW1vdmVkS2V5cyA9IHJlbW92ZWRLZXlzLmFkZChkb2NDaGFuZ2UuZG9jLmtleSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAvLyBkbyBub3RoaW5nXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG5ldyBMb2NhbFZpZXdDaGFuZ2VzKHRhcmdldElkLCB2aWV3U25hcHNob3QuZnJvbUNhY2hlLCBhZGRlZEtleXMsIHJlbW92ZWRLZXlzKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gTG9jYWxWaWV3Q2hhbmdlcztcclxufSgpKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnZhciBBZGRlZExpbWJvRG9jdW1lbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBBZGRlZExpbWJvRG9jdW1lbnQoa2V5KSB7XHJcbiAgICAgICAgdGhpcy5rZXkgPSBrZXk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gQWRkZWRMaW1ib0RvY3VtZW50O1xyXG59KCkpO1xyXG52YXIgUmVtb3ZlZExpbWJvRG9jdW1lbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBSZW1vdmVkTGltYm9Eb2N1bWVudChrZXkpIHtcclxuICAgICAgICB0aGlzLmtleSA9IGtleTtcclxuICAgIH1cclxuICAgIHJldHVybiBSZW1vdmVkTGltYm9Eb2N1bWVudDtcclxufSgpKTtcclxuLyoqXHJcbiAqIFZpZXcgaXMgcmVzcG9uc2libGUgZm9yIGNvbXB1dGluZyB0aGUgZmluYWwgbWVyZ2VkIHRydXRoIG9mIHdoYXQgZG9jcyBhcmUgaW5cclxuICogYSBxdWVyeS4gSXQgZ2V0cyBub3RpZmllZCBvZiBsb2NhbCBhbmQgcmVtb3RlIGNoYW5nZXMgdG8gZG9jcywgYW5kIGFwcGxpZXNcclxuICogdGhlIHF1ZXJ5IGZpbHRlcnMgYW5kIGxpbWl0cyB0byBkZXRlcm1pbmUgdGhlIG1vc3QgY29ycmVjdCBwb3NzaWJsZSByZXN1bHRzLlxyXG4gKi9cclxudmFyIFZpZXcgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBWaWV3KHF1ZXJ5LCBcclxuICAgIC8qKiBEb2N1bWVudHMgaW5jbHVkZWQgaW4gdGhlIHJlbW90ZSB0YXJnZXQgKi9cclxuICAgIF9zeW5jZWREb2N1bWVudHMpIHtcclxuICAgICAgICB0aGlzLnF1ZXJ5ID0gcXVlcnk7XHJcbiAgICAgICAgdGhpcy5fc3luY2VkRG9jdW1lbnRzID0gX3N5bmNlZERvY3VtZW50cztcclxuICAgICAgICB0aGlzLnN5bmNTdGF0ZSA9IG51bGw7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQSBmbGFnIHdoZXRoZXIgdGhlIHZpZXcgaXMgY3VycmVudCB3aXRoIHRoZSBiYWNrZW5kLiBBIHZpZXcgaXMgY29uc2lkZXJlZFxyXG4gICAgICAgICAqIGN1cnJlbnQgYWZ0ZXIgaXQgaGFzIHNlZW4gdGhlIGN1cnJlbnQgZmxhZyBmcm9tIHRoZSBiYWNrZW5kIGFuZCBkaWQgbm90XHJcbiAgICAgICAgICogbG9zZSBjb25zaXN0ZW5jeSB3aXRoaW4gdGhlIHdhdGNoIHN0cmVhbSAoZS5nLiBiZWNhdXNlIG9mIGFuIGV4aXN0ZW5jZVxyXG4gICAgICAgICAqIGZpbHRlciBtaXNtYXRjaCkuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5jdXJyZW50ID0gZmFsc2U7XHJcbiAgICAgICAgLyoqIERvY3VtZW50cyBpbiB0aGUgdmlldyBidXQgbm90IGluIHRoZSByZW1vdGUgdGFyZ2V0ICovXHJcbiAgICAgICAgdGhpcy5saW1ib0RvY3VtZW50cyA9IGRvY3VtZW50S2V5U2V0KCk7XHJcbiAgICAgICAgLyoqIERvY3VtZW50IEtleXMgdGhhdCBoYXZlIGxvY2FsIGNoYW5nZXMgKi9cclxuICAgICAgICB0aGlzLm11dGF0ZWRLZXlzID0gZG9jdW1lbnRLZXlTZXQoKTtcclxuICAgICAgICB0aGlzLmRvY3VtZW50U2V0ID0gbmV3IERvY3VtZW50U2V0KHF1ZXJ5LmRvY0NvbXBhcmF0b3IuYmluZChxdWVyeSkpO1xyXG4gICAgfVxyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFZpZXcucHJvdG90eXBlLCBcInN5bmNlZERvY3VtZW50c1wiLCB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVGhlIHNldCBvZiByZW1vdGUgZG9jdW1lbnRzIHRoYXQgdGhlIHNlcnZlciBoYXMgdG9sZCB1cyBiZWxvbmdzIHRvIHRoZSB0YXJnZXQgYXNzb2NpYXRlZCB3aXRoXHJcbiAgICAgICAgICogdGhpcyB2aWV3LlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fc3luY2VkRG9jdW1lbnRzO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgLyoqXHJcbiAgICAgKiBJdGVyYXRlcyBvdmVyIGEgc2V0IG9mIGRvYyBjaGFuZ2VzLCBhcHBsaWVzIHRoZSBxdWVyeSBsaW1pdCwgYW5kIGNvbXB1dGVzXHJcbiAgICAgKiB3aGF0IHRoZSBuZXcgcmVzdWx0cyBzaG91bGQgYmUsIHdoYXQgdGhlIGNoYW5nZXMgd2VyZSwgYW5kIHdoZXRoZXIgd2UgbWF5XHJcbiAgICAgKiBuZWVkIHRvIGdvIGJhY2sgdG8gdGhlIGxvY2FsIGNhY2hlIGZvciBtb3JlIHJlc3VsdHMuIERvZXMgbm90IG1ha2UgYW55XHJcbiAgICAgKiBjaGFuZ2VzIHRvIHRoZSB2aWV3LlxyXG4gICAgICogQHBhcmFtIGRvY0NoYW5nZXMgVGhlIGRvYyBjaGFuZ2VzIHRvIGFwcGx5IHRvIHRoaXMgdmlldy5cclxuICAgICAqIEBwYXJhbSBwcmV2aW91c0NoYW5nZXMgSWYgdGhpcyBpcyBiZWluZyBjYWxsZWQgd2l0aCBhIHJlZmlsbCwgdGhlbiBzdGFydFxyXG4gICAgICogICAgICAgIHdpdGggdGhpcyBzZXQgb2YgZG9jcyBhbmQgY2hhbmdlcyBpbnN0ZWFkIG9mIHRoZSBjdXJyZW50IHZpZXcuXHJcbiAgICAgKiBAcmV0dXJuIGEgbmV3IHNldCBvZiBkb2NzLCBjaGFuZ2VzLCBhbmQgcmVmaWxsIGZsYWcuXHJcbiAgICAgKi9cclxuICAgIFZpZXcucHJvdG90eXBlLmNvbXB1dGVEb2NDaGFuZ2VzID0gZnVuY3Rpb24gKGRvY0NoYW5nZXMsIHByZXZpb3VzQ2hhbmdlcykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIGNoYW5nZVNldCA9IHByZXZpb3VzQ2hhbmdlc1xyXG4gICAgICAgICAgICA/IHByZXZpb3VzQ2hhbmdlcy5jaGFuZ2VTZXRcclxuICAgICAgICAgICAgOiBuZXcgRG9jdW1lbnRDaGFuZ2VTZXQoKTtcclxuICAgICAgICB2YXIgb2xkRG9jdW1lbnRTZXQgPSBwcmV2aW91c0NoYW5nZXNcclxuICAgICAgICAgICAgPyBwcmV2aW91c0NoYW5nZXMuZG9jdW1lbnRTZXRcclxuICAgICAgICAgICAgOiB0aGlzLmRvY3VtZW50U2V0O1xyXG4gICAgICAgIHZhciBuZXdNdXRhdGVkS2V5cyA9IHByZXZpb3VzQ2hhbmdlc1xyXG4gICAgICAgICAgICA/IHByZXZpb3VzQ2hhbmdlcy5tdXRhdGVkS2V5c1xyXG4gICAgICAgICAgICA6IHRoaXMubXV0YXRlZEtleXM7XHJcbiAgICAgICAgdmFyIG5ld0RvY3VtZW50U2V0ID0gb2xkRG9jdW1lbnRTZXQ7XHJcbiAgICAgICAgdmFyIG5lZWRzUmVmaWxsID0gZmFsc2U7XHJcbiAgICAgICAgLy8gVHJhY2sgdGhlIGxhc3QgZG9jIGluIGEgKGZ1bGwpIGxpbWl0LiBUaGlzIGlzIG5lY2Vzc2FyeSwgYmVjYXVzZSBzb21lXHJcbiAgICAgICAgLy8gdXBkYXRlIChhIGRlbGV0ZSwgb3IgYW4gdXBkYXRlIG1vdmluZyBhIGRvYyBwYXN0IHRoZSBvbGQgbGltaXQpIG1pZ2h0XHJcbiAgICAgICAgLy8gbWVhbiB0aGVyZSBpcyBzb21lIG90aGVyIGRvY3VtZW50IGluIHRoZSBsb2NhbCBjYWNoZSB0aGF0IGVpdGhlciBzaG91bGRcclxuICAgICAgICAvLyBjb21lICgxKSBiZXR3ZWVuIHRoZSBvbGQgbGFzdCBsaW1pdCBkb2MgYW5kIHRoZSBuZXcgbGFzdCBkb2N1bWVudCwgaW4gdGhlXHJcbiAgICAgICAgLy8gY2FzZSBvZiB1cGRhdGVzLCBvciAoMikgYWZ0ZXIgdGhlIG5ldyBsYXN0IGRvY3VtZW50LCBpbiB0aGUgY2FzZSBvZlxyXG4gICAgICAgIC8vIGRlbGV0ZXMuIFNvIHdlIGtlZXAgdGhpcyBkb2MgYXQgdGhlIG9sZCBsaW1pdCB0byBjb21wYXJlIHRoZSB1cGRhdGVzIHRvLlxyXG4gICAgICAgIC8vXHJcbiAgICAgICAgLy8gTm90ZSB0aGF0IHRoaXMgc2hvdWxkIG5ldmVyIGdldCB1c2VkIGluIGEgcmVmaWxsICh3aGVuIHByZXZpb3VzQ2hhbmdlcyBpc1xyXG4gICAgICAgIC8vIHNldCksIGJlY2F1c2UgdGhlcmUgd2lsbCBvbmx5IGJlIGFkZHMgLS0gbm8gZGVsZXRlcyBvciB1cGRhdGVzLlxyXG4gICAgICAgIHZhciBsYXN0RG9jSW5MaW1pdCA9IHRoaXMucXVlcnkuaGFzTGltaXRUb0ZpcnN0KCkgJiYgb2xkRG9jdW1lbnRTZXQuc2l6ZSA9PT0gdGhpcy5xdWVyeS5saW1pdFxyXG4gICAgICAgICAgICA/IG9sZERvY3VtZW50U2V0Lmxhc3QoKVxyXG4gICAgICAgICAgICA6IG51bGw7XHJcbiAgICAgICAgdmFyIGZpcnN0RG9jSW5MaW1pdCA9IHRoaXMucXVlcnkuaGFzTGltaXRUb0xhc3QoKSAmJiBvbGREb2N1bWVudFNldC5zaXplID09PSB0aGlzLnF1ZXJ5LmxpbWl0XHJcbiAgICAgICAgICAgID8gb2xkRG9jdW1lbnRTZXQuZmlyc3QoKVxyXG4gICAgICAgICAgICA6IG51bGw7XHJcbiAgICAgICAgZG9jQ2hhbmdlcy5pbm9yZGVyVHJhdmVyc2FsKGZ1bmN0aW9uIChrZXksIG5ld01heWJlRG9jKSB7XHJcbiAgICAgICAgICAgIHZhciBvbGREb2MgPSBvbGREb2N1bWVudFNldC5nZXQoa2V5KTtcclxuICAgICAgICAgICAgdmFyIG5ld0RvYyA9IG5ld01heWJlRG9jIGluc3RhbmNlb2YgRG9jdW1lbnQgPyBuZXdNYXliZURvYyA6IG51bGw7XHJcbiAgICAgICAgICAgIGlmIChuZXdEb2MpIHtcclxuICAgICAgICAgICAgICAgIGFzc2VydChrZXkuaXNFcXVhbChuZXdEb2Mua2V5KSwgJ01pc21hdGNoaW5nIGtleXMgZm91bmQgaW4gZG9jdW1lbnQgY2hhbmdlczogJyArXHJcbiAgICAgICAgICAgICAgICAgICAga2V5ICtcclxuICAgICAgICAgICAgICAgICAgICAnICE9ICcgK1xyXG4gICAgICAgICAgICAgICAgICAgIG5ld0RvYy5rZXkpO1xyXG4gICAgICAgICAgICAgICAgbmV3RG9jID0gX3RoaXMucXVlcnkubWF0Y2hlcyhuZXdEb2MpID8gbmV3RG9jIDogbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgb2xkRG9jSGFkUGVuZGluZ011dGF0aW9ucyA9IG9sZERvY1xyXG4gICAgICAgICAgICAgICAgPyBfdGhpcy5tdXRhdGVkS2V5cy5oYXMob2xkRG9jLmtleSlcclxuICAgICAgICAgICAgICAgIDogZmFsc2U7XHJcbiAgICAgICAgICAgIHZhciBuZXdEb2NIYXNQZW5kaW5nTXV0YXRpb25zID0gbmV3RG9jXHJcbiAgICAgICAgICAgICAgICA/IG5ld0RvYy5oYXNMb2NhbE11dGF0aW9ucyB8fFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFdlIG9ubHkgY29uc2lkZXIgY29tbWl0dGVkIG11dGF0aW9ucyBmb3IgZG9jdW1lbnRzIHRoYXQgd2VyZVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIG11dGF0ZWQgZHVyaW5nIHRoZSBsaWZldGltZSBvZiB0aGUgdmlldy5cclxuICAgICAgICAgICAgICAgICAgICAoX3RoaXMubXV0YXRlZEtleXMuaGFzKG5ld0RvYy5rZXkpICYmIG5ld0RvYy5oYXNDb21taXR0ZWRNdXRhdGlvbnMpXHJcbiAgICAgICAgICAgICAgICA6IGZhbHNlO1xyXG4gICAgICAgICAgICB2YXIgY2hhbmdlQXBwbGllZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAvLyBDYWxjdWxhdGUgY2hhbmdlXHJcbiAgICAgICAgICAgIGlmIChvbGREb2MgJiYgbmV3RG9jKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZG9jc0VxdWFsID0gb2xkRG9jLmRhdGEoKS5pc0VxdWFsKG5ld0RvYy5kYXRhKCkpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFkb2NzRXF1YWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIV90aGlzLnNob3VsZFdhaXRGb3JTeW5jZWREb2N1bWVudChvbGREb2MsIG5ld0RvYykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlU2V0LnRyYWNrKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IENoYW5nZVR5cGUuTW9kaWZpZWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2M6IG5ld0RvY1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlQXBwbGllZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgobGFzdERvY0luTGltaXQgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnF1ZXJ5LmRvY0NvbXBhcmF0b3IobmV3RG9jLCBsYXN0RG9jSW5MaW1pdCkgPiAwKSB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKGZpcnN0RG9jSW5MaW1pdCAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnF1ZXJ5LmRvY0NvbXBhcmF0b3IobmV3RG9jLCBmaXJzdERvY0luTGltaXQpIDwgMCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgZG9jIG1vdmVkIGZyb20gaW5zaWRlIHRoZSBsaW1pdCB0byBvdXRzaWRlIHRoZSBsaW1pdC5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoYXQgbWVhbnMgdGhlcmUgbWF5IGJlIHNvbWUgb3RoZXIgZG9jIGluIHRoZSBsb2NhbCBjYWNoZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhhdCBzaG91bGQgYmUgaW5jbHVkZWQgaW5zdGVhZC5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5lZWRzUmVmaWxsID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKG9sZERvY0hhZFBlbmRpbmdNdXRhdGlvbnMgIT09IG5ld0RvY0hhc1BlbmRpbmdNdXRhdGlvbnMpIHtcclxuICAgICAgICAgICAgICAgICAgICBjaGFuZ2VTZXQudHJhY2soeyB0eXBlOiBDaGFuZ2VUeXBlLk1ldGFkYXRhLCBkb2M6IG5ld0RvYyB9KTtcclxuICAgICAgICAgICAgICAgICAgICBjaGFuZ2VBcHBsaWVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmICghb2xkRG9jICYmIG5ld0RvYykge1xyXG4gICAgICAgICAgICAgICAgY2hhbmdlU2V0LnRyYWNrKHsgdHlwZTogQ2hhbmdlVHlwZS5BZGRlZCwgZG9jOiBuZXdEb2MgfSk7XHJcbiAgICAgICAgICAgICAgICBjaGFuZ2VBcHBsaWVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChvbGREb2MgJiYgIW5ld0RvYykge1xyXG4gICAgICAgICAgICAgICAgY2hhbmdlU2V0LnRyYWNrKHsgdHlwZTogQ2hhbmdlVHlwZS5SZW1vdmVkLCBkb2M6IG9sZERvYyB9KTtcclxuICAgICAgICAgICAgICAgIGNoYW5nZUFwcGxpZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgaWYgKGxhc3REb2NJbkxpbWl0IHx8IGZpcnN0RG9jSW5MaW1pdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIEEgZG9jIHdhcyByZW1vdmVkIGZyb20gYSBmdWxsIGxpbWl0IHF1ZXJ5LiBXZSdsbCBuZWVkIHRvXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gcmVxdWVyeSBmcm9tIHRoZSBsb2NhbCBjYWNoZSB0byBzZWUgaWYgd2Uga25vdyBhYm91dCBzb21lIG90aGVyXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gZG9jIHRoYXQgc2hvdWxkIGJlIGluIHRoZSByZXN1bHRzLlxyXG4gICAgICAgICAgICAgICAgICAgIG5lZWRzUmVmaWxsID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoY2hhbmdlQXBwbGllZCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKG5ld0RvYykge1xyXG4gICAgICAgICAgICAgICAgICAgIG5ld0RvY3VtZW50U2V0ID0gbmV3RG9jdW1lbnRTZXQuYWRkKG5ld0RvYyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5ld0RvY0hhc1BlbmRpbmdNdXRhdGlvbnMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3TXV0YXRlZEtleXMgPSBuZXdNdXRhdGVkS2V5cy5hZGQoa2V5KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld011dGF0ZWRLZXlzID0gbmV3TXV0YXRlZEtleXMuZGVsZXRlKGtleSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3RG9jdW1lbnRTZXQgPSBuZXdEb2N1bWVudFNldC5kZWxldGUoa2V5KTtcclxuICAgICAgICAgICAgICAgICAgICBuZXdNdXRhdGVkS2V5cyA9IG5ld011dGF0ZWRLZXlzLmRlbGV0ZShrZXkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gRHJvcCBkb2N1bWVudHMgb3V0IHRvIG1lZXQgbGltaXQvbGltaXRUb0xhc3QgcmVxdWlyZW1lbnQuXHJcbiAgICAgICAgaWYgKHRoaXMucXVlcnkuaGFzTGltaXRUb0ZpcnN0KCkgfHwgdGhpcy5xdWVyeS5oYXNMaW1pdFRvTGFzdCgpKSB7XHJcbiAgICAgICAgICAgIHdoaWxlIChuZXdEb2N1bWVudFNldC5zaXplID4gdGhpcy5xdWVyeS5saW1pdCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG9sZERvYyA9IHRoaXMucXVlcnkuaGFzTGltaXRUb0ZpcnN0KClcclxuICAgICAgICAgICAgICAgICAgICA/IG5ld0RvY3VtZW50U2V0Lmxhc3QoKVxyXG4gICAgICAgICAgICAgICAgICAgIDogbmV3RG9jdW1lbnRTZXQuZmlyc3QoKTtcclxuICAgICAgICAgICAgICAgIG5ld0RvY3VtZW50U2V0ID0gbmV3RG9jdW1lbnRTZXQuZGVsZXRlKG9sZERvYy5rZXkpO1xyXG4gICAgICAgICAgICAgICAgbmV3TXV0YXRlZEtleXMgPSBuZXdNdXRhdGVkS2V5cy5kZWxldGUob2xkRG9jLmtleSk7XHJcbiAgICAgICAgICAgICAgICBjaGFuZ2VTZXQudHJhY2soeyB0eXBlOiBDaGFuZ2VUeXBlLlJlbW92ZWQsIGRvYzogb2xkRG9jIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGFzc2VydCghbmVlZHNSZWZpbGwgfHwgIXByZXZpb3VzQ2hhbmdlcywgJ1ZpZXcgd2FzIHJlZmlsbGVkIHVzaW5nIGRvY3MgdGhhdCB0aGVtc2VsdmVzIG5lZWRlZCByZWZpbGxpbmcuJyk7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgZG9jdW1lbnRTZXQ6IG5ld0RvY3VtZW50U2V0LFxyXG4gICAgICAgICAgICBjaGFuZ2VTZXQ6IGNoYW5nZVNldCxcclxuICAgICAgICAgICAgbmVlZHNSZWZpbGw6IG5lZWRzUmVmaWxsLFxyXG4gICAgICAgICAgICBtdXRhdGVkS2V5czogbmV3TXV0YXRlZEtleXNcclxuICAgICAgICB9O1xyXG4gICAgfTtcclxuICAgIFZpZXcucHJvdG90eXBlLnNob3VsZFdhaXRGb3JTeW5jZWREb2N1bWVudCA9IGZ1bmN0aW9uIChvbGREb2MsIG5ld0RvYykge1xyXG4gICAgICAgIC8vIFdlIHN1cHByZXNzIHRoZSBpbml0aWFsIGNoYW5nZSBldmVudCBmb3IgZG9jdW1lbnRzIHRoYXQgd2VyZSBtb2RpZmllZCBhc1xyXG4gICAgICAgIC8vIHBhcnQgb2YgYSB3cml0ZSBhY2tub3dsZWRnbWVudCAoZS5nLiB3aGVuIHRoZSB2YWx1ZSBvZiBhIHNlcnZlciB0cmFuc2Zvcm1cclxuICAgICAgICAvLyBpcyBhcHBsaWVkKSBhcyBXYXRjaCB3aWxsIHNlbmQgdXMgdGhlIHNhbWUgZG9jdW1lbnQgYWdhaW4uXHJcbiAgICAgICAgLy8gQnkgc3VwcHJlc3NpbmcgdGhlIGV2ZW50LCB3ZSBvbmx5IHJhaXNlIHR3byB1c2VyIHZpc2libGUgZXZlbnRzIChvbmUgd2l0aFxyXG4gICAgICAgIC8vIGBoYXNQZW5kaW5nV3JpdGVzYCBhbmQgdGhlIGZpbmFsIHN0YXRlIG9mIHRoZSBkb2N1bWVudCkgaW5zdGVhZCBvZiB0aHJlZVxyXG4gICAgICAgIC8vIChvbmUgd2l0aCBgaGFzUGVuZGluZ1dyaXRlc2AsIHRoZSBtb2RpZmllZCBkb2N1bWVudCB3aXRoXHJcbiAgICAgICAgLy8gYGhhc1BlbmRpbmdXcml0ZXNgIGFuZCB0aGUgZmluYWwgc3RhdGUgb2YgdGhlIGRvY3VtZW50KS5cclxuICAgICAgICByZXR1cm4gKG9sZERvYy5oYXNMb2NhbE11dGF0aW9ucyAmJlxyXG4gICAgICAgICAgICBuZXdEb2MuaGFzQ29tbWl0dGVkTXV0YXRpb25zICYmXHJcbiAgICAgICAgICAgICFuZXdEb2MuaGFzTG9jYWxNdXRhdGlvbnMpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogVXBkYXRlcyB0aGUgdmlldyB3aXRoIHRoZSBnaXZlbiBWaWV3RG9jdW1lbnRDaGFuZ2VzIGFuZCBvcHRpb25hbGx5IHVwZGF0ZXNcclxuICAgICAqIGxpbWJvIGRvY3MgYW5kIHN5bmMgc3RhdGUgZnJvbSB0aGUgcHJvdmlkZWQgdGFyZ2V0IGNoYW5nZS5cclxuICAgICAqIEBwYXJhbSBkb2NDaGFuZ2VzIFRoZSBzZXQgb2YgY2hhbmdlcyB0byBtYWtlIHRvIHRoZSB2aWV3J3MgZG9jcy5cclxuICAgICAqIEBwYXJhbSB1cGRhdGVMaW1ib0RvY3VtZW50cyBXaGV0aGVyIHRvIHVwZGF0ZSBsaW1ibyBkb2N1bWVudHMgYmFzZWQgb24gdGhpc1xyXG4gICAgICogICAgICAgIGNoYW5nZS5cclxuICAgICAqIEBwYXJhbSB0YXJnZXRDaGFuZ2UgQSB0YXJnZXQgY2hhbmdlIHRvIGFwcGx5IGZvciBjb21wdXRpbmcgbGltYm8gZG9jcyBhbmRcclxuICAgICAqICAgICAgICBzeW5jIHN0YXRlLlxyXG4gICAgICogQHJldHVybiBBIG5ldyBWaWV3Q2hhbmdlIHdpdGggdGhlIGdpdmVuIGRvY3MsIGNoYW5nZXMsIGFuZCBzeW5jIHN0YXRlLlxyXG4gICAgICovXHJcbiAgICAvLyBQT1JUSU5HIE5PVEU6IFRoZSBpT1MvQW5kcm9pZCBjbGllbnRzIGFsd2F5cyBjb21wdXRlIGxpbWJvIGRvY3VtZW50IGNoYW5nZXMuXHJcbiAgICBWaWV3LnByb3RvdHlwZS5hcHBseUNoYW5nZXMgPSBmdW5jdGlvbiAoZG9jQ2hhbmdlcywgdXBkYXRlTGltYm9Eb2N1bWVudHMsIHRhcmdldENoYW5nZSkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgYXNzZXJ0KCFkb2NDaGFuZ2VzLm5lZWRzUmVmaWxsLCAnQ2Fubm90IGFwcGx5IGNoYW5nZXMgdGhhdCBuZWVkIGEgcmVmaWxsJyk7XHJcbiAgICAgICAgdmFyIG9sZERvY3MgPSB0aGlzLmRvY3VtZW50U2V0O1xyXG4gICAgICAgIHRoaXMuZG9jdW1lbnRTZXQgPSBkb2NDaGFuZ2VzLmRvY3VtZW50U2V0O1xyXG4gICAgICAgIHRoaXMubXV0YXRlZEtleXMgPSBkb2NDaGFuZ2VzLm11dGF0ZWRLZXlzO1xyXG4gICAgICAgIC8vIFNvcnQgY2hhbmdlcyBiYXNlZCBvbiB0eXBlIGFuZCBxdWVyeSBjb21wYXJhdG9yXHJcbiAgICAgICAgdmFyIGNoYW5nZXMgPSBkb2NDaGFuZ2VzLmNoYW5nZVNldC5nZXRDaGFuZ2VzKCk7XHJcbiAgICAgICAgY2hhbmdlcy5zb3J0KGZ1bmN0aW9uIChjMSwgYzIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIChjb21wYXJlQ2hhbmdlVHlwZShjMS50eXBlLCBjMi50eXBlKSB8fFxyXG4gICAgICAgICAgICAgICAgX3RoaXMucXVlcnkuZG9jQ29tcGFyYXRvcihjMS5kb2MsIGMyLmRvYykpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuYXBwbHlUYXJnZXRDaGFuZ2UodGFyZ2V0Q2hhbmdlKTtcclxuICAgICAgICB2YXIgbGltYm9DaGFuZ2VzID0gdXBkYXRlTGltYm9Eb2N1bWVudHNcclxuICAgICAgICAgICAgPyB0aGlzLnVwZGF0ZUxpbWJvRG9jdW1lbnRzKClcclxuICAgICAgICAgICAgOiBbXTtcclxuICAgICAgICB2YXIgc3luY2VkID0gdGhpcy5saW1ib0RvY3VtZW50cy5zaXplID09PSAwICYmIHRoaXMuY3VycmVudDtcclxuICAgICAgICB2YXIgbmV3U3luY1N0YXRlID0gc3luY2VkID8gU3luY1N0YXRlLlN5bmNlZCA6IFN5bmNTdGF0ZS5Mb2NhbDtcclxuICAgICAgICB2YXIgc3luY1N0YXRlQ2hhbmdlZCA9IG5ld1N5bmNTdGF0ZSAhPT0gdGhpcy5zeW5jU3RhdGU7XHJcbiAgICAgICAgdGhpcy5zeW5jU3RhdGUgPSBuZXdTeW5jU3RhdGU7XHJcbiAgICAgICAgaWYgKGNoYW5nZXMubGVuZ3RoID09PSAwICYmICFzeW5jU3RhdGVDaGFuZ2VkKSB7XHJcbiAgICAgICAgICAgIC8vIG5vIGNoYW5nZXNcclxuICAgICAgICAgICAgcmV0dXJuIHsgbGltYm9DaGFuZ2VzOiBsaW1ib0NoYW5nZXMgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHZhciBzbmFwID0gbmV3IFZpZXdTbmFwc2hvdCh0aGlzLnF1ZXJ5LCBkb2NDaGFuZ2VzLmRvY3VtZW50U2V0LCBvbGREb2NzLCBjaGFuZ2VzLCBkb2NDaGFuZ2VzLm11dGF0ZWRLZXlzLCBuZXdTeW5jU3RhdGUgPT09IFN5bmNTdGF0ZS5Mb2NhbCwgc3luY1N0YXRlQ2hhbmdlZCwgXHJcbiAgICAgICAgICAgIC8qIGV4Y2x1ZGVzTWV0YWRhdGFDaGFuZ2VzPSAqLyBmYWxzZSk7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBzbmFwc2hvdDogc25hcCxcclxuICAgICAgICAgICAgICAgIGxpbWJvQ2hhbmdlczogbGltYm9DaGFuZ2VzXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQXBwbGllcyBhbiBPbmxpbmVTdGF0ZSBjaGFuZ2UgdG8gdGhlIHZpZXcsIHBvdGVudGlhbGx5IGdlbmVyYXRpbmcgYVxyXG4gICAgICogVmlld0NoYW5nZSBpZiB0aGUgdmlldydzIHN5bmNTdGF0ZSBjaGFuZ2VzIGFzIGEgcmVzdWx0LlxyXG4gICAgICovXHJcbiAgICBWaWV3LnByb3RvdHlwZS5hcHBseU9ubGluZVN0YXRlQ2hhbmdlID0gZnVuY3Rpb24gKG9ubGluZVN0YXRlKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudCAmJiBvbmxpbmVTdGF0ZSA9PT0gT25saW5lU3RhdGUuT2ZmbGluZSkge1xyXG4gICAgICAgICAgICAvLyBJZiB3ZSdyZSBvZmZsaW5lLCBzZXQgYGN1cnJlbnRgIHRvIGZhbHNlIGFuZCB0aGVuIGNhbGwgYXBwbHlDaGFuZ2VzKClcclxuICAgICAgICAgICAgLy8gdG8gcmVmcmVzaCBvdXIgc3luY1N0YXRlIGFuZCBnZW5lcmF0ZSBhIFZpZXdDaGFuZ2UgYXMgYXBwcm9wcmlhdGUuIFdlXHJcbiAgICAgICAgICAgIC8vIGFyZSBndWFyYW50ZWVkIHRvIGdldCBhIG5ldyBUYXJnZXRDaGFuZ2UgdGhhdCBzZXRzIGBjdXJyZW50YCBiYWNrIHRvXHJcbiAgICAgICAgICAgIC8vIHRydWUgb25jZSB0aGUgY2xpZW50IGlzIGJhY2sgb25saW5lLlxyXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnQgPSBmYWxzZTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYXBwbHlDaGFuZ2VzKHtcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50U2V0OiB0aGlzLmRvY3VtZW50U2V0LFxyXG4gICAgICAgICAgICAgICAgY2hhbmdlU2V0OiBuZXcgRG9jdW1lbnRDaGFuZ2VTZXQoKSxcclxuICAgICAgICAgICAgICAgIG11dGF0ZWRLZXlzOiB0aGlzLm11dGF0ZWRLZXlzLFxyXG4gICAgICAgICAgICAgICAgbmVlZHNSZWZpbGw6IGZhbHNlXHJcbiAgICAgICAgICAgIH0sIFxyXG4gICAgICAgICAgICAvKiB1cGRhdGVMaW1ib0RvY3VtZW50cz0gKi8gZmFsc2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gTm8gZWZmZWN0LCBqdXN0IHJldHVybiBhIG5vLW9wIFZpZXdDaGFuZ2UuXHJcbiAgICAgICAgICAgIHJldHVybiB7IGxpbWJvQ2hhbmdlczogW10gfTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHdoZXRoZXIgdGhlIGRvYyBmb3IgdGhlIGdpdmVuIGtleSBzaG91bGQgYmUgaW4gbGltYm8uXHJcbiAgICAgKi9cclxuICAgIFZpZXcucHJvdG90eXBlLnNob3VsZEJlSW5MaW1ibyA9IGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICAvLyBJZiB0aGUgcmVtb3RlIGVuZCBzYXlzIGl0J3MgcGFydCBvZiB0aGlzIHF1ZXJ5LCBpdCdzIG5vdCBpbiBsaW1iby5cclxuICAgICAgICBpZiAodGhpcy5fc3luY2VkRG9jdW1lbnRzLmhhcyhrZXkpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gVGhlIGxvY2FsIHN0b3JlIGRvZXNuJ3QgdGhpbmsgaXQncyBhIHJlc3VsdCwgc28gaXQgc2hvdWxkbid0IGJlIGluIGxpbWJvLlxyXG4gICAgICAgIGlmICghdGhpcy5kb2N1bWVudFNldC5oYXMoa2V5KSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIElmIHRoZXJlIGFyZSBsb2NhbCBjaGFuZ2VzIHRvIHRoZSBkb2MsIHRoZXkgbWlnaHQgZXhwbGFpbiB3aHkgdGhlIHNlcnZlclxyXG4gICAgICAgIC8vIGRvZXNuJ3Qga25vdyB0aGF0IGl0J3MgcGFydCBvZiB0aGUgcXVlcnkuIFNvIGRvbid0IHB1dCBpdCBpbiBsaW1iby5cclxuICAgICAgICAvLyBUT0RPKGtsaW10KTogSWRlYWxseSwgd2Ugd291bGQgb25seSBjb25zaWRlciBjaGFuZ2VzIHRoYXQgbWlnaHQgYWN0dWFsbHlcclxuICAgICAgICAvLyBhZmZlY3QgdGhpcyBzcGVjaWZpYyBxdWVyeS5cclxuICAgICAgICBpZiAodGhpcy5kb2N1bWVudFNldC5nZXQoa2V5KS5oYXNMb2NhbE11dGF0aW9ucykge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIEV2ZXJ5dGhpbmcgZWxzZSBpcyBpbiBsaW1iby5cclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFVwZGF0ZXMgc3luY2VkRG9jdW1lbnRzLCBjdXJyZW50LCBhbmQgbGltYm8gZG9jcyBiYXNlZCBvbiB0aGUgZ2l2ZW4gY2hhbmdlLlxyXG4gICAgICogUmV0dXJucyB0aGUgbGlzdCBvZiBjaGFuZ2VzIHRvIHdoaWNoIGRvY3MgYXJlIGluIGxpbWJvLlxyXG4gICAgICovXHJcbiAgICBWaWV3LnByb3RvdHlwZS5hcHBseVRhcmdldENoYW5nZSA9IGZ1bmN0aW9uICh0YXJnZXRDaGFuZ2UpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIGlmICh0YXJnZXRDaGFuZ2UpIHtcclxuICAgICAgICAgICAgdGFyZ2V0Q2hhbmdlLmFkZGVkRG9jdW1lbnRzLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyByZXR1cm4gKF90aGlzLl9zeW5jZWREb2N1bWVudHMgPSBfdGhpcy5fc3luY2VkRG9jdW1lbnRzLmFkZChrZXkpKTsgfSk7XHJcbiAgICAgICAgICAgIHRhcmdldENoYW5nZS5tb2RpZmllZERvY3VtZW50cy5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBhc3NlcnQoX3RoaXMuX3N5bmNlZERvY3VtZW50cy5oYXMoa2V5KSwgXCJNb2RpZmllZCBkb2N1bWVudCBcIiArIGtleSArIFwiIG5vdCBmb3VuZCBpbiB2aWV3LlwiKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHRhcmdldENoYW5nZS5yZW1vdmVkRG9jdW1lbnRzLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyByZXR1cm4gKF90aGlzLl9zeW5jZWREb2N1bWVudHMgPSBfdGhpcy5fc3luY2VkRG9jdW1lbnRzLmRlbGV0ZShrZXkpKTsgfSk7XHJcbiAgICAgICAgICAgIHRoaXMuY3VycmVudCA9IHRhcmdldENoYW5nZS5jdXJyZW50O1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBWaWV3LnByb3RvdHlwZS51cGRhdGVMaW1ib0RvY3VtZW50cyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIC8vIFdlIGNhbiBvbmx5IGRldGVybWluZSBsaW1ibyBkb2N1bWVudHMgd2hlbiB3ZSdyZSBpbi1zeW5jIHdpdGggdGhlIHNlcnZlci5cclxuICAgICAgICBpZiAoIXRoaXMuY3VycmVudCkge1xyXG4gICAgICAgICAgICByZXR1cm4gW107XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFRPRE8oa2xpbXQpOiBEbyB0aGlzIGluY3JlbWVudGFsbHkgc28gdGhhdCBpdCdzIG5vdCBxdWFkcmF0aWMgd2hlblxyXG4gICAgICAgIC8vIHVwZGF0aW5nIG1hbnkgZG9jdW1lbnRzLlxyXG4gICAgICAgIHZhciBvbGRMaW1ib0RvY3VtZW50cyA9IHRoaXMubGltYm9Eb2N1bWVudHM7XHJcbiAgICAgICAgdGhpcy5saW1ib0RvY3VtZW50cyA9IGRvY3VtZW50S2V5U2V0KCk7XHJcbiAgICAgICAgdGhpcy5kb2N1bWVudFNldC5mb3JFYWNoKGZ1bmN0aW9uIChkb2MpIHtcclxuICAgICAgICAgICAgaWYgKF90aGlzLnNob3VsZEJlSW5MaW1ibyhkb2Mua2V5KSkge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMubGltYm9Eb2N1bWVudHMgPSBfdGhpcy5saW1ib0RvY3VtZW50cy5hZGQoZG9jLmtleSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyBEaWZmIHRoZSBuZXcgbGltYm8gZG9jcyB3aXRoIHRoZSBvbGQgbGltYm8gZG9jcy5cclxuICAgICAgICB2YXIgY2hhbmdlcyA9IFtdO1xyXG4gICAgICAgIG9sZExpbWJvRG9jdW1lbnRzLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgICAgICBpZiAoIV90aGlzLmxpbWJvRG9jdW1lbnRzLmhhcyhrZXkpKSB7XHJcbiAgICAgICAgICAgICAgICBjaGFuZ2VzLnB1c2gobmV3IFJlbW92ZWRMaW1ib0RvY3VtZW50KGtleSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5saW1ib0RvY3VtZW50cy5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICAgICAgaWYgKCFvbGRMaW1ib0RvY3VtZW50cy5oYXMoa2V5KSkge1xyXG4gICAgICAgICAgICAgICAgY2hhbmdlcy5wdXNoKG5ldyBBZGRlZExpbWJvRG9jdW1lbnQoa2V5KSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gY2hhbmdlcztcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFVwZGF0ZSB0aGUgaW4tbWVtb3J5IHN0YXRlIG9mIHRoZSBjdXJyZW50IHZpZXcgd2l0aCB0aGUgc3RhdGUgcmVhZCBmcm9tXHJcbiAgICAgKiBwZXJzaXN0ZW5jZS5cclxuICAgICAqXHJcbiAgICAgKiBXZSB1cGRhdGUgdGhlIHF1ZXJ5IHZpZXcgd2hlbmV2ZXIgYSBjbGllbnQncyBwcmltYXJ5IHN0YXR1cyBjaGFuZ2VzOlxyXG4gICAgICogLSBXaGVuIGEgY2xpZW50IHRyYW5zaXRpb25zIGZyb20gcHJpbWFyeSB0byBzZWNvbmRhcnksIGl0IGNhbiBtaXNzXHJcbiAgICAgKiAgIExvY2FsU3RvcmFnZSB1cGRhdGVzIGFuZCBpdHMgcXVlcnkgdmlld3MgbWF5IHRlbXBvcmFyaWx5IG5vdCBiZVxyXG4gICAgICogICBzeW5jaHJvbml6ZWQgd2l0aCB0aGUgc3RhdGUgb24gZGlzay5cclxuICAgICAqIC0gRm9yIHNlY29uZGFyeSB0byBwcmltYXJ5IHRyYW5zaXRpb25zLCB0aGUgY2xpZW50IG5lZWRzIHRvIHVwZGF0ZSB0aGUgbGlzdFxyXG4gICAgICogICBvZiBgc3luY2VkRG9jdW1lbnRzYCBzaW5jZSBzZWNvbmRhcnkgY2xpZW50cyB1cGRhdGUgdGhlaXIgcXVlcnkgdmlld3NcclxuICAgICAqICAgYmFzZWQgcHVyZWx5IG9uIHN5bnRoZXNpemVkIFJlbW90ZUV2ZW50cy5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gcXVlcnlSZXN1bHQuZG9jdW1lbnRzIC0gVGhlIGRvY3VtZW50cyB0aGF0IG1hdGNoIHRoZSBxdWVyeSBhY2NvcmRpbmdcclxuICAgICAqIHRvIHRoZSBMb2NhbFN0b3JlLlxyXG4gICAgICogQHBhcmFtIHF1ZXJ5UmVzdWx0LnJlbW90ZUtleXMgLSBUaGUga2V5cyBvZiB0aGUgZG9jdW1lbnRzIHRoYXQgbWF0Y2ggdGhlXHJcbiAgICAgKiBxdWVyeSBhY2NvcmRpbmcgdG8gdGhlIGJhY2tlbmQuXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybiBUaGUgVmlld0NoYW5nZSB0aGF0IHJlc3VsdGVkIGZyb20gdGhpcyBzeW5jaHJvbml6YXRpb24uXHJcbiAgICAgKi9cclxuICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktdGFiIG9ubHkuXHJcbiAgICBWaWV3LnByb3RvdHlwZS5zeW5jaHJvbml6ZVdpdGhQZXJzaXN0ZWRTdGF0ZSA9IGZ1bmN0aW9uIChxdWVyeVJlc3VsdCkge1xyXG4gICAgICAgIHRoaXMuX3N5bmNlZERvY3VtZW50cyA9IHF1ZXJ5UmVzdWx0LnJlbW90ZUtleXM7XHJcbiAgICAgICAgdGhpcy5saW1ib0RvY3VtZW50cyA9IGRvY3VtZW50S2V5U2V0KCk7XHJcbiAgICAgICAgdmFyIGRvY0NoYW5nZXMgPSB0aGlzLmNvbXB1dGVEb2NDaGFuZ2VzKHF1ZXJ5UmVzdWx0LmRvY3VtZW50cyk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYXBwbHlDaGFuZ2VzKGRvY0NoYW5nZXMsIC8qdXBkYXRlTGltYm9Eb2N1bWVudHM9Ki8gdHJ1ZSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIGEgdmlldyBzbmFwc2hvdCBhcyBpZiB0aGlzIHF1ZXJ5IHdhcyBqdXN0IGxpc3RlbmVkIHRvLiBDb250YWluc1xyXG4gICAgICogYSBkb2N1bWVudCBhZGQgZm9yIGV2ZXJ5IGV4aXN0aW5nIGRvY3VtZW50IGFuZCB0aGUgYGZyb21DYWNoZWAgYW5kXHJcbiAgICAgKiBgaGFzUGVuZGluZ1dyaXRlc2Agc3RhdHVzIG9mIHRoZSBhbHJlYWR5IGVzdGFibGlzaGVkIHZpZXcuXHJcbiAgICAgKi9cclxuICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktdGFiIG9ubHkuXHJcbiAgICBWaWV3LnByb3RvdHlwZS5jb21wdXRlSW5pdGlhbFNuYXBzaG90ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBWaWV3U25hcHNob3QuZnJvbUluaXRpYWxEb2N1bWVudHModGhpcy5xdWVyeSwgdGhpcy5kb2N1bWVudFNldCwgdGhpcy5tdXRhdGVkS2V5cywgdGhpcy5zeW5jU3RhdGUgPT09IFN5bmNTdGF0ZS5Mb2NhbCk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFZpZXc7XHJcbn0oKSk7XHJcbmZ1bmN0aW9uIGNvbXBhcmVDaGFuZ2VUeXBlKGMxLCBjMikge1xyXG4gICAgdmFyIG9yZGVyID0gZnVuY3Rpb24gKGNoYW5nZSkge1xyXG4gICAgICAgIHN3aXRjaCAoY2hhbmdlKSB7XHJcbiAgICAgICAgICAgIGNhc2UgQ2hhbmdlVHlwZS5BZGRlZDpcclxuICAgICAgICAgICAgICAgIHJldHVybiAxO1xyXG4gICAgICAgICAgICBjYXNlIENoYW5nZVR5cGUuTW9kaWZpZWQ6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gMjtcclxuICAgICAgICAgICAgY2FzZSBDaGFuZ2VUeXBlLk1ldGFkYXRhOlxyXG4gICAgICAgICAgICAgICAgLy8gQSBtZXRhZGF0YSBjaGFuZ2UgaXMgY29udmVydGVkIHRvIGEgbW9kaWZpZWQgY2hhbmdlIGF0IHRoZSBwdWJsaWNcclxuICAgICAgICAgICAgICAgIC8vIGFwaSBsYXllci4gIFNpbmNlIHdlIHNvcnQgYnkgZG9jdW1lbnQga2V5IGFuZCB0aGVuIGNoYW5nZSB0eXBlLFxyXG4gICAgICAgICAgICAgICAgLy8gbWV0YWRhdGEgYW5kIG1vZGlmaWVkIGNoYW5nZXMgbXVzdCBiZSBzb3J0ZWQgZXF1aXZhbGVudGx5LlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIDI7XHJcbiAgICAgICAgICAgIGNhc2UgQ2hhbmdlVHlwZS5SZW1vdmVkOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFpbCgnVW5rbm93biBDaGFuZ2VUeXBlOiAnICsgY2hhbmdlKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIG9yZGVyKGMxKSAtIG9yZGVyKGMyKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxudmFyIFJFVFJZX0NPVU5UID0gNTtcclxuLyoqXHJcbiAqIFRyYW5zYWN0aW9uUnVubmVyIGVuY2Fwc3VsYXRlcyB0aGUgbG9naWMgbmVlZGVkIHRvIHJ1biBhbmQgcmV0cnkgdHJhbnNhY3Rpb25zXHJcbiAqIHdpdGggYmFja29mZi5cclxuICovXHJcbnZhciBUcmFuc2FjdGlvblJ1bm5lciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFRyYW5zYWN0aW9uUnVubmVyKGFzeW5jUXVldWUsIHJlbW90ZVN0b3JlLCB1cGRhdGVGdW5jdGlvbiwgZGVmZXJyZWQpIHtcclxuICAgICAgICB0aGlzLmFzeW5jUXVldWUgPSBhc3luY1F1ZXVlO1xyXG4gICAgICAgIHRoaXMucmVtb3RlU3RvcmUgPSByZW1vdGVTdG9yZTtcclxuICAgICAgICB0aGlzLnVwZGF0ZUZ1bmN0aW9uID0gdXBkYXRlRnVuY3Rpb247XHJcbiAgICAgICAgdGhpcy5kZWZlcnJlZCA9IGRlZmVycmVkO1xyXG4gICAgICAgIHRoaXMucmV0cmllcyA9IFJFVFJZX0NPVU5UO1xyXG4gICAgICAgIHRoaXMuYmFja29mZiA9IG5ldyBFeHBvbmVudGlhbEJhY2tvZmYodGhpcy5hc3luY1F1ZXVlLCBUaW1lcklkLlJldHJ5VHJhbnNhY3Rpb24pO1xyXG4gICAgfVxyXG4gICAgLyoqIFJ1bnMgdGhlIHRyYW5zYWN0aW9uIGFuZCBzZXRzIHRoZSByZXN1bHQgb24gZGVmZXJyZWQuICovXHJcbiAgICBUcmFuc2FjdGlvblJ1bm5lci5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMucnVuV2l0aEJhY2tPZmYoKTtcclxuICAgIH07XHJcbiAgICBUcmFuc2FjdGlvblJ1bm5lci5wcm90b3R5cGUucnVuV2l0aEJhY2tPZmYgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB0aGlzLmJhY2tvZmYuYmFja29mZkFuZFJ1bihmdW5jdGlvbiAoKSB7IHJldHVybiB0c2xpYi5fX2F3YWl0ZXIoX3RoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciB0cmFuc2FjdGlvbiwgdXNlclByb21pc2U7XHJcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYi5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uID0gdGhpcy5yZW1vdGVTdG9yZS5jcmVhdGVUcmFuc2FjdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgdXNlclByb21pc2UgPSB0aGlzLnRyeVJ1blVwZGF0ZUZ1bmN0aW9uKHRyYW5zYWN0aW9uKTtcclxuICAgICAgICAgICAgICAgIGlmICh1c2VyUHJvbWlzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHVzZXJQcm9taXNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cmFuc2FjdGlvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jb21taXQoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5kZWZlcnJlZC5yZXNvbHZlKHJlc3VsdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbiAoY29tbWl0RXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5oYW5kbGVUcmFuc2FjdGlvbkVycm9yKGNvbW1pdEVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKHVzZXJQcm9taXNlRXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuaGFuZGxlVHJhbnNhY3Rpb25FcnJvcih1c2VyUHJvbWlzZUVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7IH0pO1xyXG4gICAgfTtcclxuICAgIFRyYW5zYWN0aW9uUnVubmVyLnByb3RvdHlwZS50cnlSdW5VcGRhdGVGdW5jdGlvbiA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbikge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHZhciB1c2VyUHJvbWlzZSA9IHRoaXMudXBkYXRlRnVuY3Rpb24odHJhbnNhY3Rpb24pO1xyXG4gICAgICAgICAgICBpZiAoaXNOdWxsT3JVbmRlZmluZWQodXNlclByb21pc2UpIHx8XHJcbiAgICAgICAgICAgICAgICAhdXNlclByb21pc2UuY2F0Y2ggfHxcclxuICAgICAgICAgICAgICAgICF1c2VyUHJvbWlzZS50aGVuKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRlZmVycmVkLnJlamVjdChFcnJvcignVHJhbnNhY3Rpb24gY2FsbGJhY2sgbXVzdCByZXR1cm4gYSBQcm9taXNlJykpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHVzZXJQcm9taXNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgLy8gRG8gbm90IHJldHJ5IGVycm9ycyB0aHJvd24gYnkgdXNlciBwcm92aWRlZCB1cGRhdGVGdW5jdGlvbi5cclxuICAgICAgICAgICAgdGhpcy5kZWZlcnJlZC5yZWplY3QoZXJyb3IpO1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgVHJhbnNhY3Rpb25SdW5uZXIucHJvdG90eXBlLmhhbmRsZVRyYW5zYWN0aW9uRXJyb3IgPSBmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIGlmICh0aGlzLnJldHJpZXMgPiAwICYmIHRoaXMuaXNSZXRyeWFibGVUcmFuc2FjdGlvbkVycm9yKGVycm9yKSkge1xyXG4gICAgICAgICAgICB0aGlzLnJldHJpZXMgLT0gMTtcclxuICAgICAgICAgICAgdGhpcy5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMucnVuV2l0aEJhY2tPZmYoKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmRlZmVycmVkLnJlamVjdChlcnJvcik7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFRyYW5zYWN0aW9uUnVubmVyLnByb3RvdHlwZS5pc1JldHJ5YWJsZVRyYW5zYWN0aW9uRXJyb3IgPSBmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICBpZiAoZXJyb3IubmFtZSA9PT0gJ0ZpcmViYXNlRXJyb3InKSB7XHJcbiAgICAgICAgICAgIC8vIEluIHRyYW5zYWN0aW9ucywgdGhlIGJhY2tlbmQgd2lsbCBmYWlsIG91dGRhdGVkIHJlYWRzIHdpdGggRkFJTEVEX1BSRUNPTkRJVElPTiBhbmRcclxuICAgICAgICAgICAgLy8gbm9uLW1hdGNoaW5nIGRvY3VtZW50IHZlcnNpb25zIHdpdGggQUJPUlRFRC4gVGhlc2UgZXJyb3JzIHNob3VsZCBiZSByZXRyaWVkLlxyXG4gICAgICAgICAgICB2YXIgY29kZSA9IGVycm9yLmNvZGU7XHJcbiAgICAgICAgICAgIHJldHVybiAoY29kZSA9PT0gJ2Fib3J0ZWQnIHx8XHJcbiAgICAgICAgICAgICAgICBjb2RlID09PSAnZmFpbGVkLXByZWNvbmRpdGlvbicgfHxcclxuICAgICAgICAgICAgICAgICFpc1Blcm1hbmVudEVycm9yKGNvZGUpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBUcmFuc2FjdGlvblJ1bm5lcjtcclxufSgpKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnZhciBMT0dfVEFHJDkgPSAnU3luY0VuZ2luZSc7XHJcbi8qKlxyXG4gKiBRdWVyeVZpZXcgY29udGFpbnMgYWxsIG9mIHRoZSBkYXRhIHRoYXQgU3luY0VuZ2luZSBuZWVkcyB0byBrZWVwIHRyYWNrIG9mIGZvclxyXG4gKiBhIHBhcnRpY3VsYXIgcXVlcnkuXHJcbiAqL1xyXG52YXIgUXVlcnlWaWV3ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gUXVlcnlWaWV3KFxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgcXVlcnkgaXRzZWxmLlxyXG4gICAgICovXHJcbiAgICBxdWVyeSwgXHJcbiAgICAvKipcclxuICAgICAqIFRoZSB0YXJnZXQgbnVtYmVyIGNyZWF0ZWQgYnkgdGhlIGNsaWVudCB0aGF0IGlzIHVzZWQgaW4gdGhlIHdhdGNoXHJcbiAgICAgKiBzdHJlYW0gdG8gaWRlbnRpZnkgdGhpcyBxdWVyeS5cclxuICAgICAqL1xyXG4gICAgdGFyZ2V0SWQsIFxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgdmlldyBpcyByZXNwb25zaWJsZSBmb3IgY29tcHV0aW5nIHRoZSBmaW5hbCBtZXJnZWQgdHJ1dGggb2Ygd2hhdFxyXG4gICAgICogZG9jcyBhcmUgaW4gdGhlIHF1ZXJ5LiBJdCBnZXRzIG5vdGlmaWVkIG9mIGxvY2FsIGFuZCByZW1vdGUgY2hhbmdlcyxcclxuICAgICAqIGFuZCBhcHBsaWVzIHRoZSBxdWVyeSBmaWx0ZXJzIGFuZCBsaW1pdHMgdG8gZGV0ZXJtaW5lIHRoZSBtb3N0IGNvcnJlY3RcclxuICAgICAqIHBvc3NpYmxlIHJlc3VsdHMuXHJcbiAgICAgKi9cclxuICAgIHZpZXcpIHtcclxuICAgICAgICB0aGlzLnF1ZXJ5ID0gcXVlcnk7XHJcbiAgICAgICAgdGhpcy50YXJnZXRJZCA9IHRhcmdldElkO1xyXG4gICAgICAgIHRoaXMudmlldyA9IHZpZXc7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gUXVlcnlWaWV3O1xyXG59KCkpO1xyXG4vKiogVHJhY2tzIGEgbGltYm8gcmVzb2x1dGlvbi4gKi9cclxudmFyIExpbWJvUmVzb2x1dGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIExpbWJvUmVzb2x1dGlvbihrZXkpIHtcclxuICAgICAgICB0aGlzLmtleSA9IGtleTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBTZXQgdG8gdHJ1ZSBvbmNlIHdlJ3ZlIHJlY2VpdmVkIGEgZG9jdW1lbnQuIFRoaXMgaXMgdXNlZCBpblxyXG4gICAgICAgICAqIGdldFJlbW90ZUtleXNGb3JUYXJnZXQoKSBhbmQgdWx0aW1hdGVseSB1c2VkIGJ5IFdhdGNoQ2hhbmdlQWdncmVnYXRvciB0b1xyXG4gICAgICAgICAqIGRlY2lkZSB3aGV0aGVyIGl0IG5lZWRzIHRvIG1hbnVmYWN0dXJlIGEgZGVsZXRlIGV2ZW50IGZvciB0aGUgdGFyZ2V0IG9uY2VcclxuICAgICAgICAgKiB0aGUgdGFyZ2V0IGlzIENVUlJFTlQuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5yZWNlaXZlZERvY3VtZW50ID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gTGltYm9SZXNvbHV0aW9uO1xyXG59KCkpO1xyXG4vKipcclxuICogU3luY0VuZ2luZSBpcyB0aGUgY2VudHJhbCBjb250cm9sbGVyIGluIHRoZSBjbGllbnQgU0RLIGFyY2hpdGVjdHVyZS4gSXQgaXNcclxuICogdGhlIGdsdWUgY29kZSBiZXR3ZWVuIHRoZSBFdmVudE1hbmFnZXIsIExvY2FsU3RvcmUsIGFuZCBSZW1vdGVTdG9yZS4gU29tZSBvZlxyXG4gKiBTeW5jRW5naW5lJ3MgcmVzcG9uc2liaWxpdGllcyBpbmNsdWRlOlxyXG4gKiAxLiBDb29yZGluYXRpbmcgY2xpZW50IHJlcXVlc3RzIGFuZCByZW1vdGUgZXZlbnRzIGJldHdlZW4gdGhlIEV2ZW50TWFuYWdlclxyXG4gKiAgICBhbmQgdGhlIGxvY2FsIGFuZCByZW1vdGUgZGF0YSBzdG9yZXMuXHJcbiAqIDIuIE1hbmFnaW5nIGEgVmlldyBvYmplY3QgZm9yIGVhY2ggcXVlcnksIHByb3ZpZGluZyB0aGUgdW5pZmllZCB2aWV3IGJldHdlZW5cclxuICogICAgdGhlIGxvY2FsIGFuZCByZW1vdGUgZGF0YSBzdG9yZXMuXHJcbiAqIDMuIE5vdGlmeWluZyB0aGUgUmVtb3RlU3RvcmUgd2hlbiB0aGUgTG9jYWxTdG9yZSBoYXMgbmV3IG11dGF0aW9ucyBpbiBpdHNcclxuICogICAgcXVldWUgdGhhdCBuZWVkIHNlbmRpbmcgdG8gdGhlIGJhY2tlbmQuXHJcbiAqXHJcbiAqIFRoZSBTeW5jRW5naW5l4oCZcyBtZXRob2RzIHNob3VsZCBvbmx5IGV2ZXIgYmUgY2FsbGVkIGJ5IG1ldGhvZHMgcnVubmluZyBpbiB0aGVcclxuICogZ2xvYmFsIGFzeW5jIHF1ZXVlLlxyXG4gKi9cclxudmFyIFN5bmNFbmdpbmUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBTeW5jRW5naW5lKGxvY2FsU3RvcmUsIHJlbW90ZVN0b3JlLCBcclxuICAgIC8vIFBPUlRJTkcgTk9URTogTWFuYWdlcyBzdGF0ZSBzeW5jaHJvbml6YXRpb24gaW4gbXVsdGktdGFiIGVudmlyb25tZW50cy5cclxuICAgIHNoYXJlZENsaWVudFN0YXRlLCBjdXJyZW50VXNlcikge1xyXG4gICAgICAgIHRoaXMubG9jYWxTdG9yZSA9IGxvY2FsU3RvcmU7XHJcbiAgICAgICAgdGhpcy5yZW1vdGVTdG9yZSA9IHJlbW90ZVN0b3JlO1xyXG4gICAgICAgIHRoaXMuc2hhcmVkQ2xpZW50U3RhdGUgPSBzaGFyZWRDbGllbnRTdGF0ZTtcclxuICAgICAgICB0aGlzLmN1cnJlbnRVc2VyID0gY3VycmVudFVzZXI7XHJcbiAgICAgICAgdGhpcy5zeW5jRW5naW5lTGlzdGVuZXIgPSBudWxsO1xyXG4gICAgICAgIHRoaXMucXVlcnlWaWV3c0J5UXVlcnkgPSBuZXcgT2JqZWN0TWFwKGZ1bmN0aW9uIChxKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBxLmNhbm9uaWNhbElkKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5xdWVyaWVzQnlUYXJnZXQgPSB7fTtcclxuICAgICAgICB0aGlzLmxpbWJvVGFyZ2V0c0J5S2V5ID0gbmV3IFNvcnRlZE1hcChEb2N1bWVudEtleS5jb21wYXJhdG9yKTtcclxuICAgICAgICB0aGlzLmxpbWJvUmVzb2x1dGlvbnNCeVRhcmdldCA9IHt9O1xyXG4gICAgICAgIHRoaXMubGltYm9Eb2N1bWVudFJlZnMgPSBuZXcgUmVmZXJlbmNlU2V0KCk7XHJcbiAgICAgICAgLyoqIFN0b3JlcyB1c2VyIGNvbXBsZXRpb24gaGFuZGxlcnMsIGluZGV4ZWQgYnkgVXNlciBhbmQgQmF0Y2hJZC4gKi9cclxuICAgICAgICB0aGlzLm11dGF0aW9uVXNlckNhbGxiYWNrcyA9IHt9O1xyXG4gICAgICAgIC8qKiBTdG9yZXMgdXNlciBjYWxsYmFja3Mgd2FpdGluZyBmb3IgYWxsIHBlbmRpbmcgd3JpdGVzIHRvIGJlIGFja25vd2xlZGdlZC4gKi9cclxuICAgICAgICB0aGlzLnBlbmRpbmdXcml0ZXNDYWxsYmFja3MgPSBuZXcgTWFwKCk7XHJcbiAgICAgICAgdGhpcy5saW1ib1RhcmdldElkR2VuZXJhdG9yID0gVGFyZ2V0SWRHZW5lcmF0b3IuZm9yU3luY0VuZ2luZSgpO1xyXG4gICAgICAgIC8vIFRoZSBwcmltYXJ5IHN0YXRlIGlzIHNldCB0byBgdHJ1ZWAgb3IgYGZhbHNlYCBpbW1lZGlhdGVseSBhZnRlciBGaXJlc3RvcmVcclxuICAgICAgICAvLyBzdGFydHVwLiBJbiB0aGUgaW50ZXJpbSwgYSBjbGllbnQgc2hvdWxkIG9ubHkgYmUgY29uc2lkZXJlZCBwcmltYXJ5IGlmXHJcbiAgICAgICAgLy8gYGlzUHJpbWFyeWAgaXMgdHJ1ZS5cclxuICAgICAgICB0aGlzLmlzUHJpbWFyeSA9IHVuZGVmaW5lZDtcclxuICAgICAgICB0aGlzLm9ubGluZVN0YXRlID0gT25saW5lU3RhdGUuVW5rbm93bjtcclxuICAgIH1cclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTeW5jRW5naW5lLnByb3RvdHlwZSwgXCJpc1ByaW1hcnlDbGllbnRcIiwge1xyXG4gICAgICAgIC8vIE9ubHkgdXNlZCBmb3IgdGVzdGluZy5cclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaXNQcmltYXJ5ID09PSB0cnVlO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgLyoqIFN1YnNjcmliZXMgdG8gU3luY0VuZ2luZSBub3RpZmljYXRpb25zLiBIYXMgdG8gYmUgY2FsbGVkIGV4YWN0bHkgb25jZS4gKi9cclxuICAgIFN5bmNFbmdpbmUucHJvdG90eXBlLnN1YnNjcmliZSA9IGZ1bmN0aW9uIChzeW5jRW5naW5lTGlzdGVuZXIpIHtcclxuICAgICAgICBhc3NlcnQoc3luY0VuZ2luZUxpc3RlbmVyICE9PSBudWxsLCAnU3luY0VuZ2luZSBsaXN0ZW5lciBjYW5ub3QgYmUgbnVsbCcpO1xyXG4gICAgICAgIGFzc2VydCh0aGlzLnN5bmNFbmdpbmVMaXN0ZW5lciA9PT0gbnVsbCwgJ1N5bmNFbmdpbmUgYWxyZWFkeSBoYXMgYSBzdWJzY3JpYmVyLicpO1xyXG4gICAgICAgIHRoaXMuc3luY0VuZ2luZUxpc3RlbmVyID0gc3luY0VuZ2luZUxpc3RlbmVyO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogSW5pdGlhdGVzIHRoZSBuZXcgbGlzdGVuLCByZXNvbHZlcyBwcm9taXNlIHdoZW4gbGlzdGVuIGVucXVldWVkIHRvIHRoZVxyXG4gICAgICogc2VydmVyLiBBbGwgdGhlIHN1YnNlcXVlbnQgdmlldyBzbmFwc2hvdHMgb3IgZXJyb3JzIGFyZSBzZW50IHRvIHRoZVxyXG4gICAgICogc3Vic2NyaWJlZCBoYW5kbGVycy4gUmV0dXJucyB0aGUgdGFyZ2V0SWQgb2YgdGhlIHF1ZXJ5LlxyXG4gICAgICovXHJcbiAgICBTeW5jRW5naW5lLnByb3RvdHlwZS5saXN0ZW4gPSBmdW5jdGlvbiAocXVlcnkpIHtcclxuICAgICAgICByZXR1cm4gdHNsaWIuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciB0YXJnZXRJZCwgdmlld1NuYXBzaG90LCBxdWVyeVZpZXcsIHRhcmdldERhdGEsIHN0YXR1c18xO1xyXG4gICAgICAgICAgICByZXR1cm4gdHNsaWIuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFzc2VydFN1YnNjcmliZWQoJ2xpc3RlbigpJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5VmlldyA9IHRoaXMucXVlcnlWaWV3c0J5UXVlcnkuZ2V0KHF1ZXJ5KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFxdWVyeVZpZXcpIHJldHVybiBbMyAvKmJyZWFrKi8sIDFdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBQT1JUSU5HIE5PVEU6IFdpdGggTXVsdGktVGFiIFdlYiwgaXQgaXMgcG9zc2libGUgdGhhdCBhIHF1ZXJ5IHZpZXdcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYWxyZWFkeSBleGlzdHMgd2hlbiBFdmVudE1hbmFnZXIgY2FsbHMgdXMgZm9yIHRoZSBmaXJzdCB0aW1lLiBUaGlzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGhhcHBlbnMgd2hlbiB0aGUgcHJpbWFyeSB0YWIgaXMgYWxyZWFkeSBsaXN0ZW5pbmcgdG8gdGhpcyBxdWVyeSBvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBiZWhhbGYgb2YgYW5vdGhlciB0YWIgYW5kIHRoZSB1c2VyIG9mIHRoZSBwcmltYXJ5IGFsc28gc3RhcnRzIGxpc3RlbmluZ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB0byB0aGUgcXVlcnkuIEV2ZW50TWFuYWdlciB3aWxsIG5vdCBoYXZlIGFuIGFzc2lnbmVkIHRhcmdldCBJRCBpbiB0aGlzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNhc2UgYW5kIGNhbGxzIGBsaXN0ZW5gIHRvIG9idGFpbiB0aGlzIElELlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRJZCA9IHF1ZXJ5Vmlldy50YXJnZXRJZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaGFyZWRDbGllbnRTdGF0ZS5hZGRMb2NhbFF1ZXJ5VGFyZ2V0KHRhcmdldElkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmlld1NuYXBzaG90ID0gcXVlcnlWaWV3LnZpZXcuY29tcHV0ZUluaXRpYWxTbmFwc2hvdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCA0XTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6IHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMubG9jYWxTdG9yZS5hbGxvY2F0ZVRhcmdldChxdWVyeS50b1RhcmdldCgpKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXREYXRhID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXNfMSA9IHRoaXMuc2hhcmVkQ2xpZW50U3RhdGUuYWRkTG9jYWxRdWVyeVRhcmdldCh0YXJnZXREYXRhLnRhcmdldElkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0SWQgPSB0YXJnZXREYXRhLnRhcmdldElkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmluaXRpYWxpemVWaWV3QW5kQ29tcHV0ZVNuYXBzaG90KHF1ZXJ5LCB0YXJnZXRJZCwgc3RhdHVzXzEgPT09ICdjdXJyZW50JyldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmlld1NuYXBzaG90ID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5pc1ByaW1hcnkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3RlU3RvcmUubGlzdGVuKHRhcmdldERhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLmxhYmVsID0gNDtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3luY0VuZ2luZUxpc3RlbmVyLm9uV2F0Y2hDaGFuZ2UoW3ZpZXdTbmFwc2hvdF0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdGFyZ2V0SWRdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJlZ2lzdGVycyBhIHZpZXcgZm9yIGEgcHJldmlvdXNseSB1bmtub3duIHF1ZXJ5IGFuZCBjb21wdXRlcyBpdHMgaW5pdGlhbFxyXG4gICAgICogc25hcHNob3QuXHJcbiAgICAgKi9cclxuICAgIFN5bmNFbmdpbmUucHJvdG90eXBlLmluaXRpYWxpemVWaWV3QW5kQ29tcHV0ZVNuYXBzaG90ID0gZnVuY3Rpb24gKHF1ZXJ5LCB0YXJnZXRJZCwgY3VycmVudCkge1xyXG4gICAgICAgIHJldHVybiB0c2xpYi5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHF1ZXJ5UmVzdWx0LCB2aWV3LCB2aWV3RG9jQ2hhbmdlcywgc3ludGhlc2l6ZWRUYXJnZXRDaGFuZ2UsIHZpZXdDaGFuZ2UsIGRhdGE7XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYi5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6IHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMubG9jYWxTdG9yZS5leGVjdXRlUXVlcnkocXVlcnksIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiB1c2VQcmV2aW91c1Jlc3VsdHM9ICovIHRydWUpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5UmVzdWx0ID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2aWV3ID0gbmV3IFZpZXcocXVlcnksIHF1ZXJ5UmVzdWx0LnJlbW90ZUtleXMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2aWV3RG9jQ2hhbmdlcyA9IHZpZXcuY29tcHV0ZURvY0NoYW5nZXMocXVlcnlSZXN1bHQuZG9jdW1lbnRzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3ludGhlc2l6ZWRUYXJnZXRDaGFuZ2UgPSBUYXJnZXRDaGFuZ2UuY3JlYXRlU3ludGhlc2l6ZWRUYXJnZXRDaGFuZ2VGb3JDdXJyZW50Q2hhbmdlKHRhcmdldElkLCBjdXJyZW50ICYmIHRoaXMub25saW5lU3RhdGUgIT09IE9ubGluZVN0YXRlLk9mZmxpbmUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2aWV3Q2hhbmdlID0gdmlldy5hcHBseUNoYW5nZXModmlld0RvY0NoYW5nZXMsIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiB1cGRhdGVMaW1ib0RvY3VtZW50cz0gKi8gdGhpcy5pc1ByaW1hcnkgPT09IHRydWUsIHN5bnRoZXNpemVkVGFyZ2V0Q2hhbmdlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXJ0KHZpZXdDaGFuZ2UubGltYm9DaGFuZ2VzLmxlbmd0aCA9PT0gMCwgJ1ZpZXcgcmV0dXJuZWQgbGltYm8gZG9jcyBiZWZvcmUgdGFyZ2V0IGFjayBmcm9tIHRoZSBzZXJ2ZXIuJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFzc2VydCghIXZpZXdDaGFuZ2Uuc25hcHNob3QsICdhcHBseUNoYW5nZXMgZm9yIG5ldyB2aWV3IHNob3VsZCBhbHdheXMgcmV0dXJuIGEgc25hcHNob3QnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YSA9IG5ldyBRdWVyeVZpZXcocXVlcnksIHRhcmdldElkLCB2aWV3KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5xdWVyeVZpZXdzQnlRdWVyeS5zZXQocXVlcnksIGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMucXVlcmllc0J5VGFyZ2V0W3RhcmdldElkXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5xdWVyaWVzQnlUYXJnZXRbdGFyZ2V0SWRdID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5xdWVyaWVzQnlUYXJnZXRbdGFyZ2V0SWRdLnB1c2gocXVlcnkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdmlld0NoYW5nZS5zbmFwc2hvdF07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmVjb25jaWxlIHRoZSBsaXN0IG9mIHN5bmNlZCBkb2N1bWVudHMgaW4gYW4gZXhpc3RpbmcgdmlldyB3aXRoIHRob3NlXHJcbiAgICAgKiBmcm9tIHBlcnNpc3RlbmNlLlxyXG4gICAgICovXHJcbiAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLXRhYiBvbmx5LlxyXG4gICAgU3luY0VuZ2luZS5wcm90b3R5cGUuc3luY2hyb25pemVWaWV3QW5kQ29tcHV0ZVNuYXBzaG90ID0gZnVuY3Rpb24gKHF1ZXJ5Vmlldykge1xyXG4gICAgICAgIHJldHVybiB0c2xpYi5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHF1ZXJ5UmVzdWx0LCB2aWV3U25hcHNob3Q7XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYi5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6IHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMubG9jYWxTdG9yZS5leGVjdXRlUXVlcnkocXVlcnlWaWV3LnF1ZXJ5LCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgLyogdXNlUHJldmlvdXNSZXN1bHRzPSAqLyB0cnVlKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBxdWVyeVJlc3VsdCA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmlld1NuYXBzaG90ID0gcXVlcnlWaWV3LnZpZXcuc3luY2hyb25pemVXaXRoUGVyc2lzdGVkU3RhdGUocXVlcnlSZXN1bHQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5pc1ByaW1hcnkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlVHJhY2tlZExpbWJvcyhxdWVyeVZpZXcudGFyZ2V0SWQsIHZpZXdTbmFwc2hvdC5saW1ib0NoYW5nZXMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB2aWV3U25hcHNob3RdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKiogU3RvcHMgbGlzdGVuaW5nIHRvIHRoZSBxdWVyeS4gKi9cclxuICAgIFN5bmNFbmdpbmUucHJvdG90eXBlLnVubGlzdGVuID0gZnVuY3Rpb24gKHF1ZXJ5KSB7XHJcbiAgICAgICAgcmV0dXJuIHRzbGliLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgcXVlcnlWaWV3LCBxdWVyaWVzLCB0YXJnZXRSZW1haW5zQWN0aXZlO1xyXG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgICAgICByZXR1cm4gdHNsaWIuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFzc2VydFN1YnNjcmliZWQoJ3VubGlzdGVuKCknKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcXVlcnlWaWV3ID0gdGhpcy5xdWVyeVZpZXdzQnlRdWVyeS5nZXQocXVlcnkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhc3NlcnQoISFxdWVyeVZpZXcsICdUcnlpbmcgdG8gdW5saXN0ZW4gb24gcXVlcnkgbm90IGZvdW5kOicgKyBxdWVyeSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJpZXMgPSB0aGlzLnF1ZXJpZXNCeVRhcmdldFtxdWVyeVZpZXcudGFyZ2V0SWRdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocXVlcmllcy5sZW5ndGggPiAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnF1ZXJpZXNCeVRhcmdldFtxdWVyeVZpZXcudGFyZ2V0SWRdID0gcXVlcmllcy5maWx0ZXIoZnVuY3Rpb24gKHEpIHsgcmV0dXJuICFxLmlzRXF1YWwocXVlcnkpOyB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucXVlcnlWaWV3c0J5UXVlcnkuZGVsZXRlKHF1ZXJ5KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuaXNQcmltYXJ5KSByZXR1cm4gWzMgLypicmVhayovLCAzXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gV2UgbmVlZCB0byByZW1vdmUgdGhlIGxvY2FsIHF1ZXJ5IHRhcmdldCBmaXJzdCB0byBhbGxvdyB1cyB0byB2ZXJpZnlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gd2hldGhlciBhbnkgb3RoZXIgY2xpZW50IGlzIHN0aWxsIGludGVyZXN0ZWQgaW4gdGhpcyB0YXJnZXQuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hhcmVkQ2xpZW50U3RhdGUucmVtb3ZlTG9jYWxRdWVyeVRhcmdldChxdWVyeVZpZXcudGFyZ2V0SWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRSZW1haW5zQWN0aXZlID0gdGhpcy5zaGFyZWRDbGllbnRTdGF0ZS5pc0FjdGl2ZVF1ZXJ5VGFyZ2V0KHF1ZXJ5Vmlldy50YXJnZXRJZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghIXRhcmdldFJlbWFpbnNBY3RpdmUpIHJldHVybiBbMyAvKmJyZWFrKi8sIDJdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmxvY2FsU3RvcmVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVsZWFzZVRhcmdldChxdWVyeVZpZXcudGFyZ2V0SWQsIC8qa2VlcFBlcnNpc3RlZFRhcmdldERhdGE9Ki8gZmFsc2UpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnNoYXJlZENsaWVudFN0YXRlLmNsZWFyUXVlcnlTdGF0ZShxdWVyeVZpZXcudGFyZ2V0SWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnJlbW90ZVN0b3JlLnVubGlzdGVuKHF1ZXJ5Vmlldy50YXJnZXRJZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMucmVtb3ZlQW5kQ2xlYW51cFRhcmdldChxdWVyeVZpZXcudGFyZ2V0SWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY2F0Y2goaWdub3JlSWZQcmltYXJ5TGVhc2VMb3NzKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLmxhYmVsID0gMjtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6IHJldHVybiBbMyAvKmJyZWFrKi8sIDVdO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVBbmRDbGVhbnVwVGFyZ2V0KHF1ZXJ5Vmlldy50YXJnZXRJZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMubG9jYWxTdG9yZS5yZWxlYXNlVGFyZ2V0KHF1ZXJ5Vmlldy50YXJnZXRJZCwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKmtlZXBQZXJzaXN0ZWRUYXJnZXREYXRhPSovIHRydWUpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSA1O1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNTogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEluaXRpYXRlcyB0aGUgd3JpdGUgb2YgbG9jYWwgbXV0YXRpb24gYmF0Y2ggd2hpY2ggaW52b2x2ZXMgYWRkaW5nIHRoZVxyXG4gICAgICogd3JpdGVzIHRvIHRoZSBtdXRhdGlvbiBxdWV1ZSwgbm90aWZ5aW5nIHRoZSByZW1vdGUgc3RvcmUgYWJvdXQgbmV3XHJcbiAgICAgKiBtdXRhdGlvbnMgYW5kIHJhaXNpbmcgZXZlbnRzIGZvciBhbnkgY2hhbmdlcyB0aGlzIHdyaXRlIGNhdXNlZC5cclxuICAgICAqXHJcbiAgICAgKiBUaGUgcHJvbWlzZSByZXR1cm5lZCBieSB0aGlzIGNhbGwgaXMgcmVzb2x2ZWQgd2hlbiB0aGUgYWJvdmUgc3RlcHNcclxuICAgICAqIGhhdmUgY29tcGxldGVkLCAqbm90KiB3aGVuIHRoZSB3cml0ZSB3YXMgYWNrZWQgYnkgdGhlIGJhY2tlbmQuIFRoZVxyXG4gICAgICogdXNlckNhbGxiYWNrIGlzIHJlc29sdmVkIG9uY2UgdGhlIHdyaXRlIHdhcyBhY2tlZC9yZWplY3RlZCBieSB0aGVcclxuICAgICAqIGJhY2tlbmQgKG9yIGZhaWxlZCBsb2NhbGx5IGZvciBhbnkgb3RoZXIgcmVhc29uKS5cclxuICAgICAqL1xyXG4gICAgU3luY0VuZ2luZS5wcm90b3R5cGUud3JpdGUgPSBmdW5jdGlvbiAoYmF0Y2gsIHVzZXJDYWxsYmFjaykge1xyXG4gICAgICAgIHJldHVybiB0c2xpYi5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHJlc3VsdDtcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hc3NlcnRTdWJzY3JpYmVkKCd3cml0ZSgpJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMubG9jYWxTdG9yZS5sb2NhbFdyaXRlKGJhdGNoKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hhcmVkQ2xpZW50U3RhdGUuYWRkUGVuZGluZ011dGF0aW9uKHJlc3VsdC5iYXRjaElkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRNdXRhdGlvbkNhbGxiYWNrKHJlc3VsdC5iYXRjaElkLCB1c2VyQ2FsbGJhY2spO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmVtaXROZXdTbmFwc0FuZE5vdGlmeUxvY2FsU3RvcmUocmVzdWx0LmNoYW5nZXMpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5yZW1vdGVTdG9yZS5maWxsV3JpdGVQaXBlbGluZSgpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFRha2VzIGFuIHVwZGF0ZUZ1bmN0aW9uIGluIHdoaWNoIGEgc2V0IG9mIHJlYWRzIGFuZCB3cml0ZXMgY2FuIGJlIHBlcmZvcm1lZFxyXG4gICAgICogYXRvbWljYWxseS4gSW4gdGhlIHVwZGF0ZUZ1bmN0aW9uLCB0aGUgY2xpZW50IGNhbiByZWFkIGFuZCB3cml0ZSB2YWx1ZXNcclxuICAgICAqIHVzaW5nIHRoZSBzdXBwbGllZCB0cmFuc2FjdGlvbiBvYmplY3QuIEFmdGVyIHRoZSB1cGRhdGVGdW5jdGlvbiwgYWxsXHJcbiAgICAgKiBjaGFuZ2VzIHdpbGwgYmUgY29tbWl0dGVkLiBJZiBhIHJldHJ5YWJsZSBlcnJvciBvY2N1cnMgKGV4OiBzb21lIG90aGVyXHJcbiAgICAgKiBjbGllbnQgaGFzIGNoYW5nZWQgYW55IG9mIHRoZSBkYXRhIHJlZmVyZW5jZWQpLCB0aGVuIHRoZSB1cGRhdGVGdW5jdGlvblxyXG4gICAgICogd2lsbCBiZSBjYWxsZWQgYWdhaW4gYWZ0ZXIgYSBiYWNrb2ZmLiBJZiB0aGUgdXBkYXRlRnVuY3Rpb24gc3RpbGwgZmFpbHNcclxuICAgICAqIGFmdGVyIGFsbCByZXRyaWVzLCB0aGVuIHRoZSB0cmFuc2FjdGlvbiB3aWxsIGJlIHJlamVjdGVkLlxyXG4gICAgICpcclxuICAgICAqIFRoZSB0cmFuc2FjdGlvbiBvYmplY3QgcGFzc2VkIHRvIHRoZSB1cGRhdGVGdW5jdGlvbiBjb250YWlucyBtZXRob2RzIGZvclxyXG4gICAgICogYWNjZXNzaW5nIGRvY3VtZW50cyBhbmQgY29sbGVjdGlvbnMuIFVubGlrZSBvdGhlciBkYXRhc3RvcmUgYWNjZXNzLCBkYXRhXHJcbiAgICAgKiBhY2Nlc3NlZCB3aXRoIHRoZSB0cmFuc2FjdGlvbiB3aWxsIG5vdCByZWZsZWN0IGxvY2FsIGNoYW5nZXMgdGhhdCBoYXZlIG5vdFxyXG4gICAgICogYmVlbiBjb21taXR0ZWQuIEZvciB0aGlzIHJlYXNvbiwgaXQgaXMgcmVxdWlyZWQgdGhhdCBhbGwgcmVhZHMgYXJlXHJcbiAgICAgKiBwZXJmb3JtZWQgYmVmb3JlIGFueSB3cml0ZXMuIFRyYW5zYWN0aW9ucyBtdXN0IGJlIHBlcmZvcm1lZCB3aGlsZSBvbmxpbmUuXHJcbiAgICAgKlxyXG4gICAgICogVGhlIERlZmVycmVkIGlucHV0IGlzIHJlc29sdmVkIHdoZW4gdGhlIHRyYW5zYWN0aW9uIGlzIGZ1bGx5IGNvbW1pdHRlZC5cclxuICAgICAqL1xyXG4gICAgU3luY0VuZ2luZS5wcm90b3R5cGUucnVuVHJhbnNhY3Rpb24gPSBmdW5jdGlvbiAoYXN5bmNRdWV1ZSwgdXBkYXRlRnVuY3Rpb24sIGRlZmVycmVkKSB7XHJcbiAgICAgICAgbmV3IFRyYW5zYWN0aW9uUnVubmVyKGFzeW5jUXVldWUsIHRoaXMucmVtb3RlU3RvcmUsIHVwZGF0ZUZ1bmN0aW9uLCBkZWZlcnJlZCkucnVuKCk7XHJcbiAgICB9O1xyXG4gICAgU3luY0VuZ2luZS5wcm90b3R5cGUuYXBwbHlSZW1vdGVFdmVudCA9IGZ1bmN0aW9uIChyZW1vdGVFdmVudCkge1xyXG4gICAgICAgIHJldHVybiB0c2xpYi5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGNoYW5nZXMsIGVycm9yXzE7XHJcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYi5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYXNzZXJ0U3Vic2NyaWJlZCgnYXBwbHlSZW1vdGVFdmVudCgpJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLmxhYmVsID0gMTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnRyeXMucHVzaChbMSwgNCwgLCA2XSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMubG9jYWxTdG9yZS5hcHBseVJlbW90ZUV2ZW50KHJlbW90ZUV2ZW50KV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VzID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBVcGRhdGUgYHJlY2VpdmVkRG9jdW1lbnRgIGFzIGFwcHJvcHJpYXRlIGZvciBhbnkgbGltYm8gdGFyZ2V0cy5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yRWFjaChyZW1vdGVFdmVudC50YXJnZXRDaGFuZ2VzLCBmdW5jdGlvbiAodGFyZ2V0SWQsIHRhcmdldENoYW5nZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxpbWJvUmVzb2x1dGlvbiA9IF90aGlzLmxpbWJvUmVzb2x1dGlvbnNCeVRhcmdldFtOdW1iZXIodGFyZ2V0SWQpXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsaW1ib1Jlc29sdXRpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaW5jZSB0aGlzIGlzIGEgbGltYm8gcmVzb2x1dGlvbiBsb29rdXAsIGl0J3MgZm9yIGEgc2luZ2xlIGRvY3VtZW50XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYW5kIGl0IGNvdWxkIGJlIGFkZGVkLCBtb2RpZmllZCwgb3IgcmVtb3ZlZCwgYnV0IG5vdCBhIGNvbWJpbmF0aW9uLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2VydCh0YXJnZXRDaGFuZ2UuYWRkZWREb2N1bWVudHMuc2l6ZSArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldENoYW5nZS5tb2RpZmllZERvY3VtZW50cy5zaXplICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0Q2hhbmdlLnJlbW92ZWREb2N1bWVudHMuc2l6ZSA8PVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAxLCAnTGltYm8gcmVzb2x1dGlvbiBmb3Igc2luZ2xlIGRvY3VtZW50IGNvbnRhaW5zIG11bHRpcGxlIGNoYW5nZXMuJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRhcmdldENoYW5nZS5hZGRlZERvY3VtZW50cy5zaXplID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaW1ib1Jlc29sdXRpb24ucmVjZWl2ZWREb2N1bWVudCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHRhcmdldENoYW5nZS5tb2RpZmllZERvY3VtZW50cy5zaXplID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NlcnQobGltYm9SZXNvbHV0aW9uLnJlY2VpdmVkRG9jdW1lbnQsICdSZWNlaXZlZCBjaGFuZ2UgZm9yIGxpbWJvIHRhcmdldCBkb2N1bWVudCB3aXRob3V0IGFkZC4nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodGFyZ2V0Q2hhbmdlLnJlbW92ZWREb2N1bWVudHMuc2l6ZSA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXJ0KGxpbWJvUmVzb2x1dGlvbi5yZWNlaXZlZERvY3VtZW50LCAnUmVjZWl2ZWQgcmVtb3ZlIGZvciBsaW1ibyB0YXJnZXQgZG9jdW1lbnQgd2l0aG91dCBhZGQuJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpbWJvUmVzb2x1dGlvbi5yZWNlaXZlZERvY3VtZW50ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5lbWl0TmV3U25hcHNBbmROb3RpZnlMb2NhbFN0b3JlKGNoYW5nZXMsIHJlbW90ZUV2ZW50KV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDZdO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JfMSA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgaWdub3JlSWZQcmltYXJ5TGVhc2VMb3NzKGVycm9yXzEpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgNl07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA2OiByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQXBwbGllcyBhbiBPbmxpbmVTdGF0ZSBjaGFuZ2UgdG8gdGhlIHN5bmMgZW5naW5lIGFuZCBub3RpZmllcyBhbnkgdmlld3Mgb2ZcclxuICAgICAqIHRoZSBjaGFuZ2UuXHJcbiAgICAgKi9cclxuICAgIFN5bmNFbmdpbmUucHJvdG90eXBlLmFwcGx5T25saW5lU3RhdGVDaGFuZ2UgPSBmdW5jdGlvbiAob25saW5lU3RhdGUsIHNvdXJjZSkge1xyXG4gICAgICAgIC8vIElmIHdlIGFyZSB0aGUgc2Vjb25kYXJ5IGNsaWVudCwgd2UgZXhwbGljaXRseSBpZ25vcmUgdGhlIHJlbW90ZSBzdG9yZSdzXHJcbiAgICAgICAgLy8gb25saW5lIHN0YXRlICh0aGUgbG9jYWwgY2xpZW50IG1heSBnbyBvZmZsaW5lLCBldmVuIHRob3VnaCB0aGUgcHJpbWFyeVxyXG4gICAgICAgIC8vIHRhYiByZW1haW5zIG9ubGluZSkgYW5kIG9ubHkgYXBwbHkgdGhlIHByaW1hcnkgdGFiJ3Mgb25saW5lIHN0YXRlIGZyb21cclxuICAgICAgICAvLyBTaGFyZWRDbGllbnRTdGF0ZS5cclxuICAgICAgICBpZiAoKHRoaXMuaXNQcmltYXJ5ICYmIHNvdXJjZSA9PT0gT25saW5lU3RhdGVTb3VyY2UuUmVtb3RlU3RvcmUpIHx8XHJcbiAgICAgICAgICAgICghdGhpcy5pc1ByaW1hcnkgJiYgc291cmNlID09PSBPbmxpbmVTdGF0ZVNvdXJjZS5TaGFyZWRDbGllbnRTdGF0ZSkpIHtcclxuICAgICAgICAgICAgdGhpcy5hc3NlcnRTdWJzY3JpYmVkKCdhcHBseU9ubGluZVN0YXRlQ2hhbmdlKCknKTtcclxuICAgICAgICAgICAgdmFyIG5ld1ZpZXdTbmFwc2hvdHNfMSA9IFtdO1xyXG4gICAgICAgICAgICB0aGlzLnF1ZXJ5Vmlld3NCeVF1ZXJ5LmZvckVhY2goZnVuY3Rpb24gKHF1ZXJ5LCBxdWVyeVZpZXcpIHtcclxuICAgICAgICAgICAgICAgIHZhciB2aWV3Q2hhbmdlID0gcXVlcnlWaWV3LnZpZXcuYXBwbHlPbmxpbmVTdGF0ZUNoYW5nZShvbmxpbmVTdGF0ZSk7XHJcbiAgICAgICAgICAgICAgICBhc3NlcnQodmlld0NoYW5nZS5saW1ib0NoYW5nZXMubGVuZ3RoID09PSAwLCAnT25saW5lU3RhdGUgc2hvdWxkIG5vdCBhZmZlY3QgbGltYm8gZG9jdW1lbnRzLicpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHZpZXdDaGFuZ2Uuc25hcHNob3QpIHtcclxuICAgICAgICAgICAgICAgICAgICBuZXdWaWV3U25hcHNob3RzXzEucHVzaCh2aWV3Q2hhbmdlLnNuYXBzaG90KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHRoaXMuc3luY0VuZ2luZUxpc3RlbmVyLm9uT25saW5lU3RhdGVDaGFuZ2Uob25saW5lU3RhdGUpO1xyXG4gICAgICAgICAgICB0aGlzLnN5bmNFbmdpbmVMaXN0ZW5lci5vbldhdGNoQ2hhbmdlKG5ld1ZpZXdTbmFwc2hvdHNfMSk7XHJcbiAgICAgICAgICAgIHRoaXMub25saW5lU3RhdGUgPSBvbmxpbmVTdGF0ZTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuaXNQcmltYXJ5KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNoYXJlZENsaWVudFN0YXRlLnNldE9ubGluZVN0YXRlKG9ubGluZVN0YXRlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBTeW5jRW5naW5lLnByb3RvdHlwZS5yZWplY3RMaXN0ZW4gPSBmdW5jdGlvbiAodGFyZ2V0SWQsIGVycikge1xyXG4gICAgICAgIHJldHVybiB0c2xpYi5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGxpbWJvUmVzb2x1dGlvbiwgbGltYm9LZXksIGRvY3VtZW50VXBkYXRlcywgcmVzb2x2ZWRMaW1ib0RvY3VtZW50cywgZXZlbnRfMTtcclxuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hc3NlcnRTdWJzY3JpYmVkKCdyZWplY3RMaXN0ZW5zKCknKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS10YWIgb25seS5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaGFyZWRDbGllbnRTdGF0ZS51cGRhdGVRdWVyeVN0YXRlKHRhcmdldElkLCAncmVqZWN0ZWQnLCBlcnIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsaW1ib1Jlc29sdXRpb24gPSB0aGlzLmxpbWJvUmVzb2x1dGlvbnNCeVRhcmdldFt0YXJnZXRJZF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpbWJvS2V5ID0gbGltYm9SZXNvbHV0aW9uICYmIGxpbWJvUmVzb2x1dGlvbi5rZXk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbGltYm9LZXkpIHJldHVybiBbMyAvKmJyZWFrKi8sIDFdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBTaW5jZSB0aGlzIHF1ZXJ5IGZhaWxlZCwgd2Ugd29uJ3Qgd2FudCB0byBtYW51YWxseSB1bmxpc3RlbiB0byBpdC5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gU28gZ28gYWhlYWQgYW5kIHJlbW92ZSBpdCBmcm9tIGJvb2trZWVwaW5nLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxpbWJvVGFyZ2V0c0J5S2V5ID0gdGhpcy5saW1ib1RhcmdldHNCeUtleS5yZW1vdmUobGltYm9LZXkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5saW1ib1Jlc29sdXRpb25zQnlUYXJnZXRbdGFyZ2V0SWRdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudFVwZGF0ZXMgPSBuZXcgU29ydGVkTWFwKERvY3VtZW50S2V5LmNvbXBhcmF0b3IpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudFVwZGF0ZXMgPSBkb2N1bWVudFVwZGF0ZXMuaW5zZXJ0KGxpbWJvS2V5LCBuZXcgTm9Eb2N1bWVudChsaW1ib0tleSwgU25hcHNob3RWZXJzaW9uLmZvckRlbGV0ZWREb2MoKSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlZExpbWJvRG9jdW1lbnRzID0gZG9jdW1lbnRLZXlTZXQoKS5hZGQobGltYm9LZXkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudF8xID0gbmV3IFJlbW90ZUV2ZW50KFNuYXBzaG90VmVyc2lvbi5NSU4sIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiB0YXJnZXRDaGFuZ2VzPSAqLyB7fSwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIHRhcmdldE1pc21hdGNoZXM9ICovIG5ldyBTb3J0ZWRTZXQocHJpbWl0aXZlQ29tcGFyYXRvciksIGRvY3VtZW50VXBkYXRlcywgcmVzb2x2ZWRMaW1ib0RvY3VtZW50cyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0aGlzLmFwcGx5UmVtb3RlRXZlbnQoZXZlbnRfMSldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTogcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5sb2NhbFN0b3JlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVsZWFzZVRhcmdldCh0YXJnZXRJZCwgLyoga2VlcFBlcnNpc3RlZFRhcmdldERhdGEgKi8gZmFsc2UpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5yZW1vdmVBbmRDbGVhbnVwVGFyZ2V0KHRhcmdldElkLCBlcnIpOyB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGlnbm9yZUlmUHJpbWFyeUxlYXNlTG9zcyldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDM7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOiByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktdGFiIG9ubHlcclxuICAgIFN5bmNFbmdpbmUucHJvdG90eXBlLmFwcGx5QmF0Y2hTdGF0ZSA9IGZ1bmN0aW9uIChiYXRjaElkLCBiYXRjaFN0YXRlLCBlcnJvcikge1xyXG4gICAgICAgIHJldHVybiB0c2xpYi5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGRvY3VtZW50cztcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hc3NlcnRTdWJzY3JpYmVkKCdhcHBseUJhdGNoU3RhdGUoKScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmxvY2FsU3RvcmUubG9va3VwTXV0YXRpb25Eb2N1bWVudHMoYmF0Y2hJZCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnRzID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZG9jdW1lbnRzID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBBIHRocm90dGxlZCB0YWIgbWF5IG5vdCBoYXZlIHNlZW4gdGhlIG11dGF0aW9uIGJlZm9yZSBpdCB3YXMgY29tcGxldGVkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhbmQgcmVtb3ZlZCBmcm9tIHRoZSBtdXRhdGlvbiBxdWV1ZSwgaW4gd2hpY2ggY2FzZSB3ZSB3b24ndCBoYXZlIGNhY2hlZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIGFmZmVjdGVkIGRvY3VtZW50cy4gSW4gdGhpcyBjYXNlIHdlIGNhbiBzYWZlbHkgaWdub3JlIHRoZSB1cGRhdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNpbmNlIHRoYXQgbWVhbnMgd2UgZGlkbid0IGFwcGx5IHRoZSBtdXRhdGlvbiBsb2NhbGx5IGF0IGFsbCAoaWYgd2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGhhZCwgd2Ugd291bGQgaGF2ZSBjYWNoZWQgdGhlIGFmZmVjdGVkIGRvY3VtZW50cyksIGFuZCBzbyB3ZSB3aWxsIGp1c3RcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNlZSBhbnkgcmVzdWx0aW5nIGRvY3VtZW50IGNoYW5nZXMgdmlhIG5vcm1hbCByZW1vdGUgZG9jdW1lbnQgdXBkYXRlc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYXMgYXBwbGljYWJsZS5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlYnVnKExPR19UQUckOSwgJ0Nhbm5vdCBhcHBseSBtdXRhdGlvbiBiYXRjaCB3aXRoIGlkOiAnICsgYmF0Y2hJZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEoYmF0Y2hTdGF0ZSA9PT0gJ3BlbmRpbmcnKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgM107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIHdlIGFyZSB0aGUgcHJpbWFyeSBjbGllbnQsIHdlIG5lZWQgdG8gc2VuZCB0aGlzIHdyaXRlIHRvIHRoZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBiYWNrZW5kLiBTZWNvbmRhcnkgY2xpZW50cyB3aWxsIGlnbm9yZSB0aGVzZSB3cml0ZXMgc2luY2UgdGhlaXIgcmVtb3RlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbm5lY3Rpb24gaXMgZGlzYWJsZWQuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMucmVtb3RlU3RvcmUuZmlsbFdyaXRlUGlwZWxpbmUoKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiB3ZSBhcmUgdGhlIHByaW1hcnkgY2xpZW50LCB3ZSBuZWVkIHRvIHNlbmQgdGhpcyB3cml0ZSB0byB0aGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYmFja2VuZC4gU2Vjb25kYXJ5IGNsaWVudHMgd2lsbCBpZ25vcmUgdGhlc2Ugd3JpdGVzIHNpbmNlIHRoZWlyIHJlbW90ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25uZWN0aW9uIGlzIGRpc2FibGVkLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDRdO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJhdGNoU3RhdGUgPT09ICdhY2tub3dsZWRnZWQnIHx8IGJhdGNoU3RhdGUgPT09ICdyZWplY3RlZCcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5PVEU6IEJvdGggdGhlc2UgbWV0aG9kcyBhcmUgbm8tb3BzIGZvciBiYXRjaGVzIHRoYXQgb3JpZ2luYXRlZCBmcm9tXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBvdGhlciBjbGllbnRzLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzVXNlckNhbGxiYWNrKGJhdGNoSWQsIGVycm9yID8gZXJyb3IgOiBudWxsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9jYWxTdG9yZS5yZW1vdmVDYWNoZWRNdXRhdGlvbkJhdGNoTWV0YWRhdGEoYmF0Y2hJZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmYWlsKFwiVW5rbm93biBiYXRjaFN0YXRlOiBcIiArIGJhdGNoU3RhdGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLmxhYmVsID0gNDtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6IHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuZW1pdE5ld1NuYXBzQW5kTm90aWZ5TG9jYWxTdG9yZShkb2N1bWVudHMpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBTeW5jRW5naW5lLnByb3RvdHlwZS5hcHBseVN1Y2Nlc3NmdWxXcml0ZSA9IGZ1bmN0aW9uIChtdXRhdGlvbkJhdGNoUmVzdWx0KSB7XHJcbiAgICAgICAgcmV0dXJuIHRzbGliLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgYmF0Y2hJZCwgY2hhbmdlcywgZXJyb3JfMjtcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hc3NlcnRTdWJzY3JpYmVkKCdhcHBseVN1Y2Nlc3NmdWxXcml0ZSgpJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhdGNoSWQgPSBtdXRhdGlvbkJhdGNoUmVzdWx0LmJhdGNoLmJhdGNoSWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoZSBsb2NhbCBzdG9yZSBtYXkgb3IgbWF5IG5vdCBiZSBhYmxlIHRvIGFwcGx5IHRoZSB3cml0ZSByZXN1bHQgYW5kXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJhaXNlIGV2ZW50cyBpbW1lZGlhdGVseSAoZGVwZW5kaW5nIG9uIHdoZXRoZXIgdGhlIHdhdGNoZXIgaXMgY2F1Z2h0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHVwKSwgc28gd2UgcmFpc2UgdXNlciBjYWxsYmFja3MgZmlyc3Qgc28gdGhhdCB0aGV5IGNvbnNpc3RlbnRseSBoYXBwZW5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYmVmb3JlIGxpc3RlbiBldmVudHMuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvY2Vzc1VzZXJDYWxsYmFjayhiYXRjaElkLCAvKmVycm9yPSovIG51bGwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXJQZW5kaW5nV3JpdGVzQ2FsbGJhY2tzKGJhdGNoSWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS50cnlzLnB1c2goWzEsIDQsICwgNl0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmxvY2FsU3RvcmUuYWNrbm93bGVkZ2VCYXRjaChtdXRhdGlvbkJhdGNoUmVzdWx0KV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VzID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNoYXJlZENsaWVudFN0YXRlLnVwZGF0ZU11dGF0aW9uU3RhdGUoYmF0Y2hJZCwgJ2Fja25vd2xlZGdlZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmVtaXROZXdTbmFwc0FuZE5vdGlmeUxvY2FsU3RvcmUoY2hhbmdlcyldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCA2XTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yXzIgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIGlnbm9yZUlmUHJpbWFyeUxlYXNlTG9zcyhlcnJvcl8yKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA1OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDZdO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNjogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBTeW5jRW5naW5lLnByb3RvdHlwZS5yZWplY3RGYWlsZWRXcml0ZSA9IGZ1bmN0aW9uIChiYXRjaElkLCBlcnJvcikge1xyXG4gICAgICAgIHJldHVybiB0c2xpYi5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGNoYW5nZXMsIGVycm9yXzM7XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYi5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYXNzZXJ0U3Vic2NyaWJlZCgncmVqZWN0RmFpbGVkV3JpdGUoKScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGUgbG9jYWwgc3RvcmUgbWF5IG9yIG1heSBub3QgYmUgYWJsZSB0byBhcHBseSB0aGUgd3JpdGUgcmVzdWx0IGFuZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyByYWlzZSBldmVudHMgaW1tZWRpYXRlbHkgKGRlcGVuZGluZyBvbiB3aGV0aGVyIHRoZSB3YXRjaGVyIGlzIGNhdWdodCB1cCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNvIHdlIHJhaXNlIHVzZXIgY2FsbGJhY2tzIGZpcnN0IHNvIHRoYXQgdGhleSBjb25zaXN0ZW50bHkgaGFwcGVuIGJlZm9yZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBsaXN0ZW4gZXZlbnRzLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3NVc2VyQ2FsbGJhY2soYmF0Y2hJZCwgZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXJQZW5kaW5nV3JpdGVzQ2FsbGJhY2tzKGJhdGNoSWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS50cnlzLnB1c2goWzEsIDQsICwgNl0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmxvY2FsU3RvcmUucmVqZWN0QmF0Y2goYmF0Y2hJZCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlcyA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaGFyZWRDbGllbnRTdGF0ZS51cGRhdGVNdXRhdGlvblN0YXRlKGJhdGNoSWQsICdyZWplY3RlZCcsIGVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5lbWl0TmV3U25hcHNBbmROb3RpZnlMb2NhbFN0b3JlKGNoYW5nZXMpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgNl07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcl8zID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBpZ25vcmVJZlByaW1hcnlMZWFzZUxvc3MoZXJyb3JfMyldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCA2XTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDY6IHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZWdpc3RlcnMgYSB1c2VyIGNhbGxiYWNrIHRoYXQgcmVzb2x2ZXMgd2hlbiBhbGwgcGVuZGluZyBtdXRhdGlvbnMgYXQgdGhlIG1vbWVudCBvZiBjYWxsaW5nXHJcbiAgICAgKiBhcmUgYWNrbm93bGVkZ2VkIC5cclxuICAgICAqL1xyXG4gICAgU3luY0VuZ2luZS5wcm90b3R5cGUucmVnaXN0ZXJQZW5kaW5nV3JpdGVzQ2FsbGJhY2sgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcclxuICAgICAgICByZXR1cm4gdHNsaWIuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBoaWdoZXN0QmF0Y2hJZCwgY2FsbGJhY2tzO1xyXG4gICAgICAgICAgICByZXR1cm4gdHNsaWIuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMucmVtb3RlU3RvcmUuY2FuVXNlTmV0d29yaygpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWJ1ZyhMT0dfVEFHJDksICdUaGUgbmV0d29yayBpcyBkaXNhYmxlZC4gVGhlIHRhc2sgcmV0dXJuZWQgYnkgJyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCInYXdhaXRQZW5kaW5nV3JpdGVzKCknIHdpbGwgbm90IGNvbXBsZXRlIHVudGlsIHRoZSBuZXR3b3JrIGlzIGVuYWJsZWQuXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMubG9jYWxTdG9yZS5nZXRIaWdoZXN0VW5hY2tub3dsZWRnZWRCYXRjaElkKCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGlnaGVzdEJhdGNoSWQgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChoaWdoZXN0QmF0Y2hJZCA9PT0gQkFUQ0hJRF9VTktOT1dOKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBUcmlnZ2VyIHRoZSBjYWxsYmFjayByaWdodCBhd2F5IGlmIHRoZXJlIGlzIG5vIHBlbmRpbmcgd3JpdGVzIGF0IHRoZSBtb21lbnQuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjay5yZXNvbHZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2tzID0gdGhpcy5wZW5kaW5nV3JpdGVzQ2FsbGJhY2tzLmdldChoaWdoZXN0QmF0Y2hJZCkgfHwgW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrcy5wdXNoKGNhbGxiYWNrKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wZW5kaW5nV3JpdGVzQ2FsbGJhY2tzLnNldChoaWdoZXN0QmF0Y2hJZCwgY2FsbGJhY2tzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFRyaWdnZXJzIHRoZSBjYWxsYmFja3MgdGhhdCBhcmUgd2FpdGluZyBmb3IgdGhpcyBiYXRjaCBpZCB0byBnZXQgYWNrbm93bGVkZ2VkIGJ5IHNlcnZlcixcclxuICAgICAqIGlmIHRoZXJlIGFyZSBhbnkuXHJcbiAgICAgKi9cclxuICAgIFN5bmNFbmdpbmUucHJvdG90eXBlLnRyaWdnZXJQZW5kaW5nV3JpdGVzQ2FsbGJhY2tzID0gZnVuY3Rpb24gKGJhdGNoSWQpIHtcclxuICAgICAgICAodGhpcy5wZW5kaW5nV3JpdGVzQ2FsbGJhY2tzLmdldChiYXRjaElkKSB8fCBbXSkuZm9yRWFjaChmdW5jdGlvbiAoY2FsbGJhY2spIHtcclxuICAgICAgICAgICAgY2FsbGJhY2sucmVzb2x2ZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMucGVuZGluZ1dyaXRlc0NhbGxiYWNrcy5kZWxldGUoYmF0Y2hJZCk7XHJcbiAgICB9O1xyXG4gICAgLyoqIFJlamVjdCBhbGwgb3V0c3RhbmRpbmcgY2FsbGJhY2tzIHdhaXRpbmcgZm9yIHBlbmRpbmcgd3JpdGVzIHRvIGNvbXBsZXRlLiAqL1xyXG4gICAgU3luY0VuZ2luZS5wcm90b3R5cGUucmVqZWN0T3V0c3RhbmRpbmdQZW5kaW5nV3JpdGVzQ2FsbGJhY2tzID0gZnVuY3Rpb24gKGVycm9yTWVzc2FnZSkge1xyXG4gICAgICAgIHRoaXMucGVuZGluZ1dyaXRlc0NhbGxiYWNrcy5mb3JFYWNoKGZ1bmN0aW9uIChjYWxsYmFja3MpIHtcclxuICAgICAgICAgICAgY2FsbGJhY2tzLmZvckVhY2goZnVuY3Rpb24gKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgICAgICBjYWxsYmFjay5yZWplY3QobmV3IEZpcmVzdG9yZUVycm9yKENvZGUuQ0FOQ0VMTEVELCBlcnJvck1lc3NhZ2UpKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5wZW5kaW5nV3JpdGVzQ2FsbGJhY2tzLmNsZWFyKCk7XHJcbiAgICB9O1xyXG4gICAgU3luY0VuZ2luZS5wcm90b3R5cGUuYWRkTXV0YXRpb25DYWxsYmFjayA9IGZ1bmN0aW9uIChiYXRjaElkLCBjYWxsYmFjaykge1xyXG4gICAgICAgIHZhciBuZXdDYWxsYmFja3MgPSB0aGlzLm11dGF0aW9uVXNlckNhbGxiYWNrc1t0aGlzLmN1cnJlbnRVc2VyLnRvS2V5KCldO1xyXG4gICAgICAgIGlmICghbmV3Q2FsbGJhY2tzKSB7XHJcbiAgICAgICAgICAgIG5ld0NhbGxiYWNrcyA9IG5ldyBTb3J0ZWRNYXAocHJpbWl0aXZlQ29tcGFyYXRvcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIG5ld0NhbGxiYWNrcyA9IG5ld0NhbGxiYWNrcy5pbnNlcnQoYmF0Y2hJZCwgY2FsbGJhY2spO1xyXG4gICAgICAgIHRoaXMubXV0YXRpb25Vc2VyQ2FsbGJhY2tzW3RoaXMuY3VycmVudFVzZXIudG9LZXkoKV0gPSBuZXdDYWxsYmFja3M7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZXNvbHZlcyBvciByZWplY3RzIHRoZSB1c2VyIGNhbGxiYWNrIGZvciB0aGUgZ2l2ZW4gYmF0Y2ggYW5kIHRoZW4gZGlzY2FyZHNcclxuICAgICAqIGl0LlxyXG4gICAgICovXHJcbiAgICBTeW5jRW5naW5lLnByb3RvdHlwZS5wcm9jZXNzVXNlckNhbGxiYWNrID0gZnVuY3Rpb24gKGJhdGNoSWQsIGVycm9yKSB7XHJcbiAgICAgICAgdmFyIG5ld0NhbGxiYWNrcyA9IHRoaXMubXV0YXRpb25Vc2VyQ2FsbGJhY2tzW3RoaXMuY3VycmVudFVzZXIudG9LZXkoKV07XHJcbiAgICAgICAgLy8gTk9URTogTXV0YXRpb25zIHJlc3RvcmVkIGZyb20gcGVyc2lzdGVuY2Ugd29uJ3QgaGF2ZSBjYWxsYmFja3MsIHNvIGl0J3NcclxuICAgICAgICAvLyBva2F5IGZvciB0aGVyZSB0byBiZSBubyBjYWxsYmFjayBmb3IgdGhpcyBJRC5cclxuICAgICAgICBpZiAobmV3Q2FsbGJhY2tzKSB7XHJcbiAgICAgICAgICAgIHZhciBjYWxsYmFjayA9IG5ld0NhbGxiYWNrcy5nZXQoYmF0Y2hJZCk7XHJcbiAgICAgICAgICAgIGlmIChjYWxsYmFjaykge1xyXG4gICAgICAgICAgICAgICAgYXNzZXJ0KGJhdGNoSWQgPT09IG5ld0NhbGxiYWNrcy5taW5LZXkoKSwgJ011dGF0aW9uIGNhbGxiYWNrcyBwcm9jZXNzZWQgb3V0LW9mLW9yZGVyPycpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2sucmVqZWN0KGVycm9yKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrLnJlc29sdmUoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIG5ld0NhbGxiYWNrcyA9IG5ld0NhbGxiYWNrcy5yZW1vdmUoYmF0Y2hJZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5tdXRhdGlvblVzZXJDYWxsYmFja3NbdGhpcy5jdXJyZW50VXNlci50b0tleSgpXSA9IG5ld0NhbGxiYWNrcztcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgU3luY0VuZ2luZS5wcm90b3R5cGUucmVtb3ZlQW5kQ2xlYW51cFRhcmdldCA9IGZ1bmN0aW9uICh0YXJnZXRJZCwgZXJyb3IpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIGlmIChlcnJvciA9PT0gdm9pZCAwKSB7IGVycm9yID0gbnVsbDsgfVxyXG4gICAgICAgIHRoaXMuc2hhcmVkQ2xpZW50U3RhdGUucmVtb3ZlTG9jYWxRdWVyeVRhcmdldCh0YXJnZXRJZCk7XHJcbiAgICAgICAgYXNzZXJ0KHRoaXMucXVlcmllc0J5VGFyZ2V0W3RhcmdldElkXSAmJlxyXG4gICAgICAgICAgICB0aGlzLnF1ZXJpZXNCeVRhcmdldFt0YXJnZXRJZF0ubGVuZ3RoICE9PSAwLCBcIlRoZXJlIGFyZSBubyBxdWVyaWVzIG1hcHBlZCB0byB0YXJnZXQgaWQgXCIgKyB0YXJnZXRJZCk7XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHRoaXMucXVlcmllc0J5VGFyZ2V0W3RhcmdldElkXTsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgdmFyIHF1ZXJ5ID0gX2FbX2ldO1xyXG4gICAgICAgICAgICB0aGlzLnF1ZXJ5Vmlld3NCeVF1ZXJ5LmRlbGV0ZShxdWVyeSk7XHJcbiAgICAgICAgICAgIGlmIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zeW5jRW5naW5lTGlzdGVuZXIub25XYXRjaEVycm9yKHF1ZXJ5LCBlcnJvcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZGVsZXRlIHRoaXMucXVlcmllc0J5VGFyZ2V0W3RhcmdldElkXTtcclxuICAgICAgICBpZiAodGhpcy5pc1ByaW1hcnkpIHtcclxuICAgICAgICAgICAgdmFyIGxpbWJvS2V5cyA9IHRoaXMubGltYm9Eb2N1bWVudFJlZnMucmVmZXJlbmNlc0ZvcklkKHRhcmdldElkKTtcclxuICAgICAgICAgICAgdGhpcy5saW1ib0RvY3VtZW50UmVmcy5yZW1vdmVSZWZlcmVuY2VzRm9ySWQodGFyZ2V0SWQpO1xyXG4gICAgICAgICAgICBsaW1ib0tleXMuZm9yRWFjaChmdW5jdGlvbiAobGltYm9LZXkpIHtcclxuICAgICAgICAgICAgICAgIHZhciBpc1JlZmVyZW5jZWQgPSBfdGhpcy5saW1ib0RvY3VtZW50UmVmcy5jb250YWluc0tleShsaW1ib0tleSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWlzUmVmZXJlbmNlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFdlIHJlbW92ZWQgdGhlIGxhc3QgcmVmZXJlbmNlIGZvciB0aGlzIGtleVxyXG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnJlbW92ZUxpbWJvVGFyZ2V0KGxpbWJvS2V5KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFN5bmNFbmdpbmUucHJvdG90eXBlLnJlbW92ZUxpbWJvVGFyZ2V0ID0gZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgIC8vIEl0J3MgcG9zc2libGUgdGhhdCB0aGUgdGFyZ2V0IGFscmVhZHkgZ290IHJlbW92ZWQgYmVjYXVzZSB0aGUgcXVlcnkgZmFpbGVkLiBJbiB0aGF0IGNhc2UsXHJcbiAgICAgICAgLy8gdGhlIGtleSB3b24ndCBleGlzdCBpbiBgbGltYm9UYXJnZXRzQnlLZXlgLiBPbmx5IGRvIHRoZSBjbGVhbnVwIGlmIHdlIHN0aWxsIGhhdmUgdGhlIHRhcmdldC5cclxuICAgICAgICB2YXIgbGltYm9UYXJnZXRJZCA9IHRoaXMubGltYm9UYXJnZXRzQnlLZXkuZ2V0KGtleSk7XHJcbiAgICAgICAgaWYgKGxpbWJvVGFyZ2V0SWQgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgLy8gVGhpcyB0YXJnZXQgYWxyZWFkeSBnb3QgcmVtb3ZlZCwgYmVjYXVzZSB0aGUgcXVlcnkgZmFpbGVkLlxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMucmVtb3RlU3RvcmUudW5saXN0ZW4obGltYm9UYXJnZXRJZCk7XHJcbiAgICAgICAgdGhpcy5saW1ib1RhcmdldHNCeUtleSA9IHRoaXMubGltYm9UYXJnZXRzQnlLZXkucmVtb3ZlKGtleSk7XHJcbiAgICAgICAgZGVsZXRlIHRoaXMubGltYm9SZXNvbHV0aW9uc0J5VGFyZ2V0W2xpbWJvVGFyZ2V0SWRdO1xyXG4gICAgfTtcclxuICAgIFN5bmNFbmdpbmUucHJvdG90eXBlLnVwZGF0ZVRyYWNrZWRMaW1ib3MgPSBmdW5jdGlvbiAodGFyZ2V0SWQsIGxpbWJvQ2hhbmdlcykge1xyXG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgbGltYm9DaGFuZ2VzXzEgPSBsaW1ib0NoYW5nZXM7IF9pIDwgbGltYm9DaGFuZ2VzXzEubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBsaW1ib0NoYW5nZSA9IGxpbWJvQ2hhbmdlc18xW19pXTtcclxuICAgICAgICAgICAgaWYgKGxpbWJvQ2hhbmdlIGluc3RhbmNlb2YgQWRkZWRMaW1ib0RvY3VtZW50KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxpbWJvRG9jdW1lbnRSZWZzLmFkZFJlZmVyZW5jZShsaW1ib0NoYW5nZS5rZXksIHRhcmdldElkKTtcclxuICAgICAgICAgICAgICAgIHRoaXMudHJhY2tMaW1ib0NoYW5nZShsaW1ib0NoYW5nZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAobGltYm9DaGFuZ2UgaW5zdGFuY2VvZiBSZW1vdmVkTGltYm9Eb2N1bWVudCkge1xyXG4gICAgICAgICAgICAgICAgZGVidWcoTE9HX1RBRyQ5LCAnRG9jdW1lbnQgbm8gbG9uZ2VyIGluIGxpbWJvOiAnICsgbGltYm9DaGFuZ2Uua2V5KTtcclxuICAgICAgICAgICAgICAgIHRoaXMubGltYm9Eb2N1bWVudFJlZnMucmVtb3ZlUmVmZXJlbmNlKGxpbWJvQ2hhbmdlLmtleSwgdGFyZ2V0SWQpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGlzUmVmZXJlbmNlZCA9IHRoaXMubGltYm9Eb2N1bWVudFJlZnMuY29udGFpbnNLZXkobGltYm9DaGFuZ2Uua2V5KTtcclxuICAgICAgICAgICAgICAgIGlmICghaXNSZWZlcmVuY2VkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gV2UgcmVtb3ZlZCB0aGUgbGFzdCByZWZlcmVuY2UgZm9yIHRoaXMga2V5XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVMaW1ib1RhcmdldChsaW1ib0NoYW5nZS5rZXkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZmFpbCgnVW5rbm93biBsaW1ibyBjaGFuZ2U6ICcgKyBKU09OLnN0cmluZ2lmeShsaW1ib0NoYW5nZSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFN5bmNFbmdpbmUucHJvdG90eXBlLnRyYWNrTGltYm9DaGFuZ2UgPSBmdW5jdGlvbiAobGltYm9DaGFuZ2UpIHtcclxuICAgICAgICB2YXIga2V5ID0gbGltYm9DaGFuZ2Uua2V5O1xyXG4gICAgICAgIGlmICghdGhpcy5saW1ib1RhcmdldHNCeUtleS5nZXQoa2V5KSkge1xyXG4gICAgICAgICAgICBkZWJ1ZyhMT0dfVEFHJDksICdOZXcgZG9jdW1lbnQgaW4gbGltYm86ICcgKyBrZXkpO1xyXG4gICAgICAgICAgICB2YXIgbGltYm9UYXJnZXRJZCA9IHRoaXMubGltYm9UYXJnZXRJZEdlbmVyYXRvci5uZXh0KCk7XHJcbiAgICAgICAgICAgIHZhciBxdWVyeSA9IFF1ZXJ5LmF0UGF0aChrZXkucGF0aCk7XHJcbiAgICAgICAgICAgIHRoaXMubGltYm9SZXNvbHV0aW9uc0J5VGFyZ2V0W2xpbWJvVGFyZ2V0SWRdID0gbmV3IExpbWJvUmVzb2x1dGlvbihrZXkpO1xyXG4gICAgICAgICAgICB0aGlzLnJlbW90ZVN0b3JlLmxpc3RlbihuZXcgVGFyZ2V0RGF0YShxdWVyeS50b1RhcmdldCgpLCBsaW1ib1RhcmdldElkLCBUYXJnZXRQdXJwb3NlLkxpbWJvUmVzb2x1dGlvbiwgTGlzdGVuU2VxdWVuY2UuSU5WQUxJRCkpO1xyXG4gICAgICAgICAgICB0aGlzLmxpbWJvVGFyZ2V0c0J5S2V5ID0gdGhpcy5saW1ib1RhcmdldHNCeUtleS5pbnNlcnQoa2V5LCBsaW1ib1RhcmdldElkKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLy8gVmlzaWJsZSBmb3IgdGVzdGluZ1xyXG4gICAgU3luY0VuZ2luZS5wcm90b3R5cGUuY3VycmVudExpbWJvRG9jcyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5saW1ib1RhcmdldHNCeUtleTtcclxuICAgIH07XHJcbiAgICBTeW5jRW5naW5lLnByb3RvdHlwZS5lbWl0TmV3U25hcHNBbmROb3RpZnlMb2NhbFN0b3JlID0gZnVuY3Rpb24gKGNoYW5nZXMsIHJlbW90ZUV2ZW50KSB7XHJcbiAgICAgICAgcmV0dXJuIHRzbGliLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgbmV3U25hcHMsIGRvY0NoYW5nZXNJbkFsbFZpZXdzLCBxdWVyaWVzUHJvY2Vzc2VkO1xyXG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgICAgICByZXR1cm4gdHNsaWIuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdTbmFwcyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkb2NDaGFuZ2VzSW5BbGxWaWV3cyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBxdWVyaWVzUHJvY2Vzc2VkID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucXVlcnlWaWV3c0J5UXVlcnkuZm9yRWFjaChmdW5jdGlvbiAoXywgcXVlcnlWaWV3KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdWVyaWVzUHJvY2Vzc2VkLnB1c2goUHJvbWlzZS5yZXNvbHZlKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZpZXdEb2NDaGFuZ2VzID0gcXVlcnlWaWV3LnZpZXcuY29tcHV0ZURvY0NoYW5nZXMoY2hhbmdlcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF2aWV3RG9jQ2hhbmdlcy5uZWVkc1JlZmlsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdmlld0RvY0NoYW5nZXM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoZSBxdWVyeSBoYXMgYSBsaW1pdCBhbmQgc29tZSBkb2NzIHdlcmUgcmVtb3ZlZCwgc28gd2UgbmVlZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRvIHJlLXJ1biB0aGUgcXVlcnkgYWdhaW5zdCB0aGUgbG9jYWwgc3RvcmUgdG8gbWFrZSBzdXJlIHdlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZGlkbid0IGxvc2UgYW55IGdvb2QgZG9jcyB0aGF0IGhhZCBiZWVuIHBhc3QgdGhlIGxpbWl0LlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5sb2NhbFN0b3JlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5leGVjdXRlUXVlcnkocXVlcnlWaWV3LnF1ZXJ5LCAvKiB1c2VQcmV2aW91c1Jlc3VsdHM9ICovIGZhbHNlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRvY3VtZW50cyA9IF9hLmRvY3VtZW50cztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHF1ZXJ5Vmlldy52aWV3LmNvbXB1dGVEb2NDaGFuZ2VzKGRvY3VtZW50cywgdmlld0RvY0NoYW5nZXMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAodmlld0RvY0NoYW5nZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0Q2hhbmdlID0gcmVtb3RlRXZlbnQgJiYgcmVtb3RlRXZlbnQudGFyZ2V0Q2hhbmdlc1txdWVyeVZpZXcudGFyZ2V0SWRdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2aWV3Q2hhbmdlID0gcXVlcnlWaWV3LnZpZXcuYXBwbHlDaGFuZ2VzKHZpZXdEb2NDaGFuZ2VzLCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiB1cGRhdGVMaW1ib0RvY3VtZW50cz0gKi8gX3RoaXMuaXNQcmltYXJ5ID09PSB0cnVlLCB0YXJnZXRDaGFuZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnVwZGF0ZVRyYWNrZWRMaW1ib3MocXVlcnlWaWV3LnRhcmdldElkLCB2aWV3Q2hhbmdlLmxpbWJvQ2hhbmdlcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZpZXdDaGFuZ2Uuc25hcHNob3QpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLmlzUHJpbWFyeSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuc2hhcmVkQ2xpZW50U3RhdGUudXBkYXRlUXVlcnlTdGF0ZShxdWVyeVZpZXcudGFyZ2V0SWQsIHZpZXdDaGFuZ2Uuc25hcHNob3QuZnJvbUNhY2hlID8gJ25vdC1jdXJyZW50JyA6ICdjdXJyZW50Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3U25hcHMucHVzaCh2aWV3Q2hhbmdlLnNuYXBzaG90KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRvY0NoYW5nZXMgPSBMb2NhbFZpZXdDaGFuZ2VzLmZyb21TbmFwc2hvdChxdWVyeVZpZXcudGFyZ2V0SWQsIHZpZXdDaGFuZ2Uuc25hcHNob3QpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2NDaGFuZ2VzSW5BbGxWaWV3cy5wdXNoKGRvY0NoYW5nZXMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIFByb21pc2UuYWxsKHF1ZXJpZXNQcm9jZXNzZWQpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zeW5jRW5naW5lTGlzdGVuZXIub25XYXRjaENoYW5nZShuZXdTbmFwcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMubG9jYWxTdG9yZS5ub3RpZnlMb2NhbFZpZXdDaGFuZ2VzKGRvY0NoYW5nZXNJbkFsbFZpZXdzKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgU3luY0VuZ2luZS5wcm90b3R5cGUuYXNzZXJ0U3Vic2NyaWJlZCA9IGZ1bmN0aW9uIChmbk5hbWUpIHtcclxuICAgICAgICBhc3NlcnQodGhpcy5zeW5jRW5naW5lTGlzdGVuZXIgIT09IG51bGwsICdUcnlpbmcgdG8gY2FsbCAnICsgZm5OYW1lICsgJyBiZWZvcmUgY2FsbGluZyBzdWJzY3JpYmUoKS4nKTtcclxuICAgIH07XHJcbiAgICBTeW5jRW5naW5lLnByb3RvdHlwZS5oYW5kbGVDcmVkZW50aWFsQ2hhbmdlID0gZnVuY3Rpb24gKHVzZXIpIHtcclxuICAgICAgICByZXR1cm4gdHNsaWIuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciB1c2VyQ2hhbmdlZCwgcmVzdWx0O1xyXG4gICAgICAgICAgICByZXR1cm4gdHNsaWIuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB1c2VyQ2hhbmdlZCA9ICF0aGlzLmN1cnJlbnRVc2VyLmlzRXF1YWwodXNlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudFVzZXIgPSB1c2VyO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXVzZXJDaGFuZ2VkKSByZXR1cm4gWzMgLypicmVhayovLCAzXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRmFpbHMgdGFza3Mgd2FpdGluZyBmb3IgcGVuZGluZyB3cml0ZXMgcmVxdWVzdGVkIGJ5IHByZXZpb3VzIHVzZXIuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVqZWN0T3V0c3RhbmRpbmdQZW5kaW5nV3JpdGVzQ2FsbGJhY2tzKFwiJ3dhaXRGb3JQZW5kaW5nV3JpdGVzJyBwcm9taXNlIGlzIHJlamVjdGVkIGR1ZSB0byBhIHVzZXIgY2hhbmdlLlwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5sb2NhbFN0b3JlLmhhbmRsZVVzZXJDaGFuZ2UodXNlcildO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUT0RPKGIvMTE0MjI2NDE3KTogQ29uc2lkZXIgY2FsbGluZyB0aGlzIG9ubHkgaW4gdGhlIHByaW1hcnkgdGFiLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNoYXJlZENsaWVudFN0YXRlLmhhbmRsZVVzZXJDaGFuZ2UodXNlciwgcmVzdWx0LnJlbW92ZWRCYXRjaElkcywgcmVzdWx0LmFkZGVkQmF0Y2hJZHMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmVtaXROZXdTbmFwc0FuZE5vdGlmeUxvY2FsU3RvcmUocmVzdWx0LmFmZmVjdGVkRG9jdW1lbnRzKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLmxhYmVsID0gMztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6IHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMucmVtb3RlU3RvcmUuaGFuZGxlQ3JlZGVudGlhbENoYW5nZSgpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLXRhYiBvbmx5XHJcbiAgICBTeW5jRW5naW5lLnByb3RvdHlwZS5hcHBseVByaW1hcnlTdGF0ZSA9IGZ1bmN0aW9uIChpc1ByaW1hcnkpIHtcclxuICAgICAgICByZXR1cm4gdHNsaWIuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBhY3RpdmVUYXJnZXRzLCBhY3RpdmVRdWVyaWVzLCBfaSwgYWN0aXZlUXVlcmllc18xLCB0YXJnZXREYXRhLCBhY3RpdmVUYXJnZXRzXzEsIHBfMTtcclxuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEoaXNQcmltYXJ5ID09PSB0cnVlICYmIHRoaXMuaXNQcmltYXJ5ICE9PSB0cnVlKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgM107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaXNQcmltYXJ5ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5yZW1vdGVTdG9yZS5hcHBseVByaW1hcnlTdGF0ZSh0cnVlKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZVRhcmdldHMgPSB0aGlzLnNoYXJlZENsaWVudFN0YXRlLmdldEFsbEFjdGl2ZVF1ZXJ5VGFyZ2V0cygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLnN5bmNocm9uaXplUXVlcnlWaWV3c0FuZFJhaXNlU25hcHNob3RzKGFjdGl2ZVRhcmdldHMudG9BcnJheSgpKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmVRdWVyaWVzID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKF9pID0gMCwgYWN0aXZlUXVlcmllc18xID0gYWN0aXZlUXVlcmllczsgX2kgPCBhY3RpdmVRdWVyaWVzXzEubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXREYXRhID0gYWN0aXZlUXVlcmllc18xW19pXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3RlU3RvcmUubGlzdGVuKHRhcmdldERhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDddO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEoaXNQcmltYXJ5ID09PSBmYWxzZSAmJiB0aGlzLmlzUHJpbWFyeSAhPT0gZmFsc2UpKSByZXR1cm4gWzMgLypicmVhayovLCA3XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pc1ByaW1hcnkgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlVGFyZ2V0c18xID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBfMSA9IFByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JFYWNoTnVtYmVyKHRoaXMucXVlcmllc0J5VGFyZ2V0LCBmdW5jdGlvbiAodGFyZ2V0SWQsIF8pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfdGhpcy5zaGFyZWRDbGllbnRTdGF0ZS5pc0xvY2FsUXVlcnlUYXJnZXQodGFyZ2V0SWQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlVGFyZ2V0c18xLnB1c2godGFyZ2V0SWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcF8xID0gcF8xLnRoZW4oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5yZW1vdmVBbmRDbGVhbnVwVGFyZ2V0KHRhcmdldElkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLmxvY2FsU3RvcmUucmVsZWFzZVRhcmdldCh0YXJnZXRJZCwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qa2VlcFBlcnNpc3RlZFRhcmdldERhdGE9Ki8gdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5yZW1vdGVTdG9yZS51bmxpc3Rlbih0YXJnZXRJZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBwXzFdO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLnN5bmNocm9uaXplUXVlcnlWaWV3c0FuZFJhaXNlU25hcHNob3RzKGFjdGl2ZVRhcmdldHNfMSldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlc2V0TGltYm9Eb2N1bWVudHMoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5yZW1vdGVTdG9yZS5hcHBseVByaW1hcnlTdGF0ZShmYWxzZSldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDc7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA3OiByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktdGFiIG9ubHkuXHJcbiAgICBTeW5jRW5naW5lLnByb3RvdHlwZS5yZXNldExpbWJvRG9jdW1lbnRzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgZm9yRWFjaE51bWJlcih0aGlzLmxpbWJvUmVzb2x1dGlvbnNCeVRhcmdldCwgZnVuY3Rpb24gKHRhcmdldElkKSB7XHJcbiAgICAgICAgICAgIF90aGlzLnJlbW90ZVN0b3JlLnVubGlzdGVuKHRhcmdldElkKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmxpbWJvRG9jdW1lbnRSZWZzLnJlbW92ZUFsbFJlZmVyZW5jZXMoKTtcclxuICAgICAgICB0aGlzLmxpbWJvUmVzb2x1dGlvbnNCeVRhcmdldCA9IFtdO1xyXG4gICAgICAgIHRoaXMubGltYm9UYXJnZXRzQnlLZXkgPSBuZXcgU29ydGVkTWFwKERvY3VtZW50S2V5LmNvbXBhcmF0b3IpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmVjb25jaWxlIHRoZSBxdWVyeSB2aWV3cyBvZiB0aGUgcHJvdmlkZWQgcXVlcnkgdGFyZ2V0cyB3aXRoIHRoZSBzdGF0ZSBmcm9tXHJcbiAgICAgKiBwZXJzaXN0ZW5jZS4gUmFpc2VzIHNuYXBzaG90cyBmb3IgYW55IGNoYW5nZXMgdGhhdCBhZmZlY3QgdGhlIGxvY2FsXHJcbiAgICAgKiBjbGllbnQgYW5kIHJldHVybnMgdGhlIHVwZGF0ZWQgc3RhdGUgb2YgYWxsIHRhcmdldCdzIHF1ZXJ5IGRhdGEuXHJcbiAgICAgKi9cclxuICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktdGFiIG9ubHkuXHJcbiAgICBTeW5jRW5naW5lLnByb3RvdHlwZS5zeW5jaHJvbml6ZVF1ZXJ5Vmlld3NBbmRSYWlzZVNuYXBzaG90cyA9IGZ1bmN0aW9uICh0YXJnZXRzKSB7XHJcbiAgICAgICAgcmV0dXJuIHRzbGliLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgYWN0aXZlUXVlcmllcywgbmV3Vmlld1NuYXBzaG90cywgX2ksIHRhcmdldHNfMSwgdGFyZ2V0SWQsIHRhcmdldERhdGEsIHF1ZXJpZXMsIF9hLCBxdWVyaWVzXzEsIHF1ZXJ5LCBxdWVyeVZpZXcsIHZpZXdDaGFuZ2UsIHRhcmdldDtcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYikge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYi5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlUXVlcmllcyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdWaWV3U25hcHNob3RzID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9pID0gMCwgdGFyZ2V0c18xID0gdGFyZ2V0cztcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2IubGFiZWwgPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEoX2kgPCB0YXJnZXRzXzEubGVuZ3RoKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgMTRdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRJZCA9IHRhcmdldHNfMVtfaV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldERhdGEgPSB2b2lkIDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJpZXMgPSB0aGlzLnF1ZXJpZXNCeVRhcmdldFt0YXJnZXRJZF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKHF1ZXJpZXMgJiYgcXVlcmllcy5sZW5ndGggIT09IDApKSByZXR1cm4gWzMgLypicmVhayovLCA4XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRm9yIHF1ZXJpZXMgdGhhdCBoYXZlIGEgbG9jYWwgVmlldywgd2UgbmVlZCB0byB1cGRhdGUgdGhlaXIgc3RhdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gaW4gTG9jYWxTdG9yZSAoYXMgdGhlIHJlc3VtZSB0b2tlbiBhbmQgdGhlIHNuYXBzaG90IHZlcnNpb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gbWlnaHQgaGF2ZSBjaGFuZ2VkKSBhbmQgcmVjb25jaWxlIHRoZWlyIHZpZXdzIHdpdGggdGhlIHBlcnNpc3RlZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBzdGF0ZSAodGhlIGxpc3Qgb2Ygc3luY2VkRG9jdW1lbnRzIG1heSBoYXZlIGdvdHRlbiBvdXQgb2Ygc3luYykuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMubG9jYWxTdG9yZS5yZWxlYXNlVGFyZ2V0KHRhcmdldElkLCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qa2VlcFBlcnNpc3RlZFRhcmdldERhdGE9Ki8gdHJ1ZSldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRm9yIHF1ZXJpZXMgdGhhdCBoYXZlIGEgbG9jYWwgVmlldywgd2UgbmVlZCB0byB1cGRhdGUgdGhlaXIgc3RhdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gaW4gTG9jYWxTdG9yZSAoYXMgdGhlIHJlc3VtZSB0b2tlbiBhbmQgdGhlIHNuYXBzaG90IHZlcnNpb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gbWlnaHQgaGF2ZSBjaGFuZ2VkKSBhbmQgcmVjb25jaWxlIHRoZWlyIHZpZXdzIHdpdGggdGhlIHBlcnNpc3RlZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBzdGF0ZSAodGhlIGxpc3Qgb2Ygc3luY2VkRG9jdW1lbnRzIG1heSBoYXZlIGdvdHRlbiBvdXQgb2Ygc3luYykuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9iLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5sb2NhbFN0b3JlLmFsbG9jYXRlVGFyZ2V0KHF1ZXJpZXNbMF0udG9UYXJnZXQoKSldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0RGF0YSA9IF9iLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2EgPSAwLCBxdWVyaWVzXzEgPSBxdWVyaWVzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYi5sYWJlbCA9IDQ7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShfYSA8IHF1ZXJpZXNfMS5sZW5ndGgpKSByZXR1cm4gWzMgLypicmVhayovLCA3XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcXVlcnkgPSBxdWVyaWVzXzFbX2FdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBxdWVyeVZpZXcgPSB0aGlzLnF1ZXJ5Vmlld3NCeVF1ZXJ5LmdldChxdWVyeSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFzc2VydCghIXF1ZXJ5VmlldywgXCJObyBxdWVyeSB2aWV3IGZvdW5kIGZvciBcIiArIHF1ZXJ5KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5zeW5jaHJvbml6ZVZpZXdBbmRDb21wdXRlU25hcHNob3QocXVlcnlWaWV3KV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA1OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2aWV3Q2hhbmdlID0gX2Iuc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodmlld0NoYW5nZS5zbmFwc2hvdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3Vmlld1NuYXBzaG90cy5wdXNoKHZpZXdDaGFuZ2Uuc25hcHNob3QpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9iLmxhYmVsID0gNjtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDY6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hKys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDRdO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNzogcmV0dXJuIFszIC8qYnJlYWsqLywgMTJdO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgODpcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXJ0KHRoaXMuaXNQcmltYXJ5ID09PSB0cnVlLCAnQSBzZWNvbmRhcnkgdGFiIHNob3VsZCBuZXZlciBoYXZlIGFuIGFjdGl2ZSB0YXJnZXQgd2l0aG91dCBhbiBhY3RpdmUgcXVlcnkuJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMubG9jYWxTdG9yZS5nZXRUYXJnZXQodGFyZ2V0SWQpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDk6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldCA9IF9iLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXJ0KCEhdGFyZ2V0LCBcIlRhcmdldCBmb3IgaWQgXCIgKyB0YXJnZXRJZCArIFwiIG5vdCBmb3VuZFwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5sb2NhbFN0b3JlLmFsbG9jYXRlVGFyZ2V0KHRhcmdldCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldERhdGEgPSBfYi5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuaW5pdGlhbGl6ZVZpZXdBbmRDb21wdXRlU25hcHNob3QodGhpcy5zeW50aGVzaXplVGFyZ2V0VG9RdWVyeSh0YXJnZXQpLCB0YXJnZXRJZCwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKmN1cnJlbnQ9Ki8gZmFsc2UpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDExOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYi5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9iLmxhYmVsID0gMTI7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxMjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlUXVlcmllcy5wdXNoKHRhcmdldERhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYi5sYWJlbCA9IDEzO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTM6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9pKys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDFdO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3luY0VuZ2luZUxpc3RlbmVyLm9uV2F0Y2hDaGFuZ2UobmV3Vmlld1NuYXBzaG90cyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBhY3RpdmVRdWVyaWVzXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGVzIGEgYFF1ZXJ5YCBvYmplY3QgZnJvbSB0aGUgc3BlY2lmaWVkIGBUYXJnZXRgLiBUaGVyZSBpcyBubyB3YXkgdG9cclxuICAgICAqIG9idGFpbiB0aGUgb3JpZ2luYWwgYFF1ZXJ5YCwgc28gd2Ugc3ludGhlc2l6ZSBhIGBRdWVyeWAgZnJvbSB0aGUgYFRhcmdldGBcclxuICAgICAqIG9iamVjdC5cclxuICAgICAqXHJcbiAgICAgKiBUaGUgc3ludGhlc2l6ZWQgcmVzdWx0IG1pZ2h0IGJlIGRpZmZlcmVudCBmcm9tIHRoZSBvcmlnaW5hbCBgUXVlcnlgLCBidXRcclxuICAgICAqIHNpbmNlIHRoZSBzeW50aGVzaXplZCBgUXVlcnlgIHNob3VsZCByZXR1cm4gdGhlIHNhbWUgcmVzdWx0cyBhcyB0aGVcclxuICAgICAqIG9yaWdpbmFsIG9uZSAob25seSB0aGUgcHJlc2VudGF0aW9uIG9mIHJlc3VsdHMgbWlnaHQgZGlmZmVyKSwgdGhlIHBvdGVudGlhbFxyXG4gICAgICogZGlmZmVyZW5jZSB3aWxsIG5vdCBjYXVzZSBpc3N1ZXMuXHJcbiAgICAgKi9cclxuICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktdGFiIG9ubHlcclxuICAgIFN5bmNFbmdpbmUucHJvdG90eXBlLnN5bnRoZXNpemVUYXJnZXRUb1F1ZXJ5ID0gZnVuY3Rpb24gKHRhcmdldCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgUXVlcnkodGFyZ2V0LnBhdGgsIHRhcmdldC5jb2xsZWN0aW9uR3JvdXAsIHRhcmdldC5vcmRlckJ5LCB0YXJnZXQuZmlsdGVycywgdGFyZ2V0LmxpbWl0LCBMaW1pdFR5cGUuRmlyc3QsIHRhcmdldC5zdGFydEF0LCB0YXJnZXQuZW5kQXQpO1xyXG4gICAgfTtcclxuICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktdGFiIG9ubHlcclxuICAgIFN5bmNFbmdpbmUucHJvdG90eXBlLmdldEFjdGl2ZUNsaWVudHMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubG9jYWxTdG9yZS5nZXRBY3RpdmVDbGllbnRzKCk7XHJcbiAgICB9O1xyXG4gICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS10YWIgb25seVxyXG4gICAgU3luY0VuZ2luZS5wcm90b3R5cGUuYXBwbHlUYXJnZXRTdGF0ZSA9IGZ1bmN0aW9uICh0YXJnZXRJZCwgc3RhdGUsIGVycm9yKSB7XHJcbiAgICAgICAgcmV0dXJuIHRzbGliLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgX2EsIGNoYW5nZXMsIHN5bnRoZXNpemVkUmVtb3RlRXZlbnQ7XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYi5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2IpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2IubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzUHJpbWFyeSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgd2UgcmVjZWl2ZSBhIHRhcmdldCBzdGF0ZSBub3RpZmljYXRpb24gdmlhIFdlYlN0b3JhZ2UsIHdlIGFyZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZWl0aGVyIGFscmVhZHkgc2Vjb25kYXJ5IG9yIGFub3RoZXIgdGFiIGhhcyB0YWtlbiB0aGUgcHJpbWFyeSBsZWFzZS5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlYnVnKExPR19UQUckOSwgJ0lnbm9yaW5nIHVuZXhwZWN0ZWQgcXVlcnkgc3RhdGUgbm90aWZpY2F0aW9uLicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5xdWVyaWVzQnlUYXJnZXRbdGFyZ2V0SWRdKSByZXR1cm4gWzMgLypicmVhayovLCA3XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2EgPSBzdGF0ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfYSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnY3VycmVudCc6IHJldHVybiBbMyAvKmJyZWFrKi8sIDFdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnbm90LWN1cnJlbnQnOiByZXR1cm4gWzMgLypicmVhayovLCAxXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3JlamVjdGVkJzogcmV0dXJuIFszIC8qYnJlYWsqLywgNF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgNl07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOiByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmxvY2FsU3RvcmUuZ2V0TmV3RG9jdW1lbnRDaGFuZ2VzKCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlcyA9IF9iLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3ludGhlc2l6ZWRSZW1vdGVFdmVudCA9IFJlbW90ZUV2ZW50LmNyZWF0ZVN5bnRoZXNpemVkUmVtb3RlRXZlbnRGb3JDdXJyZW50Q2hhbmdlKHRhcmdldElkLCBzdGF0ZSA9PT0gJ2N1cnJlbnQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5lbWl0TmV3U25hcHNBbmROb3RpZnlMb2NhbFN0b3JlKGNoYW5nZXMsIHN5bnRoZXNpemVkUmVtb3RlRXZlbnQpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9iLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgN107XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OiByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmxvY2FsU3RvcmUucmVsZWFzZVRhcmdldCh0YXJnZXRJZCwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIGtlZXBQZXJzaXN0ZWRUYXJnZXREYXRhICovIHRydWUpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9iLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVBbmRDbGVhbnVwVGFyZ2V0KHRhcmdldElkLCBlcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDddO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmFpbCgnVW5leHBlY3RlZCB0YXJnZXQgc3RhdGU6ICcgKyBzdGF0ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9iLmxhYmVsID0gNztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDc6IHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS10YWIgb25seVxyXG4gICAgU3luY0VuZ2luZS5wcm90b3R5cGUuYXBwbHlBY3RpdmVUYXJnZXRzQ2hhbmdlID0gZnVuY3Rpb24gKGFkZGVkLCByZW1vdmVkKSB7XHJcbiAgICAgICAgcmV0dXJuIHRzbGliLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgX2ksIGFkZGVkXzEsIHRhcmdldElkLCB0YXJnZXQsIHRhcmdldERhdGEsIF9sb29wXzEsIHRoaXNfMSwgX2EsIHJlbW92ZWRfMSwgdGFyZ2V0SWQ7XHJcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYi5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2IpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2IubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5pc1ByaW1hcnkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfaSA9IDAsIGFkZGVkXzEgPSBhZGRlZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2IubGFiZWwgPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEoX2kgPCBhZGRlZF8xLmxlbmd0aCkpIHJldHVybiBbMyAvKmJyZWFrKi8sIDZdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRJZCA9IGFkZGVkXzFbX2ldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhc3NlcnQoIXRoaXMucXVlcmllc0J5VGFyZ2V0W3RhcmdldElkXSwgJ1RyeWluZyB0byBhZGQgYW4gYWxyZWFkeSBhY3RpdmUgdGFyZ2V0Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMubG9jYWxTdG9yZS5nZXRUYXJnZXQodGFyZ2V0SWQpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldCA9IF9iLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXJ0KCEhdGFyZ2V0LCBcIlF1ZXJ5IGRhdGEgZm9yIGFjdGl2ZSB0YXJnZXQgXCIgKyB0YXJnZXRJZCArIFwiIG5vdCBmb3VuZFwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5sb2NhbFN0b3JlLmFsbG9jYXRlVGFyZ2V0KHRhcmdldCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0RGF0YSA9IF9iLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5pbml0aWFsaXplVmlld0FuZENvbXB1dGVTbmFwc2hvdCh0aGlzLnN5bnRoZXNpemVUYXJnZXRUb1F1ZXJ5KHRhcmdldCksIHRhcmdldERhdGEudGFyZ2V0SWQsIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLypjdXJyZW50PSovIGZhbHNlKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYi5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3RlU3RvcmUubGlzdGVuKHRhcmdldERhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYi5sYWJlbCA9IDU7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA1OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfaSsrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCAxXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDY6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9sb29wXzEgPSBmdW5jdGlvbiAodGFyZ2V0SWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0c2xpYi5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIHRoYXQgdGhlIHRhcmdldCBpcyBzdGlsbCBhY3RpdmUgc2luY2UgdGhlIHRhcmdldCBtaWdodCBoYXZlIGJlZW5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlbW92ZWQgaWYgaXQgaGFzIGJlZW4gcmVqZWN0ZWQgYnkgdGhlIGJhY2tlbmQuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXNfMS5xdWVyaWVzQnlUYXJnZXRbdGFyZ2V0SWRdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIFwiY29udGludWVcIl07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBSZWxlYXNlIHF1ZXJpZXMgdGhhdCBhcmUgc3RpbGwgYWN0aXZlLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpc18xLmxvY2FsU3RvcmVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlbGVhc2VUYXJnZXQodGFyZ2V0SWQsIC8qIGtlZXBQZXJzaXN0ZWRUYXJnZXREYXRhICovIGZhbHNlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnJlbW90ZVN0b3JlLnVubGlzdGVuKHRhcmdldElkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMucmVtb3ZlQW5kQ2xlYW51cFRhcmdldCh0YXJnZXRJZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGlnbm9yZUlmUHJpbWFyeUxlYXNlTG9zcyldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBSZWxlYXNlIHF1ZXJpZXMgdGhhdCBhcmUgc3RpbGwgYWN0aXZlLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzXzEgPSB0aGlzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYSA9IDAsIHJlbW92ZWRfMSA9IHJlbW92ZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9iLmxhYmVsID0gNztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDc6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKF9hIDwgcmVtb3ZlZF8xLmxlbmd0aCkpIHJldHVybiBbMyAvKmJyZWFrKi8sIDEwXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0SWQgPSByZW1vdmVkXzFbX2FdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzUgLyp5aWVsZCoqLywgX2xvb3BfMSh0YXJnZXRJZCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgODpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Iuc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYi5sYWJlbCA9IDk7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA5OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYSsrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCA3XTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDEwOiByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktdGFiIG9ubHkuIEluIG90aGVyIGNsaWVudHMsIExvY2FsU3RvcmUgaXMgdW5hd2FyZSBvZlxyXG4gICAgLy8gdGhlIG9ubGluZSBzdGF0ZS5cclxuICAgIFN5bmNFbmdpbmUucHJvdG90eXBlLmVuYWJsZU5ldHdvcmsgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5sb2NhbFN0b3JlLnNldE5ldHdvcmtFbmFibGVkKHRydWUpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnJlbW90ZVN0b3JlLmVuYWJsZU5ldHdvcmsoKTtcclxuICAgIH07XHJcbiAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLXRhYiBvbmx5LiBJbiBvdGhlciBjbGllbnRzLCBMb2NhbFN0b3JlIGlzIHVuYXdhcmUgb2ZcclxuICAgIC8vIHRoZSBvbmxpbmUgc3RhdGUuXHJcbiAgICBTeW5jRW5naW5lLnByb3RvdHlwZS5kaXNhYmxlTmV0d29yayA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmxvY2FsU3RvcmUuc2V0TmV0d29ya0VuYWJsZWQoZmFsc2UpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnJlbW90ZVN0b3JlLmRpc2FibGVOZXR3b3JrKCk7XHJcbiAgICB9O1xyXG4gICAgU3luY0VuZ2luZS5wcm90b3R5cGUuZ2V0UmVtb3RlS2V5c0ZvclRhcmdldCA9IGZ1bmN0aW9uICh0YXJnZXRJZCkge1xyXG4gICAgICAgIHZhciBsaW1ib1Jlc29sdXRpb24gPSB0aGlzLmxpbWJvUmVzb2x1dGlvbnNCeVRhcmdldFt0YXJnZXRJZF07XHJcbiAgICAgICAgaWYgKGxpbWJvUmVzb2x1dGlvbiAmJiBsaW1ib1Jlc29sdXRpb24ucmVjZWl2ZWREb2N1bWVudCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZG9jdW1lbnRLZXlTZXQoKS5hZGQobGltYm9SZXNvbHV0aW9uLmtleSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB2YXIga2V5U2V0ID0gZG9jdW1lbnRLZXlTZXQoKTtcclxuICAgICAgICAgICAgdmFyIHF1ZXJpZXMgPSB0aGlzLnF1ZXJpZXNCeVRhcmdldFt0YXJnZXRJZF07XHJcbiAgICAgICAgICAgIGlmICghcXVlcmllcykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGtleVNldDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIHF1ZXJpZXNfMiA9IHF1ZXJpZXM7IF9pIDwgcXVlcmllc18yLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIHF1ZXJ5ID0gcXVlcmllc18yW19pXTtcclxuICAgICAgICAgICAgICAgIHZhciBxdWVyeVZpZXcgPSB0aGlzLnF1ZXJ5Vmlld3NCeVF1ZXJ5LmdldChxdWVyeSk7XHJcbiAgICAgICAgICAgICAgICBhc3NlcnQoISFxdWVyeVZpZXcsIFwiTm8gcXVlcnkgdmlldyBmb3VuZCBmb3IgXCIgKyBxdWVyeSk7XHJcbiAgICAgICAgICAgICAgICBrZXlTZXQgPSBrZXlTZXQudW5pb25XaXRoKHF1ZXJ5Vmlldy52aWV3LnN5bmNlZERvY3VtZW50cyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGtleVNldDtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFN5bmNFbmdpbmU7XHJcbn0oKSk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogU2ltcGxlIHdyYXBwZXIgYXJvdW5kIGEgbnVsbGFibGUgVUlELiBNb3N0bHkgZXhpc3RzIHRvIG1ha2UgY29kZSBtb3JlXHJcbiAqIHJlYWRhYmxlLlxyXG4gKi9cclxudmFyIFVzZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBVc2VyKHVpZCkge1xyXG4gICAgICAgIHRoaXMudWlkID0gdWlkO1xyXG4gICAgfVxyXG4gICAgVXNlci5wcm90b3R5cGUuaXNBdXRoZW50aWNhdGVkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnVpZCAhPSBudWxsO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyBhIGtleSByZXByZXNlbnRpbmcgdGhpcyB1c2VyLCBzdWl0YWJsZSBmb3IgaW5jbHVzaW9uIGluIGFcclxuICAgICAqIGRpY3Rpb25hcnkuXHJcbiAgICAgKi9cclxuICAgIFVzZXIucHJvdG90eXBlLnRvS2V5ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmlzQXV0aGVudGljYXRlZCgpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAndWlkOicgKyB0aGlzLnVpZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiAnYW5vbnltb3VzLXVzZXInO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBVc2VyLnByb3RvdHlwZS5pc0VxdWFsID0gZnVuY3Rpb24gKG90aGVyVXNlcikge1xyXG4gICAgICAgIHJldHVybiBvdGhlclVzZXIudWlkID09PSB0aGlzLnVpZDtcclxuICAgIH07XHJcbiAgICAvKiogQSB1c2VyIHdpdGggYSBudWxsIFVJRC4gKi9cclxuICAgIFVzZXIuVU5BVVRIRU5USUNBVEVEID0gbmV3IFVzZXIobnVsbCk7XHJcbiAgICAvLyBUT0RPKG1pa2VsZWhlbik6IExvb2sgaW50byBnZXR0aW5nIGEgcHJvcGVyIHVpZC1lcXVpdmFsZW50IGZvclxyXG4gICAgLy8gbm9uLUZpcmViYXNlQXV0aCBwcm92aWRlcnMuXHJcbiAgICBVc2VyLkdPT0dMRV9DUkVERU5USUFMUyA9IG5ldyBVc2VyKCdnb29nbGUtY3JlZGVudGlhbHMtdWlkJyk7XHJcbiAgICBVc2VyLkZJUlNUX1BBUlRZID0gbmV3IFVzZXIoJ2ZpcnN0LXBhcnR5LXVpZCcpO1xyXG4gICAgcmV0dXJuIFVzZXI7XHJcbn0oKSk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vLyBUaGUgZm9ybWF0IG9mIHRoZSBMb2NhbFN0b3JhZ2Uga2V5IHRoYXQgc3RvcmVzIHRoZSBjbGllbnQgc3RhdGUgaXM6XHJcbi8vICAgICBmaXJlc3RvcmVfY2xpZW50c188cGVyc2lzdGVuY2VfcHJlZml4Pl88aW5zdGFuY2Vfa2V5PlxyXG52YXIgQ0xJRU5UX1NUQVRFX0tFWV9QUkVGSVggPSAnZmlyZXN0b3JlX2NsaWVudHMnO1xyXG4vKiogQXNzZW1ibGVzIHRoZSBrZXkgZm9yIGEgY2xpZW50IHN0YXRlIGluIFdlYlN0b3JhZ2UgKi9cclxuZnVuY3Rpb24gY3JlYXRlV2ViU3RvcmFnZUNsaWVudFN0YXRlS2V5KHBlcnNpc3RlbmNlS2V5LCBjbGllbnRJZCkge1xyXG4gICAgYXNzZXJ0KGNsaWVudElkLmluZGV4T2YoJ18nKSA9PT0gLTEsIFwiQ2xpZW50IGtleSBjYW5ub3QgY29udGFpbiAnXycsIGJ1dCB3YXMgJ1wiICsgY2xpZW50SWQgKyBcIidcIik7XHJcbiAgICByZXR1cm4gQ0xJRU5UX1NUQVRFX0tFWV9QUkVGSVggKyBcIl9cIiArIHBlcnNpc3RlbmNlS2V5ICsgXCJfXCIgKyBjbGllbnRJZDtcclxufVxyXG4vLyBUaGUgZm9ybWF0IG9mIHRoZSBXZWJTdG9yYWdlIGtleSB0aGF0IHN0b3JlcyB0aGUgbXV0YXRpb24gc3RhdGUgaXM6XHJcbi8vICAgICBmaXJlc3RvcmVfbXV0YXRpb25zXzxwZXJzaXN0ZW5jZV9wcmVmaXg+XzxiYXRjaF9pZD5cclxuLy8gICAgIChmb3IgdW5hdXRoZW50aWNhdGVkIHVzZXJzKVxyXG4vLyBvcjogZmlyZXN0b3JlX211dGF0aW9uc188cGVyc2lzdGVuY2VfcHJlZml4Pl88YmF0Y2hfaWQ+Xzx1c2VyX3VpZD5cclxuLy9cclxuLy8gJ3VzZXJfdWlkJyBpcyBsYXN0IHRvIGF2b2lkIG5lZWRpbmcgdG8gZXNjYXBlICdfJyBjaGFyYWN0ZXJzIHRoYXQgaXQgbWlnaHRcclxuLy8gY29udGFpbi5cclxudmFyIE1VVEFUSU9OX0JBVENIX0tFWV9QUkVGSVggPSAnZmlyZXN0b3JlX211dGF0aW9ucyc7XHJcbi8qKiBBc3NlbWJsZXMgdGhlIGtleSBmb3IgYSBtdXRhdGlvbiBiYXRjaCBpbiBXZWJTdG9yYWdlICovXHJcbmZ1bmN0aW9uIGNyZWF0ZVdlYlN0b3JhZ2VNdXRhdGlvbkJhdGNoS2V5KHBlcnNpc3RlbmNlS2V5LCB1c2VyLCBiYXRjaElkKSB7XHJcbiAgICB2YXIgbXV0YXRpb25LZXkgPSBNVVRBVElPTl9CQVRDSF9LRVlfUFJFRklYICsgXCJfXCIgKyBwZXJzaXN0ZW5jZUtleSArIFwiX1wiICsgYmF0Y2hJZDtcclxuICAgIGlmICh1c2VyLmlzQXV0aGVudGljYXRlZCgpKSB7XHJcbiAgICAgICAgbXV0YXRpb25LZXkgKz0gXCJfXCIgKyB1c2VyLnVpZDtcclxuICAgIH1cclxuICAgIHJldHVybiBtdXRhdGlvbktleTtcclxufVxyXG4vLyBUaGUgZm9ybWF0IG9mIHRoZSBXZWJTdG9yYWdlIGtleSB0aGF0IHN0b3JlcyBhIHF1ZXJ5IHRhcmdldCdzIG1ldGFkYXRhIGlzOlxyXG4vLyAgICAgZmlyZXN0b3JlX3RhcmdldHNfPHBlcnNpc3RlbmNlX3ByZWZpeD5fPHRhcmdldF9pZD5cclxudmFyIFFVRVJZX1RBUkdFVF9LRVlfUFJFRklYID0gJ2ZpcmVzdG9yZV90YXJnZXRzJztcclxuLyoqIEFzc2VtYmxlcyB0aGUga2V5IGZvciBhIHF1ZXJ5IHN0YXRlIGluIFdlYlN0b3JhZ2UgKi9cclxuZnVuY3Rpb24gY3JlYXRlV2ViU3RvcmFnZVF1ZXJ5VGFyZ2V0TWV0YWRhdGFLZXkocGVyc2lzdGVuY2VLZXksIHRhcmdldElkKSB7XHJcbiAgICByZXR1cm4gUVVFUllfVEFSR0VUX0tFWV9QUkVGSVggKyBcIl9cIiArIHBlcnNpc3RlbmNlS2V5ICsgXCJfXCIgKyB0YXJnZXRJZDtcclxufVxyXG4vLyBUaGUgV2ViU3RvcmFnZSBwcmVmaXggdGhhdCBzdG9yZXMgdGhlIHByaW1hcnkgdGFiJ3Mgb25saW5lIHN0YXRlLiBUaGVcclxuLy8gZm9ybWF0IG9mIHRoZSBrZXkgaXM6XHJcbi8vICAgICBmaXJlc3RvcmVfb25saW5lX3N0YXRlXzxwZXJzaXN0ZW5jZV9wcmVmaXg+XHJcbnZhciBPTkxJTkVfU1RBVEVfS0VZX1BSRUZJWCA9ICdmaXJlc3RvcmVfb25saW5lX3N0YXRlJztcclxuLyoqIEFzc2VtYmxlcyB0aGUga2V5IGZvciB0aGUgb25saW5lIHN0YXRlIG9mIHRoZSBwcmltYXJ5IHRhYi4gKi9cclxuZnVuY3Rpb24gY3JlYXRlV2ViU3RvcmFnZU9ubGluZVN0YXRlS2V5KHBlcnNpc3RlbmNlS2V5KSB7XHJcbiAgICByZXR1cm4gT05MSU5FX1NUQVRFX0tFWV9QUkVGSVggKyBcIl9cIiArIHBlcnNpc3RlbmNlS2V5O1xyXG59XHJcbi8vIFRoZSBXZWJTdG9yYWdlIGtleSBwcmVmaXggZm9yIHRoZSBrZXkgdGhhdCBzdG9yZXMgdGhlIGxhc3Qgc2VxdWVuY2UgbnVtYmVyIGFsbG9jYXRlZC4gVGhlIGtleVxyXG4vLyBsb29rcyBsaWtlICdmaXJlc3RvcmVfc2VxdWVuY2VfbnVtYmVyXzxwZXJzaXN0ZW5jZV9wcmVmaXg+Jy5cclxudmFyIFNFUVVFTkNFX05VTUJFUl9LRVlfUFJFRklYID0gJ2ZpcmVzdG9yZV9zZXF1ZW5jZV9udW1iZXInO1xyXG4vKiogQXNzZW1ibGVzIHRoZSBrZXkgZm9yIHRoZSBjdXJyZW50IHNlcXVlbmNlIG51bWJlci4gKi9cclxuZnVuY3Rpb24gY3JlYXRlV2ViU3RvcmFnZVNlcXVlbmNlTnVtYmVyS2V5KHBlcnNpc3RlbmNlS2V5KSB7XHJcbiAgICByZXR1cm4gU0VRVUVOQ0VfTlVNQkVSX0tFWV9QUkVGSVggKyBcIl9cIiArIHBlcnNpc3RlbmNlS2V5O1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG52YXIgTE9HX1RBRyRhID0gJ1NoYXJlZENsaWVudFN0YXRlJztcclxuLyoqXHJcbiAqIEhvbGRzIHRoZSBzdGF0ZSBvZiBhIG11dGF0aW9uIGJhdGNoLCBpbmNsdWRpbmcgaXRzIHVzZXIgSUQsIGJhdGNoIElEIGFuZFxyXG4gKiB3aGV0aGVyIHRoZSBiYXRjaCBpcyAncGVuZGluZycsICdhY2tub3dsZWRnZWQnIG9yICdyZWplY3RlZCcuXHJcbiAqL1xyXG4vLyBWaXNpYmxlIGZvciB0ZXN0aW5nXHJcbnZhciBNdXRhdGlvbk1ldGFkYXRhID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gTXV0YXRpb25NZXRhZGF0YSh1c2VyLCBiYXRjaElkLCBzdGF0ZSwgZXJyb3IpIHtcclxuICAgICAgICB0aGlzLnVzZXIgPSB1c2VyO1xyXG4gICAgICAgIHRoaXMuYmF0Y2hJZCA9IGJhdGNoSWQ7XHJcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHN0YXRlO1xyXG4gICAgICAgIHRoaXMuZXJyb3IgPSBlcnJvcjtcclxuICAgICAgICBhc3NlcnQoKGVycm9yICE9PSB1bmRlZmluZWQpID09PSAoc3RhdGUgPT09ICdyZWplY3RlZCcpLCBcIk11dGF0aW9uTWV0YWRhdGEgbXVzdCBjb250YWluIGFuIGVycm9yIGlmZiBzdGF0ZSBpcyAncmVqZWN0ZWQnXCIpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBQYXJzZXMgYSBNdXRhdGlvbk1ldGFkYXRhIGZyb20gaXRzIEpTT04gcmVwcmVzZW50YXRpb24gaW4gV2ViU3RvcmFnZS5cclxuICAgICAqIExvZ3MgYSB3YXJuaW5nIGFuZCByZXR1cm5zIG51bGwgaWYgdGhlIGZvcm1hdCBvZiB0aGUgZGF0YSBpcyBub3QgdmFsaWQuXHJcbiAgICAgKi9cclxuICAgIE11dGF0aW9uTWV0YWRhdGEuZnJvbVdlYlN0b3JhZ2VFbnRyeSA9IGZ1bmN0aW9uICh1c2VyLCBiYXRjaElkLCB2YWx1ZSkge1xyXG4gICAgICAgIHZhciBtdXRhdGlvbkJhdGNoID0gSlNPTi5wYXJzZSh2YWx1ZSk7XHJcbiAgICAgICAgdmFyIHZhbGlkRGF0YSA9IHR5cGVvZiBtdXRhdGlvbkJhdGNoID09PSAnb2JqZWN0JyAmJlxyXG4gICAgICAgICAgICBbJ3BlbmRpbmcnLCAnYWNrbm93bGVkZ2VkJywgJ3JlamVjdGVkJ10uaW5kZXhPZihtdXRhdGlvbkJhdGNoLnN0YXRlKSAhPT1cclxuICAgICAgICAgICAgICAgIC0xICYmXHJcbiAgICAgICAgICAgIChtdXRhdGlvbkJhdGNoLmVycm9yID09PSB1bmRlZmluZWQgfHxcclxuICAgICAgICAgICAgICAgIHR5cGVvZiBtdXRhdGlvbkJhdGNoLmVycm9yID09PSAnb2JqZWN0Jyk7XHJcbiAgICAgICAgdmFyIGZpcmVzdG9yZUVycm9yID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIGlmICh2YWxpZERhdGEgJiYgbXV0YXRpb25CYXRjaC5lcnJvcikge1xyXG4gICAgICAgICAgICB2YWxpZERhdGEgPVxyXG4gICAgICAgICAgICAgICAgdHlwZW9mIG11dGF0aW9uQmF0Y2guZXJyb3IubWVzc2FnZSA9PT0gJ3N0cmluZycgJiZcclxuICAgICAgICAgICAgICAgICAgICB0eXBlb2YgbXV0YXRpb25CYXRjaC5lcnJvci5jb2RlID09PSAnc3RyaW5nJztcclxuICAgICAgICAgICAgaWYgKHZhbGlkRGF0YSkge1xyXG4gICAgICAgICAgICAgICAgZmlyZXN0b3JlRXJyb3IgPSBuZXcgRmlyZXN0b3JlRXJyb3IobXV0YXRpb25CYXRjaC5lcnJvci5jb2RlLCBtdXRhdGlvbkJhdGNoLmVycm9yLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh2YWxpZERhdGEpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBNdXRhdGlvbk1ldGFkYXRhKHVzZXIsIGJhdGNoSWQsIG11dGF0aW9uQmF0Y2guc3RhdGUsIGZpcmVzdG9yZUVycm9yKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGVycm9yKExPR19UQUckYSwgXCJGYWlsZWQgdG8gcGFyc2UgbXV0YXRpb24gc3RhdGUgZm9yIElEICdcIiArIGJhdGNoSWQgKyBcIic6IFwiICsgdmFsdWUpO1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgTXV0YXRpb25NZXRhZGF0YS5wcm90b3R5cGUudG9XZWJTdG9yYWdlSlNPTiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgYmF0Y2hNZXRhZGF0YSA9IHtcclxuICAgICAgICAgICAgc3RhdGU6IHRoaXMuc3RhdGUsXHJcbiAgICAgICAgICAgIHVwZGF0ZVRpbWVNczogRGF0ZS5ub3coKSAvLyBNb2RpZnkgdGhlIGV4aXN0aW5nIHZhbHVlIHRvIHRyaWdnZXIgdXBkYXRlLlxyXG4gICAgICAgIH07XHJcbiAgICAgICAgaWYgKHRoaXMuZXJyb3IpIHtcclxuICAgICAgICAgICAgYmF0Y2hNZXRhZGF0YS5lcnJvciA9IHtcclxuICAgICAgICAgICAgICAgIGNvZGU6IHRoaXMuZXJyb3IuY29kZSxcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IHRoaXMuZXJyb3IubWVzc2FnZVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoYmF0Y2hNZXRhZGF0YSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIE11dGF0aW9uTWV0YWRhdGE7XHJcbn0oKSk7XHJcbi8qKlxyXG4gKiBIb2xkcyB0aGUgc3RhdGUgb2YgYSBxdWVyeSB0YXJnZXQsIGluY2x1ZGluZyBpdHMgdGFyZ2V0IElEIGFuZCB3aGV0aGVyIHRoZVxyXG4gKiB0YXJnZXQgaXMgJ25vdC1jdXJyZW50JywgJ2N1cnJlbnQnIG9yICdyZWplY3RlZCcuXHJcbiAqL1xyXG4vLyBWaXNpYmxlIGZvciB0ZXN0aW5nXHJcbnZhciBRdWVyeVRhcmdldE1ldGFkYXRhID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gUXVlcnlUYXJnZXRNZXRhZGF0YSh0YXJnZXRJZCwgc3RhdGUsIGVycm9yKSB7XHJcbiAgICAgICAgdGhpcy50YXJnZXRJZCA9IHRhcmdldElkO1xyXG4gICAgICAgIHRoaXMuc3RhdGUgPSBzdGF0ZTtcclxuICAgICAgICB0aGlzLmVycm9yID0gZXJyb3I7XHJcbiAgICAgICAgYXNzZXJ0KChlcnJvciAhPT0gdW5kZWZpbmVkKSA9PT0gKHN0YXRlID09PSAncmVqZWN0ZWQnKSwgXCJRdWVyeVRhcmdldE1ldGFkYXRhIG11c3QgY29udGFpbiBhbiBlcnJvciBpZmYgc3RhdGUgaXMgJ3JlamVjdGVkJ1wiKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogUGFyc2VzIGEgUXVlcnlUYXJnZXRNZXRhZGF0YSBmcm9tIGl0cyBKU09OIHJlcHJlc2VudGF0aW9uIGluIFdlYlN0b3JhZ2UuXHJcbiAgICAgKiBMb2dzIGEgd2FybmluZyBhbmQgcmV0dXJucyBudWxsIGlmIHRoZSBmb3JtYXQgb2YgdGhlIGRhdGEgaXMgbm90IHZhbGlkLlxyXG4gICAgICovXHJcbiAgICBRdWVyeVRhcmdldE1ldGFkYXRhLmZyb21XZWJTdG9yYWdlRW50cnkgPSBmdW5jdGlvbiAodGFyZ2V0SWQsIHZhbHVlKSB7XHJcbiAgICAgICAgdmFyIHRhcmdldFN0YXRlID0gSlNPTi5wYXJzZSh2YWx1ZSk7XHJcbiAgICAgICAgdmFyIHZhbGlkRGF0YSA9IHR5cGVvZiB0YXJnZXRTdGF0ZSA9PT0gJ29iamVjdCcgJiZcclxuICAgICAgICAgICAgWydub3QtY3VycmVudCcsICdjdXJyZW50JywgJ3JlamVjdGVkJ10uaW5kZXhPZih0YXJnZXRTdGF0ZS5zdGF0ZSkgIT09XHJcbiAgICAgICAgICAgICAgICAtMSAmJlxyXG4gICAgICAgICAgICAodGFyZ2V0U3RhdGUuZXJyb3IgPT09IHVuZGVmaW5lZCB8fFxyXG4gICAgICAgICAgICAgICAgdHlwZW9mIHRhcmdldFN0YXRlLmVycm9yID09PSAnb2JqZWN0Jyk7XHJcbiAgICAgICAgdmFyIGZpcmVzdG9yZUVycm9yID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIGlmICh2YWxpZERhdGEgJiYgdGFyZ2V0U3RhdGUuZXJyb3IpIHtcclxuICAgICAgICAgICAgdmFsaWREYXRhID1cclxuICAgICAgICAgICAgICAgIHR5cGVvZiB0YXJnZXRTdGF0ZS5lcnJvci5tZXNzYWdlID09PSAnc3RyaW5nJyAmJlxyXG4gICAgICAgICAgICAgICAgICAgIHR5cGVvZiB0YXJnZXRTdGF0ZS5lcnJvci5jb2RlID09PSAnc3RyaW5nJztcclxuICAgICAgICAgICAgaWYgKHZhbGlkRGF0YSkge1xyXG4gICAgICAgICAgICAgICAgZmlyZXN0b3JlRXJyb3IgPSBuZXcgRmlyZXN0b3JlRXJyb3IodGFyZ2V0U3RhdGUuZXJyb3IuY29kZSwgdGFyZ2V0U3RhdGUuZXJyb3IubWVzc2FnZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHZhbGlkRGF0YSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFF1ZXJ5VGFyZ2V0TWV0YWRhdGEodGFyZ2V0SWQsIHRhcmdldFN0YXRlLnN0YXRlLCBmaXJlc3RvcmVFcnJvcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBlcnJvcihMT0dfVEFHJGEsIFwiRmFpbGVkIHRvIHBhcnNlIHRhcmdldCBzdGF0ZSBmb3IgSUQgJ1wiICsgdGFyZ2V0SWQgKyBcIic6IFwiICsgdmFsdWUpO1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgUXVlcnlUYXJnZXRNZXRhZGF0YS5wcm90b3R5cGUudG9XZWJTdG9yYWdlSlNPTiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgdGFyZ2V0U3RhdGUgPSB7XHJcbiAgICAgICAgICAgIHN0YXRlOiB0aGlzLnN0YXRlLFxyXG4gICAgICAgICAgICB1cGRhdGVUaW1lTXM6IERhdGUubm93KCkgLy8gTW9kaWZ5IHRoZSBleGlzdGluZyB2YWx1ZSB0byB0cmlnZ2VyIHVwZGF0ZS5cclxuICAgICAgICB9O1xyXG4gICAgICAgIGlmICh0aGlzLmVycm9yKSB7XHJcbiAgICAgICAgICAgIHRhcmdldFN0YXRlLmVycm9yID0ge1xyXG4gICAgICAgICAgICAgICAgY29kZTogdGhpcy5lcnJvci5jb2RlLFxyXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogdGhpcy5lcnJvci5tZXNzYWdlXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh0YXJnZXRTdGF0ZSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFF1ZXJ5VGFyZ2V0TWV0YWRhdGE7XHJcbn0oKSk7XHJcbi8qKlxyXG4gKiBUaGlzIGNsYXNzIHJlcHJlc2VudHMgdGhlIGltbXV0YWJsZSBDbGllbnRTdGF0ZSBmb3IgYSBjbGllbnQgcmVhZCBmcm9tXHJcbiAqIFdlYlN0b3JhZ2UsIGNvbnRhaW5pbmcgdGhlIGxpc3Qgb2YgYWN0aXZlIHF1ZXJ5IHRhcmdldHMuXHJcbiAqL1xyXG52YXIgUmVtb3RlQ2xpZW50U3RhdGUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBSZW1vdGVDbGllbnRTdGF0ZShjbGllbnRJZCwgYWN0aXZlVGFyZ2V0SWRzKSB7XHJcbiAgICAgICAgdGhpcy5jbGllbnRJZCA9IGNsaWVudElkO1xyXG4gICAgICAgIHRoaXMuYWN0aXZlVGFyZ2V0SWRzID0gYWN0aXZlVGFyZ2V0SWRzO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBQYXJzZXMgYSBSZW1vdGVDbGllbnRTdGF0ZSBmcm9tIHRoZSBKU09OIHJlcHJlc2VudGF0aW9uIGluIFdlYlN0b3JhZ2UuXHJcbiAgICAgKiBMb2dzIGEgd2FybmluZyBhbmQgcmV0dXJucyBudWxsIGlmIHRoZSBmb3JtYXQgb2YgdGhlIGRhdGEgaXMgbm90IHZhbGlkLlxyXG4gICAgICovXHJcbiAgICBSZW1vdGVDbGllbnRTdGF0ZS5mcm9tV2ViU3RvcmFnZUVudHJ5ID0gZnVuY3Rpb24gKGNsaWVudElkLCB2YWx1ZSkge1xyXG4gICAgICAgIHZhciBjbGllbnRTdGF0ZSA9IEpTT04ucGFyc2UodmFsdWUpO1xyXG4gICAgICAgIHZhciB2YWxpZERhdGEgPSB0eXBlb2YgY2xpZW50U3RhdGUgPT09ICdvYmplY3QnICYmXHJcbiAgICAgICAgICAgIGNsaWVudFN0YXRlLmFjdGl2ZVRhcmdldElkcyBpbnN0YW5jZW9mIEFycmF5O1xyXG4gICAgICAgIHZhciBhY3RpdmVUYXJnZXRJZHNTZXQgPSB0YXJnZXRJZFNldCgpO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyB2YWxpZERhdGEgJiYgaSA8IGNsaWVudFN0YXRlLmFjdGl2ZVRhcmdldElkcy5sZW5ndGg7ICsraSkge1xyXG4gICAgICAgICAgICB2YWxpZERhdGEgPSBpc1NhZmVJbnRlZ2VyKGNsaWVudFN0YXRlLmFjdGl2ZVRhcmdldElkc1tpXSk7XHJcbiAgICAgICAgICAgIGFjdGl2ZVRhcmdldElkc1NldCA9IGFjdGl2ZVRhcmdldElkc1NldC5hZGQoY2xpZW50U3RhdGUuYWN0aXZlVGFyZ2V0SWRzW2ldKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHZhbGlkRGF0YSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFJlbW90ZUNsaWVudFN0YXRlKGNsaWVudElkLCBhY3RpdmVUYXJnZXRJZHNTZXQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgZXJyb3IoTE9HX1RBRyRhLCBcIkZhaWxlZCB0byBwYXJzZSBjbGllbnQgZGF0YSBmb3IgaW5zdGFuY2UgJ1wiICsgY2xpZW50SWQgKyBcIic6IFwiICsgdmFsdWUpO1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFJlbW90ZUNsaWVudFN0YXRlO1xyXG59KCkpO1xyXG4vKipcclxuICogVGhpcyBjbGFzcyByZXByZXNlbnRzIHRoZSBvbmxpbmUgc3RhdGUgZm9yIGFsbCBjbGllbnRzIHBhcnRpY2lwYXRpbmcgaW5cclxuICogbXVsdGktdGFiLiBUaGUgb25saW5lIHN0YXRlIGlzIG9ubHkgd3JpdHRlbiB0byBieSB0aGUgcHJpbWFyeSBjbGllbnQsIGFuZFxyXG4gKiB1c2VkIGluIHNlY29uZGFyeSBjbGllbnRzIHRvIHVwZGF0ZSB0aGVpciBxdWVyeSB2aWV3cy5cclxuICovXHJcbnZhciBTaGFyZWRPbmxpbmVTdGF0ZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFNoYXJlZE9ubGluZVN0YXRlKGNsaWVudElkLCBvbmxpbmVTdGF0ZSkge1xyXG4gICAgICAgIHRoaXMuY2xpZW50SWQgPSBjbGllbnRJZDtcclxuICAgICAgICB0aGlzLm9ubGluZVN0YXRlID0gb25saW5lU3RhdGU7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFBhcnNlcyBhIFNoYXJlZE9ubGluZVN0YXRlIGZyb20gaXRzIEpTT04gcmVwcmVzZW50YXRpb24gaW4gV2ViU3RvcmFnZS5cclxuICAgICAqIExvZ3MgYSB3YXJuaW5nIGFuZCByZXR1cm5zIG51bGwgaWYgdGhlIGZvcm1hdCBvZiB0aGUgZGF0YSBpcyBub3QgdmFsaWQuXHJcbiAgICAgKi9cclxuICAgIFNoYXJlZE9ubGluZVN0YXRlLmZyb21XZWJTdG9yYWdlRW50cnkgPSBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICB2YXIgb25saW5lU3RhdGUgPSBKU09OLnBhcnNlKHZhbHVlKTtcclxuICAgICAgICB2YXIgdmFsaWREYXRhID0gdHlwZW9mIG9ubGluZVN0YXRlID09PSAnb2JqZWN0JyAmJlxyXG4gICAgICAgICAgICBvbmxpbmVTdGF0ZS5vbmxpbmVTdGF0ZSBpbiBPbmxpbmVTdGF0ZSAmJlxyXG4gICAgICAgICAgICB0eXBlb2Ygb25saW5lU3RhdGUuY2xpZW50SWQgPT09ICdzdHJpbmcnO1xyXG4gICAgICAgIGlmICh2YWxpZERhdGEpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBTaGFyZWRPbmxpbmVTdGF0ZShvbmxpbmVTdGF0ZS5jbGllbnRJZCwgT25saW5lU3RhdGVbb25saW5lU3RhdGUub25saW5lU3RhdGVdKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGVycm9yKExPR19UQUckYSwgXCJGYWlsZWQgdG8gcGFyc2Ugb25saW5lIHN0YXRlOiBcIiArIHZhbHVlKTtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHJldHVybiBTaGFyZWRPbmxpbmVTdGF0ZTtcclxufSgpKTtcclxuLyoqXHJcbiAqIE1ldGFkYXRhIHN0YXRlIG9mIHRoZSBsb2NhbCBjbGllbnQuIFVubGlrZSBgUmVtb3RlQ2xpZW50U3RhdGVgLCB0aGlzIGNsYXNzIGlzXHJcbiAqIG11dGFibGUgYW5kIGtlZXBzIHRyYWNrIG9mIGFsbCBwZW5kaW5nIG11dGF0aW9ucywgd2hpY2ggYWxsb3dzIHVzIHRvXHJcbiAqIHVwZGF0ZSB0aGUgcmFuZ2Ugb2YgcGVuZGluZyBtdXRhdGlvbiBiYXRjaCBJRHMgYXMgbmV3IG11dGF0aW9ucyBhcmUgYWRkZWQgb3JcclxuICogcmVtb3ZlZC5cclxuICpcclxuICogVGhlIGRhdGEgaW4gYExvY2FsQ2xpZW50U3RhdGVgIGlzIG5vdCByZWFkIGZyb20gV2ViU3RvcmFnZSBhbmQgaW5zdGVhZFxyXG4gKiB1cGRhdGVkIHZpYSBpdHMgaW5zdGFuY2UgbWV0aG9kcy4gVGhlIHVwZGF0ZWQgc3RhdGUgY2FuIGJlIHNlcmlhbGl6ZWQgdmlhXHJcbiAqIGB0b1dlYlN0b3JhZ2VKU09OKClgLlxyXG4gKi9cclxuLy8gVmlzaWJsZSBmb3IgdGVzdGluZy5cclxudmFyIExvY2FsQ2xpZW50U3RhdGUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBMb2NhbENsaWVudFN0YXRlKCkge1xyXG4gICAgICAgIHRoaXMuYWN0aXZlVGFyZ2V0SWRzID0gdGFyZ2V0SWRTZXQoKTtcclxuICAgIH1cclxuICAgIExvY2FsQ2xpZW50U3RhdGUucHJvdG90eXBlLmFkZFF1ZXJ5VGFyZ2V0ID0gZnVuY3Rpb24gKHRhcmdldElkKSB7XHJcbiAgICAgICAgdGhpcy5hY3RpdmVUYXJnZXRJZHMgPSB0aGlzLmFjdGl2ZVRhcmdldElkcy5hZGQodGFyZ2V0SWQpO1xyXG4gICAgfTtcclxuICAgIExvY2FsQ2xpZW50U3RhdGUucHJvdG90eXBlLnJlbW92ZVF1ZXJ5VGFyZ2V0ID0gZnVuY3Rpb24gKHRhcmdldElkKSB7XHJcbiAgICAgICAgdGhpcy5hY3RpdmVUYXJnZXRJZHMgPSB0aGlzLmFjdGl2ZVRhcmdldElkcy5kZWxldGUodGFyZ2V0SWQpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQ29udmVydHMgdGhpcyBlbnRyeSBpbnRvIGEgSlNPTi1lbmNvZGVkIGZvcm1hdCB3ZSBjYW4gdXNlIGZvciBXZWJTdG9yYWdlLlxyXG4gICAgICogRG9lcyBub3QgZW5jb2RlIGBjbGllbnRJZGAgYXMgaXQgaXMgcGFydCBvZiB0aGUga2V5IGluIFdlYlN0b3JhZ2UuXHJcbiAgICAgKi9cclxuICAgIExvY2FsQ2xpZW50U3RhdGUucHJvdG90eXBlLnRvV2ViU3RvcmFnZUpTT04gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGRhdGEgPSB7XHJcbiAgICAgICAgICAgIGFjdGl2ZVRhcmdldElkczogdGhpcy5hY3RpdmVUYXJnZXRJZHMudG9BcnJheSgpLFxyXG4gICAgICAgICAgICB1cGRhdGVUaW1lTXM6IERhdGUubm93KCkgLy8gTW9kaWZ5IHRoZSBleGlzdGluZyB2YWx1ZSB0byB0cmlnZ2VyIHVwZGF0ZS5cclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShkYXRhKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gTG9jYWxDbGllbnRTdGF0ZTtcclxufSgpKTtcclxuLyoqXHJcbiAqIGBXZWJTdG9yYWdlU2hhcmVkQ2xpZW50U3RhdGVgIHVzZXMgV2ViU3RvcmFnZSAod2luZG93LmxvY2FsU3RvcmFnZSkgYXMgdGhlXHJcbiAqIGJhY2tpbmcgc3RvcmUgZm9yIHRoZSBTaGFyZWRDbGllbnRTdGF0ZS4gSXQga2VlcHMgdHJhY2sgb2YgYWxsIGFjdGl2ZVxyXG4gKiBjbGllbnRzIGFuZCBzdXBwb3J0cyBtb2RpZmljYXRpb25zIG9mIHRoZSBsb2NhbCBjbGllbnQncyBkYXRhLlxyXG4gKi9cclxudmFyIFdlYlN0b3JhZ2VTaGFyZWRDbGllbnRTdGF0ZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFdlYlN0b3JhZ2VTaGFyZWRDbGllbnRTdGF0ZShxdWV1ZSwgcGxhdGZvcm0sIHBlcnNpc3RlbmNlS2V5LCBsb2NhbENsaWVudElkLCBpbml0aWFsVXNlcikge1xyXG4gICAgICAgIHRoaXMucXVldWUgPSBxdWV1ZTtcclxuICAgICAgICB0aGlzLnBsYXRmb3JtID0gcGxhdGZvcm07XHJcbiAgICAgICAgdGhpcy5wZXJzaXN0ZW5jZUtleSA9IHBlcnNpc3RlbmNlS2V5O1xyXG4gICAgICAgIHRoaXMubG9jYWxDbGllbnRJZCA9IGxvY2FsQ2xpZW50SWQ7XHJcbiAgICAgICAgdGhpcy5zeW5jRW5naW5lID0gbnVsbDtcclxuICAgICAgICB0aGlzLm9ubGluZVN0YXRlSGFuZGxlciA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5zZXF1ZW5jZU51bWJlckhhbmRsZXIgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuYWN0aXZlQ2xpZW50cyA9IHt9O1xyXG4gICAgICAgIHRoaXMuc3RvcmFnZUxpc3RlbmVyID0gdGhpcy5oYW5kbGVXZWJTdG9yYWdlRXZlbnQuYmluZCh0aGlzKTtcclxuICAgICAgICB0aGlzLnN0YXJ0ZWQgPSBmYWxzZTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDYXB0dXJlcyBXZWJTdG9yYWdlIGV2ZW50cyB0aGF0IG9jY3VyIGJlZm9yZSBgc3RhcnQoKWAgaXMgY2FsbGVkLiBUaGVzZVxyXG4gICAgICAgICAqIGV2ZW50cyBhcmUgcmVwbGF5ZWQgb25jZSBgV2ViU3RvcmFnZVNoYXJlZENsaWVudFN0YXRlYCBpcyBzdGFydGVkLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuZWFybHlFdmVudHMgPSBbXTtcclxuICAgICAgICBpZiAoIVdlYlN0b3JhZ2VTaGFyZWRDbGllbnRTdGF0ZS5pc0F2YWlsYWJsZSh0aGlzLnBsYXRmb3JtKSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5VTklNUExFTUVOVEVELCAnTG9jYWxTdG9yYWdlIGlzIG5vdCBhdmFpbGFibGUgb24gdGhpcyBwbGF0Zm9ybS4nKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gRXNjYXBlIHRoZSBzcGVjaWFsIGNoYXJhY3RlcnMgbWVudGlvbmVkIGhlcmU6XHJcbiAgICAgICAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9HdWlkZS9SZWd1bGFyX0V4cHJlc3Npb25zXHJcbiAgICAgICAgdmFyIGVzY2FwZWRQZXJzaXN0ZW5jZUtleSA9IHBlcnNpc3RlbmNlS2V5LnJlcGxhY2UoL1suKis/XiR7fSgpfFtcXF1cXFxcXS9nLCAnXFxcXCQmJyk7XHJcbiAgICAgICAgdGhpcy5zdG9yYWdlID0gdGhpcy5wbGF0Zm9ybS53aW5kb3cubG9jYWxTdG9yYWdlO1xyXG4gICAgICAgIHRoaXMuY3VycmVudFVzZXIgPSBpbml0aWFsVXNlcjtcclxuICAgICAgICB0aGlzLmxvY2FsQ2xpZW50U3RvcmFnZUtleSA9IGNyZWF0ZVdlYlN0b3JhZ2VDbGllbnRTdGF0ZUtleSh0aGlzLnBlcnNpc3RlbmNlS2V5LCB0aGlzLmxvY2FsQ2xpZW50SWQpO1xyXG4gICAgICAgIHRoaXMuc2VxdWVuY2VOdW1iZXJLZXkgPSBjcmVhdGVXZWJTdG9yYWdlU2VxdWVuY2VOdW1iZXJLZXkodGhpcy5wZXJzaXN0ZW5jZUtleSk7XHJcbiAgICAgICAgdGhpcy5hY3RpdmVDbGllbnRzW3RoaXMubG9jYWxDbGllbnRJZF0gPSBuZXcgTG9jYWxDbGllbnRTdGF0ZSgpO1xyXG4gICAgICAgIHRoaXMuY2xpZW50U3RhdGVLZXlSZSA9IG5ldyBSZWdFeHAoXCJeXCIgKyBDTElFTlRfU1RBVEVfS0VZX1BSRUZJWCArIFwiX1wiICsgZXNjYXBlZFBlcnNpc3RlbmNlS2V5ICsgXCJfKFteX10qKSRcIik7XHJcbiAgICAgICAgdGhpcy5tdXRhdGlvbkJhdGNoS2V5UmUgPSBuZXcgUmVnRXhwKFwiXlwiICsgTVVUQVRJT05fQkFUQ0hfS0VZX1BSRUZJWCArIFwiX1wiICsgZXNjYXBlZFBlcnNpc3RlbmNlS2V5ICsgXCJfKFxcXFxkKykoPzpfKC4qKSk/JFwiKTtcclxuICAgICAgICB0aGlzLnF1ZXJ5VGFyZ2V0S2V5UmUgPSBuZXcgUmVnRXhwKFwiXlwiICsgUVVFUllfVEFSR0VUX0tFWV9QUkVGSVggKyBcIl9cIiArIGVzY2FwZWRQZXJzaXN0ZW5jZUtleSArIFwiXyhcXFxcZCspJFwiKTtcclxuICAgICAgICB0aGlzLm9ubGluZVN0YXRlS2V5ID0gY3JlYXRlV2ViU3RvcmFnZU9ubGluZVN0YXRlS2V5KHRoaXMucGVyc2lzdGVuY2VLZXkpO1xyXG4gICAgICAgIC8vIFJhdGhlciB0aGFuIGFkZGluZyB0aGUgc3RvcmFnZSBvYnNlcnZlciBkdXJpbmcgc3RhcnQoKSwgd2UgYWRkIHRoZVxyXG4gICAgICAgIC8vIHN0b3JhZ2Ugb2JzZXJ2ZXIgZHVyaW5nIGluaXRpYWxpemF0aW9uLiBUaGlzIGVuc3VyZXMgdGhhdCB3ZSBjb2xsZWN0XHJcbiAgICAgICAgLy8gZXZlbnRzIGJlZm9yZSBvdGhlciBjb21wb25lbnRzIHBvcHVsYXRlIHRoZWlyIGluaXRpYWwgc3RhdGUgKGR1cmluZyB0aGVpclxyXG4gICAgICAgIC8vIHJlc3BlY3RpdmUgc3RhcnQoKSBjYWxscykuIE90aGVyd2lzZSwgd2UgbWlnaHQgZm9yIGV4YW1wbGUgbWlzcyBhXHJcbiAgICAgICAgLy8gbXV0YXRpb24gdGhhdCBpcyBhZGRlZCBhZnRlciBMb2NhbFN0b3JlJ3Mgc3RhcnQoKSBwcm9jZXNzZWQgdGhlIGV4aXN0aW5nXHJcbiAgICAgICAgLy8gbXV0YXRpb25zIGJ1dCBiZWZvcmUgd2Ugb2JzZXJ2ZSBXZWJTdG9yYWdlIGV2ZW50cy5cclxuICAgICAgICB0aGlzLnBsYXRmb3JtLndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdzdG9yYWdlJywgdGhpcy5zdG9yYWdlTGlzdGVuZXIpO1xyXG4gICAgfVxyXG4gICAgLyoqIFJldHVybnMgJ3RydWUnIGlmIFdlYlN0b3JhZ2UgaXMgYXZhaWxhYmxlIGluIHRoZSBjdXJyZW50IGVudmlyb25tZW50LiAqL1xyXG4gICAgV2ViU3RvcmFnZVNoYXJlZENsaWVudFN0YXRlLmlzQXZhaWxhYmxlID0gZnVuY3Rpb24gKHBsYXRmb3JtKSB7XHJcbiAgICAgICAgcmV0dXJuICEhKHBsYXRmb3JtLndpbmRvdyAmJiBwbGF0Zm9ybS53aW5kb3cubG9jYWxTdG9yYWdlICE9IG51bGwpO1xyXG4gICAgfTtcclxuICAgIFdlYlN0b3JhZ2VTaGFyZWRDbGllbnRTdGF0ZS5wcm90b3R5cGUuc3RhcnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRzbGliLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgZXhpc3RpbmdDbGllbnRzLCBfaSwgZXhpc3RpbmdDbGllbnRzXzEsIGNsaWVudElkLCBzdG9yYWdlSXRlbSwgY2xpZW50U3RhdGUsIG9ubGluZVN0YXRlSlNPTiwgb25saW5lU3RhdGUsIF9hLCBfYiwgZXZlbnRfMTtcclxuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYykge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYy5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXJ0KCF0aGlzLnN0YXJ0ZWQsICdXZWJTdG9yYWdlU2hhcmVkQ2xpZW50U3RhdGUgYWxyZWFkeSBzdGFydGVkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFzc2VydCh0aGlzLnN5bmNFbmdpbmUgIT09IG51bGwsICdzeW5jRW5naW5lIHByb3BlcnR5IG11c3QgYmUgc2V0IGJlZm9yZSBjYWxsaW5nIHN0YXJ0KCknKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXJ0KHRoaXMub25saW5lU3RhdGVIYW5kbGVyICE9PSBudWxsLCAnb25saW5lU3RhdGVIYW5kbGVyIHByb3BlcnR5IG11c3QgYmUgc2V0IGJlZm9yZSBjYWxsaW5nIHN0YXJ0KCknKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5zeW5jRW5naW5lLmdldEFjdGl2ZUNsaWVudHMoKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBleGlzdGluZ0NsaWVudHMgPSBfYy5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoX2kgPSAwLCBleGlzdGluZ0NsaWVudHNfMSA9IGV4aXN0aW5nQ2xpZW50czsgX2kgPCBleGlzdGluZ0NsaWVudHNfMS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWVudElkID0gZXhpc3RpbmdDbGllbnRzXzFbX2ldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNsaWVudElkID09PSB0aGlzLmxvY2FsQ2xpZW50SWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0b3JhZ2VJdGVtID0gdGhpcy5nZXRJdGVtKGNyZWF0ZVdlYlN0b3JhZ2VDbGllbnRTdGF0ZUtleSh0aGlzLnBlcnNpc3RlbmNlS2V5LCBjbGllbnRJZCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN0b3JhZ2VJdGVtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpZW50U3RhdGUgPSBSZW1vdGVDbGllbnRTdGF0ZS5mcm9tV2ViU3RvcmFnZUVudHJ5KGNsaWVudElkLCBzdG9yYWdlSXRlbSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNsaWVudFN0YXRlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZlQ2xpZW50c1tjbGllbnRTdGF0ZS5jbGllbnRJZF0gPSBjbGllbnRTdGF0ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wZXJzaXN0Q2xpZW50U3RhdGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb25saW5lU3RhdGVKU09OID0gdGhpcy5zdG9yYWdlLmdldEl0ZW0odGhpcy5vbmxpbmVTdGF0ZUtleSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvbmxpbmVTdGF0ZUpTT04pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9ubGluZVN0YXRlID0gdGhpcy5mcm9tV2ViU3RvcmFnZU9ubGluZVN0YXRlKG9ubGluZVN0YXRlSlNPTik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob25saW5lU3RhdGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZU9ubGluZVN0YXRlRXZlbnQob25saW5lU3RhdGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoX2EgPSAwLCBfYiA9IHRoaXMuZWFybHlFdmVudHM7IF9hIDwgX2IubGVuZ3RoOyBfYSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudF8xID0gX2JbX2FdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVXZWJTdG9yYWdlRXZlbnQoZXZlbnRfMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lYXJseUV2ZW50cyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBSZWdpc3RlciBhIHdpbmRvdyB1bmxvYWQgaG9vayB0byByZW1vdmUgdGhlIGNsaWVudCBtZXRhZGF0YSBlbnRyeSBmcm9tXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdlYlN0b3JhZ2UgZXZlbiBpZiBgc2h1dGRvd24oKWAgd2FzIG5vdCBjYWxsZWQuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGxhdGZvcm0ud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3VubG9hZCcsIGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLnNodXRkb3duKCk7IH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIFdlYlN0b3JhZ2VTaGFyZWRDbGllbnRTdGF0ZS5wcm90b3R5cGUud3JpdGVTZXF1ZW5jZU51bWJlciA9IGZ1bmN0aW9uIChzZXF1ZW5jZU51bWJlcikge1xyXG4gICAgICAgIHRoaXMuc2V0SXRlbSh0aGlzLnNlcXVlbmNlTnVtYmVyS2V5LCBKU09OLnN0cmluZ2lmeShzZXF1ZW5jZU51bWJlcikpO1xyXG4gICAgfTtcclxuICAgIFdlYlN0b3JhZ2VTaGFyZWRDbGllbnRTdGF0ZS5wcm90b3R5cGUuZ2V0QWxsQWN0aXZlUXVlcnlUYXJnZXRzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBhY3RpdmVUYXJnZXRzID0gdGFyZ2V0SWRTZXQoKTtcclxuICAgICAgICBmb3JFYWNoKHRoaXMuYWN0aXZlQ2xpZW50cywgZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcclxuICAgICAgICAgICAgYWN0aXZlVGFyZ2V0cyA9IGFjdGl2ZVRhcmdldHMudW5pb25XaXRoKHZhbHVlLmFjdGl2ZVRhcmdldElkcyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIGFjdGl2ZVRhcmdldHM7XHJcbiAgICB9O1xyXG4gICAgV2ViU3RvcmFnZVNoYXJlZENsaWVudFN0YXRlLnByb3RvdHlwZS5pc0FjdGl2ZVF1ZXJ5VGFyZ2V0ID0gZnVuY3Rpb24gKHRhcmdldElkKSB7XHJcbiAgICAgICAgLy8gVGhpcyBpcyBub3QgdXNpbmcgYG9iai5mb3JFYWNoYCBzaW5jZSBgZm9yRWFjaGAgZG9lc24ndCBzdXBwb3J0IGVhcmx5XHJcbiAgICAgICAgLy8gcmV0dXJuLlxyXG4gICAgICAgIGZvciAodmFyIGNsaWVudElkIGluIHRoaXMuYWN0aXZlQ2xpZW50cykge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5hY3RpdmVDbGllbnRzLmhhc093blByb3BlcnR5KGNsaWVudElkKSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuYWN0aXZlQ2xpZW50c1tjbGllbnRJZF0uYWN0aXZlVGFyZ2V0SWRzLmhhcyh0YXJnZXRJZCkpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9O1xyXG4gICAgV2ViU3RvcmFnZVNoYXJlZENsaWVudFN0YXRlLnByb3RvdHlwZS5hZGRQZW5kaW5nTXV0YXRpb24gPSBmdW5jdGlvbiAoYmF0Y2hJZCkge1xyXG4gICAgICAgIHRoaXMucGVyc2lzdE11dGF0aW9uU3RhdGUoYmF0Y2hJZCwgJ3BlbmRpbmcnKTtcclxuICAgIH07XHJcbiAgICBXZWJTdG9yYWdlU2hhcmVkQ2xpZW50U3RhdGUucHJvdG90eXBlLnVwZGF0ZU11dGF0aW9uU3RhdGUgPSBmdW5jdGlvbiAoYmF0Y2hJZCwgc3RhdGUsIGVycm9yKSB7XHJcbiAgICAgICAgdGhpcy5wZXJzaXN0TXV0YXRpb25TdGF0ZShiYXRjaElkLCBzdGF0ZSwgZXJyb3IpO1xyXG4gICAgICAgIC8vIE9uY2UgYSBmaW5hbCBtdXRhdGlvbiByZXN1bHQgaXMgb2JzZXJ2ZWQgYnkgb3RoZXIgY2xpZW50cywgdGhleSBubyBsb25nZXJcclxuICAgICAgICAvLyBhY2Nlc3MgdGhlIG11dGF0aW9uJ3MgbWV0YWRhdGEgZW50cnkuIFNpbmNlIFdlYlN0b3JhZ2UgcmVwbGF5cyBldmVudHNcclxuICAgICAgICAvLyBpbiBvcmRlciwgaXQgaXMgc2FmZSB0byBkZWxldGUgdGhlIGVudHJ5IHJpZ2h0IGFmdGVyIHVwZGF0aW5nIGl0LlxyXG4gICAgICAgIHRoaXMucmVtb3ZlTXV0YXRpb25TdGF0ZShiYXRjaElkKTtcclxuICAgIH07XHJcbiAgICBXZWJTdG9yYWdlU2hhcmVkQ2xpZW50U3RhdGUucHJvdG90eXBlLmFkZExvY2FsUXVlcnlUYXJnZXQgPSBmdW5jdGlvbiAodGFyZ2V0SWQpIHtcclxuICAgICAgICB2YXIgcXVlcnlTdGF0ZSA9ICdub3QtY3VycmVudCc7XHJcbiAgICAgICAgLy8gTG9va3VwIGFuIGV4aXN0aW5nIHF1ZXJ5IHN0YXRlIGlmIHRoZSB0YXJnZXQgSUQgd2FzIGFscmVhZHkgcmVnaXN0ZXJlZFxyXG4gICAgICAgIC8vIGJ5IGFub3RoZXIgdGFiXHJcbiAgICAgICAgaWYgKHRoaXMuaXNBY3RpdmVRdWVyeVRhcmdldCh0YXJnZXRJZCkpIHtcclxuICAgICAgICAgICAgdmFyIHN0b3JhZ2VJdGVtID0gdGhpcy5zdG9yYWdlLmdldEl0ZW0oY3JlYXRlV2ViU3RvcmFnZVF1ZXJ5VGFyZ2V0TWV0YWRhdGFLZXkodGhpcy5wZXJzaXN0ZW5jZUtleSwgdGFyZ2V0SWQpKTtcclxuICAgICAgICAgICAgaWYgKHN0b3JhZ2VJdGVtKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbWV0YWRhdGEgPSBRdWVyeVRhcmdldE1ldGFkYXRhLmZyb21XZWJTdG9yYWdlRW50cnkodGFyZ2V0SWQsIHN0b3JhZ2VJdGVtKTtcclxuICAgICAgICAgICAgICAgIGlmIChtZXRhZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHF1ZXJ5U3RhdGUgPSBtZXRhZGF0YS5zdGF0ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmxvY2FsQ2xpZW50U3RhdGUuYWRkUXVlcnlUYXJnZXQodGFyZ2V0SWQpO1xyXG4gICAgICAgIHRoaXMucGVyc2lzdENsaWVudFN0YXRlKCk7XHJcbiAgICAgICAgcmV0dXJuIHF1ZXJ5U3RhdGU7XHJcbiAgICB9O1xyXG4gICAgV2ViU3RvcmFnZVNoYXJlZENsaWVudFN0YXRlLnByb3RvdHlwZS5yZW1vdmVMb2NhbFF1ZXJ5VGFyZ2V0ID0gZnVuY3Rpb24gKHRhcmdldElkKSB7XHJcbiAgICAgICAgdGhpcy5sb2NhbENsaWVudFN0YXRlLnJlbW92ZVF1ZXJ5VGFyZ2V0KHRhcmdldElkKTtcclxuICAgICAgICB0aGlzLnBlcnNpc3RDbGllbnRTdGF0ZSgpO1xyXG4gICAgfTtcclxuICAgIFdlYlN0b3JhZ2VTaGFyZWRDbGllbnRTdGF0ZS5wcm90b3R5cGUuaXNMb2NhbFF1ZXJ5VGFyZ2V0ID0gZnVuY3Rpb24gKHRhcmdldElkKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubG9jYWxDbGllbnRTdGF0ZS5hY3RpdmVUYXJnZXRJZHMuaGFzKHRhcmdldElkKTtcclxuICAgIH07XHJcbiAgICBXZWJTdG9yYWdlU2hhcmVkQ2xpZW50U3RhdGUucHJvdG90eXBlLmNsZWFyUXVlcnlTdGF0ZSA9IGZ1bmN0aW9uICh0YXJnZXRJZCkge1xyXG4gICAgICAgIHRoaXMucmVtb3ZlSXRlbShjcmVhdGVXZWJTdG9yYWdlUXVlcnlUYXJnZXRNZXRhZGF0YUtleSh0aGlzLnBlcnNpc3RlbmNlS2V5LCB0YXJnZXRJZCkpO1xyXG4gICAgfTtcclxuICAgIFdlYlN0b3JhZ2VTaGFyZWRDbGllbnRTdGF0ZS5wcm90b3R5cGUudXBkYXRlUXVlcnlTdGF0ZSA9IGZ1bmN0aW9uICh0YXJnZXRJZCwgc3RhdGUsIGVycm9yKSB7XHJcbiAgICAgICAgdGhpcy5wZXJzaXN0UXVlcnlUYXJnZXRTdGF0ZSh0YXJnZXRJZCwgc3RhdGUsIGVycm9yKTtcclxuICAgIH07XHJcbiAgICBXZWJTdG9yYWdlU2hhcmVkQ2xpZW50U3RhdGUucHJvdG90eXBlLmhhbmRsZVVzZXJDaGFuZ2UgPSBmdW5jdGlvbiAodXNlciwgcmVtb3ZlZEJhdGNoSWRzLCBhZGRlZEJhdGNoSWRzKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICByZW1vdmVkQmF0Y2hJZHMuZm9yRWFjaChmdW5jdGlvbiAoYmF0Y2hJZCkge1xyXG4gICAgICAgICAgICBfdGhpcy5yZW1vdmVNdXRhdGlvblN0YXRlKGJhdGNoSWQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuY3VycmVudFVzZXIgPSB1c2VyO1xyXG4gICAgICAgIGFkZGVkQmF0Y2hJZHMuZm9yRWFjaChmdW5jdGlvbiAoYmF0Y2hJZCkge1xyXG4gICAgICAgICAgICBfdGhpcy5hZGRQZW5kaW5nTXV0YXRpb24oYmF0Y2hJZCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgV2ViU3RvcmFnZVNoYXJlZENsaWVudFN0YXRlLnByb3RvdHlwZS5zZXRPbmxpbmVTdGF0ZSA9IGZ1bmN0aW9uIChvbmxpbmVTdGF0ZSkge1xyXG4gICAgICAgIHRoaXMucGVyc2lzdE9ubGluZVN0YXRlKG9ubGluZVN0YXRlKTtcclxuICAgIH07XHJcbiAgICBXZWJTdG9yYWdlU2hhcmVkQ2xpZW50U3RhdGUucHJvdG90eXBlLnNodXRkb3duID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICh0aGlzLnN0YXJ0ZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5wbGF0Zm9ybS53aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignc3RvcmFnZScsIHRoaXMuc3RvcmFnZUxpc3RlbmVyKTtcclxuICAgICAgICAgICAgdGhpcy5yZW1vdmVJdGVtKHRoaXMubG9jYWxDbGllbnRTdG9yYWdlS2V5KTtcclxuICAgICAgICAgICAgdGhpcy5zdGFydGVkID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFdlYlN0b3JhZ2VTaGFyZWRDbGllbnRTdGF0ZS5wcm90b3R5cGUuZ2V0SXRlbSA9IGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICB2YXIgdmFsdWUgPSB0aGlzLnN0b3JhZ2UuZ2V0SXRlbShrZXkpO1xyXG4gICAgICAgIGRlYnVnKExPR19UQUckYSwgJ1JFQUQnLCBrZXksIHZhbHVlKTtcclxuICAgICAgICByZXR1cm4gdmFsdWU7XHJcbiAgICB9O1xyXG4gICAgV2ViU3RvcmFnZVNoYXJlZENsaWVudFN0YXRlLnByb3RvdHlwZS5zZXRJdGVtID0gZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcclxuICAgICAgICBkZWJ1ZyhMT0dfVEFHJGEsICdTRVQnLCBrZXksIHZhbHVlKTtcclxuICAgICAgICB0aGlzLnN0b3JhZ2Uuc2V0SXRlbShrZXksIHZhbHVlKTtcclxuICAgIH07XHJcbiAgICBXZWJTdG9yYWdlU2hhcmVkQ2xpZW50U3RhdGUucHJvdG90eXBlLnJlbW92ZUl0ZW0gPSBmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgICAgZGVidWcoTE9HX1RBRyRhLCAnUkVNT1ZFJywga2V5KTtcclxuICAgICAgICB0aGlzLnN0b3JhZ2UucmVtb3ZlSXRlbShrZXkpO1xyXG4gICAgfTtcclxuICAgIFdlYlN0b3JhZ2VTaGFyZWRDbGllbnRTdGF0ZS5wcm90b3R5cGUuaGFuZGxlV2ViU3RvcmFnZUV2ZW50ID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBpZiAoZXZlbnQuc3RvcmFnZUFyZWEgPT09IHRoaXMuc3RvcmFnZSkge1xyXG4gICAgICAgICAgICBkZWJ1ZyhMT0dfVEFHJGEsICdFVkVOVCcsIGV2ZW50LmtleSwgZXZlbnQubmV3VmFsdWUpO1xyXG4gICAgICAgICAgICBpZiAoZXZlbnQua2V5ID09PSB0aGlzLmxvY2FsQ2xpZW50U3RvcmFnZUtleSkge1xyXG4gICAgICAgICAgICAgICAgZXJyb3IoJ1JlY2VpdmVkIFdlYlN0b3JhZ2Ugbm90aWZpY2F0aW9uIGZvciBsb2NhbCBjaGFuZ2UuIEFub3RoZXIgY2xpZW50IG1pZ2h0IGhhdmUgJyArXHJcbiAgICAgICAgICAgICAgICAgICAgJ2dhcmJhZ2UtY29sbGVjdGVkIG91ciBzdGF0ZScpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMucXVldWUuZW5xdWV1ZUFuZEZvcmdldChmdW5jdGlvbiAoKSB7IHJldHVybiB0c2xpYi5fX2F3YWl0ZXIoX3RoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgY2xpZW50U3RhdGUsIGNsaWVudElkLCBtdXRhdGlvbk1ldGFkYXRhLCBxdWVyeVRhcmdldE1ldGFkYXRhLCBvbmxpbmVTdGF0ZSwgc2VxdWVuY2VOdW1iZXI7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHNsaWIuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLnN0YXJ0ZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lYXJseUV2ZW50cy5wdXNoKGV2ZW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAoZXZlbnQua2V5ID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuY2xpZW50U3RhdGVLZXlSZS50ZXN0KGV2ZW50LmtleSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50Lm5ld1ZhbHVlICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWVudFN0YXRlID0gdGhpcy5mcm9tV2ViU3RvcmFnZUNsaWVudFN0YXRlKGV2ZW50LmtleSwgZXZlbnQubmV3VmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNsaWVudFN0YXRlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMuaGFuZGxlQ2xpZW50U3RhdGVFdmVudChjbGllbnRTdGF0ZS5jbGllbnRJZCwgY2xpZW50U3RhdGUpXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWVudElkID0gdGhpcy5mcm9tV2ViU3RvcmFnZUNsaWVudFN0YXRlS2V5KGV2ZW50LmtleSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdGhpcy5oYW5kbGVDbGllbnRTdGF0ZUV2ZW50KGNsaWVudElkLCBudWxsKV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5tdXRhdGlvbkJhdGNoS2V5UmUudGVzdChldmVudC5rZXkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChldmVudC5uZXdWYWx1ZSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbXV0YXRpb25NZXRhZGF0YSA9IHRoaXMuZnJvbVdlYlN0b3JhZ2VNdXRhdGlvbk1ldGFkYXRhKGV2ZW50LmtleSwgZXZlbnQubmV3VmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG11dGF0aW9uTWV0YWRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdGhpcy5oYW5kbGVNdXRhdGlvbkJhdGNoRXZlbnQobXV0YXRpb25NZXRhZGF0YSldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMucXVlcnlUYXJnZXRLZXlSZS50ZXN0KGV2ZW50LmtleSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50Lm5ld1ZhbHVlICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdWVyeVRhcmdldE1ldGFkYXRhID0gdGhpcy5mcm9tV2ViU3RvcmFnZVF1ZXJ5VGFyZ2V0TWV0YWRhdGEoZXZlbnQua2V5LCBldmVudC5uZXdWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocXVlcnlUYXJnZXRNZXRhZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0aGlzLmhhbmRsZVF1ZXJ5VGFyZ2V0RXZlbnQocXVlcnlUYXJnZXRNZXRhZGF0YSldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGV2ZW50LmtleSA9PT0gdGhpcy5vbmxpbmVTdGF0ZUtleSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXZlbnQubmV3VmFsdWUgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9ubGluZVN0YXRlID0gdGhpcy5mcm9tV2ViU3RvcmFnZU9ubGluZVN0YXRlKGV2ZW50Lm5ld1ZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvbmxpbmVTdGF0ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0aGlzLmhhbmRsZU9ubGluZVN0YXRlRXZlbnQob25saW5lU3RhdGUpXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChldmVudC5rZXkgPT09IHRoaXMuc2VxdWVuY2VOdW1iZXJLZXkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXJ0KCEhdGhpcy5zZXF1ZW5jZU51bWJlckhhbmRsZXIsICdNaXNzaW5nIHNlcXVlbmNlTnVtYmVySGFuZGxlcicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXF1ZW5jZU51bWJlciA9IGZyb21XZWJTdG9yYWdlU2VxdWVuY2VOdW1iZXIoZXZlbnQubmV3VmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2VxdWVuY2VOdW1iZXIgIT09IExpc3RlblNlcXVlbmNlLklOVkFMSUQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VxdWVuY2VOdW1iZXJIYW5kbGVyKHNlcXVlbmNlTnVtYmVyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7IH0pO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoV2ViU3RvcmFnZVNoYXJlZENsaWVudFN0YXRlLnByb3RvdHlwZSwgXCJsb2NhbENsaWVudFN0YXRlXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYWN0aXZlQ2xpZW50c1t0aGlzLmxvY2FsQ2xpZW50SWRdO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgV2ViU3RvcmFnZVNoYXJlZENsaWVudFN0YXRlLnByb3RvdHlwZS5wZXJzaXN0Q2xpZW50U3RhdGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5zZXRJdGVtKHRoaXMubG9jYWxDbGllbnRTdG9yYWdlS2V5LCB0aGlzLmxvY2FsQ2xpZW50U3RhdGUudG9XZWJTdG9yYWdlSlNPTigpKTtcclxuICAgIH07XHJcbiAgICBXZWJTdG9yYWdlU2hhcmVkQ2xpZW50U3RhdGUucHJvdG90eXBlLnBlcnNpc3RNdXRhdGlvblN0YXRlID0gZnVuY3Rpb24gKGJhdGNoSWQsIHN0YXRlLCBlcnJvcikge1xyXG4gICAgICAgIHZhciBtdXRhdGlvblN0YXRlID0gbmV3IE11dGF0aW9uTWV0YWRhdGEodGhpcy5jdXJyZW50VXNlciwgYmF0Y2hJZCwgc3RhdGUsIGVycm9yKTtcclxuICAgICAgICB2YXIgbXV0YXRpb25LZXkgPSBjcmVhdGVXZWJTdG9yYWdlTXV0YXRpb25CYXRjaEtleSh0aGlzLnBlcnNpc3RlbmNlS2V5LCB0aGlzLmN1cnJlbnRVc2VyLCBiYXRjaElkKTtcclxuICAgICAgICB0aGlzLnNldEl0ZW0obXV0YXRpb25LZXksIG11dGF0aW9uU3RhdGUudG9XZWJTdG9yYWdlSlNPTigpKTtcclxuICAgIH07XHJcbiAgICBXZWJTdG9yYWdlU2hhcmVkQ2xpZW50U3RhdGUucHJvdG90eXBlLnJlbW92ZU11dGF0aW9uU3RhdGUgPSBmdW5jdGlvbiAoYmF0Y2hJZCkge1xyXG4gICAgICAgIHZhciBtdXRhdGlvbktleSA9IGNyZWF0ZVdlYlN0b3JhZ2VNdXRhdGlvbkJhdGNoS2V5KHRoaXMucGVyc2lzdGVuY2VLZXksIHRoaXMuY3VycmVudFVzZXIsIGJhdGNoSWQpO1xyXG4gICAgICAgIHRoaXMucmVtb3ZlSXRlbShtdXRhdGlvbktleSk7XHJcbiAgICB9O1xyXG4gICAgV2ViU3RvcmFnZVNoYXJlZENsaWVudFN0YXRlLnByb3RvdHlwZS5wZXJzaXN0T25saW5lU3RhdGUgPSBmdW5jdGlvbiAob25saW5lU3RhdGUpIHtcclxuICAgICAgICB2YXIgZW50cnkgPSB7XHJcbiAgICAgICAgICAgIGNsaWVudElkOiB0aGlzLmxvY2FsQ2xpZW50SWQsXHJcbiAgICAgICAgICAgIG9ubGluZVN0YXRlOiBPbmxpbmVTdGF0ZVtvbmxpbmVTdGF0ZV1cclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuc3RvcmFnZS5zZXRJdGVtKHRoaXMub25saW5lU3RhdGVLZXksIEpTT04uc3RyaW5naWZ5KGVudHJ5KSk7XHJcbiAgICB9O1xyXG4gICAgV2ViU3RvcmFnZVNoYXJlZENsaWVudFN0YXRlLnByb3RvdHlwZS5wZXJzaXN0UXVlcnlUYXJnZXRTdGF0ZSA9IGZ1bmN0aW9uICh0YXJnZXRJZCwgc3RhdGUsIGVycm9yKSB7XHJcbiAgICAgICAgdmFyIHRhcmdldEtleSA9IGNyZWF0ZVdlYlN0b3JhZ2VRdWVyeVRhcmdldE1ldGFkYXRhS2V5KHRoaXMucGVyc2lzdGVuY2VLZXksIHRhcmdldElkKTtcclxuICAgICAgICB2YXIgdGFyZ2V0TWV0YWRhdGEgPSBuZXcgUXVlcnlUYXJnZXRNZXRhZGF0YSh0YXJnZXRJZCwgc3RhdGUsIGVycm9yKTtcclxuICAgICAgICB0aGlzLnNldEl0ZW0odGFyZ2V0S2V5LCB0YXJnZXRNZXRhZGF0YS50b1dlYlN0b3JhZ2VKU09OKCkpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUGFyc2VzIGEgY2xpZW50IHN0YXRlIGtleSBpbiBXZWJTdG9yYWdlLiBSZXR1cm5zIG51bGwgaWYgdGhlIGtleSBkb2VzIG5vdFxyXG4gICAgICogbWF0Y2ggdGhlIGV4cGVjdGVkIGtleSBmb3JtYXQuXHJcbiAgICAgKi9cclxuICAgIFdlYlN0b3JhZ2VTaGFyZWRDbGllbnRTdGF0ZS5wcm90b3R5cGUuZnJvbVdlYlN0b3JhZ2VDbGllbnRTdGF0ZUtleSA9IGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICB2YXIgbWF0Y2ggPSB0aGlzLmNsaWVudFN0YXRlS2V5UmUuZXhlYyhrZXkpO1xyXG4gICAgICAgIHJldHVybiBtYXRjaCA/IG1hdGNoWzFdIDogbnVsbDtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFBhcnNlcyBhIGNsaWVudCBzdGF0ZSBpbiBXZWJTdG9yYWdlLiBSZXR1cm5zICdudWxsJyBpZiB0aGUgdmFsdWUgY291bGQgbm90XHJcbiAgICAgKiBiZSBwYXJzZWQuXHJcbiAgICAgKi9cclxuICAgIFdlYlN0b3JhZ2VTaGFyZWRDbGllbnRTdGF0ZS5wcm90b3R5cGUuZnJvbVdlYlN0b3JhZ2VDbGllbnRTdGF0ZSA9IGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XHJcbiAgICAgICAgdmFyIGNsaWVudElkID0gdGhpcy5mcm9tV2ViU3RvcmFnZUNsaWVudFN0YXRlS2V5KGtleSk7XHJcbiAgICAgICAgYXNzZXJ0KGNsaWVudElkICE9PSBudWxsLCBcIkNhbm5vdCBwYXJzZSBjbGllbnQgc3RhdGUga2V5ICdcIiArIGtleSArIFwiJ1wiKTtcclxuICAgICAgICByZXR1cm4gUmVtb3RlQ2xpZW50U3RhdGUuZnJvbVdlYlN0b3JhZ2VFbnRyeShjbGllbnRJZCwgdmFsdWUpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUGFyc2VzIGEgbXV0YXRpb24gYmF0Y2ggc3RhdGUgaW4gV2ViU3RvcmFnZS4gUmV0dXJucyAnbnVsbCcgaWYgdGhlIHZhbHVlXHJcbiAgICAgKiBjb3VsZCBub3QgYmUgcGFyc2VkLlxyXG4gICAgICovXHJcbiAgICBXZWJTdG9yYWdlU2hhcmVkQ2xpZW50U3RhdGUucHJvdG90eXBlLmZyb21XZWJTdG9yYWdlTXV0YXRpb25NZXRhZGF0YSA9IGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XHJcbiAgICAgICAgdmFyIG1hdGNoID0gdGhpcy5tdXRhdGlvbkJhdGNoS2V5UmUuZXhlYyhrZXkpO1xyXG4gICAgICAgIGFzc2VydChtYXRjaCAhPT0gbnVsbCwgXCJDYW5ub3QgcGFyc2UgbXV0YXRpb24gYmF0Y2gga2V5ICdcIiArIGtleSArIFwiJ1wiKTtcclxuICAgICAgICB2YXIgYmF0Y2hJZCA9IE51bWJlcihtYXRjaFsxXSk7XHJcbiAgICAgICAgdmFyIHVzZXJJZCA9IG1hdGNoWzJdICE9PSB1bmRlZmluZWQgPyBtYXRjaFsyXSA6IG51bGw7XHJcbiAgICAgICAgcmV0dXJuIE11dGF0aW9uTWV0YWRhdGEuZnJvbVdlYlN0b3JhZ2VFbnRyeShuZXcgVXNlcih1c2VySWQpLCBiYXRjaElkLCB2YWx1ZSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBQYXJzZXMgYSBxdWVyeSB0YXJnZXQgc3RhdGUgZnJvbSBXZWJTdG9yYWdlLiBSZXR1cm5zICdudWxsJyBpZiB0aGUgdmFsdWVcclxuICAgICAqIGNvdWxkIG5vdCBiZSBwYXJzZWQuXHJcbiAgICAgKi9cclxuICAgIFdlYlN0b3JhZ2VTaGFyZWRDbGllbnRTdGF0ZS5wcm90b3R5cGUuZnJvbVdlYlN0b3JhZ2VRdWVyeVRhcmdldE1ldGFkYXRhID0gZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcclxuICAgICAgICB2YXIgbWF0Y2ggPSB0aGlzLnF1ZXJ5VGFyZ2V0S2V5UmUuZXhlYyhrZXkpO1xyXG4gICAgICAgIGFzc2VydChtYXRjaCAhPT0gbnVsbCwgXCJDYW5ub3QgcGFyc2UgcXVlcnkgdGFyZ2V0IGtleSAnXCIgKyBrZXkgKyBcIidcIik7XHJcbiAgICAgICAgdmFyIHRhcmdldElkID0gTnVtYmVyKG1hdGNoWzFdKTtcclxuICAgICAgICByZXR1cm4gUXVlcnlUYXJnZXRNZXRhZGF0YS5mcm9tV2ViU3RvcmFnZUVudHJ5KHRhcmdldElkLCB2YWx1ZSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBQYXJzZXMgYW4gb25saW5lIHN0YXRlIGZyb20gV2ViU3RvcmFnZS4gUmV0dXJucyAnbnVsbCcgaWYgdGhlIHZhbHVlXHJcbiAgICAgKiBjb3VsZCBub3QgYmUgcGFyc2VkLlxyXG4gICAgICovXHJcbiAgICBXZWJTdG9yYWdlU2hhcmVkQ2xpZW50U3RhdGUucHJvdG90eXBlLmZyb21XZWJTdG9yYWdlT25saW5lU3RhdGUgPSBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICByZXR1cm4gU2hhcmVkT25saW5lU3RhdGUuZnJvbVdlYlN0b3JhZ2VFbnRyeSh2YWx1ZSk7XHJcbiAgICB9O1xyXG4gICAgV2ViU3RvcmFnZVNoYXJlZENsaWVudFN0YXRlLnByb3RvdHlwZS5oYW5kbGVNdXRhdGlvbkJhdGNoRXZlbnQgPSBmdW5jdGlvbiAobXV0YXRpb25CYXRjaCkge1xyXG4gICAgICAgIHJldHVybiB0c2xpYi5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKG11dGF0aW9uQmF0Y2gudXNlci51aWQgIT09IHRoaXMuY3VycmVudFVzZXIudWlkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVidWcoTE9HX1RBRyRhLCBcIklnbm9yaW5nIG11dGF0aW9uIGZvciBub24tYWN0aXZlIHVzZXIgXCIgKyBtdXRhdGlvbkJhdGNoLnVzZXIudWlkKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdGhpcy5zeW5jRW5naW5lLmFwcGx5QmF0Y2hTdGF0ZShtdXRhdGlvbkJhdGNoLmJhdGNoSWQsIG11dGF0aW9uQmF0Y2guc3RhdGUsIG11dGF0aW9uQmF0Y2guZXJyb3IpXTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgV2ViU3RvcmFnZVNoYXJlZENsaWVudFN0YXRlLnByb3RvdHlwZS5oYW5kbGVRdWVyeVRhcmdldEV2ZW50ID0gZnVuY3Rpb24gKHRhcmdldE1ldGFkYXRhKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc3luY0VuZ2luZS5hcHBseVRhcmdldFN0YXRlKHRhcmdldE1ldGFkYXRhLnRhcmdldElkLCB0YXJnZXRNZXRhZGF0YS5zdGF0ZSwgdGFyZ2V0TWV0YWRhdGEuZXJyb3IpO1xyXG4gICAgfTtcclxuICAgIFdlYlN0b3JhZ2VTaGFyZWRDbGllbnRTdGF0ZS5wcm90b3R5cGUuaGFuZGxlQ2xpZW50U3RhdGVFdmVudCA9IGZ1bmN0aW9uIChjbGllbnRJZCwgY2xpZW50U3RhdGUpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhciBleGlzdGluZ1RhcmdldHMgPSB0aGlzLmdldEFsbEFjdGl2ZVF1ZXJ5VGFyZ2V0cygpO1xyXG4gICAgICAgIGlmIChjbGllbnRTdGF0ZSkge1xyXG4gICAgICAgICAgICB0aGlzLmFjdGl2ZUNsaWVudHNbY2xpZW50SWRdID0gY2xpZW50U3RhdGU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBkZWxldGUgdGhpcy5hY3RpdmVDbGllbnRzW2NsaWVudElkXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIG5ld1RhcmdldHMgPSB0aGlzLmdldEFsbEFjdGl2ZVF1ZXJ5VGFyZ2V0cygpO1xyXG4gICAgICAgIHZhciBhZGRlZFRhcmdldHMgPSBbXTtcclxuICAgICAgICB2YXIgcmVtb3ZlZFRhcmdldHMgPSBbXTtcclxuICAgICAgICBuZXdUYXJnZXRzLmZvckVhY2goZnVuY3Rpb24gKHRhcmdldElkKSB7IHJldHVybiB0c2xpYi5fX2F3YWl0ZXIoX3RoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYi5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIGlmICghZXhpc3RpbmdUYXJnZXRzLmhhcyh0YXJnZXRJZCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBhZGRlZFRhcmdldHMucHVzaCh0YXJnZXRJZCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pOyB9KTtcclxuICAgICAgICBleGlzdGluZ1RhcmdldHMuZm9yRWFjaChmdW5jdGlvbiAodGFyZ2V0SWQpIHsgcmV0dXJuIHRzbGliLl9fYXdhaXRlcihfdGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFuZXdUYXJnZXRzLmhhcyh0YXJnZXRJZCkpIHtcclxuICAgICAgICAgICAgICAgICAgICByZW1vdmVkVGFyZ2V0cy5wdXNoKHRhcmdldElkKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7IH0pO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnN5bmNFbmdpbmUuYXBwbHlBY3RpdmVUYXJnZXRzQ2hhbmdlKGFkZGVkVGFyZ2V0cywgcmVtb3ZlZFRhcmdldHMpO1xyXG4gICAgfTtcclxuICAgIFdlYlN0b3JhZ2VTaGFyZWRDbGllbnRTdGF0ZS5wcm90b3R5cGUuaGFuZGxlT25saW5lU3RhdGVFdmVudCA9IGZ1bmN0aW9uIChvbmxpbmVTdGF0ZSkge1xyXG4gICAgICAgIC8vIFdlIGNoZWNrIHdoZXRoZXIgdGhlIGNsaWVudCB0aGF0IHdyb3RlIHRoaXMgb25saW5lIHN0YXRlIGlzIHN0aWxsIGFjdGl2ZVxyXG4gICAgICAgIC8vIGJ5IGNvbXBhcmluZyBpdHMgY2xpZW50IElEIHRvIHRoZSBsaXN0IG9mIGNsaWVudHMga2VwdCBhY3RpdmUgaW5cclxuICAgICAgICAvLyBJbmRleGVkRGIuIElmIGEgY2xpZW50IGRvZXMgbm90IHVwZGF0ZSB0aGVpciBJbmRleGVkRGIgY2xpZW50IHN0YXRlXHJcbiAgICAgICAgLy8gd2l0aGluIDUgc2Vjb25kcywgaXQgaXMgY29uc2lkZXJlZCBpbmFjdGl2ZSBhbmQgd2UgZG9uJ3QgZW1pdCBhbiBvbmxpbmVcclxuICAgICAgICAvLyBzdGF0ZSBldmVudC5cclxuICAgICAgICBpZiAodGhpcy5hY3RpdmVDbGllbnRzW29ubGluZVN0YXRlLmNsaWVudElkXSkge1xyXG4gICAgICAgICAgICB0aGlzLm9ubGluZVN0YXRlSGFuZGxlcihvbmxpbmVTdGF0ZS5vbmxpbmVTdGF0ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHJldHVybiBXZWJTdG9yYWdlU2hhcmVkQ2xpZW50U3RhdGU7XHJcbn0oKSk7XHJcbmZ1bmN0aW9uIGZyb21XZWJTdG9yYWdlU2VxdWVuY2VOdW1iZXIoc2VxU3RyaW5nKSB7XHJcbiAgICB2YXIgc2VxdWVuY2VOdW1iZXIgPSBMaXN0ZW5TZXF1ZW5jZS5JTlZBTElEO1xyXG4gICAgaWYgKHNlcVN0cmluZyAhPSBudWxsKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgdmFyIHBhcnNlZCA9IEpTT04ucGFyc2Uoc2VxU3RyaW5nKTtcclxuICAgICAgICAgICAgYXNzZXJ0KHR5cGVvZiBwYXJzZWQgPT09ICdudW1iZXInLCAnRm91bmQgbm9uLW51bWVyaWMgc2VxdWVuY2UgbnVtYmVyJyk7XHJcbiAgICAgICAgICAgIHNlcXVlbmNlTnVtYmVyID0gcGFyc2VkO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICBlcnJvcihMT0dfVEFHJGEsICdGYWlsZWQgdG8gcmVhZCBzZXF1ZW5jZSBudW1iZXIgZnJvbSBXZWJTdG9yYWdlJywgZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHNlcXVlbmNlTnVtYmVyO1xyXG59XHJcbi8qKlxyXG4gKiBgTWVtb3J5U2hhcmVkQ2xpZW50U3RhdGVgIGlzIGEgc2ltcGxlIGltcGxlbWVudGF0aW9uIG9mIFNoYXJlZENsaWVudFN0YXRlIGZvclxyXG4gKiBjbGllbnRzIHVzaW5nIG1lbW9yeSBwZXJzaXN0ZW5jZS4gVGhlIHN0YXRlIGluIHRoaXMgY2xhc3MgcmVtYWlucyBmdWxseVxyXG4gKiBpc29sYXRlZCBhbmQgbm8gc3luY2hyb25pemF0aW9uIGlzIHBlcmZvcm1lZC5cclxuICovXHJcbnZhciBNZW1vcnlTaGFyZWRDbGllbnRTdGF0ZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIE1lbW9yeVNoYXJlZENsaWVudFN0YXRlKCkge1xyXG4gICAgICAgIHRoaXMubG9jYWxTdGF0ZSA9IG5ldyBMb2NhbENsaWVudFN0YXRlKCk7XHJcbiAgICAgICAgdGhpcy5xdWVyeVN0YXRlID0ge307XHJcbiAgICAgICAgdGhpcy5zeW5jRW5naW5lID0gbnVsbDtcclxuICAgICAgICB0aGlzLm9ubGluZVN0YXRlSGFuZGxlciA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5zZXF1ZW5jZU51bWJlckhhbmRsZXIgPSBudWxsO1xyXG4gICAgfVxyXG4gICAgTWVtb3J5U2hhcmVkQ2xpZW50U3RhdGUucHJvdG90eXBlLmFkZFBlbmRpbmdNdXRhdGlvbiA9IGZ1bmN0aW9uIChiYXRjaElkKSB7XHJcbiAgICAgICAgLy8gTm8gb3AuXHJcbiAgICB9O1xyXG4gICAgTWVtb3J5U2hhcmVkQ2xpZW50U3RhdGUucHJvdG90eXBlLnVwZGF0ZU11dGF0aW9uU3RhdGUgPSBmdW5jdGlvbiAoYmF0Y2hJZCwgc3RhdGUsIGVycm9yKSB7XHJcbiAgICAgICAgLy8gTm8gb3AuXHJcbiAgICB9O1xyXG4gICAgTWVtb3J5U2hhcmVkQ2xpZW50U3RhdGUucHJvdG90eXBlLmFkZExvY2FsUXVlcnlUYXJnZXQgPSBmdW5jdGlvbiAodGFyZ2V0SWQpIHtcclxuICAgICAgICB0aGlzLmxvY2FsU3RhdGUuYWRkUXVlcnlUYXJnZXQodGFyZ2V0SWQpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnF1ZXJ5U3RhdGVbdGFyZ2V0SWRdIHx8ICdub3QtY3VycmVudCc7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5U2hhcmVkQ2xpZW50U3RhdGUucHJvdG90eXBlLnVwZGF0ZVF1ZXJ5U3RhdGUgPSBmdW5jdGlvbiAodGFyZ2V0SWQsIHN0YXRlLCBlcnJvcikge1xyXG4gICAgICAgIHRoaXMucXVlcnlTdGF0ZVt0YXJnZXRJZF0gPSBzdGF0ZTtcclxuICAgIH07XHJcbiAgICBNZW1vcnlTaGFyZWRDbGllbnRTdGF0ZS5wcm90b3R5cGUucmVtb3ZlTG9jYWxRdWVyeVRhcmdldCA9IGZ1bmN0aW9uICh0YXJnZXRJZCkge1xyXG4gICAgICAgIHRoaXMubG9jYWxTdGF0ZS5yZW1vdmVRdWVyeVRhcmdldCh0YXJnZXRJZCk7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5U2hhcmVkQ2xpZW50U3RhdGUucHJvdG90eXBlLmlzTG9jYWxRdWVyeVRhcmdldCA9IGZ1bmN0aW9uICh0YXJnZXRJZCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmxvY2FsU3RhdGUuYWN0aXZlVGFyZ2V0SWRzLmhhcyh0YXJnZXRJZCk7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5U2hhcmVkQ2xpZW50U3RhdGUucHJvdG90eXBlLmNsZWFyUXVlcnlTdGF0ZSA9IGZ1bmN0aW9uICh0YXJnZXRJZCkge1xyXG4gICAgICAgIGRlbGV0ZSB0aGlzLnF1ZXJ5U3RhdGVbdGFyZ2V0SWRdO1xyXG4gICAgfTtcclxuICAgIE1lbW9yeVNoYXJlZENsaWVudFN0YXRlLnByb3RvdHlwZS5nZXRBbGxBY3RpdmVRdWVyeVRhcmdldHMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubG9jYWxTdGF0ZS5hY3RpdmVUYXJnZXRJZHM7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5U2hhcmVkQ2xpZW50U3RhdGUucHJvdG90eXBlLmlzQWN0aXZlUXVlcnlUYXJnZXQgPSBmdW5jdGlvbiAodGFyZ2V0SWQpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5sb2NhbFN0YXRlLmFjdGl2ZVRhcmdldElkcy5oYXModGFyZ2V0SWQpO1xyXG4gICAgfTtcclxuICAgIE1lbW9yeVNoYXJlZENsaWVudFN0YXRlLnByb3RvdHlwZS5zdGFydCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmxvY2FsU3RhdGUgPSBuZXcgTG9jYWxDbGllbnRTdGF0ZSgpO1xyXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcclxuICAgIH07XHJcbiAgICBNZW1vcnlTaGFyZWRDbGllbnRTdGF0ZS5wcm90b3R5cGUuaGFuZGxlVXNlckNoYW5nZSA9IGZ1bmN0aW9uICh1c2VyLCByZW1vdmVkQmF0Y2hJZHMsIGFkZGVkQmF0Y2hJZHMpIHtcclxuICAgICAgICAvLyBObyBvcC5cclxuICAgIH07XHJcbiAgICBNZW1vcnlTaGFyZWRDbGllbnRTdGF0ZS5wcm90b3R5cGUuc2V0T25saW5lU3RhdGUgPSBmdW5jdGlvbiAob25saW5lU3RhdGUpIHtcclxuICAgICAgICAvLyBObyBvcC5cclxuICAgIH07XHJcbiAgICBNZW1vcnlTaGFyZWRDbGllbnRTdGF0ZS5wcm90b3R5cGUuc2h1dGRvd24gPSBmdW5jdGlvbiAoKSB7IH07XHJcbiAgICBNZW1vcnlTaGFyZWRDbGllbnRTdGF0ZS5wcm90b3R5cGUud3JpdGVTZXF1ZW5jZU51bWJlciA9IGZ1bmN0aW9uIChzZXF1ZW5jZU51bWJlcikgeyB9O1xyXG4gICAgcmV0dXJuIE1lbW9yeVNoYXJlZENsaWVudFN0YXRlO1xyXG59KCkpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxudmFyIExPR19UQUckYiA9ICdGaXJlc3RvcmVDbGllbnQnO1xyXG4vKiogRE9NRXhjZXB0aW9uIGVycm9yIGNvZGUgY29uc3RhbnRzLiAqL1xyXG52YXIgRE9NX0VYQ0VQVElPTl9JTlZBTElEX1NUQVRFID0gMTE7XHJcbnZhciBET01fRVhDRVBUSU9OX0FCT1JURUQgPSAyMDtcclxudmFyIERPTV9FWENFUFRJT05fUVVPVEFfRVhDRUVERUQgPSAyMjtcclxudmFyIEluZGV4ZWREYlBlcnNpc3RlbmNlU2V0dGluZ3MgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBJbmRleGVkRGJQZXJzaXN0ZW5jZVNldHRpbmdzKGNhY2hlU2l6ZUJ5dGVzLCBzeW5jaHJvbml6ZVRhYnMpIHtcclxuICAgICAgICB0aGlzLmNhY2hlU2l6ZUJ5dGVzID0gY2FjaGVTaXplQnl0ZXM7XHJcbiAgICAgICAgdGhpcy5zeW5jaHJvbml6ZVRhYnMgPSBzeW5jaHJvbml6ZVRhYnM7XHJcbiAgICB9XHJcbiAgICBJbmRleGVkRGJQZXJzaXN0ZW5jZVNldHRpbmdzLnByb3RvdHlwZS5scnVQYXJhbXMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIExydVBhcmFtcy53aXRoQ2FjaGVTaXplKHRoaXMuY2FjaGVTaXplQnl0ZXMpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBJbmRleGVkRGJQZXJzaXN0ZW5jZVNldHRpbmdzO1xyXG59KCkpO1xyXG52YXIgTWVtb3J5UGVyc2lzdGVuY2VTZXR0aW5ncyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIE1lbW9yeVBlcnNpc3RlbmNlU2V0dGluZ3MoKSB7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gTWVtb3J5UGVyc2lzdGVuY2VTZXR0aW5ncztcclxufSgpKTtcclxuLyoqXHJcbiAqIEZpcmVzdG9yZUNsaWVudCBpcyBhIHRvcC1sZXZlbCBjbGFzcyB0aGF0IGNvbnN0cnVjdHMgYW5kIG93bnMgYWxsIG9mIHRoZVxyXG4gKiBwaWVjZXMgb2YgdGhlIGNsaWVudCBTREsgYXJjaGl0ZWN0dXJlLiBJdCBpcyByZXNwb25zaWJsZSBmb3IgY3JlYXRpbmcgdGhlXHJcbiAqIGFzeW5jIHF1ZXVlIHRoYXQgaXMgc2hhcmVkIGJ5IGFsbCBvZiB0aGUgb3RoZXIgY29tcG9uZW50cyBpbiB0aGUgc3lzdGVtLlxyXG4gKi9cclxudmFyIEZpcmVzdG9yZUNsaWVudCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEZpcmVzdG9yZUNsaWVudChwbGF0Zm9ybSwgZGF0YWJhc2VJbmZvLCBjcmVkZW50aWFscywgXHJcbiAgICAvKipcclxuICAgICAqIEFzeW5jaHJvbm91cyBxdWV1ZSByZXNwb25zaWJsZSBmb3IgYWxsIG9mIG91ciBpbnRlcm5hbCBwcm9jZXNzaW5nLiBXaGVuXHJcbiAgICAgKiB3ZSBnZXQgaW5jb21pbmcgd29yayBmcm9tIHRoZSB1c2VyICh2aWEgcHVibGljIEFQSSkgb3IgdGhlIG5ldHdvcmtcclxuICAgICAqIChpbmNvbWluZyBHUlBDIG1lc3NhZ2VzKSwgd2Ugc2hvdWxkIGFsd2F5cyBzY2hlZHVsZSBvbnRvIHRoaXMgcXVldWUuXHJcbiAgICAgKiBUaGlzIGVuc3VyZXMgYWxsIG9mIG91ciB3b3JrIGlzIHByb3Blcmx5IHNlcmlhbGl6ZWQgKGUuZy4gd2UgZG9uJ3RcclxuICAgICAqIHN0YXJ0IHByb2Nlc3NpbmcgYSBuZXcgb3BlcmF0aW9uIHdoaWxlIHRoZSBwcmV2aW91cyBvbmUgaXMgd2FpdGluZyBmb3JcclxuICAgICAqIGFuIGFzeW5jIEkvTyB0byBjb21wbGV0ZSkuXHJcbiAgICAgKi9cclxuICAgIGFzeW5jUXVldWUpIHtcclxuICAgICAgICB0aGlzLnBsYXRmb3JtID0gcGxhdGZvcm07XHJcbiAgICAgICAgdGhpcy5kYXRhYmFzZUluZm8gPSBkYXRhYmFzZUluZm87XHJcbiAgICAgICAgdGhpcy5jcmVkZW50aWFscyA9IGNyZWRlbnRpYWxzO1xyXG4gICAgICAgIHRoaXMuYXN5bmNRdWV1ZSA9IGFzeW5jUXVldWU7XHJcbiAgICAgICAgdGhpcy5jbGllbnRJZCA9IEF1dG9JZC5uZXdJZCgpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBTdGFydHMgdXAgdGhlIEZpcmVzdG9yZUNsaWVudCwgcmV0dXJuaW5nIG9ubHkgd2hldGhlciBvciBub3QgZW5hYmxpbmdcclxuICAgICAqIHBlcnNpc3RlbmNlIHN1Y2NlZWRlZC5cclxuICAgICAqXHJcbiAgICAgKiBUaGUgaW50ZW50IGhlcmUgaXMgdG8gXCJkbyB0aGUgcmlnaHQgdGhpbmdcIiBhcyBmYXIgYXMgdXNlcnMgYXJlIGNvbmNlcm5lZC5cclxuICAgICAqIE5hbWVseSwgaW4gY2FzZXMgd2hlcmUgb2ZmbGluZSBwZXJzaXN0ZW5jZSBpcyByZXF1ZXN0ZWQgYW5kIHBvc3NpYmxlLFxyXG4gICAgICogZW5hYmxlIGl0LCBidXQgb3RoZXJ3aXNlIGZhbGwgYmFjayB0byBwZXJzaXN0ZW5jZSBkaXNhYmxlZC4gRm9yIHRoZSBtb3N0XHJcbiAgICAgKiBwYXJ0IHdlIGV4cGVjdCB0aGlzIHRvIHN1Y2NlZWQgb25lIHdheSBvciB0aGUgb3RoZXIgc28gd2UgZG9uJ3QgZXhwZWN0IG91clxyXG4gICAgICogdXNlcnMgdG8gYWN0dWFsbHkgd2FpdCBvbiB0aGUgZmlyZXN0b3JlLmVuYWJsZVBlcnNpc3RlbmNlIFByb21pc2Ugc2luY2VcclxuICAgICAqIHRoZXkgZ2VuZXJhbGx5IHdvbid0IGNhcmUuXHJcbiAgICAgKlxyXG4gICAgICogT2YgY291cnNlIHNvbWUgdXNlcnMgYWN0dWFsbHkgZG8gY2FyZSBhYm91dCB3aGV0aGVyIG9yIG5vdCBwZXJzaXN0ZW5jZVxyXG4gICAgICogd2FzIHN1Y2Nlc3NmdWxseSBlbmFibGVkLCBzbyB0aGUgUHJvbWlzZSByZXR1cm5lZCBmcm9tIHRoaXMgbWV0aG9kXHJcbiAgICAgKiBpbmRpY2F0ZXMgdGhpcyBvdXRjb21lLlxyXG4gICAgICpcclxuICAgICAqIFRoaXMgcHJlc2VudHMgYSBwcm9ibGVtIHRob3VnaDogZXZlbiBiZWZvcmUgZW5hYmxlUGVyc2lzdGVuY2UgcmVzb2x2ZXMgb3JcclxuICAgICAqIHJlamVjdHMsIHVzZXJzIG1heSBoYXZlIG1hZGUgY2FsbHMgdG8gZS5nLiBmaXJlc3RvcmUuY29sbGVjdGlvbigpIHdoaWNoXHJcbiAgICAgKiBtZWFucyB0aGF0IHRoZSBGaXJlc3RvcmVDbGllbnQgaW4gdGhlcmUgd2lsbCBiZSBhdmFpbGFibGUgYW5kIHdpbGwgYmVcclxuICAgICAqIGVucXVldWluZyBhY3Rpb25zIG9uIHRoZSBhc3luYyBxdWV1ZS5cclxuICAgICAqXHJcbiAgICAgKiBNZWFud2hpbGUgYW55IGZhaWx1cmUgb2YgYW4gb3BlcmF0aW9uIG9uIHRoZSBhc3luYyBxdWV1ZSBjYXVzZXMgaXQgdG9cclxuICAgICAqIHBhbmljIGFuZCByZWplY3QgYW55IGZ1cnRoZXIgd29yaywgb24gdGhlIHByZW1pc2UgdGhhdCB1bmhhbmRsZWQgZXJyb3JzXHJcbiAgICAgKiBhcmUgZmF0YWwuXHJcbiAgICAgKlxyXG4gICAgICogQ29uc2VxdWVudGx5IHRoZSBmYWxsYmFjayBpcyBoYW5kbGVkIGludGVybmFsbHkgaGVyZSBpbiBzdGFydCwgYW5kIGlmIHRoZVxyXG4gICAgICogZmFsbGJhY2sgc3VjY2VlZHMgd2Ugc2lnbmFsIHN1Y2Nlc3MgdG8gdGhlIGFzeW5jIHF1ZXVlIGV2ZW4gdGhvdWdoIHRoZVxyXG4gICAgICogc3RhcnQoKSBpdHNlbGYgc2lnbmFscyBmYWlsdXJlLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBwZXJzaXN0ZW5jZVNldHRpbmdzIFNldHRpbmdzIG9iamVjdCB0byBjb25maWd1cmUgb2ZmbGluZVxyXG4gICAgICogICAgIHBlcnNpc3RlbmNlLlxyXG4gICAgICogQHJldHVybnMgQSBkZWZlcnJlZCByZXN1bHQgaW5kaWNhdGluZyB0aGUgdXNlci12aXNpYmxlIHJlc3VsdCBvZiBlbmFibGluZ1xyXG4gICAgICogICAgIG9mZmxpbmUgcGVyc2lzdGVuY2UuIFRoaXMgbWV0aG9kIHdpbGwgcmVqZWN0IHRoaXMgaWYgSW5kZXhlZERCIGZhaWxzIHRvXHJcbiAgICAgKiAgICAgc3RhcnQgZm9yIGFueSByZWFzb24uIElmIHVzZVBlcnNpc3RlbmNlIGlzIGZhbHNlIHRoaXMgaXNcclxuICAgICAqICAgICB1bmNvbmRpdGlvbmFsbHkgcmVzb2x2ZWQuXHJcbiAgICAgKi9cclxuICAgIEZpcmVzdG9yZUNsaWVudC5wcm90b3R5cGUuc3RhcnQgPSBmdW5jdGlvbiAocGVyc2lzdGVuY2VTZXR0aW5ncykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy52ZXJpZnlOb3RUZXJtaW5hdGVkKCk7XHJcbiAgICAgICAgLy8gV2UgZGVmZXIgb3VyIGluaXRpYWxpemF0aW9uIHVudGlsIHdlIGdldCB0aGUgY3VycmVudCB1c2VyIGZyb21cclxuICAgICAgICAvLyBzZXRDaGFuZ2VMaXN0ZW5lcigpLiBXZSBibG9jayB0aGUgYXN5bmMgcXVldWUgdW50aWwgd2UgZ290IHRoZSBpbml0aWFsXHJcbiAgICAgICAgLy8gdXNlciBhbmQgdGhlIGluaXRpYWxpemF0aW9uIGlzIGNvbXBsZXRlZC4gVGhpcyB3aWxsIHByZXZlbnQgYW55IHNjaGVkdWxlZFxyXG4gICAgICAgIC8vIHdvcmsgZnJvbSBoYXBwZW5pbmcgYmVmb3JlIGluaXRpYWxpemF0aW9uIGlzIGNvbXBsZXRlZC5cclxuICAgICAgICAvL1xyXG4gICAgICAgIC8vIElmIGluaXRpYWxpemF0aW9uRG9uZSByZXNvbHZlZCB0aGVuIHRoZSBGaXJlc3RvcmVDbGllbnQgaXMgaW4gYSB1c2FibGVcclxuICAgICAgICAvLyBzdGF0ZS5cclxuICAgICAgICB2YXIgaW5pdGlhbGl6YXRpb25Eb25lID0gbmV3IERlZmVycmVkKCk7XHJcbiAgICAgICAgLy8gSWYgdXNlUGVyc2lzdGVuY2UgaXMgdHJ1ZSwgY2VydGFpbiBjbGFzc2VzIG9mIGVycm9ycyB3aGlsZSBzdGFydGluZyBhcmVcclxuICAgICAgICAvLyByZWNvdmVyYWJsZSBidXQgb25seSBieSBmYWxsaW5nIGJhY2sgdG8gcGVyc2lzdGVuY2UgZGlzYWJsZWQuXHJcbiAgICAgICAgLy9cclxuICAgICAgICAvLyBJZiB0aGVyZSdzIGFuIGVycm9yIGluIHRoZSBmaXJzdCBjYXNlIGJ1dCBub3QgaW4gcmVjb3Zlcnkgd2UgY2Fubm90XHJcbiAgICAgICAgLy8gcmVqZWN0IHRoZSBwcm9taXNlIGJsb2NraW5nIHRoZSBhc3luYyBxdWV1ZSBiZWNhdXNlIHRoaXMgd2lsbCBjYXVzZSB0aGVcclxuICAgICAgICAvLyBhc3luYyBxdWV1ZSB0byBwYW5pYy5cclxuICAgICAgICB2YXIgcGVyc2lzdGVuY2VSZXN1bHQgPSBuZXcgRGVmZXJyZWQoKTtcclxuICAgICAgICB2YXIgaW5pdGlhbGl6ZWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmNyZWRlbnRpYWxzLnNldENoYW5nZUxpc3RlbmVyKGZ1bmN0aW9uICh1c2VyKSB7XHJcbiAgICAgICAgICAgIGlmICghaW5pdGlhbGl6ZWQpIHtcclxuICAgICAgICAgICAgICAgIGluaXRpYWxpemVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIF90aGlzLmluaXRpYWxpemVQZXJzaXN0ZW5jZShwZXJzaXN0ZW5jZVNldHRpbmdzLCBwZXJzaXN0ZW5jZVJlc3VsdCwgdXNlcilcclxuICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAobWF5YmVMcnVHYykgeyByZXR1cm4gX3RoaXMuaW5pdGlhbGl6ZVJlc3QodXNlciwgbWF5YmVMcnVHYyk7IH0pXHJcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oaW5pdGlhbGl6YXRpb25Eb25lLnJlc29sdmUsIGluaXRpYWxpemF0aW9uRG9uZS5yZWplY3QpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuaGFuZGxlQ3JlZGVudGlhbENoYW5nZSh1c2VyKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gQmxvY2sgdGhlIGFzeW5jIHF1ZXVlIHVudGlsIGluaXRpYWxpemF0aW9uIGlzIGRvbmVcclxuICAgICAgICB0aGlzLmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBpbml0aWFsaXphdGlvbkRvbmUucHJvbWlzZTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyBSZXR1cm4gb25seSB0aGUgcmVzdWx0IG9mIGVuYWJsaW5nIHBlcnNpc3RlbmNlLiBOb3RlIHRoYXQgdGhpcyBkb2VzIG5vdFxyXG4gICAgICAgIC8vIG5lZWQgdG8gYXdhaXQgdGhlIGNvbXBsZXRpb24gb2YgaW5pdGlhbGl6YXRpb25Eb25lIGJlY2F1c2UgdGhlIHJlc3VsdCBvZlxyXG4gICAgICAgIC8vIHRoaXMgbWV0aG9kIHNob3VsZCBub3QgcmVmbGVjdCBhbnkgb3RoZXIga2luZCBvZiBmYWlsdXJlIHRvIHN0YXJ0LlxyXG4gICAgICAgIHJldHVybiBwZXJzaXN0ZW5jZVJlc3VsdC5wcm9taXNlO1xyXG4gICAgfTtcclxuICAgIC8qKiBFbmFibGVzIHRoZSBuZXR3b3JrIGNvbm5lY3Rpb24gYW5kIHJlcXVldWVzIGFsbCBwZW5kaW5nIG9wZXJhdGlvbnMuICovXHJcbiAgICBGaXJlc3RvcmVDbGllbnQucHJvdG90eXBlLmVuYWJsZU5ldHdvcmsgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB0aGlzLnZlcmlmeU5vdFRlcm1pbmF0ZWQoKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5hc3luY1F1ZXVlLmVucXVldWUoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXMuc3luY0VuZ2luZS5lbmFibGVOZXR3b3JrKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBJbml0aWFsaXplcyBwZXJzaXN0ZW50IHN0b3JhZ2UsIGF0dGVtcHRpbmcgdG8gdXNlIEluZGV4ZWREQiBpZlxyXG4gICAgICogdXNlUGVyc2lzdGVuY2UgaXMgdHJ1ZSBvciBtZW1vcnktb25seSBpZiBmYWxzZS5cclxuICAgICAqXHJcbiAgICAgKiBJZiBJbmRleGVkREIgZmFpbHMgYmVjYXVzZSBpdCdzIGFscmVhZHkgb3BlbiBpbiBhbm90aGVyIHRhYiBvciBiZWNhdXNlIHRoZVxyXG4gICAgICogcGxhdGZvcm0gY2FuJ3QgcG9zc2libHkgc3VwcG9ydCBvdXIgaW1wbGVtZW50YXRpb24gdGhlbiB0aGlzIG1ldGhvZCByZWplY3RzXHJcbiAgICAgKiB0aGUgcGVyc2lzdGVuY2VSZXN1bHQgYW5kIGZhbGxzIGJhY2sgb24gbWVtb3J5LW9ubHkgcGVyc2lzdGVuY2UuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHBlcnNpc3RlbmNlU2V0dGluZ3MgU2V0dGluZ3Mgb2JqZWN0IHRvIGNvbmZpZ3VyZSBvZmZsaW5lIHBlcnNpc3RlbmNlXHJcbiAgICAgKiBAcGFyYW0gcGVyc2lzdGVuY2VSZXN1bHQgQSBkZWZlcnJlZCByZXN1bHQgaW5kaWNhdGluZyB0aGUgdXNlci12aXNpYmxlXHJcbiAgICAgKiAgICAgcmVzdWx0IG9mIGVuYWJsaW5nIG9mZmxpbmUgcGVyc2lzdGVuY2UuIFRoaXMgbWV0aG9kIHdpbGwgcmVqZWN0IHRoaXMgaWZcclxuICAgICAqICAgICBJbmRleGVkREIgZmFpbHMgdG8gc3RhcnQgZm9yIGFueSByZWFzb24uIElmIHVzZVBlcnNpc3RlbmNlIGlzIGZhbHNlXHJcbiAgICAgKiAgICAgdGhpcyBpcyB1bmNvbmRpdGlvbmFsbHkgcmVzb2x2ZWQuXHJcbiAgICAgKiBAcmV0dXJucyBhIFByb21pc2UgaW5kaWNhdGluZyB3aGV0aGVyIG9yIG5vdCBpbml0aWFsaXphdGlvbiBzaG91bGRcclxuICAgICAqICAgICBjb250aW51ZSwgaS5lLiB0aGF0IG9uZSBvZiB0aGUgcGVyc2lzdGVuY2UgaW1wbGVtZW50YXRpb25zIGFjdHVhbGx5XHJcbiAgICAgKiAgICAgc3VjY2VlZGVkLlxyXG4gICAgICovXHJcbiAgICBGaXJlc3RvcmVDbGllbnQucHJvdG90eXBlLmluaXRpYWxpemVQZXJzaXN0ZW5jZSA9IGZ1bmN0aW9uIChwZXJzaXN0ZW5jZVNldHRpbmdzLCBwZXJzaXN0ZW5jZVJlc3VsdCwgdXNlcikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgaWYgKHBlcnNpc3RlbmNlU2V0dGluZ3MgaW5zdGFuY2VvZiBJbmRleGVkRGJQZXJzaXN0ZW5jZVNldHRpbmdzKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnN0YXJ0SW5kZXhlZERiUGVyc2lzdGVuY2UodXNlciwgcGVyc2lzdGVuY2VTZXR0aW5ncylcclxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChtYXliZUxydUdjKSB7XHJcbiAgICAgICAgICAgICAgICBwZXJzaXN0ZW5jZVJlc3VsdC5yZXNvbHZlKCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbWF5YmVMcnVHYztcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIC8vIFJlZ2FyZGxlc3Mgb2Ygd2hldGhlciBvciBub3QgdGhlIHJldHJ5IHN1Y2NlZWRzLCBmcm9tIGFuIHVzZXJcclxuICAgICAgICAgICAgICAgIC8vIHBlcnNwZWN0aXZlLCBvZmZsaW5lIHBlcnNpc3RlbmNlIGhhcyBmYWlsZWQuXHJcbiAgICAgICAgICAgICAgICBwZXJzaXN0ZW5jZVJlc3VsdC5yZWplY3QoZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgLy8gQW4gdW5rbm93biBmYWlsdXJlIG9uIHRoZSBmaXJzdCBzdGFnZSBzaHV0cyBldmVyeXRoaW5nIGRvd24uXHJcbiAgICAgICAgICAgICAgICBpZiAoIV90aGlzLmNhbkZhbGxiYWNrKGVycm9yKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdFcnJvciBlbmFibGluZyBvZmZsaW5lIHBlcnNpc3RlbmNlLiBGYWxsaW5nIGJhY2sgdG8nICtcclxuICAgICAgICAgICAgICAgICAgICAnIHBlcnNpc3RlbmNlIGRpc2FibGVkOiAnICtcclxuICAgICAgICAgICAgICAgICAgICBlcnJvcik7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuc3RhcnRNZW1vcnlQZXJzaXN0ZW5jZSgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIFdoZW4gdXNlUGVyc2lzdGVuY2UgPT0gZmFsc2UsIGVuYWJsaW5nIG9mZmxpbmUgcGVyc2lzdGVuY2UgaXMgZGVmaW5lZFxyXG4gICAgICAgICAgICAvLyB0byB1bmNvbmRpdGlvbmFsbHkgc3VjY2VlZC4gVGhpcyBhbGxvd3Mgc3RhcnQoKSB0byBoYXZlIHRoZSBzYW1lXHJcbiAgICAgICAgICAgIC8vIHNpZ25hdHVyZSBmb3IgYm90aCBjYXNlcywgZGVzcGl0ZSB0aGUgZmFjdCB0aGF0IHRoZSByZXR1cm5lZCBwcm9taXNlXHJcbiAgICAgICAgICAgIC8vIGlzIG9ubHkgdXNlZCBpbiB0aGUgZW5hYmxlUGVyc2lzdGVuY2UgY2FsbC5cclxuICAgICAgICAgICAgcGVyc2lzdGVuY2VSZXN1bHQucmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zdGFydE1lbW9yeVBlcnNpc3RlbmNlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogRGVjaWRlcyB3aGV0aGVyIHRoZSBwcm92aWRlZCBlcnJvciBhbGxvd3MgdXMgdG8gZ3JhY2VmdWxseSBkaXNhYmxlXHJcbiAgICAgKiBwZXJzaXN0ZW5jZSAoYXMgb3Bwb3NlZCB0byBjcmFzaGluZyB0aGUgY2xpZW50KS5cclxuICAgICAqL1xyXG4gICAgRmlyZXN0b3JlQ2xpZW50LnByb3RvdHlwZS5jYW5GYWxsYmFjayA9IGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEZpcmVzdG9yZUVycm9yKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAoZXJyb3IuY29kZSA9PT0gQ29kZS5GQUlMRURfUFJFQ09ORElUSU9OIHx8XHJcbiAgICAgICAgICAgICAgICBlcnJvci5jb2RlID09PSBDb2RlLlVOSU1QTEVNRU5URUQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh0eXBlb2YgRE9NRXhjZXB0aW9uICE9PSAndW5kZWZpbmVkJyAmJlxyXG4gICAgICAgICAgICBlcnJvciBpbnN0YW5jZW9mIERPTUV4Y2VwdGlvbikge1xyXG4gICAgICAgICAgICAvLyBUaGVyZSBhcmUgYSBmZXcga25vd24gY2lyY3Vtc3RhbmNlcyB3aGVyZSB3ZSBjYW4gb3BlbiBJbmRleGVkRGIgYnV0XHJcbiAgICAgICAgICAgIC8vIHRyeWluZyB0byByZWFkL3dyaXRlIHdpbGwgZmFpbCAoZS5nLiBxdW90YSBleGNlZWRlZCkuIEZvclxyXG4gICAgICAgICAgICAvLyB3ZWxsLXVuZGVyc3Rvb2QgY2FzZXMsIHdlIGF0dGVtcHQgdG8gZGV0ZWN0IHRoZXNlIGFuZCB0aGVuIGdyYWNlZnVsbHlcclxuICAgICAgICAgICAgLy8gZmFsbCBiYWNrIHRvIG1lbW9yeSBwZXJzaXN0ZW5jZS5cclxuICAgICAgICAgICAgLy8gTk9URTogUmF0aGVyIHRoYW4gY29udGludWUgdG8gYWRkIHRvIHRoaXMgbGlzdCwgd2UgY291bGQgZGVjaWRlIHRvXHJcbiAgICAgICAgICAgIC8vIGFsd2F5cyBmYWxsIGJhY2ssIHdpdGggdGhlIHJpc2sgdGhhdCB3ZSBtaWdodCBhY2NpZGVudGFsbHkgaGlkZSBlcnJvcnNcclxuICAgICAgICAgICAgLy8gcmVwcmVzZW50aW5nIGFjdHVhbCBTREsgYnVncy5cclxuICAgICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgLy8gV2hlbiB0aGUgYnJvd3NlciBpcyBvdXQgb2YgcXVvdGEgd2UgY291bGQgZ2V0IGVpdGhlciBxdW90YSBleGNlZWRlZFxyXG4gICAgICAgICAgICAvLyBvciBhbiBhYm9ydGVkIGVycm9yIGRlcGVuZGluZyBvbiB3aGV0aGVyIHRoZSBlcnJvciBoYXBwZW5lZCBkdXJpbmdcclxuICAgICAgICAgICAgLy8gc2NoZW1hIG1pZ3JhdGlvbi5cclxuICAgICAgICAgICAgZXJyb3IuY29kZSA9PT0gRE9NX0VYQ0VQVElPTl9RVU9UQV9FWENFRURFRCB8fFxyXG4gICAgICAgICAgICAgICAgZXJyb3IuY29kZSA9PT0gRE9NX0VYQ0VQVElPTl9BQk9SVEVEIHx8XHJcbiAgICAgICAgICAgICAgICAvLyBGaXJlZm94IFByaXZhdGUgQnJvd3NpbmcgbW9kZSBkaXNhYmxlcyBJbmRleGVkRGIgYW5kIHJldHVybnNcclxuICAgICAgICAgICAgICAgIC8vIElOVkFMSURfU1RBVEUgZm9yIGFueSB1c2FnZS5cclxuICAgICAgICAgICAgICAgIGVycm9yLmNvZGUgPT09IERPTV9FWENFUFRJT05fSU5WQUxJRF9TVEFURSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQ2hlY2tzIHRoYXQgdGhlIGNsaWVudCBoYXMgbm90IGJlZW4gdGVybWluYXRlZC4gRW5zdXJlcyB0aGF0IG90aGVyIG1ldGhvZHMgb25cclxuICAgICAqIHRoaXMgY2xhc3MgY2Fubm90IGJlIGNhbGxlZCBhZnRlciB0aGUgY2xpZW50IGlzIHRlcm1pbmF0ZWQuXHJcbiAgICAgKi9cclxuICAgIEZpcmVzdG9yZUNsaWVudC5wcm90b3R5cGUudmVyaWZ5Tm90VGVybWluYXRlZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAodGhpcy5hc3luY1F1ZXVlLmlzU2h1dHRpbmdEb3duKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLkZBSUxFRF9QUkVDT05ESVRJT04sICdUaGUgY2xpZW50IGhhcyBhbHJlYWR5IGJlZW4gdGVybWluYXRlZC4nKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBTdGFydHMgSW5kZXhlZERCLWJhc2VkIHBlcnNpc3RlbmNlLlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm5zIEEgcHJvbWlzZSBpbmRpY2F0aW5nIHN1Y2Nlc3Mgb3IgZmFpbHVyZS5cclxuICAgICAqL1xyXG4gICAgRmlyZXN0b3JlQ2xpZW50LnByb3RvdHlwZS5zdGFydEluZGV4ZWREYlBlcnNpc3RlbmNlID0gZnVuY3Rpb24gKHVzZXIsIHNldHRpbmdzKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICAvLyBUT0RPKGh0dHA6Ly9iLzMzMzg0NTIzKTogRm9yIG5vdyB3ZSBqdXN0IGRpc2FibGUgZ2FyYmFnZSBjb2xsZWN0aW9uXHJcbiAgICAgICAgLy8gd2hlbiBwZXJzaXN0ZW5jZSBpcyBlbmFibGVkLlxyXG4gICAgICAgIHZhciBwZXJzaXN0ZW5jZUtleSA9IEluZGV4ZWREYlBlcnNpc3RlbmNlLmJ1aWxkU3RvcmFnZVByZWZpeCh0aGlzLmRhdGFiYXNlSW5mbyk7XHJcbiAgICAgICAgLy8gT3B0IHRvIHVzZSBwcm90bzMgSlNPTiBpbiBjYXNlIHRoZSBwbGF0Zm9ybSBkb2Vzbid0IHN1cHBvcnQgVWludDhBcnJheS5cclxuICAgICAgICB2YXIgc2VyaWFsaXplciA9IG5ldyBKc29uUHJvdG9TZXJpYWxpemVyKHRoaXMuZGF0YWJhc2VJbmZvLmRhdGFiYXNlSWQsIHtcclxuICAgICAgICAgICAgdXNlUHJvdG8zSnNvbjogdHJ1ZVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKS50aGVuKGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRzbGliLl9fYXdhaXRlcihfdGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGxydVBhcmFtcywgcGVyc2lzdGVuY2U7XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYi5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZXR0aW5ncy5zeW5jaHJvbml6ZVRhYnMgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICFXZWJTdG9yYWdlU2hhcmVkQ2xpZW50U3RhdGUuaXNBdmFpbGFibGUodGhpcy5wbGF0Zm9ybSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLlVOSU1QTEVNRU5URUQsICdJbmRleGVkREIgcGVyc2lzdGVuY2UgaXMgb25seSBhdmFpbGFibGUgb24gcGxhdGZvcm1zIHRoYXQgc3VwcG9ydCBMb2NhbFN0b3JhZ2UuJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgbHJ1UGFyYW1zID0gc2V0dGluZ3MubHJ1UGFyYW1zKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hhcmVkQ2xpZW50U3RhdGUgPSBzZXR0aW5ncy5zeW5jaHJvbml6ZVRhYnNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gbmV3IFdlYlN0b3JhZ2VTaGFyZWRDbGllbnRTdGF0ZSh0aGlzLmFzeW5jUXVldWUsIHRoaXMucGxhdGZvcm0sIHBlcnNpc3RlbmNlS2V5LCB0aGlzLmNsaWVudElkLCB1c2VyKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBuZXcgTWVtb3J5U2hhcmVkQ2xpZW50U3RhdGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgSW5kZXhlZERiUGVyc2lzdGVuY2UuY3JlYXRlSW5kZXhlZERiUGVyc2lzdGVuY2Uoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsbG93VGFiU3luY2hyb25pemF0aW9uOiBzZXR0aW5ncy5zeW5jaHJvbml6ZVRhYnMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVyc2lzdGVuY2VLZXk6IHBlcnNpc3RlbmNlS2V5LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWVudElkOiB0aGlzLmNsaWVudElkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYXRmb3JtOiB0aGlzLnBsYXRmb3JtLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXVlOiB0aGlzLmFzeW5jUXVldWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VyaWFsaXplcjogc2VyaWFsaXplcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBscnVQYXJhbXM6IGxydVBhcmFtcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXF1ZW5jZU51bWJlclN5bmNlcjogdGhpcy5zaGFyZWRDbGllbnRTdGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGVyc2lzdGVuY2UgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGVyc2lzdGVuY2UgPSBwZXJzaXN0ZW5jZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHBlcnNpc3RlbmNlLnJlZmVyZW5jZURlbGVnYXRlLmdhcmJhZ2VDb2xsZWN0b3JdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTsgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBTdGFydHMgTWVtb3J5LWJhY2tlZCBwZXJzaXN0ZW5jZS4gSW4gcHJhY3RpY2UgdGhpcyBjYW5ub3QgZmFpbC5cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyBBIHByb21pc2UgdGhhdCB3aWxsIHN1Y2Nlc3NmdWxseSByZXNvbHZlLlxyXG4gICAgICovXHJcbiAgICBGaXJlc3RvcmVDbGllbnQucHJvdG90eXBlLnN0YXJ0TWVtb3J5UGVyc2lzdGVuY2UgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5wZXJzaXN0ZW5jZSA9IE1lbW9yeVBlcnNpc3RlbmNlLmNyZWF0ZUVhZ2VyUGVyc2lzdGVuY2UodGhpcy5jbGllbnRJZCk7XHJcbiAgICAgICAgdGhpcy5zaGFyZWRDbGllbnRTdGF0ZSA9IG5ldyBNZW1vcnlTaGFyZWRDbGllbnRTdGF0ZSgpO1xyXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUobnVsbCk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBJbml0aWFsaXplcyB0aGUgcmVzdCBvZiB0aGUgRmlyZXN0b3JlQ2xpZW50LCBhc3N1bWluZyB0aGUgaW5pdGlhbCB1c2VyXHJcbiAgICAgKiBoYXMgYmVlbiBvYnRhaW5lZCBmcm9tIHRoZSBjcmVkZW50aWFsIHByb3ZpZGVyIGFuZCBzb21lIHBlcnNpc3RlbmNlXHJcbiAgICAgKiBpbXBsZW1lbnRhdGlvbiBpcyBhdmFpbGFibGUgaW4gdGhpcy5wZXJzaXN0ZW5jZS5cclxuICAgICAqL1xyXG4gICAgRmlyZXN0b3JlQ2xpZW50LnByb3RvdHlwZS5pbml0aWFsaXplUmVzdCA9IGZ1bmN0aW9uICh1c2VyLCBtYXliZUxydUdjKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBkZWJ1ZyhMT0dfVEFHJGIsICdJbml0aWFsaXppbmcuIHVzZXI9JywgdXNlci51aWQpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnBsYXRmb3JtXHJcbiAgICAgICAgICAgIC5sb2FkQ29ubmVjdGlvbih0aGlzLmRhdGFiYXNlSW5mbylcclxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKGNvbm5lY3Rpb24pIHsgcmV0dXJuIHRzbGliLl9fYXdhaXRlcihfdGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHF1ZXJ5RW5naW5lLCBjb25uZWN0aXZpdHlNb25pdG9yLCBzZXJpYWxpemVyLCBkYXRhc3RvcmUsIHJlbW90ZVN0b3JlT25saW5lU3RhdGVDaGFuZ2VkSGFuZGxlciwgc2hhcmVkQ2xpZW50U3RhdGVPbmxpbmVTdGF0ZUNoYW5nZWRIYW5kbGVyO1xyXG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgICAgICByZXR1cm4gdHNsaWIuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBxdWVyeUVuZ2luZSA9IG5ldyBJbmRleEZyZWVRdWVyeUVuZ2luZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvY2FsU3RvcmUgPSBuZXcgTG9jYWxTdG9yZSh0aGlzLnBlcnNpc3RlbmNlLCBxdWVyeUVuZ2luZSwgdXNlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMubG9jYWxTdG9yZS5zdGFydCgpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1heWJlTHJ1R2MpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdlJ3JlIHJ1bm5pbmcgTFJVIEdhcmJhZ2UgY29sbGVjdGlvbi4gU2V0IHVwIHRoZSBzY2hlZHVsZXIuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxydVNjaGVkdWxlciA9IG5ldyBMcnVTY2hlZHVsZXIobWF5YmVMcnVHYywgdGhpcy5hc3luY1F1ZXVlLCB0aGlzLmxvY2FsU3RvcmUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpdml0eU1vbml0b3IgPSB0aGlzLnBsYXRmb3JtLm5ld0Nvbm5lY3Rpdml0eU1vbml0b3IoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VyaWFsaXplciA9IHRoaXMucGxhdGZvcm0ubmV3U2VyaWFsaXplcih0aGlzLmRhdGFiYXNlSW5mby5kYXRhYmFzZUlkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YXN0b3JlID0gbmV3IERhdGFzdG9yZSh0aGlzLmFzeW5jUXVldWUsIGNvbm5lY3Rpb24sIHRoaXMuY3JlZGVudGlhbHMsIHNlcmlhbGl6ZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZW1vdGVTdG9yZU9ubGluZVN0YXRlQ2hhbmdlZEhhbmRsZXIgPSBmdW5jdGlvbiAob25saW5lU3RhdGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5zeW5jRW5naW5lLmFwcGx5T25saW5lU3RhdGVDaGFuZ2Uob25saW5lU3RhdGUsIE9ubGluZVN0YXRlU291cmNlLlJlbW90ZVN0b3JlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2hhcmVkQ2xpZW50U3RhdGVPbmxpbmVTdGF0ZUNoYW5nZWRIYW5kbGVyID0gZnVuY3Rpb24gKG9ubGluZVN0YXRlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuc3luY0VuZ2luZS5hcHBseU9ubGluZVN0YXRlQ2hhbmdlKG9ubGluZVN0YXRlLCBPbmxpbmVTdGF0ZVNvdXJjZS5TaGFyZWRDbGllbnRTdGF0ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3RlU3RvcmUgPSBuZXcgUmVtb3RlU3RvcmUodGhpcy5sb2NhbFN0b3JlLCBkYXRhc3RvcmUsIHRoaXMuYXN5bmNRdWV1ZSwgcmVtb3RlU3RvcmVPbmxpbmVTdGF0ZUNoYW5nZWRIYW5kbGVyLCBjb25uZWN0aXZpdHlNb25pdG9yKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zeW5jRW5naW5lID0gbmV3IFN5bmNFbmdpbmUodGhpcy5sb2NhbFN0b3JlLCB0aGlzLnJlbW90ZVN0b3JlLCB0aGlzLnNoYXJlZENsaWVudFN0YXRlLCB1c2VyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaGFyZWRDbGllbnRTdGF0ZS5vbmxpbmVTdGF0ZUhhbmRsZXIgPSBzaGFyZWRDbGllbnRTdGF0ZU9ubGluZVN0YXRlQ2hhbmdlZEhhbmRsZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNldCB1cCB3aXJpbmcgYmV0d2VlbiBzeW5jIGVuZ2luZSBhbmQgb3RoZXIgY29tcG9uZW50c1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbW90ZVN0b3JlLnN5bmNFbmdpbmUgPSB0aGlzLnN5bmNFbmdpbmU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hhcmVkQ2xpZW50U3RhdGUuc3luY0VuZ2luZSA9IHRoaXMuc3luY0VuZ2luZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ldmVudE1nciA9IG5ldyBFdmVudE1hbmFnZXIodGhpcy5zeW5jRW5naW5lKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gUE9SVElORyBOT1RFOiBMb2NhbFN0b3JlIGRvZXNuJ3QgbmVlZCBhbiBleHBsaWNpdCBzdGFydCgpIG9uIHRoZSBXZWIuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuc2hhcmVkQ2xpZW50U3RhdGUuc3RhcnQoKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBQT1JUSU5HIE5PVEU6IExvY2FsU3RvcmUgZG9lc24ndCBuZWVkIGFuIGV4cGxpY2l0IHN0YXJ0KCkgb24gdGhlIFdlYi5cclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLnJlbW90ZVN0b3JlLnN0YXJ0KCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBOT1RFOiBUaGlzIHdpbGwgaW1tZWRpYXRlbHkgY2FsbCB0aGUgbGlzdGVuZXIsIHNvIHdlIG1ha2Ugc3VyZSB0b1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgaXQgYWZ0ZXIgbG9jYWxTdG9yZSAvIHJlbW90ZVN0b3JlIGFyZSBzdGFydGVkLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLnBlcnNpc3RlbmNlLnNldFByaW1hcnlTdGF0ZUxpc3RlbmVyKGZ1bmN0aW9uIChpc1ByaW1hcnkpIHsgcmV0dXJuIHRzbGliLl9fYXdhaXRlcihfdGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHNsaWIuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDogcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5zeW5jRW5naW5lLmFwcGx5UHJpbWFyeVN0YXRlKGlzUHJpbWFyeSldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5scnVTY2hlZHVsZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzUHJpbWFyeSAmJiAhdGhpcy5scnVTY2hlZHVsZXIuc3RhcnRlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5scnVTY2hlZHVsZXIuc3RhcnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICghaXNQcmltYXJ5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxydVNjaGVkdWxlci5zdG9wKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsgfSldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTk9URTogVGhpcyB3aWxsIGltbWVkaWF0ZWx5IGNhbGwgdGhlIGxpc3RlbmVyLCBzbyB3ZSBtYWtlIHN1cmUgdG9cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IGl0IGFmdGVyIGxvY2FsU3RvcmUgLyByZW1vdGVTdG9yZSBhcmUgc3RhcnRlZC5cclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBXaGVuIGEgdXNlciBjYWxscyBjbGVhclBlcnNpc3RlbmNlKCkgaW4gb25lIGNsaWVudCwgYWxsIG90aGVyIGNsaWVudHNcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gbmVlZCB0byBiZSB0ZXJtaW5hdGVkIHRvIGFsbG93IHRoZSBkZWxldGUgdG8gc3VjY2VlZC5cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5wZXJzaXN0ZW5jZS5zZXREYXRhYmFzZURlbGV0ZWRMaXN0ZW5lcihmdW5jdGlvbiAoKSB7IHJldHVybiB0c2xpYi5fX2F3YWl0ZXIoX3RoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRzbGliLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6IHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMudGVybWluYXRlKCldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOyB9KV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA1OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBXaGVuIGEgdXNlciBjYWxscyBjbGVhclBlcnNpc3RlbmNlKCkgaW4gb25lIGNsaWVudCwgYWxsIG90aGVyIGNsaWVudHNcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gbmVlZCB0byBiZSB0ZXJtaW5hdGVkIHRvIGFsbG93IHRoZSBkZWxldGUgdG8gc3VjY2VlZC5cclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pOyB9KTtcclxuICAgIH07XHJcbiAgICBGaXJlc3RvcmVDbGllbnQucHJvdG90eXBlLmhhbmRsZUNyZWRlbnRpYWxDaGFuZ2UgPSBmdW5jdGlvbiAodXNlcikge1xyXG4gICAgICAgIHRoaXMuYXN5bmNRdWV1ZS52ZXJpZnlPcGVyYXRpb25JblByb2dyZXNzKCk7XHJcbiAgICAgICAgZGVidWcoTE9HX1RBRyRiLCAnQ3JlZGVudGlhbCBDaGFuZ2VkLiBDdXJyZW50IHVzZXI6ICcgKyB1c2VyLnVpZCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc3luY0VuZ2luZS5oYW5kbGVDcmVkZW50aWFsQ2hhbmdlKHVzZXIpO1xyXG4gICAgfTtcclxuICAgIC8qKiBEaXNhYmxlcyB0aGUgbmV0d29yayBjb25uZWN0aW9uLiBQZW5kaW5nIG9wZXJhdGlvbnMgd2lsbCBub3QgY29tcGxldGUuICovXHJcbiAgICBGaXJlc3RvcmVDbGllbnQucHJvdG90eXBlLmRpc2FibGVOZXR3b3JrID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy52ZXJpZnlOb3RUZXJtaW5hdGVkKCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYXN5bmNRdWV1ZS5lbnF1ZXVlKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIF90aGlzLnN5bmNFbmdpbmUuZGlzYWJsZU5ldHdvcmsoKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBGaXJlc3RvcmVDbGllbnQucHJvdG90eXBlLnRlcm1pbmF0ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmFzeW5jUXVldWUuZW5xdWV1ZUFuZEluaXRpYXRlU2h1dGRvd24oZnVuY3Rpb24gKCkgeyByZXR1cm4gdHNsaWIuX19hd2FpdGVyKF90aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHNsaWIuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBQT1JUSU5HIE5PVEU6IExvY2FsU3RvcmUgZG9lcyBub3QgbmVlZCBhbiBleHBsaWNpdCBzaHV0ZG93biBvbiB3ZWIuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmxydVNjaGVkdWxlcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5scnVTY2hlZHVsZXIuc3RvcCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMucmVtb3RlU3RvcmUuc2h1dGRvd24oKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuc2hhcmVkQ2xpZW50U3RhdGUuc2h1dGRvd24oKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMucGVyc2lzdGVuY2Uuc2h1dGRvd24oKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGByZW1vdmVDaGFuZ2VMaXN0ZW5lcmAgbXVzdCBiZSBjYWxsZWQgYWZ0ZXIgc2h1dHRpbmcgZG93biB0aGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVtb3RlU3RvcmUgYXMgaXQgd2lsbCBwcmV2ZW50IHRoZSBSZW1vdGVTdG9yZSBmcm9tIHJldHJpZXZpbmdcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYXV0aCB0b2tlbnMuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3JlZGVudGlhbHMucmVtb3ZlQ2hhbmdlTGlzdGVuZXIoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTsgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIGEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHdoZW4gYWxsIHdyaXRlcyB0aGF0IHdlcmUgcGVuZGluZyBhdCB0aGUgdGltZSB0aGlzXHJcbiAgICAgKiBtZXRob2Qgd2FzIGNhbGxlZCByZWNlaXZlZCBzZXJ2ZXIgYWNrbm93bGVkZ2VtZW50LiBBbiBhY2tub3dsZWRnZW1lbnQgY2FuIGJlIGVpdGhlciBhY2NlcHRhbmNlXHJcbiAgICAgKiBvciByZWplY3Rpb24uXHJcbiAgICAgKi9cclxuICAgIEZpcmVzdG9yZUNsaWVudC5wcm90b3R5cGUud2FpdEZvclBlbmRpbmdXcml0ZXMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB0aGlzLnZlcmlmeU5vdFRlcm1pbmF0ZWQoKTtcclxuICAgICAgICB2YXIgZGVmZXJyZWQgPSBuZXcgRGVmZXJyZWQoKTtcclxuICAgICAgICB0aGlzLmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5zeW5jRW5naW5lLnJlZ2lzdGVyUGVuZGluZ1dyaXRlc0NhbGxiYWNrKGRlZmVycmVkKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcclxuICAgIH07XHJcbiAgICBGaXJlc3RvcmVDbGllbnQucHJvdG90eXBlLmxpc3RlbiA9IGZ1bmN0aW9uIChxdWVyeSwgb2JzZXJ2ZXIsIG9wdGlvbnMpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMudmVyaWZ5Tm90VGVybWluYXRlZCgpO1xyXG4gICAgICAgIHZhciBsaXN0ZW5lciA9IG5ldyBRdWVyeUxpc3RlbmVyKHF1ZXJ5LCBvYnNlcnZlciwgb3B0aW9ucyk7XHJcbiAgICAgICAgdGhpcy5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXMuZXZlbnRNZ3IubGlzdGVuKGxpc3RlbmVyKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gbGlzdGVuZXI7XHJcbiAgICB9O1xyXG4gICAgRmlyZXN0b3JlQ2xpZW50LnByb3RvdHlwZS51bmxpc3RlbiA9IGZ1bmN0aW9uIChsaXN0ZW5lcikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgLy8gQ2hlY2tzIGZvciB0ZXJtaW5hdGlvbiBidXQgZG9lcyBub3QgcmFpc2UgZXJyb3IsIGFsbG93aW5nIHVubGlzdGVuIGFmdGVyXHJcbiAgICAgICAgLy8gdGVybWluYXRpb24gdG8gYmUgYSBuby1vcC5cclxuICAgICAgICBpZiAodGhpcy5jbGllbnRUZXJtaW5hdGVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXMuZXZlbnRNZ3IudW5saXN0ZW4obGlzdGVuZXIpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIEZpcmVzdG9yZUNsaWVudC5wcm90b3R5cGUuZ2V0RG9jdW1lbnRGcm9tTG9jYWxDYWNoZSA9IGZ1bmN0aW9uIChkb2NLZXkpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMudmVyaWZ5Tm90VGVybWluYXRlZCgpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmFzeW5jUXVldWVcclxuICAgICAgICAgICAgLmVucXVldWUoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXMubG9jYWxTdG9yZS5yZWFkRG9jdW1lbnQoZG9jS2V5KTtcclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAobWF5YmVEb2MpIHtcclxuICAgICAgICAgICAgaWYgKG1heWJlRG9jIGluc3RhbmNlb2YgRG9jdW1lbnQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBtYXliZURvYztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChtYXliZURvYyBpbnN0YW5jZW9mIE5vRG9jdW1lbnQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuVU5BVkFJTEFCTEUsICdGYWlsZWQgdG8gZ2V0IGRvY3VtZW50IGZyb20gY2FjaGUuIChIb3dldmVyLCB0aGlzIGRvY3VtZW50IG1heSAnICtcclxuICAgICAgICAgICAgICAgICAgICBcImV4aXN0IG9uIHRoZSBzZXJ2ZXIuIFJ1biBhZ2FpbiB3aXRob3V0IHNldHRpbmcgJ3NvdXJjZScgaW4gXCIgK1xyXG4gICAgICAgICAgICAgICAgICAgICd0aGUgR2V0T3B0aW9ucyB0byBhdHRlbXB0IHRvIHJldHJpZXZlIHRoZSBkb2N1bWVudCBmcm9tIHRoZSAnICtcclxuICAgICAgICAgICAgICAgICAgICAnc2VydmVyLiknKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIEZpcmVzdG9yZUNsaWVudC5wcm90b3R5cGUuZ2V0RG9jdW1lbnRzRnJvbUxvY2FsQ2FjaGUgPSBmdW5jdGlvbiAocXVlcnkpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMudmVyaWZ5Tm90VGVybWluYXRlZCgpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmFzeW5jUXVldWUuZW5xdWV1ZShmdW5jdGlvbiAoKSB7IHJldHVybiB0c2xpYi5fX2F3YWl0ZXIoX3RoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBxdWVyeVJlc3VsdCwgdmlldywgdmlld0RvY0NoYW5nZXM7XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYi5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6IHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMubG9jYWxTdG9yZS5leGVjdXRlUXVlcnkocXVlcnksIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiB1c2VQcmV2aW91c1Jlc3VsdHM9ICovIHRydWUpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5UmVzdWx0ID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2aWV3ID0gbmV3IFZpZXcocXVlcnksIHF1ZXJ5UmVzdWx0LnJlbW90ZUtleXMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2aWV3RG9jQ2hhbmdlcyA9IHZpZXcuY29tcHV0ZURvY0NoYW5nZXMocXVlcnlSZXN1bHQuZG9jdW1lbnRzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHZpZXcuYXBwbHlDaGFuZ2VzKHZpZXdEb2NDaGFuZ2VzLCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIHVwZGF0ZUxpbWJvRG9jdW1lbnRzPSAqLyBmYWxzZSkuc25hcHNob3RdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTsgfSk7XHJcbiAgICB9O1xyXG4gICAgRmlyZXN0b3JlQ2xpZW50LnByb3RvdHlwZS53cml0ZSA9IGZ1bmN0aW9uIChtdXRhdGlvbnMpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMudmVyaWZ5Tm90VGVybWluYXRlZCgpO1xyXG4gICAgICAgIHZhciBkZWZlcnJlZCA9IG5ldyBEZWZlcnJlZCgpO1xyXG4gICAgICAgIHRoaXMuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIF90aGlzLnN5bmNFbmdpbmUud3JpdGUobXV0YXRpb25zLCBkZWZlcnJlZCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XHJcbiAgICB9O1xyXG4gICAgRmlyZXN0b3JlQ2xpZW50LnByb3RvdHlwZS5kYXRhYmFzZUlkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRhdGFiYXNlSW5mby5kYXRhYmFzZUlkO1xyXG4gICAgfTtcclxuICAgIEZpcmVzdG9yZUNsaWVudC5wcm90b3R5cGUuYWRkU25hcHNob3RzSW5TeW5jTGlzdGVuZXIgPSBmdW5jdGlvbiAob2JzZXJ2ZXIpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMudmVyaWZ5Tm90VGVybWluYXRlZCgpO1xyXG4gICAgICAgIHRoaXMuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgX3RoaXMuZXZlbnRNZ3IuYWRkU25hcHNob3RzSW5TeW5jTGlzdGVuZXIob2JzZXJ2ZXIpO1xyXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgRmlyZXN0b3JlQ2xpZW50LnByb3RvdHlwZS5yZW1vdmVTbmFwc2hvdHNJblN5bmNMaXN0ZW5lciA9IGZ1bmN0aW9uIChvYnNlcnZlcikge1xyXG4gICAgICAgIC8vIENoZWNrcyBmb3Igc2h1dGRvd24gYnV0IGRvZXMgbm90IHJhaXNlIGVycm9yLCBhbGxvd2luZyByZW1vdmUgYWZ0ZXJcclxuICAgICAgICAvLyBzaHV0ZG93biB0byBiZSBhIG5vLW9wLlxyXG4gICAgICAgIGlmICh0aGlzLmNsaWVudFRlcm1pbmF0ZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmV2ZW50TWdyLnJlbW92ZVNuYXBzaG90c0luU3luY0xpc3RlbmVyKG9ic2VydmVyKTtcclxuICAgIH07XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoRmlyZXN0b3JlQ2xpZW50LnByb3RvdHlwZSwgXCJjbGllbnRUZXJtaW5hdGVkXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgLy8gVGVjaG5pY2FsbHksIHRoZSBhc3luY1F1ZXVlIGlzIHN0aWxsIHJ1bm5pbmcsIGJ1dCBvbmx5IGFjY2VwdGluZyBvcGVyYXRpb25zXHJcbiAgICAgICAgICAgIC8vIHJlbGF0ZWQgdG8gdGVybWluYXRpb24gb3Igc3VwcG9zZWQgdG8gYmUgcnVuIGFmdGVyIHRlcm1pbmF0aW9uLiBJdCBpcyBlZmZlY3RpdmVseVxyXG4gICAgICAgICAgICAvLyB0ZXJtaW5hdGVkIHRvIHRoZSBleWVzIG9mIHVzZXJzLlxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5hc3luY1F1ZXVlLmlzU2h1dHRpbmdEb3duO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgRmlyZXN0b3JlQ2xpZW50LnByb3RvdHlwZS50cmFuc2FjdGlvbiA9IGZ1bmN0aW9uICh1cGRhdGVGdW5jdGlvbikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy52ZXJpZnlOb3RUZXJtaW5hdGVkKCk7XHJcbiAgICAgICAgdmFyIGRlZmVycmVkID0gbmV3IERlZmVycmVkKCk7XHJcbiAgICAgICAgdGhpcy5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBfdGhpcy5zeW5jRW5naW5lLnJ1blRyYW5zYWN0aW9uKF90aGlzLmFzeW5jUXVldWUsIHVwZGF0ZUZ1bmN0aW9uLCBkZWZlcnJlZCk7XHJcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gRmlyZXN0b3JlQ2xpZW50O1xyXG59KCkpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLypcclxuICogQSB3cmFwcGVyIGltcGxlbWVudGF0aW9uIG9mIE9ic2VydmVyPFQ+IHRoYXQgd2lsbCBkaXNwYXRjaCBldmVudHNcclxuICogYXN5bmNocm9ub3VzbHkuIFRvIGFsbG93IGltbWVkaWF0ZSBzaWxlbmNpbmcsIGEgbXV0ZSBjYWxsIGlzIGFkZGVkIHdoaWNoXHJcbiAqIGNhdXNlcyBldmVudHMgc2NoZWR1bGVkIHRvIG5vIGxvbmdlciBiZSByYWlzZWQuXHJcbiAqL1xyXG52YXIgQXN5bmNPYnNlcnZlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEFzeW5jT2JzZXJ2ZXIob2JzZXJ2ZXIpIHtcclxuICAgICAgICB0aGlzLm9ic2VydmVyID0gb2JzZXJ2ZXI7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogV2hlbiBzZXQgdG8gdHJ1ZSwgd2lsbCBub3QgcmFpc2UgZnV0dXJlIGV2ZW50cy4gTmVjZXNzYXJ5IHRvIGRlYWwgd2l0aFxyXG4gICAgICAgICAqIGFzeW5jIGRldGFjaG1lbnQgb2YgbGlzdGVuZXIuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5tdXRlZCA9IGZhbHNlO1xyXG4gICAgfVxyXG4gICAgQXN5bmNPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMuc2NoZWR1bGVFdmVudCh0aGlzLm9ic2VydmVyLm5leHQsIHZhbHVlKTtcclxuICAgIH07XHJcbiAgICBBc3luY09ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgIHRoaXMuc2NoZWR1bGVFdmVudCh0aGlzLm9ic2VydmVyLmVycm9yLCBlcnJvcik7XHJcbiAgICB9O1xyXG4gICAgQXN5bmNPYnNlcnZlci5wcm90b3R5cGUubXV0ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLm11dGVkID0gdHJ1ZTtcclxuICAgIH07XHJcbiAgICBBc3luY09ic2VydmVyLnByb3RvdHlwZS5zY2hlZHVsZUV2ZW50ID0gZnVuY3Rpb24gKGV2ZW50SGFuZGxlciwgZXZlbnQpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIGlmICghdGhpcy5tdXRlZCkge1xyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGlmICghX3RoaXMubXV0ZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBldmVudEhhbmRsZXIoZXZlbnQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LCAwKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEFzeW5jT2JzZXJ2ZXI7XHJcbn0oKSk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vLyBUaGUgb2JqZWN0cyB0aGF0IGFyZSBhIHBhcnQgb2YgdGhpcyBBUEkgYXJlIGV4cG9zZWQgdG8gdGhpcmQtcGFydGllcyBhc1xyXG4vLyBjb21waWxlZCBqYXZhc2NyaXB0IHNvIHdlIHdhbnQgdG8gZmxhZyBvdXIgcHJpdmF0ZSBtZW1iZXJzIHdpdGggYSBsZWFkaW5nXHJcbi8vIHVuZGVyc2NvcmUgdG8gZGlzY291cmFnZSB0aGVpciB1c2UuXHJcbi8qKlxyXG4gKiBBIEZpZWxkUGF0aCByZWZlcnMgdG8gYSBmaWVsZCBpbiBhIGRvY3VtZW50LiBUaGUgcGF0aCBtYXkgY29uc2lzdCBvZiBhIHNpbmdsZVxyXG4gKiBmaWVsZCBuYW1lIChyZWZlcnJpbmcgdG8gYSB0b3AtbGV2ZWwgZmllbGQgaW4gdGhlIGRvY3VtZW50KSwgb3IgYSBsaXN0IG9mXHJcbiAqIGZpZWxkIG5hbWVzIChyZWZlcnJpbmcgdG8gYSBuZXN0ZWQgZmllbGQgaW4gdGhlIGRvY3VtZW50KS5cclxuICovXHJcbnZhciBGaWVsZFBhdGgkMSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhIEZpZWxkUGF0aCBmcm9tIHRoZSBwcm92aWRlZCBmaWVsZCBuYW1lcy4gSWYgbW9yZSB0aGFuIG9uZSBmaWVsZFxyXG4gICAgICogbmFtZSBpcyBwcm92aWRlZCwgdGhlIHBhdGggd2lsbCBwb2ludCB0byBhIG5lc3RlZCBmaWVsZCBpbiBhIGRvY3VtZW50LlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBmaWVsZE5hbWVzIEEgbGlzdCBvZiBmaWVsZCBuYW1lcy5cclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gRmllbGRQYXRoJDEoKSB7XHJcbiAgICAgICAgdmFyIGZpZWxkTmFtZXMgPSBbXTtcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICBmaWVsZE5hbWVzW19pXSA9IGFyZ3VtZW50c1tfaV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhbGlkYXRlTmFtZWRBcnJheUF0TGVhc3ROdW1iZXJPZkVsZW1lbnRzKCdGaWVsZFBhdGgnLCBmaWVsZE5hbWVzLCAnZmllbGROYW1lcycsIDEpO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZmllbGROYW1lcy5sZW5ndGg7ICsraSkge1xyXG4gICAgICAgICAgICB2YWxpZGF0ZUFyZ1R5cGUoJ0ZpZWxkUGF0aCcsICdzdHJpbmcnLCBpLCBmaWVsZE5hbWVzW2ldKTtcclxuICAgICAgICAgICAgaWYgKGZpZWxkTmFtZXNbaV0ubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5JTlZBTElEX0FSR1VNRU5ULCBcIkludmFsaWQgZmllbGQgbmFtZSBhdCBhcmd1bWVudCAkKGkgKyAxKS4gXCIgK1xyXG4gICAgICAgICAgICAgICAgICAgICdGaWVsZCBuYW1lcyBtdXN0IG5vdCBiZSBlbXB0eS4nKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9pbnRlcm5hbFBhdGggPSBuZXcgRmllbGRQYXRoKGZpZWxkTmFtZXMpO1xyXG4gICAgfVxyXG4gICAgRmllbGRQYXRoJDEuZG9jdW1lbnRJZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gRmllbGRQYXRoJDEuX0RPQ1VNRU5UX0lEO1xyXG4gICAgfTtcclxuICAgIEZpZWxkUGF0aCQxLnByb3RvdHlwZS5pc0VxdWFsID0gZnVuY3Rpb24gKG90aGVyKSB7XHJcbiAgICAgICAgaWYgKCEob3RoZXIgaW5zdGFuY2VvZiBGaWVsZFBhdGgkMSkpIHtcclxuICAgICAgICAgICAgdGhyb3cgaW52YWxpZENsYXNzRXJyb3IoJ2lzRXF1YWwnLCAnRmllbGRQYXRoJywgMSwgb3RoZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5faW50ZXJuYWxQYXRoLmlzRXF1YWwob3RoZXIuX2ludGVybmFsUGF0aCk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBJbnRlcm5hbCBOb3RlOiBUaGUgYmFja2VuZCBkb2Vzbid0IHRlY2huaWNhbGx5IHN1cHBvcnQgcXVlcnlpbmcgYnlcclxuICAgICAqIGRvY3VtZW50IElELiBJbnN0ZWFkIGl0IHF1ZXJpZXMgYnkgdGhlIGVudGlyZSBkb2N1bWVudCBuYW1lIChmdWxsIHBhdGhcclxuICAgICAqIGluY2x1ZGVkKSwgYnV0IGluIHRoZSBjYXNlcyB3ZSBjdXJyZW50bHkgc3VwcG9ydCBkb2N1bWVudElkKCksIHRoZSBuZXRcclxuICAgICAqIGVmZmVjdCBpcyB0aGUgc2FtZS5cclxuICAgICAqL1xyXG4gICAgRmllbGRQYXRoJDEuX0RPQ1VNRU5UX0lEID0gbmV3IEZpZWxkUGF0aCQxKEZpZWxkUGF0aC5rZXlGaWVsZCgpLmNhbm9uaWNhbFN0cmluZygpKTtcclxuICAgIHJldHVybiBGaWVsZFBhdGgkMTtcclxufSgpKTtcclxuLyoqXHJcbiAqIE1hdGNoZXMgYW55IGNoYXJhY3RlcnMgaW4gYSBmaWVsZCBwYXRoIHN0cmluZyB0aGF0IGFyZSByZXNlcnZlZC5cclxuICovXHJcbnZhciBSRVNFUlZFRCA9IG5ldyBSZWdFeHAoJ1t+XFxcXCovXFxcXFtcXFxcXV0nKTtcclxuLyoqXHJcbiAqIFBhcnNlcyBhIGZpZWxkIHBhdGggc3RyaW5nIGludG8gYSBGaWVsZFBhdGgsIHRyZWF0aW5nIGRvdHMgYXMgc2VwYXJhdG9ycy5cclxuICovXHJcbmZ1bmN0aW9uIGZyb21Eb3RTZXBhcmF0ZWRTdHJpbmcocGF0aCkge1xyXG4gICAgdmFyIGZvdW5kID0gcGF0aC5zZWFyY2goUkVTRVJWRUQpO1xyXG4gICAgaWYgKGZvdW5kID49IDApIHtcclxuICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5JTlZBTElEX0FSR1VNRU5ULCBcIkludmFsaWQgZmllbGQgcGF0aCAoXCIgKyBwYXRoICsgXCIpLiBQYXRocyBtdXN0IG5vdCBjb250YWluIFwiICtcclxuICAgICAgICAgICAgXCInficsICcqJywgJy8nLCAnWycsIG9yICddJ1wiKTtcclxuICAgIH1cclxuICAgIHRyeSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyAoRmllbGRQYXRoJDEuYmluZC5hcHBseShGaWVsZFBhdGgkMSwgdHNsaWIuX19zcHJlYWRBcnJheXMoW3ZvaWQgMF0sIHBhdGguc3BsaXQoJy4nKSkpKSgpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5JTlZBTElEX0FSR1VNRU5ULCBcIkludmFsaWQgZmllbGQgcGF0aCAoXCIgKyBwYXRoICsgXCIpLiBQYXRocyBtdXN0IG5vdCBiZSBlbXB0eSwgXCIgK1xyXG4gICAgICAgICAgICBcImJlZ2luIHdpdGggJy4nLCBlbmQgd2l0aCAnLicsIG9yIGNvbnRhaW4gJy4uJ1wiKTtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxudmFyIE9BdXRoVG9rZW4gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBPQXV0aFRva2VuKHZhbHVlLCB1c2VyKSB7XHJcbiAgICAgICAgdGhpcy51c2VyID0gdXNlcjtcclxuICAgICAgICB0aGlzLnR5cGUgPSAnT0F1dGgnO1xyXG4gICAgICAgIHRoaXMuYXV0aEhlYWRlcnMgPSB7fTtcclxuICAgICAgICAvLyBTZXQgdGhlIGhlYWRlcnMgdXNpbmcgT2JqZWN0IExpdGVyYWwgbm90YXRpb24gdG8gYXZvaWQgbWluaWZpY2F0aW9uXHJcbiAgICAgICAgdGhpcy5hdXRoSGVhZGVyc1snQXV0aG9yaXphdGlvbiddID0gXCJCZWFyZXIgXCIgKyB2YWx1ZTtcclxuICAgIH1cclxuICAgIHJldHVybiBPQXV0aFRva2VuO1xyXG59KCkpO1xyXG4vKiogQSBDcmVkZW50aWFsc1Byb3ZpZGVyIHRoYXQgYWx3YXlzIHlpZWxkcyBhbiBlbXB0eSB0b2tlbi4gKi9cclxudmFyIEVtcHR5Q3JlZGVudGlhbHNQcm92aWRlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEVtcHR5Q3JlZGVudGlhbHNQcm92aWRlcigpIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBTdG9yZXMgdGhlIGxpc3RlbmVyIHJlZ2lzdGVyZWQgd2l0aCBzZXRDaGFuZ2VMaXN0ZW5lcigpXHJcbiAgICAgICAgICogVGhpcyBpc24ndCBhY3R1YWxseSBuZWNlc3Nhcnkgc2luY2UgdGhlIFVJRCBuZXZlciBjaGFuZ2VzLCBidXQgd2UgdXNlIHRoaXNcclxuICAgICAgICAgKiB0byB2ZXJpZnkgdGhlIGxpc3RlbiBjb250cmFjdCBpcyBhZGhlcmVkIHRvIGluIHRlc3RzLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuY2hhbmdlTGlzdGVuZXIgPSBudWxsO1xyXG4gICAgfVxyXG4gICAgRW1wdHlDcmVkZW50aWFsc1Byb3ZpZGVyLnByb3RvdHlwZS5nZXRUb2tlbiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKG51bGwpO1xyXG4gICAgfTtcclxuICAgIEVtcHR5Q3JlZGVudGlhbHNQcm92aWRlci5wcm90b3R5cGUuaW52YWxpZGF0ZVRva2VuID0gZnVuY3Rpb24gKCkgeyB9O1xyXG4gICAgRW1wdHlDcmVkZW50aWFsc1Byb3ZpZGVyLnByb3RvdHlwZS5zZXRDaGFuZ2VMaXN0ZW5lciA9IGZ1bmN0aW9uIChjaGFuZ2VMaXN0ZW5lcikge1xyXG4gICAgICAgIGFzc2VydCghdGhpcy5jaGFuZ2VMaXN0ZW5lciwgJ0NhbiBvbmx5IGNhbGwgc2V0Q2hhbmdlTGlzdGVuZXIoKSBvbmNlLicpO1xyXG4gICAgICAgIHRoaXMuY2hhbmdlTGlzdGVuZXIgPSBjaGFuZ2VMaXN0ZW5lcjtcclxuICAgICAgICAvLyBGaXJlIHdpdGggaW5pdGlhbCB1c2VyLlxyXG4gICAgICAgIGNoYW5nZUxpc3RlbmVyKFVzZXIuVU5BVVRIRU5USUNBVEVEKTtcclxuICAgIH07XHJcbiAgICBFbXB0eUNyZWRlbnRpYWxzUHJvdmlkZXIucHJvdG90eXBlLnJlbW92ZUNoYW5nZUxpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGFzc2VydCh0aGlzLmNoYW5nZUxpc3RlbmVyICE9PSBudWxsLCAncmVtb3ZlQ2hhbmdlTGlzdGVuZXIoKSB3aGVuIG5vIGxpc3RlbmVyIHJlZ2lzdGVyZWQnKTtcclxuICAgICAgICB0aGlzLmNoYW5nZUxpc3RlbmVyID0gbnVsbDtcclxuICAgIH07XHJcbiAgICByZXR1cm4gRW1wdHlDcmVkZW50aWFsc1Byb3ZpZGVyO1xyXG59KCkpO1xyXG52YXIgRmlyZWJhc2VDcmVkZW50aWFsc1Byb3ZpZGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gRmlyZWJhc2VDcmVkZW50aWFsc1Byb3ZpZGVyKGF1dGhQcm92aWRlcikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVGhlIGF1dGggdG9rZW4gbGlzdGVuZXIgcmVnaXN0ZXJlZCB3aXRoIEZpcmViYXNlQXBwLCByZXRhaW5lZCBoZXJlIHNvIHdlXHJcbiAgICAgICAgICogY2FuIHVucmVnaXN0ZXIgaXQuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy50b2tlbkxpc3RlbmVyID0gbnVsbDtcclxuICAgICAgICAvKiogVHJhY2tzIHRoZSBjdXJyZW50IFVzZXIuICovXHJcbiAgICAgICAgdGhpcy5jdXJyZW50VXNlciA9IFVzZXIuVU5BVVRIRU5USUNBVEVEO1xyXG4gICAgICAgIHRoaXMucmVjZWl2ZWRJbml0aWFsVXNlciA9IGZhbHNlO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENvdW50ZXIgdXNlZCB0byBkZXRlY3QgaWYgdGhlIHRva2VuIGNoYW5nZWQgd2hpbGUgYSBnZXRUb2tlbiByZXF1ZXN0IHdhc1xyXG4gICAgICAgICAqIG91dHN0YW5kaW5nLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMudG9rZW5Db3VudGVyID0gMDtcclxuICAgICAgICAvKiogVGhlIGxpc3RlbmVyIHJlZ2lzdGVyZWQgd2l0aCBzZXRDaGFuZ2VMaXN0ZW5lcigpLiAqL1xyXG4gICAgICAgIHRoaXMuY2hhbmdlTGlzdGVuZXIgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuZm9yY2VSZWZyZXNoID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy50b2tlbkxpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBfdGhpcy50b2tlbkNvdW50ZXIrKztcclxuICAgICAgICAgICAgX3RoaXMuY3VycmVudFVzZXIgPSBfdGhpcy5nZXRVc2VyKCk7XHJcbiAgICAgICAgICAgIF90aGlzLnJlY2VpdmVkSW5pdGlhbFVzZXIgPSB0cnVlO1xyXG4gICAgICAgICAgICBpZiAoX3RoaXMuY2hhbmdlTGlzdGVuZXIpIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLmNoYW5nZUxpc3RlbmVyKF90aGlzLmN1cnJlbnRVc2VyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy50b2tlbkNvdW50ZXIgPSAwO1xyXG4gICAgICAgIHRoaXMuYXV0aCA9IGF1dGhQcm92aWRlci5nZXRJbW1lZGlhdGUoeyBvcHRpb25hbDogdHJ1ZSB9KTtcclxuICAgICAgICBpZiAodGhpcy5hdXRoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYXV0aC5hZGRBdXRoVG9rZW5MaXN0ZW5lcih0aGlzLnRva2VuTGlzdGVuZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gaWYgYXV0aCBpcyBub3QgYXZhaWxhYmxlLCBpbnZva2UgdG9rZW5MaXN0ZW5lciBvbmNlIHdpdGggbnVsbCB0b2tlblxyXG4gICAgICAgICAgICB0aGlzLnRva2VuTGlzdGVuZXIobnVsbCk7XHJcbiAgICAgICAgICAgIGF1dGhQcm92aWRlci5nZXQoKS50aGVuKGZ1bmN0aW9uIChhdXRoKSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5hdXRoID0gYXV0aDtcclxuICAgICAgICAgICAgICAgIGlmIChfdGhpcy50b2tlbkxpc3RlbmVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gdG9rZW5MaXN0ZW5lciBjYW4gYmUgcmVtb3ZlZCBieSByZW1vdmVDaGFuZ2VMaXN0ZW5lcigpXHJcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuYXV0aC5hZGRBdXRoVG9rZW5MaXN0ZW5lcihfdGhpcy50b2tlbkxpc3RlbmVyKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgLyogdGhpcy5hdXRoUHJvdmlkZXIuZ2V0KCkgbmV2ZXIgcmVqZWN0cyAqL1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBGaXJlYmFzZUNyZWRlbnRpYWxzUHJvdmlkZXIucHJvdG90eXBlLmdldFRva2VuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgYXNzZXJ0KHRoaXMudG9rZW5MaXN0ZW5lciAhPSBudWxsLCAnZ2V0VG9rZW4gY2Fubm90IGJlIGNhbGxlZCBhZnRlciBsaXN0ZW5lciByZW1vdmVkLicpO1xyXG4gICAgICAgIC8vIFRha2Ugbm90ZSBvZiB0aGUgY3VycmVudCB2YWx1ZSBvZiB0aGUgdG9rZW5Db3VudGVyIHNvIHRoYXQgdGhpcyBtZXRob2RcclxuICAgICAgICAvLyBjYW4gZmFpbCAod2l0aCBhbiBBQk9SVEVEIGVycm9yKSBpZiB0aGVyZSBpcyBhIHRva2VuIGNoYW5nZSB3aGlsZSB0aGVcclxuICAgICAgICAvLyByZXF1ZXN0IGlzIG91dHN0YW5kaW5nLlxyXG4gICAgICAgIHZhciBpbml0aWFsVG9rZW5Db3VudGVyID0gdGhpcy50b2tlbkNvdW50ZXI7XHJcbiAgICAgICAgdmFyIGZvcmNlUmVmcmVzaCA9IHRoaXMuZm9yY2VSZWZyZXNoO1xyXG4gICAgICAgIHRoaXMuZm9yY2VSZWZyZXNoID0gZmFsc2U7XHJcbiAgICAgICAgaWYgKCF0aGlzLmF1dGgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShudWxsKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYXV0aC5nZXRUb2tlbihmb3JjZVJlZnJlc2gpLnRoZW4oZnVuY3Rpb24gKHRva2VuRGF0YSkge1xyXG4gICAgICAgICAgICAvLyBDYW5jZWwgdGhlIHJlcXVlc3Qgc2luY2UgdGhlIHRva2VuIGNoYW5nZWQgd2hpbGUgdGhlIHJlcXVlc3Qgd2FzXHJcbiAgICAgICAgICAgIC8vIG91dHN0YW5kaW5nIHNvIHRoZSByZXNwb25zZSBpcyBwb3RlbnRpYWxseSBmb3IgYSBwcmV2aW91cyB1c2VyICh3aGljaFxyXG4gICAgICAgICAgICAvLyB1c2VyLCB3ZSBjYW4ndCBiZSBzdXJlKS5cclxuICAgICAgICAgICAgaWYgKF90aGlzLnRva2VuQ291bnRlciAhPT0gaW5pdGlhbFRva2VuQ291bnRlcikge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuQUJPUlRFRCwgJ2dldFRva2VuIGFib3J0ZWQgZHVlIHRvIHRva2VuIGNoYW5nZS4nKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmICh0b2tlbkRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICBhc3NlcnQodHlwZW9mIHRva2VuRGF0YS5hY2Nlc3NUb2tlbiA9PT0gJ3N0cmluZycsICdJbnZhbGlkIHRva2VuRGF0YSByZXR1cm5lZCBmcm9tIGdldFRva2VuKCk6JyArIHRva2VuRGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBPQXV0aFRva2VuKHRva2VuRGF0YS5hY2Nlc3NUb2tlbiwgX3RoaXMuY3VycmVudFVzZXIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBGaXJlYmFzZUNyZWRlbnRpYWxzUHJvdmlkZXIucHJvdG90eXBlLmludmFsaWRhdGVUb2tlbiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmZvcmNlUmVmcmVzaCA9IHRydWU7XHJcbiAgICB9O1xyXG4gICAgRmlyZWJhc2VDcmVkZW50aWFsc1Byb3ZpZGVyLnByb3RvdHlwZS5zZXRDaGFuZ2VMaXN0ZW5lciA9IGZ1bmN0aW9uIChjaGFuZ2VMaXN0ZW5lcikge1xyXG4gICAgICAgIGFzc2VydCghdGhpcy5jaGFuZ2VMaXN0ZW5lciwgJ0NhbiBvbmx5IGNhbGwgc2V0Q2hhbmdlTGlzdGVuZXIoKSBvbmNlLicpO1xyXG4gICAgICAgIHRoaXMuY2hhbmdlTGlzdGVuZXIgPSBjaGFuZ2VMaXN0ZW5lcjtcclxuICAgICAgICAvLyBGaXJlIHRoZSBpbml0aWFsIGV2ZW50XHJcbiAgICAgICAgaWYgKHRoaXMucmVjZWl2ZWRJbml0aWFsVXNlcikge1xyXG4gICAgICAgICAgICBjaGFuZ2VMaXN0ZW5lcih0aGlzLmN1cnJlbnRVc2VyKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgRmlyZWJhc2VDcmVkZW50aWFsc1Byb3ZpZGVyLnByb3RvdHlwZS5yZW1vdmVDaGFuZ2VMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBhc3NlcnQodGhpcy50b2tlbkxpc3RlbmVyICE9IG51bGwsICdyZW1vdmVDaGFuZ2VMaXN0ZW5lcigpIGNhbGxlZCB0d2ljZScpO1xyXG4gICAgICAgIGFzc2VydCh0aGlzLmNoYW5nZUxpc3RlbmVyICE9PSBudWxsLCAncmVtb3ZlQ2hhbmdlTGlzdGVuZXIoKSBjYWxsZWQgd2hlbiBubyBsaXN0ZW5lciByZWdpc3RlcmVkJyk7XHJcbiAgICAgICAgaWYgKHRoaXMuYXV0aCkge1xyXG4gICAgICAgICAgICB0aGlzLmF1dGgucmVtb3ZlQXV0aFRva2VuTGlzdGVuZXIodGhpcy50b2tlbkxpc3RlbmVyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy50b2tlbkxpc3RlbmVyID0gbnVsbDtcclxuICAgICAgICB0aGlzLmNoYW5nZUxpc3RlbmVyID0gbnVsbDtcclxuICAgIH07XHJcbiAgICAvLyBBdXRoLmdldFVpZCgpIGNhbiByZXR1cm4gbnVsbCBldmVuIHdpdGggYSB1c2VyIGxvZ2dlZCBpbi4gSXQgaXMgYmVjYXVzZVxyXG4gICAgLy8gZ2V0VWlkKCkgaXMgc3luY2hyb25vdXMsIGJ1dCB0aGUgYXV0aCBjb2RlIHBvcHVsYXRpbmcgVWlkIGlzIGFzeW5jaHJvbm91cy5cclxuICAgIC8vIFRoaXMgbWV0aG9kIHNob3VsZCBvbmx5IGJlIGNhbGxlZCBpbiB0aGUgQXV0aFRva2VuTGlzdGVuZXIgY2FsbGJhY2tcclxuICAgIC8vIHRvIGd1YXJhbnRlZSB0byBnZXQgdGhlIGFjdHVhbCB1c2VyLlxyXG4gICAgRmlyZWJhc2VDcmVkZW50aWFsc1Byb3ZpZGVyLnByb3RvdHlwZS5nZXRVc2VyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBjdXJyZW50VWlkID0gdGhpcy5hdXRoICYmIHRoaXMuYXV0aC5nZXRVaWQoKTtcclxuICAgICAgICBhc3NlcnQoY3VycmVudFVpZCA9PT0gbnVsbCB8fCB0eXBlb2YgY3VycmVudFVpZCA9PT0gJ3N0cmluZycsICdSZWNlaXZlZCBpbnZhbGlkIFVJRDogJyArIGN1cnJlbnRVaWQpO1xyXG4gICAgICAgIHJldHVybiBuZXcgVXNlcihjdXJyZW50VWlkKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gRmlyZWJhc2VDcmVkZW50aWFsc1Byb3ZpZGVyO1xyXG59KCkpO1xyXG4vKlxyXG4gKiBGaXJzdFBhcnR5VG9rZW4gcHJvdmlkZXMgYSBmcmVzaCB0b2tlbiBlYWNoIHRpbWUgaXRzIHZhbHVlXHJcbiAqIGlzIHJlcXVlc3RlZCwgYmVjYXVzZSBpZiB0aGUgdG9rZW4gaXMgdG9vIG9sZCwgcmVxdWVzdHMgd2lsbCBiZSByZWplY3RlZC5cclxuICogVGVjaG5pY2FsbHkgdGhpcyBtYXkgbm8gbG9uZ2VyIGJlIG5lY2Vzc2FyeSBzaW5jZSB0aGUgU0RLIHNob3VsZCBncmFjZWZ1bGx5XHJcbiAqIHJlY292ZXIgZnJvbSB1bmF1dGhlbnRpY2F0ZWQgZXJyb3JzIChzZWUgYi8zMzE0NzgxOCBmb3IgY29udGV4dCksIGJ1dCBpdCdzXHJcbiAqIHNhZmVyIHRvIGtlZXAgdGhlIGltcGxlbWVudGF0aW9uIGFzLWlzLlxyXG4gKi9cclxudmFyIEZpcnN0UGFydHlUb2tlbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEZpcnN0UGFydHlUb2tlbihnYXBpLCBzZXNzaW9uSW5kZXgpIHtcclxuICAgICAgICB0aGlzLmdhcGkgPSBnYXBpO1xyXG4gICAgICAgIHRoaXMuc2Vzc2lvbkluZGV4ID0gc2Vzc2lvbkluZGV4O1xyXG4gICAgICAgIHRoaXMudHlwZSA9ICdGaXJzdFBhcnR5JztcclxuICAgICAgICB0aGlzLnVzZXIgPSBVc2VyLkZJUlNUX1BBUlRZO1xyXG4gICAgfVxyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEZpcnN0UGFydHlUb2tlbi5wcm90b3R5cGUsIFwiYXV0aEhlYWRlcnNcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgaGVhZGVycyA9IHtcclxuICAgICAgICAgICAgICAgICdYLUdvb2ctQXV0aFVzZXInOiB0aGlzLnNlc3Npb25JbmRleFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB2YXIgYXV0aEhlYWRlciA9IHRoaXMuZ2FwaS5hdXRoLmdldEF1dGhIZWFkZXJWYWx1ZUZvckZpcnN0UGFydHkoW10pO1xyXG4gICAgICAgICAgICBpZiAoYXV0aEhlYWRlcikge1xyXG4gICAgICAgICAgICAgICAgaGVhZGVyc1snQXV0aG9yaXphdGlvbiddID0gYXV0aEhlYWRlcjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gaGVhZGVycztcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIHJldHVybiBGaXJzdFBhcnR5VG9rZW47XHJcbn0oKSk7XHJcbi8qXHJcbiAqIFByb3ZpZGVzIHVzZXIgY3JlZGVudGlhbHMgcmVxdWlyZWQgZm9yIHRoZSBGaXJlc3RvcmUgSmF2YVNjcmlwdCBTREtcclxuICogdG8gYXV0aGVudGljYXRlIHRoZSB1c2VyLCB1c2luZyB0ZWNobmlxdWUgdGhhdCBpcyBvbmx5IGF2YWlsYWJsZVxyXG4gKiB0byBhcHBsaWNhdGlvbnMgaG9zdGVkIGJ5IEdvb2dsZS5cclxuICovXHJcbnZhciBGaXJzdFBhcnR5Q3JlZGVudGlhbHNQcm92aWRlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEZpcnN0UGFydHlDcmVkZW50aWFsc1Byb3ZpZGVyKGdhcGksIHNlc3Npb25JbmRleCkge1xyXG4gICAgICAgIHRoaXMuZ2FwaSA9IGdhcGk7XHJcbiAgICAgICAgdGhpcy5zZXNzaW9uSW5kZXggPSBzZXNzaW9uSW5kZXg7XHJcbiAgICB9XHJcbiAgICBGaXJzdFBhcnR5Q3JlZGVudGlhbHNQcm92aWRlci5wcm90b3R5cGUuZ2V0VG9rZW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShuZXcgRmlyc3RQYXJ0eVRva2VuKHRoaXMuZ2FwaSwgdGhpcy5zZXNzaW9uSW5kZXgpKTtcclxuICAgIH07XHJcbiAgICBGaXJzdFBhcnR5Q3JlZGVudGlhbHNQcm92aWRlci5wcm90b3R5cGUuc2V0Q2hhbmdlTGlzdGVuZXIgPSBmdW5jdGlvbiAoY2hhbmdlTGlzdGVuZXIpIHtcclxuICAgICAgICAvLyBGaXJlIHdpdGggaW5pdGlhbCB1aWQuXHJcbiAgICAgICAgY2hhbmdlTGlzdGVuZXIoVXNlci5GSVJTVF9QQVJUWSk7XHJcbiAgICB9O1xyXG4gICAgRmlyc3RQYXJ0eUNyZWRlbnRpYWxzUHJvdmlkZXIucHJvdG90eXBlLnJlbW92ZUNoYW5nZUxpc3RlbmVyID0gZnVuY3Rpb24gKCkgeyB9O1xyXG4gICAgRmlyc3RQYXJ0eUNyZWRlbnRpYWxzUHJvdmlkZXIucHJvdG90eXBlLmludmFsaWRhdGVUb2tlbiA9IGZ1bmN0aW9uICgpIHsgfTtcclxuICAgIHJldHVybiBGaXJzdFBhcnR5Q3JlZGVudGlhbHNQcm92aWRlcjtcclxufSgpKTtcclxuLyoqXHJcbiAqIEJ1aWxkcyBhIENyZWRlbnRpYWxzUHJvdmlkZXIgZGVwZW5kaW5nIG9uIHRoZSB0eXBlIG9mXHJcbiAqIHRoZSBjcmVkZW50aWFscyBwYXNzZWQgaW4uXHJcbiAqL1xyXG5mdW5jdGlvbiBtYWtlQ3JlZGVudGlhbHNQcm92aWRlcihjcmVkZW50aWFscykge1xyXG4gICAgaWYgKCFjcmVkZW50aWFscykge1xyXG4gICAgICAgIHJldHVybiBuZXcgRW1wdHlDcmVkZW50aWFsc1Byb3ZpZGVyKCk7XHJcbiAgICB9XHJcbiAgICBzd2l0Y2ggKGNyZWRlbnRpYWxzLnR5cGUpIHtcclxuICAgICAgICBjYXNlICdnYXBpJzpcclxuICAgICAgICAgICAgdmFyIGNsaWVudCA9IGNyZWRlbnRpYWxzLmNsaWVudDtcclxuICAgICAgICAgICAgLy8gTWFrZSBzdXJlIHRoaXMgcmVhbGx5IGlzIGEgR2FwaSBjbGllbnQuXHJcbiAgICAgICAgICAgIGFzc2VydCghISh0eXBlb2YgY2xpZW50ID09PSAnb2JqZWN0JyAmJlxyXG4gICAgICAgICAgICAgICAgY2xpZW50ICE9PSBudWxsICYmXHJcbiAgICAgICAgICAgICAgICBjbGllbnRbJ2F1dGgnXSAmJlxyXG4gICAgICAgICAgICAgICAgY2xpZW50WydhdXRoJ11bJ2dldEF1dGhIZWFkZXJWYWx1ZUZvckZpcnN0UGFydHknXSksICd1bmV4cGVjdGVkIGdhcGkgaW50ZXJmYWNlJyk7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgRmlyc3RQYXJ0eUNyZWRlbnRpYWxzUHJvdmlkZXIoY2xpZW50LCBjcmVkZW50aWFscy5zZXNzaW9uSW5kZXggfHwgJzAnKTtcclxuICAgICAgICBjYXNlICdwcm92aWRlcic6XHJcbiAgICAgICAgICAgIHJldHVybiBjcmVkZW50aWFscy5jbGllbnQ7XHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuSU5WQUxJRF9BUkdVTUVOVCwgJ21ha2VDcmVkZW50aWFsc1Byb3ZpZGVyIGZhaWxlZCBkdWUgdG8gaW52YWxpZCBjcmVkZW50aWFsIHR5cGUnKTtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gaXNQYXJ0aWFsT2JzZXJ2ZXIob2JqKSB7XHJcbiAgICByZXR1cm4gaW1wbGVtZW50c0FueU1ldGhvZHMob2JqLCBbJ25leHQnLCAnZXJyb3InLCAnY29tcGxldGUnXSk7XHJcbn1cclxuLyoqXHJcbiAqIFJldHVybnMgdHJ1ZSBpZiBvYmogaXMgYW4gb2JqZWN0IGFuZCBjb250YWlucyBhdCBsZWFzdCBvbmUgb2YgdGhlIHNwZWNpZmllZFxyXG4gKiBtZXRob2RzLlxyXG4gKi9cclxuZnVuY3Rpb24gaW1wbGVtZW50c0FueU1ldGhvZHMob2JqLCBtZXRob2RzKSB7XHJcbiAgICBpZiAodHlwZW9mIG9iaiAhPT0gJ29iamVjdCcgfHwgb2JqID09PSBudWxsKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgdmFyIG9iamVjdCA9IG9iajtcclxuICAgIGZvciAodmFyIF9pID0gMCwgbWV0aG9kc18xID0gbWV0aG9kczsgX2kgPCBtZXRob2RzXzEubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgdmFyIG1ldGhvZCA9IG1ldGhvZHNfMVtfaV07XHJcbiAgICAgICAgaWYgKG1ldGhvZCBpbiBvYmplY3QgJiYgdHlwZW9mIG9iamVjdFttZXRob2RdID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBmYWxzZTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEFuIG9wYXF1ZSBiYXNlIGNsYXNzIGZvciBGaWVsZFZhbHVlIHNlbnRpbmVsIG9iamVjdHMgaW4gb3VyIHB1YmxpYyBBUEksXHJcbiAqIHdpdGggcHVibGljIHN0YXRpYyBtZXRob2RzIGZvciBjcmVhdGluZyBzYWlkIHNlbnRpbmVsIG9iamVjdHMuXHJcbiAqL1xyXG52YXIgRmllbGRWYWx1ZUltcGwgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBGaWVsZFZhbHVlSW1wbChfbWV0aG9kTmFtZSkge1xyXG4gICAgICAgIHRoaXMuX21ldGhvZE5hbWUgPSBfbWV0aG9kTmFtZTtcclxuICAgIH1cclxuICAgIEZpZWxkVmFsdWVJbXBsLmRlbGV0ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YWxpZGF0ZU5vQXJncygnRmllbGRWYWx1ZS5kZWxldGUnLCBhcmd1bWVudHMpO1xyXG4gICAgICAgIHJldHVybiBEZWxldGVGaWVsZFZhbHVlSW1wbC5pbnN0YW5jZTtcclxuICAgIH07XHJcbiAgICBGaWVsZFZhbHVlSW1wbC5zZXJ2ZXJUaW1lc3RhbXAgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFsaWRhdGVOb0FyZ3MoJ0ZpZWxkVmFsdWUuc2VydmVyVGltZXN0YW1wJywgYXJndW1lbnRzKTtcclxuICAgICAgICByZXR1cm4gU2VydmVyVGltZXN0YW1wRmllbGRWYWx1ZUltcGwuaW5zdGFuY2U7XHJcbiAgICB9O1xyXG4gICAgRmllbGRWYWx1ZUltcGwuYXJyYXlVbmlvbiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgZWxlbWVudHMgPSBbXTtcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICBlbGVtZW50c1tfaV0gPSBhcmd1bWVudHNbX2ldO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YWxpZGF0ZUF0TGVhc3ROdW1iZXJPZkFyZ3MoJ0ZpZWxkVmFsdWUuYXJyYXlVbmlvbicsIGFyZ3VtZW50cywgMSk7XHJcbiAgICAgICAgLy8gTk9URTogV2UgZG9uJ3QgYWN0dWFsbHkgcGFyc2UgdGhlIGRhdGEgdW50aWwgaXQncyB1c2VkIGluIHNldCgpIG9yXHJcbiAgICAgICAgLy8gdXBkYXRlKCkgc2luY2Ugd2UgbmVlZCBhY2Nlc3MgdG8gdGhlIEZpcmVzdG9yZSBpbnN0YW5jZS5cclxuICAgICAgICByZXR1cm4gbmV3IEFycmF5VW5pb25GaWVsZFZhbHVlSW1wbChlbGVtZW50cyk7XHJcbiAgICB9O1xyXG4gICAgRmllbGRWYWx1ZUltcGwuYXJyYXlSZW1vdmUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGVsZW1lbnRzID0gW107XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgZWxlbWVudHNbX2ldID0gYXJndW1lbnRzW19pXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFsaWRhdGVBdExlYXN0TnVtYmVyT2ZBcmdzKCdGaWVsZFZhbHVlLmFycmF5UmVtb3ZlJywgYXJndW1lbnRzLCAxKTtcclxuICAgICAgICAvLyBOT1RFOiBXZSBkb24ndCBhY3R1YWxseSBwYXJzZSB0aGUgZGF0YSB1bnRpbCBpdCdzIHVzZWQgaW4gc2V0KCkgb3JcclxuICAgICAgICAvLyB1cGRhdGUoKSBzaW5jZSB3ZSBuZWVkIGFjY2VzcyB0byB0aGUgRmlyZXN0b3JlIGluc3RhbmNlLlxyXG4gICAgICAgIHJldHVybiBuZXcgQXJyYXlSZW1vdmVGaWVsZFZhbHVlSW1wbChlbGVtZW50cyk7XHJcbiAgICB9O1xyXG4gICAgRmllbGRWYWx1ZUltcGwuaW5jcmVtZW50ID0gZnVuY3Rpb24gKG4pIHtcclxuICAgICAgICB2YWxpZGF0ZUFyZ1R5cGUoJ0ZpZWxkVmFsdWUuaW5jcmVtZW50JywgJ251bWJlcicsIDEsIG4pO1xyXG4gICAgICAgIHZhbGlkYXRlRXhhY3ROdW1iZXJPZkFyZ3MoJ0ZpZWxkVmFsdWUuaW5jcmVtZW50JywgYXJndW1lbnRzLCAxKTtcclxuICAgICAgICByZXR1cm4gbmV3IE51bWVyaWNJbmNyZW1lbnRGaWVsZFZhbHVlSW1wbChuKTtcclxuICAgIH07XHJcbiAgICBGaWVsZFZhbHVlSW1wbC5wcm90b3R5cGUuaXNFcXVhbCA9IGZ1bmN0aW9uIChvdGhlcikge1xyXG4gICAgICAgIHJldHVybiB0aGlzID09PSBvdGhlcjtcclxuICAgIH07XHJcbiAgICByZXR1cm4gRmllbGRWYWx1ZUltcGw7XHJcbn0oKSk7XHJcbnZhciBEZWxldGVGaWVsZFZhbHVlSW1wbCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIHRzbGliLl9fZXh0ZW5kcyhEZWxldGVGaWVsZFZhbHVlSW1wbCwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIERlbGV0ZUZpZWxkVmFsdWVJbXBsKCkge1xyXG4gICAgICAgIHJldHVybiBfc3VwZXIuY2FsbCh0aGlzLCAnRmllbGRWYWx1ZS5kZWxldGUnKSB8fCB0aGlzO1xyXG4gICAgfVxyXG4gICAgLyoqIFNpbmdsZXRvbiBpbnN0YW5jZS4gKi9cclxuICAgIERlbGV0ZUZpZWxkVmFsdWVJbXBsLmluc3RhbmNlID0gbmV3IERlbGV0ZUZpZWxkVmFsdWVJbXBsKCk7XHJcbiAgICByZXR1cm4gRGVsZXRlRmllbGRWYWx1ZUltcGw7XHJcbn0oRmllbGRWYWx1ZUltcGwpKTtcclxudmFyIFNlcnZlclRpbWVzdGFtcEZpZWxkVmFsdWVJbXBsID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgdHNsaWIuX19leHRlbmRzKFNlcnZlclRpbWVzdGFtcEZpZWxkVmFsdWVJbXBsLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gU2VydmVyVGltZXN0YW1wRmllbGRWYWx1ZUltcGwoKSB7XHJcbiAgICAgICAgcmV0dXJuIF9zdXBlci5jYWxsKHRoaXMsICdGaWVsZFZhbHVlLnNlcnZlclRpbWVzdGFtcCcpIHx8IHRoaXM7XHJcbiAgICB9XHJcbiAgICAvKiogU2luZ2xldG9uIGluc3RhbmNlLiAqL1xyXG4gICAgU2VydmVyVGltZXN0YW1wRmllbGRWYWx1ZUltcGwuaW5zdGFuY2UgPSBuZXcgU2VydmVyVGltZXN0YW1wRmllbGRWYWx1ZUltcGwoKTtcclxuICAgIHJldHVybiBTZXJ2ZXJUaW1lc3RhbXBGaWVsZFZhbHVlSW1wbDtcclxufShGaWVsZFZhbHVlSW1wbCkpO1xyXG52YXIgQXJyYXlVbmlvbkZpZWxkVmFsdWVJbXBsID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgdHNsaWIuX19leHRlbmRzKEFycmF5VW5pb25GaWVsZFZhbHVlSW1wbCwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIEFycmF5VW5pb25GaWVsZFZhbHVlSW1wbChfZWxlbWVudHMpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCAnRmllbGRWYWx1ZS5hcnJheVVuaW9uJykgfHwgdGhpcztcclxuICAgICAgICBfdGhpcy5fZWxlbWVudHMgPSBfZWxlbWVudHM7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIEFycmF5VW5pb25GaWVsZFZhbHVlSW1wbDtcclxufShGaWVsZFZhbHVlSW1wbCkpO1xyXG52YXIgQXJyYXlSZW1vdmVGaWVsZFZhbHVlSW1wbCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIHRzbGliLl9fZXh0ZW5kcyhBcnJheVJlbW92ZUZpZWxkVmFsdWVJbXBsLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gQXJyYXlSZW1vdmVGaWVsZFZhbHVlSW1wbChfZWxlbWVudHMpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCAnRmllbGRWYWx1ZS5hcnJheVJlbW92ZScpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMuX2VsZW1lbnRzID0gX2VsZW1lbnRzO1xyXG4gICAgICAgIHJldHVybiBfdGhpcztcclxuICAgIH1cclxuICAgIHJldHVybiBBcnJheVJlbW92ZUZpZWxkVmFsdWVJbXBsO1xyXG59KEZpZWxkVmFsdWVJbXBsKSk7XHJcbnZhciBOdW1lcmljSW5jcmVtZW50RmllbGRWYWx1ZUltcGwgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICB0c2xpYi5fX2V4dGVuZHMoTnVtZXJpY0luY3JlbWVudEZpZWxkVmFsdWVJbXBsLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gTnVtZXJpY0luY3JlbWVudEZpZWxkVmFsdWVJbXBsKF9vcGVyYW5kKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgJ0ZpZWxkVmFsdWUuaW5jcmVtZW50JykgfHwgdGhpcztcclxuICAgICAgICBfdGhpcy5fb3BlcmFuZCA9IF9vcGVyYW5kO1xyXG4gICAgICAgIHJldHVybiBfdGhpcztcclxuICAgIH1cclxuICAgIHJldHVybiBOdW1lcmljSW5jcmVtZW50RmllbGRWYWx1ZUltcGw7XHJcbn0oRmllbGRWYWx1ZUltcGwpKTtcclxuLy8gUHVibGljIGluc3RhbmNlIHRoYXQgZGlzYWxsb3dzIGNvbnN0cnVjdGlvbiBhdCBydW50aW1lLiBUaGlzIGNvbnN0cnVjdG9yIGlzXHJcbi8vIHVzZWQgd2hlbiBleHBvcnRpbmcgRmllbGRWYWx1ZUltcGwgb24gZmlyZWJhc2UuZmlyZXN0b3JlLkZpZWxkVmFsdWUgYW5kIHdpbGxcclxuLy8gYmUgY2FsbGVkIEZpZWxkVmFsdWUgcHVibGljbHkuIEludGVybmFsbHkgd2Ugc3RpbGwgdXNlIEZpZWxkVmFsdWVJbXBsIHdoaWNoXHJcbi8vIGhhcyBhIHR5cGUtY2hlY2tlZCBwcml2YXRlIGNvbnN0cnVjdG9yLiBOb3RlIHRoYXQgRmllbGRWYWx1ZUltcGwgYW5kXHJcbi8vIFB1YmxpY0ZpZWxkVmFsdWUgY2FuIGJlIHVzZWQgaW50ZXJjaGFuZ2VhYmx5IGluIGluc3RhbmNlb2YgY2hlY2tzLlxyXG4vLyBGb3Igb3VyIGludGVybmFsIFR5cGVTY3JpcHQgY29kZSBQdWJsaWNGaWVsZFZhbHVlIGRvZXNuJ3QgZXhpc3QgYXMgYSB0eXBlLFxyXG4vLyBhbmQgc28gd2UgbmVlZCB0byB1c2UgRmllbGRWYWx1ZUltcGwgYXMgdHlwZSBhbmQgZXhwb3J0IGl0IHRvby5cclxudmFyIFB1YmxpY0ZpZWxkVmFsdWUgPSBtYWtlQ29uc3RydWN0b3JQcml2YXRlKEZpZWxkVmFsdWVJbXBsLCAnVXNlIEZpZWxkVmFsdWUuPGZpZWxkPigpIGluc3RlYWQuJyk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG52YXIgUkVTRVJWRURfRklFTERfUkVHRVggPSAvXl9fLipfXyQvO1xyXG4vKiogVGhlIHJlc3VsdCBvZiBwYXJzaW5nIGRvY3VtZW50IGRhdGEgKGUuZy4gZm9yIGEgc2V0RGF0YSBjYWxsKS4gKi9cclxudmFyIFBhcnNlZFNldERhdGEgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBQYXJzZWRTZXREYXRhKGRhdGEsIGZpZWxkTWFzaywgZmllbGRUcmFuc2Zvcm1zKSB7XHJcbiAgICAgICAgdGhpcy5kYXRhID0gZGF0YTtcclxuICAgICAgICB0aGlzLmZpZWxkTWFzayA9IGZpZWxkTWFzaztcclxuICAgICAgICB0aGlzLmZpZWxkVHJhbnNmb3JtcyA9IGZpZWxkVHJhbnNmb3JtcztcclxuICAgIH1cclxuICAgIFBhcnNlZFNldERhdGEucHJvdG90eXBlLnRvTXV0YXRpb25zID0gZnVuY3Rpb24gKGtleSwgcHJlY29uZGl0aW9uKSB7XHJcbiAgICAgICAgdmFyIG11dGF0aW9ucyA9IFtdO1xyXG4gICAgICAgIGlmICh0aGlzLmZpZWxkTWFzayAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBtdXRhdGlvbnMucHVzaChuZXcgUGF0Y2hNdXRhdGlvbihrZXksIHRoaXMuZGF0YSwgdGhpcy5maWVsZE1hc2ssIHByZWNvbmRpdGlvbikpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgbXV0YXRpb25zLnB1c2gobmV3IFNldE11dGF0aW9uKGtleSwgdGhpcy5kYXRhLCBwcmVjb25kaXRpb24pKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuZmllbGRUcmFuc2Zvcm1zLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgbXV0YXRpb25zLnB1c2gobmV3IFRyYW5zZm9ybU11dGF0aW9uKGtleSwgdGhpcy5maWVsZFRyYW5zZm9ybXMpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG11dGF0aW9ucztcclxuICAgIH07XHJcbiAgICByZXR1cm4gUGFyc2VkU2V0RGF0YTtcclxufSgpKTtcclxuLyoqIFRoZSByZXN1bHQgb2YgcGFyc2luZyBcInVwZGF0ZVwiIGRhdGEgKGkuZS4gZm9yIGFuIHVwZGF0ZURhdGEgY2FsbCkuICovXHJcbnZhciBQYXJzZWRVcGRhdGVEYXRhID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gUGFyc2VkVXBkYXRlRGF0YShkYXRhLCBmaWVsZE1hc2ssIGZpZWxkVHJhbnNmb3Jtcykge1xyXG4gICAgICAgIHRoaXMuZGF0YSA9IGRhdGE7XHJcbiAgICAgICAgdGhpcy5maWVsZE1hc2sgPSBmaWVsZE1hc2s7XHJcbiAgICAgICAgdGhpcy5maWVsZFRyYW5zZm9ybXMgPSBmaWVsZFRyYW5zZm9ybXM7XHJcbiAgICB9XHJcbiAgICBQYXJzZWRVcGRhdGVEYXRhLnByb3RvdHlwZS50b011dGF0aW9ucyA9IGZ1bmN0aW9uIChrZXksIHByZWNvbmRpdGlvbikge1xyXG4gICAgICAgIHZhciBtdXRhdGlvbnMgPSBbXHJcbiAgICAgICAgICAgIG5ldyBQYXRjaE11dGF0aW9uKGtleSwgdGhpcy5kYXRhLCB0aGlzLmZpZWxkTWFzaywgcHJlY29uZGl0aW9uKVxyXG4gICAgICAgIF07XHJcbiAgICAgICAgaWYgKHRoaXMuZmllbGRUcmFuc2Zvcm1zLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgbXV0YXRpb25zLnB1c2gobmV3IFRyYW5zZm9ybU11dGF0aW9uKGtleSwgdGhpcy5maWVsZFRyYW5zZm9ybXMpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG11dGF0aW9ucztcclxuICAgIH07XHJcbiAgICByZXR1cm4gUGFyc2VkVXBkYXRlRGF0YTtcclxufSgpKTtcclxuLypcclxuICogUmVwcmVzZW50cyB3aGF0IHR5cGUgb2YgQVBJIG1ldGhvZCBwcm92aWRlZCB0aGUgZGF0YSBiZWluZyBwYXJzZWQ7IHVzZWZ1bFxyXG4gKiBmb3IgZGV0ZXJtaW5pbmcgd2hpY2ggZXJyb3IgY29uZGl0aW9ucyBhcHBseSBkdXJpbmcgcGFyc2luZyBhbmQgcHJvdmlkaW5nXHJcbiAqIGJldHRlciBlcnJvciBtZXNzYWdlcy5cclxuICovXHJcbnZhciBVc2VyRGF0YVNvdXJjZTtcclxuKGZ1bmN0aW9uIChVc2VyRGF0YVNvdXJjZSkge1xyXG4gICAgVXNlckRhdGFTb3VyY2VbVXNlckRhdGFTb3VyY2VbXCJTZXRcIl0gPSAwXSA9IFwiU2V0XCI7XHJcbiAgICBVc2VyRGF0YVNvdXJjZVtVc2VyRGF0YVNvdXJjZVtcIlVwZGF0ZVwiXSA9IDFdID0gXCJVcGRhdGVcIjtcclxuICAgIFVzZXJEYXRhU291cmNlW1VzZXJEYXRhU291cmNlW1wiTWVyZ2VTZXRcIl0gPSAyXSA9IFwiTWVyZ2VTZXRcIjtcclxuICAgIC8qKlxyXG4gICAgICogSW5kaWNhdGVzIHRoZSBzb3VyY2UgaXMgYSB3aGVyZSBjbGF1c2UsIGN1cnNvciBib3VuZCwgYXJyYXlVbmlvbigpXHJcbiAgICAgKiBlbGVtZW50LCBldGMuIE9mIG5vdGUsIGlzV3JpdGUoc291cmNlKSB3aWxsIHJldHVybiBmYWxzZS5cclxuICAgICAqL1xyXG4gICAgVXNlckRhdGFTb3VyY2VbVXNlckRhdGFTb3VyY2VbXCJBcmd1bWVudFwiXSA9IDNdID0gXCJBcmd1bWVudFwiO1xyXG4gICAgLyoqXHJcbiAgICAgKiBJbmRpY2F0ZXMgdGhhdCB0aGUgc291cmNlIGlzIGFuIEFyZ3VtZW50IHRoYXQgbWF5IGRpcmVjdGx5IGNvbnRhaW4gbmVzdGVkXHJcbiAgICAgKiBhcnJheXMgKGUuZy4gdGhlIG9wZXJhbmQgb2YgYW4gYGluYCBxdWVyeSkuXHJcbiAgICAgKi9cclxuICAgIFVzZXJEYXRhU291cmNlW1VzZXJEYXRhU291cmNlW1wiQXJyYXlBcmd1bWVudFwiXSA9IDRdID0gXCJBcnJheUFyZ3VtZW50XCI7XHJcbn0pKFVzZXJEYXRhU291cmNlIHx8IChVc2VyRGF0YVNvdXJjZSA9IHt9KSk7XHJcbmZ1bmN0aW9uIGlzV3JpdGUoZGF0YVNvdXJjZSkge1xyXG4gICAgc3dpdGNoIChkYXRhU291cmNlKSB7XHJcbiAgICAgICAgY2FzZSBVc2VyRGF0YVNvdXJjZS5TZXQ6IC8vIGZhbGwgdGhyb3VnaFxyXG4gICAgICAgIGNhc2UgVXNlckRhdGFTb3VyY2UuTWVyZ2VTZXQ6IC8vIGZhbGwgdGhyb3VnaFxyXG4gICAgICAgIGNhc2UgVXNlckRhdGFTb3VyY2UuVXBkYXRlOlxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICBjYXNlIFVzZXJEYXRhU291cmNlLkFyZ3VtZW50OlxyXG4gICAgICAgIGNhc2UgVXNlckRhdGFTb3VyY2UuQXJyYXlBcmd1bWVudDpcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgIHRocm93IGZhaWwoXCJVbmV4cGVjdGVkIGNhc2UgZm9yIFVzZXJEYXRhU291cmNlOiBcIiArIGRhdGFTb3VyY2UpO1xyXG4gICAgfVxyXG59XHJcbi8qKiBBIFwiY29udGV4dFwiIG9iamVjdCBwYXNzZWQgYXJvdW5kIHdoaWxlIHBhcnNpbmcgdXNlciBkYXRhLiAqL1xyXG52YXIgUGFyc2VDb250ZXh0ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgLyoqXHJcbiAgICAgKiBJbml0aWFsaXplcyBhIFBhcnNlQ29udGV4dCB3aXRoIHRoZSBnaXZlbiBzb3VyY2UgYW5kIHBhdGguXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGRhdGFTb3VyY2UgSW5kaWNhdGVzIHdoYXQga2luZCBvZiBBUEkgbWV0aG9kIHRoaXMgZGF0YSBjYW1lIGZyb20uXHJcbiAgICAgKiBAcGFyYW0gbWV0aG9kTmFtZSBUaGUgbmFtZSBvZiB0aGUgbWV0aG9kIHRoZSB1c2VyIGNhbGxlZCB0byBjcmVhdGUgdGhpc1xyXG4gICAgICogICAgIFBhcnNlQ29udGV4dC5cclxuICAgICAqIEBwYXJhbSBwYXRoIEEgcGF0aCB3aXRoaW4gdGhlIG9iamVjdCBiZWluZyBwYXJzZWQuIFRoaXMgY291bGQgYmUgYW4gZW1wdHlcclxuICAgICAqICAgICBwYXRoIChpbiB3aGljaCBjYXNlIHRoZSBjb250ZXh0IHJlcHJlc2VudHMgdGhlIHJvb3Qgb2YgdGhlIGRhdGEgYmVpbmdcclxuICAgICAqICAgICBwYXJzZWQpLCBvciBhIG5vbmVtcHR5IHBhdGggKGluZGljYXRpbmcgdGhlIGNvbnRleHQgcmVwcmVzZW50cyBhIG5lc3RlZFxyXG4gICAgICogICAgIGxvY2F0aW9uIHdpdGhpbiB0aGUgZGF0YSkuXHJcbiAgICAgKiBAcGFyYW0gYXJyYXlFbGVtZW50IFdoZXRoZXIgb3Igbm90IHRoaXMgY29udGV4dCBjb3JyZXNwb25kcyB0byBhbiBlbGVtZW50XHJcbiAgICAgKiAgICAgb2YgYW4gYXJyYXkuXHJcbiAgICAgKiBAcGFyYW0gZmllbGRUcmFuc2Zvcm1zIEEgbXV0YWJsZSBsaXN0IG9mIGZpZWxkIHRyYW5zZm9ybXMgZW5jb3VudGVyZWQgd2hpbGVcclxuICAgICAqICAgICBwYXJzaW5nIHRoZSBkYXRhLlxyXG4gICAgICogQHBhcmFtIGZpZWxkTWFzayBBIG11dGFibGUgbGlzdCBvZiBmaWVsZCBwYXRocyBlbmNvdW50ZXJlZCB3aGlsZSBwYXJzaW5nXHJcbiAgICAgKiAgICAgdGhlIGRhdGEuXHJcbiAgICAgKlxyXG4gICAgICogVE9ETyhiLzM0ODcxMTMxKTogV2UgZG9uJ3Qgc3VwcG9ydCBhcnJheSBwYXRocyByaWdodCBub3csIHNvIHBhdGggY2FuIGJlXHJcbiAgICAgKiBudWxsIHRvIGluZGljYXRlIHRoZSBjb250ZXh0IHJlcHJlc2VudHMgYW55IGxvY2F0aW9uIHdpdGhpbiBhbiBhcnJheSAoaW5cclxuICAgICAqIHdoaWNoIGNhc2UgY2VydGFpbiBmZWF0dXJlcyB3aWxsIG5vdCB3b3JrIGFuZCBlcnJvcnMgd2lsbCBiZSBzb21ld2hhdFxyXG4gICAgICogY29tcHJvbWlzZWQpLlxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBQYXJzZUNvbnRleHQoZGF0YVNvdXJjZSwgbWV0aG9kTmFtZSwgcGF0aCwgYXJyYXlFbGVtZW50LCBmaWVsZFRyYW5zZm9ybXMsIGZpZWxkTWFzaykge1xyXG4gICAgICAgIHRoaXMuZGF0YVNvdXJjZSA9IGRhdGFTb3VyY2U7XHJcbiAgICAgICAgdGhpcy5tZXRob2ROYW1lID0gbWV0aG9kTmFtZTtcclxuICAgICAgICB0aGlzLnBhdGggPSBwYXRoO1xyXG4gICAgICAgIHRoaXMuYXJyYXlFbGVtZW50ID0gYXJyYXlFbGVtZW50O1xyXG4gICAgICAgIC8vIE1pbm9yIGhhY2s6IElmIGZpZWxkVHJhbnNmb3JtcyBpcyB1bmRlZmluZWQsIHdlIGFzc3VtZSB0aGlzIGlzIGFuXHJcbiAgICAgICAgLy8gZXh0ZXJuYWwgY2FsbCBhbmQgd2UgbmVlZCB0byB2YWxpZGF0ZSB0aGUgZW50aXJlIHBhdGguXHJcbiAgICAgICAgaWYgKGZpZWxkVHJhbnNmb3JtcyA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMudmFsaWRhdGVQYXRoKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuYXJyYXlFbGVtZW50ID0gYXJyYXlFbGVtZW50ICE9PSB1bmRlZmluZWQgPyBhcnJheUVsZW1lbnQgOiBmYWxzZTtcclxuICAgICAgICB0aGlzLmZpZWxkVHJhbnNmb3JtcyA9IGZpZWxkVHJhbnNmb3JtcyB8fCBbXTtcclxuICAgICAgICB0aGlzLmZpZWxkTWFzayA9IGZpZWxkTWFzayB8fCBbXTtcclxuICAgIH1cclxuICAgIFBhcnNlQ29udGV4dC5wcm90b3R5cGUuY2hpbGRDb250ZXh0Rm9yRmllbGQgPSBmdW5jdGlvbiAoZmllbGQpIHtcclxuICAgICAgICB2YXIgY2hpbGRQYXRoID0gdGhpcy5wYXRoID09IG51bGwgPyBudWxsIDogdGhpcy5wYXRoLmNoaWxkKGZpZWxkKTtcclxuICAgICAgICB2YXIgY29udGV4dCA9IG5ldyBQYXJzZUNvbnRleHQodGhpcy5kYXRhU291cmNlLCB0aGlzLm1ldGhvZE5hbWUsIGNoaWxkUGF0aCwgXHJcbiAgICAgICAgLyphcnJheUVsZW1lbnQ9Ki8gZmFsc2UsIHRoaXMuZmllbGRUcmFuc2Zvcm1zLCB0aGlzLmZpZWxkTWFzayk7XHJcbiAgICAgICAgY29udGV4dC52YWxpZGF0ZVBhdGhTZWdtZW50KGZpZWxkKTtcclxuICAgICAgICByZXR1cm4gY29udGV4dDtcclxuICAgIH07XHJcbiAgICBQYXJzZUNvbnRleHQucHJvdG90eXBlLmNoaWxkQ29udGV4dEZvckZpZWxkUGF0aCA9IGZ1bmN0aW9uIChmaWVsZCkge1xyXG4gICAgICAgIHZhciBjaGlsZFBhdGggPSB0aGlzLnBhdGggPT0gbnVsbCA/IG51bGwgOiB0aGlzLnBhdGguY2hpbGQoZmllbGQpO1xyXG4gICAgICAgIHZhciBjb250ZXh0ID0gbmV3IFBhcnNlQ29udGV4dCh0aGlzLmRhdGFTb3VyY2UsIHRoaXMubWV0aG9kTmFtZSwgY2hpbGRQYXRoLCBcclxuICAgICAgICAvKmFycmF5RWxlbWVudD0qLyBmYWxzZSwgdGhpcy5maWVsZFRyYW5zZm9ybXMsIHRoaXMuZmllbGRNYXNrKTtcclxuICAgICAgICBjb250ZXh0LnZhbGlkYXRlUGF0aCgpO1xyXG4gICAgICAgIHJldHVybiBjb250ZXh0O1xyXG4gICAgfTtcclxuICAgIFBhcnNlQ29udGV4dC5wcm90b3R5cGUuY2hpbGRDb250ZXh0Rm9yQXJyYXkgPSBmdW5jdGlvbiAoaW5kZXgpIHtcclxuICAgICAgICAvLyBUT0RPKGIvMzQ4NzExMzEpOiBXZSBkb24ndCBzdXBwb3J0IGFycmF5IHBhdGhzIHJpZ2h0IG5vdzsgc28gbWFrZSBwYXRoXHJcbiAgICAgICAgLy8gbnVsbC5cclxuICAgICAgICByZXR1cm4gbmV3IFBhcnNlQ29udGV4dCh0aGlzLmRhdGFTb3VyY2UsIHRoaXMubWV0aG9kTmFtZSwgXHJcbiAgICAgICAgLypwYXRoPSovIG51bGwsIFxyXG4gICAgICAgIC8qYXJyYXlFbGVtZW50PSovIHRydWUsIHRoaXMuZmllbGRUcmFuc2Zvcm1zLCB0aGlzLmZpZWxkTWFzayk7XHJcbiAgICB9O1xyXG4gICAgUGFyc2VDb250ZXh0LnByb3RvdHlwZS5jcmVhdGVFcnJvciA9IGZ1bmN0aW9uIChyZWFzb24pIHtcclxuICAgICAgICB2YXIgZmllbGREZXNjcmlwdGlvbiA9IHRoaXMucGF0aCA9PT0gbnVsbCB8fCB0aGlzLnBhdGguaXNFbXB0eSgpXHJcbiAgICAgICAgICAgID8gJydcclxuICAgICAgICAgICAgOiBcIiAoZm91bmQgaW4gZmllbGQgXCIgKyB0aGlzLnBhdGgudG9TdHJpbmcoKSArIFwiKVwiO1xyXG4gICAgICAgIHJldHVybiBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5JTlZBTElEX0FSR1VNRU5ULCBcIkZ1bmN0aW9uIFwiICsgdGhpcy5tZXRob2ROYW1lICsgXCIoKSBjYWxsZWQgd2l0aCBpbnZhbGlkIGRhdGEuIFwiICtcclxuICAgICAgICAgICAgcmVhc29uICtcclxuICAgICAgICAgICAgZmllbGREZXNjcmlwdGlvbik7XHJcbiAgICB9O1xyXG4gICAgLyoqIFJldHVybnMgJ3RydWUnIGlmICdmaWVsZFBhdGgnIHdhcyB0cmF2ZXJzZWQgd2hlbiBjcmVhdGluZyB0aGlzIGNvbnRleHQuICovXHJcbiAgICBQYXJzZUNvbnRleHQucHJvdG90eXBlLmNvbnRhaW5zID0gZnVuY3Rpb24gKGZpZWxkUGF0aCkge1xyXG4gICAgICAgIHJldHVybiAodGhpcy5maWVsZE1hc2suZmluZChmdW5jdGlvbiAoZmllbGQpIHsgcmV0dXJuIGZpZWxkUGF0aC5pc1ByZWZpeE9mKGZpZWxkKTsgfSkgIT09IHVuZGVmaW5lZCB8fFxyXG4gICAgICAgICAgICB0aGlzLmZpZWxkVHJhbnNmb3Jtcy5maW5kKGZ1bmN0aW9uICh0cmFuc2Zvcm0pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmaWVsZFBhdGguaXNQcmVmaXhPZih0cmFuc2Zvcm0uZmllbGQpO1xyXG4gICAgICAgICAgICB9KSAhPT0gdW5kZWZpbmVkKTtcclxuICAgIH07XHJcbiAgICBQYXJzZUNvbnRleHQucHJvdG90eXBlLnZhbGlkYXRlUGF0aCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvLyBUT0RPKGIvMzQ4NzExMzEpOiBSZW1vdmUgbnVsbCBjaGVjayBvbmNlIHdlIGhhdmUgcHJvcGVyIHBhdGhzIGZvciBmaWVsZHNcclxuICAgICAgICAvLyB3aXRoaW4gYXJyYXlzLlxyXG4gICAgICAgIGlmICh0aGlzLnBhdGggPT09IG51bGwpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMucGF0aC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB0aGlzLnZhbGlkYXRlUGF0aFNlZ21lbnQodGhpcy5wYXRoLmdldChpKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFBhcnNlQ29udGV4dC5wcm90b3R5cGUudmFsaWRhdGVQYXRoU2VnbWVudCA9IGZ1bmN0aW9uIChzZWdtZW50KSB7XHJcbiAgICAgICAgaWYgKHNlZ21lbnQubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIHRocm93IHRoaXMuY3JlYXRlRXJyb3IoJ0RvY3VtZW50IGZpZWxkcyBtdXN0IG5vdCBiZSBlbXB0eScpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoaXNXcml0ZSh0aGlzLmRhdGFTb3VyY2UpICYmIFJFU0VSVkVEX0ZJRUxEX1JFR0VYLnRlc3Qoc2VnbWVudCkpIHtcclxuICAgICAgICAgICAgdGhyb3cgdGhpcy5jcmVhdGVFcnJvcignRG9jdW1lbnQgZmllbGRzIGNhbm5vdCBiZWdpbiBhbmQgZW5kIHdpdGggXCJfX1wiJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHJldHVybiBQYXJzZUNvbnRleHQ7XHJcbn0oKSk7XHJcbi8qKlxyXG4gKiBBIHBsYWNlaG9sZGVyIG9iamVjdCBmb3IgRG9jdW1lbnRSZWZlcmVuY2VzIGluIHRoaXMgZmlsZSwgaW4gb3JkZXIgdG9cclxuICogYXZvaWQgYSBjaXJjdWxhciBkZXBlbmRlbmN5LiBTZWUgdGhlIGNvbW1lbnRzIGZvciBgRGF0YVByZUNvbnZlcnRlcmAgZm9yXHJcbiAqIHRoZSBmdWxsIGNvbnRleHQuXHJcbiAqL1xyXG52YXIgRG9jdW1lbnRLZXlSZWZlcmVuY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBEb2N1bWVudEtleVJlZmVyZW5jZShkYXRhYmFzZUlkLCBrZXkpIHtcclxuICAgICAgICB0aGlzLmRhdGFiYXNlSWQgPSBkYXRhYmFzZUlkO1xyXG4gICAgICAgIHRoaXMua2V5ID0ga2V5O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIERvY3VtZW50S2V5UmVmZXJlbmNlO1xyXG59KCkpO1xyXG4vKipcclxuICogSGVscGVyIGZvciBwYXJzaW5nIHJhdyB1c2VyIGlucHV0IChwcm92aWRlZCB2aWEgdGhlIEFQSSkgaW50byBpbnRlcm5hbCBtb2RlbFxyXG4gKiBjbGFzc2VzLlxyXG4gKi9cclxudmFyIFVzZXJEYXRhQ29udmVydGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gVXNlckRhdGFDb252ZXJ0ZXIocHJlQ29udmVydGVyKSB7XHJcbiAgICAgICAgdGhpcy5wcmVDb252ZXJ0ZXIgPSBwcmVDb252ZXJ0ZXI7XHJcbiAgICB9XHJcbiAgICAvKiogUGFyc2UgZG9jdW1lbnQgZGF0YSBmcm9tIGEgbm9uLW1lcmdlIHNldCgpIGNhbGwuICovXHJcbiAgICBVc2VyRGF0YUNvbnZlcnRlci5wcm90b3R5cGUucGFyc2VTZXREYXRhID0gZnVuY3Rpb24gKG1ldGhvZE5hbWUsIGlucHV0KSB7XHJcbiAgICAgICAgdmFyIGNvbnRleHQgPSBuZXcgUGFyc2VDb250ZXh0KFVzZXJEYXRhU291cmNlLlNldCwgbWV0aG9kTmFtZSwgRmllbGRQYXRoLkVNUFRZX1BBVEgpO1xyXG4gICAgICAgIHZhbGlkYXRlUGxhaW5PYmplY3QoJ0RhdGEgbXVzdCBiZSBhbiBvYmplY3QsIGJ1dCBpdCB3YXM6JywgY29udGV4dCwgaW5wdXQpO1xyXG4gICAgICAgIHZhciB1cGRhdGVEYXRhID0gdGhpcy5wYXJzZURhdGEoaW5wdXQsIGNvbnRleHQpO1xyXG4gICAgICAgIHJldHVybiBuZXcgUGFyc2VkU2V0RGF0YSh1cGRhdGVEYXRhLCBcclxuICAgICAgICAvKiBmaWVsZE1hc2s9ICovIG51bGwsIGNvbnRleHQuZmllbGRUcmFuc2Zvcm1zKTtcclxuICAgIH07XHJcbiAgICAvKiogUGFyc2UgZG9jdW1lbnQgZGF0YSBmcm9tIGEgc2V0KCkgY2FsbCB3aXRoICd7bWVyZ2U6dHJ1ZX0nLiAqL1xyXG4gICAgVXNlckRhdGFDb252ZXJ0ZXIucHJvdG90eXBlLnBhcnNlTWVyZ2VEYXRhID0gZnVuY3Rpb24gKG1ldGhvZE5hbWUsIGlucHV0LCBmaWVsZFBhdGhzKSB7XHJcbiAgICAgICAgdmFyIGNvbnRleHQgPSBuZXcgUGFyc2VDb250ZXh0KFVzZXJEYXRhU291cmNlLk1lcmdlU2V0LCBtZXRob2ROYW1lLCBGaWVsZFBhdGguRU1QVFlfUEFUSCk7XHJcbiAgICAgICAgdmFsaWRhdGVQbGFpbk9iamVjdCgnRGF0YSBtdXN0IGJlIGFuIG9iamVjdCwgYnV0IGl0IHdhczonLCBjb250ZXh0LCBpbnB1dCk7XHJcbiAgICAgICAgdmFyIHVwZGF0ZURhdGEgPSB0aGlzLnBhcnNlRGF0YShpbnB1dCwgY29udGV4dCk7XHJcbiAgICAgICAgdmFyIGZpZWxkTWFzaztcclxuICAgICAgICB2YXIgZmllbGRUcmFuc2Zvcm1zO1xyXG4gICAgICAgIGlmICghZmllbGRQYXRocykge1xyXG4gICAgICAgICAgICBmaWVsZE1hc2sgPSBGaWVsZE1hc2suZnJvbUFycmF5KGNvbnRleHQuZmllbGRNYXNrKTtcclxuICAgICAgICAgICAgZmllbGRUcmFuc2Zvcm1zID0gY29udGV4dC5maWVsZFRyYW5zZm9ybXM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB2YXIgdmFsaWRhdGVkRmllbGRQYXRocyA9IG5ldyBTb3J0ZWRTZXQoRmllbGRQYXRoLmNvbXBhcmF0b3IpO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGZpZWxkUGF0aHNfMSA9IGZpZWxkUGF0aHM7IF9pIDwgZmllbGRQYXRoc18xLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIHN0cmluZ09yRmllbGRQYXRoID0gZmllbGRQYXRoc18xW19pXTtcclxuICAgICAgICAgICAgICAgIHZhciBmaWVsZFBhdGggPSB2b2lkIDA7XHJcbiAgICAgICAgICAgICAgICBpZiAoc3RyaW5nT3JGaWVsZFBhdGggaW5zdGFuY2VvZiBGaWVsZFBhdGgkMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZpZWxkUGF0aCA9IHN0cmluZ09yRmllbGRQYXRoLl9pbnRlcm5hbFBhdGg7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmICh0eXBlb2Ygc3RyaW5nT3JGaWVsZFBhdGggPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZmllbGRQYXRoID0gZmllbGRQYXRoRnJvbURvdFNlcGFyYXRlZFN0cmluZyhtZXRob2ROYW1lLCBzdHJpbmdPckZpZWxkUGF0aCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBmYWlsKCdFeHBlY3RlZCBzdHJpbmdPckZpZWxkUGF0aCB0byBiZSBhIHN0cmluZyBvciBhIEZpZWxkUGF0aCcpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKCFjb250ZXh0LmNvbnRhaW5zKGZpZWxkUGF0aCkpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5JTlZBTElEX0FSR1VNRU5ULCBcIkZpZWxkICdcIiArIGZpZWxkUGF0aCArIFwiJyBpcyBzcGVjaWZpZWQgaW4geW91ciBmaWVsZCBtYXNrIGJ1dCBtaXNzaW5nIGZyb20geW91ciBpbnB1dCBkYXRhLlwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHZhbGlkYXRlZEZpZWxkUGF0aHMgPSB2YWxpZGF0ZWRGaWVsZFBhdGhzLmFkZChmaWVsZFBhdGgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGZpZWxkTWFzayA9IEZpZWxkTWFzay5mcm9tU2V0KHZhbGlkYXRlZEZpZWxkUGF0aHMpO1xyXG4gICAgICAgICAgICBmaWVsZFRyYW5zZm9ybXMgPSBjb250ZXh0LmZpZWxkVHJhbnNmb3Jtcy5maWx0ZXIoZnVuY3Rpb24gKHRyYW5zZm9ybSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZpZWxkTWFzay5jb3ZlcnModHJhbnNmb3JtLmZpZWxkKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBuZXcgUGFyc2VkU2V0RGF0YSh1cGRhdGVEYXRhLCBmaWVsZE1hc2ssIGZpZWxkVHJhbnNmb3Jtcyk7XHJcbiAgICB9O1xyXG4gICAgLyoqIFBhcnNlIHVwZGF0ZSBkYXRhIGZyb20gYW4gdXBkYXRlKCkgY2FsbC4gKi9cclxuICAgIFVzZXJEYXRhQ29udmVydGVyLnByb3RvdHlwZS5wYXJzZVVwZGF0ZURhdGEgPSBmdW5jdGlvbiAobWV0aG9kTmFtZSwgaW5wdXQpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhciBjb250ZXh0ID0gbmV3IFBhcnNlQ29udGV4dChVc2VyRGF0YVNvdXJjZS5VcGRhdGUsIG1ldGhvZE5hbWUsIEZpZWxkUGF0aC5FTVBUWV9QQVRIKTtcclxuICAgICAgICB2YWxpZGF0ZVBsYWluT2JqZWN0KCdEYXRhIG11c3QgYmUgYW4gb2JqZWN0LCBidXQgaXQgd2FzOicsIGNvbnRleHQsIGlucHV0KTtcclxuICAgICAgICB2YXIgZmllbGRNYXNrUGF0aHMgPSBuZXcgU29ydGVkU2V0KEZpZWxkUGF0aC5jb21wYXJhdG9yKTtcclxuICAgICAgICB2YXIgdXBkYXRlRGF0YSA9IE9iamVjdFZhbHVlLkVNUFRZO1xyXG4gICAgICAgIGZvckVhY2goaW5wdXQsIGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XHJcbiAgICAgICAgICAgIHZhciBwYXRoID0gZmllbGRQYXRoRnJvbURvdFNlcGFyYXRlZFN0cmluZyhtZXRob2ROYW1lLCBrZXkpO1xyXG4gICAgICAgICAgICB2YXIgY2hpbGRDb250ZXh0ID0gY29udGV4dC5jaGlsZENvbnRleHRGb3JGaWVsZFBhdGgocGF0aCk7XHJcbiAgICAgICAgICAgIHZhbHVlID0gX3RoaXMucnVuUHJlQ29udmVydGVyKHZhbHVlLCBjaGlsZENvbnRleHQpO1xyXG4gICAgICAgICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBEZWxldGVGaWVsZFZhbHVlSW1wbCkge1xyXG4gICAgICAgICAgICAgICAgLy8gQWRkIGl0IHRvIHRoZSBmaWVsZCBtYXNrLCBidXQgZG9uJ3QgYWRkIGFueXRoaW5nIHRvIHVwZGF0ZURhdGEuXHJcbiAgICAgICAgICAgICAgICBmaWVsZE1hc2tQYXRocyA9IGZpZWxkTWFza1BhdGhzLmFkZChwYXRoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHZhciBwYXJzZWRWYWx1ZSA9IF90aGlzLnBhcnNlRGF0YSh2YWx1ZSwgY2hpbGRDb250ZXh0KTtcclxuICAgICAgICAgICAgICAgIGlmIChwYXJzZWRWYWx1ZSAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZmllbGRNYXNrUGF0aHMgPSBmaWVsZE1hc2tQYXRocy5hZGQocGF0aCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlRGF0YSA9IHVwZGF0ZURhdGEuc2V0KHBhdGgsIHBhcnNlZFZhbHVlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHZhciBtYXNrID0gRmllbGRNYXNrLmZyb21TZXQoZmllbGRNYXNrUGF0aHMpO1xyXG4gICAgICAgIHJldHVybiBuZXcgUGFyc2VkVXBkYXRlRGF0YSh1cGRhdGVEYXRhLCBtYXNrLCBjb250ZXh0LmZpZWxkVHJhbnNmb3Jtcyk7XHJcbiAgICB9O1xyXG4gICAgLyoqIFBhcnNlIHVwZGF0ZSBkYXRhIGZyb20gYSBsaXN0IG9mIGZpZWxkL3ZhbHVlIGFyZ3VtZW50cy4gKi9cclxuICAgIFVzZXJEYXRhQ29udmVydGVyLnByb3RvdHlwZS5wYXJzZVVwZGF0ZVZhcmFyZ3MgPSBmdW5jdGlvbiAobWV0aG9kTmFtZSwgZmllbGQsIHZhbHVlLCBtb3JlRmllbGRzQW5kVmFsdWVzKSB7XHJcbiAgICAgICAgdmFyIGNvbnRleHQgPSBuZXcgUGFyc2VDb250ZXh0KFVzZXJEYXRhU291cmNlLlVwZGF0ZSwgbWV0aG9kTmFtZSwgRmllbGRQYXRoLkVNUFRZX1BBVEgpO1xyXG4gICAgICAgIHZhciBrZXlzID0gW2ZpZWxkUGF0aEZyb21Bcmd1bWVudChtZXRob2ROYW1lLCBmaWVsZCldO1xyXG4gICAgICAgIHZhciB2YWx1ZXMgPSBbdmFsdWVdO1xyXG4gICAgICAgIGlmIChtb3JlRmllbGRzQW5kVmFsdWVzLmxlbmd0aCAlIDIgIT09IDApIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuSU5WQUxJRF9BUkdVTUVOVCwgXCJGdW5jdGlvbiBcIiArIG1ldGhvZE5hbWUgKyBcIigpIG5lZWRzIHRvIGJlIGNhbGxlZCB3aXRoIGFuIGV2ZW4gbnVtYmVyIFwiICtcclxuICAgICAgICAgICAgICAgICdvZiBhcmd1bWVudHMgdGhhdCBhbHRlcm5hdGUgYmV0d2VlbiBmaWVsZCBuYW1lcyBhbmQgdmFsdWVzLicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1vcmVGaWVsZHNBbmRWYWx1ZXMubGVuZ3RoOyBpICs9IDIpIHtcclxuICAgICAgICAgICAga2V5cy5wdXNoKGZpZWxkUGF0aEZyb21Bcmd1bWVudChtZXRob2ROYW1lLCBtb3JlRmllbGRzQW5kVmFsdWVzW2ldKSk7XHJcbiAgICAgICAgICAgIHZhbHVlcy5wdXNoKG1vcmVGaWVsZHNBbmRWYWx1ZXNbaSArIDFdKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGZpZWxkTWFza1BhdGhzID0gbmV3IFNvcnRlZFNldChGaWVsZFBhdGguY29tcGFyYXRvcik7XHJcbiAgICAgICAgdmFyIHVwZGF0ZURhdGEgPSBPYmplY3RWYWx1ZS5FTVBUWTtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpIHtcclxuICAgICAgICAgICAgdmFyIHBhdGggPSBrZXlzW2ldO1xyXG4gICAgICAgICAgICB2YXIgY2hpbGRDb250ZXh0ID0gY29udGV4dC5jaGlsZENvbnRleHRGb3JGaWVsZFBhdGgocGF0aCk7XHJcbiAgICAgICAgICAgIHZhciB2YWx1ZV8xID0gdGhpcy5ydW5QcmVDb252ZXJ0ZXIodmFsdWVzW2ldLCBjaGlsZENvbnRleHQpO1xyXG4gICAgICAgICAgICBpZiAodmFsdWVfMSBpbnN0YW5jZW9mIERlbGV0ZUZpZWxkVmFsdWVJbXBsKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBBZGQgaXQgdG8gdGhlIGZpZWxkIG1hc2ssIGJ1dCBkb24ndCBhZGQgYW55dGhpbmcgdG8gdXBkYXRlRGF0YS5cclxuICAgICAgICAgICAgICAgIGZpZWxkTWFza1BhdGhzID0gZmllbGRNYXNrUGF0aHMuYWRkKHBhdGgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdmFyIHBhcnNlZFZhbHVlID0gdGhpcy5wYXJzZURhdGEodmFsdWVfMSwgY2hpbGRDb250ZXh0KTtcclxuICAgICAgICAgICAgICAgIGlmIChwYXJzZWRWYWx1ZSAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZmllbGRNYXNrUGF0aHMgPSBmaWVsZE1hc2tQYXRocy5hZGQocGF0aCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlRGF0YSA9IHVwZGF0ZURhdGEuc2V0KHBhdGgsIHBhcnNlZFZhbHVlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgbWFzayA9IEZpZWxkTWFzay5mcm9tU2V0KGZpZWxkTWFza1BhdGhzKTtcclxuICAgICAgICByZXR1cm4gbmV3IFBhcnNlZFVwZGF0ZURhdGEodXBkYXRlRGF0YSwgbWFzaywgY29udGV4dC5maWVsZFRyYW5zZm9ybXMpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUGFyc2UgYSBcInF1ZXJ5IHZhbHVlXCIgKGUuZy4gdmFsdWUgaW4gYSB3aGVyZSBmaWx0ZXIgb3IgYSB2YWx1ZSBpbiBhIGN1cnNvclxyXG4gICAgICogYm91bmQpLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBhbGxvd0FycmF5cyBXaGV0aGVyIHRoZSBxdWVyeSB2YWx1ZSBpcyBhbiBhcnJheSB0aGF0IG1heSBkaXJlY3RseVxyXG4gICAgICogY29udGFpbiBhZGRpdGlvbmFsIGFycmF5cyAoZS5nLiB0aGUgb3BlcmFuZCBvZiBhbiBgaW5gIHF1ZXJ5KS5cclxuICAgICAqL1xyXG4gICAgVXNlckRhdGFDb252ZXJ0ZXIucHJvdG90eXBlLnBhcnNlUXVlcnlWYWx1ZSA9IGZ1bmN0aW9uIChtZXRob2ROYW1lLCBpbnB1dCwgYWxsb3dBcnJheXMpIHtcclxuICAgICAgICBpZiAoYWxsb3dBcnJheXMgPT09IHZvaWQgMCkgeyBhbGxvd0FycmF5cyA9IGZhbHNlOyB9XHJcbiAgICAgICAgdmFyIGNvbnRleHQgPSBuZXcgUGFyc2VDb250ZXh0KGFsbG93QXJyYXlzID8gVXNlckRhdGFTb3VyY2UuQXJyYXlBcmd1bWVudCA6IFVzZXJEYXRhU291cmNlLkFyZ3VtZW50LCBtZXRob2ROYW1lLCBGaWVsZFBhdGguRU1QVFlfUEFUSCk7XHJcbiAgICAgICAgdmFyIHBhcnNlZCA9IHRoaXMucGFyc2VEYXRhKGlucHV0LCBjb250ZXh0KTtcclxuICAgICAgICBhc3NlcnQocGFyc2VkICE9IG51bGwsICdQYXJzZWQgZGF0YSBzaG91bGQgbm90IGJlIG51bGwuJyk7XHJcbiAgICAgICAgYXNzZXJ0KGNvbnRleHQuZmllbGRUcmFuc2Zvcm1zLmxlbmd0aCA9PT0gMCwgJ0ZpZWxkIHRyYW5zZm9ybXMgc2hvdWxkIGhhdmUgYmVlbiBkaXNhbGxvd2VkLicpO1xyXG4gICAgICAgIHJldHVybiBwYXJzZWQ7XHJcbiAgICB9O1xyXG4gICAgLyoqIFNlbmRzIGRhdGEgdGhyb3VnaCB0aGlzLnByZUNvbnZlcnRlciwgaGFuZGxpbmcgYW55IHRocm93biBlcnJvcnMuICovXHJcbiAgICBVc2VyRGF0YUNvbnZlcnRlci5wcm90b3R5cGUucnVuUHJlQ29udmVydGVyID0gZnVuY3Rpb24gKGlucHV0LCBjb250ZXh0KSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJlQ29udmVydGVyKGlucHV0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgdmFyIG1lc3NhZ2UgPSBlcnJvck1lc3NhZ2UoZSk7XHJcbiAgICAgICAgICAgIHRocm93IGNvbnRleHQuY3JlYXRlRXJyb3IobWVzc2FnZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogSW50ZXJuYWwgaGVscGVyIGZvciBwYXJzaW5nIHVzZXIgZGF0YS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gaW5wdXQgRGF0YSB0byBiZSBwYXJzZWQuXHJcbiAgICAgKiBAcGFyYW0gY29udGV4dCBBIGNvbnRleHQgb2JqZWN0IHJlcHJlc2VudGluZyB0aGUgY3VycmVudCBwYXRoIGJlaW5nIHBhcnNlZCxcclxuICAgICAqIHRoZSBzb3VyY2Ugb2YgdGhlIGRhdGEgYmVpbmcgcGFyc2VkLCBldGMuXHJcbiAgICAgKiBAcmV0dXJuIFRoZSBwYXJzZWQgdmFsdWUsIG9yIG51bGwgaWYgdGhlIHZhbHVlIHdhcyBhIEZpZWxkVmFsdWUgc2VudGluZWxcclxuICAgICAqIHRoYXQgc2hvdWxkIG5vdCBiZSBpbmNsdWRlZCBpbiB0aGUgcmVzdWx0aW5nIHBhcnNlZCBkYXRhLlxyXG4gICAgICovXHJcbiAgICBVc2VyRGF0YUNvbnZlcnRlci5wcm90b3R5cGUucGFyc2VEYXRhID0gZnVuY3Rpb24gKGlucHV0LCBjb250ZXh0KSB7XHJcbiAgICAgICAgaW5wdXQgPSB0aGlzLnJ1blByZUNvbnZlcnRlcihpbnB1dCwgY29udGV4dCk7XHJcbiAgICAgICAgaWYgKGxvb2tzTGlrZUpzb25PYmplY3QoaW5wdXQpKSB7XHJcbiAgICAgICAgICAgIHZhbGlkYXRlUGxhaW5PYmplY3QoJ1Vuc3VwcG9ydGVkIGZpZWxkIHZhbHVlOicsIGNvbnRleHQsIGlucHV0KTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VPYmplY3QoaW5wdXQsIGNvbnRleHQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChpbnB1dCBpbnN0YW5jZW9mIEZpZWxkVmFsdWVJbXBsKSB7XHJcbiAgICAgICAgICAgIC8vIEZpZWxkVmFsdWVzIHVzdWFsbHkgcGFyc2UgaW50byB0cmFuc2Zvcm1zIChleGNlcHQgRmllbGRWYWx1ZS5kZWxldGUoKSlcclxuICAgICAgICAgICAgLy8gaW4gd2hpY2ggY2FzZSB3ZSBkbyBub3Qgd2FudCB0byBpbmNsdWRlIHRoaXMgZmllbGQgaW4gb3VyIHBhcnNlZCBkYXRhXHJcbiAgICAgICAgICAgIC8vIChhcyBkb2luZyBzbyB3aWxsIG92ZXJ3cml0ZSB0aGUgZmllbGQgZGlyZWN0bHkgcHJpb3IgdG8gdGhlIHRyYW5zZm9ybVxyXG4gICAgICAgICAgICAvLyB0cnlpbmcgdG8gdHJhbnNmb3JtIGl0KS4gU28gd2UgZG9uJ3QgYWRkIHRoaXMgbG9jYXRpb24gdG9cclxuICAgICAgICAgICAgLy8gY29udGV4dC5maWVsZE1hc2sgYW5kIHdlIHJldHVybiBudWxsIGFzIG91ciBwYXJzaW5nIHJlc3VsdC5cclxuICAgICAgICAgICAgdGhpcy5wYXJzZVNlbnRpbmVsRmllbGRWYWx1ZShpbnB1dCwgY29udGV4dCk7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gSWYgY29udGV4dC5wYXRoIGlzIG51bGwgd2UgYXJlIGluc2lkZSBhbiBhcnJheSBhbmQgd2UgZG9uJ3Qgc3VwcG9ydFxyXG4gICAgICAgICAgICAvLyBmaWVsZCBtYXNrIHBhdGhzIG1vcmUgZ3JhbnVsYXIgdGhhbiB0aGUgdG9wLWxldmVsIGFycmF5LlxyXG4gICAgICAgICAgICBpZiAoY29udGV4dC5wYXRoKSB7XHJcbiAgICAgICAgICAgICAgICBjb250ZXh0LmZpZWxkTWFzay5wdXNoKGNvbnRleHQucGF0aCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGlucHV0IGluc3RhbmNlb2YgQXJyYXkpIHtcclxuICAgICAgICAgICAgICAgIC8vIFRPRE8oYi8zNDg3MTEzMSk6IEluY2x1ZGUgdGhlIHBhdGggY29udGFpbmluZyB0aGUgYXJyYXkgaW4gdGhlIGVycm9yXHJcbiAgICAgICAgICAgICAgICAvLyBtZXNzYWdlLlxyXG4gICAgICAgICAgICAgICAgLy8gSW4gdGhlIGNhc2Ugb2YgSU4gcXVlcmllcywgdGhlIHBhcnNlZCBkYXRhIGlzIGFuIGFycmF5IChyZXByZXNlbnRpbmdcclxuICAgICAgICAgICAgICAgIC8vIHRoZSBzZXQgb2YgdmFsdWVzIHRvIGJlIGluY2x1ZGVkIGZvciB0aGUgSU4gcXVlcnkpIHRoYXQgbWF5IGRpcmVjdGx5XHJcbiAgICAgICAgICAgICAgICAvLyBjb250YWluIGFkZGl0aW9uYWwgYXJyYXlzIChlYWNoIHJlcHJlc2VudGluZyBhbiBpbmRpdmlkdWFsIGZpZWxkXHJcbiAgICAgICAgICAgICAgICAvLyB2YWx1ZSksIHNvIHdlIGRpc2FibGUgdGhpcyB2YWxpZGF0aW9uLlxyXG4gICAgICAgICAgICAgICAgaWYgKGNvbnRleHQuYXJyYXlFbGVtZW50ICYmXHJcbiAgICAgICAgICAgICAgICAgICAgY29udGV4dC5kYXRhU291cmNlICE9PSBVc2VyRGF0YVNvdXJjZS5BcnJheUFyZ3VtZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgY29udGV4dC5jcmVhdGVFcnJvcignTmVzdGVkIGFycmF5cyBhcmUgbm90IHN1cHBvcnRlZCcpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VBcnJheShpbnB1dCwgY29udGV4dCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5wYXJzZVNjYWxhclZhbHVlKGlucHV0LCBjb250ZXh0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBVc2VyRGF0YUNvbnZlcnRlci5wcm90b3R5cGUucGFyc2VPYmplY3QgPSBmdW5jdGlvbiAob2JqLCBjb250ZXh0KSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IFNvcnRlZE1hcChwcmltaXRpdmVDb21wYXJhdG9yKTtcclxuICAgICAgICBpZiAoaXNFbXB0eShvYmopKSB7XHJcbiAgICAgICAgICAgIC8vIElmIHdlIGVuY291bnRlciBhbiBlbXB0eSBvYmplY3QsIHdlIGV4cGxpY2l0bHkgYWRkIGl0IHRvIHRoZSB1cGRhdGVcclxuICAgICAgICAgICAgLy8gbWFzayB0byBlbnN1cmUgdGhhdCB0aGUgc2VydmVyIGNyZWF0ZXMgYSBtYXAgZW50cnkuXHJcbiAgICAgICAgICAgIGlmIChjb250ZXh0LnBhdGggJiYgY29udGV4dC5wYXRoLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIGNvbnRleHQuZmllbGRNYXNrLnB1c2goY29udGV4dC5wYXRoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgZm9yRWFjaChvYmosIGZ1bmN0aW9uIChrZXksIHZhbCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHBhcnNlZFZhbHVlID0gX3RoaXMucGFyc2VEYXRhKHZhbCwgY29udGV4dC5jaGlsZENvbnRleHRGb3JGaWVsZChrZXkpKTtcclxuICAgICAgICAgICAgICAgIGlmIChwYXJzZWRWYWx1ZSAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gcmVzdWx0Lmluc2VydChrZXksIHBhcnNlZFZhbHVlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBuZXcgT2JqZWN0VmFsdWUocmVzdWx0KTtcclxuICAgIH07XHJcbiAgICBVc2VyRGF0YUNvbnZlcnRlci5wcm90b3R5cGUucGFyc2VBcnJheSA9IGZ1bmN0aW9uIChhcnJheSwgY29udGV4dCkge1xyXG4gICAgICAgIHZhciByZXN1bHQgPSBbXTtcclxuICAgICAgICB2YXIgZW50cnlJbmRleCA9IDA7XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBhcnJheV8xID0gYXJyYXk7IF9pIDwgYXJyYXlfMS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgdmFyIGVudHJ5ID0gYXJyYXlfMVtfaV07XHJcbiAgICAgICAgICAgIHZhciBwYXJzZWRFbnRyeSA9IHRoaXMucGFyc2VEYXRhKGVudHJ5LCBjb250ZXh0LmNoaWxkQ29udGV4dEZvckFycmF5KGVudHJ5SW5kZXgpKTtcclxuICAgICAgICAgICAgaWYgKHBhcnNlZEVudHJ5ID09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIC8vIEp1c3QgaW5jbHVkZSBudWxscyBpbiB0aGUgYXJyYXkgZm9yIGZpZWxkcyBiZWluZyByZXBsYWNlZCB3aXRoIGFcclxuICAgICAgICAgICAgICAgIC8vIHNlbnRpbmVsLlxyXG4gICAgICAgICAgICAgICAgcGFyc2VkRW50cnkgPSBOdWxsVmFsdWUuSU5TVEFOQ0U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmVzdWx0LnB1c2gocGFyc2VkRW50cnkpO1xyXG4gICAgICAgICAgICBlbnRyeUluZGV4Kys7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBuZXcgQXJyYXlWYWx1ZShyZXN1bHQpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogXCJQYXJzZXNcIiB0aGUgcHJvdmlkZWQgRmllbGRWYWx1ZUltcGwsIGFkZGluZyBhbnkgbmVjZXNzYXJ5IHRyYW5zZm9ybXMgdG9cclxuICAgICAqIGNvbnRleHQuZmllbGRUcmFuc2Zvcm1zLlxyXG4gICAgICovXHJcbiAgICBVc2VyRGF0YUNvbnZlcnRlci5wcm90b3R5cGUucGFyc2VTZW50aW5lbEZpZWxkVmFsdWUgPSBmdW5jdGlvbiAodmFsdWUsIGNvbnRleHQpIHtcclxuICAgICAgICAvLyBTZW50aW5lbHMgYXJlIG9ubHkgc3VwcG9ydGVkIHdpdGggd3JpdGVzLCBhbmQgbm90IHdpdGhpbiBhcnJheXMuXHJcbiAgICAgICAgaWYgKCFpc1dyaXRlKGNvbnRleHQuZGF0YVNvdXJjZSkpIHtcclxuICAgICAgICAgICAgdGhyb3cgY29udGV4dC5jcmVhdGVFcnJvcih2YWx1ZS5fbWV0aG9kTmFtZSArIFwiKCkgY2FuIG9ubHkgYmUgdXNlZCB3aXRoIHVwZGF0ZSgpIGFuZCBzZXQoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGNvbnRleHQucGF0aCA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aHJvdyBjb250ZXh0LmNyZWF0ZUVycm9yKHZhbHVlLl9tZXRob2ROYW1lICsgXCIoKSBpcyBub3QgY3VycmVudGx5IHN1cHBvcnRlZCBpbnNpZGUgYXJyYXlzXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBEZWxldGVGaWVsZFZhbHVlSW1wbCkge1xyXG4gICAgICAgICAgICBpZiAoY29udGV4dC5kYXRhU291cmNlID09PSBVc2VyRGF0YVNvdXJjZS5NZXJnZVNldCkge1xyXG4gICAgICAgICAgICAgICAgLy8gTm8gdHJhbnNmb3JtIHRvIGFkZCBmb3IgYSBkZWxldGUsIGJ1dCB3ZSBuZWVkIHRvIGFkZCBpdCB0byBvdXJcclxuICAgICAgICAgICAgICAgIC8vIGZpZWxkTWFzayBzbyBpdCBnZXRzIGRlbGV0ZWQuXHJcbiAgICAgICAgICAgICAgICBjb250ZXh0LmZpZWxkTWFzay5wdXNoKGNvbnRleHQucGF0aCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoY29udGV4dC5kYXRhU291cmNlID09PSBVc2VyRGF0YVNvdXJjZS5VcGRhdGUpIHtcclxuICAgICAgICAgICAgICAgIGFzc2VydChjb250ZXh0LnBhdGgubGVuZ3RoID4gMCwgJ0ZpZWxkVmFsdWUuZGVsZXRlKCkgYXQgdGhlIHRvcCBsZXZlbCBzaG91bGQgaGF2ZSBhbHJlYWR5JyArXHJcbiAgICAgICAgICAgICAgICAgICAgJyBiZWVuIGhhbmRsZWQuJyk7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBjb250ZXh0LmNyZWF0ZUVycm9yKCdGaWVsZFZhbHVlLmRlbGV0ZSgpIGNhbiBvbmx5IGFwcGVhciBhdCB0aGUgdG9wIGxldmVsICcgK1xyXG4gICAgICAgICAgICAgICAgICAgICdvZiB5b3VyIHVwZGF0ZSBkYXRhJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBXZSBzaG91bGRuJ3QgZW5jb3VudGVyIGRlbGV0ZSBzZW50aW5lbHMgZm9yIHF1ZXJpZXMgb3Igbm9uLW1lcmdlIHNldCgpIGNhbGxzLlxyXG4gICAgICAgICAgICAgICAgdGhyb3cgY29udGV4dC5jcmVhdGVFcnJvcignRmllbGRWYWx1ZS5kZWxldGUoKSBjYW5ub3QgYmUgdXNlZCB3aXRoIHNldCgpIHVubGVzcyB5b3UgcGFzcyAnICtcclxuICAgICAgICAgICAgICAgICAgICAne21lcmdlOnRydWV9Jyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodmFsdWUgaW5zdGFuY2VvZiBTZXJ2ZXJUaW1lc3RhbXBGaWVsZFZhbHVlSW1wbCkge1xyXG4gICAgICAgICAgICBjb250ZXh0LmZpZWxkVHJhbnNmb3Jtcy5wdXNoKG5ldyBGaWVsZFRyYW5zZm9ybShjb250ZXh0LnBhdGgsIFNlcnZlclRpbWVzdGFtcFRyYW5zZm9ybS5pbnN0YW5jZSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh2YWx1ZSBpbnN0YW5jZW9mIEFycmF5VW5pb25GaWVsZFZhbHVlSW1wbCkge1xyXG4gICAgICAgICAgICB2YXIgcGFyc2VkRWxlbWVudHMgPSB0aGlzLnBhcnNlQXJyYXlUcmFuc2Zvcm1FbGVtZW50cyh2YWx1ZS5fbWV0aG9kTmFtZSwgdmFsdWUuX2VsZW1lbnRzKTtcclxuICAgICAgICAgICAgdmFyIGFycmF5VW5pb24gPSBuZXcgQXJyYXlVbmlvblRyYW5zZm9ybU9wZXJhdGlvbihwYXJzZWRFbGVtZW50cyk7XHJcbiAgICAgICAgICAgIGNvbnRleHQuZmllbGRUcmFuc2Zvcm1zLnB1c2gobmV3IEZpZWxkVHJhbnNmb3JtKGNvbnRleHQucGF0aCwgYXJyYXlVbmlvbikpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh2YWx1ZSBpbnN0YW5jZW9mIEFycmF5UmVtb3ZlRmllbGRWYWx1ZUltcGwpIHtcclxuICAgICAgICAgICAgdmFyIHBhcnNlZEVsZW1lbnRzID0gdGhpcy5wYXJzZUFycmF5VHJhbnNmb3JtRWxlbWVudHModmFsdWUuX21ldGhvZE5hbWUsIHZhbHVlLl9lbGVtZW50cyk7XHJcbiAgICAgICAgICAgIHZhciBhcnJheVJlbW92ZSA9IG5ldyBBcnJheVJlbW92ZVRyYW5zZm9ybU9wZXJhdGlvbihwYXJzZWRFbGVtZW50cyk7XHJcbiAgICAgICAgICAgIGNvbnRleHQuZmllbGRUcmFuc2Zvcm1zLnB1c2gobmV3IEZpZWxkVHJhbnNmb3JtKGNvbnRleHQucGF0aCwgYXJyYXlSZW1vdmUpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodmFsdWUgaW5zdGFuY2VvZiBOdW1lcmljSW5jcmVtZW50RmllbGRWYWx1ZUltcGwpIHtcclxuICAgICAgICAgICAgdmFyIG9wZXJhbmQgPSB0aGlzLnBhcnNlUXVlcnlWYWx1ZSgnRmllbGRWYWx1ZS5pbmNyZW1lbnQnLCB2YWx1ZS5fb3BlcmFuZCk7XHJcbiAgICAgICAgICAgIHZhciBudW1lcmljSW5jcmVtZW50ID0gbmV3IE51bWVyaWNJbmNyZW1lbnRUcmFuc2Zvcm1PcGVyYXRpb24ob3BlcmFuZCk7XHJcbiAgICAgICAgICAgIGNvbnRleHQuZmllbGRUcmFuc2Zvcm1zLnB1c2gobmV3IEZpZWxkVHJhbnNmb3JtKGNvbnRleHQucGF0aCwgbnVtZXJpY0luY3JlbWVudCkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgZmFpbCgnVW5rbm93biBGaWVsZFZhbHVlIHR5cGU6ICcgKyB2YWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogSGVscGVyIHRvIHBhcnNlIGEgc2NhbGFyIHZhbHVlIChpLmUuIG5vdCBhbiBPYmplY3QsIEFycmF5LCBvciBGaWVsZFZhbHVlKVxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm4gVGhlIHBhcnNlZCB2YWx1ZVxyXG4gICAgICovXHJcbiAgICBVc2VyRGF0YUNvbnZlcnRlci5wcm90b3R5cGUucGFyc2VTY2FsYXJWYWx1ZSA9IGZ1bmN0aW9uICh2YWx1ZSwgY29udGV4dCkge1xyXG4gICAgICAgIGlmICh2YWx1ZSA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICByZXR1cm4gTnVsbFZhbHVlLklOU1RBTkNFO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInKSB7XHJcbiAgICAgICAgICAgIGlmIChpc1NhZmVJbnRlZ2VyKHZhbHVlKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBJbnRlZ2VyVmFsdWUodmFsdWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBEb3VibGVWYWx1ZSh2YWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodHlwZW9mIHZhbHVlID09PSAnYm9vbGVhbicpIHtcclxuICAgICAgICAgICAgcmV0dXJuIEJvb2xlYW5WYWx1ZS5vZih2YWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBTdHJpbmdWYWx1ZSh2YWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHZhbHVlIGluc3RhbmNlb2YgRGF0ZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFRpbWVzdGFtcFZhbHVlKFRpbWVzdGFtcC5mcm9tRGF0ZSh2YWx1ZSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh2YWx1ZSBpbnN0YW5jZW9mIFRpbWVzdGFtcCkge1xyXG4gICAgICAgICAgICAvLyBGaXJlc3RvcmUgYmFja2VuZCB0cnVuY2F0ZXMgcHJlY2lzaW9uIGRvd24gdG8gbWljcm9zZWNvbmRzLiBUbyBlbnN1cmVcclxuICAgICAgICAgICAgLy8gb2ZmbGluZSBtb2RlIHdvcmtzIHRoZSBzYW1lIHdpdGggcmVnYXJkcyB0byB0cnVuY2F0aW9uLCBwZXJmb3JtIHRoZVxyXG4gICAgICAgICAgICAvLyB0cnVuY2F0aW9uIGltbWVkaWF0ZWx5IHdpdGhvdXQgd2FpdGluZyBmb3IgdGhlIGJhY2tlbmQgdG8gZG8gdGhhdC5cclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBUaW1lc3RhbXBWYWx1ZShuZXcgVGltZXN0YW1wKHZhbHVlLnNlY29uZHMsIE1hdGguZmxvb3IodmFsdWUubmFub3NlY29uZHMgLyAxMDAwKSAqIDEwMDApKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodmFsdWUgaW5zdGFuY2VvZiBHZW9Qb2ludCkge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEdlb1BvaW50VmFsdWUodmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh2YWx1ZSBpbnN0YW5jZW9mIEJsb2IpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBCbG9iVmFsdWUodmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh2YWx1ZSBpbnN0YW5jZW9mIERvY3VtZW50S2V5UmVmZXJlbmNlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgUmVmVmFsdWUodmFsdWUuZGF0YWJhc2VJZCwgdmFsdWUua2V5KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRocm93IGNvbnRleHQuY3JlYXRlRXJyb3IoXCJVbnN1cHBvcnRlZCBmaWVsZCB2YWx1ZTogXCIgKyB2YWx1ZURlc2NyaXB0aW9uKHZhbHVlKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFVzZXJEYXRhQ29udmVydGVyLnByb3RvdHlwZS5wYXJzZUFycmF5VHJhbnNmb3JtRWxlbWVudHMgPSBmdW5jdGlvbiAobWV0aG9kTmFtZSwgZWxlbWVudHMpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiBlbGVtZW50cy5tYXAoZnVuY3Rpb24gKGVsZW1lbnQsIGkpIHtcclxuICAgICAgICAgICAgLy8gQWx0aG91Z2ggYXJyYXkgdHJhbnNmb3JtcyBhcmUgdXNlZCB3aXRoIHdyaXRlcywgdGhlIGFjdHVhbCBlbGVtZW50c1xyXG4gICAgICAgICAgICAvLyBiZWluZyB1bmlvbmVkIG9yIHJlbW92ZWQgYXJlIG5vdCBjb25zaWRlcmVkIHdyaXRlcyBzaW5jZSB0aGV5IGNhbm5vdFxyXG4gICAgICAgICAgICAvLyBjb250YWluIGFueSBGaWVsZFZhbHVlIHNlbnRpbmVscywgZXRjLlxyXG4gICAgICAgICAgICB2YXIgY29udGV4dCA9IG5ldyBQYXJzZUNvbnRleHQoVXNlckRhdGFTb3VyY2UuQXJndW1lbnQsIG1ldGhvZE5hbWUsIEZpZWxkUGF0aC5FTVBUWV9QQVRIKTtcclxuICAgICAgICAgICAgcmV0dXJuIF90aGlzLnBhcnNlRGF0YShlbGVtZW50LCBjb250ZXh0LmNoaWxkQ29udGV4dEZvckFycmF5KGkpKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gVXNlckRhdGFDb252ZXJ0ZXI7XHJcbn0oKSk7XHJcbi8qKlxyXG4gKiBDaGVja3Mgd2hldGhlciBhbiBvYmplY3QgbG9va3MgbGlrZSBhIEpTT04gb2JqZWN0IHRoYXQgc2hvdWxkIGJlIGNvbnZlcnRlZFxyXG4gKiBpbnRvIGEgc3RydWN0LiBOb3JtYWwgY2xhc3MvcHJvdG90eXBlIGluc3RhbmNlcyBhcmUgY29uc2lkZXJlZCB0byBsb29rIGxpa2VcclxuICogSlNPTiBvYmplY3RzIHNpbmNlIHRoZXkgc2hvdWxkIGJlIGNvbnZlcnRlZCB0byBhIHN0cnVjdCB2YWx1ZS4gQXJyYXlzLCBEYXRlcyxcclxuICogR2VvUG9pbnRzLCBldGMuIGFyZSBub3QgY29uc2lkZXJlZCB0byBsb29rIGxpa2UgSlNPTiBvYmplY3RzIHNpbmNlIHRoZXkgbWFwXHJcbiAqIHRvIHNwZWNpZmljIEZpZWxkVmFsdWUgdHlwZXMgb3RoZXIgdGhhbiBPYmplY3RWYWx1ZS5cclxuICovXHJcbmZ1bmN0aW9uIGxvb2tzTGlrZUpzb25PYmplY3QoaW5wdXQpIHtcclxuICAgIHJldHVybiAodHlwZW9mIGlucHV0ID09PSAnb2JqZWN0JyAmJlxyXG4gICAgICAgIGlucHV0ICE9PSBudWxsICYmXHJcbiAgICAgICAgIShpbnB1dCBpbnN0YW5jZW9mIEFycmF5KSAmJlxyXG4gICAgICAgICEoaW5wdXQgaW5zdGFuY2VvZiBEYXRlKSAmJlxyXG4gICAgICAgICEoaW5wdXQgaW5zdGFuY2VvZiBUaW1lc3RhbXApICYmXHJcbiAgICAgICAgIShpbnB1dCBpbnN0YW5jZW9mIEdlb1BvaW50KSAmJlxyXG4gICAgICAgICEoaW5wdXQgaW5zdGFuY2VvZiBCbG9iKSAmJlxyXG4gICAgICAgICEoaW5wdXQgaW5zdGFuY2VvZiBEb2N1bWVudEtleVJlZmVyZW5jZSkgJiZcclxuICAgICAgICAhKGlucHV0IGluc3RhbmNlb2YgRmllbGRWYWx1ZUltcGwpKTtcclxufVxyXG5mdW5jdGlvbiB2YWxpZGF0ZVBsYWluT2JqZWN0KG1lc3NhZ2UsIGNvbnRleHQsIGlucHV0KSB7XHJcbiAgICBpZiAoIWxvb2tzTGlrZUpzb25PYmplY3QoaW5wdXQpIHx8ICFpc1BsYWluT2JqZWN0KGlucHV0KSkge1xyXG4gICAgICAgIHZhciBkZXNjcmlwdGlvbiA9IHZhbHVlRGVzY3JpcHRpb24oaW5wdXQpO1xyXG4gICAgICAgIGlmIChkZXNjcmlwdGlvbiA9PT0gJ2FuIG9iamVjdCcpIHtcclxuICAgICAgICAgICAgLy8gTWFzc2FnZSB0aGUgZXJyb3IgaWYgaXQgd2FzIGFuIG9iamVjdC5cclxuICAgICAgICAgICAgdGhyb3cgY29udGV4dC5jcmVhdGVFcnJvcihtZXNzYWdlICsgJyBhIGN1c3RvbSBvYmplY3QnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRocm93IGNvbnRleHQuY3JlYXRlRXJyb3IobWVzc2FnZSArICcgJyArIGRlc2NyaXB0aW9uKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIEhlbHBlciB0aGF0IGNhbGxzIGZyb21Eb3RTZXBhcmF0ZWRTdHJpbmcoKSBidXQgd3JhcHMgYW55IGVycm9yIHRocm93bi5cclxuICovXHJcbmZ1bmN0aW9uIGZpZWxkUGF0aEZyb21Bcmd1bWVudChtZXRob2ROYW1lLCBwYXRoKSB7XHJcbiAgICBpZiAocGF0aCBpbnN0YW5jZW9mIEZpZWxkUGF0aCQxKSB7XHJcbiAgICAgICAgcmV0dXJuIHBhdGguX2ludGVybmFsUGF0aDtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKHR5cGVvZiBwYXRoID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgIHJldHVybiBmaWVsZFBhdGhGcm9tRG90U2VwYXJhdGVkU3RyaW5nKG1ldGhvZE5hbWUsIHBhdGgpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgdmFyIG1lc3NhZ2UgPSAnRmllbGQgcGF0aCBhcmd1bWVudHMgbXVzdCBiZSBvZiB0eXBlIHN0cmluZyBvciBGaWVsZFBhdGguJztcclxuICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5JTlZBTElEX0FSR1VNRU5ULCBcIkZ1bmN0aW9uIFwiICsgbWV0aG9kTmFtZSArIFwiKCkgY2FsbGVkIHdpdGggaW52YWxpZCBkYXRhLiBcIiArIG1lc3NhZ2UpO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBXcmFwcyBmcm9tRG90U2VwYXJhdGVkU3RyaW5nIHdpdGggYW4gZXJyb3IgbWVzc2FnZSBhYm91dCB0aGUgbWV0aG9kIHRoYXRcclxuICogd2FzIHRocm93bi5cclxuICogQHBhcmFtIG1ldGhvZE5hbWUgVGhlIHB1YmxpY2x5IHZpc2libGUgbWV0aG9kIG5hbWVcclxuICogQHBhcmFtIHBhdGggVGhlIGRvdC1zZXBhcmF0ZWQgc3RyaW5nIGZvcm0gb2YgYSBmaWVsZCBwYXRoIHdoaWNoIHdpbGwgYmUgc3BsaXRcclxuICogb24gZG90cy5cclxuICovXHJcbmZ1bmN0aW9uIGZpZWxkUGF0aEZyb21Eb3RTZXBhcmF0ZWRTdHJpbmcobWV0aG9kTmFtZSwgcGF0aCkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICByZXR1cm4gZnJvbURvdFNlcGFyYXRlZFN0cmluZyhwYXRoKS5faW50ZXJuYWxQYXRoO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICB2YXIgbWVzc2FnZSA9IGVycm9yTWVzc2FnZShlKTtcclxuICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5JTlZBTElEX0FSR1VNRU5ULCBcIkZ1bmN0aW9uIFwiICsgbWV0aG9kTmFtZSArIFwiKCkgY2FsbGVkIHdpdGggaW52YWxpZCBkYXRhLiBcIiArIG1lc3NhZ2UpO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBFeHRyYWN0cyB0aGUgbWVzc2FnZSBmcm9tIGEgY2F1Z2h0IGV4Y2VwdGlvbiwgd2hpY2ggc2hvdWxkIGJlIGFuIEVycm9yIG9iamVjdFxyXG4gKiB0aG91Z2ggSlMgZG9lc24ndCBndWFyYW50ZWUgdGhhdC5cclxuICovXHJcbmZ1bmN0aW9uIGVycm9yTWVzc2FnZShlcnJvcikge1xyXG4gICAgcmV0dXJuIGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogZXJyb3IudG9TdHJpbmcoKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLy8gc2V0dGluZ3MoKSBkZWZhdWx0czpcclxudmFyIERFRkFVTFRfSE9TVCA9ICdmaXJlc3RvcmUuZ29vZ2xlYXBpcy5jb20nO1xyXG52YXIgREVGQVVMVF9TU0wgPSB0cnVlO1xyXG52YXIgREVGQVVMVF9USU1FU1RBTVBTX0lOX1NOQVBTSE9UUyA9IHRydWU7XHJcbnZhciBERUZBVUxUX0ZPUkNFX0xPTkdfUE9MTElORyA9IGZhbHNlO1xyXG4vKipcclxuICogQ29uc3RhbnQgdXNlZCB0byBpbmRpY2F0ZSB0aGUgTFJVIGdhcmJhZ2UgY29sbGVjdGlvbiBzaG91bGQgYmUgZGlzYWJsZWQuXHJcbiAqIFNldCB0aGlzIHZhbHVlIGFzIHRoZSBgY2FjaGVTaXplQnl0ZXNgIG9uIHRoZSBzZXR0aW5ncyBwYXNzZWQgdG8gdGhlXHJcbiAqIGBGaXJlc3RvcmVgIGluc3RhbmNlLlxyXG4gKi9cclxudmFyIENBQ0hFX1NJWkVfVU5MSU1JVEVEID0gTHJ1UGFyYW1zLkNPTExFQ1RJT05fRElTQUJMRUQ7XHJcbi8vIGVuYWJsZVBlcnNpc3RlbmNlKCkgZGVmYXVsdHM6XHJcbnZhciBERUZBVUxUX1NZTkNIUk9OSVpFX1RBQlMgPSBmYWxzZTtcclxuLyoqXHJcbiAqIEEgY29uY3JldGUgdHlwZSBkZXNjcmliaW5nIGFsbCB0aGUgdmFsdWVzIHRoYXQgY2FuIGJlIGFwcGxpZWQgdmlhIGFcclxuICogdXNlci1zdXBwbGllZCBmaXJlc3RvcmUuU2V0dGluZ3Mgb2JqZWN0LiBUaGlzIGlzIGEgc2VwYXJhdGUgdHlwZSBzbyB0aGF0XHJcbiAqIGRlZmF1bHRzIGNhbiBiZSBzdXBwbGllZCBhbmQgdGhlIHZhbHVlIGNhbiBiZSBjaGVja2VkIGZvciBlcXVhbGl0eS5cclxuICovXHJcbnZhciBGaXJlc3RvcmVTZXR0aW5ncyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEZpcmVzdG9yZVNldHRpbmdzKHNldHRpbmdzKSB7XHJcbiAgICAgICAgaWYgKHNldHRpbmdzLmhvc3QgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBpZiAoc2V0dGluZ3Muc3NsICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLklOVkFMSURfQVJHVU1FTlQsIFwiQ2FuJ3QgcHJvdmlkZSBzc2wgb3B0aW9uIGlmIGhvc3Qgb3B0aW9uIGlzIG5vdCBzZXRcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5ob3N0ID0gREVGQVVMVF9IT1NUO1xyXG4gICAgICAgICAgICB0aGlzLnNzbCA9IERFRkFVTFRfU1NMO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdmFsaWRhdGVOYW1lZFR5cGUoJ3NldHRpbmdzJywgJ25vbi1lbXB0eSBzdHJpbmcnLCAnaG9zdCcsIHNldHRpbmdzLmhvc3QpO1xyXG4gICAgICAgICAgICB0aGlzLmhvc3QgPSBzZXR0aW5ncy5ob3N0O1xyXG4gICAgICAgICAgICB2YWxpZGF0ZU5hbWVkT3B0aW9uYWxUeXBlKCdzZXR0aW5ncycsICdib29sZWFuJywgJ3NzbCcsIHNldHRpbmdzLnNzbCk7XHJcbiAgICAgICAgICAgIHRoaXMuc3NsID0gZGVmYXVsdGVkKHNldHRpbmdzLnNzbCwgREVGQVVMVF9TU0wpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YWxpZGF0ZU9wdGlvbk5hbWVzKCdzZXR0aW5ncycsIHNldHRpbmdzLCBbXHJcbiAgICAgICAgICAgICdob3N0JyxcclxuICAgICAgICAgICAgJ3NzbCcsXHJcbiAgICAgICAgICAgICdjcmVkZW50aWFscycsXHJcbiAgICAgICAgICAgICd0aW1lc3RhbXBzSW5TbmFwc2hvdHMnLFxyXG4gICAgICAgICAgICAnY2FjaGVTaXplQnl0ZXMnLFxyXG4gICAgICAgICAgICAnZXhwZXJpbWVudGFsRm9yY2VMb25nUG9sbGluZydcclxuICAgICAgICBdKTtcclxuICAgICAgICB2YWxpZGF0ZU5hbWVkT3B0aW9uYWxUeXBlKCdzZXR0aW5ncycsICdvYmplY3QnLCAnY3JlZGVudGlhbHMnLCBzZXR0aW5ncy5jcmVkZW50aWFscyk7XHJcbiAgICAgICAgdGhpcy5jcmVkZW50aWFscyA9IHNldHRpbmdzLmNyZWRlbnRpYWxzO1xyXG4gICAgICAgIHZhbGlkYXRlTmFtZWRPcHRpb25hbFR5cGUoJ3NldHRpbmdzJywgJ2Jvb2xlYW4nLCAndGltZXN0YW1wc0luU25hcHNob3RzJywgc2V0dGluZ3MudGltZXN0YW1wc0luU25hcHNob3RzKTtcclxuICAgICAgICAvLyBOb2JvZHkgc2hvdWxkIHNldCB0aW1lc3RhbXBzSW5TbmFwc2hvdHMgYW55bW9yZSwgYnV0IHRoZSBlcnJvciBkZXBlbmRzIG9uXHJcbiAgICAgICAgLy8gd2hldGhlciB0aGV5IHNldCBpdCB0byB0cnVlIG9yIGZhbHNlLi4uXHJcbiAgICAgICAgaWYgKHNldHRpbmdzLnRpbWVzdGFtcHNJblNuYXBzaG90cyA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICBlcnJvcihcIlxcbiAgVGhlIHRpbWVzdGFtcHNJblNuYXBzaG90cyBzZXR0aW5nIG5vdyBkZWZhdWx0cyB0byB0cnVlIGFuZCB5b3Ugbm9cXG4gIGxvbmdlciBuZWVkIHRvIGV4cGxpY2l0bHkgc2V0IGl0LiBJbiBhIGZ1dHVyZSByZWxlYXNlLCB0aGUgc2V0dGluZ1xcbiAgd2lsbCBiZSByZW1vdmVkIGVudGlyZWx5IGFuZCBzbyBpdCBpcyByZWNvbW1lbmRlZCB0aGF0IHlvdSByZW1vdmUgaXRcXG4gIGZyb20geW91ciBmaXJlc3RvcmUuc2V0dGluZ3MoKSBjYWxsIG5vdy5cIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHNldHRpbmdzLnRpbWVzdGFtcHNJblNuYXBzaG90cyA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgZXJyb3IoXCJcXG4gIFRoZSB0aW1lc3RhbXBzSW5TbmFwc2hvdHMgc2V0dGluZyB3aWxsIHNvb24gYmUgcmVtb3ZlZC4gWU9VIE1VU1QgVVBEQVRFXFxuICBZT1VSIENPREUuXFxuXFxuICBUbyBoaWRlIHRoaXMgd2FybmluZywgc3RvcCB1c2luZyB0aGUgdGltZXN0YW1wc0luU25hcHNob3RzIHNldHRpbmcgaW4geW91clxcbiAgZmlyZXN0b3JlLnNldHRpbmdzKHsgLi4uIH0pIGNhbGwuXFxuXFxuICBPbmNlIHlvdSByZW1vdmUgdGhlIHNldHRpbmcsIFRpbWVzdGFtcHMgc3RvcmVkIGluIENsb3VkIEZpcmVzdG9yZSB3aWxsIGJlXFxuICByZWFkIGJhY2sgYXMgRmlyZWJhc2UgVGltZXN0YW1wIG9iamVjdHMgaW5zdGVhZCBvZiBhcyBzeXN0ZW0gRGF0ZSBvYmplY3RzLlxcbiAgU28geW91IHdpbGwgYWxzbyBuZWVkIHRvIHVwZGF0ZSBjb2RlIGV4cGVjdGluZyBhIERhdGUgdG8gaW5zdGVhZCBleHBlY3QgYVxcbiAgVGltZXN0YW1wLiBGb3IgZXhhbXBsZTpcXG5cXG4gIC8vIE9sZDpcXG4gIGNvbnN0IGRhdGUgPSBzbmFwc2hvdC5nZXQoJ2NyZWF0ZWRfYXQnKTtcXG4gIC8vIE5ldzpcXG4gIGNvbnN0IHRpbWVzdGFtcCA9IHNuYXBzaG90LmdldCgnY3JlYXRlZF9hdCcpOyBjb25zdCBkYXRlID1cXG4gIHRpbWVzdGFtcC50b0RhdGUoKTtcXG5cXG4gIFBsZWFzZSBhdWRpdCBhbGwgZXhpc3RpbmcgdXNhZ2VzIG9mIERhdGUgd2hlbiB5b3UgZW5hYmxlIHRoZSBuZXdcXG4gIGJlaGF2aW9yLlwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy50aW1lc3RhbXBzSW5TbmFwc2hvdHMgPSBkZWZhdWx0ZWQoc2V0dGluZ3MudGltZXN0YW1wc0luU25hcHNob3RzLCBERUZBVUxUX1RJTUVTVEFNUFNfSU5fU05BUFNIT1RTKTtcclxuICAgICAgICB2YWxpZGF0ZU5hbWVkT3B0aW9uYWxUeXBlKCdzZXR0aW5ncycsICdudW1iZXInLCAnY2FjaGVTaXplQnl0ZXMnLCBzZXR0aW5ncy5jYWNoZVNpemVCeXRlcyk7XHJcbiAgICAgICAgaWYgKHNldHRpbmdzLmNhY2hlU2l6ZUJ5dGVzID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5jYWNoZVNpemVCeXRlcyA9IExydVBhcmFtcy5ERUZBVUxUX0NBQ0hFX1NJWkVfQllURVM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAoc2V0dGluZ3MuY2FjaGVTaXplQnl0ZXMgIT09IENBQ0hFX1NJWkVfVU5MSU1JVEVEICYmXHJcbiAgICAgICAgICAgICAgICBzZXR0aW5ncy5jYWNoZVNpemVCeXRlcyA8IExydVBhcmFtcy5NSU5JTVVNX0NBQ0hFX1NJWkVfQllURVMpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLklOVkFMSURfQVJHVU1FTlQsIFwiY2FjaGVTaXplQnl0ZXMgbXVzdCBiZSBhdCBsZWFzdCBcIiArIExydVBhcmFtcy5NSU5JTVVNX0NBQ0hFX1NJWkVfQllURVMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jYWNoZVNpemVCeXRlcyA9IHNldHRpbmdzLmNhY2hlU2l6ZUJ5dGVzO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhbGlkYXRlTmFtZWRPcHRpb25hbFR5cGUoJ3NldHRpbmdzJywgJ2Jvb2xlYW4nLCAnZXhwZXJpbWVudGFsRm9yY2VMb25nUG9sbGluZycsIHNldHRpbmdzLmV4cGVyaW1lbnRhbEZvcmNlTG9uZ1BvbGxpbmcpO1xyXG4gICAgICAgIHRoaXMuZm9yY2VMb25nUG9sbGluZyA9XHJcbiAgICAgICAgICAgIHNldHRpbmdzLmV4cGVyaW1lbnRhbEZvcmNlTG9uZ1BvbGxpbmcgPT09IHVuZGVmaW5lZFxyXG4gICAgICAgICAgICAgICAgPyBERUZBVUxUX0ZPUkNFX0xPTkdfUE9MTElOR1xyXG4gICAgICAgICAgICAgICAgOiBzZXR0aW5ncy5leHBlcmltZW50YWxGb3JjZUxvbmdQb2xsaW5nO1xyXG4gICAgfVxyXG4gICAgRmlyZXN0b3JlU2V0dGluZ3MucHJvdG90eXBlLmlzRXF1YWwgPSBmdW5jdGlvbiAob3RoZXIpIHtcclxuICAgICAgICByZXR1cm4gKHRoaXMuaG9zdCA9PT0gb3RoZXIuaG9zdCAmJlxyXG4gICAgICAgICAgICB0aGlzLnNzbCA9PT0gb3RoZXIuc3NsICYmXHJcbiAgICAgICAgICAgIHRoaXMudGltZXN0YW1wc0luU25hcHNob3RzID09PSBvdGhlci50aW1lc3RhbXBzSW5TbmFwc2hvdHMgJiZcclxuICAgICAgICAgICAgdGhpcy5jcmVkZW50aWFscyA9PT0gb3RoZXIuY3JlZGVudGlhbHMgJiZcclxuICAgICAgICAgICAgdGhpcy5jYWNoZVNpemVCeXRlcyA9PT0gb3RoZXIuY2FjaGVTaXplQnl0ZXMgJiZcclxuICAgICAgICAgICAgdGhpcy5mb3JjZUxvbmdQb2xsaW5nID09PSBvdGhlci5mb3JjZUxvbmdQb2xsaW5nKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gRmlyZXN0b3JlU2V0dGluZ3M7XHJcbn0oKSk7XHJcbi8qKlxyXG4gKiBUaGUgcm9vdCByZWZlcmVuY2UgdG8gdGhlIGRhdGFiYXNlLlxyXG4gKi9cclxudmFyIEZpcmVzdG9yZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEZpcmVzdG9yZShkYXRhYmFzZUlkT3JBcHAsIGF1dGhQcm92aWRlcikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5fZmlyZWJhc2VBcHAgPSBudWxsO1xyXG4gICAgICAgIC8vIFB1YmxpYyBmb3IgdXNlIGluIHRlc3RzLlxyXG4gICAgICAgIC8vIFRPRE8obWlrZWxlaGVuKTogVXNlIG1vZHVsYXJpemVkIGluaXRpYWxpemF0aW9uIGluc3RlYWQuXHJcbiAgICAgICAgdGhpcy5fcXVldWUgPSBuZXcgQXN5bmNRdWV1ZSgpO1xyXG4gICAgICAgIHRoaXMuSU5URVJOQUwgPSB7XHJcbiAgICAgICAgICAgIGRlbGV0ZTogZnVuY3Rpb24gKCkgeyByZXR1cm4gdHNsaWIuX19hd2FpdGVyKF90aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRzbGliLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlIGNsaWVudCBtdXN0IGJlIGluaXRhbGl6ZWQgdG8gZW5zdXJlIHRoYXQgYWxsIHN1YnNlcXVlbnQgQVBJIHVzYWdlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0aHJvd3MgYW4gZXhjZXB0aW9uLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbnN1cmVDbGllbnRDb25maWd1cmVkKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLl9maXJlc3RvcmVDbGllbnQudGVybWluYXRlKCldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pOyB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICBpZiAodHlwZW9mIGRhdGFiYXNlSWRPckFwcC5vcHRpb25zID09PSAnb2JqZWN0Jykge1xyXG4gICAgICAgICAgICAvLyBUaGlzIGlzIHZlcnkgbGlrZWx5IGEgRmlyZWJhc2UgYXBwIG9iamVjdFxyXG4gICAgICAgICAgICAvLyBUT0RPKGIvMzQxNzc2MDUpOiBDYW4gd2Ugc29tZWhvdyB1c2UgaW5zdGFuY2VvZj9cclxuICAgICAgICAgICAgdmFyIGFwcCA9IGRhdGFiYXNlSWRPckFwcDtcclxuICAgICAgICAgICAgdGhpcy5fZmlyZWJhc2VBcHAgPSBhcHA7XHJcbiAgICAgICAgICAgIHRoaXMuX2RhdGFiYXNlSWQgPSBGaXJlc3RvcmUuZGF0YWJhc2VJZEZyb21BcHAoYXBwKTtcclxuICAgICAgICAgICAgdGhpcy5fcGVyc2lzdGVuY2VLZXkgPSBhcHAubmFtZTtcclxuICAgICAgICAgICAgdGhpcy5fY3JlZGVudGlhbHMgPSBuZXcgRmlyZWJhc2VDcmVkZW50aWFsc1Byb3ZpZGVyKGF1dGhQcm92aWRlcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB2YXIgZXh0ZXJuYWxfMSA9IGRhdGFiYXNlSWRPckFwcDtcclxuICAgICAgICAgICAgaWYgKCFleHRlcm5hbF8xLnByb2plY3RJZCkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuSU5WQUxJRF9BUkdVTUVOVCwgJ011c3QgcHJvdmlkZSBwcm9qZWN0SWQnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLl9kYXRhYmFzZUlkID0gbmV3IERhdGFiYXNlSWQoZXh0ZXJuYWxfMS5wcm9qZWN0SWQsIGV4dGVybmFsXzEuZGF0YWJhc2UpO1xyXG4gICAgICAgICAgICAvLyBVc2UgYSBkZWZhdWx0IHBlcnNpc3RlbmNlS2V5IHRoYXQgbGluZXMgdXAgd2l0aCBGaXJlYmFzZUFwcC5cclxuICAgICAgICAgICAgdGhpcy5fcGVyc2lzdGVuY2VLZXkgPSAnW0RFRkFVTFRdJztcclxuICAgICAgICAgICAgdGhpcy5fY3JlZGVudGlhbHMgPSBuZXcgRW1wdHlDcmVkZW50aWFsc1Byb3ZpZGVyKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX3NldHRpbmdzID0gbmV3IEZpcmVzdG9yZVNldHRpbmdzKHt9KTtcclxuICAgICAgICB0aGlzLl9kYXRhQ29udmVydGVyID0gdGhpcy5jcmVhdGVEYXRhQ29udmVydGVyKHRoaXMuX2RhdGFiYXNlSWQpO1xyXG4gICAgfVxyXG4gICAgRmlyZXN0b3JlLnByb3RvdHlwZS5zZXR0aW5ncyA9IGZ1bmN0aW9uIChzZXR0aW5nc0xpdGVyYWwpIHtcclxuICAgICAgICB2YWxpZGF0ZUV4YWN0TnVtYmVyT2ZBcmdzKCdGaXJlc3RvcmUuc2V0dGluZ3MnLCBhcmd1bWVudHMsIDEpO1xyXG4gICAgICAgIHZhbGlkYXRlQXJnVHlwZSgnRmlyZXN0b3JlLnNldHRpbmdzJywgJ29iamVjdCcsIDEsIHNldHRpbmdzTGl0ZXJhbCk7XHJcbiAgICAgICAgaWYgKGNvbnRhaW5zKHNldHRpbmdzTGl0ZXJhbCwgJ3BlcnNpc3RlbmNlJykpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuSU5WQUxJRF9BUkdVTUVOVCwgJ1wicGVyc2lzdGVuY2VcIiBpcyBub3cgc3BlY2lmaWVkIHdpdGggYSBzZXBhcmF0ZSBjYWxsIHRvICcgK1xyXG4gICAgICAgICAgICAgICAgJ2ZpcmVzdG9yZS5lbmFibGVQZXJzaXN0ZW5jZSgpLicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgbmV3U2V0dGluZ3MgPSBuZXcgRmlyZXN0b3JlU2V0dGluZ3Moc2V0dGluZ3NMaXRlcmFsKTtcclxuICAgICAgICBpZiAodGhpcy5fZmlyZXN0b3JlQ2xpZW50ICYmICF0aGlzLl9zZXR0aW5ncy5pc0VxdWFsKG5ld1NldHRpbmdzKSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5GQUlMRURfUFJFQ09ORElUSU9OLCAnRmlyZXN0b3JlIGhhcyBhbHJlYWR5IGJlZW4gc3RhcnRlZCBhbmQgaXRzIHNldHRpbmdzIGNhbiBubyBsb25nZXIgJyArXHJcbiAgICAgICAgICAgICAgICAnYmUgY2hhbmdlZC4gWW91IGNhbiBvbmx5IGNhbGwgc2V0dGluZ3MoKSBiZWZvcmUgY2FsbGluZyBhbnkgb3RoZXIgJyArXHJcbiAgICAgICAgICAgICAgICAnbWV0aG9kcyBvbiBhIEZpcmVzdG9yZSBvYmplY3QuJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX3NldHRpbmdzID0gbmV3U2V0dGluZ3M7XHJcbiAgICAgICAgaWYgKG5ld1NldHRpbmdzLmNyZWRlbnRpYWxzICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5fY3JlZGVudGlhbHMgPSBtYWtlQ3JlZGVudGlhbHNQcm92aWRlcihuZXdTZXR0aW5ncy5jcmVkZW50aWFscyk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIEZpcmVzdG9yZS5wcm90b3R5cGUuZW5hYmxlTmV0d29yayA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmVuc3VyZUNsaWVudENvbmZpZ3VyZWQoKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZmlyZXN0b3JlQ2xpZW50LmVuYWJsZU5ldHdvcmsoKTtcclxuICAgIH07XHJcbiAgICBGaXJlc3RvcmUucHJvdG90eXBlLmRpc2FibGVOZXR3b3JrID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuZW5zdXJlQ2xpZW50Q29uZmlndXJlZCgpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9maXJlc3RvcmVDbGllbnQuZGlzYWJsZU5ldHdvcmsoKTtcclxuICAgIH07XHJcbiAgICBGaXJlc3RvcmUucHJvdG90eXBlLmVuYWJsZVBlcnNpc3RlbmNlID0gZnVuY3Rpb24gKHNldHRpbmdzKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2ZpcmVzdG9yZUNsaWVudCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5GQUlMRURfUFJFQ09ORElUSU9OLCAnRmlyZXN0b3JlIGhhcyBhbHJlYWR5IGJlZW4gc3RhcnRlZCBhbmQgcGVyc2lzdGVuY2UgY2FuIG5vIGxvbmdlciAnICtcclxuICAgICAgICAgICAgICAgICdiZSBlbmFibGVkLiBZb3UgY2FuIG9ubHkgY2FsbCBlbmFibGVQZXJzaXN0ZW5jZSgpIGJlZm9yZSBjYWxsaW5nICcgK1xyXG4gICAgICAgICAgICAgICAgJ2FueSBvdGhlciBtZXRob2RzIG9uIGEgRmlyZXN0b3JlIG9iamVjdC4nKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIHN5bmNocm9uaXplVGFicyA9IGZhbHNlO1xyXG4gICAgICAgIGlmIChzZXR0aW5ncykge1xyXG4gICAgICAgICAgICBpZiAoc2V0dGluZ3MuZXhwZXJpbWVudGFsVGFiU3luY2hyb25pemF0aW9uICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIGVycm9yKFwiVGhlICdleHBlcmltZW50YWxUYWJTeW5jaHJvbml6YXRpb24nIHNldHRpbmcgaGFzIGJlZW4gcmVuYW1lZCB0byBcIiArXHJcbiAgICAgICAgICAgICAgICAgICAgXCInc3luY2hyb25pemVUYWJzJy4gSW4gYSBmdXR1cmUgcmVsZWFzZSwgdGhlIHNldHRpbmcgd2lsbCBiZSByZW1vdmVkIFwiICtcclxuICAgICAgICAgICAgICAgICAgICAnYW5kIGl0IGlzIHJlY29tbWVuZGVkIHRoYXQgeW91IHVwZGF0ZSB5b3VyICcgK1xyXG4gICAgICAgICAgICAgICAgICAgIFwiZmlyZXN0b3JlLmVuYWJsZVBlcnNpc3RlbmNlKCkgY2FsbCB0byB1c2UgJ3N5bmNocm9uaXplVGFicycuXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHN5bmNocm9uaXplVGFicyA9IGRlZmF1bHRlZChzZXR0aW5ncy5zeW5jaHJvbml6ZVRhYnMgIT09IHVuZGVmaW5lZFxyXG4gICAgICAgICAgICAgICAgPyBzZXR0aW5ncy5zeW5jaHJvbml6ZVRhYnNcclxuICAgICAgICAgICAgICAgIDogc2V0dGluZ3MuZXhwZXJpbWVudGFsVGFiU3luY2hyb25pemF0aW9uLCBERUZBVUxUX1NZTkNIUk9OSVpFX1RBQlMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5jb25maWd1cmVDbGllbnQobmV3IEluZGV4ZWREYlBlcnNpc3RlbmNlU2V0dGluZ3ModGhpcy5fc2V0dGluZ3MuY2FjaGVTaXplQnl0ZXMsIHN5bmNocm9uaXplVGFicykpO1xyXG4gICAgfTtcclxuICAgIEZpcmVzdG9yZS5wcm90b3R5cGUuY2xlYXJQZXJzaXN0ZW5jZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhciBwZXJzaXN0ZW5jZUtleSA9IEluZGV4ZWREYlBlcnNpc3RlbmNlLmJ1aWxkU3RvcmFnZVByZWZpeCh0aGlzLm1ha2VEYXRhYmFzZUluZm8oKSk7XHJcbiAgICAgICAgdmFyIGRlZmVycmVkID0gbmV3IERlZmVycmVkKCk7XHJcbiAgICAgICAgdGhpcy5fcXVldWUuZW5xdWV1ZUFuZEZvcmdldEV2ZW5BZnRlclNodXRkb3duKGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRzbGliLl9fYXdhaXRlcihfdGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGVfMTtcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2EudHJ5cy5wdXNoKFswLCAyLCAsIDNdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX2ZpcmVzdG9yZUNsaWVudCAhPT0gdW5kZWZpbmVkICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAhdGhpcy5fZmlyZXN0b3JlQ2xpZW50LmNsaWVudFRlcm1pbmF0ZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLkZBSUxFRF9QUkVDT05ESVRJT04sICdQZXJzaXN0ZW5jZSBjYW5ub3QgYmUgY2xlYXJlZCBhZnRlciB0aGlzIEZpcmVzdG9yZSBpbnN0YW5jZSBpcyBpbml0aWFsaXplZC4nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBJbmRleGVkRGJQZXJzaXN0ZW5jZS5jbGVhclBlcnNpc3RlbmNlKHBlcnNpc3RlbmNlS2V5KV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgM107XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlXzEgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlamVjdChlXzEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCAzXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6IHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7IH0pO1xyXG4gICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xyXG4gICAgfTtcclxuICAgIEZpcmVzdG9yZS5wcm90b3R5cGUudGVybWluYXRlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuYXBwLl9yZW1vdmVTZXJ2aWNlSW5zdGFuY2UoJ2ZpcmVzdG9yZScpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLklOVEVSTkFMLmRlbGV0ZSgpO1xyXG4gICAgfTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShGaXJlc3RvcmUucHJvdG90eXBlLCBcIl9pc1Rlcm1pbmF0ZWRcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB0aGlzLmVuc3VyZUNsaWVudENvbmZpZ3VyZWQoKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2ZpcmVzdG9yZUNsaWVudC5jbGllbnRUZXJtaW5hdGVkO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgRmlyZXN0b3JlLnByb3RvdHlwZS53YWl0Rm9yUGVuZGluZ1dyaXRlcyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmVuc3VyZUNsaWVudENvbmZpZ3VyZWQoKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZmlyZXN0b3JlQ2xpZW50LndhaXRGb3JQZW5kaW5nV3JpdGVzKCk7XHJcbiAgICB9O1xyXG4gICAgRmlyZXN0b3JlLnByb3RvdHlwZS5vblNuYXBzaG90c0luU3luYyA9IGZ1bmN0aW9uIChhcmcpIHtcclxuICAgICAgICB0aGlzLmVuc3VyZUNsaWVudENvbmZpZ3VyZWQoKTtcclxuICAgICAgICBpZiAoaXNQYXJ0aWFsT2JzZXJ2ZXIoYXJnKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5vblNuYXBzaG90c0luU3luY0ludGVybmFsKGFyZyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB2YWxpZGF0ZUFyZ1R5cGUoJ0ZpcmVzdG9yZS5vblNuYXBzaG90c0luU3luYycsICdmdW5jdGlvbicsIDEsIGFyZyk7XHJcbiAgICAgICAgICAgIHZhciBvYnNlcnZlciA9IHtcclxuICAgICAgICAgICAgICAgIG5leHQ6IGFyZ1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5vblNuYXBzaG90c0luU3luY0ludGVybmFsKG9ic2VydmVyKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgRmlyZXN0b3JlLnByb3RvdHlwZS5vblNuYXBzaG90c0luU3luY0ludGVybmFsID0gZnVuY3Rpb24gKG9ic2VydmVyKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgZXJySGFuZGxlciA9IGZ1bmN0aW9uIChlcnIpIHtcclxuICAgICAgICAgICAgdGhyb3cgZmFpbCgnVW5jYXVnaHQgRXJyb3IgaW4gb25TbmFwc2hvdHNJblN5bmMnKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHZhciBhc3luY09ic2VydmVyID0gbmV3IEFzeW5jT2JzZXJ2ZXIoe1xyXG4gICAgICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAob2JzZXJ2ZXIubmV4dCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG9ic2VydmVyLm5leHQoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZXJyb3I6IGVyckhhbmRsZXJcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLl9maXJlc3RvcmVDbGllbnQuYWRkU25hcHNob3RzSW5TeW5jTGlzdGVuZXIoYXN5bmNPYnNlcnZlcik7XHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgYXN5bmNPYnNlcnZlci5tdXRlKCk7XHJcbiAgICAgICAgICAgIF90aGlzLl9maXJlc3RvcmVDbGllbnQucmVtb3ZlU25hcHNob3RzSW5TeW5jTGlzdGVuZXIoYXN5bmNPYnNlcnZlcik7XHJcbiAgICAgICAgfTtcclxuICAgIH07XHJcbiAgICBGaXJlc3RvcmUucHJvdG90eXBlLmVuc3VyZUNsaWVudENvbmZpZ3VyZWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLl9maXJlc3RvcmVDbGllbnQpIHtcclxuICAgICAgICAgICAgLy8gS2ljayBvZmYgc3RhcnRpbmcgdGhlIGNsaWVudCBidXQgZG9uJ3QgYWN0dWFsbHkgd2FpdCBmb3IgaXQuXHJcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZmxvYXRpbmctcHJvbWlzZXNcclxuICAgICAgICAgICAgdGhpcy5jb25maWd1cmVDbGllbnQobmV3IE1lbW9yeVBlcnNpc3RlbmNlU2V0dGluZ3MoKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLl9maXJlc3RvcmVDbGllbnQ7XHJcbiAgICB9O1xyXG4gICAgRmlyZXN0b3JlLnByb3RvdHlwZS5tYWtlRGF0YWJhc2VJbmZvID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgRGF0YWJhc2VJbmZvKHRoaXMuX2RhdGFiYXNlSWQsIHRoaXMuX3BlcnNpc3RlbmNlS2V5LCB0aGlzLl9zZXR0aW5ncy5ob3N0LCB0aGlzLl9zZXR0aW5ncy5zc2wsIHRoaXMuX3NldHRpbmdzLmZvcmNlTG9uZ1BvbGxpbmcpO1xyXG4gICAgfTtcclxuICAgIEZpcmVzdG9yZS5wcm90b3R5cGUuY29uZmlndXJlQ2xpZW50ID0gZnVuY3Rpb24gKHBlcnNpc3RlbmNlU2V0dGluZ3MpIHtcclxuICAgICAgICBhc3NlcnQoISF0aGlzLl9zZXR0aW5ncy5ob3N0LCAnRmlyZXN0b3JlU2V0dGluZ3MuaG9zdCBpcyBub3Qgc2V0Jyk7XHJcbiAgICAgICAgYXNzZXJ0KCF0aGlzLl9maXJlc3RvcmVDbGllbnQsICdjb25maWd1cmVDbGllbnQoKSBjYWxsZWQgbXVsdGlwbGUgdGltZXMnKTtcclxuICAgICAgICB2YXIgZGF0YWJhc2VJbmZvID0gdGhpcy5tYWtlRGF0YWJhc2VJbmZvKCk7XHJcbiAgICAgICAgdGhpcy5fZmlyZXN0b3JlQ2xpZW50ID0gbmV3IEZpcmVzdG9yZUNsaWVudChQbGF0Zm9ybVN1cHBvcnQuZ2V0UGxhdGZvcm0oKSwgZGF0YWJhc2VJbmZvLCB0aGlzLl9jcmVkZW50aWFscywgdGhpcy5fcXVldWUpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9maXJlc3RvcmVDbGllbnQuc3RhcnQocGVyc2lzdGVuY2VTZXR0aW5ncyk7XHJcbiAgICB9O1xyXG4gICAgRmlyZXN0b3JlLnByb3RvdHlwZS5jcmVhdGVEYXRhQ29udmVydGVyID0gZnVuY3Rpb24gKGRhdGFiYXNlSWQpIHtcclxuICAgICAgICB2YXIgcHJlQ29udmVydGVyID0gZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgICAgICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIERvY3VtZW50UmVmZXJlbmNlKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdGhpc0RiID0gZGF0YWJhc2VJZDtcclxuICAgICAgICAgICAgICAgIHZhciBvdGhlckRiID0gdmFsdWUuZmlyZXN0b3JlLl9kYXRhYmFzZUlkO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFvdGhlckRiLmlzRXF1YWwodGhpc0RiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLklOVkFMSURfQVJHVU1FTlQsICdEb2N1bWVudCByZWZlcmVuY2UgaXMgZm9yIGRhdGFiYXNlICcgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAob3RoZXJEYi5wcm9qZWN0SWQgKyBcIi9cIiArIG90aGVyRGIuZGF0YWJhc2UgKyBcIiBidXQgc2hvdWxkIGJlIFwiKSArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIChcImZvciBkYXRhYmFzZSBcIiArIHRoaXNEYi5wcm9qZWN0SWQgKyBcIi9cIiArIHRoaXNEYi5kYXRhYmFzZSkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBEb2N1bWVudEtleVJlZmVyZW5jZShkYXRhYmFzZUlkLCB2YWx1ZS5fa2V5KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIG5ldyBVc2VyRGF0YUNvbnZlcnRlcihwcmVDb252ZXJ0ZXIpO1xyXG4gICAgfTtcclxuICAgIEZpcmVzdG9yZS5kYXRhYmFzZUlkRnJvbUFwcCA9IGZ1bmN0aW9uIChhcHApIHtcclxuICAgICAgICB2YXIgb3B0aW9ucyA9IGFwcC5vcHRpb25zO1xyXG4gICAgICAgIGlmICghY29udGFpbnMob3B0aW9ucywgJ3Byb2plY3RJZCcpKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLklOVkFMSURfQVJHVU1FTlQsICdcInByb2plY3RJZFwiIG5vdCBwcm92aWRlZCBpbiBmaXJlYmFzZS5pbml0aWFsaXplQXBwLicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgcHJvamVjdElkID0gb3B0aW9uc1sncHJvamVjdElkJ107XHJcbiAgICAgICAgaWYgKCFwcm9qZWN0SWQgfHwgdHlwZW9mIHByb2plY3RJZCAhPT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuSU5WQUxJRF9BUkdVTUVOVCwgJ3Byb2plY3RJZCBtdXN0IGJlIGEgc3RyaW5nIGluIEZpcmViYXNlQXBwLm9wdGlvbnMnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG5ldyBEYXRhYmFzZUlkKHByb2plY3RJZCk7XHJcbiAgICB9O1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEZpcmVzdG9yZS5wcm90b3R5cGUsIFwiYXBwXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLl9maXJlYmFzZUFwcCkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuRkFJTEVEX1BSRUNPTkRJVElPTiwgXCJGaXJlc3RvcmUgd2FzIG5vdCBpbml0aWFsaXplZCB1c2luZyB0aGUgRmlyZWJhc2UgU0RLLiAnYXBwJyBpcyBcIiArXHJcbiAgICAgICAgICAgICAgICAgICAgJ25vdCBhdmFpbGFibGUnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZmlyZWJhc2VBcHA7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBGaXJlc3RvcmUucHJvdG90eXBlLmNvbGxlY3Rpb24gPSBmdW5jdGlvbiAocGF0aFN0cmluZykge1xyXG4gICAgICAgIHZhbGlkYXRlRXhhY3ROdW1iZXJPZkFyZ3MoJ0ZpcmVzdG9yZS5jb2xsZWN0aW9uJywgYXJndW1lbnRzLCAxKTtcclxuICAgICAgICB2YWxpZGF0ZUFyZ1R5cGUoJ0ZpcmVzdG9yZS5jb2xsZWN0aW9uJywgJ25vbi1lbXB0eSBzdHJpbmcnLCAxLCBwYXRoU3RyaW5nKTtcclxuICAgICAgICB0aGlzLmVuc3VyZUNsaWVudENvbmZpZ3VyZWQoKTtcclxuICAgICAgICByZXR1cm4gbmV3IENvbGxlY3Rpb25SZWZlcmVuY2UoUmVzb3VyY2VQYXRoLmZyb21TdHJpbmcocGF0aFN0cmluZyksIHRoaXMpO1xyXG4gICAgfTtcclxuICAgIEZpcmVzdG9yZS5wcm90b3R5cGUuZG9jID0gZnVuY3Rpb24gKHBhdGhTdHJpbmcpIHtcclxuICAgICAgICB2YWxpZGF0ZUV4YWN0TnVtYmVyT2ZBcmdzKCdGaXJlc3RvcmUuZG9jJywgYXJndW1lbnRzLCAxKTtcclxuICAgICAgICB2YWxpZGF0ZUFyZ1R5cGUoJ0ZpcmVzdG9yZS5kb2MnLCAnbm9uLWVtcHR5IHN0cmluZycsIDEsIHBhdGhTdHJpbmcpO1xyXG4gICAgICAgIHRoaXMuZW5zdXJlQ2xpZW50Q29uZmlndXJlZCgpO1xyXG4gICAgICAgIHJldHVybiBEb2N1bWVudFJlZmVyZW5jZS5mb3JQYXRoKFJlc291cmNlUGF0aC5mcm9tU3RyaW5nKHBhdGhTdHJpbmcpLCB0aGlzKTtcclxuICAgIH07XHJcbiAgICBGaXJlc3RvcmUucHJvdG90eXBlLmNvbGxlY3Rpb25Hcm91cCA9IGZ1bmN0aW9uIChjb2xsZWN0aW9uSWQpIHtcclxuICAgICAgICB2YWxpZGF0ZUV4YWN0TnVtYmVyT2ZBcmdzKCdGaXJlc3RvcmUuY29sbGVjdGlvbkdyb3VwJywgYXJndW1lbnRzLCAxKTtcclxuICAgICAgICB2YWxpZGF0ZUFyZ1R5cGUoJ0ZpcmVzdG9yZS5jb2xsZWN0aW9uR3JvdXAnLCAnbm9uLWVtcHR5IHN0cmluZycsIDEsIGNvbGxlY3Rpb25JZCk7XHJcbiAgICAgICAgaWYgKGNvbGxlY3Rpb25JZC5pbmRleE9mKCcvJykgPj0gMCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5JTlZBTElEX0FSR1VNRU5ULCBcIkludmFsaWQgY29sbGVjdGlvbiBJRCAnXCIgKyBjb2xsZWN0aW9uSWQgKyBcIicgcGFzc2VkIHRvIGZ1bmN0aW9uIFwiICtcclxuICAgICAgICAgICAgICAgIFwiRmlyZXN0b3JlLmNvbGxlY3Rpb25Hcm91cCgpLiBDb2xsZWN0aW9uIElEcyBtdXN0IG5vdCBjb250YWluICcvJy5cIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZW5zdXJlQ2xpZW50Q29uZmlndXJlZCgpO1xyXG4gICAgICAgIHJldHVybiBuZXcgUXVlcnkkMShuZXcgUXVlcnkoUmVzb3VyY2VQYXRoLkVNUFRZX1BBVEgsIGNvbGxlY3Rpb25JZCksIHRoaXMpO1xyXG4gICAgfTtcclxuICAgIEZpcmVzdG9yZS5wcm90b3R5cGUucnVuVHJhbnNhY3Rpb24gPSBmdW5jdGlvbiAodXBkYXRlRnVuY3Rpb24pIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhbGlkYXRlRXhhY3ROdW1iZXJPZkFyZ3MoJ0ZpcmVzdG9yZS5ydW5UcmFuc2FjdGlvbicsIGFyZ3VtZW50cywgMSk7XHJcbiAgICAgICAgdmFsaWRhdGVBcmdUeXBlKCdGaXJlc3RvcmUucnVuVHJhbnNhY3Rpb24nLCAnZnVuY3Rpb24nLCAxLCB1cGRhdGVGdW5jdGlvbik7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5zdXJlQ2xpZW50Q29uZmlndXJlZCgpLnRyYW5zYWN0aW9uKGZ1bmN0aW9uICh0cmFuc2FjdGlvbikge1xyXG4gICAgICAgICAgICByZXR1cm4gdXBkYXRlRnVuY3Rpb24obmV3IFRyYW5zYWN0aW9uJDEoX3RoaXMsIHRyYW5zYWN0aW9uKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgRmlyZXN0b3JlLnByb3RvdHlwZS5iYXRjaCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmVuc3VyZUNsaWVudENvbmZpZ3VyZWQoKTtcclxuICAgICAgICByZXR1cm4gbmV3IFdyaXRlQmF0Y2godGhpcyk7XHJcbiAgICB9O1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEZpcmVzdG9yZSwgXCJsb2dMZXZlbFwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAoZ2V0TG9nTGV2ZWwoKSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSBMb2dMZXZlbC5ERUJVRzpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ2RlYnVnJztcclxuICAgICAgICAgICAgICAgIGNhc2UgTG9nTGV2ZWwuRVJST1I6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdlcnJvcic7XHJcbiAgICAgICAgICAgICAgICBjYXNlIExvZ0xldmVsLlNJTEVOVDpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ3NpbGVudCc7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWlsKCdVbmtub3duIGxvZyBsZXZlbDogJyArIGdldExvZ0xldmVsKCkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBGaXJlc3RvcmUuc2V0TG9nTGV2ZWwgPSBmdW5jdGlvbiAobGV2ZWwpIHtcclxuICAgICAgICB2YWxpZGF0ZUV4YWN0TnVtYmVyT2ZBcmdzKCdGaXJlc3RvcmUuc2V0TG9nTGV2ZWwnLCBhcmd1bWVudHMsIDEpO1xyXG4gICAgICAgIHZhbGlkYXRlQXJnVHlwZSgnRmlyZXN0b3JlLnNldExvZ0xldmVsJywgJ25vbi1lbXB0eSBzdHJpbmcnLCAxLCBsZXZlbCk7XHJcbiAgICAgICAgc3dpdGNoIChsZXZlbCkge1xyXG4gICAgICAgICAgICBjYXNlICdkZWJ1Zyc6XHJcbiAgICAgICAgICAgICAgICBzZXRMb2dMZXZlbChMb2dMZXZlbC5ERUJVRyk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnZXJyb3InOlxyXG4gICAgICAgICAgICAgICAgc2V0TG9nTGV2ZWwoTG9nTGV2ZWwuRVJST1IpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ3NpbGVudCc6XHJcbiAgICAgICAgICAgICAgICBzZXRMb2dMZXZlbChMb2dMZXZlbC5TSUxFTlQpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5JTlZBTElEX0FSR1VNRU5ULCAnSW52YWxpZCBsb2cgbGV2ZWw6ICcgKyBsZXZlbCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8vIE5vdGU6IHRoaXMgaXMgbm90IGEgcHJvcGVydHkgYmVjYXVzZSB0aGUgbWluaWZpZXIgY2FuJ3Qgd29yayBjb3JyZWN0bHkgd2l0aFxyXG4gICAgLy8gdGhlIHdheSBUeXBlU2NyaXB0IGNvbXBpbGVyIG91dHB1dHMgcHJvcGVydGllcy5cclxuICAgIEZpcmVzdG9yZS5wcm90b3R5cGUuX2FyZVRpbWVzdGFtcHNJblNuYXBzaG90c0VuYWJsZWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NldHRpbmdzLnRpbWVzdGFtcHNJblNuYXBzaG90cztcclxuICAgIH07XHJcbiAgICByZXR1cm4gRmlyZXN0b3JlO1xyXG59KCkpO1xyXG4vKipcclxuICogQSByZWZlcmVuY2UgdG8gYSB0cmFuc2FjdGlvbi5cclxuICovXHJcbnZhciBUcmFuc2FjdGlvbiQxID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gVHJhbnNhY3Rpb24oX2ZpcmVzdG9yZSwgX3RyYW5zYWN0aW9uKSB7XHJcbiAgICAgICAgdGhpcy5fZmlyZXN0b3JlID0gX2ZpcmVzdG9yZTtcclxuICAgICAgICB0aGlzLl90cmFuc2FjdGlvbiA9IF90cmFuc2FjdGlvbjtcclxuICAgIH1cclxuICAgIFRyYW5zYWN0aW9uLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoZG9jdW1lbnRSZWYpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhbGlkYXRlRXhhY3ROdW1iZXJPZkFyZ3MoJ1RyYW5zYWN0aW9uLmdldCcsIGFyZ3VtZW50cywgMSk7XHJcbiAgICAgICAgdmFyIHJlZiA9IHZhbGlkYXRlUmVmZXJlbmNlKCdUcmFuc2FjdGlvbi5nZXQnLCBkb2N1bWVudFJlZiwgdGhpcy5fZmlyZXN0b3JlKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fdHJhbnNhY3Rpb25cclxuICAgICAgICAgICAgLmxvb2t1cChbcmVmLl9rZXldKVxyXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoZG9jcykge1xyXG4gICAgICAgICAgICBpZiAoIWRvY3MgfHwgZG9jcy5sZW5ndGggIT09IDEpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWlsKCdNaXNtYXRjaCBpbiBkb2NzIHJldHVybmVkIGZyb20gZG9jdW1lbnQgbG9va3VwLicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciBkb2MgPSBkb2NzWzBdO1xyXG4gICAgICAgICAgICBpZiAoZG9jIGluc3RhbmNlb2YgTm9Eb2N1bWVudCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBEb2N1bWVudFNuYXBzaG90KF90aGlzLl9maXJlc3RvcmUsIHJlZi5fa2V5LCBudWxsLCBcclxuICAgICAgICAgICAgICAgIC8qIGZyb21DYWNoZT0gKi8gZmFsc2UsIFxyXG4gICAgICAgICAgICAgICAgLyogaGFzUGVuZGluZ1dyaXRlcz0gKi8gZmFsc2UsIHJlZi5fY29udmVydGVyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChkb2MgaW5zdGFuY2VvZiBEb2N1bWVudCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBEb2N1bWVudFNuYXBzaG90KF90aGlzLl9maXJlc3RvcmUsIHJlZi5fa2V5LCBkb2MsIFxyXG4gICAgICAgICAgICAgICAgLyogZnJvbUNhY2hlPSAqLyBmYWxzZSwgXHJcbiAgICAgICAgICAgICAgICAvKiBoYXNQZW5kaW5nV3JpdGVzPSAqLyBmYWxzZSwgcmVmLl9jb252ZXJ0ZXIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgZmFpbChcIkJhdGNoR2V0RG9jdW1lbnRzUmVxdWVzdCByZXR1cm5lZCB1bmV4cGVjdGVkIGRvY3VtZW50IHR5cGU6IFwiICsgZG9jLmNvbnN0cnVjdG9yLm5hbWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgVHJhbnNhY3Rpb24ucHJvdG90eXBlLnNldCA9IGZ1bmN0aW9uIChkb2N1bWVudFJlZiwgdmFsdWUsIG9wdGlvbnMpIHtcclxuICAgICAgICB2YWxpZGF0ZUJldHdlZW5OdW1iZXJPZkFyZ3MoJ1RyYW5zYWN0aW9uLnNldCcsIGFyZ3VtZW50cywgMiwgMyk7XHJcbiAgICAgICAgdmFyIHJlZiA9IHZhbGlkYXRlUmVmZXJlbmNlKCdUcmFuc2FjdGlvbi5zZXQnLCBkb2N1bWVudFJlZiwgdGhpcy5fZmlyZXN0b3JlKTtcclxuICAgICAgICBvcHRpb25zID0gdmFsaWRhdGVTZXRPcHRpb25zKCdUcmFuc2FjdGlvbi5zZXQnLCBvcHRpb25zKTtcclxuICAgICAgICB2YXIgX2EgPSBhcHBseUZpcmVzdG9yZURhdGFDb252ZXJ0ZXIocmVmLl9jb252ZXJ0ZXIsIHZhbHVlLCAnVHJhbnNhY3Rpb24uc2V0JyksIGNvbnZlcnRlZFZhbHVlID0gX2FbMF0sIGZ1bmN0aW9uTmFtZSA9IF9hWzFdO1xyXG4gICAgICAgIHZhciBwYXJzZWQgPSBvcHRpb25zLm1lcmdlIHx8IG9wdGlvbnMubWVyZ2VGaWVsZHNcclxuICAgICAgICAgICAgPyB0aGlzLl9maXJlc3RvcmUuX2RhdGFDb252ZXJ0ZXIucGFyc2VNZXJnZURhdGEoZnVuY3Rpb25OYW1lLCBjb252ZXJ0ZWRWYWx1ZSwgb3B0aW9ucy5tZXJnZUZpZWxkcylcclxuICAgICAgICAgICAgOiB0aGlzLl9maXJlc3RvcmUuX2RhdGFDb252ZXJ0ZXIucGFyc2VTZXREYXRhKGZ1bmN0aW9uTmFtZSwgY29udmVydGVkVmFsdWUpO1xyXG4gICAgICAgIHRoaXMuX3RyYW5zYWN0aW9uLnNldChyZWYuX2tleSwgcGFyc2VkKTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH07XHJcbiAgICBUcmFuc2FjdGlvbi5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKGRvY3VtZW50UmVmLCBmaWVsZE9yVXBkYXRlRGF0YSwgdmFsdWUpIHtcclxuICAgICAgICB2YXIgbW9yZUZpZWxkc0FuZFZhbHVlcyA9IFtdO1xyXG4gICAgICAgIGZvciAodmFyIF9pID0gMzsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIG1vcmVGaWVsZHNBbmRWYWx1ZXNbX2kgLSAzXSA9IGFyZ3VtZW50c1tfaV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciByZWY7XHJcbiAgICAgICAgdmFyIHBhcnNlZDtcclxuICAgICAgICBpZiAodHlwZW9mIGZpZWxkT3JVcGRhdGVEYXRhID09PSAnc3RyaW5nJyB8fFxyXG4gICAgICAgICAgICBmaWVsZE9yVXBkYXRlRGF0YSBpbnN0YW5jZW9mIEZpZWxkUGF0aCQxKSB7XHJcbiAgICAgICAgICAgIHZhbGlkYXRlQXRMZWFzdE51bWJlck9mQXJncygnVHJhbnNhY3Rpb24udXBkYXRlJywgYXJndW1lbnRzLCAzKTtcclxuICAgICAgICAgICAgcmVmID0gdmFsaWRhdGVSZWZlcmVuY2UoJ1RyYW5zYWN0aW9uLnVwZGF0ZScsIGRvY3VtZW50UmVmLCB0aGlzLl9maXJlc3RvcmUpO1xyXG4gICAgICAgICAgICBwYXJzZWQgPSB0aGlzLl9maXJlc3RvcmUuX2RhdGFDb252ZXJ0ZXIucGFyc2VVcGRhdGVWYXJhcmdzKCdUcmFuc2FjdGlvbi51cGRhdGUnLCBmaWVsZE9yVXBkYXRlRGF0YSwgdmFsdWUsIG1vcmVGaWVsZHNBbmRWYWx1ZXMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdmFsaWRhdGVFeGFjdE51bWJlck9mQXJncygnVHJhbnNhY3Rpb24udXBkYXRlJywgYXJndW1lbnRzLCAyKTtcclxuICAgICAgICAgICAgcmVmID0gdmFsaWRhdGVSZWZlcmVuY2UoJ1RyYW5zYWN0aW9uLnVwZGF0ZScsIGRvY3VtZW50UmVmLCB0aGlzLl9maXJlc3RvcmUpO1xyXG4gICAgICAgICAgICBwYXJzZWQgPSB0aGlzLl9maXJlc3RvcmUuX2RhdGFDb252ZXJ0ZXIucGFyc2VVcGRhdGVEYXRhKCdUcmFuc2FjdGlvbi51cGRhdGUnLCBmaWVsZE9yVXBkYXRlRGF0YSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX3RyYW5zYWN0aW9uLnVwZGF0ZShyZWYuX2tleSwgcGFyc2VkKTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH07XHJcbiAgICBUcmFuc2FjdGlvbi5wcm90b3R5cGUuZGVsZXRlID0gZnVuY3Rpb24gKGRvY3VtZW50UmVmKSB7XHJcbiAgICAgICAgdmFsaWRhdGVFeGFjdE51bWJlck9mQXJncygnVHJhbnNhY3Rpb24uZGVsZXRlJywgYXJndW1lbnRzLCAxKTtcclxuICAgICAgICB2YXIgcmVmID0gdmFsaWRhdGVSZWZlcmVuY2UoJ1RyYW5zYWN0aW9uLmRlbGV0ZScsIGRvY3VtZW50UmVmLCB0aGlzLl9maXJlc3RvcmUpO1xyXG4gICAgICAgIHRoaXMuX3RyYW5zYWN0aW9uLmRlbGV0ZShyZWYuX2tleSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFRyYW5zYWN0aW9uO1xyXG59KCkpO1xyXG52YXIgV3JpdGVCYXRjaCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFdyaXRlQmF0Y2goX2ZpcmVzdG9yZSkge1xyXG4gICAgICAgIHRoaXMuX2ZpcmVzdG9yZSA9IF9maXJlc3RvcmU7XHJcbiAgICAgICAgdGhpcy5fbXV0YXRpb25zID0gW107XHJcbiAgICAgICAgdGhpcy5fY29tbWl0dGVkID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBXcml0ZUJhdGNoLnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAoZG9jdW1lbnRSZWYsIHZhbHVlLCBvcHRpb25zKSB7XHJcbiAgICAgICAgdmFsaWRhdGVCZXR3ZWVuTnVtYmVyT2ZBcmdzKCdXcml0ZUJhdGNoLnNldCcsIGFyZ3VtZW50cywgMiwgMyk7XHJcbiAgICAgICAgdGhpcy52ZXJpZnlOb3RDb21taXR0ZWQoKTtcclxuICAgICAgICB2YXIgcmVmID0gdmFsaWRhdGVSZWZlcmVuY2UoJ1dyaXRlQmF0Y2guc2V0JywgZG9jdW1lbnRSZWYsIHRoaXMuX2ZpcmVzdG9yZSk7XHJcbiAgICAgICAgb3B0aW9ucyA9IHZhbGlkYXRlU2V0T3B0aW9ucygnV3JpdGVCYXRjaC5zZXQnLCBvcHRpb25zKTtcclxuICAgICAgICB2YXIgX2EgPSBhcHBseUZpcmVzdG9yZURhdGFDb252ZXJ0ZXIocmVmLl9jb252ZXJ0ZXIsIHZhbHVlLCAnV3JpdGVCYXRjaC5zZXQnKSwgY29udmVydGVkVmFsdWUgPSBfYVswXSwgZnVuY3Rpb25OYW1lID0gX2FbMV07XHJcbiAgICAgICAgdmFyIHBhcnNlZCA9IG9wdGlvbnMubWVyZ2UgfHwgb3B0aW9ucy5tZXJnZUZpZWxkc1xyXG4gICAgICAgICAgICA/IHRoaXMuX2ZpcmVzdG9yZS5fZGF0YUNvbnZlcnRlci5wYXJzZU1lcmdlRGF0YShmdW5jdGlvbk5hbWUsIGNvbnZlcnRlZFZhbHVlLCBvcHRpb25zLm1lcmdlRmllbGRzKVxyXG4gICAgICAgICAgICA6IHRoaXMuX2ZpcmVzdG9yZS5fZGF0YUNvbnZlcnRlci5wYXJzZVNldERhdGEoZnVuY3Rpb25OYW1lLCBjb252ZXJ0ZWRWYWx1ZSk7XHJcbiAgICAgICAgdGhpcy5fbXV0YXRpb25zID0gdGhpcy5fbXV0YXRpb25zLmNvbmNhdChwYXJzZWQudG9NdXRhdGlvbnMocmVmLl9rZXksIFByZWNvbmRpdGlvbi5OT05FKSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9O1xyXG4gICAgV3JpdGVCYXRjaC5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKGRvY3VtZW50UmVmLCBmaWVsZE9yVXBkYXRlRGF0YSwgdmFsdWUpIHtcclxuICAgICAgICB2YXIgbW9yZUZpZWxkc0FuZFZhbHVlcyA9IFtdO1xyXG4gICAgICAgIGZvciAodmFyIF9pID0gMzsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIG1vcmVGaWVsZHNBbmRWYWx1ZXNbX2kgLSAzXSA9IGFyZ3VtZW50c1tfaV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMudmVyaWZ5Tm90Q29tbWl0dGVkKCk7XHJcbiAgICAgICAgdmFyIHJlZjtcclxuICAgICAgICB2YXIgcGFyc2VkO1xyXG4gICAgICAgIGlmICh0eXBlb2YgZmllbGRPclVwZGF0ZURhdGEgPT09ICdzdHJpbmcnIHx8XHJcbiAgICAgICAgICAgIGZpZWxkT3JVcGRhdGVEYXRhIGluc3RhbmNlb2YgRmllbGRQYXRoJDEpIHtcclxuICAgICAgICAgICAgdmFsaWRhdGVBdExlYXN0TnVtYmVyT2ZBcmdzKCdXcml0ZUJhdGNoLnVwZGF0ZScsIGFyZ3VtZW50cywgMyk7XHJcbiAgICAgICAgICAgIHJlZiA9IHZhbGlkYXRlUmVmZXJlbmNlKCdXcml0ZUJhdGNoLnVwZGF0ZScsIGRvY3VtZW50UmVmLCB0aGlzLl9maXJlc3RvcmUpO1xyXG4gICAgICAgICAgICBwYXJzZWQgPSB0aGlzLl9maXJlc3RvcmUuX2RhdGFDb252ZXJ0ZXIucGFyc2VVcGRhdGVWYXJhcmdzKCdXcml0ZUJhdGNoLnVwZGF0ZScsIGZpZWxkT3JVcGRhdGVEYXRhLCB2YWx1ZSwgbW9yZUZpZWxkc0FuZFZhbHVlcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB2YWxpZGF0ZUV4YWN0TnVtYmVyT2ZBcmdzKCdXcml0ZUJhdGNoLnVwZGF0ZScsIGFyZ3VtZW50cywgMik7XHJcbiAgICAgICAgICAgIHJlZiA9IHZhbGlkYXRlUmVmZXJlbmNlKCdXcml0ZUJhdGNoLnVwZGF0ZScsIGRvY3VtZW50UmVmLCB0aGlzLl9maXJlc3RvcmUpO1xyXG4gICAgICAgICAgICBwYXJzZWQgPSB0aGlzLl9maXJlc3RvcmUuX2RhdGFDb252ZXJ0ZXIucGFyc2VVcGRhdGVEYXRhKCdXcml0ZUJhdGNoLnVwZGF0ZScsIGZpZWxkT3JVcGRhdGVEYXRhKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fbXV0YXRpb25zID0gdGhpcy5fbXV0YXRpb25zLmNvbmNhdChwYXJzZWQudG9NdXRhdGlvbnMocmVmLl9rZXksIFByZWNvbmRpdGlvbi5leGlzdHModHJ1ZSkpKTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH07XHJcbiAgICBXcml0ZUJhdGNoLnByb3RvdHlwZS5kZWxldGUgPSBmdW5jdGlvbiAoZG9jdW1lbnRSZWYpIHtcclxuICAgICAgICB2YWxpZGF0ZUV4YWN0TnVtYmVyT2ZBcmdzKCdXcml0ZUJhdGNoLmRlbGV0ZScsIGFyZ3VtZW50cywgMSk7XHJcbiAgICAgICAgdGhpcy52ZXJpZnlOb3RDb21taXR0ZWQoKTtcclxuICAgICAgICB2YXIgcmVmID0gdmFsaWRhdGVSZWZlcmVuY2UoJ1dyaXRlQmF0Y2guZGVsZXRlJywgZG9jdW1lbnRSZWYsIHRoaXMuX2ZpcmVzdG9yZSk7XHJcbiAgICAgICAgdGhpcy5fbXV0YXRpb25zID0gdGhpcy5fbXV0YXRpb25zLmNvbmNhdChuZXcgRGVsZXRlTXV0YXRpb24ocmVmLl9rZXksIFByZWNvbmRpdGlvbi5OT05FKSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9O1xyXG4gICAgV3JpdGVCYXRjaC5wcm90b3R5cGUuY29tbWl0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0c2xpYi5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy52ZXJpZnlOb3RDb21taXR0ZWQoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2NvbW1pdHRlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5fbXV0YXRpb25zLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdGhpcy5fZmlyZXN0b3JlLmVuc3VyZUNsaWVudENvbmZpZ3VyZWQoKS53cml0ZSh0aGlzLl9tdXRhdGlvbnMpXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgV3JpdGVCYXRjaC5wcm90b3R5cGUudmVyaWZ5Tm90Q29tbWl0dGVkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICh0aGlzLl9jb21taXR0ZWQpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuRkFJTEVEX1BSRUNPTkRJVElPTiwgJ0Egd3JpdGUgYmF0Y2ggY2FuIG5vIGxvbmdlciBiZSB1c2VkIGFmdGVyIGNvbW1pdCgpICcgK1xyXG4gICAgICAgICAgICAgICAgJ2hhcyBiZWVuIGNhbGxlZC4nKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFdyaXRlQmF0Y2g7XHJcbn0oKSk7XHJcbi8qKlxyXG4gKiBBIHJlZmVyZW5jZSB0byBhIHBhcnRpY3VsYXIgZG9jdW1lbnQgaW4gYSBjb2xsZWN0aW9uIGluIHRoZSBkYXRhYmFzZS5cclxuICovXHJcbnZhciBEb2N1bWVudFJlZmVyZW5jZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIERvY3VtZW50UmVmZXJlbmNlKF9rZXksIGZpcmVzdG9yZSwgX2NvbnZlcnRlcikge1xyXG4gICAgICAgIHRoaXMuX2tleSA9IF9rZXk7XHJcbiAgICAgICAgdGhpcy5maXJlc3RvcmUgPSBmaXJlc3RvcmU7XHJcbiAgICAgICAgdGhpcy5fY29udmVydGVyID0gX2NvbnZlcnRlcjtcclxuICAgICAgICB0aGlzLl9maXJlc3RvcmVDbGllbnQgPSB0aGlzLmZpcmVzdG9yZS5lbnN1cmVDbGllbnRDb25maWd1cmVkKCk7XHJcbiAgICB9XHJcbiAgICBEb2N1bWVudFJlZmVyZW5jZS5mb3JQYXRoID0gZnVuY3Rpb24gKHBhdGgsIGZpcmVzdG9yZSwgY29udmVydGVyKSB7XHJcbiAgICAgICAgaWYgKHBhdGgubGVuZ3RoICUgMiAhPT0gMCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5JTlZBTElEX0FSR1VNRU5ULCAnSW52YWxpZCBkb2N1bWVudCByZWZlcmVuY2UuIERvY3VtZW50ICcgK1xyXG4gICAgICAgICAgICAgICAgJ3JlZmVyZW5jZXMgbXVzdCBoYXZlIGFuIGV2ZW4gbnVtYmVyIG9mIHNlZ21lbnRzLCBidXQgJyArXHJcbiAgICAgICAgICAgICAgICAocGF0aC5jYW5vbmljYWxTdHJpbmcoKSArIFwiIGhhcyBcIiArIHBhdGgubGVuZ3RoKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBuZXcgRG9jdW1lbnRSZWZlcmVuY2UobmV3IERvY3VtZW50S2V5KHBhdGgpLCBmaXJlc3RvcmUsIGNvbnZlcnRlcik7XHJcbiAgICB9O1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KERvY3VtZW50UmVmZXJlbmNlLnByb3RvdHlwZSwgXCJpZFwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9rZXkucGF0aC5sYXN0U2VnbWVudCgpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KERvY3VtZW50UmVmZXJlbmNlLnByb3RvdHlwZSwgXCJwYXJlbnRcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IENvbGxlY3Rpb25SZWZlcmVuY2UodGhpcy5fa2V5LnBhdGgucG9wTGFzdCgpLCB0aGlzLmZpcmVzdG9yZSwgdGhpcy5fY29udmVydGVyKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShEb2N1bWVudFJlZmVyZW5jZS5wcm90b3R5cGUsIFwicGF0aFwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9rZXkucGF0aC5jYW5vbmljYWxTdHJpbmcoKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIERvY3VtZW50UmVmZXJlbmNlLnByb3RvdHlwZS5jb2xsZWN0aW9uID0gZnVuY3Rpb24gKHBhdGhTdHJpbmcpIHtcclxuICAgICAgICB2YWxpZGF0ZUV4YWN0TnVtYmVyT2ZBcmdzKCdEb2N1bWVudFJlZmVyZW5jZS5jb2xsZWN0aW9uJywgYXJndW1lbnRzLCAxKTtcclxuICAgICAgICB2YWxpZGF0ZUFyZ1R5cGUoJ0RvY3VtZW50UmVmZXJlbmNlLmNvbGxlY3Rpb24nLCAnbm9uLWVtcHR5IHN0cmluZycsIDEsIHBhdGhTdHJpbmcpO1xyXG4gICAgICAgIGlmICghcGF0aFN0cmluZykge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5JTlZBTElEX0FSR1VNRU5ULCAnTXVzdCBwcm92aWRlIGEgbm9uLWVtcHR5IGNvbGxlY3Rpb24gbmFtZSB0byBjb2xsZWN0aW9uKCknKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIHBhdGggPSBSZXNvdXJjZVBhdGguZnJvbVN0cmluZyhwYXRoU3RyaW5nKTtcclxuICAgICAgICByZXR1cm4gbmV3IENvbGxlY3Rpb25SZWZlcmVuY2UodGhpcy5fa2V5LnBhdGguY2hpbGQocGF0aCksIHRoaXMuZmlyZXN0b3JlKTtcclxuICAgIH07XHJcbiAgICBEb2N1bWVudFJlZmVyZW5jZS5wcm90b3R5cGUuaXNFcXVhbCA9IGZ1bmN0aW9uIChvdGhlcikge1xyXG4gICAgICAgIGlmICghKG90aGVyIGluc3RhbmNlb2YgRG9jdW1lbnRSZWZlcmVuY2UpKSB7XHJcbiAgICAgICAgICAgIHRocm93IGludmFsaWRDbGFzc0Vycm9yKCdpc0VxdWFsJywgJ0RvY3VtZW50UmVmZXJlbmNlJywgMSwgb3RoZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gKHRoaXMuZmlyZXN0b3JlID09PSBvdGhlci5maXJlc3RvcmUgJiZcclxuICAgICAgICAgICAgdGhpcy5fa2V5LmlzRXF1YWwob3RoZXIuX2tleSkgJiZcclxuICAgICAgICAgICAgdGhpcy5fY29udmVydGVyID09PSBvdGhlci5fY29udmVydGVyKTtcclxuICAgIH07XHJcbiAgICBEb2N1bWVudFJlZmVyZW5jZS5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24gKHZhbHVlLCBvcHRpb25zKSB7XHJcbiAgICAgICAgdmFsaWRhdGVCZXR3ZWVuTnVtYmVyT2ZBcmdzKCdEb2N1bWVudFJlZmVyZW5jZS5zZXQnLCBhcmd1bWVudHMsIDEsIDIpO1xyXG4gICAgICAgIG9wdGlvbnMgPSB2YWxpZGF0ZVNldE9wdGlvbnMoJ0RvY3VtZW50UmVmZXJlbmNlLnNldCcsIG9wdGlvbnMpO1xyXG4gICAgICAgIHZhciBfYSA9IGFwcGx5RmlyZXN0b3JlRGF0YUNvbnZlcnRlcih0aGlzLl9jb252ZXJ0ZXIsIHZhbHVlLCAnRG9jdW1lbnRSZWZlcmVuY2Uuc2V0JyksIGNvbnZlcnRlZFZhbHVlID0gX2FbMF0sIGZ1bmN0aW9uTmFtZSA9IF9hWzFdO1xyXG4gICAgICAgIHZhciBwYXJzZWQgPSBvcHRpb25zLm1lcmdlIHx8IG9wdGlvbnMubWVyZ2VGaWVsZHNcclxuICAgICAgICAgICAgPyB0aGlzLmZpcmVzdG9yZS5fZGF0YUNvbnZlcnRlci5wYXJzZU1lcmdlRGF0YShmdW5jdGlvbk5hbWUsIGNvbnZlcnRlZFZhbHVlLCBvcHRpb25zLm1lcmdlRmllbGRzKVxyXG4gICAgICAgICAgICA6IHRoaXMuZmlyZXN0b3JlLl9kYXRhQ29udmVydGVyLnBhcnNlU2V0RGF0YShmdW5jdGlvbk5hbWUsIGNvbnZlcnRlZFZhbHVlKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZmlyZXN0b3JlQ2xpZW50LndyaXRlKHBhcnNlZC50b011dGF0aW9ucyh0aGlzLl9rZXksIFByZWNvbmRpdGlvbi5OT05FKSk7XHJcbiAgICB9O1xyXG4gICAgRG9jdW1lbnRSZWZlcmVuY2UucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uIChmaWVsZE9yVXBkYXRlRGF0YSwgdmFsdWUpIHtcclxuICAgICAgICB2YXIgbW9yZUZpZWxkc0FuZFZhbHVlcyA9IFtdO1xyXG4gICAgICAgIGZvciAodmFyIF9pID0gMjsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIG1vcmVGaWVsZHNBbmRWYWx1ZXNbX2kgLSAyXSA9IGFyZ3VtZW50c1tfaV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBwYXJzZWQ7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBmaWVsZE9yVXBkYXRlRGF0YSA9PT0gJ3N0cmluZycgfHxcclxuICAgICAgICAgICAgZmllbGRPclVwZGF0ZURhdGEgaW5zdGFuY2VvZiBGaWVsZFBhdGgkMSkge1xyXG4gICAgICAgICAgICB2YWxpZGF0ZUF0TGVhc3ROdW1iZXJPZkFyZ3MoJ0RvY3VtZW50UmVmZXJlbmNlLnVwZGF0ZScsIGFyZ3VtZW50cywgMik7XHJcbiAgICAgICAgICAgIHBhcnNlZCA9IHRoaXMuZmlyZXN0b3JlLl9kYXRhQ29udmVydGVyLnBhcnNlVXBkYXRlVmFyYXJncygnRG9jdW1lbnRSZWZlcmVuY2UudXBkYXRlJywgZmllbGRPclVwZGF0ZURhdGEsIHZhbHVlLCBtb3JlRmllbGRzQW5kVmFsdWVzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHZhbGlkYXRlRXhhY3ROdW1iZXJPZkFyZ3MoJ0RvY3VtZW50UmVmZXJlbmNlLnVwZGF0ZScsIGFyZ3VtZW50cywgMSk7XHJcbiAgICAgICAgICAgIHBhcnNlZCA9IHRoaXMuZmlyZXN0b3JlLl9kYXRhQ29udmVydGVyLnBhcnNlVXBkYXRlRGF0YSgnRG9jdW1lbnRSZWZlcmVuY2UudXBkYXRlJywgZmllbGRPclVwZGF0ZURhdGEpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5fZmlyZXN0b3JlQ2xpZW50LndyaXRlKHBhcnNlZC50b011dGF0aW9ucyh0aGlzLl9rZXksIFByZWNvbmRpdGlvbi5leGlzdHModHJ1ZSkpKTtcclxuICAgIH07XHJcbiAgICBEb2N1bWVudFJlZmVyZW5jZS5wcm90b3R5cGUuZGVsZXRlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhbGlkYXRlRXhhY3ROdW1iZXJPZkFyZ3MoJ0RvY3VtZW50UmVmZXJlbmNlLmRlbGV0ZScsIGFyZ3VtZW50cywgMCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ZpcmVzdG9yZUNsaWVudC53cml0ZShbXHJcbiAgICAgICAgICAgIG5ldyBEZWxldGVNdXRhdGlvbih0aGlzLl9rZXksIFByZWNvbmRpdGlvbi5OT05FKVxyXG4gICAgICAgIF0pO1xyXG4gICAgfTtcclxuICAgIERvY3VtZW50UmVmZXJlbmNlLnByb3RvdHlwZS5vblNuYXBzaG90ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBhcmdzID0gW107XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YWxpZGF0ZUJldHdlZW5OdW1iZXJPZkFyZ3MoJ0RvY3VtZW50UmVmZXJlbmNlLm9uU25hcHNob3QnLCBhcmd1bWVudHMsIDEsIDQpO1xyXG4gICAgICAgIHZhciBvcHRpb25zID0ge1xyXG4gICAgICAgICAgICBpbmNsdWRlTWV0YWRhdGFDaGFuZ2VzOiBmYWxzZVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdmFyIG9ic2VydmVyO1xyXG4gICAgICAgIHZhciBjdXJyQXJnID0gMDtcclxuICAgICAgICBpZiAodHlwZW9mIGFyZ3NbY3VyckFyZ10gPT09ICdvYmplY3QnICYmXHJcbiAgICAgICAgICAgICFpc1BhcnRpYWxPYnNlcnZlcihhcmdzW2N1cnJBcmddKSkge1xyXG4gICAgICAgICAgICBvcHRpb25zID0gYXJnc1tjdXJyQXJnXTtcclxuICAgICAgICAgICAgdmFsaWRhdGVPcHRpb25OYW1lcygnRG9jdW1lbnRSZWZlcmVuY2Uub25TbmFwc2hvdCcsIG9wdGlvbnMsIFtcclxuICAgICAgICAgICAgICAgICdpbmNsdWRlTWV0YWRhdGFDaGFuZ2VzJ1xyXG4gICAgICAgICAgICBdKTtcclxuICAgICAgICAgICAgdmFsaWRhdGVOYW1lZE9wdGlvbmFsVHlwZSgnRG9jdW1lbnRSZWZlcmVuY2Uub25TbmFwc2hvdCcsICdib29sZWFuJywgJ2luY2x1ZGVNZXRhZGF0YUNoYW5nZXMnLCBvcHRpb25zLmluY2x1ZGVNZXRhZGF0YUNoYW5nZXMpO1xyXG4gICAgICAgICAgICBjdXJyQXJnKys7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBpbnRlcm5hbE9wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgIGluY2x1ZGVNZXRhZGF0YUNoYW5nZXM6IG9wdGlvbnMuaW5jbHVkZU1ldGFkYXRhQ2hhbmdlc1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgaWYgKGlzUGFydGlhbE9ic2VydmVyKGFyZ3NbY3VyckFyZ10pKSB7XHJcbiAgICAgICAgICAgIG9ic2VydmVyID0gYXJnc1tjdXJyQXJnXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHZhbGlkYXRlQXJnVHlwZSgnRG9jdW1lbnRSZWZlcmVuY2Uub25TbmFwc2hvdCcsICdmdW5jdGlvbicsIGN1cnJBcmcsIGFyZ3NbY3VyckFyZ10pO1xyXG4gICAgICAgICAgICB2YWxpZGF0ZU9wdGlvbmFsQXJnVHlwZSgnRG9jdW1lbnRSZWZlcmVuY2Uub25TbmFwc2hvdCcsICdmdW5jdGlvbicsIGN1cnJBcmcgKyAxLCBhcmdzW2N1cnJBcmcgKyAxXSk7XHJcbiAgICAgICAgICAgIHZhbGlkYXRlT3B0aW9uYWxBcmdUeXBlKCdEb2N1bWVudFJlZmVyZW5jZS5vblNuYXBzaG90JywgJ2Z1bmN0aW9uJywgY3VyckFyZyArIDIsIGFyZ3NbY3VyckFyZyArIDJdKTtcclxuICAgICAgICAgICAgb2JzZXJ2ZXIgPSB7XHJcbiAgICAgICAgICAgICAgICBuZXh0OiBhcmdzW2N1cnJBcmddLFxyXG4gICAgICAgICAgICAgICAgZXJyb3I6IGFyZ3NbY3VyckFyZyArIDFdLFxyXG4gICAgICAgICAgICAgICAgY29tcGxldGU6IGFyZ3NbY3VyckFyZyArIDJdXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLm9uU25hcHNob3RJbnRlcm5hbChpbnRlcm5hbE9wdGlvbnMsIG9ic2VydmVyKTtcclxuICAgIH07XHJcbiAgICBEb2N1bWVudFJlZmVyZW5jZS5wcm90b3R5cGUub25TbmFwc2hvdEludGVybmFsID0gZnVuY3Rpb24gKG9wdGlvbnMsIG9ic2VydmVyKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgZXJySGFuZGxlciA9IGZ1bmN0aW9uIChlcnIpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignVW5jYXVnaHQgRXJyb3IgaW4gb25TbmFwc2hvdDonLCBlcnIpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgaWYgKG9ic2VydmVyLmVycm9yKSB7XHJcbiAgICAgICAgICAgIGVyckhhbmRsZXIgPSBvYnNlcnZlci5lcnJvci5iaW5kKG9ic2VydmVyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGFzeW5jT2JzZXJ2ZXIgPSBuZXcgQXN5bmNPYnNlcnZlcih7XHJcbiAgICAgICAgICAgIG5leHQ6IGZ1bmN0aW9uIChzbmFwc2hvdCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKG9ic2VydmVyLm5leHQpIHtcclxuICAgICAgICAgICAgICAgICAgICBhc3NlcnQoc25hcHNob3QuZG9jcy5zaXplIDw9IDEsICdUb28gbWFueSBkb2N1bWVudHMgcmV0dXJuZWQgb24gYSBkb2N1bWVudCBxdWVyeScpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBkb2MgPSBzbmFwc2hvdC5kb2NzLmdldChfdGhpcy5fa2V5KTtcclxuICAgICAgICAgICAgICAgICAgICBvYnNlcnZlci5uZXh0KG5ldyBEb2N1bWVudFNuYXBzaG90KF90aGlzLmZpcmVzdG9yZSwgX3RoaXMuX2tleSwgZG9jLCBzbmFwc2hvdC5mcm9tQ2FjaGUsIHNuYXBzaG90Lmhhc1BlbmRpbmdXcml0ZXMsIF90aGlzLl9jb252ZXJ0ZXIpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZXJyb3I6IGVyckhhbmRsZXJcclxuICAgICAgICB9KTtcclxuICAgICAgICB2YXIgaW50ZXJuYWxMaXN0ZW5lciA9IHRoaXMuX2ZpcmVzdG9yZUNsaWVudC5saXN0ZW4oUXVlcnkuYXRQYXRoKHRoaXMuX2tleS5wYXRoKSwgYXN5bmNPYnNlcnZlciwgb3B0aW9ucyk7XHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgYXN5bmNPYnNlcnZlci5tdXRlKCk7XHJcbiAgICAgICAgICAgIF90aGlzLl9maXJlc3RvcmVDbGllbnQudW5saXN0ZW4oaW50ZXJuYWxMaXN0ZW5lcik7XHJcbiAgICAgICAgfTtcclxuICAgIH07XHJcbiAgICBEb2N1bWVudFJlZmVyZW5jZS5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhbGlkYXRlQmV0d2Vlbk51bWJlck9mQXJncygnRG9jdW1lbnRSZWZlcmVuY2UuZ2V0JywgYXJndW1lbnRzLCAwLCAxKTtcclxuICAgICAgICB2YWxpZGF0ZUdldE9wdGlvbnMoJ0RvY3VtZW50UmVmZXJlbmNlLmdldCcsIG9wdGlvbnMpO1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMuc291cmNlID09PSAnY2FjaGUnKSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5maXJlc3RvcmVcclxuICAgICAgICAgICAgICAgICAgICAuZW5zdXJlQ2xpZW50Q29uZmlndXJlZCgpXHJcbiAgICAgICAgICAgICAgICAgICAgLmdldERvY3VtZW50RnJvbUxvY2FsQ2FjaGUoX3RoaXMuX2tleSlcclxuICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoZG9jKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShuZXcgRG9jdW1lbnRTbmFwc2hvdChfdGhpcy5maXJlc3RvcmUsIF90aGlzLl9rZXksIGRvYywgXHJcbiAgICAgICAgICAgICAgICAgICAgLypmcm9tQ2FjaGU9Ki8gdHJ1ZSwgZG9jIGluc3RhbmNlb2YgRG9jdW1lbnQgPyBkb2MuaGFzTG9jYWxNdXRhdGlvbnMgOiBmYWxzZSwgX3RoaXMuX2NvbnZlcnRlcikpO1xyXG4gICAgICAgICAgICAgICAgfSwgcmVqZWN0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLmdldFZpYVNuYXBzaG90TGlzdGVuZXIocmVzb2x2ZSwgcmVqZWN0LCBvcHRpb25zKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIERvY3VtZW50UmVmZXJlbmNlLnByb3RvdHlwZS5nZXRWaWFTbmFwc2hvdExpc3RlbmVyID0gZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCwgb3B0aW9ucykge1xyXG4gICAgICAgIHZhciB1bmxpc3RlbiA9IHRoaXMub25TbmFwc2hvdEludGVybmFsKHtcclxuICAgICAgICAgICAgaW5jbHVkZU1ldGFkYXRhQ2hhbmdlczogdHJ1ZSxcclxuICAgICAgICAgICAgd2FpdEZvclN5bmNXaGVuT25saW5lOiB0cnVlXHJcbiAgICAgICAgfSwge1xyXG4gICAgICAgICAgICBuZXh0OiBmdW5jdGlvbiAoc25hcCkge1xyXG4gICAgICAgICAgICAgICAgLy8gUmVtb3ZlIHF1ZXJ5IGZpcnN0IGJlZm9yZSBwYXNzaW5nIGV2ZW50IHRvIHVzZXIgdG8gYXZvaWRcclxuICAgICAgICAgICAgICAgIC8vIHVzZXIgYWN0aW9ucyBhZmZlY3RpbmcgdGhlIG5vdyBzdGFsZSBxdWVyeS5cclxuICAgICAgICAgICAgICAgIHVubGlzdGVuKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXNuYXAuZXhpc3RzICYmIHNuYXAubWV0YWRhdGEuZnJvbUNhY2hlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gVE9ETyhkaW1vbmQpOiBJZiB3ZSdyZSBvbmxpbmUgYW5kIHRoZSBkb2N1bWVudCBkb2Vzbid0XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gZXhpc3QgdGhlbiB3ZSByZXNvbHZlIHdpdGggYSBkb2MuZXhpc3RzIHNldCB0byBmYWxzZS4gSWZcclxuICAgICAgICAgICAgICAgICAgICAvLyB3ZSdyZSBvZmZsaW5lIGhvd2V2ZXIsIHdlIHJlamVjdCB0aGUgUHJvbWlzZSBpbiB0aGlzXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY2FzZS4gVHdvIG9wdGlvbnM6IDEpIENhY2hlIHRoZSBuZWdhdGl2ZSByZXNwb25zZSBmcm9tXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhlIHNlcnZlciBzbyB3ZSBjYW4gZGVsaXZlciB0aGF0IGV2ZW4gd2hlbiB5b3UncmVcclxuICAgICAgICAgICAgICAgICAgICAvLyBvZmZsaW5lIDIpIEFjdHVhbGx5IHJlamVjdCB0aGUgUHJvbWlzZSBpbiB0aGUgb25saW5lIGNhc2VcclxuICAgICAgICAgICAgICAgICAgICAvLyBpZiB0aGUgZG9jdW1lbnQgZG9lc24ndCBleGlzdC5cclxuICAgICAgICAgICAgICAgICAgICByZWplY3QobmV3IEZpcmVzdG9yZUVycm9yKENvZGUuVU5BVkFJTEFCTEUsICdGYWlsZWQgdG8gZ2V0IGRvY3VtZW50IGJlY2F1c2UgdGhlIGNsaWVudCBpcyAnICsgJ29mZmxpbmUuJykpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoc25hcC5leGlzdHMgJiZcclxuICAgICAgICAgICAgICAgICAgICBzbmFwLm1ldGFkYXRhLmZyb21DYWNoZSAmJlxyXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnMgJiZcclxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zLnNvdXJjZSA9PT0gJ3NlcnZlcicpIHtcclxuICAgICAgICAgICAgICAgICAgICByZWplY3QobmV3IEZpcmVzdG9yZUVycm9yKENvZGUuVU5BVkFJTEFCTEUsICdGYWlsZWQgdG8gZ2V0IGRvY3VtZW50IGZyb20gc2VydmVyLiAoSG93ZXZlciwgdGhpcyAnICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ2RvY3VtZW50IGRvZXMgZXhpc3QgaW4gdGhlIGxvY2FsIGNhY2hlLiBSdW4gYWdhaW4gJyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICd3aXRob3V0IHNldHRpbmcgc291cmNlIHRvIFwic2VydmVyXCIgdG8gJyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICdyZXRyaWV2ZSB0aGUgY2FjaGVkIGRvY3VtZW50LiknKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHNuYXApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBlcnJvcjogcmVqZWN0XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgRG9jdW1lbnRSZWZlcmVuY2UucHJvdG90eXBlLndpdGhDb252ZXJ0ZXIgPSBmdW5jdGlvbiAoY29udmVydGVyKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBEb2N1bWVudFJlZmVyZW5jZSh0aGlzLl9rZXksIHRoaXMuZmlyZXN0b3JlLCBjb252ZXJ0ZXIpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBEb2N1bWVudFJlZmVyZW5jZTtcclxufSgpKTtcclxudmFyIFNuYXBzaG90TWV0YWRhdGEgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBTbmFwc2hvdE1ldGFkYXRhKGhhc1BlbmRpbmdXcml0ZXMsIGZyb21DYWNoZSkge1xyXG4gICAgICAgIHRoaXMuaGFzUGVuZGluZ1dyaXRlcyA9IGhhc1BlbmRpbmdXcml0ZXM7XHJcbiAgICAgICAgdGhpcy5mcm9tQ2FjaGUgPSBmcm9tQ2FjaGU7XHJcbiAgICB9XHJcbiAgICBTbmFwc2hvdE1ldGFkYXRhLnByb3RvdHlwZS5pc0VxdWFsID0gZnVuY3Rpb24gKG90aGVyKSB7XHJcbiAgICAgICAgcmV0dXJuICh0aGlzLmhhc1BlbmRpbmdXcml0ZXMgPT09IG90aGVyLmhhc1BlbmRpbmdXcml0ZXMgJiZcclxuICAgICAgICAgICAgdGhpcy5mcm9tQ2FjaGUgPT09IG90aGVyLmZyb21DYWNoZSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFNuYXBzaG90TWV0YWRhdGE7XHJcbn0oKSk7XHJcbnZhciBEb2N1bWVudFNuYXBzaG90ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gRG9jdW1lbnRTbmFwc2hvdChfZmlyZXN0b3JlLCBfa2V5LCBfZG9jdW1lbnQsIF9mcm9tQ2FjaGUsIF9oYXNQZW5kaW5nV3JpdGVzLCBfY29udmVydGVyKSB7XHJcbiAgICAgICAgdGhpcy5fZmlyZXN0b3JlID0gX2ZpcmVzdG9yZTtcclxuICAgICAgICB0aGlzLl9rZXkgPSBfa2V5O1xyXG4gICAgICAgIHRoaXMuX2RvY3VtZW50ID0gX2RvY3VtZW50O1xyXG4gICAgICAgIHRoaXMuX2Zyb21DYWNoZSA9IF9mcm9tQ2FjaGU7XHJcbiAgICAgICAgdGhpcy5faGFzUGVuZGluZ1dyaXRlcyA9IF9oYXNQZW5kaW5nV3JpdGVzO1xyXG4gICAgICAgIHRoaXMuX2NvbnZlcnRlciA9IF9jb252ZXJ0ZXI7XHJcbiAgICB9XHJcbiAgICBEb2N1bWVudFNuYXBzaG90LnByb3RvdHlwZS5kYXRhID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcclxuICAgICAgICB2YWxpZGF0ZUJldHdlZW5OdW1iZXJPZkFyZ3MoJ0RvY3VtZW50U25hcHNob3QuZGF0YScsIGFyZ3VtZW50cywgMCwgMSk7XHJcbiAgICAgICAgb3B0aW9ucyA9IHZhbGlkYXRlU25hcHNob3RPcHRpb25zKCdEb2N1bWVudFNuYXBzaG90LmRhdGEnLCBvcHRpb25zKTtcclxuICAgICAgICBpZiAoIXRoaXMuX2RvY3VtZW50KSB7XHJcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBXZSBvbmx5IHdhbnQgdG8gdXNlIHRoZSBjb252ZXJ0ZXIgYW5kIGNyZWF0ZSBhIG5ldyBEb2N1bWVudFNuYXBzaG90XHJcbiAgICAgICAgICAgIC8vIGlmIGEgY29udmVydGVyIGhhcyBiZWVuIHByb3ZpZGVkLlxyXG4gICAgICAgICAgICBpZiAodGhpcy5fY29udmVydGVyKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgc25hcHNob3QgPSBuZXcgUXVlcnlEb2N1bWVudFNuYXBzaG90KHRoaXMuX2ZpcmVzdG9yZSwgdGhpcy5fa2V5LCB0aGlzLl9kb2N1bWVudCwgdGhpcy5fZnJvbUNhY2hlLCB0aGlzLl9oYXNQZW5kaW5nV3JpdGVzKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9jb252ZXJ0ZXIuZnJvbUZpcmVzdG9yZShzbmFwc2hvdCwgb3B0aW9ucyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy50b0pTT2JqZWN0KHRoaXMuX2RvY3VtZW50LmRhdGEoKSwgRmllbGRWYWx1ZU9wdGlvbnMuZnJvbVNuYXBzaG90T3B0aW9ucyhvcHRpb25zLCB0aGlzLl9maXJlc3RvcmUuX2FyZVRpbWVzdGFtcHNJblNuYXBzaG90c0VuYWJsZWQoKSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIERvY3VtZW50U25hcHNob3QucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uIChmaWVsZFBhdGgsIG9wdGlvbnMpIHtcclxuICAgICAgICB2YWxpZGF0ZUJldHdlZW5OdW1iZXJPZkFyZ3MoJ0RvY3VtZW50U25hcHNob3QuZ2V0JywgYXJndW1lbnRzLCAxLCAyKTtcclxuICAgICAgICBvcHRpb25zID0gdmFsaWRhdGVTbmFwc2hvdE9wdGlvbnMoJ0RvY3VtZW50U25hcHNob3QuZ2V0Jywgb3B0aW9ucyk7XHJcbiAgICAgICAgaWYgKHRoaXMuX2RvY3VtZW50KSB7XHJcbiAgICAgICAgICAgIHZhciB2YWx1ZSA9IHRoaXMuX2RvY3VtZW50XHJcbiAgICAgICAgICAgICAgICAuZGF0YSgpXHJcbiAgICAgICAgICAgICAgICAuZmllbGQoZmllbGRQYXRoRnJvbUFyZ3VtZW50KCdEb2N1bWVudFNuYXBzaG90LmdldCcsIGZpZWxkUGF0aCkpO1xyXG4gICAgICAgICAgICBpZiAodmFsdWUgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnRvSlNWYWx1ZSh2YWx1ZSwgRmllbGRWYWx1ZU9wdGlvbnMuZnJvbVNuYXBzaG90T3B0aW9ucyhvcHRpb25zLCB0aGlzLl9maXJlc3RvcmUuX2FyZVRpbWVzdGFtcHNJblNuYXBzaG90c0VuYWJsZWQoKSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICB9O1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KERvY3VtZW50U25hcHNob3QucHJvdG90eXBlLCBcImlkXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2tleS5wYXRoLmxhc3RTZWdtZW50KCk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoRG9jdW1lbnRTbmFwc2hvdC5wcm90b3R5cGUsIFwicmVmXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBEb2N1bWVudFJlZmVyZW5jZSh0aGlzLl9rZXksIHRoaXMuX2ZpcmVzdG9yZSwgdGhpcy5fY29udmVydGVyKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShEb2N1bWVudFNuYXBzaG90LnByb3RvdHlwZSwgXCJleGlzdHNcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZG9jdW1lbnQgIT09IG51bGw7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoRG9jdW1lbnRTbmFwc2hvdC5wcm90b3R5cGUsIFwibWV0YWRhdGFcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFNuYXBzaG90TWV0YWRhdGEodGhpcy5faGFzUGVuZGluZ1dyaXRlcywgdGhpcy5fZnJvbUNhY2hlKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIERvY3VtZW50U25hcHNob3QucHJvdG90eXBlLmlzRXF1YWwgPSBmdW5jdGlvbiAob3RoZXIpIHtcclxuICAgICAgICBpZiAoIShvdGhlciBpbnN0YW5jZW9mIERvY3VtZW50U25hcHNob3QpKSB7XHJcbiAgICAgICAgICAgIHRocm93IGludmFsaWRDbGFzc0Vycm9yKCdpc0VxdWFsJywgJ0RvY3VtZW50U25hcHNob3QnLCAxLCBvdGhlcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiAodGhpcy5fZmlyZXN0b3JlID09PSBvdGhlci5fZmlyZXN0b3JlICYmXHJcbiAgICAgICAgICAgIHRoaXMuX2Zyb21DYWNoZSA9PT0gb3RoZXIuX2Zyb21DYWNoZSAmJlxyXG4gICAgICAgICAgICB0aGlzLl9rZXkuaXNFcXVhbChvdGhlci5fa2V5KSAmJlxyXG4gICAgICAgICAgICAodGhpcy5fZG9jdW1lbnQgPT09IG51bGxcclxuICAgICAgICAgICAgICAgID8gb3RoZXIuX2RvY3VtZW50ID09PSBudWxsXHJcbiAgICAgICAgICAgICAgICA6IHRoaXMuX2RvY3VtZW50LmlzRXF1YWwob3RoZXIuX2RvY3VtZW50KSkgJiZcclxuICAgICAgICAgICAgdGhpcy5fY29udmVydGVyID09PSBvdGhlci5fY29udmVydGVyKTtcclxuICAgIH07XHJcbiAgICBEb2N1bWVudFNuYXBzaG90LnByb3RvdHlwZS50b0pTT2JqZWN0ID0gZnVuY3Rpb24gKGRhdGEsIG9wdGlvbnMpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhciByZXN1bHQgPSB7fTtcclxuICAgICAgICBkYXRhLmZvckVhY2goZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcclxuICAgICAgICAgICAgcmVzdWx0W2tleV0gPSBfdGhpcy50b0pTVmFsdWUodmFsdWUsIG9wdGlvbnMpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9O1xyXG4gICAgRG9jdW1lbnRTbmFwc2hvdC5wcm90b3R5cGUudG9KU1ZhbHVlID0gZnVuY3Rpb24gKHZhbHVlLCBvcHRpb25zKSB7XHJcbiAgICAgICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgT2JqZWN0VmFsdWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMudG9KU09iamVjdCh2YWx1ZSwgb3B0aW9ucyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHZhbHVlIGluc3RhbmNlb2YgQXJyYXlWYWx1ZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy50b0pTQXJyYXkodmFsdWUsIG9wdGlvbnMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh2YWx1ZSBpbnN0YW5jZW9mIFJlZlZhbHVlKSB7XHJcbiAgICAgICAgICAgIHZhciBrZXkgPSB2YWx1ZS52YWx1ZShvcHRpb25zKTtcclxuICAgICAgICAgICAgdmFyIGRhdGFiYXNlID0gdGhpcy5fZmlyZXN0b3JlLmVuc3VyZUNsaWVudENvbmZpZ3VyZWQoKS5kYXRhYmFzZUlkKCk7XHJcbiAgICAgICAgICAgIGlmICghdmFsdWUuZGF0YWJhc2VJZC5pc0VxdWFsKGRhdGFiYXNlKSkge1xyXG4gICAgICAgICAgICAgICAgLy8gVE9ETyhiLzY0MTMwMjAyKTogU29tZWhvdyBzdXBwb3J0IGZvcmVpZ24gcmVmZXJlbmNlcy5cclxuICAgICAgICAgICAgICAgIGVycm9yKFwiRG9jdW1lbnQgXCIgKyB0aGlzLl9rZXkucGF0aCArIFwiIGNvbnRhaW5zIGEgZG9jdW1lbnQgXCIgK1xyXG4gICAgICAgICAgICAgICAgICAgIFwicmVmZXJlbmNlIHdpdGhpbiBhIGRpZmZlcmVudCBkYXRhYmFzZSAoXCIgK1xyXG4gICAgICAgICAgICAgICAgICAgICh2YWx1ZS5kYXRhYmFzZUlkLnByb2plY3RJZCArIFwiL1wiICsgdmFsdWUuZGF0YWJhc2VJZC5kYXRhYmFzZSArIFwiKSB3aGljaCBpcyBub3QgXCIpICtcclxuICAgICAgICAgICAgICAgICAgICBcInN1cHBvcnRlZC4gSXQgd2lsbCBiZSB0cmVhdGVkIGFzIGEgcmVmZXJlbmNlIGluIHRoZSBjdXJyZW50IFwiICtcclxuICAgICAgICAgICAgICAgICAgICAoXCJkYXRhYmFzZSAoXCIgKyBkYXRhYmFzZS5wcm9qZWN0SWQgKyBcIi9cIiArIGRhdGFiYXNlLmRhdGFiYXNlICsgXCIpIFwiKSArXHJcbiAgICAgICAgICAgICAgICAgICAgXCJpbnN0ZWFkLlwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IERvY3VtZW50UmVmZXJlbmNlKGtleSwgdGhpcy5fZmlyZXN0b3JlLCB0aGlzLl9jb252ZXJ0ZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlLnZhbHVlKG9wdGlvbnMpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBEb2N1bWVudFNuYXBzaG90LnByb3RvdHlwZS50b0pTQXJyYXkgPSBmdW5jdGlvbiAoZGF0YSwgb3B0aW9ucykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIGRhdGEuaW50ZXJuYWxWYWx1ZS5tYXAoZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy50b0pTVmFsdWUodmFsdWUsIG9wdGlvbnMpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBEb2N1bWVudFNuYXBzaG90O1xyXG59KCkpO1xyXG52YXIgUXVlcnlEb2N1bWVudFNuYXBzaG90ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgdHNsaWIuX19leHRlbmRzKFF1ZXJ5RG9jdW1lbnRTbmFwc2hvdCwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIFF1ZXJ5RG9jdW1lbnRTbmFwc2hvdCgpIHtcclxuICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XHJcbiAgICB9XHJcbiAgICBRdWVyeURvY3VtZW50U25hcHNob3QucHJvdG90eXBlLmRhdGEgPSBmdW5jdGlvbiAob3B0aW9ucykge1xyXG4gICAgICAgIHZhciBkYXRhID0gX3N1cGVyLnByb3RvdHlwZS5kYXRhLmNhbGwodGhpcywgb3B0aW9ucyk7XHJcbiAgICAgICAgYXNzZXJ0KGRhdGEgIT09IHVuZGVmaW5lZCwgJ0RvY3VtZW50IGluIGEgUXVlcnlEb2N1bWVudFNuYXBzaG90IHNob3VsZCBleGlzdCcpO1xyXG4gICAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBRdWVyeURvY3VtZW50U25hcHNob3Q7XHJcbn0oRG9jdW1lbnRTbmFwc2hvdCkpO1xyXG52YXIgUXVlcnkkMSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFF1ZXJ5KF9xdWVyeSwgZmlyZXN0b3JlLCBfY29udmVydGVyKSB7XHJcbiAgICAgICAgdGhpcy5fcXVlcnkgPSBfcXVlcnk7XHJcbiAgICAgICAgdGhpcy5maXJlc3RvcmUgPSBmaXJlc3RvcmU7XHJcbiAgICAgICAgdGhpcy5fY29udmVydGVyID0gX2NvbnZlcnRlcjtcclxuICAgIH1cclxuICAgIFF1ZXJ5LnByb3RvdHlwZS53aGVyZSA9IGZ1bmN0aW9uIChmaWVsZCwgb3BTdHIsIHZhbHVlKSB7XHJcbiAgICAgICAgdmFsaWRhdGVFeGFjdE51bWJlck9mQXJncygnUXVlcnkud2hlcmUnLCBhcmd1bWVudHMsIDMpO1xyXG4gICAgICAgIHZhbGlkYXRlRGVmaW5lZCgnUXVlcnkud2hlcmUnLCAzLCB2YWx1ZSk7XHJcbiAgICAgICAgLy8gRW51bWVyYXRlZCBmcm9tIHRoZSBXaGVyZUZpbHRlck9wIHR5cGUgaW4gaW5kZXguZC50cy5cclxuICAgICAgICB2YXIgd2hlcmVGaWx0ZXJPcEVudW1zID0gW1xyXG4gICAgICAgICAgICAnPCcsXHJcbiAgICAgICAgICAgICc8PScsXHJcbiAgICAgICAgICAgICc9PScsXHJcbiAgICAgICAgICAgICc+PScsXHJcbiAgICAgICAgICAgICc+JyxcclxuICAgICAgICAgICAgJ2FycmF5LWNvbnRhaW5zJyxcclxuICAgICAgICAgICAgJ2luJyxcclxuICAgICAgICAgICAgJ2FycmF5LWNvbnRhaW5zLWFueSdcclxuICAgICAgICBdO1xyXG4gICAgICAgIHZhbGlkYXRlU3RyaW5nRW51bSgnUXVlcnkud2hlcmUnLCB3aGVyZUZpbHRlck9wRW51bXMsIDIsIG9wU3RyKTtcclxuICAgICAgICB2YXIgZmllbGRWYWx1ZTtcclxuICAgICAgICB2YXIgZmllbGRQYXRoID0gZmllbGRQYXRoRnJvbUFyZ3VtZW50KCdRdWVyeS53aGVyZScsIGZpZWxkKTtcclxuICAgICAgICB2YXIgb3BlcmF0b3IgPSBPcGVyYXRvci5mcm9tU3RyaW5nKG9wU3RyKTtcclxuICAgICAgICBpZiAoZmllbGRQYXRoLmlzS2V5RmllbGQoKSkge1xyXG4gICAgICAgICAgICBpZiAob3BlcmF0b3IgPT09IE9wZXJhdG9yLkFSUkFZX0NPTlRBSU5TIHx8XHJcbiAgICAgICAgICAgICAgICBvcGVyYXRvciA9PT0gT3BlcmF0b3IuQVJSQVlfQ09OVEFJTlNfQU5ZKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5JTlZBTElEX0FSR1VNRU5ULCBcIkludmFsaWQgUXVlcnkuIFlvdSBjYW4ndCBwZXJmb3JtICdcIiArIG9wZXJhdG9yLnRvU3RyaW5nKCkgKyBcIicgXCIgK1xyXG4gICAgICAgICAgICAgICAgICAgICdxdWVyaWVzIG9uIEZpZWxkUGF0aC5kb2N1bWVudElkKCkuJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAob3BlcmF0b3IgPT09IE9wZXJhdG9yLklOKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnZhbGlkYXRlRGlzanVuY3RpdmVGaWx0ZXJFbGVtZW50cyh2YWx1ZSwgb3BlcmF0b3IpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHJlZmVyZW5jZUxpc3QgPSBbXTtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSB2YWx1ZTsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgYXJyYXlWYWx1ZSA9IF9hW19pXTtcclxuICAgICAgICAgICAgICAgICAgICByZWZlcmVuY2VMaXN0LnB1c2godGhpcy5wYXJzZURvY3VtZW50SWRWYWx1ZShhcnJheVZhbHVlKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBmaWVsZFZhbHVlID0gbmV3IEFycmF5VmFsdWUocmVmZXJlbmNlTGlzdCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBmaWVsZFZhbHVlID0gdGhpcy5wYXJzZURvY3VtZW50SWRWYWx1ZSh2YWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGlmIChvcGVyYXRvciA9PT0gT3BlcmF0b3IuSU4gfHxcclxuICAgICAgICAgICAgICAgIG9wZXJhdG9yID09PSBPcGVyYXRvci5BUlJBWV9DT05UQUlOU19BTlkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudmFsaWRhdGVEaXNqdW5jdGl2ZUZpbHRlckVsZW1lbnRzKHZhbHVlLCBvcGVyYXRvcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZmllbGRWYWx1ZSA9IHRoaXMuZmlyZXN0b3JlLl9kYXRhQ29udmVydGVyLnBhcnNlUXVlcnlWYWx1ZSgnUXVlcnkud2hlcmUnLCB2YWx1ZSwgXHJcbiAgICAgICAgICAgIC8vIFdlIG9ubHkgYWxsb3cgbmVzdGVkIGFycmF5cyBmb3IgSU4gcXVlcmllcy5cclxuICAgICAgICAgICAgLyoqIGFsbG93QXJyYXlzID0gKi8gb3BlcmF0b3IgPT09IE9wZXJhdG9yLklOID8gdHJ1ZSA6IGZhbHNlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGZpbHRlciA9IEZpZWxkRmlsdGVyLmNyZWF0ZShmaWVsZFBhdGgsIG9wZXJhdG9yLCBmaWVsZFZhbHVlKTtcclxuICAgICAgICB0aGlzLnZhbGlkYXRlTmV3RmlsdGVyKGZpbHRlcik7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBRdWVyeSh0aGlzLl9xdWVyeS5hZGRGaWx0ZXIoZmlsdGVyKSwgdGhpcy5maXJlc3RvcmUsIHRoaXMuX2NvbnZlcnRlcik7XHJcbiAgICB9O1xyXG4gICAgUXVlcnkucHJvdG90eXBlLm9yZGVyQnkgPSBmdW5jdGlvbiAoZmllbGQsIGRpcmVjdGlvblN0cikge1xyXG4gICAgICAgIHZhbGlkYXRlQmV0d2Vlbk51bWJlck9mQXJncygnUXVlcnkub3JkZXJCeScsIGFyZ3VtZW50cywgMSwgMik7XHJcbiAgICAgICAgdmFsaWRhdGVPcHRpb25hbEFyZ1R5cGUoJ1F1ZXJ5Lm9yZGVyQnknLCAnbm9uLWVtcHR5IHN0cmluZycsIDIsIGRpcmVjdGlvblN0cik7XHJcbiAgICAgICAgdmFyIGRpcmVjdGlvbjtcclxuICAgICAgICBpZiAoZGlyZWN0aW9uU3RyID09PSB1bmRlZmluZWQgfHwgZGlyZWN0aW9uU3RyID09PSAnYXNjJykge1xyXG4gICAgICAgICAgICBkaXJlY3Rpb24gPSBEaXJlY3Rpb24uQVNDRU5ESU5HO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChkaXJlY3Rpb25TdHIgPT09ICdkZXNjJykge1xyXG4gICAgICAgICAgICBkaXJlY3Rpb24gPSBEaXJlY3Rpb24uREVTQ0VORElORztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLklOVkFMSURfQVJHVU1FTlQsIFwiRnVuY3Rpb24gUXVlcnkub3JkZXJCeSgpIGhhcyB1bmtub3duIGRpcmVjdGlvbiAnXCIgKyBkaXJlY3Rpb25TdHIgKyBcIicsIFwiICtcclxuICAgICAgICAgICAgICAgIFwiZXhwZWN0ZWQgJ2FzYycgb3IgJ2Rlc2MnLlwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuX3F1ZXJ5LnN0YXJ0QXQgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuSU5WQUxJRF9BUkdVTUVOVCwgJ0ludmFsaWQgcXVlcnkuIFlvdSBtdXN0IG5vdCBjYWxsIFF1ZXJ5LnN0YXJ0QXQoKSBvciAnICtcclxuICAgICAgICAgICAgICAgICdRdWVyeS5zdGFydEFmdGVyKCkgYmVmb3JlIGNhbGxpbmcgUXVlcnkub3JkZXJCeSgpLicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5fcXVlcnkuZW5kQXQgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuSU5WQUxJRF9BUkdVTUVOVCwgJ0ludmFsaWQgcXVlcnkuIFlvdSBtdXN0IG5vdCBjYWxsIFF1ZXJ5LmVuZEF0KCkgb3IgJyArXHJcbiAgICAgICAgICAgICAgICAnUXVlcnkuZW5kQmVmb3JlKCkgYmVmb3JlIGNhbGxpbmcgUXVlcnkub3JkZXJCeSgpLicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgZmllbGRQYXRoID0gZmllbGRQYXRoRnJvbUFyZ3VtZW50KCdRdWVyeS5vcmRlckJ5JywgZmllbGQpO1xyXG4gICAgICAgIHZhciBvcmRlckJ5ID0gbmV3IE9yZGVyQnkoZmllbGRQYXRoLCBkaXJlY3Rpb24pO1xyXG4gICAgICAgIHRoaXMudmFsaWRhdGVOZXdPcmRlckJ5KG9yZGVyQnkpO1xyXG4gICAgICAgIHJldHVybiBuZXcgUXVlcnkodGhpcy5fcXVlcnkuYWRkT3JkZXJCeShvcmRlckJ5KSwgdGhpcy5maXJlc3RvcmUsIHRoaXMuX2NvbnZlcnRlcik7XHJcbiAgICB9O1xyXG4gICAgUXVlcnkucHJvdG90eXBlLmxpbWl0ID0gZnVuY3Rpb24gKG4pIHtcclxuICAgICAgICB2YWxpZGF0ZUV4YWN0TnVtYmVyT2ZBcmdzKCdRdWVyeS5saW1pdCcsIGFyZ3VtZW50cywgMSk7XHJcbiAgICAgICAgdmFsaWRhdGVBcmdUeXBlKCdRdWVyeS5saW1pdCcsICdudW1iZXInLCAxLCBuKTtcclxuICAgICAgICB2YWxpZGF0ZVBvc2l0aXZlTnVtYmVyKCdRdWVyeS5saW1pdCcsIDEsIG4pO1xyXG4gICAgICAgIHJldHVybiBuZXcgUXVlcnkodGhpcy5fcXVlcnkud2l0aExpbWl0VG9GaXJzdChuKSwgdGhpcy5maXJlc3RvcmUsIHRoaXMuX2NvbnZlcnRlcik7XHJcbiAgICB9O1xyXG4gICAgUXVlcnkucHJvdG90eXBlLmxpbWl0VG9MYXN0ID0gZnVuY3Rpb24gKG4pIHtcclxuICAgICAgICB2YWxpZGF0ZUV4YWN0TnVtYmVyT2ZBcmdzKCdRdWVyeS5saW1pdFRvTGFzdCcsIGFyZ3VtZW50cywgMSk7XHJcbiAgICAgICAgdmFsaWRhdGVBcmdUeXBlKCdRdWVyeS5saW1pdFRvTGFzdCcsICdudW1iZXInLCAxLCBuKTtcclxuICAgICAgICB2YWxpZGF0ZVBvc2l0aXZlTnVtYmVyKCdRdWVyeS5saW1pdFRvTGFzdCcsIDEsIG4pO1xyXG4gICAgICAgIHJldHVybiBuZXcgUXVlcnkodGhpcy5fcXVlcnkud2l0aExpbWl0VG9MYXN0KG4pLCB0aGlzLmZpcmVzdG9yZSwgdGhpcy5fY29udmVydGVyKTtcclxuICAgIH07XHJcbiAgICBRdWVyeS5wcm90b3R5cGUuc3RhcnRBdCA9IGZ1bmN0aW9uIChkb2NPckZpZWxkKSB7XHJcbiAgICAgICAgdmFyIGZpZWxkcyA9IFtdO1xyXG4gICAgICAgIGZvciAodmFyIF9pID0gMTsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIGZpZWxkc1tfaSAtIDFdID0gYXJndW1lbnRzW19pXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFsaWRhdGVBdExlYXN0TnVtYmVyT2ZBcmdzKCdRdWVyeS5zdGFydEF0JywgYXJndW1lbnRzLCAxKTtcclxuICAgICAgICB2YXIgYm91bmQgPSB0aGlzLmJvdW5kRnJvbURvY09yRmllbGRzKCdRdWVyeS5zdGFydEF0JywgZG9jT3JGaWVsZCwgZmllbGRzLCBcclxuICAgICAgICAvKmJlZm9yZT0qLyB0cnVlKTtcclxuICAgICAgICByZXR1cm4gbmV3IFF1ZXJ5KHRoaXMuX3F1ZXJ5LndpdGhTdGFydEF0KGJvdW5kKSwgdGhpcy5maXJlc3RvcmUsIHRoaXMuX2NvbnZlcnRlcik7XHJcbiAgICB9O1xyXG4gICAgUXVlcnkucHJvdG90eXBlLnN0YXJ0QWZ0ZXIgPSBmdW5jdGlvbiAoZG9jT3JGaWVsZCkge1xyXG4gICAgICAgIHZhciBmaWVsZHMgPSBbXTtcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDE7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICBmaWVsZHNbX2kgLSAxXSA9IGFyZ3VtZW50c1tfaV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhbGlkYXRlQXRMZWFzdE51bWJlck9mQXJncygnUXVlcnkuc3RhcnRBZnRlcicsIGFyZ3VtZW50cywgMSk7XHJcbiAgICAgICAgdmFyIGJvdW5kID0gdGhpcy5ib3VuZEZyb21Eb2NPckZpZWxkcygnUXVlcnkuc3RhcnRBZnRlcicsIGRvY09yRmllbGQsIGZpZWxkcywgXHJcbiAgICAgICAgLypiZWZvcmU9Ki8gZmFsc2UpO1xyXG4gICAgICAgIHJldHVybiBuZXcgUXVlcnkodGhpcy5fcXVlcnkud2l0aFN0YXJ0QXQoYm91bmQpLCB0aGlzLmZpcmVzdG9yZSwgdGhpcy5fY29udmVydGVyKTtcclxuICAgIH07XHJcbiAgICBRdWVyeS5wcm90b3R5cGUuZW5kQmVmb3JlID0gZnVuY3Rpb24gKGRvY09yRmllbGQpIHtcclxuICAgICAgICB2YXIgZmllbGRzID0gW107XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAxOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgZmllbGRzW19pIC0gMV0gPSBhcmd1bWVudHNbX2ldO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YWxpZGF0ZUF0TGVhc3ROdW1iZXJPZkFyZ3MoJ1F1ZXJ5LmVuZEJlZm9yZScsIGFyZ3VtZW50cywgMSk7XHJcbiAgICAgICAgdmFyIGJvdW5kID0gdGhpcy5ib3VuZEZyb21Eb2NPckZpZWxkcygnUXVlcnkuZW5kQmVmb3JlJywgZG9jT3JGaWVsZCwgZmllbGRzLCBcclxuICAgICAgICAvKmJlZm9yZT0qLyB0cnVlKTtcclxuICAgICAgICByZXR1cm4gbmV3IFF1ZXJ5KHRoaXMuX3F1ZXJ5LndpdGhFbmRBdChib3VuZCksIHRoaXMuZmlyZXN0b3JlLCB0aGlzLl9jb252ZXJ0ZXIpO1xyXG4gICAgfTtcclxuICAgIFF1ZXJ5LnByb3RvdHlwZS5lbmRBdCA9IGZ1bmN0aW9uIChkb2NPckZpZWxkKSB7XHJcbiAgICAgICAgdmFyIGZpZWxkcyA9IFtdO1xyXG4gICAgICAgIGZvciAodmFyIF9pID0gMTsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIGZpZWxkc1tfaSAtIDFdID0gYXJndW1lbnRzW19pXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFsaWRhdGVBdExlYXN0TnVtYmVyT2ZBcmdzKCdRdWVyeS5lbmRBdCcsIGFyZ3VtZW50cywgMSk7XHJcbiAgICAgICAgdmFyIGJvdW5kID0gdGhpcy5ib3VuZEZyb21Eb2NPckZpZWxkcygnUXVlcnkuZW5kQXQnLCBkb2NPckZpZWxkLCBmaWVsZHMsIFxyXG4gICAgICAgIC8qYmVmb3JlPSovIGZhbHNlKTtcclxuICAgICAgICByZXR1cm4gbmV3IFF1ZXJ5KHRoaXMuX3F1ZXJ5LndpdGhFbmRBdChib3VuZCksIHRoaXMuZmlyZXN0b3JlLCB0aGlzLl9jb252ZXJ0ZXIpO1xyXG4gICAgfTtcclxuICAgIFF1ZXJ5LnByb3RvdHlwZS5pc0VxdWFsID0gZnVuY3Rpb24gKG90aGVyKSB7XHJcbiAgICAgICAgaWYgKCEob3RoZXIgaW5zdGFuY2VvZiBRdWVyeSkpIHtcclxuICAgICAgICAgICAgdGhyb3cgaW52YWxpZENsYXNzRXJyb3IoJ2lzRXF1YWwnLCAnUXVlcnknLCAxLCBvdGhlcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiAodGhpcy5maXJlc3RvcmUgPT09IG90aGVyLmZpcmVzdG9yZSAmJiB0aGlzLl9xdWVyeS5pc0VxdWFsKG90aGVyLl9xdWVyeSkpO1xyXG4gICAgfTtcclxuICAgIFF1ZXJ5LnByb3RvdHlwZS53aXRoQ29udmVydGVyID0gZnVuY3Rpb24gKGNvbnZlcnRlcikge1xyXG4gICAgICAgIHJldHVybiBuZXcgUXVlcnkodGhpcy5fcXVlcnksIHRoaXMuZmlyZXN0b3JlLCBjb252ZXJ0ZXIpO1xyXG4gICAgfTtcclxuICAgIC8qKiBIZWxwZXIgZnVuY3Rpb24gdG8gY3JlYXRlIGEgYm91bmQgZnJvbSBhIGRvY3VtZW50IG9yIGZpZWxkcyAqL1xyXG4gICAgUXVlcnkucHJvdG90eXBlLmJvdW5kRnJvbURvY09yRmllbGRzID0gZnVuY3Rpb24gKG1ldGhvZE5hbWUsIGRvY09yRmllbGQsIGZpZWxkcywgYmVmb3JlKSB7XHJcbiAgICAgICAgdmFsaWRhdGVEZWZpbmVkKG1ldGhvZE5hbWUsIDEsIGRvY09yRmllbGQpO1xyXG4gICAgICAgIGlmIChkb2NPckZpZWxkIGluc3RhbmNlb2YgRG9jdW1lbnRTbmFwc2hvdCkge1xyXG4gICAgICAgICAgICBpZiAoZmllbGRzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLklOVkFMSURfQVJHVU1FTlQsIFwiVG9vIG1hbnkgYXJndW1lbnRzIHByb3ZpZGVkIHRvIFwiICsgbWV0aG9kTmFtZSArIFwiKCkuXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciBzbmFwID0gZG9jT3JGaWVsZDtcclxuICAgICAgICAgICAgaWYgKCFzbmFwLmV4aXN0cykge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuTk9UX0ZPVU5ELCBcIkNhbid0IHVzZSBhIERvY3VtZW50U25hcHNob3QgdGhhdCBkb2Vzbid0IGV4aXN0IGZvciBcIiArXHJcbiAgICAgICAgICAgICAgICAgICAgKG1ldGhvZE5hbWUgKyBcIigpLlwiKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYm91bmRGcm9tRG9jdW1lbnQobWV0aG9kTmFtZSwgc25hcC5fZG9jdW1lbnQsIGJlZm9yZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB2YXIgYWxsRmllbGRzID0gW2RvY09yRmllbGRdLmNvbmNhdChmaWVsZHMpO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5ib3VuZEZyb21GaWVsZHMobWV0aG9kTmFtZSwgYWxsRmllbGRzLCBiZWZvcmUpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZSBhIEJvdW5kIGZyb20gYSBxdWVyeSBhbmQgYSBkb2N1bWVudC5cclxuICAgICAqXHJcbiAgICAgKiBOb3RlIHRoYXQgdGhlIEJvdW5kIHdpbGwgYWx3YXlzIGluY2x1ZGUgdGhlIGtleSBvZiB0aGUgZG9jdW1lbnRcclxuICAgICAqIGFuZCBzbyBvbmx5IHRoZSBwcm92aWRlZCBkb2N1bWVudCB3aWxsIGNvbXBhcmUgZXF1YWwgdG8gdGhlIHJldHVybmVkXHJcbiAgICAgKiBwb3NpdGlvbi5cclxuICAgICAqXHJcbiAgICAgKiBXaWxsIHRocm93IGlmIHRoZSBkb2N1bWVudCBkb2VzIG5vdCBjb250YWluIGFsbCBmaWVsZHMgb2YgdGhlIG9yZGVyIGJ5XHJcbiAgICAgKiBvZiB0aGUgcXVlcnkgb3IgaWYgYW55IG9mIHRoZSBmaWVsZHMgaW4gdGhlIG9yZGVyIGJ5IGFyZSBhbiB1bmNvbW1pdHRlZFxyXG4gICAgICogc2VydmVyIHRpbWVzdGFtcC5cclxuICAgICAqL1xyXG4gICAgUXVlcnkucHJvdG90eXBlLmJvdW5kRnJvbURvY3VtZW50ID0gZnVuY3Rpb24gKG1ldGhvZE5hbWUsIGRvYywgYmVmb3JlKSB7XHJcbiAgICAgICAgdmFyIGNvbXBvbmVudHMgPSBbXTtcclxuICAgICAgICAvLyBCZWNhdXNlIHBlb3BsZSBleHBlY3QgdG8gY29udGludWUvZW5kIGEgcXVlcnkgYXQgdGhlIGV4YWN0IGRvY3VtZW50XHJcbiAgICAgICAgLy8gcHJvdmlkZWQsIHdlIG5lZWQgdG8gdXNlIHRoZSBpbXBsaWNpdCBzb3J0IG9yZGVyIHJhdGhlciB0aGFuIHRoZSBleHBsaWNpdFxyXG4gICAgICAgIC8vIHNvcnQgb3JkZXIsIGJlY2F1c2UgaXQncyBndWFyYW50ZWVkIHRvIGNvbnRhaW4gdGhlIGRvY3VtZW50IGtleS4gVGhhdCB3YXlcclxuICAgICAgICAvLyB0aGUgcG9zaXRpb24gYmVjb21lcyB1bmFtYmlndW91cyBhbmQgdGhlIHF1ZXJ5IGNvbnRpbnVlcy9lbmRzIGV4YWN0bHkgYXRcclxuICAgICAgICAvLyB0aGUgcHJvdmlkZWQgZG9jdW1lbnQuIFdpdGhvdXQgdGhlIGtleSAoYnkgdXNpbmcgdGhlIGV4cGxpY2l0IHNvcnRcclxuICAgICAgICAvLyBvcmRlcnMpLCBtdWx0aXBsZSBkb2N1bWVudHMgY291bGQgbWF0Y2ggdGhlIHBvc2l0aW9uLCB5aWVsZGluZyBkdXBsaWNhdGVcclxuICAgICAgICAvLyByZXN1bHRzLlxyXG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSB0aGlzLl9xdWVyeS5vcmRlckJ5OyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICB2YXIgb3JkZXJCeSA9IF9hW19pXTtcclxuICAgICAgICAgICAgaWYgKG9yZGVyQnkuZmllbGQuaXNLZXlGaWVsZCgpKSB7XHJcbiAgICAgICAgICAgICAgICBjb21wb25lbnRzLnB1c2gobmV3IFJlZlZhbHVlKHRoaXMuZmlyZXN0b3JlLl9kYXRhYmFzZUlkLCBkb2Mua2V5KSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSBkb2MuZmllbGQob3JkZXJCeS5maWVsZCk7XHJcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBTZXJ2ZXJUaW1lc3RhbXBWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLklOVkFMSURfQVJHVU1FTlQsICdJbnZhbGlkIHF1ZXJ5LiBZb3UgYXJlIHRyeWluZyB0byBzdGFydCBvciBlbmQgYSBxdWVyeSB1c2luZyBhICcgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnZG9jdW1lbnQgZm9yIHdoaWNoIHRoZSBmaWVsZCBcIicgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvcmRlckJ5LmZpZWxkICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ1wiIGlzIGFuIHVuY29tbWl0dGVkIHNlcnZlciB0aW1lc3RhbXAuIChTaW5jZSB0aGUgdmFsdWUgb2YgJyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICd0aGlzIGZpZWxkIGlzIHVua25vd24sIHlvdSBjYW5ub3Qgc3RhcnQvZW5kIGEgcXVlcnkgd2l0aCBpdC4pJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmICh2YWx1ZSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudHMucHVzaCh2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZmllbGQgPSBvcmRlckJ5LmZpZWxkLmNhbm9uaWNhbFN0cmluZygpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLklOVkFMSURfQVJHVU1FTlQsIFwiSW52YWxpZCBxdWVyeS4gWW91IGFyZSB0cnlpbmcgdG8gc3RhcnQgb3IgZW5kIGEgcXVlcnkgdXNpbmcgYSBcIiArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIChcImRvY3VtZW50IGZvciB3aGljaCB0aGUgZmllbGQgJ1wiICsgZmllbGQgKyBcIicgKHVzZWQgYXMgdGhlIFwiKSArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwib3JkZXJCeSkgZG9lcyBub3QgZXhpc3QuXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBuZXcgQm91bmQoY29tcG9uZW50cywgYmVmb3JlKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIENvbnZlcnRzIGEgbGlzdCBvZiBmaWVsZCB2YWx1ZXMgdG8gYSBCb3VuZCBmb3IgdGhlIGdpdmVuIHF1ZXJ5LlxyXG4gICAgICovXHJcbiAgICBRdWVyeS5wcm90b3R5cGUuYm91bmRGcm9tRmllbGRzID0gZnVuY3Rpb24gKG1ldGhvZE5hbWUsIHZhbHVlcywgYmVmb3JlKSB7XHJcbiAgICAgICAgLy8gVXNlIGV4cGxpY2l0IG9yZGVyIGJ5J3MgYmVjYXVzZSBpdCBoYXMgdG8gbWF0Y2ggdGhlIHF1ZXJ5IHRoZSB1c2VyIG1hZGVcclxuICAgICAgICB2YXIgb3JkZXJCeSA9IHRoaXMuX3F1ZXJ5LmV4cGxpY2l0T3JkZXJCeTtcclxuICAgICAgICBpZiAodmFsdWVzLmxlbmd0aCA+IG9yZGVyQnkubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLklOVkFMSURfQVJHVU1FTlQsIFwiVG9vIG1hbnkgYXJndW1lbnRzIHByb3ZpZGVkIHRvIFwiICsgbWV0aG9kTmFtZSArIFwiKCkuIFwiICtcclxuICAgICAgICAgICAgICAgIFwiVGhlIG51bWJlciBvZiBhcmd1bWVudHMgbXVzdCBiZSBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gdGhlIFwiICtcclxuICAgICAgICAgICAgICAgIFwibnVtYmVyIG9mIFF1ZXJ5Lm9yZGVyQnkoKSBjbGF1c2VzXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgY29tcG9uZW50cyA9IFtdO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdmFsdWVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciByYXdWYWx1ZSA9IHZhbHVlc1tpXTtcclxuICAgICAgICAgICAgdmFyIG9yZGVyQnlDb21wb25lbnQgPSBvcmRlckJ5W2ldO1xyXG4gICAgICAgICAgICBpZiAob3JkZXJCeUNvbXBvbmVudC5maWVsZC5pc0tleUZpZWxkKCkpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgcmF3VmFsdWUgIT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuSU5WQUxJRF9BUkdVTUVOVCwgXCJJbnZhbGlkIHF1ZXJ5LiBFeHBlY3RlZCBhIHN0cmluZyBmb3IgZG9jdW1lbnQgSUQgaW4gXCIgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAobWV0aG9kTmFtZSArIFwiKCksIGJ1dCBnb3QgYSBcIiArIHR5cGVvZiByYXdWYWx1ZSkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLl9xdWVyeS5pc0NvbGxlY3Rpb25Hcm91cFF1ZXJ5KCkgJiZcclxuICAgICAgICAgICAgICAgICAgICByYXdWYWx1ZS5pbmRleE9mKCcvJykgIT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuSU5WQUxJRF9BUkdVTUVOVCwgXCJJbnZhbGlkIHF1ZXJ5LiBXaGVuIHF1ZXJ5aW5nIGEgY29sbGVjdGlvbiBhbmQgb3JkZXJpbmcgYnkgRmllbGRQYXRoLmRvY3VtZW50SWQoKSwgXCIgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAoXCJ0aGUgdmFsdWUgcGFzc2VkIHRvIFwiICsgbWV0aG9kTmFtZSArIFwiKCkgbXVzdCBiZSBhIHBsYWluIGRvY3VtZW50IElELCBidXQgXCIpICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgKFwiJ1wiICsgcmF3VmFsdWUgKyBcIicgY29udGFpbnMgYSBzbGFzaC5cIikpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdmFyIHBhdGggPSB0aGlzLl9xdWVyeS5wYXRoLmNoaWxkKFJlc291cmNlUGF0aC5mcm9tU3RyaW5nKHJhd1ZhbHVlKSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoIURvY3VtZW50S2V5LmlzRG9jdW1lbnRLZXkocGF0aCkpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5JTlZBTElEX0FSR1VNRU5ULCBcIkludmFsaWQgcXVlcnkuIFdoZW4gcXVlcnlpbmcgYSBjb2xsZWN0aW9uIGdyb3VwIGFuZCBvcmRlcmluZyBieSBcIiArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIChcIkZpZWxkUGF0aC5kb2N1bWVudElkKCksIHRoZSB2YWx1ZSBwYXNzZWQgdG8gXCIgKyBtZXRob2ROYW1lICsgXCIoKSBtdXN0IHJlc3VsdCBpbiBhIFwiKSArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIChcInZhbGlkIGRvY3VtZW50IHBhdGgsIGJ1dCAnXCIgKyBwYXRoICsgXCInIGlzIG5vdCBiZWNhdXNlIGl0IGNvbnRhaW5zIGFuIG9kZCBudW1iZXIgXCIpICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJvZiBzZWdtZW50cy5cIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB2YXIga2V5ID0gbmV3IERvY3VtZW50S2V5KHBhdGgpO1xyXG4gICAgICAgICAgICAgICAgY29tcG9uZW50cy5wdXNoKG5ldyBSZWZWYWx1ZSh0aGlzLmZpcmVzdG9yZS5fZGF0YWJhc2VJZCwga2V5KSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgd3JhcHBlZCA9IHRoaXMuZmlyZXN0b3JlLl9kYXRhQ29udmVydGVyLnBhcnNlUXVlcnlWYWx1ZShtZXRob2ROYW1lLCByYXdWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICBjb21wb25lbnRzLnB1c2god3JhcHBlZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG5ldyBCb3VuZChjb21wb25lbnRzLCBiZWZvcmUpO1xyXG4gICAgfTtcclxuICAgIFF1ZXJ5LnByb3RvdHlwZS5vblNuYXBzaG90ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBhcmdzID0gW107XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YWxpZGF0ZUJldHdlZW5OdW1iZXJPZkFyZ3MoJ1F1ZXJ5Lm9uU25hcHNob3QnLCBhcmd1bWVudHMsIDEsIDQpO1xyXG4gICAgICAgIHZhciBvcHRpb25zID0ge307XHJcbiAgICAgICAgdmFyIG9ic2VydmVyO1xyXG4gICAgICAgIHZhciBjdXJyQXJnID0gMDtcclxuICAgICAgICBpZiAodHlwZW9mIGFyZ3NbY3VyckFyZ10gPT09ICdvYmplY3QnICYmXHJcbiAgICAgICAgICAgICFpc1BhcnRpYWxPYnNlcnZlcihhcmdzW2N1cnJBcmddKSkge1xyXG4gICAgICAgICAgICBvcHRpb25zID0gYXJnc1tjdXJyQXJnXTtcclxuICAgICAgICAgICAgdmFsaWRhdGVPcHRpb25OYW1lcygnUXVlcnkub25TbmFwc2hvdCcsIG9wdGlvbnMsIFtcclxuICAgICAgICAgICAgICAgICdpbmNsdWRlTWV0YWRhdGFDaGFuZ2VzJ1xyXG4gICAgICAgICAgICBdKTtcclxuICAgICAgICAgICAgdmFsaWRhdGVOYW1lZE9wdGlvbmFsVHlwZSgnUXVlcnkub25TbmFwc2hvdCcsICdib29sZWFuJywgJ2luY2x1ZGVNZXRhZGF0YUNoYW5nZXMnLCBvcHRpb25zLmluY2x1ZGVNZXRhZGF0YUNoYW5nZXMpO1xyXG4gICAgICAgICAgICBjdXJyQXJnKys7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChpc1BhcnRpYWxPYnNlcnZlcihhcmdzW2N1cnJBcmddKSkge1xyXG4gICAgICAgICAgICBvYnNlcnZlciA9IGFyZ3NbY3VyckFyZ107XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB2YWxpZGF0ZUFyZ1R5cGUoJ1F1ZXJ5Lm9uU25hcHNob3QnLCAnZnVuY3Rpb24nLCBjdXJyQXJnLCBhcmdzW2N1cnJBcmddKTtcclxuICAgICAgICAgICAgdmFsaWRhdGVPcHRpb25hbEFyZ1R5cGUoJ1F1ZXJ5Lm9uU25hcHNob3QnLCAnZnVuY3Rpb24nLCBjdXJyQXJnICsgMSwgYXJnc1tjdXJyQXJnICsgMV0pO1xyXG4gICAgICAgICAgICB2YWxpZGF0ZU9wdGlvbmFsQXJnVHlwZSgnUXVlcnkub25TbmFwc2hvdCcsICdmdW5jdGlvbicsIGN1cnJBcmcgKyAyLCBhcmdzW2N1cnJBcmcgKyAyXSk7XHJcbiAgICAgICAgICAgIG9ic2VydmVyID0ge1xyXG4gICAgICAgICAgICAgICAgbmV4dDogYXJnc1tjdXJyQXJnXSxcclxuICAgICAgICAgICAgICAgIGVycm9yOiBhcmdzW2N1cnJBcmcgKyAxXSxcclxuICAgICAgICAgICAgICAgIGNvbXBsZXRlOiBhcmdzW2N1cnJBcmcgKyAyXVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnZhbGlkYXRlSGFzRXhwbGljaXRPcmRlckJ5Rm9yTGltaXRUb0xhc3QodGhpcy5fcXVlcnkpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLm9uU25hcHNob3RJbnRlcm5hbChvcHRpb25zLCBvYnNlcnZlcik7XHJcbiAgICB9O1xyXG4gICAgUXVlcnkucHJvdG90eXBlLm9uU25hcHNob3RJbnRlcm5hbCA9IGZ1bmN0aW9uIChvcHRpb25zLCBvYnNlcnZlcikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIGVyckhhbmRsZXIgPSBmdW5jdGlvbiAoZXJyKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1VuY2F1Z2h0IEVycm9yIGluIG9uU25hcHNob3Q6JywgZXJyKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIGlmIChvYnNlcnZlci5lcnJvcikge1xyXG4gICAgICAgICAgICBlcnJIYW5kbGVyID0gb2JzZXJ2ZXIuZXJyb3IuYmluZChvYnNlcnZlcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBhc3luY09ic2VydmVyID0gbmV3IEFzeW5jT2JzZXJ2ZXIoe1xyXG4gICAgICAgICAgICBuZXh0OiBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAob2JzZXJ2ZXIubmV4dCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG9ic2VydmVyLm5leHQobmV3IFF1ZXJ5U25hcHNob3QoX3RoaXMuZmlyZXN0b3JlLCBfdGhpcy5fcXVlcnksIHJlc3VsdCwgX3RoaXMuX2NvbnZlcnRlcikpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBlcnJvcjogZXJySGFuZGxlclxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHZhciBmaXJlc3RvcmVDbGllbnQgPSB0aGlzLmZpcmVzdG9yZS5lbnN1cmVDbGllbnRDb25maWd1cmVkKCk7XHJcbiAgICAgICAgdmFyIGludGVybmFsTGlzdGVuZXIgPSBmaXJlc3RvcmVDbGllbnQubGlzdGVuKHRoaXMuX3F1ZXJ5LCBhc3luY09ic2VydmVyLCBvcHRpb25zKTtcclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBhc3luY09ic2VydmVyLm11dGUoKTtcclxuICAgICAgICAgICAgZmlyZXN0b3JlQ2xpZW50LnVubGlzdGVuKGludGVybmFsTGlzdGVuZXIpO1xyXG4gICAgICAgIH07XHJcbiAgICB9O1xyXG4gICAgUXVlcnkucHJvdG90eXBlLnZhbGlkYXRlSGFzRXhwbGljaXRPcmRlckJ5Rm9yTGltaXRUb0xhc3QgPSBmdW5jdGlvbiAocXVlcnkpIHtcclxuICAgICAgICBpZiAocXVlcnkuaGFzTGltaXRUb0xhc3QoKSAmJiBxdWVyeS5leHBsaWNpdE9yZGVyQnkubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLlVOSU1QTEVNRU5URUQsICdsaW1pdFRvTGFzdCgpIHF1ZXJpZXMgcmVxdWlyZSBzcGVjaWZ5aW5nIGF0IGxlYXN0IG9uZSBvcmRlckJ5KCkgY2xhdXNlJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFF1ZXJ5LnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAob3B0aW9ucykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFsaWRhdGVCZXR3ZWVuTnVtYmVyT2ZBcmdzKCdRdWVyeS5nZXQnLCBhcmd1bWVudHMsIDAsIDEpO1xyXG4gICAgICAgIHZhbGlkYXRlR2V0T3B0aW9ucygnUXVlcnkuZ2V0Jywgb3B0aW9ucyk7XHJcbiAgICAgICAgdGhpcy52YWxpZGF0ZUhhc0V4cGxpY2l0T3JkZXJCeUZvckxpbWl0VG9MYXN0KHRoaXMuX3F1ZXJ5KTtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLnNvdXJjZSA9PT0gJ2NhY2hlJykge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuZmlyZXN0b3JlXHJcbiAgICAgICAgICAgICAgICAgICAgLmVuc3VyZUNsaWVudENvbmZpZ3VyZWQoKVxyXG4gICAgICAgICAgICAgICAgICAgIC5nZXREb2N1bWVudHNGcm9tTG9jYWxDYWNoZShfdGhpcy5fcXVlcnkpXHJcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHZpZXdTbmFwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShuZXcgUXVlcnlTbmFwc2hvdChfdGhpcy5maXJlc3RvcmUsIF90aGlzLl9xdWVyeSwgdmlld1NuYXAsIF90aGlzLl9jb252ZXJ0ZXIpKTtcclxuICAgICAgICAgICAgICAgIH0sIHJlamVjdCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5nZXRWaWFTbmFwc2hvdExpc3RlbmVyKHJlc29sdmUsIHJlamVjdCwgb3B0aW9ucyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBRdWVyeS5wcm90b3R5cGUuZ2V0VmlhU25hcHNob3RMaXN0ZW5lciA9IGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QsIG9wdGlvbnMpIHtcclxuICAgICAgICB2YXIgdW5saXN0ZW4gPSB0aGlzLm9uU25hcHNob3RJbnRlcm5hbCh7XHJcbiAgICAgICAgICAgIGluY2x1ZGVNZXRhZGF0YUNoYW5nZXM6IHRydWUsXHJcbiAgICAgICAgICAgIHdhaXRGb3JTeW5jV2hlbk9ubGluZTogdHJ1ZVxyXG4gICAgICAgIH0sIHtcclxuICAgICAgICAgICAgbmV4dDogZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgLy8gUmVtb3ZlIHF1ZXJ5IGZpcnN0IGJlZm9yZSBwYXNzaW5nIGV2ZW50IHRvIHVzZXIgdG8gYXZvaWRcclxuICAgICAgICAgICAgICAgIC8vIHVzZXIgYWN0aW9ucyBhZmZlY3RpbmcgdGhlIG5vdyBzdGFsZSBxdWVyeS5cclxuICAgICAgICAgICAgICAgIHVubGlzdGVuKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0Lm1ldGFkYXRhLmZyb21DYWNoZSAmJlxyXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnMgJiZcclxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zLnNvdXJjZSA9PT0gJ3NlcnZlcicpIHtcclxuICAgICAgICAgICAgICAgICAgICByZWplY3QobmV3IEZpcmVzdG9yZUVycm9yKENvZGUuVU5BVkFJTEFCTEUsICdGYWlsZWQgdG8gZ2V0IGRvY3VtZW50cyBmcm9tIHNlcnZlci4gKEhvd2V2ZXIsIHRoZXNlICcgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnZG9jdW1lbnRzIG1heSBleGlzdCBpbiB0aGUgbG9jYWwgY2FjaGUuIFJ1biBhZ2FpbiAnICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ3dpdGhvdXQgc2V0dGluZyBzb3VyY2UgdG8gXCJzZXJ2ZXJcIiB0byAnICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ3JldHJpZXZlIHRoZSBjYWNoZWQgZG9jdW1lbnRzLiknKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHJlc3VsdCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGVycm9yOiByZWplY3RcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFBhcnNlcyB0aGUgZ2l2ZW4gZG9jdW1lbnRJZFZhbHVlIGludG8gYSBSZWZlcmVuY2VWYWx1ZSwgdGhyb3dpbmdcclxuICAgICAqIGFwcHJvcHJpYXRlIGVycm9ycyBpZiB0aGUgdmFsdWUgaXMgYW55dGhpbmcgb3RoZXIgdGhhbiBhIERvY3VtZW50UmVmZXJlbmNlXHJcbiAgICAgKiBvciBTdHJpbmcsIG9yIGlmIHRoZSBzdHJpbmcgaXMgbWFsZm9ybWVkLlxyXG4gICAgICovXHJcbiAgICBRdWVyeS5wcm90b3R5cGUucGFyc2VEb2N1bWVudElkVmFsdWUgPSBmdW5jdGlvbiAoZG9jdW1lbnRJZFZhbHVlKSB7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBkb2N1bWVudElkVmFsdWUgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgIGlmIChkb2N1bWVudElkVmFsdWUgPT09ICcnKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5JTlZBTElEX0FSR1VNRU5ULCAnSW52YWxpZCBxdWVyeS4gV2hlbiBxdWVyeWluZyB3aXRoIEZpZWxkUGF0aC5kb2N1bWVudElkKCksIHlvdSAnICtcclxuICAgICAgICAgICAgICAgICAgICAnbXVzdCBwcm92aWRlIGEgdmFsaWQgZG9jdW1lbnQgSUQsIGJ1dCBpdCB3YXMgYW4gZW1wdHkgc3RyaW5nLicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5fcXVlcnkuaXNDb2xsZWN0aW9uR3JvdXBRdWVyeSgpICYmXHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudElkVmFsdWUuaW5kZXhPZignLycpICE9PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuSU5WQUxJRF9BUkdVTUVOVCwgXCJJbnZhbGlkIHF1ZXJ5LiBXaGVuIHF1ZXJ5aW5nIGEgY29sbGVjdGlvbiBieSBcIiArXHJcbiAgICAgICAgICAgICAgICAgICAgXCJGaWVsZFBhdGguZG9jdW1lbnRJZCgpLCB5b3UgbXVzdCBwcm92aWRlIGEgcGxhaW4gZG9jdW1lbnQgSUQsIGJ1dCBcIiArXHJcbiAgICAgICAgICAgICAgICAgICAgKFwiJ1wiICsgZG9jdW1lbnRJZFZhbHVlICsgXCInIGNvbnRhaW5zIGEgJy8nIGNoYXJhY3Rlci5cIikpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciBwYXRoID0gdGhpcy5fcXVlcnkucGF0aC5jaGlsZChSZXNvdXJjZVBhdGguZnJvbVN0cmluZyhkb2N1bWVudElkVmFsdWUpKTtcclxuICAgICAgICAgICAgaWYgKCFEb2N1bWVudEtleS5pc0RvY3VtZW50S2V5KHBhdGgpKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5JTlZBTElEX0FSR1VNRU5ULCBcIkludmFsaWQgcXVlcnkuIFdoZW4gcXVlcnlpbmcgYSBjb2xsZWN0aW9uIGdyb3VwIGJ5IFwiICtcclxuICAgICAgICAgICAgICAgICAgICBcIkZpZWxkUGF0aC5kb2N1bWVudElkKCksIHRoZSB2YWx1ZSBwcm92aWRlZCBtdXN0IHJlc3VsdCBpbiBhIHZhbGlkIGRvY3VtZW50IHBhdGgsIFwiICtcclxuICAgICAgICAgICAgICAgICAgICAoXCJidXQgJ1wiICsgcGF0aCArIFwiJyBpcyBub3QgYmVjYXVzZSBpdCBoYXMgYW4gb2RkIG51bWJlciBvZiBzZWdtZW50cyAoXCIgKyBwYXRoLmxlbmd0aCArIFwiKS5cIikpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgUmVmVmFsdWUodGhpcy5maXJlc3RvcmUuX2RhdGFiYXNlSWQsIG5ldyBEb2N1bWVudEtleShwYXRoKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGRvY3VtZW50SWRWYWx1ZSBpbnN0YW5jZW9mIERvY3VtZW50UmVmZXJlbmNlKSB7XHJcbiAgICAgICAgICAgIHZhciByZWYgPSBkb2N1bWVudElkVmFsdWU7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgUmVmVmFsdWUodGhpcy5maXJlc3RvcmUuX2RhdGFiYXNlSWQsIHJlZi5fa2V5KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLklOVkFMSURfQVJHVU1FTlQsIFwiSW52YWxpZCBxdWVyeS4gV2hlbiBxdWVyeWluZyB3aXRoIEZpZWxkUGF0aC5kb2N1bWVudElkKCksIHlvdSBtdXN0IHByb3ZpZGUgYSB2YWxpZCBcIiArXHJcbiAgICAgICAgICAgICAgICBcInN0cmluZyBvciBhIERvY3VtZW50UmVmZXJlbmNlLCBidXQgaXQgd2FzOiBcIiArXHJcbiAgICAgICAgICAgICAgICAodmFsdWVEZXNjcmlwdGlvbihkb2N1bWVudElkVmFsdWUpICsgXCIuXCIpKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBWYWxpZGF0ZXMgdGhhdCB0aGUgdmFsdWUgcGFzc2VkIGludG8gYSBkaXNqdW5jdHJpdmUgZmlsdGVyIHNhdGlzZmllcyBhbGxcclxuICAgICAqIGFycmF5IHJlcXVpcmVtZW50cy5cclxuICAgICAqL1xyXG4gICAgUXVlcnkucHJvdG90eXBlLnZhbGlkYXRlRGlzanVuY3RpdmVGaWx0ZXJFbGVtZW50cyA9IGZ1bmN0aW9uICh2YWx1ZSwgb3BlcmF0b3IpIHtcclxuICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkodmFsdWUpIHx8IHZhbHVlLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5JTlZBTElEX0FSR1VNRU5ULCAnSW52YWxpZCBRdWVyeS4gQSBub24tZW1wdHkgYXJyYXkgaXMgcmVxdWlyZWQgZm9yICcgK1xyXG4gICAgICAgICAgICAgICAgKFwiJ1wiICsgb3BlcmF0b3IudG9TdHJpbmcoKSArIFwiJyBmaWx0ZXJzLlwiKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh2YWx1ZS5sZW5ndGggPiAxMCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5JTlZBTElEX0FSR1VNRU5ULCBcIkludmFsaWQgUXVlcnkuICdcIiArIG9wZXJhdG9yLnRvU3RyaW5nKCkgKyBcIicgZmlsdGVycyBzdXBwb3J0IGEgXCIgK1xyXG4gICAgICAgICAgICAgICAgJ21heGltdW0gb2YgMTAgZWxlbWVudHMgaW4gdGhlIHZhbHVlIGFycmF5LicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodmFsdWUuaW5kZXhPZihudWxsKSA+PSAwKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLklOVkFMSURfQVJHVU1FTlQsIFwiSW52YWxpZCBRdWVyeS4gJ1wiICsgb3BlcmF0b3IudG9TdHJpbmcoKSArIFwiJyBmaWx0ZXJzIGNhbm5vdCBjb250YWluICdudWxsJyBcIiArXHJcbiAgICAgICAgICAgICAgICAnaW4gdGhlIHZhbHVlIGFycmF5LicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodmFsdWUuZmlsdGVyKGZ1bmN0aW9uIChlbGVtZW50KSB7IHJldHVybiBOdW1iZXIuaXNOYU4oZWxlbWVudCk7IH0pLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuSU5WQUxJRF9BUkdVTUVOVCwgXCJJbnZhbGlkIFF1ZXJ5LiAnXCIgKyBvcGVyYXRvci50b1N0cmluZygpICsgXCInIGZpbHRlcnMgY2Fubm90IGNvbnRhaW4gJ05hTicgXCIgK1xyXG4gICAgICAgICAgICAgICAgJ2luIHRoZSB2YWx1ZSBhcnJheS4nKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgUXVlcnkucHJvdG90eXBlLnZhbGlkYXRlTmV3RmlsdGVyID0gZnVuY3Rpb24gKGZpbHRlcikge1xyXG4gICAgICAgIGlmIChmaWx0ZXIgaW5zdGFuY2VvZiBGaWVsZEZpbHRlcikge1xyXG4gICAgICAgICAgICB2YXIgYXJyYXlPcHMgPSBbT3BlcmF0b3IuQVJSQVlfQ09OVEFJTlMsIE9wZXJhdG9yLkFSUkFZX0NPTlRBSU5TX0FOWV07XHJcbiAgICAgICAgICAgIHZhciBkaXNqdW5jdGl2ZU9wcyA9IFtPcGVyYXRvci5JTiwgT3BlcmF0b3IuQVJSQVlfQ09OVEFJTlNfQU5ZXTtcclxuICAgICAgICAgICAgdmFyIGlzQXJyYXlPcCA9IGFycmF5T3BzLmluZGV4T2YoZmlsdGVyLm9wKSA+PSAwO1xyXG4gICAgICAgICAgICB2YXIgaXNEaXNqdW5jdGl2ZU9wID0gZGlzanVuY3RpdmVPcHMuaW5kZXhPZihmaWx0ZXIub3ApID49IDA7XHJcbiAgICAgICAgICAgIGlmIChmaWx0ZXIuaXNJbmVxdWFsaXR5KCkpIHtcclxuICAgICAgICAgICAgICAgIHZhciBleGlzdGluZ0ZpZWxkID0gdGhpcy5fcXVlcnkuZ2V0SW5lcXVhbGl0eUZpbHRlckZpZWxkKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXhpc3RpbmdGaWVsZCAhPT0gbnVsbCAmJiAhZXhpc3RpbmdGaWVsZC5pc0VxdWFsKGZpbHRlci5maWVsZCkpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5JTlZBTElEX0FSR1VNRU5ULCAnSW52YWxpZCBxdWVyeS4gQWxsIHdoZXJlIGZpbHRlcnMgd2l0aCBhbiBpbmVxdWFsaXR5JyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICcgKDwsIDw9LCA+LCBvciA+PSkgbXVzdCBiZSBvbiB0aGUgc2FtZSBmaWVsZC4gQnV0IHlvdSBoYXZlJyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIChcIiBpbmVxdWFsaXR5IGZpbHRlcnMgb24gJ1wiICsgZXhpc3RpbmdGaWVsZC50b1N0cmluZygpICsgXCInXCIpICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgKFwiIGFuZCAnXCIgKyBmaWx0ZXIuZmllbGQudG9TdHJpbmcoKSArIFwiJ1wiKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB2YXIgZmlyc3RPcmRlckJ5RmllbGQgPSB0aGlzLl9xdWVyeS5nZXRGaXJzdE9yZGVyQnlGaWVsZCgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGZpcnN0T3JkZXJCeUZpZWxkICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52YWxpZGF0ZU9yZGVyQnlBbmRJbmVxdWFsaXR5TWF0Y2goZmlsdGVyLmZpZWxkLCBmaXJzdE9yZGVyQnlGaWVsZCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoaXNEaXNqdW5jdGl2ZU9wIHx8IGlzQXJyYXlPcCkge1xyXG4gICAgICAgICAgICAgICAgLy8gWW91IGNhbiBoYXZlIGF0IG1vc3QgMSBkaXNqdW5jdGl2ZSBmaWx0ZXIgYW5kIDEgYXJyYXkgZmlsdGVyLiBDaGVjayBpZlxyXG4gICAgICAgICAgICAgICAgLy8gdGhlIG5ldyBmaWx0ZXIgY29uZmxpY3RzIHdpdGggYW4gZXhpc3Rpbmcgb25lLlxyXG4gICAgICAgICAgICAgICAgdmFyIGNvbmZsaWN0aW5nT3AgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgaWYgKGlzRGlzanVuY3RpdmVPcCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbmZsaWN0aW5nT3AgPSB0aGlzLl9xdWVyeS5maW5kRmlsdGVyT3BlcmF0b3IoZGlzanVuY3RpdmVPcHMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKGNvbmZsaWN0aW5nT3AgPT09IG51bGwgJiYgaXNBcnJheU9wKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uZmxpY3RpbmdPcCA9IHRoaXMuX3F1ZXJ5LmZpbmRGaWx0ZXJPcGVyYXRvcihhcnJheU9wcyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoY29uZmxpY3RpbmdPcCAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gV2Ugc3BlY2lhbCBjYXNlIHdoZW4gaXQncyBhIGR1cGxpY2F0ZSBvcCB0byBnaXZlIGEgc2xpZ2h0bHkgY2xlYXJlciBlcnJvciBtZXNzYWdlLlxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjb25mbGljdGluZ09wID09PSBmaWx0ZXIub3ApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuSU5WQUxJRF9BUkdVTUVOVCwgJ0ludmFsaWQgcXVlcnkuIFlvdSBjYW5ub3QgdXNlIG1vcmUgdGhhbiBvbmUgJyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoXCInXCIgKyBmaWx0ZXIub3AudG9TdHJpbmcoKSArIFwiJyBmaWx0ZXIuXCIpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLklOVkFMSURfQVJHVU1FTlQsIFwiSW52YWxpZCBxdWVyeS4gWW91IGNhbm5vdCB1c2UgJ1wiICsgZmlsdGVyLm9wLnRvU3RyaW5nKCkgKyBcIicgZmlsdGVycyBcIiArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoXCJ3aXRoICdcIiArIGNvbmZsaWN0aW5nT3AudG9TdHJpbmcoKSArIFwiJyBmaWx0ZXJzLlwiKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFF1ZXJ5LnByb3RvdHlwZS52YWxpZGF0ZU5ld09yZGVyQnkgPSBmdW5jdGlvbiAob3JkZXJCeSkge1xyXG4gICAgICAgIGlmICh0aGlzLl9xdWVyeS5nZXRGaXJzdE9yZGVyQnlGaWVsZCgpID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgIC8vIFRoaXMgaXMgdGhlIGZpcnN0IG9yZGVyIGJ5LiBJdCBtdXN0IG1hdGNoIGFueSBpbmVxdWFsaXR5LlxyXG4gICAgICAgICAgICB2YXIgaW5lcXVhbGl0eUZpZWxkID0gdGhpcy5fcXVlcnkuZ2V0SW5lcXVhbGl0eUZpbHRlckZpZWxkKCk7XHJcbiAgICAgICAgICAgIGlmIChpbmVxdWFsaXR5RmllbGQgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudmFsaWRhdGVPcmRlckJ5QW5kSW5lcXVhbGl0eU1hdGNoKGluZXF1YWxpdHlGaWVsZCwgb3JkZXJCeS5maWVsZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgUXVlcnkucHJvdG90eXBlLnZhbGlkYXRlT3JkZXJCeUFuZEluZXF1YWxpdHlNYXRjaCA9IGZ1bmN0aW9uIChpbmVxdWFsaXR5LCBvcmRlckJ5KSB7XHJcbiAgICAgICAgaWYgKCFvcmRlckJ5LmlzRXF1YWwoaW5lcXVhbGl0eSkpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuSU5WQUxJRF9BUkdVTUVOVCwgXCJJbnZhbGlkIHF1ZXJ5LiBZb3UgaGF2ZSBhIHdoZXJlIGZpbHRlciB3aXRoIGFuIGluZXF1YWxpdHkgXCIgK1xyXG4gICAgICAgICAgICAgICAgKFwiKDwsIDw9LCA+LCBvciA+PSkgb24gZmllbGQgJ1wiICsgaW5lcXVhbGl0eS50b1N0cmluZygpICsgXCInIFwiKSArXHJcbiAgICAgICAgICAgICAgICAoXCJhbmQgc28geW91IG11c3QgYWxzbyB1c2UgJ1wiICsgaW5lcXVhbGl0eS50b1N0cmluZygpICsgXCInIFwiKSArXHJcbiAgICAgICAgICAgICAgICBcImFzIHlvdXIgZmlyc3QgUXVlcnkub3JkZXJCeSgpLCBidXQgeW91ciBmaXJzdCBRdWVyeS5vcmRlckJ5KCkgXCIgK1xyXG4gICAgICAgICAgICAgICAgKFwiaXMgb24gZmllbGQgJ1wiICsgb3JkZXJCeS50b1N0cmluZygpICsgXCInIGluc3RlYWQuXCIpKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFF1ZXJ5O1xyXG59KCkpO1xyXG52YXIgUXVlcnlTbmFwc2hvdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFF1ZXJ5U25hcHNob3QoX2ZpcmVzdG9yZSwgX29yaWdpbmFsUXVlcnksIF9zbmFwc2hvdCwgX2NvbnZlcnRlcikge1xyXG4gICAgICAgIHRoaXMuX2ZpcmVzdG9yZSA9IF9maXJlc3RvcmU7XHJcbiAgICAgICAgdGhpcy5fb3JpZ2luYWxRdWVyeSA9IF9vcmlnaW5hbFF1ZXJ5O1xyXG4gICAgICAgIHRoaXMuX3NuYXBzaG90ID0gX3NuYXBzaG90O1xyXG4gICAgICAgIHRoaXMuX2NvbnZlcnRlciA9IF9jb252ZXJ0ZXI7XHJcbiAgICAgICAgdGhpcy5fY2FjaGVkQ2hhbmdlcyA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5fY2FjaGVkQ2hhbmdlc0luY2x1ZGVNZXRhZGF0YUNoYW5nZXMgPSBudWxsO1xyXG4gICAgICAgIHRoaXMubWV0YWRhdGEgPSBuZXcgU25hcHNob3RNZXRhZGF0YShfc25hcHNob3QuaGFzUGVuZGluZ1dyaXRlcywgX3NuYXBzaG90LmZyb21DYWNoZSk7XHJcbiAgICB9XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoUXVlcnlTbmFwc2hvdC5wcm90b3R5cGUsIFwiZG9jc1wiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSBbXTtcclxuICAgICAgICAgICAgdGhpcy5mb3JFYWNoKGZ1bmN0aW9uIChkb2MpIHsgcmV0dXJuIHJlc3VsdC5wdXNoKGRvYyk7IH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFF1ZXJ5U25hcHNob3QucHJvdG90eXBlLCBcImVtcHR5XCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3NuYXBzaG90LmRvY3MuaXNFbXB0eSgpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFF1ZXJ5U25hcHNob3QucHJvdG90eXBlLCBcInNpemVcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fc25hcHNob3QuZG9jcy5zaXplO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgUXVlcnlTbmFwc2hvdC5wcm90b3R5cGUuZm9yRWFjaCA9IGZ1bmN0aW9uIChjYWxsYmFjaywgdGhpc0FyZykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFsaWRhdGVCZXR3ZWVuTnVtYmVyT2ZBcmdzKCdRdWVyeVNuYXBzaG90LmZvckVhY2gnLCBhcmd1bWVudHMsIDEsIDIpO1xyXG4gICAgICAgIHZhbGlkYXRlQXJnVHlwZSgnUXVlcnlTbmFwc2hvdC5mb3JFYWNoJywgJ2Z1bmN0aW9uJywgMSwgY2FsbGJhY2spO1xyXG4gICAgICAgIHRoaXMuX3NuYXBzaG90LmRvY3MuZm9yRWFjaChmdW5jdGlvbiAoZG9jKSB7XHJcbiAgICAgICAgICAgIGNhbGxiYWNrLmNhbGwodGhpc0FyZywgX3RoaXMuY29udmVydFRvRG9jdW1lbnRJbXBsKGRvYykpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShRdWVyeVNuYXBzaG90LnByb3RvdHlwZSwgXCJxdWVyeVwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgUXVlcnkkMSh0aGlzLl9vcmlnaW5hbFF1ZXJ5LCB0aGlzLl9maXJlc3RvcmUsIHRoaXMuX2NvbnZlcnRlcik7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBRdWVyeVNuYXBzaG90LnByb3RvdHlwZS5kb2NDaGFuZ2VzID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcclxuICAgICAgICBpZiAob3B0aW9ucykge1xyXG4gICAgICAgICAgICB2YWxpZGF0ZU9wdGlvbk5hbWVzKCdRdWVyeVNuYXBzaG90LmRvY0NoYW5nZXMnLCBvcHRpb25zLCBbXHJcbiAgICAgICAgICAgICAgICAnaW5jbHVkZU1ldGFkYXRhQ2hhbmdlcydcclxuICAgICAgICAgICAgXSk7XHJcbiAgICAgICAgICAgIHZhbGlkYXRlTmFtZWRPcHRpb25hbFR5cGUoJ1F1ZXJ5U25hcHNob3QuZG9jQ2hhbmdlcycsICdib29sZWFuJywgJ2luY2x1ZGVNZXRhZGF0YUNoYW5nZXMnLCBvcHRpb25zLmluY2x1ZGVNZXRhZGF0YUNoYW5nZXMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgaW5jbHVkZU1ldGFkYXRhQ2hhbmdlcyA9ICEhKG9wdGlvbnMgJiYgb3B0aW9ucy5pbmNsdWRlTWV0YWRhdGFDaGFuZ2VzKTtcclxuICAgICAgICBpZiAoaW5jbHVkZU1ldGFkYXRhQ2hhbmdlcyAmJiB0aGlzLl9zbmFwc2hvdC5leGNsdWRlc01ldGFkYXRhQ2hhbmdlcykge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5JTlZBTElEX0FSR1VNRU5ULCAnVG8gaW5jbHVkZSBtZXRhZGF0YSBjaGFuZ2VzIHdpdGggeW91ciBkb2N1bWVudCBjaGFuZ2VzLCB5b3UgbXVzdCAnICtcclxuICAgICAgICAgICAgICAgICdhbHNvIHBhc3MgeyBpbmNsdWRlTWV0YWRhdGFDaGFuZ2VzOnRydWUgfSB0byBvblNuYXBzaG90KCkuJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghdGhpcy5fY2FjaGVkQ2hhbmdlcyB8fFxyXG4gICAgICAgICAgICB0aGlzLl9jYWNoZWRDaGFuZ2VzSW5jbHVkZU1ldGFkYXRhQ2hhbmdlcyAhPT0gaW5jbHVkZU1ldGFkYXRhQ2hhbmdlcykge1xyXG4gICAgICAgICAgICB0aGlzLl9jYWNoZWRDaGFuZ2VzID0gY2hhbmdlc0Zyb21TbmFwc2hvdCh0aGlzLl9maXJlc3RvcmUsIGluY2x1ZGVNZXRhZGF0YUNoYW5nZXMsIHRoaXMuX3NuYXBzaG90LCB0aGlzLl9jb252ZXJ0ZXIpO1xyXG4gICAgICAgICAgICB0aGlzLl9jYWNoZWRDaGFuZ2VzSW5jbHVkZU1ldGFkYXRhQ2hhbmdlcyA9IGluY2x1ZGVNZXRhZGF0YUNoYW5nZXM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLl9jYWNoZWRDaGFuZ2VzO1xyXG4gICAgfTtcclxuICAgIC8qKiBDaGVjayB0aGUgZXF1YWxpdHkuIFRoZSBjYWxsIGNhbiBiZSB2ZXJ5IGV4cGVuc2l2ZS4gKi9cclxuICAgIFF1ZXJ5U25hcHNob3QucHJvdG90eXBlLmlzRXF1YWwgPSBmdW5jdGlvbiAob3RoZXIpIHtcclxuICAgICAgICBpZiAoIShvdGhlciBpbnN0YW5jZW9mIFF1ZXJ5U25hcHNob3QpKSB7XHJcbiAgICAgICAgICAgIHRocm93IGludmFsaWRDbGFzc0Vycm9yKCdpc0VxdWFsJywgJ1F1ZXJ5U25hcHNob3QnLCAxLCBvdGhlcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiAodGhpcy5fZmlyZXN0b3JlID09PSBvdGhlci5fZmlyZXN0b3JlICYmXHJcbiAgICAgICAgICAgIHRoaXMuX29yaWdpbmFsUXVlcnkuaXNFcXVhbChvdGhlci5fb3JpZ2luYWxRdWVyeSkgJiZcclxuICAgICAgICAgICAgdGhpcy5fc25hcHNob3QuaXNFcXVhbChvdGhlci5fc25hcHNob3QpICYmXHJcbiAgICAgICAgICAgIHRoaXMuX2NvbnZlcnRlciA9PT0gb3RoZXIuX2NvbnZlcnRlcik7XHJcbiAgICB9O1xyXG4gICAgUXVlcnlTbmFwc2hvdC5wcm90b3R5cGUuY29udmVydFRvRG9jdW1lbnRJbXBsID0gZnVuY3Rpb24gKGRvYykge1xyXG4gICAgICAgIHJldHVybiBuZXcgUXVlcnlEb2N1bWVudFNuYXBzaG90KHRoaXMuX2ZpcmVzdG9yZSwgZG9jLmtleSwgZG9jLCB0aGlzLm1ldGFkYXRhLmZyb21DYWNoZSwgdGhpcy5fc25hcHNob3QubXV0YXRlZEtleXMuaGFzKGRvYy5rZXkpLCB0aGlzLl9jb252ZXJ0ZXIpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBRdWVyeVNuYXBzaG90O1xyXG59KCkpO1xyXG4vLyBUT0RPKDIwMTgvMTEvMDEpOiBBcyBvZiAyMDE4LzA0LzE3IHdlJ3JlIGNoYW5naW5nIGRvY0NoYW5nZXMgZnJvbSBhbiBhcnJheVxyXG4vLyBpbnRvIGEgbWV0aG9kLiBCZWNhdXNlIHRoaXMgaXMgYSBydW50aW1lIGJyZWFraW5nIGNoYW5nZSBhbmQgc29tZXdoYXQgc3VidGxlXHJcbi8vIChib3RoIEFycmF5IGFuZCBGdW5jdGlvbiBoYXZlIGEgLmxlbmd0aCwgZXRjLiksIHdlJ2xsIHJlcGxhY2UgY29tbW9ubHktdXNlZFxyXG4vLyBwcm9wZXJ0aWVzIChpbmNsdWRpbmcgU3ltYm9sLml0ZXJhdG9yKSB0byB0aHJvdyBhIGN1c3RvbSBlcnJvciBtZXNzYWdlLiBJblxyXG4vLyB+NiBtb250aHMgd2UgY2FuIGRlbGV0ZSB0aGUgY3VzdG9tIGVycm9yIGFzIG1vc3QgZm9sa3Mgd2lsbCBoYXZlIGhvcGVmdWxseVxyXG4vLyBtaWdyYXRlZC5cclxuZnVuY3Rpb24gdGhyb3dEb2NDaGFuZ2VzTWV0aG9kRXJyb3IoKSB7XHJcbiAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5JTlZBTElEX0FSR1VNRU5ULCAnUXVlcnlTbmFwc2hvdC5kb2NDaGFuZ2VzIGhhcyBiZWVuIGNoYW5nZWQgZnJvbSBhIHByb3BlcnR5IGludG8gYSAnICtcclxuICAgICAgICAnbWV0aG9kLCBzbyB1c2FnZXMgbGlrZSBcInF1ZXJ5U25hcHNob3QuZG9jQ2hhbmdlc1wiIHNob3VsZCBiZWNvbWUgJyArXHJcbiAgICAgICAgJ1wicXVlcnlTbmFwc2hvdC5kb2NDaGFuZ2VzKClcIicpO1xyXG59XHJcbnZhciBkb2NDaGFuZ2VzUHJvcGVydGllc1RvT3ZlcnJpZGUgPSB0c2xpYi5fX3NwcmVhZEFycmF5cyhbXHJcbiAgICAnbGVuZ3RoJyxcclxuICAgICdmb3JFYWNoJyxcclxuICAgICdtYXAnXHJcbl0sICh0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyA/IFtTeW1ib2wuaXRlcmF0b3JdIDogW10pKTtcclxuZG9jQ2hhbmdlc1Byb3BlcnRpZXNUb092ZXJyaWRlLmZvckVhY2goZnVuY3Rpb24gKHByb3BlcnR5KSB7XHJcbiAgICAvKipcclxuICAgICAqIFdlIGFyZSAocmUtKWRlZmluaW5nIHByb3BlcnRpZXMgb24gUXVlcnlTbmFwc2hvdC5wcm90b3R5cGUuZG9jQ2hhbmdlcyB3aGljaFxyXG4gICAgICogaXMgYSBGdW5jdGlvbi4gVGhpcyBjb3VsZCBmYWlsLCBpbiBwYXJ0aWN1bGFyIGluIHRoZSBjYXNlIG9mICdsZW5ndGgnIHdoaWNoXHJcbiAgICAgKiBhbHJlYWR5IGV4aXN0cyBvbiBGdW5jdGlvbi5wcm90b3R5cGUgYW5kIG9uIElFMTEgaXMgaW1wcm9wZXJseSBkZWZpbmVkIHdpdGhcclxuICAgICAqIGB7IGNvbmZpZ3VyYWJsZTogZmFsc2UgfWAuIFNvIHdlIHdyYXAgdGhpcyBpbiBhIHRyeS9jYXRjaCB0byBlbnN1cmUgdGhhdCB3ZVxyXG4gICAgICogc3RpbGwgaGF2ZSBhIGZ1bmN0aW9uYWwgU0RLLlxyXG4gICAgICovXHJcbiAgICB0cnkge1xyXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShRdWVyeVNuYXBzaG90LnByb3RvdHlwZS5kb2NDaGFuZ2VzLCBwcm9wZXJ0eSwge1xyXG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRocm93RG9jQ2hhbmdlc01ldGhvZEVycm9yKCk7IH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlcnIpIHsgfSAvLyBJZ25vcmUgdGhpcyBmYWlsdXJlIGludGVudGlvbmFsbHlcclxufSk7XHJcbnZhciBDb2xsZWN0aW9uUmVmZXJlbmNlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgdHNsaWIuX19leHRlbmRzKENvbGxlY3Rpb25SZWZlcmVuY2UsIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBDb2xsZWN0aW9uUmVmZXJlbmNlKF9wYXRoLCBmaXJlc3RvcmUsIF9jb252ZXJ0ZXIpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBRdWVyeS5hdFBhdGgoX3BhdGgpLCBmaXJlc3RvcmUsIF9jb252ZXJ0ZXIpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMuX3BhdGggPSBfcGF0aDtcclxuICAgICAgICBpZiAoX3BhdGgubGVuZ3RoICUgMiAhPT0gMSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5JTlZBTElEX0FSR1VNRU5ULCAnSW52YWxpZCBjb2xsZWN0aW9uIHJlZmVyZW5jZS4gQ29sbGVjdGlvbiAnICtcclxuICAgICAgICAgICAgICAgICdyZWZlcmVuY2VzIG11c3QgaGF2ZSBhbiBvZGQgbnVtYmVyIG9mIHNlZ21lbnRzLCBidXQgJyArXHJcbiAgICAgICAgICAgICAgICAoX3BhdGguY2Fub25pY2FsU3RyaW5nKCkgKyBcIiBoYXMgXCIgKyBfcGF0aC5sZW5ndGgpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KENvbGxlY3Rpb25SZWZlcmVuY2UucHJvdG90eXBlLCBcImlkXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3F1ZXJ5LnBhdGgubGFzdFNlZ21lbnQoKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDb2xsZWN0aW9uUmVmZXJlbmNlLnByb3RvdHlwZSwgXCJwYXJlbnRcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgcGFyZW50UGF0aCA9IHRoaXMuX3F1ZXJ5LnBhdGgucG9wTGFzdCgpO1xyXG4gICAgICAgICAgICBpZiAocGFyZW50UGF0aC5pc0VtcHR5KCkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBEb2N1bWVudFJlZmVyZW5jZShuZXcgRG9jdW1lbnRLZXkocGFyZW50UGF0aCksIHRoaXMuZmlyZXN0b3JlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KENvbGxlY3Rpb25SZWZlcmVuY2UucHJvdG90eXBlLCBcInBhdGhcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fcXVlcnkucGF0aC5jYW5vbmljYWxTdHJpbmcoKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIENvbGxlY3Rpb25SZWZlcmVuY2UucHJvdG90eXBlLmRvYyA9IGZ1bmN0aW9uIChwYXRoU3RyaW5nKSB7XHJcbiAgICAgICAgdmFsaWRhdGVCZXR3ZWVuTnVtYmVyT2ZBcmdzKCdDb2xsZWN0aW9uUmVmZXJlbmNlLmRvYycsIGFyZ3VtZW50cywgMCwgMSk7XHJcbiAgICAgICAgLy8gV2UgYWxsb3cgb21pc3Npb24gb2YgJ3BhdGhTdHJpbmcnIGJ1dCBleHBsaWNpdGx5IHByb2hpYml0IHBhc3NpbmcgaW4gYm90aFxyXG4gICAgICAgIC8vICd1bmRlZmluZWQnIGFuZCAnbnVsbCcuXHJcbiAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgcGF0aFN0cmluZyA9IEF1dG9JZC5uZXdJZCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YWxpZGF0ZUFyZ1R5cGUoJ0NvbGxlY3Rpb25SZWZlcmVuY2UuZG9jJywgJ25vbi1lbXB0eSBzdHJpbmcnLCAxLCBwYXRoU3RyaW5nKTtcclxuICAgICAgICBpZiAocGF0aFN0cmluZyA9PT0gJycpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuSU5WQUxJRF9BUkdVTUVOVCwgJ0RvY3VtZW50IHBhdGggbXVzdCBiZSBhIG5vbi1lbXB0eSBzdHJpbmcnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIHBhdGggPSBSZXNvdXJjZVBhdGguZnJvbVN0cmluZyhwYXRoU3RyaW5nKTtcclxuICAgICAgICByZXR1cm4gRG9jdW1lbnRSZWZlcmVuY2UuZm9yUGF0aCh0aGlzLl9xdWVyeS5wYXRoLmNoaWxkKHBhdGgpLCB0aGlzLmZpcmVzdG9yZSwgdGhpcy5fY29udmVydGVyKTtcclxuICAgIH07XHJcbiAgICBDb2xsZWN0aW9uUmVmZXJlbmNlLnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICB2YWxpZGF0ZUV4YWN0TnVtYmVyT2ZBcmdzKCdDb2xsZWN0aW9uUmVmZXJlbmNlLmFkZCcsIGFyZ3VtZW50cywgMSk7XHJcbiAgICAgICAgdmFsaWRhdGVBcmdUeXBlKCdDb2xsZWN0aW9uUmVmZXJlbmNlLmFkZCcsICdvYmplY3QnLCAxLCB2YWx1ZSk7XHJcbiAgICAgICAgdmFyIGRvY1JlZiA9IHRoaXMuZG9jKCk7XHJcbiAgICAgICAgcmV0dXJuIGRvY1JlZi5zZXQodmFsdWUpLnRoZW4oZnVuY3Rpb24gKCkgeyByZXR1cm4gZG9jUmVmOyB9KTtcclxuICAgIH07XHJcbiAgICBDb2xsZWN0aW9uUmVmZXJlbmNlLnByb3RvdHlwZS53aXRoQ29udmVydGVyID0gZnVuY3Rpb24gKGNvbnZlcnRlcikge1xyXG4gICAgICAgIHJldHVybiBuZXcgQ29sbGVjdGlvblJlZmVyZW5jZSh0aGlzLl9wYXRoLCB0aGlzLmZpcmVzdG9yZSwgY29udmVydGVyKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gQ29sbGVjdGlvblJlZmVyZW5jZTtcclxufShRdWVyeSQxKSk7XHJcbmZ1bmN0aW9uIHZhbGlkYXRlU2V0T3B0aW9ucyhtZXRob2ROYW1lLCBvcHRpb25zKSB7XHJcbiAgICBpZiAob3B0aW9ucyA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgbWVyZ2U6IGZhbHNlXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIHZhbGlkYXRlT3B0aW9uTmFtZXMobWV0aG9kTmFtZSwgb3B0aW9ucywgWydtZXJnZScsICdtZXJnZUZpZWxkcyddKTtcclxuICAgIHZhbGlkYXRlTmFtZWRPcHRpb25hbFR5cGUobWV0aG9kTmFtZSwgJ2Jvb2xlYW4nLCAnbWVyZ2UnLCBvcHRpb25zLm1lcmdlKTtcclxuICAgIHZhbGlkYXRlT3B0aW9uYWxBcnJheUVsZW1lbnRzKG1ldGhvZE5hbWUsICdtZXJnZUZpZWxkcycsICdhIHN0cmluZyBvciBhIEZpZWxkUGF0aCcsIG9wdGlvbnMubWVyZ2VGaWVsZHMsIGZ1bmN0aW9uIChlbGVtZW50KSB7XHJcbiAgICAgICAgcmV0dXJuIHR5cGVvZiBlbGVtZW50ID09PSAnc3RyaW5nJyB8fCBlbGVtZW50IGluc3RhbmNlb2YgRmllbGRQYXRoJDE7XHJcbiAgICB9KTtcclxuICAgIGlmIChvcHRpb25zLm1lcmdlRmllbGRzICE9PSB1bmRlZmluZWQgJiYgb3B0aW9ucy5tZXJnZSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuSU5WQUxJRF9BUkdVTUVOVCwgXCJJbnZhbGlkIG9wdGlvbnMgcGFzc2VkIHRvIGZ1bmN0aW9uIFwiICsgbWV0aG9kTmFtZSArIFwiKCk6IFlvdSBjYW5ub3Qgc3BlY2lmeSBib3RoIFxcXCJtZXJnZVxcXCIgXCIgK1xyXG4gICAgICAgICAgICBcImFuZCBcXFwibWVyZ2VGaWVsZHNcXFwiLlwiKTtcclxuICAgIH1cclxuICAgIHJldHVybiBvcHRpb25zO1xyXG59XHJcbmZ1bmN0aW9uIHZhbGlkYXRlU25hcHNob3RPcHRpb25zKG1ldGhvZE5hbWUsIG9wdGlvbnMpIHtcclxuICAgIGlmIChvcHRpb25zID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICByZXR1cm4ge307XHJcbiAgICB9XHJcbiAgICB2YWxpZGF0ZU9wdGlvbk5hbWVzKG1ldGhvZE5hbWUsIG9wdGlvbnMsIFsnc2VydmVyVGltZXN0YW1wcyddKTtcclxuICAgIHZhbGlkYXRlTmFtZWRPcHRpb25hbFByb3BlcnR5RXF1YWxzKG1ldGhvZE5hbWUsICdvcHRpb25zJywgJ3NlcnZlclRpbWVzdGFtcHMnLCBvcHRpb25zLnNlcnZlclRpbWVzdGFtcHMsIFsnZXN0aW1hdGUnLCAncHJldmlvdXMnLCAnbm9uZSddKTtcclxuICAgIHJldHVybiBvcHRpb25zO1xyXG59XHJcbmZ1bmN0aW9uIHZhbGlkYXRlR2V0T3B0aW9ucyhtZXRob2ROYW1lLCBvcHRpb25zKSB7XHJcbiAgICB2YWxpZGF0ZU9wdGlvbmFsQXJnVHlwZShtZXRob2ROYW1lLCAnb2JqZWN0JywgMSwgb3B0aW9ucyk7XHJcbiAgICBpZiAob3B0aW9ucykge1xyXG4gICAgICAgIHZhbGlkYXRlT3B0aW9uTmFtZXMobWV0aG9kTmFtZSwgb3B0aW9ucywgWydzb3VyY2UnXSk7XHJcbiAgICAgICAgdmFsaWRhdGVOYW1lZE9wdGlvbmFsUHJvcGVydHlFcXVhbHMobWV0aG9kTmFtZSwgJ29wdGlvbnMnLCAnc291cmNlJywgb3B0aW9ucy5zb3VyY2UsIFsnZGVmYXVsdCcsICdzZXJ2ZXInLCAnY2FjaGUnXSk7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gdmFsaWRhdGVSZWZlcmVuY2UobWV0aG9kTmFtZSwgZG9jdW1lbnRSZWYsIGZpcmVzdG9yZSkge1xyXG4gICAgaWYgKCEoZG9jdW1lbnRSZWYgaW5zdGFuY2VvZiBEb2N1bWVudFJlZmVyZW5jZSkpIHtcclxuICAgICAgICB0aHJvdyBpbnZhbGlkQ2xhc3NFcnJvcihtZXRob2ROYW1lLCAnRG9jdW1lbnRSZWZlcmVuY2UnLCAxLCBkb2N1bWVudFJlZik7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChkb2N1bWVudFJlZi5maXJlc3RvcmUgIT09IGZpcmVzdG9yZSkge1xyXG4gICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLklOVkFMSURfQVJHVU1FTlQsICdQcm92aWRlZCBkb2N1bWVudCByZWZlcmVuY2UgaXMgZnJvbSBhIGRpZmZlcmVudCBGaXJlc3RvcmUgaW5zdGFuY2UuJyk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICByZXR1cm4gZG9jdW1lbnRSZWY7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIENhbGN1bGF0ZXMgdGhlIGFycmF5IG9mIGZpcmVzdG9yZS5Eb2N1bWVudENoYW5nZSdzIGZvciBhIGdpdmVuIFZpZXdTbmFwc2hvdC5cclxuICpcclxuICogRXhwb3J0ZWQgZm9yIHRlc3RpbmcuXHJcbiAqL1xyXG5mdW5jdGlvbiBjaGFuZ2VzRnJvbVNuYXBzaG90KGZpcmVzdG9yZSwgaW5jbHVkZU1ldGFkYXRhQ2hhbmdlcywgc25hcHNob3QsIGNvbnZlcnRlcikge1xyXG4gICAgaWYgKHNuYXBzaG90Lm9sZERvY3MuaXNFbXB0eSgpKSB7XHJcbiAgICAgICAgLy8gU3BlY2lhbCBjYXNlIHRoZSBmaXJzdCBzbmFwc2hvdCBiZWNhdXNlIGluZGV4IGNhbGN1bGF0aW9uIGlzIGVhc3kgYW5kXHJcbiAgICAgICAgLy8gZmFzdFxyXG4gICAgICAgIHZhciBsYXN0RG9jXzE7XHJcbiAgICAgICAgdmFyIGluZGV4XzEgPSAwO1xyXG4gICAgICAgIHJldHVybiBzbmFwc2hvdC5kb2NDaGFuZ2VzLm1hcChmdW5jdGlvbiAoY2hhbmdlKSB7XHJcbiAgICAgICAgICAgIHZhciBkb2MgPSBuZXcgUXVlcnlEb2N1bWVudFNuYXBzaG90KGZpcmVzdG9yZSwgY2hhbmdlLmRvYy5rZXksIGNoYW5nZS5kb2MsIHNuYXBzaG90LmZyb21DYWNoZSwgc25hcHNob3QubXV0YXRlZEtleXMuaGFzKGNoYW5nZS5kb2Mua2V5KSwgY29udmVydGVyKTtcclxuICAgICAgICAgICAgYXNzZXJ0KGNoYW5nZS50eXBlID09PSBDaGFuZ2VUeXBlLkFkZGVkLCAnSW52YWxpZCBldmVudCB0eXBlIGZvciBmaXJzdCBzbmFwc2hvdCcpO1xyXG4gICAgICAgICAgICBhc3NlcnQoIWxhc3REb2NfMSB8fCBzbmFwc2hvdC5xdWVyeS5kb2NDb21wYXJhdG9yKGxhc3REb2NfMSwgY2hhbmdlLmRvYykgPCAwLCAnR290IGFkZGVkIGV2ZW50cyBpbiB3cm9uZyBvcmRlcicpO1xyXG4gICAgICAgICAgICBsYXN0RG9jXzEgPSBjaGFuZ2UuZG9jO1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgdHlwZTogJ2FkZGVkJyxcclxuICAgICAgICAgICAgICAgIGRvYzogZG9jLFxyXG4gICAgICAgICAgICAgICAgb2xkSW5kZXg6IC0xLFxyXG4gICAgICAgICAgICAgICAgbmV3SW5kZXg6IGluZGV4XzErK1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgLy8gQSBEb2N1bWVudFNldCB0aGF0IGlzIHVwZGF0ZWQgaW5jcmVtZW50YWxseSBhcyBjaGFuZ2VzIGFyZSBhcHBsaWVkIHRvIHVzZVxyXG4gICAgICAgIC8vIHRvIGxvb2t1cCB0aGUgaW5kZXggb2YgYSBkb2N1bWVudC5cclxuICAgICAgICB2YXIgaW5kZXhUcmFja2VyXzEgPSBzbmFwc2hvdC5vbGREb2NzO1xyXG4gICAgICAgIHJldHVybiBzbmFwc2hvdC5kb2NDaGFuZ2VzXHJcbiAgICAgICAgICAgIC5maWx0ZXIoZnVuY3Rpb24gKGNoYW5nZSkgeyByZXR1cm4gaW5jbHVkZU1ldGFkYXRhQ2hhbmdlcyB8fCBjaGFuZ2UudHlwZSAhPT0gQ2hhbmdlVHlwZS5NZXRhZGF0YTsgfSlcclxuICAgICAgICAgICAgLm1hcChmdW5jdGlvbiAoY2hhbmdlKSB7XHJcbiAgICAgICAgICAgIHZhciBkb2MgPSBuZXcgUXVlcnlEb2N1bWVudFNuYXBzaG90KGZpcmVzdG9yZSwgY2hhbmdlLmRvYy5rZXksIGNoYW5nZS5kb2MsIHNuYXBzaG90LmZyb21DYWNoZSwgc25hcHNob3QubXV0YXRlZEtleXMuaGFzKGNoYW5nZS5kb2Mua2V5KSwgY29udmVydGVyKTtcclxuICAgICAgICAgICAgdmFyIG9sZEluZGV4ID0gLTE7XHJcbiAgICAgICAgICAgIHZhciBuZXdJbmRleCA9IC0xO1xyXG4gICAgICAgICAgICBpZiAoY2hhbmdlLnR5cGUgIT09IENoYW5nZVR5cGUuQWRkZWQpIHtcclxuICAgICAgICAgICAgICAgIG9sZEluZGV4ID0gaW5kZXhUcmFja2VyXzEuaW5kZXhPZihjaGFuZ2UuZG9jLmtleSk7XHJcbiAgICAgICAgICAgICAgICBhc3NlcnQob2xkSW5kZXggPj0gMCwgJ0luZGV4IGZvciBkb2N1bWVudCBub3QgZm91bmQnKTtcclxuICAgICAgICAgICAgICAgIGluZGV4VHJhY2tlcl8xID0gaW5kZXhUcmFja2VyXzEuZGVsZXRlKGNoYW5nZS5kb2Mua2V5KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoY2hhbmdlLnR5cGUgIT09IENoYW5nZVR5cGUuUmVtb3ZlZCkge1xyXG4gICAgICAgICAgICAgICAgaW5kZXhUcmFja2VyXzEgPSBpbmRleFRyYWNrZXJfMS5hZGQoY2hhbmdlLmRvYyk7XHJcbiAgICAgICAgICAgICAgICBuZXdJbmRleCA9IGluZGV4VHJhY2tlcl8xLmluZGV4T2YoY2hhbmdlLmRvYy5rZXkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB7IHR5cGU6IHJlc3VsdENoYW5nZVR5cGUoY2hhbmdlLnR5cGUpLCBkb2M6IGRvYywgb2xkSW5kZXg6IG9sZEluZGV4LCBuZXdJbmRleDogbmV3SW5kZXggfTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiByZXN1bHRDaGFuZ2VUeXBlKHR5cGUpIHtcclxuICAgIHN3aXRjaCAodHlwZSkge1xyXG4gICAgICAgIGNhc2UgQ2hhbmdlVHlwZS5BZGRlZDpcclxuICAgICAgICAgICAgcmV0dXJuICdhZGRlZCc7XHJcbiAgICAgICAgY2FzZSBDaGFuZ2VUeXBlLk1vZGlmaWVkOlxyXG4gICAgICAgIGNhc2UgQ2hhbmdlVHlwZS5NZXRhZGF0YTpcclxuICAgICAgICAgICAgcmV0dXJuICdtb2RpZmllZCc7XHJcbiAgICAgICAgY2FzZSBDaGFuZ2VUeXBlLlJlbW92ZWQ6XHJcbiAgICAgICAgICAgIHJldHVybiAncmVtb3ZlZCc7XHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgcmV0dXJuIGZhaWwoJ1Vua25vd24gY2hhbmdlIHR5cGU6ICcgKyB0eXBlKTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogQ29udmVydHMgY3VzdG9tIG1vZGVsIG9iamVjdCBvZiB0eXBlIFQgaW50byBEb2N1bWVudERhdGEgYnkgYXBwbHlpbmcgdGhlXHJcbiAqIGNvbnZlcnRlciBpZiBpdCBleGlzdHMuXHJcbiAqXHJcbiAqIFRoaXMgZnVuY3Rpb24gaXMgdXNlZCB3aGVuIGNvbnZlcnRpbmcgdXNlciBvYmplY3RzIHRvIERvY3VtZW50RGF0YVxyXG4gKiBiZWNhdXNlIHdlIHdhbnQgdG8gcHJvdmlkZSB0aGUgdXNlciB3aXRoIGEgbW9yZSBzcGVjaWZpYyBlcnJvciBtZXNzYWdlIGlmXHJcbiAqIHRoZWlyIHNldCgpIG9yIGZhaWxzIGR1ZSB0byBpbnZhbGlkIGRhdGEgb3JpZ2luYXRpbmcgZnJvbSBhIHRvRmlyZXN0b3JlKClcclxuICogY2FsbC5cclxuICovXHJcbmZ1bmN0aW9uIGFwcGx5RmlyZXN0b3JlRGF0YUNvbnZlcnRlcihjb252ZXJ0ZXIsIHZhbHVlLCBmdW5jdGlvbk5hbWUpIHtcclxuICAgIHZhciBjb252ZXJ0ZWRWYWx1ZTtcclxuICAgIGlmIChjb252ZXJ0ZXIpIHtcclxuICAgICAgICBjb252ZXJ0ZWRWYWx1ZSA9IGNvbnZlcnRlci50b0ZpcmVzdG9yZSh2YWx1ZSk7XHJcbiAgICAgICAgZnVuY3Rpb25OYW1lID0gJ3RvRmlyZXN0b3JlKCkgaW4gJyArIGZ1bmN0aW9uTmFtZTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIGNvbnZlcnRlZFZhbHVlID0gdmFsdWU7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gW2NvbnZlcnRlZFZhbHVlLCBmdW5jdGlvbk5hbWVdO1xyXG59XHJcbi8vIEV4cG9ydCB0aGUgY2xhc3NlcyB3aXRoIGEgcHJpdmF0ZSBjb25zdHJ1Y3RvciAoaXQgd2lsbCBmYWlsIGlmIGludm9rZWRcclxuLy8gYXQgcnVudGltZSkuIE5vdGUgdGhhdCB0aGlzIHN0aWxsIGFsbG93cyBpbnN0YW5jZW9mIGNoZWNrcy5cclxuLy8gV2UncmUgdHJlYXRpbmcgdGhlIHZhcmlhYmxlcyBhcyBjbGFzcyBuYW1lcywgc28gZGlzYWJsZSBjaGVja2luZyBmb3IgbG93ZXJcclxuLy8gY2FzZSB2YXJpYWJsZSBuYW1lcy5cclxudmFyIFB1YmxpY0ZpcmVzdG9yZSA9IG1ha2VDb25zdHJ1Y3RvclByaXZhdGUoRmlyZXN0b3JlLCAnVXNlIGZpcmViYXNlLmZpcmVzdG9yZSgpIGluc3RlYWQuJyk7XHJcbnZhciBQdWJsaWNUcmFuc2FjdGlvbiA9IG1ha2VDb25zdHJ1Y3RvclByaXZhdGUoVHJhbnNhY3Rpb24kMSwgJ1VzZSBmaXJlYmFzZS5maXJlc3RvcmUoKS5ydW5UcmFuc2FjdGlvbigpIGluc3RlYWQuJyk7XHJcbnZhciBQdWJsaWNXcml0ZUJhdGNoID0gbWFrZUNvbnN0cnVjdG9yUHJpdmF0ZShXcml0ZUJhdGNoLCAnVXNlIGZpcmViYXNlLmZpcmVzdG9yZSgpLmJhdGNoKCkgaW5zdGVhZC4nKTtcclxudmFyIFB1YmxpY0RvY3VtZW50UmVmZXJlbmNlID0gbWFrZUNvbnN0cnVjdG9yUHJpdmF0ZShEb2N1bWVudFJlZmVyZW5jZSwgJ1VzZSBmaXJlYmFzZS5maXJlc3RvcmUoKS5kb2MoKSBpbnN0ZWFkLicpO1xyXG52YXIgUHVibGljRG9jdW1lbnRTbmFwc2hvdCA9IG1ha2VDb25zdHJ1Y3RvclByaXZhdGUoRG9jdW1lbnRTbmFwc2hvdCk7XHJcbnZhciBQdWJsaWNRdWVyeURvY3VtZW50U25hcHNob3QgPSBtYWtlQ29uc3RydWN0b3JQcml2YXRlKFF1ZXJ5RG9jdW1lbnRTbmFwc2hvdCk7XHJcbnZhciBQdWJsaWNRdWVyeSA9IG1ha2VDb25zdHJ1Y3RvclByaXZhdGUoUXVlcnkkMSk7XHJcbnZhciBQdWJsaWNRdWVyeVNuYXBzaG90ID0gbWFrZUNvbnN0cnVjdG9yUHJpdmF0ZShRdWVyeVNuYXBzaG90KTtcclxudmFyIFB1YmxpY0NvbGxlY3Rpb25SZWZlcmVuY2UgPSBtYWtlQ29uc3RydWN0b3JQcml2YXRlKENvbGxlY3Rpb25SZWZlcmVuY2UsICdVc2UgZmlyZWJhc2UuZmlyZXN0b3JlKCkuY29sbGVjdGlvbigpIGluc3RlYWQuJyk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG52YXIgZmlyZXN0b3JlTmFtZXNwYWNlID0ge1xyXG4gICAgRmlyZXN0b3JlOiBQdWJsaWNGaXJlc3RvcmUsXHJcbiAgICBHZW9Qb2ludDogR2VvUG9pbnQsXHJcbiAgICBUaW1lc3RhbXA6IFRpbWVzdGFtcCxcclxuICAgIEJsb2I6IFB1YmxpY0Jsb2IsXHJcbiAgICBUcmFuc2FjdGlvbjogUHVibGljVHJhbnNhY3Rpb24sXHJcbiAgICBXcml0ZUJhdGNoOiBQdWJsaWNXcml0ZUJhdGNoLFxyXG4gICAgRG9jdW1lbnRSZWZlcmVuY2U6IFB1YmxpY0RvY3VtZW50UmVmZXJlbmNlLFxyXG4gICAgRG9jdW1lbnRTbmFwc2hvdDogUHVibGljRG9jdW1lbnRTbmFwc2hvdCxcclxuICAgIFF1ZXJ5OiBQdWJsaWNRdWVyeSxcclxuICAgIFF1ZXJ5RG9jdW1lbnRTbmFwc2hvdDogUHVibGljUXVlcnlEb2N1bWVudFNuYXBzaG90LFxyXG4gICAgUXVlcnlTbmFwc2hvdDogUHVibGljUXVlcnlTbmFwc2hvdCxcclxuICAgIENvbGxlY3Rpb25SZWZlcmVuY2U6IFB1YmxpY0NvbGxlY3Rpb25SZWZlcmVuY2UsXHJcbiAgICBGaWVsZFBhdGg6IEZpZWxkUGF0aCQxLFxyXG4gICAgRmllbGRWYWx1ZTogUHVibGljRmllbGRWYWx1ZSxcclxuICAgIHNldExvZ0xldmVsOiBGaXJlc3RvcmUuc2V0TG9nTGV2ZWwsXHJcbiAgICBDQUNIRV9TSVpFX1VOTElNSVRFRDogQ0FDSEVfU0laRV9VTkxJTUlURURcclxufTtcclxuLyoqXHJcbiAqIENvbmZpZ3VyZXMgRmlyZXN0b3JlIGFzIHBhcnQgb2YgdGhlIEZpcmViYXNlIFNESyBieSBjYWxsaW5nIHJlZ2lzdGVyU2VydmljZS5cclxuICovXHJcbmZ1bmN0aW9uIGNvbmZpZ3VyZUZvckZpcmViYXNlKGZpcmViYXNlKSB7XHJcbiAgICBmaXJlYmFzZS5JTlRFUk5BTC5yZWdpc3RlckNvbXBvbmVudChuZXcgY29tcG9uZW50LkNvbXBvbmVudCgnZmlyZXN0b3JlJywgZnVuY3Rpb24gKGNvbnRhaW5lcikge1xyXG4gICAgICAgIHZhciBhcHAgPSBjb250YWluZXIuZ2V0UHJvdmlkZXIoJ2FwcCcpLmdldEltbWVkaWF0ZSgpO1xyXG4gICAgICAgIHJldHVybiBuZXcgRmlyZXN0b3JlKGFwcCwgY29udGFpbmVyLmdldFByb3ZpZGVyKCdhdXRoLWludGVybmFsJykpO1xyXG4gICAgfSwgXCJQVUJMSUNcIiAvKiBQVUJMSUMgKi8pLnNldFNlcnZpY2VQcm9wcyhzaGFsbG93Q29weShmaXJlc3RvcmVOYW1lc3BhY2UpKSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnZhciBOb29wQ29ubmVjdGl2aXR5TW9uaXRvciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIE5vb3BDb25uZWN0aXZpdHlNb25pdG9yKCkge1xyXG4gICAgfVxyXG4gICAgTm9vcENvbm5lY3Rpdml0eU1vbml0b3IucHJvdG90eXBlLmFkZENhbGxiYWNrID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgLy8gTm8tb3AuXHJcbiAgICB9O1xyXG4gICAgTm9vcENvbm5lY3Rpdml0eU1vbml0b3IucHJvdG90eXBlLnNodXRkb3duID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vIE5vLW9wLlxyXG4gICAgfTtcclxuICAgIHJldHVybiBOb29wQ29ubmVjdGl2aXR5TW9uaXRvcjtcclxufSgpKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnZhciBMT0dfVEFHJGMgPSAnQ29ubmVjdGl2aXR5TW9uaXRvcic7XHJcbi8qKlxyXG4gKiBCcm93c2VyIGltcGxlbWVudGF0aW9uIG9mIENvbm5lY3Rpdml0eU1vbml0b3IuXHJcbiAqL1xyXG52YXIgQnJvd3NlckNvbm5lY3Rpdml0eU1vbml0b3IgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBCcm93c2VyQ29ubmVjdGl2aXR5TW9uaXRvcigpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMubmV0d29ya0F2YWlsYWJsZUxpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXMub25OZXR3b3JrQXZhaWxhYmxlKCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLm5ldHdvcmtVbmF2YWlsYWJsZUxpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXMub25OZXR3b3JrVW5hdmFpbGFibGUoKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuY2FsbGJhY2tzID0gW107XHJcbiAgICAgICAgdGhpcy5jb25maWd1cmVOZXR3b3JrTW9uaXRvcmluZygpO1xyXG4gICAgfVxyXG4gICAgQnJvd3NlckNvbm5lY3Rpdml0eU1vbml0b3IucHJvdG90eXBlLmFkZENhbGxiYWNrID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgdGhpcy5jYWxsYmFja3MucHVzaChjYWxsYmFjayk7XHJcbiAgICB9O1xyXG4gICAgQnJvd3NlckNvbm5lY3Rpdml0eU1vbml0b3IucHJvdG90eXBlLnNodXRkb3duID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdvbmxpbmUnLCB0aGlzLm5ldHdvcmtBdmFpbGFibGVMaXN0ZW5lcik7XHJcbiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ29mZmxpbmUnLCB0aGlzLm5ldHdvcmtVbmF2YWlsYWJsZUxpc3RlbmVyKTtcclxuICAgIH07XHJcbiAgICBCcm93c2VyQ29ubmVjdGl2aXR5TW9uaXRvci5wcm90b3R5cGUuY29uZmlndXJlTmV0d29ya01vbml0b3JpbmcgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ29ubGluZScsIHRoaXMubmV0d29ya0F2YWlsYWJsZUxpc3RlbmVyKTtcclxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignb2ZmbGluZScsIHRoaXMubmV0d29ya1VuYXZhaWxhYmxlTGlzdGVuZXIpO1xyXG4gICAgfTtcclxuICAgIEJyb3dzZXJDb25uZWN0aXZpdHlNb25pdG9yLnByb3RvdHlwZS5vbk5ldHdvcmtBdmFpbGFibGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgZGVidWcoTE9HX1RBRyRjLCAnTmV0d29yayBjb25uZWN0aXZpdHkgY2hhbmdlZDogQVZBSUxBQkxFJyk7XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHRoaXMuY2FsbGJhY2tzOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICB2YXIgY2FsbGJhY2sgPSBfYVtfaV07XHJcbiAgICAgICAgICAgIGNhbGxiYWNrKDAgLyogQVZBSUxBQkxFICovKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgQnJvd3NlckNvbm5lY3Rpdml0eU1vbml0b3IucHJvdG90eXBlLm9uTmV0d29ya1VuYXZhaWxhYmxlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGRlYnVnKExPR19UQUckYywgJ05ldHdvcmsgY29ubmVjdGl2aXR5IGNoYW5nZWQ6IFVOQVZBSUxBQkxFJyk7XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHRoaXMuY2FsbGJhY2tzOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICB2YXIgY2FsbGJhY2sgPSBfYVtfaV07XHJcbiAgICAgICAgICAgIGNhbGxiYWNrKDEgLyogVU5BVkFJTEFCTEUgKi8pO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvLyBUT0RPKGNoZW5icmlhbik6IENvbnNpZGVyIHBhc3NpbmcgaW4gd2luZG93IGVpdGhlciBpbnRvIHRoaXMgY29tcG9uZW50IG9yXHJcbiAgICAvLyBoZXJlIGZvciB0ZXN0aW5nIHZpYSBGYWtlV2luZG93LlxyXG4gICAgLyoqIENoZWNrcyB0aGF0IGFsbCB1c2VkIGF0dHJpYnV0ZXMgb2Ygd2luZG93IGFyZSBhdmFpbGFibGUuICovXHJcbiAgICBCcm93c2VyQ29ubmVjdGl2aXR5TW9uaXRvci5pc0F2YWlsYWJsZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmXHJcbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyICE9PSB1bmRlZmluZWQgJiZcclxuICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIgIT09IHVuZGVmaW5lZCk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEJyb3dzZXJDb25uZWN0aXZpdHlNb25pdG9yO1xyXG59KCkpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFByb3ZpZGVzIGEgc2ltcGxlIGhlbHBlciBjbGFzcyB0aGF0IGltcGxlbWVudHMgdGhlIFN0cmVhbSBpbnRlcmZhY2UgdG9cclxuICogYnJpZGdlIHRvIG90aGVyIGltcGxlbWVudGF0aW9ucyB0aGF0IGFyZSBzdHJlYW1zIGJ1dCBkbyBub3QgaW1wbGVtZW50IHRoZVxyXG4gKiBpbnRlcmZhY2UuIFRoZSBzdHJlYW0gY2FsbGJhY2tzIGFyZSBpbnZva2VkIHdpdGggdGhlIGNhbGxPbi4uLiBtZXRob2RzLlxyXG4gKi9cclxudmFyIFN0cmVhbUJyaWRnZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFN0cmVhbUJyaWRnZShhcmdzKSB7XHJcbiAgICAgICAgdGhpcy5zZW5kRm4gPSBhcmdzLnNlbmRGbjtcclxuICAgICAgICB0aGlzLmNsb3NlRm4gPSBhcmdzLmNsb3NlRm47XHJcbiAgICB9XHJcbiAgICBTdHJlYW1CcmlkZ2UucHJvdG90eXBlLm9uT3BlbiA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xyXG4gICAgICAgIGFzc2VydCghdGhpcy53cmFwcGVkT25PcGVuLCAnQ2FsbGVkIG9uT3BlbiBvbiBzdHJlYW0gdHdpY2UhJyk7XHJcbiAgICAgICAgdGhpcy53cmFwcGVkT25PcGVuID0gY2FsbGJhY2s7XHJcbiAgICB9O1xyXG4gICAgU3RyZWFtQnJpZGdlLnByb3RvdHlwZS5vbkNsb3NlID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgYXNzZXJ0KCF0aGlzLndyYXBwZWRPbkNsb3NlLCAnQ2FsbGVkIG9uQ2xvc2Ugb24gc3RyZWFtIHR3aWNlIScpO1xyXG4gICAgICAgIHRoaXMud3JhcHBlZE9uQ2xvc2UgPSBjYWxsYmFjaztcclxuICAgIH07XHJcbiAgICBTdHJlYW1CcmlkZ2UucHJvdG90eXBlLm9uTWVzc2FnZSA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xyXG4gICAgICAgIGFzc2VydCghdGhpcy53cmFwcGVkT25NZXNzYWdlLCAnQ2FsbGVkIG9uTWVzc2FnZSBvbiBzdHJlYW0gdHdpY2UhJyk7XHJcbiAgICAgICAgdGhpcy53cmFwcGVkT25NZXNzYWdlID0gY2FsbGJhY2s7XHJcbiAgICB9O1xyXG4gICAgU3RyZWFtQnJpZGdlLnByb3RvdHlwZS5jbG9zZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmNsb3NlRm4oKTtcclxuICAgIH07XHJcbiAgICBTdHJlYW1CcmlkZ2UucHJvdG90eXBlLnNlbmQgPSBmdW5jdGlvbiAobXNnKSB7XHJcbiAgICAgICAgdGhpcy5zZW5kRm4obXNnKTtcclxuICAgIH07XHJcbiAgICBTdHJlYW1CcmlkZ2UucHJvdG90eXBlLmNhbGxPbk9wZW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgYXNzZXJ0KHRoaXMud3JhcHBlZE9uT3BlbiAhPT0gdW5kZWZpbmVkLCAnQ2Fubm90IGNhbGwgb25PcGVuIGJlY2F1c2Ugbm8gY2FsbGJhY2sgd2FzIHNldCcpO1xyXG4gICAgICAgIHRoaXMud3JhcHBlZE9uT3BlbigpO1xyXG4gICAgfTtcclxuICAgIFN0cmVhbUJyaWRnZS5wcm90b3R5cGUuY2FsbE9uQ2xvc2UgPSBmdW5jdGlvbiAoZXJyKSB7XHJcbiAgICAgICAgYXNzZXJ0KHRoaXMud3JhcHBlZE9uQ2xvc2UgIT09IHVuZGVmaW5lZCwgJ0Nhbm5vdCBjYWxsIG9uQ2xvc2UgYmVjYXVzZSBubyBjYWxsYmFjayB3YXMgc2V0Jyk7XHJcbiAgICAgICAgdGhpcy53cmFwcGVkT25DbG9zZShlcnIpO1xyXG4gICAgfTtcclxuICAgIFN0cmVhbUJyaWRnZS5wcm90b3R5cGUuY2FsbE9uTWVzc2FnZSA9IGZ1bmN0aW9uIChtc2cpIHtcclxuICAgICAgICBhc3NlcnQodGhpcy53cmFwcGVkT25NZXNzYWdlICE9PSB1bmRlZmluZWQsICdDYW5ub3QgY2FsbCBvbk1lc3NhZ2UgYmVjYXVzZSBubyBjYWxsYmFjayB3YXMgc2V0Jyk7XHJcbiAgICAgICAgdGhpcy53cmFwcGVkT25NZXNzYWdlKG1zZyk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFN0cmVhbUJyaWRnZTtcclxufSgpKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnZhciBMT0dfVEFHJGQgPSAnQ29ubmVjdGlvbic7XHJcbnZhciBSUENfU1RSRUFNX1NFUlZJQ0UgPSAnZ29vZ2xlLmZpcmVzdG9yZS52MS5GaXJlc3RvcmUnO1xyXG52YXIgUlBDX1VSTF9WRVJTSU9OID0gJ3YxJztcclxuLyoqXHJcbiAqIE1hcHMgUlBDIG5hbWVzIHRvIHRoZSBjb3JyZXNwb25kaW5nIFJFU1QgZW5kcG9pbnQgbmFtZS5cclxuICogVXNlcyBPYmplY3QgTGl0ZXJhbCBub3RhdGlvbiB0byBhdm9pZCByZW5hbWluZy5cclxuICovXHJcbnZhciBSUENfTkFNRV9SRVNUX01BUFBJTkcgPSB7fTtcclxuUlBDX05BTUVfUkVTVF9NQVBQSU5HWydCYXRjaEdldERvY3VtZW50cyddID0gJ2JhdGNoR2V0JztcclxuUlBDX05BTUVfUkVTVF9NQVBQSU5HWydDb21taXQnXSA9ICdjb21taXQnO1xyXG4vLyBUT0RPKGIvMzgyMDMzNDQpOiBUaGUgU0RLX1ZFUlNJT04gaXMgc2V0IGluZGVwZW5kZW50bHkgZnJvbSBGaXJlYmFzZSBiZWNhdXNlXHJcbi8vIHdlIGFyZSBkb2luZyBvdXQtb2YtYmFuZCByZWxlYXNlcy4gT25jZSB3ZSByZWxlYXNlIGFzIHBhcnQgb2YgRmlyZWJhc2UsIHdlXHJcbi8vIHNob3VsZCB1c2UgdGhlIEZpcmViYXNlIHZlcnNpb24gaW5zdGVhZC5cclxudmFyIFhfR09PR19BUElfQ0xJRU5UX1ZBTFVFID0gJ2dsLWpzLyBmaXJlLycgKyBTREtfVkVSU0lPTjtcclxudmFyIFhIUl9USU1FT1VUX1NFQ1MgPSAxNTtcclxudmFyIFdlYkNoYW5uZWxDb25uZWN0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gV2ViQ2hhbm5lbENvbm5lY3Rpb24oaW5mbykge1xyXG4gICAgICAgIHRoaXMuZGF0YWJhc2VJZCA9IGluZm8uZGF0YWJhc2VJZDtcclxuICAgICAgICB2YXIgcHJvdG8gPSBpbmZvLnNzbCA/ICdodHRwcycgOiAnaHR0cCc7XHJcbiAgICAgICAgdGhpcy5iYXNlVXJsID0gcHJvdG8gKyAnOi8vJyArIGluZm8uaG9zdDtcclxuICAgICAgICB0aGlzLmZvcmNlTG9uZ1BvbGxpbmcgPSBpbmZvLmZvcmNlTG9uZ1BvbGxpbmc7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIE1vZGlmaWVzIHRoZSBoZWFkZXJzIGZvciBhIHJlcXVlc3QsIGFkZGluZyBhbnkgYXV0aG9yaXphdGlvbiB0b2tlbiBpZlxyXG4gICAgICogcHJlc2VudCBhbmQgYW55IGFkZGl0aW9uYWwgaGVhZGVycyBmb3IgdGhlIHJlcXVlc3QuXHJcbiAgICAgKi9cclxuICAgIFdlYkNoYW5uZWxDb25uZWN0aW9uLnByb3RvdHlwZS5tb2RpZnlIZWFkZXJzRm9yUmVxdWVzdCA9IGZ1bmN0aW9uIChoZWFkZXJzLCB0b2tlbikge1xyXG4gICAgICAgIGlmICh0b2tlbikge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBoZWFkZXIgaW4gdG9rZW4uYXV0aEhlYWRlcnMpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0b2tlbi5hdXRoSGVhZGVycy5oYXNPd25Qcm9wZXJ0eShoZWFkZXIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyc1toZWFkZXJdID0gdG9rZW4uYXV0aEhlYWRlcnNbaGVhZGVyXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBoZWFkZXJzWydYLUdvb2ctQXBpLUNsaWVudCddID0gWF9HT09HX0FQSV9DTElFTlRfVkFMVUU7XHJcbiAgICB9O1xyXG4gICAgV2ViQ2hhbm5lbENvbm5lY3Rpb24ucHJvdG90eXBlLmludm9rZVJQQyA9IGZ1bmN0aW9uIChycGNOYW1lLCByZXF1ZXN0LCB0b2tlbikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIHVybCA9IHRoaXMubWFrZVVybChycGNOYW1lKTtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICB2YXIgeGhyID0gbmV3IHdlYmNoYW5uZWxXcmFwcGVyLlhocklvKCk7XHJcbiAgICAgICAgICAgIHhoci5saXN0ZW5PbmNlKHdlYmNoYW5uZWxXcmFwcGVyLkV2ZW50VHlwZS5DT01QTEVURSwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHhoci5nZXRMYXN0RXJyb3JDb2RlKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSB3ZWJjaGFubmVsV3JhcHBlci5FcnJvckNvZGUuTk9fRVJST1I6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIganNvbiA9IHhoci5nZXRSZXNwb25zZUpzb24oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlYnVnKExPR19UQUckZCwgJ1hIUiByZWNlaXZlZDonLCBKU09OLnN0cmluZ2lmeShqc29uKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGpzb24pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2Ugd2ViY2hhbm5lbFdyYXBwZXIuRXJyb3JDb2RlLlRJTUVPVVQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWJ1ZyhMT0dfVEFHJGQsICdSUEMgXCInICsgcnBjTmFtZSArICdcIiB0aW1lZCBvdXQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5ERUFETElORV9FWENFRURFRCwgJ1JlcXVlc3QgdGltZSBvdXQnKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSB3ZWJjaGFubmVsV3JhcHBlci5FcnJvckNvZGUuSFRUUF9FUlJPUjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzdGF0dXNfMSA9IHhoci5nZXRTdGF0dXMoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlYnVnKExPR19UQUckZCwgJ1JQQyBcIicgKyBycGNOYW1lICsgJ1wiIGZhaWxlZCB3aXRoIHN0YXR1czonLCBzdGF0dXNfMSwgJ3Jlc3BvbnNlIHRleHQ6JywgeGhyLmdldFJlc3BvbnNlVGV4dCgpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdGF0dXNfMSA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVzcG9uc2VFcnJvciA9IHhoci5nZXRSZXNwb25zZUpzb24oKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZXJyb3I7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEhcmVzcG9uc2VFcnJvciAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAhIXJlc3BvbnNlRXJyb3Iuc3RhdHVzICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICEhcmVzcG9uc2VFcnJvci5tZXNzYWdlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmaXJlc3RvcmVFcnJvckNvZGUgPSBtYXBDb2RlRnJvbUh0dHBSZXNwb25zZUVycm9yU3RhdHVzKHJlc3BvbnNlRXJyb3Iuc3RhdHVzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KG5ldyBGaXJlc3RvcmVFcnJvcihmaXJlc3RvcmVFcnJvckNvZGUsIHJlc3BvbnNlRXJyb3IubWVzc2FnZSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLlVOS05PV04sICdTZXJ2ZXIgcmVzcG9uZGVkIHdpdGggc3RhdHVzICcgKyB4aHIuZ2V0U3RhdHVzKCkpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiB3ZSByZWNlaXZlZCBhbiBIVFRQX0VSUk9SIGJ1dCB0aGVyZSdzIG5vIHN0YXR1cyBjb2RlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGl0J3MgbW9zdCBwcm9iYWJseSBhIGNvbm5lY3Rpb24gaXNzdWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWJ1ZyhMT0dfVEFHJGQsICdSUEMgXCInICsgcnBjTmFtZSArICdcIiBmYWlsZWQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWplY3QobmV3IEZpcmVzdG9yZUVycm9yKENvZGUuVU5BVkFJTEFCTEUsICdDb25uZWN0aW9uIGZhaWxlZC4nKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZhaWwoJ1JQQyBcIicgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJwY05hbWUgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdcIiBmYWlsZWQgd2l0aCB1bmFudGljaXBhdGVkICcgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICd3ZWJjaGFubmVsIGVycm9yICcgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHhoci5nZXRMYXN0RXJyb3JDb2RlKCkgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICc6ICcgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHhoci5nZXRMYXN0RXJyb3IoKSArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJywgZ2l2aW5nIHVwLicpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGZpbmFsbHkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlYnVnKExPR19UQUckZCwgJ1JQQyBcIicgKyBycGNOYW1lICsgJ1wiIGNvbXBsZXRlZC4nKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIC8vIFRoZSBkYXRhYmFzZSBmaWVsZCBpcyBhbHJlYWR5IGVuY29kZWQgaW4gVVJMLiBTcGVjaWZ5aW5nIGl0IGFnYWluIGluXHJcbiAgICAgICAgICAgIC8vIHRoZSBib2R5IGlzIG5vdCBuZWNlc3NhcnkgaW4gcHJvZHVjdGlvbiwgYW5kIHdpbGwgY2F1c2UgZHVwbGljYXRlIGZpZWxkXHJcbiAgICAgICAgICAgIC8vIGVycm9ycyBpbiB0aGUgRmlyZXN0b3JlIEVtdWxhdG9yLiBMZXQncyByZW1vdmUgaXQuXHJcbiAgICAgICAgICAgIHZhciBqc29uT2JqID0gdHNsaWIuX19hc3NpZ24oe30sIHJlcXVlc3QpO1xyXG4gICAgICAgICAgICBkZWxldGUganNvbk9iai5kYXRhYmFzZTtcclxuICAgICAgICAgICAgdmFyIHJlcXVlc3RTdHJpbmcgPSBKU09OLnN0cmluZ2lmeShqc29uT2JqKTtcclxuICAgICAgICAgICAgZGVidWcoTE9HX1RBRyRkLCAnWEhSIHNlbmRpbmc6ICcsIHVybCArICcgJyArIHJlcXVlc3RTdHJpbmcpO1xyXG4gICAgICAgICAgICAvLyBDb250ZW50LVR5cGU6IHRleHQvcGxhaW4gd2lsbCBhdm9pZCBwcmVmbGlnaHQgcmVxdWVzdHMgd2hpY2ggbWlnaHRcclxuICAgICAgICAgICAgLy8gbWVzcyB3aXRoIENPUlMgYW5kIHJlZGlyZWN0cyBieSBwcm94aWVzLiBJZiB3ZSBhZGQgY3VzdG9tIGhlYWRlcnNcclxuICAgICAgICAgICAgLy8gd2Ugd2lsbCBuZWVkIHRvIGNoYW5nZSB0aGlzIGNvZGUgdG8gcG90ZW50aWFsbHkgdXNlIHRoZVxyXG4gICAgICAgICAgICAvLyAkaHR0cE92ZXJ3cml0ZSBwYXJhbWV0ZXIgc3VwcG9ydGVkIGJ5IEVTRiB0byBhdm9pZFxyXG4gICAgICAgICAgICAvLyB0cmlnZ2VyaW5nIHByZWZsaWdodCByZXF1ZXN0cy5cclxuICAgICAgICAgICAgdmFyIGhlYWRlcnMgPSB7ICdDb250ZW50LVR5cGUnOiAndGV4dC9wbGFpbicgfTtcclxuICAgICAgICAgICAgX3RoaXMubW9kaWZ5SGVhZGVyc0ZvclJlcXVlc3QoaGVhZGVycywgdG9rZW4pO1xyXG4gICAgICAgICAgICB4aHIuc2VuZCh1cmwsICdQT1NUJywgcmVxdWVzdFN0cmluZywgaGVhZGVycywgWEhSX1RJTUVPVVRfU0VDUyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgV2ViQ2hhbm5lbENvbm5lY3Rpb24ucHJvdG90eXBlLmludm9rZVN0cmVhbWluZ1JQQyA9IGZ1bmN0aW9uIChycGNOYW1lLCByZXF1ZXN0LCB0b2tlbikge1xyXG4gICAgICAgIC8vIFRoZSBSRVNUIEFQSSBhdXRvbWF0aWNhbGx5IGFnZ3JlZ2F0ZXMgYWxsIG9mIHRoZSBzdHJlYW1lZCByZXN1bHRzLCBzbyB3ZVxyXG4gICAgICAgIC8vIGNhbiBqdXN0IHVzZSB0aGUgbm9ybWFsIGludm9rZSgpIG1ldGhvZC5cclxuICAgICAgICByZXR1cm4gdGhpcy5pbnZva2VSUEMocnBjTmFtZSwgcmVxdWVzdCwgdG9rZW4pO1xyXG4gICAgfTtcclxuICAgIFdlYkNoYW5uZWxDb25uZWN0aW9uLnByb3RvdHlwZS5vcGVuU3RyZWFtID0gZnVuY3Rpb24gKHJwY05hbWUsIHRva2VuKSB7XHJcbiAgICAgICAgdmFyIHVybFBhcnRzID0gW1xyXG4gICAgICAgICAgICB0aGlzLmJhc2VVcmwsXHJcbiAgICAgICAgICAgICcvJyxcclxuICAgICAgICAgICAgUlBDX1NUUkVBTV9TRVJWSUNFLFxyXG4gICAgICAgICAgICAnLycsXHJcbiAgICAgICAgICAgIHJwY05hbWUsXHJcbiAgICAgICAgICAgICcvY2hhbm5lbCdcclxuICAgICAgICBdO1xyXG4gICAgICAgIHZhciB3ZWJjaGFubmVsVHJhbnNwb3J0ID0gd2ViY2hhbm5lbFdyYXBwZXIuY3JlYXRlV2ViQ2hhbm5lbFRyYW5zcG9ydCgpO1xyXG4gICAgICAgIHZhciByZXF1ZXN0ID0ge1xyXG4gICAgICAgICAgICAvLyBCYWNrZ3JvdW5kIGNoYW5uZWwgdGVzdCBhdm9pZHMgdGhlIGluaXRpYWwgdHdvIHRlc3QgY2FsbHMgYW5kIGRlY3JlYXNlc1xyXG4gICAgICAgICAgICAvLyBpbml0aWFsIGNvbGQgc3RhcnQgdGltZS5cclxuICAgICAgICAgICAgLy8gVE9ETyhkaW1vbmQpOiB3ZW5ib3pAIG1lbnRpb25lZCB0aGlzIG1pZ2h0IGFmZmVjdCB1c2Ugd2l0aCBwcm94aWVzIGFuZFxyXG4gICAgICAgICAgICAvLyB3ZSBzaG91bGQgbW9uaXRvciBjbG9zZWx5IGZvciBhbnkgcmVwb3J0cy5cclxuICAgICAgICAgICAgYmFja2dyb3VuZENoYW5uZWxUZXN0OiB0cnVlLFxyXG4gICAgICAgICAgICAvLyBSZXF1aXJlZCBmb3IgYmFja2VuZCBzdGlja2luZXNzLCByb3V0aW5nIGJlaGF2aW9yIGlzIGJhc2VkIG9uIHRoaXNcclxuICAgICAgICAgICAgLy8gcGFyYW1ldGVyLlxyXG4gICAgICAgICAgICBodHRwU2Vzc2lvbklkUGFyYW06ICdnc2Vzc2lvbmlkJyxcclxuICAgICAgICAgICAgaW5pdE1lc3NhZ2VIZWFkZXJzOiB7fSxcclxuICAgICAgICAgICAgbWVzc2FnZVVybFBhcmFtczoge1xyXG4gICAgICAgICAgICAgICAgLy8gVGhpcyBwYXJhbSBpcyB1c2VkIHRvIGltcHJvdmUgcm91dGluZyBhbmQgcHJvamVjdCBpc29sYXRpb24gYnkgdGhlXHJcbiAgICAgICAgICAgICAgICAvLyBiYWNrZW5kIGFuZCBtdXN0IGJlIGluY2x1ZGVkIGluIGV2ZXJ5IHJlcXVlc3QuXHJcbiAgICAgICAgICAgICAgICBkYXRhYmFzZTogXCJwcm9qZWN0cy9cIiArIHRoaXMuZGF0YWJhc2VJZC5wcm9qZWN0SWQgKyBcIi9kYXRhYmFzZXMvXCIgKyB0aGlzLmRhdGFiYXNlSWQuZGF0YWJhc2VcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgc2VuZFJhd0pzb246IHRydWUsXHJcbiAgICAgICAgICAgIHN1cHBvcnRzQ3Jvc3NEb21haW5YaHI6IHRydWUsXHJcbiAgICAgICAgICAgIGludGVybmFsQ2hhbm5lbFBhcmFtczoge1xyXG4gICAgICAgICAgICAgICAgLy8gT3ZlcnJpZGUgdGhlIGRlZmF1bHQgdGltZW91dCAocmFuZG9taXplZCBiZXR3ZWVuIDEwLTIwIHNlY29uZHMpIHNpbmNlXHJcbiAgICAgICAgICAgICAgICAvLyBhIGxhcmdlIHdyaXRlIGJhdGNoIG9uIGEgc2xvdyBpbnRlcm5ldCBjb25uZWN0aW9uIG1heSB0YWtlIGEgbG9uZ1xyXG4gICAgICAgICAgICAgICAgLy8gdGltZSB0byBzZW5kIHRvIHRoZSBiYWNrZW5kLiBSYXRoZXIgdGhhbiBoYXZlIFdlYkNoYW5uZWwgaW1wb3NlIGFcclxuICAgICAgICAgICAgICAgIC8vIHRpZ2h0IHRpbWVvdXQgd2hpY2ggY291bGQgbGVhZCB0byBpbmZpbml0ZSB0aW1lb3V0cyBhbmQgcmV0cmllcywgd2VcclxuICAgICAgICAgICAgICAgIC8vIHNldCBpdCB2ZXJ5IGxhcmdlICg1LTEwIG1pbnV0ZXMpIGFuZCByZWx5IG9uIHRoZSBicm93c2VyJ3MgYnVpbHRpblxyXG4gICAgICAgICAgICAgICAgLy8gdGltZW91dHMgdG8ga2ljayBpbiBpZiB0aGUgcmVxdWVzdCBpc24ndCB3b3JraW5nLlxyXG4gICAgICAgICAgICAgICAgZm9yd2FyZENoYW5uZWxSZXF1ZXN0VGltZW91dE1zOiAxMCAqIDYwICogMTAwMFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBmb3JjZUxvbmdQb2xsaW5nOiB0aGlzLmZvcmNlTG9uZ1BvbGxpbmdcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMubW9kaWZ5SGVhZGVyc0ZvclJlcXVlc3QocmVxdWVzdC5pbml0TWVzc2FnZUhlYWRlcnMsIHRva2VuKTtcclxuICAgICAgICAvLyBTZW5kaW5nIHRoZSBjdXN0b20gaGVhZGVycyB3ZSBqdXN0IGFkZGVkIHRvIHJlcXVlc3QuaW5pdE1lc3NhZ2VIZWFkZXJzXHJcbiAgICAgICAgLy8gKEF1dGhvcml6YXRpb24sIGV0Yy4pIHdpbGwgdHJpZ2dlciB0aGUgYnJvd3NlciB0byBtYWtlIGEgQ09SUyBwcmVmbGlnaHRcclxuICAgICAgICAvLyByZXF1ZXN0IGJlY2F1c2UgdGhlIFhIUiB3aWxsIG5vIGxvbmdlciBtZWV0IHRoZSBjcml0ZXJpYSBmb3IgYSBcInNpbXBsZVwiXHJcbiAgICAgICAgLy8gQ09SUyByZXF1ZXN0OlxyXG4gICAgICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0hUVFAvQ09SUyNTaW1wbGVfcmVxdWVzdHNcclxuICAgICAgICAvL1xyXG4gICAgICAgIC8vIFRoZXJlZm9yZSB0byBhdm9pZCB0aGUgQ09SUyBwcmVmbGlnaHQgcmVxdWVzdCAoYW4gZXh0cmEgbmV0d29ya1xyXG4gICAgICAgIC8vIHJvdW5kdHJpcCksIHdlIHVzZSB0aGUgaHR0cEhlYWRlcnNPdmVyd3JpdGVQYXJhbSBvcHRpb24gdG8gc3BlY2lmeSB0aGF0XHJcbiAgICAgICAgLy8gdGhlIGhlYWRlcnMgc2hvdWxkIGluc3RlYWQgYmUgZW5jb2RlZCBpbnRvIGEgc3BlY2lhbCBcIiRodHRwSGVhZGVyc1wiIHF1ZXJ5XHJcbiAgICAgICAgLy8gcGFyYW1ldGVyLCB3aGljaCBpcyByZWNvZ25pemVkIGJ5IHRoZSB3ZWJjaGFubmVsIGJhY2tlbmQuIFRoaXMgaXNcclxuICAgICAgICAvLyBmb3JtYWxseSBkZWZpbmVkIGhlcmU6XHJcbiAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2dvb2dsZS9jbG9zdXJlLWxpYnJhcnkvYmxvYi9iMGUxODE1YjEzZmI5MmE0NmQ3YzliM2MzMGRlNWQ2YTM5NmEzMjQ1L2Nsb3N1cmUvZ29vZy9uZXQvcnBjL2h0dHBjb3JzLmpzI0wzMlxyXG4gICAgICAgIC8vXHJcbiAgICAgICAgLy8gQnV0IGZvciBzb21lIHVuY2xlYXIgcmVhc29uIChzZWVcclxuICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vZmlyZWJhc2UvZmlyZWJhc2UtanMtc2RrL2lzc3Vlcy83MDMpLCB0aGlzIGJyZWFrc1xyXG4gICAgICAgIC8vIFJlYWN0TmF0aXZlIGFuZCBzbyB3ZSBleGNsdWRlIGl0LCB3aGljaCBqdXN0IG1lYW5zIFJlYWN0TmF0aXZlIG1heSBiZVxyXG4gICAgICAgIC8vIHN1YmplY3QgdG8gdGhlIGV4dHJhIG5ldHdvcmsgcm91bmR0cmlwIGZvciBDT1JTIHByZWZsaWdodC5cclxuICAgICAgICBpZiAoIXV0aWwuaXNSZWFjdE5hdGl2ZSgpKSB7XHJcbiAgICAgICAgICAgIHJlcXVlc3QuaHR0cEhlYWRlcnNPdmVyd3JpdGVQYXJhbSA9ICckaHR0cEhlYWRlcnMnO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgdXJsID0gdXJsUGFydHMuam9pbignJyk7XHJcbiAgICAgICAgZGVidWcoTE9HX1RBRyRkLCAnQ3JlYXRpbmcgV2ViQ2hhbm5lbDogJyArIHVybCArICcgJyArIHJlcXVlc3QpO1xyXG4gICAgICAgIHZhciBjaGFubmVsID0gd2ViY2hhbm5lbFRyYW5zcG9ydC5jcmVhdGVXZWJDaGFubmVsKHVybCwgcmVxdWVzdCk7XHJcbiAgICAgICAgLy8gV2ViQ2hhbm5lbCBzdXBwb3J0cyBzZW5kaW5nIHRoZSBmaXJzdCBtZXNzYWdlIHdpdGggdGhlIGhhbmRzaGFrZSAtIHNhdmluZ1xyXG4gICAgICAgIC8vIGEgbmV0d29yayByb3VuZCB0cmlwLiBIb3dldmVyLCBpdCB3aWxsIGhhdmUgdG8gY2FsbCBzZW5kIGluIHRoZSBzYW1lXHJcbiAgICAgICAgLy8gSlMgZXZlbnQgbG9vcCBhcyBvcGVuLiBJbiBvcmRlciB0byBlbmZvcmNlIHRoaXMsIHdlIGRlbGF5IGFjdHVhbGx5XHJcbiAgICAgICAgLy8gb3BlbmluZyB0aGUgV2ViQ2hhbm5lbCB1bnRpbCBzZW5kIGlzIGNhbGxlZC4gV2hldGhlciB3ZSBoYXZlIGNhbGxlZFxyXG4gICAgICAgIC8vIG9wZW4gaXMgdHJhY2tlZCB3aXRoIHRoaXMgdmFyaWFibGUuXHJcbiAgICAgICAgdmFyIG9wZW5lZCA9IGZhbHNlO1xyXG4gICAgICAgIC8vIEEgZmxhZyB0byBkZXRlcm1pbmUgd2hldGhlciB0aGUgc3RyZWFtIHdhcyBjbG9zZWQgKGJ5IHVzIG9yIHRocm91Z2ggYW5cclxuICAgICAgICAvLyBlcnJvci9jbG9zZSBldmVudCkgdG8gYXZvaWQgZGVsaXZlcmluZyBtdWx0aXBsZSBjbG9zZSBldmVudHMgb3Igc2VuZGluZ1xyXG4gICAgICAgIC8vIG9uIGEgY2xvc2VkIHN0cmVhbVxyXG4gICAgICAgIHZhciBjbG9zZWQgPSBmYWxzZTtcclxuICAgICAgICB2YXIgc3RyZWFtQnJpZGdlID0gbmV3IFN0cmVhbUJyaWRnZSh7XHJcbiAgICAgICAgICAgIHNlbmRGbjogZnVuY3Rpb24gKG1zZykge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFjbG9zZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIW9wZW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWJ1ZyhMT0dfVEFHJGQsICdPcGVuaW5nIFdlYkNoYW5uZWwgdHJhbnNwb3J0LicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGFubmVsLm9wZW4oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3BlbmVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZGVidWcoTE9HX1RBRyRkLCAnV2ViQ2hhbm5lbCBzZW5kaW5nOicsIG1zZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgY2hhbm5lbC5zZW5kKG1zZyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBkZWJ1ZyhMT0dfVEFHJGQsICdOb3Qgc2VuZGluZyBiZWNhdXNlIFdlYkNoYW5uZWwgaXMgY2xvc2VkOicsIG1zZyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGNsb3NlRm46IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGNoYW5uZWwuY2xvc2UoKTsgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIENsb3N1cmUgZXZlbnRzIGFyZSBndWFyZGVkIGFuZCBleGNlcHRpb25zIGFyZSBzd2FsbG93ZWQsIHNvIGNhdGNoIGFueVxyXG4gICAgICAgIC8vIGV4Y2VwdGlvbiBhbmQgcmV0aHJvdyB1c2luZyBhIHNldFRpbWVvdXQgc28gdGhleSBiZWNvbWUgdmlzaWJsZSBhZ2Fpbi5cclxuICAgICAgICAvLyBOb3RlIHRoYXQgZXZlbnR1YWxseSB0aGlzIGZ1bmN0aW9uIGNvdWxkIGdvIGF3YXkgaWYgd2UgYXJlIGNvbmZpZGVudFxyXG4gICAgICAgIC8vIGVub3VnaCB0aGUgY29kZSBpcyBleGNlcHRpb24gZnJlZS5cclxuICAgICAgICB2YXIgdW5ndWFyZGVkRXZlbnRMaXN0ZW4gPSBmdW5jdGlvbiAodHlwZSwgZm4pIHtcclxuICAgICAgICAgICAgLy8gVE9ETyhkaW1vbmQpOiBjbG9zdXJlIHR5cGluZyBzZWVtcyBicm9rZW4gYmVjYXVzZSBXZWJDaGFubmVsIGRvZXNcclxuICAgICAgICAgICAgLy8gbm90IGltcGxlbWVudCBnb29nLmV2ZW50cy5MaXN0ZW5hYmxlXHJcbiAgICAgICAgICAgIGNoYW5uZWwubGlzdGVuKHR5cGUsIGZ1bmN0aW9uIChwYXJhbSkge1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBmbihwYXJhbSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBlO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sIDApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHVuZ3VhcmRlZEV2ZW50TGlzdGVuKHdlYmNoYW5uZWxXcmFwcGVyLldlYkNoYW5uZWwuRXZlbnRUeXBlLk9QRU4sIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKCFjbG9zZWQpIHtcclxuICAgICAgICAgICAgICAgIGRlYnVnKExPR19UQUckZCwgJ1dlYkNoYW5uZWwgdHJhbnNwb3J0IG9wZW5lZC4nKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHVuZ3VhcmRlZEV2ZW50TGlzdGVuKHdlYmNoYW5uZWxXcmFwcGVyLldlYkNoYW5uZWwuRXZlbnRUeXBlLkNMT1NFLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmICghY2xvc2VkKSB7XHJcbiAgICAgICAgICAgICAgICBjbG9zZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgZGVidWcoTE9HX1RBRyRkLCAnV2ViQ2hhbm5lbCB0cmFuc3BvcnQgY2xvc2VkJyk7XHJcbiAgICAgICAgICAgICAgICBzdHJlYW1CcmlkZ2UuY2FsbE9uQ2xvc2UoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHVuZ3VhcmRlZEV2ZW50TGlzdGVuKHdlYmNoYW5uZWxXcmFwcGVyLldlYkNoYW5uZWwuRXZlbnRUeXBlLkVSUk9SLCBmdW5jdGlvbiAoZXJyKSB7XHJcbiAgICAgICAgICAgIGlmICghY2xvc2VkKSB7XHJcbiAgICAgICAgICAgICAgICBjbG9zZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgZGVidWcoTE9HX1RBRyRkLCAnV2ViQ2hhbm5lbCB0cmFuc3BvcnQgZXJyb3JlZDonLCBlcnIpO1xyXG4gICAgICAgICAgICAgICAgc3RyZWFtQnJpZGdlLmNhbGxPbkNsb3NlKG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLlVOQVZBSUxBQkxFLCAnVGhlIG9wZXJhdGlvbiBjb3VsZCBub3QgYmUgY29tcGxldGVkJykpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdW5ndWFyZGVkRXZlbnRMaXN0ZW4od2ViY2hhbm5lbFdyYXBwZXIuV2ViQ2hhbm5lbC5FdmVudFR5cGUuTUVTU0FHRSwgZnVuY3Rpb24gKG1zZykge1xyXG4gICAgICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgICAgIGlmICghY2xvc2VkKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbXNnRGF0YSA9IG1zZy5kYXRhWzBdO1xyXG4gICAgICAgICAgICAgICAgYXNzZXJ0KCEhbXNnRGF0YSwgJ0dvdCBhIHdlYmNoYW5uZWwgbWVzc2FnZSB3aXRob3V0IGRhdGEuJyk7XHJcbiAgICAgICAgICAgICAgICAvLyBUT0RPKGIvMzUxNDM4OTEpOiBUaGVyZSBpcyBhIGJ1ZyBpbiBPbmUgUGxhdGZvcm0gdGhhdCBjYXVzZWQgZXJyb3JzXHJcbiAgICAgICAgICAgICAgICAvLyAoYW5kIG9ubHkgZXJyb3JzKSB0byBiZSB3cmFwcGVkIGluIGFuIGV4dHJhIGFycmF5LiBUbyBiZSBmb3J3YXJkXHJcbiAgICAgICAgICAgICAgICAvLyBjb21wYXRpYmxlIHdpdGggdGhlIGJ1ZyB3ZSBuZWVkIHRvIGNoZWNrIGVpdGhlciBjb25kaXRpb24uIFRoZSBsYXR0ZXJcclxuICAgICAgICAgICAgICAgIC8vIGNhbiBiZSByZW1vdmVkIG9uY2UgdGhlIGZpeCBoYXMgYmVlbiByb2xsZWQgb3V0LlxyXG4gICAgICAgICAgICAgICAgLy8gVXNlIGFueSBiZWNhdXNlIG1zZ0RhdGEuZXJyb3IgaXMgbm90IHR5cGVkLlxyXG4gICAgICAgICAgICAgICAgdmFyIG1zZ0RhdGFPckVycm9yID0gbXNnRGF0YTtcclxuICAgICAgICAgICAgICAgIHZhciBlcnJvciA9IG1zZ0RhdGFPckVycm9yLmVycm9yIHx8ICgoX2EgPSBtc2dEYXRhT3JFcnJvclswXSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmVycm9yKTtcclxuICAgICAgICAgICAgICAgIGlmIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlYnVnKExPR19UQUckZCwgJ1dlYkNoYW5uZWwgcmVjZWl2ZWQgZXJyb3I6JywgZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGVycm9yLnN0YXR1cyB3aWxsIGJlIGEgc3RyaW5nIGxpa2UgJ09LJyBvciAnTk9UX0ZPVU5EJy5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgc3RhdHVzXzIgPSBlcnJvci5zdGF0dXM7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvZGUgPSBtYXBDb2RlRnJvbVJwY1N0YXR1cyhzdGF0dXNfMik7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1lc3NhZ2UgPSBlcnJvci5tZXNzYWdlO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjb2RlID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29kZSA9IENvZGUuSU5URVJOQUw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UgPVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1Vua25vd24gZXJyb3Igc3RhdHVzOiAnICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXNfMiArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJyB3aXRoIG1lc3NhZ2UgJyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3IubWVzc2FnZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gTWFyayBjbG9zZWQgc28gbm8gZnVydGhlciBldmVudHMgYXJlIHByb3BhZ2F0ZWRcclxuICAgICAgICAgICAgICAgICAgICBjbG9zZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIHN0cmVhbUJyaWRnZS5jYWxsT25DbG9zZShuZXcgRmlyZXN0b3JlRXJyb3IoY29kZSwgbWVzc2FnZSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNoYW5uZWwuY2xvc2UoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlYnVnKExPR19UQUckZCwgJ1dlYkNoYW5uZWwgcmVjZWl2ZWQ6JywgbXNnRGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgc3RyZWFtQnJpZGdlLmNhbGxPbk1lc3NhZ2UobXNnRGF0YSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgLy8gVGVjaG5pY2FsbHkgd2UgY291bGQvc2hvdWxkIHdhaXQgZm9yIHRoZSBXZWJDaGFubmVsIG9wZW5lZCBldmVudCxcclxuICAgICAgICAgICAgLy8gYnV0IGJlY2F1c2Ugd2Ugd2FudCB0byBzZW5kIHRoZSBmaXJzdCBtZXNzYWdlIHdpdGggdGhlIFdlYkNoYW5uZWxcclxuICAgICAgICAgICAgLy8gaGFuZHNoYWtlIHdlIHByZXRlbmQgdGhlIGNoYW5uZWwgb3BlbmVkIGhlcmUgKGFzeW5jaHJvbm91c2x5KSwgYW5kXHJcbiAgICAgICAgICAgIC8vIHRoZW4gZGVsYXkgdGhlIGFjdHVhbCBvcGVuIHVudGlsIHRoZSBmaXJzdCBtZXNzYWdlIGlzIHNlbnQuXHJcbiAgICAgICAgICAgIHN0cmVhbUJyaWRnZS5jYWxsT25PcGVuKCk7XHJcbiAgICAgICAgfSwgMCk7XHJcbiAgICAgICAgcmV0dXJuIHN0cmVhbUJyaWRnZTtcclxuICAgIH07XHJcbiAgICAvLyB2aXNpYmxlIGZvciB0ZXN0aW5nXHJcbiAgICBXZWJDaGFubmVsQ29ubmVjdGlvbi5wcm90b3R5cGUubWFrZVVybCA9IGZ1bmN0aW9uIChycGNOYW1lKSB7XHJcbiAgICAgICAgdmFyIHVybFJwY05hbWUgPSBSUENfTkFNRV9SRVNUX01BUFBJTkdbcnBjTmFtZV07XHJcbiAgICAgICAgYXNzZXJ0KHVybFJwY05hbWUgIT09IHVuZGVmaW5lZCwgJ1Vua25vd24gUkVTVCBtYXBwaW5nIGZvcjogJyArIHJwY05hbWUpO1xyXG4gICAgICAgIHJldHVybiAodGhpcy5iYXNlVXJsICtcclxuICAgICAgICAgICAgJy8nICtcclxuICAgICAgICAgICAgUlBDX1VSTF9WRVJTSU9OICtcclxuICAgICAgICAgICAgJy9wcm9qZWN0cy8nICtcclxuICAgICAgICAgICAgdGhpcy5kYXRhYmFzZUlkLnByb2plY3RJZCArXHJcbiAgICAgICAgICAgICcvZGF0YWJhc2VzLycgK1xyXG4gICAgICAgICAgICB0aGlzLmRhdGFiYXNlSWQuZGF0YWJhc2UgK1xyXG4gICAgICAgICAgICAnL2RvY3VtZW50czonICtcclxuICAgICAgICAgICAgdXJsUnBjTmFtZSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFdlYkNoYW5uZWxDb25uZWN0aW9uO1xyXG59KCkpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxudmFyIEJyb3dzZXJQbGF0Zm9ybSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEJyb3dzZXJQbGF0Zm9ybSgpIHtcclxuICAgICAgICB0aGlzLmVtcHR5Qnl0ZVN0cmluZyA9ICcnO1xyXG4gICAgICAgIHRoaXMuYmFzZTY0QXZhaWxhYmxlID0gdHlwZW9mIGF0b2IgIT09ICd1bmRlZmluZWQnO1xyXG4gICAgfVxyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEJyb3dzZXJQbGF0Zm9ybS5wcm90b3R5cGUsIFwiZG9jdW1lbnRcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHlwZW9mIGRvY3VtZW50ICE9PSAndW5kZWZpbmVkJyA/IGRvY3VtZW50IDogbnVsbDtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShCcm93c2VyUGxhdGZvcm0ucHJvdG90eXBlLCBcIndpbmRvd1wiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHdpbmRvdyA6IG51bGw7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBCcm93c2VyUGxhdGZvcm0ucHJvdG90eXBlLmxvYWRDb25uZWN0aW9uID0gZnVuY3Rpb24gKGRhdGFiYXNlSW5mbykge1xyXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUobmV3IFdlYkNoYW5uZWxDb25uZWN0aW9uKGRhdGFiYXNlSW5mbykpO1xyXG4gICAgfTtcclxuICAgIEJyb3dzZXJQbGF0Zm9ybS5wcm90b3R5cGUubmV3Q29ubmVjdGl2aXR5TW9uaXRvciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoQnJvd3NlckNvbm5lY3Rpdml0eU1vbml0b3IuaXNBdmFpbGFibGUoKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEJyb3dzZXJDb25uZWN0aXZpdHlNb25pdG9yKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IE5vb3BDb25uZWN0aXZpdHlNb25pdG9yKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIEJyb3dzZXJQbGF0Zm9ybS5wcm90b3R5cGUubmV3U2VyaWFsaXplciA9IGZ1bmN0aW9uIChkYXRhYmFzZUlkKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBKc29uUHJvdG9TZXJpYWxpemVyKGRhdGFiYXNlSWQsIHsgdXNlUHJvdG8zSnNvbjogdHJ1ZSB9KTtcclxuICAgIH07XHJcbiAgICBCcm93c2VyUGxhdGZvcm0ucHJvdG90eXBlLmZvcm1hdEpTT04gPSBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkodmFsdWUpO1xyXG4gICAgfTtcclxuICAgIEJyb3dzZXJQbGF0Zm9ybS5wcm90b3R5cGUuYXRvYiA9IGZ1bmN0aW9uIChlbmNvZGVkKSB7XHJcbiAgICAgICAgcmV0dXJuIGF0b2IoZW5jb2RlZCk7XHJcbiAgICB9O1xyXG4gICAgQnJvd3NlclBsYXRmb3JtLnByb3RvdHlwZS5idG9hID0gZnVuY3Rpb24gKHJhdykge1xyXG4gICAgICAgIHJldHVybiBidG9hKHJhdyk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEJyb3dzZXJQbGF0Zm9ybTtcclxufSgpKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBUaGlzIGNvZGUgbmVlZHMgdG8gcnVuIGJlZm9yZSBGaXJlc3RvcmUgaXMgdXNlZC4gVGhpcyBjYW4gYmUgYWNoaWV2ZWQgaW5cclxuICogc2V2ZXJhbCB3YXlzOlxyXG4gKiAgIDEpIFRocm91Z2ggdGhlIEpTQ29tcGlsZXIgY29tcGlsaW5nIHRoaXMgY29kZSBhbmQgdGhlbiAoYXV0b21hdGljYWxseSlcclxuICogICAgICBleGVjdXRpbmcgaXQgYmVmb3JlIGV4cG9ydGluZyB0aGUgRmlyZXN0b3JlIHN5bWJvbHMuXHJcbiAqICAgMikgVGhyb3VnaCBpbXBvcnRpbmcgdGhpcyBtb2R1bGUgZmlyc3QgaW4gYSBGaXJlc3RvcmUgbWFpbiBtb2R1bGVcclxuICovXHJcblBsYXRmb3JtU3VwcG9ydC5zZXRQbGF0Zm9ybShuZXcgQnJvd3NlclBsYXRmb3JtKCkpO1xuXG52YXIgbmFtZSA9IFwiQGZpcmViYXNlL2ZpcmVzdG9yZVwiO1xudmFyIHZlcnNpb24gPSBcIjEuOS4xXCI7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiByZWdpc3RlckZpcmVzdG9yZShpbnN0YW5jZSkge1xyXG4gICAgY29uZmlndXJlRm9yRmlyZWJhc2UoaW5zdGFuY2UpO1xyXG4gICAgaW5zdGFuY2UucmVnaXN0ZXJWZXJzaW9uKG5hbWUsIHZlcnNpb24pO1xyXG59XHJcbnJlZ2lzdGVyRmlyZXN0b3JlKGZpcmViYXNlKTtcblxuZXhwb3J0cy5yZWdpc3RlckZpcmVzdG9yZSA9IHJlZ2lzdGVyRmlyZXN0b3JlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguY2pzLmpzLm1hcFxuIiwiLy8gc2hpbSBmb3IgdXNpbmcgcHJvY2VzcyBpbiBicm93c2VyXG52YXIgcHJvY2VzcyA9IG1vZHVsZS5leHBvcnRzID0ge307XG5cbi8vIGNhY2hlZCBmcm9tIHdoYXRldmVyIGdsb2JhbCBpcyBwcmVzZW50IHNvIHRoYXQgdGVzdCBydW5uZXJzIHRoYXQgc3R1YiBpdFxuLy8gZG9uJ3QgYnJlYWsgdGhpbmdzLiAgQnV0IHdlIG5lZWQgdG8gd3JhcCBpdCBpbiBhIHRyeSBjYXRjaCBpbiBjYXNlIGl0IGlzXG4vLyB3cmFwcGVkIGluIHN0cmljdCBtb2RlIGNvZGUgd2hpY2ggZG9lc24ndCBkZWZpbmUgYW55IGdsb2JhbHMuICBJdCdzIGluc2lkZSBhXG4vLyBmdW5jdGlvbiBiZWNhdXNlIHRyeS9jYXRjaGVzIGRlb3B0aW1pemUgaW4gY2VydGFpbiBlbmdpbmVzLlxuXG52YXIgY2FjaGVkU2V0VGltZW91dDtcbnZhciBjYWNoZWRDbGVhclRpbWVvdXQ7XG5cbmZ1bmN0aW9uIGRlZmF1bHRTZXRUaW1vdXQoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdzZXRUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkJyk7XG59XG5mdW5jdGlvbiBkZWZhdWx0Q2xlYXJUaW1lb3V0ICgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2NsZWFyVGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpO1xufVxuKGZ1bmN0aW9uICgpIHtcbiAgICB0cnkge1xuICAgICAgICBpZiAodHlwZW9mIHNldFRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IGRlZmF1bHRTZXRUaW1vdXQ7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0O1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICBpZiAodHlwZW9mIGNsZWFyVGltZW91dCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gZGVmYXVsdENsZWFyVGltZW91dDtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gZGVmYXVsdENsZWFyVGltZW91dDtcbiAgICB9XG59ICgpKVxuZnVuY3Rpb24gcnVuVGltZW91dChmdW4pIHtcbiAgICBpZiAoY2FjaGVkU2V0VGltZW91dCA9PT0gc2V0VGltZW91dCkge1xuICAgICAgICAvL25vcm1hbCBlbnZpcm9tZW50cyBpbiBzYW5lIHNpdHVhdGlvbnNcbiAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9XG4gICAgLy8gaWYgc2V0VGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcbiAgICBpZiAoKGNhY2hlZFNldFRpbWVvdXQgPT09IGRlZmF1bHRTZXRUaW1vdXQgfHwgIWNhY2hlZFNldFRpbWVvdXQpICYmIHNldFRpbWVvdXQpIHtcbiAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7XG4gICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3NcbiAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9IGNhdGNoKGUpe1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0IHRydXN0IHRoZSBnbG9iYWwgb2JqZWN0IHdoZW4gY2FsbGVkIG5vcm1hbGx5XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dC5jYWxsKG51bGwsIGZ1biwgMCk7XG4gICAgICAgIH0gY2F0Y2goZSl7XG4gICAgICAgICAgICAvLyBzYW1lIGFzIGFib3ZlIGJ1dCB3aGVuIGl0J3MgYSB2ZXJzaW9uIG9mIEkuRS4gdGhhdCBtdXN0IGhhdmUgdGhlIGdsb2JhbCBvYmplY3QgZm9yICd0aGlzJywgaG9wZnVsbHkgb3VyIGNvbnRleHQgY29ycmVjdCBvdGhlcndpc2UgaXQgd2lsbCB0aHJvdyBhIGdsb2JhbCBlcnJvclxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbCh0aGlzLCBmdW4sIDApO1xuICAgICAgICB9XG4gICAgfVxuXG5cbn1cbmZ1bmN0aW9uIHJ1bkNsZWFyVGltZW91dChtYXJrZXIpIHtcbiAgICBpZiAoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBjbGVhclRpbWVvdXQpIHtcbiAgICAgICAgLy9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zXG4gICAgICAgIHJldHVybiBjbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9XG4gICAgLy8gaWYgY2xlYXJUaW1lb3V0IHdhc24ndCBhdmFpbGFibGUgYnV0IHdhcyBsYXR0ZXIgZGVmaW5lZFxuICAgIGlmICgoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBkZWZhdWx0Q2xlYXJUaW1lb3V0IHx8ICFjYWNoZWRDbGVhclRpbWVvdXQpICYmIGNsZWFyVGltZW91dCkge1xuICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBjbGVhclRpbWVvdXQ7XG4gICAgICAgIHJldHVybiBjbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gd2hlbiB3aGVuIHNvbWVib2R5IGhhcyBzY3Jld2VkIHdpdGggc2V0VGltZW91dCBidXQgbm8gSS5FLiBtYWRkbmVzc1xuICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfSBjYXRjaCAoZSl7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBXaGVuIHdlIGFyZSBpbiBJLkUuIGJ1dCB0aGUgc2NyaXB0IGhhcyBiZWVuIGV2YWxlZCBzbyBJLkUuIGRvZXNuJ3QgIHRydXN0IHRoZSBnbG9iYWwgb2JqZWN0IHdoZW4gY2FsbGVkIG5vcm1hbGx5XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwobnVsbCwgbWFya2VyKTtcbiAgICAgICAgfSBjYXRjaCAoZSl7XG4gICAgICAgICAgICAvLyBzYW1lIGFzIGFib3ZlIGJ1dCB3aGVuIGl0J3MgYSB2ZXJzaW9uIG9mIEkuRS4gdGhhdCBtdXN0IGhhdmUgdGhlIGdsb2JhbCBvYmplY3QgZm9yICd0aGlzJywgaG9wZnVsbHkgb3VyIGNvbnRleHQgY29ycmVjdCBvdGhlcndpc2UgaXQgd2lsbCB0aHJvdyBhIGdsb2JhbCBlcnJvci5cbiAgICAgICAgICAgIC8vIFNvbWUgdmVyc2lvbnMgb2YgSS5FLiBoYXZlIGRpZmZlcmVudCBydWxlcyBmb3IgY2xlYXJUaW1lb3V0IHZzIHNldFRpbWVvdXRcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQuY2FsbCh0aGlzLCBtYXJrZXIpO1xuICAgICAgICB9XG4gICAgfVxuXG5cblxufVxudmFyIHF1ZXVlID0gW107XG52YXIgZHJhaW5pbmcgPSBmYWxzZTtcbnZhciBjdXJyZW50UXVldWU7XG52YXIgcXVldWVJbmRleCA9IC0xO1xuXG5mdW5jdGlvbiBjbGVhblVwTmV4dFRpY2soKSB7XG4gICAgaWYgKCFkcmFpbmluZyB8fCAhY3VycmVudFF1ZXVlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZHJhaW5pbmcgPSBmYWxzZTtcbiAgICBpZiAoY3VycmVudFF1ZXVlLmxlbmd0aCkge1xuICAgICAgICBxdWV1ZSA9IGN1cnJlbnRRdWV1ZS5jb25jYXQocXVldWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcbiAgICB9XG4gICAgaWYgKHF1ZXVlLmxlbmd0aCkge1xuICAgICAgICBkcmFpblF1ZXVlKCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBkcmFpblF1ZXVlKCkge1xuICAgIGlmIChkcmFpbmluZykge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciB0aW1lb3V0ID0gcnVuVGltZW91dChjbGVhblVwTmV4dFRpY2spO1xuICAgIGRyYWluaW5nID0gdHJ1ZTtcblxuICAgIHZhciBsZW4gPSBxdWV1ZS5sZW5ndGg7XG4gICAgd2hpbGUobGVuKSB7XG4gICAgICAgIGN1cnJlbnRRdWV1ZSA9IHF1ZXVlO1xuICAgICAgICBxdWV1ZSA9IFtdO1xuICAgICAgICB3aGlsZSAoKytxdWV1ZUluZGV4IDwgbGVuKSB7XG4gICAgICAgICAgICBpZiAoY3VycmVudFF1ZXVlKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudFF1ZXVlW3F1ZXVlSW5kZXhdLnJ1bigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcbiAgICAgICAgbGVuID0gcXVldWUubGVuZ3RoO1xuICAgIH1cbiAgICBjdXJyZW50UXVldWUgPSBudWxsO1xuICAgIGRyYWluaW5nID0gZmFsc2U7XG4gICAgcnVuQ2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xufVxuXG5wcm9jZXNzLm5leHRUaWNrID0gZnVuY3Rpb24gKGZ1bikge1xuICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGggLSAxKTtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGFyZ3NbaSAtIDFdID0gYXJndW1lbnRzW2ldO1xuICAgICAgICB9XG4gICAgfVxuICAgIHF1ZXVlLnB1c2gobmV3IEl0ZW0oZnVuLCBhcmdzKSk7XG4gICAgaWYgKHF1ZXVlLmxlbmd0aCA9PT0gMSAmJiAhZHJhaW5pbmcpIHtcbiAgICAgICAgcnVuVGltZW91dChkcmFpblF1ZXVlKTtcbiAgICB9XG59O1xuXG4vLyB2OCBsaWtlcyBwcmVkaWN0aWJsZSBvYmplY3RzXG5mdW5jdGlvbiBJdGVtKGZ1biwgYXJyYXkpIHtcbiAgICB0aGlzLmZ1biA9IGZ1bjtcbiAgICB0aGlzLmFycmF5ID0gYXJyYXk7XG59XG5JdGVtLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5mdW4uYXBwbHkobnVsbCwgdGhpcy5hcnJheSk7XG59O1xucHJvY2Vzcy50aXRsZSA9ICdicm93c2VyJztcbnByb2Nlc3MuYnJvd3NlciA9IHRydWU7XG5wcm9jZXNzLmVudiA9IHt9O1xucHJvY2Vzcy5hcmd2ID0gW107XG5wcm9jZXNzLnZlcnNpb24gPSAnJzsgLy8gZW1wdHkgc3RyaW5nIHRvIGF2b2lkIHJlZ2V4cCBpc3N1ZXNcbnByb2Nlc3MudmVyc2lvbnMgPSB7fTtcblxuZnVuY3Rpb24gbm9vcCgpIHt9XG5cbnByb2Nlc3Mub24gPSBub29wO1xucHJvY2Vzcy5hZGRMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLm9uY2UgPSBub29wO1xucHJvY2Vzcy5vZmYgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLnJlbW92ZUFsbExpc3RlbmVycyA9IG5vb3A7XG5wcm9jZXNzLmVtaXQgPSBub29wO1xucHJvY2Vzcy5wcmVwZW5kTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5wcmVwZW5kT25jZUxpc3RlbmVyID0gbm9vcDtcblxucHJvY2Vzcy5saXN0ZW5lcnMgPSBmdW5jdGlvbiAobmFtZSkgeyByZXR1cm4gW10gfVxuXG5wcm9jZXNzLmJpbmRpbmcgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5iaW5kaW5nIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbn07XG5cbnByb2Nlc3MuY3dkID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gJy8nIH07XG5wcm9jZXNzLmNoZGlyID0gZnVuY3Rpb24gKGRpcikge1xuICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5jaGRpciBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xucHJvY2Vzcy51bWFzayA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gMDsgfTtcbiIsInZhciBjb21tb25qc0dsb2JhbCA9IHR5cGVvZiBnbG9iYWxUaGlzICE9PSAndW5kZWZpbmVkJyA/IGdsb2JhbFRoaXMgOiB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHdpbmRvdyA6IHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnID8gZ2xvYmFsIDogdHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnID8gc2VsZiA6IHt9O1xuXG52YXIgZyxnb29nPWdvb2d8fHt9LGs9Y29tbW9uanNHbG9iYWw7ZnVuY3Rpb24gbShhKXtyZXR1cm4gXCJzdHJpbmdcIj09dHlwZW9mIGF9ZnVuY3Rpb24gYWEoYSl7cmV0dXJuIFwibnVtYmVyXCI9PXR5cGVvZiBhfWZ1bmN0aW9uIG4oYSxiKXthPWEuc3BsaXQoXCIuXCIpO2I9Ynx8aztmb3IodmFyIGM9MDtjPGEubGVuZ3RoO2MrKylpZihiPWJbYVtjXV0sbnVsbD09YilyZXR1cm4gbnVsbDtyZXR1cm4gYn1mdW5jdGlvbiBiYSgpe31cbmZ1bmN0aW9uIHAoYSl7dmFyIGI9dHlwZW9mIGE7aWYoXCJvYmplY3RcIj09YilpZihhKXtpZihhIGluc3RhbmNlb2YgQXJyYXkpcmV0dXJuIFwiYXJyYXlcIjtpZihhIGluc3RhbmNlb2YgT2JqZWN0KXJldHVybiBiO3ZhciBjPU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChhKTtpZihcIltvYmplY3QgV2luZG93XVwiPT1jKXJldHVybiBcIm9iamVjdFwiO2lmKFwiW29iamVjdCBBcnJheV1cIj09Y3x8XCJudW1iZXJcIj09dHlwZW9mIGEubGVuZ3RoJiZcInVuZGVmaW5lZFwiIT10eXBlb2YgYS5zcGxpY2UmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBhLnByb3BlcnR5SXNFbnVtZXJhYmxlJiYhYS5wcm9wZXJ0eUlzRW51bWVyYWJsZShcInNwbGljZVwiKSlyZXR1cm4gXCJhcnJheVwiO2lmKFwiW29iamVjdCBGdW5jdGlvbl1cIj09Y3x8XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGEuY2FsbCYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGEucHJvcGVydHlJc0VudW1lcmFibGUmJiFhLnByb3BlcnR5SXNFbnVtZXJhYmxlKFwiY2FsbFwiKSlyZXR1cm4gXCJmdW5jdGlvblwifWVsc2UgcmV0dXJuIFwibnVsbFwiO1xuZWxzZSBpZihcImZ1bmN0aW9uXCI9PWImJlwidW5kZWZpbmVkXCI9PXR5cGVvZiBhLmNhbGwpcmV0dXJuIFwib2JqZWN0XCI7cmV0dXJuIGJ9ZnVuY3Rpb24gcShhKXtyZXR1cm4gXCJhcnJheVwiPT1wKGEpfWZ1bmN0aW9uIGNhKGEpe3ZhciBiPXAoYSk7cmV0dXJuIFwiYXJyYXlcIj09Ynx8XCJvYmplY3RcIj09YiYmXCJudW1iZXJcIj09dHlwZW9mIGEubGVuZ3RofWZ1bmN0aW9uIHIoYSl7dmFyIGI9dHlwZW9mIGE7cmV0dXJuIFwib2JqZWN0XCI9PWImJm51bGwhPWF8fFwiZnVuY3Rpb25cIj09Yn12YXIgdD1cImNsb3N1cmVfdWlkX1wiKygxRTkqTWF0aC5yYW5kb20oKT4+PjApLGRhPTA7ZnVuY3Rpb24gZWEoYSxiLGMpe3JldHVybiBhLmNhbGwuYXBwbHkoYS5iaW5kLGFyZ3VtZW50cyl9XG5mdW5jdGlvbiBmYShhLGIsYyl7aWYoIWEpdGhyb3cgRXJyb3IoKTtpZigyPGFyZ3VtZW50cy5sZW5ndGgpe3ZhciBkPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywyKTtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgZT1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpO0FycmF5LnByb3RvdHlwZS51bnNoaWZ0LmFwcGx5KGUsZCk7cmV0dXJuIGEuYXBwbHkoYixlKX19cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGEuYXBwbHkoYixhcmd1bWVudHMpfX1mdW5jdGlvbiB1KGEsYixjKXtGdW5jdGlvbi5wcm90b3R5cGUuYmluZCYmLTEhPUZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kLnRvU3RyaW5nKCkuaW5kZXhPZihcIm5hdGl2ZSBjb2RlXCIpP3U9ZWE6dT1mYTtyZXR1cm4gdS5hcHBseShudWxsLGFyZ3VtZW50cyl9XG5mdW5jdGlvbiB2KGEsYil7dmFyIGM9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpO3JldHVybiBmdW5jdGlvbigpe3ZhciBkPWMuc2xpY2UoKTtkLnB1c2guYXBwbHkoZCxhcmd1bWVudHMpO3JldHVybiBhLmFwcGx5KHRoaXMsZCl9fXZhciB3PURhdGUubm93fHxmdW5jdGlvbigpe3JldHVybiArbmV3IERhdGV9O2Z1bmN0aW9uIHgoYSxiKXtmdW5jdGlvbiBjKCl7fWMucHJvdG90eXBlPWIucHJvdG90eXBlO2EuTj1iLnByb3RvdHlwZTthLnByb3RvdHlwZT1uZXcgYzthLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1hO2EueGI9ZnVuY3Rpb24oZCxlLGYpe2Zvcih2YXIgaD1BcnJheShhcmd1bWVudHMubGVuZ3RoLTIpLGw9MjtsPGFyZ3VtZW50cy5sZW5ndGg7bCsrKWhbbC0yXT1hcmd1bWVudHNbbF07cmV0dXJuIGIucHJvdG90eXBlW2VdLmFwcGx5KGQsaCl9O31mdW5jdGlvbiB5KCl7dGhpcy5qPXRoaXMuajt0aGlzLmk9dGhpcy5pO312YXIgaGE9MDt5LnByb3RvdHlwZS5qPSExO3kucHJvdG90eXBlLmxhPWZ1bmN0aW9uKCl7aWYoIXRoaXMuaiYmKHRoaXMuaj0hMCx0aGlzLkcoKSwwIT1oYSkpe3ZhciBhPXRoaXNbdF18fCh0aGlzW3RdPSsrZGEpO319O3kucHJvdG90eXBlLkc9ZnVuY3Rpb24oKXtpZih0aGlzLmkpZm9yKDt0aGlzLmkubGVuZ3RoOyl0aGlzLmkuc2hpZnQoKSgpO307dmFyIGphPUFycmF5LnByb3RvdHlwZS5pbmRleE9mP2Z1bmN0aW9uKGEsYil7cmV0dXJuIEFycmF5LnByb3RvdHlwZS5pbmRleE9mLmNhbGwoYSxiLHZvaWQgMCl9OmZ1bmN0aW9uKGEsYil7aWYobShhKSlyZXR1cm4gbShiKSYmMT09Yi5sZW5ndGg/YS5pbmRleE9mKGIsMCk6LTE7Zm9yKHZhciBjPTA7YzxhLmxlbmd0aDtjKyspaWYoYyBpbiBhJiZhW2NdPT09YilyZXR1cm4gYztyZXR1cm4gLTF9LGxhPUFycmF5LnByb3RvdHlwZS5mb3JFYWNoP2Z1bmN0aW9uKGEsYixjKXtBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGEsYixjKTt9OmZ1bmN0aW9uKGEsYixjKXtmb3IodmFyIGQ9YS5sZW5ndGgsZT1tKGEpP2Euc3BsaXQoXCJcIik6YSxmPTA7ZjxkO2YrKylmIGluIGUmJmIuY2FsbChjLGVbZl0sZixhKTt9O1xuZnVuY3Rpb24gbWEoYSl7YTp7dmFyIGI9bmE7Zm9yKHZhciBjPWEubGVuZ3RoLGQ9bShhKT9hLnNwbGl0KFwiXCIpOmEsZT0wO2U8YztlKyspaWYoZSBpbiBkJiZiLmNhbGwodm9pZCAwLGRbZV0sZSxhKSl7Yj1lO2JyZWFrIGF9Yj0tMTt9cmV0dXJuIDA+Yj9udWxsOm0oYSk/YS5jaGFyQXQoYik6YVtiXX1mdW5jdGlvbiBvYShhKXtyZXR1cm4gQXJyYXkucHJvdG90eXBlLmNvbmNhdC5hcHBseShbXSxhcmd1bWVudHMpfWZ1bmN0aW9uIHBhKGEpe3ZhciBiPWEubGVuZ3RoO2lmKDA8Yil7Zm9yKHZhciBjPUFycmF5KGIpLGQ9MDtkPGI7ZCsrKWNbZF09YVtkXTtyZXR1cm4gY31yZXR1cm4gW119ZnVuY3Rpb24gcWEoYSl7cmV0dXJuIC9eW1xcc1xceGEwXSokLy50ZXN0KGEpfXZhciByYT1TdHJpbmcucHJvdG90eXBlLnRyaW0/ZnVuY3Rpb24oYSl7cmV0dXJuIGEudHJpbSgpfTpmdW5jdGlvbihhKXtyZXR1cm4gL15bXFxzXFx4YTBdKihbXFxzXFxTXSo/KVtcXHNcXHhhMF0qJC8uZXhlYyhhKVsxXX07ZnVuY3Rpb24geihhLGIpe3JldHVybiAtMSE9YS5pbmRleE9mKGIpfWZ1bmN0aW9uIHNhKGEsYil7cmV0dXJuIGE8Yj8tMTphPmI/MTowfXZhciBBO2E6e3ZhciB0YT1rLm5hdmlnYXRvcjtpZih0YSl7dmFyIHVhPXRhLnVzZXJBZ2VudDtpZih1YSl7QT11YTticmVhayBhfX1BPVwiXCI7fWZ1bmN0aW9uIHZhKGEsYixjKXtmb3IodmFyIGQgaW4gYSliLmNhbGwoYyxhW2RdLGQsYSk7fWZ1bmN0aW9uIHdhKGEpe3ZhciBiPXt9LGM7Zm9yKGMgaW4gYSliW2NdPWFbY107cmV0dXJuIGJ9dmFyIHhhPVwiY29uc3RydWN0b3IgaGFzT3duUHJvcGVydHkgaXNQcm90b3R5cGVPZiBwcm9wZXJ0eUlzRW51bWVyYWJsZSB0b0xvY2FsZVN0cmluZyB0b1N0cmluZyB2YWx1ZU9mXCIuc3BsaXQoXCIgXCIpO2Z1bmN0aW9uIHlhKGEsYil7Zm9yKHZhciBjLGQsZT0xO2U8YXJndW1lbnRzLmxlbmd0aDtlKyspe2Q9YXJndW1lbnRzW2VdO2ZvcihjIGluIGQpYVtjXT1kW2NdO2Zvcih2YXIgZj0wO2Y8eGEubGVuZ3RoO2YrKyljPXhhW2ZdLE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChkLGMpJiYoYVtjXT1kW2NdKTt9fWZ1bmN0aW9uIHphKGEpe3phW1wiIFwiXShhKTtyZXR1cm4gYX16YVtcIiBcIl09YmE7ZnVuY3Rpb24gQWEoYSxiKXt2YXIgYz1CYTtyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGMsYSk/Y1thXTpjW2FdPWIoYSl9dmFyIENhPXooQSxcIk9wZXJhXCIpLEI9eihBLFwiVHJpZGVudFwiKXx8eihBLFwiTVNJRVwiKSxEYT16KEEsXCJFZGdlXCIpLEVhPURhfHxCLEZhPXooQSxcIkdlY2tvXCIpJiYhKHooQS50b0xvd2VyQ2FzZSgpLFwid2Via2l0XCIpJiYheihBLFwiRWRnZVwiKSkmJiEoeihBLFwiVHJpZGVudFwiKXx8eihBLFwiTVNJRVwiKSkmJiF6KEEsXCJFZGdlXCIpLEdhPXooQS50b0xvd2VyQ2FzZSgpLFwid2Via2l0XCIpJiYheihBLFwiRWRnZVwiKTtmdW5jdGlvbiBIYSgpe3ZhciBhPWsuZG9jdW1lbnQ7cmV0dXJuIGE/YS5kb2N1bWVudE1vZGU6dm9pZCAwfXZhciBJYTtcbmE6e3ZhciBKYT1cIlwiLEthPWZ1bmN0aW9uKCl7dmFyIGE9QTtpZihGYSlyZXR1cm4gL3J2OihbXlxcKTtdKykoXFwpfDspLy5leGVjKGEpO2lmKERhKXJldHVybiAvRWRnZVxcLyhbXFxkXFwuXSspLy5leGVjKGEpO2lmKEIpcmV0dXJuIC9cXGIoPzpNU0lFfHJ2KVs6IF0oW15cXCk7XSspKFxcKXw7KS8uZXhlYyhhKTtpZihHYSlyZXR1cm4gL1dlYktpdFxcLyhcXFMrKS8uZXhlYyhhKTtpZihDYSlyZXR1cm4gLyg/OlZlcnNpb24pWyBcXC9dPyhcXFMrKS8uZXhlYyhhKX0oKTtLYSYmKEphPUthP0thWzFdOlwiXCIpO2lmKEIpe3ZhciBMYT1IYSgpO2lmKG51bGwhPUxhJiZMYT5wYXJzZUZsb2F0KEphKSl7SWE9U3RyaW5nKExhKTticmVhayBhfX1JYT1KYTt9dmFyIEJhPXt9O1xuZnVuY3Rpb24gTWEoYSl7cmV0dXJuIEFhKGEsZnVuY3Rpb24oKXtmb3IodmFyIGI9MCxjPXJhKFN0cmluZyhJYSkpLnNwbGl0KFwiLlwiKSxkPXJhKFN0cmluZyhhKSkuc3BsaXQoXCIuXCIpLGU9TWF0aC5tYXgoYy5sZW5ndGgsZC5sZW5ndGgpLGY9MDswPT1iJiZmPGU7ZisrKXt2YXIgaD1jW2ZdfHxcIlwiLGw9ZFtmXXx8XCJcIjtkb3toPS8oXFxkKikoXFxEKikoLiopLy5leGVjKGgpfHxbXCJcIixcIlwiLFwiXCIsXCJcIl07bD0vKFxcZCopKFxcRCopKC4qKS8uZXhlYyhsKXx8W1wiXCIsXCJcIixcIlwiLFwiXCJdO2lmKDA9PWhbMF0ubGVuZ3RoJiYwPT1sWzBdLmxlbmd0aClicmVhaztiPXNhKDA9PWhbMV0ubGVuZ3RoPzA6cGFyc2VJbnQoaFsxXSwxMCksMD09bFsxXS5sZW5ndGg/MDpwYXJzZUludChsWzFdLDEwKSl8fHNhKDA9PWhbMl0ubGVuZ3RoLDA9PWxbMl0ubGVuZ3RoKXx8c2EoaFsyXSxsWzJdKTtoPWhbM107bD1sWzNdO313aGlsZSgwPT1iKX1yZXR1cm4gMDw9Yn0pfXZhciBOYTt2YXIgT2E9ay5kb2N1bWVudDtcbk5hPU9hJiZCP0hhKCl8fChcIkNTUzFDb21wYXRcIj09T2EuY29tcGF0TW9kZT9wYXJzZUludChJYSwxMCk6NSk6dm9pZCAwO3ZhciBQYT0hQnx8OTw9TnVtYmVyKE5hKSxRYT1CJiYhTWEoXCI5XCIpLFJhPWZ1bmN0aW9uKCl7aWYoIWsuYWRkRXZlbnRMaXN0ZW5lcnx8IU9iamVjdC5kZWZpbmVQcm9wZXJ0eSlyZXR1cm4gITE7dmFyIGE9ITEsYj1PYmplY3QuZGVmaW5lUHJvcGVydHkoe30sXCJwYXNzaXZlXCIse2dldDpmdW5jdGlvbigpe2E9ITA7fX0pO3RyeXtrLmFkZEV2ZW50TGlzdGVuZXIoXCJ0ZXN0XCIsYmEsYiksay5yZW1vdmVFdmVudExpc3RlbmVyKFwidGVzdFwiLGJhLGIpO31jYXRjaChjKXt9cmV0dXJuIGF9KCk7ZnVuY3Rpb24gQyhhLGIpe3RoaXMudHlwZT1hO3RoaXMuYT10aGlzLnRhcmdldD1iO3RoaXMuSWE9ITA7fUMucHJvdG90eXBlLmI9ZnVuY3Rpb24oKXt0aGlzLklhPSExO307ZnVuY3Rpb24gRChhLGIpe0MuY2FsbCh0aGlzLGE/YS50eXBlOlwiXCIpO3RoaXMucmVsYXRlZFRhcmdldD10aGlzLmE9dGhpcy50YXJnZXQ9bnVsbDt0aGlzLmJ1dHRvbj10aGlzLnNjcmVlblk9dGhpcy5zY3JlZW5YPXRoaXMuY2xpZW50WT10aGlzLmNsaWVudFg9MDt0aGlzLmtleT1cIlwiO3RoaXMubWV0YUtleT10aGlzLnNoaWZ0S2V5PXRoaXMuYWx0S2V5PXRoaXMuY3RybEtleT0hMTt0aGlzLnBvaW50ZXJJZD0wO3RoaXMucG9pbnRlclR5cGU9XCJcIjt0aGlzLmM9bnVsbDtpZihhKXt2YXIgYz10aGlzLnR5cGU9YS50eXBlLGQ9YS5jaGFuZ2VkVG91Y2hlcyYmYS5jaGFuZ2VkVG91Y2hlcy5sZW5ndGg/YS5jaGFuZ2VkVG91Y2hlc1swXTpudWxsO3RoaXMudGFyZ2V0PWEudGFyZ2V0fHxhLnNyY0VsZW1lbnQ7dGhpcy5hPWI7aWYoYj1hLnJlbGF0ZWRUYXJnZXQpe2lmKEZhKXthOnt0cnl7emEoYi5ub2RlTmFtZSk7dmFyIGU9ITA7YnJlYWsgYX1jYXRjaChmKXt9ZT0hMTt9ZXx8KGI9bnVsbCk7fX1lbHNlXCJtb3VzZW92ZXJcIj09XG5jP2I9YS5mcm9tRWxlbWVudDpcIm1vdXNlb3V0XCI9PWMmJihiPWEudG9FbGVtZW50KTt0aGlzLnJlbGF0ZWRUYXJnZXQ9YjtkPyh0aGlzLmNsaWVudFg9dm9pZCAwIT09ZC5jbGllbnRYP2QuY2xpZW50WDpkLnBhZ2VYLHRoaXMuY2xpZW50WT12b2lkIDAhPT1kLmNsaWVudFk/ZC5jbGllbnRZOmQucGFnZVksdGhpcy5zY3JlZW5YPWQuc2NyZWVuWHx8MCx0aGlzLnNjcmVlblk9ZC5zY3JlZW5ZfHwwKToodGhpcy5jbGllbnRYPXZvaWQgMCE9PWEuY2xpZW50WD9hLmNsaWVudFg6YS5wYWdlWCx0aGlzLmNsaWVudFk9dm9pZCAwIT09YS5jbGllbnRZP2EuY2xpZW50WTphLnBhZ2VZLHRoaXMuc2NyZWVuWD1hLnNjcmVlblh8fDAsdGhpcy5zY3JlZW5ZPWEuc2NyZWVuWXx8MCk7dGhpcy5idXR0b249YS5idXR0b247dGhpcy5rZXk9YS5rZXl8fFwiXCI7dGhpcy5jdHJsS2V5PWEuY3RybEtleTt0aGlzLmFsdEtleT1hLmFsdEtleTt0aGlzLnNoaWZ0S2V5PWEuc2hpZnRLZXk7dGhpcy5tZXRhS2V5PVxuYS5tZXRhS2V5O3RoaXMucG9pbnRlcklkPWEucG9pbnRlcklkfHwwO3RoaXMucG9pbnRlclR5cGU9bShhLnBvaW50ZXJUeXBlKT9hLnBvaW50ZXJUeXBlOlNhW2EucG9pbnRlclR5cGVdfHxcIlwiO3RoaXMuYz1hO2EuZGVmYXVsdFByZXZlbnRlZCYmdGhpcy5iKCk7fX14KEQsQyk7dmFyIFNhPXsyOlwidG91Y2hcIiwzOlwicGVuXCIsNDpcIm1vdXNlXCJ9O0QucHJvdG90eXBlLmI9ZnVuY3Rpb24oKXtELk4uYi5jYWxsKHRoaXMpO3ZhciBhPXRoaXMuYztpZihhLnByZXZlbnREZWZhdWx0KWEucHJldmVudERlZmF1bHQoKTtlbHNlIGlmKGEucmV0dXJuVmFsdWU9ITEsUWEpdHJ5e2lmKGEuY3RybEtleXx8MTEyPD1hLmtleUNvZGUmJjEyMz49YS5rZXlDb2RlKWEua2V5Q29kZT0tMTt9Y2F0Y2goYil7fX07dmFyIEY9XCJjbG9zdXJlX2xpc3RlbmFibGVfXCIrKDFFNipNYXRoLnJhbmRvbSgpfDApLFRhPTA7ZnVuY3Rpb24gVWEoYSxiLGMsZCxlKXt0aGlzLmxpc3RlbmVyPWE7dGhpcy5wcm94eT1udWxsO3RoaXMuc3JjPWI7dGhpcy50eXBlPWM7dGhpcy5jYXB0dXJlPSEhZDt0aGlzLmRhPWU7dGhpcy5rZXk9KytUYTt0aGlzLlg9dGhpcy5aPSExO31mdW5jdGlvbiBWYShhKXthLlg9ITA7YS5saXN0ZW5lcj1udWxsO2EucHJveHk9bnVsbDthLnNyYz1udWxsO2EuZGE9bnVsbDt9ZnVuY3Rpb24gV2EoYSl7dGhpcy5zcmM9YTt0aGlzLmE9e307dGhpcy5iPTA7fVdhLnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24oYSxiLGMsZCxlKXt2YXIgZj1hLnRvU3RyaW5nKCk7YT10aGlzLmFbZl07YXx8KGE9dGhpcy5hW2ZdPVtdLHRoaXMuYisrKTt2YXIgaD1YYShhLGIsZCxlKTstMTxoPyhiPWFbaF0sY3x8KGIuWj0hMSkpOihiPW5ldyBVYShiLHRoaXMuc3JjLGYsISFkLGUpLGIuWj1jLGEucHVzaChiKSk7cmV0dXJuIGJ9O2Z1bmN0aW9uIFlhKGEsYil7dmFyIGM9Yi50eXBlO2lmKGMgaW4gYS5hKXt2YXIgZD1hLmFbY10sZT1qYShkLGIpLGY7KGY9MDw9ZSkmJkFycmF5LnByb3RvdHlwZS5zcGxpY2UuY2FsbChkLGUsMSk7ZiYmKFZhKGIpLDA9PWEuYVtjXS5sZW5ndGgmJihkZWxldGUgYS5hW2NdLGEuYi0tKSk7fX1cbmZ1bmN0aW9uIFhhKGEsYixjLGQpe2Zvcih2YXIgZT0wO2U8YS5sZW5ndGg7KytlKXt2YXIgZj1hW2VdO2lmKCFmLlgmJmYubGlzdGVuZXI9PWImJmYuY2FwdHVyZT09ISFjJiZmLmRhPT1kKXJldHVybiBlfXJldHVybiAtMX12YXIgWmE9XCJjbG9zdXJlX2xtX1wiKygxRTYqTWF0aC5yYW5kb20oKXwwKSwkYT17fTtmdW5jdGlvbiBiYihhLGIsYyxkLGUpe2lmKGQmJmQub25jZSlyZXR1cm4gY2IoYSxiLGMsZCxlKTtpZihxKGIpKXtmb3IodmFyIGY9MDtmPGIubGVuZ3RoO2YrKyliYihhLGJbZl0sYyxkLGUpO3JldHVybiBudWxsfWM9ZGIoYyk7cmV0dXJuIGEmJmFbRl0/YS56YShiLGMscihkKT8hIWQuY2FwdHVyZTohIWQsZSk6ZWIoYSxiLGMsITEsZCxlKX1cbmZ1bmN0aW9uIGViKGEsYixjLGQsZSxmKXtpZighYil0aHJvdyBFcnJvcihcIkludmFsaWQgZXZlbnQgdHlwZVwiKTt2YXIgaD1yKGUpPyEhZS5jYXB0dXJlOiEhZTtpZihoJiYhUGEpcmV0dXJuIG51bGw7dmFyIGw9ZmIoYSk7bHx8KGFbWmFdPWw9bmV3IFdhKGEpKTtjPWwuYWRkKGIsYyxkLGgsZik7aWYoYy5wcm94eSlyZXR1cm4gYztkPWdiKCk7Yy5wcm94eT1kO2Quc3JjPWE7ZC5saXN0ZW5lcj1jO2lmKGEuYWRkRXZlbnRMaXN0ZW5lcilSYXx8KGU9aCksdm9pZCAwPT09ZSYmKGU9ITEpLGEuYWRkRXZlbnRMaXN0ZW5lcihiLnRvU3RyaW5nKCksZCxlKTtlbHNlIGlmKGEuYXR0YWNoRXZlbnQpYS5hdHRhY2hFdmVudChoYihiLnRvU3RyaW5nKCkpLGQpO2Vsc2UgaWYoYS5hZGRMaXN0ZW5lciYmYS5yZW1vdmVMaXN0ZW5lcilhLmFkZExpc3RlbmVyKGQpO2Vsc2UgdGhyb3cgRXJyb3IoXCJhZGRFdmVudExpc3RlbmVyIGFuZCBhdHRhY2hFdmVudCBhcmUgdW5hdmFpbGFibGUuXCIpO3JldHVybiBjfWZ1bmN0aW9uIGdiKCl7dmFyIGE9aWIsYj1QYT9mdW5jdGlvbihjKXtyZXR1cm4gYS5jYWxsKGIuc3JjLGIubGlzdGVuZXIsYyl9OmZ1bmN0aW9uKGMpe2M9YS5jYWxsKGIuc3JjLGIubGlzdGVuZXIsYyk7aWYoIWMpcmV0dXJuIGN9O3JldHVybiBifWZ1bmN0aW9uIGNiKGEsYixjLGQsZSl7aWYocShiKSl7Zm9yKHZhciBmPTA7ZjxiLmxlbmd0aDtmKyspY2IoYSxiW2ZdLGMsZCxlKTtyZXR1cm4gbnVsbH1jPWRiKGMpO3JldHVybiBhJiZhW0ZdP2EuQWEoYixjLHIoZCk/ISFkLmNhcHR1cmU6ISFkLGUpOmViKGEsYixjLCEwLGQsZSl9XG5mdW5jdGlvbiBqYihhLGIsYyxkLGUpe2lmKHEoYikpZm9yKHZhciBmPTA7ZjxiLmxlbmd0aDtmKyspamIoYSxiW2ZdLGMsZCxlKTtlbHNlKGQ9cihkKT8hIWQuY2FwdHVyZTohIWQsYz1kYihjKSxhJiZhW0ZdKT8oYT1hLmMsYj1TdHJpbmcoYikudG9TdHJpbmcoKSxiIGluIGEuYSYmKGY9YS5hW2JdLGM9WGEoZixjLGQsZSksLTE8YyYmKFZhKGZbY10pLEFycmF5LnByb3RvdHlwZS5zcGxpY2UuY2FsbChmLGMsMSksMD09Zi5sZW5ndGgmJihkZWxldGUgYS5hW2JdLGEuYi0tKSkpKTphJiYoYT1mYihhKSkmJihiPWEuYVtiLnRvU3RyaW5nKCldLGE9LTEsYiYmKGE9WGEoYixjLGQsZSkpLChjPS0xPGE/YlthXTpudWxsKSYma2IoYykpO31cbmZ1bmN0aW9uIGtiKGEpe2lmKCFhYShhKSYmYSYmIWEuWCl7dmFyIGI9YS5zcmM7aWYoYiYmYltGXSlZYShiLmMsYSk7ZWxzZXt2YXIgYz1hLnR5cGUsZD1hLnByb3h5O2IucmVtb3ZlRXZlbnRMaXN0ZW5lcj9iLnJlbW92ZUV2ZW50TGlzdGVuZXIoYyxkLGEuY2FwdHVyZSk6Yi5kZXRhY2hFdmVudD9iLmRldGFjaEV2ZW50KGhiKGMpLGQpOmIuYWRkTGlzdGVuZXImJmIucmVtb3ZlTGlzdGVuZXImJmIucmVtb3ZlTGlzdGVuZXIoZCk7KGM9ZmIoYikpPyhZYShjLGEpLDA9PWMuYiYmKGMuc3JjPW51bGwsYltaYV09bnVsbCkpOlZhKGEpO319fWZ1bmN0aW9uIGhiKGEpe3JldHVybiBhIGluICRhPyRhW2FdOiRhW2FdPVwib25cIithfWZ1bmN0aW9uIGxiKGEsYil7dmFyIGM9YS5saXN0ZW5lcixkPWEuZGF8fGEuc3JjO2EuWiYma2IoYSk7cmV0dXJuIGMuY2FsbChkLGIpfVxuZnVuY3Rpb24gaWIoYSxiKXtyZXR1cm4gYS5YPyEwOlBhP2xiKGEsbmV3IEQoYix0aGlzKSk6KGI9bmV3IEQoYnx8bihcIndpbmRvdy5ldmVudFwiKSx0aGlzKSxsYihhLGIpKX1mdW5jdGlvbiBmYihhKXthPWFbWmFdO3JldHVybiBhIGluc3RhbmNlb2YgV2E/YTpudWxsfXZhciBtYj1cIl9fY2xvc3VyZV9ldmVudHNfZm5fXCIrKDFFOSpNYXRoLnJhbmRvbSgpPj4+MCk7ZnVuY3Rpb24gZGIoYSl7aWYoXCJmdW5jdGlvblwiPT1wKGEpKXJldHVybiBhO2FbbWJdfHwoYVttYl09ZnVuY3Rpb24oYil7cmV0dXJuIGEuaGFuZGxlRXZlbnQoYil9KTtyZXR1cm4gYVttYl19ZnVuY3Rpb24gRygpe3kuY2FsbCh0aGlzKTt0aGlzLmM9bmV3IFdhKHRoaXMpO3RoaXMuSj10aGlzO3RoaXMuQj1udWxsO314KEcseSk7Ry5wcm90b3R5cGVbRl09ITA7Zz1HLnByb3RvdHlwZTtnLmFkZEV2ZW50TGlzdGVuZXI9ZnVuY3Rpb24oYSxiLGMsZCl7YmIodGhpcyxhLGIsYyxkKTt9O2cucmVtb3ZlRXZlbnRMaXN0ZW5lcj1mdW5jdGlvbihhLGIsYyxkKXtqYih0aGlzLGEsYixjLGQpO307XG5nLmRpc3BhdGNoRXZlbnQ9ZnVuY3Rpb24oYSl7dmFyIGIsYz10aGlzLkI7aWYoYylmb3IoYj1bXTtjO2M9Yy5CKWIucHVzaChjKTtjPXRoaXMuSjt2YXIgZD1hLnR5cGV8fGE7aWYobShhKSlhPW5ldyBDKGEsYyk7ZWxzZSBpZihhIGluc3RhbmNlb2YgQylhLnRhcmdldD1hLnRhcmdldHx8YztlbHNle3ZhciBlPWE7YT1uZXcgQyhkLGMpO3lhKGEsZSk7fWU9ITA7aWYoYilmb3IodmFyIGY9Yi5sZW5ndGgtMTswPD1mO2YtLSl7dmFyIGg9YS5hPWJbZl07ZT1uYihoLGQsITAsYSkmJmU7fWg9YS5hPWM7ZT1uYihoLGQsITAsYSkmJmU7ZT1uYihoLGQsITEsYSkmJmU7aWYoYilmb3IoZj0wO2Y8Yi5sZW5ndGg7ZisrKWg9YS5hPWJbZl0sZT1uYihoLGQsITEsYSkmJmU7cmV0dXJuIGV9O1xuZy5HPWZ1bmN0aW9uKCl7Ry5OLkcuY2FsbCh0aGlzKTtpZih0aGlzLmMpe3ZhciBhPXRoaXMuYyxjO2ZvcihjIGluIGEuYSl7Zm9yKHZhciBkPWEuYVtjXSxlPTA7ZTxkLmxlbmd0aDtlKyspVmEoZFtlXSk7ZGVsZXRlIGEuYVtjXTthLmItLTt9fXRoaXMuQj1udWxsO307Zy56YT1mdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4gdGhpcy5jLmFkZChTdHJpbmcoYSksYiwhMSxjLGQpfTtnLkFhPWZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiB0aGlzLmMuYWRkKFN0cmluZyhhKSxiLCEwLGMsZCl9O1xuZnVuY3Rpb24gbmIoYSxiLGMsZCl7Yj1hLmMuYVtTdHJpbmcoYildO2lmKCFiKXJldHVybiAhMDtiPWIuY29uY2F0KCk7Zm9yKHZhciBlPSEwLGY9MDtmPGIubGVuZ3RoOysrZil7dmFyIGg9YltmXTtpZihoJiYhaC5YJiZoLmNhcHR1cmU9PWMpe3ZhciBsPWgubGlzdGVuZXIsRT1oLmRhfHxoLnNyYztoLlomJllhKGEuYyxoKTtlPSExIT09bC5jYWxsKEUsZCkmJmU7fX1yZXR1cm4gZSYmMCE9ZC5JYX12YXIgb2I9ay5KU09OLnN0cmluZ2lmeTtmdW5jdGlvbiBwYihhLGIpe3RoaXMuYz1hO3RoaXMuZj1iO3RoaXMuYj0wO3RoaXMuYT1udWxsO31wYi5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKCl7aWYoMDx0aGlzLmIpe3RoaXMuYi0tO3ZhciBhPXRoaXMuYTt0aGlzLmE9YS5uZXh0O2EubmV4dD1udWxsO31lbHNlIGE9dGhpcy5jKCk7cmV0dXJuIGF9O2Z1bmN0aW9uIHFiKCl7dGhpcy5iPXRoaXMuYT1udWxsO312YXIgc2I9bmV3IHBiKGZ1bmN0aW9uKCl7cmV0dXJuIG5ldyByYn0sZnVuY3Rpb24oYSl7YS5yZXNldCgpO30pO3FiLnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24oYSxiKXt2YXIgYz1zYi5nZXQoKTtjLnNldChhLGIpO3RoaXMuYj90aGlzLmIubmV4dD1jOnRoaXMuYT1jO3RoaXMuYj1jO307ZnVuY3Rpb24gdGIoKXt2YXIgYT11YixiPW51bGw7YS5hJiYoYj1hLmEsYS5hPWEuYS5uZXh0LGEuYXx8KGEuYj1udWxsKSxiLm5leHQ9bnVsbCk7cmV0dXJuIGJ9ZnVuY3Rpb24gcmIoKXt0aGlzLm5leHQ9dGhpcy5iPXRoaXMuYT1udWxsO31yYi5wcm90b3R5cGUuc2V0PWZ1bmN0aW9uKGEsYil7dGhpcy5hPWE7dGhpcy5iPWI7dGhpcy5uZXh0PW51bGw7fTtyYi5wcm90b3R5cGUucmVzZXQ9ZnVuY3Rpb24oKXt0aGlzLm5leHQ9dGhpcy5iPXRoaXMuYT1udWxsO307ZnVuY3Rpb24gdmIoYSl7ay5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dGhyb3cgYTt9LDApO31mdW5jdGlvbiB3YihhLGIpe3hifHx5YigpO3pifHwoeGIoKSx6Yj0hMCk7dWIuYWRkKGEsYik7fXZhciB4YjtmdW5jdGlvbiB5Yigpe3ZhciBhPWsuUHJvbWlzZS5yZXNvbHZlKHZvaWQgMCk7eGI9ZnVuY3Rpb24oKXthLnRoZW4oQWIpO307fXZhciB6Yj0hMSx1Yj1uZXcgcWI7ZnVuY3Rpb24gQWIoKXtmb3IodmFyIGE7YT10YigpOyl7dHJ5e2EuYS5jYWxsKGEuYik7fWNhdGNoKGMpe3ZiKGMpO312YXIgYj1zYjtiLmYoYSk7MTAwPmIuYiYmKGIuYisrLGEubmV4dD1iLmEsYi5hPWEpO316Yj0hMTt9ZnVuY3Rpb24gQ2IoYSxiKXtHLmNhbGwodGhpcyk7dGhpcy5iPWF8fDE7dGhpcy5hPWJ8fGs7dGhpcy5mPXUodGhpcy5mYix0aGlzKTt0aGlzLmc9dygpO314KENiLEcpO2c9Q2IucHJvdG90eXBlO2cuYmE9ITE7Zy5MPW51bGw7Zy5mYj1mdW5jdGlvbigpe2lmKHRoaXMuYmEpe3ZhciBhPXcoKS10aGlzLmc7MDxhJiZhPC44KnRoaXMuYj90aGlzLkw9dGhpcy5hLnNldFRpbWVvdXQodGhpcy5mLHRoaXMuYi1hKToodGhpcy5MJiYodGhpcy5hLmNsZWFyVGltZW91dCh0aGlzLkwpLHRoaXMuTD1udWxsKSx0aGlzLmRpc3BhdGNoRXZlbnQoXCJ0aWNrXCIpLHRoaXMuYmEmJihEYih0aGlzKSx0aGlzLnN0YXJ0KCkpKTt9fTtnLnN0YXJ0PWZ1bmN0aW9uKCl7dGhpcy5iYT0hMDt0aGlzLkx8fCh0aGlzLkw9dGhpcy5hLnNldFRpbWVvdXQodGhpcy5mLHRoaXMuYiksdGhpcy5nPXcoKSk7fTtmdW5jdGlvbiBEYihhKXthLmJhPSExO2EuTCYmKGEuYS5jbGVhclRpbWVvdXQoYS5MKSxhLkw9bnVsbCk7fVxuZy5HPWZ1bmN0aW9uKCl7Q2IuTi5HLmNhbGwodGhpcyk7RGIodGhpcyk7ZGVsZXRlIHRoaXMuYTt9O2Z1bmN0aW9uIEViKGEsYixjKXtpZihcImZ1bmN0aW9uXCI9PXAoYSkpYyYmKGE9dShhLGMpKTtlbHNlIGlmKGEmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGEuaGFuZGxlRXZlbnQpYT11KGEuaGFuZGxlRXZlbnQsYSk7ZWxzZSB0aHJvdyBFcnJvcihcIkludmFsaWQgbGlzdGVuZXIgYXJndW1lbnRcIik7cmV0dXJuIDIxNDc0ODM2NDc8TnVtYmVyKGIpPy0xOmsuc2V0VGltZW91dChhLGJ8fDApfWZ1bmN0aW9uIEZiKGEsYixjKXt5LmNhbGwodGhpcyk7dGhpcy5mPW51bGwhPWM/dShhLGMpOmE7dGhpcy5jPWI7dGhpcy5iPXUodGhpcy4kYSx0aGlzKTt0aGlzLmE9W107fXgoRmIseSk7Zz1GYi5wcm90b3R5cGU7Zy5lYT0hMTtnLlU9bnVsbDtnLlRhPWZ1bmN0aW9uKGEpe3RoaXMuYT1hcmd1bWVudHM7dGhpcy5VP3RoaXMuZWE9ITA6R2IodGhpcyk7fTtnLkc9ZnVuY3Rpb24oKXtGYi5OLkcuY2FsbCh0aGlzKTt0aGlzLlUmJihrLmNsZWFyVGltZW91dCh0aGlzLlUpLHRoaXMuVT1udWxsLHRoaXMuZWE9ITEsdGhpcy5hPVtdKTt9O2cuJGE9ZnVuY3Rpb24oKXt0aGlzLlU9bnVsbDt0aGlzLmVhJiYodGhpcy5lYT0hMSxHYih0aGlzKSk7fTtmdW5jdGlvbiBHYihhKXthLlU9RWIoYS5iLGEuYyk7YS5mLmFwcGx5KG51bGwsYS5hKTt9ZnVuY3Rpb24gSChhKXt5LmNhbGwodGhpcyk7dGhpcy5iPWE7dGhpcy5hPXt9O314KEgseSk7dmFyIEhiPVtdO2Z1bmN0aW9uIEliKGEsYixjLGQpe3EoYyl8fChjJiYoSGJbMF09Yy50b1N0cmluZygpKSxjPUhiKTtmb3IodmFyIGU9MDtlPGMubGVuZ3RoO2UrKyl7dmFyIGY9YmIoYixjW2VdLGR8fGEuaGFuZGxlRXZlbnQsITEsYS5ifHxhKTtpZighZilicmVhazthLmFbZi5rZXldPWY7fX1mdW5jdGlvbiBKYihhKXt2YShhLmEsZnVuY3Rpb24oYixjKXt0aGlzLmEuaGFzT3duUHJvcGVydHkoYykmJmtiKGIpO30sYSk7YS5hPXt9O31ILnByb3RvdHlwZS5HPWZ1bmN0aW9uKCl7SC5OLkcuY2FsbCh0aGlzKTtKYih0aGlzKTt9O0gucHJvdG90eXBlLmhhbmRsZUV2ZW50PWZ1bmN0aW9uKCl7dGhyb3cgRXJyb3IoXCJFdmVudEhhbmRsZXIuaGFuZGxlRXZlbnQgbm90IGltcGxlbWVudGVkXCIpO307ZnVuY3Rpb24gS2IoKXt9dmFyIEk9bmV3IEc7ZnVuY3Rpb24gTGIoYSl7Qy5jYWxsKHRoaXMsXCJzZXJ2ZXJyZWFjaGFiaWxpdHlcIixhKTt9eChMYixDKTtmdW5jdGlvbiBKKGEpe0kuZGlzcGF0Y2hFdmVudChuZXcgTGIoSSxhKSk7fWZ1bmN0aW9uIE1iKGEpe0MuY2FsbCh0aGlzLFwic3RhdGV2ZW50XCIsYSk7fXgoTWIsQyk7ZnVuY3Rpb24gSyhhKXtJLmRpc3BhdGNoRXZlbnQobmV3IE1iKEksYSkpO31mdW5jdGlvbiBOYihhKXtDLmNhbGwodGhpcyxcInRpbWluZ2V2ZW50XCIsYSk7fXgoTmIsQyk7ZnVuY3Rpb24gT2IoYSxiKXtpZihcImZ1bmN0aW9uXCIhPXAoYSkpdGhyb3cgRXJyb3IoXCJGbiBtdXN0IG5vdCBiZSBudWxsIGFuZCBtdXN0IGJlIGEgZnVuY3Rpb25cIik7cmV0dXJuIGsuc2V0VGltZW91dChmdW5jdGlvbigpe2EoKTt9LGIpfXZhciBQYj17Tk9fRVJST1I6MCxnYjoxLG5iOjIsbWI6MyxqYjo0LGxiOjUsb2I6NixMYTo3LFRJTUVPVVQ6OCxyYjo5fTt2YXIgUWI9e2liOlwiY29tcGxldGVcIix2YjpcInN1Y2Nlc3NcIixNYTpcImVycm9yXCIsTGE6XCJhYm9ydFwiLHRiOlwicmVhZHlcIix1YjpcInJlYWR5c3RhdGVjaGFuZ2VcIixUSU1FT1VUOlwidGltZW91dFwiLHBiOlwiaW5jcmVtZW50YWxkYXRhXCIsc2I6XCJwcm9ncmVzc1wiLGtiOlwiZG93bmxvYWRwcm9ncmVzc1wiLHdiOlwidXBsb2FkcHJvZ3Jlc3NcIn07ZnVuY3Rpb24gUmIoKXt9UmIucHJvdG90eXBlLmE9bnVsbDtmdW5jdGlvbiBTYihhKXt2YXIgYjsoYj1hLmEpfHwoYj1hLmE9e30pO3JldHVybiBifWZ1bmN0aW9uIFRiKCl7fXZhciBMPXtPUEVOOlwiYVwiLGhiOlwiYlwiLE1hOlwiY1wiLHFiOlwiZFwifTtmdW5jdGlvbiBVYigpe0MuY2FsbCh0aGlzLFwiZFwiKTt9eChVYixDKTtmdW5jdGlvbiBWYigpe0MuY2FsbCh0aGlzLFwiY1wiKTt9eChWYixDKTt2YXIgV2I7ZnVuY3Rpb24gWGIoKXt9eChYYixSYik7V2I9bmV3IFhiO2Z1bmN0aW9uIE0oYSxiLGMpe3RoaXMuZz1hO3RoaXMuVz1iO3RoaXMuVj1jfHwxO3RoaXMuST1uZXcgSCh0aGlzKTt0aGlzLk89WWI7YT1FYT8xMjU6dm9pZCAwO3RoaXMuUD1uZXcgQ2IoYSk7dGhpcy5oPW51bGw7dGhpcy5iPSExO3RoaXMubD10aGlzLkQ9dGhpcy5mPXRoaXMuRj10aGlzLnY9dGhpcy5SPXRoaXMuaT1udWxsO3RoaXMuaj1bXTt0aGlzLmE9bnVsbDt0aGlzLkE9MDt0aGlzLmM9dGhpcy53PW51bGw7dGhpcy5vPS0xO3RoaXMubT0hMTt0aGlzLko9MDt0aGlzLkI9bnVsbDt0aGlzLnM9dGhpcy5TPXRoaXMuSD0hMTt9dmFyIFliPTQ1RTMsWmI9e30sJGI9e307Zz1NLnByb3RvdHlwZTtnLnNldFRpbWVvdXQ9ZnVuY3Rpb24oYSl7dGhpcy5PPWE7fTtmdW5jdGlvbiBhYyhhLGIsYyl7YS5GPTE7YS5mPWJjKE4oYikpO2EubD1jO2EuSD0hMDtjYyhhLG51bGwpO31mdW5jdGlvbiBkYyhhLGIsYyxkKXthLkY9MTthLmY9YmMoTihiKSk7YS5sPW51bGw7YS5IPWM7Y2MoYSxkKTt9XG5mdW5jdGlvbiBjYyhhLGIpe2Eudj13KCk7ZWMoYSk7YS5EPU4oYS5mKTtmYyhhLkQsXCJ0XCIsYS5WKTthLkE9MDthLmE9YS5nLiQoYS5nLlkoKT9iOm51bGwpOzA8YS5KJiYoYS5CPW5ldyBGYih1KGEuSmEsYSxhLmEpLGEuSikpO0liKGEuSSxhLmEsXCJyZWFkeXN0YXRlY2hhbmdlXCIsYS5jYik7Yj1hLmg/d2EoYS5oKTp7fTthLmw/KGEud3x8KGEudz1cIlBPU1RcIiksYltcIkNvbnRlbnQtVHlwZVwiXT1cImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZFwiLGEuYS5jYShhLkQsYS53LGEubCxiKSk6KGEudz1cIkdFVFwiLGEuYS5jYShhLkQsYS53LG51bGwsYikpO0ooMSk7fWcuY2I9ZnVuY3Rpb24oYSl7YT1hLnRhcmdldDt2YXIgYj10aGlzLkI7YiYmMz09TyhhKT9iLlRhKCk6dGhpcy5KYShhKTt9O1xuZy5KYT1mdW5jdGlvbihhKXt0cnl7aWYoYT09dGhpcy5hKWE6e3ZhciBiPU8odGhpcy5hKSxjPXRoaXMuYS55YSgpLGQ9dGhpcy5hLlQoKTtpZighKDM+Ynx8Mz09YiYmIUVhJiYhdGhpcy5hLmFhKCkpKXt0aGlzLm18fDQhPWJ8fDc9PWN8fCg4PT1jfHwwPj1kP0ooMyk6SigyKSk7Z2ModGhpcyk7dmFyIGU9dGhpcy5hLlQoKTt0aGlzLm89ZTt2YXIgZj10aGlzLmEuYWEoKTtpZih0aGlzLmI9MjAwPT1lKXtpZih0aGlzLlMmJiF0aGlzLnMpe2I6e2lmKHRoaXMuYSl7dmFyIGg9aGModGhpcy5hLFwiWC1IVFRQLUluaXRpYWwtUmVzcG9uc2VcIik7aWYoaCYmIXFhKGgpKXt2YXIgbD1oO2JyZWFrIGJ9fWw9bnVsbDt9aWYobCl0aGlzLnM9ITAsaWModGhpcyxsKTtlbHNle3RoaXMuYj0hMTt0aGlzLmM9MztLKDEyKTtQKHRoaXMpO2pjKHRoaXMpO2JyZWFrIGF9fXRoaXMuSD8oa2ModGhpcyxiLGYpLEVhJiZ0aGlzLmImJjM9PWImJihJYih0aGlzLkksdGhpcy5QLFwidGlja1wiLHRoaXMuYmIpLHRoaXMuUC5zdGFydCgpKSk6XG5pYyh0aGlzLGYpOzQ9PWImJlAodGhpcyk7dGhpcy5iJiYhdGhpcy5tJiYoND09Yj90aGlzLmcubmEodGhpcyk6KHRoaXMuYj0hMSxlYyh0aGlzKSkpO31lbHNlIDQwMD09ZSYmMDxmLmluZGV4T2YoXCJVbmtub3duIFNJRFwiKT8odGhpcy5jPTMsSygxMikpOih0aGlzLmM9MCxLKDEzKSksUCh0aGlzKSxqYyh0aGlzKTt9fX1jYXRjaChFKXt9ZmluYWxseXt9fTtmdW5jdGlvbiBrYyhhLGIsYyl7Zm9yKHZhciBkPSEwOyFhLm0mJmEuQTxjLmxlbmd0aDspe3ZhciBlPWxjKGEsYyk7aWYoZT09JGIpezQ9PWImJihhLmM9NCxLKDE0KSxkPSExKTticmVha31lbHNlIGlmKGU9PVpiKXthLmM9NDtLKDE1KTtkPSExO2JyZWFrfWVsc2UgaWMoYSxlKTt9ND09YiYmMD09Yy5sZW5ndGgmJihhLmM9MSxLKDE2KSxkPSExKTthLmI9YS5iJiZkO2R8fChQKGEpLGpjKGEpKTt9XG5nLmJiPWZ1bmN0aW9uKCl7aWYodGhpcy5hKXt2YXIgYT1PKHRoaXMuYSksYj10aGlzLmEuYWEoKTt0aGlzLkE8Yi5sZW5ndGgmJihnYyh0aGlzKSxrYyh0aGlzLGEsYiksdGhpcy5iJiY0IT1hJiZlYyh0aGlzKSk7fX07ZnVuY3Rpb24gbGMoYSxiKXt2YXIgYz1hLkEsZD1iLmluZGV4T2YoXCJcXG5cIixjKTtpZigtMT09ZClyZXR1cm4gJGI7Yz1OdW1iZXIoYi5zdWJzdHJpbmcoYyxkKSk7aWYoaXNOYU4oYykpcmV0dXJuIFpiO2QrPTE7aWYoZCtjPmIubGVuZ3RoKXJldHVybiAkYjtiPWIuc3Vic3RyKGQsYyk7YS5BPWQrYztyZXR1cm4gYn1nLmNhbmNlbD1mdW5jdGlvbigpe3RoaXMubT0hMDtQKHRoaXMpO307ZnVuY3Rpb24gZWMoYSl7YS5SPXcoKSthLk87bWMoYSxhLk8pO31mdW5jdGlvbiBtYyhhLGIpe2lmKG51bGwhPWEuaSl0aHJvdyBFcnJvcihcIldhdGNoRG9nIHRpbWVyIG5vdCBudWxsXCIpO2EuaT1PYih1KGEuYWIsYSksYik7fVxuZnVuY3Rpb24gZ2MoYSl7YS5pJiYoay5jbGVhclRpbWVvdXQoYS5pKSxhLmk9bnVsbCk7fWcuYWI9ZnVuY3Rpb24oKXt0aGlzLmk9bnVsbDt2YXIgYT13KCk7MDw9YS10aGlzLlI/KDIhPXRoaXMuRiYmKEooMyksSygxNykpLFAodGhpcyksdGhpcy5jPTIsamModGhpcykpOm1jKHRoaXMsdGhpcy5SLWEpO307ZnVuY3Rpb24gamMoYSl7YS5nLkNhKCl8fGEubXx8YS5nLm5hKGEpO31mdW5jdGlvbiBQKGEpe2djKGEpO3ZhciBiPWEuQjtiJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBiLmxhJiZiLmxhKCk7YS5CPW51bGw7RGIoYS5QKTtKYihhLkkpO2EuYSYmKGI9YS5hLGEuYT1udWxsLGIuYWJvcnQoKSxiLmxhKCkpO31mdW5jdGlvbiBpYyhhLGIpe3RyeXthLmcuRmEoYSxiKSxKKDQpO31jYXRjaChjKXt9fWZ1bmN0aW9uIG5jKGEpe2lmKGEuQyYmXCJmdW5jdGlvblwiPT10eXBlb2YgYS5DKXJldHVybiBhLkMoKTtpZihtKGEpKXJldHVybiBhLnNwbGl0KFwiXCIpO2lmKGNhKGEpKXtmb3IodmFyIGI9W10sYz1hLmxlbmd0aCxkPTA7ZDxjO2QrKyliLnB1c2goYVtkXSk7cmV0dXJuIGJ9Yj1bXTtjPTA7Zm9yKGQgaW4gYSliW2MrK109YVtkXTtyZXR1cm4gYn1cbmZ1bmN0aW9uIG9jKGEsYil7aWYoYS5mb3JFYWNoJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBhLmZvckVhY2gpYS5mb3JFYWNoKGIsdm9pZCAwKTtlbHNlIGlmKGNhKGEpfHxtKGEpKWxhKGEsYix2b2lkIDApO2Vsc2V7aWYoYS5LJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBhLkspdmFyIGM9YS5LKCk7ZWxzZSBpZihhLkMmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGEuQyljPXZvaWQgMDtlbHNlIGlmKGNhKGEpfHxtKGEpKXtjPVtdO2Zvcih2YXIgZD1hLmxlbmd0aCxlPTA7ZTxkO2UrKyljLnB1c2goZSk7fWVsc2UgZm9yKGUgaW4gYz1bXSxkPTAsYSljW2QrK109ZTtkPW5jKGEpO2U9ZC5sZW5ndGg7Zm9yKHZhciBmPTA7ZjxlO2YrKyliLmNhbGwodm9pZCAwLGRbZl0sYyYmY1tmXSxhKTt9fWZ1bmN0aW9uIFEoYSxiKXt0aGlzLmI9e307dGhpcy5hPVtdO3RoaXMuYz0wO3ZhciBjPWFyZ3VtZW50cy5sZW5ndGg7aWYoMTxjKXtpZihjJTIpdGhyb3cgRXJyb3IoXCJVbmV2ZW4gbnVtYmVyIG9mIGFyZ3VtZW50c1wiKTtmb3IodmFyIGQ9MDtkPGM7ZCs9Mil0aGlzLnNldChhcmd1bWVudHNbZF0sYXJndW1lbnRzW2QrMV0pO31lbHNlIGlmKGEpaWYoYSBpbnN0YW5jZW9mIFEpZm9yKGM9YS5LKCksZD0wO2Q8Yy5sZW5ndGg7ZCsrKXRoaXMuc2V0KGNbZF0sYS5nZXQoY1tkXSkpO2Vsc2UgZm9yKGQgaW4gYSl0aGlzLnNldChkLGFbZF0pO31nPVEucHJvdG90eXBlO2cuQz1mdW5jdGlvbigpe3BjKHRoaXMpO2Zvcih2YXIgYT1bXSxiPTA7Yjx0aGlzLmEubGVuZ3RoO2IrKylhLnB1c2godGhpcy5iW3RoaXMuYVtiXV0pO3JldHVybiBhfTtnLks9ZnVuY3Rpb24oKXtwYyh0aGlzKTtyZXR1cm4gdGhpcy5hLmNvbmNhdCgpfTtcbmZ1bmN0aW9uIHFjKGEpe2EuYj17fTthLmEubGVuZ3RoPTA7YS5jPTA7fWZ1bmN0aW9uIHJjKGEsYil7UihhLmIsYikmJihkZWxldGUgYS5iW2JdLGEuYy0tLGEuYS5sZW5ndGg+MiphLmMmJnBjKGEpKTt9ZnVuY3Rpb24gcGMoYSl7aWYoYS5jIT1hLmEubGVuZ3RoKXtmb3IodmFyIGI9MCxjPTA7YjxhLmEubGVuZ3RoOyl7dmFyIGQ9YS5hW2JdO1IoYS5iLGQpJiYoYS5hW2MrK109ZCk7YisrO31hLmEubGVuZ3RoPWM7fWlmKGEuYyE9YS5hLmxlbmd0aCl7dmFyIGU9e307Zm9yKGM9Yj0wO2I8YS5hLmxlbmd0aDspZD1hLmFbYl0sUihlLGQpfHwoYS5hW2MrK109ZCxlW2RdPTEpLGIrKzthLmEubGVuZ3RoPWM7fX1nLmdldD1mdW5jdGlvbihhLGIpe3JldHVybiBSKHRoaXMuYixhKT90aGlzLmJbYV06Yn07Zy5zZXQ9ZnVuY3Rpb24oYSxiKXtSKHRoaXMuYixhKXx8KHRoaXMuYysrLHRoaXMuYS5wdXNoKGEpKTt0aGlzLmJbYV09Yjt9O1xuZy5mb3JFYWNoPWZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPXRoaXMuSygpLGQ9MDtkPGMubGVuZ3RoO2QrKyl7dmFyIGU9Y1tkXSxmPXRoaXMuZ2V0KGUpO2EuY2FsbChiLGYsZSx0aGlzKTt9fTtmdW5jdGlvbiBSKGEsYil7cmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChhLGIpfXZhciBzYz0vXig/OihbXjovPyMuXSspOik/KD86XFwvXFwvKD86KFteLz8jXSopQCk/KFteLyM/XSo/KSg/OjooWzAtOV0rKSk/KD89Wy8jP118JCkpPyhbXj8jXSspPyg/OlxcPyhbXiNdKikpPyg/OiMoW1xcc1xcU10qKSk/JC87ZnVuY3Rpb24gdGMoYSxiKXtpZihhKXthPWEuc3BsaXQoXCImXCIpO2Zvcih2YXIgYz0wO2M8YS5sZW5ndGg7YysrKXt2YXIgZD1hW2NdLmluZGV4T2YoXCI9XCIpLGU9bnVsbDtpZigwPD1kKXt2YXIgZj1hW2NdLnN1YnN0cmluZygwLGQpO2U9YVtjXS5zdWJzdHJpbmcoZCsxKTt9ZWxzZSBmPWFbY107YihmLGU/ZGVjb2RlVVJJQ29tcG9uZW50KGUucmVwbGFjZSgvXFwrL2csXCIgXCIpKTpcIlwiKTt9fX1mdW5jdGlvbiBTKGEsYil7dGhpcy5iPXRoaXMuaj10aGlzLmY9XCJcIjt0aGlzLmk9bnVsbDt0aGlzLmc9dGhpcy5hPVwiXCI7dGhpcy5oPSExO3ZhciBjO2EgaW5zdGFuY2VvZiBTPyh0aGlzLmg9dm9pZCAwIT09Yj9iOmEuaCx1Yyh0aGlzLGEuZiksdGhpcy5qPWEuaix2Yyh0aGlzLGEuYiksd2ModGhpcyxhLmkpLHRoaXMuYT1hLmEseGModGhpcyx5YyhhLmMpKSx0aGlzLmc9YS5nKTphJiYoYz1TdHJpbmcoYSkubWF0Y2goc2MpKT8odGhpcy5oPSEhYix1Yyh0aGlzLGNbMV18fFwiXCIsITApLHRoaXMuaj16YyhjWzJdfHxcIlwiKSx2Yyh0aGlzLGNbM118fFwiXCIsITApLHdjKHRoaXMsY1s0XSksdGhpcy5hPXpjKGNbNV18fFwiXCIsITApLHhjKHRoaXMsY1s2XXx8XCJcIiwhMCksdGhpcy5nPXpjKGNbN118fFwiXCIpKToodGhpcy5oPSEhYix0aGlzLmM9bmV3IEFjKG51bGwsdGhpcy5oKSk7fVxuUy5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXt2YXIgYT1bXSxiPXRoaXMuZjtiJiZhLnB1c2goQmMoYixDYywhMCksXCI6XCIpO3ZhciBjPXRoaXMuYjtpZihjfHxcImZpbGVcIj09YilhLnB1c2goXCIvL1wiKSwoYj10aGlzLmopJiZhLnB1c2goQmMoYixDYywhMCksXCJAXCIpLGEucHVzaChlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGMpKS5yZXBsYWNlKC8lMjUoWzAtOWEtZkEtRl17Mn0pL2csXCIlJDFcIikpLGM9dGhpcy5pLG51bGwhPWMmJmEucHVzaChcIjpcIixTdHJpbmcoYykpO2lmKGM9dGhpcy5hKXRoaXMuYiYmXCIvXCIhPWMuY2hhckF0KDApJiZhLnB1c2goXCIvXCIpLGEucHVzaChCYyhjLFwiL1wiPT1jLmNoYXJBdCgwKT9EYzpFYywhMCkpOyhjPXRoaXMuYy50b1N0cmluZygpKSYmYS5wdXNoKFwiP1wiLGMpOyhjPXRoaXMuZykmJmEucHVzaChcIiNcIixCYyhjLEZjKSk7cmV0dXJuIGEuam9pbihcIlwiKX07XG5TLnByb3RvdHlwZS5yZXNvbHZlPWZ1bmN0aW9uKGEpe3ZhciBiPU4odGhpcyksYz0hIWEuZjtjP3VjKGIsYS5mKTpjPSEhYS5qO2M/Yi5qPWEuajpjPSEhYS5iO2M/dmMoYixhLmIpOmM9bnVsbCE9YS5pO3ZhciBkPWEuYTtpZihjKXdjKGIsYS5pKTtlbHNlIGlmKGM9ISFhLmEpe2lmKFwiL1wiIT1kLmNoYXJBdCgwKSlpZih0aGlzLmImJiF0aGlzLmEpZD1cIi9cIitkO2Vsc2V7dmFyIGU9Yi5hLmxhc3RJbmRleE9mKFwiL1wiKTstMSE9ZSYmKGQ9Yi5hLnN1YnN0cigwLGUrMSkrZCk7fWU9ZDtpZihcIi4uXCI9PWV8fFwiLlwiPT1lKWQ9XCJcIjtlbHNlIGlmKHooZSxcIi4vXCIpfHx6KGUsXCIvLlwiKSl7ZD0wPT1lLmxhc3RJbmRleE9mKFwiL1wiLDApO2U9ZS5zcGxpdChcIi9cIik7Zm9yKHZhciBmPVtdLGg9MDtoPGUubGVuZ3RoOyl7dmFyIGw9ZVtoKytdO1wiLlwiPT1sP2QmJmg9PWUubGVuZ3RoJiZmLnB1c2goXCJcIik6XCIuLlwiPT1sPygoMTxmLmxlbmd0aHx8MT09Zi5sZW5ndGgmJlwiXCIhPWZbMF0pJiZmLnBvcCgpLGQmJlxuaD09ZS5sZW5ndGgmJmYucHVzaChcIlwiKSk6KGYucHVzaChsKSxkPSEwKTt9ZD1mLmpvaW4oXCIvXCIpO31lbHNlIGQ9ZTt9Yz9iLmE9ZDpjPVwiXCIhPT1hLmMudG9TdHJpbmcoKTtjP3hjKGIseWMoYS5jKSk6Yz0hIWEuZztjJiYoYi5nPWEuZyk7cmV0dXJuIGJ9O2Z1bmN0aW9uIE4oYSl7cmV0dXJuIG5ldyBTKGEpfWZ1bmN0aW9uIHVjKGEsYixjKXthLmY9Yz96YyhiLCEwKTpiO2EuZiYmKGEuZj1hLmYucmVwbGFjZSgvOiQvLFwiXCIpKTt9ZnVuY3Rpb24gdmMoYSxiLGMpe2EuYj1jP3pjKGIsITApOmI7fWZ1bmN0aW9uIHdjKGEsYil7aWYoYil7Yj1OdW1iZXIoYik7aWYoaXNOYU4oYil8fDA+Yil0aHJvdyBFcnJvcihcIkJhZCBwb3J0IG51bWJlciBcIitiKTthLmk9Yjt9ZWxzZSBhLmk9bnVsbDt9ZnVuY3Rpb24geGMoYSxiLGMpe2IgaW5zdGFuY2VvZiBBYz8oYS5jPWIsR2MoYS5jLGEuaCkpOihjfHwoYj1CYyhiLEhjKSksYS5jPW5ldyBBYyhiLGEuaCkpO31cbmZ1bmN0aW9uIFQoYSxiLGMpe2EuYy5zZXQoYixjKTt9ZnVuY3Rpb24gZmMoYSxiLGMpe3EoYyl8fChjPVtTdHJpbmcoYyldKTtJYyhhLmMsYixjKTt9ZnVuY3Rpb24gYmMoYSl7VChhLFwienhcIixNYXRoLmZsb29yKDIxNDc0ODM2NDgqTWF0aC5yYW5kb20oKSkudG9TdHJpbmcoMzYpK01hdGguYWJzKE1hdGguZmxvb3IoMjE0NzQ4MzY0OCpNYXRoLnJhbmRvbSgpKV53KCkpLnRvU3RyaW5nKDM2KSk7cmV0dXJuIGF9ZnVuY3Rpb24gSmMoYSl7cmV0dXJuIGEgaW5zdGFuY2VvZiBTP04oYSk6bmV3IFMoYSx2b2lkIDApfWZ1bmN0aW9uIEtjKGEsYixjLGQpe3ZhciBlPW5ldyBTKG51bGwsdm9pZCAwKTthJiZ1YyhlLGEpO2ImJnZjKGUsYik7YyYmd2MoZSxjKTtkJiYoZS5hPWQpO3JldHVybiBlfWZ1bmN0aW9uIHpjKGEsYil7cmV0dXJuIGE/Yj9kZWNvZGVVUkkoYS5yZXBsYWNlKC8lMjUvZyxcIiUyNTI1XCIpKTpkZWNvZGVVUklDb21wb25lbnQoYSk6XCJcIn1cbmZ1bmN0aW9uIEJjKGEsYixjKXtyZXR1cm4gbShhKT8oYT1lbmNvZGVVUkkoYSkucmVwbGFjZShiLExjKSxjJiYoYT1hLnJlcGxhY2UoLyUyNShbMC05YS1mQS1GXXsyfSkvZyxcIiUkMVwiKSksYSk6bnVsbH1mdW5jdGlvbiBMYyhhKXthPWEuY2hhckNvZGVBdCgwKTtyZXR1cm4gXCIlXCIrKGE+PjQmMTUpLnRvU3RyaW5nKDE2KSsoYSYxNSkudG9TdHJpbmcoMTYpfXZhciBDYz0vWyNcXC9cXD9AXS9nLEVjPS9bI1xcPzpdL2csRGM9L1sjXFw/XS9nLEhjPS9bI1xcP0BdL2csRmM9LyMvZztmdW5jdGlvbiBBYyhhLGIpe3RoaXMuYj10aGlzLmE9bnVsbDt0aGlzLmM9YXx8bnVsbDt0aGlzLmY9ISFiO31mdW5jdGlvbiBVKGEpe2EuYXx8KGEuYT1uZXcgUSxhLmI9MCxhLmMmJnRjKGEuYyxmdW5jdGlvbihiLGMpe2EuYWRkKGRlY29kZVVSSUNvbXBvbmVudChiLnJlcGxhY2UoL1xcKy9nLFwiIFwiKSksYyk7fSkpO31nPUFjLnByb3RvdHlwZTtcbmcuYWRkPWZ1bmN0aW9uKGEsYil7VSh0aGlzKTt0aGlzLmM9bnVsbDthPVYodGhpcyxhKTt2YXIgYz10aGlzLmEuZ2V0KGEpO2N8fHRoaXMuYS5zZXQoYSxjPVtdKTtjLnB1c2goYik7dGhpcy5iKz0xO3JldHVybiB0aGlzfTtmdW5jdGlvbiBNYyhhLGIpe1UoYSk7Yj1WKGEsYik7UihhLmEuYixiKSYmKGEuYz1udWxsLGEuYi09YS5hLmdldChiKS5sZW5ndGgscmMoYS5hLGIpKTt9ZnVuY3Rpb24gTmMoYSxiKXtVKGEpO2I9VihhLGIpO3JldHVybiBSKGEuYS5iLGIpfWcuZm9yRWFjaD1mdW5jdGlvbihhLGIpe1UodGhpcyk7dGhpcy5hLmZvckVhY2goZnVuY3Rpb24oYyxkKXtsYShjLGZ1bmN0aW9uKGUpe2EuY2FsbChiLGUsZCx0aGlzKTt9LHRoaXMpO30sdGhpcyk7fTtcbmcuSz1mdW5jdGlvbigpe1UodGhpcyk7Zm9yKHZhciBhPXRoaXMuYS5DKCksYj10aGlzLmEuSygpLGM9W10sZD0wO2Q8Yi5sZW5ndGg7ZCsrKWZvcih2YXIgZT1hW2RdLGY9MDtmPGUubGVuZ3RoO2YrKyljLnB1c2goYltkXSk7cmV0dXJuIGN9O2cuQz1mdW5jdGlvbihhKXtVKHRoaXMpO3ZhciBiPVtdO2lmKG0oYSkpTmModGhpcyxhKSYmKGI9b2EoYix0aGlzLmEuZ2V0KFYodGhpcyxhKSkpKTtlbHNle2E9dGhpcy5hLkMoKTtmb3IodmFyIGM9MDtjPGEubGVuZ3RoO2MrKyliPW9hKGIsYVtjXSk7fXJldHVybiBifTtnLnNldD1mdW5jdGlvbihhLGIpe1UodGhpcyk7dGhpcy5jPW51bGw7YT1WKHRoaXMsYSk7TmModGhpcyxhKSYmKHRoaXMuYi09dGhpcy5hLmdldChhKS5sZW5ndGgpO3RoaXMuYS5zZXQoYSxbYl0pO3RoaXMuYis9MTtyZXR1cm4gdGhpc307XG5nLmdldD1mdW5jdGlvbihhLGIpe2lmKCFhKXJldHVybiBiO2E9dGhpcy5DKGEpO3JldHVybiAwPGEubGVuZ3RoP1N0cmluZyhhWzBdKTpifTtmdW5jdGlvbiBJYyhhLGIsYyl7TWMoYSxiKTswPGMubGVuZ3RoJiYoYS5jPW51bGwsYS5hLnNldChWKGEsYikscGEoYykpLGEuYis9Yy5sZW5ndGgpO31nLnRvU3RyaW5nPWZ1bmN0aW9uKCl7aWYodGhpcy5jKXJldHVybiB0aGlzLmM7aWYoIXRoaXMuYSlyZXR1cm4gXCJcIjtmb3IodmFyIGE9W10sYj10aGlzLmEuSygpLGM9MDtjPGIubGVuZ3RoO2MrKyl7dmFyIGQ9YltjXSxlPWVuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoZCkpO2Q9dGhpcy5DKGQpO2Zvcih2YXIgZj0wO2Y8ZC5sZW5ndGg7ZisrKXt2YXIgaD1lO1wiXCIhPT1kW2ZdJiYoaCs9XCI9XCIrZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhkW2ZdKSkpO2EucHVzaChoKTt9fXJldHVybiB0aGlzLmM9YS5qb2luKFwiJlwiKX07XG5mdW5jdGlvbiB5YyhhKXt2YXIgYj1uZXcgQWM7Yi5jPWEuYzthLmEmJihiLmE9bmV3IFEoYS5hKSxiLmI9YS5iKTtyZXR1cm4gYn1mdW5jdGlvbiBWKGEsYil7Yj1TdHJpbmcoYik7YS5mJiYoYj1iLnRvTG93ZXJDYXNlKCkpO3JldHVybiBifWZ1bmN0aW9uIEdjKGEsYil7YiYmIWEuZiYmKFUoYSksYS5jPW51bGwsYS5hLmZvckVhY2goZnVuY3Rpb24oYyxkKXt2YXIgZT1kLnRvTG93ZXJDYXNlKCk7ZCE9ZSYmKE1jKHRoaXMsZCksSWModGhpcyxlLGMpKTt9LGEpKTthLmY9Yjt9ZnVuY3Rpb24gUWMoKXt9ZnVuY3Rpb24gUmMoKXt9eChSYyxRYyk7ZnVuY3Rpb24gU2MoYSl7dGhpcy5hPWE7dGhpcy5iPXRoaXMuaD1udWxsO3RoaXMuZz0hMTt0aGlzLmk9bnVsbDt0aGlzLmM9LTE7dGhpcy5sPXRoaXMuZj1udWxsO31nPVNjLnByb3RvdHlwZTtnLk09bnVsbDtmdW5jdGlvbiBVYyhhKXt2YXIgYj1hLmEuRi5hO2lmKG51bGwhPWIpSyg0KSxiPyhLKDEwKSxWYyhhLmEsYSwhMSkpOihLKDExKSxWYyhhLmEsYSwhMCkpO2Vsc2V7YS5iPW5ldyBNKGEsdm9pZCAwLHZvaWQgMCk7YS5iLmg9YS5oO2I9YS5hO2I9V2MoYixiLlkoKT9hLmY6bnVsbCxhLmkpO0soNCk7ZmMoYixcIlRZUEVcIixcInhtbGh0dHBcIik7dmFyIGM9YS5hLmosZD1hLmEuSTtjJiZkJiZUKGIsYyxkKTtkYyhhLmIsYiwhMSxhLmYpO319Zy4kPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmEuJChhKX07Zy5hYm9ydD1mdW5jdGlvbigpe3RoaXMuYiYmKHRoaXMuYi5jYW5jZWwoKSx0aGlzLmI9bnVsbCk7dGhpcy5jPS0xO307Zy5DYT1mdW5jdGlvbigpe3JldHVybiAhMX07XG5nLkZhPWZ1bmN0aW9uKGEsYil7dGhpcy5jPWEubztpZigwPT10aGlzLk0pe2lmKCF0aGlzLmEubyYmKGE9YS5hKSl7dmFyIGM9aGMoYSxcIlgtQ2xpZW50LVdpcmUtUHJvdG9jb2xcIik7dGhpcy5sPWM/YzpudWxsO3RoaXMuYS5qJiYoYT1oYyhhLFwiWC1IVFRQLVNlc3Npb24tSWRcIikpJiYodGhpcy5hLkk9YSk7fWlmKGIpe3RyeXt2YXIgZD10aGlzLmEuamEuYS5wYXJzZShiKTt9Y2F0Y2goZSl7Yj10aGlzLmE7Yi5tPXRoaXMuYztXKGIsMik7cmV0dXJufXRoaXMuZj1kWzBdO31lbHNlIGI9dGhpcy5hLGIubT10aGlzLmMsVyhiLDIpO31lbHNlIGlmKDE9PXRoaXMuTSlpZih0aGlzLmcpSyg2KTtlbHNlIGlmKFwiMTExMTFcIj09Yil7aWYoSyg1KSx0aGlzLmc9ITAsIUJ8fDEwPD1OdW1iZXIoTmEpKXRoaXMuYz0yMDAsdGhpcy5iLmNhbmNlbCgpLEsoMTEpLFZjKHRoaXMuYSx0aGlzLCEwKTt9ZWxzZSBLKDcpLHRoaXMuZz0hMTt9O1xuZy5uYT1mdW5jdGlvbigpe3RoaXMuYz10aGlzLmIubztpZih0aGlzLmIuYikwPT10aGlzLk0/KHRoaXMuTT0xLFVjKHRoaXMpKToxPT10aGlzLk0mJih0aGlzLmc/KEsoMTEpLFZjKHRoaXMuYSx0aGlzLCEwKSk6KEsoMTApLFZjKHRoaXMuYSx0aGlzLCExKSkpO2Vsc2V7MD09dGhpcy5NP0soOCk6MT09dGhpcy5NJiZLKDkpO3ZhciBhPXRoaXMuYTthLm09dGhpcy5jO1coYSwyKTt9fTtnLlk9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hLlkoKX07Zy5tYT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmEubWEoKX07ZnVuY3Rpb24gWGMoKXt0aGlzLmE9dGhpcy5iPW51bGw7fWZ1bmN0aW9uIFljKCl7dGhpcy5hPW5ldyBRO31mdW5jdGlvbiBaYyhhKXt2YXIgYj10eXBlb2YgYTtyZXR1cm4gXCJvYmplY3RcIj09YiYmYXx8XCJmdW5jdGlvblwiPT1iP1wib1wiKyhhW3RdfHwoYVt0XT0rK2RhKSk6Yi5jaGFyQXQoMCkrYX1ZYy5wcm90b3R5cGUuYWRkPWZ1bmN0aW9uKGEpe3RoaXMuYS5zZXQoWmMoYSksYSk7fTtZYy5wcm90b3R5cGUuQz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmEuQygpfTtmdW5jdGlvbiAkYyhhLGIpe3RoaXMuYj1hO3RoaXMuYT1iO31mdW5jdGlvbiBhZChhKXt0aGlzLmc9YXx8YmQ7ay5QZXJmb3JtYW5jZU5hdmlnYXRpb25UaW1pbmc/KGE9ay5wZXJmb3JtYW5jZS5nZXRFbnRyaWVzQnlUeXBlKFwibmF2aWdhdGlvblwiKSxhPTA8YS5sZW5ndGgmJihcImhxXCI9PWFbMF0ubmV4dEhvcFByb3RvY29sfHxcImgyXCI9PWFbMF0ubmV4dEhvcFByb3RvY29sKSk6YT0hIShrLmthJiZrLmthLkRhJiZrLmthLkRhKCkmJmsua2EuRGEoKS55Yik7dGhpcy5mPWE/dGhpcy5nOjE7dGhpcy5hPW51bGw7MTx0aGlzLmYmJih0aGlzLmE9bmV3IFljKTt0aGlzLmI9bnVsbDt0aGlzLmM9W107fXZhciBiZD0xMDtmdW5jdGlvbiBjZChhLGIpeyFhLmEmJih6KGIsXCJzcGR5XCIpfHx6KGIsXCJxdWljXCIpfHx6KGIsXCJoMlwiKSkmJihhLmY9YS5nLGEuYT1uZXcgWWMsYS5iJiYoZGQoYSxhLmIpLGEuYj1udWxsKSk7fWZ1bmN0aW9uIGVkKGEpe3JldHVybiBhLmI/ITA6YS5hP2EuYS5hLmM+PWEuZjohMX1cbmZ1bmN0aW9uIGZkKGEpe3JldHVybiBhLmI/MTphLmE/YS5hLmEuYzowfWZ1bmN0aW9uIGdkKGEsYil7YS5iP2E9YS5iPT1iOmEuYT8oYj1aYyhiKSxhPVIoYS5hLmEuYixiKSk6YT0hMTtyZXR1cm4gYX1mdW5jdGlvbiBkZChhLGIpe2EuYT9hLmEuYWRkKGIpOmEuYj1iO31mdW5jdGlvbiBoZChhLGIpe2lmKGEuYiYmYS5iPT1iKWEuYj1udWxsO2Vsc2V7dmFyIGM7aWYoYz1hLmEpYz1aYyhiKSxjPVIoYS5hLmEuYixjKTtjJiZyYyhhLmEuYSxaYyhiKSk7fX1hZC5wcm90b3R5cGUuY2FuY2VsPWZ1bmN0aW9uKCl7dGhpcy5jPWlkKHRoaXMpO3RoaXMuYj8odGhpcy5iLmNhbmNlbCgpLHRoaXMuYj1udWxsKTp0aGlzLmEmJjAhPXRoaXMuYS5hLmMmJihsYSh0aGlzLmEuQygpLGZ1bmN0aW9uKGEpe2EuY2FuY2VsKCk7fSkscWModGhpcy5hLmEpKTt9O1xuZnVuY3Rpb24gaWQoYSl7aWYobnVsbCE9YS5iKXJldHVybiBhLmMuY29uY2F0KGEuYi5qKTtpZihudWxsIT1hLmEmJjAhPWEuYS5hLmMpe3ZhciBiPWEuYztsYShhLmEuQygpLGZ1bmN0aW9uKGMpe2I9Yi5jb25jYXQoYy5qKTt9KTtyZXR1cm4gYn1yZXR1cm4gcGEoYS5jKX1mdW5jdGlvbiBqZCgpe31qZC5wcm90b3R5cGUuc3RyaW5naWZ5PWZ1bmN0aW9uKGEpe3JldHVybiBrLkpTT04uc3RyaW5naWZ5KGEsdm9pZCAwKX07amQucHJvdG90eXBlLnBhcnNlPWZ1bmN0aW9uKGEpe3JldHVybiBrLkpTT04ucGFyc2UoYSx2b2lkIDApfTtmdW5jdGlvbiBrZCgpe3RoaXMuYT1uZXcgamQ7fWZ1bmN0aW9uIGxkKGEsYixjKXt2YXIgZD1jfHxcIlwiO3RyeXtvYyhhLGZ1bmN0aW9uKGUsZil7dmFyIGg9ZTtyKGUpJiYoaD1vYihlKSk7Yi5wdXNoKGQrZitcIj1cIitlbmNvZGVVUklDb21wb25lbnQoaCkpO30pO31jYXRjaChlKXt0aHJvdyBiLnB1c2goZCtcInR5cGU9XCIrZW5jb2RlVVJJQ29tcG9uZW50KFwiX2JhZG1hcFwiKSksZTt9fWZ1bmN0aW9uIG1kKGEsYil7dmFyIGM9bmV3IEtiO2lmKGsuSW1hZ2Upe3ZhciBkPW5ldyBJbWFnZTtkLm9ubG9hZD12KG5kLGMsZCxcIlRlc3RMb2FkSW1hZ2U6IGxvYWRlZFwiLCEwLGIpO2Qub25lcnJvcj12KG5kLGMsZCxcIlRlc3RMb2FkSW1hZ2U6IGVycm9yXCIsITEsYik7ZC5vbmFib3J0PXYobmQsYyxkLFwiVGVzdExvYWRJbWFnZTogYWJvcnRcIiwhMSxiKTtkLm9udGltZW91dD12KG5kLGMsZCxcIlRlc3RMb2FkSW1hZ2U6IHRpbWVvdXRcIiwhMSxiKTtrLnNldFRpbWVvdXQoZnVuY3Rpb24oKXtpZihkLm9udGltZW91dClkLm9udGltZW91dCgpO30sMUU0KTtkLnNyYz1hO31lbHNlIGIoITEpO31mdW5jdGlvbiBuZChhLGIsYyxkLGUpe3RyeXtiLm9ubG9hZD1udWxsLGIub25lcnJvcj1udWxsLGIub25hYm9ydD1udWxsLGIub250aW1lb3V0PW51bGwsZShkKTt9Y2F0Y2goZil7fX12YXIgb2Q9ay5KU09OLnBhcnNlO2Z1bmN0aW9uIFgoYSl7Ry5jYWxsKHRoaXMpO3RoaXMuaGVhZGVycz1uZXcgUTt0aGlzLkg9YXx8bnVsbDt0aGlzLmI9ITE7dGhpcy5zPXRoaXMuYT1udWxsO3RoaXMuQT1cIlwiO3RoaXMuaD0wO3RoaXMuZj1cIlwiO3RoaXMuZz10aGlzLnc9dGhpcy5sPXRoaXMudj0hMTt0aGlzLm89MDt0aGlzLm09bnVsbDt0aGlzLkk9cGQ7dGhpcy5EPXRoaXMuRj0hMTt9eChYLEcpO3ZhciBwZD1cIlwiLHFkPS9eaHR0cHM/JC9pLHJkPVtcIlBPU1RcIixcIlBVVFwiXTtnPVgucHJvdG90eXBlO1xuZy5jYT1mdW5jdGlvbihhLGIsYyxkKXtpZih0aGlzLmEpdGhyb3cgRXJyb3IoXCJbZ29vZy5uZXQuWGhySW9dIE9iamVjdCBpcyBhY3RpdmUgd2l0aCBhbm90aGVyIHJlcXVlc3Q9XCIrdGhpcy5BK1wiOyBuZXdVcmk9XCIrYSk7Yj1iP2IudG9VcHBlckNhc2UoKTpcIkdFVFwiO3RoaXMuQT1hO3RoaXMuZj1cIlwiO3RoaXMuaD0wO3RoaXMudj0hMTt0aGlzLmI9ITA7dGhpcy5hPW5ldyBYTUxIdHRwUmVxdWVzdDt0aGlzLnM9dGhpcy5IP1NiKHRoaXMuSCk6U2IoV2IpO3RoaXMuYS5vbnJlYWR5c3RhdGVjaGFuZ2U9dSh0aGlzLkVhLHRoaXMpO3RyeXt0aGlzLnc9ITAsdGhpcy5hLm9wZW4oYixTdHJpbmcoYSksITApLHRoaXMudz0hMTt9Y2F0Y2goZil7c2QodGhpcyxmKTtyZXR1cm59YT1jfHxcIlwiO3ZhciBlPW5ldyBRKHRoaXMuaGVhZGVycyk7ZCYmb2MoZCxmdW5jdGlvbihmLGgpe2Uuc2V0KGgsZik7fSk7ZD1tYShlLksoKSk7Yz1rLkZvcm1EYXRhJiZhIGluc3RhbmNlb2Ygay5Gb3JtRGF0YTshKDA8PVxuamEocmQsYikpfHxkfHxjfHxlLnNldChcIkNvbnRlbnQtVHlwZVwiLFwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkO2NoYXJzZXQ9dXRmLThcIik7ZS5mb3JFYWNoKGZ1bmN0aW9uKGYsaCl7dGhpcy5hLnNldFJlcXVlc3RIZWFkZXIoaCxmKTt9LHRoaXMpO3RoaXMuSSYmKHRoaXMuYS5yZXNwb25zZVR5cGU9dGhpcy5JKTtcIndpdGhDcmVkZW50aWFsc1wiaW4gdGhpcy5hJiZ0aGlzLmEud2l0aENyZWRlbnRpYWxzIT09dGhpcy5GJiYodGhpcy5hLndpdGhDcmVkZW50aWFscz10aGlzLkYpO3RyeXt0ZCh0aGlzKSwwPHRoaXMubyYmKCh0aGlzLkQ9dWQodGhpcy5hKSk/KHRoaXMuYS50aW1lb3V0PXRoaXMubyx0aGlzLmEub250aW1lb3V0PXUodGhpcy5CYSx0aGlzKSk6dGhpcy5tPUViKHRoaXMuQmEsdGhpcy5vLHRoaXMpKSx0aGlzLmw9ITAsdGhpcy5hLnNlbmQoYSksdGhpcy5sPSExO31jYXRjaChmKXtzZCh0aGlzLGYpO319O1xuZnVuY3Rpb24gdWQoYSl7cmV0dXJuIEImJk1hKDkpJiZhYShhLnRpbWVvdXQpJiZ2b2lkIDAhPT1hLm9udGltZW91dH1mdW5jdGlvbiBuYShhKXtyZXR1cm4gXCJjb250ZW50LXR5cGVcIj09YS50b0xvd2VyQ2FzZSgpfWcuQmE9ZnVuY3Rpb24oKXtcInVuZGVmaW5lZFwiIT10eXBlb2YgZ29vZyYmdGhpcy5hJiYodGhpcy5mPVwiVGltZWQgb3V0IGFmdGVyIFwiK3RoaXMubytcIm1zLCBhYm9ydGluZ1wiLHRoaXMuaD04LHRoaXMuZGlzcGF0Y2hFdmVudChcInRpbWVvdXRcIiksdGhpcy5hYm9ydCg4KSk7fTtmdW5jdGlvbiBzZChhLGIpe2EuYj0hMTthLmEmJihhLmc9ITAsYS5hLmFib3J0KCksYS5nPSExKTthLmY9YjthLmg9NTt2ZChhKTt3ZChhKTt9ZnVuY3Rpb24gdmQoYSl7YS52fHwoYS52PSEwLGEuZGlzcGF0Y2hFdmVudChcImNvbXBsZXRlXCIpLGEuZGlzcGF0Y2hFdmVudChcImVycm9yXCIpKTt9XG5nLmFib3J0PWZ1bmN0aW9uKGEpe3RoaXMuYSYmdGhpcy5iJiYodGhpcy5iPSExLHRoaXMuZz0hMCx0aGlzLmEuYWJvcnQoKSx0aGlzLmc9ITEsdGhpcy5oPWF8fDcsdGhpcy5kaXNwYXRjaEV2ZW50KFwiY29tcGxldGVcIiksdGhpcy5kaXNwYXRjaEV2ZW50KFwiYWJvcnRcIiksd2QodGhpcykpO307Zy5HPWZ1bmN0aW9uKCl7dGhpcy5hJiYodGhpcy5iJiYodGhpcy5iPSExLHRoaXMuZz0hMCx0aGlzLmEuYWJvcnQoKSx0aGlzLmc9ITEpLHdkKHRoaXMsITApKTtYLk4uRy5jYWxsKHRoaXMpO307Zy5FYT1mdW5jdGlvbigpe3RoaXMuanx8KHRoaXMud3x8dGhpcy5sfHx0aGlzLmc/eGQodGhpcyk6dGhpcy5aYSgpKTt9O2cuWmE9ZnVuY3Rpb24oKXt4ZCh0aGlzKTt9O1xuZnVuY3Rpb24geGQoYSl7aWYoYS5iJiZcInVuZGVmaW5lZFwiIT10eXBlb2YgZ29vZyYmKCFhLnNbMV18fDQhPU8oYSl8fDIhPWEuVCgpKSlpZihhLmwmJjQ9PU8oYSkpRWIoYS5FYSwwLGEpO2Vsc2UgaWYoYS5kaXNwYXRjaEV2ZW50KFwicmVhZHlzdGF0ZWNoYW5nZVwiKSw0PT1PKGEpKXthLmI9ITE7dHJ5e3ZhciBiPWEuVCgpO2E6c3dpdGNoKGIpe2Nhc2UgMjAwOmNhc2UgMjAxOmNhc2UgMjAyOmNhc2UgMjA0OmNhc2UgMjA2OmNhc2UgMzA0OmNhc2UgMTIyMzp2YXIgYz0hMDticmVhayBhO2RlZmF1bHQ6Yz0hMTt9dmFyIGQ7aWYoIShkPWMpKXt2YXIgZTtpZihlPTA9PT1iKXt2YXIgZj1TdHJpbmcoYS5BKS5tYXRjaChzYylbMV18fG51bGw7aWYoIWYmJmsuc2VsZiYmay5zZWxmLmxvY2F0aW9uKXt2YXIgaD1rLnNlbGYubG9jYXRpb24ucHJvdG9jb2w7Zj1oLnN1YnN0cigwLGgubGVuZ3RoLTEpO31lPSFxZC50ZXN0KGY/Zi50b0xvd2VyQ2FzZSgpOlwiXCIpO31kPWU7fWlmKGQpYS5kaXNwYXRjaEV2ZW50KFwiY29tcGxldGVcIiksXG5hLmRpc3BhdGNoRXZlbnQoXCJzdWNjZXNzXCIpO2Vsc2V7YS5oPTY7dHJ5e3ZhciBsPTI8TyhhKT9hLmEuc3RhdHVzVGV4dDpcIlwiO31jYXRjaChFKXtsPVwiXCI7fWEuZj1sK1wiIFtcIithLlQoKStcIl1cIjt2ZChhKTt9fWZpbmFsbHl7d2QoYSk7fX19ZnVuY3Rpb24gd2QoYSxiKXtpZihhLmEpe3RkKGEpO3ZhciBjPWEuYSxkPWEuc1swXT9iYTpudWxsO2EuYT1udWxsO2Eucz1udWxsO2J8fGEuZGlzcGF0Y2hFdmVudChcInJlYWR5XCIpO3RyeXtjLm9ucmVhZHlzdGF0ZWNoYW5nZT1kO31jYXRjaChlKXt9fX1mdW5jdGlvbiB0ZChhKXthLmEmJmEuRCYmKGEuYS5vbnRpbWVvdXQ9bnVsbCk7YS5tJiYoay5jbGVhclRpbWVvdXQoYS5tKSxhLm09bnVsbCk7fWZ1bmN0aW9uIE8oYSl7cmV0dXJuIGEuYT9hLmEucmVhZHlTdGF0ZTowfWcuVD1mdW5jdGlvbigpe3RyeXtyZXR1cm4gMjxPKHRoaXMpP3RoaXMuYS5zdGF0dXM6LTF9Y2F0Y2goYSl7cmV0dXJuIC0xfX07XG5nLmFhPWZ1bmN0aW9uKCl7dHJ5e3JldHVybiB0aGlzLmE/dGhpcy5hLnJlc3BvbnNlVGV4dDpcIlwifWNhdGNoKGEpe3JldHVybiBcIlwifX07Zy5VYT1mdW5jdGlvbihhKXtpZih0aGlzLmEpe3ZhciBiPXRoaXMuYS5yZXNwb25zZVRleHQ7YSYmMD09Yi5pbmRleE9mKGEpJiYoYj1iLnN1YnN0cmluZyhhLmxlbmd0aCkpO3JldHVybiBvZChiKX19O2Z1bmN0aW9uIGhjKGEsYil7cmV0dXJuIGEuYT9hLmEuZ2V0UmVzcG9uc2VIZWFkZXIoYik6bnVsbH1nLnlhPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaH07Zy5YYT1mdW5jdGlvbigpe3JldHVybiBtKHRoaXMuZik/dGhpcy5mOlN0cmluZyh0aGlzLmYpfTtmdW5jdGlvbiB5ZChhKXt2YXIgYj1cIlwiO3ZhKGEsZnVuY3Rpb24oYyxkKXtiKz1kO2IrPVwiOlwiO2IrPWM7Yis9XCJcXHJcXG5cIjt9KTtyZXR1cm4gYn1mdW5jdGlvbiB6ZChhLGIsYyl7YTp7Zm9yKGQgaW4gYyl7dmFyIGQ9ITE7YnJlYWsgYX1kPSEwO31pZihkKXJldHVybiBhO2M9eWQoYyk7aWYobShhKSl7Yj1lbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGIpKTtjPW51bGwhPWM/XCI9XCIrZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhjKSk6XCJcIjtpZihiKz1jKXtjPWEuaW5kZXhPZihcIiNcIik7MD5jJiYoYz1hLmxlbmd0aCk7ZD1hLmluZGV4T2YoXCI/XCIpO2lmKDA+ZHx8ZD5jKXtkPWM7dmFyIGU9XCJcIjt9ZWxzZSBlPWEuc3Vic3RyaW5nKGQrMSxjKTthPVthLnN1YnN0cigwLGQpLGUsYS5zdWJzdHIoYyldO2M9YVsxXTthWzFdPWI/Yz9jK1wiJlwiK2I6YjpjO2E9YVswXSsoYVsxXT9cIj9cIithWzFdOlwiXCIpK2FbMl07fXJldHVybiBhfVQoYSxiLGMpO3JldHVybiBhfWZ1bmN0aW9uIEFkKGEpe3RoaXMuZj1bXTt0aGlzLkY9bmV3IFhjO3RoaXMuZ2E9dGhpcy5wYT10aGlzLkI9dGhpcy5oYT10aGlzLmE9dGhpcy5JPXRoaXMuaj10aGlzLlY9dGhpcy5nPXRoaXMuSj10aGlzLmk9bnVsbDt0aGlzLlFhPXRoaXMuUD0wO3RoaXMuT2E9ISFuKFwiaW50ZXJuYWxDaGFubmVsUGFyYW1zLmZhaWxGYXN0XCIsYSk7dGhpcy5pYT10aGlzLnc9dGhpcy5zPXRoaXMubD10aGlzLmg9dGhpcy5jPW51bGw7dGhpcy5vYT0hMDt0aGlzLm09dGhpcy5yYT10aGlzLk89LTE7dGhpcy5TPXRoaXMudj10aGlzLkE9MDt0aGlzLk5hPW4oXCJpbnRlcm5hbENoYW5uZWxQYXJhbXMuYmFzZVJldHJ5RGVsYXlNc1wiLGEpfHw1RTM7dGhpcy5SYT1uKFwiaW50ZXJuYWxDaGFubmVsUGFyYW1zLnJldHJ5RGVsYXlTZWVkTXNcIixhKXx8MUU0O3RoaXMuUGE9bihcImludGVybmFsQ2hhbm5lbFBhcmFtcy5mb3J3YXJkQ2hhbm5lbE1heFJldHJpZXNcIixhKXx8Mjt0aGlzLnFhPW4oXCJpbnRlcm5hbENoYW5uZWxQYXJhbXMuZm9yd2FyZENoYW5uZWxSZXF1ZXN0VGltZW91dE1zXCIsXG5hKXx8MkU0O3RoaXMuS2E9YSYmYS56Ynx8dm9pZCAwO3RoaXMuRD12b2lkIDA7dGhpcy5SPWEmJmEuc3VwcG9ydHNDcm9zc0RvbWFpblhocnx8ITE7dGhpcy5IPVwiXCI7dGhpcy5iPW5ldyBhZChhJiZhLmNvbmN1cnJlbnRSZXF1ZXN0TGltaXQpO3RoaXMuamE9bmV3IGtkO3RoaXMubz1hJiZ2b2lkIDAhPT1hLmJhY2tncm91bmRDaGFubmVsVGVzdD9hLmJhY2tncm91bmRDaGFubmVsVGVzdDohMDsodGhpcy5XPWEmJmEuZmFzdEhhbmRzaGFrZXx8ITEpJiYhdGhpcy5vJiYodGhpcy5vPSEwKTthJiZhLmZvcmNlTG9uZ1BvbGxpbmcmJih0aGlzLm9hPSExKTt0aGlzLmZhPXZvaWQgMDt9Zz1BZC5wcm90b3R5cGU7Zy53YT04O2cudT0xO1xuZnVuY3Rpb24gQmQoYSl7Q2QoYSk7aWYoMz09YS51KXt2YXIgYj1hLlArKyxjPU4oYS5CKTtUKGMsXCJTSURcIixhLkgpO1QoYyxcIlJJRFwiLGIpO1QoYyxcIlRZUEVcIixcInRlcm1pbmF0ZVwiKTtEZChhLGMpO2I9bmV3IE0oYSxiLHZvaWQgMCk7Yi5GPTI7Yi5mPWJjKE4oYykpO2M9ITE7ay5uYXZpZ2F0b3ImJmsubmF2aWdhdG9yLnNlbmRCZWFjb24mJihjPWsubmF2aWdhdG9yLnNlbmRCZWFjb24oYi5mLnRvU3RyaW5nKCksXCJcIikpOyFjJiZrLkltYWdlJiYoKG5ldyBJbWFnZSkuc3JjPWIuZixjPSEwKTtjfHwoYi5hPWIuZy4kKG51bGwpLGIuYS5jYShiLmYpKTtiLnY9dygpO2VjKGIpO31FZChhKTt9XG5mdW5jdGlvbiBDZChhKXthLncmJihhLncuYWJvcnQoKSxhLnc9bnVsbCk7YS5hJiYoYS5hLmNhbmNlbCgpLGEuYT1udWxsKTthLmwmJihrLmNsZWFyVGltZW91dChhLmwpLGEubD1udWxsKTtGZChhKTthLmIuY2FuY2VsKCk7YS5oJiYoYWEoYS5oKSYmay5jbGVhclRpbWVvdXQoYS5oKSxhLmg9bnVsbCk7fWZ1bmN0aW9uIEdkKGEsYil7YS5mLnB1c2gobmV3ICRjKGEuUWErKyxiKSk7Mz09YS51JiZIZChhKTt9Zy5DYT1mdW5jdGlvbigpe3JldHVybiAwPT10aGlzLnV9O2Z1bmN0aW9uIEhkKGEpe2VkKGEuYil8fGEuaHx8KGEuaD0hMCx3YihhLkhhLGEpLGEuQT0wKTt9XG5mdW5jdGlvbiBJZChhLGIpe2lmKGZkKGEuYik+PWEuYi5mLShhLmg/MTowKSlyZXR1cm4gITE7aWYoYS5oKXJldHVybiBhLmY9Yi5qLmNvbmNhdChhLmYpLCEwO2lmKDE9PWEudXx8Mj09YS51fHxhLkE+PShhLk9hPzA6YS5QYSkpcmV0dXJuICExO2EuaD1PYih1KGEuSGEsYSxiKSxKZChhLGEuQSkpO2EuQSsrO3JldHVybiAhMH1cbmcuSGE9ZnVuY3Rpb24oYSl7aWYodGhpcy5oKWlmKHRoaXMuaD1udWxsLDE9PXRoaXMudSl7aWYoIWEpe3RoaXMuUD1NYXRoLmZsb29yKDFFNSpNYXRoLnJhbmRvbSgpKTthPXRoaXMuUCsrO3ZhciBiPW5ldyBNKHRoaXMsYSx2b2lkIDApLGM9dGhpcy5pO3RoaXMuSiYmKGM/KGM9d2EoYykseWEoYyx0aGlzLkopKTpjPXRoaXMuSik7bnVsbD09PXRoaXMuZyYmKGIuaD1jKTt2YXIgZDtpZih0aGlzLlcpYTp7Zm9yKHZhciBlPWQ9MDtlPHRoaXMuZi5sZW5ndGg7ZSsrKXtiOnt2YXIgZj10aGlzLmZbZV07aWYoXCJfX2RhdGFfX1wiaW4gZi5hJiYoZj1mLmEuX19kYXRhX18sbShmKSkpe2Y9Zi5sZW5ndGg7YnJlYWsgYn1mPXZvaWQgMDt9aWYodm9pZCAwPT09ZilicmVhaztkKz1mO2lmKDQwOTY8ZCl7ZD1lO2JyZWFrIGF9aWYoNDA5Nj09PWR8fGU9PT10aGlzLmYubGVuZ3RoLTEpe2Q9ZSsxO2JyZWFrIGF9fWQ9MUUzO31lbHNlIGQ9MUUzO2Q9S2QodGhpcyxiLGQpO2U9Tih0aGlzLkIpO1QoZSxcblwiUklEXCIsYSk7VChlLFwiQ1ZFUlwiLDIyKTt0aGlzLm8mJnRoaXMuaiYmVChlLFwiWC1IVFRQLVNlc3Npb24tSWRcIix0aGlzLmopO0RkKHRoaXMsZSk7dGhpcy5nJiZjJiZ6ZChlLHRoaXMuZyxjKTtkZCh0aGlzLmIsYik7dGhpcy5XPyhUKGUsXCIkcmVxXCIsZCksVChlLFwiU0lEXCIsXCJudWxsXCIpLGIuUz0hMCxhYyhiLGUsbnVsbCkpOmFjKGIsZSxkKTt0aGlzLnU9Mjt9fWVsc2UgMz09dGhpcy51JiYoYT9MZCh0aGlzLGEpOjA9PXRoaXMuZi5sZW5ndGh8fGVkKHRoaXMuYil8fExkKHRoaXMpKTt9O1xuZnVuY3Rpb24gTGQoYSxiKXt2YXIgYztiP2M9Yi5XOmM9YS5QKys7dmFyIGQ9TihhLkIpO1QoZCxcIlNJRFwiLGEuSCk7VChkLFwiUklEXCIsYyk7VChkLFwiQUlEXCIsYS5PKTtEZChhLGQpO2EuZyYmYS5pJiZ6ZChkLGEuZyxhLmkpO2M9bmV3IE0oYSxjLGEuQSsxKTtudWxsPT09YS5nJiYoYy5oPWEuaSk7YiYmKGEuZj1iLmouY29uY2F0KGEuZikpO2I9S2QoYSxjLDFFMyk7Yy5zZXRUaW1lb3V0KE1hdGgucm91bmQoLjUqYS5xYSkrTWF0aC5yb3VuZCguNSphLnFhKk1hdGgucmFuZG9tKCkpKTtkZChhLmIsYyk7YWMoYyxkLGIpO31mdW5jdGlvbiBEZChhLGIpe2EuYyYmb2Moe30sZnVuY3Rpb24oYyxkKXtUKGIsZCxjKTt9KTt9XG5mdW5jdGlvbiBLZChhLGIsYyl7Yz1NYXRoLm1pbihhLmYubGVuZ3RoLGMpO3ZhciBkPWEuYz91KGEuYy5TYSxhLmMsYSk6bnVsbDthOmZvcih2YXIgZT1hLmYsZj0tMTs7KXt2YXIgaD1bXCJjb3VudD1cIitjXTstMT09Zj8wPGM/KGY9ZVswXS5iLGgucHVzaChcIm9mcz1cIitmKSk6Zj0wOmgucHVzaChcIm9mcz1cIitmKTtmb3IodmFyIGw9ITAsRT0wO0U8YztFKyspe3ZhciBCYj1lW0VdLmIsVGM9ZVtFXS5hO0JiLT1mO2lmKDA+QmIpZj1NYXRoLm1heCgwLGVbRV0uYi0xMDApLGw9ITE7ZWxzZSB0cnl7bGQoVGMsaCxcInJlcVwiK0JiK1wiX1wiKTt9Y2F0Y2goVWQpe2QmJmQoVGMpO319aWYobCl7ZD1oLmpvaW4oXCImXCIpO2JyZWFrIGF9fWE9YS5mLnNwbGljZSgwLGMpO2Iuaj1hO3JldHVybiBkfWZ1bmN0aW9uIE1kKGEpe2EuYXx8YS5sfHwoYS5TPTEsd2IoYS5HYSxhKSxhLnY9MCk7fVxuZnVuY3Rpb24gTmQoYSl7aWYoYS5hfHxhLmx8fDM8PWEudilyZXR1cm4gITE7YS5TKys7YS5sPU9iKHUoYS5HYSxhKSxKZChhLGEudikpO2EudisrO3JldHVybiAhMH1nLkdhPWZ1bmN0aW9uKCl7dGhpcy5sPW51bGw7dGhpcy5hPW5ldyBNKHRoaXMsXCJycGNcIix0aGlzLlMpO251bGw9PT10aGlzLmcmJih0aGlzLmEuaD10aGlzLmkpO3RoaXMuYS5KPTA7dmFyIGE9Tih0aGlzLnBhKTtUKGEsXCJSSURcIixcInJwY1wiKTtUKGEsXCJTSURcIix0aGlzLkgpO1QoYSxcIkNJXCIsdGhpcy5pYT9cIjBcIjpcIjFcIik7VChhLFwiQUlEXCIsdGhpcy5PKTtEZCh0aGlzLGEpO1QoYSxcIlRZUEVcIixcInhtbGh0dHBcIik7dGhpcy5nJiZ0aGlzLmkmJnpkKGEsdGhpcy5nLHRoaXMuaSk7dGhpcy5EJiZ0aGlzLmEuc2V0VGltZW91dCh0aGlzLkQpO2RjKHRoaXMuYSxhLCEwLHRoaXMuZ2EpO307XG5mdW5jdGlvbiBWYyhhLGIsYyl7dmFyIGQ9Yi5sO2QmJmNkKGEuYixkKTthLmlhPWEub2EmJmM7YS5tPWIuYzthLkI9V2MoYSxudWxsLGEuaGEpO0hkKGEpO31cbmcuRmE9ZnVuY3Rpb24oYSxiKXtpZigwIT10aGlzLnUmJih0aGlzLmE9PWF8fGdkKHRoaXMuYixhKSkpaWYodGhpcy5tPWEubywhYS5zJiZnZCh0aGlzLmIsYSkmJjM9PXRoaXMudSl7dHJ5e3ZhciBjPXRoaXMuamEuYS5wYXJzZShiKTt9Y2F0Y2goZil7Yz1udWxsO31pZihxKGMpJiYzPT1jLmxlbmd0aCl7Yj1jO2lmKDA9PWJbMF0pYTp7aWYoIXRoaXMubCl7aWYodGhpcy5hKWlmKHRoaXMuYS52KzNFMzxhLnYpRmQodGhpcyksdGhpcy5hLmNhbmNlbCgpLHRoaXMuYT1udWxsO2Vsc2UgYnJlYWsgYTtOZCh0aGlzKTtLKDE4KTt9fWVsc2UgdGhpcy5yYT1iWzFdLDA8dGhpcy5yYS10aGlzLk8mJjM3NTAwPmJbMl0mJnRoaXMuaWEmJjA9PXRoaXMudiYmIXRoaXMucyYmKHRoaXMucz1PYih1KHRoaXMuWWEsdGhpcyksNkUzKSk7aWYoMT49ZmQodGhpcy5iKSYmdGhpcy5mYSl7dHJ5e3RoaXMuZmEoKTt9Y2F0Y2goZil7fXRoaXMuZmE9dm9pZCAwO319ZWxzZSBXKHRoaXMsMTEpO31lbHNlIGlmKChhLnN8fFxudGhpcy5hPT1hKSYmRmQodGhpcyksIXFhKGIpKWZvcihiPWM9dGhpcy5qYS5hLnBhcnNlKGIpLGM9MDtjPGIubGVuZ3RoO2MrKyl7dmFyIGQ9YltjXTt0aGlzLk89ZFswXTtkPWRbMV07aWYoMj09dGhpcy51KWlmKFwiY1wiPT1kWzBdKXt0aGlzLkg9ZFsxXTt0aGlzLmdhPWRbMl07dmFyIGU9ZFszXTtudWxsIT1lJiYodGhpcy53YT1lKTtkPWRbNV07bnVsbCE9ZCYmYWEoZCkmJjA8ZCYmKHRoaXMuRD0xLjUqZCk7dGhpcy5vJiYoZD1hLmEpJiYoKGU9aGMoZCxcIlgtQ2xpZW50LVdpcmUtUHJvdG9jb2xcIikpJiZjZCh0aGlzLmIsZSksdGhpcy5qJiYoZD1oYyhkLFwiWC1IVFRQLVNlc3Npb24tSWRcIikpKSYmKHRoaXMuST1kLFQodGhpcy5CLHRoaXMuaixkKSk7dGhpcy51PTM7dGhpcy5jJiZ0aGlzLmMudmEoKTtkPWE7dGhpcy5wYT1XYyh0aGlzLHRoaXMuWSgpP3RoaXMuZ2E6bnVsbCx0aGlzLmhhKTtkLnM/KGhkKHRoaXMuYixkKSwoZT10aGlzLkQpJiZkLnNldFRpbWVvdXQoZSksZC5pJiYoZ2MoZCksXG5lYyhkKSksdGhpcy5hPWQpOk1kKHRoaXMpOzA8dGhpcy5mLmxlbmd0aCYmSGQodGhpcyk7fWVsc2VcInN0b3BcIiE9ZFswXSYmXCJjbG9zZVwiIT1kWzBdfHxXKHRoaXMsNyk7ZWxzZSAzPT10aGlzLnUmJihcInN0b3BcIj09ZFswXXx8XCJjbG9zZVwiPT1kWzBdP1wic3RvcFwiPT1kWzBdP1codGhpcyw3KTpCZCh0aGlzKTpcIm5vb3BcIiE9ZFswXSYmdGhpcy5jJiZ0aGlzLmMudWEoZCksdGhpcy52PTApO319O2cuWWE9ZnVuY3Rpb24oKXtudWxsIT10aGlzLnMmJih0aGlzLnM9bnVsbCx0aGlzLmEuY2FuY2VsKCksdGhpcy5hPW51bGwsTmQodGhpcyksSygxOSkpO307ZnVuY3Rpb24gRmQoYSl7bnVsbCE9YS5zJiYoay5jbGVhclRpbWVvdXQoYS5zKSxhLnM9bnVsbCk7fVxuZy5uYT1mdW5jdGlvbihhKXt2YXIgYj1udWxsO2lmKHRoaXMuYT09YSl7RmQodGhpcyk7dGhpcy5hPW51bGw7dmFyIGM9Mjt9ZWxzZSBpZihnZCh0aGlzLmIsYSkpYj1hLmosaGQodGhpcy5iLGEpLGM9MTtlbHNlIHJldHVybjt0aGlzLm09YS5vO2lmKDAhPXRoaXMudSlpZihhLmIpMT09Yz8oYj13KCktYS52LEkuZGlzcGF0Y2hFdmVudChuZXcgTmIoSSxhLmw/YS5sLmxlbmd0aDowLGIsdGhpcy5BKSksSGQodGhpcykpOk1kKHRoaXMpO2Vsc2V7dmFyIGQ9YS5jO2lmKDM9PWR8fDA9PWQmJjA8dGhpcy5tfHwhKDE9PWMmJklkKHRoaXMsYSl8fDI9PWMmJk5kKHRoaXMpKSlzd2l0Y2goYiYmMDxiLmxlbmd0aCYmKGE9dGhpcy5iLGEuYz1hLmMuY29uY2F0KGIpKSxkKXtjYXNlIDE6Vyh0aGlzLDUpO2JyZWFrO2Nhc2UgNDpXKHRoaXMsMTApO2JyZWFrO2Nhc2UgMzpXKHRoaXMsNik7YnJlYWs7ZGVmYXVsdDpXKHRoaXMsMik7fX19O1xuZnVuY3Rpb24gSmQoYSxiKXt2YXIgYz1hLk5hK01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSphLlJhKTthLm1hKCl8fChjKj0yKTtyZXR1cm4gYypifWZ1bmN0aW9uIFcoYSxiKXtpZigyPT1iKXt2YXIgYz1udWxsO2EuYyYmKGM9bnVsbCk7dmFyIGQ9dShhLmViLGEpO2N8fChjPW5ldyBTKFwiLy93d3cuZ29vZ2xlLmNvbS9pbWFnZXMvY2xlYXJkb3QuZ2lmXCIpLGsubG9jYXRpb24mJlwiaHR0cFwiPT1rLmxvY2F0aW9uLnByb3RvY29sfHx1YyhjLFwiaHR0cHNcIiksYmMoYykpO21kKGMudG9TdHJpbmcoKSxkKTt9ZWxzZSBLKDIpO2EudT0wO2EuYyYmYS5jLnRhKGIpO0VkKGEpO0NkKGEpO31nLmViPWZ1bmN0aW9uKGEpe2E/SygyKTpLKDEpO307ZnVuY3Rpb24gRWQoYSl7YS51PTA7YS5tPS0xO2lmKGEuYyl7aWYoMCE9aWQoYS5iKS5sZW5ndGh8fDAhPWEuZi5sZW5ndGgpYS5iLmMubGVuZ3RoPTAscGEoYS5mKSxhLmYubGVuZ3RoPTA7YS5jLnNhKCk7fX1cbmZ1bmN0aW9uIFdjKGEsYixjKXt2YXIgZD1KYyhjKTtpZihcIlwiIT1kLmIpYiYmdmMoZCxiK1wiLlwiK2QuYiksd2MoZCxkLmkpO2Vsc2V7dmFyIGU9ay5sb2NhdGlvbixmO2I/Zj1iK1wiLlwiK2UuaG9zdG5hbWU6Zj1lLmhvc3RuYW1lO2Q9S2MoZS5wcm90b2NvbCxmLCtlLnBvcnQsYyk7fWEuViYmdmEoYS5WLGZ1bmN0aW9uKGgsbCl7VChkLGwsaCk7fSk7Yj1hLmo7Yz1hLkk7YiYmYyYmVChkLGIsYyk7VChkLFwiVkVSXCIsYS53YSk7RGQoYSxkKTtyZXR1cm4gZH1nLiQ9ZnVuY3Rpb24oYSl7aWYoYSYmIXRoaXMuUil0aHJvdyBFcnJvcihcIkNhbid0IGNyZWF0ZSBzZWNvbmRhcnkgZG9tYWluIGNhcGFibGUgWGhySW8gb2JqZWN0LlwiKTthPW5ldyBYKHRoaXMuS2EpO2EuRj10aGlzLlI7cmV0dXJuIGF9O2cubWE9ZnVuY3Rpb24oKXtyZXR1cm4gISF0aGlzLmMmJiEwfTtnLlk9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5SfTtmdW5jdGlvbiBPZCgpe31nPU9kLnByb3RvdHlwZTtnLnZhPWZ1bmN0aW9uKCl7fTtcbmcudWE9ZnVuY3Rpb24oKXt9O2cudGE9ZnVuY3Rpb24oKXt9O2cuc2E9ZnVuY3Rpb24oKXt9O2cuU2E9ZnVuY3Rpb24oKXt9O2Z1bmN0aW9uIFBkKGEpe2Zvcih2YXIgYj1hcmd1bWVudHNbMF0sYz0xO2M8YXJndW1lbnRzLmxlbmd0aDtjKyspe3ZhciBkPWFyZ3VtZW50c1tjXTtpZigwPT1kLmxhc3RJbmRleE9mKFwiL1wiLDApKWI9ZDtlbHNle3ZhciBlOyhlPVwiXCI9PWIpfHwoZT1iLmxlbmd0aC0xLGU9MDw9ZSYmYi5pbmRleE9mKFwiL1wiLGUpPT1lKTtlP2IrPWQ6Yis9XCIvXCIrZDt9fXJldHVybiBifWZ1bmN0aW9uIFFkKCl7aWYoQiYmISgxMDw9TnVtYmVyKE5hKSkpdGhyb3cgRXJyb3IoXCJFbnZpcm9ubWVudGFsIGVycm9yOiBubyBhdmFpbGFibGUgdHJhbnNwb3J0LlwiKTt9UWQucHJvdG90eXBlLmE9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbmV3IFkoYSxiKX07XG5mdW5jdGlvbiBZKGEsYil7Ry5jYWxsKHRoaXMpO3RoaXMuYT1uZXcgQWQoYik7dGhpcy5nPWE7dGhpcy5tPWImJmIudGVzdFVybD9iLnRlc3RVcmw6UGQodGhpcy5nLFwidGVzdFwiKTt0aGlzLmI9YiYmYi5tZXNzYWdlVXJsUGFyYW1zfHxudWxsO2E9YiYmYi5tZXNzYWdlSGVhZGVyc3x8bnVsbDtiJiZiLmNsaWVudFByb3RvY29sSGVhZGVyUmVxdWlyZWQmJihhP2FbXCJYLUNsaWVudC1Qcm90b2NvbFwiXT1cIndlYmNoYW5uZWxcIjphPXtcIlgtQ2xpZW50LVByb3RvY29sXCI6XCJ3ZWJjaGFubmVsXCJ9KTt0aGlzLmEuaT1hO2E9YiYmYi5pbml0TWVzc2FnZUhlYWRlcnN8fG51bGw7YiYmYi5tZXNzYWdlQ29udGVudFR5cGUmJihhP2FbXCJYLVdlYkNoYW5uZWwtQ29udGVudC1UeXBlXCJdPWIubWVzc2FnZUNvbnRlbnRUeXBlOmE9e1wiWC1XZWJDaGFubmVsLUNvbnRlbnQtVHlwZVwiOmIubWVzc2FnZUNvbnRlbnRUeXBlfSk7YiYmYi54YSYmKGE/YVtcIlgtV2ViQ2hhbm5lbC1DbGllbnQtUHJvZmlsZVwiXT1iLnhhOlxuYT17XCJYLVdlYkNoYW5uZWwtQ2xpZW50LVByb2ZpbGVcIjpiLnhhfSk7dGhpcy5hLko9YTsoYT1iJiZiLmh0dHBIZWFkZXJzT3ZlcndyaXRlUGFyYW0pJiYhcWEoYSkmJih0aGlzLmEuZz1hKTt0aGlzLmw9YiYmYi5zdXBwb3J0c0Nyb3NzRG9tYWluWGhyfHwhMTt0aGlzLmg9YiYmYi5zZW5kUmF3SnNvbnx8ITE7KGI9YiYmYi5odHRwU2Vzc2lvbklkUGFyYW0pJiYhcWEoYikmJih0aGlzLmEuaj1iLGE9dGhpcy5iLG51bGwhPT1hJiZiIGluIGEmJihhPXRoaXMuYixiIGluIGEmJmRlbGV0ZSBhW2JdKSk7dGhpcy5mPW5ldyBaKHRoaXMpO314KFksRyk7Zz1ZLnByb3RvdHlwZTtnLmFkZEV2ZW50TGlzdGVuZXI9ZnVuY3Rpb24oYSxiLGMsZCl7WS5OLmFkZEV2ZW50TGlzdGVuZXIuY2FsbCh0aGlzLGEsYixjLGQpO307Zy5yZW1vdmVFdmVudExpc3RlbmVyPWZ1bmN0aW9uKGEsYixjLGQpe1kuTi5yZW1vdmVFdmVudExpc3RlbmVyLmNhbGwodGhpcyxhLGIsYyxkKTt9O1xuZy5WYT1mdW5jdGlvbigpe3RoaXMuYS5jPXRoaXMuZjt0aGlzLmwmJih0aGlzLmEuUj0hMCk7dmFyIGE9dGhpcy5hLGI9dGhpcy5tLGM9dGhpcy5nLGQ9dGhpcy5ifHx2b2lkIDA7SygwKTthLmhhPWM7YS5WPWR8fHt9O2EubyYmKGEuRi5iPVtdLGEuRi5hPSExKTthLnc9bmV3IFNjKGEpO251bGw9PT1hLmcmJihhLncuaD1hLmkpO2M9YjthLmcmJmEuaSYmKGM9emQoYixhLmcsYS5pKSk7YT1hLnc7YS5pPWM7Yj1XYyhhLmEsbnVsbCxhLmkpO0soMyk7Yz1hLmEuRi5iO251bGwhPWM/KGEuZj1jWzBdLGEuTT0xLFVjKGEpKTooZmMoYixcIk1PREVcIixcImluaXRcIiksIWEuYS5vJiZhLmEuaiYmZmMoYixcIlgtSFRUUC1TZXNzaW9uLUlkXCIsYS5hLmopLGEuYj1uZXcgTShhLHZvaWQgMCx2b2lkIDApLGEuYi5oPWEuaCxkYyhhLmIsYiwhMSxudWxsKSxhLk09MCk7fTtnLmNsb3NlPWZ1bmN0aW9uKCl7QmQodGhpcy5hKTt9O1xuZy5XYT1mdW5jdGlvbihhKXtpZihtKGEpKXt2YXIgYj17fTtiLl9fZGF0YV9fPWE7R2QodGhpcy5hLGIpO31lbHNlIHRoaXMuaD8oYj17fSxiLl9fZGF0YV9fPW9iKGEpLEdkKHRoaXMuYSxiKSk6R2QodGhpcy5hLGEpO307Zy5HPWZ1bmN0aW9uKCl7dGhpcy5hLmM9bnVsbDtkZWxldGUgdGhpcy5mO0JkKHRoaXMuYSk7ZGVsZXRlIHRoaXMuYTtZLk4uRy5jYWxsKHRoaXMpO307ZnVuY3Rpb24gUmQoYSl7VWIuY2FsbCh0aGlzKTt2YXIgYj1hLl9fc21fXztpZihiKXthOntmb3IodmFyIGMgaW4gYil7YT1jO2JyZWFrIGF9YT12b2lkIDA7fSh0aGlzLmM9YSk/KGE9dGhpcy5jLHRoaXMuZGF0YT1udWxsIT09YiYmYSBpbiBiP2JbYV06dm9pZCAwKTp0aGlzLmRhdGE9Yjt9ZWxzZSB0aGlzLmRhdGE9YTt9eChSZCxVYik7ZnVuY3Rpb24gU2QoKXtWYi5jYWxsKHRoaXMpO3RoaXMuc3RhdHVzPTE7fXgoU2QsVmIpO2Z1bmN0aW9uIFooYSl7dGhpcy5hPWE7fXgoWixPZCk7Wi5wcm90b3R5cGUudmE9ZnVuY3Rpb24oKXt0aGlzLmEuZGlzcGF0Y2hFdmVudChcImFcIik7fTtcbloucHJvdG90eXBlLnVhPWZ1bmN0aW9uKGEpe3RoaXMuYS5kaXNwYXRjaEV2ZW50KG5ldyBSZChhKSk7fTtaLnByb3RvdHlwZS50YT1mdW5jdGlvbihhKXt0aGlzLmEuZGlzcGF0Y2hFdmVudChuZXcgU2QoYSkpO307Wi5wcm90b3R5cGUuc2E9ZnVuY3Rpb24oKXt0aGlzLmEuZGlzcGF0Y2hFdmVudChcImJcIik7fTt2YXIgVGQ9dihmdW5jdGlvbihhLGIpe2Z1bmN0aW9uIGMoKXt9Yy5wcm90b3R5cGU9YS5wcm90b3R5cGU7dmFyIGQ9bmV3IGM7YS5hcHBseShkLEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKSk7cmV0dXJuIGR9LFFkKTsvKlxuXG4gQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cblxuIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4geW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuXG4gICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcblxuIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuKi9cblFkLnByb3RvdHlwZS5jcmVhdGVXZWJDaGFubmVsPVFkLnByb3RvdHlwZS5hO1kucHJvdG90eXBlLnNlbmQ9WS5wcm90b3R5cGUuV2E7WS5wcm90b3R5cGUub3Blbj1ZLnByb3RvdHlwZS5WYTtZLnByb3RvdHlwZS5jbG9zZT1ZLnByb3RvdHlwZS5jbG9zZTtQYi5OT19FUlJPUj0wO1BiLlRJTUVPVVQ9ODtQYi5IVFRQX0VSUk9SPTY7UWIuQ09NUExFVEU9XCJjb21wbGV0ZVwiO1RiLkV2ZW50VHlwZT1MO0wuT1BFTj1cImFcIjtMLkNMT1NFPVwiYlwiO0wuRVJST1I9XCJjXCI7TC5NRVNTQUdFPVwiZFwiO0cucHJvdG90eXBlLmxpc3Rlbj1HLnByb3RvdHlwZS56YTtYLnByb3RvdHlwZS5saXN0ZW5PbmNlPVgucHJvdG90eXBlLkFhO1gucHJvdG90eXBlLmdldExhc3RFcnJvcj1YLnByb3RvdHlwZS5YYTtYLnByb3RvdHlwZS5nZXRMYXN0RXJyb3JDb2RlPVgucHJvdG90eXBlLnlhO1gucHJvdG90eXBlLmdldFN0YXR1cz1YLnByb3RvdHlwZS5UO1gucHJvdG90eXBlLmdldFJlc3BvbnNlSnNvbj1YLnByb3RvdHlwZS5VYTtcblgucHJvdG90eXBlLmdldFJlc3BvbnNlVGV4dD1YLnByb3RvdHlwZS5hYTtYLnByb3RvdHlwZS5zZW5kPVgucHJvdG90eXBlLmNhO3ZhciB0bXA9e2NyZWF0ZVdlYkNoYW5uZWxUcmFuc3BvcnQ6VGQsRXJyb3JDb2RlOlBiLEV2ZW50VHlwZTpRYixXZWJDaGFubmVsOlRiLFhocklvOlh9O1xudmFyIHRtcF8xID0gdG1wLmNyZWF0ZVdlYkNoYW5uZWxUcmFuc3BvcnQ7XG52YXIgdG1wXzIgPSB0bXAuRXJyb3JDb2RlO1xudmFyIHRtcF8zID0gdG1wLkV2ZW50VHlwZTtcbnZhciB0bXBfNCA9IHRtcC5XZWJDaGFubmVsO1xudmFyIHRtcF81ID0gdG1wLlhocklvO1xuXG5leHBvcnQgZGVmYXVsdCB0bXA7XG5leHBvcnQgeyB0bXBfMiBhcyBFcnJvckNvZGUsIHRtcF8zIGFzIEV2ZW50VHlwZSwgdG1wXzQgYXMgV2ViQ2hhbm5lbCwgdG1wXzUgYXMgWGhySW8sIHRtcF8xIGFzIGNyZWF0ZVdlYkNoYW5uZWxUcmFuc3BvcnQgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmVzbS5qcy5tYXBcbiIsImV4cG9ydCBpbnRlcmZhY2UgUG9pbnQyZCB7XHJcbiAgeDogbnVtYmVyO1xyXG4gIHk6IG51bWJlcjtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIExpbmUge1xyXG4gIDA6IFBvaW50MmQ7XHJcbiAgMTogUG9pbnQyZDtcclxuXHJcbiAgY29uc3RydWN0b3IocG9pbnQxOiBQb2ludDJkLCBwb2ludDI6IFBvaW50MmQpIHtcclxuICAgIHRoaXNbMF0gPSBwb2ludDE7XHJcbiAgICB0aGlzWzFdID0gcG9pbnQyO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGVudW0gT3J0aG9MaW5lTGluZVJlbGF0aW9uc2hpcFR5cGUge1xyXG4gIE5vdGhpbmcsXHJcbiAgSW50ZXJzZWN0LFxyXG4gIE92ZXJsYXBcclxufVxyXG5cclxuZXhwb3J0IGVudW0gUmVjdFJlY3RSZWxhdGlvbnNoaXBUeXBlIHtcclxuICBEaXNqb2ludCxcclxuICBNYXRjaCxcclxuICBJbnRlcnNlY3QsXHJcbiAgQUluc2lkZUIsXHJcbiAgQkluc2lkZUEsXHJcbiAgVGFuZ2VudCBcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIE9ydGhvTGluZUxpbmVSZWxhdGlvbnNoaXAge1xyXG4gIHR5cGU6IE9ydGhvTGluZUxpbmVSZWxhdGlvbnNoaXBUeXBlO1xyXG4gIGludGVyc2VjdGlvbjogUG9pbnQyZDtcclxuICBvdmVybGFwOiBMaW5lO1xyXG5cclxuICAvLyAob3J0aG9MaW5lTGluZVJlbGF0aW9uc2hpcFR5cGUsIHtpbnRlcnNlY3Rpb249dW5kZWZpbmVkLCBvdmVybGFwPXVuZGVmaW5lZH0gPSB7fSlcclxuICBjb25zdHJ1Y3RvcihvcnRob0xpbmVMaW5lUmVsYXRpb25zaGlwVHlwZTogT3J0aG9MaW5lTGluZVJlbGF0aW9uc2hpcFR5cGUsIGludGVyc2VjdGlvbjogUG9pbnQyZCA9IHVuZGVmaW5lZCwgb3ZlcmxhcDogTGluZSA9IHVuZGVmaW5lZCkge1xyXG4gICAgdGhpcy50eXBlID0gb3J0aG9MaW5lTGluZVJlbGF0aW9uc2hpcFR5cGU7XHJcbiAgICB0aGlzLmludGVyc2VjdGlvbiA9IGludGVyc2VjdGlvbjtcclxuICAgIHRoaXMub3ZlcmxhcCA9IG92ZXJsYXA7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgUmVjdGFuZ2xlIHtcclxuICB4OiBudW1iZXI7XHJcbiAgeTogbnVtYmVyO1xyXG4gIHdpZHRoOiBudW1iZXI7XHJcbiAgaGVpZ2h0OiBudW1iZXI7XHJcblxyXG4gIGNvbnN0cnVjdG9yKHg6IG51bWJlciwgeTogbnVtYmVyLCB3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlcikge1xyXG4gICAgeCA9IHg7XHJcbiAgICB5ID0geTtcclxuICAgIHdpZHRoID0gd2lkdGg7XHJcbiAgICBoZWlnaHQgPSBoZWlnaHQ7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgR2VvbWV0cnlDYWxjIHtcclxuXHJcbiAgc3RhdGljIHB0c0Rpc3RhbmNlKHB0MTogUG9pbnQyZCwgcHQyOiBQb2ludDJkKSB7XHJcbiAgICByZXR1cm4gTWF0aC5zcXJ0KE1hdGgucG93KChwdDIueCAtIHB0MS54KSwgMikgKyAoTWF0aC5wb3coKHB0Mi55IC0gcHQxLnkpLCAyKSkpO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGxpbmVNaWRkbGVQdChsaW5lOiBMaW5lKSB7XHJcbiAgICByZXR1cm4geyB4OiAobGluZVswXS54ICsgbGluZVsxXS54KSAvIDIsIHk6IChsaW5lWzBdLnkgKyBsaW5lWzFdLnkpIC8gMiB9O1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGFyZUxpbmVzRXF1YWwobGluZTE6IExpbmUsIGxpbmUyOiBMaW5lKSB7XHJcbiAgICByZXR1cm4gKHRoaXMuYXJlUG9pbnRzRXF1YWwobGluZTFbMF0sIGxpbmUyWzBdKSAmJiB0aGlzLmFyZVBvaW50c0VxdWFsKGxpbmUxWzFdLCBsaW5lMlsxXSkpIHx8ICh0aGlzLmFyZVBvaW50c0VxdWFsKGxpbmUxWzBdLCBsaW5lMlsxXSkgJiYgdGhpcy5hcmVQb2ludHNFcXVhbChsaW5lMVsxXSwgbGluZTJbMF0pKTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBhcmVQb2ludHNFcXVhbChwb2ludDE6IFBvaW50MmQsIHBvaW50MjogUG9pbnQyZCkge1xyXG4gICAgcmV0dXJuIHBvaW50MS54ID09PSBwb2ludDIueCAmJiBwb2ludDEueSA9PT0gcG9pbnQyLnk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBHZXRzIHRoZSBwb2ludHMgYXJvdW5kIGEgcG9pbnQgZGVmaW5lZCBieSBhbiBvZmZzZXQgZnJvbSB0aGUgcG9pbnQuXHJcbiAgICogRm9yIGV4YW1wbGUgZm9yIHRoZSBwb2ludCAwLDAgYW5kIG9mZnNldCAxIGl0IHdpbGwgcmV0dXJuIHRoZSA4IHBvaW50cyBhcm91bmQgMCwwLlxyXG4gICAqL1xyXG4gIHN0YXRpYyBnZXRQb2ludHNBcm91bmQocG9pbnQ6IFBvaW50MmQsIG9mZnNldDogbnVtYmVyKTogUG9pbnQyZFtdIHtcclxuICAgIGNvbnN0IHBpeGVsc1BlclNpZGUgPSBvZmZzZXQgKiAyO1xyXG4gICAgbGV0IGN1cnJlbnRYID0gcG9pbnQueCArIG9mZnNldDtcclxuICAgIGxldCBjdXJyZW50WSA9IHBvaW50LnkgKyBvZmZzZXQ7XHJcbiAgICBjb25zdCBwb2ludHNBcm91bmQgPSBbXTtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGl4ZWxzUGVyU2lkZTsgaSsrKVxyXG4gICAgICBwb2ludHNBcm91bmQucHVzaCh7IHg6IGN1cnJlbnRYLCB5OiBjdXJyZW50WSAtPSAxIH0pO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwaXhlbHNQZXJTaWRlOyBpKyspXHJcbiAgICAgIHBvaW50c0Fyb3VuZC5wdXNoKHsgeDogY3VycmVudFggLT0gMSwgeTogY3VycmVudFkgfSk7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBpeGVsc1BlclNpZGU7IGkrKylcclxuICAgICAgcG9pbnRzQXJvdW5kLnB1c2goeyB4OiBjdXJyZW50WCwgeTogY3VycmVudFkgKz0gMSB9KTtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGl4ZWxzUGVyU2lkZTsgaSsrKVxyXG4gICAgICBwb2ludHNBcm91bmQucHVzaCh7IHg6IGN1cnJlbnRYICs9IDEsIHk6IGN1cnJlbnRZIH0pO1xyXG4gICAgcmV0dXJuIHBvaW50c0Fyb3VuZDtcclxuICB9XHJcblxyXG59XHJcbiIsImltcG9ydCB0eXBlIHsgV29ya3NwYWNlIH0gZnJvbSBcIi4vd29ya3NwYWNlXCI7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFBhbmVsU2VjdGlvbiB7XHJcbiAgbmFtZTogc3RyaW5nO1xyXG4gIGJ1dHRvbj86IEhUTUxFbGVtZW50O1xyXG4gIGJvZHk6IEhUTUxFbGVtZW50O1xyXG59XHJcblxyXG5lbnVtIFBhbmVsUG9zaXRpb24ge1xyXG4gIFJpZ2h0LFxyXG4gIEJvdHRvbVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgTWFpblBhbmVsIHtcclxuICBwYW5lbHNTdG9yYWdlOiBIVE1MRWxlbWVudDtcclxuICBwYW5lbENvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XHJcbiAgcGFuZWxHcmlwOiBIVE1MRWxlbWVudDtcclxuICBwYW5lbENvbnRlbnQ6IEhUTUxFbGVtZW50O1xyXG4gIHBhbmVsSGVhZGVyOiBIVE1MRWxlbWVudDtcclxuICBwYW5lbEJvZHk6IEhUTUxFbGVtZW50O1xyXG4gIHBhbmVsRm9vdGVyOiBIVE1MRWxlbWVudDtcclxuICBhY3RpdmVTZWN0aW9uOiBQYW5lbFNlY3Rpb247XHJcbiAgaXNPcGVuOiBib29sZWFuO1xyXG4gIHBhbmVsU2lkZTogUGFuZWxQb3NpdGlvbjtcclxuICBzZWN0aW9uczogUGFuZWxTZWN0aW9uW10gPSBbXTtcclxuICBtZWRpdW1CcmVha3BvaW50OiBNZWRpYVF1ZXJ5TGlzdDtcclxuICAvLyBQYW5lbCBkaW1lbnNpb25zIGFuZCByZXNpemluZy5cclxuICBwYW5lbFdpZHRoID0gMjUwO1xyXG4gIHBhbmVsSGVpZ2h0ID0gMjAwO1xyXG4gIHJlc2l6aW5nV2lkdGggPSBmYWxzZTtcclxuICByZXNpemluZ0hlaWdodCA9IGZhbHNlO1xyXG4gIHN0YXJ0WDogbnVtYmVyO1xyXG4gIHN0YXJ0V2lkdGg6IG51bWJlcjtcclxuICBzdGFydFk6IG51bWJlcjtcclxuICBzdGFydEhlaWdodDogbnVtYmVyO1xyXG5cclxuXHJcbiAgY29uc3RydWN0b3IocGFuZWxzU3RvcmFnZTogSFRNTEVsZW1lbnQsIFdvcmtzcGFjZTogV29ya3NwYWNlKSB7XHJcbiAgICB0aGlzLnBhbmVsc1N0b3JhZ2UgPSBwYW5lbHNTdG9yYWdlO1xyXG4gICAgLy8gQ3JlYXRpb24gb2YgSFRNTCBzdHJ1Y3R1cmUuXHJcbiAgICB0aGlzLnBhbmVsQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICB0aGlzLnBhbmVsQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ21haW5QYW5lbCcsICdyaWdodCcpO1xyXG4gICAgdGhpcy5wYW5lbEdyaXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgIHRoaXMucGFuZWxHcmlwLmNsYXNzTGlzdC5hZGQoJ3BhbmVsLWdyaXAnKTtcclxuICAgIHRoaXMucGFuZWxDb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5wYW5lbEdyaXApO1xyXG4gICAgdGhpcy5wYW5lbENvbnRlbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgIHRoaXMucGFuZWxDb250ZW50LmNsYXNzTGlzdC5hZGQoJ3BhbmVsLWNvbnRlbnQnKTtcclxuICAgIHRoaXMucGFuZWxIZWFkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgIHRoaXMucGFuZWxIZWFkZXIuY2xhc3NMaXN0LmFkZCgncGFuZWwtaGVhZGVyJyk7XHJcbiAgICB0aGlzLnBhbmVsQm9keSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgdGhpcy5wYW5lbEJvZHkuY2xhc3NMaXN0LmFkZCgncGFuZWwtYm9keScpO1xyXG4gICAgdGhpcy5wYW5lbEZvb3RlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgdGhpcy5wYW5lbEZvb3Rlci5jbGFzc0xpc3QuYWRkKCdwYW5lbC1mb290ZXInKTtcclxuICAgIHRoaXMucGFuZWxDb250ZW50LmFwcGVuZENoaWxkKHRoaXMucGFuZWxIZWFkZXIpO1xyXG4gICAgdGhpcy5wYW5lbENvbnRlbnQuYXBwZW5kQ2hpbGQodGhpcy5wYW5lbEJvZHkpO1xyXG4gICAgdGhpcy5wYW5lbENvbnRlbnQuYXBwZW5kQ2hpbGQodGhpcy5wYW5lbEZvb3Rlcik7XHJcbiAgICB0aGlzLnBhbmVsQ29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMucGFuZWxDb250ZW50KTtcclxuXHJcbiAgICAvLyBUT0RPIFJlbW92ZSB0aGlzIGV2ZW50IGxpc3RlbmVycyB3aGVuIHRoZSBwYW5lbCBpcyBkZWxldGVkLlxyXG4gICAgV29ya3NwYWNlLndvcmtzcGFjZUNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBlID0+IHtcclxuICAgICAgaWYgKHRoaXMucmVzaXppbmdXaWR0aCkge1xyXG4gICAgICAgIHRoaXMucmVzaXplV2lkdGgoZSk7XHJcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5yZXNpemluZ0hlaWdodCkge1xyXG4gICAgICAgIHRoaXMucmVzaXplSGVpZ2h0KGUpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICAgIFdvcmtzcGFjZS53b3Jrc3BhY2VDb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsICgpID0+IHsgLy8gQWRkIGFsc28gdGhlIHNhbWUgZm9yIG1vdXNlbGVhdmU/XHJcbiAgICAgIHRoaXMucmVzaXppbmdXaWR0aCA9IGZhbHNlO1xyXG4gICAgICB0aGlzLnJlc2l6aW5nSGVpZ2h0ID0gZmFsc2U7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLnNldEFjdGl2ZSA9IHRoaXMuc2V0QWN0aXZlLmJpbmQodGhpcyk7XHJcbiAgICB0aGlzLnBhbmVsSGVhZGVyLm9uY2xpY2sgPSBlID0+IHtcclxuICAgICAgY29uc3QgYnV0dG9uID0gKGUudGFyZ2V0IGFzIEhUTUxFbGVtZW50KS5jbG9zZXN0KCdbZGF0YS1idG5dJykgYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgIGlmIChidXR0b24gJiYgIWJ1dHRvbi5jbGFzc0xpc3QuY29udGFpbnMoJ2FjdGl2ZScpKVxyXG4gICAgICAgIHRoaXMuc2V0QWN0aXZlKGJ1dHRvbi5pbm5lclRleHQpO1xyXG4gICAgfTtcclxuICAgIC8vIE1lZGlhIGJyZWFrcG9pbnQgdG8gZGV0ZXJtaW5lIHRoZSBwYW5lbCBwb3NpdGlvbi5cclxuICAgIHRoaXMubWVkaXVtQnJlYWtwb2ludCA9IHdpbmRvdy5tYXRjaE1lZGlhKCcobWF4LXdpZHRoOiA3MDBweCknKTtcclxuICAgIHRoaXMucGFuZWxQb3NpdG9uID0gdGhpcy5wYW5lbFBvc2l0b24uYmluZCh0aGlzKTtcclxuICAgIHRoaXMubWVkaXVtQnJlYWtwb2ludC5hZGRMaXN0ZW5lcih0aGlzLnBhbmVsUG9zaXRvbiBhcyAodGhpczogTWVkaWFRdWVyeUxpc3QpID0+IGFueSk7XHJcbiAgICB0aGlzLnBhbmVsUG9zaXRvbih0aGlzLm1lZGl1bUJyZWFrcG9pbnQpO1xyXG4gICAgLy8gUGFuZWwgZGltZW5zaW9ucyBhbmQgcmVzaXppbmcuICAgIFxyXG4gICAgdGhpcy5wYW5lbENvbnRhaW5lci5zdHlsZS5zZXRQcm9wZXJ0eShcIi0td2lkdGhcIiwgdGhpcy5wYW5lbFdpZHRoICsgJ3B4Jyk7XHJcbiAgICB0aGlzLnBhbmVsQ29udGFpbmVyLnN0eWxlLnNldFByb3BlcnR5KFwiLS1oZWlnaHRcIiwgdGhpcy5wYW5lbEhlaWdodCArICdweCcpO1xyXG4gICAgdGhpcy5wYW5lbEdyaXAub25tb3VzZWRvd24gPSBlID0+IHtcclxuICAgICAgaWYgKHRoaXMucGFuZWxTaWRlID09PSBQYW5lbFBvc2l0aW9uLlJpZ2h0KSB7XHJcbiAgICAgICAgdGhpcy5yZXNpemluZ1dpZHRoID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLnJlc2l6aW5nSGVpZ2h0ID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5zdGFydFggPSBlLnBhZ2VYO1xyXG4gICAgICAgIHRoaXMuc3RhcnRXaWR0aCA9IHRoaXMucGFuZWxXaWR0aDtcclxuICAgICAgfSBlbHNlIGlmICh0aGlzLnBhbmVsU2lkZSA9PT0gUGFuZWxQb3NpdGlvbi5Cb3R0b20pIHtcclxuICAgICAgICB0aGlzLnJlc2l6aW5nSGVpZ2h0ID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLnJlc2l6aW5nV2lkdGggPSBmYWxzZTtcclxuICAgICAgICB0aGlzLnN0YXJ0WSA9IGUucGFnZVk7XHJcbiAgICAgICAgdGhpcy5zdGFydEhlaWdodCA9IHRoaXMucGFuZWxIZWlnaHQ7XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgICBXb3Jrc3BhY2Uud29ya3NwYWNlQ29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMucGFuZWxDb250YWluZXIpO1xyXG4gIH1cclxuXHJcbiAgcmVzaXplV2lkdGgobW91c2VFdmVudDogTW91c2VFdmVudCkge1xyXG4gICAgdGhpcy5wYW5lbFdpZHRoID0gdGhpcy5zdGFydFdpZHRoIC0gKG1vdXNlRXZlbnQucGFnZVggLSB0aGlzLnN0YXJ0WCk7XHJcbiAgICB0aGlzLnBhbmVsQ29udGFpbmVyLnN0eWxlLnNldFByb3BlcnR5KFwiLS13aWR0aFwiLCB0aGlzLnBhbmVsV2lkdGggKyAncHgnKTtcclxuICB9XHJcblxyXG4gIHJlc2l6ZUhlaWdodChtb3VzZUV2ZW50OiBNb3VzZUV2ZW50KSB7XHJcbiAgICB0aGlzLnBhbmVsSGVpZ2h0ID0gdGhpcy5zdGFydEhlaWdodCAtIChtb3VzZUV2ZW50LnBhZ2VZIC0gdGhpcy5zdGFydFkpO1xyXG4gICAgdGhpcy5wYW5lbENvbnRhaW5lci5zdHlsZS5zZXRQcm9wZXJ0eShcIi0taGVpZ2h0XCIsIHRoaXMucGFuZWxIZWlnaHQgKyAncHgnKTtcclxuICB9XHJcblxyXG4gIG9wZW4oKSB7XHJcbiAgICB0aGlzLnBhbmVsQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ29wZW4nKTtcclxuICAgIHRoaXMucGFuZWxQb3NpdG9uKHRoaXMubWVkaXVtQnJlYWtwb2ludCk7XHJcbiAgICB0aGlzLmlzT3BlbiA9IHRydWU7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHRoaXMucGFuZWxDb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZSgnb3BlbicpO1xyXG4gICAgdGhpcy5pc09wZW4gPSBmYWxzZTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIERvY2tzIHRoZSBwYW5lbCBvbiB0aGUgc3BlY2lmaWVkIHNpZGUuXHJcbiAgICovXHJcbiAgZG9ja1RvKHNpZGU6IFBhbmVsUG9zaXRpb24pIHtcclxuICAgIGlmIChzaWRlID09PSBQYW5lbFBvc2l0aW9uLlJpZ2h0KSB7XHJcbiAgICAgIHRoaXMucGFuZWxTaWRlID0gc2lkZTtcclxuICAgICAgdGhpcy5wYW5lbENvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKCdib3R0b20nKTtcclxuICAgICAgdGhpcy5wYW5lbENvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdyaWdodCcpO1xyXG4gICAgICB0aGlzLnBhbmVsQm9keS5jaGlsZE5vZGVzLmZvckVhY2goKGNvbnRlbnQ6IEhUTUxFbGVtZW50KSA9PiB7XHJcbiAgICAgICAgY29udGVudC5jbGFzc0xpc3QucmVtb3ZlKCdob3Jpem9udGFsJyk7XHJcbiAgICAgICAgY29udGVudC5jbGFzc0xpc3QuYWRkKCd2ZXJ0aWNhbCcpO1xyXG4gICAgICB9KTtcclxuICAgIH0gZWxzZSBpZiAoc2lkZSA9PT0gUGFuZWxQb3NpdGlvbi5Cb3R0b20pIHtcclxuICAgICAgdGhpcy5wYW5lbFNpZGUgPSBzaWRlO1xyXG4gICAgICB0aGlzLnBhbmVsQ29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoJ3JpZ2h0Jyk7XHJcbiAgICAgIHRoaXMucGFuZWxDb250YWluZXIuY2xhc3NMaXN0LmFkZCgnYm90dG9tJyk7XHJcbiAgICAgIHRoaXMucGFuZWxCb2R5LmNoaWxkTm9kZXMuZm9yRWFjaCgoY29udGVudDogSFRNTEVsZW1lbnQpID0+IHtcclxuICAgICAgICBjb250ZW50LmNsYXNzTGlzdC5yZW1vdmUoJ3ZlcnRpY2FsJyk7XHJcbiAgICAgICAgY29udGVudC5jbGFzc0xpc3QuYWRkKCdob3Jpem9udGFsJyk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogU2V0cyBhIHNlY3Rpb24gYXMgYWN0aXZlLlxyXG4gICAqIEBwYXJhbSBuYW1lIFRoZSBuYW1lIG9mIHRoZSBzZWN0aW9uIHRvIGFjdGl2YXRlLlxyXG4gICAqL1xyXG4gIHNldEFjdGl2ZShuYW1lOiBzdHJpbmcpIHtcclxuICAgIGlmICh0aGlzLmFjdGl2ZVNlY3Rpb24pXHJcbiAgICAgIHRoaXMuc2V0SW5hY3RpdmUodGhpcy5hY3RpdmVTZWN0aW9uKTtcclxuICAgIC8vIFRoaXMgbWVhbnMgdGhhdCBzZWN0aW9ucyBzaG91bGQgaGF2ZSB1bmlxdWUgbmFtZXMuXHJcbiAgICB0aGlzLmFjdGl2ZVNlY3Rpb24gPSB0aGlzLnNlY3Rpb25zLmZpbmQocyA9PiBzLm5hbWUgPT09IG5hbWUpO1xyXG4gICAgdGhpcy5hY3RpdmVTZWN0aW9uLmJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcclxuICAgIHRoaXMuYWN0aXZlU2VjdGlvbi5ib2R5LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogU2V0cyBhIHNlY3Rpb24gYXMgaW5hY3RpdmUsIHNvIGluIHRoZSBiYWNrLlxyXG4gICAqIElmIHRoZXJlIGlzIG9ubHkgb25lIGFuZCBpdCBpcyBpbmFjdGl2ZSB0aGUgYm9keSB3b250IGJlIHZpc2libGUuXHJcbiAgICovXHJcbiAgc2V0SW5hY3RpdmUoc2VjdGlvbjogUGFuZWxTZWN0aW9uKSB7XHJcbiAgICBzZWN0aW9uLmJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcclxuICAgIHNlY3Rpb24uYm9keS5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEFkZHMgYSBuZXcgc2VjdGlvbiB0byB0aGUgcGFuZWwgY29udGVudHMgYW5kIHNldHMgaXQgYXMgYWN0aXZlLlxyXG4gICAqIElmIGEgc2VjdGlvbiB3aXRoIHRoaXMgbmFtZSBhbHJlYWR5IGV4aXN0cyB0aGVuIGl0IGlzIG9ubHkgYWN0aXZhdGVkLlxyXG4gICAqIEBwYXJhbSBhY3RpdmF0ZSBTZXQgdGhlIHNlY3Rpb24gYXMgYWN0aXZlICh0aGUgb25lIHZpc2libGUpLiBEZWZhdWx0IHRydWUuXHJcbiAgICogQHBhcmFtIGZpcnN0IElmIHRydWUgc2V0cyB0aGUgc2VjdGlvbiBhcyB0aGUgZmlyc3Qgb25lIChsZWZ0IHNpZGUpLiBEZWZhdWx0IGZhbHNlLlxyXG4gICAqL1xyXG4gIGFkZFNlY3Rpb24obmFtZTogc3RyaW5nLCBib2R5OiBIVE1MRWxlbWVudCwgYWN0aXZhdGUgPSB0cnVlLCBmaXJzdCA9IGZhbHNlKSB7IC8vIFRPRE8gdXNlIGFuIG9iamVjdCBkZXN0cnVjdCBmb3IgbmFtZSBhbmQgYm9keVxyXG4gICAgbGV0IHNlY3Rpb24gPSB0aGlzLnNlY3Rpb25zLmZpbmQocyA9PiBzLm5hbWUgPT09IG5hbWUpO1xyXG4gICAgaWYgKHNlY3Rpb24gPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAvLyBUaGUgc2VjdGlvbiBidXR0b24uXHJcbiAgICAgIGNvbnN0IGJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcclxuICAgICAgYnV0dG9uLmlubmVyVGV4dCA9IG5hbWU7XHJcbiAgICAgIGJ1dHRvbi5kYXRhc2V0LmJ0biA9ICcnO1xyXG4gICAgICB0aGlzLnBhbmVsSGVhZGVyLmFwcGVuZENoaWxkKGJ1dHRvbik7XHJcbiAgICAgIHRoaXMucGFuZWxCb2R5LmFwcGVuZENoaWxkKGJvZHkpO1xyXG4gICAgICBzZWN0aW9uID0geyBuYW1lLCBidXR0b24sIGJvZHkgfTtcclxuICAgICAgLy8gQWRkZWQgdG8gc2VjdGlvbnMgYXJyYXkuXHJcbiAgICAgIGlmIChmaXJzdClcclxuICAgICAgICB0aGlzLnNlY3Rpb25zLnVuc2hpZnQoc2VjdGlvbik7XHJcbiAgICAgIGVsc2VcclxuICAgICAgICB0aGlzLnNlY3Rpb25zLnB1c2goc2VjdGlvbik7XHJcbiAgICB9XHJcbiAgICBpZiAoYWN0aXZhdGUpXHJcbiAgICAgIHRoaXMuc2V0QWN0aXZlKHNlY3Rpb24ubmFtZSk7XHJcbiAgICBlbHNlXHJcbiAgICAgIHRoaXMuc2V0SW5hY3RpdmUoc2VjdGlvbik7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBBZGRzIGEgc2V0IG9mIHNlY3Rpb25zIHRvIHRoZSBwYW5lbC5cclxuICAgKiBUaGUgZmlyc3Qgb25lIGluIHRoZSBhcnJheSB3aWxsIGJlIHNldCBhcyBhY3RpdmUuXHJcbiAgICogQHBhcmFtIHtBcnJheX0gc2VjdGlvbnNBcnJheSBFYWNoIG9iamVjdCBpbiB0aGUgYXJyYXkgc2hvdWxkIGhhdmUgYSBuYW1lIGFuZCBhIGJvZHkgZW50cnkuXHJcbiAgICovXHJcbiAgYWRkU2VjdGlvbnMoc2VjdGlvbnNBcnJheTogUGFuZWxTZWN0aW9uW10pIHtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2VjdGlvbnNBcnJheS5sZW5ndGg7IGkrKykge1xyXG4gICAgICB0aGlzLmFkZFNlY3Rpb24oc2VjdGlvbnNBcnJheVtpXS5uYW1lLCBzZWN0aW9uc0FycmF5W2ldLmJvZHksIGkgPT09IDAgPyB0cnVlIDogZmFsc2UpXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBSZW1vdmVzIGEgc2VjdGlvbiBmcm9tIHRoZSBwYW5lbCBjb250ZW50cy5cclxuICAgKiBJZiB0aGlzIHdhcyB0aGUgb25seSBzZWN0aW9uIHRoZSBwYW5lbCB3aWxsIGNsb3NlLlxyXG4gICAqL1xyXG4gIHJlbW92ZVNlY3Rpb24obmFtZTogc3RyaW5nKSB7XHJcbiAgICBjb25zdCBzZWN0aW9uSW5kZXggPSB0aGlzLnNlY3Rpb25zLmZpbmRJbmRleChzID0+IHMubmFtZSA9PT0gbmFtZSk7XHJcbiAgICBpZiAoc2VjdGlvbkluZGV4ID49IDApIHtcclxuICAgICAgY29uc3Qgc2VjdGlvbiA9IHRoaXMuc2VjdGlvbnMuc3BsaWNlKHNlY3Rpb25JbmRleCwgMSlbMF07XHJcbiAgICAgIHNlY3Rpb24uYnV0dG9uLnJlbW92ZSgpO1xyXG4gICAgICB0aGlzLnBhbmVsc1N0b3JhZ2UuYXBwZW5kQ2hpbGQoc2VjdGlvbi5ib2R5KTtcclxuICAgICAgaWYgKHRoaXMuc2VjdGlvbnMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIC8vIEkgc2V0IGFzIGFjdGl2ZSB0aGUgZmlyc3QuXHJcbiAgICAgICAgdGhpcy5zZXRBY3RpdmUodGhpcy5zZWN0aW9uc1swXS5uYW1lKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNvbnNvbGUud2FybignSW1wb3NzaWJsZSB0byByZW1vdmUgdGhlIHNlY3Rpb24uIE5vIHNlY3Rpb24gd2FzIGZvdW5kIHdpdGggdGhhdCBuYW1lLicpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcGFuZWxQb3NpdG9uKGJyZWFrcG9pbnQ6IE1lZGlhUXVlcnlMaXN0KSB7XHJcbiAgICBpZiAoYnJlYWtwb2ludC5tYXRjaGVzKSB7XHJcbiAgICAgIHRoaXMuZG9ja1RvKFBhbmVsUG9zaXRpb24uQm90dG9tKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuZG9ja1RvKFBhbmVsUG9zaXRpb24uUmlnaHQpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAga2lsbCgpIHtcclxuICAgIC8vIFJlbW92ZSBldmVudCBsaXNlbmVyc1xyXG4gICAgdGhpcy5wYW5lbEhlYWRlci5vbmNsaWNrID0gbnVsbDtcclxuICAgIHRoaXMucGFuZWxHcmlwLm9ubW91c2Vkb3duID0gbnVsbDtcclxuICB9XHJcbn0iLCJpbXBvcnQgeyBPcnRob0xpbmVMaW5lUmVsYXRpb25zaGlwLCBPcnRob0xpbmVMaW5lUmVsYXRpb25zaGlwVHlwZSwgUmVjdFJlY3RSZWxhdGlvbnNoaXBUeXBlLCBHZW9tZXRyeUNhbGMsIFJlY3RhbmdsZSwgTGluZSwgUG9pbnQyZCB9IGZyb20gJy4vZ2VvbWV0cnknO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3Mge1xyXG5cclxuICAvKipcclxuICAqIFJlYWQgdGhlIGNvbnRlbnQgb2YgYSBmaWxlLlxyXG4gICovXHJcbiAgc3RhdGljIHJlYWRJbnB1dEZpbGUoZmlsZTogQmxvYikge1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXMsIHJlaikgPT4ge1xyXG4gICAgICBjb25zdCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xyXG4gICAgICByZWFkZXIucmVhZEFzVGV4dChmaWxlLCBcIlVURi04XCIpO1xyXG4gICAgICByZWFkZXIub25sb2FkID0gKCkgPT4ge1xyXG4gICAgICAgIHJlcyhyZWFkZXIucmVzdWx0KTtcclxuICAgICAgfVxyXG4gICAgICByZWFkZXIub25lcnJvciA9ICgpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhcIkVycm9yIHJlYWRpbmcgdGhlIGZpbGUuXCIpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICogR2V0IHRoZSBVUkwgcGFyYW1ldGVycy5cclxuICAqIFNvdXJjZTogaHR0cHM6Ly9jc3MtdHJpY2tzLmNvbS9zbmlwcGV0cy9qYXZhc2NyaXB0L2dldC11cmwtdmFyaWFibGVzL1xyXG4gICogQHJldHVybiB7T2JqZWN0fSAgICAgVGhlIFVSTCBwYXJhbWV0ZXJzXHJcbiAgKi9cclxuICBzdGF0aWMgZ2V0VXJsUGFyYW1zKHVybDogc3RyaW5nKSB7XHJcbiAgICBjb25zdCBwYXJhbXM6IGFueSA9IHt9O1xyXG4gICAgY29uc3QgcGFyc2VyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xyXG4gICAgcGFyc2VyLmhyZWYgPSB1cmw7XHJcbiAgICBjb25zdCB2YXJzID0gcGFyc2VyLnNlYXJjaC5zdWJzdHJpbmcoMSkuc3BsaXQoJyYnKTtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmFycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICBjb25zdCBwYWlyID0gdmFyc1tpXS5zcGxpdCgnPScpO1xyXG4gICAgICBwYXJhbXNbcGFpclswXV0gPSBkZWNvZGVVUklDb21wb25lbnQocGFpclsxXSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcGFyYW1zO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogUmVtb3ZlcyBhbGwgdGhlIGNoaWxkcyBvZiB0aGUgSFRNTCBlbGVtZW50LlxyXG4gICAqL1xyXG4gIHN0YXRpYyBlbXB0eU5vZGUobm9kZTogSFRNTEVsZW1lbnQpIHtcclxuICAgIHdoaWxlIChub2RlLmZpcnN0Q2hpbGQgJiYgbm9kZS5yZW1vdmVDaGlsZChub2RlLmZpcnN0Q2hpbGQpKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIENyZWF0ZXMgYSBmaWxsZXQgYm91bmRpbmcgYm94IGFyb3VuZCB0aGUgcHJvdmlkZWQgZWxlbWVudC5cclxuICAgKiBAcGFyYW0gb2Zmc2V0IGRlZmF1bHQgNS5cclxuICAgKiBAcGFyYW0gZmlsbGV0IGRlZmF1bHQgNS5cclxuICAgKi9cclxuICBzdGF0aWMgY3JlYXRlQkJveChlbGVtZW50OiBTVkdHcmFwaGljc0VsZW1lbnQsIG9mZnNldCA9IDUsIGZpbGxldCA9IDUpIHtcclxuICAgIGNvbnN0IHJlY3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywgJ3JlY3QnKTtcclxuICAgIHJlY3Quc2V0QXR0cmlidXRlKCd4JywgKGVsZW1lbnQuZ2V0QkJveCgpLnggLSBvZmZzZXQpLnRvU3RyaW5nKCkpO1xyXG4gICAgcmVjdC5zZXRBdHRyaWJ1dGUoJ3knLCAoZWxlbWVudC5nZXRCQm94KCkueSAtIG9mZnNldCkudG9TdHJpbmcoKSk7XHJcbiAgICByZWN0LnNldEF0dHJpYnV0ZSgnd2lkdGgnLCAoZWxlbWVudC5nZXRCQm94KCkud2lkdGggKyBvZmZzZXQgKiAyKS50b1N0cmluZygpKTtcclxuICAgIHJlY3Quc2V0QXR0cmlidXRlKCdoZWlnaHQnLCAoZWxlbWVudC5nZXRCQm94KCkuaGVpZ2h0ICsgb2Zmc2V0ICogMikudG9TdHJpbmcoKSk7XHJcbiAgICByZWN0LnNldEF0dHJpYnV0ZSgncngnLCBmaWxsZXQudG9TdHJpbmcoKSk7XHJcbiAgICByZWN0LnNldEF0dHJpYnV0ZSgncnknLCBmaWxsZXQudG9TdHJpbmcoKSk7XHJcbiAgICByZXR1cm4gcmVjdDtcclxuICB9XHJcblxyXG4gIC8vIFJlbmFtZSB0aGUgYWJvdmUgYXMgY3JlYXRlU1ZHQkJveFxyXG4gIC8vIFRoaXMgb25lIHJldHVybnMgYSByZWN0IG9iamVjdCB7eCx5LHdpZHRoLGhlaWdodH1cclxuICAvLyBzYW1lIGFzIGRlZmF1bHQgYmJveCBidXQgd2l0aCBvcHRpb25hbCBvZmZzZXRcclxuICBzdGF0aWMgY3JlYXRlQkJveDIoZWxlbWVudDogU1ZHR3JhcGhpY3NFbGVtZW50LCBvZmZzZXQgPSAwKSB7IC8vIFRPRE8gaXMgZGVwcmVjYXRlZD9cclxuICAgIGlmIChvZmZzZXQgIT09IDApIHtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICB4OiBlbGVtZW50LmdldEJCb3goKS54IC0gb2Zmc2V0LFxyXG4gICAgICAgIHk6IGVsZW1lbnQuZ2V0QkJveCgpLnkgLSBvZmZzZXQsXHJcbiAgICAgICAgd2lkdGg6IGVsZW1lbnQuZ2V0QkJveCgpLndpZHRoICsgb2Zmc2V0ICogMixcclxuICAgICAgICBoZWlnaHQ6IGVsZW1lbnQuZ2V0QkJveCgpLmhlaWdodCArIG9mZnNldCAqIDJcclxuICAgICAgfTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBlbGVtZW50LmdldEJCb3goKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIGdldCB0aGUgY29vcmRpbmF0ZXMgb2YgdGhlIG1vdXNlIG9uIHRoZSBTVkcgY2FudmFzLlxyXG4gICAqIFRPRE8gUmVuYW1lIGFzIGdldFNWR0RvY1JlbGF0aXZlQ29vcmRzXHJcbiAgICovXHJcbiAgc3RhdGljIGdldFJlbGF0aXZlQ29vcmRzKGU6IE1vdXNlRXZlbnQsIHN2Z0RvYzogU1ZHU1ZHRWxlbWVudCk6IERPTVBvaW50IHtcclxuICAgIGNvbnN0IG9yaWdpblB0ID0gc3ZnRG9jLmNyZWF0ZVNWR1BvaW50KCk7XHJcbiAgICBvcmlnaW5QdC54ID0gZS5jbGllbnRYO1xyXG4gICAgb3JpZ2luUHQueSA9IGUuY2xpZW50WTtcclxuICAgIC8vIFRoZSBjdXJzb3IgcG9pbnQsIHRyYW5zbGF0ZWQgaW50byBzdmcgY29vcmRpbmF0ZXNcclxuICAgIHJldHVybiBvcmlnaW5QdC5tYXRyaXhUcmFuc2Zvcm0oc3ZnRG9jLmdldFNjcmVlbkNUTSgpLmludmVyc2UoKSk7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgZ2V0Vmlld3BvcnRSZWxhdGl2ZUNvb3JkcyhlOiBNb3VzZUV2ZW50KTogUG9pbnQyZCB7XHJcbiAgICByZXR1cm4geyB4OiBlLmNsaWVudFgsIHk6IGUuY2xpZW50WSB9O1xyXG4gIH1cclxuXHJcbiAgLy8gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMTA1MDM0L2NyZWF0ZS1ndWlkLXV1aWQtaW4tamF2YXNjcmlwdFxyXG4gIHN0YXRpYyB1dWlkdjQoKSB7XHJcbiAgICByZXR1cm4gKCgxZTcpLnRvU3RyaW5nKCkgKyAtMWUzICsgLTRlMyArIC04ZTMgKyAtMWUxMSkucmVwbGFjZSgvWzAxOF0vZywgYyA9PlxyXG4gICAgICAoTnVtYmVyKGMpIF4gY3J5cHRvLmdldFJhbmRvbVZhbHVlcyhuZXcgVWludDhBcnJheSgxKSlbMF0gJiAxNSA+PiBOdW1iZXIoYykgLyA0KS50b1N0cmluZygxNilcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgaXNPYmplY3RFbXB0eShvYmo6IE9iamVjdCkge1xyXG4gICAgZm9yKGxldCBrZXkgaW4gb2JqKSB7XHJcbiAgICAgIGlmKG9iai5oYXNPd25Qcm9wZXJ0eShrZXkpKVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIHJldHVybiB0cnVlO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGdldFJlY3RTZWdtZW50cyhyZWN0OiBSZWN0YW5nbGUpOiBMaW5lW10ge1xyXG4gICAgY29uc3QgY29ybmVyQSA9IHsgeDogcmVjdC54LCB5OiByZWN0LnkgfTtcclxuICAgIGNvbnN0IGNvcm5lckIgPSB7IHg6IHJlY3QueCArIHJlY3Qud2lkdGgsIHk6IHJlY3QueSB9O1xyXG4gICAgY29uc3QgY29ybmVyQyA9IHsgeDogcmVjdC54ICsgcmVjdC53aWR0aCwgeTogcmVjdC55ICsgcmVjdC5oZWlnaHQgfTtcclxuICAgIGNvbnN0IGNvcm5lckQgPSB7IHg6IHJlY3QueCwgeTogcmVjdC55ICsgcmVjdC5oZWlnaHQgfTtcclxuICAgIHJldHVybiBbXHJcbiAgICAgIFtjb3JuZXJBLCBjb3JuZXJCXSxcclxuICAgICAgW2Nvcm5lckIsIGNvcm5lckNdLFxyXG4gICAgICBbY29ybmVyQywgY29ybmVyRF0sXHJcbiAgICAgIFtjb3JuZXJELCBjb3JuZXJBXVxyXG4gICAgXTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFxyXG4gICAqIEBwYXJhbSBpbmNsdXNpdmUgSW5jbHVkZSBwb2ludHMgb24gdGhlIGVkZ2VzLiBEZWZhdWx0IHRydWUuXHJcbiAgICovXHJcbiAgc3RhdGljIGlzUHRJblJlY3QocmVjdDogUmVjdGFuZ2xlLCBwdDogUG9pbnQyZCwgaW5jbHVzaXZlID0gdHJ1ZSkge1xyXG4gICAgaWYgKGluY2x1c2l2ZSkge1xyXG4gICAgICByZXR1cm4gKHB0LnggPj0gcmVjdC54ICYmIHB0LnggPD0gKHJlY3QueCArIHJlY3Qud2lkdGgpKSAmJiAocHQueSA+PSByZWN0LnkgJiYgcHQueSA8PSAocmVjdC55ICsgcmVjdC5oZWlnaHQpKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiAocHQueCA+IHJlY3QueCAmJiBwdC54IDwgKHJlY3QueCArIHJlY3Qud2lkdGgpKSAmJiAocHQueSA+IHJlY3QueSAmJiBwdC55IDwgKHJlY3QueSArIHJlY3QuaGVpZ2h0KSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBDaGVja3MgaWYgYSBsaW5lIGlzIGNvbXBsZXRlbHkgaW5zaWRlIGEgcmVjdGFuZ2xlLlxyXG4gICAqIEV2ZW4gaWYgdGhlIGxpbmUgaXMgY29tcGxldGVseSBpbnNpZGUgYnV0IHRvdWNoaW5nIGEgc2VnbWVudCBvZiB0aGUgcmVjdGFuZ2xlIGl0J3MgY29uc2lkZXJlZCBpbnNpZGUsXHJcbiAgICogdGhpcyBpbmNsdWRlcyBhIGxpbmUgdGhhdCBpcyBjb21wbGV0ZWx5IG92ZXJsYXBwZWQgd2l0aCBhIHNlZ21lbnQgb2YgdGhlIHJlY3RhbmdsZS5cclxuICAgKiBAcGFyYW0ge0xpbmV9IGxpbmUgVGhlIGxpbmUgdG8gdGVzdC5cclxuICAgKiBAcGFyYW0ge1JlY3RhbmdsZX0gcmVjdCBUaGUgcmVjdGFuZ2xlIHRvIHRlc3QgYWdhaW5zdC5cclxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gQm9vbCBpbmRpY2F0aW5nIGlmIGl0IGlzIGNvbXBsZXRlbHkgaW5zaWRlIG9yIG5vdC5cclxuICAgKi9cclxuICBzdGF0aWMgaXNMaW5lSW5SZWN0KGxpbmU6IExpbmUsIHJlY3Q6IFJlY3RhbmdsZSkge1xyXG4gICAgcmV0dXJuICh0aGlzLmlzUHRJblJlY3QocmVjdCwgbGluZVswXSBhcyBQb2ludDJkKSAmJiB0aGlzLmlzUHRJblJlY3QocmVjdCwgbGluZVsxXSkpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ2hlY2sgaWYgYSBudW1lcmljYWwgdmFsdWUgaXMgYmV0d2VlbiB0d28gbGltaXRzLlxyXG4gICAqIEBwYXJhbSB2YWx1ZSBWYWx1ZSB0byBjb21wYXJlLlxyXG4gICAqIEBwYXJhbSBsaW1pdDEgRmlyc3QgbGltaXQuXHJcbiAgICogQHBhcmFtIGxpbWl0MiBTZWNvbmQgbGltaXQsIG9wb3NpdGUgdG8gdGhlIGZpcnN0IG9uZS5cclxuICAgKiBAcGFyYW0gaW5jbHVzaXZlIFdlYXRoZXIgdG8gaW5jbHVkZSB0aGUgbGltaXRzIGluIHRoZSBjb21wYXJpc29uIG9yIG5vdC4gRGVmYXVsdCB0cnVlLlxyXG4gICAqL1xyXG4gIHN0YXRpYyBpc051bUJldHdlZW4odmFsdWU6IG51bWJlciwgbGltaXQxOiBudW1iZXIsIGxpbWl0MjogbnVtYmVyLCBpbmNsdXNpdmUgPSB0cnVlKTogYm9vbGVhbiB7XHJcbiAgICBpZiAoaW5jbHVzaXZlKSB7XHJcbiAgICAgIHJldHVybiB2YWx1ZSA+PSBNYXRoLm1pbihsaW1pdDEsIGxpbWl0MikgJiYgdmFsdWUgPD0gTWF0aC5tYXgobGltaXQxLCBsaW1pdDIpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIHZhbHVlID4gTWF0aC5taW4obGltaXQxLCBsaW1pdDIpICYmIHZhbHVlIDwgTWF0aC5tYXgobGltaXQxLCBsaW1pdDIpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc3RhdGljIGlzTGluZUhvcml6b250YWwobGluZTogTGluZSkge1xyXG4gICAgcmV0dXJuIGxpbmVbMF0ueSA9PT0gbGluZVsxXS55O1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGlzTGluZVZlcnRpY2FsKGxpbmU6IExpbmUpIHtcclxuICAgIHJldHVybiBsaW5lWzBdLnggPT09IGxpbmVbMV0ueDtcclxuICB9XHJcblxyXG4gIC8vIElmIHJlZlB0IGlzIHByb3ZpZGVkIHdpbGwgYmUgY2FsY3VsYXRlZCBmcm9tIHRoaXNcclxuICAvLyBJZiBub3QgcHJvdmlkZWQgd2lsbCBiZSBjYWxjdWxhdGVkIGZyb20gdGhlIGZpcnN0IHBvaW50XHJcbiAgc3RhdGljIHNvcnRQdHNCeURpc3RhbmNlKHB0czogUG9pbnQyZFtdLCByZWZQdDogUG9pbnQyZCA9IHVuZGVmaW5lZCwgaW5jbHVkZVJlZlB0ID0gZmFsc2UpIHtcclxuICAgIGNvbnN0IHJlZmVyZW5jZVB0ID0gcmVmUHQgIT09IHVuZGVmaW5lZCA/IHJlZlB0IDogcHRzWzBdO1xyXG4gICAgY29uc3Qgc29ydGVkUHRzID0gcHRzLnNvcnQoKGEsIGIpID0+IHtcclxuICAgICAgaWYgKEdlb21ldHJ5Q2FsYy5wdHNEaXN0YW5jZShyZWZlcmVuY2VQdCwgYSkgPCBHZW9tZXRyeUNhbGMucHRzRGlzdGFuY2UocmVmZXJlbmNlUHQsIGIpKVxyXG4gICAgICAgIHJldHVybiAtMTtcclxuICAgICAgZWxzZSBpZiAoR2VvbWV0cnlDYWxjLnB0c0Rpc3RhbmNlKHJlZmVyZW5jZVB0LCBhKSA+IEdlb21ldHJ5Q2FsYy5wdHNEaXN0YW5jZShyZWZlcmVuY2VQdCwgYikpXHJcbiAgICAgICAgcmV0dXJuIDE7XHJcbiAgICAgIGVsc2VcclxuICAgICAgICByZXR1cm4gMDtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIChyZWZQdCAhPT0gdW5kZWZpbmVkICYmIGluY2x1ZGVSZWZQdCA9PT0gdHJ1ZSkgPyBbcmVmUHQsIC4uLnNvcnRlZFB0c10gOiBzb3J0ZWRQdHM7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBHaXZlbiBhbiBhcnJheSBvZiBwb2ludHMgcmV0dXJucyBhbiBhcnJheSBvZiBsaW5lcyBiZXR3ZWVuIHRoZSBwb2ludHMuXHJcbiAgICovXHJcbiAgc3RhdGljIGxpbmVzQmV0d2VlblB0cyhwdHM6IFBvaW50MmRbXSk6IExpbmVbXSB7XHJcbiAgICBpZiAocHRzLmxlbmd0aCA+IDEpIHtcclxuICAgICAgY29uc3Qgc2VnbWVudHM6IExpbmVbXSA9IFtdO1xyXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHB0cy5sZW5ndGggLSAxOyBpKyspIHtcclxuICAgICAgICBzZWdtZW50cy5wdXNoKFtwdHNbaV0sIHB0c1tpICsgMV1dKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gc2VnbWVudHM7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICB9XHJcblxyXG5cclxuICAvLyBpZiBhIHJlY3RhbmdsZSBpcyB0b3RhbHkgb3ZlcmxhcHBlZCBvciBwYXJ0aWFsbHkgYW5kIGNvbXBsZXRlbHkgaW5zaWRlIGl0IGlzIG5vdCBjb25zaWRlcmVkIGludGVyc2VjdGlvbiBidXQgSW5zaWRlLiBmdWxsQ29udGFpbm1lbnRJbnRlcnNlY3Rpb25zIFxyXG4gIC8vIGludGVyc2VjdGlvbiBpbmNsdWRlcyBvdmVybGFwZWQgcGFydGlhbGx5IGJ1dCBubyBvbmUgaW5zaWRlIHRoZSBvdGhlclxyXG4gIHN0YXRpYyByZWN0UmVjdFJlbGF0aW9uc2hpcChyZWN0MTogUmVjdGFuZ2xlLCByZWN0MjogUmVjdGFuZ2xlKSB7XHJcbiAgICBpZiAocmVjdDEueCA9PT0gcmVjdDIueCAmJiByZWN0MS55ID09PSByZWN0Mi55ICYmIHJlY3QxLndpZHRoID09PSByZWN0Mi53aWR0aCAmJiByZWN0MS5oZWlnaHQgPT09IHJlY3QyLmhlaWdodCkge1xyXG4gICAgICByZXR1cm4gUmVjdFJlY3RSZWxhdGlvbnNoaXBUeXBlLk1hdGNoO1xyXG4gICAgfSBlbHNlIGlmICh0aGlzLmlzUHRJblJlY3QocmVjdDIsIHsgeDogcmVjdDEueCwgeTogcmVjdDEueSB9KSAmJlxyXG4gICAgICB0aGlzLmlzUHRJblJlY3QocmVjdDIsIHsgeDogcmVjdDEueCArIHJlY3QxLndpZHRoLCB5OiByZWN0MS55IH0pICYmXHJcbiAgICAgIHRoaXMuaXNQdEluUmVjdChyZWN0MiwgeyB4OiByZWN0MS54ICsgcmVjdDEud2lkdGgsIHk6IHJlY3QxLnkgKyByZWN0MS5oZWlnaHQgfSkgJiZcclxuICAgICAgdGhpcy5pc1B0SW5SZWN0KHJlY3QyLCB7IHg6IHJlY3QxLngsIHk6IHJlY3QxLnkgKyByZWN0MS5oZWlnaHQgfSkpIHtcclxuICAgICAgcmV0dXJuIFJlY3RSZWN0UmVsYXRpb25zaGlwVHlwZS5BSW5zaWRlQjtcclxuICAgIH0gZWxzZSBpZiAodGhpcy5pc1B0SW5SZWN0KHJlY3QxLCB7IHg6IHJlY3QyLngsIHk6IHJlY3QyLnkgfSkgJiZcclxuICAgICAgdGhpcy5pc1B0SW5SZWN0KHJlY3QxLCB7IHg6IHJlY3QyLnggKyByZWN0Mi53aWR0aCwgeTogcmVjdDIueSB9KSAmJlxyXG4gICAgICB0aGlzLmlzUHRJblJlY3QocmVjdDEsIHsgeDogcmVjdDIueCArIHJlY3QyLndpZHRoLCB5OiByZWN0Mi55ICsgcmVjdDIuaGVpZ2h0IH0pICYmXHJcbiAgICAgIHRoaXMuaXNQdEluUmVjdChyZWN0MSwgeyB4OiByZWN0Mi54LCB5OiByZWN0Mi55ICsgcmVjdDIuaGVpZ2h0IH0pKSB7XHJcbiAgICAgIHJldHVybiBSZWN0UmVjdFJlbGF0aW9uc2hpcFR5cGUuQkluc2lkZUE7XHJcbiAgICB9IGVsc2UgaWYgKHRoaXMuaXNQdEluUmVjdChyZWN0MiwgeyB4OiByZWN0MS54LCB5OiByZWN0MS55IH0sIGZhbHNlKSB8fFxyXG4gICAgICB0aGlzLmlzUHRJblJlY3QocmVjdDIsIHsgeDogcmVjdDEueCArIHJlY3QxLndpZHRoLCB5OiByZWN0MS55IH0sIGZhbHNlKSB8fFxyXG4gICAgICB0aGlzLmlzUHRJblJlY3QocmVjdDIsIHsgeDogcmVjdDEueCArIHJlY3QxLndpZHRoLCB5OiByZWN0MS55ICsgcmVjdDEuaGVpZ2h0IH0sIGZhbHNlKSB8fFxyXG4gICAgICB0aGlzLmlzUHRJblJlY3QocmVjdDIsIHsgeDogcmVjdDEueCwgeTogcmVjdDEueSArIHJlY3QxLmhlaWdodCB9LCBmYWxzZSkgfHxcclxuICAgICAgdGhpcy5pc1B0SW5SZWN0KHJlY3QxLCB7IHg6IHJlY3QyLngsIHk6IHJlY3QyLnkgfSwgZmFsc2UpIHx8XHJcbiAgICAgIHRoaXMuaXNQdEluUmVjdChyZWN0MSwgeyB4OiByZWN0Mi54ICsgcmVjdDIud2lkdGgsIHk6IHJlY3QyLnkgfSwgZmFsc2UpIHx8XHJcbiAgICAgIHRoaXMuaXNQdEluUmVjdChyZWN0MSwgeyB4OiByZWN0Mi54ICsgcmVjdDIud2lkdGgsIHk6IHJlY3QyLnkgKyByZWN0Mi5oZWlnaHQgfSwgZmFsc2UpIHx8XHJcbiAgICAgIHRoaXMuaXNQdEluUmVjdChyZWN0MSwgeyB4OiByZWN0Mi54LCB5OiByZWN0Mi55ICsgcmVjdDIuaGVpZ2h0IH0sIGZhbHNlKSB8fFxyXG4gICAgICAodGhpcy5pc051bUJldHdlZW4ocmVjdDEueSwgcmVjdDIueSwgcmVjdDIueSArIHJlY3QyLmhlaWdodCwgZmFsc2UpICYmIHJlY3QxLnggPD0gcmVjdDIueCAmJiAocmVjdDEueCArIHJlY3QxLndpZHRoKSA+PSAocmVjdDIueCArIHJlY3QyLndpZHRoKSkgfHwgLy8gaXNOdW1CZXR3ZWVuKHJlY3QyLngsIHJlY3QxLngsIHJlY3QxLnggKyByZWN0MS53aWR0aCkgJiYgaXNOdW1CZXR3ZWVuKCkpIHx8XHJcbiAgICAgICh0aGlzLmlzTnVtQmV0d2VlbihyZWN0Mi55LCByZWN0MS55LCByZWN0MS55ICsgcmVjdDEuaGVpZ2h0LCBmYWxzZSkgJiYgcmVjdDIueCA8PSByZWN0MS54ICYmIChyZWN0Mi54ICsgcmVjdDIud2lkdGgpID49IChyZWN0MS54ICsgcmVjdDEud2lkdGgpKSkgeyAvLyBpc051bUJldHdlZW4ocmVjdDEueCwgcmVjdDIueCwgcmVjdDIueCArIHJlY3QyLndpZHRoKSkpIHtcclxuICAgICAgcmV0dXJuIFJlY3RSZWN0UmVsYXRpb25zaGlwVHlwZS5JbnRlcnNlY3Q7XHJcbiAgICB9IGVsc2UgaWYgKHRoaXMuaXNQdEluUmVjdChyZWN0MiwgeyB4OiByZWN0MS54LCB5OiByZWN0MS55IH0pIHx8XHJcbiAgICAgIHRoaXMuaXNQdEluUmVjdChyZWN0MiwgeyB4OiByZWN0MS54ICsgcmVjdDEud2lkdGgsIHk6IHJlY3QxLnkgfSkgfHxcclxuICAgICAgdGhpcy5pc1B0SW5SZWN0KHJlY3QyLCB7IHg6IHJlY3QxLnggKyByZWN0MS53aWR0aCwgeTogcmVjdDEueSArIHJlY3QxLmhlaWdodCB9KSB8fFxyXG4gICAgICB0aGlzLmlzUHRJblJlY3QocmVjdDIsIHsgeDogcmVjdDEueCwgeTogcmVjdDEueSArIHJlY3QxLmhlaWdodCB9KSB8fFxyXG4gICAgICB0aGlzLmlzUHRJblJlY3QocmVjdDEsIHsgeDogcmVjdDIueCwgeTogcmVjdDIueSB9KSB8fFxyXG4gICAgICB0aGlzLmlzUHRJblJlY3QocmVjdDEsIHsgeDogcmVjdDIueCArIHJlY3QyLndpZHRoLCB5OiByZWN0Mi55IH0pIHx8XHJcbiAgICAgIHRoaXMuaXNQdEluUmVjdChyZWN0MSwgeyB4OiByZWN0Mi54ICsgcmVjdDIud2lkdGgsIHk6IHJlY3QyLnkgKyByZWN0Mi5oZWlnaHQgfSkgfHxcclxuICAgICAgdGhpcy5pc1B0SW5SZWN0KHJlY3QxLCB7IHg6IHJlY3QyLngsIHk6IHJlY3QyLnkgKyByZWN0Mi5oZWlnaHQgfSkpIHtcclxuICAgICAgcmV0dXJuIFJlY3RSZWN0UmVsYXRpb25zaGlwVHlwZS5UYW5nZW50O1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIFJlY3RSZWN0UmVsYXRpb25zaGlwVHlwZS5EaXNqb2ludDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFJlbGF0aW9uc2hpcCBiZXR3ZWVuIHR3byBvcnRob2dvbmFsIGxpbmVzLlxyXG4gICAqL1xyXG4gIHN0YXRpYyBnZXRPcnRob0xpbmVMaW5lUmVsYXRpb25zaGlwKGxpbmUxOiBMaW5lLCBsaW5lMjogTGluZSkge1xyXG4gICAgaWYgKHRoaXMuaXNMaW5lSG9yaXpvbnRhbChsaW5lMSkgJiYgdGhpcy5pc0xpbmVWZXJ0aWNhbChsaW5lMikpIHtcclxuICAgICAgaWYgKHRoaXMuaXNOdW1CZXR3ZWVuKGxpbmUxWzBdLnksIGxpbmUyWzBdLnksIGxpbmUyWzFdLnkpICYmIHRoaXMuaXNOdW1CZXR3ZWVuKGxpbmUyWzBdLngsIGxpbmUxWzBdLngsIGxpbmUxWzFdLngpKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBPcnRob0xpbmVMaW5lUmVsYXRpb25zaGlwKE9ydGhvTGluZUxpbmVSZWxhdGlvbnNoaXBUeXBlLkludGVyc2VjdCwgeyB4OiBsaW5lMlswXS54LCB5OiBsaW5lMVswXS55IH0pO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBuZXcgT3J0aG9MaW5lTGluZVJlbGF0aW9uc2hpcChPcnRob0xpbmVMaW5lUmVsYXRpb25zaGlwVHlwZS5Ob3RoaW5nKTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIGlmICh0aGlzLmlzTGluZUhvcml6b250YWwobGluZTIpICYmIHRoaXMuaXNMaW5lVmVydGljYWwobGluZTEpKSB7XHJcbiAgICAgIGlmICh0aGlzLmlzTnVtQmV0d2VlbihsaW5lMlswXS55LCBsaW5lMVswXS55LCBsaW5lMVsxXS55KSAmJiB0aGlzLmlzTnVtQmV0d2VlbihsaW5lMVswXS54LCBsaW5lMlswXS54LCBsaW5lMlsxXS54KSkge1xyXG4gICAgICAgIHJldHVybiBuZXcgT3J0aG9MaW5lTGluZVJlbGF0aW9uc2hpcChPcnRob0xpbmVMaW5lUmVsYXRpb25zaGlwVHlwZS5JbnRlcnNlY3QsIHsgeDogbGluZTFbMF0ueCwgeTogbGluZTJbMF0ueSB9KTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gbmV3IE9ydGhvTGluZUxpbmVSZWxhdGlvbnNoaXAoT3J0aG9MaW5lTGluZVJlbGF0aW9uc2hpcFR5cGUuTm90aGluZyk7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSBpZiAodGhpcy5pc0xpbmVIb3Jpem9udGFsKGxpbmUxKSAmJiB0aGlzLmlzTGluZUhvcml6b250YWwobGluZTIpKSB7XHJcbiAgICAgIGlmIChsaW5lMVswXS55ID09PSBsaW5lMlswXS55KSB7XHJcbiAgICAgICAgY29uc3Qgc3RhcnRQb2ludFggPSBNYXRoLm1pbihNYXRoLm1heChsaW5lMVswXS54LCBsaW5lMVsxXS54KSwgTWF0aC5tYXgobGluZTJbMF0ueCwgbGluZTJbMV0ueCkpO1xyXG4gICAgICAgIGNvbnN0IGVuZFBvaW50WCA9IE1hdGgubWF4KE1hdGgubWluKGxpbmUxWzBdLngsIGxpbmUxWzFdLngpLCBNYXRoLm1pbihsaW5lMlswXS54LCBsaW5lMlsxXS54KSk7XHJcbiAgICAgICAgaWYgKHN0YXJ0UG9pbnRYID49IGVuZFBvaW50WCkge1xyXG4gICAgICAgICAgcmV0dXJuIG5ldyBPcnRob0xpbmVMaW5lUmVsYXRpb25zaGlwKE9ydGhvTGluZUxpbmVSZWxhdGlvbnNoaXBUeXBlLk92ZXJsYXAsIHVuZGVmaW5lZCwgW3sgeDogc3RhcnRQb2ludFgsIHk6IGxpbmUxWzBdLnkgfSwgeyB4OiBlbmRQb2ludFgsIHk6IGxpbmUxWzBdLnkgfV0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICByZXR1cm4gbmV3IE9ydGhvTGluZUxpbmVSZWxhdGlvbnNoaXAoT3J0aG9MaW5lTGluZVJlbGF0aW9uc2hpcFR5cGUuTm90aGluZyk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBuZXcgT3J0aG9MaW5lTGluZVJlbGF0aW9uc2hpcChPcnRob0xpbmVMaW5lUmVsYXRpb25zaGlwVHlwZS5Ob3RoaW5nKTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIGlmICh0aGlzLmlzTGluZVZlcnRpY2FsKGxpbmUxKSAmJiB0aGlzLmlzTGluZVZlcnRpY2FsKGxpbmUyKSkge1xyXG4gICAgICBpZiAobGluZTFbMF0ueCA9PT0gbGluZTJbMF0ueCkge1xyXG4gICAgICAgIGNvbnN0IHN0YXJ0UG9pbnRZID0gTWF0aC5taW4oTWF0aC5tYXgobGluZTFbMF0ueSwgbGluZTFbMV0ueSksIE1hdGgubWF4KGxpbmUyWzBdLnksIGxpbmUyWzFdLnkpKTtcclxuICAgICAgICBjb25zdCBlbmRQb2ludFkgPSBNYXRoLm1heChNYXRoLm1pbihsaW5lMVswXS55LCBsaW5lMVsxXS55KSwgTWF0aC5taW4obGluZTJbMF0ueSwgbGluZTJbMV0ueSkpO1xyXG4gICAgICAgIGlmIChzdGFydFBvaW50WSA+PSBlbmRQb2ludFkpIHtcclxuICAgICAgICAgIHJldHVybiBuZXcgT3J0aG9MaW5lTGluZVJlbGF0aW9uc2hpcChPcnRob0xpbmVMaW5lUmVsYXRpb25zaGlwVHlwZS5PdmVybGFwLCB1bmRlZmluZWQsIFt7IHg6IGxpbmUxWzBdLngsIHk6IHN0YXJ0UG9pbnRZIH0sIHsgeDogbGluZTFbMF0ueCwgeTogZW5kUG9pbnRZIH1dKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgcmV0dXJuIG5ldyBPcnRob0xpbmVMaW5lUmVsYXRpb25zaGlwKE9ydGhvTGluZUxpbmVSZWxhdGlvbnNoaXBUeXBlLk5vdGhpbmcpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gbmV3IE9ydGhvTGluZUxpbmVSZWxhdGlvbnNoaXAoT3J0aG9MaW5lTGluZVJlbGF0aW9uc2hpcFR5cGUuTm90aGluZyk7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBuZXcgT3J0aG9MaW5lTGluZVJlbGF0aW9uc2hpcChPcnRob0xpbmVMaW5lUmVsYXRpb25zaGlwVHlwZS5Ob3RoaW5nKTtcclxuICAgIH1cclxuICB9XHJcblxyXG5cclxuICBzdGF0aWMgcmVjdGFuZ2xlc1NpbGhvdWV0dGUocmVjdHM6IFJlY3RhbmdsZVtdKTogTGluZVtdIHtcclxuICAgIGNvbnN0IHJlY3RzU2VnbWVudHMgPSBbXTtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmVjdHMubGVuZ3RoOyBpKyspXHJcbiAgICAgIHJlY3RzU2VnbWVudHMucHVzaCh0aGlzLmdldFJlY3RTZWdtZW50cyhyZWN0c1tpXSkpO1xyXG4gICAgY29uc3QgZmluYWxTZWdtZW50cyA9IFtdO1xyXG4gICAgY29uc3Qgb3ZlcmxhcHBlZFNlZ21lbnRzOiBMaW5lW10gPSBbXTtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmVjdHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgbGV0IGN1cnJlbnRSZWN0U2VnbWVudHMgPSB0aGlzLmdldFJlY3RTZWdtZW50cyhyZWN0c1tpXSk7XHJcbiAgICAgIGZvciAobGV0IGIgPSAwOyBiIDwgcmVjdHMubGVuZ3RoOyBiKyspIHtcclxuICAgICAgICAvLyBTa2lwIGNoZWNraW5nIHdpdGggdGhlIHJlY3RhbmdsZSBpdHNlbGYuXHJcbiAgICAgICAgaWYgKGIgIT0gaSkge1xyXG4gICAgICAgICAgY29uc3QgbmV3Q3VycmVudFJlY3RTZWdtZW50cyA9IFtdO1xyXG4gICAgICAgICAgY29uc3QgcmVjdHNSZWxhdGlvbiA9IHRoaXMucmVjdFJlY3RSZWxhdGlvbnNoaXAocmVjdHNbYl0sIHJlY3RzW2ldKTtcclxuICAgICAgICAgIC8vIElmIHRoZSAnaScgcmVjdGFuZ2xlIGlzIGluc2lkZSBvZiB0aGUgJ2InIG9yIGlmIHRoZSAnaScgaXMgZXF1YWwgdG8gYSBwcmV2aW91cyAnYicgdGhlbiBza2lwIGl0cyBzZWdtZW50cy5cclxuICAgICAgICAgIGlmIChyZWN0c1JlbGF0aW9uID09PSBSZWN0UmVjdFJlbGF0aW9uc2hpcFR5cGUuQkluc2lkZUEgfHwgKGkgPiBiICYmIHJlY3RzUmVsYXRpb24gPT09IFJlY3RSZWN0UmVsYXRpb25zaGlwVHlwZS5NYXRjaCkpIHtcclxuICAgICAgICAgICAgY3VycmVudFJlY3RTZWdtZW50cy5sZW5ndGggPSAwO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIH0gZWxzZSBpZiAocmVjdHNSZWxhdGlvbiA9PT0gUmVjdFJlY3RSZWxhdGlvbnNoaXBUeXBlLkludGVyc2VjdCB8fCByZWN0c1JlbGF0aW9uID09PSBSZWN0UmVjdFJlbGF0aW9uc2hpcFR5cGUuVGFuZ2VudCkge1xyXG4gICAgICAgICAgICBjb25zdCB0ZW1wT3ZlcmxhcHBlZFNlZ21lbnRzOiBMaW5lW10gPSBbXTtcclxuICAgICAgICAgICAgZm9yIChsZXQgayA9IDA7IGsgPCBjdXJyZW50UmVjdFNlZ21lbnRzLmxlbmd0aDsgaysrKSB7XHJcbiAgICAgICAgICAgICAgY29uc3Qgc2VnbWVudEludGVyc2VjdGlvbnMgPSBbXTtcclxuICAgICAgICAgICAgICBjb25zdCBsaW5lMSA9IGN1cnJlbnRSZWN0U2VnbWVudHNba107XHJcbiAgICAgICAgICAgICAgaWYgKCF0aGlzLmlzTGluZUluUmVjdChsaW5lMSwgcmVjdHNbYl0pKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBuID0gMDsgbiA8IHJlY3RzU2VnbWVudHNbYl0ubGVuZ3RoOyBuKyspIHtcclxuICAgICAgICAgICAgICAgICAgY29uc3QgbGluZTIgPSByZWN0c1NlZ21lbnRzW2JdW25dO1xyXG4gICAgICAgICAgICAgICAgICBjb25zdCBsaW5lc1JlbGF0aW9uc2hpcCA9IHRoaXMuZ2V0T3J0aG9MaW5lTGluZVJlbGF0aW9uc2hpcChsaW5lMSwgbGluZTIpO1xyXG4gICAgICAgICAgICAgICAgICBpZiAobGluZXNSZWxhdGlvbnNoaXAudHlwZSA9PT0gT3J0aG9MaW5lTGluZVJlbGF0aW9uc2hpcFR5cGUuSW50ZXJzZWN0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGxpbmVzUmVsYXRpb25zaGlwLmludGVyc2VjdGlvbilcclxuICAgICAgICAgICAgICAgICAgICAgIHNlZ21lbnRJbnRlcnNlY3Rpb25zLnB1c2gobGluZXNSZWxhdGlvbnNoaXAuaW50ZXJzZWN0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChsaW5lc1JlbGF0aW9uc2hpcC50eXBlID09PSBPcnRob0xpbmVMaW5lUmVsYXRpb25zaGlwVHlwZS5PdmVybGFwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGxpbmVzUmVsYXRpb25zaGlwLm92ZXJsYXApXHJcbiAgICAgICAgICAgICAgICAgICAgICB0ZW1wT3ZlcmxhcHBlZFNlZ21lbnRzLnB1c2gobGluZXNSZWxhdGlvbnNoaXAub3ZlcmxhcCk7XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChzZWdtZW50SW50ZXJzZWN0aW9ucy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgIGNvbnN0IHNvcnRlZEludGVyc2VjdGlvbnMgPSB0aGlzLnNvcnRQdHNCeURpc3RhbmNlKHNlZ21lbnRJbnRlcnNlY3Rpb25zLCBjdXJyZW50UmVjdFNlZ21lbnRzW2tdWzBdLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgY29uc3Qgc3BsaXRlZFNlZ21lbnRzID0gdGhpcy5saW5lc0JldHdlZW5QdHMoWy4uLnNvcnRlZEludGVyc2VjdGlvbnMsIGN1cnJlbnRSZWN0U2VnbWVudHNba11bMV1dKTtcclxuICAgICAgICAgICAgICAgICAgZm9yIChsZXQgcCA9IDA7IHAgPCBzcGxpdGVkU2VnbWVudHMubGVuZ3RoOyBwKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuaXNQdEluUmVjdChyZWN0c1tiXSwgR2VvbWV0cnlDYWxjLmxpbmVNaWRkbGVQdChzcGxpdGVkU2VnbWVudHNbcF0pKSlcclxuICAgICAgICAgICAgICAgICAgICAgIG5ld0N1cnJlbnRSZWN0U2VnbWVudHMucHVzaChzcGxpdGVkU2VnbWVudHNbcF0pO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICBuZXdDdXJyZW50UmVjdFNlZ21lbnRzLnB1c2goY3VycmVudFJlY3RTZWdtZW50c1trXSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0ZW1wT3ZlcmxhcHBlZFNlZ21lbnRzLmxlbmd0aCA+IDAgJiYgcmVjdHNSZWxhdGlvbiAhPT0gUmVjdFJlY3RSZWxhdGlvbnNoaXBUeXBlLlRhbmdlbnQpIHtcclxuICAgICAgICAgICAgICBmb3IgKGxldCBtID0gMDsgbSA8IHRlbXBPdmVybGFwcGVkU2VnbWVudHMubGVuZ3RoOyBtKyspIHtcclxuICAgICAgICAgICAgICAgIGlmICghb3ZlcmxhcHBlZFNlZ21lbnRzLmZpbmQoc2VnbWVudCA9PiBHZW9tZXRyeUNhbGMuYXJlTGluZXNFcXVhbChzZWdtZW50LCB0ZW1wT3ZlcmxhcHBlZFNlZ21lbnRzW21dKSkpXHJcbiAgICAgICAgICAgICAgICAgIG92ZXJsYXBwZWRTZWdtZW50cy5wdXNoKHRlbXBPdmVybGFwcGVkU2VnbWVudHNbbV0pO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBVcGRhdGUgdGhlIHNlZ21lbnRzIGFmdGVyIHByb2Nlc3NpbmcgdGhlbSB3aXRoIHRoaXMgaXRlcmF0aW9uIHJlY3RhbmdsZS5cclxuICAgICAgICAgICAgY3VycmVudFJlY3RTZWdtZW50cyA9IG5ld0N1cnJlbnRSZWN0U2VnbWVudHM7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIGlmIChjdXJyZW50UmVjdFNlZ21lbnRzLmxlbmd0aCA+IDApXHJcbiAgICAgICAgZmluYWxTZWdtZW50cy5wdXNoKC4uLmN1cnJlbnRSZWN0U2VnbWVudHMpO1xyXG4gICAgfVxyXG4gICAgaWYgKG92ZXJsYXBwZWRTZWdtZW50cy5sZW5ndGggPiAwKVxyXG4gICAgICBmaW5hbFNlZ21lbnRzLnB1c2goLi4ub3ZlcmxhcHBlZFNlZ21lbnRzKTtcclxuICAgIHJldHVybiBmaW5hbFNlZ21lbnRzO1xyXG4gIH1cclxuXHJcblxyXG4gIHN0YXRpYyBzdmdQYXRoRnJvbUxpbmVzKHNlZ21lbnRzOiBMaW5lW10pIHtcclxuICAgIGNvbnN0IHBhdGggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywgJ3BhdGgnKTtcclxuICAgIGNvbnN0IHBhdGhDb250ZW50ID0gW107XHJcbiAgICBjb25zdCBwcmVjaXNpb24gPSAzOyAvLyBUT0RPIFRha2UgZnJvbSB0aGUgZG9jdW1lbnQ/XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNlZ21lbnRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIHBhdGhDb250ZW50LnB1c2goYE0ke3NlZ21lbnRzW2ldWzBdLngudG9GaXhlZChwcmVjaXNpb24pfSwke3NlZ21lbnRzW2ldWzBdLnkudG9GaXhlZChwcmVjaXNpb24pfSAke3NlZ21lbnRzW2ldWzFdLngudG9GaXhlZChwcmVjaXNpb24pfSwke3NlZ21lbnRzW2ldWzFdLnkudG9GaXhlZChwcmVjaXNpb24pfWApO1xyXG4gICAgfVxyXG4gICAgcGF0aC5zZXRBdHRyaWJ1dGUoJ2QnLCBwYXRoQ29udGVudC5qb2luKCcnKSk7XHJcbiAgICByZXR1cm4gcGF0aDtcclxuICB9XHJcbn0iLCJpbXBvcnQgR2VuZXJpY3MgZnJvbSAnLi9nZW5lcmljcyc7XHJcblxyXG5leHBvcnQgY2xhc3MgRHJhd2luZyB7XHJcbiAgbmFtZTogc3RyaW5nO1xyXG4gIGlkOiBhbnk7IC8vIFRPRE9cclxuICBjb250ZW50OiBIVE1MRWxlbWVudDtcclxuICBzdmdDYW52YXM6IFNWR1NWR0VsZW1lbnQ7XHJcbiAgY29tbWVudHNHcm91cDogU1ZHR0VsZW1lbnQ7XHJcbiAgY29tbWVudHNDaGFuZ2VkOiBib29sZWFuO1xyXG4gIG1vdXNlUG9zaXRpb246IERPTVBvaW50O1xyXG4gIC8vIFpvb21cclxuICByZWFkb25seSBTVkdXSURUSCA9IDUwMDtcclxuICByZWFkb25seSBaT09NU1BFRUQgPSAxLjI1O1xyXG4gIC8vIFBhblxyXG4gIGFsbG93UGFubmluZyA9IGZhbHNlO1xyXG4gIHN2Z0luaXRpYWxDbGljazogRE9NUG9pbnQ7XHJcbiAgcHJldlZpZXdCb3g6IFNWR1JlY3Q7XHJcblxyXG4gIGNvbnN0cnVjdG9yKG5hbWU6IHN0cmluZywgaWQ6IGFueSkgeyAvLyBUT0RPIHN0cmluZyBvciBudW1iZXI/XHJcbiAgICB0aGlzLm5hbWUgPSBuYW1lO1xyXG4gICAgdGhpcy5pZCA9IGlkO1xyXG4gICAgdGhpcy5jb250ZW50O1xyXG5cclxuICAgIHRoaXMuem9vbSA9IHRoaXMuem9vbS5iaW5kKHRoaXMpO1xyXG4gIH1cclxuXHJcbiAgc2V0Q29udGVudChjb250ZW50OiBzdHJpbmcpIHtcclxuICAgIHRoaXMuY29udGVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgY29uc3QgZG9tcGFyc2VyID0gbmV3IERPTVBhcnNlcigpO1xyXG4gICAgdGhpcy5zdmdDYW52YXMgPSBkb21wYXJzZXIucGFyc2VGcm9tU3RyaW5nKGNvbnRlbnQsICdpbWFnZS9zdmcreG1sJykuZG9jdW1lbnRFbGVtZW50IGFzIHVua25vd24gYXMgU1ZHU1ZHRWxlbWVudDtcclxuICAgIHRoaXMuY29udGVudC5hcHBlbmRDaGlsZCh0aGlzLnN2Z0NhbnZhcyk7XHJcbiAgICAvLyBab29tXHJcbiAgICB0aGlzLnN2Z0NhbnZhcy5hZGRFdmVudExpc3RlbmVyKCd3aGVlbCcsIHRoaXMuem9vbSk7XHJcbiAgICAvLyBQYW5cclxuICAgIHRoaXMuc3ZnQ2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIGUgPT4ge1xyXG4gICAgICBpZiAoZS5idXR0b25zID09PSAyKSB7XHJcbiAgICAgICAgdGhpcy5hbGxvd1Bhbm5pbmcgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuc3ZnSW5pdGlhbENsaWNrID0gR2VuZXJpY3MuZ2V0UmVsYXRpdmVDb29yZHMoZSwgdGhpcy5zdmdDYW52YXMpO1xyXG4gICAgICAgIHRoaXMucHJldlZpZXdCb3ggPSB0aGlzLnN2Z0NhbnZhcy52aWV3Qm94LmJhc2VWYWw7IC8vIFZpZXdCb3ggdmFsdWUgYXQgc3RhcnQgIFxyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICAgIHRoaXMuc3ZnQ2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCAoKSA9PiB0aGlzLmFsbG93UGFubmluZyA9IGZhbHNlKTtcclxuICAgIHRoaXMuc3ZnQ2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCAoKSA9PiB0aGlzLmFsbG93UGFubmluZyA9IGZhbHNlKTtcclxuICAgIHRoaXMuc3ZnQ2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIGUgPT4ge1xyXG4gICAgICBpZiAoZS5idXR0b25zID09PSAyICYmIHRoaXMuYWxsb3dQYW5uaW5nID09PSBmYWxzZSkge1xyXG4gICAgICAgIHRoaXMuYWxsb3dQYW5uaW5nID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLnN2Z0luaXRpYWxDbGljayA9IEdlbmVyaWNzLmdldFJlbGF0aXZlQ29vcmRzKGUsIHRoaXMuc3ZnQ2FudmFzKTtcclxuICAgICAgICB0aGlzLnByZXZWaWV3Qm94ID0gdGhpcy5zdmdDYW52YXMudmlld0JveC5iYXNlVmFsOyAvLyBWaWV3Qm94IHZhbHVlIGF0IHN0YXJ0XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHRoaXMuYWxsb3dQYW5uaW5nKSB7XHJcbiAgICAgICAgdGhpcy5tb3VzZVBvc2l0aW9uID0gR2VuZXJpY3MuZ2V0UmVsYXRpdmVDb29yZHMoZSwgdGhpcy5zdmdDYW52YXMpO1xyXG4gICAgICAgIHRoaXMuc3ZnQ2FudmFzLnZpZXdCb3guYmFzZVZhbC54ID0gLXRoaXMubW91c2VQb3NpdGlvbi54IC0gKC10aGlzLnN2Z0luaXRpYWxDbGljay54IC0gdGhpcy5wcmV2Vmlld0JveC54KTtcclxuICAgICAgICB0aGlzLnN2Z0NhbnZhcy52aWV3Qm94LmJhc2VWYWwueSA9IC10aGlzLm1vdXNlUG9zaXRpb24ueSAtICgtdGhpcy5zdmdJbml0aWFsQ2xpY2sueSAtIHRoaXMucHJldlZpZXdCb3gueSk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgY3JlYXRlQ29tbWVudHNHcm91cCgpIHtcclxuICAgIHRoaXMuY29tbWVudHNHcm91cCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCAnZycpO1xyXG4gICAgLy8gZ3JvdXAuc2V0QXR0cmlidXRlKCdjb21tZW50cycsICcnKTtcclxuICAgIHRoaXMuc3ZnQ2FudmFzLmFwcGVuZENoaWxkKHRoaXMuY29tbWVudHNHcm91cCk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHpvb20oZTogV2hlZWxFdmVudCkge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgdGhpcy5tb3VzZVBvc2l0aW9uID0gR2VuZXJpY3MuZ2V0UmVsYXRpdmVDb29yZHMoZSwgdGhpcy5zdmdDYW52YXMpO1xyXG4gICAgbGV0IHpvb21GYWN0b3IgPSAoZS5kZWx0YVkgPiAwID8gdGhpcy5aT09NU1BFRUQgOiAxIC8gdGhpcy5aT09NU1BFRUQpO1xyXG4gICAgbGV0IHhQcm9wID0gKHRoaXMubW91c2VQb3NpdGlvbi54IC0gdGhpcy5zdmdDYW52YXMudmlld0JveC5iYXNlVmFsLngpIC8gdGhpcy5zdmdDYW52YXMudmlld0JveC5iYXNlVmFsLndpZHRoO1xyXG4gICAgbGV0IHhJbmMgPSB0aGlzLnN2Z0NhbnZhcy52aWV3Qm94LmJhc2VWYWwud2lkdGggKiB6b29tRmFjdG9yIC0gdGhpcy5zdmdDYW52YXMudmlld0JveC5iYXNlVmFsLndpZHRoO1xyXG4gICAgbGV0IHlQcm9wID0gKHRoaXMubW91c2VQb3NpdGlvbi55IC0gdGhpcy5zdmdDYW52YXMudmlld0JveC5iYXNlVmFsLnkpIC8gdGhpcy5zdmdDYW52YXMudmlld0JveC5iYXNlVmFsLmhlaWdodDtcclxuICAgIGxldCB5SW5jID0gdGhpcy5zdmdDYW52YXMudmlld0JveC5iYXNlVmFsLmhlaWdodCAqIHpvb21GYWN0b3IgLSB0aGlzLnN2Z0NhbnZhcy52aWV3Qm94LmJhc2VWYWwuaGVpZ2h0O1xyXG4gICAgaWYgKGUuZGVsdGFZID4gMCA/IHRoaXMuc3ZnQ2FudmFzLnZpZXdCb3guYmFzZVZhbC53aWR0aCA8IHRoaXMuU1ZHV0lEVEggKiAxMCA6IHRoaXMuc3ZnQ2FudmFzLnZpZXdCb3guYmFzZVZhbC53aWR0aCA+IHRoaXMuU1ZHV0lEVEggLyAxMCkge1xyXG4gICAgICB0aGlzLnN2Z0NhbnZhcy52aWV3Qm94LmJhc2VWYWwueCAtPSB4SW5jICogeFByb3A7XHJcbiAgICAgIHRoaXMuc3ZnQ2FudmFzLnZpZXdCb3guYmFzZVZhbC53aWR0aCArPSB4SW5jO1xyXG4gICAgICB0aGlzLnN2Z0NhbnZhcy52aWV3Qm94LmJhc2VWYWwueSAtPSB5SW5jICogeVByb3A7XHJcbiAgICAgIHRoaXMuc3ZnQ2FudmFzLnZpZXdCb3guYmFzZVZhbC5oZWlnaHQgKz0geUluYztcclxuICAgIH1cclxuICB9XHJcbn0iLCJpbXBvcnQgR2VuZXJpY3MgZnJvbSAnLi9nZW5lcmljcyc7XHJcbmltcG9ydCB7IERyYXdpbmcgfSBmcm9tICcuL2RyYXdpbmcnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3Mge1xyXG5cclxuICAvKioqKioqIEJBU0lDIEdPT0dMRSBBUEkgRlVOQ1RJT05TICoqKioqKi9cclxuXHJcbiAgLyoqXHJcbiAgICogUmV0cmlldmVzIGlkIGFuZCBuYW1lIG9mIHRoZSBmaWxlcyB0aGF0IG1hdGNoIHRoZSBxdWVyeSBvYmplY3QuXHJcbiAgICogQHBhcmFtIHtPYmplY3R9IHF1ZXJ5IE9iamVjdCB3aXRoIG9wdGlvbmFsIGVudHJpZXM6IG5hbWUgKHN0ciksIHBhcmVudElkIChzdHIpLCB0cmFzaGVkIChib29sKSwgZXhjbHVkZU5hbWUgKHN0ciksIGFuZCBvbmx5Rm9sZGVyIChib29sKVxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBtZXRhZGF0YUZpZWxkcyBPcHRpb25hbCwgYnkgZGVmYXVsdCBpdCBpbmNsdWRlcyBpZCBhbmQgbmFtZSBvZiB0aGUgZmlsZSwgYnV0IGFueSBvdGhlciBjYW4gYmUgYWRkZWQ6ICdmaWVsZCwgZmllbGQnXHJcbiAgICovXHJcbiAgc3RhdGljIGxpc3RGaWxlcyhxdWVyeSwgbWV0YWRhdGFGaWVsZHMpIHtcclxuICAgIGNvbnN0IHF1ZXJ5SXRlbXMgPSBbXTtcclxuICAgIGlmIChxdWVyeS5uYW1lKSBxdWVyeUl0ZW1zLnB1c2goJ25hbWU9XFwnJyArIHF1ZXJ5Lm5hbWUgKyAnXFwnJyk7XHJcbiAgICBpZiAocXVlcnkucGFyZW50SWQpIHF1ZXJ5SXRlbXMucHVzaCgnXFwnJyArIHF1ZXJ5LnBhcmVudElkICsgJ1xcJyBpbiBwYXJlbnRzJyk7XHJcbiAgICBpZiAocXVlcnkudHJhc2hlZCA9PT0gZmFsc2UpIHF1ZXJ5SXRlbXMucHVzaCgndHJhc2hlZD1mYWxzZScpO1xyXG4gICAgaWYgKHF1ZXJ5LmV4Y2x1ZGVOYW1lKSBxdWVyeUl0ZW1zLnB1c2goJ25vdCBuYW1lIGNvbnRhaW5zIFxcJycgKyBxdWVyeS5leGNsdWRlTmFtZSArICdcXCcnKTtcclxuICAgIGlmIChxdWVyeS5vbmx5Rm9sZGVyKSBxdWVyeUl0ZW1zLnB1c2goJ21pbWVUeXBlPVxcJ2FwcGxpY2F0aW9uL3ZuZC5nb29nbGUtYXBwcy5mb2xkZXJcXCcnKTtcclxuICAgIGxldCByZXF1ZXN0ID0gZ2FwaS5jbGllbnQuZHJpdmUuZmlsZXMubGlzdCh7XHJcbiAgICAgICdwYWdlU2l6ZSc6IDE1LFxyXG4gICAgICAnZmllbGRzJzogYG5leHRQYWdlVG9rZW4sIGZpbGVzKGlkLCBuYW1lJHttZXRhZGF0YUZpZWxkcyA/ICcsICcgKyBtZXRhZGF0YUZpZWxkcyA6ICcnfSlgLFxyXG4gICAgICAncSc6IHF1ZXJ5SXRlbXMuam9pbignIGFuZCAnKVxyXG4gICAgfSk7XHJcbiAgICByZXF1ZXN0LnRoZW4ocmVzID0+IHtcclxuICAgICAgY29uc3QgZmlsZXMgPSByZXMucmVzdWx0LmZpbGVzO1xyXG4gICAgICBpZiAoZmlsZXMgJiYgZmlsZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGZpbGVzKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnTm8gZmlsZXMgZm91bmQgd2l0aCB0aGlzIHF1ZXJ5OicsIHF1ZXJ5SXRlbXMuam9pbignIGFuZCAnKSk7XHJcbiAgICAgIH1cclxuICAgIH0sIGVyciA9PiB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyLmJvZHkpO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gcmVxdWVzdDtcclxuICB9XHJcblxyXG5cclxuICAvKipcclxuICAgKiBSZXR1cm5zIGEgcHJvbWlzZSB3aXRoIHRoZSBjb250ZW50cyBvZiB0aGUgZmlsZS5cclxuICAgKiBAcGFyYW0ge1N0cmluZ30gZmlsZUlkXHJcbiAgICovXHJcbiAgc3RhdGljIGdldEZpbGVDb250ZW50KGZpbGVJZCkge1xyXG4gICAgbGV0IHJlcXVlc3QgPSBnYXBpLmNsaWVudC5kcml2ZS5maWxlcy5nZXQoe1xyXG4gICAgICBmaWxlSWQ6IGZpbGVJZCxcclxuICAgICAgYWx0OiAnbWVkaWEnXHJcbiAgICB9KTtcclxuICAgIHJlcXVlc3QudGhlbihyZXMgPT4ge1xyXG4gICAgICBpZiAocmVzLnN0YXR1cyA9PT0gMjAwKVxyXG4gICAgICAgIGNvbnNvbGUubG9nKCdGaWxlIHdpdGggaWQgJyArIGZpbGVJZCArICcgZmV0Y2hlZCBzdWNjZXNzZnVsbHkuJyk7XHJcbiAgICB9LCBlcnIgPT4ge1xyXG4gICAgICBjb25zb2xlLmVycm9yKGVyci5ib2R5KTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHJlcXVlc3Q7XHJcbiAgfVxyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogUmV0dXJucyBhIHByb21pc2Ugd2l0aCB0aGUgcmVxdWVzdGVkIGRhdGEgb2YgdGhlIGZpbGUuXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IGZpbGVJZCBUaGUgaWQgb2YgdGhlIGZpbGUgdG8gZ2V0IHRoZSBkYXRhIG9mLlxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBmaWVsZHMgVGhlIGRhdGEgdG8gYmUgZmV0Y2hlZCBpbiBmb3JtYXQ6ICdmaWVsZDEsIGZpZWxkMicuXHJcbiAgICovXHJcbiAgc3RhdGljIGdldEZpbGVEYXRhKGZpbGVJZCwgZmllbGRzKSB7XHJcbiAgICBsZXQgcmVxdWVzdCA9IGdhcGkuY2xpZW50LmRyaXZlLmZpbGVzLmdldCh7XHJcbiAgICAgIGZpbGVJZDogZmlsZUlkLFxyXG4gICAgICBmaWVsZHM6IGZpZWxkc1xyXG4gICAgfSk7XHJcbiAgICByZXF1ZXN0LnRoZW4ocmVzID0+IHtcclxuICAgICAgaWYgKHJlcy5zdGF0dXMgPT09IDIwMCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdGaWxlIGRhdGEgZmV0Y2hlZCBzdWNjZXNmdWxseS4nKTtcclxuICAgICAgfVxyXG4gICAgfSwgZXJyID0+IHtcclxuICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gcmVxdWVzdDtcclxuICB9XHJcblxyXG5cclxuICAvKipcclxuICAgKiBDcmVhdGVzIGEgbmV3IGZvbGRlciBhbmQgcmV0dXJucyBpdHMgaWQuXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IHRpdGxlIFRoZSBuYW1lIG9mIHRoZSBmb2xkZXIuXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IHBhcmVudElkIE9wdGlvbmFsIGlkIG9mIHRoZSBwYXJlbnQgZm9sZGVyLCBpZiBub25lIGl0IHdpbGwgYmUgY3JlYXRlZCBvbiB0aGUgcm9vdC5cclxuICAgKi9cclxuICBzdGF0aWMgY3JlYXRlRm9sZGVyKHRpdGxlLCBwYXJlbnRJZCA9ICdkcml2ZScpIHtcclxuICAgIGNvbnN0IGJvZHkgPSB7XHJcbiAgICAgIFwibmFtZVwiOiB0aXRsZSxcclxuICAgICAgXCJtaW1lVHlwZVwiOiBcImFwcGxpY2F0aW9uL3ZuZC5nb29nbGUtYXBwcy5mb2xkZXJcIixcclxuICAgICAgXCJwYXJlbnRzXCI6IHBhcmVudElkICE9PSAnZHJpdmUnID8gW3BhcmVudElkXSA6IFtdXHJcbiAgICB9XHJcbiAgICBjb25zdCByZXF1ZXN0ID0gZ2FwaS5jbGllbnQucmVxdWVzdCh7XHJcbiAgICAgICdwYXRoJzogJ2h0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL2RyaXZlL3YzL2ZpbGVzLycsXHJcbiAgICAgICdtZXRob2QnOiAnUE9TVCcsXHJcbiAgICAgICdib2R5JzogYm9keVxyXG4gICAgfSk7XHJcbiAgICByZXF1ZXN0LnRoZW4ocmVzID0+IHtcclxuICAgICAgY29uc29sZS5sb2codGl0bGUgKyAnIGZvbGRlciBjcmVhdGVkLiBJZDogJyArIEpTT04ucGFyc2UocmVzLmJvZHkpLmlkKTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHJlcXVlc3Q7XHJcbiAgfVxyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogVXBsb2FkIGEgZmlsZSB0byB0aGUgc3BlY2lmaWMgZm9sZGVyLlxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBmaWxlQ29udGVudCBUaGUgY29udGVudCBvZiB0aGUgZmlsZSBhcyBhIHN0cmluZy5cclxuICAgKiBAcGFyYW0ge1N0cmluZ30gZmlsZU1pbWVUeXBlIFRoZSBNSU1FIFR5cGUgb2YgdGhlIGZpbGUuIEZvciBleGFtcGxlOiAnYXBwbGljYXRpb24vanNvbidcclxuICAgKiBAcGFyYW0ge1N0cmluZ30gZmlsZU5hbWUgTmFtZSBmb3IgdGhlIGZpbGUuXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IGZvbGRlcklkIElkIG9mIHRoZSBwYXJlbnQgZm9sZGVyLlxyXG4gICAqL1xyXG4gIHN0YXRpYyB1cGxvYWRGaWxlKGZpbGVDb250ZW50LCBmaWxlTWltZVR5cGUsIGZpbGVOYW1lLCBmb2xkZXJJZCkge1xyXG4gICAgY29uc3QgZmlsZSA9IG5ldyBCbG9iKFtmaWxlQ29udGVudF0sIHsgdHlwZTogZmlsZU1pbWVUeXBlIH0pO1xyXG4gICAgY29uc3QgbWV0YWRhdGEgPSB7XHJcbiAgICAgICduYW1lJzogZmlsZU5hbWUsXHJcbiAgICAgICdtaW1lVHlwZSc6IGZpbGVNaW1lVHlwZSxcclxuICAgICAgJ3BhcmVudHMnOiBbZm9sZGVySWRdXHJcbiAgICB9O1xyXG4gICAgY29uc3QgYWNjZXNzVG9rZW4gPSBnYXBpLmF1dGguZ2V0VG9rZW4oKS5hY2Nlc3NfdG9rZW47IC8vIEdhcGkgaXMgdXNlZCBmb3IgcmV0cmlldmluZyB0aGUgYWNjZXNzIHRva2VuLlxyXG4gICAgY29uc3QgZm9ybSA9IG5ldyBGb3JtRGF0YSgpO1xyXG4gICAgZm9ybS5hcHBlbmQoJ21ldGFkYXRhJywgbmV3IEJsb2IoW0pTT04uc3RyaW5naWZ5KG1ldGFkYXRhKV0sIHsgdHlwZTogJ2FwcGxpY2F0aW9uL2pzb24nIH0pKTtcclxuICAgIGZvcm0uYXBwZW5kKCdmaWxlJywgZmlsZSk7XHJcblxyXG4gICAgbGV0IHJlcXVlc3QgPSBmZXRjaCgnaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vdXBsb2FkL2RyaXZlL3YzL2ZpbGVzP3VwbG9hZFR5cGU9bXVsdGlwYXJ0JmZpZWxkcz1pZCcsIHtcclxuICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgIGhlYWRlcnM6IG5ldyBIZWFkZXJzKHsgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyBhY2Nlc3NUb2tlbiB9KSxcclxuICAgICAgYm9keTogZm9ybVxyXG4gICAgfSk7XHJcbiAgICByZXF1ZXN0LnRoZW4ocmVzID0+IHtcclxuICAgICAgaWYgKHJlcy5vayA9PT0gdHJ1ZSAmJiByZXMuc3RhdHVzID09PSAyMDApIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnVXBsb2FkIG9mICcgKyBmaWxlTmFtZSArICcgc3VjY2Vzc2Z1bC4nKTtcclxuICAgICAgfVxyXG4gICAgfSwgZXJyID0+IHtcclxuICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gcmVxdWVzdDtcclxuICB9XHJcblxyXG5cclxuICAvKipcclxuICAgKiBVcGRhdGUgdGhlIGNvbnRlbnRzIG9mIGEgZmlsZS5cclxuICAgKiBAcGFyYW0ge1N0cmluZ30gZmlsZUNvbnRlbnQgVGhlIGNvbnRlbnQgb2YgdGhlIGZpbGUgYXMgYSBzdHJpbmcuXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IGZpbGVNaW1lVHlwZSBUaGUgTUlNRSBUeXBlIG9mIHRoZSBmaWxlLiBGb3IgZXhhbXBsZTogJ2FwcGxpY2F0aW9uL2pzb24nLlxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBmaWxlSWQgSUQgb2YgdGhlIGZpbGUgdG8gdXBkYXRlIGl0cyBjb250ZW50LlxyXG4gICAqL1xyXG4gIHN0YXRpYyB1cGRhdGVGaWxlQ29udGVudChmaWxlQ29udGVudCwgZmlsZU1pbWVUeXBlLCBmaWxlSWQpIHtcclxuICAgIGNvbnN0IGZpbGUgPSBuZXcgQmxvYihbZmlsZUNvbnRlbnRdLCB7IHR5cGU6IGZpbGVNaW1lVHlwZSB9KTtcclxuICAgIGNvbnN0IG1ldGFkYXRhID0ge1xyXG4gICAgICAnbWltZVR5cGUnOiBmaWxlTWltZVR5cGVcclxuICAgIH07XHJcbiAgICBjb25zdCBhY2Nlc3NUb2tlbiA9IGdhcGkuYXV0aC5nZXRUb2tlbigpLmFjY2Vzc190b2tlbjsgLy8gR2FwaSBpcyB1c2VkIGZvciByZXRyaWV2aW5nIHRoZSBhY2Nlc3MgdG9rZW4uXHJcbiAgICBjb25zdCBmb3JtID0gbmV3IEZvcm1EYXRhKCk7XHJcbiAgICBmb3JtLmFwcGVuZCgnbWV0YWRhdGEnLCBuZXcgQmxvYihbSlNPTi5zdHJpbmdpZnkobWV0YWRhdGEpXSwgeyB0eXBlOiAnYXBwbGljYXRpb24vanNvbicgfSkpO1xyXG4gICAgZm9ybS5hcHBlbmQoJ2ZpbGUnLCBmaWxlKTtcclxuXHJcbiAgICBsZXQgcmVxdWVzdCA9IGZldGNoKGBodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS91cGxvYWQvZHJpdmUvdjMvZmlsZXMvJHtmaWxlSWR9P3VwbG9hZFR5cGU9bXVsdGlwYXJ0YCwgeyAvLyBPdGhlcndpc2UgdHJ5IHVwbG9hZFR5cGU9bWVkaWFcclxuICAgICAgbWV0aG9kOiAnUEFUQ0gnLFxyXG4gICAgICBoZWFkZXJzOiBuZXcgSGVhZGVycyh7ICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgYWNjZXNzVG9rZW4gfSksXHJcbiAgICAgIGJvZHk6IGZvcm0sXHJcbiAgICB9KTtcclxuICAgIHJlcXVlc3QudGhlbihyZXMgPT4ge1xyXG4gICAgICBpZiAocmVzLm9rID09PSB0cnVlICYmIHJlcy5zdGF0dXMgPT09IDIwMCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdVcGRhdGUgc3VjY2Vzc2Z1bC4nKTtcclxuICAgICAgfVxyXG4gICAgfSwgZXJyID0+IHtcclxuICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gcmVxdWVzdDtcclxuICB9XHJcblxyXG5cclxuICAvKipcclxuICAgKiBWZXJzaW9uIG9mIHVwbG9hZCBmaWxlIGZyb20gZG9jdW1lbnRhdGlvbiB0aGF0IGRvZXNudCB3b3JrLlxyXG4gICAqIEl0IGp1c3QgY3JlYXRlcyBhbiB1bnRpdGxlZCBlbXB0eSBmaWxlIGluIHRoZSBkcml2ZSByb290LlxyXG4gICAqIEBwYXJhbSB7Kn0gZmlsZUNvbnRlbnQgXHJcbiAgICogQHBhcmFtIHsqfSBmaWxlTWltZVR5cGUgXHJcbiAgICogQHBhcmFtIHsqfSBmaWxlTmFtZSBcclxuICAgKiBAcGFyYW0geyp9IGZvbGRlcklkIFxyXG4gICAqL1xyXG4gIC8vIHN0YXRpYyB1cGxvYWRGaWxlMihmaWxlQ29udGVudCwgZmlsZU1pbWVUeXBlLCBmaWxlTmFtZSwgZm9sZGVySWQpIHtcclxuICAvLyAgIGNvbnN0IGZpbGUgPSBuZXcgQmxvYihbZmlsZUNvbnRlbnRdLCB7IHR5cGU6IGZpbGVNaW1lVHlwZSB9KTtcclxuICAvLyAgIGNvbnN0IGZpbGVNZXRhZGF0YSA9IHtcclxuICAvLyAgICAgJ25hbWUnOiBmaWxlTmFtZSxcclxuICAvLyAgICAgJ3BhcmVudHMnOiBbZm9sZGVySWRdXHJcbiAgLy8gICB9O1xyXG4gIC8vICAgY29uc3QgZm9ybSA9IG5ldyBGb3JtRGF0YSgpO1xyXG4gIC8vICAgZm9ybS5hcHBlbmQoJ21ldGFkYXRhJywgbmV3IEJsb2IoW0pTT04uc3RyaW5naWZ5KGZpbGVNZXRhZGF0YSldLCB7IHR5cGU6ICdhcHBsaWNhdGlvbi9qc29uJyB9KSk7XHJcbiAgLy8gICBmb3JtLmFwcGVuZCgnZmlsZScsIGZpbGUpO1xyXG4gIC8vICAgY29uc3QgbWVkaWEgPSB7XHJcbiAgLy8gICAgIG1pbWVUeXBlOiBmaWxlTWltZVR5cGUsXHJcbiAgLy8gICAgIGJvZHk6IGZvcm1cclxuICAvLyAgIH07XHJcbiAgLy8gICByZXR1cm4gZ2FwaS5jbGllbnQuZHJpdmUuZmlsZXMuY3JlYXRlKHtcclxuICAvLyAgICAgcmVzb3VyY2U6IGZpbGVNZXRhZGF0YSxcclxuICAvLyAgICAgbWVkaWE6IG1lZGlhLFxyXG4gIC8vICAgICBmaWVsZHM6ICdpZCdcclxuICAvLyAgIH0sIChlcnIsIGZpbGUpID0+IHtcclxuICAvLyAgICAgaWYgKGVycikge1xyXG4gIC8vICAgICAgIC8vIEhhbmRsZSBlcnJvclxyXG4gIC8vICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICAvLyAgICAgfSBlbHNlIHtcclxuICAvLyAgICAgICBjb25zb2xlLmxvZygnRmlsZSBJZDogJywgZmlsZS5pZCk7XHJcbiAgLy8gICAgIH1cclxuICAvLyAgIH0pO1xyXG4gIC8vIH1cclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIFJlbmFtZSBhIGZpbGUuXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IGZpbGVJZCBJRCBvZiB0aGUgZmlsZSB0byByZW5hbWUuXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IG5ld1RpdGxlIE5ldyB0aXRsZSBmb3IgdGhlIGZpbGUuXHJcbiAgICovXHJcbiAgc3RhdGljIHJlbmFtZUZpbGUoZmlsZUlkLCBuZXdUaXRsZSkge1xyXG4gICAgY29uc3QgcmVxdWVzdCA9IGdhcGkuY2xpZW50LmRyaXZlLmZpbGVzLnVwZGF0ZSh7XHJcbiAgICAgICdmaWxlSWQnOiBmaWxlSWQsXHJcbiAgICAgICduYW1lJzogbmV3VGl0bGUsXHJcbiAgICAgICd1cGxvYWRUeXBlJzogJ21lZGlhJ1xyXG4gICAgfSk7XHJcbiAgICByZXF1ZXN0LnRoZW4ocmVzID0+IHtcclxuICAgICAgLy9jb25zb2xlLmxvZyhyZXMpO1xyXG4gICAgfSwgcmVqID0+IHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgcmVuYW1pbmcgZmlsZTogJyArIGZpbGVJZCwgcmVqKTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHJlcXVlc3Q7XHJcbiAgfVxyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogTW92ZXMgYSBmaWxlIG9yIGZvbGRlciBpbnNpZGUgYW5vdGhlciBmb2xkZXIuXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IGZpbGVJZCBcclxuICAgKiBAcGFyYW0ge1N0cmluZ30gcGFyZW50SWQgXHJcbiAgICovXHJcbiAgc3RhdGljIG1vdmVGaWxlVjIoZmlsZUlkLCBwYXJlbnRJZCkge1xyXG4gICAgY29uc3QgcmVxdWVzdCA9IGdhcGkuY2xpZW50LnJlcXVlc3Qoe1xyXG4gICAgICAncGF0aCc6ICdodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9kcml2ZS92Mi9maWxlcy8nICsgZmlsZUlkICsgJy9wYXJlbnRzJyxcclxuICAgICAgJ21ldGhvZCc6ICdQT1NUJyxcclxuICAgICAgJ2hlYWRlcnMnOiB7XHJcbiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xyXG4gICAgICB9LFxyXG4gICAgICAnYm9keSc6IHtcclxuICAgICAgICAnaWQnOiBwYXJlbnRJZFxyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICAgIHJlcXVlc3QudGhlbihyZXMgPT4ge1xyXG4gICAgICBjb25zb2xlLmxvZyhyZXMpO1xyXG4gICAgfSwgcmVqID0+IHtcclxuICAgICAgY29uc29sZS5sb2cocmVqKTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHJlcXVlc3Q7XHJcbiAgfVxyXG5cclxuXHJcbiAgc3RhdGljIG1vdmVGaWxlKGZpbGVJZCwgcGFyZW50SWQpIHtcclxuICAgIGNvbnN0IGJvZHkgPSB7ICdpZCc6IHBhcmVudElkIH07XHJcbiAgICBjb25zdCByZXF1ZXN0ID0gZ2FwaS5jbGllbnQuZHJpdmUucGFyZW50cy5pbnNlcnQoe1xyXG4gICAgICAnZmlsZUlkJzogZmlsZUlkLFxyXG4gICAgICAncmVzb3VyY2UnOiBib2R5XHJcbiAgICB9KTtcclxuICAgIHJlcXVlc3QuZXhlY3V0ZShmdW5jdGlvbiAocmVzcCkgeyB9KTtcclxuICB9XHJcblxyXG5cclxuICAvKipcclxuICAgKiBQZXJtYW5lbnRseSBkZWxldGUgYSBmaWxlLCBza2lwcGluZyB0aGUgdHJhc2guXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IGZpbGVJZCBJRCBvZiB0aGUgZmlsZSB0byBkZWxldGUuXHJcbiAgICovXHJcbiAgc3RhdGljIGRlbGV0ZUZpbGUoZmlsZUlkKSB7XHJcbiAgICBsZXQgcmVxdWVzdCA9IGdhcGkuY2xpZW50LmRyaXZlLmZpbGVzLmRlbGV0ZSh7XHJcbiAgICAgICdmaWxlSWQnOiBmaWxlSWRcclxuICAgIH0pO1xyXG4gICAgcmVxdWVzdC50aGVuKHJlcyA9PiB7XHJcbiAgICAgIGNvbnNvbGUubG9nKHJlcyk7XHJcbiAgICB9LCByZWogPT4ge1xyXG4gICAgICBjb25zb2xlLmxvZyhyZWopO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gcmVxdWVzdDtcclxuICB9XHJcblxyXG5cclxuICAvKipcclxuICAgKiBOT1QgV09SS0lORy4gVEhJUyBXT1VMRCBPTkxZIE1BS0UgU0VOU0UgSU4gQSBTRVJWRVIuXHJcbiAgICogU3Vic2NyaWJlcyB0byBjaGFuZ2VzIHRvIGEgZmlsZS5cclxuICAgKiBAcGFyYW0ge1N0cmluZ30gZmlsZUlkIElEIG9mIHRoZSBmaWxlIHRvIHdhdGNoLlxyXG4gICAqL1xyXG4gIC8vIHN0YXRpYyB3YXRjaEZpbGUoZmlsZUlkKSB7XHJcbiAgLy8gICBjb25zdCBib2R5ID0ge1xyXG4gIC8vICAgICBcImtpbmRcIjogXCJhcGkjY2hhbm5lbFwiLFxyXG4gIC8vICAgICBcImlkXCI6IFwiMDEyMzQ1NjctODlhYi1jZGVmLTAxMjM0NTY3ODlhYlwiLCAvLyBUT0RPIFVzZSBhIHV1aWQgZ2VuZXJhdG9yXHJcbiAgLy8gICAgIC8vXCJyZXNvdXJjZUlkXCI6IHN0cmluZyxcclxuICAvLyAgICAgLy9cInJlc291cmNlVXJpXCI6IHN0cmluZyxcclxuICAvLyAgICAgXCJ0eXBlXCI6IFwid2ViX2hvb2tcIixcclxuICAvLyAgICAgXCJhZGRyZXNzXCI6IFwiaHR0cHM6Ly92aXN1YWxhcnFhcHAucmFtb25jYXJjZWxlcy5jb21cIlxyXG4gIC8vICAgfVxyXG4gIC8vICAgY29uc3QgcmVxdWVzdCA9IGdhcGkuY2xpZW50LnJlcXVlc3Qoe1xyXG4gIC8vICAgICAncGF0aCc6IGBodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9kcml2ZS92My9maWxlcy8ke2ZpbGVJZH0vd2F0Y2hgLFxyXG4gIC8vICAgICAnbWV0aG9kJzogJ1BPU1QnLFxyXG4gIC8vICAgICAnYm9keSc6IGJvZHlcclxuICAvLyAgIH0pO1xyXG4gIC8vICAgcmVxdWVzdC50aGVuKHJlcyA9PiB7XHJcbiAgLy8gICAgIGNvbnNvbGUubG9nKHJlcyk7XHJcbiAgLy8gICB9KTtcclxuICAvLyAgIHJldHVybiByZXF1ZXN0O1xyXG4gIC8vIH1cclxuXHJcbiAgLy8gTk9UIFdPUktJTkcuIFRISVMgV09VTEQgT05MWSBNQUtFIFNFTlNFIElOIEEgU0VSVkVSLlxyXG4gIC8vIHN0YXRpYyBzdG9wV2F0Y2hpbmcoY2hhbm5lbElkLCByZXNvdXJjZUlkKSB7XHJcbiAgLy8gICBjb25zdCBib2R5ID0ge1xyXG4gIC8vICAgICBcImlkXCI6IGNoYW5uZWxJZCwgLy8gU2hvdWxkIGJlIHRoZSBvbmUgdG8gc3RvcCBjcmVhdGVkIHByZXZpb3VzbHkuXHJcbiAgLy8gICAgIFwicmVzb3VyY2VJZFwiOiByZXNvdXJjZUlkXHJcbiAgLy8gICB9XHJcbiAgLy8gICBjb25zdCByZXF1ZXN0ID0gZ2FwaS5jbGllbnQucmVxdWVzdCh7XHJcbiAgLy8gICAgICdwYXRoJzogYGh0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL2RyaXZlL3YzL2NoYW5uZWxzL3N0b3BgLFxyXG4gIC8vICAgICAnbWV0aG9kJzogJ1BPU1QnLFxyXG4gIC8vICAgICAnYm9keSc6IGJvZHlcclxuICAvLyAgIH0pO1xyXG4gIC8vICAgcmVxdWVzdC50aGVuKHJlcyA9PiB7XHJcbiAgLy8gICAgIGNvbnNvbGUubG9nKHJlcyk7XHJcbiAgLy8gICB9KTtcclxuICAvLyAgIHJldHVybiByZXF1ZXN0O1xyXG4gIC8vIH1cclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIENyZWF0ZXMgcGVybWlzc2lvbnMgZm9yIGEgc3BlY2lmaWMgZmlsZS5cclxuICAgKiBUaGUgZGVsYXkgaGFzIGJlZW4gYWRkZWQgYmVjYXVzZSB0aGUgR0QgQVBJIGRvZXNudCBhbGxvdyB0byBjcmVhdGUgc2V2ZXJhbCBwZXJtaXNzaW9ucyBhdCB0aGUgc2FtZSB0aW1lLlxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBmaWxlSWQgXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IGVtYWlsQWRkcmVzc1xyXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBkZWxheSBBbW91bnQgb2YgbWlsbGlzZWNvbmRzIHRvIHdhaXQgYmVmb3JlIHNlbmRpbmcgdGhlIHJlcXVlc3QuXHJcbiAgICovXHJcbiAgc3RhdGljIHNoYXJlRmlsZShmaWxlSWQsIGVtYWlsQWRkcmVzcywgZGVsYXkgPSAwKSB7XHJcbiAgICBjb25zdCBkZWxheWVkUHJvbWlzZSA9IG5ldyBQcm9taXNlKHJlcyA9PiBzZXRUaW1lb3V0KHJlcywgZGVsYXkpKTtcclxuICAgIHJldHVybiBkZWxheWVkUHJvbWlzZS50aGVuKHJlcyA9PiB7XHJcbiAgICAgIGNvbnN0IHJlcXVlc3QgPSBnYXBpLmNsaWVudC5yZXF1ZXN0KHtcclxuICAgICAgICAncGF0aCc6IGBodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9kcml2ZS92My9maWxlcy8ke2ZpbGVJZH0vcGVybWlzc2lvbnM/c2VuZE5vdGlmaWNhdGlvbkVtYWlsPWZhbHNlJmZpZWxkcz1pZCxkaXNwbGF5TmFtZSxlbWFpbEFkZHJlc3MscGhvdG9MaW5rLHJvbGVgLFxyXG4gICAgICAgICdtZXRob2QnOiAnUE9TVCcsXHJcbiAgICAgICAgJ2hlYWRlcnMnOiB7XHJcbiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXHJcbiAgICAgICAgfSxcclxuICAgICAgICAnYm9keSc6IHtcclxuICAgICAgICAgICdyb2xlJzogJ3dyaXRlcicsIC8vIG93bmVyLCB3cml0ZXIsIGNvbW1lbnRlciwgcmVhZGVyXHJcbiAgICAgICAgICAndHlwZSc6ICd1c2VyJyxcclxuICAgICAgICAgICdlbWFpbEFkZHJlc3MnOiBlbWFpbEFkZHJlc3NcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgICByZXF1ZXN0LnRoZW4ocmVzID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhyZXMpO1xyXG4gICAgICB9KTtcclxuICAgICAgcmV0dXJuIHJlcXVlc3Q7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBPUklHSU5BTCBDT0RFIFdJVEhPVVQgREVMQVlcclxuICAgIC8vIGNvbnN0IHJlcXVlc3QgPSBnYXBpLmNsaWVudC5yZXF1ZXN0KHtcclxuICAgIC8vICAgJ3BhdGgnOiAnc2FtZSBwYXRoIGFzIGFib3ZlJyxcclxuICAgIC8vICAgJ21ldGhvZCc6ICdQT1NUJyxcclxuICAgIC8vICAgJ2hlYWRlcnMnOiB7XHJcbiAgICAvLyAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xyXG4gICAgLy8gICB9LFxyXG4gICAgLy8gICAnYm9keSc6IHtcclxuICAgIC8vICAgICAncm9sZSc6ICd3cml0ZXInLCAvLyBvd25lciwgd3JpdGVyLCBjb21tZW50ZXIsIHJlYWRlclxyXG4gICAgLy8gICAgICd0eXBlJzogJ3VzZXInLFxyXG4gICAgLy8gICAgICdlbWFpbEFkZHJlc3MnOiBlbWFpbEFkZHJlc3NcclxuICAgIC8vICAgfVxyXG4gICAgLy8gfSk7XHJcbiAgICAvLyByZXF1ZXN0LnRoZW4ocmVzID0+IHtcclxuICAgIC8vICAgY29uc29sZS5sb2cocmVzKTtcclxuICAgIC8vIH0pO1xyXG4gICAgLy8gcmV0dXJuIHJlcXVlc3Q7XHJcbiAgfVxyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogRGVsZXRlcyBwZXJtaXNzaW9ucyBmb3IgYSBzcGVjaWZpYyBmaWxlLlxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBmaWxlSWQgXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IHBlcm1pc3Npb25JZCBcclxuICAgKi9cclxuICBzdGF0aWMgc3RvcFNoYXJpbmdGaWxlKGZpbGVJZCwgcGVybWlzc2lvbklkKSB7XHJcbiAgICBjb25zdCByZXF1ZXN0ID0gZ2FwaS5jbGllbnQucmVxdWVzdCh7XHJcbiAgICAgICdwYXRoJzogJ2h0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL2RyaXZlL3YzL2ZpbGVzLycgKyBmaWxlSWQgKyAnL3Blcm1pc3Npb25zLycgKyBwZXJtaXNzaW9uSWQsXHJcbiAgICAgICdtZXRob2QnOiAnREVMRVRFJyxcclxuICAgICAgJ2hlYWRlcnMnOiB7XHJcbiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICAgIHJlcXVlc3QudGhlbihyZXMgPT4ge1xyXG4gICAgICBjb25zb2xlLmxvZyhyZXMpO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gcmVxdWVzdDtcclxuICB9XHJcblxyXG5cclxuICAvKipcclxuICAgKiBPYnRhaW5zIGRhdGEgb2YgdGhlIHVzZXJzIHNoYXJpbmcgYSBwcm9qZWN0LiBNaW5pbXVtIHJlc3VsdCB3b3VsZCBiZSB0aGUgb25seSB0aGUgb3duZXIuXHJcbiAgICogRm9yIGVhY2ggdXNlciByZXR1cm5zIHRoZSBpZCBvZiB0aGUgc2hhcmluZyBwZXJtaXNzaW9uLCBuYW1lLCBlbWFpbCBhZGRyZXNzLCByb2xlIGFuZCBwcm9maWxlIGltYWdlIHVybC5cclxuICAgKiBAcGFyYW0ge1N0cmluZ30gcHJvamVjdElkIFRoZSBwcm9qZWN0IGlkLlxyXG4gICAqL1xyXG4gIHN0YXRpYyBnZXRQcm9qZWN0VGVhbURhdGEocHJvamVjdElkKSB7XHJcbiAgICAvLyBodHRwczovL2RldmVsb3BlcnMuZ29vZ2xlLmNvbS9kcml2ZS9hcGkvdjMvcmVmZXJlbmNlL3Blcm1pc3Npb25zL2xpc3RcclxuICAgIGNvbnN0IHJlcXVlc3QgPSBnYXBpLmNsaWVudC5yZXF1ZXN0KHtcclxuICAgICAgJ3BhdGgnOiBgaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vZHJpdmUvdjMvZmlsZXMvJHtwcm9qZWN0SWR9L3Blcm1pc3Npb25zP2ZpZWxkcz1wZXJtaXNzaW9ucyhpZCxkaXNwbGF5TmFtZSxlbWFpbEFkZHJlc3Mscm9sZSxwaG90b0xpbmspYCxcclxuICAgICAgJ21ldGhvZCc6ICdHRVQnLFxyXG4gICAgICAnaGVhZGVycyc6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9XHJcbiAgICB9KTtcclxuICAgIHJlcXVlc3QudGhlbihyZXMgPT4ge1xyXG4gICAgICBjb25zb2xlLmxvZyhyZXMpO1xyXG4gICAgfSwgcmVqID0+IHtcclxuICAgICAgY29uc29sZS5sb2cocmVqKTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHJlcXVlc3Q7XHJcbiAgfVxyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogR2V0cyBpbmZvcm1hdGlvbiBhYm91dCB0aGUgY3VycmVudCB1c2VyIGxvZ2dlZCBpbiB3aXRoIEdvb2dsZS5cclxuICAgKi9cclxuICBzdGF0aWMgZ2V0VXNlckluZm8oKSB7XHJcbiAgICBjb25zdCByZXF1ZXN0ID0gZ2FwaS5jbGllbnQuZHJpdmUuYWJvdXQuZ2V0KHtcclxuICAgICAgZmllbGRzOiAndXNlcidcclxuICAgIH0pO1xyXG4gICAgcmVxdWVzdC50aGVuKHJlcyA9PiB7XHJcbiAgICAgIGNvbnNvbGUubG9nKEpTT04ucGFyc2UocmVzLmJvZHkpLnVzZXIpO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gcmVxdWVzdDtcclxuICB9XHJcblxyXG5cclxuICAvKipcclxuICAgKiBTZW5kcyBhbiBlbWFpbCBpbmRpY2F0aW5nIHRoYXQgYSBwcm9qZWN0IGFzIGJlZW4gc2hhcmVkIHdpdGggdGhlIHJlY2VpdmVyLlxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBzaGFyZXIgTmFtZSBvZiB0aGUgdXNlciB3aG8gc2hhcmVkIHRoZSBwcm9qZWN0LlxyXG4gICAqIEBwYXJhbSB7U3RyaW5nIHwgU3RyaW5nW119IHJlY2lwaWVudHMgQ29tbWEgc2VwYXJhdGVkIGxpc3Qgb3IgYW4gYXJyYXkgb2YgcmVjaXBpZW50cyBlbWFpbCBhZGRyZXNzZXMuXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IHByb2plY3ROYW1lIFRoZSBuYW1lIG9mIHRoZSBwcm9qZWN0IHRoYXQgaGFzIGJlZW4gc2hhcmVkLlxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBwcm9qZWN0SWQgVGhpcyBpcyByZXF1aXJlZCB0byBjcmVhdGUgdGhlIHVybCBsaW5rIHRvIHRoZSBwcm9qZWN0LlxyXG4gICAqL1xyXG4gIHN0YXRpYyBzZW5kU2hhcmluZ1Byb2plY3RFbWFpbChzaGFyZXIsIHJlY2lwaWVudHMsIHByb2plY3ROYW1lLCBwcm9qZWN0SWQpIHtcclxuICAgIGNvbnN0IHJlcXVlc3QgPSBmZXRjaCgnaHR0cHM6Ly91cy1jZW50cmFsMS10ZXN0Z2Rwcm9qZWN0LTE1NzAwMzY0Mzk5MzEuY2xvdWRmdW5jdGlvbnMubmV0L3NlbmRNYWlsJywge1xyXG4gICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcclxuICAgICAgfSxcclxuICAgICAgLy8gYm9keSBkYXRhIHR5cGUgbXVzdCBtYXRjaCBcIkNvbnRlbnQtVHlwZVwiIGhlYWRlci5cclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBzaGFyZXIsIHJlY2lwaWVudHMsIHByb2plY3ROYW1lLCBwcm9qZWN0SWQgfSlcclxuICAgIH0pO1xyXG4gICAgcmVxdWVzdC50aGVuKHJlcyA9PiB7XHJcbiAgICAgIGNvbnNvbGUubG9nKHJlcyk7XHJcbiAgICAgIC8vIGlmIChyZXMub2sgPT09IHRydWUgJiYgcmVzLnN0YXR1cyA9PT0gMjAwKSB7XHJcbiAgICAgIC8vICAgY29uc29sZS5sb2coJ1NlbmQgc3VjY2Vzc2Z1bC4nKTtcclxuICAgICAgLy8gfVxyXG4gICAgfSwgZXJyID0+IHtcclxuICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gcmVxdWVzdDtcclxuICB9XHJcblxyXG5cclxuICAvKipcclxuICAgKiBTZW5kcyBhIHB1c2ggbm90aWZpY2F0aW9uIHRvIGEgdXNlciBpZGVudGlmaWVkIGJ5IGhpcy9oZXIgZW1haWwgYWRkcmVzcy5cclxuICAgKiBJdCB1c2VzIHRoZSBGaXJlYmFzZSBkYXRhYmFzZSB0byBvYnRhaW4gdGhlIGRldmljZSB0b2tlbnMgYXNzb2NpYXRlZCB0byBlYWNoIGVtYWlsIGFkZHJlc3MuXHJcbiAgICogQHBhcmFtIHtTdHJpbmdbXX0gZW1haWxzIGFycmF5IG9mIGVtYWlscyBvZiB0aGUgdXNlcnMgdG8gc2VuZCB0aGUgbm90aWZpY2F0aW9uIHRvLlxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBhdXRob3IgbmFtZSBvZiB0aGUgYXV0aG9yIHRoYXQgZ2VuZXJhdGVkIHRoZSBub3RpZmljYXRpb24uXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IHBob3RvTGluayB1cmwgb2YgdGhlIGltYWdlIHRvIGlkZW50aWZ5IHRoZSBtZXNzYWdlLlxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB0ZXh0IHRoZSB0ZXh0dWFsIGNvbnRlbnQgb2YgdGhlIG5vdGlmaWNhdGlvbiBtZXNzYWdlLlxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBwcm9qZWN0TmFtZSB0aGUgbmFtZSBvZiB0aGUgcHJvamVjdCBmb3Igd2hpY2ggdGhlIG5vdGlmaWNhdGlvbiBpcyBzZW50LlxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBwcm9qZWN0SWQgdGhlIGlkIG9mIHRoZSBwcm9qZWN0IGZvciB3aGljaCB0aGUgbm90aWZpY2F0aW9uIGlzIHNlbnQuXHJcbiAgICovXHJcbiAgc3RhdGljIHNlbmROb3RpZmljYXRpb24oZW1haWxzLCBhdXRob3IsIHBob3RvTGluaywgdGV4dCwgcHJvamVjdE5hbWUsIHByb2plY3RJZCkge1xyXG4gICAgY29uc3QgcmVxdWVzdCA9IGZldGNoKCdodHRwczovL3VzLWNlbnRyYWwxLXRlc3RnZHByb2plY3QtMTU3MDAzNjQzOTkzMS5jbG91ZGZ1bmN0aW9ucy5uZXQvc2VuZFB1c2hOb3RpZmljYXRpb24nLCB7XHJcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xyXG4gICAgICB9LFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IGVtYWlscywgYXV0aG9yLCBwaG90b0xpbmssIHRleHQsIHByb2plY3ROYW1lLCBwcm9qZWN0SWQgfSkgLy8gYm9keSBkYXRhIHR5cGUgbXVzdCBtYXRjaCBcIkNvbnRlbnQtVHlwZVwiIGhlYWRlclxyXG4gICAgfSk7XHJcbiAgICByZXF1ZXN0LnRoZW4ocmVzID0+IHtcclxuICAgICAgY29uc29sZS5sb2cocmVzKTtcclxuICAgICAgLy8gaWYgKHJlcy5vayA9PT0gdHJ1ZSAmJiByZXMuc3RhdHVzID09PSAyMDApIHtcclxuICAgICAgLy8gICBjb25zb2xlLmxvZygnU2VuZCBzdWNjZXNzZnVsLicpO1xyXG4gICAgICAvLyB9XHJcbiAgICB9LCBlcnIgPT4ge1xyXG4gICAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiByZXF1ZXN0O1xyXG4gIH1cclxuXHJcblxyXG4gIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG4gIC8qKioqKioqKioqKioqKioqKiBBUFBMSUNBVElPTiBTUEVDSUZJQyBGVU5DVElPTlMgKioqKioqKioqKioqKioqKioqL1xyXG4gIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuICAvKipcclxuICAgKiBDcmVhdGVzIGEgbmV3IHByb2plY3QgZm9sZGVyIGFuZCBhIHN1YnRydWN0dXJlIHdpdGggYWxsIHRoZSBjb250ZW50cyBvZiB0aGUgcHJvamVjdCBvbiB0aGUgZmlsZS5cclxuICAgKiBAcGFyYW0ge0ZpbGV9IGZpbGUgVGhlIFZpc3VhbEFSUSBEcmF3aW5ncyBmaWxlIGNyZWF0ZWQgYnkgdGhlIGV4cG9ydGVyLlxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBBcHBEYXRhIFRoZSBBcHBEYXRhIG9iamVjdCB0aGF0IGNvbnRhaW5zIGluZm8gYWJvdXQgdGhlIGFwcCByZXNvdXJjZXMuXHJcbiAgICogQHBhcmFtIHtPYmplY3R9IGxhc3RVcGxvYWRlZFByb2plY3QgT2JqZWN0IHdpdGggdGhlIGNvbnRlbnRzIG9mIHRoZSBsYXN0IHVwbG9hZGVkIHByb2plY3QuXHJcbiAgICovXHJcbiAgc3RhdGljIGFzeW5jIGNyZWF0ZVByb2plY3QoZmlsZSwgQXBwRGF0YSwgbGFzdFVwbG9hZGVkUHJvamVjdCkge1xyXG4gICAgLy8gRXJyb3IgbWVzc2FnZSB3aWxsIGJlIHN0b3JlZCBoZXJlIGlmIG5lZWRlZC5cclxuICAgIGxldCBlcnJvck1zZztcclxuXHJcbiAgICBjb25zdCBmaWxlQ29udGVudFJhdyA9IGF3YWl0IEdlbmVyaWNzLnJlYWRJbnB1dEZpbGUoZmlsZSk7XHJcbiAgICBjb25zdCBmaWxlQ29udGVudCA9IEpTT04ucGFyc2UoZmlsZUNvbnRlbnRSYXcpO1xyXG4gICAgY29uc29sZS5sb2coJ0ZpbGUgY29udGVudHM6JywgZmlsZUNvbnRlbnQpO1xyXG4gICAgLy8gVE9ETzogQ2hlY2sgaWYgdGhlIGZpbGUgaXMgdmFsaWQuLi4gbWluaW11bSByZXF1aXJlZCBmaWVsZHM/IGNvbnRlbnRzPy4uLlxyXG5cclxuICAgIC8vIFRoZSBjb250ZW50cyBvZiB0aGUgZmlsZSBpZiB2YWxpZCB3aWxsIGJlIHNhdmVkIGluIHRoZSBsYXN0VXBsb2FkZWRQcm9qZWN0IHZhcmlhYmxlIHRvIGJlIHVzZWRcclxuICAgIC8vIHdpdGhvdXQgdGhlIG5lZWQgdG8gZmV0Y2ggdGhlbS4gVGhpcyBhbGxvd3MgdG8gdmlldyB0aGUgcHJvamVjdCBldmVuIHdpdGhvdXQgaW50ZXJuZXQgY29ubmV4aW9uLlxyXG4gICAgbGFzdFVwbG9hZGVkUHJvamVjdC5uYW1lID0gZmlsZUNvbnRlbnQucHJvamVjdEluZm8udGl0bGU7XHJcblxyXG4gICAgLy8gQ2hlY2sgaWYgdGhlIGlkIG9mIHRoZSBhcHBNYWluRm9sZGVyIGlzIGluIHRoZSBhcHBEYXRhIGdsb2JhbCBvYmplY3QuXHJcbiAgICAvLyBJZiB0aGVyZSBpcyBub25lIHRoZW4gdHJ5IHRvIGdldCBpdCwgYW5kIGlmIHRoZXJlIGlzIG5vbmUgb25lIHNob3VsZCBiZSBjcmVhdGVkLlxyXG4gICAgaWYgKCFBcHBEYXRhLmFwcE1haW5Gb2xkZXJJZCkge1xyXG4gICAgICBjb25zdCBhcHBNYWluRm9sZGVyUmVzID0gYXdhaXQgdGhpcy5saXN0RmlsZXMoeyBuYW1lOiAnVkF2aWV3ZXJEYXRhJywgb25seUZvbGRlcjogdHJ1ZSwgdHJhc2hlZDogZmFsc2UgfSk7XHJcbiAgICAgIGNvbnN0IGFwcE1haW5Gb2xkZXJEYXRhID0gYXBwTWFpbkZvbGRlclJlcy5yZXN1bHQuZmlsZXM7XHJcbiAgICAgIGlmIChhcHBNYWluRm9sZGVyRGF0YSAmJiBhcHBNYWluRm9sZGVyRGF0YS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgQXBwRGF0YS5hcHBNYWluRm9sZGVySWQgPSBhcHBNYWluRm9sZGVyRGF0YVswXS5pZDtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAvLyBUT0RPOiBUaGlzIHNob3VsZCByZXR1cm4gYSBwcm9taXNlIHRvIGtub3cgaWYgc29tZXRoaW5nIHdlbnQgd3JvbmcuXHJcbiAgICAgICAgY29uc3QgYXBwTWFpbkZvbGRlclJlcyA9IGF3YWl0IHRoaXMuY3JlYXRlRm9sZGVyKCdWQXZpZXdlckRhdGEnKTtcclxuICAgICAgICBBcHBEYXRhLmFwcE1haW5Gb2xkZXJJZCA9IEpTT04ucGFyc2UoYXBwTWFpbkZvbGRlclJlcy5ib2R5KS5pZDtcclxuICAgICAgICBjb25zb2xlLmxvZygnTm8gYXBwRm9sZGVyIGZvdW5kLCBvbmUgaXMgZ29pbmcgdG8gYmUgY3JlYXRlZC4nKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGxldCBwcm9qZWN0Rm9sZGVySWQ7XHJcblxyXG4gICAgLy8gQ2hlY2sgaWYgdGhlcmUgaXMgYWxyZWFkeSBhIHByb2plY3Qgd2l0aCB0aGlzIG5hbWUgaW4gdGhlIGFwcERhdGEgb2JqZWN0LlxyXG4gICAgaWYgKEFwcERhdGEucHJvamVjdHNEYXRhID09PSB1bmRlZmluZWQgfHwgIUFwcERhdGEucHJvamVjdHNEYXRhLmZpbmQocHJvaiA9PiBwcm9qLm5hbWUgPT09IGZpbGVDb250ZW50LnByb2plY3RJbmZvLnRpdGxlKSkge1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IGZvbGRlckNyZWF0aW9uUHJvbWlzZSA9IGF3YWl0IHRoaXMuY3JlYXRlRm9sZGVyKGZpbGVDb250ZW50LnByb2plY3RJbmZvLnRpdGxlLCBBcHBEYXRhLmFwcE1haW5Gb2xkZXJJZCk7XHJcbiAgICAgICAgcHJvamVjdEZvbGRlcklkID0gSlNPTi5wYXJzZShmb2xkZXJDcmVhdGlvblByb21pc2UuYm9keSkuaWQ7XHJcbiAgICAgICAgbGFzdFVwbG9hZGVkUHJvamVjdC5pZCA9IHByb2plY3RGb2xkZXJJZDtcclxuICAgICAgICBjb25zdCBwcm9qZWN0Rm9sZGVyRGF0YSA9IHsgaWQ6IHByb2plY3RGb2xkZXJJZCwgbmFtZTogZmlsZUNvbnRlbnQucHJvamVjdEluZm8udGl0bGUgfTtcclxuICAgICAgICBpZiAoQXBwRGF0YS5wcm9qZWN0c0RhdGEgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgQXBwRGF0YS5wcm9qZWN0c0RhdGEgPSBbcHJvamVjdEZvbGRlckRhdGFdO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoIUFwcERhdGEucHJvamVjdHNEYXRhLmZpbmQocHJvaiA9PiBwcm9qLm5hbWUgPT09IGZpbGVDb250ZW50LnByb2plY3RJbmZvLnRpdGxlKSkge1xyXG4gICAgICAgICAgQXBwRGF0YS5wcm9qZWN0c0RhdGEucHVzaChwcm9qZWN0Rm9sZGVyRGF0YSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgICAgIGxhc3RVcGxvYWRlZFByb2plY3QuaWQgPSAndGVtcG9yYWwnO1xyXG4gICAgICAgIGVycm9yTXNnID0gSlNPTi5wYXJzZShlcnIuYm9keSkuZXJyb3IubWVzc2FnZTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIGlmIChBcHBEYXRhLnByb2plY3RzRGF0YS5maW5kKHByb2ogPT4gcHJvai5uYW1lID09PSBmaWxlQ29udGVudC5wcm9qZWN0SW5mby50aXRsZSkpIHtcclxuICAgICAgLy8gVE9ETzogSW4gY2FzZSBub3QgYWxsIHByb2plY3RzIGFyZSBsb2FkZWQgaG93IHRvIGNoZWNrIGlmIHRoZXJlIGlzIGFscmVhZHkgb25lIHdpdGggdGhpcyBuYW1lIGluIHRoZSBiYWNrZW5kP1xyXG4gICAgICAvLyBUT0RPOiBJZiB0aGVyZSBpcyBvbmUgYWxyZWFkeSwgcHJvdmlkZSBhbiBvcHRpb24gdG8gcHJvcG9zZSBhbm90aGVyIG5hbWUuXHJcbiAgICAgIGVycm9yTXNnID0gJ05vIHByb2plY3Qgd2FzIGNyZWF0ZWQgYmVjYXVzZSB0aGVyZSBpcyBhbHJlYWR5IGEgcHJvamVjdCB3aXRoIHRoaXMgbmFtZS4nO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29uc29sZS5lcnJvcignVW5rbm93biBlcnJvciB3aGlsZSBhdHRlbXB0aW5nIHRvIGNyZWF0ZSB0aGUgcHJvamVjdCBmb2xkZXIuJyk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQ3JlYXRlIHRoZSBkcmF3aW5ncyBzdWJmb2xkZXIgb25seSBpZiB0aGVyZSBhcmUgZHJhd2luZ3MgYW5kIGlmIHRoZSBwcm9qZWN0IGZvbGRlciB3YXMgY3JlYXRlZCBzdWNjZXNmdWxseS5cclxuICAgIGlmIChwcm9qZWN0Rm9sZGVySWQgJiYgZmlsZUNvbnRlbnQuZHJhd2luZ3MpIHtcclxuICAgICAgY29uc3QgZHJhd2luZ3NGb2xkZXJQcm9taXNlID0gYXdhaXQgdGhpcy5jcmVhdGVGb2xkZXIoJ2RyYXdpbmdzJywgcHJvamVjdEZvbGRlcklkKTtcclxuICAgICAgY29uc3QgZHJhd2luZ3NGb2xkZXJJZCA9IEpTT04ucGFyc2UoZHJhd2luZ3NGb2xkZXJQcm9taXNlLmJvZHkpLmlkO1xyXG4gICAgICBBcHBEYXRhLnByb2plY3RzRGF0YVtBcHBEYXRhLnByb2plY3RzRGF0YS5sZW5ndGggLSAxXS5kcmF3aW5nc0ZvbGRlcklkID0gZHJhd2luZ3NGb2xkZXJJZDtcclxuICAgICAgLy8gVG8gc3RvcmUgYWxsIHRoZSB1cGxvYWQgZHJhd2luZ3MgcHJvbWlzZXMuXHJcbiAgICAgIGNvbnN0IGRyYXdpbmdzUHJvbWlzZXMgPSBbXTtcclxuICAgICAgLy8gVmFyaWFibGUgZm9yIHRoZSBsYXN0IHVwbG9hZGVkIGRhdGEuXHJcbiAgICAgIGxhc3RVcGxvYWRlZFByb2plY3QuZHJhd2luZ3MgPSBbXTtcclxuICAgICAgZm9yIChjb25zdCBkcmF3aW5nIGluIGZpbGVDb250ZW50LmRyYXdpbmdzKSB7XHJcbiAgICAgICAgY29uc3QgZHJhd2luZ1Byb21pc2UgPSB0aGlzLnVwbG9hZEZpbGUoZmlsZUNvbnRlbnQuZHJhd2luZ3NbZHJhd2luZ10sICdpbWFnZS9zdmcreG1sJywgZHJhd2luZy5jb25jYXQoJy5zdmcnKSwgZHJhd2luZ3NGb2xkZXJJZCk7XHJcbiAgICAgICAgZHJhd2luZ3NQcm9taXNlcy5wdXNoKGRyYXdpbmdQcm9taXNlKTtcclxuICAgICAgICAvLyBTdG9yZSBvbiBsYXN0VXBsb2FkZWRQcm9qZWN0IHZhcmlhYmxlLlxyXG4gICAgICAgIGNvbnN0IGRyYXdpbmdPYmogPSBuZXcgRHJhd2luZyhkcmF3aW5nLCB1bmRlZmluZWQpO1xyXG4gICAgICAgIGRyYXdpbmdPYmouc2V0Q29udGVudChmaWxlQ29udGVudC5kcmF3aW5nc1tkcmF3aW5nXSk7XHJcbiAgICAgICAgbGFzdFVwbG9hZGVkUHJvamVjdC5kcmF3aW5ncy5wdXNoKGRyYXdpbmdPYmopO1xyXG4gICAgICB9XHJcbiAgICAgIC8vIFJlcXVpcmVkIHRvIGRlY29kZSB0aGUgYm9keSBvZiB0aGUgcmVzcG9uc2UuXHJcbiAgICAgIGNvbnN0IGRlY29kZXIgPSBuZXcgVGV4dERlY29kZXIoJ3V0Zi04Jyk7XHJcbiAgICAgIGF3YWl0IFByb21pc2UuYWxsKGRyYXdpbmdzUHJvbWlzZXMpLnRoZW4ocmVzcG9uc2VzID0+IHtcclxuICAgICAgICByZXNwb25zZXMuZm9yRWFjaCgocmVzLCBpKSA9PiB7XHJcbiAgICAgICAgICBpZiAocmVzLm9rID09PSB0cnVlICYmIHJlcy5zdGF0dXMgPT09IDIwMCkge1xyXG4gICAgICAgICAgICByZXMuYm9keS5nZXRSZWFkZXIoKS5yZWFkKCkudGhlbigoeyB2YWx1ZSwgZG9uZSB9KSA9PiB7XHJcbiAgICAgICAgICAgICAgY29uc3QgaWQgPSBKU09OLnBhcnNlKGRlY29kZXIuZGVjb2RlKHZhbHVlKSkuaWQ7XHJcbiAgICAgICAgICAgICAgLy8gU2V0IHRoZSBpZCBvZiB0aGUgZHJhd2luZyBmaWxlIHRoYXQgaGFzIGJlZW4gY3JlYXRlZC5cclxuICAgICAgICAgICAgICBsYXN0VXBsb2FkZWRQcm9qZWN0LmRyYXdpbmdzW2ldLmlkID0gaWQ7XHJcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0RyYXdpbmcgd2l0aCBpZCAnICsgaWQgKyAnIHVwbG9hZGVkIHN1Y2Nlc3NmdWxseS4nKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0sIGVyciA9PiB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBDcmVhdGUgdGhlIGVsZW1lbnRzRGF0YSBzdWJmb2xkZXIgb25seSBpZiB0aGVyZSBpcyBkYXRhIGFuZCBpZiB0aGUgcHJvamVjdCBmb2xkZXIgd2FzIGNyZWF0ZWQgc3VjY2VzZnVsbHkuXHJcbiAgICBpZiAocHJvamVjdEZvbGRlcklkICYmIGZpbGVDb250ZW50LmVsZW1lbnRzRGF0YSkge1xyXG4gICAgICBjb25zdCBlbGVtZW50c0RhdGFGb2xkZXJQcm9taXNlID0gYXdhaXQgdGhpcy5jcmVhdGVGb2xkZXIoJ2VsZW1lbnRzRGF0YScsIHByb2plY3RGb2xkZXJJZCk7XHJcbiAgICAgIGNvbnN0IGVsZW1lbnRzRGF0YUZvbGRlcklkID0gSlNPTi5wYXJzZShlbGVtZW50c0RhdGFGb2xkZXJQcm9taXNlLmJvZHkpLmlkO1xyXG4gICAgICBBcHBEYXRhLnByb2plY3RzRGF0YVtBcHBEYXRhLnByb2plY3RzRGF0YS5sZW5ndGggLSAxXS5lbGVtZW50c0RhdGFGb2xkZXJJZCA9IGVsZW1lbnRzRGF0YUZvbGRlcklkO1xyXG4gICAgICAvLyBTdG9yZSBvbiB0aGUgbGFzdCB1cGxvYWRlZCB2YXJpYWJsZS5cclxuICAgICAgbGFzdFVwbG9hZGVkUHJvamVjdC5lbGVtZW50c0RhdGEgPSBmaWxlQ29udGVudC5lbGVtZW50c0RhdGE7XHJcbiAgICAgIC8vIFVwbG9hZCB0aGUgZWxlbWVudHMgZGF0YSBmaWxlcy5cclxuICAgICAgY29uc3QgZWxlbWVudHNEYXRhUHJvbWlzZXMgPSBbXTtcclxuICAgICAgZm9yIChjb25zdCBlbGVtZW50RGF0YSBpbiBmaWxlQ29udGVudC5lbGVtZW50c0RhdGEpIHtcclxuICAgICAgICBjb25zdCBlbGVtZW50RGF0YVByb21pc2UgPSB0aGlzLnVwbG9hZEZpbGUoSlNPTi5zdHJpbmdpZnkoZmlsZUNvbnRlbnQuZWxlbWVudHNEYXRhW2VsZW1lbnREYXRhXSksICdhcHBsaWNhdGlvbi9qc29uJywgZWxlbWVudERhdGEuY29uY2F0KCcuanNvbicpLCBlbGVtZW50c0RhdGFGb2xkZXJJZCk7XHJcbiAgICAgICAgZWxlbWVudHNEYXRhUHJvbWlzZXMucHVzaChlbGVtZW50RGF0YVByb21pc2UpO1xyXG4gICAgICB9XHJcbiAgICAgIGF3YWl0IFByb21pc2UuYWxsKGVsZW1lbnRzRGF0YVByb21pc2VzKVxyXG4gICAgICAgIC50aGVuKHJlcyA9PiB7XHJcbiAgICAgICAgICAvLyBUT0RPOiBJcyBpdCBuZWNlc3NhcnkgdG8gY2hlY2sgaWYgZWFjaCByZXNwb25zZSB3YXMgKHJlcy5vayA9PT0gdHJ1ZSAmJiByZXMuc3RhdHVzID09PSAyMDApP1xyXG4gICAgICAgICAgY29uc29sZS5sb2coJ0VsZW1lbnRzRGF0YSBmaWxlcyB1cGxvYWRlZCBzdWNjZXNzZnVsbHkuJyk7XHJcbiAgICAgICAgfSwgZXJyID0+IHtcclxuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBUT0RPOiBDaGVjayBpbiBtb3JlIGRldGFpbCBpZiB0aGUgcHJvamVjdCB3YXMgY3JlYXRlZCBzdWNjZXNzZnVsbHkuXHJcbiAgICBpZiAocHJvamVjdEZvbGRlcklkKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdVcGxvYWQgc3VjY2Vzc2Z1bC4gVXBsb2FkZWQgJyArIE9iamVjdC5rZXlzKGZpbGVDb250ZW50LmRyYXdpbmdzKS5sZW5ndGggKyAnIGRyYXdpbmdzLicpO1xyXG4gICAgICByZXR1cm4geyBpZDogcHJvamVjdEZvbGRlcklkLCBuYW1lOiBmaWxlQ29udGVudC5wcm9qZWN0SW5mby50aXRsZSB9O1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgLy8gVE9ETzogSWYgdGhlIHByb2plY3QgdXBsb2FkIGZhaWxzIHRoZSBwcm9qZWN0IGZvbGRlciwgaWYgY3JlYXRlZCwgc2hvdWxkIGJlIGRlbGV0ZWQuXHJcbiAgICAgIC8vIFRPRE86IENyZWF0ZSBtZXNzYWdlIHdpdGggY29udGVudDogUmV0cnkgYWdhaW4gb3Igd29yayBvZmZsaW5lIHdpdGggdGhlIHVwbG9hZGVkIHByb2plY3QuXHJcbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoJ1Byb2plY3QgdXBsb2FkIGZhaWxlZC4gJyArIGVycm9yTXNnKSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogTGlzdHMgdGhlIHByb2plY3QgaXRlbXMuXHJcbiAgICogVE9ETzogQWRkIGEgcGFyYW0gdG8gbGltaXQgdGhlIGFtb3VudCBvZiBwcm9qZWN0cyB0byBmZXRjaC5cclxuICAgKiBAcGFyYW0ge09iamVjdH0gQXBwRGF0YSBUaGUgQXBwRGF0YSBvYmplY3QgdGhhdCBjb250YWlucyBpbmZvIGFib3V0IHRoZSBhcHAgcmVzb3VyY2VzLlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBtYWluRm9sZGVySWQgSWYgdGhlIGlkIG9mIHRoZSBtYWluIGZvbGRlciB3aXRoIGFsbCB0aGUgcHJvamVjdHMgaXMgYWxyZWFkeSBrbm93biBpdCBjYW4gYmUgcHJvdmlkZWQuXHJcbiAgICogVE9ETyBDaGFuZ2UgdG8gZXh0cmFjdCB0aGUgZmlyc3QgcGFydCBpbnRvIGFub3RoZXIgZnVuY3Rpb24gdG8gZ2V0IHRoZSBpZCBvZiB0aGUgcGFyZW50IGZvbGRlciBhbmQgbWFrZSB0aGUgc2Vjb25kIHBhcmFtIG1hbmRhdG9yeT9cclxuICAgKi9cclxuICBzdGF0aWMgYXN5bmMgbGlzdFByb2plY3RJdGVtcyhBcHBEYXRhLCBtYWluRm9sZGVySWQgPSAnJykge1xyXG4gICAgaWYgKG1haW5Gb2xkZXJJZCAhPT0gJycpIHtcclxuICAgICAgQXBwRGF0YS5hcHBNYWluRm9sZGVySWQgPSBtYWluRm9sZGVySWQ7XHJcbiAgICB9IGVsc2UgaWYgKCFBcHBEYXRhLmFwcE1haW5Gb2xkZXJJZCkge1xyXG4gICAgICAvLyBHZXRzIHRoZSBpZCBvZiB0aGUgYXBwIGZvbGRlciB1c2luZyBpdHMgbmFtZSBpZiBpdCB3YXMgbm90IGFscmVhZHkgaW4gdGhlIGFwcERhdGEgb2JqZWN0LlxyXG4gICAgICBjb25zdCBhcHBNYWluRm9sZGVyUmVzID0gYXdhaXQgdGhpcy5saXN0RmlsZXMoeyBuYW1lOiAnVkF2aWV3ZXJEYXRhJywgb25seUZvbGRlcjogdHJ1ZSwgdHJhc2hlZDogZmFsc2UgfSk7XHJcbiAgICAgIGNvbnN0IGFwcE1haW5Gb2xkZXJEYXRhID0gYXBwTWFpbkZvbGRlclJlcy5yZXN1bHQuZmlsZXM7XHJcbiAgICAgIGlmIChhcHBNYWluRm9sZGVyRGF0YSAmJiBhcHBNYWluRm9sZGVyRGF0YS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgQXBwRGF0YS5hcHBNYWluRm9sZGVySWQgPSBhcHBNYWluRm9sZGVyRGF0YVswXS5pZDtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnTm8gYXBwRm9sZGVyIGZvdW5kLicpO1xyXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoJ05vIGFwcEZvbGRlciBmb3VuZC4nKSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBHZXRzIHRoZSBwcm9qZWN0IGZvbGRlcnMgbmFtZXMgYW5kIGlkcy5cclxuICAgIGNvbnN0IHByb2plY3RzRm9sZGVyc1JlcyA9IGF3YWl0IHRoaXMubGlzdEZpbGVzKHsgcGFyZW50SWQ6IEFwcERhdGEuYXBwTWFpbkZvbGRlcklkLCBvbmx5Rm9sZGVyOiB0cnVlLCBleGNsdWRlTmFtZTogJ2FwcFNldHRpbmdzJywgdHJhc2hlZDogZmFsc2UgfSwgJ3NoYXJlZCwgcGVybWlzc2lvbnMnKTtcclxuICAgIGxldCBuZXdQcm9qZWN0cztcclxuICAgIGNvbnN0IHByb2plY3RzRm9sZGVyc0RhdGEgPSBwcm9qZWN0c0ZvbGRlcnNSZXMucmVzdWx0LmZpbGVzO1xyXG4gICAgaWYgKHByb2plY3RzRm9sZGVyc0RhdGEgJiYgcHJvamVjdHNGb2xkZXJzRGF0YS5sZW5ndGggPiAwKSB7XHJcbiAgICAgIGlmIChBcHBEYXRhLnByb2plY3RzRGF0YSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgbmV3UHJvamVjdHMgPSBwcm9qZWN0c0ZvbGRlcnNEYXRhO1xyXG4gICAgICAgIEFwcERhdGEucHJvamVjdHNEYXRhID0gbmV3UHJvamVjdHM7XHJcbiAgICAgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShBcHBEYXRhLnByb2plY3RzRGF0YSkpIHtcclxuICAgICAgICBuZXdQcm9qZWN0cyA9IHByb2plY3RzRm9sZGVyc1Jlcy5yZXN1bHQuZmlsZXMuZmlsdGVyKG5ld1Byb2ogPT4gQXBwRGF0YS5wcm9qZWN0c0RhdGEuZmluZChwcm9qID0+IHByb2ouaWQgPT09IG5ld1Byb2ouaWQpID09PSB1bmRlZmluZWQpO1xyXG4gICAgICAgIG5ld1Byb2plY3RzLmZvckVhY2gocHJvaiA9PiB7XHJcbiAgICAgICAgICBBcHBEYXRhLnByb2plY3RzRGF0YS5wdXNoKHByb2opO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBjb25zb2xlLmFzc2VydChBcHBEYXRhLnByb2plY3RzRGF0YS5sZW5ndGggPiAwLCAnVGhlcmUgYXJlIG5vIHByb2plY3QgZm9sZGVycy4nKTtcclxuXHJcbiAgICAvLyBHZXRzIHRoZSBpZCBvZiB0aGUgYXBwU2V0dGluZ3MgZm9sZGVyLlxyXG4gICAgY29uc3QgYXBwU2V0dEZvbGRlclJlcyA9IGF3YWl0IHRoaXMubGlzdEZpbGVzKHsgcGFyZW50SWQ6IEFwcERhdGEuYXBwTWFpbkZvbGRlcklkLCBuYW1lOiAnYXBwU2V0dGluZ3MnLCBvbmx5Rm9sZGVyOiB0cnVlIH0pO1xyXG4gICAgY29uc3QgYXBwU2V0dEZvbGRlckRhdGEgPSBhcHBTZXR0Rm9sZGVyUmVzLnJlc3VsdC5maWxlcztcclxuICAgIGlmIChhcHBTZXR0Rm9sZGVyRGF0YSAmJiBhcHBTZXR0Rm9sZGVyRGF0YS5sZW5ndGggPiAwKSB7XHJcbiAgICAgIEFwcERhdGEuYXBwU2V0dGluZ3NGb2xkZXJJZCA9IGFwcFNldHRGb2xkZXJEYXRhWzBdLmlkO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29uc29sZS5sb2coJ05vIHNldHRpbmdzIGZvbGRlciBmb3VuZC4nKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBHZXRzIHRoZSBpZCBvZiB0aGUgcHJvamVjdHNUaHVtYnMgZm9sZGVyLlxyXG4gICAgY29uc3QgdGh1bWJzRm9sZGVyUmVzID0gYXdhaXQgdGhpcy5saXN0RmlsZXMoeyBwYXJlbnRJZDogQXBwRGF0YS5hcHBTZXR0aW5nc0ZvbGRlcklkLCBuYW1lOiAncHJvamVjdHNUaHVtYnMnLCBvbmx5Rm9sZGVyOiB0cnVlIH0pO1xyXG4gICAgY29uc3QgdGh1bWJzRm9sZGVyRGF0YSA9IHRodW1ic0ZvbGRlclJlcy5yZXN1bHQuZmlsZXM7XHJcbiAgICBpZiAodGh1bWJzRm9sZGVyRGF0YSAmJiB0aHVtYnNGb2xkZXJEYXRhLmxlbmd0aCA+IDApIHtcclxuICAgICAgQXBwRGF0YS50aHVtYnNGb2xkZXJJZCA9IHRodW1ic0ZvbGRlckRhdGFbMF0uaWQ7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25zb2xlLmxvZygnTm8gdGh1bWJzIGZvbGRlciBmb3VuZC4nKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBHZXRzIHRoZSBkYXRhIG9mIGVhY2ggdGh1bWJuYWlsIGFuZCBhc3NpZ24gaXQgdG8gaXRzIGNvcnJlc3BvbmRpbmcgcHJvamVjdC5cclxuICAgIGNvbnN0IGltZ1JlcyA9IGF3YWl0IHRoaXMubGlzdEZpbGVzKHsgcGFyZW50SWQ6IEFwcERhdGEudGh1bWJzRm9sZGVySWQgfSk7XHJcbiAgICBjb25zdCBpbWdEYXRhID0gaW1nUmVzLnJlc3VsdC5maWxlcztcclxuICAgIEFwcERhdGEucHJvamVjdHNEYXRhLmZvckVhY2gocHJvaiA9PiB7XHJcbiAgICAgIGNvbnN0IHByb2plY3RUaHVtYkRhdGEgPSBpbWdEYXRhLmZpbmQoaW1nID0+IHByb2ouaWQgPT09IGltZy5uYW1lLnJlcGxhY2UoJy5qcGcnLCAnJykpO1xyXG4gICAgICBpZiAocHJvamVjdFRodW1iRGF0YSkge1xyXG4gICAgICAgIHByb2oudGh1bWJJZCA9IHByb2plY3RUaHVtYkRhdGEuaWQ7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgY29uc29sZS5hc3NlcnQoaW1nRGF0YS5sZW5ndGggPiAwLCAnVGhlcmUgYXJlIG5vIHRodW1ibmFpbHMuJyk7XHJcblxyXG4gICAgLy8gVE9ETzogTWlzc2luZyB0aGUgbWFuYWdlbWVudCBvZiBhbiBlcnJvciB3aGlsZSBsaXN0aW5nIHRoZSBwcm9qZWN0cy5cclxuXHJcbiAgICAvLyBJZiBhbGwgdGhlIHJlcXVpcmVkIGRhdGEgYWJvdXQgdGhlIHByb2plY3RzIHdhcyBmZXRjaGVkIHN1Y2Nlc3NmdWxseSBpdCBpcyByZXR1cm5lZC5cclxuICAgIHJldHVybiBuZXdQcm9qZWN0cztcclxuICB9XHJcblxyXG5cclxuICAvKipcclxuICAgKiBGZXRjaGVzIHRoZSBwcm9qZWN0IGNvbnRlbnRzLiBTcGVjaWZpY2FsbHkgdGhlIGlkIGFuZCB0aGUgbmFtZSBvZiBhbGwgdGhlIGRyYXdpbmdzIGFuZCBlbGVtZW50c0RhdGEgZmlsZXMuXHJcbiAgICogSXQgb25seSBmZXRjaGVzIHRoZSByZXNvdXJjZXMgdGhhdCBhcmUgbm90IGFscmVhZHkgaW4gdGhlIGFwcERhdGEgb2JqZWN0LlxyXG4gICAqIFRPRE86IEltcHJvdmUgdGhlIGRldGVjdGlvbiBvZiByZXNvdXJjZXMgdGhhdCBzaG91bGQgYmUgZmV0Y2hlZC4gQ3VycmVudGx5IGlmIHRoZXJlIGlzIGFscmVhZHkgYW55IHByb2plY3RcclxuICAgKiBkYXRhIGZvciB0aGF0IGNhdGVnb3J5IChlLmc6IGRyYXdpbmdzKSBpbiB0aGUgZnJvbnQgaXQgZG9lbnN0IGZldGNoIGFueSBuZXcgZmlsZSBvZiB0aGF0IGNhdGVnb3J5LlxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBwcm9qZWN0SWQgVGhlIGlkIG9mIHRoZSBwcm9qZWN0LlxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBBcHBEYXRhIFRoZSBBcHBEYXRhIG9iamVjdCB0aGF0IGNvbnRhaW5zIGluZm8gYWJvdXQgdGhlIGFwcCByZXNvdXJjZXMuXHJcbiAgICovXHJcbiAgc3RhdGljIGFzeW5jIGZldGNoUHJvamVjdChwcm9qZWN0SWQsIEFwcERhdGEpIHtcclxuICAgIGNvbnNvbGUubG9nKCdGZXRjaGluZyBwcm9qZWN0OiAnICsgcHJvamVjdElkKTtcclxuXHJcbiAgICBsZXQgcHJvamVjdEluZGV4O1xyXG4gICAgLy8gSW4gY2FzZSB0aGUgcHJvamVjdHNEYXRhIGVudHJ5IGlzIHN0aWxsIHVuZGVmaW5lZCB0aGlzIHdpbGwgYmUgdGhlIGZpcnN0IHByb2plY3QgdG8gYmUgZmV0Y2hlZC5cclxuICAgIC8vIFRoaXMgd2lsbCBoYXBwZW4gd2hlbiBzb21lb25lIGFjY2VzcyBhIHByb2plY3QgZGlyZWN0bHkgd2l0aCBpdHMgaWQgaW4gdGhlIHVybC5cclxuICAgIGlmIChBcHBEYXRhLnByb2plY3RzRGF0YSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgIGNvbnN0IHByb2plY3ROYW1lUmVzID0gYXdhaXQgdGhpcy5nZXRGaWxlRGF0YShwcm9qZWN0SWQsICduYW1lLCB0cmFzaGVkJyk7XHJcbiAgICAgIGlmICghSlNPTi5wYXJzZShwcm9qZWN0TmFtZVJlcy5ib2R5KS50cmFzaGVkKSB7XHJcbiAgICAgICAgQXBwRGF0YS5wcm9qZWN0c0RhdGEgPSBbeyBpZDogcHJvamVjdElkLCBuYW1lOiBKU09OLnBhcnNlKHByb2plY3ROYW1lUmVzLmJvZHkpLm5hbWUgfV07XHJcbiAgICAgICAgcHJvamVjdEluZGV4ID0gMDtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIGlmIChwcm9qZWN0SWQgIT09ICd0ZW1wb3JhbCcpIHtcclxuICAgICAgcHJvamVjdEluZGV4ID0gQXBwRGF0YS5wcm9qZWN0c0RhdGEuZmluZEluZGV4KHByb2ogPT4gcHJvai5pZCA9PT0gcHJvamVjdElkKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBHZXRzIHRoZSBwcm9qZWN0IHRlYW0gbWVtYmVycyBkYXRhIGFuZCBhZGRzIGl0IHRvIHRoZSBjb3JyZXNwb25kaW5nIHByb2plY3REYXRhIG9iamVjdC5cclxuICAgIGlmIChwcm9qZWN0SW5kZXggPj0gMCAmJiAhQXBwRGF0YS5wcm9qZWN0c0RhdGFbcHJvamVjdEluZGV4XS5wZXJtaXNzaW9ucykge1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHByb2pQZXJtaXNzaW9uc1JlcyA9IGF3YWl0IHRoaXMuZ2V0UHJvamVjdFRlYW1EYXRhKHByb2plY3RJZCk7XHJcbiAgICAgICAgY29uc3QgcHJvalBlcm1pc3Npb25zRGF0YSA9IHByb2pQZXJtaXNzaW9uc1Jlcy5yZXN1bHQucGVybWlzc2lvbnM7XHJcbiAgICAgICAgaWYgKHByb2pQZXJtaXNzaW9uc0RhdGEgJiYgcHJvalBlcm1pc3Npb25zRGF0YS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICBBcHBEYXRhLnByb2plY3RzRGF0YVtwcm9qZWN0SW5kZXhdLnBlcm1pc3Npb25zID0gcHJvalBlcm1pc3Npb25zRGF0YTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgY29uc29sZS5sb2coJ05vIHByb2plY3QgdGVhbSBtZW1iZXJzIGZvdW5kLicpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnRXJyb3IgZmV0Y2hpbmcgdGhlIHRlYW0gbWVtYmVycyBkYXRhLicpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gSWYgdGhlcmUgaXMgbm8gZGF0YSBmb3IgcHJvamVjdFNldHRpbmdzLmpzb24gZmlsZSBpbiB0aGUgYXBwRGF0YSB5ZXQgZmV0Y2ggaXQuXHJcbiAgICBpZiAocHJvamVjdEluZGV4ID49IDAgJiYgIUFwcERhdGEucHJvamVjdHNEYXRhW3Byb2plY3RJbmRleF0ucHJvalNldHRpbmdzKSB7XHJcbiAgICAgIGNvbnN0IHByb2pTZXR0aW5nc1JlcyA9IGF3YWl0IHRoaXMubGlzdEZpbGVzKHsgcGFyZW50SWQ6IHByb2plY3RJZCwgbmFtZTogJ3Byb2plY3RTZXR0aW5ncy5qc29uJyB9KTtcclxuICAgICAgY29uc3QgcHJvalNldHRpbmdzRGF0YSA9IHByb2pTZXR0aW5nc1Jlcy5yZXN1bHQuZmlsZXM7XHJcbiAgICAgIGlmIChwcm9qU2V0dGluZ3NEYXRhICYmIHByb2pTZXR0aW5nc0RhdGEubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIGNvbnN0IHByb2pTZXR0aW5nc0NvbnRlbnRSZXMgPSBhd2FpdCB0aGlzLmdldEZpbGVDb250ZW50KHByb2pTZXR0aW5nc0RhdGFbMF0uaWQpO1xyXG4gICAgICAgIEFwcERhdGEucHJvamVjdHNEYXRhW3Byb2plY3RJbmRleF0ucHJvalNldHRpbmdzID0gcHJvalNldHRpbmdzQ29udGVudFJlcy5ib2R5O1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdObyBwcm9qZWN0U2V0dGluZ3MuanNvbiBmb3VuZC4nKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIElmIHRoZXJlIGlzIG5vIGRhdGEgZm9yIGRyYXdpbmdzIGFscmVhZHkgZmV0Y2ggdGhlIGlkIG9mIHRoZSBkcmF3aW5ncyBmb2xkZXIgYW5kIHRoZSBuYW1lIGFuZCBpZCBvZiBlYWNoIG9uZS5cclxuICAgIGlmIChwcm9qZWN0SW5kZXggPj0gMCAmJiAhQXBwRGF0YS5wcm9qZWN0c0RhdGFbcHJvamVjdEluZGV4XS5kcmF3aW5ncykge1xyXG4gICAgICBjb25zdCBkcmF3aW5nc0ZvbGRlclJlcyA9IGF3YWl0IHRoaXMubGlzdEZpbGVzKHsgcGFyZW50SWQ6IHByb2plY3RJZCwgb25seUZvbGRlcjogdHJ1ZSwgbmFtZTogJ2RyYXdpbmdzJyB9KTtcclxuICAgICAgY29uc3QgZHJhd2luZ3NGb2xkZXJEYXRhID0gZHJhd2luZ3NGb2xkZXJSZXMucmVzdWx0LmZpbGVzO1xyXG4gICAgICBpZiAoZHJhd2luZ3NGb2xkZXJEYXRhICYmIGRyYXdpbmdzRm9sZGVyRGF0YS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgY29uc3QgZHJhd2luZ3NSZXMgPSBhd2FpdCB0aGlzLmxpc3RGaWxlcyh7IHBhcmVudElkOiBkcmF3aW5nc0ZvbGRlckRhdGFbMF0uaWQsIHRyYXNoZWQ6IGZhbHNlIH0pO1xyXG4gICAgICAgIEFwcERhdGEucHJvamVjdHNEYXRhW3Byb2plY3RJbmRleF0uZHJhd2luZ3MgPSBbXTtcclxuICAgICAgICBkcmF3aW5nc1Jlcy5yZXN1bHQuZmlsZXMuZm9yRWFjaChkcmF3aW5nID0+IHtcclxuICAgICAgICAgIGlmIChkcmF3aW5nLm5hbWUgPT09ICdkcmF3aW5nc1N0eWxlcy5jc3MnKSB7XHJcbiAgICAgICAgICAgIEFwcERhdGEucHJvamVjdHNEYXRhW3Byb2plY3RJbmRleF0uZHJhd2luZ3NTdHlsZXNJZCA9IGRyYXdpbmcuaWQ7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBBcHBEYXRhLnByb2plY3RzRGF0YVtwcm9qZWN0SW5kZXhdLmRyYXdpbmdzLnB1c2gobmV3IERyYXdpbmcoZHJhd2luZy5uYW1lLnJlcGxhY2UoLy5zdmckLywgJycpLCBkcmF3aW5nLmlkKSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ05vIGRyYXdpbmdzIGZvbGRlciBmb3VuZC4nKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIElmIHRoZXJlIGlzIG5vIGRhdGEgZm9yIGVsZW1lbnRzRGF0YSBhbHJlYWR5IGZldGNoIHRoZSBpZCBvZiB0aGUgZWxlbWVudHNEYXRhIGZvbGRlciBhbmQgdGhlIG5hbWUgYW5kIGlkIG9mIGVhY2ggb25lLlxyXG4gICAgaWYgKHByb2plY3RJbmRleCA+PSAwICYmICFBcHBEYXRhLnByb2plY3RzRGF0YVtwcm9qZWN0SW5kZXhdLmVsZW1lbnRzRGF0YSkge1xyXG4gICAgICBjb25zdCBlbGVtZW50c0RhdGFGb2xkZXJSZXMgPSBhd2FpdCB0aGlzLmxpc3RGaWxlcyh7IHBhcmVudElkOiBwcm9qZWN0SWQsIG9ubHlGb2xkZXI6IHRydWUsIG5hbWU6ICdlbGVtZW50c0RhdGEnIH0pO1xyXG4gICAgICBjb25zdCBlbGVtZW50c0RhdGFGb2xkZXJEYXRhID0gZWxlbWVudHNEYXRhRm9sZGVyUmVzLnJlc3VsdC5maWxlcztcclxuICAgICAgaWYgKGVsZW1lbnRzRGF0YUZvbGRlckRhdGEgJiYgZWxlbWVudHNEYXRhRm9sZGVyRGF0YS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgY29uc3QgZWxlbWVudHNEYXRhUmVzID0gYXdhaXQgdGhpcy5saXN0RmlsZXMoeyBwYXJlbnRJZDogZWxlbWVudHNEYXRhRm9sZGVyRGF0YVswXS5pZCwgdHJhc2hlZDogZmFsc2UgfSk7XHJcbiAgICAgICAgQXBwRGF0YS5wcm9qZWN0c0RhdGFbcHJvamVjdEluZGV4XS5lbGVtZW50c0RhdGEgPSBlbGVtZW50c0RhdGFSZXMucmVzdWx0LmZpbGVzO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdObyBlbGVtZW50c0RhdGEgZm9sZGVyIGZvdW5kLicpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gSWYgdGhlcmUgaXMgbm8gZGF0YSBmb3IgY29tbWVudHMgaW4gdGhlIGFwcERhdGEgeWV0IGZldGNoIGl0LlxyXG4gICAgaWYgKHByb2plY3RJbmRleCA+PSAwICYmICFBcHBEYXRhLnByb2plY3RzRGF0YVtwcm9qZWN0SW5kZXhdLmNvbW1lbnRzKSB7XHJcbiAgICAgIC8vIFRPRE86IENvdWxkIGJlIHRoYXQgdGhlIGlkIG9mIHRoZSBmaWxlIGlzIGFscmVhZHkgaW4gdGhlIHByb2plY3RzRGF0YSBhbmQgbGlzdEZpbGVzIGlzIG5vIG5lY2Vzc2FyeT9cclxuICAgICAgY29uc3QgY29tbWVudHNSZXMgPSBhd2FpdCB0aGlzLmxpc3RGaWxlcyh7IHBhcmVudElkOiBwcm9qZWN0SWQsIG5hbWU6ICdjb21tZW50cy5qc29uJywgdHJhc2hlZDogZmFsc2UgfSk7XHJcbiAgICAgIGNvbnN0IGNvbW1lbnRzRGF0YSA9IGNvbW1lbnRzUmVzLnJlc3VsdC5maWxlcztcclxuICAgICAgaWYgKGNvbW1lbnRzRGF0YSAmJiBjb21tZW50c0RhdGEubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIEFwcERhdGEucHJvamVjdHNEYXRhW3Byb2plY3RJbmRleF0uY29tbWVudHNGaWxlSWQgPSBjb21tZW50c0RhdGFbMF0uaWQ7XHJcbiAgICAgICAgY29uc3QgY29tbWVudHNDb250ZW50UmVzID0gYXdhaXQgdGhpcy5nZXRGaWxlQ29udGVudChjb21tZW50c0RhdGFbMF0uaWQpO1xyXG4gICAgICAgIEFwcERhdGEucHJvamVjdHNEYXRhW3Byb2plY3RJbmRleF0uY29tbWVudHMgPSBKU09OLnBhcnNlKGNvbW1lbnRzQ29udGVudFJlcy5ib2R5KTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnTm8gY29tbWVudHMuanNvbiBmaWxlIGZvdW5kLicpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gSWYgdGhlcmUgaXMgbm8gZGF0YSBmb3IgaW1hZ2VzIGFscmVhZHkgZmV0Y2ggdGhlIGlkIG9mIHRoZSBpbWFnZXMgZm9sZGVyIGFuZCB0aGUgbmFtZSBhbmQgaWQgb2YgZWFjaCBvbmUuXHJcbiAgICBpZiAocHJvamVjdEluZGV4ID49IDAgJiYgIUFwcERhdGEucHJvamVjdHNEYXRhW3Byb2plY3RJbmRleF0uaW1hZ2VzKSB7XHJcbiAgICAgIGNvbnN0IGltYWdlc0ZvbGRlclJlcyA9IGF3YWl0IHRoaXMubGlzdEZpbGVzKHsgcGFyZW50SWQ6IHByb2plY3RJZCwgb25seUZvbGRlcjogdHJ1ZSwgbmFtZTogJ2ltYWdlcycgfSk7XHJcbiAgICAgIGNvbnN0IGltYWdlc0ZvbGRlckRhdGEgPSBpbWFnZXNGb2xkZXJSZXMucmVzdWx0LmZpbGVzO1xyXG4gICAgICBpZiAoaW1hZ2VzRm9sZGVyRGF0YSAmJiBpbWFnZXNGb2xkZXJEYXRhLmxlbmd0aCA+IDApIHtcclxuICAgICAgICBjb25zdCBpbWFnZXNSZXMgPSBhd2FpdCB0aGlzLmxpc3RGaWxlcyh7IHBhcmVudElkOiBpbWFnZXNGb2xkZXJEYXRhWzBdLmlkIH0pO1xyXG4gICAgICAgIEFwcERhdGEucHJvamVjdHNEYXRhW3Byb2plY3RJbmRleF0uaW1hZ2VzID0gaW1hZ2VzUmVzLnJlc3VsdC5maWxlcztcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnTm8gaW1hZ2VzIGZvbGRlciBmb3VuZC4nKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlmIChwcm9qZWN0SW5kZXggPj0gMCkge1xyXG4gICAgICBjb25zb2xlLmxvZygnUHJvamVjdCByZXNvdXJjZXMgZmV0Y2hlZCBzdWNjZXNmdWxseS4nKTtcclxuICAgICAgcmV0dXJuIEFwcERhdGEucHJvamVjdHNEYXRhW3Byb2plY3RJbmRleF07XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCdQcm9qZWN0IHJlc291cmNlcyBjb3VsZCBub3QgYmUgZmV0Y2hlZC4nKSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxufSIsImltcG9ydCBHZW5lcmljcyBmcm9tICcuL2dlbmVyaWNzJztcclxuXHJcbmV4cG9ydCBjbGFzcyBDb21tZW50IHtcclxuICBlbGVtZW50c0lkczogc3RyaW5nW10gPSBbXTtcclxuICBjb250ZW50OiBzdHJpbmc7XHJcbiAgbWVudGlvbnM6IHN0cmluZ1tdO1xyXG4gIGlkOiBzdHJpbmc7XHJcbiAgcmVwcmVzZW50YXRpb25zOiBTVkdFbGVtZW50W10gPSBbXTtcclxuXHJcbiAgY29uc3RydWN0b3IoZWxlbWVudHNJZHM6IHN0cmluZ1tdLCBjb250ZW50OiBzdHJpbmcsIG1lbnRpb25zOiBzdHJpbmdbXSA9IFtdKSB7XHJcbiAgICB0aGlzLmVsZW1lbnRzSWRzLnB1c2goLi4uZWxlbWVudHNJZHMpO1xyXG4gICAgdGhpcy5jb250ZW50ID0gY29udGVudDtcclxuICAgIHRoaXMubWVudGlvbnMgPSBtZW50aW9ucztcclxuICAgIHRoaXMuaWQgPSAnYy0nICsgR2VuZXJpY3MudXVpZHY0KCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBDcmVhdGVzIGFuIHN2ZyByZXByZXNlbnRhdGlvbiBmb3IgdGhlIGNvbW1lbnQgb24gdGhlIHByb3ZpZGVkIGVsZW1lbnQgYW5kXHJcbiAgICogYWRkcyBpdCB0byB0aGUgZ3JvdXAgb2YgY29tbWVudCByZXByZXNlbnRhdGlvbnMgb24gdGhlIHN2ZyBkcmF3aW5nLlxyXG4gICAqIEBwYXJhbSB7U1ZHR0VsZW1lbnR9IGNvbW1lbnRzR3JvdXBcclxuICAgKiBAcGFyYW0ge1NWR0VsZW1lbnR9IGVsZW1lbnQgXHJcbiAgICovXHJcbiAgLy8gY3JlYXRlUmVwcmVzZW50YXRpb24oY29tbWVudHNHcm91cCwgZWxlbWVudCkge1xyXG4gIC8vICAgY29uc3QgcmVwcmVzZW50YXRpb24gPSBHZW5lcmljcy5jcmVhdGVCQm94KGVsZW1lbnQsIDE1LCAxNSk7XHJcbiAgLy8gICAvLyBUT0RPOiB0aGUgc3R5bGUgdmFsdWVzIHdpbGwgY29tZSBmcm9tIHRoZSBhcHAgc2V0dGluZ3MgZmlsZSBpZiBhbnkuXHJcbiAgLy8gICByZXByZXNlbnRhdGlvbi5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgJ2ZpbGw6bm9uZTtzdHJva2U6I2UyMmEyYTtzdHJva2Utd2lkdGg6OHB4O3N0cm9rZS1kYXNoYXJyYXk6MTg7Jyk7XHJcbiAgLy8gICByZXByZXNlbnRhdGlvbi5kYXRhc2V0LmlkID0gdGhpcy5pZDtcclxuICAvLyAgIGNvbW1lbnRzR3JvdXAuYXBwZW5kQ2hpbGQocmVwcmVzZW50YXRpb24pO1xyXG4gIC8vICAgdGhpcy5yZXByZXNlbnRhdGlvbnMucHVzaChyZXByZXNlbnRhdGlvbik7XHJcbiAgLy8gfVxyXG5cclxuICAvKipcclxuICAgKiBSZXBsYWNlcyB0aGUgcHJldmlvdXMgb25lXHJcbiAgICovXHJcbiAgY3JlYXRlUmVwcmVzZW50YXRpb24oY29tbWVudHNHcm91cDogU1ZHR0VsZW1lbnQsIGVsZW1lbnRzOiBTVkdHRWxlbWVudFtdKSB7XHJcbiAgICAvLyBUT0RPIG5ldyBmdW5jdGlvblxyXG4gICAgY29uc3QgcmVjdGFuZ2xlcyA9IFtdO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBlbGVtZW50cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICByZWN0YW5nbGVzLnB1c2goR2VuZXJpY3MuY3JlYXRlQkJveDIoZWxlbWVudHNbaV0sIDE1KSk7XHJcbiAgICB9XHJcbiAgICBjb25zdCBzZWdtZW50cyA9IEdlbmVyaWNzLnJlY3RhbmdsZXNTaWxob3VldHRlKHJlY3RhbmdsZXMpO1xyXG4gICAgY29uc3QgcmVwcmVzZW50YXRpb24gPSBHZW5lcmljcy5zdmdQYXRoRnJvbUxpbmVzKHNlZ21lbnRzKTtcclxuICAgIHJlcHJlc2VudGF0aW9uLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCAnZmlsbDpub25lO3N0cm9rZTojZTIyYTJhO3N0cm9rZS13aWR0aDo4cHg7c3Ryb2tlLWRhc2hhcnJheTozMDtzdHJva2UtbGluZWNhcDpyb3VuZDsnKTtcclxuICAgIHJlcHJlc2VudGF0aW9uLmRhdGFzZXQuaWQgPSB0aGlzLmlkO1xyXG4gICAgY29tbWVudHNHcm91cC5hcHBlbmRDaGlsZChyZXByZXNlbnRhdGlvbik7XHJcbiAgICB0aGlzLnJlcHJlc2VudGF0aW9ucy5wdXNoKHJlcHJlc2VudGF0aW9uKTtcclxuICB9XHJcblxyXG5cclxuXHJcblxyXG59IiwiaW1wb3J0IGZpcmViYXNlIGZyb20gJ0BmaXJlYmFzZS9hcHAnO1xuaW1wb3J0IHsgQ29tcG9uZW50IH0gZnJvbSAnQGZpcmViYXNlL2NvbXBvbmVudCc7XG5pbXBvcnQgeyBfX2F3YWl0ZXIsIF9fZ2VuZXJhdG9yLCBfX3NwcmVhZCwgX19hc3NpZ24sIF9fdmFsdWVzIH0gZnJvbSAndHNsaWInO1xuaW1wb3J0IHsgRXJyb3JGYWN0b3J5LCBGaXJlYmFzZUVycm9yIH0gZnJvbSAnQGZpcmViYXNlL3V0aWwnO1xuaW1wb3J0IHsgb3BlbkRiIH0gZnJvbSAnaWRiJztcblxudmFyIG5hbWUgPSBcIkBmaXJlYmFzZS9pbnN0YWxsYXRpb25zXCI7XG52YXIgdmVyc2lvbiA9IFwiMC4zLjhcIjtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnZhciBQRU5ESU5HX1RJTUVPVVRfTVMgPSAxMDAwMDtcclxudmFyIFBBQ0tBR0VfVkVSU0lPTiA9IFwidzpcIiArIHZlcnNpb247XHJcbnZhciBJTlRFUk5BTF9BVVRIX1ZFUlNJT04gPSAnRklTX3YyJztcclxudmFyIElOU1RBTExBVElPTlNfQVBJX1VSTCA9ICdodHRwczovL2ZpcmViYXNlaW5zdGFsbGF0aW9ucy5nb29nbGVhcGlzLmNvbS92MSc7XHJcbnZhciBUT0tFTl9FWFBJUkFUSU9OX0JVRkZFUiA9IDYwICogNjAgKiAxMDAwOyAvLyBPbmUgaG91clxyXG52YXIgU0VSVklDRSA9ICdpbnN0YWxsYXRpb25zJztcclxudmFyIFNFUlZJQ0VfTkFNRSA9ICdJbnN0YWxsYXRpb25zJztcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnZhciBfYTtcclxudmFyIEVSUk9SX0RFU0NSSVBUSU9OX01BUCA9IChfYSA9IHt9LFxyXG4gICAgX2FbXCJtaXNzaW5nLWFwcC1jb25maWctdmFsdWVzXCIgLyogTUlTU0lOR19BUFBfQ09ORklHX1ZBTFVFUyAqL10gPSAnTWlzc2luZyBBcHAgY29uZmlndXJhdGlvbiB2YWx1ZTogXCJ7JHZhbHVlTmFtZX1cIicsXHJcbiAgICBfYVtcIm5vdC1yZWdpc3RlcmVkXCIgLyogTk9UX1JFR0lTVEVSRUQgKi9dID0gJ0ZpcmViYXNlIEluc3RhbGxhdGlvbiBpcyBub3QgcmVnaXN0ZXJlZC4nLFxyXG4gICAgX2FbXCJpbnN0YWxsYXRpb24tbm90LWZvdW5kXCIgLyogSU5TVEFMTEFUSU9OX05PVF9GT1VORCAqL10gPSAnRmlyZWJhc2UgSW5zdGFsbGF0aW9uIG5vdCBmb3VuZC4nLFxyXG4gICAgX2FbXCJyZXF1ZXN0LWZhaWxlZFwiIC8qIFJFUVVFU1RfRkFJTEVEICovXSA9ICd7JHJlcXVlc3ROYW1lfSByZXF1ZXN0IGZhaWxlZCB3aXRoIGVycm9yIFwieyRzZXJ2ZXJDb2RlfSB7JHNlcnZlclN0YXR1c306IHskc2VydmVyTWVzc2FnZX1cIicsXHJcbiAgICBfYVtcImFwcC1vZmZsaW5lXCIgLyogQVBQX09GRkxJTkUgKi9dID0gJ0NvdWxkIG5vdCBwcm9jZXNzIHJlcXVlc3QuIEFwcGxpY2F0aW9uIG9mZmxpbmUuJyxcclxuICAgIF9hW1wiZGVsZXRlLXBlbmRpbmctcmVnaXN0cmF0aW9uXCIgLyogREVMRVRFX1BFTkRJTkdfUkVHSVNUUkFUSU9OICovXSA9IFwiQ2FuJ3QgZGVsZXRlIGluc3RhbGxhdGlvbiB3aGlsZSB0aGVyZSBpcyBhIHBlbmRpbmcgcmVnaXN0cmF0aW9uIHJlcXVlc3QuXCIsXHJcbiAgICBfYSk7XHJcbnZhciBFUlJPUl9GQUNUT1JZID0gbmV3IEVycm9yRmFjdG9yeShTRVJWSUNFLCBTRVJWSUNFX05BTUUsIEVSUk9SX0RFU0NSSVBUSU9OX01BUCk7XHJcbi8qKiBSZXR1cm5zIHRydWUgaWYgZXJyb3IgaXMgYSBGaXJlYmFzZUVycm9yIHRoYXQgaXMgYmFzZWQgb24gYW4gZXJyb3IgZnJvbSB0aGUgc2VydmVyLiAqL1xyXG5mdW5jdGlvbiBpc1NlcnZlckVycm9yKGVycm9yKSB7XHJcbiAgICByZXR1cm4gKGVycm9yIGluc3RhbmNlb2YgRmlyZWJhc2VFcnJvciAmJlxyXG4gICAgICAgIGVycm9yLmNvZGUuaW5jbHVkZXMoXCJyZXF1ZXN0LWZhaWxlZFwiIC8qIFJFUVVFU1RfRkFJTEVEICovKSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIGdldEluc3RhbGxhdGlvbnNFbmRwb2ludChfYSkge1xyXG4gICAgdmFyIHByb2plY3RJZCA9IF9hLnByb2plY3RJZDtcclxuICAgIHJldHVybiBJTlNUQUxMQVRJT05TX0FQSV9VUkwgKyBcIi9wcm9qZWN0cy9cIiArIHByb2plY3RJZCArIFwiL2luc3RhbGxhdGlvbnNcIjtcclxufVxyXG5mdW5jdGlvbiBleHRyYWN0QXV0aFRva2VuSW5mb0Zyb21SZXNwb25zZShyZXNwb25zZSkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICB0b2tlbjogcmVzcG9uc2UudG9rZW4sXHJcbiAgICAgICAgcmVxdWVzdFN0YXR1czogMiAvKiBDT01QTEVURUQgKi8sXHJcbiAgICAgICAgZXhwaXJlc0luOiBnZXRFeHBpcmVzSW5Gcm9tUmVzcG9uc2VFeHBpcmVzSW4ocmVzcG9uc2UuZXhwaXJlc0luKSxcclxuICAgICAgICBjcmVhdGlvblRpbWU6IERhdGUubm93KClcclxuICAgIH07XHJcbn1cclxuZnVuY3Rpb24gZ2V0RXJyb3JGcm9tUmVzcG9uc2UocmVxdWVzdE5hbWUsIHJlc3BvbnNlKSB7XHJcbiAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHJlc3BvbnNlSnNvbiwgZXJyb3JEYXRhO1xyXG4gICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAwOiByZXR1cm4gWzQgLyp5aWVsZCovLCByZXNwb25zZS5qc29uKCldO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlSnNvbiA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICBlcnJvckRhdGEgPSByZXNwb25zZUpzb24uZXJyb3I7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwicmVxdWVzdC1mYWlsZWRcIiAvKiBSRVFVRVNUX0ZBSUxFRCAqLywge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWVzdE5hbWU6IHJlcXVlc3ROYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VydmVyQ29kZTogZXJyb3JEYXRhLmNvZGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXJ2ZXJNZXNzYWdlOiBlcnJvckRhdGEubWVzc2FnZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlcnZlclN0YXR1czogZXJyb3JEYXRhLnN0YXR1c1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59XHJcbmZ1bmN0aW9uIGdldEhlYWRlcnMoX2EpIHtcclxuICAgIHZhciBhcGlLZXkgPSBfYS5hcGlLZXk7XHJcbiAgICByZXR1cm4gbmV3IEhlYWRlcnMoe1xyXG4gICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgICAgQWNjZXB0OiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgICAgJ3gtZ29vZy1hcGkta2V5JzogYXBpS2V5XHJcbiAgICB9KTtcclxufVxyXG5mdW5jdGlvbiBnZXRIZWFkZXJzV2l0aEF1dGgoYXBwQ29uZmlnLCBfYSkge1xyXG4gICAgdmFyIHJlZnJlc2hUb2tlbiA9IF9hLnJlZnJlc2hUb2tlbjtcclxuICAgIHZhciBoZWFkZXJzID0gZ2V0SGVhZGVycyhhcHBDb25maWcpO1xyXG4gICAgaGVhZGVycy5hcHBlbmQoJ0F1dGhvcml6YXRpb24nLCBnZXRBdXRob3JpemF0aW9uSGVhZGVyKHJlZnJlc2hUb2tlbikpO1xyXG4gICAgcmV0dXJuIGhlYWRlcnM7XHJcbn1cclxuLyoqXHJcbiAqIENhbGxzIHRoZSBwYXNzZWQgaW4gZmV0Y2ggd3JhcHBlciBhbmQgcmV0dXJucyB0aGUgcmVzcG9uc2UuXHJcbiAqIElmIHRoZSByZXR1cm5lZCByZXNwb25zZSBoYXMgYSBzdGF0dXMgb2YgNXh4LCByZS1ydW5zIHRoZSBmdW5jdGlvbiBvbmNlIGFuZFxyXG4gKiByZXR1cm5zIHRoZSByZXNwb25zZS5cclxuICovXHJcbmZ1bmN0aW9uIHJldHJ5SWZTZXJ2ZXJFcnJvcihmbikge1xyXG4gICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciByZXN1bHQ7XHJcbiAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6IHJldHVybiBbNCAvKnlpZWxkKi8sIGZuKCldO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnN0YXR1cyA+PSA1MDAgJiYgcmVzdWx0LnN0YXR1cyA8IDYwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBJbnRlcm5hbCBTZXJ2ZXIgRXJyb3IuIFJldHJ5IHJlcXVlc3QuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBmbigpXTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHJlc3VsdF07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59XHJcbmZ1bmN0aW9uIGdldEV4cGlyZXNJbkZyb21SZXNwb25zZUV4cGlyZXNJbihyZXNwb25zZUV4cGlyZXNJbikge1xyXG4gICAgLy8gVGhpcyB3b3JrcyBiZWNhdXNlIHRoZSBzZXJ2ZXIgd2lsbCBuZXZlciByZXNwb25kIHdpdGggZnJhY3Rpb25zIG9mIGEgc2Vjb25kLlxyXG4gICAgcmV0dXJuIE51bWJlcihyZXNwb25zZUV4cGlyZXNJbi5yZXBsYWNlKCdzJywgJzAwMCcpKTtcclxufVxyXG5mdW5jdGlvbiBnZXRBdXRob3JpemF0aW9uSGVhZGVyKHJlZnJlc2hUb2tlbikge1xyXG4gICAgcmV0dXJuIElOVEVSTkFMX0FVVEhfVkVSU0lPTiArIFwiIFwiICsgcmVmcmVzaFRva2VuO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBjcmVhdGVJbnN0YWxsYXRpb25SZXF1ZXN0KGFwcENvbmZpZywgX2EpIHtcclxuICAgIHZhciBmaWQgPSBfYS5maWQ7XHJcbiAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGVuZHBvaW50LCBoZWFkZXJzLCBib2R5LCByZXF1ZXN0LCByZXNwb25zZSwgcmVzcG9uc2VWYWx1ZSwgcmVnaXN0ZXJlZEluc3RhbGxhdGlvbkVudHJ5O1xyXG4gICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2IpIHtcclxuICAgICAgICAgICAgc3dpdGNoIChfYi5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgIGVuZHBvaW50ID0gZ2V0SW5zdGFsbGF0aW9uc0VuZHBvaW50KGFwcENvbmZpZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVycyA9IGdldEhlYWRlcnMoYXBwQ29uZmlnKTtcclxuICAgICAgICAgICAgICAgICAgICBib2R5ID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWQ6IGZpZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXV0aFZlcnNpb246IElOVEVSTkFMX0FVVEhfVkVSU0lPTixcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXBwSWQ6IGFwcENvbmZpZy5hcHBJZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2RrVmVyc2lvbjogUEFDS0FHRV9WRVJTSU9OXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICByZXF1ZXN0ID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoYm9keSlcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHJldHJ5SWZTZXJ2ZXJFcnJvcihmdW5jdGlvbiAoKSB7IHJldHVybiBmZXRjaChlbmRwb2ludCwgcmVxdWVzdCk7IH0pXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICByZXNwb25zZSA9IF9iLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSByZXR1cm4gWzMgLypicmVhayovLCAzXTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCByZXNwb25zZS5qc29uKCldO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlVmFsdWUgPSBfYi5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVnaXN0ZXJlZEluc3RhbGxhdGlvbkVudHJ5ID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWQ6IHJlc3BvbnNlVmFsdWUuZmlkIHx8IGZpZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVnaXN0cmF0aW9uU3RhdHVzOiAyIC8qIENPTVBMRVRFRCAqLyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVmcmVzaFRva2VuOiByZXNwb25zZVZhbHVlLnJlZnJlc2hUb2tlbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXV0aFRva2VuOiBleHRyYWN0QXV0aFRva2VuSW5mb0Zyb21SZXNwb25zZShyZXNwb25zZVZhbHVlLmF1dGhUb2tlbilcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCByZWdpc3RlcmVkSW5zdGFsbGF0aW9uRW50cnldO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAzOiByZXR1cm4gWzQgLyp5aWVsZCovLCBnZXRFcnJvckZyb21SZXNwb25zZSgnQ3JlYXRlIEluc3RhbGxhdGlvbicsIHJlc3BvbnNlKV07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDQ6IHRocm93IF9iLnNlbnQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKiBSZXR1cm5zIGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIGFmdGVyIGdpdmVuIHRpbWUgcGFzc2VzLiAqL1xyXG5mdW5jdGlvbiBzbGVlcChtcykge1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7XHJcbiAgICAgICAgc2V0VGltZW91dChyZXNvbHZlLCBtcyk7XHJcbiAgICB9KTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gYnVmZmVyVG9CYXNlNjRVcmxTYWZlKGFycmF5KSB7XHJcbiAgICB2YXIgYjY0ID0gYnRvYShTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KFN0cmluZywgX19zcHJlYWQoYXJyYXkpKSk7XHJcbiAgICByZXR1cm4gYjY0LnJlcGxhY2UoL1xcKy9nLCAnLScpLnJlcGxhY2UoL1xcLy9nLCAnXycpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG52YXIgVkFMSURfRklEX1BBVFRFUk4gPSAvXltjZGVmXVtcXHctXXsyMX0kLztcclxudmFyIElOVkFMSURfRklEID0gJyc7XHJcbi8qKlxyXG4gKiBHZW5lcmF0ZXMgYSBuZXcgRklEIHVzaW5nIHJhbmRvbSB2YWx1ZXMgZnJvbSBXZWIgQ3J5cHRvIEFQSS5cclxuICogUmV0dXJucyBhbiBlbXB0eSBzdHJpbmcgaWYgRklEIGdlbmVyYXRpb24gZmFpbHMgZm9yIGFueSByZWFzb24uXHJcbiAqL1xyXG5mdW5jdGlvbiBnZW5lcmF0ZUZpZCgpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgLy8gQSB2YWxpZCBGSUQgaGFzIGV4YWN0bHkgMjIgYmFzZTY0IGNoYXJhY3RlcnMsIHdoaWNoIGlzIDEzMiBiaXRzLCBvciAxNi41XHJcbiAgICAgICAgLy8gYnl0ZXMuIG91ciBpbXBsZW1lbnRhdGlvbiBnZW5lcmF0ZXMgYSAxNyBieXRlIGFycmF5IGluc3RlYWQuXHJcbiAgICAgICAgdmFyIGZpZEJ5dGVBcnJheSA9IG5ldyBVaW50OEFycmF5KDE3KTtcclxuICAgICAgICB2YXIgY3J5cHRvXzEgPSBzZWxmLmNyeXB0byB8fCBzZWxmLm1zQ3J5cHRvO1xyXG4gICAgICAgIGNyeXB0b18xLmdldFJhbmRvbVZhbHVlcyhmaWRCeXRlQXJyYXkpO1xyXG4gICAgICAgIC8vIFJlcGxhY2UgdGhlIGZpcnN0IDQgcmFuZG9tIGJpdHMgd2l0aCB0aGUgY29uc3RhbnQgRklEIGhlYWRlciBvZiAwYjAxMTEuXHJcbiAgICAgICAgZmlkQnl0ZUFycmF5WzBdID0gMTEyICsgKGZpZEJ5dGVBcnJheVswXSAlIDE2KTtcclxuICAgICAgICB2YXIgZmlkID0gZW5jb2RlKGZpZEJ5dGVBcnJheSk7XHJcbiAgICAgICAgcmV0dXJuIFZBTElEX0ZJRF9QQVRURVJOLnRlc3QoZmlkKSA/IGZpZCA6IElOVkFMSURfRklEO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKF9hKSB7XHJcbiAgICAgICAgLy8gRklEIGdlbmVyYXRpb24gZXJyb3JlZFxyXG4gICAgICAgIHJldHVybiBJTlZBTElEX0ZJRDtcclxuICAgIH1cclxufVxyXG4vKiogQ29udmVydHMgYSBGSUQgVWludDhBcnJheSB0byBhIGJhc2U2NCBzdHJpbmcgcmVwcmVzZW50YXRpb24uICovXHJcbmZ1bmN0aW9uIGVuY29kZShmaWRCeXRlQXJyYXkpIHtcclxuICAgIHZhciBiNjRTdHJpbmcgPSBidWZmZXJUb0Jhc2U2NFVybFNhZmUoZmlkQnl0ZUFycmF5KTtcclxuICAgIC8vIFJlbW92ZSB0aGUgMjNyZCBjaGFyYWN0ZXIgdGhhdCB3YXMgYWRkZWQgYmVjYXVzZSBvZiB0aGUgZXh0cmEgNCBiaXRzIGF0IHRoZVxyXG4gICAgLy8gZW5kIG9mIG91ciAxNyBieXRlIGFycmF5LCBhbmQgdGhlICc9JyBwYWRkaW5nLlxyXG4gICAgcmV0dXJuIGI2NFN0cmluZy5zdWJzdHIoMCwgMjIpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG52YXIgREFUQUJBU0VfTkFNRSA9ICdmaXJlYmFzZS1pbnN0YWxsYXRpb25zLWRhdGFiYXNlJztcclxudmFyIERBVEFCQVNFX1ZFUlNJT04gPSAxO1xyXG52YXIgT0JKRUNUX1NUT1JFX05BTUUgPSAnZmlyZWJhc2UtaW5zdGFsbGF0aW9ucy1zdG9yZSc7XHJcbnZhciBkYlByb21pc2UgPSBudWxsO1xyXG5mdW5jdGlvbiBnZXREYlByb21pc2UoKSB7XHJcbiAgICBpZiAoIWRiUHJvbWlzZSkge1xyXG4gICAgICAgIGRiUHJvbWlzZSA9IG9wZW5EYihEQVRBQkFTRV9OQU1FLCBEQVRBQkFTRV9WRVJTSU9OLCBmdW5jdGlvbiAodXBncmFkZURCKSB7XHJcbiAgICAgICAgICAgIC8vIFdlIGRvbid0IHVzZSAnYnJlYWsnIGluIHRoaXMgc3dpdGNoIHN0YXRlbWVudCwgdGhlIGZhbGwtdGhyb3VnaFxyXG4gICAgICAgICAgICAvLyBiZWhhdmlvciBpcyB3aGF0IHdlIHdhbnQsIGJlY2F1c2UgaWYgdGhlcmUgYXJlIG11bHRpcGxlIHZlcnNpb25zIGJldHdlZW5cclxuICAgICAgICAgICAgLy8gdGhlIG9sZCB2ZXJzaW9uIGFuZCB0aGUgY3VycmVudCB2ZXJzaW9uLCB3ZSB3YW50IEFMTCB0aGUgbWlncmF0aW9uc1xyXG4gICAgICAgICAgICAvLyB0aGF0IGNvcnJlc3BvbmQgdG8gdGhvc2UgdmVyc2lvbnMgdG8gcnVuLCBub3Qgb25seSB0aGUgbGFzdCBvbmUuXHJcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBkZWZhdWx0LWNhc2VcclxuICAgICAgICAgICAgc3dpdGNoICh1cGdyYWRlREIub2xkVmVyc2lvbikge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgIHVwZ3JhZGVEQi5jcmVhdGVPYmplY3RTdG9yZShPQkpFQ1RfU1RPUkVfTkFNRSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHJldHVybiBkYlByb21pc2U7XHJcbn1cclxuLyoqIEFzc2lnbnMgb3Igb3ZlcndyaXRlcyB0aGUgcmVjb3JkIGZvciB0aGUgZ2l2ZW4ga2V5IHdpdGggdGhlIGdpdmVuIHZhbHVlLiAqL1xyXG5mdW5jdGlvbiBzZXQoYXBwQ29uZmlnLCB2YWx1ZSkge1xyXG4gICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBrZXksIGRiLCB0eDtcclxuICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICBrZXkgPSBnZXRLZXkoYXBwQ29uZmlnKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBnZXREYlByb21pc2UoKV07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgZGIgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdHggPSBkYi50cmFuc2FjdGlvbihPQkpFQ1RfU1RPUkVfTkFNRSwgJ3JlYWR3cml0ZScpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHR4Lm9iamVjdFN0b3JlKE9CSkVDVF9TVE9SRV9OQU1FKS5wdXQodmFsdWUsIGtleSldO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0eC5jb21wbGV0ZV07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB2YWx1ZV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59XHJcbi8qKiBSZW1vdmVzIHJlY29yZChzKSBmcm9tIHRoZSBvYmplY3RTdG9yZSB0aGF0IG1hdGNoIHRoZSBnaXZlbiBrZXkuICovXHJcbmZ1bmN0aW9uIHJlbW92ZShhcHBDb25maWcpIHtcclxuICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIga2V5LCBkYiwgdHg7XHJcbiAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAga2V5ID0gZ2V0S2V5KGFwcENvbmZpZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgZ2V0RGJQcm9taXNlKCldO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgIGRiID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHR4ID0gZGIudHJhbnNhY3Rpb24oT0JKRUNUX1NUT1JFX05BTUUsICdyZWFkd3JpdGUnKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0eC5vYmplY3RTdG9yZShPQkpFQ1RfU1RPUkVfTkFNRSkuZGVsZXRlKGtleSldO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0eC5jb21wbGV0ZV07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn1cclxuLyoqXHJcbiAqIEF0b21pY2FsbHkgdXBkYXRlcyBhIHJlY29yZCB3aXRoIHRoZSByZXN1bHQgb2YgdXBkYXRlRm4sIHdoaWNoIGdldHNcclxuICogY2FsbGVkIHdpdGggdGhlIGN1cnJlbnQgdmFsdWUuIElmIG5ld1ZhbHVlIGlzIHVuZGVmaW5lZCwgdGhlIHJlY29yZCBpc1xyXG4gKiBkZWxldGVkIGluc3RlYWQuXHJcbiAqIEByZXR1cm4gVXBkYXRlZCB2YWx1ZVxyXG4gKi9cclxuZnVuY3Rpb24gdXBkYXRlKGFwcENvbmZpZywgdXBkYXRlRm4pIHtcclxuICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIga2V5LCBkYiwgdHgsIHN0b3JlLCBvbGRWYWx1ZSwgbmV3VmFsdWU7XHJcbiAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAga2V5ID0gZ2V0S2V5KGFwcENvbmZpZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgZ2V0RGJQcm9taXNlKCldO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgIGRiID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHR4ID0gZGIudHJhbnNhY3Rpb24oT0JKRUNUX1NUT1JFX05BTUUsICdyZWFkd3JpdGUnKTtcclxuICAgICAgICAgICAgICAgICAgICBzdG9yZSA9IHR4Lm9iamVjdFN0b3JlKE9CSkVDVF9TVE9SRV9OQU1FKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBzdG9yZS5nZXQoa2V5KV07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgb2xkVmFsdWUgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3VmFsdWUgPSB1cGRhdGVGbihvbGRWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEobmV3VmFsdWUgPT09IHVuZGVmaW5lZCkpIHJldHVybiBbMyAvKmJyZWFrKi8sIDRdO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHN0b3JlLmRlbGV0ZShrZXkpXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgNl07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDQ6IHJldHVybiBbNCAvKnlpZWxkKi8sIHN0b3JlLnB1dChuZXdWYWx1ZSwga2V5KV07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDU6XHJcbiAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIF9hLmxhYmVsID0gNjtcclxuICAgICAgICAgICAgICAgIGNhc2UgNjogcmV0dXJuIFs0IC8qeWllbGQqLywgdHguY29tcGxldGVdO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA3OlxyXG4gICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgbmV3VmFsdWVdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufVxyXG5mdW5jdGlvbiBnZXRLZXkoYXBwQ29uZmlnKSB7XHJcbiAgICByZXR1cm4gYXBwQ29uZmlnLmFwcE5hbWUgKyBcIiFcIiArIGFwcENvbmZpZy5hcHBJZDtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFVwZGF0ZXMgYW5kIHJldHVybnMgdGhlIEluc3RhbGxhdGlvbkVudHJ5IGZyb20gdGhlIGRhdGFiYXNlLlxyXG4gKiBBbHNvIHRyaWdnZXJzIGEgcmVnaXN0cmF0aW9uIHJlcXVlc3QgaWYgaXQgaXMgbmVjZXNzYXJ5IGFuZCBwb3NzaWJsZS5cclxuICovXHJcbmZ1bmN0aW9uIGdldEluc3RhbGxhdGlvbkVudHJ5KGFwcENvbmZpZykge1xyXG4gICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciByZWdpc3RyYXRpb25Qcm9taXNlLCBpbnN0YWxsYXRpb25FbnRyeSwgX2E7XHJcbiAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYikge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKF9iLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6IHJldHVybiBbNCAvKnlpZWxkKi8sIHVwZGF0ZShhcHBDb25maWcsIGZ1bmN0aW9uIChvbGRFbnRyeSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW5zdGFsbGF0aW9uRW50cnkgPSB1cGRhdGVPckNyZWF0ZUluc3RhbGxhdGlvbkVudHJ5KG9sZEVudHJ5KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVudHJ5V2l0aFByb21pc2UgPSB0cmlnZ2VyUmVnaXN0cmF0aW9uSWZOZWNlc3NhcnkoYXBwQ29uZmlnLCBpbnN0YWxsYXRpb25FbnRyeSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZ2lzdHJhdGlvblByb21pc2UgPSBlbnRyeVdpdGhQcm9taXNlLnJlZ2lzdHJhdGlvblByb21pc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlbnRyeVdpdGhQcm9taXNlLmluc3RhbGxhdGlvbkVudHJ5O1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICBpbnN0YWxsYXRpb25FbnRyeSA9IF9iLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIShpbnN0YWxsYXRpb25FbnRyeS5maWQgPT09IElOVkFMSURfRklEKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgM107XHJcbiAgICAgICAgICAgICAgICAgICAgX2EgPSB7fTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCByZWdpc3RyYXRpb25Qcm9taXNlXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMjogXHJcbiAgICAgICAgICAgICAgICAvLyBGSUQgZ2VuZXJhdGlvbiBmYWlsZWQuIFdhaXRpbmcgZm9yIHRoZSBGSUQgZnJvbSB0aGUgc2VydmVyLlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIChfYS5pbnN0YWxsYXRpb25FbnRyeSA9IF9iLnNlbnQoKSwgX2EpXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMzogcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5zdGFsbGF0aW9uRW50cnk6IGluc3RhbGxhdGlvbkVudHJ5LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWdpc3RyYXRpb25Qcm9taXNlOiByZWdpc3RyYXRpb25Qcm9taXNlXHJcbiAgICAgICAgICAgICAgICAgICAgfV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59XHJcbi8qKlxyXG4gKiBDcmVhdGVzIGEgbmV3IEluc3RhbGxhdGlvbiBFbnRyeSBpZiBvbmUgZG9lcyBub3QgZXhpc3QuXHJcbiAqIEFsc28gY2xlYXJzIHRpbWVkIG91dCBwZW5kaW5nIHJlcXVlc3RzLlxyXG4gKi9cclxuZnVuY3Rpb24gdXBkYXRlT3JDcmVhdGVJbnN0YWxsYXRpb25FbnRyeShvbGRFbnRyeSkge1xyXG4gICAgdmFyIGVudHJ5ID0gb2xkRW50cnkgfHwge1xyXG4gICAgICAgIGZpZDogZ2VuZXJhdGVGaWQoKSxcclxuICAgICAgICByZWdpc3RyYXRpb25TdGF0dXM6IDAgLyogTk9UX1NUQVJURUQgKi9cclxuICAgIH07XHJcbiAgICByZXR1cm4gY2xlYXJUaW1lZE91dFJlcXVlc3QoZW50cnkpO1xyXG59XHJcbi8qKlxyXG4gKiBJZiB0aGUgRmlyZWJhc2UgSW5zdGFsbGF0aW9uIGlzIG5vdCByZWdpc3RlcmVkIHlldCwgdGhpcyB3aWxsIHRyaWdnZXIgdGhlXHJcbiAqIHJlZ2lzdHJhdGlvbiBhbmQgcmV0dXJuIGFuIEluUHJvZ3Jlc3NJbnN0YWxsYXRpb25FbnRyeS5cclxuICpcclxuICogSWYgcmVnaXN0cmF0aW9uUHJvbWlzZSBkb2VzIG5vdCBleGlzdCwgdGhlIGluc3RhbGxhdGlvbkVudHJ5IGlzIGd1YXJhbnRlZWRcclxuICogdG8gYmUgcmVnaXN0ZXJlZC5cclxuICovXHJcbmZ1bmN0aW9uIHRyaWdnZXJSZWdpc3RyYXRpb25JZk5lY2Vzc2FyeShhcHBDb25maWcsIGluc3RhbGxhdGlvbkVudHJ5KSB7XHJcbiAgICBpZiAoaW5zdGFsbGF0aW9uRW50cnkucmVnaXN0cmF0aW9uU3RhdHVzID09PSAwIC8qIE5PVF9TVEFSVEVEICovKSB7XHJcbiAgICAgICAgaWYgKCFuYXZpZ2F0b3Iub25MaW5lKSB7XHJcbiAgICAgICAgICAgIC8vIFJlZ2lzdHJhdGlvbiByZXF1aXJlZCBidXQgYXBwIGlzIG9mZmxpbmUuXHJcbiAgICAgICAgICAgIHZhciByZWdpc3RyYXRpb25Qcm9taXNlV2l0aEVycm9yID0gUHJvbWlzZS5yZWplY3QoRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJhcHAtb2ZmbGluZVwiIC8qIEFQUF9PRkZMSU5FICovKSk7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBpbnN0YWxsYXRpb25FbnRyeTogaW5zdGFsbGF0aW9uRW50cnksXHJcbiAgICAgICAgICAgICAgICByZWdpc3RyYXRpb25Qcm9taXNlOiByZWdpc3RyYXRpb25Qcm9taXNlV2l0aEVycm9yXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFRyeSByZWdpc3RlcmluZy4gQ2hhbmdlIHN0YXR1cyB0byBJTl9QUk9HUkVTUy5cclxuICAgICAgICB2YXIgaW5Qcm9ncmVzc0VudHJ5ID0ge1xyXG4gICAgICAgICAgICBmaWQ6IGluc3RhbGxhdGlvbkVudHJ5LmZpZCxcclxuICAgICAgICAgICAgcmVnaXN0cmF0aW9uU3RhdHVzOiAxIC8qIElOX1BST0dSRVNTICovLFxyXG4gICAgICAgICAgICByZWdpc3RyYXRpb25UaW1lOiBEYXRlLm5vdygpXHJcbiAgICAgICAgfTtcclxuICAgICAgICB2YXIgcmVnaXN0cmF0aW9uUHJvbWlzZSA9IHJlZ2lzdGVySW5zdGFsbGF0aW9uKGFwcENvbmZpZywgaW5Qcm9ncmVzc0VudHJ5KTtcclxuICAgICAgICByZXR1cm4geyBpbnN0YWxsYXRpb25FbnRyeTogaW5Qcm9ncmVzc0VudHJ5LCByZWdpc3RyYXRpb25Qcm9taXNlOiByZWdpc3RyYXRpb25Qcm9taXNlIH07XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChpbnN0YWxsYXRpb25FbnRyeS5yZWdpc3RyYXRpb25TdGF0dXMgPT09IDEgLyogSU5fUFJPR1JFU1MgKi8pIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBpbnN0YWxsYXRpb25FbnRyeTogaW5zdGFsbGF0aW9uRW50cnksXHJcbiAgICAgICAgICAgIHJlZ2lzdHJhdGlvblByb21pc2U6IHdhaXRVbnRpbEZpZFJlZ2lzdHJhdGlvbihhcHBDb25maWcpXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHJldHVybiB7IGluc3RhbGxhdGlvbkVudHJ5OiBpbnN0YWxsYXRpb25FbnRyeSB9O1xyXG4gICAgfVxyXG59XHJcbi8qKiBUaGlzIHdpbGwgYmUgZXhlY3V0ZWQgb25seSBvbmNlIGZvciBlYWNoIG5ldyBGaXJlYmFzZSBJbnN0YWxsYXRpb24uICovXHJcbmZ1bmN0aW9uIHJlZ2lzdGVySW5zdGFsbGF0aW9uKGFwcENvbmZpZywgaW5zdGFsbGF0aW9uRW50cnkpIHtcclxuICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgcmVnaXN0ZXJlZEluc3RhbGxhdGlvbkVudHJ5LCBlXzE7XHJcbiAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgX2EudHJ5cy5wdXNoKFswLCAyLCAsIDddKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBjcmVhdGVJbnN0YWxsYXRpb25SZXF1ZXN0KGFwcENvbmZpZywgaW5zdGFsbGF0aW9uRW50cnkpXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICByZWdpc3RlcmVkSW5zdGFsbGF0aW9uRW50cnkgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHNldChhcHBDb25maWcsIHJlZ2lzdGVyZWRJbnN0YWxsYXRpb25FbnRyeSldO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgIGVfMSA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIShpc1NlcnZlckVycm9yKGVfMSkgJiYgZV8xLnNlcnZlckNvZGUgPT09IDQwOSkpIHJldHVybiBbMyAvKmJyZWFrKi8sIDRdO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFNlcnZlciByZXR1cm5lZCBhIFwiRklEIGNhbiBub3QgYmUgdXNlZFwiIGVycm9yLlxyXG4gICAgICAgICAgICAgICAgICAgIC8vIEdlbmVyYXRlIGEgbmV3IElEIG5leHQgdGltZS5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCByZW1vdmUoYXBwQ29uZmlnKV07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gU2VydmVyIHJldHVybmVkIGEgXCJGSUQgY2FuIG5vdCBiZSB1c2VkXCIgZXJyb3IuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gR2VuZXJhdGUgYSBuZXcgSUQgbmV4dCB0aW1lLlxyXG4gICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCA2XTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNDogXHJcbiAgICAgICAgICAgICAgICAvLyBSZWdpc3RyYXRpb24gZmFpbGVkLiBTZXQgRklEIGFzIG5vdCByZWdpc3RlcmVkLlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgc2V0KGFwcENvbmZpZywge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWQ6IGluc3RhbGxhdGlvbkVudHJ5LmZpZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVnaXN0cmF0aW9uU3RhdHVzOiAwIC8qIE5PVF9TVEFSVEVEICovXHJcbiAgICAgICAgICAgICAgICAgICAgfSldO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA1OlxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFJlZ2lzdHJhdGlvbiBmYWlsZWQuIFNldCBGSUQgYXMgbm90IHJlZ2lzdGVyZWQuXHJcbiAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIF9hLmxhYmVsID0gNjtcclxuICAgICAgICAgICAgICAgIGNhc2UgNjogdGhyb3cgZV8xO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA3OiByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59XHJcbi8qKiBDYWxsIGlmIEZJRCByZWdpc3RyYXRpb24gaXMgcGVuZGluZyBpbiBhbm90aGVyIHJlcXVlc3QuICovXHJcbmZ1bmN0aW9uIHdhaXRVbnRpbEZpZFJlZ2lzdHJhdGlvbihhcHBDb25maWcpIHtcclxuICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgZW50cnksIF9hLCBpbnN0YWxsYXRpb25FbnRyeSwgcmVnaXN0cmF0aW9uUHJvbWlzZTtcclxuICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9iKSB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAoX2IubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMDogcmV0dXJuIFs0IC8qeWllbGQqLywgdXBkYXRlSW5zdGFsbGF0aW9uUmVxdWVzdChhcHBDb25maWcpXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICBlbnRyeSA9IF9iLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICBfYi5sYWJlbCA9IDI7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEoZW50cnkucmVnaXN0cmF0aW9uU3RhdHVzID09PSAxIC8qIElOX1BST0dSRVNTICovKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgNV07XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY3JlYXRlSW5zdGFsbGF0aW9uIHJlcXVlc3Qgc3RpbGwgaW4gcHJvZ3Jlc3MuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgc2xlZXAoMTAwKV07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY3JlYXRlSW5zdGFsbGF0aW9uIHJlcXVlc3Qgc3RpbGwgaW4gcHJvZ3Jlc3MuXHJcbiAgICAgICAgICAgICAgICAgICAgX2Iuc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHVwZGF0ZUluc3RhbGxhdGlvblJlcXVlc3QoYXBwQ29uZmlnKV07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDQ6XHJcbiAgICAgICAgICAgICAgICAgICAgZW50cnkgPSBfYi5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgMl07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDU6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEoZW50cnkucmVnaXN0cmF0aW9uU3RhdHVzID09PSAwIC8qIE5PVF9TVEFSVEVEICovKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgN107XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgZ2V0SW5zdGFsbGF0aW9uRW50cnkoYXBwQ29uZmlnKV07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDY6XHJcbiAgICAgICAgICAgICAgICAgICAgX2EgPSBfYi5zZW50KCksIGluc3RhbGxhdGlvbkVudHJ5ID0gX2EuaW5zdGFsbGF0aW9uRW50cnksIHJlZ2lzdHJhdGlvblByb21pc2UgPSBfYS5yZWdpc3RyYXRpb25Qcm9taXNlO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZWdpc3RyYXRpb25Qcm9taXNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCByZWdpc3RyYXRpb25Qcm9taXNlXTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIHRoZXJlIGlzIG5vIHJlZ2lzdHJhdGlvblByb21pc2UsIGVudHJ5IGlzIHJlZ2lzdGVyZWQuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBpbnN0YWxsYXRpb25FbnRyeV07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2FzZSA3OiByZXR1cm4gWzIgLypyZXR1cm4qLywgZW50cnldO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufVxyXG4vKipcclxuICogQ2FsbGVkIG9ubHkgaWYgdGhlcmUgaXMgYSBDcmVhdGVJbnN0YWxsYXRpb24gcmVxdWVzdCBpbiBwcm9ncmVzcy5cclxuICpcclxuICogVXBkYXRlcyB0aGUgSW5zdGFsbGF0aW9uRW50cnkgaW4gdGhlIERCIGJhc2VkIG9uIHRoZSBzdGF0dXMgb2YgdGhlXHJcbiAqIENyZWF0ZUluc3RhbGxhdGlvbiByZXF1ZXN0LlxyXG4gKlxyXG4gKiBSZXR1cm5zIHRoZSB1cGRhdGVkIEluc3RhbGxhdGlvbkVudHJ5LlxyXG4gKi9cclxuZnVuY3Rpb24gdXBkYXRlSW5zdGFsbGF0aW9uUmVxdWVzdChhcHBDb25maWcpIHtcclxuICAgIHJldHVybiB1cGRhdGUoYXBwQ29uZmlnLCBmdW5jdGlvbiAob2xkRW50cnkpIHtcclxuICAgICAgICBpZiAoIW9sZEVudHJ5KSB7XHJcbiAgICAgICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiaW5zdGFsbGF0aW9uLW5vdC1mb3VuZFwiIC8qIElOU1RBTExBVElPTl9OT1RfRk9VTkQgKi8pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gY2xlYXJUaW1lZE91dFJlcXVlc3Qob2xkRW50cnkpO1xyXG4gICAgfSk7XHJcbn1cclxuZnVuY3Rpb24gY2xlYXJUaW1lZE91dFJlcXVlc3QoZW50cnkpIHtcclxuICAgIGlmIChoYXNJbnN0YWxsYXRpb25SZXF1ZXN0VGltZWRPdXQoZW50cnkpKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgZmlkOiBlbnRyeS5maWQsXHJcbiAgICAgICAgICAgIHJlZ2lzdHJhdGlvblN0YXR1czogMCAvKiBOT1RfU1RBUlRFRCAqL1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZW50cnk7XHJcbn1cclxuZnVuY3Rpb24gaGFzSW5zdGFsbGF0aW9uUmVxdWVzdFRpbWVkT3V0KGluc3RhbGxhdGlvbkVudHJ5KSB7XHJcbiAgICByZXR1cm4gKGluc3RhbGxhdGlvbkVudHJ5LnJlZ2lzdHJhdGlvblN0YXR1cyA9PT0gMSAvKiBJTl9QUk9HUkVTUyAqLyAmJlxyXG4gICAgICAgIGluc3RhbGxhdGlvbkVudHJ5LnJlZ2lzdHJhdGlvblRpbWUgKyBQRU5ESU5HX1RJTUVPVVRfTVMgPCBEYXRlLm5vdygpKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gZ2VuZXJhdGVBdXRoVG9rZW5SZXF1ZXN0KF9hLCBpbnN0YWxsYXRpb25FbnRyeSkge1xyXG4gICAgdmFyIGFwcENvbmZpZyA9IF9hLmFwcENvbmZpZywgcGxhdGZvcm1Mb2dnZXJQcm92aWRlciA9IF9hLnBsYXRmb3JtTG9nZ2VyUHJvdmlkZXI7XHJcbiAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGVuZHBvaW50LCBoZWFkZXJzLCBwbGF0Zm9ybUxvZ2dlciwgYm9keSwgcmVxdWVzdCwgcmVzcG9uc2UsIHJlc3BvbnNlVmFsdWUsIGNvbXBsZXRlZEF1dGhUb2tlbjtcclxuICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9iKSB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAoX2IubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICBlbmRwb2ludCA9IGdldEdlbmVyYXRlQXV0aFRva2VuRW5kcG9pbnQoYXBwQ29uZmlnLCBpbnN0YWxsYXRpb25FbnRyeSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVycyA9IGdldEhlYWRlcnNXaXRoQXV0aChhcHBDb25maWcsIGluc3RhbGxhdGlvbkVudHJ5KTtcclxuICAgICAgICAgICAgICAgICAgICBwbGF0Zm9ybUxvZ2dlciA9IHBsYXRmb3JtTG9nZ2VyUHJvdmlkZXIuZ2V0SW1tZWRpYXRlKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uYWw6IHRydWVcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocGxhdGZvcm1Mb2dnZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVycy5hcHBlbmQoJ3gtZmlyZWJhc2UtY2xpZW50JywgcGxhdGZvcm1Mb2dnZXIuZ2V0UGxhdGZvcm1JbmZvU3RyaW5nKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBib2R5ID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnN0YWxsYXRpb246IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNka1ZlcnNpb246IFBBQ0tBR0VfVkVSU0lPTlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICByZXF1ZXN0ID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoYm9keSlcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHJldHJ5SWZTZXJ2ZXJFcnJvcihmdW5jdGlvbiAoKSB7IHJldHVybiBmZXRjaChlbmRwb2ludCwgcmVxdWVzdCk7IH0pXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICByZXNwb25zZSA9IF9iLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSByZXR1cm4gWzMgLypicmVhayovLCAzXTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCByZXNwb25zZS5qc29uKCldO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlVmFsdWUgPSBfYi5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29tcGxldGVkQXV0aFRva2VuID0gZXh0cmFjdEF1dGhUb2tlbkluZm9Gcm9tUmVzcG9uc2UocmVzcG9uc2VWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIGNvbXBsZXRlZEF1dGhUb2tlbl07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDM6IHJldHVybiBbNCAvKnlpZWxkKi8sIGdldEVycm9yRnJvbVJlc3BvbnNlKCdHZW5lcmF0ZSBBdXRoIFRva2VuJywgcmVzcG9uc2UpXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNDogdGhyb3cgX2Iuc2VudCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufVxyXG5mdW5jdGlvbiBnZXRHZW5lcmF0ZUF1dGhUb2tlbkVuZHBvaW50KGFwcENvbmZpZywgX2EpIHtcclxuICAgIHZhciBmaWQgPSBfYS5maWQ7XHJcbiAgICByZXR1cm4gZ2V0SW5zdGFsbGF0aW9uc0VuZHBvaW50KGFwcENvbmZpZykgKyBcIi9cIiArIGZpZCArIFwiL2F1dGhUb2tlbnM6Z2VuZXJhdGVcIjtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFJldHVybnMgYSB2YWxpZCBhdXRoZW50aWNhdGlvbiB0b2tlbiBmb3IgdGhlIGluc3RhbGxhdGlvbi4gR2VuZXJhdGVzIGEgbmV3XHJcbiAqIHRva2VuIGlmIG9uZSBkb2Vzbid0IGV4aXN0LCBpcyBleHBpcmVkIG9yIGFib3V0IHRvIGV4cGlyZS5cclxuICpcclxuICogU2hvdWxkIG9ubHkgYmUgY2FsbGVkIGlmIHRoZSBGaXJlYmFzZSBJbnN0YWxsYXRpb24gaXMgcmVnaXN0ZXJlZC5cclxuICovXHJcbmZ1bmN0aW9uIHJlZnJlc2hBdXRoVG9rZW4oZGVwZW5kZW5jaWVzLCBmb3JjZVJlZnJlc2gpIHtcclxuICAgIGlmIChmb3JjZVJlZnJlc2ggPT09IHZvaWQgMCkgeyBmb3JjZVJlZnJlc2ggPSBmYWxzZTsgfVxyXG4gICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciB0b2tlblByb21pc2UsIGVudHJ5LCBhdXRoVG9rZW4sIF9hO1xyXG4gICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2IpIHtcclxuICAgICAgICAgICAgc3dpdGNoIChfYi5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAwOiByZXR1cm4gWzQgLyp5aWVsZCovLCB1cGRhdGUoZGVwZW5kZW5jaWVzLmFwcENvbmZpZywgZnVuY3Rpb24gKG9sZEVudHJ5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaXNFbnRyeVJlZ2lzdGVyZWQob2xkRW50cnkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcIm5vdC1yZWdpc3RlcmVkXCIgLyogTk9UX1JFR0lTVEVSRUQgKi8pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvbGRBdXRoVG9rZW4gPSBvbGRFbnRyeS5hdXRoVG9rZW47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZm9yY2VSZWZyZXNoICYmIGlzQXV0aFRva2VuVmFsaWQob2xkQXV0aFRva2VuKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlcmUgaXMgYSB2YWxpZCB0b2tlbiBpbiB0aGUgREIuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gb2xkRW50cnk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAob2xkQXV0aFRva2VuLnJlcXVlc3RTdGF0dXMgPT09IDEgLyogSU5fUFJPR1JFU1MgKi8pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoZXJlIGFscmVhZHkgaXMgYSB0b2tlbiByZXF1ZXN0IGluIHByb2dyZXNzLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9rZW5Qcm9taXNlID0gd2FpdFVudGlsQXV0aFRva2VuUmVxdWVzdChkZXBlbmRlbmNpZXMsIGZvcmNlUmVmcmVzaCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gb2xkRW50cnk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBObyB0b2tlbiBvciB0b2tlbiBleHBpcmVkLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFuYXZpZ2F0b3Iub25MaW5lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJhcHAtb2ZmbGluZVwiIC8qIEFQUF9PRkZMSU5FICovKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpblByb2dyZXNzRW50cnkgPSBtYWtlQXV0aFRva2VuUmVxdWVzdEluUHJvZ3Jlc3NFbnRyeShvbGRFbnRyeSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b2tlblByb21pc2UgPSBmZXRjaEF1dGhUb2tlbkZyb21TZXJ2ZXIoZGVwZW5kZW5jaWVzLCBpblByb2dyZXNzRW50cnkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGluUHJvZ3Jlc3NFbnRyeTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICBlbnRyeSA9IF9iLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXRva2VuUHJvbWlzZSkgcmV0dXJuIFszIC8qYnJlYWsqLywgM107XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdG9rZW5Qcm9taXNlXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICBfYSA9IF9iLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCA0XTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgICAgICBfYSA9IGVudHJ5LmF1dGhUb2tlbjtcclxuICAgICAgICAgICAgICAgICAgICBfYi5sYWJlbCA9IDQ7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDQ6XHJcbiAgICAgICAgICAgICAgICAgICAgYXV0aFRva2VuID0gX2E7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIGF1dGhUb2tlbl07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59XHJcbi8qKlxyXG4gKiBDYWxsIG9ubHkgaWYgRklEIGlzIHJlZ2lzdGVyZWQgYW5kIEF1dGggVG9rZW4gcmVxdWVzdCBpcyBpbiBwcm9ncmVzcy5cclxuICpcclxuICogV2FpdHMgdW50aWwgdGhlIGN1cnJlbnQgcGVuZGluZyByZXF1ZXN0IGZpbmlzaGVzLiBJZiB0aGUgcmVxdWVzdCB0aW1lcyBvdXQsXHJcbiAqIHRyaWVzIG9uY2UgaW4gdGhpcyB0aHJlYWQgYXMgd2VsbC5cclxuICovXHJcbmZ1bmN0aW9uIHdhaXRVbnRpbEF1dGhUb2tlblJlcXVlc3QoZGVwZW5kZW5jaWVzLCBmb3JjZVJlZnJlc2gpIHtcclxuICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgZW50cnksIGF1dGhUb2tlbjtcclxuICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMDogcmV0dXJuIFs0IC8qeWllbGQqLywgdXBkYXRlQXV0aFRva2VuUmVxdWVzdChkZXBlbmRlbmNpZXMuYXBwQ29uZmlnKV07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgZW50cnkgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSAyO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghKGVudHJ5LmF1dGhUb2tlbi5yZXF1ZXN0U3RhdHVzID09PSAxIC8qIElOX1BST0dSRVNTICovKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgNV07XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gZ2VuZXJhdGVBdXRoVG9rZW4gc3RpbGwgaW4gcHJvZ3Jlc3MuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgc2xlZXAoMTAwKV07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gZ2VuZXJhdGVBdXRoVG9rZW4gc3RpbGwgaW4gcHJvZ3Jlc3MuXHJcbiAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHVwZGF0ZUF1dGhUb2tlblJlcXVlc3QoZGVwZW5kZW5jaWVzLmFwcENvbmZpZyldO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA0OlxyXG4gICAgICAgICAgICAgICAgICAgIGVudHJ5ID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDJdO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA1OlxyXG4gICAgICAgICAgICAgICAgICAgIGF1dGhUb2tlbiA9IGVudHJ5LmF1dGhUb2tlbjtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYXV0aFRva2VuLnJlcXVlc3RTdGF0dXMgPT09IDAgLyogTk9UX1NUQVJURUQgKi8pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlIHJlcXVlc3QgdGltZWQgb3V0IG9yIGZhaWxlZCBpbiBhIGRpZmZlcmVudCBjYWxsLiBUcnkgYWdhaW4uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCByZWZyZXNoQXV0aFRva2VuKGRlcGVuZGVuY2llcywgZm9yY2VSZWZyZXNoKV07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgYXV0aFRva2VuXTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59XHJcbi8qKlxyXG4gKiBDYWxsZWQgb25seSBpZiB0aGVyZSBpcyBhIEdlbmVyYXRlQXV0aFRva2VuIHJlcXVlc3QgaW4gcHJvZ3Jlc3MuXHJcbiAqXHJcbiAqIFVwZGF0ZXMgdGhlIEluc3RhbGxhdGlvbkVudHJ5IGluIHRoZSBEQiBiYXNlZCBvbiB0aGUgc3RhdHVzIG9mIHRoZVxyXG4gKiBHZW5lcmF0ZUF1dGhUb2tlbiByZXF1ZXN0LlxyXG4gKlxyXG4gKiBSZXR1cm5zIHRoZSB1cGRhdGVkIEluc3RhbGxhdGlvbkVudHJ5LlxyXG4gKi9cclxuZnVuY3Rpb24gdXBkYXRlQXV0aFRva2VuUmVxdWVzdChhcHBDb25maWcpIHtcclxuICAgIHJldHVybiB1cGRhdGUoYXBwQ29uZmlnLCBmdW5jdGlvbiAob2xkRW50cnkpIHtcclxuICAgICAgICBpZiAoIWlzRW50cnlSZWdpc3RlcmVkKG9sZEVudHJ5KSkge1xyXG4gICAgICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcIm5vdC1yZWdpc3RlcmVkXCIgLyogTk9UX1JFR0lTVEVSRUQgKi8pO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgb2xkQXV0aFRva2VuID0gb2xkRW50cnkuYXV0aFRva2VuO1xyXG4gICAgICAgIGlmIChoYXNBdXRoVG9rZW5SZXF1ZXN0VGltZWRPdXQob2xkQXV0aFRva2VuKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gX19hc3NpZ24oX19hc3NpZ24oe30sIG9sZEVudHJ5KSwgeyBhdXRoVG9rZW46IHsgcmVxdWVzdFN0YXR1czogMCAvKiBOT1RfU1RBUlRFRCAqLyB9IH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gb2xkRW50cnk7XHJcbiAgICB9KTtcclxufVxyXG5mdW5jdGlvbiBmZXRjaEF1dGhUb2tlbkZyb21TZXJ2ZXIoZGVwZW5kZW5jaWVzLCBpbnN0YWxsYXRpb25FbnRyeSkge1xyXG4gICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBhdXRoVG9rZW4sIHVwZGF0ZWRJbnN0YWxsYXRpb25FbnRyeSwgZV8xLCB1cGRhdGVkSW5zdGFsbGF0aW9uRW50cnk7XHJcbiAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgX2EudHJ5cy5wdXNoKFswLCAzLCAsIDhdKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBnZW5lcmF0ZUF1dGhUb2tlblJlcXVlc3QoZGVwZW5kZW5jaWVzLCBpbnN0YWxsYXRpb25FbnRyeSldO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgIGF1dGhUb2tlbiA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICB1cGRhdGVkSW5zdGFsbGF0aW9uRW50cnkgPSBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgaW5zdGFsbGF0aW9uRW50cnkpLCB7IGF1dGhUb2tlbjogYXV0aFRva2VuIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHNldChkZXBlbmRlbmNpZXMuYXBwQ29uZmlnLCB1cGRhdGVkSW5zdGFsbGF0aW9uRW50cnkpXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIGF1dGhUb2tlbl07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICAgICAgZV8xID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghKGlzU2VydmVyRXJyb3IoZV8xKSAmJiAoZV8xLnNlcnZlckNvZGUgPT09IDQwMSB8fCBlXzEuc2VydmVyQ29kZSA9PT0gNDA0KSkpIHJldHVybiBbMyAvKmJyZWFrKi8sIDVdO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFNlcnZlciByZXR1cm5lZCBhIFwiRklEIG5vdCBmb3VuZFwiIG9yIGEgXCJJbnZhbGlkIGF1dGhlbnRpY2F0aW9uXCIgZXJyb3IuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gR2VuZXJhdGUgYSBuZXcgSUQgbmV4dCB0aW1lLlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHJlbW92ZShkZXBlbmRlbmNpZXMuYXBwQ29uZmlnKV07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDQ6XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gU2VydmVyIHJldHVybmVkIGEgXCJGSUQgbm90IGZvdW5kXCIgb3IgYSBcIkludmFsaWQgYXV0aGVudGljYXRpb25cIiBlcnJvci5cclxuICAgICAgICAgICAgICAgICAgICAvLyBHZW5lcmF0ZSBhIG5ldyBJRCBuZXh0IHRpbWUuXHJcbiAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDddO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA1OlxyXG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZWRJbnN0YWxsYXRpb25FbnRyeSA9IF9fYXNzaWduKF9fYXNzaWduKHt9LCBpbnN0YWxsYXRpb25FbnRyeSksIHsgYXV0aFRva2VuOiB7IHJlcXVlc3RTdGF0dXM6IDAgLyogTk9UX1NUQVJURUQgKi8gfSB9KTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBzZXQoZGVwZW5kZW5jaWVzLmFwcENvbmZpZywgdXBkYXRlZEluc3RhbGxhdGlvbkVudHJ5KV07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDY6XHJcbiAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIF9hLmxhYmVsID0gNztcclxuICAgICAgICAgICAgICAgIGNhc2UgNzogdGhyb3cgZV8xO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA4OiByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59XHJcbmZ1bmN0aW9uIGlzRW50cnlSZWdpc3RlcmVkKGluc3RhbGxhdGlvbkVudHJ5KSB7XHJcbiAgICByZXR1cm4gKGluc3RhbGxhdGlvbkVudHJ5ICE9PSB1bmRlZmluZWQgJiZcclxuICAgICAgICBpbnN0YWxsYXRpb25FbnRyeS5yZWdpc3RyYXRpb25TdGF0dXMgPT09IDIgLyogQ09NUExFVEVEICovKTtcclxufVxyXG5mdW5jdGlvbiBpc0F1dGhUb2tlblZhbGlkKGF1dGhUb2tlbikge1xyXG4gICAgcmV0dXJuIChhdXRoVG9rZW4ucmVxdWVzdFN0YXR1cyA9PT0gMiAvKiBDT01QTEVURUQgKi8gJiZcclxuICAgICAgICAhaXNBdXRoVG9rZW5FeHBpcmVkKGF1dGhUb2tlbikpO1xyXG59XHJcbmZ1bmN0aW9uIGlzQXV0aFRva2VuRXhwaXJlZChhdXRoVG9rZW4pIHtcclxuICAgIHZhciBub3cgPSBEYXRlLm5vdygpO1xyXG4gICAgcmV0dXJuIChub3cgPCBhdXRoVG9rZW4uY3JlYXRpb25UaW1lIHx8XHJcbiAgICAgICAgYXV0aFRva2VuLmNyZWF0aW9uVGltZSArIGF1dGhUb2tlbi5leHBpcmVzSW4gPCBub3cgKyBUT0tFTl9FWFBJUkFUSU9OX0JVRkZFUik7XHJcbn1cclxuLyoqIFJldHVybnMgYW4gdXBkYXRlZCBJbnN0YWxsYXRpb25FbnRyeSB3aXRoIGFuIEluUHJvZ3Jlc3NBdXRoVG9rZW4uICovXHJcbmZ1bmN0aW9uIG1ha2VBdXRoVG9rZW5SZXF1ZXN0SW5Qcm9ncmVzc0VudHJ5KG9sZEVudHJ5KSB7XHJcbiAgICB2YXIgaW5Qcm9ncmVzc0F1dGhUb2tlbiA9IHtcclxuICAgICAgICByZXF1ZXN0U3RhdHVzOiAxIC8qIElOX1BST0dSRVNTICovLFxyXG4gICAgICAgIHJlcXVlc3RUaW1lOiBEYXRlLm5vdygpXHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIF9fYXNzaWduKF9fYXNzaWduKHt9LCBvbGRFbnRyeSksIHsgYXV0aFRva2VuOiBpblByb2dyZXNzQXV0aFRva2VuIH0pO1xyXG59XHJcbmZ1bmN0aW9uIGhhc0F1dGhUb2tlblJlcXVlc3RUaW1lZE91dChhdXRoVG9rZW4pIHtcclxuICAgIHJldHVybiAoYXV0aFRva2VuLnJlcXVlc3RTdGF0dXMgPT09IDEgLyogSU5fUFJPR1JFU1MgKi8gJiZcclxuICAgICAgICBhdXRoVG9rZW4ucmVxdWVzdFRpbWUgKyBQRU5ESU5HX1RJTUVPVVRfTVMgPCBEYXRlLm5vdygpKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gZ2V0SWQoZGVwZW5kZW5jaWVzKSB7XHJcbiAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF9hLCBpbnN0YWxsYXRpb25FbnRyeSwgcmVnaXN0cmF0aW9uUHJvbWlzZTtcclxuICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9iKSB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAoX2IubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMDogcmV0dXJuIFs0IC8qeWllbGQqLywgZ2V0SW5zdGFsbGF0aW9uRW50cnkoZGVwZW5kZW5jaWVzLmFwcENvbmZpZyldO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgIF9hID0gX2Iuc2VudCgpLCBpbnN0YWxsYXRpb25FbnRyeSA9IF9hLmluc3RhbGxhdGlvbkVudHJ5LCByZWdpc3RyYXRpb25Qcm9taXNlID0gX2EucmVnaXN0cmF0aW9uUHJvbWlzZTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocmVnaXN0cmF0aW9uUHJvbWlzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWdpc3RyYXRpb25Qcm9taXNlLmNhdGNoKGNvbnNvbGUuZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlIGluc3RhbGxhdGlvbiBpcyBhbHJlYWR5IHJlZ2lzdGVyZWQsIHVwZGF0ZSB0aGUgYXV0aGVudGljYXRpb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdG9rZW4gaWYgbmVlZGVkLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWZyZXNoQXV0aFRva2VuKGRlcGVuZGVuY2llcykuY2F0Y2goY29uc29sZS5lcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBpbnN0YWxsYXRpb25FbnRyeS5maWRdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gZ2V0VG9rZW4oZGVwZW5kZW5jaWVzLCBmb3JjZVJlZnJlc2gpIHtcclxuICAgIGlmIChmb3JjZVJlZnJlc2ggPT09IHZvaWQgMCkgeyBmb3JjZVJlZnJlc2ggPSBmYWxzZTsgfVxyXG4gICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBhdXRoVG9rZW47XHJcbiAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6IHJldHVybiBbNCAvKnlpZWxkKi8sIGNvbXBsZXRlSW5zdGFsbGF0aW9uUmVnaXN0cmF0aW9uKGRlcGVuZGVuY2llcy5hcHBDb25maWcpXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgcmVmcmVzaEF1dGhUb2tlbihkZXBlbmRlbmNpZXMsIGZvcmNlUmVmcmVzaCldO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgIGF1dGhUb2tlbiA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgYXV0aFRva2VuLnRva2VuXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn1cclxuZnVuY3Rpb24gY29tcGxldGVJbnN0YWxsYXRpb25SZWdpc3RyYXRpb24oYXBwQ29uZmlnKSB7XHJcbiAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHJlZ2lzdHJhdGlvblByb21pc2U7XHJcbiAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6IHJldHVybiBbNCAvKnlpZWxkKi8sIGdldEluc3RhbGxhdGlvbkVudHJ5KGFwcENvbmZpZyldO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgIHJlZ2lzdHJhdGlvblByb21pc2UgPSAoX2Euc2VudCgpKS5yZWdpc3RyYXRpb25Qcm9taXNlO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghcmVnaXN0cmF0aW9uUHJvbWlzZSkgcmV0dXJuIFszIC8qYnJlYWsqLywgM107XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gQSBjcmVhdGVJbnN0YWxsYXRpb24gcmVxdWVzdCBpcyBpbiBwcm9ncmVzcy4gV2FpdCB1bnRpbCBpdCBmaW5pc2hlcy5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCByZWdpc3RyYXRpb25Qcm9taXNlXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICAvLyBBIGNyZWF0ZUluc3RhbGxhdGlvbiByZXF1ZXN0IGlzIGluIHByb2dyZXNzLiBXYWl0IHVudGlsIGl0IGZpbmlzaGVzLlxyXG4gICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDM7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDM6IHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIGRlbGV0ZUluc3RhbGxhdGlvblJlcXVlc3QoYXBwQ29uZmlnLCBpbnN0YWxsYXRpb25FbnRyeSkge1xyXG4gICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBlbmRwb2ludCwgaGVhZGVycywgcmVxdWVzdCwgcmVzcG9uc2U7XHJcbiAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgZW5kcG9pbnQgPSBnZXREZWxldGVFbmRwb2ludChhcHBDb25maWcsIGluc3RhbGxhdGlvbkVudHJ5KTtcclxuICAgICAgICAgICAgICAgICAgICBoZWFkZXJzID0gZ2V0SGVhZGVyc1dpdGhBdXRoKGFwcENvbmZpZywgaW5zdGFsbGF0aW9uRW50cnkpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlcXVlc3QgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ0RFTEVURScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnNcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHJldHJ5SWZTZXJ2ZXJFcnJvcihmdW5jdGlvbiAoKSB7IHJldHVybiBmZXRjaChlbmRwb2ludCwgcmVxdWVzdCk7IH0pXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICByZXNwb25zZSA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoISFyZXNwb25zZS5vaykgcmV0dXJuIFszIC8qYnJlYWsqLywgM107XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgZ2V0RXJyb3JGcm9tUmVzcG9uc2UoJ0RlbGV0ZSBJbnN0YWxsYXRpb24nLCByZXNwb25zZSldO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAyOiB0aHJvdyBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDM6IHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn1cclxuZnVuY3Rpb24gZ2V0RGVsZXRlRW5kcG9pbnQoYXBwQ29uZmlnLCBfYSkge1xyXG4gICAgdmFyIGZpZCA9IF9hLmZpZDtcclxuICAgIHJldHVybiBnZXRJbnN0YWxsYXRpb25zRW5kcG9pbnQoYXBwQ29uZmlnKSArIFwiL1wiICsgZmlkO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBkZWxldGVJbnN0YWxsYXRpb24oZGVwZW5kZW5jaWVzKSB7XHJcbiAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGFwcENvbmZpZywgZW50cnk7XHJcbiAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgYXBwQ29uZmlnID0gZGVwZW5kZW5jaWVzLmFwcENvbmZpZztcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB1cGRhdGUoYXBwQ29uZmlnLCBmdW5jdGlvbiAob2xkRW50cnkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvbGRFbnRyeSAmJiBvbGRFbnRyeS5yZWdpc3RyYXRpb25TdGF0dXMgPT09IDAgLyogTk9UX1NUQVJURUQgKi8pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBEZWxldGUgdGhlIHVucmVnaXN0ZXJlZCBlbnRyeSB3aXRob3V0IHNlbmRpbmcgYSBkZWxldGVJbnN0YWxsYXRpb24gcmVxdWVzdC5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9sZEVudHJ5O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KV07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgZW50cnkgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFlbnRyeSkgcmV0dXJuIFszIC8qYnJlYWsqLywgNl07XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEoZW50cnkucmVnaXN0cmF0aW9uU3RhdHVzID09PSAxIC8qIElOX1BST0dSRVNTICovKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgMl07XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gQ2FuJ3QgZGVsZXRlIHdoaWxlIHRyeWluZyB0byByZWdpc3Rlci5cclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImRlbGV0ZS1wZW5kaW5nLXJlZ2lzdHJhdGlvblwiIC8qIERFTEVURV9QRU5ESU5HX1JFR0lTVFJBVElPTiAqLyk7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEoZW50cnkucmVnaXN0cmF0aW9uU3RhdHVzID09PSAyIC8qIENPTVBMRVRFRCAqLykpIHJldHVybiBbMyAvKmJyZWFrKi8sIDZdO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghIW5hdmlnYXRvci5vbkxpbmUpIHJldHVybiBbMyAvKmJyZWFrKi8sIDNdO1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiYXBwLW9mZmxpbmVcIiAvKiBBUFBfT0ZGTElORSAqLyk7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDM6IHJldHVybiBbNCAvKnlpZWxkKi8sIGRlbGV0ZUluc3RhbGxhdGlvblJlcXVlc3QoYXBwQ29uZmlnLCBlbnRyeSldO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA0OlxyXG4gICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCByZW1vdmUoYXBwQ29uZmlnKV07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDU6XHJcbiAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIF9hLmxhYmVsID0gNjtcclxuICAgICAgICAgICAgICAgIGNhc2UgNjogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gZXh0cmFjdEFwcENvbmZpZyhhcHApIHtcclxuICAgIHZhciBlXzEsIF9hO1xyXG4gICAgaWYgKCFhcHAgfHwgIWFwcC5vcHRpb25zKSB7XHJcbiAgICAgICAgdGhyb3cgZ2V0TWlzc2luZ1ZhbHVlRXJyb3IoJ0FwcCBDb25maWd1cmF0aW9uJyk7XHJcbiAgICB9XHJcbiAgICBpZiAoIWFwcC5uYW1lKSB7XHJcbiAgICAgICAgdGhyb3cgZ2V0TWlzc2luZ1ZhbHVlRXJyb3IoJ0FwcCBOYW1lJyk7XHJcbiAgICB9XHJcbiAgICAvLyBSZXF1aXJlZCBhcHAgY29uZmlnIGtleXNcclxuICAgIHZhciBjb25maWdLZXlzID0gW1xyXG4gICAgICAgICdwcm9qZWN0SWQnLFxyXG4gICAgICAgICdhcGlLZXknLFxyXG4gICAgICAgICdhcHBJZCdcclxuICAgIF07XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGZvciAodmFyIGNvbmZpZ0tleXNfMSA9IF9fdmFsdWVzKGNvbmZpZ0tleXMpLCBjb25maWdLZXlzXzFfMSA9IGNvbmZpZ0tleXNfMS5uZXh0KCk7ICFjb25maWdLZXlzXzFfMS5kb25lOyBjb25maWdLZXlzXzFfMSA9IGNvbmZpZ0tleXNfMS5uZXh0KCkpIHtcclxuICAgICAgICAgICAgdmFyIGtleU5hbWUgPSBjb25maWdLZXlzXzFfMS52YWx1ZTtcclxuICAgICAgICAgICAgaWYgKCFhcHAub3B0aW9uc1trZXlOYW1lXSkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgZ2V0TWlzc2luZ1ZhbHVlRXJyb3Ioa2V5TmFtZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZV8xXzEpIHsgZV8xID0geyBlcnJvcjogZV8xXzEgfTsgfVxyXG4gICAgZmluYWxseSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKGNvbmZpZ0tleXNfMV8xICYmICFjb25maWdLZXlzXzFfMS5kb25lICYmIChfYSA9IGNvbmZpZ0tleXNfMS5yZXR1cm4pKSBfYS5jYWxsKGNvbmZpZ0tleXNfMSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZpbmFsbHkgeyBpZiAoZV8xKSB0aHJvdyBlXzEuZXJyb3I7IH1cclxuICAgIH1cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgYXBwTmFtZTogYXBwLm5hbWUsXHJcbiAgICAgICAgcHJvamVjdElkOiBhcHAub3B0aW9ucy5wcm9qZWN0SWQsXHJcbiAgICAgICAgYXBpS2V5OiBhcHAub3B0aW9ucy5hcGlLZXksXHJcbiAgICAgICAgYXBwSWQ6IGFwcC5vcHRpb25zLmFwcElkXHJcbiAgICB9O1xyXG59XHJcbmZ1bmN0aW9uIGdldE1pc3NpbmdWYWx1ZUVycm9yKHZhbHVlTmFtZSkge1xyXG4gICAgcmV0dXJuIEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwibWlzc2luZy1hcHAtY29uZmlnLXZhbHVlc1wiIC8qIE1JU1NJTkdfQVBQX0NPTkZJR19WQUxVRVMgKi8sIHtcclxuICAgICAgICB2YWx1ZU5hbWU6IHZhbHVlTmFtZVxyXG4gICAgfSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIHJlZ2lzdGVySW5zdGFsbGF0aW9ucyhpbnN0YW5jZSkge1xyXG4gICAgdmFyIGluc3RhbGxhdGlvbnNOYW1lID0gJ2luc3RhbGxhdGlvbnMnO1xyXG4gICAgaW5zdGFuY2UuSU5URVJOQUwucmVnaXN0ZXJDb21wb25lbnQobmV3IENvbXBvbmVudChpbnN0YWxsYXRpb25zTmFtZSwgZnVuY3Rpb24gKGNvbnRhaW5lcikge1xyXG4gICAgICAgIHZhciBhcHAgPSBjb250YWluZXIuZ2V0UHJvdmlkZXIoJ2FwcCcpLmdldEltbWVkaWF0ZSgpO1xyXG4gICAgICAgIC8vIFRocm93cyBpZiBhcHAgaXNuJ3QgY29uZmlndXJlZCBwcm9wZXJseS5cclxuICAgICAgICB2YXIgYXBwQ29uZmlnID0gZXh0cmFjdEFwcENvbmZpZyhhcHApO1xyXG4gICAgICAgIHZhciBwbGF0Zm9ybUxvZ2dlclByb3ZpZGVyID0gY29udGFpbmVyLmdldFByb3ZpZGVyKCdwbGF0Zm9ybS1sb2dnZXInKTtcclxuICAgICAgICB2YXIgZGVwZW5kZW5jaWVzID0ge1xyXG4gICAgICAgICAgICBhcHBDb25maWc6IGFwcENvbmZpZyxcclxuICAgICAgICAgICAgcGxhdGZvcm1Mb2dnZXJQcm92aWRlcjogcGxhdGZvcm1Mb2dnZXJQcm92aWRlclxyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgYXBwOiBhcHAsXHJcbiAgICAgICAgICAgIGdldElkOiBmdW5jdGlvbiAoKSB7IHJldHVybiBnZXRJZChkZXBlbmRlbmNpZXMpOyB9LFxyXG4gICAgICAgICAgICBnZXRUb2tlbjogZnVuY3Rpb24gKGZvcmNlUmVmcmVzaCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGdldFRva2VuKGRlcGVuZGVuY2llcywgZm9yY2VSZWZyZXNoKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZGVsZXRlOiBmdW5jdGlvbiAoKSB7IHJldHVybiBkZWxldGVJbnN0YWxsYXRpb24oZGVwZW5kZW5jaWVzKTsgfVxyXG4gICAgICAgIH07XHJcbiAgICB9LCBcIlBVQkxJQ1wiIC8qIFBVQkxJQyAqLykpO1xyXG4gICAgaW5zdGFuY2UucmVnaXN0ZXJWZXJzaW9uKG5hbWUsIHZlcnNpb24pO1xyXG59XHJcbnJlZ2lzdGVySW5zdGFsbGF0aW9ucyhmaXJlYmFzZSk7XG5cbmV4cG9ydCB7IHJlZ2lzdGVySW5zdGFsbGF0aW9ucyB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguZXNtLmpzLm1hcFxuIiwiaW1wb3J0IEdlbmVyaWNzIGZyb20gJy4vZ2VuZXJpY3MnO1xyXG5pbXBvcnQgdHlwZSB7IFdvcmtzcGFjZSB9IGZyb20gJy4vd29ya3NwYWNlJztcclxuaW1wb3J0IHR5cGUgeyBDb21tZW50IH0gZnJvbSAnLi9jb21tZW50JztcclxuXHJcbmV4cG9ydCBjbGFzcyBDb21tZW50Rm9ybSB7XHJcbiAgZm9ybUVsZW1lbnQ6IEhUTUxGb3JtRWxlbWVudDtcclxuICB3b3Jrc3BhY2U6IFdvcmtzcGFjZTtcclxuICBjYW5jZWxDcmVhdGVCdG46IEhUTUxFbGVtZW50O1xyXG4gIGFkZENvbW1lbnRCdG46IEhUTUxFbGVtZW50O1xyXG4gIGRlbGV0ZUJ0bjogSFRNTEVsZW1lbnQ7XHJcbiAgZWRpdEJ0bjogSFRNTEVsZW1lbnQ7XHJcbiAgY2FuY2VsVXBkYXRlQnRuOiBIVE1MRWxlbWVudDtcclxuICBjb25maXJtVXBkYXRlQnRuOiBIVE1MRWxlbWVudDtcclxuICB0ZXh0SW5wdXQ6IEhUTUxUZXh0QXJlYUVsZW1lbnQ7XHJcbiAgbWVudGlvbnNTZWN0aW9uOiBIVE1MRWxlbWVudDtcclxuICBtZW50aW9uc0lucHV0OiBIVE1MU2VsZWN0RWxlbWVudDtcclxuICBidXR0b25zTW9kZXM6IEhUTUxFbGVtZW50O1xyXG4gIGNvbW1lbnRJZDogc3RyaW5nO1xyXG5cclxuICBjb25zdHJ1Y3Rvcihmb3JtRWxlbWVudDogSFRNTEZvcm1FbGVtZW50LCB3b3Jrc3BhY2U6IFdvcmtzcGFjZSkge1xyXG4gICAgdGhpcy5mb3JtRWxlbWVudCA9IGZvcm1FbGVtZW50O1xyXG4gICAgdGhpcy53b3Jrc3BhY2UgPSB3b3Jrc3BhY2U7XHJcbiAgICBmb3JtRWxlbWVudC5vbnN1Ym1pdCA9IGUgPT4geyBlLnByZXZlbnREZWZhdWx0KCkgfVxyXG4gICAgdGhpcy5jYW5jZWxDcmVhdGVCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29tbWVudEZvcm1DYW5jZWwnKTtcclxuICAgIHRoaXMuYWRkQ29tbWVudEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhZGRDb21tZW50QnRuJyk7XHJcbiAgICB0aGlzLmRlbGV0ZUJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb21tZW50Rm9ybURlbGV0ZScpO1xyXG4gICAgdGhpcy5kZWxldGVCdG4ub25jbGljayA9ICgpID0+IHRoaXMuZGVsZXRlQ29tbWVudCh0aGlzLmNvbW1lbnRJZCk7XHJcbiAgICB0aGlzLmVkaXRCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29tbWVudEZvcm1FZGl0Jyk7XHJcbiAgICB0aGlzLmVkaXRCdG4ub25jbGljayA9ICgpID0+IHRoaXMuZW5hYmxlRWRpdENvbW1lbnQodGhpcy5jb21tZW50SWQpO1xyXG4gICAgdGhpcy5jYW5jZWxVcGRhdGVCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGlzY2FyZENoYW5nZXMnKTtcclxuICAgIHRoaXMuY2FuY2VsVXBkYXRlQnRuLm9uY2xpY2sgPSAoKSA9PiB0aGlzLmRpc2NhcmRVcGRhdGUoKTtcclxuICAgIHRoaXMuY29uZmlybVVwZGF0ZUJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb25maXJtQ2hhbmdlcycpO1xyXG4gICAgdGhpcy50ZXh0SW5wdXQgPSBmb3JtRWxlbWVudC5lbGVtZW50cy5uYW1lZEl0ZW0oXCJjb21tZW50XCIpIGFzIEhUTUxUZXh0QXJlYUVsZW1lbnQ7XHJcbiAgICB0aGlzLm1lbnRpb25zU2VjdGlvbiA9IGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tZW1iZXJzJyk7XHJcbiAgICB0aGlzLm1lbnRpb25zSW5wdXQgPSBmb3JtRWxlbWVudC5lbGVtZW50cy5uYW1lZEl0ZW0oXCJtZW1iZXJzXCIpIGFzIEhUTUxTZWxlY3RFbGVtZW50O1xyXG4gICAgdGhpcy5idXR0b25zTW9kZXMgPSBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZm9ybUJ1dHRvbnNNb2RlcycpO1xyXG4gIH1cclxuXHJcbiAgc2hvd01lbnRpb25zU2VjdGlvbigpIHtcclxuICAgIHRoaXMubWVudGlvbnNTZWN0aW9uLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xyXG4gIH1cclxuXHJcbiAgaGlkZU1lbnRpb25zU2VjdGlvbigpIHtcclxuICAgIHRoaXMubWVudGlvbnNTZWN0aW9uLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVE9ETzogaGVyZSBpIGNhbiBjaGFuZ2Ugb3RoZXIgdGhpbmdzIGxpa2UgaW5wdXQgbGFiZWxzP1xyXG4gICAqL1xyXG4gIGJ1dHRvbnNWaXNpYmlsaXR5TW9kZShtb2RlOiAnY3JlYXRlJyB8ICd2aWV3JyB8ICdlZGl0Jykge1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmJ1dHRvbnNNb2Rlcy5jaGlsZHJlbi5sZW5ndGg7IGkrKykge1xyXG4gICAgICBpZiAoKHRoaXMuYnV0dG9uc01vZGVzLmNoaWxkcmVuW2ldIGFzIEhUTUxFbGVtZW50KS5kYXRhc2V0Lm1vZGUgIT09IG1vZGUpIHtcclxuICAgICAgICAodGhpcy5idXR0b25zTW9kZXMuY2hpbGRyZW5baV0gYXMgSFRNTEVsZW1lbnQpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgKHRoaXMuYnV0dG9uc01vZGVzLmNoaWxkcmVuW2ldIGFzIEhUTUxFbGVtZW50KS5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBkZWxldGVDb21tZW50KGNvbW1lbnRJZDogc3RyaW5nKSB7XHJcbiAgICBjb25zdCBpbmRleCA9IHRoaXMud29ya3NwYWNlLmNvbW1lbnRzLmZpbmRJbmRleChjID0+IGMuaWQgPT09IGNvbW1lbnRJZCk7XHJcbiAgICAvLyBEZWxldGUgcmVwcmVzZW50YXRpb25zIGZyb20gdGhlIFNWR3MuXHJcbiAgICB0aGlzLndvcmtzcGFjZS5jb21tZW50c1tpbmRleF0ucmVwcmVzZW50YXRpb25zLmZvckVhY2gociA9PiByLnJlbW92ZSgpKTtcclxuICAgIC8vIFJlbW92ZSBjb21tZW50IG9iamVjdCBmcm9tIHRoZSBhcnJheS5cclxuICAgIHRoaXMud29ya3NwYWNlLmNvbW1lbnRzLnNwbGljZShpbmRleCwgMSk7XHJcbiAgICAvLyBJbmRpY2F0ZSB0aGF0IHRoZXJlIGFyZSBjaGFuZ2VzIHRvIHNhdmUuXHJcbiAgICB0aGlzLndvcmtzcGFjZS51bnNhdmVkQ29tbWVudHNEYXRhKCk7XHJcblxyXG4gICAgLy8gSU1QT1JUQU5UIHRoaXMgbWF5IGJhIHdyb25nIHNob3VsZCBiZSBvdXRzaWRlIG9mIHRoaXMgbWV0aG9kXHJcbiAgICAvLyBJZiBpdCBoYXMgYmVlbiBjYWxsZWQgZnJvbSB0aGUgcGFuZWwgdGhlbiByZW1vdmUgdGhlIENvbW1lbnQgc2VjdGlvbiA/PyBtYXliZSBub3QgaW5zaWRlIHRoaXMgZnVuY3Rpb25cclxuICAgIHRoaXMud29ya3NwYWNlLm1haW5QYW5lbC5yZW1vdmVTZWN0aW9uKCdDb21tZW50Jyk7XHJcbiAgfVxyXG5cclxuICBkaXNhYmxlRm9ybSgpIHtcclxuICAgIHRoaXMudGV4dElucHV0LmRpc2FibGVkID0gdHJ1ZTtcclxuICAgIHRoaXMubWVudGlvbnNJbnB1dC5kaXNhYmxlZCA9IHRydWU7XHJcbiAgfVxyXG5cclxuICBlbmFibGVGb3JtKCkge1xyXG4gICAgdGhpcy50ZXh0SW5wdXQuZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgIHRoaXMubWVudGlvbnNJbnB1dC5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgdmlld0NvbW1lbnQoY29tbWVudElkOiBzdHJpbmcpIHtcclxuICAgIGNvbnN0IGNvbW1lbnQgPSB0aGlzLndvcmtzcGFjZS5jb21tZW50cy5maW5kKGMgPT4gYy5pZCA9PT0gY29tbWVudElkKTtcclxuICAgIGlmIChjb21tZW50KSB7XHJcbiAgICAgIHRoaXMuZmlsbElucHV0cyhjb21tZW50KTtcclxuICAgICAgdGhpcy5jb21tZW50SWQgPSBjb21tZW50LmlkO1xyXG4gICAgICB0aGlzLmRpc2FibGVGb3JtKCk7XHJcbiAgICAgIHRoaXMuYnV0dG9uc1Zpc2liaWxpdHlNb2RlKCd2aWV3Jyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25zb2xlLndhcm4oJ05vIGNvbW1lbnQgZm91bmQgd2l0aCB0aGF0IGlkOicsIGNvbW1lbnRJZCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBlbmFibGVFZGl0Q29tbWVudChjb21tZW50SWQ6IHN0cmluZykge1xyXG4gICAgY29uc3QgY29tbWVudCA9IHRoaXMud29ya3NwYWNlLmNvbW1lbnRzLmZpbmQoYyA9PiBjLmlkID09PSBjb21tZW50SWQpO1xyXG4gICAgaWYgKGNvbW1lbnQpIHtcclxuICAgICAgdGhpcy5maWxsSW5wdXRzKGNvbW1lbnQpO1xyXG4gICAgICB0aGlzLmNvbW1lbnRJZCA9IGNvbW1lbnRJZDtcclxuICAgICAgdGhpcy5lbmFibGVGb3JtKCk7XHJcbiAgICAgIHRoaXMuYnV0dG9uc1Zpc2liaWxpdHlNb2RlKCdlZGl0Jyk7XHJcbiAgICAgIHRoaXMuZm9ybUVsZW1lbnQub25jaGFuZ2UgPSAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5jb25maXJtVXBkYXRlQnRuLmNsYXNzTGlzdC5yZW1vdmUoJ2Rpc2FibGVkJyk7XHJcbiAgICAgICAgdGhpcy5jb25maXJtVXBkYXRlQnRuLm9uY2xpY2sgPSAoKSA9PiB0aGlzLnVwZGF0ZUNvbW1lbnQoY29tbWVudElkLCB0aGlzLnRleHRJbnB1dC52YWx1ZSwgdGhpcy5nZXRTZWxlY3RlZE1lbWJlcnMoKSk7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNvbnNvbGUud2FybignTm8gY29tbWVudCBmb3VuZCB3aXRoIHRoYXQgaWQ6JywgY29tbWVudElkKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHVwZGF0ZUNvbW1lbnQoY29tbWVudElkOiBzdHJpbmcsIHRleHQ6IHN0cmluZywgbWVudGlvbnM6IHN0cmluZ1tdKSB7XHJcbiAgICBjb25zdCBjb21tZW50ID0gdGhpcy53b3Jrc3BhY2UuY29tbWVudHMuZmluZChjID0+IGMuaWQgPT09IGNvbW1lbnRJZCk7XHJcbiAgICBpZiAoY29tbWVudCkge1xyXG4gICAgICBjb21tZW50LmNvbnRlbnQgPSB0ZXh0O1xyXG4gICAgICBjb21tZW50Lm1lbnRpb25zID0gbWVudGlvbnM7XHJcbiAgICAgIHRoaXMud29ya3NwYWNlLnVuc2F2ZWRDb21tZW50c0RhdGEoKTtcclxuICAgICAgdGhpcy5mb3JtRWxlbWVudC5vbmNoYW5nZSA9IG51bGw7XHJcbiAgICAgIHRoaXMuZGlzYWJsZUZvcm0oKTtcclxuICAgICAgdGhpcy5idXR0b25zVmlzaWJpbGl0eU1vZGUoJ3ZpZXcnKTtcclxuICAgICAgdGhpcy5jb25maXJtVXBkYXRlQnRuLmNsYXNzTGlzdC5hZGQoJ2Rpc2FibGVkJyk7XHJcbiAgICAgIHRoaXMuY2FuY2VsVXBkYXRlQnRuLmNsYXNzTGlzdC5hZGQoJ2Rpc2FibGVkJyk7XHJcbiAgICAgIHRoaXMuY29uZmlybVVwZGF0ZUJ0bi5vbmNsaWNrID0gbnVsbDtcclxuICAgICAgdGhpcy5jYW5jZWxVcGRhdGVCdG4ub25jbGljayA9IG51bGw7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25zb2xlLndhcm4oJ05vIGNvbW1lbnQgZm91bmQgd2l0aCB0aGF0IGlkOicsIGNvbW1lbnRJZCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBkaXNjYXJkVXBkYXRlKCkge1xyXG4gICAgY29uc3QgY29tbWVudCA9IHRoaXMud29ya3NwYWNlLmNvbW1lbnRzLmZpbmQoYyA9PiBjLmlkID09PSB0aGlzLmNvbW1lbnRJZCk7XHJcbiAgICBpZiAoY29tbWVudCkge1xyXG4gICAgICB0aGlzLnRleHRJbnB1dC52YWx1ZSA9IGNvbW1lbnQuY29udGVudDtcclxuICAgICAgLy8gVE9ETyB0aGlzLm1lbnRpb25zSW5wdXQgPSAnJyBpZiBzZWxlY3Rpb24gY2hhbmdlZCBwdXQgaW5pdGlhbCBzZWxlY3Rpb25cclxuICAgICAgdGhpcy5mb3JtRWxlbWVudC5vbmNoYW5nZSA9IG51bGw7XHJcbiAgICAgIHRoaXMuZGlzYWJsZUZvcm0oKTtcclxuICAgICAgdGhpcy5idXR0b25zVmlzaWJpbGl0eU1vZGUoJ3ZpZXcnKTtcclxuICAgICAgdGhpcy5jb25maXJtVXBkYXRlQnRuLmNsYXNzTGlzdC5hZGQoJ2Rpc2FibGVkJyk7XHJcbiAgICAgIHRoaXMuY29uZmlybVVwZGF0ZUJ0bi5vbmNsaWNrID0gbnVsbDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNvbnNvbGUud2FybignTm8gY29tbWVudCBmb3VuZCB3aXRoIHRoYXQgaWQ6JywgdGhpcy5jb21tZW50SWQpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogUmV0dXJucyBhbiBhcnJheSBvZiB0aGUgdmFsdWVzIG9mIHRoZSBzZWxlY3RlZCBvcHRpb25zLlxyXG4gICAqL1xyXG4gIGdldFNlbGVjdGVkTWVtYmVycygpIHtcclxuICAgIGNvbnN0IHNlbGVjdGVkT3B0aW9ucyA9IFtdO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm1lbnRpb25zSW5wdXQuc2VsZWN0ZWRPcHRpb25zLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIHNlbGVjdGVkT3B0aW9ucy5wdXNoKHRoaXMubWVudGlvbnNJbnB1dC5zZWxlY3RlZE9wdGlvbnNbaV0udmFsdWUpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHNlbGVjdGVkT3B0aW9ucztcclxuICB9XHJcblxyXG4gIGZpbGxJbnB1dHMoY29tbWVudDogQ29tbWVudCkge1xyXG4gICAgdGhpcy50ZXh0SW5wdXQudmFsdWUgPSBjb21tZW50LmNvbnRlbnQ7XHJcbiAgICBpZiAoY29tbWVudC5tZW50aW9ucy5sZW5ndGggPiAwKSB7XHJcbiAgICAgIGNvbnN0IG1lbnRpb25zOiBzdHJpbmdbXSA9IFtdO1xyXG4gICAgICAvLyBJdCBzaG91bGQgYmUgc3RpbGwgYSBtZW1iZXIgb2YgdGhlIHRlYW0gb3RoZXJ3aXNlIGl0cyBuYW1lIGlzIHNldCB0byAncmVtb3ZlZCB1c2VyJ1xyXG4gICAgICAvLyBUT0RPOiBpZiBhIG1lbnRpb25lZCB0ZWFtIG1lbWJlciB3YXMgcmVtb3ZlZCBpdCBzaG91bGQgYmUgcmVtb3ZlZCBmcm9tIGFueSBtZW50aW9uID8gd2hlbiA/XHJcbiAgICAgIC8vID8gQWxsIG1lbWJlcnMgc2hvdWxkIGJlIGFkZGVkIGhlcmUgP1xyXG4gICAgICBjb21tZW50Lm1lbnRpb25zLmZvckVhY2gobWVudGlvbkVtYWlsID0+IHtcclxuICAgICAgICBjb25zdCBwZXJtaXNzaW9uID0gdGhpcy53b3Jrc3BhY2UucGVybWlzc2lvbnMuZmluZChwID0+IHAuZW1haWxBZGRyZXNzID09PSBtZW50aW9uRW1haWwpO1xyXG4gICAgICAgIG1lbnRpb25zLnB1c2goYDxvcHRpb24gdmFsdWU9XCIke21lbnRpb25FbWFpbH1cIj4ke3Blcm1pc3Npb24gPyBwZXJtaXNzaW9uLmRpc3BsYXlOYW1lIDogJ1JlbW92ZWQgdXNlcid9PC9vcHRpb24+YCk7XHJcbiAgICAgIH0pO1xyXG4gICAgICB0aGlzLm1lbnRpb25zSW5wdXQuaW5uZXJIVE1MID0gbWVudGlvbnMuam9pbignJyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAvLyBUT0RPIFNob3cgYSBtZXNzYWdlIGluZGljYXRpbmcgbm8gbWVudGlvbnM/IHNob3cgdGhlIGVtcHR5IHNlbGVjdD9cclxuICAgICAgR2VuZXJpY3MuZW1wdHlOb2RlKHRoaXMubWVudGlvbnNJbnB1dCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZXNldCgpIHtcclxuICAgIHRoaXMuZm9ybUVsZW1lbnQucmVzZXQoKTtcclxuICB9XHJcbn0iLCJpbXBvcnQgR2VuZXJpY3MgZnJvbSAnLi9nZW5lcmljcyc7XHJcbmltcG9ydCB7IENvbW1lbnQgfSBmcm9tICcuL2NvbW1lbnQnO1xyXG5pbXBvcnQgeyBNYWluUGFuZWwgfSBmcm9tICcuL21haW5QYW5lbCc7XHJcbmltcG9ydCB7IENvbW1lbnRGb3JtIH0gZnJvbSAnLi9jb21tZW50Rm9ybSc7XHJcbmltcG9ydCB0eXBlIHsgRHJhd2luZyB9IGZyb20gJy4vZHJhd2luZyc7XHJcbmltcG9ydCB0eXBlIHsgQXBwbGljYXRpb24gfSBmcm9tICcuL2FwcCc7XHJcbmltcG9ydCB0eXBlIHsgRWxlbWVudFNlbGVjdGlvbiB9IGZyb20gJy4vYXBwVG9vbHMvZWxlbWVudFNlbGVjdGlvbic7XHJcbmltcG9ydCB7IE1vZGVsRWxlbWVudHNEYXRhLCBQcm9qZWN0RGF0YSwgTm90aWZpY2F0aW9uVG9TZW5kIH0gZnJvbSAnLi90eXBlcyc7XHJcblxyXG4vLyBFYWNoIGVudHJ5IHN0b3JlcyBhbiBhcnJheSBvZiBpZHMgb2YgY29tbWVudHMgZm9yIHRoYXQgZWxlbWVudC5cclxuaW50ZXJmYWNlIEVsZW1lbnRzQ29tbWVudHMge1xyXG4gIFtlbGVtZW50SWQ6IHN0cmluZ106IHN0cmluZ1tdO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgV29ya3NwYWNlIHtcclxuICB3b3Jrc3BhY2VDb250YWluZXI6IEhUTUxFbGVtZW50O1xyXG4gIHByb2plY3ROYW1lOiBzdHJpbmc7XHJcbiAgcHJvamVjdElkOiBzdHJpbmc7XHJcbiAgcGVybWlzc2lvbnM6IGdhcGkuY2xpZW50LmRyaXZlLlBlcm1pc3Npb25bXTtcclxuICBwcm9qZWN0SW5kZXg6IG51bWJlcjtcclxuICBkcmF3aW5nczogRHJhd2luZ1tdO1xyXG4gIGVsZW1lbnRzRGF0YTogTW9kZWxFbGVtZW50c0RhdGE7XHJcbiAgZHJhd2luZ3NTdHlsZXNJZDogc3RyaW5nO1xyXG4gIGFjdGl2ZVRvb2w6IEVsZW1lbnRTZWxlY3Rpb247XHJcbiAgLy8gdG9vbFNldHRpbmdzOiBhbnk7XHJcbiAgYXBwZW5kZWREcmF3aW5nc0lkczogc3RyaW5nW10gPSBbXTtcclxuICBhY3RpdmVEcmF3aW5nOiBEcmF3aW5nO1xyXG4gIGRyYXdpbmdzQnRuczogSFRNTEVsZW1lbnQ7XHJcbiAgZHJhd2luZ3NTdHlsZXNUYWc6IEhUTUxTdHlsZUVsZW1lbnQ7XHJcbiAgc2F2ZUJ0bjogSFRNTEVsZW1lbnQ7XHJcbiAgcHJvamVjdHNEYXRhOiBQcm9qZWN0RGF0YVtdO1xyXG4gIHByb3BzVGFibGVzQ29udGFpbmVyOiBIVE1MRWxlbWVudDtcclxuICBwYXJhbXNUYWJsZXNDb250YWluZXI6IEhUTUxFbGVtZW50O1xyXG4gIGNvbW1lbnRzQ2hhbmdlc1Vuc2F2ZWQ6IGJvb2xlYW47XHJcbiAgY29tbWVudHNGaWxlSWQ6IHN0cmluZztcclxuICBjb21tZW50czogQ29tbWVudFtdID0gW107XHJcbiAgLy8gVXNlZCB0byBzdG9yZSBhcnJheXMgb2YgYWxsIHRoZSBjb21tZW50cyB0aGF0IGVhY2ggZWxlbWVudCBoYXMsIG5lY2Vzc2FyeSB3aGVuIGFuIGVsZW1lbnQgaXMgY2xpY2tlZC5cclxuICBlbGVtZW50c0NvbW1lbnRzOiBFbGVtZW50c0NvbW1lbnRzID0ge307XHJcbiAgcGVuZGluZ05vdGlmaWNhdGlvbnNUb1NlbmQ6IE5vdGlmaWNhdGlvblRvU2VuZFtdO1xyXG4gIG1haW5QYW5lbDogTWFpblBhbmVsO1xyXG4gIGNvbW1lbnRGb3JtOiBDb21tZW50Rm9ybTtcclxuICBkcmF3aW5nc0NvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XHJcblxyXG4gIGNvbnN0cnVjdG9yKHByb2plY3REYXRhOiBQcm9qZWN0RGF0YSwgQXBwOiBBcHBsaWNhdGlvbikge1xyXG4gICAgLy8gQ3JlYXRlIHRoZSB3b3Jrc3BhY2UgSFRNTCBjb250YWluZXIuXHJcbiAgICB0aGlzLndvcmtzcGFjZUNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgdGhpcy53b3Jrc3BhY2VDb250YWluZXIuY2xhc3NMaXN0LmFkZCgnd29ya3NwYWNlJyk7XHJcbiAgICAvLyBUT0RPIGNyZWF0ZSB2aWV3cG9ydCBtZXNzYWdlIGFzIGNvbXBvbmVudC4gVGhpcyBlbGVtZW50IGN1cnJlbnRseSBoYXMgaWQgdmlld3BvcnRNZXNzYWdlXHJcbiAgICAvL3RoaXMudmlld3BvcnRNZXNzYWdlID0gbmV3IFZpZXdwb3J0TWVzc2FnZSgpO1xyXG5cclxuICAgIHRoaXMucHJvamVjdE5hbWUgPSBwcm9qZWN0RGF0YS5uYW1lO1xyXG4gICAgdGhpcy5wcm9qZWN0SWQgPSBwcm9qZWN0RGF0YS5pZDtcclxuICAgIHRoaXMucGVybWlzc2lvbnMgPSBwcm9qZWN0RGF0YS5wZXJtaXNzaW9ucztcclxuICAgIHRoaXMucHJvamVjdEluZGV4ID0gQXBwLnByb2plY3RzRGF0YS5maW5kSW5kZXgoKG9iajogUHJvamVjdERhdGEpID0+IG9iai5uYW1lID09PSBwcm9qZWN0RGF0YS5uYW1lKTtcclxuICAgIGlmIChBcHAubGFzdFVwbG9hZGVkUHJvamVjdCAmJiBwcm9qZWN0RGF0YS5pZCA9PT0gQXBwLmxhc3RVcGxvYWRlZFByb2plY3QuaWQpIHtcclxuICAgICAgLy90aGlzLmRyYXdpbmdzID0gQXBwLmxhc3RVcGxvYWRlZFByb2plY3QuZHJhd2luZ3M7IC8vIFRPRE8gd2hlbiBsYXN0VXBsb2FkZWRQcm9qZWN0IGludGVyZmFjZSBpcyBhdmFpYWJsZSB1bmNvbW1lbnQgaXRcclxuICAgICAgLy90aGlzLmRyYXdpbmdzU3R5bGVzSWQgPSBBcHAubGFzdFVwbG9hZGVkUHJvamVjdC5kcmF3aW5nc1N0eWxlc0lkO1xyXG4gICAgICAvLyB0aGlzLmVsZW1lbnRzRGF0YSA9IEFwcC5sYXN0VXBsb2FkZWRQcm9qZWN0LmVsZW1lbnRzRGF0YTsgLy8gVE9ETyBjaGVjayB0eXBlIGJlZm9yZSB1bmNvbW1lbnRcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIC8vIFN0b3JlIHRoZSBjb250ZW50IG9mIHRoZSBkcmF3aW5ncyBhcyBlbnRyaWVzIG5hbWU6J2NvbnRlbnQnXHJcbiAgICAgIHRoaXMuZHJhd2luZ3MgPSBwcm9qZWN0RGF0YS5kcmF3aW5ncztcclxuICAgICAgdGhpcy5kcmF3aW5nc1N0eWxlc0lkID0gcHJvamVjdERhdGEuZHJhd2luZ3NTdHlsZXNJZDtcclxuICAgICAgLy8gVE9ETzogRWxlbWVudHMgZGF0YSBjb3VsZCBiZSBjaGFuZ2VkIHRvIGEgc2ltaWxhciBzeXN0ZW0gbGlrZSB0aGUgZHJhd2luZyBvYmplY3RzLlxyXG4gICAgICB0aGlzLmVsZW1lbnRzRGF0YSA9IHt9O1xyXG4gICAgfVxyXG4gICAgLy8gU2V0IHRpdGxlIG9mIHRoZSBwcm9qZWN0IGluIHRoZSBidXR0b24gdG8gbGlzdCB0aGUgcHJvamVjdHMuXHJcbiAgICBBcHAucHJvamVjdHNMaXN0QnRuLmlubmVySFRNTCA9ICc8c3Bhbj4nICsgcHJvamVjdERhdGEubmFtZSArICc8L3NwYW4+JztcclxuICAgIHRoaXMuZHJhd2luZ3NCdG5zID0gQXBwLmRyYXdpbmdzQnRucztcclxuICAgIHRoaXMuc2F2ZUJ0biA9IEFwcC5zYXZlQnRuO1xyXG4gICAgdGhpcy5jcmVhdGVEcmF3aW5nc0J0bnModGhpcy5kcmF3aW5ncyk7XHJcbiAgICAvLyBTaG93IGRyYXdpbmdzIGFuZCB0b29scyBidXR0b25zLlxyXG4gICAgKHRoaXMuZHJhd2luZ3NCdG5zLmNoaWxkcmVuWzBdIGFzIEhUTUxFbGVtZW50KS5pbm5lclRleHQgPSAnUGljayBhIGRyYXdpbmcnO1xyXG4gICAgdGhpcy5kcmF3aW5nc0J0bnMuc3R5bGUuZGlzcGxheSA9ICd1bnNldCc7XHJcbiAgICBBcHAudG9vbGJhcnNDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdmbGV4JztcclxuICAgIHRoaXMucHJvamVjdHNEYXRhID0gQXBwLnByb2plY3RzRGF0YTtcclxuICAgIHRoaXMucHJvcHNUYWJsZXNDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvcHNUYWJsZXNDb250YWluZXInKTtcclxuICAgIHRoaXMucGFyYW1zVGFibGVzQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BhcmFtc1RhYmxlc0NvbnRhaW5lcicpO1xyXG4gICAgaWYgKHByb2plY3REYXRhLmNvbW1lbnRzRmlsZUlkKSB7XHJcbiAgICAgIHRoaXMuY29tbWVudHNGaWxlSWQgPSBwcm9qZWN0RGF0YS5jb21tZW50c0ZpbGVJZDtcclxuICAgIH1cclxuICAgIGlmIChwcm9qZWN0RGF0YS5jb21tZW50cykge1xyXG4gICAgICBwcm9qZWN0RGF0YS5jb21tZW50cy5mb3JFYWNoKChjb21tZW50RGF0YTogQ29tbWVudCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGNvbW1lbnRPYmogPSBuZXcgQ29tbWVudChjb21tZW50RGF0YS5lbGVtZW50c0lkcywgY29tbWVudERhdGEuY29udGVudCwgY29tbWVudERhdGEubWVudGlvbnMpO1xyXG4gICAgICAgIHRoaXMuY29tbWVudHMucHVzaChjb21tZW50T2JqKTtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvbW1lbnREYXRhLmVsZW1lbnRzSWRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICBpZiAoIXRoaXMuZWxlbWVudHNDb21tZW50cy5oYXNPd25Qcm9wZXJ0eShjb21tZW50RGF0YS5lbGVtZW50c0lkc1tpXSkpXHJcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudHNDb21tZW50c1tjb21tZW50RGF0YS5lbGVtZW50c0lkc1tpXV0gPSBbXTtcclxuICAgICAgICAgIHRoaXMuZWxlbWVudHNDb21tZW50c1tjb21tZW50RGF0YS5lbGVtZW50c0lkc1tpXV0ucHVzaChjb21tZW50T2JqLmlkKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgICB0aGlzLmRyYXdpbmdzLmZvckVhY2goZHJhd2luZyA9PiBkcmF3aW5nLmNvbW1lbnRzQ2hhbmdlZCA9IHRydWUpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5tYWluUGFuZWwgPSBuZXcgTWFpblBhbmVsKEFwcC5wYW5lbHNTdG9yYWdlLCB0aGlzKTtcclxuICAgIHRoaXMuY29tbWVudEZvcm0gPSBuZXcgQ29tbWVudEZvcm0oZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbW1lbnRGb3JtJykgYXMgSFRNTEZvcm1FbGVtZW50LCB0aGlzKTtcclxuICAgIC8vIENyZWF0ZSBhbmQgYXBwZW5kIHRoZSBIVE1MIGRyYXdpbmdzIGNvbnRhaW5lci5cclxuICAgIHRoaXMuZHJhd2luZ3NDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgIHRoaXMuZHJhd2luZ3NDb250YWluZXIuY2xhc3NMaXN0LmFkZCgnZHJhd2luZ3NDb250YWluZXInKTtcclxuICAgIHRoaXMud29ya3NwYWNlQ29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMuZHJhd2luZ3NDb250YWluZXIpO1xyXG4gICAgLy8gQXBwZW5kIHRoZSB3b3Jrc3BhY2UgY29udGFpbmVyIHRvIHRoZSBET00uXHJcbiAgICBBcHAud29ya3NwYWNlc0NvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLndvcmtzcGFjZUNvbnRhaW5lcik7XHJcbiAgfVxyXG5cclxuICAvLyBUT0RPOiBTZXQgYSBkZWZhdWx0ICdhY3RpdmVEcmF3aW5nJyB3aXRoIHRoZSAnZWxlbWVudHNEYXRhJyB0b29sIGFjdGl2ZSBieSBkZWZhdWx0PyB0aGlzLmFjdGl2ZVRvb2wgPSBuZXcgRWxlbWVudHNEYXRhKCdlbGVtZW50c0RhdGFUb29sJywgdGhpcyk7XHJcblxyXG5cclxuICAvKioqKioqKioqKioqKioqKioqKioqKiogVE9PTFMgTUFOQUdFTUVOVCAqKioqKioqKioqKioqKioqKioqKioqKiovXHJcblxyXG4gIC8qKlxyXG4gICAqIFNldHMgdGhlIHNlbGVjdGVkIHRvb2wgYXMgYWN0aXZlIGFuZCB0dXJucyBvZmYgdGhlIHByZXZpb3VzIG9uZSBpZiBzdGlsbCBhY3RpdmUuXHJcbiAgICovXHJcbiAgbWFuYWdlVG9vbHMoZTogRXZlbnQsIFRvb2w6IHR5cGVvZiBFbGVtZW50U2VsZWN0aW9uLCBuYW1lOiBzdHJpbmcpIHtcclxuICAgIGlmICh0aGlzLmFjdGl2ZURyYXdpbmcgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAvLyBUT0RPOiBTaG93IGEgbWVzc2FnZSBzYXlpbmcgdGhhdCBhIGRyYXdpbmcgbXVzdCBiZSBhY3RpdmUuXHJcbiAgICAgIGNvbnNvbGUubG9nKCdBIGRyYXdpbmcgbXVzdCBiZSBhY3RpdmUuJyk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGlmICh0aGlzLmFjdGl2ZVRvb2wgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICB0aGlzLmFjdGl2ZVRvb2wgPSBuZXcgVG9vbChuYW1lLCBlLmN1cnJlbnRUYXJnZXQgYXMgSFRNTEVsZW1lbnQsIHRoaXMpO1xyXG4gICAgfSBlbHNlIGlmICh0aGlzLmFjdGl2ZVRvb2wubmFtZSAhPT0gbmFtZSkge1xyXG4gICAgICB0aGlzLmFjdGl2ZVRvb2wua2lsbCgpO1xyXG4gICAgICB0aGlzLmFjdGl2ZVRvb2wgPSBuZXcgVG9vbChuYW1lLCBlLmN1cnJlbnRUYXJnZXQgYXMgSFRNTEVsZW1lbnQsIHRoaXMpO1xyXG4gICAgfSBlbHNlIGlmICh0aGlzLmFjdGl2ZVRvb2wubmFtZSA9PT0gbmFtZSkge1xyXG4gICAgICB0aGlzLmFjdGl2ZVRvb2wua2lsbCgpO1xyXG4gICAgICB0aGlzLmFjdGl2ZVRvb2wgPSB1bmRlZmluZWQ7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuXHJcbiAgdW5zYXZlZENvbW1lbnRzRGF0YSgpIHtcclxuICAgIHRoaXMuY29tbWVudHNDaGFuZ2VzVW5zYXZlZCA9IHRydWU7XHJcbiAgICB0aGlzLnNhdmVCdG4uY2xhc3NMaXN0LnJlbW92ZSgnZGlzYWJsZWQnKTtcclxuICAgIHRoaXMuc2F2ZUJ0bi5jbGFzc0xpc3QuYWRkKCdlbmFibGVkJyk7XHJcbiAgfVxyXG5cclxuXHJcbiAgLyoqKioqKioqKioqKioqKioqKioqKiogRFJBV0lOR1MgTUFOQUdFTUVOVCAqKioqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuICAvKipcclxuICAgKiBNYW5hZ2VzIHRoZSBkcmF3aW5ncyB2aXNpYmlsaXR5LiBUaGUgcHJvdmlkZWQgZHJhd2luZyBvYmplY3RcclxuICAgKiBzaG91bGQgaGF2ZSB0aGUgJ2NvbnRlbnQnIHByb3BlcnR5IGFscmVhZHkgd2l0aCB2YWx1ZS5cclxuICAgKi9cclxuICBzZXREcmF3aW5nKGRyYXdpbmc6IERyYXdpbmcpIHtcclxuICAgIC8vIElmIHRoZXJlIGlzIGEgcHJldmlvdXMgdmlzaWJsZSBkcmF3aW5nIGhpZGUgaXQuXHJcbiAgICBpZiAodGhpcy5hY3RpdmVEcmF3aW5nICYmIHRoaXMuYWN0aXZlRHJhd2luZy5uYW1lICE9PSBkcmF3aW5nLm5hbWUpIHtcclxuICAgICAgLy8gSWYgaW4gdGhlIGRyYXdpbmcgdG8gYmUgaGlkZGVuIHRoZXJlIGFyZSBzZWxlY3RlZCBlbGVtZW50cyByZW1vdmUgdGhlaXIgc2VsZWN0aW9uIGFwcGVhcmFuY2UuXHJcbiAgICAgIGlmICh0aGlzLmFjdGl2ZVRvb2wgJiYgdGhpcy5hY3RpdmVUb29sLmN1cnJlbnRTZWxlY3Rpb24ubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIHRoaXMuYWN0aXZlVG9vbC5yZW1vdmVEcmF3aW5nU2VsZWN0aW9uQXBwZWFyYW5jZSh0aGlzLmFjdGl2ZURyYXdpbmcpO1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMuYWN0aXZlRHJhd2luZy5jb250ZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICB9IGVsc2UgaWYgKHRoaXMuYWN0aXZlRHJhd2luZyAmJiB0aGlzLmFjdGl2ZURyYXdpbmcubmFtZSA9PT0gZHJhd2luZy5uYW1lKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICAvLyBNYWtlIGl0IG5vdCB2aXNpYmxlIHVudGlsIHRoZSBlbmQgb2YgdGhlIHByb2Nlc3MuIFVzZSB2aXNpYmlsaXR5XHJcbiAgICAvLyBiZWNhdXNlIHNvbWUgYnJvd3NlcnMgbGlrZSBDaHJvbWUgY2Fubm90IGRyYXcgbmV3IHN2ZyBlbGVtZW50cyBpZlxyXG4gICAgLy8gdGhlIGNhbnZhcyBoYXMgJ2Rpc3BsYXk6bm9uZScuXHJcbiAgICBkcmF3aW5nLmNvbnRlbnQuc3R5bGUudmlzaWJpbGl0eSA9ICdoaWRkZW4nO1xyXG5cclxuICAgIC8vIElmIGl0IGlzIG5vdCBpbiB0aGUgRE9NIGFscmVhZHkgYXBwZW5kIGl0LlxyXG4gICAgLy8gSWYgaXQgaXMgYWxyZWFkeSBpbiB0aGUgRE9NIHRoZW4gcmVtb3ZlIHRoZSAnZGlzcGxheTpub25lJy5cclxuICAgIGlmICghdGhpcy5hcHBlbmRlZERyYXdpbmdzSWRzLmluY2x1ZGVzKGRyYXdpbmcuaWQpKSB7XHJcbiAgICAgIHRoaXMuYXBwZW5kZWREcmF3aW5nc0lkcy5wdXNoKGRyYXdpbmcuaWQpO1xyXG4gICAgICB0aGlzLmRyYXdpbmdzQ29udGFpbmVyLmFwcGVuZChkcmF3aW5nLmNvbnRlbnQpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgZHJhd2luZy5jb250ZW50LnN0eWxlLmRpc3BsYXkgPSAndW5zZXQnO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIElmIHRoZSB2YWx1ZSBvZiBjb21tZW50c0NoYW5nZWQgaXMgdW5kZWZpbmVkIHRoZW4gdGhlcmUgYXJlIHN0aWxsXHJcbiAgICAvLyBubyBjb21tZW50cyBpbiB0aGUgcHJvamVjdC4gSWYgaXQgaXMgZmFsc2UgdGhlbiB0aGVyZSBhcmUgbm8gY2hhbmdlcy5cclxuICAgIGlmIChkcmF3aW5nLmNvbW1lbnRzQ2hhbmdlZCkge1xyXG4gICAgICAvLyBVcGRhdGUgdGhlIGNvbW1lbnRzIHJlcHJlc2VudGF0aW9ucyBmb3IgdGhlIG5ldyBkcmF3aW5nLlxyXG4gICAgICAvLyBJZiBzdGlsbCB0aGVyZSBpcyBubyBjb21tZW50cyBncm91cCBjaGVjayB0aGUgZHJhd2luZywgb3RoZXJ3aXNlIGNoZWNrXHJcbiAgICAgIC8vIHRoZSBvbmVzIHdpdGhvdXQgcmVwcmVzZW50YXRpb24gaW4gdGhlIGNvbW1lbnRzIGdyb3VwLlxyXG4gICAgICBpZiAoZHJhd2luZy5jb21tZW50c0dyb3VwID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICBsZXQgZ3JvdXBDcmVhdGVkID0gZmFsc2U7XHJcbiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCB0aGlzLmNvbW1lbnRzLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICBjb25zdCBlbGVtc0ZvckNvbW1lbnRSZXByZXNlbnRhdGlvbjogU1ZHR0VsZW1lbnRbXSA9IFtdO1xyXG4gICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmNvbW1lbnRzW2pdLmVsZW1lbnRzSWRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGVsZW1lbnQgPSBkcmF3aW5nLmNvbnRlbnQucXVlcnlTZWxlY3RvcignW2RhdGEtaWQ9XCInICsgdGhpcy5jb21tZW50c1tqXS5lbGVtZW50c0lkc1tpXSArICdcIl0nKSBhcyBTVkdHRWxlbWVudDtcclxuICAgICAgICAgICAgaWYgKGVsZW1lbnQgIT09IG51bGwpXHJcbiAgICAgICAgICAgICAgZWxlbXNGb3JDb21tZW50UmVwcmVzZW50YXRpb24ucHVzaChlbGVtZW50KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIC8vIElmIGF0IGxlYXN0IG9uZSBpcyBmb3VuZCBjcmVhdGUgdGhlIHJlcHJlc2VudGF0aW9uLlxyXG4gICAgICAgICAgaWYgKGVsZW1zRm9yQ29tbWVudFJlcHJlc2VudGF0aW9uLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgLy8gT25seSBpZiBhdCBsZWFzdCBvbmUgY29tbWVudCByZXF1aXJlcyByZXByZXNlbnRhdGlvbiB0aGUgY29tbWVudHMgZ3JvdXAgaXMgY3JlYXRlZC5cclxuICAgICAgICAgICAgaWYgKCFncm91cENyZWF0ZWQpIHtcclxuICAgICAgICAgICAgICBkcmF3aW5nLmNyZWF0ZUNvbW1lbnRzR3JvdXAoKTtcclxuICAgICAgICAgICAgICAvLyBUT0RPOiBTZXQgdmlzaWJpbGl0eSBvZiB0aGUgZ3JvdXAuXHJcbiAgICAgICAgICAgICAgZ3JvdXBDcmVhdGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLmNvbW1lbnRzW2pdLmNyZWF0ZVJlcHJlc2VudGF0aW9uKGRyYXdpbmcuY29tbWVudHNHcm91cCwgZWxlbXNGb3JDb21tZW50UmVwcmVzZW50YXRpb24pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAvLyBMb29rIGZvciBpbiB0aGUgY29tbWVudHMgZ3JvdXAsIGFuZCBhZGQgdGhlIG1pc3Npbmcgb25lcy5cclxuICAgICAgICAvLyBPbmx5IGlmIHRoZSBlbGVtZW50IGlzIGluIHRoZSBkcmF3aW5nIGFuZCBpdCBkb2VzbnQgaGF2ZSByZXByZXNlbnRhdGlvbi5cclxuICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHRoaXMuY29tbWVudHMubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgIC8vIElmIHRoaXMgZWxlbWVudCBhbHJlYWR5IGhhcyBhIHJlcHJlc2VudGF0aW9uIGluIHRoaXMgZHJhd2luZyBza2lwIGl0LlxyXG4gICAgICAgICAgaWYgKGRyYXdpbmcuY29tbWVudHNHcm91cC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1pZD1cIicgKyB0aGlzLmNvbW1lbnRzW2pdLmlkICsgJ1wiXScpICE9PSBudWxsKSBjb250aW51ZTtcclxuICAgICAgICAgIC8vIFRPRE8gRG8gc29tZXRoaW5nIHRvIGF2b2lkIGNoZWNraW5nIGNvbW1lbnRzIHRoYXQgZG9lc250IGhhdmUgYW55IGVsZW1lbnQgaW4gdGhpcyBkcmF3aW5nLlxyXG4gICAgICAgICAgLy8gSWYgdGhlcmUgaXMgbm8gcmVwcmVzZW50YXRpb24gZm9yIGl0IGdldCBhbGwgaXRzIGVsZW1lbnRzIGFuZCBpZiBhdCBsZWFzdCBvbmUgaXMgZm91bmQgY3JlYXRlIHRoZSByZXByZXNlbnRhdGlvbi5cclxuICAgICAgICAgIGNvbnN0IGVsZW1zRm9yQ29tbWVudFJlcHJlc2VudGF0aW9uOiBTVkdHRWxlbWVudFtdID0gW107XHJcbiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuY29tbWVudHNbal0uZWxlbWVudHNJZHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3QgZWxlbWVudCA9IGRyYXdpbmcuY29udGVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1pZD1cIicgKyB0aGlzLmNvbW1lbnRzW2pdLmVsZW1lbnRzSWRzW2ldICsgJ1wiXScpIGFzIFNWR0dFbGVtZW50O1xyXG4gICAgICAgICAgICBpZiAoZWxlbWVudCAhPT0gbnVsbClcclxuICAgICAgICAgICAgICBlbGVtc0ZvckNvbW1lbnRSZXByZXNlbnRhdGlvbi5wdXNoKGVsZW1lbnQpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgaWYgKGVsZW1zRm9yQ29tbWVudFJlcHJlc2VudGF0aW9uLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgdGhpcy5jb21tZW50c1tqXS5jcmVhdGVSZXByZXNlbnRhdGlvbihkcmF3aW5nLmNvbW1lbnRzR3JvdXAsIGVsZW1zRm9yQ29tbWVudFJlcHJlc2VudGF0aW9uKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gVE9ETzogU2V0IHZpc2liaWxpdHkgb2YgdGhlIGdyb3VwLlxyXG4gICAgICB9XHJcbiAgICAgIC8vIFNldCB0aGUgY29tbWVudHNDaGFuZ2VkIHByb3BlcnR5IHRvIGZhbHNlIHRvIGluZGljYXRlIHRoYXQgaXQgaXMgdXBkYXRlZC5cclxuICAgICAgZHJhd2luZy5jb21tZW50c0NoYW5nZWQgPSBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBUT0RPIENvdWxkIGJlIHJlbW92ZWQgYmVjYXVzZSB0b29sIHRha2VzIHRoZSBhY3RpdmUgZHJhd2lnbiBmcm9tIHRoZSB3b3Jrc3BhY2VcclxuICAgIC8vIFVwZGF0ZSB0aGUgJ2FjdGl2ZURyYXdpbmcnIGluIHRoZSAnYWN0aXZlVG9vbCcuXHJcbiAgICAvLyBpZiAodGhpcy5hY3RpdmVUb29sKSB7XHJcbiAgICAvLyAgIHRoaXMuYWN0aXZlVG9vbC5hY3RpdmVEcmF3aW5nID0gZHJhd2luZztcclxuICAgIC8vIH1cclxuXHJcbiAgICAvLyBJZiB0aGVyZSBhcmUgc2VsZWN0ZWQgZWxlbWVudHMgaW4gdGhlIG5ldyBkcmF3aW5nIGFkZCB0aGUgc2VsZWN0aW9uIGFwcGVhcmFuY2UgdG8gdGhlbS5cclxuICAgIGlmICh0aGlzLmFjdGl2ZVRvb2wgJiYgdGhpcy5hY3RpdmVUb29sLmN1cnJlbnRTZWxlY3Rpb24ubGVuZ3RoID4gMCkge1xyXG4gICAgICB0aGlzLmFjdGl2ZVRvb2wuYWRkRHJhd2luZ1NlbGVjdGlvbkFwcGVhcmFuY2UoZHJhd2luZyk7XHJcbiAgICB9XHJcblxyXG4gICAgZHJhd2luZy5jb250ZW50LnN0eWxlLnZpc2liaWxpdHkgPSAndW5zZXQnO1xyXG5cclxuICAgIC8vIFNldCB0aGUgZHJhd2luZyBhcyBhY3RpdmUuXHJcbiAgICB0aGlzLmFjdGl2ZURyYXdpbmcgPSBkcmF3aW5nO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ3JlYXRlcyB0aGUgYnV0dG9ucyBmb3IgdGhlIGRyYXdpbmdzIHRvIGJlIGRpc3BsYXllZC5cclxuICAgKiBAcGFyYW0ge0FycmF5fSBkcmF3aW5ncyBBcnJheSB3aXRoIHRoZSBkcmF3aW5nIG9iamVjdHMuXHJcbiAgICovXHJcbiAgY3JlYXRlRHJhd2luZ3NCdG5zKGRyYXdpbmdzOiBEcmF3aW5nW10pIHtcclxuICAgIGxldCBkcmF3aW5nc0l0ZW1zOiBzdHJpbmdbXSA9IFtdO1xyXG4gICAgZHJhd2luZ3MuZm9yRWFjaChkcmF3aW5nID0+IHtcclxuICAgICAgLy8gQ291bGQgYmUgdGhhdCB0aGVyZSBpcyBubyBpZCBpZiB0aGUgcHJvamVjdCB3YXMgdXBsb2FkZWQgYW5kIGl0IGlzIG9ubHkgbG9jYWwuXHJcbiAgICAgIGRyYXdpbmdzSXRlbXMucHVzaChgPGxpICR7ZHJhd2luZy5pZCA/ICdkYXRhLWlkPVxcXCInICsgZHJhd2luZy5pZCArICdcXFwiJyA6ICcnfT4ke2RyYXdpbmcubmFtZX08L2xpPmApO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLmRyYXdpbmdzQnRucy5xdWVyeVNlbGVjdG9yKCcuZHJvcGRvd24tY29udGVudCcpLmlubmVySFRNTCA9IGRyYXdpbmdzSXRlbXMuam9pbignJyk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBDbGVhbnMgdGhlIHdvcmtzcGFjZSBieSBlbXB0eWluZyB0aGUgZHJhd2luZyBjb250YWluZXIgYW5kIHRoZSBsaXN0IG9mIGRyYXdpbmdzLlxyXG4gICAqIFRPRE86IFJlbW92ZSBwb3NzaWJsZSBldmVudCBsaXN0ZW5lcnMgYmVmb3JlIGVtcHR5aW5nIGNvbnRhaW5lcnMgP1xyXG4gICAqL1xyXG4gIGNsb3NlKCkge1xyXG4gICAgLy8gRW1wdHkgdGhlIGRyYXdpbmdzIGJ1dHRvbnMgY29udGFpbmVyLlxyXG4gICAgR2VuZXJpY3MuZW1wdHlOb2RlKHRoaXMuZHJhd2luZ3NCdG5zLnF1ZXJ5U2VsZWN0b3IoJy5kcm9wZG93bi1jb250ZW50JykpO1xyXG4gICAgLy8gUmVtb3ZlIHRoZSBjcmVhdGUgc3R5bGUgdGFnIGZvciB0aGUgc3R5bGVzIG9mIHRoZSBkcmF3aW5ncy5cclxuICAgIGlmICh0aGlzLmRyYXdpbmdzU3R5bGVzVGFnICE9PSB1bmRlZmluZWQpXHJcbiAgICAgIHRoaXMuZHJhd2luZ3NTdHlsZXNUYWcucmVtb3ZlKCk7XHJcbiAgICAvLyBSZW1vdmUgdGhlIG1haW4gcGFuZWwuICAgXHJcbiAgICAvL3RoaXMubWFpblBhbmVsLmtpbGwoKTtcclxuICAgIC8vIFRPRE86IElmIGluIGZ1dHVyZSB2ZXJzaW9uIHRoZXJlIGFyZSBlbGVtZW50cyBpbiB0aGUgc3ZnIHdpdGggZXZlbnQgbGlzdGVuZXJzIHRob3NlIHNob3VsZCBiZSBkZWxldGVkXHJcbiAgICB0aGlzLmRyYXdpbmdzQ29udGFpbmVyLmlubmVySFRNTCA9ICcnO1xyXG4gIH1cclxufSIsImltcG9ydCB0eXBlIHsgV29ya3NwYWNlIH0gZnJvbSBcIi4uL3dvcmtzcGFjZVwiO1xyXG5cclxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIFRvb2wge1xyXG4gIG5hbWU6IHN0cmluZztcclxuICB0b29sQnRuOiBIVE1MRWxlbWVudDtcclxuICB3b3Jrc3BhY2U6IFdvcmtzcGFjZTtcclxuICBcclxuICBjb25zdHJ1Y3RvcihuYW1lOiBzdHJpbmcsIHRvb2xCdG46IEhUTUxFbGVtZW50LCB3b3Jrc3BhY2U6IFdvcmtzcGFjZSkge1xyXG4gICAgdGhpcy5uYW1lID0gbmFtZTtcclxuICAgIHRoaXMudG9vbEJ0biA9IHRvb2xCdG47XHJcbiAgICB0aGlzLndvcmtzcGFjZSA9IHdvcmtzcGFjZTtcclxuICAgIHRoaXMudG9vbEJ0bi5jbGFzc0xpc3QuYWRkKCdidG4tdG9vbC1lbmFibGVkJyk7XHJcbiAgfVxyXG5cclxuICBraWxsKCkge1xyXG4gICAgdGhpcy50b29sQnRuLmNsYXNzTGlzdC5yZW1vdmUoJ2J0bi10b29sLWVuYWJsZWQnKTtcclxuICB9XHJcbn0iLCJpbXBvcnQgeyBUb29sIH0gZnJvbSAnLi90b29sJztcclxuaW1wb3J0IHR5cGUgeyBXb3Jrc3BhY2UgfSBmcm9tICcuLi93b3Jrc3BhY2UnO1xyXG5pbXBvcnQgdHlwZSB7IERyYXdpbmcgfSBmcm9tICcuLi9kcmF3aW5nJztcclxuaW1wb3J0IHsgR2VvbWV0cnlDYWxjIH0gZnJvbSAnLi4vZ2VvbWV0cnknO1xyXG5pbXBvcnQgZ2VuZXJpY3MgZnJvbSAnLi4vZ2VuZXJpY3MnO1xyXG5cclxuZXhwb3J0IGNsYXNzIEVsZW1lbnRTZWxlY3Rpb24gZXh0ZW5kcyBUb29sIHtcclxuICBjdXJyZW50U2VsZWN0aW9uOiBhbnkgPSBbXTsgLy8gVE9ETyBhcnJheSBvZiB3aGF0PyBUT0RPIFRoaXMgY291bGQgYmUgYSBwcm9wZXJ0eSBvZiB0aGUgd29ya3NwYWNlP1xyXG4gIHNlbGVjdGlvbjogU1ZHR0VsZW1lbnQ7IC8vIFRPRE86IFJlbmFtZSBhcyBjbGlja2VkRWxlbWVudCA/XHJcbiAgLyoqXHJcbiAgICogT3ZlcnJpZGUgdGhpcyB2YWx1ZSB0byBhbGxvdyBtdWx0aXBsZSBzZWxlY3Rpb24gb24gYSB0b29sLiBEZWZhdWx0IGZhbHNlLlxyXG4gICAqL1xyXG4gIG11bHRpcGxlU2VsZWN0aW9uID0gZmFsc2U7XHJcbiAgLy8gVE9ETyBTZXQgYmFzZWQgb24gdGhlIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvID9cclxuICBtYXhQeE9mZnNldFRvQ2hlY2sgPSAzO1xyXG5cclxuICBjb25zdHJ1Y3RvcihuYW1lOiBzdHJpbmcsIHRvb2xCdG46IEhUTUxFbGVtZW50LCB3b3Jrc3BhY2U6IFdvcmtzcGFjZSkge1xyXG4gICAgc3VwZXIobmFtZSwgdG9vbEJ0biwgd29ya3NwYWNlKTtcclxuXHJcbiAgICB0aGlzLm1hbmFnZVNlbGVjdGlvbiA9IHRoaXMubWFuYWdlU2VsZWN0aW9uLmJpbmQodGhpcyk7XHJcbiAgICB3b3Jrc3BhY2UuZHJhd2luZ3NDb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLm1hbmFnZVNlbGVjdGlvbik7XHJcbiAgfVxyXG5cclxuXHJcbiAgLyoqKioqKioqKioqKioqKioqKioqKiBTRUxFQ1RJT04gT0YgRUxFTUVOVFMgKioqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuICAvKipcclxuICAgKiBNYW5hZ2VzIHRoZSBzZWxlY3Rpb24gYW5kIGRlc2VsZWN0aW9uIG9mIHRoZSBzdmcgZWxlbWVudHMuXHJcbiAgICogVGhpcyBzaG91bGQgYmUgZXh0ZW5kZWQgdG8gb2J0YWluIHRoZSBzZWxlY3RlZCBlbGVtZW50L3MuXHJcbiAgICogSWYgbXVsdGlwbGUgc2VsZWN0aW9uIGlzIHJlcXVpcmVkIHNldCB0aGUgaW5oZXJpdGVkIGZpZWxkICdtdWx0aXBsZVNlbGVjdGlvbidcclxuICAgKiB0byB0cnVlIGZvciBleGFtcGxlIGluIHRoZSBjb25zdHJ1Y3RvciBvZiB0aGUgZXh0ZW5kaW5nIGNsYXNzLiBEZWZhdWx0IGlzIGZhbHNlLlxyXG4gICAqL1xyXG4gIG1hbmFnZVNlbGVjdGlvbihlOiBNb3VzZUV2ZW50KSB7XHJcbiAgICB0aGlzLnNlbGVjdGlvbiA9IChlLnRhcmdldCBhcyBTVkdFbGVtZW50KS5jbG9zZXN0KCdbc2VsZWN0YWJsZV0nKTtcclxuICAgIC8vIElmIGF0IGZpcnN0IHRoZXJlIGlzIG5vIHNlbGVjdGlvbiBzdGFydCBsb29raW5nIGFyb3VuZCBmcm9tIHRoYXQgcG9pbnQuXHJcbiAgICBpZiAoIXRoaXMuc2VsZWN0aW9uKSB7XHJcbiAgICAgIGNvbnN0IGNvb3JkcyA9IGdlbmVyaWNzLmdldFZpZXdwb3J0UmVsYXRpdmVDb29yZHMoZSk7XHJcbiAgICAgIG91dGxvb3A6XHJcbiAgICAgIGZvciAobGV0IGkgPSAxOyBpIDw9IHRoaXMubWF4UHhPZmZzZXRUb0NoZWNrOyBpKyspIHtcclxuICAgICAgICBjb25zdCBwb2ludHMgPSBHZW9tZXRyeUNhbGMuZ2V0UG9pbnRzQXJvdW5kKGNvb3JkcywgaSk7XHJcbiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBwb2ludHMubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgIGNvbnN0IGVsID0gZG9jdW1lbnQuZWxlbWVudEZyb21Qb2ludChwb2ludHNbal0ueCwgcG9pbnRzW2pdLnkpO1xyXG4gICAgICAgICAgaWYgKGVsKVxyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdGlvbiA9IGVsLmNsb3Nlc3QoJ1tzZWxlY3RhYmxlXScpO1xyXG4gICAgICAgICAgaWYgKHRoaXMuc2VsZWN0aW9uKSBicmVhayBvdXRsb29wO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8gSWYgYW4gZWxlbWVudCBoYXMgYmVlbiBmb3VuZC5cclxuICAgIGlmICh0aGlzLnNlbGVjdGlvbiAhPT0gbnVsbCkge1xyXG4gICAgICBpZiAodGhpcy5tdWx0aXBsZVNlbGVjdGlvbikge1xyXG4gICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5jdXJyZW50U2VsZWN0aW9uLmluZGV4T2YodGhpcy5zZWxlY3Rpb24uZGF0YXNldC5pZCk7XHJcbiAgICAgICAgaWYgKGluZGV4ID09PSAtMSkge1xyXG4gICAgICAgICAgdGhpcy5zZWxlY3QodGhpcy5zZWxlY3Rpb24pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB0aGlzLmRlc2VsZWN0KHRoaXMuc2VsZWN0aW9uLmRhdGFzZXQuaWQpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBpZiAodGhpcy5jdXJyZW50U2VsZWN0aW9uLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgdGhpcy5zZWxlY3QodGhpcy5zZWxlY3Rpb24pO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5zZWxlY3Rpb24uZGF0YXNldC5pZCAhPT0gdGhpcy5jdXJyZW50U2VsZWN0aW9uWzBdKSB7XHJcbiAgICAgICAgICB0aGlzLmRlc2VsZWN0KHRoaXMuY3VycmVudFNlbGVjdGlvblswXSk7XHJcbiAgICAgICAgICB0aGlzLnNlbGVjdCh0aGlzLnNlbGVjdGlvbik7XHJcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnNlbGVjdGlvbi5kYXRhc2V0LmlkID09PSB0aGlzLmN1cnJlbnRTZWxlY3Rpb25bMF0pIHtcclxuICAgICAgICAgIHRoaXMuZGVzZWxlY3QodGhpcy5jdXJyZW50U2VsZWN0aW9uWzBdKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuY2xlYXJBbGxTZWxlY3Rpb24oKTtcclxuICAgIH1cclxuICAgIGNvbnNvbGUubG9nKCdTZWxlY3Rpb24gJywgdGhpcy5jdXJyZW50U2VsZWN0aW9uKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFNlbGVjdHMgdGhlIHNwZWNpZmllZCBlbGVtZW50IGJ5IGFkZGluZyBpdCB0byB0aGUgYXJyYXkgb2Ygc2VsZWN0ZWRcclxuICAgKiBlbGVtZW50cyBhbmQgc2V0dGluZyBpdHMgYXBwZWFyYW5jZSBhcyBzZWxlY3RlZC5cclxuICAgKiBAcGFyYW0gZWxlbWVudCBBbiBTVkcgc2VsZWN0YWJsZSBlbGVtZW50LlxyXG4gICAqL1xyXG4gIHNlbGVjdChlbGVtZW50OiBTVkdHRWxlbWVudCkge1xyXG4gICAgdGhpcy5jdXJyZW50U2VsZWN0aW9uLnB1c2goZWxlbWVudC5kYXRhc2V0LmlkKTtcclxuICAgIHRoaXMuYWRkU2VsZWN0aW9uQXBwZWFyYW5jZShlbGVtZW50KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIERlc2VsZWN0cyB0aGUgc3BlY2lmaWVkIGVsZW1lbnQgYnkgcmVtb3ZpbmcgaXQgZnJvbSB0aGUgYXJyYXkgb2Ygc2VsZWN0ZWQgZWxlbWVudHNcclxuICAgKiBhbmQgcmVtb3ZpbmcgdGhlIHNlbGVjdGVkIGFwcGVhcmFuY2UgaXQgaGFzIGluIHRoZSBhY3RpdmUgZHJhd2luZy5cclxuICAgKiBAcGFyYW0gZWxlbWVudElkIEFuIFNWRyBzZWxlY3RhYmxlIGVsZW1lbnQuXHJcbiAgICovXHJcbiAgZGVzZWxlY3QoZWxlbWVudElkOiBzdHJpbmcpIHtcclxuICAgIC8vY29uc3QgaW5kZXggPSB0aGlzLmN1cnJlbnRTZWxlY3Rpb24uZmluZEluZGV4KGVsID0+IGVsLmRhdGFzZXQuaWQgPT09IGVsZW1lbnQuZGF0YXNldC5pZCk7XHJcbiAgICBjb25zdCBpbmRleCA9IHRoaXMuY3VycmVudFNlbGVjdGlvbi5pbmRleE9mKGVsZW1lbnRJZCk7XHJcbiAgICBpZiAoaW5kZXggPiAtMSkge1xyXG4gICAgICB0aGlzLmN1cnJlbnRTZWxlY3Rpb24uc3BsaWNlKGluZGV4LCAxKTtcclxuICAgICAgY29uc3QgZWwgPSB0aGlzLndvcmtzcGFjZS5hY3RpdmVEcmF3aW5nLmNvbnRlbnQucXVlcnlTZWxlY3RvcignW2RhdGEtaWQ9XCInICsgZWxlbWVudElkICsgJ1wiXScpIGFzIFNWR0dFbGVtZW50O1xyXG4gICAgICBpZiAoZWwpIHRoaXMuY2xlYXJTZWxlY3Rpb25BcHBlYXJhbmNlKGVsKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFJlbW92ZXMgdGhlIHNlbGVjdGlvbiBhcHBlYXJhbmNlIGZyb20gYW55IHNlbGVjdGVkIGVsZW1lbnQgaW4gdGhlIHByb3ZpZGVkIGRyYXdpbmcuXHJcbiAgICogSXQgZG9lcyBub3QgcmVtb3ZlIGl0cyBpZCBmcm9tIHRoZSBhcnJheSBvZiBzZWxlY3RlZCBlbGVtZW50cy4gXHJcbiAgICovXHJcbiAgcmVtb3ZlRHJhd2luZ1NlbGVjdGlvbkFwcGVhcmFuY2UoZHJhd2luZzogRHJhd2luZykge1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmN1cnJlbnRTZWxlY3Rpb24ubGVuZ3RoOyBpKyspIHtcclxuICAgICAgY29uc3QgZWxlbWVudCA9IGRyYXdpbmcuY29udGVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1pZD1cIicgKyB0aGlzLmN1cnJlbnRTZWxlY3Rpb25baV0gKyAnXCJdJykgYXMgU1ZHR0VsZW1lbnQ7XHJcbiAgICAgIGlmIChlbGVtZW50KSB0aGlzLmNsZWFyU2VsZWN0aW9uQXBwZWFyYW5jZShlbGVtZW50KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEFkZHMgdGhlIHNlbGVjdGlvbiBhcHBlYXJhbmNlIHRvIGFueSBlbGVtZW50IGluIHRoZSBhcnJheSBvZiBzZWxlY3RlZCBlbGVtZW50cyB0aGF0XHJcbiAgICogaXMgaW4gdGhlIHByb3ZpZGVkIGRyYXdpbmcuXHJcbiAgICovXHJcbiAgYWRkRHJhd2luZ1NlbGVjdGlvbkFwcGVhcmFuY2UoZHJhd2luZzogRHJhd2luZykge1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmN1cnJlbnRTZWxlY3Rpb24ubGVuZ3RoOyBpKyspIHtcclxuICAgICAgY29uc3QgZWxlbWVudCA9IGRyYXdpbmcuY29udGVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1pZD1cIicgKyB0aGlzLmN1cnJlbnRTZWxlY3Rpb25baV0gKyAnXCJdJykgYXMgU1ZHR0VsZW1lbnQ7XHJcbiAgICAgIGlmIChlbGVtZW50KSB0aGlzLmFkZFNlbGVjdGlvbkFwcGVhcmFuY2UoZWxlbWVudCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBSZW1vdmVzIHRoZSBzZWxlY3RlZCBhcHBlYXJhbmNlIG9mIHRoZSBwcm92aWRlZCBlbGVtZW50LlxyXG4gICAqIEl0IGRvZXMgbm90IHJlbW92ZXMgdGhlIGVsZW1lbnQgZnJvbSB0aGUgYXJyYXkgb2Ygc2VsZWN0ZWQgZWxlbWVudHMuXHJcbiAgICogQHBhcmFtIGVsZW1lbnQgQW4gU1ZHIHNlbGVjdGFibGUgZWxlbWVudC5cclxuICAgKi9cclxuICBjbGVhclNlbGVjdGlvbkFwcGVhcmFuY2UoZWxlbWVudDogU1ZHR0VsZW1lbnQpIHtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZWxlbWVudC5jaGlsZHJlbi5sZW5ndGg7IGkrKylcclxuICAgICAgZWxlbWVudC5jaGlsZHJlbltpXS5jbGFzc0xpc3QucmVtb3ZlKCdzZWxlY3RlZCcpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogU2V0cyB0aGUgYXBwZWFyYW5jZSBvZiB0aGUgcHJvdmlkZWQgZWxlbWVudCBhcyBzZWxlY3RlZC5cclxuICAgKiBJdCBkb2VzIG5vdCBhZGQgdGhlIGVsZW1lbnQgdG8gdGhlIGFycmF5IG9mIHNlbGVjdGVkIGVsZW1lbnRzLlxyXG4gICAqIEBwYXJhbSBlbGVtZW50IEFuIFNWRyBzZWxlY3RhYmxlIGVsZW1lbnQuXHJcbiAgICovXHJcbiAgYWRkU2VsZWN0aW9uQXBwZWFyYW5jZShlbGVtZW50OiBTVkdHRWxlbWVudCkge1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBlbGVtZW50LmNoaWxkcmVuLmxlbmd0aDsgaSsrKVxyXG4gICAgICBlbGVtZW50LmNoaWxkcmVuW2ldLmNsYXNzTGlzdC5hZGQoJ3NlbGVjdGVkJyk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBSZW1vdmVzIHRoZSBzZWxlY3Rpb24gZnJvbSBhbGwgdGhlIHNlbGVjdGVkIGVsZW1lbnRzIGFzIHdlbGwgYXMgdGhlXHJcbiAgICogc2VsZWN0aW9uIGFwcGVhcmFuY2UgZnJvbSBhbGwgdGhlIHNlbGVjdGVkIGVsZW1lbnRzIGluIHRoZSBhY3RpdmUgZHJhd2luZy5cclxuICAgKi9cclxuICBjbGVhckFsbFNlbGVjdGlvbigpIHtcclxuICAgIGlmICh0aGlzLmN1cnJlbnRTZWxlY3Rpb24ubGVuZ3RoID4gMCkge1xyXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuY3VycmVudFNlbGVjdGlvbi5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGNvbnN0IGVsZW1lbnQgPSB0aGlzLndvcmtzcGFjZS5hY3RpdmVEcmF3aW5nLmNvbnRlbnQucXVlcnlTZWxlY3RvcignW2RhdGEtaWQ9XCInICsgdGhpcy5jdXJyZW50U2VsZWN0aW9uW2ldICsgJ1wiXScpIGFzIFNWR0dFbGVtZW50O1xyXG4gICAgICAgIGlmIChlbGVtZW50KSB0aGlzLmNsZWFyU2VsZWN0aW9uQXBwZWFyYW5jZShlbGVtZW50KTtcclxuICAgICAgfVxyXG4gICAgICB0aGlzLmN1cnJlbnRTZWxlY3Rpb24ubGVuZ3RoID0gMDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEdldHMgYW4gYXJyYXkgb2YgcmVmZXJlbmNlcyBvZiBTVkdHRWxlbWVudHMgaW4gdGhlIGRyYXdpbmcgdGhhdCBhcmUgY3VycmVudGx5IHNlbGVjdGVkLlxyXG4gICAqIE5lZWRlZCBiZWNhdXNlIG5vdCBhbGwgc2VsZWN0ZWQgZWxlbWVudHMgbWF5IGFwcGVhciBpbiBhIGRyYXdpbmcuIFxyXG4gICAqL1xyXG4gIGdldERyYXdpbmdTZWxlY3RlZEVsZW1lbnRzUmVmcyhkcmF3aW5nOiBEcmF3aW5nKTogU1ZHR0VsZW1lbnRbXSB7XHJcbiAgICBjb25zdCBzZWxlY3RlZEVsZW1lbnRzOiBTVkdHRWxlbWVudFtdID0gW107XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuY3VycmVudFNlbGVjdGlvbi5sZW5ndGg7IGkrKykge1xyXG4gICAgICBjb25zdCBlbGVtZW50ID0gZHJhd2luZy5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWlkPVwiJyArIHRoaXMuY3VycmVudFNlbGVjdGlvbltpXSArICdcIl0nKSBhcyBTVkdHRWxlbWVudDtcclxuICAgICAgaWYgKGVsZW1lbnQpIHNlbGVjdGVkRWxlbWVudHMucHVzaChlbGVtZW50KTtcclxuICAgIH1cclxuICAgIHJldHVybiBzZWxlY3RlZEVsZW1lbnRzO1xyXG4gIH1cclxuXHJcbiAga2lsbCgpIHtcclxuICAgIHN1cGVyLmtpbGwoKTtcclxuICAgIHRoaXMud29ya3NwYWNlLmRyYXdpbmdzQ29udGFpbmVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5tYW5hZ2VTZWxlY3Rpb24pO1xyXG4gICAgdGhpcy5jbGVhckFsbFNlbGVjdGlvbigpO1xyXG4gIH1cclxufSIsImltcG9ydCB7IEVsZW1lbnRTZWxlY3Rpb24gfSBmcm9tICcuL2VsZW1lbnRTZWxlY3Rpb24nO1xyXG5pbXBvcnQgeyBDb21tZW50IH0gZnJvbSAnLi8uLi9jb21tZW50JztcclxuaW1wb3J0IHR5cGUgeyBXb3Jrc3BhY2UgfSBmcm9tICcuLi93b3Jrc3BhY2UnO1xyXG5cclxuZXhwb3J0IGNsYXNzIEFkZENvbW1lbnQgZXh0ZW5kcyBFbGVtZW50U2VsZWN0aW9uIHtcclxuICBtdWx0aXBsZVNlbGVjdGlvbiA9IHRydWU7XHJcbiAgYm91bmRpbmdCb3g6IGFueTsgLy8gVE9ET1xyXG4gIHdhaXRpbmdGb3JDb21tZW50ID0gZmFsc2U7IC8vIFRPRE8gdXNlIHRoaXMgaW5zdGVhZCB0byBhdm9pZCBjaGFuZ2luZyBkcmF3aW5nP1xyXG4gIC8vIFRoaXMgY291bGQgYmUgYSBwcm9wZXJ0eSBvZiB0aGUgVG9vbCBjbGFzcy5cclxuICBoYXNVc2VkUGFuZWwgPSBmYWxzZTtcclxuXHJcbiAgY29uc3RydWN0b3IobmFtZTogc3RyaW5nLCB0b29sQnRuOiBIVE1MRWxlbWVudCwgd29ya3NwYWNlOiBXb3Jrc3BhY2UpIHtcclxuICAgIHN1cGVyKG5hbWUsIHRvb2xCdG4sIHdvcmtzcGFjZSk7XHJcbiAgICBjb25zb2xlLmxvZygnQ29tbWVudCBlbGVtZW50IHRvb2wgZW5hYmxlZC4nKTtcclxuICAgIHRoaXMuY2FuY2VsQ29tbWVudCA9IHRoaXMuY2FuY2VsQ29tbWVudC5iaW5kKHRoaXMpO1xyXG4gICAgd29ya3NwYWNlLmNvbW1lbnRGb3JtLmNhbmNlbENyZWF0ZUJ0bi5vbmNsaWNrID0gdGhpcy5jYW5jZWxDb21tZW50O1xyXG4gICAgaWYgKHdvcmtzcGFjZS5wZXJtaXNzaW9ucy5sZW5ndGggPiAxKSB7IC8vIFRoZXJlIGlzIGFsd2F5cyBhdCBsZWFzdCB0aGUgb3duZXIuXHJcbiAgICAgIGNvbnN0IG1lbWJlcnNFbWFpbHM6IHN0cmluZ1tdID0gW107XHJcbiAgICAgIGNvbnN0IGN1cnJlbnRVc2VyRW1haWwgPSB3aW5kb3cuZ2V0Q3VycmVudFVzZXIoKS5lbWFpbEFkZHJlc3M7XHJcbiAgICAgIHdvcmtzcGFjZS5wZXJtaXNzaW9ucy5mb3JFYWNoKG1lbWJlciA9PiB7XHJcbiAgICAgICAgaWYgKG1lbWJlci5lbWFpbEFkZHJlc3MgIT09IGN1cnJlbnRVc2VyRW1haWwpIHtcclxuICAgICAgICAgIG1lbWJlcnNFbWFpbHMucHVzaChgPG9wdGlvbiB2YWx1ZT1cIiR7bWVtYmVyLmVtYWlsQWRkcmVzc31cIj4ke21lbWJlci5kaXNwbGF5TmFtZX08L29wdGlvbj5gKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgICB3b3Jrc3BhY2UuY29tbWVudEZvcm0ubWVudGlvbnNJbnB1dC5pbm5lckhUTUwgPSBtZW1iZXJzRW1haWxzLmpvaW4oJycpO1xyXG4gICAgICB3b3Jrc3BhY2UuY29tbWVudEZvcm0uc2hvd01lbnRpb25zU2VjdGlvbigpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgd29ya3NwYWNlLmNvbW1lbnRGb3JtLmhpZGVNZW50aW9uc1NlY3Rpb24oKTtcclxuICAgIH1cclxuICAgIHRoaXMuYWRkQ29tbWVudCA9IHRoaXMuYWRkQ29tbWVudC5iaW5kKHRoaXMpO1xyXG4gICAgd29ya3NwYWNlLmNvbW1lbnRGb3JtLmFkZENvbW1lbnRCdG4ub25jbGljayA9IHRoaXMuYWRkQ29tbWVudDtcclxuICAgIC8vIEl0IGNvdWxkIGJlIGRpc2FibGVkIGFuZCBvciBmdWxsIGlmIHRoZSBwcmV2aW91cyB1c2Ugd2FzIHZpZXcgbW9kZS5cclxuICAgIHdvcmtzcGFjZS5jb21tZW50Rm9ybS5lbmFibGVGb3JtKCk7XHJcbiAgICB3b3Jrc3BhY2UuY29tbWVudEZvcm0ucmVzZXQoKTtcclxuICB9XHJcblxyXG5cclxuICAvKipcclxuICAgKiBFeHRlbmRzIHRoZSBtZXRob2Qgb2YgdGhlIHN1cGVyIGNsYXNzIHRvIGdldCB0aGUgc2VsZWN0ZWQgZWxlbWVudC5cclxuICAgKi9cclxuICBtYW5hZ2VTZWxlY3Rpb24oZTogTW91c2VFdmVudCkge1xyXG4gICAgc3VwZXIubWFuYWdlU2VsZWN0aW9uKGUpO1xyXG4gICAgaWYgKHRoaXMuY3VycmVudFNlbGVjdGlvbi5sZW5ndGggPiAwKSB7XHJcbiAgICAgIHRoaXMud2FpdGluZ0ZvckNvbW1lbnQgPSB0cnVlO1xyXG4gICAgICAvLyBTaG93IHRoZSBmb3JtIHRvIGFkZCB0aGUgY29tbWVudC5cclxuICAgICAgLy8gVE9ETyBPcGVuIHRoZSBwYW5lbCB3aGVuIGFjdGl2YXRpbmcgdGhlIHRvb2wgaW5zdGVhZC5cclxuICAgICAgdGhpcy53b3Jrc3BhY2UuY29tbWVudEZvcm0uYnV0dG9uc1Zpc2liaWxpdHlNb2RlKCdjcmVhdGUnKTtcclxuICAgICAgdGhpcy53b3Jrc3BhY2UubWFpblBhbmVsLmFkZFNlY3Rpb24oJ0NvbW1lbnQnLCB0aGlzLndvcmtzcGFjZS5jb21tZW50Rm9ybS5mb3JtRWxlbWVudCk7XHJcbiAgICAgIHRoaXMud29ya3NwYWNlLm1haW5QYW5lbC5vcGVuKCk7XHJcbiAgICAgIHRoaXMuaGFzVXNlZFBhbmVsID0gdHJ1ZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMud2FpdGluZ0ZvckNvbW1lbnQgPSBmYWxzZTtcclxuICAgIH1cclxuICB9XHJcblxyXG5cclxuICBhZGRDb21tZW50KCkge1xyXG4gICAgaWYgKHRoaXMuY3VycmVudFNlbGVjdGlvbi5sZW5ndGggPT09IDApIHJldHVybjtcclxuICAgIC8vIElmICdhY3RpdmVEcmF3aW5nJyBkb2VzbnQgaGF2ZSBhIGdyb3VwIGZvciBjb21tZW50cyBjcmVhdGUgaXQuXHJcbiAgICBpZiAodGhpcy53b3Jrc3BhY2UuYWN0aXZlRHJhd2luZy5jb21tZW50c0dyb3VwID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgdGhpcy53b3Jrc3BhY2UuYWN0aXZlRHJhd2luZy5jcmVhdGVDb21tZW50c0dyb3VwKCk7XHJcbiAgICB9XHJcbiAgICAvLyBNZW50aW9ucyBpcyBvbmx5IHRyZWF0ZWQgaWYgdGhlcmUgaXMgbW9yZSB0aGFuIG9uZSBtZW1iZXIgaW4gdGhlIHRlYW0uXHJcbiAgICBsZXQgc2VsZWN0ZWRFbWFpbHM7XHJcbiAgICBpZiAodGhpcy53b3Jrc3BhY2UucGVybWlzc2lvbnMubGVuZ3RoID4gMSkgeyAvLyB0aGVyZSBpcyBhbHdheXMgYXQgbGVhc3QgdGhlIG93bmVyXHJcbiAgICAgIHNlbGVjdGVkRW1haWxzID0gdGhpcy53b3Jrc3BhY2UuY29tbWVudEZvcm0uZ2V0U2VsZWN0ZWRNZW1iZXJzKCk7XHJcbiAgICAgIGlmIChzZWxlY3RlZEVtYWlscy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgY29uc3QgY3VycmVudFVzZXJOYW1lID0gd2luZG93LmdldEN1cnJlbnRVc2VyKCkuZGlzcGxheU5hbWU7XHJcbiAgICAgICAgY29uc3QgY3VycmVudFVzZXJQaG90byA9IHdpbmRvdy5nZXRDdXJyZW50VXNlcigpLnBob3RvTGluaztcclxuICAgICAgICB0aGlzLndvcmtzcGFjZS5wZW5kaW5nTm90aWZpY2F0aW9uc1RvU2VuZC5wdXNoKHtcclxuICAgICAgICAgIGVtYWlsczogc2VsZWN0ZWRFbWFpbHMsXHJcbiAgICAgICAgICB1c2VyTmFtZTogY3VycmVudFVzZXJOYW1lLFxyXG4gICAgICAgICAgdXNlclBob3RvOiBjdXJyZW50VXNlclBob3RvLFxyXG4gICAgICAgICAgdGV4dENvbnRlbnQ6IHRoaXMud29ya3NwYWNlLmNvbW1lbnRGb3JtLnRleHRJbnB1dC52YWx1ZSxcclxuICAgICAgICAgIHByb2plY3ROYW1lOiB0aGlzLndvcmtzcGFjZS5wcm9qZWN0TmFtZSxcclxuICAgICAgICAgIHByb2plY3RJZDogdGhpcy53b3Jrc3BhY2UucHJvamVjdElkXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGNvbnN0IGNvbW1lbnQgPSBuZXcgQ29tbWVudCh0aGlzLmN1cnJlbnRTZWxlY3Rpb24sIHRoaXMud29ya3NwYWNlLmNvbW1lbnRGb3JtLnRleHRJbnB1dC52YWx1ZSwgc2VsZWN0ZWRFbWFpbHMpO1xyXG4gICAgLy8gR2V0IHJlZmVyZW5jZXMgdG8gdGhlIGVsZW1lbnRzIGluIHRoZSBkcmF3aW5nIHRvIHBhc3MgdGhlbVxyXG4gICAgY29uc3Qgc2VsRWxlbWVudHNSZWYgPSB0aGlzLmdldERyYXdpbmdTZWxlY3RlZEVsZW1lbnRzUmVmcyh0aGlzLndvcmtzcGFjZS5hY3RpdmVEcmF3aW5nKTtcclxuICAgIGNvbW1lbnQuY3JlYXRlUmVwcmVzZW50YXRpb24odGhpcy53b3Jrc3BhY2UuYWN0aXZlRHJhd2luZy5jb21tZW50c0dyb3VwLCBzZWxFbGVtZW50c1JlZik7IC8vIFRPRE8gcmVwbGFjZSBieSB0aGUgbmV3IG1ldGhvZCEhIVxyXG4gICAgLy8gQWRkIGNvbW1lbnQgaWQgdG8gYWxsIHRoZSBlbGVtZW50IGFycmF5cyBpbiB0aGUgb2JqIFdvcmtzcGFjZS5lbGVtZW50c0NvbW1lbnRzLlxyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmN1cnJlbnRTZWxlY3Rpb24ubGVuZ3RoOyBpKyspIHtcclxuICAgICAgaWYgKCF0aGlzLndvcmtzcGFjZS5lbGVtZW50c0NvbW1lbnRzLmhhc093blByb3BlcnR5KHRoaXMuY3VycmVudFNlbGVjdGlvbltpXSkpXHJcbiAgICAgICAgdGhpcy53b3Jrc3BhY2UuZWxlbWVudHNDb21tZW50c1t0aGlzLmN1cnJlbnRTZWxlY3Rpb25baV1dID0gW107XHJcbiAgICAgIHRoaXMud29ya3NwYWNlLmVsZW1lbnRzQ29tbWVudHNbdGhpcy5jdXJyZW50U2VsZWN0aW9uW2ldXS5wdXNoKGNvbW1lbnQuaWQpO1xyXG4gICAgfVxyXG4gICAgY29uc29sZS5sb2coJ2VsZW1lbnRzQ29tbWVudHMgJywgdGhpcy53b3Jrc3BhY2UuZWxlbWVudHNDb21tZW50cyk7XHJcbiAgICB0aGlzLndvcmtzcGFjZS5jb21tZW50cy5wdXNoKGNvbW1lbnQpO1xyXG4gICAgY29uc29sZS5sb2codGhpcy53b3Jrc3BhY2UuY29tbWVudHMpO1xyXG4gICAgdGhpcy53b3Jrc3BhY2UuY29tbWVudEZvcm0ucmVzZXQoKTtcclxuICAgIHRoaXMud29ya3NwYWNlLm1haW5QYW5lbC5jbG9zZSgpO1xyXG4gICAgdGhpcy53YWl0aW5nRm9yQ29tbWVudCA9IGZhbHNlO1xyXG4gICAgLy8gV29ya3NwYWNlIG1ldGhvZCB0byBpbmRpY2F0ZSB0aGF0IHRoZXJlIGFyZSB1bnNhdmVkIGNoYW5nZXMgb24gY29tbWVudHMuXHJcbiAgICB0aGlzLndvcmtzcGFjZS51bnNhdmVkQ29tbWVudHNEYXRhKCk7XHJcbiAgICB0aGlzLndvcmtzcGFjZS5kcmF3aW5ncy5mb3JFYWNoKGRyYXdpbmcgPT4ge1xyXG4gICAgICBpZiAoZHJhd2luZy5pZCAhPT0gdGhpcy53b3Jrc3BhY2UuYWN0aXZlRHJhd2luZy5pZCkge1xyXG4gICAgICAgIGRyYXdpbmcuY29tbWVudHNDaGFuZ2VkID0gdHJ1ZTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICBzdXBlci5jbGVhckFsbFNlbGVjdGlvbigpO1xyXG4gIH1cclxuXHJcblxyXG4gIGNhbmNlbENvbW1lbnQoKSB7XHJcbiAgICB0aGlzLndvcmtzcGFjZS5tYWluUGFuZWwuY2xvc2UoKTtcclxuICAgIHRoaXMud29ya3NwYWNlLmNvbW1lbnRGb3JtLnJlc2V0KCk7XHJcbiAgICB0aGlzLndhaXRpbmdGb3JDb21tZW50ID0gZmFsc2U7XHJcbiAgICBzdXBlci5jbGVhckFsbFNlbGVjdGlvbigpO1xyXG4gIH1cclxuXHJcblxyXG4gIGtpbGwoKSB7XHJcbiAgICBzdXBlci5raWxsKCk7XHJcbiAgICBjb25zb2xlLmxvZygnQ29tbWVudCBlbGVtZW50IHRvb2wgZGlzYWJsZWQuJyk7XHJcbiAgICBpZiAodGhpcy53YWl0aW5nRm9yQ29tbWVudCkge1xyXG4gICAgICB0aGlzLndvcmtzcGFjZS5jb21tZW50Rm9ybS5yZXNldCgpO1xyXG4gICAgICB0aGlzLndvcmtzcGFjZS5tYWluUGFuZWwuY2xvc2UoKTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzLmhhc1VzZWRQYW5lbCkge1xyXG4gICAgICB0aGlzLndvcmtzcGFjZS5tYWluUGFuZWwucmVtb3ZlU2VjdGlvbignQ29tbWVudCcpO1xyXG4gICAgfVxyXG4gICAgLy8gUmVtb3ZlIHRoZSB0b29sIGV2ZW50IGxpc3RlbmVycy5cclxuICAgIHRoaXMud29ya3NwYWNlLmNvbW1lbnRGb3JtLmFkZENvbW1lbnRCdG4ub25jbGljayA9IG51bGw7XHJcbiAgICB0aGlzLndvcmtzcGFjZS5jb21tZW50Rm9ybS5jYW5jZWxDcmVhdGVCdG4ub25jbGljayA9IG51bGw7XHJcbiAgfVxyXG59IiwiaW1wb3J0IEFQSSBmcm9tICcuLi9hcGknO1xyXG5pbXBvcnQgeyBFbGVtZW50U2VsZWN0aW9uIH0gZnJvbSAnLi9lbGVtZW50U2VsZWN0aW9uJztcclxuaW1wb3J0IHR5cGUgeyBXb3Jrc3BhY2UgfSBmcm9tICcuLi93b3Jrc3BhY2UnO1xyXG5pbXBvcnQgdHlwZSB7IFBhbmVsU2VjdGlvbiB9IGZyb20gJy4uL21haW5QYW5lbCc7XHJcbmltcG9ydCB7IEVsZW1lbnREYXRhRW50cnksIEVsZW1lbnREYXRhLCBNb2RlbEVsZW1lbnRzRGF0YSwgUHJvamVjdERhdGEgfSBmcm9tICcuLi90eXBlcyc7XHJcblxyXG5leHBvcnQgY2xhc3MgU2hvd0VsZW1lbnREYXRhIGV4dGVuZHMgRWxlbWVudFNlbGVjdGlvbiB7XHJcbiAgZWxlbWVudHNEYXRhOiBNb2RlbEVsZW1lbnRzRGF0YTtcclxuICBwcm9qZWN0c0RhdGE6IFByb2plY3REYXRhW107XHJcbiAgcHJvamVjdEluZGV4OiBudW1iZXI7XHJcbiAgY3VycmVudEVsZW1lbnREYXRhOiBFbGVtZW50RGF0YTtcclxuICAvLyBJZiBhIHRvb2wgcmVxdWlyZXMgdGhlIHBhbmVsIGl0IGlzIHNwZWNpZmllZCBoZXJlLlxyXG4gIC8vIFRoaXMgY291bGQgYmUgYSBwcm9wZXJ0eSBvZiB0aGUgVG9vbCBjbGFzcy5cclxuICBoYXNVc2VkUGFuZWwgPSBmYWxzZTtcclxuXHJcbiAgY29uc3RydWN0b3IobmFtZTogc3RyaW5nLCB0b29sQnRuOiBIVE1MRWxlbWVudCwgd29ya3NwYWNlOiBXb3Jrc3BhY2UpIHtcclxuICAgIHN1cGVyKG5hbWUsIHRvb2xCdG4sIHdvcmtzcGFjZSk7XHJcbiAgICBjb25zb2xlLmxvZygnRWxlbWVudHMgZGF0YSB0b29sIGVuYWJsZWQuJyk7XHJcbiAgICB0aGlzLmVsZW1lbnRzRGF0YSA9IHdvcmtzcGFjZS5lbGVtZW50c0RhdGE7XHJcbiAgICB0aGlzLnByb2plY3RzRGF0YSA9IHdvcmtzcGFjZS5wcm9qZWN0c0RhdGE7XHJcbiAgICB0aGlzLnByb2plY3RJbmRleCA9IHdvcmtzcGFjZS5wcm9qZWN0SW5kZXg7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBFeHRlbmRzIHRoZSBtZXRob2Qgb2YgdGhlIHN1cGVyIGNsYXNzIHRvIGdldCB0aGUgc2VsZWN0ZWQgZWxlbWVudC5cclxuICAgKi9cclxuICBtYW5hZ2VTZWxlY3Rpb24oZTogTW91c2VFdmVudCkge1xyXG4gICAgc3VwZXIubWFuYWdlU2VsZWN0aW9uKGUpO1xyXG4gICAgLy8gT25seSBpZiBhbiBlbGVtZW50IGhhcyBiZWVuIGNsaWNrZWQgYW5kIGFkZGVkLCBzaW5jZSBpdCBjb3VsZCBoYXZlIGJlZW4gcmVtb3ZlZC5cclxuICAgIGlmICh0aGlzLnNlbGVjdGlvbiAhPT0gbnVsbCAmJiB0aGlzLmN1cnJlbnRTZWxlY3Rpb24ubGVuZ3RoID4gMCkge1xyXG4gICAgICB0aGlzLnNob3dFbGVtZW50RGF0YSh0aGlzLnNlbGVjdGlvbi5kYXRhc2V0LmNhdGVnb3J5LCB0aGlzLnNlbGVjdGlvbi5kYXRhc2V0LmlkKTtcclxuICAgICAgaWYgKHRoaXMuc2VsZWN0aW9uLmRhdGFzZXQuY29tbWVudCkge1xyXG4gICAgICAgIHRoaXMud29ya3NwYWNlLmNvbW1lbnRGb3JtLnZpZXdDb21tZW50KHRoaXMuc2VsZWN0aW9uLmRhdGFzZXQuY29tbWVudCk7XHJcbiAgICAgICAgdGhpcy53b3Jrc3BhY2UubWFpblBhbmVsLmFkZFNlY3Rpb24oJ0NvbW1lbnQnLCB0aGlzLndvcmtzcGFjZS5jb21tZW50Rm9ybS5mb3JtRWxlbWVudCk7XHJcbiAgICAgIH0gZWxzZSBpZiAodGhpcy53b3Jrc3BhY2UubWFpblBhbmVsLnNlY3Rpb25zLmZpbmQocyA9PiBzLm5hbWUgPT09ICdDb21tZW50JykpIHtcclxuICAgICAgICAvLyBJZiB0aGUgY29tbWVudHMgc2VjdGlvbiBpcyB0aGVyZSBmcm9tIHRoZSBwcmV2aW91cyBzZWxlY3RlZCBlbGVtZW50IGl0IHNob3VsZCBiZSByZW1vdmVkLlxyXG4gICAgICAgIHRoaXMud29ya3NwYWNlLm1haW5QYW5lbC5yZW1vdmVTZWN0aW9uKCdDb21tZW50Jyk7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSBpZiAodGhpcy5jdXJyZW50RWxlbWVudERhdGEpIHtcclxuICAgICAgdGhpcy5jdXJyZW50RWxlbWVudERhdGEgPSB1bmRlZmluZWQ7XHJcbiAgICAgIHRoaXMud29ya3NwYWNlLm1haW5QYW5lbC5jbG9zZSgpO1xyXG4gICAgICAvLyBUT0RPOiBDbGVhbiBkYXRhIHRhYmxlcyBjb250ZW50LlxyXG4gICAgICBjb25zb2xlLmxvZygnRGF0YSB0YWJsZSBjbGVhbmVkLicpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcblxyXG4gIC8qKioqKioqKioqKioqKioqKioqKiBFTEVNRU5UUyBBU1NPQ0lBVEVEIERBVEEgKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbiAgLyoqXHJcbiAgICogU2hvd3MgdGhlIGRhdGEgYXNzb2NpYXRlZCB3aXRoIHRoZSBzZWxlY3RlZCBlbGVtZW50IGJ5IGZldGNoaW5nIGl0IGlmIG5lZWRlZC5cclxuICAgKi9cclxuICBhc3luYyBzaG93RWxlbWVudERhdGEoY2F0ZWdvcnk6IHN0cmluZywgaWQ6IHN0cmluZykge1xyXG4gICAgbGV0IHN1Y2Nlc3MgPSB0cnVlO1xyXG4gICAgaWYgKHRoaXMuZWxlbWVudHNEYXRhW2NhdGVnb3J5XSkge1xyXG4gICAgICB0aGlzLmN1cnJlbnRFbGVtZW50RGF0YSA9IHRoaXMuZWxlbWVudHNEYXRhW2NhdGVnb3J5XS5pbnN0YW5jZXNbaWRdO1xyXG4gICAgICBjb25zb2xlLmxvZyh0aGlzLmN1cnJlbnRFbGVtZW50RGF0YSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25zdCBjYXRlZ29yeURhdGEgPSB0aGlzLnByb2plY3RzRGF0YVt0aGlzLnByb2plY3RJbmRleF0uZWxlbWVudHNEYXRhLmZpbmQob2JqID0+IG9iai5uYW1lLnJlcGxhY2UoJy5qc29uJywgJycpID09PSBjYXRlZ29yeSk7XHJcbiAgICAgIGlmIChjYXRlZ29yeURhdGEgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIC8vIFRPRE86IHNob3cgYSBsb2FkZXIgaW4gdGhlIHRhYmxlLlxyXG4gICAgICAgIGF3YWl0IEFQSS5nZXRGaWxlQ29udGVudChjYXRlZ29yeURhdGEuaWQpLnRoZW4ocmVzID0+IHtcclxuICAgICAgICAgIHRoaXMuZWxlbWVudHNEYXRhW2NhdGVnb3J5XSA9IEpTT04ucGFyc2UocmVzLmJvZHkpO1xyXG4gICAgICAgICAgLy8gVE9ETzogaGlkZSB0aGUgbG9hZGVyIGluIHRoZSB0YWJsZS5cclxuICAgICAgICAgIHRoaXMuY3VycmVudEVsZW1lbnREYXRhID0gdGhpcy5lbGVtZW50c0RhdGFbY2F0ZWdvcnldLmluc3RhbmNlc1tpZF07XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmN1cnJlbnRFbGVtZW50RGF0YSk7XHJcbiAgICAgICAgfSwgZXJyID0+IHtcclxuICAgICAgICAgIC8vIFRPRE86IGhpZGUgdGhlIGxvYWRlciBpbiB0aGUgdGFibGUuXHJcbiAgICAgICAgICBzdWNjZXNzID0gZmFsc2U7XHJcbiAgICAgICAgICAvLyBUT0RPOiBzaG93IGVycm9yIG1lc3NhZ2UuXHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdUaGVyZSBpcyBubyBkYXRhIGZvciB0aGF0IGVsZW1lbnQuJyk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGlmIChzdWNjZXNzKSB7XHJcbiAgICAgIC8vIFNldHMgdGhlIGNvbnRlbnRzIG9uIHRoZSBwcm9wZXJ0aWVzIGFuZCBwYXJhbWV0ZXJzIHBhbmVscy5cclxuICAgICAgdGhpcy53b3Jrc3BhY2UucHJvcHNUYWJsZXNDb250YWluZXIuaW5uZXJIVE1MID0gdGhpcy5jcmVhdGVEYXRhVGFibGUodGhpcy5jdXJyZW50RWxlbWVudERhdGEucHJvcGVydGllcyk7XHJcbiAgICAgIGNvbnN0IHNlY3Rpb25zOiBQYW5lbFNlY3Rpb25bXSA9IFt7XHJcbiAgICAgICAgbmFtZTogJ1Byb3BlcnRpZXMnLFxyXG4gICAgICAgIGJvZHk6IHRoaXMud29ya3NwYWNlLnByb3BzVGFibGVzQ29udGFpbmVyXHJcbiAgICAgIH1dO1xyXG4gICAgICBpZiAodGhpcy5jdXJyZW50RWxlbWVudERhdGEucGFyYW1ldGVycy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgdGhpcy53b3Jrc3BhY2UucGFyYW1zVGFibGVzQ29udGFpbmVyLmlubmVySFRNTCA9IHRoaXMuY3JlYXRlRGF0YVRhYmxlKHRoaXMuY3VycmVudEVsZW1lbnREYXRhLnBhcmFtZXRlcnMpO1xyXG4gICAgICAgIHNlY3Rpb25zLnB1c2goe1xyXG4gICAgICAgICAgbmFtZTogJ1BhcmFtZXRlcnMnLFxyXG4gICAgICAgICAgYm9keTogdGhpcy53b3Jrc3BhY2UucGFyYW1zVGFibGVzQ29udGFpbmVyXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy53b3Jrc3BhY2UubWFpblBhbmVsLmFkZFNlY3Rpb25zKHNlY3Rpb25zKTtcclxuICAgICAgdGhpcy53b3Jrc3BhY2UubWFpblBhbmVsLm9wZW4oKTtcclxuICAgICAgdGhpcy5oYXNVc2VkUGFuZWwgPSB0cnVlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIENyZWF0ZXMgdmFyaW91cyBIVE1MIHRhYmxlcyB3aXRoIHRoZSBkYXRhIG9mIHRoZSBvYmplY3RzIGFycmF5LlxyXG4gICAqIEVhY2ggb2JqZWN0IGluIHRoZSBhcnJheSBzaG91bGQgY29udGFpbiAnbmFtZScsICd2YWx1ZScgYW5kICdjYXRlZ29yeScuXHJcbiAgICovXHJcbiAgY3JlYXRlRGF0YVRhYmxlKGRhdGFFbnRyaWVzOiBFbGVtZW50RGF0YUVudHJ5W10pIHtcclxuICAgIGNvbnN0IGNhdGVnb3JpZXNUaXRsZXM6IHN0cmluZ1tdID0gW107XHJcbiAgICBjb25zdCBkYXRhQnlDYXRlZ29yaWVzOiBzdHJpbmdbXVtdID0gW107XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRhdGFFbnRyaWVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIGNvbnN0IGNhdGVnb3J5ID0gZGF0YUVudHJpZXNbaV0uY2F0ZWdvcnk7XHJcbiAgICAgIGNvbnN0IGNhdGVnb3J5SW5kZXggPSBjYXRlZ29yaWVzVGl0bGVzLmluZGV4T2YoY2F0ZWdvcnkpO1xyXG4gICAgICBjb25zdCB0YWJsZVJvdyA9IGA8dHI+PHRoPiR7ZGF0YUVudHJpZXNbaV0ubmFtZX08L3RoPjx0ZD4ke2RhdGFFbnRyaWVzW2ldLnZhbHVlfTwvdGQ+PC90cj5gO1xyXG4gICAgICBpZiAoY2F0ZWdvcnlJbmRleCAhPT0gLTEpIHtcclxuICAgICAgICBkYXRhQnlDYXRlZ29yaWVzW2NhdGVnb3J5SW5kZXhdLnB1c2godGFibGVSb3cpO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgIGRhdGFCeUNhdGVnb3JpZXMucHVzaChbYDx0YWJsZSBjbGFzcz1cImRhdGEtdGFibGVcIj48dGhlYWQ+PHRyPjx0aCBjb2xzcGFuPVwiMlwiPiR7Y2F0ZWdvcnl9PC90aD48L3RyPjwvdGhlYWQ+YCwgdGFibGVSb3ddKTtcclxuICAgICAgICBjYXRlZ29yaWVzVGl0bGVzLnB1c2goY2F0ZWdvcnkpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBjb25zdCBkYXRhVGFibGU6IHN0cmluZ1tdID0gW107XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRhdGFCeUNhdGVnb3JpZXMubGVuZ3RoOyBpKyspXHJcbiAgICAgIGRhdGFUYWJsZS5wdXNoKGRhdGFCeUNhdGVnb3JpZXNbaV0uam9pbignJykgKyAnPC90Ym9keT48L3RhYmxlPicpO1xyXG5cclxuICAgIHJldHVybiBkYXRhVGFibGUuam9pbignJyk7XHJcbiAgfVxyXG5cclxuXHJcbiAga2lsbCgpIHtcclxuICAgIHN1cGVyLmtpbGwoKTtcclxuICAgIC8vIFRPRE86IENsZWFyIHRoZSBkYXRhIHRhYmxlLlxyXG4gICAgLy8gVE9ETzogSWYgdGhlIHVzZXIgaGFzIHRoZSBvcHRpb24gdG8gYW5jaG9yIHRoZSBwYW5lbCB0aGlzIHdvdWxkIGJlIHdyb25nLlxyXG4gICAgaWYgKHRoaXMud29ya3NwYWNlLm1haW5QYW5lbC5pc09wZW4pIHtcclxuICAgICAgdGhpcy53b3Jrc3BhY2UubWFpblBhbmVsLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5oYXNVc2VkUGFuZWwpIHtcclxuICAgICAgdGhpcy53b3Jrc3BhY2UubWFpblBhbmVsLnJlbW92ZVNlY3Rpb24oJ1Byb3BlcnRpZXMnKTtcclxuICAgICAgdGhpcy53b3Jrc3BhY2UubWFpblBhbmVsLnJlbW92ZVNlY3Rpb24oJ1BhcmFtZXRlcnMnKTtcclxuICAgICAgLy8gVE9ETyBJZiBpdCBoYXMgdXNlZCBhbHNvIHRoZSBDb21tZW50IHNlY3Rpb24gaXQgc2hvdWxkIGJlIHJlbW92ZWQuXHJcbiAgICB9XHJcbiAgICBjb25zb2xlLmxvZygnRWxlbWVudHMgZGF0YSB0b29sIGRpc2FibGVkLicpO1xyXG4gIH1cclxufSIsImltcG9ydCBBUEkgZnJvbSAnLi9hcGknO1xyXG5pbXBvcnQgR2VuZXJpY3MgZnJvbSAnLi9nZW5lcmljcyc7XHJcbmltcG9ydCB0eXBlIHsgQXBwbGljYXRpb24gfSBmcm9tICcuL2FwcCc7XHJcbmltcG9ydCB7IFByb2plY3REYXRhIH0gZnJvbSAnLi90eXBlcyc7XHJcblxyXG5leHBvcnQgY2xhc3MgU2hhcmVQcm9qZWN0IHtcclxuICBodG1sQ29udGFpbmVyOiBIVE1MRWxlbWVudDtcclxuICBzaGFyZUZvcm06IEhUTUxFbGVtZW50O1xyXG4gIHNoYXJlRm9ybUVycm9yTXNnOiBIVE1MRWxlbWVudDtcclxuICBjb25maXJtQ2hhbmdlc0J0bnM6IEhUTUxFbGVtZW50O1xyXG4gIHNhdmVDaGFuZ2VzQnRuOiBIVE1MRWxlbWVudDtcclxuICBjYW5jZWxDaGFuZ2VzQnRuOiBIVE1MRWxlbWVudDtcclxuICB3YWl0aW5nQW5pbWF0aW9uOiBIVE1MRWxlbWVudDtcclxuICBjdXJyZW50VXNlcnNDb250ZW50OiBIVE1MRWxlbWVudDtcclxuICBjdXJyZW50VXNlcnNUYWJsZTogSFRNTEVsZW1lbnQ7XHJcbiAgcGVuZGluZ1VzZXJzQ29udGVudDogSFRNTEVsZW1lbnQ7XHJcbiAgcGVuZGluZ1VzZXJzVG9BZGRUYWJsZTogSFRNTEVsZW1lbnQ7XHJcbiAgc2hhcmVOb3RpZmljYXRpb25Db250YWluZXI6IEhUTUxFbGVtZW50O1xyXG4gIHNoYXJlTm90aWZpY2F0aW9uSW5wdXQ6IEhUTUxJbnB1dEVsZW1lbnQ7XHJcbiAgYXBwOiBBcHBsaWNhdGlvbjtcclxuICAvLyBUaGUgQXBwIHByb2plY3RzTGlzdCBpcyBuZWVkZWQgdG8gZ2V0IHRoZSBIVE1MIGl0ZW0gb2YgdGhlIHByb2plY3QgdG8gc2hhcmUuXHJcbiAgcHJvamVjdHNMaXN0OiBIVE1MRWxlbWVudDtcclxuICBwcm9qZWN0RGF0YTogUHJvamVjdERhdGE7XHJcbiAgLy8gUmVmZXJlbmNlIHRvIHRoZSBwcm9qZWN0IEhUTUwgaXRlbSBlbGVtZW50IGluIHRoZSBsaXN0LlxyXG4gIHByb2plY3RJdGVtOiBIVE1MRWxlbWVudDtcclxuICAvLyBQZXJtaXNzaW9uIGlkcyBwZW5kaW5nIHRvIGRlbGV0ZSBmb3IgdGhlIGN1cnJlbnQgcHJvamVjdC5cclxuICBwZW5kaW5nVG9SZW1vdmU6IHN0cmluZ1tdID0gW107XHJcbiAgLy8gRW1haWxzIHRvIHNoYXJlIHdpdGguXHJcbiAgcGVuZGluZ1RvQWRkOiBzdHJpbmdbXSA9IFtdO1xyXG5cclxuICBjb25zdHJ1Y3RvcihzaGFyZVByb2plY3RDb250YWluZXI6IEhUTUxFbGVtZW50LCBBcHA6IEFwcGxpY2F0aW9uKSB7XHJcbiAgICB0aGlzLmh0bWxDb250YWluZXIgPSBzaGFyZVByb2plY3RDb250YWluZXI7IC8vIFRoaXMgaXMgdXNlZCBpbiB0aGUgY29udGV4dCBtZW51IHRvIHBhc3MgaXQgdG8gdGhlIHNob3dNb2RhbERpYWxvZygpXHJcbiAgICB0aGlzLnNoYXJlRm9ybSA9IHNoYXJlUHJvamVjdENvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuc2hhcmUtZm9ybScpO1xyXG4gICAgdGhpcy5zaGFyZUZvcm1FcnJvck1zZyA9IHNoYXJlUHJvamVjdENvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuc2hhcmUtZm9ybSA+IC5lcnJvci1tc2cnKTtcclxuICAgIHRoaXMuY29uZmlybUNoYW5nZXNCdG5zID0gc2hhcmVQcm9qZWN0Q29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbC1tYWluLWJ0bnMnKTtcclxuICAgIHRoaXMuc2F2ZUNoYW5nZXNCdG4gPSBzaGFyZVByb2plY3RDb250YWluZXIucXVlcnlTZWxlY3RvcignLnNhdmUtY2hhbmdlcy1idG4nKTtcclxuICAgIHRoaXMuY2FuY2VsQ2hhbmdlc0J0biA9IHNoYXJlUHJvamVjdENvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuY2FuY2VsLWNoYW5nZXMtYnRuJyk7XHJcbiAgICB0aGlzLndhaXRpbmdBbmltYXRpb24gPSBzaGFyZVByb2plY3RDb250YWluZXIucXVlcnlTZWxlY3RvcignLmxvYWRlci1jb250YWluZXInKTtcclxuICAgIHRoaXMuY3VycmVudFVzZXJzQ29udGVudCA9IHNoYXJlUHJvamVjdENvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuY3VycmVudC11c2VycycpO1xyXG4gICAgdGhpcy5jdXJyZW50VXNlcnNUYWJsZSA9IHNoYXJlUHJvamVjdENvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuY3VycmVudC11c2VycyB0Ym9keScpO1xyXG4gICAgdGhpcy5wZW5kaW5nVXNlcnNDb250ZW50ID0gc2hhcmVQcm9qZWN0Q29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5wZW5kaW5nLXVzZXJzJyk7XHJcbiAgICB0aGlzLnBlbmRpbmdVc2Vyc1RvQWRkVGFibGUgPSBzaGFyZVByb2plY3RDb250YWluZXIucXVlcnlTZWxlY3RvcignLnBlbmRpbmctdXNlcnMgdGJvZHknKTtcclxuICAgIHRoaXMuc2hhcmVOb3RpZmljYXRpb25Db250YWluZXIgPSBzaGFyZVByb2plY3RDb250YWluZXIucXVlcnlTZWxlY3RvcignLnNoYXJlLW5vdGlmaWNhdGlvbicpO1xyXG4gICAgdGhpcy5zaGFyZU5vdGlmaWNhdGlvbklucHV0ID0gc2hhcmVQcm9qZWN0Q29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5zaGFyZS1ub3RpZmljYXRpb24gPiBpbnB1dCcpO1xyXG5cclxuICAgIC8vIFRoZSBBcHAgaXMgbmVlZGVkIHRvIGFjY2VzcyBzb21lIG9mIGl0cyBtZXRob2RzLlxyXG4gICAgdGhpcy5hcHAgPSBBcHA7XHJcbiAgICBcclxuICAgIHRoaXMucHJvamVjdHNMaXN0ID0gQXBwLnByb2plY3RzTGlzdDtcclxuXHJcbiAgICB0aGlzLmN1cnJlbnRVc2Vyc1RhYmxlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiB7XHJcbiAgICAgIGlmICgoZS50YXJnZXQgYXMgSFRNTEVsZW1lbnQpLmNsb3Nlc3QoJ1tkYXRhLWFjdGlvbl0nKSkge1xyXG4gICAgICAgIGNvbnN0IGFjdGlvbkJ0biA9IChlLnRhcmdldCBhcyBIVE1MRWxlbWVudCkuY2xvc2VzdCgnW2RhdGEtYWN0aW9uXScpIGFzIEhUTUxFbGVtZW50O1xyXG4gICAgICAgIGlmIChhY3Rpb25CdG4uZGF0YXNldC5hY3Rpb24gPT09ICdzdGFnZScpIHtcclxuICAgICAgICAgIHRoaXMuc3RhZ2VNZW1iZXJUb1JlbW92ZShhY3Rpb25CdG4ucGFyZW50RWxlbWVudCBhcyBIVE1MVGFibGVSb3dFbGVtZW50KTtcclxuICAgICAgICB9IGVsc2UgeyAvLyBlLnRhcmdldC5kYXRhc2V0LmFjdGlvbiA9PT0gJ3Vuc3RhZ2UnXHJcbiAgICAgICAgICB0aGlzLnVuc3RhZ2VNZW1iZXJUb1JlbW92ZShhY3Rpb25CdG4ucGFyZW50RWxlbWVudCBhcyBIVE1MVGFibGVSb3dFbGVtZW50KTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMucGVuZGluZ1VzZXJzVG9BZGRUYWJsZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4ge1xyXG4gICAgICBpZiAoKGUudGFyZ2V0IGFzIEhUTUxFbGVtZW50KS5jbG9zZXN0KCdbZGF0YS1hY3Rpb25dJykpIHtcclxuICAgICAgICB0aGlzLnVuc3RhZ2VNZW1iZXJUb0FkZCgoZS50YXJnZXQgYXMgSFRNTEVsZW1lbnQpLmNsb3Nlc3QoJ1tkYXRhLWFjdGlvbl0nKS5wYXJlbnRFbGVtZW50IGFzIEhUTUxUYWJsZVJvd0VsZW1lbnQpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLnNhdmVDaGFuZ2VzID0gdGhpcy5zYXZlQ2hhbmdlcy5iaW5kKHRoaXMpO1xyXG5cclxuICAgIHRoaXMuc3RhZ2VNZW1iZXJUb0FkZCA9IHRoaXMuc3RhZ2VNZW1iZXJUb0FkZC5iaW5kKHRoaXMpO1xyXG4gICAgdGhpcy5zaGFyZUZvcm0ub25zdWJtaXQgPSB0aGlzLnN0YWdlTWVtYmVyVG9BZGQ7XHJcbiAgfVxyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogV2hlbiB0aGUgbW9kYWwgZGlhbG9nIHRoYXQgY29udGFpbnMgdGhpcyBpcyBvcGVuIHRoaXMgbWV0aG9kIHNob3VsZCBiZSBjYWxsZWQuXHJcbiAgICovXHJcbiAgc2V0VXBEaWFsb2cocHJvamVjdERhdGE6IFByb2plY3REYXRhKSB7XHJcbiAgICAvLyBSZXNldCB0byBhbiBpbml0aWFsIHN0YXRlLiBNYXliZSBpdCBpcyBiZXR0ZXIgdG8gZG8gdGhpcyB3aGVuIHRoZSBwcmV2aW91cyBkaWFsb2cgaXMgY2xvc2VkP1xyXG4gICAgdGhpcy5wZW5kaW5nVG9SZW1vdmUgPSBbXTtcclxuICAgIEdlbmVyaWNzLmVtcHR5Tm9kZSh0aGlzLmN1cnJlbnRVc2Vyc1RhYmxlKTtcclxuICAgIHRoaXMucGVuZGluZ1RvQWRkID0gW107XHJcbiAgICBHZW5lcmljcy5lbXB0eU5vZGUodGhpcy5wZW5kaW5nVXNlcnNUb0FkZFRhYmxlKTtcclxuICAgIHRoaXMucGVuZGluZ1VzZXJzQ29udGVudC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcclxuICAgIHRoaXMuc2hhcmVOb3RpZmljYXRpb25Db250YWluZXIuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuY29uZmlybUNoYW5nZXNCdG5zLmNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIHRoaXMuY29uZmlybUNoYW5nZXNCdG5zLmNoaWxkcmVuW2ldLmNsYXNzTGlzdC5hZGQoJ2Rpc2FibGVkJyk7XHJcbiAgICB9XHJcbiAgICAvLyBEaXNhYmxlIHRoZSBtYW5hZ2UgY2hhbmdlcyBidXR0b25zLlxyXG4gICAgdGhpcy5zYXZlQ2hhbmdlc0J0bi5vbmNsaWNrID0gbnVsbDtcclxuICAgIHRoaXMuY2FuY2VsQ2hhbmdlc0J0bi5vbmNsaWNrID0gbnVsbDtcclxuICAgIC8vIEdldCB0aGUgcHJvamVjdCBpbmZvLlxyXG4gICAgdGhpcy5wcm9qZWN0RGF0YSA9IHByb2plY3REYXRhO1xyXG4gICAgdGhpcy5wcm9qZWN0SXRlbSA9IHRoaXMucHJvamVjdHNMaXN0LnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvbltkYXRhLXByb2otaWQ9XCInICsgcHJvamVjdERhdGEuaWQgKyAnXCJdJyk7XHJcbiAgICAvLyBDcmVhdGUgbGlzdCBvZiB1c2VycyBpZiBhbnkuXHJcbiAgICBpZiAocHJvamVjdERhdGEuc2hhcmVkICYmIHByb2plY3REYXRhLnBlcm1pc3Npb25zKSB7XHJcbiAgICAgIGNvbnN0IHVzZXJzOiBzdHJpbmdbXSA9IFtdO1xyXG4gICAgICBjb25zdCBjdXJyZW50VXNlckVtYWlsID0gd2luZG93LmdldEN1cnJlbnRVc2VyKCkuZW1haWxBZGRyZXNzO1xyXG4gICAgICBjb25zdCBvd25lciA9ICc8dGQgdGl0bGU9XCJQcm9qZWN0IG93bmVyXCI+PHN2Zz48dXNlIGhyZWY9XCIja2V5SWNvblwiPjwvdXNlPjwvc3ZnPjwvdGQ+JztcclxuICAgICAgY29uc3QgY29sbGFiID0gJzx0ZCBjbGFzcz1cImFjdGlvbi1idG5cIiBkYXRhLWFjdGlvbj1cInN0YWdlXCI+PHN2Zz48dXNlIGhyZWY9XCIjY3Jvc3NJY29uXCI+PC91c2U+PC9zdmc+PC90ZD4nO1xyXG4gICAgICBwcm9qZWN0RGF0YS5wZXJtaXNzaW9ucy5mb3JFYWNoKHVzZXIgPT4ge1xyXG4gICAgICAgIHVzZXJzLnB1c2goYFxyXG4gICAgICAgICAgPHRyIGRhdGEtcGVybWlzc2lvbj1cIiR7dXNlci5pZH1cIj5cclxuICAgICAgICAgICAgPHRkIGNsYXNzPVwidXNlci1kYXRhXCI+XHJcbiAgICAgICAgICAgICAgPGltZyBzcmM9XCIke3VzZXIucGhvdG9MaW5rfVwiPlxyXG4gICAgICAgICAgICAgIDxkaXY+XHJcbiAgICAgICAgICAgICAgICA8c3Bhbj4ke3VzZXIuZW1haWxBZGRyZXNzID09PSBjdXJyZW50VXNlckVtYWlsID8gJ1lvdScgOiB1c2VyLmRpc3BsYXlOYW1lfTwvc3Bhbj5cclxuICAgICAgICAgICAgICAgIDxzcGFuPiR7dXNlci5lbWFpbEFkZHJlc3N9PC9zcGFuPlxyXG4gICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAke3VzZXIucm9sZSA9PT0gJ293bmVyJyA/IG93bmVyIDogY29sbGFifVxyXG4gICAgICAgICAgPC90cj5gKTtcclxuICAgICAgfSk7XHJcbiAgICAgIHRoaXMuY3VycmVudFVzZXJzVGFibGUuaW5uZXJIVE1MID0gdXNlcnMuam9pbignJyk7XHJcbiAgICAgIC8vIFNob3cgdGhlIHRhYmxlIGJlY2F1c2UgaXQgY291bGQgYmUgaGlkZGVuIGZyb20gdGhlIHByZXZpb3VzIHRpbWUuXHJcbiAgICAgIHRoaXMuY3VycmVudFVzZXJzQ29udGVudC5jbGFzc0xpc3QucmVtb3ZlKCdlbXB0eScpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5jdXJyZW50VXNlcnNDb250ZW50LmNsYXNzTGlzdC5hZGQoJ2VtcHR5Jyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogQWRkIGEgbWVtYmVyIGVtYWlsIHRvIHRoZSB3YWl0aW5nIGxpc3QgdG8gYmUgYWRkZWQgYXMgbWVtYmVyLlxyXG4gICAqIEBwYXJhbSBlIFRoZSBzdWJtaXQgZXZlbnQgb2YgdGhlIGZvcm0gdG8gc3RhZ2UgbWVtYmVycyB0byBhZGQuXHJcbiAgICovXHJcbiAgc3RhZ2VNZW1iZXJUb0FkZChlOiBFdmVudCkge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgY29uc3QgZW1haWxBZGRyZXNzID0gKChlLnRhcmdldCBhcyBIVE1MRm9ybUVsZW1lbnQpLmVsZW1lbnRzLm5hbWVkSXRlbSgnZW1haWwnKSBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZTtcclxuICAgIGlmIChlbWFpbEFkZHJlc3MgIT09ICcnICYmICF0aGlzLnBlbmRpbmdUb0FkZC5pbmNsdWRlcyhlbWFpbEFkZHJlc3MpICYmIHRoaXMucHJvamVjdERhdGEucGVybWlzc2lvbnMuZmluZChwID0+IHAuZW1haWxBZGRyZXNzID09PSBlbWFpbEFkZHJlc3MpID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgdGhpcy5zaGFyZUZvcm1FcnJvck1zZy5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcclxuICAgICAgdGhpcy5wZW5kaW5nVG9BZGQucHVzaChlbWFpbEFkZHJlc3MpO1xyXG4gICAgICB0aGlzLnBlbmRpbmdVc2Vyc1RvQWRkVGFibGUuaW5zZXJ0QWRqYWNlbnRIVE1MKCdiZWZvcmVlbmQnLCBgXHJcbiAgICAgICAgPHRyIGRhdGEtZW1haWw9XCIke2VtYWlsQWRkcmVzc31cIj5cclxuICAgICAgICAgIDx0ZCBjbGFzcz1cInVzZXItZGF0YVwiPjxzcGFuPiR7ZW1haWxBZGRyZXNzfTwvc3Bhbj48L3RkPlxyXG4gICAgICAgICAgPHRkIGNsYXNzPVwiYWN0aW9uLWJ0blwiIGRhdGEtYWN0aW9uPVwic3RhZ2VcIj48c3ZnPjx1c2UgaHJlZj1cIiNjcm9zc0ljb25cIj48L3VzZT48L3N2Zz48L3RkPlxyXG4gICAgICAgIDwvdHI+YCk7XHJcbiAgICAgICgoZS50YXJnZXQgYXMgSFRNTEZvcm1FbGVtZW50KS5lbGVtZW50cy5uYW1lZEl0ZW0oJ2VtYWlsJykgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWUgPSAnJztcclxuICAgICAgLy8gQWN0aW9ucyB3aGVuIHRoZSBmaXJzdCBlbWFpbCBpcyBhZGRlZCB0byB0aGUgdGFibGUuXHJcbiAgICAgIGlmICh0aGlzLnBlbmRpbmdUb0FkZC5sZW5ndGggPT09IDEpIHtcclxuICAgICAgICB0aGlzLnBlbmRpbmdVc2Vyc0NvbnRlbnQuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XHJcbiAgICAgICAgdGhpcy5zaGFyZU5vdGlmaWNhdGlvbkNvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcclxuICAgICAgICB0aGlzLnNoYXJlTm90aWZpY2F0aW9uSW5wdXQuY2hlY2tlZCA9IHRydWU7XHJcbiAgICAgICAgLy8gSWYgdGhpcyBtYWtlcyB0aGF0IHRoZXJlIGFyZSBjaGFuZ2VzIHRvIHNhdmUgZW5hYmxlIHRoZSBidXR0b25zLlxyXG4gICAgICAgIGlmICh0aGlzLnBlbmRpbmdUb1JlbW92ZS5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5jb25maXJtQ2hhbmdlc0J0bnMuY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdGhpcy5jb25maXJtQ2hhbmdlc0J0bnMuY2hpbGRyZW5baV0uY2xhc3NMaXN0LnJlbW92ZSgnZGlzYWJsZWQnKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIC8vIEVuYWJsZSB0aGUgbWFuYWdlIGNoYW5nZXMgYnV0dG9ucy5cclxuICAgICAgICAgIHRoaXMuc2F2ZUNoYW5nZXNCdG4ub25jbGljayA9IHRoaXMuc2F2ZUNoYW5nZXM7XHJcbiAgICAgICAgICB0aGlzLmNhbmNlbENoYW5nZXNCdG4ub25jbGljayA9IHRoaXMuYXBwLmNsb3NlTW9kYWxEaWFsb2c7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLnNoYXJlRm9ybUVycm9yTXNnLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xyXG4gICAgICBjb25zb2xlLmxvZygnTm90IHZhbGlkIGlucHV0LicpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIFJlbW92ZXMgZnJvbSB0aGUgc3RhZ2VkIHN0YXRlIGEgbWVtYmVyIHBlbmRpbmcgdG8gYmUgYWRkZWQuXHJcbiAgICogQHBhcmFtIGVsZW1lbnQgVGFibGUgcm93IEhUTUwgZWxlbWVudCB3aXRoIHRoZSBkYXRhIG9mIHRoZSBtZW1iZXIgdG8gdW5zdGFnZS4gSXQgc2hvdWxkIGhhdmUgYSBkYXRhIGF0dHIgd2l0aCB0aGUgZW1haWwuXHJcbiAgICovXHJcbiAgdW5zdGFnZU1lbWJlclRvQWRkKGVsZW1lbnQ6IEhUTUxUYWJsZVJvd0VsZW1lbnQpIHtcclxuICAgIGNvbnN0IGl0ZW1JbmRleCA9IHRoaXMucGVuZGluZ1RvQWRkLmluZGV4T2YoZWxlbWVudC5kYXRhc2V0LmVtYWlsKTtcclxuICAgIHRoaXMucGVuZGluZ1RvQWRkLnNwbGljZShpdGVtSW5kZXgsIDEpO1xyXG4gICAgZWxlbWVudC5yZW1vdmUoKTtcclxuICAgIC8vIEFjdGlvbnMgd2hlbiB0aGUgdGFibGUgaGFzIGJlY29tZSBlbXB0eS5cclxuICAgIGlmICh0aGlzLnBlbmRpbmdUb0FkZC5sZW5ndGggPT09IDApIHtcclxuICAgICAgdGhpcy5wZW5kaW5nVXNlcnNDb250ZW50LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xyXG4gICAgICB0aGlzLnNoYXJlTm90aWZpY2F0aW9uQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xyXG4gICAgICBpZiAodGhpcy5wZW5kaW5nVG9SZW1vdmUubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmNvbmZpcm1DaGFuZ2VzQnRucy5jaGlsZHJlbi5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgdGhpcy5jb25maXJtQ2hhbmdlc0J0bnMuY2hpbGRyZW5baV0uY2xhc3NMaXN0LmFkZCgnZGlzYWJsZWQnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gRGlzYWJsZSB0aGUgbWFuYWdlIGNoYW5nZXMgYnV0dG9ucy5cclxuICAgICAgICB0aGlzLnNhdmVDaGFuZ2VzQnRuLm9uY2xpY2sgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuY2FuY2VsQ2hhbmdlc0J0bi5vbmNsaWNrID0gbnVsbDtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIEFkZHMgYSBjdXJyZW50IG1lbWJlciB0byB0aGUgd2FpdGluZyBsaXN0IHRvIGJlIHJlbW92ZWQgYXMgbWVtYmVyLlxyXG4gICAqIEBwYXJhbSBlbGVtZW50IFRhYmxlIHJvdyBIVE1MIGVsZW1lbnQgd2l0aCB0aGUgZGF0YSBvZiB0aGUgbWVtYmVyIHRvIGRlbGV0ZS4gSXQgc2hvdWxkIGhhdmUgYSBkYXRhIGF0dHIgd2l0aCB0aGUgcGVybWlzc2lvbiBpZC5cclxuICAgKi9cclxuICBzdGFnZU1lbWJlclRvUmVtb3ZlKGVsZW1lbnQ6IEhUTUxUYWJsZVJvd0VsZW1lbnQpIHtcclxuICAgIHRoaXMucGVuZGluZ1RvUmVtb3ZlLnB1c2goZWxlbWVudC5kYXRhc2V0LnBlcm1pc3Npb24pO1xyXG4gICAgLy8gU2V0IHRoZSByb3cgZWxlbWVudCBhcyBwZW5kaW5nIHRvIGRlbGV0ZS5cclxuICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZCgndG8tZGVsZXRlJyk7XHJcbiAgICAvLyBDaGFuZ2UgdGhlIHJvdyBidXR0b24gYWN0aW9uIGFuZCBpY29uLlxyXG4gICAgY29uc3QgYWN0aW9uQnRuID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuYWN0aW9uLWJ0bicpIGFzIEhUTUxFbGVtZW50O1xyXG4gICAgYWN0aW9uQnRuLmlubmVySFRNTCA9ICc8c3ZnPjx1c2UgaHJlZj1cIiNyZWxvYWRJY29uXCI+PC91c2U+PC9zdmc+JztcclxuICAgIGFjdGlvbkJ0bi5kYXRhc2V0LmFjdGlvbiA9IFwidW5zdGFnZVwiO1xyXG4gICAgLy8gSWYgdGhpcyBtYWtlcyB0aGF0IHRoZXJlIGFyZSBjaGFuZ2VzIHRvIHNhdmUgZW5hYmxlIHRoZSAnY29uZmlybSBjaGFuZ2VzJyBidXR0b25zLlxyXG4gICAgaWYgKHRoaXMucGVuZGluZ1RvQWRkLmxlbmd0aCA9PT0gMCAmJiB0aGlzLnBlbmRpbmdUb1JlbW92ZS5sZW5ndGggPT09IDEpIHtcclxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmNvbmZpcm1DaGFuZ2VzQnRucy5jaGlsZHJlbi5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIHRoaXMuY29uZmlybUNoYW5nZXNCdG5zLmNoaWxkcmVuW2ldLmNsYXNzTGlzdC5yZW1vdmUoJ2Rpc2FibGVkJyk7XHJcbiAgICAgIH1cclxuICAgICAgLy8gRW5hYmxlIHRoZSBtYW5hZ2UgY2hhbmdlcyBidXR0b25zLlxyXG4gICAgICB0aGlzLnNhdmVDaGFuZ2VzQnRuLm9uY2xpY2sgPSB0aGlzLnNhdmVDaGFuZ2VzO1xyXG4gICAgICB0aGlzLmNhbmNlbENoYW5nZXNCdG4ub25jbGljayA9IHRoaXMuYXBwLmNsb3NlTW9kYWxEaWFsb2c7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogUmVtb3ZlcyBmcm9tIHRoZSBzdGFnZWQgc3RhdGUgYSBtZW1iZXIgcGVuZGluZyB0byBiZSByZW1vdmVkLlxyXG4gICAqIEBwYXJhbSBlbGVtZW50IFRhYmxlIHJvdyBIVE1MIGVsZW1lbnQgd2l0aCB0aGUgZGF0YSBvZiB0aGUgbWVtYmVyIHRvIGRlbGV0ZS4gSXQgc2hvdWxkIGhhdmUgYSBkYXRhIGF0dHIgd2l0aCB0aGUgcGVybWlzc2lvbiBpZC5cclxuICAgKi9cclxuICB1bnN0YWdlTWVtYmVyVG9SZW1vdmUoZWxlbWVudDogSFRNTFRhYmxlUm93RWxlbWVudCkge1xyXG4gICAgLy8gUmVtb3ZlIHRoZSBwZXJtaXNzaW9uIGlkIGZyb20gdGhlIGFycmF5LlxyXG4gICAgY29uc3QgaW5kZXggPSB0aGlzLnBlbmRpbmdUb1JlbW92ZS5pbmRleE9mKGVsZW1lbnQuZGF0YXNldC5wZXJtaXNzaW9uKTtcclxuICAgIHRoaXMucGVuZGluZ1RvUmVtb3ZlLnNwbGljZShpbmRleCwgMSk7XHJcbiAgICAvLyBSZW1vdmUgaXRzIHRvLWRlbGV0ZSBjbGFzcy5cclxuICAgIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgndG8tZGVsZXRlJyk7XHJcbiAgICAvLyBDaGFuZ2UgdGhlIHJvdyBidXR0b24gYWN0aW9uIGFuZCBpY29uLlxyXG4gICAgY29uc3QgYWN0aW9uQnRuID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuYWN0aW9uLWJ0bicpIGFzIEhUTUxFbGVtZW50O1xyXG4gICAgYWN0aW9uQnRuLmlubmVySFRNTCA9ICc8c3ZnPjx1c2UgaHJlZj1cIiNjcm9zc0ljb25cIj48L3VzZT48L3N2Zz4nO1xyXG4gICAgYWN0aW9uQnRuLmRhdGFzZXQuYWN0aW9uID0gXCJzdGFnZVwiO1xyXG4gICAgLy8gSWYgdGhpcyBtYWtlcyB0aGF0IHRoZXJlIGFyZSBubyBjaGFuZ2VzIHRoZW4gZGlzYWJsZSB0aGUgJ2NvbmZpcm0gY2hhbmdlcycgYnV0dG9ucy5cclxuICAgIGlmICh0aGlzLnBlbmRpbmdUb1JlbW92ZS5sZW5ndGggPT09IDAgJiYgdGhpcy5wZW5kaW5nVG9BZGQubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5jb25maXJtQ2hhbmdlc0J0bnMuY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICB0aGlzLmNvbmZpcm1DaGFuZ2VzQnRucy5jaGlsZHJlbltpXS5jbGFzc0xpc3QuYWRkKCdkaXNhYmxlZCcpO1xyXG4gICAgICB9XHJcbiAgICAgIC8vIERpc2FibGUgdGhlIG1hbmFnZSBjaGFuZ2VzIGJ1dHRvbnMuXHJcbiAgICAgIHRoaXMuc2F2ZUNoYW5nZXNCdG4ub25jbGljayA9IG51bGw7XHJcbiAgICAgIHRoaXMuY2FuY2VsQ2hhbmdlc0J0bi5vbmNsaWNrID0gbnVsbDtcclxuICAgIH1cclxuICB9XHJcblxyXG5cclxuICAvKipcclxuICAgKiBSZW1vdmVzIGZyb20gdGhlIHN0YWdlZCBzdGF0ZSBhbGwgY3VycmVudCBtZW1iZXJzIHRoYXQgd2VyZSBwZW5kaW5nIHRvIGJlIHJlbW92ZWQuXHJcbiAgICovXHJcbiAgLy8gVE9ETzogQ2hhbmdlIHRvIGEgcmVzZXQgbWV0aG9kIHRoYXQgY2xlYW5zIGFueSBzdGFnZWQgbWVtYmVyP1xyXG4gIC8vIHVuc3RhZ2VBbGxNZW1iZXJzVG9SZW1vdmUoKSB7XHJcbiAgLy8gICAvLyBSZW1vdmUgdGhlIHBlbmRpbmcgdG8gZGVsdGUgc3RhdGUgZnJvbSB0aGUgcm93IGVsZW1lbnRzLlxyXG4gIC8vICAgdGhpcy5wZW5kaW5nVG9SZW1vdmUuZm9yRWFjaChlbGVtZW50ID0+IHtcclxuICAvLyAgICAgZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCd0by1kZWxldGUnKTtcclxuICAvLyAgIH0pO1xyXG4gIC8vICAgLy8gQ2xlYXIgdGhlIHN0YWdlZCB1c2Vycy5cclxuICAvLyAgIHRoaXMucGVuZGluZ1RvUmVtb3ZlID0gW107XHJcbiAgLy8gICAvLyBJZiB0aGlzIG1ha2VzIHRoYXQgdGhlcmUgYXJlIG5vIGNoYW5nZXMgdGhlbiBkaXNhYmxlIHRoZSAnY29uZmlybSBjaGFuZ2VzJyBidXR0b25zLlxyXG4gIC8vICAgaWYgKHRoaXMucGVuZGluZ1RvQWRkLmxlbmd0aCA9PT0gMCkge1xyXG4gIC8vICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuY29uZmlybUNoYW5nZXNCdG5zLmNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XHJcbiAgLy8gICAgICAgdGhpcy5jb25maXJtQ2hhbmdlc0J0bnMuY2hpbGRyZW5baV0uY2xhc3NMaXN0LmFkZCgnZGlzYWJsZWQnKTtcclxuICAvLyAgICAgfVxyXG4gIC8vICAgICAvLyBUT0RPIHRvIGRpc2FibGUgdGhlIGJ0bnMgYWRkIHRoZSBldmVudCBsaXN0ZW5lciBvciBjaGFuZ2UgYSBib29sXHJcbiAgLy8gICB9XHJcbiAgLy8gfVxyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogQWRkcyBhbGwgbWVtYmVycyB0aGF0IHdlcmUgaW4gdGhlIHBlbmRpbmdUb0FkZCBhcnJheSB0byB0aGUgdGVhbS5cclxuICAgKi9cclxuICBhZGRTdGFnZWRNZW1iZXJzKCkge1xyXG4gICAgY29uc3QgYWRkTWVtYmVyc1Byb21pc2VzOiBQcm9taXNlPGdhcGkuY2xpZW50LlJlc3BvbnNlPGdhcGkuY2xpZW50LmRyaXZlLlBlcm1pc3Npb24+PltdID0gW107XHJcbiAgICAvLyBEZWxheSBpcyByZXF1aXJlZCBiZWNhdXNlIEdEIEFQSSBkb2VzbnQgYWxsb3cgdG8gY3JlYXRlIHNldmVyYWwgcGVybWlzc2lvbnMgYXQgdGhlIHNhbWUgdGltZS5cclxuICAgIGNvbnN0IGRlbGF5ID0gNjAwO1xyXG4gICAgdGhpcy5wZW5kaW5nVG9BZGQuZm9yRWFjaCgoZW1haWwsIGkpID0+IHtcclxuICAgICAgYWRkTWVtYmVyc1Byb21pc2VzLnB1c2goQVBJLnNoYXJlRmlsZSh0aGlzLnByb2plY3REYXRhLmlkLCBlbWFpbCwgZGVsYXkgKiBpKSk7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBQcm9taXNlLmFsbChhZGRNZW1iZXJzUHJvbWlzZXMpO1xyXG4gIH1cclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIFJlbW92ZXMgYWxsIGN1cnJlbnQgbWVtYmVycyB0aGF0IHdlcmUgaW4gdGhlIHBlbmRpbmdUb1JlbW92ZSBhcnJheSBmcm9tIHRoZSB0ZWFtLlxyXG4gICAqL1xyXG4gIHJlbW92ZVN0YWdlZE1lbWJlcnMoKSB7XHJcbiAgICBjb25zdCByZW1vdmVNZW1iZXJzUHJvbWlzZXM6IFByb21pc2U8Z2FwaS5jbGllbnQuUmVzcG9uc2U8e30+PltdID0gW107XHJcbiAgICB0aGlzLnBlbmRpbmdUb1JlbW92ZS5mb3JFYWNoKHBlcm1pc3Npb25JZCA9PiB7XHJcbiAgICAgIHJlbW92ZU1lbWJlcnNQcm9taXNlcy5wdXNoKEFQSS5zdG9wU2hhcmluZ0ZpbGUodGhpcy5wcm9qZWN0RGF0YS5pZCwgcGVybWlzc2lvbklkKSk7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBQcm9taXNlLmFsbChyZW1vdmVNZW1iZXJzUHJvbWlzZXMpO1xyXG4gIH1cclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIFNhdmUgYWxsIHRoZSBjaGFuZ2VzIG9mIGFkZGl0aW9uIGFuZCByZW1vdmFsIG9mIG1lbWJlcnMuXHJcbiAgICovXHJcbiAgYXN5bmMgc2F2ZUNoYW5nZXMoKSB7XHJcbiAgICB0aGlzLndhaXRpbmdBbmltYXRpb24uY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XHJcbiAgICBsZXQgYWRkaXRpb25TdWNjZXNzID0gdHJ1ZTtcclxuICAgIGxldCByZW1vdmFsU3VjY2VzcyA9IHRydWU7XHJcbiAgICAvLyBSZW1vdmFsIHByb2Nlc3MuXHJcbiAgICBpZiAodGhpcy5wZW5kaW5nVG9SZW1vdmUubGVuZ3RoID4gMCkge1xyXG4gICAgICBhd2FpdCB0aGlzLnJlbW92ZVN0YWdlZE1lbWJlcnMoKS50aGVuKHJlc0FyciA9PiB7XHJcbiAgICAgICAgLy8gUmVtb3ZlIHRoZSBwZXJtaXNzaW9uSWRzIGFsc28gZnJvbSB0aGUgY29ycmVzcG9uZGluZyBwcm9qZWN0c0RhdGEgb2JqZWN0LlxyXG4gICAgICAgIHRoaXMucGVuZGluZ1RvUmVtb3ZlLmZvckVhY2gocGVybWlzc2lvbklkID0+IHtcclxuICAgICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5wcm9qZWN0RGF0YS5wZXJtaXNzaW9ucy5maW5kSW5kZXgocGVybWlzc2lvbiA9PiBwZXJtaXNzaW9uLmlkID09PSBwZXJtaXNzaW9uSWQpO1xyXG4gICAgICAgICAgdGhpcy5wcm9qZWN0RGF0YS5wZXJtaXNzaW9ucy5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9LCByZWogPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKHJlaik7XHJcbiAgICAgICAgcmVtb3ZhbFN1Y2Nlc3MgPSBmYWxzZTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICAvLyBBZGRpdGlvbiBwcm9jZXNzLlxyXG4gICAgaWYgKHRoaXMucGVuZGluZ1RvQWRkLmxlbmd0aCA+IDApIHtcclxuICAgICAgYXdhaXQgdGhpcy5hZGRTdGFnZWRNZW1iZXJzKCkudGhlbihyZXNBcnIgPT4ge1xyXG4gICAgICAgIC8vICdyZXNBcnInIGlzIGFuIGFycmF5IHdpdGggYWxsIHRoZSByZXNvbHZlZCBwcm9taXNlcy5cclxuICAgICAgICByZXNBcnIuZm9yRWFjaCgocmVzLCBpKSA9PiB7XHJcbiAgICAgICAgICB0aGlzLnByb2plY3REYXRhLnBlcm1pc3Npb25zLnB1c2goe1xyXG4gICAgICAgICAgICBpZDogcmVzLnJlc3VsdC5pZCxcclxuICAgICAgICAgICAgZW1haWxBZGRyZXNzOiB0aGlzLnBlbmRpbmdUb0FkZFtpXSxcclxuICAgICAgICAgICAgcm9sZTogcmVzLnJlc3VsdC5yb2xlLFxyXG4gICAgICAgICAgICBkaXNwbGF5TmFtZTogcmVzLnJlc3VsdC5kaXNwbGF5TmFtZSxcclxuICAgICAgICAgICAgcGhvdG9MaW5rOiByZXMucmVzdWx0LnBob3RvTGlua1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaWYgKHRoaXMuc2hhcmVOb3RpZmljYXRpb25JbnB1dC5jaGVja2VkKSB7XHJcbiAgICAgICAgICBBUEkuc2VuZFNoYXJpbmdQcm9qZWN0RW1haWwod2luZG93LmdldEN1cnJlbnRVc2VyKCkuZGlzcGxheU5hbWUsIHRoaXMucGVuZGluZ1RvQWRkLCB0aGlzLnByb2plY3REYXRhLm5hbWUsIHRoaXMucHJvamVjdERhdGEuaWQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBJdCBjb3VsZCBiZSB0aGF0IGlzIHRoZSBmaXJzdCB0aW1lIGEgY29sbGFib3JhdG9yXHJcbiAgICAgICAgLy8gaXMgYWRkZWQgc28gdGhlIEZDTSBkZXZpY2UgdG9rZW4gd2lsbCBiZSBhc2tlZC5cclxuICAgICAgICB3aW5kb3cuc2F2ZU1lc3NhZ2luZ0RldmljZVRva2VuKCk7XHJcbiAgICAgIH0sIHJlaiA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2cocmVqKTtcclxuICAgICAgICBhZGRpdGlvblN1Y2Nlc3MgPSBmYWxzZTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICAvLyBBY3Rpb25zIGRlcGVuZGluZyBvbiB0aGUgc3VjY2VzcyBvciBmYWlsdXJlLlxyXG4gICAgaWYgKGFkZGl0aW9uU3VjY2VzcyAmJiByZW1vdmFsU3VjY2Vzcykge1xyXG4gICAgICBpZiAodGhpcy5wcm9qZWN0RGF0YS5wZXJtaXNzaW9ucy5sZW5ndGggPT09IDEpIHsgLy8gMSBiZWNhdXNlIHRoZXJlIGlzIGFsd2F5cyBhdCBsZWFzdCB0aGUgb3duZXIuXHJcbiAgICAgICAgdGhpcy5wcm9qZWN0RGF0YS5zaGFyZWQgPSBmYWxzZTtcclxuICAgICAgICBpZiAodGhpcy5wcm9qZWN0SXRlbS5xdWVyeVNlbGVjdG9yKCcuc2hhcmVkSWNvbicpKSB7XHJcbiAgICAgICAgICB0aGlzLnByb2plY3RJdGVtLnF1ZXJ5U2VsZWN0b3IoJy5zaGFyZWRJY29uJykucmVtb3ZlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMucHJvamVjdERhdGEuc2hhcmVkID0gdHJ1ZTtcclxuICAgICAgICBpZiAoIXRoaXMucHJvamVjdEl0ZW0ucXVlcnlTZWxlY3RvcignLnNoYXJlZEljb24nKSkge1xyXG4gICAgICAgICAgdGhpcy5wcm9qZWN0SXRlbS5pbnNlcnRBZGphY2VudEhUTUwoJ2FmdGVyYmVnaW4nLCAnPGltZyBjbGFzcz1cInNoYXJlZEljb25cIiBzcmM9XCJzcmMvYXNzZXRzL2ljb25zL3NoYXJlSWNvbi5zdmdcIj4nKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5hcHAuc2hvd01lc3NhZ2UoJ3N1Y2Nlc3MnLCBbJ1Byb2plY3QgbWVtYmVycyB1cGRhdGVkIHN1Y2Nlc3NmdWxseS4nXSwgNTAwMCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmFwcC5zaG93TWVzc2FnZSgnZXJyb3InLCBbJ1NvbWV0aGluZyB3ZW50IHdyb25nLCBtZW1iZXIgY2hhbmdlcyBjb3VsZCBubyBiZSBzYXZlZC4nXSk7XHJcbiAgICB9XHJcbiAgICB0aGlzLndhaXRpbmdBbmltYXRpb24uY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XHJcbiAgICB0aGlzLmFwcC5jbG9zZU1vZGFsRGlhbG9nKCk7XHJcbiAgfVxyXG59IiwiaW1wb3J0IEdlbmVyaWNzIGZyb20gJy4vZ2VuZXJpY3MnO1xyXG5cclxuaW50ZXJmYWNlIE5vdGlmaWNhdGlvbkRhdGEge1xyXG4gIGF1dGhvcjogc3RyaW5nO1xyXG4gIHByb2plY3ROYW1lOiBzdHJpbmc7XHJcbiAgcHJvamVjdElkOiBzdHJpbmc7XHJcbiAgdGV4dDogc3RyaW5nO1xyXG4gIHBob3RvTGluazogc3RyaW5nO1xyXG59XHJcblxyXG5pbnRlcmZhY2UgTm90aWZpY2F0aW9uT2JqZWN0IHtcclxuICBpZDogc3RyaW5nO1xyXG4gIHJlcHJlc2VudGF0aW9uOiBIVE1MRWxlbWVudDtcclxuICBzdGF0ZTogJ3BlbmRpbmcnIHwgJ3JlYWQnO1xyXG4gIGRhdGE6IE5vdGlmaWNhdGlvbkRhdGFcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIE5vdGlmaWNhdGlvbnNNYW5hZ2VyIHtcclxuICBub3RpZmljYXRpb25zQnRuOiBIVE1MRWxlbWVudDtcclxuICBub3RpZmljYXRpb25zQ29udGFpbmVyOiBIVE1MRWxlbWVudDtcclxuICBub3RpZmljYXRpb25zTGlzdDogSFRNTEVsZW1lbnQ7XHJcbiAgbm90aWZpY2F0aW9uczogTm90aWZpY2F0aW9uT2JqZWN0W10gPSBbXTtcclxuXHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgICB0aGlzLm5vdGlmaWNhdGlvbnNCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbm90aWZpY2F0aW9uQnRuJyk7XHJcbiAgICB0aGlzLm5vdGlmaWNhdGlvbnNDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbm90aWZpY2F0aW9uc0NvbnRhaW5lcicpO1xyXG4gICAgdGhpcy5ub3RpZmljYXRpb25zTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNub3RpZmljYXRpb25zQ29udGFpbmVyID4gLm5vdGlmaWNhdGlvbnMtYm9keScpO1xyXG4gICAgdGhpcy5ub3RpZmljYXRpb25zQnRuLm9uY2xpY2sgPSAoKSA9PiB0aGlzLm5vdGlmaWNhdGlvbnNDb250YWluZXIuY2xhc3NMaXN0LnRvZ2dsZSgnb3BlbicpO1xyXG4gICAgdGhpcy5ub3RpZmljYXRpb25zTGlzdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4ge1xyXG4gICAgICBjb25zdCBlbGVtZW50ID0gKGUudGFyZ2V0IGFzIEhUTUxFbGVtZW50KS5jbG9zZXN0KCdsaScpO1xyXG4gICAgICBpZiAoZWxlbWVudCkge1xyXG4gICAgICAgIHRoaXMudmlld05vdGlmaWNhdGlvbihlbGVtZW50LmRhdGFzZXQuaWQpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8vIFNob3cgbm90aWZpY2F0aW9ucyBwYW5lbFxyXG4gIC8vIHNob3dOb3RpZmljYXRpb25zUGFuZWwoKSB7XHJcblxyXG4gIC8vIH1cclxuXHJcbiAgLy8gSGlkZSBub3RpZmljYXRpb25zIHBhbmVsXHJcbiAgLy8gaGlkZU5vdGlmaWNhdGlvbnNQYW5lbCgpIHtcclxuXHJcbiAgLy8gfVxyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogQ3JlYXRlcyBhIG5vdGlmaWNhdGlvbiByZXByZXNlbnRhdGlvbiB0aGF0IGFwcGVhcnMgaW4gdGhlIFVJIGFuZCBhZGRzIGFuIG9iamVjdFxyXG4gICAqIHdpdGggYWxsIHRoZSBub3RpZmljYXRpb24gZGF0YSB0byB0aGUgbm90aWZpY2F0aW9ucyBhcnJheS5cclxuICAgKiAgIHNyYy9hc3NldHMvYXZhdGFyLXBsYWNlaG9sZGVyLnBuZ1xyXG4gICAqL1xyXG4gIGNyZWF0ZU5vdGlmaWNhY3Rpb24oZGF0YTogTm90aWZpY2F0aW9uRGF0YSkge1xyXG4gICAgY29uc3Qgbm90aWZpY2F0aW9uRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XHJcbiAgICBjb25zdCBub3RpZmljYXRpb25JZCA9IEdlbmVyaWNzLnV1aWR2NCgpO1xyXG4gICAgbm90aWZpY2F0aW9uRWxlbWVudC5kYXRhc2V0LmlkID0gbm90aWZpY2F0aW9uSWQ7XHJcbiAgICBub3RpZmljYXRpb25FbGVtZW50LmNsYXNzTGlzdC5hZGQoJ3BlbmRpbmcnKTtcclxuICAgIG5vdGlmaWNhdGlvbkVsZW1lbnQuaW5uZXJIVE1MID0gYFxyXG4gICAgICA8aW1nIGNsYXNzPVwibm90aWZpY2F0aW9uLXRodW1iXCIgc3JjPVwiJHtkYXRhLnBob3RvTGlua31cIj5cclxuICAgICAgPGRpdiBjbGFzcz1cIm5vdGlmaWNhdGlvbi1jb250ZW50XCI+XHJcbiAgICAgICAgPGg0PiR7ZGF0YS5hdXRob3J9IG1lbnRpb25lZCB5b3UgaW4gYSBjb21tZW50IG9uIHRoZSBwcm9qZWN0ICR7ZGF0YS5wcm9qZWN0TmFtZX08L2g0PlxyXG4gICAgICAgIDxwPiR7ZGF0YS50ZXh0fTwvcD5cclxuICAgICAgPC9kaXY+YDtcclxuICAgIHRoaXMubm90aWZpY2F0aW9uc0xpc3QucHJlcGVuZChub3RpZmljYXRpb25FbGVtZW50KTtcclxuICAgIHRoaXMubm90aWZpY2F0aW9ucy5wdXNoKHsgaWQ6IG5vdGlmaWNhdGlvbklkLCByZXByZXNlbnRhdGlvbjogbm90aWZpY2F0aW9uRWxlbWVudCwgc3RhdGU6ICdwZW5kaW5nJywgZGF0YTogZGF0YSB9KTtcclxuICAgIC8vIEVuYWJsZXMgdGhlIGljb24gdG8gaW5kaWNhdGUgdGhhdCB0aGVyZSBhcmUgcGVuZGluZyBub3RpZmljYXRpb25zLlxyXG4gICAgLy8gVE9ETzogRG9udCBkbyBpdCBlYWNoIHRpbWUuXHJcbiAgICB0aGlzLm5vdGlmaWNhdGlvbnNCdG4uY2xhc3NMaXN0LmFkZCgnZW5hYmxlZCcpO1xyXG4gICAgaWYgKHRoaXMubm90aWZpY2F0aW9ucy5sZW5ndGggPT09IDEpIHtcclxuICAgICAgdGhpcy5ub3RpZmljYXRpb25zQ29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoJ2VtcHR5Jyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBDdXJyZW50bHkgd2hlbiBhIG5vdGlmaWNhdGlvbiBpcyB2aXNpdGVkIGl0IGlzIHJlbW92ZWRcclxuICAvLyBidXQgaXQgY2FuIGJlIGNoYW5nZWQgdG8ga2VlcCB0aGVtIGluIGhpc3RvcnkuXHJcblxyXG4gIC8qKlxyXG4gICAqIG1heGltdW0gb2YgMTAgcmVhZCBub3RpZmljYXRpb25zIG9yIG5vIGxpbWl0IGlmIHRoZXkgYXJlIHVucmVhZFxyXG4gICAqL1xyXG4gIGRlbGV0ZU5vdGlmaWNhY3Rpb24obm90aWZpY2F0aW9uSWQ6IHN0cmluZykge1xyXG4gICAgY29uc3QgaW5kZXggPSB0aGlzLm5vdGlmaWNhdGlvbnMuZmluZEluZGV4KG4gPT4gbi5pZCA9PT0gbm90aWZpY2F0aW9uSWQpO1xyXG4gICAgdGhpcy5ub3RpZmljYXRpb25zW2luZGV4XS5yZXByZXNlbnRhdGlvbi5yZW1vdmUoKTtcclxuICAgIHRoaXMubm90aWZpY2F0aW9ucy5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgLy8gVE9ETzogSWYgdGhlcmUgYXJlIG5vIG1vcmUgbm90aWZpY2F0aW9ucyB0aGVuIGFkZCB0aGUgZW1wdHkgY2xhc3MgdG8gdGhpcy5ub3RpZmljYXRpb25zQ29udGFpbmVyXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBUT0RPOiBzZXBhcmF0ZSBnb1RvTm90aWZpY2F0aW9uIGFuZCBtYXJrQXNSZWFkID9cclxuICAgKi9cclxuICB2aWV3Tm90aWZpY2F0aW9uKG5vdGlmaWNhdGlvbklkOiBzdHJpbmcpIHtcclxuICAgIGNvbnN0IG5vdGlmaWNhdGlvbiA9IHRoaXMubm90aWZpY2F0aW9ucy5maW5kKG4gPT4gbi5pZCA9PT0gbm90aWZpY2F0aW9uSWQpO1xyXG4gICAgbm90aWZpY2F0aW9uLnN0YXRlID0gJ3JlYWQnO1xyXG4gICAgbm90aWZpY2F0aW9uLnJlcHJlc2VudGF0aW9uLmNsYXNzTGlzdC5yZW1vdmUoJ3BlbmRpbmcnKTtcclxuICAgIC8vIFRPRE86IGdvIHRvIHRoZSBub3RpZmljYXRpb24sIGluIGEgbmV3IHRhYj8gdGhlIHByb2plY3QgaWQgaXMgaW4gbm90aWZpY2F0aW9uLmRhdGEucHJvamVjdElkXHJcbiAgICAvLyBJZiB0aGVyZSBhcmUgbm8gbW9yZSBwZW5kaW5nIG5vdGlmaWNhdGlvbnMgc2V0IHRoZSBpY29uIG5vcm1hbC5cclxuICAgIGlmICh0aGlzLm5vdGlmaWNhdGlvbnMuZmluZChuID0+IG4uc3RhdGUgPT09ICdwZW5kaW5nJykgPT09IHVuZGVmaW5lZClcclxuICAgICAgdGhpcy5ub3RpZmljYXRpb25zQnRuLmNsYXNzTGlzdC5yZW1vdmUoJ2VuYWJsZWQnKTtcclxuICAgIC8vIFRPRE86IERlbGV0ZSBub3RpZmljYXRpb24gb3Iga2VlcCBpdCBpbiBoaXN0b3J5ID9cclxuICAgIC8vIHRoaXMuZGVsZXRlTm90aWZpY2FjdGlvbihub3RpZmljYXRpb25JZCk7XHJcbiAgfVxyXG5cclxufVxyXG4iLCJpbXBvcnQgQVBJIGZyb20gJy4vYXBpJztcclxuaW1wb3J0IHR5cGUgeyBBcHBsaWNhdGlvbiB9IGZyb20gJy4vYXBwJztcclxuXHJcbmV4cG9ydCBjbGFzcyBSZW5hbWVQcm9qZWN0IHtcclxuICBodG1sQ29udGFpbmVyOiBIVE1MRWxlbWVudDtcclxuICByZW5hbWVGb3JtOiBIVE1MRm9ybUVsZW1lbnQ7XHJcbiAgaW5wdXQ6IEhUTUxJbnB1dEVsZW1lbnQ7XHJcbiAgcmVuYW1lUHJvamVjdEVycm9yTXNnOiBIVE1MRWxlbWVudDtcclxuICBjYW5jZWxCdG46IEhUTUxFbGVtZW50O1xyXG4gIGFwcDogQXBwbGljYXRpb247XHJcbiAgcHJvamVjdExpc3RJdGVtOiBIVE1MRWxlbWVudDtcclxuICBwcm9qZWN0SWQ6IHN0cmluZztcclxuICBjdXJyZW50TmFtZTogc3RyaW5nO1xyXG4gIGVtcHR5SW5wdXRWYWx1ZSA9IG5ldyBSZWdFeHAoL14oXFxzfFxcdCkqJC8pO1xyXG5cclxuICBjb25zdHJ1Y3RvcihyZW5hbWVQcm9qZWN0Q29udGFpbmVyOiBIVE1MRWxlbWVudCwgQXBwOiBBcHBsaWNhdGlvbikge1xyXG4gICAgdGhpcy5odG1sQ29udGFpbmVyID0gcmVuYW1lUHJvamVjdENvbnRhaW5lcjtcclxuICAgIHRoaXMucmVuYW1lRm9ybSA9IHJlbmFtZVByb2plY3RDb250YWluZXIucXVlcnlTZWxlY3RvcignZm9ybScpO1xyXG4gICAgdGhpcy5pbnB1dCA9IHJlbmFtZVByb2plY3RDb250YWluZXIucXVlcnlTZWxlY3RvcignZm9ybSA+IGRpdjpmaXJzdC1jaGlsZCA+IGlucHV0Jyk7XHJcbiAgICB0aGlzLnJlbmFtZVByb2plY3RFcnJvck1zZyA9IHJlbmFtZVByb2plY3RDb250YWluZXIucXVlcnlTZWxlY3RvcignLmVycm9yLW1zZycpO1xyXG4gICAgdGhpcy5jYW5jZWxCdG4gPSByZW5hbWVQcm9qZWN0Q29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJ2Zvcm0gPiBkaXY6bGFzdC1jaGlsZCA+IC5jYW5jZWwtYnRuJyk7XHJcblxyXG4gICAgLy8gVGhlIEFwcCBpcyBuZWVkZWQgdG8gYWNjZXNzIHNvbWUgb2YgaXRzIG1ldGhvZHMuXHJcbiAgICB0aGlzLmFwcCA9IEFwcDtcclxuXHJcbiAgICB0aGlzLnJlbmFtZVByb2plY3QgPSB0aGlzLnJlbmFtZVByb2plY3QuYmluZCh0aGlzKTtcclxuICAgIHRoaXMucmVuYW1lRm9ybS5vbnN1Ym1pdCA9IHRoaXMucmVuYW1lUHJvamVjdDtcclxuXHJcbiAgICB0aGlzLmNhbmNlbEJ0bi5vbmNsaWNrID0gZSA9PiB7XHJcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdGhpcy5zZXRJbnB1dFZhbHVlKCcnKTtcclxuICAgICAgQXBwLmNsb3NlTW9kYWxEaWFsb2coKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFdoZW4gdGhlIG1vZGFsIGRpYWxvZyB0aGF0IGNvbnRhaW5zIHRoaXMgaXMgb3BlbiB0aGlzIG1ldGhvZCBzaG91bGQgYmUgY2FsbGVkLlxyXG4gICAqL1xyXG4gIHNldFVwRGlhbG9nKHByb2plY3RMaXN0SXRlbTogSFRNTEVsZW1lbnQpIHtcclxuICAgIHRoaXMucHJvamVjdExpc3RJdGVtID0gcHJvamVjdExpc3RJdGVtO1xyXG4gICAgdGhpcy5wcm9qZWN0SWQgPSBwcm9qZWN0TGlzdEl0ZW0uZGF0YXNldC5wcm9qSWQ7XHJcbiAgICB0aGlzLmN1cnJlbnROYW1lID0gcHJvamVjdExpc3RJdGVtLmRhdGFzZXQubmFtZTtcclxuICAgIHRoaXMucmVuYW1lUHJvamVjdEVycm9yTXNnLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xyXG4gICAgdGhpcy5zZXRJbnB1dFZhbHVlKHRoaXMuY3VycmVudE5hbWUpO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgcmVuYW1lUHJvamVjdChlOiBFdmVudCkge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgaWYgKHRoaXMuaW5wdXQudmFsdWUgPT09ICcnIHx8IHRoaXMuZW1wdHlJbnB1dFZhbHVlLnRlc3QodGhpcy5pbnB1dC52YWx1ZSkpIHtcclxuICAgICAgdGhpcy5yZW5hbWVQcm9qZWN0RXJyb3JNc2cuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XHJcbiAgICB9IGVsc2UgaWYgKHRoaXMuaW5wdXQudmFsdWUudHJpbSgpID09PSB0aGlzLmN1cnJlbnROYW1lKSB7XHJcbiAgICAgIHRoaXMuc2V0SW5wdXRWYWx1ZSgnJyk7XHJcbiAgICAgIHRoaXMuYXBwLmNsb3NlTW9kYWxEaWFsb2coKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMucmVuYW1lUHJvamVjdEVycm9yTXNnLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIC8vIFRPRE8gZGlzYWJsZSBidXR0b24gd2hpbGUgcHJvY2Vzc2luZyBhbmQgbWF5YmUgYWRkIHdhaXRpbmcgYW5pbWF0aW9uLlxyXG4gICAgICAgIGNvbnN0IHByb2plY3RSZW5hbWVkUmVzID0gYXdhaXQgQVBJLnJlbmFtZUZpbGUodGhpcy5wcm9qZWN0SWQsIHRoaXMuaW5wdXQudmFsdWUudHJpbSgpKTtcclxuICAgICAgICBpZiAocHJvamVjdFJlbmFtZWRSZXMuc3RhdHVzID09PSAyMDApIHtcclxuICAgICAgICAgIHRoaXMucHJvamVjdExpc3RJdGVtLnF1ZXJ5U2VsZWN0b3IoJ2g0JykuaW5uZXJUZXh0ID0gcHJvamVjdFJlbmFtZWRSZXMucmVzdWx0Lm5hbWU7XHJcbiAgICAgICAgICB0aGlzLnByb2plY3RMaXN0SXRlbS5kYXRhc2V0Lm5hbWUgPSBwcm9qZWN0UmVuYW1lZFJlcy5yZXN1bHQubmFtZTtcclxuICAgICAgICAgIHRoaXMuc2V0SW5wdXRWYWx1ZSgnJyk7XHJcbiAgICAgICAgICB0aGlzLmFwcC5jbG9zZU1vZGFsRGlhbG9nKCk7XHJcbiAgICAgICAgICB0aGlzLmFwcC5zaG93TWVzc2FnZSgnc3VjY2VzcycsIFsnUHJvamVjdCByZW5hbWVkIHN1Y2Nlc3NmdWxseS4nXSwgNTAwMCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHRoaXMuYXBwLmNsb3NlTW9kYWxEaWFsb2coKTtcclxuICAgICAgICAgIHRoaXMuYXBwLnNob3dNZXNzYWdlKCdlcnJvcicsIFsnSXQgd2FzIG5vdCBwb3NzaWJsZSB0byByZW5hbWUgdGhlIHByb2plY3QuJ10pO1xyXG4gICAgICAgICAgY29uc29sZS5lcnJvcignU29tZXRoaW5nIHdlbnQgd3JvbmcgcmVuYW1pbmcgYSBwcm9qZWN0LiAnLCBwcm9qZWN0UmVuYW1lZFJlcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgICB0aGlzLmFwcC5jbG9zZU1vZGFsRGlhbG9nKCk7XHJcbiAgICAgICAgdGhpcy5hcHAuc2hvd01lc3NhZ2UoJ2Vycm9yJywgWydJdCB3YXMgbm90IHBvc3NpYmxlIHRvIHJlbmFtZSB0aGUgcHJvamVjdC4nLCBlcnIucmVzdWx0LmVycm9yLm1lc3NhZ2VdKTtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdTb21ldGhpbmcgd2VudCB3cm9uZyByZW5hbWluZyBhIHByb2plY3QuICcsIGVycik7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNldElucHV0VmFsdWUodmFsdWU6IHN0cmluZykge1xyXG4gICAgdGhpcy5pbnB1dC52YWx1ZSA9IHZhbHVlO1xyXG4gIH1cclxufSIsImltcG9ydCBHZW5lcmljcyBmcm9tICcuL2dlbmVyaWNzJztcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSFRNTEVsZW1lbnRXaXRoQ29udGV4dCBleHRlbmRzIEhUTUxFbGVtZW50IHtcclxuICBjb250ZXh0TWVudURhdGE/OiBDb250ZXh0TWVudURhdGE7XHJcbn1cclxuXHJcbmludGVyZmFjZSBDb250ZXh0TWVudUl0ZW0ge1xyXG4gIG5hbWU6IHN0cmluZztcclxuICBhY3Rpb246ICh0aGlzOiBHbG9iYWxFdmVudEhhbmRsZXJzKSA9PiB2b2lkO1xyXG59XHJcblxyXG5pbnRlcmZhY2UgQ29udGV4dE1lbnVEYXRhIGV4dGVuZHMgQXJyYXk8Q29udGV4dE1lbnVJdGVtPnt9XHJcblxyXG5cclxuZXhwb3J0IGNsYXNzIENvbnRleHRNZW51IHtcclxuICBIVE1MQ29udGFpbmVyOiBIVE1MRWxlbWVudDtcclxuICBtZW51TGlzdENvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XHJcbiAgdmlzaWJsZSA9IGZhbHNlO1xyXG5cclxuICBjb25zdHJ1Y3RvcigpIHtcclxuICAgIHRoaXMuSFRNTENvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgdGhpcy5IVE1MQ29udGFpbmVyLmlkID0gJ2NvbnRleHRNZW51JztcclxuICAgIHRoaXMubWVudUxpc3RDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd1bCcpO1xyXG4gICAgdGhpcy5IVE1MQ29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMubWVudUxpc3RDb250YWluZXIpO1xyXG4gICAgdGhpcy5IVE1MQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgIGlmICh0aGlzLnZpc2libGUpIHRoaXMudG9nZ2xlTWVudSgnaGlkZScpO1xyXG4gICAgfSk7XHJcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignY29udGV4dG1lbnUnLCBlID0+IHtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICBjb25zdCB0YXJnZXRFbGVtZW50ID0gKGUudGFyZ2V0IGFzIEhUTUxFbGVtZW50KS5jbG9zZXN0KCdbZGF0YS1jeG1lbnVdJykgYXMgSFRNTEVsZW1lbnRXaXRoQ29udGV4dDtcclxuICAgICAgaWYgKHRhcmdldEVsZW1lbnQgJiYgdGFyZ2V0RWxlbWVudC5oYXNPd25Qcm9wZXJ0eSgnY29udGV4dE1lbnVEYXRhJykpIHtcclxuICAgICAgICAvLyBDbGVhbiBwcmV2aW91cyBjb250ZW50IG9mIHRoZSBjb250ZXh0IG1lbnUuXHJcbiAgICAgICAgdGhpcy5jbGVhck1lbnUoKTtcclxuICAgICAgICAvLyBTZXQgdGhlIG5ldyBjb250ZW50LlxyXG4gICAgICAgIHRoaXMuZ2VuZXJhdGVNZW51KHRhcmdldEVsZW1lbnQuY29udGV4dE1lbnVEYXRhKTtcclxuICAgICAgICAvLyBUaGUgcG9zaXRpb24uXHJcbiAgICAgICAgdGhpcy5zZXRQb3NpdGlvbihlLnBhZ2VZLCBlLnBhZ2VYKTtcclxuICAgICAgfSBlbHNlIGlmICh0aGlzLnZpc2libGUpIHtcclxuICAgICAgICB0aGlzLnRvZ2dsZU1lbnUoXCJoaWRlXCIpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICAgIHdpbmRvdy5kb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRoaXMuSFRNTENvbnRhaW5lcik7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBUb2dnbGVzIHRoZSB2aXNpYmlsaXR5IG9mIHRoZSBjb250ZXh0IG1lbnUuXHJcbiAgICovXHJcbiAgdG9nZ2xlTWVudShjb21tYW5kOiAnc2hvdycgfCAnaGlkZScpIHtcclxuICAgIHRoaXMuSFRNTENvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gY29tbWFuZCA9PT0gXCJzaG93XCIgPyBcImJsb2NrXCIgOiBcIm5vbmVcIjtcclxuICAgIHRoaXMudmlzaWJsZSA9ICF0aGlzLnZpc2libGU7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBTZXRzIHRoZSBwb3NpdGlvbiBvZiB0aGUgY29udGV4dCBtZW51IG9uIHRoZSB3aW5kb3cuXHJcbiAgICovXHJcbiAgc2V0UG9zaXRpb24odG9wOiBudW1iZXIsIGxlZnQ6IG51bWJlcikge1xyXG4gICAgdGhpcy5IVE1MQ29udGFpbmVyLnN0eWxlLmxlZnQgPSBgJHtsZWZ0fXB4YDtcclxuICAgIHRoaXMuSFRNTENvbnRhaW5lci5zdHlsZS50b3AgPSBgJHt0b3B9cHhgO1xyXG4gICAgdGhpcy50b2dnbGVNZW51KFwic2hvd1wiKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFJlbW92ZXMgdGhlIGNvbnRlbnRzIG9mIHRoZSBjb250ZXh0IG1lbnUgYXMgd2VsbCBhcyBhbnkgYXNzb2NpYXRlZCBldmVudCBsaXN0ZW5lci5cclxuICAgKi9cclxuICBjbGVhck1lbnUoKSB7XHJcbiAgICB0aGlzLm1lbnVMaXN0Q29udGFpbmVyLmNoaWxkTm9kZXMuZm9yRWFjaCgoYnRuOiBIVE1MRWxlbWVudCkgPT4gYnRuLm9uY2xpY2sgPSBudWxsKTtcclxuICAgIEdlbmVyaWNzLmVtcHR5Tm9kZSh0aGlzLm1lbnVMaXN0Q29udGFpbmVyKTtcclxuICB9ICBcclxuXHJcbiAgLyoqXHJcbiAgICogQ3JlYXRlcyB0aGUgY29udGVudHMgb2YgdGhlIGNvbnRleHQgbWVudSBhbmQgYXBwZW5kcyB0aGVtLlxyXG4gICAqL1xyXG4gIGdlbmVyYXRlTWVudShjb250ZXh0TWVudURhdGE6IENvbnRleHRNZW51RGF0YSkge1xyXG4gICAgY29uc3QgaXRlbXNDb250YWluZXIgPSBuZXcgRG9jdW1lbnRGcmFnbWVudCgpO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb250ZXh0TWVudURhdGEubGVuZ3RoOyBpKyspIHtcclxuICAgICAgY29uc3QgaXRlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XHJcbiAgICAgIGl0ZW0uaW5uZXJUZXh0ID0gY29udGV4dE1lbnVEYXRhW2ldLm5hbWU7XHJcbiAgICAgIGl0ZW0ub25jbGljayA9IGNvbnRleHRNZW51RGF0YVtpXS5hY3Rpb247XHJcbiAgICAgIGl0ZW1zQ29udGFpbmVyLmFwcGVuZENoaWxkKGl0ZW0pO1xyXG4gICAgfVxyXG4gICAgdGhpcy5tZW51TGlzdENvbnRhaW5lci5hcHBlbmRDaGlsZChpdGVtc0NvbnRhaW5lcik7XHJcbiAgfVxyXG5cclxufVxyXG5cclxuIiwiaW1wb3J0IEFQSSBmcm9tICcuL2FwaSc7XHJcbmltcG9ydCB7IFByb2plY3REYXRhIH0gZnJvbSAnLi90eXBlcyc7XHJcbmltcG9ydCB0eXBlIHsgQXBwbGljYXRpb24gfSBmcm9tICcuL2FwcCc7XHJcbmltcG9ydCB0eXBlIHsgSFRNTEVsZW1lbnRXaXRoQ29udGV4dCB9IGZyb20gJy4vY29udGV4dE1lbnUnO1xyXG5cclxuZXhwb3J0IGNsYXNzIFByb2plY3RJdGVtIHtcclxuICBIVE1MQ29udGFpbmVyOiBIVE1MRWxlbWVudFdpdGhDb250ZXh0O1xyXG5cclxuICBjb25zdHJ1Y3Rvcihwcm9qZWN0RGF0YTogUHJvamVjdERhdGEsIGFwcDogQXBwbGljYXRpb24pIHtcclxuICAgIHRoaXMuSFRNTENvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xyXG4gICAgLy8gUHJvamVjdHMgdGhhdCBoYXZlIGJlZW4gdXBsb2FkZWQgYnV0IG5vdCBzZW5kIHRvIHRoZSBiYWNrZW5kIGhhdmUgYW4gaWQgb2YgJ3RlbXBvcmFsJy5cclxuICAgIGlmIChwcm9qZWN0RGF0YS5pZCA9PT0gJ3RlbXBvcmFsJykge1xyXG4gICAgICB0aGlzLkhUTUxDb250YWluZXIuY2xhc3NMaXN0LmFkZCgndW5zeW5jJyk7XHJcbiAgICB9XHJcbiAgICB0aGlzLkhUTUxDb250YWluZXIuZGF0YXNldC5wcm9qSWQgPSBwcm9qZWN0RGF0YS5pZDtcclxuICAgIHRoaXMuSFRNTENvbnRhaW5lci5kYXRhc2V0Lm5hbWUgPSBwcm9qZWN0RGF0YS5uYW1lO1xyXG4gICAgdGhpcy5IVE1MQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ3Byb2plY3RJdGVtJyk7XHJcbiAgICBsZXQgcHJvakl0ZW1Db250ZW50ID0gW107XHJcbiAgICBpZiAocHJvamVjdERhdGEuc2hhcmVkKSB7XHJcbiAgICAgIHByb2pJdGVtQ29udGVudC5wdXNoKCc8c3ZnIGNsYXNzPVwic2hhcmVkSWNvblwiPjx1c2UgaHJlZj1cIiNzaGFyZWRJY29uXCIgLz48L3N2Zz4nKTtcclxuICAgIH1cclxuICAgIGlmIChwcm9qZWN0RGF0YS50aHVtYklkKSB7XHJcbiAgICAgIHByb2pJdGVtQ29udGVudC5wdXNoKGA8aW1nIGNsYXNzPVwidGh1bWJcIiBzcmM9XCJodHRwczovL2RyaXZlLmdvb2dsZS5jb20vdWM/aWQ9JHtwcm9qZWN0RGF0YS50aHVtYklkfVwiPmApO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcHJvakl0ZW1Db250ZW50LnB1c2goYDxzdmcgY2xhc3M9XCJ0aHVtYlwiIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB2aWV3Qm94PVwiLTEwMCAtNTAgMzUwIDIxMFwiPjxwYXRoIGQ9XCJNMTQzLDEwLjQ0SDY1LjI3VjdhNyw3LDAsMCwwLTctN0g3QTcsNywwLDAsMCwwLDdWMTAzYTcsNywwLDAsMCw3LDdINjVWNzAuMThIODVWMTEwaDU4YTcsNywwLDAsMCw3LTdWMTcuNDFBNyw3LDAsMCwwLDE0MywxMC40NFpNMTI1LDUzLjQ5SDEwNXYtMjBoMjBaXCIgc3R5bGU9XCJmaWxsOiNlNmU2ZTZcIi8+PC9zdmc+YCk7XHJcbiAgICB9XHJcbiAgICBwcm9qSXRlbUNvbnRlbnQucHVzaChgPGg0PiR7cHJvamVjdERhdGEubmFtZX08L2g0PmApO1xyXG4gICAgdGhpcy5IVE1MQ29udGFpbmVyLmlubmVySFRNTCA9IHByb2pJdGVtQ29udGVudC5qb2luKCcnKTtcclxuXHJcbiAgICAvLyBJbmRpY2F0ZSB0aGF0IHRoaXMgb2JqZWN0IGhhcyBjb250ZXh0IG1lbnUuXHJcbiAgICB0aGlzLkhUTUxDb250YWluZXIuZGF0YXNldC5jeG1lbnUgPSAnJztcclxuXHJcbiAgICAvLyBBcHBlbmQgYSBuZXcgcHJvcGVydHkgdG8gdGhlIEhUTUwgY29udGFpbmVyIGVsZW1lbnQgd2l0aCB0aGUgY29udGV4dCBtZW51IGRhdGEuXHJcbiAgICB0aGlzLkhUTUxDb250YWluZXIuY29udGV4dE1lbnVEYXRhID0gW1xyXG4gICAgICB7XHJcbiAgICAgICAgbmFtZTogJ0RlbGV0ZScsXHJcbiAgICAgICAgYWN0aW9uOiAoKSA9PiB7XHJcbiAgICAgICAgICBhcHAuc2hvd1ZpZXdwb3J0RGlhbG9nKCdhY3Rpb24nLCBgQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIGRlbGV0ZSB0aGUgJHtwcm9qZWN0RGF0YS5uYW1lfSBwcm9qZWN0P2AsIFtcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIG5hbWU6ICdEZWxldGUnLFxyXG4gICAgICAgICAgICAgIGZ1bmN0aW9uOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBhcHAuc2hvd1ZpZXdwb3J0RGlhbG9nKCdsb2FkZXInLCBgRGVsZXRpbmcgJHtwcm9qZWN0RGF0YS5uYW1lfSBwcm9qZWN0LmApO1xyXG4gICAgICAgICAgICAgICAgQVBJLmRlbGV0ZUZpbGUocHJvamVjdERhdGEuaWQpLnRoZW4ocmVzID0+IHtcclxuICAgICAgICAgICAgICAgICAgdGhpcy5IVE1MQ29udGFpbmVyLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgICBjb25zdCBwcm9qSW5kZXggPSBhcHAucHJvamVjdHNEYXRhLmZpbmRJbmRleChwcm9qID0+IHByb2ouaWQgPT09IHByb2plY3REYXRhLmlkKTtcclxuICAgICAgICAgICAgICAgICAgYXBwLnByb2plY3RzRGF0YS5zcGxpY2UocHJvakluZGV4LCAxKTtcclxuICAgICAgICAgICAgICAgICAgLy8gVE9ETyBjaGVjayBhbHNvIGlmIGl0IGlzIGluIHRoZSB2YWx1ZSBvZiBjdXJyZW50UHJvamVjdCBvciBsYXN0VXBsb2FkZWRQcm9qZWN0IGFuZCBkZWxldGUgaXQgYXMgd2VsbFxyXG4gICAgICAgICAgICAgICAgICBhcHAuaGlkZVZpZXdwb3J0TWVzc2FnZSgpO1xyXG4gICAgICAgICAgICAgICAgICBhcHAuc2hvd01lc3NhZ2UoJ3N1Y2Nlc3MnLCBbJ1Byb2plY3QgZGVsZXRlZCBzdWNjZXNzZnVsbHknXSk7XHJcbiAgICAgICAgICAgICAgICB9LCBlcnIgPT4ge1xyXG4gICAgICAgICAgICAgICAgICBhcHAuaGlkZVZpZXdwb3J0TWVzc2FnZSgpO1xyXG4gICAgICAgICAgICAgICAgICBhcHAuc2hvd01lc3NhZ2UoJ2Vycm9yJywgWydJdCB3YXMgbm90IHBvc3NpYmxlIHRvIGRlbGV0ZSB0aGUgcHJvamVjdC4nLCBlcnIucmVzdWx0LmVycm9yLm1lc3NhZ2VdKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIG5hbWU6ICdDYW5jZWwnLFxyXG4gICAgICAgICAgICAgIGZ1bmN0aW9uOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBhcHAuaGlkZVZpZXdwb3J0TWVzc2FnZSgpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgXSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG4gICAgICB7XHJcbiAgICAgICAgbmFtZTogJ1NoYXJlIHByb2plY3QnLFxyXG4gICAgICAgIGFjdGlvbjogKCkgPT4ge1xyXG4gICAgICAgICAgYXBwLnNoYXJlUHJvamVjdERpYWxvZy5zZXRVcERpYWxvZyhwcm9qZWN0RGF0YSk7XHJcbiAgICAgICAgICBhcHAuc2hvd01vZGFsRGlhbG9nKGFwcC5zaGFyZVByb2plY3REaWFsb2cuaHRtbENvbnRhaW5lcik7XHJcbiAgICAgICAgICBhcHAubW9kYWxEaWFsb2dDb250YWluZXIuY2xhc3NMaXN0LmFkZCgnZ3JheVRyYW5zbHVjZW50Jyk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG4gICAgICB7XHJcbiAgICAgICAgbmFtZTogJ1JlbmFtZScsXHJcbiAgICAgICAgYWN0aW9uOiAoKSA9PiB7XHJcbiAgICAgICAgICBhcHAucmVuYW1lUHJvamVjdERpYWxvZy5zZXRVcERpYWxvZyh0aGlzLkhUTUxDb250YWluZXIpO1xyXG4gICAgICAgICAgYXBwLnNob3dNb2RhbERpYWxvZyhhcHAucmVuYW1lUHJvamVjdERpYWxvZy5odG1sQ29udGFpbmVyKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIF07XHJcbiAgfVxyXG59IiwiaW1wb3J0IEFQSSBmcm9tICcuL2FwaSc7XHJcbmltcG9ydCB7IFdvcmtzcGFjZSB9IGZyb20gJy4vd29ya3NwYWNlJztcclxuaW1wb3J0IEdlbmVyaWNzIGZyb20gJy4vZ2VuZXJpY3MnO1xyXG5pbXBvcnQgeyBBZGRDb21tZW50IH0gZnJvbSAnLi9hcHBUb29scy9hZGRDb21tZW50JztcclxuaW1wb3J0IHsgU2hvd0VsZW1lbnREYXRhIH0gZnJvbSAnLi9hcHBUb29scy9zaG93RWxlbWVudERhdGEnO1xyXG5pbXBvcnQgeyBTaGFyZVByb2plY3QgfSBmcm9tICcuL3NoYXJlUHJvamVjdCc7XHJcbmltcG9ydCB7IE5vdGlmaWNhdGlvbnNNYW5hZ2VyIH0gZnJvbSAnLi9ub3RpZmljYXRpb25zTWFuYWdlcic7XHJcbmltcG9ydCB7IFJlbmFtZVByb2plY3QgfSBmcm9tICcuL3JlbmFtZVByb2plY3QnO1xyXG5pbXBvcnQgeyBDb250ZXh0TWVudSB9IGZyb20gJy4vY29udGV4dE1lbnUnO1xyXG5pbXBvcnQgeyBQcm9qZWN0SXRlbSB9IGZyb20gJy4vcHJvamVjdEl0ZW0nO1xyXG5pbXBvcnQgeyBQcm9qZWN0RGF0YSwgTm90aWZpY2F0aW9uVG9TZW5kIH0gZnJvbSAnLi90eXBlcyc7XHJcblxyXG5pbnRlcmZhY2UgRGlhbG9nQWN0aW9uIHtcclxuICBuYW1lOiBzdHJpbmc7XHJcbiAgZnVuY3Rpb246ICh0aGlzOiBHbG9iYWxFdmVudEhhbmRsZXJzLCBlOiBNb3VzZUV2ZW50KSA9PiBhbnk7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBBcHBsaWNhdGlvbiB7XHJcbiAgYXBwTWFpbkZvbGRlcklkOiBzdHJpbmc7XHJcbiAgLy8gQXJyYXkgb2Ygb2JqZWN0cyB3aXRoIGRhdGEgbGlrZSAnbmFtZScgYW5kICdpZCcgb2YgdGhlIHByb2plY3RzLlxyXG4gIHByb2plY3RzRGF0YTogUHJvamVjdERhdGFbXTtcclxuICBhcHBTZXR0aW5nc0ZvbGRlcklkOiBzdHJpbmc7XHJcbiAgdGh1bWJzRm9sZGVySWQ6IHN0cmluZztcclxuICAvLyBJZiBhIHVzZXIgaXMgbG9nZ2VkIGl0IHByb2ZpbGUgaW5mbyBpcyBzdG9yZWQgaGVyZS5cclxuICB1c2VySW5mbzogZ2FwaS5jbGllbnQuZHJpdmUuVXNlcjtcclxuICB1c2VySW5mb0NvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XHJcbiAgLy8gVGhlIGN1cnJlbnQgd29ya3NwYWNlIG9iamVjdCB3aWxsIGJlIHJlZmVyZW5jZWQgaGVyZS5cclxuICBjdXJyZW50V29ya3NwYWNlOiBXb3Jrc3BhY2U7XHJcbiAgd29ya3NwYWNlc0NvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XHJcbiAgbGFzdFVwbG9hZGVkUHJvamVjdDogUHJvamVjdERhdGE7XHJcbiAgLy8gU3RvcmVzIHRoZSBhY3RpdmUgaXRlbSBpbiB0aGUgcHJvamVjdHMgbGlzdC5cclxuICBwcmV2aW91c0FjdGl2ZUl0ZW06IEhUTUxFbGVtZW50O1xyXG4gIHByb2plY3RzTGlzdEJ0bjogSFRNTEVsZW1lbnQ7XHJcbiAgZHJhd2luZ3NCdG5zOiBIVE1MRWxlbWVudDtcclxuICB0b29sYmFyc0NvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XHJcbiAgLy8gTW9kYWwgZGlhbG9nLlxyXG4gIG1vZGFsRGlhbG9nQ29udGFpbmVyOiBIVE1MRWxlbWVudDtcclxuICBtb2RhbERpYWxvZ0NvbnRlbnQ6IEhUTUxFbGVtZW50O1xyXG4gIG1vZGFsRGlhbG9nc1N0b3JhZ2U6IEhUTUxFbGVtZW50O1xyXG4gIGNsb3NlTW9kYWxCdG46IEhUTUxFbGVtZW50O1xyXG4gIC8vIFZpZXdwb3J0IG1lc3NhZ2UuXHJcbiAgdmlld3BvcnRNZXNzYWdlOiBIVE1MRWxlbWVudDtcclxuICAvLyBQcm9qZWN0cyBsaXN0LlxyXG4gIHByb2plY3RzTGlzdENvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XHJcbiAgcHJvamVjdHNMaXN0OiBIVE1MRWxlbWVudDtcclxuICBjbG9zZVByb2plY3RzTGlzdEJ0bjogSFRNTEVsZW1lbnQ7XHJcbiAgLy8gUGFuZWxzIHN0b3JhZ2UuXHJcbiAgcGFuZWxzU3RvcmFnZTogSFRNTEVsZW1lbnQ7XHJcbiAgLy8gU2F2ZSBidXR0b24uXHJcbiAgc2F2ZUJ0bjogSFRNTEVsZW1lbnQ7XHJcbiAgLy8gVXBsb2FkIHByb2plY3QgZm9ybVxyXG4gIHVwbG9hZEZpbGVGb3JtOiBIVE1MRWxlbWVudDtcclxuICBmaWxlSW5wdXQ6IEhUTUxJbnB1dEVsZW1lbnQ7XHJcbiAgc3VibWl0RmlsZUJ0bjogSFRNTEVsZW1lbnQ7XHJcbiAgLy8gUmVuYW1lIHByb2plY3QgZm9ybVxyXG4gIHJlbmFtZVByb2plY3REaWFsb2c6IFJlbmFtZVByb2plY3Q7XHJcbiAgLy8gU2hhcmUgcHJvamVjdCBmb3JtXHJcbiAgc2hhcmVQcm9qZWN0RGlhbG9nOiBTaGFyZVByb2plY3Q7XHJcbiAgLy8gTWVzc2FnZSBjb250YWluZXJcclxuICBtZXNzYWdlQ29udGFpbmVyOiBIVE1MRWxlbWVudDtcclxuICBtZXNzYWdlVGltZXJJZDogbnVtYmVyO1xyXG4gIC8vIE5vdGlmaWNhdGlvbnMgbWFuYWdlclxyXG4gIG5vdGlmaWNhdGlvbnNNYW5hZ2VyOiBOb3RpZmljYXRpb25zTWFuYWdlcjtcclxuICAvLyBDb250ZXh0IG1lbnVcclxuICBjb250ZXh0TWVudTogQ29udGV4dE1lbnU7XHJcbiAgY29tbWVudHNDaGFuZ2VzVW5zYXZlZDogYm9vbGVhbjtcclxuXHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgICB0aGlzLnVzZXJJbmZvQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VzZXItaW5mbycpO1xyXG4gICAgdGhpcy53b3Jrc3BhY2VzQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3dvcmtzcGFjZXMnKTtcclxuICAgIHRoaXMucHJvamVjdHNMaXN0QnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2plY3RzTGlzdEJ0bicpO1xyXG4gICAgdGhpcy5kcmF3aW5nc0J0bnMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZHJhd2luZ3NCdG5zJyk7XHJcbiAgICB0aGlzLnRvb2xiYXJzQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Rvb2xiYXJzQ29udGFpbmVyJyk7XHJcbiAgICAvLyBNb2RhbCBkaWFsb2cuXHJcbiAgICB0aGlzLm1vZGFsRGlhbG9nQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21vZGFsRGlhbG9nQ29udGFpbmVyJyk7XHJcbiAgICB0aGlzLm1vZGFsRGlhbG9nQ29udGVudCA9IHRoaXMubW9kYWxEaWFsb2dDb250YWluZXIucXVlcnlTZWxlY3RvcignLm1vZGFsLWNvbnRlbnQnKTtcclxuICAgIHRoaXMubW9kYWxEaWFsb2dzU3RvcmFnZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtb2RhbERpYWxvZ3NTdG9yYWdlJyk7XHJcbiAgICB0aGlzLmNsb3NlTW9kYWxCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2xvc2VNb2RhbEJ0bicpO1xyXG4gICAgdGhpcy5jbG9zZU1vZGFsRGlhbG9nID0gdGhpcy5jbG9zZU1vZGFsRGlhbG9nLmJpbmQodGhpcyk7XHJcbiAgICB0aGlzLmNsb3NlTW9kYWxCdG4ub25jbGljayA9IHRoaXMuY2xvc2VNb2RhbERpYWxvZztcclxuICAgIC8vIFZpZXdwb3J0IG1lc3NhZ2UuXHJcbiAgICB0aGlzLnZpZXdwb3J0TWVzc2FnZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd2aWV3cG9ydE1lc3NhZ2UnKTsgLy8gVE9ETyBDcmVhdGUgYXMgYSBuZXcgY29tcG9uZW50IG9mIHRoZSB3b3Jrc3BhY2VcclxuICAgIC8vIFByb2plY3RzIGxpc3QuXHJcbiAgICB0aGlzLnByb2plY3RzTGlzdENvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9qZWN0c0xpc3RDb250YWluZXInKTtcclxuICAgIHRoaXMucHJvamVjdHNMaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2plY3RzTGlzdCcpO1xyXG4gICAgdGhpcy5jbG9zZVByb2plY3RzTGlzdEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjbG9zZVByb2plY3RzTGlzdEJ0bicpO1xyXG4gICAgLy8gUGFuZWxzIHN0b3JhZ2UuXHJcbiAgICB0aGlzLnBhbmVsc1N0b3JhZ2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGFuZWxzU3RvcmFnZScpO1xyXG4gICAgLy8gU2F2ZSBidXR0b24uXHJcbiAgICB0aGlzLnNhdmVCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2F2ZUJ0bicpO1xyXG4gICAgdGhpcy5zYXZlQ29tbWVudHNEYXRhID0gdGhpcy5zYXZlQ29tbWVudHNEYXRhLmJpbmQodGhpcyk7XHJcbiAgICB0aGlzLnNhdmVCdG4ub25jbGljayA9IHRoaXMuc2F2ZUNvbW1lbnRzRGF0YTtcclxuICAgIC8vIFByb2plY3RzIGxpc3QuXHJcbiAgICB0aGlzLmNsb3NlUHJvamVjdHNMaXN0ID0gdGhpcy5jbG9zZVByb2plY3RzTGlzdC5iaW5kKHRoaXMpO1xyXG4gICAgdGhpcy5wcm9qZWN0c0xpc3RCdG4ub25jbGljayA9ICgpID0+IHtcclxuICAgICAgaWYgKHRoaXMucHJvamVjdHNMaXN0QnRuLmRhdGFzZXQub3BlbiA9PT0gJ3RydWUnKSB7XHJcbiAgICAgICAgdGhpcy5jbG9zZVByb2plY3RzTGlzdCgpO1xyXG4gICAgICB9IGVsc2UgaWYgKHRoaXMucHJvamVjdHNMaXN0QnRuLmRhdGFzZXQub3BlbiA9PT0gJ2ZhbHNlJykge1xyXG4gICAgICAgIHRoaXMub3BlblByb2plY3RzTGlzdCgpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICB0aGlzLmNsb3NlUHJvamVjdHNMaXN0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5jbG9zZVByb2plY3RzTGlzdCk7XHJcbiAgICB0aGlzLmdvVG9Qcm9qZWN0ID0gdGhpcy5nb1RvUHJvamVjdC5iaW5kKHRoaXMpO1xyXG4gICAgdGhpcy5wcm9qZWN0c0xpc3QuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmdvVG9Qcm9qZWN0KTtcclxuICAgIC8qKioqKioqKioqKioqKioqKioqKiogVXBsb2FkIHByb2plY3QgZm9ybSAqKioqKioqKioqKioqKioqKioqKiovXHJcbiAgICB0aGlzLnVwbG9hZEZpbGVGb3JtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VwbG9hZEZpbGVGb3JtJyk7XHJcbiAgICB0aGlzLmZpbGVJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWxlSW5wdXQnKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xyXG4gICAgdGhpcy5zdWJtaXRGaWxlQnRuID0gdGhpcy51cGxvYWRGaWxlRm9ybS5xdWVyeVNlbGVjdG9yKCdidXR0b25bdHlwZT1cInN1Ym1pdFwiXScpO1xyXG4gICAgLy8gU2hvdyB0aGUgdXBsb2FkIHByb2plY3QgZm9ybS5cclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduZXdQcm9qZWN0QnRuJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuc2hvd01vZGFsRGlhbG9nKHRoaXMudXBsb2FkRmlsZUZvcm0pO1xyXG4gICAgICB0aGlzLm1vZGFsRGlhbG9nQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ2dyYXlUcmFuc2x1Y2VudCcpO1xyXG4gICAgfSk7XHJcbiAgICAvLyBIaWRlIHRoZSB1cGxvYWQgcHJvamVjdCBmb3JtLlxyXG4gICAgLy8gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Nsb3NlVXBsb2FkRm9ybScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgLy8gICB0aGlzLmNsb3NlTW9kYWxEaWFsb2codGhpcy51cGxvYWRGaWxlRm9ybSk7XHJcbiAgICAvLyAgIHRoaXMubW9kYWxEaWFsb2dDb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZSgnZ3JheVRyYW5zbHVjZW50Jyk7XHJcbiAgICAvLyB9KTtcclxuICAgIC8vIExpc3RlbiB0byBmaWxlIGlucHV0IGNoYW5nZXMuXHJcbiAgICB0aGlzLmZpbGVJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoKSA9PiB7XHJcbiAgICAgIGlmICh0aGlzLmZpbGVJbnB1dC5maWxlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgdGhpcy5maWxlSW5wdXQubmV4dEVsZW1lbnRTaWJsaW5nLmlubmVySFRNTCA9IHRoaXMuZmlsZUlucHV0LmZpbGVzWzBdLm5hbWU7XHJcbiAgICAgICAgdGhpcy5zdWJtaXRGaWxlQnRuLmNsYXNzTGlzdC5yZW1vdmUoJ2Rpc2FibGVkJyk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5maWxlSW5wdXQubmV4dEVsZW1lbnRTaWJsaW5nLmlubmVySFRNTCA9ICdDaG9vc2UgYSBmaWxlJztcclxuICAgICAgICB0aGlzLnN1Ym1pdEZpbGVCdG4uY2xhc3NMaXN0LmFkZCgnZGlzYWJsZWQnKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICAvLyBTdWJtaXQgZmlsZSBsb2dpYy5cclxuICAgIHRoaXMudXBsb2FkRmlsZUZvcm0ub25zdWJtaXQgPSBlID0+IHtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAvLyBTZXQgbG9hZGluZyBzdGF0ZSBvbiBVSS5cclxuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvYWRpbmdGaWxlJykuc3R5bGUuZGlzcGxheSA9ICd1bnNldCc7XHJcbiAgICAgIHRoaXMuc3VibWl0RmlsZUJ0bi5jbGFzc0xpc3QuYWRkKCdkaXNhYmxlZCcpO1xyXG4gICAgICB0aGlzLnN1Ym1pdEZpbGVCdG4uaW5uZXJIVE1MID0gJ1VwbG9hZGluZyBmaWxlJztcclxuICAgICAgKHRoaXMuZmlsZUlucHV0Lm5leHRFbGVtZW50U2libGluZyBhcyBIVE1MRWxlbWVudCkuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgICAgY29uc3QgZmlsZSA9ICgoZS50YXJnZXQgYXMgSFRNTEZvcm1FbGVtZW50KS5lbGVtZW50cy5uYW1lZEl0ZW0oXCJmaWxlXCIpIGFzIEhUTUxJbnB1dEVsZW1lbnQpLmZpbGVzWzBdO1xyXG4gICAgICAvLyBUT0RPOiBTaG93IHNvbWUgcmVhbCBwcm9ncmVzcyB3aGlsZSBjcmVhdGluZyB0aGUgcHJvamVjdC5cclxuICAgICAgQVBJLmNyZWF0ZVByb2plY3QoZmlsZSwgdGhpcywgdGhpcy5sYXN0VXBsb2FkZWRQcm9qZWN0KS50aGVuKChyZXM6IFByb2plY3REYXRhKSA9PiB7XHJcbiAgICAgICAgdGhpcy51cGRhdGVQcm9qZWN0c0xpc3QocmVzKTtcclxuICAgICAgICB0aGlzLmNsb3NlTW9kYWxEaWFsb2coKTtcclxuICAgICAgICB0aGlzLnNob3dNZXNzYWdlKCdzdWNjZXNzJywgWydQcm9qZWN0IHVwbG9hZGVkIHN1Y2Nlc3NmdWxseS4nXSk7XHJcbiAgICAgICAgdGhpcy5maWxlSW5wdXQudmFsdWUgPSAnJztcclxuICAgICAgICAvLyBSZXNldCB1cGxvYWQgZm9ybSBVSS5cclxuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9hZGluZ0ZpbGUnKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgICAgIHRoaXMuZmlsZUlucHV0Lm5leHRFbGVtZW50U2libGluZy5pbm5lckhUTUwgPSAnQ2hvb3NlIGEgZmlsZSc7XHJcbiAgICAgICAgdGhpcy5zdWJtaXRGaWxlQnRuLmlubmVySFRNTCA9ICdVcGxvYWQnO1xyXG4gICAgICAgICh0aGlzLmZpbGVJbnB1dC5uZXh0RWxlbWVudFNpYmxpbmcgYXMgSFRNTEVsZW1lbnQpLnN0eWxlLmRpc3BsYXkgPSAndW5zZXQnO1xyXG4gICAgICB9LCBlcnIgPT4ge1xyXG4gICAgICAgIHRoaXMuY2xvc2VNb2RhbERpYWxvZygpO1xyXG4gICAgICAgIHRoaXMudXBkYXRlUHJvamVjdHNMaXN0KHRoaXMubGFzdFVwbG9hZGVkUHJvamVjdCk7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICAgIC8qKioqKioqKioqKioqKioqKioqKiBSZW5hbWUgcHJvamVjdCBmb3JtICoqKioqKioqKioqKioqKioqKioqKi9cclxuICAgIHRoaXMucmVuYW1lUHJvamVjdERpYWxvZyA9IG5ldyBSZW5hbWVQcm9qZWN0KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZW5hbWVQcm9qZWN0Rm9ybScpLCB0aGlzKTtcclxuICAgIC8qKioqKioqKioqKioqKioqKioqKiogU2hhcmUgcHJvamVjdCBmb3JtICoqKioqKioqKioqKioqKioqKioqKi9cclxuICAgIHRoaXMuc2hhcmVQcm9qZWN0RGlhbG9nID0gbmV3IFNoYXJlUHJvamVjdChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2hhcmVQcm9qZWN0RGlhbG9nJyksIHRoaXMpO1xyXG4gICAgLyoqKioqKioqKioqKioqKioqKioqKiogTWVzc2FnZSBjb250YWluZXIgKioqKioqKioqKioqKioqKioqKioqKi9cclxuICAgIHRoaXMubWVzc2FnZUNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtZXNzYWdlQ29udGFpbmVyJyk7XHJcbiAgICB0aGlzLmNsb3NlTWVzc2FnZSA9IHRoaXMuY2xvc2VNZXNzYWdlLmJpbmQodGhpcyk7XHJcbiAgICB0aGlzLm1lc3NhZ2VDb250YWluZXIucXVlcnlTZWxlY3RvcignYnV0dG9uJykub25jbGljayA9IHRoaXMuY2xvc2VNZXNzYWdlO1xyXG4gICAgLyoqKioqKioqKioqKioqKiBQcm9qZWN0cyBsaXN0IGl0ZW1zIGRpc3RyaWJ1dGlvbiAqKioqKioqKioqKioqKi9cclxuICAgIHdpbmRvdy5vbnJlc2l6ZSA9IHRoaXMuYWRqdXN0SXRlbXM7XHJcbiAgICAvKioqKioqKioqKioqKioqKiBUb29scyBidXR0b25zIGV2ZW50IGxpc3RlbmVycyAqKioqKioqKioqKioqKioqL1xyXG4gICAgLy8gVE9ETzogVGhpcyB3b3VsZCBtYWtlIG1vcmUgc2Vuc2UgYXMgcGFydCBvZiB0aGUgd29ya3NwYWNlID9cclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0b29sLTQnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB0aGlzLmN1cnJlbnRXb3Jrc3BhY2UubWFuYWdlVG9vbHMoZSwgU2hvd0VsZW1lbnREYXRhLCAnZWxlbWVudHNEYXRhVG9vbCcpKTtcclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0b29sLTUnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB0aGlzLmN1cnJlbnRXb3Jrc3BhY2UubWFuYWdlVG9vbHMoZSwgQWRkQ29tbWVudCwgJ2NvbW1lbnRzVG9vbCcpKTtcclxuICAgIC8qKioqKioqKioqKioqKioqKioqKiBOb3RpZmljYXRpb25zIG1hbmFnZXIgKioqKioqKioqKioqKioqKioqKiovXHJcbiAgICB0aGlzLm5vdGlmaWNhdGlvbnNNYW5hZ2VyID0gbmV3IE5vdGlmaWNhdGlvbnNNYW5hZ2VyKCk7XHJcbiAgICAvKioqKioqKioqKioqKioqKioqKioqKioqIENvbnRleHQgbWVudSAqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG4gICAgdGhpcy5jb250ZXh0TWVudSA9IG5ldyBDb250ZXh0TWVudSgpO1xyXG4gIH1cclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIFN0b3JlcyB0aGUgY3VycmVudCBsb2dnZWQgdXNlciBpbmZvIGFzIGEgcHJvcGVydHkgb2YgdGhlIGFwcCBhbmQgcG9wdWxhdGVzIHRoZSBVSSB3aXRoIHRoZSB1c2VyIGluZm8uXHJcbiAgICogT3B0aW9uYWxseSBhIHVzZXIgaW5mbyBjYW4gYmUgcHJvdmlkZWQgdG8gc2tpcCBmZXRjaGluZyB0aGUgY3VycmVudCBsb2dnZWQgdXNlclxyXG4gICAqL1xyXG4gIGFzeW5jIHNldFVzZXJJbmZvKHVzZXJJbmZvOiBnYXBpLmNsaWVudC5kcml2ZS5Vc2VyID0ge30pIHtcclxuICAgIGlmIChHZW5lcmljcy5pc09iamVjdEVtcHR5KHVzZXJJbmZvKSkge1xyXG4gICAgICBjb25zdCB1c2VySW5mb1JlcyA9IGF3YWl0IEFQSS5nZXRVc2VySW5mbygpO1xyXG4gICAgICB0aGlzLnVzZXJJbmZvID0gSlNPTi5wYXJzZSh1c2VySW5mb1Jlcy5ib2R5KS51c2VyO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy51c2VySW5mbyA9IHVzZXJJbmZvO1xyXG4gICAgfVxyXG4gICAgdGhpcy51c2VySW5mb0NvbnRhaW5lci5pbm5lckhUTUwgPSBgXHJcbiAgICAgIDxpbWcgc3JjPSR7dGhpcy51c2VySW5mby5waG90b0xpbmt9PlxyXG4gICAgICA8c3Bhbj5cclxuICAgICAgICA8c3Bhbj4ke3RoaXMudXNlckluZm8uZGlzcGxheU5hbWV9PC9zcGFuPjxzcGFuIGNsYXNzPVwiZW1haWxcIj4ke3RoaXMudXNlckluZm8uZW1haWxBZGRyZXNzfTwvc3Bhbj5cclxuICAgICAgPC9zcGFuPmA7XHJcbiAgfVxyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogU2F2ZXMgdGhlIGNvbW1lbnRzIGRhdGEgdXNpbmcgdGhlIGNvbW1lbnRzIGFycmF5IGZyb20gdGhlIGN1cnJlbnQgd29ya3NwYWNlLlxyXG4gICAqIEl0IGFsc28gbm90aWZpZXMgdGhlIG1lbnRpb25lZCBjb2xsYWJvcmF0b3JzIGluIHRoZSBjb21tZW50cyBpZiBhbnkgd2FzIG1lbnRpb25lZCBpbiBuZXcgY29tbWVudHMuXHJcbiAgICogSXQgY3JlYXRlcyB0aGUgZmlsZSAoY29tbWVudHMuanNvbikgaWYgaXQgc3RpbGwgZG9lc250IGV4aXN0IG9yIHVwZGF0ZXMgaXRzIGNvbnRlbnRzIGlmIGl0IGV4aXN0cy5cclxuICAgKi9cclxuICBhc3luYyBzYXZlQ29tbWVudHNEYXRhKCkge1xyXG4gICAgaWYgKHRoaXMuY3VycmVudFdvcmtzcGFjZSAmJiB0aGlzLmN1cnJlbnRXb3Jrc3BhY2UuY29tbWVudHNDaGFuZ2VzVW5zYXZlZCkge1xyXG4gICAgICB0aGlzLmNvbW1lbnRzQ2hhbmdlc1Vuc2F2ZWQgPSBmYWxzZTtcclxuICAgICAgdGhpcy5zYXZlQnRuLmNsYXNzTGlzdC5yZW1vdmUoJ2VuYWJsZWQnKTtcclxuICAgICAgdGhpcy5zYXZlQnRuLmNsYXNzTGlzdC5hZGQoJ3Byb2dyZXNzJyk7XHJcbiAgICAgIGxldCBzYXZpbmdTdWNjZXNzZnVsO1xyXG4gICAgICAvLyBDb2xsZWN0IHRoZSBkYXRhIHRvIHNhdmUgaW4gYmFja2VuZC5cclxuICAgICAgY29uc3QgZGF0YVRvU2F2ZTogT2JqZWN0W10gPSBbXTtcclxuICAgICAgdGhpcy5jdXJyZW50V29ya3NwYWNlLmNvbW1lbnRzLmZvckVhY2goY29tbWVudCA9PiB7XHJcbiAgICAgICAgZGF0YVRvU2F2ZS5wdXNoKHtcclxuICAgICAgICAgIGVsZW1lbnRzSWRzOiBjb21tZW50LmVsZW1lbnRzSWRzLFxyXG4gICAgICAgICAgY29udGVudDogY29tbWVudC5jb250ZW50LFxyXG4gICAgICAgICAgbWVudGlvbnM6IGNvbW1lbnQubWVudGlvbnNcclxuICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcbiAgICAgIGNvbnN0IGpzb25EYXRhVG9TYXZlID0gSlNPTi5zdHJpbmdpZnkoZGF0YVRvU2F2ZSk7XHJcbiAgICAgIC8vIElmIHRoZXJlIGlzIG5vIGlkIGZvciB0aGUgY29tbWVudHMuanNvbiBmaWxlIGNyZWF0ZSB0aGUgZmlsZSB3aXRoIHRoZSBjb250ZW50cyBhbmQgZ2V0IHRoZSBpZCBvZiBpdC5cclxuICAgICAgaWYgKCF0aGlzLmN1cnJlbnRXb3Jrc3BhY2UuY29tbWVudHNGaWxlSWQpIHtcclxuICAgICAgICBjb25zdCBjb21tZW50c0ZpbGVDcmVhdGlvblJlcyA9IGF3YWl0IEFQSS51cGxvYWRGaWxlKGpzb25EYXRhVG9TYXZlLCAnYXBwbGljYXRpb24vanNvbicsICdjb21tZW50cy5qc29uJywgdGhpcy5jdXJyZW50V29ya3NwYWNlLnByb2plY3RJZCk7XHJcbiAgICAgICAgaWYgKGNvbW1lbnRzRmlsZUNyZWF0aW9uUmVzLm9rICYmIGNvbW1lbnRzRmlsZUNyZWF0aW9uUmVzLnN0YXR1cyA9PT0gMjAwKSB7XHJcbiAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCBkZWNvZGVyID0gbmV3IFRleHREZWNvZGVyKCd1dGYtOCcpO1xyXG4gICAgICAgICAgICBsZXQgeyB2YWx1ZSwgZG9uZSB9ID0gYXdhaXQgY29tbWVudHNGaWxlQ3JlYXRpb25SZXMuYm9keS5nZXRSZWFkZXIoKS5yZWFkKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGlkID0gSlNPTi5wYXJzZShkZWNvZGVyLmRlY29kZSh2YWx1ZSkpLmlkO1xyXG4gICAgICAgICAgICAvLyBTZXQgdGhlIGlkIG9mIHRoZSBjb21tZW50cy5qc29uIGZpbGUgdGhhdCBoYXMgYmVlbiBjcmVhdGVkLlxyXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRXb3Jrc3BhY2UuY29tbWVudHNGaWxlSWQgPSBpZDtcclxuICAgICAgICAgICAgc2F2aW5nU3VjY2Vzc2Z1bCA9IHRydWU7XHJcbiAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ0Vycm9yIGRlY29kaW5nIHRoZSBuZXcgY29tbWVudHMuanNvbiBmaWxlIGlkOiAnLCBlcnIpOyAvLyBKU09OLnBhcnNlKGVyci5ib2R5KS5lcnJvci5tZXNzYWdlXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHNhdmluZ1N1Y2Nlc3NmdWwgPSBmYWxzZTtcclxuICAgICAgICAgIC8vIFRPRE86IERlbGV0ZSBleGlzdGluZyBjcmVhdGVkIGZpbGUvcyB3aXRoIG5hbWUgJ2NvbW1lbnRzLmpzb24nLCBpZiB0aGVyZSBpcyBubyBpZCB0aGVuIHVzZSB0aGUgbmFtZT9cclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy8gVXBkYXRlIHRoZSBleGlzdGluZyBjb21tZW50cy5qc29uIGZpbGUuXHJcbiAgICAgICAgY29uc3QgY29tbWVudHNGaWxlVXBkYXRlUmVzID0gYXdhaXQgQVBJLnVwZGF0ZUZpbGVDb250ZW50KGpzb25EYXRhVG9TYXZlLCAnYXBwbGljYXRpb24vanNvbicsIHRoaXMuY3VycmVudFdvcmtzcGFjZS5jb21tZW50c0ZpbGVJZCk7XHJcbiAgICAgICAgaWYgKGNvbW1lbnRzRmlsZVVwZGF0ZVJlcy5vayAmJiBjb21tZW50c0ZpbGVVcGRhdGVSZXMuc3RhdHVzID09PSAyMDApIHtcclxuICAgICAgICAgIHNhdmluZ1N1Y2Nlc3NmdWwgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICAvLyBJZiBzYXZpbmdTdWNjZXNzZnVsIHByb2NlZWQgd2l0aCB0aGUgbm90aWZpY2F0aW9ucyBpZiBhbnkuXHJcbiAgICAgIGlmIChzYXZpbmdTdWNjZXNzZnVsICYmIHRoaXMuY3VycmVudFdvcmtzcGFjZS5wZW5kaW5nTm90aWZpY2F0aW9uc1RvU2VuZC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgY29uc3Qgbm90aWZpY2F0aW9uc1Byb21pc2VzOiBQcm9taXNlPFJlc3BvbnNlPltdID0gW107XHJcbiAgICAgICAgdGhpcy5jdXJyZW50V29ya3NwYWNlLnBlbmRpbmdOb3RpZmljYXRpb25zVG9TZW5kLmZvckVhY2goKG46IE5vdGlmaWNhdGlvblRvU2VuZCkgPT4geyAvLyBUT0RPIGNoYW5nZSBhbnlcclxuICAgICAgICAgIGNvbnN0IG5vdGlmaWNhdGlvblByb21pc2UgPSBBUEkuc2VuZE5vdGlmaWNhdGlvbihuLmVtYWlscywgbi51c2VyTmFtZSwgbi51c2VyUGhvdG8sIG4udGV4dENvbnRlbnQsIG4ucHJvamVjdE5hbWUsIG4ucHJvamVjdElkKTtcclxuICAgICAgICAgIG5vdGlmaWNhdGlvbnNQcm9taXNlcy5wdXNoKG5vdGlmaWNhdGlvblByb21pc2UpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKG5vdGlmaWNhdGlvbnNQcm9taXNlcykudGhlbihyZXNwb25zZXMgPT4ge1xyXG4gICAgICAgICAgY29uc29sZS5sb2coJ1VzZXJzIG5vdGlmaWVkIHN1Y2Nlc3NmdWxseScpO1xyXG4gICAgICAgICAgdGhpcy5jdXJyZW50V29ya3NwYWNlLnBlbmRpbmdOb3RpZmljYXRpb25zVG9TZW5kLmxlbmd0aCA9IDA7XHJcbiAgICAgICAgICAvLyByZXNwb25zZXMuZm9yRWFjaChyZXMgPT4gY29uc29sZS5sb2cocmVzKSk7XHJcbiAgICAgICAgfSwgZXJyID0+IHtcclxuICAgICAgICAgIGNvbnNvbGUud2FybignVXNlcnMgY291bGRuXFwndCBiZSBub3RpZmllZC4gJywgZXJyKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoc2F2aW5nU3VjY2Vzc2Z1bCkge1xyXG4gICAgICAgIHRoaXMuc2F2ZUJ0bi5jbGFzc0xpc3QucmVtb3ZlKCdwcm9ncmVzcycpO1xyXG4gICAgICAgIHRoaXMuc2F2ZUJ0bi5jbGFzc0xpc3QuYWRkKCdkaXNhYmxlZCcpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdEYXRhIHNhdmVkIHN1Y2Nlc3NmdWxseS4nKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLmNvbW1lbnRzQ2hhbmdlc1Vuc2F2ZWQgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuc2F2ZUJ0bi5jbGFzc0xpc3QucmVtb3ZlKCdwcm9ncmVzcycpO1xyXG4gICAgICAgIHRoaXMuc2F2ZUJ0bi5jbGFzc0xpc3QuYWRkKCdlbmFibGVkJyk7XHJcbiAgICAgICAgdGhpcy5zaG93TWVzc2FnZSgnZXJyb3InLCBbJ1NvbWV0aGluZyB3ZW50IHdyb25nIGFuZCBkYXRhIGNvdWxkIG5vdCBiZSBzYXZlZC4nXSk7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignU29tZXRoaW5nIHdlbnQgd3JvbmcgdHJ5aW5nIHRvIHNhdmUuIFJldHJ5IGFnYWluLicpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuXHJcbiAgLyoqKioqKioqKioqKioqKioqKioqKioqKiBUSEUgUFJPSkVDVFMgTElTVCAqKioqKioqKioqKioqKioqKioqKioqKiovXHJcblxyXG4gIC8qKlxyXG4gICAqIFNlbGVjdHMgYSBwcm9qZWN0IGZyb20gdGhlIGxpc3QgYW5kIG1hbmFnZXMgaXRzIHJlc291cmNlcyBiZWZvcmUgb3BlbmluZyB0aGUgcHJvamVjdC5cclxuICAgKiBAcGFyYW0gZSBNb3VzZSBjbGljayBldmVudC5cclxuICAgKi9cclxuICBnb1RvUHJvamVjdChlOiBNb3VzZUV2ZW50KSB7XHJcbiAgICBjb25zdCBwcm9qZWN0SXRlbSA9IChlLnRhcmdldCBhcyBIVE1MRWxlbWVudCkuY2xvc2VzdCgnW2RhdGEtcHJvai1pZF0nKSBhcyBIVE1MRWxlbWVudDtcclxuICAgIGlmIChwcm9qZWN0SXRlbSA9PT0gbnVsbCkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICAvLyBJZiBpdCBpcyB0aGUgY3VycmVudCBwcm9qZWN0IGNsb3NlIHRoZSBsaXN0IHdpbmRvdy5cclxuICAgIGlmICh0aGlzLmN1cnJlbnRXb3Jrc3BhY2UgJiYgdGhpcy5jdXJyZW50V29ya3NwYWNlLnByb2plY3RJZCA9PT0gcHJvamVjdEl0ZW0uZGF0YXNldC5wcm9qSWQpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgLy8gVE9ETzogSWYgdGhlcmUgaGF2ZSBiZWVuIGNoYW5nZXMgaW4gdGhlIHByb2plY3QgYXNrIHRvIHNhdmUgb3IgZGlzY2FyZCB0aGVtIGJlZm9yZSBjbG9zaW5nIGl0LlxyXG4gICAgLy8gVE9ETzogSWYgaXQgd2FzIGFuIG9mZmxpbmUgcHJvamVjdCB0cnkgdG8gc3luYyBpdCBiZWZvcmUgY2xvc2luZyBpdC4gVGhlIGlkIHdvdWxkIGJlICd0ZW1wb3JhbCcgYW5kIHRoZSBjb250ZW50cyBpbiBjdXJyZW50UHJvamVjdFxyXG4gICAgaWYgKHRoaXMubGFzdFVwbG9hZGVkUHJvamVjdCAmJiBwcm9qZWN0SXRlbS5kYXRhc2V0LnByb2pJZCA9PT0gdGhpcy5sYXN0VXBsb2FkZWRQcm9qZWN0LmlkKSB7XHJcbiAgICAgIGlmICh0aGlzLmxhc3RVcGxvYWRlZFByb2plY3QuaWQgPT09ICd0ZW1wb3JhbCcpIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnU2hvdyBhIG1lc3NhZ2UgaW5kaWNhdGluZyB0aGF0IHRoZSBwcm9qZWN0IGNhbiBiZSBhY2Nlc3NlZCBidXQgaW4gdmlld2VyIG1vZGUgYmVjYXVzZSBpdCBjb3VsZG50IGJlIHNhdmVkLicpO1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMub3BlblByb2plY3QodGhpcy5sYXN0VXBsb2FkZWRQcm9qZWN0KTtcclxuICAgICAgaWYgKHRoaXMucHJldmlvdXNBY3RpdmVJdGVtKSB7XHJcbiAgICAgICAgdGhpcy5wcmV2aW91c0FjdGl2ZUl0ZW0uY2xhc3NMaXN0LnJlbW92ZSgnY3VycmVudCcpO1xyXG4gICAgICB9XHJcbiAgICAgIHByb2plY3RJdGVtLmNsYXNzTGlzdC5hZGQoJ2N1cnJlbnQnKTtcclxuICAgICAgdGhpcy5wcmV2aW91c0FjdGl2ZUl0ZW0gPSBwcm9qZWN0SXRlbTtcclxuICAgICAgdGhpcy5wcm9qZWN0c0xpc3RCdG4uc3R5bGUuZGlzcGxheSA9ICd1bnNldCc7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLnNob3dWaWV3cG9ydERpYWxvZygnbG9hZGVyJywgYExvYWRpbmcgcHJvamVjdCAke3Byb2plY3RJdGVtLmRhdGFzZXQubmFtZX1gKTtcclxuICAgICAgQVBJLmZldGNoUHJvamVjdChwcm9qZWN0SXRlbS5kYXRhc2V0LnByb2pJZCwgdGhpcylcclxuICAgICAgICAudGhlbihyZXMgPT4ge1xyXG4gICAgICAgICAgdGhpcy5vcGVuUHJvamVjdChyZXMpO1xyXG4gICAgICAgICAgaWYgKHRoaXMucHJldmlvdXNBY3RpdmVJdGVtKSB7XHJcbiAgICAgICAgICAgIHRoaXMucHJldmlvdXNBY3RpdmVJdGVtLmNsYXNzTGlzdC5yZW1vdmUoJ2N1cnJlbnQnKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHByb2plY3RJdGVtLmNsYXNzTGlzdC5hZGQoJ2N1cnJlbnQnKTtcclxuICAgICAgICAgIHRoaXMucHJldmlvdXNBY3RpdmVJdGVtID0gcHJvamVjdEl0ZW07XHJcbiAgICAgICAgICB0aGlzLnByb2plY3RzTGlzdEJ0bi5zdHlsZS5kaXNwbGF5ID0gJ3Vuc2V0JztcclxuICAgICAgICAgIHRoaXMuaGlkZVZpZXdwb3J0TWVzc2FnZSgpO1xyXG4gICAgICAgIH0sIGVyciA9PiB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ3JlYXRlcyBhIHdvcmtzcGFjZSB3aXRoIHRoZSBwcm92aWRlZCBwcm9qZWN0LlxyXG4gICAqL1xyXG4gIG9wZW5Qcm9qZWN0KHByb2plY3Q6IFByb2plY3REYXRhKSB7XHJcbiAgICBpZiAodGhpcy5jdXJyZW50V29ya3NwYWNlKSB7XHJcbiAgICAgIHRoaXMuY3VycmVudFdvcmtzcGFjZS5jbG9zZSgpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5jdXJyZW50V29ya3NwYWNlID0gbmV3IFdvcmtzcGFjZShwcm9qZWN0LCB0aGlzKTtcclxuICAgIHRoaXMucHJvamVjdHNMaXN0Q29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICBoaXN0b3J5LnJlcGxhY2VTdGF0ZSh7IHByb2plY3RUaXRsZTogcHJvamVjdC5uYW1lIH0sIHByb2plY3QubmFtZSwgXCI/aWQ9XCIgKyBwcm9qZWN0LmlkKTsgLy8gZW5jb2RlVVJJQ29tcG9uZW50ID8gdXNlIHB1c2hTdGF0ZSgpID9cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIENsb3NlcyB0aGUgcHJvamVjdHMgbGlzdCBhbmQgc2hvd3MgdGhlIGN1cnJlbnQgcHJvamVjdCB0b29sYmFyLlxyXG4gICAqIFNldHMgdGhlIHN0YXRlIG9mIHRoZSB1aSBhcyBwcm9qZWN0cyBsaXN0IGNsb3NlZC5cclxuICAgKi9cclxuICBjbG9zZVByb2plY3RzTGlzdCgpIHtcclxuICAgIHRoaXMucHJvamVjdHNMaXN0Q29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICB0aGlzLmRyYXdpbmdzQnRucy5zdHlsZS5kaXNwbGF5ID0gJ3Vuc2V0JztcclxuICAgIHRoaXMudG9vbGJhcnNDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdmbGV4JztcclxuICAgIHRoaXMucHJvamVjdHNMaXN0QnRuLmRhdGFzZXQub3BlbiA9ICdmYWxzZSc7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBPcGVucyB0aGUgbGlzdCBvZiBwcm9qZWN0cyBjb250YWluZXIgYW5kIGZldGNoZXMgcHJvamVjdHMgaWYgcmVxdWlyZWQuXHJcbiAgICogU2V0cyB0aGUgc3RhdGUgb2YgdGhlIHVpIGFzIHByb2plY3RzIGxpc3QgY2xvc2VkLlxyXG4gICAqL1xyXG4gIG9wZW5Qcm9qZWN0c0xpc3QoKSB7XHJcbiAgICBpZiAodGhpcy5jdXJyZW50V29ya3NwYWNlID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgdGhpcy5jbG9zZVByb2plY3RzTGlzdEJ0bi5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuY2xvc2VQcm9qZWN0c0xpc3RCdG4uY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XHJcbiAgICB9XHJcbiAgICB0aGlzLnByb2plY3RzTGlzdENvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcclxuICAgIHRoaXMucHJvamVjdHNMaXN0QnRuLmRhdGFzZXQub3BlbiA9ICd0cnVlJztcclxuICAgIC8vIEhpZGUgdGhlIGRyYXdpbmdzIGFuZCB0b29scyBidXR0b25zXHJcbiAgICB0aGlzLmRyYXdpbmdzQnRucy5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgdGhpcy50b29sYmFyc0NvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgLy8gSWYgdGhlcmUgaXMgbm8gcHJvamVjdHNEYXRhIG9yIGlmIHRoZXJlIGlzIG9ubHkgb25lIGZldGNoIHByb2plY3RzLlxyXG4gICAgaWYgKHRoaXMucHJvamVjdHNEYXRhID09PSB1bmRlZmluZWQgfHwgdGhpcy5wcm9qZWN0c0RhdGEubGVuZ3RoIDw9IDEpIHtcclxuICAgICAgdGhpcy5zaG93Vmlld3BvcnREaWFsb2coJ2xvYWRlcicsICdMb2FkaW5nIHByb2plY3RzJyk7XHJcbiAgICAgIEFQSS5saXN0UHJvamVjdEl0ZW1zKHRoaXMpLnRoZW4oKHJlczogUHJvamVjdERhdGFbXSkgPT4ge1xyXG4gICAgICAgIHRoaXMuY3JlYXRlSFRNTFByb2plY3RzTGlzdChyZXMpO1xyXG4gICAgICAgIC8vIFNldCB0aGUgJ2N1cnJlbnQnIGNsYXNzIGluIHRoZSBjdXJyZW50IHByb2plY3QuXHJcbiAgICAgICAgdGhpcy5wcm9qZWN0c0xpc3QuY2hpbGROb2Rlcy5mb3JFYWNoKChwcm9qOiBIVE1MRWxlbWVudCkgPT4ge1xyXG4gICAgICAgICAgaWYgKHByb2ouZGF0YXNldCAmJiBwcm9qLmRhdGFzZXQucHJvaklkID09PSB0aGlzLmN1cnJlbnRXb3Jrc3BhY2UucHJvamVjdElkKSB7XHJcbiAgICAgICAgICAgIHByb2ouY2xhc3NMaXN0LmFkZCgnY3VycmVudCcpO1xyXG4gICAgICAgICAgICB0aGlzLnByZXZpb3VzQWN0aXZlSXRlbSA9IHByb2o7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5oaWRlVmlld3BvcnRNZXNzYWdlKCk7XHJcbiAgICAgIH0sIHJlaiA9PiB7XHJcbiAgICAgICAgdGhpcy5wcm9qZWN0c0xpc3QuaW5uZXJIVE1MID0gJzxwIGNsYXNzPVwiZW1wdHktbXNnXCI+VGhlcmUgYXJlIG5vIHByb2plY3RzLiBVcGxvYWQgb25lITwvcD4nO1xyXG4gICAgICAgIHRoaXMuaGlkZVZpZXdwb3J0TWVzc2FnZSgpO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFJlY2VpdmVzIGFuIGFycmF5IG9mIHByb2plY3RzIGRhdGEgYW5kIGNyZWF0ZXMgYW5kIGFwcGVuZHMgdGhlIEhUTUwgaXRlbXMuXHJcbiAgICovXHJcbiAgY3JlYXRlSFRNTFByb2plY3RzTGlzdChwcm9qZWN0c0RhdGE6IFByb2plY3REYXRhW10pIHtcclxuICAgIHByb2plY3RzRGF0YS5mb3JFYWNoKHByb2pEYXRhID0+IHtcclxuICAgICAgY29uc3QgcHJvamVjdEl0ZW0gPSBuZXcgUHJvamVjdEl0ZW0ocHJvakRhdGEsIHRoaXMpO1xyXG4gICAgICB0aGlzLnByb2plY3RzTGlzdC5hcHBlbmRDaGlsZChwcm9qZWN0SXRlbS5IVE1MQ29udGFpbmVyKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5hZGp1c3RJdGVtcygpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQWRqdXN0cyB0aGUgcG9zaXRpb24gb2YgcHJvamVjdCBpdGVtcyBpbiB0aGUgY29udGFpbmVyLlxyXG4gICAqL1xyXG4gIGFkanVzdEl0ZW1zKCkge1xyXG4gICAgY29uc3QgaXRlbXNIID0gTnVtYmVyKGdldENvbXB1dGVkU3R5bGUodGhpcy5wcm9qZWN0c0xpc3QpLmdldFByb3BlcnR5VmFsdWUoJy0taXRlbXMtaCcpKTtcclxuICAgIGNvbnN0IGl0ZW1zVG90YWwgPSB0aGlzLnByb2plY3RzTGlzdC5jaGlsZHJlbi5sZW5ndGg7XHJcbiAgICB0aGlzLnByb2plY3RzTGlzdC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1yZW1haW5pbmctaXRlbXMnLCAoKE1hdGguY2VpbChpdGVtc1RvdGFsIC8gaXRlbXNIKSAqIGl0ZW1zSCkgLSBpdGVtc1RvdGFsKS50b1N0cmluZygpKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqICBBZGRzIGEgbmV3IEhUTUwgZWxlbWVudCBpdGVtIHRvIHRoZSBsaXN0IG9mIHByb2plY3RzLlxyXG4gICAqL1xyXG4gIHVwZGF0ZVByb2plY3RzTGlzdChwcm9qRGF0YTogUHJvamVjdERhdGEpIHtcclxuICAgIC8vIFJlbW92ZSB0aGUgJ25vIHByb2plY3RzIHlldCcgbWVzc2FnZSBpZiBpdCBpcyB0aGUgZmlyc3QuXHJcbiAgICBpZiAodGhpcy5wcm9qZWN0c0RhdGEubGVuZ3RoIDw9IDEpIHtcclxuICAgICAgdGhpcy5wcm9qZWN0c0xpc3QucXVlcnlTZWxlY3RvcignLmVtcHR5LW1zZycpLnJlbW92ZSgpO1xyXG4gICAgfVxyXG4gICAgY29uc3QgcHJvamVjdEl0ZW0gPSBuZXcgUHJvamVjdEl0ZW0ocHJvakRhdGEsIHRoaXMpO1xyXG4gICAgdGhpcy5wcm9qZWN0c0xpc3QucHJlcGVuZChwcm9qZWN0SXRlbS5IVE1MQ29udGFpbmVyKTtcclxuICAgIHRoaXMuYWRqdXN0SXRlbXMoKTtcclxuICB9XHJcblxyXG5cclxuICAvKioqKioqKioqKioqKioqKioqKioqKiogTUVTU0FHRSBDT05UQUlORVIgKioqKioqKioqKioqKioqKioqKioqKiovXHJcbiAgLypcclxuICAgKiBBIG1lc3NhZ2UgdGhhdCB3b3JrcyBhcyBhIGZlZWRiYWNrIGFuZCB0aGF0IGRvZXNudCBpbnRlcnJ1cHQuXHJcbiAgICovXHJcblxyXG4gIC8qKlxyXG4gICogRGlzYXBsYXlzIGZlZWRiYWNrIG1lc3NhZ2UuXHJcbiAgKiBAcGFyYW0gdHlwZSBVc2Uga2V5d29yZHMgJ3N1Y2Nlc3MnLCAnd2FybmluZycgb3IgJ2Vycm9yJyB0byBzcGVjaWZ5IHRoZSB0eXBlIG9mIG1lc3NhZ2UuXHJcbiAgKiBAcGFyYW0gbWVzc2FnZSBUaGUgYWN0dWFsIG1lc3NhZ2UgYXMgYW4gYXJyYXkgb2Ygc3RyaW5ncywgZWFjaCBpdGVtIGEgbmV3IGxpbmUuXHJcbiAgKiBAcGFyYW0gdGltZXIgT3B0aW9uYWwuIFRpbWUgKG1zKSBiZWZvcmUgaXQgYXV0b2Nsb3Nlcy5cclxuICAqL1xyXG4gIHNob3dNZXNzYWdlKHR5cGU6IHN0cmluZywgbWVzc2FnZTogc3RyaW5nW10sIHRpbWVyOiBudW1iZXIgPSB1bmRlZmluZWQpIHtcclxuICAgIC8vIElmIHRoZSBkYXRhLXR5cGUgYXR0ciBoYXMgdmFsdWUgaXMgYmVjYXVzZSB0aGUgbWVzc2FnZSBpcyBzdGlsbCBvcGVuLlxyXG4gICAgaWYgKHRoaXMubWVzc2FnZUNvbnRhaW5lci5kYXRhc2V0LnR5cGUgIT09ICcnKSB7XHJcbiAgICAgIHRoaXMubWVzc2FnZUNvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKHRoaXMubWVzc2FnZUNvbnRhaW5lci5kYXRhc2V0LnR5cGUpO1xyXG4gICAgICBpZiAodGhpcy5tZXNzYWdlVGltZXJJZCkge1xyXG4gICAgICAgIHdpbmRvdy5jbGVhclRpbWVvdXQodGhpcy5tZXNzYWdlVGltZXJJZCk7XHJcbiAgICAgICAgdGhpcy5tZXNzYWdlVGltZXJJZCA9IHVuZGVmaW5lZDtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5tZXNzYWdlQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7XHJcbiAgICB9XHJcbiAgICB0aGlzLm1lc3NhZ2VDb250YWluZXIuZGF0YXNldC50eXBlID0gdHlwZTtcclxuICAgIHRoaXMubWVzc2FnZUNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcubWVzc2FnZS1jb250ZW50JykuaW5uZXJIVE1MID0gbWVzc2FnZS5tYXAobSA9PiBgPHA+JHttfTwvcD5gKS5qb2luKCcnKTtcclxuICAgIHN3aXRjaCAodHlwZSkge1xyXG4gICAgICBjYXNlICdzdWNjZXNzJzpcclxuICAgICAgICB0aGlzLm1lc3NhZ2VDb250YWluZXIuY2xhc3NMaXN0LmFkZCgnc3VjY2VzcycpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlICd3YXJuaW5nJzpcclxuICAgICAgICB0aGlzLm1lc3NhZ2VDb250YWluZXIuY2xhc3NMaXN0LmFkZCgnd2FybmluZycpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlICdlcnJvcic6XHJcbiAgICAgICAgdGhpcy5tZXNzYWdlQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ2Vycm9yJyk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICB9XHJcbiAgICBpZiAodGltZXIpIHtcclxuICAgICAgdGhpcy5tZXNzYWdlVGltZXJJZCA9IHdpbmRvdy5zZXRUaW1lb3V0KCgpID0+IHRoaXMuY2xvc2VNZXNzYWdlKCksIHRpbWVyKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIENsb3NlcyB0aGUgbWVzc2FnZSBjb250YWluZXIgYW5kIHJlbW92ZXMgdGhlIGNsYXNzIHRoYXQgZ2l2ZXMgdGhlIHR5cGUgb2YgbWVzc2FnZSBzdHlsZS5cclxuICAgKi9cclxuICBjbG9zZU1lc3NhZ2UoKSB7XHJcbiAgICB0aGlzLm1lc3NhZ2VDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgIHRoaXMubWVzc2FnZUNvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKHRoaXMubWVzc2FnZUNvbnRhaW5lci5kYXRhc2V0LnR5cGUpO1xyXG4gICAgdGhpcy5tZXNzYWdlQ29udGFpbmVyLmRhdGFzZXQudHlwZSA9ICcnO1xyXG4gICAgaWYgKHRoaXMubWVzc2FnZVRpbWVySWQpIHtcclxuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMubWVzc2FnZVRpbWVySWQpO1xyXG4gICAgICB0aGlzLm1lc3NhZ2VUaW1lcklkID0gdW5kZWZpbmVkO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcblxyXG4gIC8qKioqKioqKioqKioqKioqKioqKioqKiBWSUVXUE9SVCBNRVNTQUdFUyAqKioqKioqKioqKioqKioqKioqKioqKi9cclxuICAvKlxyXG4gICAqIEEgbWVzc2FnZSBvbiB0aGUgbWlkZGxlIG9mIHRoZSB2aWV3cG9ydCB0aGF0IGludGVycnVwdHMuXHJcbiAgICovXHJcblxyXG4gIC8qKlxyXG4gICAqIE1hbmFnZXMgdGhlIGNyZWF0aW9uIG9mIGEgbWVzc2FnZSBvbiB0aGUgdmlld3BvcnQuXHJcbiAgICogQHBhcmFtIHR5cGUgSWYgJ2FjdGlvbicgYSBEaWFsb2dBY3Rpb25bXSB3aXRoIGF0IGxlYXN0IG9uZSBvYmplY3Qgc2hvdWxkIGJlIHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIHNob3dWaWV3cG9ydERpYWxvZyh0eXBlOiAnbG9hZGVyJyB8ICdtZXNzYWdlJyB8ICdhY3Rpb24nLCBtZXNzYWdlOiBzdHJpbmcsIGFjdGlvbnM6IERpYWxvZ0FjdGlvbltdID0gW10pIHtcclxuICAgIGlmICh0aGlzLnZpZXdwb3J0TWVzc2FnZS5xdWVyeVNlbGVjdG9yKCcuYnRucy1jb250YWluZXInKSkge1xyXG4gICAgICB0aGlzLnZpZXdwb3J0TWVzc2FnZS5xdWVyeVNlbGVjdG9yQWxsKCcuYnRucy1jb250YWluZXIgPiBidXR0b24nKS5mb3JFYWNoKChidG46IEhUTUxFbGVtZW50KSA9PiBidG4ub25jbGljayA9IG51bGwpO1xyXG4gICAgfVxyXG4gICAgR2VuZXJpY3MuZW1wdHlOb2RlKHRoaXMudmlld3BvcnRNZXNzYWdlKTtcclxuICAgIC8vIENyZWF0ZSB0aGUgbmV3IGNvbnRlbnQuXHJcbiAgICBjb25zdCBpbm5lckNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgaWYgKHR5cGUgPT09ICdsb2FkZXInKSB7XHJcbiAgICAgIGlubmVyQ29udGFpbmVyLmlubmVySFRNTCA9IGA8cD4ke21lc3NhZ2V9PC9wPjxzdmcgY2xhc3M9XCJzdmctbG9hZGVyXCI+PHVzZSBocmVmPVwiI3ZhTG9hZGVyXCIvPjwvc3ZnPmA7XHJcbiAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdhY3Rpb24nICYmIGFjdGlvbnMubGVuZ3RoID4gMCkge1xyXG4gICAgICBpbm5lckNvbnRhaW5lci5pbm5lckhUTUwgPSBgPHA+JHttZXNzYWdlfTwvcD5gO1xyXG4gICAgICBjb25zdCBidG5zQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgIGJ0bnNDb250YWluZXIuY2xhc3NMaXN0LmFkZCgnYnRucy1jb250YWluZXInKTtcclxuICAgICAgYWN0aW9ucy5mb3JFYWNoKGFjdGlvbiA9PiB7XHJcbiAgICAgICAgY29uc3QgYnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XHJcbiAgICAgICAgYnV0dG9uLmlubmVySFRNTCA9IGFjdGlvbi5uYW1lO1xyXG4gICAgICAgIGJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdidXR0b25CYXNlJywgJ2xpZ2h0Jyk7XHJcbiAgICAgICAgYnV0dG9uLm9uY2xpY2sgPSBhY3Rpb24uZnVuY3Rpb247XHJcbiAgICAgICAgYnRuc0NvbnRhaW5lci5hcHBlbmRDaGlsZChidXR0b24pO1xyXG4gICAgICB9KTtcclxuICAgICAgaW5uZXJDb250YWluZXIuYXBwZW5kQ2hpbGQoYnRuc0NvbnRhaW5lcik7XHJcbiAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdtZXNzYWdlJykgeyAvLyBJcyB0aGlzIG9uZSB1c2VmdWw/IE1heWJlIHdpdGggYSBzZXRUaW1lb3V0P1xyXG4gICAgICBpbm5lckNvbnRhaW5lci5pbm5lckhUTUwgPSAnPHA+JyArIG1lc3NhZ2UgKyAnPC9wPic7XHJcbiAgICB9XHJcbiAgICB0aGlzLnZpZXdwb3J0TWVzc2FnZS5hcHBlbmRDaGlsZChpbm5lckNvbnRhaW5lcik7XHJcbiAgICB0aGlzLnZpZXdwb3J0TWVzc2FnZS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEhpZGVzIHRoZSB2aWV3cG9ydCBtZXNzYWdlIGlmIHZpc2libGUuXHJcbiAgICovXHJcbiAgaGlkZVZpZXdwb3J0TWVzc2FnZSgpIHtcclxuICAgIHRoaXMudmlld3BvcnRNZXNzYWdlLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xyXG4gIH1cclxuXHJcblxyXG4gIC8qKioqKioqKioqKioqKioqKioqKiogTU9EQUwgRElBTE9HUyAqKioqKioqKioqKioqKioqKioqKiovXHJcbiAgLypcclxuICAgKiBBbGwgbW9kYWwgZGlhbG9nIGNvbnRlbnRzIGFyZSBzdG9yZWQgaW4gYSBjb250YWluZXIgYW5kIGZldGNoZWQgd2hlbiBuZWVkZWQuXHJcbiAgICovXHJcblxyXG4gIC8qKlxyXG4gICAqIFNob3dzIHRoZSBtb2RhbCBkaWFsb2cgcHJvdmlkZWQgZnJvbSB0aGUgc2FtZSBkb2N1bWVudC5cclxuICAgKiBAcGFyYW0gY29udGVudCBSZWZlcmVuY2UgdG8gdGhlIG91dGVyIEhUTUwgZWxlbWVudCBvZiB0aGUgZGlhbG9nLlxyXG4gICAqIEBwYXJhbSBiYWNrZ3JvdW5kIEl0IGNhbiBiZSAndHJhbnNsdWNlbnQnIG9yICdvcGFxdWUnLiBEZWZhdWx0IHZhbHVlIGlzICd0cmFuc2x1Y2VudCcuXHJcbiAgICogQHBhcmFtIGNsb3NhYmxlIFdoZWF0ZXIgdG8gc2hvdyBhIGJ1dHRvbiB0byBjbG9zZSBpdCBvciBub3QuIEJ5IGRlYWZ1bHQgaXQgaGFzIGEgYnV0dG9uLlxyXG4gICAqL1xyXG4gIHNob3dNb2RhbERpYWxvZyhjb250ZW50OiBIVE1MRWxlbWVudCwgYmFja2dyb3VuZCA9ICd0cmFuc2x1Y2VudCcsIGNsb3NhYmxlID0gdHJ1ZSkge1xyXG4gICAgdGhpcy5tb2RhbERpYWxvZ0NvbnRhaW5lci5jbGFzc0xpc3QudmFsdWUgPSAnJztcclxuICAgIGlmIChiYWNrZ3JvdW5kID09PSAndHJhbnNsdWNlbnQnKSB7XHJcbiAgICAgIHRoaXMubW9kYWxEaWFsb2dDb250YWluZXIuY2xhc3NMaXN0LmFkZCgnZ3JheVRyYW5zbHVjZW50Jyk7XHJcbiAgICB9IGVsc2UgaWYgKGJhY2tncm91bmQgPT09ICdvcGFxdWUnKSB7XHJcbiAgICAgIHRoaXMubW9kYWxEaWFsb2dDb250YWluZXIuY2xhc3NMaXN0LmFkZCgnbGlnaHRPcGFxdWUnKTtcclxuICAgIH1cclxuICAgIGlmIChjbG9zYWJsZSkge1xyXG4gICAgICB0aGlzLmNsb3NlTW9kYWxCdG4uc3R5bGUuZGlzcGxheSA9ICd1bnNldCc7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmNsb3NlTW9kYWxCdG4uc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgIH1cclxuICAgIHRoaXMubW9kYWxEaWFsb2dDb250ZW50LmFwcGVuZENoaWxkKGNvbnRlbnQpO1xyXG4gICAgdGhpcy5tb2RhbERpYWxvZ0NvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogSGlkZXMgdGhlIGN1cnJlbnQgbW9kYWwgZGlhbG9nLlxyXG4gICAqL1xyXG4gIGNsb3NlTW9kYWxEaWFsb2coKSB7XHJcbiAgICBjb25zdCBjb250ZW50ID0gdGhpcy5tb2RhbERpYWxvZ0NvbnRlbnQuZmlyc3RFbGVtZW50Q2hpbGQ7XHJcbiAgICB0aGlzLm1vZGFsRGlhbG9nQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICB0aGlzLm1vZGFsRGlhbG9nc1N0b3JhZ2UuYXBwZW5kQ2hpbGQoY29udGVudCk7XHJcbiAgfVxyXG5cclxuXHJcbiAgLyoqKioqKioqKioqKioqKioqKioqKiBTVEFSVCBUSEUgQVBQTElDQVRJT04gKioqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuICAvKipcclxuICAgKiBTdGFydHMgdGhlIGFwcCwgaWYgYSBwcm9qZWN0IGlkIGlzIHByb3ZpZGVkIGl0IHdpbGwgc3RhcnQgZnJvbSB0aGF0IHByb2plYyB2aWV3LlxyXG4gICAqIElmIG5vIHByb2plY3QgaWQgaXMgcHJvdmlkZWQgaXQgd2lsbCBzdGFydCBmcm9tIHRoZSBwcm9qZWN0cyBsaXN0IHZpZXcuXHJcbiAgICogVHdvIG9wdGlvbmFsIG5hbWVkIHBhcmFtZXRlcnMsIGlmIHByb2plY3RJZCBpcyBwcm92aWRlZCB0aGUgb3RoZXIgd2lsbCBiZSBpZ25vcmVkLlxyXG4gICAqL1xyXG4gIHN0YXJ0KHtwcm9qZWN0SWQgPSAnJywgbWFpbkZvbGRlcklkID0gJyd9ID0ge30pIHtcclxuICAgIC8vIFNob3cgdGhlIGFwcCBpbnRlcmZhY2UuXHJcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdoZWFkZXInKS5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignbWFpbicpLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xyXG4gICAgLy8gU3RhcnQgb3B0aW9ucyBkZXBlbmRpbmcgaWYgdGhlcmUgaXMgYSBwcm9qZWN0SWQuXHJcbiAgICBpZiAocHJvamVjdElkICE9PSAnJykge1xyXG4gICAgICB0aGlzLnNob3dWaWV3cG9ydERpYWxvZygnbG9hZGVyJywgJ0xvYWRpbmcgcHJvamVjdCcpO1xyXG4gICAgICBBUEkuZmV0Y2hQcm9qZWN0KHByb2plY3RJZCwgdGhpcylcclxuICAgICAgICAudGhlbihyZXMgPT4ge1xyXG4gICAgICAgICAgdGhpcy5jdXJyZW50V29ya3NwYWNlID0gbmV3IFdvcmtzcGFjZShyZXMsIHRoaXMpO1xyXG4gICAgICAgICAgdGhpcy5jcmVhdGVIVE1MUHJvamVjdHNMaXN0KFtyZXNdKTtcclxuICAgICAgICAgIHRoaXMucHJvamVjdHNMaXN0QnRuLnN0eWxlLmRpc3BsYXkgPSAndW5zZXQnO1xyXG4gICAgICAgICAgdGhpcy5oaWRlVmlld3BvcnRNZXNzYWdlKCk7XHJcbiAgICAgICAgICAvLyBJZiB0aGUgcHJvamVjdCBoYXMgY29sbGFib3JhdG9ycyBhc2tzIHRoZSBkZXZpY2UgdG9rZW5cclxuICAgICAgICAgIC8vIGluIGNhc2UgaXQgaXMgbmVlZGVkIHRvIHJlY2VpdmUgbm90aWZpY2F0aW9ucy5cclxuICAgICAgICAgIC8vIFRPRE86IElmIHRoaXMgcHJvamVjdCBkb2VzdCBoYXZlIGNvbGxhYm9yYXRvcnMgYnV0IG90aGVyIHllcyBJXHJcbiAgICAgICAgICAvLyB3b3VsZCBuZWVkIHRvIGtub3cgb3RoZXJ3aXNlIHRoZSBkZXZpY2UgdG9rZW4gd291bGQgbm90IGJlIGFza2VkLlxyXG4gICAgICAgICAgLy8gVE9ETzogQ2hlY2sgaWYgYW55IG9mIHRoZSBwcm9qZWN0IGZvbGRlcnMgaGFzIG1vcmUgdGhhbiBvbmUgcGVybWlzc2lvbi5cclxuICAgICAgICAgIGlmIChyZXMucGVybWlzc2lvbnMubGVuZ3RoID4gMSkge1xyXG4gICAgICAgICAgICB3aW5kb3cuc2F2ZU1lc3NhZ2luZ0RldmljZVRva2VuKCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSwgcmVqID0+IHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKHJlaik7XHJcbiAgICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSByZWouYm9keSA9PT0gdW5kZWZpbmVkID8gcmVqIDogYE1lc3NhZ2U6ICR7SlNPTi5wYXJzZShyZWouYm9keSkuZXJyb3IubWVzc2FnZX0gQ29kZTogJHtKU09OLnBhcnNlKHJlai5ib2R5KS5lcnJvci5jb2RlfWA7XHJcbiAgICAgICAgICB0aGlzLnNob3dWaWV3cG9ydERpYWxvZygnYWN0aW9uJywgZXJyb3JNZXNzYWdlLCBbXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICBuYW1lOiAnVmlldyBwcm9qZWN0cyBsaXN0JyxcclxuICAgICAgICAgICAgICBmdW5jdGlvbjogKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vcGVuUHJvamVjdHNMaXN0KCk7XHJcbiAgICAgICAgICAgICAgICBpZiAobG9jYXRpb24uc2VhcmNoICE9PSBcIlwiKSB7XHJcbiAgICAgICAgICAgICAgICAgIGhpc3RvcnkucmVwbGFjZVN0YXRlKHsgcGFnZTogJ1Byb2plY3RzIGxpc3QnIH0sICdQcm9qZWN0cyBsaXN0JywgbG9jYXRpb24uaHJlZi5yZXBsYWNlKGxvY2F0aW9uLnNlYXJjaCwgJycpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIF0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgLy8gRGVsZXRlIGFueSBpbnZhbGlkIHNlYXJjaCBwYXJhbWV0ZXIgaWYgYW55LlxyXG4gICAgICBpZiAobG9jYXRpb24uc2VhcmNoICE9PSBcIlwiKSB7XHJcbiAgICAgICAgaGlzdG9yeS5yZXBsYWNlU3RhdGUoeyBwYWdlOiAnUHJvamVjdHMgbGlzdCcgfSwgJ1Byb2plY3RzIGxpc3QnLCBsb2NhdGlvbi5ocmVmLnJlcGxhY2UobG9jYXRpb24uc2VhcmNoLCAnJykpO1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMucHJvamVjdHNMaXN0Q29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xyXG4gICAgICB0aGlzLnNob3dWaWV3cG9ydERpYWxvZygnbG9hZGVyJywgJ0xvYWRpbmcgcHJvamVjdHMnKTtcclxuICAgICAgLy8gVE9ETzogTGltaXQgdGhlIG51bWJlciBvZiBwcm9qZWN0cyB0byBsaXN0XHJcbiAgICAgIEFQSS5saXN0UHJvamVjdEl0ZW1zKHRoaXMsIG1haW5Gb2xkZXJJZCA/IG1haW5Gb2xkZXJJZCA6ICcnKS50aGVuKChyZXM6IFByb2plY3REYXRhW10pID0+IHtcclxuICAgICAgICB0aGlzLmNyZWF0ZUhUTUxQcm9qZWN0c0xpc3QocmVzKTtcclxuICAgICAgICB0aGlzLmhpZGVWaWV3cG9ydE1lc3NhZ2UoKTtcclxuICAgICAgICAvLyBDaGVja3MgaWYgYXQgbGVhc3Qgb25lIHByb2plY3QgaGFzIGNvbGxhYm9yYXRvcnMgYW5kIGlmIHNvIGFza3MgZm9yIHRoZVxyXG4gICAgICAgIC8vIGRldmljZSBtZXNzYWdpbmcgdG9rZW4gdGhhdCBjb3VsZCBiZSBuZWVkZWQgdG8gcmVjZWl2ZSBub3RpZmljYXRpb25zLlxyXG4gICAgICAgIGlmICh3aW5kb3cudGhlcmVJc01lc3NhZ2luZykge1xyXG4gICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKHJlc1tpXS5wZXJtaXNzaW9ucy5sZW5ndGggPiAxKSB7XHJcbiAgICAgICAgICAgICAgd2luZG93LnNhdmVNZXNzYWdpbmdEZXZpY2VUb2tlbigpO1xyXG4gICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9LCByZWogPT4ge1xyXG4gICAgICAgIHRoaXMucHJvamVjdHNMaXN0LmlubmVySFRNTCA9ICc8cCBjbGFzcz1cImVtcHR5LW1zZ1wiPlRoZXJlIGFyZSBubyBwcm9qZWN0cy4gVXBsb2FkIG9uZSE8L3A+JztcclxuICAgICAgICB0aGlzLmhpZGVWaWV3cG9ydE1lc3NhZ2UoKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG59IiwiaW1wb3J0IGZpcmViYXNlIGZyb20gJ0BmaXJlYmFzZS9hcHAnO1xuaW1wb3J0ICdAZmlyZWJhc2UvaW5zdGFsbGF0aW9ucyc7XG5pbXBvcnQgeyBfX2Fzc2lnbiwgX19hd2FpdGVyLCBfX2dlbmVyYXRvciB9IGZyb20gJ3RzbGliJztcbmltcG9ydCB7IEVycm9yRmFjdG9yeSB9IGZyb20gJ0BmaXJlYmFzZS91dGlsJztcbmltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gJ0BmaXJlYmFzZS9jb21wb25lbnQnO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxudmFyIEFOQUxZVElDU19JRF9GSUVMRCA9ICdtZWFzdXJlbWVudElkJztcclxuLy8gS2V5IHRvIGF0dGFjaCBGSUQgdG8gaW4gZ3RhZyBwYXJhbXMuXHJcbnZhciBHQV9GSURfS0VZID0gJ2ZpcmViYXNlX2lkJztcclxudmFyIE9SSUdJTl9LRVkgPSAnb3JpZ2luJztcclxudmFyIEdUQUdfVVJMID0gJ2h0dHBzOi8vd3d3Lmdvb2dsZXRhZ21hbmFnZXIuY29tL2d0YWcvanMnO1xyXG52YXIgR3RhZ0NvbW1hbmQ7XHJcbihmdW5jdGlvbiAoR3RhZ0NvbW1hbmQpIHtcclxuICAgIEd0YWdDb21tYW5kW1wiRVZFTlRcIl0gPSBcImV2ZW50XCI7XHJcbiAgICBHdGFnQ29tbWFuZFtcIlNFVFwiXSA9IFwic2V0XCI7XHJcbiAgICBHdGFnQ29tbWFuZFtcIkNPTkZJR1wiXSA9IFwiY29uZmlnXCI7XHJcbn0pKEd0YWdDb21tYW5kIHx8IChHdGFnQ29tbWFuZCA9IHt9KSk7XHJcbi8qXHJcbiAqIE9mZmljaWFsbHkgcmVjb21tZW5kZWQgZXZlbnQgbmFtZXMgZm9yIGd0YWcuanNcclxuICogQW55IG90aGVyIHN0cmluZyBpcyBhbHNvIGFsbG93ZWQuXHJcbiAqL1xyXG52YXIgRXZlbnROYW1lO1xyXG4oZnVuY3Rpb24gKEV2ZW50TmFtZSkge1xyXG4gICAgRXZlbnROYW1lW1wiQUREX1BBWU1FTlRfSU5GT1wiXSA9IFwiYWRkX3BheW1lbnRfaW5mb1wiO1xyXG4gICAgRXZlbnROYW1lW1wiQUREX1RPX0NBUlRcIl0gPSBcImFkZF90b19jYXJ0XCI7XHJcbiAgICBFdmVudE5hbWVbXCJBRERfVE9fV0lTSExJU1RcIl0gPSBcImFkZF90b193aXNobGlzdFwiO1xyXG4gICAgRXZlbnROYW1lW1wiQkVHSU5fQ0hFQ0tPVVRcIl0gPSBcImJlZ2luX2NoZWNrb3V0XCI7XHJcbiAgICBFdmVudE5hbWVbXCJDSEVDS09VVF9QUk9HUkVTU1wiXSA9IFwiY2hlY2tvdXRfcHJvZ3Jlc3NcIjtcclxuICAgIEV2ZW50TmFtZVtcIkVYQ0VQVElPTlwiXSA9IFwiZXhjZXB0aW9uXCI7XHJcbiAgICBFdmVudE5hbWVbXCJHRU5FUkFURV9MRUFEXCJdID0gXCJnZW5lcmF0ZV9sZWFkXCI7XHJcbiAgICBFdmVudE5hbWVbXCJMT0dJTlwiXSA9IFwibG9naW5cIjtcclxuICAgIEV2ZW50TmFtZVtcIlBBR0VfVklFV1wiXSA9IFwicGFnZV92aWV3XCI7XHJcbiAgICBFdmVudE5hbWVbXCJQVVJDSEFTRVwiXSA9IFwicHVyY2hhc2VcIjtcclxuICAgIEV2ZW50TmFtZVtcIlJFRlVORFwiXSA9IFwicmVmdW5kXCI7XHJcbiAgICBFdmVudE5hbWVbXCJSRU1PVkVfRlJPTV9DQVJUXCJdID0gXCJyZW1vdmVfZnJvbV9jYXJ0XCI7XHJcbiAgICBFdmVudE5hbWVbXCJTQ1JFRU5fVklFV1wiXSA9IFwic2NyZWVuX3ZpZXdcIjtcclxuICAgIEV2ZW50TmFtZVtcIlNFQVJDSFwiXSA9IFwic2VhcmNoXCI7XHJcbiAgICBFdmVudE5hbWVbXCJTRUxFQ1RfQ09OVEVOVFwiXSA9IFwic2VsZWN0X2NvbnRlbnRcIjtcclxuICAgIEV2ZW50TmFtZVtcIlNFVF9DSEVDS09VVF9PUFRJT05cIl0gPSBcInNldF9jaGVja291dF9vcHRpb25cIjtcclxuICAgIEV2ZW50TmFtZVtcIlNIQVJFXCJdID0gXCJzaGFyZVwiO1xyXG4gICAgRXZlbnROYW1lW1wiU0lHTl9VUFwiXSA9IFwic2lnbl91cFwiO1xyXG4gICAgRXZlbnROYW1lW1wiVElNSU5HX0NPTVBMRVRFXCJdID0gXCJ0aW1pbmdfY29tcGxldGVcIjtcclxuICAgIEV2ZW50TmFtZVtcIlZJRVdfSVRFTVwiXSA9IFwidmlld19pdGVtXCI7XHJcbiAgICBFdmVudE5hbWVbXCJWSUVXX0lURU1fTElTVFwiXSA9IFwidmlld19pdGVtX2xpc3RcIjtcclxuICAgIEV2ZW50TmFtZVtcIlZJRVdfUFJPTU9USU9OXCJdID0gXCJ2aWV3X3Byb21vdGlvblwiO1xyXG4gICAgRXZlbnROYW1lW1wiVklFV19TRUFSQ0hfUkVTVUxUU1wiXSA9IFwidmlld19zZWFyY2hfcmVzdWx0c1wiO1xyXG59KShFdmVudE5hbWUgfHwgKEV2ZW50TmFtZSA9IHt9KSk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogTG9ncyBhbiBhbmFseXRpY3MgZXZlbnQgdGhyb3VnaCB0aGUgRmlyZWJhc2UgU0RLLlxyXG4gKlxyXG4gKiBAcGFyYW0gZ3RhZ0Z1bmN0aW9uIFdyYXBwZWQgZ3RhZyBmdW5jdGlvbiB0aGF0IHdhaXRzIGZvciBmaWQgdG8gYmUgc2V0IGJlZm9yZSBzZW5kaW5nIGFuIGV2ZW50XHJcbiAqIEBwYXJhbSBldmVudE5hbWUgR29vZ2xlIEFuYWx5dGljcyBldmVudCBuYW1lLCBjaG9vc2UgZnJvbSBzdGFuZGFyZCBsaXN0IG9yIHVzZSBhIGN1c3RvbSBzdHJpbmcuXHJcbiAqIEBwYXJhbSBldmVudFBhcmFtcyBBbmFseXRpY3MgZXZlbnQgcGFyYW1ldGVycy5cclxuICovXHJcbmZ1bmN0aW9uIGxvZ0V2ZW50KGd0YWdGdW5jdGlvbiwgYW5hbHl0aWNzSWQsIGV2ZW50TmFtZSwgZXZlbnRQYXJhbXMsIG9wdGlvbnMpIHtcclxuICAgIHZhciBwYXJhbXMgPSBldmVudFBhcmFtcyB8fCB7fTtcclxuICAgIGlmICghb3B0aW9ucyB8fCAhb3B0aW9ucy5nbG9iYWwpIHtcclxuICAgICAgICBwYXJhbXMgPSBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgZXZlbnRQYXJhbXMpLCB7ICdzZW5kX3RvJzogYW5hbHl0aWNzSWQgfSk7XHJcbiAgICB9XHJcbiAgICAvLyBXb3JrYXJvdW5kIGZvciBodHRwOi8vYi8xNDEzNzA0NDkgLSB0aGlyZCBhcmd1bWVudCBjYW5ub3QgYmUgdW5kZWZpbmVkLlxyXG4gICAgZ3RhZ0Z1bmN0aW9uKEd0YWdDb21tYW5kLkVWRU5ULCBldmVudE5hbWUsIHBhcmFtcyB8fCB7fSk7XHJcbn1cclxuLy8gVE9ETzogQnJhZCBpcyBnb2luZyB0byBhZGQgYHNjcmVlbl9uYW1lYCB0byBHQSBHb2xkIGNvbmZpZyBwYXJhbWV0ZXIgc2NoZW1hXHJcbi8qKlxyXG4gKiBTZXQgc2NyZWVuX25hbWUgcGFyYW1ldGVyIGZvciB0aGlzIEdvb2dsZSBBbmFseXRpY3MgSUQuXHJcbiAqXHJcbiAqIEBwYXJhbSBndGFnRnVuY3Rpb24gV3JhcHBlZCBndGFnIGZ1bmN0aW9uIHRoYXQgd2FpdHMgZm9yIGZpZCB0byBiZSBzZXQgYmVmb3JlIHNlbmRpbmcgYW4gZXZlbnRcclxuICogQHBhcmFtIHNjcmVlbk5hbWUgU2NyZWVuIG5hbWUgc3RyaW5nIHRvIHNldC5cclxuICovXHJcbmZ1bmN0aW9uIHNldEN1cnJlbnRTY3JlZW4oZ3RhZ0Z1bmN0aW9uLCBhbmFseXRpY3NJZCwgc2NyZWVuTmFtZSwgb3B0aW9ucykge1xyXG4gICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5nbG9iYWwpIHtcclxuICAgICAgICBndGFnRnVuY3Rpb24oR3RhZ0NvbW1hbmQuU0VULCB7ICdzY3JlZW5fbmFtZSc6IHNjcmVlbk5hbWUgfSk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICBndGFnRnVuY3Rpb24oR3RhZ0NvbW1hbmQuQ09ORklHLCBhbmFseXRpY3NJZCwge1xyXG4gICAgICAgICAgICB1cGRhdGU6IHRydWUsXHJcbiAgICAgICAgICAgICdzY3JlZW5fbmFtZSc6IHNjcmVlbk5hbWVcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogU2V0IHVzZXJfaWQgcGFyYW1ldGVyIGZvciB0aGlzIEdvb2dsZSBBbmFseXRpY3MgSUQuXHJcbiAqXHJcbiAqIEBwYXJhbSBndGFnRnVuY3Rpb24gV3JhcHBlZCBndGFnIGZ1bmN0aW9uIHRoYXQgd2FpdHMgZm9yIGZpZCB0byBiZSBzZXQgYmVmb3JlIHNlbmRpbmcgYW4gZXZlbnRcclxuICogQHBhcmFtIGlkIFVzZXIgSUQgc3RyaW5nIHRvIHNldFxyXG4gKi9cclxuZnVuY3Rpb24gc2V0VXNlcklkKGd0YWdGdW5jdGlvbiwgYW5hbHl0aWNzSWQsIGlkLCBvcHRpb25zKSB7XHJcbiAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLmdsb2JhbCkge1xyXG4gICAgICAgIGd0YWdGdW5jdGlvbihHdGFnQ29tbWFuZC5TRVQsIHsgJ3VzZXJfaWQnOiBpZCB9KTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIGd0YWdGdW5jdGlvbihHdGFnQ29tbWFuZC5DT05GSUcsIGFuYWx5dGljc0lkLCB7XHJcbiAgICAgICAgICAgIHVwZGF0ZTogdHJ1ZSxcclxuICAgICAgICAgICAgJ3VzZXJfaWQnOiBpZFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBTZXQgYWxsIG90aGVyIHVzZXIgcHJvcGVydGllcyBvdGhlciB0aGFuIHVzZXJfaWQgYW5kIHNjcmVlbl9uYW1lLlxyXG4gKlxyXG4gKiBAcGFyYW0gZ3RhZ0Z1bmN0aW9uIFdyYXBwZWQgZ3RhZyBmdW5jdGlvbiB0aGF0IHdhaXRzIGZvciBmaWQgdG8gYmUgc2V0IGJlZm9yZSBzZW5kaW5nIGFuIGV2ZW50XHJcbiAqIEBwYXJhbSBwcm9wZXJ0aWVzIE1hcCBvZiB1c2VyIHByb3BlcnRpZXMgdG8gc2V0XHJcbiAqL1xyXG5mdW5jdGlvbiBzZXRVc2VyUHJvcGVydGllcyhndGFnRnVuY3Rpb24sIGFuYWx5dGljc0lkLCBwcm9wZXJ0aWVzLCBvcHRpb25zKSB7XHJcbiAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLmdsb2JhbCkge1xyXG4gICAgICAgIHZhciBmbGF0UHJvcGVydGllcyA9IHt9O1xyXG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBPYmplY3Qua2V5cyhwcm9wZXJ0aWVzKTsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgdmFyIGtleSA9IF9hW19pXTtcclxuICAgICAgICAgICAgLy8gdXNlIGRvdCBub3RhdGlvbiBmb3IgbWVyZ2UgYmVoYXZpb3IgaW4gZ3RhZy5qc1xyXG4gICAgICAgICAgICBmbGF0UHJvcGVydGllc1tcInVzZXJfcHJvcGVydGllcy5cIiArIGtleV0gPSBwcm9wZXJ0aWVzW2tleV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGd0YWdGdW5jdGlvbihHdGFnQ29tbWFuZC5TRVQsIGZsYXRQcm9wZXJ0aWVzKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIGd0YWdGdW5jdGlvbihHdGFnQ29tbWFuZC5DT05GSUcsIGFuYWx5dGljc0lkLCB7XHJcbiAgICAgICAgICAgIHVwZGF0ZTogdHJ1ZSxcclxuICAgICAgICAgICAgJ3VzZXJfcHJvcGVydGllcyc6IHByb3BlcnRpZXNcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogU2V0IHdoZXRoZXIgY29sbGVjdGlvbiBpcyBlbmFibGVkIGZvciB0aGlzIElELlxyXG4gKlxyXG4gKiBAcGFyYW0gZW5hYmxlZCBJZiB0cnVlLCBjb2xsZWN0aW9uIGlzIGVuYWJsZWQgZm9yIHRoaXMgSUQuXHJcbiAqL1xyXG5mdW5jdGlvbiBzZXRBbmFseXRpY3NDb2xsZWN0aW9uRW5hYmxlZChhbmFseXRpY3NJZCwgZW5hYmxlZCkge1xyXG4gICAgd2luZG93W1wiZ2EtZGlzYWJsZS1cIiArIGFuYWx5dGljc0lkXSA9ICFlbmFibGVkO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogSW5pdGlhbGl6ZSB0aGUgYW5hbHl0aWNzIGluc3RhbmNlIGluIGd0YWcuanMgYnkgY2FsbGluZyBjb25maWcgY29tbWFuZCB3aXRoIGZpZC5cclxuICpcclxuICogTk9URTogV2UgY29tYmluZSBhbmFseXRpY3MgaW5pdGlhbGl6YXRpb24gYW5kIHNldHRpbmcgZmlkIHRvZ2V0aGVyIGJlY2F1c2Ugd2Ugd2FudCBmaWQgdG8gYmVcclxuICogcGFydCBvZiB0aGUgYHBhZ2Vfdmlld2AgZXZlbnQgdGhhdCdzIHNlbnQgZHVyaW5nIHRoZSBpbml0aWFsaXphdGlvblxyXG4gKiBAcGFyYW0gYXBwIEZpcmViYXNlIGFwcFxyXG4gKiBAcGFyYW0gZ3RhZ0NvcmUgVGhlIGd0YWcgZnVuY3Rpb24gdGhhdCdzIG5vdCB3cmFwcGVkLlxyXG4gKi9cclxuZnVuY3Rpb24gaW5pdGlhbGl6ZUdBSWQoYXBwLCBpbnN0YWxsYXRpb25zLCBndGFnQ29yZSkge1xyXG4gICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBmaWQ7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2IpIHtcclxuICAgICAgICAgICAgc3dpdGNoIChfYi5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAwOiByZXR1cm4gWzQgLyp5aWVsZCovLCBpbnN0YWxsYXRpb25zLmdldElkKCldO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgIGZpZCA9IF9iLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBUaGlzIGNvbW1hbmQgaW5pdGlhbGl6ZXMgZ3RhZy5qcyBhbmQgb25seSBuZWVkcyB0byBiZSBjYWxsZWQgb25jZSBmb3IgdGhlIGVudGlyZSB3ZWIgYXBwLFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGJ1dCBzaW5jZSBpdCBpcyBpZGVtcG90ZW50LCB3ZSBjYW4gY2FsbCBpdCBtdWx0aXBsZSB0aW1lcy5cclxuICAgICAgICAgICAgICAgICAgICAvLyBXZSBrZWVwIGl0IHRvZ2V0aGVyIHdpdGggb3RoZXIgaW5pdGlhbGl6YXRpb24gbG9naWMgZm9yIGJldHRlciBjb2RlIHN0cnVjdHVyZS5cclxuICAgICAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG4gICAgICAgICAgICAgICAgICAgIGd0YWdDb3JlKCdqcycsIG5ldyBEYXRlKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIEl0IHNob3VsZCBiZSB0aGUgZmlyc3QgY29uZmlnIGNvbW1hbmQgY2FsbGVkIG9uIHRoaXMgR0EtSURcclxuICAgICAgICAgICAgICAgICAgICAvLyBJbml0aWFsaXplIHRoaXMgR0EtSUQgYW5kIHNldCBGSUQgb24gaXQgdXNpbmcgdGhlIGd0YWcgY29uZmlnIEFQSS5cclxuICAgICAgICAgICAgICAgICAgICBndGFnQ29yZShHdGFnQ29tbWFuZC5DT05GSUcsIGFwcC5vcHRpb25zW0FOQUxZVElDU19JRF9GSUVMRF0sIChfYSA9IHt9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYVtHQV9GSURfS0VZXSA9IGZpZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZ3VhcmQgYWdhaW5zdCBkZXZlbG9wZXJzIGFjY2lkZW50YWxseSBzZXR0aW5nIHByb3BlcnRpZXMgd2l0aCBwcmVmaXggYGZpcmViYXNlX2BcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2FbT1JJR0lOX0tFWV0gPSAnZmlyZWJhc2UnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS51cGRhdGUgPSB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn1cclxuZnVuY3Rpb24gaW5zZXJ0U2NyaXB0VGFnKGRhdGFMYXllck5hbWUpIHtcclxuICAgIHZhciBzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcclxuICAgIC8vIFdlIGFyZSBub3QgcHJvdmlkaW5nIGFuIGFuYWx5dGljc0lkIGluIHRoZSBVUkwgYmVjYXVzZSBpdCB3b3VsZCB0cmlnZ2VyIGEgYHBhZ2Vfdmlld2BcclxuICAgIC8vIHdpdGhvdXQgZmlkLiBXZSB3aWxsIGluaXRpYWxpemUgZ2EtaWQgdXNpbmcgZ3RhZyAoY29uZmlnKSBjb21tYW5kIHRvZ2V0aGVyIHdpdGggZmlkLlxyXG4gICAgc2NyaXB0LnNyYyA9IEdUQUdfVVJMICsgXCI/bD1cIiArIGRhdGFMYXllck5hbWU7XHJcbiAgICBzY3JpcHQuYXN5bmMgPSB0cnVlO1xyXG4gICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzY3JpcHQpO1xyXG59XHJcbi8qKiBHZXQgcmVmZXJlbmNlIHRvLCBvciBjcmVhdGUsIGdsb2JhbCBkYXRhbGF5ZXIuXHJcbiAqIEBwYXJhbSBkYXRhTGF5ZXJOYW1lIE5hbWUgb2YgZGF0YWxheWVyIChtb3N0IG9mdGVuIHRoZSBkZWZhdWx0LCBcIl9kYXRhTGF5ZXJcIilcclxuICovXHJcbmZ1bmN0aW9uIGdldE9yQ3JlYXRlRGF0YUxheWVyKGRhdGFMYXllck5hbWUpIHtcclxuICAgIC8vIENoZWNrIGZvciBleGlzdGluZyBkYXRhTGF5ZXIgYW5kIGNyZWF0ZSBpZiBuZWVkZWQuXHJcbiAgICB2YXIgZGF0YUxheWVyID0gW107XHJcbiAgICBpZiAoQXJyYXkuaXNBcnJheSh3aW5kb3dbZGF0YUxheWVyTmFtZV0pKSB7XHJcbiAgICAgICAgZGF0YUxheWVyID0gd2luZG93W2RhdGFMYXllck5hbWVdO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgd2luZG93W2RhdGFMYXllck5hbWVdID0gZGF0YUxheWVyO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGRhdGFMYXllcjtcclxufVxyXG4vKipcclxuICogV3JhcHMgYSBzdGFuZGFyZCBndGFnIGZ1bmN0aW9uIHdpdGggZXh0cmEgY29kZSB0byB3YWl0IGZvciBjb21wbGV0aW9uIG9mXHJcbiAqIHJlbGV2YW50IGluaXRpYWxpemF0aW9uIHByb21pc2VzIGJlZm9yZSBzZW5kaW5nIHJlcXVlc3RzLlxyXG4gKlxyXG4gKiBAcGFyYW0gZ3RhZ0NvcmUgQmFzaWMgZ3RhZyBmdW5jdGlvbiB0aGF0IGp1c3QgYXBwZW5kcyB0byBkYXRhTGF5ZXJcclxuICogQHBhcmFtIGluaXRpYWxpemVkSWRQcm9taXNlc01hcCBNYXAgb2YgZ2FJZHMgdG8gdGhlaXIgaW5pdGlhbGl6YXRpb24gcHJvbWlzZXNcclxuICovXHJcbmZ1bmN0aW9uIHdyYXBHdGFnKGd0YWdDb3JlLCBpbml0aWFsaXplZElkUHJvbWlzZXNNYXApIHtcclxuICAgIHJldHVybiBmdW5jdGlvbiAoY29tbWFuZCwgaWRPck5hbWVPclBhcmFtcywgZ3RhZ1BhcmFtcykge1xyXG4gICAgICAgIC8vIElmIGV2ZW50LCBjaGVjayB0aGF0IHJlbGV2YW50IGluaXRpYWxpemF0aW9uIHByb21pc2VzIGhhdmUgY29tcGxldGVkLlxyXG4gICAgICAgIGlmIChjb21tYW5kID09PSBHdGFnQ29tbWFuZC5FVkVOVCkge1xyXG4gICAgICAgICAgICB2YXIgaW5pdGlhbGl6YXRpb25Qcm9taXNlc1RvV2FpdEZvciA9IFtdO1xyXG4gICAgICAgICAgICAvLyBJZiB0aGVyZSdzIGEgJ3NlbmRfdG8nIHBhcmFtLCBjaGVjayBpZiBhbnkgSUQgc3BlY2lmaWVkIG1hdGNoZXNcclxuICAgICAgICAgICAgLy8gYSBGSUQgd2UgaGF2ZSBiZWd1biBhIGZldGNoIG9uLlxyXG4gICAgICAgICAgICBpZiAoZ3RhZ1BhcmFtcyAmJiBndGFnUGFyYW1zWydzZW5kX3RvJ10pIHtcclxuICAgICAgICAgICAgICAgIHZhciBnYVNlbmRUb0xpc3QgPSBndGFnUGFyYW1zWydzZW5kX3RvJ107XHJcbiAgICAgICAgICAgICAgICAvLyBNYWtlIGl0IGFuIGFycmF5IGlmIGlzIGlzbid0LCBzbyBpdCBjYW4gYmUgZGVhbHQgd2l0aCB0aGUgc2FtZSB3YXkuXHJcbiAgICAgICAgICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkoZ2FTZW5kVG9MaXN0KSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGdhU2VuZFRvTGlzdCA9IFtnYVNlbmRUb0xpc3RdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBnYVNlbmRUb0xpc3RfMSA9IGdhU2VuZFRvTGlzdDsgX2kgPCBnYVNlbmRUb0xpc3RfMS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgc2VuZFRvSWQgPSBnYVNlbmRUb0xpc3RfMVtfaV07XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGluaXRpYWxpemF0aW9uUHJvbWlzZSA9IGluaXRpYWxpemVkSWRQcm9taXNlc01hcFtzZW5kVG9JZF07XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gR3JvdXBzIHdpbGwgbm90IGJlIGluIHRoZSBtYXAuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGluaXRpYWxpemF0aW9uUHJvbWlzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbml0aWFsaXphdGlvblByb21pc2VzVG9XYWl0Rm9yLnB1c2goaW5pdGlhbGl6YXRpb25Qcm9taXNlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoZXJlIGlzIGFuIGl0ZW0gaW4gJ3NlbmRfdG8nIHRoYXQgaXMgbm90IGFzc29jaWF0ZWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZGlyZWN0bHkgd2l0aCBhbiBGSUQsIHBvc3NpYmx5IGEgZ3JvdXAuICBFbXB0eSB0aGlzIGFycmF5XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFuZCBsZXQgaXQgZ2V0IHBvcHVsYXRlZCBiZWxvdy5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5pdGlhbGl6YXRpb25Qcm9taXNlc1RvV2FpdEZvciA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gVGhpcyB3aWxsIGJlIHVucG9wdWxhdGVkIGlmIHRoZXJlIHdhcyBubyAnc2VuZF90bycgZmllbGQgLCBvclxyXG4gICAgICAgICAgICAvLyBpZiBub3QgYWxsIGVudHJpZXMgaW4gdGhlICdzZW5kX3RvJyBmaWVsZCBjb3VsZCBiZSBtYXBwZWQgdG9cclxuICAgICAgICAgICAgLy8gYSBGSUQuIEluIHRoZXNlIGNhc2VzLCB3YWl0IG9uIGFsbCBwZW5kaW5nIGluaXRpYWxpemF0aW9uIHByb21pc2VzLlxyXG4gICAgICAgICAgICBpZiAoaW5pdGlhbGl6YXRpb25Qcm9taXNlc1RvV2FpdEZvci5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIF9hID0gMCwgX2IgPSBPYmplY3QudmFsdWVzKGluaXRpYWxpemVkSWRQcm9taXNlc01hcCk7IF9hIDwgX2IubGVuZ3RoOyBfYSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGlkUHJvbWlzZSA9IF9iW19hXTtcclxuICAgICAgICAgICAgICAgICAgICBpbml0aWFsaXphdGlvblByb21pc2VzVG9XYWl0Rm9yLnB1c2goaWRQcm9taXNlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBSdW4gY29yZSBndGFnIGZ1bmN0aW9uIHdpdGggYXJncyBhZnRlciBhbGwgcmVsZXZhbnQgaW5pdGlhbGl6YXRpb25cclxuICAgICAgICAgICAgLy8gcHJvbWlzZXMgaGF2ZSBiZWVuIHJlc29sdmVkLlxyXG4gICAgICAgICAgICBQcm9taXNlLmFsbChpbml0aWFsaXphdGlvblByb21pc2VzVG9XYWl0Rm9yKVxyXG4gICAgICAgICAgICAgICAgLy8gV29ya2Fyb3VuZCBmb3IgaHR0cDovL2IvMTQxMzcwNDQ5IC0gdGhpcmQgYXJndW1lbnQgY2Fubm90IGJlIHVuZGVmaW5lZC5cclxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBndGFnQ29yZShHdGFnQ29tbWFuZC5FVkVOVCwgaWRPck5hbWVPclBhcmFtcywgZ3RhZ1BhcmFtcyB8fCB7fSk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKGUpIHsgcmV0dXJuIGNvbnNvbGUuZXJyb3IoZSk7IH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChjb21tYW5kID09PSBHdGFnQ29tbWFuZC5DT05GSUcpIHtcclxuICAgICAgICAgICAgdmFyIGluaXRpYWxpemF0aW9uUHJvbWlzZVRvV2FpdCA9IGluaXRpYWxpemVkSWRQcm9taXNlc01hcFtpZE9yTmFtZU9yUGFyYW1zXSB8fFxyXG4gICAgICAgICAgICAgICAgUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICAgICAgICAgIGluaXRpYWxpemF0aW9uUHJvbWlzZVRvV2FpdFxyXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgZ3RhZ0NvcmUoR3RhZ0NvbW1hbmQuQ09ORklHLCBpZE9yTmFtZU9yUGFyYW1zLCBndGFnUGFyYW1zKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbiAoZSkgeyByZXR1cm4gY29uc29sZS5lcnJvcihlKTsgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBTRVQgY29tbWFuZC5cclxuICAgICAgICAgICAgLy8gU3BsaXR0aW5nIGNhbGxzIGZvciBDT05GSUcgYW5kIFNFVCB0byBtYWtlIGl0IGNsZWFyIHdoaWNoIHNpZ25hdHVyZVxyXG4gICAgICAgICAgICAvLyBUeXBlc2NyaXB0IGlzIGNoZWNraW5nLlxyXG4gICAgICAgICAgICBndGFnQ29yZShHdGFnQ29tbWFuZC5TRVQsIGlkT3JOYW1lT3JQYXJhbXMpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbn1cclxuLyoqXHJcbiAqIENyZWF0ZXMgZ2xvYmFsIGd0YWcgZnVuY3Rpb24gb3Igd3JhcHMgZXhpc3Rpbmcgb25lIGlmIGZvdW5kLlxyXG4gKiBUaGlzIHdyYXBwZWQgZnVuY3Rpb24gYXR0YWNoZXMgRmlyZWJhc2UgaW5zdGFuY2UgSUQgKEZJRCkgdG8gZ3RhZyAnY29uZmlnJyBhbmRcclxuICogJ2V2ZW50JyBjYWxscyB0aGF0IGJlbG9uZyB0byB0aGUgR0FJRCBhc3NvY2lhdGVkIHdpdGggdGhpcyBGaXJlYmFzZSBpbnN0YW5jZS5cclxuICpcclxuICogQHBhcmFtIGluaXRpYWxpemVkSWRQcm9taXNlc01hcCBNYXAgb2YgZ2FJZCB0byBpbml0aWFsaXphdGlvbiBwcm9taXNlcy5cclxuICogQHBhcmFtIGRhdGFMYXllck5hbWUgTmFtZSBvZiBnbG9iYWwgR0EgZGF0YWxheWVyIGFycmF5LlxyXG4gKiBAcGFyYW0gZ3RhZ0Z1bmN0aW9uTmFtZSBOYW1lIG9mIGdsb2JhbCBndGFnIGZ1bmN0aW9uIChcImd0YWdcIiBpZiBub3QgdXNlci1zcGVjaWZpZWQpXHJcbiAqL1xyXG5mdW5jdGlvbiB3cmFwT3JDcmVhdGVHdGFnKGluaXRpYWxpemVkSWRQcm9taXNlc01hcCwgZGF0YUxheWVyTmFtZSwgZ3RhZ0Z1bmN0aW9uTmFtZSkge1xyXG4gICAgLy8gQ3JlYXRlIGEgYmFzaWMgY29yZSBndGFnIGZ1bmN0aW9uXHJcbiAgICB2YXIgZ3RhZ0NvcmUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF9hcmdzID0gW107XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgX2FyZ3NbX2ldID0gYXJndW1lbnRzW19pXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gTXVzdCBwdXNoIElBcmd1bWVudHMgb2JqZWN0LCBub3QgYW4gYXJyYXkuXHJcbiAgICAgICAgd2luZG93W2RhdGFMYXllck5hbWVdLnB1c2goYXJndW1lbnRzKTtcclxuICAgIH07XHJcbiAgICAvLyBSZXBsYWNlIGl0IHdpdGggZXhpc3Rpbmcgb25lIGlmIGZvdW5kXHJcbiAgICBpZiAod2luZG93W2d0YWdGdW5jdGlvbk5hbWVdICYmXHJcbiAgICAgICAgdHlwZW9mIHdpbmRvd1tndGFnRnVuY3Rpb25OYW1lXSA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICBndGFnQ29yZSA9IHdpbmRvd1tndGFnRnVuY3Rpb25OYW1lXTtcclxuICAgIH1cclxuICAgIHdpbmRvd1tndGFnRnVuY3Rpb25OYW1lXSA9IHdyYXBHdGFnKGd0YWdDb3JlLCBpbml0aWFsaXplZElkUHJvbWlzZXNNYXApO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBndGFnQ29yZTogZ3RhZ0NvcmUsXHJcbiAgICAgICAgd3JhcHBlZEd0YWc6IHdpbmRvd1tndGFnRnVuY3Rpb25OYW1lXVxyXG4gICAgfTtcclxufVxyXG4vKipcclxuICogUmV0dXJucyBmaXJzdCBzY3JpcHQgdGFnIGluIERPTSBtYXRjaGluZyBvdXIgZ3RhZyB1cmwgcGF0dGVybi5cclxuICovXHJcbmZ1bmN0aW9uIGZpbmRHdGFnU2NyaXB0T25QYWdlKCkge1xyXG4gICAgdmFyIHNjcmlwdFRhZ3MgPSB3aW5kb3cuZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3NjcmlwdCcpO1xyXG4gICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IE9iamVjdC52YWx1ZXMoc2NyaXB0VGFncyk7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgdmFyIHRhZyA9IF9hW19pXTtcclxuICAgICAgICBpZiAodGFnLnNyYyAmJiB0YWcuc3JjLmluY2x1ZGVzKEdUQUdfVVJMKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGFnO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBudWxsO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG52YXIgX2E7XHJcbnZhciBFUlJPUlMgPSAoX2EgPSB7fSxcclxuICAgIF9hW1wibm8tZ2EtaWRcIiAvKiBOT19HQV9JRCAqL10gPSBcIlxcXCJcIiArIEFOQUxZVElDU19JRF9GSUVMRCArIFwiXFxcIiBmaWVsZCBpcyBlbXB0eSBpbiBcIiArXHJcbiAgICAgICAgJ0ZpcmViYXNlIGNvbmZpZy4gRmlyZWJhc2UgQW5hbHl0aWNzICcgK1xyXG4gICAgICAgICdyZXF1aXJlcyB0aGlzIGZpZWxkIHRvIGNvbnRhaW4gYSB2YWxpZCBtZWFzdXJlbWVudCBJRC4nLFxyXG4gICAgX2FbXCJhbHJlYWR5LWV4aXN0c1wiIC8qIEFMUkVBRFlfRVhJU1RTICovXSA9ICdBIEZpcmViYXNlIEFuYWx5dGljcyBpbnN0YW5jZSB3aXRoIHRoZSBtZWFzdXJlbWVudCBJRCAke2lkfSAnICtcclxuICAgICAgICAnIGFscmVhZHkgZXhpc3RzLiAnICtcclxuICAgICAgICAnT25seSBvbmUgRmlyZWJhc2UgQW5hbHl0aWNzIGluc3RhbmNlIGNhbiBiZSBjcmVhdGVkIGZvciBlYWNoIG1lYXN1cmVtZW50IElELicsXHJcbiAgICBfYVtcImFscmVhZHktaW5pdGlhbGl6ZWRcIiAvKiBBTFJFQURZX0lOSVRJQUxJWkVEICovXSA9ICdGaXJlYmFzZSBBbmFseXRpY3MgaGFzIGFscmVhZHkgYmVlbiBpbml0aWFsaXplZC4nICtcclxuICAgICAgICAnc2V0dGluZ3MoKSBtdXN0IGJlIGNhbGxlZCBiZWZvcmUgaW5pdGlhbGl6aW5nIGFueSBBbmFseXRpY3MgaW5zdGFuY2UnICtcclxuICAgICAgICAnb3IgaXQgd2lsbCBoYXZlIG5vIGVmZmVjdC4nLFxyXG4gICAgX2FbXCJpbnRlcm9wLWNvbXBvbmVudC1yZWctZmFpbGVkXCIgLyogSU5URVJPUF9DT01QT05FTlRfUkVHX0ZBSUxFRCAqL10gPSAnRmlyZWJhc2UgQW5hbHl0aWNzIEludGVyb3AgQ29tcG9uZW50IGZhaWxlZCB0byBpbnN0YW50aWF0ZScsXHJcbiAgICBfYSk7XHJcbnZhciBFUlJPUl9GQUNUT1JZID0gbmV3IEVycm9yRmFjdG9yeSgnYW5hbHl0aWNzJywgJ0FuYWx5dGljcycsIEVSUk9SUyk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogTWFwcyBnYUlkIHRvIEZJRCBmZXRjaCBwcm9taXNlcy5cclxuICovXHJcbnZhciBpbml0aWFsaXplZElkUHJvbWlzZXNNYXAgPSB7fTtcclxuLyoqXHJcbiAqIE5hbWUgZm9yIHdpbmRvdyBnbG9iYWwgZGF0YSBsYXllciBhcnJheSB1c2VkIGJ5IEdBOiBkZWZhdWx0cyB0byAnZGF0YUxheWVyJy5cclxuICovXHJcbnZhciBkYXRhTGF5ZXJOYW1lID0gJ2RhdGFMYXllcic7XHJcbi8qKlxyXG4gKiBOYW1lIGZvciB3aW5kb3cgZ2xvYmFsIGd0YWcgZnVuY3Rpb24gdXNlZCBieSBHQTogZGVmYXVsdHMgdG8gJ2d0YWcnLlxyXG4gKi9cclxudmFyIGd0YWdOYW1lID0gJ2d0YWcnO1xyXG4vKipcclxuICogUmVwcm9kdWN0aW9uIG9mIHN0YW5kYXJkIGd0YWcgZnVuY3Rpb24gb3IgcmVmZXJlbmNlIHRvIGV4aXN0aW5nXHJcbiAqIGd0YWcgZnVuY3Rpb24gb24gd2luZG93IG9iamVjdC5cclxuICovXHJcbnZhciBndGFnQ29yZUZ1bmN0aW9uO1xyXG4vKipcclxuICogV3JhcHBlciBhcm91bmQgZ3RhZyBmdW5jdGlvbiB0aGF0IGVuc3VyZXMgRklEIGlzIHNlbnQgd2l0aCBhbGxcclxuICogcmVsZXZhbnQgZXZlbnQgYW5kIGNvbmZpZyBjYWxscy5cclxuICovXHJcbnZhciB3cmFwcGVkR3RhZ0Z1bmN0aW9uO1xyXG4vKipcclxuICogRmxhZyB0byBlbnN1cmUgcGFnZSBpbml0aWFsaXphdGlvbiBzdGVwcyAoY3JlYXRpb24gb3Igd3JhcHBpbmcgb2ZcclxuICogZGF0YUxheWVyIGFuZCBndGFnIHNjcmlwdCkgYXJlIG9ubHkgcnVuIG9uY2UgcGVyIHBhZ2UgbG9hZC5cclxuICovXHJcbnZhciBnbG9iYWxJbml0RG9uZSA9IGZhbHNlO1xyXG4vKipcclxuICogRm9yIHRlc3RpbmdcclxuICovXHJcbmZ1bmN0aW9uIHJlc2V0R2xvYmFsVmFycyhuZXdHbG9iYWxJbml0RG9uZSwgbmV3R2FJbml0aWFsaXplZFByb21pc2UpIHtcclxuICAgIGlmIChuZXdHbG9iYWxJbml0RG9uZSA9PT0gdm9pZCAwKSB7IG5ld0dsb2JhbEluaXREb25lID0gZmFsc2U7IH1cclxuICAgIGlmIChuZXdHYUluaXRpYWxpemVkUHJvbWlzZSA9PT0gdm9pZCAwKSB7IG5ld0dhSW5pdGlhbGl6ZWRQcm9taXNlID0ge307IH1cclxuICAgIGdsb2JhbEluaXREb25lID0gbmV3R2xvYmFsSW5pdERvbmU7XHJcbiAgICBpbml0aWFsaXplZElkUHJvbWlzZXNNYXAgPSBuZXdHYUluaXRpYWxpemVkUHJvbWlzZTtcclxuICAgIGRhdGFMYXllck5hbWUgPSAnZGF0YUxheWVyJztcclxuICAgIGd0YWdOYW1lID0gJ2d0YWcnO1xyXG59XHJcbi8qKlxyXG4gKiBUaGlzIG11c3QgYmUgcnVuIGJlZm9yZSBjYWxsaW5nIGZpcmViYXNlLmFuYWx5dGljcygpIG9yIGl0IHdvbid0XHJcbiAqIGhhdmUgYW55IGVmZmVjdC5cclxuICogQHBhcmFtIG9wdGlvbnMgQ3VzdG9tIGd0YWcgYW5kIGRhdGFMYXllciBuYW1lcy5cclxuICovXHJcbmZ1bmN0aW9uIHNldHRpbmdzKG9wdGlvbnMpIHtcclxuICAgIGlmIChnbG9iYWxJbml0RG9uZSkge1xyXG4gICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiYWxyZWFkeS1pbml0aWFsaXplZFwiIC8qIEFMUkVBRFlfSU5JVElBTElaRUQgKi8pO1xyXG4gICAgfVxyXG4gICAgaWYgKG9wdGlvbnMuZGF0YUxheWVyTmFtZSkge1xyXG4gICAgICAgIGRhdGFMYXllck5hbWUgPSBvcHRpb25zLmRhdGFMYXllck5hbWU7XHJcbiAgICB9XHJcbiAgICBpZiAob3B0aW9ucy5ndGFnTmFtZSkge1xyXG4gICAgICAgIGd0YWdOYW1lID0gb3B0aW9ucy5ndGFnTmFtZTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBmYWN0b3J5KGFwcCwgaW5zdGFsbGF0aW9ucykge1xyXG4gICAgdmFyIGFuYWx5dGljc0lkID0gYXBwLm9wdGlvbnNbQU5BTFlUSUNTX0lEX0ZJRUxEXTtcclxuICAgIGlmICghYW5hbHl0aWNzSWQpIHtcclxuICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcIm5vLWdhLWlkXCIgLyogTk9fR0FfSUQgKi8pO1xyXG4gICAgfVxyXG4gICAgaWYgKGluaXRpYWxpemVkSWRQcm9taXNlc01hcFthbmFseXRpY3NJZF0gIT0gbnVsbCkge1xyXG4gICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiYWxyZWFkeS1leGlzdHNcIiAvKiBBTFJFQURZX0VYSVNUUyAqLywge1xyXG4gICAgICAgICAgICBpZDogYW5hbHl0aWNzSWRcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGlmICghZ2xvYmFsSW5pdERvbmUpIHtcclxuICAgICAgICAvLyBTdGVwcyBoZXJlIHNob3VsZCBvbmx5IGJlIGRvbmUgb25jZSBwZXIgcGFnZTogY3JlYXRpb24gb3Igd3JhcHBpbmdcclxuICAgICAgICAvLyBvZiBkYXRhTGF5ZXIgYW5kIGdsb2JhbCBndGFnIGZ1bmN0aW9uLlxyXG4gICAgICAgIC8vIERldGVjdCBpZiB1c2VyIGhhcyBhbHJlYWR5IHB1dCB0aGUgZ3RhZyA8c2NyaXB0PiB0YWcgb24gdGhpcyBwYWdlLlxyXG4gICAgICAgIGlmICghZmluZEd0YWdTY3JpcHRPblBhZ2UoKSkge1xyXG4gICAgICAgICAgICBpbnNlcnRTY3JpcHRUYWcoZGF0YUxheWVyTmFtZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGdldE9yQ3JlYXRlRGF0YUxheWVyKGRhdGFMYXllck5hbWUpO1xyXG4gICAgICAgIHZhciBfYSA9IHdyYXBPckNyZWF0ZUd0YWcoaW5pdGlhbGl6ZWRJZFByb21pc2VzTWFwLCBkYXRhTGF5ZXJOYW1lLCBndGFnTmFtZSksIHdyYXBwZWRHdGFnID0gX2Eud3JhcHBlZEd0YWcsIGd0YWdDb3JlID0gX2EuZ3RhZ0NvcmU7XHJcbiAgICAgICAgd3JhcHBlZEd0YWdGdW5jdGlvbiA9IHdyYXBwZWRHdGFnO1xyXG4gICAgICAgIGd0YWdDb3JlRnVuY3Rpb24gPSBndGFnQ29yZTtcclxuICAgICAgICBnbG9iYWxJbml0RG9uZSA9IHRydWU7XHJcbiAgICB9XHJcbiAgICAvLyBBc3luYyBidXQgbm9uLWJsb2NraW5nLlxyXG4gICAgaW5pdGlhbGl6ZWRJZFByb21pc2VzTWFwW2FuYWx5dGljc0lkXSA9IGluaXRpYWxpemVHQUlkKGFwcCwgaW5zdGFsbGF0aW9ucywgZ3RhZ0NvcmVGdW5jdGlvbik7XHJcbiAgICB2YXIgYW5hbHl0aWNzSW5zdGFuY2UgPSB7XHJcbiAgICAgICAgYXBwOiBhcHAsXHJcbiAgICAgICAgbG9nRXZlbnQ6IGZ1bmN0aW9uIChldmVudE5hbWUsIGV2ZW50UGFyYW1zLCBvcHRpb25zKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBsb2dFdmVudCh3cmFwcGVkR3RhZ0Z1bmN0aW9uLCBhbmFseXRpY3NJZCwgZXZlbnROYW1lLCBldmVudFBhcmFtcywgb3B0aW9ucyk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZXRDdXJyZW50U2NyZWVuOiBmdW5jdGlvbiAoc2NyZWVuTmFtZSwgb3B0aW9ucykge1xyXG4gICAgICAgICAgICByZXR1cm4gc2V0Q3VycmVudFNjcmVlbih3cmFwcGVkR3RhZ0Z1bmN0aW9uLCBhbmFseXRpY3NJZCwgc2NyZWVuTmFtZSwgb3B0aW9ucyk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZXRVc2VySWQ6IGZ1bmN0aW9uIChpZCwgb3B0aW9ucykge1xyXG4gICAgICAgICAgICByZXR1cm4gc2V0VXNlcklkKHdyYXBwZWRHdGFnRnVuY3Rpb24sIGFuYWx5dGljc0lkLCBpZCwgb3B0aW9ucyk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZXRVc2VyUHJvcGVydGllczogZnVuY3Rpb24gKHByb3BlcnRpZXMsIG9wdGlvbnMpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHNldFVzZXJQcm9wZXJ0aWVzKHdyYXBwZWRHdGFnRnVuY3Rpb24sIGFuYWx5dGljc0lkLCBwcm9wZXJ0aWVzLCBvcHRpb25zKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNldEFuYWx5dGljc0NvbGxlY3Rpb25FbmFibGVkOiBmdW5jdGlvbiAoZW5hYmxlZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gc2V0QW5hbHl0aWNzQ29sbGVjdGlvbkVuYWJsZWQoYW5hbHl0aWNzSWQsIGVuYWJsZWQpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICByZXR1cm4gYW5hbHl0aWNzSW5zdGFuY2U7XHJcbn1cblxudmFyIG5hbWUgPSBcIkBmaXJlYmFzZS9hbmFseXRpY3NcIjtcbnZhciB2ZXJzaW9uID0gXCIwLjIuOVwiO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFR5cGUgY29uc3RhbnQgZm9yIEZpcmViYXNlIEFuYWx5dGljcy5cclxuICovXHJcbnZhciBBTkFMWVRJQ1NfVFlQRSA9ICdhbmFseXRpY3MnO1xyXG5mdW5jdGlvbiByZWdpc3RlckFuYWx5dGljcyhpbnN0YW5jZSkge1xyXG4gICAgaW5zdGFuY2UuSU5URVJOQUwucmVnaXN0ZXJDb21wb25lbnQobmV3IENvbXBvbmVudChBTkFMWVRJQ1NfVFlQRSwgZnVuY3Rpb24gKGNvbnRhaW5lcikge1xyXG4gICAgICAgIC8vIGdldEltbWVkaWF0ZSBmb3IgRmlyZWJhc2VBcHAgd2lsbCBhbHdheXMgc3VjY2VlZFxyXG4gICAgICAgIHZhciBhcHAgPSBjb250YWluZXIuZ2V0UHJvdmlkZXIoJ2FwcCcpLmdldEltbWVkaWF0ZSgpO1xyXG4gICAgICAgIHZhciBpbnN0YWxsYXRpb25zID0gY29udGFpbmVyXHJcbiAgICAgICAgICAgIC5nZXRQcm92aWRlcignaW5zdGFsbGF0aW9ucycpXHJcbiAgICAgICAgICAgIC5nZXRJbW1lZGlhdGUoKTtcclxuICAgICAgICByZXR1cm4gZmFjdG9yeShhcHAsIGluc3RhbGxhdGlvbnMpO1xyXG4gICAgfSwgXCJQVUJMSUNcIiAvKiBQVUJMSUMgKi8pLnNldFNlcnZpY2VQcm9wcyh7XHJcbiAgICAgICAgc2V0dGluZ3M6IHNldHRpbmdzLFxyXG4gICAgICAgIEV2ZW50TmFtZTogRXZlbnROYW1lXHJcbiAgICB9KSk7XHJcbiAgICBpbnN0YW5jZS5JTlRFUk5BTC5yZWdpc3RlckNvbXBvbmVudChuZXcgQ29tcG9uZW50KCdhbmFseXRpY3MtaW50ZXJuYWwnLCBpbnRlcm5hbEZhY3RvcnksIFwiUFJJVkFURVwiIC8qIFBSSVZBVEUgKi8pKTtcclxuICAgIGluc3RhbmNlLnJlZ2lzdGVyVmVyc2lvbihuYW1lLCB2ZXJzaW9uKTtcclxuICAgIGZ1bmN0aW9uIGludGVybmFsRmFjdG9yeShjb250YWluZXIpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICB2YXIgYW5hbHl0aWNzID0gY29udGFpbmVyLmdldFByb3ZpZGVyKEFOQUxZVElDU19UWVBFKS5nZXRJbW1lZGlhdGUoKTtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIGxvZ0V2ZW50OiBhbmFseXRpY3MubG9nRXZlbnRcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJpbnRlcm9wLWNvbXBvbmVudC1yZWctZmFpbGVkXCIgLyogSU5URVJPUF9DT01QT05FTlRfUkVHX0ZBSUxFRCAqLywge1xyXG4gICAgICAgICAgICAgICAgcmVhc29uOiBlXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5yZWdpc3RlckFuYWx5dGljcyhmaXJlYmFzZSk7XG5cbmV4cG9ydCB7IGZhY3RvcnksIHJlZ2lzdGVyQW5hbHl0aWNzLCByZXNldEdsb2JhbFZhcnMsIHNldHRpbmdzIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5lc20uanMubWFwXG4iLCJpbXBvcnQgZmlyZWJhc2UgZnJvbSAnQGZpcmViYXNlL2FwcCc7XG5pbXBvcnQgJ0BmaXJlYmFzZS9pbnN0YWxsYXRpb25zJztcbmltcG9ydCB7IF9fc3ByZWFkLCBfX2F3YWl0ZXIsIF9fZ2VuZXJhdG9yLCBfX2V4dGVuZHMsIF9fYXNzaWduIH0gZnJvbSAndHNsaWInO1xuaW1wb3J0IHsgRXJyb3JGYWN0b3J5LCBjcmVhdGVTdWJzY3JpYmUgfSBmcm9tICdAZmlyZWJhc2UvdXRpbCc7XG5pbXBvcnQgeyBDb21wb25lbnQgfSBmcm9tICdAZmlyZWJhc2UvY29tcG9uZW50JztcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnZhciBfYTtcclxudmFyIEVSUk9SX01BUCA9IChfYSA9IHt9LFxyXG4gICAgX2FbXCJvbmx5LWF2YWlsYWJsZS1pbi13aW5kb3dcIiAvKiBBVkFJTEFCTEVfSU5fV0lORE9XICovXSA9ICdUaGlzIG1ldGhvZCBpcyBhdmFpbGFibGUgaW4gYSBXaW5kb3cgY29udGV4dC4nLFxyXG4gICAgX2FbXCJvbmx5LWF2YWlsYWJsZS1pbi1zd1wiIC8qIEFWQUlMQUJMRV9JTl9TVyAqL10gPSAnVGhpcyBtZXRob2QgaXMgYXZhaWxhYmxlIGluIGEgc2VydmljZSB3b3JrZXIgY29udGV4dC4nLFxyXG4gICAgX2FbXCJzaG91bGQtYmUtb3ZlcnJpZGVuXCIgLyogU0hPVUxEX0JFX0lOSEVSSVRFRCAqL10gPSAnVGhpcyBtZXRob2Qgc2hvdWxkIGJlIG92ZXJyaWRlbiBieSBleHRlbmRlZCBjbGFzc2VzLicsXHJcbiAgICBfYVtcImJhZC1zZW5kZXItaWRcIiAvKiBCQURfU0VOREVSX0lEICovXSA9IFwiUGxlYXNlIGVuc3VyZSB0aGF0ICdtZXNzYWdpbmdTZW5kZXJJZCcgaXMgc2V0IFwiICtcclxuICAgICAgICAnY29ycmVjdGx5IGluIHRoZSBvcHRpb25zIHBhc3NlZCBpbnRvIGZpcmViYXNlLmluaXRpYWxpemVBcHAoKS4nLFxyXG4gICAgX2FbXCJwZXJtaXNzaW9uLWRlZmF1bHRcIiAvKiBQRVJNSVNTSU9OX0RFRkFVTFQgKi9dID0gJ1RoZSByZXF1aXJlZCBwZXJtaXNzaW9ucyB3ZXJlIG5vdCBncmFudGVkIGFuZCBkaXNtaXNzZWQgaW5zdGVhZC4nLFxyXG4gICAgX2FbXCJwZXJtaXNzaW9uLWJsb2NrZWRcIiAvKiBQRVJNSVNTSU9OX0JMT0NLRUQgKi9dID0gJ1RoZSByZXF1aXJlZCBwZXJtaXNzaW9ucyB3ZXJlIG5vdCBncmFudGVkIGFuZCBibG9ja2VkIGluc3RlYWQuJyxcclxuICAgIF9hW1widW5zdXBwb3J0ZWQtYnJvd3NlclwiIC8qIFVOU1VQUE9SVEVEX0JST1dTRVIgKi9dID0gXCJUaGlzIGJyb3dzZXIgZG9lc24ndCBzdXBwb3J0IHRoZSBBUEkncyBcIiArXHJcbiAgICAgICAgJ3JlcXVpcmVkIHRvIHVzZSB0aGUgZmlyZWJhc2UgU0RLLicsXHJcbiAgICBfYVtcIm5vdGlmaWNhdGlvbnMtYmxvY2tlZFwiIC8qIE5PVElGSUNBVElPTlNfQkxPQ0tFRCAqL10gPSAnTm90aWZpY2F0aW9ucyBoYXZlIGJlZW4gYmxvY2tlZC4nLFxyXG4gICAgX2FbXCJmYWlsZWQtc2VydmljZXdvcmtlci1yZWdpc3RyYXRpb25cIiAvKiBGQUlMRURfREVGQVVMVF9SRUdJU1RSQVRJT04gKi9dID0gJ1dlIGFyZSB1bmFibGUgdG8gcmVnaXN0ZXIgdGhlICcgK1xyXG4gICAgICAgICdkZWZhdWx0IHNlcnZpY2Ugd29ya2VyLiB7JGJyb3dzZXJFcnJvck1lc3NhZ2V9JyxcclxuICAgIF9hW1wic3ctcmVnaXN0cmF0aW9uLWV4cGVjdGVkXCIgLyogU1dfUkVHSVNUUkFUSU9OX0VYUEVDVEVEICovXSA9ICdBIHNlcnZpY2Ugd29ya2VyIHJlZ2lzdHJhdGlvbiB3YXMgdGhlIGV4cGVjdGVkIGlucHV0LicsXHJcbiAgICBfYVtcImdldC1zdWJzY3JpcHRpb24tZmFpbGVkXCIgLyogR0VUX1NVQlNDUklQVElPTl9GQUlMRUQgKi9dID0gJ1RoZXJlIHdhcyBhbiBlcnJvciB3aGVuIHRyeWluZyB0byBnZXQgJyArXHJcbiAgICAgICAgJ2FueSBleGlzdGluZyBQdXNoIFN1YnNjcmlwdGlvbnMuJyxcclxuICAgIF9hW1wiaW52YWxpZC1zYXZlZC10b2tlblwiIC8qIElOVkFMSURfU0FWRURfVE9LRU4gKi9dID0gJ1VuYWJsZSB0byBhY2Nlc3MgZGV0YWlscyBvZiB0aGUgc2F2ZWQgdG9rZW4uJyxcclxuICAgIF9hW1wic3ctcmVnLXJlZHVuZGFudFwiIC8qIFNXX1JFR19SRURVTkRBTlQgKi9dID0gJ1RoZSBzZXJ2aWNlIHdvcmtlciBiZWluZyB1c2VkIGZvciBwdXNoIHdhcyBtYWRlIHJlZHVuZGFudC4nLFxyXG4gICAgX2FbXCJ0b2tlbi1zdWJzY3JpYmUtZmFpbGVkXCIgLyogVE9LRU5fU1VCU0NSSUJFX0ZBSUxFRCAqL10gPSAnQSBwcm9ibGVtIG9jY3VyZWQgd2hpbGUgc3Vic2NyaWJpbmcgdGhlIHVzZXIgdG8gRkNNOiB7JGVycm9ySW5mb30nLFxyXG4gICAgX2FbXCJ0b2tlbi1zdWJzY3JpYmUtbm8tdG9rZW5cIiAvKiBUT0tFTl9TVUJTQ1JJQkVfTk9fVE9LRU4gKi9dID0gJ0ZDTSByZXR1cm5lZCBubyB0b2tlbiB3aGVuIHN1YnNjcmliaW5nIHRoZSB1c2VyIHRvIHB1c2guJyxcclxuICAgIF9hW1widG9rZW4tdW5zdWJzY3JpYmUtZmFpbGVkXCIgLyogVE9LRU5fVU5TVUJTQ1JJQkVfRkFJTEVEICovXSA9ICdBIHByb2JsZW0gb2NjdXJlZCB3aGlsZSB1bnN1YnNjcmliaW5nIHRoZSAnICtcclxuICAgICAgICAndXNlciBmcm9tIEZDTTogeyRlcnJvckluZm99JyxcclxuICAgIF9hW1widG9rZW4tdXBkYXRlLWZhaWxlZFwiIC8qIFRPS0VOX1VQREFURV9GQUlMRUQgKi9dID0gJ0EgcHJvYmxlbSBvY2N1cmVkIHdoaWxlIHVwZGF0aW5nIHRoZSB1c2VyIGZyb20gRkNNOiB7JGVycm9ySW5mb30nLFxyXG4gICAgX2FbXCJ0b2tlbi11cGRhdGUtbm8tdG9rZW5cIiAvKiBUT0tFTl9VUERBVEVfTk9fVE9LRU4gKi9dID0gJ0ZDTSByZXR1cm5lZCBubyB0b2tlbiB3aGVuIHVwZGF0aW5nIHRoZSB1c2VyIHRvIHB1c2guJyxcclxuICAgIF9hW1widXNlLXN3LWJlZm9yZS1nZXQtdG9rZW5cIiAvKiBVU0VfU1dfQkVGT1JFX0dFVF9UT0tFTiAqL10gPSAnVGhlIHVzZVNlcnZpY2VXb3JrZXIoKSBtZXRob2QgbWF5IG9ubHkgYmUgY2FsbGVkIG9uY2UgYW5kIG11c3QgYmUgJyArXHJcbiAgICAgICAgJ2NhbGxlZCBiZWZvcmUgY2FsbGluZyBnZXRUb2tlbigpIHRvIGVuc3VyZSB5b3VyIHNlcnZpY2Ugd29ya2VyIGlzIHVzZWQuJyxcclxuICAgIF9hW1wiaW52YWxpZC1kZWxldGUtdG9rZW5cIiAvKiBJTlZBTElEX0RFTEVURV9UT0tFTiAqL10gPSAnWW91IG11c3QgcGFzcyBhIHZhbGlkIHRva2VuIGludG8gJyArXHJcbiAgICAgICAgJ2RlbGV0ZVRva2VuKCksIGkuZS4gdGhlIHRva2VuIGZyb20gZ2V0VG9rZW4oKS4nLFxyXG4gICAgX2FbXCJkZWxldGUtdG9rZW4tbm90LWZvdW5kXCIgLyogREVMRVRFX1RPS0VOX05PVF9GT1VORCAqL10gPSAnVGhlIGRlbGV0aW9uIGF0dGVtcHQgZm9yIHRva2VuIGNvdWxkIG5vdCAnICtcclxuICAgICAgICAnYmUgcGVyZm9ybWVkIGFzIHRoZSB0b2tlbiB3YXMgbm90IGZvdW5kLicsXHJcbiAgICBfYVtcImRlbGV0ZS1zY29wZS1ub3QtZm91bmRcIiAvKiBERUxFVEVfU0NPUEVfTk9UX0ZPVU5EICovXSA9ICdUaGUgZGVsZXRpb24gYXR0ZW1wdCBmb3Igc2VydmljZSB3b3JrZXIgJyArXHJcbiAgICAgICAgJ3Njb3BlIGNvdWxkIG5vdCBiZSBwZXJmb3JtZWQgYXMgdGhlIHNjb3BlIHdhcyBub3QgZm91bmQuJyxcclxuICAgIF9hW1wiYmctaGFuZGxlci1mdW5jdGlvbi1leHBlY3RlZFwiIC8qIEJHX0hBTkRMRVJfRlVOQ1RJT05fRVhQRUNURUQgKi9dID0gJ1RoZSBpbnB1dCB0byBzZXRCYWNrZ3JvdW5kTWVzc2FnZUhhbmRsZXIoKSBtdXN0IGJlIGEgZnVuY3Rpb24uJyxcclxuICAgIF9hW1wibm8td2luZG93LWNsaWVudC10by1tc2dcIiAvKiBOT19XSU5ET1dfQ0xJRU5UX1RPX01TRyAqL10gPSAnQW4gYXR0ZW1wdCB3YXMgbWFkZSB0byBtZXNzYWdlIGEgbm9uLWV4aXN0YW50IHdpbmRvdyBjbGllbnQuJyxcclxuICAgIF9hW1widW5hYmxlLXRvLXJlc3Vic2NyaWJlXCIgLyogVU5BQkxFX1RPX1JFU1VCU0NSSUJFICovXSA9ICdUaGVyZSB3YXMgYW4gZXJyb3Igd2hpbGUgcmUtc3Vic2NyaWJpbmcgJyArXHJcbiAgICAgICAgJ3RoZSBGQ00gdG9rZW4gZm9yIHB1c2ggbWVzc2FnaW5nLiBXaWxsIGhhdmUgdG8gcmVzdWJzY3JpYmUgdGhlICcgK1xyXG4gICAgICAgICd1c2VyIG9uIG5leHQgdmlzaXQuIHskZXJyb3JJbmZvfScsXHJcbiAgICBfYVtcIm5vLWZjbS10b2tlbi1mb3ItcmVzdWJzY3JpYmVcIiAvKiBOT19GQ01fVE9LRU5fRk9SX1JFU1VCU0NSSUJFICovXSA9ICdDb3VsZCBub3QgZmluZCBhbiBGQ00gdG9rZW4gJyArXHJcbiAgICAgICAgJ2FuZCBhcyBhIHJlc3VsdCwgdW5hYmxlIHRvIHJlc3Vic2NyaWJlLiBXaWxsIGhhdmUgdG8gcmVzdWJzY3JpYmUgdGhlICcgK1xyXG4gICAgICAgICd1c2VyIG9uIG5leHQgdmlzaXQuJyxcclxuICAgIF9hW1wiZmFpbGVkLXRvLWRlbGV0ZS10b2tlblwiIC8qIEZBSUxFRF9UT19ERUxFVEVfVE9LRU4gKi9dID0gJ1VuYWJsZSB0byBkZWxldGUgdGhlIGN1cnJlbnRseSBzYXZlZCB0b2tlbi4nLFxyXG4gICAgX2FbXCJuby1zdy1pbi1yZWdcIiAvKiBOT19TV19JTl9SRUcgKi9dID0gJ0V2ZW4gdGhvdWdoIHRoZSBzZXJ2aWNlIHdvcmtlciByZWdpc3RyYXRpb24gd2FzICcgK1xyXG4gICAgICAgICdzdWNjZXNzZnVsLCB0aGVyZSB3YXMgYSBwcm9ibGVtIGFjY2Vzc2luZyB0aGUgc2VydmljZSB3b3JrZXIgaXRzZWxmLicsXHJcbiAgICBfYVtcImJhZC1zY29wZVwiIC8qIEJBRF9TQ09QRSAqL10gPSAnVGhlIHNlcnZpY2Ugd29ya2VyIHNjb3BlIG11c3QgYmUgYSBzdHJpbmcgd2l0aCBhdCAnICtcclxuICAgICAgICAnbGVhc3Qgb25lIGNoYXJhY3Rlci4nLFxyXG4gICAgX2FbXCJiYWQtdmFwaWQta2V5XCIgLyogQkFEX1ZBUElEX0tFWSAqL10gPSAnVGhlIHB1YmxpYyBWQVBJRCBrZXkgaXMgbm90IGEgVWludDhBcnJheSB3aXRoIDY1IGJ5dGVzLicsXHJcbiAgICBfYVtcImJhZC1zdWJzY3JpcHRpb25cIiAvKiBCQURfU1VCU0NSSVBUSU9OICovXSA9ICdUaGUgc3Vic2NyaXB0aW9uIG11c3QgYmUgYSB2YWxpZCBQdXNoU3Vic2NyaXB0aW9uLicsXHJcbiAgICBfYVtcImJhZC10b2tlblwiIC8qIEJBRF9UT0tFTiAqL10gPSAnVGhlIEZDTSBUb2tlbiB1c2VkIGZvciBzdG9yYWdlIC8gbG9va3VwIHdhcyBub3QgJyArXHJcbiAgICAgICAgJ2EgdmFsaWQgdG9rZW4gc3RyaW5nLicsXHJcbiAgICBfYVtcImZhaWxlZC1kZWxldGUtdmFwaWQta2V5XCIgLyogRkFJTEVEX0RFTEVURV9WQVBJRF9LRVkgKi9dID0gJ1RoZSBWQVBJRCBrZXkgY291bGQgbm90IGJlIGRlbGV0ZWQuJyxcclxuICAgIF9hW1wiaW52YWxpZC1wdWJsaWMtdmFwaWQta2V5XCIgLyogSU5WQUxJRF9QVUJMSUNfVkFQSURfS0VZICovXSA9ICdUaGUgcHVibGljIFZBUElEIGtleSBtdXN0IGJlIGEgc3RyaW5nLicsXHJcbiAgICBfYVtcInVzZS1wdWJsaWMta2V5LWJlZm9yZS1nZXQtdG9rZW5cIiAvKiBVU0VfUFVCTElDX0tFWV9CRUZPUkVfR0VUX1RPS0VOICovXSA9ICdUaGUgdXNlUHVibGljVmFwaWRLZXkoKSBtZXRob2QgbWF5IG9ubHkgYmUgY2FsbGVkIG9uY2UgYW5kIG11c3QgYmUgJyArXHJcbiAgICAgICAgJ2NhbGxlZCBiZWZvcmUgY2FsbGluZyBnZXRUb2tlbigpIHRvIGVuc3VyZSB5b3VyIFZBUElEIGtleSBpcyB1c2VkLicsXHJcbiAgICBfYVtcInB1YmxpYy12YXBpZC1rZXktZGVjcnlwdGlvbi1mYWlsZWRcIiAvKiBQVUJMSUNfS0VZX0RFQ1JZUFRJT05fRkFJTEVEICovXSA9ICdUaGUgcHVibGljIFZBUElEIGtleSBkaWQgbm90IGVxdWFsIDY1IGJ5dGVzIHdoZW4gZGVjcnlwdGVkLicsXHJcbiAgICBfYSk7XHJcbnZhciBlcnJvckZhY3RvcnkgPSBuZXcgRXJyb3JGYWN0b3J5KCdtZXNzYWdpbmcnLCAnTWVzc2FnaW5nJywgRVJST1JfTUFQKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnZhciBERUZBVUxUX1BVQkxJQ19WQVBJRF9LRVkgPSBuZXcgVWludDhBcnJheShbXHJcbiAgICAweDA0LFxyXG4gICAgMHgzMyxcclxuICAgIDB4OTQsXHJcbiAgICAweGY3LFxyXG4gICAgMHhkZixcclxuICAgIDB4YTEsXHJcbiAgICAweGViLFxyXG4gICAgMHhiMSxcclxuICAgIDB4ZGMsXHJcbiAgICAweDAzLFxyXG4gICAgMHhhMixcclxuICAgIDB4NWUsXHJcbiAgICAweDE1LFxyXG4gICAgMHg3MSxcclxuICAgIDB4ZGIsXHJcbiAgICAweDQ4LFxyXG4gICAgMHhkMyxcclxuICAgIDB4MmUsXHJcbiAgICAweGVkLFxyXG4gICAgMHhlZCxcclxuICAgIDB4YjIsXHJcbiAgICAweDM0LFxyXG4gICAgMHhkYixcclxuICAgIDB4YjcsXHJcbiAgICAweDQ3LFxyXG4gICAgMHgzYSxcclxuICAgIDB4MGMsXHJcbiAgICAweDhmLFxyXG4gICAgMHhjNCxcclxuICAgIDB4Y2MsXHJcbiAgICAweGUxLFxyXG4gICAgMHg2ZixcclxuICAgIDB4M2MsXHJcbiAgICAweDhjLFxyXG4gICAgMHg4NCxcclxuICAgIDB4ZGYsXHJcbiAgICAweGFiLFxyXG4gICAgMHhiNixcclxuICAgIDB4NjYsXHJcbiAgICAweDNlLFxyXG4gICAgMHhmMixcclxuICAgIDB4MGMsXHJcbiAgICAweGQ0LFxyXG4gICAgMHg4YixcclxuICAgIDB4ZmUsXHJcbiAgICAweGUzLFxyXG4gICAgMHhmOSxcclxuICAgIDB4NzYsXHJcbiAgICAweDJmLFxyXG4gICAgMHgxNCxcclxuICAgIDB4MWMsXHJcbiAgICAweDYzLFxyXG4gICAgMHgwOCxcclxuICAgIDB4NmEsXHJcbiAgICAweDZmLFxyXG4gICAgMHgyZCxcclxuICAgIDB4YjEsXHJcbiAgICAweDFhLFxyXG4gICAgMHg5NSxcclxuICAgIDB4YjAsXHJcbiAgICAweGNlLFxyXG4gICAgMHgzNyxcclxuICAgIDB4YzAsXHJcbiAgICAweDljLFxyXG4gICAgMHg2ZVxyXG5dKTtcclxudmFyIEVORFBPSU5UID0gJ2h0dHBzOi8vZmNtcmVnaXN0cmF0aW9ucy5nb29nbGVhcGlzLmNvbS92MSc7XHJcbnZhciBGTl9DQU1QQUlHTl9JRCA9ICdnb29nbGUuYy5hLmNfaWQnO1xyXG52YXIgRk5fQ0FNUEFJR05fTkFNRSA9ICdnb29nbGUuYy5hLmNfbCc7XHJcbnZhciBGTl9DQU1QQUlHTl9USU1FID0gJ2dvb2dsZS5jLmEudHMnO1xyXG4vKiogU2V0IHRvICcxJyBpZiBBbmFseXRpY3MgaXMgZW5hYmxlZCBmb3IgdGhlIGNhbXBhaWduICovXHJcbnZhciBGTl9DQU1QQUlHTl9BTkFMWVRJQ1NfRU5BQkxFRCA9ICdnb29nbGUuYy5hLmUnO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxudmFyIE1lc3NhZ2VUeXBlO1xyXG4oZnVuY3Rpb24gKE1lc3NhZ2VUeXBlKSB7XHJcbiAgICBNZXNzYWdlVHlwZVtcIlBVU0hfTVNHX1JFQ0VJVkVEXCJdID0gXCJwdXNoLW1zZy1yZWNlaXZlZFwiO1xyXG4gICAgTWVzc2FnZVR5cGVbXCJOT1RJRklDQVRJT05fQ0xJQ0tFRFwiXSA9IFwibm90aWZpY2F0aW9uLWNsaWNrZWRcIjtcclxufSkoTWVzc2FnZVR5cGUgfHwgKE1lc3NhZ2VUeXBlID0ge30pKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIGlzQXJyYXlCdWZmZXJFcXVhbChhLCBiKSB7XHJcbiAgICBpZiAoYSA9PSBudWxsIHx8IGIgPT0gbnVsbCkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIGlmIChhID09PSBiKSB7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcbiAgICBpZiAoYS5ieXRlTGVuZ3RoICE9PSBiLmJ5dGVMZW5ndGgpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICB2YXIgdmlld0EgPSBuZXcgRGF0YVZpZXcoYSk7XHJcbiAgICB2YXIgdmlld0IgPSBuZXcgRGF0YVZpZXcoYik7XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGEuYnl0ZUxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgaWYgKHZpZXdBLmdldFVpbnQ4KGkpICE9PSB2aWV3Qi5nZXRVaW50OChpKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRydWU7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIHRvQmFzZTY0KGFycmF5QnVmZmVyKSB7XHJcbiAgICB2YXIgdWludDhWZXJzaW9uID0gbmV3IFVpbnQ4QXJyYXkoYXJyYXlCdWZmZXIpO1xyXG4gICAgcmV0dXJuIGJ0b2EoU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShTdHJpbmcsIF9fc3ByZWFkKHVpbnQ4VmVyc2lvbikpKTtcclxufVxyXG5mdW5jdGlvbiBhcnJheUJ1ZmZlclRvQmFzZTY0KGFycmF5QnVmZmVyKSB7XHJcbiAgICB2YXIgYmFzZTY0U3RyaW5nID0gdG9CYXNlNjQoYXJyYXlCdWZmZXIpO1xyXG4gICAgcmV0dXJuIGJhc2U2NFN0cmluZ1xyXG4gICAgICAgIC5yZXBsYWNlKC89L2csICcnKVxyXG4gICAgICAgIC5yZXBsYWNlKC9cXCsvZywgJy0nKVxyXG4gICAgICAgIC5yZXBsYWNlKC9cXC8vZywgJ18nKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxudmFyIFN1YnNjcmlwdGlvbk1hbmFnZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBTdWJzY3JpcHRpb25NYW5hZ2VyKCkge1xyXG4gICAgfVxyXG4gICAgU3Vic2NyaXB0aW9uTWFuYWdlci5wcm90b3R5cGUuZ2V0VG9rZW4gPSBmdW5jdGlvbiAoc2VydmljZXMsIHN1YnNjcmlwdGlvbiwgdmFwaWRLZXkpIHtcclxuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBoZWFkZXJzLCBib2R5LCBzdWJzY3JpYmVPcHRpb25zLCByZXNwb25zZURhdGEsIHJlc3BvbnNlLCBlcnJfMSwgbWVzc2FnZTtcclxuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDogcmV0dXJuIFs0IC8qeWllbGQqLywgZ2V0SGVhZGVycyhzZXJ2aWNlcyldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVycyA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYm9keSA9IGdldEJvZHkoc3Vic2NyaXB0aW9uLCB2YXBpZEtleSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1YnNjcmliZU9wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShib2R5KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDI7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS50cnlzLnB1c2goWzIsIDUsICwgNl0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBmZXRjaChnZXRFbmRwb2ludChzZXJ2aWNlcy5hcHApLCBzdWJzY3JpYmVPcHRpb25zKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZSA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgcmVzcG9uc2UuanNvbigpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlRGF0YSA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgNl07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA1OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJfMSA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyb3JGYWN0b3J5LmNyZWF0ZShcInRva2VuLXN1YnNjcmliZS1mYWlsZWRcIiAvKiBUT0tFTl9TVUJTQ1JJQkVfRkFJTEVEICovLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvckluZm86IGVycl8xXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlRGF0YS5lcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSA9IHJlc3BvbnNlRGF0YS5lcnJvci5tZXNzYWdlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyb3JGYWN0b3J5LmNyZWF0ZShcInRva2VuLXN1YnNjcmliZS1mYWlsZWRcIiAvKiBUT0tFTl9TVUJTQ1JJQkVfRkFJTEVEICovLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JJbmZvOiBtZXNzYWdlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXJlc3BvbnNlRGF0YS50b2tlbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyb3JGYWN0b3J5LmNyZWF0ZShcInRva2VuLXN1YnNjcmliZS1uby10b2tlblwiIC8qIFRPS0VOX1NVQlNDUklCRV9OT19UT0tFTiAqLyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHJlc3BvbnNlRGF0YS50b2tlbl07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogVXBkYXRlIHRoZSB1bmRlcmx5aW5nIHRva2VuIGRldGFpbHMgZm9yIGZjbVRva2VuLlxyXG4gICAgICovXHJcbiAgICBTdWJzY3JpcHRpb25NYW5hZ2VyLnByb3RvdHlwZS51cGRhdGVUb2tlbiA9IGZ1bmN0aW9uICh0b2tlbkRldGFpbHMsIHNlcnZpY2VzLCBzdWJzY3JpcHRpb24sIHZhcGlkS2V5KSB7XHJcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgaGVhZGVycywgYm9keSwgdXBkYXRlT3B0aW9ucywgcmVzcG9uc2VEYXRhLCByZXNwb25zZSwgZXJyXzIsIG1lc3NhZ2U7XHJcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6IHJldHVybiBbNCAvKnlpZWxkKi8sIGdldEhlYWRlcnMoc2VydmljZXMpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnMgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvZHkgPSBnZXRCb2R5KHN1YnNjcmlwdGlvbiwgdmFwaWRLZXkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVPcHRpb25zID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUEFUQ0gnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGJvZHkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLmxhYmVsID0gMjtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnRyeXMucHVzaChbMiwgNSwgLCA2XSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIGZldGNoKGdldEVuZHBvaW50KHNlcnZpY2VzLmFwcCkgKyBcIi9cIiArIHRva2VuRGV0YWlscy5mY21Ub2tlbiwgdXBkYXRlT3B0aW9ucyldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHJlc3BvbnNlLmpzb24oKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZURhdGEgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDZdO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyXzIgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IGVycm9yRmFjdG9yeS5jcmVhdGUoXCJ0b2tlbi11cGRhdGUtZmFpbGVkXCIgLyogVE9LRU5fVVBEQVRFX0ZBSUxFRCAqLywge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JJbmZvOiBlcnJfMlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDY6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZURhdGEuZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSByZXNwb25zZURhdGEuZXJyb3IubWVzc2FnZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IGVycm9yRmFjdG9yeS5jcmVhdGUoXCJ0b2tlbi11cGRhdGUtZmFpbGVkXCIgLyogVE9LRU5fVVBEQVRFX0ZBSUxFRCAqLywge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9ySW5mbzogbWVzc2FnZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFyZXNwb25zZURhdGEudG9rZW4pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IGVycm9yRmFjdG9yeS5jcmVhdGUoXCJ0b2tlbi11cGRhdGUtbm8tdG9rZW5cIiAvKiBUT0tFTl9VUERBVEVfTk9fVE9LRU4gKi8pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCByZXNwb25zZURhdGEudG9rZW5dO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBTdWJzY3JpcHRpb25NYW5hZ2VyLnByb3RvdHlwZS5kZWxldGVUb2tlbiA9IGZ1bmN0aW9uIChzZXJ2aWNlcywgdG9rZW5EZXRhaWxzKSB7XHJcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgaGVhZGVycywgdW5zdWJzY3JpYmVPcHRpb25zLCByZXNwb25zZSwgcmVzcG9uc2VEYXRhLCBtZXNzYWdlLCBlcnJfMztcclxuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDogcmV0dXJuIFs0IC8qeWllbGQqLywgZ2V0SGVhZGVycyhzZXJ2aWNlcyldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVycyA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdW5zdWJzY3JpYmVPcHRpb25zID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnREVMRVRFJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnNcclxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSAyO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2EudHJ5cy5wdXNoKFsyLCA1LCAsIDZdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgZmV0Y2goZ2V0RW5kcG9pbnQoc2VydmljZXMuYXBwKSArIFwiL1wiICsgdG9rZW5EZXRhaWxzLmZjbVRva2VuLCB1bnN1YnNjcmliZU9wdGlvbnMpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCByZXNwb25zZS5qc29uKCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2VEYXRhID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2VEYXRhLmVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlID0gcmVzcG9uc2VEYXRhLmVycm9yLm1lc3NhZ2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnJvckZhY3RvcnkuY3JlYXRlKFwidG9rZW4tdW5zdWJzY3JpYmUtZmFpbGVkXCIgLyogVE9LRU5fVU5TVUJTQ1JJQkVfRkFJTEVEICovLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JJbmZvOiBtZXNzYWdlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCA2XTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycl8zID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnJvckZhY3RvcnkuY3JlYXRlKFwidG9rZW4tdW5zdWJzY3JpYmUtZmFpbGVkXCIgLyogVE9LRU5fVU5TVUJTQ1JJQkVfRkFJTEVEICovLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvckluZm86IGVycl8zXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNjogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gU3Vic2NyaXB0aW9uTWFuYWdlcjtcclxufSgpKTtcclxuZnVuY3Rpb24gZ2V0RW5kcG9pbnQoYXBwKSB7XHJcbiAgICByZXR1cm4gRU5EUE9JTlQgKyBcIi9wcm9qZWN0cy9cIiArIGFwcC5vcHRpb25zLnByb2plY3RJZCArIFwiL3JlZ2lzdHJhdGlvbnNcIjtcclxufVxyXG5mdW5jdGlvbiBnZXRIZWFkZXJzKF9hKSB7XHJcbiAgICB2YXIgYXBwID0gX2EuYXBwLCBpbnN0YWxsYXRpb25zID0gX2EuaW5zdGFsbGF0aW9ucztcclxuICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgYXV0aFRva2VuO1xyXG4gICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2IpIHtcclxuICAgICAgICAgICAgc3dpdGNoIChfYi5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAwOiByZXR1cm4gWzQgLyp5aWVsZCovLCBpbnN0YWxsYXRpb25zLmdldFRva2VuKCldO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgIGF1dGhUb2tlbiA9IF9iLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgbmV3IEhlYWRlcnMoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFjY2VwdDogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3gtZ29vZy1hcGkta2V5JzogYXBwLm9wdGlvbnMuYXBpS2V5LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3gtZ29vZy1maXJlYmFzZS1pbnN0YWxsYXRpb25zLWF1dGgnOiBcIkZJUyBcIiArIGF1dGhUb2tlblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59XHJcbmZ1bmN0aW9uIGdldEJvZHkoc3Vic2NyaXB0aW9uLCB2YXBpZEtleSkge1xyXG4gICAgdmFyIHAyNTZkaCA9IGFycmF5QnVmZmVyVG9CYXNlNjQoc3Vic2NyaXB0aW9uLmdldEtleSgncDI1NmRoJykpO1xyXG4gICAgdmFyIGF1dGggPSBhcnJheUJ1ZmZlclRvQmFzZTY0KHN1YnNjcmlwdGlvbi5nZXRLZXkoJ2F1dGgnKSk7XHJcbiAgICB2YXIgYm9keSA9IHtcclxuICAgICAgICB3ZWI6IHtcclxuICAgICAgICAgICAgZW5kcG9pbnQ6IHN1YnNjcmlwdGlvbi5lbmRwb2ludCxcclxuICAgICAgICAgICAgcDI1NmRoOiBwMjU2ZGgsXHJcbiAgICAgICAgICAgIGF1dGg6IGF1dGhcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgaWYgKCFpc0FycmF5QnVmZmVyRXF1YWwodmFwaWRLZXkuYnVmZmVyLCBERUZBVUxUX1BVQkxJQ19WQVBJRF9LRVkuYnVmZmVyKSkge1xyXG4gICAgICAgIGJvZHkud2ViLmFwcGxpY2F0aW9uUHViS2V5ID0gYXJyYXlCdWZmZXJUb0Jhc2U2NCh2YXBpZEtleSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYm9keTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gYmFzZTY0VG9BcnJheUJ1ZmZlcihiYXNlNjRTdHJpbmcpIHtcclxuICAgIHZhciBwYWRkaW5nID0gJz0nLnJlcGVhdCgoNCAtIChiYXNlNjRTdHJpbmcubGVuZ3RoICUgNCkpICUgNCk7XHJcbiAgICB2YXIgYmFzZTY0ID0gKGJhc2U2NFN0cmluZyArIHBhZGRpbmcpXHJcbiAgICAgICAgLnJlcGxhY2UoL1xcLS9nLCAnKycpXHJcbiAgICAgICAgLnJlcGxhY2UoL18vZywgJy8nKTtcclxuICAgIHZhciByYXdEYXRhID0gYXRvYihiYXNlNjQpO1xyXG4gICAgdmFyIG91dHB1dEFycmF5ID0gbmV3IFVpbnQ4QXJyYXkocmF3RGF0YS5sZW5ndGgpO1xyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCByYXdEYXRhLmxlbmd0aDsgKytpKSB7XHJcbiAgICAgICAgb3V0cHV0QXJyYXlbaV0gPSByYXdEYXRhLmNoYXJDb2RlQXQoaSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gb3V0cHV0QXJyYXk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnZhciBPTERfREJfTkFNRSA9ICd1bmRlZmluZWQnO1xyXG52YXIgT0xEX09CSkVDVF9TVE9SRV9OQU1FID0gJ2ZjbV90b2tlbl9vYmplY3RfU3RvcmUnO1xyXG5mdW5jdGlvbiBoYW5kbGVEYihkYiwgc2VydmljZXMpIHtcclxuICAgIGlmICghZGIub2JqZWN0U3RvcmVOYW1lcy5jb250YWlucyhPTERfT0JKRUNUX1NUT1JFX05BTUUpKSB7XHJcbiAgICAgICAgLy8gV2UgZm91bmQgYSBkYXRhYmFzZSB3aXRoIHRoZSBuYW1lICd1bmRlZmluZWQnLCBidXQgb3VyIGV4cGVjdGVkIG9iamVjdFxyXG4gICAgICAgIC8vIHN0b3JlIGlzbid0IGRlZmluZWQuXHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgdmFyIHRyYW5zYWN0aW9uID0gZGIudHJhbnNhY3Rpb24oT0xEX09CSkVDVF9TVE9SRV9OQU1FKTtcclxuICAgIHZhciBvYmplY3RTdG9yZSA9IHRyYW5zYWN0aW9uLm9iamVjdFN0b3JlKE9MRF9PQkpFQ1RfU1RPUkVfTkFNRSk7XHJcbiAgICB2YXIgc3Vic2NyaXB0aW9uTWFuYWdlciA9IG5ldyBTdWJzY3JpcHRpb25NYW5hZ2VyKCk7XHJcbiAgICB2YXIgb3BlbkN1cnNvclJlcXVlc3QgPSBvYmplY3RTdG9yZS5vcGVuQ3Vyc29yKCk7XHJcbiAgICBvcGVuQ3Vyc29yUmVxdWVzdC5vbmVycm9yID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgLy8gTk9PUCAtIE5vdGhpbmcgd2UgY2FuIGRvLlxyXG4gICAgICAgIGNvbnNvbGUud2FybignVW5hYmxlIHRvIGNsZWFudXAgb2xkIElEQi4nLCBldmVudCk7XHJcbiAgICB9O1xyXG4gICAgb3BlbkN1cnNvclJlcXVlc3Qub25zdWNjZXNzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBjdXJzb3IgPSBvcGVuQ3Vyc29yUmVxdWVzdC5yZXN1bHQ7XHJcbiAgICAgICAgaWYgKGN1cnNvcikge1xyXG4gICAgICAgICAgICAvLyBjdXJzb3IudmFsdWUgY29udGFpbnMgdGhlIGN1cnJlbnQgcmVjb3JkIGJlaW5nIGl0ZXJhdGVkIHRocm91Z2hcclxuICAgICAgICAgICAgLy8gdGhpcyBpcyB3aGVyZSB5b3UnZCBkbyBzb21ldGhpbmcgd2l0aCB0aGUgcmVzdWx0XHJcbiAgICAgICAgICAgIHZhciB0b2tlbkRldGFpbHMgPSBjdXJzb3IudmFsdWU7XHJcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZmxvYXRpbmctcHJvbWlzZXNcclxuICAgICAgICAgICAgc3Vic2NyaXB0aW9uTWFuYWdlci5kZWxldGVUb2tlbihzZXJ2aWNlcywgdG9rZW5EZXRhaWxzKTtcclxuICAgICAgICAgICAgY3Vyc29yLmNvbnRpbnVlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBkYi5jbG9zZSgpO1xyXG4gICAgICAgICAgICBpbmRleGVkREIuZGVsZXRlRGF0YWJhc2UoT0xEX0RCX05BTUUpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbn1cclxuZnVuY3Rpb24gY2xlYW5WMShzZXJ2aWNlcykge1xyXG4gICAgdmFyIHJlcXVlc3QgPSBpbmRleGVkREIub3BlbihPTERfREJfTkFNRSk7XHJcbiAgICByZXF1ZXN0Lm9uZXJyb3IgPSBmdW5jdGlvbiAoX2V2ZW50KSB7XHJcbiAgICAgICAgLy8gTk9PUCAtIE5vdGhpbmcgd2UgY2FuIGRvLlxyXG4gICAgfTtcclxuICAgIHJlcXVlc3Qub25zdWNjZXNzID0gZnVuY3Rpb24gKF9ldmVudCkge1xyXG4gICAgICAgIHZhciBkYiA9IHJlcXVlc3QucmVzdWx0O1xyXG4gICAgICAgIGhhbmRsZURiKGRiLCBzZXJ2aWNlcyk7XHJcbiAgICB9O1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG52YXIgRGJJbnRlcmZhY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBEYkludGVyZmFjZSgpIHtcclxuICAgICAgICB0aGlzLmRiUHJvbWlzZSA9IG51bGw7XHJcbiAgICB9XHJcbiAgICAvKiogR2V0cyByZWNvcmQocykgZnJvbSB0aGUgb2JqZWN0U3RvcmUgdGhhdCBtYXRjaCB0aGUgZ2l2ZW4ga2V5LiAqL1xyXG4gICAgRGJJbnRlcmZhY2UucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jcmVhdGVUcmFuc2FjdGlvbihmdW5jdGlvbiAob2JqZWN0U3RvcmUpIHsgcmV0dXJuIG9iamVjdFN0b3JlLmdldChrZXkpOyB9KTtcclxuICAgIH07XHJcbiAgICAvKiogR2V0cyByZWNvcmQocykgZnJvbSB0aGUgb2JqZWN0U3RvcmUgdGhhdCBtYXRjaCB0aGUgZ2l2ZW4gaW5kZXguICovXHJcbiAgICBEYkludGVyZmFjZS5wcm90b3R5cGUuZ2V0SW5kZXggPSBmdW5jdGlvbiAoaW5kZXgsIGtleSkge1xyXG4gICAgICAgIGZ1bmN0aW9uIHJ1blJlcXVlc3Qob2JqZWN0U3RvcmUpIHtcclxuICAgICAgICAgICAgdmFyIGlkYkluZGV4ID0gb2JqZWN0U3RvcmUuaW5kZXgoaW5kZXgpO1xyXG4gICAgICAgICAgICByZXR1cm4gaWRiSW5kZXguZ2V0KGtleSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLmNyZWF0ZVRyYW5zYWN0aW9uKHJ1blJlcXVlc3QpO1xyXG4gICAgfTtcclxuICAgIC8qKiBBc3NpZ25zIG9yIG92ZXJ3cml0ZXMgdGhlIHJlY29yZCBmb3IgdGhlIGdpdmVuIHZhbHVlLiAqL1xyXG4gICAgLy8gSW5kZXhlZERCIHZhbHVlcyBhcmUgb2YgdHlwZSBcImFueVwiXHJcbiAgICBEYkludGVyZmFjZS5wcm90b3R5cGUucHV0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY3JlYXRlVHJhbnNhY3Rpb24oZnVuY3Rpb24gKG9iamVjdFN0b3JlKSB7IHJldHVybiBvYmplY3RTdG9yZS5wdXQodmFsdWUpOyB9LCAncmVhZHdyaXRlJyk7XHJcbiAgICB9O1xyXG4gICAgLyoqIERlbGV0ZXMgcmVjb3JkKHMpIGZyb20gdGhlIG9iamVjdFN0b3JlIHRoYXQgbWF0Y2ggdGhlIGdpdmVuIGtleS4gKi9cclxuICAgIERiSW50ZXJmYWNlLnByb3RvdHlwZS5kZWxldGUgPSBmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY3JlYXRlVHJhbnNhY3Rpb24oZnVuY3Rpb24gKG9iamVjdFN0b3JlKSB7IHJldHVybiBvYmplY3RTdG9yZS5kZWxldGUoa2V5KTsgfSwgJ3JlYWR3cml0ZScpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQ2xvc2UgdGhlIGN1cnJlbnRseSBvcGVuIGRhdGFiYXNlLlxyXG4gICAgICovXHJcbiAgICBEYkludGVyZmFjZS5wcm90b3R5cGUuY2xvc2VEYXRhYmFzZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBkYjtcclxuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLmRiUHJvbWlzZSkgcmV0dXJuIFszIC8qYnJlYWsqLywgMl07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuZGJQcm9taXNlXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRiID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYi5jbG9zZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRiUHJvbWlzZSA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLmxhYmVsID0gMjtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6IHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGVzIGFuIEluZGV4ZWREQiBUcmFuc2FjdGlvbiBhbmQgcGFzc2VzIGl0cyBvYmplY3RTdG9yZSB0byB0aGVcclxuICAgICAqIHJ1blJlcXVlc3QgZnVuY3Rpb24sIHdoaWNoIHJ1bnMgdGhlIGRhdGFiYXNlIHJlcXVlc3QuXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybiBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2l0aCB0aGUgcmVzdWx0IG9mIHRoZSBydW5SZXF1ZXN0IGZ1bmN0aW9uXHJcbiAgICAgKi9cclxuICAgIERiSW50ZXJmYWNlLnByb3RvdHlwZS5jcmVhdGVUcmFuc2FjdGlvbiA9IGZ1bmN0aW9uIChydW5SZXF1ZXN0LCBtb2RlKSB7XHJcbiAgICAgICAgaWYgKG1vZGUgPT09IHZvaWQgMCkgeyBtb2RlID0gJ3JlYWRvbmx5JzsgfVxyXG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGRiLCB0cmFuc2FjdGlvbiwgcmVxdWVzdCwgcmVzdWx0O1xyXG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOiByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmdldERiKCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGIgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uID0gZGIudHJhbnNhY3Rpb24odGhpcy5vYmplY3RTdG9yZU5hbWUsIG1vZGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXF1ZXN0ID0gdHJhbnNhY3Rpb24ub2JqZWN0U3RvcmUodGhpcy5vYmplY3RTdG9yZU5hbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBwcm9taXNpZnkocnVuUmVxdWVzdChyZXF1ZXN0KSldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uLm9uY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUocmVzdWx0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uLm9uZXJyb3IgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdCh0cmFuc2FjdGlvbi5lcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqIEdldHMgdGhlIGNhY2hlZCBkYiBjb25uZWN0aW9uIG9yIG9wZW5zIGEgbmV3IG9uZS4gKi9cclxuICAgIERiSW50ZXJmYWNlLnByb3RvdHlwZS5nZXREYiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIGlmICghdGhpcy5kYlByb21pc2UpIHtcclxuICAgICAgICAgICAgdGhpcy5kYlByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcmVxdWVzdCA9IGluZGV4ZWREQi5vcGVuKF90aGlzLmRiTmFtZSwgX3RoaXMuZGJWZXJzaW9uKTtcclxuICAgICAgICAgICAgICAgIHJlcXVlc3Qub25zdWNjZXNzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUocmVxdWVzdC5yZXN1bHQpO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIHJlcXVlc3Qub25lcnJvciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5kYlByb21pc2UgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChyZXF1ZXN0LmVycm9yKTtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICByZXF1ZXN0Lm9udXBncmFkZW5lZWRlZCA9IGZ1bmN0aW9uIChldmVudCkgeyByZXR1cm4gX3RoaXMub25EYlVwZ3JhZGUocmVxdWVzdCwgZXZlbnQpOyB9O1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGJQcm9taXNlO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBEYkludGVyZmFjZTtcclxufSgpKTtcclxuLyoqIFByb21pc2lmaWVzIGFuIElEQlJlcXVlc3QuIFJlc29sdmVzIHdpdGggdGhlIElEQlJlcXVlc3QncyByZXN1bHQuICovXHJcbmZ1bmN0aW9uIHByb21pc2lmeShyZXF1ZXN0KSB7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgIHJlcXVlc3Qub25zdWNjZXNzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXNvbHZlKHJlcXVlc3QucmVzdWx0KTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJlcXVlc3Qub25lcnJvciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmVqZWN0KHJlcXVlc3QuZXJyb3IpO1xyXG4gICAgICAgIH07XHJcbiAgICB9KTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxudmFyIFRva2VuRGV0YWlsc01vZGVsID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgX19leHRlbmRzKFRva2VuRGV0YWlsc01vZGVsLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gVG9rZW5EZXRhaWxzTW9kZWwoc2VydmljZXMpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xyXG4gICAgICAgIF90aGlzLnNlcnZpY2VzID0gc2VydmljZXM7XHJcbiAgICAgICAgX3RoaXMuZGJOYW1lID0gJ2ZjbV90b2tlbl9kZXRhaWxzX2RiJztcclxuICAgICAgICBfdGhpcy5kYlZlcnNpb24gPSA0O1xyXG4gICAgICAgIF90aGlzLm9iamVjdFN0b3JlTmFtZSA9ICdmY21fdG9rZW5fb2JqZWN0X1N0b3JlJztcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICBUb2tlbkRldGFpbHNNb2RlbC5wcm90b3R5cGUub25EYlVwZ3JhZGUgPSBmdW5jdGlvbiAocmVxdWVzdCwgZXZlbnQpIHtcclxuICAgICAgICB2YXIgZGIgPSByZXF1ZXN0LnJlc3VsdDtcclxuICAgICAgICAvLyBMYWNrIG9mICdicmVhaycgc3RhdGVtZW50cyBpcyBpbnRlbnRpb25hbC5cclxuICAgICAgICBzd2l0Y2ggKGV2ZW50Lm9sZFZlcnNpb24pIHtcclxuICAgICAgICAgICAgY2FzZSAwOiB7XHJcbiAgICAgICAgICAgICAgICAvLyBOZXcgSURCIGluc3RhbmNlXHJcbiAgICAgICAgICAgICAgICB2YXIgb2JqZWN0U3RvcmUgPSBkYi5jcmVhdGVPYmplY3RTdG9yZSh0aGlzLm9iamVjdFN0b3JlTmFtZSwge1xyXG4gICAgICAgICAgICAgICAgICAgIGtleVBhdGg6ICdzd1Njb3BlJ1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAvLyBNYWtlIHN1cmUgdGhlIHNlbmRlciBJRCBjYW4gYmUgc2VhcmNoZWRcclxuICAgICAgICAgICAgICAgIG9iamVjdFN0b3JlLmNyZWF0ZUluZGV4KCdmY21TZW5kZXJJZCcsICdmY21TZW5kZXJJZCcsIHtcclxuICAgICAgICAgICAgICAgICAgICB1bmlxdWU6IGZhbHNlXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIG9iamVjdFN0b3JlLmNyZWF0ZUluZGV4KCdmY21Ub2tlbicsICdmY21Ub2tlbicsIHsgdW5pcXVlOiB0cnVlIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhc2UgMToge1xyXG4gICAgICAgICAgICAgICAgLy8gUHJpb3IgdG8gdmVyc2lvbiAyLCB3ZSB3ZXJlIHVzaW5nIGVpdGhlciAnZmNtX3Rva2VuX2RldGFpbHNfZGInXHJcbiAgICAgICAgICAgICAgICAvLyBvciAndW5kZWZpbmVkJyBhcyB0aGUgZGF0YWJhc2UgbmFtZSBkdWUgdG8gYnVnIGluIHRoZSBTREtcclxuICAgICAgICAgICAgICAgIC8vIFNvIHJlbW92ZSB0aGUgb2xkIHRva2VucyBhbmQgZGF0YWJhc2VzLlxyXG4gICAgICAgICAgICAgICAgY2xlYW5WMSh0aGlzLnNlcnZpY2VzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXNlIDI6IHtcclxuICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSBmcm9tIHYyIHRvIHY0IGRpcmVjdGx5IGluIGEgc2luZ2xlIG9wZW5DdXJzb3IgcmVxdWVzdC5cclxuICAgICAgICAgICAgICAgIC8vIFdlIG5lZWQgdG8gZG8gdGhpcyBiZWNhdXNlIGZvciBzb21lIHJlYXNvbiwgZG9pbmcgYSBzdWJzZXF1ZW50IHVwZGF0ZSBvbiB0aGUgc2FtZSBkYXRhXHJcbiAgICAgICAgICAgICAgICAvLyBpbiB0aGUgc2FtZSB0cmFuc2FjdGlvbiBkcm9wcyB0aGUgZmlyc3QgdXBkYXRlLlxyXG4gICAgICAgICAgICAgICAgdmFyIG9iamVjdFN0b3JlID0gcmVxdWVzdC50cmFuc2FjdGlvbi5vYmplY3RTdG9yZSh0aGlzLm9iamVjdFN0b3JlTmFtZSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgY3Vyc29yUmVxdWVzdF8xID0gb2JqZWN0U3RvcmUub3BlbkN1cnNvcigpO1xyXG4gICAgICAgICAgICAgICAgY3Vyc29yUmVxdWVzdF8xLm9uc3VjY2VzcyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgY3Vyc29yID0gY3Vyc29yUmVxdWVzdF8xLnJlc3VsdDtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY3Vyc29yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IGN1cnNvci52YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5ld1ZhbHVlID0gX19hc3NpZ24oe30sIHZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF2YWx1ZS5jcmVhdGVUaW1lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdWYWx1ZS5jcmVhdGVUaW1lID0gRGF0ZS5ub3coKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHZhbHVlLnZhcGlkS2V5ID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3VmFsdWUudmFwaWRLZXkgPSBiYXNlNjRUb0FycmF5QnVmZmVyKHZhbHVlLnZhcGlkS2V5KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHZhbHVlLmF1dGggPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdWYWx1ZS5hdXRoID0gYmFzZTY0VG9BcnJheUJ1ZmZlcih2YWx1ZS5hdXRoKS5idWZmZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZS5hdXRoID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3VmFsdWUucDI1NmRoID0gYmFzZTY0VG9BcnJheUJ1ZmZlcih2YWx1ZS5wMjU2ZGgpLmJ1ZmZlcjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHZhbHVlLmZjbVB1c2hTZXQgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgbmV3VmFsdWUuZmNtUHVzaFNldDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJzb3IudXBkYXRlKG5ld1ZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3Vyc29yLmNvbnRpbnVlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIC8vIEJyZWFrIGhlcmUgYXMgd2UndmUgYWxyZWFkeSB1cGRhdGVkIHRvIHY0LlxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2FzZSAzOiB7XHJcbiAgICAgICAgICAgICAgICAvLyBVcGRhdGUgZnJvbSBWMyB0byBWNC5cclxuICAgICAgICAgICAgICAgIHZhciBvYmplY3RTdG9yZSA9IHJlcXVlc3QudHJhbnNhY3Rpb24ub2JqZWN0U3RvcmUodGhpcy5vYmplY3RTdG9yZU5hbWUpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGN1cnNvclJlcXVlc3RfMiA9IG9iamVjdFN0b3JlLm9wZW5DdXJzb3IoKTtcclxuICAgICAgICAgICAgICAgIGN1cnNvclJlcXVlc3RfMi5vbnN1Y2Nlc3MgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGN1cnNvciA9IGN1cnNvclJlcXVlc3RfMi5yZXN1bHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnNvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSBjdXJzb3IudmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuZXdWYWx1ZSA9IF9fYXNzaWduKHt9LCB2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUuZmNtUHVzaFNldCA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBuZXdWYWx1ZS5mY21QdXNoU2V0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnNvci51cGRhdGUobmV3VmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJzb3IuY29udGludWUoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogR2l2ZW4gYSB0b2tlbiwgdGhpcyBtZXRob2Qgd2lsbCBsb29rIHVwIHRoZSBkZXRhaWxzIGluIGluZGV4ZWREQi5cclxuICAgICAqL1xyXG4gICAgVG9rZW5EZXRhaWxzTW9kZWwucHJvdG90eXBlLmdldFRva2VuRGV0YWlsc0Zyb21Ub2tlbiA9IGZ1bmN0aW9uIChmY21Ub2tlbikge1xyXG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFmY21Ub2tlbikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IGVycm9yRmFjdG9yeS5jcmVhdGUoXCJiYWQtdG9rZW5cIiAvKiBCQURfVE9LRU4gKi8pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdmFsaWRhdGVJbnB1dHMoeyBmY21Ub2tlbjogZmNtVG9rZW4gfSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdGhpcy5nZXRJbmRleCgnZmNtVG9rZW4nLCBmY21Ub2tlbildO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEdpdmVuIGEgc2VydmljZSB3b3JrZXIgc2NvcGUsIHRoaXMgbWV0aG9kIHdpbGwgbG9vayB1cCB0aGUgZGV0YWlscyBpblxyXG4gICAgICogaW5kZXhlZERCLlxyXG4gICAgICogQHJldHVybiBUaGUgZGV0YWlscyBhc3NvY2lhdGVkIHdpdGggdGhhdCB0b2tlbi5cclxuICAgICAqL1xyXG4gICAgVG9rZW5EZXRhaWxzTW9kZWwucHJvdG90eXBlLmdldFRva2VuRGV0YWlsc0Zyb21TV1Njb3BlID0gZnVuY3Rpb24gKHN3U2NvcGUpIHtcclxuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIGlmICghc3dTY29wZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IGVycm9yRmFjdG9yeS5jcmVhdGUoXCJiYWQtc2NvcGVcIiAvKiBCQURfU0NPUEUgKi8pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdmFsaWRhdGVJbnB1dHMoeyBzd1Njb3BlOiBzd1Njb3BlIH0pO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMuZ2V0KHN3U2NvcGUpXTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBTYXZlIHRoZSBkZXRhaWxzIGZvciB0aGUgZmNtIHRva2VuIGZvciByZS11c2UgYXQgYSBsYXRlciBkYXRlLlxyXG4gICAgICogQHBhcmFtIGlucHV0IEEgcGxhaW4ganMgb2JqZWN0IGNvbnRhaW5pbmcgYXJncyB0byBzYXZlLlxyXG4gICAgICovXHJcbiAgICBUb2tlbkRldGFpbHNNb2RlbC5wcm90b3R5cGUuc2F2ZVRva2VuRGV0YWlscyA9IGZ1bmN0aW9uICh0b2tlbkRldGFpbHMpIHtcclxuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIGlmICghdG9rZW5EZXRhaWxzLnN3U2NvcGUpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnJvckZhY3RvcnkuY3JlYXRlKFwiYmFkLXNjb3BlXCIgLyogQkFEX1NDT1BFICovKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICghdG9rZW5EZXRhaWxzLnZhcGlkS2V5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyb3JGYWN0b3J5LmNyZWF0ZShcImJhZC12YXBpZC1rZXlcIiAvKiBCQURfVkFQSURfS0VZICovKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICghdG9rZW5EZXRhaWxzLmVuZHBvaW50IHx8ICF0b2tlbkRldGFpbHMuYXV0aCB8fCAhdG9rZW5EZXRhaWxzLnAyNTZkaCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IGVycm9yRmFjdG9yeS5jcmVhdGUoXCJiYWQtc3Vic2NyaXB0aW9uXCIgLyogQkFEX1NVQlNDUklQVElPTiAqLyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRva2VuRGV0YWlscy5mY21TZW5kZXJJZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IGVycm9yRmFjdG9yeS5jcmVhdGUoXCJiYWQtc2VuZGVyLWlkXCIgLyogQkFEX1NFTkRFUl9JRCAqLyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRva2VuRGV0YWlscy5mY21Ub2tlbikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IGVycm9yRmFjdG9yeS5jcmVhdGUoXCJiYWQtdG9rZW5cIiAvKiBCQURfVE9LRU4gKi8pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdmFsaWRhdGVJbnB1dHModG9rZW5EZXRhaWxzKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0aGlzLnB1dCh0b2tlbkRldGFpbHMpXTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBUaGlzIG1ldGhvZCBkZWxldGVzIGRldGFpbHMgb2YgdGhlIGN1cnJlbnQgRkNNIHRva2VuLlxyXG4gICAgICogSXQncyByZXR1cm5pbmcgYSBwcm9taXNlIGluIGNhc2Ugd2UgbmVlZCB0byBtb3ZlIHRvIGFuIGFzeW5jXHJcbiAgICAgKiBtZXRob2QgZm9yIGRlbGV0aW5nIGF0IGEgbGF0ZXIgZGF0ZS5cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJuIFJlc29sdmVzIG9uY2UgdGhlIEZDTSB0b2tlbiBkZXRhaWxzIGhhdmUgYmVlbiBkZWxldGVkIGFuZCByZXR1cm5zXHJcbiAgICAgKiB0aGUgZGVsZXRlZCBkZXRhaWxzLlxyXG4gICAgICovXHJcbiAgICBUb2tlbkRldGFpbHNNb2RlbC5wcm90b3R5cGUuZGVsZXRlVG9rZW4gPSBmdW5jdGlvbiAodG9rZW4pIHtcclxuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBkZXRhaWxzO1xyXG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRva2VuICE9PSAnc3RyaW5nJyB8fCB0b2tlbi5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBQcm9taXNlLnJlamVjdChlcnJvckZhY3RvcnkuY3JlYXRlKFwiaW52YWxpZC1kZWxldGUtdG9rZW5cIiAvKiBJTlZBTElEX0RFTEVURV9UT0tFTiAqLykpXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmdldFRva2VuRGV0YWlsc0Zyb21Ub2tlbih0b2tlbildO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGV0YWlscyA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFkZXRhaWxzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnJvckZhY3RvcnkuY3JlYXRlKFwiZGVsZXRlLXRva2VuLW5vdC1mb3VuZFwiIC8qIERFTEVURV9UT0tFTl9OT1RfRk9VTkQgKi8pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuZGVsZXRlKGRldGFpbHMuc3dTY29wZSldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgZGV0YWlsc107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBUb2tlbkRldGFpbHNNb2RlbDtcclxufShEYkludGVyZmFjZSkpO1xyXG4vKipcclxuICogVGhpcyBtZXRob2QgdGFrZXMgYW4gb2JqZWN0IGFuZCB3aWxsIGNoZWNrIGZvciBrbm93biBhcmd1bWVudHMgYW5kXHJcbiAqIHZhbGlkYXRlIHRoZSBpbnB1dC5cclxuICogQHJldHVybiBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgaWYgaW5wdXQgaXMgdmFsaWQsIHJlamVjdHMgb3RoZXJ3aXNlLlxyXG4gKi9cclxuZnVuY3Rpb24gdmFsaWRhdGVJbnB1dHMoaW5wdXQpIHtcclxuICAgIGlmIChpbnB1dC5mY21Ub2tlbikge1xyXG4gICAgICAgIGlmICh0eXBlb2YgaW5wdXQuZmNtVG9rZW4gIT09ICdzdHJpbmcnIHx8IGlucHV0LmZjbVRva2VuLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICB0aHJvdyBlcnJvckZhY3RvcnkuY3JlYXRlKFwiYmFkLXRva2VuXCIgLyogQkFEX1RPS0VOICovKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAoaW5wdXQuc3dTY29wZSkge1xyXG4gICAgICAgIGlmICh0eXBlb2YgaW5wdXQuc3dTY29wZSAhPT0gJ3N0cmluZycgfHwgaW5wdXQuc3dTY29wZS5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgdGhyb3cgZXJyb3JGYWN0b3J5LmNyZWF0ZShcImJhZC1zY29wZVwiIC8qIEJBRF9TQ09QRSAqLyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKGlucHV0LnZhcGlkS2V5KSB7XHJcbiAgICAgICAgaWYgKCEoaW5wdXQudmFwaWRLZXkgaW5zdGFuY2VvZiBVaW50OEFycmF5KSB8fFxyXG4gICAgICAgICAgICBpbnB1dC52YXBpZEtleS5sZW5ndGggIT09IDY1KSB7XHJcbiAgICAgICAgICAgIHRocm93IGVycm9yRmFjdG9yeS5jcmVhdGUoXCJiYWQtdmFwaWQta2V5XCIgLyogQkFEX1ZBUElEX0tFWSAqLyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKGlucHV0LmVuZHBvaW50KSB7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBpbnB1dC5lbmRwb2ludCAhPT0gJ3N0cmluZycgfHwgaW5wdXQuZW5kcG9pbnQubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIHRocm93IGVycm9yRmFjdG9yeS5jcmVhdGUoXCJiYWQtc3Vic2NyaXB0aW9uXCIgLyogQkFEX1NVQlNDUklQVElPTiAqLyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKGlucHV0LmF1dGgpIHtcclxuICAgICAgICBpZiAoIShpbnB1dC5hdXRoIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpKSB7XHJcbiAgICAgICAgICAgIHRocm93IGVycm9yRmFjdG9yeS5jcmVhdGUoXCJiYWQtc3Vic2NyaXB0aW9uXCIgLyogQkFEX1NVQlNDUklQVElPTiAqLyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKGlucHV0LnAyNTZkaCkge1xyXG4gICAgICAgIGlmICghKGlucHV0LnAyNTZkaCBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSkge1xyXG4gICAgICAgICAgICB0aHJvdyBlcnJvckZhY3RvcnkuY3JlYXRlKFwiYmFkLXN1YnNjcmlwdGlvblwiIC8qIEJBRF9TVUJTQ1JJUFRJT04gKi8pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGlmIChpbnB1dC5mY21TZW5kZXJJZCkge1xyXG4gICAgICAgIGlmICh0eXBlb2YgaW5wdXQuZmNtU2VuZGVySWQgIT09ICdzdHJpbmcnIHx8XHJcbiAgICAgICAgICAgIGlucHV0LmZjbVNlbmRlcklkLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICB0aHJvdyBlcnJvckZhY3RvcnkuY3JlYXRlKFwiYmFkLXNlbmRlci1pZFwiIC8qIEJBRF9TRU5ERVJfSUQgKi8pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxudmFyIFVOQ09NUFJFU1NFRF9QVUJMSUNfS0VZX1NJWkUgPSA2NTtcclxudmFyIFZhcGlkRGV0YWlsc01vZGVsID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgX19leHRlbmRzKFZhcGlkRGV0YWlsc01vZGVsLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gVmFwaWREZXRhaWxzTW9kZWwoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMuZGJOYW1lID0gJ2ZjbV92YXBpZF9kZXRhaWxzX2RiJztcclxuICAgICAgICBfdGhpcy5kYlZlcnNpb24gPSAxO1xyXG4gICAgICAgIF90aGlzLm9iamVjdFN0b3JlTmFtZSA9ICdmY21fdmFwaWRfb2JqZWN0X1N0b3JlJztcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICBWYXBpZERldGFpbHNNb2RlbC5wcm90b3R5cGUub25EYlVwZ3JhZGUgPSBmdW5jdGlvbiAocmVxdWVzdCkge1xyXG4gICAgICAgIHZhciBkYiA9IHJlcXVlc3QucmVzdWx0O1xyXG4gICAgICAgIGRiLmNyZWF0ZU9iamVjdFN0b3JlKHRoaXMub2JqZWN0U3RvcmVOYW1lLCB7IGtleVBhdGg6ICdzd1Njb3BlJyB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEdpdmVuIGEgc2VydmljZSB3b3JrZXIgc2NvcGUsIHRoaXMgbWV0aG9kIHdpbGwgbG9vayB1cCB0aGUgdmFwaWQga2V5XHJcbiAgICAgKiBpbiBpbmRleGVkREIuXHJcbiAgICAgKi9cclxuICAgIFZhcGlkRGV0YWlsc01vZGVsLnByb3RvdHlwZS5nZXRWYXBpZEZyb21TV1Njb3BlID0gZnVuY3Rpb24gKHN3U2NvcGUpIHtcclxuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciByZXN1bHQ7XHJcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygc3dTY29wZSAhPT0gJ3N0cmluZycgfHwgc3dTY29wZS5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IGVycm9yRmFjdG9yeS5jcmVhdGUoXCJiYWQtc2NvcGVcIiAvKiBCQURfU0NPUEUgKi8pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuZ2V0KHN3U2NvcGUpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHJlc3VsdCA/IHJlc3VsdC52YXBpZEtleSA6IHVuZGVmaW5lZF07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogU2F2ZSBhIHZhcGlkIGtleSBhZ2FpbnN0IGEgc3dTY29wZSBmb3IgbGF0ZXIgZGF0ZS5cclxuICAgICAqL1xyXG4gICAgVmFwaWREZXRhaWxzTW9kZWwucHJvdG90eXBlLnNhdmVWYXBpZERldGFpbHMgPSBmdW5jdGlvbiAoc3dTY29wZSwgdmFwaWRLZXkpIHtcclxuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBkZXRhaWxzO1xyXG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHN3U2NvcGUgIT09ICdzdHJpbmcnIHx8IHN3U2NvcGUubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyb3JGYWN0b3J5LmNyZWF0ZShcImJhZC1zY29wZVwiIC8qIEJBRF9TQ09QRSAqLyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAodmFwaWRLZXkgPT09IG51bGwgfHwgdmFwaWRLZXkubGVuZ3RoICE9PSBVTkNPTVBSRVNTRURfUFVCTElDX0tFWV9TSVpFKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyb3JGYWN0b3J5LmNyZWF0ZShcImJhZC12YXBpZC1rZXlcIiAvKiBCQURfVkFQSURfS0VZICovKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGRldGFpbHMgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3dTY29wZTogc3dTY29wZSxcclxuICAgICAgICAgICAgICAgICAgICB2YXBpZEtleTogdmFwaWRLZXlcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdGhpcy5wdXQoZGV0YWlscyldO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFRoaXMgbWV0aG9kIGRlbGV0ZXMgZGV0YWlscyBvZiB0aGUgY3VycmVudCBGQ00gVkFQSUQga2V5IGZvciBhIFNXIHNjb3BlLlxyXG4gICAgICogUmVzb2x2ZXMgb25jZSB0aGUgc2NvcGUvdmFwaWQgZGV0YWlscyBoYXZlIGJlZW4gZGVsZXRlZCBhbmQgcmV0dXJucyB0aGVcclxuICAgICAqIGRlbGV0ZWQgdmFwaWQga2V5LlxyXG4gICAgICovXHJcbiAgICBWYXBpZERldGFpbHNNb2RlbC5wcm90b3R5cGUuZGVsZXRlVmFwaWREZXRhaWxzID0gZnVuY3Rpb24gKHN3U2NvcGUpIHtcclxuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciB2YXBpZEtleTtcclxuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDogcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5nZXRWYXBpZEZyb21TV1Njb3BlKHN3U2NvcGUpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhcGlkS2V5ID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXZhcGlkS2V5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnJvckZhY3RvcnkuY3JlYXRlKFwiZGVsZXRlLXNjb3BlLW5vdC1mb3VuZFwiIC8qIERFTEVURV9TQ09QRV9OT1RfRk9VTkQgKi8pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuZGVsZXRlKHN3U2NvcGUpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHZhcGlkS2V5XTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFZhcGlkRGV0YWlsc01vZGVsO1xyXG59KERiSW50ZXJmYWNlKSk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vLyBUb2tlbiBzaG91bGQgYmUgcmVmcmVzaGVkIG9uY2UgYSB3ZWVrLlxyXG52YXIgVE9LRU5fRVhQSVJBVElPTl9NSUxMSVMgPSA3ICogMjQgKiA2MCAqIDYwICogMTAwMDsgLy8gNyBkYXlzXHJcbnZhciBCYXNlQ29udHJvbGxlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEJhc2VDb250cm9sbGVyKHNlcnZpY2VzKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB0aGlzLnNlcnZpY2VzID0gc2VydmljZXM7XHJcbiAgICAgICAgdGhpcy52YXBpZERldGFpbHNNb2RlbCA9IG5ldyBWYXBpZERldGFpbHNNb2RlbCgpO1xyXG4gICAgICAgIHRoaXMuc3Vic2NyaXB0aW9uTWFuYWdlciA9IG5ldyBTdWJzY3JpcHRpb25NYW5hZ2VyKCk7XHJcbiAgICAgICAgdmFyIGFwcCA9IHNlcnZpY2VzLmFwcDtcclxuICAgICAgICB0aGlzLmFwcCA9IGFwcDtcclxuICAgICAgICBpZiAoIWFwcC5vcHRpb25zLm1lc3NhZ2luZ1NlbmRlcklkIHx8XHJcbiAgICAgICAgICAgIHR5cGVvZiBhcHAub3B0aW9ucy5tZXNzYWdpbmdTZW5kZXJJZCAhPT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgdGhyb3cgZXJyb3JGYWN0b3J5LmNyZWF0ZShcImJhZC1zZW5kZXItaWRcIiAvKiBCQURfU0VOREVSX0lEICovKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5JTlRFUk5BTCA9IHtcclxuICAgICAgICAgICAgZGVsZXRlOiBmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5kZWxldGUoKTsgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy50b2tlbkRldGFpbHNNb2RlbCA9IG5ldyBUb2tlbkRldGFpbHNNb2RlbChzZXJ2aWNlcyk7XHJcbiAgICB9XHJcbiAgICBCYXNlQ29udHJvbGxlci5wcm90b3R5cGUuZ2V0VG9rZW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgcGVybWlzc2lvbiwgc3dSZWcsIHB1YmxpY1ZhcGlkS2V5LCBwdXNoU3Vic2NyaXB0aW9uLCB0b2tlbkRldGFpbHM7XHJcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBlcm1pc3Npb24gPSB0aGlzLmdldE5vdGlmaWNhdGlvblBlcm1pc3Npb24oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEocGVybWlzc2lvbiA9PT0gJ2RlZmF1bHQnKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgMl07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMucmVxdWVzdE5vdGlmaWNhdGlvblBlcm1pc3Npb24oKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGUgdXNlciBoYXNuJ3QgYWxsb3dlZCBvciBkZW5pZWQgbm90aWZpY2F0aW9ucyB5ZXQuIEFzayB0aGVtLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwZXJtaXNzaW9uID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDI7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocGVybWlzc2lvbiAhPT0gJ2dyYW50ZWQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnJvckZhY3RvcnkuY3JlYXRlKFwibm90aWZpY2F0aW9ucy1ibG9ja2VkXCIgLyogTk9USUZJQ0FUSU9OU19CTE9DS0VEICovKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmdldFNXUmVnaXN0cmF0aW9uXygpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN3UmVnID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmdldFB1YmxpY1ZhcGlkS2V5XygpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHB1YmxpY1ZhcGlkS2V5ID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmdldFB1c2hTdWJzY3JpcHRpb24oc3dSZWcsIHB1YmxpY1ZhcGlkS2V5KV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA1OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwdXNoU3Vic2NyaXB0aW9uID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLnRva2VuRGV0YWlsc01vZGVsLmdldFRva2VuRGV0YWlsc0Zyb21TV1Njb3BlKHN3UmVnLnNjb3BlKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA2OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b2tlbkRldGFpbHMgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0b2tlbkRldGFpbHMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0aGlzLm1hbmFnZUV4aXN0aW5nVG9rZW4oc3dSZWcsIHB1c2hTdWJzY3JpcHRpb24sIHB1YmxpY1ZhcGlkS2V5LCB0b2tlbkRldGFpbHMpXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdGhpcy5nZXROZXdUb2tlbihzd1JlZywgcHVzaFN1YnNjcmlwdGlvbiwgcHVibGljVmFwaWRLZXkpXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBtYW5hZ2VFeGlzdGluZ1Rva2VuIGlzIHRyaWdnZXJlZCBpZiB0aGVyZSdzIGFuIGV4aXN0aW5nIEZDTSB0b2tlbiBpbiB0aGVcclxuICAgICAqIGRhdGFiYXNlIGFuZCBpdCBjYW4gdGFrZSAzIGRpZmZlcmVudCBhY3Rpb25zOlxyXG4gICAgICogMSkgUmV0cmlldmUgdGhlIGV4aXN0aW5nIEZDTSB0b2tlbiBmcm9tIHRoZSBkYXRhYmFzZS5cclxuICAgICAqIDIpIElmIFZBUElEIGRldGFpbHMgaGF2ZSBjaGFuZ2VkOiBEZWxldGUgdGhlIGV4aXN0aW5nIHRva2VuIGFuZCBjcmVhdGUgYVxyXG4gICAgICogbmV3IG9uZSB3aXRoIHRoZSBuZXcgVkFQSUQga2V5LlxyXG4gICAgICogMykgSWYgdGhlIGRhdGFiYXNlIGNhY2hlIGlzIGludmFsaWRhdGVkOiBTZW5kIGEgcmVxdWVzdCB0byBGQ00gdG8gdXBkYXRlXHJcbiAgICAgKiB0aGUgdG9rZW4sIGFuZCB0byBjaGVjayBpZiB0aGUgdG9rZW4gaXMgc3RpbGwgdmFsaWQgb24gRkNNLXNpZGUuXHJcbiAgICAgKi9cclxuICAgIEJhc2VDb250cm9sbGVyLnByb3RvdHlwZS5tYW5hZ2VFeGlzdGluZ1Rva2VuID0gZnVuY3Rpb24gKHN3UmVnLCBwdXNoU3Vic2NyaXB0aW9uLCBwdWJsaWNWYXBpZEtleSwgdG9rZW5EZXRhaWxzKSB7XHJcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgaXNUb2tlblZhbGlkLCBub3c7XHJcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzVG9rZW5WYWxpZCA9IGlzVG9rZW5TdGlsbFZhbGlkKHB1c2hTdWJzY3JpcHRpb24sIHB1YmxpY1ZhcGlkS2V5LCB0b2tlbkRldGFpbHMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWlzVG9rZW5WYWxpZCkgcmV0dXJuIFszIC8qYnJlYWsqLywgMV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vdyA9IERhdGUubm93KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub3cgPCB0b2tlbkRldGFpbHMuY3JlYXRlVGltZSArIFRPS0VOX0VYUElSQVRJT05fTUlMTElTKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdG9rZW5EZXRhaWxzLmZjbVRva2VuXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0aGlzLnVwZGF0ZVRva2VuKHN3UmVnLCBwdXNoU3Vic2NyaXB0aW9uLCBwdWJsaWNWYXBpZEtleSwgdG9rZW5EZXRhaWxzKV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6IFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZSB0b2tlbiBpcyBubyBsb25nZXIgdmFsaWQgKGZvciBleGFtcGxlIGlmIHRoZSBWQVBJRCBkZXRhaWxzXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gaGF2ZSBjaGFuZ2VkKSwgZGVsZXRlIHRoZSBleGlzdGluZyB0b2tlbiBmcm9tIHRoZSBGQ00gY2xpZW50IGFuZCBzZXJ2ZXJcclxuICAgICAgICAgICAgICAgICAgICAvLyBkYXRhYmFzZS4gTm8gbmVlZCB0byB1bnN1YnNjcmliZSBmcm9tIHRoZSBTZXJ2aWNlIFdvcmtlciBhcyB3ZSBoYXZlIGFcclxuICAgICAgICAgICAgICAgICAgICAvLyBnb29kIHB1c2ggc3Vic2NyaXB0aW9uIHRoYXQgd2UnZCBsaWtlIHRvIHVzZSBpbiBnZXROZXdUb2tlbi5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmRlbGV0ZVRva2VuRnJvbURCKHRva2VuRGV0YWlscy5mY21Ub2tlbildO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlIHRva2VuIGlzIG5vIGxvbmdlciB2YWxpZCAoZm9yIGV4YW1wbGUgaWYgdGhlIFZBUElEIGRldGFpbHNcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gaGF2ZSBjaGFuZ2VkKSwgZGVsZXRlIHRoZSBleGlzdGluZyB0b2tlbiBmcm9tIHRoZSBGQ00gY2xpZW50IGFuZCBzZXJ2ZXJcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZGF0YWJhc2UuIE5vIG5lZWQgdG8gdW5zdWJzY3JpYmUgZnJvbSB0aGUgU2VydmljZSBXb3JrZXIgYXMgd2UgaGF2ZSBhXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGdvb2QgcHVzaCBzdWJzY3JpcHRpb24gdGhhdCB3ZSdkIGxpa2UgdG8gdXNlIGluIGdldE5ld1Rva2VuLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0aGlzLmdldE5ld1Rva2VuKHN3UmVnLCBwdXNoU3Vic2NyaXB0aW9uLCBwdWJsaWNWYXBpZEtleSldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBCYXNlQ29udHJvbGxlci5wcm90b3R5cGUudXBkYXRlVG9rZW4gPSBmdW5jdGlvbiAoc3dSZWcsIHB1c2hTdWJzY3JpcHRpb24sIHB1YmxpY1ZhcGlkS2V5LCB0b2tlbkRldGFpbHMpIHtcclxuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciB1cGRhdGVkVG9rZW4sIGFsbERldGFpbHMsIGVfMTtcclxuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2EudHJ5cy5wdXNoKFswLCA0LCAsIDZdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5zdWJzY3JpcHRpb25NYW5hZ2VyLnVwZGF0ZVRva2VuKHRva2VuRGV0YWlscywgdGhpcy5zZXJ2aWNlcywgcHVzaFN1YnNjcmlwdGlvbiwgcHVibGljVmFwaWRLZXkpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZWRUb2tlbiA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWxsRGV0YWlscyA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3U2NvcGU6IHN3UmVnLnNjb3BlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFwaWRLZXk6IHB1YmxpY1ZhcGlkS2V5LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmNtU2VuZGVySWQ6IHRoaXMuc2VydmljZXMuYXBwLm9wdGlvbnMubWVzc2FnaW5nU2VuZGVySWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmY21Ub2tlbjogdXBkYXRlZFRva2VuLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3JlYXRlVGltZTogRGF0ZS5ub3coKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZHBvaW50OiBwdXNoU3Vic2NyaXB0aW9uLmVuZHBvaW50LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXV0aDogcHVzaFN1YnNjcmlwdGlvbi5nZXRLZXkoJ2F1dGgnKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHAyNTZkaDogcHVzaFN1YnNjcmlwdGlvbi5nZXRLZXkoJ3AyNTZkaCcpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMudG9rZW5EZXRhaWxzTW9kZWwuc2F2ZVRva2VuRGV0YWlscyhhbGxEZXRhaWxzKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMudmFwaWREZXRhaWxzTW9kZWwuc2F2ZVZhcGlkRGV0YWlscyhzd1JlZy5zY29wZSwgcHVibGljVmFwaWRLZXkpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHVwZGF0ZWRUb2tlbl07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlXzEgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuZGVsZXRlVG9rZW4odG9rZW5EZXRhaWxzLmZjbVRva2VuKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA1OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IGVfMTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDY6IHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgQmFzZUNvbnRyb2xsZXIucHJvdG90eXBlLmdldE5ld1Rva2VuID0gZnVuY3Rpb24gKHN3UmVnLCBwdXNoU3Vic2NyaXB0aW9uLCBwdWJsaWNWYXBpZEtleSkge1xyXG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIG5ld1Rva2VuLCBhbGxEZXRhaWxzO1xyXG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOiByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLnN1YnNjcmlwdGlvbk1hbmFnZXIuZ2V0VG9rZW4odGhpcy5zZXJ2aWNlcywgcHVzaFN1YnNjcmlwdGlvbiwgcHVibGljVmFwaWRLZXkpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld1Rva2VuID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbGxEZXRhaWxzID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dTY29wZTogc3dSZWcuc2NvcGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXBpZEtleTogcHVibGljVmFwaWRLZXksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmY21TZW5kZXJJZDogdGhpcy5hcHAub3B0aW9ucy5tZXNzYWdpbmdTZW5kZXJJZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZjbVRva2VuOiBuZXdUb2tlbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNyZWF0ZVRpbWU6IERhdGUubm93KCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmRwb2ludDogcHVzaFN1YnNjcmlwdGlvbi5lbmRwb2ludCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF1dGg6IHB1c2hTdWJzY3JpcHRpb24uZ2V0S2V5KCdhdXRoJyksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwMjU2ZGg6IHB1c2hTdWJzY3JpcHRpb24uZ2V0S2V5KCdwMjU2ZGgnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLnRva2VuRGV0YWlsc01vZGVsLnNhdmVUb2tlbkRldGFpbHMoYWxsRGV0YWlscyldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLnZhcGlkRGV0YWlsc01vZGVsLnNhdmVWYXBpZERldGFpbHMoc3dSZWcuc2NvcGUsIHB1YmxpY1ZhcGlkS2V5KV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBuZXdUb2tlbl07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogVGhpcyBtZXRob2QgZGVsZXRlcyB0b2tlbnMgdGhhdCB0aGUgdG9rZW4gbWFuYWdlciBsb29rcyBhZnRlcixcclxuICAgICAqIHVuc3Vic2NyaWJlcyB0aGUgdG9rZW4gZnJvbSBGQ00gIGFuZCB0aGVuIHVucmVnaXN0ZXJzIHRoZSBwdXNoXHJcbiAgICAgKiBzdWJzY3JpcHRpb24gaWYgaXQgZXhpc3RzLiBJdCByZXR1cm5zIGEgcHJvbWlzZSB0aGF0IGluZGljYXRlc1xyXG4gICAgICogd2hldGhlciBvciBub3QgdGhlIHVuc3Vic2NyaWJlIHJlcXVlc3Qgd2FzIHByb2Nlc3NlZCBzdWNjZXNzZnVsbHkuXHJcbiAgICAgKi9cclxuICAgIEJhc2VDb250cm9sbGVyLnByb3RvdHlwZS5kZWxldGVUb2tlbiA9IGZ1bmN0aW9uICh0b2tlbikge1xyXG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHJlZ2lzdHJhdGlvbiwgcHVzaFN1YnNjcmlwdGlvbjtcclxuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDogXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gRGVsZXRlIHRoZSB0b2tlbiBkZXRhaWxzIGZyb20gdGhlIGRhdGFiYXNlLlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuZGVsZXRlVG9rZW5Gcm9tREIodG9rZW4pXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIERlbGV0ZSB0aGUgdG9rZW4gZGV0YWlscyBmcm9tIHRoZSBkYXRhYmFzZS5cclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmdldFNXUmVnaXN0cmF0aW9uXygpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZ2lzdHJhdGlvbiA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFyZWdpc3RyYXRpb24pIHJldHVybiBbMyAvKmJyZWFrKi8sIDRdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCByZWdpc3RyYXRpb24ucHVzaE1hbmFnZXIuZ2V0U3Vic2NyaXB0aW9uKCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHVzaFN1YnNjcmlwdGlvbiA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHB1c2hTdWJzY3JpcHRpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBwdXNoU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLmxhYmVsID0gNDtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6IFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZXJlJ3Mgbm8gU1csIGNvbnNpZGVyIGl0IGEgc3VjY2Vzcy5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdHJ1ZV07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogVGhpcyBtZXRob2Qgd2lsbCBkZWxldGUgdGhlIHRva2VuIGZyb20gdGhlIGNsaWVudCBkYXRhYmFzZSwgYW5kIG1ha2UgYVxyXG4gICAgICogY2FsbCB0byBGQ00gdG8gcmVtb3ZlIGl0IGZyb20gdGhlIHNlcnZlciBEQi4gRG9lcyBub3QgdGVtcGVyIHdpdGggdGhlXHJcbiAgICAgKiBwdXNoIHN1YnNjcmlwdGlvbi5cclxuICAgICAqL1xyXG4gICAgQmFzZUNvbnRyb2xsZXIucHJvdG90eXBlLmRlbGV0ZVRva2VuRnJvbURCID0gZnVuY3Rpb24gKHRva2VuKSB7XHJcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgdG9rZW5EZXRhaWxzLCBlXzI7XHJcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6IHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMudG9rZW5EZXRhaWxzTW9kZWwuZGVsZXRlVG9rZW4odG9rZW4pXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRva2VuRGV0YWlscyA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSAyO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2EudHJ5cy5wdXNoKFsyLCA0LCAsIDVdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5zdWJzY3JpcHRpb25NYW5hZ2VyLmRlbGV0ZVRva2VuKHRoaXMuc2VydmljZXMsIHRva2VuRGV0YWlscyldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCA1XTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVfMiA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQSBmYWlsZWQgc2VydmVyLXNpZGUgZGVsZXRlIGRvZXMgbm90IG5lZWQgdG8gYnJlYWsgdGhlIGFwcC5cclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlXzIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCA1XTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDU6IHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBHZXRzIGEgUHVzaFN1YnNjcmlwdGlvbiBmb3IgdGhlIGN1cnJlbnQgdXNlci5cclxuICAgICAqL1xyXG4gICAgQmFzZUNvbnRyb2xsZXIucHJvdG90eXBlLmdldFB1c2hTdWJzY3JpcHRpb24gPSBmdW5jdGlvbiAoc3dSZWdpc3RyYXRpb24sIHB1YmxpY1ZhcGlkS2V5KSB7XHJcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgc3Vic2NyaXB0aW9uO1xyXG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOiByZXR1cm4gWzQgLyp5aWVsZCovLCBzd1JlZ2lzdHJhdGlvbi5wdXNoTWFuYWdlci5nZXRTdWJzY3JpcHRpb24oKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJzY3JpcHRpb24gPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdWJzY3JpcHRpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBzdWJzY3JpcHRpb25dO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBzd1JlZ2lzdHJhdGlvbi5wdXNoTWFuYWdlci5zdWJzY3JpYmUoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJWaXNpYmxlT25seTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcHBsaWNhdGlvblNlcnZlcktleTogcHVibGljVmFwaWRLZXlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLy9cclxuICAgIC8vIFRoZSBmb2xsb3dpbmcgbWV0aG9kcyBzaG91bGQgb25seSBiZSBhdmFpbGFibGUgaW4gdGhlIHdpbmRvdy5cclxuICAgIC8vXHJcbiAgICAvKipcclxuICAgICAqIEBkZXByZWNhdGVkIFVzZSBOb3RpZmljYXRpb24ucmVxdWVzdFBlcm1pc3Npb24oKSBpbnN0ZWFkLlxyXG4gICAgICogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL05vdGlmaWNhdGlvbi9yZXF1ZXN0UGVybWlzc2lvblxyXG4gICAgICovXHJcbiAgICBCYXNlQ29udHJvbGxlci5wcm90b3R5cGUucmVxdWVzdFBlcm1pc3Npb24gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhyb3cgZXJyb3JGYWN0b3J5LmNyZWF0ZShcIm9ubHktYXZhaWxhYmxlLWluLXdpbmRvd1wiIC8qIEFWQUlMQUJMRV9JTl9XSU5ET1cgKi8pO1xyXG4gICAgfTtcclxuICAgIEJhc2VDb250cm9sbGVyLnByb3RvdHlwZS51c2VTZXJ2aWNlV29ya2VyID0gZnVuY3Rpb24gKF9yZWdpc3RyYXRpb24pIHtcclxuICAgICAgICB0aHJvdyBlcnJvckZhY3RvcnkuY3JlYXRlKFwib25seS1hdmFpbGFibGUtaW4td2luZG93XCIgLyogQVZBSUxBQkxFX0lOX1dJTkRPVyAqLyk7XHJcbiAgICB9O1xyXG4gICAgQmFzZUNvbnRyb2xsZXIucHJvdG90eXBlLnVzZVB1YmxpY1ZhcGlkS2V5ID0gZnVuY3Rpb24gKF9iNjRQdWJsaWNLZXkpIHtcclxuICAgICAgICB0aHJvdyBlcnJvckZhY3RvcnkuY3JlYXRlKFwib25seS1hdmFpbGFibGUtaW4td2luZG93XCIgLyogQVZBSUxBQkxFX0lOX1dJTkRPVyAqLyk7XHJcbiAgICB9O1xyXG4gICAgQmFzZUNvbnRyb2xsZXIucHJvdG90eXBlLm9uTWVzc2FnZSA9IGZ1bmN0aW9uIChfbmV4dE9yT2JzZXJ2ZXIsIF9lcnJvciwgX2NvbXBsZXRlZCkge1xyXG4gICAgICAgIHRocm93IGVycm9yRmFjdG9yeS5jcmVhdGUoXCJvbmx5LWF2YWlsYWJsZS1pbi13aW5kb3dcIiAvKiBBVkFJTEFCTEVfSU5fV0lORE9XICovKTtcclxuICAgIH07XHJcbiAgICBCYXNlQ29udHJvbGxlci5wcm90b3R5cGUub25Ub2tlblJlZnJlc2ggPSBmdW5jdGlvbiAoX25leHRPck9ic2VydmVyLCBfZXJyb3IsIF9jb21wbGV0ZWQpIHtcclxuICAgICAgICB0aHJvdyBlcnJvckZhY3RvcnkuY3JlYXRlKFwib25seS1hdmFpbGFibGUtaW4td2luZG93XCIgLyogQVZBSUxBQkxFX0lOX1dJTkRPVyAqLyk7XHJcbiAgICB9O1xyXG4gICAgLy9cclxuICAgIC8vIFRoZSBmb2xsb3dpbmcgbWV0aG9kcyBhcmUgdXNlZCBieSB0aGUgc2VydmljZSB3b3JrZXIgb25seS5cclxuICAgIC8vXHJcbiAgICBCYXNlQ29udHJvbGxlci5wcm90b3R5cGUuc2V0QmFja2dyb3VuZE1lc3NhZ2VIYW5kbGVyID0gZnVuY3Rpb24gKF9jYWxsYmFjaykge1xyXG4gICAgICAgIHRocm93IGVycm9yRmFjdG9yeS5jcmVhdGUoXCJvbmx5LWF2YWlsYWJsZS1pbi1zd1wiIC8qIEFWQUlMQUJMRV9JTl9TVyAqLyk7XHJcbiAgICB9O1xyXG4gICAgLy9cclxuICAgIC8vIFRoZSBmb2xsb3dpbmcgbWV0aG9kcyBhcmUgdXNlZCBieSB0aGUgc2VydmljZSB0aGVtc2VsdmVzIGFuZCBub3QgZXhwb3NlZFxyXG4gICAgLy8gcHVibGljbHkgb3Igbm90IGV4cGVjdGVkIHRvIGJlIHVzZWQgYnkgZGV2ZWxvcGVycy5cclxuICAgIC8vXHJcbiAgICAvKipcclxuICAgICAqIFRoaXMgbWV0aG9kIGlzIHJlcXVpcmVkIHRvIGFkaGVyZSB0byB0aGUgRmlyZWJhc2UgaW50ZXJmYWNlLlxyXG4gICAgICogSXQgY2xvc2VzIGFueSBjdXJyZW50bHkgb3BlbiBpbmRleGRiIGRhdGFiYXNlIGNvbm5lY3Rpb25zLlxyXG4gICAgICovXHJcbiAgICBCYXNlQ29udHJvbGxlci5wcm90b3R5cGUuZGVsZXRlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDogcmV0dXJuIFs0IC8qeWllbGQqLywgUHJvbWlzZS5hbGwoW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50b2tlbkRldGFpbHNNb2RlbC5jbG9zZURhdGFiYXNlKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnZhcGlkRGV0YWlsc01vZGVsLmNsb3NlRGF0YWJhc2UoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBdKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSBjdXJyZW50IE5vdGlmaWNhdGlvbiBQZXJtaXNzaW9uIHN0YXRlLlxyXG4gICAgICovXHJcbiAgICBCYXNlQ29udHJvbGxlci5wcm90b3R5cGUuZ2V0Tm90aWZpY2F0aW9uUGVybWlzc2lvbiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gTm90aWZpY2F0aW9uLnBlcm1pc3Npb247XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZXF1ZXN0cyBub3RpZmljYXRpb24gcGVybWlzc2lvbiBmcm9tIHRoZSB1c2VyLlxyXG4gICAgICovXHJcbiAgICBCYXNlQ29udHJvbGxlci5wcm90b3R5cGUucmVxdWVzdE5vdGlmaWNhdGlvblBlcm1pc3Npb24gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIU5vdGlmaWNhdGlvbi5yZXF1ZXN0UGVybWlzc2lvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIE5vdGlmaWNhdGlvbi5yZXF1ZXN0UGVybWlzc2lvbigpIGlzIG5vdCBhdmFpbGFibGUgaW4gc2VydmljZSB3b3JrZXJzLlxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFJldHVybiB0aGUgY3VycmVudCBwZXJtaXNzaW9uLlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBOb3RpZmljYXRpb24ucGVybWlzc2lvbl07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgTm90aWZpY2F0aW9uLnJlcXVlc3RQZXJtaXNzaW9uKCldO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBCYXNlQ29udHJvbGxlci5wcm90b3R5cGUuZ2V0VG9rZW5EZXRhaWxzTW9kZWwgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudG9rZW5EZXRhaWxzTW9kZWw7XHJcbiAgICB9O1xyXG4gICAgQmFzZUNvbnRyb2xsZXIucHJvdG90eXBlLmdldFZhcGlkRGV0YWlsc01vZGVsID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnZhcGlkRGV0YWlsc01vZGVsO1xyXG4gICAgfTtcclxuICAgIC8vIFZpc2libGUgZm9yIHRlc3RpbmdcclxuICAgIC8vIFRPRE86IG1ha2UgcHJvdGVjdGVkXHJcbiAgICBCYXNlQ29udHJvbGxlci5wcm90b3R5cGUuZ2V0U3Vic2NyaXB0aW9uTWFuYWdlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zdWJzY3JpcHRpb25NYW5hZ2VyO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBCYXNlQ29udHJvbGxlcjtcclxufSgpKTtcclxuLyoqXHJcbiAqIENoZWNrcyBpZiB0aGUgdG9rZW5EZXRhaWxzIG1hdGNoIHRoZSBkZXRhaWxzIHByb3ZpZGVkIGluIHRoZSBjbGllbnRzLlxyXG4gKi9cclxuZnVuY3Rpb24gaXNUb2tlblN0aWxsVmFsaWQocHVzaFN1YnNjcmlwdGlvbiwgcHVibGljVmFwaWRLZXksIHRva2VuRGV0YWlscykge1xyXG4gICAgaWYgKCF0b2tlbkRldGFpbHMudmFwaWRLZXkgfHxcclxuICAgICAgICAhaXNBcnJheUJ1ZmZlckVxdWFsKHB1YmxpY1ZhcGlkS2V5LmJ1ZmZlciwgdG9rZW5EZXRhaWxzLnZhcGlkS2V5LmJ1ZmZlcikpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICB2YXIgaXNFbmRwb2ludEVxdWFsID0gcHVzaFN1YnNjcmlwdGlvbi5lbmRwb2ludCA9PT0gdG9rZW5EZXRhaWxzLmVuZHBvaW50O1xyXG4gICAgdmFyIGlzQXV0aEVxdWFsID0gaXNBcnJheUJ1ZmZlckVxdWFsKHB1c2hTdWJzY3JpcHRpb24uZ2V0S2V5KCdhdXRoJyksIHRva2VuRGV0YWlscy5hdXRoKTtcclxuICAgIHZhciBpc1AyNTZkaEVxdWFsID0gaXNBcnJheUJ1ZmZlckVxdWFsKHB1c2hTdWJzY3JpcHRpb24uZ2V0S2V5KCdwMjU2ZGgnKSwgdG9rZW5EZXRhaWxzLnAyNTZkaCk7XHJcbiAgICByZXR1cm4gaXNFbmRwb2ludEVxdWFsICYmIGlzQXV0aEVxdWFsICYmIGlzUDI1NmRoRXF1YWw7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnZhciBGQ01fTVNHID0gJ0ZDTV9NU0cnO1xyXG52YXIgU3dDb250cm9sbGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgX19leHRlbmRzKFN3Q29udHJvbGxlciwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIFN3Q29udHJvbGxlcihzZXJ2aWNlcykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHNlcnZpY2VzKSB8fCB0aGlzO1xyXG4gICAgICAgIF90aGlzLmJnTWVzc2FnZUhhbmRsZXIgPSBudWxsO1xyXG4gICAgICAgIHNlbGYuYWRkRXZlbnRMaXN0ZW5lcigncHVzaCcsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIF90aGlzLm9uUHVzaChlKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBzZWxmLmFkZEV2ZW50TGlzdGVuZXIoJ3B1c2hzdWJzY3JpcHRpb25jaGFuZ2UnLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICBfdGhpcy5vblN1YkNoYW5nZShlKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBzZWxmLmFkZEV2ZW50TGlzdGVuZXIoJ25vdGlmaWNhdGlvbmNsaWNrJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgX3RoaXMub25Ob3RpZmljYXRpb25DbGljayhlKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICAvLyBWaXNpYmxlIGZvciB0ZXN0aW5nXHJcbiAgICAvLyBUT0RPOiBNYWtlIHByaXZhdGVcclxuICAgIFN3Q29udHJvbGxlci5wcm90b3R5cGUub25QdXNoID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgZXZlbnQud2FpdFVudGlsKHRoaXMub25QdXNoXyhldmVudCkpO1xyXG4gICAgfTtcclxuICAgIC8vIFZpc2libGUgZm9yIHRlc3RpbmdcclxuICAgIC8vIFRPRE86IE1ha2UgcHJpdmF0ZVxyXG4gICAgU3dDb250cm9sbGVyLnByb3RvdHlwZS5vblN1YkNoYW5nZSA9IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgIGV2ZW50LndhaXRVbnRpbCh0aGlzLm9uU3ViQ2hhbmdlXyhldmVudCkpO1xyXG4gICAgfTtcclxuICAgIC8vIFZpc2libGUgZm9yIHRlc3RpbmdcclxuICAgIC8vIFRPRE86IE1ha2UgcHJpdmF0ZVxyXG4gICAgU3dDb250cm9sbGVyLnByb3RvdHlwZS5vbk5vdGlmaWNhdGlvbkNsaWNrID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgZXZlbnQud2FpdFVudGlsKHRoaXMub25Ob3RpZmljYXRpb25DbGlja18oZXZlbnQpKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEEgaGFuZGxlciBmb3IgcHVzaCBldmVudHMgdGhhdCBzaG93cyBub3RpZmljYXRpb25zIGJhc2VkIG9uIHRoZSBjb250ZW50IG9mXHJcbiAgICAgKiB0aGUgcGF5bG9hZC5cclxuICAgICAqXHJcbiAgICAgKiBUaGUgcGF5bG9hZCBtdXN0IGJlIGEgSlNPTi1lbmNvZGVkIE9iamVjdCB3aXRoIGEgYG5vdGlmaWNhdGlvbmAga2V5LiBUaGVcclxuICAgICAqIHZhbHVlIG9mIHRoZSBgbm90aWZpY2F0aW9uYCBwcm9wZXJ0eSB3aWxsIGJlIHVzZWQgYXMgdGhlIE5vdGlmaWNhdGlvbk9wdGlvbnNcclxuICAgICAqIG9iamVjdCBwYXNzZWQgdG8gc2hvd05vdGlmaWNhdGlvbi4gQWRkaXRpb25hbGx5LCB0aGUgYHRpdGxlYCBwcm9wZXJ0eSBvZiB0aGVcclxuICAgICAqIG5vdGlmaWNhdGlvbiBvYmplY3Qgd2lsbCBiZSB1c2VkIGFzIHRoZSB0aXRsZS5cclxuICAgICAqXHJcbiAgICAgKiBJZiB0aGVyZSBpcyBubyBub3RpZmljYXRpb24gZGF0YSBpbiB0aGUgcGF5bG9hZCB0aGVuIG5vIG5vdGlmaWNhdGlvbiB3aWxsIGJlXHJcbiAgICAgKiBzaG93bi5cclxuICAgICAqL1xyXG4gICAgU3dDb250cm9sbGVyLnByb3RvdHlwZS5vblB1c2hfID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgbXNnUGF5bG9hZCwgaGFzVmlzaWJsZUNsaWVudHMsIG5vdGlmaWNhdGlvbkRldGFpbHMsIG5vdGlmaWNhdGlvblRpdGxlLCByZWcsIGFjdGlvbnMsIG1heEFjdGlvbnM7XHJcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZXZlbnQuZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtc2dQYXlsb2FkID0gZXZlbnQuZGF0YS5qc29uKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGVycikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm90IEpTT04gc28gbm90IGFuIEZDTSBtZXNzYWdlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5oYXNWaXNpYmxlQ2xpZW50c18oKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBoYXNWaXNpYmxlQ2xpZW50cyA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGhhc1Zpc2libGVDbGllbnRzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBBcHAgaW4gZm9yZWdyb3VuZC4gU2VuZCB0byBwYWdlLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMuc2VuZE1lc3NhZ2VUb1dpbmRvd0NsaWVudHNfKG1zZ1BheWxvYWQpXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBub3RpZmljYXRpb25EZXRhaWxzID0gdGhpcy5nZXROb3RpZmljYXRpb25EYXRhXyhtc2dQYXlsb2FkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFub3RpZmljYXRpb25EZXRhaWxzKSByZXR1cm4gWzMgLypicmVhayovLCAzXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbm90aWZpY2F0aW9uVGl0bGUgPSBub3RpZmljYXRpb25EZXRhaWxzLnRpdGxlIHx8ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmdldFNXUmVnaXN0cmF0aW9uXygpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZyA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9ucyA9IG5vdGlmaWNhdGlvbkRldGFpbHMuYWN0aW9ucztcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWF4QWN0aW9ucyA9IE5vdGlmaWNhdGlvbi5tYXhBY3Rpb25zO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYWN0aW9ucyAmJiBtYXhBY3Rpb25zICYmIGFjdGlvbnMubGVuZ3RoID4gbWF4QWN0aW9ucykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFwiVGhpcyBicm93c2VyIG9ubHkgc3VwcG9ydHMgXCIgKyBtYXhBY3Rpb25zICsgXCIgYWN0aW9ucy5cIiArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJUaGUgcmVtYWluaW5nIGFjdGlvbnMgd2lsbCBub3QgYmUgZGlzcGxheWVkLlwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgcmVnLnNob3dOb3RpZmljYXRpb24obm90aWZpY2F0aW9uVGl0bGUsIG5vdGlmaWNhdGlvbkRldGFpbHMpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5iZ01lc3NhZ2VIYW5kbGVyKSByZXR1cm4gWzMgLypicmVhayovLCA1XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5iZ01lc3NhZ2VIYW5kbGVyKG1zZ1BheWxvYWQpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNTogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBTd0NvbnRyb2xsZXIucHJvdG90eXBlLm9uU3ViQ2hhbmdlXyA9IGZ1bmN0aW9uIChfZXZlbnQpIHtcclxuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciByZWdpc3RyYXRpb24sIGVycl8xLCBlcnJfMiwgdG9rZW5EZXRhaWxzTW9kZWwsIHRva2VuRGV0YWlscztcclxuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2EudHJ5cy5wdXNoKFswLCAyLCAsIDNdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5nZXRTV1JlZ2lzdHJhdGlvbl8oKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWdpc3RyYXRpb24gPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDNdO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyXzEgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IGVycm9yRmFjdG9yeS5jcmVhdGUoXCJ1bmFibGUtdG8tcmVzdWJzY3JpYmVcIiAvKiBVTkFCTEVfVE9fUkVTVUJTQ1JJQkUgKi8sIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9ySW5mbzogZXJyXzFcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS50cnlzLnB1c2goWzMsIDUsICwgOF0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCByZWdpc3RyYXRpb24ucHVzaE1hbmFnZXIuZ2V0U3Vic2NyaXB0aW9uKCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCA4XTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycl8yID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b2tlbkRldGFpbHNNb2RlbCA9IHRoaXMuZ2V0VG9rZW5EZXRhaWxzTW9kZWwoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdG9rZW5EZXRhaWxzTW9kZWwuZ2V0VG9rZW5EZXRhaWxzRnJvbVNXU2NvcGUocmVnaXN0cmF0aW9uLnNjb3BlKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA2OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b2tlbkRldGFpbHMgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdG9rZW5EZXRhaWxzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGlzIHNob3VsZCByYXJlbHkgb2NjdXJlLCBidXQgY291bGQgaWYgaW5kZXhlZERCXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpcyBjb3JydXB0ZWQgb3Igd2lwZWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IGVycl8yO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEF0dGVtcHQgdG8gZGVsZXRlIHRoZSB0b2tlbiBpZiB3ZSBrbm93IGl0J3MgYmFkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuZGVsZXRlVG9rZW4odG9rZW5EZXRhaWxzLmZjbVRva2VuKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA3OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBBdHRlbXB0IHRvIGRlbGV0ZSB0aGUgdG9rZW4gaWYgd2Uga25vdyBpdCdzIGJhZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IGVycl8yO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgODogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBTd0NvbnRyb2xsZXIucHJvdG90eXBlLm9uTm90aWZpY2F0aW9uQ2xpY2tfID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgbXNnUGF5bG9hZCwgbGluaywgd2luZG93Q2xpZW50LCBpbnRlcm5hbE1zZztcclxuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFldmVudC5ub3RpZmljYXRpb24gfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICFldmVudC5ub3RpZmljYXRpb24uZGF0YSB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIWV2ZW50Lm5vdGlmaWNhdGlvbi5kYXRhW0ZDTV9NU0ddKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBOb3QgYW4gRkNNIG5vdGlmaWNhdGlvbiwgZG8gbm90aGluZy5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChldmVudC5hY3Rpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFVzZXIgY2xpY2tlZCBvbiBhbiBhY3Rpb24gYnV0dG9uLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhpcyB3aWxsIGFsbG93IGRldnMgdG8gYWN0IG9uIGFjdGlvbiBidXR0b24gY2xpY2tzIGJ5IHVzaW5nIGEgY3VzdG9tXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBvbk5vdGlmaWNhdGlvbkNsaWNrIGxpc3RlbmVyIHRoYXQgdGhleSBkZWZpbmUuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gUHJldmVudCBvdGhlciBsaXN0ZW5lcnMgZnJvbSByZWNlaXZpbmcgdGhlIGV2ZW50XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudC5ub3RpZmljYXRpb24uY2xvc2UoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbXNnUGF5bG9hZCA9IGV2ZW50Lm5vdGlmaWNhdGlvbi5kYXRhW0ZDTV9NU0ddO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW1zZ1BheWxvYWQubm90aWZpY2F0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBOb3RoaW5nIHRvIGRvLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpbmsgPSAobXNnUGF5bG9hZC5mY21PcHRpb25zICYmIG1zZ1BheWxvYWQuZmNtT3B0aW9ucy5saW5rKSB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbXNnUGF5bG9hZC5ub3RpZmljYXRpb24uY2xpY2tfYWN0aW9uO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWxpbmspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtc2dQYXlsb2FkLmRhdGEgJiYgRk5fQ0FNUEFJR05fSUQgaW4gbXNnUGF5bG9hZC5kYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGluayA9IHNlbGYubG9jYXRpb24ub3JpZ2luO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm90aGluZyB0byBkby5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5nZXRXaW5kb3dDbGllbnRfKGxpbmspXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvd0NsaWVudCA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEhd2luZG93Q2xpZW50KSByZXR1cm4gWzMgLypicmVhayovLCA0XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgc2VsZi5jbGllbnRzLm9wZW5XaW5kb3cobGluayldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVW5hYmxlIHRvIGZpbmQgd2luZG93IGNsaWVudCBzbyBuZWVkIHRvIG9wZW4gb25lLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3dDbGllbnQgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdhaXQgdGhyZWUgc2Vjb25kcyBmb3IgdGhlIGNsaWVudCB0byBpbml0aWFsaXplIGFuZCBzZXQgdXAgdGhlIG1lc3NhZ2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gaGFuZGxlciBzbyB0aGF0IGl0IGNhbiByZWNlaXZlIHRoZSBtZXNzYWdlLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBzbGVlcCgzMDAwKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBXYWl0IHRocmVlIHNlY29uZHMgZm9yIHRoZSBjbGllbnQgdG8gaW5pdGlhbGl6ZSBhbmQgc2V0IHVwIHRoZSBtZXNzYWdlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGhhbmRsZXIgc28gdGhhdCBpdCBjYW4gcmVjZWl2ZSB0aGUgbWVzc2FnZS5cclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCA2XTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6IHJldHVybiBbNCAvKnlpZWxkKi8sIHdpbmRvd0NsaWVudC5mb2N1cygpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvd0NsaWVudCA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSA2O1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF3aW5kb3dDbGllbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdpbmRvdyBDbGllbnQgd2lsbCBub3QgYmUgcmV0dXJuZWQgaWYgaXQncyBmb3IgYSB0aGlyZCBwYXJ0eSBvcmlnaW4uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRGVsZXRlIG5vdGlmaWNhdGlvbiBhbmQgZmNtT3B0aW9ucyBkYXRhIGZyb20gcGF5bG9hZCBiZWZvcmUgc2VuZGluZyB0b1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGUgcGFnZS5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIG1zZ1BheWxvYWQubm90aWZpY2F0aW9uO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgbXNnUGF5bG9hZC5mY21PcHRpb25zO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnRlcm5hbE1zZyA9IGNyZWF0ZU5ld01zZyhNZXNzYWdlVHlwZS5OT1RJRklDQVRJT05fQ0xJQ0tFRCwgbXNnUGF5bG9hZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEF0dGVtcHQgdG8gc2VuZCBhIG1lc3NhZ2UgdG8gdGhlIGNsaWVudCB0byBoYW5kbGUgdGhlIGRhdGFcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSXMgYWZmZWN0ZWQgYnk6IGh0dHBzOi8vZ2l0aHViLmNvbS9zbGlnaHRseW9mZi9TZXJ2aWNlV29ya2VyL2lzc3Vlcy83MjhcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMuYXR0ZW1wdFRvTWVzc2FnZUNsaWVudF8od2luZG93Q2xpZW50LCBpbnRlcm5hbE1zZyldO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvLyBWaXNpYmxlIGZvciB0ZXN0aW5nXHJcbiAgICAvLyBUT0RPOiBNYWtlIHByaXZhdGVcclxuICAgIFN3Q29udHJvbGxlci5wcm90b3R5cGUuZ2V0Tm90aWZpY2F0aW9uRGF0YV8gPSBmdW5jdGlvbiAobXNnUGF5bG9hZCkge1xyXG4gICAgICAgIHZhciBfYTtcclxuICAgICAgICBpZiAoIW1zZ1BheWxvYWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodHlwZW9mIG1zZ1BheWxvYWQubm90aWZpY2F0aW9uICE9PSAnb2JqZWN0Jykge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBub3RpZmljYXRpb25JbmZvcm1hdGlvbiA9IF9fYXNzaWduKHt9LCBtc2dQYXlsb2FkLm5vdGlmaWNhdGlvbik7XHJcbiAgICAgICAgLy8gUHV0IHRoZSBtZXNzYWdlIHBheWxvYWQgdW5kZXIgRkNNX01TRyBuYW1lIHNvIHdlIGNhbiBpZGVudGlmeSB0aGVcclxuICAgICAgICAvLyBub3RpZmljYXRpb24gYXMgYmVpbmcgYW4gRkNNIG5vdGlmaWNhdGlvbiB2cyBhIG5vdGlmaWNhdGlvbiBmcm9tXHJcbiAgICAgICAgLy8gc29tZXdoZXJlIGVsc2UgKGkuZS4gbm9ybWFsIHdlYiBwdXNoIG9yIGRldmVsb3BlciBnZW5lcmF0ZWRcclxuICAgICAgICAvLyBub3RpZmljYXRpb24pLlxyXG4gICAgICAgIG5vdGlmaWNhdGlvbkluZm9ybWF0aW9uLmRhdGEgPSBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgbXNnUGF5bG9hZC5ub3RpZmljYXRpb24uZGF0YSksIChfYSA9IHt9LCBfYVtGQ01fTVNHXSA9IG1zZ1BheWxvYWQsIF9hKSk7XHJcbiAgICAgICAgcmV0dXJuIG5vdGlmaWNhdGlvbkluZm9ybWF0aW9uO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQ2FsbGluZyBzZXRCYWNrZ3JvdW5kTWVzc2FnZUhhbmRsZXIgd2lsbCBvcHQgaW4gdG8gc29tZSBzcGVjaWZpY1xyXG4gICAgICogYmVoYXZpb3Vycy5cclxuICAgICAqIDEuKSBJZiBhIG5vdGlmaWNhdGlvbiBkb2Vzbid0IG5lZWQgdG8gYmUgc2hvd24gZHVlIHRvIGEgd2luZG93IGFscmVhZHlcclxuICAgICAqIGJlaW5nIHZpc2libGUsIHRoZW4gcHVzaCBtZXNzYWdlcyB3aWxsIGJlIHNlbnQgdG8gdGhlIHBhZ2UuXHJcbiAgICAgKiAyLikgSWYgYSBub3RpZmljYXRpb24gbmVlZHMgdG8gYmUgc2hvd24sIGFuZCB0aGUgbWVzc2FnZSBjb250YWlucyBub1xyXG4gICAgICogbm90aWZpY2F0aW9uIGRhdGEgdGhpcyBtZXRob2Qgd2lsbCBiZSBjYWxsZWRcclxuICAgICAqIGFuZCB0aGUgcHJvbWlzZSBpdCByZXR1cm5zIHdpbGwgYmUgcGFzc2VkIHRvIGV2ZW50LndhaXRVbnRpbC5cclxuICAgICAqIElmIHlvdSBkbyBub3Qgc2V0IHRoaXMgY2FsbGJhY2sgdGhlbiBhbGwgcHVzaCBtZXNzYWdlcyB3aWxsIGxldCBhbmQgdGhlXHJcbiAgICAgKiBkZXZlbG9wZXIgY2FuIGhhbmRsZSB0aGVtIGluIGEgdGhlaXIgb3duICdwdXNoJyBldmVudCBjYWxsYmFja1xyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBjYWxsYmFjayBUaGUgY2FsbGJhY2sgdG8gYmUgY2FsbGVkIHdoZW4gYSBwdXNoIG1lc3NhZ2UgaXMgcmVjZWl2ZWRcclxuICAgICAqIGFuZCBhIG5vdGlmaWNhdGlvbiBtdXN0IGJlIHNob3duLiBUaGUgY2FsbGJhY2sgd2lsbCBiZSBnaXZlbiB0aGUgZGF0YSBmcm9tXHJcbiAgICAgKiB0aGUgcHVzaCBtZXNzYWdlLlxyXG4gICAgICovXHJcbiAgICBTd0NvbnRyb2xsZXIucHJvdG90eXBlLnNldEJhY2tncm91bmRNZXNzYWdlSGFuZGxlciA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xyXG4gICAgICAgIGlmICghY2FsbGJhY2sgfHwgdHlwZW9mIGNhbGxiYWNrICE9PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgIHRocm93IGVycm9yRmFjdG9yeS5jcmVhdGUoXCJiZy1oYW5kbGVyLWZ1bmN0aW9uLWV4cGVjdGVkXCIgLyogQkdfSEFORExFUl9GVU5DVElPTl9FWFBFQ1RFRCAqLyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuYmdNZXNzYWdlSGFuZGxlciA9IGNhbGxiYWNrO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIHVybCBUaGUgVVJMIHRvIGxvb2sgZm9yIHdoZW4gZm9jdXNpbmcgYSBjbGllbnQuXHJcbiAgICAgKiBAcmV0dXJuIFJldHVybnMgYW4gZXhpc3Rpbmcgd2luZG93IGNsaWVudCBvciBhIG5ld2x5IG9wZW5lZCBXaW5kb3dDbGllbnQuXHJcbiAgICAgKi9cclxuICAgIC8vIFZpc2libGUgZm9yIHRlc3RpbmdcclxuICAgIC8vIFRPRE86IE1ha2UgcHJpdmF0ZVxyXG4gICAgU3dDb250cm9sbGVyLnByb3RvdHlwZS5nZXRXaW5kb3dDbGllbnRfID0gZnVuY3Rpb24gKHVybCkge1xyXG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHBhcnNlZFVSTCwgY2xpZW50TGlzdCwgc3VpdGFibGVDbGllbnQsIGksIHBhcnNlZENsaWVudFVybDtcclxuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VkVVJMID0gbmV3IFVSTCh1cmwsIHNlbGYubG9jYXRpb24uaHJlZikuaHJlZjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgZ2V0Q2xpZW50TGlzdCgpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsaWVudExpc3QgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1aXRhYmxlQ2xpZW50ID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IGNsaWVudExpc3QubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlZENsaWVudFVybCA9IG5ldyBVUkwoY2xpZW50TGlzdFtpXS51cmwsIHNlbGYubG9jYXRpb24uaHJlZilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuaHJlZjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYXJzZWRDbGllbnRVcmwgPT09IHBhcnNlZFVSTCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1aXRhYmxlQ2xpZW50ID0gY2xpZW50TGlzdFtpXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgc3VpdGFibGVDbGllbnRdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFRoaXMgbWVzc2FnZSB3aWxsIGF0dGVtcHQgdG8gc2VuZCB0aGUgbWVzc2FnZSB0byBhIHdpbmRvdyBjbGllbnQuXHJcbiAgICAgKiBAcGFyYW0gY2xpZW50IFRoZSBXaW5kb3dDbGllbnQgdG8gc2VuZCB0aGUgbWVzc2FnZSB0by5cclxuICAgICAqIEBwYXJhbSBtZXNzYWdlIFRoZSBtZXNzYWdlIHRvIHNlbmQgdG8gdGhlIGNsaWVudC5cclxuICAgICAqIEByZXR1cm5zIFJldHVybnMgYSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgYWZ0ZXIgc2VuZGluZyB0aGUgbWVzc2FnZS4gVGhpc1xyXG4gICAgICogZG9lcyBub3QgZ3VhcmFudGVlIHRoYXQgdGhlIG1lc3NhZ2Ugd2FzIHN1Y2Nlc3NmdWxseSByZWNlaXZlZC5cclxuICAgICAqL1xyXG4gICAgLy8gVmlzaWJsZSBmb3IgdGVzdGluZ1xyXG4gICAgLy8gVE9ETzogTWFrZSBwcml2YXRlXHJcbiAgICBTd0NvbnRyb2xsZXIucHJvdG90eXBlLmF0dGVtcHRUb01lc3NhZ2VDbGllbnRfID0gZnVuY3Rpb24gKGNsaWVudCwgbWVzc2FnZSkge1xyXG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgLy8gTk9URTogVGhpcyByZXR1cm5zIGEgcHJvbWlzZSBpbiBjYXNlIHRoaXMgQVBJIGlzIGFic3RyYWN0ZWQgbGF0ZXIgb24gdG9cclxuICAgICAgICAgICAgICAgIC8vIGRvIGFkZGl0aW9uYWwgd29ya1xyXG4gICAgICAgICAgICAgICAgaWYgKCFjbGllbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnJvckZhY3RvcnkuY3JlYXRlKFwibm8td2luZG93LWNsaWVudC10by1tc2dcIiAvKiBOT19XSU5ET1dfQ0xJRU5UX1RPX01TRyAqLyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjbGllbnQucG9zdE1lc3NhZ2UobWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQHJldHVybnMgSWYgdGhlcmUgaXMgY3VycmVudGx5IGEgdmlzaWJsZSBXaW5kb3dDbGllbnQsIHRoaXMgbWV0aG9kIHdpbGxcclxuICAgICAqIHJlc29sdmUgdG8gdHJ1ZSwgb3RoZXJ3aXNlIGZhbHNlLlxyXG4gICAgICovXHJcbiAgICAvLyBWaXNpYmxlIGZvciB0ZXN0aW5nXHJcbiAgICAvLyBUT0RPOiBNYWtlIHByaXZhdGVcclxuICAgIFN3Q29udHJvbGxlci5wcm90b3R5cGUuaGFzVmlzaWJsZUNsaWVudHNfID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGNsaWVudExpc3Q7XHJcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6IHJldHVybiBbNCAvKnlpZWxkKi8sIGdldENsaWVudExpc3QoKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGllbnRMaXN0ID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgY2xpZW50TGlzdC5zb21lKGZ1bmN0aW9uIChjbGllbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2xpZW50LnZpc2liaWxpdHlTdGF0ZSA9PT0gJ3Zpc2libGUnICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIElnbm9yZSBjaHJvbWUtZXh0ZW5zaW9uIGNsaWVudHMgYXMgdGhhdCBtYXRjaGVzIHRoZSBiYWNrZ3JvdW5kIHBhZ2VzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9mIGV4dGVuc2lvbnMsIHdoaWNoIGFyZSBhbHdheXMgY29uc2lkZXJlZCB2aXNpYmxlLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAhY2xpZW50LnVybC5zdGFydHNXaXRoKCdjaHJvbWUtZXh0ZW5zaW9uOi8vJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KV07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIG1zZ1BheWxvYWQgVGhlIGRhdGEgZnJvbSB0aGUgcHVzaCBldmVudCB0aGF0IHNob3VsZCBiZSBzZW50IHRvIGFsbFxyXG4gICAgICogYXZhaWxhYmxlIHBhZ2VzLlxyXG4gICAgICogQHJldHVybnMgUmV0dXJucyBhIHByb21pc2UgdGhhdCByZXNvbHZlcyBvbmNlIHRoZSBtZXNzYWdlIGhhcyBiZWVuIHNlbnQgdG9cclxuICAgICAqIGFsbCBXaW5kb3dDbGllbnRzLlxyXG4gICAgICovXHJcbiAgICAvLyBWaXNpYmxlIGZvciB0ZXN0aW5nXHJcbiAgICAvLyBUT0RPOiBNYWtlIHByaXZhdGVcclxuICAgIFN3Q29udHJvbGxlci5wcm90b3R5cGUuc2VuZE1lc3NhZ2VUb1dpbmRvd0NsaWVudHNfID0gZnVuY3Rpb24gKG1zZ1BheWxvYWQpIHtcclxuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBjbGllbnRMaXN0LCBpbnRlcm5hbE1zZztcclxuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDogcmV0dXJuIFs0IC8qeWllbGQqLywgZ2V0Q2xpZW50TGlzdCgpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsaWVudExpc3QgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGludGVybmFsTXNnID0gY3JlYXRlTmV3TXNnKE1lc3NhZ2VUeXBlLlBVU0hfTVNHX1JFQ0VJVkVELCBtc2dQYXlsb2FkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgUHJvbWlzZS5hbGwoY2xpZW50TGlzdC5tYXAoZnVuY3Rpb24gKGNsaWVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5hdHRlbXB0VG9NZXNzYWdlQ2xpZW50XyhjbGllbnQsIGludGVybmFsTXNnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBUaGlzIHdpbGwgcmVnaXN0ZXIgdGhlIGRlZmF1bHQgc2VydmljZSB3b3JrZXIgYW5kIHJldHVybiB0aGUgcmVnaXN0cmF0aW9uLlxyXG4gICAgICogQHJldHVybiBoZSBzZXJ2aWNlIHdvcmtlciByZWdpc3RyYXRpb24gdG8gYmUgdXNlZCBmb3IgdGhlIHB1c2ggc2VydmljZS5cclxuICAgICAqL1xyXG4gICAgU3dDb250cm9sbGVyLnByb3RvdHlwZS5nZXRTV1JlZ2lzdHJhdGlvbl8gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgc2VsZi5yZWdpc3RyYXRpb25dO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFRoaXMgd2lsbCByZXR1cm4gdGhlIGRlZmF1bHQgVkFQSUQga2V5IG9yIHRoZSB1aW50OGFycmF5IHZlcnNpb24gb2YgdGhlXHJcbiAgICAgKiBwdWJsaWMgVkFQSUQga2V5IHByb3ZpZGVkIGJ5IHRoZSBkZXZlbG9wZXIuXHJcbiAgICAgKi9cclxuICAgIFN3Q29udHJvbGxlci5wcm90b3R5cGUuZ2V0UHVibGljVmFwaWRLZXlfID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHN3UmVnLCB2YXBpZEtleUZyb21EYXRhYmFzZTtcclxuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDogcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5nZXRTV1JlZ2lzdHJhdGlvbl8oKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzd1JlZyA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFzd1JlZykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyb3JGYWN0b3J5LmNyZWF0ZShcInN3LXJlZ2lzdHJhdGlvbi1leHBlY3RlZFwiIC8qIFNXX1JFR0lTVFJBVElPTl9FWFBFQ1RFRCAqLyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5nZXRWYXBpZERldGFpbHNNb2RlbCgpLmdldFZhcGlkRnJvbVNXU2NvcGUoc3dSZWcuc2NvcGUpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhcGlkS2V5RnJvbURhdGFiYXNlID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFwaWRLZXlGcm9tRGF0YWJhc2UgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIERFRkFVTFRfUFVCTElDX1ZBUElEX0tFWV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHZhcGlkS2V5RnJvbURhdGFiYXNlXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFN3Q29udHJvbGxlcjtcclxufShCYXNlQ29udHJvbGxlcikpO1xyXG5mdW5jdGlvbiBnZXRDbGllbnRMaXN0KCkge1xyXG4gICAgcmV0dXJuIHNlbGYuY2xpZW50cy5tYXRjaEFsbCh7XHJcbiAgICAgICAgdHlwZTogJ3dpbmRvdycsXHJcbiAgICAgICAgaW5jbHVkZVVuY29udHJvbGxlZDogdHJ1ZVxyXG4gICAgICAgIC8vIFRTIGRvZXNuJ3Qga25vdyB0aGF0IFwidHlwZTogJ3dpbmRvdydcIiBtZWFucyBpdCdsbCByZXR1cm4gV2luZG93Q2xpZW50W11cclxuICAgIH0pO1xyXG59XHJcbmZ1bmN0aW9uIGNyZWF0ZU5ld01zZyhtc2dUeXBlLCBtc2dEYXRhKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGZpcmViYXNlTWVzc2FnaW5nVHlwZTogbXNnVHlwZSxcclxuICAgICAgICBmaXJlYmFzZU1lc3NhZ2luZ0RhdGE6IG1zZ0RhdGFcclxuICAgIH07XHJcbn1cclxuZnVuY3Rpb24gc2xlZXAobXMpIHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xyXG4gICAgICAgIHNldFRpbWVvdXQocmVzb2x2ZSwgbXMpO1xyXG4gICAgfSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnZhciBERUZBVUxUX1NXX1BBVEggPSAnL2ZpcmViYXNlLW1lc3NhZ2luZy1zdy5qcyc7XHJcbnZhciBERUZBVUxUX1NXX1NDT1BFID0gJy9maXJlYmFzZS1jbG91ZC1tZXNzYWdpbmctcHVzaC1zY29wZSc7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG52YXIgV2luZG93Q29udHJvbGxlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIF9fZXh0ZW5kcyhXaW5kb3dDb250cm9sbGVyLCBfc3VwZXIpO1xyXG4gICAgLyoqXHJcbiAgICAgKiBBIHNlcnZpY2UgdGhhdCBwcm92aWRlcyBhIE1lc3NhZ2luZ1NlcnZpY2UgaW5zdGFuY2UuXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIFdpbmRvd0NvbnRyb2xsZXIoc2VydmljZXMpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBzZXJ2aWNlcykgfHwgdGhpcztcclxuICAgICAgICBfdGhpcy5yZWdpc3RyYXRpb25Ub1VzZSA9IG51bGw7XHJcbiAgICAgICAgX3RoaXMucHVibGljVmFwaWRLZXlUb1VzZSA9IG51bGw7XHJcbiAgICAgICAgX3RoaXMubWVzc2FnZU9ic2VydmVyID0gbnVsbDtcclxuICAgICAgICAvLyBAdHMtaWdub3JlOiBVbnVzZWQgdmFyaWFibGUgZXJyb3IsIHRoaXMgaXMgbm90IGltcGxlbWVudGVkIHlldC5cclxuICAgICAgICBfdGhpcy50b2tlblJlZnJlc2hPYnNlcnZlciA9IG51bGw7XHJcbiAgICAgICAgX3RoaXMub25NZXNzYWdlSW50ZXJuYWwgPSBjcmVhdGVTdWJzY3JpYmUoZnVuY3Rpb24gKG9ic2VydmVyKSB7XHJcbiAgICAgICAgICAgIF90aGlzLm1lc3NhZ2VPYnNlcnZlciA9IG9ic2VydmVyO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIF90aGlzLm9uVG9rZW5SZWZyZXNoSW50ZXJuYWwgPSBjcmVhdGVTdWJzY3JpYmUoZnVuY3Rpb24gKG9ic2VydmVyKSB7XHJcbiAgICAgICAgICAgIF90aGlzLnRva2VuUmVmcmVzaE9ic2VydmVyID0gb2JzZXJ2ZXI7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgX3RoaXMuc2V0dXBTV01lc3NhZ2VMaXN0ZW5lcl8oKTtcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFJlcXVlc3QgcGVybWlzc2lvbiBpZiBpdCBpcyBub3QgY3VycmVudGx5IGdyYW50ZWRcclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJuIFJlc29sdmVzIGlmIHRoZSBwZXJtaXNzaW9uIHdhcyBncmFudGVkLCBvdGhlcndpc2UgcmVqZWN0c1xyXG4gICAgICpcclxuICAgICAqIEBkZXByZWNhdGVkIFVzZSBOb3RpZmljYXRpb24ucmVxdWVzdFBlcm1pc3Npb24oKSBpbnN0ZWFkLlxyXG4gICAgICogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL05vdGlmaWNhdGlvbi9yZXF1ZXN0UGVybWlzc2lvblxyXG4gICAgICovXHJcbiAgICBXaW5kb3dDb250cm9sbGVyLnByb3RvdHlwZS5yZXF1ZXN0UGVybWlzc2lvbiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBwZXJtaXNzaW9uUmVzdWx0O1xyXG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoTm90aWZpY2F0aW9uLnBlcm1pc3Npb24gPT09ICdncmFudGVkJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIE5vdGlmaWNhdGlvbi5yZXF1ZXN0UGVybWlzc2lvbigpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBlcm1pc3Npb25SZXN1bHQgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwZXJtaXNzaW9uUmVzdWx0ID09PSAnZ3JhbnRlZCcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChwZXJtaXNzaW9uUmVzdWx0ID09PSAnZGVuaWVkJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyb3JGYWN0b3J5LmNyZWF0ZShcInBlcm1pc3Npb24tYmxvY2tlZFwiIC8qIFBFUk1JU1NJT05fQkxPQ0tFRCAqLyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnJvckZhY3RvcnkuY3JlYXRlKFwicGVybWlzc2lvbi1kZWZhdWx0XCIgLyogUEVSTUlTU0lPTl9ERUZBVUxUICovKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFRoaXMgbWV0aG9kIGFsbG93cyBhIGRldmVsb3BlciB0byBvdmVycmlkZSB0aGUgZGVmYXVsdCBzZXJ2aWNlIHdvcmtlciBhbmRcclxuICAgICAqIGluc3RlYWQgdXNlIGEgY3VzdG9tIHNlcnZpY2Ugd29ya2VyLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSByZWdpc3RyYXRpb24gVGhlIHNlcnZpY2Ugd29ya2VyIHJlZ2lzdHJhdGlvbiB0aGF0IHNob3VsZCBiZSB1c2VkIHRvXHJcbiAgICAgKiByZWNlaXZlIHRoZSBwdXNoIG1lc3NhZ2VzLlxyXG4gICAgICovXHJcbiAgICBXaW5kb3dDb250cm9sbGVyLnByb3RvdHlwZS51c2VTZXJ2aWNlV29ya2VyID0gZnVuY3Rpb24gKHJlZ2lzdHJhdGlvbikge1xyXG4gICAgICAgIGlmICghKHJlZ2lzdHJhdGlvbiBpbnN0YW5jZW9mIFNlcnZpY2VXb3JrZXJSZWdpc3RyYXRpb24pKSB7XHJcbiAgICAgICAgICAgIHRocm93IGVycm9yRmFjdG9yeS5jcmVhdGUoXCJzdy1yZWdpc3RyYXRpb24tZXhwZWN0ZWRcIiAvKiBTV19SRUdJU1RSQVRJT05fRVhQRUNURUQgKi8pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5yZWdpc3RyYXRpb25Ub1VzZSAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRocm93IGVycm9yRmFjdG9yeS5jcmVhdGUoXCJ1c2Utc3ctYmVmb3JlLWdldC10b2tlblwiIC8qIFVTRV9TV19CRUZPUkVfR0VUX1RPS0VOICovKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5yZWdpc3RyYXRpb25Ub1VzZSA9IHJlZ2lzdHJhdGlvbjtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFRoaXMgbWV0aG9kIGFsbG93cyBhIGRldmVsb3BlciB0byBvdmVycmlkZSB0aGUgZGVmYXVsdCB2YXBpZCBrZXlcclxuICAgICAqIGFuZCBpbnN0ZWFkIHVzZSBhIGN1c3RvbSBWQVBJRCBwdWJsaWMga2V5LlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBwdWJsaWNLZXkgQSBVUkwgc2FmZSBiYXNlNjQgZW5jb2RlZCBzdHJpbmcuXHJcbiAgICAgKi9cclxuICAgIFdpbmRvd0NvbnRyb2xsZXIucHJvdG90eXBlLnVzZVB1YmxpY1ZhcGlkS2V5ID0gZnVuY3Rpb24gKHB1YmxpY0tleSkge1xyXG4gICAgICAgIGlmICh0eXBlb2YgcHVibGljS2V5ICE9PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICB0aHJvdyBlcnJvckZhY3RvcnkuY3JlYXRlKFwiaW52YWxpZC1wdWJsaWMtdmFwaWQta2V5XCIgLyogSU5WQUxJRF9QVUJMSUNfVkFQSURfS0VZICovKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMucHVibGljVmFwaWRLZXlUb1VzZSAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRocm93IGVycm9yRmFjdG9yeS5jcmVhdGUoXCJ1c2UtcHVibGljLWtleS1iZWZvcmUtZ2V0LXRva2VuXCIgLyogVVNFX1BVQkxJQ19LRVlfQkVGT1JFX0dFVF9UT0tFTiAqLyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBwYXJzZWRLZXkgPSBiYXNlNjRUb0FycmF5QnVmZmVyKHB1YmxpY0tleSk7XHJcbiAgICAgICAgaWYgKHBhcnNlZEtleS5sZW5ndGggIT09IDY1KSB7XHJcbiAgICAgICAgICAgIHRocm93IGVycm9yRmFjdG9yeS5jcmVhdGUoXCJwdWJsaWMtdmFwaWQta2V5LWRlY3J5cHRpb24tZmFpbGVkXCIgLyogUFVCTElDX0tFWV9ERUNSWVBUSU9OX0ZBSUxFRCAqLyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMucHVibGljVmFwaWRLZXlUb1VzZSA9IHBhcnNlZEtleTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEBleHBvcnRcclxuICAgICAqIEBwYXJhbSBuZXh0T3JPYnNlcnZlciBBbiBvYnNlcnZlciBvYmplY3Qgb3IgYSBmdW5jdGlvbiB0cmlnZ2VyZWQgb25cclxuICAgICAqIG1lc3NhZ2UuXHJcbiAgICAgKiBAcGFyYW0gZXJyb3IgQSBmdW5jdGlvbiB0cmlnZ2VyZWQgb24gbWVzc2FnZSBlcnJvci5cclxuICAgICAqIEBwYXJhbSBjb21wbGV0ZWQgZnVuY3Rpb24gdHJpZ2dlcmVkIHdoZW4gdGhlIG9ic2VydmVyIGlzIHJlbW92ZWQuXHJcbiAgICAgKiBAcmV0dXJuIFRoZSB1bnN1YnNjcmliZSBmdW5jdGlvbiBmb3IgdGhlIG9ic2VydmVyLlxyXG4gICAgICovXHJcbiAgICBXaW5kb3dDb250cm9sbGVyLnByb3RvdHlwZS5vbk1lc3NhZ2UgPSBmdW5jdGlvbiAobmV4dE9yT2JzZXJ2ZXIsIGVycm9yLCBjb21wbGV0ZWQpIHtcclxuICAgICAgICBpZiAodHlwZW9mIG5leHRPck9ic2VydmVyID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm9uTWVzc2FnZUludGVybmFsKG5leHRPck9ic2VydmVyLCBlcnJvciwgY29tcGxldGVkKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm9uTWVzc2FnZUludGVybmFsKG5leHRPck9ic2VydmVyKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0gbmV4dE9yT2JzZXJ2ZXIgQW4gb2JzZXJ2ZXIgb2JqZWN0IG9yIGEgZnVuY3Rpb24gdHJpZ2dlcmVkIG9uIHRva2VuXHJcbiAgICAgKiByZWZyZXNoLlxyXG4gICAgICogQHBhcmFtIGVycm9yIEEgZnVuY3Rpb24gdHJpZ2dlcmVkIG9uIHRva2VuIHJlZnJlc2ggZXJyb3IuXHJcbiAgICAgKiBAcGFyYW0gY29tcGxldGVkIGZ1bmN0aW9uIHRyaWdnZXJlZCB3aGVuIHRoZSBvYnNlcnZlciBpcyByZW1vdmVkLlxyXG4gICAgICogQHJldHVybiBUaGUgdW5zdWJzY3JpYmUgZnVuY3Rpb24gZm9yIHRoZSBvYnNlcnZlci5cclxuICAgICAqL1xyXG4gICAgV2luZG93Q29udHJvbGxlci5wcm90b3R5cGUub25Ub2tlblJlZnJlc2ggPSBmdW5jdGlvbiAobmV4dE9yT2JzZXJ2ZXIsIGVycm9yLCBjb21wbGV0ZWQpIHtcclxuICAgICAgICBpZiAodHlwZW9mIG5leHRPck9ic2VydmVyID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm9uVG9rZW5SZWZyZXNoSW50ZXJuYWwobmV4dE9yT2JzZXJ2ZXIsIGVycm9yLCBjb21wbGV0ZWQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMub25Ub2tlblJlZnJlc2hJbnRlcm5hbChuZXh0T3JPYnNlcnZlcik7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogR2l2ZW4gYSByZWdpc3RyYXRpb24sIHdhaXQgZm9yIHRoZSBzZXJ2aWNlIHdvcmtlciBpdCByZWxhdGVzIHRvXHJcbiAgICAgKiBiZWNvbWUgYWN0aXZlclxyXG4gICAgICogQHBhcmFtIHJlZ2lzdHJhdGlvbiBSZWdpc3RyYXRpb24gdG8gd2FpdCBmb3Igc2VydmljZSB3b3JrZXIgdG8gYmVjb21lIGFjdGl2ZVxyXG4gICAgICogQHJldHVybiBXYWl0IGZvciBzZXJ2aWNlIHdvcmtlciByZWdpc3RyYXRpb24gdG8gYmVjb21lIGFjdGl2ZVxyXG4gICAgICovXHJcbiAgICAvLyBWaXNpYmxlIGZvciB0ZXN0aW5nXHJcbiAgICAvLyBUT0RPOiBNYWtlIHByaXZhdGVcclxuICAgIFdpbmRvd0NvbnRyb2xsZXIucHJvdG90eXBlLndhaXRGb3JSZWdpc3RyYXRpb25Ub0FjdGl2YXRlXyA9IGZ1bmN0aW9uIChyZWdpc3RyYXRpb24pIHtcclxuICAgICAgICB2YXIgc2VydmljZVdvcmtlciA9IHJlZ2lzdHJhdGlvbi5pbnN0YWxsaW5nIHx8IHJlZ2lzdHJhdGlvbi53YWl0aW5nIHx8IHJlZ2lzdHJhdGlvbi5hY3RpdmU7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgaWYgKCFzZXJ2aWNlV29ya2VyKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBUaGlzIGlzIGEgcmFyZSBzY2VuYXJpbyBidXQgaGFzIG9jY3VyZWQgaW4gZmlyZWZveFxyXG4gICAgICAgICAgICAgICAgcmVqZWN0KGVycm9yRmFjdG9yeS5jcmVhdGUoXCJuby1zdy1pbi1yZWdcIiAvKiBOT19TV19JTl9SRUcgKi8pKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBCZWNhdXNlIHRoZSBQcm9taXNlIGZ1bmN0aW9uIGlzIGNhbGxlZCBvbiBuZXh0IHRpY2sgdGhlcmUgaXMgYVxyXG4gICAgICAgICAgICAvLyBzbWFsbCBjaGFuY2UgdGhhdCB0aGUgd29ya2VyIGJlY2FtZSBhY3RpdmUgb3IgcmVkdW5kYW50IGFscmVhZHkuXHJcbiAgICAgICAgICAgIGlmIChzZXJ2aWNlV29ya2VyLnN0YXRlID09PSAnYWN0aXZhdGVkJykge1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZShyZWdpc3RyYXRpb24pO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChzZXJ2aWNlV29ya2VyLnN0YXRlID09PSAncmVkdW5kYW50Jykge1xyXG4gICAgICAgICAgICAgICAgcmVqZWN0KGVycm9yRmFjdG9yeS5jcmVhdGUoXCJzdy1yZWctcmVkdW5kYW50XCIgLyogU1dfUkVHX1JFRFVOREFOVCAqLykpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciBzdGF0ZUNoYW5nZUxpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHNlcnZpY2VXb3JrZXIuc3RhdGUgPT09ICdhY3RpdmF0ZWQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShyZWdpc3RyYXRpb24pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoc2VydmljZVdvcmtlci5zdGF0ZSA9PT0gJ3JlZHVuZGFudCcpIHtcclxuICAgICAgICAgICAgICAgICAgICByZWplY3QoZXJyb3JGYWN0b3J5LmNyZWF0ZShcInN3LXJlZy1yZWR1bmRhbnRcIiAvKiBTV19SRUdfUkVEVU5EQU5UICovKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBSZXR1cm4gZWFybHkgYW5kIHdhaXQgdG8gbmV4dCBzdGF0ZSBjaGFuZ2VcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBzZXJ2aWNlV29ya2VyLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3N0YXRlY2hhbmdlJywgc3RhdGVDaGFuZ2VMaXN0ZW5lcik7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHNlcnZpY2VXb3JrZXIuYWRkRXZlbnRMaXN0ZW5lcignc3RhdGVjaGFuZ2UnLCBzdGF0ZUNoYW5nZUxpc3RlbmVyKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFRoaXMgd2lsbCByZWdpc3RlciB0aGUgZGVmYXVsdCBzZXJ2aWNlIHdvcmtlciBhbmQgcmV0dXJuIHRoZSByZWdpc3RyYXRpb25cclxuICAgICAqIEByZXR1cm4gVGhlIHNlcnZpY2Ugd29ya2VyIHJlZ2lzdHJhdGlvbiB0byBiZSB1c2VkIGZvciB0aGUgcHVzaCBzZXJ2aWNlLlxyXG4gICAgICovXHJcbiAgICBXaW5kb3dDb250cm9sbGVyLnByb3RvdHlwZS5nZXRTV1JlZ2lzdHJhdGlvbl8gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBpZiAodGhpcy5yZWdpc3RyYXRpb25Ub1VzZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy53YWl0Rm9yUmVnaXN0cmF0aW9uVG9BY3RpdmF0ZV8odGhpcy5yZWdpc3RyYXRpb25Ub1VzZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIE1ha2UgdGhlIHJlZ2lzdHJhdGlvbiBudWxsIHNvIHdlIGtub3cgdXNlU2VydmljZVdvcmtlciB3aWxsIG5vdFxyXG4gICAgICAgIC8vIHVzZSBhIG5ldyBzZXJ2aWNlIHdvcmtlciBhcyByZWdpc3RyYXRpb25Ub1VzZSBpcyBubyBsb25nZXIgdW5kZWZpbmVkXHJcbiAgICAgICAgdGhpcy5yZWdpc3RyYXRpb25Ub1VzZSA9IG51bGw7XHJcbiAgICAgICAgcmV0dXJuIG5hdmlnYXRvci5zZXJ2aWNlV29ya2VyXHJcbiAgICAgICAgICAgIC5yZWdpc3RlcihERUZBVUxUX1NXX1BBVEgsIHtcclxuICAgICAgICAgICAgc2NvcGU6IERFRkFVTFRfU1dfU0NPUEVcclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKGVycikge1xyXG4gICAgICAgICAgICB0aHJvdyBlcnJvckZhY3RvcnkuY3JlYXRlKFwiZmFpbGVkLXNlcnZpY2V3b3JrZXItcmVnaXN0cmF0aW9uXCIgLyogRkFJTEVEX0RFRkFVTFRfUkVHSVNUUkFUSU9OICovLCB7XHJcbiAgICAgICAgICAgICAgICBicm93c2VyRXJyb3JNZXNzYWdlOiBlcnIubWVzc2FnZVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAocmVnaXN0cmF0aW9uKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy53YWl0Rm9yUmVnaXN0cmF0aW9uVG9BY3RpdmF0ZV8ocmVnaXN0cmF0aW9uKS50aGVuKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLnJlZ2lzdHJhdGlvblRvVXNlID0gcmVnaXN0cmF0aW9uO1xyXG4gICAgICAgICAgICAgICAgLy8gV2UgdXBkYXRlIGFmdGVyIGFjdGl2YXRpb24gZHVlIHRvIGFuIGlzc3VlIHdpdGggRmlyZWZveCB2NDkgd2hlcmVcclxuICAgICAgICAgICAgICAgIC8vIGEgcmFjZSBjb25kaXRpb24gb2NjYXNzaW9uYWxseSBjYXVzZXMgdGhlIHNlcnZpY2Ugd29ya2VyIHRvIG5vdFxyXG4gICAgICAgICAgICAgICAgLy8gaW5zdGFsbFxyXG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1mbG9hdGluZy1wcm9taXNlc1xyXG4gICAgICAgICAgICAgICAgcmVnaXN0cmF0aW9uLnVwZGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2lzdHJhdGlvbjtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBUaGlzIHdpbGwgcmV0dXJuIHRoZSBkZWZhdWx0IFZBUElEIGtleSBvciB0aGUgdWludDhhcnJheSB2ZXJzaW9uIG9mIHRoZVxyXG4gICAgICogcHVibGljIFZBUElEIGtleSBwcm92aWRlZCBieSB0aGUgZGV2ZWxvcGVyLlxyXG4gICAgICovXHJcbiAgICBXaW5kb3dDb250cm9sbGVyLnByb3RvdHlwZS5nZXRQdWJsaWNWYXBpZEtleV8gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wdWJsaWNWYXBpZEtleVRvVXNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMucHVibGljVmFwaWRLZXlUb1VzZV07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgREVGQVVMVF9QVUJMSUNfVkFQSURfS0VZXTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBUaGlzIG1ldGhvZCB3aWxsIHNldCB1cCBhIG1lc3NhZ2UgbGlzdGVuZXIgdG8gaGFuZGxlXHJcbiAgICAgKiBldmVudHMgZnJvbSB0aGUgc2VydmljZSB3b3JrZXIgdGhhdCBzaG91bGQgdHJpZ2dlclxyXG4gICAgICogZXZlbnRzIGluIHRoZSBwYWdlLlxyXG4gICAgICovXHJcbiAgICAvLyBWaXNpYmxlIGZvciB0ZXN0aW5nXHJcbiAgICAvLyBUT0RPOiBNYWtlIHByaXZhdGVcclxuICAgIFdpbmRvd0NvbnRyb2xsZXIucHJvdG90eXBlLnNldHVwU1dNZXNzYWdlTGlzdGVuZXJfID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgbmF2aWdhdG9yLnNlcnZpY2VXb3JrZXIuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIGZ1bmN0aW9uIChldmVudCkgeyByZXR1cm4gX19hd2FpdGVyKF90aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgX2EsIGZpcmViYXNlTWVzc2FnaW5nVHlwZSwgZmlyZWJhc2VNZXNzYWdpbmdEYXRhLCBkYXRhLCBldmVudFR5cGUsIGFuYWx5dGljcztcclxuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYikge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYi5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFldmVudC5kYXRhIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAhZXZlbnQuZGF0YS5maXJlYmFzZU1lc3NhZ2luZ1R5cGUgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICFldmVudC5kYXRhLmZpcmViYXNlTWVzc2FnaW5nRGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm90IGEgbWVzc2FnZSBmcm9tIEZDTVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hID0gZXZlbnQuZGF0YSwgZmlyZWJhc2VNZXNzYWdpbmdUeXBlID0gX2EuZmlyZWJhc2VNZXNzYWdpbmdUeXBlLCBmaXJlYmFzZU1lc3NhZ2luZ0RhdGEgPSBfYS5maXJlYmFzZU1lc3NhZ2luZ0RhdGE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm1lc3NhZ2VPYnNlcnZlcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlT2JzZXJ2ZXIubmV4dChmaXJlYmFzZU1lc3NhZ2luZ0RhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEgPSBmaXJlYmFzZU1lc3NhZ2luZ0RhdGEuZGF0YTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEoZGF0YSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgRk5fQ0FNUEFJR05fSUQgaW4gZGF0YSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVtGTl9DQU1QQUlHTl9BTkFMWVRJQ1NfRU5BQkxFRF0gPT09ICcxJykpIHJldHVybiBbMyAvKmJyZWFrKi8sIDJdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudFR5cGUgPSBnZXRFdmVudFR5cGUoZmlyZWJhc2VNZXNzYWdpbmdUeXBlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5zZXJ2aWNlcy5hbmFseXRpY3NQcm92aWRlci5nZXQoKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbmFseXRpY3MgPSBfYi5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFuYWx5dGljcy5sb2dFdmVudChldmVudFR5cGUsIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiBlc2xpbnQtZGlzYWJsZSBjYW1lbGNhc2UgKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZV9uYW1lOiBkYXRhW0ZOX0NBTVBBSUdOX05BTUVdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZV9pZDogZGF0YVtGTl9DQU1QQUlHTl9JRF0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlX3RpbWU6IGRhdGFbRk5fQ0FNUEFJR05fVElNRV0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlX2RldmljZV90aW1lOiBNYXRoLmZsb29yKERhdGUubm93KCkgLyAxMDAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIGVzbGludC1lbmFibGUgY2FtZWxjYXNlICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9iLmxhYmVsID0gMjtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6IHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7IH0sIGZhbHNlKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gV2luZG93Q29udHJvbGxlcjtcclxufShCYXNlQ29udHJvbGxlcikpO1xyXG5mdW5jdGlvbiBnZXRFdmVudFR5cGUobWVzc2FnZVR5cGUpIHtcclxuICAgIHN3aXRjaCAobWVzc2FnZVR5cGUpIHtcclxuICAgICAgICBjYXNlIE1lc3NhZ2VUeXBlLk5PVElGSUNBVElPTl9DTElDS0VEOlxyXG4gICAgICAgICAgICByZXR1cm4gJ25vdGlmaWNhdGlvbl9vcGVuJztcclxuICAgICAgICBjYXNlIE1lc3NhZ2VUeXBlLlBVU0hfTVNHX1JFQ0VJVkVEOlxyXG4gICAgICAgICAgICByZXR1cm4gJ25vdGlmaWNhdGlvbl9mb3JlZ3JvdW5kJztcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoKTtcclxuICAgIH1cclxufVxuXG52YXIgbmFtZSA9IFwiQGZpcmViYXNlL21lc3NhZ2luZ1wiO1xudmFyIHZlcnNpb24gPSBcIjAuNi4wXCI7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiByZWdpc3Rlck1lc3NhZ2luZyhpbnN0YW5jZSkge1xyXG4gICAgdmFyIG1lc3NhZ2luZ05hbWUgPSAnbWVzc2FnaW5nJztcclxuICAgIHZhciBmYWN0b3J5TWV0aG9kID0gZnVuY3Rpb24gKGNvbnRhaW5lcikge1xyXG4gICAgICAgIC8qIERlcGVuZGVuY2llcyAqL1xyXG4gICAgICAgIHZhciBhcHAgPSBjb250YWluZXIuZ2V0UHJvdmlkZXIoJ2FwcCcpLmdldEltbWVkaWF0ZSgpO1xyXG4gICAgICAgIHZhciBpbnN0YWxsYXRpb25zID0gY29udGFpbmVyLmdldFByb3ZpZGVyKCdpbnN0YWxsYXRpb25zJykuZ2V0SW1tZWRpYXRlKCk7XHJcbiAgICAgICAgdmFyIGFuYWx5dGljc1Byb3ZpZGVyID0gY29udGFpbmVyLmdldFByb3ZpZGVyKCdhbmFseXRpY3MtaW50ZXJuYWwnKTtcclxuICAgICAgICB2YXIgZmlyZWJhc2VTZXJ2aWNlcyA9IHtcclxuICAgICAgICAgICAgYXBwOiBhcHAsXHJcbiAgICAgICAgICAgIGluc3RhbGxhdGlvbnM6IGluc3RhbGxhdGlvbnMsXHJcbiAgICAgICAgICAgIGFuYWx5dGljc1Byb3ZpZGVyOiBhbmFseXRpY3NQcm92aWRlclxyXG4gICAgICAgIH07XHJcbiAgICAgICAgaWYgKCFpc1N1cHBvcnRlZCgpKSB7XHJcbiAgICAgICAgICAgIHRocm93IGVycm9yRmFjdG9yeS5jcmVhdGUoXCJ1bnN1cHBvcnRlZC1icm93c2VyXCIgLyogVU5TVVBQT1JURURfQlJPV1NFUiAqLyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChzZWxmICYmICdTZXJ2aWNlV29ya2VyR2xvYmFsU2NvcGUnIGluIHNlbGYpIHtcclxuICAgICAgICAgICAgLy8gUnVubmluZyBpbiBTZXJ2aWNlV29ya2VyIGNvbnRleHRcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBTd0NvbnRyb2xsZXIoZmlyZWJhc2VTZXJ2aWNlcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBBc3N1bWUgd2UgYXJlIGluIHRoZSB3aW5kb3cgY29udGV4dC5cclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBXaW5kb3dDb250cm9sbGVyKGZpcmViYXNlU2VydmljZXMpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICB2YXIgbmFtZXNwYWNlRXhwb3J0cyA9IHtcclxuICAgICAgICBpc1N1cHBvcnRlZDogaXNTdXBwb3J0ZWRcclxuICAgIH07XHJcbiAgICBpbnN0YW5jZS5JTlRFUk5BTC5yZWdpc3RlckNvbXBvbmVudChuZXcgQ29tcG9uZW50KG1lc3NhZ2luZ05hbWUsIGZhY3RvcnlNZXRob2QsIFwiUFVCTElDXCIgLyogUFVCTElDICovKS5zZXRTZXJ2aWNlUHJvcHMobmFtZXNwYWNlRXhwb3J0cykpO1xyXG4gICAgaW5zdGFuY2UucmVnaXN0ZXJWZXJzaW9uKG5hbWUsIHZlcnNpb24pO1xyXG59XHJcbnJlZ2lzdGVyTWVzc2FnaW5nKGZpcmViYXNlKTtcclxuZnVuY3Rpb24gaXNTdXBwb3J0ZWQoKSB7XHJcbiAgICBpZiAoc2VsZiAmJiAnU2VydmljZVdvcmtlckdsb2JhbFNjb3BlJyBpbiBzZWxmKSB7XHJcbiAgICAgICAgLy8gUnVubmluZyBpbiBTZXJ2aWNlV29ya2VyIGNvbnRleHRcclxuICAgICAgICByZXR1cm4gaXNTV0NvbnRyb2xsZXJTdXBwb3J0ZWQoKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIC8vIEFzc3VtZSB3ZSBhcmUgaW4gdGhlIHdpbmRvdyBjb250ZXh0LlxyXG4gICAgICAgIHJldHVybiBpc1dpbmRvd0NvbnRyb2xsZXJTdXBwb3J0ZWQoKTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogQ2hlY2tzIHRvIHNlZSBpZiB0aGUgcmVxdWlyZWQgQVBJcyBleGlzdC5cclxuICovXHJcbmZ1bmN0aW9uIGlzV2luZG93Q29udHJvbGxlclN1cHBvcnRlZCgpIHtcclxuICAgIHJldHVybiAobmF2aWdhdG9yLmNvb2tpZUVuYWJsZWQgJiZcclxuICAgICAgICAnc2VydmljZVdvcmtlcicgaW4gbmF2aWdhdG9yICYmXHJcbiAgICAgICAgJ1B1c2hNYW5hZ2VyJyBpbiB3aW5kb3cgJiZcclxuICAgICAgICAnTm90aWZpY2F0aW9uJyBpbiB3aW5kb3cgJiZcclxuICAgICAgICAnZmV0Y2gnIGluIHdpbmRvdyAmJlxyXG4gICAgICAgIFNlcnZpY2VXb3JrZXJSZWdpc3RyYXRpb24ucHJvdG90eXBlLmhhc093blByb3BlcnR5KCdzaG93Tm90aWZpY2F0aW9uJykgJiZcclxuICAgICAgICBQdXNoU3Vic2NyaXB0aW9uLnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eSgnZ2V0S2V5JykpO1xyXG59XHJcbi8qKlxyXG4gKiBDaGVja3MgdG8gc2VlIGlmIHRoZSByZXF1aXJlZCBBUElzIGV4aXN0IHdpdGhpbiBTVyBDb250ZXh0LlxyXG4gKi9cclxuZnVuY3Rpb24gaXNTV0NvbnRyb2xsZXJTdXBwb3J0ZWQoKSB7XHJcbiAgICByZXR1cm4gKCdQdXNoTWFuYWdlcicgaW4gc2VsZiAmJlxyXG4gICAgICAgICdOb3RpZmljYXRpb24nIGluIHNlbGYgJiZcclxuICAgICAgICBTZXJ2aWNlV29ya2VyUmVnaXN0cmF0aW9uLnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eSgnc2hvd05vdGlmaWNhdGlvbicpICYmXHJcbiAgICAgICAgUHVzaFN1YnNjcmlwdGlvbi5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkoJ2dldEtleScpKTtcclxufVxuXG5leHBvcnQgeyBpc1N1cHBvcnRlZCwgcmVnaXN0ZXJNZXNzYWdpbmcgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmVzbS5qcy5tYXBcbiIsIi8vIEZpcmViYXNlIEFwcCAodGhlIGNvcmUgRmlyZWJhc2UgU0RLKSBpcyBhbHdheXMgcmVxdWlyZWQgYW5kIG11c3QgYmUgbGlzdGVkIGZpcnN0LlxyXG5pbXBvcnQgKiBhcyBmaXJlYmFzZSBmcm9tIFwiZmlyZWJhc2UvYXBwXCI7XHJcblxyXG4vLyBUaGUgRmlyZWJhc2UgU0RLIGZvciBBbmFseXRpY3MuXHJcbmltcG9ydCBcImZpcmViYXNlL2FuYWx5dGljc1wiO1xyXG5cclxuLy8gVGhlIEZpcmViYXNlIHByb2R1Y3RzIHRoYXQgYXJlIHVzZWQgZm9yIG1lc3NhZ2luZy5cclxuaW1wb3J0IFwiZmlyZWJhc2UvZmlyZXN0b3JlXCI7XHJcbmltcG9ydCBcImZpcmViYXNlL21lc3NhZ2luZ1wiO1xyXG5cclxuaW1wb3J0IHR5cGUgeyBBcHBsaWNhdGlvbiB9IGZyb20gXCIuL2FwcFwiO1xyXG5cclxuLyoqKioqKioqKioqKioqKioqKioqKiBGSVJFQkFTRSBJTklUSUFMSVpBVElPTiAqKioqKioqKioqKioqKioqKioqKiovXHJcblxyXG4vLyBUaGUgRmlyZWJhc2UgY29uZmlndXJhdGlvbiBmb3IgdGhlIGFwcC5cclxuY29uc3QgZmlyZWJhc2VDb25maWcgPSB7XHJcbiAgYXBpS2V5OiBcIkFJemFTeUI5S0M5UTNOek10N2I2VHNwTmNLeHFXcW56elBMdmRGZ1wiLFxyXG4gIGF1dGhEb21haW46IFwidGVzdGdkcHJvamVjdC0xNTcwMDM2NDM5OTMxLmZpcmViYXNlYXBwLmNvbVwiLFxyXG4gIGRhdGFiYXNlVVJMOiBcImh0dHBzOi8vdGVzdGdkcHJvamVjdC0xNTcwMDM2NDM5OTMxLmZpcmViYXNlaW8uY29tXCIsXHJcbiAgcHJvamVjdElkOiBcInRlc3RnZHByb2plY3QtMTU3MDAzNjQzOTkzMVwiLFxyXG4gIHN0b3JhZ2VCdWNrZXQ6IFwidGVzdGdkcHJvamVjdC0xNTcwMDM2NDM5OTMxLmFwcHNwb3QuY29tXCIsXHJcbiAgbWVzc2FnaW5nU2VuZGVySWQ6IFwiMTk5ODQ0NDUzNjQzXCIsXHJcbiAgYXBwSWQ6IFwiMToxOTk4NDQ0NTM2NDM6d2ViOjRhYTdiYTk3ZDFhZTJlNDI4YjU2MGVcIlxyXG59O1xyXG5cclxuLy8gSW5pdGlhbGl6YXRpb24gb2YgRmlyZWJhc2UuXHJcbmZpcmViYXNlLmluaXRpYWxpemVBcHAoZmlyZWJhc2VDb25maWcpO1xyXG5cclxuXHJcbi8qKioqKioqKioqKioqKioqKioqKiBGSVJFQkFTRSBDTE9VRCBNRVNTQUdJTkcgKioqKioqKioqKioqKioqKioqKioqKlxyXG4gKiBNYW5hZ2VzIHRoZSBjcmVhdGlvbiBvZiBkZXZpY2UgdG9rZW5zIHRvIHJlY2VpdmUgcHVzaCBub3RpZmljYXRpb25zLlxyXG4qL1xyXG5leHBvcnQgY2xhc3MgTWVzc2FnaW5nIHtcclxuICBtZXNzYWdpbmc6IGZpcmViYXNlLm1lc3NhZ2luZy5NZXNzYWdpbmc7XHJcblxyXG4gIGNvbnN0cnVjdG9yKGFwcDogQXBwbGljYXRpb24pIHtcclxuICAgIC8vIFJldHJpZXZlIHRoZSBGaXJlYmFzZSBNZXNzYWdpbmcgb2JqZWN0LlxyXG4gICAgdGhpcy5tZXNzYWdpbmcgPSBmaXJlYmFzZS5tZXNzYWdpbmcoKTtcclxuXHJcbiAgICAvLyBIYW5kbGUgaW5jb21pbmcgbWVzc2FnZXMgd2hlbiB0aGUgYXBwIGlzIGluIHRoZSBmb3JlZ3JvdW5kIC8gZm9jdXMuXHJcbiAgICB0aGlzLm1lc3NhZ2luZy5vbk1lc3NhZ2UocGF5bG9hZCA9PiB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdNZXNzYWdlIHJlY2VpdmVkLiAnLCBwYXlsb2FkKTtcclxuICAgICAgY29uc3QgZGF0YSA9IHBheWxvYWQuZGF0YTtcclxuICAgICAgYXBwLm5vdGlmaWNhdGlvbnNNYW5hZ2VyLmNyZWF0ZU5vdGlmaWNhY3Rpb24oZGF0YSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBDYWxsYmFjayBmaXJlZCBpZiBJbnN0YW5jZSBJRCB0b2tlbiBpcyB1cGRhdGVkLlxyXG4gICAgdGhpcy5tZXNzYWdpbmcub25Ub2tlblJlZnJlc2goKCkgPT4ge1xyXG4gICAgICB0aGlzLm1lc3NhZ2luZy5nZXRUb2tlbigpLnRoZW4ocmVmcmVzaGVkVG9rZW4gPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdGQ00gdG9rZW4gcmVmcmVzaGVkOicsIHJlZnJlc2hlZFRva2VuKTtcclxuICAgICAgICAvLyBTZW5kIHRoZSBuZXcgRGV2aWNlIFRva2VuIHRvIHRoZSBkYXRhc3RvcmUuXHJcbiAgICAgICAgZmlyZWJhc2UuZmlyZXN0b3JlKCkuY29sbGVjdGlvbignZmNtVG9rZW5zJykuZG9jKHJlZnJlc2hlZFRva2VuKVxyXG4gICAgICAgICAgLnNldCh7IGVtYWlsOiBhcHAudXNlckluZm8uZW1haWxBZGRyZXNzIH0pO1xyXG4gICAgICB9KS5jYXRjaChlcnIgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdVbmFibGUgdG8gcmV0cmlldmUgcmVmcmVzaGVkIHRva2VuICcsIGVycik7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQXV4aWxpYXJ5IGZ1bmN0aW9uIHRvIHZpZXcgdGhlIGRldmljZSB0b2tlbiBmb3IgRkNNLlxyXG4gICAgICovXHJcbiAgICB3aW5kb3cuZ2V0TWVzc2FnaW5nVG9rZW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgIGZpcmViYXNlLm1lc3NhZ2luZygpLmdldFRva2VuKClcclxuICAgICAgICAudGhlbih0b2tlbiA9PiB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyh0b2tlbik7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAuY2F0Y2goZXJyID0+IHtcclxuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2F2ZXMgdGhlIEZDTSB0b2tlbiB0byB0aGUgZGF0YXN0b3JlIGFuZCBzZXNzaW9uIHN0b3JhZ2UuXHJcbiAgICAgKiBJZiBub3RpZmljYXRpb24gcGVybWlzc2lvbnMgaGF2ZSBub3QgYmVlbiBncmFudGVkIGl0IGFza3MgZm9yIHRoZW0uXHJcbiAgICAgKi9cclxuICAgIHdpbmRvdy5zYXZlTWVzc2FnaW5nRGV2aWNlVG9rZW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgIGlmICghc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgnZGV2aWNlVG9rZW4nKSkge1xyXG4gICAgICAgIGZpcmViYXNlLm1lc3NhZ2luZygpLmdldFRva2VuKCkudGhlbih0b2tlbiA9PiB7XHJcbiAgICAgICAgICBpZiAodG9rZW4pIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ0ZDTSB0b2tlbiBnZW5lcmF0ZWQ6JywgdG9rZW4pO1xyXG4gICAgICAgICAgICAvLyBTYXZpbmcgdGhlIEZDTSB0b2tlbiBpbiBGaXJlc3RvcmUuXHJcbiAgICAgICAgICAgIGZpcmViYXNlLmZpcmVzdG9yZSgpLmNvbGxlY3Rpb24oJ2ZjbVRva2VucycpLmRvYyh0b2tlbilcclxuICAgICAgICAgICAgICAuc2V0KHsgZW1haWw6IGFwcC51c2VySW5mby5lbWFpbEFkZHJlc3MgfSk7XHJcbiAgICAgICAgICAgIC8vIFNhdmluZyB0b2tlbiBpbiBTZXNzaW9uIFN0b3JhZ2UuXHJcbiAgICAgICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oJ2RldmljZVRva2VuJywgdG9rZW4pO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gTmVlZCB0byByZXF1ZXN0IHBlcm1pc3Npb25zIHRvIHNob3cgbm90aWZpY2F0aW9ucy5cclxuICAgICAgICAgICAgdGhpcy5yZXF1ZXN0Tm90aWZpY2F0aW9uc1Blcm1pc3Npb25zKCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSkuY2F0Y2goZXJyID0+IHtcclxuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1VuYWJsZSB0byBnZXQgRkNNIHRva2VuLicsIGVycik7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgfVxyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogUmVxdWVzdHMgcGVybWlzc2lvbiB0byBzaG93IG5vdGlmaWNhdGlvbnMuXHJcbiAgICovXHJcbiAgcmVxdWVzdE5vdGlmaWNhdGlvbnNQZXJtaXNzaW9ucygpIHtcclxuICAgIGNvbnNvbGUubG9nKCdSZXF1ZXN0aW5nIG5vdGlmaWNhdGlvbnMgcGVybWlzc2lvbi4uLicpO1xyXG4gICAgZmlyZWJhc2UubWVzc2FnaW5nKCkucmVxdWVzdFBlcm1pc3Npb24oKS50aGVuKCgpID0+IHtcclxuICAgICAgY29uc29sZS5sb2coJ05vdGlmaWNhdGlvbiBwZXJtaXNzaW9uIGdyYW50ZWQuJyk7XHJcbiAgICAgIHdpbmRvdy5zYXZlTWVzc2FnaW5nRGV2aWNlVG9rZW4oKTtcclxuICAgIH0pLmNhdGNoKGVyciA9PiB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1VuYWJsZSB0byBnZXQgcGVybWlzc2lvbiB0byBub3RpZnk6JywgZXJyKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcblxyXG4gIC8vIEVxdWl2YWxlbnQgdG8gdGhlIHByZXZpb3VzIGJ1dCB3aXRob3V0IEZpcmViYXNlLlxyXG4gIC8vIGZ1bmN0aW9uIHJlcXVlc3RQZXJtaXNzaW9uKCkge1xyXG4gIC8vICAgY29uc29sZS5sb2coJ1JlcXVlc3RpbmcgcGVybWlzc2lvbi4uLicpO1xyXG4gIC8vICAgTm90aWZpY2F0aW9uLnJlcXVlc3RQZXJtaXNzaW9uKCkudGhlbihwZXJtaXNzaW9uID0+IHtcclxuICAvLyAgICAgaWYgKHBlcm1pc3Npb24gPT09ICdncmFudGVkJykge1xyXG4gIC8vICAgICAgIGNvbnNvbGUubG9nKCdOb3RpZmljYXRpb24gcGVybWlzc2lvbiBncmFudGVkLicpO1xyXG4gIC8vICAgICAgIC8vIFRPRE86IFJldHJpZXZlIGFuIEluc3RhbmNlIElEIHRva2VuIGZvciB1c2Ugd2l0aCBGQ00uXHJcbiAgLy8gICAgICAgLy8gSWYgYW4gYXBwIGhhcyBiZWVuIGdyYW50ZWQgbm90aWZpY2F0aW9uIHBlcm1pc3Npb24gaXQgY2FuIHVwZGF0ZSBpdHMgVUkgcmVmbGVjdGluZyB0aGlzLlxyXG4gIC8vICAgICAgIC8vIHJlc2V0VUkoKTtcclxuICAvLyAgICAgfSBlbHNlIHtcclxuICAvLyAgICAgICBjb25zb2xlLmxvZygnVW5hYmxlIHRvIGdldCBwZXJtaXNzaW9uIHRvIG5vdGlmeS4nKTtcclxuICAvLyAgICAgfVxyXG4gIC8vICAgfSk7XHJcbiAgLy8gfSAgXHJcblxyXG59IiwiaW1wb3J0ICcuL3N0eWxlcy9zdHlsZXMuc2Nzcyc7XHJcbmltcG9ydCB7IEFwcGxpY2F0aW9uIH0gZnJvbSAnLi9hcHAnO1xyXG5pbXBvcnQgR2VuZXJpY3MgZnJvbSAnLi9nZW5lcmljcyc7XHJcbmltcG9ydCBBUEkgZnJvbSAnLi9hcGknO1xyXG5pbXBvcnQgeyBNZXNzYWdpbmcgfSBmcm9tICcuL21lc3NhZ2luZyc7XHJcblxyXG5cclxuLyoqKioqKioqKioqKioqKioqKioqKioqKiBUSEUgR0xPQkFMIE9CSkVDVCAqKioqKioqKioqKioqKioqKioqKioqKiovXHJcblxyXG5kZWNsYXJlIGdsb2JhbCB7XHJcbiAgaW50ZXJmYWNlIFdpbmRvdyB7XHJcbiAgICB0aGVyZUlzTWVzc2FnaW5nOiBib29sZWFuO1xyXG4gICAgZ2V0Q3VycmVudFVzZXIoKTogZ2FwaS5jbGllbnQuZHJpdmUuVXNlcjtcclxuICAgIGdldE1lc3NhZ2luZ1Rva2VuKCk6IHZvaWQ7XHJcbiAgICBzYXZlTWVzc2FnaW5nRGV2aWNlVG9rZW4oKTogdm9pZDtcclxuICB9XHJcbn1cclxuXHJcblxyXG4vKioqKioqKioqKioqKioqKioqIFRIRSBPTkxZIElOU1RBTkNFIE9GIFRIRSBBUFAgKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbmNvbnN0IEFwcCA9IG5ldyBBcHBsaWNhdGlvbigpO1xyXG5cclxuXHJcbi8qKioqKiogVEhFIE9OTFkgSU5TVEFOQ0UgT0YgVEhFIE1FU1NBR0lORyBMT0dJQyBCWSBGSVJFQkFTRSAqKioqKioqL1xyXG5cclxuY29uc3QgTXNnID0gbmV3IE1lc3NhZ2luZyhBcHApO1xyXG5cclxuLy8gU2V0IHRvIHRydWUgb25seSBpZiB0aGUgTWVzc2FnaW5nIGluc3RhbmNlIGlzIGNyZWF0ZWQuXHJcbndpbmRvdy50aGVyZUlzTWVzc2FnaW5nID0gdHJ1ZTtcclxuXHJcblxyXG4vKioqKioqKioqKioqKioqKioqKiBTRVJWSUNFIFdPUktFUiBSRUdJU1RSQVRJT04gKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbi8vIFRPRE86IERvIHRoaXMgb25seSBpZiB0aGUgdXNlciBhdXRoZW50aWNhdGVzP1xyXG5pZiAoJ3NlcnZpY2VXb3JrZXInIGluIG5hdmlnYXRvcikge1xyXG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgKCkgPT4ge1xyXG4gICAgbmF2aWdhdG9yLnNlcnZpY2VXb3JrZXIucmVnaXN0ZXIoJy9zZXJ2aWNlLXdvcmtlci5qcycpXHJcbiAgICAgIC50aGVuKHJlZyA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ1NlcnZpY2Ugd29ya2VyIHJlZ2lzdGVyZWQuJywgcmVnKTtcclxuICAgICAgICAvLyBGaXJlYmFzZSBtZXNzYWdpbmcgcmVxdWlyZXMgdG8gdXNlIGEgc2VydmljZSB3b3JrZXIuXHJcbiAgICAgICAgaWYgKHdpbmRvdy50aGVyZUlzTWVzc2FnaW5nKSBNc2cubWVzc2FnaW5nLnVzZVNlcnZpY2VXb3JrZXIocmVnKTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKGVyciA9PiB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignU2VydmljZSBXb3JrZXIgRXJyb3InLCBlcnIpO1xyXG4gICAgICB9KTtcclxuICB9KTtcclxufVxyXG5cclxuXHJcbi8qKioqKioqKioqKioqKioqKioqKioqKioqIEdMT0JBTCBNRVRIT0RTICoqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG5cclxud2luZG93LmdldEN1cnJlbnRVc2VyID0gZnVuY3Rpb24gKCkge1xyXG4gIHJldHVybiBBcHAudXNlckluZm87XHJcbn1cclxuXHJcblxyXG4vKioqKioqKioqKioqKioqKioqKioqKioqIEJST0FEQ0FTVCBDSEFOTkVMICoqKioqKioqKioqKioqKioqKioqKioqKipcclxuICogVG8gY29tdW5pY2F0ZSB3aXRoIHRoZSBTZXJ2aWNlIFdvcmtlciBhbmQgdmljZXZlcnNhLlxyXG4qL1xyXG5cclxuaWYgKHdpbmRvdy5Ccm9hZGNhc3RDaGFubmVsKSB7XHJcbiAgY29uc3QgYnJvYWRDYXN0Q2hhbm5lbCA9IG5ldyBCcm9hZGNhc3RDaGFubmVsKCdhcHAtY2hhbm5lbCcpO1xyXG5cclxuICBicm9hZENhc3RDaGFubmVsLm9ubWVzc2FnZSA9IGUgPT4ge1xyXG4gICAgaWYgKGUuZGF0YS5hY3Rpb24gPT09ICduZXdOb3RpZmljYXRpb24nKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdBZGQgbm90aWZpY2F0aW9uIHRvIHRoZSBsaXN0LicpO1xyXG4gICAgICBBcHAubm90aWZpY2F0aW9uc01hbmFnZXIuY3JlYXRlTm90aWZpY2FjdGlvbihlLmRhdGEuY29udGVudCk7XHJcbiAgICB9XHJcbiAgfTtcclxufSBlbHNlIHtcclxuICBjb25zb2xlLndhcm4oJ1RoaXMgYnJvd3NlciBkb2VzIG5vdCBzdXBwb3J0IEJyb2FkY2FzdENoYW5uZWwuJyk7XHJcbn1cclxuXHJcblxyXG4vKioqKioqKioqKioqKioqKioqKiBWSUVXIFNBTVBMRSBTRVNTSU9OIE9QVElPTiAqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbmNvbnN0IHRyeUl0QnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RyeUl0QnRuJyk7XHJcblxyXG50cnlJdEJ0bi5vbmNsaWNrID0gKCkgPT4ge1xyXG4gIGNvbnNvbGUubG9nKCdTdGFydGluZyBkZW1vIHNlc3Npb24uJyk7XHJcbiAgLy8gRGlzYWJsZSBtZXNzYWdpbmcuXHJcbiAgd2luZG93LnRoZXJlSXNNZXNzYWdpbmcgPSBmYWxzZTtcclxuICAvL0FwcC5zYXZlQnRuLnN0eWxlLnZpc2liaWxpdHkgPSAnaGlkZGVuJzsgLy8gVE9ETyBpbnN0ZWFkIG9mIGhpZGRlbiBzZXQgZGlzYWJsZWQgb3IgbG9ja2VkLlxyXG4gIC8vIFRPRE86IFJlbW92ZSB0aGUgU2lnbiBPdXQgYnV0dG9uIGZyb20gdGhlIHNpZGUgbWVudS5cclxuICAvLyBTZXQgYSBmYWtlIHVzZXIgaW5mbyBhcyBsb2dnZWQgaW4gdXNlci5cclxuICBBcHAuc2V0VXNlckluZm8oeyBkaXNwbGF5TmFtZTogJ0Zha2UgVXNlcicsIGVtYWlsQWRkcmVzczogJ2Zha2V1c2VyQGV4YW1wbGUuY29tJywgcGhvdG9MaW5rOiAnYXZhdGFyLXBsYWNlaG9sZGVyLnBuZycgfSBhcyBnYXBpLmNsaWVudC5kcml2ZS5Vc2VyKTtcclxuICBBcHAuc3RhcnQoeyBtYWluRm9sZGVySWQ6ICcxUDlxdTlxR21jeWlhckUtZTFhblZXNGlqWVlEV2lpLUYnIH0pO1xyXG4gIGxvZ2luUGFnZS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG59XHJcblxyXG5cclxuLyoqKioqKioqKioqKioqKioqKiogR09PR0xFIERSSVZFIEFVVEhFTlRJQ0FUSU9OICoqKioqKioqKioqKioqKioqKiovXHJcblxyXG4vLyBWYWx1ZXMgd2lsbCBiZSBhc3NpZ25lZCBmcm9tIGFuIGVudmlyb25tZW50IHZhcmlhYmxlIHRocm91Z2ggV2VicGFjay5cclxuZGVjbGFyZSBsZXQgUFJPQ0VTUzogc3RyaW5nO1xyXG5kZWNsYXJlIGxldCBHX0NMSUVOVF9JRDogc3RyaW5nO1xyXG5kZWNsYXJlIGxldCBHX0FQSV9LRVlfUFJPRDogc3RyaW5nO1xyXG5kZWNsYXJlIGxldCBHX0FQSV9LRVlfREVWOiBzdHJpbmc7XHJcblxyXG4vLyBPQXV0aCAyLjAgQ2xpZW50IElEIGZvciBHb29nbGUgQVBJcy5cclxuY29uc3QgQ0xJRU5UX0lEID0gR19DTElFTlRfSUQ7XHJcblxyXG4vLyBBUEkga2V5IGZvciBHb29nbGUgRHJpdmUuXHJcbmxldCBBUElfS0VZOiBzdHJpbmc7XHJcblxyXG5pZiAoUFJPQ0VTUyA9PT0gJ3Byb2R1Y3Rpb24nKSB7XHJcbiAgQVBJX0tFWSA9IEdfQVBJX0tFWV9QUk9EO1xyXG59IGVsc2Uge1xyXG4gIEFQSV9LRVkgPSBHX0FQSV9LRVlfREVWO1xyXG59XHJcblxyXG4vLyBBcnJheSBvZiBBUEkgZGlzY292ZXJ5IGRvYyBVUkxzIGZvciBBUElzIHVzZWQgYnkgdGhlIGFwcC5cclxuY29uc3QgRElTQ09WRVJZX0RPQ1MgPSBbXCJodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9kaXNjb3ZlcnkvdjEvYXBpcy9kcml2ZS92My9yZXN0XCJdO1xyXG5cclxuLy8gQXV0aG9yaXphdGlvbiBzY29wZXMgcmVxdWlyZWQgYnkgdGhlIEFQSTsgbXVsdGlwbGUgc2NvcGVzIGNhbiBiZSBpbmNsdWRlZCwgc2VwYXJhdGVkIGJ5IHNwYWNlcy5cclxuY29uc3QgU0NPUEVTID0gXCJodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9hdXRoL2RyaXZlXCI7XHJcblxyXG5jb25zdCBhdXRob3JpemVCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXV0aG9yaXplQnRuJyk7XHJcbmNvbnN0IHNpZ25vdXRCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2lnbm91dEJ0bicpO1xyXG5cclxuXHJcbi8qKlxyXG4gKiAgT24gbG9hZCwgY2FsbGVkIHRvIGxvYWQgdGhlIGF1dGgyIGxpYnJhcnkgYW5kIEFQSSBjbGllbnQgbGlicmFyeS5cclxuICovXHJcbihmdW5jdGlvbiAoKSB7XHJcbiAgY29uc3Qgc2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XHJcbiAgc2NyaXB0LnR5cGUgPSBcInRleHQvamF2YXNjcmlwdFwiO1xyXG4gIHNjcmlwdC5kZWZlciA9IHRydWU7XHJcbiAgc2NyaXB0Lm9ubG9hZCA9ICgpID0+IGhhbmRsZUNsaWVudExvYWQoKTtcclxuICBzY3JpcHQuc3JjID0gJ2h0dHBzOi8vYXBpcy5nb29nbGUuY29tL2pzL2FwaS5qcyc7XHJcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYm9keScpLmFwcGVuZENoaWxkKHNjcmlwdCk7XHJcbn0pKCk7XHJcblxyXG5cclxuZnVuY3Rpb24gaGFuZGxlQ2xpZW50TG9hZCgpIHtcclxuICBnYXBpLmxvYWQoJ2NsaWVudDphdXRoMicsIGluaXRDbGllbnQpO1xyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqICBJbml0aWFsaXplcyB0aGUgQVBJIGNsaWVudCBsaWJyYXJ5IGFuZCBzZXRzIHVwIHNpZ24taW4gc3RhdGUgbGlzdGVuZXJzLlxyXG4gKi9cclxuZnVuY3Rpb24gaW5pdENsaWVudCgpIHtcclxuICBnYXBpLmNsaWVudC5pbml0KHtcclxuICAgIGFwaUtleTogQVBJX0tFWSxcclxuICAgIGNsaWVudElkOiBDTElFTlRfSUQsXHJcbiAgICBkaXNjb3ZlcnlEb2NzOiBESVNDT1ZFUllfRE9DUyxcclxuICAgIHNjb3BlOiBTQ09QRVNcclxuICB9KS50aGVuKGZ1bmN0aW9uICgpIHtcclxuICAgIC8vIExpc3RlbiBmb3Igc2lnbi1pbiBzdGF0ZSBjaGFuZ2VzLlxyXG4gICAgZ2FwaS5hdXRoMi5nZXRBdXRoSW5zdGFuY2UoKS5pc1NpZ25lZEluLmxpc3Rlbih1cGRhdGVTaWduaW5TdGF0dXMpO1xyXG5cclxuICAgIC8vIEhhbmRsZSB0aGUgaW5pdGlhbCBzaWduLWluIHN0YXRlLlxyXG4gICAgdXBkYXRlU2lnbmluU3RhdHVzKGdhcGkuYXV0aDIuZ2V0QXV0aEluc3RhbmNlKCkuaXNTaWduZWRJbi5nZXQoKSk7XHJcbiAgICBhdXRob3JpemVCdXR0b24ub25jbGljayA9IGhhbmRsZUF1dGhDbGljaztcclxuICAgIHNpZ25vdXRCdXR0b24ub25jbGljayA9IGhhbmRsZVNpZ25vdXRDbGljaztcclxuICB9LCBmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUubG9nKEpTT04uc3RyaW5naWZ5KGVycm9yLCBudWxsLCAyKSk7XHJcbiAgfSk7XHJcbn1cclxuXHJcblxyXG4vKipcclxuICogIENhbGxlZCB3aGVuIHRoZSBzaWduZWQgaW4gc3RhdHVzIGNoYW5nZXMsIHRvIHVwZGF0ZSB0aGUgVUlcclxuICogIGFwcHJvcHJpYXRlbHkuIEFmdGVyIGEgc2lnbi1pbiwgdGhlIEFQSSBpcyBjYWxsZWQuXHJcbiAqL1xyXG5mdW5jdGlvbiB1cGRhdGVTaWduaW5TdGF0dXMoaXNTaWduZWRJbjogYm9vbGVhbikge1xyXG4gIGlmIChpc1NpZ25lZEluKSB7XHJcbiAgICBjb25zb2xlLmxvZygnQXV0aG9yaXplZC4nKTtcclxuICAgIC8vIEdldCB0aGUgVVJMIHBhcmFtcy5cclxuICAgIGNvbnN0IHByb2plY3RJZCA9IEdlbmVyaWNzLmdldFVybFBhcmFtcyh3aW5kb3cubG9jYXRpb24uaHJlZikuaWQ7XHJcbiAgICAvLyBIaWRlIHRoZSBsb2dpbiBwYWdlLlxyXG4gICAgbG9naW5QYWdlLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICAvLyBNYW5hZ2UgdGhlIGxvZ2dlZCB1c2VyIHBlcnNvbmFsIGluZm8uXHJcbiAgICBBcHAuc2V0VXNlckluZm8oKTtcclxuICAgIC8vIElmIGEgcHJvamVjdCBpZCBpcyBwcm92aWRlZCB0byBzdGFydCgpIG1ldGhvZCB0aGUgYXBwIHdpbGwgc3RhcnQgZnJvbSB0aGUgcHJvamVjdCB2aWV3LlxyXG4gICAgQXBwLnN0YXJ0KHByb2plY3RJZCk7XHJcbiAgfSBlbHNlIHtcclxuICAgIGNvbnNvbGUubG9nKCdOb3QgYXV0aG9yaXplZCcpO1xyXG4gICAgc2hvd0xvZ2luUGFnZSgpO1xyXG4gIH1cclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiAgU2lnbiBpbiB0aGUgdXNlciB1cG9uIGJ1dHRvbiBjbGljay5cclxuICovXHJcbmZ1bmN0aW9uIGhhbmRsZUF1dGhDbGljaygpIHtcclxuICBnYXBpLmF1dGgyLmdldEF1dGhJbnN0YW5jZSgpLnNpZ25JbigpO1xyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqICBTaWduIG91dCB0aGUgdXNlciB1cG9uIGJ1dHRvbiBjbGljay5cclxuICovXHJcbmZ1bmN0aW9uIGhhbmRsZVNpZ25vdXRDbGljaygpIHtcclxuICBnYXBpLmF1dGgyLmdldEF1dGhJbnN0YW5jZSgpLnNpZ25PdXQoKTtcclxufVxyXG5cclxuXHJcbi8qKioqKioqKioqKioqKioqKioqKioqKioqKiBMT0dJTiBQQUdFICoqKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcblxyXG5jb25zdCBsb2dpblBhZ2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9naW5QYWdlJyk7XHJcblxyXG4vKipcclxuICogU2hvd3MgdGhlIGxvZ2luIGRpYWxvZyBhbmQgaGlkZXMgYW5kIGNsZWFycyBhbnl0aGluZyBlbHNlLlxyXG4gKi9cclxuZnVuY3Rpb24gc2hvd0xvZ2luUGFnZSgpIHtcclxuICBsb2dpblBhZ2Uuc3R5bGUuZGlzcGxheSA9ICdmbGV4JztcclxuXHJcbiAgLy9BcHAuc2hvd01vZGFsRGlhbG9nKGF1dGhvcml6ZURpYWxvZywgJ29wYXF1ZScsIGZhbHNlKTtcclxuICAvLyBIaWRlIGFueXRoaW5nIGVsc2UuXHJcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaGVhZGVyJykuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdtYWluJykuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICBBcHAucHJvamVjdHNMaXN0Q29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgLy8gVE9ETzogRGVsZXRlIHRoZSBjb250ZW50cyBvZiB0aGUgZ2xvYmFsIG9iamVjdHMgaWYgYW55LlxyXG4gIC8vIGFwcERhdGEuY2xlYXIoKTtcclxuICAvLyBjdXJyZW50UHJvamVjdC5jbGVhcigpO1xyXG4gIC8vIGxhc3RVcGxvYWRlZFByb2plY3QuY2xlYXIoKTtcclxuICBHZW5lcmljcy5lbXB0eU5vZGUoQXBwLnByb2plY3RzTGlzdCk7XHJcbiAgaGlzdG9yeS5yZXBsYWNlU3RhdGUoeyBwYWdlOiAnU2lnbiBpbiBkaWFsb2cnIH0sICdTaWduIGluIGRpYWxvZycsIGxvY2F0aW9uLmhyZWYucmVwbGFjZShsb2NhdGlvbi5zZWFyY2gsICcnKSk7XHJcbn1cclxuXHJcblxyXG4vKioqKioqKioqKioqKioqKioqKioqKioqIFBXQSBpbnN0YWxsYXRpb24gKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuLy8gVE9ETyBDcmVhdGUgYSBzZXBhcmF0ZSBjbGFzcyBhbmQgaW1wb3J0P1xyXG5cclxubGV0IGRlZmVycmVkSW5zdGFsbFByb21wdDogQmVmb3JlSW5zdGFsbFByb21wdEV2ZW50ID0gbnVsbDtcclxuXHJcbmNvbnN0IGluc3RhbGxCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5zdGFsbEJ0bicpO1xyXG5cclxuaW5zdGFsbEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGluc3RhbGxBcHApO1xyXG5cclxuXHJcbi8vIEV2ZW50IGxpc3RlbmVyIGZvciBiZWZvcmVpbnN0YWxscHJvbXB0IGV2ZW50LlxyXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignYmVmb3JlaW5zdGFsbHByb21wdCcsIHNhdmVCZWZvcmVJbnN0YWxsUHJvbXB0RXZlbnQpO1xyXG5cclxuXHJcbi8qKlxyXG4gKiBFdmVudCBoYW5kbGVyIGZvciBiZWZvcmVpbnN0YWxscHJvbXB0IGV2ZW50LlxyXG4gKiBTYXZlcyB0aGUgZXZlbnQgYW5kIHNob3dzIGluc3RhbGwgYnV0dG9uLlxyXG4gKiBAcGFyYW0ge0V2ZW50fSBlXHJcbiAqL1xyXG5mdW5jdGlvbiBzYXZlQmVmb3JlSW5zdGFsbFByb21wdEV2ZW50KGU6IEJlZm9yZUluc3RhbGxQcm9tcHRFdmVudCkge1xyXG4gIC8vIFByZXZlbnQgZnJvbSBhdXRvbWF0aWNhbGx5IHNob3dpbmcgdGhlIHByb21wdCB3aGljaCBjb3VsZCBoYXBwZW5cclxuICAvLyBpbiBzb21lIGJyb3dzZXJzIGFuZCBjcmVhdGUgYSBjdXN0b20gb25lLlxyXG4gIGUucHJldmVudERlZmF1bHQoKTtcclxuICAvLyBTdGFzaCB0aGUgZXZlbnQgc28gaXQgY2FuIGJlIHRyaWdnZXJlZCBsYXRlci5cclxuICBkZWZlcnJlZEluc3RhbGxQcm9tcHQgPSBlO1xyXG4gIC8vIFVwZGF0ZSBVSSB0byBub3RpZnkgdGhlIHVzZXIgdGhleSBjYW4gYWRkIHRvIGhvbWUgc2NyZWVuXHJcbiAgaW5zdGFsbEJ1dHRvbi5yZW1vdmVBdHRyaWJ1dGUoJ2hpZGRlbicpO1xyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIEV2ZW50IGhhbmRsZXIgZm9yIHRoZSBpbnN0YWxsIGJ1dHRvbi5cclxuICogQHBhcmFtIHtFdmVudH0gZVxyXG4gKi9cclxuZnVuY3Rpb24gaW5zdGFsbEFwcChlOiBFdmVudCkge1xyXG4gIC8vIFNob3cgaW5zdGFsbCBwcm9tcHQuXHJcbiAgZGVmZXJyZWRJbnN0YWxsUHJvbXB0LnByb21wdCgpO1xyXG4gIC8vIEhpZGUgdGhlIGluc3RhbGwgYnV0dG9uLCBpdCBjYW50IGJlIGNhbGxlZCB0d2ljZS5cclxuICAoZS50YXJnZXQgYXMgSFRNTEVsZW1lbnQpLmhpZGRlbiA9IHRydWU7IC8vIFRPRE8gdXNlIGNzcyBpbnN0ZWFkXHJcbiAgLy8gTG9nIHVzZXIgcmVzcG9uc2UgdG8gcHJvbXB0LlxyXG4gIGRlZmVycmVkSW5zdGFsbFByb21wdC51c2VyQ2hvaWNlXHJcbiAgICAudGhlbihjaG9pY2UgPT4ge1xyXG4gICAgICBpZiAoY2hvaWNlLm91dGNvbWUgPT09ICdhY2NlcHRlZCcpIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnVXNlciBhY2NlcHRlZCB0aGUgQTJIUyBwcm9tcHQnLCBjaG9pY2UpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdVc2VyIGRpc21pc3NlZCB0aGUgQTJIUyBwcm9tcHQnLCBjaG9pY2UpO1xyXG4gICAgICB9XHJcbiAgICAgIGRlZmVycmVkSW5zdGFsbFByb21wdCA9IG51bGw7XHJcbiAgICB9KTtcclxufVxyXG5cclxuXHJcbi8vIEFkZCBldmVudCBsaXN0ZW5lciBmb3IgdGhlIGFwcGluc3RhbGxlZCBldmVudC5cclxuLy8gU2luY2UgYXBwIGNhbiBiZSBpbnN0YWxsZWQgaW4gbW9yZSB0aGFuIG9uZSB3YXkgaXQgaXMgZ29vZCB0byBsaXN0ZW4gZm9yIHRoaXMgZXZlbnQuXHJcbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdhcHBpbnN0YWxsZWQnLCBsb2dBcHBJbnN0YWxsZWQpO1xyXG5cclxuXHJcbi8qKlxyXG4gKiBUaGUgZXZlbnQgaGFuZGxlciBmb3IgdGhlIGFwcGluc3RhbGxlZCBldmVudC5cclxuICogQHBhcmFtIHtFdmVudH0gZVxyXG4gKi9cclxuZnVuY3Rpb24gbG9nQXBwSW5zdGFsbGVkKGU6IEV2ZW50KSB7XHJcbiAgY29uc29sZS5sb2coJ1Zpc3VhbEFSUSBEcmF3aW5ncyBWaWV3ZXIgd2FzIGluc3RhbGxlZC4nLCBlKTtcclxuICAvLyBUT0RPOiBMb2cgdGhlIGluc3RhbGxhdGlvbiBmb3IgZXhhbXBsZSB0byBhbiBhbmFseXRpY3Mgc29mdHdhcmUgb3Igc2F2ZSB0aGUgZXZlbnQgc29tZWhvdy5cclxufVxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuLy8gVE9ETyBtb3ZlIHRvIGEgc2VwYXJhdGUgZmlsZVxyXG5cclxuLyoqKioqKioqKioqKioqKioqKioqKiogRFJBV0lOR1MgQlVUVE9OUyBMSVNUICoqKioqKioqKioqKioqKioqKioqKiovXHJcbi8qXHJcbiAqIEEgc2luZ2xlIGV2ZW50IGxpc3RlbmVyIGluIHRoZSBjb250YWluZXIgb2YgdGhlIGRyYXdpbmdzIGJ1dHRvbnMgbWFuYWdlcyB0aGUgY2xpY2tlZCBkcmF3aW5nLlxyXG4gKi9cclxuXHJcbmxldCBjdXJyZW50RHJhd2luZ0J0bjogSFRNTEVsZW1lbnQ7XHJcblxyXG5BcHAuZHJhd2luZ3NCdG5zLnF1ZXJ5U2VsZWN0b3IoJy5kcm9wZG93bi1jb250ZW50JykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyBmdW5jdGlvbiAoZSkge1xyXG4gIGlmIChjdXJyZW50RHJhd2luZ0J0bikge1xyXG4gICAgY3VycmVudERyYXdpbmdCdG4uY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XHJcbiAgfVxyXG4gIGN1cnJlbnREcmF3aW5nQnRuID0gKGUudGFyZ2V0IGFzIEhUTUxFbGVtZW50KTtcclxuICBjb25zdCBkcmF3aW5nSWQgPSBjdXJyZW50RHJhd2luZ0J0bi5kYXRhc2V0LmlkO1xyXG4gIC8vIFNldCB0aGUgbmFtZSBvZiB0aGUgZHJhd2luZyBvbiB0aGUgZHJvcGRvd24gYnV0dG9uLlxyXG4gIC8vIFRPRE86IERvIHRoaXMgb25seSBpZiBpdCB3YXMgc3VjY2Vzc2Z1bC5cclxuICAoQXBwLmRyYXdpbmdzQnRucy5jaGlsZHJlblswXSBhcyBIVE1MRWxlbWVudCkuaW5uZXJUZXh0ID0gY3VycmVudERyYXdpbmdCdG4uaW5uZXJUZXh0O1xyXG4gIGN1cnJlbnREcmF3aW5nQnRuLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xyXG5cclxuICAvLyBHZXQgdGhlIGNvcnJlc3BvbmRpbmcgZHJhd2luZyBvYmplY3QuXHJcbiAgY29uc3QgcmVxdWVzdGVkRHJhd2luZyA9IEFwcC5jdXJyZW50V29ya3NwYWNlLmRyYXdpbmdzLmZpbmQoZCA9PiBkLmlkID09PSBkcmF3aW5nSWQpO1xyXG5cclxuICAvLyBMb2FkIHRoZSBkcmF3aW5ncyBzdHlsZXMgaWYgaXQgaXMgdGhlIGZpcnN0IHRpbWUuXHJcbiAgLy8gVE9ETzogSWYgdGhpcyBpcyByZXF1aXJlZCBhbHdheXMgdGhlIGZpcnN0IHRpbWUgbWF5YmUgZG8gaXQgaW4gdGhlIFdvcmtzcGFjZSBjb25zdHJ1Y3Rvci5cclxuICAvLyBUT0RPOiBJZiB0aGlzIGZpbmFsbHkgZXh0cmFjdGVkIHRoZW4gdGhlIGZ1bmN0aW9uIHdvbnQgbmVlZCB0byBiZSBhc3luYyBhbnltb3JlLlxyXG4gIGlmIChBcHAuY3VycmVudFdvcmtzcGFjZS5kcmF3aW5nc1N0eWxlc1RhZyA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICBpZiAoQXBwLmN1cnJlbnRXb3Jrc3BhY2UuZHJhd2luZ3NTdHlsZXNJZCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgIGxldCBzdHlsZXNSZXM7XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgc3R5bGVzUmVzID0gYXdhaXQgQVBJLmdldEZpbGVDb250ZW50KEFwcC5jdXJyZW50V29ya3NwYWNlLmRyYXdpbmdzU3R5bGVzSWQpO1xyXG4gICAgICB9IGNhdGNoIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3Igd2hpbGUgdHJ5aW5nIHRvIGZldGNoIHRoZSBkcmF3aW5ncyBzdHlsZXMuXCIpO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChzdHlsZXNSZXMpIHtcclxuICAgICAgICBjb25zdCBzdHlsZVRhZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XHJcbiAgICAgICAgc3R5bGVUYWcuaW5uZXJUZXh0ID0gc3R5bGVzUmVzLmJvZHk7XHJcbiAgICAgICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzdHlsZVRhZyk7XHJcbiAgICAgICAgQXBwLmN1cnJlbnRXb3Jrc3BhY2UuZHJhd2luZ3NTdHlsZXNUYWcgPSBzdHlsZVRhZztcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29uc29sZS53YXJuKCdUaGlzIHByb2plY3QgZG9lc25cXCd0IGhhdmUgYSBjc3Mgc3R5bGVzIGZpbGUgZm9yIHRoZSBkcmF3aW5ncy4nKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIENoZWNrIGlmIHRoZSByZXF1ZXN0ZWQgZHJhd2luZyBoYXMgYWxyZWFkeSB0aGUgY29udGVudC5cclxuICBpZiAocmVxdWVzdGVkRHJhd2luZy5jb250ZW50ICE9PSB1bmRlZmluZWQpIHtcclxuICAgIEFwcC5jdXJyZW50V29ya3NwYWNlLnNldERyYXdpbmcocmVxdWVzdGVkRHJhd2luZyk7XHJcbiAgfSBlbHNlIHtcclxuICAgIEFwcC5zaG93Vmlld3BvcnREaWFsb2coJ2xvYWRlcicsICdMb2FkaW5nIGRyYXdpbmcnKTtcclxuICAgIEFQSS5nZXRGaWxlQ29udGVudChkcmF3aW5nSWQpLnRoZW4ocmVzID0+IHtcclxuICAgICAgcmVxdWVzdGVkRHJhd2luZy5zZXRDb250ZW50KHJlcy5ib2R5KTtcclxuICAgICAgQXBwLmN1cnJlbnRXb3Jrc3BhY2Uuc2V0RHJhd2luZyhyZXF1ZXN0ZWREcmF3aW5nKTtcclxuICAgICAgQXBwLmhpZGVWaWV3cG9ydE1lc3NhZ2UoKTtcclxuICAgICAgY29uc29sZS5sb2coJ0RyYXdpbmcgZmV0Y2hlZC4nKTtcclxuICAgIH0sIGVyciA9PiB7XHJcbiAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICB9KTtcclxuICB9XHJcbn0pO1xyXG5cclxuXHJcbi8qKioqKioqKioqKioqKioqKioqKiogRFJPUERPV05TIEZVTkNUSU9OQUxJVFkgKioqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuY29uc3QgZHJvcGRvd25zID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnZHJvcGRvd24tY29udGFpbmVyJyk7XHJcblxyXG5mb3IgKGxldCBpID0gMDsgaSA8IGRyb3Bkb3ducy5sZW5ndGg7IGkrKykge1xyXG4gIGRyb3Bkb3duc1tpXS5jaGlsZHJlblswXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgIGRyb3Bkb3duc1tpXS5jbGFzc0xpc3QudG9nZ2xlKCdvcGVuJyk7XHJcbiAgfSk7XHJcbiAgZHJvcGRvd25zW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCBlID0+IHtcclxuICAgIChlLmN1cnJlbnRUYXJnZXQgYXMgSFRNTEVsZW1lbnQpLmNsYXNzTGlzdC5yZW1vdmUoJ29wZW4nKTtcclxuICB9KTtcclxufVxyXG5cclxuXHJcbi8qKioqKioqKioqKioqKioqKioqKioqKiogU0lERSBOQVZFIE1FTlUgKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuY29uc3Qgc2lkZU5hdlRvZ2dsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaWRlTmF2VG9nZ2xlJyk7XHJcblxyXG5zaWRlTmF2VG9nZ2xlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaWRlTmF2Q29udGFpbmVyJykuY2xhc3NMaXN0LnRvZ2dsZSgnYWN0aXZlJyk7XHJcbiAgc2lkZU5hdlRvZ2dsZS5jbGFzc0xpc3QudG9nZ2xlKCdhY3RpdmUnKTtcclxufSk7Il0sInNvdXJjZVJvb3QiOiIifQ==