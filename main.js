!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=19)}([function(e,t,n){"use strict";n.r(t),n.d(t,"__extends",(function(){return i})),n.d(t,"__assign",(function(){return o})),n.d(t,"__rest",(function(){return a})),n.d(t,"__decorate",(function(){return s})),n.d(t,"__param",(function(){return c})),n.d(t,"__metadata",(function(){return u})),n.d(t,"__awaiter",(function(){return l})),n.d(t,"__generator",(function(){return h})),n.d(t,"__exportStar",(function(){return d})),n.d(t,"__values",(function(){return f})),n.d(t,"__read",(function(){return p})),n.d(t,"__spread",(function(){return m})),n.d(t,"__spreadArrays",(function(){return g})),n.d(t,"__await",(function(){return y})),n.d(t,"__asyncGenerator",(function(){return v})),n.d(t,"__asyncDelegator",(function(){return b})),n.d(t,"__asyncValues",(function(){return w})),n.d(t,"__makeTemplateObject",(function(){return T})),n.d(t,"__importStar",(function(){return S})),n.d(t,"__importDefault",(function(){return I}));
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function i(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function a(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function s(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}function c(e,t){return function(n,r){t(n,r,e)}}function u(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function l(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n((function(t){t(e.value)})).then(a,s)}c((r=r.apply(e,t||[])).next())}))}function h(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function d(e,t){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}function f(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}function p(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function m(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(p(arguments[t]));return e}function g(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}function y(e){return this instanceof y?(this.v=e,this):new y(e)}function v(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),o=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(e){i[e]&&(r[e]=function(t){return new Promise((function(n,r){o.push([e,t,n,r])>1||s(e,t)}))})}function s(e,t){try{(n=i[e](t)).value instanceof y?Promise.resolve(n.value.v).then(c,u):l(o[0][2],n)}catch(e){l(o[0][3],e)}var n}function c(e){s("next",e)}function u(e){s("throw",e)}function l(e,t){e(t),o.shift(),o.length&&s(o[0][0],o[0][1])}}function b(e){var t,n;return t={},r("next"),r("throw",(function(e){throw e})),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,i){t[r]=e[r]?function(t){return(n=!n)?{value:y(e[r](t)),done:"return"===r}:i?i(t):t}:i}}function w(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=f(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,i){(function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)})(r,i,(t=e[n](t)).done,t.value)}))}}}function T(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function S(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function I(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},o=function(e,t){if(!e)throw a(t)},a=function(e){return new Error("Firebase Database ("+i.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)},s=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},c={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var o=e[i],a=i+1<e.length,s=a?e[i+1]:0,c=i+2<e.length,u=c?e[i+2]:0,l=o>>2,h=(3&o)<<4|s>>4,d=(15&s)<<2|u>>6,f=63&u;c||(f=64,a||(d=64)),r.push(n[l],n[h],n[d],n[f])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(s(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var a=((7&i)<<18|(63&(o=e[n++]))<<12|(63&(s=e[n++]))<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(a>>10)),t[r++]=String.fromCharCode(56320+(1023&a))}else{o=e[n++];var s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var o=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0,s=++i<e.length?n[e.charAt(i)]:64,c=++i<e.length?n[e.charAt(i)]:64;if(++i,null==o||null==a||null==s||null==c)throw Error();var u=o<<2|a>>4;if(r.push(u),64!==s){var l=a<<4&240|s>>2;if(r.push(l),64!==c){var h=s<<6&192|c;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},u=function(e){try{return c.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&(e[n]=l(e[n],t[n]));return e}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var h=function(){function e(){var e=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))}return e.prototype.wrapCallback=function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"==typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}},e}();
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var f="FirebaseError",p=function(e){function t(n,r){var i=e.call(this,r)||this;return i.code=n,i.name=f,Object.setPrototypeOf(i,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(i,m.prototype.create),i}return r.__extends(t,e),t}(Error),m=function(){function e(e,t,n){this.service=e,this.serviceName=t,this.errors=n}return e.prototype.create=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=t[0]||{},i=this.service+"/"+e,o=this.errors[e],a=o?g(o,r):"Error",s=this.serviceName+": "+a+" ("+i+").",c=new p(i,s),u=0,l=Object.keys(r);u<l.length;u++){var h=l[u];"_"!==h.slice(-1)&&(h in c&&console.warn('Overwriting FirebaseError base field "'+h+'" can cause unexpected behavior.'),c[h]=r[h])}return c},e}();function g(e,t){return e.replace(y,(function(e,n){var r=t[n];return null!=r?r.toString():"<"+n+"?>"}))}var y=/\{\$([^}]+)}/g;
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v(e){return JSON.parse(e)}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var b=function(e){var t={},n={},r={},i="";try{var o=e.split(".");t=v(u(o[0])||""),n=v(u(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(e){}return{header:t,claims:n,data:r,signature:i}};
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var w=function(){function e(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}return e.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},e.prototype.compress_=function(e,t){t||(t=0);var n=this.W_;if("string"==typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(r=0;r<16;r++)n[r]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,a,s=this.chain_[0],c=this.chain_[1],u=this.chain_[2],l=this.chain_[3],h=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(o=l^c&(u^l),a=1518500249):(o=c^u^l,a=1859775393):r<60?(o=c&u|l&(c|u),a=2400959708):(o=c^u^l,a=3395469782);i=(s<<5|s>>>27)+o+h+a+n[r]&4294967295;h=l,l=u,u=4294967295&(c<<30|c>>>2),c=s,s=i}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+c&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295},e.prototype.update=function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<t;){if(0===o)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"==typeof e){for(;r<t;)if(i[o]=e.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<t;)if(i[o]=e[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=t}},e.prototype.digest=function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)e[r]=this.chain_[n]>>i&255,++r;return e},e}();var T=function(){function e(e,t){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((function(){e(n)})).catch((function(e){n.error(e)}))}return e.prototype.next=function(e){this.forEachObserver((function(t){t.next(e)}))},e.prototype.error=function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)},e.prototype.complete=function(){this.forEachObserver((function(e){e.complete()})),this.close()},e.prototype.subscribe=function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!=typeof e||null===e)return!1;for(var n=0,r=t;n<r.length;n++){var i=r[n];if(i in e&&"function"==typeof e[i])return!0}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=S),void 0===r.error&&(r.error=S),void 0===r.complete&&(r.complete=S);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),o},e.prototype.unsubscribeOne=function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},e.prototype.forEachObserver=function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)},e.prototype.sendOne=function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}}))},e.prototype.close=function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))},e}();function S(){}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I(e,t,n){var r="";switch(t){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}var i=e+" failed: ";return i+=r+" argument "}t.CONSTANTS=i,t.Deferred=h,t.ErrorFactory=m,t.FirebaseError=p,t.Sha1=w,t.assert=o,t.assertionError=a,t.async=function(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];Promise.resolve(!0).then((function(){e.apply(void 0,n)})).catch((function(e){t&&t(e)}))}},t.base64=c,t.base64Decode=u,t.base64Encode=function(e){var t=s(e);return c.encodeByteArray(t,!0)},t.contains=
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.createSubscribe=function(e,t){var n=new T(e,t);return n.subscribe.bind(n)},t.decode=b,t.deepCopy=
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(e){return l(void 0,e)},t.deepExtend=l,t.errorPrefix=I,t.getUA=d,t.isAdmin=function(e){var t=b(e).claims;return"object"==typeof t&&!0===t.admin},t.isBrowser=function(){return"object"==typeof self&&self.self===self},t.isEmpty=function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0},t.isMobileCordova=function(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(d())},t.isNode=function(){try{return"[object process]"===Object.prototype.toString.call(e.process)}catch(e){return!1}},t.isNodeSdk=function(){return!0===i.NODE_CLIENT||!0===i.NODE_ADMIN},t.isReactNative=function(){return"object"==typeof navigator&&"ReactNative"===navigator.product},t.isValidFormat=function(e){var t=b(e).claims;return!!t&&"object"==typeof t&&t.hasOwnProperty("iat")},t.isValidTimestamp=function(e){var t=b(e).claims,n=Math.floor((new Date).getTime()/1e3),r=0,i=0;return"object"==typeof t&&(t.hasOwnProperty("nbf")?r=t.nbf:t.hasOwnProperty("iat")&&(r=t.iat),i=t.hasOwnProperty("exp")?t.exp:r+86400),!!n&&!!r&&!!i&&n>=r&&n<=i},t.issuedAtTime=function(e){var t=b(e).claims;return"object"==typeof t&&t.hasOwnProperty("iat")?t.iat:null},t.jsonEval=v,t.map=function(e,t,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,t.querystring=function(e){for(var t=[],n=function(e,n){Array.isArray(n)?n.forEach((function(n){t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))})):t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))},r=0,i=Object.entries(e);r<i.length;r++){var o=i[r];n(o[0],o[1])}return t.length?"&"+t.join("&"):""},t.querystringDecode=function(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=e.split("=");t[n[0]]=n[1]}})),t},t.safeGet=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0},t.stringLength=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t},t.stringToByteArray=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(i>=55296&&i<=56319){var a=i-55296;r++,o(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(a<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},t.stringify=function(e){return JSON.stringify(e)},t.validateArgCount=function(e,t,n,r){var i;if(r<t?i="at least "+t:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")},t.validateCallback=function(e,t,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(I(e,t,r)+"must be a valid function.")},t.validateContextObject=function(e,t,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(I(e,t,r)+"must be a valid context object.")}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,t.validateNamespace=function(e,t,n,r){if((!r||n)&&"string"!=typeof n)throw new Error(I(e,t,r)+"must be a valid firebase namespace.")}}).call(this,n(5))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n(1),o=function(){function e(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return e.prototype.setInstantiationMode=function(e){return this.instantiationMode=e,this},e.prototype.setMultipleInstances=function(e){return this.multipleInstances=e,this},e.prototype.setServiceProps=function(e){return this.serviceProps=e,this},e}(),a="[DEFAULT]",s=function(){function e(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return e.prototype.get=function(e){void 0===e&&(e=a);var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new i.Deferred;this.instancesDeferred.set(t,n);try{var r=this.getOrInitializeService(t);r&&n.resolve(r)}catch(e){}}return this.instancesDeferred.get(t).promise},e.prototype.getImmediate=function(e){var t=r.__assign({identifier:a,optional:!1},e),n=t.identifier,i=t.optional,o=this.normalizeInstanceIdentifier(n);try{var s=this.getOrInitializeService(o);if(!s){if(i)return null;throw Error("Service "+this.name+" is not available")}return s}catch(e){if(i)return null;throw e}},e.prototype.getComponent=function(){return this.component},e.prototype.setComponent=function(e){var t,n;if(e.name!==this.name)throw Error("Mismatching Component "+e.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=e,function(e){return"EAGER"===e.instantiationMode}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e))try{this.getOrInitializeService(a)}catch(e){}try{for(var i=r.__values(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var s=r.__read(o.value,2),c=s[0],u=s[1],l=this.normalizeInstanceIdentifier(c);try{var h=this.getOrInitializeService(l);u.resolve(h)}catch(e){}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}},e.prototype.clearInstance=function(e){void 0===e&&(e=a),this.instancesDeferred.delete(e),this.instances.delete(e)},e.prototype.delete=function(){return r.__awaiter(this,void 0,void 0,(function(){var e;return r.__generator(this,(function(t){switch(t.label){case 0:return e=Array.from(this.instances.values()),[4,Promise.all(e.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()})))];case 1:return t.sent(),[2]}}))}))},e.prototype.isComponentSet=function(){return null!=this.component},e.prototype.getOrInitializeService=function(e){var t=this.instances.get(e);return!t&&this.component&&(t=this.component.instanceFactory(this.container,function(e){return e===a?void 0:e}(e)),this.instances.set(e,t)),t||null},e.prototype.normalizeInstanceIdentifier=function(e){return this.component?this.component.multipleInstances?e:a:e},e}();var c=function(){function e(e){this.name=e,this.providers=new Map}return e.prototype.addComponent=function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component "+e.name+" has already been registered with "+this.name);t.setComponent(e)},e.prototype.addOrOverwriteComponent=function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)},e.prototype.getProvider=function(e){if(this.providers.has(e))return this.providers.get(e);var t=new s(e,this);return this.providers.set(e,t),t},e.prototype.getProviders=function(){return Array.from(this.providers.values())},e}();t.Component=o,t.ComponentContainer=c,t.Provider=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i,o=n(0),a=n(1),s=n(2),c=n(6),u=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r),l=new a.ErrorFactory("app","Firebase",u),h="@firebase/app",d="0.5.0",f="[DEFAULT]",p=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),m=new c.Logger("@firebase/app"),g=function(){function e(e,t,n){var r,i,c=this;this.firebase_=n,this.isDeleted_=!1,this.name_=t.name,this.automaticDataCollectionEnabled_=t.automaticDataCollectionEnabled||!1,this.options_=a.deepCopy(e),this.container=new s.ComponentContainer(t.name),this._addComponent(new s.Component("app",(function(){return c}),"PUBLIC"));try{for(var u=o.__values(this.firebase_.INTERNAL.components.values()),l=u.next();!l.done;l=u.next()){var h=l.value;this._addComponent(h)}}catch(e){r={error:e}}finally{try{l&&!l.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}}return Object.defineProperty(e.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(e){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!0,configurable:!0}),e.prototype.delete=function(){var e=this;return new Promise((function(t){e.checkDestroyed_(),t()})).then((function(){return e.firebase_.INTERNAL.removeApp(e.name_),Promise.all(e.container.getProviders().map((function(e){return e.delete()})))})).then((function(){e.isDeleted_=!0}))},e.prototype._getService=function(e,t){return void 0===t&&(t=f),this.checkDestroyed_(),this.container.getProvider(e).getImmediate({identifier:t})},e.prototype._removeServiceInstance=function(e,t){void 0===t&&(t=f),this.container.getProvider(e).clearInstance(t)},e.prototype._addComponent=function(e){try{this.container.addComponent(e)}catch(t){m.debug("Component "+e.name+" failed to register with FirebaseApp "+this.name,t)}},e.prototype._addOrOverwriteComponent=function(e){this.container.addOrOverwriteComponent(e)},e.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},e}();g.prototype.name&&g.prototype.options||g.prototype.delete||console.log("dc");var y="7.6.0";
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var v=
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function e(){var t=function(e){var t={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={});if("object"!=typeof i||null===i){i={name:i}}var o=i;void 0===o.name&&(o.name=f);var s=o.name;if("string"!=typeof s||!s)throw l.create("bad-app-name",{appName:String(s)});if(a.contains(t,s))throw l.create("duplicate-app",{appName:s});var c=new e(n,o,r);return t[s]=c,c},app:i,registerVersion:function(e,t,n){var r,i=null!==(r=p[e])&&void 0!==r?r:e;n&&(i+="-"+n);var o=i.match(/\s|\//),a=t.match(/\s|\//);if(o||a){var u=['Unable to register library "'+i+'" with version "'+t+'":'];return o&&u.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),o&&a&&u.push("and"),a&&u.push('version name "'+t+'" contains illegal characters (whitespace or "/")'),void m.warn(u.join(" "))}c(new s.Component(i+"-version",(function(){return{library:i,version:t}}),"VERSION"))},apps:null,SDK_VERSION:y,INTERNAL:{registerComponent:c,removeApp:function(e){delete t[e]},components:n,useAsService:function(e,t){if("serverAuth"===t)return null;return t}}};function i(e){if(e=e||f,!a.contains(t,e))throw l.create("no-app",{appName:e});return t[e]}function c(s){var c,u,h=s.name;if(n.has(h))return m.debug("There were multiple attempts to register component "+h+"."),"PUBLIC"===s.type?r[h]:null;if(n.set(h,s),"PUBLIC"===s.type){var d=function(e){if(void 0===e&&(e=i()),"function"!=typeof e[h])throw l.create("invalid-app-argument",{appName:h});return e[h]()};void 0!==s.serviceProps&&a.deepExtend(d,s.serviceProps),r[h]=d,e.prototype[h]=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this._getService.bind(this,h);return n.apply(this,s.multipleInstances?e:[])}}try{for(var f=o.__values(Object.keys(t)),p=f.next();!p.done;p=f.next()){var g=p.value;t[g]._addComponent(s)}}catch(e){c={error:e}}finally{try{p&&!p.done&&(u=f.return)&&u.call(f)}finally{if(c)throw c.error}}return"PUBLIC"===s.type?r[h]:null}return(r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(t).map((function(e){return t[e]}))}}),i.App=e,r)}(g);return t.INTERNAL=o.__assign(o.__assign({},t.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){a.deepExtend(t,e)},createSubscribe:a.createSubscribe,ErrorFactory:a.ErrorFactory,deepExtend:a.deepExtend}),t}(),b=function(){function e(e){this.container=e}return e.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(e){if(function(e){var t,n=e.getComponent();return"VERSION"===(null===(t=n)||void 0===t?void 0:t.type)}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e)){var t=e.getImmediate();return t.library+"/"+t.version}return null})).filter((function(e){return e})).join(" ")},e}();
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
if(a.isBrowser()&&void 0!==self.firebase){m.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var w=self.firebase.SDK_VERSION;w&&w.indexOf("LITE")>=0&&m.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var T=v.initializeApp;v.initializeApp=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return a.isNode()&&m.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the rollup-plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/rollup-plugin-node-resolve\n      '),T.apply(void 0,e)};var S=v;!function(e,t){e.INTERNAL.registerComponent(new s.Component("platform-logger",(function(e){return new b(e)}),"PRIVATE")),e.registerVersion(h,d,t),e.registerVersion("fire-js","")}(S),t.default=S,t.firebase=S},function(e,t,n){"use strict";var r,i=(r=n(3))&&"object"==typeof r&&"default"in r?r.default:r;
/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
i.registerVersion("firebase","7.6.1","app"),e.exports=i},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
function r(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */n.r(t),n.d(t,"LogLevel",(function(){return i})),n.d(t,"Logger",(function(){return c})),n.d(t,"setLogLevel",(function(){return u}));var i,o=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(i||(i={}));var a=i.INFO,s=function(e,t){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];if(!(t<e.logLevel)){var a=(new Date).toISOString();switch(t){case i.DEBUG:case i.VERBOSE:console.log.apply(console,r(["["+a+"]  "+e.name+":"],n));break;case i.INFO:console.info.apply(console,r(["["+a+"]  "+e.name+":"],n));break;case i.WARN:console.warn.apply(console,r(["["+a+"]  "+e.name+":"],n));break;case i.ERROR:console.error.apply(console,r(["["+a+"]  "+e.name+":"],n));break;default:throw new Error("Attempted to log a message with an invalid logType (value: "+t+")")}}},c=function(){function e(e){this.name=e,this._logLevel=a,this._logHandler=s,o.push(this)}return Object.defineProperty(e.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){if(!(e in i))throw new TypeError("Invalid value assigned to `logLevel`");this._logLevel=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"logHandler",{get:function(){return this._logHandler},set:function(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e},enumerable:!0,configurable:!0}),e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,r([this,i.DEBUG],e))},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,r([this,i.VERBOSE],e))},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,r([this,i.INFO],e))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,r([this,i.WARN],e))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,r([this,i.ERROR],e))},e}();
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function u(e){o.forEach((function(t){t.logLevel=e}))}},function(e,t,n){!function(e){"use strict";function t(e){return Array.prototype.slice.call(e)}function n(e){return new Promise((function(t,n){e.onsuccess=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function r(e,t,r){var i,o=new Promise((function(o,a){n(i=e[t].apply(e,r)).then(o,a)}));return o.request=i,o}function i(e,t,n){var i=r(e,t,n);return i.then((function(e){if(e)return new l(e,i.request)}))}function o(e,t,n){n.forEach((function(n){Object.defineProperty(e.prototype,n,{get:function(){return this[t][n]},set:function(e){this[t][n]=e}})}))}function a(e,t,n,i){i.forEach((function(i){i in n.prototype&&(e.prototype[i]=function(){return r(this[t],i,arguments)})}))}function s(e,t,n,r){r.forEach((function(r){r in n.prototype&&(e.prototype[r]=function(){return this[t][r].apply(this[t],arguments)})}))}function c(e,t,n,r){r.forEach((function(r){r in n.prototype&&(e.prototype[r]=function(){return i(this[t],r,arguments)})}))}function u(e){this._index=e}function l(e,t){this._cursor=e,this._request=t}function h(e){this._store=e}function d(e){this._tx=e,this.complete=new Promise((function(t,n){e.oncomplete=function(){t()},e.onerror=function(){n(e.error)},e.onabort=function(){n(e.error)}}))}function f(e,t,n){this._db=e,this.oldVersion=t,this.transaction=new d(n)}function p(e){this._db=e}o(u,"_index",["name","keyPath","multiEntry","unique"]),a(u,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),c(u,"_index",IDBIndex,["openCursor","openKeyCursor"]),o(l,"_cursor",["direction","key","primaryKey","value"]),a(l,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach((function(e){e in IDBCursor.prototype&&(l.prototype[e]=function(){var t=this,r=arguments;return Promise.resolve().then((function(){return t._cursor[e].apply(t._cursor,r),n(t._request).then((function(e){if(e)return new l(e,t._request)}))}))})})),h.prototype.createIndex=function(){return new u(this._store.createIndex.apply(this._store,arguments))},h.prototype.index=function(){return new u(this._store.index.apply(this._store,arguments))},o(h,"_store",["name","keyPath","indexNames","autoIncrement"]),a(h,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),c(h,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),s(h,"_store",IDBObjectStore,["deleteIndex"]),d.prototype.objectStore=function(){return new h(this._tx.objectStore.apply(this._tx,arguments))},o(d,"_tx",["objectStoreNames","mode"]),s(d,"_tx",IDBTransaction,["abort"]),f.prototype.createObjectStore=function(){return new h(this._db.createObjectStore.apply(this._db,arguments))},o(f,"_db",["name","version","objectStoreNames"]),s(f,"_db",IDBDatabase,["deleteObjectStore","close"]),p.prototype.transaction=function(){return new d(this._db.transaction.apply(this._db,arguments))},o(p,"_db",["name","version","objectStoreNames"]),s(p,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach((function(e){[h,u].forEach((function(n){e in n.prototype&&(n.prototype[e.replace("open","iterate")]=function(){var n=t(arguments),r=n[n.length-1],i=this._store||this._index,o=i[e].apply(i,n.slice(0,-1));o.onsuccess=function(){r(o.result)}})}))})),[u,h].forEach((function(e){e.prototype.getAll||(e.prototype.getAll=function(e,t){var n=this,r=[];return new Promise((function(i){n.iterateCursor(e,(function(e){e?(r.push(e.value),void 0===t||r.length!=t?e.continue():i(r)):i(r)}))}))})})),e.openDb=function(e,t,n){var i=r(indexedDB,"open",[e,t]),o=i.request;return o&&(o.onupgradeneeded=function(e){n&&n(new f(o.result,e.oldVersion,o.transaction))}),i.then((function(e){return new p(e)}))},e.deleteDb=function(e){return r(indexedDB,"deleteDatabase",[e])},Object.defineProperty(e,"__esModule",{value:!0})}(t)},function(e,t,n){var r=n(9),i=n(10);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var o={insert:"head",singleton:!1};r(i,o);e.exports=i.locals||{}},function(e,t,n){"use strict";var r,i=function(){return void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r},o=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),a=[];function s(e){for(var t=-1,n=0;n<a.length;n++)if(a[n].identifier===e){t=n;break}return t}function c(e,t){for(var n={},r=[],i=0;i<e.length;i++){var o=e[i],c=t.base?o[0]+t.base:o[0],u=n[c]||0,l="".concat(c," ").concat(u);n[c]=u+1;var h=s(l),d={css:o[1],media:o[2],sourceMap:o[3]};-1!==h?(a[h].references++,a[h].updater(d)):a.push({identifier:l,updater:g(d,t),references:1}),r.push(l)}return r}function u(e){var t=document.createElement("style"),r=e.attributes||{};if(void 0===r.nonce){var i=n.nc;i&&(r.nonce=i)}if(Object.keys(r).forEach((function(e){t.setAttribute(e,r[e])})),"function"==typeof e.insert)e.insert(t);else{var a=o(e.insert||"head");if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(t)}return t}var l,h=(l=[],function(e,t){return l[e]=t,l.filter(Boolean).join("\n")});function d(e,t,n,r){var i=n?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(e.styleSheet)e.styleSheet.cssText=h(t,i);else{var o=document.createTextNode(i),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(o,a[t]):e.appendChild(o)}}function f(e,t,n){var r=n.css,i=n.media,o=n.sourceMap;if(i?e.setAttribute("media",i):e.removeAttribute("media"),o&&btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}var p=null,m=0;function g(e,t){var n,r,i;if(t.singleton){var o=m++;n=p||(p=u(t)),r=d.bind(null,n,o,!1),i=d.bind(null,n,o,!0)}else n=u(t),r=f.bind(null,n,t),i=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else i()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=i());var n=c(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var r=0;r<n.length;r++){var i=s(n[r]);a[i].references--}for(var o=c(e,t),u=0;u<n.length;u++){var l=s(n[u]);0===a[l].references&&(a[l].updater(),a.splice(l,1))}n=o}}}},function(e,t,n){var r=n(11),i=n(12),o=n(13),a=n(14),s=n(15);t=r(!1);var c=i(o),u=i(a),l=i(s);t.push([e.i,'.mainPanel{display:flex;position:absolute;background-color:rgba(246,246,246,.9);transition:right 1s,bottom 1s;--width: 250px;--height: 200px}.mainPanel.right{height:100%;width:var(--width);top:0;right:calc(var(--width) * -1)}.mainPanel.bottom{flex-direction:column;height:var(--height);width:100%;bottom:calc(var(--height) * -1)}.mainPanel.right>.panel-content{width:100%}.mainPanel.bottom>.panel-content{display:flex;height:100%}.mainPanel.right.open{right:0}.mainPanel.bottom.open{bottom:0}.mainPanel>.panel-grip{background:#2a8fb1}.mainPanel.right>.panel-grip{display:flex;align-items:center;padding:0 5px;cursor:col-resize}.mainPanel.bottom>.panel-grip{padding:5px 0;cursor:row-resize}.mainPanel>.panel-grip::before{content:"";display:block}.mainPanel.right>.panel-grip::before{height:27px;border-right:3px double #fff}.mainPanel.bottom>.panel-grip::before{width:27px;border-top:3px double #fff;margin:auto}.mainPanel>.panel-content>.panel-header{display:flex;justify-content:space-around;align-items:center;text-align:center}.mainPanel.bottom>.panel-content>.panel-header{flex-direction:column}.mainPanel>.panel-content>.panel-header>span{padding:.2rem;flex-grow:1}.mainPanel.bottom>.panel-content>.panel-header>span{width:35px;writing-mode:vertical-rl;-webkit-writing-mode:vertical-rl}.mainPanel>.panel-content>.panel-header>span:not(.active){cursor:pointer;background-color:#e4e4e4}.mainPanel.right>.panel-content>.panel-header>span:not(.active){border-bottom:1px solid #a6a6a6}.mainPanel.bottom>.panel-content>.panel-header>span:not(.active){border-right:1px solid #a6a6a6}.mainPanel.right>.panel-content>.panel-header>span:not(:last-child){border-right:1px solid #a6a6a6}.mainPanel.bottom>.panel-content>.panel-header>span:not(:last-child){border-bottom:1px solid #a6a6a6}.mainPanel>.panel-content>.panel-body{flex-grow:1;padding:.5rem}.mainPanel>.panel-content>.panel-body>.hidden{display:none}#projectsListContainer{height:100%;width:100%;position:absolute;background-color:#fff}#projectsListContainer>div:first-child{display:flex;justify-content:space-between;padding:1rem}#projectsListContainer>div:first-child>span{width:20%}@media(max-width: 500px){#closeProjectsListBtn{display:none}}#closeProjectsListBtn{float:right}#projectsListContainer>div:first-child>h4{overflow-x:hidden;font-weight:normal;font-size:1.6rem}#projectsList{display:flex;flex-wrap:wrap;margin-left:1rem;--items-h: 6;--item-width: calc((100% / var(--items-h)) - 1rem);--remaining-items: unset}@media(max-width: 1000px){#projectsList{--items-h: 5}}@media(max-width: 800px){#projectsList{--items-h: 4}}@media(max-width: 600px){#projectsList{--items-h: 3}}@media(max-width: 400px){#projectsList{--items-h: 2}}@media(max-width: 280px){#projectsList{--items-h: 1}}#projectsList::after{content:"";flex-grow:var(--remaining-items);width:calc((var(--item-width) + 1rem) * var(--remaining-items))}#projectsList>.empty-msg{width:100%;margin-top:3rem;margin-bottom:3rem;text-align:center}.projectItem{flex-grow:1;width:var(--item-width);margin-bottom:1rem;margin-right:1rem;position:relative;cursor:pointer;font-family:inherit;box-shadow:2px 2px 7px #b2b2b2}.projectItem>h4{background-color:#f9f9f9}.projectItem.current{cursor:auto;outline:4px solid #7da5b6;box-shadow:none}.projectItem.unsync{opacity:.5}.projectItem:not(.current):hover{box-shadow:2px 2px 7px #6b6b6b}.projectItem>.sharedIcon{position:absolute;width:30px;height:30px;right:6px;top:6px;background-color:#eee;padding:5px;border-radius:50%}.projectItem>.thumb{display:block;width:100%;height:150px;object-fit:cover}.projectItem>h4{padding:.6rem;font-weight:normal}#loadMoreProjBtn{display:block;margin:auto}#modalDialogContainer{justify-content:center;align-items:center;position:absolute;top:0;right:0;bottom:0;left:0}#modalDialogContainer>div{padding:1rem;background-color:#fff}#modalDialogContainer.grayTranslucent{background-color:rgba(216,216,216,.8)}#modalDialogContainer.lightOpaque{background-color:#fff}#closeModalBtn{float:right}#modalDialogContainer .modal-main-btns{display:flex;align-items:flex-end;justify-content:flex-end;margin-top:.3rem}#modalDialogContainer .modal-main-btns>button:not(:first-child){margin-left:.5rem}#authorizeDialog{display:flex;flex-direction:column;padding:1rem}#authorizeDialog>img{align-self:center}#authorizeDialog>h2{font-size:1.6rem;text-align:center;font-weight:normal;margin-bottom:1.5rem;margin-top:1rem}#authorizeDialog>div:last-child{display:flex;flex-direction:column;flex-grow:1;justify-content:end}#authorizeDialog>div:last-child>button{font-size:1.2rem}#authorizeDialog>div:last-child>button:not(:last-child){margin-bottom:.4rem}#uploadFileForm{display:flex;flex-direction:column;min-width:200px;padding:1rem;background-color:#fff}#uploadFileForm>input{font-family:inherit}#uploadFileForm>label{margin-top:1rem;text-align:center;cursor:pointer;font-size:.9rem}#uploadFileForm>button:last-child{margin-top:.5rem}#loadingFile{padding:1rem;text-align:center}#sideNavContainer{display:flex;flex-direction:column;position:absolute;height:100vh;width:314px;top:0;right:0;z-index:999;transform:translateX(314px);background-color:#fff}#sideNavContainer.active{transform:translateX(0)}.side-nav-header{padding-right:1rem;padding-left:1rem}#user-info{display:flex;align-items:flex-end;margin-top:var(--header-height)}#user-info>img{margin-right:.6rem}#user-info>span{overflow-x:hidden}#user-info>span>span{display:block}#user-info .email{font-weight:lighter}.side-nav-body{display:flex;flex-direction:column;align-items:center;flex-grow:1;padding:1rem;text-align:center}.side-nav-body button{width:80%}.side-nav-body>.side-nav-section{width:100%;padding-bottom:1rem}.side-nav-body>.side-nav-section.grow{flex-grow:1}#sideNavToggle{width:24px;height:24px;margin:.4rem;cursor:pointer;border-style:none;background-image:url('+c+");background-repeat:no-repeat;background-position:center}#sideNavToggle.active{background-image:url("+u+')}#sideNavContainer+.side-nav-shade{position:absolute;z-index:10;background-color:#000;width:100%;height:100vh;top:0;opacity:0;left:100%;transition:opacity .25s ease-out,left 0s linear .25s}#sideNavContainer.active+.side-nav-shade{opacity:.7;left:0;transition:opacity .25s ease-out,left 0s linear}.side-nav-footer{padding:1rem;font-weight:lighter}#commentForm>.inputs{margin-bottom:.8rem}#commentForm>.inputs>textarea{width:100%;min-height:150px}#commentForm.horizontal{display:flex}#commentForm.horizontal>.inputs{flex-grow:1}#commentForm.horizontal>.inputs>textarea{min-height:60px}#commentForm>.inputs>.members{margin-top:.5rem}#commentForm>.inputs>.members.hidden{display:none}#commentForm>.inputs>.members>p:first-child{font-weight:lighter;margin-bottom:.2rem}#commentForm>.inputs>.members>select{width:100%}#commentForm .info{margin-top:.1rem;font-size:.7rem;font-weight:lighter}#commentForm>.formButtonsModes>.buttonsContainer{display:flex;justify-content:space-between}#commentForm.horizontal>.formButtonsModes{margin-left:.5rem}#commentForm.horizontal>.formButtonsModes>.buttonsContainer{flex-direction:column}#commentForm.horizontal>.formButtonsModes>.buttonsContainer>button{height:50px}#commentForm.horizontal>.formButtonsModes>.buttonsContainer>button:first-child{margin-top:.6rem;order:1}#shareProjectDialog{display:flex;flex-direction:column;position:relative;min-height:350px;min-width:400px;background-color:#fff}#shareProjectDialog .table-wrapper{margin-top:.5rem;margin-bottom:1rem;background-color:#f1f1f1}#shareProjectDialog .table-wrapper.fixed-height{height:100px;overflow-y:auto}#shareProjectDialog .table-wrapper>table{width:100%;border-collapse:collapse;background-color:#eee}#shareProjectDialog .table-wrapper>.empty-msg{display:none;height:100%;align-items:center;justify-content:center;padding:1rem}#shareProjectDialog>.users-container.empty .empty-msg{display:flex}#shareProjectDialog>.users-container.empty table{display:none}#shareProjectDialog>.users-container.hidden{visibility:hidden}#shareProjectDialog td:last-child{width:40px;text-align:center}#shareProjectDialog td:last-child>svg{width:12px;height:12px}#shareProjectDialog td.action-btn{cursor:pointer}#shareProjectDialog td.action-btn:hover{background-color:#dbdbdb}#shareProjectDialog tr{border-bottom:2px solid #fff}#shareProjectDialog tr.to-delete>td:first-child{opacity:.4}#shareProjectDialog td.user-data>img{float:left;height:64px;width:64px;margin-right:.5rem}#shareProjectDialog td.user-data>div{display:flex;height:64px;padding:.4rem;flex-direction:column;justify-content:space-around}#shareProjectDialog td.user-data>div>span:nth-child(2){font-weight:lighter}#shareProjectDialog>.pending-users td.user-data{padding:.4rem}#shareProjectDialog>form>label{display:block}#shareProjectDialog>form>div{display:flex}#shareProjectDialog>form input{flex-grow:1}#shareProjectDialog>form button{width:60px}#shareProjectDialog>.loader-container{display:flex;align-items:center;justify-content:center;position:absolute;width:100%;height:100%;top:0;left:0;background-color:rgba(255,255,255,.7)}#shareProjectDialog>.loader-container.hidden{display:none}#shareProjectDialog .share-notification{position:absolute;bottom:0}#shareProjectDialog .share-notification.hidden{visibility:hidden}div#propsTablesContainer{display:flex}.mainPanel.right div#propsTablesContainer{flex-direction:column}.data-table{text-align:left;width:100%}.data-table>thead th{padding-left:.3rem;padding-right:.3rem;background-color:#ddd}.data-table>tbody th{width:50%;font-weight:normal}.data-table td{font-weight:lighter}#messageContainer{position:absolute;padding:1rem;max-width:300px;flex-direction:column;align-items:flex-end;bottom:2rem;right:2rem;box-shadow:2px 2px 6px #b2b2b2}#messageContainer>button{margin-bottom:.5rem}#messageContainer>button>img{width:1rem}#messageContainer.success{background-color:#aef5ad}#messageContainer.error{background-color:#dc9393}#messageContainer.warning{background-color:#ecdaa4}#viewportMessage{display:none;position:absolute;width:100%;height:100%;top:0;justify-content:center;align-items:center;text-align:center;font-weight:lighter;background-color:rgba(255,255,255,.95)}#viewportMessage.active{display:flex}#viewportMessage p{padding-bottom:1rem}#viewportMessage .btns-container{display:flex;justify-content:space-around}#notificationsContainer{display:none;position:absolute;width:450px;top:calc(var(--header-height) + 1rem);right:1rem;opacity:0;transition:opacity .2s ease-in;background-color:#f6f6f6;box-shadow:0 0 12px rgba(0,0,0,.2)}#notificationsContainer>.empty-msg{display:none;padding:2rem .8rem;text-align:center}#notificationsContainer.open{display:unset;opacity:1}#notificationsContainer.empty>.notifications-body{display:none}#notificationsContainer.empty>.empty-msg{display:block}.notifications-header{padding:.8rem;background-color:#fbfbfb;border-bottom:2px solid #dbdbdb}.notifications-body{max-height:350px;overflow:auto}.notifications-body>li{display:flex;padding:.8rem;cursor:pointer;border-bottom:1px solid #dbdbdb}.notifications-body>li.pending{background-color:#cbeaf5}.notifications-body>li.pending:hover{background-color:#c2e0ea}.notifications-body>li:hover{background-color:#eaeaea}.notification-thumb{height:50px;margin-right:1rem}.notification-content>h4{margin-bottom:.2rem;font-weight:500}.notification-content>p{font-weight:lighter}#contextMenu{width:120px;position:absolute;padding-top:.5rem;background-color:#fff;box-shadow:2px 2px 7px rgba(0,0,0,.2)}#contextMenu>ul>li{padding:.6rem;cursor:pointer}#contextMenu>ul>li:hover{background-color:rgba(0,0,0,.2)}.selected{--fill: #ffbd00;--stroke: #e89807;--stroke-w: 8px}.selected.fill.stroke>path,.selected.fill.stroke>polygon,.selected.fill.stroke>circle,.selected.fill.stroke>rect{fill:var(--fill);stroke:var(--stroke);stroke-width:var(--stroke-w)}.selected.stroke>path,.selected.stroke>polyline,.selected.stroke>line{stroke:var(--stroke);stroke-width:var(--stroke-w)}.selected.fill>path,.selected.fill>polygon,.selected.fill>circle{fill:var(--fill)}.selected.stroke>.hatch>line{stroke:var(--stroke);stroke-width:var(--stroke-w)}:root{--header-height: 2.5rem;--theme-blue: #2a8fb1;--theme-yellow: #ea8c15}*,*::before,*::after{box-sizing:border-box}h1,h2,h3,h4,h5,p{margin-top:0;margin-bottom:0}ul,ol{list-style-type:none;margin-top:0;margin-bottom:0;padding-left:0}button{border-style:none;padding:0;background-color:unset}body{display:flex;flex-direction:column;margin:0;overflow:hidden;color:#545454;font-family:"Oswald",sans-serif}svg.svg-loader{width:130px;height:90px}.buttonBase{padding:.4rem;cursor:pointer;border-width:1px;border-style:solid;font-family:inherit}.buttonBase.sides{border-top-style:none;border-bottom-style:none}.buttonBase.light{color:#373737;border-color:#cfcfcf}.buttonBase.light:not(.disabled):hover{background-color:#ececec}.buttonBase.emphasize{border-color:#e0e0e0;background-color:#d1f0ec}.buttonBase.emphasize:not(.disabled):hover{background-color:#acd3ce}.buttonBase.danger{color:#f55252;border-color:#fba4a4}.buttonBase.danger:not(.disabled):hover{background-color:#ffe9e9}.buttonBase.disabled{cursor:unset;opacity:.5}button.disabled:focus{outline-style:none}.buttonBase.locked{cursor:unset}.buttonBase.locked:hover{background-color:unset}.icon-btn{cursor:pointer}header .icon-btn{padding:calc(((var(--header-height) - 2px) - 24px) / 2);height:calc(var(--header-height) - 2px);width:calc(var(--header-height) - 2px)}.icon-btn:not(.disabled):not(.btn-tool-enabled):hover{background-color:#ececec}.icon-btn>svg{display:block;width:24px;height:24px}.icon-btn.disabled{opacity:.1;cursor:auto}.icon-btn.hidden{display:none}.btn-tool-enabled{background-color:#96cbdb}.btn-bg-img{background-repeat:no-repeat;background-position-y:center;background-position-x:.8rem}.google-logo{background-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHZpZXdCb3g9IjAgMCAxOCAxOCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48dGl0bGU+c3VwZXIgZzwvdGl0bGU+PGcgZmlsbC1ydWxlPSJldmVub2RkIj48cGF0aCBkPSJNOSAzLjQ4YzEuNjkgMCAyLjgzLjczIDMuNDggMS4zNGwyLjU0LTIuNDhDMTMuNDYuODkgMTEuNDMgMCA5IDAgNS40OCAwIDIuNDQgMi4wMi45NiA0Ljk2bDIuOTEgMi4yNkM0LjYgNS4wNSA2LjYyIDMuNDggOSAzLjQ4eiIgZmlsbD0iI0VBNDMzNSIvPjxwYXRoIGQ9Ik0xNy42NCA5LjJjMC0uNzQtLjA2LTEuMjgtLjE5LTEuODRIOXYzLjM0aDQuOTZjLS4xLjgzLS42NCAyLjA4LTEuODQgMi45MmwyLjg0IDIuMmMxLjctMS41NyAyLjY4LTMuODggMi42OC02LjYyeiIgZmlsbD0iIzQyODVGNCIvPjxwYXRoIGQ9Ik0zLjg4IDEwLjc4QTUuNTQgNS41NCAwIDAgMSAzLjU4IDljMC0uNjIuMTEtMS4yMi4yOS0xLjc4TC45NiA0Ljk2QTkuMDA4IDkuMDA4IDAgMCAwIDAgOWMwIDEuNDUuMzUgMi44Mi45NiA0LjA0bDIuOTItMi4yNnoiIGZpbGw9IiNGQkJDMDUiLz48cGF0aCBkPSJNOSAxOGMyLjQzIDAgNC40Ny0uOCA1Ljk2LTIuMThsLTIuODQtMi4yYy0uNzYuNTMtMS43OC45LTMuMTIuOS0yLjM4IDAtNC40LTEuNTctNS4xMi0zLjc0TC45NyAxMy4wNEMyLjQ1IDE1Ljk4IDUuNDggMTggOSAxOHoiIGZpbGw9IiMzNEE4NTMiLz48cGF0aCBmaWxsPSJub25lIiBkPSJNMCAwaDE4djE4SDB6Ii8+PC9nPjwvc3ZnPg==)}#saveBtn.enabled>svg,#notificationBtn.enabled>svg{fill:var(--theme-yellow);transform:scale(1.2)}#saveBtn>svg.progress-icon{display:none}#saveBtn.progress:hover{cursor:auto;background-color:unset}#saveBtn.progress>svg.save-icon{display:none}#saveBtn.progress>svg.progress-icon{display:block}header{height:var(--header-height);padding-right:8rem;align-items:stretch;z-index:1;background-color:#f6f6f6;border-bottom:2px solid var(--theme-blue)}header>span:first-child{width:4rem}header>span:first-child>img{height:100%;padding:.3rem;margin:auto;display:block}header>h1{position:absolute;right:100%}#projectsListBtn{min-width:10rem;font-size:1rem;font-weight:normal}#projectsListBtn>span{display:inline-block;width:100%;text-align:center}@media(max-width: 500px){#projectsListBtn{display:unset;min-width:unset;width:2.5rem;font-size:0;border-left-style:none;background-repeat:no-repeat;background-position:center;background-image:url('+l+");background-size:24px}}#toolbarsContainer{flex-grow:1;justify-content:flex-end}#drawingsBtns{min-width:8rem;text-align:center}#drawingsBtns>button{height:calc(var(--header-height) - 2px);width:100%;border-left-style:none}#drawingsBtns>ul{font-size:.9rem;font-weight:lighter;cursor:pointer;background-color:#f6f6f6;box-shadow:0px 2px 5px #b6b6b6}#drawingsBtns>ul>li{padding:.4rem}#drawingsBtns>ul>li.active{background-color:#c2c2c2;cursor:auto}#drawingsBtns>ul>li:not(.active):hover{background-color:#dfdfdf}.global-nav-btns{display:flex;position:absolute;top:0;right:0;z-index:1000;border-left:1px solid #c8c8c8}@media(max-width: 500px){header{order:1;border-top:2px solid var(--theme-blue);border-bottom:unset}header>span:first-child{display:none}#toolbarsContainer{position:absolute;right:0}#drawingsBtns>ul{box-shadow:0px -2px 7px #b6b6b6}}.dropdown-container{z-index:1;position:relative}.dropdown-container>.dropdown-content{display:flex;flex-direction:column;transition:.6s;transform:translateY(-100%);opacity:0;z-index:-1;position:absolute;right:0;left:0;top:calc(var(--header-height) - 2px)}.dropdown-container.responsive>.dropdown-content{display:inline;opacity:unset;z-index:unset;position:unset}@media(max-width: 800px){.dropdown-container.responsive>.dropdown-content{display:flex;opacity:0;z-index:-1;position:absolute}}.dropdown-container.open>.dropdown-content{transform:translateY(0%);opacity:1}@media(max-width: 500px){.dropdown-container>.dropdown-content{transform:unset}.dropdown-container.open>.dropdown-content{transform:translateY(calc(-100% - 2.5rem + 2px))}}main{position:relative;height:calc(100vh - var(--header-height))}#workspaces{height:100%}.workspace{height:100%}form .top-label{margin-bottom:.5rem}form .base-input{padding:.4rem}form .error-msg{font-size:.9rem;font-weight:lighter;color:red}form .error-msg.hidden{visibility:hidden}#renameProjectForm .rename-form-content{display:flex;width:100%;flex-direction:column}.drawingsContainer{height:100%}.drawingsContainer>div{height:100%}.drawingsContainer>div>svg{height:100%;width:100%}@media all and (display-mode: standalone){header{border-top:1px solid #dedede}}",""]),e.exports=t},function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n=e[1]||"",r=e[3];if(!r)return n;if(t&&"function"==typeof btoa){var i=(a=r,s=btoa(unescape(encodeURIComponent(JSON.stringify(a)))),c="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(s),"/*# ".concat(c," */")),o=r.sources.map((function(e){return"/*# sourceURL=".concat(r.sourceRoot||"").concat(e," */")}));return[n].concat(o).concat([i]).join("\n")}var a,s,c;return[n].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,r){"string"==typeof e&&(e=[[null,e,""]]);var i={};if(r)for(var o=0;o<this.length;o++){var a=this[o][0];null!=a&&(i[a]=!0)}for(var s=0;s<e.length;s++){var c=[].concat(e[s]);r&&i[c[0]]||(n&&(c[2]?c[2]="".concat(n," and ").concat(c[2]):c[2]=n),t.push(c))}},t}},function(e,t,n){"use strict";e.exports=function(e,t){return t||(t={}),"string"!=typeof(e=e&&e.__esModule?e.default:e)?e:(/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]/.test(e)||t.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e)}},function(e,t,n){"use strict";n.r(t),t.default=n.p+"6a516ff5fac28139a5f05c592974ad7a.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"e2684d217a882ae02c861b7fc5314e72.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"699485ad424f68ff9068a111deaba047.svg"},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r,i,o=(r=n(3))&&"object"==typeof r&&"default"in r?r.default:r,a=n(0),s=n(6),c=n(1),u=n(2),l=n(18),h=o.SDK_VERSION,d=new s.Logger("@firebase/firestore");function f(){return d.logLevel===s.LogLevel.DEBUG?i.DEBUG:d.logLevel===s.LogLevel.SILENT?i.SILENT:i.ERROR}function p(e){switch(e){case i.DEBUG:d.logLevel=s.LogLevel.DEBUG;break;case i.ERROR:d.logLevel=s.LogLevel.ERROR;break;case i.SILENT:d.logLevel=s.LogLevel.SILENT;break;default:d.error("Firestore ("+h+"): Invalid value passed to `setLogLevel`")}}function m(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(d.logLevel<=s.LogLevel.DEBUG){var i=n.map(y);d.debug.apply(d,a.__spreadArrays(["Firestore ("+h+") ["+e+"]: "+t],i))}}function g(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(d.logLevel<=s.LogLevel.ERROR){var r=t.map(y);d.error.apply(d,a.__spreadArrays(["Firestore ("+h+"): "+e],r))}}function y(e){if("string"==typeof e)return e;var t=w.getPlatform();try{return t.formatJSON(e)}catch(t){return e}}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v(e){var t="FIRESTORE ("+h+") INTERNAL ASSERTION FAILED: "+e;throw g(t),new Error(t)}function b(e,t){e||v(t)}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */!function(e){e[e.DEBUG=0]="DEBUG",e[e.ERROR=1]="ERROR",e[e.SILENT=2]="SILENT"}(i||(i={}));var w=function(){function e(){}return e.setPlatform=function(t){e.platform&&v("Platform already defined"),e.platform=t},e.getPlatform=function(){return e.platform||v("Platform not set"),e.platform},e}();function T(){return w.getPlatform().emptyByteString}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var S={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},I=function(e){function t(t,n){var r=e.call(this,n)||this;return r.code=t,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return a.__extends(t,e),t}(Error);
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function E(e,t){function n(){var e="This constructor is private.";throw t&&(e+=" ",e+=t),new I(S.INVALID_ARGUMENT,e)}for(var r in n.prototype=e.prototype,e)e.hasOwnProperty(r)&&(n[r]=e[r]);return n}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function _(e,t){return void 0!==e?e:t}function D(e,t){for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Number(n);isNaN(r)||t(r,e[n])}}function k(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function N(e){for(var t in b(null!=e&&"object"==typeof e,"isEmpty() expects object parameter."),e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function A(e,t){if(0!==t.length)throw new I(S.INVALID_ARGUMENT,"Function "+e+"() does not support arguments, but was called with "+Y(t.length,"argument")+".")}function x(e,t,n){if(t.length!==n)throw new I(S.INVALID_ARGUMENT,"Function "+e+"() requires "+Y(n,"argument")+", but was called with "+Y(t.length,"argument")+".")}function M(e,t,n){if(t.length<n)throw new I(S.INVALID_ARGUMENT,"Function "+e+"() requires at least "+Y(n,"argument")+", but was called with "+Y(t.length,"argument")+".")}function L(e,t,n,r){if(t.length<n||t.length>r)throw new I(S.INVALID_ARGUMENT,"Function "+e+"() requires between "+n+" and "+r+" arguments, but was called with "+Y(t.length,"argument")+".")}function P(e,t,n,r){q(e,t,H(n)+" argument",r)}function O(e,t,n,r){void 0!==r&&P(e,t,n,r)}function R(e,t,n,r){q(e,t,n+" option",r)}function j(e,t,n,r){void 0!==r&&R(e,t,n,r)}function B(e,t,n,r,i){void 0!==r&&function(e,t,n,r,i){if(!(r instanceof Array))throw new I(S.INVALID_ARGUMENT,"Function "+e+"() requires its "+t+" option to be an array, but it was: "+W(r));for(var o=0;o<r.length;++o)if(!i(r[o]))throw new I(S.INVALID_ARGUMENT,"Function "+e+"() requires all "+t+" elements to be "+n+", but the value at index "+o+" was: "+W(r[o]))}(e,t,n,r,i)}function F(e,t,n,r,i){void 0!==r&&function(e,t,n,r,i){for(var o=[],a=0,s=i;a<s.length;a++){var c=s[a];if(c===r)return;o.push(W(c))}var u=W(r);throw new I(S.INVALID_ARGUMENT,"Invalid value "+u+" provided to function "+e+'() for option "'+n+'". Acceptable values: '+o.join(", "))}(e,0,n,r,i)}function V(e,t,n,r){if(!t.some((function(e){return e===r})))throw new I(S.INVALID_ARGUMENT,"Invalid value "+W(r)+" provided to function "+e+"() for its "+H(n)+" argument. Acceptable values: "+t.join(", "))}function q(e,t,n,r){if(!("object"===t?U(r):"non-empty string"===t?"string"==typeof r&&""!==r:typeof r===t)){var i=W(r);throw new I(S.INVALID_ARGUMENT,"Function "+e+"() requires its "+n+" to be of type "+t+", but it was: "+i)}}function U(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function W(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=e.substring(0,20)+"..."),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){if(e.constructor){var t=/function\s+([^\s(]+)\s*\(/.exec(e.constructor.toString());if(t&&t.length>1)return t[1]}return null}(e);return t?"a custom "+t+" object":"an object"}return"function"==typeof e?"a function":v("Unknown wrong type: "+typeof e)}function z(e,t,n){if(void 0===n)throw new I(S.INVALID_ARGUMENT,"Function "+e+"() requires a valid "+H(t)+" argument, but it was undefined.")}function K(e,t,n){k(t,(function(t,r){if(n.indexOf(t)<0)throw new I(S.INVALID_ARGUMENT,"Unknown option '"+t+"' passed to function "+e+"(). Available options: "+n.join(", "))}))}function G(e,t,n,r){var i=W(r);return new I(S.INVALID_ARGUMENT,"Function "+e+"() requires its "+H(n)+" argument to be a "+t+", but it was: "+i)}function Q(e,t,n){if(n<=0)throw new I(S.INVALID_ARGUMENT,'Function "'+e+'()" requires its '+H(t)+" argument to be a positive number, but it was: "+n+".")}function H(e){switch(e){case 1:return"first";case 2:return"second";case 3:return"third";default:return e+"th"}}function Y(e,t){return e+" "+t+(1===e?"":"s")}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var J=function(){function e(){}return e.newId=function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t="",n=0;n<20;n++)t+=e.charAt(Math.floor(Math.random()*e.length));return b(20===t.length,"Invalid auto ID: "+t),t},e}();function X(e,t){return e<t?-1:e>t?1:0}function $(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].isEqual(t[n]))return!1;return!0}function Z(e){return e+"\0"}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ee(){if("undefined"==typeof Uint8Array)throw new I(S.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function te(){if(!w.getPlatform().base64Available)throw new I(S.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var ne,re=function(){function e(e){te(),this._binaryString=e}return e.fromBase64String=function(t){x("Blob.fromBase64String",arguments,1),P("Blob.fromBase64String","string",1,t),te();try{var n=w.getPlatform().atob(t);return new e(n)}catch(e){throw new I(S.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+e)}},e.fromUint8Array=function(t){if(x("Blob.fromUint8Array",arguments,1),ee(),!(t instanceof Uint8Array))throw G("Blob.fromUint8Array","Uint8Array",1,t);var n=Array.prototype.map.call(t,(function(e){return String.fromCharCode(e)})).join("");return new e(n)},e.prototype.toBase64=function(){return x("Blob.toBase64",arguments,0),te(),w.getPlatform().btoa(this._binaryString)},e.prototype.toUint8Array=function(){x("Blob.toUint8Array",arguments,0),ee();for(var e=new Uint8Array(this._binaryString.length),t=0;t<this._binaryString.length;t++)e[t]=this._binaryString.charCodeAt(t);return e},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e.prototype.isEqual=function(e){return this._binaryString===e._binaryString},e.prototype._compareTo=function(e){return X(this._binaryString,e._binaryString)},e}(),ie=E(re,"Use Blob.fromUint8Array() or Blob.fromBase64String() instead."),oe=function(e,t,n,r,i){this.databaseId=e,this.persistenceKey=t,this.host=n,this.ssl=r,this.forceLongPolling=i},ae="(default)",se=function(){function e(e,t){this.projectId=e,this.database=t||ae}return Object.defineProperty(e.prototype,"isDefaultDatabase",{get:function(){return this.database===ae},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database},e.prototype.compareTo=function(e){return X(this.projectId,e.projectId)||X(this.database,e.database)},e}(),ce=function(){function e(e,t){var n=this;this.previousValue=e,t&&(t.sequenceNumberHandler=function(e){return n.setPreviousValue(e)},this.writeNewSequenceNumber=function(e){return t.writeSequenceNumber(e)})}return e.prototype.setPreviousValue=function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue},e.prototype.next=function(){var e=++this.previousValue;return this.writeNewSequenceNumber&&this.writeNewSequenceNumber(e),e},e.INVALID=-1,e}(),ue=function(){function e(e,t,n){void 0===t?t=0:t>e.length&&v("offset "+t+" out of range "+e.length),void 0===n?n=e.length-t:n>e.length-t&&v("length "+n+" out of range "+(e.length-t)),this.segments=e,this.offset=t,this.len=n}return Object.defineProperty(e.prototype,"length",{get:function(){return this.len},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return 0===e.comparator(this,t)},e.prototype.child=function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)},e.prototype.limit=function(){return this.offset+this.length},e.prototype.popFirst=function(e){return e=void 0===e?1:e,b(this.length>=e,"Can't call popFirst() with less segments"),this.construct(this.segments,this.offset+e,this.length-e)},e.prototype.popLast=function(){return b(!this.isEmpty(),"Can't call popLast() on empty path"),this.construct(this.segments,this.offset,this.length-1)},e.prototype.firstSegment=function(){return b(!this.isEmpty(),"Can't call firstSegment() on empty path"),this.segments[this.offset]},e.prototype.lastSegment=function(){return this.get(this.length-1)},e.prototype.get=function(e){return b(e<this.length,"Index out of range"),this.segments[this.offset+e]},e.prototype.isEmpty=function(){return 0===this.length},e.prototype.isPrefixOf=function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0},e.prototype.isImmediateParentOf=function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0},e.prototype.forEach=function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])},e.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},e.comparator=function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),o=t.get(r);if(i<o)return-1;if(i>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0},e}(),le=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.construct=function(e,n,r){return new t(e,n,r)},t.prototype.canonicalString=function(){return this.toArray().join("/")},t.prototype.toString=function(){return this.canonicalString()},t.fromString=function(e){if(e.indexOf("//")>=0)throw new I(S.INVALID_ARGUMENT,"Invalid path ("+e+"). Paths must not contain // in them.");return new t(e.split("/").filter((function(e){return e.length>0})))},t.EMPTY_PATH=new t([]),t}(ue),he=/^[_a-zA-Z][_a-zA-Z0-9]*$/,de=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.construct=function(e,n,r){return new t(e,n,r)},t.isValidIdentifier=function(e){return he.test(e)},t.prototype.canonicalString=function(){return this.toArray().map((function(e){return e=e.replace("\\","\\\\").replace("`","\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")},t.prototype.toString=function(){return this.canonicalString()},t.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},t.keyField=function(){return new t(["__name__"])},t.fromServerFormat=function(e){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new I(S.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},a=!1;i<e.length;){var s=e[i];if("\\"===s){if(i+1===e.length)throw new I(S.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var c=e[i+1];if("\\"!==c&&"."!==c&&"`"!==c)throw new I(S.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else"`"===s?(a=!a,i++):"."!==s||a?(r+=s,i++):(o(),i++)}if(o(),a)throw new I(S.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)},t.EMPTY_PATH=new t([]),t}(ue),fe=function(){function e(t){this.path=t,b(e.isDocumentKey(t),"Invalid DocumentKey with an odd number of segments: "+t.toArray().join("/"))}return e.prototype.hasCollectionId=function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e},e.prototype.isEqual=function(e){return null!==e&&0===le.comparator(this.path,e.path)},e.prototype.toString=function(){return this.path.toString()},e.comparator=function(e,t){return le.comparator(e.path,t.path)},e.isDocumentKey=function(e){return e.length%2==0},e.fromSegments=function(t){return new e(new le(t.slice()))},e.fromPathString=function(t){return new e(le.fromString(t))},e.EMPTY=new e(new le([])),e}(),pe=function(){var e=this;this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))};!function(e){e.All="all",e.ListenStreamIdle="listen_stream_idle",e.ListenStreamConnectionBackoff="listen_stream_connection_backoff",e.WriteStreamIdle="write_stream_idle",e.WriteStreamConnectionBackoff="write_stream_connection_backoff",e.OnlineStateTimeout="online_state_timeout",e.ClientMetadataRefresh="client_metadata_refresh",e.LruGarbageCollection="lru_garbage_collection",e.RetryTransaction="retry_transaction"}(ne||(ne={}));var me=function(){function e(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new pe,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.catch=this.deferred.promise.catch.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return e.createAndSchedule=function(t,n,r,i,o){var a=new e(t,n,Date.now()+r,i,o);return a.start(r),a},e.prototype.start=function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)},e.prototype.skipDelay=function(){return this.handleDelayElapsed()},e.prototype.cancel=function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new I(S.CANCELLED,"Operation cancelled"+(e?": "+e:""))))},e.prototype.handleDelayElapsed=function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))},e.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},e}(),ge=function(){function e(){this.tail=Promise.resolve(),this._isShuttingDown=!1,this.delayedOperations=[],this.failure=null,this.operationInProgress=!1,this.timerIdsToSkip=[]}return Object.defineProperty(e.prototype,"isShuttingDown",{get:function(){return this._isShuttingDown},enumerable:!0,configurable:!0}),e.prototype.enqueueAndForget=function(e){this.enqueue(e)},e.prototype.enqueueAndForgetEvenAfterShutdown=function(e){this.verifyNotFailed(),this.enqueueInternal(e)},e.prototype.enqueueEvenAfterShutdown=function(e){return this.verifyNotFailed(),this.enqueueInternal(e)},e.prototype.enqueueAndInitiateShutdown=function(e){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(t){switch(t.label){case 0:return this.verifyNotFailed(),this._isShuttingDown?[3,2]:(this._isShuttingDown=!0,[4,this.enqueueEvenAfterShutdown(e)]);case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},e.prototype.enqueue=function(e){return this.verifyNotFailed(),this._isShuttingDown?new Promise((function(e){})):this.enqueueInternal(e)},e.prototype.enqueueInternal=function(e){var t=this,n=this.tail.then((function(){return t.operationInProgress=!0,e().catch((function(e){t.failure=e,t.operationInProgress=!1;var n=e.stack||e.message||"";throw g("INTERNAL UNHANDLED ERROR: ",n),n.indexOf("Firestore Test Simulated Error")<0&&setTimeout((function(){throw e}),0),e})).then((function(e){return t.operationInProgress=!1,e}))}));return this.tail=n,n},e.prototype.enqueueAfterDelay=function(e,t,n){var r=this;this.verifyNotFailed(),b(t>=0,"Attempted to schedule an operation with a negative delay of "+t),this.timerIdsToSkip.indexOf(e)>-1&&(t=0);var i=me.createAndSchedule(this,e,t,n,(function(e){return r.removeDelayedOperation(e)}));return this.delayedOperations.push(i),i},e.prototype.verifyNotFailed=function(){this.failure&&v("AsyncQueue is already failed: "+(this.failure.stack||this.failure.message))},e.prototype.verifyOperationInProgress=function(){b(this.operationInProgress,"verifyOpInProgress() called when no op in progress on this queue.")},e.prototype.drain=function(){return this.enqueueEvenAfterShutdown((function(){return Promise.resolve()}))},e.prototype.containsDelayedOperation=function(e){for(var t=0,n=this.delayedOperations;t<n.length;t++){if(n[t].timerId===e)return!0}return!1},e.prototype.runDelayedOperationsEarly=function(e){var t=this;return this.drain().then((function(){b(e===ne.All||t.containsDelayedOperation(e),"Attempted to drain to missing operation "+e),t.delayedOperations.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));for(var n=0,r=t.delayedOperations;n<r.length;n++){var i=r[n];if(i.skipDelay(),e!==ne.All&&i.timerId===e)break}return t.drain()}))},e.prototype.skipDelaysForTimerId=function(e){this.timerIdsToSkip.push(e)},e.prototype.removeDelayedOperation=function(e){var t=this.delayedOperations.indexOf(e);b(t>=0,"Delayed operation not found."),this.delayedOperations.splice(t,1)},e}(),ye="",ve="",be="",we="";function Te(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=Ie(t)),t=Se(e.get(n),t);return Ie(t)}function Se(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var o=e.charAt(i);switch(o){case"\0":n+=ye+be;break;case ye:n+=ye+we;break;default:n+=o}}return n}function Ie(e){return e+ye+ve}function Ee(e){var t=e.length;if(b(t>=2,"Invalid path "+e),2===t)return b(e.charAt(0)===ye&&e.charAt(1)===ve,"Non-empty path "+e+" had length 2"),le.EMPTY_PATH;for(var n=t-2,r=[],i="",o=0;o<t;){var a=e.indexOf(ye,o);switch((a<0||a>n)&&v('Invalid encoded resource path: "'+e+'"'),e.charAt(a+1)){case ve:var s=e.substring(o,a),c=void 0;0===i.length?c=s:(c=i+=s,i=""),r.push(c);break;case be:i+=e.substring(o,a),i+="\0";break;case we:i+=e.substring(o,a+1);break;default:v('Invalid encoded resource path: "'+e+'"')}o=a+2}return new le(r)}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ce=function(){function e(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new I(S.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new I(S.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new I(S.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new I(S.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}return e.now=function(){return e.fromMillis(Date.now())},e.fromDate=function(t){return e.fromMillis(t.getTime())},e.fromMillis=function(t){var n=Math.floor(t/1e3);return new e(n,1e6*(t-1e3*n))},e.prototype.toDate=function(){return new Date(this.toMillis())},e.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},e.prototype._compareTo=function(e){return this.seconds===e.seconds?X(this.nanoseconds,e.nanoseconds):X(this.seconds,e.seconds)},e.prototype.isEqual=function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds},e.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},e}(),_e=function(){function e(e){this.timestamp=e}return e.fromMicroseconds=function(t){var n=Math.floor(t/1e6);return new e(new Ce(n,t%1e6*1e3))},e.fromTimestamp=function(t){return new e(t)},e.forDeletedDoc=function(){return e.MIN},e.prototype.compareTo=function(e){return this.timestamp._compareTo(e.timestamp)},e.prototype.isEqual=function(e){return this.timestamp.isEqual(e.timestamp)},e.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},e.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},e.prototype.toTimestamp=function(){return this.timestamp},e.MIN=new e(new Ce(0,0)),e}(),De=function(){function e(e,t){this.comparator=e,this.root=t||Ne.EMPTY}return e.prototype.insert=function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Ne.BLACK,null,null))},e.prototype.remove=function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Ne.BLACK,null,null))},e.prototype.get=function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null},e.prototype.indexOf=function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1},e.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(e.prototype,"size",{get:function(){return this.root.size},enumerable:!0,configurable:!0}),e.prototype.minKey=function(){return this.root.minKey()},e.prototype.maxKey=function(){return this.root.maxKey()},e.prototype.inorderTraversal=function(e){return this.root.inorderTraversal(e)},e.prototype.forEach=function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))},e.prototype.toString=function(){var e=[];return this.inorderTraversal((function(t,n){return e.push(t+":"+n),!1})),"{"+e.join(", ")+"}"},e.prototype.reverseTraversal=function(e){return this.root.reverseTraversal(e)},e.prototype.getIterator=function(){return new ke(this.root,null,this.comparator,!1)},e.prototype.getIteratorFrom=function(e){return new ke(this.root,e,this.comparator,!1)},e.prototype.getReverseIterator=function(){return new ke(this.root,null,this.comparator,!0)},e.prototype.getReverseIteratorFrom=function(e){return new ke(this.root,e,this.comparator,!0)},e}(),ke=function(){function e(e,t,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!e.isEmpty();)if(i=t?n(e.key,t):1,r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}return e.prototype.getNext=function(){b(this.nodeStack.length>0,"getNext() called on iterator when hasNext() is false.");var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t},e.prototype.hasNext=function(){return this.nodeStack.length>0},e.prototype.peek=function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}},e}(),Ne=function(){function e(t,n,r,i,o){this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=o?o:e.EMPTY,this.size=this.left.size+1+this.right.size}return e.prototype.copy=function(t,n,r,i,o){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},e.prototype.isEmpty=function(){return!1},e.prototype.inorderTraversal=function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)},e.prototype.reverseTraversal=function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)},e.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},e.prototype.minKey=function(){return this.min().key},e.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},e.prototype.insert=function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()},e.prototype.removeMin=function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()},e.prototype.remove=function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()},e.prototype.isRed=function(){return this.color},e.prototype.fixUp=function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e},e.prototype.moveRedLeft=function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e},e.prototype.moveRedRight=function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e},e.prototype.rotateLeft=function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},e.prototype.rotateRight=function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},e.prototype.colorFlip=function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)},e.prototype.checkMaxDepth=function(){var e=this.check();return Math.pow(2,e)<=this.size+1},e.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw v("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed())throw v("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check();if(e!==this.right.check())throw v("Black depths differ");return e+(this.isRed()?0:1)},e.EMPTY=null,e.RED=!0,e.BLACK=!1,e}(),Ae=function(){function e(){this.size=0}return Object.defineProperty(e.prototype,"key",{get:function(){throw v("LLRBEmptyNode has no key.")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){throw v("LLRBEmptyNode has no value.")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){throw v("LLRBEmptyNode has no color.")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){throw v("LLRBEmptyNode has no left child.")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){throw v("LLRBEmptyNode has no right child.")},enumerable:!0,configurable:!0}),e.prototype.copy=function(e,t,n,r,i){return this},e.prototype.insert=function(e,t,n){return new Ne(e,t)},e.prototype.remove=function(e,t){return this},e.prototype.isEmpty=function(){return!0},e.prototype.inorderTraversal=function(e){return!1},e.prototype.reverseTraversal=function(e){return!1},e.prototype.minKey=function(){return null},e.prototype.maxKey=function(){return null},e.prototype.isRed=function(){return!1},e.prototype.checkMaxDepth=function(){return!0},e.prototype.check=function(){return 0},e}();
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ne.EMPTY=new Ae;
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var xe=function(){function e(e){this.comparator=e,this.data=new De(this.comparator)}return e.fromMapKeys=function(t){var n=new e(t.comparator);return t.forEach((function(e){n=n.add(e)})),n},e.prototype.has=function(e){return null!==this.data.get(e)},e.prototype.first=function(){return this.data.minKey()},e.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(e.prototype,"size",{get:function(){return this.data.size},enumerable:!0,configurable:!0}),e.prototype.indexOf=function(e){return this.data.indexOf(e)},e.prototype.forEach=function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))},e.prototype.forEachInRange=function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}},e.prototype.forEachWhile=function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();){if(!e(n.getNext().key))return}},e.prototype.firstAfterOrEqual=function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null},e.prototype.getIterator=function(){return new Me(this.data.getIterator())},e.prototype.getIteratorFrom=function(e){return new Me(this.data.getIteratorFrom(e))},e.prototype.add=function(e){return this.copy(this.data.remove(e).insert(e,!0))},e.prototype.delete=function(e){return this.has(e)?this.copy(this.data.remove(e)):this},e.prototype.isEmpty=function(){return this.data.isEmpty()},e.prototype.unionWith=function(e){var t=this;return e.forEach((function(e){t=t.add(e)})),t},e.prototype.isEqual=function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},e.prototype.toArray=function(){var e=[];return this.forEach((function(t){e.push(t)})),e},e.prototype.toString=function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"},e.prototype.copy=function(t){var n=new e(this.comparator);return n.data=t,n},e}(),Me=function(){function e(e){this.iter=e}return e.prototype.getNext=function(){return this.iter.getNext().key},e.prototype.hasNext=function(){return this.iter.hasNext()},e}(),Le=new De(fe.comparator);function Pe(){return Le}function Oe(){return Pe()}var Re=new De(fe.comparator);function je(){return Re}var Be=new De(fe.comparator);function Fe(){return Be}var Ve=new xe(fe.comparator);function qe(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=Ve,r=0,i=e;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var Ue=new xe(X);function We(){return Ue}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ze=function(){function e(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r,b(r.length>0,"Cannot create an empty mutation batch")}return e.prototype.applyToRemoteDocument=function(e,t,n){t&&b(t.key.isEqual(e),"applyToRemoteDocument: key "+e+" should match maybeDoc key\n        "+t.key);var r=n.mutationResults;b(r.length===this.mutations.length,"Mismatch between mutations length\n      ("+this.mutations.length+") and mutation results length\n      ("+r.length+").");for(var i=0;i<this.mutations.length;i++){var o=this.mutations[i];if(o.key.isEqual(e)){var a=r[i];t=o.applyToRemoteDocument(t,a)}}return t},e.prototype.applyToLocalView=function(e,t){t&&b(t.key.isEqual(e),"applyToLocalDocument: key "+e+" should match maybeDoc key\n        "+t.key);for(var n=0,r=this.baseMutations;n<r.length;n++){(s=r[n]).key.isEqual(e)&&(t=s.applyToLocalView(t,t,this.localWriteTime))}for(var i=t,o=0,a=this.mutations;o<a.length;o++){var s;(s=a[o]).key.isEqual(e)&&(t=s.applyToLocalView(t,i,this.localWriteTime))}return t},e.prototype.applyToLocalDocumentSet=function(e){var t=this,n=e;return this.mutations.forEach((function(r){var i=t.applyToLocalView(r.key,e.get(r.key));i&&(n=n.insert(r.key,i))})),n},e.prototype.keys=function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),qe())},e.prototype.isEqual=function(e){return this.batchId===e.batchId&&$(this.mutations,e.mutations)&&$(this.baseMutations,e.baseMutations)},e}(),Ke=function(){function e(e,t,n,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.streamToken=r,this.docVersions=i}return e.from=function(t,n,r,i){b(t.mutations.length===r.length,"Mutations sent "+t.mutations.length+" must equal results received "+r.length);for(var o=Fe(),a=t.mutations,s=0;s<a.length;s++)o=o.insert(a[s].key,r[s].version);return new e(t,n,r,i,o)},e}(),Ge=function(){function e(e){var t=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((function(e){t.isDone=!0,t.result=e,t.nextCallback&&t.nextCallback(e)}),(function(e){t.isDone=!0,t.error=e,t.catchCallback&&t.catchCallback(e)}))}return e.prototype.catch=function(e){return this.next(void 0,e)},e.prototype.next=function(t,n){var r=this;return this.callbackAttached&&v("Called next() or catch() twice for PersistencePromise"),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))},e.prototype.toPromise=function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))},e.prototype.wrapUserFunction=function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}},e.prototype.wrapSuccess=function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)},e.prototype.wrapFailure=function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)},e.resolve=function(t){return new e((function(e,n){e(t)}))},e.reject=function(t){return new e((function(e,n){n(t)}))},e.waitFor=function(t){return new e((function(e,n){var r=0,i=0,o=!1;t.forEach((function(t){++r,t.next((function(){++i,o&&i===r&&e()}),(function(e){return n(e)}))})),o=!0,i===r&&e()}))},e.or=function(t){for(var n=e.resolve(!1),r=function(t){n=n.next((function(n){return n?e.resolve(n):t()}))},i=0,o=t;i<o.length;i++){r(o[i])}return n},e.forEach=function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)},e}(),Qe="SimpleDb",He=function(){function t(e){this.db=e,12.2===t.getIOSVersion(c.getUA())&&g("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.openOrCreate=function(e,n,r){return b(t.isAvailable(),"IndexedDB not supported in current environment."),m(Qe,"Opening database:",e),new Ge((function(i,o){var a=window.indexedDB.open(e,n);a.onsuccess=function(e){var n=e.target.result;i(new t(n))},a.onblocked=function(){o(new I(S.FAILED_PRECONDITION,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=function(e){var t=e.target.error;"VersionError"===t.name?o(new I(S.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o(t)},a.onupgradeneeded=function(t){m(Qe,'Database "'+e+'" requires upgrade from version:',t.oldVersion);var n=t.target.result;r.createOrUpgrade(n,a.transaction,t.oldVersion,rn).next((function(){m(Qe,"Database upgrade to version "+rn+" complete")}))}})).toPromise()},t.delete=function(e){return m(Qe,"Removing database:",e),$e(window.indexedDB.deleteDatabase(e)).toPromise()},t.isAvailable=function(){if("undefined"==typeof window||null==window.indexedDB)return!1;if(t.isMockPersistence())return!0;if(void 0===window.navigator)return!1;var e=c.getUA(),n=t.getIOSVersion(e),r=0<n&&n<10,i=t.getAndroidVersion(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.isMockPersistence=function(){var t;return void 0!==e&&"YES"===(null===(t=Object({GOOGLE_CLIENT_ID:"344446892746-36ebkcl04viq3poe73mb3dkhr79lspqk.apps.googleusercontent.com",GOOGLE_API_KEY_DEV:"AIzaSyBuHx9BXXCRFSKiLzjinZgK_2ys58ynGew",GOOGLE_API_KEY_PROD:"AIzaSyDiGyyxn_sPAvr2Mox44J6lPurG0XhQa7c"}))||void 0===t?void 0:t.USE_MOCK_PERSISTENCE)},t.getStore=function(e,t){return e.store(t)},t.getIOSVersion=function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.getAndroidVersion=function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.setVersionChangeListener=function(e){this.db.onversionchange=function(t){return e(t)}},t.prototype.runTransaction=function(e,t,n){return a.__awaiter(this,void 0,void 0,(function(){var r,i,o,s,c,u;return a.__generator(this,(function(l){switch(l.label){case 0:r=e.startsWith("readonly"),i=e.endsWith("idempotent"),o=0,s=function(){var e,s,u,l;return a.__generator(this,(function(a){switch(a.label){case 0:++o,e=Je.open(c.db,r?"readonly":"readwrite",t),a.label=1;case 1:return a.trys.push([1,3,,4]),(s=n(e).catch((function(t){return e.abort(t),Ge.reject(t)})).toPromise()).catch((function(){})),[4,e.completionPromise];case 2:return a.sent(),[2,{value:s}];case 3:return u=a.sent(),l=i&&"FirebaseError"!==u.name&&o<3,m(Qe,"Transaction failed with error: %s. Retrying: %s.",u.message,l),l?[3,4]:[2,{value:Promise.reject(u)}];case 4:return[2]}}))},c=this,l.label=1;case 1:return[5,s()];case 2:return"object"==typeof(u=l.sent())?[2,u.value]:[3,1];case 3:return[2]}}))}))},t.prototype.close=function(){this.db.close()},t}(),Ye=function(){function e(e){this.dbCursor=e,this.shouldStop=!1,this.nextKey=null}return Object.defineProperty(e.prototype,"isDone",{get:function(){return this.shouldStop},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"skipToKey",{get:function(){return this.nextKey},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cursor",{set:function(e){this.dbCursor=e},enumerable:!0,configurable:!0}),e.prototype.done=function(){this.shouldStop=!0},e.prototype.skip=function(e){this.nextKey=e},e.prototype.delete=function(){return $e(this.dbCursor.delete())},e}(),Je=function(){function e(e){var t=this;this.transaction=e,this.aborted=!1,this.completionDeferred=new pe,this.transaction.oncomplete=function(){t.completionDeferred.resolve()},this.transaction.onabort=function(){e.error?t.completionDeferred.reject(e.error):t.completionDeferred.resolve()},this.transaction.onerror=function(e){var n=et(e.target.error);t.completionDeferred.reject(n)}}return e.open=function(t,n,r){return new e(t.transaction(r,n))},Object.defineProperty(e.prototype,"completionPromise",{get:function(){return this.completionDeferred.promise},enumerable:!0,configurable:!0}),e.prototype.abort=function(e){e&&this.completionDeferred.reject(e),this.aborted||(m(Qe,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},e.prototype.store=function(e){var t=this.transaction.objectStore(e);return b(!!t,"Object store not part of transaction: "+e),new Xe(t)},e}(),Xe=function(){function e(e){this.store=e}return e.prototype.put=function(e,t){var n;return void 0!==t?(m(Qe,"PUT",this.store.name,e,t),n=this.store.put(t,e)):(m(Qe,"PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),$e(n)},e.prototype.add=function(e){return m(Qe,"ADD",this.store.name,e,e),$e(this.store.add(e))},e.prototype.get=function(e){var t=this;return $e(this.store.get(e)).next((function(n){return void 0===n&&(n=null),m(Qe,"GET",t.store.name,e,n),n}))},e.prototype.delete=function(e){return m(Qe,"DELETE",this.store.name,e),$e(this.store.delete(e))},e.prototype.count=function(){return m(Qe,"COUNT",this.store.name),$e(this.store.count())},e.prototype.loadAll=function(e,t){var n=this.cursor(this.options(e,t)),r=[];return this.iterateCursor(n,(function(e,t){r.push(t)})).next((function(){return r}))},e.prototype.deleteAll=function(e,t){m(Qe,"DELETE ALL",this.store.name);var n=this.options(e,t);n.keysOnly=!1;var r=this.cursor(n);return this.iterateCursor(r,(function(e,t,n){return n.delete()}))},e.prototype.iterate=function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.iterateCursor(r,t)},e.prototype.iterateSerial=function(e){var t=this.cursor({});return new Ge((function(n,r){t.onerror=function(e){var t=et(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))},e.prototype.iterateCursor=function(e,t){var n=[];return new Ge((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var o=new Ye(i),a=t(i.primaryKey,i.value,o);if(a instanceof Ge){var s=a.catch((function(e){return o.done(),Ge.reject(e)}));n.push(s)}o.isDone?r():null===o.skipToKey?i.continue():i.continue(o.skipToKey)}else r()}})).next((function(){return Ge.waitFor(n)}))},e.prototype.options=function(e,t){var n=void 0;return void 0!==e&&("string"==typeof e?n=e:(b(void 0===t,"3rd argument must not be defined if 2nd is a range."),t=e)),{index:n,range:t}},e.prototype.cursor=function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.keysOnly?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)},e}();function $e(e){return new Ge((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=et(e.target.error);n(t)}}))}var Ze=!1;function et(e){var t=He.getIOSVersion(c.getUA());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new I("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Ze||(Ze=!0,setTimeout((function(){throw r}),0)),r}}return e}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tt=function(){function e(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.documentKeysByBatchId={}}return e.forUser=function(t,n,r,i){return b(""!==t.uid,"UserID must not be an empty string."),new e(t.isAuthenticated()?t.uid:"",n,r,i)},e.prototype.checkEmpty=function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ot(e).iterate({index:un.userMutationsIndex,range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))},e.prototype.acknowledgeBatch=function(e,t,n){return this.getMutationQueueMetadata(e).next((function(t){return t.lastStreamToken=it(n),st(e).put(t)}))},e.prototype.getLastStreamToken=function(e){return this.getMutationQueueMetadata(e).next((function(e){return e.lastStreamToken}))},e.prototype.setLastStreamToken=function(e,t){return this.getMutationQueueMetadata(e).next((function(n){return n.lastStreamToken=it(t),st(e).put(n)}))},e.prototype.addMutationBatch=function(e,t,n,r){var i=this,o=at(e),a=ot(e);return a.add({}).next((function(s){b("number"==typeof s,"Auto-generated key is not a number");for(var c=new ze(s,t,n,r),u=i.serializer.toDbMutationBatch(i.userId,c),l=[],h=new xe((function(e,t){return X(e.canonicalString(),t.canonicalString())})),d=0,f=r;d<f.length;d++){var p=f[d],m=ln.key(i.userId,p.key.path,s);h=h.add(p.key.path.popLast()),l.push(a.put(u)),l.push(o.put(m,ln.PLACEHOLDER))}return h.forEach((function(t){l.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.documentKeysByBatchId[s]=c.keys()})),Ge.waitFor(l).next((function(){return c}))}))},e.prototype.lookupMutationBatch=function(e,t){var n=this;return ot(e).get(t).next((function(e){return e?(b(e.userId===n.userId,"Unexpected user '"+e.userId+"' for mutation batch "+t),n.serializer.fromDbMutationBatch(e)):null}))},e.prototype.lookupMutationKeys=function(e,t){var n=this;return this.documentKeysByBatchId[t]?Ge.resolve(this.documentKeysByBatchId[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.documentKeysByBatchId[t]=r,r}return null}))},e.prototype.getNextMutationBatchAfterBatchId=function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return ot(e).iterate({index:un.userMutationsIndex,range:i},(function(e,t,i){t.userId===n.userId&&(b(t.batchId>=r,"Should have found mutation after "+r),o=n.serializer.fromDbMutationBatch(t)),i.done()})).next((function(){return o}))},e.prototype.getHighestUnacknowledgedBatchId=function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return ot(e).iterate({index:un.userMutationsIndex,range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))},e.prototype.getAllMutationBatches=function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ot(e).loadAll(un.userMutationsIndex,n).next((function(e){return e.map((function(e){return t.serializer.fromDbMutationBatch(e)}))}))},e.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,t){var n=this,r=ln.prefixForPath(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return at(e).iterate({range:i},(function(r,i,a){var s=r[0],c=r[1],u=r[2],l=Ee(c);if(s===n.userId&&t.path.isEqual(l))return ot(e).get(u).next((function(e){if(!e)throw v("Dangling document-mutation reference found: "+r+" which points to "+u);b(e.userId===n.userId,"Unexpected user '"+e.userId+"' for mutation batch "+u),o.push(n.serializer.fromDbMutationBatch(e))}));a.done()})).next((function(){return o}))},e.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,t){var n=this,r=new xe(X),i=[];return t.forEach((function(t){var o=ln.prefixForPath(n.userId,t.path),a=IDBKeyRange.lowerBound(o),s=at(e).iterate({range:a},(function(e,i,o){var a=e[0],s=e[1],c=e[2],u=Ee(s);a===n.userId&&t.path.isEqual(u)?r=r.add(c):o.done()}));i.push(s)})),Ge.waitFor(i).next((function(){return n.lookupMutationBatches(e,r)}))},e.prototype.getAllMutationBatchesAffectingQuery=function(e,t){var n=this;b(!t.isDocumentQuery(),"Document queries shouldn't go down this path"),b(!t.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var r=t.path,i=r.length+1,o=ln.prefixForPath(this.userId,r),a=IDBKeyRange.lowerBound(o),s=new xe(X);return at(e).iterate({range:a},(function(e,t,o){var a=e[0],c=e[1],u=e[2],l=Ee(c);a===n.userId&&r.isPrefixOf(l)?l.length===i&&(s=s.add(u)):o.done()})).next((function(){return n.lookupMutationBatches(e,s)}))},e.prototype.lookupMutationBatches=function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(ot(e).get(t).next((function(e){if(null===e)throw v("Dangling document-mutation reference found, which points to "+t);b(e.userId===n.userId,"Unexpected user '"+e.userId+"' for mutation batch "+t),r.push(n.serializer.fromDbMutationBatch(e))})))})),Ge.waitFor(i).next((function(){return r}))},e.prototype.removeMutationBatch=function(e,t){var n=this;return rt(e.simpleDbTransaction,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.removeCachedMutationKeys(t.batchId)})),Ge.forEach(r,(function(t){return n.referenceDelegate.removeMutationReference(e,t)}))}))},e.prototype.removeCachedMutationKeys=function(e){delete this.documentKeysByBatchId[e]},e.prototype.performConsistencyCheck=function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return Ge.resolve();var r=IDBKeyRange.lowerBound(ln.prefixForUser(t.userId)),i=[];return at(e).iterate({range:r},(function(e,n,r){if(e[0]===t.userId){var o=Ee(e[1]);i.push(o)}else r.done()})).next((function(){b(0===i.length,"Document leak -- detected dangling mutation references when queue is empty. Dangling keys: "+i.map((function(e){return e.canonicalString()})))}))}))},e.prototype.containsKey=function(e,t){return nt(e,this.userId,t)},e.prototype.getMutationQueueMetadata=function(e){var t=this;return st(e).get(this.userId).next((function(e){return e||new cn(t.userId,-1,"")}))},e}();function nt(e,t,n){var r=ln.prefixForPath(t,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),a=!1;return at(e).iterate({range:o,keysOnly:!0},(function(e,n,r){var o=e[0],s=e[1];e[2];o===t&&s===i&&(a=!0),r.done()})).next((function(){return a}))}function rt(e,t,n){var r=e.store(un.store),i=e.store(ln.store),o=[],a=IDBKeyRange.only(n.batchId),s=0,c=r.iterate({range:a},(function(e,t,n){return s++,n.delete()}));o.push(c.next((function(){b(1===s,"Dangling document-mutation reference found: Missing batch "+n.batchId)})));for(var u=[],l=0,h=n.mutations;l<h.length;l++){var d=h[l],f=ln.key(t,d.key.path,n.batchId);o.push(i.delete(f)),u.push(d.key)}return Ge.waitFor(o).next((function(){return u}))}function it(e){return e instanceof Uint8Array?(b(He.isMockPersistence(),"Persisting non-string stream tokens is only supported with mock persistence."),e.toString()):e}function ot(e){return qn.getStore(e,un.store)}function at(e){return qn.getStore(e,ln.store)}function st(e){return qn.getStore(e,cn.store)}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ct,ut=1;!function(e){e[e.QueryCache=0]="QueryCache",e[e.SyncEngine=1]="SyncEngine"}(ct||(ct={}));var lt=function(){function e(e,t){this.generatorId=e,b((e&ut)===e,"Generator ID "+e+" contains more than "+ut+" reserved bits"),this.seek(void 0!==t?t:this.generatorId)}return e.prototype.next=function(){var e=this.nextId;return this.nextId+=1<<ut,e},e.prototype.after=function(e){return this.seek(e+(1<<ut)),this.next()},e.prototype.seek=function(e){b((e&ut)===this.generatorId,"Cannot supply target ID from different generator ID"),this.nextId=e},e.forTargetCache=function(){return new e(ct.QueryCache,2)},e.forSyncEngine=function(){return new e(ct.SyncEngine)},e}(),ht=function(){function e(e,t){this.referenceDelegate=e,this.serializer=t,this.targetIdGenerator=lt.forTargetCache()}return e.prototype.allocateTargetId=function(e){var t=this;return this.retrieveMetadata(e).next((function(n){return n.highestTargetId=t.targetIdGenerator.after(n.highestTargetId),t.saveMetadata(e,n).next((function(){return n.highestTargetId}))}))},e.prototype.getLastRemoteSnapshotVersion=function(e){return this.retrieveMetadata(e).next((function(e){return _e.fromTimestamp(new Ce(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))},e.prototype.getHighestSequenceNumber=function(e){return pt(e.simpleDbTransaction)},e.prototype.setTargetsMetadata=function(e,t,n){var r=this;return this.retrieveMetadata(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.saveMetadata(e,i)}))},e.prototype.addTargetData=function(e,t){var n=this;return this.saveTargetData(e,t).next((function(){return n.retrieveMetadata(e).next((function(r){return r.targetCount+=1,n.updateMetadataFromTargetData(t,r),n.saveMetadata(e,r)}))}))},e.prototype.updateTargetData=function(e,t){return this.saveTargetData(e,t)},e.prototype.removeTargetData=function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return dt(e).delete(t.targetId)})).next((function(){return n.retrieveMetadata(e)})).next((function(t){return b(t.targetCount>0,"Removing from an empty target cache"),t.targetCount-=1,n.saveMetadata(e,t)}))},e.prototype.removeTargets=function(e,t,n){var r=this,i=0,o=[];return dt(e).iterate((function(a,s){var c=r.serializer.fromDbTarget(s);c.sequenceNumber<=t&&null===n.get(c.targetId)&&(i++,o.push(r.removeTargetData(e,c)))})).next((function(){return Ge.waitFor(o)})).next((function(){return i}))},e.prototype.forEachTarget=function(e,t){var n=this;return dt(e).iterate((function(e,r){var i=n.serializer.fromDbTarget(r);t(i)}))},e.prototype.retrieveMetadata=function(e){return ft(e.simpleDbTransaction)},e.prototype.saveMetadata=function(e,t){return(n=e,qn.getStore(n,yn.store)).put(yn.key,t);var n},e.prototype.saveTargetData=function(e,t){return dt(e).put(this.serializer.toDbTarget(t))},e.prototype.updateMetadataFromTargetData=function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n},e.prototype.getTargetCount=function(e){return this.retrieveMetadata(e).next((function(e){return e.targetCount}))},e.prototype.getTargetData=function(e,t){var n=this,r=t.canonicalId(),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return dt(e).iterate({range:i,index:mn.queryTargetsIndexName},(function(e,r,i){var a=n.serializer.fromDbTarget(r);t.isEqual(a.target)&&(o=a,i.done())})).next((function(){return o}))},e.prototype.addMatchingKeys=function(e,t,n){var r=this,i=[],o=mt(e);return t.forEach((function(t){var a=Te(t.path);i.push(o.put(new gn(n,a))),i.push(r.referenceDelegate.addReference(e,t))})),Ge.waitFor(i)},e.prototype.removeMatchingKeys=function(e,t,n){var r=this,i=mt(e);return Ge.forEach(t,(function(t){var o=Te(t.path);return Ge.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(e,t)])}))},e.prototype.removeMatchingKeysForTargetId=function(e,t){var n=mt(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)},e.prototype.getMatchingKeysForTargetId=function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=mt(e),i=qe();return r.iterate({range:n,keysOnly:!0},(function(e,t,n){var r=Ee(e[1]),o=new fe(r);i=i.add(o)})).next((function(){return i}))},e.prototype.containsKey=function(e,t){var n=Te(t.path),r=IDBKeyRange.bound([n],[Z(n)],!1,!0),i=0;return mt(e).iterate({index:gn.documentTargetsIndex,keysOnly:!0,range:r},(function(e,t,n){var r=e[0];e[1];0!==r&&(i++,n.done())})).next((function(){return i>0}))},e.prototype.getTargetDataForTarget=function(e,t){var n=this;return dt(e).get(t).next((function(e){return e?n.serializer.fromDbTarget(e):null}))},e}();
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dt(e){return qn.getStore(e,mn.store)}function ft(e){return He.getStore(e,yn.store).get(yn.key).next((function(e){return b(null!==e,"Missing metadata row."),e}))}function pt(e){return ft(e).next((function(e){return e.highestListenSequenceNumber}))}function mt(e){return qn.getStore(e,gn.store)}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gt,yt=function(){function e(e){this.fields=e}return e.fromSet=function(t){return new e(t)},e.fromArray=function(t){var n=new xe(de.comparator);return t.forEach((function(e){return n=n.add(e)})),new e(n)},e.prototype.covers=function(e){var t=!1;return this.fields.forEach((function(n){n.isPrefixOf(e)&&(t=!0)})),t},e.prototype.isEqual=function(e){return this.fields.isEqual(e.fields)},e}(),vt=function(){function e(e,t){this.field=e,this.transform=t}return e.prototype.isEqual=function(e){return this.field.isEqual(e.field)&&this.transform.isEqual(e.transform)},e}(),bt=function(e,t){this.version=e,this.transformResults=t};!function(e){e[e.Set=0]="Set",e[e.Patch=1]="Patch",e[e.Transform=2]="Transform",e[e.Delete=3]="Delete"}(gt||(gt={}));var wt,Tt,St=function(){function e(e,t){this.updateTime=e,this.exists=t,b(void 0===e||void 0===t,'Precondition can specify "exists" or "updateTime" but not both')}return e.exists=function(t){return new e(void 0,t)},e.updateTime=function(t){return new e(t)},Object.defineProperty(e.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!0,configurable:!0}),e.prototype.isValidFor=function(e){return void 0!==this.updateTime?e instanceof Kt&&e.version.isEqual(this.updateTime):void 0!==this.exists?this.exists===e instanceof Kt:(b(this.isNone,"Precondition should be empty"),!0)},e.prototype.isEqual=function(e){return t=this.updateTime,n=e.updateTime,(null!=t?!(!n||!t.isEqual(n)):t===n)&&this.exists===e.exists;var t,n},e.NONE=new e,e}(),It=function(){function e(){}return e.prototype.verifyKeyMatches=function(e){null!=e&&b(e.key.isEqual(this.key),"Can only apply a mutation to a document with the same key")},e.getPostMutationVersion=function(e){return e instanceof Kt?e.version:_e.MIN},e}(),Et=function(e){function t(t,n,r){var i=e.call(this)||this;return i.key=t,i.value=n,i.precondition=r,i.type=gt.Set,i}return a.__extends(t,e),t.prototype.applyToRemoteDocument=function(e,t){this.verifyKeyMatches(e),b(null==t.transformResults,"Transform results received by SetMutation.");var n=t.version;return new Kt(this.key,n,{hasCommittedMutations:!0},this.value)},t.prototype.applyToLocalView=function(e,t,n){if(this.verifyKeyMatches(e),!this.precondition.isValidFor(e))return e;var r=It.getPostMutationVersion(e);return new Kt(this.key,r,{hasLocalMutations:!0},this.value)},t.prototype.extractBaseValue=function(e){return null},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.value.isEqual(e.value)&&this.precondition.isEqual(e.precondition)},t}(It),Ct=function(e){function t(t,n,r,i){var o=e.call(this)||this;return o.key=t,o.data=n,o.fieldMask=r,o.precondition=i,o.type=gt.Patch,o}return a.__extends(t,e),t.prototype.applyToRemoteDocument=function(e,t){if(this.verifyKeyMatches(e),b(null==t.transformResults,"Transform results received by PatchMutation."),!this.precondition.isValidFor(e))return new Qt(this.key,t.version);var n=this.patchDocument(e);return new Kt(this.key,t.version,{hasCommittedMutations:!0},n)},t.prototype.applyToLocalView=function(e,t,n){if(this.verifyKeyMatches(e),!this.precondition.isValidFor(e))return e;var r=It.getPostMutationVersion(e),i=this.patchDocument(e);return new Kt(this.key,r,{hasLocalMutations:!0},i)},t.prototype.extractBaseValue=function(e){return null},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.fieldMask.isEqual(e.fieldMask)&&this.precondition.isEqual(e.precondition)},t.prototype.patchDocument=function(e){var t;return t=e instanceof Kt?e.data():Ut.EMPTY,this.patchObject(t)},t.prototype.patchObject=function(e){var t=this;return this.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=t.data.field(n);e=null!==r?e.set(n,r):e.delete(n)}})),e},t}(It),_t=function(e){function t(t,n){var r=e.call(this)||this;return r.key=t,r.fieldTransforms=n,r.type=gt.Transform,r.precondition=St.exists(!0),r}return a.__extends(t,e),t.prototype.applyToRemoteDocument=function(e,t){if(this.verifyKeyMatches(e),b(null!=t.transformResults,"Transform results missing for TransformMutation."),!this.precondition.isValidFor(e))return new Qt(this.key,t.version);var n=this.requireDocument(e),r=this.serverTransformResults(e,t.transformResults),i=t.version,o=this.transformObject(n.data(),r);return new Kt(this.key,i,{hasCommittedMutations:!0},o)},t.prototype.applyToLocalView=function(e,t,n){if(this.verifyKeyMatches(e),!this.precondition.isValidFor(e))return e;var r=this.requireDocument(e),i=this.localTransformResults(n,e,t),o=this.transformObject(r.data(),i);return new Kt(this.key,r.version,{hasLocalMutations:!0},o)},t.prototype.extractBaseValue=function(e){for(var t=null,n=0,r=this.fieldTransforms;n<r.length;n++){var i=r[n],o=e instanceof Kt?e.field(i.field):void 0,a=i.transform.computeBaseValue(o||null);null!=a&&(t=null==t?Ut.EMPTY.set(i.field,a):t.set(i.field,a))}return t},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&$(this.fieldTransforms,e.fieldTransforms)&&this.precondition.isEqual(e.precondition)},t.prototype.requireDocument=function(e){return b(e instanceof Kt,"Unknown MaybeDocument type "+e),b(e.key.isEqual(this.key),"Can only transform a document with the same key"),e},t.prototype.serverTransformResults=function(e,t){var n=[];b(this.fieldTransforms.length===t.length,"server transform result count ("+t.length+") should match field transform count ("+this.fieldTransforms.length+")");for(var r=0;r<t.length;r++){var i=this.fieldTransforms[r],o=i.transform,a=null;e instanceof Kt&&(a=e.field(i.field)),n.push(o.applyToRemoteDocument(a,t[r]))}return n},t.prototype.localTransformResults=function(e,t,n){for(var r=[],i=0,o=this.fieldTransforms;i<o.length;i++){var a=o[i],s=a.transform,c=null;t instanceof Kt&&(c=t.field(a.field)),null===c&&n instanceof Kt&&(c=n.field(a.field)),r.push(s.applyToLocalView(c,e))}return r},t.prototype.transformObject=function(e,t){b(t.length===this.fieldTransforms.length,"TransformResults length mismatch.");for(var n=0;n<this.fieldTransforms.length;n++){var r=this.fieldTransforms[n].field;e=e.set(r,t[n])}return e},t}(It),Dt=function(e){function t(t,n){var r=e.call(this)||this;return r.key=t,r.precondition=n,r.type=gt.Delete,r}return a.__extends(t,e),t.prototype.applyToRemoteDocument=function(e,t){return this.verifyKeyMatches(e),b(null==t.transformResults,"Transform results received by DeleteMutation."),new Gt(this.key,t.version,{hasCommittedMutations:!0})},t.prototype.applyToLocalView=function(e,t,n){return this.verifyKeyMatches(e),this.precondition.isValidFor(e)?(e&&b(e.key.isEqual(this.key),"Can only apply mutation to document with same key"),new Gt(this.key,_e.forDeletedDoc())):e},t.prototype.extractBaseValue=function(e){return null},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.precondition.isEqual(e.precondition)},t}(It);!function(e){e[e.NullValue=0]="NullValue",e[e.BooleanValue=1]="BooleanValue",e[e.NumberValue=2]="NumberValue",e[e.TimestampValue=3]="TimestampValue",e[e.StringValue=4]="StringValue",e[e.BlobValue=5]="BlobValue",e[e.RefValue=6]="RefValue",e[e.GeoPointValue=7]="GeoPointValue",e[e.ArrayValue=8]="ArrayValue",e[e.ObjectValue=9]="ObjectValue"}(wt||(wt={})),function(e){e[e.Default=0]="Default",e[e.Estimate=1]="Estimate",e[e.Previous=2]="Previous"}(Tt||(Tt={}));var kt=function(){function e(e,t){this.serverTimestampBehavior=e,this.timestampsInSnapshots=t}return e.fromSnapshotOptions=function(t,n){switch(t.serverTimestamps){case"estimate":return new e(Tt.Estimate,n);case"previous":return new e(Tt.Previous,n);case"none":case void 0:return new e(Tt.Default,n);default:return v("fromSnapshotOptions() called with invalid options.")}},e}(),Nt=function(){function e(){}return e.prototype.toString=function(){var e=this.value();return null===e?"null":e.toString()},e.prototype.defaultCompareTo=function(e){return b(this.typeOrder!==e.typeOrder,"Default compareTo should not be used for values of same type."),X(this.typeOrder,e.typeOrder)},e}(),At=function(e){function t(){var t=e.call(this)||this;return t.typeOrder=wt.NullValue,t.internalValue=null,t}return a.__extends(t,e),t.prototype.value=function(e){return null},t.prototype.isEqual=function(e){return e instanceof t},t.prototype.compareTo=function(e){return e instanceof t?0:this.defaultCompareTo(e)},t.INSTANCE=new t,t}(Nt),xt=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=wt.BooleanValue,n}return a.__extends(t,e),t.prototype.value=function(e){return this.internalValue},t.prototype.isEqual=function(e){return e instanceof t&&this.internalValue===e.internalValue},t.prototype.compareTo=function(e){return e instanceof t?X(this,e):this.defaultCompareTo(e)},t.of=function(e){return e?t.TRUE:t.FALSE},t.TRUE=new t(!0),t.FALSE=new t(!1),t}(Nt),Mt=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=wt.NumberValue,n}return a.__extends(t,e),t.prototype.value=function(e){return this.internalValue},t.prototype.compareTo=function(e){return e instanceof t?(n=this.internalValue,r=e.internalValue,n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1):this.defaultCompareTo(e);var n,r},t}(Nt);function Lt(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}var Pt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.isEqual=function(e){return e instanceof t&&Lt(this.internalValue,e.internalValue)},t}(Mt),Ot=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.isEqual=function(e){return e instanceof t&&Lt(this.internalValue,e.internalValue)},t.NAN=new t(NaN),t.POSITIVE_INFINITY=new t(1/0),t.NEGATIVE_INFINITY=new t(-1/0),t}(Mt),Rt=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=wt.StringValue,n}return a.__extends(t,e),t.prototype.value=function(e){return this.internalValue},t.prototype.isEqual=function(e){return e instanceof t&&this.internalValue===e.internalValue},t.prototype.compareTo=function(e){return e instanceof t?X(this.internalValue,e.internalValue):this.defaultCompareTo(e)},t}(Nt),jt=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=wt.TimestampValue,n}return a.__extends(t,e),t.prototype.value=function(e){return!e||e.timestampsInSnapshots?this.internalValue:this.internalValue.toDate()},t.prototype.isEqual=function(e){return e instanceof t&&this.internalValue.isEqual(e.internalValue)},t.prototype.compareTo=function(e){return e instanceof t?this.internalValue._compareTo(e.internalValue):e instanceof Bt?-1:this.defaultCompareTo(e)},t}(Nt),Bt=function(e){function t(t,n){var r=e.call(this)||this;return r.localWriteTime=t,r.previousValue=n,r.typeOrder=wt.TimestampValue,r}return a.__extends(t,e),t.prototype.value=function(e){return e&&e.serverTimestampBehavior===Tt.Estimate?new jt(this.localWriteTime).value(e):e&&e.serverTimestampBehavior===Tt.Previous&&this.previousValue?this.previousValue.value(e):null},t.prototype.isEqual=function(e){return e instanceof t&&this.localWriteTime.isEqual(e.localWriteTime)},t.prototype.compareTo=function(e){return e instanceof t?this.localWriteTime._compareTo(e.localWriteTime):e instanceof jt?1:this.defaultCompareTo(e)},t.prototype.toString=function(){return"<ServerTimestamp localTime="+this.localWriteTime.toString()+">"},t}(Nt),Ft=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=wt.BlobValue,n}return a.__extends(t,e),t.prototype.value=function(e){return this.internalValue},t.prototype.isEqual=function(e){return e instanceof t&&this.internalValue.isEqual(e.internalValue)},t.prototype.compareTo=function(e){return e instanceof t?this.internalValue._compareTo(e.internalValue):this.defaultCompareTo(e)},t}(Nt),Vt=function(e){function t(t,n){var r=e.call(this)||this;return r.databaseId=t,r.key=n,r.typeOrder=wt.RefValue,r}return a.__extends(t,e),t.prototype.value=function(e){return this.key},t.prototype.isEqual=function(e){return e instanceof t&&(this.key.isEqual(e.key)&&this.databaseId.isEqual(e.databaseId))},t.prototype.compareTo=function(e){if(e instanceof t){var n=this.databaseId.compareTo(e.databaseId);return 0!==n?n:fe.comparator(this.key,e.key)}return this.defaultCompareTo(e)},t}(Nt),qt=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=wt.GeoPointValue,n}return a.__extends(t,e),t.prototype.value=function(e){return this.internalValue},t.prototype.isEqual=function(e){return e instanceof t&&this.internalValue.isEqual(e.internalValue)},t.prototype.compareTo=function(e){return e instanceof t?this.internalValue._compareTo(e.internalValue):this.defaultCompareTo(e)},t}(Nt),Ut=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=wt.ObjectValue,n}return a.__extends(t,e),t.prototype.value=function(e){var t={};return this.internalValue.inorderTraversal((function(n,r){t[n]=r.value(e)})),t},t.prototype.forEach=function(e){this.internalValue.inorderTraversal(e)},t.prototype.isEqual=function(e){if(e instanceof t){for(var n=this.internalValue.getIterator(),r=e.internalValue.getIterator();n.hasNext()&&r.hasNext();){var i=n.getNext(),o=r.getNext();if(i.key!==o.key||!i.value.isEqual(o.value))return!1}return!n.hasNext()&&!r.hasNext()}return!1},t.prototype.compareTo=function(e){if(e instanceof t){for(var n=this.internalValue.getIterator(),r=e.internalValue.getIterator();n.hasNext()&&r.hasNext();){var i=n.getNext(),o=r.getNext(),a=X(i.key,o.key)||i.value.compareTo(o.value);if(a)return a}return X(n.hasNext(),r.hasNext())}return this.defaultCompareTo(e)},t.prototype.set=function(e,n){if(b(!e.isEmpty(),"Cannot set field for empty path on ObjectValue"),1===e.length)return this.setChild(e.firstSegment(),n);var r=this.child(e.firstSegment());r instanceof t||(r=t.EMPTY);var i=r.set(e.popFirst(),n);return this.setChild(e.firstSegment(),i)},t.prototype.delete=function(e){if(b(!e.isEmpty(),"Cannot delete field for empty path on ObjectValue"),1===e.length)return new t(this.internalValue.remove(e.firstSegment()));var n=this.child(e.firstSegment());if(n instanceof t){var r=n.delete(e.popFirst());return new t(this.internalValue.insert(e.firstSegment(),r))}return this},t.prototype.contains=function(e){return null!==this.field(e)},t.prototype.field=function(e){b(!e.isEmpty(),"Can't get field of empty path");var n=this;return e.forEach((function(e){n=n instanceof t?n.internalValue.get(e):null})),n},t.prototype.fieldMask=function(){var e=new xe(de.comparator);return this.internalValue.forEach((function(n,r){var i=new de([n]);if(r instanceof t){var o=r.fieldMask().fields;o.isEmpty()?e=e.add(i):o.forEach((function(t){e=e.add(i.child(t))}))}else e=e.add(i)})),yt.fromSet(e)},t.prototype.toString=function(){return this.internalValue.toString()},t.prototype.child=function(e){return this.internalValue.get(e)||void 0},t.prototype.setChild=function(e,n){return new t(this.internalValue.insert(e,n))},t.EMPTY=new t(new De(X)),t}(Nt),Wt=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=wt.ArrayValue,n}return a.__extends(t,e),t.prototype.value=function(e){return this.internalValue.map((function(t){return t.value(e)}))},t.prototype.contains=function(e){for(var t=0,n=this.internalValue;t<n.length;t++){if(n[t].isEqual(e))return!0}return!1},t.prototype.forEach=function(e){this.internalValue.forEach(e)},t.prototype.isEqual=function(e){if(e instanceof t){if(this.internalValue.length!==e.internalValue.length)return!1;for(var n=0;n<this.internalValue.length;n++)if(!this.internalValue[n].isEqual(e.internalValue[n]))return!1;return!0}return!1},t.prototype.compareTo=function(e){if(e instanceof t){for(var n=Math.min(this.internalValue.length,e.internalValue.length),r=0;r<n;r++){var i=this.internalValue[r].compareTo(e.internalValue[r]);if(i)return i}return X(this.internalValue.length,e.internalValue.length)}return this.defaultCompareTo(e)},t.prototype.toString=function(){return"["+this.internalValue.map((function(e){return e.toString()})).join(",")+"]"},t}(Nt),zt=function(){function e(e,t){this.key=e,this.version=t}return e.compareByKey=function(e,t){return fe.comparator(e.key,t.key)},e}(),Kt=function(e){function t(t,n,r,i,o,a){var s=e.call(this,t,n)||this;return s.objectValue=i,s.proto=o,s.converter=a,b(void 0!==s.objectValue||void 0!==s.proto&&void 0!==s.converter,"If objectValue is not defined, proto and converter need to be set."),s.hasLocalMutations=!!r.hasLocalMutations,s.hasCommittedMutations=!!r.hasCommittedMutations,s}return a.__extends(t,e),t.prototype.field=function(e){if(this.objectValue)return this.objectValue.field(e);this.fieldValueCache||(this.fieldValueCache=new Map);var t=e.canonicalString(),n=this.fieldValueCache.get(t);if(void 0===n){var r=this.getProtoField(e);n=void 0===r?null:this.converter(r),this.fieldValueCache.set(t,n)}return n},t.prototype.data=function(){var e=this;if(!this.objectValue){var t=Ut.EMPTY;k(this.proto.fields||{},(function(n,r){t=t.set(new de([n]),e.converter(r))})),this.objectValue=t,this.fieldValueCache=void 0}return this.objectValue},t.prototype.value=function(){return this.data().value()},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.hasLocalMutations===e.hasLocalMutations&&this.hasCommittedMutations===e.hasCommittedMutations&&this.data().isEqual(e.data())},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.data().toString()+", {hasLocalMutations: "+this.hasLocalMutations+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!0,configurable:!0}),t.prototype.getProtoField=function(e){b(void 0!==this.proto,"Can only call getProtoField() when proto is defined");for(var t=this.proto.fields?this.proto.fields[e.firstSegment()]:void 0,n=1;n<e.length;++n){if(!t||!t.mapValue||!t.mapValue.fields)return;t=t.mapValue.fields[e.get(n)]}return t},t.compareByField=function(e,t,n){var r=t.field(e),i=n.field(e);return null!==r&&null!==i?r.compareTo(i):v("Trying to compare documents on fields that don't exist")},t}(zt),Gt=function(e){function t(t,n,r){var i=e.call(this,t,n)||this;return i.hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return a.__extends(t,e),t.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.hasCommittedMutations===this.hasCommittedMutations&&e.version.isEqual(this.version)&&e.key.isEqual(this.key)},t}(zt),Qt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.version.isEqual(this.version)&&e.key.isEqual(this.key)},t}(zt),Ht=function(){function e(e){this.mapKeyFn=e,this.inner={}}return e.prototype.get=function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];if(a.isEqual(e))return s}},e.prototype.has=function(e){return void 0!==this.get(e)},e.prototype.set=function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(r[i][0].isEqual(e))return void(r[i]=[e,t]);r.push([e,t])}else this.inner[n]=[[e,t]]},e.prototype.delete=function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(n[r][0].isEqual(e))return 1===n.length?delete this.inner[t]:n.splice(r,1),!0;return!1},e.prototype.forEach=function(e){k(this.inner,(function(t,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];e(a,s)}}))},e.prototype.isEmpty=function(){return N(this.inner)},e}(),Yt=function(){function e(){this.changes=new Ht((function(e){return e.toString()})),this.changesApplied=!1}return Object.defineProperty(e.prototype,"readTime",{get:function(){return b(void 0!==this._readTime,"Read time is not set. All removeEntry() calls must include a readTime if `trackRemovals` is used."),this._readTime},set:function(e){b(void 0===this._readTime||this._readTime.isEqual(e),"All changes in a RemoteDocumentChangeBuffer must have the same read time"),this._readTime=e},enumerable:!0,configurable:!0}),e.prototype.addEntry=function(e,t){this.assertNotApplied(),this.readTime=t,this.changes.set(e.key,e)},e.prototype.removeEntry=function(e,t){this.assertNotApplied(),t&&(this.readTime=t),this.changes.set(e,null)},e.prototype.getEntry=function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?Ge.resolve(n):this.getFromCache(e,t)},e.prototype.getEntries=function(e,t){return this.getAllFromCache(e,t)},e.prototype.apply=function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)},e.prototype.assertNotApplied=function(){b(!this.changesApplied,"Changes have already been applied.")},e}(),Jt=function(){function e(e,t){this.serializer=e,this.indexManager=t}return e.prototype.addEntry=function(e,t,n){return $t(e).put(Zt(t),n)},e.prototype.removeEntry=function(e,t){var n=$t(e),r=Zt(t);return n.delete(r)},e.prototype.updateMetadata=function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.setMetadata(e,r)}))},e.prototype.getEntry=function(e,t){var n=this;return $t(e).get(Zt(t)).next((function(e){return n.maybeDecodeDocument(e)}))},e.prototype.getSizedEntry=function(e,t){var n=this;return $t(e).get(Zt(t)).next((function(e){var t=n.maybeDecodeDocument(e);return t?{maybeDocument:t,size:en(e)}:null}))},e.prototype.getEntries=function(e,t){var n=this,r=Oe();return this.forEachDbEntry(e,t,(function(e,t){var i=n.maybeDecodeDocument(t);r=r.insert(e,i)})).next((function(){return r}))},e.prototype.getSizedEntries=function(e,t){var n=this,r=Oe(),i=new De(fe.comparator);return this.forEachDbEntry(e,t,(function(e,t){var o=n.maybeDecodeDocument(t);o?(r=r.insert(e,o),i=i.insert(e,en(t))):(r=r.insert(e,null),i=i.insert(e,0))})).next((function(){return{maybeDocuments:r,sizeMap:i}}))},e.prototype.forEachDbEntry=function(e,t,n){if(t.isEmpty())return Ge.resolve();var r=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),i=t.getIterator(),o=i.getNext();return $t(e).iterate({range:r},(function(e,t,r){for(var a=fe.fromSegments(e);o&&fe.comparator(o,a)<0;)n(o,null),o=i.getNext();o&&o.isEqual(a)&&(n(o,t),o=i.hasNext()?i.getNext():null),o?r.skip(o.path.toArray()):r.done()})).next((function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null}))},e.prototype.getDocumentsMatchingQuery=function(e,t,n){var r=this;b(!t.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var i=je(),o=t.path.length+1,a={};if(n.isEqual(_e.MIN)){var s=t.path.toArray();a.range=IDBKeyRange.lowerBound(s)}else{var c=t.path.toArray(),u=this.serializer.toDbTimestampKey(n);a.range=IDBKeyRange.lowerBound([c,u],!0),a.index=fn.collectionReadTimeIndex}return $t(e).iterate(a,(function(e,n,a){if(e.length===o){var s=r.serializer.fromDbRemoteDocument(n);t.path.isPrefixOf(s.key.path)?s instanceof Kt&&t.matches(s)&&(i=i.insert(s.key,s)):a.done()}})).next((function(){return i}))},e.prototype.getNewDocumentChanges=function(e,t){var n=this,r=Pe(),i=this.serializer.toDbTimestampKey(t),o=$t(e),a=IDBKeyRange.lowerBound(i,!0);return o.iterate({index:fn.readTimeIndex,range:a},(function(e,t){var o=n.serializer.fromDbRemoteDocument(t);r=r.insert(o.key,o),i=t.readTime})).next((function(){return{changedDocs:r,readTime:n.serializer.fromDbTimestampKey(i)}}))},e.prototype.getLastDocumentChange=function(e){var t,n=this,r=$t(e),i=_e.MIN;return r.iterate({index:fn.readTimeIndex,reverse:!0},(function(e,r,o){t=n.serializer.fromDbRemoteDocument(r),r.readTime&&(i=n.serializer.fromDbTimestampKey(r.readTime)),o.done()})).next((function(){return{changedDoc:t,readTime:i}}))},e.prototype.newChangeBuffer=function(t){return new e.RemoteDocumentChangeBuffer(this,!!t&&t.trackRemovals)},e.prototype.getSize=function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))},e.prototype.getMetadata=function(e){return Xt(e).get(pn.key).next((function(e){return b(!!e,"Missing document cache metadata"),e}))},e.prototype.setMetadata=function(e,t){return Xt(e).put(pn.key,t)},e.prototype.maybeDecodeDocument=function(e){if(e){var t=this.serializer.fromDbRemoteDocument(e);return t instanceof Gt&&t.version.isEqual(_e.forDeletedDoc())?null:t}return null},e.RemoteDocumentChangeBuffer=function(e){function t(t,n){var r=e.call(this)||this;return r.documentCache=t,r.trackRemovals=n,r.documentSizes=new Ht((function(e){return e.toString()})),r}return a.__extends(t,e),t.prototype.applyChanges=function(e){var t=this,n=[],r=0,i=new xe((function(e,t){return X(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(o,a){var s=t.documentSizes.get(o);if(b(void 0!==s,"Cannot modify a document that wasn't read (for "+o+")"),a){b(!t.readTime.isEqual(_e.MIN),"Cannot add a document with a read time of zero");var c=t.documentCache.serializer.toDbRemoteDocument(a,t.readTime);i=i.add(o.path.popLast());var u=en(c);r+=u-s,n.push(t.documentCache.addEntry(e,o,c))}else if(r-=s,t.trackRemovals){var l=t.documentCache.serializer.toDbRemoteDocument(new Gt(o,_e.forDeletedDoc()),t.readTime);n.push(t.documentCache.addEntry(e,o,l))}else n.push(t.documentCache.removeEntry(e,o))})),i.forEach((function(r){n.push(t.documentCache.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.documentCache.updateMetadata(e,r)),Ge.waitFor(n)},t.prototype.getFromCache=function(e,t){var n=this;return this.documentCache.getSizedEntry(e,t).next((function(e){return null===e?(n.documentSizes.set(t,0),null):(n.documentSizes.set(t,e.size),e.maybeDocument)}))},t.prototype.getAllFromCache=function(e,t){var n=this;return this.documentCache.getSizedEntries(e,t).next((function(e){var t=e.maybeDocuments;return e.sizeMap.forEach((function(e,t){n.documentSizes.set(e,t)})),t}))},t}(Yt),e}();function Xt(e){return qn.getStore(e,pn.store)}function $t(e){return qn.getStore(e,fn.store)}function Zt(e){return e.path.toArray()}function en(e){var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw v("Unknown remote document type");t=e.noDocument}return JSON.stringify(t).length}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tn=function(){function e(){this.collectionParentIndex=new nn}return e.prototype.addToCollectionParentIndex=function(e,t){return this.collectionParentIndex.add(t),Ge.resolve()},e.prototype.getCollectionParents=function(e,t){return Ge.resolve(this.collectionParentIndex.getEntries(t))},e}(),nn=function(){function e(){this.index={}}return e.prototype.add=function(e){b(e.length%2==1,"Expected a collection path.");var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new xe(le.comparator),i=!r.has(n);return this.index[t]=r.add(n),i},e.prototype.has=function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)},e.prototype.getEntries=function(e){return(this.index[e]||new xe(le.comparator)).toArray()},e}(),rn=9,on=function(){function e(e){this.serializer=e}return e.prototype.createOrUpgrade=function(e,t,n,r){var i=this;b(n<r&&n>=0&&r<=rn,"Unexpected schema upgrade from v"+n+" to v{toVersion}.");var o=new Je(t);n<1&&r>=1&&(function(e){e.createObjectStore(sn.store)}(e),function(e){e.createObjectStore(cn.store,{keyPath:cn.keyPath}),e.createObjectStore(un.store,{keyPath:un.keyPath,autoIncrement:!0}).createIndex(un.userMutationsIndex,un.userMutationsKeyPath,{unique:!0}),e.createObjectStore(ln.store)}(e),bn(e),function(e){e.createObjectStore(fn.store)}(e));var a=Ge.resolve();return n<3&&r>=3&&(0!==n&&(!function(e){e.deleteObjectStore(gn.store),e.deleteObjectStore(mn.store),e.deleteObjectStore(yn.store)}(e),bn(e)),a=a.next((function(){return function(e){var t=e.store(yn.store),n=new yn(0,0,_e.MIN.toTimestamp(),0);return t.put(yn.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(a=a.next((function(){return function(e,t){return t.store(un.store).loadAll().next((function(n){e.deleteObjectStore(un.store),e.createObjectStore(un.store,{keyPath:un.keyPath,autoIncrement:!0}).createIndex(un.userMutationsIndex,un.userMutationsKeyPath,{unique:!0});var r=t.store(un.store),i=n.map((function(e){return r.put(e)}));return Ge.waitFor(i)}))}(e,o)}))),a=a.next((function(){!function(e){e.createObjectStore(wn.store,{keyPath:wn.keyPath})}(e)}))),n<5&&r>=5&&(a=a.next((function(){return i.removeAcknowledgedMutations(o)}))),n<6&&r>=6&&(a=a.next((function(){return function(e){e.createObjectStore(pn.store)}(e),i.addDocumentGlobal(o)}))),n<7&&r>=7&&(a=a.next((function(){return i.ensureSequenceNumbers(o)}))),n<8&&r>=8&&(a=a.next((function(){return i.createCollectionParentIndex(e,o)}))),n<9&&r>=9&&(a=a.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e),function(e){var t=e.objectStore(fn.store);t.createIndex(fn.readTimeIndex,fn.readTimeIndexPath,{unique:!1}),t.createIndex(fn.collectionReadTimeIndex,fn.collectionReadTimeIndexPath,{unique:!1})}(t)}))),a},e.prototype.addDocumentGlobal=function(e){var t=0;return e.store(fn.store).iterate((function(e,n){t+=en(n)})).next((function(){var n=new pn(t);return e.store(pn.store).put(pn.key,n)}))},e.prototype.removeAcknowledgedMutations=function(e){var t=this,n=e.store(cn.store),r=e.store(un.store);return n.loadAll().next((function(n){return Ge.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.loadAll(un.userMutationsIndex,i).next((function(r){return Ge.forEach(r,(function(r){b(r.userId===n.userId,"Cannot process batch "+r.batchId+" from unexpected user");var i=t.serializer.fromDbMutationBatch(r);return rt(e,n.userId,i).next((function(){}))}))}))}))}))},e.prototype.ensureSequenceNumbers=function(e){var t=e.store(gn.store),n=e.store(fn.store);return pt(e).next((function(e){var r=[];return n.iterate((function(n,i){var o=new le(n),a=function(e){return[0,Te(e)]}(o);r.push(t.get(a).next((function(n){return n?Ge.resolve():function(n){return t.put(new gn(0,Te(n),e))}(o)})))})).next((function(){return Ge.waitFor(r)}))}))},e.prototype.createCollectionParentIndex=function(e,t){e.createObjectStore(vn.store,{keyPath:vn.keyPath});var n=t.store(vn.store),r=new nn,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:Te(i)})}};return t.store(fn.store).iterate({keysOnly:!0},(function(e,t){var n=new le(e);return i(n.popLast())})).next((function(){return t.store(ln.store).iterate({keysOnly:!0},(function(e,t){e[0];var n=e[1],r=(e[2],Ee(n));return i(r.popLast())}))}))},e}();var an=function(e,t){this.seconds=e,this.nanoseconds=t},sn=function(){function e(e,t,n){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=n}return e.store="owner",e.key="owner",e}();var cn=function(){function e(e,t,n){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=n}return e.store="mutationQueues",e.keyPath="userId",e}(),un=function(){function e(e,t,n,r,i){this.userId=e,this.batchId=t,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i}return e.store="mutations",e.keyPath="batchId",e.userMutationsIndex="userMutationsIndex",e.userMutationsKeyPath=["userId","batchId"],e}();var ln=function(){function e(){}return e.prefixForUser=function(e){return[e]},e.prefixForPath=function(e,t){return[e,Te(t)]},e.key=function(e,t,n){return[e,Te(t),n]},e.store="documentMutations",e.PLACEHOLDER=new e,e}();var hn=function(e,t){this.path=e,this.readTime=t},dn=function(e,t){this.path=e,this.version=t},fn=function(){function e(e,t,n,r,i,o){this.unknownDocument=e,this.noDocument=t,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o}return e.store="remoteDocuments",e.readTimeIndex="readTimeIndex",e.readTimeIndexPath="readTime",e.collectionReadTimeIndex="collectionReadTimeIndex",e.collectionReadTimeIndexPath=["parentPath","readTime"],e}(),pn=function(){function e(e){this.byteSize=e}return e.store="remoteDocumentGlobal",e.key="remoteDocumentGlobalKey",e}();var mn=function(){function e(e,t,n,r,i,o,a){this.targetId=e,this.canonicalId=t,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=a}return e.store="targets",e.keyPath="targetId",e.queryTargetsIndexName="queryTargetsIndex",e.queryTargetsKeyPath=["canonicalId","targetId"],e}(),gn=function(){function e(e,t,n){this.targetId=e,this.path=t,this.sequenceNumber=n,b(0===e==(void 0!==n),"A target-document row must either have targetId == 0 and a defined sequence number, or a non-zero targetId and no sequence number")}return e.store="targetDocuments",e.keyPath=["targetId","path"],e.documentTargetsIndex="documentTargetsIndex",e.documentTargetsKeyPath=["path","targetId"],e}(),yn=function(){function e(e,t,n,r){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=n,this.targetCount=r}return e.key="targetGlobalKey",e.store="targetGlobal",e}(),vn=function(){function e(e,t){this.collectionId=e,this.parent=t}return e.store="collectionParents",e.keyPath=["collectionId","parent"],e}();function bn(e){e.createObjectStore(gn.store,{keyPath:gn.keyPath}).createIndex(gn.documentTargetsIndex,gn.documentTargetsKeyPath,{unique:!0}),e.createObjectStore(mn.store,{keyPath:mn.keyPath}).createIndex(mn.queryTargetsIndexName,mn.queryTargetsKeyPath,{unique:!0}),e.createObjectStore(yn.store)}var wn=function(){function e(e,t,n,r){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=n,this.inForeground=r}return e.store="clientMetadata",e.keyPath="clientId",e}();var Tn,Sn=[cn.store,un.store,ln.store,fn.store,mn.store,sn.store,yn.store,gn.store],In=a.__spreadArrays(Sn,[wn.store]),En=a.__spreadArrays(In,[pn.store]),Cn=a.__spreadArrays(En,[vn.store]),_n=function(){function e(){this.collectionParentsCache=new nn}return e.prototype.addToCollectionParentIndex=function(e,t){var n=this;if(b(t.length%2==1,"Expected a collection path."),!this.collectionParentsCache.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.collectionParentsCache.add(t)}));var o={collectionId:r,parent:Te(i)};return Dn(e).put(o)}return Ge.resolve()},e.prototype.getCollectionParents=function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[Z(t),""],!1,!0);return Dn(e).loadAll(r).next((function(e){for(var r=0,i=e;r<i.length;r++){var o=i[r];if(o.collectionId!==t)break;n.push(Ee(o.parent))}return n}))},e}();function Dn(e){return qn.getStore(e,vn.store)}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */!function(e){e[e.Listen=0]="Listen",e[e.ExistenceFilterMismatch=1]="ExistenceFilterMismatch",e[e.LimboResolution=2]="LimboResolution"}(Tn||(Tn={}));var kn=function(){function e(e,t,n,r,i,o,a){void 0===i&&(i=_e.MIN),void 0===o&&(o=_e.MIN),void 0===a&&(a=T()),this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}return e.prototype.withSequenceNumber=function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},e.prototype.withResumeToken=function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)},e.prototype.withLastLimboFreeSnapshotVersion=function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)},e.prototype.isEqual=function(e){return this.targetId===e.targetId&&this.purpose===e.purpose&&this.sequenceNumber===e.sequenceNumber&&this.snapshotVersion.isEqual(e.snapshotVersion)&&this.lastLimboFreeSnapshotVersion.isEqual(e.lastLimboFreeSnapshotVersion)&&this.resumeToken===e.resumeToken&&this.target.isEqual(e.target)},e}(),Nn=function(){function e(e){this.remoteSerializer=e}return e.prototype.fromDbRemoteDocument=function(e){if(e.document)return this.remoteSerializer.fromDocument(e.document,!!e.hasCommittedMutations);if(e.noDocument){var t=fe.fromSegments(e.noDocument.path),n=this.fromDbTimestamp(e.noDocument.readTime);return new Gt(t,n,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){t=fe.fromSegments(e.unknownDocument.path),n=this.fromDbTimestamp(e.unknownDocument.version);return new Qt(t,n)}return v("Unexpected DbRemoteDocument")},e.prototype.toDbRemoteDocument=function(e,t){var n=this.toDbTimestampKey(t),r=e.key.path.popLast().toArray();if(e instanceof Kt){var i=e.proto?e.proto:this.remoteSerializer.toDocument(e),o=e.hasCommittedMutations;return new fn(null,null,i,o,n,r)}if(e instanceof Gt){var a=e.key.path.toArray(),s=this.toDbTimestamp(e.version);o=e.hasCommittedMutations;return new fn(null,new hn(a,s),null,o,n,r)}if(e instanceof Qt){a=e.key.path.toArray();var c=this.toDbTimestamp(e.version);return new fn(new dn(a,c),null,null,!0,n,r)}return v("Unexpected MaybeDocument")},e.prototype.toDbTimestampKey=function(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]},e.prototype.fromDbTimestampKey=function(e){var t=new Ce(e[0],e[1]);return _e.fromTimestamp(t)},e.prototype.toDbTimestamp=function(e){var t=e.toTimestamp();return new an(t.seconds,t.nanoseconds)},e.prototype.fromDbTimestamp=function(e){var t=new Ce(e.seconds,e.nanoseconds);return _e.fromTimestamp(t)},e.prototype.toDbMutationBatch=function(e,t){var n=this,r=t.baseMutations.map((function(e){return n.remoteSerializer.toMutation(e)})),i=t.mutations.map((function(e){return n.remoteSerializer.toMutation(e)}));return new un(e,t.batchId,t.localWriteTime.toMillis(),r,i)},e.prototype.fromDbMutationBatch=function(e){var t=this,n=(e.baseMutations||[]).map((function(e){return t.remoteSerializer.fromMutation(e)})),r=e.mutations.map((function(e){return t.remoteSerializer.fromMutation(e)})),i=Ce.fromMillis(e.localWriteTimeMs);return new ze(e.batchId,i,n,r)},e.prototype.toDbResourcePaths=function(e){var t=[];return e.forEach((function(e){t.push(Te(e.path))})),t},e.prototype.fromDbResourcePaths=function(e){for(var t=qe(),n=0,r=e;n<r.length;n++){var i=r[n];t=t.add(new fe(Ee(i)))}return t},e.prototype.fromDbTarget=function(e){var t,n=this.fromDbTimestamp(e.readTime),r=void 0!==e.lastLimboFreeSnapshotVersion?this.fromDbTimestamp(e.lastLimboFreeSnapshotVersion):_e.MIN,i=e.resumeToken;return t=void 0!==e.query.documents?this.remoteSerializer.fromDocumentsTarget(e.query):this.remoteSerializer.fromQueryTarget(e.query),new kn(t,e.targetId,Tn.Listen,e.lastListenSequenceNumber,n,r,i)},e.prototype.toDbTarget=function(e){b(Tn.Listen===e.purpose,"Only queries with purpose "+Tn.Listen+" may be stored, got "+e.purpose);var t,n,r=this.toDbTimestamp(e.snapshotVersion),i=this.toDbTimestamp(e.lastLimboFreeSnapshotVersion);return t=e.target.isDocumentQuery()?this.remoteSerializer.toDocumentsTarget(e.target):this.remoteSerializer.toQueryTarget(e.target),e.resumeToken instanceof Uint8Array?(b(He.isMockPersistence(),"Persisting non-string stream tokens is only supported with mock persistence ."),n=e.resumeToken.toString()):n=e.resumeToken,new mn(e.targetId,e.target.canonicalId(),r,n,e.sequenceNumber,i,t)},e}();
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function An(e,t){var n=e[0],r=e[1],i=t[0],o=t[1],a=X(n,i);return 0===a?X(r,o):a}var xn=function(){function e(e){this.maxElements=e,this.buffer=new xe(An),this.previousIndex=0}return e.prototype.nextIndex=function(){return++this.previousIndex},e.prototype.addElement=function(e){var t=[e,this.nextIndex()];if(this.buffer.size<this.maxElements)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();An(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}},Object.defineProperty(e.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!0,configurable:!0}),e}(),Mn={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Ln=function(){function e(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}return e.withCacheSize=function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},e.COLLECTION_DISABLED=-1,e.MINIMUM_CACHE_SIZE_BYTES=1048576,e.DEFAULT_CACHE_SIZE_BYTES=41943040,e.DEFAULT_COLLECTION_PERCENTILE=10,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,e.DEFAULT=new e(e.DEFAULT_CACHE_SIZE_BYTES,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),e.DISABLED=new e(e.COLLECTION_DISABLED,0,0),e}(),Pn=function(){function e(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.hasRun=!1,this.gcTask=null}return e.prototype.start=function(){b(null===this.gcTask,"Cannot start an already started LruScheduler"),this.garbageCollector.params.cacheSizeCollectionThreshold!==Ln.COLLECTION_DISABLED&&this.scheduleGC()},e.prototype.stop=function(){this.gcTask&&(this.gcTask.cancel(),this.gcTask=null)},Object.defineProperty(e.prototype,"started",{get:function(){return null!==this.gcTask},enumerable:!0,configurable:!0}),e.prototype.scheduleGC=function(){var e=this;b(null===this.gcTask,"Cannot schedule GC while a task is pending");var t=this.hasRun?3e5:6e4;m("LruGarbageCollector","Garbage collection scheduled in "+t+"ms"),this.gcTask=this.asyncQueue.enqueueAfterDelay(ne.LruGarbageCollection,t,(function(){return e.gcTask=null,e.hasRun=!0,e.localStore.collectGarbage(e.garbageCollector).then((function(){return e.scheduleGC()})).catch(Un)}))},e}(),On=function(){function e(e,t){this.delegate=e,this.params=t}return e.prototype.calculateTargetCount=function(e,t){return this.delegate.getSequenceNumberCount(e).next((function(e){return Math.floor(t/100*e)}))},e.prototype.nthSequenceNumber=function(e,t){var n=this;if(0===t)return Ge.resolve(ce.INVALID);var r=new xn(t);return this.delegate.forEachTarget(e,(function(e){return r.addElement(e.sequenceNumber)})).next((function(){return n.delegate.forEachOrphanedDocumentSequenceNumber(e,(function(e){return r.addElement(e)}))})).next((function(){return r.maxValue}))},e.prototype.removeTargets=function(e,t,n){return this.delegate.removeTargets(e,t,n)},e.prototype.removeOrphanedDocuments=function(e,t){return this.delegate.removeOrphanedDocuments(e,t)},e.prototype.collect=function(e,t){var n=this;return this.params.cacheSizeCollectionThreshold===Ln.COLLECTION_DISABLED?(m("LruGarbageCollector","Garbage collection skipped; disabled"),Ge.resolve(Mn)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(m("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),Mn):n.runGarbageCollection(e,t)}))},e.prototype.getCacheSize=function(e){return this.delegate.getCacheSize(e)},e.prototype.runGarbageCollection=function(e,t){var n,r,o,a,s,c,u,l=this,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>l.params.maximumSequenceNumbersToCollect?(m("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+l.params.maximumSequenceNumbersToCollect+" from "+t),r=l.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),l.nthSequenceNumber(e,r)})).next((function(r){return n=r,s=Date.now(),l.removeTargets(e,n,t)})).next((function(t){return o=t,c=Date.now(),l.removeOrphanedDocuments(e,n)})).next((function(e){(u=Date.now(),f()<=i.DEBUG)&&m("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(a-h)+"ms\n\tDetermined least recently used "+r+" in "+(s-a)+"ms\n\tRemoved "+o+" targets in "+(c-s)+"ms\n\tRemoved "+e+" documents in "+(u-c)+"ms\nTotal Duration: "+(u-h)+"ms");return Ge.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:e})}))},e}(),Rn=function(){function e(){this.onCommittedListeners=[]}return e.prototype.addOnCommittedListener=function(e){this.onCommittedListeners.push(e)},e.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach((function(e){return e()}))},e}(),jn="IndexedDbPersistence",Bn="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Fn="Another tab has exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `synchronizeTabs:true` in all tabs.",Vn=function(e){function t(t,n){var r=e.call(this)||this;return r.simpleDbTransaction=t,r.currentSequenceNumber=n,r}return a.__extends(t,e),t}(Rn),qn=function(){function e(t,n,r,i,o,a,s,c){if(this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.queue=a,this.sequenceNumberSyncer=c,this._started=!1,this.isPrimary=!1,this.networkEnabled=!0,this.windowUnloadHandler=null,this.inForeground=!1,this.documentVisibilityHandler=null,this.clientMetadataRefresher=null,this.lastGarbageCollectionTime=Number.NEGATIVE_INFINITY,this.primaryStateListener=function(e){return Promise.resolve()},this.referenceDelegate=new Kn(this,o),this.dbName=n+e.MAIN_DATABASE,this.serializer=new Nn(s),this.document=i.document,this.targetCache=new ht(this.referenceDelegate,this.serializer),this.indexManager=new _n,this.remoteDocumentCache=new Jt(this.serializer,this.indexManager),!i.window||!i.window.localStorage)throw new I(S.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");this.window=i.window,this.webStorage=this.window.localStorage}return e.getStore=function(e,t){if(e instanceof Vn)return He.getStore(e.simpleDbTransaction,t);throw v("IndexedDbPersistence must use instances of IndexedDbTransaction")},e.createIndexedDbPersistence=function(t){return a.__awaiter(this,void 0,void 0,(function(){var n;return a.__generator(this,(function(r){switch(r.label){case 0:if(!e.isAvailable())throw new I(S.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");return[4,(n=new e(t.allowTabSynchronization,t.persistenceKey,t.clientId,t.platform,t.lruParams,t.queue,t.serializer,t.sequenceNumberSyncer)).start()];case 1:return r.sent(),[2,n]}}))}))},e.prototype.start=function(){var e=this;return b(!this.started,"IndexedDbPersistence double-started!"),b(null!==this.window,"Expected 'window' to be defined"),He.openOrCreate(this.dbName,rn,new on(this.serializer)).then((function(t){return e.simpleDb=t,e.updateClientMetadataAndTryBecomePrimary()})).then((function(){return e.attachVisibilityHandler(),e.attachWindowUnloadHook(),e.scheduleClientMetadataAndPrimaryLeaseRefreshes(),e.simpleDb.runTransaction("readonly-idempotent",[yn.store],(function(e){return pt(e)}))})).then((function(t){e.listenSequence=new ce(t,e.sequenceNumberSyncer)})).then((function(){e._started=!0})).catch((function(t){return e.simpleDb&&e.simpleDb.close(),Promise.reject(t)}))},e.prototype.setPrimaryStateListener=function(e){var t=this;return this.primaryStateListener=function(n){return a.__awaiter(t,void 0,void 0,(function(){return a.__generator(this,(function(t){return this.started?[2,e(n)]:[2]}))}))},e(this.isPrimary)},e.prototype.setDatabaseDeletedListener=function(e){var t=this;this.simpleDb.setVersionChangeListener((function(n){return a.__awaiter(t,void 0,void 0,(function(){return a.__generator(this,(function(t){switch(t.label){case 0:return null!==n.newVersion?[3,2]:[4,e()];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))},e.prototype.setNetworkEnabled=function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.queue.enqueueAndForget((function(){return a.__awaiter(t,void 0,void 0,(function(){return a.__generator(this,(function(e){switch(e.label){case 0:return this.started?[4,this.updateClientMetadataAndTryBecomePrimary()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))})))},e.prototype.updateClientMetadataAndTryBecomePrimary=function(){var e=this;return this.simpleDb.runTransaction("readwrite-idempotent",Cn,(function(t){return zn(t).put(new wn(e.clientId,Date.now(),e.networkEnabled,e.inForeground)).next((function(){if(e.isPrimary)return e.verifyPrimaryLease(t).next((function(t){t||(e.isPrimary=!1,e.queue.enqueueAndForget((function(){return e.primaryStateListener(!1)})))}))})).next((function(){return e.canActAsPrimary(t)})).next((function(n){return e.isPrimary&&!n?e.releasePrimaryLeaseIfHeld(t).next((function(){return!1})):!!n&&e.acquireOrExtendPrimaryLease(t).next((function(){return!0}))}))})).catch((function(t){if(!e.allowTabSynchronization)throw t;return m(jn,"Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.queue.enqueueAndForget((function(){return e.primaryStateListener(t)})),e.isPrimary=t}))},e.prototype.verifyPrimaryLease=function(e){var t=this;return Wn(e).get(sn.key).next((function(e){return Ge.resolve(t.isLocalClient(e))}))},e.prototype.removeClientMetadata=function(e){return zn(e).delete(this.clientId)},e.prototype.maybeGarbageCollectMultiClientState=function(){return a.__awaiter(this,void 0,void 0,(function(){var t=this;return a.__generator(this,(function(n){switch(n.label){case 0:return!this.isPrimary||this.isWithinAge(this.lastGarbageCollectionTime,18e5)?[3,2]:(this.lastGarbageCollectionTime=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary-idempotent",(function(n){var r=e.getStore(n,wn.store);return r.loadAll().next((function(e){var n=t.filterActiveClients(e,18e5),i=e.filter((function(e){return-1===n.indexOf(e)}));return Ge.forEach(i,(function(e){return r.delete(e.clientId)})).next((function(){return i}))}))}))]);case 1:n.sent().forEach((function(e){t.window.localStorage.removeItem(t.zombiedClientLocalStorageKey(e.clientId))})),n.label=2;case 2:return[2]}}))}))},e.prototype.scheduleClientMetadataAndPrimaryLeaseRefreshes=function(){var e=this;this.clientMetadataRefresher=this.queue.enqueueAfterDelay(ne.ClientMetadataRefresh,4e3,(function(){return e.updateClientMetadataAndTryBecomePrimary().then((function(){return e.maybeGarbageCollectMultiClientState()})).then((function(){return e.scheduleClientMetadataAndPrimaryLeaseRefreshes()}))}))},e.prototype.isLocalClient=function(e){return!!e&&e.ownerId===this.clientId},e.prototype.canActAsPrimary=function(e){var t=this;return Wn(e).get(sn.key).next((function(n){if(null!==n&&t.isWithinAge(n.leaseTimestampMs,5e3)&&!t.isClientZombied(n.ownerId)){if(t.isLocalClient(n)&&t.networkEnabled)return!0;if(!t.isLocalClient(n)){if(!n.allowTabSynchronization)throw new I(S.FAILED_PRECONDITION,Fn);return!1}}return!(!t.networkEnabled||!t.inForeground)||zn(e).loadAll().next((function(e){return void 0===t.filterActiveClients(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&m(jn,"Client "+(e?"is":"is not")+" eligible for a primary lease."),e}))},e.prototype.shutdown=function(){return a.__awaiter(this,void 0,void 0,(function(){var e=this;return a.__generator(this,(function(t){switch(t.label){case 0:return this._started=!1,this.markClientZombied(),this.clientMetadataRefresher&&(this.clientMetadataRefresher.cancel(),this.clientMetadataRefresher=null),this.detachVisibilityHandler(),this.detachWindowUnloadHook(),[4,this.simpleDb.runTransaction("readwrite-idempotent",[sn.store,wn.store],(function(t){return e.releasePrimaryLeaseIfHeld(t).next((function(){return e.removeClientMetadata(t)}))}))];case 1:return t.sent(),this.simpleDb.close(),this.removeClientZombiedEntry(),[2]}}))}))},e.prototype.filterActiveClients=function(e,t){var n=this;return e.filter((function(e){return n.isWithinAge(e.updateTimeMs,t)&&!n.isClientZombied(e.clientId)}))},e.prototype.getActiveClients=function(){var e=this;return this.simpleDb.runTransaction("readonly-idempotent",[wn.store],(function(t){return zn(t).loadAll().next((function(t){return e.filterActiveClients(t,18e5).map((function(e){return e.clientId}))}))}))},e.clearPersistence=function(t){return a.__awaiter(this,void 0,void 0,(function(){var n;return a.__generator(this,(function(r){switch(r.label){case 0:return e.isAvailable()?(n=t+e.MAIN_DATABASE,[4,He.delete(n)]):[2,Promise.resolve()];case 1:return r.sent(),[2]}}))}))},Object.defineProperty(e.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),e.prototype.getMutationQueue=function(e){return b(this.started,"Cannot initialize MutationQueue before persistence is started."),tt.forUser(e,this.serializer,this.indexManager,this.referenceDelegate)},e.prototype.getTargetCache=function(){return b(this.started,"Cannot initialize TargetCache before persistence is started."),this.targetCache},e.prototype.getRemoteDocumentCache=function(){return b(this.started,"Cannot initialize RemoteDocumentCache before persistence is started."),this.remoteDocumentCache},e.prototype.getIndexManager=function(){return b(this.started,"Cannot initialize IndexManager before persistence is started."),this.indexManager},e.prototype.runTransaction=function(e,t,n){var r=this;m(jn,"Starting transaction:",e);var i,o=t.endsWith("idempotent"),a=t.startsWith("readonly")?o?"readonly-idempotent":"readonly":o?"readwrite-idempotent":"readwrite";return this.simpleDb.runTransaction(a,Cn,(function(o){return i=new Vn(o,r.listenSequence.next()),"readwrite-primary"===t||"readwrite-primary-idempotent"===t?r.verifyPrimaryLease(o).next((function(e){return!!e||r.canActAsPrimary(o)})).next((function(t){if(!t)throw g("Failed to obtain primary lease for action '"+e+"'."),r.isPrimary=!1,r.queue.enqueueAndForget((function(){return r.primaryStateListener(!1)})),new I(S.FAILED_PRECONDITION,Bn);return n(i)})).next((function(e){return r.acquireOrExtendPrimaryLease(o).next((function(){return e}))})):r.verifyAllowTabSynchronization(o).next((function(){return n(i)}))})).then((function(e){return i.raiseOnCommittedEvent(),e}))},e.prototype.verifyAllowTabSynchronization=function(e){var t=this;return Wn(e).get(sn.key).next((function(e){if(null!==e&&t.isWithinAge(e.leaseTimestampMs,5e3)&&!t.isClientZombied(e.ownerId)&&!t.isLocalClient(e)&&!e.allowTabSynchronization)throw new I(S.FAILED_PRECONDITION,Fn)}))},e.prototype.acquireOrExtendPrimaryLease=function(e){var t=new sn(this.clientId,this.allowTabSynchronization,Date.now());return Wn(e).put(sn.key,t)},e.isAvailable=function(){return He.isAvailable()},e.buildStoragePrefix=function(e){var t=e.databaseId.projectId;return e.databaseId.isDefaultDatabase||(t+="."+e.databaseId.database),"firestore/"+e.persistenceKey+"/"+t+"/"},e.prototype.releasePrimaryLeaseIfHeld=function(e){var t=this,n=Wn(e);return n.get(sn.key).next((function(e){return t.isLocalClient(e)?(m(jn,"Releasing primary lease."),n.delete(sn.key)):Ge.resolve()}))},e.prototype.isWithinAge=function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(g("Detected an update time that is in the future: "+e+" > "+n),!1))},e.prototype.attachVisibilityHandler=function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.documentVisibilityHandler=function(){e.queue.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.updateClientMetadataAndTryBecomePrimary()}))},this.document.addEventListener("visibilitychange",this.documentVisibilityHandler),this.inForeground="visible"===this.document.visibilityState)},e.prototype.detachVisibilityHandler=function(){this.documentVisibilityHandler&&(b(null!==this.document&&"function"==typeof this.document.addEventListener,"Expected 'document.addEventListener' to be a function"),this.document.removeEventListener("visibilitychange",this.documentVisibilityHandler),this.documentVisibilityHandler=null)},e.prototype.attachWindowUnloadHook=function(){var e=this;"function"==typeof this.window.addEventListener&&(this.windowUnloadHandler=function(){e.markClientZombied(),e.queue.enqueueAndForget((function(){return e.shutdown()}))},this.window.addEventListener("unload",this.windowUnloadHandler))},e.prototype.detachWindowUnloadHook=function(){this.windowUnloadHandler&&(b("function"==typeof this.window.removeEventListener,"Expected 'window.removeEventListener' to be a function"),this.window.removeEventListener("unload",this.windowUnloadHandler),this.windowUnloadHandler=null)},e.prototype.isClientZombied=function(e){try{var t=null!==this.webStorage.getItem(this.zombiedClientLocalStorageKey(e));return m(jn,"Client '"+e+"' "+(t?"is":"is not")+" zombied in LocalStorage"),t}catch(e){return g(jn,"Failed to get zombied client id.",e),!1}},e.prototype.markClientZombied=function(){try{this.webStorage.setItem(this.zombiedClientLocalStorageKey(this.clientId),String(Date.now()))}catch(e){g("Failed to set zombie client id.",e)}},e.prototype.removeClientZombiedEntry=function(){try{this.webStorage.removeItem(this.zombiedClientLocalStorageKey(this.clientId))}catch(e){}},e.prototype.zombiedClientLocalStorageKey=function(e){return"firestore_zombie_"+this.persistenceKey+"_"+e},e.MAIN_DATABASE="main",e}();function Un(e){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(t){if(!function(e){return e.code===S.FAILED_PRECONDITION&&e.message===Bn}(e))throw e;return m(jn,"Unexpectedly lost primary lease"),[2]}))}))}function Wn(e){return e.store(sn.store)}function zn(e){return e.store(wn.store)}var Kn=function(){function e(e,t){this.db=e,this.inMemoryPins=null,this.garbageCollector=new On(this,t)}return e.prototype.getSequenceNumberCount=function(e){var t=this.orphanedDocmentCount(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))},e.prototype.orphanedDocmentCount=function(e){var t=0;return this.forEachOrphanedDocumentSequenceNumber(e,(function(e){t++})).next((function(){return t}))},e.prototype.forEachTarget=function(e,t){return this.db.getTargetCache().forEachTarget(e,t)},e.prototype.forEachOrphanedDocumentSequenceNumber=function(e,t){return this.forEachOrphanedDocument(e,(function(e,n){return t(n)}))},e.prototype.setInMemoryPins=function(e){this.inMemoryPins=e},e.prototype.addReference=function(e,t){return Gn(e,t)},e.prototype.removeReference=function(e,t){return Gn(e,t)},e.prototype.removeTargets=function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)},e.prototype.removeMutationReference=function(e,t){return Gn(e,t)},e.prototype.isPinned=function(e,t){return this.inMemoryPins.containsKey(t)?Ge.resolve(!0):function(e,t){var n=!1;return st(e).iterateSerial((function(r){return nt(e,r,t).next((function(e){return e&&(n=!0),Ge.resolve(!e)}))})).next((function(){return n}))}(e,t)},e.prototype.removeOrphanedDocuments=function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.forEachOrphanedDocument(e,(function(a,s){if(s<=t){var c=n.isPinned(e,a).next((function(t){if(!t)return o++,r.getEntry(e,a).next((function(){return r.removeEntry(a),mt(e).delete([0,Te(a.path)])}))}));i.push(c)}})).next((function(){return Ge.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return o}))},e.prototype.removeTarget=function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)},e.prototype.updateLimboDocument=function(e,t){return Gn(e,t)},e.prototype.forEachOrphanedDocument=function(e,t){var n,r=mt(e),i=ce.INVALID;return r.iterate({index:gn.documentTargetsIndex},(function(e,r){var o=e[0],a=(e[1],r.path),s=r.sequenceNumber;0===o?(i!==ce.INVALID&&t(new fe(Ee(n)),i),i=s,n=a):i=ce.INVALID})).next((function(){i!==ce.INVALID&&t(new fe(Ee(n)),i)}))},e.prototype.getCacheSize=function(e){return this.db.getRemoteDocumentCache().getSize(e)},e}();function Gn(e,t){return mt(e).put(function(e,t){return new gn(0,Te(e.path),t)}(t,e.currentSequenceNumber))}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qn=Number,Hn=Qn.MIN_SAFE_INTEGER||-(Math.pow(2,53)-1),Yn=Qn.MAX_SAFE_INTEGER||Math.pow(2,53)-1,Jn=Qn.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e};function Xn(e){return null==e}function $n(e){return Jn(e)&&e<=Yn&&e>=Hn}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Zn,er=function(){function e(e,t,n,r,i,o,a){void 0===t&&(t=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.memoizedCanonicalId=null}return e.prototype.canonicalId=function(){if(null===this.memoizedCanonicalId){var e=this.path.canonicalString();null!==this.collectionGroup&&(e+="|cg:"+this.collectionGroup),e+="|f:";for(var t=0,n=this.filters;t<n.length;t++){e+=n[t].canonicalId(),e+=","}e+="|ob:";for(var r=0,i=this.orderBy;r<i.length;r++){e+=i[r].canonicalId(),e+=","}Xn(this.limit)||(e+="|l:",e+=this.limit),this.startAt&&(e+="|lb:",e+=this.startAt.canonicalId()),this.endAt&&(e+="|ub:",e+=this.endAt.canonicalId()),this.memoizedCanonicalId=e}return this.memoizedCanonicalId},e.prototype.toString=function(){var e=this.path.canonicalString();return null!==this.collectionGroup&&(e+=" collectionGroup="+this.collectionGroup),this.filters.length>0&&(e+=", filters: ["+this.filters.join(", ")+"]"),Xn(this.limit)||(e+=", limit: "+this.limit),this.orderBy.length>0&&(e+=", orderBy: ["+this.orderBy.join(", ")+"]"),this.startAt&&(e+=", startAt: "+this.startAt.canonicalId()),this.endAt&&(e+=", endAt: "+this.endAt.canonicalId()),"Target("+e+")"},e.prototype.isEqual=function(e){if(this.limit!==e.limit)return!1;if(this.orderBy.length!==e.orderBy.length)return!1;for(var t=0;t<this.orderBy.length;t++)if(!this.orderBy[t].isEqual(e.orderBy[t]))return!1;if(this.filters.length!==e.filters.length)return!1;for(t=0;t<this.filters.length;t++)if(!this.filters[t].isEqual(e.filters[t]))return!1;return this.collectionGroup===e.collectionGroup&&(!!this.path.isEqual(e.path)&&(!(null!==this.startAt?!this.startAt.isEqual(e.startAt):null!==e.startAt)&&(null!==this.endAt?this.endAt.isEqual(e.endAt):null===e.endAt)))},e.prototype.isDocumentQuery=function(){return fe.isDocumentKey(this.path)&&null===this.collectionGroup&&0===this.filters.length},e}();
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */!function(e){e.First="F",e.Last="L"}(Zn||(Zn={}));var tr=function(){function e(e,t,n,r,i,o,a,s){void 0===t&&(t=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=Zn.First),void 0===a&&(a=null),void 0===s&&(s=null),this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=s,this.memoizedOrderBy=null,this.memoizedTarget=null,this.startAt&&this.assertValidBound(this.startAt),this.endAt&&this.assertValidBound(this.endAt)}return e.atPath=function(t){return new e(t)},Object.defineProperty(e.prototype,"orderBy",{get:function(){if(null===this.memoizedOrderBy){var e=this.getInequalityFilterField(),t=this.getFirstOrderByField();if(null!==e&&null===t)e.isKeyField()?this.memoizedOrderBy=[fr]:this.memoizedOrderBy=[new dr(e),fr];else{b(null===e||null!==t&&e.isEqual(t),"First orderBy should match inequality field."),this.memoizedOrderBy=[];for(var n=!1,r=0,i=this.explicitOrderBy;r<i.length;r++){var o=i[r];this.memoizedOrderBy.push(o),o.field.isKeyField()&&(n=!0)}if(!n){var a=this.explicitOrderBy.length>0?this.explicitOrderBy[this.explicitOrderBy.length-1].dir:lr.ASCENDING;this.memoizedOrderBy.push(a===lr.ASCENDING?fr:pr)}}}return this.memoizedOrderBy},enumerable:!0,configurable:!0}),e.prototype.addFilter=function(t){b(null==this.getInequalityFilterField()||!(t instanceof ir)||!t.isInequality()||t.field.isEqual(this.getInequalityFilterField()),"Query must only have one inequality field."),b(!this.isDocumentQuery(),"No filtering allowed for document query");var n=this.filters.concat([t]);return new e(this.path,this.collectionGroup,this.explicitOrderBy.slice(),n,this.limit,this.limitType,this.startAt,this.endAt)},e.prototype.addOrderBy=function(t){b(!this.startAt&&!this.endAt,"Bounds must be set after orderBy");var n=this.explicitOrderBy.concat([t]);return new e(this.path,this.collectionGroup,n,this.filters.slice(),this.limit,this.limitType,this.startAt,this.endAt)},e.prototype.withLimitToFirst=function(t){return new e(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),t,Zn.First,this.startAt,this.endAt)},e.prototype.withLimitToLast=function(t){return new e(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),t,Zn.Last,this.startAt,this.endAt)},e.prototype.withStartAt=function(t){return new e(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.limitType,t,this.endAt)},e.prototype.withEndAt=function(t){return new e(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.limitType,this.startAt,t)},e.prototype.asCollectionQueryAtPath=function(t){return new e(t,null,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.limitType,this.startAt,this.endAt)},e.prototype.matchesAllDocuments=function(){return 0===this.filters.length&&null===this.limit&&null==this.startAt&&null==this.endAt&&(0===this.explicitOrderBy.length||1===this.explicitOrderBy.length&&this.explicitOrderBy[0].field.isKeyField())},e.prototype.canonicalId=function(){return this.toTarget().canonicalId()+"|lt:"+this.limitType},e.prototype.toString=function(){return"Query(target="+this.toTarget().toString()+"; limitType="+this.limitType+")"},e.prototype.isEqual=function(e){return this.toTarget().isEqual(e.toTarget())&&this.limitType===e.limitType},e.prototype.docComparator=function(e,t){for(var n=!1,r=0,i=this.orderBy;r<i.length;r++){var o=i[r],a=o.compare(e,t);if(0!==a)return a;n=n||o.field.isKeyField()}return b(n,"orderBy used that doesn't compare on key field"),0},e.prototype.matches=function(e){return this.matchesPathAndCollectionGroup(e)&&this.matchesOrderBy(e)&&this.matchesFilters(e)&&this.matchesBounds(e)},e.prototype.hasLimitToFirst=function(){return!Xn(this.limit)&&this.limitType===Zn.First},e.prototype.hasLimitToLast=function(){return!Xn(this.limit)&&this.limitType===Zn.Last},e.prototype.getFirstOrderByField=function(){return this.explicitOrderBy.length>0?this.explicitOrderBy[0].field:null},e.prototype.getInequalityFilterField=function(){for(var e=0,t=this.filters;e<t.length;e++){var n=t[e];if(n instanceof ir&&n.isInequality())return n.field}return null},e.prototype.findFilterOperator=function(e){for(var t=0,n=this.filters;t<n.length;t++){var r=n[t];if(r instanceof ir&&e.indexOf(r.op)>=0)return r.op}return null},e.prototype.isDocumentQuery=function(){return this.toTarget().isDocumentQuery()},e.prototype.isCollectionGroupQuery=function(){return null!==this.collectionGroup},e.prototype.toTarget=function(){if(!this.memoizedTarget)if(this.limitType===Zn.First)this.memoizedTarget=new er(this.path,this.collectionGroup,this.orderBy,this.filters,this.limit,this.startAt,this.endAt);else{for(var e=[],t=0,n=this.orderBy;t<n.length;t++){var r=n[t],i=r.dir===lr.DESCENDING?lr.ASCENDING:lr.DESCENDING;e.push(new dr(r.field,i))}var o=this.endAt?new hr(this.endAt.position,!this.endAt.before):null,a=this.startAt?new hr(this.startAt.position,!this.startAt.before):null;this.memoizedTarget=new er(this.path,this.collectionGroup,e,this.filters,this.limit,o,a)}return this.memoizedTarget},e.prototype.matchesPathAndCollectionGroup=function(e){var t=e.key.path;return null!==this.collectionGroup?e.key.hasCollectionId(this.collectionGroup)&&this.path.isPrefixOf(t):fe.isDocumentKey(this.path)?this.path.isEqual(t):this.path.isImmediateParentOf(t)},e.prototype.matchesOrderBy=function(e){for(var t=0,n=this.explicitOrderBy;t<n.length;t++){var r=n[t];if(!r.field.isKeyField()&&null===e.field(r.field))return!1}return!0},e.prototype.matchesFilters=function(e){for(var t=0,n=this.filters;t<n.length;t++){if(!n[t].matches(e))return!1}return!0},e.prototype.matchesBounds=function(e){return!(this.startAt&&!this.startAt.sortsBeforeDocument(this.orderBy,e))&&(!this.endAt||!this.endAt.sortsBeforeDocument(this.orderBy,e))},e.prototype.assertValidBound=function(e){b(e.position.length<=this.orderBy.length,"Bound is longer than orderBy")},e}(),nr=function(){},rr=function(){function e(e){this.name=e}return e.fromString=function(t){switch(t){case"<":return e.LESS_THAN;case"<=":return e.LESS_THAN_OR_EQUAL;case"==":return e.EQUAL;case">=":return e.GREATER_THAN_OR_EQUAL;case">":return e.GREATER_THAN;case"array-contains":return e.ARRAY_CONTAINS;case"in":return e.IN;case"array-contains-any":return e.ARRAY_CONTAINS_ANY;default:return v("Unknown FieldFilter operator: "+t)}},e.prototype.toString=function(){return this.name},e.prototype.isEqual=function(e){return this.name===e.name},e.LESS_THAN=new e("<"),e.LESS_THAN_OR_EQUAL=new e("<="),e.EQUAL=new e("=="),e.GREATER_THAN=new e(">"),e.GREATER_THAN_OR_EQUAL=new e(">="),e.ARRAY_CONTAINS=new e("array-contains"),e.IN=new e("in"),e.ARRAY_CONTAINS_ANY=new e("array-contains-any"),e}(),ir=function(e){function t(t,n,r){var i=e.call(this)||this;return i.field=t,i.op=n,i.value=r,i}return a.__extends(t,e),t.create=function(e,n,r){if(e.isKeyField())return n===rr.IN?(b(r instanceof Wt,"Comparing on key with IN, but filter value not an ArrayValue"),b(r.internalValue.every((function(e){return e instanceof Vt})),"Comparing on key with IN, but an array value was not a RefValue"),new ar(e,r)):(b(r instanceof Vt,"Comparing on key, but filter value not a RefValue"),b(n!==rr.ARRAY_CONTAINS&&n!==rr.ARRAY_CONTAINS_ANY,"'"+n.toString()+"' queries don't make sense on document keys."),new or(e,n,r));if(r.isEqual(At.INSTANCE)){if(n!==rr.EQUAL)throw new I(S.INVALID_ARGUMENT,"Invalid query. Null supports only equality comparisons.");return new t(e,n,r)}if(r.isEqual(Ot.NAN)){if(n!==rr.EQUAL)throw new I(S.INVALID_ARGUMENT,"Invalid query. NaN supports only equality comparisons.");return new t(e,n,r)}return n===rr.ARRAY_CONTAINS?new sr(e,r):n===rr.IN?(b(r instanceof Wt,"IN filter has invalid value: "+r.toString()),new cr(e,r)):n===rr.ARRAY_CONTAINS_ANY?(b(r instanceof Wt,"ARRAY_CONTAINS_ANY filter has invalid value: "+r.toString()),new ur(e,r)):new t(e,n,r)},t.prototype.matches=function(e){var t=e.field(this.field);return null!==t&&this.value.typeOrder===t.typeOrder&&this.matchesComparison(t.compareTo(this.value))},t.prototype.matchesComparison=function(e){switch(this.op){case rr.LESS_THAN:return e<0;case rr.LESS_THAN_OR_EQUAL:return e<=0;case rr.EQUAL:return 0===e;case rr.GREATER_THAN:return e>0;case rr.GREATER_THAN_OR_EQUAL:return e>=0;default:return v("Unknown FieldFilter operator: "+this.op)}},t.prototype.isInequality=function(){return[rr.LESS_THAN,rr.LESS_THAN_OR_EQUAL,rr.GREATER_THAN,rr.GREATER_THAN_OR_EQUAL].indexOf(this.op)>=0},t.prototype.canonicalId=function(){return this.field.canonicalString()+this.op.toString()+this.value.toString()},t.prototype.isEqual=function(e){return e instanceof t&&(this.op.isEqual(e.op)&&this.field.isEqual(e.field)&&this.value.isEqual(e.value))},t.prototype.toString=function(){return this.field.canonicalString()+" "+this.op+" "+this.value.value()},t}(nr),or=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.matches=function(e){var t=this.value,n=fe.comparator(e.key,t.key);return this.matchesComparison(n)},t}(ir),ar=function(e){function t(t,n){var r=e.call(this,t,rr.IN,n)||this;return r.value=n,r}return a.__extends(t,e),t.prototype.matches=function(e){return this.value.internalValue.some((function(t){return e.key.isEqual(t.key)}))},t}(ir),sr=function(e){function t(t,n){return e.call(this,t,rr.ARRAY_CONTAINS,n)||this}return a.__extends(t,e),t.prototype.matches=function(e){var t=e.field(this.field);return t instanceof Wt&&t.contains(this.value)},t}(ir),cr=function(e){function t(t,n){var r=e.call(this,t,rr.IN,n)||this;return r.value=n,r}return a.__extends(t,e),t.prototype.matches=function(e){var t=this.value,n=e.field(this.field);return null!==n&&t.contains(n)},t}(ir),ur=function(e){function t(t,n){var r=e.call(this,t,rr.ARRAY_CONTAINS_ANY,n)||this;return r.value=n,r}return a.__extends(t,e),t.prototype.matches=function(e){var t=this,n=e.field(this.field);return n instanceof Wt&&n.internalValue.some((function(e){return t.value.contains(e)}))},t}(ir),lr=function(){function e(e){this.name=e}return e.prototype.toString=function(){return this.name},e.ASCENDING=new e("asc"),e.DESCENDING=new e("desc"),e}(),hr=function(){function e(e,t){this.position=e,this.before=t}return e.prototype.canonicalId=function(){for(var e=this.before?"b:":"a:",t=0,n=this.position;t<n.length;t++){e+=n[t].toString()}return e},e.prototype.sortsBeforeDocument=function(e,t){b(this.position.length<=e.length,"Bound has more components than query's orderBy");for(var n=0,r=0;r<this.position.length;r++){var i=e[r],o=this.position[r];if(i.field.isKeyField())b(o instanceof Vt,"Bound has a non-key value where the key path is being used."),n=fe.comparator(o.key,t.key);else{var a=t.field(i.field);b(null!==a,"Field should exist since document matched the orderBy already."),n=o.compareTo(a)}if(i.dir===lr.DESCENDING&&(n*=-1),0!==n)break}return this.before?n<=0:n<0},e.prototype.isEqual=function(e){if(null===e)return!1;if(this.before!==e.before||this.position.length!==e.position.length)return!1;for(var t=0;t<this.position.length;t++){var n=this.position[t],r=e.position[t];if(!n.isEqual(r))return!1}return!0},e}(),dr=function(){function e(e,t){this.field=e,void 0===t&&(t=lr.ASCENDING),this.dir=t,this.isKeyOrderBy=e.isKeyField()}return e.prototype.compare=function(e,t){var n=this.isKeyOrderBy?Kt.compareByKey(e,t):Kt.compareByField(this.field,e,t);switch(this.dir){case lr.ASCENDING:return n;case lr.DESCENDING:return-1*n;default:return v("Unknown direction: "+this.dir)}},e.prototype.canonicalId=function(){return this.field.canonicalString()+this.dir.toString()},e.prototype.toString=function(){return this.field.canonicalString()+" ("+this.dir+")"},e.prototype.isEqual=function(e){return this.dir===e.dir&&this.field.isEqual(e.field)},e}(),fr=new dr(de.keyField(),lr.ASCENDING),pr=new dr(de.keyField(),lr.DESCENDING),mr=function(){function e(){}return e.prototype.setLocalDocumentsView=function(e){this.localDocumentsView=e},e.prototype.getDocumentsMatchingQuery=function(e,t,n,r){var o=this;return b(void 0!==this.localDocumentsView,"setLocalDocumentsView() not called"),t.matchesAllDocuments()?this.executeFullCollectionScan(e,t):n.isEqual(_e.MIN)?this.executeFullCollectionScan(e,t):this.localDocumentsView.getDocuments(e,r).next((function(a){var s=o.applyQuery(t,a);return(t.hasLimitToFirst()||t.hasLimitToLast())&&o.needsRefill(t.limitType,s,r,n)?o.executeFullCollectionScan(e,t):(f()<=i.DEBUG&&m("IndexFreeQueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),t.toString()),o.localDocumentsView.getDocumentsMatchingQuery(e,t,n).next((function(e){return s.forEach((function(t){e=e.insert(t.key,t)})),e})))}))},e.prototype.applyQuery=function(e,t){var n=new xe((function(t,n){return e.docComparator(t,n)}));return t.forEach((function(t,r){r instanceof Kt&&e.matches(r)&&(n=n.add(r))})),n},e.prototype.needsRefill=function(e,t,n,r){if(n.size!==t.size)return!0;var i=e===Zn.First?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},e.prototype.executeFullCollectionScan=function(e,t){return f()<=i.DEBUG&&m("IndexFreeQueryEngine","Using full collection scan to execute query: %s",t.toString()),this.localDocumentsView.getDocumentsMatchingQuery(e,t,_e.MIN)},e}(),gr=function(){function e(e,t,n){this.remoteDocumentCache=e,this.mutationQueue=t,this.indexManager=n}return e.prototype.getDocument=function(e,t){var n=this;return this.mutationQueue.getAllMutationBatchesAffectingDocumentKey(e,t).next((function(r){return n.getDocumentInternal(e,t,r)}))},e.prototype.getDocumentInternal=function(e,t,n){return this.remoteDocumentCache.getEntry(e,t).next((function(e){for(var r=0,i=n;r<i.length;r++){e=i[r].applyToLocalView(t,e)}return e}))},e.prototype.applyLocalMutationsToDocuments=function(e,t,n){var r=Oe();return t.forEach((function(e,t){for(var i=0,o=n;i<o.length;i++){t=o[i].applyToLocalView(e,t)}r=r.insert(e,t)})),r},e.prototype.getDocuments=function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t)}))},e.prototype.getLocalViewOfDocuments=function(e,t){var n=this;return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(r){var i=n.applyLocalMutationsToDocuments(e,t,r),o=Pe();return i.forEach((function(e,t){t||(t=new Gt(e,_e.forDeletedDoc())),o=o.insert(e,t)})),o}))},e.prototype.getDocumentsMatchingQuery=function(e,t,n){return t.isDocumentQuery()?this.getDocumentsMatchingDocumentQuery(e,t.path):t.isCollectionGroupQuery()?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)},e.prototype.getDocumentsMatchingDocumentQuery=function(e,t){return this.getDocument(e,new fe(t)).next((function(e){var t=je();return e instanceof Kt&&(t=t.insert(e.key,e)),t}))},e.prototype.getDocumentsMatchingCollectionGroupQuery=function(e,t,n){var r=this;b(t.path.isEmpty(),"Currently we only support collection group queries at the root.");var i=t.collectionGroup,o=je();return this.indexManager.getCollectionParents(e,i).next((function(a){return Ge.forEach(a,(function(a){var s=t.asCollectionQueryAtPath(a.child(i));return r.getDocumentsMatchingCollectionQuery(e,s,n).next((function(e){e.forEach((function(e,t){o=o.insert(e,t)}))}))})).next((function(){return o}))}))},e.prototype.getDocumentsMatchingCollectionQuery=function(e,t,n){var r,i,o=this;return this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n).next((function(n){return r=n,o.mutationQueue.getAllMutationBatchesAffectingQuery(e,t)})).next((function(t){return i=t,o.addMissingBaseDocuments(e,i,r).next((function(e){r=e;for(var t=0,n=i;t<n.length;t++)for(var o=n[t],a=0,s=o.mutations;a<s.length;a++){var c=s[a],u=c.key,l=r.get(u),h=c.applyToLocalView(l,l,o.localWriteTime);r=h instanceof Kt?r.insert(u,h):r.remove(u)}}))})).next((function(){return r.forEach((function(e,n){t.matches(n)||(r=r.remove(e))})),r}))},e.prototype.addMissingBaseDocuments=function(e,t,n){for(var r=qe(),i=0,o=t;i<o.length;i++)for(var a=0,s=o[i].mutations;a<s.length;a++){var c=s[a];c instanceof Ct&&null===n.get(c.key)&&(r=r.add(c.key))}var u=n;return this.remoteDocumentCache.getEntries(e,r).next((function(e){return e.forEach((function(e,t){null!==t&&t instanceof Kt&&(u=u.insert(e,t))})),u}))},e}(),yr=function(){function e(){this.refsByKey=new xe(vr.compareByKey),this.refsByTarget=new xe(vr.compareByTargetId)}return e.prototype.isEmpty=function(){return this.refsByKey.isEmpty()},e.prototype.addReference=function(e,t){var n=new vr(e,t);this.refsByKey=this.refsByKey.add(n),this.refsByTarget=this.refsByTarget.add(n)},e.prototype.addReferences=function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))},e.prototype.removeReference=function(e,t){this.removeRef(new vr(e,t))},e.prototype.removeReferences=function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))},e.prototype.removeReferencesForId=function(e){var t=this,n=fe.EMPTY,r=new vr(n,e),i=new vr(n,e+1),o=[];return this.refsByTarget.forEachInRange([r,i],(function(e){t.removeRef(e),o.push(e.key)})),o},e.prototype.removeAllReferences=function(){var e=this;this.refsByKey.forEach((function(t){return e.removeRef(t)}))},e.prototype.removeRef=function(e){this.refsByKey=this.refsByKey.delete(e),this.refsByTarget=this.refsByTarget.delete(e)},e.prototype.referencesForId=function(e){var t=fe.EMPTY,n=new vr(t,e),r=new vr(t,e+1),i=qe();return this.refsByTarget.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i},e.prototype.containsKey=function(e){var t=new vr(e,0),n=this.refsByKey.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)},e}(),vr=function(){function e(e,t){this.key=e,this.targetOrBatchId=t}return e.compareByKey=function(e,t){return fe.comparator(e.key,t.key)||X(e.targetOrBatchId,t.targetOrBatchId)},e.compareByTargetId=function(e,t){return X(e.targetOrBatchId,t.targetOrBatchId)||fe.comparator(e.key,t.key)},e}(),br=function(){function e(e,t,n){this.persistence=e,this.queryEngine=t,this.localViewReferences=new yr,this.targetDataByTarget=new De(X),this.targetIdByTarget=new Ht((function(e){return e.canonicalId()})),this.lastDocumentChangeReadTime=_e.MIN,b(e.started,"LocalStore was passed an unstarted persistence implementation"),this.persistence.referenceDelegate.setInMemoryPins(this.localViewReferences),this.mutationQueue=e.getMutationQueue(n),this.remoteDocuments=e.getRemoteDocumentCache(),this.targetCache=e.getTargetCache(),this.localDocuments=new gr(this.remoteDocuments,this.mutationQueue,this.persistence.getIndexManager()),this.queryEngine.setLocalDocumentsView(this.localDocuments)}return e.prototype.start=function(){return this.synchronizeLastDocumentChangeReadTime()},e.prototype.handleUserChange=function(e){return a.__awaiter(this,void 0,void 0,(function(){var t,n,r,i=this;return a.__generator(this,(function(o){switch(o.label){case 0:return t=this.mutationQueue,n=this.localDocuments,[4,this.persistence.runTransaction("Handle user change","readonly-idempotent",(function(r){var o;return i.mutationQueue.getAllMutationBatches(r).next((function(a){return o=a,t=i.persistence.getMutationQueue(e),n=new gr(i.remoteDocuments,t,i.persistence.getIndexManager()),t.getAllMutationBatches(r)})).next((function(e){for(var t=[],i=[],a=qe(),s=0,c=o;s<c.length;s++){var u=c[s];t.push(u.batchId);for(var l=0,h=u.mutations;l<h.length;l++){var d=h[l];a=a.add(d.key)}}for(var f=0,p=e;f<p.length;f++){u=p[f];i.push(u.batchId);for(var m=0,g=u.mutations;m<g.length;m++){d=g[m];a=a.add(d.key)}}return n.getDocuments(r,a).next((function(e){return{affectedDocuments:e,removedBatchIds:t,addedBatchIds:i}}))}))}))];case 1:return r=o.sent(),this.mutationQueue=t,this.localDocuments=n,this.queryEngine.setLocalDocumentsView(this.localDocuments),[2,r]}}))}))},e.prototype.localWrite=function(e){var t,n=this,r=Ce.now(),i=e.reduce((function(e,t){return e.add(t.key)}),qe());return this.persistence.runTransaction("Locally write mutations","readwrite-idempotent",(function(o){return n.localDocuments.getDocuments(o,i).next((function(i){t=i;for(var a=[],s=0,c=e;s<c.length;s++){var u=c[s],l=u.extractBaseValue(t.get(u.key));null!=l&&a.push(new Ct(u.key,l,l.fieldMask(),St.exists(!0)))}return n.mutationQueue.addMutationBatch(o,r,a,e)}))})).then((function(e){var n=e.applyToLocalDocumentSet(t);return{batchId:e.batchId,changes:n}}))},e.prototype.lookupMutationDocuments=function(e){var t=this;return this.persistence.runTransaction("Lookup mutation documents","readonly-idempotent",(function(n){return t.mutationQueue.lookupMutationKeys(n,e).next((function(e){return e?t.localDocuments.getDocuments(n,e):Ge.resolve(null)}))}))},e.prototype.acknowledgeBatch=function(e){var t=this;return this.persistence.runTransaction("Acknowledge batch","readwrite-primary-idempotent",(function(n){var r=e.batch.keys(),i=t.remoteDocuments.newChangeBuffer({trackRemovals:!0});return t.mutationQueue.acknowledgeBatch(n,e.batch,e.streamToken).next((function(){return t.applyWriteToRemoteDocuments(n,e,i)})).next((function(){return i.apply(n)})).next((function(){return t.mutationQueue.performConsistencyCheck(n)})).next((function(){return t.localDocuments.getDocuments(n,r)}))}))},e.prototype.rejectBatch=function(e){var t=this;return this.persistence.runTransaction("Reject batch","readwrite-primary-idempotent",(function(n){var r;return t.mutationQueue.lookupMutationBatch(n,e).next((function(e){return b(null!==e,"Attempt to reject nonexistent batch!"),r=e.keys(),t.mutationQueue.removeMutationBatch(n,e)})).next((function(){return t.mutationQueue.performConsistencyCheck(n)})).next((function(){return t.localDocuments.getDocuments(n,r)}))}))},e.prototype.getHighestUnacknowledgedBatchId=function(){var e=this;return this.persistence.runTransaction("Get highest unacknowledged batch id","readonly-idempotent",(function(t){return e.mutationQueue.getHighestUnacknowledgedBatchId(t)}))},e.prototype.getLastStreamToken=function(){var e=this;return this.persistence.runTransaction("Get last stream token","readonly-idempotent",(function(t){return e.mutationQueue.getLastStreamToken(t)}))},e.prototype.setLastStreamToken=function(e){var t=this;return this.persistence.runTransaction("Set last stream token","readwrite-primary-idempotent",(function(n){return t.mutationQueue.setLastStreamToken(n,e)}))},e.prototype.getLastRemoteSnapshotVersion=function(){var e=this;return this.persistence.runTransaction("Get last remote snapshot version","readonly-idempotent",(function(t){return e.targetCache.getLastRemoteSnapshotVersion(t)}))},e.prototype.applyRemoteEvent=function(t){var n=this,r=t.snapshotVersion,i=this.targetDataByTarget;return this.persistence.runTransaction("Apply remote event","readwrite-primary-idempotent",(function(o){var a=n.remoteDocuments.newChangeBuffer({trackRemovals:!0});i=n.targetDataByTarget;var s=[];D(t.targetChanges,(function(t,a){var c=i.get(t);if(c){s.push(n.targetCache.removeMatchingKeys(o,a.removedDocuments,t).next((function(){return n.targetCache.addMatchingKeys(o,a.addedDocuments,t)})));var u=a.resumeToken;if(u.length>0){var l=c.withResumeToken(u,r).withSequenceNumber(o.currentSequenceNumber);i=i.insert(t,l),e.shouldPersistTargetData(c,l,a)&&s.push(n.targetCache.updateTargetData(o,l))}}}));var c=Pe(),u=qe();if(t.documentUpdates.forEach((function(e,t){u=u.add(e)})),s.push(a.getEntries(o,u).next((function(e){t.documentUpdates.forEach((function(i,u){var l=e.get(i);u instanceof Gt&&u.version.isEqual(_e.MIN)?(a.removeEntry(i,r),c=c.insert(i,u)):null==l||u.version.compareTo(l.version)>0||0===u.version.compareTo(l.version)&&l.hasPendingWrites?(b(!_e.MIN.isEqual(r),"Cannot add a document when the remote version is zero"),a.addEntry(u,r),c=c.insert(i,u)):m("LocalStore","Ignoring outdated watch update for ",i,". Current version:",l.version," Watch version:",u.version),t.resolvedLimboDocuments.has(i)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(o,i))}))}))),!r.isEqual(_e.MIN)){var l=n.targetCache.getLastRemoteSnapshotVersion(o).next((function(e){return b(r.compareTo(e)>=0,"Watch stream reverted to previous snapshot?? "+r+" < "+e),n.targetCache.setTargetsMetadata(o,o.currentSequenceNumber,r)}));s.push(l)}return Ge.waitFor(s).next((function(){return a.apply(o)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(o,c)}))})).then((function(e){return n.targetDataByTarget=i,e}))},e.shouldPersistTargetData=function(e,t,n){return b(t.resumeToken.length>0,"Attempted to persist target data with no resume token"),0===e.resumeToken.length||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=this.RESUME_TOKEN_MAX_AGE_MICROS||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)},e.prototype.notifyLocalViewChanges=function(e){for(var t=this,n=0,r=e;n<r.length;n++){var i=r[n],o=i.targetId;if(this.localViewReferences.addReferences(i.addedKeys,o),this.localViewReferences.removeReferences(i.removedKeys,o),!i.fromCache){var a=this.targetDataByTarget.get(o);b(null!==a,"Can't set limbo-free snapshot version for unknown target: "+o);var s=a.snapshotVersion,c=a.withLastLimboFreeSnapshotVersion(s);this.targetDataByTarget=this.targetDataByTarget.insert(o,c)}}return this.persistence.runTransaction("notifyLocalViewChanges","readwrite-idempotent",(function(n){return Ge.forEach(e,(function(e){return Ge.forEach(e.removedKeys,(function(e){return t.persistence.referenceDelegate.removeReference(n,e)}))}))}))},e.prototype.nextMutationBatch=function(e){var t=this;return this.persistence.runTransaction("Get next mutation batch","readonly-idempotent",(function(n){return void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(n,e)}))},e.prototype.readDocument=function(e){var t=this;return this.persistence.runTransaction("read document","readonly-idempotent",(function(n){return t.localDocuments.getDocument(n,e)}))},e.prototype.allocateTarget=function(e){var t=this;return this.persistence.runTransaction("Allocate target","readwrite-idempotent",(function(n){var r;return t.targetCache.getTargetData(n,e).next((function(i){return i?(r=i,Ge.resolve(r)):t.targetCache.allocateTargetId(n).next((function(i){return r=new kn(e,i,Tn.Listen,n.currentSequenceNumber),t.targetCache.addTargetData(n,r).next((function(){return r}))}))}))})).then((function(n){return null===t.targetDataByTarget.get(n.targetId)&&(t.targetDataByTarget=t.targetDataByTarget.insert(n.targetId,n),t.targetIdByTarget.set(e,n.targetId)),n}))},e.prototype.getTargetData=function(e,t){var n=this.targetIdByTarget.get(t);return void 0!==n?Ge.resolve(this.targetDataByTarget.get(n)):this.targetCache.getTargetData(e,t)},e.prototype.releaseTarget=function(e,t){var n=this,r=this.targetDataByTarget.get(e);b(null!==r,"Tried to release nonexistent target: "+e);var i=t?"readwrite-idempotent":"readwrite-primary-idempotent";return this.persistence.runTransaction("Release target",i,(function(i){var o=n.localViewReferences.removeReferencesForId(e);return t?Ge.resolve():Ge.forEach(o,(function(e){return n.persistence.referenceDelegate.removeReference(i,e)})).next((function(){n.persistence.referenceDelegate.removeTarget(i,r)}))})).then((function(){n.targetDataByTarget=n.targetDataByTarget.remove(e),n.targetIdByTarget.delete(r.target)}))},e.prototype.executeQuery=function(e,t){var n=this,r=_e.MIN,i=qe();return this.persistence.runTransaction("Execute query","readonly-idempotent",(function(o){return n.getTargetData(o,e.toTarget()).next((function(e){if(e)return r=e.lastLimboFreeSnapshotVersion,n.targetCache.getMatchingKeysForTargetId(o,e.targetId).next((function(e){i=e}))})).next((function(){return n.queryEngine.getDocumentsMatchingQuery(o,e,t?r:_e.MIN,t?i:qe())})).next((function(e){return{documents:e,remoteKeys:i}}))}))},e.prototype.remoteDocumentKeys=function(e){var t=this;return this.persistence.runTransaction("Remote document keys","readonly-idempotent",(function(n){return t.targetCache.getMatchingKeysForTargetId(n,e)}))},e.prototype.getActiveClients=function(){return this.persistence.getActiveClients()},e.prototype.removeCachedMutationBatchMetadata=function(e){this.mutationQueue.removeCachedMutationKeys(e)},e.prototype.setNetworkEnabled=function(e){this.persistence.setNetworkEnabled(e)},e.prototype.applyWriteToRemoteDocuments=function(e,t,n){var r=this,i=t.batch,o=i.keys(),a=Ge.resolve();return o.forEach((function(r){a=a.next((function(){return n.getEntry(e,r)})).next((function(e){var o=e,a=t.docVersions.get(r);b(null!==a,"ackVersions should contain every doc in the write."),(!o||o.version.compareTo(a)<0)&&((o=i.applyToRemoteDocument(r,o,t))?n.addEntry(o,t.commitVersion):b(!e,"Mutation batch "+i+" applied to document "+e+" resulted in null"))}))})),a.next((function(){return r.mutationQueue.removeMutationBatch(e,i)}))},e.prototype.collectGarbage=function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary-idempotent",(function(n){return e.collect(n,t.targetDataByTarget)}))},e.prototype.getTarget=function(e){var t=this,n=this.targetDataByTarget.get(e);return n?Promise.resolve(n.target):this.persistence.runTransaction("Get target data","readonly-idempotent",(function(n){return t.targetCache.getTargetDataForTarget(n,e).next((function(e){return e?e.target:null}))}))},e.prototype.getNewDocumentChanges=function(){var e=this;return this.persistence.runTransaction("Get new document changes","readonly-idempotent",(function(t){return e.remoteDocuments.getNewDocumentChanges(t,e.lastDocumentChangeReadTime)})).then((function(t){var n=t.changedDocs,r=t.readTime;return e.lastDocumentChangeReadTime=r,n}))},e.prototype.synchronizeLastDocumentChangeReadTime=function(){return a.__awaiter(this,void 0,void 0,(function(){var e,t=this;return a.__generator(this,(function(n){return this.remoteDocuments instanceof Jt?(e=this.remoteDocuments,[2,this.persistence.runTransaction("Synchronize last document change read time","readonly-idempotent",(function(t){return e.getLastDocumentChange(t)})).then((function(e){var n=e.readTime;t.lastDocumentChangeReadTime=n}))]):[2]}))}))},e.RESUME_TOKEN_MAX_AGE_MICROS=3e8,e}(),wr=function(){function e(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.nextBatchId=1,this.lastStreamToken=T(),this.batchesByDocumentKey=new xe(vr.compareByKey)}return e.prototype.checkEmpty=function(e){return Ge.resolve(0===this.mutationQueue.length)},e.prototype.acknowledgeBatch=function(e,t,n){var r=t.batchId,i=this.indexOfExistingBatchId(r,"acknowledged");b(0===i,"Can only acknowledge the first batch in the mutation queue");var o=this.mutationQueue[i];return b(r===o.batchId,"Queue ordering failure: expected batch "+r+", got batch "+o.batchId),this.lastStreamToken=n,Ge.resolve()},e.prototype.getLastStreamToken=function(e){return Ge.resolve(this.lastStreamToken)},e.prototype.setLastStreamToken=function(e,t){return this.lastStreamToken=t,Ge.resolve()},e.prototype.addMutationBatch=function(e,t,n,r){b(0!==r.length,"Mutation batches should not be empty");var i=this.nextBatchId;(this.nextBatchId++,this.mutationQueue.length>0)&&b(this.mutationQueue[this.mutationQueue.length-1].batchId<i,"Mutation batchIDs must be monotonically increasing order");var o=new ze(i,t,n,r);this.mutationQueue.push(o);for(var a=0,s=r;a<s.length;a++){var c=s[a];this.batchesByDocumentKey=this.batchesByDocumentKey.add(new vr(c.key,i)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast())}return Ge.resolve(o)},e.prototype.lookupMutationBatch=function(e,t){return Ge.resolve(this.findMutationBatch(t))},e.prototype.lookupMutationKeys=function(e,t){var n=this.findMutationBatch(t);return b(null!=n,"Failed to find local mutation batch."),Ge.resolve(n.keys())},e.prototype.getNextMutationBatchAfterBatchId=function(e,t){var n=t+1,r=this.indexOfBatchId(n),i=r<0?0:r;return Ge.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)},e.prototype.getHighestUnacknowledgedBatchId=function(){return Ge.resolve(0===this.mutationQueue.length?-1:this.nextBatchId-1)},e.prototype.getAllMutationBatches=function(e){return Ge.resolve(this.mutationQueue.slice())},e.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,t){var n=this,r=new vr(t,0),i=new vr(t,Number.POSITIVE_INFINITY),o=[];return this.batchesByDocumentKey.forEachInRange([r,i],(function(e){b(t.isEqual(e.key),"Should only iterate over a single key's batches");var r=n.findMutationBatch(e.targetOrBatchId);b(null!==r,"Batches in the index must exist in the main table"),o.push(r)})),Ge.resolve(o)},e.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,t){var n=this,r=new xe(X);return t.forEach((function(e){var t=new vr(e,0),i=new vr(e,Number.POSITIVE_INFINITY);n.batchesByDocumentKey.forEachInRange([t,i],(function(t){b(e.isEqual(t.key),"For each key, should only iterate over a single key's batches"),r=r.add(t.targetOrBatchId)}))})),Ge.resolve(this.findMutationBatches(r))},e.prototype.getAllMutationBatchesAffectingQuery=function(e,t){b(!t.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var n=t.path,r=n.length+1,i=n;fe.isDocumentKey(i)||(i=i.child(""));var o=new vr(new fe(i),0),a=new xe(X);return this.batchesByDocumentKey.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.targetOrBatchId)),!0)}),o),Ge.resolve(this.findMutationBatches(a))},e.prototype.findMutationBatches=function(e){var t=this,n=[];return e.forEach((function(e){var r=t.findMutationBatch(e);null!==r&&n.push(r)})),n},e.prototype.removeMutationBatch=function(e,t){var n=this;b(0===this.indexOfExistingBatchId(t.batchId,"removed"),"Can only remove the first entry of the mutation queue"),this.mutationQueue.shift();var r=this.batchesByDocumentKey;return Ge.forEach(t.mutations,(function(i){var o=new vr(i.key,t.batchId);return r=r.delete(o),n.referenceDelegate.removeMutationReference(e,i.key)})).next((function(){n.batchesByDocumentKey=r}))},e.prototype.removeCachedMutationKeys=function(e){},e.prototype.containsKey=function(e,t){var n=new vr(t,0),r=this.batchesByDocumentKey.firstAfterOrEqual(n);return Ge.resolve(t.isEqual(r&&r.key))},e.prototype.performConsistencyCheck=function(e){return 0===this.mutationQueue.length&&b(this.batchesByDocumentKey.isEmpty(),"Document leak -- detected dangling mutation references when queue is empty."),Ge.resolve()},e.prototype.indexOfExistingBatchId=function(e,t){var n=this.indexOfBatchId(e);return b(n>=0&&n<this.mutationQueue.length,"Batches must exist to be "+t),n},e.prototype.indexOfBatchId=function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId},e.prototype.findMutationBatch=function(e){var t=this.indexOfBatchId(e);if(t<0||t>=this.mutationQueue.length)return null;var n=this.mutationQueue[t];return b(n.batchId===e,"If found batch must match"),n},e}();var Tr,Sr=function(){function e(e,t){this.indexManager=e,this.sizer=t,this.docs=new De(fe.comparator),this.size=0}return e.prototype.addEntry=function(e,t,n){b(!n.isEqual(_e.MIN),"Cannot add a document with a read time of zero");var r=t.key,i=this.docs.get(r),o=i?i.size:0,a=this.sizer(t);return this.docs=this.docs.insert(r,{maybeDocument:t,size:a,readTime:n}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())},e.prototype.removeEntry=function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)},e.prototype.getEntry=function(e,t){var n=this.docs.get(t);return Ge.resolve(n?n.maybeDocument:null)},e.prototype.getEntries=function(e,t){var n=this,r=Oe();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.maybeDocument:null)})),Ge.resolve(r)},e.prototype.getDocumentsMatchingQuery=function(e,t,n){b(!t.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");for(var r=je(),i=new fe(t.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var a=o.getNext(),s=a.key,c=a.value,u=c.maybeDocument,l=c.readTime;if(!t.path.isPrefixOf(s.path))break;l.compareTo(n)<=0||u instanceof Kt&&t.matches(u)&&(r=r.insert(u.key,u))}return Ge.resolve(r)},e.prototype.forEachDocumentKey=function(e,t){return Ge.forEach(this.docs,(function(e){return t(e)}))},e.prototype.getNewDocumentChanges=function(e,t){throw new Error("getNewDocumentChanges() is not supported with MemoryPersistence")},e.prototype.newChangeBuffer=function(t){return new e.RemoteDocumentChangeBuffer(this)},e.prototype.getSize=function(e){return Ge.resolve(this.size)},e.RemoteDocumentChangeBuffer=function(e){function t(t){var n=e.call(this)||this;return n.documentCache=t,n}return a.__extends(t,e),t.prototype.applyChanges=function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i?n.push(t.documentCache.addEntry(e,i,t.readTime)):t.documentCache.removeEntry(r)})),Ge.waitFor(n)},t.prototype.getFromCache=function(e,t){return this.documentCache.getEntry(e,t)},t.prototype.getAllFromCache=function(e,t){return this.documentCache.getEntries(e,t)},t}(Yt),e}(),Ir=function(){function e(e){this.persistence=e,this.targets=new Ht((function(e){return e.canonicalId()})),this.lastRemoteSnapshotVersion=_e.MIN,this.highestTargetId=0,this.highestSequenceNumber=0,this.references=new yr,this.targetCount=0,this.targetIdGenerator=lt.forTargetCache()}return e.prototype.forEachTarget=function(e,t){return this.targets.forEach((function(e,n){return t(n)})),Ge.resolve()},e.prototype.getLastRemoteSnapshotVersion=function(e){return Ge.resolve(this.lastRemoteSnapshotVersion)},e.prototype.getHighestSequenceNumber=function(e){return Ge.resolve(this.highestSequenceNumber)},e.prototype.allocateTargetId=function(e){var t=this.targetIdGenerator.after(this.highestTargetId);return this.highestTargetId=t,Ge.resolve(t)},e.prototype.setTargetsMetadata=function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.highestSequenceNumber&&(this.highestSequenceNumber=t),Ge.resolve()},e.prototype.saveTargetData=function(e){this.targets.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.highestTargetId=t),e.sequenceNumber>this.highestSequenceNumber&&(this.highestSequenceNumber=e.sequenceNumber)},e.prototype.addTargetData=function(e,t){return b(!this.targets.has(t.target),"Adding a target that already exists"),this.saveTargetData(t),this.targetCount+=1,Ge.resolve()},e.prototype.updateTargetData=function(e,t){return b(this.targets.has(t.target),"Updating a non-existent target"),this.saveTargetData(t),Ge.resolve()},e.prototype.removeTargetData=function(e,t){return b(this.targetCount>0,"Removing a target from an empty cache"),b(this.targets.has(t.target),"Removing a non-existent target from the cache"),this.targets.delete(t.target),this.references.removeReferencesForId(t.targetId),this.targetCount-=1,Ge.resolve()},e.prototype.removeTargets=function(e,t,n){var r=this,i=0,o=[];return this.targets.forEach((function(a,s){s.sequenceNumber<=t&&null===n.get(s.targetId)&&(r.targets.delete(a),o.push(r.removeMatchingKeysForTargetId(e,s.targetId)),i++)})),Ge.waitFor(o).next((function(){return i}))},e.prototype.getTargetCount=function(e){return Ge.resolve(this.targetCount)},e.prototype.getTargetData=function(e,t){var n=this.targets.get(t)||null;return Ge.resolve(n)},e.prototype.getTargetDataForTarget=function(e,t){return v("Not yet implemented.")},e.prototype.addMatchingKeys=function(e,t,n){this.references.addReferences(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.addReference(e,t))})),Ge.waitFor(i)},e.prototype.removeMatchingKeys=function(e,t,n){this.references.removeReferences(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.removeReference(e,t))})),Ge.waitFor(i)},e.prototype.removeMatchingKeysForTargetId=function(e,t){return this.references.removeReferencesForId(t),Ge.resolve()},e.prototype.getMatchingKeysForTargetId=function(e,t){var n=this.references.referencesForId(t);return Ge.resolve(n)},e.prototype.containsKey=function(e,t){return Ge.resolve(this.references.containsKey(t))},e}(),Er=function(){function e(e,t){var n=this;this.clientId=e,this.mutationQueues={},this.listenSequence=new ce(0),this._started=!1,this._started=!0,this.referenceDelegate=t(this),this.targetCache=new Ir(this);this.indexManager=new tn,this.remoteDocumentCache=new Sr(this.indexManager,(function(e){return n.referenceDelegate.documentSize(e)}))}return e.createLruPersistence=function(t,n,r){return new e(t,(function(e){return new Dr(e,new Nn(n),r)}))},e.createEagerPersistence=function(t){return new e(t,(function(e){return new _r(e)}))},e.prototype.shutdown=function(){return this._started=!1,Promise.resolve()},Object.defineProperty(e.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),e.prototype.getActiveClients=function(){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(e){return[2,[this.clientId]]}))}))},e.prototype.setPrimaryStateListener=function(e){return e(!0)},e.prototype.setDatabaseDeletedListener=function(){},e.prototype.setNetworkEnabled=function(e){},e.prototype.getIndexManager=function(){return this.indexManager},e.prototype.getMutationQueue=function(e){var t=this.mutationQueues[e.toKey()];return t||(t=new wr(this.indexManager,this.referenceDelegate),this.mutationQueues[e.toKey()]=t),t},e.prototype.getTargetCache=function(){return this.targetCache},e.prototype.getRemoteDocumentCache=function(){return this.remoteDocumentCache},e.prototype.runTransaction=function(e,t,n){var r=this;m("MemoryPersistence","Starting transaction:",e);var i=new Cr(this.listenSequence.next());return this.referenceDelegate.onTransactionStarted(),n(i).next((function(e){return r.referenceDelegate.onTransactionCommitted(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))},e.prototype.mutationQueuesContainKey=function(e,t){return Ge.or((n=this.mutationQueues,r=[],k(n,(function(e,t){return r.push(t)})),r).map((function(n){return function(){return n.containsKey(e,t)}})));var n,r},e}(),Cr=function(e){function t(t){var n=e.call(this)||this;return n.currentSequenceNumber=t,n}return a.__extends(t,e),t}(Rn),_r=function(){function e(e){this.persistence=e,this.inMemoryPins=null,this._orphanedDocuments=null}return Object.defineProperty(e.prototype,"orphanedDocuments",{get:function(){if(this._orphanedDocuments)return this._orphanedDocuments;throw v("orphanedDocuments is only valid during a transaction.")},enumerable:!0,configurable:!0}),e.prototype.setInMemoryPins=function(e){this.inMemoryPins=e},e.prototype.addReference=function(e,t){return this.orphanedDocuments.delete(t),Ge.resolve()},e.prototype.removeReference=function(e,t){return this.orphanedDocuments.add(t),Ge.resolve()},e.prototype.removeMutationReference=function(e,t){return this.orphanedDocuments.add(t),Ge.resolve()},e.prototype.removeTarget=function(e,t){var n=this,r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.orphanedDocuments.add(e)}))})).next((function(){return r.removeTargetData(e,t)}))},e.prototype.onTransactionStarted=function(){this._orphanedDocuments=new Set},e.prototype.onTransactionCommitted=function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ge.forEach(this.orphanedDocuments,(function(r){return t.isReferenced(e,r).next((function(e){e||n.removeEntry(r)}))})).next((function(){return t._orphanedDocuments=null,n.apply(e)}))},e.prototype.updateLimboDocument=function(e,t){var n=this;return this.isReferenced(e,t).next((function(e){e?n.orphanedDocuments.delete(t):n.orphanedDocuments.add(t)}))},e.prototype.documentSize=function(e){return 0},e.prototype.isReferenced=function(e,t){var n=this;return Ge.or([function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.mutationQueuesContainKey(e,t)},function(){return Ge.resolve(n.inMemoryPins.containsKey(t))}])},e}(),Dr=function(){function e(e,t,n){this.persistence=e,this.serializer=t,this.inMemoryPins=null,this.orphanedSequenceNumbers=new Ht((function(e){return Te(e.path)})),this.garbageCollector=new On(this,n)}return e.prototype.onTransactionStarted=function(){},e.prototype.onTransactionCommitted=function(e){return Ge.resolve()},e.prototype.forEachTarget=function(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)},e.prototype.getSequenceNumberCount=function(e){var t=this.orphanedDocumentCount(e);return this.persistence.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))},e.prototype.orphanedDocumentCount=function(e){var t=0;return this.forEachOrphanedDocumentSequenceNumber(e,(function(e){t++})).next((function(){return t}))},e.prototype.forEachOrphanedDocumentSequenceNumber=function(e,t){var n=this;return Ge.forEach(this.orphanedSequenceNumbers,(function(r,i){return n.isPinned(e,r,i).next((function(e){return e?Ge.resolve():t(i)}))}))},e.prototype.setInMemoryPins=function(e){this.inMemoryPins=e},e.prototype.removeTargets=function(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)},e.prototype.removeOrphanedDocuments=function(e,t){var n=this,r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.forEachDocumentKey(e,(function(i){return n.isPinned(e,i,t).next((function(e){e||(r++,o.removeEntry(i))}))})).next((function(){return o.apply(e)})).next((function(){return r}))},e.prototype.removeMutationReference=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),Ge.resolve()},e.prototype.removeTarget=function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)},e.prototype.addReference=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),Ge.resolve()},e.prototype.removeReference=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),Ge.resolve()},e.prototype.updateLimboDocument=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),Ge.resolve()},e.prototype.documentSize=function(e){var t,n=this.serializer.toDbRemoteDocument(e,e.version);if(n.document)t=n.document;else if(n.unknownDocument)t=n.unknownDocument;else{if(!n.noDocument)throw v("Unknown remote document type");t=n.noDocument}return JSON.stringify(t).length},e.prototype.isPinned=function(e,t,n){var r=this;return Ge.or([function(){return r.persistence.mutationQueuesContainKey(e,t)},function(){return Ge.resolve(r.inMemoryPins.containsKey(t))},function(){return r.persistence.getTargetCache().containsKey(e,t)},function(){var e=r.orphanedSequenceNumbers.get(t);return Ge.resolve(void 0!==e&&e>n)}])},e.prototype.getCacheSize=function(e){return this.persistence.getRemoteDocumentCache().getSize(e)},e}(),kr=1e3,Nr=1.5,Ar=6e4,xr=function(){function e(e,t,n,r,i){void 0===n&&(n=kr),void 0===r&&(r=Nr),void 0===i&&(i=Ar),this.queue=e,this.timerId=t,this.initialDelayMs=n,this.backoffFactor=r,this.maxDelayMs=i,this.currentBaseMs=0,this.timerPromise=null,this.lastAttemptTime=Date.now(),this.reset()}return e.prototype.reset=function(){this.currentBaseMs=0},e.prototype.resetToMax=function(){this.currentBaseMs=this.maxDelayMs},e.prototype.backoffAndRun=function(e){var t=this;this.cancel();var n=Math.floor(this.currentBaseMs+this.jitterDelayMs()),r=Math.max(0,Date.now()-this.lastAttemptTime),i=Math.max(0,n-r);this.currentBaseMs>0&&m("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.currentBaseMs+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.timerPromise=this.queue.enqueueAfterDelay(this.timerId,i,(function(){return t.lastAttemptTime=Date.now(),e()})),this.currentBaseMs*=this.backoffFactor,this.currentBaseMs<this.initialDelayMs&&(this.currentBaseMs=this.initialDelayMs),this.currentBaseMs>this.maxDelayMs&&(this.currentBaseMs=this.maxDelayMs)},e.prototype.cancel=function(){null!==this.timerPromise&&(this.timerPromise.cancel(),this.timerPromise=null)},e.prototype.jitterDelayMs=function(){return(Math.random()-.5)*this.currentBaseMs},e}();
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */!function(e){e[e.Initial=0]="Initial",e[e.Starting=1]="Starting",e[e.Open=2]="Open",e[e.Error=3]="Error",e[e.Backoff=4]="Backoff"}(Tr||(Tr={}));var Mr,Lr,Pr=function(){function e(e,t,n,r,i,o){this.queue=e,this.idleTimerId=n,this.connection=r,this.credentialsProvider=i,this.listener=o,this.state=Tr.Initial,this.closeCount=0,this.idleTimer=null,this.stream=null,this.backoff=new xr(e,t)}return e.prototype.isStarted=function(){return this.state===Tr.Starting||this.state===Tr.Open||this.state===Tr.Backoff},e.prototype.isOpen=function(){return this.state===Tr.Open},e.prototype.start=function(){this.state!==Tr.Error?(b(this.state===Tr.Initial,"Already started"),this.auth()):this.performBackoff()},e.prototype.stop=function(){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(e){switch(e.label){case 0:return this.isStarted()?[4,this.close(Tr.Initial)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},e.prototype.inhibitBackoff=function(){b(!this.isStarted(),"Can only inhibit backoff in a stopped state"),this.state=Tr.Initial,this.backoff.reset()},e.prototype.markIdle=function(){var e=this;this.isOpen()&&null===this.idleTimer&&(this.idleTimer=this.queue.enqueueAfterDelay(this.idleTimerId,6e4,(function(){return e.handleIdleCloseTimer()})))},e.prototype.sendRequest=function(e){this.cancelIdleCheck(),this.stream.send(e)},e.prototype.handleIdleCloseTimer=function(){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(e){return this.isOpen()?[2,this.close(Tr.Initial)]:[2]}))}))},e.prototype.cancelIdleCheck=function(){this.idleTimer&&(this.idleTimer.cancel(),this.idleTimer=null)},e.prototype.close=function(e,t){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(n){switch(n.label){case 0:return b(this.isStarted(),"Only started streams should be closed."),b(e===Tr.Error||Xn(t),"Can't provide an error when not in an error state."),this.cancelIdleCheck(),this.backoff.cancel(),this.closeCount++,e!==Tr.Error?this.backoff.reset():t&&t.code===S.RESOURCE_EXHAUSTED?(g(t.toString()),g("Using maximum backoff delay to prevent overloading the backend."),this.backoff.resetToMax()):t&&t.code===S.UNAUTHENTICATED&&this.credentialsProvider.invalidateToken(),null!==this.stream&&(this.tearDown(),this.stream.close(),this.stream=null),this.state=e,[4,this.listener.onClose(t)];case 1:return n.sent(),[2]}}))}))},e.prototype.tearDown=function(){},e.prototype.auth=function(){var e=this;b(this.state===Tr.Initial,"Must be in initial state to auth"),this.state=Tr.Starting;var t=this.getCloseGuardedDispatcher(this.closeCount),n=this.closeCount;this.credentialsProvider.getToken().then((function(t){e.closeCount===n&&e.startStream(t)}),(function(n){t((function(){var t=new I(S.UNKNOWN,"Fetching auth token failed: "+n.message);return e.handleStreamClose(t)}))}))},e.prototype.startStream=function(e){var t=this;b(this.state===Tr.Starting,"Trying to start stream in a non-starting state");var n=this.getCloseGuardedDispatcher(this.closeCount);this.stream=this.startRpc(e),this.stream.onOpen((function(){n((function(){return b(t.state===Tr.Starting,"Expected stream to be in state Starting, but was "+t.state),t.state=Tr.Open,t.listener.onOpen()}))})),this.stream.onClose((function(e){n((function(){return t.handleStreamClose(e)}))})),this.stream.onMessage((function(e){n((function(){return t.onMessage(e)}))}))},e.prototype.performBackoff=function(){var e=this;b(this.state===Tr.Error,"Should only perform backoff when in Error state"),this.state=Tr.Backoff,this.backoff.backoffAndRun((function(){return a.__awaiter(e,void 0,void 0,(function(){return a.__generator(this,(function(e){return b(this.state===Tr.Backoff,"Backoff elapsed but state is now: "+this.state),this.state=Tr.Initial,this.start(),b(this.isStarted(),"PersistentStream should have started"),[2]}))}))}))},e.prototype.handleStreamClose=function(e){return b(this.isStarted(),"Can't handle server close on non-started stream"),m("PersistentStream","close with error: "+e),this.stream=null,this.close(Tr.Error,e)},e.prototype.getCloseGuardedDispatcher=function(e){var t=this;return function(n){t.queue.enqueueAndForget((function(){return t.closeCount===e?n():(m("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},e}(),Or=function(e){function t(t,n,r,i,o){var a=e.call(this,t,ne.ListenStreamConnectionBackoff,ne.ListenStreamIdle,n,r,o)||this;return a.serializer=i,a}return a.__extends(t,e),t.prototype.startRpc=function(e){return this.connection.openStream("Listen",e)},t.prototype.onMessage=function(e){this.backoff.reset();var t=this.serializer.fromWatchChange(e),n=this.serializer.versionFromListenResponse(e);return this.listener.onWatchChange(t,n)},t.prototype.watch=function(e){var t={};t.database=this.serializer.encodedDatabaseId,t.addTarget=this.serializer.toTarget(e);var n=this.serializer.toListenRequestLabels(e);n&&(t.labels=n),this.sendRequest(t)},t.prototype.unwatch=function(e){var t={};t.database=this.serializer.encodedDatabaseId,t.removeTarget=e,this.sendRequest(t)},t}(Pr),Rr=function(e){function t(t,n,r,i,o){var a=e.call(this,t,ne.WriteStreamConnectionBackoff,ne.WriteStreamIdle,n,r,o)||this;return a.serializer=i,a.handshakeComplete_=!1,a.lastStreamToken=T(),a}return a.__extends(t,e),Object.defineProperty(t.prototype,"handshakeComplete",{get:function(){return this.handshakeComplete_},enumerable:!0,configurable:!0}),t.prototype.start=function(){this.handshakeComplete_=!1,e.prototype.start.call(this)},t.prototype.tearDown=function(){this.handshakeComplete_&&this.writeMutations([])},t.prototype.startRpc=function(e){return this.connection.openStream("Write",e)},t.prototype.onMessage=function(e){if(b(!!e.streamToken,"Got a write response without a stream token"),this.lastStreamToken=e.streamToken,this.handshakeComplete_){this.backoff.reset();var t=this.serializer.fromWriteResults(e.writeResults,e.commitTime),n=this.serializer.fromVersion(e.commitTime);return this.listener.onMutationResult(n,t)}return b(!e.writeResults||0===e.writeResults.length,"Got mutation results for handshake"),this.handshakeComplete_=!0,this.listener.onHandshakeComplete()},t.prototype.writeHandshake=function(){b(this.isOpen(),"Writing handshake requires an opened stream"),b(!this.handshakeComplete_,"Handshake already completed");var e={};e.database=this.serializer.encodedDatabaseId,this.sendRequest(e)},t.prototype.writeMutations=function(e){var t=this;b(this.isOpen(),"Writing mutations requires an opened stream"),b(this.handshakeComplete_,"Handshake must be complete before writing mutations"),b(this.lastStreamToken.length>0,"Trying to write mutation without a token");var n={streamToken:this.lastStreamToken,writes:e.map((function(e){return t.serializer.toMutation(e)}))};this.sendRequest(n)},t}(Pr),jr=function(){function e(e,t,n,r){this.queue=e,this.connection=t,this.credentials=n,this.serializer=r}return e.prototype.newPersistentWriteStream=function(e){return new Rr(this.queue,this.connection,this.credentials,this.serializer,e)},e.prototype.newPersistentWatchStream=function(e){return new Or(this.queue,this.connection,this.credentials,this.serializer,e)},e.prototype.commit=function(e){var t=this,n={database:this.serializer.encodedDatabaseId,writes:e.map((function(e){return t.serializer.toMutation(e)}))};return this.invokeRPC("Commit",n).then((function(e){return t.serializer.fromWriteResults(e.writeResults,e.commitTime)}))},e.prototype.lookup=function(e){var t=this,n={database:this.serializer.encodedDatabaseId,documents:e.map((function(e){return t.serializer.toName(e)}))};return this.invokeStreamingRPC("BatchGetDocuments",n).then((function(n){var r=Pe();n.forEach((function(e){var n=t.serializer.fromMaybeDocument(e);r=r.insert(n.key,n)}));var i=[];return e.forEach((function(e){var t=r.get(e);b(!!t,"Missing entity in write response for "+e),i.push(t)})),i}))},e.prototype.invokeRPC=function(e,t){var n=this;return this.credentials.getToken().then((function(r){return n.connection.invokeRPC(e,t,r)})).catch((function(e){throw e.code===S.UNAUTHENTICATED&&n.credentials.invalidateToken(),e}))},e.prototype.invokeStreamingRPC=function(e,t){var n=this;return this.credentials.getToken().then((function(r){return n.connection.invokeStreamingRPC(e,t,r)})).catch((function(e){throw e.code===S.UNAUTHENTICATED&&n.credentials.invalidateToken(),e}))},e}(),Br=function(){function e(e){this.datastore=e,this.readVersions=Fe(),this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return e.prototype.lookup=function(e){return a.__awaiter(this,void 0,void 0,(function(){var t,n=this;return a.__generator(this,(function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new I(S.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,this.datastore.lookup(e)];case 1:return(t=r.sent()).forEach((function(e){e instanceof Gt||e instanceof Kt?n.recordVersion(e):v("Document in a transaction was a "+e.constructor.name)})),[2,t]}}))}))},e.prototype.set=function(e,t){this.write(t.toMutations(e,this.precondition(e))),this.writtenDocs.add(e)},e.prototype.update=function(e,t){try{this.write(t.toMutations(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e)},e.prototype.delete=function(e){this.write([new Dt(e,this.precondition(e))]),this.writtenDocs.add(e)},e.prototype.commit=function(){return a.__awaiter(this,void 0,void 0,(function(){var e;return a.__generator(this,(function(t){switch(t.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;if(e=this.readVersions,this.mutations.forEach((function(t){e=e.remove(t.key)})),!e.isEmpty())throw new I(S.INVALID_ARGUMENT,"Every document read in a transaction must also be written.");return[4,this.datastore.commit(this.mutations)];case 1:return t.sent(),this.committed=!0,[2]}}))}))},e.prototype.recordVersion=function(e){var t;if(e instanceof Kt)t=e.version;else{if(!(e instanceof Gt))throw v("Document in a transaction was a "+e.constructor.name);t=_e.forDeletedDoc()}var n=this.readVersions.get(e.key);if(null!==n){if(!t.isEqual(n))throw new I(S.ABORTED,"Document version changed between two reads.")}else this.readVersions=this.readVersions.insert(e.key,t)},e.prototype.precondition=function(e){var t=this.readVersions.get(e);return!this.writtenDocs.has(e)&&t?St.updateTime(t):St.NONE},e.prototype.preconditionForUpdate=function(e){var t=this.readVersions.get(e);if(!this.writtenDocs.has(e)&&t){if(t.isEqual(_e.forDeletedDoc()))throw new I(S.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return St.updateTime(t)}return St.exists(!0)},e.prototype.write=function(e){this.ensureCommitNotCalled(),this.mutations=this.mutations.concat(e)},e.prototype.ensureCommitNotCalled=function(){b(!this.committed,"A transaction object cannot be used after its update callback has been invoked.")},e}();!function(e){e[e.Unknown=0]="Unknown",e[e.Online=1]="Online",e[e.Offline=2]="Offline"}(Mr||(Mr={})),function(e){e[e.RemoteStore=0]="RemoteStore",e[e.SharedClientState=1]="SharedClientState"}(Lr||(Lr={}));
/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Fr,Vr=function(){function e(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state=Mr.Unknown,this.watchStreamFailures=0,this.onlineStateTimer=null,this.shouldWarnClientIsOffline=!0}return e.prototype.handleWatchStreamStart=function(){var e=this;0===this.watchStreamFailures&&(this.setAndBroadcast(Mr.Unknown),b(null===this.onlineStateTimer,"onlineStateTimer shouldn't be started yet"),this.onlineStateTimer=this.asyncQueue.enqueueAfterDelay(ne.OnlineStateTimeout,1e4,(function(){return e.onlineStateTimer=null,b(e.state===Mr.Unknown,"Timer should be canceled if we transitioned to a different state."),e.logClientOfflineWarningIfNecessary("Backend didn't respond within 10 seconds."),e.setAndBroadcast(Mr.Offline),Promise.resolve()})))},e.prototype.handleWatchStreamFailure=function(e){this.state===Mr.Online?(this.setAndBroadcast(Mr.Unknown),b(0===this.watchStreamFailures,"watchStreamFailures must be 0"),b(null===this.onlineStateTimer,"onlineStateTimer must be null")):(this.watchStreamFailures++,this.watchStreamFailures>=1&&(this.clearOnlineStateTimer(),this.logClientOfflineWarningIfNecessary("Connection failed 1 times. Most recent error: "+e.toString()),this.setAndBroadcast(Mr.Offline)))},e.prototype.set=function(e){this.clearOnlineStateTimer(),this.watchStreamFailures=0,e===Mr.Online&&(this.shouldWarnClientIsOffline=!1),this.setAndBroadcast(e)},e.prototype.setAndBroadcast=function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))},e.prototype.logClientOfflineWarningIfNecessary=function(e){var t="Could not reach Cloud Firestore backend. "+e+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.shouldWarnClientIsOffline?(g(t),this.shouldWarnClientIsOffline=!1):m("OnlineStateTracker",t)},e.prototype.clearOnlineStateTimer=function(){null!==this.onlineStateTimer&&(this.onlineStateTimer.cancel(),this.onlineStateTimer=null)},e}();function qr(e){switch(e){case S.OK:return v("Treated status OK as error");case S.CANCELLED:case S.UNKNOWN:case S.DEADLINE_EXCEEDED:case S.RESOURCE_EXHAUSTED:case S.INTERNAL:case S.UNAVAILABLE:case S.UNAUTHENTICATED:return!1;case S.INVALID_ARGUMENT:case S.NOT_FOUND:case S.ALREADY_EXISTS:case S.PERMISSION_DENIED:case S.FAILED_PRECONDITION:case S.ABORTED:case S.OUT_OF_RANGE:case S.UNIMPLEMENTED:case S.DATA_LOSS:return!0;default:return v("Unknown status code: "+e)}}function Ur(e){if(void 0===e)return g("GRPC error has no .code"),S.UNKNOWN;switch(e){case Fr.OK:return S.OK;case Fr.CANCELLED:return S.CANCELLED;case Fr.UNKNOWN:return S.UNKNOWN;case Fr.DEADLINE_EXCEEDED:return S.DEADLINE_EXCEEDED;case Fr.RESOURCE_EXHAUSTED:return S.RESOURCE_EXHAUSTED;case Fr.INTERNAL:return S.INTERNAL;case Fr.UNAVAILABLE:return S.UNAVAILABLE;case Fr.UNAUTHENTICATED:return S.UNAUTHENTICATED;case Fr.INVALID_ARGUMENT:return S.INVALID_ARGUMENT;case Fr.NOT_FOUND:return S.NOT_FOUND;case Fr.ALREADY_EXISTS:return S.ALREADY_EXISTS;case Fr.PERMISSION_DENIED:return S.PERMISSION_DENIED;case Fr.FAILED_PRECONDITION:return S.FAILED_PRECONDITION;case Fr.ABORTED:return S.ABORTED;case Fr.OUT_OF_RANGE:return S.OUT_OF_RANGE;case Fr.UNIMPLEMENTED:return S.UNIMPLEMENTED;case Fr.DATA_LOSS:return S.DATA_LOSS;default:return v("Unknown status code: "+e)}}function Wr(e){if(void 0===e)return Fr.OK;switch(e){case S.OK:return Fr.OK;case S.CANCELLED:return Fr.CANCELLED;case S.UNKNOWN:return Fr.UNKNOWN;case S.DEADLINE_EXCEEDED:return Fr.DEADLINE_EXCEEDED;case S.RESOURCE_EXHAUSTED:return Fr.RESOURCE_EXHAUSTED;case S.INTERNAL:return Fr.INTERNAL;case S.UNAVAILABLE:return Fr.UNAVAILABLE;case S.UNAUTHENTICATED:return Fr.UNAUTHENTICATED;case S.INVALID_ARGUMENT:return Fr.INVALID_ARGUMENT;case S.NOT_FOUND:return Fr.NOT_FOUND;case S.ALREADY_EXISTS:return Fr.ALREADY_EXISTS;case S.PERMISSION_DENIED:return Fr.PERMISSION_DENIED;case S.FAILED_PRECONDITION:return Fr.FAILED_PRECONDITION;case S.ABORTED:return Fr.ABORTED;case S.OUT_OF_RANGE:return Fr.OUT_OF_RANGE;case S.UNIMPLEMENTED:return Fr.UNIMPLEMENTED;case S.DATA_LOSS:return Fr.DATA_LOSS;default:return v("Unknown status code: "+e)}}!function(e){e[e.OK=0]="OK",e[e.CANCELLED=1]="CANCELLED",e[e.UNKNOWN=2]="UNKNOWN",e[e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",e[e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",e[e.NOT_FOUND=5]="NOT_FOUND",e[e.ALREADY_EXISTS=6]="ALREADY_EXISTS",e[e.PERMISSION_DENIED=7]="PERMISSION_DENIED",e[e.UNAUTHENTICATED=16]="UNAUTHENTICATED",e[e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",e[e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",e[e.ABORTED=10]="ABORTED",e[e.OUT_OF_RANGE=11]="OUT_OF_RANGE",e[e.UNIMPLEMENTED=12]="UNIMPLEMENTED",e[e.INTERNAL=13]="INTERNAL",e[e.UNAVAILABLE=14]="UNAVAILABLE",e[e.DATA_LOSS=15]="DATA_LOSS"}(Fr||(Fr={}));
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var zr,Kr,Gr=function(){function e(e){this.comparator=e?function(t,n){return e(t,n)||fe.comparator(t.key,n.key)}:function(e,t){return fe.comparator(e.key,t.key)},this.keyedMap=je(),this.sortedSet=new De(this.comparator)}return e.emptySet=function(t){return new e(t.comparator)},e.prototype.has=function(e){return null!=this.keyedMap.get(e)},e.prototype.get=function(e){return this.keyedMap.get(e)},e.prototype.first=function(){return this.sortedSet.minKey()},e.prototype.last=function(){return this.sortedSet.maxKey()},e.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},e.prototype.indexOf=function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1},Object.defineProperty(e.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!0,configurable:!0}),e.prototype.forEach=function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))},e.prototype.add=function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))},e.prototype.delete=function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this},e.prototype.isEqual=function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},e.prototype.toString=function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"},e.prototype.copy=function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r},e}();
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */!function(e){e[e.Added=0]="Added",e[e.Removed=1]="Removed",e[e.Modified=2]="Modified",e[e.Metadata=3]="Metadata"}(zr||(zr={})),function(e){e[e.Local=0]="Local",e[e.Synced=1]="Synced"}(Kr||(Kr={}));var Qr,Hr=function(){function e(){this.changeMap=new De(fe.comparator)}return e.prototype.track=function(e){var t=e.doc.key,n=this.changeMap.get(t);n?e.type!==zr.Added&&n.type===zr.Metadata?this.changeMap=this.changeMap.insert(t,e):e.type===zr.Metadata&&n.type!==zr.Removed?this.changeMap=this.changeMap.insert(t,{type:n.type,doc:e.doc}):e.type===zr.Modified&&n.type===zr.Modified?this.changeMap=this.changeMap.insert(t,{type:zr.Modified,doc:e.doc}):e.type===zr.Modified&&n.type===zr.Added?this.changeMap=this.changeMap.insert(t,{type:zr.Added,doc:e.doc}):e.type===zr.Removed&&n.type===zr.Added?this.changeMap=this.changeMap.remove(t):e.type===zr.Removed&&n.type===zr.Modified?this.changeMap=this.changeMap.insert(t,{type:zr.Removed,doc:n.doc}):e.type===zr.Added&&n.type===zr.Removed?this.changeMap=this.changeMap.insert(t,{type:zr.Modified,doc:e.doc}):v("unsupported combination of changes: "+JSON.stringify(e)+" after "+JSON.stringify(n)):this.changeMap=this.changeMap.insert(t,e)},e.prototype.getChanges=function(){var e=[];return this.changeMap.inorderTraversal((function(t,n){e.push(n)})),e},e}(),Yr=function(){function e(e,t,n,r,i,o,a,s){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=s}return e.fromInitialDocuments=function(t,n,r,i){var o=[];return n.forEach((function(e){o.push({type:zr.Added,doc:e})})),new e(t,n,Gr.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&this.query.isEqual(e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0},e}(),Jr=function(){function e(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return e.createSynthesizedRemoteEventForCurrentChange=function(t,n){var r,i=((r={})[t]=Xr.createSynthesizedTargetChangeForCurrentChange(t,n),r);return new e(_e.MIN,i,We(),Pe(),qe())},e}(),Xr=function(){function e(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return e.createSynthesizedTargetChangeForCurrentChange=function(t,n){return new e(T(),n,qe(),qe(),qe())},e}(),$r=function(e,t,n,r){this.updatedTargetIds=e,this.removedTargetIds=t,this.key=n,this.newDoc=r},Zr=function(e,t){this.targetId=e,this.existenceFilter=t};!function(e){e[e.NoChange=0]="NoChange",e[e.Added=1]="Added",e[e.Removed=2]="Removed",e[e.Current=3]="Current",e[e.Reset=4]="Reset"}(Qr||(Qr={}));var ei=function(e,t,n,r){void 0===n&&(n=T()),void 0===r&&(r=null),this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r},ti=function(){function e(){this.pendingResponses=0,this.documentChanges=ii(),this._resumeToken=T(),this._current=!1,this._hasPendingChanges=!0}return Object.defineProperty(e.prototype,"current",{get:function(){return this._current},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"resumeToken",{get:function(){return this._resumeToken},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isPending",{get:function(){return 0!==this.pendingResponses},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasPendingChanges",{get:function(){return this._hasPendingChanges},enumerable:!0,configurable:!0}),e.prototype.updateResumeToken=function(e){e.length>0&&(this._hasPendingChanges=!0,this._resumeToken=e)},e.prototype.toTargetChange=function(){var e=qe(),t=qe(),n=qe();return this.documentChanges.forEach((function(r,i){switch(i){case zr.Added:e=e.add(r);break;case zr.Modified:t=t.add(r);break;case zr.Removed:n=n.add(r);break;default:v("Encountered invalid change type: "+i)}})),new Xr(this._resumeToken,this._current,e,t,n)},e.prototype.clearPendingChanges=function(){this._hasPendingChanges=!1,this.documentChanges=ii()},e.prototype.addDocumentChange=function(e,t){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.insert(e,t)},e.prototype.removeDocumentChange=function(e){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.remove(e)},e.prototype.recordPendingTargetRequest=function(){this.pendingResponses+=1},e.prototype.recordTargetResponse=function(){this.pendingResponses-=1},e.prototype.markCurrent=function(){this._hasPendingChanges=!0,this._current=!0},e}(),ni=function(){function e(e){this.metadataProvider=e,this.targetStates={},this.pendingDocumentUpdates=Pe(),this.pendingDocumentTargetMapping=ri(),this.pendingTargetResets=new xe(X)}return e.prototype.handleDocumentChange=function(e){for(var t=0,n=e.updatedTargetIds;t<n.length;t++){var r=n[t];e.newDoc instanceof Kt?this.addDocumentToTarget(r,e.newDoc):e.newDoc instanceof Gt&&this.removeDocumentFromTarget(r,e.key,e.newDoc)}for(var i=0,o=e.removedTargetIds;i<o.length;i++){r=o[i];this.removeDocumentFromTarget(r,e.key,e.newDoc)}},e.prototype.handleTargetChange=function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.ensureTargetState(n);switch(e.state){case Qr.NoChange:t.isActiveTarget(n)&&r.updateResumeToken(e.resumeToken);break;case Qr.Added:r.recordTargetResponse(),r.isPending||r.clearPendingChanges(),r.updateResumeToken(e.resumeToken);break;case Qr.Removed:r.recordTargetResponse(),r.isPending||t.removeTarget(n),b(!e.cause,"WatchChangeAggregator does not handle errored targets");break;case Qr.Current:t.isActiveTarget(n)&&(r.markCurrent(),r.updateResumeToken(e.resumeToken));break;case Qr.Reset:t.isActiveTarget(n)&&(t.resetTarget(n),r.updateResumeToken(e.resumeToken));break;default:v("Unknown target watch change state: "+e.state)}}))},e.prototype.forEachTarget=function(e,t){e.targetIds.length>0?e.targetIds.forEach(t):D(this.targetStates,t)},e.prototype.handleExistenceFilter=function(e){var t=e.targetId,n=e.existenceFilter.count,r=this.targetDataForActiveTarget(t);if(r){var i=r.target;if(i.isDocumentQuery())if(0===n){var o=new fe(i.path);this.removeDocumentFromTarget(t,o,new Gt(o,_e.forDeletedDoc()))}else b(1===n,"Single document existence filter with count: "+n);else this.getCurrentDocumentCountForTarget(t)!==n&&(this.resetTarget(t),this.pendingTargetResets=this.pendingTargetResets.add(t))}},e.prototype.createRemoteEvent=function(e){var t=this,n={};D(this.targetStates,(function(r,i){var o=t.targetDataForActiveTarget(r);if(o){if(i.current&&o.target.isDocumentQuery()){var a=new fe(o.target.path);null!==t.pendingDocumentUpdates.get(a)||t.targetContainsDocument(r,a)||t.removeDocumentFromTarget(r,a,new Gt(a,e))}i.hasPendingChanges&&(n[r]=i.toTargetChange(),i.clearPendingChanges())}}));var r=qe();this.pendingDocumentTargetMapping.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.targetDataForActiveTarget(e);return!n||n.purpose===Tn.LimboResolution||(i=!1,!1)})),i&&(r=r.add(e))}));var i=new Jr(e,n,this.pendingTargetResets,this.pendingDocumentUpdates,r);return this.pendingDocumentUpdates=Pe(),this.pendingDocumentTargetMapping=ri(),this.pendingTargetResets=new xe(X),i},e.prototype.addDocumentToTarget=function(e,t){if(this.isActiveTarget(e)){var n=this.targetContainsDocument(e,t.key)?zr.Modified:zr.Added;this.ensureTargetState(e).addDocumentChange(t.key,n),this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(t.key,t),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(t.key,this.ensureDocumentTargetMapping(t.key).add(e))}},e.prototype.removeDocumentFromTarget=function(e,t,n){if(this.isActiveTarget(e)){var r=this.ensureTargetState(e);this.targetContainsDocument(e,t)?r.addDocumentChange(t,zr.Removed):r.removeDocumentChange(t),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(t,this.ensureDocumentTargetMapping(t).delete(e)),n&&(this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(t,n))}},e.prototype.removeTarget=function(e){delete this.targetStates[e]},e.prototype.getCurrentDocumentCountForTarget=function(e){var t=this.ensureTargetState(e).toTargetChange();return this.metadataProvider.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size},e.prototype.recordPendingTargetRequest=function(e){this.ensureTargetState(e).recordPendingTargetRequest()},e.prototype.ensureTargetState=function(e){return this.targetStates[e]||(this.targetStates[e]=new ti),this.targetStates[e]},e.prototype.ensureDocumentTargetMapping=function(e){var t=this.pendingDocumentTargetMapping.get(e);return t||(t=new xe(X),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(e,t)),t},e.prototype.isActiveTarget=function(e){var t=null!==this.targetDataForActiveTarget(e);return t||m("WatchChangeAggregator","Detected inactive target",e),t},e.prototype.targetDataForActiveTarget=function(e){var t=this.targetStates[e];return t&&t.isPending?null:this.metadataProvider.getTargetDataForTarget(e)},e.prototype.resetTarget=function(e){var t=this;b(!this.targetStates[e].isPending,"Should only reset active targets"),this.targetStates[e]=new ti,this.metadataProvider.getRemoteKeysForTarget(e).forEach((function(n){t.removeDocumentFromTarget(e,n,null)}))},e.prototype.targetContainsDocument=function(e,t){return this.metadataProvider.getRemoteKeysForTarget(e).has(t)},e}();function ri(){return new De(fe.comparator)}function ii(){return new De(fe.comparator)}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var oi="RemoteStore",ai=function(){function e(e,t,n,r,i){var o=this;this.localStore=e,this.datastore=t,this.writePipeline=[],this.listenTargets={},this.watchChangeAggregator=null,this.networkEnabled=!1,this.isPrimary=!1,this.connectivityMonitor=i,this.connectivityMonitor.addCallback((function(e){n.enqueueAndForget((function(){return a.__awaiter(o,void 0,void 0,(function(){return a.__generator(this,(function(e){switch(e.label){case 0:return this.canUseNetwork()?(m(oi,"Restarting streams for network reachability change."),[4,this.restartNetwork()]):[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))})),this.onlineStateTracker=new Vr(n,r),this.watchStream=this.datastore.newPersistentWatchStream({onOpen:this.onWatchStreamOpen.bind(this),onClose:this.onWatchStreamClose.bind(this),onWatchChange:this.onWatchStreamChange.bind(this)}),this.writeStream=this.datastore.newPersistentWriteStream({onOpen:this.onWriteStreamOpen.bind(this),onClose:this.onWriteStreamClose.bind(this),onHandshakeComplete:this.onWriteHandshakeComplete.bind(this),onMutationResult:this.onMutationResult.bind(this)})}return e.prototype.start=function(){return this.enableNetwork()},e.prototype.enableNetwork=function(){return a.__awaiter(this,void 0,void 0,(function(){var e;return a.__generator(this,(function(t){switch(t.label){case 0:return this.networkEnabled=!0,this.canUseNetwork()?(e=this.writeStream,[4,this.localStore.getLastStreamToken()]):[3,3];case 1:return e.lastStreamToken=t.sent(),this.shouldStartWatchStream()?this.startWatchStream():this.onlineStateTracker.set(Mr.Unknown),[4,this.fillWritePipeline()];case 2:t.sent(),t.label=3;case 3:return[2]}}))}))},e.prototype.disableNetwork=function(){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(e){switch(e.label){case 0:return this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return e.sent(),this.onlineStateTracker.set(Mr.Offline),[2]}}))}))},e.prototype.disableNetworkInternal=function(){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(e){switch(e.label){case 0:return[4,this.writeStream.stop()];case 1:return e.sent(),[4,this.watchStream.stop()];case 2:return e.sent(),this.writePipeline.length>0&&(m(oi,"Stopping write stream with "+this.writePipeline.length+" pending writes"),this.writePipeline=[]),this.cleanUpWatchStreamState(),[2]}}))}))},e.prototype.shutdown=function(){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(e){switch(e.label){case 0:return m(oi,"RemoteStore shutting down."),this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return e.sent(),this.connectivityMonitor.shutdown(),this.onlineStateTracker.set(Mr.Unknown),[2]}}))}))},e.prototype.listen=function(e){C(this.listenTargets,e.targetId)||(this.listenTargets[e.targetId]=e,this.shouldStartWatchStream()?this.startWatchStream():this.watchStream.isOpen()&&this.sendWatchRequest(e))},e.prototype.unlisten=function(e){b(C(this.listenTargets,e),"unlisten called on target no currently watched: "+e),delete this.listenTargets[e],this.watchStream.isOpen()&&this.sendUnwatchRequest(e),N(this.listenTargets)&&(this.watchStream.isOpen()?this.watchStream.markIdle():this.canUseNetwork()&&this.onlineStateTracker.set(Mr.Unknown))},e.prototype.getTargetDataForTarget=function(e){return this.listenTargets[e]||null},e.prototype.getRemoteKeysForTarget=function(e){return this.syncEngine.getRemoteKeysForTarget(e)},e.prototype.sendWatchRequest=function(e){this.watchChangeAggregator.recordPendingTargetRequest(e.targetId),this.watchStream.watch(e)},e.prototype.sendUnwatchRequest=function(e){this.watchChangeAggregator.recordPendingTargetRequest(e),this.watchStream.unwatch(e)},e.prototype.startWatchStream=function(){b(this.shouldStartWatchStream(),"startWatchStream() called when shouldStartWatchStream() is false."),this.watchChangeAggregator=new ni(this),this.watchStream.start(),this.onlineStateTracker.handleWatchStreamStart()},e.prototype.shouldStartWatchStream=function(){return this.canUseNetwork()&&!this.watchStream.isStarted()&&!N(this.listenTargets)},e.prototype.canUseNetwork=function(){return this.isPrimary&&this.networkEnabled},e.prototype.cleanUpWatchStreamState=function(){this.watchChangeAggregator=null},e.prototype.onWatchStreamOpen=function(){return a.__awaiter(this,void 0,void 0,(function(){var e=this;return a.__generator(this,(function(t){return D(this.listenTargets,(function(t,n){e.sendWatchRequest(n)})),[2]}))}))},e.prototype.onWatchStreamClose=function(e){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(t){return void 0===e&&b(!this.shouldStartWatchStream(),"Watch stream was stopped gracefully while still needed."),this.cleanUpWatchStreamState(),this.shouldStartWatchStream()?(this.onlineStateTracker.handleWatchStreamFailure(e),this.startWatchStream()):this.onlineStateTracker.set(Mr.Unknown),[2]}))}))},e.prototype.onWatchStreamChange=function(e,t){return a.__awaiter(this,void 0,void 0,(function(){var n;return a.__generator(this,(function(r){switch(r.label){case 0:return this.onlineStateTracker.set(Mr.Online),e instanceof ei&&e.state===Qr.Removed&&e.cause?[2,this.handleTargetError(e)]:(e instanceof $r?this.watchChangeAggregator.handleDocumentChange(e):e instanceof Zr?this.watchChangeAggregator.handleExistenceFilter(e):(b(e instanceof ei,"Expected watchChange to be an instance of WatchTargetChange"),this.watchChangeAggregator.handleTargetChange(e)),t.isEqual(_e.MIN)?[3,3]:[4,this.localStore.getLastRemoteSnapshotVersion()]);case 1:return n=r.sent(),t.compareTo(n)>=0?[4,this.raiseWatchSnapshot(t)]:[3,3];case 2:r.sent(),r.label=3;case 3:return[2]}}))}))},e.prototype.raiseWatchSnapshot=function(e){var t=this;b(!e.isEqual(_e.MIN),"Can't raise event for unknown SnapshotVersion");var n=this.watchChangeAggregator.createRemoteEvent(e);return D(n.targetChanges,(function(n,r){if(r.resumeToken.length>0){var i=t.listenTargets[n];i&&(t.listenTargets[n]=i.withResumeToken(r.resumeToken,e))}})),n.targetMismatches.forEach((function(e){var n=t.listenTargets[e];if(n){t.listenTargets[e]=n.withResumeToken(T(),n.snapshotVersion),t.sendUnwatchRequest(e);var r=new kn(n.target,e,Tn.ExistenceFilterMismatch,n.sequenceNumber);t.sendWatchRequest(r)}})),this.syncEngine.applyRemoteEvent(n)},e.prototype.handleTargetError=function(e){var t=this;b(!!e.cause,"Handling target error without a cause");var n=e.cause,r=Promise.resolve();return e.targetIds.forEach((function(e){r=r.then((function(){return a.__awaiter(t,void 0,void 0,(function(){return a.__generator(this,(function(t){return C(this.listenTargets,e)?(delete this.listenTargets[e],this.watchChangeAggregator.removeTarget(e),[2,this.syncEngine.rejectListen(e,n)]):[2]}))}))}))})),r},e.prototype.fillWritePipeline=function(){return a.__awaiter(this,void 0,void 0,(function(){var e,t;return a.__generator(this,(function(n){switch(n.label){case 0:return this.canAddToWritePipeline()?(e=this.writePipeline.length>0?this.writePipeline[this.writePipeline.length-1].batchId:-1,[4,this.localStore.nextMutationBatch(e)]):[3,4];case 1:return null!==(t=n.sent())?[3,2]:(0===this.writePipeline.length&&this.writeStream.markIdle(),[3,4]);case 2:return this.addToWritePipeline(t),[4,this.fillWritePipeline()];case 3:n.sent(),n.label=4;case 4:return this.shouldStartWriteStream()&&this.startWriteStream(),[2]}}))}))},e.prototype.canAddToWritePipeline=function(){return this.canUseNetwork()&&this.writePipeline.length<10},e.prototype.outstandingWrites=function(){return this.writePipeline.length},e.prototype.addToWritePipeline=function(e){b(this.canAddToWritePipeline(),"addToWritePipeline called when pipeline is full"),this.writePipeline.push(e),this.writeStream.isOpen()&&this.writeStream.handshakeComplete&&this.writeStream.writeMutations(e.mutations)},e.prototype.shouldStartWriteStream=function(){return this.canUseNetwork()&&!this.writeStream.isStarted()&&this.writePipeline.length>0},e.prototype.startWriteStream=function(){b(this.shouldStartWriteStream(),"startWriteStream() called when shouldStartWriteStream() is false."),this.writeStream.start()},e.prototype.onWriteStreamOpen=function(){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(e){return this.writeStream.writeHandshake(),[2]}))}))},e.prototype.onWriteHandshakeComplete=function(){var e=this;return this.localStore.setLastStreamToken(this.writeStream.lastStreamToken).then((function(){for(var t=0,n=e.writePipeline;t<n.length;t++){var r=n[t];e.writeStream.writeMutations(r.mutations)}})).catch(Un)},e.prototype.onMutationResult=function(e,t){var n=this;b(this.writePipeline.length>0,"Got result for empty write pipeline");var r=this.writePipeline.shift(),i=Ke.from(r,e,t,this.writeStream.lastStreamToken);return this.syncEngine.applySuccessfulWrite(i).then((function(){return n.fillWritePipeline()}))},e.prototype.onWriteStreamClose=function(e){return a.__awaiter(this,void 0,void 0,(function(){var t=this;return a.__generator(this,(function(n){return void 0===e&&b(!this.shouldStartWriteStream(),"Write stream was stopped gracefully while still needed."),e&&this.writePipeline.length>0?(void 0,[2,(this.writeStream.handshakeComplete?this.handleWriteError(e):this.handleHandshakeError(e)).then((function(){t.shouldStartWriteStream()&&t.startWriteStream()}))]):[2]}))}))},e.prototype.handleHandshakeError=function(e){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(t){return qr(e.code)?(m(oi,"RemoteStore error before completed handshake; resetting stream token: ",this.writeStream.lastStreamToken),this.writeStream.lastStreamToken=T(),[2,this.localStore.setLastStreamToken(T()).catch(Un)]):[2]}))}))},e.prototype.handleWriteError=function(e){return a.__awaiter(this,void 0,void 0,(function(){var t,n=this;return a.__generator(this,(function(r){return qr(i=e.code)&&i!==S.ABORTED?(t=this.writePipeline.shift(),this.writeStream.inhibitBackoff(),[2,this.syncEngine.rejectFailedWrite(t.batchId,e).then((function(){return n.fillWritePipeline()}))]):[2];var i}))}))},e.prototype.createTransaction=function(){return new Br(this.datastore)},e.prototype.restartNetwork=function(){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(e){switch(e.label){case 0:return this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return e.sent(),this.onlineStateTracker.set(Mr.Unknown),[4,this.enableNetwork()];case 2:return e.sent(),[2]}}))}))},e.prototype.handleCredentialChange=function(){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(e){switch(e.label){case 0:return this.canUseNetwork()?(m(oi,"RemoteStore restarting streams for new credential"),[4,this.restartNetwork()]):[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},e.prototype.applyPrimaryState=function(e){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(t){switch(t.label){case 0:return this.isPrimary=e,e&&this.networkEnabled?[4,this.enableNetwork()]:[3,2];case 1:return t.sent(),[3,4];case 2:return e?[3,4]:[4,this.disableNetworkInternal()];case 3:t.sent(),this.onlineStateTracker.set(Mr.Unknown),t.label=4;case 4:return[2]}}))}))},e}(),si=function(){function e(e,t){if(x("GeoPoint",arguments,2),P("GeoPoint","number",1,e),P("GeoPoint","number",2,t),!isFinite(e)||e<-90||e>90)throw new I(S.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new I(S.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}return Object.defineProperty(e.prototype,"latitude",{get:function(){return this._lat},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"longitude",{get:function(){return this._long},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(e){return this._lat===e._lat&&this._long===e._long},e.prototype._compareTo=function(e){return X(this._lat,e._lat)||X(this._long,e._long)},e}(),ci=function(){function e(){}return e.prototype.applyToLocalView=function(e,t){return new Bt(t,e)},e.prototype.applyToRemoteDocument=function(e,t){return t},e.prototype.computeBaseValue=function(e){return null},e.prototype.isEqual=function(t){return t instanceof e},e.instance=new e,e}(),ui=function(){function e(e){this.elements=e}return e.prototype.applyToLocalView=function(e,t){return this.apply(e)},e.prototype.applyToRemoteDocument=function(e,t){return this.apply(e)},e.prototype.apply=function(e){for(var t=di(e),n=function(e){t.find((function(t){return t.isEqual(e)}))||t.push(e)},r=0,i=this.elements;r<i.length;r++){n(i[r])}return new Wt(t)},e.prototype.computeBaseValue=function(e){return null},e.prototype.isEqual=function(t){return t instanceof e&&$(t.elements,this.elements)},e}(),li=function(){function e(e){this.elements=e}return e.prototype.applyToLocalView=function(e,t){return this.apply(e)},e.prototype.applyToRemoteDocument=function(e,t){return this.apply(e)},e.prototype.apply=function(e){for(var t=di(e),n=function(e){t=t.filter((function(t){return!t.isEqual(e)}))},r=0,i=this.elements;r<i.length;r++){n(i[r])}return new Wt(t)},e.prototype.computeBaseValue=function(e){return null},e.prototype.isEqual=function(t){return t instanceof e&&$(t.elements,this.elements)},e}(),hi=function(){function e(e){this.operand=e}return e.prototype.applyToLocalView=function(e,t){var n=this.computeBaseValue(e);if(n instanceof Pt&&this.operand instanceof Pt){var r=n.internalValue+this.operand.internalValue;return new Pt(r)}r=n.internalValue+this.operand.internalValue;return new Ot(r)},e.prototype.applyToRemoteDocument=function(e,t){return b(null!==t,"Didn't receive transformResult for NUMERIC_ADD transform"),t},e.prototype.computeBaseValue=function(e){return e instanceof Mt?e:new Pt(0)},e.prototype.isEqual=function(t){return t instanceof e&&this.operand.isEqual(t.operand)},e}();function di(e){return e instanceof Wt?e.internalValue.slice():[]}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fi,pi,mi=function(){function e(e){this.count=e}return e.prototype.isEqual=function(e){return e&&e.count===this.count},e}(),gi=((fi={})[lr.ASCENDING.name]="ASCENDING",fi[lr.DESCENDING.name]="DESCENDING",fi),yi=((pi={})[rr.LESS_THAN.name]="LESS_THAN",pi[rr.LESS_THAN_OR_EQUAL.name]="LESS_THAN_OR_EQUAL",pi[rr.GREATER_THAN.name]="GREATER_THAN",pi[rr.GREATER_THAN_OR_EQUAL.name]="GREATER_THAN_OR_EQUAL",pi[rr.EQUAL.name]="EQUAL",pi[rr.ARRAY_CONTAINS.name]="ARRAY_CONTAINS",pi[rr.IN.name]="IN",pi[rr.ARRAY_CONTAINS_ANY.name]="ARRAY_CONTAINS_ANY",pi),vi=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bi(e,t){b(!Xn(e),t+" is missing")}function wi(e){return"number"==typeof e?e:"string"==typeof e?Number(e):v("can't parse "+e)}var Ti=function(){function e(e,t){this.databaseId=e,this.options=t}return e.prototype.emptyByteString=function(){return this.options.useProto3Json?"":new Uint8Array(0)},e.prototype.unsafeCastProtoByteString=function(e){return e},e.prototype.fromRpcStatus=function(e){var t=void 0===e.code?S.UNKNOWN:Ur(e.code);return new I(t,e.message||"")},e.prototype.toInt32Value=function(e){return this.options.useProto3Json||Xn(e)?e:{value:e}},e.prototype.fromInt32Value=function(e){var t;return Xn(t="object"==typeof e?e.value:e)?null:t},e.prototype.toTimestamp=function(e){return this.options.useProto3Json?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}},e.prototype.fromTimestamp=function(e){if("string"==typeof e)return this.fromIso8601String(e);b(!!e,"Cannot deserialize null or undefined timestamp.");var t=wi(e.seconds||"0"),n=e.nanos||0;return new Ce(t,n)},e.prototype.fromIso8601String=function(e){var t=0,n=vi.exec(e);if(b(!!n,"invalid timestamp: "+e),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e),o=Math.floor(i.getTime()/1e3);return new Ce(o,t)},e.prototype.toBytes=function(e){return this.options.useProto3Json?e.toBase64():this.unsafeCastProtoByteString(e.toUint8Array())},e.prototype.fromBlob=function(e){return"string"==typeof e?(b(this.options.useProto3Json,"Expected bytes to be passed in as Uint8Array, but got a string instead."),re.fromBase64String(e)):(b(!this.options.useProto3Json,"Expected bytes to be passed in as Uint8Array, but got a string instead."),re.fromUint8Array(e))},e.prototype.toVersion=function(e){return this.toTimestamp(e.toTimestamp())},e.prototype.fromVersion=function(e){return b(!!e,"Trying to deserialize version that isn't set"),_e.fromTimestamp(this.fromTimestamp(e))},e.prototype.toResourceName=function(e,t){return this.fullyQualifiedPrefixPath(e).child("documents").child(t).canonicalString()},e.prototype.fromResourceName=function(e){var t=le.fromString(e);return b(this.isValidResourceName(t),"Tried to deserialize invalid key "+t.toString()),t},e.prototype.toName=function(e){return this.toResourceName(this.databaseId,e.path)},e.prototype.fromName=function(e){var t=this.fromResourceName(e);return b(t.get(1)===this.databaseId.projectId,"Tried to deserialize key from different project: "+t.get(1)+" vs "+this.databaseId.projectId),b(!t.get(3)&&!this.databaseId.database||t.get(3)===this.databaseId.database,"Tried to deserialize key from different database: "+t.get(3)+" vs "+this.databaseId.database),new fe(this.extractLocalPathFromResourceName(t))},e.prototype.toQueryPath=function(e){return this.toResourceName(this.databaseId,e)},e.prototype.fromQueryPath=function(e){var t=this.fromResourceName(e);return 4===t.length?le.EMPTY_PATH:this.extractLocalPathFromResourceName(t)},Object.defineProperty(e.prototype,"encodedDatabaseId",{get:function(){return new le(["projects",this.databaseId.projectId,"databases",this.databaseId.database]).canonicalString()},enumerable:!0,configurable:!0}),e.prototype.fullyQualifiedPrefixPath=function(e){return new le(["projects",e.projectId,"databases",e.database])},e.prototype.extractLocalPathFromResourceName=function(e){return b(e.length>4&&"documents"===e.get(4),"tried to deserialize invalid key "+e.toString()),e.popFirst(5)},e.prototype.isValidResourceName=function(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)},e.prototype.toValue=function(e){if(e instanceof At)return{nullValue:"NULL_VALUE"};if(e instanceof xt)return{booleanValue:e.value()};if(e instanceof Pt)return{integerValue:""+e.value()};if(e instanceof Ot){var t=e.value();if(this.options.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:e.value()}}return e instanceof Rt?{stringValue:e.value()}:e instanceof Ut?{mapValue:this.toMapValue(e)}:e instanceof Wt?{arrayValue:this.toArrayValue(e)}:e instanceof jt?{timestampValue:this.toTimestamp(e.internalValue)}:e instanceof qt?{geoPointValue:{latitude:e.value().latitude,longitude:e.value().longitude}}:e instanceof Ft?{bytesValue:this.toBytes(e.value())}:e instanceof Vt?{referenceValue:this.toResourceName(e.databaseId,e.key.path)}:v("Unknown FieldValue "+JSON.stringify(e))},e.prototype.fromValue=function(e){var t=this;if("nullValue"in e)return At.INSTANCE;if("booleanValue"in e)return xt.of(e.booleanValue);if("integerValue"in e)return new Pt(wi(e.integerValue));if("doubleValue"in e){if(this.options.useProto3Json){if("NaN"===e.doubleValue)return Ot.NAN;if("Infinity"===e.doubleValue)return Ot.POSITIVE_INFINITY;if("-Infinity"===e.doubleValue)return Ot.NEGATIVE_INFINITY}return new Ot(e.doubleValue)}if("stringValue"in e)return new Rt(e.stringValue);if("mapValue"in e)return this.fromFields(e.mapValue.fields||{});if("arrayValue"in e){bi(e.arrayValue,"arrayValue");var n=e.arrayValue.values||[];return new Wt(n.map((function(e){return t.fromValue(e)})))}if("timestampValue"in e)return bi(e.timestampValue,"timestampValue"),new jt(this.fromTimestamp(e.timestampValue));if("geoPointValue"in e){bi(e.geoPointValue,"geoPointValue");var r=e.geoPointValue.latitude||0,i=e.geoPointValue.longitude||0;return new qt(new si(r,i))}if("bytesValue"in e){bi(e.bytesValue,"bytesValue");var o=this.fromBlob(e.bytesValue);return new Ft(o)}if("referenceValue"in e){bi(e.referenceValue,"referenceValue");var a=this.fromResourceName(e.referenceValue),s=new se(a.get(1),a.get(3)),c=new fe(this.extractLocalPathFromResourceName(a));return new Vt(s,c)}return v("Unknown Value proto "+JSON.stringify(e))},e.prototype.toMutationDocument=function(e,t){return{name:this.toName(e),fields:this.toFields(t)}},e.prototype.toDocument=function(e){return b(!e.hasLocalMutations,"Can't serialize documents with mutations."),{name:this.toName(e.key),fields:this.toFields(e.data()),updateTime:this.toTimestamp(e.version.toTimestamp())}},e.prototype.fromDocument=function(e,t){var n=this,r=this.fromName(e.name),i=this.fromVersion(e.updateTime);return new Kt(r,i,{hasCommittedMutations:!!t},void 0,e,(function(e){return n.fromValue(e)}))},e.prototype.toFields=function(e){var t=this,n={};return e.forEach((function(e,r){n[e]=t.toValue(r)})),n},e.prototype.fromFields=function(e){var t=this,n=e,r=Ut.EMPTY;return k(n,(function(e,n){r=r.set(new de([e]),t.fromValue(n))})),r},e.prototype.toMapValue=function(e){return{fields:this.toFields(e)}},e.prototype.toArrayValue=function(e){var t=this,n=[];return e.forEach((function(e){n.push(t.toValue(e))})),{values:n}},e.prototype.fromFound=function(e){var t=this;b(!!e.found,"Tried to deserialize a found document from a missing document."),bi(e.found.name,"doc.found.name"),bi(e.found.updateTime,"doc.found.updateTime");var n=this.fromName(e.found.name),r=this.fromVersion(e.found.updateTime);return new Kt(n,r,{},void 0,e.found,(function(e){return t.fromValue(e)}))},e.prototype.fromMissing=function(e){b(!!e.missing,"Tried to deserialize a missing document from a found document."),b(!!e.readTime,"Tried to deserialize a missing document without a read time.");var t=this.fromName(e.missing),n=this.fromVersion(e.readTime);return new Gt(t,n)},e.prototype.fromMaybeDocument=function(e){return"found"in e?this.fromFound(e):"missing"in e?this.fromMissing(e):v("invalid batch get response: "+JSON.stringify(e))},e.prototype.toWatchTargetChangeState=function(e){switch(e){case Qr.Added:return"ADD";case Qr.Current:return"CURRENT";case Qr.NoChange:return"NO_CHANGE";case Qr.Removed:return"REMOVE";case Qr.Reset:return"RESET";default:return v("Unknown WatchTargetChangeState: "+e)}},e.prototype.toTestWatchChange=function(e){if(e instanceof Zr)return{filter:{count:e.existenceFilter.count,targetId:e.targetId}};if(e instanceof $r){if(e.newDoc instanceof Kt){var t=e.newDoc;return{documentChange:{document:{name:this.toName(t.key),fields:this.toFields(t.data()),updateTime:this.toVersion(t.version)},targetIds:e.updatedTargetIds,removedTargetIds:e.removedTargetIds}}}if(e.newDoc instanceof Gt){t=e.newDoc;return{documentDelete:{document:this.toName(t.key),readTime:this.toVersion(t.version),removedTargetIds:e.removedTargetIds}}}if(null===e.newDoc)return{documentRemove:{document:this.toName(e.key),removedTargetIds:e.removedTargetIds}}}if(e instanceof ei){var n=void 0;return e.cause&&(n={code:Wr(e.cause.code),message:e.cause.message}),{targetChange:{targetChangeType:this.toWatchTargetChangeState(e.state),targetIds:e.targetIds,resumeToken:this.unsafeCastProtoByteString(e.resumeToken),cause:n}}}return v("Unrecognized watch change: "+JSON.stringify(e))},e.prototype.fromWatchChange=function(e){var t,n=this;if("targetChange"in e){bi(e.targetChange,"targetChange");var r=this.fromWatchTargetChangeState(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=e.targetChange.resumeToken||this.emptyByteString(),a=e.targetChange.cause,s=a&&this.fromRpcStatus(a);t=new ei(r,i,o,s||null)}else if("documentChange"in e){bi(e.documentChange,"documentChange");var c=e.documentChange;bi(c.document,"documentChange.name"),bi(c.document.name,"documentChange.document.name"),bi(c.document.updateTime,"documentChange.document.updateTime");var u=this.fromName(c.document.name),l=this.fromVersion(c.document.updateTime),h=new Kt(u,l,{},void 0,c.document,(function(e){return n.fromValue(e)})),d=c.targetIds||[],f=c.removedTargetIds||[];t=new $r(d,f,h.key,h)}else if("documentDelete"in e){bi(e.documentDelete,"documentDelete");var p=e.documentDelete;bi(p.document,"documentDelete.document");u=this.fromName(p.document),l=p.readTime?this.fromVersion(p.readTime):_e.forDeletedDoc(),h=new Gt(u,l),f=p.removedTargetIds||[];t=new $r([],f,h.key,h)}else if("documentRemove"in e){bi(e.documentRemove,"documentRemove");var m=e.documentRemove;bi(m.document,"documentRemove");u=this.fromName(m.document),f=m.removedTargetIds||[];t=new $r([],f,u,null)}else{if(!("filter"in e))return v("Unknown change type "+JSON.stringify(e));bi(e.filter,"filter");var g=e.filter;bi(g.targetId,"filter.targetId");var y=g.count||0,b=new mi(y),w=g.targetId;t=new Zr(w,b)}return t},e.prototype.fromWatchTargetChangeState=function(e){return"NO_CHANGE"===e?Qr.NoChange:"ADD"===e?Qr.Added:"REMOVE"===e?Qr.Removed:"CURRENT"===e?Qr.Current:"RESET"===e?Qr.Reset:v("Got unexpected TargetChange.state: "+e)},e.prototype.versionFromListenResponse=function(e){if(!("targetChange"in e))return _e.MIN;var t=e.targetChange;return t.targetIds&&t.targetIds.length?_e.MIN:t.readTime?this.fromVersion(t.readTime):_e.MIN},e.prototype.toMutation=function(e){var t,n=this;if(e instanceof Et)t={update:this.toMutationDocument(e.key,e.value)};else if(e instanceof Dt)t={delete:this.toName(e.key)};else if(e instanceof Ct)t={update:this.toMutationDocument(e.key,e.data),updateMask:this.toDocumentMask(e.fieldMask)};else{if(!(e instanceof _t))return v("Unknown mutation type "+e.type);t={transform:{document:this.toName(e.key),fieldTransforms:e.fieldTransforms.map((function(e){return n.toFieldTransform(e)}))}}}return e.precondition.isNone||(t.currentDocument=this.toPrecondition(e.precondition)),t},e.prototype.fromMutation=function(e){var t=this,n=e.currentDocument?this.fromPrecondition(e.currentDocument):St.NONE;if(e.update){bi(e.update.name,"name");var r=this.fromName(e.update.name),i=this.fromFields(e.update.fields||{});if(e.updateMask){var o=this.fromDocumentMask(e.updateMask);return new Ct(r,i,o,n)}return new Et(r,i,n)}if(e.delete){r=this.fromName(e.delete);return new Dt(r,n)}if(e.transform){r=this.fromName(e.transform.document);var a=e.transform.fieldTransforms.map((function(e){return t.fromFieldTransform(e)}));return b(!0===n.exists,'Transforms only support precondition "exists == true"'),new _t(r,a)}return v("unknown mutation proto: "+JSON.stringify(e))},e.prototype.toPrecondition=function(e){return b(!e.isNone,"Can't serialize an empty precondition"),void 0!==e.updateTime?{updateTime:this.toVersion(e.updateTime)}:void 0!==e.exists?{exists:e.exists}:v("Unknown precondition")},e.prototype.fromPrecondition=function(e){return void 0!==e.updateTime?St.updateTime(this.fromVersion(e.updateTime)):void 0!==e.exists?St.exists(e.exists):St.NONE},e.prototype.fromWriteResult=function(e,t){var n=this,r=e.updateTime?this.fromVersion(e.updateTime):this.fromVersion(t);r.isEqual(_e.MIN)&&(r=this.fromVersion(t));var i=null;return e.transformResults&&e.transformResults.length>0&&(i=e.transformResults.map((function(e){return n.fromValue(e)}))),new bt(r,i)},e.prototype.fromWriteResults=function(e,t){var n=this;return e&&e.length>0?(b(void 0!==t,"Received a write result without a commit time"),e.map((function(e){return n.fromWriteResult(e,t)}))):[]},e.prototype.toFieldTransform=function(e){var t=this,n=e.transform;if(n instanceof ci)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof ui)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements.map((function(e){return t.toValue(e)}))}};if(n instanceof li)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements.map((function(e){return t.toValue(e)}))}};if(n instanceof hi)return{fieldPath:e.field.canonicalString(),increment:this.toValue(n.operand)};throw v("Unknown transform: "+e.transform)},e.prototype.fromFieldTransform=function(e){var t=this,n=null;if("setToServerValue"in e)b("REQUEST_TIME"===e.setToServerValue,"Unknown server value transform proto: "+JSON.stringify(e)),n=ci.instance;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new ui(r.map((function(e){return t.fromValue(e)})))}else if("removeAllFromArray"in e){r=e.removeAllFromArray.values||[];n=new li(r.map((function(e){return t.fromValue(e)})))}else if("increment"in e){var i=this.fromValue(e.increment);b(i instanceof Mt,"NUMERIC_ADD transform requires a NumberValue"),n=new hi(i)}else v("Unknown transform proto: "+JSON.stringify(e));var o=de.fromServerFormat(e.fieldPath);return new vt(o,n)},e.prototype.toDocumentsTarget=function(e){return{documents:[this.toQueryPath(e.path)]}},e.prototype.fromDocumentsTarget=function(e){var t=e.documents.length;b(1===t,"DocumentsTarget contained other than 1 document: "+t);var n=e.documents[0];return tr.atPath(this.fromQueryPath(n)).toTarget()},e.prototype.toQueryTarget=function(e){var t={structuredQuery:{}},n=e.path;null!==e.collectionGroup?(b(n.length%2==0,"Collection Group queries should be within a document path or root."),t.parent=this.toQueryPath(n),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(b(n.length%2!=0,"Document queries with filters are not supported."),t.parent=this.toQueryPath(n.popLast()),t.structuredQuery.from=[{collectionId:n.lastSegment()}]);var r=this.toFilter(e.filters);r&&(t.structuredQuery.where=r);var i=this.toOrder(e.orderBy);i&&(t.structuredQuery.orderBy=i);var o=this.toInt32Value(e.limit);return null!==o&&(t.structuredQuery.limit=o),e.startAt&&(t.structuredQuery.startAt=this.toCursor(e.startAt)),e.endAt&&(t.structuredQuery.endAt=this.toCursor(e.endAt)),t},e.prototype.fromQueryTarget=function(e){var t=this.fromQueryPath(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){b(1===r,"StructuredQuery.from with more than one collection is not supported.");var o=n.from[0];o.allDescendants?i=o.collectionId:t=t.child(o.collectionId)}var a=[];n.where&&(a=this.fromFilter(n.where));var s=[];n.orderBy&&(s=this.fromOrder(n.orderBy));var c=null;n.limit&&(c=this.fromInt32Value(n.limit));var u=null;n.startAt&&(u=this.fromCursor(n.startAt));var l=null;return n.endAt&&(l=this.fromCursor(n.endAt)),new tr(t,i,s,a,c,Zn.First,u,l).toTarget()},e.prototype.toListenRequestLabels=function(e){var t=this.toLabel(e.purpose);return null==t?null:{"goog-listen-tags":t}},e.prototype.toLabel=function(e){switch(e){case Tn.Listen:return null;case Tn.ExistenceFilterMismatch:return"existence-filter-mismatch";case Tn.LimboResolution:return"limbo-document";default:return v("Unrecognized query purpose: "+e)}},e.prototype.toTarget=function(e){var t,n=e.target;return(t=n.isDocumentQuery()?{documents:this.toDocumentsTarget(n)}:{query:this.toQueryTarget(n)}).targetId=e.targetId,e.resumeToken.length>0&&(t.resumeToken=this.unsafeCastProtoByteString(e.resumeToken)),t},e.prototype.toFilter=function(e){var t=this;if(0!==e.length){var n=e.map((function(e){return e instanceof ir?t.toUnaryOrFieldFilter(e):v("Unrecognized filter: "+JSON.stringify(e))}));return 1===n.length?n[0]:{compositeFilter:{op:"AND",filters:n}}}},e.prototype.fromFilter=function(e){var t=this;return e?void 0!==e.unaryFilter?[this.fromUnaryFilter(e)]:void 0!==e.fieldFilter?[this.fromFieldFilter(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return t.fromFilter(e)})).reduce((function(e,t){return e.concat(t)})):v("Unknown filter: "+JSON.stringify(e)):[]},e.prototype.toOrder=function(e){var t=this;if(0!==e.length)return e.map((function(e){return t.toPropertyOrder(e)}))},e.prototype.fromOrder=function(e){var t=this;return e.map((function(e){return t.fromPropertyOrder(e)}))},e.prototype.toCursor=function(e){var t=this;return{before:e.before,values:e.position.map((function(e){return t.toValue(e)}))}},e.prototype.fromCursor=function(e){var t=this,n=!!e.before,r=e.values.map((function(e){return t.fromValue(e)}));return new hr(r,n)},e.prototype.toDirection=function(e){return gi[e.name]},e.prototype.fromDirection=function(e){switch(e){case"ASCENDING":return lr.ASCENDING;case"DESCENDING":return lr.DESCENDING;default:return}},e.prototype.toOperatorName=function(e){return yi[e.name]},e.prototype.fromOperatorName=function(e){switch(e){case"EQUAL":return rr.EQUAL;case"GREATER_THAN":return rr.GREATER_THAN;case"GREATER_THAN_OR_EQUAL":return rr.GREATER_THAN_OR_EQUAL;case"LESS_THAN":return rr.LESS_THAN;case"LESS_THAN_OR_EQUAL":return rr.LESS_THAN_OR_EQUAL;case"ARRAY_CONTAINS":return rr.ARRAY_CONTAINS;case"IN":return rr.IN;case"ARRAY_CONTAINS_ANY":return rr.ARRAY_CONTAINS_ANY;case"OPERATOR_UNSPECIFIED":return v("Unspecified operator");default:return v("Unknown operator")}},e.prototype.toFieldPathReference=function(e){return{fieldPath:e.canonicalString()}},e.prototype.fromFieldPathReference=function(e){return de.fromServerFormat(e.fieldPath)},e.prototype.toPropertyOrder=function(e){return{field:this.toFieldPathReference(e.field),direction:this.toDirection(e.dir)}},e.prototype.fromPropertyOrder=function(e){return new dr(this.fromFieldPathReference(e.field),this.fromDirection(e.direction))},e.prototype.fromFieldFilter=function(e){return ir.create(this.fromFieldPathReference(e.fieldFilter.field),this.fromOperatorName(e.fieldFilter.op),this.fromValue(e.fieldFilter.value))},e.prototype.toUnaryOrFieldFilter=function(e){if(e.op===rr.EQUAL){if(e.value.isEqual(Ot.NAN))return{unaryFilter:{field:this.toFieldPathReference(e.field),op:"IS_NAN"}};if(e.value.isEqual(At.INSTANCE))return{unaryFilter:{field:this.toFieldPathReference(e.field),op:"IS_NULL"}}}return{fieldFilter:{field:this.toFieldPathReference(e.field),op:this.toOperatorName(e.op),value:this.toValue(e.value)}}},e.prototype.fromUnaryFilter=function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=this.fromFieldPathReference(e.unaryFilter.field);return ir.create(t,rr.EQUAL,Ot.NAN);case"IS_NULL":var n=this.fromFieldPathReference(e.unaryFilter.field);return ir.create(n,rr.EQUAL,At.INSTANCE);case"OPERATOR_UNSPECIFIED":return v("Unspecified filter");default:return v("Unknown filter")}},e.prototype.toDocumentMask=function(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}},e.prototype.fromDocumentMask=function(e){var t=(e.fieldPaths||[]).map((function(e){return de.fromServerFormat(e)}));return yt.fromArray(t)},e}(),Si=function(){this.viewSnap=null,this.targetId=0,this.listeners=[]},Ii=function(){function e(e){this.syncEngine=e,this.queries=new Ht((function(e){return e.canonicalId()})),this.onlineState=Mr.Unknown,this.snapshotsInSyncListeners=new Set,this.syncEngine.subscribe(this)}return e.prototype.listen=function(e){var t=e.query,n=!1,r=this.queries.get(t);(r||(n=!0,r=new Si,this.queries.set(t,r)),r.listeners.push(e),b(!e.applyOnlineStateChange(this.onlineState),"applyOnlineStateChange() shouldn't raise an event for brand-new listeners."),r.viewSnap)&&(e.onViewSnapshot(r.viewSnap)&&this.raiseSnapshotsInSyncEvent());return n?this.syncEngine.listen(t).then((function(e){return r.targetId=e,e})):Promise.resolve(r.targetId)},e.prototype.unlisten=function(e){return a.__awaiter(this,void 0,void 0,(function(){var t,n,r,i;return a.__generator(this,(function(o){return t=e.query,n=!1,(r=this.queries.get(t))&&(i=r.listeners.indexOf(e))>=0&&(r.listeners.splice(i,1),n=0===r.listeners.length),n?(this.queries.delete(t),[2,this.syncEngine.unlisten(t)]):[2]}))}))},e.prototype.onWatchChange=function(e){for(var t=!1,n=0,r=e;n<r.length;n++){var i=r[n],o=i.query,a=this.queries.get(o);if(a){for(var s=0,c=a.listeners;s<c.length;s++){c[s].onViewSnapshot(i)&&(t=!0)}a.viewSnap=i}}t&&this.raiseSnapshotsInSyncEvent()},e.prototype.onWatchError=function(e,t){var n=this.queries.get(e);if(n)for(var r=0,i=n.listeners;r<i.length;r++){i[r].onError(t)}this.queries.delete(e)},e.prototype.onOnlineStateChange=function(e){this.onlineState=e;var t=!1;this.queries.forEach((function(n,r){for(var i=0,o=r.listeners;i<o.length;i++){o[i].applyOnlineStateChange(e)&&(t=!0)}})),t&&this.raiseSnapshotsInSyncEvent()},e.prototype.addSnapshotsInSyncListener=function(e){this.snapshotsInSyncListeners.add(e),e.next()},e.prototype.removeSnapshotsInSyncListener=function(e){this.snapshotsInSyncListeners.delete(e)},e.prototype.raiseSnapshotsInSyncEvent=function(){this.snapshotsInSyncListeners.forEach((function(e){e.next()}))},e}(),Ei=function(){function e(e,t,n){this.query=e,this.queryObserver=t,this.raisedInitialEvent=!1,this.snap=null,this.onlineState=Mr.Unknown,this.options=n||{}}return e.prototype.onViewSnapshot=function(e){if(b(e.docChanges.length>0||e.syncStateChanged,"We got a new snapshot with no changes?"),!this.options.includeMetadataChanges){for(var t=[],n=0,r=e.docChanges;n<r.length;n++){var i=r[n];i.type!==zr.Metadata&&t.push(i)}e=new Yr(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var o=!1;return this.raisedInitialEvent?this.shouldRaiseEvent(e)&&(this.queryObserver.next(e),o=!0):this.shouldRaiseInitialEvent(e,this.onlineState)&&(this.raiseInitialEvent(e),o=!0),this.snap=e,o},e.prototype.onError=function(e){this.queryObserver.error(e)},e.prototype.applyOnlineStateChange=function(e){this.onlineState=e;var t=!1;return this.snap&&!this.raisedInitialEvent&&this.shouldRaiseInitialEvent(this.snap,e)&&(this.raiseInitialEvent(this.snap),t=!0),t},e.prototype.shouldRaiseInitialEvent=function(e,t){if(b(!this.raisedInitialEvent,"Determining whether to raise first event but already had first event"),!e.fromCache)return!0;var n=t!==Mr.Offline;return this.options.waitForSyncWhenOnline&&n?(b(e.fromCache,"Waiting for sync, but snapshot is not from cache"),!1):!e.docs.isEmpty()||t===Mr.Offline},e.prototype.shouldRaiseEvent=function(e){if(e.docChanges.length>0)return!0;var t=this.snap&&this.snap.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges},e.prototype.raiseInitialEvent=function(e){b(!this.raisedInitialEvent,"Trying to raise initial events for second time"),e=Yr.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.raisedInitialEvent=!0,this.queryObserver.next(e)},e}(),Ci=function(){function e(e,t,n,r){this.targetId=e,this.fromCache=t,this.addedKeys=n,this.removedKeys=r}return e.fromSnapshot=function(t,n){for(var r=qe(),i=qe(),o=0,a=n.docChanges;o<a.length;o++){var s=a[o];switch(s.type){case zr.Added:r=r.add(s.doc.key);break;case zr.Removed:i=i.add(s.doc.key)}}return new e(t,n.fromCache,r,i)},e}(),_i=function(e){this.key=e},Di=function(e){this.key=e},ki=function(){function e(e,t){this.query=e,this._syncedDocuments=t,this.syncState=null,this.current=!1,this.limboDocuments=qe(),this.mutatedKeys=qe(),this.documentSet=new Gr(e.docComparator.bind(e))}return Object.defineProperty(e.prototype,"syncedDocuments",{get:function(){return this._syncedDocuments},enumerable:!0,configurable:!0}),e.prototype.computeDocChanges=function(e,t){var n=this,r=t?t.changeSet:new Hr,i=t?t.documentSet:this.documentSet,o=t?t.mutatedKeys:this.mutatedKeys,a=i,s=!1,c=this.query.hasLimitToFirst()&&i.size===this.query.limit?i.last():null,u=this.query.hasLimitToLast()&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),h=t instanceof Kt?t:null;h&&(b(e.isEqual(h.key),"Mismatching keys found in document changes: "+e+" != "+h.key),h=n.query.matches(h)?h:null);var d=!!l&&n.mutatedKeys.has(l.key),f=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data().isEqual(h.data())?d!==f&&(r.track({type:zr.Metadata,doc:h}),p=!0):n.shouldWaitForSyncedDocument(l,h)||(r.track({type:zr.Modified,doc:h}),p=!0,(c&&n.query.docComparator(h,c)>0||u&&n.query.docComparator(h,u)<0)&&(s=!0)):!l&&h?(r.track({type:zr.Added,doc:h}),p=!0):l&&!h&&(r.track({type:zr.Removed,doc:l}),p=!0,(c||u)&&(s=!0));p&&(h?(a=a.add(h),o=f?o.add(e):o.delete(e)):(a=a.delete(e),o=o.delete(e)))})),this.query.hasLimitToFirst()||this.query.hasLimitToLast())for(;a.size>this.query.limit;){var l=this.query.hasLimitToFirst()?a.last():a.first();a=a.delete(l.key),o=o.delete(l.key),r.track({type:zr.Removed,doc:l})}return b(!s||!t,"View was refilled using docs that themselves needed refilling."),{documentSet:a,changeSet:r,needsRefill:s,mutatedKeys:o}},e.prototype.shouldWaitForSyncedDocument=function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations},e.prototype.applyChanges=function(e,t,n){var r=this;b(!e.needsRefill,"Cannot apply changes that need a refill");var i=this.documentSet;this.documentSet=e.documentSet,this.mutatedKeys=e.mutatedKeys;var o=e.changeSet.getChanges();o.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case zr.Added:return 1;case zr.Modified:case zr.Metadata:return 2;case zr.Removed:return 0;default:return v("Unknown ChangeType: "+e)}};return n(e)-n(t)}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e.type,t.type)||r.query.docComparator(e.doc,t.doc)})),this.applyTargetChange(n);var a=t?this.updateLimboDocuments():[],s=0===this.limboDocuments.size&&this.current?Kr.Synced:Kr.Local,c=s!==this.syncState;return this.syncState=s,0!==o.length||c?{snapshot:new Yr(this.query,e.documentSet,i,o,e.mutatedKeys,s===Kr.Local,c,!1),limboChanges:a}:{limboChanges:a}},e.prototype.applyOnlineStateChange=function(e){return this.current&&e===Mr.Offline?(this.current=!1,this.applyChanges({documentSet:this.documentSet,changeSet:new Hr,mutatedKeys:this.mutatedKeys,needsRefill:!1},!1)):{limboChanges:[]}},e.prototype.shouldBeInLimbo=function(e){return!this._syncedDocuments.has(e)&&(!!this.documentSet.has(e)&&!this.documentSet.get(e).hasLocalMutations)},e.prototype.applyTargetChange=function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t._syncedDocuments=t._syncedDocuments.add(e)})),e.modifiedDocuments.forEach((function(e){return b(t._syncedDocuments.has(e),"Modified document "+e+" not found in view.")})),e.removedDocuments.forEach((function(e){return t._syncedDocuments=t._syncedDocuments.delete(e)})),this.current=e.current)},e.prototype.updateLimboDocuments=function(){var e=this;if(!this.current)return[];var t=this.limboDocuments;this.limboDocuments=qe(),this.documentSet.forEach((function(t){e.shouldBeInLimbo(t.key)&&(e.limboDocuments=e.limboDocuments.add(t.key))}));var n=[];return t.forEach((function(t){e.limboDocuments.has(t)||n.push(new Di(t))})),this.limboDocuments.forEach((function(e){t.has(e)||n.push(new _i(e))})),n},e.prototype.synchronizeWithPersistedState=function(e){this._syncedDocuments=e.remoteKeys,this.limboDocuments=qe();var t=this.computeDocChanges(e.documents);return this.applyChanges(t,!0)},e.prototype.computeInitialSnapshot=function(){return Yr.fromInitialDocuments(this.query,this.documentSet,this.mutatedKeys,this.syncState===Kr.Local)},e}();
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ni=5,Ai=function(){function e(e,t,n,r){this.asyncQueue=e,this.remoteStore=t,this.updateFunction=n,this.deferred=r,this.retries=Ni,this.backoff=new xr(this.asyncQueue,ne.RetryTransaction)}return e.prototype.run=function(){this.runWithBackOff()},e.prototype.runWithBackOff=function(){var e=this;this.backoff.backoffAndRun((function(){return a.__awaiter(e,void 0,void 0,(function(){var e,t,n=this;return a.__generator(this,(function(r){return e=this.remoteStore.createTransaction(),(t=this.tryRunUpdateFunction(e))&&t.then((function(t){n.asyncQueue.enqueueAndForget((function(){return e.commit().then((function(){n.deferred.resolve(t)})).catch((function(e){n.handleTransactionError(e)}))}))})).catch((function(e){n.handleTransactionError(e)})),[2]}))}))}))},e.prototype.tryRunUpdateFunction=function(e){try{var t=this.updateFunction(e);return!Xn(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}},e.prototype.handleTransactionError=function(e){var t=this;this.retries>0&&this.isRetryableTransactionError(e)?(this.retries-=1,this.asyncQueue.enqueueAndForget((function(){return t.runWithBackOff(),Promise.resolve()}))):this.deferred.reject(e)},e.prototype.isRetryableTransactionError=function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!qr(t)}return!1},e}(),xi=function(e,t,n){this.query=e,this.targetId=t,this.view=n},Mi=function(e){this.key=e,this.receivedDocument=!1},Li=function(){function e(e,t,n,r){this.localStore=e,this.remoteStore=t,this.sharedClientState=n,this.currentUser=r,this.syncEngineListener=null,this.queryViewsByQuery=new Ht((function(e){return e.canonicalId()})),this.queriesByTarget={},this.limboTargetsByKey=new De(fe.comparator),this.limboResolutionsByTarget={},this.limboDocumentRefs=new yr,this.mutationUserCallbacks={},this.pendingWritesCallbacks=new Map,this.limboTargetIdGenerator=lt.forSyncEngine(),this.isPrimary=void 0,this.onlineState=Mr.Unknown}return Object.defineProperty(e.prototype,"isPrimaryClient",{get:function(){return!0===this.isPrimary},enumerable:!0,configurable:!0}),e.prototype.subscribe=function(e){b(null!==e,"SyncEngine listener cannot be null"),b(null===this.syncEngineListener,"SyncEngine already has a subscriber."),this.syncEngineListener=e},e.prototype.listen=function(e){return a.__awaiter(this,void 0,void 0,(function(){var t,n,r,i,o;return a.__generator(this,(function(a){switch(a.label){case 0:return this.assertSubscribed("listen()"),(r=this.queryViewsByQuery.get(e))?(t=r.targetId,this.sharedClientState.addLocalQueryTarget(t),n=r.view.computeInitialSnapshot(),[3,4]):[3,1];case 1:return[4,this.localStore.allocateTarget(e.toTarget())];case 2:return i=a.sent(),o=this.sharedClientState.addLocalQueryTarget(i.targetId),t=i.targetId,[4,this.initializeViewAndComputeSnapshot(e,t,"current"===o)];case 3:n=a.sent(),this.isPrimary&&this.remoteStore.listen(i),a.label=4;case 4:return this.syncEngineListener.onWatchChange([n]),[2,t]}}))}))},e.prototype.initializeViewAndComputeSnapshot=function(e,t,n){return a.__awaiter(this,void 0,void 0,(function(){var r,i,o,s,c,u;return a.__generator(this,(function(a){switch(a.label){case 0:return[4,this.localStore.executeQuery(e,!0)];case 1:return r=a.sent(),i=new ki(e,r.remoteKeys),o=i.computeDocChanges(r.documents),s=Xr.createSynthesizedTargetChangeForCurrentChange(t,n&&this.onlineState!==Mr.Offline),b(0===(c=i.applyChanges(o,!0===this.isPrimary,s)).limboChanges.length,"View returned limbo docs before target ack from the server."),b(!!c.snapshot,"applyChanges for new view should always return a snapshot"),u=new xi(e,t,i),this.queryViewsByQuery.set(e,u),this.queriesByTarget[t]||(this.queriesByTarget[t]=[]),this.queriesByTarget[t].push(e),[2,c.snapshot]}}))}))},e.prototype.synchronizeViewAndComputeSnapshot=function(e){return a.__awaiter(this,void 0,void 0,(function(){var t,n;return a.__generator(this,(function(r){switch(r.label){case 0:return[4,this.localStore.executeQuery(e.query,!0)];case 1:return t=r.sent(),n=e.view.synchronizeWithPersistedState(t),this.isPrimary&&this.updateTrackedLimbos(e.targetId,n.limboChanges),[2,n]}}))}))},e.prototype.unlisten=function(e){return a.__awaiter(this,void 0,void 0,(function(){var t,n,r=this;return a.__generator(this,(function(i){switch(i.label){case 0:return this.assertSubscribed("unlisten()"),b(!!(t=this.queryViewsByQuery.get(e)),"Trying to unlisten on query not found:"+e),(n=this.queriesByTarget[t.targetId]).length>1?(this.queriesByTarget[t.targetId]=n.filter((function(t){return!t.isEqual(e)})),this.queryViewsByQuery.delete(e),[2]):this.isPrimary?(this.sharedClientState.removeLocalQueryTarget(t.targetId),this.sharedClientState.isActiveQueryTarget(t.targetId)?[3,2]:[4,this.localStore.releaseTarget(t.targetId,!1).then((function(){r.sharedClientState.clearQueryState(t.targetId),r.remoteStore.unlisten(t.targetId),r.removeAndCleanupTarget(t.targetId)})).catch(Un)]):[3,3];case 1:i.sent(),i.label=2;case 2:return[3,5];case 3:return this.removeAndCleanupTarget(t.targetId),[4,this.localStore.releaseTarget(t.targetId,!0)];case 4:i.sent(),i.label=5;case 5:return[2]}}))}))},e.prototype.write=function(e,t){return a.__awaiter(this,void 0,void 0,(function(){var n;return a.__generator(this,(function(r){switch(r.label){case 0:return this.assertSubscribed("write()"),[4,this.localStore.localWrite(e)];case 1:return n=r.sent(),this.sharedClientState.addPendingMutation(n.batchId),this.addMutationCallback(n.batchId,t),[4,this.emitNewSnapsAndNotifyLocalStore(n.changes)];case 2:return r.sent(),[4,this.remoteStore.fillWritePipeline()];case 3:return r.sent(),[2]}}))}))},e.prototype.runTransaction=function(e,t,n){new Ai(e,this.remoteStore,t,n).run()},e.prototype.applyRemoteEvent=function(e){return a.__awaiter(this,void 0,void 0,(function(){var t,n=this;return a.__generator(this,(function(r){switch(r.label){case 0:this.assertSubscribed("applyRemoteEvent()"),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.localStore.applyRemoteEvent(e)];case 2:return t=r.sent(),k(e.targetChanges,(function(e,t){var r=n.limboResolutionsByTarget[Number(e)];r&&(b(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1,"Limbo resolution for single document contains multiple changes."),t.addedDocuments.size>0?r.receivedDocument=!0:t.modifiedDocuments.size>0?b(r.receivedDocument,"Received change for limbo target document without add."):t.removedDocuments.size>0&&(b(r.receivedDocument,"Received remove for limbo target document without add."),r.receivedDocument=!1))})),[4,this.emitNewSnapsAndNotifyLocalStore(t,e)];case 3:return r.sent(),[3,6];case 4:return[4,Un(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},e.prototype.applyOnlineStateChange=function(e,t){if(this.isPrimary&&t===Lr.RemoteStore||!this.isPrimary&&t===Lr.SharedClientState){this.assertSubscribed("applyOnlineStateChange()");var n=[];this.queryViewsByQuery.forEach((function(t,r){var i=r.view.applyOnlineStateChange(e);b(0===i.limboChanges.length,"OnlineState should not affect limbo documents."),i.snapshot&&n.push(i.snapshot)})),this.syncEngineListener.onOnlineStateChange(e),this.syncEngineListener.onWatchChange(n),this.onlineState=e,this.isPrimary&&this.sharedClientState.setOnlineState(e)}},e.prototype.rejectListen=function(e,t){return a.__awaiter(this,void 0,void 0,(function(){var n,r,i,o,s,c=this;return a.__generator(this,(function(a){switch(a.label){case 0:return this.assertSubscribed("rejectListens()"),this.sharedClientState.updateQueryState(e,"rejected",t),n=this.limboResolutionsByTarget[e],(r=n&&n.key)?(this.limboTargetsByKey=this.limboTargetsByKey.remove(r),delete this.limboResolutionsByTarget[e],i=(i=new De(fe.comparator)).insert(r,new Gt(r,_e.forDeletedDoc())),o=qe().add(r),s=new Jr(_e.MIN,{},new xe(X),i,o),[2,this.applyRemoteEvent(s)]):[3,1];case 1:return[4,this.localStore.releaseTarget(e,!1).then((function(){return c.removeAndCleanupTarget(e,t)})).catch(Un)];case 2:a.sent(),a.label=3;case 3:return[2]}}))}))},e.prototype.applyBatchState=function(e,t,n){return a.__awaiter(this,void 0,void 0,(function(){var r;return a.__generator(this,(function(i){switch(i.label){case 0:return this.assertSubscribed("applyBatchState()"),[4,this.localStore.lookupMutationDocuments(e)];case 1:return null===(r=i.sent())?(m("SyncEngine","Cannot apply mutation batch with id: "+e),[2]):"pending"!==t?[3,3]:[4,this.remoteStore.fillWritePipeline()];case 2:return i.sent(),[3,4];case 3:"acknowledged"===t||"rejected"===t?(this.processUserCallback(e,n||null),this.localStore.removeCachedMutationBatchMetadata(e)):v("Unknown batchState: "+t),i.label=4;case 4:return[4,this.emitNewSnapsAndNotifyLocalStore(r)];case 5:return i.sent(),[2]}}))}))},e.prototype.applySuccessfulWrite=function(e){return a.__awaiter(this,void 0,void 0,(function(){var t,n;return a.__generator(this,(function(r){switch(r.label){case 0:this.assertSubscribed("applySuccessfulWrite()"),t=e.batch.batchId,this.processUserCallback(t,null),this.triggerPendingWritesCallbacks(t),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.localStore.acknowledgeBatch(e)];case 2:return n=r.sent(),this.sharedClientState.updateMutationState(t,"acknowledged"),[4,this.emitNewSnapsAndNotifyLocalStore(n)];case 3:return r.sent(),[3,6];case 4:return[4,Un(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},e.prototype.rejectFailedWrite=function(e,t){return a.__awaiter(this,void 0,void 0,(function(){var n;return a.__generator(this,(function(r){switch(r.label){case 0:this.assertSubscribed("rejectFailedWrite()"),this.processUserCallback(e,t),this.triggerPendingWritesCallbacks(e),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.localStore.rejectBatch(e)];case 2:return n=r.sent(),this.sharedClientState.updateMutationState(e,"rejected",t),[4,this.emitNewSnapsAndNotifyLocalStore(n)];case 3:return r.sent(),[3,6];case 4:return[4,Un(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},e.prototype.registerPendingWritesCallback=function(e){return a.__awaiter(this,void 0,void 0,(function(){var t,n;return a.__generator(this,(function(r){switch(r.label){case 0:return this.remoteStore.canUseNetwork()||m("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),[4,this.localStore.getHighestUnacknowledgedBatchId()];case 1:return-1===(t=r.sent())?(e.resolve(),[2]):((n=this.pendingWritesCallbacks.get(t)||[]).push(e),this.pendingWritesCallbacks.set(t,n),[2])}}))}))},e.prototype.triggerPendingWritesCallbacks=function(e){(this.pendingWritesCallbacks.get(e)||[]).forEach((function(e){e.resolve()})),this.pendingWritesCallbacks.delete(e)},e.prototype.rejectOutstandingPendingWritesCallbacks=function(e){this.pendingWritesCallbacks.forEach((function(t){t.forEach((function(t){t.reject(new I(S.CANCELLED,e))}))})),this.pendingWritesCallbacks.clear()},e.prototype.addMutationCallback=function(e,t){var n=this.mutationUserCallbacks[this.currentUser.toKey()];n||(n=new De(X)),n=n.insert(e,t),this.mutationUserCallbacks[this.currentUser.toKey()]=n},e.prototype.processUserCallback=function(e,t){var n=this.mutationUserCallbacks[this.currentUser.toKey()];if(n){var r=n.get(e);r&&(b(e===n.minKey(),"Mutation callbacks processed out-of-order?"),t?r.reject(t):r.resolve(),n=n.remove(e)),this.mutationUserCallbacks[this.currentUser.toKey()]=n}},e.prototype.removeAndCleanupTarget=function(e,t){var n=this;void 0===t&&(t=null),this.sharedClientState.removeLocalQueryTarget(e),b(this.queriesByTarget[e]&&0!==this.queriesByTarget[e].length,"There are no queries mapped to target id "+e);for(var r=0,i=this.queriesByTarget[e];r<i.length;r++){var o=i[r];this.queryViewsByQuery.delete(o),t&&this.syncEngineListener.onWatchError(o,t)}if(delete this.queriesByTarget[e],this.isPrimary){var a=this.limboDocumentRefs.referencesForId(e);this.limboDocumentRefs.removeReferencesForId(e),a.forEach((function(e){n.limboDocumentRefs.containsKey(e)||n.removeLimboTarget(e)}))}},e.prototype.removeLimboTarget=function(e){var t=this.limboTargetsByKey.get(e);null!==t&&(this.remoteStore.unlisten(t),this.limboTargetsByKey=this.limboTargetsByKey.remove(e),delete this.limboResolutionsByTarget[t])},e.prototype.updateTrackedLimbos=function(e,t){for(var n=0,r=t;n<r.length;n++){var i=r[n];if(i instanceof _i)this.limboDocumentRefs.addReference(i.key,e),this.trackLimboChange(i);else if(i instanceof Di){m("SyncEngine","Document no longer in limbo: "+i.key),this.limboDocumentRefs.removeReference(i.key,e),this.limboDocumentRefs.containsKey(i.key)||this.removeLimboTarget(i.key)}else v("Unknown limbo change: "+JSON.stringify(i))}},e.prototype.trackLimboChange=function(e){var t=e.key;if(!this.limboTargetsByKey.get(t)){m("SyncEngine","New document in limbo: "+t);var n=this.limboTargetIdGenerator.next(),r=tr.atPath(t.path);this.limboResolutionsByTarget[n]=new Mi(t),this.remoteStore.listen(new kn(r.toTarget(),n,Tn.LimboResolution,ce.INVALID)),this.limboTargetsByKey=this.limboTargetsByKey.insert(t,n)}},e.prototype.currentLimboDocs=function(){return this.limboTargetsByKey},e.prototype.emitNewSnapsAndNotifyLocalStore=function(e,t){return a.__awaiter(this,void 0,void 0,(function(){var n,r,i,o=this;return a.__generator(this,(function(a){switch(a.label){case 0:return n=[],r=[],i=[],this.queryViewsByQuery.forEach((function(a,s){i.push(Promise.resolve().then((function(){var t=s.view.computeDocChanges(e);return t.needsRefill?o.localStore.executeQuery(s.query,!1).then((function(e){var n=e.documents;return s.view.computeDocChanges(n,t)})):t})).then((function(e){var i=t&&t.targetChanges[s.targetId],a=s.view.applyChanges(e,!0===o.isPrimary,i);if(o.updateTrackedLimbos(s.targetId,a.limboChanges),a.snapshot){o.isPrimary&&o.sharedClientState.updateQueryState(s.targetId,a.snapshot.fromCache?"not-current":"current"),n.push(a.snapshot);var c=Ci.fromSnapshot(s.targetId,a.snapshot);r.push(c)}})))})),[4,Promise.all(i)];case 1:return a.sent(),this.syncEngineListener.onWatchChange(n),[4,this.localStore.notifyLocalViewChanges(r)];case 2:return a.sent(),[2]}}))}))},e.prototype.assertSubscribed=function(e){b(null!==this.syncEngineListener,"Trying to call "+e+" before calling subscribe().")},e.prototype.handleCredentialChange=function(e){return a.__awaiter(this,void 0,void 0,(function(){var t,n;return a.__generator(this,(function(r){switch(r.label){case 0:return t=!this.currentUser.isEqual(e),this.currentUser=e,t?(this.rejectOutstandingPendingWritesCallbacks("'waitForPendingWrites' promise is rejected due to a user change."),[4,this.localStore.handleUserChange(e)]):[3,3];case 1:return n=r.sent(),this.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),[4,this.emitNewSnapsAndNotifyLocalStore(n.affectedDocuments)];case 2:r.sent(),r.label=3;case 3:return[4,this.remoteStore.handleCredentialChange()];case 4:return r.sent(),[2]}}))}))},e.prototype.applyPrimaryState=function(e){return a.__awaiter(this,void 0,void 0,(function(){var t,n,r,i,o,s,c,u=this;return a.__generator(this,(function(a){switch(a.label){case 0:return!0!==e||!0===this.isPrimary?[3,3]:(this.isPrimary=!0,[4,this.remoteStore.applyPrimaryState(!0)]);case 1:return a.sent(),t=this.sharedClientState.getAllActiveQueryTargets(),[4,this.synchronizeQueryViewsAndRaiseSnapshots(t.toArray())];case 2:for(n=a.sent(),r=0,i=n;r<i.length;r++)o=i[r],this.remoteStore.listen(o);return[3,7];case 3:return!1!==e||!1===this.isPrimary?[3,7]:(this.isPrimary=!1,s=[],c=Promise.resolve(),D(this.queriesByTarget,(function(e,t){u.sharedClientState.isLocalQueryTarget(e)?s.push(e):c=c.then((function(){return u.removeAndCleanupTarget(e),u.localStore.releaseTarget(e,!0)})),u.remoteStore.unlisten(e)})),[4,c]);case 4:return a.sent(),[4,this.synchronizeQueryViewsAndRaiseSnapshots(s)];case 5:return a.sent(),this.resetLimboDocuments(),[4,this.remoteStore.applyPrimaryState(!1)];case 6:a.sent(),a.label=7;case 7:return[2]}}))}))},e.prototype.resetLimboDocuments=function(){var e=this;D(this.limboResolutionsByTarget,(function(t){e.remoteStore.unlisten(t)})),this.limboDocumentRefs.removeAllReferences(),this.limboResolutionsByTarget=[],this.limboTargetsByKey=new De(fe.comparator)},e.prototype.synchronizeQueryViewsAndRaiseSnapshots=function(e){return a.__awaiter(this,void 0,void 0,(function(){var t,n,r,i,o,s,c,u,l,h,d,f,p;return a.__generator(this,(function(a){switch(a.label){case 0:t=[],n=[],r=0,i=e,a.label=1;case 1:return r<i.length?(o=i[r],s=void 0,(c=this.queriesByTarget[o])&&0!==c.length?[4,this.localStore.releaseTarget(o,!0)]:[3,8]):[3,14];case 2:return a.sent(),[4,this.localStore.allocateTarget(c[0].toTarget())];case 3:s=a.sent(),u=0,l=c,a.label=4;case 4:return u<l.length?(h=l[u],b(!!(d=this.queryViewsByQuery.get(h)),"No query view found for "+h),[4,this.synchronizeViewAndComputeSnapshot(d)]):[3,7];case 5:(f=a.sent()).snapshot&&n.push(f.snapshot),a.label=6;case 6:return u++,[3,4];case 7:return[3,12];case 8:return b(!0===this.isPrimary,"A secondary tab should never have an active target without an active query."),[4,this.localStore.getTarget(o)];case 9:return b(!!(p=a.sent()),"Target for id "+o+" not found"),[4,this.localStore.allocateTarget(p)];case 10:return s=a.sent(),[4,this.initializeViewAndComputeSnapshot(this.synthesizeTargetToQuery(p),o,!1)];case 11:a.sent(),a.label=12;case 12:t.push(s),a.label=13;case 13:return r++,[3,1];case 14:return this.syncEngineListener.onWatchChange(n),[2,t]}}))}))},e.prototype.synthesizeTargetToQuery=function(e){return new tr(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,Zn.First,e.startAt,e.endAt)},e.prototype.getActiveClients=function(){return this.localStore.getActiveClients()},e.prototype.applyTargetState=function(e,t,n){return a.__awaiter(this,void 0,void 0,(function(){var r,i;return a.__generator(this,(function(o){switch(o.label){case 0:if(this.isPrimary)return m("SyncEngine","Ignoring unexpected query state notification."),[2];if(!this.queriesByTarget[e])return[3,7];switch(t){case"current":case"not-current":return[3,1];case"rejected":return[3,4]}return[3,6];case 1:return[4,this.localStore.getNewDocumentChanges()];case 2:return r=o.sent(),i=Jr.createSynthesizedRemoteEventForCurrentChange(e,"current"===t),[4,this.emitNewSnapsAndNotifyLocalStore(r,i)];case 3:return o.sent(),[3,7];case 4:return[4,this.localStore.releaseTarget(e,!0)];case 5:return o.sent(),this.removeAndCleanupTarget(e,n),[3,7];case 6:v("Unexpected target state: "+t),o.label=7;case 7:return[2]}}))}))},e.prototype.applyActiveTargetsChange=function(e,t){return a.__awaiter(this,void 0,void 0,(function(){var n,r,i,o,s,c,u,l,h,d=this;return a.__generator(this,(function(f){switch(f.label){case 0:if(!this.isPrimary)return[2];n=0,r=e,f.label=1;case 1:return n<r.length?(h=r[n],b(!this.queriesByTarget[h],"Trying to add an already active target"),[4,this.localStore.getTarget(h)]):[3,6];case 2:return b(!!(i=f.sent()),"Query data for active target "+h+" not found"),[4,this.localStore.allocateTarget(i)];case 3:return o=f.sent(),[4,this.initializeViewAndComputeSnapshot(this.synthesizeTargetToQuery(i),o.targetId,!1)];case 4:f.sent(),this.remoteStore.listen(o),f.label=5;case 5:return n++,[3,1];case 6:s=function(e){return a.__generator(this,(function(t){switch(t.label){case 0:return c.queriesByTarget[e]?[4,c.localStore.releaseTarget(e,!1).then((function(){d.remoteStore.unlisten(e),d.removeAndCleanupTarget(e)})).catch(Un)]:[2,"continue"];case 1:return t.sent(),[2]}}))},c=this,u=0,l=t,f.label=7;case 7:return u<l.length?(h=l[u],[5,s(h)]):[3,10];case 8:f.sent(),f.label=9;case 9:return u++,[3,7];case 10:return[2]}}))}))},e.prototype.enableNetwork=function(){return this.localStore.setNetworkEnabled(!0),this.remoteStore.enableNetwork()},e.prototype.disableNetwork=function(){return this.localStore.setNetworkEnabled(!1),this.remoteStore.disableNetwork()},e.prototype.getRemoteKeysForTarget=function(e){var t=this.limboResolutionsByTarget[e];if(t&&t.receivedDocument)return qe().add(t.key);var n=qe(),r=this.queriesByTarget[e];if(!r)return n;for(var i=0,o=r;i<o.length;i++){var a=o[i],s=this.queryViewsByQuery.get(a);b(!!s,"No query view found for "+a),n=n.unionWith(s.view.syncedDocuments)}return n},e}(),Pi=function(){function e(e){this.uid=e}return e.prototype.isAuthenticated=function(){return null!=this.uid},e.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},e.prototype.isEqual=function(e){return e.uid===this.uid},e.UNAUTHENTICATED=new e(null),e.GOOGLE_CREDENTIALS=new e("google-credentials-uid"),e.FIRST_PARTY=new e("first-party-uid"),e}(),Oi="firestore_clients";function Ri(e,t){return b(-1===t.indexOf("_"),"Client key cannot contain '_', but was '"+t+"'"),Oi+"_"+e+"_"+t}var ji="firestore_mutations";function Bi(e,t,n){var r=ji+"_"+e+"_"+n;return t.isAuthenticated()&&(r+="_"+t.uid),r}var Fi="firestore_targets";function Vi(e,t){return Fi+"_"+e+"_"+t}var qi="firestore_online_state";var Ui="firestore_sequence_number";
/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Wi="SharedClientState",zi=function(){function e(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r,b(void 0!==r==("rejected"===n),"MutationMetadata must contain an error iff state is 'rejected'")}return e.fromWebStorageEntry=function(t,n,r){var i=JSON.parse(r),o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error),a=void 0;return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(a=new I(i.error.code,i.error.message)),o?new e(t,n,i.state,a):(g(Wi,"Failed to parse mutation state for ID '"+n+"': "+r),null)},e.prototype.toWebStorageJSON=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},e}(),Ki=function(){function e(e,t,n){this.targetId=e,this.state=t,this.error=n,b(void 0!==n==("rejected"===t),"QueryTargetMetadata must contain an error iff state is 'rejected'")}return e.fromWebStorageEntry=function(t,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new I(r.error.code,r.error.message)),i?new e(t,r.state,o):(g(Wi,"Failed to parse target state for ID '"+t+"': "+n),null)},e.prototype.toWebStorageJSON=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},e}(),Gi=function(){function e(e,t){this.clientId=e,this.activeTargetIds=t}return e.fromWebStorageEntry=function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=We(),a=0;i&&a<r.activeTargetIds.length;++a)i=$n(r.activeTargetIds[a]),o=o.add(r.activeTargetIds[a]);return i?new e(t,o):(g(Wi,"Failed to parse client data for instance '"+t+"': "+n),null)},e}(),Qi=function(){function e(e,t){this.clientId=e,this.onlineState=t}return e.fromWebStorageEntry=function(t){var n=JSON.parse(t);return"object"==typeof n&&n.onlineState in Mr&&"string"==typeof n.clientId?new e(n.clientId,Mr[n.onlineState]):(g(Wi,"Failed to parse online state: "+t),null)},e}(),Hi=function(){function e(){this.activeTargetIds=We()}return e.prototype.addQueryTarget=function(e){this.activeTargetIds=this.activeTargetIds.add(e)},e.prototype.removeQueryTarget=function(e){this.activeTargetIds=this.activeTargetIds.delete(e)},e.prototype.toWebStorageJSON=function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)},e}(),Yi=function(){function e(t,n,r,i,o){if(this.queue=t,this.platform=n,this.persistenceKey=r,this.localClientId=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.activeClients={},this.storageListener=this.handleWebStorageEvent.bind(this),this.started=!1,this.earlyEvents=[],!e.isAvailable(this.platform))throw new I(S.UNIMPLEMENTED,"LocalStorage is not available on this platform.");var a=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.platform.window.localStorage,this.currentUser=o,this.localClientStorageKey=Ri(this.persistenceKey,this.localClientId),this.sequenceNumberKey=function(e){return Ui+"_"+e}(this.persistenceKey),this.activeClients[this.localClientId]=new Hi,this.clientStateKeyRe=new RegExp("^"+Oi+"_"+a+"_([^_]*)$"),this.mutationBatchKeyRe=new RegExp("^"+ji+"_"+a+"_(\\d+)(?:_(.*))?$"),this.queryTargetKeyRe=new RegExp("^"+Fi+"_"+a+"_(\\d+)$"),this.onlineStateKey=function(e){return qi+"_"+e}(this.persistenceKey),this.platform.window.addEventListener("storage",this.storageListener)}return e.isAvailable=function(e){return!(!e.window||null==e.window.localStorage)},e.prototype.start=function(){return a.__awaiter(this,void 0,void 0,(function(){var e,t,n,r,i,o,s,c,u,l,h,d=this;return a.__generator(this,(function(a){switch(a.label){case 0:return b(!this.started,"WebStorageSharedClientState already started"),b(null!==this.syncEngine,"syncEngine property must be set before calling start()"),b(null!==this.onlineStateHandler,"onlineStateHandler property must be set before calling start()"),[4,this.syncEngine.getActiveClients()];case 1:for(e=a.sent(),t=0,n=e;t<n.length;t++)(r=n[t])!==this.localClientId&&(i=this.getItem(Ri(this.persistenceKey,r)))&&(o=Gi.fromWebStorageEntry(r,i))&&(this.activeClients[o.clientId]=o);for(this.persistClientState(),(s=this.storage.getItem(this.onlineStateKey))&&(c=this.fromWebStorageOnlineState(s))&&this.handleOnlineStateEvent(c),u=0,l=this.earlyEvents;u<l.length;u++)h=l[u],this.handleWebStorageEvent(h);return this.earlyEvents=[],this.platform.window.addEventListener("unload",(function(){return d.shutdown()})),this.started=!0,[2]}}))}))},e.prototype.writeSequenceNumber=function(e){this.setItem(this.sequenceNumberKey,JSON.stringify(e))},e.prototype.getAllActiveQueryTargets=function(){var e=We();return k(this.activeClients,(function(t,n){e=e.unionWith(n.activeTargetIds)})),e},e.prototype.isActiveQueryTarget=function(e){for(var t in this.activeClients)if(this.activeClients.hasOwnProperty(t)&&this.activeClients[t].activeTargetIds.has(e))return!0;return!1},e.prototype.addPendingMutation=function(e){this.persistMutationState(e,"pending")},e.prototype.updateMutationState=function(e,t,n){this.persistMutationState(e,t,n),this.removeMutationState(e)},e.prototype.addLocalQueryTarget=function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(Vi(this.persistenceKey,e));if(n){var r=Ki.fromWebStorageEntry(e,n);r&&(t=r.state)}}return this.localClientState.addQueryTarget(e),this.persistClientState(),t},e.prototype.removeLocalQueryTarget=function(e){this.localClientState.removeQueryTarget(e),this.persistClientState()},e.prototype.isLocalQueryTarget=function(e){return this.localClientState.activeTargetIds.has(e)},e.prototype.clearQueryState=function(e){this.removeItem(Vi(this.persistenceKey,e))},e.prototype.updateQueryState=function(e,t,n){this.persistQueryTargetState(e,t,n)},e.prototype.handleUserChange=function(e,t,n){var r=this;t.forEach((function(e){r.removeMutationState(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))},e.prototype.setOnlineState=function(e){this.persistOnlineState(e)},e.prototype.shutdown=function(){this.started&&(this.platform.window.removeEventListener("storage",this.storageListener),this.removeItem(this.localClientStorageKey),this.started=!1)},e.prototype.getItem=function(e){var t=this.storage.getItem(e);return m(Wi,"READ",e,t),t},e.prototype.setItem=function(e,t){m(Wi,"SET",e,t),this.storage.setItem(e,t)},e.prototype.removeItem=function(e){m(Wi,"REMOVE",e),this.storage.removeItem(e)},e.prototype.handleWebStorageEvent=function(e){var t=this;if(e.storageArea===this.storage){if(m(Wi,"EVENT",e.key,e.newValue),e.key===this.localClientStorageKey)return void g("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.queue.enqueueAndForget((function(){return a.__awaiter(t,void 0,void 0,(function(){var t,n,r,i,o,s;return a.__generator(this,(function(a){if(!this.started)return this.earlyEvents.push(e),[2];if(null===e.key)return[2];if(this.clientStateKeyRe.test(e.key)){if(null==e.newValue)return n=this.fromWebStorageClientStateKey(e.key),[2,this.handleClientStateEvent(n,null)];if(t=this.fromWebStorageClientState(e.key,e.newValue))return[2,this.handleClientStateEvent(t.clientId,t)]}else if(this.mutationBatchKeyRe.test(e.key)){if(null!==e.newValue&&(r=this.fromWebStorageMutationMetadata(e.key,e.newValue)))return[2,this.handleMutationBatchEvent(r)]}else if(this.queryTargetKeyRe.test(e.key)){if(null!==e.newValue&&(i=this.fromWebStorageQueryTargetMetadata(e.key,e.newValue)))return[2,this.handleQueryTargetEvent(i)]}else if(e.key===this.onlineStateKey){if(null!==e.newValue&&(o=this.fromWebStorageOnlineState(e.newValue)))return[2,this.handleOnlineStateEvent(o)]}else e.key===this.sequenceNumberKey&&(b(!!this.sequenceNumberHandler,"Missing sequenceNumberHandler"),(s=function(e){var t=ce.INVALID;if(null!=e)try{var n=JSON.parse(e);b("number"==typeof n,"Found non-numeric sequence number"),t=n}catch(e){g(Wi,"Failed to read sequence number from WebStorage",e)}return t}(e.newValue))!==ce.INVALID&&this.sequenceNumberHandler(s));return[2]}))}))}))}},Object.defineProperty(e.prototype,"localClientState",{get:function(){return this.activeClients[this.localClientId]},enumerable:!0,configurable:!0}),e.prototype.persistClientState=function(){this.setItem(this.localClientStorageKey,this.localClientState.toWebStorageJSON())},e.prototype.persistMutationState=function(e,t,n){var r=new zi(this.currentUser,e,t,n),i=Bi(this.persistenceKey,this.currentUser,e);this.setItem(i,r.toWebStorageJSON())},e.prototype.removeMutationState=function(e){var t=Bi(this.persistenceKey,this.currentUser,e);this.removeItem(t)},e.prototype.persistOnlineState=function(e){var t={clientId:this.localClientId,onlineState:Mr[e]};this.storage.setItem(this.onlineStateKey,JSON.stringify(t))},e.prototype.persistQueryTargetState=function(e,t,n){var r=Vi(this.persistenceKey,e),i=new Ki(e,t,n);this.setItem(r,i.toWebStorageJSON())},e.prototype.fromWebStorageClientStateKey=function(e){var t=this.clientStateKeyRe.exec(e);return t?t[1]:null},e.prototype.fromWebStorageClientState=function(e,t){var n=this.fromWebStorageClientStateKey(e);return b(null!==n,"Cannot parse client state key '"+e+"'"),Gi.fromWebStorageEntry(n,t)},e.prototype.fromWebStorageMutationMetadata=function(e,t){var n=this.mutationBatchKeyRe.exec(e);b(null!==n,"Cannot parse mutation batch key '"+e+"'");var r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return zi.fromWebStorageEntry(new Pi(i),r,t)},e.prototype.fromWebStorageQueryTargetMetadata=function(e,t){var n=this.queryTargetKeyRe.exec(e);b(null!==n,"Cannot parse query target key '"+e+"'");var r=Number(n[1]);return Ki.fromWebStorageEntry(r,t)},e.prototype.fromWebStorageOnlineState=function(e){return Qi.fromWebStorageEntry(e)},e.prototype.handleMutationBatchEvent=function(e){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(t){return e.user.uid!==this.currentUser.uid?(m(Wi,"Ignoring mutation for non-active user "+e.user.uid),[2]):[2,this.syncEngine.applyBatchState(e.batchId,e.state,e.error)]}))}))},e.prototype.handleQueryTargetEvent=function(e){return this.syncEngine.applyTargetState(e.targetId,e.state,e.error)},e.prototype.handleClientStateEvent=function(e,t){var n=this,r=this.getAllActiveQueryTargets();t?this.activeClients[e]=t:delete this.activeClients[e];var i=this.getAllActiveQueryTargets(),o=[],s=[];return i.forEach((function(e){return a.__awaiter(n,void 0,void 0,(function(){return a.__generator(this,(function(t){return r.has(e)||o.push(e),[2]}))}))})),r.forEach((function(e){return a.__awaiter(n,void 0,void 0,(function(){return a.__generator(this,(function(t){return i.has(e)||s.push(e),[2]}))}))})),this.syncEngine.applyActiveTargetsChange(o,s)},e.prototype.handleOnlineStateEvent=function(e){this.activeClients[e.clientId]&&this.onlineStateHandler(e.onlineState)},e}();var Ji=function(){function e(){this.localState=new Hi,this.queryState={},this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null}return e.prototype.addPendingMutation=function(e){},e.prototype.updateMutationState=function(e,t,n){},e.prototype.addLocalQueryTarget=function(e){return this.localState.addQueryTarget(e),this.queryState[e]||"not-current"},e.prototype.updateQueryState=function(e,t,n){this.queryState[e]=t},e.prototype.removeLocalQueryTarget=function(e){this.localState.removeQueryTarget(e)},e.prototype.isLocalQueryTarget=function(e){return this.localState.activeTargetIds.has(e)},e.prototype.clearQueryState=function(e){delete this.queryState[e]},e.prototype.getAllActiveQueryTargets=function(){return this.localState.activeTargetIds},e.prototype.isActiveQueryTarget=function(e){return this.localState.activeTargetIds.has(e)},e.prototype.start=function(){return this.localState=new Hi,Promise.resolve()},e.prototype.handleUserChange=function(e,t,n){},e.prototype.setOnlineState=function(e){},e.prototype.shutdown=function(){},e.prototype.writeSequenceNumber=function(e){},e}(),Xi=function(){function e(e,t){this.cacheSizeBytes=e,this.synchronizeTabs=t}return e.prototype.lruParams=function(){return Ln.withCacheSize(this.cacheSizeBytes)},e}(),$i=function(){},Zi=function(){function e(e,t,n,r){this.platform=e,this.databaseInfo=t,this.credentials=n,this.asyncQueue=r,this.clientId=J.newId()}return e.prototype.start=function(e){var t=this;this.verifyNotTerminated();var n=new pe,r=new pe,i=!1;return this.credentials.setChangeListener((function(o){i?t.asyncQueue.enqueueAndForget((function(){return t.handleCredentialChange(o)})):(i=!0,t.initializePersistence(e,r,o).then((function(e){return t.initializeRest(o,e)})).then(n.resolve,n.reject))})),this.asyncQueue.enqueueAndForget((function(){return n.promise})),r.promise},e.prototype.enableNetwork=function(){var e=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue((function(){return e.syncEngine.enableNetwork()}))},e.prototype.initializePersistence=function(e,t,n){var r=this;return e instanceof Xi?this.startIndexedDbPersistence(n,e).then((function(e){return t.resolve(),e})).catch((function(e){if(t.reject(e),!r.canFallback(e))throw e;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+e),r.startMemoryPersistence()})):(t.resolve(),this.startMemoryPersistence())},e.prototype.canFallback=function(e){return e instanceof I?e.code===S.FAILED_PRECONDITION||e.code===S.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)},e.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new I(S.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.startIndexedDbPersistence=function(e,t){var n=this,r=qn.buildStoragePrefix(this.databaseInfo),i=new Ti(this.databaseInfo.databaseId,{useProto3Json:!0});return Promise.resolve().then((function(){return a.__awaiter(n,void 0,void 0,(function(){var n,o;return a.__generator(this,(function(a){switch(a.label){case 0:if(t.synchronizeTabs&&!Yi.isAvailable(this.platform))throw new I(S.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");return n=t.lruParams(),this.sharedClientState=t.synchronizeTabs?new Yi(this.asyncQueue,this.platform,r,this.clientId,e):new Ji,[4,qn.createIndexedDbPersistence({allowTabSynchronization:t.synchronizeTabs,persistenceKey:r,clientId:this.clientId,platform:this.platform,queue:this.asyncQueue,serializer:i,lruParams:n,sequenceNumberSyncer:this.sharedClientState})];case 1:return o=a.sent(),this.persistence=o,[2,o.referenceDelegate.garbageCollector]}}))}))}))},e.prototype.startMemoryPersistence=function(){return this.persistence=Er.createEagerPersistence(this.clientId),this.sharedClientState=new Ji,Promise.resolve(null)},e.prototype.initializeRest=function(e,t){var n=this;return m("FirestoreClient","Initializing. user=",e.uid),this.platform.loadConnection(this.databaseInfo).then((function(r){return a.__awaiter(n,void 0,void 0,(function(){var n,i,o,s,c,u,l=this;return a.__generator(this,(function(h){switch(h.label){case 0:return n=new mr,this.localStore=new br(this.persistence,n,e),[4,this.localStore.start()];case 1:return h.sent(),t&&(this.lruScheduler=new Pn(t,this.asyncQueue,this.localStore)),i=this.platform.newConnectivityMonitor(),o=this.platform.newSerializer(this.databaseInfo.databaseId),s=new jr(this.asyncQueue,r,this.credentials,o),c=function(e){return l.syncEngine.applyOnlineStateChange(e,Lr.RemoteStore)},u=function(e){return l.syncEngine.applyOnlineStateChange(e,Lr.SharedClientState)},this.remoteStore=new ai(this.localStore,s,this.asyncQueue,c,i),this.syncEngine=new Li(this.localStore,this.remoteStore,this.sharedClientState,e),this.sharedClientState.onlineStateHandler=u,this.remoteStore.syncEngine=this.syncEngine,this.sharedClientState.syncEngine=this.syncEngine,this.eventMgr=new Ii(this.syncEngine),[4,this.sharedClientState.start()];case 2:return h.sent(),[4,this.remoteStore.start()];case 3:return h.sent(),[4,this.persistence.setPrimaryStateListener((function(e){return a.__awaiter(l,void 0,void 0,(function(){return a.__generator(this,(function(t){switch(t.label){case 0:return[4,this.syncEngine.applyPrimaryState(e)];case 1:return t.sent(),this.lruScheduler&&(e&&!this.lruScheduler.started?this.lruScheduler.start():e||this.lruScheduler.stop()),[2]}}))}))}))];case 4:return h.sent(),[4,this.persistence.setDatabaseDeletedListener((function(){return a.__awaiter(l,void 0,void 0,(function(){return a.__generator(this,(function(e){switch(e.label){case 0:return[4,this.terminate()];case 1:return e.sent(),[2]}}))}))}))];case 5:return h.sent(),[2]}}))}))}))},e.prototype.handleCredentialChange=function(e){return this.asyncQueue.verifyOperationInProgress(),m("FirestoreClient","Credential Changed. Current user: "+e.uid),this.syncEngine.handleCredentialChange(e)},e.prototype.disableNetwork=function(){var e=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue((function(){return e.syncEngine.disableNetwork()}))},e.prototype.terminate=function(){var e=this;return this.asyncQueue.enqueueAndInitiateShutdown((function(){return a.__awaiter(e,void 0,void 0,(function(){return a.__generator(this,(function(e){switch(e.label){case 0:return this.lruScheduler&&this.lruScheduler.stop(),[4,this.remoteStore.shutdown()];case 1:return e.sent(),[4,this.sharedClientState.shutdown()];case 2:return e.sent(),[4,this.persistence.shutdown()];case 3:return e.sent(),this.credentials.removeChangeListener(),[2]}}))}))}))},e.prototype.waitForPendingWrites=function(){var e=this;this.verifyNotTerminated();var t=new pe;return this.asyncQueue.enqueueAndForget((function(){return e.syncEngine.registerPendingWritesCallback(t)})),t.promise},e.prototype.listen=function(e,t,n){var r=this;this.verifyNotTerminated();var i=new Ei(e,t,n);return this.asyncQueue.enqueueAndForget((function(){return r.eventMgr.listen(i)})),i},e.prototype.unlisten=function(e){var t=this;this.clientTerminated||this.asyncQueue.enqueueAndForget((function(){return t.eventMgr.unlisten(e)}))},e.prototype.getDocumentFromLocalCache=function(e){var t=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue((function(){return t.localStore.readDocument(e)})).then((function(e){if(e instanceof Kt)return e;if(e instanceof Gt)return null;throw new I(S.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")}))},e.prototype.getDocumentsFromLocalCache=function(e){var t=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue((function(){return a.__awaiter(t,void 0,void 0,(function(){var t,n,r;return a.__generator(this,(function(i){switch(i.label){case 0:return[4,this.localStore.executeQuery(e,!0)];case 1:return t=i.sent(),n=new ki(e,t.remoteKeys),r=n.computeDocChanges(t.documents),[2,n.applyChanges(r,!1).snapshot]}}))}))}))},e.prototype.write=function(e){var t=this;this.verifyNotTerminated();var n=new pe;return this.asyncQueue.enqueueAndForget((function(){return t.syncEngine.write(e,n)})),n.promise},e.prototype.databaseId=function(){return this.databaseInfo.databaseId},e.prototype.addSnapshotsInSyncListener=function(e){var t=this;this.verifyNotTerminated(),this.asyncQueue.enqueueAndForget((function(){return t.eventMgr.addSnapshotsInSyncListener(e),Promise.resolve()}))},e.prototype.removeSnapshotsInSyncListener=function(e){this.clientTerminated||this.eventMgr.removeSnapshotsInSyncListener(e)},Object.defineProperty(e.prototype,"clientTerminated",{get:function(){return this.asyncQueue.isShuttingDown},enumerable:!0,configurable:!0}),e.prototype.transaction=function(e){var t=this;this.verifyNotTerminated();var n=new pe;return this.asyncQueue.enqueueAndForget((function(){return t.syncEngine.runTransaction(t.asyncQueue,e,n),Promise.resolve()})),n.promise},e}(),eo=function(){function e(e){this.observer=e,this.muted=!1}return e.prototype.next=function(e){this.scheduleEvent(this.observer.next,e)},e.prototype.error=function(e){this.scheduleEvent(this.observer.error,e)},e.prototype.mute=function(){this.muted=!0},e.prototype.scheduleEvent=function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)},e}(),to=function(){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];!function(e,t,n,r){if(!(t instanceof Array)||t.length<r)throw new I(S.INVALID_ARGUMENT,"Function "+e+"() requires its "+n+" argument to be an array with at least "+Y(r,"element")+".")}("FieldPath",e,"fieldNames",1);for(var n=0;n<e.length;++n)if(P("FieldPath","string",n,e[n]),0===e[n].length)throw new I(S.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new de(e)}return e.documentId=function(){return e._DOCUMENT_ID},e.prototype.isEqual=function(t){if(!(t instanceof e))throw G("isEqual","FieldPath",1,t);return this._internalPath.isEqual(t._internalPath)},e._DOCUMENT_ID=new e(de.keyField().canonicalString()),e}(),no=new RegExp("[~\\*/\\[\\]]");
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ro=function(e,t){this.user=t,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+e},io=function(){function e(){this.changeListener=null}return e.prototype.getToken=function(){return Promise.resolve(null)},e.prototype.invalidateToken=function(){},e.prototype.setChangeListener=function(e){b(!this.changeListener,"Can only call setChangeListener() once."),this.changeListener=e,e(Pi.UNAUTHENTICATED)},e.prototype.removeChangeListener=function(){b(null!==this.changeListener,"removeChangeListener() when no listener registered"),this.changeListener=null},e}(),oo=function(){function e(e){var t=this;this.tokenListener=null,this.currentUser=Pi.UNAUTHENTICATED,this.receivedInitialUser=!1,this.tokenCounter=0,this.changeListener=null,this.forceRefresh=!1,this.tokenListener=function(){t.tokenCounter++,t.currentUser=t.getUser(),t.receivedInitialUser=!0,t.changeListener&&t.changeListener(t.currentUser)},this.tokenCounter=0,this.auth=e.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.tokenListener):(this.tokenListener(null),e.get().then((function(e){t.auth=e,t.tokenListener&&t.auth.addAuthTokenListener(t.tokenListener)}),(function(){})))}return e.prototype.getToken=function(){var e=this;b(null!=this.tokenListener,"getToken cannot be called after listener removed.");var t=this.tokenCounter,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){if(e.tokenCounter!==t)throw new I(S.ABORTED,"getToken aborted due to token change.");return n?(b("string"==typeof n.accessToken,"Invalid tokenData returned from getToken():"+n),new ro(n.accessToken,e.currentUser)):null})):Promise.resolve(null)},e.prototype.invalidateToken=function(){this.forceRefresh=!0},e.prototype.setChangeListener=function(e){b(!this.changeListener,"Can only call setChangeListener() once."),this.changeListener=e,this.receivedInitialUser&&e(this.currentUser)},e.prototype.removeChangeListener=function(){b(null!=this.tokenListener,"removeChangeListener() called twice"),b(null!==this.changeListener,"removeChangeListener() called when no listener registered"),this.auth&&this.auth.removeAuthTokenListener(this.tokenListener),this.tokenListener=null,this.changeListener=null},e.prototype.getUser=function(){var e=this.auth&&this.auth.getUid();return b(null===e||"string"==typeof e,"Received invalid UID: "+e),new Pi(e)},e}(),ao=function(){function e(e,t){this.gapi=e,this.sessionIndex=t,this.type="FirstParty",this.user=Pi.FIRST_PARTY}return Object.defineProperty(e.prototype,"authHeaders",{get:function(){var e={"X-Goog-AuthUser":this.sessionIndex},t=this.gapi.auth.getAuthHeaderValueForFirstParty([]);return t&&(e.Authorization=t),e},enumerable:!0,configurable:!0}),e}(),so=function(){function e(e,t){this.gapi=e,this.sessionIndex=t}return e.prototype.getToken=function(){return Promise.resolve(new ao(this.gapi,this.sessionIndex))},e.prototype.setChangeListener=function(e){e(Pi.FIRST_PARTY)},e.prototype.removeChangeListener=function(){},e.prototype.invalidateToken=function(){},e}();function co(e){if(!e)return new io;switch(e.type){case"gapi":var t=e.client;return b(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty),"unexpected gapi interface"),new so(t,e.sessionIndex||"0");case"provider":return e.client;default:throw new I(S.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uo(e){return function(e,t){if("object"!=typeof e||null===e)return!1;for(var n=e,r=0,i=t;r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e,["next","error","complete"])}var lo,ho=function(){function e(e){this._methodName=e}return e.delete=function(){return A("FieldValue.delete",arguments),fo.instance},e.serverTimestamp=function(){return A("FieldValue.serverTimestamp",arguments),po.instance},e.arrayUnion=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return M("FieldValue.arrayUnion",arguments,1),new mo(e)},e.arrayRemove=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return M("FieldValue.arrayRemove",arguments,1),new go(e)},e.increment=function(e){return P("FieldValue.increment","number",1,e),x("FieldValue.increment",arguments,1),new yo(e)},e.prototype.isEqual=function(e){return this===e},e}(),fo=function(e){function t(){return e.call(this,"FieldValue.delete")||this}return a.__extends(t,e),t.instance=new t,t}(ho),po=function(e){function t(){return e.call(this,"FieldValue.serverTimestamp")||this}return a.__extends(t,e),t.instance=new t,t}(ho),mo=function(e){function t(t){var n=e.call(this,"FieldValue.arrayUnion")||this;return n._elements=t,n}return a.__extends(t,e),t}(ho),go=function(e){function t(t){var n=e.call(this,"FieldValue.arrayRemove")||this;return n._elements=t,n}return a.__extends(t,e),t}(ho),yo=function(e){function t(t){var n=e.call(this,"FieldValue.increment")||this;return n._operand=t,n}return a.__extends(t,e),t}(ho),vo=E(ho,"Use FieldValue.<field>() instead."),bo=/^__.*__$/,wo=function(){function e(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}return e.prototype.toMutations=function(e,t){var n=[];return null!==this.fieldMask?n.push(new Ct(e,this.data,this.fieldMask,t)):n.push(new Et(e,this.data,t)),this.fieldTransforms.length>0&&n.push(new _t(e,this.fieldTransforms)),n},e}(),To=function(){function e(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}return e.prototype.toMutations=function(e,t){var n=[new Ct(e,this.data,this.fieldMask,t)];return this.fieldTransforms.length>0&&n.push(new _t(e,this.fieldTransforms)),n},e}();function So(e){switch(e){case lo.Set:case lo.MergeSet:case lo.Update:return!0;case lo.Argument:case lo.ArrayArgument:return!1;default:throw v("Unexpected case for UserDataSource: "+e)}}!function(e){e[e.Set=0]="Set",e[e.Update=1]="Update",e[e.MergeSet=2]="MergeSet",e[e.Argument=3]="Argument",e[e.ArrayArgument=4]="ArrayArgument"}(lo||(lo={}));var Io=function(){function e(e,t,n,r,i,o){this.dataSource=e,this.methodName=t,this.path=n,this.arrayElement=r,void 0===i&&this.validatePath(),this.arrayElement=void 0!==r&&r,this.fieldTransforms=i||[],this.fieldMask=o||[]}return e.prototype.childContextForField=function(t){var n=null==this.path?null:this.path.child(t),r=new e(this.dataSource,this.methodName,n,!1,this.fieldTransforms,this.fieldMask);return r.validatePathSegment(t),r},e.prototype.childContextForFieldPath=function(t){var n=null==this.path?null:this.path.child(t),r=new e(this.dataSource,this.methodName,n,!1,this.fieldTransforms,this.fieldMask);return r.validatePath(),r},e.prototype.childContextForArray=function(t){return new e(this.dataSource,this.methodName,null,!0,this.fieldTransforms,this.fieldMask)},e.prototype.createError=function(e){var t=null===this.path||this.path.isEmpty()?"":" (found in field "+this.path.toString()+")";return new I(S.INVALID_ARGUMENT,"Function "+this.methodName+"() called with invalid data. "+e+t)},e.prototype.contains=function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))},e.prototype.validatePath=function(){if(null!==this.path)for(var e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))},e.prototype.validatePathSegment=function(e){if(0===e.length)throw this.createError("Document fields must not be empty");if(So(this.dataSource)&&bo.test(e))throw this.createError('Document fields cannot begin and end with "__"')},e}(),Eo=function(e,t){this.databaseId=e,this.key=t},Co=function(){function e(e){this.preConverter=e}return e.prototype.parseSetData=function(e,t){var n=new Io(lo.Set,e,de.EMPTY_PATH);Do("Data must be an object, but it was:",n,t);var r=this.parseData(t,n);return new wo(r,null,n.fieldTransforms)},e.prototype.parseMergeData=function(e,t,n){var r=new Io(lo.MergeSet,e,de.EMPTY_PATH);Do("Data must be an object, but it was:",r,t);var i,o,a=this.parseData(t,r);if(n){for(var s=new xe(de.comparator),c=0,u=n;c<u.length;c++){var l=u[c],h=void 0;if(l instanceof to)h=l._internalPath;else{if("string"!=typeof l)throw v("Expected stringOrFieldPath to be a string or a FieldPath");h=No(e,l)}if(!r.contains(h))throw new I(S.INVALID_ARGUMENT,"Field '"+h+"' is specified in your field mask but missing from your input data.");s=s.add(h)}i=yt.fromSet(s),o=r.fieldTransforms.filter((function(e){return i.covers(e.field)}))}else i=yt.fromArray(r.fieldMask),o=r.fieldTransforms;return new wo(a,i,o)},e.prototype.parseUpdateData=function(e,t){var n=this,r=new Io(lo.Update,e,de.EMPTY_PATH);Do("Data must be an object, but it was:",r,t);var i=new xe(de.comparator),o=Ut.EMPTY;k(t,(function(t,a){var s=No(e,t),c=r.childContextForFieldPath(s);if((a=n.runPreConverter(a,c))instanceof fo)i=i.add(s);else{var u=n.parseData(a,c);null!=u&&(i=i.add(s),o=o.set(s,u))}}));var a=yt.fromSet(i);return new To(o,a,r.fieldTransforms)},e.prototype.parseUpdateVarargs=function(e,t,n,r){var i=new Io(lo.Update,e,de.EMPTY_PATH),o=[ko(e,t)],a=[n];if(r.length%2!=0)throw new I(S.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var s=0;s<r.length;s+=2)o.push(ko(e,r[s])),a.push(r[s+1]);var c=new xe(de.comparator),u=Ut.EMPTY;for(s=0;s<o.length;++s){var l=o[s],h=i.childContextForFieldPath(l),d=this.runPreConverter(a[s],h);if(d instanceof fo)c=c.add(l);else{var f=this.parseData(d,h);null!=f&&(c=c.add(l),u=u.set(l,f))}}var p=yt.fromSet(c);return new To(u,p,i.fieldTransforms)},e.prototype.parseQueryValue=function(e,t,n){void 0===n&&(n=!1);var r=new Io(n?lo.ArrayArgument:lo.Argument,e,de.EMPTY_PATH),i=this.parseData(t,r);return b(null!=i,"Parsed data should not be null."),b(0===r.fieldTransforms.length,"Field transforms should have been disallowed."),i},e.prototype.runPreConverter=function(e,t){try{return this.preConverter(e)}catch(e){var n=Ao(e);throw t.createError(n)}},e.prototype.parseData=function(e,t){if(_o(e=this.runPreConverter(e,t)))return Do("Unsupported field value:",t,e),this.parseObject(e,t);if(e instanceof ho)return this.parseSentinelFieldValue(e,t),null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.arrayElement&&t.dataSource!==lo.ArrayArgument)throw t.createError("Nested arrays are not supported");return this.parseArray(e,t)}return this.parseScalarValue(e,t)},e.prototype.parseObject=function(e,t){var n=this,r=new De(X);return N(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):k(e,(function(e,i){var o=n.parseData(i,t.childContextForField(e));null!=o&&(r=r.insert(e,o))})),new Ut(r)},e.prototype.parseArray=function(e,t){for(var n=[],r=0,i=0,o=e;i<o.length;i++){var a=o[i],s=this.parseData(a,t.childContextForArray(r));null==s&&(s=At.INSTANCE),n.push(s),r++}return new Wt(n)},e.prototype.parseSentinelFieldValue=function(e,t){if(!So(t.dataSource))throw t.createError(e._methodName+"() can only be used with update() and set()");if(null===t.path)throw t.createError(e._methodName+"() is not currently supported inside arrays");if(e instanceof fo){if(t.dataSource!==lo.MergeSet)throw t.dataSource===lo.Update?(b(t.path.length>0,"FieldValue.delete() at the top level should have already been handled."),t.createError("FieldValue.delete() can only appear at the top level of your update data")):t.createError("FieldValue.delete() cannot be used with set() unless you pass {merge:true}");t.fieldMask.push(t.path)}else if(e instanceof po)t.fieldTransforms.push(new vt(t.path,ci.instance));else if(e instanceof mo){var n=this.parseArrayTransformElements(e._methodName,e._elements),r=new ui(n);t.fieldTransforms.push(new vt(t.path,r))}else if(e instanceof go){n=this.parseArrayTransformElements(e._methodName,e._elements);var i=new li(n);t.fieldTransforms.push(new vt(t.path,i))}else if(e instanceof yo){var o=this.parseQueryValue("FieldValue.increment",e._operand),a=new hi(o);t.fieldTransforms.push(new vt(t.path,a))}else v("Unknown FieldValue type: "+e)},e.prototype.parseScalarValue=function(e,t){if(null===e)return At.INSTANCE;if("number"==typeof e)return $n(e)?new Pt(e):new Ot(e);if("boolean"==typeof e)return xt.of(e);if("string"==typeof e)return new Rt(e);if(e instanceof Date)return new jt(Ce.fromDate(e));if(e instanceof Ce)return new jt(new Ce(e.seconds,1e3*Math.floor(e.nanoseconds/1e3)));if(e instanceof si)return new qt(e);if(e instanceof re)return new Ft(e);if(e instanceof Eo)return new Vt(e.databaseId,e.key);throw t.createError("Unsupported field value: "+W(e))},e.prototype.parseArrayTransformElements=function(e,t){var n=this;return t.map((function(t,r){var i=new Io(lo.Argument,e,de.EMPTY_PATH);return n.parseData(t,i.childContextForArray(r))}))},e}();function _o(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Ce||e instanceof si||e instanceof re||e instanceof Eo||e instanceof ho)}function Do(e,t,n){if(!_o(n)||!U(n)){var r=W(n);throw"an object"===r?t.createError(e+" a custom object"):t.createError(e+" "+r)}}function ko(e,t){if(t instanceof to)return t._internalPath;if("string"==typeof t)return No(e,t);throw new I(S.INVALID_ARGUMENT,"Function "+e+"() called with invalid data. Field path arguments must be of type string or FieldPath.")}function No(e,t){try{return function(e){if(e.search(no)>=0)throw new I(S.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(to.bind.apply(to,a.__spreadArrays([void 0],e.split("."))))}catch(t){throw new I(S.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(t)._internalPath}catch(t){var n=Ao(t);throw new I(S.INVALID_ARGUMENT,"Function "+e+"() called with invalid data. "+n)}}function Ao(e){return e instanceof Error?e.message:e.toString()}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xo="firestore.googleapis.com",Mo=!0,Lo=!0,Po=!1,Oo=Ln.COLLECTION_DISABLED,Ro=function(){function e(e){if(void 0===e.host){if(void 0!==e.ssl)throw new I(S.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=xo,this.ssl=Mo}else R("settings","non-empty string","host",e.host),this.host=e.host,j("settings","boolean","ssl",e.ssl),this.ssl=_(e.ssl,Mo);if(K("settings",e,["host","ssl","credentials","timestampsInSnapshots","cacheSizeBytes","experimentalForceLongPolling"]),j("settings","object","credentials",e.credentials),this.credentials=e.credentials,j("settings","boolean","timestampsInSnapshots",e.timestampsInSnapshots),!0===e.timestampsInSnapshots?g("\n  The timestampsInSnapshots setting now defaults to true and you no\n  longer need to explicitly set it. In a future release, the setting\n  will be removed entirely and so it is recommended that you remove it\n  from your firestore.settings() call now."):!1===e.timestampsInSnapshots&&g("\n  The timestampsInSnapshots setting will soon be removed. YOU MUST UPDATE\n  YOUR CODE.\n\n  To hide this warning, stop using the timestampsInSnapshots setting in your\n  firestore.settings({ ... }) call.\n\n  Once you remove the setting, Timestamps stored in Cloud Firestore will be\n  read back as Firebase Timestamp objects instead of as system Date objects.\n  So you will also need to update code expecting a Date to instead expect a\n  Timestamp. For example:\n\n  // Old:\n  const date = snapshot.get('created_at');\n  // New:\n  const timestamp = snapshot.get('created_at'); const date =\n  timestamp.toDate();\n\n  Please audit all existing usages of Date when you enable the new\n  behavior."),this.timestampsInSnapshots=_(e.timestampsInSnapshots,Lo),j("settings","number","cacheSizeBytes",e.cacheSizeBytes),void 0===e.cacheSizeBytes)this.cacheSizeBytes=Ln.DEFAULT_CACHE_SIZE_BYTES;else{if(e.cacheSizeBytes!==Oo&&e.cacheSizeBytes<Ln.MINIMUM_CACHE_SIZE_BYTES)throw new I(S.INVALID_ARGUMENT,"cacheSizeBytes must be at least "+Ln.MINIMUM_CACHE_SIZE_BYTES);this.cacheSizeBytes=e.cacheSizeBytes}j("settings","boolean","experimentalForceLongPolling",e.experimentalForceLongPolling),this.forceLongPolling=void 0===e.experimentalForceLongPolling?Po:e.experimentalForceLongPolling}return e.prototype.isEqual=function(e){return this.host===e.host&&this.ssl===e.ssl&&this.timestampsInSnapshots===e.timestampsInSnapshots&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.forceLongPolling===e.forceLongPolling},e}(),jo=function(){function e(t,n){var r=this;if(this._firebaseApp=null,this._queue=new ge,this.INTERNAL={delete:function(){return a.__awaiter(r,void 0,void 0,(function(){return a.__generator(this,(function(e){switch(e.label){case 0:return this.ensureClientConfigured(),[4,this._firestoreClient.terminate()];case 1:return e.sent(),[2]}}))}))}},"object"==typeof t.options){var i=t;this._firebaseApp=i,this._databaseId=e.databaseIdFromApp(i),this._persistenceKey=i.name,this._credentials=new oo(n)}else{var o=t;if(!o.projectId)throw new I(S.INVALID_ARGUMENT,"Must provide projectId");this._databaseId=new se(o.projectId,o.database),this._persistenceKey="[DEFAULT]",this._credentials=new io}this._settings=new Ro({}),this._dataConverter=this.createDataConverter(this._databaseId)}return e.prototype.settings=function(e){if(x("Firestore.settings",arguments,1),P("Firestore.settings","object",1,e),C(e,"persistence"))throw new I(S.INVALID_ARGUMENT,'"persistence" is now specified with a separate call to firestore.enablePersistence().');var t=new Ro(e);if(this._firestoreClient&&!this._settings.isEqual(t))throw new I(S.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");this._settings=t,void 0!==t.credentials&&(this._credentials=co(t.credentials))},e.prototype.enableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.enableNetwork()},e.prototype.disableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.disableNetwork()},e.prototype.enablePersistence=function(e){if(this._firestoreClient)throw new I(S.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");var t=!1;return e&&(void 0!==e.experimentalTabSynchronization&&g("The 'experimentalTabSynchronization' setting has been renamed to 'synchronizeTabs'. In a future release, the setting will be removed and it is recommended that you update your firestore.enablePersistence() call to use 'synchronizeTabs'."),t=_(void 0!==e.synchronizeTabs?e.synchronizeTabs:e.experimentalTabSynchronization,!1)),this.configureClient(new Xi(this._settings.cacheSizeBytes,t))},e.prototype.clearPersistence=function(){var e=this,t=qn.buildStoragePrefix(this.makeDatabaseInfo()),n=new pe;return this._queue.enqueueAndForgetEvenAfterShutdown((function(){return a.__awaiter(e,void 0,void 0,(function(){var e;return a.__generator(this,(function(r){switch(r.label){case 0:if(r.trys.push([0,2,,3]),void 0!==this._firestoreClient&&!this._firestoreClient.clientTerminated)throw new I(S.FAILED_PRECONDITION,"Persistence cannot be cleared after this Firestore instance is initialized.");return[4,qn.clearPersistence(t)];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise},e.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.INTERNAL.delete()},Object.defineProperty(e.prototype,"_isTerminated",{get:function(){return this.ensureClientConfigured(),this._firestoreClient.clientTerminated},enumerable:!0,configurable:!0}),e.prototype.waitForPendingWrites=function(){return this.ensureClientConfigured(),this._firestoreClient.waitForPendingWrites()},e.prototype.onSnapshotsInSync=function(e){if(this.ensureClientConfigured(),uo(e))return this.onSnapshotsInSyncInternal(e);P("Firestore.onSnapshotsInSync","function",1,e);var t={next:e};return this.onSnapshotsInSyncInternal(t)},e.prototype.onSnapshotsInSyncInternal=function(e){var t=this,n=new eo({next:function(){e.next&&e.next()},error:function(e){throw v("Uncaught Error in onSnapshotsInSync")}});return this._firestoreClient.addSnapshotsInSyncListener(n),function(){n.mute(),t._firestoreClient.removeSnapshotsInSyncListener(n)}},e.prototype.ensureClientConfigured=function(){return this._firestoreClient||this.configureClient(new $i),this._firestoreClient},e.prototype.makeDatabaseInfo=function(){return new oe(this._databaseId,this._persistenceKey,this._settings.host,this._settings.ssl,this._settings.forceLongPolling)},e.prototype.configureClient=function(e){b(!!this._settings.host,"FirestoreSettings.host is not set"),b(!this._firestoreClient,"configureClient() called multiple times");var t=this.makeDatabaseInfo();return this._firestoreClient=new Zi(w.getPlatform(),t,this._credentials,this._queue),this._firestoreClient.start(e)},e.prototype.createDataConverter=function(e){return new Co((function(t){if(t instanceof Vo){var n=e,r=t.firestore._databaseId;if(!r.isEqual(n))throw new I(S.INVALID_ARGUMENT,"Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return new Eo(e,t._key)}return t}))},e.databaseIdFromApp=function(e){var t=e.options;if(!C(t,"projectId"))throw new I(S.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var n=t.projectId;if(!n||"string"!=typeof n)throw new I(S.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new se(n)},Object.defineProperty(e.prototype,"app",{get:function(){if(!this._firebaseApp)throw new I(S.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._firebaseApp},enumerable:!0,configurable:!0}),e.prototype.collection=function(e){return x("Firestore.collection",arguments,1),P("Firestore.collection","non-empty string",1,e),this.ensureClientConfigured(),new Go(le.fromString(e),this)},e.prototype.doc=function(e){return x("Firestore.doc",arguments,1),P("Firestore.doc","non-empty string",1,e),this.ensureClientConfigured(),Vo.forPath(le.fromString(e),this)},e.prototype.collectionGroup=function(e){if(x("Firestore.collectionGroup",arguments,1),P("Firestore.collectionGroup","non-empty string",1,e),e.indexOf("/")>=0)throw new I(S.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return this.ensureClientConfigured(),new zo(new tr(le.EMPTY_PATH,e),this)},e.prototype.runTransaction=function(e){var t=this;return x("Firestore.runTransaction",arguments,1),P("Firestore.runTransaction","function",1,e),this.ensureClientConfigured().transaction((function(n){return e(new Bo(t,n))}))},e.prototype.batch=function(){return this.ensureClientConfigured(),new Fo(this)},Object.defineProperty(e,"logLevel",{get:function(){switch(f()){case i.DEBUG:return"debug";case i.ERROR:return"error";case i.SILENT:return"silent";default:return v("Unknown log level: "+f())}},enumerable:!0,configurable:!0}),e.setLogLevel=function(e){switch(x("Firestore.setLogLevel",arguments,1),P("Firestore.setLogLevel","non-empty string",1,e),e){case"debug":p(i.DEBUG);break;case"error":p(i.ERROR);break;case"silent":p(i.SILENT);break;default:throw new I(S.INVALID_ARGUMENT,"Invalid log level: "+e)}},e.prototype._areTimestampsInSnapshotsEnabled=function(){return this._settings.timestampsInSnapshots},e}(),Bo=function(){function e(e,t){this._firestore=e,this._transaction=t}return e.prototype.get=function(e){var t=this;x("Transaction.get",arguments,1);var n=Jo("Transaction.get",e,this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return v("Mismatch in docs returned from document lookup.");var r=e[0];if(r instanceof Gt)return new Uo(t._firestore,n._key,null,!1,!1,n._converter);if(r instanceof Kt)return new Uo(t._firestore,n._key,r,!1,!1,n._converter);throw v("BatchGetDocumentsRequest returned unexpected document type: "+r.constructor.name)}))},e.prototype.set=function(e,t,n){L("Transaction.set",arguments,2,3);var r=Jo("Transaction.set",e,this._firestore);n=Qo("Transaction.set",n);var i=$o(r._converter,t,"Transaction.set"),o=i[0],a=i[1],s=n.merge||n.mergeFields?this._firestore._dataConverter.parseMergeData(a,o,n.mergeFields):this._firestore._dataConverter.parseSetData(a,o);return this._transaction.set(r._key,s),this},e.prototype.update=function(e,t,n){for(var r,i,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];return"string"==typeof t||t instanceof to?(M("Transaction.update",arguments,3),r=Jo("Transaction.update",e,this._firestore),i=this._firestore._dataConverter.parseUpdateVarargs("Transaction.update",t,n,o)):(x("Transaction.update",arguments,2),r=Jo("Transaction.update",e,this._firestore),i=this._firestore._dataConverter.parseUpdateData("Transaction.update",t)),this._transaction.update(r._key,i),this},e.prototype.delete=function(e){x("Transaction.delete",arguments,1);var t=Jo("Transaction.delete",e,this._firestore);return this._transaction.delete(t._key),this},e}(),Fo=function(){function e(e){this._firestore=e,this._mutations=[],this._committed=!1}return e.prototype.set=function(e,t,n){L("WriteBatch.set",arguments,2,3),this.verifyNotCommitted();var r=Jo("WriteBatch.set",e,this._firestore);n=Qo("WriteBatch.set",n);var i=$o(r._converter,t,"WriteBatch.set"),o=i[0],a=i[1],s=n.merge||n.mergeFields?this._firestore._dataConverter.parseMergeData(a,o,n.mergeFields):this._firestore._dataConverter.parseSetData(a,o);return this._mutations=this._mutations.concat(s.toMutations(r._key,St.NONE)),this},e.prototype.update=function(e,t,n){for(var r,i,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];return this.verifyNotCommitted(),"string"==typeof t||t instanceof to?(M("WriteBatch.update",arguments,3),r=Jo("WriteBatch.update",e,this._firestore),i=this._firestore._dataConverter.parseUpdateVarargs("WriteBatch.update",t,n,o)):(x("WriteBatch.update",arguments,2),r=Jo("WriteBatch.update",e,this._firestore),i=this._firestore._dataConverter.parseUpdateData("WriteBatch.update",t)),this._mutations=this._mutations.concat(i.toMutations(r._key,St.exists(!0))),this},e.prototype.delete=function(e){x("WriteBatch.delete",arguments,1),this.verifyNotCommitted();var t=Jo("WriteBatch.delete",e,this._firestore);return this._mutations=this._mutations.concat(new Dt(t._key,St.NONE)),this},e.prototype.commit=function(){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(e){return this.verifyNotCommitted(),this._committed=!0,this._mutations.length>0?[2,this._firestore.ensureClientConfigured().write(this._mutations)]:[2]}))}))},e.prototype.verifyNotCommitted=function(){if(this._committed)throw new I(S.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},e}(),Vo=function(){function e(e,t,n){this._key=e,this.firestore=t,this._converter=n,this._firestoreClient=this.firestore.ensureClientConfigured()}return e.forPath=function(t,n,r){if(t.length%2!=0)throw new I(S.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.canonicalString()+" has "+t.length);return new e(new fe(t),n,r)},Object.defineProperty(e.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new Go(this._key.path.popLast(),this.firestore,this._converter)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!0,configurable:!0}),e.prototype.collection=function(e){if(x("DocumentReference.collection",arguments,1),P("DocumentReference.collection","non-empty string",1,e),!e)throw new I(S.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var t=le.fromString(e);return new Go(this._key.path.child(t),this.firestore)},e.prototype.isEqual=function(t){if(!(t instanceof e))throw G("isEqual","DocumentReference",1,t);return this.firestore===t.firestore&&this._key.isEqual(t._key)&&this._converter===t._converter},e.prototype.set=function(e,t){L("DocumentReference.set",arguments,1,2),t=Qo("DocumentReference.set",t);var n=$o(this._converter,e,"DocumentReference.set"),r=n[0],i=n[1],o=t.merge||t.mergeFields?this.firestore._dataConverter.parseMergeData(i,r,t.mergeFields):this.firestore._dataConverter.parseSetData(i,r);return this._firestoreClient.write(o.toMutations(this._key,St.NONE))},e.prototype.update=function(e,t){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return"string"==typeof e||e instanceof to?(M("DocumentReference.update",arguments,2),n=this.firestore._dataConverter.parseUpdateVarargs("DocumentReference.update",e,t,r)):(x("DocumentReference.update",arguments,1),n=this.firestore._dataConverter.parseUpdateData("DocumentReference.update",e)),this._firestoreClient.write(n.toMutations(this._key,St.exists(!0)))},e.prototype.delete=function(){return x("DocumentReference.delete",arguments,0),this._firestoreClient.write([new Dt(this._key,St.NONE)])},e.prototype.onSnapshot=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];L("DocumentReference.onSnapshot",arguments,1,4);var n,r={includeMetadataChanges:!1},i=0;"object"!=typeof e[i]||uo(e[i])||(K("DocumentReference.onSnapshot",r=e[i],["includeMetadataChanges"]),j("DocumentReference.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++);var o={includeMetadataChanges:r.includeMetadataChanges};return uo(e[i])?n=e[i]:(P("DocumentReference.onSnapshot","function",i,e[i]),O("DocumentReference.onSnapshot","function",i+1,e[i+1]),O("DocumentReference.onSnapshot","function",i+2,e[i+2]),n={next:e[i],error:e[i+1],complete:e[i+2]}),this.onSnapshotInternal(o,n)},e.prototype.onSnapshotInternal=function(e,t){var n=this,r=function(e){console.error("Uncaught Error in onSnapshot:",e)};t.error&&(r=t.error.bind(t));var i=new eo({next:function(e){if(t.next){b(e.docs.size<=1,"Too many documents returned on a document query");var r=e.docs.get(n._key);t.next(new Uo(n.firestore,n._key,r,e.fromCache,e.hasPendingWrites,n._converter))}},error:r}),o=this._firestoreClient.listen(tr.atPath(this._key.path),i,e);return function(){i.mute(),n._firestoreClient.unlisten(o)}},e.prototype.get=function(e){var t=this;return L("DocumentReference.get",arguments,0,1),Yo("DocumentReference.get",e),new Promise((function(n,r){e&&"cache"===e.source?t.firestore.ensureClientConfigured().getDocumentFromLocalCache(t._key).then((function(e){n(new Uo(t.firestore,t._key,e,!0,e instanceof Kt&&e.hasLocalMutations,t._converter))}),r):t.getViaSnapshotListener(n,r,e)}))},e.prototype.getViaSnapshotListener=function(e,t,n){var r=this.onSnapshotInternal({includeMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(i){r(),!i.exists&&i.metadata.fromCache?t(new I(S.UNAVAILABLE,"Failed to get document because the client is offline.")):i.exists&&i.metadata.fromCache&&n&&"server"===n.source?t(new I(S.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):e(i)},error:t})},e.prototype.withConverter=function(t){return new e(this._key,this.firestore,t)},e}(),qo=function(){function e(e,t){this.hasPendingWrites=e,this.fromCache=t}return e.prototype.isEqual=function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache},e}(),Uo=function(){function e(e,t,n,r,i,o){this._firestore=e,this._key=t,this._document=n,this._fromCache=r,this._hasPendingWrites=i,this._converter=o}return e.prototype.data=function(e){if(L("DocumentSnapshot.data",arguments,0,1),e=Ho("DocumentSnapshot.data",e),this._document){if(this._converter){var t=new Wo(this._firestore,this._key,this._document,this._fromCache,this._hasPendingWrites);return this._converter.fromFirestore(t,e)}return this.toJSObject(this._document.data(),kt.fromSnapshotOptions(e,this._firestore._areTimestampsInSnapshotsEnabled()))}},e.prototype.get=function(e,t){if(L("DocumentSnapshot.get",arguments,1,2),t=Ho("DocumentSnapshot.get",t),this._document){var n=this._document.data().field(ko("DocumentSnapshot.get",e));if(null!==n)return this.toJSValue(n,kt.fromSnapshotOptions(t,this._firestore._areTimestampsInSnapshotsEnabled()))}},Object.defineProperty(e.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ref",{get:function(){return new Vo(this._key,this._firestore,this._converter)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return null!==this._document},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return new qo(this._hasPendingWrites,this._fromCache)},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){if(!(t instanceof e))throw G("isEqual","DocumentSnapshot",1,t);return this._firestore===t._firestore&&this._fromCache===t._fromCache&&this._key.isEqual(t._key)&&(null===this._document?null===t._document:this._document.isEqual(t._document))&&this._converter===t._converter},e.prototype.toJSObject=function(e,t){var n=this,r={};return e.forEach((function(e,i){r[e]=n.toJSValue(i,t)})),r},e.prototype.toJSValue=function(e,t){if(e instanceof Ut)return this.toJSObject(e,t);if(e instanceof Wt)return this.toJSArray(e,t);if(e instanceof Vt){var n=e.value(t),r=this._firestore.ensureClientConfigured().databaseId();return e.databaseId.isEqual(r)||g("Document "+this._key.path+" contains a document reference within a different database ("+e.databaseId.projectId+"/"+e.databaseId.database+") which is not supported. It will be treated as a reference in the current database ("+r.projectId+"/"+r.database+") instead."),new Vo(n,this._firestore,this._converter)}return e.value(t)},e.prototype.toJSArray=function(e,t){var n=this;return e.internalValue.map((function(e){return n.toJSValue(e,t)}))},e}(),Wo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.data=function(t){var n=e.prototype.data.call(this,t);return b(void 0!==n,"Document in a QueryDocumentSnapshot should exist"),n},t}(Uo),zo=function(){function e(e,t,n){this._query=e,this.firestore=t,this._converter=n}return e.prototype.where=function(t,n,r){x("Query.where",arguments,3),z("Query.where",3,r);var i,o=["<","<=","==",">=",">","array-contains","in","array-contains-any"];V("Query.where",o,2,n);var a=ko("Query.where",t),s=rr.fromString(n);if(a.isKeyField()){if(s===rr.ARRAY_CONTAINS||s===rr.ARRAY_CONTAINS_ANY)throw new I(S.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+s.toString()+"' queries on FieldPath.documentId().");if(s===rr.IN){this.validateDisjunctiveFilterElements(r,s);for(var c=[],u=0,l=r;u<l.length;u++){var h=l[u];c.push(this.parseDocumentIdValue(h))}i=new Wt(c)}else i=this.parseDocumentIdValue(r)}else s!==rr.IN&&s!==rr.ARRAY_CONTAINS_ANY||this.validateDisjunctiveFilterElements(r,s),i=this.firestore._dataConverter.parseQueryValue("Query.where",r,s===rr.IN);var d=ir.create(a,s,i);return this.validateNewFilter(d),new e(this._query.addFilter(d),this.firestore,this._converter)},e.prototype.orderBy=function(t,n){var r;if(L("Query.orderBy",arguments,1,2),O("Query.orderBy","non-empty string",2,n),void 0===n||"asc"===n)r=lr.ASCENDING;else{if("desc"!==n)throw new I(S.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+n+"', expected 'asc' or 'desc'.");r=lr.DESCENDING}if(null!==this._query.startAt)throw new I(S.INVALID_ARGUMENT,"Invalid query. You must not call Query.startAt() or Query.startAfter() before calling Query.orderBy().");if(null!==this._query.endAt)throw new I(S.INVALID_ARGUMENT,"Invalid query. You must not call Query.endAt() or Query.endBefore() before calling Query.orderBy().");var i=ko("Query.orderBy",t),o=new dr(i,r);return this.validateNewOrderBy(o),new e(this._query.addOrderBy(o),this.firestore,this._converter)},e.prototype.limit=function(t){return x("Query.limit",arguments,1),P("Query.limit","number",1,t),Q("Query.limit",1,t),new e(this._query.withLimitToFirst(t),this.firestore,this._converter)},e.prototype.limitToLast=function(t){return x("Query.limitToLast",arguments,1),P("Query.limitToLast","number",1,t),Q("Query.limitToLast",1,t),new e(this._query.withLimitToLast(t),this.firestore,this._converter)},e.prototype.startAt=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];M("Query.startAt",arguments,1);var i=this.boundFromDocOrFields("Query.startAt",t,n,!0);return new e(this._query.withStartAt(i),this.firestore,this._converter)},e.prototype.startAfter=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];M("Query.startAfter",arguments,1);var i=this.boundFromDocOrFields("Query.startAfter",t,n,!1);return new e(this._query.withStartAt(i),this.firestore,this._converter)},e.prototype.endBefore=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];M("Query.endBefore",arguments,1);var i=this.boundFromDocOrFields("Query.endBefore",t,n,!0);return new e(this._query.withEndAt(i),this.firestore,this._converter)},e.prototype.endAt=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];M("Query.endAt",arguments,1);var i=this.boundFromDocOrFields("Query.endAt",t,n,!1);return new e(this._query.withEndAt(i),this.firestore,this._converter)},e.prototype.isEqual=function(t){if(!(t instanceof e))throw G("isEqual","Query",1,t);return this.firestore===t.firestore&&this._query.isEqual(t._query)},e.prototype.withConverter=function(t){return new e(this._query,this.firestore,t)},e.prototype.boundFromDocOrFields=function(e,t,n,r){if(z(e,1,t),t instanceof Uo){if(n.length>0)throw new I(S.INVALID_ARGUMENT,"Too many arguments provided to "+e+"().");var i=t;if(!i.exists)throw new I(S.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+e+"().");return this.boundFromDocument(e,i._document,r)}var o=[t].concat(n);return this.boundFromFields(e,o,r)},e.prototype.boundFromDocument=function(e,t,n){for(var r=[],i=0,o=this._query.orderBy;i<o.length;i++){var a=o[i];if(a.field.isKeyField())r.push(new Vt(this.firestore._databaseId,t.key));else{var s=t.field(a.field);if(s instanceof Bt)throw new I(S.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+a.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===s){var c=a.field.canonicalString();throw new I(S.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+c+"' (used as the orderBy) does not exist.")}r.push(s)}}return new hr(r,n)},e.prototype.boundFromFields=function(e,t,n){var r=this._query.explicitOrderBy;if(t.length>r.length)throw new I(S.INVALID_ARGUMENT,"Too many arguments provided to "+e+"(). The number of arguments must be less than or equal to the number of Query.orderBy() clauses");for(var i=[],o=0;o<t.length;o++){var a=t[o];if(r[o].field.isKeyField()){if("string"!=typeof a)throw new I(S.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+e+"(), but got a "+typeof a);if(!this._query.isCollectionGroupQuery()&&-1!==a.indexOf("/"))throw new I(S.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+e+"() must be a plain document ID, but '"+a+"' contains a slash.");var s=this._query.path.child(le.fromString(a));if(!fe.isDocumentKey(s))throw new I(S.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+e+"() must result in a valid document path, but '"+s+"' is not because it contains an odd number of segments.");var c=new fe(s);i.push(new Vt(this.firestore._databaseId,c))}else{var u=this.firestore._dataConverter.parseQueryValue(e,a);i.push(u)}}return new hr(i,n)},e.prototype.onSnapshot=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];L("Query.onSnapshot",arguments,1,4);var n,r={},i=0;return"object"!=typeof e[i]||uo(e[i])||(K("Query.onSnapshot",r=e[i],["includeMetadataChanges"]),j("Query.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++),uo(e[i])?n=e[i]:(P("Query.onSnapshot","function",i,e[i]),O("Query.onSnapshot","function",i+1,e[i+1]),O("Query.onSnapshot","function",i+2,e[i+2]),n={next:e[i],error:e[i+1],complete:e[i+2]}),this.validateHasExplicitOrderByForLimitToLast(this._query),this.onSnapshotInternal(r,n)},e.prototype.onSnapshotInternal=function(e,t){var n=this,r=function(e){console.error("Uncaught Error in onSnapshot:",e)};t.error&&(r=t.error.bind(t));var i=new eo({next:function(e){t.next&&t.next(new Ko(n.firestore,n._query,e,n._converter))},error:r}),o=this.firestore.ensureClientConfigured(),a=o.listen(this._query,i,e);return function(){i.mute(),o.unlisten(a)}},e.prototype.validateHasExplicitOrderByForLimitToLast=function(e){if(e.hasLimitToLast()&&0===e.explicitOrderBy.length)throw new I(S.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")},e.prototype.get=function(e){var t=this;return L("Query.get",arguments,0,1),Yo("Query.get",e),this.validateHasExplicitOrderByForLimitToLast(this._query),new Promise((function(n,r){e&&"cache"===e.source?t.firestore.ensureClientConfigured().getDocumentsFromLocalCache(t._query).then((function(e){n(new Ko(t.firestore,t._query,e,t._converter))}),r):t.getViaSnapshotListener(n,r,e)}))},e.prototype.getViaSnapshotListener=function(e,t,n){var r=this.onSnapshotInternal({includeMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(i){r(),i.metadata.fromCache&&n&&"server"===n.source?t(new I(S.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):e(i)},error:t})},e.prototype.parseDocumentIdValue=function(e){if("string"==typeof e){if(""===e)throw new I(S.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!this._query.isCollectionGroupQuery()&&-1!==e.indexOf("/"))throw new I(S.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+e+"' contains a '/' character.");var t=this._query.path.child(le.fromString(e));if(!fe.isDocumentKey(t))throw new I(S.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+t+"' is not because it has an odd number of segments ("+t.length+").");return new Vt(this.firestore._databaseId,new fe(t))}if(e instanceof Vo){var n=e;return new Vt(this.firestore._databaseId,n._key)}throw new I(S.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+W(e)+".")},e.prototype.validateDisjunctiveFilterElements=function(e,t){if(!Array.isArray(e)||0===e.length)throw new I(S.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+t.toString()+"' filters.");if(e.length>10)throw new I(S.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters support a maximum of 10 elements in the value array.");if(e.indexOf(null)>=0)throw new I(S.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters cannot contain 'null' in the value array.");if(e.filter((function(e){return Number.isNaN(e)})).length>0)throw new I(S.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters cannot contain 'NaN' in the value array.")},e.prototype.validateNewFilter=function(e){if(e instanceof ir){var t=[rr.ARRAY_CONTAINS,rr.ARRAY_CONTAINS_ANY],n=[rr.IN,rr.ARRAY_CONTAINS_ANY],r=t.indexOf(e.op)>=0,i=n.indexOf(e.op)>=0;if(e.isInequality()){var o=this._query.getInequalityFilterField();if(null!==o&&!o.isEqual(e.field))throw new I(S.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+o.toString()+"' and '"+e.field.toString()+"'");var a=this._query.getFirstOrderByField();null!==a&&this.validateOrderByAndInequalityMatch(e.field,a)}else if(i||r){var s=null;if(i&&(s=this._query.findFilterOperator(n)),null===s&&r&&(s=this._query.findFilterOperator(t)),null!=s)throw s===e.op?new I(S.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new I(S.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+s.toString()+"' filters.")}}},e.prototype.validateNewOrderBy=function(e){if(null===this._query.getFirstOrderByField()){var t=this._query.getInequalityFilterField();null!==t&&this.validateOrderByAndInequalityMatch(t,e.field)}},e.prototype.validateOrderByAndInequalityMatch=function(e,t){if(!t.isEqual(e))throw new I(S.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first Query.orderBy(), but your first Query.orderBy() is on field '"+t.toString()+"' instead.")},e}(),Ko=function(){function e(e,t,n,r){this._firestore=e,this._originalQuery=t,this._snapshot=n,this._converter=r,this._cachedChanges=null,this._cachedChangesIncludeMetadataChanges=null,this.metadata=new qo(n.hasPendingWrites,n.fromCache)}return Object.defineProperty(e.prototype,"docs",{get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this._snapshot.docs.isEmpty()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!0,configurable:!0}),e.prototype.forEach=function(e,t){var n=this;L("QuerySnapshot.forEach",arguments,1,2),P("QuerySnapshot.forEach","function",1,e),this._snapshot.docs.forEach((function(r){e.call(t,n.convertToDocumentImpl(r))}))},Object.defineProperty(e.prototype,"query",{get:function(){return new zo(this._originalQuery,this._firestore,this._converter)},enumerable:!0,configurable:!0}),e.prototype.docChanges=function(e){e&&(K("QuerySnapshot.docChanges",e,["includeMetadataChanges"]),j("QuerySnapshot.docChanges","boolean","includeMetadataChanges",e.includeMetadataChanges));var t=!(!e||!e.includeMetadataChanges);if(t&&this._snapshot.excludesMetadataChanges)throw new I(S.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t,n,r){if(n.oldDocs.isEmpty()){var i,o=0;return n.docChanges.map((function(t){var a=new Wo(e,t.doc.key,t.doc,n.fromCache,n.mutatedKeys.has(t.doc.key),r);return b(t.type===zr.Added,"Invalid event type for first snapshot"),b(!i||n.query.docComparator(i,t.doc)<0,"Got added events in wrong order"),i=t.doc,{type:"added",doc:a,oldIndex:-1,newIndex:o++}}))}var a=n.oldDocs;return n.docChanges.filter((function(e){return t||e.type!==zr.Metadata})).map((function(t){var i=new Wo(e,t.doc.key,t.doc,n.fromCache,n.mutatedKeys.has(t.doc.key),r),o=-1,s=-1;return t.type!==zr.Added&&(b((o=a.indexOf(t.doc.key))>=0,"Index for document not found"),a=a.delete(t.doc.key)),t.type!==zr.Removed&&(s=(a=a.add(t.doc)).indexOf(t.doc.key)),{type:Xo(t.type),doc:i,oldIndex:o,newIndex:s}}))}(this._firestore,t,this._snapshot,this._converter),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges},e.prototype.isEqual=function(t){if(!(t instanceof e))throw G("isEqual","QuerySnapshot",1,t);return this._firestore===t._firestore&&this._originalQuery.isEqual(t._originalQuery)&&this._snapshot.isEqual(t._snapshot)&&this._converter===t._converter},e.prototype.convertToDocumentImpl=function(e){return new Wo(this._firestore,e.key,e,this.metadata.fromCache,this._snapshot.mutatedKeys.has(e.key),this._converter)},e}();a.__spreadArrays(["length","forEach","map"],"undefined"!=typeof Symbol?[Symbol.iterator]:[]).forEach((function(e){try{Object.defineProperty(Ko.prototype.docChanges,e,{get:function(){return function(){throw new I(S.INVALID_ARGUMENT,'QuerySnapshot.docChanges has been changed from a property into a method, so usages like "querySnapshot.docChanges" should become "querySnapshot.docChanges()"')}()}})}catch(e){}}));var Go=function(e){function t(t,n,r){var i=e.call(this,tr.atPath(t),n,r)||this;if(i._path=t,t.length%2!=1)throw new I(S.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t.canonicalString()+" has "+t.length);return i}return a.__extends(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._query.path.popLast();return e.isEmpty()?null:new Vo(new fe(e),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!0,configurable:!0}),t.prototype.doc=function(e){if(L("CollectionReference.doc",arguments,0,1),0===arguments.length&&(e=J.newId()),P("CollectionReference.doc","non-empty string",1,e),""===e)throw new I(S.INVALID_ARGUMENT,"Document path must be a non-empty string");var t=le.fromString(e);return Vo.forPath(this._query.path.child(t),this.firestore,this._converter)},t.prototype.add=function(e){x("CollectionReference.add",arguments,1),P("CollectionReference.add","object",1,e);var t=this.doc();return t.set(e).then((function(){return t}))},t.prototype.withConverter=function(e){return new t(this._path,this.firestore,e)},t}(zo);function Qo(e,t){if(void 0===t)return{merge:!1};if(K(e,t,["merge","mergeFields"]),j(e,"boolean","merge",t.merge),B(e,"mergeFields","a string or a FieldPath",t.mergeFields,(function(e){return"string"==typeof e||e instanceof to})),void 0!==t.mergeFields&&void 0!==t.merge)throw new I(S.INVALID_ARGUMENT,"Invalid options passed to function "+e+'(): You cannot specify both "merge" and "mergeFields".');return t}function Ho(e,t){return void 0===t?{}:(K(e,t,["serverTimestamps"]),F(e,0,"serverTimestamps",t.serverTimestamps,["estimate","previous","none"]),t)}function Yo(e,t){O(e,"object",1,t),t&&(K(e,t,["source"]),F(e,0,"source",t.source,["default","server","cache"]))}function Jo(e,t,n){if(t instanceof Vo){if(t.firestore!==n)throw new I(S.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}throw G(e,"DocumentReference",1,t)}function Xo(e){switch(e){case zr.Added:return"added";case zr.Modified:case zr.Metadata:return"modified";case zr.Removed:return"removed";default:return v("Unknown change type: "+e)}}function $o(e,t,n){var r;return e?(r=e.toFirestore(t),n="toFirestore() in "+n):r=t,[r,n]}var Zo=E(jo,"Use firebase.firestore() instead."),ea=E(Bo,"Use firebase.firestore().runTransaction() instead."),ta=E(Fo,"Use firebase.firestore().batch() instead."),na=E(Vo,"Use firebase.firestore().doc() instead."),ra=E(Uo),ia=E(Wo),oa=E(zo),aa=E(Ko),sa=E(Go,"Use firebase.firestore().collection() instead."),ca={Firestore:Zo,GeoPoint:si,Timestamp:Ce,Blob:ie,Transaction:ea,WriteBatch:ta,DocumentReference:na,DocumentSnapshot:ra,Query:oa,QueryDocumentSnapshot:ia,QuerySnapshot:aa,CollectionReference:sa,FieldPath:to,FieldValue:vo,setLogLevel:jo.setLogLevel,CACHE_SIZE_UNLIMITED:Oo};function ua(e){e.INTERNAL.registerComponent(new u.Component("firestore",(function(e){var t=e.getProvider("app").getImmediate();return new jo(t,e.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(function(e){b(e&&"object"==typeof e,"shallowCopy() expects object parameter.");var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}(ca)))}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var la=function(){function e(){}return e.prototype.addCallback=function(e){},e.prototype.shutdown=function(){},e}(),ha=function(){function e(){var e=this;this.networkAvailableListener=function(){return e.onNetworkAvailable()},this.networkUnavailableListener=function(){return e.onNetworkUnavailable()},this.callbacks=[],this.configureNetworkMonitoring()}return e.prototype.addCallback=function(e){this.callbacks.push(e)},e.prototype.shutdown=function(){window.removeEventListener("online",this.networkAvailableListener),window.removeEventListener("offline",this.networkUnavailableListener)},e.prototype.configureNetworkMonitoring=function(){window.addEventListener("online",this.networkAvailableListener),window.addEventListener("offline",this.networkUnavailableListener)},e.prototype.onNetworkAvailable=function(){m("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var e=0,t=this.callbacks;e<t.length;e++){(0,t[e])(0)}},e.prototype.onNetworkUnavailable=function(){m("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var e=0,t=this.callbacks;e<t.length;e++){(0,t[e])(1)}},e.isAvailable=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},e}(),da=function(){function e(e){this.sendFn=e.sendFn,this.closeFn=e.closeFn}return e.prototype.onOpen=function(e){b(!this.wrappedOnOpen,"Called onOpen on stream twice!"),this.wrappedOnOpen=e},e.prototype.onClose=function(e){b(!this.wrappedOnClose,"Called onClose on stream twice!"),this.wrappedOnClose=e},e.prototype.onMessage=function(e){b(!this.wrappedOnMessage,"Called onMessage on stream twice!"),this.wrappedOnMessage=e},e.prototype.close=function(){this.closeFn()},e.prototype.send=function(e){this.sendFn(e)},e.prototype.callOnOpen=function(){b(void 0!==this.wrappedOnOpen,"Cannot call onOpen because no callback was set"),this.wrappedOnOpen()},e.prototype.callOnClose=function(e){b(void 0!==this.wrappedOnClose,"Cannot call onClose because no callback was set"),this.wrappedOnClose(e)},e.prototype.callOnMessage=function(e){b(void 0!==this.wrappedOnMessage,"Cannot call onMessage because no callback was set"),this.wrappedOnMessage(e)},e}(),fa="Connection",pa={BatchGetDocuments:"batchGet",Commit:"commit"},ma="gl-js/ fire/"+h,ga=function(){function e(e){this.databaseId=e.databaseId;var t=e.ssl?"https":"http";this.baseUrl=t+"://"+e.host,this.forceLongPolling=e.forceLongPolling}return e.prototype.modifyHeadersForRequest=function(e,t){if(t)for(var n in t.authHeaders)t.authHeaders.hasOwnProperty(n)&&(e[n]=t.authHeaders[n]);e["X-Goog-Api-Client"]=ma},e.prototype.invokeRPC=function(e,t,n){var r=this,i=this.makeUrl(e);return new Promise((function(o,s){var c=new l.XhrIo;c.listenOnce(l.EventType.COMPLETE,(function(){try{switch(c.getLastErrorCode()){case l.ErrorCode.NO_ERROR:var t=c.getResponseJson();m(fa,"XHR received:",JSON.stringify(t)),o(t);break;case l.ErrorCode.TIMEOUT:m(fa,'RPC "'+e+'" timed out'),s(new I(S.DEADLINE_EXCEEDED,"Request time out"));break;case l.ErrorCode.HTTP_ERROR:var n=c.getStatus();if(m(fa,'RPC "'+e+'" failed with status:',n,"response text:",c.getResponseText()),n>0){var r=c.getResponseJson().error;if(r&&r.status&&r.message){var i=(a=r.status,u=a.toLowerCase().replace("_","-"),Object.values(S).indexOf(u)>=0?u:S.UNKNOWN);s(new I(i,r.message))}else s(new I(S.UNKNOWN,"Server responded with status "+c.getStatus()))}else m(fa,'RPC "'+e+'" failed'),s(new I(S.UNAVAILABLE,"Connection failed."));break;default:v('RPC "'+e+'" failed with unanticipated webchannel error '+c.getLastErrorCode()+": "+c.getLastError()+", giving up.")}}finally{m(fa,'RPC "'+e+'" completed.')}var a,u}));var u=a.__assign({},t);delete u.database;var h=JSON.stringify(u);m(fa,"XHR sending: ",i+" "+h);var d={"Content-Type":"text/plain"};r.modifyHeadersForRequest(d,n),c.send(i,"POST",h,d,15)}))},e.prototype.invokeStreamingRPC=function(e,t,n){return this.invokeRPC(e,t,n)},e.prototype.openStream=function(e,t){var n=[this.baseUrl,"/","google.firestore.v1.Firestore","/",e,"/channel"],r=l.createWebChannelTransport(),i={backgroundChannelTest:!0,httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling};this.modifyHeadersForRequest(i.initMessageHeaders,t),c.isReactNative()||(i.httpHeadersOverwriteParam="$httpHeaders");var o=n.join("");m(fa,"Creating WebChannel: "+o+" "+i);var a=r.createWebChannel(o,i),s=!1,u=!1,h=new da({sendFn:function(e){u?m(fa,"Not sending because WebChannel is closed:",e):(s||(m(fa,"Opening WebChannel transport."),a.open(),s=!0),m(fa,"WebChannel sending:",e),a.send(e))},closeFn:function(){return a.close()}}),d=function(e,t){a.listen(e,(function(e){try{t(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return d(l.WebChannel.EventType.OPEN,(function(){u||m(fa,"WebChannel transport opened.")})),d(l.WebChannel.EventType.CLOSE,(function(){u||(u=!0,m(fa,"WebChannel transport closed"),h.callOnClose())})),d(l.WebChannel.EventType.ERROR,(function(e){u||(u=!0,m(fa,"WebChannel transport errored:",e),h.callOnClose(new I(S.UNAVAILABLE,"The operation could not be completed")))})),d(l.WebChannel.EventType.MESSAGE,(function(e){var t;if(!u){var n=e.data[0];b(!!n,"Got a webchannel message without data.");var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){m(fa,"WebChannel received error:",i);var o=i.status,s=function(e){var t=Fr[e];if(void 0!==t)return Ur(t)}(o),c=i.message;void 0===s&&(s=S.INTERNAL,c="Unknown error status: "+o+" with message "+i.message),u=!0,h.callOnClose(new I(s,c)),a.close()}else m(fa,"WebChannel received:",n),h.callOnMessage(n)}})),setTimeout((function(){h.callOnOpen()}),0),h},e.prototype.makeUrl=function(e){var t=pa[e];return b(void 0!==t,"Unknown REST mapping for: "+e),this.baseUrl+"/v1/projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents:"+t},e}(),ya=function(){function e(){this.emptyByteString="",this.base64Available="undefined"!=typeof atob}return Object.defineProperty(e.prototype,"document",{get:function(){return"undefined"!=typeof document?document:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"window",{get:function(){return"undefined"!=typeof window?window:null},enumerable:!0,configurable:!0}),e.prototype.loadConnection=function(e){return Promise.resolve(new ga(e))},e.prototype.newConnectivityMonitor=function(){return ha.isAvailable()?new ha:new la},e.prototype.newSerializer=function(e){return new Ti(e,{useProto3Json:!0})},e.prototype.formatJSON=function(e){return JSON.stringify(e)},e.prototype.atob=function(e){return atob(e)},e.prototype.btoa=function(e){return btoa(e)},e}();
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
w.setPlatform(new ya);var va="@firebase/firestore",ba="1.9.1";
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function wa(e){ua(e),e.registerVersion(va,ba)}wa(o),t.registerFirestore=wa}).call(this,n(17))},function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var c,u=[],l=!1,h=-1;function d(){l&&c&&(l=!1,c.length?u=c.concat(u):h=-1,u.length&&f())}function f(){if(!l){var e=s(d);l=!0;for(var t=u.length;t;){for(c=u,u=[];++h<t;)c&&c[h].run();h=-1,t=u.length}c=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function m(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new p(e,t)),1!==u.length||l||s(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"ErrorCode",(function(){return ur})),n.d(t,"EventType",(function(){return lr})),n.d(t,"WebChannel",(function(){return hr})),n.d(t,"XhrIo",(function(){return dr})),n.d(t,"createWebChannelTransport",(function(){return cr}));var r,i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{},o=o||{},a=i;function s(e){return"string"==typeof e}function c(e){return"number"==typeof e}function u(e,t){e=e.split("."),t=t||a;for(var n=0;n<e.length;n++)if(null==(t=t[e[n]]))return null;return t}function l(){}function h(e){var t=typeof e;if("object"==t){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return t;var n=Object.prototype.toString.call(e);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof e.length&&void 0!==e.splice&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==e.call&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==t&&void 0===e.call)return"object";return t}function d(e){return"array"==h(e)}function f(e){var t=h(e);return"array"==t||"object"==t&&"number"==typeof e.length}function p(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var m="closure_uid_"+(1e9*Math.random()>>>0),g=0;function y(e,t,n){return e.call.apply(e.bind,arguments)}function v(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function b(e,t,n){return(b=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?y:v).apply(null,arguments)}function w(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}var T=Date.now||function(){return+new Date};function S(e,t){function n(){}n.prototype=t.prototype,e.N=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.xb=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}function I(){this.j=this.j,this.i=this.i}I.prototype.j=!1,I.prototype.la=function(){if(!this.j&&(this.j=!0,this.G(),0))this[m]||(this[m]=++g)},I.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var E=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if(s(e))return s(t)&&1==t.length?e.indexOf(t,0):-1;for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},C=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i=s(e)?e.split(""):e,o=0;o<r;o++)o in i&&t.call(n,i[o],o,e)};function _(e){return Array.prototype.concat.apply([],arguments)}function D(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function k(e){return/^[\s\xa0]*$/.test(e)}var N,A=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function x(e,t){return-1!=e.indexOf(t)}function M(e,t){return e<t?-1:e>t?1:0}e:{var L=a.navigator;if(L){var P=L.userAgent;if(P){N=P;break e}}N=""}function O(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function R(e){var t,n={};for(t in e)n[t]=e[t];return n}var j="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function B(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var o=0;o<j.length;o++)n=j[o],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function F(e){return F[" "](e),e}F[" "]=l;var V,q,U=x(N,"Opera"),W=x(N,"Trident")||x(N,"MSIE"),z=x(N,"Edge"),K=z||W,G=x(N,"Gecko")&&!(x(N.toLowerCase(),"webkit")&&!x(N,"Edge"))&&!(x(N,"Trident")||x(N,"MSIE"))&&!x(N,"Edge"),Q=x(N.toLowerCase(),"webkit")&&!x(N,"Edge");function H(){var e=a.document;return e?e.documentMode:void 0}e:{var Y="",J=(q=N,G?/rv:([^\);]+)(\)|;)/.exec(q):z?/Edge\/([\d\.]+)/.exec(q):W?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(q):Q?/WebKit\/(\S+)/.exec(q):U?/(?:Version)[ \/]?(\S+)/.exec(q):void 0);if(J&&(Y=J?J[1]:""),W){var X=H();if(null!=X&&X>parseFloat(Y)){V=String(X);break e}}V=Y}var $,Z={};function ee(e){return function(e,t){var n=Z;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(){for(var t=0,n=A(String(V)).split("."),r=A(String(e)).split("."),i=Math.max(n.length,r.length),o=0;0==t&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;t=M(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||M(0==a[2].length,0==s[2].length)||M(a[2],s[2]),a=a[3],s=s[3]}while(0==t)}return 0<=t}))}var te=a.document;$=te&&W?H()||("CSS1Compat"==te.compatMode?parseInt(V,10):5):void 0;var ne=!W||9<=Number($),re=W&&!ee("9"),ie=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{a.addEventListener("test",l,t),a.removeEventListener("test",l,t)}catch(e){}return e}();function oe(e,t){this.type=e,this.a=this.target=t,this.Ia=!0}function ae(e,t){if(oe.call(this,e?e.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.a=t,t=e.relatedTarget){if(G){e:{try{F(t.nodeName);var i=!0;break e}catch(e){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=s(e.pointerType)?e.pointerType:se[e.pointerType]||"",this.c=e,e.defaultPrevented&&this.b()}}oe.prototype.b=function(){this.Ia=!1},S(ae,oe);var se={2:"touch",3:"pen",4:"mouse"};ae.prototype.b=function(){ae.N.b.call(this);var e=this.c;if(e.preventDefault)e.preventDefault();else if(e.returnValue=!1,re)try{(e.ctrlKey||112<=e.keyCode&&123>=e.keyCode)&&(e.keyCode=-1)}catch(e){}};var ce="closure_listenable_"+(1e6*Math.random()|0),ue=0;function le(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.da=i,this.key=++ue,this.X=this.Z=!1}function he(e){e.X=!0,e.listener=null,e.proxy=null,e.src=null,e.da=null}function de(e){this.src=e,this.a={},this.b=0}function fe(e,t){var n=t.type;if(n in e.a){var r,i=e.a[n],o=E(i,t);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(he(t),0==e.a[n].length&&(delete e.a[n],e.b--))}}function pe(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.X&&o.listener==t&&o.capture==!!n&&o.da==r)return i}return-1}de.prototype.add=function(e,t,n,r,i){var o=e.toString();(e=this.a[o])||(e=this.a[o]=[],this.b++);var a=pe(e,t,r,i);return-1<a?(t=e[a],n||(t.Z=!1)):((t=new le(t,this.src,o,!!r,i)).Z=n,e.push(t)),t};var me="closure_lm_"+(1e6*Math.random()|0),ge={};function ye(e,t,n,r,i){if(r&&r.once)return function e(t,n,r,i,o){if(d(n)){for(var a=0;a<n.length;a++)e(t,n[a],r,i,o);return null}return r=Ce(r),t&&t[ce]?t.Aa(n,r,p(i)?!!i.capture:!!i,o):ve(t,n,r,!0,i,o)}(e,t,n,r,i);if(d(t)){for(var o=0;o<t.length;o++)ye(e,t[o],n,r,i);return null}return n=Ce(n),e&&e[ce]?e.za(t,n,p(r)?!!r.capture:!!r,i):ve(e,t,n,!1,r,i)}function ve(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var a=p(i)?!!i.capture:!!i;if(a&&!ne)return null;var s=Ie(e);if(s||(e[me]=s=new de(e)),(n=s.add(t,n,r,a,o)).proxy)return n;if(r=function(){var e=Se,t=ne?function(n){return e.call(t.src,t.listener,n)}:function(n){if(!(n=e.call(t.src,t.listener,n)))return n};return t}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)ie||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(we(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function be(e){if(!c(e)&&e&&!e.X){var t=e.src;if(t&&t[ce])fe(t.c,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(we(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Ie(t))?(fe(n,e),0==n.b&&(n.src=null,t[me]=null)):he(e)}}}function we(e){return e in ge?ge[e]:ge[e]="on"+e}function Te(e,t){var n=e.listener,r=e.da||e.src;return e.Z&&be(e),n.call(r,t)}function Se(e,t){return!!e.X||(ne?Te(e,new ae(t,this)):Te(e,t=new ae(t||u("window.event"),this)))}function Ie(e){return(e=e[me])instanceof de?e:null}var Ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ce(e){return"function"==h(e)?e:(e[Ee]||(e[Ee]=function(t){return e.handleEvent(t)}),e[Ee])}function _e(){I.call(this),this.c=new de(this),this.J=this,this.B=null}function De(e,t,n,r){if(!(t=e.c.a[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var a=t[o];if(a&&!a.X&&a.capture==n){var s=a.listener,c=a.da||a.src;a.Z&&fe(e.c,a),i=!1!==s.call(c,r)&&i}}return i&&0!=r.Ia}S(_e,I),_e.prototype[ce]=!0,(r=_e.prototype).addEventListener=function(e,t,n,r){ye(this,e,t,n,r)},r.removeEventListener=function(e,t,n,r){!function e(t,n,r,i,o){if(d(n))for(var a=0;a<n.length;a++)e(t,n[a],r,i,o);else i=p(i)?!!i.capture:!!i,r=Ce(r),t&&t[ce]?(t=t.c,(n=String(n).toString())in t.a&&(-1<(r=pe(a=t.a[n],r,i,o))&&(he(a[r]),Array.prototype.splice.call(a,r,1),0==a.length&&(delete t.a[n],t.b--)))):t&&(t=Ie(t))&&(n=t.a[n.toString()],t=-1,n&&(t=pe(n,r,i,o)),(r=-1<t?n[t]:null)&&be(r))}(this,e,t,n,r)},r.dispatchEvent=function(e){var t,n=this.B;if(n)for(t=[];n;n=n.B)t.push(n);n=this.J;var r=e.type||e;if(s(e))e=new oe(e,n);else if(e instanceof oe)e.target=e.target||n;else{var i=e;B(e=new oe(r,n),i)}if(i=!0,t)for(var o=t.length-1;0<=o;o--){var a=e.a=t[o];i=De(a,r,!0,e)&&i}if(i=De(a=e.a=n,r,!0,e)&&i,i=De(a,r,!1,e)&&i,t)for(o=0;o<t.length;o++)i=De(a=e.a=t[o],r,!1,e)&&i;return i},r.G=function(){if(_e.N.G.call(this),this.c){var e,t=this.c;for(e in t.a){for(var n=t.a[e],r=0;r<n.length;r++)he(n[r]);delete t.a[e],t.b--}}this.B=null},r.za=function(e,t,n,r){return this.c.add(String(e),t,!1,n,r)},r.Aa=function(e,t,n,r){return this.c.add(String(e),t,!0,n,r)};var ke=a.JSON.stringify;function Ne(e,t){this.c=e,this.f=t,this.b=0,this.a=null}function Ae(){this.b=this.a=null}Ne.prototype.get=function(){if(0<this.b){this.b--;var e=this.a;this.a=e.next,e.next=null}else e=this.c();return e};var xe,Me=new Ne((function(){return new Pe}),(function(e){e.reset()}));function Le(){var e=Be,t=null;return e.a&&(t=e.a,e.a=e.a.next,e.a||(e.b=null),t.next=null),t}function Pe(){this.next=this.b=this.a=null}function Oe(e){a.setTimeout((function(){throw e}),0)}function Re(e,t){xe||function(){var e=a.Promise.resolve(void 0);xe=function(){e.then(Fe)}}(),je||(xe(),je=!0),Be.add(e,t)}Ae.prototype.add=function(e,t){var n=Me.get();n.set(e,t),this.b?this.b.next=n:this.a=n,this.b=n},Pe.prototype.set=function(e,t){this.a=e,this.b=t,this.next=null},Pe.prototype.reset=function(){this.next=this.b=this.a=null};var je=!1,Be=new Ae;function Fe(){for(var e;e=Le();){try{e.a.call(e.b)}catch(e){Oe(e)}var t=Me;t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}je=!1}function Ve(e,t){_e.call(this),this.b=e||1,this.a=t||a,this.f=b(this.fb,this),this.g=T()}function qe(e){e.ba=!1,e.L&&(e.a.clearTimeout(e.L),e.L=null)}function Ue(e,t,n){if("function"==h(e))n&&(e=b(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=b(e.handleEvent,e)}return 2147483647<Number(t)?-1:a.setTimeout(e,t||0)}function We(e,t,n){I.call(this),this.f=null!=n?b(e,n):e,this.c=t,this.b=b(this.$a,this),this.a=[]}function ze(e){e.U=Ue(e.b,e.c),e.f.apply(null,e.a)}function Ke(e){I.call(this),this.b=e,this.a={}}S(Ve,_e),(r=Ve.prototype).ba=!1,r.L=null,r.fb=function(){if(this.ba){var e=T()-this.g;0<e&&e<.8*this.b?this.L=this.a.setTimeout(this.f,this.b-e):(this.L&&(this.a.clearTimeout(this.L),this.L=null),this.dispatchEvent("tick"),this.ba&&(qe(this),this.start()))}},r.start=function(){this.ba=!0,this.L||(this.L=this.a.setTimeout(this.f,this.b),this.g=T())},r.G=function(){Ve.N.G.call(this),qe(this),delete this.a},S(We,I),(r=We.prototype).ea=!1,r.U=null,r.Ta=function(e){this.a=arguments,this.U?this.ea=!0:ze(this)},r.G=function(){We.N.G.call(this),this.U&&(a.clearTimeout(this.U),this.U=null,this.ea=!1,this.a=[])},r.$a=function(){this.U=null,this.ea&&(this.ea=!1,ze(this))},S(Ke,I);var Ge=[];function Qe(e,t,n,r){d(n)||(n&&(Ge[0]=n.toString()),n=Ge);for(var i=0;i<n.length;i++){var o=ye(t,n[i],r||e.handleEvent,!1,e.b||e);if(!o)break;e.a[o.key]=o}}function He(e){O(e.a,(function(e,t){this.a.hasOwnProperty(t)&&be(e)}),e),e.a={}}function Ye(){}Ke.prototype.G=function(){Ke.N.G.call(this),He(this)},Ke.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Je=new _e;function Xe(e){oe.call(this,"serverreachability",e)}function $e(e){Je.dispatchEvent(new Xe(Je,e))}function Ze(e){oe.call(this,"statevent",e)}function et(e){Je.dispatchEvent(new Ze(Je,e))}function tt(e){oe.call(this,"timingevent",e)}function nt(e,t){if("function"!=h(e))throw Error("Fn must not be null and must be a function");return a.setTimeout((function(){e()}),t)}S(Xe,oe),S(Ze,oe),S(tt,oe);var rt={NO_ERROR:0,gb:1,nb:2,mb:3,jb:4,lb:5,ob:6,La:7,TIMEOUT:8,rb:9},it={ib:"complete",vb:"success",Ma:"error",La:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",kb:"downloadprogress",wb:"uploadprogress"};function ot(){}function at(e){var t;return(t=e.a)||(t=e.a={}),t}function st(){}ot.prototype.a=null;var ct,ut={OPEN:"a",hb:"b",Ma:"c",qb:"d"};function lt(){oe.call(this,"d")}function ht(){oe.call(this,"c")}function dt(){}function ft(e,t,n){this.g=e,this.W=t,this.V=n||1,this.I=new Ke(this),this.O=pt,e=K?125:void 0,this.P=new Ve(e),this.h=null,this.b=!1,this.l=this.D=this.f=this.F=this.v=this.R=this.i=null,this.j=[],this.a=null,this.A=0,this.c=this.w=null,this.o=-1,this.m=!1,this.J=0,this.B=null,this.s=this.S=this.H=!1}S(lt,oe),S(ht,oe),S(dt,ot),ct=new dt;var pt=45e3,mt={},gt={};function yt(e,t,n){e.F=1,e.f=Ut(Ot(t)),e.l=n,e.H=!0,bt(e,null)}function vt(e,t,n,r){e.F=1,e.f=Ut(Ot(t)),e.l=null,e.H=n,bt(e,r)}function bt(e,t){e.v=T(),St(e),e.D=Ot(e.f),qt(e.D,"t",e.V),e.A=0,e.a=e.g.$(e.g.Y()?t:null),0<e.J&&(e.B=new We(b(e.Ja,e,e.a),e.J)),Qe(e.I,e.a,"readystatechange",e.cb),t=e.h?R(e.h):{},e.l?(e.w||(e.w="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.a.ca(e.D,e.w,e.l,t)):(e.w="GET",e.a.ca(e.D,e.w,null,t)),$e(1)}function wt(e,t,n){for(var r=!0;!e.m&&e.A<n.length;){var i=Tt(e,n);if(i==gt){4==t&&(e.c=4,et(14),r=!1);break}if(i==mt){e.c=4,et(15),r=!1;break}Dt(e,i)}4==t&&0==n.length&&(e.c=1,et(16),r=!1),e.b=e.b&&r,r||(_t(e),Ct(e))}function Tt(e,t){var n=e.A,r=t.indexOf("\n",n);return-1==r?gt:(n=Number(t.substring(n,r)),isNaN(n)?mt:(r+=1)+n>t.length?gt:(t=t.substr(r,n),e.A=r+n,t))}function St(e){e.R=T()+e.O,It(e,e.O)}function It(e,t){if(null!=e.i)throw Error("WatchDog timer not null");e.i=nt(b(e.ab,e),t)}function Et(e){e.i&&(a.clearTimeout(e.i),e.i=null)}function Ct(e){e.g.Ca()||e.m||e.g.na(e)}function _t(e){Et(e);var t=e.B;t&&"function"==typeof t.la&&t.la(),e.B=null,qe(e.P),He(e.I),e.a&&(t=e.a,e.a=null,t.abort(),t.la())}function Dt(e,t){try{e.g.Fa(e,t),$e(4)}catch(e){}}function kt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(f(e)||s(e))C(e,t,void 0);else{if(e.K&&"function"==typeof e.K)var n=e.K();else if(e.C&&"function"==typeof e.C)n=void 0;else if(f(e)||s(e)){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;i=(r=function(e){if(e.C&&"function"==typeof e.C)return e.C();if(s(e))return e.split("");if(f(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e)).length;for(var o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}}function Nt(e,t){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof Nt)for(n=e.K(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function At(e,t){Mt(e.b,t)&&(delete e.b[t],e.c--,e.a.length>2*e.c&&xt(e))}function xt(e){if(e.c!=e.a.length){for(var t=0,n=0;t<e.a.length;){var r=e.a[t];Mt(e.b,r)&&(e.a[n++]=r),t++}e.a.length=n}if(e.c!=e.a.length){var i={};for(n=t=0;t<e.a.length;)Mt(i,r=e.a[t])||(e.a[n++]=r,i[r]=1),t++;e.a.length=n}}function Mt(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(r=ft.prototype).setTimeout=function(e){this.O=e},r.cb=function(e){e=e.target;var t=this.B;t&&3==On(e)?t.Ta():this.Ja(e)},r.Ja=function(e){try{if(e==this.a)e:{var t=On(this.a),n=this.a.ya(),r=this.a.T();if(!(3>t||3==t&&!K&&!this.a.aa())){this.m||4!=t||7==n||$e(8==n||0>=r?3:2),Et(this);var i=this.a.T();this.o=i;var o=this.a.aa();if(this.b=200==i){if(this.S&&!this.s){t:{if(this.a){var a=Rn(this.a,"X-HTTP-Initial-Response");if(a&&!k(a)){var s=a;break t}}s=null}if(!s){this.b=!1,this.c=3,et(12),_t(this),Ct(this);break e}this.s=!0,Dt(this,s)}this.H?(wt(this,t,o),K&&this.b&&3==t&&(Qe(this.I,this.P,"tick",this.bb),this.P.start())):Dt(this,o),4==t&&_t(this),this.b&&!this.m&&(4==t?this.g.na(this):(this.b=!1,St(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.c=3,et(12)):(this.c=0,et(13)),_t(this),Ct(this)}}}catch(e){}},r.bb=function(){if(this.a){var e=On(this.a),t=this.a.aa();this.A<t.length&&(Et(this),wt(this,e,t),this.b&&4!=e&&St(this))}},r.cancel=function(){this.m=!0,_t(this)},r.ab=function(){this.i=null;var e=T();0<=e-this.R?(2!=this.F&&($e(3),et(17)),_t(this),this.c=2,Ct(this)):It(this,this.R-e)},(r=Nt.prototype).C=function(){xt(this);for(var e=[],t=0;t<this.a.length;t++)e.push(this.b[this.a[t]]);return e},r.K=function(){return xt(this),this.a.concat()},r.get=function(e,t){return Mt(this.b,e)?this.b[e]:t},r.set=function(e,t){Mt(this.b,e)||(this.c++,this.a.push(e)),this.b[e]=t},r.forEach=function(e,t){for(var n=this.K(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);e.call(t,o,i,this)}};var Lt=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Pt(e,t){var n;this.b=this.j=this.f="",this.i=null,this.g=this.a="",this.h=!1,e instanceof Pt?(this.h=void 0!==t?t:e.h,Rt(this,e.f),this.j=e.j,jt(this,e.b),Bt(this,e.i),this.a=e.a,Ft(this,nn(e.c)),this.g=e.g):e&&(n=String(e).match(Lt))?(this.h=!!t,Rt(this,n[1]||"",!0),this.j=Wt(n[2]||""),jt(this,n[3]||"",!0),Bt(this,n[4]),this.a=Wt(n[5]||"",!0),Ft(this,n[6]||"",!0),this.g=Wt(n[7]||"")):(this.h=!!t,this.c=new Xt(null,this.h))}function Ot(e){return new Pt(e)}function Rt(e,t,n){e.f=n?Wt(t,!0):t,e.f&&(e.f=e.f.replace(/:$/,""))}function jt(e,t,n){e.b=n?Wt(t,!0):t}function Bt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.i=t}else e.i=null}function Ft(e,t,n){t instanceof Xt?(e.c=t,function(e,t){t&&!e.f&&($t(e),e.c=null,e.a.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Zt(this,t),tn(this,n,e))}),e)),e.f=t}(e.c,e.h)):(n||(t=zt(t,Yt)),e.c=new Xt(t,e.h))}function Vt(e,t,n){e.c.set(t,n)}function qt(e,t,n){d(n)||(n=[String(n)]),tn(e.c,t,n)}function Ut(e){return Vt(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^T()).toString(36)),e}function Wt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function zt(e,t,n){return s(e)?(e=encodeURI(e).replace(t,Kt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Kt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Pt.prototype.toString=function(){var e=[],t=this.f;t&&e.push(zt(t,Gt,!0),":");var n=this.b;return(n||"file"==t)&&(e.push("//"),(t=this.j)&&e.push(zt(t,Gt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.i)&&e.push(":",String(n))),(n=this.a)&&(this.b&&"/"!=n.charAt(0)&&e.push("/"),e.push(zt(n,"/"==n.charAt(0)?Ht:Qt,!0))),(n=this.c.toString())&&e.push("?",n),(n=this.g)&&e.push("#",zt(n,Jt)),e.join("")},Pt.prototype.resolve=function(e){var t=Ot(this),n=!!e.f;n?Rt(t,e.f):n=!!e.j,n?t.j=e.j:n=!!e.b,n?jt(t,e.b):n=null!=e.i;var r=e.a;if(n)Bt(t,e.i);else if(n=!!e.a){if("/"!=r.charAt(0))if(this.b&&!this.a)r="/"+r;else{var i=t.a.lastIndexOf("/");-1!=i&&(r=t.a.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(x(i,"./")||x(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],a=0;a<i.length;){var s=i[a++];"."==s?r&&a==i.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&a==i.length&&o.push("")):(o.push(s),r=!0)}r=o.join("/")}else r=i}return n?t.a=r:n=""!==e.c.toString(),n?Ft(t,nn(e.c)):n=!!e.g,n&&(t.g=e.g),t};var Gt=/[#\/\?@]/g,Qt=/[#\?:]/g,Ht=/[#\?]/g,Yt=/[#\?@]/g,Jt=/#/g;function Xt(e,t){this.b=this.a=null,this.c=e||null,this.f=!!t}function $t(e){e.a||(e.a=new Nt,e.b=0,e.c&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.c,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Zt(e,t){$t(e),t=rn(e,t),Mt(e.a.b,t)&&(e.c=null,e.b-=e.a.get(t).length,At(e.a,t))}function en(e,t){return $t(e),t=rn(e,t),Mt(e.a.b,t)}function tn(e,t,n){Zt(e,t),0<n.length&&(e.c=null,e.a.set(rn(e,t),D(n)),e.b+=n.length)}function nn(e){var t=new Xt;return t.c=e.c,e.a&&(t.a=new Nt(e.a),t.b=e.b),t}function rn(e,t){return t=String(t),e.f&&(t=t.toLowerCase()),t}function on(e){this.a=e,this.b=this.h=null,this.g=!1,this.i=null,this.c=-1,this.l=this.f=null}function an(e){var t=e.a.F.a;if(null!=t)et(4),t?(et(10),Hn(e.a,e,!1)):(et(11),Hn(e.a,e,!0));else{e.b=new ft(e,void 0,void 0),e.b.h=e.h,t=Zn(t=e.a,t.Y()?e.f:null,e.i),et(4),qt(t,"TYPE","xmlhttp");var n=e.a.j,r=e.a.I;n&&r&&Vt(t,n,r),vt(e.b,t,!1,e.f)}}function sn(){this.a=this.b=null}function cn(){this.a=new Nt}function un(e){var t=typeof e;return"object"==t&&e||"function"==t?"o"+(e[m]||(e[m]=++g)):t.charAt(0)+e}function ln(e,t){this.b=e,this.a=t}function hn(e){this.g=e||dn,a.PerformanceNavigationTiming?e=0<(e=a.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(a.ka&&a.ka.Da&&a.ka.Da()&&a.ka.Da().yb),this.f=e?this.g:1,this.a=null,1<this.f&&(this.a=new cn),this.b=null,this.c=[]}(r=Xt.prototype).add=function(e,t){$t(this),this.c=null,e=rn(this,e);var n=this.a.get(e);return n||this.a.set(e,n=[]),n.push(t),this.b+=1,this},r.forEach=function(e,t){$t(this),this.a.forEach((function(n,r){C(n,(function(n){e.call(t,n,r,this)}),this)}),this)},r.K=function(){$t(this);for(var e=this.a.C(),t=this.a.K(),n=[],r=0;r<t.length;r++)for(var i=e[r],o=0;o<i.length;o++)n.push(t[r]);return n},r.C=function(e){$t(this);var t=[];if(s(e))en(this,e)&&(t=_(t,this.a.get(rn(this,e))));else{e=this.a.C();for(var n=0;n<e.length;n++)t=_(t,e[n])}return t},r.set=function(e,t){return $t(this),this.c=null,en(this,e=rn(this,e))&&(this.b-=this.a.get(e).length),this.a.set(e,[t]),this.b+=1,this},r.get=function(e,t){return e&&0<(e=this.C(e)).length?String(e[0]):t},r.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var e=[],t=this.a.K(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.C(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),e.push(a)}}return this.c=e.join("&")},S((function(){}),(function(){})),(r=on.prototype).M=null,r.$=function(e){return this.a.$(e)},r.abort=function(){this.b&&(this.b.cancel(),this.b=null),this.c=-1},r.Ca=function(){return!1},r.Fa=function(e,t){if(this.c=e.o,0==this.M){if(!this.a.o&&(e=e.a)){var n=Rn(e,"X-Client-Wire-Protocol");this.l=n||null,this.a.j&&(e=Rn(e,"X-HTTP-Session-Id"))&&(this.a.I=e)}if(t){try{var r=this.a.ja.a.parse(t)}catch(e){return(t=this.a).m=this.c,void Xn(t,2)}this.f=r[0]}else(t=this.a).m=this.c,Xn(t,2)}else 1==this.M&&(this.g?et(6):"11111"==t?(et(5),this.g=!0,(!W||10<=Number($))&&(this.c=200,this.b.cancel(),et(11),Hn(this.a,this,!0))):(et(7),this.g=!1))},r.na=function(){if(this.c=this.b.o,this.b.b)0==this.M?(this.M=1,an(this)):1==this.M&&(this.g?(et(11),Hn(this.a,this,!0)):(et(10),Hn(this.a,this,!1)));else{0==this.M?et(8):1==this.M&&et(9);var e=this.a;e.m=this.c,Xn(e,2)}},r.Y=function(){return this.a.Y()},r.ma=function(){return this.a.ma()},cn.prototype.add=function(e){this.a.set(un(e),e)},cn.prototype.C=function(){return this.a.C()};var dn=10;function fn(e,t){!e.a&&(x(t,"spdy")||x(t,"quic")||x(t,"h2"))&&(e.f=e.g,e.a=new cn,e.b&&(yn(e,e.b),e.b=null))}function pn(e){return!!e.b||!!e.a&&e.a.a.c>=e.f}function mn(e){return e.b?1:e.a?e.a.a.c:0}function gn(e,t){return e.b?e=e.b==t:e.a?(t=un(t),e=Mt(e.a.a.b,t)):e=!1,e}function yn(e,t){e.a?e.a.add(t):e.b=t}function vn(e,t){var n;e.b&&e.b==t?e.b=null:((n=e.a)&&(n=un(t),n=Mt(e.a.a.b,n)),n&&At(e.a.a,un(t)))}function bn(e){if(null!=e.b)return e.c.concat(e.b.j);if(null!=e.a&&0!=e.a.a.c){var t=e.c;return C(e.a.C(),(function(e){t=t.concat(e.j)})),t}return D(e.c)}function wn(){}function Tn(){this.a=new wn}function Sn(e,t,n){var r=n||"";try{kt(e,(function(e,n){var i=e;p(e)&&(i=ke(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(e){throw t.push(r+"type="+encodeURIComponent("_badmap")),e}}function In(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(e){}}hn.prototype.cancel=function(){this.c=bn(this),this.b?(this.b.cancel(),this.b=null):this.a&&0!=this.a.a.c&&(C(this.a.C(),(function(e){e.cancel()})),function(e){e.b={},e.a.length=0,e.c=0}(this.a.a))},wn.prototype.stringify=function(e){return a.JSON.stringify(e,void 0)},wn.prototype.parse=function(e){return a.JSON.parse(e,void 0)};var En=a.JSON.parse;function Cn(e){_e.call(this),this.headers=new Nt,this.H=e||null,this.b=!1,this.s=this.a=null,this.A="",this.h=0,this.f="",this.g=this.w=this.l=this.v=!1,this.o=0,this.m=null,this.I=_n,this.D=this.F=!1}S(Cn,_e);var _n="",Dn=/^https?$/i,kn=["POST","PUT"];function Nn(e){return"content-type"==e.toLowerCase()}function An(e,t){e.b=!1,e.a&&(e.g=!0,e.a.abort(),e.g=!1),e.f=t,e.h=5,xn(e),Ln(e)}function xn(e){e.v||(e.v=!0,e.dispatchEvent("complete"),e.dispatchEvent("error"))}function Mn(e){if(e.b&&void 0!==o&&(!e.s[1]||4!=On(e)||2!=e.T()))if(e.l&&4==On(e))Ue(e.Ea,0,e);else if(e.dispatchEvent("readystatechange"),4==On(e)){e.b=!1;try{var t,n=e.T();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var s=String(e.A).match(Lt)[1]||null;if(!s&&a.self&&a.self.location){var c=a.self.location.protocol;s=c.substr(0,c.length-1)}i=!Dn.test(s?s.toLowerCase():"")}t=i}if(t)e.dispatchEvent("complete"),e.dispatchEvent("success");else{e.h=6;try{var u=2<On(e)?e.a.statusText:""}catch(e){u=""}e.f=u+" ["+e.T()+"]",xn(e)}}finally{Ln(e)}}}function Ln(e,t){if(e.a){Pn(e);var n=e.a,r=e.s[0]?l:null;e.a=null,e.s=null,t||e.dispatchEvent("ready");try{n.onreadystatechange=r}catch(e){}}}function Pn(e){e.a&&e.D&&(e.a.ontimeout=null),e.m&&(a.clearTimeout(e.m),e.m=null)}function On(e){return e.a?e.a.readyState:0}function Rn(e,t){return e.a?e.a.getResponseHeader(t):null}function jn(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}if(r)return e;if(n=function(e){var t="";return O(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),s(e)){if(t=encodeURIComponent(String(t)),t+=n=null!=n?"="+encodeURIComponent(String(n)):""){if(0>(n=e.indexOf("#"))&&(n=e.length),0>(r=e.indexOf("?"))||r>n){r=n;var i=""}else i=e.substring(r+1,n);n=(e=[e.substr(0,r),i,e.substr(n)])[1],e[1]=t?n?n+"&"+t:t:n,e=e[0]+(e[1]?"?"+e[1]:"")+e[2]}return e}return Vt(e,t,n),e}function Bn(e){this.f=[],this.F=new sn,this.ga=this.pa=this.B=this.ha=this.a=this.I=this.j=this.V=this.g=this.J=this.i=null,this.Qa=this.P=0,this.Oa=!!u("internalChannelParams.failFast",e),this.ia=this.w=this.s=this.l=this.h=this.c=null,this.oa=!0,this.m=this.ra=this.O=-1,this.S=this.v=this.A=0,this.Na=u("internalChannelParams.baseRetryDelayMs",e)||5e3,this.Ra=u("internalChannelParams.retryDelaySeedMs",e)||1e4,this.Pa=u("internalChannelParams.forwardChannelMaxRetries",e)||2,this.qa=u("internalChannelParams.forwardChannelRequestTimeoutMs",e)||2e4,this.Ka=e&&e.zb||void 0,this.D=void 0,this.R=e&&e.supportsCrossDomainXhr||!1,this.H="",this.b=new hn(e&&e.concurrentRequestLimit),this.ja=new Tn,this.o=!e||void 0===e.backgroundChannelTest||e.backgroundChannelTest,(this.W=e&&e.fastHandshake||!1)&&!this.o&&(this.o=!0),e&&e.forceLongPolling&&(this.oa=!1),this.fa=void 0}function Fn(e){if(Vn(e),3==e.u){var t=e.P++,n=Ot(e.B);Vt(n,"SID",e.H),Vt(n,"RID",t),Vt(n,"TYPE","terminate"),zn(e,n),(t=new ft(e,t,void 0)).F=2,t.f=Ut(Ot(n)),n=!1,a.navigator&&a.navigator.sendBeacon&&(n=a.navigator.sendBeacon(t.f.toString(),"")),!n&&a.Image&&((new Image).src=t.f,n=!0),n||(t.a=t.g.$(null),t.a.ca(t.f)),t.v=T(),St(t)}$n(e)}function Vn(e){e.w&&(e.w.abort(),e.w=null),e.a&&(e.a.cancel(),e.a=null),e.l&&(a.clearTimeout(e.l),e.l=null),Yn(e),e.b.cancel(),e.h&&(c(e.h)&&a.clearTimeout(e.h),e.h=null)}function qn(e,t){e.f.push(new ln(e.Qa++,t)),3==e.u&&Un(e)}function Un(e){pn(e.b)||e.h||(e.h=!0,Re(e.Ha,e),e.A=0)}function Wn(e,t){var n;n=t?t.W:e.P++;var r=Ot(e.B);Vt(r,"SID",e.H),Vt(r,"RID",n),Vt(r,"AID",e.O),zn(e,r),e.g&&e.i&&jn(r,e.g,e.i),n=new ft(e,n,e.A+1),null===e.g&&(n.h=e.i),t&&(e.f=t.j.concat(e.f)),t=Kn(e,n,1e3),n.setTimeout(Math.round(.5*e.qa)+Math.round(.5*e.qa*Math.random())),yn(e.b,n),yt(n,r,t)}function zn(e,t){e.c&&kt({},(function(e,n){Vt(t,n,e)}))}function Kn(e,t,n){n=Math.min(e.f.length,n);var r=e.c?b(e.c.Sa,e.c,e):null;e:for(var i=e.f,o=-1;;){var a=["count="+n];-1==o?0<n?(o=i[0].b,a.push("ofs="+o)):o=0:a.push("ofs="+o);for(var s=!0,c=0;c<n;c++){var u=i[c].b,l=i[c].a;if(0>(u-=o))o=Math.max(0,i[c].b-100),s=!1;else try{Sn(l,a,"req"+u+"_")}catch(e){r&&r(l)}}if(s){r=a.join("&");break e}}return e=e.f.splice(0,n),t.j=e,r}function Gn(e){e.a||e.l||(e.S=1,Re(e.Ga,e),e.v=0)}function Qn(e){return!(e.a||e.l||3<=e.v)&&(e.S++,e.l=nt(b(e.Ga,e),Jn(e,e.v)),e.v++,!0)}function Hn(e,t,n){var r=t.l;r&&fn(e.b,r),e.ia=e.oa&&n,e.m=t.c,e.B=Zn(e,null,e.ha),Un(e)}function Yn(e){null!=e.s&&(a.clearTimeout(e.s),e.s=null)}function Jn(e,t){var n=e.Na+Math.floor(Math.random()*e.Ra);return e.ma()||(n*=2),n*t}function Xn(e,t){if(2==t){var n=null;e.c&&(n=null);var r=b(e.eb,e);n||(n=new Pt("//www.google.com/images/cleardot.gif"),a.location&&"http"==a.location.protocol||Rt(n,"https"),Ut(n)),function(e,t){var n=new Ye;if(a.Image){var r=new Image;r.onload=w(In,n,r,"TestLoadImage: loaded",!0,t),r.onerror=w(In,n,r,"TestLoadImage: error",!1,t),r.onabort=w(In,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=w(In,n,r,"TestLoadImage: timeout",!1,t),a.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else et(2);e.u=0,e.c&&e.c.ta(t),$n(e),Vn(e)}function $n(e){e.u=0,e.m=-1,e.c&&(0==bn(e.b).length&&0==e.f.length||(e.b.c.length=0,D(e.f),e.f.length=0),e.c.sa())}function Zn(e,t,n){var r=function(e){return e instanceof Pt?Ot(e):new Pt(e,void 0)}(n);if(""!=r.b)t&&jt(r,t+"."+r.b),Bt(r,r.i);else{var i,o=a.location;i=t?t+"."+o.hostname:o.hostname,r=function(e,t,n,r){var i=new Pt(null,void 0);return e&&Rt(i,e),t&&jt(i,t),n&&Bt(i,n),r&&(i.a=r),i}(o.protocol,i,+o.port,n)}return e.V&&O(e.V,(function(e,t){Vt(r,t,e)})),t=e.j,n=e.I,t&&n&&Vt(r,t,n),Vt(r,"VER",e.wa),zn(e,r),r}function er(){}function tr(){if(W&&!(10<=Number($)))throw Error("Environmental error: no available transport.")}function nr(e,t){_e.call(this),this.a=new Bn(t),this.g=e,this.m=t&&t.testUrl?t.testUrl:function(e){for(var t=arguments[0],n=1;n<arguments.length;n++){var r,i=arguments[n];if(0==i.lastIndexOf("/",0))t=i;else(r=""==t)||(r=0<=(r=t.length-1)&&t.indexOf("/",r)==r),t+=r?i:"/"+i}return t}(this.g,"test"),this.b=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.a.i=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.xa&&(e?e["X-WebChannel-Client-Profile"]=t.xa:e={"X-WebChannel-Client-Profile":t.xa}),this.a.J=e,(e=t&&t.httpHeadersOverwriteParam)&&!k(e)&&(this.a.g=e),this.l=t&&t.supportsCrossDomainXhr||!1,this.h=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!k(t)&&(this.a.j=t,null!==(e=this.b)&&t in e&&(t in(e=this.b)&&delete e[t])),this.f=new or(this)}function rr(e){lt.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.c=e)?(e=this.c,this.data=null!==t&&e in t?t[e]:void 0):this.data=t}else this.data=e}function ir(){ht.call(this),this.status=1}function or(e){this.a=e}(r=Cn.prototype).ca=function(e,t,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.A+"; newUri="+e);t=t?t.toUpperCase():"GET",this.A=e,this.f="",this.h=0,this.v=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?at(this.H):at(ct),this.a.onreadystatechange=b(this.Ea,this);try{this.w=!0,this.a.open(t,String(e),!0),this.w=!1}catch(e){return void An(this,e)}e=n||"";var i=new Nt(this.headers);r&&kt(r,(function(e,t){i.set(t,e)})),r=function(e){e:{for(var t=Nn,n=e.length,r=s(e)?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:s(e)?e.charAt(t):e[t]}(i.K()),n=a.FormData&&e instanceof a.FormData,!(0<=E(kn,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.a.setRequestHeader(t,e)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{Pn(this),0<this.o&&((this.D=function(e){return W&&ee(9)&&c(e.timeout)&&void 0!==e.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=b(this.Ba,this)):this.m=Ue(this.Ba,this.o,this)),this.l=!0,this.a.send(e),this.l=!1}catch(e){An(this,e)}},r.Ba=function(){void 0!==o&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,this.dispatchEvent("timeout"),this.abort(8))},r.abort=function(e){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=e||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Ln(this))},r.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Ln(this,!0)),Cn.N.G.call(this)},r.Ea=function(){this.j||(this.w||this.l||this.g?Mn(this):this.Za())},r.Za=function(){Mn(this)},r.T=function(){try{return 2<On(this)?this.a.status:-1}catch(e){return-1}},r.aa=function(){try{return this.a?this.a.responseText:""}catch(e){return""}},r.Ua=function(e){if(this.a){var t=this.a.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),En(t)}},r.ya=function(){return this.h},r.Xa=function(){return s(this.f)?this.f:String(this.f)},(r=Bn.prototype).wa=8,r.u=1,r.Ca=function(){return 0==this.u},r.Ha=function(e){if(this.h)if(this.h=null,1==this.u){if(!e){this.P=Math.floor(1e5*Math.random());var t,n=new ft(this,e=this.P++,void 0),r=this.i;if(this.J&&(r?B(r=R(r),this.J):r=this.J),null===this.g&&(n.h=r),this.W)e:{for(var i=t=0;i<this.f.length;i++){var o=this.f[i];if(void 0===(o="__data__"in o.a&&s(o=o.a.__data__)?o.length:void 0))break;if(4096<(t+=o)){t=i;break e}if(4096===t||i===this.f.length-1){t=i+1;break e}}t=1e3}else t=1e3;t=Kn(this,n,t),Vt(i=Ot(this.B),"RID",e),Vt(i,"CVER",22),this.o&&this.j&&Vt(i,"X-HTTP-Session-Id",this.j),zn(this,i),this.g&&r&&jn(i,this.g,r),yn(this.b,n),this.W?(Vt(i,"$req",t),Vt(i,"SID","null"),n.S=!0,yt(n,i,null)):yt(n,i,t),this.u=2}}else 3==this.u&&(e?Wn(this,e):0==this.f.length||pn(this.b)||Wn(this))},r.Ga=function(){this.l=null,this.a=new ft(this,"rpc",this.S),null===this.g&&(this.a.h=this.i),this.a.J=0;var e=Ot(this.pa);Vt(e,"RID","rpc"),Vt(e,"SID",this.H),Vt(e,"CI",this.ia?"0":"1"),Vt(e,"AID",this.O),zn(this,e),Vt(e,"TYPE","xmlhttp"),this.g&&this.i&&jn(e,this.g,this.i),this.D&&this.a.setTimeout(this.D),vt(this.a,e,!0,this.ga)},r.Fa=function(e,t){if(0!=this.u&&(this.a==e||gn(this.b,e)))if(this.m=e.o,!e.s&&gn(this.b,e)&&3==this.u){try{var n=this.ja.a.parse(t)}catch(e){n=null}if(d(n)&&3==n.length){if(0==(t=n)[0]){e:if(!this.l){if(this.a){if(!(this.a.v+3e3<e.v))break e;Yn(this),this.a.cancel(),this.a=null}Qn(this),et(18)}}else this.ra=t[1],0<this.ra-this.O&&37500>t[2]&&this.ia&&0==this.v&&!this.s&&(this.s=nt(b(this.Ya,this),6e3));if(1>=mn(this.b)&&this.fa){try{this.fa()}catch(e){}this.fa=void 0}}else Xn(this,11)}else if((e.s||this.a==e)&&Yn(this),!k(t))for(t=n=this.ja.a.parse(t),n=0;n<t.length;n++){var r=t[n];if(this.O=r[0],r=r[1],2==this.u)if("c"==r[0]){this.H=r[1],this.ga=r[2];var i=r[3];null!=i&&(this.wa=i),null!=(r=r[5])&&c(r)&&0<r&&(this.D=1.5*r),this.o&&(r=e.a)&&((i=Rn(r,"X-Client-Wire-Protocol"))&&fn(this.b,i),this.j&&(r=Rn(r,"X-HTTP-Session-Id")))&&(this.I=r,Vt(this.B,this.j,r)),this.u=3,this.c&&this.c.va(),r=e,this.pa=Zn(this,this.Y()?this.ga:null,this.ha),r.s?(vn(this.b,r),(i=this.D)&&r.setTimeout(i),r.i&&(Et(r),St(r)),this.a=r):Gn(this),0<this.f.length&&Un(this)}else"stop"!=r[0]&&"close"!=r[0]||Xn(this,7);else 3==this.u&&("stop"==r[0]||"close"==r[0]?"stop"==r[0]?Xn(this,7):Fn(this):"noop"!=r[0]&&this.c&&this.c.ua(r),this.v=0)}},r.Ya=function(){null!=this.s&&(this.s=null,this.a.cancel(),this.a=null,Qn(this),et(19))},r.na=function(e){var t=null;if(this.a==e){Yn(this),this.a=null;var n=2}else{if(!gn(this.b,e))return;t=e.j,vn(this.b,e),n=1}if(this.m=e.o,0!=this.u)if(e.b)1==n?(t=T()-e.v,Je.dispatchEvent(new tt(Je,e.l?e.l.length:0,t,this.A)),Un(this)):Gn(this);else{var r=e.c;if(3==r||0==r&&0<this.m||!(1==n&&function(e,t){return!(mn(e.b)>=e.b.f-(e.h?1:0))&&(e.h?(e.f=t.j.concat(e.f),!0):!(1==e.u||2==e.u||e.A>=(e.Oa?0:e.Pa))&&(e.h=nt(b(e.Ha,e,t),Jn(e,e.A)),e.A++,!0))}(this,e)||2==n&&Qn(this)))switch(t&&0<t.length&&(e=this.b,e.c=e.c.concat(t)),r){case 1:Xn(this,5);break;case 4:Xn(this,10);break;case 3:Xn(this,6);break;default:Xn(this,2)}}},r.eb=function(e){et(e?2:1)},r.$=function(e){if(e&&!this.R)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Cn(this.Ka)).F=this.R,e},r.ma=function(){return!!this.c&&!0},r.Y=function(){return this.R},(r=er.prototype).va=function(){},r.ua=function(){},r.ta=function(){},r.sa=function(){},r.Sa=function(){},tr.prototype.a=function(e,t){return new nr(e,t)},S(nr,_e),(r=nr.prototype).addEventListener=function(e,t,n,r){nr.N.addEventListener.call(this,e,t,n,r)},r.removeEventListener=function(e,t,n,r){nr.N.removeEventListener.call(this,e,t,n,r)},r.Va=function(){this.a.c=this.f,this.l&&(this.a.R=!0);var e=this.a,t=this.m,n=this.g,r=this.b||void 0;et(0),e.ha=n,e.V=r||{},e.o&&(e.F.b=[],e.F.a=!1),e.w=new on(e),null===e.g&&(e.w.h=e.i),n=t,e.g&&e.i&&(n=jn(t,e.g,e.i)),(e=e.w).i=n,t=Zn(e.a,null,e.i),et(3),null!=(n=e.a.F.b)?(e.f=n[0],e.M=1,an(e)):(qt(t,"MODE","init"),!e.a.o&&e.a.j&&qt(t,"X-HTTP-Session-Id",e.a.j),e.b=new ft(e,void 0,void 0),e.b.h=e.h,vt(e.b,t,!1,null),e.M=0)},r.close=function(){Fn(this.a)},r.Wa=function(e){if(s(e)){var t={};t.__data__=e,qn(this.a,t)}else this.h?((t={}).__data__=ke(e),qn(this.a,t)):qn(this.a,e)},r.G=function(){this.a.c=null,delete this.f,Fn(this.a),delete this.a,nr.N.G.call(this)},S(rr,lt),S(ir,ht),S(or,er),or.prototype.va=function(){this.a.dispatchEvent("a")},or.prototype.ua=function(e){this.a.dispatchEvent(new rr(e))},or.prototype.ta=function(e){this.a.dispatchEvent(new ir(e))},or.prototype.sa=function(){this.a.dispatchEvent("b")};var ar=w((function(e,t){function n(){}n.prototype=e.prototype;var r=new n;return e.apply(r,Array.prototype.slice.call(arguments,1)),r}),tr);tr.prototype.createWebChannel=tr.prototype.a,nr.prototype.send=nr.prototype.Wa,nr.prototype.open=nr.prototype.Va,nr.prototype.close=nr.prototype.close,rt.NO_ERROR=0,rt.TIMEOUT=8,rt.HTTP_ERROR=6,it.COMPLETE="complete",st.EventType=ut,ut.OPEN="a",ut.CLOSE="b",ut.ERROR="c",ut.MESSAGE="d",_e.prototype.listen=_e.prototype.za,Cn.prototype.listenOnce=Cn.prototype.Aa,Cn.prototype.getLastError=Cn.prototype.Xa,Cn.prototype.getLastErrorCode=Cn.prototype.ya,Cn.prototype.getStatus=Cn.prototype.T,Cn.prototype.getResponseJson=Cn.prototype.Ua,Cn.prototype.getResponseText=Cn.prototype.aa,Cn.prototype.send=Cn.prototype.ca;var sr={createWebChannelTransport:ar,ErrorCode:rt,EventType:it,WebChannel:st,XhrIo:Cn},cr=sr.createWebChannelTransport,ur=sr.ErrorCode,lr=sr.EventType,hr=sr.WebChannel,dr=sr.XhrIo;t.default=sr}.call(this,n(5))},function(e,t,n){"use strict";n.r(t);var r,i;n(8);!function(e){e[e.Nothing=0]="Nothing",e[e.Intersect=1]="Intersect",e[e.Overlap=2]="Overlap"}(r||(r={})),function(e){e[e.Disjoint=0]="Disjoint",e[e.Match=1]="Match",e[e.Intersect=2]="Intersect",e[e.AInsideB=3]="AInsideB",e[e.BInsideA=4]="BInsideA",e[e.Tangent=5]="Tangent"}(i||(i={}));var o=function(e,t,n){void 0===t&&(t=void 0),void 0===n&&(n=void 0),this.type=e,this.intersection=t,this.overlap=n},a=function(){function e(){}return e.ptsDistance=function(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))},e.lineMiddlePt=function(e){return{x:(e[0].x+e[1].x)/2,y:(e[0].y+e[1].y)/2}},e.areLinesEqual=function(e,t){return this.arePointsEqual(e[0],t[0])&&this.arePointsEqual(e[1],t[1])||this.arePointsEqual(e[0],t[1])&&this.arePointsEqual(e[1],t[0])},e.arePointsEqual=function(e,t){return e.x===t.x&&e.y===t.y},e}(),s=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r},c=function(){function e(){}return e.readInputFile=function(e){return new Promise((function(t,n){var r=new FileReader;r.readAsText(e,"UTF-8"),r.onload=function(){t(r.result)},r.onerror=function(){console.log("Error reading the file.")}}))},e.getUrlParams=function(e){var t={},n=document.createElement("a");n.href=e;for(var r=n.search.substring(1).split("&"),i=0;i<r.length;i++){var o=r[i].split("=");t[o[0]]=decodeURIComponent(o[1])}return t},e.emptyNode=function(e){for(;e.firstChild&&e.removeChild(e.firstChild););},e.createBBox=function(e,t,n){void 0===t&&(t=5),void 0===n&&(n=5);var r=document.createElementNS("http://www.w3.org/2000/svg","rect");return r.setAttribute("x",(e.getBBox().x-t).toString()),r.setAttribute("y",(e.getBBox().y-t).toString()),r.setAttribute("width",(e.getBBox().width+2*t).toString()),r.setAttribute("height",(e.getBBox().height+2*t).toString()),r.setAttribute("rx",n.toString()),r.setAttribute("ry",n.toString()),r},e.createBBox2=function(e,t){return void 0===t&&(t=0),0!==t?{x:e.getBBox().x-t,y:e.getBBox().y-t,width:e.getBBox().width+2*t,height:e.getBBox().height+2*t}:e.getBBox()},e.getRelativeCoords=function(e,t){var n=t.createSVGPoint();return n.x=e.clientX,n.y=e.clientY,n.matrixTransform(t.getScreenCTM().inverse())},e.uuidv4=function(){return(1e7.toString()+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(function(e){return(Number(e)^crypto.getRandomValues(new Uint8Array(1))[0]&15>>Number(e)/4).toString(16)}))},e.getRectSegments=function(e){var t={x:e.x,y:e.y},n={x:e.x+e.width,y:e.y},r={x:e.x+e.width,y:e.y+e.height},i={x:e.x,y:e.y+e.height};return[[t,n],[n,r],[r,i],[i,t]]},e.isPtInRect=function(e,t,n){return void 0===n&&(n=!0),n?t.x>=e.x&&t.x<=e.x+e.width&&t.y>=e.y&&t.y<=e.y+e.height:t.x>e.x&&t.x<e.x+e.width&&t.y>e.y&&t.y<e.y+e.height},e.isLineInRect=function(e,t){return this.isPtInRect(t,e[0])&&this.isPtInRect(t,e[1])},e.isNumBetween=function(e,t,n,r){return void 0===r&&(r=!0),r?e>=Math.min(t,n)&&e<=Math.max(t,n):e>Math.min(t,n)&&e<Math.max(t,n)},e.isLineHorizontal=function(e){return e[0].y===e[1].y},e.isLineVertical=function(e){return e[0].x===e[1].x},e.sortPtsByDistance=function(e,t,n){void 0===t&&(t=void 0),void 0===n&&(n=!1);var r=void 0!==t?t:e[0],i=e.sort((function(e,t){return a.ptsDistance(r,e)<a.ptsDistance(r,t)?-1:a.ptsDistance(r,e)>a.ptsDistance(r,t)?1:0}));return void 0!==t&&!0===n?s([t],i):i},e.linesBetweenPts=function(e){if(e.length>1){for(var t=[],n=0;n<e.length-1;n++)t.push([e[n],e[n+1]]);return t}return null},e.rectRectRelationship=function(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height?i.Match:this.isPtInRect(t,{x:e.x,y:e.y})&&this.isPtInRect(t,{x:e.x+e.width,y:e.y})&&this.isPtInRect(t,{x:e.x+e.width,y:e.y+e.height})&&this.isPtInRect(t,{x:e.x,y:e.y+e.height})?i.AInsideB:this.isPtInRect(e,{x:t.x,y:t.y})&&this.isPtInRect(e,{x:t.x+t.width,y:t.y})&&this.isPtInRect(e,{x:t.x+t.width,y:t.y+t.height})&&this.isPtInRect(e,{x:t.x,y:t.y+t.height})?i.BInsideA:this.isPtInRect(t,{x:e.x,y:e.y},!1)||this.isPtInRect(t,{x:e.x+e.width,y:e.y},!1)||this.isPtInRect(t,{x:e.x+e.width,y:e.y+e.height},!1)||this.isPtInRect(t,{x:e.x,y:e.y+e.height},!1)||this.isPtInRect(e,{x:t.x,y:t.y},!1)||this.isPtInRect(e,{x:t.x+t.width,y:t.y},!1)||this.isPtInRect(e,{x:t.x+t.width,y:t.y+t.height},!1)||this.isPtInRect(e,{x:t.x,y:t.y+t.height},!1)||this.isNumBetween(e.y,t.y,t.y+t.height,!1)&&e.x<=t.x&&e.x+e.width>=t.x+t.width||this.isNumBetween(t.y,e.y,e.y+e.height,!1)&&t.x<=e.x&&t.x+t.width>=e.x+e.width?i.Intersect:this.isPtInRect(t,{x:e.x,y:e.y})||this.isPtInRect(t,{x:e.x+e.width,y:e.y})||this.isPtInRect(t,{x:e.x+e.width,y:e.y+e.height})||this.isPtInRect(t,{x:e.x,y:e.y+e.height})||this.isPtInRect(e,{x:t.x,y:t.y})||this.isPtInRect(e,{x:t.x+t.width,y:t.y})||this.isPtInRect(e,{x:t.x+t.width,y:t.y+t.height})||this.isPtInRect(e,{x:t.x,y:t.y+t.height})?i.Tangent:i.Disjoint},e.getOrthoLineLineRelationship=function(e,t){if(this.isLineHorizontal(e)&&this.isLineVertical(t))return this.isNumBetween(e[0].y,t[0].y,t[1].y)&&this.isNumBetween(t[0].x,e[0].x,e[1].x)?new o(r.Intersect,{x:t[0].x,y:e[0].y}):new o(r.Nothing);if(this.isLineHorizontal(t)&&this.isLineVertical(e))return this.isNumBetween(t[0].y,e[0].y,e[1].y)&&this.isNumBetween(e[0].x,t[0].x,t[1].x)?new o(r.Intersect,{x:e[0].x,y:t[0].y}):new o(r.Nothing);if(this.isLineHorizontal(e)&&this.isLineHorizontal(t)){if(e[0].y===t[0].y){var n=Math.min(Math.max(e[0].x,e[1].x),Math.max(t[0].x,t[1].x)),i=Math.max(Math.min(e[0].x,e[1].x),Math.min(t[0].x,t[1].x));return n>=i?new o(r.Overlap,void 0,[{x:n,y:e[0].y},{x:i,y:e[0].y}]):new o(r.Nothing)}return new o(r.Nothing)}if(this.isLineVertical(e)&&this.isLineVertical(t)){if(e[0].x===t[0].x){var a=Math.min(Math.max(e[0].y,e[1].y),Math.max(t[0].y,t[1].y)),s=Math.max(Math.min(e[0].y,e[1].y),Math.min(t[0].y,t[1].y));return a>=s?new o(r.Overlap,void 0,[{x:e[0].x,y:a},{x:e[0].x,y:s}]):new o(r.Nothing)}return new o(r.Nothing)}return new o(r.Nothing)},e.rectanglesSilhouette=function(e){for(var t=[],n=0;n<e.length;n++)t.push(this.getRectSegments(e[n]));var o=[],c=[];for(n=0;n<e.length;n++){for(var u=this.getRectSegments(e[n]),l=function(o){if(o!=n){var l=[],d=h.rectRectRelationship(e[o],e[n]);if(d===i.BInsideA||n>o&&d===i.Match)return u.length=0,"break";if(d===i.Intersect||d===i.Tangent){for(var f=[],p=0;p<u.length;p++){var m=[],g=u[p];if(!h.isLineInRect(g,e[o])){for(var y=0;y<t[o].length;y++){var v=t[o][y],b=h.getOrthoLineLineRelationship(g,v);b.type===r.Intersect?b.intersection&&m.push(b.intersection):b.type===r.Overlap&&b.overlap&&f.push(b.overlap)}if(m.length>0)for(var w=h.sortPtsByDistance(m,u[p][0],!0),T=h.linesBetweenPts(s(w,[u[p][1]])),S=0;S<T.length;S++)h.isPtInRect(e[o],a.lineMiddlePt(T[S]))||l.push(T[S]);else l.push(u[p])}}if(f.length>0&&d!==i.Tangent)for(var I=function(e){c.find((function(t){return a.areLinesEqual(t,f[e])}))||c.push(f[e])},E=0;E<f.length;E++)I(E);u=l}}},h=this,d=0;d<e.length;d++){if("break"===l(d))break}u.length>0&&o.push.apply(o,u)}return c.length>0&&o.push.apply(o,c),o},e.svgPathFromLines=function(e){for(var t=document.createElementNS("http://www.w3.org/2000/svg","path"),n=[],r=0;r<e.length;r++)n.push("M"+e[r][0].x.toFixed(3)+","+e[r][0].y.toFixed(3)+" "+e[r][1].x.toFixed(3)+","+e[r][1].y.toFixed(3));return t.setAttribute("d",n.join("")),t},e}(),u=function(){function e(e,t){this.SVGWIDTH=500,this.ZOOMSPEED=1.25,this.allowPanning=!1,this.name=e,this.id=t,this.content,this.zoom=this.zoom.bind(this)}return e.prototype.setContent=function(e){var t=this;this.content=document.createElement("div");var n=new DOMParser;this.svgCanvas=n.parseFromString(e,"image/svg+xml").documentElement,this.content.appendChild(this.svgCanvas),this.svgCanvas.addEventListener("wheel",this.zoom),this.svgCanvas.addEventListener("mousedown",(function(e){2===e.buttons&&(t.allowPanning=!0,t.svgInitialClick=c.getRelativeCoords(e,t.svgCanvas),t.prevViewBox=t.svgCanvas.viewBox.baseVal)})),this.svgCanvas.addEventListener("mouseup",(function(){return t.allowPanning=!1})),this.svgCanvas.addEventListener("mouseleave",(function(){return t.allowPanning=!1})),this.svgCanvas.addEventListener("mousemove",(function(e){2===e.buttons&&!1===t.allowPanning&&(t.allowPanning=!0,t.svgInitialClick=c.getRelativeCoords(e,t.svgCanvas),t.prevViewBox=t.svgCanvas.viewBox.baseVal),t.allowPanning&&(t.mousePosition=c.getRelativeCoords(e,t.svgCanvas),t.svgCanvas.viewBox.baseVal.x=-t.mousePosition.x-(-t.svgInitialClick.x-t.prevViewBox.x),t.svgCanvas.viewBox.baseVal.y=-t.mousePosition.y-(-t.svgInitialClick.y-t.prevViewBox.y))}))},e.prototype.createCommentsGroup=function(){this.commentsGroup=document.createElementNS("http://www.w3.org/2000/svg","g"),this.svgCanvas.appendChild(this.commentsGroup)},e.prototype.zoom=function(e){e.preventDefault(),this.mousePosition=c.getRelativeCoords(e,this.svgCanvas);var t=e.deltaY>0?this.ZOOMSPEED:1/this.ZOOMSPEED,n=(this.mousePosition.x-this.svgCanvas.viewBox.baseVal.x)/this.svgCanvas.viewBox.baseVal.width,r=this.svgCanvas.viewBox.baseVal.width*t-this.svgCanvas.viewBox.baseVal.width,i=(this.mousePosition.y-this.svgCanvas.viewBox.baseVal.y)/this.svgCanvas.viewBox.baseVal.height,o=this.svgCanvas.viewBox.baseVal.height*t-this.svgCanvas.viewBox.baseVal.height;(e.deltaY>0?this.svgCanvas.viewBox.baseVal.width<10*this.SVGWIDTH:this.svgCanvas.viewBox.baseVal.width>this.SVGWIDTH/10)&&(this.svgCanvas.viewBox.baseVal.x-=r*n,this.svgCanvas.viewBox.baseVal.width+=r,this.svgCanvas.viewBox.baseVal.y-=o*i,this.svgCanvas.viewBox.baseVal.height+=o)},e}(),l=class{static listFiles(e,t){const n=[];e.name&&n.push("name='"+e.name+"'"),e.parentId&&n.push("'"+e.parentId+"' in parents"),!1===e.trashed&&n.push("trashed=false"),e.excludeName&&n.push("not name contains '"+e.excludeName+"'"),e.onlyFolder&&n.push("mimeType='application/vnd.google-apps.folder'");let r=gapi.client.drive.files.list({pageSize:15,fields:`nextPageToken, files(id, name${t?", "+t:""})`,q:n.join(" and ")});return r.then(e=>{const t=e.result.files;t&&t.length>0?console.log(t):console.log("No files found with this query:",n.join(" and "))},e=>{console.error(e.body)}),r}static getFileContent(e){let t=gapi.client.drive.files.get({fileId:e,alt:"media"});return t.then(t=>{200===t.status&&console.log("File with id "+e+" fetched successfully.")},e=>{console.error(e.body)}),t}static getFileData(e,t){let n=gapi.client.drive.files.get({fileId:e,fields:t});return n.then(e=>{200===e.status&&console.log("File data fetched succesfully.")},e=>{console.error(e)}),n}static createFolder(e,t="drive"){const n={name:e,mimeType:"application/vnd.google-apps.folder",parents:"drive"!==t?[t]:[]},r=gapi.client.request({path:"https://www.googleapis.com/drive/v3/files/",method:"POST",body:n});return r.then(t=>{console.log(e+" folder created. Id: "+JSON.parse(t.body).id)}),r}static uploadFile(e,t,n,r){const i=new Blob([e],{type:t}),o={name:n,mimeType:t,parents:[r]},a=gapi.auth.getToken().access_token,s=new FormData;s.append("metadata",new Blob([JSON.stringify(o)],{type:"application/json"})),s.append("file",i);let c=fetch("https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart&fields=id",{method:"POST",headers:new Headers({Authorization:"Bearer "+a}),body:s});return c.then(e=>{!0===e.ok&&200===e.status&&console.log("Upload of "+n+" successful.")},e=>{console.error(e)}),c}static updateFileContent(e,t,n){const r=new Blob([e],{type:t}),i={mimeType:t},o=gapi.auth.getToken().access_token,a=new FormData;a.append("metadata",new Blob([JSON.stringify(i)],{type:"application/json"})),a.append("file",r);let s=fetch(`https://www.googleapis.com/upload/drive/v3/files/${n}?uploadType=multipart`,{method:"PATCH",headers:new Headers({Authorization:"Bearer "+o}),body:a});return s.then(e=>{!0===e.ok&&200===e.status&&console.log("Update successful.")},e=>{console.error(e)}),s}static renameFile(e,t){const n=gapi.client.drive.files.update({fileId:e,name:t,uploadType:"media"});return n.then(e=>{},t=>{console.error("Error renaming file: "+e,t)}),n}static moveFileV2(e,t){const n=gapi.client.request({path:"https://www.googleapis.com/drive/v2/files/"+e+"/parents",method:"POST",headers:{"Content-Type":"application/json"},body:{id:t}});return n.then(e=>{console.log(e)},e=>{console.log(e)}),n}static moveFile(e,t){const n={id:t};gapi.client.drive.parents.insert({fileId:e,resource:n}).execute((function(e){}))}static deleteFile(e){let t=gapi.client.drive.files.delete({fileId:e});return t.then(e=>{console.log(e)},e=>{console.log(e)}),t}static shareFile(e,t,n=0){return new Promise(e=>setTimeout(e,n)).then(n=>{const r=gapi.client.request({path:`https://www.googleapis.com/drive/v3/files/${e}/permissions?sendNotificationEmail=false&fields=id,displayName,emailAddress,photoLink,role`,method:"POST",headers:{"Content-Type":"application/json"},body:{role:"writer",type:"user",emailAddress:t}});return r.then(e=>{console.log(e)}),r})}static stopSharingFile(e,t){const n=gapi.client.request({path:"https://www.googleapis.com/drive/v3/files/"+e+"/permissions/"+t,method:"DELETE",headers:{"Content-Type":"application/json"}});return n.then(e=>{console.log(e)}),n}static getProjectTeamData(e){const t=gapi.client.request({path:`https://www.googleapis.com/drive/v3/files/${e}/permissions?fields=permissions(id,displayName,emailAddress,role,photoLink)`,method:"GET",headers:{"Content-Type":"application/json"}});return t.then(e=>{console.log(e)},e=>{console.log(e)}),t}static getUserInfo(){const e=gapi.client.drive.about.get({fields:"user"});return e.then(e=>{console.log(JSON.parse(e.body).user)}),e}static sendSharingProjectEmail(e,t,n,r){const i=fetch("https://us-central1-testgdproject-1570036439931.cloudfunctions.net/sendMail",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sharer:e,recipients:t,projectName:n,projectId:r})});return i.then(e=>{console.log(e)},e=>{console.error(e)}),i}static sendNotification(e,t,n,r,i,o){const a=fetch("https://us-central1-testgdproject-1570036439931.cloudfunctions.net/sendPushNotification",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({emails:e,author:t,photoLink:n,text:r,projectName:i,projectId:o})});return a.then(e=>{console.log(e)},e=>{console.error(e)}),a}static async createProject(e,t,n){let r;const i=await c.readInputFile(e),o=JSON.parse(i);if(console.log("File contents:",o),n.name=o.projectInfo.title,!t.appMainFolderId){const e=(await this.listFiles({name:"VAviewerData",onlyFolder:!0,trashed:!1})).result.files;if(e&&e.length>0)t.appMainFolderId=e[0].id;else{const e=await this.createFolder("VAviewerData");t.appMainFolderId=JSON.parse(e.body).id,console.log("No appFolder found, one is going to be created.")}}let a;if(void 0!==t.projectsData&&t.projectsData.find(e=>e.name===o.projectInfo.title))t.projectsData.find(e=>e.name===o.projectInfo.title)?r="No project was created because there is already a project with this name.":console.error("Unknown error while attempting to create the project folder.");else try{const e=await this.createFolder(o.projectInfo.title,t.appMainFolderId);a=JSON.parse(e.body).id,n.id=a;const r={id:a,name:o.projectInfo.title};void 0===t.projectsData?t.projectsData=[r]:t.projectsData.find(e=>e.name===o.projectInfo.title)||t.projectsData.push(r)}catch(e){console.log(e),n.id="temporal",r=JSON.parse(e.body).error.message}if(a&&o.drawings){const e=await this.createFolder("drawings",a),r=JSON.parse(e.body).id;t.projectsData[t.projectsData.length-1].drawingsFolderId=r;const i=[];n.drawings=[];for(const e in o.drawings){const t=this.uploadFile(o.drawings[e],"image/svg+xml",e.concat(".svg"),r);i.push(t);const a=new u(e,void 0);a.setContent(o.drawings[e]),n.drawings.push(a)}const s=new TextDecoder("utf-8");await Promise.all(i).then(e=>{e.forEach((e,t)=>{!0===e.ok&&200===e.status&&e.body.getReader().read().then(({value:e,done:r})=>{const i=JSON.parse(s.decode(e)).id;n.drawings[t].id=i,console.log("Drawing with id "+i+" uploaded successfully.")})})},e=>{console.error(e)})}if(a&&o.elementsData){const e=await this.createFolder("elementsData",a),r=JSON.parse(e.body).id;t.projectsData[t.projectsData.length-1].elementsDataFolderId=r,n.elementsData=o.elementsData;const i=[];for(const e in o.elementsData){const t=this.uploadFile(JSON.stringify(o.elementsData[e]),"application/json",e.concat(".json"),r);i.push(t)}await Promise.all(i).then(e=>{console.log("ElementsData files uploaded successfully.")},e=>{console.error(e)})}return a?(console.log("Upload successful. Uploaded "+Object.keys(o.drawings).length+" drawings."),{id:a,name:o.projectInfo.title}):Promise.reject(new Error("Project upload failed. "+r))}static async listProjectItems(e){if(!e.appMainFolderId){const t=(await this.listFiles({name:"VAviewerData",onlyFolder:!0,trashed:!1})).result.files;if(!(t&&t.length>0))return console.log("No appFolder found."),Promise.reject(new Error("No appFolder found."));e.appMainFolderId=t[0].id}const t=await this.listFiles({parentId:e.appMainFolderId,onlyFolder:!0,excludeName:"appSettings",trashed:!1},"shared, permissions");let n;const r=t.result.files;r&&r.length>0&&(void 0===e.projectsData?(n=r,e.projectsData=n):Array.isArray(e.projectsData)&&(n=t.result.files.filter(t=>void 0===e.projectsData.find(e=>e.id===t.id))).forEach(t=>{e.projectsData.push(t)})),console.assert(e.projectsData.length>0,"There are no project folders.");const i=(await this.listFiles({parentId:e.appMainFolderId,name:"appSettings",onlyFolder:!0})).result.files;i&&i.length>0?e.appSettingsFolderId=i[0].id:console.log("No settings folder found.");const o=(await this.listFiles({parentId:e.appSettingsFolderId,name:"projectsThumbs",onlyFolder:!0})).result.files;o&&o.length>0?e.thumbsFolderId=o[0].id:console.log("No thumbs folder found.");const a=(await this.listFiles({parentId:e.thumbsFolderId})).result.files;return e.projectsData.forEach(e=>{const t=a.find(t=>e.id===t.name.replace(".jpg",""));t&&(e.thumbId=t.id)}),console.assert(a.length>0,"There are no thumbnails."),n}static async fetchProject(e,t){let n;if(console.log("Fetching project: "+e),void 0===t.projectsData){const r=await this.getFileData(e,"name, trashed");JSON.parse(r.body).trashed||(t.projectsData=[{id:e,name:JSON.parse(r.body).name}],n=0)}else"temporal"!==e&&(n=t.projectsData.findIndex(t=>t.id===e));if(n>=0&&!t.projectsData[n].permissions)try{const r=(await this.getProjectTeamData(e)).result.permissions;r&&r.length>0?t.projectsData[n].permissions=r:console.log("No project team members found.")}catch(e){console.log("Error fetching the team members data.")}if(n>=0&&!t.projectsData[n].projSettings){const r=(await this.listFiles({parentId:e,name:"projectSettings.json"})).result.files;if(r&&r.length>0){const e=await this.getFileContent(r[0].id);t.projectsData[n].projSettings=e.body}else console.log("No projectSettings.json found.")}if(n>=0&&!t.projectsData[n].drawings){const r=(await this.listFiles({parentId:e,onlyFolder:!0,name:"drawings"})).result.files;if(r&&r.length>0){const e=await this.listFiles({parentId:r[0].id,trashed:!1});t.projectsData[n].drawings=[],e.result.files.forEach(e=>{"drawingsStyles.css"===e.name?t.projectsData[n].drawingsStylesId=e.id:t.projectsData[n].drawings.push(new u(e.name.replace(/.svg$/,""),e.id))})}else console.log("No drawings folder found.")}if(n>=0&&!t.projectsData[n].elementsData){const r=(await this.listFiles({parentId:e,onlyFolder:!0,name:"elementsData"})).result.files;if(r&&r.length>0){const e=await this.listFiles({parentId:r[0].id,trashed:!1});t.projectsData[n].elementsData=e.result.files}else console.log("No elementsData folder found.")}if(n>=0&&!t.projectsData[n].comments){const r=(await this.listFiles({parentId:e,name:"comments.json",trashed:!1})).result.files;if(r&&r.length>0){t.projectsData[n].commentsFileId=r[0].id;const e=await this.getFileContent(r[0].id);t.projectsData[n].comments=JSON.parse(e.body)}else console.log("No comments.json file found.")}if(n>=0&&!t.projectsData[n].images){const r=(await this.listFiles({parentId:e,onlyFolder:!0,name:"images"})).result.files;if(r&&r.length>0){const e=await this.listFiles({parentId:r[0].id});t.projectsData[n].images=e.result.files}else console.log("No images folder found.")}return n>=0?(console.log("Project resources fetched succesfully."),t.projectsData[n]):Promise.reject(new Error("Project resources could not be fetched."))}},h=function(){function e(e,t,n){var r;void 0===n&&(n=[]),this.elementsIds=[],this.representations=[],(r=this.elementsIds).push.apply(r,e),this.content=t,this.mentions=n,this.id="c-"+c.uuidv4()}return e.prototype.createRepresentation=function(e,t){for(var n=[],r=0;r<t.length;r++)n.push(c.createBBox2(t[r],15));var i=c.rectanglesSilhouette(n),o=c.svgPathFromLines(i);o.setAttribute("style","fill:none;stroke:#e22a2a;stroke-width:8px;stroke-dasharray:30;stroke-linecap:round;"),o.dataset.id=this.id,e.appendChild(o),this.representations.push(o)},e}();class d{constructor(e,t){this.panelsStorage=e,this.panelContainer=document.createElement("div"),this.panelContainer.classList.add("mainPanel","right"),this.panelGrip=document.createElement("div"),this.panelGrip.classList.add("panel-grip"),this.panelContainer.appendChild(this.panelGrip),this.panelContent=document.createElement("div"),this.panelContent.classList.add("panel-content"),this.panelHeader=document.createElement("div"),this.panelHeader.classList.add("panel-header"),this.panelBody=document.createElement("div"),this.panelBody.classList.add("panel-body"),this.panelFooter=document.createElement("div"),this.panelFooter.classList.add("panel-footer"),this.panelContent.appendChild(this.panelHeader),this.panelContent.appendChild(this.panelBody),this.panelContent.appendChild(this.panelFooter),this.panelContainer.appendChild(this.panelContent),t.workspaceContainer.addEventListener("mousemove",e=>{this.resizingWidth?this.resizeWidth(e):this.resizingHeight&&this.resizeHeight(e)}),t.workspaceContainer.addEventListener("mouseup",()=>{this.resizingWidth=!1,this.resizingHeight=!1}),this.activeSection,this.isOpen,this.panelSide,this.sections=[],this.setActive=this.setActive.bind(this),this.panelHeader.onclick=e=>{const t=e.target.closest("[data-btn]");t&&!t.classList.contains("active")&&this.setActive(t.innerText)},this.mediumBreakpoint=window.matchMedia("(max-width: 700px)"),this.panelPositon=this.panelPositon.bind(this),this.mediumBreakpoint.addListener(this.panelPositon),this.panelSides={right:"r",bottom:"b"},this.panelPositon(this.mediumBreakpoint),this.panelWidth=250,this.panelContainer.style.setProperty("--width",this.panelWidth+"px"),this.panelHeight=200,this.panelContainer.style.setProperty("--height",this.panelHeight+"px"),this.resizingWidth=!1,this.resizingHeight=!1,this.startX,this.startWidth,this.startY,this.startHeight,this.panelGrip.onmousedown=e=>{this.panelSide===this.panelSides.right?(this.resizingWidth=!0,this.resizingHeight=!1,this.startX=e.pageX,this.startWidth=this.panelWidth):this.panelSide===this.panelSides.bottom&&(this.resizingHeight=!0,this.resizingWidth=!1,this.startY=e.pageY,this.startHeight=this.panelHeight)},t.workspaceContainer.appendChild(this.panelContainer)}resizeWidth(e){this.panelWidth=this.startWidth-(e.pageX-this.startX),this.panelContainer.style.setProperty("--width",this.panelWidth+"px")}resizeHeight(e){this.panelHeight=this.startHeight-(e.pageY-this.startY),this.panelContainer.style.setProperty("--height",this.panelHeight+"px")}open(){this.panelContainer.classList.add("open"),this.panelPositon(this.mediumBreakpoint),this.isOpen=!0}close(){this.panelContainer.classList.remove("open"),this.isOpen=!1}dockTo(e){e===this.panelSides.right?(this.panelSide=e,this.panelContainer.classList.remove("bottom"),this.panelContainer.classList.add("right"),this.panelBody.childNodes.forEach(e=>{e.classList.remove("horizontal"),e.classList.add("vertical")})):e===this.panelSides.bottom&&(this.panelSide=e,this.panelContainer.classList.remove("right"),this.panelContainer.classList.add("bottom"),this.panelBody.childNodes.forEach(e=>{e.classList.remove("vertical"),e.classList.add("horizontal")}))}setActive(e){this.activeSection&&this.setInactive(this.activeSection),this.activeSection=this.sections.find(t=>t.name===e),this.activeSection.button.classList.add("active"),this.activeSection.body.classList.remove("hidden")}setInactive(e){e.button.classList.remove("active"),e.body.classList.add("hidden")}addSection(e,t,n=!0,r=!1){let i=this.sections.find(t=>t.name===e);if(void 0===i){const n=document.createElement("span");n.innerText=e,n.dataset.btn="",this.panelHeader.appendChild(n),this.panelBody.appendChild(t),i={name:e,button:n,body:t},r?this.sections.unshift(i):this.sections.push(i)}n?this.setActive(i.name):this.setInactive(i)}addSections(e){for(let t=0;t<e.length;t++)this.addSection(e[t].name,e[t].body,0===t)}removeSection(e){const t=this.sections.findIndex(t=>t.name===e);if(t>=0){const e=this.sections.splice(t,1)[0];e.button.remove(),this.panelsStorage.appendChild(e.body),this.sections.length>0?this.setActive(this.sections[0].name):this.close()}else console.warn("Impossible to remove the section. No section was found with that name.")}panelPositon(e){e.matches?this.dockTo(this.panelSides.bottom):this.dockTo(this.panelSides.right)}kill(){this.panelHeader.onclick=null,this.panelGrip.onmousedown=null}}var f,p=function(){function e(e,t){var n=this;this.formElement=e,this.workspace=t,e.onsubmit=function(e){e.preventDefault()},this.cancelCreateBtn=document.getElementById("commentFormCancel"),this.addCommentBtn=document.getElementById("addCommentBtn"),this.deleteBtn=document.getElementById("commentFormDelete"),this.deleteBtn.onclick=function(){return n.deleteComment(n.commentId)},this.editBtn=document.getElementById("commentFormEdit"),this.editBtn.onclick=function(){return n.enableEditComment(n.commentId)},this.cancelUpdateBtn=document.getElementById("discardChanges"),this.cancelUpdateBtn.onclick=function(){return n.discardUpdate()},this.confirmUpdateBtn=document.getElementById("confirmChanges"),this.textInput=e.elements.namedItem("comment"),this.mentionsSection=e.querySelector(".members"),this.mentionsInput=e.elements.namedItem("members"),this.buttonsModes=e.querySelector(".formButtonsModes")}return e.prototype.showMentionsSection=function(){this.mentionsSection.classList.remove("hidden")},e.prototype.hideMentionsSection=function(){this.mentionsSection.classList.add("hidden")},e.prototype.buttonsVisibilityMode=function(e){for(var t=0;t<this.buttonsModes.children.length;t++)this.buttonsModes.children[t].dataset.mode!==e?this.buttonsModes.children[t].style.display="none":this.buttonsModes.children[t].style.display="flex"},e.prototype.deleteComment=function(e){var t=this.workspace.comments.findIndex((function(t){return t.id===e}));this.workspace.comments[t].representations.forEach((function(e){return e.remove()})),this.workspace.comments.splice(t,1),this.workspace.unsavedCommentsData(),this.workspace.mainPanel.removeSection("Comment")},e.prototype.disableForm=function(){this.textInput.disabled=!0,this.mentionsInput.disabled=!0},e.prototype.enableForm=function(){this.textInput.disabled=!1,this.mentionsInput.disabled=!1},e.prototype.viewComment=function(e){var t=this.workspace.comments.find((function(t){return t.id===e}));t?(this.fillInputs(t),this.commentId=t.id,this.disableForm(),this.buttonsVisibilityMode("view")):console.warn("No comment found with that id:",e)},e.prototype.enableEditComment=function(e){var t=this,n=this.workspace.comments.find((function(t){return t.id===e}));n?(this.fillInputs(n),this.commentId=e,this.enableForm(),this.buttonsVisibilityMode("edit"),this.formElement.onchange=function(){t.confirmUpdateBtn.classList.remove("disabled"),t.confirmUpdateBtn.onclick=function(){return t.updateComment(e,t.textInput.value,t.getSelectedMembers())}}):console.warn("No comment found with that id:",e)},e.prototype.updateComment=function(e,t,n){var r=this.workspace.comments.find((function(t){return t.id===e}));r?(r.content=t,r.mentions=n,this.workspace.unsavedCommentsData(),this.formElement.onchange=null,this.disableForm(),this.buttonsVisibilityMode("view"),this.confirmUpdateBtn.classList.add("disabled"),this.cancelUpdateBtn.classList.add("disabled"),this.confirmUpdateBtn.onclick=null,this.cancelUpdateBtn.onclick=null):console.warn("No comment found with that id:",e)},e.prototype.discardUpdate=function(){var e=this,t=this.workspace.comments.find((function(t){return t.id===e.commentId}));t?(this.textInput.value=t.content,this.formElement.onchange=null,this.disableForm(),this.buttonsVisibilityMode("view"),this.confirmUpdateBtn.classList.add("disabled"),this.confirmUpdateBtn.onclick=null):console.warn("No comment found with that id:",this.commentId)},e.prototype.getSelectedMembers=function(){for(var e=[],t=0;t<this.mentionsInput.selectedOptions.length;t++)e.push(this.mentionsInput.selectedOptions[t].value);return e},e.prototype.fillInputs=function(e){var t=this;if(this.textInput.value=e.content,e.mentions.length>0){var n=[];e.mentions.forEach((function(e){var r=t.workspace.permissions.find((function(t){return t.emailAddress===e}));n.push('<option value="'+e+'">'+(r?r.displayName:"Removed user")+"</option>")})),this.mentionsInput.innerHTML=n.join("")}else c.emptyNode(this.mentionsInput)},e.prototype.reset=function(){this.formElement.reset()},e}(),m=function(){function e(e,t){var n=this;this.appendedDrawingsIds=[],this.comments=[],this.elementsComments={},this.workspaceContainer=document.createElement("div"),this.workspaceContainer.classList.add("workspace"),this.projectName=e.name,this.projectId=e.id,this.permissions=e.permissions,this.projectIndex=t.projectsData.findIndex((function(t){return t.name===e.name})),t.lastUploadedProject&&e.id===t.lastUploadedProject.id?this.elementsData=t.lastUploadedProject.elementsData:(this.drawings=e.drawings,this.drawingsStylesId=e.drawingsStylesId,this.elementsData={}),t.projectsListBtn.innerHTML="<span>"+e.name+"</span>",this.drawingsBtns=t.drawingsBtns,this.saveBtn=t.saveBtn,this.createDrawingsBtns(this.drawings),this.drawingsBtns.children[0].innerText="Pick a drawing",this.drawingsBtns.style.display="unset",t.toolbarsContainer.style.display="flex",this.projectsData=t.projectsData,this.propsTablesContainer=document.getElementById("propsTablesContainer"),this.paramsTablesContainer=document.getElementById("paramsTablesContainer"),e.commentsFileId&&(this.commentsFileId=e.commentsFileId),e.comments&&(e.comments.forEach((function(e){var t=new h(e.elementsIds,e.content,e.mentions);n.comments.push(t);for(var r=0;r<e.elementsIds.length;r++)n.elementsComments.hasOwnProperty(e.elementsIds[r])||(n.elementsComments[e.elementsIds[r]]=[]),n.elementsComments[e.elementsIds[r]].push(t.id)})),this.drawings.forEach((function(e){return e.commentsChanged=!0}))),this.mainPanel=new d(t.panelsStorage,this),this.commentForm=new p(document.getElementById("commentForm"),this),this.drawingsContainer=document.createElement("div"),this.drawingsContainer.classList.add("drawingsContainer"),this.workspaceContainer.appendChild(this.drawingsContainer),t.workspacesContainer.appendChild(this.workspaceContainer)}return e.prototype.manageTools=function(e,t,n){void 0!==this.activeDrawing?void 0===this.activeTool?this.activeTool=new t(n,e.currentTarget,this):this.activeTool.name!==n?(this.activeTool.kill(),this.activeTool=new t(n,e.currentTarget,this)):this.activeTool.name===n&&(this.activeTool.kill(),this.activeTool=void 0):console.log("A drawing must be active.")},e.prototype.unsavedCommentsData=function(){this.commentsChangesUnsaved=!0,this.saveBtn.classList.remove("disabled"),this.saveBtn.classList.add("enabled")},e.prototype.setDrawing=function(e){if(this.activeDrawing&&this.activeDrawing.name!==e.name)this.activeTool&&this.activeTool.currentSelection.length>0&&this.activeTool.removeDrawingSelectionAppearance(this.activeDrawing),this.activeDrawing.content.style.display="none";else if(this.activeDrawing&&this.activeDrawing.name===e.name)return;if(e.content.style.visibility="hidden",this.appendedDrawingsIds.includes(e.id)?e.content.style.display="unset":(this.appendedDrawingsIds.push(e.id),this.drawingsContainer.append(e.content)),e.commentsChanged){if(void 0===e.commentsGroup)for(var t=!1,n=0;n<this.comments.length;n++){for(var r=[],i=0;i<this.comments[n].elementsIds.length;i++){null!==(o=e.content.querySelector('[data-id="'+this.comments[n].elementsIds[i]+'"]'))&&r.push(o)}r.length>0&&(t||(e.createCommentsGroup(),t=!0),this.comments[n].createRepresentation(e.commentsGroup,r))}else for(n=0;n<this.comments.length;n++)if(null===e.commentsGroup.querySelector('[data-id="'+this.comments[n].id+'"]')){for(r=[],i=0;i<this.comments[n].elementsIds.length;i++){var o;null!==(o=e.content.querySelector('[data-id="'+this.comments[n].elementsIds[i]+'"]'))&&r.push(o)}r.length>0&&this.comments[n].createRepresentation(e.commentsGroup,r)}e.commentsChanged=!1}this.activeTool&&this.activeTool.currentSelection.length>0&&this.activeTool.addDrawingSelectionAppearance(e),e.content.style.visibility="unset",this.activeDrawing=e},e.prototype.createDrawingsBtns=function(e){var t=[];e.forEach((function(e){t.push("<li "+(e.id?'data-id="'+e.id+'"':"")+">"+e.name+"</li>")})),this.drawingsBtns.querySelector(".dropdown-content").innerHTML=t.join("")},e.prototype.close=function(){c.emptyNode(this.drawingsBtns.querySelector(".dropdown-content")),void 0!==this.drawingsStylesTag&&this.drawingsStylesTag.remove(),this.drawingsContainer.innerHTML=""},e}(),g=function(){function e(e,t,n){this.name=e,this.toolBtn=t,this.workspace=n,this.toolBtn.classList.add("btn-tool-enabled")}return e.prototype.kill=function(){this.toolBtn.classList.remove("btn-tool-enabled")},e}(),y=(f=function(e,t){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}f(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),v=function(e){function t(t,n,r){var i=e.call(this,t,n,r)||this;return i.currentSelection=[],i.multipleSelection=!1,i.manageSelection=i.manageSelection.bind(i),r.drawingsContainer.addEventListener("click",i.manageSelection),i}return y(t,e),t.prototype.manageSelection=function(e){(this.selection=e.target.closest("[selectable]"),null!==this.selection)?this.multipleSelection?-1===this.currentSelection.indexOf(this.selection.dataset.id)?this.select(this.selection):this.deselect(this.selection.dataset.id):0===this.currentSelection.length?this.select(this.selection):this.selection.dataset.id!==this.currentSelection[0]?(this.deselect(this.currentSelection[0]),this.select(this.selection)):this.selection.dataset.id===this.currentSelection[0]&&this.deselect(this.currentSelection[0]):this.clearAllSelection();console.log("Selection ",this.currentSelection)},t.prototype.select=function(e){this.currentSelection.push(e.dataset.id),this.addSelectionAppearance(e)},t.prototype.deselect=function(e){var t=this.currentSelection.indexOf(e);if(t>-1){this.currentSelection.splice(t,1);var n=this.workspace.activeDrawing.content.querySelector('[data-id="'+e+'"]');n&&this.clearSelectionAppearance(n)}},t.prototype.removeDrawingSelectionAppearance=function(e){for(var t=0;t<this.currentSelection.length;t++){var n=e.content.querySelector('[data-id="'+this.currentSelection[t]+'"]');n&&this.clearSelectionAppearance(n)}},t.prototype.addDrawingSelectionAppearance=function(e){for(var t=0;t<this.currentSelection.length;t++){var n=e.content.querySelector('[data-id="'+this.currentSelection[t]+'"]');n&&this.addSelectionAppearance(n)}},t.prototype.clearSelectionAppearance=function(e){for(var t=0;t<e.children.length;t++)e.children[t].classList.remove("selected")},t.prototype.addSelectionAppearance=function(e){for(var t=0;t<e.children.length;t++)e.children[t].classList.add("selected")},t.prototype.clearAllSelection=function(){if(this.currentSelection.length>0){for(var e=0;e<this.currentSelection.length;e++){var t=this.workspace.activeDrawing.content.querySelector('[data-id="'+this.currentSelection[e]+'"]');t&&this.clearSelectionAppearance(t)}this.currentSelection.length=0}},t.prototype.getDrawingSelectedElementsRefs=function(e){for(var t=[],n=0;n<this.currentSelection.length;n++){var r=e.content.querySelector('[data-id="'+this.currentSelection[n]+'"]');r&&t.push(r)}return t},t.prototype.kill=function(){e.prototype.kill.call(this),this.workspace.drawingsContainer.removeEventListener("click",this.manageSelection),this.clearAllSelection()},t}(g);class b extends v{constructor(e,t,n){if(super(e,t,n),console.log("Comment element tool enabled."),this.multipleSelection=!0,this.boundingBox,this.waitingForComment=!1,this.cancelComment=this.cancelComment.bind(this),n.commentForm.cancelCreateBtn.onclick=this.cancelComment,n.permissions.length>1){const e=[],t=window.getCurrentUser().emailAddress;n.permissions.forEach(n=>{n.emailAddress!==t&&e.push(`<option value="${n.emailAddress}">${n.displayName}</option>`)}),n.commentForm.mentionsInput.innerHTML=e.join(""),n.commentForm.showMentionsSection()}else n.commentForm.hideMentionsSection();this.addComment=this.addComment.bind(this),n.commentForm.addCommentBtn.onclick=this.addComment,n.commentForm.enableForm(),n.commentForm.reset(),this.hasUsedPanel=!1}manageSelection(e){super.manageSelection(e),this.currentSelection.length>0?(this.waitingForComment=!0,this.workspace.commentForm.buttonsVisibilityMode("create"),this.workspace.mainPanel.addSection("Comment",this.workspace.commentForm.formElement),this.workspace.mainPanel.open(),this.hasUsedPanel=!0):this.waitingForComment=!1}addComment(){if(0===this.currentSelection.length)return;let e;if(void 0===this.workspace.activeDrawing.commentsGroup&&this.workspace.activeDrawing.createCommentsGroup(),this.workspace.permissions.length>1&&(e=this.workspace.commentForm.getSelectedMembers()).length>0){const t=window.getCurrentUser().displayName,n=window.getCurrentUser().photoLink;this.workspace.pendingNotificationsToSend.push({emails:e,userName:t,userPhoto:n,textContent:this.workspace.commentForm.textInput.value,projectName:this.workspace.projectName,projectId:this.workspace.projectId})}const t=new h(this.currentSelection,this.workspace.commentForm.textInput.value,e),n=this.getDrawingSelectedElementsRefs(this.workspace.activeDrawing);t.createRepresentation(this.workspace.activeDrawing.commentsGroup,n);for(let e=0;e<this.currentSelection.length;e++)this.workspace.elementsComments.hasOwnProperty(this.currentSelection[e])||(this.workspace.elementsComments[this.currentSelection[e]]=[]),this.workspace.elementsComments[this.currentSelection[e]].push(t.id);console.log("elementsComments ",this.workspace.elementsComments),this.workspace.comments.push(t),console.log(this.workspace.comments),this.workspace.commentForm.reset(),this.workspace.mainPanel.close(),this.waitingForComment=!1,this.workspace.unsavedCommentsData(),this.workspace.drawings.forEach(e=>{e.id!==this.workspace.activeDrawing.id&&(e.commentsChanged=!0)}),super.clearAllSelection()}cancelComment(){this.workspace.mainPanel.close(),this.workspace.commentForm.reset(),this.waitingForComment=!1,super.clearAllSelection()}kill(){super.kill(),console.log("Comment element tool disabled."),this.waitingForComment&&(this.workspace.commentForm.reset(),this.workspace.mainPanel.close()),this.hasUsedPanel&&this.workspace.mainPanel.removeSection("Comment"),this.workspace.commentForm.addCommentBtn.onclick=null,this.workspace.commentForm.cancelCreateBtn.onclick=null}}class w extends v{constructor(e,t,n){super(e,t,n),console.log("Elements data tool enabled."),this.elementsData=n.elementsData,this.projectsData=n.projectsData,this.projectIndex=n.projectIndex,this.currentElementData,this.hasUsedPanel=!1}manageSelection(e){super.manageSelection(e),null!==this.selection&&this.currentSelection.length>0?(this.showElementData(this.selection.dataset.category,this.selection.dataset.id),this.selection.dataset.comment?(this.workspace.commentForm.viewComment(this.selection.dataset.comment),this.workspace.mainPanel.addSection("Comment",this.workspace.commentForm.formElement)):this.workspace.mainPanel.sections.find(e=>"Comment"===e.name)&&this.workspace.mainPanel.removeSection("Comment")):this.currentElementData&&(this.currentElementData=void 0,this.workspace.mainPanel.close(),console.log("Data table cleaned."))}async showElementData(e,t){let n=!0;if(this.elementsData[e])this.currentElementData=this.elementsData[e].instances[t],console.log(this.currentElementData);else{const r=this.projectsData[this.projectIndex].elementsData.find(t=>t.name.replace(".json","")===e);void 0!==r?await l.getFileContent(r.id).then(n=>{this.elementsData[e]=JSON.parse(n.body),this.currentElementData=this.elementsData[e].instances[t],console.log(this.currentElementData)},e=>{n=!1,console.log(e)}):console.log("There is no data for that element.")}if(n){this.workspace.propsTablesContainer.innerHTML=this.createDataTable(this.currentElementData.properties);const e=[{name:"Properties",body:this.workspace.propsTablesContainer}];this.currentElementData.parameters.length>0&&(this.workspace.paramsTablesContainer.innerHTML=this.createDataTable(this.currentElementData.parameters),e.push({name:"Parameters",body:this.workspace.paramsTablesContainer})),this.workspace.mainPanel.addSections(e),this.workspace.mainPanel.open(),this.hasUsedPanel=!0}}createDataTable(e){const t=[],n=[];for(let r=0;r<e.length;r++){const i=e[r].category,o=t.indexOf(i),a=`<tr><th>${e[r].name}</th><td>${e[r].value}</td></tr>`;-1!==o?n[o].push(a):(n.push([`<table class="data-table"><thead><tr><th colspan="2">${i}</th></tr></thead>`,a]),t.push(i))}const r=[];for(let e=0;e<n.length;e++)r.push(n[e].join("")+"</tbody></table>");return r.join("")}kill(){super.kill(),this.workspace.mainPanel.isOpen&&this.workspace.mainPanel.close(),this.hasUsedPanel&&(this.workspace.mainPanel.removeSection("Properties"),this.workspace.mainPanel.removeSection("Parameters")),console.log("Elements data tool disabled.")}}var T=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},S=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},I=function(){function e(e,t){var n=this;this.pendingToRemove=[],this.pendingToAdd=[],this.htmlContainer=e,this.shareForm=e.querySelector(".share-form"),this.shareFormErrorMsg=e.querySelector(".share-form > .error-msg"),this.confirmChangesBtns=e.querySelector(".modal-main-btns"),this.saveChangesBtn=e.querySelector(".save-changes-btn"),this.cancelChangesBtn=e.querySelector(".cancel-changes-btn"),this.waitingAnimation=e.querySelector(".loader-container"),this.currentUsersContent=e.querySelector(".current-users"),this.currentUsersTable=e.querySelector(".current-users tbody"),this.pendingUsersContent=e.querySelector(".pending-users"),this.pendingUsersToAddTable=e.querySelector(".pending-users tbody"),this.shareNotificationContainer=e.querySelector(".share-notification"),this.shareNotificationInput=e.querySelector(".share-notification > input"),this.app=t,this.projectsList=t.projectsList,this.currentUsersTable.addEventListener("click",(function(e){if(e.target.closest("[data-action]")){var t=e.target.closest("[data-action]");"stage"===t.dataset.action?n.stageMemberToRemove(t.parentElement):n.unstageMemberToRemove(t.parentElement)}})),this.pendingUsersToAddTable.addEventListener("click",(function(e){e.target.closest("[data-action]")&&n.unstageMemberToAdd(e.target.closest("[data-action]").parentElement)})),this.saveChanges=this.saveChanges.bind(this),this.stageMemberToAdd=this.stageMemberToAdd.bind(this),this.shareForm.onsubmit=this.stageMemberToAdd}return e.prototype.setUpDialog=function(e){this.pendingToRemove=[],c.emptyNode(this.currentUsersTable),this.pendingToAdd=[],c.emptyNode(this.pendingUsersToAddTable),this.pendingUsersContent.classList.add("hidden"),this.shareNotificationContainer.classList.add("hidden");for(var t=0;t<this.confirmChangesBtns.children.length;t++)this.confirmChangesBtns.children[t].classList.add("disabled");if(this.saveChangesBtn.onclick=null,this.cancelChangesBtn.onclick=null,this.projectData=e,this.projectItem=this.projectsList.querySelector('button[data-proj-id="'+e.id+'"]'),e.shared){var n=[],r=window.getCurrentUser().emailAddress;e.permissions.forEach((function(e){n.push('\n          <tr data-permission="'+e.id+'">\n            <td class="user-data">\n              <img src="'+e.photoLink+'">\n              <div>\n                <span>'+(e.emailAddress===r?"You":e.displayName)+"</span>\n                <span>"+e.emailAddress+"</span>\n              </div>\n            </td>\n            "+("owner"===e.role?'<td title="Project owner"><svg><use href="#keyIcon"></use></svg></td>':'<td class="action-btn" data-action="stage"><svg><use href="#crossIcon"></use></svg></td>')+"\n          </tr>")})),this.currentUsersTable.innerHTML=n.join(""),this.currentUsersContent.classList.remove("empty")}else this.currentUsersContent.classList.add("empty")},e.prototype.stageMemberToAdd=function(e){e.preventDefault();var t=e.target.elements.namedItem("email").value;if(""===t||this.pendingToAdd.includes(t)||void 0!==this.projectData.permissions.find((function(e){return e.emailAddress===t})))this.shareFormErrorMsg.classList.remove("hidden"),console.log("Not valid input.");else if(this.shareFormErrorMsg.classList.add("hidden"),this.pendingToAdd.push(t),this.pendingUsersToAddTable.insertAdjacentHTML("beforeend",'\n        <tr data-email="'+t+'">\n          <td class="user-data"><span>'+t+'</span></td>\n          <td class="action-btn" data-action="stage"><svg><use href="#crossIcon"></use></svg></td>\n        </tr>'),e.target.elements.namedItem("email").value="",1===this.pendingToAdd.length&&(this.pendingUsersContent.classList.remove("hidden"),this.shareNotificationContainer.classList.remove("hidden"),this.shareNotificationInput.checked=!0,0===this.pendingToRemove.length)){for(var n=0;n<this.confirmChangesBtns.children.length;n++)this.confirmChangesBtns.children[n].classList.remove("disabled");this.saveChangesBtn.onclick=this.saveChanges,this.cancelChangesBtn.onclick=this.app.closeModalDialog}},e.prototype.unstageMemberToAdd=function(e){var t=this.pendingToAdd.indexOf(e.dataset.email);if(this.pendingToAdd.splice(t,1),e.remove(),0===this.pendingToAdd.length&&(this.pendingUsersContent.classList.add("hidden"),this.shareNotificationContainer.classList.add("hidden"),0===this.pendingToRemove.length)){for(var n=0;n<this.confirmChangesBtns.children.length;n++)this.confirmChangesBtns.children[n].classList.add("disabled");this.saveChangesBtn.onclick=null,this.cancelChangesBtn.onclick=null}},e.prototype.stageMemberToRemove=function(e){this.pendingToRemove.push(e.dataset.permission),e.classList.add("to-delete");var t=e.querySelector(".action-btn");if(t.innerHTML='<svg><use href="#reloadIcon"></use></svg>',t.dataset.action="unstage",0===this.pendingToAdd.length&&1===this.pendingToRemove.length){for(var n=0;n<this.confirmChangesBtns.children.length;n++)this.confirmChangesBtns.children[n].classList.remove("disabled");this.saveChangesBtn.onclick=this.saveChanges,this.cancelChangesBtn.onclick=this.app.closeModalDialog}},e.prototype.unstageMemberToRemove=function(e){var t=this.pendingToRemove.indexOf(e.dataset.permission);this.pendingToRemove.splice(t,1),e.classList.remove("to-delete");var n=e.querySelector(".action-btn");if(n.innerHTML='<svg><use href="#crossIcon"></use></svg>',n.dataset.action="stage",0===this.pendingToRemove.length&&0===this.pendingToAdd.length){for(var r=0;r<this.confirmChangesBtns.children.length;r++)this.confirmChangesBtns.children[r].classList.add("disabled");this.saveChangesBtn.onclick=null,this.cancelChangesBtn.onclick=null}},e.prototype.addStagedMembers=function(){var e=this,t=[];return this.pendingToAdd.forEach((function(n,r){t.push(l.shareFile(e.projectData.id,n,600*r))})),Promise.all(t)},e.prototype.removeStagedMembers=function(){var e=this,t=[];return this.pendingToRemove.forEach((function(n){t.push(l.stopSharingFile(e.projectData.id,n))})),Promise.all(t)},e.prototype.saveChanges=function(){return T(this,void 0,void 0,(function(){var e,t,n=this;return S(this,(function(r){switch(r.label){case 0:return this.waitingAnimation.classList.remove("hidden"),e=!0,t=!0,this.pendingToRemove.length>0?[4,this.removeStagedMembers().then((function(e){n.pendingToRemove.forEach((function(e){var t=n.projectData.permissions.findIndex((function(t){return t.id===e}));n.projectData.permissions.splice(t,1)}))}),(function(e){console.log(e),t=!1}))]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.pendingToAdd.length>0?[4,this.addStagedMembers().then((function(e){e.forEach((function(e,t){n.projectData.permissions.push({id:e.result.id,emailAddress:n.pendingToAdd[t],role:e.result.role,displayName:e.result.displayName,photoLink:e.result.photoLink})})),n.shareNotificationInput.checked&&l.sendSharingProjectEmail(window.getCurrentUser().displayName,n.pendingToAdd,n.projectData.name,n.projectData.id),window.saveMessagingDeviceToken()}),(function(t){console.log(t),e=!1}))]:[3,4];case 3:r.sent(),r.label=4;case 4:return e&&t?(1===this.projectData.permissions.length?(this.projectData.shared=!1,this.projectItem.querySelector(".sharedIcon")&&this.projectItem.querySelector(".sharedIcon").remove()):(this.projectData.shared=!0,this.projectItem.querySelector(".sharedIcon")||this.projectItem.insertAdjacentHTML("afterbegin",'<img class="sharedIcon" src="src/assets/icons/shareIcon.svg">')),this.app.showMessage("success","Project members updated successfully.",5e3)):this.app.showMessage("error","Something went wrong, member changes could no be saved."),this.waitingAnimation.classList.add("hidden"),this.app.closeModalDialog(),[2]}}))}))},e}();class E{constructor(){this.notificationsBtn=document.getElementById("notificationBtn"),this.notificationsContainer=document.getElementById("notificationsContainer"),this.notificationsList=document.querySelector("#notificationsContainer > .notifications-body"),this.notificationsBtn.onclick=()=>this.notificationsContainer.classList.toggle("open"),this.notificationsList.addEventListener("click",e=>{e.target.closest("li")&&this.viewNotification(e.target.closest("li").dataset.id)}),this.notifications=[]}createNotificaction(e){const t=document.createElement("li"),n=c.uuidv4();t.dataset.id=n,t.classList.add("pending"),t.innerHTML=`\n      <img class="notification-thumb" src="${e.photoLink}">\n      <div class="notification-content">\n        <h4>${e.author} mentioned you in a comment on the project ${e.projectName}</h4>\n        <p>${e.text}</p>\n      </div>`,this.notificationsList.prepend(t),this.notifications.push({id:n,representation:t,state:"pending",data:e}),this.notificationsBtn.classList.add("enabled"),1===this.notifications.length&&this.notificationsContainer.classList.remove("empty")}deleteNotificaction(e){const t=this.notifications.findIndex(t=>t.id===e);this.notifications[t].representation.remove(),this.notifications.splice(t,1)}viewNotification(e){const t=this.notifications.find(t=>t.id===e);t.state="read",t.representation.classList.remove("pending"),void 0===this.notifications.find(e=>"pending"===e.state)&&this.notificationsBtn.classList.remove("enabled")}}var C=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},_=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},D=function(){function e(e,t){var n=this;this.emptyInputValue=new RegExp(/^(\s|\t)*$/),this.htmlContainer=e,this.renameForm=e.querySelector("form"),this.input=e.querySelector("form > div:first-child > input"),this.renameProjectErrorMsg=e.querySelector(".error-msg"),this.cancelBtn=e.querySelector("form > div:last-child > .cancel-btn"),this.app=t,this.renameProject=this.renameProject.bind(this),this.renameForm.onsubmit=this.renameProject,this.cancelBtn.onclick=function(e){e.preventDefault(),n.setInputValue(""),t.closeModalDialog()}}return e.prototype.setUpDialog=function(e){this.projectListItem=e,this.projectId=e.dataset.projId,this.currentName=e.dataset.name,this.renameProjectErrorMsg.classList.add("hidden"),this.setInputValue(this.currentName)},e.prototype.renameProject=function(e){return C(this,void 0,void 0,(function(){var t,n;return _(this,(function(r){switch(r.label){case 0:return e.preventDefault(),""===this.input.value||this.emptyInputValue.test(this.input.value)?(this.renameProjectErrorMsg.classList.remove("hidden"),[3,6]):[3,1];case 1:return this.input.value.trim()!==this.currentName?[3,2]:(this.setInputValue(""),this.app.closeModalDialog(),[3,6]);case 2:this.renameProjectErrorMsg.classList.add("hidden"),r.label=3;case 3:return r.trys.push([3,5,,6]),[4,l.renameFile(this.projectId,this.input.value.trim())];case 4:return 200===(t=r.sent()).status?(this.projectListItem.querySelector("h4").innerText=t.result.name,this.projectListItem.dataset.name=t.result.name,this.setInputValue(""),this.app.closeModalDialog(),this.app.showMessage("success","Project renamed successfully.",5e3)):(this.app.showMessage("error","It was not possible to rename the project."),this.app.closeModalDialog(),console.error("Something went wrong renaming a project. ",t)),[3,6];case 5:return n=r.sent(),this.app.showMessage("error","It was not possible to rename the project."),this.app.closeModalDialog(),console.error("Something went wrong renaming a project. ",n),[3,6];case 6:return[2]}}))}))},e.prototype.setInputValue=function(e){this.input.value=e},e}(),k=function(){function e(){var e=this;this.visible=!1,this.HTMLContainer=document.createElement("div"),this.HTMLContainer.id="contextMenu",this.menuListContainer=document.createElement("ul"),this.HTMLContainer.appendChild(this.menuListContainer),this.HTMLContainer.style.display="none",window.addEventListener("click",(function(){e.visible&&e.toggleMenu("hide")})),window.addEventListener("contextmenu",(function(t){t.preventDefault();var n=t.target.closest("[data-cxmenu]");n&&n.hasOwnProperty("contextMenuData")?(e.clearMenu(),e.generateMenu(n.contextMenuData),e.setPosition(t.pageY,t.pageX)):e.visible&&e.toggleMenu("hide")})),window.document.body.appendChild(this.HTMLContainer)}return e.prototype.toggleMenu=function(e){this.HTMLContainer.style.display="show"===e?"block":"none",this.visible=!this.visible},e.prototype.setPosition=function(e,t){this.HTMLContainer.style.left=t+"px",this.HTMLContainer.style.top=e+"px",this.toggleMenu("show")},e.prototype.clearMenu=function(){this.menuListContainer.childNodes.forEach((function(e){return e.onclick=null})),c.emptyNode(this.menuListContainer)},e.prototype.generateMenu=function(e){for(var t=new DocumentFragment,n=0;n<e.length;n++){var r=document.createElement("li");r.innerText=e[n].name,r.onclick=e[n].action,t.appendChild(r)}this.menuListContainer.appendChild(t)},e}();class N{constructor(e,t){this.HTMLContainer=document.createElement("button"),"temporal"===e.id&&this.HTMLContainer.classList.add("unsync"),this.HTMLContainer.dataset.projId=e.id,this.HTMLContainer.dataset.name=e.name,this.HTMLContainer.classList.add("projectItem");let n=[];e.shared&&n.push('<svg class="sharedIcon"><use href="#sharedIcon" /></svg>'),e.thumbId?n.push(`<img class="thumb" src="https://drive.google.com/uc?id=${e.thumbId}">`):n.push('<svg class="thumb" xmlns="http://www.w3.org/2000/svg" viewBox="-100 -50 350 210"><path d="M143,10.44H65.27V7a7,7,0,0,0-7-7H7A7,7,0,0,0,0,7V103a7,7,0,0,0,7,7H65V70.18H85V110h58a7,7,0,0,0,7-7V17.41A7,7,0,0,0,143,10.44ZM125,53.49H105v-20h20Z" style="fill:#e6e6e6"/></svg>'),n.push(`<h4>${e.name}</h4>`),this.HTMLContainer.innerHTML=n.join(""),this.HTMLContainer.dataset.cxmenu="",this.HTMLContainer.contextMenuData=[{name:"Delete",action:()=>{t.showViewportDialog("action",`Are you sure you want to delete the ${e.name} project?`,[{name:"Delete",function:()=>{t.showViewportDialog("loader",`Deleting ${e.name} project.`),l.deleteFile(e.id).then(n=>{this.HTMLContainer.remove();const r=t.projectsData.findIndex(t=>t.id===e.id);t.projectsData.splice(r,1),t.hideViewportMessage(),t.showMessage("success","Project deleted successfully")})}},{name:"Cancel",function:()=>{t.hideViewportMessage()}}])}},{name:"Share project",action:()=>{t.shareProjectDialog.setUpDialog(e),t.showModalDialog(t.shareProjectDialog.htmlContainer),t.modalDialogContainer.classList.add("grayTranslucent")}},{name:"Rename",action:()=>{t.renameProjectDialog.setUpDialog(this.HTMLContainer),t.showModalDialog(t.renameProjectDialog.htmlContainer)}}]}}var A,x=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},M=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},L=function(){function e(){var e=this;this.userInfoContainer=document.getElementById("user-info"),this.workspacesContainer=document.getElementById("workspaces"),this.projectsListBtn=document.getElementById("projectsListBtn"),this.drawingsBtns=document.getElementById("drawingsBtns"),this.toolbarsContainer=document.getElementById("toolbarsContainer"),this.modalDialogContainer=document.getElementById("modalDialogContainer"),this.modalDialogContent=this.modalDialogContainer.querySelector(".modal-content"),this.modalDialogsStorage=document.getElementById("modalDialogsStorage"),this.closeModalBtn=document.getElementById("closeModalBtn"),this.closeModalDialog=this.closeModalDialog.bind(this),this.closeModalBtn.onclick=this.closeModalDialog,this.viewportMessage=document.getElementById("viewportMessage"),this.projectsListContainer=document.getElementById("projectsListContainer"),this.projectsList=document.getElementById("projectsList"),this.closeProjectsListBtn=document.getElementById("closeProjectsListBtn"),this.panelsStorage=document.getElementById("panelsStorage"),this.saveBtn=document.getElementById("saveBtn"),this.saveCommentsData=this.saveCommentsData.bind(this),this.saveBtn.onclick=this.saveCommentsData,this.closeProjectsList=this.closeProjectsList.bind(this),this.projectsListBtn.onclick=function(){"true"===e.projectsListBtn.dataset.open?e.closeProjectsList():"false"===e.projectsListBtn.dataset.open&&e.openProjectsList()},this.closeProjectsListBtn.addEventListener("click",this.closeProjectsList),this.goToProject=this.goToProject.bind(this),this.projectsList.addEventListener("click",this.goToProject),this.uploadFileForm=document.getElementById("uploadFileForm"),this.fileInput=document.getElementById("fileInput"),this.submitFileBtn=this.uploadFileForm.querySelector('button[type="submit"]'),document.getElementById("newProjectBtn").addEventListener("click",(function(){e.showModalDialog(e.uploadFileForm),e.modalDialogContainer.classList.add("grayTranslucent")})),this.fileInput.addEventListener("change",(function(){e.fileInput.files.length>0?(e.fileInput.nextElementSibling.innerHTML=e.fileInput.files[0].name,e.submitFileBtn.classList.remove("disabled")):(e.fileInput.nextElementSibling.innerHTML="Choose a file",e.submitFileBtn.classList.add("disabled"))})),this.uploadFileForm.onsubmit=function(t){t.preventDefault(),document.getElementById("loadingFile").style.display="unset",e.submitFileBtn.classList.add("disabled"),e.submitFileBtn.innerHTML="Uploading file",e.fileInput.nextElementSibling.style.display="none";var n=t.target.elements.namedItem("file").files[0];l.createProject(n,e,e.lastUploadedProject).then((function(t){e.updateProjectsList(t),e.closeModalDialog(),e.showMessage("success","Project uploaded successfully."),e.fileInput.value="",document.getElementById("loadingFile").style.display="none",e.fileInput.nextElementSibling.innerHTML="Choose a file",e.submitFileBtn.innerHTML="Upload",e.fileInput.nextElementSibling.style.display="unset"}),(function(t){e.closeModalDialog(),e.updateProjectsList(e.lastUploadedProject),console.error(t)}))},this.renameProjectDialog=new D(document.getElementById("renameProjectForm"),this),this.shareProjectDialog=new I(document.getElementById("shareProjectDialog"),this),this.messageContainer=document.getElementById("messageContainer"),this.closeMessage=this.closeMessage.bind(this),this.messageContainer.querySelector("button").onclick=this.closeMessage,window.onresize=this.adjustItems,document.getElementById("tool-4").addEventListener("click",(function(t){return e.currentWorkspace.manageTools(t,w,"elementsDataTool")})),document.getElementById("tool-5").addEventListener("click",(function(t){return e.currentWorkspace.manageTools(t,b,"commentsTool")})),this.notificationsManager=new E,this.contextMenu=new k}return e.prototype.setUserInfo=function(){return x(this,void 0,void 0,(function(){var e;return M(this,(function(t){switch(t.label){case 0:return[4,l.getUserInfo()];case 1:return e=t.sent(),this.userInfo=JSON.parse(e.body).user,this.userInfoContainer.innerHTML="\n      <img src="+this.userInfo.photoLink+">\n      <span>\n        <span>"+this.userInfo.displayName+'</span><span class="email">'+this.userInfo.emailAddress+"</span>\n      </span>",[2]}}))}))},e.prototype.saveCommentsData=function(){return x(this,void 0,void 0,(function(){var e,t,n,r,i,o,a,s,c,u,h,d=this;return M(this,(function(f){switch(f.label){case 0:return this.currentWorkspace&&this.currentWorkspace.commentsChangesUnsaved?(this.commentsChangesUnsaved=!1,this.saveBtn.classList.remove("enabled"),this.saveBtn.classList.add("progress"),e=void 0,t=[],this.currentWorkspace.comments.forEach((function(e){t.push({elementsIds:e.elementsIds,content:e.content,mentions:e.mentions})})),n=JSON.stringify(t),this.currentWorkspace.commentsFileId?[3,8]:[4,l.uploadFile(n,"application/json","comments.json",this.currentWorkspace.projectId)]):[3,13];case 1:if(!(r=f.sent()).ok||200!==r.status)return[3,6];f.label=2;case 2:return f.trys.push([2,4,,5]),i=new TextDecoder("utf-8"),[4,r.body.getReader().read()];case 3:return o=f.sent(),a=o.value,o.done,s=JSON.parse(i.decode(a)).id,this.currentWorkspace.commentsFileId=s,e=!0,[3,5];case 4:return c=f.sent(),console.log("Error decoding the new comments.json file id: ",c),[3,5];case 5:return[3,7];case 6:e=!1,f.label=7;case 7:return[3,10];case 8:return[4,l.updateFileContent(n,"application/json",this.currentWorkspace.commentsFileId)];case 9:(u=f.sent()).ok&&200===u.status&&(e=!0),f.label=10;case 10:return e&&this.currentWorkspace.pendingNotificationsToSend.length>0?(h=[],this.currentWorkspace.pendingNotificationsToSend.forEach((function(e){var t=l.sendNotification(e.emails,e.userName,e.userPhoto,e.textContent,e.projectName,e.projectId);h.push(t)})),[4,Promise.all(h).then((function(e){console.log("Users notified successfully"),d.currentWorkspace.pendingNotificationsToSend.length=0}),(function(e){console.warn("Users couldn't be notified. ",e)}))]):[3,12];case 11:f.sent(),f.label=12;case 12:e?(this.saveBtn.classList.remove("progress"),this.saveBtn.classList.add("disabled"),console.log("Data saved successfully.")):(this.commentsChangesUnsaved=!0,this.saveBtn.classList.remove("progress"),this.saveBtn.classList.add("enabled"),this.showMessage("error","Something went wrong and data could not be saved."),console.error("Something went wrong trying to save. Retry again.")),f.label=13;case 13:return[2]}}))}))},e.prototype.goToProject=function(e){var t=this,n=e.target.closest("[data-proj-id]");null!==n&&(this.currentWorkspace&&this.currentWorkspace.projectId===n.dataset.projId||(this.lastUploadedProject&&n.dataset.projId===this.lastUploadedProject.id?("temporal"===this.lastUploadedProject.id&&console.log("Show a message indicating that the project can be accessed but in viewer mode because it couldnt be saved."),this.openProject(this.lastUploadedProject),this.previousActiveItem&&this.previousActiveItem.classList.remove("current"),n.classList.add("current"),this.previousActiveItem=n,this.projectsListBtn.style.display="unset"):(this.showViewportDialog("loader","Loading project "+n.dataset.name),l.fetchProject(n.dataset.projId,this).then((function(e){t.openProject(e),t.previousActiveItem&&t.previousActiveItem.classList.remove("current"),n.classList.add("current"),t.previousActiveItem=n,t.projectsListBtn.style.display="unset",t.hideViewportMessage()}),(function(e){console.log(e)})))))},e.prototype.openProject=function(e){this.currentWorkspace&&this.currentWorkspace.close(),this.currentWorkspace=new m(e,this),this.projectsListContainer.style.display="none",history.replaceState({projectTitle:e.name},e.name,"?id="+e.id)},e.prototype.closeProjectsList=function(){this.projectsListContainer.style.display="none",this.drawingsBtns.style.display="unset",this.toolbarsContainer.style.display="flex",this.projectsListBtn.dataset.open="false"},e.prototype.openProjectsList=function(){var e=this;void 0===this.currentWorkspace?this.closeProjectsListBtn.classList.add("hidden"):this.closeProjectsListBtn.classList.remove("hidden"),this.projectsListContainer.style.display="block",this.projectsListBtn.dataset.open="true",this.drawingsBtns.style.display="none",this.toolbarsContainer.style.display="none",(void 0===this.projectsData||this.projectsData.length<=1)&&(this.showViewportDialog("loader","Loading projects"),l.listProjectItems(this).then((function(t){e.createHTMLProjectsList(t),e.projectsList.childNodes.forEach((function(t){t.dataset&&t.dataset.projId===e.currentWorkspace.projectId&&(t.classList.add("current"),e.previousActiveItem=t)})),e.hideViewportMessage()}),(function(t){e.projectsList.innerHTML='<p class="empty-msg">There are no projects. Upload one!</p>',e.hideViewportMessage()})))},e.prototype.createHTMLProjectsList=function(e){var t=this;e.forEach((function(e){var n=new N(e,t);t.projectsList.appendChild(n.HTMLContainer)})),this.adjustItems()},e.prototype.adjustItems=function(){var e=Number(getComputedStyle(this.projectsList).getPropertyValue("--items-h")),t=this.projectsList.children.length;this.projectsList.style.setProperty("--remaining-items",(Math.ceil(t/e)*e-t).toString())},e.prototype.updateProjectsList=function(e){this.projectsData.length<=1&&this.projectsList.querySelector(".empty-msg").remove();var t=new N(e,this);this.projectsList.prepend(t.HTMLContainer),this.adjustItems()},e.prototype.showMessage=function(e,t,n){var r=this;switch(void 0===n&&(n=void 0),""!==this.messageContainer.dataset.type?(this.messageContainer.classList.remove(this.messageContainer.dataset.type),this.messageTimerId&&(window.clearTimeout(this.messageTimerId),this.messageTimerId=void 0)):this.messageContainer.style.display="flex",this.messageContainer.dataset.type=e,this.messageContainer.querySelector("p").innerText=t,e){case"success":this.messageContainer.classList.add("success");break;case"warning":this.messageContainer.classList.add("warning");break;case"error":this.messageContainer.classList.add("error")}n&&(this.messageTimerId=window.setTimeout((function(){return r.closeMessage()}),n))},e.prototype.closeMessage=function(){this.messageContainer.style.display="none",this.messageContainer.classList.remove(this.messageContainer.dataset.type),this.messageContainer.dataset.type="",this.messageTimerId&&(clearTimeout(this.messageTimerId),this.messageTimerId=void 0)},e.prototype.showViewportDialog=function(e,t,n){void 0===n&&(n=[]),this.viewportMessage.querySelector(".btns-container")&&this.viewportMessage.querySelectorAll(".btns-container > button").forEach((function(e){return e.onclick=null})),c.emptyNode(this.viewportMessage);var r=document.createElement("div");if("loader"===e)r.innerHTML="<p>"+t+'</p><svg class="svg-loader"><use href="#vaLoader"/></svg>';else if("action"===e&&n.length>0){r.innerHTML="<p>"+t+"</p>";var i=document.createElement("div");i.classList.add("btns-container"),n.forEach((function(e){var t=document.createElement("button");t.innerHTML=e.name,t.classList.add("buttonBase","light"),t.onclick=e.function,i.appendChild(t)})),r.appendChild(i)}else"message"===e&&(r.innerHTML="<p>"+t+"</p>");this.viewportMessage.appendChild(r),this.viewportMessage.classList.add("active")},e.prototype.hideViewportMessage=function(){this.viewportMessage.classList.remove("active")},e.prototype.showModalDialog=function(e,t,n){void 0===t&&(t="translucent"),void 0===n&&(n=!0),this.modalDialogContainer.classList.value="","translucent"===t?this.modalDialogContainer.classList.add("grayTranslucent"):"opaque"===t&&this.modalDialogContainer.classList.add("lightOpaque"),this.closeModalBtn.style.display=n?"unset":"none",this.modalDialogContent.appendChild(e),this.modalDialogContainer.style.display="flex"},e.prototype.closeModalDialog=function(){var e=this.modalDialogContent.firstElementChild;this.modalDialogContainer.style.display="none",this.modalDialogsStorage.appendChild(e)},e.prototype.start=function(e){var t=this;void 0===e&&(e=""),document.querySelector("header").style.display="flex",document.querySelector("main").style.display="block",""!==e?(this.showViewportDialog("loader","Loading project"),l.fetchProject(e,this).then((function(e){t.currentWorkspace=new m(e,t),t.createHTMLProjectsList([e]),t.projectsListBtn.style.display="unset",t.hideViewportMessage(),e.permissions.length>1&&window.saveMessagingDeviceToken()}),(function(e){console.log(e);var n=void 0===e.body?e:"Message: "+JSON.parse(e.body).error.message+" Code: "+JSON.parse(e.body).error.code;t.showViewportDialog("action",n,[{name:"View projects list",function:function(){t.openProjectsList(),""!==location.search&&history.replaceState({page:"Projects list"},"Projects list",location.href.replace(location.search,""))}}])}))):(""!==location.search&&history.replaceState({page:"Projects list"},"Projects list",location.href.replace(location.search,"")),this.projectsListContainer.style.display="block",this.showViewportDialog("loader","Loading projects"),l.listProjectItems(this).then((function(e){if(t.createHTMLProjectsList(e),t.hideViewportMessage(),window.thereIsMessaging)for(var n=0;n<e.length;n++)if(e[n].permissions.length>1){window.saveMessagingDeviceToken();break}}),(function(e){t.projectsList.innerHTML='<p class="empty-msg">There are no projects. Upload one!</p>',t.hideViewportMessage()})))},e}(),P=n(4),O=n(3),R=n.n(O),j=n(2),B=n(0),F=n(1),V=n(7),q="@firebase/installations",U="0.3.8",W=1e4,z="w:"+U,K="FIS_v2",G="https://firebaseinstallations.googleapis.com/v1",Q=36e5,H=((A={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',A["not-registered"]="Firebase Installation is not registered.",A["installation-not-found"]="Firebase Installation not found.",A["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',A["app-offline"]="Could not process request. Application offline.",A["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",A),Y=new F.ErrorFactory("installations","Installations",H);function J(e){return e instanceof F.FirebaseError&&e.code.includes("request-failed")}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X(e){var t=e.projectId;return G+"/projects/"+t+"/installations"}function $(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}function Z(e,t){return Object(B.__awaiter)(this,void 0,void 0,(function(){var n,r;return Object(B.__generator)(this,(function(i){switch(i.label){case 0:return[4,t.json()];case 1:return n=i.sent(),r=n.error,[2,Y.create("request-failed",{requestName:e,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})]}}))}))}function ee(e){var t=e.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function te(e,t){var n=t.refreshToken,r=ee(e);return r.append("Authorization",function(e){return K+" "+e}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(n)),r}function ne(e){return Object(B.__awaiter)(this,void 0,void 0,(function(){var t;return Object(B.__generator)(this,(function(n){switch(n.label){case 0:return[4,e()];case 1:return(t=n.sent()).status>=500&&t.status<600?[2,e()]:[2,t]}}))}))}function re(e,t){var n=t.fid;return Object(B.__awaiter)(this,void 0,void 0,(function(){var t,r,i,o,a,s;return Object(B.__generator)(this,(function(c){switch(c.label){case 0:return t=X(e),r=ee(e),i={fid:n,authVersion:K,appId:e.appId,sdkVersion:z},o={method:"POST",headers:r,body:JSON.stringify(i)},[4,ne((function(){return fetch(t,o)}))];case 1:return(a=c.sent()).ok?[4,a.json()]:[3,3];case 2:return s=c.sent(),[2,{fid:s.fid||n,registrationStatus:2,refreshToken:s.refreshToken,authToken:$(s.authToken)}];case 3:return[4,Z("Create Installation",a)];case 4:throw c.sent()}}))}))}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ie(e){return new Promise((function(t){setTimeout(t,e)}))}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var oe=/^[cdef][\w-]{21}$/,ae="";function se(){try{var e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;var t=function(e){return(t=e,btoa(String.fromCharCode.apply(String,Object(B.__spread)(t))).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22);var t}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e);return oe.test(t)?t:ae}catch(e){return ae}}var ce,ue="firebase-installations-database",le=1,he="firebase-installations-store",de=null;function fe(){return de||(de=Object(V.openDb)(ue,le,(function(e){switch(e.oldVersion){case 0:e.createObjectStore(he)}}))),de}function pe(e,t){return Object(B.__awaiter)(this,void 0,void 0,(function(){var n,r,i;return Object(B.__generator)(this,(function(o){switch(o.label){case 0:return n=ye(e),[4,fe()];case 1:return r=o.sent(),[4,(i=r.transaction(he,"readwrite")).objectStore(he).put(t,n)];case 2:return o.sent(),[4,i.complete];case 3:return o.sent(),[2,t]}}))}))}function me(e){return Object(B.__awaiter)(this,void 0,void 0,(function(){var t,n,r;return Object(B.__generator)(this,(function(i){switch(i.label){case 0:return t=ye(e),[4,fe()];case 1:return n=i.sent(),[4,(r=n.transaction(he,"readwrite")).objectStore(he).delete(t)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}}))}))}function ge(e,t){return Object(B.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o,a,s;return Object(B.__generator)(this,(function(c){switch(c.label){case 0:return n=ye(e),[4,fe()];case 1:return r=c.sent(),i=r.transaction(he,"readwrite"),[4,(o=i.objectStore(he)).get(n)];case 2:return a=c.sent(),void 0!==(s=t(a))?[3,4]:[4,o.delete(n)];case 3:return c.sent(),[3,6];case 4:return[4,o.put(s,n)];case 5:c.sent(),c.label=6;case 6:return[4,i.complete];case 7:return c.sent(),[2,s]}}))}))}function ye(e){return e.appName+"!"+e.appId}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ve(e){return Object(B.__awaiter)(this,void 0,void 0,(function(){var t,n,r;return Object(B.__generator)(this,(function(i){switch(i.label){case 0:return[4,ge(e,(function(n){var r=function(e){return Te(e||{fid:se(),registrationStatus:0})}(n),i=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine){var n=Promise.reject(Y.create("app-offline"));return{installationEntry:t,registrationPromise:n}}var r={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},i=function(e,t){return Object(B.__awaiter)(this,void 0,void 0,(function(){var n,r;return Object(B.__generator)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,7]),[4,re(e,t)];case 1:return n=i.sent(),[2,pe(e,n)];case 2:return J(r=i.sent())&&409===r.serverCode?[4,me(e)]:[3,4];case 3:return i.sent(),[3,6];case 4:return[4,pe(e,{fid:t.fid,registrationStatus:0})];case 5:i.sent(),i.label=6;case 6:throw r;case 7:return[2]}}))}))}(e,r);return{installationEntry:r,registrationPromise:i}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:be(e)}:{installationEntry:t}}(e,r);return t=i.registrationPromise,i.installationEntry}))];case 1:return(n=i.sent()).fid!==ae?[3,3]:(r={},[4,t]);case 2:return[2,(r.installationEntry=i.sent(),r)];case 3:return[2,{installationEntry:n,registrationPromise:t}]}}))}))}function be(e){return Object(B.__awaiter)(this,void 0,void 0,(function(){var t,n,r,i;return Object(B.__generator)(this,(function(o){switch(o.label){case 0:return[4,we(e)];case 1:t=o.sent(),o.label=2;case 2:return 1!==t.registrationStatus?[3,5]:[4,ie(100)];case 3:return o.sent(),[4,we(e)];case 4:return t=o.sent(),[3,2];case 5:return 0!==t.registrationStatus?[3,7]:[4,ve(e)];case 6:return n=o.sent(),r=n.installationEntry,(i=n.registrationPromise)?[2,i]:[2,r];case 7:return[2,t]}}))}))}function we(e){return ge(e,(function(e){if(!e)throw Y.create("installation-not-found");return Te(e)}))}function Te(e){return 1===(t=e).registrationStatus&&t.registrationTime+W<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t;
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}function Se(e,t){var n=e.appConfig,r=e.platformLoggerProvider;return Object(B.__awaiter)(this,void 0,void 0,(function(){var e,i,o,a,s,c,u;return Object(B.__generator)(this,(function(l){switch(l.label){case 0:return e=function(e,t){var n=t.fid;return X(e)+"/"+n+"/authTokens:generate"}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(n,t),i=te(n,t),(o=r.getImmediate({optional:!0}))&&i.append("x-firebase-client",o.getPlatformInfoString()),a={installation:{sdkVersion:z}},s={method:"POST",headers:i,body:JSON.stringify(a)},[4,ne((function(){return fetch(e,s)}))];case 1:return(c=l.sent()).ok?[4,c.json()]:[3,3];case 2:return u=l.sent(),[2,$(u)];case 3:return[4,Z("Generate Auth Token",c)];case 4:throw l.sent()}}))}))}function Ie(e,t){return void 0===t&&(t=!1),Object(B.__awaiter)(this,void 0,void 0,(function(){var n,r,i;return Object(B.__generator)(this,(function(o){switch(o.label){case 0:return[4,ge(e.appConfig,(function(r){if(!Ce(r))throw Y.create("not-registered");var i=r.authToken;if(!t&&function(e){return 2===e.requestStatus&&!function(e){var t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+Q}(e)}(i))return r;if(1===i.requestStatus)return n=function(e,t){return Object(B.__awaiter)(this,void 0,void 0,(function(){var n,r;return Object(B.__generator)(this,(function(i){switch(i.label){case 0:return[4,Ee(e.appConfig)];case 1:n=i.sent(),i.label=2;case 2:return 1!==n.authToken.requestStatus?[3,5]:[4,ie(100)];case 3:return i.sent(),[4,Ee(e.appConfig)];case 4:return n=i.sent(),[3,2];case 5:return 0===(r=n.authToken).requestStatus?[2,Ie(e,t)]:[2,r]}}))}))}(e,t),r;if(!navigator.onLine)throw Y.create("app-offline");var o=function(e){var t={requestStatus:1,requestTime:Date.now()};return Object(B.__assign)(Object(B.__assign)({},e),{authToken:t})}(r);return n=function(e,t){return Object(B.__awaiter)(this,void 0,void 0,(function(){var n,r,i;return Object(B.__generator)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,8]),[4,Se(e,t)];case 1:return n=o.sent(),i=Object(B.__assign)(Object(B.__assign)({},t),{authToken:n}),[4,pe(e.appConfig,i)];case 2:return o.sent(),[2,n];case 3:return!J(r=o.sent())||401!==r.serverCode&&404!==r.serverCode?[3,5]:[4,me(e.appConfig)];case 4:return o.sent(),[3,7];case 5:return i=Object(B.__assign)(Object(B.__assign)({},t),{authToken:{requestStatus:0}}),[4,pe(e.appConfig,i)];case 6:o.sent(),o.label=7;case 7:throw r;case 8:return[2]}}))}))}(e,o),o}))];case 1:return r=o.sent(),n?[4,n]:[3,3];case 2:return i=o.sent(),[3,4];case 3:i=r.authToken,o.label=4;case 4:return[2,i]}}))}))}function Ee(e){return ge(e,(function(e){if(!Ce(e))throw Y.create("not-registered");var t,n=e.authToken;return 1===(t=n).requestStatus&&t.requestTime+W<Date.now()?Object(B.__assign)(Object(B.__assign)({},e),{authToken:{requestStatus:0}}):e}))}function Ce(e){return void 0!==e&&2===e.registrationStatus}function _e(e){return Object(B.__awaiter)(this,void 0,void 0,(function(){var t;return Object(B.__generator)(this,(function(n){switch(n.label){case 0:return[4,ve(e)];case 1:return(t=n.sent().registrationPromise)?[4,t]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}}))}))}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function De(e,t){return Object(B.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o;return Object(B.__generator)(this,(function(a){switch(a.label){case 0:return n=function(e,t){var n=t.fid;return X(e)+"/"+n}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e,t),r=te(e,t),i={method:"DELETE",headers:r},[4,ne((function(){return fetch(n,i)}))];case 1:return(o=a.sent()).ok?[3,3]:[4,Z("Delete Installation",o)];case 2:throw a.sent();case 3:return[2]}}))}))}function ke(e){return Y.create("missing-app-config-values",{valueName:e})}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(ce=R.a).INTERNAL.registerComponent(new j.Component("installations",(function(e){var t=e.getProvider("app").getImmediate(),n={appConfig:
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(e){var t,n;if(!e||!e.options)throw ke("App Configuration");if(!e.name)throw ke("App Name");try{for(var r=Object(B.__values)(["projectId","apiKey","appId"]),i=r.next();!i.done;i=r.next()){var o=i.value;if(!e.options[o])throw ke(o)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t),platformLoggerProvider:e.getProvider("platform-logger")};return{app:t,getId:function(){
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */return function(e){return Object(B.__awaiter)(this,void 0,void 0,(function(){var t,n,r;return Object(B.__generator)(this,(function(i){switch(i.label){case 0:return[4,ve(e.appConfig)];case 1:return t=i.sent(),n=t.installationEntry,(r=t.registrationPromise)?r.catch(console.error):Ie(e).catch(console.error),[2,n.fid]}}))}))}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(n)},getToken:function(e){return function(e,t){return void 0===t&&(t=!1),Object(B.__awaiter)(this,void 0,void 0,(function(){return Object(B.__generator)(this,(function(n){switch(n.label){case 0:return[4,_e(e.appConfig)];case 1:return n.sent(),[4,Ie(e,t)];case 2:return[2,n.sent().token]}}))}))}(n,e)},delete:function(){return function(e){return Object(B.__awaiter)(this,void 0,void 0,(function(){var t,n;return Object(B.__generator)(this,(function(r){switch(r.label){case 0:return[4,ge(t=e.appConfig,(function(e){if(!e||0!==e.registrationStatus)return e}))];case 1:if(!(n=r.sent()))return[3,6];if(1!==n.registrationStatus)return[3,2];throw Y.create("delete-pending-registration");case 2:if(2!==n.registrationStatus)return[3,6];if(navigator.onLine)return[3,3];throw Y.create("app-offline");case 3:return[4,De(t,n)];case 4:return r.sent(),[4,me(t)];case 5:r.sent(),r.label=6;case 6:return[2]}}))}))}(n)}}}),"PUBLIC")),ce.registerVersion(q,U);
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Ne,Ae,xe,Me="measurementId",Le="firebase_id",Pe="origin",Oe="https://www.googletagmanager.com/gtag/js";function Re(e,t,n){var r=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];window[t].push(arguments)};return window[n]&&"function"==typeof window[n]&&(r=window[n]),window[n]=function(e,t){return function(n,r,i){if(n===Ne.EVENT){var o=[];if(i&&i.send_to){var a=i.send_to;Array.isArray(a)||(a=[a]);for(var s=0,c=a;s<c.length;s++){var u=c[s],l=t[u];if(!l){o=[];break}o.push(l)}}if(0===o.length)for(var h=0,d=Object.values(t);h<d.length;h++){var f=d[h];o.push(f)}Promise.all(o).then((function(){return e(Ne.EVENT,r,i||{})})).catch((function(e){return console.error(e)}))}else if(n===Ne.CONFIG){(t[r]||Promise.resolve()).then((function(){e(Ne.CONFIG,r,i)})).catch((function(e){return console.error(e)}))}else e(Ne.SET,r)}}(r,e),{gtagCore:r,wrappedGtag:window[n]}}!function(e){e.EVENT="event",e.SET="set",e.CONFIG="config"}(Ne||(Ne={})),function(e){e.ADD_PAYMENT_INFO="add_payment_info",e.ADD_TO_CART="add_to_cart",e.ADD_TO_WISHLIST="add_to_wishlist",e.BEGIN_CHECKOUT="begin_checkout",e.CHECKOUT_PROGRESS="checkout_progress",e.EXCEPTION="exception",e.GENERATE_LEAD="generate_lead",e.LOGIN="login",e.PAGE_VIEW="page_view",e.PURCHASE="purchase",e.REFUND="refund",e.REMOVE_FROM_CART="remove_from_cart",e.SCREEN_VIEW="screen_view",e.SEARCH="search",e.SELECT_CONTENT="select_content",e.SET_CHECKOUT_OPTION="set_checkout_option",e.SHARE="share",e.SIGN_UP="sign_up",e.TIMING_COMPLETE="timing_complete",e.VIEW_ITEM="view_item",e.VIEW_ITEM_LIST="view_item_list",e.VIEW_PROMOTION="view_promotion",e.VIEW_SEARCH_RESULTS="view_search_results"}(Ae||(Ae={}));var je,Be,Fe=((xe={})["no-ga-id"]='"'+Me+'" field is empty in Firebase config. Firebase Analytics requires this field to contain a valid measurement ID.',xe["already-exists"]="A Firebase Analytics instance with the measurement ID ${id}  already exists. Only one Firebase Analytics instance can be created for each measurement ID.",xe["already-initialized"]="Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",xe["interop-component-reg-failed"]="Firebase Analytics Interop Component failed to instantiate",xe),Ve=new F.ErrorFactory("analytics","Analytics",Fe),qe={},Ue="dataLayer",We="gtag",ze=!1;function Ke(e){if(ze)throw Ve.create("already-initialized");e.dataLayerName&&(Ue=e.dataLayerName),e.gtagName&&(We=e.gtagName)}function Ge(e,t){var n=e.options[Me];if(!n)throw Ve.create("no-ga-id");if(null!=qe[n])throw Ve.create("already-exists",{id:n});if(!ze){(function(){for(var e=window.document.getElementsByTagName("script"),t=0,n=Object.values(e);t<n.length;t++){var r=n[t];if(r.src&&r.src.includes(Oe))return r}return null}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */)()||function(e){var t=document.createElement("script");t.src=Oe+"?l="+e,t.async=!0,document.head.appendChild(t)}(Ue),function(e){var t=[];Array.isArray(window[e])?t=window[e]:window[e]=t}(Ue);var r=Re(qe,Ue,We),i=r.wrappedGtag,o=r.gtagCore;Be=i,je=o,ze=!0}return qe[n]=
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(e,t,n){return Object(B.__awaiter)(this,void 0,void 0,(function(){var r,i;return Object(B.__generator)(this,(function(o){switch(o.label){case 0:return[4,t.getId()];case 1:return r=o.sent(),n("js",new Date),n(Ne.CONFIG,e.options[Me],((i={})[Le]=r,i[Pe]="firebase",i.update=!0,i)),[2]}}))}))}(e,t,je),{app:e,logEvent:function(e,t,r){
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
return function(e,t,n,r,i){var o=r||{};i&&i.global||(o=Object(B.__assign)(Object(B.__assign)({},r),{send_to:t})),e(Ne.EVENT,n,o||{})}(Be,n,e,t,r)},setCurrentScreen:function(e,t){return function(e,t,n,r){r&&r.global?e(Ne.SET,{screen_name:n}):e(Ne.CONFIG,t,{update:!0,screen_name:n})}(Be,n,e,t)},setUserId:function(e,t){return function(e,t,n,r){r&&r.global?e(Ne.SET,{user_id:n}):e(Ne.CONFIG,t,{update:!0,user_id:n})}(Be,n,e,t)},setUserProperties:function(e,t){return function(e,t,n,r){if(r&&r.global){for(var i={},o=0,a=Object.keys(n);o<a.length;o++){var s=a[o];i["user_properties."+s]=n[s]}e(Ne.SET,i)}else e(Ne.CONFIG,t,{update:!0,user_properties:n})}(Be,n,e,t)},setAnalyticsCollectionEnabled:function(e){return function(e,t){window["ga-disable-"+e]=!t}(n,e)}}}var Qe="@firebase/analytics",He="0.2.9",Ye="analytics";!function(e){e.INTERNAL.registerComponent(new j.Component(Ye,(function(e){return Ge(e.getProvider("app").getImmediate(),e.getProvider("installations").getImmediate())}),"PUBLIC").setServiceProps({settings:Ke,EventName:Ae})),e.INTERNAL.registerComponent(new j.Component("analytics-internal",(function(e){try{return{logEvent:e.getProvider(Ye).getImmediate().logEvent}}catch(e){throw Ve.create("interop-component-reg-failed",{reason:e})}}),"PRIVATE")),e.registerVersion(Qe,He)}(R.a);n(16);
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Je,Xe,$e=((Je={})["only-available-in-window"]="This method is available in a Window context.",Je["only-available-in-sw"]="This method is available in a service worker context.",Je["should-be-overriden"]="This method should be overriden by extended classes.",Je["bad-sender-id"]="Please ensure that 'messagingSenderId' is set correctly in the options passed into firebase.initializeApp().",Je["permission-default"]="The required permissions were not granted and dismissed instead.",Je["permission-blocked"]="The required permissions were not granted and blocked instead.",Je["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",Je["notifications-blocked"]="Notifications have been blocked.",Je["failed-serviceworker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",Je["sw-registration-expected"]="A service worker registration was the expected input.",Je["get-subscription-failed"]="There was an error when trying to get any existing Push Subscriptions.",Je["invalid-saved-token"]="Unable to access details of the saved token.",Je["sw-reg-redundant"]="The service worker being used for push was made redundant.",Je["token-subscribe-failed"]="A problem occured while subscribing the user to FCM: {$errorInfo}",Je["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",Je["token-unsubscribe-failed"]="A problem occured while unsubscribing the user from FCM: {$errorInfo}",Je["token-update-failed"]="A problem occured while updating the user from FCM: {$errorInfo}",Je["token-update-no-token"]="FCM returned no token when updating the user to push.",Je["use-sw-before-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",Je["invalid-delete-token"]="You must pass a valid token into deleteToken(), i.e. the token from getToken().",Je["delete-token-not-found"]="The deletion attempt for token could not be performed as the token was not found.",Je["delete-scope-not-found"]="The deletion attempt for service worker scope could not be performed as the scope was not found.",Je["bg-handler-function-expected"]="The input to setBackgroundMessageHandler() must be a function.",Je["no-window-client-to-msg"]="An attempt was made to message a non-existant window client.",Je["unable-to-resubscribe"]="There was an error while re-subscribing the FCM token for push messaging. Will have to resubscribe the user on next visit. {$errorInfo}",Je["no-fcm-token-for-resubscribe"]="Could not find an FCM token and as a result, unable to resubscribe. Will have to resubscribe the user on next visit.",Je["failed-to-delete-token"]="Unable to delete the currently saved token.",Je["no-sw-in-reg"]="Even though the service worker registration was successful, there was a problem accessing the service worker itself.",Je["bad-scope"]="The service worker scope must be a string with at least one character.",Je["bad-vapid-key"]="The public VAPID key is not a Uint8Array with 65 bytes.",Je["bad-subscription"]="The subscription must be a valid PushSubscription.",Je["bad-token"]="The FCM Token used for storage / lookup was not a valid token string.",Je["failed-delete-vapid-key"]="The VAPID key could not be deleted.",Je["invalid-public-vapid-key"]="The public VAPID key must be a string.",Je["use-public-key-before-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",Je["public-vapid-key-decryption-failed"]="The public VAPID key did not equal 65 bytes when decrypted.",Je),Ze=new F.ErrorFactory("messaging","Messaging",$e),et=new Uint8Array([4,51,148,247,223,161,235,177,220,3,162,94,21,113,219,72,211,46,237,237,178,52,219,183,71,58,12,143,196,204,225,111,60,140,132,223,171,182,102,62,242,12,212,139,254,227,249,118,47,20,28,99,8,106,111,45,177,26,149,176,206,55,192,156,110]),tt="https://fcmregistrations.googleapis.com/v1";
/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function nt(e,t){if(null==e||null==t)return!1;if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(var n=new DataView(e),r=new DataView(t),i=0;i<e.byteLength;i++)if(n.getUint8(i)!==r.getUint8(i))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rt(e){return function(e){var t=new Uint8Array(e);return btoa(String.fromCharCode.apply(String,Object(B.__spread)(t)))}(e).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */!function(e){e.PUSH_MSG_RECEIVED="push-msg-received",e.NOTIFICATION_CLICKED="notification-clicked"}(Xe||(Xe={}));var it=function(){function e(){}return e.prototype.getToken=function(e,t,n){return Object(B.__awaiter)(this,void 0,void 0,(function(){var r,i,o,a,s,c;return Object(B.__generator)(this,(function(u){switch(u.label){case 0:return[4,at(e)];case 1:r=u.sent(),i=st(t,n),o={method:"POST",headers:r,body:JSON.stringify(i)},u.label=2;case 2:return u.trys.push([2,5,,6]),[4,fetch(ot(e.app),o)];case 3:return[4,u.sent().json()];case 4:return a=u.sent(),[3,6];case 5:throw s=u.sent(),Ze.create("token-subscribe-failed",{errorInfo:s});case 6:if(a.error)throw c=a.error.message,Ze.create("token-subscribe-failed",{errorInfo:c});if(!a.token)throw Ze.create("token-subscribe-no-token");return[2,a.token]}}))}))},e.prototype.updateToken=function(e,t,n,r){return Object(B.__awaiter)(this,void 0,void 0,(function(){var i,o,a,s,c,u;return Object(B.__generator)(this,(function(l){switch(l.label){case 0:return[4,at(t)];case 1:i=l.sent(),o=st(n,r),a={method:"PATCH",headers:i,body:JSON.stringify(o)},l.label=2;case 2:return l.trys.push([2,5,,6]),[4,fetch(ot(t.app)+"/"+e.fcmToken,a)];case 3:return[4,l.sent().json()];case 4:return s=l.sent(),[3,6];case 5:throw c=l.sent(),Ze.create("token-update-failed",{errorInfo:c});case 6:if(s.error)throw u=s.error.message,Ze.create("token-update-failed",{errorInfo:u});if(!s.token)throw Ze.create("token-update-no-token");return[2,s.token]}}))}))},e.prototype.deleteToken=function(e,t){return Object(B.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o,a;return Object(B.__generator)(this,(function(s){switch(s.label){case 0:return[4,at(e)];case 1:n=s.sent(),r={method:"DELETE",headers:n},s.label=2;case 2:return s.trys.push([2,5,,6]),[4,fetch(ot(e.app)+"/"+t.fcmToken,r)];case 3:return[4,s.sent().json()];case 4:if((i=s.sent()).error)throw o=i.error.message,Ze.create("token-unsubscribe-failed",{errorInfo:o});return[3,6];case 5:throw a=s.sent(),Ze.create("token-unsubscribe-failed",{errorInfo:a});case 6:return[2]}}))}))},e}();function ot(e){return tt+"/projects/"+e.options.projectId+"/registrations"}function at(e){var t=e.app,n=e.installations;return Object(B.__awaiter)(this,void 0,void 0,(function(){var e;return Object(B.__generator)(this,(function(r){switch(r.label){case 0:return[4,n.getToken()];case 1:return e=r.sent(),[2,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.options.apiKey,"x-goog-firebase-installations-auth":"FIS "+e})]}}))}))}function st(e,t){var n=rt(e.getKey("p256dh")),r=rt(e.getKey("auth")),i={web:{endpoint:e.endpoint,p256dh:n,auth:r}};return nt(t.buffer,et.buffer)||(i.web.applicationPubKey=rt(t)),i}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ct(e){for(var t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(t),r=new Uint8Array(n.length),i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ut="undefined",lt="fcm_token_object_Store";function ht(e){var t=indexedDB.open(ut);t.onerror=function(e){},t.onsuccess=function(n){!function(e,t){if(e.objectStoreNames.contains(lt)){var n=e.transaction(lt).objectStore(lt),r=new it,i=n.openCursor();i.onerror=function(e){console.warn("Unable to cleanup old IDB.",e)},i.onsuccess=function(){var n=i.result;if(n){var o=n.value;r.deleteToken(t,o),n.continue()}else e.close(),indexedDB.deleteDatabase(ut)}}}(t.result,e)}}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dt=function(){function e(){this.dbPromise=null}return e.prototype.get=function(e){return this.createTransaction((function(t){return t.get(e)}))},e.prototype.getIndex=function(e,t){return this.createTransaction((function(n){return n.index(e).get(t)}))},e.prototype.put=function(e){return this.createTransaction((function(t){return t.put(e)}),"readwrite")},e.prototype.delete=function(e){return this.createTransaction((function(t){return t.delete(e)}),"readwrite")},e.prototype.closeDatabase=function(){return Object(B.__awaiter)(this,void 0,void 0,(function(){return Object(B.__generator)(this,(function(e){switch(e.label){case 0:return this.dbPromise?[4,this.dbPromise]:[3,2];case 1:e.sent().close(),this.dbPromise=null,e.label=2;case 2:return[2]}}))}))},e.prototype.createTransaction=function(e,t){return void 0===t&&(t="readonly"),Object(B.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o;return Object(B.__generator)(this,(function(a){switch(a.label){case 0:return[4,this.getDb()];case 1:return n=a.sent(),r=n.transaction(this.objectStoreName,t),i=r.objectStore(this.objectStoreName),[4,ft(e(i))];case 2:return o=a.sent(),[2,new Promise((function(e,t){r.oncomplete=function(){e(o)},r.onerror=function(){t(r.error)}}))]}}))}))},e.prototype.getDb=function(){var e=this;return this.dbPromise||(this.dbPromise=new Promise((function(t,n){var r=indexedDB.open(e.dbName,e.dbVersion);r.onsuccess=function(){t(r.result)},r.onerror=function(){e.dbPromise=null,n(r.error)},r.onupgradeneeded=function(t){return e.onDbUpgrade(r,t)}}))),this.dbPromise},e}();function ft(e){return new Promise((function(t,n){e.onsuccess=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pt=function(e){function t(t){var n=e.call(this)||this;return n.services=t,n.dbName="fcm_token_details_db",n.dbVersion=4,n.objectStoreName="fcm_token_object_Store",n}return Object(B.__extends)(t,e),t.prototype.onDbUpgrade=function(e,t){var n=e.result;switch(t.oldVersion){case 0:(i=n.createObjectStore(this.objectStoreName,{keyPath:"swScope"})).createIndex("fcmSenderId","fcmSenderId",{unique:!1}),i.createIndex("fcmToken","fcmToken",{unique:!0});case 1:ht(this.services);case 2:var r=(i=e.transaction.objectStore(this.objectStoreName)).openCursor();r.onsuccess=function(){var e=r.result;if(e){var t=e.value,n=Object(B.__assign)({},t);t.createTime||(n.createTime=Date.now()),"string"==typeof t.vapidKey&&(n.vapidKey=ct(t.vapidKey)),"string"==typeof t.auth&&(n.auth=ct(t.auth).buffer),"string"==typeof t.auth&&(n.p256dh=ct(t.p256dh).buffer),"string"==typeof t.fcmPushSet&&delete n.fcmPushSet,e.update(n),e.continue()}};break;case 3:var i,o=(i=e.transaction.objectStore(this.objectStoreName)).openCursor();o.onsuccess=function(){var e=o.result;if(e){var t=e.value,n=Object(B.__assign)({},t);"string"==typeof t.fcmPushSet&&delete n.fcmPushSet,e.update(n),e.continue()}}}},t.prototype.getTokenDetailsFromToken=function(e){return Object(B.__awaiter)(this,void 0,void 0,(function(){return Object(B.__generator)(this,(function(t){if(!e)throw Ze.create("bad-token");return mt({fcmToken:e}),[2,this.getIndex("fcmToken",e)]}))}))},t.prototype.getTokenDetailsFromSWScope=function(e){return Object(B.__awaiter)(this,void 0,void 0,(function(){return Object(B.__generator)(this,(function(t){if(!e)throw Ze.create("bad-scope");return mt({swScope:e}),[2,this.get(e)]}))}))},t.prototype.saveTokenDetails=function(e){return Object(B.__awaiter)(this,void 0,void 0,(function(){return Object(B.__generator)(this,(function(t){if(!e.swScope)throw Ze.create("bad-scope");if(!e.vapidKey)throw Ze.create("bad-vapid-key");if(!e.endpoint||!e.auth||!e.p256dh)throw Ze.create("bad-subscription");if(!e.fcmSenderId)throw Ze.create("bad-sender-id");if(!e.fcmToken)throw Ze.create("bad-token");return mt(e),[2,this.put(e)]}))}))},t.prototype.deleteToken=function(e){return Object(B.__awaiter)(this,void 0,void 0,(function(){var t;return Object(B.__generator)(this,(function(n){switch(n.label){case 0:return"string"!=typeof e||0===e.length?[2,Promise.reject(Ze.create("invalid-delete-token"))]:[4,this.getTokenDetailsFromToken(e)];case 1:if(!(t=n.sent()))throw Ze.create("delete-token-not-found");return[4,this.delete(t.swScope)];case 2:return n.sent(),[2,t]}}))}))},t}(dt);function mt(e){if(e.fcmToken&&("string"!=typeof e.fcmToken||0===e.fcmToken.length))throw Ze.create("bad-token");if(e.swScope&&("string"!=typeof e.swScope||0===e.swScope.length))throw Ze.create("bad-scope");if(e.vapidKey&&(!(e.vapidKey instanceof Uint8Array)||65!==e.vapidKey.length))throw Ze.create("bad-vapid-key");if(e.endpoint&&("string"!=typeof e.endpoint||0===e.endpoint.length))throw Ze.create("bad-subscription");if(e.auth&&!(e.auth instanceof ArrayBuffer))throw Ze.create("bad-subscription");if(e.p256dh&&!(e.p256dh instanceof ArrayBuffer))throw Ze.create("bad-subscription");if(e.fcmSenderId&&("string"!=typeof e.fcmSenderId||0===e.fcmSenderId.length))throw Ze.create("bad-sender-id")}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.dbName="fcm_vapid_details_db",t.dbVersion=1,t.objectStoreName="fcm_vapid_object_Store",t}return Object(B.__extends)(t,e),t.prototype.onDbUpgrade=function(e){e.result.createObjectStore(this.objectStoreName,{keyPath:"swScope"})},t.prototype.getVapidFromSWScope=function(e){return Object(B.__awaiter)(this,void 0,void 0,(function(){var t;return Object(B.__generator)(this,(function(n){switch(n.label){case 0:if("string"!=typeof e||0===e.length)throw Ze.create("bad-scope");return[4,this.get(e)];case 1:return[2,(t=n.sent())?t.vapidKey:void 0]}}))}))},t.prototype.saveVapidDetails=function(e,t){return Object(B.__awaiter)(this,void 0,void 0,(function(){var n;return Object(B.__generator)(this,(function(r){if("string"!=typeof e||0===e.length)throw Ze.create("bad-scope");if(null===t||65!==t.length)throw Ze.create("bad-vapid-key");return n={swScope:e,vapidKey:t},[2,this.put(n)]}))}))},t.prototype.deleteVapidDetails=function(e){return Object(B.__awaiter)(this,void 0,void 0,(function(){var t;return Object(B.__generator)(this,(function(n){switch(n.label){case 0:return[4,this.getVapidFromSWScope(e)];case 1:if(!(t=n.sent()))throw Ze.create("delete-scope-not-found");return[4,this.delete(e)];case 2:return n.sent(),[2,t]}}))}))},t}(dt),yt=function(){function e(e){var t=this;this.services=e,this.vapidDetailsModel=new gt,this.subscriptionManager=new it;var n=e.app;if(this.app=n,!n.options.messagingSenderId||"string"!=typeof n.options.messagingSenderId)throw Ze.create("bad-sender-id");this.INTERNAL={delete:function(){return t.delete()}},this.tokenDetailsModel=new pt(e)}return e.prototype.getToken=function(){return Object(B.__awaiter)(this,void 0,void 0,(function(){var e,t,n,r,i;return Object(B.__generator)(this,(function(o){switch(o.label){case 0:return"default"!==(e=this.getNotificationPermission())?[3,2]:[4,this.requestNotificationPermission()];case 1:e=o.sent(),o.label=2;case 2:if("granted"!==e)throw Ze.create("notifications-blocked");return[4,this.getSWRegistration_()];case 3:return t=o.sent(),[4,this.getPublicVapidKey_()];case 4:return n=o.sent(),[4,this.getPushSubscription(t,n)];case 5:return r=o.sent(),[4,this.tokenDetailsModel.getTokenDetailsFromSWScope(t.scope)];case 6:return(i=o.sent())?[2,this.manageExistingToken(t,r,n,i)]:[2,this.getNewToken(t,r,n)]}}))}))},e.prototype.manageExistingToken=function(e,t,n,r){return Object(B.__awaiter)(this,void 0,void 0,(function(){return Object(B.__generator)(this,(function(i){switch(i.label){case 0:return function(e,t,n){if(!n.vapidKey||!nt(t.buffer,n.vapidKey.buffer))return!1;var r=e.endpoint===n.endpoint,i=nt(e.getKey("auth"),n.auth),o=nt(e.getKey("p256dh"),n.p256dh);return r&&i&&o}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t,n,r)?Date.now()<r.createTime+6048e5?[2,r.fcmToken]:[2,this.updateToken(e,t,n,r)]:[3,1];case 1:return[4,this.deleteTokenFromDB(r.fcmToken)];case 2:return i.sent(),[2,this.getNewToken(e,t,n)];case 3:return[2]}}))}))},e.prototype.updateToken=function(e,t,n,r){return Object(B.__awaiter)(this,void 0,void 0,(function(){var i,o,a;return Object(B.__generator)(this,(function(s){switch(s.label){case 0:return s.trys.push([0,4,,6]),[4,this.subscriptionManager.updateToken(r,this.services,t,n)];case 1:return i=s.sent(),o={swScope:e.scope,vapidKey:n,fcmSenderId:this.services.app.options.messagingSenderId,fcmToken:i,createTime:Date.now(),endpoint:t.endpoint,auth:t.getKey("auth"),p256dh:t.getKey("p256dh")},[4,this.tokenDetailsModel.saveTokenDetails(o)];case 2:return s.sent(),[4,this.vapidDetailsModel.saveVapidDetails(e.scope,n)];case 3:return s.sent(),[2,i];case 4:return a=s.sent(),[4,this.deleteToken(r.fcmToken)];case 5:throw s.sent(),a;case 6:return[2]}}))}))},e.prototype.getNewToken=function(e,t,n){return Object(B.__awaiter)(this,void 0,void 0,(function(){var r,i;return Object(B.__generator)(this,(function(o){switch(o.label){case 0:return[4,this.subscriptionManager.getToken(this.services,t,n)];case 1:return r=o.sent(),i={swScope:e.scope,vapidKey:n,fcmSenderId:this.app.options.messagingSenderId,fcmToken:r,createTime:Date.now(),endpoint:t.endpoint,auth:t.getKey("auth"),p256dh:t.getKey("p256dh")},[4,this.tokenDetailsModel.saveTokenDetails(i)];case 2:return o.sent(),[4,this.vapidDetailsModel.saveVapidDetails(e.scope,n)];case 3:return o.sent(),[2,r]}}))}))},e.prototype.deleteToken=function(e){return Object(B.__awaiter)(this,void 0,void 0,(function(){var t,n;return Object(B.__generator)(this,(function(r){switch(r.label){case 0:return[4,this.deleteTokenFromDB(e)];case 1:return r.sent(),[4,this.getSWRegistration_()];case 2:return(t=r.sent())?[4,t.pushManager.getSubscription()]:[3,4];case 3:if(n=r.sent())return[2,n.unsubscribe()];r.label=4;case 4:return[2,!0]}}))}))},e.prototype.deleteTokenFromDB=function(e){return Object(B.__awaiter)(this,void 0,void 0,(function(){var t,n;return Object(B.__generator)(this,(function(r){switch(r.label){case 0:return[4,this.tokenDetailsModel.deleteToken(e)];case 1:t=r.sent(),r.label=2;case 2:return r.trys.push([2,4,,5]),[4,this.subscriptionManager.deleteToken(this.services,t)];case 3:return r.sent(),[3,5];case 4:return n=r.sent(),console.error(n),[3,5];case 5:return[2]}}))}))},e.prototype.getPushSubscription=function(e,t){return Object(B.__awaiter)(this,void 0,void 0,(function(){var n;return Object(B.__generator)(this,(function(r){switch(r.label){case 0:return[4,e.pushManager.getSubscription()];case 1:return(n=r.sent())?[2,n]:[2,e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:t})]}}))}))},e.prototype.requestPermission=function(){throw Ze.create("only-available-in-window")},e.prototype.useServiceWorker=function(e){throw Ze.create("only-available-in-window")},e.prototype.usePublicVapidKey=function(e){throw Ze.create("only-available-in-window")},e.prototype.onMessage=function(e,t,n){throw Ze.create("only-available-in-window")},e.prototype.onTokenRefresh=function(e,t,n){throw Ze.create("only-available-in-window")},e.prototype.setBackgroundMessageHandler=function(e){throw Ze.create("only-available-in-sw")},e.prototype.delete=function(){return Object(B.__awaiter)(this,void 0,void 0,(function(){return Object(B.__generator)(this,(function(e){switch(e.label){case 0:return[4,Promise.all([this.tokenDetailsModel.closeDatabase(),this.vapidDetailsModel.closeDatabase()])];case 1:return e.sent(),[2]}}))}))},e.prototype.getNotificationPermission=function(){return Notification.permission},e.prototype.requestNotificationPermission=function(){return Object(B.__awaiter)(this,void 0,void 0,(function(){return Object(B.__generator)(this,(function(e){return Notification.requestPermission?[2,Notification.requestPermission()]:[2,Notification.permission]}))}))},e.prototype.getTokenDetailsModel=function(){return this.tokenDetailsModel},e.prototype.getVapidDetailsModel=function(){return this.vapidDetailsModel},e.prototype.getSubscriptionManager=function(){return this.subscriptionManager},e}();var vt=function(e){function t(t){var n=e.call(this,t)||this;return n.bgMessageHandler=null,self.addEventListener("push",(function(e){n.onPush(e)})),self.addEventListener("pushsubscriptionchange",(function(e){n.onSubChange(e)})),self.addEventListener("notificationclick",(function(e){n.onNotificationClick(e)})),n}return Object(B.__extends)(t,e),t.prototype.onPush=function(e){e.waitUntil(this.onPush_(e))},t.prototype.onSubChange=function(e){e.waitUntil(this.onSubChange_(e))},t.prototype.onNotificationClick=function(e){e.waitUntil(this.onNotificationClick_(e))},t.prototype.onPush_=function(e){return Object(B.__awaiter)(this,void 0,void 0,(function(){var t,n,r,i,o,a;return Object(B.__generator)(this,(function(s){switch(s.label){case 0:if(!e.data)return[2];try{t=e.data.json()}catch(e){return[2]}return[4,this.hasVisibleClients_()];case 1:return s.sent()?[2,this.sendMessageToWindowClients_(t)]:(n=this.getNotificationData_(t))?(r=n.title||"",[4,this.getSWRegistration_()]):[3,3];case 2:return i=s.sent(),o=n.actions,a=Notification.maxActions,o&&a&&o.length>a&&console.warn("This browser only supports "+a+" actions.The remaining actions will not be displayed."),[2,i.showNotification(r,n)];case 3:return this.bgMessageHandler?[4,this.bgMessageHandler(t)]:[3,5];case 4:return s.sent(),[2];case 5:return[2]}}))}))},t.prototype.onSubChange_=function(e){return Object(B.__awaiter)(this,void 0,void 0,(function(){var e,t,n,r;return Object(B.__generator)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this.getSWRegistration_()];case 1:return e=i.sent(),[3,3];case 2:throw t=i.sent(),Ze.create("unable-to-resubscribe",{errorInfo:t});case 3:return i.trys.push([3,5,,8]),[4,e.pushManager.getSubscription()];case 4:return i.sent(),[3,8];case 5:return n=i.sent(),[4,this.getTokenDetailsModel().getTokenDetailsFromSWScope(e.scope)];case 6:if(!(r=i.sent()))throw n;return[4,this.deleteToken(r.fcmToken)];case 7:throw i.sent(),n;case 8:return[2]}}))}))},t.prototype.onNotificationClick_=function(e){return Object(B.__awaiter)(this,void 0,void 0,(function(){var t,n,r,i;return Object(B.__generator)(this,(function(o){switch(o.label){case 0:if(!(e.notification&&e.notification.data&&e.notification.data.FCM_MSG))return[2];if(e.action)return[2];if(e.stopImmediatePropagation(),e.notification.close(),!(t=e.notification.data.FCM_MSG).notification)return[2];if(!(n=t.fcmOptions&&t.fcmOptions.link||t.notification.click_action)){if(!(t.data&&"google.c.a.c_id"in t.data))return[2];n=self.location.origin}return[4,this.getWindowClient_(n)];case 1:return(r=o.sent())?[3,4]:[4,self.clients.openWindow(n)];case 2:return r=o.sent(),[4,(a=3e3,new Promise((function(e){setTimeout(e,a)})))];case 3:return o.sent(),[3,6];case 4:return[4,r.focus()];case 5:r=o.sent(),o.label=6;case 6:return r?(delete t.notification,delete t.fcmOptions,i=wt(Xe.NOTIFICATION_CLICKED,t),[2,this.attemptToMessageClient_(r,i)]):[2]}var a;
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}))}))},t.prototype.getNotificationData_=function(e){var t;if(e&&"object"==typeof e.notification){var n=Object(B.__assign)({},e.notification);return n.data=Object(B.__assign)(Object(B.__assign)({},e.notification.data),((t={}).FCM_MSG=e,t)),n}},t.prototype.setBackgroundMessageHandler=function(e){if(!e||"function"!=typeof e)throw Ze.create("bg-handler-function-expected");this.bgMessageHandler=e},t.prototype.getWindowClient_=function(e){return Object(B.__awaiter)(this,void 0,void 0,(function(){var t,n,r,i;return Object(B.__generator)(this,(function(o){switch(o.label){case 0:return t=new URL(e,self.location.href).href,[4,bt()];case 1:for(n=o.sent(),r=null,i=0;i<n.length;i++)if(new URL(n[i].url,self.location.href).href===t){r=n[i];break}return[2,r]}}))}))},t.prototype.attemptToMessageClient_=function(e,t){return Object(B.__awaiter)(this,void 0,void 0,(function(){return Object(B.__generator)(this,(function(n){if(!e)throw Ze.create("no-window-client-to-msg");return e.postMessage(t),[2]}))}))},t.prototype.hasVisibleClients_=function(){return Object(B.__awaiter)(this,void 0,void 0,(function(){return Object(B.__generator)(this,(function(e){switch(e.label){case 0:return[4,bt()];case 1:return[2,e.sent().some((function(e){return"visible"===e.visibilityState&&!e.url.startsWith("chrome-extension://")}))]}}))}))},t.prototype.sendMessageToWindowClients_=function(e){return Object(B.__awaiter)(this,void 0,void 0,(function(){var t,n,r=this;return Object(B.__generator)(this,(function(i){switch(i.label){case 0:return[4,bt()];case 1:return t=i.sent(),n=wt(Xe.PUSH_MSG_RECEIVED,e),[4,Promise.all(t.map((function(e){return r.attemptToMessageClient_(e,n)})))];case 2:return i.sent(),[2]}}))}))},t.prototype.getSWRegistration_=function(){return Object(B.__awaiter)(this,void 0,void 0,(function(){return Object(B.__generator)(this,(function(e){return[2,self.registration]}))}))},t.prototype.getPublicVapidKey_=function(){return Object(B.__awaiter)(this,void 0,void 0,(function(){var e,t;return Object(B.__generator)(this,(function(n){switch(n.label){case 0:return[4,this.getSWRegistration_()];case 1:if(!(e=n.sent()))throw Ze.create("sw-registration-expected");return[4,this.getVapidDetailsModel().getVapidFromSWScope(e.scope)];case 2:return null==(t=n.sent())?[2,et]:[2,t]}}))}))},t}(yt);function bt(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function wt(e,t){return{firebaseMessagingType:e,firebaseMessagingData:t}}var Tt=function(e){function t(t){var n=e.call(this,t)||this;return n.registrationToUse=null,n.publicVapidKeyToUse=null,n.messageObserver=null,n.tokenRefreshObserver=null,n.onMessageInternal=Object(F.createSubscribe)((function(e){n.messageObserver=e})),n.onTokenRefreshInternal=Object(F.createSubscribe)((function(e){n.tokenRefreshObserver=e})),n.setupSWMessageListener_(),n}return Object(B.__extends)(t,e),t.prototype.requestPermission=function(){return Object(B.__awaiter)(this,void 0,void 0,(function(){var e;return Object(B.__generator)(this,(function(t){switch(t.label){case 0:return"granted"===Notification.permission?[2]:[4,Notification.requestPermission()];case 1:if("granted"===(e=t.sent()))return[2];throw"denied"===e?Ze.create("permission-blocked"):Ze.create("permission-default")}}))}))},t.prototype.useServiceWorker=function(e){if(!(e instanceof ServiceWorkerRegistration))throw Ze.create("sw-registration-expected");if(null!=this.registrationToUse)throw Ze.create("use-sw-before-get-token");this.registrationToUse=e},t.prototype.usePublicVapidKey=function(e){if("string"!=typeof e)throw Ze.create("invalid-public-vapid-key");if(null!=this.publicVapidKeyToUse)throw Ze.create("use-public-key-before-get-token");var t=ct(e);if(65!==t.length)throw Ze.create("public-vapid-key-decryption-failed");this.publicVapidKeyToUse=t},t.prototype.onMessage=function(e,t,n){return"function"==typeof e?this.onMessageInternal(e,t,n):this.onMessageInternal(e)},t.prototype.onTokenRefresh=function(e,t,n){return"function"==typeof e?this.onTokenRefreshInternal(e,t,n):this.onTokenRefreshInternal(e)},t.prototype.waitForRegistrationToActivate_=function(e){var t=e.installing||e.waiting||e.active;return new Promise((function(n,r){if(t)if("activated"!==t.state)if("redundant"!==t.state){var i=function(){if("activated"===t.state)n(e);else{if("redundant"!==t.state)return;r(Ze.create("sw-reg-redundant"))}t.removeEventListener("statechange",i)};t.addEventListener("statechange",i)}else r(Ze.create("sw-reg-redundant"));else n(e);else r(Ze.create("no-sw-in-reg"))}))},t.prototype.getSWRegistration_=function(){var e=this;return this.registrationToUse?this.waitForRegistrationToActivate_(this.registrationToUse):(this.registrationToUse=null,navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"}).catch((function(e){throw Ze.create("failed-serviceworker-registration",{browserErrorMessage:e.message})})).then((function(t){return e.waitForRegistrationToActivate_(t).then((function(){return e.registrationToUse=t,t.update(),t}))})))},t.prototype.getPublicVapidKey_=function(){return Object(B.__awaiter)(this,void 0,void 0,(function(){return Object(B.__generator)(this,(function(e){return this.publicVapidKeyToUse?[2,this.publicVapidKeyToUse]:[2,et]}))}))},t.prototype.setupSWMessageListener_=function(){var e=this;navigator.serviceWorker.addEventListener("message",(function(t){return Object(B.__awaiter)(e,void 0,void 0,(function(){var e,n,r,i,o;return Object(B.__generator)(this,(function(a){switch(a.label){case 0:return t.data&&t.data.firebaseMessagingType&&t.data.firebaseMessagingData?(e=t.data,n=e.firebaseMessagingType,r=e.firebaseMessagingData,this.messageObserver&&this.messageObserver.next(r),(i=r.data)&&"google.c.a.c_id"in i&&"1"===i["google.c.a.e"]?(o=function(e){switch(e){case Xe.NOTIFICATION_CLICKED:return"notification_open";case Xe.PUSH_MSG_RECEIVED:return"notification_foreground";default:throw new Error}}(n),[4,this.services.analyticsProvider.get()]):[3,2]):[2];case 1:a.sent().logEvent(o,{message_name:i["google.c.a.c_l"],message_id:i["google.c.a.c_id"],message_time:i["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)}),a.label=2;case 2:return[2]}}))}))}),!1)},t}(yt);var St="@firebase/messaging",It="0.6.0";function Et(){return self&&"ServiceWorkerGlobalScope"in self?"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey"):navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}!
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(e){var t={isSupported:Et};e.INTERNAL.registerComponent(new j.Component("messaging",(function(e){var t={app:e.getProvider("app").getImmediate(),installations:e.getProvider("installations").getImmediate(),analyticsProvider:e.getProvider("analytics-internal")};if(!Et())throw Ze.create("unsupported-browser");return self&&"ServiceWorkerGlobalScope"in self?new vt(t):new Tt(t)}),"PUBLIC").setServiceProps(t)),e.registerVersion(St,It)}(R.a);P.initializeApp({apiKey:"AIzaSyB9KC9Q3NzMt7b6TspNcKxqWqnzzPLvdFg",authDomain:"testgdproject-1570036439931.firebaseapp.com",databaseURL:"https://testgdproject-1570036439931.firebaseio.com",projectId:"testgdproject-1570036439931",storageBucket:"testgdproject-1570036439931.appspot.com",messagingSenderId:"199844453643",appId:"1:199844453643:web:4aa7ba97d1ae2e428b560e"});var Ct=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},_t=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},Dt=new L,kt=new class{constructor(e){this.messaging=P.messaging(),this.messaging.onMessage(t=>{console.log("Message received. ",t);const n=t.data;e.notificationsManager.createNotificaction(n)}),this.messaging.onTokenRefresh(()=>{this.messaging.getToken().then(t=>{console.log("FCM token refreshed:",t),P.firestore().collection("fcmTokens").doc(t).set({email:e.userInfo.emailAddress})}).catch(e=>{console.log("Unable to retrieve refreshed token ",e)})}),window.getMessagingToken=function(){P.messaging().getToken().then(e=>{console.log(e)}).catch(e=>{console.error(e)})},window.saveMessagingDeviceToken=function(){sessionStorage.getItem("deviceToken")||P.messaging().getToken().then(t=>{t?(console.log("FCM token generated:",t),P.firestore().collection("fcmTokens").doc(t).set({email:e.userInfo.emailAddress}),sessionStorage.setItem("deviceToken",t)):this.requestNotificationsPermissions()}).catch(e=>{console.error("Unable to get FCM token.",e)})}}requestNotificationsPermissions(){console.log("Requesting notifications permission..."),P.messaging().requestPermission().then(()=>{console.log("Notification permission granted."),window.saveMessagingDeviceToken()}).catch(e=>{console.error("Unable to get permission to notify:",e)})}}(Dt);(window.thereIsMessaging=!0,"serviceWorker"in navigator&&window.addEventListener("load",(function(){navigator.serviceWorker.register("/service-worker.js").then((function(e){console.log("Service worker registered.",e),window.thereIsMessaging&&kt.messaging.useServiceWorker(e)})).catch((function(e){console.error("Service Worker Error",e)}))})),window.getCurrentUser=function(){return Dt.userInfo},window.BroadcastChannel)?new BroadcastChannel("app-channel").onmessage=function(e){"newNotification"===e.data.action&&(console.log("Add notification to the list."),Dt.notificationsManager.createNotificaction(e.data.content))}:console.warn("This browser does not support BroadcastChannel.");document.getElementById("sampleProjectBtn").onclick=function(){document.getElementById("projectsListBtn").onclick=null,Dt.saveBtn.style.visibility="hidden",Dt.projectsListBtn.classList.add("locked"),Dt.start("1D4ESY97zKvJoZ1BWeLWYq8GxhQNWsXpg")};var Nt,At="344446892746-36ebkcl04viq3poe73mb3dkhr79lspqk.apps.googleusercontent.com";Nt="production"===Object({GOOGLE_CLIENT_ID:"344446892746-36ebkcl04viq3poe73mb3dkhr79lspqk.apps.googleusercontent.com",GOOGLE_API_KEY_DEV:"AIzaSyBuHx9BXXCRFSKiLzjinZgK_2ys58ynGew",GOOGLE_API_KEY_PROD:"AIzaSyDiGyyxn_sPAvr2Mox44J6lPurG0XhQa7c"}).PROCESS?"AIzaSyDiGyyxn_sPAvr2Mox44J6lPurG0XhQa7c":"AIzaSyBuHx9BXXCRFSKiLzjinZgK_2ys58ynGew";var xt,Mt=["https://www.googleapis.com/discovery/v1/apis/drive/v3/rest"],Lt="https://www.googleapis.com/auth/drive",Pt=document.getElementById("authorizeBtn"),Ot=document.getElementById("signoutBtn");function Rt(){gapi.client.init({apiKey:Nt,clientId:At,discoveryDocs:Mt,scope:Lt}).then((function(){gapi.auth2.getAuthInstance().isSignedIn.listen(jt),jt(gapi.auth2.getAuthInstance().isSignedIn.get()),Pt.onclick=Bt,Ot.onclick=Ft}),(function(e){console.log(JSON.stringify(e,null,2))}))}function jt(e){if(e){console.log("Authorized.");var t=c.getUrlParams(window.location.href).id;Dt.modalDialogContent.firstElementChild&&Dt.closeModalDialog(),Dt.setUserInfo(),Dt.start(t)}else console.log("Not authorized"),Dt.showModalDialog(Vt,"opaque",!1),document.querySelector("header").style.display="none",document.querySelector("main").style.display="none",Dt.projectsListContainer.style.display="none",c.emptyNode(Dt.projectsList),history.replaceState({page:"Sign in dialog"},"Sign in dialog",location.href.replace(location.search,""))}function Bt(){gapi.auth2.getAuthInstance().signIn()}function Ft(){gapi.auth2.getAuthInstance().signOut()}(xt=document.createElement("script")).type="text/javascript",xt.defer=!0,xt.onload=function(){gapi.load("client:auth2",Rt)},xt.src="https://apis.google.com/js/api.js",document.querySelector("body").appendChild(xt);var Vt=document.getElementById("authorizeDialog");var qt,Ut=null,Wt=document.getElementById("installBtn");Wt.addEventListener("click",(function(e){Ut.prompt(),e.target.hidden=!0,Ut.userChoice.then((function(e){"accepted"===e.outcome?console.log("User accepted the A2HS prompt",e):console.log("User dismissed the A2HS prompt",e),Ut=null}))})),window.addEventListener("beforeinstallprompt",(function(e){e.preventDefault(),Ut=e,Wt.removeAttribute("hidden")})),window.addEventListener("appinstalled",(function(e){console.log("VisualARQ Drawings Viewer was installed.",e)})),Dt.drawingsBtns.querySelector(".dropdown-content").addEventListener("click",(function(e){return Ct(this,void 0,void 0,(function(){var t,n,r,i;return _t(this,(function(o){switch(o.label){case 0:if(qt&&qt.classList.remove("active"),qt=e.target,t=qt.dataset.id,Dt.drawingsBtns.children[0].innerText=qt.innerText,qt.classList.add("active"),n=Dt.currentWorkspace.drawings.find((function(e){return e.id===t})),void 0!==Dt.currentWorkspace.drawingsStylesTag)return[3,6];if(void 0===Dt.currentWorkspace.drawingsStylesId)return[3,5];r=void 0,o.label=1;case 1:return o.trys.push([1,3,,4]),[4,l.getFileContent(Dt.currentWorkspace.drawingsStylesId)];case 2:return r=o.sent(),[3,4];case 3:return o.sent(),console.error("Error while trying to fetch the drawings styles."),[3,4];case 4:return r&&((i=document.createElement("style")).innerText=r.body,document.head.appendChild(i),Dt.currentWorkspace.drawingsStylesTag=i),[3,6];case 5:console.warn("This project doesn't have a css styles file for the drawings."),o.label=6;case 6:return void 0!==n.content?Dt.currentWorkspace.setDrawing(n):(Dt.showViewportDialog("loader","Loading drawing"),l.getFileContent(t).then((function(e){n.setContent(e.body),Dt.currentWorkspace.setDrawing(n),Dt.hideViewportMessage(),console.log("Drawing fetched.")}),(function(e){console.log(e)}))),[2]}}))}))}));for(var zt=document.getElementsByClassName("dropdown-container"),Kt=function(e){zt[e].children[0].addEventListener("click",(function(){zt[e].classList.toggle("open")})),zt[e].addEventListener("mouseleave",(function(e){e.currentTarget.classList.remove("open")}))},Gt=0;Gt<zt.length;Gt++)Kt(Gt);var Qt=document.getElementById("sideNavToggle");Qt.addEventListener("click",(function(){document.getElementById("sideNavContainer").classList.toggle("active"),Qt.classList.toggle("active")}))}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3RzbGliL3RzbGliLmVzNi5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL3V0aWwvZGlzdC9pbmRleC5janMuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS9jb21wb25lbnQvZGlzdC9pbmRleC5janMuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS9hcHAvZGlzdC9pbmRleC5janMuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2ZpcmViYXNlL2FwcC9kaXN0L2luZGV4LmNqcy5qcyIsIndlYnBhY2s6Ly8vKHdlYnBhY2spL2J1aWxkaW4vZ2xvYmFsLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvbG9nZ2VyL2Rpc3QvaW5kZXguZXNtLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9pZGIvYnVpbGQvaWRiLmpzIiwid2VicGFjazovLy8uL3NyYy9zdHlsZXMvc3R5bGVzLnNjc3M/NDExYSIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbmplY3RTdHlsZXNJbnRvU3R5bGVUYWcuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3N0eWxlcy9zdHlsZXMuc2NzcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvYXBpLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9nZXRVcmwuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Fzc2V0cy9pY29ucy9oYW1idXJnZXJJY29uLnN2ZyIsIndlYnBhY2s6Ly8vLi9zcmMvYXNzZXRzL2ljb25zL2Nyb3NzSWNvbi5zdmciLCJ3ZWJwYWNrOi8vLy4vc3JjL2Fzc2V0cy9pY29ucy9wcm9qZWN0c0xpc3RJY29uLnN2ZyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL2ZpcmVzdG9yZS9kaXN0L2luZGV4LmNqcy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcHJvY2Vzcy9icm93c2VyLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2Uvd2ViY2hhbm5lbC13cmFwcGVyL2Rpc3QvaW5kZXguZXNtLmpzIiwid2VicGFjazovLy8uL3NyYy9nZW9tZXRyeS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZ2VuZXJpY3MudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2RyYXdpbmcudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FwaS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tbWVudC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbWFpblBhbmVsLmpzIiwid2VicGFjazovLy8uL3NyYy9jb21tZW50Rm9ybS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvd29ya3NwYWNlLnRzIiwid2VicGFjazovLy8uL3NyYy9hcHBUb29scy90b29sLnRzIiwid2VicGFjazovLy8uL3NyYy9hcHBUb29scy9lbGVtZW50U2VsZWN0aW9uLnRzIiwid2VicGFjazovLy8uL3NyYy9hcHBUb29scy9hZGRDb21tZW50LmpzIiwid2VicGFjazovLy8uL3NyYy9hcHBUb29scy9lbGVtZW50RGF0YS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvc2hhcmVQcm9qZWN0LnRzIiwid2VicGFjazovLy8uL3NyYy9ub3RpZmljYXRpb25zTWFuYWdlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcmVuYW1lUHJvamVjdC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29udGV4dE1lbnUudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3Byb2plY3RJdGVtLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvaW5zdGFsbGF0aW9ucy9kaXN0L2luZGV4LmVzbS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvYXBwLnRzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvYW5hbHl0aWNzL2Rpc3QvaW5kZXguZXNtLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvbWVzc2FnaW5nL2Rpc3QvaW5kZXguZXNtLmpzIiwid2VicGFjazovLy8uL3NyYy9tZXNzYWdpbmcuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2luZGV4LnRzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiZXh0ZW5kU3RhdGljcyIsImIiLCJzZXRQcm90b3R5cGVPZiIsIl9fcHJvdG9fXyIsIkFycmF5IiwiX19leHRlbmRzIiwiX18iLCJ0aGlzIiwiY29uc3RydWN0b3IiLCJfX2Fzc2lnbiIsImFzc2lnbiIsImFyZ3VtZW50cyIsImxlbmd0aCIsImFwcGx5IiwiX19yZXN0IiwiZSIsImluZGV4T2YiLCJnZXRPd25Qcm9wZXJ0eVN5bWJvbHMiLCJwcm9wZXJ0eUlzRW51bWVyYWJsZSIsIl9fZGVjb3JhdGUiLCJkZWNvcmF0b3JzIiwidGFyZ2V0IiwiZGVzYyIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsIlJlZmxlY3QiLCJkZWNvcmF0ZSIsIl9fcGFyYW0iLCJwYXJhbUluZGV4IiwiZGVjb3JhdG9yIiwiX19tZXRhZGF0YSIsIm1ldGFkYXRhS2V5IiwibWV0YWRhdGFWYWx1ZSIsIm1ldGFkYXRhIiwiX19hd2FpdGVyIiwidGhpc0FyZyIsIl9hcmd1bWVudHMiLCJQIiwiZ2VuZXJhdG9yIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJmdWxmaWxsZWQiLCJzdGVwIiwibmV4dCIsInJlamVjdGVkIiwicmVzdWx0IiwiZG9uZSIsInRoZW4iLCJfX2dlbmVyYXRvciIsImJvZHkiLCJmIiwieSIsImciLCJfIiwibGFiZWwiLCJzZW50IiwidHJ5cyIsIm9wcyIsInZlcmIiLCJpdGVyYXRvciIsInYiLCJvcCIsIlR5cGVFcnJvciIsInBvcCIsInB1c2giLCJfX2V4cG9ydFN0YXIiLCJfX3ZhbHVlcyIsIl9fcmVhZCIsImFyIiwiZXJyb3IiLCJfX3NwcmVhZCIsImNvbmNhdCIsIl9fc3ByZWFkQXJyYXlzIiwiaWwiLCJrIiwiYSIsImoiLCJqbCIsIl9fYXdhaXQiLCJfX2FzeW5jR2VuZXJhdG9yIiwiYXN5bmNJdGVyYXRvciIsInEiLCJyZXN1bWUiLCJmdWxmaWxsIiwic2V0dGxlIiwic2hpZnQiLCJfX2FzeW5jRGVsZWdhdG9yIiwiX19hc3luY1ZhbHVlcyIsIl9fbWFrZVRlbXBsYXRlT2JqZWN0IiwiY29va2VkIiwicmF3IiwiX19pbXBvcnRTdGFyIiwibW9kIiwiZGVmYXVsdCIsIl9faW1wb3J0RGVmYXVsdCIsInRzbGliIiwiQ09OU1RBTlRTIiwiTk9ERV9DTElFTlQiLCJOT0RFX0FETUlOIiwiU0RLX1ZFUlNJT04iLCJhc3NlcnQiLCJhc3NlcnRpb24iLCJtZXNzYWdlIiwiYXNzZXJ0aW9uRXJyb3IiLCJFcnJvciIsInN0cmluZ1RvQnl0ZUFycmF5Iiwic3RyIiwib3V0IiwiY2hhckNvZGVBdCIsImJhc2U2NCIsImJ5dGVUb0NoYXJNYXBfIiwiY2hhclRvQnl0ZU1hcF8iLCJieXRlVG9DaGFyTWFwV2ViU2FmZV8iLCJjaGFyVG9CeXRlTWFwV2ViU2FmZV8iLCJFTkNPREVEX1ZBTFNfQkFTRSIsIkhBU19OQVRJVkVfU1VQUE9SVCIsImF0b2IiLCJlbmNvZGVCeXRlQXJyYXkiLCJpbnB1dCIsIndlYlNhZmUiLCJpc0FycmF5IiwiaW5pdF8iLCJieXRlVG9DaGFyTWFwIiwib3V0cHV0IiwiYnl0ZTEiLCJoYXZlQnl0ZTIiLCJieXRlMiIsImhhdmVCeXRlMyIsImJ5dGUzIiwib3V0Qnl0ZTEiLCJvdXRCeXRlMiIsIm91dEJ5dGUzIiwib3V0Qnl0ZTQiLCJqb2luIiwiZW5jb2RlU3RyaW5nIiwiYnRvYSIsImRlY29kZVN0cmluZyIsImJ5dGVzIiwicG9zIiwiYzEiLCJTdHJpbmciLCJmcm9tQ2hhckNvZGUiLCJjMiIsInUiLCJjMyIsImJ5dGVBcnJheVRvU3RyaW5nIiwiZGVjb2RlU3RyaW5nVG9CeXRlQXJyYXkiLCJjaGFyVG9CeXRlTWFwIiwiY2hhckF0IiwiYnl0ZTQiLCJFTkNPREVEX1ZBTFMiLCJFTkNPREVEX1ZBTFNfV0VCU0FGRSIsImJhc2U2NERlY29kZSIsImNvbnNvbGUiLCJkZWVwRXh0ZW5kIiwic291cmNlIiwiRGF0ZSIsImdldFRpbWUiLCJ1bmRlZmluZWQiLCJwcm9wIiwiRGVmZXJyZWQiLCJfdGhpcyIsInByb21pc2UiLCJ3cmFwQ2FsbGJhY2siLCJjYWxsYmFjayIsImNhdGNoIiwiZ2V0VUEiLCJuYXZpZ2F0b3IiLCJFUlJPUl9OQU1FIiwiRmlyZWJhc2VFcnJvciIsIl9zdXBlciIsImNvZGUiLCJjYXB0dXJlU3RhY2tUcmFjZSIsIkVycm9yRmFjdG9yeSIsInNlcnZpY2UiLCJzZXJ2aWNlTmFtZSIsImVycm9ycyIsImRhdGEiLCJfaSIsImN1c3RvbURhdGEiLCJmdWxsQ29kZSIsInRlbXBsYXRlIiwicmVwbGFjZVRlbXBsYXRlIiwiZnVsbE1lc3NhZ2UiLCJfYSIsIl9iIiwia2V5cyIsInNsaWNlIiwid2FybiIsInJlcGxhY2UiLCJQQVRURVJOIiwidG9TdHJpbmciLCJqc29uRXZhbCIsIkpTT04iLCJwYXJzZSIsImRlY29kZSIsInRva2VuIiwiaGVhZGVyIiwiY2xhaW1zIiwic2lnbmF0dXJlIiwicGFydHMiLCJzcGxpdCIsIlNoYTEiLCJjaGFpbl8iLCJidWZfIiwiV18iLCJwYWRfIiwiaW5idWZfIiwidG90YWxfIiwiYmxvY2tTaXplIiwicmVzZXQiLCJjb21wcmVzc18iLCJidWYiLCJvZmZzZXQiLCJXIiwidXBkYXRlIiwibGVuZ3RoTWludXNCbG9jayIsImluYnVmIiwiZGlnZXN0IiwidG90YWxCaXRzIiwiT2JzZXJ2ZXJQcm94eSIsImV4ZWN1dG9yIiwib25Ob09ic2VydmVycyIsIm9ic2VydmVycyIsInVuc3Vic2NyaWJlcyIsIm9ic2VydmVyQ291bnQiLCJ0YXNrIiwiZmluYWxpemVkIiwiZm9yRWFjaE9ic2VydmVyIiwib2JzZXJ2ZXIiLCJjbG9zZSIsImNvbXBsZXRlIiwic3Vic2NyaWJlIiwibmV4dE9yT2JzZXJ2ZXIiLCJvYmoiLCJtZXRob2RzIiwibWV0aG9kc18xIiwibWV0aG9kIiwiaW1wbGVtZW50c0FueU1ldGhvZHMiLCJub29wIiwidW5zdWIiLCJ1bnN1YnNjcmliZU9uZSIsImZpbmFsRXJyb3IiLCJmbiIsInNlbmRPbmUiLCJlcnIiLCJlcnJvclByZWZpeCIsImZuTmFtZSIsImFyZ3VtZW50TnVtYmVyIiwib3B0aW9uYWwiLCJhcmdOYW1lIiwiYXN5bmMiLCJvbkVycm9yIiwiYXJncyIsImJhc2U2NEVuY29kZSIsInV0ZjhCeXRlcyIsImNvbnRhaW5zIiwiY3JlYXRlU3Vic2NyaWJlIiwicHJveHkiLCJkZWVwQ29weSIsImlzQWRtaW4iLCJpc0Jyb3dzZXIiLCJzZWxmIiwiaXNFbXB0eSIsImlzTW9iaWxlQ29yZG92YSIsIndpbmRvdyIsInRlc3QiLCJpc05vZGUiLCJnbG9iYWwiLCJwcm9jZXNzIiwiaXNOb2RlU2RrIiwiaXNSZWFjdE5hdGl2ZSIsImlzVmFsaWRGb3JtYXQiLCJpc1ZhbGlkVGltZXN0YW1wIiwibm93IiwiTWF0aCIsImZsb29yIiwidmFsaWRTaW5jZSIsInZhbGlkVW50aWwiLCJpc3N1ZWRBdFRpbWUiLCJtYXAiLCJjb250ZXh0T2JqIiwicmVzIiwicXVlcnlzdHJpbmciLCJxdWVyeXN0cmluZ1BhcmFtcyIsInBhcmFtcyIsIl9sb29wXzEiLCJmb3JFYWNoIiwiYXJyYXlWYWwiLCJlbmNvZGVVUklDb21wb25lbnQiLCJlbnRyaWVzIiwicXVlcnlzdHJpbmdEZWNvZGUiLCJzYWZlR2V0Iiwic3RyaW5nTGVuZ3RoIiwiaGlnaCIsInN0cmluZ2lmeSIsInZhbGlkYXRlQXJnQ291bnQiLCJtaW5Db3VudCIsIm1heENvdW50IiwiYXJnQ291bnQiLCJhcmdFcnJvciIsInZhbGlkYXRlQ2FsbGJhY2siLCJ2YWxpZGF0ZUNvbnRleHRPYmplY3QiLCJjb250ZXh0IiwidmFsaWRhdGVOYW1lc3BhY2UiLCJuYW1lc3BhY2UiLCJ1dGlsIiwiQ29tcG9uZW50IiwiaW5zdGFuY2VGYWN0b3J5IiwidHlwZSIsIm11bHRpcGxlSW5zdGFuY2VzIiwic2VydmljZVByb3BzIiwiaW5zdGFudGlhdGlvbk1vZGUiLCJzZXRJbnN0YW50aWF0aW9uTW9kZSIsInNldE11bHRpcGxlSW5zdGFuY2VzIiwic2V0U2VydmljZVByb3BzIiwicHJvcHMiLCJERUZBVUxUX0VOVFJZX05BTUUiLCJQcm92aWRlciIsImNvbnRhaW5lciIsImNvbXBvbmVudCIsImluc3RhbmNlcyIsIk1hcCIsImluc3RhbmNlc0RlZmVycmVkIiwiaWRlbnRpZmllciIsIm5vcm1hbGl6ZWRJZGVudGlmaWVyIiwibm9ybWFsaXplSW5zdGFuY2VJZGVudGlmaWVyIiwiaGFzIiwiZGVmZXJyZWQiLCJzZXQiLCJpbnN0YW5jZSIsImdldE9ySW5pdGlhbGl6ZVNlcnZpY2UiLCJnZXRJbW1lZGlhdGUiLCJvcHRpb25zIiwiZ2V0Q29tcG9uZW50Iiwic2V0Q29tcG9uZW50IiwiZV8xIiwiaXNDb21wb25lbnRFYWdlciIsIl9jIiwiX2QiLCJpbnN0YW5jZUlkZW50aWZpZXIiLCJpbnN0YW5jZURlZmVycmVkIiwiZV8xXzEiLCJyZXR1cm4iLCJjbGVhckluc3RhbmNlIiwiZGVsZXRlIiwic2VydmljZXMiLCJmcm9tIiwidmFsdWVzIiwiYWxsIiwiZmlsdGVyIiwiSU5URVJOQUwiLCJpc0NvbXBvbmVudFNldCIsIm5vcm1hbGl6ZUlkZW50aWZpZXJGb3JGYWN0b3J5IiwiQ29tcG9uZW50Q29udGFpbmVyIiwicHJvdmlkZXJzIiwiYWRkQ29tcG9uZW50IiwicHJvdmlkZXIiLCJnZXRQcm92aWRlciIsImFkZE9yT3ZlcndyaXRlQ29tcG9uZW50IiwiZ2V0UHJvdmlkZXJzIiwiX2EkMSIsImxvZ2dlciQxIiwiRVJST1JTIiwiRVJST1JfRkFDVE9SWSIsInZlcnNpb24iLCJQTEFURk9STV9MT0dfU1RSSU5HIiwibG9nZ2VyIiwiTG9nZ2VyIiwiRmlyZWJhc2VBcHBJbXBsIiwiY29uZmlnIiwiZmlyZWJhc2VfIiwiaXNEZWxldGVkXyIsIm5hbWVfIiwiYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkXyIsImF1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZCIsIm9wdGlvbnNfIiwiX2FkZENvbXBvbmVudCIsImNvbXBvbmVudHMiLCJjb21wb25lbnQkMSIsImNoZWNrRGVzdHJveWVkXyIsInZhbCIsImNvbmZpZ3VyYWJsZSIsInJlbW92ZUFwcCIsIl9nZXRTZXJ2aWNlIiwiX3JlbW92ZVNlcnZpY2VJbnN0YW5jZSIsImRlYnVnIiwiX2FkZE9yT3ZlcndyaXRlQ29tcG9uZW50IiwiYXBwTmFtZSIsImxvZyIsInZlcnNpb24kMSIsImZpcmViYXNlIiwiY3JlYXRlRmlyZWJhc2VOYW1lc3BhY2UiLCJmaXJlYmFzZUFwcEltcGwiLCJhcHBzIiwiaW5pdGlhbGl6ZUFwcCIsInJhd0NvbmZpZyIsImFwcCIsInJlZ2lzdGVyVmVyc2lvbiIsImxpYnJhcnlLZXlPck5hbWUiLCJ2YXJpYW50IiwibGlicmFyeSIsImxpYnJhcnlNaXNtYXRjaCIsIm1hdGNoIiwidmVyc2lvbk1pc21hdGNoIiwid2FybmluZyIsInJlZ2lzdGVyQ29tcG9uZW50IiwidXNlQXNTZXJ2aWNlIiwiY29tcG9uZW50TmFtZSIsInNlcnZpY2VOYW1lc3BhY2UiLCJhcHBBcmciLCJzZXJ2aWNlRnhuIiwiY3JlYXRlRmlyZWJhc2VOYW1lc3BhY2VDb3JlIiwiZXh0ZW5kTmFtZXNwYWNlIiwiUGxhdGZvcm1Mb2dnZXJTZXJ2aWNlIiwiZ2V0UGxhdGZvcm1JbmZvU3RyaW5nIiwiaXNWZXJzaW9uU2VydmljZVByb3ZpZGVyIiwibG9nU3RyaW5nIiwic2RrVmVyc2lvbiIsImZpcmViYXNlJDEiLCJyZWdpc3RlckNvcmVDb21wb25lbnRzIiwiZXgiLCJGdW5jdGlvbiIsIkxvZ0xldmVsIiwiZGVmYXVsdExvZ0xldmVsIiwiSU5GTyIsImRlZmF1bHRMb2dIYW5kbGVyIiwibG9nVHlwZSIsImxvZ0xldmVsIiwidG9JU09TdHJpbmciLCJERUJVRyIsIlZFUkJPU0UiLCJpbmZvIiwiV0FSTiIsIkVSUk9SIiwiX2xvZ0xldmVsIiwiX2xvZ0hhbmRsZXIiLCJzZXRMb2dMZXZlbCIsImxldmVsIiwiaW5zdCIsInRvQXJyYXkiLCJhcnIiLCJwcm9taXNpZnlSZXF1ZXN0IiwicmVxdWVzdCIsIm9uc3VjY2VzcyIsIm9uZXJyb3IiLCJwcm9taXNpZnlSZXF1ZXN0Q2FsbCIsInByb21pc2lmeUN1cnNvclJlcXVlc3RDYWxsIiwiQ3Vyc29yIiwicHJveHlQcm9wZXJ0aWVzIiwiUHJveHlDbGFzcyIsInRhcmdldFByb3AiLCJwcm9wZXJ0aWVzIiwicHJveHlSZXF1ZXN0TWV0aG9kcyIsIkNvbnN0cnVjdG9yIiwicHJveHlNZXRob2RzIiwicHJveHlDdXJzb3JSZXF1ZXN0TWV0aG9kcyIsIkluZGV4IiwiaW5kZXgiLCJfaW5kZXgiLCJjdXJzb3IiLCJfY3Vyc29yIiwiX3JlcXVlc3QiLCJPYmplY3RTdG9yZSIsInN0b3JlIiwiX3N0b3JlIiwiVHJhbnNhY3Rpb24iLCJpZGJUcmFuc2FjdGlvbiIsIl90eCIsIm9uY29tcGxldGUiLCJvbmFib3J0IiwiVXBncmFkZURCIiwiZGIiLCJvbGRWZXJzaW9uIiwidHJhbnNhY3Rpb24iLCJfZGIiLCJEQiIsIklEQkluZGV4IiwiSURCQ3Vyc29yIiwibWV0aG9kTmFtZSIsImNyZWF0ZUluZGV4IiwiSURCT2JqZWN0U3RvcmUiLCJvYmplY3RTdG9yZSIsIklEQlRyYW5zYWN0aW9uIiwiY3JlYXRlT2JqZWN0U3RvcmUiLCJJREJEYXRhYmFzZSIsImZ1bmNOYW1lIiwibmF0aXZlT2JqZWN0IiwiZ2V0QWxsIiwicXVlcnkiLCJjb3VudCIsIml0ZW1zIiwiaXRlcmF0ZUN1cnNvciIsImNvbnRpbnVlIiwib3BlbkRiIiwidXBncmFkZUNhbGxiYWNrIiwiaW5kZXhlZERCIiwib251cGdyYWRlbmVlZGVkIiwiZXZlbnQiLCJkZWxldGVEYiIsImZhY3RvcnkiLCJhcGkiLCJjb250ZW50IiwibG9jYWxzIiwibWVtbyIsImlzT2xkSUUiLCJCb29sZWFuIiwiZG9jdW1lbnQiLCJnZXRUYXJnZXQiLCJzdHlsZVRhcmdldCIsInF1ZXJ5U2VsZWN0b3IiLCJIVE1MSUZyYW1lRWxlbWVudCIsImNvbnRlbnREb2N1bWVudCIsImhlYWQiLCJzdHlsZXNJbkRvbSIsImdldEluZGV4QnlJZGVudGlmaWVyIiwibW9kdWxlc1RvRG9tIiwibGlzdCIsImlkQ291bnRNYXAiLCJpZGVudGlmaWVycyIsIml0ZW0iLCJpZCIsImJhc2UiLCJjc3MiLCJtZWRpYSIsInNvdXJjZU1hcCIsInJlZmVyZW5jZXMiLCJ1cGRhdGVyIiwiYWRkU3R5bGUiLCJpbnNlcnRTdHlsZUVsZW1lbnQiLCJzdHlsZSIsImNyZWF0ZUVsZW1lbnQiLCJhdHRyaWJ1dGVzIiwibm9uY2UiLCJzZXRBdHRyaWJ1dGUiLCJpbnNlcnQiLCJhcHBlbmRDaGlsZCIsInRleHRTdG9yZSIsInJlcGxhY2VUZXh0IiwicmVwbGFjZW1lbnQiLCJhcHBseVRvU2luZ2xldG9uVGFnIiwicmVtb3ZlIiwic3R5bGVTaGVldCIsImNzc1RleHQiLCJjc3NOb2RlIiwiY3JlYXRlVGV4dE5vZGUiLCJjaGlsZE5vZGVzIiwicmVtb3ZlQ2hpbGQiLCJpbnNlcnRCZWZvcmUiLCJhcHBseVRvVGFnIiwicmVtb3ZlQXR0cmlidXRlIiwidW5lc2NhcGUiLCJmaXJzdENoaWxkIiwic2luZ2xldG9uIiwic2luZ2xldG9uQ291bnRlciIsInN0eWxlSW5kZXgiLCJwYXJlbnROb2RlIiwicmVtb3ZlU3R5bGVFbGVtZW50IiwibmV3T2JqIiwibGFzdElkZW50aWZpZXJzIiwibmV3TGlzdCIsIm5ld0xhc3RJZGVudGlmaWVycyIsInNwbGljZSIsIl9fX0NTU19MT0FERVJfQVBJX0lNUE9SVF9fXyIsIl9fX0NTU19MT0FERVJfR0VUX1VSTF9JTVBPUlRfX18iLCJfX19DU1NfTE9BREVSX1VSTF9JTVBPUlRfMF9fXyIsIl9fX0NTU19MT0FERVJfVVJMX0lNUE9SVF8xX19fIiwiX19fQ1NTX0xPQURFUl9VUkxfSU1QT1JUXzJfX18iLCJfX19DU1NfTE9BREVSX1VSTF9SRVBMQUNFTUVOVF8wX19fIiwiX19fQ1NTX0xPQURFUl9VUkxfUkVQTEFDRU1FTlRfMV9fXyIsIl9fX0NTU19MT0FERVJfVVJMX1JFUExBQ0VNRU5UXzJfX18iLCJ1c2VTb3VyY2VNYXAiLCJjc3NNYXBwaW5nIiwic291cmNlTWFwcGluZyIsInNvdXJjZVVSTHMiLCJzb3VyY2VzIiwic291cmNlUm9vdCIsImNzc1dpdGhNYXBwaW5nVG9TdHJpbmciLCJtZWRpYVF1ZXJ5IiwiZGVkdXBlIiwiYWxyZWFkeUltcG9ydGVkTW9kdWxlcyIsInVybCIsImhhc2giLCJuZWVkUXVvdGVzIiwid2ViY2hhbm5lbFdyYXBwZXIiLCJsb2dDbGllbnQiLCJnZXRMb2dMZXZlbCIsIlNJTEVOVCIsIm5ld0xldmVsIiwidGFnIiwibXNnIiwiYXJnVG9TdHJpbmciLCJwbGF0Zm9ybSIsIlBsYXRmb3JtU3VwcG9ydCIsImdldFBsYXRmb3JtIiwiZm9ybWF0SlNPTiIsImZhaWwiLCJmYWlsdXJlIiwic2V0UGxhdGZvcm0iLCJlbXB0eUJ5dGVTdHJpbmciLCJDb2RlIiwiT0siLCJDQU5DRUxMRUQiLCJVTktOT1dOIiwiSU5WQUxJRF9BUkdVTUVOVCIsIkRFQURMSU5FX0VYQ0VFREVEIiwiTk9UX0ZPVU5EIiwiQUxSRUFEWV9FWElTVFMiLCJQRVJNSVNTSU9OX0RFTklFRCIsIlVOQVVUSEVOVElDQVRFRCIsIlJFU09VUkNFX0VYSEFVU1RFRCIsIkZBSUxFRF9QUkVDT05ESVRJT04iLCJBQk9SVEVEIiwiT1VUX09GX1JBTkdFIiwiVU5JTVBMRU1FTlRFRCIsIlVOQVZBSUxBQkxFIiwiREFUQV9MT1NTIiwiRmlyZXN0b3JlRXJyb3IiLCJtYWtlQ29uc3RydWN0b3JQcml2YXRlIiwiY2xzIiwib3B0aW9uYWxNZXNzYWdlIiwiUHVibGljQ29uc3RydWN0b3IiLCJzdGF0aWNQcm9wZXJ0eSIsImRlZmF1bHRlZCIsImRlZmF1bHRWYWx1ZSIsImZvckVhY2hOdW1iZXIiLCJudW0iLCJOdW1iZXIiLCJpc05hTiIsInZhbGlkYXRlTm9BcmdzIiwiZnVuY3Rpb25OYW1lIiwiZm9ybWF0UGx1cmFsIiwidmFsaWRhdGVFeGFjdE51bWJlck9mQXJncyIsIm51bWJlck9mQXJncyIsInZhbGlkYXRlQXRMZWFzdE51bWJlck9mQXJncyIsIm1pbk51bWJlck9mQXJncyIsInZhbGlkYXRlQmV0d2Vlbk51bWJlck9mQXJncyIsIm1heE51bWJlck9mQXJncyIsInZhbGlkYXRlQXJnVHlwZSIsInBvc2l0aW9uIiwiYXJndW1lbnQiLCJ2YWxpZGF0ZVR5cGUiLCJvcmRpbmFsIiwidmFsaWRhdGVPcHRpb25hbEFyZ1R5cGUiLCJ2YWxpZGF0ZU5hbWVkVHlwZSIsIm9wdGlvbk5hbWUiLCJ2YWxpZGF0ZU5hbWVkT3B0aW9uYWxUeXBlIiwidmFsaWRhdGVPcHRpb25hbEFycmF5RWxlbWVudHMiLCJ0eXBlRGVzY3JpcHRpb24iLCJ2YWxpZGF0b3IiLCJ2YWx1ZURlc2NyaXB0aW9uIiwidmFsaWRhdGVBcnJheUVsZW1lbnRzIiwidmFsaWRhdGVOYW1lZE9wdGlvbmFsUHJvcGVydHlFcXVhbHMiLCJpbnB1dE5hbWUiLCJleHBlY3RlZCIsImV4cGVjdGVkRGVzY3JpcHRpb24iLCJleHBlY3RlZF8xIiwiYWN0dWFsRGVzY3JpcHRpb24iLCJ2YWxpZGF0ZU5hbWVkUHJvcGVydHlFcXVhbHMiLCJ2YWxpZGF0ZVN0cmluZ0VudW0iLCJlbnVtcyIsInNvbWUiLCJlbGVtZW50IiwiaXNQbGFpbk9iamVjdCIsImRlc2NyaXB0aW9uIiwiZ2V0UHJvdG90eXBlT2YiLCJzdWJzdHJpbmciLCJjdXN0b21PYmplY3ROYW1lIiwicmVzdWx0cyIsImV4ZWMiLCJ0cnlHZXRDdXN0b21PYmplY3RUeXBlIiwidmFsaWRhdGVEZWZpbmVkIiwidmFsaWRhdGVPcHRpb25OYW1lcyIsIm9wdGlvbk5hbWVzIiwiaW52YWxpZENsYXNzRXJyb3IiLCJ2YWxpZGF0ZVBvc2l0aXZlTnVtYmVyIiwiQXV0b0lkIiwibmV3SWQiLCJjaGFycyIsImF1dG9JZCIsInJhbmRvbSIsInByaW1pdGl2ZUNvbXBhcmF0b3IiLCJsZWZ0IiwicmlnaHQiLCJhcnJheUVxdWFscyIsImlzRXF1YWwiLCJpbW1lZGlhdGVTdWNjZXNzb3IiLCJhc3NlcnRVaW50OEFycmF5QXZhaWxhYmxlIiwiVWludDhBcnJheSIsImFzc2VydEJhc2U2NEF2YWlsYWJsZSIsImJhc2U2NEF2YWlsYWJsZSIsIlRpbWVySWQiLCJCbG9iIiwiYmluYXJ5U3RyaW5nIiwiX2JpbmFyeVN0cmluZyIsImZyb21CYXNlNjRTdHJpbmciLCJmcm9tVWludDhBcnJheSIsImFycmF5IiwiY2hhciIsInRvQmFzZTY0IiwidG9VaW50OEFycmF5IiwiYnVmZmVyIiwib3RoZXIiLCJfY29tcGFyZVRvIiwiUHVibGljQmxvYiIsIkRhdGFiYXNlSW5mbyIsImRhdGFiYXNlSWQiLCJwZXJzaXN0ZW5jZUtleSIsImhvc3QiLCJzc2wiLCJmb3JjZUxvbmdQb2xsaW5nIiwiREVGQVVMVF9EQVRBQkFTRV9OQU1FIiwiRGF0YWJhc2VJZCIsInByb2plY3RJZCIsImRhdGFiYXNlIiwiY29tcGFyZVRvIiwiTGlzdGVuU2VxdWVuY2UiLCJwcmV2aW91c1ZhbHVlIiwic2VxdWVuY2VOdW1iZXJTeW5jZXIiLCJzZXF1ZW5jZU51bWJlckhhbmRsZXIiLCJzZXF1ZW5jZU51bWJlciIsInNldFByZXZpb3VzVmFsdWUiLCJ3cml0ZU5ld1NlcXVlbmNlTnVtYmVyIiwid3JpdGVTZXF1ZW5jZU51bWJlciIsImV4dGVybmFsUHJldmlvdXNWYWx1ZSIsIm1heCIsIm5leHRWYWx1ZSIsIklOVkFMSUQiLCJCYXNlUGF0aCIsInNlZ21lbnRzIiwibGVuIiwiY29tcGFyYXRvciIsImNoaWxkIiwibmFtZU9yUGF0aCIsImxpbWl0Iiwic2VnbWVudCIsImNvbnN0cnVjdCIsInBvcEZpcnN0Iiwic2l6ZSIsInBvcExhc3QiLCJmaXJzdFNlZ21lbnQiLCJsYXN0U2VnbWVudCIsImlzUHJlZml4T2YiLCJpc0ltbWVkaWF0ZVBhcmVudE9mIiwicG90ZW50aWFsQ2hpbGQiLCJlbmQiLCJwMSIsInAyIiwibWluIiwiUmVzb3VyY2VQYXRoIiwiY2Fub25pY2FsU3RyaW5nIiwiZnJvbVN0cmluZyIsInBhdGgiLCJFTVBUWV9QQVRIIiwiaWRlbnRpZmllclJlZ0V4cCIsIkZpZWxkUGF0aCIsImlzVmFsaWRJZGVudGlmaWVyIiwiaXNLZXlGaWVsZCIsImtleUZpZWxkIiwiZnJvbVNlcnZlckZvcm1hdCIsImN1cnJlbnQiLCJhZGRDdXJyZW50U2VnbWVudCIsImluQmFja3RpY2tzIiwiRG9jdW1lbnRLZXkiLCJpc0RvY3VtZW50S2V5IiwiaGFzQ29sbGVjdGlvbklkIiwiY29sbGVjdGlvbklkIiwiazEiLCJrMiIsImZyb21TZWdtZW50cyIsImZyb21QYXRoU3RyaW5nIiwiRU1QVFkiLCJEZWxheWVkT3BlcmF0aW9uIiwiYXN5bmNRdWV1ZSIsInRpbWVySWQiLCJ0YXJnZXRUaW1lTXMiLCJyZW1vdmFsQ2FsbGJhY2siLCJjcmVhdGVBbmRTY2hlZHVsZSIsImRlbGF5TXMiLCJkZWxheWVkT3AiLCJzdGFydCIsInRpbWVySGFuZGxlIiwic2V0VGltZW91dCIsImhhbmRsZURlbGF5RWxhcHNlZCIsInNraXBEZWxheSIsImNhbmNlbCIsInJlYXNvbiIsImNsZWFyVGltZW91dCIsImVucXVldWVBbmRGb3JnZXQiLCJBc3luY1F1ZXVlIiwidGFpbCIsIl9pc1NodXR0aW5nRG93biIsImRlbGF5ZWRPcGVyYXRpb25zIiwib3BlcmF0aW9uSW5Qcm9ncmVzcyIsInRpbWVySWRzVG9Ta2lwIiwiZW5xdWV1ZSIsImVucXVldWVBbmRGb3JnZXRFdmVuQWZ0ZXJTaHV0ZG93biIsInZlcmlmeU5vdEZhaWxlZCIsImVucXVldWVJbnRlcm5hbCIsImVucXVldWVFdmVuQWZ0ZXJTaHV0ZG93biIsImVucXVldWVBbmRJbml0aWF0ZVNodXRkb3duIiwibmV3VGFpbCIsImVycm9yJDEiLCJzdGFjayIsImVucXVldWVBZnRlckRlbGF5IiwicmVtb3ZlZE9wIiwicmVtb3ZlRGVsYXllZE9wZXJhdGlvbiIsInZlcmlmeU9wZXJhdGlvbkluUHJvZ3Jlc3MiLCJkcmFpbiIsImNvbnRhaW5zRGVsYXllZE9wZXJhdGlvbiIsInJ1bkRlbGF5ZWRPcGVyYXRpb25zRWFybHkiLCJsYXN0VGltZXJJZCIsIkFsbCIsInNvcnQiLCJza2lwRGVsYXlzRm9yVGltZXJJZCIsImVzY2FwZUNoYXIiLCJlbmNvZGVkU2VwYXJhdG9yQ2hhciIsImVuY29kZWROdWwiLCJlbmNvZGVkRXNjYXBlIiwiZW5jb2RlIiwiZW5jb2RlU2VwYXJhdG9yIiwiZW5jb2RlU2VnbWVudCIsInJlc3VsdEJ1ZiIsImxhc3RSZWFzb25hYmxlRXNjYXBlSW5kZXgiLCJzZWdtZW50QnVpbGRlciIsImN1cnJlbnRQaWVjZSIsIlRpbWVzdGFtcCIsInNlY29uZHMiLCJuYW5vc2Vjb25kcyIsImZyb21NaWxsaXMiLCJmcm9tRGF0ZSIsImRhdGUiLCJtaWxsaXNlY29uZHMiLCJ0b0RhdGUiLCJ0b01pbGxpcyIsIlNuYXBzaG90VmVyc2lvbiIsInRpbWVzdGFtcCIsImZyb21NaWNyb3NlY29uZHMiLCJmcm9tVGltZXN0YW1wIiwiZm9yRGVsZXRlZERvYyIsIk1JTiIsInRvTWljcm9zZWNvbmRzIiwidG9UaW1lc3RhbXAiLCJTb3J0ZWRNYXAiLCJyb290IiwiTExSQk5vZGUiLCJjb3B5IiwiQkxBQ0siLCJub2RlIiwiY21wIiwicHJ1bmVkTm9kZXMiLCJtaW5LZXkiLCJtYXhLZXkiLCJpbm9yZGVyVHJhdmVyc2FsIiwiYWN0aW9uIiwiZGVzY3JpcHRpb25zIiwicmV2ZXJzZVRyYXZlcnNhbCIsImdldEl0ZXJhdG9yIiwiU29ydGVkTWFwSXRlcmF0b3IiLCJnZXRJdGVyYXRvckZyb20iLCJnZXRSZXZlcnNlSXRlcmF0b3IiLCJnZXRSZXZlcnNlSXRlcmF0b3JGcm9tIiwic3RhcnRLZXkiLCJpc1JldmVyc2UiLCJub2RlU3RhY2siLCJnZXROZXh0IiwiaGFzTmV4dCIsInBlZWsiLCJjb2xvciIsIlJFRCIsImZpeFVwIiwicmVtb3ZlTWluIiwiaXNSZWQiLCJtb3ZlUmVkTGVmdCIsInNtYWxsZXN0Iiwicm90YXRlUmlnaHQiLCJtb3ZlUmVkUmlnaHQiLCJyb3RhdGVMZWZ0IiwiY29sb3JGbGlwIiwibmwiLCJuciIsImNoZWNrTWF4RGVwdGgiLCJibGFja0RlcHRoIiwiY2hlY2siLCJwb3ciLCJMTFJCRW1wdHlOb2RlIiwiU29ydGVkU2V0IiwiZnJvbU1hcEtleXMiLCJhZGQiLCJlbGVtIiwiZmlyc3QiLCJsYXN0IiwiY2IiLCJmb3JFYWNoSW5SYW5nZSIsInJhbmdlIiwiaXRlciIsImZvckVhY2hXaGlsZSIsImZpcnN0QWZ0ZXJPckVxdWFsIiwiU29ydGVkU2V0SXRlcmF0b3IiLCJ1bmlvbldpdGgiLCJ0aGlzSXQiLCJvdGhlckl0IiwidGhpc0VsZW0iLCJvdGhlckVsZW0iLCJ0YXJnZXRJZCIsIkVNUFRZX01BWUJFX0RPQ1VNRU5UX01BUCIsIm1heWJlRG9jdW1lbnRNYXAiLCJudWxsYWJsZU1heWJlRG9jdW1lbnRNYXAiLCJFTVBUWV9ET0NVTUVOVF9NQVAiLCJkb2N1bWVudE1hcCIsIkVNUFRZX0RPQ1VNRU5UX1ZFUlNJT05fTUFQIiwiZG9jdW1lbnRWZXJzaW9uTWFwIiwiRU1QVFlfRE9DVU1FTlRfS0VZX1NFVCIsImRvY3VtZW50S2V5U2V0Iiwia2V5c18xIiwiRU1QVFlfVEFSR0VUX0lEX1NFVCIsInRhcmdldElkU2V0IiwiTXV0YXRpb25CYXRjaCIsImJhdGNoSWQiLCJsb2NhbFdyaXRlVGltZSIsImJhc2VNdXRhdGlvbnMiLCJtdXRhdGlvbnMiLCJhcHBseVRvUmVtb3RlRG9jdW1lbnQiLCJkb2NLZXkiLCJtYXliZURvYyIsImJhdGNoUmVzdWx0IiwibXV0YXRpb25SZXN1bHRzIiwibXV0YXRpb24iLCJtdXRhdGlvblJlc3VsdCIsImFwcGx5VG9Mb2NhbFZpZXciLCJiYXNlRG9jIiwiYXBwbHlUb0xvY2FsRG9jdW1lbnRTZXQiLCJtYXliZURvY3MiLCJtdXRhdGVkRG9jdW1lbnRzIiwibXV0YXRlZERvY3VtZW50IiwicmVkdWNlIiwiTXV0YXRpb25CYXRjaFJlc3VsdCIsImJhdGNoIiwiY29tbWl0VmVyc2lvbiIsInN0cmVhbVRva2VuIiwiZG9jVmVyc2lvbnMiLCJ2ZXJzaW9uTWFwIiwiUGVyc2lzdGVuY2VQcm9taXNlIiwibmV4dENhbGxiYWNrIiwiY2F0Y2hDYWxsYmFjayIsImlzRG9uZSIsImNhbGxiYWNrQXR0YWNoZWQiLCJuZXh0Rm4iLCJjYXRjaEZuIiwid3JhcEZhaWx1cmUiLCJ3cmFwU3VjY2VzcyIsInRvUHJvbWlzZSIsIndyYXBVc2VyRnVuY3Rpb24iLCJ3YWl0Rm9yIiwiZXhwZWN0ZWRDb3VudCIsInJlc29sdmVkQ291bnQiLCJvciIsInByZWRpY2F0ZXMiLCJwcmVkaWNhdGUiLCJpc1RydWUiLCJwcmVkaWNhdGVzXzEiLCJjb2xsZWN0aW9uIiwicHJvbWlzZXMiLCJMT0dfVEFHIiwiU2ltcGxlRGIiLCJnZXRJT1NWZXJzaW9uIiwib3Blbk9yQ3JlYXRlIiwic2NoZW1hQ29udmVydGVyIiwiaXNBdmFpbGFibGUiLCJvcGVuIiwib25ibG9ja2VkIiwiY3JlYXRlT3JVcGdyYWRlIiwiU0NIRU1BX1ZFUlNJT04iLCJ3cmFwUmVxdWVzdCIsImRlbGV0ZURhdGFiYXNlIiwiaXNNb2NrUGVyc2lzdGVuY2UiLCJ1YSIsImlPU1ZlcnNpb24iLCJpc1Vuc3VwcG9ydGVkSU9TIiwiYW5kcm9pZFZlcnNpb24iLCJnZXRBbmRyb2lkVmVyc2lvbiIsImlzVW5zdXBwb3J0ZWRBbmRyb2lkIiwiVVNFX01PQ0tfUEVSU0lTVEVOQ0UiLCJnZXRTdG9yZSIsInR4biIsImlPU1ZlcnNpb25SZWdleCIsImFuZHJvaWRWZXJzaW9uUmVnZXgiLCJzZXRWZXJzaW9uQ2hhbmdlTGlzdGVuZXIiLCJ2ZXJzaW9uQ2hhbmdlTGlzdGVuZXIiLCJvbnZlcnNpb25jaGFuZ2UiLCJydW5UcmFuc2FjdGlvbiIsIm9iamVjdFN0b3JlcyIsInRyYW5zYWN0aW9uRm4iLCJyZWFkb25seSIsImlkZW1wb3RlbnQiLCJhdHRlbXB0TnVtYmVyIiwidGhpc18xIiwic3RhdGVfMSIsInN0YXJ0c1dpdGgiLCJlbmRzV2l0aCIsInRyYW5zYWN0aW9uRm5SZXN1bHQiLCJlcnJvcl8xIiwicmV0cnlhYmxlIiwiU2ltcGxlRGJUcmFuc2FjdGlvbiIsImFib3J0IiwiY29tcGxldGlvblByb21pc2UiLCJJdGVyYXRpb25Db250cm9sbGVyIiwiZGJDdXJzb3IiLCJzaG91bGRTdG9wIiwibmV4dEtleSIsInNraXAiLCJhYm9ydGVkIiwiY29tcGxldGlvbkRlZmVycmVkIiwiY2hlY2tGb3JBbmRSZXBvcnRpT1NFcnJvciIsIm9iamVjdFN0b3JlTmFtZXMiLCJzdG9yZU5hbWUiLCJTaW1wbGVEYlN0b3JlIiwicHV0Iiwia2V5T3JWYWx1ZSIsImxvYWRBbGwiLCJpbmRleE9yUmFuZ2UiLCJkZWxldGVBbGwiLCJrZXlzT25seSIsImNvbnRyb2wiLCJpdGVyYXRlIiwib3B0aW9uc09yQ2FsbGJhY2siLCJpdGVyYXRlU2VyaWFsIiwiY3Vyc29yUmVxdWVzdCIsInByaW1hcnlLZXkiLCJzaG91bGRDb250aW51ZSIsImNvbnRyb2xsZXIiLCJ1c2VyUmVzdWx0IiwidXNlclByb21pc2UiLCJza2lwVG9LZXkiLCJpbmRleE5hbWUiLCJkaXJlY3Rpb24iLCJyZXZlcnNlIiwib3BlbktleUN1cnNvciIsIm9wZW5DdXJzb3IiLCJyZXBvcnRlZElPU0Vycm9yIiwiSU9TX0VSUk9SIiwibmV3RXJyb3JfMSIsIkluZGV4ZWREYk11dGF0aW9uUXVldWUiLCJ1c2VySWQiLCJzZXJpYWxpemVyIiwiaW5kZXhNYW5hZ2VyIiwicmVmZXJlbmNlRGVsZWdhdGUiLCJkb2N1bWVudEtleXNCeUJhdGNoSWQiLCJmb3JVc2VyIiwidXNlciIsInVpZCIsImlzQXV0aGVudGljYXRlZCIsImNoZWNrRW1wdHkiLCJlbXB0eSIsIklEQktleVJhbmdlIiwiYm91bmQiLCJORUdBVElWRV9JTkZJTklUWSIsIlBPU0lUSVZFX0lORklOSVRZIiwibXV0YXRpb25zU3RvcmUiLCJEYk11dGF0aW9uQmF0Y2giLCJ1c2VyTXV0YXRpb25zSW5kZXgiLCJhY2tub3dsZWRnZUJhdGNoIiwiZ2V0TXV0YXRpb25RdWV1ZU1ldGFkYXRhIiwibGFzdFN0cmVhbVRva2VuIiwiY29udmVydFN0cmVhbVRva2VuIiwibXV0YXRpb25RdWV1ZXNTdG9yZSIsImdldExhc3RTdHJlYW1Ub2tlbiIsInNldExhc3RTdHJlYW1Ub2tlbiIsImFkZE11dGF0aW9uQmF0Y2giLCJkb2N1bWVudFN0b3JlIiwiZG9jdW1lbnRNdXRhdGlvbnNTdG9yZSIsIm11dGF0aW9uU3RvcmUiLCJkYkJhdGNoIiwidG9EYk11dGF0aW9uQmF0Y2giLCJjb2xsZWN0aW9uUGFyZW50cyIsIm11dGF0aW9uc18xIiwiaW5kZXhLZXkiLCJEYkRvY3VtZW50TXV0YXRpb24iLCJQTEFDRUhPTERFUiIsInBhcmVudCIsImFkZFRvQ29sbGVjdGlvblBhcmVudEluZGV4IiwiYWRkT25Db21taXR0ZWRMaXN0ZW5lciIsImxvb2t1cE11dGF0aW9uQmF0Y2giLCJmcm9tRGJNdXRhdGlvbkJhdGNoIiwibG9va3VwTXV0YXRpb25LZXlzIiwiZ2V0TmV4dE11dGF0aW9uQmF0Y2hBZnRlckJhdGNoSWQiLCJuZXh0QmF0Y2hJZCIsImxvd2VyQm91bmQiLCJmb3VuZEJhdGNoIiwiZ2V0SGlnaGVzdFVuYWNrbm93bGVkZ2VkQmF0Y2hJZCIsInVwcGVyQm91bmQiLCJnZXRBbGxNdXRhdGlvbkJhdGNoZXMiLCJkYkJhdGNoZXMiLCJnZXRBbGxNdXRhdGlvbkJhdGNoZXNBZmZlY3RpbmdEb2N1bWVudEtleSIsImRvY3VtZW50S2V5IiwiaW5kZXhQcmVmaXgiLCJwcmVmaXhGb3JQYXRoIiwiaW5kZXhTdGFydCIsInVzZXJJRCIsImVuY29kZWRQYXRoIiwiZ2V0QWxsTXV0YXRpb25CYXRjaGVzQWZmZWN0aW5nRG9jdW1lbnRLZXlzIiwiZG9jdW1lbnRLZXlzIiwidW5pcXVlQmF0Y2hJRHMiLCJiYXRjaElEIiwibG9va3VwTXV0YXRpb25CYXRjaGVzIiwiZ2V0QWxsTXV0YXRpb25CYXRjaGVzQWZmZWN0aW5nUXVlcnkiLCJpc0RvY3VtZW50UXVlcnkiLCJpc0NvbGxlY3Rpb25Hcm91cFF1ZXJ5IiwicXVlcnlQYXRoIiwiaW1tZWRpYXRlQ2hpbGRyZW5MZW5ndGgiLCJiYXRjaElEcyIsInJlbW92ZU11dGF0aW9uQmF0Y2giLCJzaW1wbGVEYlRyYW5zYWN0aW9uIiwicmVtb3ZlZERvY3VtZW50cyIsInJlbW92ZUNhY2hlZE11dGF0aW9uS2V5cyIsInJlbW92ZU11dGF0aW9uUmVmZXJlbmNlIiwicGVyZm9ybUNvbnNpc3RlbmN5Q2hlY2siLCJzdGFydFJhbmdlIiwicHJlZml4Rm9yVXNlciIsImRhbmdsaW5nTXV0YXRpb25SZWZlcmVuY2VzIiwiY29udGFpbnNLZXkiLCJtdXRhdGlvblF1ZXVlQ29udGFpbnNLZXkiLCJEYk11dGF0aW9uUXVldWUiLCJrZXlQYXRoIiwiaW5kZXhUeG4iLCJvbmx5IiwibnVtRGVsZXRlZCIsInJlbW92ZVByb21pc2UiLCJJbmRleGVkRGJQZXJzaXN0ZW5jZSIsIkdlbmVyYXRvcklkcyIsIlJFU0VSVkVEX0JJVFMiLCJUYXJnZXRJZEdlbmVyYXRvciIsImdlbmVyYXRvcklkIiwic2VlZCIsInNlZWsiLCJuZXh0SWQiLCJhZnRlciIsImZvclRhcmdldENhY2hlIiwiUXVlcnlDYWNoZSIsImZvclN5bmNFbmdpbmUiLCJTeW5jRW5naW5lIiwiSW5kZXhlZERiVGFyZ2V0Q2FjaGUiLCJ0YXJnZXRJZEdlbmVyYXRvciIsImFsbG9jYXRlVGFyZ2V0SWQiLCJyZXRyaWV2ZU1ldGFkYXRhIiwiaGlnaGVzdFRhcmdldElkIiwic2F2ZU1ldGFkYXRhIiwiZ2V0TGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbiIsImxhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24iLCJnZXRIaWdoZXN0U2VxdWVuY2VOdW1iZXIiLCJnZXRIaWdoZXN0TGlzdGVuU2VxdWVuY2VOdW1iZXIiLCJzZXRUYXJnZXRzTWV0YWRhdGEiLCJoaWdoZXN0TGlzdGVuU2VxdWVuY2VOdW1iZXIiLCJhZGRUYXJnZXREYXRhIiwidGFyZ2V0RGF0YSIsInNhdmVUYXJnZXREYXRhIiwidGFyZ2V0Q291bnQiLCJ1cGRhdGVNZXRhZGF0YUZyb21UYXJnZXREYXRhIiwidXBkYXRlVGFyZ2V0RGF0YSIsInJlbW92ZVRhcmdldERhdGEiLCJyZW1vdmVNYXRjaGluZ0tleXNGb3JUYXJnZXRJZCIsInRhcmdldHNTdG9yZSIsInJlbW92ZVRhcmdldHMiLCJhY3RpdmVUYXJnZXRJZHMiLCJmcm9tRGJUYXJnZXQiLCJmb3JFYWNoVGFyZ2V0IiwiRGJUYXJnZXRHbG9iYWwiLCJ0b0RiVGFyZ2V0IiwidXBkYXRlZCIsImdldFRhcmdldENvdW50IiwiZ2V0VGFyZ2V0RGF0YSIsImNhbm9uaWNhbElkIiwiRGJUYXJnZXQiLCJxdWVyeVRhcmdldHNJbmRleE5hbWUiLCJmb3VuZCIsImFkZE1hdGNoaW5nS2V5cyIsImRvY3VtZW50VGFyZ2V0U3RvcmUiLCJEYlRhcmdldERvY3VtZW50IiwiYWRkUmVmZXJlbmNlIiwicmVtb3ZlTWF0Y2hpbmdLZXlzIiwicmVtb3ZlUmVmZXJlbmNlIiwiZ2V0TWF0Y2hpbmdLZXlzRm9yVGFyZ2V0SWQiLCJkb2N1bWVudFRhcmdldHNJbmRleCIsImdldFRhcmdldERhdGFGb3JUYXJnZXQiLCJ0YXJnZXRHbG9iYWwiLCJNdXRhdGlvblR5cGUiLCJGaWVsZE1hc2siLCJmaWVsZHMiLCJmcm9tU2V0IiwiZnJvbUFycmF5IiwiZmllbGRzQXNTZXQiLCJmaWVsZFBhdGgiLCJjb3ZlcnMiLCJmaWVsZE1hc2tQYXRoIiwiRmllbGRUcmFuc2Zvcm0iLCJmaWVsZCIsInRyYW5zZm9ybSIsIk11dGF0aW9uUmVzdWx0IiwidHJhbnNmb3JtUmVzdWx0cyIsIlR5cGVPcmRlciIsIlNlcnZlclRpbWVzdGFtcEJlaGF2aW9yIiwiUHJlY29uZGl0aW9uIiwidXBkYXRlVGltZSIsImV4aXN0cyIsImlzVmFsaWRGb3IiLCJEb2N1bWVudCIsImlzTm9uZSIsIk5PTkUiLCJNdXRhdGlvbiIsInZlcmlmeUtleU1hdGNoZXMiLCJnZXRQb3N0TXV0YXRpb25WZXJzaW9uIiwiU2V0TXV0YXRpb24iLCJwcmVjb25kaXRpb24iLCJTZXQiLCJoYXNDb21taXR0ZWRNdXRhdGlvbnMiLCJoYXNMb2NhbE11dGF0aW9ucyIsImV4dHJhY3RCYXNlVmFsdWUiLCJQYXRjaE11dGF0aW9uIiwiZmllbGRNYXNrIiwiUGF0Y2giLCJVbmtub3duRG9jdW1lbnQiLCJuZXdEYXRhIiwicGF0Y2hEb2N1bWVudCIsIk9iamVjdFZhbHVlIiwicGF0Y2hPYmplY3QiLCJuZXdWYWx1ZSIsIlRyYW5zZm9ybU11dGF0aW9uIiwiZmllbGRUcmFuc2Zvcm1zIiwiVHJhbnNmb3JtIiwiZG9jIiwicmVxdWlyZURvY3VtZW50Iiwic2VydmVyVHJhbnNmb3JtUmVzdWx0cyIsInRyYW5zZm9ybU9iamVjdCIsImxvY2FsVHJhbnNmb3JtUmVzdWx0cyIsImJhc2VPYmplY3QiLCJmaWVsZFRyYW5zZm9ybSIsImV4aXN0aW5nVmFsdWUiLCJjb2VyY2VkVmFsdWUiLCJjb21wdXRlQmFzZVZhbHVlIiwiRGVsZXRlTXV0YXRpb24iLCJEZWxldGUiLCJOb0RvY3VtZW50IiwiRmllbGRWYWx1ZU9wdGlvbnMiLCJzZXJ2ZXJUaW1lc3RhbXBCZWhhdmlvciIsInRpbWVzdGFtcHNJblNuYXBzaG90cyIsImZyb21TbmFwc2hvdE9wdGlvbnMiLCJzZXJ2ZXJUaW1lc3RhbXBzIiwiRXN0aW1hdGUiLCJQcmV2aW91cyIsIkRlZmF1bHQiLCJGaWVsZFZhbHVlIiwiZGVmYXVsdENvbXBhcmVUbyIsInR5cGVPcmRlciIsIk51bGxWYWx1ZSIsImludGVybmFsVmFsdWUiLCJJTlNUQU5DRSIsIkJvb2xlYW5WYWx1ZSIsIm9mIiwiVFJVRSIsIkZBTFNFIiwiTnVtYmVyVmFsdWUiLCJudW1lcmljRXF1YWxzIiwiSW50ZWdlclZhbHVlIiwiRG91YmxlVmFsdWUiLCJOQU4iLCJOYU4iLCJJbmZpbml0eSIsIlN0cmluZ1ZhbHVlIiwiVGltZXN0YW1wVmFsdWUiLCJTZXJ2ZXJUaW1lc3RhbXBWYWx1ZSIsIkJsb2JWYWx1ZSIsIlJlZlZhbHVlIiwiR2VvUG9pbnRWYWx1ZSIsIml0MSIsIml0MiIsIm5leHQxIiwibmV4dDIiLCJ0byIsInNldENoaWxkIiwibmV3Q2hpbGQiLCJwYXRoU2VnbWVudCIsImN1cnJlbnRQYXRoIiwibmVzdGVkRmllbGRzIiwibmVzdGVkUGF0aCIsImNoaWxkTmFtZSIsIkFycmF5VmFsdWUiLCJtaW5MZW5ndGgiLCJNYXliZURvY3VtZW50IiwiY29tcGFyZUJ5S2V5IiwiZDEiLCJkMiIsIm9iamVjdFZhbHVlIiwicHJvdG8iLCJjb252ZXJ0ZXIiLCJmaWVsZFZhbHVlQ2FjaGUiLCJjYW5vbmljYWxQYXRoIiwiZmllbGRWYWx1ZSIsInByb3RvVmFsdWUiLCJnZXRQcm90b0ZpZWxkIiwicmVzdWx0XzEiLCJtYXBWYWx1ZSIsImNvbXBhcmVCeUZpZWxkIiwidjEiLCJ2MiIsIk9iamVjdE1hcCIsIm1hcEtleUZuIiwiaW5uZXIiLCJtYXRjaGVzIiwibWF0Y2hlc18xIiwib3RoZXJLZXkiLCJlbnRyaWVzXzEiLCJSZW1vdGVEb2N1bWVudENoYW5nZUJ1ZmZlciIsImNoYW5nZXMiLCJjaGFuZ2VzQXBwbGllZCIsIl9yZWFkVGltZSIsImFkZEVudHJ5IiwibWF5YmVEb2N1bWVudCIsInJlYWRUaW1lIiwiYXNzZXJ0Tm90QXBwbGllZCIsInJlbW92ZUVudHJ5IiwiZ2V0RW50cnkiLCJidWZmZXJlZEVudHJ5IiwiZ2V0RnJvbUNhY2hlIiwiZ2V0RW50cmllcyIsImdldEFsbEZyb21DYWNoZSIsImFwcGx5Q2hhbmdlcyIsIkluZGV4ZWREYlJlbW90ZURvY3VtZW50Q2FjaGUiLCJyZW1vdGVEb2N1bWVudHNTdG9yZSIsImRiS2V5IiwidXBkYXRlTWV0YWRhdGEiLCJzaXplRGVsdGEiLCJnZXRNZXRhZGF0YSIsImJ5dGVTaXplIiwic2V0TWV0YWRhdGEiLCJkYlJlbW90ZURvYyIsIm1heWJlRGVjb2RlRG9jdW1lbnQiLCJnZXRTaXplZEVudHJ5IiwiZGJEb2N1bWVudFNpemUiLCJmb3JFYWNoRGJFbnRyeSIsImdldFNpemVkRW50cmllcyIsInNpemVNYXAiLCJtYXliZURvY3VtZW50cyIsImtleUl0ZXIiLCJwb3RlbnRpYWxLZXlSYXciLCJwb3RlbnRpYWxLZXkiLCJnZXREb2N1bWVudHNNYXRjaGluZ1F1ZXJ5Iiwic2luY2VSZWFkVGltZSIsImltbWVkaWF0ZUNoaWxkcmVuUGF0aExlbmd0aCIsIml0ZXJhdGlvbk9wdGlvbnMiLCJjb2xsZWN0aW9uS2V5IiwicmVhZFRpbWVLZXkiLCJ0b0RiVGltZXN0YW1wS2V5IiwiRGJSZW1vdGVEb2N1bWVudCIsImNvbGxlY3Rpb25SZWFkVGltZUluZGV4IiwiZnJvbURiUmVtb3RlRG9jdW1lbnQiLCJnZXROZXdEb2N1bWVudENoYW5nZXMiLCJjaGFuZ2VkRG9jcyIsImxhc3RSZWFkVGltZSIsImRvY3VtZW50c1N0b3JlIiwicmVhZFRpbWVJbmRleCIsImZyb21EYlRpbWVzdGFtcEtleSIsImdldExhc3REb2N1bWVudENoYW5nZSIsImNoYW5nZWREb2MiLCJuZXdDaGFuZ2VCdWZmZXIiLCJ0cmFja1JlbW92YWxzIiwiZ2V0U2l6ZSIsImRvY3VtZW50R2xvYmFsU3RvcmUiLCJEYlJlbW90ZURvY3VtZW50R2xvYmFsIiwiY2xhc3NfMSIsImRvY3VtZW50Q2FjaGUiLCJkb2N1bWVudFNpemVzIiwicHJldmlvdXNTaXplIiwidG9EYlJlbW90ZURvY3VtZW50IiwiZGVsZXRlZERvYyIsImdldFJlc3VsdCIsInVua25vd25Eb2N1bWVudCIsIm5vRG9jdW1lbnQiLCJNZW1vcnlJbmRleE1hbmFnZXIiLCJjb2xsZWN0aW9uUGFyZW50SW5kZXgiLCJNZW1vcnlDb2xsZWN0aW9uUGFyZW50SW5kZXgiLCJjb2xsZWN0aW9uUGF0aCIsImdldENvbGxlY3Rpb25QYXJlbnRzIiwicGFyZW50UGF0aCIsImV4aXN0aW5nUGFyZW50cyIsImFkZGVkIiwiU2NoZW1hQ29udmVydGVyIiwiZnJvbVZlcnNpb24iLCJ0b1ZlcnNpb24iLCJEYlByaW1hcnlDbGllbnQiLCJjcmVhdGVQcmltYXJ5Q2xpZW50U3RvcmUiLCJhdXRvSW5jcmVtZW50IiwidXNlck11dGF0aW9uc0tleVBhdGgiLCJ1bmlxdWUiLCJjcmVhdGVNdXRhdGlvblF1ZXVlIiwiY3JlYXRlUXVlcnlDYWNoZSIsImNyZWF0ZVJlbW90ZURvY3VtZW50Q2FjaGUiLCJkZWxldGVPYmplY3RTdG9yZSIsImRyb3BRdWVyeUNhY2hlIiwiZ2xvYmFsU3RvcmUiLCJ3cml0ZUVtcHR5VGFyZ2V0R2xvYmFsRW50cnkiLCJleGlzdGluZ011dGF0aW9ucyIsInYzTXV0YXRpb25zU3RvcmUiLCJ3cml0ZUFsbCIsInVwZ3JhZGVNdXRhdGlvbkJhdGNoU2NoZW1hQW5kTWlncmF0ZURhdGEiLCJEYkNsaWVudE1ldGFkYXRhIiwiY3JlYXRlQ2xpZW50TWV0YWRhdGFTdG9yZSIsInJlbW92ZUFja25vd2xlZGdlZE11dGF0aW9ucyIsImNyZWF0ZURvY3VtZW50R2xvYmFsU3RvcmUiLCJhZGREb2N1bWVudEdsb2JhbCIsImVuc3VyZVNlcXVlbmNlTnVtYmVycyIsImNyZWF0ZUNvbGxlY3Rpb25QYXJlbnRJbmRleCIsImRyb3BSZW1vdGVEb2N1bWVudENoYW5nZXNTdG9yZSIsInJlbW90ZURvY3VtZW50U3RvcmUiLCJyZWFkVGltZUluZGV4UGF0aCIsImNvbGxlY3Rpb25SZWFkVGltZUluZGV4UGF0aCIsImNyZWF0ZVJlbW90ZURvY3VtZW50UmVhZFRpbWVJbmRleCIsImJ5dGVDb3VudCIsInF1ZXVlc1N0b3JlIiwicXVldWVzIiwicXVldWUiLCJsYXN0QWNrbm93bGVkZ2VkQmF0Y2hJZCIsImN1cnJlbnRTZXF1ZW5jZU51bWJlciIsImRvY1NlbnRpbmVsS2V5Iiwic2VudGluZWxLZXkiLCJtYXliZVNlbnRpbmVsIiwid3JpdGVTZW50aW5lbEtleSIsIkRiQ29sbGVjdGlvblBhcmVudCIsImNvbGxlY3Rpb25QYXJlbnRzU3RvcmUiLCJjYWNoZSIsInBhdGhTZWdtZW50cyIsIkRiVGltZXN0YW1wIiwib3duZXJJZCIsImFsbG93VGFiU3luY2hyb25pemF0aW9uIiwibGVhc2VUaW1lc3RhbXBNcyIsImxvY2FsV3JpdGVUaW1lTXMiLCJEYk5vRG9jdW1lbnQiLCJEYlVua25vd25Eb2N1bWVudCIsInJlc3VtZVRva2VuIiwibGFzdExpc3RlblNlcXVlbmNlTnVtYmVyIiwibGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbiIsInF1ZXJ5VGFyZ2V0c0tleVBhdGgiLCJkb2N1bWVudFRhcmdldHNLZXlQYXRoIiwiY2xpZW50SWQiLCJ1cGRhdGVUaW1lTXMiLCJuZXR3b3JrRW5hYmxlZCIsImluRm9yZWdyb3VuZCIsIlRhcmdldFB1cnBvc2UiLCJWM19TVE9SRVMiLCJWNF9TVE9SRVMiLCJWNl9TVE9SRVMiLCJBTExfU1RPUkVTIiwiSW5kZXhlZERiSW5kZXhNYW5hZ2VyIiwiY29sbGVjdGlvblBhcmVudHNDYWNoZSIsImNvbGxlY3Rpb25QYXJlbnQiLCJwYXJlbnRQYXRocyIsImVudHJ5IiwiVGFyZ2V0RGF0YSIsInB1cnBvc2UiLCJzbmFwc2hvdFZlcnNpb24iLCJ3aXRoU2VxdWVuY2VOdW1iZXIiLCJ3aXRoUmVzdW1lVG9rZW4iLCJ3aXRoTGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbiIsIkxvY2FsU2VyaWFsaXplciIsInJlbW90ZVNlcmlhbGl6ZXIiLCJyZW1vdGVEb2MiLCJmcm9tRG9jdW1lbnQiLCJmcm9tRGJUaW1lc3RhbXAiLCJkYlJlYWRUaW1lIiwidG9Eb2N1bWVudCIsInJlYWRUaW1lXzEiLCJ0b0RiVGltZXN0YW1wIiwicmVhZFRpbWVfMiIsImRiVGltZXN0YW1wS2V5IiwiZGJUaW1lc3RhbXAiLCJzZXJpYWxpemVkQmFzZU11dGF0aW9ucyIsInRvTXV0YXRpb24iLCJzZXJpYWxpemVkTXV0YXRpb25zIiwiZnJvbU11dGF0aW9uIiwidG9EYlJlc291cmNlUGF0aHMiLCJlbmNvZGVkS2V5cyIsImZyb21EYlJlc291cmNlUGF0aHMiLCJlbmNvZGVkUGF0aHMiLCJlbmNvZGVkUGF0aHNfMSIsImRiVGFyZ2V0IiwiZG9jdW1lbnRzIiwiZnJvbURvY3VtZW50c1RhcmdldCIsImZyb21RdWVyeVRhcmdldCIsIkxpc3RlbiIsInF1ZXJ5UHJvdG8iLCJkYkxhc3RMaW1ib0ZyZWVUaW1lc3RhbXAiLCJ0b0RvY3VtZW50c1RhcmdldCIsInRvUXVlcnlUYXJnZXQiLCJidWZmZXJFbnRyeUNvbXBhcmF0b3IiLCJhU2VxdWVuY2UiLCJhSW5kZXgiLCJiU2VxdWVuY2UiLCJiSW5kZXgiLCJzZXFDbXAiLCJSb2xsaW5nU2VxdWVuY2VOdW1iZXJCdWZmZXIiLCJtYXhFbGVtZW50cyIsInByZXZpb3VzSW5kZXgiLCJuZXh0SW5kZXgiLCJhZGRFbGVtZW50IiwiaGlnaGVzdFZhbHVlIiwiR0NfRElEX05PVF9SVU4iLCJkaWRSdW4iLCJzZXF1ZW5jZU51bWJlcnNDb2xsZWN0ZWQiLCJ0YXJnZXRzUmVtb3ZlZCIsImRvY3VtZW50c1JlbW92ZWQiLCJMcnVQYXJhbXMiLCJjYWNoZVNpemVDb2xsZWN0aW9uVGhyZXNob2xkIiwicGVyY2VudGlsZVRvQ29sbGVjdCIsIm1heGltdW1TZXF1ZW5jZU51bWJlcnNUb0NvbGxlY3QiLCJ3aXRoQ2FjaGVTaXplIiwiY2FjaGVTaXplIiwiREVGQVVMVF9DT0xMRUNUSU9OX1BFUkNFTlRJTEUiLCJERUZBVUxUX01BWF9TRVFVRU5DRV9OVU1CRVJTX1RPX0NPTExFQ1QiLCJDT0xMRUNUSU9OX0RJU0FCTEVEIiwiTUlOSU1VTV9DQUNIRV9TSVpFX0JZVEVTIiwiREVGQVVMVF9DQUNIRV9TSVpFX0JZVEVTIiwiREVGQVVMVCIsIkRJU0FCTEVEIiwiTHJ1U2NoZWR1bGVyIiwiZ2FyYmFnZUNvbGxlY3RvciIsImxvY2FsU3RvcmUiLCJoYXNSdW4iLCJnY1Rhc2siLCJzY2hlZHVsZUdDIiwic3RvcCIsImRlbGF5IiwiTHJ1R2FyYmFnZUNvbGxlY3Rpb24iLCJjb2xsZWN0R2FyYmFnZSIsImlnbm9yZUlmUHJpbWFyeUxlYXNlTG9zcyIsIkxydUdhcmJhZ2VDb2xsZWN0b3IiLCJkZWxlZ2F0ZSIsImNhbGN1bGF0ZVRhcmdldENvdW50IiwicGVyY2VudGlsZSIsImdldFNlcXVlbmNlTnVtYmVyQ291bnQiLCJudGhTZXF1ZW5jZU51bWJlciIsImZvckVhY2hPcnBoYW5lZERvY3VtZW50U2VxdWVuY2VOdW1iZXIiLCJtYXhWYWx1ZSIsInJlbW92ZU9ycGhhbmVkRG9jdW1lbnRzIiwiY29sbGVjdCIsImdldENhY2hlU2l6ZSIsInJ1bkdhcmJhZ2VDb2xsZWN0aW9uIiwidXBwZXJCb3VuZFNlcXVlbmNlTnVtYmVyIiwic2VxdWVuY2VOdW1iZXJzVG9Db2xsZWN0IiwiY291bnRlZFRhcmdldHNUcyIsImZvdW5kVXBwZXJCb3VuZFRzIiwicmVtb3ZlZFRhcmdldHNUcyIsInJlbW92ZWREb2N1bWVudHNUcyIsInN0YXJ0VHMiLCJzZXF1ZW5jZU51bWJlcnMiLCJudW1UYXJnZXRzUmVtb3ZlZCIsIlBlcnNpc3RlbmNlVHJhbnNhY3Rpb24iLCJvbkNvbW1pdHRlZExpc3RlbmVycyIsImxpc3RlbmVyIiwicmFpc2VPbkNvbW1pdHRlZEV2ZW50IiwiTE9HX1RBRyQxIiwiUFJJTUFSWV9MRUFTRV9MT1NUX0VSUk9SX01TRyIsIlBSSU1BUllfTEVBU0VfRVhDTFVTSVZFX0VSUk9SX01TRyIsIkluZGV4ZWREYlRyYW5zYWN0aW9uIiwibHJ1UGFyYW1zIiwiX3N0YXJ0ZWQiLCJpc1ByaW1hcnkiLCJ3aW5kb3dVbmxvYWRIYW5kbGVyIiwiZG9jdW1lbnRWaXNpYmlsaXR5SGFuZGxlciIsImNsaWVudE1ldGFkYXRhUmVmcmVzaGVyIiwibGFzdEdhcmJhZ2VDb2xsZWN0aW9uVGltZSIsInByaW1hcnlTdGF0ZUxpc3RlbmVyIiwiSW5kZXhlZERiTHJ1RGVsZWdhdGUiLCJkYk5hbWUiLCJNQUlOX0RBVEFCQVNFIiwidGFyZ2V0Q2FjaGUiLCJyZW1vdGVEb2N1bWVudENhY2hlIiwibG9jYWxTdG9yYWdlIiwid2ViU3RvcmFnZSIsImNyZWF0ZUluZGV4ZWREYlBlcnNpc3RlbmNlIiwicGVyc2lzdGVuY2UiLCJzdGFydGVkIiwic2ltcGxlRGIiLCJ1cGRhdGVDbGllbnRNZXRhZGF0YUFuZFRyeUJlY29tZVByaW1hcnkiLCJhdHRhY2hWaXNpYmlsaXR5SGFuZGxlciIsImF0dGFjaFdpbmRvd1VubG9hZEhvb2siLCJzY2hlZHVsZUNsaWVudE1ldGFkYXRhQW5kUHJpbWFyeUxlYXNlUmVmcmVzaGVzIiwibGlzdGVuU2VxdWVuY2UiLCJzZXRQcmltYXJ5U3RhdGVMaXN0ZW5lciIsInByaW1hcnlTdGF0ZSIsInNldERhdGFiYXNlRGVsZXRlZExpc3RlbmVyIiwiZGF0YWJhc2VEZWxldGVkTGlzdGVuZXIiLCJuZXdWZXJzaW9uIiwic2V0TmV0d29ya0VuYWJsZWQiLCJjbGllbnRNZXRhZGF0YVN0b3JlIiwidmVyaWZ5UHJpbWFyeUxlYXNlIiwic3VjY2VzcyIsImNhbkFjdEFzUHJpbWFyeSIsInJlbGVhc2VQcmltYXJ5TGVhc2VJZkhlbGQiLCJhY3F1aXJlT3JFeHRlbmRQcmltYXJ5TGVhc2UiLCJwcmltYXJ5Q2xpZW50U3RvcmUiLCJwcmltYXJ5Q2xpZW50IiwiaXNMb2NhbENsaWVudCIsInJlbW92ZUNsaWVudE1ldGFkYXRhIiwibWF5YmVHYXJiYWdlQ29sbGVjdE11bHRpQ2xpZW50U3RhdGUiLCJpc1dpdGhpbkFnZSIsIm1ldGFkYXRhU3RvcmUiLCJleGlzdGluZ0NsaWVudHMiLCJhY3RpdmUiLCJmaWx0ZXJBY3RpdmVDbGllbnRzIiwiaW5hY3RpdmUiLCJjbGllbnQiLCJpbmFjdGl2ZUNsaWVudCIsInJlbW92ZUl0ZW0iLCJ6b21iaWVkQ2xpZW50TG9jYWxTdG9yYWdlS2V5IiwiQ2xpZW50TWV0YWRhdGFSZWZyZXNoIiwiY3VycmVudFByaW1hcnkiLCJpc0NsaWVudFpvbWJpZWQiLCJmaW5kIiwib3RoZXJDbGllbnQiLCJvdGhlckNsaWVudEhhc0JldHRlck5ldHdvcmtTdGF0ZSIsIm90aGVyQ2xpZW50SGFzQmV0dGVyVmlzaWJpbGl0eSIsIm90aGVyQ2xpZW50SGFzU2FtZU5ldHdvcmtTdGF0ZSIsInNodXRkb3duIiwibWFya0NsaWVudFpvbWJpZWQiLCJkZXRhY2hWaXNpYmlsaXR5SGFuZGxlciIsImRldGFjaFdpbmRvd1VubG9hZEhvb2siLCJyZW1vdmVDbGllbnRab21iaWVkRW50cnkiLCJjbGllbnRzIiwiYWN0aXZpdHlUaHJlc2hvbGRNcyIsImdldEFjdGl2ZUNsaWVudHMiLCJjbGllbnRNZXRhZGF0YSIsImNsZWFyUGVyc2lzdGVuY2UiLCJnZXRNdXRhdGlvblF1ZXVlIiwiZ2V0VGFyZ2V0Q2FjaGUiLCJnZXRSZW1vdGVEb2N1bWVudENhY2hlIiwiZ2V0SW5kZXhNYW5hZ2VyIiwidHJhbnNhY3Rpb25PcGVyYXRpb24iLCJwZXJzaXN0ZW5jZVRyYW5zYWN0aW9uIiwic2ltcGxlRGJNb2RlIiwic2ltcGxlRGJUeG4iLCJob2xkc1ByaW1hcnlMZWFzZSIsInZlcmlmeUFsbG93VGFiU3luY2hyb25pemF0aW9uIiwibmV3UHJpbWFyeSIsImJ1aWxkU3RvcmFnZVByZWZpeCIsImRhdGFiYXNlSW5mbyIsImlzRGVmYXVsdERhdGFiYXNlIiwibWF4QWdlTXMiLCJhZGRFdmVudExpc3RlbmVyIiwidmlzaWJpbGl0eVN0YXRlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImlzWm9tYmllZCIsImdldEl0ZW0iLCJzZXRJdGVtIiwiWk9NQklFRF9DTElFTlRTX0tFWV9QUkVGSVgiLCJpc1ByaW1hcnlMZWFzZUxvc3RFcnJvciIsImluTWVtb3J5UGlucyIsImRvY0NvdW50UHJvbWlzZSIsIm9ycGhhbmVkRG9jbWVudENvdW50IiwiZG9jQ291bnQiLCJvcnBoYW5lZENvdW50IiwiZm9yRWFjaE9ycGhhbmVkRG9jdW1lbnQiLCJzZXRJbk1lbW9yeVBpbnMiLCJpc1Bpbm5lZCIsIm11dGF0aW9uUXVldWVzQ29udGFpbktleSIsImNoYW5nZUJ1ZmZlciIsImRvY3VtZW50Q291bnQiLCJyZW1vdmVUYXJnZXQiLCJ1cGRhdGVMaW1ib0RvY3VtZW50IiwibmV4dFBhdGgiLCJuZXh0VG9SZXBvcnQiLCJzZW50aW5lbFJvdyIsIk51bWJlckFzQW55IiwiTUlOX1NBRkVfSU5URUdFUiIsIk1BWF9TQUZFX0lOVEVHRVIiLCJpc0ludGVnZXIiLCJpc0Zpbml0ZSIsImlzTnVsbE9yVW5kZWZpbmVkIiwiaXNTYWZlSW50ZWdlciIsIkxpbWl0VHlwZSIsIlRhcmdldCIsImNvbGxlY3Rpb25Hcm91cCIsIm9yZGVyQnkiLCJmaWx0ZXJzIiwic3RhcnRBdCIsImVuZEF0IiwibWVtb2l6ZWRDYW5vbmljYWxJZCIsIlF1ZXJ5IiwiZXhwbGljaXRPcmRlckJ5IiwibGltaXRUeXBlIiwiRmlyc3QiLCJtZW1vaXplZE9yZGVyQnkiLCJtZW1vaXplZFRhcmdldCIsImFzc2VydFZhbGlkQm91bmQiLCJhdFBhdGgiLCJpbmVxdWFsaXR5RmllbGQiLCJnZXRJbmVxdWFsaXR5RmlsdGVyRmllbGQiLCJmaXJzdE9yZGVyQnlGaWVsZCIsImdldEZpcnN0T3JkZXJCeUZpZWxkIiwiS0VZX09SREVSSU5HX0FTQyIsIk9yZGVyQnkiLCJmb3VuZEtleU9yZGVyaW5nIiwibGFzdERpcmVjdGlvbiIsImRpciIsIkRpcmVjdGlvbiIsIkFTQ0VORElORyIsIktFWV9PUkRFUklOR19ERVNDIiwiYWRkRmlsdGVyIiwiRmllbGRGaWx0ZXIiLCJpc0luZXF1YWxpdHkiLCJuZXdGaWx0ZXJzIiwiYWRkT3JkZXJCeSIsIm5ld09yZGVyQnkiLCJ3aXRoTGltaXRUb0ZpcnN0Iiwid2l0aExpbWl0VG9MYXN0IiwiTGFzdCIsIndpdGhTdGFydEF0Iiwid2l0aEVuZEF0IiwiYXNDb2xsZWN0aW9uUXVlcnlBdFBhdGgiLCJtYXRjaGVzQWxsRG9jdW1lbnRzIiwidG9UYXJnZXQiLCJkb2NDb21wYXJhdG9yIiwiY29tcGFyZWRPbktleUZpZWxkIiwiY29tcCIsImNvbXBhcmUiLCJtYXRjaGVzUGF0aEFuZENvbGxlY3Rpb25Hcm91cCIsIm1hdGNoZXNPcmRlckJ5IiwibWF0Y2hlc0ZpbHRlcnMiLCJtYXRjaGVzQm91bmRzIiwiaGFzTGltaXRUb0ZpcnN0IiwiaGFzTGltaXRUb0xhc3QiLCJmaW5kRmlsdGVyT3BlcmF0b3IiLCJvcGVyYXRvcnMiLCJvcmRlckJ5cyIsIkRFU0NFTkRJTkciLCJCb3VuZCIsImJlZm9yZSIsImRvY1BhdGgiLCJzb3J0c0JlZm9yZURvY3VtZW50IiwiRmlsdGVyIiwiT3BlcmF0b3IiLCJMRVNTX1RIQU4iLCJMRVNTX1RIQU5fT1JfRVFVQUwiLCJFUVVBTCIsIkdSRUFURVJfVEhBTl9PUl9FUVVBTCIsIkdSRUFURVJfVEhBTiIsIkFSUkFZX0NPTlRBSU5TIiwiSU4iLCJBUlJBWV9DT05UQUlOU19BTlkiLCJldmVyeSIsIktleUZpZWxkSW5GaWx0ZXIiLCJLZXlGaWVsZEZpbHRlciIsIkFycmF5Q29udGFpbnNGaWx0ZXIiLCJJbkZpbHRlciIsIkFycmF5Q29udGFpbnNBbnlGaWx0ZXIiLCJtYXRjaGVzQ29tcGFyaXNvbiIsImNvbXBhcmlzb24iLCJyZWZWYWx1ZSIsImFycmF5VmFsdWUiLCJsaHNFbGVtIiwib3JkZXJCeUNvbXBvbmVudCIsImRvY1ZhbHVlIiwidGhpc1Bvc2l0aW9uIiwib3RoZXJQb3NpdGlvbiIsImlzS2V5T3JkZXJCeSIsIkluZGV4RnJlZVF1ZXJ5RW5naW5lIiwic2V0TG9jYWxEb2N1bWVudHNWaWV3IiwibG9jYWxEb2N1bWVudHMiLCJsb2NhbERvY3VtZW50c1ZpZXciLCJyZW1vdGVLZXlzIiwiZXhlY3V0ZUZ1bGxDb2xsZWN0aW9uU2NhbiIsImdldERvY3VtZW50cyIsInByZXZpb3VzUmVzdWx0cyIsImFwcGx5UXVlcnkiLCJuZWVkc1JlZmlsbCIsInVwZGF0ZWRSZXN1bHRzIiwicXVlcnlSZXN1bHRzIiwic29ydGVkUHJldmlvdXNSZXN1bHRzIiwibGltYm9GcmVlU25hcHNob3RWZXJzaW9uIiwiZG9jQXRMaW1pdEVkZ2UiLCJoYXNQZW5kaW5nV3JpdGVzIiwiTG9jYWxEb2N1bWVudHNWaWV3IiwibXV0YXRpb25RdWV1ZSIsImdldERvY3VtZW50IiwiYmF0Y2hlcyIsImdldERvY3VtZW50SW50ZXJuYWwiLCJpbkJhdGNoZXMiLCJpbkJhdGNoZXNfMSIsImFwcGx5TG9jYWxNdXRhdGlvbnNUb0RvY3VtZW50cyIsImRvY3MiLCJsb2NhbFZpZXciLCJiYXRjaGVzXzEiLCJnZXRMb2NhbFZpZXdPZkRvY3VtZW50cyIsImJhc2VEb2NzIiwiZ2V0RG9jdW1lbnRzTWF0Y2hpbmdEb2N1bWVudFF1ZXJ5IiwiZ2V0RG9jdW1lbnRzTWF0Y2hpbmdDb2xsZWN0aW9uR3JvdXBRdWVyeSIsImdldERvY3VtZW50c01hdGNoaW5nQ29sbGVjdGlvblF1ZXJ5IiwicGFyZW50cyIsImNvbGxlY3Rpb25RdWVyeSIsIm11dGF0aW9uQmF0Y2hlcyIsIm1hdGNoaW5nTXV0YXRpb25CYXRjaGVzIiwiYWRkTWlzc2luZ0Jhc2VEb2N1bWVudHMiLCJtZXJnZWREb2N1bWVudHMiLCJtdXRhdGlvbkJhdGNoZXNfMSIsIm11dGF0ZWREb2MiLCJleGlzdGluZ0RvY3VtZW50cyIsIm1pc3NpbmdCYXNlRG9jRW50cmllc0ZvclBhdGNoaW5nIiwibWF0Y2hpbmdNdXRhdGlvbkJhdGNoZXNfMSIsIm1pc3NpbmdCYXNlRG9jcyIsIlJlZmVyZW5jZVNldCIsInJlZnNCeUtleSIsIkRvY1JlZmVyZW5jZSIsInJlZnNCeVRhcmdldCIsImNvbXBhcmVCeVRhcmdldElkIiwicmVmIiwiYWRkUmVmZXJlbmNlcyIsInJlbW92ZVJlZiIsInJlbW92ZVJlZmVyZW5jZXMiLCJyZW1vdmVSZWZlcmVuY2VzRm9ySWQiLCJlbXB0eUtleSIsInN0YXJ0UmVmIiwiZW5kUmVmIiwicmVtb3ZlQWxsUmVmZXJlbmNlcyIsInJlZmVyZW5jZXNGb3JJZCIsImZpcnN0UmVmIiwidGFyZ2V0T3JCYXRjaElkIiwiTG9jYWxTdG9yZSIsInF1ZXJ5RW5naW5lIiwiaW5pdGlhbFVzZXIiLCJsb2NhbFZpZXdSZWZlcmVuY2VzIiwidGFyZ2V0RGF0YUJ5VGFyZ2V0IiwidGFyZ2V0SWRCeVRhcmdldCIsImxhc3REb2N1bWVudENoYW5nZVJlYWRUaW1lIiwicmVtb3RlRG9jdW1lbnRzIiwic3luY2hyb25pemVMYXN0RG9jdW1lbnRDaGFuZ2VSZWFkVGltZSIsImhhbmRsZVVzZXJDaGFuZ2UiLCJuZXdNdXRhdGlvblF1ZXVlIiwibmV3TG9jYWxEb2N1bWVudHMiLCJvbGRCYXRjaGVzIiwicHJvbWlzZWRPbGRCYXRjaGVzIiwibmV3QmF0Y2hlcyIsInJlbW92ZWRCYXRjaElkcyIsImFkZGVkQmF0Y2hJZHMiLCJjaGFuZ2VkS2V5cyIsIm9sZEJhdGNoZXNfMSIsIm5ld0JhdGNoZXNfMSIsIl9lIiwiYWZmZWN0ZWREb2N1bWVudHMiLCJsb2NhbFdyaXRlIiwiZXhpc3RpbmdEb2NzIiwiYmFzZVZhbHVlIiwibG9va3VwTXV0YXRpb25Eb2N1bWVudHMiLCJhZmZlY3RlZCIsImRvY3VtZW50QnVmZmVyIiwiYXBwbHlXcml0ZVRvUmVtb3RlRG9jdW1lbnRzIiwicmVqZWN0QmF0Y2giLCJhZmZlY3RlZEtleXMiLCJhcHBseVJlbW90ZUV2ZW50IiwicmVtb3RlRXZlbnQiLCJyZW1vdGVWZXJzaW9uIiwibmV3VGFyZ2V0RGF0YUJ5VGFyZ2V0TWFwIiwidGFyZ2V0Q2hhbmdlcyIsImNoYW5nZSIsIm9sZFRhcmdldERhdGEiLCJhZGRlZERvY3VtZW50cyIsIm5ld1RhcmdldERhdGEiLCJzaG91bGRQZXJzaXN0VGFyZ2V0RGF0YSIsInVwZGF0ZWRLZXlzIiwiZG9jdW1lbnRVcGRhdGVzIiwiZXhpc3RpbmdEb2MiLCJyZXNvbHZlZExpbWJvRG9jdW1lbnRzIiwidXBkYXRlUmVtb3RlVmVyc2lvbiIsIlJFU1VNRV9UT0tFTl9NQVhfQUdFX01JQ1JPUyIsIm1vZGlmaWVkRG9jdW1lbnRzIiwibm90aWZ5TG9jYWxWaWV3Q2hhbmdlcyIsInZpZXdDaGFuZ2VzIiwidmlld0NoYW5nZXNfMSIsInZpZXdDaGFuZ2UiLCJhZGRlZEtleXMiLCJyZW1vdmVkS2V5cyIsImZyb21DYWNoZSIsInVwZGF0ZWRUYXJnZXREYXRhIiwibmV4dE11dGF0aW9uQmF0Y2giLCJhZnRlckJhdGNoSWQiLCJyZWFkRG9jdW1lbnQiLCJhbGxvY2F0ZVRhcmdldCIsImNhY2hlZCIsInJlbGVhc2VUYXJnZXQiLCJrZWVwUGVyc2lzdGVkVGFyZ2V0RGF0YSIsInJlbW92ZWQiLCJleGVjdXRlUXVlcnkiLCJ1c2VQcmV2aW91c1Jlc3VsdHMiLCJyZW1vdGVEb2N1bWVudEtleXMiLCJyZW1vdmVDYWNoZWRNdXRhdGlvbkJhdGNoTWV0YWRhdGEiLCJkb2NLZXlzIiwicHJvbWlzZUNoYWluIiwiYWNrVmVyc2lvbiIsImNhY2hlZFRhcmdldERhdGEiLCJyZW1vdGVEb2N1bWVudENhY2hlXzEiLCJNZW1vcnlNdXRhdGlvblF1ZXVlIiwiYmF0Y2hlc0J5RG9jdW1lbnRLZXkiLCJiYXRjaEluZGV4IiwiaW5kZXhPZkV4aXN0aW5nQmF0Y2hJZCIsImZpbmRNdXRhdGlvbkJhdGNoIiwibXV0YXRpb25CYXRjaCIsInJhd0luZGV4IiwiaW5kZXhPZkJhdGNoSWQiLCJmaW5kTXV0YXRpb25CYXRjaGVzIiwicHJlZml4Iiwic3RhcnRQYXRoIiwicm93S2V5UGF0aCIsIlBlcnNpc3RlbnRTdHJlYW1TdGF0ZSIsIk1lbW9yeVJlbW90ZURvY3VtZW50Q2FjaGUiLCJzaXplciIsImN1cnJlbnRTaXplIiwiZm9yRWFjaERvY3VtZW50S2V5IiwiTWVtb3J5VGFyZ2V0Q2FjaGUiLCJ0YXJnZXRzIiwiaGlnaGVzdFNlcXVlbmNlTnVtYmVyIiwibmV4dFRhcmdldElkIiwicmVtb3ZhbHMiLCJtYXRjaGluZ0tleXMiLCJNZW1vcnlQZXJzaXN0ZW5jZSIsInJlZmVyZW5jZURlbGVnYXRlRmFjdG9yeSIsIm11dGF0aW9uUXVldWVzIiwiZG9jdW1lbnRTaXplIiwiY3JlYXRlTHJ1UGVyc2lzdGVuY2UiLCJNZW1vcnlMcnVEZWxlZ2F0ZSIsImNyZWF0ZUVhZ2VyUGVyc2lzdGVuY2UiLCJNZW1vcnlFYWdlckRlbGVnYXRlIiwidG9LZXkiLCJNZW1vcnlUcmFuc2FjdGlvbiIsIm9uVHJhbnNhY3Rpb25TdGFydGVkIiwib25UcmFuc2FjdGlvbkNvbW1pdHRlZCIsInZzIiwiX29ycGhhbmVkRG9jdW1lbnRzIiwib3JwaGFuZWREb2N1bWVudHMiLCJpc1JlZmVyZW5jZWQiLCJvcnBoYW5lZFNlcXVlbmNlTnVtYmVycyIsIm9ycGhhbmVkRG9jdW1lbnRDb3VudCIsInJlbW90ZURvY3VtZW50Iiwib3JwaGFuZWRBdCIsIkRFRkFVTFRfQkFDS09GRl9JTklUSUFMX0RFTEFZX01TIiwiREVGQVVMVF9CQUNLT0ZGX0ZBQ1RPUiIsIkRFRkFVTFRfQkFDS09GRl9NQVhfREVMQVlfTVMiLCJFeHBvbmVudGlhbEJhY2tvZmYiLCJpbml0aWFsRGVsYXlNcyIsImJhY2tvZmZGYWN0b3IiLCJtYXhEZWxheU1zIiwiY3VycmVudEJhc2VNcyIsInRpbWVyUHJvbWlzZSIsImxhc3RBdHRlbXB0VGltZSIsInJlc2V0VG9NYXgiLCJiYWNrb2ZmQW5kUnVuIiwiZGVzaXJlZERlbGF5V2l0aEppdHRlck1zIiwiaml0dGVyRGVsYXlNcyIsImRlbGF5U29GYXJNcyIsInJlbWFpbmluZ0RlbGF5TXMiLCJPbmxpbmVTdGF0ZSIsIk9ubGluZVN0YXRlU291cmNlIiwiUGVyc2lzdGVudFN0cmVhbSIsImNvbm5lY3Rpb25UaW1lcklkIiwiaWRsZVRpbWVySWQiLCJjb25uZWN0aW9uIiwiY3JlZGVudGlhbHNQcm92aWRlciIsInN0YXRlIiwiSW5pdGlhbCIsImNsb3NlQ291bnQiLCJpZGxlVGltZXIiLCJzdHJlYW0iLCJiYWNrb2ZmIiwiaXNTdGFydGVkIiwiU3RhcnRpbmciLCJPcGVuIiwiQmFja29mZiIsImlzT3BlbiIsImF1dGgiLCJwZXJmb3JtQmFja29mZiIsImluaGliaXRCYWNrb2ZmIiwibWFya0lkbGUiLCJoYW5kbGVJZGxlQ2xvc2VUaW1lciIsInNlbmRSZXF1ZXN0IiwiY2FuY2VsSWRsZUNoZWNrIiwic2VuZCIsImZpbmFsU3RhdGUiLCJpbnZhbGlkYXRlVG9rZW4iLCJ0ZWFyRG93biIsIm9uQ2xvc2UiLCJkaXNwYXRjaElmTm90Q2xvc2VkIiwiZ2V0Q2xvc2VHdWFyZGVkRGlzcGF0Y2hlciIsImdldFRva2VuIiwic3RhcnRTdHJlYW0iLCJycGNFcnJvciIsImhhbmRsZVN0cmVhbUNsb3NlIiwic3RhcnRScGMiLCJvbk9wZW4iLCJvbk1lc3NhZ2UiLCJzdGFydENsb3NlQ291bnQiLCJQZXJzaXN0ZW50TGlzdGVuU3RyZWFtIiwiY3JlZGVudGlhbHMiLCJMaXN0ZW5TdHJlYW1Db25uZWN0aW9uQmFja29mZiIsIkxpc3RlblN0cmVhbUlkbGUiLCJvcGVuU3RyZWFtIiwid2F0Y2hDaGFuZ2VQcm90byIsIndhdGNoQ2hhbmdlIiwiZnJvbVdhdGNoQ2hhbmdlIiwic25hcHNob3QiLCJ2ZXJzaW9uRnJvbUxpc3RlblJlc3BvbnNlIiwib25XYXRjaENoYW5nZSIsIndhdGNoIiwiZW5jb2RlZERhdGFiYXNlSWQiLCJhZGRUYXJnZXQiLCJsYWJlbHMiLCJ0b0xpc3RlblJlcXVlc3RMYWJlbHMiLCJ1bndhdGNoIiwiUGVyc2lzdGVudFdyaXRlU3RyZWFtIiwiV3JpdGVTdHJlYW1Db25uZWN0aW9uQmFja29mZiIsIldyaXRlU3RyZWFtSWRsZSIsImhhbmRzaGFrZUNvbXBsZXRlXyIsIndyaXRlTXV0YXRpb25zIiwicmVzcG9uc2VQcm90byIsImZyb21Xcml0ZVJlc3VsdHMiLCJ3cml0ZVJlc3VsdHMiLCJjb21taXRUaW1lIiwib25NdXRhdGlvblJlc3VsdCIsIm9uSGFuZHNoYWtlQ29tcGxldGUiLCJ3cml0ZUhhbmRzaGFrZSIsIndyaXRlcyIsIkRhdGFzdG9yZSIsIm5ld1BlcnNpc3RlbnRXcml0ZVN0cmVhbSIsIm5ld1BlcnNpc3RlbnRXYXRjaFN0cmVhbSIsImNvbW1pdCIsImludm9rZVJQQyIsInJlc3BvbnNlIiwibG9va3VwIiwidG9OYW1lIiwiaW52b2tlU3RyZWFtaW5nUlBDIiwiZnJvbU1heWJlRG9jdW1lbnQiLCJycGNOYW1lIiwiZGF0YXN0b3JlIiwicmVhZFZlcnNpb25zIiwiY29tbWl0dGVkIiwibGFzdFdyaXRlRXJyb3IiLCJ3cml0dGVuRG9jcyIsImVuc3VyZUNvbW1pdE5vdENhbGxlZCIsInJlY29yZFZlcnNpb24iLCJ3cml0ZSIsInRvTXV0YXRpb25zIiwicHJlY29uZGl0aW9uRm9yVXBkYXRlIiwidW53cml0dGVuIiwiZG9jVmVyc2lvbiIsImV4aXN0aW5nVmVyc2lvbiIsIlJwY0NvZGUiLCJPbmxpbmVTdGF0ZVRyYWNrZXIiLCJvbmxpbmVTdGF0ZUhhbmRsZXIiLCJVbmtub3duIiwid2F0Y2hTdHJlYW1GYWlsdXJlcyIsIm9ubGluZVN0YXRlVGltZXIiLCJzaG91bGRXYXJuQ2xpZW50SXNPZmZsaW5lIiwiaGFuZGxlV2F0Y2hTdHJlYW1TdGFydCIsInNldEFuZEJyb2FkY2FzdCIsIk9ubGluZVN0YXRlVGltZW91dCIsImxvZ0NsaWVudE9mZmxpbmVXYXJuaW5nSWZOZWNlc3NhcnkiLCJPZmZsaW5lIiwiaGFuZGxlV2F0Y2hTdHJlYW1GYWlsdXJlIiwiT25saW5lIiwiY2xlYXJPbmxpbmVTdGF0ZVRpbWVyIiwibmV3U3RhdGUiLCJkZXRhaWxzIiwiaXNQZXJtYW5lbnRFcnJvciIsIm1hcENvZGVGcm9tUnBjQ29kZSIsIm1hcFJwY0NvZGVGcm9tQ29kZSIsIkNoYW5nZVR5cGUiLCJTeW5jU3RhdGUiLCJEb2N1bWVudFNldCIsImtleWVkTWFwIiwic29ydGVkU2V0IiwiZW1wdHlTZXQiLCJvbGRTZXQiLCJ0aGlzRG9jIiwib3RoZXJEb2MiLCJkb2NTdHJpbmdzIiwibmV3U2V0IiwiV2F0Y2hUYXJnZXRDaGFuZ2VTdGF0ZSIsIkRvY3VtZW50Q2hhbmdlU2V0IiwiY2hhbmdlTWFwIiwidHJhY2siLCJvbGRDaGFuZ2UiLCJBZGRlZCIsIk1ldGFkYXRhIiwiUmVtb3ZlZCIsIk1vZGlmaWVkIiwiZ2V0Q2hhbmdlcyIsIlZpZXdTbmFwc2hvdCIsIm9sZERvY3MiLCJkb2NDaGFuZ2VzIiwibXV0YXRlZEtleXMiLCJzeW5jU3RhdGVDaGFuZ2VkIiwiZXhjbHVkZXNNZXRhZGF0YUNoYW5nZXMiLCJmcm9tSW5pdGlhbERvY3VtZW50cyIsIm90aGVyQ2hhbmdlcyIsIlJlbW90ZUV2ZW50IiwidGFyZ2V0TWlzbWF0Y2hlcyIsImNyZWF0ZVN5bnRoZXNpemVkUmVtb3RlRXZlbnRGb3JDdXJyZW50Q2hhbmdlIiwiVGFyZ2V0Q2hhbmdlIiwiY3JlYXRlU3ludGhlc2l6ZWRUYXJnZXRDaGFuZ2VGb3JDdXJyZW50Q2hhbmdlIiwiRG9jdW1lbnRXYXRjaENoYW5nZSIsInVwZGF0ZWRUYXJnZXRJZHMiLCJyZW1vdmVkVGFyZ2V0SWRzIiwibmV3RG9jIiwiRXhpc3RlbmNlRmlsdGVyQ2hhbmdlIiwiZXhpc3RlbmNlRmlsdGVyIiwiV2F0Y2hUYXJnZXRDaGFuZ2UiLCJ0YXJnZXRJZHMiLCJjYXVzZSIsIlRhcmdldFN0YXRlIiwicGVuZGluZ1Jlc3BvbnNlcyIsImRvY3VtZW50Q2hhbmdlcyIsInNuYXBzaG90Q2hhbmdlc01hcCIsIl9yZXN1bWVUb2tlbiIsIl9jdXJyZW50IiwiX2hhc1BlbmRpbmdDaGFuZ2VzIiwidXBkYXRlUmVzdW1lVG9rZW4iLCJ0b1RhcmdldENoYW5nZSIsImNoYW5nZVR5cGUiLCJjbGVhclBlbmRpbmdDaGFuZ2VzIiwiYWRkRG9jdW1lbnRDaGFuZ2UiLCJyZW1vdmVEb2N1bWVudENoYW5nZSIsInJlY29yZFBlbmRpbmdUYXJnZXRSZXF1ZXN0IiwicmVjb3JkVGFyZ2V0UmVzcG9uc2UiLCJtYXJrQ3VycmVudCIsIldhdGNoQ2hhbmdlQWdncmVnYXRvciIsIm1ldGFkYXRhUHJvdmlkZXIiLCJ0YXJnZXRTdGF0ZXMiLCJwZW5kaW5nRG9jdW1lbnRVcGRhdGVzIiwicGVuZGluZ0RvY3VtZW50VGFyZ2V0TWFwcGluZyIsImRvY3VtZW50VGFyZ2V0TWFwIiwicGVuZGluZ1RhcmdldFJlc2V0cyIsImhhbmRsZURvY3VtZW50Q2hhbmdlIiwiZG9jQ2hhbmdlIiwiYWRkRG9jdW1lbnRUb1RhcmdldCIsInJlbW92ZURvY3VtZW50RnJvbVRhcmdldCIsImhhbmRsZVRhcmdldENoYW5nZSIsInRhcmdldENoYW5nZSIsInRhcmdldFN0YXRlIiwiZW5zdXJlVGFyZ2V0U3RhdGUiLCJOb0NoYW5nZSIsImlzQWN0aXZlVGFyZ2V0IiwiaXNQZW5kaW5nIiwiQ3VycmVudCIsIlJlc2V0IiwicmVzZXRUYXJnZXQiLCJoYW5kbGVFeGlzdGVuY2VGaWx0ZXIiLCJ0YXJnZXREYXRhRm9yQWN0aXZlVGFyZ2V0IiwiZ2V0Q3VycmVudERvY3VtZW50Q291bnRGb3JUYXJnZXQiLCJjcmVhdGVSZW1vdGVFdmVudCIsInRhcmdldENvbnRhaW5zRG9jdW1lbnQiLCJoYXNQZW5kaW5nQ2hhbmdlcyIsImlzT25seUxpbWJvVGFyZ2V0IiwiTGltYm9SZXNvbHV0aW9uIiwiZW5zdXJlRG9jdW1lbnRUYXJnZXRNYXBwaW5nIiwidXBkYXRlZERvY3VtZW50IiwiZ2V0UmVtb3RlS2V5c0ZvclRhcmdldCIsInRhcmdldE1hcHBpbmciLCJ0YXJnZXRBY3RpdmUiLCJMT0dfVEFHJDgiLCJSZW1vdGVTdG9yZSIsImNvbm5lY3Rpdml0eU1vbml0b3IiLCJ3cml0ZVBpcGVsaW5lIiwibGlzdGVuVGFyZ2V0cyIsIndhdGNoQ2hhbmdlQWdncmVnYXRvciIsImFkZENhbGxiYWNrIiwic3RhdHVzIiwiY2FuVXNlTmV0d29yayIsInJlc3RhcnROZXR3b3JrIiwib25saW5lU3RhdGVUcmFja2VyIiwid2F0Y2hTdHJlYW0iLCJvbldhdGNoU3RyZWFtT3BlbiIsIm9uV2F0Y2hTdHJlYW1DbG9zZSIsIm9uV2F0Y2hTdHJlYW1DaGFuZ2UiLCJ3cml0ZVN0cmVhbSIsIm9uV3JpdGVTdHJlYW1PcGVuIiwib25Xcml0ZVN0cmVhbUNsb3NlIiwib25Xcml0ZUhhbmRzaGFrZUNvbXBsZXRlIiwiZW5hYmxlTmV0d29yayIsInNob3VsZFN0YXJ0V2F0Y2hTdHJlYW0iLCJzdGFydFdhdGNoU3RyZWFtIiwiZmlsbFdyaXRlUGlwZWxpbmUiLCJkaXNhYmxlTmV0d29yayIsImRpc2FibGVOZXR3b3JrSW50ZXJuYWwiLCJjbGVhblVwV2F0Y2hTdHJlYW1TdGF0ZSIsImxpc3RlbiIsInNlbmRXYXRjaFJlcXVlc3QiLCJ1bmxpc3RlbiIsInNlbmRVbndhdGNoUmVxdWVzdCIsInN5bmNFbmdpbmUiLCJoYW5kbGVUYXJnZXRFcnJvciIsInJhaXNlV2F0Y2hTbmFwc2hvdCIsInJlcXVlc3RUYXJnZXREYXRhIiwiRXhpc3RlbmNlRmlsdGVyTWlzbWF0Y2giLCJyZWplY3RMaXN0ZW4iLCJsYXN0QmF0Y2hJZFJldHJpZXZlZCIsImNhbkFkZFRvV3JpdGVQaXBlbGluZSIsImFkZFRvV3JpdGVQaXBlbGluZSIsInNob3VsZFN0YXJ0V3JpdGVTdHJlYW0iLCJzdGFydFdyaXRlU3RyZWFtIiwib3V0c3RhbmRpbmdXcml0ZXMiLCJoYW5kc2hha2VDb21wbGV0ZSIsImFwcGx5U3VjY2Vzc2Z1bFdyaXRlIiwiaGFuZGxlV3JpdGVFcnJvciIsImhhbmRsZUhhbmRzaGFrZUVycm9yIiwicmVqZWN0RmFpbGVkV3JpdGUiLCJjcmVhdGVUcmFuc2FjdGlvbiIsImhhbmRsZUNyZWRlbnRpYWxDaGFuZ2UiLCJhcHBseVByaW1hcnlTdGF0ZSIsIkdlb1BvaW50IiwibGF0aXR1ZGUiLCJsb25naXR1ZGUiLCJfbGF0IiwiX2xvbmciLCJTZXJ2ZXJUaW1lc3RhbXBUcmFuc2Zvcm0iLCJ0cmFuc2Zvcm1SZXN1bHQiLCJBcnJheVVuaW9uVHJhbnNmb3JtT3BlcmF0aW9uIiwiZWxlbWVudHMiLCJjb2VyY2VkRmllbGRWYWx1ZXNBcnJheSIsInRvVW5pb24iLCJBcnJheVJlbW92ZVRyYW5zZm9ybU9wZXJhdGlvbiIsIl9sb29wXzIiLCJ0b1JlbW92ZSIsIk51bWVyaWNJbmNyZW1lbnRUcmFuc2Zvcm1PcGVyYXRpb24iLCJvcGVyYW5kIiwic3VtIiwiZGlycyIsIkV4aXN0ZW5jZUZpbHRlciIsIkRJUkVDVElPTlMiLCJPUEVSQVRPUlMiLCJJU09fUkVHX0VYUCIsIlJlZ0V4cCIsImFzc2VydFByZXNlbnQiLCJwYXJzZUludDY0IiwiSnNvblByb3RvU2VyaWFsaXplciIsInVzZVByb3RvM0pzb24iLCJ1bnNhZmVDYXN0UHJvdG9CeXRlU3RyaW5nIiwiYnl0ZVN0cmluZyIsImZyb21ScGNTdGF0dXMiLCJ0b0ludDMyVmFsdWUiLCJmcm9tSW50MzJWYWx1ZSIsIm5hbm9zIiwiZnJvbUlzbzg2MDFTdHJpbmciLCJ1dGMiLCJmcmFjdGlvbiIsIm5hbm9TdHIiLCJzdWJzdHIiLCJ0b0J5dGVzIiwiZnJvbUJsb2IiLCJibG9iIiwidG9SZXNvdXJjZU5hbWUiLCJmdWxseVF1YWxpZmllZFByZWZpeFBhdGgiLCJmcm9tUmVzb3VyY2VOYW1lIiwicmVzb3VyY2UiLCJpc1ZhbGlkUmVzb3VyY2VOYW1lIiwiZnJvbU5hbWUiLCJleHRyYWN0TG9jYWxQYXRoRnJvbVJlc291cmNlTmFtZSIsInRvUXVlcnlQYXRoIiwiZnJvbVF1ZXJ5UGF0aCIsInJlc291cmNlTmFtZSIsInRvVmFsdWUiLCJudWxsVmFsdWUiLCJib29sZWFuVmFsdWUiLCJpbnRlZ2VyVmFsdWUiLCJkb3VibGVWYWx1ZSIsInN0cmluZ1ZhbHVlIiwidG9NYXBWYWx1ZSIsInRvQXJyYXlWYWx1ZSIsInRpbWVzdGFtcFZhbHVlIiwiZ2VvUG9pbnRWYWx1ZSIsImJ5dGVzVmFsdWUiLCJyZWZlcmVuY2VWYWx1ZSIsImZyb21WYWx1ZSIsImZyb21GaWVsZHMiLCJkYklkIiwidG9NdXRhdGlvbkRvY3VtZW50IiwidG9GaWVsZHMiLCJmcm9tRm91bmQiLCJmcm9tTWlzc2luZyIsIm1pc3NpbmciLCJ0b1dhdGNoVGFyZ2V0Q2hhbmdlU3RhdGUiLCJ0b1Rlc3RXYXRjaENoYW5nZSIsImRvY3VtZW50Q2hhbmdlIiwiZG9jdW1lbnREZWxldGUiLCJkb2N1bWVudFJlbW92ZSIsInRhcmdldENoYW5nZVR5cGUiLCJmcm9tV2F0Y2hUYXJnZXRDaGFuZ2VTdGF0ZSIsImNhdXNlUHJvdG8iLCJlbnRpdHlDaGFuZ2UiLCJkb2NEZWxldGUiLCJkb2NSZW1vdmUiLCJ1cGRhdGVNYXNrIiwidG9Eb2N1bWVudE1hc2siLCJ0b0ZpZWxkVHJhbnNmb3JtIiwiY3VycmVudERvY3VtZW50IiwidG9QcmVjb25kaXRpb24iLCJmcm9tUHJlY29uZGl0aW9uIiwiZnJvbURvY3VtZW50TWFzayIsImZyb21GaWVsZFRyYW5zZm9ybSIsImZyb21Xcml0ZVJlc3VsdCIsInByb3RvcyIsInNldFRvU2VydmVyVmFsdWUiLCJhcHBlbmRNaXNzaW5nRWxlbWVudHMiLCJyZW1vdmVBbGxGcm9tQXJyYXkiLCJpbmNyZW1lbnQiLCJkb2N1bWVudHNUYXJnZXQiLCJzdHJ1Y3R1cmVkUXVlcnkiLCJhbGxEZXNjZW5kYW50cyIsIndoZXJlIiwidG9GaWx0ZXIiLCJ0b09yZGVyIiwidG9DdXJzb3IiLCJmcm9tQ291bnQiLCJmaWx0ZXJCeSIsImZyb21GaWx0ZXIiLCJmcm9tT3JkZXIiLCJmcm9tQ3Vyc29yIiwidG9MYWJlbCIsInRvVW5hcnlPckZpZWxkRmlsdGVyIiwiY29tcG9zaXRlRmlsdGVyIiwidW5hcnlGaWx0ZXIiLCJmcm9tVW5hcnlGaWx0ZXIiLCJmaWVsZEZpbHRlciIsImZyb21GaWVsZEZpbHRlciIsImFjY3VtIiwib3JkZXIiLCJ0b1Byb3BlcnR5T3JkZXIiLCJmcm9tUHJvcGVydHlPcmRlciIsInRvRGlyZWN0aW9uIiwiZnJvbURpcmVjdGlvbiIsInRvT3BlcmF0b3JOYW1lIiwiZnJvbU9wZXJhdG9yTmFtZSIsInRvRmllbGRQYXRoUmVmZXJlbmNlIiwiZnJvbUZpZWxkUGF0aFJlZmVyZW5jZSIsImZpZWxkUmVmZXJlbmNlIiwibmFuRmllbGQiLCJudWxsRmllbGQiLCJjYW5vbmljYWxGaWVsZHMiLCJmaWVsZFBhdGhzIiwiUXVlcnlMaXN0ZW5lcnNJbmZvIiwidmlld1NuYXAiLCJsaXN0ZW5lcnMiLCJFdmVudE1hbmFnZXIiLCJxdWVyaWVzIiwib25saW5lU3RhdGUiLCJzbmFwc2hvdHNJblN5bmNMaXN0ZW5lcnMiLCJmaXJzdExpc3RlbiIsInF1ZXJ5SW5mbyIsImFwcGx5T25saW5lU3RhdGVDaGFuZ2UiLCJvblZpZXdTbmFwc2hvdCIsInJhaXNlU25hcHNob3RzSW5TeW5jRXZlbnQiLCJsYXN0TGlzdGVuIiwidmlld1NuYXBzIiwicmFpc2VkRXZlbnQiLCJ2aWV3U25hcHNfMSIsIm9uV2F0Y2hFcnJvciIsIm9uT25saW5lU3RhdGVDaGFuZ2UiLCJhZGRTbmFwc2hvdHNJblN5bmNMaXN0ZW5lciIsInJlbW92ZVNuYXBzaG90c0luU3luY0xpc3RlbmVyIiwiUXVlcnlMaXN0ZW5lciIsInF1ZXJ5T2JzZXJ2ZXIiLCJyYWlzZWRJbml0aWFsRXZlbnQiLCJzbmFwIiwiaW5jbHVkZU1ldGFkYXRhQ2hhbmdlcyIsInNob3VsZFJhaXNlRXZlbnQiLCJzaG91bGRSYWlzZUluaXRpYWxFdmVudCIsInJhaXNlSW5pdGlhbEV2ZW50IiwibWF5YmVPbmxpbmUiLCJ3YWl0Rm9yU3luY1doZW5PbmxpbmUiLCJoYXNQZW5kaW5nV3JpdGVzQ2hhbmdlZCIsIkxvY2FsVmlld0NoYW5nZXMiLCJmcm9tU25hcHNob3QiLCJ2aWV3U25hcHNob3QiLCJBZGRlZExpbWJvRG9jdW1lbnQiLCJSZW1vdmVkTGltYm9Eb2N1bWVudCIsIlZpZXciLCJfc3luY2VkRG9jdW1lbnRzIiwic3luY1N0YXRlIiwibGltYm9Eb2N1bWVudHMiLCJkb2N1bWVudFNldCIsImNvbXB1dGVEb2NDaGFuZ2VzIiwicHJldmlvdXNDaGFuZ2VzIiwiY2hhbmdlU2V0Iiwib2xkRG9jdW1lbnRTZXQiLCJuZXdNdXRhdGVkS2V5cyIsIm5ld0RvY3VtZW50U2V0IiwibGFzdERvY0luTGltaXQiLCJmaXJzdERvY0luTGltaXQiLCJuZXdNYXliZURvYyIsIm9sZERvYyIsIm9sZERvY0hhZFBlbmRpbmdNdXRhdGlvbnMiLCJuZXdEb2NIYXNQZW5kaW5nTXV0YXRpb25zIiwiY2hhbmdlQXBwbGllZCIsInNob3VsZFdhaXRGb3JTeW5jZWREb2N1bWVudCIsInVwZGF0ZUxpbWJvRG9jdW1lbnRzIiwiY29tcGFyZUNoYW5nZVR5cGUiLCJhcHBseVRhcmdldENoYW5nZSIsImxpbWJvQ2hhbmdlcyIsIm5ld1N5bmNTdGF0ZSIsIlN5bmNlZCIsIkxvY2FsIiwic2hvdWxkQmVJbkxpbWJvIiwib2xkTGltYm9Eb2N1bWVudHMiLCJzeW5jaHJvbml6ZVdpdGhQZXJzaXN0ZWRTdGF0ZSIsInF1ZXJ5UmVzdWx0IiwiY29tcHV0ZUluaXRpYWxTbmFwc2hvdCIsIlJFVFJZX0NPVU5UIiwiVHJhbnNhY3Rpb25SdW5uZXIiLCJyZW1vdGVTdG9yZSIsInVwZGF0ZUZ1bmN0aW9uIiwicmV0cmllcyIsIlJldHJ5VHJhbnNhY3Rpb24iLCJydW4iLCJydW5XaXRoQmFja09mZiIsInRyeVJ1blVwZGF0ZUZ1bmN0aW9uIiwiY29tbWl0RXJyb3IiLCJoYW5kbGVUcmFuc2FjdGlvbkVycm9yIiwidXNlclByb21pc2VFcnJvciIsImlzUmV0cnlhYmxlVHJhbnNhY3Rpb25FcnJvciIsIlF1ZXJ5VmlldyIsInZpZXciLCJyZWNlaXZlZERvY3VtZW50Iiwic2hhcmVkQ2xpZW50U3RhdGUiLCJjdXJyZW50VXNlciIsInN5bmNFbmdpbmVMaXN0ZW5lciIsInF1ZXJ5Vmlld3NCeVF1ZXJ5IiwicXVlcmllc0J5VGFyZ2V0IiwibGltYm9UYXJnZXRzQnlLZXkiLCJsaW1ib1Jlc29sdXRpb25zQnlUYXJnZXQiLCJsaW1ib0RvY3VtZW50UmVmcyIsIm11dGF0aW9uVXNlckNhbGxiYWNrcyIsInBlbmRpbmdXcml0ZXNDYWxsYmFja3MiLCJsaW1ib1RhcmdldElkR2VuZXJhdG9yIiwicXVlcnlWaWV3Iiwic3RhdHVzXzEiLCJhc3NlcnRTdWJzY3JpYmVkIiwiYWRkTG9jYWxRdWVyeVRhcmdldCIsImluaXRpYWxpemVWaWV3QW5kQ29tcHV0ZVNuYXBzaG90Iiwidmlld0RvY0NoYW5nZXMiLCJzeW50aGVzaXplZFRhcmdldENoYW5nZSIsInN5bmNocm9uaXplVmlld0FuZENvbXB1dGVTbmFwc2hvdCIsInVwZGF0ZVRyYWNrZWRMaW1ib3MiLCJyZW1vdmVMb2NhbFF1ZXJ5VGFyZ2V0IiwiaXNBY3RpdmVRdWVyeVRhcmdldCIsImNsZWFyUXVlcnlTdGF0ZSIsInJlbW92ZUFuZENsZWFudXBUYXJnZXQiLCJ1c2VyQ2FsbGJhY2siLCJhZGRQZW5kaW5nTXV0YXRpb24iLCJhZGRNdXRhdGlvbkNhbGxiYWNrIiwiZW1pdE5ld1NuYXBzQW5kTm90aWZ5TG9jYWxTdG9yZSIsImxpbWJvUmVzb2x1dGlvbiIsIlNoYXJlZENsaWVudFN0YXRlIiwibmV3Vmlld1NuYXBzaG90c18xIiwic2V0T25saW5lU3RhdGUiLCJsaW1ib0tleSIsImV2ZW50XzEiLCJ1cGRhdGVRdWVyeVN0YXRlIiwiYXBwbHlCYXRjaFN0YXRlIiwiYmF0Y2hTdGF0ZSIsInByb2Nlc3NVc2VyQ2FsbGJhY2siLCJtdXRhdGlvbkJhdGNoUmVzdWx0IiwidHJpZ2dlclBlbmRpbmdXcml0ZXNDYWxsYmFja3MiLCJ1cGRhdGVNdXRhdGlvblN0YXRlIiwicmVnaXN0ZXJQZW5kaW5nV3JpdGVzQ2FsbGJhY2siLCJoaWdoZXN0QmF0Y2hJZCIsImNhbGxiYWNrcyIsInJlamVjdE91dHN0YW5kaW5nUGVuZGluZ1dyaXRlc0NhbGxiYWNrcyIsImVycm9yTWVzc2FnZSIsImNsZWFyIiwibmV3Q2FsbGJhY2tzIiwibGltYm9LZXlzIiwicmVtb3ZlTGltYm9UYXJnZXQiLCJsaW1ib1RhcmdldElkIiwibGltYm9DaGFuZ2VzXzEiLCJsaW1ib0NoYW5nZSIsInRyYWNrTGltYm9DaGFuZ2UiLCJjdXJyZW50TGltYm9Eb2NzIiwibmV3U25hcHMiLCJkb2NDaGFuZ2VzSW5BbGxWaWV3cyIsInF1ZXJpZXNQcm9jZXNzZWQiLCJ1c2VyQ2hhbmdlZCIsImFjdGl2ZVRhcmdldHMiLCJhY3RpdmVRdWVyaWVzIiwiYWN0aXZlUXVlcmllc18xIiwiYWN0aXZlVGFyZ2V0c18xIiwicF8xIiwiZ2V0QWxsQWN0aXZlUXVlcnlUYXJnZXRzIiwic3luY2hyb25pemVRdWVyeVZpZXdzQW5kUmFpc2VTbmFwc2hvdHMiLCJpc0xvY2FsUXVlcnlUYXJnZXQiLCJyZXNldExpbWJvRG9jdW1lbnRzIiwibmV3Vmlld1NuYXBzaG90cyIsInRhcmdldHNfMSIsInF1ZXJpZXNfMSIsInN5bnRoZXNpemVUYXJnZXRUb1F1ZXJ5IiwiYXBwbHlUYXJnZXRTdGF0ZSIsInN5bnRoZXNpemVkUmVtb3RlRXZlbnQiLCJhcHBseUFjdGl2ZVRhcmdldHNDaGFuZ2UiLCJhZGRlZF8xIiwicmVtb3ZlZF8xIiwia2V5U2V0IiwicXVlcmllc18yIiwic3luY2VkRG9jdW1lbnRzIiwiVXNlciIsIm90aGVyVXNlciIsIkdPT0dMRV9DUkVERU5USUFMUyIsIkZJUlNUX1BBUlRZIiwiQ0xJRU5UX1NUQVRFX0tFWV9QUkVGSVgiLCJjcmVhdGVXZWJTdG9yYWdlQ2xpZW50U3RhdGVLZXkiLCJNVVRBVElPTl9CQVRDSF9LRVlfUFJFRklYIiwiY3JlYXRlV2ViU3RvcmFnZU11dGF0aW9uQmF0Y2hLZXkiLCJtdXRhdGlvbktleSIsIlFVRVJZX1RBUkdFVF9LRVlfUFJFRklYIiwiY3JlYXRlV2ViU3RvcmFnZVF1ZXJ5VGFyZ2V0TWV0YWRhdGFLZXkiLCJPTkxJTkVfU1RBVEVfS0VZX1BSRUZJWCIsIlNFUVVFTkNFX05VTUJFUl9LRVlfUFJFRklYIiwiTE9HX1RBRyRhIiwiTXV0YXRpb25NZXRhZGF0YSIsImZyb21XZWJTdG9yYWdlRW50cnkiLCJ2YWxpZERhdGEiLCJmaXJlc3RvcmVFcnJvciIsInRvV2ViU3RvcmFnZUpTT04iLCJiYXRjaE1ldGFkYXRhIiwiUXVlcnlUYXJnZXRNZXRhZGF0YSIsIlJlbW90ZUNsaWVudFN0YXRlIiwiY2xpZW50U3RhdGUiLCJhY3RpdmVUYXJnZXRJZHNTZXQiLCJTaGFyZWRPbmxpbmVTdGF0ZSIsIkxvY2FsQ2xpZW50U3RhdGUiLCJhZGRRdWVyeVRhcmdldCIsInJlbW92ZVF1ZXJ5VGFyZ2V0IiwiV2ViU3RvcmFnZVNoYXJlZENsaWVudFN0YXRlIiwibG9jYWxDbGllbnRJZCIsImFjdGl2ZUNsaWVudHMiLCJzdG9yYWdlTGlzdGVuZXIiLCJoYW5kbGVXZWJTdG9yYWdlRXZlbnQiLCJlYXJseUV2ZW50cyIsImVzY2FwZWRQZXJzaXN0ZW5jZUtleSIsInN0b3JhZ2UiLCJsb2NhbENsaWVudFN0b3JhZ2VLZXkiLCJzZXF1ZW5jZU51bWJlcktleSIsImNyZWF0ZVdlYlN0b3JhZ2VTZXF1ZW5jZU51bWJlcktleSIsImNsaWVudFN0YXRlS2V5UmUiLCJtdXRhdGlvbkJhdGNoS2V5UmUiLCJxdWVyeVRhcmdldEtleVJlIiwib25saW5lU3RhdGVLZXkiLCJjcmVhdGVXZWJTdG9yYWdlT25saW5lU3RhdGVLZXkiLCJleGlzdGluZ0NsaWVudHNfMSIsInN0b3JhZ2VJdGVtIiwib25saW5lU3RhdGVKU09OIiwicGVyc2lzdENsaWVudFN0YXRlIiwiZnJvbVdlYlN0b3JhZ2VPbmxpbmVTdGF0ZSIsImhhbmRsZU9ubGluZVN0YXRlRXZlbnQiLCJwZXJzaXN0TXV0YXRpb25TdGF0ZSIsInJlbW92ZU11dGF0aW9uU3RhdGUiLCJxdWVyeVN0YXRlIiwibG9jYWxDbGllbnRTdGF0ZSIsInBlcnNpc3RRdWVyeVRhcmdldFN0YXRlIiwicGVyc2lzdE9ubGluZVN0YXRlIiwic3RvcmFnZUFyZWEiLCJtdXRhdGlvbk1ldGFkYXRhIiwicXVlcnlUYXJnZXRNZXRhZGF0YSIsImZyb21XZWJTdG9yYWdlQ2xpZW50U3RhdGVLZXkiLCJoYW5kbGVDbGllbnRTdGF0ZUV2ZW50IiwiZnJvbVdlYlN0b3JhZ2VDbGllbnRTdGF0ZSIsImZyb21XZWJTdG9yYWdlTXV0YXRpb25NZXRhZGF0YSIsImhhbmRsZU11dGF0aW9uQmF0Y2hFdmVudCIsImZyb21XZWJTdG9yYWdlUXVlcnlUYXJnZXRNZXRhZGF0YSIsImhhbmRsZVF1ZXJ5VGFyZ2V0RXZlbnQiLCJzZXFTdHJpbmciLCJwYXJzZWQiLCJmcm9tV2ViU3RvcmFnZVNlcXVlbmNlTnVtYmVyIiwibXV0YXRpb25TdGF0ZSIsInRhcmdldEtleSIsInRhcmdldE1ldGFkYXRhIiwiZXhpc3RpbmdUYXJnZXRzIiwibmV3VGFyZ2V0cyIsImFkZGVkVGFyZ2V0cyIsInJlbW92ZWRUYXJnZXRzIiwiTWVtb3J5U2hhcmVkQ2xpZW50U3RhdGUiLCJsb2NhbFN0YXRlIiwiSW5kZXhlZERiUGVyc2lzdGVuY2VTZXR0aW5ncyIsImNhY2hlU2l6ZUJ5dGVzIiwic3luY2hyb25pemVUYWJzIiwiTWVtb3J5UGVyc2lzdGVuY2VTZXR0aW5ncyIsIkZpcmVzdG9yZUNsaWVudCIsInBlcnNpc3RlbmNlU2V0dGluZ3MiLCJ2ZXJpZnlOb3RUZXJtaW5hdGVkIiwiaW5pdGlhbGl6YXRpb25Eb25lIiwicGVyc2lzdGVuY2VSZXN1bHQiLCJpbml0aWFsaXplZCIsInNldENoYW5nZUxpc3RlbmVyIiwiaW5pdGlhbGl6ZVBlcnNpc3RlbmNlIiwibWF5YmVMcnVHYyIsImluaXRpYWxpemVSZXN0Iiwic3RhcnRJbmRleGVkRGJQZXJzaXN0ZW5jZSIsImNhbkZhbGxiYWNrIiwic3RhcnRNZW1vcnlQZXJzaXN0ZW5jZSIsIkRPTUV4Y2VwdGlvbiIsImlzU2h1dHRpbmdEb3duIiwic2V0dGluZ3MiLCJsb2FkQ29ubmVjdGlvbiIsInJlbW90ZVN0b3JlT25saW5lU3RhdGVDaGFuZ2VkSGFuZGxlciIsInNoYXJlZENsaWVudFN0YXRlT25saW5lU3RhdGVDaGFuZ2VkSGFuZGxlciIsImxydVNjaGVkdWxlciIsIm5ld0Nvbm5lY3Rpdml0eU1vbml0b3IiLCJuZXdTZXJpYWxpemVyIiwiZXZlbnRNZ3IiLCJ0ZXJtaW5hdGUiLCJyZW1vdmVDaGFuZ2VMaXN0ZW5lciIsIndhaXRGb3JQZW5kaW5nV3JpdGVzIiwiY2xpZW50VGVybWluYXRlZCIsImdldERvY3VtZW50RnJvbUxvY2FsQ2FjaGUiLCJnZXREb2N1bWVudHNGcm9tTG9jYWxDYWNoZSIsIkFzeW5jT2JzZXJ2ZXIiLCJtdXRlZCIsInNjaGVkdWxlRXZlbnQiLCJtdXRlIiwiZXZlbnRIYW5kbGVyIiwiRmllbGRQYXRoJDEiLCJmaWVsZE5hbWVzIiwibWluTnVtYmVyT2ZFbGVtZW50cyIsInZhbGlkYXRlTmFtZWRBcnJheUF0TGVhc3ROdW1iZXJPZkVsZW1lbnRzIiwiX2ludGVybmFsUGF0aCIsImRvY3VtZW50SWQiLCJfRE9DVU1FTlRfSUQiLCJSRVNFUlZFRCIsIk9BdXRoVG9rZW4iLCJhdXRoSGVhZGVycyIsIkVtcHR5Q3JlZGVudGlhbHNQcm92aWRlciIsImNoYW5nZUxpc3RlbmVyIiwiRmlyZWJhc2VDcmVkZW50aWFsc1Byb3ZpZGVyIiwiYXV0aFByb3ZpZGVyIiwidG9rZW5MaXN0ZW5lciIsInJlY2VpdmVkSW5pdGlhbFVzZXIiLCJ0b2tlbkNvdW50ZXIiLCJmb3JjZVJlZnJlc2giLCJnZXRVc2VyIiwiYWRkQXV0aFRva2VuTGlzdGVuZXIiLCJpbml0aWFsVG9rZW5Db3VudGVyIiwidG9rZW5EYXRhIiwiYWNjZXNzVG9rZW4iLCJyZW1vdmVBdXRoVG9rZW5MaXN0ZW5lciIsImN1cnJlbnRVaWQiLCJnZXRVaWQiLCJGaXJzdFBhcnR5VG9rZW4iLCJnYXBpIiwic2Vzc2lvbkluZGV4IiwiaGVhZGVycyIsImF1dGhIZWFkZXIiLCJnZXRBdXRoSGVhZGVyVmFsdWVGb3JGaXJzdFBhcnR5IiwiRmlyc3RQYXJ0eUNyZWRlbnRpYWxzUHJvdmlkZXIiLCJtYWtlQ3JlZGVudGlhbHNQcm92aWRlciIsImlzUGFydGlhbE9ic2VydmVyIiwiVXNlckRhdGFTb3VyY2UiLCJGaWVsZFZhbHVlSW1wbCIsIl9tZXRob2ROYW1lIiwiRGVsZXRlRmllbGRWYWx1ZUltcGwiLCJzZXJ2ZXJUaW1lc3RhbXAiLCJTZXJ2ZXJUaW1lc3RhbXBGaWVsZFZhbHVlSW1wbCIsImFycmF5VW5pb24iLCJBcnJheVVuaW9uRmllbGRWYWx1ZUltcGwiLCJhcnJheVJlbW92ZSIsIkFycmF5UmVtb3ZlRmllbGRWYWx1ZUltcGwiLCJOdW1lcmljSW5jcmVtZW50RmllbGRWYWx1ZUltcGwiLCJfZWxlbWVudHMiLCJfb3BlcmFuZCIsIlB1YmxpY0ZpZWxkVmFsdWUiLCJSRVNFUlZFRF9GSUVMRF9SRUdFWCIsIlBhcnNlZFNldERhdGEiLCJQYXJzZWRVcGRhdGVEYXRhIiwiaXNXcml0ZSIsImRhdGFTb3VyY2UiLCJNZXJnZVNldCIsIlVwZGF0ZSIsIkFyZ3VtZW50IiwiQXJyYXlBcmd1bWVudCIsIlBhcnNlQ29udGV4dCIsImFycmF5RWxlbWVudCIsInZhbGlkYXRlUGF0aCIsImNoaWxkQ29udGV4dEZvckZpZWxkIiwiY2hpbGRQYXRoIiwidmFsaWRhdGVQYXRoU2VnbWVudCIsImNoaWxkQ29udGV4dEZvckZpZWxkUGF0aCIsImNoaWxkQ29udGV4dEZvckFycmF5IiwiY3JlYXRlRXJyb3IiLCJmaWVsZERlc2NyaXB0aW9uIiwiRG9jdW1lbnRLZXlSZWZlcmVuY2UiLCJVc2VyRGF0YUNvbnZlcnRlciIsInByZUNvbnZlcnRlciIsInBhcnNlU2V0RGF0YSIsInZhbGlkYXRlUGxhaW5PYmplY3QiLCJ1cGRhdGVEYXRhIiwicGFyc2VEYXRhIiwicGFyc2VNZXJnZURhdGEiLCJ2YWxpZGF0ZWRGaWVsZFBhdGhzIiwiZmllbGRQYXRoc18xIiwic3RyaW5nT3JGaWVsZFBhdGgiLCJmaWVsZFBhdGhGcm9tRG90U2VwYXJhdGVkU3RyaW5nIiwicGFyc2VVcGRhdGVEYXRhIiwiZmllbGRNYXNrUGF0aHMiLCJjaGlsZENvbnRleHQiLCJydW5QcmVDb252ZXJ0ZXIiLCJwYXJzZWRWYWx1ZSIsIm1hc2siLCJwYXJzZVVwZGF0ZVZhcmFyZ3MiLCJtb3JlRmllbGRzQW5kVmFsdWVzIiwiZmllbGRQYXRoRnJvbUFyZ3VtZW50IiwidmFsdWVfMSIsInBhcnNlUXVlcnlWYWx1ZSIsImFsbG93QXJyYXlzIiwibG9va3NMaWtlSnNvbk9iamVjdCIsInBhcnNlT2JqZWN0IiwicGFyc2VTZW50aW5lbEZpZWxkVmFsdWUiLCJwYXJzZUFycmF5IiwicGFyc2VTY2FsYXJWYWx1ZSIsImVudHJ5SW5kZXgiLCJhcnJheV8xIiwicGFyc2VkRW50cnkiLCJwYXJzZWRFbGVtZW50cyIsInBhcnNlQXJyYXlUcmFuc2Zvcm1FbGVtZW50cyIsIm51bWVyaWNJbmNyZW1lbnQiLCJzZWFyY2giLCJmcm9tRG90U2VwYXJhdGVkU3RyaW5nIiwiREVGQVVMVF9IT1NUIiwiREVGQVVMVF9TU0wiLCJERUZBVUxUX1RJTUVTVEFNUFNfSU5fU05BUFNIT1RTIiwiREVGQVVMVF9GT1JDRV9MT05HX1BPTExJTkciLCJDQUNIRV9TSVpFX1VOTElNSVRFRCIsIkZpcmVzdG9yZVNldHRpbmdzIiwiZXhwZXJpbWVudGFsRm9yY2VMb25nUG9sbGluZyIsIkZpcmVzdG9yZSIsImRhdGFiYXNlSWRPckFwcCIsIl9maXJlYmFzZUFwcCIsIl9xdWV1ZSIsImVuc3VyZUNsaWVudENvbmZpZ3VyZWQiLCJfZmlyZXN0b3JlQ2xpZW50IiwiX2RhdGFiYXNlSWQiLCJkYXRhYmFzZUlkRnJvbUFwcCIsIl9wZXJzaXN0ZW5jZUtleSIsIl9jcmVkZW50aWFscyIsImV4dGVybmFsXzEiLCJfc2V0dGluZ3MiLCJfZGF0YUNvbnZlcnRlciIsImNyZWF0ZURhdGFDb252ZXJ0ZXIiLCJzZXR0aW5nc0xpdGVyYWwiLCJuZXdTZXR0aW5ncyIsImVuYWJsZVBlcnNpc3RlbmNlIiwiZXhwZXJpbWVudGFsVGFiU3luY2hyb25pemF0aW9uIiwiY29uZmlndXJlQ2xpZW50IiwibWFrZURhdGFiYXNlSW5mbyIsIm9uU25hcHNob3RzSW5TeW5jIiwiYXJnIiwib25TbmFwc2hvdHNJblN5bmNJbnRlcm5hbCIsImFzeW5jT2JzZXJ2ZXIiLCJEb2N1bWVudFJlZmVyZW5jZSIsInRoaXNEYiIsIm90aGVyRGIiLCJmaXJlc3RvcmUiLCJfa2V5IiwicGF0aFN0cmluZyIsIkNvbGxlY3Rpb25SZWZlcmVuY2UiLCJmb3JQYXRoIiwiUXVlcnkkMSIsIlRyYW5zYWN0aW9uJDEiLCJXcml0ZUJhdGNoIiwiX2FyZVRpbWVzdGFtcHNJblNuYXBzaG90c0VuYWJsZWQiLCJfZmlyZXN0b3JlIiwiX3RyYW5zYWN0aW9uIiwiZG9jdW1lbnRSZWYiLCJ2YWxpZGF0ZVJlZmVyZW5jZSIsIkRvY3VtZW50U25hcHNob3QiLCJfY29udmVydGVyIiwidmFsaWRhdGVTZXRPcHRpb25zIiwiYXBwbHlGaXJlc3RvcmVEYXRhQ29udmVydGVyIiwiY29udmVydGVkVmFsdWUiLCJtZXJnZSIsIm1lcmdlRmllbGRzIiwiZmllbGRPclVwZGF0ZURhdGEiLCJfbXV0YXRpb25zIiwiX2NvbW1pdHRlZCIsInZlcmlmeU5vdENvbW1pdHRlZCIsIm9uU25hcHNob3QiLCJjdXJyQXJnIiwiaW50ZXJuYWxPcHRpb25zIiwib25TbmFwc2hvdEludGVybmFsIiwiZXJySGFuZGxlciIsImludGVybmFsTGlzdGVuZXIiLCJ2YWxpZGF0ZUdldE9wdGlvbnMiLCJnZXRWaWFTbmFwc2hvdExpc3RlbmVyIiwid2l0aENvbnZlcnRlciIsIlNuYXBzaG90TWV0YWRhdGEiLCJfZG9jdW1lbnQiLCJfZnJvbUNhY2hlIiwiX2hhc1BlbmRpbmdXcml0ZXMiLCJ2YWxpZGF0ZVNuYXBzaG90T3B0aW9ucyIsIlF1ZXJ5RG9jdW1lbnRTbmFwc2hvdCIsImZyb21GaXJlc3RvcmUiLCJ0b0pTT2JqZWN0IiwidG9KU1ZhbHVlIiwidG9KU0FycmF5IiwiX3F1ZXJ5Iiwib3BTdHIiLCJ3aGVyZUZpbHRlck9wRW51bXMiLCJvcGVyYXRvciIsInZhbGlkYXRlRGlzanVuY3RpdmVGaWx0ZXJFbGVtZW50cyIsInJlZmVyZW5jZUxpc3QiLCJwYXJzZURvY3VtZW50SWRWYWx1ZSIsInZhbGlkYXRlTmV3RmlsdGVyIiwiZGlyZWN0aW9uU3RyIiwidmFsaWRhdGVOZXdPcmRlckJ5IiwibGltaXRUb0xhc3QiLCJkb2NPckZpZWxkIiwiYm91bmRGcm9tRG9jT3JGaWVsZHMiLCJzdGFydEFmdGVyIiwiZW5kQmVmb3JlIiwiYm91bmRGcm9tRG9jdW1lbnQiLCJhbGxGaWVsZHMiLCJib3VuZEZyb21GaWVsZHMiLCJyYXdWYWx1ZSIsIndyYXBwZWQiLCJ2YWxpZGF0ZUhhc0V4cGxpY2l0T3JkZXJCeUZvckxpbWl0VG9MYXN0IiwiUXVlcnlTbmFwc2hvdCIsImZpcmVzdG9yZUNsaWVudCIsImRvY3VtZW50SWRWYWx1ZSIsImFycmF5T3BzIiwiZGlzanVuY3RpdmVPcHMiLCJpc0FycmF5T3AiLCJpc0Rpc2p1bmN0aXZlT3AiLCJleGlzdGluZ0ZpZWxkIiwidmFsaWRhdGVPcmRlckJ5QW5kSW5lcXVhbGl0eU1hdGNoIiwiY29uZmxpY3RpbmdPcCIsImluZXF1YWxpdHkiLCJfb3JpZ2luYWxRdWVyeSIsIl9zbmFwc2hvdCIsIl9jYWNoZWRDaGFuZ2VzIiwiX2NhY2hlZENoYW5nZXNJbmNsdWRlTWV0YWRhdGFDaGFuZ2VzIiwiY29udmVydFRvRG9jdW1lbnRJbXBsIiwibGFzdERvY18xIiwiaW5kZXhfMSIsIm9sZEluZGV4IiwibmV3SW5kZXgiLCJpbmRleFRyYWNrZXJfMSIsInJlc3VsdENoYW5nZVR5cGUiLCJjaGFuZ2VzRnJvbVNuYXBzaG90IiwidGhyb3dEb2NDaGFuZ2VzTWV0aG9kRXJyb3IiLCJfcGF0aCIsImRvY1JlZiIsInRvRmlyZXN0b3JlIiwiUHVibGljRmlyZXN0b3JlIiwiUHVibGljVHJhbnNhY3Rpb24iLCJQdWJsaWNXcml0ZUJhdGNoIiwiUHVibGljRG9jdW1lbnRSZWZlcmVuY2UiLCJQdWJsaWNEb2N1bWVudFNuYXBzaG90IiwiUHVibGljUXVlcnlEb2N1bWVudFNuYXBzaG90IiwiUHVibGljUXVlcnkiLCJQdWJsaWNRdWVyeVNuYXBzaG90IiwiUHVibGljQ29sbGVjdGlvblJlZmVyZW5jZSIsImZpcmVzdG9yZU5hbWVzcGFjZSIsImNvbmZpZ3VyZUZvckZpcmViYXNlIiwic2hhbGxvd0NvcHkiLCJOb29wQ29ubmVjdGl2aXR5TW9uaXRvciIsIkJyb3dzZXJDb25uZWN0aXZpdHlNb25pdG9yIiwibmV0d29ya0F2YWlsYWJsZUxpc3RlbmVyIiwib25OZXR3b3JrQXZhaWxhYmxlIiwibmV0d29ya1VuYXZhaWxhYmxlTGlzdGVuZXIiLCJvbk5ldHdvcmtVbmF2YWlsYWJsZSIsImNvbmZpZ3VyZU5ldHdvcmtNb25pdG9yaW5nIiwiU3RyZWFtQnJpZGdlIiwic2VuZEZuIiwiY2xvc2VGbiIsIndyYXBwZWRPbk9wZW4iLCJ3cmFwcGVkT25DbG9zZSIsIndyYXBwZWRPbk1lc3NhZ2UiLCJjYWxsT25PcGVuIiwiY2FsbE9uQ2xvc2UiLCJjYWxsT25NZXNzYWdlIiwiTE9HX1RBRyRkIiwiUlBDX05BTUVfUkVTVF9NQVBQSU5HIiwiWF9HT09HX0FQSV9DTElFTlRfVkFMVUUiLCJXZWJDaGFubmVsQ29ubmVjdGlvbiIsImJhc2VVcmwiLCJtb2RpZnlIZWFkZXJzRm9yUmVxdWVzdCIsIm1ha2VVcmwiLCJ4aHIiLCJYaHJJbyIsImxpc3Rlbk9uY2UiLCJFdmVudFR5cGUiLCJDT01QTEVURSIsImdldExhc3RFcnJvckNvZGUiLCJFcnJvckNvZGUiLCJOT19FUlJPUiIsImpzb24iLCJnZXRSZXNwb25zZUpzb24iLCJUSU1FT1VUIiwiSFRUUF9FUlJPUiIsImdldFN0YXR1cyIsImdldFJlc3BvbnNlVGV4dCIsInJlc3BvbnNlRXJyb3IiLCJmaXJlc3RvcmVFcnJvckNvZGUiLCJzZXJ2ZXJFcnJvciIsInRvTG93ZXJDYXNlIiwiZ2V0TGFzdEVycm9yIiwianNvbk9iaiIsInJlcXVlc3RTdHJpbmciLCJ1cmxQYXJ0cyIsIndlYmNoYW5uZWxUcmFuc3BvcnQiLCJjcmVhdGVXZWJDaGFubmVsVHJhbnNwb3J0IiwiYmFja2dyb3VuZENoYW5uZWxUZXN0IiwiaHR0cFNlc3Npb25JZFBhcmFtIiwiaW5pdE1lc3NhZ2VIZWFkZXJzIiwibWVzc2FnZVVybFBhcmFtcyIsInNlbmRSYXdKc29uIiwic3VwcG9ydHNDcm9zc0RvbWFpblhociIsImludGVybmFsQ2hhbm5lbFBhcmFtcyIsImZvcndhcmRDaGFubmVsUmVxdWVzdFRpbWVvdXRNcyIsImh0dHBIZWFkZXJzT3ZlcndyaXRlUGFyYW0iLCJjaGFubmVsIiwiY3JlYXRlV2ViQ2hhbm5lbCIsIm9wZW5lZCIsImNsb3NlZCIsInN0cmVhbUJyaWRnZSIsInVuZ3VhcmRlZEV2ZW50TGlzdGVuIiwicGFyYW0iLCJXZWJDaGFubmVsIiwiT1BFTiIsIkNMT1NFIiwiTUVTU0FHRSIsIm1zZ0RhdGEiLCJtc2dEYXRhT3JFcnJvciIsInN0YXR1c18yIiwibWFwQ29kZUZyb21ScGNTdGF0dXMiLCJ1cmxScGNOYW1lIiwiQnJvd3NlclBsYXRmb3JtIiwiZW5jb2RlZCIsInJlZ2lzdGVyRmlyZXN0b3JlIiwiY2FjaGVkU2V0VGltZW91dCIsImNhY2hlZENsZWFyVGltZW91dCIsImRlZmF1bHRTZXRUaW1vdXQiLCJkZWZhdWx0Q2xlYXJUaW1lb3V0IiwicnVuVGltZW91dCIsImZ1biIsImN1cnJlbnRRdWV1ZSIsImRyYWluaW5nIiwicXVldWVJbmRleCIsImNsZWFuVXBOZXh0VGljayIsImRyYWluUXVldWUiLCJ0aW1lb3V0IiwibWFya2VyIiwicnVuQ2xlYXJUaW1lb3V0IiwiSXRlbSIsIm5leHRUaWNrIiwidGl0bGUiLCJicm93c2VyIiwiZW52IiwiYXJndiIsInZlcnNpb25zIiwib24iLCJhZGRMaXN0ZW5lciIsIm9uY2UiLCJvZmYiLCJyZW1vdmVMaXN0ZW5lciIsInJlbW92ZUFsbExpc3RlbmVycyIsImVtaXQiLCJwcmVwZW5kTGlzdGVuZXIiLCJwcmVwZW5kT25jZUxpc3RlbmVyIiwiYmluZGluZyIsImN3ZCIsImNoZGlyIiwidW1hc2siLCJjb21tb25qc0dsb2JhbCIsImdsb2JhbFRoaXMiLCJnb29nIiwiYWEiLCJiYSIsImNhIiwiZGEiLCJlYSIsImZhIiwidW5zaGlmdCIsInciLCJ4IiwiTiIsInhiIiwiaCIsImxhIiwiRyIsImphIiwib2EiLCJwYSIsInFhIiwiQSIsInJhIiwidHJpbSIsInoiLCJzYSIsInRhIiwidXNlckFnZW50IiwidmEiLCJ3YSIsInhhIiwieWEiLCJ6YSIsIklhIiwiQ2EiLCJCIiwiRGEiLCJFYSIsIkZhIiwiR2EiLCJIYSIsImRvY3VtZW50TW9kZSIsIkphIiwiS2EiLCJMYSIsInBhcnNlRmxvYXQiLCJOYSIsIkJhIiwiTWEiLCJBYSIsInBhcnNlSW50IiwiT2EiLCJjb21wYXRNb2RlIiwiUGEiLCJRYSIsIlJhIiwiQyIsIkQiLCJyZWxhdGVkVGFyZ2V0IiwiYnV0dG9uIiwic2NyZWVuWSIsInNjcmVlblgiLCJjbGllbnRZIiwiY2xpZW50WCIsIm1ldGFLZXkiLCJzaGlmdEtleSIsImFsdEtleSIsImN0cmxLZXkiLCJwb2ludGVySWQiLCJwb2ludGVyVHlwZSIsImNoYW5nZWRUb3VjaGVzIiwic3JjRWxlbWVudCIsIm5vZGVOYW1lIiwiZnJvbUVsZW1lbnQiLCJ0b0VsZW1lbnQiLCJwYWdlWCIsInBhZ2VZIiwiU2EiLCJkZWZhdWx0UHJldmVudGVkIiwiMiIsIjMiLCI0IiwicHJldmVudERlZmF1bHQiLCJyZXR1cm5WYWx1ZSIsImtleUNvZGUiLCJGIiwiVGEiLCJVYSIsInNyYyIsImNhcHR1cmUiLCJYIiwiWiIsIlZhIiwiV2EiLCJZYSIsIlhhIiwiWmEiLCIkYSIsImJiIiwiZWIiLCJmYiIsImliIiwiZ2IiLCJhdHRhY2hFdmVudCIsImhiIiwia2IiLCJkZXRhY2hFdmVudCIsImxiIiwibWIiLCJoYW5kbGVFdmVudCIsIkoiLCJuYiIsIkUiLCJqYiIsImRpc3BhdGNoRXZlbnQiLCJvYiIsInBiIiwicWIiLCJzYiIsInJiIiwidGIiLCJ1YiIsInZiIiwid2IiLCJBYiIsInliIiwiemIiLCJDYiIsIkRiIiwiTCIsIkViIiwiRmIiLCJHYiIsIlUiLCJIIiwiSGIiLCJJYiIsIkpiIiwiS2IiLCJJIiwiTGIiLCJNYiIsIksiLCJOYiIsIk9iIiwiUGIiLCJRYiIsIlJiIiwiU2IiLCJUYiIsIldiIiwiVWIiLCJWYiIsIlhiIiwiTSIsIlYiLCJPIiwiWWIiLCJSIiwiUyIsIlpiIiwiJGIiLCJhYyIsImJjIiwiY2MiLCJkYyIsImVjIiwiZmMiLCIkIiwiWSIsImtjIiwibGMiLCJpYyIsImpjIiwibWMiLCJhYiIsImdjIiwibmEiLCJvYyIsIm5jIiwiUSIsInJjIiwicGMiLCJUIiwiaGMiLCJzYyIsInVjIiwidmMiLCJ3YyIsInhjIiwieWMiLCJ6YyIsIkFjIiwiTWMiLCJJYyIsIkdjIiwiQmMiLCJIYyIsImFicyIsImRlY29kZVVSSSIsImRlY29kZVVSSUNvbXBvbmVudCIsImVuY29kZVVSSSIsIkxjIiwiQ2MiLCJEYyIsIkVjIiwiRmMiLCJsYXN0SW5kZXhPZiIsInRjIiwiTmMiLCJTYyIsIlVjIiwiVmMiLCJXYyIsIlhjIiwiWWMiLCJaYyIsIiRjIiwiYWQiLCJiZCIsIlBlcmZvcm1hbmNlTmF2aWdhdGlvblRpbWluZyIsInBlcmZvcm1hbmNlIiwiZ2V0RW50cmllc0J5VHlwZSIsIm5leHRIb3BQcm90b2NvbCIsImthIiwibWEiLCJjZCIsImRkIiwiZWQiLCJmZCIsImdkIiwiaGQiLCJqZCIsImtkIiwibGQiLCJuZCIsIm9ubG9hZCIsIm9udGltZW91dCIsInFjIiwib2QiLCJwZCIsInFkIiwicmQiLCJzZCIsInZkIiwid2QiLCJ4ZCIsImxvY2F0aW9uIiwicHJvdG9jb2wiLCJzdGF0dXNUZXh0IiwidGQiLCJvbnJlYWR5c3RhdGVjaGFuZ2UiLCJyZWFkeVN0YXRlIiwiZ2V0UmVzcG9uc2VIZWFkZXIiLCJ6ZCIsInlkIiwiQWQiLCJnYSIsImhhIiwiaWEiLCJjb25jdXJyZW50UmVxdWVzdExpbWl0IiwiZmFzdEhhbmRzaGFrZSIsIkJkIiwiQ2QiLCJEZCIsInNlbmRCZWFjb24iLCJJbWFnZSIsIkVkIiwiRmQiLCJHZCIsIkhkIiwiTGQiLCJLZCIsInJvdW5kIiwiQmIiLCJUYyIsIlVkIiwiTWQiLCJOZCIsIkpkIiwibWQiLCJKYyIsImhvc3RuYW1lIiwiS2MiLCJwb3J0IiwiT2QiLCJRZCIsInRlc3RVcmwiLCJQZCIsIm1lc3NhZ2VIZWFkZXJzIiwiY2xpZW50UHJvdG9jb2xIZWFkZXJSZXF1aXJlZCIsIm1lc3NhZ2VDb250ZW50VHlwZSIsIlJkIiwiX19zbV9fIiwiU2QiLCJ0b1VwcGVyQ2FzZSIsIlhNTEh0dHBSZXF1ZXN0IiwiRm9ybURhdGEiLCJzZXRSZXF1ZXN0SGVhZGVyIiwicmVzcG9uc2VUeXBlIiwid2l0aENyZWRlbnRpYWxzIiwidWQiLCJyZXNwb25zZVRleHQiLCJfX2RhdGFfXyIsIklkIiwiVGQiLCJ0bXAiLCJ0bXBfMSIsInRtcF8yIiwidG1wXzMiLCJ0bXBfNCIsInRtcF81IiwiT3J0aG9MaW5lTGluZVJlbGF0aW9uc2hpcFR5cGUiLCJSZWN0UmVjdFJlbGF0aW9uc2hpcFR5cGUiLCJvcnRob0xpbmVMaW5lUmVsYXRpb25zaGlwVHlwZSIsImludGVyc2VjdGlvbiIsIm92ZXJsYXAiLCJwdHNEaXN0YW5jZSIsInB0MSIsInB0MiIsInNxcnQiLCJsaW5lTWlkZGxlUHQiLCJsaW5lIiwiYXJlTGluZXNFcXVhbCIsImxpbmUxIiwibGluZTIiLCJhcmVQb2ludHNFcXVhbCIsInBvaW50MSIsInBvaW50MiIsInJlYWRJbnB1dEZpbGUiLCJmaWxlIiwicmVqIiwicmVhZGVyIiwiRmlsZVJlYWRlciIsInJlYWRBc1RleHQiLCJnZXRVcmxQYXJhbXMiLCJwYXJzZXIiLCJocmVmIiwidmFycyIsInBhaXIiLCJlbXB0eU5vZGUiLCJjcmVhdGVCQm94IiwiZmlsbGV0IiwicmVjdCIsImNyZWF0ZUVsZW1lbnROUyIsImdldEJCb3giLCJ3aWR0aCIsImhlaWdodCIsImNyZWF0ZUJCb3gyIiwiZ2V0UmVsYXRpdmVDb29yZHMiLCJzdmdEb2MiLCJvcmlnaW5QdCIsImNyZWF0ZVNWR1BvaW50IiwibWF0cml4VHJhbnNmb3JtIiwiZ2V0U2NyZWVuQ1RNIiwiaW52ZXJzZSIsInV1aWR2NCIsImNyeXB0byIsImdldFJhbmRvbVZhbHVlcyIsImdldFJlY3RTZWdtZW50cyIsImNvcm5lckEiLCJjb3JuZXJCIiwiY29ybmVyQyIsImNvcm5lckQiLCJpc1B0SW5SZWN0IiwicHQiLCJpbmNsdXNpdmUiLCJpc0xpbmVJblJlY3QiLCJpc051bUJldHdlZW4iLCJsaW1pdDEiLCJsaW1pdDIiLCJpc0xpbmVIb3Jpem9udGFsIiwiaXNMaW5lVmVydGljYWwiLCJzb3J0UHRzQnlEaXN0YW5jZSIsInB0cyIsInJlZlB0IiwiaW5jbHVkZVJlZlB0IiwicmVmZXJlbmNlUHQiLCJzb3J0ZWRQdHMiLCJHZW9tZXRyeUNhbGMiLCJsaW5lc0JldHdlZW5QdHMiLCJyZWN0UmVjdFJlbGF0aW9uc2hpcCIsInJlY3QxIiwicmVjdDIiLCJNYXRjaCIsIkFJbnNpZGVCIiwiQkluc2lkZUEiLCJJbnRlcnNlY3QiLCJUYW5nZW50IiwiRGlzam9pbnQiLCJnZXRPcnRob0xpbmVMaW5lUmVsYXRpb25zaGlwIiwiT3J0aG9MaW5lTGluZVJlbGF0aW9uc2hpcCIsIk5vdGhpbmciLCJzdGFydFBvaW50WCIsImVuZFBvaW50WCIsIk92ZXJsYXAiLCJzdGFydFBvaW50WSIsImVuZFBvaW50WSIsInJlY3RhbmdsZXNTaWxob3VldHRlIiwicmVjdHMiLCJyZWN0c1NlZ21lbnRzIiwiZmluYWxTZWdtZW50cyIsIm92ZXJsYXBwZWRTZWdtZW50cyIsImN1cnJlbnRSZWN0U2VnbWVudHMiLCJuZXdDdXJyZW50UmVjdFNlZ21lbnRzIiwicmVjdHNSZWxhdGlvbiIsInNlZ21lbnRJbnRlcnNlY3Rpb25zIiwibGluZXNSZWxhdGlvbnNoaXAiLCJzb3J0ZWRJbnRlcnNlY3Rpb25zIiwic3BsaXRlZFNlZ21lbnRzIiwic3ZnUGF0aEZyb21MaW5lcyIsInBhdGhDb250ZW50IiwidG9GaXhlZCIsIlNWR1dJRFRIIiwiWk9PTVNQRUVEIiwiYWxsb3dQYW5uaW5nIiwiem9vbSIsInNldENvbnRlbnQiLCJkb21wYXJzZXIiLCJET01QYXJzZXIiLCJzdmdDYW52YXMiLCJwYXJzZUZyb21TdHJpbmciLCJkb2N1bWVudEVsZW1lbnQiLCJidXR0b25zIiwic3ZnSW5pdGlhbENsaWNrIiwicHJldlZpZXdCb3giLCJ2aWV3Qm94IiwiYmFzZVZhbCIsIm1vdXNlUG9zaXRpb24iLCJjcmVhdGVDb21tZW50c0dyb3VwIiwiY29tbWVudHNHcm91cCIsInpvb21GYWN0b3IiLCJkZWx0YVkiLCJ4UHJvcCIsInhJbmMiLCJ5UHJvcCIsInlJbmMiLCJtZXRhZGF0YUZpZWxkcyIsInF1ZXJ5SXRlbXMiLCJwYXJlbnRJZCIsInRyYXNoZWQiLCJleGNsdWRlTmFtZSIsIm9ubHlGb2xkZXIiLCJkcml2ZSIsImZpbGVzIiwiZmlsZUlkIiwiYWx0IiwiZmlsZUNvbnRlbnQiLCJmaWxlTWltZVR5cGUiLCJmaWxlTmFtZSIsImZvbGRlcklkIiwiYWNjZXNzX3Rva2VuIiwiZm9ybSIsImFwcGVuZCIsImZldGNoIiwiSGVhZGVycyIsIm9rIiwibmV3VGl0bGUiLCJleGVjdXRlIiwicmVzcCIsImVtYWlsQWRkcmVzcyIsInBlcm1pc3Npb25JZCIsImFib3V0Iiwic2hhcmVyIiwicmVjaXBpZW50cyIsInByb2plY3ROYW1lIiwiZW1haWxzIiwiYXV0aG9yIiwicGhvdG9MaW5rIiwidGV4dCIsIkFwcERhdGEiLCJsYXN0VXBsb2FkZWRQcm9qZWN0IiwiZXJyb3JNc2ciLCJmaWxlQ29udGVudFJhdyIsInByb2plY3RJbmZvIiwiYXBwTWFpbkZvbGRlcklkIiwiYXBwTWFpbkZvbGRlckRhdGEiLCJsaXN0RmlsZXMiLCJhcHBNYWluRm9sZGVyUmVzIiwiY3JlYXRlRm9sZGVyIiwicHJvamVjdEZvbGRlcklkIiwicHJvamVjdHNEYXRhIiwicHJvaiIsImZvbGRlckNyZWF0aW9uUHJvbWlzZSIsInByb2plY3RGb2xkZXJEYXRhIiwiZHJhd2luZ3MiLCJkcmF3aW5nc0ZvbGRlclByb21pc2UiLCJkcmF3aW5nc0ZvbGRlcklkIiwiZHJhd2luZ3NQcm9taXNlcyIsImRyYXdpbmciLCJkcmF3aW5nUHJvbWlzZSIsInVwbG9hZEZpbGUiLCJkcmF3aW5nT2JqIiwiZGVjb2RlciIsIlRleHREZWNvZGVyIiwicmVzcG9uc2VzIiwiZ2V0UmVhZGVyIiwicmVhZCIsImVsZW1lbnRzRGF0YSIsImVsZW1lbnRzRGF0YUZvbGRlclByb21pc2UiLCJlbGVtZW50c0RhdGFGb2xkZXJJZCIsImVsZW1lbnRzRGF0YVByb21pc2VzIiwiZWxlbWVudERhdGEiLCJlbGVtZW50RGF0YVByb21pc2UiLCJwcm9qZWN0c0ZvbGRlcnNSZXMiLCJuZXdQcm9qZWN0cyIsInByb2plY3RzRm9sZGVyc0RhdGEiLCJuZXdQcm9qIiwiYXBwU2V0dEZvbGRlckRhdGEiLCJhcHBTZXR0aW5nc0ZvbGRlcklkIiwidGh1bWJzRm9sZGVyRGF0YSIsInRodW1ic0ZvbGRlcklkIiwiaW1nRGF0YSIsInByb2plY3RUaHVtYkRhdGEiLCJpbWciLCJ0aHVtYklkIiwicHJvamVjdEluZGV4IiwicHJvamVjdE5hbWVSZXMiLCJnZXRGaWxlRGF0YSIsImZpbmRJbmRleCIsInBlcm1pc3Npb25zIiwicHJvalBlcm1pc3Npb25zRGF0YSIsImdldFByb2plY3RUZWFtRGF0YSIsInByb2pTZXR0aW5ncyIsInByb2pTZXR0aW5nc0RhdGEiLCJwcm9qU2V0dGluZ3NDb250ZW50UmVzIiwiZ2V0RmlsZUNvbnRlbnQiLCJkcmF3aW5nc0ZvbGRlckRhdGEiLCJkcmF3aW5nc1JlcyIsImRyYXdpbmdzU3R5bGVzSWQiLCJlbGVtZW50c0RhdGFGb2xkZXJEYXRhIiwiZWxlbWVudHNEYXRhUmVzIiwiY29tbWVudHMiLCJjb21tZW50c0RhdGEiLCJjb21tZW50c0ZpbGVJZCIsImNvbW1lbnRzQ29udGVudFJlcyIsImltYWdlcyIsImltYWdlc0ZvbGRlckRhdGEiLCJpbWFnZXNSZXMiLCJlbGVtZW50c0lkcyIsIm1lbnRpb25zIiwicmVwcmVzZW50YXRpb25zIiwiY3JlYXRlUmVwcmVzZW50YXRpb24iLCJyZWN0YW5nbGVzIiwicmVwcmVzZW50YXRpb24iLCJkYXRhc2V0IiwiTWFpblBhbmVsIiwicGFuZWxzU3RvcmFnZSIsIldvcmtzcGFjZSIsInBhbmVsQ29udGFpbmVyIiwiY2xhc3NMaXN0IiwicGFuZWxHcmlwIiwicGFuZWxDb250ZW50IiwicGFuZWxIZWFkZXIiLCJwYW5lbEJvZHkiLCJwYW5lbEZvb3RlciIsIndvcmtzcGFjZUNvbnRhaW5lciIsInJlc2l6aW5nV2lkdGgiLCJyZXNpemVXaWR0aCIsInJlc2l6aW5nSGVpZ2h0IiwicmVzaXplSGVpZ2h0IiwiYWN0aXZlU2VjdGlvbiIsInBhbmVsU2lkZSIsInNlY3Rpb25zIiwic2V0QWN0aXZlIiwib25jbGljayIsImNsb3Nlc3QiLCJpbm5lclRleHQiLCJtZWRpdW1CcmVha3BvaW50IiwibWF0Y2hNZWRpYSIsInBhbmVsUG9zaXRvbiIsInBhbmVsU2lkZXMiLCJib3R0b20iLCJwYW5lbFdpZHRoIiwic2V0UHJvcGVydHkiLCJwYW5lbEhlaWdodCIsInN0YXJ0WCIsInN0YXJ0V2lkdGgiLCJzdGFydFkiLCJzdGFydEhlaWdodCIsIm9ubW91c2Vkb3duIiwibW91c2VFdmVudCIsInNpZGUiLCJzZXRJbmFjdGl2ZSIsInNlY3Rpb24iLCJhY3RpdmF0ZSIsImJ0biIsInNlY3Rpb25zQXJyYXkiLCJhZGRTZWN0aW9uIiwic2VjdGlvbkluZGV4IiwiYnJlYWtwb2ludCIsImRvY2tUbyIsImZvcm1FbGVtZW50Iiwid29ya3NwYWNlIiwib25zdWJtaXQiLCJjYW5jZWxDcmVhdGVCdG4iLCJnZXRFbGVtZW50QnlJZCIsImFkZENvbW1lbnRCdG4iLCJkZWxldGVCdG4iLCJkZWxldGVDb21tZW50IiwiY29tbWVudElkIiwiZWRpdEJ0biIsImVuYWJsZUVkaXRDb21tZW50IiwiY2FuY2VsVXBkYXRlQnRuIiwiZGlzY2FyZFVwZGF0ZSIsImNvbmZpcm1VcGRhdGVCdG4iLCJ0ZXh0SW5wdXQiLCJuYW1lZEl0ZW0iLCJtZW50aW9uc1NlY3Rpb24iLCJtZW50aW9uc0lucHV0IiwiYnV0dG9uc01vZGVzIiwic2hvd01lbnRpb25zU2VjdGlvbiIsImhpZGVNZW50aW9uc1NlY3Rpb24iLCJidXR0b25zVmlzaWJpbGl0eU1vZGUiLCJjaGlsZHJlbiIsImRpc3BsYXkiLCJ1bnNhdmVkQ29tbWVudHNEYXRhIiwibWFpblBhbmVsIiwicmVtb3ZlU2VjdGlvbiIsImRpc2FibGVGb3JtIiwiZGlzYWJsZWQiLCJlbmFibGVGb3JtIiwidmlld0NvbW1lbnQiLCJjb21tZW50IiwiZmlsbElucHV0cyIsIm9uY2hhbmdlIiwidXBkYXRlQ29tbWVudCIsImdldFNlbGVjdGVkTWVtYmVycyIsInNlbGVjdGVkT3B0aW9ucyIsIm1lbnRpb25FbWFpbCIsInBlcm1pc3Npb24iLCJkaXNwbGF5TmFtZSIsImlubmVySFRNTCIsInByb2plY3REYXRhIiwiQXBwIiwiYXBwZW5kZWREcmF3aW5nc0lkcyIsImVsZW1lbnRzQ29tbWVudHMiLCJwcm9qZWN0c0xpc3RCdG4iLCJkcmF3aW5nc0J0bnMiLCJzYXZlQnRuIiwiY3JlYXRlRHJhd2luZ3NCdG5zIiwidG9vbGJhcnNDb250YWluZXIiLCJwcm9wc1RhYmxlc0NvbnRhaW5lciIsInBhcmFtc1RhYmxlc0NvbnRhaW5lciIsImNvbW1lbnREYXRhIiwiY29tbWVudE9iaiIsImNvbW1lbnRzQ2hhbmdlZCIsImNvbW1lbnRGb3JtIiwiZHJhd2luZ3NDb250YWluZXIiLCJ3b3Jrc3BhY2VzQ29udGFpbmVyIiwibWFuYWdlVG9vbHMiLCJUb29sIiwiYWN0aXZlRHJhd2luZyIsImFjdGl2ZVRvb2wiLCJjdXJyZW50VGFyZ2V0Iiwia2lsbCIsImNvbW1lbnRzQ2hhbmdlc1Vuc2F2ZWQiLCJzZXREcmF3aW5nIiwiY3VycmVudFNlbGVjdGlvbiIsInJlbW92ZURyYXdpbmdTZWxlY3Rpb25BcHBlYXJhbmNlIiwidmlzaWJpbGl0eSIsImluY2x1ZGVzIiwiZ3JvdXBDcmVhdGVkIiwiZWxlbXNGb3JDb21tZW50UmVwcmVzZW50YXRpb24iLCJhZGREcmF3aW5nU2VsZWN0aW9uQXBwZWFyYW5jZSIsImRyYXdpbmdzSXRlbXMiLCJkcmF3aW5nc1N0eWxlc1RhZyIsInRvb2xCdG4iLCJtdWx0aXBsZVNlbGVjdGlvbiIsIm1hbmFnZVNlbGVjdGlvbiIsInNlbGVjdGlvbiIsInNlbGVjdCIsImRlc2VsZWN0IiwiY2xlYXJBbGxTZWxlY3Rpb24iLCJhZGRTZWxlY3Rpb25BcHBlYXJhbmNlIiwiZWxlbWVudElkIiwiZWwiLCJjbGVhclNlbGVjdGlvbkFwcGVhcmFuY2UiLCJnZXREcmF3aW5nU2VsZWN0ZWRFbGVtZW50c1JlZnMiLCJzZWxlY3RlZEVsZW1lbnRzIiwiRWxlbWVudFNlbGVjdGlvbiIsInN1cGVyIiwiYm91bmRpbmdCb3giLCJ3YWl0aW5nRm9yQ29tbWVudCIsImNhbmNlbENvbW1lbnQiLCJtZW1iZXJzRW1haWxzIiwiY3VycmVudFVzZXJFbWFpbCIsImdldEN1cnJlbnRVc2VyIiwibWVtYmVyIiwiYWRkQ29tbWVudCIsImhhc1VzZWRQYW5lbCIsInNlbGVjdGVkRW1haWxzIiwiY3VycmVudFVzZXJOYW1lIiwiY3VycmVudFVzZXJQaG90byIsInBlbmRpbmdOb3RpZmljYXRpb25zVG9TZW5kIiwidXNlck5hbWUiLCJ1c2VyUGhvdG8iLCJ0ZXh0Q29udGVudCIsInNlbEVsZW1lbnRzUmVmIiwiY3VycmVudEVsZW1lbnREYXRhIiwic2hvd0VsZW1lbnREYXRhIiwiY2F0ZWdvcnkiLCJjYXRlZ29yeURhdGEiLCJjcmVhdGVEYXRhVGFibGUiLCJwYXJhbWV0ZXJzIiwiYWRkU2VjdGlvbnMiLCJlbnRyaWVzQXJyYXkiLCJjYXRlZ29yaWVzVGl0bGVzIiwiZGF0YUJ5Q2F0ZWdvcmllcyIsImNhdGVnb3J5SW5kZXgiLCJ0YWJsZVJvdyIsImRhdGFUYWJsZSIsInNoYXJlUHJvamVjdENvbnRhaW5lciIsInBlbmRpbmdUb1JlbW92ZSIsInBlbmRpbmdUb0FkZCIsImh0bWxDb250YWluZXIiLCJzaGFyZUZvcm0iLCJzaGFyZUZvcm1FcnJvck1zZyIsImNvbmZpcm1DaGFuZ2VzQnRucyIsInNhdmVDaGFuZ2VzQnRuIiwiY2FuY2VsQ2hhbmdlc0J0biIsIndhaXRpbmdBbmltYXRpb24iLCJjdXJyZW50VXNlcnNDb250ZW50IiwiY3VycmVudFVzZXJzVGFibGUiLCJwZW5kaW5nVXNlcnNDb250ZW50IiwicGVuZGluZ1VzZXJzVG9BZGRUYWJsZSIsInNoYXJlTm90aWZpY2F0aW9uQ29udGFpbmVyIiwic2hhcmVOb3RpZmljYXRpb25JbnB1dCIsInByb2plY3RzTGlzdCIsImFjdGlvbkJ0biIsInN0YWdlTWVtYmVyVG9SZW1vdmUiLCJwYXJlbnRFbGVtZW50IiwidW5zdGFnZU1lbWJlclRvUmVtb3ZlIiwidW5zdGFnZU1lbWJlclRvQWRkIiwic2F2ZUNoYW5nZXMiLCJzdGFnZU1lbWJlclRvQWRkIiwic2V0VXBEaWFsb2ciLCJwcm9qZWN0SXRlbSIsInNoYXJlZCIsInJvbGUiLCJpbnNlcnRBZGphY2VudEhUTUwiLCJjaGVja2VkIiwiY2xvc2VNb2RhbERpYWxvZyIsIml0ZW1JbmRleCIsImVtYWlsIiwiYWRkU3RhZ2VkTWVtYmVycyIsImFkZE1lbWJlcnNQcm9taXNlcyIsInNoYXJlRmlsZSIsInJlbW92ZVN0YWdlZE1lbWJlcnMiLCJyZW1vdmVNZW1iZXJzUHJvbWlzZXMiLCJzdG9wU2hhcmluZ0ZpbGUiLCJhZGRpdGlvblN1Y2Nlc3MiLCJyZW1vdmFsU3VjY2VzcyIsInJlc0FyciIsInNlbmRTaGFyaW5nUHJvamVjdEVtYWlsIiwic2F2ZU1lc3NhZ2luZ0RldmljZVRva2VuIiwic2hvd01lc3NhZ2UiLCJub3RpZmljYXRpb25zQnRuIiwibm90aWZpY2F0aW9uc0NvbnRhaW5lciIsIm5vdGlmaWNhdGlvbnNMaXN0IiwidG9nZ2xlIiwidmlld05vdGlmaWNhdGlvbiIsIm5vdGlmaWNhdGlvbnMiLCJub3RpZmljYXRpb25PYmoiLCJub3RpZmljYXRpb25FbGVtZW50Iiwibm90aWZpY2F0aW9uSWQiLCJwcmVwZW5kIiwibm90aWZpY2F0aW9uIiwicmVuYW1lUHJvamVjdENvbnRhaW5lciIsImVtcHR5SW5wdXRWYWx1ZSIsInJlbmFtZUZvcm0iLCJyZW5hbWVQcm9qZWN0RXJyb3JNc2ciLCJjYW5jZWxCdG4iLCJyZW5hbWVQcm9qZWN0Iiwic2V0SW5wdXRWYWx1ZSIsInByb2plY3RMaXN0SXRlbSIsInByb2pJZCIsImN1cnJlbnROYW1lIiwicmVuYW1lRmlsZSIsInByb2plY3RSZW5hbWVkUmVzIiwidmlzaWJsZSIsIkhUTUxDb250YWluZXIiLCJtZW51TGlzdENvbnRhaW5lciIsInRvZ2dsZU1lbnUiLCJ0YXJnZXRFbGVtZW50IiwiY2xlYXJNZW51IiwiZ2VuZXJhdGVNZW51IiwiY29udGV4dE1lbnVEYXRhIiwic2V0UG9zaXRpb24iLCJjb21tYW5kIiwidG9wIiwiaXRlbXNDb250YWluZXIiLCJEb2N1bWVudEZyYWdtZW50IiwicHJvakl0ZW1Db250ZW50IiwiY3htZW51Iiwic2hvd1ZpZXdwb3J0RGlhbG9nIiwiZnVuY3Rpb24iLCJkZWxldGVGaWxlIiwicHJvakluZGV4IiwiaGlkZVZpZXdwb3J0TWVzc2FnZSIsInNoYXJlUHJvamVjdERpYWxvZyIsInNob3dNb2RhbERpYWxvZyIsIm1vZGFsRGlhbG9nQ29udGFpbmVyIiwicmVuYW1lUHJvamVjdERpYWxvZyIsInVzZXJJbmZvQ29udGFpbmVyIiwibW9kYWxEaWFsb2dDb250ZW50IiwibW9kYWxEaWFsb2dzU3RvcmFnZSIsImNsb3NlTW9kYWxCdG4iLCJ2aWV3cG9ydE1lc3NhZ2UiLCJwcm9qZWN0c0xpc3RDb250YWluZXIiLCJjbG9zZVByb2plY3RzTGlzdEJ0biIsInNhdmVDb21tZW50c0RhdGEiLCJjbG9zZVByb2plY3RzTGlzdCIsIm9wZW5Qcm9qZWN0c0xpc3QiLCJnb1RvUHJvamVjdCIsInVwbG9hZEZpbGVGb3JtIiwiZmlsZUlucHV0Iiwic3VibWl0RmlsZUJ0biIsIm5leHRFbGVtZW50U2libGluZyIsImNyZWF0ZVByb2plY3QiLCJ1cGRhdGVQcm9qZWN0c0xpc3QiLCJtZXNzYWdlQ29udGFpbmVyIiwiY2xvc2VNZXNzYWdlIiwib25yZXNpemUiLCJhZGp1c3RJdGVtcyIsImN1cnJlbnRXb3Jrc3BhY2UiLCJub3RpZmljYXRpb25zTWFuYWdlciIsImNvbnRleHRNZW51Iiwic2V0VXNlckluZm8iLCJnZXRVc2VySW5mbyIsInVzZXJJbmZvUmVzIiwidXNlckluZm8iLCJzYXZpbmdTdWNjZXNzZnVsIiwianNvbkRhdGFUb1NhdmUiLCJjb21tZW50c0ZpbGVDcmVhdGlvblJlcyIsInVwZGF0ZUZpbGVDb250ZW50IiwiY29tbWVudHNGaWxlVXBkYXRlUmVzIiwibm90aWZpY2F0aW9uUHJvbWlzZSIsInNlbmROb3RpZmljYXRpb24iLCJvcGVuUHJvamVjdCIsInByZXZpb3VzQWN0aXZlSXRlbSIsImZldGNoUHJvamVjdCIsInByb2plY3QiLCJoaXN0b3J5IiwicmVwbGFjZVN0YXRlIiwicHJvamVjdFRpdGxlIiwibGlzdFByb2plY3RJdGVtcyIsImNyZWF0ZUhUTUxQcm9qZWN0c0xpc3QiLCJwcm9qRGF0YSIsIml0ZW1zSCIsImdldENvbXB1dGVkU3R5bGUiLCJnZXRQcm9wZXJ0eVZhbHVlIiwiaXRlbXNUb3RhbCIsImNlaWwiLCJ0aW1lciIsIm1lc3NhZ2VUaW1lcklkIiwiYWN0aW9ucyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJpbm5lckNvbnRhaW5lciIsImJhY2tncm91bmQiLCJjbG9zYWJsZSIsImZpcnN0RWxlbWVudENoaWxkIiwicGFnZSIsInRoZXJlSXNNZXNzYWdpbmciLCJQRU5ESU5HX1RJTUVPVVRfTVMiLCJQQUNLQUdFX1ZFUlNJT04iLCJJTlRFUk5BTF9BVVRIX1ZFUlNJT04iLCJJTlNUQUxMQVRJT05TX0FQSV9VUkwiLCJUT0tFTl9FWFBJUkFUSU9OX0JVRkZFUiIsIkVSUk9SX0RFU0NSSVBUSU9OX01BUCIsImlzU2VydmVyRXJyb3IiLCJnZXRJbnN0YWxsYXRpb25zRW5kcG9pbnQiLCJleHRyYWN0QXV0aFRva2VuSW5mb0Zyb21SZXNwb25zZSIsInJlcXVlc3RTdGF0dXMiLCJleHBpcmVzSW4iLCJyZXNwb25zZUV4cGlyZXNJbiIsImNyZWF0aW9uVGltZSIsImdldEVycm9yRnJvbVJlc3BvbnNlIiwicmVxdWVzdE5hbWUiLCJyZXNwb25zZUpzb24iLCJlcnJvckRhdGEiLCJzZXJ2ZXJDb2RlIiwic2VydmVyTWVzc2FnZSIsInNlcnZlclN0YXR1cyIsImdldEhlYWRlcnMiLCJhcGlLZXkiLCJBY2NlcHQiLCJnZXRIZWFkZXJzV2l0aEF1dGgiLCJhcHBDb25maWciLCJyZWZyZXNoVG9rZW4iLCJnZXRBdXRob3JpemF0aW9uSGVhZGVyIiwicmV0cnlJZlNlcnZlckVycm9yIiwiY3JlYXRlSW5zdGFsbGF0aW9uUmVxdWVzdCIsImZpZCIsImVuZHBvaW50IiwicmVzcG9uc2VWYWx1ZSIsImF1dGhWZXJzaW9uIiwiYXBwSWQiLCJyZWdpc3RyYXRpb25TdGF0dXMiLCJhdXRoVG9rZW4iLCJzbGVlcCIsIm1zIiwiVkFMSURfRklEX1BBVFRFUk4iLCJJTlZBTElEX0ZJRCIsImdlbmVyYXRlRmlkIiwiZmlkQnl0ZUFycmF5IiwibXNDcnlwdG8iLCJEQVRBQkFTRV9OQU1FIiwiREFUQUJBU0VfVkVSU0lPTiIsIk9CSkVDVF9TVE9SRV9OQU1FIiwiZGJQcm9taXNlIiwiZ2V0RGJQcm9taXNlIiwidXBncmFkZURCIiwidHgiLCJnZXRLZXkiLCJ1cGRhdGVGbiIsIm9sZFZhbHVlIiwiZ2V0SW5zdGFsbGF0aW9uRW50cnkiLCJyZWdpc3RyYXRpb25Qcm9taXNlIiwiaW5zdGFsbGF0aW9uRW50cnkiLCJvbGRFbnRyeSIsImNsZWFyVGltZWRPdXRSZXF1ZXN0IiwidXBkYXRlT3JDcmVhdGVJbnN0YWxsYXRpb25FbnRyeSIsImVudHJ5V2l0aFByb21pc2UiLCJvbkxpbmUiLCJyZWdpc3RyYXRpb25Qcm9taXNlV2l0aEVycm9yIiwiaW5Qcm9ncmVzc0VudHJ5IiwicmVnaXN0cmF0aW9uVGltZSIsInJlZ2lzdGVyZWRJbnN0YWxsYXRpb25FbnRyeSIsInJlZ2lzdGVySW5zdGFsbGF0aW9uIiwid2FpdFVudGlsRmlkUmVnaXN0cmF0aW9uIiwidHJpZ2dlclJlZ2lzdHJhdGlvbklmTmVjZXNzYXJ5IiwidXBkYXRlSW5zdGFsbGF0aW9uUmVxdWVzdCIsImdlbmVyYXRlQXV0aFRva2VuUmVxdWVzdCIsInBsYXRmb3JtTG9nZ2VyUHJvdmlkZXIiLCJwbGF0Zm9ybUxvZ2dlciIsImdldEdlbmVyYXRlQXV0aFRva2VuRW5kcG9pbnQiLCJpbnN0YWxsYXRpb24iLCJyZWZyZXNoQXV0aFRva2VuIiwiZGVwZW5kZW5jaWVzIiwidG9rZW5Qcm9taXNlIiwiaXNFbnRyeVJlZ2lzdGVyZWQiLCJvbGRBdXRoVG9rZW4iLCJpc0F1dGhUb2tlbkV4cGlyZWQiLCJpc0F1dGhUb2tlblZhbGlkIiwidXBkYXRlQXV0aFRva2VuUmVxdWVzdCIsIndhaXRVbnRpbEF1dGhUb2tlblJlcXVlc3QiLCJpblByb2dyZXNzQXV0aFRva2VuIiwicmVxdWVzdFRpbWUiLCJtYWtlQXV0aFRva2VuUmVxdWVzdEluUHJvZ3Jlc3NFbnRyeSIsInVwZGF0ZWRJbnN0YWxsYXRpb25FbnRyeSIsImZldGNoQXV0aFRva2VuRnJvbVNlcnZlciIsImNvbXBsZXRlSW5zdGFsbGF0aW9uUmVnaXN0cmF0aW9uIiwiZGVsZXRlSW5zdGFsbGF0aW9uUmVxdWVzdCIsImdldERlbGV0ZUVuZHBvaW50IiwiZ2V0TWlzc2luZ1ZhbHVlRXJyb3IiLCJ2YWx1ZU5hbWUiLCJjb25maWdLZXlzXzEiLCJjb25maWdLZXlzXzFfMSIsImtleU5hbWUiLCJleHRyYWN0QXBwQ29uZmlnIiwiZ2V0SWQiLCJkZWxldGVJbnN0YWxsYXRpb24iLCJHdGFnQ29tbWFuZCIsIkV2ZW50TmFtZSIsIkFOQUxZVElDU19JRF9GSUVMRCIsIkdBX0ZJRF9LRVkiLCJPUklHSU5fS0VZIiwiR1RBR19VUkwiLCJ3cmFwT3JDcmVhdGVHdGFnIiwiaW5pdGlhbGl6ZWRJZFByb21pc2VzTWFwIiwiZGF0YUxheWVyTmFtZSIsImd0YWdGdW5jdGlvbk5hbWUiLCJndGFnQ29yZSIsIl9hcmdzIiwiaWRPck5hbWVPclBhcmFtcyIsImd0YWdQYXJhbXMiLCJFVkVOVCIsImluaXRpYWxpemF0aW9uUHJvbWlzZXNUb1dhaXRGb3IiLCJnYVNlbmRUb0xpc3QiLCJnYVNlbmRUb0xpc3RfMSIsInNlbmRUb0lkIiwiaW5pdGlhbGl6YXRpb25Qcm9taXNlIiwiaWRQcm9taXNlIiwiQ09ORklHIiwiU0VUIiwid3JhcEd0YWciLCJ3cmFwcGVkR3RhZyIsImd0YWdDb3JlRnVuY3Rpb24iLCJ3cmFwcGVkR3RhZ0Z1bmN0aW9uIiwiZ3RhZ05hbWUiLCJnbG9iYWxJbml0RG9uZSIsImluc3RhbGxhdGlvbnMiLCJhbmFseXRpY3NJZCIsInNjcmlwdFRhZ3MiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsImZpbmRHdGFnU2NyaXB0T25QYWdlIiwic2NyaXB0IiwiaW5zZXJ0U2NyaXB0VGFnIiwiZGF0YUxheWVyIiwiZ2V0T3JDcmVhdGVEYXRhTGF5ZXIiLCJpbml0aWFsaXplR0FJZCIsImxvZ0V2ZW50IiwiZXZlbnROYW1lIiwiZXZlbnRQYXJhbXMiLCJndGFnRnVuY3Rpb24iLCJzZXRDdXJyZW50U2NyZWVuIiwic2NyZWVuTmFtZSIsInNldFVzZXJJZCIsInNldFVzZXJQcm9wZXJ0aWVzIiwiZmxhdFByb3BlcnRpZXMiLCJzZXRBbmFseXRpY3NDb2xsZWN0aW9uRW5hYmxlZCIsImVuYWJsZWQiLCJBTkFMWVRJQ1NfVFlQRSIsInJlZ2lzdGVyQW5hbHl0aWNzIiwiTWVzc2FnZVR5cGUiLCJFUlJPUl9NQVAiLCJlcnJvckZhY3RvcnkiLCJERUZBVUxUX1BVQkxJQ19WQVBJRF9LRVkiLCJFTkRQT0lOVCIsImlzQXJyYXlCdWZmZXJFcXVhbCIsImJ5dGVMZW5ndGgiLCJ2aWV3QSIsIkRhdGFWaWV3Iiwidmlld0IiLCJnZXRVaW50OCIsImFycmF5QnVmZmVyVG9CYXNlNjQiLCJhcnJheUJ1ZmZlciIsInVpbnQ4VmVyc2lvbiIsIlN1YnNjcmlwdGlvbk1hbmFnZXIiLCJzdWJzY3JpcHRpb24iLCJ2YXBpZEtleSIsInN1YnNjcmliZU9wdGlvbnMiLCJyZXNwb25zZURhdGEiLCJlcnJfMSIsImdldEJvZHkiLCJnZXRFbmRwb2ludCIsImVycm9ySW5mbyIsInVwZGF0ZVRva2VuIiwidG9rZW5EZXRhaWxzIiwidXBkYXRlT3B0aW9ucyIsImVycl8yIiwiZmNtVG9rZW4iLCJkZWxldGVUb2tlbiIsInVuc3Vic2NyaWJlT3B0aW9ucyIsImVycl8zIiwicDI1NmRoIiwid2ViIiwiYXBwbGljYXRpb25QdWJLZXkiLCJiYXNlNjRUb0FycmF5QnVmZmVyIiwiYmFzZTY0U3RyaW5nIiwicmVwZWF0IiwicmF3RGF0YSIsIm91dHB1dEFycmF5IiwiT0xEX0RCX05BTUUiLCJPTERfT0JKRUNUX1NUT1JFX05BTUUiLCJjbGVhblYxIiwiX2V2ZW50Iiwic3Vic2NyaXB0aW9uTWFuYWdlciIsIm9wZW5DdXJzb3JSZXF1ZXN0IiwiaGFuZGxlRGIiLCJEYkludGVyZmFjZSIsImdldEluZGV4IiwiY2xvc2VEYXRhYmFzZSIsInJ1blJlcXVlc3QiLCJnZXREYiIsIm9iamVjdFN0b3JlTmFtZSIsInByb21pc2lmeSIsImRiVmVyc2lvbiIsIm9uRGJVcGdyYWRlIiwiVG9rZW5EZXRhaWxzTW9kZWwiLCJjdXJzb3JSZXF1ZXN0XzEiLCJjcmVhdGVUaW1lIiwiZmNtUHVzaFNldCIsImN1cnNvclJlcXVlc3RfMiIsImdldFRva2VuRGV0YWlsc0Zyb21Ub2tlbiIsInZhbGlkYXRlSW5wdXRzIiwiZ2V0VG9rZW5EZXRhaWxzRnJvbVNXU2NvcGUiLCJzd1Njb3BlIiwic2F2ZVRva2VuRGV0YWlscyIsImZjbVNlbmRlcklkIiwiQXJyYXlCdWZmZXIiLCJWYXBpZERldGFpbHNNb2RlbCIsImdldFZhcGlkRnJvbVNXU2NvcGUiLCJzYXZlVmFwaWREZXRhaWxzIiwiZGVsZXRlVmFwaWREZXRhaWxzIiwiQmFzZUNvbnRyb2xsZXIiLCJ2YXBpZERldGFpbHNNb2RlbCIsIm1lc3NhZ2luZ1NlbmRlcklkIiwidG9rZW5EZXRhaWxzTW9kZWwiLCJzd1JlZyIsInB1YmxpY1ZhcGlkS2V5IiwicHVzaFN1YnNjcmlwdGlvbiIsImdldE5vdGlmaWNhdGlvblBlcm1pc3Npb24iLCJyZXF1ZXN0Tm90aWZpY2F0aW9uUGVybWlzc2lvbiIsImdldFNXUmVnaXN0cmF0aW9uXyIsImdldFB1YmxpY1ZhcGlkS2V5XyIsImdldFB1c2hTdWJzY3JpcHRpb24iLCJzY29wZSIsIm1hbmFnZUV4aXN0aW5nVG9rZW4iLCJnZXROZXdUb2tlbiIsImlzRW5kcG9pbnRFcXVhbCIsImlzQXV0aEVxdWFsIiwiaXNQMjU2ZGhFcXVhbCIsImlzVG9rZW5TdGlsbFZhbGlkIiwiZGVsZXRlVG9rZW5Gcm9tREIiLCJ1cGRhdGVkVG9rZW4iLCJhbGxEZXRhaWxzIiwibmV3VG9rZW4iLCJyZWdpc3RyYXRpb24iLCJwdXNoTWFuYWdlciIsImdldFN1YnNjcmlwdGlvbiIsInVuc3Vic2NyaWJlIiwiZV8yIiwic3dSZWdpc3RyYXRpb24iLCJ1c2VyVmlzaWJsZU9ubHkiLCJhcHBsaWNhdGlvblNlcnZlcktleSIsInJlcXVlc3RQZXJtaXNzaW9uIiwidXNlU2VydmljZVdvcmtlciIsIl9yZWdpc3RyYXRpb24iLCJ1c2VQdWJsaWNWYXBpZEtleSIsIl9iNjRQdWJsaWNLZXkiLCJfbmV4dE9yT2JzZXJ2ZXIiLCJfZXJyb3IiLCJfY29tcGxldGVkIiwib25Ub2tlblJlZnJlc2giLCJzZXRCYWNrZ3JvdW5kTWVzc2FnZUhhbmRsZXIiLCJfY2FsbGJhY2siLCJOb3RpZmljYXRpb24iLCJnZXRUb2tlbkRldGFpbHNNb2RlbCIsImdldFZhcGlkRGV0YWlsc01vZGVsIiwiZ2V0U3Vic2NyaXB0aW9uTWFuYWdlciIsIlN3Q29udHJvbGxlciIsImJnTWVzc2FnZUhhbmRsZXIiLCJvblB1c2giLCJvblN1YkNoYW5nZSIsIm9uTm90aWZpY2F0aW9uQ2xpY2siLCJ3YWl0VW50aWwiLCJvblB1c2hfIiwib25TdWJDaGFuZ2VfIiwib25Ob3RpZmljYXRpb25DbGlja18iLCJtc2dQYXlsb2FkIiwibm90aWZpY2F0aW9uRGV0YWlscyIsIm5vdGlmaWNhdGlvblRpdGxlIiwicmVnIiwibWF4QWN0aW9ucyIsImhhc1Zpc2libGVDbGllbnRzXyIsInNlbmRNZXNzYWdlVG9XaW5kb3dDbGllbnRzXyIsImdldE5vdGlmaWNhdGlvbkRhdGFfIiwic2hvd05vdGlmaWNhdGlvbiIsImxpbmsiLCJ3aW5kb3dDbGllbnQiLCJpbnRlcm5hbE1zZyIsInN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbiIsImZjbU9wdGlvbnMiLCJjbGlja19hY3Rpb24iLCJvcmlnaW4iLCJnZXRXaW5kb3dDbGllbnRfIiwib3BlbldpbmRvdyIsImZvY3VzIiwiY3JlYXRlTmV3TXNnIiwiTk9USUZJQ0FUSU9OX0NMSUNLRUQiLCJhdHRlbXB0VG9NZXNzYWdlQ2xpZW50XyIsIm5vdGlmaWNhdGlvbkluZm9ybWF0aW9uIiwicGFyc2VkVVJMIiwiY2xpZW50TGlzdCIsInN1aXRhYmxlQ2xpZW50IiwiVVJMIiwiZ2V0Q2xpZW50TGlzdCIsInBvc3RNZXNzYWdlIiwiUFVTSF9NU0dfUkVDRUlWRUQiLCJ2YXBpZEtleUZyb21EYXRhYmFzZSIsIm1hdGNoQWxsIiwiaW5jbHVkZVVuY29udHJvbGxlZCIsIm1zZ1R5cGUiLCJmaXJlYmFzZU1lc3NhZ2luZ1R5cGUiLCJmaXJlYmFzZU1lc3NhZ2luZ0RhdGEiLCJXaW5kb3dDb250cm9sbGVyIiwicmVnaXN0cmF0aW9uVG9Vc2UiLCJwdWJsaWNWYXBpZEtleVRvVXNlIiwibWVzc2FnZU9ic2VydmVyIiwidG9rZW5SZWZyZXNoT2JzZXJ2ZXIiLCJvbk1lc3NhZ2VJbnRlcm5hbCIsIm9uVG9rZW5SZWZyZXNoSW50ZXJuYWwiLCJzZXR1cFNXTWVzc2FnZUxpc3RlbmVyXyIsInBlcm1pc3Npb25SZXN1bHQiLCJTZXJ2aWNlV29ya2VyUmVnaXN0cmF0aW9uIiwicHVibGljS2V5IiwicGFyc2VkS2V5IiwiY29tcGxldGVkIiwid2FpdEZvclJlZ2lzdHJhdGlvblRvQWN0aXZhdGVfIiwic2VydmljZVdvcmtlciIsImluc3RhbGxpbmciLCJ3YWl0aW5nIiwic3RhdGVDaGFuZ2VMaXN0ZW5lciIsInJlZ2lzdGVyIiwiYnJvd3NlckVycm9yTWVzc2FnZSIsImV2ZW50VHlwZSIsIm1lc3NhZ2VUeXBlIiwiZ2V0RXZlbnRUeXBlIiwiYW5hbHl0aWNzUHJvdmlkZXIiLCJtZXNzYWdlX25hbWUiLCJtZXNzYWdlX2lkIiwibWVzc2FnZV90aW1lIiwibWVzc2FnZV9kZXZpY2VfdGltZSIsImlzU3VwcG9ydGVkIiwiUHVzaFN1YnNjcmlwdGlvbiIsImNvb2tpZUVuYWJsZWQiLCJuYW1lc3BhY2VFeHBvcnRzIiwiZmlyZWJhc2VTZXJ2aWNlcyIsInJlZ2lzdGVyTWVzc2FnaW5nIiwiYXV0aERvbWFpbiIsImRhdGFiYXNlVVJMIiwic3RvcmFnZUJ1Y2tldCIsIk1zZyIsIm1lc3NhZ2luZyIsInBheWxvYWQiLCJjcmVhdGVOb3RpZmljYWN0aW9uIiwicmVmcmVzaGVkVG9rZW4iLCJnZXRNZXNzYWdpbmdUb2tlbiIsInNlc3Npb25TdG9yYWdlIiwicmVxdWVzdE5vdGlmaWNhdGlvbnNQZXJtaXNzaW9ucyIsIkJyb2FkY2FzdENoYW5uZWwiLCJvbm1lc3NhZ2UiLCJBUElfS0VZIiwiQ0xJRU5UX0lEIiwiUFJPQ0VTUyIsIkRJU0NPVkVSWV9ET0NTIiwiU0NPUEVTIiwiYXV0aG9yaXplQnV0dG9uIiwic2lnbm91dEJ1dHRvbiIsImluaXRDbGllbnQiLCJpbml0IiwiZGlzY292ZXJ5RG9jcyIsImF1dGgyIiwiZ2V0QXV0aEluc3RhbmNlIiwiaXNTaWduZWRJbiIsInVwZGF0ZVNpZ25pblN0YXR1cyIsImhhbmRsZUF1dGhDbGljayIsImhhbmRsZVNpZ25vdXRDbGljayIsImF1dGhvcml6ZURpYWxvZyIsInNpZ25JbiIsInNpZ25PdXQiLCJkZWZlciIsImxvYWQiLCJjdXJyZW50RHJhd2luZ0J0biIsImRlZmVycmVkSW5zdGFsbFByb21wdCIsImluc3RhbGxCdXR0b24iLCJwcm9tcHQiLCJoaWRkZW4iLCJ1c2VyQ2hvaWNlIiwiY2hvaWNlIiwib3V0Y29tZSIsImRyYXdpbmdJZCIsInJlcXVlc3RlZERyYXdpbmciLCJzdHlsZXNSZXMiLCJzdHlsZVRhZyIsImRyb3Bkb3ducyIsImdldEVsZW1lbnRzQnlDbGFzc05hbWUiLCJzaWRlTmF2VG9nZ2xlIl0sIm1hcHBpbmdzIjoiYUFDRSxJQUFJQSxFQUFtQixHQUd2QixTQUFTQyxFQUFvQkMsR0FHNUIsR0FBR0YsRUFBaUJFLEdBQ25CLE9BQU9GLEVBQWlCRSxHQUFVQyxRQUduQyxJQUFJQyxFQUFTSixFQUFpQkUsR0FBWSxDQUN6Q0csRUFBR0gsRUFDSEksR0FBRyxFQUNISCxRQUFTLElBVVYsT0FOQUksRUFBUUwsR0FBVU0sS0FBS0osRUFBT0QsUUFBU0MsRUFBUUEsRUFBT0QsUUFBU0YsR0FHL0RHLEVBQU9FLEdBQUksRUFHSkYsRUFBT0QsUUFLZkYsRUFBb0JRLEVBQUlGLEVBR3hCTixFQUFvQlMsRUFBSVYsRUFHeEJDLEVBQW9CVSxFQUFJLFNBQVNSLEVBQVNT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TyxNQUNoQyxHQUFJcXFILGlCQUFpQnhLLFdBQVdxbEIsR0FDaEMsR0FBSXZjLHNCQUNKbmlILFFBQVE0TyxJQUFJLHVCQUNYLFNBQUFoSixHQUNENUYsUUFBUTRPLElBQUloSixPLGNBVWxCLElBRkEsSUFBTWk1SCxHQUFZM29ILFNBQVM0b0gsdUJBQXVCLHNCLFlBRXpDdnFJLEdBQ1BzcUksR0FBVXRxSSxHQUFHbWlILFNBQVMsR0FBR3I1RCxpQkFBaUIsU0FBUyxXQUNqRHdoRixHQUFVdHFJLEdBQUdtK0csVUFBVWtOLE9BQU8sV0FFaENpZixHQUFVdHFJLEdBQUc4b0QsaUJBQWlCLGNBQWMsU0FBQS9sRCxHQUN6Q0EsRUFBRTRoSCxjQUE4QnhHLFVBQVV0NkYsT0FBTyxZQUw3QyxHQUFJLEVBQUcsR0FBSXltSCxHQUFVMW5JLE9BQVEsSyxHQUE3QixJQVlULElBQU00bkksR0FBZ0I3b0gsU0FBU3MvRixlQUFlLGlCQUU5Q3VwQixHQUFjMWhGLGlCQUFpQixTQUFTLFdBQ3RDbm5DLFNBQVNzL0YsZUFBZSxvQkFBb0I5QyxVQUFVa04sT0FBTyxVQUM3RG1mLEdBQWNyc0IsVUFBVWtOLE9BQU8iLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAxOSk7XG4iLCIvKiEgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbkxpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZVxyXG50aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4gWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZVxyXG5MaWNlbnNlIGF0IGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG5cclxuVEhJUyBDT0RFIElTIFBST1ZJREVEIE9OIEFOICpBUyBJUyogQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxyXG5LSU5ELCBFSVRIRVIgRVhQUkVTUyBPUiBJTVBMSUVELCBJTkNMVURJTkcgV0lUSE9VVCBMSU1JVEFUSU9OIEFOWSBJTVBMSUVEXHJcbldBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBUSVRMRSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UsXHJcbk1FUkNIQU5UQUJMSVRZIE9SIE5PTi1JTkZSSU5HRU1FTlQuXHJcblxyXG5TZWUgdGhlIEFwYWNoZSBWZXJzaW9uIDIuMCBMaWNlbnNlIGZvciBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnNcclxuYW5kIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqL1xyXG4vKiBnbG9iYWwgUmVmbGVjdCwgUHJvbWlzZSAqL1xyXG5cclxudmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbihkLCBiKSB7XHJcbiAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XHJcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxyXG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xyXG4gICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19leHRlbmRzKGQsIGIpIHtcclxuICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxufVxyXG5cclxuZXhwb3J0IHZhciBfX2Fzc2lnbiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgX19hc3NpZ24gPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uIF9fYXNzaWduKHQpIHtcclxuICAgICAgICBmb3IgKHZhciBzLCBpID0gMSwgbiA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcclxuICAgICAgICAgICAgcyA9IGFyZ3VtZW50c1tpXTtcclxuICAgICAgICAgICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApKSB0W3BdID0gc1twXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHQ7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gX19hc3NpZ24uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcmVzdChzLCBlKSB7XHJcbiAgICB2YXIgdCA9IHt9O1xyXG4gICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApICYmIGUuaW5kZXhPZihwKSA8IDApXHJcbiAgICAgICAgdFtwXSA9IHNbcF07XHJcbiAgICBpZiAocyAhPSBudWxsICYmIHR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzID09PSBcImZ1bmN0aW9uXCIpXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIHAgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHMpOyBpIDwgcC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAoZS5pbmRleE9mKHBbaV0pIDwgMCAmJiBPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwocywgcFtpXSkpXHJcbiAgICAgICAgICAgICAgICB0W3BbaV1dID0gc1twW2ldXTtcclxuICAgICAgICB9XHJcbiAgICByZXR1cm4gdDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcclxuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XHJcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xyXG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcclxuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3BhcmFtKHBhcmFtSW5kZXgsIGRlY29yYXRvcikge1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0YXJnZXQsIGtleSkgeyBkZWNvcmF0b3IodGFyZ2V0LCBrZXksIHBhcmFtSW5kZXgpOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX21ldGFkYXRhKG1ldGFkYXRhS2V5LCBtZXRhZGF0YVZhbHVlKSB7XHJcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QubWV0YWRhdGEgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIFJlZmxlY3QubWV0YWRhdGEobWV0YWRhdGFLZXksIG1ldGFkYXRhVmFsdWUpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hd2FpdGVyKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xyXG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZShyZXN1bHQudmFsdWUpOyB9KS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XHJcbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2dlbmVyYXRvcih0aGlzQXJnLCBib2R5KSB7XHJcbiAgICB2YXIgXyA9IHsgbGFiZWw6IDAsIHNlbnQ6IGZ1bmN0aW9uKCkgeyBpZiAodFswXSAmIDEpIHRocm93IHRbMV07IHJldHVybiB0WzFdOyB9LCB0cnlzOiBbXSwgb3BzOiBbXSB9LCBmLCB5LCB0LCBnO1xyXG4gICAgcmV0dXJuIGcgPSB7IG5leHQ6IHZlcmIoMCksIFwidGhyb3dcIjogdmVyYigxKSwgXCJyZXR1cm5cIjogdmVyYigyKSB9LCB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgKGdbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSksIGc7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgcmV0dXJuIGZ1bmN0aW9uICh2KSB7IHJldHVybiBzdGVwKFtuLCB2XSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHN0ZXAob3ApIHtcclxuICAgICAgICBpZiAoZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy5cIik7XHJcbiAgICAgICAgd2hpbGUgKF8pIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChmID0gMSwgeSAmJiAodCA9IG9wWzBdICYgMiA/IHlbXCJyZXR1cm5cIl0gOiBvcFswXSA/IHlbXCJ0aHJvd1wiXSB8fCAoKHQgPSB5W1wicmV0dXJuXCJdKSAmJiB0LmNhbGwoeSksIDApIDogeS5uZXh0KSAmJiAhKHQgPSB0LmNhbGwoeSwgb3BbMV0pKS5kb25lKSByZXR1cm4gdDtcclxuICAgICAgICAgICAgaWYgKHkgPSAwLCB0KSBvcCA9IFtvcFswXSAmIDIsIHQudmFsdWVdO1xyXG4gICAgICAgICAgICBzd2l0Y2ggKG9wWzBdKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6IGNhc2UgMTogdCA9IG9wOyBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgNDogXy5sYWJlbCsrOyByZXR1cm4geyB2YWx1ZTogb3BbMV0sIGRvbmU6IGZhbHNlIH07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDU6IF8ubGFiZWwrKzsgeSA9IG9wWzFdOyBvcCA9IFswXTsgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDc6IG9wID0gXy5vcHMucG9wKCk7IF8udHJ5cy5wb3AoKTsgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghKHQgPSBfLnRyeXMsIHQgPSB0Lmxlbmd0aCA+IDAgJiYgdFt0Lmxlbmd0aCAtIDFdKSAmJiAob3BbMF0gPT09IDYgfHwgb3BbMF0gPT09IDIpKSB7IF8gPSAwOyBjb250aW51ZTsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gMyAmJiAoIXQgfHwgKG9wWzFdID4gdFswXSAmJiBvcFsxXSA8IHRbM10pKSkgeyBfLmxhYmVsID0gb3BbMV07IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSA2ICYmIF8ubGFiZWwgPCB0WzFdKSB7IF8ubGFiZWwgPSB0WzFdOyB0ID0gb3A7IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHQgJiYgXy5sYWJlbCA8IHRbMl0pIHsgXy5sYWJlbCA9IHRbMl07IF8ub3BzLnB1c2gob3ApOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0WzJdKSBfLm9wcy5wb3AoKTtcclxuICAgICAgICAgICAgICAgICAgICBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG9wID0gYm9keS5jYWxsKHRoaXNBcmcsIF8pO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHsgb3AgPSBbNiwgZV07IHkgPSAwOyB9IGZpbmFsbHkgeyBmID0gdCA9IDA7IH1cclxuICAgICAgICBpZiAob3BbMF0gJiA1KSB0aHJvdyBvcFsxXTsgcmV0dXJuIHsgdmFsdWU6IG9wWzBdID8gb3BbMV0gOiB2b2lkIDAsIGRvbmU6IHRydWUgfTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZXhwb3J0U3RhcihtLCBleHBvcnRzKSB7XHJcbiAgICBmb3IgKHZhciBwIGluIG0pIGlmICghZXhwb3J0cy5oYXNPd25Qcm9wZXJ0eShwKSkgZXhwb3J0c1twXSA9IG1bcF07XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3ZhbHVlcyhvKSB7XHJcbiAgICB2YXIgbSA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvW1N5bWJvbC5pdGVyYXRvcl0sIGkgPSAwO1xyXG4gICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDtcclxuICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9O1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3JlYWQobywgbikge1xyXG4gICAgdmFyIG0gPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb1tTeW1ib2wuaXRlcmF0b3JdO1xyXG4gICAgaWYgKCFtKSByZXR1cm4gbztcclxuICAgIHZhciBpID0gbS5jYWxsKG8pLCByLCBhciA9IFtdLCBlO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICB3aGlsZSAoKG4gPT09IHZvaWQgMCB8fCBuLS0gPiAwKSAmJiAhKHIgPSBpLm5leHQoKSkuZG9uZSkgYXIucHVzaChyLnZhbHVlKTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlcnJvcikgeyBlID0geyBlcnJvcjogZXJyb3IgfTsgfVxyXG4gICAgZmluYWxseSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKHIgJiYgIXIuZG9uZSAmJiAobSA9IGlbXCJyZXR1cm5cIl0pKSBtLmNhbGwoaSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZpbmFsbHkgeyBpZiAoZSkgdGhyb3cgZS5lcnJvcjsgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGFyO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19zcHJlYWQoKSB7XHJcbiAgICBmb3IgKHZhciBhciA9IFtdLCBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKylcclxuICAgICAgICBhciA9IGFyLmNvbmNhdChfX3JlYWQoYXJndW1lbnRzW2ldKSk7XHJcbiAgICByZXR1cm4gYXI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3NwcmVhZEFycmF5cygpIHtcclxuICAgIGZvciAodmFyIHMgPSAwLCBpID0gMCwgaWwgPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgaWw7IGkrKykgcyArPSBhcmd1bWVudHNbaV0ubGVuZ3RoO1xyXG4gICAgZm9yICh2YXIgciA9IEFycmF5KHMpLCBrID0gMCwgaSA9IDA7IGkgPCBpbDsgaSsrKVxyXG4gICAgICAgIGZvciAodmFyIGEgPSBhcmd1bWVudHNbaV0sIGogPSAwLCBqbCA9IGEubGVuZ3RoOyBqIDwgamw7IGorKywgaysrKVxyXG4gICAgICAgICAgICByW2tdID0gYVtqXTtcclxuICAgIHJldHVybiByO1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXdhaXQodikge1xyXG4gICAgcmV0dXJuIHRoaXMgaW5zdGFuY2VvZiBfX2F3YWl0ID8gKHRoaXMudiA9IHYsIHRoaXMpIDogbmV3IF9fYXdhaXQodik7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jR2VuZXJhdG9yKHRoaXNBcmcsIF9hcmd1bWVudHMsIGdlbmVyYXRvcikge1xyXG4gICAgaWYgKCFTeW1ib2wuYXN5bmNJdGVyYXRvcikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5hc3luY0l0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxuICAgIHZhciBnID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pLCBpLCBxID0gW107XHJcbiAgICByZXR1cm4gaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIpLCB2ZXJiKFwicmV0dXJuXCIpLCBpW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgaWYgKGdbbl0pIGlbbl0gPSBmdW5jdGlvbiAodikgeyByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKGEsIGIpIHsgcS5wdXNoKFtuLCB2LCBhLCBiXSkgPiAxIHx8IHJlc3VtZShuLCB2KTsgfSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHJlc3VtZShuLCB2KSB7IHRyeSB7IHN0ZXAoZ1tuXSh2KSk7IH0gY2F0Y2ggKGUpIHsgc2V0dGxlKHFbMF1bM10sIGUpOyB9IH1cclxuICAgIGZ1bmN0aW9uIHN0ZXAocikgeyByLnZhbHVlIGluc3RhbmNlb2YgX19hd2FpdCA/IFByb21pc2UucmVzb2x2ZShyLnZhbHVlLnYpLnRoZW4oZnVsZmlsbCwgcmVqZWN0KSA6IHNldHRsZShxWzBdWzJdLCByKTsgfVxyXG4gICAgZnVuY3Rpb24gZnVsZmlsbCh2YWx1ZSkgeyByZXN1bWUoXCJuZXh0XCIsIHZhbHVlKTsgfVxyXG4gICAgZnVuY3Rpb24gcmVqZWN0KHZhbHVlKSB7IHJlc3VtZShcInRocm93XCIsIHZhbHVlKTsgfVxyXG4gICAgZnVuY3Rpb24gc2V0dGxlKGYsIHYpIHsgaWYgKGYodiksIHEuc2hpZnQoKSwgcS5sZW5ndGgpIHJlc3VtZShxWzBdWzBdLCBxWzBdWzFdKTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY0RlbGVnYXRvcihvKSB7XHJcbiAgICB2YXIgaSwgcDtcclxuICAgIHJldHVybiBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiwgZnVuY3Rpb24gKGUpIHsgdGhyb3cgZTsgfSksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4sIGYpIHsgaVtuXSA9IG9bbl0gPyBmdW5jdGlvbiAodikgeyByZXR1cm4gKHAgPSAhcCkgPyB7IHZhbHVlOiBfX2F3YWl0KG9bbl0odikpLCBkb25lOiBuID09PSBcInJldHVyblwiIH0gOiBmID8gZih2KSA6IHY7IH0gOiBmOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jVmFsdWVzKG8pIHtcclxuICAgIGlmICghU3ltYm9sLmFzeW5jSXRlcmF0b3IpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTeW1ib2wuYXN5bmNJdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XHJcbiAgICB2YXIgbSA9IG9bU3ltYm9sLmFzeW5jSXRlcmF0b3JdLCBpO1xyXG4gICAgcmV0dXJuIG0gPyBtLmNhbGwobykgOiAobyA9IHR5cGVvZiBfX3ZhbHVlcyA9PT0gXCJmdW5jdGlvblwiID8gX192YWx1ZXMobykgOiBvW1N5bWJvbC5pdGVyYXRvcl0oKSwgaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIpLCB2ZXJiKFwicmV0dXJuXCIpLCBpW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGkpO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IGlbbl0gPSBvW25dICYmIGZ1bmN0aW9uICh2KSB7IHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7IHYgPSBvW25dKHYpLCBzZXR0bGUocmVzb2x2ZSwgcmVqZWN0LCB2LmRvbmUsIHYudmFsdWUpOyB9KTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gc2V0dGxlKHJlc29sdmUsIHJlamVjdCwgZCwgdikgeyBQcm9taXNlLnJlc29sdmUodikudGhlbihmdW5jdGlvbih2KSB7IHJlc29sdmUoeyB2YWx1ZTogdiwgZG9uZTogZCB9KTsgfSwgcmVqZWN0KTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19tYWtlVGVtcGxhdGVPYmplY3QoY29va2VkLCByYXcpIHtcclxuICAgIGlmIChPYmplY3QuZGVmaW5lUHJvcGVydHkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KGNvb2tlZCwgXCJyYXdcIiwgeyB2YWx1ZTogcmF3IH0pOyB9IGVsc2UgeyBjb29rZWQucmF3ID0gcmF3OyB9XHJcbiAgICByZXR1cm4gY29va2VkO1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9faW1wb3J0U3Rhcihtb2QpIHtcclxuICAgIGlmIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpIHJldHVybiBtb2Q7XHJcbiAgICB2YXIgcmVzdWx0ID0ge307XHJcbiAgICBpZiAobW9kICE9IG51bGwpIGZvciAodmFyIGsgaW4gbW9kKSBpZiAoT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobW9kLCBrKSkgcmVzdWx0W2tdID0gbW9kW2tdO1xyXG4gICAgcmVzdWx0LmRlZmF1bHQgPSBtb2Q7XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19pbXBvcnREZWZhdWx0KG1vZCkge1xyXG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBkZWZhdWx0OiBtb2QgfTtcclxufVxyXG4iLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG5cbnZhciB0c2xpYiA9IHJlcXVpcmUoJ3RzbGliJyk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQGZpbGVvdmVydmlldyBGaXJlYmFzZSBjb25zdGFudHMuICBTb21lIG9mIHRoZXNlIChAZGVmaW5lcykgY2FuIGJlIG92ZXJyaWRkZW4gYXQgY29tcGlsZS10aW1lLlxyXG4gKi9cclxudmFyIENPTlNUQU5UUyA9IHtcclxuICAgIC8qKlxyXG4gICAgICogQGRlZmluZSB7Ym9vbGVhbn0gV2hldGhlciB0aGlzIGlzIHRoZSBjbGllbnQgTm9kZS5qcyBTREsuXHJcbiAgICAgKi9cclxuICAgIE5PREVfQ0xJRU5UOiBmYWxzZSxcclxuICAgIC8qKlxyXG4gICAgICogQGRlZmluZSB7Ym9vbGVhbn0gV2hldGhlciB0aGlzIGlzIHRoZSBBZG1pbiBOb2RlLmpzIFNESy5cclxuICAgICAqL1xyXG4gICAgTk9ERV9BRE1JTjogZmFsc2UsXHJcbiAgICAvKipcclxuICAgICAqIEZpcmViYXNlIFNESyBWZXJzaW9uXHJcbiAgICAgKi9cclxuICAgIFNES19WRVJTSU9OOiAnJHtKU0NPUkVfVkVSU0lPTn0nXHJcbn07XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogVGhyb3dzIGFuIGVycm9yIGlmIHRoZSBwcm92aWRlZCBhc3NlcnRpb24gaXMgZmFsc3lcclxuICovXHJcbnZhciBhc3NlcnQgPSBmdW5jdGlvbiAoYXNzZXJ0aW9uLCBtZXNzYWdlKSB7XHJcbiAgICBpZiAoIWFzc2VydGlvbikge1xyXG4gICAgICAgIHRocm93IGFzc2VydGlvbkVycm9yKG1lc3NhZ2UpO1xyXG4gICAgfVxyXG59O1xyXG4vKipcclxuICogUmV0dXJucyBhbiBFcnJvciBvYmplY3Qgc3VpdGFibGUgZm9yIHRocm93aW5nLlxyXG4gKi9cclxudmFyIGFzc2VydGlvbkVycm9yID0gZnVuY3Rpb24gKG1lc3NhZ2UpIHtcclxuICAgIHJldHVybiBuZXcgRXJyb3IoJ0ZpcmViYXNlIERhdGFiYXNlICgnICtcclxuICAgICAgICBDT05TVEFOVFMuU0RLX1ZFUlNJT04gK1xyXG4gICAgICAgICcpIElOVEVSTkFMIEFTU0VSVCBGQUlMRUQ6ICcgK1xyXG4gICAgICAgIG1lc3NhZ2UpO1xyXG59O1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxudmFyIHN0cmluZ1RvQnl0ZUFycmF5ID0gZnVuY3Rpb24gKHN0cikge1xyXG4gICAgLy8gVE9ETyh1c2VyKTogVXNlIG5hdGl2ZSBpbXBsZW1lbnRhdGlvbnMgaWYvd2hlbiBhdmFpbGFibGVcclxuICAgIHZhciBvdXQgPSBbXTtcclxuICAgIHZhciBwID0gMDtcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgdmFyIGMgPSBzdHIuY2hhckNvZGVBdChpKTtcclxuICAgICAgICBpZiAoYyA8IDEyOCkge1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IGM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGMgPCAyMDQ4KSB7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgPj4gNikgfCAxOTI7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKChjICYgMHhmYzAwKSA9PT0gMHhkODAwICYmXHJcbiAgICAgICAgICAgIGkgKyAxIDwgc3RyLmxlbmd0aCAmJlxyXG4gICAgICAgICAgICAoc3RyLmNoYXJDb2RlQXQoaSArIDEpICYgMHhmYzAwKSA9PT0gMHhkYzAwKSB7XHJcbiAgICAgICAgICAgIC8vIFN1cnJvZ2F0ZSBQYWlyXHJcbiAgICAgICAgICAgIGMgPSAweDEwMDAwICsgKChjICYgMHgwM2ZmKSA8PCAxMCkgKyAoc3RyLmNoYXJDb2RlQXQoKytpKSAmIDB4MDNmZik7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgPj4gMTgpIHwgMjQwO1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9ICgoYyA+PiAxMikgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKChjID4+IDYpICYgNjMpIHwgMTI4O1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjICYgNjMpIHwgMTI4O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyA+PiAxMikgfCAyMjQ7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKChjID4+IDYpICYgNjMpIHwgMTI4O1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjICYgNjMpIHwgMTI4O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBvdXQ7XHJcbn07XHJcbi8qKlxyXG4gKiBUdXJucyBhbiBhcnJheSBvZiBudW1iZXJzIGludG8gdGhlIHN0cmluZyBnaXZlbiBieSB0aGUgY29uY2F0ZW5hdGlvbiBvZiB0aGVcclxuICogY2hhcmFjdGVycyB0byB3aGljaCB0aGUgbnVtYmVycyBjb3JyZXNwb25kLlxyXG4gKiBAcGFyYW0gYnl0ZXMgQXJyYXkgb2YgbnVtYmVycyByZXByZXNlbnRpbmcgY2hhcmFjdGVycy5cclxuICogQHJldHVybiBTdHJpbmdpZmljYXRpb24gb2YgdGhlIGFycmF5LlxyXG4gKi9cclxudmFyIGJ5dGVBcnJheVRvU3RyaW5nID0gZnVuY3Rpb24gKGJ5dGVzKSB7XHJcbiAgICAvLyBUT0RPKHVzZXIpOiBVc2UgbmF0aXZlIGltcGxlbWVudGF0aW9ucyBpZi93aGVuIGF2YWlsYWJsZVxyXG4gICAgdmFyIG91dCA9IFtdO1xyXG4gICAgdmFyIHBvcyA9IDAsIGMgPSAwO1xyXG4gICAgd2hpbGUgKHBvcyA8IGJ5dGVzLmxlbmd0aCkge1xyXG4gICAgICAgIHZhciBjMSA9IGJ5dGVzW3BvcysrXTtcclxuICAgICAgICBpZiAoYzEgPCAxMjgpIHtcclxuICAgICAgICAgICAgb3V0W2MrK10gPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGMxKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoYzEgPiAxOTEgJiYgYzEgPCAyMjQpIHtcclxuICAgICAgICAgICAgdmFyIGMyID0gYnl0ZXNbcG9zKytdO1xyXG4gICAgICAgICAgICBvdXRbYysrXSA9IFN0cmluZy5mcm9tQ2hhckNvZGUoKChjMSAmIDMxKSA8PCA2KSB8IChjMiAmIDYzKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGMxID4gMjM5ICYmIGMxIDwgMzY1KSB7XHJcbiAgICAgICAgICAgIC8vIFN1cnJvZ2F0ZSBQYWlyXHJcbiAgICAgICAgICAgIHZhciBjMiA9IGJ5dGVzW3BvcysrXTtcclxuICAgICAgICAgICAgdmFyIGMzID0gYnl0ZXNbcG9zKytdO1xyXG4gICAgICAgICAgICB2YXIgYzQgPSBieXRlc1twb3MrK107XHJcbiAgICAgICAgICAgIHZhciB1ID0gKCgoYzEgJiA3KSA8PCAxOCkgfCAoKGMyICYgNjMpIDw8IDEyKSB8ICgoYzMgJiA2MykgPDwgNikgfCAoYzQgJiA2MykpIC1cclxuICAgICAgICAgICAgICAgIDB4MTAwMDA7XHJcbiAgICAgICAgICAgIG91dFtjKytdID0gU3RyaW5nLmZyb21DaGFyQ29kZSgweGQ4MDAgKyAodSA+PiAxMCkpO1xyXG4gICAgICAgICAgICBvdXRbYysrXSA9IFN0cmluZy5mcm9tQ2hhckNvZGUoMHhkYzAwICsgKHUgJiAxMDIzKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB2YXIgYzIgPSBieXRlc1twb3MrK107XHJcbiAgICAgICAgICAgIHZhciBjMyA9IGJ5dGVzW3BvcysrXTtcclxuICAgICAgICAgICAgb3V0W2MrK10gPSBTdHJpbmcuZnJvbUNoYXJDb2RlKCgoYzEgJiAxNSkgPDwgMTIpIHwgKChjMiAmIDYzKSA8PCA2KSB8IChjMyAmIDYzKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG91dC5qb2luKCcnKTtcclxufTtcclxuLy8gV2UgZGVmaW5lIGl0IGFzIGFuIG9iamVjdCBsaXRlcmFsIGluc3RlYWQgb2YgYSBjbGFzcyBiZWNhdXNlIGEgY2xhc3MgY29tcGlsZWQgZG93biB0byBlczUgY2FuJ3RcclxuLy8gYmUgdHJlZXNoYWtlZC4gaHR0cHM6Ly9naXRodWIuY29tL3JvbGx1cC9yb2xsdXAvaXNzdWVzLzE2OTFcclxuLy8gU3RhdGljIGxvb2t1cCBtYXBzLCBsYXppbHkgcG9wdWxhdGVkIGJ5IGluaXRfKClcclxudmFyIGJhc2U2NCA9IHtcclxuICAgIC8qKlxyXG4gICAgICogTWFwcyBieXRlcyB0byBjaGFyYWN0ZXJzLlxyXG4gICAgICovXHJcbiAgICBieXRlVG9DaGFyTWFwXzogbnVsbCxcclxuICAgIC8qKlxyXG4gICAgICogTWFwcyBjaGFyYWN0ZXJzIHRvIGJ5dGVzLlxyXG4gICAgICovXHJcbiAgICBjaGFyVG9CeXRlTWFwXzogbnVsbCxcclxuICAgIC8qKlxyXG4gICAgICogTWFwcyBieXRlcyB0byB3ZWJzYWZlIGNoYXJhY3RlcnMuXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICBieXRlVG9DaGFyTWFwV2ViU2FmZV86IG51bGwsXHJcbiAgICAvKipcclxuICAgICAqIE1hcHMgd2Vic2FmZSBjaGFyYWN0ZXJzIHRvIGJ5dGVzLlxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgY2hhclRvQnl0ZU1hcFdlYlNhZmVfOiBudWxsLFxyXG4gICAgLyoqXHJcbiAgICAgKiBPdXIgZGVmYXVsdCBhbHBoYWJldCwgc2hhcmVkIGJldHdlZW5cclxuICAgICAqIEVOQ09ERURfVkFMUyBhbmQgRU5DT0RFRF9WQUxTX1dFQlNBRkVcclxuICAgICAqL1xyXG4gICAgRU5DT0RFRF9WQUxTX0JBU0U6ICdBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWicgKyAnYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXonICsgJzAxMjM0NTY3ODknLFxyXG4gICAgLyoqXHJcbiAgICAgKiBPdXIgZGVmYXVsdCBhbHBoYWJldC4gVmFsdWUgNjQgKD0pIGlzIHNwZWNpYWw7IGl0IG1lYW5zIFwibm90aGluZy5cIlxyXG4gICAgICovXHJcbiAgICBnZXQgRU5DT0RFRF9WQUxTKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLkVOQ09ERURfVkFMU19CQVNFICsgJysvPSc7XHJcbiAgICB9LFxyXG4gICAgLyoqXHJcbiAgICAgKiBPdXIgd2Vic2FmZSBhbHBoYWJldC5cclxuICAgICAqL1xyXG4gICAgZ2V0IEVOQ09ERURfVkFMU19XRUJTQUZFKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLkVOQ09ERURfVkFMU19CQVNFICsgJy1fLic7XHJcbiAgICB9LFxyXG4gICAgLyoqXHJcbiAgICAgKiBXaGV0aGVyIHRoaXMgYnJvd3NlciBzdXBwb3J0cyB0aGUgYXRvYiBhbmQgYnRvYSBmdW5jdGlvbnMuIFRoaXMgZXh0ZW5zaW9uXHJcbiAgICAgKiBzdGFydGVkIGF0IE1vemlsbGEgYnV0IGlzIG5vdyBpbXBsZW1lbnRlZCBieSBtYW55IGJyb3dzZXJzLiBXZSB1c2UgdGhlXHJcbiAgICAgKiBBU1NVTUVfKiB2YXJpYWJsZXMgdG8gYXZvaWQgcHVsbGluZyBpbiB0aGUgZnVsbCB1c2VyYWdlbnQgZGV0ZWN0aW9uIGxpYnJhcnlcclxuICAgICAqIGJ1dCBzdGlsbCBhbGxvd2luZyB0aGUgc3RhbmRhcmQgcGVyLWJyb3dzZXIgY29tcGlsYXRpb25zLlxyXG4gICAgICpcclxuICAgICAqL1xyXG4gICAgSEFTX05BVElWRV9TVVBQT1JUOiB0eXBlb2YgYXRvYiA9PT0gJ2Z1bmN0aW9uJyxcclxuICAgIC8qKlxyXG4gICAgICogQmFzZTY0LWVuY29kZSBhbiBhcnJheSBvZiBieXRlcy5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gaW5wdXQgQW4gYXJyYXkgb2YgYnl0ZXMgKG51bWJlcnMgd2l0aFxyXG4gICAgICogICAgIHZhbHVlIGluIFswLCAyNTVdKSB0byBlbmNvZGUuXHJcbiAgICAgKiBAcGFyYW0gd2ViU2FmZSBCb29sZWFuIGluZGljYXRpbmcgd2Ugc2hvdWxkIHVzZSB0aGVcclxuICAgICAqICAgICBhbHRlcm5hdGl2ZSBhbHBoYWJldC5cclxuICAgICAqIEByZXR1cm4gVGhlIGJhc2U2NCBlbmNvZGVkIHN0cmluZy5cclxuICAgICAqL1xyXG4gICAgZW5jb2RlQnl0ZUFycmF5OiBmdW5jdGlvbiAoaW5wdXQsIHdlYlNhZmUpIHtcclxuICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkoaW5wdXQpKSB7XHJcbiAgICAgICAgICAgIHRocm93IEVycm9yKCdlbmNvZGVCeXRlQXJyYXkgdGFrZXMgYW4gYXJyYXkgYXMgYSBwYXJhbWV0ZXInKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5pbml0XygpO1xyXG4gICAgICAgIHZhciBieXRlVG9DaGFyTWFwID0gd2ViU2FmZVxyXG4gICAgICAgICAgICA/IHRoaXMuYnl0ZVRvQ2hhck1hcFdlYlNhZmVfXHJcbiAgICAgICAgICAgIDogdGhpcy5ieXRlVG9DaGFyTWFwXztcclxuICAgICAgICB2YXIgb3V0cHV0ID0gW107XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpbnB1dC5sZW5ndGg7IGkgKz0gMykge1xyXG4gICAgICAgICAgICB2YXIgYnl0ZTEgPSBpbnB1dFtpXTtcclxuICAgICAgICAgICAgdmFyIGhhdmVCeXRlMiA9IGkgKyAxIDwgaW5wdXQubGVuZ3RoO1xyXG4gICAgICAgICAgICB2YXIgYnl0ZTIgPSBoYXZlQnl0ZTIgPyBpbnB1dFtpICsgMV0gOiAwO1xyXG4gICAgICAgICAgICB2YXIgaGF2ZUJ5dGUzID0gaSArIDIgPCBpbnB1dC5sZW5ndGg7XHJcbiAgICAgICAgICAgIHZhciBieXRlMyA9IGhhdmVCeXRlMyA/IGlucHV0W2kgKyAyXSA6IDA7XHJcbiAgICAgICAgICAgIHZhciBvdXRCeXRlMSA9IGJ5dGUxID4+IDI7XHJcbiAgICAgICAgICAgIHZhciBvdXRCeXRlMiA9ICgoYnl0ZTEgJiAweDAzKSA8PCA0KSB8IChieXRlMiA+PiA0KTtcclxuICAgICAgICAgICAgdmFyIG91dEJ5dGUzID0gKChieXRlMiAmIDB4MGYpIDw8IDIpIHwgKGJ5dGUzID4+IDYpO1xyXG4gICAgICAgICAgICB2YXIgb3V0Qnl0ZTQgPSBieXRlMyAmIDB4M2Y7XHJcbiAgICAgICAgICAgIGlmICghaGF2ZUJ5dGUzKSB7XHJcbiAgICAgICAgICAgICAgICBvdXRCeXRlNCA9IDY0O1xyXG4gICAgICAgICAgICAgICAgaWYgKCFoYXZlQnl0ZTIpIHtcclxuICAgICAgICAgICAgICAgICAgICBvdXRCeXRlMyA9IDY0O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG91dHB1dC5wdXNoKGJ5dGVUb0NoYXJNYXBbb3V0Qnl0ZTFdLCBieXRlVG9DaGFyTWFwW291dEJ5dGUyXSwgYnl0ZVRvQ2hhck1hcFtvdXRCeXRlM10sIGJ5dGVUb0NoYXJNYXBbb3V0Qnl0ZTRdKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG91dHB1dC5qb2luKCcnKTtcclxuICAgIH0sXHJcbiAgICAvKipcclxuICAgICAqIEJhc2U2NC1lbmNvZGUgYSBzdHJpbmcuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGlucHV0IEEgc3RyaW5nIHRvIGVuY29kZS5cclxuICAgICAqIEBwYXJhbSB3ZWJTYWZlIElmIHRydWUsIHdlIHNob3VsZCB1c2UgdGhlXHJcbiAgICAgKiAgICAgYWx0ZXJuYXRpdmUgYWxwaGFiZXQuXHJcbiAgICAgKiBAcmV0dXJuIFRoZSBiYXNlNjQgZW5jb2RlZCBzdHJpbmcuXHJcbiAgICAgKi9cclxuICAgIGVuY29kZVN0cmluZzogZnVuY3Rpb24gKGlucHV0LCB3ZWJTYWZlKSB7XHJcbiAgICAgICAgLy8gU2hvcnRjdXQgZm9yIE1vemlsbGEgYnJvd3NlcnMgdGhhdCBpbXBsZW1lbnRcclxuICAgICAgICAvLyBhIG5hdGl2ZSBiYXNlNjQgZW5jb2RlciBpbiB0aGUgZm9ybSBvZiBcImJ0b2EvYXRvYlwiXHJcbiAgICAgICAgaWYgKHRoaXMuSEFTX05BVElWRV9TVVBQT1JUICYmICF3ZWJTYWZlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBidG9hKGlucHV0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5jb2RlQnl0ZUFycmF5KHN0cmluZ1RvQnl0ZUFycmF5KGlucHV0KSwgd2ViU2FmZSk7XHJcbiAgICB9LFxyXG4gICAgLyoqXHJcbiAgICAgKiBCYXNlNjQtZGVjb2RlIGEgc3RyaW5nLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBpbnB1dCB0byBkZWNvZGUuXHJcbiAgICAgKiBAcGFyYW0gd2ViU2FmZSBUcnVlIGlmIHdlIHNob3VsZCB1c2UgdGhlXHJcbiAgICAgKiAgICAgYWx0ZXJuYXRpdmUgYWxwaGFiZXQuXHJcbiAgICAgKiBAcmV0dXJuIHN0cmluZyByZXByZXNlbnRpbmcgdGhlIGRlY29kZWQgdmFsdWUuXHJcbiAgICAgKi9cclxuICAgIGRlY29kZVN0cmluZzogZnVuY3Rpb24gKGlucHV0LCB3ZWJTYWZlKSB7XHJcbiAgICAgICAgLy8gU2hvcnRjdXQgZm9yIE1vemlsbGEgYnJvd3NlcnMgdGhhdCBpbXBsZW1lbnRcclxuICAgICAgICAvLyBhIG5hdGl2ZSBiYXNlNjQgZW5jb2RlciBpbiB0aGUgZm9ybSBvZiBcImJ0b2EvYXRvYlwiXHJcbiAgICAgICAgaWYgKHRoaXMuSEFTX05BVElWRV9TVVBQT1JUICYmICF3ZWJTYWZlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBhdG9iKGlucHV0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGJ5dGVBcnJheVRvU3RyaW5nKHRoaXMuZGVjb2RlU3RyaW5nVG9CeXRlQXJyYXkoaW5wdXQsIHdlYlNhZmUpKTtcclxuICAgIH0sXHJcbiAgICAvKipcclxuICAgICAqIEJhc2U2NC1kZWNvZGUgYSBzdHJpbmcuXHJcbiAgICAgKlxyXG4gICAgICogSW4gYmFzZS02NCBkZWNvZGluZywgZ3JvdXBzIG9mIGZvdXIgY2hhcmFjdGVycyBhcmUgY29udmVydGVkIGludG8gdGhyZWVcclxuICAgICAqIGJ5dGVzLiAgSWYgdGhlIGVuY29kZXIgZGlkIG5vdCBhcHBseSBwYWRkaW5nLCB0aGUgaW5wdXQgbGVuZ3RoIG1heSBub3RcclxuICAgICAqIGJlIGEgbXVsdGlwbGUgb2YgNC5cclxuICAgICAqXHJcbiAgICAgKiBJbiB0aGlzIGNhc2UsIHRoZSBsYXN0IGdyb3VwIHdpbGwgaGF2ZSBmZXdlciB0aGFuIDQgY2hhcmFjdGVycywgYW5kXHJcbiAgICAgKiBwYWRkaW5nIHdpbGwgYmUgaW5mZXJyZWQuICBJZiB0aGUgZ3JvdXAgaGFzIG9uZSBvciB0d28gY2hhcmFjdGVycywgaXQgZGVjb2Rlc1xyXG4gICAgICogdG8gb25lIGJ5dGUuICBJZiB0aGUgZ3JvdXAgaGFzIHRocmVlIGNoYXJhY3RlcnMsIGl0IGRlY29kZXMgdG8gdHdvIGJ5dGVzLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBpbnB1dCBJbnB1dCB0byBkZWNvZGUuXHJcbiAgICAgKiBAcGFyYW0gd2ViU2FmZSBUcnVlIGlmIHdlIHNob3VsZCB1c2UgdGhlIHdlYi1zYWZlIGFscGhhYmV0LlxyXG4gICAgICogQHJldHVybiBieXRlcyByZXByZXNlbnRpbmcgdGhlIGRlY29kZWQgdmFsdWUuXHJcbiAgICAgKi9cclxuICAgIGRlY29kZVN0cmluZ1RvQnl0ZUFycmF5OiBmdW5jdGlvbiAoaW5wdXQsIHdlYlNhZmUpIHtcclxuICAgICAgICB0aGlzLmluaXRfKCk7XHJcbiAgICAgICAgdmFyIGNoYXJUb0J5dGVNYXAgPSB3ZWJTYWZlXHJcbiAgICAgICAgICAgID8gdGhpcy5jaGFyVG9CeXRlTWFwV2ViU2FmZV9cclxuICAgICAgICAgICAgOiB0aGlzLmNoYXJUb0J5dGVNYXBfO1xyXG4gICAgICAgIHZhciBvdXRwdXQgPSBbXTtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGlucHV0Lmxlbmd0aDspIHtcclxuICAgICAgICAgICAgdmFyIGJ5dGUxID0gY2hhclRvQnl0ZU1hcFtpbnB1dC5jaGFyQXQoaSsrKV07XHJcbiAgICAgICAgICAgIHZhciBoYXZlQnl0ZTIgPSBpIDwgaW5wdXQubGVuZ3RoO1xyXG4gICAgICAgICAgICB2YXIgYnl0ZTIgPSBoYXZlQnl0ZTIgPyBjaGFyVG9CeXRlTWFwW2lucHV0LmNoYXJBdChpKV0gOiAwO1xyXG4gICAgICAgICAgICArK2k7XHJcbiAgICAgICAgICAgIHZhciBoYXZlQnl0ZTMgPSBpIDwgaW5wdXQubGVuZ3RoO1xyXG4gICAgICAgICAgICB2YXIgYnl0ZTMgPSBoYXZlQnl0ZTMgPyBjaGFyVG9CeXRlTWFwW2lucHV0LmNoYXJBdChpKV0gOiA2NDtcclxuICAgICAgICAgICAgKytpO1xyXG4gICAgICAgICAgICB2YXIgaGF2ZUJ5dGU0ID0gaSA8IGlucHV0Lmxlbmd0aDtcclxuICAgICAgICAgICAgdmFyIGJ5dGU0ID0gaGF2ZUJ5dGU0ID8gY2hhclRvQnl0ZU1hcFtpbnB1dC5jaGFyQXQoaSldIDogNjQ7XHJcbiAgICAgICAgICAgICsraTtcclxuICAgICAgICAgICAgaWYgKGJ5dGUxID09IG51bGwgfHwgYnl0ZTIgPT0gbnVsbCB8fCBieXRlMyA9PSBudWxsIHx8IGJ5dGU0ID09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IEVycm9yKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIG91dEJ5dGUxID0gKGJ5dGUxIDw8IDIpIHwgKGJ5dGUyID4+IDQpO1xyXG4gICAgICAgICAgICBvdXRwdXQucHVzaChvdXRCeXRlMSk7XHJcbiAgICAgICAgICAgIGlmIChieXRlMyAhPT0gNjQpIHtcclxuICAgICAgICAgICAgICAgIHZhciBvdXRCeXRlMiA9ICgoYnl0ZTIgPDwgNCkgJiAweGYwKSB8IChieXRlMyA+PiAyKTtcclxuICAgICAgICAgICAgICAgIG91dHB1dC5wdXNoKG91dEJ5dGUyKTtcclxuICAgICAgICAgICAgICAgIGlmIChieXRlNCAhPT0gNjQpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgb3V0Qnl0ZTMgPSAoKGJ5dGUzIDw8IDYpICYgMHhjMCkgfCBieXRlNDtcclxuICAgICAgICAgICAgICAgICAgICBvdXRwdXQucHVzaChvdXRCeXRlMyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG91dHB1dDtcclxuICAgIH0sXHJcbiAgICAvKipcclxuICAgICAqIExhenkgc3RhdGljIGluaXRpYWxpemF0aW9uIGZ1bmN0aW9uLiBDYWxsZWQgYmVmb3JlXHJcbiAgICAgKiBhY2Nlc3NpbmcgYW55IG9mIHRoZSBzdGF0aWMgbWFwIHZhcmlhYmxlcy5cclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIGluaXRfOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmJ5dGVUb0NoYXJNYXBfKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYnl0ZVRvQ2hhck1hcF8gPSB7fTtcclxuICAgICAgICAgICAgdGhpcy5jaGFyVG9CeXRlTWFwXyA9IHt9O1xyXG4gICAgICAgICAgICB0aGlzLmJ5dGVUb0NoYXJNYXBXZWJTYWZlXyA9IHt9O1xyXG4gICAgICAgICAgICB0aGlzLmNoYXJUb0J5dGVNYXBXZWJTYWZlXyA9IHt9O1xyXG4gICAgICAgICAgICAvLyBXZSB3YW50IHF1aWNrIG1hcHBpbmdzIGJhY2sgYW5kIGZvcnRoLCBzbyB3ZSBwcmVjb21wdXRlIHR3byBtYXBzLlxyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuRU5DT0RFRF9WQUxTLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmJ5dGVUb0NoYXJNYXBfW2ldID0gdGhpcy5FTkNPREVEX1ZBTFMuY2hhckF0KGkpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jaGFyVG9CeXRlTWFwX1t0aGlzLmJ5dGVUb0NoYXJNYXBfW2ldXSA9IGk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmJ5dGVUb0NoYXJNYXBXZWJTYWZlX1tpXSA9IHRoaXMuRU5DT0RFRF9WQUxTX1dFQlNBRkUuY2hhckF0KGkpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jaGFyVG9CeXRlTWFwV2ViU2FmZV9bdGhpcy5ieXRlVG9DaGFyTWFwV2ViU2FmZV9baV1dID0gaTtcclxuICAgICAgICAgICAgICAgIC8vIEJlIGZvcmdpdmluZyB3aGVuIGRlY29kaW5nIGFuZCBjb3JyZWN0bHkgZGVjb2RlIGJvdGggZW5jb2RpbmdzLlxyXG4gICAgICAgICAgICAgICAgaWYgKGkgPj0gdGhpcy5FTkNPREVEX1ZBTFNfQkFTRS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNoYXJUb0J5dGVNYXBfW3RoaXMuRU5DT0RFRF9WQUxTX1dFQlNBRkUuY2hhckF0KGkpXSA9IGk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGFyVG9CeXRlTWFwV2ViU2FmZV9bdGhpcy5FTkNPREVEX1ZBTFMuY2hhckF0KGkpXSA9IGk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn07XHJcbi8qKlxyXG4gKiBVUkwtc2FmZSBiYXNlNjQgZW5jb2RpbmdcclxuICovXHJcbnZhciBiYXNlNjRFbmNvZGUgPSBmdW5jdGlvbiAoc3RyKSB7XHJcbiAgICB2YXIgdXRmOEJ5dGVzID0gc3RyaW5nVG9CeXRlQXJyYXkoc3RyKTtcclxuICAgIHJldHVybiBiYXNlNjQuZW5jb2RlQnl0ZUFycmF5KHV0ZjhCeXRlcywgdHJ1ZSk7XHJcbn07XHJcbi8qKlxyXG4gKiBVUkwtc2FmZSBiYXNlNjQgZGVjb2RpbmdcclxuICpcclxuICogTk9URTogRE8gTk9UIHVzZSB0aGUgZ2xvYmFsIGF0b2IoKSBmdW5jdGlvbiAtIGl0IGRvZXMgTk9UIHN1cHBvcnQgdGhlXHJcbiAqIGJhc2U2NFVybCB2YXJpYW50IGVuY29kaW5nLlxyXG4gKlxyXG4gKiBAcGFyYW0gc3RyIFRvIGJlIGRlY29kZWRcclxuICogQHJldHVybiBEZWNvZGVkIHJlc3VsdCwgaWYgcG9zc2libGVcclxuICovXHJcbnZhciBiYXNlNjREZWNvZGUgPSBmdW5jdGlvbiAoc3RyKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIHJldHVybiBiYXNlNjQuZGVjb2RlU3RyaW5nKHN0ciwgdHJ1ZSk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ2Jhc2U2NERlY29kZSBmYWlsZWQ6ICcsIGUpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG51bGw7XHJcbn07XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogRG8gYSBkZWVwLWNvcHkgb2YgYmFzaWMgSmF2YVNjcmlwdCBPYmplY3RzIG9yIEFycmF5cy5cclxuICovXHJcbmZ1bmN0aW9uIGRlZXBDb3B5KHZhbHVlKSB7XHJcbiAgICByZXR1cm4gZGVlcEV4dGVuZCh1bmRlZmluZWQsIHZhbHVlKTtcclxufVxyXG4vKipcclxuICogQ29weSBwcm9wZXJ0aWVzIGZyb20gc291cmNlIHRvIHRhcmdldCAocmVjdXJzaXZlbHkgYWxsb3dzIGV4dGVuc2lvblxyXG4gKiBvZiBPYmplY3RzIGFuZCBBcnJheXMpLiAgU2NhbGFyIHZhbHVlcyBpbiB0aGUgdGFyZ2V0IGFyZSBvdmVyLXdyaXR0ZW4uXHJcbiAqIElmIHRhcmdldCBpcyB1bmRlZmluZWQsIGFuIG9iamVjdCBvZiB0aGUgYXBwcm9wcmlhdGUgdHlwZSB3aWxsIGJlIGNyZWF0ZWRcclxuICogKGFuZCByZXR1cm5lZCkuXHJcbiAqXHJcbiAqIFdlIHJlY3Vyc2l2ZWx5IGNvcHkgYWxsIGNoaWxkIHByb3BlcnRpZXMgb2YgcGxhaW4gT2JqZWN0cyBpbiB0aGUgc291cmNlLSBzb1xyXG4gKiB0aGF0IG5hbWVzcGFjZS0gbGlrZSBkaWN0aW9uYXJpZXMgYXJlIG1lcmdlZC5cclxuICpcclxuICogTm90ZSB0aGF0IHRoZSB0YXJnZXQgY2FuIGJlIGEgZnVuY3Rpb24sIGluIHdoaWNoIGNhc2UgdGhlIHByb3BlcnRpZXMgaW5cclxuICogdGhlIHNvdXJjZSBPYmplY3QgYXJlIGNvcGllZCBvbnRvIGl0IGFzIHN0YXRpYyBwcm9wZXJ0aWVzIG9mIHRoZSBGdW5jdGlvbi5cclxuICovXHJcbmZ1bmN0aW9uIGRlZXBFeHRlbmQodGFyZ2V0LCBzb3VyY2UpIHtcclxuICAgIGlmICghKHNvdXJjZSBpbnN0YW5jZW9mIE9iamVjdCkpIHtcclxuICAgICAgICByZXR1cm4gc291cmNlO1xyXG4gICAgfVxyXG4gICAgc3dpdGNoIChzb3VyY2UuY29uc3RydWN0b3IpIHtcclxuICAgICAgICBjYXNlIERhdGU6XHJcbiAgICAgICAgICAgIC8vIFRyZWF0IERhdGVzIGxpa2Ugc2NhbGFyczsgaWYgdGhlIHRhcmdldCBkYXRlIG9iamVjdCBoYWQgYW55IGNoaWxkXHJcbiAgICAgICAgICAgIC8vIHByb3BlcnRpZXMgLSB0aGV5IHdpbGwgYmUgbG9zdCFcclxuICAgICAgICAgICAgdmFyIGRhdGVWYWx1ZSA9IHNvdXJjZTtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBEYXRlKGRhdGVWYWx1ZS5nZXRUaW1lKCkpO1xyXG4gICAgICAgIGNhc2UgT2JqZWN0OlxyXG4gICAgICAgICAgICBpZiAodGFyZ2V0ID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIHRhcmdldCA9IHt9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgQXJyYXk6XHJcbiAgICAgICAgICAgIC8vIEFsd2F5cyBjb3B5IHRoZSBhcnJheSBzb3VyY2UgYW5kIG92ZXJ3cml0ZSB0aGUgdGFyZ2V0LlxyXG4gICAgICAgICAgICB0YXJnZXQgPSBbXTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgLy8gTm90IGEgcGxhaW4gT2JqZWN0IC0gdHJlYXQgaXQgYXMgYSBzY2FsYXIuXHJcbiAgICAgICAgICAgIHJldHVybiBzb3VyY2U7XHJcbiAgICB9XHJcbiAgICBmb3IgKHZhciBwcm9wIGluIHNvdXJjZSkge1xyXG4gICAgICAgIGlmICghc291cmNlLmhhc093blByb3BlcnR5KHByb3ApKSB7XHJcbiAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0YXJnZXRbcHJvcF0gPSBkZWVwRXh0ZW5kKHRhcmdldFtwcm9wXSwgc291cmNlW3Byb3BdKTtcclxuICAgIH1cclxuICAgIHJldHVybiB0YXJnZXQ7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnZhciBEZWZlcnJlZCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIERlZmVycmVkKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5yZWplY3QgPSBmdW5jdGlvbiAoKSB7IH07XHJcbiAgICAgICAgdGhpcy5yZXNvbHZlID0gZnVuY3Rpb24gKCkgeyB9O1xyXG4gICAgICAgIHRoaXMucHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgX3RoaXMucmVzb2x2ZSA9IHJlc29sdmU7XHJcbiAgICAgICAgICAgIF90aGlzLnJlamVjdCA9IHJlamVjdDtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogT3VyIEFQSSBpbnRlcm5hbHMgYXJlIG5vdCBwcm9taXNlaWZpZWQgYW5kIGNhbm5vdCBiZWNhdXNlIG91ciBjYWxsYmFjayBBUElzIGhhdmUgc3VidGxlIGV4cGVjdGF0aW9ucyBhcm91bmRcclxuICAgICAqIGludm9raW5nIHByb21pc2VzIGlubGluZSwgd2hpY2ggUHJvbWlzZXMgYXJlIGZvcmJpZGRlbiB0byBkby4gVGhpcyBtZXRob2QgYWNjZXB0cyBhbiBvcHRpb25hbCBub2RlLXN0eWxlIGNhbGxiYWNrXHJcbiAgICAgKiBhbmQgcmV0dXJucyBhIG5vZGUtc3R5bGUgY2FsbGJhY2sgd2hpY2ggd2lsbCByZXNvbHZlIG9yIHJlamVjdCB0aGUgRGVmZXJyZWQncyBwcm9taXNlLlxyXG4gICAgICovXHJcbiAgICBEZWZlcnJlZC5wcm90b3R5cGUud3JhcENhbGxiYWNrID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGVycm9yLCB2YWx1ZSkge1xyXG4gICAgICAgICAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLnJlamVjdChlcnJvcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5yZXNvbHZlKHZhbHVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodHlwZW9mIGNhbGxiYWNrID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBBdHRhY2hpbmcgbm9vcCBoYW5kbGVyIGp1c3QgaW4gY2FzZSBkZXZlbG9wZXIgd2Fzbid0IGV4cGVjdGluZ1xyXG4gICAgICAgICAgICAgICAgLy8gcHJvbWlzZXNcclxuICAgICAgICAgICAgICAgIF90aGlzLnByb21pc2UuY2F0Y2goZnVuY3Rpb24gKCkgeyB9KTtcclxuICAgICAgICAgICAgICAgIC8vIFNvbWUgb2Ygb3VyIGNhbGxiYWNrcyBkb24ndCBleHBlY3QgYSB2YWx1ZSBhbmQgb3VyIG93biB0ZXN0c1xyXG4gICAgICAgICAgICAgICAgLy8gYXNzZXJ0IHRoYXQgdGhlIHBhcmFtZXRlciBsZW5ndGggaXMgMVxyXG4gICAgICAgICAgICAgICAgaWYgKGNhbGxiYWNrLmxlbmd0aCA9PT0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKGVycm9yKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKGVycm9yLCB2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfTtcclxuICAgIHJldHVybiBEZWZlcnJlZDtcclxufSgpKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBSZXR1cm5zIG5hdmlnYXRvci51c2VyQWdlbnQgc3RyaW5nIG9yICcnIGlmIGl0J3Mgbm90IGRlZmluZWQuXHJcbiAqIEByZXR1cm4gdXNlciBhZ2VudCBzdHJpbmdcclxuICovXHJcbmZ1bmN0aW9uIGdldFVBKCkge1xyXG4gICAgaWYgKHR5cGVvZiBuYXZpZ2F0b3IgIT09ICd1bmRlZmluZWQnICYmXHJcbiAgICAgICAgdHlwZW9mIG5hdmlnYXRvclsndXNlckFnZW50J10gPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgcmV0dXJuIG5hdmlnYXRvclsndXNlckFnZW50J107XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICByZXR1cm4gJyc7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIERldGVjdCBDb3Jkb3ZhIC8gUGhvbmVHYXAgLyBJb25pYyBmcmFtZXdvcmtzIG9uIGEgbW9iaWxlIGRldmljZS5cclxuICpcclxuICogRGVsaWJlcmF0ZWx5IGRvZXMgbm90IHJlbHkgb24gY2hlY2tpbmcgYGZpbGU6Ly9gIFVSTHMgKGFzIHRoaXMgZmFpbHMgUGhvbmVHYXBcclxuICogaW4gdGhlIFJpcHBsZSBlbXVsYXRvcikgbm9yIENvcmRvdmEgYG9uRGV2aWNlUmVhZHlgLCB3aGljaCB3b3VsZCBub3JtYWxseVxyXG4gKiB3YWl0IGZvciBhIGNhbGxiYWNrLlxyXG4gKi9cclxuZnVuY3Rpb24gaXNNb2JpbGVDb3Jkb3ZhKCkge1xyXG4gICAgcmV0dXJuICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJlxyXG4gICAgICAgIC8vIEB0cy1pZ25vcmUgU2V0dGluZyB1cCBhbiBicm9hZGx5IGFwcGxpY2FibGUgaW5kZXggc2lnbmF0dXJlIGZvciBXaW5kb3dcclxuICAgICAgICAvLyBqdXN0IHRvIGRlYWwgd2l0aCB0aGlzIGNhc2Ugd291bGQgcHJvYmFibHkgYmUgYSBiYWQgaWRlYS5cclxuICAgICAgICAhISh3aW5kb3dbJ2NvcmRvdmEnXSB8fCB3aW5kb3dbJ3Bob25lZ2FwJ10gfHwgd2luZG93WydQaG9uZUdhcCddKSAmJlxyXG4gICAgICAgIC9pb3N8aXBob25lfGlwb2R8aXBhZHxhbmRyb2lkfGJsYWNrYmVycnl8aWVtb2JpbGUvaS50ZXN0KGdldFVBKCkpKTtcclxufVxyXG4vKipcclxuICogRGV0ZWN0IE5vZGUuanMuXHJcbiAqXHJcbiAqIEByZXR1cm4gdHJ1ZSBpZiBOb2RlLmpzIGVudmlyb25tZW50IGlzIGRldGVjdGVkLlxyXG4gKi9cclxuLy8gTm9kZSBkZXRlY3Rpb24gbG9naWMgZnJvbTogaHR0cHM6Ly9naXRodWIuY29tL2lsaWFrYW4vZGV0ZWN0LW5vZGUvXHJcbmZ1bmN0aW9uIGlzTm9kZSgpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgcmV0dXJuIChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZ2xvYmFsLnByb2Nlc3MpID09PSAnW29iamVjdCBwcm9jZXNzXScpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIERldGVjdCBCcm93c2VyIEVudmlyb25tZW50XHJcbiAqL1xyXG5mdW5jdGlvbiBpc0Jyb3dzZXIoKSB7XHJcbiAgICByZXR1cm4gdHlwZW9mIHNlbGYgPT09ICdvYmplY3QnICYmIHNlbGYuc2VsZiA9PT0gc2VsZjtcclxufVxyXG4vKipcclxuICogRGV0ZWN0IFJlYWN0IE5hdGl2ZS5cclxuICpcclxuICogQHJldHVybiB0cnVlIGlmIFJlYWN0TmF0aXZlIGVudmlyb25tZW50IGlzIGRldGVjdGVkLlxyXG4gKi9cclxuZnVuY3Rpb24gaXNSZWFjdE5hdGl2ZSgpIHtcclxuICAgIHJldHVybiAodHlwZW9mIG5hdmlnYXRvciA9PT0gJ29iamVjdCcgJiYgbmF2aWdhdG9yWydwcm9kdWN0J10gPT09ICdSZWFjdE5hdGl2ZScpO1xyXG59XHJcbi8qKlxyXG4gKiBEZXRlY3Qgd2hldGhlciB0aGUgY3VycmVudCBTREsgYnVpbGQgaXMgdGhlIE5vZGUgdmVyc2lvbi5cclxuICpcclxuICogQHJldHVybiB0cnVlIGlmIGl0J3MgdGhlIE5vZGUgU0RLIGJ1aWxkLlxyXG4gKi9cclxuZnVuY3Rpb24gaXNOb2RlU2RrKCkge1xyXG4gICAgcmV0dXJuIENPTlNUQU5UUy5OT0RFX0NMSUVOVCA9PT0gdHJ1ZSB8fCBDT05TVEFOVFMuTk9ERV9BRE1JTiA9PT0gdHJ1ZTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxudmFyIEVSUk9SX05BTUUgPSAnRmlyZWJhc2VFcnJvcic7XHJcbi8vIEJhc2VkIG9uIGNvZGUgZnJvbTpcclxuLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvRXJyb3IjQ3VzdG9tX0Vycm9yX1R5cGVzXHJcbnZhciBGaXJlYmFzZUVycm9yID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgdHNsaWIuX19leHRlbmRzKEZpcmViYXNlRXJyb3IsIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBGaXJlYmFzZUVycm9yKGNvZGUsIG1lc3NhZ2UpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBtZXNzYWdlKSB8fCB0aGlzO1xyXG4gICAgICAgIF90aGlzLmNvZGUgPSBjb2RlO1xyXG4gICAgICAgIF90aGlzLm5hbWUgPSBFUlJPUl9OQU1FO1xyXG4gICAgICAgIC8vIEZpeCBGb3IgRVM1XHJcbiAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL01pY3Jvc29mdC9UeXBlU2NyaXB0LXdpa2kvYmxvYi9tYXN0ZXIvQnJlYWtpbmctQ2hhbmdlcy5tZCNleHRlbmRpbmctYnVpbHQtaW5zLWxpa2UtZXJyb3ItYXJyYXktYW5kLW1hcC1tYXktbm8tbG9uZ2VyLXdvcmtcclxuICAgICAgICBPYmplY3Quc2V0UHJvdG90eXBlT2YoX3RoaXMsIEZpcmViYXNlRXJyb3IucHJvdG90eXBlKTtcclxuICAgICAgICAvLyBNYWludGFpbnMgcHJvcGVyIHN0YWNrIHRyYWNlIGZvciB3aGVyZSBvdXIgZXJyb3Igd2FzIHRocm93bi5cclxuICAgICAgICAvLyBPbmx5IGF2YWlsYWJsZSBvbiBWOC5cclxuICAgICAgICBpZiAoRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UpIHtcclxuICAgICAgICAgICAgRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UoX3RoaXMsIEVycm9yRmFjdG9yeS5wcm90b3R5cGUuY3JlYXRlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIEZpcmViYXNlRXJyb3I7XHJcbn0oRXJyb3IpKTtcclxudmFyIEVycm9yRmFjdG9yeSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEVycm9yRmFjdG9yeShzZXJ2aWNlLCBzZXJ2aWNlTmFtZSwgZXJyb3JzKSB7XHJcbiAgICAgICAgdGhpcy5zZXJ2aWNlID0gc2VydmljZTtcclxuICAgICAgICB0aGlzLnNlcnZpY2VOYW1lID0gc2VydmljZU5hbWU7XHJcbiAgICAgICAgdGhpcy5lcnJvcnMgPSBlcnJvcnM7XHJcbiAgICB9XHJcbiAgICBFcnJvckZhY3RvcnkucHJvdG90eXBlLmNyZWF0ZSA9IGZ1bmN0aW9uIChjb2RlKSB7XHJcbiAgICAgICAgdmFyIGRhdGEgPSBbXTtcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDE7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICBkYXRhW19pIC0gMV0gPSBhcmd1bWVudHNbX2ldO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgY3VzdG9tRGF0YSA9IGRhdGFbMF0gfHwge307XHJcbiAgICAgICAgdmFyIGZ1bGxDb2RlID0gdGhpcy5zZXJ2aWNlICsgXCIvXCIgKyBjb2RlO1xyXG4gICAgICAgIHZhciB0ZW1wbGF0ZSA9IHRoaXMuZXJyb3JzW2NvZGVdO1xyXG4gICAgICAgIHZhciBtZXNzYWdlID0gdGVtcGxhdGUgPyByZXBsYWNlVGVtcGxhdGUodGVtcGxhdGUsIGN1c3RvbURhdGEpIDogJ0Vycm9yJztcclxuICAgICAgICAvLyBTZXJ2aWNlIE5hbWU6IEVycm9yIG1lc3NhZ2UgKHNlcnZpY2UvY29kZSkuXHJcbiAgICAgICAgdmFyIGZ1bGxNZXNzYWdlID0gdGhpcy5zZXJ2aWNlTmFtZSArIFwiOiBcIiArIG1lc3NhZ2UgKyBcIiAoXCIgKyBmdWxsQ29kZSArIFwiKS5cIjtcclxuICAgICAgICB2YXIgZXJyb3IgPSBuZXcgRmlyZWJhc2VFcnJvcihmdWxsQ29kZSwgZnVsbE1lc3NhZ2UpO1xyXG4gICAgICAgIC8vIEtleXMgd2l0aCBhbiB1bmRlcnNjb3JlIGF0IHRoZSBlbmQgb2YgdGhlaXIgbmFtZSBhcmUgbm90IGluY2x1ZGVkIGluXHJcbiAgICAgICAgLy8gZXJyb3IuZGF0YSBmb3Igc29tZSByZWFzb24uXHJcbiAgICAgICAgLy8gVE9ETzogUmVwbGFjZSB3aXRoIE9iamVjdC5lbnRyaWVzIHdoZW4gbGliIGlzIHVwZGF0ZWQgdG8gZXMyMDE3LlxyXG4gICAgICAgIGZvciAodmFyIF9hID0gMCwgX2IgPSBPYmplY3Qua2V5cyhjdXN0b21EYXRhKTsgX2EgPCBfYi5sZW5ndGg7IF9hKyspIHtcclxuICAgICAgICAgICAgdmFyIGtleSA9IF9iW19hXTtcclxuICAgICAgICAgICAgaWYgKGtleS5zbGljZSgtMSkgIT09ICdfJykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGtleSBpbiBlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihcIk92ZXJ3cml0aW5nIEZpcmViYXNlRXJyb3IgYmFzZSBmaWVsZCBcXFwiXCIgKyBrZXkgKyBcIlxcXCIgY2FuIGNhdXNlIHVuZXhwZWN0ZWQgYmVoYXZpb3IuXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZXJyb3Jba2V5XSA9IGN1c3RvbURhdGFba2V5XTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZXJyb3I7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEVycm9yRmFjdG9yeTtcclxufSgpKTtcclxuZnVuY3Rpb24gcmVwbGFjZVRlbXBsYXRlKHRlbXBsYXRlLCBkYXRhKSB7XHJcbiAgICByZXR1cm4gdGVtcGxhdGUucmVwbGFjZShQQVRURVJOLCBmdW5jdGlvbiAoXywga2V5KSB7XHJcbiAgICAgICAgdmFyIHZhbHVlID0gZGF0YVtrZXldO1xyXG4gICAgICAgIHJldHVybiB2YWx1ZSAhPSBudWxsID8gdmFsdWUudG9TdHJpbmcoKSA6IFwiPFwiICsga2V5ICsgXCI/PlwiO1xyXG4gICAgfSk7XHJcbn1cclxudmFyIFBBVFRFUk4gPSAvXFx7XFwkKFtefV0rKX0vZztcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBFdmFsdWF0ZXMgYSBKU09OIHN0cmluZyBpbnRvIGEgamF2YXNjcmlwdCBvYmplY3QuXHJcbiAqXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHIgQSBzdHJpbmcgY29udGFpbmluZyBKU09OLlxyXG4gKiBAcmV0dXJuIHsqfSBUaGUgamF2YXNjcmlwdCBvYmplY3QgcmVwcmVzZW50aW5nIHRoZSBzcGVjaWZpZWQgSlNPTi5cclxuICovXHJcbmZ1bmN0aW9uIGpzb25FdmFsKHN0cikge1xyXG4gICAgcmV0dXJuIEpTT04ucGFyc2Uoc3RyKTtcclxufVxyXG4vKipcclxuICogUmV0dXJucyBKU09OIHJlcHJlc2VudGluZyBhIGphdmFzY3JpcHQgb2JqZWN0LlxyXG4gKiBAcGFyYW0geyp9IGRhdGEgSmF2YXNjcmlwdCBvYmplY3QgdG8gYmUgc3RyaW5naWZpZWQuXHJcbiAqIEByZXR1cm4ge3N0cmluZ30gVGhlIEpTT04gY29udGVudHMgb2YgdGhlIG9iamVjdC5cclxuICovXHJcbmZ1bmN0aW9uIHN0cmluZ2lmeShkYXRhKSB7XHJcbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoZGF0YSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBEZWNvZGVzIGEgRmlyZWJhc2UgYXV0aC4gdG9rZW4gaW50byBjb25zdGl0dWVudCBwYXJ0cy5cclxuICpcclxuICogTm90ZXM6XHJcbiAqIC0gTWF5IHJldHVybiB3aXRoIGludmFsaWQgLyBpbmNvbXBsZXRlIGNsYWltcyBpZiB0aGVyZSdzIG5vIG5hdGl2ZSBiYXNlNjQgZGVjb2Rpbmcgc3VwcG9ydC5cclxuICogLSBEb2Vzbid0IGNoZWNrIGlmIHRoZSB0b2tlbiBpcyBhY3R1YWxseSB2YWxpZC5cclxuICovXHJcbnZhciBkZWNvZGUgPSBmdW5jdGlvbiAodG9rZW4pIHtcclxuICAgIHZhciBoZWFkZXIgPSB7fSwgY2xhaW1zID0ge30sIGRhdGEgPSB7fSwgc2lnbmF0dXJlID0gJyc7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIHZhciBwYXJ0cyA9IHRva2VuLnNwbGl0KCcuJyk7XHJcbiAgICAgICAgaGVhZGVyID0ganNvbkV2YWwoYmFzZTY0RGVjb2RlKHBhcnRzWzBdKSB8fCAnJyk7XHJcbiAgICAgICAgY2xhaW1zID0ganNvbkV2YWwoYmFzZTY0RGVjb2RlKHBhcnRzWzFdKSB8fCAnJyk7XHJcbiAgICAgICAgc2lnbmF0dXJlID0gcGFydHNbMl07XHJcbiAgICAgICAgZGF0YSA9IGNsYWltc1snZCddIHx8IHt9O1xyXG4gICAgICAgIGRlbGV0ZSBjbGFpbXNbJ2QnXTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7IH1cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgaGVhZGVyOiBoZWFkZXIsXHJcbiAgICAgICAgY2xhaW1zOiBjbGFpbXMsXHJcbiAgICAgICAgZGF0YTogZGF0YSxcclxuICAgICAgICBzaWduYXR1cmU6IHNpZ25hdHVyZVxyXG4gICAgfTtcclxufTtcclxuLyoqXHJcbiAqIERlY29kZXMgYSBGaXJlYmFzZSBhdXRoLiB0b2tlbiBhbmQgY2hlY2tzIHRoZSB2YWxpZGl0eSBvZiBpdHMgdGltZS1iYXNlZCBjbGFpbXMuIFdpbGwgcmV0dXJuIHRydWUgaWYgdGhlXHJcbiAqIHRva2VuIGlzIHdpdGhpbiB0aGUgdGltZSB3aW5kb3cgYXV0aG9yaXplZCBieSB0aGUgJ25iZicgKG5vdC1iZWZvcmUpIGFuZCAnaWF0JyAoaXNzdWVkLWF0KSBjbGFpbXMuXHJcbiAqXHJcbiAqIE5vdGVzOlxyXG4gKiAtIE1heSByZXR1cm4gYSBmYWxzZSBuZWdhdGl2ZSBpZiB0aGVyZSdzIG5vIG5hdGl2ZSBiYXNlNjQgZGVjb2Rpbmcgc3VwcG9ydC5cclxuICogLSBEb2Vzbid0IGNoZWNrIGlmIHRoZSB0b2tlbiBpcyBhY3R1YWxseSB2YWxpZC5cclxuICovXHJcbnZhciBpc1ZhbGlkVGltZXN0YW1wID0gZnVuY3Rpb24gKHRva2VuKSB7XHJcbiAgICB2YXIgY2xhaW1zID0gZGVjb2RlKHRva2VuKS5jbGFpbXM7XHJcbiAgICB2YXIgbm93ID0gTWF0aC5mbG9vcihuZXcgRGF0ZSgpLmdldFRpbWUoKSAvIDEwMDApO1xyXG4gICAgdmFyIHZhbGlkU2luY2UgPSAwLCB2YWxpZFVudGlsID0gMDtcclxuICAgIGlmICh0eXBlb2YgY2xhaW1zID09PSAnb2JqZWN0Jykge1xyXG4gICAgICAgIGlmIChjbGFpbXMuaGFzT3duUHJvcGVydHkoJ25iZicpKSB7XHJcbiAgICAgICAgICAgIHZhbGlkU2luY2UgPSBjbGFpbXNbJ25iZiddO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChjbGFpbXMuaGFzT3duUHJvcGVydHkoJ2lhdCcpKSB7XHJcbiAgICAgICAgICAgIHZhbGlkU2luY2UgPSBjbGFpbXNbJ2lhdCddO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoY2xhaW1zLmhhc093blByb3BlcnR5KCdleHAnKSkge1xyXG4gICAgICAgICAgICB2YWxpZFVudGlsID0gY2xhaW1zWydleHAnXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIHRva2VuIHdpbGwgZXhwaXJlIGFmdGVyIDI0aCBieSBkZWZhdWx0XHJcbiAgICAgICAgICAgIHZhbGlkVW50aWwgPSB2YWxpZFNpbmNlICsgODY0MDA7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuICghIW5vdyAmJlxyXG4gICAgICAgICEhdmFsaWRTaW5jZSAmJlxyXG4gICAgICAgICEhdmFsaWRVbnRpbCAmJlxyXG4gICAgICAgIG5vdyA+PSB2YWxpZFNpbmNlICYmXHJcbiAgICAgICAgbm93IDw9IHZhbGlkVW50aWwpO1xyXG59O1xyXG4vKipcclxuICogRGVjb2RlcyBhIEZpcmViYXNlIGF1dGguIHRva2VuIGFuZCByZXR1cm5zIGl0cyBpc3N1ZWQgYXQgdGltZSBpZiB2YWxpZCwgbnVsbCBvdGhlcndpc2UuXHJcbiAqXHJcbiAqIE5vdGVzOlxyXG4gKiAtIE1heSByZXR1cm4gbnVsbCBpZiB0aGVyZSdzIG5vIG5hdGl2ZSBiYXNlNjQgZGVjb2Rpbmcgc3VwcG9ydC5cclxuICogLSBEb2Vzbid0IGNoZWNrIGlmIHRoZSB0b2tlbiBpcyBhY3R1YWxseSB2YWxpZC5cclxuICovXHJcbnZhciBpc3N1ZWRBdFRpbWUgPSBmdW5jdGlvbiAodG9rZW4pIHtcclxuICAgIHZhciBjbGFpbXMgPSBkZWNvZGUodG9rZW4pLmNsYWltcztcclxuICAgIGlmICh0eXBlb2YgY2xhaW1zID09PSAnb2JqZWN0JyAmJiBjbGFpbXMuaGFzT3duUHJvcGVydHkoJ2lhdCcpKSB7XHJcbiAgICAgICAgcmV0dXJuIGNsYWltc1snaWF0J107XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbnVsbDtcclxufTtcclxuLyoqXHJcbiAqIERlY29kZXMgYSBGaXJlYmFzZSBhdXRoLiB0b2tlbiBhbmQgY2hlY2tzIHRoZSB2YWxpZGl0eSBvZiBpdHMgZm9ybWF0LiBFeHBlY3RzIGEgdmFsaWQgaXNzdWVkLWF0IHRpbWUuXHJcbiAqXHJcbiAqIE5vdGVzOlxyXG4gKiAtIE1heSByZXR1cm4gYSBmYWxzZSBuZWdhdGl2ZSBpZiB0aGVyZSdzIG5vIG5hdGl2ZSBiYXNlNjQgZGVjb2Rpbmcgc3VwcG9ydC5cclxuICogLSBEb2Vzbid0IGNoZWNrIGlmIHRoZSB0b2tlbiBpcyBhY3R1YWxseSB2YWxpZC5cclxuICovXHJcbnZhciBpc1ZhbGlkRm9ybWF0ID0gZnVuY3Rpb24gKHRva2VuKSB7XHJcbiAgICB2YXIgZGVjb2RlZCA9IGRlY29kZSh0b2tlbiksIGNsYWltcyA9IGRlY29kZWQuY2xhaW1zO1xyXG4gICAgcmV0dXJuICEhY2xhaW1zICYmIHR5cGVvZiBjbGFpbXMgPT09ICdvYmplY3QnICYmIGNsYWltcy5oYXNPd25Qcm9wZXJ0eSgnaWF0Jyk7XHJcbn07XHJcbi8qKlxyXG4gKiBBdHRlbXB0cyB0byBwZWVyIGludG8gYW4gYXV0aCB0b2tlbiBhbmQgZGV0ZXJtaW5lIGlmIGl0J3MgYW4gYWRtaW4gYXV0aCB0b2tlbiBieSBsb29raW5nIGF0IHRoZSBjbGFpbXMgcG9ydGlvbi5cclxuICpcclxuICogTm90ZXM6XHJcbiAqIC0gTWF5IHJldHVybiBhIGZhbHNlIG5lZ2F0aXZlIGlmIHRoZXJlJ3Mgbm8gbmF0aXZlIGJhc2U2NCBkZWNvZGluZyBzdXBwb3J0LlxyXG4gKiAtIERvZXNuJ3QgY2hlY2sgaWYgdGhlIHRva2VuIGlzIGFjdHVhbGx5IHZhbGlkLlxyXG4gKi9cclxudmFyIGlzQWRtaW4gPSBmdW5jdGlvbiAodG9rZW4pIHtcclxuICAgIHZhciBjbGFpbXMgPSBkZWNvZGUodG9rZW4pLmNsYWltcztcclxuICAgIHJldHVybiB0eXBlb2YgY2xhaW1zID09PSAnb2JqZWN0JyAmJiBjbGFpbXNbJ2FkbWluJ10gPT09IHRydWU7XHJcbn07XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBjb250YWlucyhvYmosIGtleSkge1xyXG4gICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSk7XHJcbn1cclxuZnVuY3Rpb24gc2FmZUdldChvYmosIGtleSkge1xyXG4gICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIHtcclxuICAgICAgICByZXR1cm4gb2JqW2tleV07XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGlzRW1wdHkob2JqKSB7XHJcbiAgICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7XHJcbiAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiB0cnVlO1xyXG59XHJcbmZ1bmN0aW9uIG1hcChvYmosIGZuLCBjb250ZXh0T2JqKSB7XHJcbiAgICB2YXIgcmVzID0ge307XHJcbiAgICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7XHJcbiAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIHtcclxuICAgICAgICAgICAgcmVzW2tleV0gPSBmbi5jYWxsKGNvbnRleHRPYmosIG9ialtrZXldLCBrZXksIG9iaik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlcztcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFJldHVybnMgYSBxdWVyeXN0cmluZy1mb3JtYXR0ZWQgc3RyaW5nIChlLmcuICZhcmc9dmFsJmFyZzI9dmFsMikgZnJvbSBhXHJcbiAqIHBhcmFtcyBvYmplY3QgKGUuZy4ge2FyZzogJ3ZhbCcsIGFyZzI6ICd2YWwyJ30pXHJcbiAqIE5vdGU6IFlvdSBtdXN0IHByZXBlbmQgaXQgd2l0aCA/IHdoZW4gYWRkaW5nIGl0IHRvIGEgVVJMLlxyXG4gKi9cclxuZnVuY3Rpb24gcXVlcnlzdHJpbmcocXVlcnlzdHJpbmdQYXJhbXMpIHtcclxuICAgIHZhciBwYXJhbXMgPSBbXTtcclxuICAgIHZhciBfbG9vcF8xID0gZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcclxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcclxuICAgICAgICAgICAgdmFsdWUuZm9yRWFjaChmdW5jdGlvbiAoYXJyYXlWYWwpIHtcclxuICAgICAgICAgICAgICAgIHBhcmFtcy5wdXNoKGVuY29kZVVSSUNvbXBvbmVudChrZXkpICsgJz0nICsgZW5jb2RlVVJJQ29tcG9uZW50KGFycmF5VmFsKSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcGFyYW1zLnB1c2goZW5jb2RlVVJJQ29tcG9uZW50KGtleSkgKyAnPScgKyBlbmNvZGVVUklDb21wb25lbnQodmFsdWUpKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IE9iamVjdC5lbnRyaWVzKHF1ZXJ5c3RyaW5nUGFyYW1zKTsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICB2YXIgX2IgPSBfYVtfaV0sIGtleSA9IF9iWzBdLCB2YWx1ZSA9IF9iWzFdO1xyXG4gICAgICAgIF9sb29wXzEoa2V5LCB2YWx1ZSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcGFyYW1zLmxlbmd0aCA/ICcmJyArIHBhcmFtcy5qb2luKCcmJykgOiAnJztcclxufVxyXG4vKipcclxuICogRGVjb2RlcyBhIHF1ZXJ5c3RyaW5nIChlLmcuID9hcmc9dmFsJmFyZzI9dmFsMikgaW50byBhIHBhcmFtcyBvYmplY3RcclxuICogKGUuZy4ge2FyZzogJ3ZhbCcsIGFyZzI6ICd2YWwyJ30pXHJcbiAqL1xyXG5mdW5jdGlvbiBxdWVyeXN0cmluZ0RlY29kZShxdWVyeXN0cmluZykge1xyXG4gICAgdmFyIG9iaiA9IHt9O1xyXG4gICAgdmFyIHRva2VucyA9IHF1ZXJ5c3RyaW5nLnJlcGxhY2UoL15cXD8vLCAnJykuc3BsaXQoJyYnKTtcclxuICAgIHRva2Vucy5mb3JFYWNoKGZ1bmN0aW9uICh0b2tlbikge1xyXG4gICAgICAgIGlmICh0b2tlbikge1xyXG4gICAgICAgICAgICB2YXIga2V5ID0gdG9rZW4uc3BsaXQoJz0nKTtcclxuICAgICAgICAgICAgb2JqW2tleVswXV0gPSBrZXlbMV07XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gb2JqO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQGZpbGVvdmVydmlldyBTSEEtMSBjcnlwdG9ncmFwaGljIGhhc2guXHJcbiAqIFZhcmlhYmxlIG5hbWVzIGZvbGxvdyB0aGUgbm90YXRpb24gaW4gRklQUyBQVUIgMTgwLTM6XHJcbiAqIGh0dHA6Ly9jc3JjLm5pc3QuZ292L3B1YmxpY2F0aW9ucy9maXBzL2ZpcHMxODAtMy9maXBzMTgwLTNfZmluYWwucGRmLlxyXG4gKlxyXG4gKiBVc2FnZTpcclxuICogICB2YXIgc2hhMSA9IG5ldyBzaGExKCk7XHJcbiAqICAgc2hhMS51cGRhdGUoYnl0ZXMpO1xyXG4gKiAgIHZhciBoYXNoID0gc2hhMS5kaWdlc3QoKTtcclxuICpcclxuICogUGVyZm9ybWFuY2U6XHJcbiAqICAgQ2hyb21lIDIzOiAgIH40MDAgTWJpdC9zXHJcbiAqICAgRmlyZWZveCAxNjogIH4yNTAgTWJpdC9zXHJcbiAqXHJcbiAqL1xyXG4vKipcclxuICogU0hBLTEgY3J5cHRvZ3JhcGhpYyBoYXNoIGNvbnN0cnVjdG9yLlxyXG4gKlxyXG4gKiBUaGUgcHJvcGVydGllcyBkZWNsYXJlZCBoZXJlIGFyZSBkaXNjdXNzZWQgaW4gdGhlIGFib3ZlIGFsZ29yaXRobSBkb2N1bWVudC5cclxuICogQGNvbnN0cnVjdG9yXHJcbiAqIEBmaW5hbFxyXG4gKiBAc3RydWN0XHJcbiAqL1xyXG52YXIgU2hhMSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFNoYTEoKSB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogSG9sZHMgdGhlIHByZXZpb3VzIHZhbHVlcyBvZiBhY2N1bXVsYXRlZCB2YXJpYWJsZXMgYS1lIGluIHRoZSBjb21wcmVzc19cclxuICAgICAgICAgKiBmdW5jdGlvbi5cclxuICAgICAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuY2hhaW5fID0gW107XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQSBidWZmZXIgaG9sZGluZyB0aGUgcGFydGlhbGx5IGNvbXB1dGVkIGhhc2ggcmVzdWx0LlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5idWZfID0gW107XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQW4gYXJyYXkgb2YgODAgYnl0ZXMsIGVhY2ggYSBwYXJ0IG9mIHRoZSBtZXNzYWdlIHRvIGJlIGhhc2hlZC4gIFJlZmVycmVkIHRvXHJcbiAgICAgICAgICogYXMgdGhlIG1lc3NhZ2Ugc2NoZWR1bGUgaW4gdGhlIGRvY3MuXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLldfID0gW107XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ29udGFpbnMgZGF0YSBuZWVkZWQgdG8gcGFkIG1lc3NhZ2VzIGxlc3MgdGhhbiA2NCBieXRlcy5cclxuICAgICAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMucGFkXyA9IFtdO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBwcml2YXRlIHtudW1iZXJ9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5pbmJ1Zl8gPSAwO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBwcml2YXRlIHtudW1iZXJ9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy50b3RhbF8gPSAwO1xyXG4gICAgICAgIHRoaXMuYmxvY2tTaXplID0gNTEyIC8gODtcclxuICAgICAgICB0aGlzLnBhZF9bMF0gPSAxMjg7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCB0aGlzLmJsb2NrU2l6ZTsgKytpKSB7XHJcbiAgICAgICAgICAgIHRoaXMucGFkX1tpXSA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMucmVzZXQoKTtcclxuICAgIH1cclxuICAgIFNoYTEucHJvdG90eXBlLnJlc2V0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuY2hhaW5fWzBdID0gMHg2NzQ1MjMwMTtcclxuICAgICAgICB0aGlzLmNoYWluX1sxXSA9IDB4ZWZjZGFiODk7XHJcbiAgICAgICAgdGhpcy5jaGFpbl9bMl0gPSAweDk4YmFkY2ZlO1xyXG4gICAgICAgIHRoaXMuY2hhaW5fWzNdID0gMHgxMDMyNTQ3NjtcclxuICAgICAgICB0aGlzLmNoYWluX1s0XSA9IDB4YzNkMmUxZjA7XHJcbiAgICAgICAgdGhpcy5pbmJ1Zl8gPSAwO1xyXG4gICAgICAgIHRoaXMudG90YWxfID0gMDtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEludGVybmFsIGNvbXByZXNzIGhlbHBlciBmdW5jdGlvbi5cclxuICAgICAqIEBwYXJhbSBidWYgQmxvY2sgdG8gY29tcHJlc3MuXHJcbiAgICAgKiBAcGFyYW0gb2Zmc2V0IE9mZnNldCBvZiB0aGUgYmxvY2sgaW4gdGhlIGJ1ZmZlci5cclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIFNoYTEucHJvdG90eXBlLmNvbXByZXNzXyA9IGZ1bmN0aW9uIChidWYsIG9mZnNldCkge1xyXG4gICAgICAgIGlmICghb2Zmc2V0KSB7XHJcbiAgICAgICAgICAgIG9mZnNldCA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBXID0gdGhpcy5XXztcclxuICAgICAgICAvLyBnZXQgMTYgYmlnIGVuZGlhbiB3b3Jkc1xyXG4gICAgICAgIGlmICh0eXBlb2YgYnVmID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDE2OyBpKyspIHtcclxuICAgICAgICAgICAgICAgIC8vIFRPRE8odXNlcik6IFtidWcgODE0MDEyMl0gUmVjZW50IHZlcnNpb25zIG9mIFNhZmFyaSBmb3IgTWFjIE9TIGFuZCBpT1NcclxuICAgICAgICAgICAgICAgIC8vIGhhdmUgYSBidWcgdGhhdCB0dXJucyB0aGUgcG9zdC1pbmNyZW1lbnQgKysgb3BlcmF0b3IgaW50byBwcmUtaW5jcmVtZW50XHJcbiAgICAgICAgICAgICAgICAvLyBkdXJpbmcgSklUIGNvbXBpbGF0aW9uLiAgV2UgaGF2ZSBjb2RlIHRoYXQgZGVwZW5kcyBoZWF2aWx5IG9uIFNIQS0xIGZvclxyXG4gICAgICAgICAgICAgICAgLy8gY29ycmVjdG5lc3MgYW5kIHdoaWNoIGlzIGFmZmVjdGVkIGJ5IHRoaXMgYnVnLCBzbyBJJ3ZlIHJlbW92ZWQgYWxsIHVzZXNcclxuICAgICAgICAgICAgICAgIC8vIG9mIHBvc3QtaW5jcmVtZW50ICsrIGluIHdoaWNoIHRoZSByZXN1bHQgdmFsdWUgaXMgdXNlZC4gIFdlIGNhbiByZXZlcnRcclxuICAgICAgICAgICAgICAgIC8vIHRoaXMgY2hhbmdlIG9uY2UgdGhlIFNhZmFyaSBidWdcclxuICAgICAgICAgICAgICAgIC8vIChodHRwczovL2J1Z3Mud2Via2l0Lm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MTA5MDM2KSBoYXMgYmVlbiBmaXhlZCBhbmRcclxuICAgICAgICAgICAgICAgIC8vIG1vc3QgY2xpZW50cyBoYXZlIGJlZW4gdXBkYXRlZC5cclxuICAgICAgICAgICAgICAgIFdbaV0gPVxyXG4gICAgICAgICAgICAgICAgICAgIChidWYuY2hhckNvZGVBdChvZmZzZXQpIDw8IDI0KSB8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIChidWYuY2hhckNvZGVBdChvZmZzZXQgKyAxKSA8PCAxNikgfFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAoYnVmLmNoYXJDb2RlQXQob2Zmc2V0ICsgMikgPDwgOCkgfFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBidWYuY2hhckNvZGVBdChvZmZzZXQgKyAzKTtcclxuICAgICAgICAgICAgICAgIG9mZnNldCArPSA0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDE2OyBpKyspIHtcclxuICAgICAgICAgICAgICAgIFdbaV0gPVxyXG4gICAgICAgICAgICAgICAgICAgIChidWZbb2Zmc2V0XSA8PCAyNCkgfFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAoYnVmW29mZnNldCArIDFdIDw8IDE2KSB8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIChidWZbb2Zmc2V0ICsgMl0gPDwgOCkgfFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBidWZbb2Zmc2V0ICsgM107XHJcbiAgICAgICAgICAgICAgICBvZmZzZXQgKz0gNDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBleHBhbmQgdG8gODAgd29yZHNcclxuICAgICAgICBmb3IgKHZhciBpID0gMTY7IGkgPCA4MDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciB0ID0gV1tpIC0gM10gXiBXW2kgLSA4XSBeIFdbaSAtIDE0XSBeIFdbaSAtIDE2XTtcclxuICAgICAgICAgICAgV1tpXSA9ICgodCA8PCAxKSB8ICh0ID4+PiAzMSkpICYgMHhmZmZmZmZmZjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGEgPSB0aGlzLmNoYWluX1swXTtcclxuICAgICAgICB2YXIgYiA9IHRoaXMuY2hhaW5fWzFdO1xyXG4gICAgICAgIHZhciBjID0gdGhpcy5jaGFpbl9bMl07XHJcbiAgICAgICAgdmFyIGQgPSB0aGlzLmNoYWluX1szXTtcclxuICAgICAgICB2YXIgZSA9IHRoaXMuY2hhaW5fWzRdO1xyXG4gICAgICAgIHZhciBmLCBrO1xyXG4gICAgICAgIC8vIFRPRE8odXNlcik6IFRyeSB0byB1bnJvbGwgdGhpcyBsb29wIHRvIHNwZWVkIHVwIHRoZSBjb21wdXRhdGlvbi5cclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDgwOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKGkgPCA0MCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGkgPCAyMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGYgPSBkIF4gKGIgJiAoYyBeIGQpKTtcclxuICAgICAgICAgICAgICAgICAgICBrID0gMHg1YTgyNzk5OTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGYgPSBiIF4gYyBeIGQ7XHJcbiAgICAgICAgICAgICAgICAgICAgayA9IDB4NmVkOWViYTE7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaSA8IDYwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZiA9IChiICYgYykgfCAoZCAmIChiIHwgYykpO1xyXG4gICAgICAgICAgICAgICAgICAgIGsgPSAweDhmMWJiY2RjO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZiA9IGIgXiBjIF4gZDtcclxuICAgICAgICAgICAgICAgICAgICBrID0gMHhjYTYyYzFkNjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgdCA9ICgoKGEgPDwgNSkgfCAoYSA+Pj4gMjcpKSArIGYgKyBlICsgayArIFdbaV0pICYgMHhmZmZmZmZmZjtcclxuICAgICAgICAgICAgZSA9IGQ7XHJcbiAgICAgICAgICAgIGQgPSBjO1xyXG4gICAgICAgICAgICBjID0gKChiIDw8IDMwKSB8IChiID4+PiAyKSkgJiAweGZmZmZmZmZmO1xyXG4gICAgICAgICAgICBiID0gYTtcclxuICAgICAgICAgICAgYSA9IHQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuY2hhaW5fWzBdID0gKHRoaXMuY2hhaW5fWzBdICsgYSkgJiAweGZmZmZmZmZmO1xyXG4gICAgICAgIHRoaXMuY2hhaW5fWzFdID0gKHRoaXMuY2hhaW5fWzFdICsgYikgJiAweGZmZmZmZmZmO1xyXG4gICAgICAgIHRoaXMuY2hhaW5fWzJdID0gKHRoaXMuY2hhaW5fWzJdICsgYykgJiAweGZmZmZmZmZmO1xyXG4gICAgICAgIHRoaXMuY2hhaW5fWzNdID0gKHRoaXMuY2hhaW5fWzNdICsgZCkgJiAweGZmZmZmZmZmO1xyXG4gICAgICAgIHRoaXMuY2hhaW5fWzRdID0gKHRoaXMuY2hhaW5fWzRdICsgZSkgJiAweGZmZmZmZmZmO1xyXG4gICAgfTtcclxuICAgIFNoYTEucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uIChieXRlcywgbGVuZ3RoKSB7XHJcbiAgICAgICAgLy8gVE9ETyhqb2hubGVueik6IHRpZ2h0ZW4gdGhlIGZ1bmN0aW9uIHNpZ25hdHVyZSBhbmQgcmVtb3ZlIHRoaXMgY2hlY2tcclxuICAgICAgICBpZiAoYnl0ZXMgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChsZW5ndGggPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBsZW5ndGggPSBieXRlcy5sZW5ndGg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBsZW5ndGhNaW51c0Jsb2NrID0gbGVuZ3RoIC0gdGhpcy5ibG9ja1NpemU7XHJcbiAgICAgICAgdmFyIG4gPSAwO1xyXG4gICAgICAgIC8vIFVzaW5nIGxvY2FsIGluc3RlYWQgb2YgbWVtYmVyIHZhcmlhYmxlcyBnaXZlcyB+NSUgc3BlZWR1cCBvbiBGaXJlZm94IDE2LlxyXG4gICAgICAgIHZhciBidWYgPSB0aGlzLmJ1Zl87XHJcbiAgICAgICAgdmFyIGluYnVmID0gdGhpcy5pbmJ1Zl87XHJcbiAgICAgICAgLy8gVGhlIG91dGVyIHdoaWxlIGxvb3Agc2hvdWxkIGV4ZWN1dGUgYXQgbW9zdCB0d2ljZS5cclxuICAgICAgICB3aGlsZSAobiA8IGxlbmd0aCkge1xyXG4gICAgICAgICAgICAvLyBXaGVuIHdlIGhhdmUgbm8gZGF0YSBpbiB0aGUgYmxvY2sgdG8gdG9wIHVwLCB3ZSBjYW4gZGlyZWN0bHkgcHJvY2VzcyB0aGVcclxuICAgICAgICAgICAgLy8gaW5wdXQgYnVmZmVyIChhc3N1bWluZyBpdCBjb250YWlucyBzdWZmaWNpZW50IGRhdGEpLiBUaGlzIGdpdmVzIH4yNSVcclxuICAgICAgICAgICAgLy8gc3BlZWR1cCBvbiBDaHJvbWUgMjMgYW5kIH4xNSUgc3BlZWR1cCBvbiBGaXJlZm94IDE2LCBidXQgcmVxdWlyZXMgdGhhdFxyXG4gICAgICAgICAgICAvLyB0aGUgZGF0YSBpcyBwcm92aWRlZCBpbiBsYXJnZSBjaHVua3MgKG9yIGluIG11bHRpcGxlcyBvZiA2NCBieXRlcykuXHJcbiAgICAgICAgICAgIGlmIChpbmJ1ZiA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgd2hpbGUgKG4gPD0gbGVuZ3RoTWludXNCbG9jaykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29tcHJlc3NfKGJ5dGVzLCBuKTtcclxuICAgICAgICAgICAgICAgICAgICBuICs9IHRoaXMuYmxvY2tTaXplO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgYnl0ZXMgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAobiA8IGxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGJ1ZltpbmJ1Zl0gPSBieXRlcy5jaGFyQ29kZUF0KG4pO1xyXG4gICAgICAgICAgICAgICAgICAgICsraW5idWY7XHJcbiAgICAgICAgICAgICAgICAgICAgKytuO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbmJ1ZiA9PT0gdGhpcy5ibG9ja1NpemUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21wcmVzc18oYnVmKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5idWYgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBKdW1wIHRvIHRoZSBvdXRlciBsb29wIHNvIHdlIHVzZSB0aGUgZnVsbC1ibG9jayBvcHRpbWl6YXRpb24uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHdoaWxlIChuIDwgbGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnVmW2luYnVmXSA9IGJ5dGVzW25dO1xyXG4gICAgICAgICAgICAgICAgICAgICsraW5idWY7XHJcbiAgICAgICAgICAgICAgICAgICAgKytuO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbmJ1ZiA9PT0gdGhpcy5ibG9ja1NpemUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21wcmVzc18oYnVmKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5idWYgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBKdW1wIHRvIHRoZSBvdXRlciBsb29wIHNvIHdlIHVzZSB0aGUgZnVsbC1ibG9jayBvcHRpbWl6YXRpb24uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmluYnVmXyA9IGluYnVmO1xyXG4gICAgICAgIHRoaXMudG90YWxfICs9IGxlbmd0aDtcclxuICAgIH07XHJcbiAgICAvKiogQG92ZXJyaWRlICovXHJcbiAgICBTaGExLnByb3RvdHlwZS5kaWdlc3QgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGRpZ2VzdCA9IFtdO1xyXG4gICAgICAgIHZhciB0b3RhbEJpdHMgPSB0aGlzLnRvdGFsXyAqIDg7XHJcbiAgICAgICAgLy8gQWRkIHBhZCAweDgwIDB4MDAqLlxyXG4gICAgICAgIGlmICh0aGlzLmluYnVmXyA8IDU2KSB7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlKHRoaXMucGFkXywgNTYgLSB0aGlzLmluYnVmXyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZSh0aGlzLnBhZF8sIHRoaXMuYmxvY2tTaXplIC0gKHRoaXMuaW5idWZfIC0gNTYpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gQWRkICMgYml0cy5cclxuICAgICAgICBmb3IgKHZhciBpID0gdGhpcy5ibG9ja1NpemUgLSAxOyBpID49IDU2OyBpLS0pIHtcclxuICAgICAgICAgICAgdGhpcy5idWZfW2ldID0gdG90YWxCaXRzICYgMjU1O1xyXG4gICAgICAgICAgICB0b3RhbEJpdHMgLz0gMjU2OyAvLyBEb24ndCB1c2UgYml0LXNoaWZ0aW5nIGhlcmUhXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuY29tcHJlc3NfKHRoaXMuYnVmXyk7XHJcbiAgICAgICAgdmFyIG4gPSAwO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgNTsgaSsrKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGogPSAyNDsgaiA+PSAwOyBqIC09IDgpIHtcclxuICAgICAgICAgICAgICAgIGRpZ2VzdFtuXSA9ICh0aGlzLmNoYWluX1tpXSA+PiBqKSAmIDI1NTtcclxuICAgICAgICAgICAgICAgICsrbjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZGlnZXN0O1xyXG4gICAgfTtcclxuICAgIHJldHVybiBTaGExO1xyXG59KCkpO1xuXG4vKipcclxuICogSGVscGVyIHRvIG1ha2UgYSBTdWJzY3JpYmUgZnVuY3Rpb24gKGp1c3QgbGlrZSBQcm9taXNlIGhlbHBzIG1ha2UgYVxyXG4gKiBUaGVuYWJsZSkuXHJcbiAqXHJcbiAqIEBwYXJhbSBleGVjdXRvciBGdW5jdGlvbiB3aGljaCBjYW4gbWFrZSBjYWxscyB0byBhIHNpbmdsZSBPYnNlcnZlclxyXG4gKiAgICAgYXMgYSBwcm94eS5cclxuICogQHBhcmFtIG9uTm9PYnNlcnZlcnMgQ2FsbGJhY2sgd2hlbiBjb3VudCBvZiBPYnNlcnZlcnMgZ29lcyB0byB6ZXJvLlxyXG4gKi9cclxuZnVuY3Rpb24gY3JlYXRlU3Vic2NyaWJlKGV4ZWN1dG9yLCBvbk5vT2JzZXJ2ZXJzKSB7XHJcbiAgICB2YXIgcHJveHkgPSBuZXcgT2JzZXJ2ZXJQcm94eShleGVjdXRvciwgb25Ob09ic2VydmVycyk7XHJcbiAgICByZXR1cm4gcHJveHkuc3Vic2NyaWJlLmJpbmQocHJveHkpO1xyXG59XHJcbi8qKlxyXG4gKiBJbXBsZW1lbnQgZmFuLW91dCBmb3IgYW55IG51bWJlciBvZiBPYnNlcnZlcnMgYXR0YWNoZWQgdmlhIGEgc3Vic2NyaWJlXHJcbiAqIGZ1bmN0aW9uLlxyXG4gKi9cclxudmFyIE9ic2VydmVyUHJveHkgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSBleGVjdXRvciBGdW5jdGlvbiB3aGljaCBjYW4gbWFrZSBjYWxscyB0byBhIHNpbmdsZSBPYnNlcnZlclxyXG4gICAgICogICAgIGFzIGEgcHJveHkuXHJcbiAgICAgKiBAcGFyYW0gb25Ob09ic2VydmVycyBDYWxsYmFjayB3aGVuIGNvdW50IG9mIE9ic2VydmVycyBnb2VzIHRvIHplcm8uXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIE9ic2VydmVyUHJveHkoZXhlY3V0b3IsIG9uTm9PYnNlcnZlcnMpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMub2JzZXJ2ZXJzID0gW107XHJcbiAgICAgICAgdGhpcy51bnN1YnNjcmliZXMgPSBbXTtcclxuICAgICAgICB0aGlzLm9ic2VydmVyQ291bnQgPSAwO1xyXG4gICAgICAgIC8vIE1pY3JvLXRhc2sgc2NoZWR1bGluZyBieSBjYWxsaW5nIHRhc2sudGhlbigpLlxyXG4gICAgICAgIHRoaXMudGFzayA9IFByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgICAgIHRoaXMuZmluYWxpemVkID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5vbk5vT2JzZXJ2ZXJzID0gb25Ob09ic2VydmVycztcclxuICAgICAgICAvLyBDYWxsIHRoZSBleGVjdXRvciBhc3luY2hyb25vdXNseSBzbyBzdWJzY3JpYmVycyB0aGF0IGFyZSBjYWxsZWRcclxuICAgICAgICAvLyBzeW5jaHJvbm91c2x5IGFmdGVyIHRoZSBjcmVhdGlvbiBvZiB0aGUgc3Vic2NyaWJlIGZ1bmN0aW9uXHJcbiAgICAgICAgLy8gY2FuIHN0aWxsIHJlY2VpdmUgdGhlIHZlcnkgZmlyc3QgdmFsdWUgZ2VuZXJhdGVkIGluIHRoZSBleGVjdXRvci5cclxuICAgICAgICB0aGlzLnRhc2tcclxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBleGVjdXRvcihfdGhpcyk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIF90aGlzLmVycm9yKGUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgT2JzZXJ2ZXJQcm94eS5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMuZm9yRWFjaE9ic2VydmVyKGZ1bmN0aW9uIChvYnNlcnZlcikge1xyXG4gICAgICAgICAgICBvYnNlcnZlci5uZXh0KHZhbHVlKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBPYnNlcnZlclByb3h5LnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgIHRoaXMuZm9yRWFjaE9ic2VydmVyKGZ1bmN0aW9uIChvYnNlcnZlcikge1xyXG4gICAgICAgICAgICBvYnNlcnZlci5lcnJvcihlcnJvcik7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5jbG9zZShlcnJvcik7XHJcbiAgICB9O1xyXG4gICAgT2JzZXJ2ZXJQcm94eS5wcm90b3R5cGUuY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5mb3JFYWNoT2JzZXJ2ZXIoZnVuY3Rpb24gKG9ic2VydmVyKSB7XHJcbiAgICAgICAgICAgIG9ic2VydmVyLmNvbXBsZXRlKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogU3Vic2NyaWJlIGZ1bmN0aW9uIHRoYXQgY2FuIGJlIHVzZWQgdG8gYWRkIGFuIE9ic2VydmVyIHRvIHRoZSBmYW4tb3V0IGxpc3QuXHJcbiAgICAgKlxyXG4gICAgICogLSBXZSByZXF1aXJlIHRoYXQgbm8gZXZlbnQgaXMgc2VudCB0byBhIHN1YnNjcmliZXIgc3ljaHJvbm91c2x5IHRvIHRoZWlyXHJcbiAgICAgKiAgIGNhbGwgdG8gc3Vic2NyaWJlKCkuXHJcbiAgICAgKi9cclxuICAgIE9ic2VydmVyUHJveHkucHJvdG90eXBlLnN1YnNjcmliZSA9IGZ1bmN0aW9uIChuZXh0T3JPYnNlcnZlciwgZXJyb3IsIGNvbXBsZXRlKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgb2JzZXJ2ZXI7XHJcbiAgICAgICAgaWYgKG5leHRPck9ic2VydmVyID09PSB1bmRlZmluZWQgJiZcclxuICAgICAgICAgICAgZXJyb3IgPT09IHVuZGVmaW5lZCAmJlxyXG4gICAgICAgICAgICBjb21wbGV0ZSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBPYnNlcnZlci4nKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gQXNzZW1ibGUgYW4gT2JzZXJ2ZXIgb2JqZWN0IHdoZW4gcGFzc2VkIGFzIGNhbGxiYWNrIGZ1bmN0aW9ucy5cclxuICAgICAgICBpZiAoaW1wbGVtZW50c0FueU1ldGhvZHMobmV4dE9yT2JzZXJ2ZXIsIFtcclxuICAgICAgICAgICAgJ25leHQnLFxyXG4gICAgICAgICAgICAnZXJyb3InLFxyXG4gICAgICAgICAgICAnY29tcGxldGUnXHJcbiAgICAgICAgXSkpIHtcclxuICAgICAgICAgICAgb2JzZXJ2ZXIgPSBuZXh0T3JPYnNlcnZlcjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIG9ic2VydmVyID0ge1xyXG4gICAgICAgICAgICAgICAgbmV4dDogbmV4dE9yT2JzZXJ2ZXIsXHJcbiAgICAgICAgICAgICAgICBlcnJvcjogZXJyb3IsXHJcbiAgICAgICAgICAgICAgICBjb21wbGV0ZTogY29tcGxldGVcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG9ic2VydmVyLm5leHQgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBvYnNlcnZlci5uZXh0ID0gbm9vcDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG9ic2VydmVyLmVycm9yID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgb2JzZXJ2ZXIuZXJyb3IgPSBub29wO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAob2JzZXJ2ZXIuY29tcGxldGUgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBvYnNlcnZlci5jb21wbGV0ZSA9IG5vb3A7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciB1bnN1YiA9IHRoaXMudW5zdWJzY3JpYmVPbmUuYmluZCh0aGlzLCB0aGlzLm9ic2VydmVycy5sZW5ndGgpO1xyXG4gICAgICAgIC8vIEF0dGVtcHQgdG8gc3Vic2NyaWJlIHRvIGEgdGVybWluYXRlZCBPYnNlcnZhYmxlIC0gd2VcclxuICAgICAgICAvLyBqdXN0IHJlc3BvbmQgdG8gdGhlIE9ic2VydmVyIHdpdGggdGhlIGZpbmFsIGVycm9yIG9yIGNvbXBsZXRlXHJcbiAgICAgICAgLy8gZXZlbnQuXHJcbiAgICAgICAgaWYgKHRoaXMuZmluYWxpemVkKSB7XHJcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZmxvYXRpbmctcHJvbWlzZXNcclxuICAgICAgICAgICAgdGhpcy50YXNrLnRoZW4oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMuZmluYWxFcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvYnNlcnZlci5lcnJvcihfdGhpcy5maW5hbEVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9ic2VydmVyLmNvbXBsZXRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBub3RoaW5nXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLm9ic2VydmVycy5wdXNoKG9ic2VydmVyKTtcclxuICAgICAgICByZXR1cm4gdW5zdWI7XHJcbiAgICB9O1xyXG4gICAgLy8gVW5zdWJzY3JpYmUgaXMgc3luY2hyb25vdXMgLSB3ZSBndWFyYW50ZWUgdGhhdCBubyBldmVudHMgYXJlIHNlbnQgdG9cclxuICAgIC8vIGFueSB1bnN1YnNjcmliZWQgT2JzZXJ2ZXIuXHJcbiAgICBPYnNlcnZlclByb3h5LnByb3RvdHlwZS51bnN1YnNjcmliZU9uZSA9IGZ1bmN0aW9uIChpKSB7XHJcbiAgICAgICAgaWYgKHRoaXMub2JzZXJ2ZXJzID09PSB1bmRlZmluZWQgfHwgdGhpcy5vYnNlcnZlcnNbaV0gPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGRlbGV0ZSB0aGlzLm9ic2VydmVyc1tpXTtcclxuICAgICAgICB0aGlzLm9ic2VydmVyQ291bnQgLT0gMTtcclxuICAgICAgICBpZiAodGhpcy5vYnNlcnZlckNvdW50ID09PSAwICYmIHRoaXMub25Ob09ic2VydmVycyAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMub25Ob09ic2VydmVycyh0aGlzKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgT2JzZXJ2ZXJQcm94eS5wcm90b3R5cGUuZm9yRWFjaE9ic2VydmVyID0gZnVuY3Rpb24gKGZuKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZmluYWxpemVkKSB7XHJcbiAgICAgICAgICAgIC8vIEFscmVhZHkgY2xvc2VkIGJ5IHByZXZpb3VzIGV2ZW50Li4uLmp1c3QgZWF0IHRoZSBhZGRpdGlvbmFsIHZhbHVlcy5cclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBTaW5jZSBzZW5kT25lIGNhbGxzIGFzeW5jaHJvbm91c2x5IC0gdGhlcmUgaXMgbm8gY2hhbmNlIHRoYXRcclxuICAgICAgICAvLyB0aGlzLm9ic2VydmVycyB3aWxsIGJlY29tZSB1bmRlZmluZWQuXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLm9ic2VydmVycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB0aGlzLnNlbmRPbmUoaSwgZm4pO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvLyBDYWxsIHRoZSBPYnNlcnZlciB2aWEgb25lIG9mIGl0J3MgY2FsbGJhY2sgZnVuY3Rpb24uIFdlIGFyZSBjYXJlZnVsIHRvXHJcbiAgICAvLyBjb25maXJtIHRoYXQgdGhlIG9ic2VydmUgaGFzIG5vdCBiZWVuIHVuc3Vic2NyaWJlZCBzaW5jZSB0aGlzIGFzeW5jaHJvbm91c1xyXG4gICAgLy8gZnVuY3Rpb24gaGFkIGJlZW4gcXVldWVkLlxyXG4gICAgT2JzZXJ2ZXJQcm94eS5wcm90b3R5cGUuc2VuZE9uZSA9IGZ1bmN0aW9uIChpLCBmbikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgLy8gRXhlY3V0ZSB0aGUgY2FsbGJhY2sgYXN5bmNocm9ub3VzbHlcclxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWZsb2F0aW5nLXByb21pc2VzXHJcbiAgICAgICAgdGhpcy50YXNrLnRoZW4oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAoX3RoaXMub2JzZXJ2ZXJzICE9PSB1bmRlZmluZWQgJiYgX3RoaXMub2JzZXJ2ZXJzW2ldICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm4oX3RoaXMub2JzZXJ2ZXJzW2ldKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gSWdub3JlIGV4Y2VwdGlvbnMgcmFpc2VkIGluIE9ic2VydmVycyBvciBtaXNzaW5nIG1ldGhvZHMgb2YgYW5cclxuICAgICAgICAgICAgICAgICAgICAvLyBPYnNlcnZlci5cclxuICAgICAgICAgICAgICAgICAgICAvLyBMb2cgZXJyb3IgdG8gY29uc29sZS4gYi8zMTQwNDgwNlxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgY29uc29sZSAhPT0gJ3VuZGVmaW5lZCcgJiYgY29uc29sZS5lcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIE9ic2VydmVyUHJveHkucHJvdG90eXBlLmNsb3NlID0gZnVuY3Rpb24gKGVycikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgaWYgKHRoaXMuZmluYWxpemVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5maW5hbGl6ZWQgPSB0cnVlO1xyXG4gICAgICAgIGlmIChlcnIgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aGlzLmZpbmFsRXJyb3IgPSBlcnI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFByb3h5IGlzIG5vIGxvbmdlciBuZWVkZWQgLSBnYXJiYWdlIGNvbGxlY3QgcmVmZXJlbmNlc1xyXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZmxvYXRpbmctcHJvbWlzZXNcclxuICAgICAgICB0aGlzLnRhc2sudGhlbihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIF90aGlzLm9ic2VydmVycyA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgX3RoaXMub25Ob09ic2VydmVycyA9IHVuZGVmaW5lZDtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gT2JzZXJ2ZXJQcm94eTtcclxufSgpKTtcclxuLyoqIFR1cm4gc3luY2hyb25vdXMgZnVuY3Rpb24gaW50byBvbmUgY2FsbGVkIGFzeW5jaHJvbm91c2x5LiAqL1xyXG5mdW5jdGlvbiBhc3luYyhmbiwgb25FcnJvcikge1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgYXJncyA9IFtdO1xyXG4gICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzW19pXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgUHJvbWlzZS5yZXNvbHZlKHRydWUpXHJcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgZm4uYXBwbHkodm9pZCAwLCBhcmdzKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGlmIChvbkVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICBvbkVycm9yKGVycm9yKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxufVxyXG4vKipcclxuICogUmV0dXJuIHRydWUgaWYgdGhlIG9iamVjdCBwYXNzZWQgaW4gaW1wbGVtZW50cyBhbnkgb2YgdGhlIG5hbWVkIG1ldGhvZHMuXHJcbiAqL1xyXG5mdW5jdGlvbiBpbXBsZW1lbnRzQW55TWV0aG9kcyhvYmosIG1ldGhvZHMpIHtcclxuICAgIGlmICh0eXBlb2Ygb2JqICE9PSAnb2JqZWN0JyB8fCBvYmogPT09IG51bGwpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBmb3IgKHZhciBfaSA9IDAsIG1ldGhvZHNfMSA9IG1ldGhvZHM7IF9pIDwgbWV0aG9kc18xLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgIHZhciBtZXRob2QgPSBtZXRob2RzXzFbX2ldO1xyXG4gICAgICAgIGlmIChtZXRob2QgaW4gb2JqICYmIHR5cGVvZiBvYmpbbWV0aG9kXSA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbn1cclxuZnVuY3Rpb24gbm9vcCgpIHtcclxuICAgIC8vIGRvIG5vdGhpbmdcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIENoZWNrIHRvIG1ha2Ugc3VyZSB0aGUgYXBwcm9wcmlhdGUgbnVtYmVyIG9mIGFyZ3VtZW50cyBhcmUgcHJvdmlkZWQgZm9yIGEgcHVibGljIGZ1bmN0aW9uLlxyXG4gKiBUaHJvd3MgYW4gZXJyb3IgaWYgaXQgZmFpbHMuXHJcbiAqXHJcbiAqIEBwYXJhbSBmbk5hbWUgVGhlIGZ1bmN0aW9uIG5hbWVcclxuICogQHBhcmFtIG1pbkNvdW50IFRoZSBtaW5pbXVtIG51bWJlciBvZiBhcmd1bWVudHMgdG8gYWxsb3cgZm9yIHRoZSBmdW5jdGlvbiBjYWxsXHJcbiAqIEBwYXJhbSBtYXhDb3VudCBUaGUgbWF4aW11bSBudW1iZXIgb2YgYXJndW1lbnQgdG8gYWxsb3cgZm9yIHRoZSBmdW5jdGlvbiBjYWxsXHJcbiAqIEBwYXJhbSBhcmdDb3VudCBUaGUgYWN0dWFsIG51bWJlciBvZiBhcmd1bWVudHMgcHJvdmlkZWQuXHJcbiAqL1xyXG52YXIgdmFsaWRhdGVBcmdDb3VudCA9IGZ1bmN0aW9uIChmbk5hbWUsIG1pbkNvdW50LCBtYXhDb3VudCwgYXJnQ291bnQpIHtcclxuICAgIHZhciBhcmdFcnJvcjtcclxuICAgIGlmIChhcmdDb3VudCA8IG1pbkNvdW50KSB7XHJcbiAgICAgICAgYXJnRXJyb3IgPSAnYXQgbGVhc3QgJyArIG1pbkNvdW50O1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoYXJnQ291bnQgPiBtYXhDb3VudCkge1xyXG4gICAgICAgIGFyZ0Vycm9yID0gbWF4Q291bnQgPT09IDAgPyAnbm9uZScgOiAnbm8gbW9yZSB0aGFuICcgKyBtYXhDb3VudDtcclxuICAgIH1cclxuICAgIGlmIChhcmdFcnJvcikge1xyXG4gICAgICAgIHZhciBlcnJvciA9IGZuTmFtZSArXHJcbiAgICAgICAgICAgICcgZmFpbGVkOiBXYXMgY2FsbGVkIHdpdGggJyArXHJcbiAgICAgICAgICAgIGFyZ0NvdW50ICtcclxuICAgICAgICAgICAgKGFyZ0NvdW50ID09PSAxID8gJyBhcmd1bWVudC4nIDogJyBhcmd1bWVudHMuJykgK1xyXG4gICAgICAgICAgICAnIEV4cGVjdHMgJyArXHJcbiAgICAgICAgICAgIGFyZ0Vycm9yICtcclxuICAgICAgICAgICAgJy4nO1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvcik7XHJcbiAgICB9XHJcbn07XHJcbi8qKlxyXG4gKiBHZW5lcmF0ZXMgYSBzdHJpbmcgdG8gcHJlZml4IGFuIGVycm9yIG1lc3NhZ2UgYWJvdXQgZmFpbGVkIGFyZ3VtZW50IHZhbGlkYXRpb25cclxuICpcclxuICogQHBhcmFtIGZuTmFtZSBUaGUgZnVuY3Rpb24gbmFtZVxyXG4gKiBAcGFyYW0gYXJndW1lbnROdW1iZXIgVGhlIGluZGV4IG9mIHRoZSBhcmd1bWVudFxyXG4gKiBAcGFyYW0gb3B0aW9uYWwgV2hldGhlciBvciBub3QgdGhlIGFyZ3VtZW50IGlzIG9wdGlvbmFsXHJcbiAqIEByZXR1cm4gVGhlIHByZWZpeCB0byBhZGQgdG8gdGhlIGVycm9yIHRocm93biBmb3IgdmFsaWRhdGlvbi5cclxuICovXHJcbmZ1bmN0aW9uIGVycm9yUHJlZml4KGZuTmFtZSwgYXJndW1lbnROdW1iZXIsIG9wdGlvbmFsKSB7XHJcbiAgICB2YXIgYXJnTmFtZSA9ICcnO1xyXG4gICAgc3dpdGNoIChhcmd1bWVudE51bWJlcikge1xyXG4gICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgYXJnTmFtZSA9IG9wdGlvbmFsID8gJ2ZpcnN0JyA6ICdGaXJzdCc7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgYXJnTmFtZSA9IG9wdGlvbmFsID8gJ3NlY29uZCcgOiAnU2Vjb25kJztcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICBhcmdOYW1lID0gb3B0aW9uYWwgPyAndGhpcmQnIDogJ1RoaXJkJztcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSA0OlxyXG4gICAgICAgICAgICBhcmdOYW1lID0gb3B0aW9uYWwgPyAnZm91cnRoJyA6ICdGb3VydGgnO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2Vycm9yUHJlZml4IGNhbGxlZCB3aXRoIGFyZ3VtZW50TnVtYmVyID4gNC4gIE5lZWQgdG8gdXBkYXRlIGl0PycpO1xyXG4gICAgfVxyXG4gICAgdmFyIGVycm9yID0gZm5OYW1lICsgJyBmYWlsZWQ6ICc7XHJcbiAgICBlcnJvciArPSBhcmdOYW1lICsgJyBhcmd1bWVudCAnO1xyXG4gICAgcmV0dXJuIGVycm9yO1xyXG59XHJcbi8qKlxyXG4gKiBAcGFyYW0gZm5OYW1lXHJcbiAqIEBwYXJhbSBhcmd1bWVudE51bWJlclxyXG4gKiBAcGFyYW0gbmFtZXNwYWNlXHJcbiAqIEBwYXJhbSBvcHRpb25hbFxyXG4gKi9cclxuZnVuY3Rpb24gdmFsaWRhdGVOYW1lc3BhY2UoZm5OYW1lLCBhcmd1bWVudE51bWJlciwgbmFtZXNwYWNlLCBvcHRpb25hbCkge1xyXG4gICAgaWYgKG9wdGlvbmFsICYmICFuYW1lc3BhY2UpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBpZiAodHlwZW9mIG5hbWVzcGFjZSAhPT0gJ3N0cmluZycpIHtcclxuICAgICAgICAvL1RPRE86IEkgc2hvdWxkIGRvIG1vcmUgdmFsaWRhdGlvbiBoZXJlLiBXZSBvbmx5IGFsbG93IGNlcnRhaW4gY2hhcnMgaW4gbmFtZXNwYWNlcy5cclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3JQcmVmaXgoZm5OYW1lLCBhcmd1bWVudE51bWJlciwgb3B0aW9uYWwpICtcclxuICAgICAgICAgICAgJ211c3QgYmUgYSB2YWxpZCBmaXJlYmFzZSBuYW1lc3BhY2UuJyk7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gdmFsaWRhdGVDYWxsYmFjayhmbk5hbWUsIGFyZ3VtZW50TnVtYmVyLCBjYWxsYmFjaywgb3B0aW9uYWwpIHtcclxuICAgIGlmIChvcHRpb25hbCAmJiAhY2FsbGJhY2spIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBpZiAodHlwZW9mIGNhbGxiYWNrICE9PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yUHJlZml4KGZuTmFtZSwgYXJndW1lbnROdW1iZXIsIG9wdGlvbmFsKSArXHJcbiAgICAgICAgICAgICdtdXN0IGJlIGEgdmFsaWQgZnVuY3Rpb24uJyk7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gdmFsaWRhdGVDb250ZXh0T2JqZWN0KGZuTmFtZSwgYXJndW1lbnROdW1iZXIsIGNvbnRleHQsIG9wdGlvbmFsKSB7XHJcbiAgICBpZiAob3B0aW9uYWwgJiYgIWNvbnRleHQpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBpZiAodHlwZW9mIGNvbnRleHQgIT09ICdvYmplY3QnIHx8IGNvbnRleHQgPT09IG51bGwpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3JQcmVmaXgoZm5OYW1lLCBhcmd1bWVudE51bWJlciwgb3B0aW9uYWwpICtcclxuICAgICAgICAgICAgJ211c3QgYmUgYSB2YWxpZCBjb250ZXh0IG9iamVjdC4nKTtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLy8gQ29kZSBvcmlnaW5hbGx5IGNhbWUgZnJvbSBnb29nLmNyeXB0LnN0cmluZ1RvVXRmOEJ5dGVBcnJheSwgYnV0IGZvciBzb21lIHJlYXNvbiB0aGV5XHJcbi8vIGF1dG9tYXRpY2FsbHkgcmVwbGFjZWQgJ1xcclxcbicgd2l0aCAnXFxuJywgYW5kIHRoZXkgZGlkbid0IGhhbmRsZSBzdXJyb2dhdGUgcGFpcnMsXHJcbi8vIHNvIGl0J3MgYmVlbiBtb2RpZmllZC5cclxuLy8gTm90ZSB0aGF0IG5vdCBhbGwgVW5pY29kZSBjaGFyYWN0ZXJzIGFwcGVhciBhcyBzaW5nbGUgY2hhcmFjdGVycyBpbiBKYXZhU2NyaXB0IHN0cmluZ3MuXHJcbi8vIGZyb21DaGFyQ29kZSByZXR1cm5zIHRoZSBVVEYtMTYgZW5jb2Rpbmcgb2YgYSBjaGFyYWN0ZXIgLSBzbyBzb21lIFVuaWNvZGUgY2hhcmFjdGVyc1xyXG4vLyB1c2UgMiBjaGFyYWN0ZXJzIGluIEphdmFzY3JpcHQuICBBbGwgNC1ieXRlIFVURi04IGNoYXJhY3RlcnMgYmVnaW4gd2l0aCBhIGZpcnN0XHJcbi8vIGNoYXJhY3RlciBpbiB0aGUgcmFuZ2UgMHhEODAwIC0gMHhEQkZGICh0aGUgZmlyc3QgY2hhcmFjdGVyIG9mIGEgc28tY2FsbGVkIHN1cnJvZ2F0ZVxyXG4vLyBwYWlyKS5cclxuLy8gU2VlIGh0dHA6Ly93d3cuZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi81LjEvI3NlYy0xNS4xLjNcclxuLyoqXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHJcclxuICogQHJldHVybiB7QXJyYXl9XHJcbiAqL1xyXG52YXIgc3RyaW5nVG9CeXRlQXJyYXkkMSA9IGZ1bmN0aW9uIChzdHIpIHtcclxuICAgIHZhciBvdXQgPSBbXTtcclxuICAgIHZhciBwID0gMDtcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgdmFyIGMgPSBzdHIuY2hhckNvZGVBdChpKTtcclxuICAgICAgICAvLyBJcyB0aGlzIHRoZSBsZWFkIHN1cnJvZ2F0ZSBpbiBhIHN1cnJvZ2F0ZSBwYWlyP1xyXG4gICAgICAgIGlmIChjID49IDB4ZDgwMCAmJiBjIDw9IDB4ZGJmZikge1xyXG4gICAgICAgICAgICB2YXIgaGlnaCA9IGMgLSAweGQ4MDA7IC8vIHRoZSBoaWdoIDEwIGJpdHMuXHJcbiAgICAgICAgICAgIGkrKztcclxuICAgICAgICAgICAgYXNzZXJ0KGkgPCBzdHIubGVuZ3RoLCAnU3Vycm9nYXRlIHBhaXIgbWlzc2luZyB0cmFpbCBzdXJyb2dhdGUuJyk7XHJcbiAgICAgICAgICAgIHZhciBsb3cgPSBzdHIuY2hhckNvZGVBdChpKSAtIDB4ZGMwMDsgLy8gdGhlIGxvdyAxMCBiaXRzLlxyXG4gICAgICAgICAgICBjID0gMHgxMDAwMCArIChoaWdoIDw8IDEwKSArIGxvdztcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGMgPCAxMjgpIHtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSBjO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChjIDwgMjA0OCkge1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjID4+IDYpIHwgMTkyO1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjICYgNjMpIHwgMTI4O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChjIDwgNjU1MzYpIHtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyA+PiAxMikgfCAyMjQ7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKChjID4+IDYpICYgNjMpIHwgMTI4O1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjICYgNjMpIHwgMTI4O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyA+PiAxOCkgfCAyNDA7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKChjID4+IDEyKSAmIDYzKSB8IDEyODtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoKGMgPj4gNikgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG91dDtcclxufTtcclxuLyoqXHJcbiAqIENhbGN1bGF0ZSBsZW5ndGggd2l0aG91dCBhY3R1YWxseSBjb252ZXJ0aW5nOyB1c2VmdWwgZm9yIGRvaW5nIGNoZWFwZXIgdmFsaWRhdGlvbi5cclxuICogQHBhcmFtIHtzdHJpbmd9IHN0clxyXG4gKiBAcmV0dXJuIHtudW1iZXJ9XHJcbiAqL1xyXG52YXIgc3RyaW5nTGVuZ3RoID0gZnVuY3Rpb24gKHN0cikge1xyXG4gICAgdmFyIHAgPSAwO1xyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICB2YXIgYyA9IHN0ci5jaGFyQ29kZUF0KGkpO1xyXG4gICAgICAgIGlmIChjIDwgMTI4KSB7XHJcbiAgICAgICAgICAgIHArKztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoYyA8IDIwNDgpIHtcclxuICAgICAgICAgICAgcCArPSAyO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChjID49IDB4ZDgwMCAmJiBjIDw9IDB4ZGJmZikge1xyXG4gICAgICAgICAgICAvLyBMZWFkIHN1cnJvZ2F0ZSBvZiBhIHN1cnJvZ2F0ZSBwYWlyLiAgVGhlIHBhaXIgdG9nZXRoZXIgd2lsbCB0YWtlIDQgYnl0ZXMgdG8gcmVwcmVzZW50LlxyXG4gICAgICAgICAgICBwICs9IDQ7XHJcbiAgICAgICAgICAgIGkrKzsgLy8gc2tpcCB0cmFpbCBzdXJyb2dhdGUuXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBwICs9IDM7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHA7XHJcbn07XG5cbmV4cG9ydHMuQ09OU1RBTlRTID0gQ09OU1RBTlRTO1xuZXhwb3J0cy5EZWZlcnJlZCA9IERlZmVycmVkO1xuZXhwb3J0cy5FcnJvckZhY3RvcnkgPSBFcnJvckZhY3Rvcnk7XG5leHBvcnRzLkZpcmViYXNlRXJyb3IgPSBGaXJlYmFzZUVycm9yO1xuZXhwb3J0cy5TaGExID0gU2hhMTtcbmV4cG9ydHMuYXNzZXJ0ID0gYXNzZXJ0O1xuZXhwb3J0cy5hc3NlcnRpb25FcnJvciA9IGFzc2VydGlvbkVycm9yO1xuZXhwb3J0cy5hc3luYyA9IGFzeW5jO1xuZXhwb3J0cy5iYXNlNjQgPSBiYXNlNjQ7XG5leHBvcnRzLmJhc2U2NERlY29kZSA9IGJhc2U2NERlY29kZTtcbmV4cG9ydHMuYmFzZTY0RW5jb2RlID0gYmFzZTY0RW5jb2RlO1xuZXhwb3J0cy5jb250YWlucyA9IGNvbnRhaW5zO1xuZXhwb3J0cy5jcmVhdGVTdWJzY3JpYmUgPSBjcmVhdGVTdWJzY3JpYmU7XG5leHBvcnRzLmRlY29kZSA9IGRlY29kZTtcbmV4cG9ydHMuZGVlcENvcHkgPSBkZWVwQ29weTtcbmV4cG9ydHMuZGVlcEV4dGVuZCA9IGRlZXBFeHRlbmQ7XG5leHBvcnRzLmVycm9yUHJlZml4ID0gZXJyb3JQcmVmaXg7XG5leHBvcnRzLmdldFVBID0gZ2V0VUE7XG5leHBvcnRzLmlzQWRtaW4gPSBpc0FkbWluO1xuZXhwb3J0cy5pc0Jyb3dzZXIgPSBpc0Jyb3dzZXI7XG5leHBvcnRzLmlzRW1wdHkgPSBpc0VtcHR5O1xuZXhwb3J0cy5pc01vYmlsZUNvcmRvdmEgPSBpc01vYmlsZUNvcmRvdmE7XG5leHBvcnRzLmlzTm9kZSA9IGlzTm9kZTtcbmV4cG9ydHMuaXNOb2RlU2RrID0gaXNOb2RlU2RrO1xuZXhwb3J0cy5pc1JlYWN0TmF0aXZlID0gaXNSZWFjdE5hdGl2ZTtcbmV4cG9ydHMuaXNWYWxpZEZvcm1hdCA9IGlzVmFsaWRGb3JtYXQ7XG5leHBvcnRzLmlzVmFsaWRUaW1lc3RhbXAgPSBpc1ZhbGlkVGltZXN0YW1wO1xuZXhwb3J0cy5pc3N1ZWRBdFRpbWUgPSBpc3N1ZWRBdFRpbWU7XG5leHBvcnRzLmpzb25FdmFsID0ganNvbkV2YWw7XG5leHBvcnRzLm1hcCA9IG1hcDtcbmV4cG9ydHMucXVlcnlzdHJpbmcgPSBxdWVyeXN0cmluZztcbmV4cG9ydHMucXVlcnlzdHJpbmdEZWNvZGUgPSBxdWVyeXN0cmluZ0RlY29kZTtcbmV4cG9ydHMuc2FmZUdldCA9IHNhZmVHZXQ7XG5leHBvcnRzLnN0cmluZ0xlbmd0aCA9IHN0cmluZ0xlbmd0aDtcbmV4cG9ydHMuc3RyaW5nVG9CeXRlQXJyYXkgPSBzdHJpbmdUb0J5dGVBcnJheSQxO1xuZXhwb3J0cy5zdHJpbmdpZnkgPSBzdHJpbmdpZnk7XG5leHBvcnRzLnZhbGlkYXRlQXJnQ291bnQgPSB2YWxpZGF0ZUFyZ0NvdW50O1xuZXhwb3J0cy52YWxpZGF0ZUNhbGxiYWNrID0gdmFsaWRhdGVDYWxsYmFjaztcbmV4cG9ydHMudmFsaWRhdGVDb250ZXh0T2JqZWN0ID0gdmFsaWRhdGVDb250ZXh0T2JqZWN0O1xuZXhwb3J0cy52YWxpZGF0ZU5hbWVzcGFjZSA9IHZhbGlkYXRlTmFtZXNwYWNlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguY2pzLmpzLm1hcFxuIiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuXG52YXIgdHNsaWIgPSByZXF1aXJlKCd0c2xpYicpO1xudmFyIHV0aWwgPSByZXF1aXJlKCdAZmlyZWJhc2UvdXRpbCcpO1xuXG4vKipcclxuICogQ29tcG9uZW50IGZvciBzZXJ2aWNlIG5hbWUgVCwgZS5nLiBgYXV0aGAsIGBhdXRoLWludGVybmFsYFxyXG4gKi9cclxudmFyIENvbXBvbmVudCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBuYW1lIFRoZSBwdWJsaWMgc2VydmljZSBuYW1lLCBlLmcuIGFwcCwgYXV0aCwgZmlyZXN0b3JlLCBkYXRhYmFzZVxyXG4gICAgICogQHBhcmFtIGluc3RhbmNlRmFjdG9yeSBTZXJ2aWNlIGZhY3RvcnkgcmVzcG9uc2libGUgZm9yIGNyZWF0aW5nIHRoZSBwdWJsaWMgaW50ZXJmYWNlXHJcbiAgICAgKiBAcGFyYW0gdHlwZSB3aGVodGVyIHRoZSBzZXJ2aWNlIHByb3ZpZGVkIGJ5IHRoZSBjb21wb25lbnQgaXMgcHVibGljIG9yIHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gQ29tcG9uZW50KG5hbWUsIGluc3RhbmNlRmFjdG9yeSwgdHlwZSkge1xyXG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XHJcbiAgICAgICAgdGhpcy5pbnN0YW5jZUZhY3RvcnkgPSBpbnN0YW5jZUZhY3Rvcnk7XHJcbiAgICAgICAgdGhpcy50eXBlID0gdHlwZTtcclxuICAgICAgICB0aGlzLm11bHRpcGxlSW5zdGFuY2VzID0gZmFsc2U7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogUHJvcGVydGllcyB0byBiZSBhZGRlZCB0byB0aGUgc2VydmljZSBuYW1lc3BhY2VcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLnNlcnZpY2VQcm9wcyA9IHt9O1xyXG4gICAgICAgIHRoaXMuaW5zdGFudGlhdGlvbk1vZGUgPSBcIkxBWllcIiAvKiBMQVpZICovO1xyXG4gICAgfVxyXG4gICAgQ29tcG9uZW50LnByb3RvdHlwZS5zZXRJbnN0YW50aWF0aW9uTW9kZSA9IGZ1bmN0aW9uIChtb2RlKSB7XHJcbiAgICAgICAgdGhpcy5pbnN0YW50aWF0aW9uTW9kZSA9IG1vZGU7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9O1xyXG4gICAgQ29tcG9uZW50LnByb3RvdHlwZS5zZXRNdWx0aXBsZUluc3RhbmNlcyA9IGZ1bmN0aW9uIChtdWx0aXBsZUluc3RhbmNlcykge1xyXG4gICAgICAgIHRoaXMubXVsdGlwbGVJbnN0YW5jZXMgPSBtdWx0aXBsZUluc3RhbmNlcztcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH07XHJcbiAgICBDb21wb25lbnQucHJvdG90eXBlLnNldFNlcnZpY2VQcm9wcyA9IGZ1bmN0aW9uIChwcm9wcykge1xyXG4gICAgICAgIHRoaXMuc2VydmljZVByb3BzID0gcHJvcHM7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIENvbXBvbmVudDtcclxufSgpKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnZhciBERUZBVUxUX0VOVFJZX05BTUUgPSAnW0RFRkFVTFRdJztcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBQcm92aWRlciBmb3IgaW5zdGFuY2UgZm9yIHNlcnZpY2UgbmFtZSBULCBlLmcuICdhdXRoJywgJ2F1dGgtaW50ZXJuYWwnXHJcbiAqIE5hbWVTZXJ2aWNlTWFwcGluZ1tUXSBpcyBhbiBhbGlhcyBmb3IgdGhlIHR5cGUgb2YgdGhlIGluc3RhbmNlXHJcbiAqL1xyXG52YXIgUHJvdmlkZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBQcm92aWRlcihuYW1lLCBjb250YWluZXIpIHtcclxuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyID0gY29udGFpbmVyO1xyXG4gICAgICAgIHRoaXMuY29tcG9uZW50ID0gbnVsbDtcclxuICAgICAgICB0aGlzLmluc3RhbmNlcyA9IG5ldyBNYXAoKTtcclxuICAgICAgICB0aGlzLmluc3RhbmNlc0RlZmVycmVkID0gbmV3IE1hcCgpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0gaWRlbnRpZmllciBBIHByb3ZpZGVyIGNhbiBwcm92aWRlIG11bGl0cGxlIGluc3RhbmNlcyBvZiBhIHNlcnZpY2VcclxuICAgICAqIGlmIHRoaXMuY29tcG9uZW50Lm11bHRpcGxlSW5zdGFuY2VzIGlzIHRydWUuXHJcbiAgICAgKi9cclxuICAgIFByb3ZpZGVyLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoaWRlbnRpZmllcikge1xyXG4gICAgICAgIGlmIChpZGVudGlmaWVyID09PSB2b2lkIDApIHsgaWRlbnRpZmllciA9IERFRkFVTFRfRU5UUllfTkFNRTsgfVxyXG4gICAgICAgIC8vIGlmIG11bHRpcGxlSW5zdGFuY2VzIGlzIG5vdCBzdXBwb3J0ZWQsIHVzZSB0aGUgZGVmYXVsdCBuYW1lXHJcbiAgICAgICAgdmFyIG5vcm1hbGl6ZWRJZGVudGlmaWVyID0gdGhpcy5ub3JtYWxpemVJbnN0YW5jZUlkZW50aWZpZXIoaWRlbnRpZmllcik7XHJcbiAgICAgICAgaWYgKCF0aGlzLmluc3RhbmNlc0RlZmVycmVkLmhhcyhub3JtYWxpemVkSWRlbnRpZmllcikpIHtcclxuICAgICAgICAgICAgdmFyIGRlZmVycmVkID0gbmV3IHV0aWwuRGVmZXJyZWQoKTtcclxuICAgICAgICAgICAgdGhpcy5pbnN0YW5jZXNEZWZlcnJlZC5zZXQobm9ybWFsaXplZElkZW50aWZpZXIsIGRlZmVycmVkKTtcclxuICAgICAgICAgICAgLy8gSWYgdGhlIHNlcnZpY2UgaW5zdGFuY2UgaXMgYXZhaWxhYmxlLCByZXNvbHZlIHRoZSBwcm9taXNlIHdpdGggaXQgaW1tZWRpYXRlbHlcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIHZhciBpbnN0YW5jZSA9IHRoaXMuZ2V0T3JJbml0aWFsaXplU2VydmljZShub3JtYWxpemVkSWRlbnRpZmllcik7XHJcbiAgICAgICAgICAgICAgICBpZiAoaW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKGluc3RhbmNlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgLy8gd2hlbiB0aGUgaW5zdGFuY2UgZmFjdG9yeSB0aHJvd3MgYW4gZXhjZXB0aW9uIGR1cmluZyBnZXQoKSwgaXQgc2hvdWxkIG5vdCBjYXVzZVxyXG4gICAgICAgICAgICAgICAgLy8gYSBmYXRhbCBlcnJvci4gV2UganVzdCByZXR1cm4gdGhlIHVucmVzb2x2ZWQgcHJvbWlzZSBpbiB0aGlzIGNhc2UuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5zdGFuY2VzRGVmZXJyZWQuZ2V0KG5vcm1hbGl6ZWRJZGVudGlmaWVyKS5wcm9taXNlO1xyXG4gICAgfTtcclxuICAgIFByb3ZpZGVyLnByb3RvdHlwZS5nZXRJbW1lZGlhdGUgPSBmdW5jdGlvbiAob3B0aW9ucykge1xyXG4gICAgICAgIHZhciBfYSA9IHRzbGliLl9fYXNzaWduKHsgaWRlbnRpZmllcjogREVGQVVMVF9FTlRSWV9OQU1FLCBvcHRpb25hbDogZmFsc2UgfSwgb3B0aW9ucyksIGlkZW50aWZpZXIgPSBfYS5pZGVudGlmaWVyLCBvcHRpb25hbCA9IF9hLm9wdGlvbmFsO1xyXG4gICAgICAgIC8vIGlmIG11bHRpcGxlSW5zdGFuY2VzIGlzIG5vdCBzdXBwb3J0ZWQsIHVzZSB0aGUgZGVmYXVsdCBuYW1lXHJcbiAgICAgICAgdmFyIG5vcm1hbGl6ZWRJZGVudGlmaWVyID0gdGhpcy5ub3JtYWxpemVJbnN0YW5jZUlkZW50aWZpZXIoaWRlbnRpZmllcik7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgdmFyIGluc3RhbmNlID0gdGhpcy5nZXRPckluaXRpYWxpemVTZXJ2aWNlKG5vcm1hbGl6ZWRJZGVudGlmaWVyKTtcclxuICAgICAgICAgICAgaWYgKCFpbnN0YW5jZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbmFsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBFcnJvcihcIlNlcnZpY2UgXCIgKyB0aGlzLm5hbWUgKyBcIiBpcyBub3QgYXZhaWxhYmxlXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBpbnN0YW5jZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgaWYgKG9wdGlvbmFsKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRocm93IGU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgUHJvdmlkZXIucHJvdG90eXBlLmdldENvbXBvbmVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jb21wb25lbnQ7XHJcbiAgICB9O1xyXG4gICAgUHJvdmlkZXIucHJvdG90eXBlLnNldENvbXBvbmVudCA9IGZ1bmN0aW9uIChjb21wb25lbnQpIHtcclxuICAgICAgICB2YXIgZV8xLCBfYTtcclxuICAgICAgICBpZiAoY29tcG9uZW50Lm5hbWUgIT09IHRoaXMubmFtZSkge1xyXG4gICAgICAgICAgICB0aHJvdyBFcnJvcihcIk1pc21hdGNoaW5nIENvbXBvbmVudCBcIiArIGNvbXBvbmVudC5uYW1lICsgXCIgZm9yIFByb3ZpZGVyIFwiICsgdGhpcy5uYW1lICsgXCIuXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5jb21wb25lbnQpIHtcclxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoXCJDb21wb25lbnQgZm9yIFwiICsgdGhpcy5uYW1lICsgXCIgaGFzIGFscmVhZHkgYmVlbiBwcm92aWRlZFwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jb21wb25lbnQgPSBjb21wb25lbnQ7XHJcbiAgICAgICAgLy8gaWYgdGhlIHNlcnZpY2UgaXMgZWFnZXIsIGluaXRpYWxpemUgdGhlIGRlZmF1bHQgaW5zdGFuY2VcclxuICAgICAgICBpZiAoaXNDb21wb25lbnRFYWdlcihjb21wb25lbnQpKSB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmdldE9ySW5pdGlhbGl6ZVNlcnZpY2UoREVGQVVMVF9FTlRSWV9OQU1FKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgLy8gd2hlbiB0aGUgaW5zdGFuY2UgZmFjdG9yeSBmb3IgYW4gZWFnZXIgQ29tcG9uZW50IHRocm93cyBhbiBleGNlcHRpb24gZHVyaW5nIHRoZSBlYWdlclxyXG4gICAgICAgICAgICAgICAgLy8gaW5pdGlhbGl6YXRpb24sIGl0IHNob3VsZCBub3QgY2F1c2UgYSBmYXRhbCBlcnJvci5cclxuICAgICAgICAgICAgICAgIC8vIFRPRE86IEludmVzdGlnYXRlIGlmIHdlIG5lZWQgdG8gbWFrZSBpdCBjb25maWd1cmFibGUsIGJlY2F1c2Ugc29tZSBjb21wb25lbnQgbWF5IHdhbnQgdG8gY2F1c2VcclxuICAgICAgICAgICAgICAgIC8vIGEgZmF0YWwgZXJyb3IgaW4gdGhpcyBjYXNlP1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIC8vIENyZWF0ZSBzZXJ2aWNlIGluc3RhbmNlcyBmb3IgdGhlIHBlbmRpbmcgcHJvbWlzZXMgYW5kIHJlc29sdmUgdGhlbVxyXG4gICAgICAgICAgICAvLyBOT1RFOiBpZiB0aGlzLm11bHRpcGxlSW5zdGFuY2VzIGlzIGZhbHNlLCBvbmx5IHRoZSBkZWZhdWx0IGluc3RhbmNlIHdpbGwgYmUgY3JlYXRlZFxyXG4gICAgICAgICAgICAvLyBhbmQgYWxsIHByb21pc2VzIHdpdGggcmVzb2x2ZSB3aXRoIGl0IHJlZ2FyZGxlc3Mgb2YgdGhlIGlkZW50aWZpZXIuXHJcbiAgICAgICAgICAgIGZvciAodmFyIF9iID0gdHNsaWIuX192YWx1ZXModGhpcy5pbnN0YW5jZXNEZWZlcnJlZC5lbnRyaWVzKCkpLCBfYyA9IF9iLm5leHQoKTsgIV9jLmRvbmU7IF9jID0gX2IubmV4dCgpKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgX2QgPSB0c2xpYi5fX3JlYWQoX2MudmFsdWUsIDIpLCBpbnN0YW5jZUlkZW50aWZpZXIgPSBfZFswXSwgaW5zdGFuY2VEZWZlcnJlZCA9IF9kWzFdO1xyXG4gICAgICAgICAgICAgICAgdmFyIG5vcm1hbGl6ZWRJZGVudGlmaWVyID0gdGhpcy5ub3JtYWxpemVJbnN0YW5jZUlkZW50aWZpZXIoaW5zdGFuY2VJZGVudGlmaWVyKTtcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gYGdldE9ySW5pdGlhbGl6ZVNlcnZpY2UoKWAgc2hvdWxkIGFsd2F5cyByZXR1cm4gYSB2YWxpZCBpbnN0YW5jZSBzaW5jZSBhIGNvbXBvbmVudCBpcyBndWFyYW50ZWVkLiB1c2UgISB0byBtYWtlIHR5cGVzY3JpcHQgaGFwcHkuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGluc3RhbmNlID0gdGhpcy5nZXRPckluaXRpYWxpemVTZXJ2aWNlKG5vcm1hbGl6ZWRJZGVudGlmaWVyKTtcclxuICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZURlZmVycmVkLnJlc29sdmUoaW5zdGFuY2UpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyB3aGVuIHRoZSBpbnN0YW5jZSBmYWN0b3J5IHRocm93cyBhbiBleGNlcHRpb24sIGl0IHNob3VsZCBub3QgY2F1c2VcclxuICAgICAgICAgICAgICAgICAgICAvLyBhIGZhdGFsIGVycm9yLiBXZSBqdXN0IGxlYXZlIHRoZSBwcm9taXNlIHVucmVzb2x2ZWQuXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH1cclxuICAgICAgICBmaW5hbGx5IHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGlmIChfYyAmJiAhX2MuZG9uZSAmJiAoX2EgPSBfYi5yZXR1cm4pKSBfYS5jYWxsKF9iKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFByb3ZpZGVyLnByb3RvdHlwZS5jbGVhckluc3RhbmNlID0gZnVuY3Rpb24gKGlkZW50aWZpZXIpIHtcclxuICAgICAgICBpZiAoaWRlbnRpZmllciA9PT0gdm9pZCAwKSB7IGlkZW50aWZpZXIgPSBERUZBVUxUX0VOVFJZX05BTUU7IH1cclxuICAgICAgICB0aGlzLmluc3RhbmNlc0RlZmVycmVkLmRlbGV0ZShpZGVudGlmaWVyKTtcclxuICAgICAgICB0aGlzLmluc3RhbmNlcy5kZWxldGUoaWRlbnRpZmllcik7XHJcbiAgICB9O1xyXG4gICAgLy8gYXBwLmRlbGV0ZSgpIHdpbGwgY2FsbCB0aGlzIG1ldGhvZCBvbiBldmVyeSBwcm92aWRlciB0byBkZWxldGUgdGhlIHNlcnZpY2VzXHJcbiAgICAvLyBUT0RPOiBzaG91bGQgd2UgbWFyayB0aGUgcHJvdmlkZXIgYXMgZGVsZXRlZD9cclxuICAgIFByb3ZpZGVyLnByb3RvdHlwZS5kZWxldGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRzbGliLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgc2VydmljZXM7XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYi5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlcnZpY2VzID0gQXJyYXkuZnJvbSh0aGlzLmluc3RhbmNlcy52YWx1ZXMoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIFByb21pc2UuYWxsKHNlcnZpY2VzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZpbHRlcihmdW5jdGlvbiAoc2VydmljZSkgeyByZXR1cm4gJ0lOVEVSTkFMJyBpbiBzZXJ2aWNlOyB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcChmdW5jdGlvbiAoc2VydmljZSkgeyByZXR1cm4gc2VydmljZS5JTlRFUk5BTC5kZWxldGUoKTsgfSkpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBQcm92aWRlci5wcm90b3R5cGUuaXNDb21wb25lbnRTZXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY29tcG9uZW50ICE9IG51bGw7XHJcbiAgICB9O1xyXG4gICAgUHJvdmlkZXIucHJvdG90eXBlLmdldE9ySW5pdGlhbGl6ZVNlcnZpY2UgPSBmdW5jdGlvbiAoaWRlbnRpZmllcikge1xyXG4gICAgICAgIHZhciBpbnN0YW5jZSA9IHRoaXMuaW5zdGFuY2VzLmdldChpZGVudGlmaWVyKTtcclxuICAgICAgICBpZiAoIWluc3RhbmNlICYmIHRoaXMuY29tcG9uZW50KSB7XHJcbiAgICAgICAgICAgIGluc3RhbmNlID0gdGhpcy5jb21wb25lbnQuaW5zdGFuY2VGYWN0b3J5KHRoaXMuY29udGFpbmVyLCBub3JtYWxpemVJZGVudGlmaWVyRm9yRmFjdG9yeShpZGVudGlmaWVyKSk7XHJcbiAgICAgICAgICAgIHRoaXMuaW5zdGFuY2VzLnNldChpZGVudGlmaWVyLCBpbnN0YW5jZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBpbnN0YW5jZSB8fCBudWxsO1xyXG4gICAgfTtcclxuICAgIFByb3ZpZGVyLnByb3RvdHlwZS5ub3JtYWxpemVJbnN0YW5jZUlkZW50aWZpZXIgPSBmdW5jdGlvbiAoaWRlbnRpZmllcikge1xyXG4gICAgICAgIGlmICh0aGlzLmNvbXBvbmVudCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb21wb25lbnQubXVsdGlwbGVJbnN0YW5jZXMgPyBpZGVudGlmaWVyIDogREVGQVVMVF9FTlRSWV9OQU1FO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIGlkZW50aWZpZXI7IC8vIGFzc3VtZSBtdWx0aXBsZSBpbnN0YW5jZXMgYXJlIHN1cHBvcnRlZCBiZWZvcmUgdGhlIGNvbXBvbmVudCBpcyBwcm92aWRlZC5cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFByb3ZpZGVyO1xyXG59KCkpO1xyXG4vLyB1bmRlZmluZWQgc2hvdWxkIGJlIHBhc3NlZCB0byB0aGUgc2VydmljZSBmYWN0b3J5IGZvciB0aGUgZGVmYXVsdCBpbnN0YW5jZVxyXG5mdW5jdGlvbiBub3JtYWxpemVJZGVudGlmaWVyRm9yRmFjdG9yeShpZGVudGlmaWVyKSB7XHJcbiAgICByZXR1cm4gaWRlbnRpZmllciA9PT0gREVGQVVMVF9FTlRSWV9OQU1FID8gdW5kZWZpbmVkIDogaWRlbnRpZmllcjtcclxufVxyXG5mdW5jdGlvbiBpc0NvbXBvbmVudEVhZ2VyKGNvbXBvbmVudCkge1xyXG4gICAgcmV0dXJuIGNvbXBvbmVudC5pbnN0YW50aWF0aW9uTW9kZSA9PT0gXCJFQUdFUlwiIC8qIEVBR0VSICovO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQ29tcG9uZW50Q29udGFpbmVyIHRoYXQgcHJvdmlkZXMgUHJvdmlkZXJzIGZvciBzZXJ2aWNlIG5hbWUgVCwgZS5nLiBgYXV0aGAsIGBhdXRoLWludGVybmFsYFxyXG4gKi9cclxudmFyIENvbXBvbmVudENvbnRhaW5lciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIENvbXBvbmVudENvbnRhaW5lcihuYW1lKSB7XHJcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcclxuICAgICAgICB0aGlzLnByb3ZpZGVycyA9IG5ldyBNYXAoKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBjb21wb25lbnQgQ29tcG9uZW50IGJlaW5nIGFkZGVkXHJcbiAgICAgKiBAcGFyYW0gb3ZlcndyaXRlIFdoZW4gYSBjb21wb25lbnQgd2l0aCB0aGUgc2FtZSBuYW1lIGhhcyBhbHJlYWR5IGJlZW4gcmVnaXN0ZXJlZCxcclxuICAgICAqIGlmIG92ZXJ3cml0ZSBpcyB0cnVlOiBvdmVyd3JpdGUgdGhlIGV4aXN0aW5nIGNvbXBvbmVudCB3aXRoIHRoZSBuZXcgY29tcG9uZW50IGFuZCBjcmVhdGUgYSBuZXdcclxuICAgICAqIHByb3ZpZGVyIHdpdGggdGhlIG5ldyBjb21wb25lbnQuIEl0IGNhbiBiZSB1c2VmdWwgaW4gdGVzdHMgd2hlcmUgeW91IHdhbnQgdG8gdXNlIGRpZmZlcmVudCBtb2Nrc1xyXG4gICAgICogZm9yIGRpZmZlcmVudCB0ZXN0cy5cclxuICAgICAqIGlmIG92ZXJ3cml0ZSBpcyBmYWxzZTogdGhyb3cgYW4gZXhjZXB0aW9uXHJcbiAgICAgKi9cclxuICAgIENvbXBvbmVudENvbnRhaW5lci5wcm90b3R5cGUuYWRkQ29tcG9uZW50ID0gZnVuY3Rpb24gKGNvbXBvbmVudCkge1xyXG4gICAgICAgIHZhciBwcm92aWRlciA9IHRoaXMuZ2V0UHJvdmlkZXIoY29tcG9uZW50Lm5hbWUpO1xyXG4gICAgICAgIGlmIChwcm92aWRlci5pc0NvbXBvbmVudFNldCgpKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNvbXBvbmVudCBcIiArIGNvbXBvbmVudC5uYW1lICsgXCIgaGFzIGFscmVhZHkgYmVlbiByZWdpc3RlcmVkIHdpdGggXCIgKyB0aGlzLm5hbWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwcm92aWRlci5zZXRDb21wb25lbnQoY29tcG9uZW50KTtcclxuICAgIH07XHJcbiAgICBDb21wb25lbnRDb250YWluZXIucHJvdG90eXBlLmFkZE9yT3ZlcndyaXRlQ29tcG9uZW50ID0gZnVuY3Rpb24gKGNvbXBvbmVudCkge1xyXG4gICAgICAgIHZhciBwcm92aWRlciA9IHRoaXMuZ2V0UHJvdmlkZXIoY29tcG9uZW50Lm5hbWUpO1xyXG4gICAgICAgIGlmIChwcm92aWRlci5pc0NvbXBvbmVudFNldCgpKSB7XHJcbiAgICAgICAgICAgIC8vIGRlbGV0ZSB0aGUgZXhpc3RpbmcgcHJvdmlkZXIgZnJvbSB0aGUgY29udGFpbmVyLCBzbyB3ZSBjYW4gcmVnaXN0ZXIgdGhlIG5ldyBjb21wb25lbnRcclxuICAgICAgICAgICAgdGhpcy5wcm92aWRlcnMuZGVsZXRlKGNvbXBvbmVudC5uYW1lKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5hZGRDb21wb25lbnQoY29tcG9uZW50KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIGdldFByb3ZpZGVyIHByb3ZpZGVzIGEgdHlwZSBzYWZlIGludGVyZmFjZSB3aGVyZSBpdCBjYW4gb25seSBiZSBjYWxsZWQgd2l0aCBhIGZpZWxkIG5hbWVcclxuICAgICAqIHByZXNlbnQgaW4gTmFtZVNlcnZpY2VNYXBwaW5nIGludGVyZmFjZS5cclxuICAgICAqXHJcbiAgICAgKiBGaXJlYmFzZSBTREtzIHByb3ZpZGluZyBzZXJ2aWNlcyBzaG91bGQgZXh0ZW5kIE5hbWVTZXJ2aWNlTWFwcGluZyBpbnRlcmZhY2UgdG8gcmVnaXN0ZXJcclxuICAgICAqIHRoZW1zZWx2ZXMuXHJcbiAgICAgKi9cclxuICAgIENvbXBvbmVudENvbnRhaW5lci5wcm90b3R5cGUuZ2V0UHJvdmlkZXIgPSBmdW5jdGlvbiAobmFtZSkge1xyXG4gICAgICAgIGlmICh0aGlzLnByb3ZpZGVycy5oYXMobmFtZSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvdmlkZXJzLmdldChuYW1lKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gY3JlYXRlIGEgUHJvdmlkZXIgZm9yIGEgc2VydmljZSB0aGF0IGhhc24ndCByZWdpc3RlcmVkIHdpdGggRmlyZWJhc2VcclxuICAgICAgICB2YXIgcHJvdmlkZXIgPSBuZXcgUHJvdmlkZXIobmFtZSwgdGhpcyk7XHJcbiAgICAgICAgdGhpcy5wcm92aWRlcnMuc2V0KG5hbWUsIHByb3ZpZGVyKTtcclxuICAgICAgICByZXR1cm4gcHJvdmlkZXI7XHJcbiAgICB9O1xyXG4gICAgQ29tcG9uZW50Q29udGFpbmVyLnByb3RvdHlwZS5nZXRQcm92aWRlcnMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5wcm92aWRlcnMudmFsdWVzKCkpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBDb21wb25lbnRDb250YWluZXI7XHJcbn0oKSk7XG5cbmV4cG9ydHMuQ29tcG9uZW50ID0gQ29tcG9uZW50O1xuZXhwb3J0cy5Db21wb25lbnRDb250YWluZXIgPSBDb21wb25lbnRDb250YWluZXI7XG5leHBvcnRzLlByb3ZpZGVyID0gUHJvdmlkZXI7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5janMuanMubWFwXG4iLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG5cbnZhciB0c2xpYiA9IHJlcXVpcmUoJ3RzbGliJyk7XG52YXIgdXRpbCA9IHJlcXVpcmUoJ0BmaXJlYmFzZS91dGlsJyk7XG52YXIgY29tcG9uZW50ID0gcmVxdWlyZSgnQGZpcmViYXNlL2NvbXBvbmVudCcpO1xudmFyIGxvZ2dlciQxID0gcmVxdWlyZSgnQGZpcmViYXNlL2xvZ2dlcicpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxudmFyIF9hO1xyXG52YXIgRVJST1JTID0gKF9hID0ge30sXHJcbiAgICBfYVtcIm5vLWFwcFwiIC8qIE5PX0FQUCAqL10gPSBcIk5vIEZpcmViYXNlIEFwcCAneyRhcHBOYW1lfScgaGFzIGJlZW4gY3JlYXRlZCAtIFwiICtcclxuICAgICAgICAnY2FsbCBGaXJlYmFzZSBBcHAuaW5pdGlhbGl6ZUFwcCgpJyxcclxuICAgIF9hW1wiYmFkLWFwcC1uYW1lXCIgLyogQkFEX0FQUF9OQU1FICovXSA9IFwiSWxsZWdhbCBBcHAgbmFtZTogJ3skYXBwTmFtZX1cIixcclxuICAgIF9hW1wiZHVwbGljYXRlLWFwcFwiIC8qIERVUExJQ0FURV9BUFAgKi9dID0gXCJGaXJlYmFzZSBBcHAgbmFtZWQgJ3skYXBwTmFtZX0nIGFscmVhZHkgZXhpc3RzXCIsXHJcbiAgICBfYVtcImFwcC1kZWxldGVkXCIgLyogQVBQX0RFTEVURUQgKi9dID0gXCJGaXJlYmFzZSBBcHAgbmFtZWQgJ3skYXBwTmFtZX0nIGFscmVhZHkgZGVsZXRlZFwiLFxyXG4gICAgX2FbXCJpbnZhbGlkLWFwcC1hcmd1bWVudFwiIC8qIElOVkFMSURfQVBQX0FSR1VNRU5UICovXSA9ICdmaXJlYmFzZS57JGFwcE5hbWV9KCkgdGFrZXMgZWl0aGVyIG5vIGFyZ3VtZW50IG9yIGEgJyArXHJcbiAgICAgICAgJ0ZpcmViYXNlIEFwcCBpbnN0YW5jZS4nLFxyXG4gICAgX2EpO1xyXG52YXIgRVJST1JfRkFDVE9SWSA9IG5ldyB1dGlsLkVycm9yRmFjdG9yeSgnYXBwJywgJ0ZpcmViYXNlJywgRVJST1JTKTtcblxudmFyIG5hbWUgPSBcIkBmaXJlYmFzZS9hcHBcIjtcbnZhciB2ZXJzaW9uID0gXCIwLjUuMFwiO1xuXG52YXIgbmFtZSQxID0gXCJAZmlyZWJhc2UvYW5hbHl0aWNzXCI7XG5cbnZhciBuYW1lJDIgPSBcIkBmaXJlYmFzZS9hdXRoXCI7XG5cbnZhciBuYW1lJDMgPSBcIkBmaXJlYmFzZS9kYXRhYmFzZVwiO1xuXG52YXIgbmFtZSQ0ID0gXCJAZmlyZWJhc2UvZnVuY3Rpb25zXCI7XG5cbnZhciBuYW1lJDUgPSBcIkBmaXJlYmFzZS9pbnN0YWxsYXRpb25zXCI7XG5cbnZhciBuYW1lJDYgPSBcIkBmaXJlYmFzZS9tZXNzYWdpbmdcIjtcblxudmFyIG5hbWUkNyA9IFwiQGZpcmViYXNlL3BlcmZvcm1hbmNlXCI7XG5cbnZhciBuYW1lJDggPSBcIkBmaXJlYmFzZS9yZW1vdGUtY29uZmlnXCI7XG5cbnZhciBuYW1lJDkgPSBcIkBmaXJlYmFzZS9zdG9yYWdlXCI7XG5cbnZhciBuYW1lJGEgPSBcIkBmaXJlYmFzZS9maXJlc3RvcmVcIjtcblxudmFyIG5hbWUkYiA9IFwiZmlyZWJhc2Utd3JhcHBlclwiO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxudmFyIF9hJDE7XHJcbnZhciBERUZBVUxUX0VOVFJZX05BTUUgPSAnW0RFRkFVTFRdJztcclxudmFyIFBMQVRGT1JNX0xPR19TVFJJTkcgPSAoX2EkMSA9IHt9LFxyXG4gICAgX2EkMVtuYW1lXSA9ICdmaXJlLWNvcmUnLFxyXG4gICAgX2EkMVtuYW1lJDFdID0gJ2ZpcmUtYW5hbHl0aWNzJyxcclxuICAgIF9hJDFbbmFtZSQyXSA9ICdmaXJlLWF1dGgnLFxyXG4gICAgX2EkMVtuYW1lJDNdID0gJ2ZpcmUtcnRkYicsXHJcbiAgICBfYSQxW25hbWUkNF0gPSAnZmlyZS1mbicsXHJcbiAgICBfYSQxW25hbWUkNV0gPSAnZmlyZS1paWQnLFxyXG4gICAgX2EkMVtuYW1lJDZdID0gJ2ZpcmUtZmNtJyxcclxuICAgIF9hJDFbbmFtZSQ3XSA9ICdmaXJlLXBlcmYnLFxyXG4gICAgX2EkMVtuYW1lJDhdID0gJ2ZpcmUtcmMnLFxyXG4gICAgX2EkMVtuYW1lJDldID0gJ2ZpcmUtZ2NzJyxcclxuICAgIF9hJDFbbmFtZSRhXSA9ICdmaXJlLWZzdCcsXHJcbiAgICBfYSQxWydmaXJlLWpzJ10gPSAnZmlyZS1qcycsXHJcbiAgICBfYSQxW25hbWUkYl0gPSAnZmlyZS1qcy1hbGwnLFxyXG4gICAgX2EkMSk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG52YXIgbG9nZ2VyID0gbmV3IGxvZ2dlciQxLkxvZ2dlcignQGZpcmViYXNlL2FwcCcpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEdsb2JhbCBjb250ZXh0IG9iamVjdCBmb3IgYSBjb2xsZWN0aW9uIG9mIHNlcnZpY2VzIHVzaW5nXHJcbiAqIGEgc2hhcmVkIGF1dGhlbnRpY2F0aW9uIHN0YXRlLlxyXG4gKi9cclxudmFyIEZpcmViYXNlQXBwSW1wbCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEZpcmViYXNlQXBwSW1wbChvcHRpb25zLCBjb25maWcsIGZpcmViYXNlXykge1xyXG4gICAgICAgIHZhciBlXzEsIF9hO1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5maXJlYmFzZV8gPSBmaXJlYmFzZV87XHJcbiAgICAgICAgdGhpcy5pc0RlbGV0ZWRfID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5uYW1lXyA9IGNvbmZpZy5uYW1lO1xyXG4gICAgICAgIHRoaXMuYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkXyA9XHJcbiAgICAgICAgICAgIGNvbmZpZy5hdXRvbWF0aWNEYXRhQ29sbGVjdGlvbkVuYWJsZWQgfHwgZmFsc2U7XHJcbiAgICAgICAgdGhpcy5vcHRpb25zXyA9IHV0aWwuZGVlcENvcHkob3B0aW9ucyk7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIgPSBuZXcgY29tcG9uZW50LkNvbXBvbmVudENvbnRhaW5lcihjb25maWcubmFtZSk7XHJcbiAgICAgICAgLy8gYWRkIGl0c2VsZiB0byBjb250YWluZXJcclxuICAgICAgICB0aGlzLl9hZGRDb21wb25lbnQobmV3IGNvbXBvbmVudC5Db21wb25lbnQoJ2FwcCcsIGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzOyB9LCBcIlBVQkxJQ1wiIC8qIFBVQkxJQyAqLykpO1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIC8vIHBvcHVsYXRlIENvbXBvbmVudENvbnRhaW5lciB3aXRoIGV4aXN0aW5nIGNvbXBvbmVudHNcclxuICAgICAgICAgICAgZm9yICh2YXIgX2IgPSB0c2xpYi5fX3ZhbHVlcyh0aGlzLmZpcmViYXNlXy5JTlRFUk5BTC5jb21wb25lbnRzLnZhbHVlcygpKSwgX2MgPSBfYi5uZXh0KCk7ICFfYy5kb25lOyBfYyA9IF9iLm5leHQoKSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGNvbXBvbmVudCQxID0gX2MudmFsdWU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9hZGRDb21wb25lbnQoY29tcG9uZW50JDEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlXzFfMSkgeyBlXzEgPSB7IGVycm9yOiBlXzFfMSB9OyB9XHJcbiAgICAgICAgZmluYWxseSB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoX2MgJiYgIV9jLmRvbmUgJiYgKF9hID0gX2IucmV0dXJuKSkgX2EuY2FsbChfYik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZmluYWxseSB7IGlmIChlXzEpIHRocm93IGVfMS5lcnJvcjsgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShGaXJlYmFzZUFwcEltcGwucHJvdG90eXBlLCBcImF1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZFwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2hlY2tEZXN0cm95ZWRfKCk7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmF1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZF87XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWwpIHtcclxuICAgICAgICAgICAgdGhpcy5jaGVja0Rlc3Ryb3llZF8oKTtcclxuICAgICAgICAgICAgdGhpcy5hdXRvbWF0aWNEYXRhQ29sbGVjdGlvbkVuYWJsZWRfID0gdmFsO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEZpcmViYXNlQXBwSW1wbC5wcm90b3R5cGUsIFwibmFtZVwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2hlY2tEZXN0cm95ZWRfKCk7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm5hbWVfO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEZpcmViYXNlQXBwSW1wbC5wcm90b3R5cGUsIFwib3B0aW9uc1wiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2hlY2tEZXN0cm95ZWRfKCk7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm9wdGlvbnNfO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgRmlyZWJhc2VBcHBJbXBsLnByb3RvdHlwZS5kZWxldGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcclxuICAgICAgICAgICAgX3RoaXMuY2hlY2tEZXN0cm95ZWRfKCk7XHJcbiAgICAgICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIF90aGlzLmZpcmViYXNlXy5JTlRFUk5BTC5yZW1vdmVBcHAoX3RoaXMubmFtZV8pO1xyXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwoX3RoaXMuY29udGFpbmVyLmdldFByb3ZpZGVycygpLm1hcChmdW5jdGlvbiAocHJvdmlkZXIpIHsgcmV0dXJuIHByb3ZpZGVyLmRlbGV0ZSgpOyB9KSk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBfdGhpcy5pc0RlbGV0ZWRfID0gdHJ1ZTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJldHVybiBhIHNlcnZpY2UgaW5zdGFuY2UgYXNzb2NpYXRlZCB3aXRoIHRoaXMgYXBwIChjcmVhdGluZyBpdFxyXG4gICAgICogb24gZGVtYW5kKSwgaWRlbnRpZmllZCBieSB0aGUgcGFzc2VkIGluc3RhbmNlSWRlbnRpZmllci5cclxuICAgICAqXHJcbiAgICAgKiBOT1RFOiBDdXJyZW50bHkgc3RvcmFnZSBhbmQgZnVuY3Rpb25zIGFyZSB0aGUgb25seSBvbmVzIHRoYXQgYXJlIGxldmVyYWdpbmcgdGhpc1xyXG4gICAgICogZnVuY3Rpb25hbGl0eS4gVGhleSBpbnZva2UgaXQgYnkgY2FsbGluZzpcclxuICAgICAqXHJcbiAgICAgKiBgYGBqYXZhc2NyaXB0XHJcbiAgICAgKiBmaXJlYmFzZS5hcHAoKS5zdG9yYWdlKCdTVE9SQUdFIEJVQ0tFVCBJRCcpXHJcbiAgICAgKiBgYGBcclxuICAgICAqXHJcbiAgICAgKiBUaGUgc2VydmljZSBuYW1lIGlzIHBhc3NlZCB0byB0aGlzIGFscmVhZHlcclxuICAgICAqIEBpbnRlcm5hbFxyXG4gICAgICovXHJcbiAgICBGaXJlYmFzZUFwcEltcGwucHJvdG90eXBlLl9nZXRTZXJ2aWNlID0gZnVuY3Rpb24gKG5hbWUsIGluc3RhbmNlSWRlbnRpZmllcikge1xyXG4gICAgICAgIGlmIChpbnN0YW5jZUlkZW50aWZpZXIgPT09IHZvaWQgMCkgeyBpbnN0YW5jZUlkZW50aWZpZXIgPSBERUZBVUxUX0VOVFJZX05BTUU7IH1cclxuICAgICAgICB0aGlzLmNoZWNrRGVzdHJveWVkXygpO1xyXG4gICAgICAgIC8vIGdldEltbWVkaWF0ZSB3aWxsIGFsd2F5cyBzdWNjZWVkIGJlY2F1c2UgX2dldFNlcnZpY2UgaXMgb25seSBjYWxsZWQgZm9yIHJlZ2lzdGVyZWQgY29tcG9uZW50cy5cclxuICAgICAgICByZXR1cm4gdGhpcy5jb250YWluZXIuZ2V0UHJvdmlkZXIobmFtZSkuZ2V0SW1tZWRpYXRlKHtcclxuICAgICAgICAgICAgaWRlbnRpZmllcjogaW5zdGFuY2VJZGVudGlmaWVyXHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZW1vdmUgYSBzZXJ2aWNlIGluc3RhbmNlIGZyb20gdGhlIGNhY2hlLCBzbyB3ZSB3aWxsIGNyZWF0ZSBhIG5ldyBpbnN0YW5jZSBmb3IgdGhpcyBzZXJ2aWNlXHJcbiAgICAgKiB3aGVuIHBlb3BsZSB0cnkgdG8gZ2V0IHRoaXMgc2VydmljZSBhZ2Fpbi5cclxuICAgICAqXHJcbiAgICAgKiBOT1RFOiBjdXJyZW50bHkgb25seSBmaXJlc3RvcmUgaXMgdXNpbmcgdGhpcyBmdW5jdGlvbmFsaXR5IHRvIHN1cHBvcnQgZmlyZXN0b3JlIHNodXRkb3duLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBuYW1lIFRoZSBzZXJ2aWNlIG5hbWVcclxuICAgICAqIEBwYXJhbSBpbnN0YW5jZUlkZW50aWZpZXIgaW5zdGFuY2UgaWRlbnRpZmllciBpbiBjYXNlIG11bHRpcGxlIGluc3RhbmNlcyBhcmUgYWxsb3dlZFxyXG4gICAgICogQGludGVybmFsXHJcbiAgICAgKi9cclxuICAgIEZpcmViYXNlQXBwSW1wbC5wcm90b3R5cGUuX3JlbW92ZVNlcnZpY2VJbnN0YW5jZSA9IGZ1bmN0aW9uIChuYW1lLCBpbnN0YW5jZUlkZW50aWZpZXIpIHtcclxuICAgICAgICBpZiAoaW5zdGFuY2VJZGVudGlmaWVyID09PSB2b2lkIDApIHsgaW5zdGFuY2VJZGVudGlmaWVyID0gREVGQVVMVF9FTlRSWV9OQU1FOyB9XHJcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuICAgICAgICB0aGlzLmNvbnRhaW5lci5nZXRQcm92aWRlcihuYW1lKS5jbGVhckluc3RhbmNlKGluc3RhbmNlSWRlbnRpZmllcik7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0gY29tcG9uZW50IHRoZSBjb21wb25lbnQgYmVpbmcgYWRkZWQgdG8gdGhpcyBhcHAncyBjb250YWluZXJcclxuICAgICAqL1xyXG4gICAgRmlyZWJhc2VBcHBJbXBsLnByb3RvdHlwZS5fYWRkQ29tcG9uZW50ID0gZnVuY3Rpb24gKGNvbXBvbmVudCkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyLmFkZENvbXBvbmVudChjb21wb25lbnQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICBsb2dnZXIuZGVidWcoXCJDb21wb25lbnQgXCIgKyBjb21wb25lbnQubmFtZSArIFwiIGZhaWxlZCB0byByZWdpc3RlciB3aXRoIEZpcmViYXNlQXBwIFwiICsgdGhpcy5uYW1lLCBlKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgRmlyZWJhc2VBcHBJbXBsLnByb3RvdHlwZS5fYWRkT3JPdmVyd3JpdGVDb21wb25lbnQgPSBmdW5jdGlvbiAoY29tcG9uZW50KSB7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIuYWRkT3JPdmVyd3JpdGVDb21wb25lbnQoY29tcG9uZW50KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFRoaXMgZnVuY3Rpb24gd2lsbCB0aHJvdyBhbiBFcnJvciBpZiB0aGUgQXBwIGhhcyBhbHJlYWR5IGJlZW4gZGVsZXRlZCAtXHJcbiAgICAgKiB1c2UgYmVmb3JlIHBlcmZvcm1pbmcgQVBJIGFjdGlvbnMgb24gdGhlIEFwcC5cclxuICAgICAqL1xyXG4gICAgRmlyZWJhc2VBcHBJbXBsLnByb3RvdHlwZS5jaGVja0Rlc3Ryb3llZF8gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNEZWxldGVkXykge1xyXG4gICAgICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImFwcC1kZWxldGVkXCIgLyogQVBQX0RFTEVURUQgKi8sIHsgYXBwTmFtZTogdGhpcy5uYW1lXyB9KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEZpcmViYXNlQXBwSW1wbDtcclxufSgpKTtcclxuLy8gUHJldmVudCBkZWFkLWNvZGUgZWxpbWluYXRpb24gb2YgdGhlc2UgbWV0aG9kcyB3L28gaW52YWxpZCBwcm9wZXJ0eVxyXG4vLyBjb3B5aW5nLlxyXG4oRmlyZWJhc2VBcHBJbXBsLnByb3RvdHlwZS5uYW1lICYmIEZpcmViYXNlQXBwSW1wbC5wcm90b3R5cGUub3B0aW9ucykgfHxcclxuICAgIEZpcmViYXNlQXBwSW1wbC5wcm90b3R5cGUuZGVsZXRlIHx8XHJcbiAgICBjb25zb2xlLmxvZygnZGMnKTtcblxudmFyIHZlcnNpb24kMSA9IFwiNy42LjBcIjtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBCZWNhdXNlIGF1dGggY2FuJ3Qgc2hhcmUgY29kZSB3aXRoIG90aGVyIGNvbXBvbmVudHMsIHdlIGF0dGFjaCB0aGUgdXRpbGl0eSBmdW5jdGlvbnNcclxuICogaW4gYW4gaW50ZXJuYWwgbmFtZXNwYWNlIHRvIHNoYXJlIGNvZGUuXHJcbiAqIFRoaXMgZnVuY3Rpb24gcmV0dXJuIGEgZmlyZWJhc2UgbmFtZXNwYWNlIG9iamVjdCB3aXRob3V0XHJcbiAqIGFueSB1dGlsaXR5IGZ1bmN0aW9ucywgc28gaXQgY2FuIGJlIHNoYXJlZCBiZXR3ZWVuIHRoZSByZWd1bGFyIGZpcmViYXNlTmFtZXNwYWNlIGFuZFxyXG4gKiB0aGUgbGl0ZSB2ZXJzaW9uLlxyXG4gKi9cclxuZnVuY3Rpb24gY3JlYXRlRmlyZWJhc2VOYW1lc3BhY2VDb3JlKGZpcmViYXNlQXBwSW1wbCkge1xyXG4gICAgdmFyIGFwcHMgPSB7fTtcclxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbiAgICB2YXIgY29tcG9uZW50cyA9IG5ldyBNYXAoKTtcclxuICAgIC8vIEEgbmFtZXNwYWNlIGlzIGEgcGxhaW4gSmF2YVNjcmlwdCBPYmplY3QuXHJcbiAgICB2YXIgbmFtZXNwYWNlID0ge1xyXG4gICAgICAgIC8vIEhhY2sgdG8gcHJldmVudCBCYWJlbCBmcm9tIG1vZGlmeWluZyB0aGUgb2JqZWN0IHJldHVybmVkXHJcbiAgICAgICAgLy8gYXMgdGhlIGZpcmViYXNlIG5hbWVzcGFjZS5cclxuICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgX19lc01vZHVsZTogdHJ1ZSxcclxuICAgICAgICBpbml0aWFsaXplQXBwOiBpbml0aWFsaXplQXBwLFxyXG4gICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICBhcHA6IGFwcCxcclxuICAgICAgICByZWdpc3RlclZlcnNpb246IHJlZ2lzdGVyVmVyc2lvbixcclxuICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgYXBwczogbnVsbCxcclxuICAgICAgICBTREtfVkVSU0lPTjogdmVyc2lvbiQxLFxyXG4gICAgICAgIElOVEVSTkFMOiB7XHJcbiAgICAgICAgICAgIHJlZ2lzdGVyQ29tcG9uZW50OiByZWdpc3RlckNvbXBvbmVudCxcclxuICAgICAgICAgICAgcmVtb3ZlQXBwOiByZW1vdmVBcHAsXHJcbiAgICAgICAgICAgIGNvbXBvbmVudHM6IGNvbXBvbmVudHMsXHJcbiAgICAgICAgICAgIHVzZUFzU2VydmljZTogdXNlQXNTZXJ2aWNlXHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8vIEluamVjdCBhIGNpcmN1bGFyIGRlZmF1bHQgZXhwb3J0IHRvIGFsbG93IEJhYmVsIHVzZXJzIHdobyB3ZXJlIHByZXZpb3VzbHlcclxuICAgIC8vIHVzaW5nOlxyXG4gICAgLy9cclxuICAgIC8vICAgaW1wb3J0IGZpcmViYXNlIGZyb20gJ2ZpcmViYXNlJztcclxuICAgIC8vICAgd2hpY2ggYmVjb21lczogdmFyIGZpcmViYXNlID0gcmVxdWlyZSgnZmlyZWJhc2UnKS5kZWZhdWx0O1xyXG4gICAgLy9cclxuICAgIC8vIGluc3RlYWQgb2ZcclxuICAgIC8vXHJcbiAgICAvLyAgIGltcG9ydCAqIGFzIGZpcmViYXNlIGZyb20gJ2ZpcmViYXNlJztcclxuICAgIC8vICAgd2hpY2ggYmVjb21lczogdmFyIGZpcmViYXNlID0gcmVxdWlyZSgnZmlyZWJhc2UnKTtcclxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbiAgICBuYW1lc3BhY2VbJ2RlZmF1bHQnXSA9IG5hbWVzcGFjZTtcclxuICAgIC8vIGZpcmViYXNlLmFwcHMgaXMgYSByZWFkLW9ubHkgZ2V0dGVyLlxyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG5hbWVzcGFjZSwgJ2FwcHMnLCB7XHJcbiAgICAgICAgZ2V0OiBnZXRBcHBzXHJcbiAgICB9KTtcclxuICAgIC8qKlxyXG4gICAgICogQ2FsbGVkIGJ5IEFwcC5kZWxldGUoKSAtIGJ1dCBiZWZvcmUgYW55IHNlcnZpY2VzIGFzc29jaWF0ZWQgd2l0aCB0aGUgQXBwXHJcbiAgICAgKiBhcmUgZGVsZXRlZC5cclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gcmVtb3ZlQXBwKG5hbWUpIHtcclxuICAgICAgICBkZWxldGUgYXBwc1tuYW1lXTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogR2V0IHRoZSBBcHAgb2JqZWN0IGZvciBhIGdpdmVuIG5hbWUgKG9yIERFRkFVTFQpLlxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBhcHAobmFtZSkge1xyXG4gICAgICAgIG5hbWUgPSBuYW1lIHx8IERFRkFVTFRfRU5UUllfTkFNRTtcclxuICAgICAgICBpZiAoIXV0aWwuY29udGFpbnMoYXBwcywgbmFtZSkpIHtcclxuICAgICAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJuby1hcHBcIiAvKiBOT19BUFAgKi8sIHsgYXBwTmFtZTogbmFtZSB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGFwcHNbbmFtZV07XHJcbiAgICB9XHJcbiAgICAvLyBAdHMtaWdub3JlXHJcbiAgICBhcHBbJ0FwcCddID0gZmlyZWJhc2VBcHBJbXBsO1xyXG4gICAgZnVuY3Rpb24gaW5pdGlhbGl6ZUFwcChvcHRpb25zLCByYXdDb25maWcpIHtcclxuICAgICAgICBpZiAocmF3Q29uZmlnID09PSB2b2lkIDApIHsgcmF3Q29uZmlnID0ge307IH1cclxuICAgICAgICBpZiAodHlwZW9mIHJhd0NvbmZpZyAhPT0gJ29iamVjdCcgfHwgcmF3Q29uZmlnID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHZhciBuYW1lXzEgPSByYXdDb25maWc7XHJcbiAgICAgICAgICAgIHJhd0NvbmZpZyA9IHsgbmFtZTogbmFtZV8xIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBjb25maWcgPSByYXdDb25maWc7XHJcbiAgICAgICAgaWYgKGNvbmZpZy5uYW1lID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgY29uZmlnLm5hbWUgPSBERUZBVUxUX0VOVFJZX05BTUU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBuYW1lID0gY29uZmlnLm5hbWU7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBuYW1lICE9PSAnc3RyaW5nJyB8fCAhbmFtZSkge1xyXG4gICAgICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImJhZC1hcHAtbmFtZVwiIC8qIEJBRF9BUFBfTkFNRSAqLywge1xyXG4gICAgICAgICAgICAgICAgYXBwTmFtZTogU3RyaW5nKG5hbWUpXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodXRpbC5jb250YWlucyhhcHBzLCBuYW1lKSkge1xyXG4gICAgICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImR1cGxpY2F0ZS1hcHBcIiAvKiBEVVBMSUNBVEVfQVBQICovLCB7IGFwcE5hbWU6IG5hbWUgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBhcHAgPSBuZXcgZmlyZWJhc2VBcHBJbXBsKG9wdGlvbnMsIGNvbmZpZywgbmFtZXNwYWNlKTtcclxuICAgICAgICBhcHBzW25hbWVdID0gYXBwO1xyXG4gICAgICAgIHJldHVybiBhcHA7XHJcbiAgICB9XHJcbiAgICAvKlxyXG4gICAgICogUmV0dXJuIGFuIGFycmF5IG9mIGFsbCB0aGUgbm9uLWRlbGV0ZWQgRmlyZWJhc2VBcHBzLlxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBnZXRBcHBzKCkge1xyXG4gICAgICAgIC8vIE1ha2UgYSBjb3B5IHNvIGNhbGxlciBjYW5ub3QgbXV0YXRlIHRoZSBhcHBzIGxpc3QuXHJcbiAgICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKGFwcHMpLm1hcChmdW5jdGlvbiAobmFtZSkgeyByZXR1cm4gYXBwc1tuYW1lXTsgfSk7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiByZWdpc3RlckNvbXBvbmVudChjb21wb25lbnQpIHtcclxuICAgICAgICB2YXIgZV8xLCBfYTtcclxuICAgICAgICB2YXIgY29tcG9uZW50TmFtZSA9IGNvbXBvbmVudC5uYW1lO1xyXG4gICAgICAgIGlmIChjb21wb25lbnRzLmhhcyhjb21wb25lbnROYW1lKSkge1xyXG4gICAgICAgICAgICBsb2dnZXIuZGVidWcoXCJUaGVyZSB3ZXJlIG11bHRpcGxlIGF0dGVtcHRzIHRvIHJlZ2lzdGVyIGNvbXBvbmVudCBcIiArIGNvbXBvbmVudE5hbWUgKyBcIi5cIik7XHJcbiAgICAgICAgICAgIHJldHVybiBjb21wb25lbnQudHlwZSA9PT0gXCJQVUJMSUNcIiAvKiBQVUJMSUMgKi9cclxuICAgICAgICAgICAgICAgID8gLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuICAgICAgICAgICAgICAgICAgICBuYW1lc3BhY2VbY29tcG9uZW50TmFtZV1cclxuICAgICAgICAgICAgICAgIDogbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29tcG9uZW50cy5zZXQoY29tcG9uZW50TmFtZSwgY29tcG9uZW50KTtcclxuICAgICAgICAvLyBjcmVhdGUgc2VydmljZSBuYW1lc3BhY2UgZm9yIHB1YmxpYyBjb21wb25lbnRzXHJcbiAgICAgICAgaWYgKGNvbXBvbmVudC50eXBlID09PSBcIlBVQkxJQ1wiIC8qIFBVQkxJQyAqLykge1xyXG4gICAgICAgICAgICAvLyBUaGUgU2VydmljZSBuYW1lc3BhY2UgaXMgYW4gYWNjZXNzb3IgZnVuY3Rpb24gLi4uXHJcbiAgICAgICAgICAgIHZhciBzZXJ2aWNlTmFtZXNwYWNlID0gZnVuY3Rpb24gKGFwcEFyZykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGFwcEFyZyA9PT0gdm9pZCAwKSB7IGFwcEFyZyA9IGFwcCgpOyB9XHJcbiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBhcHBBcmdbY29tcG9uZW50TmFtZV0gIT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBJbnZhbGlkIGFyZ3VtZW50LlxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgaGFwcGVucyBpbiB0aGUgZm9sbG93aW5nIGNhc2U6IGZpcmViYXNlLnN0b3JhZ2UoJ2dzOi8nKVxyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiaW52YWxpZC1hcHAtYXJndW1lbnRcIiAvKiBJTlZBTElEX0FQUF9BUkdVTUVOVCAqLywge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhcHBOYW1lOiBjb21wb25lbnROYW1lXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBGb3J3YXJkIHNlcnZpY2UgaW5zdGFuY2UgbG9va3VwIHRvIHRoZSBGaXJlYmFzZUFwcC5cclxuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYXBwQXJnW2NvbXBvbmVudE5hbWVdKCk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIC8vIC4uLiBhbmQgYSBjb250YWluZXIgZm9yIHNlcnZpY2UtbGV2ZWwgcHJvcGVydGllcy5cclxuICAgICAgICAgICAgaWYgKGNvbXBvbmVudC5zZXJ2aWNlUHJvcHMgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgdXRpbC5kZWVwRXh0ZW5kKHNlcnZpY2VOYW1lc3BhY2UsIGNvbXBvbmVudC5zZXJ2aWNlUHJvcHMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbiAgICAgICAgICAgIG5hbWVzcGFjZVtjb21wb25lbnROYW1lXSA9IHNlcnZpY2VOYW1lc3BhY2U7XHJcbiAgICAgICAgICAgIC8vIFBhdGNoIHRoZSBGaXJlYmFzZUFwcEltcGwgcHJvdG90eXBlXHJcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbiAgICAgICAgICAgIGZpcmViYXNlQXBwSW1wbC5wcm90b3R5cGVbY29tcG9uZW50TmFtZV0gPVxyXG4gICAgICAgICAgICAgICAgLy8gVE9ETzogVGhlIGVzbGludCBkaXNhYmxlIGNhbiBiZSByZW1vdmVkIGFuZCB0aGUgJ2lnbm9yZVJlc3RBcmdzJ1xyXG4gICAgICAgICAgICAgICAgLy8gb3B0aW9uIGFkZGVkIHRvIHRoZSBuby1leHBsaWNpdC1hbnkgcnVsZSB3aGVuIEVTbGludCByZWxlYXNlcyBpdC5cclxuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFyZ3MgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBzZXJ2aWNlRnhuID0gdGhpcy5fZ2V0U2VydmljZS5iaW5kKHRoaXMsIGNvbXBvbmVudE5hbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzZXJ2aWNlRnhuLmFwcGx5KHRoaXMsIGNvbXBvbmVudC5tdWx0aXBsZUluc3RhbmNlcyA/IGFyZ3MgOiBbXSk7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAvLyBhZGQgdGhlIGNvbXBvbmVudCB0byBleGlzdGluZyBhcHAgaW5zdGFuY2VzXHJcbiAgICAgICAgICAgIGZvciAodmFyIF9iID0gdHNsaWIuX192YWx1ZXMoT2JqZWN0LmtleXMoYXBwcykpLCBfYyA9IF9iLm5leHQoKTsgIV9jLmRvbmU7IF9jID0gX2IubmV4dCgpKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYXBwTmFtZSA9IF9jLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgYXBwc1thcHBOYW1lXS5fYWRkQ29tcG9uZW50KGNvbXBvbmVudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH1cclxuICAgICAgICBmaW5hbGx5IHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGlmIChfYyAmJiAhX2MuZG9uZSAmJiAoX2EgPSBfYi5yZXR1cm4pKSBfYS5jYWxsKF9iKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBjb21wb25lbnQudHlwZSA9PT0gXCJQVUJMSUNcIiAvKiBQVUJMSUMgKi9cclxuICAgICAgICAgICAgPyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG4gICAgICAgICAgICAgICAgbmFtZXNwYWNlW2NvbXBvbmVudE5hbWVdXHJcbiAgICAgICAgICAgIDogbnVsbDtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIHJlZ2lzdGVyVmVyc2lvbihsaWJyYXJ5S2V5T3JOYW1lLCB2ZXJzaW9uLCB2YXJpYW50KSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIC8vIFRPRE86IFdlIGNhbiB1c2UgdGhpcyBjaGVjayB0byB3aGl0ZWxpc3Qgc3RyaW5ncyB3aGVuL2lmIHdlIHNldCB1cFxyXG4gICAgICAgIC8vIGEgZ29vZCB3aGl0ZWxpc3Qgc3lzdGVtLlxyXG4gICAgICAgIHZhciBsaWJyYXJ5ID0gKF9hID0gUExBVEZPUk1fTE9HX1NUUklOR1tsaWJyYXJ5S2V5T3JOYW1lXSwgKF9hICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IGxpYnJhcnlLZXlPck5hbWUpKTtcclxuICAgICAgICBpZiAodmFyaWFudCkge1xyXG4gICAgICAgICAgICBsaWJyYXJ5ICs9IFwiLVwiICsgdmFyaWFudDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGxpYnJhcnlNaXNtYXRjaCA9IGxpYnJhcnkubWF0Y2goL1xcc3xcXC8vKTtcclxuICAgICAgICB2YXIgdmVyc2lvbk1pc21hdGNoID0gdmVyc2lvbi5tYXRjaCgvXFxzfFxcLy8pO1xyXG4gICAgICAgIGlmIChsaWJyYXJ5TWlzbWF0Y2ggfHwgdmVyc2lvbk1pc21hdGNoKSB7XHJcbiAgICAgICAgICAgIHZhciB3YXJuaW5nID0gW1xyXG4gICAgICAgICAgICAgICAgXCJVbmFibGUgdG8gcmVnaXN0ZXIgbGlicmFyeSBcXFwiXCIgKyBsaWJyYXJ5ICsgXCJcXFwiIHdpdGggdmVyc2lvbiBcXFwiXCIgKyB2ZXJzaW9uICsgXCJcXFwiOlwiXHJcbiAgICAgICAgICAgIF07XHJcbiAgICAgICAgICAgIGlmIChsaWJyYXJ5TWlzbWF0Y2gpIHtcclxuICAgICAgICAgICAgICAgIHdhcm5pbmcucHVzaChcImxpYnJhcnkgbmFtZSBcXFwiXCIgKyBsaWJyYXJ5ICsgXCJcXFwiIGNvbnRhaW5zIGlsbGVnYWwgY2hhcmFjdGVycyAod2hpdGVzcGFjZSBvciBcXFwiL1xcXCIpXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChsaWJyYXJ5TWlzbWF0Y2ggJiYgdmVyc2lvbk1pc21hdGNoKSB7XHJcbiAgICAgICAgICAgICAgICB3YXJuaW5nLnB1c2goJ2FuZCcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh2ZXJzaW9uTWlzbWF0Y2gpIHtcclxuICAgICAgICAgICAgICAgIHdhcm5pbmcucHVzaChcInZlcnNpb24gbmFtZSBcXFwiXCIgKyB2ZXJzaW9uICsgXCJcXFwiIGNvbnRhaW5zIGlsbGVnYWwgY2hhcmFjdGVycyAod2hpdGVzcGFjZSBvciBcXFwiL1xcXCIpXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGxvZ2dlci53YXJuKHdhcm5pbmcuam9pbignICcpKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZWdpc3RlckNvbXBvbmVudChuZXcgY29tcG9uZW50LkNvbXBvbmVudChsaWJyYXJ5ICsgXCItdmVyc2lvblwiLCBmdW5jdGlvbiAoKSB7IHJldHVybiAoeyBsaWJyYXJ5OiBsaWJyYXJ5LCB2ZXJzaW9uOiB2ZXJzaW9uIH0pOyB9LCBcIlZFUlNJT05cIiAvKiBWRVJTSU9OICovKSk7XHJcbiAgICB9XHJcbiAgICAvLyBNYXAgdGhlIHJlcXVlc3RlZCBzZXJ2aWNlIHRvIGEgcmVnaXN0ZXJlZCBzZXJ2aWNlIG5hbWVcclxuICAgIC8vICh1c2VkIHRvIG1hcCBhdXRoIHRvIHNlcnZlckF1dGggc2VydmljZSB3aGVuIG5lZWRlZCkuXHJcbiAgICBmdW5jdGlvbiB1c2VBc1NlcnZpY2UoYXBwLCBuYW1lKSB7XHJcbiAgICAgICAgaWYgKG5hbWUgPT09ICdzZXJ2ZXJBdXRoJykge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIHVzZVNlcnZpY2UgPSBuYW1lO1xyXG4gICAgICAgIHJldHVybiB1c2VTZXJ2aWNlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG5hbWVzcGFjZTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFJldHVybiBhIGZpcmViYXNlIG5hbWVzcGFjZSBvYmplY3QuXHJcbiAqXHJcbiAqIEluIHByb2R1Y3Rpb24sIHRoaXMgd2lsbCBiZSBjYWxsZWQgZXhhY3RseSBvbmNlIGFuZCB0aGUgcmVzdWx0XHJcbiAqIGFzc2lnbmVkIHRvIHRoZSAnZmlyZWJhc2UnIGdsb2JhbC4gIEl0IG1heSBiZSBjYWxsZWQgbXVsdGlwbGUgdGltZXNcclxuICogaW4gdW5pdCB0ZXN0cy5cclxuICovXHJcbmZ1bmN0aW9uIGNyZWF0ZUZpcmViYXNlTmFtZXNwYWNlKCkge1xyXG4gICAgdmFyIG5hbWVzcGFjZSA9IGNyZWF0ZUZpcmViYXNlTmFtZXNwYWNlQ29yZShGaXJlYmFzZUFwcEltcGwpO1xyXG4gICAgbmFtZXNwYWNlLklOVEVSTkFMID0gdHNsaWIuX19hc3NpZ24odHNsaWIuX19hc3NpZ24oe30sIG5hbWVzcGFjZS5JTlRFUk5BTCksIHsgY3JlYXRlRmlyZWJhc2VOYW1lc3BhY2U6IGNyZWF0ZUZpcmViYXNlTmFtZXNwYWNlLFxyXG4gICAgICAgIGV4dGVuZE5hbWVzcGFjZTogZXh0ZW5kTmFtZXNwYWNlLFxyXG4gICAgICAgIGNyZWF0ZVN1YnNjcmliZTogdXRpbC5jcmVhdGVTdWJzY3JpYmUsXHJcbiAgICAgICAgRXJyb3JGYWN0b3J5OiB1dGlsLkVycm9yRmFjdG9yeSxcclxuICAgICAgICBkZWVwRXh0ZW5kOiB1dGlsLmRlZXBFeHRlbmQgfSk7XHJcbiAgICAvKipcclxuICAgICAqIFBhdGNoIHRoZSB0b3AtbGV2ZWwgZmlyZWJhc2UgbmFtZXNwYWNlIHdpdGggYWRkaXRpb25hbCBwcm9wZXJ0aWVzLlxyXG4gICAgICpcclxuICAgICAqIGZpcmViYXNlLklOVEVSTkFMLmV4dGVuZE5hbWVzcGFjZSgpXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIGV4dGVuZE5hbWVzcGFjZShwcm9wcykge1xyXG4gICAgICAgIHV0aWwuZGVlcEV4dGVuZChuYW1lc3BhY2UsIHByb3BzKTtcclxuICAgIH1cclxuICAgIHJldHVybiBuYW1lc3BhY2U7XHJcbn1cclxudmFyIGZpcmViYXNlID0gY3JlYXRlRmlyZWJhc2VOYW1lc3BhY2UoKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnZhciBQbGF0Zm9ybUxvZ2dlclNlcnZpY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBQbGF0Zm9ybUxvZ2dlclNlcnZpY2UoY29udGFpbmVyKSB7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXI7XHJcbiAgICB9XHJcbiAgICAvLyBJbiBpbml0aWFsIGltcGxlbWVudGF0aW9uLCB0aGlzIHdpbGwgYmUgY2FsbGVkIGJ5IGluc3RhbGxhdGlvbnMgb25cclxuICAgIC8vIGF1dGggdG9rZW4gcmVmcmVzaCwgYW5kIGluc3RhbGxhdGlvbnMgd2lsbCBzZW5kIHRoaXMgc3RyaW5nLlxyXG4gICAgUGxhdGZvcm1Mb2dnZXJTZXJ2aWNlLnByb3RvdHlwZS5nZXRQbGF0Zm9ybUluZm9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHByb3ZpZGVycyA9IHRoaXMuY29udGFpbmVyLmdldFByb3ZpZGVycygpO1xyXG4gICAgICAgIC8vIExvb3AgdGhyb3VnaCBwcm92aWRlcnMgYW5kIGdldCBsaWJyYXJ5L3ZlcnNpb24gcGFpcnMgZnJvbSBhbnkgdGhhdCBhcmVcclxuICAgICAgICAvLyB2ZXJzaW9uIGNvbXBvbmVudHMuXHJcbiAgICAgICAgcmV0dXJuIHByb3ZpZGVyc1xyXG4gICAgICAgICAgICAubWFwKGZ1bmN0aW9uIChwcm92aWRlcikge1xyXG4gICAgICAgICAgICBpZiAoaXNWZXJzaW9uU2VydmljZVByb3ZpZGVyKHByb3ZpZGVyKSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHNlcnZpY2UgPSBwcm92aWRlci5nZXRJbW1lZGlhdGUoKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBzZXJ2aWNlLmxpYnJhcnkgKyBcIi9cIiArIHNlcnZpY2UudmVyc2lvbjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLmZpbHRlcihmdW5jdGlvbiAobG9nU3RyaW5nKSB7IHJldHVybiBsb2dTdHJpbmc7IH0pXHJcbiAgICAgICAgICAgIC5qb2luKCcgJyk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFBsYXRmb3JtTG9nZ2VyU2VydmljZTtcclxufSgpKTtcclxuLyoqXHJcbiAqXHJcbiAqIEBwYXJhbSBwcm92aWRlciBjaGVjayBpZiB0aGlzIHByb3ZpZGVyIHByb3ZpZGVzIGEgVmVyc2lvblNlcnZpY2VcclxuICpcclxuICogTk9URTogVXNpbmcgUHJvdmlkZXI8J2FwcC12ZXJzaW9uJz4gaXMgYSBoYWNrIHRvIGluZGljYXRlIHRoYXQgdGhlIHByb3ZpZGVyXHJcbiAqIHByb3ZpZGVzIFZlcnNpb25TZXJ2aWNlLiBUaGUgcHJvdmlkZXIgaXMgbm90IG5lY2Vzc2FyaWx5IGEgJ2FwcC12ZXJzaW9uJ1xyXG4gKiBwcm92aWRlci5cclxuICovXHJcbmZ1bmN0aW9uIGlzVmVyc2lvblNlcnZpY2VQcm92aWRlcihwcm92aWRlcikge1xyXG4gICAgdmFyIF9hO1xyXG4gICAgdmFyIGNvbXBvbmVudCA9IHByb3ZpZGVyLmdldENvbXBvbmVudCgpO1xyXG4gICAgcmV0dXJuICgoX2EgPSBjb21wb25lbnQpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS50eXBlKSA9PT0gXCJWRVJTSU9OXCIgLyogVkVSU0lPTiAqLztcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gcmVnaXN0ZXJDb3JlQ29tcG9uZW50cyhmaXJlYmFzZSwgdmFyaWFudCkge1xyXG4gICAgZmlyZWJhc2UuSU5URVJOQUwucmVnaXN0ZXJDb21wb25lbnQobmV3IGNvbXBvbmVudC5Db21wb25lbnQoJ3BsYXRmb3JtLWxvZ2dlcicsIGZ1bmN0aW9uIChjb250YWluZXIpIHsgcmV0dXJuIG5ldyBQbGF0Zm9ybUxvZ2dlclNlcnZpY2UoY29udGFpbmVyKTsgfSwgXCJQUklWQVRFXCIgLyogUFJJVkFURSAqLykpO1xyXG4gICAgLy8gUmVnaXN0ZXIgYGFwcGAgcGFja2FnZS5cclxuICAgIGZpcmViYXNlLnJlZ2lzdGVyVmVyc2lvbihuYW1lLCB2ZXJzaW9uLCB2YXJpYW50KTtcclxuICAgIC8vIFJlZ2lzdGVyIHBsYXRmb3JtIFNESyBpZGVudGlmaWVyIChubyB2ZXJzaW9uKS5cclxuICAgIGZpcmViYXNlLnJlZ2lzdGVyVmVyc2lvbignZmlyZS1qcycsICcnKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLy8gRmlyZWJhc2UgTGl0ZSBkZXRlY3Rpb25cclxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuaWYgKHV0aWwuaXNCcm93c2VyKCkgJiYgc2VsZi5maXJlYmFzZSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICBsb2dnZXIud2FybihcIlxcbiAgICBXYXJuaW5nOiBGaXJlYmFzZSBpcyBhbHJlYWR5IGRlZmluZWQgaW4gdGhlIGdsb2JhbCBzY29wZS4gUGxlYXNlIG1ha2Ugc3VyZVxcbiAgICBGaXJlYmFzZSBsaWJyYXJ5IGlzIG9ubHkgbG9hZGVkIG9uY2UuXFxuICBcIik7XHJcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmVcclxuICAgIHZhciBzZGtWZXJzaW9uID0gc2VsZi5maXJlYmFzZS5TREtfVkVSU0lPTjtcclxuICAgIGlmIChzZGtWZXJzaW9uICYmIHNka1ZlcnNpb24uaW5kZXhPZignTElURScpID49IDApIHtcclxuICAgICAgICBsb2dnZXIud2FybihcIlxcbiAgICBXYXJuaW5nOiBZb3UgYXJlIHRyeWluZyB0byBsb2FkIEZpcmViYXNlIHdoaWxlIHVzaW5nIEZpcmViYXNlIFBlcmZvcm1hbmNlIHN0YW5kYWxvbmUgc2NyaXB0LlxcbiAgICBZb3Ugc2hvdWxkIGxvYWQgRmlyZWJhc2UgUGVyZm9ybWFuY2Ugd2l0aCB0aGlzIGluc3RhbmNlIG9mIEZpcmViYXNlIHRvIGF2b2lkIGxvYWRpbmcgZHVwbGljYXRlIGNvZGUuXFxuICAgIFwiKTtcclxuICAgIH1cclxufVxyXG52YXIgaW5pdGlhbGl6ZUFwcCA9IGZpcmViYXNlLmluaXRpYWxpemVBcHA7XHJcbi8vIFRPRE86IFRoaXMgZGlzYWJsZSBjYW4gYmUgcmVtb3ZlZCBhbmQgdGhlICdpZ25vcmVSZXN0QXJncycgb3B0aW9uIGFkZGVkIHRvXHJcbi8vIHRoZSBuby1leHBsaWNpdC1hbnkgcnVsZSB3aGVuIEVTbGludCByZWxlYXNlcyBpdC5cclxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuZmlyZWJhc2UuaW5pdGlhbGl6ZUFwcCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBhcmdzID0gW107XHJcbiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzW19pXTtcclxuICAgIH1cclxuICAgIC8vIEVudmlyb25tZW50IGNoZWNrIGJlZm9yZSBpbml0aWFsaXppbmcgYXBwXHJcbiAgICAvLyBEbyB0aGUgY2hlY2sgaW4gaW5pdGlhbGl6ZUFwcCwgc28gcGVvcGxlIGhhdmUgYSBjaGFuY2UgdG8gZGlzYWJsZSBpdCBieSBzZXR0aW5nIGxvZ0xldmVsXHJcbiAgICAvLyBpbiBAZmlyZWJhc2UvbG9nZ2VyXHJcbiAgICBpZiAodXRpbC5pc05vZGUoKSkge1xyXG4gICAgICAgIGxvZ2dlci53YXJuKFwiXFxuICAgICAgV2FybmluZzogVGhpcyBpcyBhIGJyb3dzZXItdGFyZ2V0ZWQgRmlyZWJhc2UgYnVuZGxlIGJ1dCBpdCBhcHBlYXJzIGl0IGlzIGJlaW5nXFxuICAgICAgcnVuIGluIGEgTm9kZSBlbnZpcm9ubWVudC4gIElmIHJ1bm5pbmcgaW4gYSBOb2RlIGVudmlyb25tZW50LCBtYWtlIHN1cmUgeW91XFxuICAgICAgYXJlIHVzaW5nIHRoZSBidW5kbGUgc3BlY2lmaWVkIGJ5IHRoZSBcXFwibWFpblxcXCIgZmllbGQgaW4gcGFja2FnZS5qc29uLlxcbiAgICAgIFxcbiAgICAgIElmIHlvdSBhcmUgdXNpbmcgV2VicGFjaywgeW91IGNhbiBzcGVjaWZ5IFxcXCJtYWluXFxcIiBhcyB0aGUgZmlyc3QgaXRlbSBpblxcbiAgICAgIFxcXCJyZXNvbHZlLm1haW5GaWVsZHNcXFwiOlxcbiAgICAgIGh0dHBzOi8vd2VicGFjay5qcy5vcmcvY29uZmlndXJhdGlvbi9yZXNvbHZlLyNyZXNvbHZlbWFpbmZpZWxkc1xcbiAgICAgIFxcbiAgICAgIElmIHVzaW5nIFJvbGx1cCwgdXNlIHRoZSByb2xsdXAtcGx1Z2luLW5vZGUtcmVzb2x2ZSBwbHVnaW4gYW5kIHNwZWNpZnkgXFxcIm1haW5cXFwiXFxuICAgICAgYXMgdGhlIGZpcnN0IGl0ZW0gaW4gXFxcIm1haW5GaWVsZHNcXFwiLCBlLmcuIFsnbWFpbicsICdtb2R1bGUnXS5cXG4gICAgICBodHRwczovL2dpdGh1Yi5jb20vcm9sbHVwL3JvbGx1cC1wbHVnaW4tbm9kZS1yZXNvbHZlXFxuICAgICAgXCIpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGluaXRpYWxpemVBcHAuYXBwbHkodW5kZWZpbmVkLCBhcmdzKTtcclxufTtcclxudmFyIGZpcmViYXNlJDEgPSBmaXJlYmFzZTtcclxucmVnaXN0ZXJDb3JlQ29tcG9uZW50cyhmaXJlYmFzZSQxKTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gZmlyZWJhc2UkMTtcbmV4cG9ydHMuZmlyZWJhc2UgPSBmaXJlYmFzZSQxO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguY2pzLmpzLm1hcFxuIiwiJ3VzZSBzdHJpY3QnO1xuXG5mdW5jdGlvbiBfaW50ZXJvcERlZmF1bHQgKGV4KSB7IHJldHVybiAoZXggJiYgKHR5cGVvZiBleCA9PT0gJ29iamVjdCcpICYmICdkZWZhdWx0JyBpbiBleCkgPyBleFsnZGVmYXVsdCddIDogZXg7IH1cblxudmFyIGZpcmViYXNlID0gX2ludGVyb3BEZWZhdWx0KHJlcXVpcmUoJ0BmaXJlYmFzZS9hcHAnKSk7XG5cbnZhciBuYW1lID0gXCJmaXJlYmFzZVwiO1xudmFyIHZlcnNpb24gPSBcIjcuNi4xXCI7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5maXJlYmFzZS5yZWdpc3RlclZlcnNpb24obmFtZSwgdmVyc2lvbiwgJ2FwcCcpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZpcmViYXNlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguY2pzLmpzLm1hcFxuIiwidmFyIGc7XG5cbi8vIFRoaXMgd29ya3MgaW4gbm9uLXN0cmljdCBtb2RlXG5nID0gKGZ1bmN0aW9uKCkge1xuXHRyZXR1cm4gdGhpcztcbn0pKCk7XG5cbnRyeSB7XG5cdC8vIFRoaXMgd29ya3MgaWYgZXZhbCBpcyBhbGxvd2VkIChzZWUgQ1NQKVxuXHRnID0gZyB8fCBuZXcgRnVuY3Rpb24oXCJyZXR1cm4gdGhpc1wiKSgpO1xufSBjYXRjaCAoZSkge1xuXHQvLyBUaGlzIHdvcmtzIGlmIHRoZSB3aW5kb3cgcmVmZXJlbmNlIGlzIGF2YWlsYWJsZVxuXHRpZiAodHlwZW9mIHdpbmRvdyA9PT0gXCJvYmplY3RcIikgZyA9IHdpbmRvdztcbn1cblxuLy8gZyBjYW4gc3RpbGwgYmUgdW5kZWZpbmVkLCBidXQgbm90aGluZyB0byBkbyBhYm91dCBpdC4uLlxuLy8gV2UgcmV0dXJuIHVuZGVmaW5lZCwgaW5zdGVhZCBvZiBub3RoaW5nIGhlcmUsIHNvIGl0J3Ncbi8vIGVhc2llciB0byBoYW5kbGUgdGhpcyBjYXNlLiBpZighZ2xvYmFsKSB7IC4uLn1cblxubW9kdWxlLmV4cG9ydHMgPSBnO1xuIiwiLyohICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbkNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG5MaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2VcclxudGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGVcclxuTGljZW5zZSBhdCBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuXHJcblRISVMgQ09ERSBJUyBQUk9WSURFRCBPTiBBTiAqQVMgSVMqIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcclxuS0lORCwgRUlUSEVSIEVYUFJFU1MgT1IgSU1QTElFRCwgSU5DTFVESU5HIFdJVEhPVVQgTElNSVRBVElPTiBBTlkgSU1QTElFRFxyXG5XQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgVElUTEUsIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLFxyXG5NRVJDSEFOVEFCTElUWSBPUiBOT04tSU5GUklOR0VNRU5ULlxyXG5cclxuU2VlIHRoZSBBcGFjaGUgVmVyc2lvbiAyLjAgTGljZW5zZSBmb3Igc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zXHJcbmFuZCBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi9cclxuXHJcbmZ1bmN0aW9uIF9fc3ByZWFkQXJyYXlzKCkge1xyXG4gICAgZm9yICh2YXIgcyA9IDAsIGkgPSAwLCBpbCA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBpbDsgaSsrKSBzICs9IGFyZ3VtZW50c1tpXS5sZW5ndGg7XHJcbiAgICBmb3IgKHZhciByID0gQXJyYXkocyksIGsgPSAwLCBpID0gMDsgaSA8IGlsOyBpKyspXHJcbiAgICAgICAgZm9yICh2YXIgYSA9IGFyZ3VtZW50c1tpXSwgaiA9IDAsIGpsID0gYS5sZW5ndGg7IGogPCBqbDsgaisrLCBrKyspXHJcbiAgICAgICAgICAgIHJba10gPSBhW2pdO1xyXG4gICAgcmV0dXJuIHI7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBBIGNvbnRhaW5lciBmb3IgYWxsIG9mIHRoZSBMb2dnZXIgaW5zdGFuY2VzXHJcbiAqL1xyXG52YXIgaW5zdGFuY2VzID0gW107XHJcbi8qKlxyXG4gKiBUaGUgSlMgU0RLIHN1cHBvcnRzIDUgbG9nIGxldmVscyBhbmQgYWxzbyBhbGxvd3MgYSB1c2VyIHRoZSBhYmlsaXR5IHRvXHJcbiAqIHNpbGVuY2UgdGhlIGxvZ3MgYWx0b2dldGhlci5cclxuICpcclxuICogVGhlIG9yZGVyIGlzIGEgZm9sbG93czpcclxuICogREVCVUcgPCBWRVJCT1NFIDwgSU5GTyA8IFdBUk4gPCBFUlJPUlxyXG4gKlxyXG4gKiBBbGwgb2YgdGhlIGxvZyB0eXBlcyBhYm92ZSB0aGUgY3VycmVudCBsb2cgbGV2ZWwgd2lsbCBiZSBjYXB0dXJlZCAoaS5lLiBpZlxyXG4gKiB5b3Ugc2V0IHRoZSBsb2cgbGV2ZWwgdG8gYElORk9gLCBlcnJvcnMgd2lsbCBzdGlsbCBiZSBsb2dnZWQsIGJ1dCBgREVCVUdgIGFuZFxyXG4gKiBgVkVSQk9TRWAgbG9ncyB3aWxsIG5vdClcclxuICovXHJcbnZhciBMb2dMZXZlbDtcclxuKGZ1bmN0aW9uIChMb2dMZXZlbCkge1xyXG4gICAgTG9nTGV2ZWxbTG9nTGV2ZWxbXCJERUJVR1wiXSA9IDBdID0gXCJERUJVR1wiO1xyXG4gICAgTG9nTGV2ZWxbTG9nTGV2ZWxbXCJWRVJCT1NFXCJdID0gMV0gPSBcIlZFUkJPU0VcIjtcclxuICAgIExvZ0xldmVsW0xvZ0xldmVsW1wiSU5GT1wiXSA9IDJdID0gXCJJTkZPXCI7XHJcbiAgICBMb2dMZXZlbFtMb2dMZXZlbFtcIldBUk5cIl0gPSAzXSA9IFwiV0FSTlwiO1xyXG4gICAgTG9nTGV2ZWxbTG9nTGV2ZWxbXCJFUlJPUlwiXSA9IDRdID0gXCJFUlJPUlwiO1xyXG4gICAgTG9nTGV2ZWxbTG9nTGV2ZWxbXCJTSUxFTlRcIl0gPSA1XSA9IFwiU0lMRU5UXCI7XHJcbn0pKExvZ0xldmVsIHx8IChMb2dMZXZlbCA9IHt9KSk7XHJcbi8qKlxyXG4gKiBUaGUgZGVmYXVsdCBsb2cgbGV2ZWxcclxuICovXHJcbnZhciBkZWZhdWx0TG9nTGV2ZWwgPSBMb2dMZXZlbC5JTkZPO1xyXG4vKipcclxuICogVGhlIGRlZmF1bHQgbG9nIGhhbmRsZXIgd2lsbCBmb3J3YXJkIERFQlVHLCBWRVJCT1NFLCBJTkZPLCBXQVJOLCBhbmQgRVJST1JcclxuICogbWVzc2FnZXMgb24gdG8gdGhlaXIgY29ycmVzcG9uZGluZyBjb25zb2xlIGNvdW50ZXJwYXJ0cyAoaWYgdGhlIGxvZyBtZXRob2RcclxuICogaXMgc3VwcG9ydGVkIGJ5IHRoZSBjdXJyZW50IGxvZyBsZXZlbClcclxuICovXHJcbnZhciBkZWZhdWx0TG9nSGFuZGxlciA9IGZ1bmN0aW9uIChpbnN0YW5jZSwgbG9nVHlwZSkge1xyXG4gICAgdmFyIGFyZ3MgPSBbXTtcclxuICAgIGZvciAodmFyIF9pID0gMjsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgYXJnc1tfaSAtIDJdID0gYXJndW1lbnRzW19pXTtcclxuICAgIH1cclxuICAgIGlmIChsb2dUeXBlIDwgaW5zdGFuY2UubG9nTGV2ZWwpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICB2YXIgbm93ID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xyXG4gICAgc3dpdGNoIChsb2dUeXBlKSB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQnkgZGVmYXVsdCwgYGNvbnNvbGUuZGVidWdgIGlzIG5vdCBkaXNwbGF5ZWQgaW4gdGhlIGRldmVsb3BlciBjb25zb2xlIChpblxyXG4gICAgICAgICAqIGNocm9tZSkuIFRvIGF2b2lkIGZvcmNpbmcgdXNlcnMgdG8gaGF2ZSB0byBvcHQtaW4gdG8gdGhlc2UgbG9ncyB0d2ljZVxyXG4gICAgICAgICAqIChpLmUuIG9uY2UgZm9yIGZpcmViYXNlLCBhbmQgb25jZSBpbiB0aGUgY29uc29sZSksIHdlIGFyZSBzZW5kaW5nIGBERUJVR2BcclxuICAgICAgICAgKiBsb2dzIHRvIHRoZSBgY29uc29sZS5sb2dgIGZ1bmN0aW9uLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGNhc2UgTG9nTGV2ZWwuREVCVUc6XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nLmFwcGx5KGNvbnNvbGUsIF9fc3ByZWFkQXJyYXlzKFtcIltcIiArIG5vdyArIFwiXSAgXCIgKyBpbnN0YW5jZS5uYW1lICsgXCI6XCJdLCBhcmdzKSk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgTG9nTGV2ZWwuVkVSQk9TRTpcclxuICAgICAgICAgICAgY29uc29sZS5sb2cuYXBwbHkoY29uc29sZSwgX19zcHJlYWRBcnJheXMoW1wiW1wiICsgbm93ICsgXCJdICBcIiArIGluc3RhbmNlLm5hbWUgKyBcIjpcIl0sIGFyZ3MpKTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBMb2dMZXZlbC5JTkZPOlxyXG4gICAgICAgICAgICBjb25zb2xlLmluZm8uYXBwbHkoY29uc29sZSwgX19zcHJlYWRBcnJheXMoW1wiW1wiICsgbm93ICsgXCJdICBcIiArIGluc3RhbmNlLm5hbWUgKyBcIjpcIl0sIGFyZ3MpKTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBMb2dMZXZlbC5XQVJOOlxyXG4gICAgICAgICAgICBjb25zb2xlLndhcm4uYXBwbHkoY29uc29sZSwgX19zcHJlYWRBcnJheXMoW1wiW1wiICsgbm93ICsgXCJdICBcIiArIGluc3RhbmNlLm5hbWUgKyBcIjpcIl0sIGFyZ3MpKTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBMb2dMZXZlbC5FUlJPUjpcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvci5hcHBseShjb25zb2xlLCBfX3NwcmVhZEFycmF5cyhbXCJbXCIgKyBub3cgKyBcIl0gIFwiICsgaW5zdGFuY2UubmFtZSArIFwiOlwiXSwgYXJncykpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJBdHRlbXB0ZWQgdG8gbG9nIGEgbWVzc2FnZSB3aXRoIGFuIGludmFsaWQgbG9nVHlwZSAodmFsdWU6IFwiICsgbG9nVHlwZSArIFwiKVwiKTtcclxuICAgIH1cclxufTtcclxudmFyIExvZ2dlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIC8qKlxyXG4gICAgICogR2l2ZXMgeW91IGFuIGluc3RhbmNlIG9mIGEgTG9nZ2VyIHRvIGNhcHR1cmUgbWVzc2FnZXMgYWNjb3JkaW5nIHRvXHJcbiAgICAgKiBGaXJlYmFzZSdzIGxvZ2dpbmcgc2NoZW1lLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBuYW1lIFRoZSBuYW1lIHRoYXQgdGhlIGxvZ3Mgd2lsbCBiZSBhc3NvY2lhdGVkIHdpdGhcclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gTG9nZ2VyKG5hbWUpIHtcclxuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRoZSBsb2cgbGV2ZWwgb2YgdGhlIGdpdmVuIExvZ2dlciBpbnN0YW5jZS5cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLl9sb2dMZXZlbCA9IGRlZmF1bHRMb2dMZXZlbDtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBUaGUgbG9nIGhhbmRsZXIgZm9yIHRoZSBMb2dnZXIgaW5zdGFuY2UuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5fbG9nSGFuZGxlciA9IGRlZmF1bHRMb2dIYW5kbGVyO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENhcHR1cmUgdGhlIGN1cnJlbnQgaW5zdGFuY2UgZm9yIGxhdGVyIHVzZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGluc3RhbmNlcy5wdXNoKHRoaXMpO1xyXG4gICAgfVxyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KExvZ2dlci5wcm90b3R5cGUsIFwibG9nTGV2ZWxcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fbG9nTGV2ZWw7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWwpIHtcclxuICAgICAgICAgICAgaWYgKCEodmFsIGluIExvZ0xldmVsKSkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignSW52YWxpZCB2YWx1ZSBhc3NpZ25lZCB0byBgbG9nTGV2ZWxgJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5fbG9nTGV2ZWwgPSB2YWw7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTG9nZ2VyLnByb3RvdHlwZSwgXCJsb2dIYW5kbGVyXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2xvZ0hhbmRsZXI7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWwpIHtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWwgIT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1ZhbHVlIGFzc2lnbmVkIHRvIGBsb2dIYW5kbGVyYCBtdXN0IGJlIGEgZnVuY3Rpb24nKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLl9sb2dIYW5kbGVyID0gdmFsO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgZnVuY3Rpb25zIGJlbG93IGFyZSBhbGwgYmFzZWQgb24gdGhlIGBjb25zb2xlYCBpbnRlcmZhY2VcclxuICAgICAqL1xyXG4gICAgTG9nZ2VyLnByb3RvdHlwZS5kZWJ1ZyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgYXJncyA9IFtdO1xyXG4gICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzW19pXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fbG9nSGFuZGxlci5hcHBseSh0aGlzLCBfX3NwcmVhZEFycmF5cyhbdGhpcywgTG9nTGV2ZWwuREVCVUddLCBhcmdzKSk7XHJcbiAgICB9O1xyXG4gICAgTG9nZ2VyLnByb3RvdHlwZS5sb2cgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGFyZ3MgPSBbXTtcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICBhcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX2xvZ0hhbmRsZXIuYXBwbHkodGhpcywgX19zcHJlYWRBcnJheXMoW3RoaXMsIExvZ0xldmVsLlZFUkJPU0VdLCBhcmdzKSk7XHJcbiAgICB9O1xyXG4gICAgTG9nZ2VyLnByb3RvdHlwZS5pbmZvID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBhcmdzID0gW107XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9sb2dIYW5kbGVyLmFwcGx5KHRoaXMsIF9fc3ByZWFkQXJyYXlzKFt0aGlzLCBMb2dMZXZlbC5JTkZPXSwgYXJncykpO1xyXG4gICAgfTtcclxuICAgIExvZ2dlci5wcm90b3R5cGUud2FybiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgYXJncyA9IFtdO1xyXG4gICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzW19pXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fbG9nSGFuZGxlci5hcHBseSh0aGlzLCBfX3NwcmVhZEFycmF5cyhbdGhpcywgTG9nTGV2ZWwuV0FSTl0sIGFyZ3MpKTtcclxuICAgIH07XHJcbiAgICBMb2dnZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBhcmdzID0gW107XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9sb2dIYW5kbGVyLmFwcGx5KHRoaXMsIF9fc3ByZWFkQXJyYXlzKFt0aGlzLCBMb2dMZXZlbC5FUlJPUl0sIGFyZ3MpKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gTG9nZ2VyO1xyXG59KCkpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gc2V0TG9nTGV2ZWwobGV2ZWwpIHtcclxuICAgIGluc3RhbmNlcy5mb3JFYWNoKGZ1bmN0aW9uIChpbnN0KSB7XHJcbiAgICAgICAgaW5zdC5sb2dMZXZlbCA9IGxldmVsO1xyXG4gICAgfSk7XHJcbn1cblxuZXhwb3J0IHsgTG9nTGV2ZWwsIExvZ2dlciwgc2V0TG9nTGV2ZWwgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmVzbS5qcy5tYXBcbiIsIihmdW5jdGlvbiAoZ2xvYmFsLCBmYWN0b3J5KSB7XG4gIHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyA/IGZhY3RvcnkoZXhwb3J0cykgOlxuICB0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQgPyBkZWZpbmUoWydleHBvcnRzJ10sIGZhY3RvcnkpIDpcbiAgKGdsb2JhbCA9IGdsb2JhbCB8fCBzZWxmLCBmYWN0b3J5KGdsb2JhbC5pZGIgPSB7fSkpO1xufSh0aGlzLCBmdW5jdGlvbiAoZXhwb3J0cykgeyAndXNlIHN0cmljdCc7XG5cbiAgZnVuY3Rpb24gdG9BcnJheShhcnIpIHtcbiAgICByZXR1cm4gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJyKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHByb21pc2lmeVJlcXVlc3QocmVxdWVzdCkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgIHJlcXVlc3Qub25zdWNjZXNzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJlc29sdmUocmVxdWVzdC5yZXN1bHQpO1xuICAgICAgfTtcblxuICAgICAgcmVxdWVzdC5vbmVycm9yID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJlamVjdChyZXF1ZXN0LmVycm9yKTtcbiAgICAgIH07XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBwcm9taXNpZnlSZXF1ZXN0Q2FsbChvYmosIG1ldGhvZCwgYXJncykge1xuICAgIHZhciByZXF1ZXN0O1xuICAgIHZhciBwID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICByZXF1ZXN0ID0gb2JqW21ldGhvZF0uYXBwbHkob2JqLCBhcmdzKTtcbiAgICAgIHByb21pc2lmeVJlcXVlc3QocmVxdWVzdCkudGhlbihyZXNvbHZlLCByZWplY3QpO1xuICAgIH0pO1xuXG4gICAgcC5yZXF1ZXN0ID0gcmVxdWVzdDtcbiAgICByZXR1cm4gcDtcbiAgfVxuXG4gIGZ1bmN0aW9uIHByb21pc2lmeUN1cnNvclJlcXVlc3RDYWxsKG9iaiwgbWV0aG9kLCBhcmdzKSB7XG4gICAgdmFyIHAgPSBwcm9taXNpZnlSZXF1ZXN0Q2FsbChvYmosIG1ldGhvZCwgYXJncyk7XG4gICAgcmV0dXJuIHAudGhlbihmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgaWYgKCF2YWx1ZSkgcmV0dXJuO1xuICAgICAgcmV0dXJuIG5ldyBDdXJzb3IodmFsdWUsIHAucmVxdWVzdCk7XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBwcm94eVByb3BlcnRpZXMoUHJveHlDbGFzcywgdGFyZ2V0UHJvcCwgcHJvcGVydGllcykge1xuICAgIHByb3BlcnRpZXMuZm9yRWFjaChmdW5jdGlvbihwcm9wKSB7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoUHJveHlDbGFzcy5wcm90b3R5cGUsIHByb3AsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICByZXR1cm4gdGhpc1t0YXJnZXRQcm9wXVtwcm9wXTtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbih2YWwpIHtcbiAgICAgICAgICB0aGlzW3RhcmdldFByb3BdW3Byb3BdID0gdmFsO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHByb3h5UmVxdWVzdE1ldGhvZHMoUHJveHlDbGFzcywgdGFyZ2V0UHJvcCwgQ29uc3RydWN0b3IsIHByb3BlcnRpZXMpIHtcbiAgICBwcm9wZXJ0aWVzLmZvckVhY2goZnVuY3Rpb24ocHJvcCkge1xuICAgICAgaWYgKCEocHJvcCBpbiBDb25zdHJ1Y3Rvci5wcm90b3R5cGUpKSByZXR1cm47XG4gICAgICBQcm94eUNsYXNzLnByb3RvdHlwZVtwcm9wXSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gcHJvbWlzaWZ5UmVxdWVzdENhbGwodGhpc1t0YXJnZXRQcm9wXSwgcHJvcCwgYXJndW1lbnRzKTtcbiAgICAgIH07XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBwcm94eU1ldGhvZHMoUHJveHlDbGFzcywgdGFyZ2V0UHJvcCwgQ29uc3RydWN0b3IsIHByb3BlcnRpZXMpIHtcbiAgICBwcm9wZXJ0aWVzLmZvckVhY2goZnVuY3Rpb24ocHJvcCkge1xuICAgICAgaWYgKCEocHJvcCBpbiBDb25zdHJ1Y3Rvci5wcm90b3R5cGUpKSByZXR1cm47XG4gICAgICBQcm94eUNsYXNzLnByb3RvdHlwZVtwcm9wXSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpc1t0YXJnZXRQcm9wXVtwcm9wXS5hcHBseSh0aGlzW3RhcmdldFByb3BdLCBhcmd1bWVudHMpO1xuICAgICAgfTtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHByb3h5Q3Vyc29yUmVxdWVzdE1ldGhvZHMoUHJveHlDbGFzcywgdGFyZ2V0UHJvcCwgQ29uc3RydWN0b3IsIHByb3BlcnRpZXMpIHtcbiAgICBwcm9wZXJ0aWVzLmZvckVhY2goZnVuY3Rpb24ocHJvcCkge1xuICAgICAgaWYgKCEocHJvcCBpbiBDb25zdHJ1Y3Rvci5wcm90b3R5cGUpKSByZXR1cm47XG4gICAgICBQcm94eUNsYXNzLnByb3RvdHlwZVtwcm9wXSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gcHJvbWlzaWZ5Q3Vyc29yUmVxdWVzdENhbGwodGhpc1t0YXJnZXRQcm9wXSwgcHJvcCwgYXJndW1lbnRzKTtcbiAgICAgIH07XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBJbmRleChpbmRleCkge1xuICAgIHRoaXMuX2luZGV4ID0gaW5kZXg7XG4gIH1cblxuICBwcm94eVByb3BlcnRpZXMoSW5kZXgsICdfaW5kZXgnLCBbXG4gICAgJ25hbWUnLFxuICAgICdrZXlQYXRoJyxcbiAgICAnbXVsdGlFbnRyeScsXG4gICAgJ3VuaXF1ZSdcbiAgXSk7XG5cbiAgcHJveHlSZXF1ZXN0TWV0aG9kcyhJbmRleCwgJ19pbmRleCcsIElEQkluZGV4LCBbXG4gICAgJ2dldCcsXG4gICAgJ2dldEtleScsXG4gICAgJ2dldEFsbCcsXG4gICAgJ2dldEFsbEtleXMnLFxuICAgICdjb3VudCdcbiAgXSk7XG5cbiAgcHJveHlDdXJzb3JSZXF1ZXN0TWV0aG9kcyhJbmRleCwgJ19pbmRleCcsIElEQkluZGV4LCBbXG4gICAgJ29wZW5DdXJzb3InLFxuICAgICdvcGVuS2V5Q3Vyc29yJ1xuICBdKTtcblxuICBmdW5jdGlvbiBDdXJzb3IoY3Vyc29yLCByZXF1ZXN0KSB7XG4gICAgdGhpcy5fY3Vyc29yID0gY3Vyc29yO1xuICAgIHRoaXMuX3JlcXVlc3QgPSByZXF1ZXN0O1xuICB9XG5cbiAgcHJveHlQcm9wZXJ0aWVzKEN1cnNvciwgJ19jdXJzb3InLCBbXG4gICAgJ2RpcmVjdGlvbicsXG4gICAgJ2tleScsXG4gICAgJ3ByaW1hcnlLZXknLFxuICAgICd2YWx1ZSdcbiAgXSk7XG5cbiAgcHJveHlSZXF1ZXN0TWV0aG9kcyhDdXJzb3IsICdfY3Vyc29yJywgSURCQ3Vyc29yLCBbXG4gICAgJ3VwZGF0ZScsXG4gICAgJ2RlbGV0ZSdcbiAgXSk7XG5cbiAgLy8gcHJveHkgJ25leHQnIG1ldGhvZHNcbiAgWydhZHZhbmNlJywgJ2NvbnRpbnVlJywgJ2NvbnRpbnVlUHJpbWFyeUtleSddLmZvckVhY2goZnVuY3Rpb24obWV0aG9kTmFtZSkge1xuICAgIGlmICghKG1ldGhvZE5hbWUgaW4gSURCQ3Vyc29yLnByb3RvdHlwZSkpIHJldHVybjtcbiAgICBDdXJzb3IucHJvdG90eXBlW21ldGhvZE5hbWVdID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgY3Vyc29yID0gdGhpcztcbiAgICAgIHZhciBhcmdzID0gYXJndW1lbnRzO1xuICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgIGN1cnNvci5fY3Vyc29yW21ldGhvZE5hbWVdLmFwcGx5KGN1cnNvci5fY3Vyc29yLCBhcmdzKTtcbiAgICAgICAgcmV0dXJuIHByb21pc2lmeVJlcXVlc3QoY3Vyc29yLl9yZXF1ZXN0KS50aGVuKGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgaWYgKCF2YWx1ZSkgcmV0dXJuO1xuICAgICAgICAgIHJldHVybiBuZXcgQ3Vyc29yKHZhbHVlLCBjdXJzb3IuX3JlcXVlc3QpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH07XG4gIH0pO1xuXG4gIGZ1bmN0aW9uIE9iamVjdFN0b3JlKHN0b3JlKSB7XG4gICAgdGhpcy5fc3RvcmUgPSBzdG9yZTtcbiAgfVxuXG4gIE9iamVjdFN0b3JlLnByb3RvdHlwZS5jcmVhdGVJbmRleCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBuZXcgSW5kZXgodGhpcy5fc3RvcmUuY3JlYXRlSW5kZXguYXBwbHkodGhpcy5fc3RvcmUsIGFyZ3VtZW50cykpO1xuICB9O1xuXG4gIE9iamVjdFN0b3JlLnByb3RvdHlwZS5pbmRleCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBuZXcgSW5kZXgodGhpcy5fc3RvcmUuaW5kZXguYXBwbHkodGhpcy5fc3RvcmUsIGFyZ3VtZW50cykpO1xuICB9O1xuXG4gIHByb3h5UHJvcGVydGllcyhPYmplY3RTdG9yZSwgJ19zdG9yZScsIFtcbiAgICAnbmFtZScsXG4gICAgJ2tleVBhdGgnLFxuICAgICdpbmRleE5hbWVzJyxcbiAgICAnYXV0b0luY3JlbWVudCdcbiAgXSk7XG5cbiAgcHJveHlSZXF1ZXN0TWV0aG9kcyhPYmplY3RTdG9yZSwgJ19zdG9yZScsIElEQk9iamVjdFN0b3JlLCBbXG4gICAgJ3B1dCcsXG4gICAgJ2FkZCcsXG4gICAgJ2RlbGV0ZScsXG4gICAgJ2NsZWFyJyxcbiAgICAnZ2V0JyxcbiAgICAnZ2V0QWxsJyxcbiAgICAnZ2V0S2V5JyxcbiAgICAnZ2V0QWxsS2V5cycsXG4gICAgJ2NvdW50J1xuICBdKTtcblxuICBwcm94eUN1cnNvclJlcXVlc3RNZXRob2RzKE9iamVjdFN0b3JlLCAnX3N0b3JlJywgSURCT2JqZWN0U3RvcmUsIFtcbiAgICAnb3BlbkN1cnNvcicsXG4gICAgJ29wZW5LZXlDdXJzb3InXG4gIF0pO1xuXG4gIHByb3h5TWV0aG9kcyhPYmplY3RTdG9yZSwgJ19zdG9yZScsIElEQk9iamVjdFN0b3JlLCBbXG4gICAgJ2RlbGV0ZUluZGV4J1xuICBdKTtcblxuICBmdW5jdGlvbiBUcmFuc2FjdGlvbihpZGJUcmFuc2FjdGlvbikge1xuICAgIHRoaXMuX3R4ID0gaWRiVHJhbnNhY3Rpb247XG4gICAgdGhpcy5jb21wbGV0ZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgaWRiVHJhbnNhY3Rpb24ub25jb21wbGV0ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXNvbHZlKCk7XG4gICAgICB9O1xuICAgICAgaWRiVHJhbnNhY3Rpb24ub25lcnJvciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZWplY3QoaWRiVHJhbnNhY3Rpb24uZXJyb3IpO1xuICAgICAgfTtcbiAgICAgIGlkYlRyYW5zYWN0aW9uLm9uYWJvcnQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmVqZWN0KGlkYlRyYW5zYWN0aW9uLmVycm9yKTtcbiAgICAgIH07XG4gICAgfSk7XG4gIH1cblxuICBUcmFuc2FjdGlvbi5wcm90b3R5cGUub2JqZWN0U3RvcmUgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gbmV3IE9iamVjdFN0b3JlKHRoaXMuX3R4Lm9iamVjdFN0b3JlLmFwcGx5KHRoaXMuX3R4LCBhcmd1bWVudHMpKTtcbiAgfTtcblxuICBwcm94eVByb3BlcnRpZXMoVHJhbnNhY3Rpb24sICdfdHgnLCBbXG4gICAgJ29iamVjdFN0b3JlTmFtZXMnLFxuICAgICdtb2RlJ1xuICBdKTtcblxuICBwcm94eU1ldGhvZHMoVHJhbnNhY3Rpb24sICdfdHgnLCBJREJUcmFuc2FjdGlvbiwgW1xuICAgICdhYm9ydCdcbiAgXSk7XG5cbiAgZnVuY3Rpb24gVXBncmFkZURCKGRiLCBvbGRWZXJzaW9uLCB0cmFuc2FjdGlvbikge1xuICAgIHRoaXMuX2RiID0gZGI7XG4gICAgdGhpcy5vbGRWZXJzaW9uID0gb2xkVmVyc2lvbjtcbiAgICB0aGlzLnRyYW5zYWN0aW9uID0gbmV3IFRyYW5zYWN0aW9uKHRyYW5zYWN0aW9uKTtcbiAgfVxuXG4gIFVwZ3JhZGVEQi5wcm90b3R5cGUuY3JlYXRlT2JqZWN0U3RvcmUgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gbmV3IE9iamVjdFN0b3JlKHRoaXMuX2RiLmNyZWF0ZU9iamVjdFN0b3JlLmFwcGx5KHRoaXMuX2RiLCBhcmd1bWVudHMpKTtcbiAgfTtcblxuICBwcm94eVByb3BlcnRpZXMoVXBncmFkZURCLCAnX2RiJywgW1xuICAgICduYW1lJyxcbiAgICAndmVyc2lvbicsXG4gICAgJ29iamVjdFN0b3JlTmFtZXMnXG4gIF0pO1xuXG4gIHByb3h5TWV0aG9kcyhVcGdyYWRlREIsICdfZGInLCBJREJEYXRhYmFzZSwgW1xuICAgICdkZWxldGVPYmplY3RTdG9yZScsXG4gICAgJ2Nsb3NlJ1xuICBdKTtcblxuICBmdW5jdGlvbiBEQihkYikge1xuICAgIHRoaXMuX2RiID0gZGI7XG4gIH1cblxuICBEQi5wcm90b3R5cGUudHJhbnNhY3Rpb24gPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gbmV3IFRyYW5zYWN0aW9uKHRoaXMuX2RiLnRyYW5zYWN0aW9uLmFwcGx5KHRoaXMuX2RiLCBhcmd1bWVudHMpKTtcbiAgfTtcblxuICBwcm94eVByb3BlcnRpZXMoREIsICdfZGInLCBbXG4gICAgJ25hbWUnLFxuICAgICd2ZXJzaW9uJyxcbiAgICAnb2JqZWN0U3RvcmVOYW1lcydcbiAgXSk7XG5cbiAgcHJveHlNZXRob2RzKERCLCAnX2RiJywgSURCRGF0YWJhc2UsIFtcbiAgICAnY2xvc2UnXG4gIF0pO1xuXG4gIC8vIEFkZCBjdXJzb3IgaXRlcmF0b3JzXG4gIC8vIFRPRE86IHJlbW92ZSB0aGlzIG9uY2UgYnJvd3NlcnMgZG8gdGhlIHJpZ2h0IHRoaW5nIHdpdGggcHJvbWlzZXNcbiAgWydvcGVuQ3Vyc29yJywgJ29wZW5LZXlDdXJzb3InXS5mb3JFYWNoKGZ1bmN0aW9uKGZ1bmNOYW1lKSB7XG4gICAgW09iamVjdFN0b3JlLCBJbmRleF0uZm9yRWFjaChmdW5jdGlvbihDb25zdHJ1Y3Rvcikge1xuICAgICAgLy8gRG9uJ3QgY3JlYXRlIGl0ZXJhdGVLZXlDdXJzb3IgaWYgb3BlbktleUN1cnNvciBkb2Vzbid0IGV4aXN0LlxuICAgICAgaWYgKCEoZnVuY05hbWUgaW4gQ29uc3RydWN0b3IucHJvdG90eXBlKSkgcmV0dXJuO1xuXG4gICAgICBDb25zdHJ1Y3Rvci5wcm90b3R5cGVbZnVuY05hbWUucmVwbGFjZSgnb3BlbicsICdpdGVyYXRlJyldID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBhcmdzID0gdG9BcnJheShhcmd1bWVudHMpO1xuICAgICAgICB2YXIgY2FsbGJhY2sgPSBhcmdzW2FyZ3MubGVuZ3RoIC0gMV07XG4gICAgICAgIHZhciBuYXRpdmVPYmplY3QgPSB0aGlzLl9zdG9yZSB8fCB0aGlzLl9pbmRleDtcbiAgICAgICAgdmFyIHJlcXVlc3QgPSBuYXRpdmVPYmplY3RbZnVuY05hbWVdLmFwcGx5KG5hdGl2ZU9iamVjdCwgYXJncy5zbGljZSgwLCAtMSkpO1xuICAgICAgICByZXF1ZXN0Lm9uc3VjY2VzcyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGNhbGxiYWNrKHJlcXVlc3QucmVzdWx0KTtcbiAgICAgICAgfTtcbiAgICAgIH07XG4gICAgfSk7XG4gIH0pO1xuXG4gIC8vIHBvbHlmaWxsIGdldEFsbFxuICBbSW5kZXgsIE9iamVjdFN0b3JlXS5mb3JFYWNoKGZ1bmN0aW9uKENvbnN0cnVjdG9yKSB7XG4gICAgaWYgKENvbnN0cnVjdG9yLnByb3RvdHlwZS5nZXRBbGwpIHJldHVybjtcbiAgICBDb25zdHJ1Y3Rvci5wcm90b3R5cGUuZ2V0QWxsID0gZnVuY3Rpb24ocXVlcnksIGNvdW50KSB7XG4gICAgICB2YXIgaW5zdGFuY2UgPSB0aGlzO1xuICAgICAgdmFyIGl0ZW1zID0gW107XG5cbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlKSB7XG4gICAgICAgIGluc3RhbmNlLml0ZXJhdGVDdXJzb3IocXVlcnksIGZ1bmN0aW9uKGN1cnNvcikge1xuICAgICAgICAgIGlmICghY3Vyc29yKSB7XG4gICAgICAgICAgICByZXNvbHZlKGl0ZW1zKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgICAgaXRlbXMucHVzaChjdXJzb3IudmFsdWUpO1xuXG4gICAgICAgICAgaWYgKGNvdW50ICE9PSB1bmRlZmluZWQgJiYgaXRlbXMubGVuZ3RoID09IGNvdW50KSB7XG4gICAgICAgICAgICByZXNvbHZlKGl0ZW1zKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgICAgY3Vyc29yLmNvbnRpbnVlKCk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfTtcbiAgfSk7XG5cbiAgZnVuY3Rpb24gb3BlbkRiKG5hbWUsIHZlcnNpb24sIHVwZ3JhZGVDYWxsYmFjaykge1xuICAgIHZhciBwID0gcHJvbWlzaWZ5UmVxdWVzdENhbGwoaW5kZXhlZERCLCAnb3BlbicsIFtuYW1lLCB2ZXJzaW9uXSk7XG4gICAgdmFyIHJlcXVlc3QgPSBwLnJlcXVlc3Q7XG5cbiAgICBpZiAocmVxdWVzdCkge1xuICAgICAgcmVxdWVzdC5vbnVwZ3JhZGVuZWVkZWQgPSBmdW5jdGlvbihldmVudCkge1xuICAgICAgICBpZiAodXBncmFkZUNhbGxiYWNrKSB7XG4gICAgICAgICAgdXBncmFkZUNhbGxiYWNrKG5ldyBVcGdyYWRlREIocmVxdWVzdC5yZXN1bHQsIGV2ZW50Lm9sZFZlcnNpb24sIHJlcXVlc3QudHJhbnNhY3Rpb24pKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9XG5cbiAgICByZXR1cm4gcC50aGVuKGZ1bmN0aW9uKGRiKSB7XG4gICAgICByZXR1cm4gbmV3IERCKGRiKTtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGRlbGV0ZURiKG5hbWUpIHtcbiAgICByZXR1cm4gcHJvbWlzaWZ5UmVxdWVzdENhbGwoaW5kZXhlZERCLCAnZGVsZXRlRGF0YWJhc2UnLCBbbmFtZV0pO1xuICB9XG5cbiAgZXhwb3J0cy5vcGVuRGIgPSBvcGVuRGI7XG4gIGV4cG9ydHMuZGVsZXRlRGIgPSBkZWxldGVEYjtcblxuICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuXG59KSk7XG4iLCJ2YXIgYXBpID0gcmVxdWlyZShcIiEuLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbmplY3RTdHlsZXNJbnRvU3R5bGVUYWcuanNcIik7XG4gICAgICAgICAgICB2YXIgY29udGVudCA9IHJlcXVpcmUoXCIhIS4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvY2pzLmpzIS4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9kaXN0L2Nqcy5qcz8/cmVmLS03LTIhLi9zdHlsZXMuc2Nzc1wiKTtcblxuICAgICAgICAgICAgY29udGVudCA9IGNvbnRlbnQuX19lc01vZHVsZSA/IGNvbnRlbnQuZGVmYXVsdCA6IGNvbnRlbnQ7XG5cbiAgICAgICAgICAgIGlmICh0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xuICAgICAgICAgICAgfVxuXG52YXIgb3B0aW9ucyA9IHt9O1xuXG5vcHRpb25zLmluc2VydCA9IFwiaGVhZFwiO1xub3B0aW9ucy5zaW5nbGV0b24gPSBmYWxzZTtcblxudmFyIHVwZGF0ZSA9IGFwaShjb250ZW50LCBvcHRpb25zKTtcblxuXG5cbm1vZHVsZS5leHBvcnRzID0gY29udGVudC5sb2NhbHMgfHwge307IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBpc09sZElFID0gZnVuY3Rpb24gaXNPbGRJRSgpIHtcbiAgdmFyIG1lbW87XG4gIHJldHVybiBmdW5jdGlvbiBtZW1vcml6ZSgpIHtcbiAgICBpZiAodHlwZW9mIG1lbW8gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAvLyBUZXN0IGZvciBJRSA8PSA5IGFzIHByb3Bvc2VkIGJ5IEJyb3dzZXJoYWNrc1xuICAgICAgLy8gQHNlZSBodHRwOi8vYnJvd3NlcmhhY2tzLmNvbS8jaGFjay1lNzFkODY5MmY2NTMzNDE3M2ZlZTcxNWMyMjJjYjgwNVxuICAgICAgLy8gVGVzdHMgZm9yIGV4aXN0ZW5jZSBvZiBzdGFuZGFyZCBnbG9iYWxzIGlzIHRvIGFsbG93IHN0eWxlLWxvYWRlclxuICAgICAgLy8gdG8gb3BlcmF0ZSBjb3JyZWN0bHkgaW50byBub24tc3RhbmRhcmQgZW52aXJvbm1lbnRzXG4gICAgICAvLyBAc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS93ZWJwYWNrLWNvbnRyaWIvc3R5bGUtbG9hZGVyL2lzc3Vlcy8xNzdcbiAgICAgIG1lbW8gPSBCb29sZWFuKHdpbmRvdyAmJiBkb2N1bWVudCAmJiBkb2N1bWVudC5hbGwgJiYgIXdpbmRvdy5hdG9iKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbWVtbztcbiAgfTtcbn0oKTtcblxudmFyIGdldFRhcmdldCA9IGZ1bmN0aW9uIGdldFRhcmdldCgpIHtcbiAgdmFyIG1lbW8gPSB7fTtcbiAgcmV0dXJuIGZ1bmN0aW9uIG1lbW9yaXplKHRhcmdldCkge1xuICAgIGlmICh0eXBlb2YgbWVtb1t0YXJnZXRdID09PSAndW5kZWZpbmVkJykge1xuICAgICAgdmFyIHN0eWxlVGFyZ2V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0YXJnZXQpOyAvLyBTcGVjaWFsIGNhc2UgdG8gcmV0dXJuIGhlYWQgb2YgaWZyYW1lIGluc3RlYWQgb2YgaWZyYW1lIGl0c2VsZlxuXG4gICAgICBpZiAod2luZG93LkhUTUxJRnJhbWVFbGVtZW50ICYmIHN0eWxlVGFyZ2V0IGluc3RhbmNlb2Ygd2luZG93LkhUTUxJRnJhbWVFbGVtZW50KSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgLy8gVGhpcyB3aWxsIHRocm93IGFuIGV4Y2VwdGlvbiBpZiBhY2Nlc3MgdG8gaWZyYW1lIGlzIGJsb2NrZWRcbiAgICAgICAgICAvLyBkdWUgdG8gY3Jvc3Mtb3JpZ2luIHJlc3RyaWN0aW9uc1xuICAgICAgICAgIHN0eWxlVGFyZ2V0ID0gc3R5bGVUYXJnZXQuY29udGVudERvY3VtZW50LmhlYWQ7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAvLyBpc3RhbmJ1bCBpZ25vcmUgbmV4dFxuICAgICAgICAgIHN0eWxlVGFyZ2V0ID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBtZW1vW3RhcmdldF0gPSBzdHlsZVRhcmdldDtcbiAgICB9XG5cbiAgICByZXR1cm4gbWVtb1t0YXJnZXRdO1xuICB9O1xufSgpO1xuXG52YXIgc3R5bGVzSW5Eb20gPSBbXTtcblxuZnVuY3Rpb24gZ2V0SW5kZXhCeUlkZW50aWZpZXIoaWRlbnRpZmllcikge1xuICB2YXIgcmVzdWx0ID0gLTE7XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHlsZXNJbkRvbS5sZW5ndGg7IGkrKykge1xuICAgIGlmIChzdHlsZXNJbkRvbVtpXS5pZGVudGlmaWVyID09PSBpZGVudGlmaWVyKSB7XG4gICAgICByZXN1bHQgPSBpO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuZnVuY3Rpb24gbW9kdWxlc1RvRG9tKGxpc3QsIG9wdGlvbnMpIHtcbiAgdmFyIGlkQ291bnRNYXAgPSB7fTtcbiAgdmFyIGlkZW50aWZpZXJzID0gW107XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGl0ZW0gPSBsaXN0W2ldO1xuICAgIHZhciBpZCA9IG9wdGlvbnMuYmFzZSA/IGl0ZW1bMF0gKyBvcHRpb25zLmJhc2UgOiBpdGVtWzBdO1xuICAgIHZhciBjb3VudCA9IGlkQ291bnRNYXBbaWRdIHx8IDA7XG4gICAgdmFyIGlkZW50aWZpZXIgPSBcIlwiLmNvbmNhdChpZCwgXCIgXCIpLmNvbmNhdChjb3VudCk7XG4gICAgaWRDb3VudE1hcFtpZF0gPSBjb3VudCArIDE7XG4gICAgdmFyIGluZGV4ID0gZ2V0SW5kZXhCeUlkZW50aWZpZXIoaWRlbnRpZmllcik7XG4gICAgdmFyIG9iaiA9IHtcbiAgICAgIGNzczogaXRlbVsxXSxcbiAgICAgIG1lZGlhOiBpdGVtWzJdLFxuICAgICAgc291cmNlTWFwOiBpdGVtWzNdXG4gICAgfTtcblxuICAgIGlmIChpbmRleCAhPT0gLTEpIHtcbiAgICAgIHN0eWxlc0luRG9tW2luZGV4XS5yZWZlcmVuY2VzKys7XG4gICAgICBzdHlsZXNJbkRvbVtpbmRleF0udXBkYXRlcihvYmopO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdHlsZXNJbkRvbS5wdXNoKHtcbiAgICAgICAgaWRlbnRpZmllcjogaWRlbnRpZmllcixcbiAgICAgICAgdXBkYXRlcjogYWRkU3R5bGUob2JqLCBvcHRpb25zKSxcbiAgICAgICAgcmVmZXJlbmNlczogMVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWRlbnRpZmllcnMucHVzaChpZGVudGlmaWVyKTtcbiAgfVxuXG4gIHJldHVybiBpZGVudGlmaWVycztcbn1cblxuZnVuY3Rpb24gaW5zZXJ0U3R5bGVFbGVtZW50KG9wdGlvbnMpIHtcbiAgdmFyIHN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcbiAgdmFyIGF0dHJpYnV0ZXMgPSBvcHRpb25zLmF0dHJpYnV0ZXMgfHwge307XG5cbiAgaWYgKHR5cGVvZiBhdHRyaWJ1dGVzLm5vbmNlID09PSAndW5kZWZpbmVkJykge1xuICAgIHZhciBub25jZSA9IHR5cGVvZiBfX3dlYnBhY2tfbm9uY2VfXyAhPT0gJ3VuZGVmaW5lZCcgPyBfX3dlYnBhY2tfbm9uY2VfXyA6IG51bGw7XG5cbiAgICBpZiAobm9uY2UpIHtcbiAgICAgIGF0dHJpYnV0ZXMubm9uY2UgPSBub25jZTtcbiAgICB9XG4gIH1cblxuICBPYmplY3Qua2V5cyhhdHRyaWJ1dGVzKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICBzdHlsZS5zZXRBdHRyaWJ1dGUoa2V5LCBhdHRyaWJ1dGVzW2tleV0pO1xuICB9KTtcblxuICBpZiAodHlwZW9mIG9wdGlvbnMuaW5zZXJ0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgb3B0aW9ucy5pbnNlcnQoc3R5bGUpO1xuICB9IGVsc2Uge1xuICAgIHZhciB0YXJnZXQgPSBnZXRUYXJnZXQob3B0aW9ucy5pbnNlcnQgfHwgJ2hlYWQnKTtcblxuICAgIGlmICghdGFyZ2V0KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDb3VsZG4ndCBmaW5kIGEgc3R5bGUgdGFyZ2V0LiBUaGlzIHByb2JhYmx5IG1lYW5zIHRoYXQgdGhlIHZhbHVlIGZvciB0aGUgJ2luc2VydCcgcGFyYW1ldGVyIGlzIGludmFsaWQuXCIpO1xuICAgIH1cblxuICAgIHRhcmdldC5hcHBlbmRDaGlsZChzdHlsZSk7XG4gIH1cblxuICByZXR1cm4gc3R5bGU7XG59XG5cbmZ1bmN0aW9uIHJlbW92ZVN0eWxlRWxlbWVudChzdHlsZSkge1xuICAvLyBpc3RhbmJ1bCBpZ25vcmUgaWZcbiAgaWYgKHN0eWxlLnBhcmVudE5vZGUgPT09IG51bGwpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBzdHlsZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHN0eWxlKTtcbn1cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICAqL1xuXG5cbnZhciByZXBsYWNlVGV4dCA9IGZ1bmN0aW9uIHJlcGxhY2VUZXh0KCkge1xuICB2YXIgdGV4dFN0b3JlID0gW107XG4gIHJldHVybiBmdW5jdGlvbiByZXBsYWNlKGluZGV4LCByZXBsYWNlbWVudCkge1xuICAgIHRleHRTdG9yZVtpbmRleF0gPSByZXBsYWNlbWVudDtcbiAgICByZXR1cm4gdGV4dFN0b3JlLmZpbHRlcihCb29sZWFuKS5qb2luKCdcXG4nKTtcbiAgfTtcbn0oKTtcblxuZnVuY3Rpb24gYXBwbHlUb1NpbmdsZXRvblRhZyhzdHlsZSwgaW5kZXgsIHJlbW92ZSwgb2JqKSB7XG4gIHZhciBjc3MgPSByZW1vdmUgPyAnJyA6IG9iai5tZWRpYSA/IFwiQG1lZGlhIFwiLmNvbmNhdChvYmoubWVkaWEsIFwiIHtcIikuY29uY2F0KG9iai5jc3MsIFwifVwiKSA6IG9iai5jc3M7IC8vIEZvciBvbGQgSUVcblxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgICovXG5cbiAgaWYgKHN0eWxlLnN0eWxlU2hlZXQpIHtcbiAgICBzdHlsZS5zdHlsZVNoZWV0LmNzc1RleHQgPSByZXBsYWNlVGV4dChpbmRleCwgY3NzKTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgY3NzTm9kZSA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNzcyk7XG4gICAgdmFyIGNoaWxkTm9kZXMgPSBzdHlsZS5jaGlsZE5vZGVzO1xuXG4gICAgaWYgKGNoaWxkTm9kZXNbaW5kZXhdKSB7XG4gICAgICBzdHlsZS5yZW1vdmVDaGlsZChjaGlsZE5vZGVzW2luZGV4XSk7XG4gICAgfVxuXG4gICAgaWYgKGNoaWxkTm9kZXMubGVuZ3RoKSB7XG4gICAgICBzdHlsZS5pbnNlcnRCZWZvcmUoY3NzTm9kZSwgY2hpbGROb2Rlc1tpbmRleF0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdHlsZS5hcHBlbmRDaGlsZChjc3NOb2RlKTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gYXBwbHlUb1RhZyhzdHlsZSwgb3B0aW9ucywgb2JqKSB7XG4gIHZhciBjc3MgPSBvYmouY3NzO1xuICB2YXIgbWVkaWEgPSBvYmoubWVkaWE7XG4gIHZhciBzb3VyY2VNYXAgPSBvYmouc291cmNlTWFwO1xuXG4gIGlmIChtZWRpYSkge1xuICAgIHN0eWxlLnNldEF0dHJpYnV0ZSgnbWVkaWEnLCBtZWRpYSk7XG4gIH0gZWxzZSB7XG4gICAgc3R5bGUucmVtb3ZlQXR0cmlidXRlKCdtZWRpYScpO1xuICB9XG5cbiAgaWYgKHNvdXJjZU1hcCAmJiBidG9hKSB7XG4gICAgY3NzICs9IFwiXFxuLyojIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCxcIi5jb25jYXQoYnRvYSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoc291cmNlTWFwKSkpKSwgXCIgKi9cIik7XG4gIH0gLy8gRm9yIG9sZCBJRVxuXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAgKi9cblxuXG4gIGlmIChzdHlsZS5zdHlsZVNoZWV0KSB7XG4gICAgc3R5bGUuc3R5bGVTaGVldC5jc3NUZXh0ID0gY3NzO1xuICB9IGVsc2Uge1xuICAgIHdoaWxlIChzdHlsZS5maXJzdENoaWxkKSB7XG4gICAgICBzdHlsZS5yZW1vdmVDaGlsZChzdHlsZS5maXJzdENoaWxkKTtcbiAgICB9XG5cbiAgICBzdHlsZS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjc3MpKTtcbiAgfVxufVxuXG52YXIgc2luZ2xldG9uID0gbnVsbDtcbnZhciBzaW5nbGV0b25Db3VudGVyID0gMDtcblxuZnVuY3Rpb24gYWRkU3R5bGUob2JqLCBvcHRpb25zKSB7XG4gIHZhciBzdHlsZTtcbiAgdmFyIHVwZGF0ZTtcbiAgdmFyIHJlbW92ZTtcblxuICBpZiAob3B0aW9ucy5zaW5nbGV0b24pIHtcbiAgICB2YXIgc3R5bGVJbmRleCA9IHNpbmdsZXRvbkNvdW50ZXIrKztcbiAgICBzdHlsZSA9IHNpbmdsZXRvbiB8fCAoc2luZ2xldG9uID0gaW5zZXJ0U3R5bGVFbGVtZW50KG9wdGlvbnMpKTtcbiAgICB1cGRhdGUgPSBhcHBseVRvU2luZ2xldG9uVGFnLmJpbmQobnVsbCwgc3R5bGUsIHN0eWxlSW5kZXgsIGZhbHNlKTtcbiAgICByZW1vdmUgPSBhcHBseVRvU2luZ2xldG9uVGFnLmJpbmQobnVsbCwgc3R5bGUsIHN0eWxlSW5kZXgsIHRydWUpO1xuICB9IGVsc2Uge1xuICAgIHN0eWxlID0gaW5zZXJ0U3R5bGVFbGVtZW50KG9wdGlvbnMpO1xuICAgIHVwZGF0ZSA9IGFwcGx5VG9UYWcuYmluZChudWxsLCBzdHlsZSwgb3B0aW9ucyk7XG5cbiAgICByZW1vdmUgPSBmdW5jdGlvbiByZW1vdmUoKSB7XG4gICAgICByZW1vdmVTdHlsZUVsZW1lbnQoc3R5bGUpO1xuICAgIH07XG4gIH1cblxuICB1cGRhdGUob2JqKTtcbiAgcmV0dXJuIGZ1bmN0aW9uIHVwZGF0ZVN0eWxlKG5ld09iaikge1xuICAgIGlmIChuZXdPYmopIHtcbiAgICAgIGlmIChuZXdPYmouY3NzID09PSBvYmouY3NzICYmIG5ld09iai5tZWRpYSA9PT0gb2JqLm1lZGlhICYmIG5ld09iai5zb3VyY2VNYXAgPT09IG9iai5zb3VyY2VNYXApIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB1cGRhdGUob2JqID0gbmV3T2JqKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVtb3ZlKCk7XG4gICAgfVxuICB9O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChsaXN0LCBvcHRpb25zKSB7XG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9OyAvLyBGb3JjZSBzaW5nbGUtdGFnIHNvbHV0aW9uIG9uIElFNi05LCB3aGljaCBoYXMgYSBoYXJkIGxpbWl0IG9uIHRoZSAjIG9mIDxzdHlsZT5cbiAgLy8gdGFncyBpdCB3aWxsIGFsbG93IG9uIGEgcGFnZVxuXG4gIGlmICghb3B0aW9ucy5zaW5nbGV0b24gJiYgdHlwZW9mIG9wdGlvbnMuc2luZ2xldG9uICE9PSAnYm9vbGVhbicpIHtcbiAgICBvcHRpb25zLnNpbmdsZXRvbiA9IGlzT2xkSUUoKTtcbiAgfVxuXG4gIGxpc3QgPSBsaXN0IHx8IFtdO1xuICB2YXIgbGFzdElkZW50aWZpZXJzID0gbW9kdWxlc1RvRG9tKGxpc3QsIG9wdGlvbnMpO1xuICByZXR1cm4gZnVuY3Rpb24gdXBkYXRlKG5ld0xpc3QpIHtcbiAgICBuZXdMaXN0ID0gbmV3TGlzdCB8fCBbXTtcblxuICAgIGlmIChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobmV3TGlzdCkgIT09ICdbb2JqZWN0IEFycmF5XScpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxhc3RJZGVudGlmaWVycy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGlkZW50aWZpZXIgPSBsYXN0SWRlbnRpZmllcnNbaV07XG4gICAgICB2YXIgaW5kZXggPSBnZXRJbmRleEJ5SWRlbnRpZmllcihpZGVudGlmaWVyKTtcbiAgICAgIHN0eWxlc0luRG9tW2luZGV4XS5yZWZlcmVuY2VzLS07XG4gICAgfVxuXG4gICAgdmFyIG5ld0xhc3RJZGVudGlmaWVycyA9IG1vZHVsZXNUb0RvbShuZXdMaXN0LCBvcHRpb25zKTtcblxuICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBsYXN0SWRlbnRpZmllcnMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICB2YXIgX2lkZW50aWZpZXIgPSBsYXN0SWRlbnRpZmllcnNbX2ldO1xuXG4gICAgICB2YXIgX2luZGV4ID0gZ2V0SW5kZXhCeUlkZW50aWZpZXIoX2lkZW50aWZpZXIpO1xuXG4gICAgICBpZiAoc3R5bGVzSW5Eb21bX2luZGV4XS5yZWZlcmVuY2VzID09PSAwKSB7XG4gICAgICAgIHN0eWxlc0luRG9tW19pbmRleF0udXBkYXRlcigpO1xuXG4gICAgICAgIHN0eWxlc0luRG9tLnNwbGljZShfaW5kZXgsIDEpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGxhc3RJZGVudGlmaWVycyA9IG5ld0xhc3RJZGVudGlmaWVycztcbiAgfTtcbn07IiwiLy8gSW1wb3J0c1xudmFyIF9fX0NTU19MT0FERVJfQVBJX0lNUE9SVF9fXyA9IHJlcXVpcmUoXCIuLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvYXBpLmpzXCIpO1xudmFyIF9fX0NTU19MT0FERVJfR0VUX1VSTF9JTVBPUlRfX18gPSByZXF1aXJlKFwiLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL2dldFVybC5qc1wiKTtcbnZhciBfX19DU1NfTE9BREVSX1VSTF9JTVBPUlRfMF9fXyA9IHJlcXVpcmUoXCIuLi9hc3NldHMvaWNvbnMvaGFtYnVyZ2VySWNvbi5zdmdcIik7XG52YXIgX19fQ1NTX0xPQURFUl9VUkxfSU1QT1JUXzFfX18gPSByZXF1aXJlKFwiLi4vYXNzZXRzL2ljb25zL2Nyb3NzSWNvbi5zdmdcIik7XG52YXIgX19fQ1NTX0xPQURFUl9VUkxfSU1QT1JUXzJfX18gPSByZXF1aXJlKFwiLi4vYXNzZXRzL2ljb25zL3Byb2plY3RzTGlzdEljb24uc3ZnXCIpO1xuZXhwb3J0cyA9IF9fX0NTU19MT0FERVJfQVBJX0lNUE9SVF9fXyhmYWxzZSk7XG52YXIgX19fQ1NTX0xPQURFUl9VUkxfUkVQTEFDRU1FTlRfMF9fXyA9IF9fX0NTU19MT0FERVJfR0VUX1VSTF9JTVBPUlRfX18oX19fQ1NTX0xPQURFUl9VUkxfSU1QT1JUXzBfX18pO1xudmFyIF9fX0NTU19MT0FERVJfVVJMX1JFUExBQ0VNRU5UXzFfX18gPSBfX19DU1NfTE9BREVSX0dFVF9VUkxfSU1QT1JUX19fKF9fX0NTU19MT0FERVJfVVJMX0lNUE9SVF8xX19fKTtcbnZhciBfX19DU1NfTE9BREVSX1VSTF9SRVBMQUNFTUVOVF8yX19fID0gX19fQ1NTX0xPQURFUl9HRVRfVVJMX0lNUE9SVF9fXyhfX19DU1NfTE9BREVSX1VSTF9JTVBPUlRfMl9fXyk7XG4vLyBNb2R1bGVcbmV4cG9ydHMucHVzaChbbW9kdWxlLmlkLCBcIi5tYWluUGFuZWx7ZGlzcGxheTpmbGV4O3Bvc2l0aW9uOmFic29sdXRlO2JhY2tncm91bmQtY29sb3I6cmdiYSgyNDYsMjQ2LDI0NiwuOSk7dHJhbnNpdGlvbjpyaWdodCAxcyxib3R0b20gMXM7LS13aWR0aDogMjUwcHg7LS1oZWlnaHQ6IDIwMHB4fS5tYWluUGFuZWwucmlnaHR7aGVpZ2h0OjEwMCU7d2lkdGg6dmFyKC0td2lkdGgpO3RvcDowO3JpZ2h0OmNhbGModmFyKC0td2lkdGgpICogLTEpfS5tYWluUGFuZWwuYm90dG9te2ZsZXgtZGlyZWN0aW9uOmNvbHVtbjtoZWlnaHQ6dmFyKC0taGVpZ2h0KTt3aWR0aDoxMDAlO2JvdHRvbTpjYWxjKHZhcigtLWhlaWdodCkgKiAtMSl9Lm1haW5QYW5lbC5yaWdodD4ucGFuZWwtY29udGVudHt3aWR0aDoxMDAlfS5tYWluUGFuZWwuYm90dG9tPi5wYW5lbC1jb250ZW50e2Rpc3BsYXk6ZmxleDtoZWlnaHQ6MTAwJX0ubWFpblBhbmVsLnJpZ2h0Lm9wZW57cmlnaHQ6MH0ubWFpblBhbmVsLmJvdHRvbS5vcGVue2JvdHRvbTowfS5tYWluUGFuZWw+LnBhbmVsLWdyaXB7YmFja2dyb3VuZDojMmE4ZmIxfS5tYWluUGFuZWwucmlnaHQ+LnBhbmVsLWdyaXB7ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtwYWRkaW5nOjAgNXB4O2N1cnNvcjpjb2wtcmVzaXplfS5tYWluUGFuZWwuYm90dG9tPi5wYW5lbC1ncmlwe3BhZGRpbmc6NXB4IDA7Y3Vyc29yOnJvdy1yZXNpemV9Lm1haW5QYW5lbD4ucGFuZWwtZ3JpcDo6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXCI7ZGlzcGxheTpibG9ja30ubWFpblBhbmVsLnJpZ2h0Pi5wYW5lbC1ncmlwOjpiZWZvcmV7aGVpZ2h0OjI3cHg7Ym9yZGVyLXJpZ2h0OjNweCBkb3VibGUgI2ZmZn0ubWFpblBhbmVsLmJvdHRvbT4ucGFuZWwtZ3JpcDo6YmVmb3Jle3dpZHRoOjI3cHg7Ym9yZGVyLXRvcDozcHggZG91YmxlICNmZmY7bWFyZ2luOmF1dG99Lm1haW5QYW5lbD4ucGFuZWwtY29udGVudD4ucGFuZWwtaGVhZGVye2Rpc3BsYXk6ZmxleDtqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYXJvdW5kO2FsaWduLWl0ZW1zOmNlbnRlcjt0ZXh0LWFsaWduOmNlbnRlcn0ubWFpblBhbmVsLmJvdHRvbT4ucGFuZWwtY29udGVudD4ucGFuZWwtaGVhZGVye2ZsZXgtZGlyZWN0aW9uOmNvbHVtbn0ubWFpblBhbmVsPi5wYW5lbC1jb250ZW50Pi5wYW5lbC1oZWFkZXI+c3BhbntwYWRkaW5nOi4ycmVtO2ZsZXgtZ3JvdzoxfS5tYWluUGFuZWwuYm90dG9tPi5wYW5lbC1jb250ZW50Pi5wYW5lbC1oZWFkZXI+c3Bhbnt3aWR0aDozNXB4O3dyaXRpbmctbW9kZTp2ZXJ0aWNhbC1ybDstd2Via2l0LXdyaXRpbmctbW9kZTp2ZXJ0aWNhbC1ybH0ubWFpblBhbmVsPi5wYW5lbC1jb250ZW50Pi5wYW5lbC1oZWFkZXI+c3Bhbjpub3QoLmFjdGl2ZSl7Y3Vyc29yOnBvaW50ZXI7YmFja2dyb3VuZC1jb2xvcjojZTRlNGU0fS5tYWluUGFuZWwucmlnaHQ+LnBhbmVsLWNvbnRlbnQ+LnBhbmVsLWhlYWRlcj5zcGFuOm5vdCguYWN0aXZlKXtib3JkZXItYm90dG9tOjFweCBzb2xpZCAjYTZhNmE2fS5tYWluUGFuZWwuYm90dG9tPi5wYW5lbC1jb250ZW50Pi5wYW5lbC1oZWFkZXI+c3Bhbjpub3QoLmFjdGl2ZSl7Ym9yZGVyLXJpZ2h0OjFweCBzb2xpZCAjYTZhNmE2fS5tYWluUGFuZWwucmlnaHQ+LnBhbmVsLWNvbnRlbnQ+LnBhbmVsLWhlYWRlcj5zcGFuOm5vdCg6bGFzdC1jaGlsZCl7Ym9yZGVyLXJpZ2h0OjFweCBzb2xpZCAjYTZhNmE2fS5tYWluUGFuZWwuYm90dG9tPi5wYW5lbC1jb250ZW50Pi5wYW5lbC1oZWFkZXI+c3Bhbjpub3QoOmxhc3QtY2hpbGQpe2JvcmRlci1ib3R0b206MXB4IHNvbGlkICNhNmE2YTZ9Lm1haW5QYW5lbD4ucGFuZWwtY29udGVudD4ucGFuZWwtYm9keXtmbGV4LWdyb3c6MTtwYWRkaW5nOi41cmVtfS5tYWluUGFuZWw+LnBhbmVsLWNvbnRlbnQ+LnBhbmVsLWJvZHk+LmhpZGRlbntkaXNwbGF5Om5vbmV9I3Byb2plY3RzTGlzdENvbnRhaW5lcntoZWlnaHQ6MTAwJTt3aWR0aDoxMDAlO3Bvc2l0aW9uOmFic29sdXRlO2JhY2tncm91bmQtY29sb3I6I2ZmZn0jcHJvamVjdHNMaXN0Q29udGFpbmVyPmRpdjpmaXJzdC1jaGlsZHtkaXNwbGF5OmZsZXg7anVzdGlmeS1jb250ZW50OnNwYWNlLWJldHdlZW47cGFkZGluZzoxcmVtfSNwcm9qZWN0c0xpc3RDb250YWluZXI+ZGl2OmZpcnN0LWNoaWxkPnNwYW57d2lkdGg6MjAlfUBtZWRpYShtYXgtd2lkdGg6IDUwMHB4KXsjY2xvc2VQcm9qZWN0c0xpc3RCdG57ZGlzcGxheTpub25lfX0jY2xvc2VQcm9qZWN0c0xpc3RCdG57ZmxvYXQ6cmlnaHR9I3Byb2plY3RzTGlzdENvbnRhaW5lcj5kaXY6Zmlyc3QtY2hpbGQ+aDR7b3ZlcmZsb3cteDpoaWRkZW47Zm9udC13ZWlnaHQ6bm9ybWFsO2ZvbnQtc2l6ZToxLjZyZW19I3Byb2plY3RzTGlzdHtkaXNwbGF5OmZsZXg7ZmxleC13cmFwOndyYXA7bWFyZ2luLWxlZnQ6MXJlbTstLWl0ZW1zLWg6IDY7LS1pdGVtLXdpZHRoOiBjYWxjKCgxMDAlIC8gdmFyKC0taXRlbXMtaCkpIC0gMXJlbSk7LS1yZW1haW5pbmctaXRlbXM6IHVuc2V0fUBtZWRpYShtYXgtd2lkdGg6IDEwMDBweCl7I3Byb2plY3RzTGlzdHstLWl0ZW1zLWg6IDV9fUBtZWRpYShtYXgtd2lkdGg6IDgwMHB4KXsjcHJvamVjdHNMaXN0ey0taXRlbXMtaDogNH19QG1lZGlhKG1heC13aWR0aDogNjAwcHgpeyNwcm9qZWN0c0xpc3R7LS1pdGVtcy1oOiAzfX1AbWVkaWEobWF4LXdpZHRoOiA0MDBweCl7I3Byb2plY3RzTGlzdHstLWl0ZW1zLWg6IDJ9fUBtZWRpYShtYXgtd2lkdGg6IDI4MHB4KXsjcHJvamVjdHNMaXN0ey0taXRlbXMtaDogMX19I3Byb2plY3RzTGlzdDo6YWZ0ZXJ7Y29udGVudDpcXFwiXFxcIjtmbGV4LWdyb3c6dmFyKC0tcmVtYWluaW5nLWl0ZW1zKTt3aWR0aDpjYWxjKCh2YXIoLS1pdGVtLXdpZHRoKSArIDFyZW0pICogdmFyKC0tcmVtYWluaW5nLWl0ZW1zKSl9I3Byb2plY3RzTGlzdD4uZW1wdHktbXNne3dpZHRoOjEwMCU7bWFyZ2luLXRvcDozcmVtO21hcmdpbi1ib3R0b206M3JlbTt0ZXh0LWFsaWduOmNlbnRlcn0ucHJvamVjdEl0ZW17ZmxleC1ncm93OjE7d2lkdGg6dmFyKC0taXRlbS13aWR0aCk7bWFyZ2luLWJvdHRvbToxcmVtO21hcmdpbi1yaWdodDoxcmVtO3Bvc2l0aW9uOnJlbGF0aXZlO2N1cnNvcjpwb2ludGVyO2ZvbnQtZmFtaWx5OmluaGVyaXQ7Ym94LXNoYWRvdzoycHggMnB4IDdweCAjYjJiMmIyfS5wcm9qZWN0SXRlbT5oNHtiYWNrZ3JvdW5kLWNvbG9yOiNmOWY5Zjl9LnByb2plY3RJdGVtLmN1cnJlbnR7Y3Vyc29yOmF1dG87b3V0bGluZTo0cHggc29saWQgIzdkYTViNjtib3gtc2hhZG93Om5vbmV9LnByb2plY3RJdGVtLnVuc3luY3tvcGFjaXR5Oi41fS5wcm9qZWN0SXRlbTpub3QoLmN1cnJlbnQpOmhvdmVye2JveC1zaGFkb3c6MnB4IDJweCA3cHggIzZiNmI2Yn0ucHJvamVjdEl0ZW0+LnNoYXJlZEljb257cG9zaXRpb246YWJzb2x1dGU7d2lkdGg6MzBweDtoZWlnaHQ6MzBweDtyaWdodDo2cHg7dG9wOjZweDtiYWNrZ3JvdW5kLWNvbG9yOiNlZWU7cGFkZGluZzo1cHg7Ym9yZGVyLXJhZGl1czo1MCV9LnByb2plY3RJdGVtPi50aHVtYntkaXNwbGF5OmJsb2NrO3dpZHRoOjEwMCU7aGVpZ2h0OjE1MHB4O29iamVjdC1maXQ6Y292ZXJ9LnByb2plY3RJdGVtPmg0e3BhZGRpbmc6LjZyZW07Zm9udC13ZWlnaHQ6bm9ybWFsfSNsb2FkTW9yZVByb2pCdG57ZGlzcGxheTpibG9jazttYXJnaW46YXV0b30jbW9kYWxEaWFsb2dDb250YWluZXJ7anVzdGlmeS1jb250ZW50OmNlbnRlcjthbGlnbi1pdGVtczpjZW50ZXI7cG9zaXRpb246YWJzb2x1dGU7dG9wOjA7cmlnaHQ6MDtib3R0b206MDtsZWZ0OjB9I21vZGFsRGlhbG9nQ29udGFpbmVyPmRpdntwYWRkaW5nOjFyZW07YmFja2dyb3VuZC1jb2xvcjojZmZmfSNtb2RhbERpYWxvZ0NvbnRhaW5lci5ncmF5VHJhbnNsdWNlbnR7YmFja2dyb3VuZC1jb2xvcjpyZ2JhKDIxNiwyMTYsMjE2LC44KX0jbW9kYWxEaWFsb2dDb250YWluZXIubGlnaHRPcGFxdWV7YmFja2dyb3VuZC1jb2xvcjojZmZmfSNjbG9zZU1vZGFsQnRue2Zsb2F0OnJpZ2h0fSNtb2RhbERpYWxvZ0NvbnRhaW5lciAubW9kYWwtbWFpbi1idG5ze2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpmbGV4LWVuZDtqdXN0aWZ5LWNvbnRlbnQ6ZmxleC1lbmQ7bWFyZ2luLXRvcDouM3JlbX0jbW9kYWxEaWFsb2dDb250YWluZXIgLm1vZGFsLW1haW4tYnRucz5idXR0b246bm90KDpmaXJzdC1jaGlsZCl7bWFyZ2luLWxlZnQ6LjVyZW19I2F1dGhvcml6ZURpYWxvZ3tkaXNwbGF5OmZsZXg7ZmxleC1kaXJlY3Rpb246Y29sdW1uO3BhZGRpbmc6MXJlbX0jYXV0aG9yaXplRGlhbG9nPmltZ3thbGlnbi1zZWxmOmNlbnRlcn0jYXV0aG9yaXplRGlhbG9nPmgye2ZvbnQtc2l6ZToxLjZyZW07dGV4dC1hbGlnbjpjZW50ZXI7Zm9udC13ZWlnaHQ6bm9ybWFsO21hcmdpbi1ib3R0b206MS41cmVtO21hcmdpbi10b3A6MXJlbX0jYXV0aG9yaXplRGlhbG9nPmRpdjpsYXN0LWNoaWxke2Rpc3BsYXk6ZmxleDtmbGV4LWRpcmVjdGlvbjpjb2x1bW47ZmxleC1ncm93OjE7anVzdGlmeS1jb250ZW50OmVuZH0jYXV0aG9yaXplRGlhbG9nPmRpdjpsYXN0LWNoaWxkPmJ1dHRvbntmb250LXNpemU6MS4ycmVtfSNhdXRob3JpemVEaWFsb2c+ZGl2Omxhc3QtY2hpbGQ+YnV0dG9uOm5vdCg6bGFzdC1jaGlsZCl7bWFyZ2luLWJvdHRvbTouNHJlbX0jdXBsb2FkRmlsZUZvcm17ZGlzcGxheTpmbGV4O2ZsZXgtZGlyZWN0aW9uOmNvbHVtbjttaW4td2lkdGg6MjAwcHg7cGFkZGluZzoxcmVtO2JhY2tncm91bmQtY29sb3I6I2ZmZn0jdXBsb2FkRmlsZUZvcm0+aW5wdXR7Zm9udC1mYW1pbHk6aW5oZXJpdH0jdXBsb2FkRmlsZUZvcm0+bGFiZWx7bWFyZ2luLXRvcDoxcmVtO3RleHQtYWxpZ246Y2VudGVyO2N1cnNvcjpwb2ludGVyO2ZvbnQtc2l6ZTouOXJlbX0jdXBsb2FkRmlsZUZvcm0+YnV0dG9uOmxhc3QtY2hpbGR7bWFyZ2luLXRvcDouNXJlbX0jbG9hZGluZ0ZpbGV7cGFkZGluZzoxcmVtO3RleHQtYWxpZ246Y2VudGVyfSNzaWRlTmF2Q29udGFpbmVye2Rpc3BsYXk6ZmxleDtmbGV4LWRpcmVjdGlvbjpjb2x1bW47cG9zaXRpb246YWJzb2x1dGU7aGVpZ2h0OjEwMHZoO3dpZHRoOjMxNHB4O3RvcDowO3JpZ2h0OjA7ei1pbmRleDo5OTk7dHJhbnNmb3JtOnRyYW5zbGF0ZVgoMzE0cHgpO2JhY2tncm91bmQtY29sb3I6I2ZmZn0jc2lkZU5hdkNvbnRhaW5lci5hY3RpdmV7dHJhbnNmb3JtOnRyYW5zbGF0ZVgoMCl9LnNpZGUtbmF2LWhlYWRlcntwYWRkaW5nLXJpZ2h0OjFyZW07cGFkZGluZy1sZWZ0OjFyZW19I3VzZXItaW5mb3tkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6ZmxleC1lbmQ7bWFyZ2luLXRvcDp2YXIoLS1oZWFkZXItaGVpZ2h0KX0jdXNlci1pbmZvPmltZ3ttYXJnaW4tcmlnaHQ6LjZyZW19I3VzZXItaW5mbz5zcGFue292ZXJmbG93LXg6aGlkZGVufSN1c2VyLWluZm8+c3Bhbj5zcGFue2Rpc3BsYXk6YmxvY2t9I3VzZXItaW5mbyAuZW1haWx7Zm9udC13ZWlnaHQ6bGlnaHRlcn0uc2lkZS1uYXYtYm9keXtkaXNwbGF5OmZsZXg7ZmxleC1kaXJlY3Rpb246Y29sdW1uO2FsaWduLWl0ZW1zOmNlbnRlcjtmbGV4LWdyb3c6MTtwYWRkaW5nOjFyZW07dGV4dC1hbGlnbjpjZW50ZXJ9LnNpZGUtbmF2LWJvZHkgYnV0dG9ue3dpZHRoOjgwJX0uc2lkZS1uYXYtYm9keT4uc2lkZS1uYXYtc2VjdGlvbnt3aWR0aDoxMDAlO3BhZGRpbmctYm90dG9tOjFyZW19LnNpZGUtbmF2LWJvZHk+LnNpZGUtbmF2LXNlY3Rpb24uZ3Jvd3tmbGV4LWdyb3c6MX0jc2lkZU5hdlRvZ2dsZXt3aWR0aDoyNHB4O2hlaWdodDoyNHB4O21hcmdpbjouNHJlbTtjdXJzb3I6cG9pbnRlcjtib3JkZXItc3R5bGU6bm9uZTtiYWNrZ3JvdW5kLWltYWdlOnVybChcIiArIF9fX0NTU19MT0FERVJfVVJMX1JFUExBQ0VNRU5UXzBfX18gKyBcIik7YmFja2dyb3VuZC1yZXBlYXQ6bm8tcmVwZWF0O2JhY2tncm91bmQtcG9zaXRpb246Y2VudGVyfSNzaWRlTmF2VG9nZ2xlLmFjdGl2ZXtiYWNrZ3JvdW5kLWltYWdlOnVybChcIiArIF9fX0NTU19MT0FERVJfVVJMX1JFUExBQ0VNRU5UXzFfX18gKyBcIil9I3NpZGVOYXZDb250YWluZXIrLnNpZGUtbmF2LXNoYWRle3Bvc2l0aW9uOmFic29sdXRlO3otaW5kZXg6MTA7YmFja2dyb3VuZC1jb2xvcjojMDAwO3dpZHRoOjEwMCU7aGVpZ2h0OjEwMHZoO3RvcDowO29wYWNpdHk6MDtsZWZ0OjEwMCU7dHJhbnNpdGlvbjpvcGFjaXR5IC4yNXMgZWFzZS1vdXQsbGVmdCAwcyBsaW5lYXIgLjI1c30jc2lkZU5hdkNvbnRhaW5lci5hY3RpdmUrLnNpZGUtbmF2LXNoYWRle29wYWNpdHk6Ljc7bGVmdDowO3RyYW5zaXRpb246b3BhY2l0eSAuMjVzIGVhc2Utb3V0LGxlZnQgMHMgbGluZWFyfS5zaWRlLW5hdi1mb290ZXJ7cGFkZGluZzoxcmVtO2ZvbnQtd2VpZ2h0OmxpZ2h0ZXJ9I2NvbW1lbnRGb3JtPi5pbnB1dHN7bWFyZ2luLWJvdHRvbTouOHJlbX0jY29tbWVudEZvcm0+LmlucHV0cz50ZXh0YXJlYXt3aWR0aDoxMDAlO21pbi1oZWlnaHQ6MTUwcHh9I2NvbW1lbnRGb3JtLmhvcml6b250YWx7ZGlzcGxheTpmbGV4fSNjb21tZW50Rm9ybS5ob3Jpem9udGFsPi5pbnB1dHN7ZmxleC1ncm93OjF9I2NvbW1lbnRGb3JtLmhvcml6b250YWw+LmlucHV0cz50ZXh0YXJlYXttaW4taGVpZ2h0OjYwcHh9I2NvbW1lbnRGb3JtPi5pbnB1dHM+Lm1lbWJlcnN7bWFyZ2luLXRvcDouNXJlbX0jY29tbWVudEZvcm0+LmlucHV0cz4ubWVtYmVycy5oaWRkZW57ZGlzcGxheTpub25lfSNjb21tZW50Rm9ybT4uaW5wdXRzPi5tZW1iZXJzPnA6Zmlyc3QtY2hpbGR7Zm9udC13ZWlnaHQ6bGlnaHRlcjttYXJnaW4tYm90dG9tOi4ycmVtfSNjb21tZW50Rm9ybT4uaW5wdXRzPi5tZW1iZXJzPnNlbGVjdHt3aWR0aDoxMDAlfSNjb21tZW50Rm9ybSAuaW5mb3ttYXJnaW4tdG9wOi4xcmVtO2ZvbnQtc2l6ZTouN3JlbTtmb250LXdlaWdodDpsaWdodGVyfSNjb21tZW50Rm9ybT4uZm9ybUJ1dHRvbnNNb2Rlcz4uYnV0dG9uc0NvbnRhaW5lcntkaXNwbGF5OmZsZXg7anVzdGlmeS1jb250ZW50OnNwYWNlLWJldHdlZW59I2NvbW1lbnRGb3JtLmhvcml6b250YWw+LmZvcm1CdXR0b25zTW9kZXN7bWFyZ2luLWxlZnQ6LjVyZW19I2NvbW1lbnRGb3JtLmhvcml6b250YWw+LmZvcm1CdXR0b25zTW9kZXM+LmJ1dHRvbnNDb250YWluZXJ7ZmxleC1kaXJlY3Rpb246Y29sdW1ufSNjb21tZW50Rm9ybS5ob3Jpem9udGFsPi5mb3JtQnV0dG9uc01vZGVzPi5idXR0b25zQ29udGFpbmVyPmJ1dHRvbntoZWlnaHQ6NTBweH0jY29tbWVudEZvcm0uaG9yaXpvbnRhbD4uZm9ybUJ1dHRvbnNNb2Rlcz4uYnV0dG9uc0NvbnRhaW5lcj5idXR0b246Zmlyc3QtY2hpbGR7bWFyZ2luLXRvcDouNnJlbTtvcmRlcjoxfSNzaGFyZVByb2plY3REaWFsb2d7ZGlzcGxheTpmbGV4O2ZsZXgtZGlyZWN0aW9uOmNvbHVtbjtwb3NpdGlvbjpyZWxhdGl2ZTttaW4taGVpZ2h0OjM1MHB4O21pbi13aWR0aDo0MDBweDtiYWNrZ3JvdW5kLWNvbG9yOiNmZmZ9I3NoYXJlUHJvamVjdERpYWxvZyAudGFibGUtd3JhcHBlcnttYXJnaW4tdG9wOi41cmVtO21hcmdpbi1ib3R0b206MXJlbTtiYWNrZ3JvdW5kLWNvbG9yOiNmMWYxZjF9I3NoYXJlUHJvamVjdERpYWxvZyAudGFibGUtd3JhcHBlci5maXhlZC1oZWlnaHR7aGVpZ2h0OjEwMHB4O292ZXJmbG93LXk6YXV0b30jc2hhcmVQcm9qZWN0RGlhbG9nIC50YWJsZS13cmFwcGVyPnRhYmxle3dpZHRoOjEwMCU7Ym9yZGVyLWNvbGxhcHNlOmNvbGxhcHNlO2JhY2tncm91bmQtY29sb3I6I2VlZX0jc2hhcmVQcm9qZWN0RGlhbG9nIC50YWJsZS13cmFwcGVyPi5lbXB0eS1tc2d7ZGlzcGxheTpub25lO2hlaWdodDoxMDAlO2FsaWduLWl0ZW1zOmNlbnRlcjtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyO3BhZGRpbmc6MXJlbX0jc2hhcmVQcm9qZWN0RGlhbG9nPi51c2Vycy1jb250YWluZXIuZW1wdHkgLmVtcHR5LW1zZ3tkaXNwbGF5OmZsZXh9I3NoYXJlUHJvamVjdERpYWxvZz4udXNlcnMtY29udGFpbmVyLmVtcHR5IHRhYmxle2Rpc3BsYXk6bm9uZX0jc2hhcmVQcm9qZWN0RGlhbG9nPi51c2Vycy1jb250YWluZXIuaGlkZGVue3Zpc2liaWxpdHk6aGlkZGVufSNzaGFyZVByb2plY3REaWFsb2cgdGQ6bGFzdC1jaGlsZHt3aWR0aDo0MHB4O3RleHQtYWxpZ246Y2VudGVyfSNzaGFyZVByb2plY3REaWFsb2cgdGQ6bGFzdC1jaGlsZD5zdmd7d2lkdGg6MTJweDtoZWlnaHQ6MTJweH0jc2hhcmVQcm9qZWN0RGlhbG9nIHRkLmFjdGlvbi1idG57Y3Vyc29yOnBvaW50ZXJ9I3NoYXJlUHJvamVjdERpYWxvZyB0ZC5hY3Rpb24tYnRuOmhvdmVye2JhY2tncm91bmQtY29sb3I6I2RiZGJkYn0jc2hhcmVQcm9qZWN0RGlhbG9nIHRye2JvcmRlci1ib3R0b206MnB4IHNvbGlkICNmZmZ9I3NoYXJlUHJvamVjdERpYWxvZyB0ci50by1kZWxldGU+dGQ6Zmlyc3QtY2hpbGR7b3BhY2l0eTouNH0jc2hhcmVQcm9qZWN0RGlhbG9nIHRkLnVzZXItZGF0YT5pbWd7ZmxvYXQ6bGVmdDtoZWlnaHQ6NjRweDt3aWR0aDo2NHB4O21hcmdpbi1yaWdodDouNXJlbX0jc2hhcmVQcm9qZWN0RGlhbG9nIHRkLnVzZXItZGF0YT5kaXZ7ZGlzcGxheTpmbGV4O2hlaWdodDo2NHB4O3BhZGRpbmc6LjRyZW07ZmxleC1kaXJlY3Rpb246Y29sdW1uO2p1c3RpZnktY29udGVudDpzcGFjZS1hcm91bmR9I3NoYXJlUHJvamVjdERpYWxvZyB0ZC51c2VyLWRhdGE+ZGl2PnNwYW46bnRoLWNoaWxkKDIpe2ZvbnQtd2VpZ2h0OmxpZ2h0ZXJ9I3NoYXJlUHJvamVjdERpYWxvZz4ucGVuZGluZy11c2VycyB0ZC51c2VyLWRhdGF7cGFkZGluZzouNHJlbX0jc2hhcmVQcm9qZWN0RGlhbG9nPmZvcm0+bGFiZWx7ZGlzcGxheTpibG9ja30jc2hhcmVQcm9qZWN0RGlhbG9nPmZvcm0+ZGl2e2Rpc3BsYXk6ZmxleH0jc2hhcmVQcm9qZWN0RGlhbG9nPmZvcm0gaW5wdXR7ZmxleC1ncm93OjF9I3NoYXJlUHJvamVjdERpYWxvZz5mb3JtIGJ1dHRvbnt3aWR0aDo2MHB4fSNzaGFyZVByb2plY3REaWFsb2c+LmxvYWRlci1jb250YWluZXJ7ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyO3Bvc2l0aW9uOmFic29sdXRlO3dpZHRoOjEwMCU7aGVpZ2h0OjEwMCU7dG9wOjA7bGVmdDowO2JhY2tncm91bmQtY29sb3I6cmdiYSgyNTUsMjU1LDI1NSwuNyl9I3NoYXJlUHJvamVjdERpYWxvZz4ubG9hZGVyLWNvbnRhaW5lci5oaWRkZW57ZGlzcGxheTpub25lfSNzaGFyZVByb2plY3REaWFsb2cgLnNoYXJlLW5vdGlmaWNhdGlvbntwb3NpdGlvbjphYnNvbHV0ZTtib3R0b206MH0jc2hhcmVQcm9qZWN0RGlhbG9nIC5zaGFyZS1ub3RpZmljYXRpb24uaGlkZGVue3Zpc2liaWxpdHk6aGlkZGVufWRpdiNwcm9wc1RhYmxlc0NvbnRhaW5lcntkaXNwbGF5OmZsZXh9Lm1haW5QYW5lbC5yaWdodCBkaXYjcHJvcHNUYWJsZXNDb250YWluZXJ7ZmxleC1kaXJlY3Rpb246Y29sdW1ufS5kYXRhLXRhYmxle3RleHQtYWxpZ246bGVmdDt3aWR0aDoxMDAlfS5kYXRhLXRhYmxlPnRoZWFkIHRoe3BhZGRpbmctbGVmdDouM3JlbTtwYWRkaW5nLXJpZ2h0Oi4zcmVtO2JhY2tncm91bmQtY29sb3I6I2RkZH0uZGF0YS10YWJsZT50Ym9keSB0aHt3aWR0aDo1MCU7Zm9udC13ZWlnaHQ6bm9ybWFsfS5kYXRhLXRhYmxlIHRke2ZvbnQtd2VpZ2h0OmxpZ2h0ZXJ9I21lc3NhZ2VDb250YWluZXJ7cG9zaXRpb246YWJzb2x1dGU7cGFkZGluZzoxcmVtO21heC13aWR0aDozMDBweDtmbGV4LWRpcmVjdGlvbjpjb2x1bW47YWxpZ24taXRlbXM6ZmxleC1lbmQ7Ym90dG9tOjJyZW07cmlnaHQ6MnJlbTtib3gtc2hhZG93OjJweCAycHggNnB4ICNiMmIyYjJ9I21lc3NhZ2VDb250YWluZXI+YnV0dG9ue21hcmdpbi1ib3R0b206LjVyZW19I21lc3NhZ2VDb250YWluZXI+YnV0dG9uPmltZ3t3aWR0aDoxcmVtfSNtZXNzYWdlQ29udGFpbmVyLnN1Y2Nlc3N7YmFja2dyb3VuZC1jb2xvcjojYWVmNWFkfSNtZXNzYWdlQ29udGFpbmVyLmVycm9ye2JhY2tncm91bmQtY29sb3I6I2RjOTM5M30jbWVzc2FnZUNvbnRhaW5lci53YXJuaW5ne2JhY2tncm91bmQtY29sb3I6I2VjZGFhNH0jdmlld3BvcnRNZXNzYWdle2Rpc3BsYXk6bm9uZTtwb3NpdGlvbjphYnNvbHV0ZTt3aWR0aDoxMDAlO2hlaWdodDoxMDAlO3RvcDowO2p1c3RpZnktY29udGVudDpjZW50ZXI7YWxpZ24taXRlbXM6Y2VudGVyO3RleHQtYWxpZ246Y2VudGVyO2ZvbnQtd2VpZ2h0OmxpZ2h0ZXI7YmFja2dyb3VuZC1jb2xvcjpyZ2JhKDI1NSwyNTUsMjU1LC45NSl9I3ZpZXdwb3J0TWVzc2FnZS5hY3RpdmV7ZGlzcGxheTpmbGV4fSN2aWV3cG9ydE1lc3NhZ2UgcHtwYWRkaW5nLWJvdHRvbToxcmVtfSN2aWV3cG9ydE1lc3NhZ2UgLmJ0bnMtY29udGFpbmVye2Rpc3BsYXk6ZmxleDtqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYXJvdW5kfSNub3RpZmljYXRpb25zQ29udGFpbmVye2Rpc3BsYXk6bm9uZTtwb3NpdGlvbjphYnNvbHV0ZTt3aWR0aDo0NTBweDt0b3A6Y2FsYyh2YXIoLS1oZWFkZXItaGVpZ2h0KSArIDFyZW0pO3JpZ2h0OjFyZW07b3BhY2l0eTowO3RyYW5zaXRpb246b3BhY2l0eSAuMnMgZWFzZS1pbjtiYWNrZ3JvdW5kLWNvbG9yOiNmNmY2ZjY7Ym94LXNoYWRvdzowIDAgMTJweCByZ2JhKDAsMCwwLC4yKX0jbm90aWZpY2F0aW9uc0NvbnRhaW5lcj4uZW1wdHktbXNne2Rpc3BsYXk6bm9uZTtwYWRkaW5nOjJyZW0gLjhyZW07dGV4dC1hbGlnbjpjZW50ZXJ9I25vdGlmaWNhdGlvbnNDb250YWluZXIub3BlbntkaXNwbGF5OnVuc2V0O29wYWNpdHk6MX0jbm90aWZpY2F0aW9uc0NvbnRhaW5lci5lbXB0eT4ubm90aWZpY2F0aW9ucy1ib2R5e2Rpc3BsYXk6bm9uZX0jbm90aWZpY2F0aW9uc0NvbnRhaW5lci5lbXB0eT4uZW1wdHktbXNne2Rpc3BsYXk6YmxvY2t9Lm5vdGlmaWNhdGlvbnMtaGVhZGVye3BhZGRpbmc6LjhyZW07YmFja2dyb3VuZC1jb2xvcjojZmJmYmZiO2JvcmRlci1ib3R0b206MnB4IHNvbGlkICNkYmRiZGJ9Lm5vdGlmaWNhdGlvbnMtYm9keXttYXgtaGVpZ2h0OjM1MHB4O292ZXJmbG93OmF1dG99Lm5vdGlmaWNhdGlvbnMtYm9keT5saXtkaXNwbGF5OmZsZXg7cGFkZGluZzouOHJlbTtjdXJzb3I6cG9pbnRlcjtib3JkZXItYm90dG9tOjFweCBzb2xpZCAjZGJkYmRifS5ub3RpZmljYXRpb25zLWJvZHk+bGkucGVuZGluZ3tiYWNrZ3JvdW5kLWNvbG9yOiNjYmVhZjV9Lm5vdGlmaWNhdGlvbnMtYm9keT5saS5wZW5kaW5nOmhvdmVye2JhY2tncm91bmQtY29sb3I6I2MyZTBlYX0ubm90aWZpY2F0aW9ucy1ib2R5PmxpOmhvdmVye2JhY2tncm91bmQtY29sb3I6I2VhZWFlYX0ubm90aWZpY2F0aW9uLXRodW1ie2hlaWdodDo1MHB4O21hcmdpbi1yaWdodDoxcmVtfS5ub3RpZmljYXRpb24tY29udGVudD5oNHttYXJnaW4tYm90dG9tOi4ycmVtO2ZvbnQtd2VpZ2h0OjUwMH0ubm90aWZpY2F0aW9uLWNvbnRlbnQ+cHtmb250LXdlaWdodDpsaWdodGVyfSNjb250ZXh0TWVudXt3aWR0aDoxMjBweDtwb3NpdGlvbjphYnNvbHV0ZTtwYWRkaW5nLXRvcDouNXJlbTtiYWNrZ3JvdW5kLWNvbG9yOiNmZmY7Ym94LXNoYWRvdzoycHggMnB4IDdweCByZ2JhKDAsMCwwLC4yKX0jY29udGV4dE1lbnU+dWw+bGl7cGFkZGluZzouNnJlbTtjdXJzb3I6cG9pbnRlcn0jY29udGV4dE1lbnU+dWw+bGk6aG92ZXJ7YmFja2dyb3VuZC1jb2xvcjpyZ2JhKDAsMCwwLC4yKX0uc2VsZWN0ZWR7LS1maWxsOiAjZmZiZDAwOy0tc3Ryb2tlOiAjZTg5ODA3Oy0tc3Ryb2tlLXc6IDhweH0uc2VsZWN0ZWQuZmlsbC5zdHJva2U+cGF0aCwuc2VsZWN0ZWQuZmlsbC5zdHJva2U+cG9seWdvbiwuc2VsZWN0ZWQuZmlsbC5zdHJva2U+Y2lyY2xlLC5zZWxlY3RlZC5maWxsLnN0cm9rZT5yZWN0e2ZpbGw6dmFyKC0tZmlsbCk7c3Ryb2tlOnZhcigtLXN0cm9rZSk7c3Ryb2tlLXdpZHRoOnZhcigtLXN0cm9rZS13KX0uc2VsZWN0ZWQuc3Ryb2tlPnBhdGgsLnNlbGVjdGVkLnN0cm9rZT5wb2x5bGluZSwuc2VsZWN0ZWQuc3Ryb2tlPmxpbmV7c3Ryb2tlOnZhcigtLXN0cm9rZSk7c3Ryb2tlLXdpZHRoOnZhcigtLXN0cm9rZS13KX0uc2VsZWN0ZWQuZmlsbD5wYXRoLC5zZWxlY3RlZC5maWxsPnBvbHlnb24sLnNlbGVjdGVkLmZpbGw+Y2lyY2xle2ZpbGw6dmFyKC0tZmlsbCl9LnNlbGVjdGVkLnN0cm9rZT4uaGF0Y2g+bGluZXtzdHJva2U6dmFyKC0tc3Ryb2tlKTtzdHJva2Utd2lkdGg6dmFyKC0tc3Ryb2tlLXcpfTpyb290ey0taGVhZGVyLWhlaWdodDogMi41cmVtOy0tdGhlbWUtYmx1ZTogIzJhOGZiMTstLXRoZW1lLXllbGxvdzogI2VhOGMxNX0qLCo6OmJlZm9yZSwqOjphZnRlcntib3gtc2l6aW5nOmJvcmRlci1ib3h9aDEsaDIsaDMsaDQsaDUscHttYXJnaW4tdG9wOjA7bWFyZ2luLWJvdHRvbTowfXVsLG9se2xpc3Qtc3R5bGUtdHlwZTpub25lO21hcmdpbi10b3A6MDttYXJnaW4tYm90dG9tOjA7cGFkZGluZy1sZWZ0OjB9YnV0dG9ue2JvcmRlci1zdHlsZTpub25lO3BhZGRpbmc6MDtiYWNrZ3JvdW5kLWNvbG9yOnVuc2V0fWJvZHl7ZGlzcGxheTpmbGV4O2ZsZXgtZGlyZWN0aW9uOmNvbHVtbjttYXJnaW46MDtvdmVyZmxvdzpoaWRkZW47Y29sb3I6IzU0NTQ1NDtmb250LWZhbWlseTpcXFwiT3N3YWxkXFxcIixzYW5zLXNlcmlmfXN2Zy5zdmctbG9hZGVye3dpZHRoOjEzMHB4O2hlaWdodDo5MHB4fS5idXR0b25CYXNle3BhZGRpbmc6LjRyZW07Y3Vyc29yOnBvaW50ZXI7Ym9yZGVyLXdpZHRoOjFweDtib3JkZXItc3R5bGU6c29saWQ7Zm9udC1mYW1pbHk6aW5oZXJpdH0uYnV0dG9uQmFzZS5zaWRlc3tib3JkZXItdG9wLXN0eWxlOm5vbmU7Ym9yZGVyLWJvdHRvbS1zdHlsZTpub25lfS5idXR0b25CYXNlLmxpZ2h0e2NvbG9yOiMzNzM3Mzc7Ym9yZGVyLWNvbG9yOiNjZmNmY2Z9LmJ1dHRvbkJhc2UubGlnaHQ6bm90KC5kaXNhYmxlZCk6aG92ZXJ7YmFja2dyb3VuZC1jb2xvcjojZWNlY2VjfS5idXR0b25CYXNlLmVtcGhhc2l6ZXtib3JkZXItY29sb3I6I2UwZTBlMDtiYWNrZ3JvdW5kLWNvbG9yOiNkMWYwZWN9LmJ1dHRvbkJhc2UuZW1waGFzaXplOm5vdCguZGlzYWJsZWQpOmhvdmVye2JhY2tncm91bmQtY29sb3I6I2FjZDNjZX0uYnV0dG9uQmFzZS5kYW5nZXJ7Y29sb3I6I2Y1NTI1Mjtib3JkZXItY29sb3I6I2ZiYTRhNH0uYnV0dG9uQmFzZS5kYW5nZXI6bm90KC5kaXNhYmxlZCk6aG92ZXJ7YmFja2dyb3VuZC1jb2xvcjojZmZlOWU5fS5idXR0b25CYXNlLmRpc2FibGVke2N1cnNvcjp1bnNldDtvcGFjaXR5Oi41fWJ1dHRvbi5kaXNhYmxlZDpmb2N1c3tvdXRsaW5lLXN0eWxlOm5vbmV9LmJ1dHRvbkJhc2UubG9ja2Vke2N1cnNvcjp1bnNldH0uYnV0dG9uQmFzZS5sb2NrZWQ6aG92ZXJ7YmFja2dyb3VuZC1jb2xvcjp1bnNldH0uaWNvbi1idG57Y3Vyc29yOnBvaW50ZXJ9aGVhZGVyIC5pY29uLWJ0bntwYWRkaW5nOmNhbGMoKCh2YXIoLS1oZWFkZXItaGVpZ2h0KSAtIDJweCkgLSAyNHB4KSAvIDIpO2hlaWdodDpjYWxjKHZhcigtLWhlYWRlci1oZWlnaHQpIC0gMnB4KTt3aWR0aDpjYWxjKHZhcigtLWhlYWRlci1oZWlnaHQpIC0gMnB4KX0uaWNvbi1idG46bm90KC5kaXNhYmxlZCk6bm90KC5idG4tdG9vbC1lbmFibGVkKTpob3ZlcntiYWNrZ3JvdW5kLWNvbG9yOiNlY2VjZWN9Lmljb24tYnRuPnN2Z3tkaXNwbGF5OmJsb2NrO3dpZHRoOjI0cHg7aGVpZ2h0OjI0cHh9Lmljb24tYnRuLmRpc2FibGVke29wYWNpdHk6LjE7Y3Vyc29yOmF1dG99Lmljb24tYnRuLmhpZGRlbntkaXNwbGF5Om5vbmV9LmJ0bi10b29sLWVuYWJsZWR7YmFja2dyb3VuZC1jb2xvcjojOTZjYmRifS5idG4tYmctaW1ne2JhY2tncm91bmQtcmVwZWF0Om5vLXJlcGVhdDtiYWNrZ3JvdW5kLXBvc2l0aW9uLXk6Y2VudGVyO2JhY2tncm91bmQtcG9zaXRpb24teDouOHJlbX0uZ29vZ2xlLWxvZ297YmFja2dyb3VuZC1pbWFnZTp1cmwoZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCxQSE4yWnlCM2FXUjBhRDBpTVRnaUlHaGxhV2RvZEQwaU1UZ2lJSFpwWlhkQ2IzZzlJakFnTUNBeE9DQXhPQ0lnZUcxc2JuTTlJbWgwZEhBNkx5OTNkM2N1ZHpNdWIzSm5Mekl3TURBdmMzWm5JajQ4ZEdsMGJHVStjM1Z3WlhJZ1p6d3ZkR2wwYkdVK1BHY2dabWxzYkMxeWRXeGxQU0psZG1WdWIyUmtJajQ4Y0dGMGFDQmtQU0pOT1NBekxqUTRZekV1TmprZ01DQXlMamd6TGpjeklETXVORGdnTVM0ek5Hd3lMalUwTFRJdU5EaERNVE11TkRZdU9Ea2dNVEV1TkRNZ01DQTVJREFnTlM0ME9DQXdJREl1TkRRZ01pNHdNaTQ1TmlBMExqazJiREl1T1RFZ01pNHlOa00wTGpZZ05TNHdOU0EyTGpZeUlETXVORGdnT1NBekxqUTRlaUlnWm1sc2JEMGlJMFZCTkRNek5TSXZQanh3WVhSb0lHUTlJazB4Tnk0Mk5DQTVMakpqTUMwdU56UXRMakEyTFRFdU1qZ3RMakU1TFRFdU9EUklPWFl6TGpNMGFEUXVPVFpqTFM0eExqZ3pMUzQyTkNBeUxqQTRMVEV1T0RRZ01pNDVNbXd5TGpnMElESXVNbU14TGpjdE1TNDFOeUF5TGpZNExUTXVPRGdnTWk0Mk9DMDJMall5ZWlJZ1ptbHNiRDBpSXpReU9EVkdOQ0l2UGp4d1lYUm9JR1E5SWswekxqZzRJREV3TGpjNFFUVXVOVFFnTlM0MU5DQXdJREFnTVNBekxqVTRJRGxqTUMwdU5qSXVNVEV0TVM0eU1pNHlPUzB4TGpjNFRDNDVOaUEwTGprMlFUa3VNREE0SURrdU1EQTRJREFnTUNBd0lEQWdPV013SURFdU5EVXVNelVnTWk0NE1pNDVOaUEwTGpBMGJESXVPVEl0TWk0eU5ub2lJR1pwYkd3OUlpTkdRa0pETURVaUx6NDhjR0YwYUNCa1BTSk5PU0F4T0dNeUxqUXpJREFnTkM0ME55MHVPQ0ExTGprMkxUSXVNVGhzTFRJdU9EUXRNaTR5WXkwdU56WXVOVE10TVM0M09DNDVMVE11TVRJdU9TMHlMak00SURBdE5DNDBMVEV1TlRjdE5TNHhNaTB6TGpjMFRDNDVOeUF4TXk0d05FTXlMalExSURFMUxqazRJRFV1TkRnZ01UZ2dPU0F4T0hvaUlHWnBiR3c5SWlNek5FRTROVE1pTHo0OGNHRjBhQ0JtYVd4c1BTSnViMjVsSWlCa1BTSk5NQ0F3YURFNGRqRTRTREI2SWk4K1BDOW5Qand2YzNablBnPT0pfSNzYXZlQnRuLmVuYWJsZWQ+c3ZnLCNub3RpZmljYXRpb25CdG4uZW5hYmxlZD5zdmd7ZmlsbDp2YXIoLS10aGVtZS15ZWxsb3cpO3RyYW5zZm9ybTpzY2FsZSgxLjIpfSNzYXZlQnRuPnN2Zy5wcm9ncmVzcy1pY29ue2Rpc3BsYXk6bm9uZX0jc2F2ZUJ0bi5wcm9ncmVzczpob3ZlcntjdXJzb3I6YXV0bztiYWNrZ3JvdW5kLWNvbG9yOnVuc2V0fSNzYXZlQnRuLnByb2dyZXNzPnN2Zy5zYXZlLWljb257ZGlzcGxheTpub25lfSNzYXZlQnRuLnByb2dyZXNzPnN2Zy5wcm9ncmVzcy1pY29ue2Rpc3BsYXk6YmxvY2t9aGVhZGVye2hlaWdodDp2YXIoLS1oZWFkZXItaGVpZ2h0KTtwYWRkaW5nLXJpZ2h0OjhyZW07YWxpZ24taXRlbXM6c3RyZXRjaDt6LWluZGV4OjE7YmFja2dyb3VuZC1jb2xvcjojZjZmNmY2O2JvcmRlci1ib3R0b206MnB4IHNvbGlkIHZhcigtLXRoZW1lLWJsdWUpfWhlYWRlcj5zcGFuOmZpcnN0LWNoaWxke3dpZHRoOjRyZW19aGVhZGVyPnNwYW46Zmlyc3QtY2hpbGQ+aW1ne2hlaWdodDoxMDAlO3BhZGRpbmc6LjNyZW07bWFyZ2luOmF1dG87ZGlzcGxheTpibG9ja31oZWFkZXI+aDF7cG9zaXRpb246YWJzb2x1dGU7cmlnaHQ6MTAwJX0jcHJvamVjdHNMaXN0QnRue21pbi13aWR0aDoxMHJlbTtmb250LXNpemU6MXJlbTtmb250LXdlaWdodDpub3JtYWx9I3Byb2plY3RzTGlzdEJ0bj5zcGFue2Rpc3BsYXk6aW5saW5lLWJsb2NrO3dpZHRoOjEwMCU7dGV4dC1hbGlnbjpjZW50ZXJ9QG1lZGlhKG1heC13aWR0aDogNTAwcHgpeyNwcm9qZWN0c0xpc3RCdG57ZGlzcGxheTp1bnNldDttaW4td2lkdGg6dW5zZXQ7d2lkdGg6Mi41cmVtO2ZvbnQtc2l6ZTowO2JvcmRlci1sZWZ0LXN0eWxlOm5vbmU7YmFja2dyb3VuZC1yZXBlYXQ6bm8tcmVwZWF0O2JhY2tncm91bmQtcG9zaXRpb246Y2VudGVyO2JhY2tncm91bmQtaW1hZ2U6dXJsKFwiICsgX19fQ1NTX0xPQURFUl9VUkxfUkVQTEFDRU1FTlRfMl9fXyArIFwiKTtiYWNrZ3JvdW5kLXNpemU6MjRweH19I3Rvb2xiYXJzQ29udGFpbmVye2ZsZXgtZ3JvdzoxO2p1c3RpZnktY29udGVudDpmbGV4LWVuZH0jZHJhd2luZ3NCdG5ze21pbi13aWR0aDo4cmVtO3RleHQtYWxpZ246Y2VudGVyfSNkcmF3aW5nc0J0bnM+YnV0dG9ue2hlaWdodDpjYWxjKHZhcigtLWhlYWRlci1oZWlnaHQpIC0gMnB4KTt3aWR0aDoxMDAlO2JvcmRlci1sZWZ0LXN0eWxlOm5vbmV9I2RyYXdpbmdzQnRucz51bHtmb250LXNpemU6LjlyZW07Zm9udC13ZWlnaHQ6bGlnaHRlcjtjdXJzb3I6cG9pbnRlcjtiYWNrZ3JvdW5kLWNvbG9yOiNmNmY2ZjY7Ym94LXNoYWRvdzowcHggMnB4IDVweCAjYjZiNmI2fSNkcmF3aW5nc0J0bnM+dWw+bGl7cGFkZGluZzouNHJlbX0jZHJhd2luZ3NCdG5zPnVsPmxpLmFjdGl2ZXtiYWNrZ3JvdW5kLWNvbG9yOiNjMmMyYzI7Y3Vyc29yOmF1dG99I2RyYXdpbmdzQnRucz51bD5saTpub3QoLmFjdGl2ZSk6aG92ZXJ7YmFja2dyb3VuZC1jb2xvcjojZGZkZmRmfS5nbG9iYWwtbmF2LWJ0bnN7ZGlzcGxheTpmbGV4O3Bvc2l0aW9uOmFic29sdXRlO3RvcDowO3JpZ2h0OjA7ei1pbmRleDoxMDAwO2JvcmRlci1sZWZ0OjFweCBzb2xpZCAjYzhjOGM4fUBtZWRpYShtYXgtd2lkdGg6IDUwMHB4KXtoZWFkZXJ7b3JkZXI6MTtib3JkZXItdG9wOjJweCBzb2xpZCB2YXIoLS10aGVtZS1ibHVlKTtib3JkZXItYm90dG9tOnVuc2V0fWhlYWRlcj5zcGFuOmZpcnN0LWNoaWxke2Rpc3BsYXk6bm9uZX0jdG9vbGJhcnNDb250YWluZXJ7cG9zaXRpb246YWJzb2x1dGU7cmlnaHQ6MH0jZHJhd2luZ3NCdG5zPnVse2JveC1zaGFkb3c6MHB4IC0ycHggN3B4ICNiNmI2YjZ9fS5kcm9wZG93bi1jb250YWluZXJ7ei1pbmRleDoxO3Bvc2l0aW9uOnJlbGF0aXZlfS5kcm9wZG93bi1jb250YWluZXI+LmRyb3Bkb3duLWNvbnRlbnR7ZGlzcGxheTpmbGV4O2ZsZXgtZGlyZWN0aW9uOmNvbHVtbjt0cmFuc2l0aW9uOi42czt0cmFuc2Zvcm06dHJhbnNsYXRlWSgtMTAwJSk7b3BhY2l0eTowO3otaW5kZXg6LTE7cG9zaXRpb246YWJzb2x1dGU7cmlnaHQ6MDtsZWZ0OjA7dG9wOmNhbGModmFyKC0taGVhZGVyLWhlaWdodCkgLSAycHgpfS5kcm9wZG93bi1jb250YWluZXIucmVzcG9uc2l2ZT4uZHJvcGRvd24tY29udGVudHtkaXNwbGF5OmlubGluZTtvcGFjaXR5OnVuc2V0O3otaW5kZXg6dW5zZXQ7cG9zaXRpb246dW5zZXR9QG1lZGlhKG1heC13aWR0aDogODAwcHgpey5kcm9wZG93bi1jb250YWluZXIucmVzcG9uc2l2ZT4uZHJvcGRvd24tY29udGVudHtkaXNwbGF5OmZsZXg7b3BhY2l0eTowO3otaW5kZXg6LTE7cG9zaXRpb246YWJzb2x1dGV9fS5kcm9wZG93bi1jb250YWluZXIub3Blbj4uZHJvcGRvd24tY29udGVudHt0cmFuc2Zvcm06dHJhbnNsYXRlWSgwJSk7b3BhY2l0eToxfUBtZWRpYShtYXgtd2lkdGg6IDUwMHB4KXsuZHJvcGRvd24tY29udGFpbmVyPi5kcm9wZG93bi1jb250ZW50e3RyYW5zZm9ybTp1bnNldH0uZHJvcGRvd24tY29udGFpbmVyLm9wZW4+LmRyb3Bkb3duLWNvbnRlbnR7dHJhbnNmb3JtOnRyYW5zbGF0ZVkoY2FsYygtMTAwJSAtIDIuNXJlbSArIDJweCkpfX1tYWlue3Bvc2l0aW9uOnJlbGF0aXZlO2hlaWdodDpjYWxjKDEwMHZoIC0gdmFyKC0taGVhZGVyLWhlaWdodCkpfSN3b3Jrc3BhY2Vze2hlaWdodDoxMDAlfS53b3Jrc3BhY2V7aGVpZ2h0OjEwMCV9Zm9ybSAudG9wLWxhYmVse21hcmdpbi1ib3R0b206LjVyZW19Zm9ybSAuYmFzZS1pbnB1dHtwYWRkaW5nOi40cmVtfWZvcm0gLmVycm9yLW1zZ3tmb250LXNpemU6LjlyZW07Zm9udC13ZWlnaHQ6bGlnaHRlcjtjb2xvcjpyZWR9Zm9ybSAuZXJyb3ItbXNnLmhpZGRlbnt2aXNpYmlsaXR5OmhpZGRlbn0jcmVuYW1lUHJvamVjdEZvcm0gLnJlbmFtZS1mb3JtLWNvbnRlbnR7ZGlzcGxheTpmbGV4O3dpZHRoOjEwMCU7ZmxleC1kaXJlY3Rpb246Y29sdW1ufS5kcmF3aW5nc0NvbnRhaW5lcntoZWlnaHQ6MTAwJX0uZHJhd2luZ3NDb250YWluZXI+ZGl2e2hlaWdodDoxMDAlfS5kcmF3aW5nc0NvbnRhaW5lcj5kaXY+c3Zne2hlaWdodDoxMDAlO3dpZHRoOjEwMCV9QG1lZGlhIGFsbCBhbmQgKGRpc3BsYXktbW9kZTogc3RhbmRhbG9uZSl7aGVhZGVye2JvcmRlci10b3A6MXB4IHNvbGlkICNkZWRlZGV9fVwiLCBcIlwiXSk7XG4vLyBFeHBvcnRzXG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHM7XG4iLCJcInVzZSBzdHJpY3RcIjtcblxuLypcbiAgTUlUIExpY2Vuc2UgaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZS5waHBcbiAgQXV0aG9yIFRvYmlhcyBLb3BwZXJzIEBzb2tyYVxuKi9cbi8vIGNzcyBiYXNlIGNvZGUsIGluamVjdGVkIGJ5IHRoZSBjc3MtbG9hZGVyXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZnVuYy1uYW1lc1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAodXNlU291cmNlTWFwKSB7XG4gIHZhciBsaXN0ID0gW107IC8vIHJldHVybiB0aGUgbGlzdCBvZiBtb2R1bGVzIGFzIGNzcyBzdHJpbmdcblxuICBsaXN0LnRvU3RyaW5nID0gZnVuY3Rpb24gdG9TdHJpbmcoKSB7XG4gICAgcmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICB2YXIgY29udGVudCA9IGNzc1dpdGhNYXBwaW5nVG9TdHJpbmcoaXRlbSwgdXNlU291cmNlTWFwKTtcblxuICAgICAgaWYgKGl0ZW1bMl0pIHtcbiAgICAgICAgcmV0dXJuIFwiQG1lZGlhIFwiLmNvbmNhdChpdGVtWzJdLCBcIiB7XCIpLmNvbmNhdChjb250ZW50LCBcIn1cIik7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBjb250ZW50O1xuICAgIH0pLmpvaW4oJycpO1xuICB9OyAvLyBpbXBvcnQgYSBsaXN0IG9mIG1vZHVsZXMgaW50byB0aGUgbGlzdFxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZnVuYy1uYW1lc1xuXG5cbiAgbGlzdC5pID0gZnVuY3Rpb24gKG1vZHVsZXMsIG1lZGlhUXVlcnksIGRlZHVwZSkge1xuICAgIGlmICh0eXBlb2YgbW9kdWxlcyA9PT0gJ3N0cmluZycpIHtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICAgICAgbW9kdWxlcyA9IFtbbnVsbCwgbW9kdWxlcywgJyddXTtcbiAgICB9XG5cbiAgICB2YXIgYWxyZWFkeUltcG9ydGVkTW9kdWxlcyA9IHt9O1xuXG4gICAgaWYgKGRlZHVwZSkge1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBwcmVmZXItZGVzdHJ1Y3R1cmluZ1xuICAgICAgICB2YXIgaWQgPSB0aGlzW2ldWzBdO1xuXG4gICAgICAgIGlmIChpZCAhPSBudWxsKSB7XG4gICAgICAgICAgYWxyZWFkeUltcG9ydGVkTW9kdWxlc1tpZF0gPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IG1vZHVsZXMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICB2YXIgaXRlbSA9IFtdLmNvbmNhdChtb2R1bGVzW19pXSk7XG5cbiAgICAgIGlmIChkZWR1cGUgJiYgYWxyZWFkeUltcG9ydGVkTW9kdWxlc1tpdGVtWzBdXSkge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29udGludWVcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGlmIChtZWRpYVF1ZXJ5KSB7XG4gICAgICAgIGlmICghaXRlbVsyXSkge1xuICAgICAgICAgIGl0ZW1bMl0gPSBtZWRpYVF1ZXJ5O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGl0ZW1bMl0gPSBcIlwiLmNvbmNhdChtZWRpYVF1ZXJ5LCBcIiBhbmQgXCIpLmNvbmNhdChpdGVtWzJdKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBsaXN0LnB1c2goaXRlbSk7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBsaXN0O1xufTtcblxuZnVuY3Rpb24gY3NzV2l0aE1hcHBpbmdUb1N0cmluZyhpdGVtLCB1c2VTb3VyY2VNYXApIHtcbiAgdmFyIGNvbnRlbnQgPSBpdGVtWzFdIHx8ICcnOyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcHJlZmVyLWRlc3RydWN0dXJpbmdcblxuICB2YXIgY3NzTWFwcGluZyA9IGl0ZW1bM107XG5cbiAgaWYgKCFjc3NNYXBwaW5nKSB7XG4gICAgcmV0dXJuIGNvbnRlbnQ7XG4gIH1cblxuICBpZiAodXNlU291cmNlTWFwICYmIHR5cGVvZiBidG9hID09PSAnZnVuY3Rpb24nKSB7XG4gICAgdmFyIHNvdXJjZU1hcHBpbmcgPSB0b0NvbW1lbnQoY3NzTWFwcGluZyk7XG4gICAgdmFyIHNvdXJjZVVSTHMgPSBjc3NNYXBwaW5nLnNvdXJjZXMubWFwKGZ1bmN0aW9uIChzb3VyY2UpIHtcbiAgICAgIHJldHVybiBcIi8qIyBzb3VyY2VVUkw9XCIuY29uY2F0KGNzc01hcHBpbmcuc291cmNlUm9vdCB8fCAnJykuY29uY2F0KHNvdXJjZSwgXCIgKi9cIik7XG4gICAgfSk7XG4gICAgcmV0dXJuIFtjb250ZW50XS5jb25jYXQoc291cmNlVVJMcykuY29uY2F0KFtzb3VyY2VNYXBwaW5nXSkuam9pbignXFxuJyk7XG4gIH1cblxuICByZXR1cm4gW2NvbnRlbnRdLmpvaW4oJ1xcbicpO1xufSAvLyBBZGFwdGVkIGZyb20gY29udmVydC1zb3VyY2UtbWFwIChNSVQpXG5cblxuZnVuY3Rpb24gdG9Db21tZW50KHNvdXJjZU1hcCkge1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW5kZWZcbiAgdmFyIGJhc2U2NCA9IGJ0b2EodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KEpTT04uc3RyaW5naWZ5KHNvdXJjZU1hcCkpKSk7XG4gIHZhciBkYXRhID0gXCJzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04O2Jhc2U2NCxcIi5jb25jYXQoYmFzZTY0KTtcbiAgcmV0dXJuIFwiLyojIFwiLmNvbmNhdChkYXRhLCBcIiAqL1wiKTtcbn0iLCJcInVzZSBzdHJpY3RcIjtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAodXJsLCBvcHRpb25zKSB7XG4gIGlmICghb3B0aW9ucykge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICAgIG9wdGlvbnMgPSB7fTtcbiAgfSAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW5kZXJzY29yZS1kYW5nbGUsIG5vLXBhcmFtLXJlYXNzaWduXG5cblxuICB1cmwgPSB1cmwgJiYgdXJsLl9fZXNNb2R1bGUgPyB1cmwuZGVmYXVsdCA6IHVybDtcblxuICBpZiAodHlwZW9mIHVybCAhPT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gdXJsO1xuICB9IC8vIElmIHVybCBpcyBhbHJlYWR5IHdyYXBwZWQgaW4gcXVvdGVzLCByZW1vdmUgdGhlbVxuXG5cbiAgaWYgKC9eWydcIl0uKlsnXCJdJC8udGVzdCh1cmwpKSB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduXG4gICAgdXJsID0gdXJsLnNsaWNlKDEsIC0xKTtcbiAgfVxuXG4gIGlmIChvcHRpb25zLmhhc2gpIHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICB1cmwgKz0gb3B0aW9ucy5oYXNoO1xuICB9IC8vIFNob3VsZCB1cmwgYmUgd3JhcHBlZD9cbiAgLy8gU2VlIGh0dHBzOi8vZHJhZnRzLmNzc3dnLm9yZy9jc3MtdmFsdWVzLTMvI3VybHNcblxuXG4gIGlmICgvW1wiJygpIFxcdFxcbl0vLnRlc3QodXJsKSB8fCBvcHRpb25zLm5lZWRRdW90ZXMpIHtcbiAgICByZXR1cm4gXCJcXFwiXCIuY29uY2F0KHVybC5yZXBsYWNlKC9cIi9nLCAnXFxcXFwiJykucmVwbGFjZSgvXFxuL2csICdcXFxcbicpLCBcIlxcXCJcIik7XG4gIH1cblxuICByZXR1cm4gdXJsO1xufTsiLCJleHBvcnQgZGVmYXVsdCBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwiNmE1MTZmZjVmYWMyODEzOWE1ZjA1YzU5Mjk3NGFkN2Euc3ZnXCI7IiwiZXhwb3J0IGRlZmF1bHQgX193ZWJwYWNrX3B1YmxpY19wYXRoX18gKyBcImUyNjg0ZDIxN2E4ODJhZTAyYzg2MWI3ZmM1MzE0ZTcyLnN2Z1wiOyIsImV4cG9ydCBkZWZhdWx0IF9fd2VicGFja19wdWJsaWNfcGF0aF9fICsgXCI2OTk0ODVhZDQyNGY2OGZmOTA2OGExMTFkZWFiYTA0Ny5zdmdcIjsiLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wRGVmYXVsdCAoZXgpIHsgcmV0dXJuIChleCAmJiAodHlwZW9mIGV4ID09PSAnb2JqZWN0JykgJiYgJ2RlZmF1bHQnIGluIGV4KSA/IGV4WydkZWZhdWx0J10gOiBleDsgfVxuXG52YXIgZmlyZWJhc2UgPSBfaW50ZXJvcERlZmF1bHQocmVxdWlyZSgnQGZpcmViYXNlL2FwcCcpKTtcbnZhciB0c2xpYiA9IHJlcXVpcmUoJ3RzbGliJyk7XG52YXIgbG9nZ2VyID0gcmVxdWlyZSgnQGZpcmViYXNlL2xvZ2dlcicpO1xudmFyIHV0aWwgPSByZXF1aXJlKCdAZmlyZWJhc2UvdXRpbCcpO1xudmFyIGNvbXBvbmVudCA9IHJlcXVpcmUoJ0BmaXJlYmFzZS9jb21wb25lbnQnKTtcbnZhciB3ZWJjaGFubmVsV3JhcHBlciA9IHJlcXVpcmUoJ0BmaXJlYmFzZS93ZWJjaGFubmVsLXdyYXBwZXInKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKiBUaGUgc2VtdmVyICh3d3cuc2VtdmVyLm9yZykgdmVyc2lvbiBvZiB0aGUgU0RLLiAqL1xyXG52YXIgU0RLX1ZFUlNJT04gPSBmaXJlYmFzZS5TREtfVkVSU0lPTjtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnZhciBsb2dDbGllbnQgPSBuZXcgbG9nZ2VyLkxvZ2dlcignQGZpcmViYXNlL2ZpcmVzdG9yZScpO1xyXG52YXIgTG9nTGV2ZWw7XHJcbihmdW5jdGlvbiAoTG9nTGV2ZWwpIHtcclxuICAgIExvZ0xldmVsW0xvZ0xldmVsW1wiREVCVUdcIl0gPSAwXSA9IFwiREVCVUdcIjtcclxuICAgIExvZ0xldmVsW0xvZ0xldmVsW1wiRVJST1JcIl0gPSAxXSA9IFwiRVJST1JcIjtcclxuICAgIExvZ0xldmVsW0xvZ0xldmVsW1wiU0lMRU5UXCJdID0gMl0gPSBcIlNJTEVOVFwiO1xyXG59KShMb2dMZXZlbCB8fCAoTG9nTGV2ZWwgPSB7fSkpO1xyXG4vLyBIZWxwZXIgbWV0aG9kcyBhcmUgbmVlZGVkIGJlY2F1c2UgdmFyaWFibGVzIGNhbid0IGJlIGV4cG9ydGVkIGFzIHJlYWQvd3JpdGVcclxuZnVuY3Rpb24gZ2V0TG9nTGV2ZWwoKSB7XHJcbiAgICBpZiAobG9nQ2xpZW50LmxvZ0xldmVsID09PSBsb2dnZXIuTG9nTGV2ZWwuREVCVUcpIHtcclxuICAgICAgICByZXR1cm4gTG9nTGV2ZWwuREVCVUc7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChsb2dDbGllbnQubG9nTGV2ZWwgPT09IGxvZ2dlci5Mb2dMZXZlbC5TSUxFTlQpIHtcclxuICAgICAgICByZXR1cm4gTG9nTGV2ZWwuU0lMRU5UO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIExvZ0xldmVsLkVSUk9SO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIHNldExvZ0xldmVsKG5ld0xldmVsKSB7XHJcbiAgICAvKipcclxuICAgICAqIE1hcCB0aGUgbmV3IGxvZyBsZXZlbCB0byB0aGUgYXNzb2NpYXRlZCBGaXJlYmFzZSBMb2cgTGV2ZWxcclxuICAgICAqL1xyXG4gICAgc3dpdGNoIChuZXdMZXZlbCkge1xyXG4gICAgICAgIGNhc2UgTG9nTGV2ZWwuREVCVUc6XHJcbiAgICAgICAgICAgIGxvZ0NsaWVudC5sb2dMZXZlbCA9IGxvZ2dlci5Mb2dMZXZlbC5ERUJVRztcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBMb2dMZXZlbC5FUlJPUjpcclxuICAgICAgICAgICAgbG9nQ2xpZW50LmxvZ0xldmVsID0gbG9nZ2VyLkxvZ0xldmVsLkVSUk9SO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIExvZ0xldmVsLlNJTEVOVDpcclxuICAgICAgICAgICAgbG9nQ2xpZW50LmxvZ0xldmVsID0gbG9nZ2VyLkxvZ0xldmVsLlNJTEVOVDtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgbG9nQ2xpZW50LmVycm9yKFwiRmlyZXN0b3JlIChcIiArIFNES19WRVJTSU9OICsgXCIpOiBJbnZhbGlkIHZhbHVlIHBhc3NlZCB0byBgc2V0TG9nTGV2ZWxgXCIpO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGRlYnVnKHRhZywgbXNnKSB7XHJcbiAgICB2YXIgb2JqID0gW107XHJcbiAgICBmb3IgKHZhciBfaSA9IDI7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgIG9ialtfaSAtIDJdID0gYXJndW1lbnRzW19pXTtcclxuICAgIH1cclxuICAgIGlmIChsb2dDbGllbnQubG9nTGV2ZWwgPD0gbG9nZ2VyLkxvZ0xldmVsLkRFQlVHKSB7XHJcbiAgICAgICAgdmFyIGFyZ3MgPSBvYmoubWFwKGFyZ1RvU3RyaW5nKTtcclxuICAgICAgICBsb2dDbGllbnQuZGVidWcuYXBwbHkobG9nQ2xpZW50LCB0c2xpYi5fX3NwcmVhZEFycmF5cyhbXCJGaXJlc3RvcmUgKFwiICsgU0RLX1ZFUlNJT04gKyBcIikgW1wiICsgdGFnICsgXCJdOiBcIiArIG1zZ10sIGFyZ3MpKTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBlcnJvcihtc2cpIHtcclxuICAgIHZhciBvYmogPSBbXTtcclxuICAgIGZvciAodmFyIF9pID0gMTsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgb2JqW19pIC0gMV0gPSBhcmd1bWVudHNbX2ldO1xyXG4gICAgfVxyXG4gICAgaWYgKGxvZ0NsaWVudC5sb2dMZXZlbCA8PSBsb2dnZXIuTG9nTGV2ZWwuRVJST1IpIHtcclxuICAgICAgICB2YXIgYXJncyA9IG9iai5tYXAoYXJnVG9TdHJpbmcpO1xyXG4gICAgICAgIGxvZ0NsaWVudC5lcnJvci5hcHBseShsb2dDbGllbnQsIHRzbGliLl9fc3ByZWFkQXJyYXlzKFtcIkZpcmVzdG9yZSAoXCIgKyBTREtfVkVSU0lPTiArIFwiKTogXCIgKyBtc2ddLCBhcmdzKSk7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIENvbnZlcnRzIGFuIGFkZGl0aW9uYWwgbG9nIHBhcmFtZXRlciB0byBhIHN0cmluZyByZXByZXNlbnRhdGlvbi5cclxuICovXHJcbmZ1bmN0aW9uIGFyZ1RvU3RyaW5nKG9iaikge1xyXG4gICAgaWYgKHR5cGVvZiBvYmogPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgcmV0dXJuIG9iajtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHZhciBwbGF0Zm9ybSA9IFBsYXRmb3JtU3VwcG9ydC5nZXRQbGF0Zm9ybSgpO1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHJldHVybiBwbGF0Zm9ybS5mb3JtYXRKU09OKG9iaik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIC8vIENvbnZlcnRpbmcgdG8gSlNPTiBmYWlsZWQsIGp1c3QgbG9nIHRoZSBvYmplY3QgZGlyZWN0bHlcclxuICAgICAgICAgICAgcmV0dXJuIG9iajtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBVbmNvbmRpdGlvbmFsbHkgZmFpbHMsIHRocm93aW5nIGFuIEVycm9yIHdpdGggdGhlIGdpdmVuIG1lc3NhZ2UuXHJcbiAqXHJcbiAqIFJldHVybnMgYW55IHNvIGl0IGNhbiBiZSB1c2VkIGluIGV4cHJlc3Npb25zOlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBsZXQgZnV0dXJlVmFyID0gZmFpbCgnbm90IGltcGxlbWVudGVkIHlldCcpO1xyXG4gKi9cclxuZnVuY3Rpb24gZmFpbChmYWlsdXJlKSB7XHJcbiAgICAvLyBMb2cgdGhlIGZhaWx1cmUgaW4gYWRkaXRpb24gdG8gdGhyb3cgYW4gZXhjZXB0aW9uLCBqdXN0IGluIGNhc2UgdGhlXHJcbiAgICAvLyBleGNlcHRpb24gaXMgc3dhbGxvd2VkLlxyXG4gICAgdmFyIG1lc3NhZ2UgPSBcIkZJUkVTVE9SRSAoXCIgKyBTREtfVkVSU0lPTiArIFwiKSBJTlRFUk5BTCBBU1NFUlRJT04gRkFJTEVEOiBcIiArIGZhaWx1cmU7XHJcbiAgICBlcnJvcihtZXNzYWdlKTtcclxuICAgIC8vIE5PVEU6IFdlIGRvbid0IHVzZSBGaXJlc3RvcmVFcnJvciBoZXJlIGJlY2F1c2UgdGhlc2UgYXJlIGludGVybmFsIGZhaWx1cmVzXHJcbiAgICAvLyB0aGF0IGNhbm5vdCBiZSBoYW5kbGVkIGJ5IHRoZSB1c2VyLiAoQWxzbyBpdCB3b3VsZCBjcmVhdGUgYSBjaXJjdWxhclxyXG4gICAgLy8gZGVwZW5kZW5jeSBiZXR3ZWVuIHRoZSBlcnJvciBhbmQgYXNzZXJ0IG1vZHVsZXMgd2hpY2ggZG9lc24ndCB3b3JrLilcclxuICAgIHRocm93IG5ldyBFcnJvcihtZXNzYWdlKTtcclxufVxyXG4vKipcclxuICogRmFpbHMgaWYgdGhlIGdpdmVuIGFzc2VydGlvbiBjb25kaXRpb24gaXMgZmFsc2UsIHRocm93aW5nIGFuIEVycm9yIHdpdGggdGhlXHJcbiAqIGdpdmVuIG1lc3NhZ2UgaWYgaXQgZGlkLlxyXG4gKi9cclxuZnVuY3Rpb24gYXNzZXJ0KGFzc2VydGlvbiwgbWVzc2FnZSkge1xyXG4gICAgaWYgKCFhc3NlcnRpb24pIHtcclxuICAgICAgICBmYWlsKG1lc3NhZ2UpO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogUHJvdmlkZXMgc2luZ2xldG9uIGhlbHBlcnMgd2hlcmUgc2V0dXAgY29kZSBjYW4gaW5qZWN0IGEgcGxhdGZvcm0gYXQgcnVudGltZS5cclxuICogc2V0UGxhdGZvcm0gbmVlZHMgdG8gYmUgc2V0IGJlZm9yZSBGaXJlc3RvcmUgaXMgdXNlZCBhbmQgbXVzdCBiZSBzZXQgZXhhY3RseVxyXG4gKiBvbmNlLlxyXG4gKi9cclxudmFyIFBsYXRmb3JtU3VwcG9ydCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFBsYXRmb3JtU3VwcG9ydCgpIHtcclxuICAgIH1cclxuICAgIFBsYXRmb3JtU3VwcG9ydC5zZXRQbGF0Zm9ybSA9IGZ1bmN0aW9uIChwbGF0Zm9ybSkge1xyXG4gICAgICAgIGlmIChQbGF0Zm9ybVN1cHBvcnQucGxhdGZvcm0pIHtcclxuICAgICAgICAgICAgZmFpbCgnUGxhdGZvcm0gYWxyZWFkeSBkZWZpbmVkJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFBsYXRmb3JtU3VwcG9ydC5wbGF0Zm9ybSA9IHBsYXRmb3JtO1xyXG4gICAgfTtcclxuICAgIFBsYXRmb3JtU3VwcG9ydC5nZXRQbGF0Zm9ybSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoIVBsYXRmb3JtU3VwcG9ydC5wbGF0Zm9ybSkge1xyXG4gICAgICAgICAgICBmYWlsKCdQbGF0Zm9ybSBub3Qgc2V0Jyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBQbGF0Zm9ybVN1cHBvcnQucGxhdGZvcm07XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFBsYXRmb3JtU3VwcG9ydDtcclxufSgpKTtcclxuLyoqXHJcbiAqIFJldHVybnMgdGhlIHJlcHJlc2VudGF0aW9uIG9mIGFuIGVtcHR5IFwicHJvdG9cIiBieXRlIHN0cmluZyBmb3IgdGhlXHJcbiAqIHBsYXRmb3JtLlxyXG4gKi9cclxuZnVuY3Rpb24gZW1wdHlCeXRlU3RyaW5nKCkge1xyXG4gICAgcmV0dXJuIFBsYXRmb3JtU3VwcG9ydC5nZXRQbGF0Zm9ybSgpLmVtcHR5Qnl0ZVN0cmluZztcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxudmFyIENvZGUgPSB7XHJcbiAgICAvLyBDYXVzZXMgYXJlIGNvcGllZCBmcm9tOlxyXG4gICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2dycGMvZ3JwYy9ibG9iL2JjZWVjOTRlYTRmYzVmMDA4NWQ4MTIzNWQ4ZTFjMDY3OThkYzM0MWEvaW5jbHVkZS9ncnBjJTJCJTJCL2ltcGwvY29kZWdlbi9zdGF0dXNfY29kZV9lbnVtLmhcclxuICAgIC8qKiBOb3QgYW4gZXJyb3I7IHJldHVybmVkIG9uIHN1Y2Nlc3MuICovXHJcbiAgICBPSzogJ29rJyxcclxuICAgIC8qKiBUaGUgb3BlcmF0aW9uIHdhcyBjYW5jZWxsZWQgKHR5cGljYWxseSBieSB0aGUgY2FsbGVyKS4gKi9cclxuICAgIENBTkNFTExFRDogJ2NhbmNlbGxlZCcsXHJcbiAgICAvKiogVW5rbm93biBlcnJvciBvciBhbiBlcnJvciBmcm9tIGEgZGlmZmVyZW50IGVycm9yIGRvbWFpbi4gKi9cclxuICAgIFVOS05PV046ICd1bmtub3duJyxcclxuICAgIC8qKlxyXG4gICAgICogQ2xpZW50IHNwZWNpZmllZCBhbiBpbnZhbGlkIGFyZ3VtZW50LiBOb3RlIHRoYXQgdGhpcyBkaWZmZXJzIGZyb21cclxuICAgICAqIEZBSUxFRF9QUkVDT05ESVRJT04uIElOVkFMSURfQVJHVU1FTlQgaW5kaWNhdGVzIGFyZ3VtZW50cyB0aGF0IGFyZVxyXG4gICAgICogcHJvYmxlbWF0aWMgcmVnYXJkbGVzcyBvZiB0aGUgc3RhdGUgb2YgdGhlIHN5c3RlbSAoZS5nLiwgYSBtYWxmb3JtZWQgZmlsZVxyXG4gICAgICogbmFtZSkuXHJcbiAgICAgKi9cclxuICAgIElOVkFMSURfQVJHVU1FTlQ6ICdpbnZhbGlkLWFyZ3VtZW50JyxcclxuICAgIC8qKlxyXG4gICAgICogRGVhZGxpbmUgZXhwaXJlZCBiZWZvcmUgb3BlcmF0aW9uIGNvdWxkIGNvbXBsZXRlLiBGb3Igb3BlcmF0aW9ucyB0aGF0XHJcbiAgICAgKiBjaGFuZ2UgdGhlIHN0YXRlIG9mIHRoZSBzeXN0ZW0sIHRoaXMgZXJyb3IgbWF5IGJlIHJldHVybmVkIGV2ZW4gaWYgdGhlXHJcbiAgICAgKiBvcGVyYXRpb24gaGFzIGNvbXBsZXRlZCBzdWNjZXNzZnVsbHkuIEZvciBleGFtcGxlLCBhIHN1Y2Nlc3NmdWwgcmVzcG9uc2VcclxuICAgICAqIGZyb20gYSBzZXJ2ZXIgY291bGQgaGF2ZSBiZWVuIGRlbGF5ZWQgbG9uZyBlbm91Z2ggZm9yIHRoZSBkZWFkbGluZSB0b1xyXG4gICAgICogZXhwaXJlLlxyXG4gICAgICovXHJcbiAgICBERUFETElORV9FWENFRURFRDogJ2RlYWRsaW5lLWV4Y2VlZGVkJyxcclxuICAgIC8qKiBTb21lIHJlcXVlc3RlZCBlbnRpdHkgKGUuZy4sIGZpbGUgb3IgZGlyZWN0b3J5KSB3YXMgbm90IGZvdW5kLiAqL1xyXG4gICAgTk9UX0ZPVU5EOiAnbm90LWZvdW5kJyxcclxuICAgIC8qKlxyXG4gICAgICogU29tZSBlbnRpdHkgdGhhdCB3ZSBhdHRlbXB0ZWQgdG8gY3JlYXRlIChlLmcuLCBmaWxlIG9yIGRpcmVjdG9yeSkgYWxyZWFkeVxyXG4gICAgICogZXhpc3RzLlxyXG4gICAgICovXHJcbiAgICBBTFJFQURZX0VYSVNUUzogJ2FscmVhZHktZXhpc3RzJyxcclxuICAgIC8qKlxyXG4gICAgICogVGhlIGNhbGxlciBkb2VzIG5vdCBoYXZlIHBlcm1pc3Npb24gdG8gZXhlY3V0ZSB0aGUgc3BlY2lmaWVkIG9wZXJhdGlvbi5cclxuICAgICAqIFBFUk1JU1NJT05fREVOSUVEIG11c3Qgbm90IGJlIHVzZWQgZm9yIHJlamVjdGlvbnMgY2F1c2VkIGJ5IGV4aGF1c3RpbmdcclxuICAgICAqIHNvbWUgcmVzb3VyY2UgKHVzZSBSRVNPVVJDRV9FWEhBVVNURUQgaW5zdGVhZCBmb3IgdGhvc2UgZXJyb3JzKS5cclxuICAgICAqIFBFUk1JU1NJT05fREVOSUVEIG11c3Qgbm90IGJlIHVzZWQgaWYgdGhlIGNhbGxlciBjYW4gbm90IGJlIGlkZW50aWZpZWRcclxuICAgICAqICh1c2UgVU5BVVRIRU5USUNBVEVEIGluc3RlYWQgZm9yIHRob3NlIGVycm9ycykuXHJcbiAgICAgKi9cclxuICAgIFBFUk1JU1NJT05fREVOSUVEOiAncGVybWlzc2lvbi1kZW5pZWQnLFxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgcmVxdWVzdCBkb2VzIG5vdCBoYXZlIHZhbGlkIGF1dGhlbnRpY2F0aW9uIGNyZWRlbnRpYWxzIGZvciB0aGVcclxuICAgICAqIG9wZXJhdGlvbi5cclxuICAgICAqL1xyXG4gICAgVU5BVVRIRU5USUNBVEVEOiAndW5hdXRoZW50aWNhdGVkJyxcclxuICAgIC8qKlxyXG4gICAgICogU29tZSByZXNvdXJjZSBoYXMgYmVlbiBleGhhdXN0ZWQsIHBlcmhhcHMgYSBwZXItdXNlciBxdW90YSwgb3IgcGVyaGFwcyB0aGVcclxuICAgICAqIGVudGlyZSBmaWxlIHN5c3RlbSBpcyBvdXQgb2Ygc3BhY2UuXHJcbiAgICAgKi9cclxuICAgIFJFU09VUkNFX0VYSEFVU1RFRDogJ3Jlc291cmNlLWV4aGF1c3RlZCcsXHJcbiAgICAvKipcclxuICAgICAqIE9wZXJhdGlvbiB3YXMgcmVqZWN0ZWQgYmVjYXVzZSB0aGUgc3lzdGVtIGlzIG5vdCBpbiBhIHN0YXRlIHJlcXVpcmVkIGZvclxyXG4gICAgICogdGhlIG9wZXJhdGlvbidzIGV4ZWN1dGlvbi4gRm9yIGV4YW1wbGUsIGRpcmVjdG9yeSB0byBiZSBkZWxldGVkIG1heSBiZVxyXG4gICAgICogbm9uLWVtcHR5LCBhbiBybWRpciBvcGVyYXRpb24gaXMgYXBwbGllZCB0byBhIG5vbi1kaXJlY3RvcnksIGV0Yy5cclxuICAgICAqXHJcbiAgICAgKiBBIGxpdG11cyB0ZXN0IHRoYXQgbWF5IGhlbHAgYSBzZXJ2aWNlIGltcGxlbWVudG9yIGluIGRlY2lkaW5nXHJcbiAgICAgKiBiZXR3ZWVuIEZBSUxFRF9QUkVDT05ESVRJT04sIEFCT1JURUQsIGFuZCBVTkFWQUlMQUJMRTpcclxuICAgICAqICAoYSkgVXNlIFVOQVZBSUxBQkxFIGlmIHRoZSBjbGllbnQgY2FuIHJldHJ5IGp1c3QgdGhlIGZhaWxpbmcgY2FsbC5cclxuICAgICAqICAoYikgVXNlIEFCT1JURUQgaWYgdGhlIGNsaWVudCBzaG91bGQgcmV0cnkgYXQgYSBoaWdoZXItbGV2ZWxcclxuICAgICAqICAgICAgKGUuZy4sIHJlc3RhcnRpbmcgYSByZWFkLW1vZGlmeS13cml0ZSBzZXF1ZW5jZSkuXHJcbiAgICAgKiAgKGMpIFVzZSBGQUlMRURfUFJFQ09ORElUSU9OIGlmIHRoZSBjbGllbnQgc2hvdWxkIG5vdCByZXRyeSB1bnRpbFxyXG4gICAgICogICAgICB0aGUgc3lzdGVtIHN0YXRlIGhhcyBiZWVuIGV4cGxpY2l0bHkgZml4ZWQuIEUuZy4sIGlmIGFuIFwicm1kaXJcIlxyXG4gICAgICogICAgICBmYWlscyBiZWNhdXNlIHRoZSBkaXJlY3RvcnkgaXMgbm9uLWVtcHR5LCBGQUlMRURfUFJFQ09ORElUSU9OXHJcbiAgICAgKiAgICAgIHNob3VsZCBiZSByZXR1cm5lZCBzaW5jZSB0aGUgY2xpZW50IHNob3VsZCBub3QgcmV0cnkgdW5sZXNzXHJcbiAgICAgKiAgICAgIHRoZXkgaGF2ZSBmaXJzdCBmaXhlZCB1cCB0aGUgZGlyZWN0b3J5IGJ5IGRlbGV0aW5nIGZpbGVzIGZyb20gaXQuXHJcbiAgICAgKiAgKGQpIFVzZSBGQUlMRURfUFJFQ09ORElUSU9OIGlmIHRoZSBjbGllbnQgcGVyZm9ybXMgY29uZGl0aW9uYWxcclxuICAgICAqICAgICAgUkVTVCBHZXQvVXBkYXRlL0RlbGV0ZSBvbiBhIHJlc291cmNlIGFuZCB0aGUgcmVzb3VyY2Ugb24gdGhlXHJcbiAgICAgKiAgICAgIHNlcnZlciBkb2VzIG5vdCBtYXRjaCB0aGUgY29uZGl0aW9uLiBFLmcuLCBjb25mbGljdGluZ1xyXG4gICAgICogICAgICByZWFkLW1vZGlmeS13cml0ZSBvbiB0aGUgc2FtZSByZXNvdXJjZS5cclxuICAgICAqL1xyXG4gICAgRkFJTEVEX1BSRUNPTkRJVElPTjogJ2ZhaWxlZC1wcmVjb25kaXRpb24nLFxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgb3BlcmF0aW9uIHdhcyBhYm9ydGVkLCB0eXBpY2FsbHkgZHVlIHRvIGEgY29uY3VycmVuY3kgaXNzdWUgbGlrZVxyXG4gICAgICogc2VxdWVuY2VyIGNoZWNrIGZhaWx1cmVzLCB0cmFuc2FjdGlvbiBhYm9ydHMsIGV0Yy5cclxuICAgICAqXHJcbiAgICAgKiBTZWUgbGl0bXVzIHRlc3QgYWJvdmUgZm9yIGRlY2lkaW5nIGJldHdlZW4gRkFJTEVEX1BSRUNPTkRJVElPTiwgQUJPUlRFRCxcclxuICAgICAqIGFuZCBVTkFWQUlMQUJMRS5cclxuICAgICAqL1xyXG4gICAgQUJPUlRFRDogJ2Fib3J0ZWQnLFxyXG4gICAgLyoqXHJcbiAgICAgKiBPcGVyYXRpb24gd2FzIGF0dGVtcHRlZCBwYXN0IHRoZSB2YWxpZCByYW5nZS4gRS5nLiwgc2Vla2luZyBvciByZWFkaW5nXHJcbiAgICAgKiBwYXN0IGVuZCBvZiBmaWxlLlxyXG4gICAgICpcclxuICAgICAqIFVubGlrZSBJTlZBTElEX0FSR1VNRU5ULCB0aGlzIGVycm9yIGluZGljYXRlcyBhIHByb2JsZW0gdGhhdCBtYXkgYmUgZml4ZWRcclxuICAgICAqIGlmIHRoZSBzeXN0ZW0gc3RhdGUgY2hhbmdlcy4gRm9yIGV4YW1wbGUsIGEgMzItYml0IGZpbGUgc3lzdGVtIHdpbGxcclxuICAgICAqIGdlbmVyYXRlIElOVkFMSURfQVJHVU1FTlQgaWYgYXNrZWQgdG8gcmVhZCBhdCBhbiBvZmZzZXQgdGhhdCBpcyBub3QgaW4gdGhlXHJcbiAgICAgKiByYW5nZSBbMCwyXjMyLTFdLCBidXQgaXQgd2lsbCBnZW5lcmF0ZSBPVVRfT0ZfUkFOR0UgaWYgYXNrZWQgdG8gcmVhZCBmcm9tXHJcbiAgICAgKiBhbiBvZmZzZXQgcGFzdCB0aGUgY3VycmVudCBmaWxlIHNpemUuXHJcbiAgICAgKlxyXG4gICAgICogVGhlcmUgaXMgYSBmYWlyIGJpdCBvZiBvdmVybGFwIGJldHdlZW4gRkFJTEVEX1BSRUNPTkRJVElPTiBhbmRcclxuICAgICAqIE9VVF9PRl9SQU5HRS4gV2UgcmVjb21tZW5kIHVzaW5nIE9VVF9PRl9SQU5HRSAodGhlIG1vcmUgc3BlY2lmaWMgZXJyb3IpXHJcbiAgICAgKiB3aGVuIGl0IGFwcGxpZXMgc28gdGhhdCBjYWxsZXJzIHdobyBhcmUgaXRlcmF0aW5nIHRocm91Z2ggYSBzcGFjZSBjYW5cclxuICAgICAqIGVhc2lseSBsb29rIGZvciBhbiBPVVRfT0ZfUkFOR0UgZXJyb3IgdG8gZGV0ZWN0IHdoZW4gdGhleSBhcmUgZG9uZS5cclxuICAgICAqL1xyXG4gICAgT1VUX09GX1JBTkdFOiAnb3V0LW9mLXJhbmdlJyxcclxuICAgIC8qKiBPcGVyYXRpb24gaXMgbm90IGltcGxlbWVudGVkIG9yIG5vdCBzdXBwb3J0ZWQvZW5hYmxlZCBpbiB0aGlzIHNlcnZpY2UuICovXHJcbiAgICBVTklNUExFTUVOVEVEOiAndW5pbXBsZW1lbnRlZCcsXHJcbiAgICAvKipcclxuICAgICAqIEludGVybmFsIGVycm9ycy4gTWVhbnMgc29tZSBpbnZhcmlhbnRzIGV4cGVjdGVkIGJ5IHVuZGVybHlpbmcgU3lzdGVtIGhhc1xyXG4gICAgICogYmVlbiBicm9rZW4uIElmIHlvdSBzZWUgb25lIG9mIHRoZXNlIGVycm9ycywgU29tZXRoaW5nIGlzIHZlcnkgYnJva2VuLlxyXG4gICAgICovXHJcbiAgICBJTlRFUk5BTDogJ2ludGVybmFsJyxcclxuICAgIC8qKlxyXG4gICAgICogVGhlIHNlcnZpY2UgaXMgY3VycmVudGx5IHVuYXZhaWxhYmxlLiBUaGlzIGlzIGEgbW9zdCBsaWtlbHkgYSB0cmFuc2llbnRcclxuICAgICAqIGNvbmRpdGlvbiBhbmQgbWF5IGJlIGNvcnJlY3RlZCBieSByZXRyeWluZyB3aXRoIGEgYmFja29mZi5cclxuICAgICAqXHJcbiAgICAgKiBTZWUgbGl0bXVzIHRlc3QgYWJvdmUgZm9yIGRlY2lkaW5nIGJldHdlZW4gRkFJTEVEX1BSRUNPTkRJVElPTiwgQUJPUlRFRCxcclxuICAgICAqIGFuZCBVTkFWQUlMQUJMRS5cclxuICAgICAqL1xyXG4gICAgVU5BVkFJTEFCTEU6ICd1bmF2YWlsYWJsZScsXHJcbiAgICAvKiogVW5yZWNvdmVyYWJsZSBkYXRhIGxvc3Mgb3IgY29ycnVwdGlvbi4gKi9cclxuICAgIERBVEFfTE9TUzogJ2RhdGEtbG9zcydcclxufTtcclxuLyoqXHJcbiAqIEFuIGVycm9yIGNsYXNzIHVzZWQgZm9yIEZpcmVzdG9yZS1nZW5lcmF0ZWQgZXJyb3JzLiBJZGVhbGx5IHdlIHNob3VsZCBiZVxyXG4gKiB1c2luZyBGaXJlYmFzZUVycm9yLCBidXQgaW50ZWdyYXRpbmcgd2l0aCBpdCBpcyBvdmVybHkgYXJkdW91cyBhdCB0aGUgbW9tZW50LFxyXG4gKiBzbyB3ZSBkZWZpbmUgb3VyIG93biBjb21wYXRpYmxlIGVycm9yIGNsYXNzICh3aXRoIGEgYG5hbWVgIG9mICdGaXJlYmFzZUVycm9yJ1xyXG4gKiBhbmQgY29tcGF0aWJsZSBgY29kZWAgYW5kIGBtZXNzYWdlYCBmaWVsZHMuKVxyXG4gKi9cclxudmFyIEZpcmVzdG9yZUVycm9yID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgdHNsaWIuX19leHRlbmRzKEZpcmVzdG9yZUVycm9yLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gRmlyZXN0b3JlRXJyb3IoY29kZSwgbWVzc2FnZSkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIG1lc3NhZ2UpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMuY29kZSA9IGNvZGU7XHJcbiAgICAgICAgX3RoaXMubWVzc2FnZSA9IG1lc3NhZ2U7XHJcbiAgICAgICAgX3RoaXMubmFtZSA9ICdGaXJlYmFzZUVycm9yJztcclxuICAgICAgICAvLyBIQUNLOiBXZSB3cml0ZSBhIHRvU3RyaW5nIHByb3BlcnR5IGRpcmVjdGx5IGJlY2F1c2UgRXJyb3IgaXMgbm90IGEgcmVhbFxyXG4gICAgICAgIC8vIGNsYXNzIGFuZCBzbyBpbmhlcml0YW5jZSBkb2VzIG5vdCB3b3JrIGNvcnJlY3RseS4gV2UgY291bGQgYWx0ZXJuYXRpdmVseVxyXG4gICAgICAgIC8vIGRvIHRoZSBzYW1lIFwiYmFjay1kb29yIGluaGVyaXRhbmNlXCIgdHJpY2sgdGhhdCBGaXJlYmFzZUVycm9yIGRvZXMuXHJcbiAgICAgICAgX3RoaXMudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5uYW1lICsgXCI6IFtjb2RlPVwiICsgX3RoaXMuY29kZSArIFwiXTogXCIgKyBfdGhpcy5tZXNzYWdlOyB9O1xyXG4gICAgICAgIHJldHVybiBfdGhpcztcclxuICAgIH1cclxuICAgIHJldHVybiBGaXJlc3RvcmVFcnJvcjtcclxufShFcnJvcikpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEhlbHBlciBmdW5jdGlvbiB0byBwcmV2ZW50IGluc3RhbnRpYXRpb24gdGhyb3VnaCB0aGUgY29uc3RydWN0b3IuXHJcbiAqXHJcbiAqIFRoaXMgbWV0aG9kIGNyZWF0ZXMgYSBuZXcgY29uc3RydWN0b3IgdGhhdCB0aHJvd3Mgd2hlbiBpdCdzIGludm9rZWQuXHJcbiAqIFRoZSBwcm90b3R5cGUgb2YgdGhhdCBjb25zdHJ1Y3RvciBpcyB0aGVuIHNldCB0byB0aGUgcHJvdG90eXBlIG9mIHRoZSBoaWRkZW5cclxuICogXCJjbGFzc1wiIHRvIGV4cG9zZSBhbGwgdGhlIHByb3RvdHlwZSBtZXRob2RzIGFuZCBhbGxvdyBmb3IgaW5zdGFuY2VvZlxyXG4gKiBjaGVja3MuXHJcbiAqXHJcbiAqIFRvIGFsc28gbWFrZSBhbGwgdGhlIHN0YXRpYyBtZXRob2RzIGF2YWlsYWJsZSwgYWxsIHByb3BlcnRpZXMgb2YgdGhlXHJcbiAqIG9yaWdpbmFsIGNvbnN0cnVjdG9yIGFyZSBjb3BpZWQgdG8gdGhlIG5ldyBjb25zdHJ1Y3Rvci5cclxuICovXHJcbmZ1bmN0aW9uIG1ha2VDb25zdHJ1Y3RvclByaXZhdGUoY2xzLCBvcHRpb25hbE1lc3NhZ2UpIHtcclxuICAgIGZ1bmN0aW9uIFB1YmxpY0NvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHZhciBlcnJvciA9ICdUaGlzIGNvbnN0cnVjdG9yIGlzIHByaXZhdGUuJztcclxuICAgICAgICBpZiAob3B0aW9uYWxNZXNzYWdlKSB7XHJcbiAgICAgICAgICAgIGVycm9yICs9ICcgJztcclxuICAgICAgICAgICAgZXJyb3IgKz0gb3B0aW9uYWxNZXNzYWdlO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5JTlZBTElEX0FSR1VNRU5ULCBlcnJvcik7XHJcbiAgICB9XHJcbiAgICAvLyBNYWtlIHN1cmUgaW5zdGFuY2VvZiBjaGVja3Mgd29yayBhbmQgYWxsIG1ldGhvZHMgYXJlIGV4cG9zZWQgb24gdGhlIHB1YmxpY1xyXG4gICAgLy8gY29uc3RydWN0b3JcclxuICAgIFB1YmxpY0NvbnN0cnVjdG9yLnByb3RvdHlwZSA9IGNscy5wcm90b3R5cGU7XHJcbiAgICAvLyBDb3B5IGFueSBzdGF0aWMgbWV0aG9kcy9tZW1iZXJzXHJcbiAgICBmb3IgKHZhciBzdGF0aWNQcm9wZXJ0eSBpbiBjbHMpIHtcclxuICAgICAgICBpZiAoY2xzLmhhc093blByb3BlcnR5KHN0YXRpY1Byb3BlcnR5KSkge1xyXG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG4gICAgICAgICAgICBQdWJsaWNDb25zdHJ1Y3RvcltzdGF0aWNQcm9wZXJ0eV0gPSBjbHNbc3RhdGljUHJvcGVydHldO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbiAgICByZXR1cm4gUHVibGljQ29uc3RydWN0b3I7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIGNvbnRhaW5zKG9iaiwga2V5KSB7XHJcbiAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KTtcclxufVxyXG4vKiogUmV0dXJucyB0aGUgZ2l2ZW4gdmFsdWUgaWYgaXQncyBkZWZpbmVkIG9yIHRoZSBkZWZhdWx0VmFsdWUgb3RoZXJ3aXNlLiAqL1xyXG5mdW5jdGlvbiBkZWZhdWx0ZWQodmFsdWUsIGRlZmF1bHRWYWx1ZSkge1xyXG4gICAgcmV0dXJuIHZhbHVlICE9PSB1bmRlZmluZWQgPyB2YWx1ZSA6IGRlZmF1bHRWYWx1ZTtcclxufVxyXG5mdW5jdGlvbiBmb3JFYWNoTnVtYmVyKG9iaiwgZm4pIHtcclxuICAgIGZvciAodmFyIGtleSBpbiBvYmopIHtcclxuICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkge1xyXG4gICAgICAgICAgICB2YXIgbnVtID0gTnVtYmVyKGtleSk7XHJcbiAgICAgICAgICAgIGlmICghaXNOYU4obnVtKSkge1xyXG4gICAgICAgICAgICAgICAgZm4obnVtLCBvYmpba2V5XSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gdmFsdWVzKG9iaikge1xyXG4gICAgdmFyIHZzID0gW107XHJcbiAgICBmb3JFYWNoKG9iaiwgZnVuY3Rpb24gKF8sIHYpIHsgcmV0dXJuIHZzLnB1c2godik7IH0pO1xyXG4gICAgcmV0dXJuIHZzO1xyXG59XHJcbmZ1bmN0aW9uIGZvckVhY2gob2JqLCBmbikge1xyXG4gICAgZm9yICh2YXIga2V5IGluIG9iaikge1xyXG4gICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSB7XHJcbiAgICAgICAgICAgIGZuKGtleSwgb2JqW2tleV0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBpc0VtcHR5KG9iaikge1xyXG4gICAgYXNzZXJ0KG9iaiAhPSBudWxsICYmIHR5cGVvZiBvYmogPT09ICdvYmplY3QnLCAnaXNFbXB0eSgpIGV4cGVjdHMgb2JqZWN0IHBhcmFtZXRlci4nKTtcclxuICAgIGZvciAodmFyIGtleSBpbiBvYmopIHtcclxuICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRydWU7XHJcbn1cclxuZnVuY3Rpb24gc2hhbGxvd0NvcHkob2JqKSB7XHJcbiAgICBhc3NlcnQob2JqICYmIHR5cGVvZiBvYmogPT09ICdvYmplY3QnLCAnc2hhbGxvd0NvcHkoKSBleHBlY3RzIG9iamVjdCBwYXJhbWV0ZXIuJyk7XHJcbiAgICB2YXIgcmVzdWx0ID0ge307XHJcbiAgICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7XHJcbiAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIHtcclxuICAgICAgICAgICAgcmVzdWx0W2tleV0gPSBvYmpba2V5XTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogVmFsaWRhdGVzIHRoYXQgbm8gYXJndW1lbnRzIHdlcmUgcGFzc2VkIGluIHRoZSBpbnZvY2F0aW9uIG9mIGZ1bmN0aW9uTmFtZS5cclxuICpcclxuICogRm9yd2FyZCB0aGUgbWFnaWMgXCJhcmd1bWVudHNcIiB2YXJpYWJsZSBhcyBzZWNvbmQgcGFyYW1ldGVyIG9uIHdoaWNoIHRoZVxyXG4gKiBwYXJhbWV0ZXIgdmFsaWRhdGlvbiBpcyBwZXJmb3JtZWQ6XHJcbiAqIHZhbGlkYXRlTm9BcmdzKCdteUZ1bmN0aW9uJywgYXJndW1lbnRzKTtcclxuICovXHJcbmZ1bmN0aW9uIHZhbGlkYXRlTm9BcmdzKGZ1bmN0aW9uTmFtZSwgYXJncykge1xyXG4gICAgaWYgKGFyZ3MubGVuZ3RoICE9PSAwKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuSU5WQUxJRF9BUkdVTUVOVCwgXCJGdW5jdGlvbiBcIiArIGZ1bmN0aW9uTmFtZSArIFwiKCkgZG9lcyBub3Qgc3VwcG9ydCBhcmd1bWVudHMsIFwiICtcclxuICAgICAgICAgICAgJ2J1dCB3YXMgY2FsbGVkIHdpdGggJyArXHJcbiAgICAgICAgICAgIGZvcm1hdFBsdXJhbChhcmdzLmxlbmd0aCwgJ2FyZ3VtZW50JykgK1xyXG4gICAgICAgICAgICAnLicpO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBWYWxpZGF0ZXMgdGhlIGludm9jYXRpb24gb2YgZnVuY3Rpb25OYW1lIGhhcyB0aGUgZXhhY3QgbnVtYmVyIG9mIGFyZ3VtZW50cy5cclxuICpcclxuICogRm9yd2FyZCB0aGUgbWFnaWMgXCJhcmd1bWVudHNcIiB2YXJpYWJsZSBhcyBzZWNvbmQgcGFyYW1ldGVyIG9uIHdoaWNoIHRoZVxyXG4gKiBwYXJhbWV0ZXIgdmFsaWRhdGlvbiBpcyBwZXJmb3JtZWQ6XHJcbiAqIHZhbGlkYXRlRXhhY3ROdW1iZXJPZkFyZ3MoJ215RnVuY3Rpb24nLCBhcmd1bWVudHMsIDIpO1xyXG4gKi9cclxuZnVuY3Rpb24gdmFsaWRhdGVFeGFjdE51bWJlck9mQXJncyhmdW5jdGlvbk5hbWUsIGFyZ3MsIG51bWJlck9mQXJncykge1xyXG4gICAgaWYgKGFyZ3MubGVuZ3RoICE9PSBudW1iZXJPZkFyZ3MpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5JTlZBTElEX0FSR1VNRU5ULCBcIkZ1bmN0aW9uIFwiICsgZnVuY3Rpb25OYW1lICsgXCIoKSByZXF1aXJlcyBcIiArXHJcbiAgICAgICAgICAgIGZvcm1hdFBsdXJhbChudW1iZXJPZkFyZ3MsICdhcmd1bWVudCcpICtcclxuICAgICAgICAgICAgJywgYnV0IHdhcyBjYWxsZWQgd2l0aCAnICtcclxuICAgICAgICAgICAgZm9ybWF0UGx1cmFsKGFyZ3MubGVuZ3RoLCAnYXJndW1lbnQnKSArXHJcbiAgICAgICAgICAgICcuJyk7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkYXRlcyB0aGUgaW52b2NhdGlvbiBvZiBmdW5jdGlvbk5hbWUgaGFzIGF0IGxlYXN0IHRoZSBwcm92aWRlZCBudW1iZXIgb2ZcclxuICogYXJndW1lbnRzIChidXQgY2FuIGhhdmUgbWFueSBtb3JlKS5cclxuICpcclxuICogRm9yd2FyZCB0aGUgbWFnaWMgXCJhcmd1bWVudHNcIiB2YXJpYWJsZSBhcyBzZWNvbmQgcGFyYW1ldGVyIG9uIHdoaWNoIHRoZVxyXG4gKiBwYXJhbWV0ZXIgdmFsaWRhdGlvbiBpcyBwZXJmb3JtZWQ6XHJcbiAqIHZhbGlkYXRlQXRMZWFzdE51bWJlck9mQXJncygnbXlGdW5jdGlvbicsIGFyZ3VtZW50cywgMik7XHJcbiAqL1xyXG5mdW5jdGlvbiB2YWxpZGF0ZUF0TGVhc3ROdW1iZXJPZkFyZ3MoZnVuY3Rpb25OYW1lLCBhcmdzLCBtaW5OdW1iZXJPZkFyZ3MpIHtcclxuICAgIGlmIChhcmdzLmxlbmd0aCA8IG1pbk51bWJlck9mQXJncykge1xyXG4gICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLklOVkFMSURfQVJHVU1FTlQsIFwiRnVuY3Rpb24gXCIgKyBmdW5jdGlvbk5hbWUgKyBcIigpIHJlcXVpcmVzIGF0IGxlYXN0IFwiICtcclxuICAgICAgICAgICAgZm9ybWF0UGx1cmFsKG1pbk51bWJlck9mQXJncywgJ2FyZ3VtZW50JykgK1xyXG4gICAgICAgICAgICAnLCBidXQgd2FzIGNhbGxlZCB3aXRoICcgK1xyXG4gICAgICAgICAgICBmb3JtYXRQbHVyYWwoYXJncy5sZW5ndGgsICdhcmd1bWVudCcpICtcclxuICAgICAgICAgICAgJy4nKTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogVmFsaWRhdGVzIHRoZSBpbnZvY2F0aW9uIG9mIGZ1bmN0aW9uTmFtZSBoYXMgbnVtYmVyIG9mIGFyZ3VtZW50cyBiZXR3ZWVuXHJcbiAqIHRoZSB2YWx1ZXMgcHJvdmlkZWQuXHJcbiAqXHJcbiAqIEZvcndhcmQgdGhlIG1hZ2ljIFwiYXJndW1lbnRzXCIgdmFyaWFibGUgYXMgc2Vjb25kIHBhcmFtZXRlciBvbiB3aGljaCB0aGVcclxuICogcGFyYW1ldGVyIHZhbGlkYXRpb24gaXMgcGVyZm9ybWVkOlxyXG4gKiB2YWxpZGF0ZUJldHdlZW5OdW1iZXJPZkFyZ3MoJ215RnVuY3Rpb24nLCBhcmd1bWVudHMsIDIsIDMpO1xyXG4gKi9cclxuZnVuY3Rpb24gdmFsaWRhdGVCZXR3ZWVuTnVtYmVyT2ZBcmdzKGZ1bmN0aW9uTmFtZSwgYXJncywgbWluTnVtYmVyT2ZBcmdzLCBtYXhOdW1iZXJPZkFyZ3MpIHtcclxuICAgIGlmIChhcmdzLmxlbmd0aCA8IG1pbk51bWJlck9mQXJncyB8fCBhcmdzLmxlbmd0aCA+IG1heE51bWJlck9mQXJncykge1xyXG4gICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLklOVkFMSURfQVJHVU1FTlQsIFwiRnVuY3Rpb24gXCIgKyBmdW5jdGlvbk5hbWUgKyBcIigpIHJlcXVpcmVzIGJldHdlZW4gXCIgKyBtaW5OdW1iZXJPZkFyZ3MgKyBcIiBhbmQgXCIgK1xyXG4gICAgICAgICAgICAobWF4TnVtYmVyT2ZBcmdzICsgXCIgYXJndW1lbnRzLCBidXQgd2FzIGNhbGxlZCB3aXRoIFwiKSArXHJcbiAgICAgICAgICAgIGZvcm1hdFBsdXJhbChhcmdzLmxlbmd0aCwgJ2FyZ3VtZW50JykgK1xyXG4gICAgICAgICAgICAnLicpO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBWYWxpZGF0ZXMgdGhlIHByb3ZpZGVkIGFyZ3VtZW50IGlzIGFuIGFycmF5IGFuZCBoYXMgYXMgbGVhc3QgdGhlIGV4cGVjdGVkXHJcbiAqIG51bWJlciBvZiBlbGVtZW50cy5cclxuICovXHJcbmZ1bmN0aW9uIHZhbGlkYXRlTmFtZWRBcnJheUF0TGVhc3ROdW1iZXJPZkVsZW1lbnRzKGZ1bmN0aW9uTmFtZSwgdmFsdWUsIG5hbWUsIG1pbk51bWJlck9mRWxlbWVudHMpIHtcclxuICAgIGlmICghKHZhbHVlIGluc3RhbmNlb2YgQXJyYXkpIHx8IHZhbHVlLmxlbmd0aCA8IG1pbk51bWJlck9mRWxlbWVudHMpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5JTlZBTElEX0FSR1VNRU5ULCBcIkZ1bmN0aW9uIFwiICsgZnVuY3Rpb25OYW1lICsgXCIoKSByZXF1aXJlcyBpdHMgXCIgKyBuYW1lICsgXCIgYXJndW1lbnQgdG8gYmUgYW4gXCIgK1xyXG4gICAgICAgICAgICAnYXJyYXkgd2l0aCBhdCBsZWFzdCAnICtcclxuICAgICAgICAgICAgKGZvcm1hdFBsdXJhbChtaW5OdW1iZXJPZkVsZW1lbnRzLCAnZWxlbWVudCcpICsgXCIuXCIpKTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogVmFsaWRhdGVzIHRoZSBwcm92aWRlZCBwb3NpdGlvbmFsIGFyZ3VtZW50IGhhcyB0aGUgbmF0aXZlIEphdmFTY3JpcHQgdHlwZVxyXG4gKiB1c2luZyB0eXBlb2YgY2hlY2tzLlxyXG4gKi9cclxuZnVuY3Rpb24gdmFsaWRhdGVBcmdUeXBlKGZ1bmN0aW9uTmFtZSwgdHlwZSwgcG9zaXRpb24sIGFyZ3VtZW50KSB7XHJcbiAgICB2YWxpZGF0ZVR5cGUoZnVuY3Rpb25OYW1lLCB0eXBlLCBvcmRpbmFsKHBvc2l0aW9uKSArIFwiIGFyZ3VtZW50XCIsIGFyZ3VtZW50KTtcclxufVxyXG4vKipcclxuICogVmFsaWRhdGVzIHRoZSBwcm92aWRlZCBhcmd1bWVudCBoYXMgdGhlIG5hdGl2ZSBKYXZhU2NyaXB0IHR5cGUgdXNpbmdcclxuICogdHlwZW9mIGNoZWNrcyBvciBpcyB1bmRlZmluZWQuXHJcbiAqL1xyXG5mdW5jdGlvbiB2YWxpZGF0ZU9wdGlvbmFsQXJnVHlwZShmdW5jdGlvbk5hbWUsIHR5cGUsIHBvc2l0aW9uLCBhcmd1bWVudCkge1xyXG4gICAgaWYgKGFyZ3VtZW50ICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICB2YWxpZGF0ZUFyZ1R5cGUoZnVuY3Rpb25OYW1lLCB0eXBlLCBwb3NpdGlvbiwgYXJndW1lbnQpO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBWYWxpZGF0ZXMgdGhlIHByb3ZpZGVkIG5hbWVkIG9wdGlvbiBoYXMgdGhlIG5hdGl2ZSBKYXZhU2NyaXB0IHR5cGUgdXNpbmdcclxuICogdHlwZW9mIGNoZWNrcy5cclxuICovXHJcbmZ1bmN0aW9uIHZhbGlkYXRlTmFtZWRUeXBlKGZ1bmN0aW9uTmFtZSwgdHlwZSwgb3B0aW9uTmFtZSwgYXJndW1lbnQpIHtcclxuICAgIHZhbGlkYXRlVHlwZShmdW5jdGlvbk5hbWUsIHR5cGUsIG9wdGlvbk5hbWUgKyBcIiBvcHRpb25cIiwgYXJndW1lbnQpO1xyXG59XHJcbi8qKlxyXG4gKiBWYWxpZGF0ZXMgdGhlIHByb3ZpZGVkIG5hbWVkIG9wdGlvbiBoYXMgdGhlIG5hdGl2ZSBKYXZhU2NyaXB0IHR5cGUgdXNpbmdcclxuICogdHlwZW9mIGNoZWNrcyBvciBpcyB1bmRlZmluZWQuXHJcbiAqL1xyXG5mdW5jdGlvbiB2YWxpZGF0ZU5hbWVkT3B0aW9uYWxUeXBlKGZ1bmN0aW9uTmFtZSwgdHlwZSwgb3B0aW9uTmFtZSwgYXJndW1lbnQpIHtcclxuICAgIGlmIChhcmd1bWVudCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgdmFsaWRhdGVOYW1lZFR5cGUoZnVuY3Rpb25OYW1lLCB0eXBlLCBvcHRpb25OYW1lLCBhcmd1bWVudCk7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gdmFsaWRhdGVBcnJheUVsZW1lbnRzKGZ1bmN0aW9uTmFtZSwgb3B0aW9uTmFtZSwgdHlwZURlc2NyaXB0aW9uLCBhcmd1bWVudCwgdmFsaWRhdG9yKSB7XHJcbiAgICBpZiAoIShhcmd1bWVudCBpbnN0YW5jZW9mIEFycmF5KSkge1xyXG4gICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLklOVkFMSURfQVJHVU1FTlQsIFwiRnVuY3Rpb24gXCIgKyBmdW5jdGlvbk5hbWUgKyBcIigpIHJlcXVpcmVzIGl0cyBcIiArIG9wdGlvbk5hbWUgKyBcIiBcIiArXHJcbiAgICAgICAgICAgIChcIm9wdGlvbiB0byBiZSBhbiBhcnJheSwgYnV0IGl0IHdhczogXCIgKyB2YWx1ZURlc2NyaXB0aW9uKGFyZ3VtZW50KSkpO1xyXG4gICAgfVxyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcmd1bWVudC5sZW5ndGg7ICsraSkge1xyXG4gICAgICAgIGlmICghdmFsaWRhdG9yKGFyZ3VtZW50W2ldKSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5JTlZBTElEX0FSR1VNRU5ULCBcIkZ1bmN0aW9uIFwiICsgZnVuY3Rpb25OYW1lICsgXCIoKSByZXF1aXJlcyBhbGwgXCIgKyBvcHRpb25OYW1lICsgXCIgXCIgK1xyXG4gICAgICAgICAgICAgICAgKFwiZWxlbWVudHMgdG8gYmUgXCIgKyB0eXBlRGVzY3JpcHRpb24gKyBcIiwgYnV0IHRoZSB2YWx1ZSBhdCBpbmRleCBcIiArIGkgKyBcIiBcIikgK1xyXG4gICAgICAgICAgICAgICAgKFwid2FzOiBcIiArIHZhbHVlRGVzY3JpcHRpb24oYXJndW1lbnRbaV0pKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIHZhbGlkYXRlT3B0aW9uYWxBcnJheUVsZW1lbnRzKGZ1bmN0aW9uTmFtZSwgb3B0aW9uTmFtZSwgdHlwZURlc2NyaXB0aW9uLCBhcmd1bWVudCwgdmFsaWRhdG9yKSB7XHJcbiAgICBpZiAoYXJndW1lbnQgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIHZhbGlkYXRlQXJyYXlFbGVtZW50cyhmdW5jdGlvbk5hbWUsIG9wdGlvbk5hbWUsIHR5cGVEZXNjcmlwdGlvbiwgYXJndW1lbnQsIHZhbGlkYXRvcik7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkYXRlcyB0aGF0IHRoZSBwcm92aWRlZCBuYW1lZCBvcHRpb24gZXF1YWxzIG9uZSBvZiB0aGUgZXhwZWN0ZWQgdmFsdWVzLlxyXG4gKi9cclxuZnVuY3Rpb24gdmFsaWRhdGVOYW1lZFByb3BlcnR5RXF1YWxzKGZ1bmN0aW9uTmFtZSwgaW5wdXROYW1lLCBvcHRpb25OYW1lLCBpbnB1dCwgZXhwZWN0ZWQpIHtcclxuICAgIHZhciBleHBlY3RlZERlc2NyaXB0aW9uID0gW107XHJcbiAgICBmb3IgKHZhciBfaSA9IDAsIGV4cGVjdGVkXzEgPSBleHBlY3RlZDsgX2kgPCBleHBlY3RlZF8xLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgIHZhciB2YWwgPSBleHBlY3RlZF8xW19pXTtcclxuICAgICAgICBpZiAodmFsID09PSBpbnB1dCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGV4cGVjdGVkRGVzY3JpcHRpb24ucHVzaCh2YWx1ZURlc2NyaXB0aW9uKHZhbCkpO1xyXG4gICAgfVxyXG4gICAgdmFyIGFjdHVhbERlc2NyaXB0aW9uID0gdmFsdWVEZXNjcmlwdGlvbihpbnB1dCk7XHJcbiAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5JTlZBTElEX0FSR1VNRU5ULCBcIkludmFsaWQgdmFsdWUgXCIgKyBhY3R1YWxEZXNjcmlwdGlvbiArIFwiIHByb3ZpZGVkIHRvIGZ1bmN0aW9uIFwiICsgZnVuY3Rpb25OYW1lICsgXCIoKSBmb3Igb3B0aW9uIFwiICtcclxuICAgICAgICAoXCJcXFwiXCIgKyBvcHRpb25OYW1lICsgXCJcXFwiLiBBY2NlcHRhYmxlIHZhbHVlczogXCIgKyBleHBlY3RlZERlc2NyaXB0aW9uLmpvaW4oJywgJykpKTtcclxufVxyXG4vKipcclxuICogVmFsaWRhdGVzIHRoYXQgdGhlIHByb3ZpZGVkIG5hbWVkIG9wdGlvbiBlcXVhbHMgb25lIG9mIHRoZSBleHBlY3RlZCB2YWx1ZXMgb3JcclxuICogaXMgdW5kZWZpbmVkLlxyXG4gKi9cclxuZnVuY3Rpb24gdmFsaWRhdGVOYW1lZE9wdGlvbmFsUHJvcGVydHlFcXVhbHMoZnVuY3Rpb25OYW1lLCBpbnB1dE5hbWUsIG9wdGlvbk5hbWUsIGlucHV0LCBleHBlY3RlZCkge1xyXG4gICAgaWYgKGlucHV0ICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICB2YWxpZGF0ZU5hbWVkUHJvcGVydHlFcXVhbHMoZnVuY3Rpb25OYW1lLCBpbnB1dE5hbWUsIG9wdGlvbk5hbWUsIGlucHV0LCBleHBlY3RlZCk7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkYXRlcyB0aGF0IHRoZSBwcm92aWRlZCBhcmd1bWVudCBpcyBhIHZhbGlkIGVudW0uXHJcbiAqXHJcbiAqIEBwYXJhbSBmdW5jdGlvbk5hbWUgRnVuY3Rpb24gbWFraW5nIHRoZSB2YWxpZGF0aW9uIGNhbGwuXHJcbiAqIEBwYXJhbSBlbnVtcyBBcnJheSBjb250YWluaW5nIGFsbCBwb3NzaWJsZSB2YWx1ZXMgZm9yIHRoZSBlbnVtLlxyXG4gKiBAcGFyYW0gcG9zaXRpb24gUG9zaXRpb24gb2YgdGhlIGFyZ3VtZW50IGluIGBmdW5jdGlvbk5hbWVgLlxyXG4gKiBAcGFyYW0gYXJndW1lbnQgQXJ1Z21lbnQgdG8gdmFsaWRhdGUuXHJcbiAqL1xyXG5mdW5jdGlvbiB2YWxpZGF0ZVN0cmluZ0VudW0oZnVuY3Rpb25OYW1lLCBlbnVtcywgcG9zaXRpb24sIGFyZ3VtZW50KSB7XHJcbiAgICBpZiAoIWVudW1zLnNvbWUoZnVuY3Rpb24gKGVsZW1lbnQpIHsgcmV0dXJuIGVsZW1lbnQgPT09IGFyZ3VtZW50OyB9KSkge1xyXG4gICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLklOVkFMSURfQVJHVU1FTlQsIFwiSW52YWxpZCB2YWx1ZSBcIiArIHZhbHVlRGVzY3JpcHRpb24oYXJndW1lbnQpICsgXCIgcHJvdmlkZWQgdG8gZnVuY3Rpb24gXCIgK1xyXG4gICAgICAgICAgICAoZnVuY3Rpb25OYW1lICsgXCIoKSBmb3IgaXRzIFwiICsgb3JkaW5hbChwb3NpdGlvbikgKyBcIiBhcmd1bWVudC4gQWNjZXB0YWJsZSBcIikgK1xyXG4gICAgICAgICAgICAoXCJ2YWx1ZXM6IFwiICsgZW51bXMuam9pbignLCAnKSkpO1xyXG4gICAgfVxyXG59XHJcbi8qKiBIZWxwZXIgdG8gdmFsaWRhdGUgdGhlIHR5cGUgb2YgYSBwcm92aWRlZCBpbnB1dC4gKi9cclxuZnVuY3Rpb24gdmFsaWRhdGVUeXBlKGZ1bmN0aW9uTmFtZSwgdHlwZSwgaW5wdXROYW1lLCBpbnB1dCkge1xyXG4gICAgdmFyIHZhbGlkID0gZmFsc2U7XHJcbiAgICBpZiAodHlwZSA9PT0gJ29iamVjdCcpIHtcclxuICAgICAgICB2YWxpZCA9IGlzUGxhaW5PYmplY3QoaW5wdXQpO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAodHlwZSA9PT0gJ25vbi1lbXB0eSBzdHJpbmcnKSB7XHJcbiAgICAgICAgdmFsaWQgPSB0eXBlb2YgaW5wdXQgPT09ICdzdHJpbmcnICYmIGlucHV0ICE9PSAnJztcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHZhbGlkID0gdHlwZW9mIGlucHV0ID09PSB0eXBlO1xyXG4gICAgfVxyXG4gICAgaWYgKCF2YWxpZCkge1xyXG4gICAgICAgIHZhciBkZXNjcmlwdGlvbiA9IHZhbHVlRGVzY3JpcHRpb24oaW5wdXQpO1xyXG4gICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLklOVkFMSURfQVJHVU1FTlQsIFwiRnVuY3Rpb24gXCIgKyBmdW5jdGlvbk5hbWUgKyBcIigpIHJlcXVpcmVzIGl0cyBcIiArIGlucHV0TmFtZSArIFwiIFwiICtcclxuICAgICAgICAgICAgKFwidG8gYmUgb2YgdHlwZSBcIiArIHR5cGUgKyBcIiwgYnV0IGl0IHdhczogXCIgKyBkZXNjcmlwdGlvbikpO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBSZXR1cm5zIHRydWUgaWYgaXQncyBhIG5vbi1udWxsIG9iamVjdCB3aXRob3V0IGEgY3VzdG9tIHByb3RvdHlwZVxyXG4gKiAoaS5lLiBleGNsdWRlcyBBcnJheSwgRGF0ZSwgZXRjLikuXHJcbiAqL1xyXG5mdW5jdGlvbiBpc1BsYWluT2JqZWN0KGlucHV0KSB7XHJcbiAgICByZXR1cm4gKHR5cGVvZiBpbnB1dCA9PT0gJ29iamVjdCcgJiZcclxuICAgICAgICBpbnB1dCAhPT0gbnVsbCAmJlxyXG4gICAgICAgIChPYmplY3QuZ2V0UHJvdG90eXBlT2YoaW5wdXQpID09PSBPYmplY3QucHJvdG90eXBlIHx8XHJcbiAgICAgICAgICAgIE9iamVjdC5nZXRQcm90b3R5cGVPZihpbnB1dCkgPT09IG51bGwpKTtcclxufVxyXG4vKiogUmV0dXJucyBhIHN0cmluZyBkZXNjcmliaW5nIHRoZSB0eXBlIC8gdmFsdWUgb2YgdGhlIHByb3ZpZGVkIGlucHV0LiAqL1xyXG5mdW5jdGlvbiB2YWx1ZURlc2NyaXB0aW9uKGlucHV0KSB7XHJcbiAgICBpZiAoaW5wdXQgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIHJldHVybiAndW5kZWZpbmVkJztcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGlucHV0ID09PSBudWxsKSB7XHJcbiAgICAgICAgcmV0dXJuICdudWxsJztcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKHR5cGVvZiBpbnB1dCA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICBpZiAoaW5wdXQubGVuZ3RoID4gMjApIHtcclxuICAgICAgICAgICAgaW5wdXQgPSBpbnB1dC5zdWJzdHJpbmcoMCwgMjApICsgXCIuLi5cIjtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGlucHV0KTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKHR5cGVvZiBpbnB1dCA9PT0gJ251bWJlcicgfHwgdHlwZW9mIGlucHV0ID09PSAnYm9vbGVhbicpIHtcclxuICAgICAgICByZXR1cm4gJycgKyBpbnB1dDtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKHR5cGVvZiBpbnB1dCA9PT0gJ29iamVjdCcpIHtcclxuICAgICAgICBpZiAoaW5wdXQgaW5zdGFuY2VvZiBBcnJheSkge1xyXG4gICAgICAgICAgICByZXR1cm4gJ2FuIGFycmF5JztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHZhciBjdXN0b21PYmplY3ROYW1lID0gdHJ5R2V0Q3VzdG9tT2JqZWN0VHlwZShpbnB1dCk7XHJcbiAgICAgICAgICAgIGlmIChjdXN0b21PYmplY3ROYW1lKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJhIGN1c3RvbSBcIiArIGN1c3RvbU9iamVjdE5hbWUgKyBcIiBvYmplY3RcIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAnYW4gb2JqZWN0JztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGVsc2UgaWYgKHR5cGVvZiBpbnB1dCA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgIHJldHVybiAnYSBmdW5jdGlvbic7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICByZXR1cm4gZmFpbCgnVW5rbm93biB3cm9uZyB0eXBlOiAnICsgdHlwZW9mIGlucHV0KTtcclxuICAgIH1cclxufVxyXG4vKiogSGFja3kgbWV0aG9kIHRvIHRyeSB0byBnZXQgdGhlIGNvbnN0cnVjdG9yIG5hbWUgZm9yIGFuIG9iamVjdC4gKi9cclxuZnVuY3Rpb24gdHJ5R2V0Q3VzdG9tT2JqZWN0VHlwZShpbnB1dCkge1xyXG4gICAgaWYgKGlucHV0LmNvbnN0cnVjdG9yKSB7XHJcbiAgICAgICAgdmFyIGZ1bmNOYW1lUmVnZXggPSAvZnVuY3Rpb25cXHMrKFteXFxzKF0rKVxccypcXCgvO1xyXG4gICAgICAgIHZhciByZXN1bHRzID0gZnVuY05hbWVSZWdleC5leGVjKGlucHV0LmNvbnN0cnVjdG9yLnRvU3RyaW5nKCkpO1xyXG4gICAgICAgIGlmIChyZXN1bHRzICYmIHJlc3VsdHMubGVuZ3RoID4gMSkge1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0c1sxXTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbnVsbDtcclxufVxyXG4vKiogVmFsaWRhdGVzIHRoZSBwcm92aWRlZCBhcmd1bWVudCBpcyBkZWZpbmVkLiAqL1xyXG5mdW5jdGlvbiB2YWxpZGF0ZURlZmluZWQoZnVuY3Rpb25OYW1lLCBwb3NpdGlvbiwgYXJndW1lbnQpIHtcclxuICAgIGlmIChhcmd1bWVudCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuSU5WQUxJRF9BUkdVTUVOVCwgXCJGdW5jdGlvbiBcIiArIGZ1bmN0aW9uTmFtZSArIFwiKCkgcmVxdWlyZXMgYSB2YWxpZCBcIiArIG9yZGluYWwocG9zaXRpb24pICsgXCIgXCIgK1xyXG4gICAgICAgICAgICBcImFyZ3VtZW50LCBidXQgaXQgd2FzIHVuZGVmaW5lZC5cIik7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkYXRlcyB0aGUgcHJvdmlkZWQgcG9zaXRpb25hbCBhcmd1bWVudCBpcyBhbiBvYmplY3QsIGFuZCBpdHMga2V5cyBhbmRcclxuICogdmFsdWVzIG1hdGNoIHRoZSBleHBlY3RlZCBrZXlzIGFuZCB0eXBlcyBwcm92aWRlZCBpbiBvcHRpb25UeXBlcy5cclxuICovXHJcbmZ1bmN0aW9uIHZhbGlkYXRlT3B0aW9uTmFtZXMoZnVuY3Rpb25OYW1lLCBvcHRpb25zLCBvcHRpb25OYW1lcykge1xyXG4gICAgZm9yRWFjaChvcHRpb25zLCBmdW5jdGlvbiAoa2V5LCBfKSB7XHJcbiAgICAgICAgaWYgKG9wdGlvbk5hbWVzLmluZGV4T2Yoa2V5KSA8IDApIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuSU5WQUxJRF9BUkdVTUVOVCwgXCJVbmtub3duIG9wdGlvbiAnXCIgKyBrZXkgKyBcIicgcGFzc2VkIHRvIGZ1bmN0aW9uIFwiICsgZnVuY3Rpb25OYW1lICsgXCIoKS4gXCIgK1xyXG4gICAgICAgICAgICAgICAgJ0F2YWlsYWJsZSBvcHRpb25zOiAnICtcclxuICAgICAgICAgICAgICAgIG9wdGlvbk5hbWVzLmpvaW4oJywgJykpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59XHJcbi8qKlxyXG4gKiBIZWxwZXIgbWV0aG9kIHRvIHRocm93IGFuIGVycm9yIHRoYXQgdGhlIHByb3ZpZGVkIGFyZ3VtZW50IGRpZCBub3QgcGFzc1xyXG4gKiBhbiBpbnN0YW5jZW9mIGNoZWNrLlxyXG4gKi9cclxuZnVuY3Rpb24gaW52YWxpZENsYXNzRXJyb3IoZnVuY3Rpb25OYW1lLCB0eXBlLCBwb3NpdGlvbiwgYXJndW1lbnQpIHtcclxuICAgIHZhciBkZXNjcmlwdGlvbiA9IHZhbHVlRGVzY3JpcHRpb24oYXJndW1lbnQpO1xyXG4gICAgcmV0dXJuIG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLklOVkFMSURfQVJHVU1FTlQsIFwiRnVuY3Rpb24gXCIgKyBmdW5jdGlvbk5hbWUgKyBcIigpIHJlcXVpcmVzIGl0cyBcIiArIG9yZGluYWwocG9zaXRpb24pICsgXCIgXCIgK1xyXG4gICAgICAgIChcImFyZ3VtZW50IHRvIGJlIGEgXCIgKyB0eXBlICsgXCIsIGJ1dCBpdCB3YXM6IFwiICsgZGVzY3JpcHRpb24pKTtcclxufVxyXG5mdW5jdGlvbiB2YWxpZGF0ZVBvc2l0aXZlTnVtYmVyKGZ1bmN0aW9uTmFtZSwgcG9zaXRpb24sIG4pIHtcclxuICAgIGlmIChuIDw9IDApIHtcclxuICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5JTlZBTElEX0FSR1VNRU5ULCBcIkZ1bmN0aW9uIFxcXCJcIiArIGZ1bmN0aW9uTmFtZSArIFwiKClcXFwiIHJlcXVpcmVzIGl0cyBcIiArIG9yZGluYWwocG9zaXRpb24pICsgXCIgYXJndW1lbnQgdG8gYmUgYSBwb3NpdGl2ZSBudW1iZXIsIGJ1dCBpdCB3YXM6IFwiICsgbiArIFwiLlwiKTtcclxuICAgIH1cclxufVxyXG4vKiogQ29udmVydHMgYSBudW1iZXIgdG8gaXRzIGVuZ2xpc2ggd29yZCByZXByZXNlbnRhdGlvbiAqL1xyXG5mdW5jdGlvbiBvcmRpbmFsKG51bSkge1xyXG4gICAgc3dpdGNoIChudW0pIHtcclxuICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgIHJldHVybiAnZmlyc3QnO1xyXG4gICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgcmV0dXJuICdzZWNvbmQnO1xyXG4gICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgcmV0dXJuICd0aGlyZCc7XHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgcmV0dXJuIG51bSArICd0aCc7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIEZvcm1hdHMgdGhlIGdpdmVuIHdvcmQgYXMgcGx1cmFsIGNvbmRpdGlvbmFsbHkgZ2l2ZW4gdGhlIHByZWNlZGluZyBudW1iZXIuXHJcbiAqL1xyXG5mdW5jdGlvbiBmb3JtYXRQbHVyYWwobnVtLCBzdHIpIHtcclxuICAgIHJldHVybiBudW0gKyBcIiBcIiArIHN0ciArIChudW0gPT09IDEgPyAnJyA6ICdzJyk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnZhciBBdXRvSWQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBBdXRvSWQoKSB7XHJcbiAgICB9XHJcbiAgICBBdXRvSWQubmV3SWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy8gQWxwaGFudW1lcmljIGNoYXJhY3RlcnNcclxuICAgICAgICB2YXIgY2hhcnMgPSAnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODknO1xyXG4gICAgICAgIHZhciBhdXRvSWQgPSAnJztcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDIwOyBpKyspIHtcclxuICAgICAgICAgICAgYXV0b0lkICs9IGNoYXJzLmNoYXJBdChNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBjaGFycy5sZW5ndGgpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgYXNzZXJ0KGF1dG9JZC5sZW5ndGggPT09IDIwLCAnSW52YWxpZCBhdXRvIElEOiAnICsgYXV0b0lkKTtcclxuICAgICAgICByZXR1cm4gYXV0b0lkO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBBdXRvSWQ7XHJcbn0oKSk7XHJcbmZ1bmN0aW9uIHByaW1pdGl2ZUNvbXBhcmF0b3IobGVmdCwgcmlnaHQpIHtcclxuICAgIGlmIChsZWZ0IDwgcmlnaHQpIHtcclxuICAgICAgICByZXR1cm4gLTE7XHJcbiAgICB9XHJcbiAgICBpZiAobGVmdCA+IHJpZ2h0KSB7XHJcbiAgICAgICAgcmV0dXJuIDE7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gMDtcclxufVxyXG4vKiogSGVscGVyIHRvIGNvbXBhcmUgbnVsbGFibGUgKG9yIHVuZGVmaW5lZC1hYmxlKSBvYmplY3RzIHVzaW5nIGlzRXF1YWwoKS4gKi9cclxuZnVuY3Rpb24gZXF1YWxzKGxlZnQsIHJpZ2h0KSB7XHJcbiAgICBpZiAobGVmdCAhPT0gbnVsbCAmJiBsZWZ0ICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICByZXR1cm4gISEocmlnaHQgJiYgbGVmdC5pc0VxdWFsKHJpZ2h0KSk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICAvLyBIQUNLOiBFeHBsaWNpdGx5IGNhc3Qgc2luY2UgVHlwZVNjcmlwdCdzIHR5cGUgbmFycm93aW5nIGFwcGFyZW50bHkgaXNuJ3RcclxuICAgICAgICAvLyBzbWFydCBlbm91Z2guXHJcbiAgICAgICAgcmV0dXJuIGxlZnQgPT09IHJpZ2h0O1xyXG4gICAgfVxyXG59XHJcbi8qKiBIZWxwZXIgdG8gY29tcGFyZSBhcnJheXMgdXNpbmcgaXNFcXVhbCgpLiAqL1xyXG5mdW5jdGlvbiBhcnJheUVxdWFscyhsZWZ0LCByaWdodCkge1xyXG4gICAgaWYgKGxlZnQubGVuZ3RoICE9PSByaWdodC5sZW5ndGgpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlZnQubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBpZiAoIWxlZnRbaV0uaXNFcXVhbChyaWdodFtpXSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiB0cnVlO1xyXG59XHJcbi8qKlxyXG4gKiBSZXR1cm5zIHRoZSBpbW1lZGlhdGUgbGV4aWNvZ3JhcGhpY2FsbHktZm9sbG93aW5nIHN0cmluZy4gVGhpcyBpcyB1c2VmdWwgdG9cclxuICogY29uc3RydWN0IGFuIGluY2x1c2l2ZSByYW5nZSBmb3IgaW5kZXhlZGRiIGl0ZXJhdG9ycy5cclxuICovXHJcbmZ1bmN0aW9uIGltbWVkaWF0ZVN1Y2Nlc3NvcihzKSB7XHJcbiAgICAvLyBSZXR1cm4gdGhlIGlucHV0IHN0cmluZywgd2l0aCBhbiBhZGRpdGlvbmFsIE5VTCBieXRlIGFwcGVuZGVkLlxyXG4gICAgcmV0dXJuIHMgKyAnXFwwJztcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqIEhlbHBlciBmdW5jdGlvbiB0byBhc3NlcnQgVWludDhBcnJheSBpcyBhdmFpbGFibGUgYXQgcnVudGltZS4gKi9cclxuZnVuY3Rpb24gYXNzZXJ0VWludDhBcnJheUF2YWlsYWJsZSgpIHtcclxuICAgIGlmICh0eXBlb2YgVWludDhBcnJheSA9PT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5VTklNUExFTUVOVEVELCAnVWludDhBcnJheXMgYXJlIG5vdCBhdmFpbGFibGUgaW4gdGhpcyBlbnZpcm9ubWVudC4nKTtcclxuICAgIH1cclxufVxyXG4vKiogSGVscGVyIGZ1bmN0aW9uIHRvIGFzc2VydCBCYXNlNjQgZnVuY3Rpb25zIGFyZSBhdmFpbGFibGUgYXQgcnVudGltZS4gKi9cclxuZnVuY3Rpb24gYXNzZXJ0QmFzZTY0QXZhaWxhYmxlKCkge1xyXG4gICAgaWYgKCFQbGF0Zm9ybVN1cHBvcnQuZ2V0UGxhdGZvcm0oKS5iYXNlNjRBdmFpbGFibGUpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5VTklNUExFTUVOVEVELCAnQmxvYnMgYXJlIHVuYXZhaWxhYmxlIGluIEZpcmVzdG9yZSBpbiB0aGlzIGVudmlyb25tZW50LicpO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBJbW11dGFibGUgY2xhc3MgaG9sZGluZyBhIGJsb2IgKGJpbmFyeSBkYXRhKS5cclxuICogVGhpcyBjbGFzcyBpcyBkaXJlY3RseSBleHBvc2VkIGluIHRoZSBwdWJsaWMgQVBJLlxyXG4gKlxyXG4gKiBOb3RlIHRoYXQgd2hpbGUgeW91IGNhbid0IGhpZGUgdGhlIGNvbnN0cnVjdG9yIGluIEphdmFTY3JpcHQgY29kZSwgd2UgYXJlXHJcbiAqIHVzaW5nIHRoZSBoYWNrIGFib3ZlIHRvIG1ha2Ugc3VyZSBuby1vbmUgb3V0c2lkZSB0aGlzIG1vZHVsZSBjYW4gY2FsbCBpdC5cclxuICovXHJcbnZhciBCbG9iID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gQmxvYihiaW5hcnlTdHJpbmcpIHtcclxuICAgICAgICBhc3NlcnRCYXNlNjRBdmFpbGFibGUoKTtcclxuICAgICAgICB0aGlzLl9iaW5hcnlTdHJpbmcgPSBiaW5hcnlTdHJpbmc7XHJcbiAgICB9XHJcbiAgICBCbG9iLmZyb21CYXNlNjRTdHJpbmcgPSBmdW5jdGlvbiAoYmFzZTY0KSB7XHJcbiAgICAgICAgdmFsaWRhdGVFeGFjdE51bWJlck9mQXJncygnQmxvYi5mcm9tQmFzZTY0U3RyaW5nJywgYXJndW1lbnRzLCAxKTtcclxuICAgICAgICB2YWxpZGF0ZUFyZ1R5cGUoJ0Jsb2IuZnJvbUJhc2U2NFN0cmluZycsICdzdHJpbmcnLCAxLCBiYXNlNjQpO1xyXG4gICAgICAgIGFzc2VydEJhc2U2NEF2YWlsYWJsZSgpO1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHZhciBiaW5hcnlTdHJpbmcgPSBQbGF0Zm9ybVN1cHBvcnQuZ2V0UGxhdGZvcm0oKS5hdG9iKGJhc2U2NCk7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgQmxvYihiaW5hcnlTdHJpbmcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5JTlZBTElEX0FSR1VNRU5ULCAnRmFpbGVkIHRvIGNvbnN0cnVjdCBCbG9iIGZyb20gQmFzZTY0IHN0cmluZzogJyArIGUpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBCbG9iLmZyb21VaW50OEFycmF5ID0gZnVuY3Rpb24gKGFycmF5KSB7XHJcbiAgICAgICAgdmFsaWRhdGVFeGFjdE51bWJlck9mQXJncygnQmxvYi5mcm9tVWludDhBcnJheScsIGFyZ3VtZW50cywgMSk7XHJcbiAgICAgICAgYXNzZXJ0VWludDhBcnJheUF2YWlsYWJsZSgpO1xyXG4gICAgICAgIGlmICghKGFycmF5IGluc3RhbmNlb2YgVWludDhBcnJheSkpIHtcclxuICAgICAgICAgICAgdGhyb3cgaW52YWxpZENsYXNzRXJyb3IoJ0Jsb2IuZnJvbVVpbnQ4QXJyYXknLCAnVWludDhBcnJheScsIDEsIGFycmF5KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gV2UgY2FuJ3QgY2FsbCBhcnJheS5tYXAgZGlyZWN0bHkgYmVjYXVzZSBpdCBleHBlY3RzIHRoZSByZXR1cm4gdHlwZSB0b1xyXG4gICAgICAgIC8vIGJlIGEgVWludDhBcnJheSwgd2hlcmVhcyB3ZSBjYW4gY29udmVydCBpdCB0byBhIHJlZ3VsYXIgYXJyYXkgYnkgaW52b2tpbmdcclxuICAgICAgICAvLyBtYXAgb24gdGhlIEFycmF5IHByb3RvdHlwZS5cclxuICAgICAgICB2YXIgYmluYXJ5U3RyaW5nID0gQXJyYXkucHJvdG90eXBlLm1hcFxyXG4gICAgICAgICAgICAuY2FsbChhcnJheSwgZnVuY3Rpb24gKGNoYXIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUoY2hhcik7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLmpvaW4oJycpO1xyXG4gICAgICAgIHJldHVybiBuZXcgQmxvYihiaW5hcnlTdHJpbmcpO1xyXG4gICAgfTtcclxuICAgIEJsb2IucHJvdG90eXBlLnRvQmFzZTY0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhbGlkYXRlRXhhY3ROdW1iZXJPZkFyZ3MoJ0Jsb2IudG9CYXNlNjQnLCBhcmd1bWVudHMsIDApO1xyXG4gICAgICAgIGFzc2VydEJhc2U2NEF2YWlsYWJsZSgpO1xyXG4gICAgICAgIHJldHVybiBQbGF0Zm9ybVN1cHBvcnQuZ2V0UGxhdGZvcm0oKS5idG9hKHRoaXMuX2JpbmFyeVN0cmluZyk7XHJcbiAgICB9O1xyXG4gICAgQmxvYi5wcm90b3R5cGUudG9VaW50OEFycmF5ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhbGlkYXRlRXhhY3ROdW1iZXJPZkFyZ3MoJ0Jsb2IudG9VaW50OEFycmF5JywgYXJndW1lbnRzLCAwKTtcclxuICAgICAgICBhc3NlcnRVaW50OEFycmF5QXZhaWxhYmxlKCk7XHJcbiAgICAgICAgdmFyIGJ1ZmZlciA9IG5ldyBVaW50OEFycmF5KHRoaXMuX2JpbmFyeVN0cmluZy5sZW5ndGgpO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5fYmluYXJ5U3RyaW5nLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGJ1ZmZlcltpXSA9IHRoaXMuX2JpbmFyeVN0cmluZy5jaGFyQ29kZUF0KGkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gYnVmZmVyO1xyXG4gICAgfTtcclxuICAgIEJsb2IucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiAnQmxvYihiYXNlNjQ6ICcgKyB0aGlzLnRvQmFzZTY0KCkgKyAnKSc7XHJcbiAgICB9O1xyXG4gICAgQmxvYi5wcm90b3R5cGUuaXNFcXVhbCA9IGZ1bmN0aW9uIChvdGhlcikge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9iaW5hcnlTdHJpbmcgPT09IG90aGVyLl9iaW5hcnlTdHJpbmc7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBBY3R1YWxseSBwcml2YXRlIHRvIEpTIGNvbnN1bWVycyBvZiBvdXIgQVBJLCBzbyB0aGlzIGZ1bmN0aW9uIGlzIHByZWZpeGVkXHJcbiAgICAgKiB3aXRoIGFuIHVuZGVyc2NvcmUuXHJcbiAgICAgKi9cclxuICAgIEJsb2IucHJvdG90eXBlLl9jb21wYXJlVG8gPSBmdW5jdGlvbiAob3RoZXIpIHtcclxuICAgICAgICByZXR1cm4gcHJpbWl0aXZlQ29tcGFyYXRvcih0aGlzLl9iaW5hcnlTdHJpbmcsIG90aGVyLl9iaW5hcnlTdHJpbmcpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBCbG9iO1xyXG59KCkpO1xyXG4vLyBQdWJsaWMgaW5zdGFuY2UgdGhhdCBkaXNhbGxvd3MgY29uc3RydWN0aW9uIGF0IHJ1bnRpbWUuIFRoaXMgY29uc3RydWN0b3IgaXNcclxuLy8gdXNlZCB3aGVuIGV4cG9ydGluZyBCbG9iIG9uIGZpcmViYXNlLmZpcmVzdG9yZS5CbG9iIGFuZCB3aWxsIGJlIGNhbGxlZCBCbG9iXHJcbi8vIHB1YmxpY2x5LiBJbnRlcm5hbGx5IHdlIHN0aWxsIHVzZSBCbG9iIHdoaWNoIGhhcyBhIHR5cGUgY2hlY2tlZCBwcml2YXRlXHJcbi8vIGNvbnN0cnVjdG9yLiBOb3RlIHRoYXQgQmxvYiBhbmQgUHVibGljQmxvYiBjYW4gYmUgdXNlZCBpbnRlcmNoYW5nZWFibHkgaW5cclxuLy8gaW5zdGFuY2VvZiBjaGVja3MuXHJcbi8vIEZvciBvdXIgaW50ZXJuYWwgVHlwZVNjcmlwdCBjb2RlIFB1YmxpY0Jsb2IgZG9lc24ndCBleGlzdCBhcyBhIHR5cGUsIGFuZCBzb1xyXG4vLyB3ZSBuZWVkIHRvIHVzZSBCbG9iIGFzIHR5cGUgYW5kIGV4cG9ydCBpdCB0b28uXHJcbnZhciBQdWJsaWNCbG9iID0gbWFrZUNvbnN0cnVjdG9yUHJpdmF0ZShCbG9iLCAnVXNlIEJsb2IuZnJvbVVpbnQ4QXJyYXkoKSBvciBCbG9iLmZyb21CYXNlNjRTdHJpbmcoKSBpbnN0ZWFkLicpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxudmFyIERhdGFiYXNlSW5mbyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIC8qKlxyXG4gICAgICogQ29uc3RydWN0cyBhIERhdGFiYXNlSW5mbyB1c2luZyB0aGUgcHJvdmlkZWQgaG9zdCwgZGF0YWJhc2VJZCBhbmRcclxuICAgICAqIHBlcnNpc3RlbmNlS2V5LlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBkYXRhYmFzZUlkIFRoZSBkYXRhYmFzZSB0byB1c2UuXHJcbiAgICAgKiBAcGFyYW0gcGVyc2lzdGVuY2VLZXkgQSB1bmlxdWUgaWRlbnRpZmllciBmb3IgdGhpcyBGaXJlc3RvcmUncyBsb2NhbFxyXG4gICAgICogc3RvcmFnZSAodXNlZCBpbiBjb25qdW5jdGlvbiB3aXRoIHRoZSBkYXRhYmFzZUlkKS5cclxuICAgICAqIEBwYXJhbSBob3N0IFRoZSBGaXJlc3RvcmUgYmFja2VuZCBob3N0IHRvIGNvbm5lY3QgdG8uXHJcbiAgICAgKiBAcGFyYW0gc3NsIFdoZXRoZXIgdG8gdXNlIFNTTCB3aGVuIGNvbm5lY3RpbmcuXHJcbiAgICAgKiBAcGFyYW0gZm9yY2VMb25nUG9sbGluZyBXaGV0aGVyIHRvIHVzZSB0aGUgZm9yY2VMb25nUG9sbGluZyBvcHRpb25cclxuICAgICAqIHdoZW4gdXNpbmcgV2ViQ2hhbm5lbCBhcyB0aGUgbmV0d29yayB0cmFuc3BvcnQuXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIERhdGFiYXNlSW5mbyhkYXRhYmFzZUlkLCBwZXJzaXN0ZW5jZUtleSwgaG9zdCwgc3NsLCBmb3JjZUxvbmdQb2xsaW5nKSB7XHJcbiAgICAgICAgdGhpcy5kYXRhYmFzZUlkID0gZGF0YWJhc2VJZDtcclxuICAgICAgICB0aGlzLnBlcnNpc3RlbmNlS2V5ID0gcGVyc2lzdGVuY2VLZXk7XHJcbiAgICAgICAgdGhpcy5ob3N0ID0gaG9zdDtcclxuICAgICAgICB0aGlzLnNzbCA9IHNzbDtcclxuICAgICAgICB0aGlzLmZvcmNlTG9uZ1BvbGxpbmcgPSBmb3JjZUxvbmdQb2xsaW5nO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIERhdGFiYXNlSW5mbztcclxufSgpKTtcclxuLyoqIFRoZSBkZWZhdWx0IGRhdGFiYXNlIG5hbWUgZm9yIGEgcHJvamVjdC4gKi9cclxudmFyIERFRkFVTFRfREFUQUJBU0VfTkFNRSA9ICcoZGVmYXVsdCknO1xyXG4vKiogUmVwcmVzZW50cyB0aGUgZGF0YWJhc2UgSUQgYSBGaXJlc3RvcmUgY2xpZW50IGlzIGFzc29jaWF0ZWQgd2l0aC4gKi9cclxudmFyIERhdGFiYXNlSWQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBEYXRhYmFzZUlkKHByb2plY3RJZCwgZGF0YWJhc2UpIHtcclxuICAgICAgICB0aGlzLnByb2plY3RJZCA9IHByb2plY3RJZDtcclxuICAgICAgICB0aGlzLmRhdGFiYXNlID0gZGF0YWJhc2UgPyBkYXRhYmFzZSA6IERFRkFVTFRfREFUQUJBU0VfTkFNRTtcclxuICAgIH1cclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShEYXRhYmFzZUlkLnByb3RvdHlwZSwgXCJpc0RlZmF1bHREYXRhYmFzZVwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRhdGFiYXNlID09PSBERUZBVUxUX0RBVEFCQVNFX05BTUU7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBEYXRhYmFzZUlkLnByb3RvdHlwZS5pc0VxdWFsID0gZnVuY3Rpb24gKG90aGVyKSB7XHJcbiAgICAgICAgcmV0dXJuIChvdGhlciBpbnN0YW5jZW9mIERhdGFiYXNlSWQgJiZcclxuICAgICAgICAgICAgb3RoZXIucHJvamVjdElkID09PSB0aGlzLnByb2plY3RJZCAmJlxyXG4gICAgICAgICAgICBvdGhlci5kYXRhYmFzZSA9PT0gdGhpcy5kYXRhYmFzZSk7XHJcbiAgICB9O1xyXG4gICAgRGF0YWJhc2VJZC5wcm90b3R5cGUuY29tcGFyZVRvID0gZnVuY3Rpb24gKG90aGVyKSB7XHJcbiAgICAgICAgcmV0dXJuIChwcmltaXRpdmVDb21wYXJhdG9yKHRoaXMucHJvamVjdElkLCBvdGhlci5wcm9qZWN0SWQpIHx8XHJcbiAgICAgICAgICAgIHByaW1pdGl2ZUNvbXBhcmF0b3IodGhpcy5kYXRhYmFzZSwgb3RoZXIuZGF0YWJhc2UpKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gRGF0YWJhc2VJZDtcclxufSgpKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBgTGlzdGVuU2VxdWVuY2VgIGlzIGEgbW9ub3RvbmljIHNlcXVlbmNlLiBJdCBpcyBpbml0aWFsaXplZCB3aXRoIGEgbWluaW11bSB2YWx1ZSB0b1xyXG4gKiBleGNlZWQuIEFsbCBzdWJzZXF1ZW50IGNhbGxzIHRvIG5leHQgd2lsbCByZXR1cm4gaW5jcmVhc2luZyB2YWx1ZXMuIElmIHByb3ZpZGVkIHdpdGggYVxyXG4gKiBgU2VxdWVuY2VOdW1iZXJTeW5jZXJgLCBpdCB3aWxsIGFkZGl0aW9uYWxseSBidW1wIGl0cyBuZXh0IHZhbHVlIHdoZW4gdG9sZCBvZiBhIG5ldyB2YWx1ZSwgYXNcclxuICogd2VsbCBhcyB3cml0ZSBvdXQgc2VxdWVuY2UgbnVtYmVycyB0aGF0IGl0IHByb2R1Y2VzIHZpYSBgbmV4dCgpYC5cclxuICovXHJcbnZhciBMaXN0ZW5TZXF1ZW5jZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIExpc3RlblNlcXVlbmNlKHByZXZpb3VzVmFsdWUsIHNlcXVlbmNlTnVtYmVyU3luY2VyKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB0aGlzLnByZXZpb3VzVmFsdWUgPSBwcmV2aW91c1ZhbHVlO1xyXG4gICAgICAgIGlmIChzZXF1ZW5jZU51bWJlclN5bmNlcikge1xyXG4gICAgICAgICAgICBzZXF1ZW5jZU51bWJlclN5bmNlci5zZXF1ZW5jZU51bWJlckhhbmRsZXIgPSBmdW5jdGlvbiAoc2VxdWVuY2VOdW1iZXIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5zZXRQcmV2aW91c1ZhbHVlKHNlcXVlbmNlTnVtYmVyKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgdGhpcy53cml0ZU5ld1NlcXVlbmNlTnVtYmVyID0gZnVuY3Rpb24gKHNlcXVlbmNlTnVtYmVyKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gc2VxdWVuY2VOdW1iZXJTeW5jZXIud3JpdGVTZXF1ZW5jZU51bWJlcihzZXF1ZW5jZU51bWJlcik7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgTGlzdGVuU2VxdWVuY2UucHJvdG90eXBlLnNldFByZXZpb3VzVmFsdWUgPSBmdW5jdGlvbiAoZXh0ZXJuYWxQcmV2aW91c1ZhbHVlKSB7XHJcbiAgICAgICAgdGhpcy5wcmV2aW91c1ZhbHVlID0gTWF0aC5tYXgoZXh0ZXJuYWxQcmV2aW91c1ZhbHVlLCB0aGlzLnByZXZpb3VzVmFsdWUpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnByZXZpb3VzVmFsdWU7XHJcbiAgICB9O1xyXG4gICAgTGlzdGVuU2VxdWVuY2UucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIG5leHRWYWx1ZSA9ICsrdGhpcy5wcmV2aW91c1ZhbHVlO1xyXG4gICAgICAgIGlmICh0aGlzLndyaXRlTmV3U2VxdWVuY2VOdW1iZXIpIHtcclxuICAgICAgICAgICAgdGhpcy53cml0ZU5ld1NlcXVlbmNlTnVtYmVyKG5leHRWYWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBuZXh0VmFsdWU7XHJcbiAgICB9O1xyXG4gICAgTGlzdGVuU2VxdWVuY2UuSU5WQUxJRCA9IC0xO1xyXG4gICAgcmV0dXJuIExpc3RlblNlcXVlbmNlO1xyXG59KCkpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxudmFyIERPQ1VNRU5UX0tFWV9OQU1FID0gJ19fbmFtZV9fJztcclxuLyoqXHJcbiAqIFBhdGggcmVwcmVzZW50cyBhbiBvcmRlcmVkIHNlcXVlbmNlIG9mIHN0cmluZyBzZWdtZW50cy5cclxuICovXHJcbnZhciBCYXNlUGF0aCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEJhc2VQYXRoKHNlZ21lbnRzLCBvZmZzZXQsIGxlbmd0aCkge1xyXG4gICAgICAgIGlmIChvZmZzZXQgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBvZmZzZXQgPSAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChvZmZzZXQgPiBzZWdtZW50cy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgZmFpbCgnb2Zmc2V0ICcgKyBvZmZzZXQgKyAnIG91dCBvZiByYW5nZSAnICsgc2VnbWVudHMubGVuZ3RoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGxlbmd0aCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGxlbmd0aCA9IHNlZ21lbnRzLmxlbmd0aCAtIG9mZnNldDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAobGVuZ3RoID4gc2VnbWVudHMubGVuZ3RoIC0gb2Zmc2V0KSB7XHJcbiAgICAgICAgICAgIGZhaWwoJ2xlbmd0aCAnICsgbGVuZ3RoICsgJyBvdXQgb2YgcmFuZ2UgJyArIChzZWdtZW50cy5sZW5ndGggLSBvZmZzZXQpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zZWdtZW50cyA9IHNlZ21lbnRzO1xyXG4gICAgICAgIHRoaXMub2Zmc2V0ID0gb2Zmc2V0O1xyXG4gICAgICAgIHRoaXMubGVuID0gbGVuZ3RoO1xyXG4gICAgfVxyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEJhc2VQYXRoLnByb3RvdHlwZSwgXCJsZW5ndGhcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5sZW47XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBCYXNlUGF0aC5wcm90b3R5cGUuaXNFcXVhbCA9IGZ1bmN0aW9uIChvdGhlcikge1xyXG4gICAgICAgIHJldHVybiBCYXNlUGF0aC5jb21wYXJhdG9yKHRoaXMsIG90aGVyKSA9PT0gMDtcclxuICAgIH07XHJcbiAgICBCYXNlUGF0aC5wcm90b3R5cGUuY2hpbGQgPSBmdW5jdGlvbiAobmFtZU9yUGF0aCkge1xyXG4gICAgICAgIHZhciBzZWdtZW50cyA9IHRoaXMuc2VnbWVudHMuc2xpY2UodGhpcy5vZmZzZXQsIHRoaXMubGltaXQoKSk7XHJcbiAgICAgICAgaWYgKG5hbWVPclBhdGggaW5zdGFuY2VvZiBCYXNlUGF0aCkge1xyXG4gICAgICAgICAgICBuYW1lT3JQYXRoLmZvckVhY2goZnVuY3Rpb24gKHNlZ21lbnQpIHtcclxuICAgICAgICAgICAgICAgIHNlZ21lbnRzLnB1c2goc2VnbWVudCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgc2VnbWVudHMucHVzaChuYW1lT3JQYXRoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY29uc3RydWN0KHNlZ21lbnRzKTtcclxuICAgIH07XHJcbiAgICAvKiogVGhlIGluZGV4IG9mIG9uZSBwYXN0IHRoZSBsYXN0IHNlZ21lbnQgb2YgdGhlIHBhdGguICovXHJcbiAgICBCYXNlUGF0aC5wcm90b3R5cGUubGltaXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMub2Zmc2V0ICsgdGhpcy5sZW5ndGg7XHJcbiAgICB9O1xyXG4gICAgQmFzZVBhdGgucHJvdG90eXBlLnBvcEZpcnN0ID0gZnVuY3Rpb24gKHNpemUpIHtcclxuICAgICAgICBzaXplID0gc2l6ZSA9PT0gdW5kZWZpbmVkID8gMSA6IHNpemU7XHJcbiAgICAgICAgYXNzZXJ0KHRoaXMubGVuZ3RoID49IHNpemUsIFwiQ2FuJ3QgY2FsbCBwb3BGaXJzdCgpIHdpdGggbGVzcyBzZWdtZW50c1wiKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3QodGhpcy5zZWdtZW50cywgdGhpcy5vZmZzZXQgKyBzaXplLCB0aGlzLmxlbmd0aCAtIHNpemUpO1xyXG4gICAgfTtcclxuICAgIEJhc2VQYXRoLnByb3RvdHlwZS5wb3BMYXN0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGFzc2VydCghdGhpcy5pc0VtcHR5KCksIFwiQ2FuJ3QgY2FsbCBwb3BMYXN0KCkgb24gZW1wdHkgcGF0aFwiKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3QodGhpcy5zZWdtZW50cywgdGhpcy5vZmZzZXQsIHRoaXMubGVuZ3RoIC0gMSk7XHJcbiAgICB9O1xyXG4gICAgQmFzZVBhdGgucHJvdG90eXBlLmZpcnN0U2VnbWVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBhc3NlcnQoIXRoaXMuaXNFbXB0eSgpLCBcIkNhbid0IGNhbGwgZmlyc3RTZWdtZW50KCkgb24gZW1wdHkgcGF0aFwiKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5zZWdtZW50c1t0aGlzLm9mZnNldF07XHJcbiAgICB9O1xyXG4gICAgQmFzZVBhdGgucHJvdG90eXBlLmxhc3RTZWdtZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldCh0aGlzLmxlbmd0aCAtIDEpO1xyXG4gICAgfTtcclxuICAgIEJhc2VQYXRoLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoaW5kZXgpIHtcclxuICAgICAgICBhc3NlcnQoaW5kZXggPCB0aGlzLmxlbmd0aCwgJ0luZGV4IG91dCBvZiByYW5nZScpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNlZ21lbnRzW3RoaXMub2Zmc2V0ICsgaW5kZXhdO1xyXG4gICAgfTtcclxuICAgIEJhc2VQYXRoLnByb3RvdHlwZS5pc0VtcHR5ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmxlbmd0aCA9PT0gMDtcclxuICAgIH07XHJcbiAgICBCYXNlUGF0aC5wcm90b3R5cGUuaXNQcmVmaXhPZiA9IGZ1bmN0aW9uIChvdGhlcikge1xyXG4gICAgICAgIGlmIChvdGhlci5sZW5ndGggPCB0aGlzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5nZXQoaSkgIT09IG90aGVyLmdldChpKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfTtcclxuICAgIEJhc2VQYXRoLnByb3RvdHlwZS5pc0ltbWVkaWF0ZVBhcmVudE9mID0gZnVuY3Rpb24gKHBvdGVudGlhbENoaWxkKSB7XHJcbiAgICAgICAgaWYgKHRoaXMubGVuZ3RoICsgMSAhPT0gcG90ZW50aWFsQ2hpbGQubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmdldChpKSAhPT0gcG90ZW50aWFsQ2hpbGQuZ2V0KGkpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9O1xyXG4gICAgQmFzZVBhdGgucHJvdG90eXBlLmZvckVhY2ggPSBmdW5jdGlvbiAoZm4pIHtcclxuICAgICAgICBmb3IgKHZhciBpID0gdGhpcy5vZmZzZXQsIGVuZCA9IHRoaXMubGltaXQoKTsgaSA8IGVuZDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGZuKHRoaXMuc2VnbWVudHNbaV0pO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBCYXNlUGF0aC5wcm90b3R5cGUudG9BcnJheSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zZWdtZW50cy5zbGljZSh0aGlzLm9mZnNldCwgdGhpcy5saW1pdCgpKTtcclxuICAgIH07XHJcbiAgICBCYXNlUGF0aC5jb21wYXJhdG9yID0gZnVuY3Rpb24gKHAxLCBwMikge1xyXG4gICAgICAgIHZhciBsZW4gPSBNYXRoLm1pbihwMS5sZW5ndGgsIHAyLmxlbmd0aCk7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xyXG4gICAgICAgICAgICB2YXIgbGVmdCA9IHAxLmdldChpKTtcclxuICAgICAgICAgICAgdmFyIHJpZ2h0ID0gcDIuZ2V0KGkpO1xyXG4gICAgICAgICAgICBpZiAobGVmdCA8IHJpZ2h0KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gLTE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGxlZnQgPiByaWdodCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIDE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHAxLmxlbmd0aCA8IHAyLmxlbmd0aCkge1xyXG4gICAgICAgICAgICByZXR1cm4gLTE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChwMS5sZW5ndGggPiBwMi5sZW5ndGgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIDE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiAwO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBCYXNlUGF0aDtcclxufSgpKTtcclxuLyoqXHJcbiAqIEEgc2xhc2gtc2VwYXJhdGVkIHBhdGggZm9yIG5hdmlnYXRpbmcgcmVzb3VyY2VzIChkb2N1bWVudHMgYW5kIGNvbGxlY3Rpb25zKVxyXG4gKiB3aXRoaW4gRmlyZXN0b3JlLlxyXG4gKi9cclxudmFyIFJlc291cmNlUGF0aCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIHRzbGliLl9fZXh0ZW5kcyhSZXNvdXJjZVBhdGgsIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBSZXNvdXJjZVBhdGgoKSB7XHJcbiAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xyXG4gICAgfVxyXG4gICAgUmVzb3VyY2VQYXRoLnByb3RvdHlwZS5jb25zdHJ1Y3QgPSBmdW5jdGlvbiAoc2VnbWVudHMsIG9mZnNldCwgbGVuZ3RoKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBSZXNvdXJjZVBhdGgoc2VnbWVudHMsIG9mZnNldCwgbGVuZ3RoKTtcclxuICAgIH07XHJcbiAgICBSZXNvdXJjZVBhdGgucHJvdG90eXBlLmNhbm9uaWNhbFN0cmluZyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvLyBOT1RFOiBUaGUgY2xpZW50IGlzIGlnbm9yYW50IG9mIGFueSBwYXRoIHNlZ21lbnRzIGNvbnRhaW5pbmcgZXNjYXBlXHJcbiAgICAgICAgLy8gc2VxdWVuY2VzIChlLmcuIF9faWQxMjNfXykgYW5kIGp1c3QgcGFzc2VzIHRoZW0gdGhyb3VnaCByYXcgKHRoZXkgZXhpc3RcclxuICAgICAgICAvLyBmb3IgbGVnYWN5IHJlYXNvbnMgYW5kIHNob3VsZCBub3QgYmUgdXNlZCBmcmVxdWVudGx5KS5cclxuICAgICAgICByZXR1cm4gdGhpcy50b0FycmF5KCkuam9pbignLycpO1xyXG4gICAgfTtcclxuICAgIFJlc291cmNlUGF0aC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY2Fub25pY2FsU3RyaW5nKCk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGVzIGEgcmVzb3VyY2UgcGF0aCBmcm9tIHRoZSBnaXZlbiBzbGFzaC1kZWxpbWl0ZWQgc3RyaW5nLlxyXG4gICAgICovXHJcbiAgICBSZXNvdXJjZVBhdGguZnJvbVN0cmluZyA9IGZ1bmN0aW9uIChwYXRoKSB7XHJcbiAgICAgICAgLy8gTk9URTogVGhlIGNsaWVudCBpcyBpZ25vcmFudCBvZiBhbnkgcGF0aCBzZWdtZW50cyBjb250YWluaW5nIGVzY2FwZVxyXG4gICAgICAgIC8vIHNlcXVlbmNlcyAoZS5nLiBfX2lkMTIzX18pIGFuZCBqdXN0IHBhc3NlcyB0aGVtIHRocm91Z2ggcmF3ICh0aGV5IGV4aXN0XHJcbiAgICAgICAgLy8gZm9yIGxlZ2FjeSByZWFzb25zIGFuZCBzaG91bGQgbm90IGJlIHVzZWQgZnJlcXVlbnRseSkuXHJcbiAgICAgICAgaWYgKHBhdGguaW5kZXhPZignLy8nKSA+PSAwKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLklOVkFMSURfQVJHVU1FTlQsIFwiSW52YWxpZCBwYXRoIChcIiArIHBhdGggKyBcIikuIFBhdGhzIG11c3Qgbm90IGNvbnRhaW4gLy8gaW4gdGhlbS5cIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFdlIG1heSBzdGlsbCBoYXZlIGFuIGVtcHR5IHNlZ21lbnQgYXQgdGhlIGJlZ2lubmluZyBvciBlbmQgaWYgdGhleSBoYWQgYVxyXG4gICAgICAgIC8vIGxlYWRpbmcgb3IgdHJhaWxpbmcgc2xhc2ggKHdoaWNoIHdlIGFsbG93KS5cclxuICAgICAgICB2YXIgc2VnbWVudHMgPSBwYXRoLnNwbGl0KCcvJykuZmlsdGVyKGZ1bmN0aW9uIChzZWdtZW50KSB7IHJldHVybiBzZWdtZW50Lmxlbmd0aCA+IDA7IH0pO1xyXG4gICAgICAgIHJldHVybiBuZXcgUmVzb3VyY2VQYXRoKHNlZ21lbnRzKTtcclxuICAgIH07XHJcbiAgICBSZXNvdXJjZVBhdGguRU1QVFlfUEFUSCA9IG5ldyBSZXNvdXJjZVBhdGgoW10pO1xyXG4gICAgcmV0dXJuIFJlc291cmNlUGF0aDtcclxufShCYXNlUGF0aCkpO1xyXG52YXIgaWRlbnRpZmllclJlZ0V4cCA9IC9eW19hLXpBLVpdW19hLXpBLVowLTldKiQvO1xyXG4vKiogQSBkb3Qtc2VwYXJhdGVkIHBhdGggZm9yIG5hdmlnYXRpbmcgc3ViLW9iamVjdHMgd2l0aGluIGEgZG9jdW1lbnQuICovXHJcbnZhciBGaWVsZFBhdGggPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICB0c2xpYi5fX2V4dGVuZHMoRmllbGRQYXRoLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gRmllbGRQYXRoKCkge1xyXG4gICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcclxuICAgIH1cclxuICAgIEZpZWxkUGF0aC5wcm90b3R5cGUuY29uc3RydWN0ID0gZnVuY3Rpb24gKHNlZ21lbnRzLCBvZmZzZXQsIGxlbmd0aCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgRmllbGRQYXRoKHNlZ21lbnRzLCBvZmZzZXQsIGxlbmd0aCk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhlIHN0cmluZyBjb3VsZCBiZSB1c2VkIGFzIGEgc2VnbWVudCBpbiBhIGZpZWxkIHBhdGhcclxuICAgICAqIHdpdGhvdXQgZXNjYXBpbmcuXHJcbiAgICAgKi9cclxuICAgIEZpZWxkUGF0aC5pc1ZhbGlkSWRlbnRpZmllciA9IGZ1bmN0aW9uIChzZWdtZW50KSB7XHJcbiAgICAgICAgcmV0dXJuIGlkZW50aWZpZXJSZWdFeHAudGVzdChzZWdtZW50KTtcclxuICAgIH07XHJcbiAgICBGaWVsZFBhdGgucHJvdG90eXBlLmNhbm9uaWNhbFN0cmluZyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy50b0FycmF5KClcclxuICAgICAgICAgICAgLm1hcChmdW5jdGlvbiAoc3RyKSB7XHJcbiAgICAgICAgICAgIHN0ciA9IHN0ci5yZXBsYWNlKCdcXFxcJywgJ1xcXFxcXFxcJykucmVwbGFjZSgnYCcsICdcXFxcYCcpO1xyXG4gICAgICAgICAgICBpZiAoIUZpZWxkUGF0aC5pc1ZhbGlkSWRlbnRpZmllcihzdHIpKSB7XHJcbiAgICAgICAgICAgICAgICBzdHIgPSAnYCcgKyBzdHIgKyAnYCc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHN0cjtcclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAuam9pbignLicpO1xyXG4gICAgfTtcclxuICAgIEZpZWxkUGF0aC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY2Fub25pY2FsU3RyaW5nKCk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhpcyBmaWVsZCByZWZlcmVuY2VzIHRoZSBrZXkgb2YgYSBkb2N1bWVudC5cclxuICAgICAqL1xyXG4gICAgRmllbGRQYXRoLnByb3RvdHlwZS5pc0tleUZpZWxkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmxlbmd0aCA9PT0gMSAmJiB0aGlzLmdldCgwKSA9PT0gRE9DVU1FTlRfS0VZX05BTUU7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgZmllbGQgZGVzaWduYXRpbmcgdGhlIGtleSBvZiBhIGRvY3VtZW50LlxyXG4gICAgICovXHJcbiAgICBGaWVsZFBhdGgua2V5RmllbGQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBGaWVsZFBhdGgoW0RPQ1VNRU5UX0tFWV9OQU1FXSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBQYXJzZXMgYSBmaWVsZCBzdHJpbmcgZnJvbSB0aGUgZ2l2ZW4gc2VydmVyLWZvcm1hdHRlZCBzdHJpbmcuXHJcbiAgICAgKlxyXG4gICAgICogLSBTcGxpdHRpbmcgdGhlIGVtcHR5IHN0cmluZyBpcyBub3QgYWxsb3dlZCAoZm9yIG5vdyBhdCBsZWFzdCkuXHJcbiAgICAgKiAtIEVtcHR5IHNlZ21lbnRzIHdpdGhpbiB0aGUgc3RyaW5nIChlLmcuIGlmIHRoZXJlIGFyZSB0d28gY29uc2VjdXRpdmVcclxuICAgICAqICAgc2VwYXJhdG9ycykgYXJlIG5vdCBhbGxvd2VkLlxyXG4gICAgICpcclxuICAgICAqIFRPRE8oYi8zNzI0NDE1Nyk6IHdlIHNob3VsZCBtYWtlIHRoaXMgbW9yZSBzdHJpY3QuIFJpZ2h0IG5vdywgaXQgYWxsb3dzXHJcbiAgICAgKiBub24taWRlbnRpZmllciBwYXRoIGNvbXBvbmVudHMsIGV2ZW4gaWYgdGhleSBhcmVuJ3QgZXNjYXBlZC5cclxuICAgICAqL1xyXG4gICAgRmllbGRQYXRoLmZyb21TZXJ2ZXJGb3JtYXQgPSBmdW5jdGlvbiAocGF0aCkge1xyXG4gICAgICAgIHZhciBzZWdtZW50cyA9IFtdO1xyXG4gICAgICAgIHZhciBjdXJyZW50ID0gJyc7XHJcbiAgICAgICAgdmFyIGkgPSAwO1xyXG4gICAgICAgIHZhciBhZGRDdXJyZW50U2VnbWVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKGN1cnJlbnQubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5JTlZBTElEX0FSR1VNRU5ULCBcIkludmFsaWQgZmllbGQgcGF0aCAoXCIgKyBwYXRoICsgXCIpLiBQYXRocyBtdXN0IG5vdCBiZSBlbXB0eSwgYmVnaW4gXCIgK1xyXG4gICAgICAgICAgICAgICAgICAgIFwid2l0aCAnLicsIGVuZCB3aXRoICcuJywgb3IgY29udGFpbiAnLi4nXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHNlZ21lbnRzLnB1c2goY3VycmVudCk7XHJcbiAgICAgICAgICAgIGN1cnJlbnQgPSAnJztcclxuICAgICAgICB9O1xyXG4gICAgICAgIHZhciBpbkJhY2t0aWNrcyA9IGZhbHNlO1xyXG4gICAgICAgIHdoaWxlIChpIDwgcGF0aC5sZW5ndGgpIHtcclxuICAgICAgICAgICAgdmFyIGMgPSBwYXRoW2ldO1xyXG4gICAgICAgICAgICBpZiAoYyA9PT0gJ1xcXFwnKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaSArIDEgPT09IHBhdGgubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuSU5WQUxJRF9BUkdVTUVOVCwgJ1BhdGggaGFzIHRyYWlsaW5nIGVzY2FwZSBjaGFyYWN0ZXI6ICcgKyBwYXRoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHZhciBuZXh0ID0gcGF0aFtpICsgMV07XHJcbiAgICAgICAgICAgICAgICBpZiAoIShuZXh0ID09PSAnXFxcXCcgfHwgbmV4dCA9PT0gJy4nIHx8IG5leHQgPT09ICdgJykpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5JTlZBTElEX0FSR1VNRU5ULCAnUGF0aCBoYXMgaW52YWxpZCBlc2NhcGUgc2VxdWVuY2U6ICcgKyBwYXRoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGN1cnJlbnQgKz0gbmV4dDtcclxuICAgICAgICAgICAgICAgIGkgKz0gMjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChjID09PSAnYCcpIHtcclxuICAgICAgICAgICAgICAgIGluQmFja3RpY2tzID0gIWluQmFja3RpY2tzO1xyXG4gICAgICAgICAgICAgICAgaSsrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGMgPT09ICcuJyAmJiAhaW5CYWNrdGlja3MpIHtcclxuICAgICAgICAgICAgICAgIGFkZEN1cnJlbnRTZWdtZW50KCk7XHJcbiAgICAgICAgICAgICAgICBpKys7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjdXJyZW50ICs9IGM7XHJcbiAgICAgICAgICAgICAgICBpKys7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgYWRkQ3VycmVudFNlZ21lbnQoKTtcclxuICAgICAgICBpZiAoaW5CYWNrdGlja3MpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuSU5WQUxJRF9BUkdVTUVOVCwgJ1VudGVybWluYXRlZCBgIGluIHBhdGg6ICcgKyBwYXRoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG5ldyBGaWVsZFBhdGgoc2VnbWVudHMpO1xyXG4gICAgfTtcclxuICAgIEZpZWxkUGF0aC5FTVBUWV9QQVRIID0gbmV3IEZpZWxkUGF0aChbXSk7XHJcbiAgICByZXR1cm4gRmllbGRQYXRoO1xyXG59KEJhc2VQYXRoKSk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG52YXIgRG9jdW1lbnRLZXkgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBEb2N1bWVudEtleShwYXRoKSB7XHJcbiAgICAgICAgdGhpcy5wYXRoID0gcGF0aDtcclxuICAgICAgICBhc3NlcnQoRG9jdW1lbnRLZXkuaXNEb2N1bWVudEtleShwYXRoKSwgJ0ludmFsaWQgRG9jdW1lbnRLZXkgd2l0aCBhbiBvZGQgbnVtYmVyIG9mIHNlZ21lbnRzOiAnICtcclxuICAgICAgICAgICAgcGF0aC50b0FycmF5KCkuam9pbignLycpKTtcclxuICAgIH1cclxuICAgIC8qKiBSZXR1cm5zIHRydWUgaWYgdGhlIGRvY3VtZW50IGlzIGluIHRoZSBzcGVjaWZpZWQgY29sbGVjdGlvbklkLiAqL1xyXG4gICAgRG9jdW1lbnRLZXkucHJvdG90eXBlLmhhc0NvbGxlY3Rpb25JZCA9IGZ1bmN0aW9uIChjb2xsZWN0aW9uSWQpIHtcclxuICAgICAgICByZXR1cm4gKHRoaXMucGF0aC5sZW5ndGggPj0gMiAmJlxyXG4gICAgICAgICAgICB0aGlzLnBhdGguZ2V0KHRoaXMucGF0aC5sZW5ndGggLSAyKSA9PT0gY29sbGVjdGlvbklkKTtcclxuICAgIH07XHJcbiAgICBEb2N1bWVudEtleS5wcm90b3R5cGUuaXNFcXVhbCA9IGZ1bmN0aW9uIChvdGhlcikge1xyXG4gICAgICAgIHJldHVybiAob3RoZXIgIT09IG51bGwgJiYgUmVzb3VyY2VQYXRoLmNvbXBhcmF0b3IodGhpcy5wYXRoLCBvdGhlci5wYXRoKSA9PT0gMCk7XHJcbiAgICB9O1xyXG4gICAgRG9jdW1lbnRLZXkucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnBhdGgudG9TdHJpbmcoKTtcclxuICAgIH07XHJcbiAgICBEb2N1bWVudEtleS5jb21wYXJhdG9yID0gZnVuY3Rpb24gKGsxLCBrMikge1xyXG4gICAgICAgIHJldHVybiBSZXNvdXJjZVBhdGguY29tcGFyYXRvcihrMS5wYXRoLCBrMi5wYXRoKTtcclxuICAgIH07XHJcbiAgICBEb2N1bWVudEtleS5pc0RvY3VtZW50S2V5ID0gZnVuY3Rpb24gKHBhdGgpIHtcclxuICAgICAgICByZXR1cm4gcGF0aC5sZW5ndGggJSAyID09PSAwO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhbmQgcmV0dXJucyBhIG5ldyBkb2N1bWVudCBrZXkgd2l0aCB0aGUgZ2l2ZW4gc2VnbWVudHMuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHBhdGggVGhlIHNlZ21lbnRzIG9mIHRoZSBwYXRoIHRvIHRoZSBkb2N1bWVudFxyXG4gICAgICogQHJldHVybiBBIG5ldyBpbnN0YW5jZSBvZiBEb2N1bWVudEtleVxyXG4gICAgICovXHJcbiAgICBEb2N1bWVudEtleS5mcm9tU2VnbWVudHMgPSBmdW5jdGlvbiAoc2VnbWVudHMpIHtcclxuICAgICAgICByZXR1cm4gbmV3IERvY3VtZW50S2V5KG5ldyBSZXNvdXJjZVBhdGgoc2VnbWVudHMuc2xpY2UoKSkpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhbmQgcmV0dXJucyBhIG5ldyBkb2N1bWVudCBrZXkgdXNpbmcgJy8nIHRvIHNwbGl0IHRoZSBzdHJpbmcgaW50b1xyXG4gICAgICogc2VnbWVudHMuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHBhdGggVGhlIHNsYXNoLXNlcGFyYXRlZCBwYXRoIHN0cmluZyB0byB0aGUgZG9jdW1lbnRcclxuICAgICAqIEByZXR1cm4gQSBuZXcgaW5zdGFuY2Ugb2YgRG9jdW1lbnRLZXlcclxuICAgICAqL1xyXG4gICAgRG9jdW1lbnRLZXkuZnJvbVBhdGhTdHJpbmcgPSBmdW5jdGlvbiAocGF0aCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgRG9jdW1lbnRLZXkoUmVzb3VyY2VQYXRoLmZyb21TdHJpbmcocGF0aCkpO1xyXG4gICAgfTtcclxuICAgIERvY3VtZW50S2V5LkVNUFRZID0gbmV3IERvY3VtZW50S2V5KG5ldyBSZXNvdXJjZVBhdGgoW10pKTtcclxuICAgIHJldHVybiBEb2N1bWVudEtleTtcclxufSgpKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnZhciBEZWZlcnJlZCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIERlZmVycmVkKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5wcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICBfdGhpcy5yZXNvbHZlID0gcmVzb2x2ZTtcclxuICAgICAgICAgICAgX3RoaXMucmVqZWN0ID0gcmVqZWN0O1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIERlZmVycmVkO1xyXG59KCkpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFdlbGxrbm93biBcInRpbWVyXCIgSURzIHVzZWQgd2hlbiBzY2hlZHVsaW5nIGRlbGF5ZWQgb3BlcmF0aW9ucyBvbiB0aGVcclxuICogQXN5bmNRdWV1ZS4gVGhlc2UgSURzIGNhbiB0aGVuIGJlIHVzZWQgZnJvbSB0ZXN0cyB0byBjaGVjayBmb3IgdGhlIHByZXNlbmNlXHJcbiAqIG9mIG9wZXJhdGlvbnMgb3IgdG8gcnVuIHRoZW0gZWFybHkuXHJcbiAqXHJcbiAqIFRoZSBzdHJpbmcgdmFsdWVzIGFyZSB1c2VkIHdoZW4gZW5jb2RpbmcgdGhlc2UgdGltZXIgSURzIGluIEpTT04gc3BlYyB0ZXN0cy5cclxuICovXHJcbnZhciBUaW1lcklkO1xyXG4oZnVuY3Rpb24gKFRpbWVySWQpIHtcclxuICAgIC8qKiBBbGwgY2FuIGJlIHVzZWQgd2l0aCBydW5EZWxheWVkT3BlcmF0aW9uc0Vhcmx5KCkgdG8gcnVuIGFsbCB0aW1lcnMuICovXHJcbiAgICBUaW1lcklkW1wiQWxsXCJdID0gXCJhbGxcIjtcclxuICAgIC8qKlxyXG4gICAgICogVGhlIGZvbGxvd2luZyA0IHRpbWVycyBhcmUgdXNlZCBpbiBwZXJzaXN0ZW50X3N0cmVhbS50cyBmb3IgdGhlIGxpc3RlbiBhbmRcclxuICAgICAqIHdyaXRlIHN0cmVhbXMuIFRoZSBcIklkbGVcIiB0aW1lciBpcyB1c2VkIHRvIGNsb3NlIHRoZSBzdHJlYW0gZHVlIHRvXHJcbiAgICAgKiBpbmFjdGl2aXR5LiBUaGUgXCJDb25uZWN0aW9uQmFja29mZlwiIHRpbWVyIGlzIHVzZWQgdG8gcmVzdGFydCBhIHN0cmVhbSBvbmNlXHJcbiAgICAgKiB0aGUgYXBwcm9wcmlhdGUgYmFja29mZiBkZWxheSBoYXMgZWxhcHNlZC5cclxuICAgICAqL1xyXG4gICAgVGltZXJJZFtcIkxpc3RlblN0cmVhbUlkbGVcIl0gPSBcImxpc3Rlbl9zdHJlYW1faWRsZVwiO1xyXG4gICAgVGltZXJJZFtcIkxpc3RlblN0cmVhbUNvbm5lY3Rpb25CYWNrb2ZmXCJdID0gXCJsaXN0ZW5fc3RyZWFtX2Nvbm5lY3Rpb25fYmFja29mZlwiO1xyXG4gICAgVGltZXJJZFtcIldyaXRlU3RyZWFtSWRsZVwiXSA9IFwid3JpdGVfc3RyZWFtX2lkbGVcIjtcclxuICAgIFRpbWVySWRbXCJXcml0ZVN0cmVhbUNvbm5lY3Rpb25CYWNrb2ZmXCJdID0gXCJ3cml0ZV9zdHJlYW1fY29ubmVjdGlvbl9iYWNrb2ZmXCI7XHJcbiAgICAvKipcclxuICAgICAqIEEgdGltZXIgdXNlZCBpbiBvbmxpbmVfc3RhdGVfdHJhY2tlci50cyB0byB0cmFuc2l0aW9uIGZyb21cclxuICAgICAqIE9ubGluZVN0YXRlLlVua25vd24gdG8gT2ZmbGluZSBhZnRlciBhIHNldCB0aW1lb3V0LCByYXRoZXIgdGhhbiB3YWl0aW5nXHJcbiAgICAgKiBpbmRlZmluaXRlbHkgZm9yIHN1Y2Nlc3Mgb3IgZmFpbHVyZS5cclxuICAgICAqL1xyXG4gICAgVGltZXJJZFtcIk9ubGluZVN0YXRlVGltZW91dFwiXSA9IFwib25saW5lX3N0YXRlX3RpbWVvdXRcIjtcclxuICAgIC8qKlxyXG4gICAgICogQSB0aW1lciB1c2VkIHRvIHVwZGF0ZSB0aGUgY2xpZW50IG1ldGFkYXRhIGluIEluZGV4ZWREYiwgd2hpY2ggaXMgdXNlZFxyXG4gICAgICogdG8gZGV0ZXJtaW5lIHRoZSBwcmltYXJ5IGxlYXNlaG9sZGVyLlxyXG4gICAgICovXHJcbiAgICBUaW1lcklkW1wiQ2xpZW50TWV0YWRhdGFSZWZyZXNoXCJdID0gXCJjbGllbnRfbWV0YWRhdGFfcmVmcmVzaFwiO1xyXG4gICAgLyoqIEEgdGltZXIgdXNlZCB0byBwZXJpb2RpY2FsbHkgYXR0ZW1wdCBMUlUgR2FyYmFnZSBjb2xsZWN0aW9uICovXHJcbiAgICBUaW1lcklkW1wiTHJ1R2FyYmFnZUNvbGxlY3Rpb25cIl0gPSBcImxydV9nYXJiYWdlX2NvbGxlY3Rpb25cIjtcclxuICAgIC8qKlxyXG4gICAgICogQSB0aW1lciB1c2VkIHRvIHJldHJ5IHRyYW5zYWN0aW9ucy4gU2luY2UgdGhlcmUgY2FuIGJlIG11bHRpcGxlIGNvbmN1cnJlbnRcclxuICAgICAqIHRyYW5zYWN0aW9ucywgbXVsdGlwbGUgb2YgdGhlc2UgbWF5IGJlIGluIHRoZSBxdWV1ZSBhdCBhIGdpdmVuIHRpbWUuXHJcbiAgICAgKi9cclxuICAgIFRpbWVySWRbXCJSZXRyeVRyYW5zYWN0aW9uXCJdID0gXCJyZXRyeV90cmFuc2FjdGlvblwiO1xyXG59KShUaW1lcklkIHx8IChUaW1lcklkID0ge30pKTtcclxuLyoqXHJcbiAqIFJlcHJlc2VudHMgYW4gb3BlcmF0aW9uIHNjaGVkdWxlZCB0byBiZSBydW4gaW4gdGhlIGZ1dHVyZSBvbiBhbiBBc3luY1F1ZXVlLlxyXG4gKlxyXG4gKiBJdCBpcyBjcmVhdGVkIHZpYSBEZWxheWVkT3BlcmF0aW9uLmNyZWF0ZUFuZFNjaGVkdWxlKCkuXHJcbiAqXHJcbiAqIFN1cHBvcnRzIGNhbmNlbGxhdGlvbiAodmlhIGNhbmNlbCgpKSBhbmQgZWFybHkgZXhlY3V0aW9uICh2aWEgc2tpcERlbGF5KCkpLlxyXG4gKi9cclxudmFyIERlbGF5ZWRPcGVyYXRpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBEZWxheWVkT3BlcmF0aW9uKGFzeW5jUXVldWUsIHRpbWVySWQsIHRhcmdldFRpbWVNcywgb3AsIHJlbW92YWxDYWxsYmFjaykge1xyXG4gICAgICAgIHRoaXMuYXN5bmNRdWV1ZSA9IGFzeW5jUXVldWU7XHJcbiAgICAgICAgdGhpcy50aW1lcklkID0gdGltZXJJZDtcclxuICAgICAgICB0aGlzLnRhcmdldFRpbWVNcyA9IHRhcmdldFRpbWVNcztcclxuICAgICAgICB0aGlzLm9wID0gb3A7XHJcbiAgICAgICAgdGhpcy5yZW1vdmFsQ2FsbGJhY2sgPSByZW1vdmFsQ2FsbGJhY2s7XHJcbiAgICAgICAgdGhpcy5kZWZlcnJlZCA9IG5ldyBEZWZlcnJlZCgpO1xyXG4gICAgICAgIHRoaXMudGhlbiA9IHRoaXMuZGVmZXJyZWQucHJvbWlzZS50aGVuLmJpbmQodGhpcy5kZWZlcnJlZC5wcm9taXNlKTtcclxuICAgICAgICB0aGlzLmNhdGNoID0gdGhpcy5kZWZlcnJlZC5wcm9taXNlLmNhdGNoLmJpbmQodGhpcy5kZWZlcnJlZC5wcm9taXNlKTtcclxuICAgICAgICAvLyBJdCdzIG5vcm1hbCBmb3IgdGhlIGRlZmVycmVkIHByb21pc2UgdG8gYmUgY2FuY2VsZWQgKGR1ZSB0byBjYW5jZWxsYXRpb24pXHJcbiAgICAgICAgLy8gYW5kIHNvIHdlIGF0dGFjaCBhIGR1bW15IGNhdGNoIGNhbGxiYWNrIHRvIGF2b2lkXHJcbiAgICAgICAgLy8gJ1VuaGFuZGxlZFByb21pc2VSZWplY3Rpb25XYXJuaW5nJyBsb2cgc3BhbS5cclxuICAgICAgICB0aGlzLmRlZmVycmVkLnByb21pc2UuY2F0Y2goZnVuY3Rpb24gKGVycikgeyB9KTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhbmQgcmV0dXJucyBhIERlbGF5ZWRPcGVyYXRpb24gdGhhdCBoYXMgYmVlbiBzY2hlZHVsZWQgdG8gYmVcclxuICAgICAqIGV4ZWN1dGVkIG9uIHRoZSBwcm92aWRlZCBhc3luY1F1ZXVlIGFmdGVyIHRoZSBwcm92aWRlZCBkZWxheU1zLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBhc3luY1F1ZXVlIFRoZSBxdWV1ZSB0byBzY2hlZHVsZSB0aGUgb3BlcmF0aW9uIG9uLlxyXG4gICAgICogQHBhcmFtIGlkIEEgVGltZXIgSUQgaWRlbnRpZnlpbmcgdGhlIHR5cGUgb2Ygb3BlcmF0aW9uIHRoaXMgaXMuXHJcbiAgICAgKiBAcGFyYW0gZGVsYXlNcyBUaGUgZGVsYXkgKG1zKSBiZWZvcmUgdGhlIG9wZXJhdGlvbiBzaG91bGQgYmUgc2NoZWR1bGVkLlxyXG4gICAgICogQHBhcmFtIG9wIFRoZSBvcGVyYXRpb24gdG8gcnVuLlxyXG4gICAgICogQHBhcmFtIHJlbW92YWxDYWxsYmFjayBBIGNhbGxiYWNrIHRvIGJlIGNhbGxlZCBzeW5jaHJvbm91c2x5IG9uY2UgdGhlXHJcbiAgICAgKiAgIG9wZXJhdGlvbiBpcyBleGVjdXRlZCBvciBjYW5jZWxlZCwgbm90aWZ5aW5nIHRoZSBBc3luY1F1ZXVlIHRvIHJlbW92ZSBpdFxyXG4gICAgICogICBmcm9tIGl0cyBkZWxheWVkT3BlcmF0aW9ucyBsaXN0LlxyXG4gICAgICogICBQT1JUSU5HIE5PVEU6IFRoaXMgZXhpc3RzIHRvIHByZXZlbnQgbWFraW5nIHJlbW92ZURlbGF5ZWRPcGVyYXRpb24oKSBhbmRcclxuICAgICAqICAgdGhlIERlbGF5ZWRPcGVyYXRpb24gY2xhc3MgcHVibGljLlxyXG4gICAgICovXHJcbiAgICBEZWxheWVkT3BlcmF0aW9uLmNyZWF0ZUFuZFNjaGVkdWxlID0gZnVuY3Rpb24gKGFzeW5jUXVldWUsIHRpbWVySWQsIGRlbGF5TXMsIG9wLCByZW1vdmFsQ2FsbGJhY2spIHtcclxuICAgICAgICB2YXIgdGFyZ2V0VGltZSA9IERhdGUubm93KCkgKyBkZWxheU1zO1xyXG4gICAgICAgIHZhciBkZWxheWVkT3AgPSBuZXcgRGVsYXllZE9wZXJhdGlvbihhc3luY1F1ZXVlLCB0aW1lcklkLCB0YXJnZXRUaW1lLCBvcCwgcmVtb3ZhbENhbGxiYWNrKTtcclxuICAgICAgICBkZWxheWVkT3Auc3RhcnQoZGVsYXlNcyk7XHJcbiAgICAgICAgcmV0dXJuIGRlbGF5ZWRPcDtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFN0YXJ0cyB0aGUgdGltZXIuIFRoaXMgaXMgY2FsbGVkIGltbWVkaWF0ZWx5IGFmdGVyIGNvbnN0cnVjdGlvbiBieVxyXG4gICAgICogY3JlYXRlQW5kU2NoZWR1bGUoKS5cclxuICAgICAqL1xyXG4gICAgRGVsYXllZE9wZXJhdGlvbi5wcm90b3R5cGUuc3RhcnQgPSBmdW5jdGlvbiAoZGVsYXlNcykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy50aW1lckhhbmRsZSA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMuaGFuZGxlRGVsYXlFbGFwc2VkKCk7IH0sIGRlbGF5TXMpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUXVldWVzIHRoZSBvcGVyYXRpb24gdG8gcnVuIGltbWVkaWF0ZWx5IChpZiBpdCBoYXNuJ3QgYWxyZWFkeSBiZWVuIHJ1biBvclxyXG4gICAgICogY2FuY2VsZWQpLlxyXG4gICAgICovXHJcbiAgICBEZWxheWVkT3BlcmF0aW9uLnByb3RvdHlwZS5za2lwRGVsYXkgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaGFuZGxlRGVsYXlFbGFwc2VkKCk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBDYW5jZWxzIHRoZSBvcGVyYXRpb24gaWYgaXQgaGFzbid0IGFscmVhZHkgYmVlbiBleGVjdXRlZCBvciBjYW5jZWxlZC4gVGhlXHJcbiAgICAgKiBwcm9taXNlIHdpbGwgYmUgcmVqZWN0ZWQuXHJcbiAgICAgKlxyXG4gICAgICogQXMgbG9uZyBhcyB0aGUgb3BlcmF0aW9uIGhhcyBub3QgeWV0IGJlZW4gcnVuLCBjYWxsaW5nIGNhbmNlbCgpIHByb3ZpZGVzIGFcclxuICAgICAqIGd1YXJhbnRlZSB0aGF0IHRoZSBvcGVyYXRpb24gd2lsbCBub3QgYmUgcnVuLlxyXG4gICAgICovXHJcbiAgICBEZWxheWVkT3BlcmF0aW9uLnByb3RvdHlwZS5jYW5jZWwgPSBmdW5jdGlvbiAocmVhc29uKSB7XHJcbiAgICAgICAgaWYgKHRoaXMudGltZXJIYW5kbGUgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgdGhpcy5jbGVhclRpbWVvdXQoKTtcclxuICAgICAgICAgICAgdGhpcy5kZWZlcnJlZC5yZWplY3QobmV3IEZpcmVzdG9yZUVycm9yKENvZGUuQ0FOQ0VMTEVELCAnT3BlcmF0aW9uIGNhbmNlbGxlZCcgKyAocmVhc29uID8gJzogJyArIHJlYXNvbiA6ICcnKSkpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBEZWxheWVkT3BlcmF0aW9uLnByb3RvdHlwZS5oYW5kbGVEZWxheUVsYXBzZWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB0aGlzLmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmIChfdGhpcy50aW1lckhhbmRsZSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuY2xlYXJUaW1lb3V0KCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMub3AoKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuZGVmZXJyZWQucmVzb2x2ZShyZXN1bHQpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBEZWxheWVkT3BlcmF0aW9uLnByb3RvdHlwZS5jbGVhclRpbWVvdXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMudGltZXJIYW5kbGUgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgdGhpcy5yZW1vdmFsQ2FsbGJhY2sodGhpcyk7XHJcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnRpbWVySGFuZGxlKTtcclxuICAgICAgICAgICAgdGhpcy50aW1lckhhbmRsZSA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHJldHVybiBEZWxheWVkT3BlcmF0aW9uO1xyXG59KCkpO1xyXG52YXIgQXN5bmNRdWV1ZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEFzeW5jUXVldWUoKSB7XHJcbiAgICAgICAgLy8gVGhlIGxhc3QgcHJvbWlzZSBpbiB0aGUgcXVldWUuXHJcbiAgICAgICAgdGhpcy50YWlsID0gUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICAgICAgLy8gSXMgdGhpcyBBc3luY1F1ZXVlIGJlaW5nIHNodXQgZG93bj8gT25jZSBpdCBpcyBzZXQgdG8gdHJ1ZSwgaXQgd2lsbCBub3RcclxuICAgICAgICAvLyBiZSBjaGFuZ2VkIGFnYWluLlxyXG4gICAgICAgIHRoaXMuX2lzU2h1dHRpbmdEb3duID0gZmFsc2U7XHJcbiAgICAgICAgLy8gT3BlcmF0aW9ucyBzY2hlZHVsZWQgdG8gYmUgcXVldWVkIGluIHRoZSBmdXR1cmUuIE9wZXJhdGlvbnMgYXJlXHJcbiAgICAgICAgLy8gYXV0b21hdGljYWxseSByZW1vdmVkIGFmdGVyIHRoZXkgYXJlIHJ1biBvciBjYW5jZWxlZC5cclxuICAgICAgICB0aGlzLmRlbGF5ZWRPcGVyYXRpb25zID0gW107XHJcbiAgICAgICAgLy8gdmlzaWJsZSBmb3IgdGVzdGluZ1xyXG4gICAgICAgIHRoaXMuZmFpbHVyZSA9IG51bGw7XHJcbiAgICAgICAgLy8gRmxhZyBzZXQgd2hpbGUgdGhlcmUncyBhbiBvdXRzdGFuZGluZyBBc3luY1F1ZXVlIG9wZXJhdGlvbiwgdXNlZCBmb3JcclxuICAgICAgICAvLyBhc3NlcnRpb24gc2FuaXR5LWNoZWNrcy5cclxuICAgICAgICB0aGlzLm9wZXJhdGlvbkluUHJvZ3Jlc3MgPSBmYWxzZTtcclxuICAgICAgICAvLyBMaXN0IG9mIFRpbWVySWRzIHRvIGZhc3QtZm9yd2FyZCBkZWxheXMgZm9yLlxyXG4gICAgICAgIHRoaXMudGltZXJJZHNUb1NraXAgPSBbXTtcclxuICAgIH1cclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShBc3luY1F1ZXVlLnByb3RvdHlwZSwgXCJpc1NodXR0aW5nRG93blwiLCB7XHJcbiAgICAgICAgLy8gSXMgdGhpcyBBc3luY1F1ZXVlIGJlaW5nIHNodXQgZG93bj8gSWYgdHJ1ZSwgdGhpcyBpbnN0YW5jZSB3aWxsIG5vdCBlbnF1ZXVlXHJcbiAgICAgICAgLy8gYW55IG5ldyBvcGVyYXRpb25zLCBQcm9taXNlcyBmcm9tIGVucXVldWUgcmVxdWVzdHMgd2lsbCBub3QgcmVzb2x2ZS5cclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2lzU2h1dHRpbmdEb3duO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgLyoqXHJcbiAgICAgKiBBZGRzIGEgbmV3IG9wZXJhdGlvbiB0byB0aGUgcXVldWUgd2l0aG91dCB3YWl0aW5nIGZvciBpdCB0byBjb21wbGV0ZSAoaS5lLlxyXG4gICAgICogd2UgaWdub3JlIHRoZSBQcm9taXNlIHJlc3VsdCkuXHJcbiAgICAgKi9cclxuICAgIEFzeW5jUXVldWUucHJvdG90eXBlLmVucXVldWVBbmRGb3JnZXQgPSBmdW5jdGlvbiAob3ApIHtcclxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWZsb2F0aW5nLXByb21pc2VzXHJcbiAgICAgICAgdGhpcy5lbnF1ZXVlKG9wKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJlZ2FyZGxlc3MgaWYgdGhlIHF1ZXVlIGhhcyBpbml0aWFsaXplZCBzaHV0ZG93biwgYWRkcyBhIG5ldyBvcGVyYXRpb24gdG8gdGhlXHJcbiAgICAgKiBxdWV1ZSB3aXRob3V0IHdhaXRpbmcgZm9yIGl0IHRvIGNvbXBsZXRlIChpLmUuIHdlIGlnbm9yZSB0aGUgUHJvbWlzZSByZXN1bHQpLlxyXG4gICAgICovXHJcbiAgICBBc3luY1F1ZXVlLnByb3RvdHlwZS5lbnF1ZXVlQW5kRm9yZ2V0RXZlbkFmdGVyU2h1dGRvd24gPSBmdW5jdGlvbiAob3ApIHtcclxuICAgICAgICB0aGlzLnZlcmlmeU5vdEZhaWxlZCgpO1xyXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZmxvYXRpbmctcHJvbWlzZXNcclxuICAgICAgICB0aGlzLmVucXVldWVJbnRlcm5hbChvcCk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZWdhcmRsZXNzIGlmIHRoZSBxdWV1ZSBoYXMgaW5pdGlhbGl6ZWQgc2h1dGRvd24sIGFkZHMgYSBuZXcgb3BlcmF0aW9uIHRvIHRoZVxyXG4gICAgICogcXVldWUuXHJcbiAgICAgKi9cclxuICAgIEFzeW5jUXVldWUucHJvdG90eXBlLmVucXVldWVFdmVuQWZ0ZXJTaHV0ZG93biA9IGZ1bmN0aW9uIChvcCkge1xyXG4gICAgICAgIHRoaXMudmVyaWZ5Tm90RmFpbGVkKCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5xdWV1ZUludGVybmFsKG9wKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEFkZHMgYSBuZXcgb3BlcmF0aW9uIHRvIHRoZSBxdWV1ZSBhbmQgaW5pdGlhbGl6ZSB0aGUgc2h1dCBkb3duIG9mIHRoaXMgcXVldWUuXHJcbiAgICAgKiBSZXR1cm5zIGEgcHJvbWlzZSB0aGF0IHdpbGwgYmUgcmVzb2x2ZWQgd2hlbiB0aGUgcHJvbWlzZSByZXR1cm5lZCBieSB0aGUgbmV3XHJcbiAgICAgKiBvcGVyYXRpb24gaXMgKHdpdGggaXRzIHZhbHVlKS5cclxuICAgICAqIE9uY2UgdGhpcyBtZXRob2QgaXMgY2FsbGVkLCB0aGUgb25seSBwb3NzaWJsZSB3YXkgdG8gcmVxdWVzdCBydW5uaW5nIGFuIG9wZXJhdGlvblxyXG4gICAgICogaXMgdGhyb3VnaCBgZW5xdWV1ZUFuZEZvcmdldEV2ZW5BZnRlclNodXRkb3duYC5cclxuICAgICAqL1xyXG4gICAgQXN5bmNRdWV1ZS5wcm90b3R5cGUuZW5xdWV1ZUFuZEluaXRpYXRlU2h1dGRvd24gPSBmdW5jdGlvbiAob3ApIHtcclxuICAgICAgICByZXR1cm4gdHNsaWIuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYi5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudmVyaWZ5Tm90RmFpbGVkKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghIXRoaXMuX2lzU2h1dHRpbmdEb3duKSByZXR1cm4gWzMgLypicmVhayovLCAyXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5faXNTaHV0dGluZ0Rvd24gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmVucXVldWVFdmVuQWZ0ZXJTaHV0ZG93bihvcCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDI7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOiByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQWRkcyBhIG5ldyBvcGVyYXRpb24gdG8gdGhlIHF1ZXVlLiBSZXR1cm5zIGEgcHJvbWlzZSB0aGF0IHdpbGwgYmUgcmVzb2x2ZWRcclxuICAgICAqIHdoZW4gdGhlIHByb21pc2UgcmV0dXJuZWQgYnkgdGhlIG5ldyBvcGVyYXRpb24gaXMgKHdpdGggaXRzIHZhbHVlKS5cclxuICAgICAqL1xyXG4gICAgQXN5bmNRdWV1ZS5wcm90b3R5cGUuZW5xdWV1ZSA9IGZ1bmN0aW9uIChvcCkge1xyXG4gICAgICAgIHRoaXMudmVyaWZ5Tm90RmFpbGVkKCk7XHJcbiAgICAgICAgaWYgKHRoaXMuX2lzU2h1dHRpbmdEb3duKSB7XHJcbiAgICAgICAgICAgIC8vIFJldHVybiBhIFByb21pc2Ugd2hpY2ggbmV2ZXIgcmVzb2x2ZXMuXHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkgeyB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5xdWV1ZUludGVybmFsKG9wKTtcclxuICAgIH07XHJcbiAgICBBc3luY1F1ZXVlLnByb3RvdHlwZS5lbnF1ZXVlSW50ZXJuYWwgPSBmdW5jdGlvbiAob3ApIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhciBuZXdUYWlsID0gdGhpcy50YWlsLnRoZW4oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBfdGhpcy5vcGVyYXRpb25JblByb2dyZXNzID0gdHJ1ZTtcclxuICAgICAgICAgICAgcmV0dXJuIG9wKClcclxuICAgICAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbiAoZXJyb3IkMSkge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuZmFpbHVyZSA9IGVycm9yJDE7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5vcGVyYXRpb25JblByb2dyZXNzID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB2YXIgbWVzc2FnZSA9IGVycm9yJDEuc3RhY2sgfHwgZXJyb3IkMS5tZXNzYWdlIHx8ICcnO1xyXG4gICAgICAgICAgICAgICAgZXJyb3IoJ0lOVEVSTkFMIFVOSEFORExFRCBFUlJPUjogJywgbWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICAvLyBFc2NhcGUgdGhlIHByb21pc2UgY2hhaW4gYW5kIHRocm93IHRoZSBlcnJvciBnbG9iYWxseSBzbyB0aGF0XHJcbiAgICAgICAgICAgICAgICAvLyBlLmcuIGFueSBnbG9iYWwgY3Jhc2ggcmVwb3J0aW5nIGxpYnJhcnkgZGV0ZWN0cyBhbmQgcmVwb3J0cyBpdC5cclxuICAgICAgICAgICAgICAgIC8vIChidXQgbm90IGZvciBzaW11bGF0ZWQgZXJyb3JzIGluIG91ciB0ZXN0cyBzaW5jZSB0aGlzIGJyZWFrcyBtb2NoYSlcclxuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmluZGV4T2YoJ0ZpcmVzdG9yZSBUZXN0IFNpbXVsYXRlZCBFcnJvcicpIDwgMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnJvciQxO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sIDApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gUmUtdGhyb3cgdGhlIGVycm9yIHNvIHRoYXQgdGhpcy50YWlsIGJlY29tZXMgYSByZWplY3RlZCBQcm9taXNlIGFuZFxyXG4gICAgICAgICAgICAgICAgLy8gYWxsIGZ1cnRoZXIgYXR0ZW1wdHMgdG8gY2hhaW4gKHZpYSAudGhlbikgd2lsbCBqdXN0IHNob3J0LWNpcmN1aXRcclxuICAgICAgICAgICAgICAgIC8vIGFuZCByZXR1cm4gdGhlIHJlamVjdGVkIFByb21pc2UuXHJcbiAgICAgICAgICAgICAgICB0aHJvdyBlcnJvciQxO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMub3BlcmF0aW9uSW5Qcm9ncmVzcyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy50YWlsID0gbmV3VGFpbDtcclxuICAgICAgICByZXR1cm4gbmV3VGFpbDtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFNjaGVkdWxlcyBhbiBvcGVyYXRpb24gdG8gYmUgcXVldWVkIG9uIHRoZSBBc3luY1F1ZXVlIG9uY2UgdGhlIHNwZWNpZmllZFxyXG4gICAgICogYGRlbGF5TXNgIGhhcyBlbGFwc2VkLiBUaGUgcmV0dXJuZWQgQ2FuY2VsYWJsZVByb21pc2UgY2FuIGJlIHVzZWQgdG8gY2FuY2VsXHJcbiAgICAgKiB0aGUgb3BlcmF0aW9uIHByaW9yIHRvIGl0cyBydW5uaW5nLlxyXG4gICAgICovXHJcbiAgICBBc3luY1F1ZXVlLnByb3RvdHlwZS5lbnF1ZXVlQWZ0ZXJEZWxheSA9IGZ1bmN0aW9uICh0aW1lcklkLCBkZWxheU1zLCBvcCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy52ZXJpZnlOb3RGYWlsZWQoKTtcclxuICAgICAgICBhc3NlcnQoZGVsYXlNcyA+PSAwLCBcIkF0dGVtcHRlZCB0byBzY2hlZHVsZSBhbiBvcGVyYXRpb24gd2l0aCBhIG5lZ2F0aXZlIGRlbGF5IG9mIFwiICsgZGVsYXlNcyk7XHJcbiAgICAgICAgLy8gRmFzdC1mb3J3YXJkIGRlbGF5cyBmb3IgdGltZXJJZHMgdGhhdCBoYXZlIGJlZW4gb3ZlcnJpZGVuLlxyXG4gICAgICAgIGlmICh0aGlzLnRpbWVySWRzVG9Ta2lwLmluZGV4T2YodGltZXJJZCkgPiAtMSkge1xyXG4gICAgICAgICAgICBkZWxheU1zID0gMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGRlbGF5ZWRPcCA9IERlbGF5ZWRPcGVyYXRpb24uY3JlYXRlQW5kU2NoZWR1bGUodGhpcywgdGltZXJJZCwgZGVsYXlNcywgb3AsIGZ1bmN0aW9uIChyZW1vdmVkT3ApIHtcclxuICAgICAgICAgICAgcmV0dXJuIF90aGlzLnJlbW92ZURlbGF5ZWRPcGVyYXRpb24ocmVtb3ZlZE9wKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmRlbGF5ZWRPcGVyYXRpb25zLnB1c2goZGVsYXllZE9wKTtcclxuICAgICAgICByZXR1cm4gZGVsYXllZE9wO1xyXG4gICAgfTtcclxuICAgIEFzeW5jUXVldWUucHJvdG90eXBlLnZlcmlmeU5vdEZhaWxlZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAodGhpcy5mYWlsdXJlKSB7XHJcbiAgICAgICAgICAgIGZhaWwoJ0FzeW5jUXVldWUgaXMgYWxyZWFkeSBmYWlsZWQ6ICcgK1xyXG4gICAgICAgICAgICAgICAgKHRoaXMuZmFpbHVyZS5zdGFjayB8fCB0aGlzLmZhaWx1cmUubWVzc2FnZSkpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFZlcmlmaWVzIHRoZXJlJ3MgYW4gb3BlcmF0aW9uIGN1cnJlbnRseSBpbi1wcm9ncmVzcyBvbiB0aGUgQXN5bmNRdWV1ZS5cclxuICAgICAqIFVuZm9ydHVuYXRlbHkgd2UgY2FuJ3QgdmVyaWZ5IHRoYXQgdGhlIHJ1bm5pbmcgY29kZSBpcyBpbiB0aGUgcHJvbWlzZSBjaGFpblxyXG4gICAgICogb2YgdGhhdCBvcGVyYXRpb24sIHNvIHRoaXMgaXNuJ3QgYSBmb29scHJvb2YgY2hlY2ssIGJ1dCBpdCBzaG91bGQgYmUgZW5vdWdoXHJcbiAgICAgKiB0byBjYXRjaCBzb21lIGJ1Z3MuXHJcbiAgICAgKi9cclxuICAgIEFzeW5jUXVldWUucHJvdG90eXBlLnZlcmlmeU9wZXJhdGlvbkluUHJvZ3Jlc3MgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgYXNzZXJ0KHRoaXMub3BlcmF0aW9uSW5Qcm9ncmVzcywgJ3ZlcmlmeU9wSW5Qcm9ncmVzcygpIGNhbGxlZCB3aGVuIG5vIG9wIGluIHByb2dyZXNzIG9uIHRoaXMgcXVldWUuJyk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBXYWl0cyB1bnRpbCBhbGwgY3VycmVudGx5IHF1ZXVlZCB0YXNrcyBhcmUgZmluaXNoZWQgZXhlY3V0aW5nLiBEZWxheWVkXHJcbiAgICAgKiBvcGVyYXRpb25zIGFyZSBub3QgcnVuLlxyXG4gICAgICovXHJcbiAgICBBc3luY1F1ZXVlLnByb3RvdHlwZS5kcmFpbiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvLyBJdCBzaG91bGQgc3RpbGwgYmUgcG9zc2libGUgdG8gZHJhaW4gdGhlIHF1ZXVlIGFmdGVyIGl0IGlzIHNodXR0aW5nIGRvd24uXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5xdWV1ZUV2ZW5BZnRlclNodXRkb3duKGZ1bmN0aW9uICgpIHsgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpOyB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEZvciBUZXN0czogRGV0ZXJtaW5lIGlmIGEgZGVsYXllZCBvcGVyYXRpb24gd2l0aCBhIHBhcnRpY3VsYXIgVGltZXJJZFxyXG4gICAgICogZXhpc3RzLlxyXG4gICAgICovXHJcbiAgICBBc3luY1F1ZXVlLnByb3RvdHlwZS5jb250YWluc0RlbGF5ZWRPcGVyYXRpb24gPSBmdW5jdGlvbiAodGltZXJJZCkge1xyXG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSB0aGlzLmRlbGF5ZWRPcGVyYXRpb25zOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICB2YXIgb3AgPSBfYVtfaV07XHJcbiAgICAgICAgICAgIGlmIChvcC50aW1lcklkID09PSB0aW1lcklkKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBGb3IgVGVzdHM6IFJ1bnMgc29tZSBvciBhbGwgZGVsYXllZCBvcGVyYXRpb25zIGVhcmx5LlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBsYXN0VGltZXJJZCBEZWxheWVkIG9wZXJhdGlvbnMgdXAgdG8gYW5kIGluY2x1ZGluZyB0aGlzIFRpbWVySWQgd2lsbFxyXG4gICAgICogIGJlIGRyYWluZWQuIFRocm93cyBpZiBubyBzdWNoIG9wZXJhdGlvbiBleGlzdHMuIFBhc3MgVGltZXJJZC5BbGwgdG8gcnVuXHJcbiAgICAgKiAgYWxsIGRlbGF5ZWQgb3BlcmF0aW9ucy5cclxuICAgICAqIEByZXR1cm5zIGEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIG9uY2UgYWxsIG9wZXJhdGlvbnMgaGF2ZSBiZWVuIHJ1bi5cclxuICAgICAqL1xyXG4gICAgQXN5bmNRdWV1ZS5wcm90b3R5cGUucnVuRGVsYXllZE9wZXJhdGlvbnNFYXJseSA9IGZ1bmN0aW9uIChsYXN0VGltZXJJZCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgLy8gTm90ZSB0aGF0IGRyYWluaW5nIG1heSBnZW5lcmF0ZSBtb3JlIGRlbGF5ZWQgb3BzLCBzbyB3ZSBkbyB0aGF0IGZpcnN0LlxyXG4gICAgICAgIHJldHVybiB0aGlzLmRyYWluKCkudGhlbihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGFzc2VydChsYXN0VGltZXJJZCA9PT0gVGltZXJJZC5BbGwgfHxcclxuICAgICAgICAgICAgICAgIF90aGlzLmNvbnRhaW5zRGVsYXllZE9wZXJhdGlvbihsYXN0VGltZXJJZCksIFwiQXR0ZW1wdGVkIHRvIGRyYWluIHRvIG1pc3Npbmcgb3BlcmF0aW9uIFwiICsgbGFzdFRpbWVySWQpO1xyXG4gICAgICAgICAgICAvLyBSdW4gb3BzIGluIHRoZSBzYW1lIG9yZGVyIHRoZXknZCBydW4gaWYgdGhleSByYW4gbmF0dXJhbGx5LlxyXG4gICAgICAgICAgICBfdGhpcy5kZWxheWVkT3BlcmF0aW9ucy5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7IHJldHVybiBhLnRhcmdldFRpbWVNcyAtIGIudGFyZ2V0VGltZU1zOyB9KTtcclxuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IF90aGlzLmRlbGF5ZWRPcGVyYXRpb25zOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIG9wID0gX2FbX2ldO1xyXG4gICAgICAgICAgICAgICAgb3Auc2tpcERlbGF5KCk7XHJcbiAgICAgICAgICAgICAgICBpZiAobGFzdFRpbWVySWQgIT09IFRpbWVySWQuQWxsICYmIG9wLnRpbWVySWQgPT09IGxhc3RUaW1lcklkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIF90aGlzLmRyYWluKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBGb3IgVGVzdHM6IFNraXAgYWxsIHN1YnNlcXVlbnQgZGVsYXlzIGZvciBhIHRpbWVyIGlkLlxyXG4gICAgICovXHJcbiAgICBBc3luY1F1ZXVlLnByb3RvdHlwZS5za2lwRGVsYXlzRm9yVGltZXJJZCA9IGZ1bmN0aW9uICh0aW1lcklkKSB7XHJcbiAgICAgICAgdGhpcy50aW1lcklkc1RvU2tpcC5wdXNoKHRpbWVySWQpO1xyXG4gICAgfTtcclxuICAgIC8qKiBDYWxsZWQgb25jZSBhIERlbGF5ZWRPcGVyYXRpb24gaXMgcnVuIG9yIGNhbmNlbGVkLiAqL1xyXG4gICAgQXN5bmNRdWV1ZS5wcm90b3R5cGUucmVtb3ZlRGVsYXllZE9wZXJhdGlvbiA9IGZ1bmN0aW9uIChvcCkge1xyXG4gICAgICAgIC8vIE5PVEU6IGluZGV4T2YgLyBzbGljZSBhcmUgTyhuKSwgYnV0IGRlbGF5ZWRPcGVyYXRpb25zIGlzIGV4cGVjdGVkIHRvIGJlIHNtYWxsLlxyXG4gICAgICAgIHZhciBpbmRleCA9IHRoaXMuZGVsYXllZE9wZXJhdGlvbnMuaW5kZXhPZihvcCk7XHJcbiAgICAgICAgYXNzZXJ0KGluZGV4ID49IDAsICdEZWxheWVkIG9wZXJhdGlvbiBub3QgZm91bmQuJyk7XHJcbiAgICAgICAgdGhpcy5kZWxheWVkT3BlcmF0aW9ucy5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBBc3luY1F1ZXVlO1xyXG59KCkpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxudmFyIGVzY2FwZUNoYXIgPSAnXFx1MDAwMSc7XHJcbnZhciBlbmNvZGVkU2VwYXJhdG9yQ2hhciA9ICdcXHUwMDAxJztcclxudmFyIGVuY29kZWROdWwgPSAnXFx1MDAxMCc7XHJcbnZhciBlbmNvZGVkRXNjYXBlID0gJ1xcdTAwMTEnO1xyXG4vKipcclxuICogRW5jb2RlcyBhIHJlc291cmNlIHBhdGggaW50byBhIEluZGV4ZWREYi1jb21wYXRpYmxlIHN0cmluZyBmb3JtLlxyXG4gKi9cclxuZnVuY3Rpb24gZW5jb2RlKHBhdGgpIHtcclxuICAgIHZhciByZXN1bHQgPSAnJztcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcGF0aC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGlmIChyZXN1bHQubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICByZXN1bHQgPSBlbmNvZGVTZXBhcmF0b3IocmVzdWx0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmVzdWx0ID0gZW5jb2RlU2VnbWVudChwYXRoLmdldChpKSwgcmVzdWx0KTtcclxuICAgIH1cclxuICAgIHJldHVybiBlbmNvZGVTZXBhcmF0b3IocmVzdWx0KTtcclxufVxyXG4vKiogRW5jb2RlcyBhIHNpbmdsZSBzZWdtZW50IG9mIGEgcmVzb3VyY2UgcGF0aCBpbnRvIHRoZSBnaXZlbiByZXN1bHQgKi9cclxuZnVuY3Rpb24gZW5jb2RlU2VnbWVudChzZWdtZW50LCByZXN1bHRCdWYpIHtcclxuICAgIHZhciByZXN1bHQgPSByZXN1bHRCdWY7XHJcbiAgICB2YXIgbGVuZ3RoID0gc2VnbWVudC5sZW5ndGg7XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgdmFyIGMgPSBzZWdtZW50LmNoYXJBdChpKTtcclxuICAgICAgICBzd2l0Y2ggKGMpIHtcclxuICAgICAgICAgICAgY2FzZSAnXFwwJzpcclxuICAgICAgICAgICAgICAgIHJlc3VsdCArPSBlc2NhcGVDaGFyICsgZW5jb2RlZE51bDtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIGVzY2FwZUNoYXI6XHJcbiAgICAgICAgICAgICAgICByZXN1bHQgKz0gZXNjYXBlQ2hhciArIGVuY29kZWRFc2NhcGU7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIHJlc3VsdCArPSBjO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiByZXN1bHQ7XHJcbn1cclxuLyoqIEVuY29kZXMgYSBwYXRoIHNlcGFyYXRvciBpbnRvIHRoZSBnaXZlbiByZXN1bHQgKi9cclxuZnVuY3Rpb24gZW5jb2RlU2VwYXJhdG9yKHJlc3VsdCkge1xyXG4gICAgcmV0dXJuIHJlc3VsdCArIGVzY2FwZUNoYXIgKyBlbmNvZGVkU2VwYXJhdG9yQ2hhcjtcclxufVxyXG4vKipcclxuICogRGVjb2RlcyB0aGUgZ2l2ZW4gSW5kZXhlZERiLWNvbXBhdGlibGUgc3RyaW5nIGZvcm0gb2YgYSByZXNvdXJjZSBwYXRoIGludG9cclxuICogYSBSZXNvdXJjZVBhdGggaW5zdGFuY2UuIE5vdGUgdGhhdCB0aGlzIG1ldGhvZCBpcyBub3Qgc3VpdGFibGUgZm9yIHVzZSB3aXRoXHJcbiAqIGRlY29kaW5nIHJlc291cmNlIG5hbWVzIGZyb20gdGhlIHNlcnZlcjsgdGhvc2UgYXJlIE9uZSBQbGF0Zm9ybSBmb3JtYXRcclxuICogc3RyaW5ncy5cclxuICovXHJcbmZ1bmN0aW9uIGRlY29kZShwYXRoKSB7XHJcbiAgICAvLyBFdmVudCB0aGUgZW1wdHkgcGF0aCBtdXN0IGVuY29kZSBhcyBhIHBhdGggb2YgYXQgbGVhc3QgbGVuZ3RoIDIuIEEgcGF0aFxyXG4gICAgLy8gd2l0aCBleGFjdGx5IDIgbXVzdCBiZSB0aGUgZW1wdHkgcGF0aC5cclxuICAgIHZhciBsZW5ndGggPSBwYXRoLmxlbmd0aDtcclxuICAgIGFzc2VydChsZW5ndGggPj0gMiwgJ0ludmFsaWQgcGF0aCAnICsgcGF0aCk7XHJcbiAgICBpZiAobGVuZ3RoID09PSAyKSB7XHJcbiAgICAgICAgYXNzZXJ0KHBhdGguY2hhckF0KDApID09PSBlc2NhcGVDaGFyICYmIHBhdGguY2hhckF0KDEpID09PSBlbmNvZGVkU2VwYXJhdG9yQ2hhciwgJ05vbi1lbXB0eSBwYXRoICcgKyBwYXRoICsgJyBoYWQgbGVuZ3RoIDInKTtcclxuICAgICAgICByZXR1cm4gUmVzb3VyY2VQYXRoLkVNUFRZX1BBVEg7XHJcbiAgICB9XHJcbiAgICAvLyBFc2NhcGUgY2hhcmFjdGVycyBjYW5ub3QgZXhpc3QgcGFzdCB0aGUgc2Vjb25kLXRvLWxhc3QgcG9zaXRpb24gaW4gdGhlXHJcbiAgICAvLyBzb3VyY2UgdmFsdWUuXHJcbiAgICB2YXIgbGFzdFJlYXNvbmFibGVFc2NhcGVJbmRleCA9IGxlbmd0aCAtIDI7XHJcbiAgICB2YXIgc2VnbWVudHMgPSBbXTtcclxuICAgIHZhciBzZWdtZW50QnVpbGRlciA9ICcnO1xyXG4gICAgZm9yICh2YXIgc3RhcnQgPSAwOyBzdGFydCA8IGxlbmd0aDspIHtcclxuICAgICAgICAvLyBUaGUgbGFzdCB0d28gY2hhcmFjdGVycyBvZiBhIHZhbGlkIGVuY29kZWQgcGF0aCBtdXN0IGJlIGEgc2VwYXJhdG9yLCBzb1xyXG4gICAgICAgIC8vIHRoZXJlIG11c3QgYmUgYW4gZW5kIHRvIHRoaXMgc2VnbWVudC5cclxuICAgICAgICB2YXIgZW5kID0gcGF0aC5pbmRleE9mKGVzY2FwZUNoYXIsIHN0YXJ0KTtcclxuICAgICAgICBpZiAoZW5kIDwgMCB8fCBlbmQgPiBsYXN0UmVhc29uYWJsZUVzY2FwZUluZGV4KSB7XHJcbiAgICAgICAgICAgIGZhaWwoJ0ludmFsaWQgZW5jb2RlZCByZXNvdXJjZSBwYXRoOiBcIicgKyBwYXRoICsgJ1wiJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBuZXh0ID0gcGF0aC5jaGFyQXQoZW5kICsgMSk7XHJcbiAgICAgICAgc3dpdGNoIChuZXh0KSB7XHJcbiAgICAgICAgICAgIGNhc2UgZW5jb2RlZFNlcGFyYXRvckNoYXI6XHJcbiAgICAgICAgICAgICAgICB2YXIgY3VycmVudFBpZWNlID0gcGF0aC5zdWJzdHJpbmcoc3RhcnQsIGVuZCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgc2VnbWVudCA9IHZvaWQgMDtcclxuICAgICAgICAgICAgICAgIGlmIChzZWdtZW50QnVpbGRlci5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBBdm9pZCBjb3B5aW5nIGZvciB0aGUgY29tbW9uIGNhc2Ugb2YgYSBzZWdtZW50IHRoYXQgZXhjbHVkZXMgXFwwXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gYW5kIFxcMDAxXHJcbiAgICAgICAgICAgICAgICAgICAgc2VnbWVudCA9IGN1cnJlbnRQaWVjZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHNlZ21lbnRCdWlsZGVyICs9IGN1cnJlbnRQaWVjZTtcclxuICAgICAgICAgICAgICAgICAgICBzZWdtZW50ID0gc2VnbWVudEJ1aWxkZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VnbWVudEJ1aWxkZXIgPSAnJztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHNlZ21lbnRzLnB1c2goc2VnbWVudCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBlbmNvZGVkTnVsOlxyXG4gICAgICAgICAgICAgICAgc2VnbWVudEJ1aWxkZXIgKz0gcGF0aC5zdWJzdHJpbmcoc3RhcnQsIGVuZCk7XHJcbiAgICAgICAgICAgICAgICBzZWdtZW50QnVpbGRlciArPSAnXFwwJztcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIGVuY29kZWRFc2NhcGU6XHJcbiAgICAgICAgICAgICAgICAvLyBUaGUgZXNjYXBlIGNoYXJhY3RlciBjYW4gYmUgdXNlZCBpbiB0aGUgb3V0cHV0IHRvIGVuY29kZSBpdHNlbGYuXHJcbiAgICAgICAgICAgICAgICBzZWdtZW50QnVpbGRlciArPSBwYXRoLnN1YnN0cmluZyhzdGFydCwgZW5kICsgMSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIGZhaWwoJ0ludmFsaWQgZW5jb2RlZCByZXNvdXJjZSBwYXRoOiBcIicgKyBwYXRoICsgJ1wiJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHN0YXJ0ID0gZW5kICsgMjtcclxuICAgIH1cclxuICAgIHJldHVybiBuZXcgUmVzb3VyY2VQYXRoKHNlZ21lbnRzKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxudmFyIFRpbWVzdGFtcCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFRpbWVzdGFtcChzZWNvbmRzLCBuYW5vc2Vjb25kcykge1xyXG4gICAgICAgIHRoaXMuc2Vjb25kcyA9IHNlY29uZHM7XHJcbiAgICAgICAgdGhpcy5uYW5vc2Vjb25kcyA9IG5hbm9zZWNvbmRzO1xyXG4gICAgICAgIGlmIChuYW5vc2Vjb25kcyA8IDApIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuSU5WQUxJRF9BUkdVTUVOVCwgJ1RpbWVzdGFtcCBuYW5vc2Vjb25kcyBvdXQgb2YgcmFuZ2U6ICcgKyBuYW5vc2Vjb25kcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChuYW5vc2Vjb25kcyA+PSAxZTkpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuSU5WQUxJRF9BUkdVTUVOVCwgJ1RpbWVzdGFtcCBuYW5vc2Vjb25kcyBvdXQgb2YgcmFuZ2U6ICcgKyBuYW5vc2Vjb25kcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIE1pZG5pZ2h0IGF0IHRoZSBiZWdpbm5pbmcgb2YgMS8xLzEgaXMgdGhlIGVhcmxpZXN0IEZpcmVzdG9yZSBzdXBwb3J0cy5cclxuICAgICAgICBpZiAoc2Vjb25kcyA8IC02MjEzNTU5NjgwMCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5JTlZBTElEX0FSR1VNRU5ULCAnVGltZXN0YW1wIHNlY29uZHMgb3V0IG9mIHJhbmdlOiAnICsgc2Vjb25kcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFRoaXMgd2lsbCBicmVhayBpbiB0aGUgeWVhciAxMCwwMDAuXHJcbiAgICAgICAgaWYgKHNlY29uZHMgPj0gMjUzNDAyMzAwODAwKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLklOVkFMSURfQVJHVU1FTlQsICdUaW1lc3RhbXAgc2Vjb25kcyBvdXQgb2YgcmFuZ2U6ICcgKyBzZWNvbmRzKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBUaW1lc3RhbXAubm93ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBUaW1lc3RhbXAuZnJvbU1pbGxpcyhEYXRlLm5vdygpKTtcclxuICAgIH07XHJcbiAgICBUaW1lc3RhbXAuZnJvbURhdGUgPSBmdW5jdGlvbiAoZGF0ZSkge1xyXG4gICAgICAgIHJldHVybiBUaW1lc3RhbXAuZnJvbU1pbGxpcyhkYXRlLmdldFRpbWUoKSk7XHJcbiAgICB9O1xyXG4gICAgVGltZXN0YW1wLmZyb21NaWxsaXMgPSBmdW5jdGlvbiAobWlsbGlzZWNvbmRzKSB7XHJcbiAgICAgICAgdmFyIHNlY29uZHMgPSBNYXRoLmZsb29yKG1pbGxpc2Vjb25kcyAvIDEwMDApO1xyXG4gICAgICAgIHZhciBuYW5vcyA9IChtaWxsaXNlY29uZHMgLSBzZWNvbmRzICogMTAwMCkgKiAxZTY7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBUaW1lc3RhbXAoc2Vjb25kcywgbmFub3MpO1xyXG4gICAgfTtcclxuICAgIFRpbWVzdGFtcC5wcm90b3R5cGUudG9EYXRlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgRGF0ZSh0aGlzLnRvTWlsbGlzKCkpO1xyXG4gICAgfTtcclxuICAgIFRpbWVzdGFtcC5wcm90b3R5cGUudG9NaWxsaXMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc2Vjb25kcyAqIDEwMDAgKyB0aGlzLm5hbm9zZWNvbmRzIC8gMWU2O1xyXG4gICAgfTtcclxuICAgIFRpbWVzdGFtcC5wcm90b3R5cGUuX2NvbXBhcmVUbyA9IGZ1bmN0aW9uIChvdGhlcikge1xyXG4gICAgICAgIGlmICh0aGlzLnNlY29uZHMgPT09IG90aGVyLnNlY29uZHMpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHByaW1pdGl2ZUNvbXBhcmF0b3IodGhpcy5uYW5vc2Vjb25kcywgb3RoZXIubmFub3NlY29uZHMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcHJpbWl0aXZlQ29tcGFyYXRvcih0aGlzLnNlY29uZHMsIG90aGVyLnNlY29uZHMpO1xyXG4gICAgfTtcclxuICAgIFRpbWVzdGFtcC5wcm90b3R5cGUuaXNFcXVhbCA9IGZ1bmN0aW9uIChvdGhlcikge1xyXG4gICAgICAgIHJldHVybiAob3RoZXIuc2Vjb25kcyA9PT0gdGhpcy5zZWNvbmRzICYmIG90aGVyLm5hbm9zZWNvbmRzID09PSB0aGlzLm5hbm9zZWNvbmRzKTtcclxuICAgIH07XHJcbiAgICBUaW1lc3RhbXAucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiAoJ1RpbWVzdGFtcChzZWNvbmRzPScgK1xyXG4gICAgICAgICAgICB0aGlzLnNlY29uZHMgK1xyXG4gICAgICAgICAgICAnLCBuYW5vc2Vjb25kcz0nICtcclxuICAgICAgICAgICAgdGhpcy5uYW5vc2Vjb25kcyArXHJcbiAgICAgICAgICAgICcpJyk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFRpbWVzdGFtcDtcclxufSgpKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBBIHZlcnNpb24gb2YgYSBkb2N1bWVudCBpbiBGaXJlc3RvcmUuIFRoaXMgY29ycmVzcG9uZHMgdG8gdGhlIHZlcnNpb25cclxuICogdGltZXN0YW1wLCBzdWNoIGFzIHVwZGF0ZV90aW1lIG9yIHJlYWRfdGltZS5cclxuICovXHJcbnZhciBTbmFwc2hvdFZlcnNpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBTbmFwc2hvdFZlcnNpb24odGltZXN0YW1wKSB7XHJcbiAgICAgICAgdGhpcy50aW1lc3RhbXAgPSB0aW1lc3RhbXA7XHJcbiAgICB9XHJcbiAgICAvLyBUT0RPKGIvMzQxNzYzNDQpOiBPbmNlIHdlIG5vIGxvbmdlciBuZWVkIHRvIHVzZSB0aGUgb2xkIGFscGhhIHByb3RvcyxcclxuICAgIC8vIGRlbGV0ZSB0aGlzIGNvbnN0cnVjdG9yIGFuZCB1c2UgYSB0aW1lc3RhbXAtYmFja2VkIHZlcnNpb24gZXZlcnl3aGVyZS5cclxuICAgIFNuYXBzaG90VmVyc2lvbi5mcm9tTWljcm9zZWNvbmRzID0gZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgICAgdmFyIHNlY29uZHMgPSBNYXRoLmZsb29yKHZhbHVlIC8gMWU2KTtcclxuICAgICAgICB2YXIgbmFub3MgPSAodmFsdWUgJSAxZTYpICogMWUzO1xyXG4gICAgICAgIHJldHVybiBuZXcgU25hcHNob3RWZXJzaW9uKG5ldyBUaW1lc3RhbXAoc2Vjb25kcywgbmFub3MpKTtcclxuICAgIH07XHJcbiAgICBTbmFwc2hvdFZlcnNpb24uZnJvbVRpbWVzdGFtcCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgIHJldHVybiBuZXcgU25hcHNob3RWZXJzaW9uKHZhbHVlKTtcclxuICAgIH07XHJcbiAgICBTbmFwc2hvdFZlcnNpb24uZm9yRGVsZXRlZERvYyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gU25hcHNob3RWZXJzaW9uLk1JTjtcclxuICAgIH07XHJcbiAgICBTbmFwc2hvdFZlcnNpb24ucHJvdG90eXBlLmNvbXBhcmVUbyA9IGZ1bmN0aW9uIChvdGhlcikge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnRpbWVzdGFtcC5fY29tcGFyZVRvKG90aGVyLnRpbWVzdGFtcCk7XHJcbiAgICB9O1xyXG4gICAgU25hcHNob3RWZXJzaW9uLnByb3RvdHlwZS5pc0VxdWFsID0gZnVuY3Rpb24gKG90aGVyKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudGltZXN0YW1wLmlzRXF1YWwob3RoZXIudGltZXN0YW1wKTtcclxuICAgIH07XHJcbiAgICAvKiogUmV0dXJucyBhIG51bWJlciByZXByZXNlbnRhdGlvbiBvZiB0aGUgdmVyc2lvbiBmb3IgdXNlIGluIHNwZWMgdGVzdHMuICovXHJcbiAgICBTbmFwc2hvdFZlcnNpb24ucHJvdG90eXBlLnRvTWljcm9zZWNvbmRzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vIENvbnZlcnQgdG8gbWljcm9zZWNvbmRzLlxyXG4gICAgICAgIHJldHVybiB0aGlzLnRpbWVzdGFtcC5zZWNvbmRzICogMWU2ICsgdGhpcy50aW1lc3RhbXAubmFub3NlY29uZHMgLyAxMDAwO1xyXG4gICAgfTtcclxuICAgIFNuYXBzaG90VmVyc2lvbi5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuICdTbmFwc2hvdFZlcnNpb24oJyArIHRoaXMudGltZXN0YW1wLnRvU3RyaW5nKCkgKyAnKSc7XHJcbiAgICB9O1xyXG4gICAgU25hcHNob3RWZXJzaW9uLnByb3RvdHlwZS50b1RpbWVzdGFtcCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy50aW1lc3RhbXA7XHJcbiAgICB9O1xyXG4gICAgU25hcHNob3RWZXJzaW9uLk1JTiA9IG5ldyBTbmFwc2hvdFZlcnNpb24obmV3IFRpbWVzdGFtcCgwLCAwKSk7XHJcbiAgICByZXR1cm4gU25hcHNob3RWZXJzaW9uO1xyXG59KCkpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLy8gQW4gaW1tdXRhYmxlIHNvcnRlZCBtYXAgaW1wbGVtZW50YXRpb24sIGJhc2VkIG9uIGEgTGVmdC1sZWFuaW5nIFJlZC1CbGFja1xyXG4vLyB0cmVlLlxyXG52YXIgU29ydGVkTWFwID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gU29ydGVkTWFwKGNvbXBhcmF0b3IsIHJvb3QpIHtcclxuICAgICAgICB0aGlzLmNvbXBhcmF0b3IgPSBjb21wYXJhdG9yO1xyXG4gICAgICAgIHRoaXMucm9vdCA9IHJvb3QgPyByb290IDogTExSQk5vZGUuRU1QVFk7XHJcbiAgICB9XHJcbiAgICAvLyBSZXR1cm5zIGEgY29weSBvZiB0aGUgbWFwLCB3aXRoIHRoZSBzcGVjaWZpZWQga2V5L3ZhbHVlIGFkZGVkIG9yIHJlcGxhY2VkLlxyXG4gICAgU29ydGVkTWFwLnByb3RvdHlwZS5pbnNlcnQgPSBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xyXG4gICAgICAgIHJldHVybiBuZXcgU29ydGVkTWFwKHRoaXMuY29tcGFyYXRvciwgdGhpcy5yb290XHJcbiAgICAgICAgICAgIC5pbnNlcnQoa2V5LCB2YWx1ZSwgdGhpcy5jb21wYXJhdG9yKVxyXG4gICAgICAgICAgICAuY29weShudWxsLCBudWxsLCBMTFJCTm9kZS5CTEFDSywgbnVsbCwgbnVsbCkpO1xyXG4gICAgfTtcclxuICAgIC8vIFJldHVybnMgYSBjb3B5IG9mIHRoZSBtYXAsIHdpdGggdGhlIHNwZWNpZmllZCBrZXkgcmVtb3ZlZC5cclxuICAgIFNvcnRlZE1hcC5wcm90b3R5cGUucmVtb3ZlID0gZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgIHJldHVybiBuZXcgU29ydGVkTWFwKHRoaXMuY29tcGFyYXRvciwgdGhpcy5yb290XHJcbiAgICAgICAgICAgIC5yZW1vdmUoa2V5LCB0aGlzLmNvbXBhcmF0b3IpXHJcbiAgICAgICAgICAgIC5jb3B5KG51bGwsIG51bGwsIExMUkJOb2RlLkJMQUNLLCBudWxsLCBudWxsKSk7XHJcbiAgICB9O1xyXG4gICAgLy8gUmV0dXJucyB0aGUgdmFsdWUgb2YgdGhlIG5vZGUgd2l0aCB0aGUgZ2l2ZW4ga2V5LCBvciBudWxsLlxyXG4gICAgU29ydGVkTWFwLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgICAgdmFyIG5vZGUgPSB0aGlzLnJvb3Q7XHJcbiAgICAgICAgd2hpbGUgKCFub2RlLmlzRW1wdHkoKSkge1xyXG4gICAgICAgICAgICB2YXIgY21wID0gdGhpcy5jb21wYXJhdG9yKGtleSwgbm9kZS5rZXkpO1xyXG4gICAgICAgICAgICBpZiAoY21wID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbm9kZS52YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChjbXAgPCAwKSB7XHJcbiAgICAgICAgICAgICAgICBub2RlID0gbm9kZS5sZWZ0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGNtcCA+IDApIHtcclxuICAgICAgICAgICAgICAgIG5vZGUgPSBub2RlLnJpZ2h0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfTtcclxuICAgIC8vIFJldHVybnMgdGhlIGluZGV4IG9mIHRoZSBlbGVtZW50IGluIHRoaXMgc29ydGVkIG1hcCwgb3IgLTEgaWYgaXQgZG9lc24ndFxyXG4gICAgLy8gZXhpc3QuXHJcbiAgICBTb3J0ZWRNYXAucHJvdG90eXBlLmluZGV4T2YgPSBmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgICAgLy8gTnVtYmVyIG9mIG5vZGVzIHRoYXQgd2VyZSBwcnVuZWQgd2hlbiBkZXNjZW5kaW5nIHJpZ2h0XHJcbiAgICAgICAgdmFyIHBydW5lZE5vZGVzID0gMDtcclxuICAgICAgICB2YXIgbm9kZSA9IHRoaXMucm9vdDtcclxuICAgICAgICB3aGlsZSAoIW5vZGUuaXNFbXB0eSgpKSB7XHJcbiAgICAgICAgICAgIHZhciBjbXAgPSB0aGlzLmNvbXBhcmF0b3Ioa2V5LCBub2RlLmtleSk7XHJcbiAgICAgICAgICAgIGlmIChjbXAgPT09IDApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBwcnVuZWROb2RlcyArIG5vZGUubGVmdC5zaXplO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGNtcCA8IDApIHtcclxuICAgICAgICAgICAgICAgIG5vZGUgPSBub2RlLmxlZnQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBDb3VudCBhbGwgbm9kZXMgbGVmdCBvZiB0aGUgbm9kZSBwbHVzIHRoZSBub2RlIGl0c2VsZlxyXG4gICAgICAgICAgICAgICAgcHJ1bmVkTm9kZXMgKz0gbm9kZS5sZWZ0LnNpemUgKyAxO1xyXG4gICAgICAgICAgICAgICAgbm9kZSA9IG5vZGUucmlnaHQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gTm9kZSBub3QgZm91bmRcclxuICAgICAgICByZXR1cm4gLTE7XHJcbiAgICB9O1xyXG4gICAgU29ydGVkTWFwLnByb3RvdHlwZS5pc0VtcHR5ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnJvb3QuaXNFbXB0eSgpO1xyXG4gICAgfTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTb3J0ZWRNYXAucHJvdG90eXBlLCBcInNpemVcIiwge1xyXG4gICAgICAgIC8vIFJldHVybnMgdGhlIHRvdGFsIG51bWJlciBvZiBub2RlcyBpbiB0aGUgbWFwLlxyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yb290LnNpemU7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICAvLyBSZXR1cm5zIHRoZSBtaW5pbXVtIGtleSBpbiB0aGUgbWFwLlxyXG4gICAgU29ydGVkTWFwLnByb3RvdHlwZS5taW5LZXkgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucm9vdC5taW5LZXkoKTtcclxuICAgIH07XHJcbiAgICAvLyBSZXR1cm5zIHRoZSBtYXhpbXVtIGtleSBpbiB0aGUgbWFwLlxyXG4gICAgU29ydGVkTWFwLnByb3RvdHlwZS5tYXhLZXkgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucm9vdC5tYXhLZXkoKTtcclxuICAgIH07XHJcbiAgICAvLyBUcmF2ZXJzZXMgdGhlIG1hcCBpbiBrZXkgb3JkZXIgYW5kIGNhbGxzIHRoZSBzcGVjaWZpZWQgYWN0aW9uIGZ1bmN0aW9uXHJcbiAgICAvLyBmb3IgZWFjaCBrZXkvdmFsdWUgcGFpci4gSWYgYWN0aW9uIHJldHVybnMgdHJ1ZSwgdHJhdmVyc2FsIGlzIGFib3J0ZWQuXHJcbiAgICAvLyBSZXR1cm5zIHRoZSBmaXJzdCB0cnV0aHkgdmFsdWUgcmV0dXJuZWQgYnkgYWN0aW9uLCBvciB0aGUgbGFzdCBmYWxzZXlcclxuICAgIC8vIHZhbHVlIHJldHVybmVkIGJ5IGFjdGlvbi5cclxuICAgIFNvcnRlZE1hcC5wcm90b3R5cGUuaW5vcmRlclRyYXZlcnNhbCA9IGZ1bmN0aW9uIChhY3Rpb24pIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5yb290Lmlub3JkZXJUcmF2ZXJzYWwoYWN0aW9uKTtcclxuICAgIH07XHJcbiAgICBTb3J0ZWRNYXAucHJvdG90eXBlLmZvckVhY2ggPSBmdW5jdGlvbiAoZm4pIHtcclxuICAgICAgICB0aGlzLmlub3JkZXJUcmF2ZXJzYWwoZnVuY3Rpb24gKGssIHYpIHtcclxuICAgICAgICAgICAgZm4oaywgdik7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBTb3J0ZWRNYXAucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBkZXNjcmlwdGlvbnMgPSBbXTtcclxuICAgICAgICB0aGlzLmlub3JkZXJUcmF2ZXJzYWwoZnVuY3Rpb24gKGssIHYpIHtcclxuICAgICAgICAgICAgZGVzY3JpcHRpb25zLnB1c2goayArIFwiOlwiICsgdik7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gXCJ7XCIgKyBkZXNjcmlwdGlvbnMuam9pbignLCAnKSArIFwifVwiO1xyXG4gICAgfTtcclxuICAgIC8vIFRyYXZlcnNlcyB0aGUgbWFwIGluIHJldmVyc2Uga2V5IG9yZGVyIGFuZCBjYWxscyB0aGUgc3BlY2lmaWVkIGFjdGlvblxyXG4gICAgLy8gZnVuY3Rpb24gZm9yIGVhY2gga2V5L3ZhbHVlIHBhaXIuIElmIGFjdGlvbiByZXR1cm5zIHRydWUsIHRyYXZlcnNhbCBpc1xyXG4gICAgLy8gYWJvcnRlZC5cclxuICAgIC8vIFJldHVybnMgdGhlIGZpcnN0IHRydXRoeSB2YWx1ZSByZXR1cm5lZCBieSBhY3Rpb24sIG9yIHRoZSBsYXN0IGZhbHNleVxyXG4gICAgLy8gdmFsdWUgcmV0dXJuZWQgYnkgYWN0aW9uLlxyXG4gICAgU29ydGVkTWFwLnByb3RvdHlwZS5yZXZlcnNlVHJhdmVyc2FsID0gZnVuY3Rpb24gKGFjdGlvbikge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnJvb3QucmV2ZXJzZVRyYXZlcnNhbChhY3Rpb24pO1xyXG4gICAgfTtcclxuICAgIC8vIFJldHVybnMgYW4gaXRlcmF0b3Igb3ZlciB0aGUgU29ydGVkTWFwLlxyXG4gICAgU29ydGVkTWFwLnByb3RvdHlwZS5nZXRJdGVyYXRvciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFNvcnRlZE1hcEl0ZXJhdG9yKHRoaXMucm9vdCwgbnVsbCwgdGhpcy5jb21wYXJhdG9yLCBmYWxzZSk7XHJcbiAgICB9O1xyXG4gICAgU29ydGVkTWFwLnByb3RvdHlwZS5nZXRJdGVyYXRvckZyb20gPSBmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBTb3J0ZWRNYXBJdGVyYXRvcih0aGlzLnJvb3QsIGtleSwgdGhpcy5jb21wYXJhdG9yLCBmYWxzZSk7XHJcbiAgICB9O1xyXG4gICAgU29ydGVkTWFwLnByb3RvdHlwZS5nZXRSZXZlcnNlSXRlcmF0b3IgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBTb3J0ZWRNYXBJdGVyYXRvcih0aGlzLnJvb3QsIG51bGwsIHRoaXMuY29tcGFyYXRvciwgdHJ1ZSk7XHJcbiAgICB9O1xyXG4gICAgU29ydGVkTWFwLnByb3RvdHlwZS5nZXRSZXZlcnNlSXRlcmF0b3JGcm9tID0gZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgIHJldHVybiBuZXcgU29ydGVkTWFwSXRlcmF0b3IodGhpcy5yb290LCBrZXksIHRoaXMuY29tcGFyYXRvciwgdHJ1ZSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFNvcnRlZE1hcDtcclxufSgpKTsgLy8gZW5kIFNvcnRlZE1hcFxyXG4vLyBBbiBpdGVyYXRvciBvdmVyIGFuIExMUkJOb2RlLlxyXG52YXIgU29ydGVkTWFwSXRlcmF0b3IgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBTb3J0ZWRNYXBJdGVyYXRvcihub2RlLCBzdGFydEtleSwgY29tcGFyYXRvciwgaXNSZXZlcnNlKSB7XHJcbiAgICAgICAgdGhpcy5pc1JldmVyc2UgPSBpc1JldmVyc2U7XHJcbiAgICAgICAgdGhpcy5ub2RlU3RhY2sgPSBbXTtcclxuICAgICAgICB2YXIgY21wID0gMTtcclxuICAgICAgICB3aGlsZSAoIW5vZGUuaXNFbXB0eSgpKSB7XHJcbiAgICAgICAgICAgIGNtcCA9IHN0YXJ0S2V5ID8gY29tcGFyYXRvcihub2RlLmtleSwgc3RhcnRLZXkpIDogMTtcclxuICAgICAgICAgICAgLy8gZmxpcCB0aGUgY29tcGFyaXNvbiBpZiB3ZSdyZSBnb2luZyBpbiByZXZlcnNlXHJcbiAgICAgICAgICAgIGlmIChpc1JldmVyc2UpIHtcclxuICAgICAgICAgICAgICAgIGNtcCAqPSAtMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoY21wIDwgMCkge1xyXG4gICAgICAgICAgICAgICAgLy8gVGhpcyBub2RlIGlzIGxlc3MgdGhhbiBvdXIgc3RhcnQga2V5LiBpZ25vcmUgaXRcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzUmV2ZXJzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG5vZGUgPSBub2RlLmxlZnQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBub2RlID0gbm9kZS5yaWdodDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChjbXAgPT09IDApIHtcclxuICAgICAgICAgICAgICAgIC8vIFRoaXMgbm9kZSBpcyBleGFjdGx5IGVxdWFsIHRvIG91ciBzdGFydCBrZXkuIFB1c2ggaXQgb24gdGhlIHN0YWNrLFxyXG4gICAgICAgICAgICAgICAgLy8gYnV0IHN0b3AgaXRlcmF0aW5nO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ub2RlU3RhY2sucHVzaChub2RlKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gVGhpcyBub2RlIGlzIGdyZWF0ZXIgdGhhbiBvdXIgc3RhcnQga2V5LCBhZGQgaXQgdG8gdGhlIHN0YWNrIGFuZCBtb3ZlXHJcbiAgICAgICAgICAgICAgICAvLyB0byB0aGUgbmV4dCBvbmVcclxuICAgICAgICAgICAgICAgIHRoaXMubm9kZVN0YWNrLnB1c2gobm9kZSk7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pc1JldmVyc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICBub2RlID0gbm9kZS5yaWdodDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIG5vZGUgPSBub2RlLmxlZnQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBTb3J0ZWRNYXBJdGVyYXRvci5wcm90b3R5cGUuZ2V0TmV4dCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBhc3NlcnQodGhpcy5ub2RlU3RhY2subGVuZ3RoID4gMCwgJ2dldE5leHQoKSBjYWxsZWQgb24gaXRlcmF0b3Igd2hlbiBoYXNOZXh0KCkgaXMgZmFsc2UuJyk7XHJcbiAgICAgICAgdmFyIG5vZGUgPSB0aGlzLm5vZGVTdGFjay5wb3AoKTtcclxuICAgICAgICB2YXIgcmVzdWx0ID0geyBrZXk6IG5vZGUua2V5LCB2YWx1ZTogbm9kZS52YWx1ZSB9O1xyXG4gICAgICAgIGlmICh0aGlzLmlzUmV2ZXJzZSkge1xyXG4gICAgICAgICAgICBub2RlID0gbm9kZS5sZWZ0O1xyXG4gICAgICAgICAgICB3aGlsZSAoIW5vZGUuaXNFbXB0eSgpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm5vZGVTdGFjay5wdXNoKG5vZGUpO1xyXG4gICAgICAgICAgICAgICAgbm9kZSA9IG5vZGUucmlnaHQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIG5vZGUgPSBub2RlLnJpZ2h0O1xyXG4gICAgICAgICAgICB3aGlsZSAoIW5vZGUuaXNFbXB0eSgpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm5vZGVTdGFjay5wdXNoKG5vZGUpO1xyXG4gICAgICAgICAgICAgICAgbm9kZSA9IG5vZGUubGVmdDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfTtcclxuICAgIFNvcnRlZE1hcEl0ZXJhdG9yLnByb3RvdHlwZS5oYXNOZXh0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm5vZGVTdGFjay5sZW5ndGggPiAwO1xyXG4gICAgfTtcclxuICAgIFNvcnRlZE1hcEl0ZXJhdG9yLnByb3RvdHlwZS5wZWVrID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICh0aGlzLm5vZGVTdGFjay5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBub2RlID0gdGhpcy5ub2RlU3RhY2tbdGhpcy5ub2RlU3RhY2subGVuZ3RoIC0gMV07XHJcbiAgICAgICAgcmV0dXJuIHsga2V5OiBub2RlLmtleSwgdmFsdWU6IG5vZGUudmFsdWUgfTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gU29ydGVkTWFwSXRlcmF0b3I7XHJcbn0oKSk7IC8vIGVuZCBTb3J0ZWRNYXBJdGVyYXRvclxyXG4vLyBSZXByZXNlbnRzIGEgbm9kZSBpbiBhIExlZnQtbGVhbmluZyBSZWQtQmxhY2sgdHJlZS5cclxudmFyIExMUkJOb2RlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gTExSQk5vZGUoa2V5LCB2YWx1ZSwgY29sb3IsIGxlZnQsIHJpZ2h0KSB7XHJcbiAgICAgICAgdGhpcy5rZXkgPSBrZXk7XHJcbiAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xyXG4gICAgICAgIHRoaXMuY29sb3IgPSBjb2xvciAhPSBudWxsID8gY29sb3IgOiBMTFJCTm9kZS5SRUQ7XHJcbiAgICAgICAgdGhpcy5sZWZ0ID0gbGVmdCAhPSBudWxsID8gbGVmdCA6IExMUkJOb2RlLkVNUFRZO1xyXG4gICAgICAgIHRoaXMucmlnaHQgPSByaWdodCAhPSBudWxsID8gcmlnaHQgOiBMTFJCTm9kZS5FTVBUWTtcclxuICAgICAgICB0aGlzLnNpemUgPSB0aGlzLmxlZnQuc2l6ZSArIDEgKyB0aGlzLnJpZ2h0LnNpemU7XHJcbiAgICB9XHJcbiAgICAvLyBSZXR1cm5zIGEgY29weSBvZiB0aGUgY3VycmVudCBub2RlLCBvcHRpb25hbGx5IHJlcGxhY2luZyBwaWVjZXMgb2YgaXQuXHJcbiAgICBMTFJCTm9kZS5wcm90b3R5cGUuY29weSA9IGZ1bmN0aW9uIChrZXksIHZhbHVlLCBjb2xvciwgbGVmdCwgcmlnaHQpIHtcclxuICAgICAgICByZXR1cm4gbmV3IExMUkJOb2RlKGtleSAhPSBudWxsID8ga2V5IDogdGhpcy5rZXksIHZhbHVlICE9IG51bGwgPyB2YWx1ZSA6IHRoaXMudmFsdWUsIGNvbG9yICE9IG51bGwgPyBjb2xvciA6IHRoaXMuY29sb3IsIGxlZnQgIT0gbnVsbCA/IGxlZnQgOiB0aGlzLmxlZnQsIHJpZ2h0ICE9IG51bGwgPyByaWdodCA6IHRoaXMucmlnaHQpO1xyXG4gICAgfTtcclxuICAgIExMUkJOb2RlLnByb3RvdHlwZS5pc0VtcHR5ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH07XHJcbiAgICAvLyBUcmF2ZXJzZXMgdGhlIHRyZWUgaW4ga2V5IG9yZGVyIGFuZCBjYWxscyB0aGUgc3BlY2lmaWVkIGFjdGlvbiBmdW5jdGlvblxyXG4gICAgLy8gZm9yIGVhY2ggbm9kZS4gSWYgYWN0aW9uIHJldHVybnMgdHJ1ZSwgdHJhdmVyc2FsIGlzIGFib3J0ZWQuXHJcbiAgICAvLyBSZXR1cm5zIHRoZSBmaXJzdCB0cnV0aHkgdmFsdWUgcmV0dXJuZWQgYnkgYWN0aW9uLCBvciB0aGUgbGFzdCBmYWxzZXlcclxuICAgIC8vIHZhbHVlIHJldHVybmVkIGJ5IGFjdGlvbi5cclxuICAgIExMUkJOb2RlLnByb3RvdHlwZS5pbm9yZGVyVHJhdmVyc2FsID0gZnVuY3Rpb24gKGFjdGlvbikge1xyXG4gICAgICAgIHJldHVybiAodGhpcy5sZWZ0Lmlub3JkZXJUcmF2ZXJzYWwoYWN0aW9uKSB8fFxyXG4gICAgICAgICAgICBhY3Rpb24odGhpcy5rZXksIHRoaXMudmFsdWUpIHx8XHJcbiAgICAgICAgICAgIHRoaXMucmlnaHQuaW5vcmRlclRyYXZlcnNhbChhY3Rpb24pKTtcclxuICAgIH07XHJcbiAgICAvLyBUcmF2ZXJzZXMgdGhlIHRyZWUgaW4gcmV2ZXJzZSBrZXkgb3JkZXIgYW5kIGNhbGxzIHRoZSBzcGVjaWZpZWQgYWN0aW9uXHJcbiAgICAvLyBmdW5jdGlvbiBmb3IgZWFjaCBub2RlLiBJZiBhY3Rpb24gcmV0dXJucyB0cnVlLCB0cmF2ZXJzYWwgaXMgYWJvcnRlZC5cclxuICAgIC8vIFJldHVybnMgdGhlIGZpcnN0IHRydXRoeSB2YWx1ZSByZXR1cm5lZCBieSBhY3Rpb24sIG9yIHRoZSBsYXN0IGZhbHNleVxyXG4gICAgLy8gdmFsdWUgcmV0dXJuZWQgYnkgYWN0aW9uLlxyXG4gICAgTExSQk5vZGUucHJvdG90eXBlLnJldmVyc2VUcmF2ZXJzYWwgPSBmdW5jdGlvbiAoYWN0aW9uKSB7XHJcbiAgICAgICAgcmV0dXJuICh0aGlzLnJpZ2h0LnJldmVyc2VUcmF2ZXJzYWwoYWN0aW9uKSB8fFxyXG4gICAgICAgICAgICBhY3Rpb24odGhpcy5rZXksIHRoaXMudmFsdWUpIHx8XHJcbiAgICAgICAgICAgIHRoaXMubGVmdC5yZXZlcnNlVHJhdmVyc2FsKGFjdGlvbikpO1xyXG4gICAgfTtcclxuICAgIC8vIFJldHVybnMgdGhlIG1pbmltdW0gbm9kZSBpbiB0aGUgdHJlZS5cclxuICAgIExMUkJOb2RlLnByb3RvdHlwZS5taW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMubGVmdC5pc0VtcHR5KCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5sZWZ0Lm1pbigpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvLyBSZXR1cm5zIHRoZSBtYXhpbXVtIGtleSBpbiB0aGUgdHJlZS5cclxuICAgIExMUkJOb2RlLnByb3RvdHlwZS5taW5LZXkgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubWluKCkua2V5O1xyXG4gICAgfTtcclxuICAgIC8vIFJldHVybnMgdGhlIG1heGltdW0ga2V5IGluIHRoZSB0cmVlLlxyXG4gICAgTExSQk5vZGUucHJvdG90eXBlLm1heEtleSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAodGhpcy5yaWdodC5pc0VtcHR5KCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMua2V5O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucmlnaHQubWF4S2V5KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8vIFJldHVybnMgbmV3IHRyZWUsIHdpdGggdGhlIGtleS92YWx1ZSBhZGRlZC5cclxuICAgIExMUkJOb2RlLnByb3RvdHlwZS5pbnNlcnQgPSBmdW5jdGlvbiAoa2V5LCB2YWx1ZSwgY29tcGFyYXRvcikge1xyXG4gICAgICAgIHZhciBuID0gdGhpcztcclxuICAgICAgICB2YXIgY21wID0gY29tcGFyYXRvcihrZXksIG4ua2V5KTtcclxuICAgICAgICBpZiAoY21wIDwgMCkge1xyXG4gICAgICAgICAgICBuID0gbi5jb3B5KG51bGwsIG51bGwsIG51bGwsIG4ubGVmdC5pbnNlcnQoa2V5LCB2YWx1ZSwgY29tcGFyYXRvciksIG51bGwpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChjbXAgPT09IDApIHtcclxuICAgICAgICAgICAgbiA9IG4uY29weShudWxsLCB2YWx1ZSwgbnVsbCwgbnVsbCwgbnVsbCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBuID0gbi5jb3B5KG51bGwsIG51bGwsIG51bGwsIG51bGwsIG4ucmlnaHQuaW5zZXJ0KGtleSwgdmFsdWUsIGNvbXBhcmF0b3IpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG4uZml4VXAoKTtcclxuICAgIH07XHJcbiAgICBMTFJCTm9kZS5wcm90b3R5cGUucmVtb3ZlTWluID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmxlZnQuaXNFbXB0eSgpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBMTFJCTm9kZS5FTVBUWTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIG4gPSB0aGlzO1xyXG4gICAgICAgIGlmICghbi5sZWZ0LmlzUmVkKCkgJiYgIW4ubGVmdC5sZWZ0LmlzUmVkKCkpIHtcclxuICAgICAgICAgICAgbiA9IG4ubW92ZVJlZExlZnQoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbiA9IG4uY29weShudWxsLCBudWxsLCBudWxsLCBuLmxlZnQucmVtb3ZlTWluKCksIG51bGwpO1xyXG4gICAgICAgIHJldHVybiBuLmZpeFVwKCk7XHJcbiAgICB9O1xyXG4gICAgLy8gUmV0dXJucyBuZXcgdHJlZSwgd2l0aCB0aGUgc3BlY2lmaWVkIGl0ZW0gcmVtb3ZlZC5cclxuICAgIExMUkJOb2RlLnByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbiAoa2V5LCBjb21wYXJhdG9yKSB7XHJcbiAgICAgICAgdmFyIHNtYWxsZXN0O1xyXG4gICAgICAgIHZhciBuID0gdGhpcztcclxuICAgICAgICBpZiAoY29tcGFyYXRvcihrZXksIG4ua2V5KSA8IDApIHtcclxuICAgICAgICAgICAgaWYgKCFuLmxlZnQuaXNFbXB0eSgpICYmICFuLmxlZnQuaXNSZWQoKSAmJiAhbi5sZWZ0LmxlZnQuaXNSZWQoKSkge1xyXG4gICAgICAgICAgICAgICAgbiA9IG4ubW92ZVJlZExlZnQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBuID0gbi5jb3B5KG51bGwsIG51bGwsIG51bGwsIG4ubGVmdC5yZW1vdmUoa2V5LCBjb21wYXJhdG9yKSwgbnVsbCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAobi5sZWZ0LmlzUmVkKCkpIHtcclxuICAgICAgICAgICAgICAgIG4gPSBuLnJvdGF0ZVJpZ2h0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKCFuLnJpZ2h0LmlzRW1wdHkoKSAmJiAhbi5yaWdodC5pc1JlZCgpICYmICFuLnJpZ2h0LmxlZnQuaXNSZWQoKSkge1xyXG4gICAgICAgICAgICAgICAgbiA9IG4ubW92ZVJlZFJpZ2h0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGNvbXBhcmF0b3Ioa2V5LCBuLmtleSkgPT09IDApIHtcclxuICAgICAgICAgICAgICAgIGlmIChuLnJpZ2h0LmlzRW1wdHkoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBMTFJCTm9kZS5FTVBUWTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHNtYWxsZXN0ID0gbi5yaWdodC5taW4oKTtcclxuICAgICAgICAgICAgICAgICAgICBuID0gbi5jb3B5KHNtYWxsZXN0LmtleSwgc21hbGxlc3QudmFsdWUsIG51bGwsIG51bGwsIG4ucmlnaHQucmVtb3ZlTWluKCkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG4gPSBuLmNvcHkobnVsbCwgbnVsbCwgbnVsbCwgbnVsbCwgbi5yaWdodC5yZW1vdmUoa2V5LCBjb21wYXJhdG9yKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBuLmZpeFVwKCk7XHJcbiAgICB9O1xyXG4gICAgTExSQk5vZGUucHJvdG90eXBlLmlzUmVkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNvbG9yO1xyXG4gICAgfTtcclxuICAgIC8vIFJldHVybnMgbmV3IHRyZWUgYWZ0ZXIgcGVyZm9ybWluZyBhbnkgbmVlZGVkIHJvdGF0aW9ucy5cclxuICAgIExMUkJOb2RlLnByb3RvdHlwZS5maXhVcCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgbiA9IHRoaXM7XHJcbiAgICAgICAgaWYgKG4ucmlnaHQuaXNSZWQoKSAmJiAhbi5sZWZ0LmlzUmVkKCkpIHtcclxuICAgICAgICAgICAgbiA9IG4ucm90YXRlTGVmdCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAobi5sZWZ0LmlzUmVkKCkgJiYgbi5sZWZ0LmxlZnQuaXNSZWQoKSkge1xyXG4gICAgICAgICAgICBuID0gbi5yb3RhdGVSaWdodCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAobi5sZWZ0LmlzUmVkKCkgJiYgbi5yaWdodC5pc1JlZCgpKSB7XHJcbiAgICAgICAgICAgIG4gPSBuLmNvbG9yRmxpcCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbjtcclxuICAgIH07XHJcbiAgICBMTFJCTm9kZS5wcm90b3R5cGUubW92ZVJlZExlZnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIG4gPSB0aGlzLmNvbG9yRmxpcCgpO1xyXG4gICAgICAgIGlmIChuLnJpZ2h0LmxlZnQuaXNSZWQoKSkge1xyXG4gICAgICAgICAgICBuID0gbi5jb3B5KG51bGwsIG51bGwsIG51bGwsIG51bGwsIG4ucmlnaHQucm90YXRlUmlnaHQoKSk7XHJcbiAgICAgICAgICAgIG4gPSBuLnJvdGF0ZUxlZnQoKTtcclxuICAgICAgICAgICAgbiA9IG4uY29sb3JGbGlwKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBuO1xyXG4gICAgfTtcclxuICAgIExMUkJOb2RlLnByb3RvdHlwZS5tb3ZlUmVkUmlnaHQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIG4gPSB0aGlzLmNvbG9yRmxpcCgpO1xyXG4gICAgICAgIGlmIChuLmxlZnQubGVmdC5pc1JlZCgpKSB7XHJcbiAgICAgICAgICAgIG4gPSBuLnJvdGF0ZVJpZ2h0KCk7XHJcbiAgICAgICAgICAgIG4gPSBuLmNvbG9yRmxpcCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbjtcclxuICAgIH07XHJcbiAgICBMTFJCTm9kZS5wcm90b3R5cGUucm90YXRlTGVmdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgbmwgPSB0aGlzLmNvcHkobnVsbCwgbnVsbCwgTExSQk5vZGUuUkVELCBudWxsLCB0aGlzLnJpZ2h0LmxlZnQpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnJpZ2h0LmNvcHkobnVsbCwgbnVsbCwgdGhpcy5jb2xvciwgbmwsIG51bGwpO1xyXG4gICAgfTtcclxuICAgIExMUkJOb2RlLnByb3RvdHlwZS5yb3RhdGVSaWdodCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgbnIgPSB0aGlzLmNvcHkobnVsbCwgbnVsbCwgTExSQk5vZGUuUkVELCB0aGlzLmxlZnQucmlnaHQsIG51bGwpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmxlZnQuY29weShudWxsLCBudWxsLCB0aGlzLmNvbG9yLCBudWxsLCBucik7XHJcbiAgICB9O1xyXG4gICAgTExSQk5vZGUucHJvdG90eXBlLmNvbG9yRmxpcCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgbGVmdCA9IHRoaXMubGVmdC5jb3B5KG51bGwsIG51bGwsICF0aGlzLmxlZnQuY29sb3IsIG51bGwsIG51bGwpO1xyXG4gICAgICAgIHZhciByaWdodCA9IHRoaXMucmlnaHQuY29weShudWxsLCBudWxsLCAhdGhpcy5yaWdodC5jb2xvciwgbnVsbCwgbnVsbCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY29weShudWxsLCBudWxsLCAhdGhpcy5jb2xvciwgbGVmdCwgcmlnaHQpO1xyXG4gICAgfTtcclxuICAgIC8vIEZvciB0ZXN0aW5nLlxyXG4gICAgTExSQk5vZGUucHJvdG90eXBlLmNoZWNrTWF4RGVwdGggPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGJsYWNrRGVwdGggPSB0aGlzLmNoZWNrKCk7XHJcbiAgICAgICAgaWYgKE1hdGgucG93KDIuMCwgYmxhY2tEZXB0aCkgPD0gdGhpcy5zaXplICsgMSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLy8gSW4gYSBiYWxhbmNlZCBSQiB0cmVlLCB0aGUgYmxhY2stZGVwdGggKG51bWJlciBvZiBibGFjayBub2RlcykgZnJvbSByb290IHRvXHJcbiAgICAvLyBsZWF2ZXMgaXMgZXF1YWwgb24gYm90aCBzaWRlcy4gIFRoaXMgZnVuY3Rpb24gdmVyaWZpZXMgdGhhdCBvciBhc3NlcnRzLlxyXG4gICAgTExSQk5vZGUucHJvdG90eXBlLmNoZWNrID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmlzUmVkKCkgJiYgdGhpcy5sZWZ0LmlzUmVkKCkpIHtcclxuICAgICAgICAgICAgdGhyb3cgZmFpbCgnUmVkIG5vZGUgaGFzIHJlZCBjaGlsZCgnICsgdGhpcy5rZXkgKyAnLCcgKyB0aGlzLnZhbHVlICsgJyknKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMucmlnaHQuaXNSZWQoKSkge1xyXG4gICAgICAgICAgICB0aHJvdyBmYWlsKCdSaWdodCBjaGlsZCBvZiAoJyArIHRoaXMua2V5ICsgJywnICsgdGhpcy52YWx1ZSArICcpIGlzIHJlZCcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgYmxhY2tEZXB0aCA9IHRoaXMubGVmdC5jaGVjaygpO1xyXG4gICAgICAgIGlmIChibGFja0RlcHRoICE9PSB0aGlzLnJpZ2h0LmNoZWNrKCkpIHtcclxuICAgICAgICAgICAgdGhyb3cgZmFpbCgnQmxhY2sgZGVwdGhzIGRpZmZlcicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIGJsYWNrRGVwdGggKyAodGhpcy5pc1JlZCgpID8gMCA6IDEpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvLyBFbXB0eSBub2RlIGlzIHNoYXJlZCBiZXR3ZWVuIGFsbCBMTFJCIHRyZWVzLlxyXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuICAgIExMUkJOb2RlLkVNUFRZID0gbnVsbDtcclxuICAgIExMUkJOb2RlLlJFRCA9IHRydWU7XHJcbiAgICBMTFJCTm9kZS5CTEFDSyA9IGZhbHNlO1xyXG4gICAgcmV0dXJuIExMUkJOb2RlO1xyXG59KCkpOyAvLyBlbmQgTExSQk5vZGVcclxuLy8gUmVwcmVzZW50cyBhbiBlbXB0eSBub2RlIChhIGxlYWYgbm9kZSBpbiB0aGUgUmVkLUJsYWNrIFRyZWUpLlxyXG52YXIgTExSQkVtcHR5Tm9kZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIExMUkJFbXB0eU5vZGUoKSB7XHJcbiAgICAgICAgdGhpcy5zaXplID0gMDtcclxuICAgIH1cclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShMTFJCRW1wdHlOb2RlLnByb3RvdHlwZSwgXCJrZXlcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB0aHJvdyBmYWlsKCdMTFJCRW1wdHlOb2RlIGhhcyBubyBrZXkuJyk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTExSQkVtcHR5Tm9kZS5wcm90b3R5cGUsIFwidmFsdWVcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB0aHJvdyBmYWlsKCdMTFJCRW1wdHlOb2RlIGhhcyBubyB2YWx1ZS4nKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShMTFJCRW1wdHlOb2RlLnByb3RvdHlwZSwgXCJjb2xvclwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHRocm93IGZhaWwoJ0xMUkJFbXB0eU5vZGUgaGFzIG5vIGNvbG9yLicpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KExMUkJFbXB0eU5vZGUucHJvdG90eXBlLCBcImxlZnRcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB0aHJvdyBmYWlsKCdMTFJCRW1wdHlOb2RlIGhhcyBubyBsZWZ0IGNoaWxkLicpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KExMUkJFbXB0eU5vZGUucHJvdG90eXBlLCBcInJpZ2h0XCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdGhyb3cgZmFpbCgnTExSQkVtcHR5Tm9kZSBoYXMgbm8gcmlnaHQgY2hpbGQuJyk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICAvLyBSZXR1cm5zIGEgY29weSBvZiB0aGUgY3VycmVudCBub2RlLlxyXG4gICAgTExSQkVtcHR5Tm9kZS5wcm90b3R5cGUuY29weSA9IGZ1bmN0aW9uIChrZXksIHZhbHVlLCBjb2xvciwgbGVmdCwgcmlnaHQpIHtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH07XHJcbiAgICAvLyBSZXR1cm5zIGEgY29weSBvZiB0aGUgdHJlZSwgd2l0aCB0aGUgc3BlY2lmaWVkIGtleS92YWx1ZSBhZGRlZC5cclxuICAgIExMUkJFbXB0eU5vZGUucHJvdG90eXBlLmluc2VydCA9IGZ1bmN0aW9uIChrZXksIHZhbHVlLCBjb21wYXJhdG9yKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBMTFJCTm9kZShrZXksIHZhbHVlKTtcclxuICAgIH07XHJcbiAgICAvLyBSZXR1cm5zIGEgY29weSBvZiB0aGUgdHJlZSwgd2l0aCB0aGUgc3BlY2lmaWVkIGtleSByZW1vdmVkLlxyXG4gICAgTExSQkVtcHR5Tm9kZS5wcm90b3R5cGUucmVtb3ZlID0gZnVuY3Rpb24gKGtleSwgY29tcGFyYXRvcikge1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfTtcclxuICAgIExMUkJFbXB0eU5vZGUucHJvdG90eXBlLmlzRW1wdHkgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9O1xyXG4gICAgTExSQkVtcHR5Tm9kZS5wcm90b3R5cGUuaW5vcmRlclRyYXZlcnNhbCA9IGZ1bmN0aW9uIChhY3Rpb24pIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9O1xyXG4gICAgTExSQkVtcHR5Tm9kZS5wcm90b3R5cGUucmV2ZXJzZVRyYXZlcnNhbCA9IGZ1bmN0aW9uIChhY3Rpb24pIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9O1xyXG4gICAgTExSQkVtcHR5Tm9kZS5wcm90b3R5cGUubWluS2V5ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfTtcclxuICAgIExMUkJFbXB0eU5vZGUucHJvdG90eXBlLm1heEtleSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH07XHJcbiAgICBMTFJCRW1wdHlOb2RlLnByb3RvdHlwZS5pc1JlZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9O1xyXG4gICAgLy8gRm9yIHRlc3RpbmcuXHJcbiAgICBMTFJCRW1wdHlOb2RlLnByb3RvdHlwZS5jaGVja01heERlcHRoID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfTtcclxuICAgIExMUkJFbXB0eU5vZGUucHJvdG90eXBlLmNoZWNrID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiAwO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBMTFJCRW1wdHlOb2RlO1xyXG59KCkpOyAvLyBlbmQgTExSQkVtcHR5Tm9kZVxyXG5MTFJCTm9kZS5FTVBUWSA9IG5ldyBMTFJCRW1wdHlOb2RlKCk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogU29ydGVkU2V0IGlzIGFuIGltbXV0YWJsZSAoY29weS1vbi13cml0ZSkgY29sbGVjdGlvbiB0aGF0IGhvbGRzIGVsZW1lbnRzXHJcbiAqIGluIG9yZGVyIHNwZWNpZmllZCBieSB0aGUgcHJvdmlkZWQgY29tcGFyYXRvci5cclxuICpcclxuICogTk9URTogaWYgcHJvdmlkZWQgY29tcGFyYXRvciByZXR1cm5zIDAgZm9yIHR3byBlbGVtZW50cywgd2UgY29uc2lkZXIgdGhlbSB0b1xyXG4gKiBiZSBlcXVhbCFcclxuICovXHJcbnZhciBTb3J0ZWRTZXQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBTb3J0ZWRTZXQoY29tcGFyYXRvcikge1xyXG4gICAgICAgIHRoaXMuY29tcGFyYXRvciA9IGNvbXBhcmF0b3I7XHJcbiAgICAgICAgdGhpcy5kYXRhID0gbmV3IFNvcnRlZE1hcCh0aGlzLmNvbXBhcmF0b3IpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGVzIGEgU29ydGVkU2V0IGZyb20gdGhlIGtleXMgb2YgdGhlIG1hcC5cclxuICAgICAqIFRoaXMgaXMgY3VycmVudGx5IGltcGxlbWVudGVkIGFzIGFuIE8obikgY29weS5cclxuICAgICAqL1xyXG4gICAgU29ydGVkU2V0LmZyb21NYXBLZXlzID0gZnVuY3Rpb24gKG1hcCkge1xyXG4gICAgICAgIHZhciBrZXlzID0gbmV3IFNvcnRlZFNldChtYXAuY29tcGFyYXRvcik7XHJcbiAgICAgICAgbWFwLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgICAgICBrZXlzID0ga2V5cy5hZGQoa2V5KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4ga2V5cztcclxuICAgIH07XHJcbiAgICBTb3J0ZWRTZXQucHJvdG90eXBlLmhhcyA9IGZ1bmN0aW9uIChlbGVtKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YS5nZXQoZWxlbSkgIT09IG51bGw7XHJcbiAgICB9O1xyXG4gICAgU29ydGVkU2V0LnByb3RvdHlwZS5maXJzdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5kYXRhLm1pbktleSgpO1xyXG4gICAgfTtcclxuICAgIFNvcnRlZFNldC5wcm90b3R5cGUubGFzdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5kYXRhLm1heEtleSgpO1xyXG4gICAgfTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTb3J0ZWRTZXQucHJvdG90eXBlLCBcInNpemVcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kYXRhLnNpemU7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBTb3J0ZWRTZXQucHJvdG90eXBlLmluZGV4T2YgPSBmdW5jdGlvbiAoZWxlbSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRhdGEuaW5kZXhPZihlbGVtKTtcclxuICAgIH07XHJcbiAgICAvKiogSXRlcmF0ZXMgZWxlbWVudHMgaW4gb3JkZXIgZGVmaW5lZCBieSBcImNvbXBhcmF0b3JcIiAqL1xyXG4gICAgU29ydGVkU2V0LnByb3RvdHlwZS5mb3JFYWNoID0gZnVuY3Rpb24gKGNiKSB7XHJcbiAgICAgICAgdGhpcy5kYXRhLmlub3JkZXJUcmF2ZXJzYWwoZnVuY3Rpb24gKGssIHYpIHtcclxuICAgICAgICAgICAgY2Ioayk7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKiogSXRlcmF0ZXMgb3ZlciBgZWxlbWBzIHN1Y2ggdGhhdDogcmFuZ2VbMF0gPD0gZWxlbSA8IHJhbmdlWzFdLiAqL1xyXG4gICAgU29ydGVkU2V0LnByb3RvdHlwZS5mb3JFYWNoSW5SYW5nZSA9IGZ1bmN0aW9uIChyYW5nZSwgY2IpIHtcclxuICAgICAgICB2YXIgaXRlciA9IHRoaXMuZGF0YS5nZXRJdGVyYXRvckZyb20ocmFuZ2VbMF0pO1xyXG4gICAgICAgIHdoaWxlIChpdGVyLmhhc05leHQoKSkge1xyXG4gICAgICAgICAgICB2YXIgZWxlbSA9IGl0ZXIuZ2V0TmV4dCgpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5jb21wYXJhdG9yKGVsZW0ua2V5LCByYW5nZVsxXSkgPj0gMCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNiKGVsZW0ua2V5KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBJdGVyYXRlcyBvdmVyIGBlbGVtYHMgc3VjaCB0aGF0OiBzdGFydCA8PSBlbGVtIHVudGlsIGZhbHNlIGlzIHJldHVybmVkLlxyXG4gICAgICovXHJcbiAgICBTb3J0ZWRTZXQucHJvdG90eXBlLmZvckVhY2hXaGlsZSA9IGZ1bmN0aW9uIChjYiwgc3RhcnQpIHtcclxuICAgICAgICB2YXIgaXRlcjtcclxuICAgICAgICBpZiAoc3RhcnQgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBpdGVyID0gdGhpcy5kYXRhLmdldEl0ZXJhdG9yRnJvbShzdGFydCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBpdGVyID0gdGhpcy5kYXRhLmdldEl0ZXJhdG9yKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHdoaWxlIChpdGVyLmhhc05leHQoKSkge1xyXG4gICAgICAgICAgICB2YXIgZWxlbSA9IGl0ZXIuZ2V0TmV4dCgpO1xyXG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gY2IoZWxlbS5rZXkpO1xyXG4gICAgICAgICAgICBpZiAoIXJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKiBGaW5kcyB0aGUgbGVhc3QgZWxlbWVudCBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gYGVsZW1gLiAqL1xyXG4gICAgU29ydGVkU2V0LnByb3RvdHlwZS5maXJzdEFmdGVyT3JFcXVhbCA9IGZ1bmN0aW9uIChlbGVtKSB7XHJcbiAgICAgICAgdmFyIGl0ZXIgPSB0aGlzLmRhdGEuZ2V0SXRlcmF0b3JGcm9tKGVsZW0pO1xyXG4gICAgICAgIHJldHVybiBpdGVyLmhhc05leHQoKSA/IGl0ZXIuZ2V0TmV4dCgpLmtleSA6IG51bGw7XHJcbiAgICB9O1xyXG4gICAgU29ydGVkU2V0LnByb3RvdHlwZS5nZXRJdGVyYXRvciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFNvcnRlZFNldEl0ZXJhdG9yKHRoaXMuZGF0YS5nZXRJdGVyYXRvcigpKTtcclxuICAgIH07XHJcbiAgICBTb3J0ZWRTZXQucHJvdG90eXBlLmdldEl0ZXJhdG9yRnJvbSA9IGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFNvcnRlZFNldEl0ZXJhdG9yKHRoaXMuZGF0YS5nZXRJdGVyYXRvckZyb20oa2V5KSk7XHJcbiAgICB9O1xyXG4gICAgLyoqIEluc2VydHMgb3IgdXBkYXRlcyBhbiBlbGVtZW50ICovXHJcbiAgICBTb3J0ZWRTZXQucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uIChlbGVtKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY29weSh0aGlzLmRhdGEucmVtb3ZlKGVsZW0pLmluc2VydChlbGVtLCB0cnVlKSk7XHJcbiAgICB9O1xyXG4gICAgLyoqIERlbGV0ZXMgYW4gZWxlbWVudCAqL1xyXG4gICAgU29ydGVkU2V0LnByb3RvdHlwZS5kZWxldGUgPSBmdW5jdGlvbiAoZWxlbSkge1xyXG4gICAgICAgIGlmICghdGhpcy5oYXMoZWxlbSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLmNvcHkodGhpcy5kYXRhLnJlbW92ZShlbGVtKSk7XHJcbiAgICB9O1xyXG4gICAgU29ydGVkU2V0LnByb3RvdHlwZS5pc0VtcHR5ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRhdGEuaXNFbXB0eSgpO1xyXG4gICAgfTtcclxuICAgIFNvcnRlZFNldC5wcm90b3R5cGUudW5pb25XaXRoID0gZnVuY3Rpb24gKG90aGVyKSB7XHJcbiAgICAgICAgdmFyIHJlc3VsdCA9IHRoaXM7XHJcbiAgICAgICAgb3RoZXIuZm9yRWFjaChmdW5jdGlvbiAoZWxlbSkge1xyXG4gICAgICAgICAgICByZXN1bHQgPSByZXN1bHQuYWRkKGVsZW0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9O1xyXG4gICAgU29ydGVkU2V0LnByb3RvdHlwZS5pc0VxdWFsID0gZnVuY3Rpb24gKG90aGVyKSB7XHJcbiAgICAgICAgaWYgKCEob3RoZXIgaW5zdGFuY2VvZiBTb3J0ZWRTZXQpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuc2l6ZSAhPT0gb3RoZXIuc2l6ZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciB0aGlzSXQgPSB0aGlzLmRhdGEuZ2V0SXRlcmF0b3IoKTtcclxuICAgICAgICB2YXIgb3RoZXJJdCA9IG90aGVyLmRhdGEuZ2V0SXRlcmF0b3IoKTtcclxuICAgICAgICB3aGlsZSAodGhpc0l0Lmhhc05leHQoKSkge1xyXG4gICAgICAgICAgICB2YXIgdGhpc0VsZW0gPSB0aGlzSXQuZ2V0TmV4dCgpLmtleTtcclxuICAgICAgICAgICAgdmFyIG90aGVyRWxlbSA9IG90aGVySXQuZ2V0TmV4dCgpLmtleTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuY29tcGFyYXRvcih0aGlzRWxlbSwgb3RoZXJFbGVtKSAhPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfTtcclxuICAgIFNvcnRlZFNldC5wcm90b3R5cGUudG9BcnJheSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgcmVzID0gW107XHJcbiAgICAgICAgdGhpcy5mb3JFYWNoKGZ1bmN0aW9uICh0YXJnZXRJZCkge1xyXG4gICAgICAgICAgICByZXMucHVzaCh0YXJnZXRJZCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHJlcztcclxuICAgIH07XHJcbiAgICBTb3J0ZWRTZXQucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciByZXN1bHQgPSBbXTtcclxuICAgICAgICB0aGlzLmZvckVhY2goZnVuY3Rpb24gKGVsZW0pIHsgcmV0dXJuIHJlc3VsdC5wdXNoKGVsZW0pOyB9KTtcclxuICAgICAgICByZXR1cm4gJ1NvcnRlZFNldCgnICsgcmVzdWx0LnRvU3RyaW5nKCkgKyAnKSc7XHJcbiAgICB9O1xyXG4gICAgU29ydGVkU2V0LnByb3RvdHlwZS5jb3B5ID0gZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IFNvcnRlZFNldCh0aGlzLmNvbXBhcmF0b3IpO1xyXG4gICAgICAgIHJlc3VsdC5kYXRhID0gZGF0YTtcclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfTtcclxuICAgIHJldHVybiBTb3J0ZWRTZXQ7XHJcbn0oKSk7XHJcbnZhciBTb3J0ZWRTZXRJdGVyYXRvciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFNvcnRlZFNldEl0ZXJhdG9yKGl0ZXIpIHtcclxuICAgICAgICB0aGlzLml0ZXIgPSBpdGVyO1xyXG4gICAgfVxyXG4gICAgU29ydGVkU2V0SXRlcmF0b3IucHJvdG90eXBlLmdldE5leHQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaXRlci5nZXROZXh0KCkua2V5O1xyXG4gICAgfTtcclxuICAgIFNvcnRlZFNldEl0ZXJhdG9yLnByb3RvdHlwZS5oYXNOZXh0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLml0ZXIuaGFzTmV4dCgpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBTb3J0ZWRTZXRJdGVyYXRvcjtcclxufSgpKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnZhciBFTVBUWV9NQVlCRV9ET0NVTUVOVF9NQVAgPSBuZXcgU29ydGVkTWFwKERvY3VtZW50S2V5LmNvbXBhcmF0b3IpO1xyXG5mdW5jdGlvbiBtYXliZURvY3VtZW50TWFwKCkge1xyXG4gICAgcmV0dXJuIEVNUFRZX01BWUJFX0RPQ1VNRU5UX01BUDtcclxufVxyXG5mdW5jdGlvbiBudWxsYWJsZU1heWJlRG9jdW1lbnRNYXAoKSB7XHJcbiAgICByZXR1cm4gbWF5YmVEb2N1bWVudE1hcCgpO1xyXG59XHJcbnZhciBFTVBUWV9ET0NVTUVOVF9NQVAgPSBuZXcgU29ydGVkTWFwKERvY3VtZW50S2V5LmNvbXBhcmF0b3IpO1xyXG5mdW5jdGlvbiBkb2N1bWVudE1hcCgpIHtcclxuICAgIHJldHVybiBFTVBUWV9ET0NVTUVOVF9NQVA7XHJcbn1cclxudmFyIEVNUFRZX0RPQ1VNRU5UX1ZFUlNJT05fTUFQID0gbmV3IFNvcnRlZE1hcChEb2N1bWVudEtleS5jb21wYXJhdG9yKTtcclxuZnVuY3Rpb24gZG9jdW1lbnRWZXJzaW9uTWFwKCkge1xyXG4gICAgcmV0dXJuIEVNUFRZX0RPQ1VNRU5UX1ZFUlNJT05fTUFQO1xyXG59XHJcbnZhciBFTVBUWV9ET0NVTUVOVF9LRVlfU0VUID0gbmV3IFNvcnRlZFNldChEb2N1bWVudEtleS5jb21wYXJhdG9yKTtcclxuZnVuY3Rpb24gZG9jdW1lbnRLZXlTZXQoKSB7XHJcbiAgICB2YXIga2V5cyA9IFtdO1xyXG4gICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICBrZXlzW19pXSA9IGFyZ3VtZW50c1tfaV07XHJcbiAgICB9XHJcbiAgICB2YXIgc2V0ID0gRU1QVFlfRE9DVU1FTlRfS0VZX1NFVDtcclxuICAgIGZvciAodmFyIF9hID0gMCwga2V5c18xID0ga2V5czsgX2EgPCBrZXlzXzEubGVuZ3RoOyBfYSsrKSB7XHJcbiAgICAgICAgdmFyIGtleSA9IGtleXNfMVtfYV07XHJcbiAgICAgICAgc2V0ID0gc2V0LmFkZChrZXkpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHNldDtcclxufVxyXG52YXIgRU1QVFlfVEFSR0VUX0lEX1NFVCA9IG5ldyBTb3J0ZWRTZXQocHJpbWl0aXZlQ29tcGFyYXRvcik7XHJcbmZ1bmN0aW9uIHRhcmdldElkU2V0KCkge1xyXG4gICAgcmV0dXJuIEVNUFRZX1RBUkdFVF9JRF9TRVQ7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnZhciBCQVRDSElEX1VOS05PV04gPSAtMTtcclxuLyoqXHJcbiAqIEEgYmF0Y2ggb2YgbXV0YXRpb25zIHRoYXQgd2lsbCBiZSBzZW50IGFzIG9uZSB1bml0IHRvIHRoZSBiYWNrZW5kLlxyXG4gKi9cclxudmFyIE11dGF0aW9uQmF0Y2ggPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSBiYXRjaElkIFRoZSB1bmlxdWUgSUQgb2YgdGhpcyBtdXRhdGlvbiBiYXRjaC5cclxuICAgICAqIEBwYXJhbSBsb2NhbFdyaXRlVGltZSBUaGUgb3JpZ2luYWwgd3JpdGUgdGltZSBvZiB0aGlzIG11dGF0aW9uLlxyXG4gICAgICogQHBhcmFtIGJhc2VNdXRhdGlvbnMgTXV0YXRpb25zIHRoYXQgYXJlIHVzZWQgdG8gcG9wdWxhdGUgdGhlIGJhc2VcclxuICAgICAqIHZhbHVlcyB3aGVuIHRoaXMgbXV0YXRpb24gaXMgYXBwbGllZCBsb2NhbGx5LiBUaGlzIGNhbiBiZSB1c2VkIHRvIGxvY2FsbHlcclxuICAgICAqIG92ZXJ3cml0ZSB2YWx1ZXMgdGhhdCBhcmUgcGVyc2lzdGVkIGluIHRoZSByZW1vdGUgZG9jdW1lbnQgY2FjaGUuIEJhc2VcclxuICAgICAqIG11dGF0aW9ucyBhcmUgbmV2ZXIgc2VudCB0byB0aGUgYmFja2VuZC5cclxuICAgICAqIEBwYXJhbSBtdXRhdGlvbnMgVGhlIHVzZXItcHJvdmlkZWQgbXV0YXRpb25zIGluIHRoaXMgbXV0YXRpb24gYmF0Y2guXHJcbiAgICAgKiBVc2VyLXByb3ZpZGVkIG11dGF0aW9ucyBhcmUgYXBwbGllZCBib3RoIGxvY2FsbHkgYW5kIHJlbW90ZWx5IG9uIHRoZVxyXG4gICAgICogYmFja2VuZC5cclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gTXV0YXRpb25CYXRjaChiYXRjaElkLCBsb2NhbFdyaXRlVGltZSwgYmFzZU11dGF0aW9ucywgbXV0YXRpb25zKSB7XHJcbiAgICAgICAgdGhpcy5iYXRjaElkID0gYmF0Y2hJZDtcclxuICAgICAgICB0aGlzLmxvY2FsV3JpdGVUaW1lID0gbG9jYWxXcml0ZVRpbWU7XHJcbiAgICAgICAgdGhpcy5iYXNlTXV0YXRpb25zID0gYmFzZU11dGF0aW9ucztcclxuICAgICAgICB0aGlzLm11dGF0aW9ucyA9IG11dGF0aW9ucztcclxuICAgICAgICBhc3NlcnQobXV0YXRpb25zLmxlbmd0aCA+IDAsICdDYW5ub3QgY3JlYXRlIGFuIGVtcHR5IG11dGF0aW9uIGJhdGNoJyk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEFwcGxpZXMgYWxsIHRoZSBtdXRhdGlvbnMgaW4gdGhpcyBNdXRhdGlvbkJhdGNoIHRvIHRoZSBzcGVjaWZpZWQgZG9jdW1lbnRcclxuICAgICAqIHRvIGNyZWF0ZSBhIG5ldyByZW1vdGUgZG9jdW1lbnRcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gZG9jS2V5IFRoZSBrZXkgb2YgdGhlIGRvY3VtZW50IHRvIGFwcGx5IG11dGF0aW9ucyB0by5cclxuICAgICAqIEBwYXJhbSBtYXliZURvYyBUaGUgZG9jdW1lbnQgdG8gYXBwbHkgbXV0YXRpb25zIHRvLlxyXG4gICAgICogQHBhcmFtIGJhdGNoUmVzdWx0IFRoZSByZXN1bHQgb2YgYXBwbHlpbmcgdGhlIE11dGF0aW9uQmF0Y2ggdG8gdGhlXHJcbiAgICAgKiBiYWNrZW5kLlxyXG4gICAgICovXHJcbiAgICBNdXRhdGlvbkJhdGNoLnByb3RvdHlwZS5hcHBseVRvUmVtb3RlRG9jdW1lbnQgPSBmdW5jdGlvbiAoZG9jS2V5LCBtYXliZURvYywgYmF0Y2hSZXN1bHQpIHtcclxuICAgICAgICBpZiAobWF5YmVEb2MpIHtcclxuICAgICAgICAgICAgYXNzZXJ0KG1heWJlRG9jLmtleS5pc0VxdWFsKGRvY0tleSksIFwiYXBwbHlUb1JlbW90ZURvY3VtZW50OiBrZXkgXCIgKyBkb2NLZXkgKyBcIiBzaG91bGQgbWF0Y2ggbWF5YmVEb2Mga2V5XFxuICAgICAgICBcIiArIG1heWJlRG9jLmtleSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBtdXRhdGlvblJlc3VsdHMgPSBiYXRjaFJlc3VsdC5tdXRhdGlvblJlc3VsdHM7XHJcbiAgICAgICAgYXNzZXJ0KG11dGF0aW9uUmVzdWx0cy5sZW5ndGggPT09IHRoaXMubXV0YXRpb25zLmxlbmd0aCwgXCJNaXNtYXRjaCBiZXR3ZWVuIG11dGF0aW9ucyBsZW5ndGhcXG4gICAgICAoXCIgKyB0aGlzLm11dGF0aW9ucy5sZW5ndGggKyBcIikgYW5kIG11dGF0aW9uIHJlc3VsdHMgbGVuZ3RoXFxuICAgICAgKFwiICsgbXV0YXRpb25SZXN1bHRzLmxlbmd0aCArIFwiKS5cIik7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLm11dGF0aW9ucy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB2YXIgbXV0YXRpb24gPSB0aGlzLm11dGF0aW9uc1tpXTtcclxuICAgICAgICAgICAgaWYgKG11dGF0aW9uLmtleS5pc0VxdWFsKGRvY0tleSkpIHtcclxuICAgICAgICAgICAgICAgIHZhciBtdXRhdGlvblJlc3VsdCA9IG11dGF0aW9uUmVzdWx0c1tpXTtcclxuICAgICAgICAgICAgICAgIG1heWJlRG9jID0gbXV0YXRpb24uYXBwbHlUb1JlbW90ZURvY3VtZW50KG1heWJlRG9jLCBtdXRhdGlvblJlc3VsdCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG1heWJlRG9jO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQ29tcHV0ZXMgdGhlIGxvY2FsIHZpZXcgb2YgYSBkb2N1bWVudCBnaXZlbiBhbGwgdGhlIG11dGF0aW9ucyBpbiB0aGlzXHJcbiAgICAgKiBiYXRjaC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gZG9jS2V5IFRoZSBrZXkgb2YgdGhlIGRvY3VtZW50IHRvIGFwcGx5IG11dGF0aW9ucyB0by5cclxuICAgICAqIEBwYXJhbSBtYXliZURvYyBUaGUgZG9jdW1lbnQgdG8gYXBwbHkgbXV0YXRpb25zIHRvLlxyXG4gICAgICovXHJcbiAgICBNdXRhdGlvbkJhdGNoLnByb3RvdHlwZS5hcHBseVRvTG9jYWxWaWV3ID0gZnVuY3Rpb24gKGRvY0tleSwgbWF5YmVEb2MpIHtcclxuICAgICAgICBpZiAobWF5YmVEb2MpIHtcclxuICAgICAgICAgICAgYXNzZXJ0KG1heWJlRG9jLmtleS5pc0VxdWFsKGRvY0tleSksIFwiYXBwbHlUb0xvY2FsRG9jdW1lbnQ6IGtleSBcIiArIGRvY0tleSArIFwiIHNob3VsZCBtYXRjaCBtYXliZURvYyBrZXlcXG4gICAgICAgIFwiICsgbWF5YmVEb2Mua2V5KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gRmlyc3QsIGFwcGx5IHRoZSBiYXNlIHN0YXRlLiBUaGlzIGFsbG93cyB1cyB0byBhcHBseSBub24taWRlbXBvdGVudFxyXG4gICAgICAgIC8vIHRyYW5zZm9ybSBhZ2FpbnN0IGEgY29uc2lzdGVudCBzZXQgb2YgdmFsdWVzLlxyXG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSB0aGlzLmJhc2VNdXRhdGlvbnM7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBtdXRhdGlvbiA9IF9hW19pXTtcclxuICAgICAgICAgICAgaWYgKG11dGF0aW9uLmtleS5pc0VxdWFsKGRvY0tleSkpIHtcclxuICAgICAgICAgICAgICAgIG1heWJlRG9jID0gbXV0YXRpb24uYXBwbHlUb0xvY2FsVmlldyhtYXliZURvYywgbWF5YmVEb2MsIHRoaXMubG9jYWxXcml0ZVRpbWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBiYXNlRG9jID0gbWF5YmVEb2M7XHJcbiAgICAgICAgLy8gU2Vjb25kLCBhcHBseSBhbGwgdXNlci1wcm92aWRlZCBtdXRhdGlvbnMuXHJcbiAgICAgICAgZm9yICh2YXIgX2IgPSAwLCBfYyA9IHRoaXMubXV0YXRpb25zOyBfYiA8IF9jLmxlbmd0aDsgX2IrKykge1xyXG4gICAgICAgICAgICB2YXIgbXV0YXRpb24gPSBfY1tfYl07XHJcbiAgICAgICAgICAgIGlmIChtdXRhdGlvbi5rZXkuaXNFcXVhbChkb2NLZXkpKSB7XHJcbiAgICAgICAgICAgICAgICBtYXliZURvYyA9IG11dGF0aW9uLmFwcGx5VG9Mb2NhbFZpZXcobWF5YmVEb2MsIGJhc2VEb2MsIHRoaXMubG9jYWxXcml0ZVRpbWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBtYXliZURvYztcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIENvbXB1dGVzIHRoZSBsb2NhbCB2aWV3IGZvciBhbGwgcHJvdmlkZWQgZG9jdW1lbnRzIGdpdmVuIHRoZSBtdXRhdGlvbnMgaW5cclxuICAgICAqIHRoaXMgYmF0Y2guXHJcbiAgICAgKi9cclxuICAgIE11dGF0aW9uQmF0Y2gucHJvdG90eXBlLmFwcGx5VG9Mb2NhbERvY3VtZW50U2V0ID0gZnVuY3Rpb24gKG1heWJlRG9jcykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgLy8gVE9ETyhtcnNjaG1pZHQpOiBUaGlzIGltcGxlbWVudGF0aW9uIGlzIE8obl4yKS4gSWYgd2UgYXBwbHkgdGhlIG11dGF0aW9uc1xyXG4gICAgICAgIC8vIGRpcmVjdGx5IChhcyBkb25lIGluIGBhcHBseVRvTG9jYWxWaWV3KClgKSwgd2UgY2FuIHJlZHVjZSB0aGUgY29tcGxleGl0eVxyXG4gICAgICAgIC8vIHRvIE8obikuXHJcbiAgICAgICAgdmFyIG11dGF0ZWREb2N1bWVudHMgPSBtYXliZURvY3M7XHJcbiAgICAgICAgdGhpcy5tdXRhdGlvbnMuZm9yRWFjaChmdW5jdGlvbiAobSkge1xyXG4gICAgICAgICAgICB2YXIgbXV0YXRlZERvY3VtZW50ID0gX3RoaXMuYXBwbHlUb0xvY2FsVmlldyhtLmtleSwgbWF5YmVEb2NzLmdldChtLmtleSkpO1xyXG4gICAgICAgICAgICBpZiAobXV0YXRlZERvY3VtZW50KSB7XHJcbiAgICAgICAgICAgICAgICBtdXRhdGVkRG9jdW1lbnRzID0gbXV0YXRlZERvY3VtZW50cy5pbnNlcnQobS5rZXksIG11dGF0ZWREb2N1bWVudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gbXV0YXRlZERvY3VtZW50cztcclxuICAgIH07XHJcbiAgICBNdXRhdGlvbkJhdGNoLnByb3RvdHlwZS5rZXlzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm11dGF0aW9ucy5yZWR1Y2UoZnVuY3Rpb24gKGtleXMsIG0pIHsgcmV0dXJuIGtleXMuYWRkKG0ua2V5KTsgfSwgZG9jdW1lbnRLZXlTZXQoKSk7XHJcbiAgICB9O1xyXG4gICAgTXV0YXRpb25CYXRjaC5wcm90b3R5cGUuaXNFcXVhbCA9IGZ1bmN0aW9uIChvdGhlcikge1xyXG4gICAgICAgIHJldHVybiAodGhpcy5iYXRjaElkID09PSBvdGhlci5iYXRjaElkICYmXHJcbiAgICAgICAgICAgIGFycmF5RXF1YWxzKHRoaXMubXV0YXRpb25zLCBvdGhlci5tdXRhdGlvbnMpICYmXHJcbiAgICAgICAgICAgIGFycmF5RXF1YWxzKHRoaXMuYmFzZU11dGF0aW9ucywgb3RoZXIuYmFzZU11dGF0aW9ucykpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBNdXRhdGlvbkJhdGNoO1xyXG59KCkpO1xyXG4vKiogVGhlIHJlc3VsdCBvZiBhcHBseWluZyBhIG11dGF0aW9uIGJhdGNoIHRvIHRoZSBiYWNrZW5kLiAqL1xyXG52YXIgTXV0YXRpb25CYXRjaFJlc3VsdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIE11dGF0aW9uQmF0Y2hSZXN1bHQoYmF0Y2gsIGNvbW1pdFZlcnNpb24sIG11dGF0aW9uUmVzdWx0cywgc3RyZWFtVG9rZW4sIFxyXG4gICAgLyoqXHJcbiAgICAgKiBBIHByZS1jb21wdXRlZCBtYXBwaW5nIGZyb20gZWFjaCBtdXRhdGVkIGRvY3VtZW50IHRvIHRoZSByZXN1bHRpbmdcclxuICAgICAqIHZlcnNpb24uXHJcbiAgICAgKi9cclxuICAgIGRvY1ZlcnNpb25zKSB7XHJcbiAgICAgICAgdGhpcy5iYXRjaCA9IGJhdGNoO1xyXG4gICAgICAgIHRoaXMuY29tbWl0VmVyc2lvbiA9IGNvbW1pdFZlcnNpb247XHJcbiAgICAgICAgdGhpcy5tdXRhdGlvblJlc3VsdHMgPSBtdXRhdGlvblJlc3VsdHM7XHJcbiAgICAgICAgdGhpcy5zdHJlYW1Ub2tlbiA9IHN0cmVhbVRva2VuO1xyXG4gICAgICAgIHRoaXMuZG9jVmVyc2lvbnMgPSBkb2NWZXJzaW9ucztcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhIG5ldyBNdXRhdGlvbkJhdGNoUmVzdWx0IGZvciB0aGUgZ2l2ZW4gYmF0Y2ggYW5kIHJlc3VsdHMuIFRoZXJlXHJcbiAgICAgKiBtdXN0IGJlIG9uZSByZXN1bHQgZm9yIGVhY2ggbXV0YXRpb24gaW4gdGhlIGJhdGNoLiBUaGlzIHN0YXRpYyBmYWN0b3J5XHJcbiAgICAgKiBjYWNoZXMgYSBkb2N1bWVudD0+dmVyc2lvbiBtYXBwaW5nIChkb2NWZXJzaW9ucykuXHJcbiAgICAgKi9cclxuICAgIE11dGF0aW9uQmF0Y2hSZXN1bHQuZnJvbSA9IGZ1bmN0aW9uIChiYXRjaCwgY29tbWl0VmVyc2lvbiwgcmVzdWx0cywgc3RyZWFtVG9rZW4pIHtcclxuICAgICAgICBhc3NlcnQoYmF0Y2gubXV0YXRpb25zLmxlbmd0aCA9PT0gcmVzdWx0cy5sZW5ndGgsICdNdXRhdGlvbnMgc2VudCAnICtcclxuICAgICAgICAgICAgYmF0Y2gubXV0YXRpb25zLmxlbmd0aCArXHJcbiAgICAgICAgICAgICcgbXVzdCBlcXVhbCByZXN1bHRzIHJlY2VpdmVkICcgK1xyXG4gICAgICAgICAgICByZXN1bHRzLmxlbmd0aCk7XHJcbiAgICAgICAgdmFyIHZlcnNpb25NYXAgPSBkb2N1bWVudFZlcnNpb25NYXAoKTtcclxuICAgICAgICB2YXIgbXV0YXRpb25zID0gYmF0Y2gubXV0YXRpb25zO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbXV0YXRpb25zLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHZlcnNpb25NYXAgPSB2ZXJzaW9uTWFwLmluc2VydChtdXRhdGlvbnNbaV0ua2V5LCByZXN1bHRzW2ldLnZlcnNpb24pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbmV3IE11dGF0aW9uQmF0Y2hSZXN1bHQoYmF0Y2gsIGNvbW1pdFZlcnNpb24sIHJlc3VsdHMsIHN0cmVhbVRva2VuLCB2ZXJzaW9uTWFwKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gTXV0YXRpb25CYXRjaFJlc3VsdDtcclxufSgpKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBQZXJzaXN0ZW5jZVByb21pc2U8PiBpcyBlc3NlbnRpYWxseSBhIHJlLWltcGxlbWVudGF0aW9uIG9mIFByb21pc2U8PiBleGNlcHRcclxuICogaXQgaGFzIGEgLm5leHQoKSBtZXRob2QgaW5zdGVhZCBvZiAudGhlbigpIGFuZCAubmV4dCgpIGFuZCAuY2F0Y2goKSBjYWxsYmFja3NcclxuICogYXJlIGV4ZWN1dGVkIHN5bmNocm9ub3VzbHkgd2hlbiBhIFBlcnNpc3RlbmNlUHJvbWlzZSByZXNvbHZlcyByYXRoZXIgdGhhblxyXG4gKiBhc3luY2hyb25vdXNseSAoUHJvbWlzZTw+IGltcGxlbWVudGF0aW9ucyB1c2Ugc2V0SW1tZWRpYXRlKCkgb3Igc2ltaWxhcikuXHJcbiAqXHJcbiAqIFRoaXMgaXMgbmVjZXNzYXJ5IHRvIGludGVyb3BlcmF0ZSB3aXRoIEluZGV4ZWREQiB3aGljaCB3aWxsIGF1dG9tYXRpY2FsbHlcclxuICogY29tbWl0IHRyYW5zYWN0aW9ucyBpZiBjb250cm9sIGlzIHJldHVybmVkIHRvIHRoZSBldmVudCBsb29wIHdpdGhvdXRcclxuICogc3luY2hyb25vdXNseSBpbml0aWF0aW5nIGFub3RoZXIgb3BlcmF0aW9uIG9uIHRoZSB0cmFuc2FjdGlvbi5cclxuICpcclxuICogTk9URTogLnRoZW4oKSBhbmQgLmNhdGNoKCkgb25seSBhbGxvdyBhIHNpbmdsZSBjb25zdW1lciwgdW5saWtlIG5vcm1hbFxyXG4gKiBQcm9taXNlcy5cclxuICovXHJcbnZhciBQZXJzaXN0ZW5jZVByb21pc2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBQZXJzaXN0ZW5jZVByb21pc2UoY2FsbGJhY2spIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIC8vIE5PVEU6IG5leHQvY2F0Y2hDYWxsYmFjayB3aWxsIGFsd2F5cyBwb2ludCB0byBvdXIgb3duIHdyYXBwZXIgZnVuY3Rpb25zLFxyXG4gICAgICAgIC8vIG5vdCB0aGUgdXNlcidzIHJhdyBuZXh0KCkgb3IgY2F0Y2goKSBjYWxsYmFja3MuXHJcbiAgICAgICAgdGhpcy5uZXh0Q2FsbGJhY2sgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuY2F0Y2hDYWxsYmFjayA9IG51bGw7XHJcbiAgICAgICAgLy8gV2hlbiB0aGUgb3BlcmF0aW9uIHJlc29sdmVzLCB3ZSdsbCBzZXQgcmVzdWx0IG9yIGVycm9yIGFuZCBtYXJrIGlzRG9uZS5cclxuICAgICAgICB0aGlzLnJlc3VsdCA9IHVuZGVmaW5lZDtcclxuICAgICAgICB0aGlzLmVycm9yID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIHRoaXMuaXNEb25lID0gZmFsc2U7XHJcbiAgICAgICAgLy8gU2V0IHRvIHRydWUgd2hlbiAudGhlbigpIG9yIC5jYXRjaCgpIGFyZSBjYWxsZWQgYW5kIHByZXZlbnRzIGFkZGl0aW9uYWxcclxuICAgICAgICAvLyBjaGFpbmluZy5cclxuICAgICAgICB0aGlzLmNhbGxiYWNrQXR0YWNoZWQgPSBmYWxzZTtcclxuICAgICAgICBjYWxsYmFjayhmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICAgICAgX3RoaXMuaXNEb25lID0gdHJ1ZTtcclxuICAgICAgICAgICAgX3RoaXMucmVzdWx0ID0gdmFsdWU7XHJcbiAgICAgICAgICAgIGlmIChfdGhpcy5uZXh0Q2FsbGJhY2spIHtcclxuICAgICAgICAgICAgICAgIC8vIHZhbHVlIHNob3VsZCBiZSBkZWZpbmVkIHVubGVzcyBUIGlzIFZvaWQsIGJ1dCB3ZSBjYW4ndCBleHByZXNzXHJcbiAgICAgICAgICAgICAgICAvLyB0aGF0IGluIHRoZSB0eXBlIHN5c3RlbS5cclxuICAgICAgICAgICAgICAgIF90aGlzLm5leHRDYWxsYmFjayh2YWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgX3RoaXMuaXNEb25lID0gdHJ1ZTtcclxuICAgICAgICAgICAgX3RoaXMuZXJyb3IgPSBlcnJvcjtcclxuICAgICAgICAgICAgaWYgKF90aGlzLmNhdGNoQ2FsbGJhY2spIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLmNhdGNoQ2FsbGJhY2soZXJyb3IpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBQZXJzaXN0ZW5jZVByb21pc2UucHJvdG90eXBlLmNhdGNoID0gZnVuY3Rpb24gKGZuKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubmV4dCh1bmRlZmluZWQsIGZuKTtcclxuICAgIH07XHJcbiAgICBQZXJzaXN0ZW5jZVByb21pc2UucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAobmV4dEZuLCBjYXRjaEZuKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBpZiAodGhpcy5jYWxsYmFja0F0dGFjaGVkKSB7XHJcbiAgICAgICAgICAgIGZhaWwoJ0NhbGxlZCBuZXh0KCkgb3IgY2F0Y2goKSB0d2ljZSBmb3IgUGVyc2lzdGVuY2VQcm9taXNlJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuY2FsbGJhY2tBdHRhY2hlZCA9IHRydWU7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNEb25lKSB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5lcnJvcikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMud3JhcFN1Y2Nlc3MobmV4dEZuLCB0aGlzLnJlc3VsdCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy53cmFwRmFpbHVyZShjYXRjaEZuLCB0aGlzLmVycm9yKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBQZXJzaXN0ZW5jZVByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMubmV4dENhbGxiYWNrID0gZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMud3JhcFN1Y2Nlc3MobmV4dEZuLCB2YWx1ZSkubmV4dChyZXNvbHZlLCByZWplY3QpO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIF90aGlzLmNhdGNoQ2FsbGJhY2sgPSBmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICBfdGhpcy53cmFwRmFpbHVyZShjYXRjaEZuLCBlcnJvcikubmV4dChyZXNvbHZlLCByZWplY3QpO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFBlcnNpc3RlbmNlUHJvbWlzZS5wcm90b3R5cGUudG9Qcm9taXNlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgX3RoaXMubmV4dChyZXNvbHZlLCByZWplY3QpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIFBlcnNpc3RlbmNlUHJvbWlzZS5wcm90b3R5cGUud3JhcFVzZXJGdW5jdGlvbiA9IGZ1bmN0aW9uIChmbikge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSBmbigpO1xyXG4gICAgICAgICAgICBpZiAocmVzdWx0IGluc3RhbmNlb2YgUGVyc2lzdGVuY2VQcm9taXNlKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKHJlc3VsdCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZWplY3QoZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFBlcnNpc3RlbmNlUHJvbWlzZS5wcm90b3R5cGUud3JhcFN1Y2Nlc3MgPSBmdW5jdGlvbiAobmV4dEZuLCB2YWx1ZSkge1xyXG4gICAgICAgIGlmIChuZXh0Rm4pIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMud3JhcFVzZXJGdW5jdGlvbihmdW5jdGlvbiAoKSB7IHJldHVybiBuZXh0Rm4odmFsdWUpOyB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIElmIHRoZXJlJ3Mgbm8gbmV4dEZuLCB0aGVuIFIgbXVzdCBiZSB0aGUgc2FtZSBhcyBUXHJcbiAgICAgICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSh2YWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFBlcnNpc3RlbmNlUHJvbWlzZS5wcm90b3R5cGUud3JhcEZhaWx1cmUgPSBmdW5jdGlvbiAoY2F0Y2hGbiwgZXJyb3IpIHtcclxuICAgICAgICBpZiAoY2F0Y2hGbikge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy53cmFwVXNlckZ1bmN0aW9uKGZ1bmN0aW9uICgpIHsgcmV0dXJuIGNhdGNoRm4oZXJyb3IpOyB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVqZWN0KGVycm9yKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUgPSBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQZXJzaXN0ZW5jZVByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICByZXNvbHZlKHJlc3VsdCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgUGVyc2lzdGVuY2VQcm9taXNlLnJlamVjdCA9IGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgIHJldHVybiBuZXcgUGVyc2lzdGVuY2VQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBQZXJzaXN0ZW5jZVByb21pc2Uud2FpdEZvciA9IGZ1bmN0aW9uIChcclxuICAgIC8vIEFjY2VwdCBhbGwgUHJvbWlzZSB0eXBlcyBpbiB3YWl0Rm9yKCkuXHJcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG4gICAgYWxsKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQZXJzaXN0ZW5jZVByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICB2YXIgZXhwZWN0ZWRDb3VudCA9IDA7XHJcbiAgICAgICAgICAgIHZhciByZXNvbHZlZENvdW50ID0gMDtcclxuICAgICAgICAgICAgdmFyIGRvbmUgPSBmYWxzZTtcclxuICAgICAgICAgICAgYWxsLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgICsrZXhwZWN0ZWRDb3VudDtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQubmV4dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgKytyZXNvbHZlZENvdW50O1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChkb25lICYmIHJlc29sdmVkQ291bnQgPT09IGV4cGVjdGVkQ291bnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnIpIHsgcmV0dXJuIHJlamVjdChlcnIpOyB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGRvbmUgPSB0cnVlO1xyXG4gICAgICAgICAgICBpZiAocmVzb2x2ZWRDb3VudCA9PT0gZXhwZWN0ZWRDb3VudCkge1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBHaXZlbiBhbiBhcnJheSBvZiBwcmVkaWNhdGUgZnVuY3Rpb25zIHRoYXQgYXN5bmNocm9ub3VzbHkgZXZhbHVhdGUgdG8gYVxyXG4gICAgICogYm9vbGVhbiwgaW1wbGVtZW50cyBhIHNob3J0LWNpcmN1aXRpbmcgYG9yYCBiZXR3ZWVuIHRoZSByZXN1bHRzLiBQcmVkaWNhdGVzXHJcbiAgICAgKiB3aWxsIGJlIGV2YWx1YXRlZCB1bnRpbCBvbmUgb2YgdGhlbSByZXR1cm5zIGB0cnVlYCwgdGhlbiBzdG9wLiBUaGUgZmluYWxcclxuICAgICAqIHJlc3VsdCB3aWxsIGJlIHdoZXRoZXIgYW55IG9mIHRoZW0gcmV0dXJuZWQgYHRydWVgLlxyXG4gICAgICovXHJcbiAgICBQZXJzaXN0ZW5jZVByb21pc2Uub3IgPSBmdW5jdGlvbiAocHJlZGljYXRlcykge1xyXG4gICAgICAgIHZhciBwID0gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoZmFsc2UpO1xyXG4gICAgICAgIHZhciBfbG9vcF8xID0gZnVuY3Rpb24gKHByZWRpY2F0ZSkge1xyXG4gICAgICAgICAgICBwID0gcC5uZXh0KGZ1bmN0aW9uIChpc1RydWUpIHtcclxuICAgICAgICAgICAgICAgIGlmIChpc1RydWUpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoaXNUcnVlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwcmVkaWNhdGUoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIHByZWRpY2F0ZXNfMSA9IHByZWRpY2F0ZXM7IF9pIDwgcHJlZGljYXRlc18xLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICB2YXIgcHJlZGljYXRlID0gcHJlZGljYXRlc18xW19pXTtcclxuICAgICAgICAgICAgX2xvb3BfMShwcmVkaWNhdGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcDtcclxuICAgIH07XHJcbiAgICBQZXJzaXN0ZW5jZVByb21pc2UuZm9yRWFjaCA9IGZ1bmN0aW9uIChjb2xsZWN0aW9uLCBmKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgcHJvbWlzZXMgPSBbXTtcclxuICAgICAgICBjb2xsZWN0aW9uLmZvckVhY2goZnVuY3Rpb24gKHIsIHMpIHtcclxuICAgICAgICAgICAgcHJvbWlzZXMucHVzaChmLmNhbGwoX3RoaXMsIHIsIHMpKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gdGhpcy53YWl0Rm9yKHByb21pc2VzKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlO1xyXG59KCkpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxudmFyIExPR19UQUcgPSAnU2ltcGxlRGInO1xyXG4vKipcclxuICogVGhlIG1heGltdW0gbnVtYmVyIG9mIHJldHJ5IGF0dGVtcHRzIGZvciBhbiBJbmRleGVkRGIgdHJhbnNhY3Rpb24gdGhhdCBmYWlsc1xyXG4gKiB3aXRoIGEgRE9NRXhjZXB0aW9uLlxyXG4gKi9cclxudmFyIFRSQU5TQUNUSU9OX1JFVFJZX0NPVU5UID0gMztcclxuLyoqXHJcbiAqIFByb3ZpZGVzIGEgd3JhcHBlciBhcm91bmQgSW5kZXhlZERiIHdpdGggYSBzaW1wbGlmaWVkIGludGVyZmFjZSB0aGF0IHVzZXNcclxuICogUHJvbWlzZS1saWtlIHJldHVybiB2YWx1ZXMgdG8gY2hhaW4gb3BlcmF0aW9ucy4gUmVhbCBwcm9taXNlcyBjYW5ub3QgYmUgdXNlZFxyXG4gKiBzaW5jZSAudGhlbigpIGNvbnRpbnVhdGlvbnMgYXJlIGV4ZWN1dGVkIGFzeW5jaHJvbm91c2x5IChlLmcuIHZpYVxyXG4gKiAuc2V0SW1tZWRpYXRlKSwgd2hpY2ggd291bGQgY2F1c2UgSW5kZXhlZERCIHRvIGVuZCB0aGUgdHJhbnNhY3Rpb24uXHJcbiAqIFNlZSBQZXJzaXN0ZW5jZVByb21pc2UgZm9yIG1vcmUgZGV0YWlscy5cclxuICovXHJcbnZhciBTaW1wbGVEYiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFNpbXBsZURiKGRiKSB7XHJcbiAgICAgICAgdGhpcy5kYiA9IGRiO1xyXG4gICAgICAgIHZhciBpT1NWZXJzaW9uID0gU2ltcGxlRGIuZ2V0SU9TVmVyc2lvbih1dGlsLmdldFVBKCkpO1xyXG4gICAgICAgIC8vIE5PVEU6IEFjY29yZGluZyB0byBodHRwczovL2J1Z3Mud2Via2l0Lm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MTk3MDUwLCB0aGVcclxuICAgICAgICAvLyBidWcgd2UncmUgY2hlY2tpbmcgZm9yIHNob3VsZCBleGlzdCBpbiBpT1MgPj0gMTIuMiBhbmQgPCAxMywgYnV0IGZvclxyXG4gICAgICAgIC8vIHdoYXRldmVyIHJlYXNvbiBpdCdzIG11Y2ggaGFyZGVyIHRvIGhpdCBhZnRlciAxMi4yIHNvIHdlIG9ubHkgcHJvYWN0aXZlbHlcclxuICAgICAgICAvLyBsb2cgb24gMTIuMi5cclxuICAgICAgICBpZiAoaU9TVmVyc2lvbiA9PT0gMTIuMikge1xyXG4gICAgICAgICAgICBlcnJvcignRmlyZXN0b3JlIHBlcnNpc3RlbmNlIHN1ZmZlcnMgZnJvbSBhIGJ1ZyBpbiBpT1MgMTIuMiAnICtcclxuICAgICAgICAgICAgICAgICdTYWZhcmkgdGhhdCBtYXkgY2F1c2UgeW91ciBhcHAgdG8gc3RvcCB3b3JraW5nLiBTZWUgJyArXHJcbiAgICAgICAgICAgICAgICAnaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xLzU2NDk2Mjk2LzExMDkxNSBmb3IgZGV0YWlscyAnICtcclxuICAgICAgICAgICAgICAgICdhbmQgYSBwb3RlbnRpYWwgd29ya2Fyb3VuZC4nKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIE9wZW5zIHRoZSBzcGVjaWZpZWQgZGF0YWJhc2UsIGNyZWF0aW5nIG9yIHVwZ3JhZGluZyBpdCBpZiBuZWNlc3NhcnkuXHJcbiAgICAgKlxyXG4gICAgICogTm90ZSB0aGF0IGB2ZXJzaW9uYCBtdXN0IG5vdCBiZSBhIGRvd25ncmFkZS4gSW5kZXhlZERCIGRvZXMgbm90IHN1cHBvcnQgZG93bmdyYWRpbmcgdGhlIHNjaGVtYVxyXG4gICAgICogdmVyc2lvbi4gV2UgY3VycmVudGx5IGRvIG5vdCBzdXBwb3J0IGFueSB3YXkgdG8gZG8gdmVyc2lvbmluZyBvdXRzaWRlIG9mIEluZGV4ZWREQidzIHZlcnNpb25pbmdcclxuICAgICAqIG1lY2hhbmlzbSwgYXMgb25seSB2ZXJzaW9uLXVwZ3JhZGUgdHJhbnNhY3Rpb25zIGFyZSBhbGxvd2VkIHRvIGRvIHRoaW5ncyBsaWtlIGNyZWF0ZVxyXG4gICAgICogb2JqZWN0c3RvcmVzLlxyXG4gICAgICovXHJcbiAgICBTaW1wbGVEYi5vcGVuT3JDcmVhdGUgPSBmdW5jdGlvbiAobmFtZSwgdmVyc2lvbiwgc2NoZW1hQ29udmVydGVyKSB7XHJcbiAgICAgICAgYXNzZXJ0KFNpbXBsZURiLmlzQXZhaWxhYmxlKCksICdJbmRleGVkREIgbm90IHN1cHBvcnRlZCBpbiBjdXJyZW50IGVudmlyb25tZW50LicpO1xyXG4gICAgICAgIGRlYnVnKExPR19UQUcsICdPcGVuaW5nIGRhdGFiYXNlOicsIG5hbWUpO1xyXG4gICAgICAgIHJldHVybiBuZXcgUGVyc2lzdGVuY2VQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgLy8gVE9ETyhtaWtlbGVoZW4pOiBJbnZlc3RpZ2F0ZSBicm93c2VyIGNvbXBhdGliaWxpdHkuXHJcbiAgICAgICAgICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9JbmRleGVkREJfQVBJL1VzaW5nX0luZGV4ZWREQlxyXG4gICAgICAgICAgICAvLyBzdWdnZXN0cyBJRTkgYW5kIG9sZGVyIFdlYktpdCBicm93c2VycyBoYW5kbGUgdXBncmFkZVxyXG4gICAgICAgICAgICAvLyBkaWZmZXJlbnRseS4gVGhleSBleHBlY3Qgc2V0VmVyc2lvbiwgYXMgZGVzY3JpYmVkIGhlcmU6XHJcbiAgICAgICAgICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9JREJWZXJzaW9uQ2hhbmdlUmVxdWVzdC9zZXRWZXJzaW9uXHJcbiAgICAgICAgICAgIHZhciByZXF1ZXN0ID0gd2luZG93LmluZGV4ZWREQi5vcGVuKG5hbWUsIHZlcnNpb24pO1xyXG4gICAgICAgICAgICByZXF1ZXN0Lm9uc3VjY2VzcyA9IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGRiID0gZXZlbnQudGFyZ2V0LnJlc3VsdDtcclxuICAgICAgICAgICAgICAgIHJlc29sdmUobmV3IFNpbXBsZURiKGRiKSk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHJlcXVlc3Qub25ibG9ja2VkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcmVqZWN0KG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLkZBSUxFRF9QUkVDT05ESVRJT04sICdDYW5ub3QgdXBncmFkZSBJbmRleGVkREIgc2NoZW1hIHdoaWxlIGFub3RoZXIgdGFiIGlzIG9wZW4uICcgK1xyXG4gICAgICAgICAgICAgICAgICAgICdDbG9zZSBhbGwgdGFicyB0aGF0IGFjY2VzcyBGaXJlc3RvcmUgYW5kIHJlbG9hZCB0aGlzIHBhZ2UgdG8gcHJvY2VlZC4nKSk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHJlcXVlc3Qub25lcnJvciA9IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGVycm9yID0gZXZlbnQudGFyZ2V0LmVycm9yO1xyXG4gICAgICAgICAgICAgICAgaWYgKGVycm9yLm5hbWUgPT09ICdWZXJzaW9uRXJyb3InKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLkZBSUxFRF9QUkVDT05ESVRJT04sICdBIG5ld2VyIHZlcnNpb24gb2YgdGhlIEZpcmVzdG9yZSBTREsgd2FzIHByZXZpb3VzbHkgdXNlZCBhbmQgc28gdGhlIHBlcnNpc3RlZCAnICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ2RhdGEgaXMgbm90IGNvbXBhdGlibGUgd2l0aCB0aGUgdmVyc2lvbiBvZiB0aGUgU0RLIHlvdSBhcmUgbm93IHVzaW5nLiBUaGUgU0RLICcgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnd2lsbCBvcGVyYXRlIHdpdGggcGVyc2lzdGVuY2UgZGlzYWJsZWQuIElmIHlvdSBuZWVkIHBlcnNpc3RlbmNlLCBwbGVhc2UgJyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICdyZS11cGdyYWRlIHRvIGEgbmV3ZXIgdmVyc2lvbiBvZiB0aGUgU0RLIG9yIGVsc2UgY2xlYXIgdGhlIHBlcnNpc3RlZCBJbmRleGVkREIgJyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICdkYXRhIGZvciB5b3VyIGFwcCB0byBzdGFydCBmcmVzaC4nKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZWplY3QoZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICByZXF1ZXN0Lm9udXBncmFkZW5lZWRlZCA9IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICAgICAgZGVidWcoTE9HX1RBRywgJ0RhdGFiYXNlIFwiJyArIG5hbWUgKyAnXCIgcmVxdWlyZXMgdXBncmFkZSBmcm9tIHZlcnNpb246JywgZXZlbnQub2xkVmVyc2lvbik7XHJcbiAgICAgICAgICAgICAgICB2YXIgZGIgPSBldmVudC50YXJnZXQucmVzdWx0O1xyXG4gICAgICAgICAgICAgICAgc2NoZW1hQ29udmVydGVyXHJcbiAgICAgICAgICAgICAgICAgICAgLmNyZWF0ZU9yVXBncmFkZShkYiwgcmVxdWVzdC50cmFuc2FjdGlvbiwgZXZlbnQub2xkVmVyc2lvbiwgU0NIRU1BX1ZFUlNJT04pXHJcbiAgICAgICAgICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlYnVnKExPR19UQUcsICdEYXRhYmFzZSB1cGdyYWRlIHRvIHZlcnNpb24gJyArIFNDSEVNQV9WRVJTSU9OICsgJyBjb21wbGV0ZScpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfSkudG9Qcm9taXNlKCk7XHJcbiAgICB9O1xyXG4gICAgLyoqIERlbGV0ZXMgdGhlIHNwZWNpZmllZCBkYXRhYmFzZS4gKi9cclxuICAgIFNpbXBsZURiLmRlbGV0ZSA9IGZ1bmN0aW9uIChuYW1lKSB7XHJcbiAgICAgICAgZGVidWcoTE9HX1RBRywgJ1JlbW92aW5nIGRhdGFiYXNlOicsIG5hbWUpO1xyXG4gICAgICAgIHJldHVybiB3cmFwUmVxdWVzdCh3aW5kb3cuaW5kZXhlZERCLmRlbGV0ZURhdGFiYXNlKG5hbWUpKS50b1Byb21pc2UoKTtcclxuICAgIH07XHJcbiAgICAvKiogUmV0dXJucyB0cnVlIGlmIEluZGV4ZWREQiBpcyBhdmFpbGFibGUgaW4gdGhlIGN1cnJlbnQgZW52aXJvbm1lbnQuICovXHJcbiAgICBTaW1wbGVEYi5pc0F2YWlsYWJsZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCcgfHwgd2luZG93LmluZGV4ZWREQiA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKFNpbXBsZURiLmlzTW9ja1BlcnNpc3RlbmNlKCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIEluIHNvbWUgTm9kZSBlbnZpcm9ubWVudHMsIGB3aW5kb3dgIGlzIGRlZmluZWQsIGJ1dCBgd2luZG93Lm5hdmlnYXRvcmAgaXNcclxuICAgICAgICAvLyBub3QuIFdlIGRvbid0IHN1cHBvcnQgSW5kZXhlZERCIHBlcnNpc3RlbmNlIGluIE5vZGUgaWYgdGhlXHJcbiAgICAgICAgLy8gaXNNb2NrUGVyc2lzdGVuY2UoKSBjaGVjayBhYm92ZSByZXR1cm5zIGZhbHNlLlxyXG4gICAgICAgIGlmICh3aW5kb3cubmF2aWdhdG9yID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBXZSBleHRlbnNpdmVseSB1c2UgaW5kZXhlZCBhcnJheSB2YWx1ZXMgYW5kIGNvbXBvdW5kIGtleXMsXHJcbiAgICAgICAgLy8gd2hpY2ggSUUgYW5kIEVkZ2UgZG8gbm90IHN1cHBvcnQuIEhvd2V2ZXIsIHRoZXkgc3RpbGwgaGF2ZSBpbmRleGVkREJcclxuICAgICAgICAvLyBkZWZpbmVkIG9uIHRoZSB3aW5kb3csIHNvIHdlIG5lZWQgdG8gY2hlY2sgZm9yIHRoZW0gaGVyZSBhbmQgbWFrZSBzdXJlXHJcbiAgICAgICAgLy8gdG8gcmV0dXJuIHRoYXQgcGVyc2lzdGVuY2UgaXMgbm90IGVuYWJsZWQgZm9yIHRob3NlIGJyb3dzZXJzLlxyXG4gICAgICAgIC8vIEZvciB0cmFja2luZyBzdXBwb3J0IG9mIHRoaXMgZmVhdHVyZSwgc2VlIGhlcmU6XHJcbiAgICAgICAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIubWljcm9zb2Z0LmNvbS9lbi11cy9taWNyb3NvZnQtZWRnZS9wbGF0Zm9ybS9zdGF0dXMvaW5kZXhlZGRiYXJyYXlzYW5kbXVsdGllbnRyeXN1cHBvcnQvXHJcbiAgICAgICAgLy8gQ2hlY2sgdGhlIFVBIHN0cmluZyB0byBmaW5kIG91dCB0aGUgYnJvd3Nlci5cclxuICAgICAgICB2YXIgdWEgPSB1dGlsLmdldFVBKCk7XHJcbiAgICAgICAgLy8gSUUgMTBcclxuICAgICAgICAvLyB1YSA9ICdNb3ppbGxhLzUuMCAoY29tcGF0aWJsZTsgTVNJRSAxMC4wOyBXaW5kb3dzIE5UIDYuMjsgVHJpZGVudC82LjApJztcclxuICAgICAgICAvLyBJRSAxMVxyXG4gICAgICAgIC8vIHVhID0gJ01vemlsbGEvNS4wIChXaW5kb3dzIE5UIDYuMzsgVHJpZGVudC83LjA7IHJ2OjExLjApIGxpa2UgR2Vja28nO1xyXG4gICAgICAgIC8vIEVkZ2VcclxuICAgICAgICAvLyB1YSA9ICdNb3ppbGxhLzUuMCAoV2luZG93cyBOVCAxMC4wOyBXT1c2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCxcclxuICAgICAgICAvLyBsaWtlIEdlY2tvKSBDaHJvbWUvMzkuMC4yMTcxLjcxIFNhZmFyaS81MzcuMzYgRWRnZS8xMi4wJztcclxuICAgICAgICAvLyBpT1MgU2FmYXJpOiBEaXNhYmxlIGZvciB1c2VycyBydW5uaW5nIGlPUyB2ZXJzaW9uIDwgMTAuXHJcbiAgICAgICAgdmFyIGlPU1ZlcnNpb24gPSBTaW1wbGVEYi5nZXRJT1NWZXJzaW9uKHVhKTtcclxuICAgICAgICB2YXIgaXNVbnN1cHBvcnRlZElPUyA9IDAgPCBpT1NWZXJzaW9uICYmIGlPU1ZlcnNpb24gPCAxMDtcclxuICAgICAgICAvLyBBbmRyb2lkIGJyb3dzZXI6IERpc2FibGUgZm9yIHVzZXJzZSBydW5uaW5nIHZlcnNpb24gPCA0LjUuXHJcbiAgICAgICAgdmFyIGFuZHJvaWRWZXJzaW9uID0gU2ltcGxlRGIuZ2V0QW5kcm9pZFZlcnNpb24odWEpO1xyXG4gICAgICAgIHZhciBpc1Vuc3VwcG9ydGVkQW5kcm9pZCA9IDAgPCBhbmRyb2lkVmVyc2lvbiAmJiBhbmRyb2lkVmVyc2lvbiA8IDQuNTtcclxuICAgICAgICBpZiAodWEuaW5kZXhPZignTVNJRSAnKSA+IDAgfHxcclxuICAgICAgICAgICAgdWEuaW5kZXhPZignVHJpZGVudC8nKSA+IDAgfHxcclxuICAgICAgICAgICAgdWEuaW5kZXhPZignRWRnZS8nKSA+IDAgfHxcclxuICAgICAgICAgICAgaXNVbnN1cHBvcnRlZElPUyB8fFxyXG4gICAgICAgICAgICBpc1Vuc3VwcG9ydGVkQW5kcm9pZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhlIGJhY2tpbmcgSW5kZXhlZERCIHN0b3JlIGlzIHRoZSBOb2RlIEluZGV4ZWREQlNoaW1cclxuICAgICAqIChzZWUgaHR0cHM6Ly9naXRodWIuY29tL2F4ZW1jbGlvbi9JbmRleGVkREJTaGltKS5cclxuICAgICAqL1xyXG4gICAgU2ltcGxlRGIuaXNNb2NrUGVyc2lzdGVuY2UgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIHJldHVybiAodHlwZW9mIHByb2Nlc3MgIT09ICd1bmRlZmluZWQnICYmXHJcbiAgICAgICAgICAgICgoX2EgPSBwcm9jZXNzLmVudikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLlVTRV9NT0NLX1BFUlNJU1RFTkNFKSA9PT0gJ1lFUycpO1xyXG4gICAgfTtcclxuICAgIC8qKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmcm9tIGEgdHJhbnNhY3Rpb24uICovXHJcbiAgICBTaW1wbGVEYi5nZXRTdG9yZSA9IGZ1bmN0aW9uICh0eG4sIHN0b3JlKSB7XHJcbiAgICAgICAgcmV0dXJuIHR4bi5zdG9yZShzdG9yZSk7XHJcbiAgICB9O1xyXG4gICAgLy8gdmlzaWJsZSBmb3IgdGVzdGluZ1xyXG4gICAgLyoqIFBhcnNlIFVzZXIgQWdlbnQgdG8gZGV0ZXJtaW5lIGlPUyB2ZXJzaW9uLiBSZXR1cm5zIC0xIGlmIG5vdCBmb3VuZC4gKi9cclxuICAgIFNpbXBsZURiLmdldElPU1ZlcnNpb24gPSBmdW5jdGlvbiAodWEpIHtcclxuICAgICAgICB2YXIgaU9TVmVyc2lvblJlZ2V4ID0gdWEubWF0Y2goL2koPzpwaG9uZXxwYWR8cG9kKSBvcyAoW1xcZF9dKykvaSk7XHJcbiAgICAgICAgdmFyIHZlcnNpb24gPSBpT1NWZXJzaW9uUmVnZXhcclxuICAgICAgICAgICAgPyBpT1NWZXJzaW9uUmVnZXhbMV1cclxuICAgICAgICAgICAgICAgIC5zcGxpdCgnXycpXHJcbiAgICAgICAgICAgICAgICAuc2xpY2UoMCwgMilcclxuICAgICAgICAgICAgICAgIC5qb2luKCcuJylcclxuICAgICAgICAgICAgOiAnLTEnO1xyXG4gICAgICAgIHJldHVybiBOdW1iZXIodmVyc2lvbik7XHJcbiAgICB9O1xyXG4gICAgLy8gdmlzaWJsZSBmb3IgdGVzdGluZ1xyXG4gICAgLyoqIFBhcnNlIFVzZXIgQWdlbnQgdG8gZGV0ZXJtaW5lIEFuZHJvaWQgdmVyc2lvbi4gUmV0dXJucyAtMSBpZiBub3QgZm91bmQuICovXHJcbiAgICBTaW1wbGVEYi5nZXRBbmRyb2lkVmVyc2lvbiA9IGZ1bmN0aW9uICh1YSkge1xyXG4gICAgICAgIHZhciBhbmRyb2lkVmVyc2lvblJlZ2V4ID0gdWEubWF0Y2goL0FuZHJvaWQgKFtcXGQuXSspL2kpO1xyXG4gICAgICAgIHZhciB2ZXJzaW9uID0gYW5kcm9pZFZlcnNpb25SZWdleFxyXG4gICAgICAgICAgICA/IGFuZHJvaWRWZXJzaW9uUmVnZXhbMV1cclxuICAgICAgICAgICAgICAgIC5zcGxpdCgnLicpXHJcbiAgICAgICAgICAgICAgICAuc2xpY2UoMCwgMilcclxuICAgICAgICAgICAgICAgIC5qb2luKCcuJylcclxuICAgICAgICAgICAgOiAnLTEnO1xyXG4gICAgICAgIHJldHVybiBOdW1iZXIodmVyc2lvbik7XHJcbiAgICB9O1xyXG4gICAgU2ltcGxlRGIucHJvdG90eXBlLnNldFZlcnNpb25DaGFuZ2VMaXN0ZW5lciA9IGZ1bmN0aW9uICh2ZXJzaW9uQ2hhbmdlTGlzdGVuZXIpIHtcclxuICAgICAgICB0aGlzLmRiLm9udmVyc2lvbmNoYW5nZSA9IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdmVyc2lvbkNoYW5nZUxpc3RlbmVyKGV2ZW50KTtcclxuICAgICAgICB9O1xyXG4gICAgfTtcclxuICAgIFNpbXBsZURiLnByb3RvdHlwZS5ydW5UcmFuc2FjdGlvbiA9IGZ1bmN0aW9uIChtb2RlLCBvYmplY3RTdG9yZXMsIHRyYW5zYWN0aW9uRm4pIHtcclxuICAgICAgICByZXR1cm4gdHNsaWIuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciByZWFkb25seSwgaWRlbXBvdGVudCwgYXR0ZW1wdE51bWJlciwgX2xvb3BfMSwgdGhpc18xLCBzdGF0ZV8xO1xyXG4gICAgICAgICAgICByZXR1cm4gdHNsaWIuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWFkb25seSA9IG1vZGUuc3RhcnRzV2l0aCgncmVhZG9ubHknKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWRlbXBvdGVudCA9IG1vZGUuZW5kc1dpdGgoJ2lkZW1wb3RlbnQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXR0ZW1wdE51bWJlciA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9sb29wXzEgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdHJhbnNhY3Rpb24sIHRyYW5zYWN0aW9uRm5SZXN1bHQsIGVycm9yXzEsIHJldHJ5YWJsZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0c2xpYi5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsrYXR0ZW1wdE51bWJlcjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uID0gU2ltcGxlRGJUcmFuc2FjdGlvbi5vcGVuKHRoaXNfMS5kYiwgcmVhZG9ubHkgPyAncmVhZG9ubHknIDogJ3JlYWR3cml0ZScsIG9iamVjdFN0b3Jlcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9hLnRyeXMucHVzaChbMSwgMywgLCA0XSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2FjdGlvbkZuUmVzdWx0ID0gdHJhbnNhY3Rpb25Gbih0cmFuc2FjdGlvbilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWJvcnQgdGhlIHRyYW5zYWN0aW9uIGlmIHRoZXJlIHdhcyBhbiBlcnJvci5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2FjdGlvbi5hYm9ydChlcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gV2UgY2Fubm90IGFjdHVhbGx5IHJlY292ZXIsIGFuZCBjYWxsaW5nIGBhYm9ydCgpYCB3aWxsIGNhdXNlIHRoZSB0cmFuc2FjdGlvbidzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29tcGxldGlvbiBwcm9taXNlIHRvIGJlIHJlamVjdGVkLiBUaGlzIGluIHR1cm4gbWVhbnMgdGhhdCB3ZSB3b24ndCB1c2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBgdHJhbnNhY3Rpb25GblJlc3VsdGAgYmVsb3cuIFdlIHJldHVybiBhIHJlamVjdGlvbiBoZXJlIHNvIHRoYXQgd2UgZG9uJ3QgYWRkIHRoZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHBvc3NpYmlsaXR5IG9mIHJldHVybmluZyBgdm9pZGAgdG8gdGhlIHR5cGUgb2YgYHRyYW5zYWN0aW9uRm5SZXN1bHRgLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVqZWN0KGVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRvUHJvbWlzZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQXMgbm90ZWQgYWJvdmUsIGVycm9ycyBhcmUgcHJvcGFnYXRlZCBieSBhYm9ydGluZyB0aGUgdHJhbnNhY3Rpb24uIFNvXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB3ZSBzd2FsbG93IGFueSBlcnJvciBoZXJlIHRvIGF2b2lkIHRoZSBicm93c2VyIGxvZ2dpbmcgaXQgYXMgdW5oYW5kbGVkLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb25GblJlc3VsdC5jYXRjaChmdW5jdGlvbiAoKSB7IH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gV2FpdCBmb3IgdGhlIHRyYW5zYWN0aW9uIHRvIGNvbXBsZXRlIChpLmUuIEluZGV4ZWREYidzIG9uc3VjY2VzcyBldmVudCB0b1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZmlyZSksIGJ1dCBzdGlsbCByZXR1cm4gdGhlIG9yaWdpbmFsIHRyYW5zYWN0aW9uRm5SZXN1bHQgYmFjayB0byB0aGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNhbGxlci5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRyYW5zYWN0aW9uLmNvbXBsZXRpb25Qcm9taXNlXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gV2FpdCBmb3IgdGhlIHRyYW5zYWN0aW9uIHRvIGNvbXBsZXRlIChpLmUuIEluZGV4ZWREYidzIG9uc3VjY2VzcyBldmVudCB0b1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZmlyZSksIGJ1dCBzdGlsbCByZXR1cm4gdGhlIG9yaWdpbmFsIHRyYW5zYWN0aW9uRm5SZXN1bHQgYmFjayB0byB0aGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNhbGxlci5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB7IHZhbHVlOiB0cmFuc2FjdGlvbkZuUmVzdWx0IH1dO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvcl8xID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0cnlhYmxlID0gaWRlbXBvdGVudCAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yXzEubmFtZSAhPT0gJ0ZpcmViYXNlRXJyb3InICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0ZW1wdE51bWJlciA8IFRSQU5TQUNUSU9OX1JFVFJZX0NPVU5UO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVidWcoTE9HX1RBRywgJ1RyYW5zYWN0aW9uIGZhaWxlZCB3aXRoIGVycm9yOiAlcy4gUmV0cnlpbmc6ICVzLicsIGVycm9yXzEubWVzc2FnZSwgcmV0cnlhYmxlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghcmV0cnlhYmxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHsgdmFsdWU6IFByb21pc2UucmVqZWN0KGVycm9yXzEpIH1dO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgNF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzXzEgPSB0aGlzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzUgLyp5aWVsZCoqLywgX2xvb3BfMSgpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlXzEgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygc3RhdGVfMSA9PT0gXCJvYmplY3RcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBzdGF0ZV8xLnZhbHVlXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgMV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOiByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIFNpbXBsZURiLnByb3RvdHlwZS5jbG9zZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmRiLmNsb3NlKCk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFNpbXBsZURiO1xyXG59KCkpO1xyXG4vKipcclxuICogQSBjb250cm9sbGVyIGZvciBpdGVyYXRpbmcgb3ZlciBhIGtleSByYW5nZSBvciBpbmRleC4gSXQgYWxsb3dzIGFuIGl0ZXJhdGVcclxuICogY2FsbGJhY2sgdG8gZGVsZXRlIHRoZSBjdXJyZW50bHktcmVmZXJlbmNlZCBvYmplY3QsIG9yIGp1bXAgdG8gYSBuZXcga2V5XHJcbiAqIHdpdGhpbiB0aGUga2V5IHJhbmdlIG9yIGluZGV4LlxyXG4gKi9cclxudmFyIEl0ZXJhdGlvbkNvbnRyb2xsZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBJdGVyYXRpb25Db250cm9sbGVyKGRiQ3Vyc29yKSB7XHJcbiAgICAgICAgdGhpcy5kYkN1cnNvciA9IGRiQ3Vyc29yO1xyXG4gICAgICAgIHRoaXMuc2hvdWxkU3RvcCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMubmV4dEtleSA9IG51bGw7XHJcbiAgICB9XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoSXRlcmF0aW9uQ29udHJvbGxlci5wcm90b3R5cGUsIFwiaXNEb25lXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2hvdWxkU3RvcDtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShJdGVyYXRpb25Db250cm9sbGVyLnByb3RvdHlwZSwgXCJza2lwVG9LZXlcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5uZXh0S2V5O1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEl0ZXJhdGlvbkNvbnRyb2xsZXIucHJvdG90eXBlLCBcImN1cnNvclwiLCB7XHJcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICAgICAgdGhpcy5kYkN1cnNvciA9IHZhbHVlO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgLyoqXHJcbiAgICAgKiBUaGlzIGZ1bmN0aW9uIGNhbiBiZSBjYWxsZWQgdG8gc3RvcCBpdGVyYXRpb24gYXQgYW55IHBvaW50LlxyXG4gICAgICovXHJcbiAgICBJdGVyYXRpb25Db250cm9sbGVyLnByb3RvdHlwZS5kb25lID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuc2hvdWxkU3RvcCA9IHRydWU7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBUaGlzIGZ1bmN0aW9uIGNhbiBiZSBjYWxsZWQgdG8gc2tpcCB0byB0aGF0IG5leHQga2V5LCB3aGljaCBjb3VsZCBiZVxyXG4gICAgICogYW4gaW5kZXggb3IgYSBwcmltYXJ5IGtleS5cclxuICAgICAqL1xyXG4gICAgSXRlcmF0aW9uQ29udHJvbGxlci5wcm90b3R5cGUuc2tpcCA9IGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICB0aGlzLm5leHRLZXkgPSBrZXk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBEZWxldGUgdGhlIGN1cnJlbnQgY3Vyc29yIHZhbHVlIGZyb20gdGhlIG9iamVjdCBzdG9yZS5cclxuICAgICAqXHJcbiAgICAgKiBOT1RFOiBZb3UgQ0FOTk9UIGRvIHRoaXMgd2l0aCBhIGtleXNPbmx5IHF1ZXJ5LlxyXG4gICAgICovXHJcbiAgICBJdGVyYXRpb25Db250cm9sbGVyLnByb3RvdHlwZS5kZWxldGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHdyYXBSZXF1ZXN0KHRoaXMuZGJDdXJzb3IuZGVsZXRlKCkpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBJdGVyYXRpb25Db250cm9sbGVyO1xyXG59KCkpO1xyXG4vKipcclxuICogV3JhcHMgYW4gSURCVHJhbnNhY3Rpb24gYW5kIGV4cG9zZXMgYSBzdG9yZSgpIG1ldGhvZCB0byBnZXQgYSBoYW5kbGUgdG8gYVxyXG4gKiBzcGVjaWZpYyBvYmplY3Qgc3RvcmUuXHJcbiAqL1xyXG52YXIgU2ltcGxlRGJUcmFuc2FjdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFNpbXBsZURiVHJhbnNhY3Rpb24odHJhbnNhY3Rpb24pIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMudHJhbnNhY3Rpb24gPSB0cmFuc2FjdGlvbjtcclxuICAgICAgICB0aGlzLmFib3J0ZWQgPSBmYWxzZTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBBIHByb21pc2UgdGhhdCByZXNvbHZlcyB3aXRoIHRoZSByZXN1bHQgb2YgdGhlIEluZGV4ZWREYiB0cmFuc2FjdGlvbi5cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLmNvbXBsZXRpb25EZWZlcnJlZCA9IG5ldyBEZWZlcnJlZCgpO1xyXG4gICAgICAgIHRoaXMudHJhbnNhY3Rpb24ub25jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgX3RoaXMuY29tcGxldGlvbkRlZmVycmVkLnJlc29sdmUoKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMudHJhbnNhY3Rpb24ub25hYm9ydCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKHRyYW5zYWN0aW9uLmVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5jb21wbGV0aW9uRGVmZXJyZWQucmVqZWN0KHRyYW5zYWN0aW9uLmVycm9yKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLmNvbXBsZXRpb25EZWZlcnJlZC5yZXNvbHZlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMudHJhbnNhY3Rpb24ub25lcnJvciA9IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICB2YXIgZXJyb3IgPSBjaGVja0ZvckFuZFJlcG9ydGlPU0Vycm9yKGV2ZW50LnRhcmdldC5lcnJvcik7XHJcbiAgICAgICAgICAgIF90aGlzLmNvbXBsZXRpb25EZWZlcnJlZC5yZWplY3QoZXJyb3IpO1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICBTaW1wbGVEYlRyYW5zYWN0aW9uLm9wZW4gPSBmdW5jdGlvbiAoZGIsIG1vZGUsIG9iamVjdFN0b3JlTmFtZXMpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFNpbXBsZURiVHJhbnNhY3Rpb24oZGIudHJhbnNhY3Rpb24ob2JqZWN0U3RvcmVOYW1lcywgbW9kZSkpO1xyXG4gICAgfTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTaW1wbGVEYlRyYW5zYWN0aW9uLnByb3RvdHlwZSwgXCJjb21wbGV0aW9uUHJvbWlzZVwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbXBsZXRpb25EZWZlcnJlZC5wcm9taXNlO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgU2ltcGxlRGJUcmFuc2FjdGlvbi5wcm90b3R5cGUuYWJvcnQgPSBmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgdGhpcy5jb21wbGV0aW9uRGVmZXJyZWQucmVqZWN0KGVycm9yKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCF0aGlzLmFib3J0ZWQpIHtcclxuICAgICAgICAgICAgZGVidWcoTE9HX1RBRywgJ0Fib3J0aW5nIHRyYW5zYWN0aW9uOicsIGVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdDbGllbnQtaW5pdGlhdGVkIGFib3J0Jyk7XHJcbiAgICAgICAgICAgIHRoaXMuYWJvcnRlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIHRoaXMudHJhbnNhY3Rpb24uYWJvcnQoKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIGEgU2ltcGxlRGJTdG9yZTxLZXlUeXBlLCBWYWx1ZVR5cGU+IGZvciB0aGUgc3BlY2lmaWVkIHN0b3JlLiBBbGxcclxuICAgICAqIG9wZXJhdGlvbnMgcGVyZm9ybWVkIG9uIHRoZSBTaW1wbGVEYlN0b3JlIGhhcHBlbiB3aXRoaW4gdGhlIGNvbnRleHQgb2YgdGhpc1xyXG4gICAgICogdHJhbnNhY3Rpb24gYW5kIGl0IGNhbm5vdCBiZSB1c2VkIGFueW1vcmUgb25jZSB0aGUgdHJhbnNhY3Rpb24gaXNcclxuICAgICAqIGNvbXBsZXRlZC5cclxuICAgICAqXHJcbiAgICAgKiBOb3RlIHRoYXQgd2UgY2FuJ3QgYWN0dWFsbHkgZW5mb3JjZSB0aGF0IHRoZSBLZXlUeXBlIGFuZCBWYWx1ZVR5cGUgYXJlXHJcbiAgICAgKiBjb3JyZWN0LCBidXQgdGhleSBhbGxvdyB0eXBlIHNhZmV0eSB0aHJvdWdoIHRoZSByZXN0IG9mIHRoZSBjb25zdW1pbmcgY29kZS5cclxuICAgICAqL1xyXG4gICAgU2ltcGxlRGJUcmFuc2FjdGlvbi5wcm90b3R5cGUuc3RvcmUgPSBmdW5jdGlvbiAoc3RvcmVOYW1lKSB7XHJcbiAgICAgICAgdmFyIHN0b3JlID0gdGhpcy50cmFuc2FjdGlvbi5vYmplY3RTdG9yZShzdG9yZU5hbWUpO1xyXG4gICAgICAgIGFzc2VydCghIXN0b3JlLCAnT2JqZWN0IHN0b3JlIG5vdCBwYXJ0IG9mIHRyYW5zYWN0aW9uOiAnICsgc3RvcmVOYW1lKTtcclxuICAgICAgICByZXR1cm4gbmV3IFNpbXBsZURiU3RvcmUoc3RvcmUpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBTaW1wbGVEYlRyYW5zYWN0aW9uO1xyXG59KCkpO1xyXG4vKipcclxuICogQSB3cmFwcGVyIGFyb3VuZCBhbiBJREJPYmplY3RTdG9yZSBwcm92aWRpbmcgYW4gQVBJIHRoYXQ6XHJcbiAqXHJcbiAqIDEpIEhhcyBnZW5lcmljIEtleVR5cGUgLyBWYWx1ZVR5cGUgcGFyYW1ldGVycyB0byBwcm92aWRlIHN0cm9uZ2x5LXR5cGVkXHJcbiAqIG1ldGhvZHMgZm9yIGFjdGluZyBhZ2FpbnN0IHRoZSBvYmplY3Qgc3RvcmUuXHJcbiAqIDIpIERlYWxzIHdpdGggSW5kZXhlZERCJ3Mgb25zdWNjZXNzIC8gb25lcnJvciBldmVudCBjYWxsYmFja3MsIG1ha2luZyBldmVyeVxyXG4gKiBtZXRob2QgcmV0dXJuIGEgUGVyc2lzdGVuY2VQcm9taXNlIGluc3RlYWQuXHJcbiAqIDMpIFByb3ZpZGVzIGEgaGlnaGVyLWxldmVsIEFQSSB0byBhdm9pZCBuZWVkaW5nIHRvIGRvIGV4Y2Vzc2l2ZSB3cmFwcGluZyBvZlxyXG4gKiBpbnRlcm1lZGlhdGUgSW5kZXhlZERCIHR5cGVzIChJREJDdXJzb3JXaXRoVmFsdWUsIGV0Yy4pXHJcbiAqL1xyXG52YXIgU2ltcGxlRGJTdG9yZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFNpbXBsZURiU3RvcmUoc3RvcmUpIHtcclxuICAgICAgICB0aGlzLnN0b3JlID0gc3RvcmU7XHJcbiAgICB9XHJcbiAgICBTaW1wbGVEYlN0b3JlLnByb3RvdHlwZS5wdXQgPSBmdW5jdGlvbiAoa2V5T3JWYWx1ZSwgdmFsdWUpIHtcclxuICAgICAgICB2YXIgcmVxdWVzdDtcclxuICAgICAgICBpZiAodmFsdWUgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBkZWJ1ZyhMT0dfVEFHLCAnUFVUJywgdGhpcy5zdG9yZS5uYW1lLCBrZXlPclZhbHVlLCB2YWx1ZSk7XHJcbiAgICAgICAgICAgIHJlcXVlc3QgPSB0aGlzLnN0b3JlLnB1dCh2YWx1ZSwga2V5T3JWYWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBkZWJ1ZyhMT0dfVEFHLCAnUFVUJywgdGhpcy5zdG9yZS5uYW1lLCAnPGF1dG8ta2V5PicsIGtleU9yVmFsdWUpO1xyXG4gICAgICAgICAgICByZXF1ZXN0ID0gdGhpcy5zdG9yZS5wdXQoa2V5T3JWYWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB3cmFwUmVxdWVzdChyZXF1ZXN0KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEFkZHMgYSBuZXcgdmFsdWUgaW50byBhbiBPYmplY3QgU3RvcmUgYW5kIHJldHVybnMgdGhlIG5ldyBrZXkuIFNpbWlsYXIgdG9cclxuICAgICAqIEluZGV4ZWREYidzIGBhZGQoKWAsIHRoaXMgbWV0aG9kIHdpbGwgZmFpbCBvbiBwcmltYXJ5IGtleSBjb2xsaXNpb25zLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB2YWx1ZSBUaGUgb2JqZWN0IHRvIHdyaXRlLlxyXG4gICAgICogQHJldHVybiBUaGUga2V5IG9mIHRoZSB2YWx1ZSB0byBhZGQuXHJcbiAgICAgKi9cclxuICAgIFNpbXBsZURiU3RvcmUucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgIGRlYnVnKExPR19UQUcsICdBREQnLCB0aGlzLnN0b3JlLm5hbWUsIHZhbHVlLCB2YWx1ZSk7XHJcbiAgICAgICAgdmFyIHJlcXVlc3QgPSB0aGlzLnN0b3JlLmFkZCh2YWx1ZSk7XHJcbiAgICAgICAgcmV0dXJuIHdyYXBSZXF1ZXN0KHJlcXVlc3QpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogR2V0cyB0aGUgb2JqZWN0IHdpdGggdGhlIHNwZWNpZmllZCBrZXkgZnJvbSB0aGUgc3BlY2lmaWVkIHN0b3JlLCBvciBudWxsXHJcbiAgICAgKiBpZiBubyBvYmplY3QgZXhpc3RzIHdpdGggdGhlIHNwZWNpZmllZCBrZXkuXHJcbiAgICAgKlxyXG4gICAgICogQGtleSBUaGUga2V5IG9mIHRoZSBvYmplY3QgdG8gZ2V0LlxyXG4gICAgICogQHJldHVybiBUaGUgb2JqZWN0IHdpdGggdGhlIHNwZWNpZmllZCBrZXkgb3IgbnVsbCBpZiBubyBvYmplY3QgZXhpc3RzLlxyXG4gICAgICovXHJcbiAgICBTaW1wbGVEYlN0b3JlLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgcmVxdWVzdCA9IHRoaXMuc3RvcmUuZ2V0KGtleSk7XHJcbiAgICAgICAgLy8gV2UncmUgZG9pbmcgYW4gdW5zYWZlIGNhc3QgdG8gVmFsdWVUeXBlLlxyXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbiAgICAgICAgcmV0dXJuIHdyYXBSZXF1ZXN0KHJlcXVlc3QpLm5leHQoZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAvLyBOb3JtYWxpemUgbm9uZXhpc3RlbmNlIHRvIG51bGwuXHJcbiAgICAgICAgICAgIGlmIChyZXN1bHQgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBkZWJ1ZyhMT0dfVEFHLCAnR0VUJywgX3RoaXMuc3RvcmUubmFtZSwga2V5LCByZXN1bHQpO1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIFNpbXBsZURiU3RvcmUucHJvdG90eXBlLmRlbGV0ZSA9IGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICBkZWJ1ZyhMT0dfVEFHLCAnREVMRVRFJywgdGhpcy5zdG9yZS5uYW1lLCBrZXkpO1xyXG4gICAgICAgIHZhciByZXF1ZXN0ID0gdGhpcy5zdG9yZS5kZWxldGUoa2V5KTtcclxuICAgICAgICByZXR1cm4gd3JhcFJlcXVlc3QocmVxdWVzdCk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBJZiB3ZSBldmVyIG5lZWQgbW9yZSBvZiB0aGUgY291bnQgdmFyaWFudHMsIHdlIGNhbiBhZGQgb3ZlcmxvYWRzLiBGb3Igbm93LFxyXG4gICAgICogYWxsIHdlIG5lZWQgaXMgdG8gY291bnQgZXZlcnl0aGluZyBpbiBhIHN0b3JlLlxyXG4gICAgICpcclxuICAgICAqIFJldHVybnMgdGhlIG51bWJlciBvZiByb3dzIGluIHRoZSBzdG9yZS5cclxuICAgICAqL1xyXG4gICAgU2ltcGxlRGJTdG9yZS5wcm90b3R5cGUuY291bnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgZGVidWcoTE9HX1RBRywgJ0NPVU5UJywgdGhpcy5zdG9yZS5uYW1lKTtcclxuICAgICAgICB2YXIgcmVxdWVzdCA9IHRoaXMuc3RvcmUuY291bnQoKTtcclxuICAgICAgICByZXR1cm4gd3JhcFJlcXVlc3QocmVxdWVzdCk7XHJcbiAgICB9O1xyXG4gICAgU2ltcGxlRGJTdG9yZS5wcm90b3R5cGUubG9hZEFsbCA9IGZ1bmN0aW9uIChpbmRleE9yUmFuZ2UsIHJhbmdlKSB7XHJcbiAgICAgICAgdmFyIGN1cnNvciA9IHRoaXMuY3Vyc29yKHRoaXMub3B0aW9ucyhpbmRleE9yUmFuZ2UsIHJhbmdlKSk7XHJcbiAgICAgICAgdmFyIHJlc3VsdHMgPSBbXTtcclxuICAgICAgICByZXR1cm4gdGhpcy5pdGVyYXRlQ3Vyc29yKGN1cnNvciwgZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcclxuICAgICAgICAgICAgcmVzdWx0cy5wdXNoKHZhbHVlKTtcclxuICAgICAgICB9KS5uZXh0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdHM7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgU2ltcGxlRGJTdG9yZS5wcm90b3R5cGUuZGVsZXRlQWxsID0gZnVuY3Rpb24gKGluZGV4T3JSYW5nZSwgcmFuZ2UpIHtcclxuICAgICAgICBkZWJ1ZyhMT0dfVEFHLCAnREVMRVRFIEFMTCcsIHRoaXMuc3RvcmUubmFtZSk7XHJcbiAgICAgICAgdmFyIG9wdGlvbnMgPSB0aGlzLm9wdGlvbnMoaW5kZXhPclJhbmdlLCByYW5nZSk7XHJcbiAgICAgICAgb3B0aW9ucy5rZXlzT25seSA9IGZhbHNlO1xyXG4gICAgICAgIHZhciBjdXJzb3IgPSB0aGlzLmN1cnNvcihvcHRpb25zKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5pdGVyYXRlQ3Vyc29yKGN1cnNvciwgZnVuY3Rpb24gKGtleSwgdmFsdWUsIGNvbnRyb2wpIHtcclxuICAgICAgICAgICAgLy8gTk9URTogQ2FsbGluZyBkZWxldGUoKSBvbiBhIGN1cnNvciBpcyBkb2N1bWVudGVkIGFzIG1vcmUgZWZmaWNpZW50IHRoYW5cclxuICAgICAgICAgICAgLy8gY2FsbGluZyBkZWxldGUoKSBvbiBhbiBvYmplY3Qgc3RvcmUgd2l0aCBhIHNpbmdsZSBrZXlcclxuICAgICAgICAgICAgLy8gKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9JREJPYmplY3RTdG9yZS9kZWxldGUpLFxyXG4gICAgICAgICAgICAvLyBob3dldmVyLCB0aGlzIHJlcXVpcmVzIHVzICpub3QqIHRvIHVzZSBhIGtleXNPbmx5IGN1cnNvclxyXG4gICAgICAgICAgICAvLyAoaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0lEQkN1cnNvci9kZWxldGUpLiBXZVxyXG4gICAgICAgICAgICAvLyBtYXkgd2FudCB0byBjb21wYXJlIHRoZSBwZXJmb3JtYW5jZSBvZiBlYWNoIG1ldGhvZC5cclxuICAgICAgICAgICAgcmV0dXJuIGNvbnRyb2wuZGVsZXRlKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgU2ltcGxlRGJTdG9yZS5wcm90b3R5cGUuaXRlcmF0ZSA9IGZ1bmN0aW9uIChvcHRpb25zT3JDYWxsYmFjaywgY2FsbGJhY2spIHtcclxuICAgICAgICB2YXIgb3B0aW9ucztcclxuICAgICAgICBpZiAoIWNhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgIG9wdGlvbnMgPSB7fTtcclxuICAgICAgICAgICAgY2FsbGJhY2sgPSBvcHRpb25zT3JDYWxsYmFjaztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIG9wdGlvbnMgPSBvcHRpb25zT3JDYWxsYmFjaztcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGN1cnNvciA9IHRoaXMuY3Vyc29yKG9wdGlvbnMpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLml0ZXJhdGVDdXJzb3IoY3Vyc29yLCBjYWxsYmFjayk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBJdGVyYXRlcyBvdmVyIGEgc3RvcmUsIGJ1dCB3YWl0cyBmb3IgdGhlIGdpdmVuIGNhbGxiYWNrIHRvIGNvbXBsZXRlIGZvclxyXG4gICAgICogZWFjaCBlbnRyeSBiZWZvcmUgaXRlcmF0aW5nIHRoZSBuZXh0IGVudHJ5LiBUaGlzIGFsbG93cyB0aGUgY2FsbGJhY2sgdG8gZG9cclxuICAgICAqIGFzeW5jaHJvbm91cyB3b3JrIHRvIGRldGVybWluZSBpZiB0aGlzIGl0ZXJhdGlvbiBzaG91bGQgY29udGludWUuXHJcbiAgICAgKlxyXG4gICAgICogVGhlIHByb3ZpZGVkIGNhbGxiYWNrIHNob3VsZCByZXR1cm4gYHRydWVgIHRvIGNvbnRpbnVlIGl0ZXJhdGlvbiwgYW5kXHJcbiAgICAgKiBgZmFsc2VgIG90aGVyd2lzZS5cclxuICAgICAqL1xyXG4gICAgU2ltcGxlRGJTdG9yZS5wcm90b3R5cGUuaXRlcmF0ZVNlcmlhbCA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xyXG4gICAgICAgIHZhciBjdXJzb3JSZXF1ZXN0ID0gdGhpcy5jdXJzb3Ioe30pO1xyXG4gICAgICAgIHJldHVybiBuZXcgUGVyc2lzdGVuY2VQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgY3Vyc29yUmVxdWVzdC5vbmVycm9yID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZXJyb3IgPSBjaGVja0ZvckFuZFJlcG9ydGlPU0Vycm9yKGV2ZW50LnRhcmdldC5lcnJvcik7XHJcbiAgICAgICAgICAgICAgICByZWplY3QoZXJyb3IpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBjdXJzb3JSZXF1ZXN0Lm9uc3VjY2VzcyA9IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGN1cnNvciA9IGV2ZW50LnRhcmdldC5yZXN1bHQ7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWN1cnNvcikge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhjdXJzb3IucHJpbWFyeUtleSwgY3Vyc29yLnZhbHVlKS5uZXh0KGZ1bmN0aW9uIChzaG91bGRDb250aW51ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzaG91bGRDb250aW51ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJzb3IuY29udGludWUoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBTaW1wbGVEYlN0b3JlLnByb3RvdHlwZS5pdGVyYXRlQ3Vyc29yID0gZnVuY3Rpb24gKGN1cnNvclJlcXVlc3QsIGZuKSB7XHJcbiAgICAgICAgdmFyIHJlc3VsdHMgPSBbXTtcclxuICAgICAgICByZXR1cm4gbmV3IFBlcnNpc3RlbmNlUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgIGN1cnNvclJlcXVlc3Qub25lcnJvciA9IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICAgICAgcmVqZWN0KGV2ZW50LnRhcmdldC5lcnJvcik7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGN1cnNvclJlcXVlc3Qub25zdWNjZXNzID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgY3Vyc29yID0gZXZlbnQudGFyZ2V0LnJlc3VsdDtcclxuICAgICAgICAgICAgICAgIGlmICghY3Vyc29yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHZhciBjb250cm9sbGVyID0gbmV3IEl0ZXJhdGlvbkNvbnRyb2xsZXIoY3Vyc29yKTtcclxuICAgICAgICAgICAgICAgIHZhciB1c2VyUmVzdWx0ID0gZm4oY3Vyc29yLnByaW1hcnlLZXksIGN1cnNvci52YWx1ZSwgY29udHJvbGxlcik7XHJcbiAgICAgICAgICAgICAgICBpZiAodXNlclJlc3VsdCBpbnN0YW5jZW9mIFBlcnNpc3RlbmNlUHJvbWlzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB1c2VyUHJvbWlzZSA9IHVzZXJSZXN1bHQuY2F0Y2goZnVuY3Rpb24gKGVycikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyLmRvbmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZWplY3QoZXJyKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHRzLnB1c2godXNlclByb21pc2UpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKGNvbnRyb2xsZXIuaXNEb25lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoY29udHJvbGxlci5za2lwVG9LZXkgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjdXJzb3IuY29udGludWUoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGN1cnNvci5jb250aW51ZShjb250cm9sbGVyLnNraXBUb0tleSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfSkubmV4dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2Uud2FpdEZvcihyZXN1bHRzKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBTaW1wbGVEYlN0b3JlLnByb3RvdHlwZS5vcHRpb25zID0gZnVuY3Rpb24gKGluZGV4T3JSYW5nZSwgcmFuZ2UpIHtcclxuICAgICAgICB2YXIgaW5kZXhOYW1lID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIGlmIChpbmRleE9yUmFuZ2UgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIGluZGV4T3JSYW5nZSA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgICAgIGluZGV4TmFtZSA9IGluZGV4T3JSYW5nZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGFzc2VydChyYW5nZSA9PT0gdW5kZWZpbmVkLCAnM3JkIGFyZ3VtZW50IG11c3Qgbm90IGJlIGRlZmluZWQgaWYgMm5kIGlzIGEgcmFuZ2UuJyk7XHJcbiAgICAgICAgICAgICAgICByYW5nZSA9IGluZGV4T3JSYW5nZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4geyBpbmRleDogaW5kZXhOYW1lLCByYW5nZTogcmFuZ2UgfTtcclxuICAgIH07XHJcbiAgICBTaW1wbGVEYlN0b3JlLnByb3RvdHlwZS5jdXJzb3IgPSBmdW5jdGlvbiAob3B0aW9ucykge1xyXG4gICAgICAgIHZhciBkaXJlY3Rpb24gPSAnbmV4dCc7XHJcbiAgICAgICAgaWYgKG9wdGlvbnMucmV2ZXJzZSkge1xyXG4gICAgICAgICAgICBkaXJlY3Rpb24gPSAncHJldic7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChvcHRpb25zLmluZGV4KSB7XHJcbiAgICAgICAgICAgIHZhciBpbmRleCA9IHRoaXMuc3RvcmUuaW5kZXgob3B0aW9ucy5pbmRleCk7XHJcbiAgICAgICAgICAgIGlmIChvcHRpb25zLmtleXNPbmx5KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gaW5kZXgub3BlbktleUN1cnNvcihvcHRpb25zLnJhbmdlLCBkaXJlY3Rpb24pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGluZGV4Lm9wZW5DdXJzb3Iob3B0aW9ucy5yYW5nZSwgZGlyZWN0aW9uKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3RvcmUub3BlbkN1cnNvcihvcHRpb25zLnJhbmdlLCBkaXJlY3Rpb24pO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICByZXR1cm4gU2ltcGxlRGJTdG9yZTtcclxufSgpKTtcclxuLyoqXHJcbiAqIFdyYXBzIGFuIElEQlJlcXVlc3QgaW4gYSBQZXJzaXN0ZW5jZVByb21pc2UsIHVzaW5nIHRoZSBvbnN1Y2Nlc3MgLyBvbmVycm9yXHJcbiAqIGhhbmRsZXJzIHRvIHJlc29sdmUgLyByZWplY3QgdGhlIFBlcnNpc3RlbmNlUHJvbWlzZSBhcyBhcHByb3ByaWF0ZS5cclxuICovXHJcbmZ1bmN0aW9uIHdyYXBSZXF1ZXN0KHJlcXVlc3QpIHtcclxuICAgIHJldHVybiBuZXcgUGVyc2lzdGVuY2VQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICByZXF1ZXN0Lm9uc3VjY2VzcyA9IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gZXZlbnQudGFyZ2V0LnJlc3VsdDtcclxuICAgICAgICAgICAgcmVzb2x2ZShyZXN1bHQpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmVxdWVzdC5vbmVycm9yID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIHZhciBlcnJvciA9IGNoZWNrRm9yQW5kUmVwb3J0aU9TRXJyb3IoZXZlbnQudGFyZ2V0LmVycm9yKTtcclxuICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcclxuICAgICAgICB9O1xyXG4gICAgfSk7XHJcbn1cclxuLy8gR3VhcmQgc28gd2Ugb25seSByZXBvcnQgdGhlIGVycm9yIG9uY2UuXHJcbnZhciByZXBvcnRlZElPU0Vycm9yID0gZmFsc2U7XHJcbmZ1bmN0aW9uIGNoZWNrRm9yQW5kUmVwb3J0aU9TRXJyb3IoZXJyb3IpIHtcclxuICAgIHZhciBpT1NWZXJzaW9uID0gU2ltcGxlRGIuZ2V0SU9TVmVyc2lvbih1dGlsLmdldFVBKCkpO1xyXG4gICAgaWYgKGlPU1ZlcnNpb24gPj0gMTIuMiAmJiBpT1NWZXJzaW9uIDwgMTMpIHtcclxuICAgICAgICB2YXIgSU9TX0VSUk9SID0gJ0FuIGludGVybmFsIGVycm9yIHdhcyBlbmNvdW50ZXJlZCBpbiB0aGUgSW5kZXhlZCBEYXRhYmFzZSBzZXJ2ZXInO1xyXG4gICAgICAgIGlmIChlcnJvci5tZXNzYWdlLmluZGV4T2YoSU9TX0VSUk9SKSA+PSAwKSB7XHJcbiAgICAgICAgICAgIC8vIFdyYXAgZXJyb3IgaW4gYSBtb3JlIGRlc2NyaXB0aXZlIG9uZS5cclxuICAgICAgICAgICAgdmFyIG5ld0Vycm9yXzEgPSBuZXcgRmlyZXN0b3JlRXJyb3IoJ2ludGVybmFsJywgXCJJT1NfSU5ERVhFRERCX0JVRzE6IEluZGV4ZWREYiBoYXMgdGhyb3duICdcIiArIElPU19FUlJPUiArIFwiJy4gVGhpcyBpcyBsaWtlbHkgXCIgK1xyXG4gICAgICAgICAgICAgICAgXCJkdWUgdG8gYW4gdW5hdm9pZGFibGUgYnVnIGluIGlPUy4gU2VlIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcS81NjQ5NjI5Ni8xMTA5MTUgXCIgK1xyXG4gICAgICAgICAgICAgICAgXCJmb3IgZGV0YWlscyBhbmQgYSBwb3RlbnRpYWwgd29ya2Fyb3VuZC5cIik7XHJcbiAgICAgICAgICAgIGlmICghcmVwb3J0ZWRJT1NFcnJvcikge1xyXG4gICAgICAgICAgICAgICAgcmVwb3J0ZWRJT1NFcnJvciA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAvLyBUaHJvdyBhIGdsb2JhbCBleGNlcHRpb24gb3V0c2lkZSBvZiB0aGlzIHByb21pc2UgY2hhaW4sIGZvciB0aGUgdXNlciB0b1xyXG4gICAgICAgICAgICAgICAgLy8gcG90ZW50aWFsbHkgY2F0Y2guXHJcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXdFcnJvcl8xO1xyXG4gICAgICAgICAgICAgICAgfSwgMCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIG5ld0Vycm9yXzE7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGVycm9yO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKiogQSBtdXRhdGlvbiBxdWV1ZSBmb3IgYSBzcGVjaWZpYyB1c2VyLCBiYWNrZWQgYnkgSW5kZXhlZERCLiAqL1xyXG52YXIgSW5kZXhlZERiTXV0YXRpb25RdWV1ZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEluZGV4ZWREYk11dGF0aW9uUXVldWUoXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBub3JtYWxpemVkIHVzZXJJZCAoZS5nLiBudWxsIFVJRCA9PiBcIlwiIHVzZXJJZCkgdXNlZCB0byBzdG9yZSAvXHJcbiAgICAgKiByZXRyaWV2ZSBtdXRhdGlvbnMuXHJcbiAgICAgKi9cclxuICAgIHVzZXJJZCwgc2VyaWFsaXplciwgaW5kZXhNYW5hZ2VyLCByZWZlcmVuY2VEZWxlZ2F0ZSkge1xyXG4gICAgICAgIHRoaXMudXNlcklkID0gdXNlcklkO1xyXG4gICAgICAgIHRoaXMuc2VyaWFsaXplciA9IHNlcmlhbGl6ZXI7XHJcbiAgICAgICAgdGhpcy5pbmRleE1hbmFnZXIgPSBpbmRleE1hbmFnZXI7XHJcbiAgICAgICAgdGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZSA9IHJlZmVyZW5jZURlbGVnYXRlO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENhY2hlcyB0aGUgZG9jdW1lbnQga2V5cyBmb3IgcGVuZGluZyBtdXRhdGlvbiBiYXRjaGVzLiBJZiB0aGUgbXV0YXRpb25cclxuICAgICAgICAgKiBoYXMgYmVlbiByZW1vdmVkIGZyb20gSW5kZXhlZERiLCB0aGUgY2FjaGVkIHZhbHVlIG1heSBjb250aW51ZSB0b1xyXG4gICAgICAgICAqIGJlIHVzZWQgdG8gcmV0cmlldmUgdGhlIGJhdGNoJ3MgZG9jdW1lbnQga2V5cy4gVG8gcmVtb3ZlIGEgY2FjaGVkIHZhbHVlXHJcbiAgICAgICAgICogbG9jYWxseSwgYHJlbW92ZUNhY2hlZE11dGF0aW9uS2V5cygpYCBzaG91bGQgYmUgaW52b2tlZCBlaXRoZXIgZGlyZWN0bHlcclxuICAgICAgICAgKiBvciB0aHJvdWdoIGByZW1vdmVNdXRhdGlvbkJhdGNoZXMoKWAuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBXaXRoIG11bHRpLXRhYiwgd2hlbiB0aGUgcHJpbWFyeSBjbGllbnQgYWNrbm93bGVkZ2VzIG9yIHJlamVjdHMgYSBtdXRhdGlvbixcclxuICAgICAgICAgKiB0aGlzIGNhY2hlIGlzIHVzZWQgYnkgc2Vjb25kYXJ5IGNsaWVudHMgdG8gaW52YWxpZGF0ZSB0aGUgbG9jYWxcclxuICAgICAgICAgKiB2aWV3IG9mIHRoZSBkb2N1bWVudHMgdGhhdCB3ZXJlIHByZXZpb3VzbHkgYWZmZWN0ZWQgYnkgdGhlIG11dGF0aW9uLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktdGFiIG9ubHkuXHJcbiAgICAgICAgdGhpcy5kb2N1bWVudEtleXNCeUJhdGNoSWQgPSB7fTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhIG5ldyBtdXRhdGlvbiBxdWV1ZSBmb3IgdGhlIGdpdmVuIHVzZXIuXHJcbiAgICAgKiBAcGFyYW0gdXNlciBUaGUgdXNlciBmb3Igd2hpY2ggdG8gY3JlYXRlIGEgbXV0YXRpb24gcXVldWUuXHJcbiAgICAgKiBAcGFyYW0gc2VyaWFsaXplciBUaGUgc2VyaWFsaXplciB0byB1c2Ugd2hlbiBwZXJzaXN0aW5nIHRvIEluZGV4ZWREYi5cclxuICAgICAqL1xyXG4gICAgSW5kZXhlZERiTXV0YXRpb25RdWV1ZS5mb3JVc2VyID0gZnVuY3Rpb24gKHVzZXIsIHNlcmlhbGl6ZXIsIGluZGV4TWFuYWdlciwgcmVmZXJlbmNlRGVsZWdhdGUpIHtcclxuICAgICAgICAvLyBUT0RPKG1jZyk6IEZpZ3VyZSBvdXQgd2hhdCBjb25zdHJhaW50cyB0aGVyZSBhcmUgb24gdXNlcklEc1xyXG4gICAgICAgIC8vIEluIHBhcnRpY3VsYXIsIGFyZSB0aGVyZSBhbnkgcmVzZXJ2ZWQgY2hhcmFjdGVycz8gYXJlIGVtcHR5IGlkcyBhbGxvd2VkP1xyXG4gICAgICAgIC8vIEZvciB0aGUgbW9tZW50IHN0b3JlIHRoZXNlIHRvZ2V0aGVyIGluIHRoZSBzYW1lIG11dGF0aW9ucyB0YWJsZSBhc3N1bWluZ1xyXG4gICAgICAgIC8vIHRoYXQgZW1wdHkgdXNlcklEcyBhcmVuJ3QgYWxsb3dlZC5cclxuICAgICAgICBhc3NlcnQodXNlci51aWQgIT09ICcnLCAnVXNlcklEIG11c3Qgbm90IGJlIGFuIGVtcHR5IHN0cmluZy4nKTtcclxuICAgICAgICB2YXIgdXNlcklkID0gdXNlci5pc0F1dGhlbnRpY2F0ZWQoKSA/IHVzZXIudWlkIDogJyc7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBJbmRleGVkRGJNdXRhdGlvblF1ZXVlKHVzZXJJZCwgc2VyaWFsaXplciwgaW5kZXhNYW5hZ2VyLCByZWZlcmVuY2VEZWxlZ2F0ZSk7XHJcbiAgICB9O1xyXG4gICAgSW5kZXhlZERiTXV0YXRpb25RdWV1ZS5wcm90b3R5cGUuY2hlY2tFbXB0eSA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbikge1xyXG4gICAgICAgIHZhciBlbXB0eSA9IHRydWU7XHJcbiAgICAgICAgdmFyIHJhbmdlID0gSURCS2V5UmFuZ2UuYm91bmQoW3RoaXMudXNlcklkLCBOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFldLCBbdGhpcy51c2VySWQsIE51bWJlci5QT1NJVElWRV9JTkZJTklUWV0pO1xyXG4gICAgICAgIHJldHVybiBtdXRhdGlvbnNTdG9yZSh0cmFuc2FjdGlvbilcclxuICAgICAgICAgICAgLml0ZXJhdGUoeyBpbmRleDogRGJNdXRhdGlvbkJhdGNoLnVzZXJNdXRhdGlvbnNJbmRleCwgcmFuZ2U6IHJhbmdlIH0sIGZ1bmN0aW9uIChrZXksIHZhbHVlLCBjb250cm9sKSB7XHJcbiAgICAgICAgICAgIGVtcHR5ID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGNvbnRyb2wuZG9uZSgpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIGVtcHR5OyB9KTtcclxuICAgIH07XHJcbiAgICBJbmRleGVkRGJNdXRhdGlvblF1ZXVlLnByb3RvdHlwZS5hY2tub3dsZWRnZUJhdGNoID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCBiYXRjaCwgc3RyZWFtVG9rZW4pIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRNdXRhdGlvblF1ZXVlTWV0YWRhdGEodHJhbnNhY3Rpb24pLm5leHQoZnVuY3Rpb24gKG1ldGFkYXRhKSB7XHJcbiAgICAgICAgICAgIG1ldGFkYXRhLmxhc3RTdHJlYW1Ub2tlbiA9IGNvbnZlcnRTdHJlYW1Ub2tlbihzdHJlYW1Ub2tlbik7XHJcbiAgICAgICAgICAgIHJldHVybiBtdXRhdGlvblF1ZXVlc1N0b3JlKHRyYW5zYWN0aW9uKS5wdXQobWV0YWRhdGEpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIEluZGV4ZWREYk11dGF0aW9uUXVldWUucHJvdG90eXBlLmdldExhc3RTdHJlYW1Ub2tlbiA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbikge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldE11dGF0aW9uUXVldWVNZXRhZGF0YSh0cmFuc2FjdGlvbikubmV4dChmdW5jdGlvbiAobWV0YWRhdGEpIHsgcmV0dXJuIG1ldGFkYXRhLmxhc3RTdHJlYW1Ub2tlbjsgfSk7XHJcbiAgICB9O1xyXG4gICAgSW5kZXhlZERiTXV0YXRpb25RdWV1ZS5wcm90b3R5cGUuc2V0TGFzdFN0cmVhbVRva2VuID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCBzdHJlYW1Ub2tlbikge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldE11dGF0aW9uUXVldWVNZXRhZGF0YSh0cmFuc2FjdGlvbikubmV4dChmdW5jdGlvbiAobWV0YWRhdGEpIHtcclxuICAgICAgICAgICAgbWV0YWRhdGEubGFzdFN0cmVhbVRva2VuID0gY29udmVydFN0cmVhbVRva2VuKHN0cmVhbVRva2VuKTtcclxuICAgICAgICAgICAgcmV0dXJuIG11dGF0aW9uUXVldWVzU3RvcmUodHJhbnNhY3Rpb24pLnB1dChtZXRhZGF0YSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgSW5kZXhlZERiTXV0YXRpb25RdWV1ZS5wcm90b3R5cGUuYWRkTXV0YXRpb25CYXRjaCA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwgbG9jYWxXcml0ZVRpbWUsIGJhc2VNdXRhdGlvbnMsIG11dGF0aW9ucykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIGRvY3VtZW50U3RvcmUgPSBkb2N1bWVudE11dGF0aW9uc1N0b3JlKHRyYW5zYWN0aW9uKTtcclxuICAgICAgICB2YXIgbXV0YXRpb25TdG9yZSA9IG11dGF0aW9uc1N0b3JlKHRyYW5zYWN0aW9uKTtcclxuICAgICAgICAvLyBUaGUgSW5kZXhlZERiIGltcGxlbWVudGF0aW9uIGluIENocm9tZSAoYW5kIEZpcmVmb3gpIGRvZXMgbm90IGhhbmRsZVxyXG4gICAgICAgIC8vIGNvbXBvdW5kIGluZGljZXMgdGhhdCBpbmNsdWRlIGF1dG8tZ2VuZXJhdGVkIGtleXMgY29ycmVjdGx5LiBUbyBlbnN1cmVcclxuICAgICAgICAvLyB0aGF0IHRoZSBpbmRleCBlbnRyeSBpcyBhZGRlZCBjb3JyZWN0bHkgaW4gYWxsIGJyb3dzZXJzLCB3ZSBwZXJmb3JtIHR3b1xyXG4gICAgICAgIC8vIHdyaXRlczogVGhlIGZpcnN0IHdyaXRlIGlzIHVzZWQgdG8gcmV0cmlldmUgdGhlIG5leHQgYXV0by1nZW5lcmF0ZWQgQmF0Y2hcclxuICAgICAgICAvLyBJRCwgYW5kIHRoZSBzZWNvbmQgd3JpdGUgcG9wdWxhdGVzIHRoZSBpbmRleCBhbmQgc3RvcmVzIHRoZSBhY3R1YWxcclxuICAgICAgICAvLyBtdXRhdGlvbiBiYXRjaC5cclxuICAgICAgICAvLyBTZWU6IGh0dHBzOi8vYnVncy5jaHJvbWl1bS5vcmcvcC9jaHJvbWl1bS9pc3N1ZXMvZGV0YWlsP2lkPTcwMTk3MlxyXG4gICAgICAgIC8vIFdlIHdyaXRlIGFuIGVtcHR5IG9iamVjdCB0byBvYnRhaW4ga2V5XHJcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuICAgICAgICByZXR1cm4gbXV0YXRpb25TdG9yZS5hZGQoe30pLm5leHQoZnVuY3Rpb24gKGJhdGNoSWQpIHtcclxuICAgICAgICAgICAgYXNzZXJ0KHR5cGVvZiBiYXRjaElkID09PSAnbnVtYmVyJywgJ0F1dG8tZ2VuZXJhdGVkIGtleSBpcyBub3QgYSBudW1iZXInKTtcclxuICAgICAgICAgICAgdmFyIGJhdGNoID0gbmV3IE11dGF0aW9uQmF0Y2goYmF0Y2hJZCwgbG9jYWxXcml0ZVRpbWUsIGJhc2VNdXRhdGlvbnMsIG11dGF0aW9ucyk7XHJcbiAgICAgICAgICAgIHZhciBkYkJhdGNoID0gX3RoaXMuc2VyaWFsaXplci50b0RiTXV0YXRpb25CYXRjaChfdGhpcy51c2VySWQsIGJhdGNoKTtcclxuICAgICAgICAgICAgdmFyIHByb21pc2VzID0gW107XHJcbiAgICAgICAgICAgIHZhciBjb2xsZWN0aW9uUGFyZW50cyA9IG5ldyBTb3J0ZWRTZXQoZnVuY3Rpb24gKGwsIHIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBwcmltaXRpdmVDb21wYXJhdG9yKGwuY2Fub25pY2FsU3RyaW5nKCksIHIuY2Fub25pY2FsU3RyaW5nKCkpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBtdXRhdGlvbnNfMSA9IG11dGF0aW9uczsgX2kgPCBtdXRhdGlvbnNfMS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgICAgIHZhciBtdXRhdGlvbiA9IG11dGF0aW9uc18xW19pXTtcclxuICAgICAgICAgICAgICAgIHZhciBpbmRleEtleSA9IERiRG9jdW1lbnRNdXRhdGlvbi5rZXkoX3RoaXMudXNlcklkLCBtdXRhdGlvbi5rZXkucGF0aCwgYmF0Y2hJZCk7XHJcbiAgICAgICAgICAgICAgICBjb2xsZWN0aW9uUGFyZW50cyA9IGNvbGxlY3Rpb25QYXJlbnRzLmFkZChtdXRhdGlvbi5rZXkucGF0aC5wb3BMYXN0KCkpO1xyXG4gICAgICAgICAgICAgICAgcHJvbWlzZXMucHVzaChtdXRhdGlvblN0b3JlLnB1dChkYkJhdGNoKSk7XHJcbiAgICAgICAgICAgICAgICBwcm9taXNlcy5wdXNoKGRvY3VtZW50U3RvcmUucHV0KGluZGV4S2V5LCBEYkRvY3VtZW50TXV0YXRpb24uUExBQ0VIT0xERVIpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb2xsZWN0aW9uUGFyZW50cy5mb3JFYWNoKGZ1bmN0aW9uIChwYXJlbnQpIHtcclxuICAgICAgICAgICAgICAgIHByb21pc2VzLnB1c2goX3RoaXMuaW5kZXhNYW5hZ2VyLmFkZFRvQ29sbGVjdGlvblBhcmVudEluZGV4KHRyYW5zYWN0aW9uLCBwYXJlbnQpKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHRyYW5zYWN0aW9uLmFkZE9uQ29tbWl0dGVkTGlzdGVuZXIoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuZG9jdW1lbnRLZXlzQnlCYXRjaElkW2JhdGNoSWRdID0gYmF0Y2gua2V5cygpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS53YWl0Rm9yKHByb21pc2VzKS5uZXh0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIGJhdGNoOyB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBJbmRleGVkRGJNdXRhdGlvblF1ZXVlLnByb3RvdHlwZS5sb29rdXBNdXRhdGlvbkJhdGNoID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCBiYXRjaElkKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICByZXR1cm4gbXV0YXRpb25zU3RvcmUodHJhbnNhY3Rpb24pXHJcbiAgICAgICAgICAgIC5nZXQoYmF0Y2hJZClcclxuICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKGRiQmF0Y2gpIHtcclxuICAgICAgICAgICAgaWYgKGRiQmF0Y2gpIHtcclxuICAgICAgICAgICAgICAgIGFzc2VydChkYkJhdGNoLnVzZXJJZCA9PT0gX3RoaXMudXNlcklkLCBcIlVuZXhwZWN0ZWQgdXNlciAnXCIgKyBkYkJhdGNoLnVzZXJJZCArIFwiJyBmb3IgbXV0YXRpb24gYmF0Y2ggXCIgKyBiYXRjaElkKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5zZXJpYWxpemVyLmZyb21EYk11dGF0aW9uQmF0Y2goZGJCYXRjaCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgSW5kZXhlZERiTXV0YXRpb25RdWV1ZS5wcm90b3R5cGUubG9va3VwTXV0YXRpb25LZXlzID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCBiYXRjaElkKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBpZiAodGhpcy5kb2N1bWVudEtleXNCeUJhdGNoSWRbYmF0Y2hJZF0pIHtcclxuICAgICAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKHRoaXMuZG9jdW1lbnRLZXlzQnlCYXRjaElkW2JhdGNoSWRdKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmxvb2t1cE11dGF0aW9uQmF0Y2godHJhbnNhY3Rpb24sIGJhdGNoSWQpLm5leHQoZnVuY3Rpb24gKGJhdGNoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoYmF0Y2gpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIga2V5cyA9IGJhdGNoLmtleXMoKTtcclxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5kb2N1bWVudEtleXNCeUJhdGNoSWRbYmF0Y2hJZF0gPSBrZXlzO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBrZXlzO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBJbmRleGVkRGJNdXRhdGlvblF1ZXVlLnByb3RvdHlwZS5nZXROZXh0TXV0YXRpb25CYXRjaEFmdGVyQmF0Y2hJZCA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwgYmF0Y2hJZCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIG5leHRCYXRjaElkID0gYmF0Y2hJZCArIDE7XHJcbiAgICAgICAgdmFyIHJhbmdlID0gSURCS2V5UmFuZ2UubG93ZXJCb3VuZChbdGhpcy51c2VySWQsIG5leHRCYXRjaElkXSk7XHJcbiAgICAgICAgdmFyIGZvdW5kQmF0Y2ggPSBudWxsO1xyXG4gICAgICAgIHJldHVybiBtdXRhdGlvbnNTdG9yZSh0cmFuc2FjdGlvbilcclxuICAgICAgICAgICAgLml0ZXJhdGUoeyBpbmRleDogRGJNdXRhdGlvbkJhdGNoLnVzZXJNdXRhdGlvbnNJbmRleCwgcmFuZ2U6IHJhbmdlIH0sIGZ1bmN0aW9uIChrZXksIGRiQmF0Y2gsIGNvbnRyb2wpIHtcclxuICAgICAgICAgICAgaWYgKGRiQmF0Y2gudXNlcklkID09PSBfdGhpcy51c2VySWQpIHtcclxuICAgICAgICAgICAgICAgIGFzc2VydChkYkJhdGNoLmJhdGNoSWQgPj0gbmV4dEJhdGNoSWQsICdTaG91bGQgaGF2ZSBmb3VuZCBtdXRhdGlvbiBhZnRlciAnICsgbmV4dEJhdGNoSWQpO1xyXG4gICAgICAgICAgICAgICAgZm91bmRCYXRjaCA9IF90aGlzLnNlcmlhbGl6ZXIuZnJvbURiTXV0YXRpb25CYXRjaChkYkJhdGNoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb250cm9sLmRvbmUoKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAubmV4dChmdW5jdGlvbiAoKSB7IHJldHVybiBmb3VuZEJhdGNoOyB9KTtcclxuICAgIH07XHJcbiAgICBJbmRleGVkRGJNdXRhdGlvblF1ZXVlLnByb3RvdHlwZS5nZXRIaWdoZXN0VW5hY2tub3dsZWRnZWRCYXRjaElkID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uKSB7XHJcbiAgICAgICAgdmFyIHJhbmdlID0gSURCS2V5UmFuZ2UudXBwZXJCb3VuZChbXHJcbiAgICAgICAgICAgIHRoaXMudXNlcklkLFxyXG4gICAgICAgICAgICBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFlcclxuICAgICAgICBdKTtcclxuICAgICAgICB2YXIgYmF0Y2hJZCA9IEJBVENISURfVU5LTk9XTjtcclxuICAgICAgICByZXR1cm4gbXV0YXRpb25zU3RvcmUodHJhbnNhY3Rpb24pXHJcbiAgICAgICAgICAgIC5pdGVyYXRlKHsgaW5kZXg6IERiTXV0YXRpb25CYXRjaC51c2VyTXV0YXRpb25zSW5kZXgsIHJhbmdlOiByYW5nZSwgcmV2ZXJzZTogdHJ1ZSB9LCBmdW5jdGlvbiAoa2V5LCBkYkJhdGNoLCBjb250cm9sKSB7XHJcbiAgICAgICAgICAgIGJhdGNoSWQgPSBkYkJhdGNoLmJhdGNoSWQ7XHJcbiAgICAgICAgICAgIGNvbnRyb2wuZG9uZSgpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIGJhdGNoSWQ7IH0pO1xyXG4gICAgfTtcclxuICAgIEluZGV4ZWREYk11dGF0aW9uUXVldWUucHJvdG90eXBlLmdldEFsbE11dGF0aW9uQmF0Y2hlcyA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIHJhbmdlID0gSURCS2V5UmFuZ2UuYm91bmQoW3RoaXMudXNlcklkLCBCQVRDSElEX1VOS05PV05dLCBbdGhpcy51c2VySWQsIE51bWJlci5QT1NJVElWRV9JTkZJTklUWV0pO1xyXG4gICAgICAgIHJldHVybiBtdXRhdGlvbnNTdG9yZSh0cmFuc2FjdGlvbilcclxuICAgICAgICAgICAgLmxvYWRBbGwoRGJNdXRhdGlvbkJhdGNoLnVzZXJNdXRhdGlvbnNJbmRleCwgcmFuZ2UpXHJcbiAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uIChkYkJhdGNoZXMpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGRiQmF0Y2hlcy5tYXAoZnVuY3Rpb24gKGRiQmF0Y2gpIHsgcmV0dXJuIF90aGlzLnNlcmlhbGl6ZXIuZnJvbURiTXV0YXRpb25CYXRjaChkYkJhdGNoKTsgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgSW5kZXhlZERiTXV0YXRpb25RdWV1ZS5wcm90b3R5cGUuZ2V0QWxsTXV0YXRpb25CYXRjaGVzQWZmZWN0aW5nRG9jdW1lbnRLZXkgPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24sIGRvY3VtZW50S2V5KSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICAvLyBTY2FuIHRoZSBkb2N1bWVudC1tdXRhdGlvbiBpbmRleCBzdGFydGluZyB3aXRoIGEgcHJlZml4IHN0YXJ0aW5nIHdpdGhcclxuICAgICAgICAvLyB0aGUgZ2l2ZW4gZG9jdW1lbnRLZXkuXHJcbiAgICAgICAgdmFyIGluZGV4UHJlZml4ID0gRGJEb2N1bWVudE11dGF0aW9uLnByZWZpeEZvclBhdGgodGhpcy51c2VySWQsIGRvY3VtZW50S2V5LnBhdGgpO1xyXG4gICAgICAgIHZhciBpbmRleFN0YXJ0ID0gSURCS2V5UmFuZ2UubG93ZXJCb3VuZChpbmRleFByZWZpeCk7XHJcbiAgICAgICAgdmFyIHJlc3VsdHMgPSBbXTtcclxuICAgICAgICByZXR1cm4gZG9jdW1lbnRNdXRhdGlvbnNTdG9yZSh0cmFuc2FjdGlvbilcclxuICAgICAgICAgICAgLml0ZXJhdGUoeyByYW5nZTogaW5kZXhTdGFydCB9LCBmdW5jdGlvbiAoaW5kZXhLZXksIF8sIGNvbnRyb2wpIHtcclxuICAgICAgICAgICAgdmFyIHVzZXJJRCA9IGluZGV4S2V5WzBdLCBlbmNvZGVkUGF0aCA9IGluZGV4S2V5WzFdLCBiYXRjaElkID0gaW5kZXhLZXlbMl07XHJcbiAgICAgICAgICAgIC8vIE9ubHkgY29uc2lkZXIgcm93cyBtYXRjaGluZyBleGFjdGx5IHRoZSBzcGVjaWZpYyBrZXkgb2ZcclxuICAgICAgICAgICAgLy8gaW50ZXJlc3QuIE5vdGUgdGhhdCBiZWNhdXNlIHdlIG9yZGVyIGJ5IHBhdGggZmlyc3QsIGFuZCB3ZVxyXG4gICAgICAgICAgICAvLyBvcmRlciB0ZXJtaW5hdG9ycyBiZWZvcmUgcGF0aCBzZXBhcmF0b3JzLCB3ZSdsbCBlbmNvdW50ZXIgYWxsXHJcbiAgICAgICAgICAgIC8vIHRoZSBpbmRleCByb3dzIGZvciBkb2N1bWVudEtleSBjb250aWd1b3VzbHkuIEluIHBhcnRpY3VsYXIsIGFsbFxyXG4gICAgICAgICAgICAvLyB0aGUgcm93cyBmb3IgZG9jdW1lbnRLZXkgd2lsbCBvY2N1ciBiZWZvcmUgYW55IHJvd3MgZm9yXHJcbiAgICAgICAgICAgIC8vIGRvY3VtZW50cyBuZXN0ZWQgaW4gYSBzdWJjb2xsZWN0aW9uIGJlbmVhdGggZG9jdW1lbnRLZXkgc28gd2VcclxuICAgICAgICAgICAgLy8gY2FuIHN0b3AgYXMgc29vbiBhcyB3ZSBoaXQgYW55IHN1Y2ggcm93LlxyXG4gICAgICAgICAgICB2YXIgcGF0aCA9IGRlY29kZShlbmNvZGVkUGF0aCk7XHJcbiAgICAgICAgICAgIGlmICh1c2VySUQgIT09IF90aGlzLnVzZXJJZCB8fCAhZG9jdW1lbnRLZXkucGF0aC5pc0VxdWFsKHBhdGgpKSB7XHJcbiAgICAgICAgICAgICAgICBjb250cm9sLmRvbmUoKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBMb29rIHVwIHRoZSBtdXRhdGlvbiBiYXRjaCBpbiB0aGUgc3RvcmUuXHJcbiAgICAgICAgICAgIHJldHVybiBtdXRhdGlvbnNTdG9yZSh0cmFuc2FjdGlvbilcclxuICAgICAgICAgICAgICAgIC5nZXQoYmF0Y2hJZClcclxuICAgICAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uIChtdXRhdGlvbikge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFtdXRhdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IGZhaWwoJ0RhbmdsaW5nIGRvY3VtZW50LW11dGF0aW9uIHJlZmVyZW5jZSBmb3VuZDogJyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4S2V5ICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJyB3aGljaCBwb2ludHMgdG8gJyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhdGNoSWQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYXNzZXJ0KG11dGF0aW9uLnVzZXJJZCA9PT0gX3RoaXMudXNlcklkLCBcIlVuZXhwZWN0ZWQgdXNlciAnXCIgKyBtdXRhdGlvbi51c2VySWQgKyBcIicgZm9yIG11dGF0aW9uIGJhdGNoIFwiICsgYmF0Y2hJZCk7XHJcbiAgICAgICAgICAgICAgICByZXN1bHRzLnB1c2goX3RoaXMuc2VyaWFsaXplci5mcm9tRGJNdXRhdGlvbkJhdGNoKG11dGF0aW9uKSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIHJlc3VsdHM7IH0pO1xyXG4gICAgfTtcclxuICAgIEluZGV4ZWREYk11dGF0aW9uUXVldWUucHJvdG90eXBlLmdldEFsbE11dGF0aW9uQmF0Y2hlc0FmZmVjdGluZ0RvY3VtZW50S2V5cyA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwgZG9jdW1lbnRLZXlzKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgdW5pcXVlQmF0Y2hJRHMgPSBuZXcgU29ydGVkU2V0KHByaW1pdGl2ZUNvbXBhcmF0b3IpO1xyXG4gICAgICAgIHZhciBwcm9taXNlcyA9IFtdO1xyXG4gICAgICAgIGRvY3VtZW50S2V5cy5mb3JFYWNoKGZ1bmN0aW9uIChkb2N1bWVudEtleSkge1xyXG4gICAgICAgICAgICB2YXIgaW5kZXhTdGFydCA9IERiRG9jdW1lbnRNdXRhdGlvbi5wcmVmaXhGb3JQYXRoKF90aGlzLnVzZXJJZCwgZG9jdW1lbnRLZXkucGF0aCk7XHJcbiAgICAgICAgICAgIHZhciByYW5nZSA9IElEQktleVJhbmdlLmxvd2VyQm91bmQoaW5kZXhTdGFydCk7XHJcbiAgICAgICAgICAgIHZhciBwcm9taXNlID0gZG9jdW1lbnRNdXRhdGlvbnNTdG9yZSh0cmFuc2FjdGlvbikuaXRlcmF0ZSh7IHJhbmdlOiByYW5nZSB9LCBmdW5jdGlvbiAoaW5kZXhLZXksIF8sIGNvbnRyb2wpIHtcclxuICAgICAgICAgICAgICAgIHZhciB1c2VySUQgPSBpbmRleEtleVswXSwgZW5jb2RlZFBhdGggPSBpbmRleEtleVsxXSwgYmF0Y2hJRCA9IGluZGV4S2V5WzJdO1xyXG4gICAgICAgICAgICAgICAgLy8gT25seSBjb25zaWRlciByb3dzIG1hdGNoaW5nIGV4YWN0bHkgdGhlIHNwZWNpZmljIGtleSBvZlxyXG4gICAgICAgICAgICAgICAgLy8gaW50ZXJlc3QuIE5vdGUgdGhhdCBiZWNhdXNlIHdlIG9yZGVyIGJ5IHBhdGggZmlyc3QsIGFuZCB3ZVxyXG4gICAgICAgICAgICAgICAgLy8gb3JkZXIgdGVybWluYXRvcnMgYmVmb3JlIHBhdGggc2VwYXJhdG9ycywgd2UnbGwgZW5jb3VudGVyIGFsbFxyXG4gICAgICAgICAgICAgICAgLy8gdGhlIGluZGV4IHJvd3MgZm9yIGRvY3VtZW50S2V5IGNvbnRpZ3VvdXNseS4gSW4gcGFydGljdWxhciwgYWxsXHJcbiAgICAgICAgICAgICAgICAvLyB0aGUgcm93cyBmb3IgZG9jdW1lbnRLZXkgd2lsbCBvY2N1ciBiZWZvcmUgYW55IHJvd3MgZm9yXHJcbiAgICAgICAgICAgICAgICAvLyBkb2N1bWVudHMgbmVzdGVkIGluIGEgc3ViY29sbGVjdGlvbiBiZW5lYXRoIGRvY3VtZW50S2V5IHNvIHdlXHJcbiAgICAgICAgICAgICAgICAvLyBjYW4gc3RvcCBhcyBzb29uIGFzIHdlIGhpdCBhbnkgc3VjaCByb3cuXHJcbiAgICAgICAgICAgICAgICB2YXIgcGF0aCA9IGRlY29kZShlbmNvZGVkUGF0aCk7XHJcbiAgICAgICAgICAgICAgICBpZiAodXNlcklEICE9PSBfdGhpcy51c2VySWQgfHwgIWRvY3VtZW50S2V5LnBhdGguaXNFcXVhbChwYXRoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2wuZG9uZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHVuaXF1ZUJhdGNoSURzID0gdW5pcXVlQmF0Y2hJRHMuYWRkKGJhdGNoSUQpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcHJvbWlzZXMucHVzaChwcm9taXNlKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLndhaXRGb3IocHJvbWlzZXMpLm5leHQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXMubG9va3VwTXV0YXRpb25CYXRjaGVzKHRyYW5zYWN0aW9uLCB1bmlxdWVCYXRjaElEcyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgSW5kZXhlZERiTXV0YXRpb25RdWV1ZS5wcm90b3R5cGUuZ2V0QWxsTXV0YXRpb25CYXRjaGVzQWZmZWN0aW5nUXVlcnkgPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24sIHF1ZXJ5KSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBhc3NlcnQoIXF1ZXJ5LmlzRG9jdW1lbnRRdWVyeSgpLCBcIkRvY3VtZW50IHF1ZXJpZXMgc2hvdWxkbid0IGdvIGRvd24gdGhpcyBwYXRoXCIpO1xyXG4gICAgICAgIGFzc2VydCghcXVlcnkuaXNDb2xsZWN0aW9uR3JvdXBRdWVyeSgpLCAnQ29sbGVjdGlvbkdyb3VwIHF1ZXJpZXMgc2hvdWxkIGJlIGhhbmRsZWQgaW4gTG9jYWxEb2N1bWVudHNWaWV3Jyk7XHJcbiAgICAgICAgdmFyIHF1ZXJ5UGF0aCA9IHF1ZXJ5LnBhdGg7XHJcbiAgICAgICAgdmFyIGltbWVkaWF0ZUNoaWxkcmVuTGVuZ3RoID0gcXVlcnlQYXRoLmxlbmd0aCArIDE7XHJcbiAgICAgICAgLy8gVE9ETyhtY2cpOiBBY3R1YWxseSBpbXBsZW1lbnQgYSBzaW5nbGUtY29sbGVjdGlvbiBxdWVyeVxyXG4gICAgICAgIC8vXHJcbiAgICAgICAgLy8gVGhpcyBpcyBhY3R1YWxseSBleGVjdXRpbmcgYW4gYW5jZXN0b3IgcXVlcnksIHRyYXZlcnNpbmcgdGhlIHdob2xlXHJcbiAgICAgICAgLy8gc3VidHJlZSBiZWxvdyB0aGUgY29sbGVjdGlvbiB3aGljaCBjYW4gYmUgaG9ycmlmaWNhbGx5IGluZWZmaWNpZW50IGZvclxyXG4gICAgICAgIC8vIHNvbWUgc3RydWN0dXJlcy4gVGhlIHJpZ2h0IHdheSB0byBzb2x2ZSB0aGlzIGlzIHRvIGltcGxlbWVudCB0aGUgZnVsbFxyXG4gICAgICAgIC8vIHZhbHVlIGluZGV4LCBidXQgdGhhdCdzIG5vdCBpbiB0aGUgY2FyZHMgaW4gdGhlIG5lYXIgZnV0dXJlIHNvIHRoaXMgaXNcclxuICAgICAgICAvLyB0aGUgYmVzdCB3ZSBjYW4gZG8gZm9yIHRoZSBtb21lbnQuXHJcbiAgICAgICAgLy9cclxuICAgICAgICAvLyBTaW5jZSB3ZSBkb24ndCB5ZXQgaW5kZXggdGhlIGFjdHVhbCBwcm9wZXJ0aWVzIGluIHRoZSBtdXRhdGlvbnMsIG91clxyXG4gICAgICAgIC8vIGN1cnJlbnQgYXBwcm9hY2ggaXMgdG8ganVzdCByZXR1cm4gYWxsIG11dGF0aW9uIGJhdGNoZXMgdGhhdCBhZmZlY3RcclxuICAgICAgICAvLyBkb2N1bWVudHMgaW4gdGhlIGNvbGxlY3Rpb24gYmVpbmcgcXVlcmllZC5cclxuICAgICAgICB2YXIgaW5kZXhQcmVmaXggPSBEYkRvY3VtZW50TXV0YXRpb24ucHJlZml4Rm9yUGF0aCh0aGlzLnVzZXJJZCwgcXVlcnlQYXRoKTtcclxuICAgICAgICB2YXIgaW5kZXhTdGFydCA9IElEQktleVJhbmdlLmxvd2VyQm91bmQoaW5kZXhQcmVmaXgpO1xyXG4gICAgICAgIC8vIENvbGxlY3QgdXAgdW5pcXVlIGJhdGNoSURzIGVuY291bnRlcmVkIGR1cmluZyBhIHNjYW4gb2YgdGhlIGluZGV4LiBVc2UgYVxyXG4gICAgICAgIC8vIFNvcnRlZFNldCB0byBhY2N1bXVsYXRlIGJhdGNoIElEcyBzbyB0aGV5IGNhbiBiZSB0cmF2ZXJzZWQgaW4gb3JkZXIgaW4gYVxyXG4gICAgICAgIC8vIHNjYW4gb2YgdGhlIG1haW4gdGFibGUuXHJcbiAgICAgICAgdmFyIHVuaXF1ZUJhdGNoSURzID0gbmV3IFNvcnRlZFNldChwcmltaXRpdmVDb21wYXJhdG9yKTtcclxuICAgICAgICByZXR1cm4gZG9jdW1lbnRNdXRhdGlvbnNTdG9yZSh0cmFuc2FjdGlvbilcclxuICAgICAgICAgICAgLml0ZXJhdGUoeyByYW5nZTogaW5kZXhTdGFydCB9LCBmdW5jdGlvbiAoaW5kZXhLZXksIF8sIGNvbnRyb2wpIHtcclxuICAgICAgICAgICAgdmFyIHVzZXJJRCA9IGluZGV4S2V5WzBdLCBlbmNvZGVkUGF0aCA9IGluZGV4S2V5WzFdLCBiYXRjaElEID0gaW5kZXhLZXlbMl07XHJcbiAgICAgICAgICAgIHZhciBwYXRoID0gZGVjb2RlKGVuY29kZWRQYXRoKTtcclxuICAgICAgICAgICAgaWYgKHVzZXJJRCAhPT0gX3RoaXMudXNlcklkIHx8ICFxdWVyeVBhdGguaXNQcmVmaXhPZihwYXRoKSkge1xyXG4gICAgICAgICAgICAgICAgY29udHJvbC5kb25lKCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gUm93cyB3aXRoIGRvY3VtZW50IGtleXMgbW9yZSB0aGFuIG9uZSBzZWdtZW50IGxvbmdlciB0aGFuIHRoZVxyXG4gICAgICAgICAgICAvLyBxdWVyeSBwYXRoIGNhbid0IGJlIG1hdGNoZXMuIEZvciBleGFtcGxlLCBhIHF1ZXJ5IG9uICdyb29tcydcclxuICAgICAgICAgICAgLy8gY2FuJ3QgbWF0Y2ggdGhlIGRvY3VtZW50IC9yb29tcy9hYmMvbWVzc2FnZXMveHl4LlxyXG4gICAgICAgICAgICAvLyBUT0RPKG1jZyk6IHdlJ2xsIG5lZWQgYSBkaWZmZXJlbnQgc2Nhbm5lciB3aGVuIHdlIGltcGxlbWVudFxyXG4gICAgICAgICAgICAvLyBhbmNlc3RvciBxdWVyaWVzLlxyXG4gICAgICAgICAgICBpZiAocGF0aC5sZW5ndGggIT09IGltbWVkaWF0ZUNoaWxkcmVuTGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdW5pcXVlQmF0Y2hJRHMgPSB1bmlxdWVCYXRjaElEcy5hZGQoYmF0Y2hJRCk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMubG9va3VwTXV0YXRpb25CYXRjaGVzKHRyYW5zYWN0aW9uLCB1bmlxdWVCYXRjaElEcyk7IH0pO1xyXG4gICAgfTtcclxuICAgIEluZGV4ZWREYk11dGF0aW9uUXVldWUucHJvdG90eXBlLmxvb2t1cE11dGF0aW9uQmF0Y2hlcyA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwgYmF0Y2hJRHMpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhciByZXN1bHRzID0gW107XHJcbiAgICAgICAgdmFyIHByb21pc2VzID0gW107XHJcbiAgICAgICAgLy8gVE9ETyhyb2Nrd29vZCk6IEltcGxlbWVudCB0aGlzIHVzaW5nIGl0ZXJhdGUuXHJcbiAgICAgICAgYmF0Y2hJRHMuZm9yRWFjaChmdW5jdGlvbiAoYmF0Y2hJZCkge1xyXG4gICAgICAgICAgICBwcm9taXNlcy5wdXNoKG11dGF0aW9uc1N0b3JlKHRyYW5zYWN0aW9uKVxyXG4gICAgICAgICAgICAgICAgLmdldChiYXRjaElkKVxyXG4gICAgICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKG11dGF0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAobXV0YXRpb24gPT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBmYWlsKCdEYW5nbGluZyBkb2N1bWVudC1tdXRhdGlvbiByZWZlcmVuY2UgZm91bmQsICcgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnd2hpY2ggcG9pbnRzIHRvICcgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBiYXRjaElkKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGFzc2VydChtdXRhdGlvbi51c2VySWQgPT09IF90aGlzLnVzZXJJZCwgXCJVbmV4cGVjdGVkIHVzZXIgJ1wiICsgbXV0YXRpb24udXNlcklkICsgXCInIGZvciBtdXRhdGlvbiBiYXRjaCBcIiArIGJhdGNoSWQpO1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0cy5wdXNoKF90aGlzLnNlcmlhbGl6ZXIuZnJvbURiTXV0YXRpb25CYXRjaChtdXRhdGlvbikpO1xyXG4gICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS53YWl0Rm9yKHByb21pc2VzKS5uZXh0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIHJlc3VsdHM7IH0pO1xyXG4gICAgfTtcclxuICAgIEluZGV4ZWREYk11dGF0aW9uUXVldWUucHJvdG90eXBlLnJlbW92ZU11dGF0aW9uQmF0Y2ggPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24sIGJhdGNoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICByZXR1cm4gcmVtb3ZlTXV0YXRpb25CYXRjaCh0cmFuc2FjdGlvbi5zaW1wbGVEYlRyYW5zYWN0aW9uLCB0aGlzLnVzZXJJZCwgYmF0Y2gpLm5leHQoZnVuY3Rpb24gKHJlbW92ZWREb2N1bWVudHMpIHtcclxuICAgICAgICAgICAgdHJhbnNhY3Rpb24uYWRkT25Db21taXR0ZWRMaXN0ZW5lcihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5yZW1vdmVDYWNoZWRNdXRhdGlvbktleXMoYmF0Y2guYmF0Y2hJZCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLmZvckVhY2gocmVtb3ZlZERvY3VtZW50cywgZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLnJlZmVyZW5jZURlbGVnYXRlLnJlbW92ZU11dGF0aW9uUmVmZXJlbmNlKHRyYW5zYWN0aW9uLCBrZXkpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBJbmRleGVkRGJNdXRhdGlvblF1ZXVlLnByb3RvdHlwZS5yZW1vdmVDYWNoZWRNdXRhdGlvbktleXMgPSBmdW5jdGlvbiAoYmF0Y2hJZCkge1xyXG4gICAgICAgIGRlbGV0ZSB0aGlzLmRvY3VtZW50S2V5c0J5QmF0Y2hJZFtiYXRjaElkXTtcclxuICAgIH07XHJcbiAgICBJbmRleGVkRGJNdXRhdGlvblF1ZXVlLnByb3RvdHlwZS5wZXJmb3JtQ29uc2lzdGVuY3lDaGVjayA9IGZ1bmN0aW9uICh0eG4pIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNoZWNrRW1wdHkodHhuKS5uZXh0KGZ1bmN0aW9uIChlbXB0eSkge1xyXG4gICAgICAgICAgICBpZiAoIWVtcHR5KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBWZXJpZnkgdGhhdCB0aGVyZSBhcmUgbm8gZW50cmllcyBpbiB0aGUgZG9jdW1lbnRNdXRhdGlvbnMgaW5kZXggaWZcclxuICAgICAgICAgICAgLy8gdGhlIHF1ZXVlIGlzIGVtcHR5LlxyXG4gICAgICAgICAgICB2YXIgc3RhcnRSYW5nZSA9IElEQktleVJhbmdlLmxvd2VyQm91bmQoRGJEb2N1bWVudE11dGF0aW9uLnByZWZpeEZvclVzZXIoX3RoaXMudXNlcklkKSk7XHJcbiAgICAgICAgICAgIHZhciBkYW5nbGluZ011dGF0aW9uUmVmZXJlbmNlcyA9IFtdO1xyXG4gICAgICAgICAgICByZXR1cm4gZG9jdW1lbnRNdXRhdGlvbnNTdG9yZSh0eG4pXHJcbiAgICAgICAgICAgICAgICAuaXRlcmF0ZSh7IHJhbmdlOiBzdGFydFJhbmdlIH0sIGZ1bmN0aW9uIChrZXksIF8sIGNvbnRyb2wpIHtcclxuICAgICAgICAgICAgICAgIHZhciB1c2VySUQgPSBrZXlbMF07XHJcbiAgICAgICAgICAgICAgICBpZiAodXNlcklEICE9PSBfdGhpcy51c2VySWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb250cm9sLmRvbmUoKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcGF0aCA9IGRlY29kZShrZXlbMV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGRhbmdsaW5nTXV0YXRpb25SZWZlcmVuY2VzLnB1c2gocGF0aCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAubmV4dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBhc3NlcnQoZGFuZ2xpbmdNdXRhdGlvblJlZmVyZW5jZXMubGVuZ3RoID09PSAwLCAnRG9jdW1lbnQgbGVhayAtLSBkZXRlY3RlZCBkYW5nbGluZyBtdXRhdGlvbiByZWZlcmVuY2VzIHdoZW4gcXVldWUgaXMgZW1wdHkuICcgK1xyXG4gICAgICAgICAgICAgICAgICAgICdEYW5nbGluZyBrZXlzOiAnICtcclxuICAgICAgICAgICAgICAgICAgICBkYW5nbGluZ011dGF0aW9uUmVmZXJlbmNlcy5tYXAoZnVuY3Rpb24gKHApIHsgcmV0dXJuIHAuY2Fub25pY2FsU3RyaW5nKCk7IH0pKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgSW5kZXhlZERiTXV0YXRpb25RdWV1ZS5wcm90b3R5cGUuY29udGFpbnNLZXkgPSBmdW5jdGlvbiAodHhuLCBrZXkpIHtcclxuICAgICAgICByZXR1cm4gbXV0YXRpb25RdWV1ZUNvbnRhaW5zS2V5KHR4biwgdGhpcy51c2VySWQsIGtleSk7XHJcbiAgICB9O1xyXG4gICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS10YWIgb25seSAoc3RhdGUgaXMgaGVsZCBpbiBtZW1vcnkgaW4gb3RoZXIgY2xpZW50cykuXHJcbiAgICAvKiogUmV0dXJucyB0aGUgbXV0YXRpb24gcXVldWUncyBtZXRhZGF0YSBmcm9tIEluZGV4ZWREYi4gKi9cclxuICAgIEluZGV4ZWREYk11dGF0aW9uUXVldWUucHJvdG90eXBlLmdldE11dGF0aW9uUXVldWVNZXRhZGF0YSA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIG11dGF0aW9uUXVldWVzU3RvcmUodHJhbnNhY3Rpb24pXHJcbiAgICAgICAgICAgIC5nZXQodGhpcy51c2VySWQpXHJcbiAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uIChtZXRhZGF0YSkge1xyXG4gICAgICAgICAgICByZXR1cm4gKG1ldGFkYXRhIHx8XHJcbiAgICAgICAgICAgICAgICBuZXcgRGJNdXRhdGlvblF1ZXVlKF90aGlzLnVzZXJJZCwgQkFUQ0hJRF9VTktOT1dOLCBcclxuICAgICAgICAgICAgICAgIC8qbGFzdFN0cmVhbVRva2VuPSovICcnKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEluZGV4ZWREYk11dGF0aW9uUXVldWU7XHJcbn0oKSk7XHJcbi8qKlxyXG4gKiBAcmV0dXJuIHRydWUgaWYgdGhlIG11dGF0aW9uIHF1ZXVlIGZvciB0aGUgZ2l2ZW4gdXNlciBjb250YWlucyBhIHBlbmRpbmdcclxuICogICAgICAgICBtdXRhdGlvbiBmb3IgdGhlIGdpdmVuIGtleS5cclxuICovXHJcbmZ1bmN0aW9uIG11dGF0aW9uUXVldWVDb250YWluc0tleSh0eG4sIHVzZXJJZCwga2V5KSB7XHJcbiAgICB2YXIgaW5kZXhLZXkgPSBEYkRvY3VtZW50TXV0YXRpb24ucHJlZml4Rm9yUGF0aCh1c2VySWQsIGtleS5wYXRoKTtcclxuICAgIHZhciBlbmNvZGVkUGF0aCA9IGluZGV4S2V5WzFdO1xyXG4gICAgdmFyIHN0YXJ0UmFuZ2UgPSBJREJLZXlSYW5nZS5sb3dlckJvdW5kKGluZGV4S2V5KTtcclxuICAgIHZhciBjb250YWluc0tleSA9IGZhbHNlO1xyXG4gICAgcmV0dXJuIGRvY3VtZW50TXV0YXRpb25zU3RvcmUodHhuKVxyXG4gICAgICAgIC5pdGVyYXRlKHsgcmFuZ2U6IHN0YXJ0UmFuZ2UsIGtleXNPbmx5OiB0cnVlIH0sIGZ1bmN0aW9uIChrZXksIHZhbHVlLCBjb250cm9sKSB7XHJcbiAgICAgICAgdmFyIHVzZXJJRCA9IGtleVswXSwga2V5UGF0aCA9IGtleVsxXSwgLypiYXRjaElEKi8gXyA9IGtleVsyXTtcclxuICAgICAgICBpZiAodXNlcklEID09PSB1c2VySWQgJiYga2V5UGF0aCA9PT0gZW5jb2RlZFBhdGgpIHtcclxuICAgICAgICAgICAgY29udGFpbnNLZXkgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb250cm9sLmRvbmUoKTtcclxuICAgIH0pXHJcbiAgICAgICAgLm5leHQoZnVuY3Rpb24gKCkgeyByZXR1cm4gY29udGFpbnNLZXk7IH0pO1xyXG59XHJcbi8qKiBSZXR1cm5zIHRydWUgaWYgYW55IG11dGF0aW9uIHF1ZXVlIGNvbnRhaW5zIHRoZSBnaXZlbiBkb2N1bWVudC4gKi9cclxuZnVuY3Rpb24gbXV0YXRpb25RdWV1ZXNDb250YWluS2V5KHR4biwgZG9jS2V5KSB7XHJcbiAgICB2YXIgZm91bmQgPSBmYWxzZTtcclxuICAgIHJldHVybiBtdXRhdGlvblF1ZXVlc1N0b3JlKHR4bilcclxuICAgICAgICAuaXRlcmF0ZVNlcmlhbChmdW5jdGlvbiAodXNlcklkKSB7XHJcbiAgICAgICAgcmV0dXJuIG11dGF0aW9uUXVldWVDb250YWluc0tleSh0eG4sIHVzZXJJZCwgZG9jS2V5KS5uZXh0KGZ1bmN0aW9uIChjb250YWluc0tleSkge1xyXG4gICAgICAgICAgICBpZiAoY29udGFpbnNLZXkpIHtcclxuICAgICAgICAgICAgICAgIGZvdW5kID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoIWNvbnRhaW5zS2V5KTtcclxuICAgICAgICB9KTtcclxuICAgIH0pXHJcbiAgICAgICAgLm5leHQoZnVuY3Rpb24gKCkgeyByZXR1cm4gZm91bmQ7IH0pO1xyXG59XHJcbi8qKlxyXG4gKiBEZWxldGUgYSBtdXRhdGlvbiBiYXRjaCBhbmQgdGhlIGFzc29jaWF0ZWQgZG9jdW1lbnQgbXV0YXRpb25zLlxyXG4gKiBAcmV0dXJuIEEgUGVyc2lzdGVuY2VQcm9taXNlIG9mIHRoZSBkb2N1bWVudCBtdXRhdGlvbnMgdGhhdCB3ZXJlIHJlbW92ZWQuXHJcbiAqL1xyXG5mdW5jdGlvbiByZW1vdmVNdXRhdGlvbkJhdGNoKHR4biwgdXNlcklkLCBiYXRjaCkge1xyXG4gICAgdmFyIG11dGF0aW9uU3RvcmUgPSB0eG4uc3RvcmUoRGJNdXRhdGlvbkJhdGNoLnN0b3JlKTtcclxuICAgIHZhciBpbmRleFR4biA9IHR4bi5zdG9yZShEYkRvY3VtZW50TXV0YXRpb24uc3RvcmUpO1xyXG4gICAgdmFyIHByb21pc2VzID0gW107XHJcbiAgICB2YXIgcmFuZ2UgPSBJREJLZXlSYW5nZS5vbmx5KGJhdGNoLmJhdGNoSWQpO1xyXG4gICAgdmFyIG51bURlbGV0ZWQgPSAwO1xyXG4gICAgdmFyIHJlbW92ZVByb21pc2UgPSBtdXRhdGlvblN0b3JlLml0ZXJhdGUoeyByYW5nZTogcmFuZ2UgfSwgZnVuY3Rpb24gKGtleSwgdmFsdWUsIGNvbnRyb2wpIHtcclxuICAgICAgICBudW1EZWxldGVkKys7XHJcbiAgICAgICAgcmV0dXJuIGNvbnRyb2wuZGVsZXRlKCk7XHJcbiAgICB9KTtcclxuICAgIHByb21pc2VzLnB1c2gocmVtb3ZlUHJvbWlzZS5uZXh0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBhc3NlcnQobnVtRGVsZXRlZCA9PT0gMSwgJ0RhbmdsaW5nIGRvY3VtZW50LW11dGF0aW9uIHJlZmVyZW5jZSBmb3VuZDogTWlzc2luZyBiYXRjaCAnICtcclxuICAgICAgICAgICAgYmF0Y2guYmF0Y2hJZCk7XHJcbiAgICB9KSk7XHJcbiAgICB2YXIgcmVtb3ZlZERvY3VtZW50cyA9IFtdO1xyXG4gICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IGJhdGNoLm11dGF0aW9uczsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICB2YXIgbXV0YXRpb24gPSBfYVtfaV07XHJcbiAgICAgICAgdmFyIGluZGV4S2V5ID0gRGJEb2N1bWVudE11dGF0aW9uLmtleSh1c2VySWQsIG11dGF0aW9uLmtleS5wYXRoLCBiYXRjaC5iYXRjaElkKTtcclxuICAgICAgICBwcm9taXNlcy5wdXNoKGluZGV4VHhuLmRlbGV0ZShpbmRleEtleSkpO1xyXG4gICAgICAgIHJlbW92ZWREb2N1bWVudHMucHVzaChtdXRhdGlvbi5rZXkpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS53YWl0Rm9yKHByb21pc2VzKS5uZXh0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIHJlbW92ZWREb2N1bWVudHM7IH0pO1xyXG59XHJcbmZ1bmN0aW9uIGNvbnZlcnRTdHJlYW1Ub2tlbih0b2tlbikge1xyXG4gICAgaWYgKHRva2VuIGluc3RhbmNlb2YgVWludDhBcnJheSkge1xyXG4gICAgICAgIC8vIFRPRE8oYi83ODc3MTQwMyk6IENvbnZlcnQgdG9rZW5zIHRvIHN0cmluZ3MgZHVyaW5nIGRlc2VyaWFsaXphdGlvblxyXG4gICAgICAgIGFzc2VydChTaW1wbGVEYi5pc01vY2tQZXJzaXN0ZW5jZSgpLCAnUGVyc2lzdGluZyBub24tc3RyaW5nIHN0cmVhbSB0b2tlbnMgaXMgb25seSBzdXBwb3J0ZWQgd2l0aCBtb2NrIHBlcnNpc3RlbmNlLicpO1xyXG4gICAgICAgIHJldHVybiB0b2tlbi50b1N0cmluZygpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIHRva2VuO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmb3IgdGhlIG11dGF0aW9ucyBvYmplY3Qgc3RvcmUuXHJcbiAqL1xyXG5mdW5jdGlvbiBtdXRhdGlvbnNTdG9yZSh0eG4pIHtcclxuICAgIHJldHVybiBJbmRleGVkRGJQZXJzaXN0ZW5jZS5nZXRTdG9yZSh0eG4sIERiTXV0YXRpb25CYXRjaC5zdG9yZSk7XHJcbn1cclxuLyoqXHJcbiAqIEhlbHBlciB0byBnZXQgYSB0eXBlZCBTaW1wbGVEYlN0b3JlIGZvciB0aGUgbXV0YXRpb25RdWV1ZXMgb2JqZWN0IHN0b3JlLlxyXG4gKi9cclxuZnVuY3Rpb24gZG9jdW1lbnRNdXRhdGlvbnNTdG9yZSh0eG4pIHtcclxuICAgIHJldHVybiBJbmRleGVkRGJQZXJzaXN0ZW5jZS5nZXRTdG9yZSh0eG4sIERiRG9jdW1lbnRNdXRhdGlvbi5zdG9yZSk7XHJcbn1cclxuLyoqXHJcbiAqIEhlbHBlciB0byBnZXQgYSB0eXBlZCBTaW1wbGVEYlN0b3JlIGZvciB0aGUgbXV0YXRpb25RdWV1ZXMgb2JqZWN0IHN0b3JlLlxyXG4gKi9cclxuZnVuY3Rpb24gbXV0YXRpb25RdWV1ZXNTdG9yZSh0eG4pIHtcclxuICAgIHJldHVybiBJbmRleGVkRGJQZXJzaXN0ZW5jZS5nZXRTdG9yZSh0eG4sIERiTXV0YXRpb25RdWV1ZS5zdG9yZSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnZhciBSRVNFUlZFRF9CSVRTID0gMTtcclxudmFyIEdlbmVyYXRvcklkcztcclxuKGZ1bmN0aW9uIChHZW5lcmF0b3JJZHMpIHtcclxuICAgIEdlbmVyYXRvcklkc1tHZW5lcmF0b3JJZHNbXCJRdWVyeUNhY2hlXCJdID0gMF0gPSBcIlF1ZXJ5Q2FjaGVcIjtcclxuICAgIEdlbmVyYXRvcklkc1tHZW5lcmF0b3JJZHNbXCJTeW5jRW5naW5lXCJdID0gMV0gPSBcIlN5bmNFbmdpbmVcIjsgLy8gVGhlIHRhcmdldCBJRHMgZm9yIGxpbWJvIGRldGVjdGlvbiBhcmUgb2RkIChlbmQgaW4gMSkuXHJcbn0pKEdlbmVyYXRvcklkcyB8fCAoR2VuZXJhdG9ySWRzID0ge30pKTtcclxuLyoqXHJcbiAqIEdlbmVyYXRlcyBtb25vdG9uaWNhbGx5IGluY3JlYXNpbmcgdGFyZ2V0IElEcyBmb3Igc2VuZGluZyB0YXJnZXRzIHRvIHRoZVxyXG4gKiB3YXRjaCBzdHJlYW0uXHJcbiAqXHJcbiAqIFRoZSBjbGllbnQgY29uc3RydWN0cyB0d28gZ2VuZXJhdG9ycywgb25lIGZvciB0aGUgcXVlcnkgY2FjaGUgKHZpYVxyXG4gKiBmb3JRdWVyeUNhY2hlKCkpLCBhbmQgb25lIGZvciBsaW1ibyBkb2N1bWVudHMgKHZpYSBmb3JTeW5jRW5naW5lKCkpLiBUaGVzZVxyXG4gKiB0d28gZ2VuZXJhdG9ycyBwcm9kdWNlIG5vbi1vdmVybGFwcGluZyBJRHMgKGJ5IHVzaW5nIGV2ZW4gYW5kIG9kZCBJRHNcclxuICogcmVzcGVjdGl2ZWx5KS5cclxuICpcclxuICogQnkgc2VwYXJhdGluZyB0aGUgdGFyZ2V0IElEIHNwYWNlLCB0aGUgcXVlcnkgY2FjaGUgY2FuIGdlbmVyYXRlIHRhcmdldCBJRHNcclxuICogdGhhdCBwZXJzaXN0IGFjcm9zcyBjbGllbnQgcmVzdGFydHMsIHdoaWxlIHN5bmMgZW5naW5lIGNhbiBpbmRlcGVuZGVudGx5XHJcbiAqIGdlbmVyYXRlIGluLW1lbW9yeSB0YXJnZXQgSURzIHRoYXQgYXJlIHRyYW5zaWVudCBhbmQgY2FuIGJlIHJldXNlZCBhZnRlciBhXHJcbiAqIHJlc3RhcnQuXHJcbiAqL1xyXG4vLyBUT0RPKG1yc2NobWlkdCk6IEV4cGxvcmUgcmVtb3ZpbmcgdGhpcyBjbGFzcyBpbiBmYXZvciBvZiBnZW5lcmF0aW5nIHRoZXNlIElEc1xyXG4vLyBkaXJlY3RseSBpbiBTeW5jRW5naW5lIGFuZCBMb2NhbFN0b3JlLlxyXG52YXIgVGFyZ2V0SWRHZW5lcmF0b3IgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICAvKipcclxuICAgICAqIEluc3RhbnRpYXRlcyBhIG5ldyBUYXJnZXRJZEdlbmVyYXRvci4gSWYgYSBzZWVkIGlzIHByb3ZpZGVkLCB0aGUgZ2VuZXJhdG9yXHJcbiAgICAgKiB3aWxsIHVzZSB0aGUgc2VlZCB2YWx1ZSBhcyB0aGUgbmV4dCB0YXJnZXQgSUQuXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIFRhcmdldElkR2VuZXJhdG9yKGdlbmVyYXRvcklkLCBzZWVkKSB7XHJcbiAgICAgICAgdGhpcy5nZW5lcmF0b3JJZCA9IGdlbmVyYXRvcklkO1xyXG4gICAgICAgIGFzc2VydCgoZ2VuZXJhdG9ySWQgJiBSRVNFUlZFRF9CSVRTKSA9PT0gZ2VuZXJhdG9ySWQsIFwiR2VuZXJhdG9yIElEIFwiICsgZ2VuZXJhdG9ySWQgKyBcIiBjb250YWlucyBtb3JlIHRoYW4gXCIgKyBSRVNFUlZFRF9CSVRTICsgXCIgcmVzZXJ2ZWQgYml0c1wiKTtcclxuICAgICAgICB0aGlzLnNlZWsoc2VlZCAhPT0gdW5kZWZpbmVkID8gc2VlZCA6IHRoaXMuZ2VuZXJhdG9ySWQpO1xyXG4gICAgfVxyXG4gICAgVGFyZ2V0SWRHZW5lcmF0b3IucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIG5leHRJZCA9IHRoaXMubmV4dElkO1xyXG4gICAgICAgIHRoaXMubmV4dElkICs9IDEgPDwgUkVTRVJWRURfQklUUztcclxuICAgICAgICByZXR1cm4gbmV4dElkO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0aGUgSUQgdGhhdCBmb2xsb3dzIHRoZSBnaXZlbiBJRC4gU3Vic2VxdWVudCBjYWxscyB0byBgbmV4dCgpYFxyXG4gICAgICogdXNlIHRoZSBuZXdseSByZXR1cm5lZCB0YXJnZXQgSUQgYXMgdGhlaXIgYmFzZS5cclxuICAgICAqL1xyXG4gICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS10YWIgb25seS5cclxuICAgIFRhcmdldElkR2VuZXJhdG9yLnByb3RvdHlwZS5hZnRlciA9IGZ1bmN0aW9uICh0YXJnZXRJZCkge1xyXG4gICAgICAgIHRoaXMuc2Vlayh0YXJnZXRJZCArICgxIDw8IFJFU0VSVkVEX0JJVFMpKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5uZXh0KCk7XHJcbiAgICB9O1xyXG4gICAgVGFyZ2V0SWRHZW5lcmF0b3IucHJvdG90eXBlLnNlZWsgPSBmdW5jdGlvbiAodGFyZ2V0SWQpIHtcclxuICAgICAgICBhc3NlcnQoKHRhcmdldElkICYgUkVTRVJWRURfQklUUykgPT09IHRoaXMuZ2VuZXJhdG9ySWQsICdDYW5ub3Qgc3VwcGx5IHRhcmdldCBJRCBmcm9tIGRpZmZlcmVudCBnZW5lcmF0b3IgSUQnKTtcclxuICAgICAgICB0aGlzLm5leHRJZCA9IHRhcmdldElkO1xyXG4gICAgfTtcclxuICAgIFRhcmdldElkR2VuZXJhdG9yLmZvclRhcmdldENhY2hlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vIFdlIHNlZWQgdGhlIHF1ZXJ5IGNhY2hlIGdlbmVyYXRvciB0byByZXR1cm4gJzInIGFzIGl0cyBmaXJzdCBJRCwgYXMgdGhlcmVcclxuICAgICAgICAvLyBpcyBubyBkaWZmZXJlbnRpYXRpb24gaW4gdGhlIHByb3RvY29sIGxheWVyIGJldHdlZW4gYW4gdW5zZXQgbnVtYmVyIGFuZFxyXG4gICAgICAgIC8vIHRoZSBudW1iZXIgJzAnLiBJZiB3ZSB3ZXJlIHRvIHNlbnQgYSB0YXJnZXQgd2l0aCB0YXJnZXQgSUQgJzAnLCB0aGVcclxuICAgICAgICAvLyBiYWNrZW5kIHdvdWxkIGNvbnNpZGVyIGl0IHVuc2V0IGFuZCByZXBsYWNlIGl0IHdpdGggaXRzIG93biBJRC5cclxuICAgICAgICB2YXIgdGFyZ2V0SWRHZW5lcmF0b3IgPSBuZXcgVGFyZ2V0SWRHZW5lcmF0b3IoR2VuZXJhdG9ySWRzLlF1ZXJ5Q2FjaGUsIDIpO1xyXG4gICAgICAgIHJldHVybiB0YXJnZXRJZEdlbmVyYXRvcjtcclxuICAgIH07XHJcbiAgICBUYXJnZXRJZEdlbmVyYXRvci5mb3JTeW5jRW5naW5lID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vIFN5bmMgZW5naW5lIGFzc2lnbnMgdGFyZ2V0IElEcyBmb3IgbGltYm8gZG9jdW1lbnQgZGV0ZWN0aW9uLlxyXG4gICAgICAgIHJldHVybiBuZXcgVGFyZ2V0SWRHZW5lcmF0b3IoR2VuZXJhdG9ySWRzLlN5bmNFbmdpbmUpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBUYXJnZXRJZEdlbmVyYXRvcjtcclxufSgpKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnZhciBJbmRleGVkRGJUYXJnZXRDYWNoZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEluZGV4ZWREYlRhcmdldENhY2hlKHJlZmVyZW5jZURlbGVnYXRlLCBzZXJpYWxpemVyKSB7XHJcbiAgICAgICAgdGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZSA9IHJlZmVyZW5jZURlbGVnYXRlO1xyXG4gICAgICAgIHRoaXMuc2VyaWFsaXplciA9IHNlcmlhbGl6ZXI7XHJcbiAgICAgICAgLy8gUE9SVElORyBOT1RFOiBXZSBkb24ndCBjYWNoZSBnbG9iYWwgbWV0YWRhdGEgZm9yIHRoZSB0YXJnZXQgY2FjaGUsIHNpbmNlXHJcbiAgICAgICAgLy8gc29tZSBvZiBpdCAoaW4gcGFydGljdWxhciBgaGlnaGVzdFRhcmdldElkYCkgY2FuIGJlIG1vZGlmaWVkIGJ5IHNlY29uZGFyeVxyXG4gICAgICAgIC8vIHRhYnMuIFdlIGNvdWxkIHBlcmhhcHMgYmUgbW9yZSBncmFudWxhciAoYW5kIGUuZy4gc3RpbGwgY2FjaGVcclxuICAgICAgICAvLyBgbGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbmAgaW4gbWVtb3J5KSBidXQgZm9yIHNpbXBsaWNpdHkgd2UgY3VycmVudGx5IGdvXHJcbiAgICAgICAgLy8gdG8gSW5kZXhlZERiIHdoZW5ldmVyIHdlIG5lZWQgdG8gcmVhZCBtZXRhZGF0YS4gV2UgY2FuIHJldmlzaXQgaWYgaXQgdHVybnNcclxuICAgICAgICAvLyBvdXQgdG8gaGF2ZSBhIG1lYW5pbmdmdWwgcGVyZm9ybWFuY2UgaW1wYWN0LlxyXG4gICAgICAgIHRoaXMudGFyZ2V0SWRHZW5lcmF0b3IgPSBUYXJnZXRJZEdlbmVyYXRvci5mb3JUYXJnZXRDYWNoZSgpO1xyXG4gICAgfVxyXG4gICAgSW5kZXhlZERiVGFyZ2V0Q2FjaGUucHJvdG90eXBlLmFsbG9jYXRlVGFyZ2V0SWQgPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24pIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnJldHJpZXZlTWV0YWRhdGEodHJhbnNhY3Rpb24pLm5leHQoZnVuY3Rpb24gKG1ldGFkYXRhKSB7XHJcbiAgICAgICAgICAgIG1ldGFkYXRhLmhpZ2hlc3RUYXJnZXRJZCA9IF90aGlzLnRhcmdldElkR2VuZXJhdG9yLmFmdGVyKG1ldGFkYXRhLmhpZ2hlc3RUYXJnZXRJZCk7XHJcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5zYXZlTWV0YWRhdGEodHJhbnNhY3Rpb24sIG1ldGFkYXRhKS5uZXh0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIG1ldGFkYXRhLmhpZ2hlc3RUYXJnZXRJZDsgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgSW5kZXhlZERiVGFyZ2V0Q2FjaGUucHJvdG90eXBlLmdldExhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24gPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24pIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5yZXRyaWV2ZU1ldGFkYXRhKHRyYW5zYWN0aW9uKS5uZXh0KGZ1bmN0aW9uIChtZXRhZGF0YSkge1xyXG4gICAgICAgICAgICByZXR1cm4gU25hcHNob3RWZXJzaW9uLmZyb21UaW1lc3RhbXAobmV3IFRpbWVzdGFtcChtZXRhZGF0YS5sYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uLnNlY29uZHMsIG1ldGFkYXRhLmxhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24ubmFub3NlY29uZHMpKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBJbmRleGVkRGJUYXJnZXRDYWNoZS5wcm90b3R5cGUuZ2V0SGlnaGVzdFNlcXVlbmNlTnVtYmVyID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uKSB7XHJcbiAgICAgICAgcmV0dXJuIGdldEhpZ2hlc3RMaXN0ZW5TZXF1ZW5jZU51bWJlcih0cmFuc2FjdGlvbi5zaW1wbGVEYlRyYW5zYWN0aW9uKTtcclxuICAgIH07XHJcbiAgICBJbmRleGVkRGJUYXJnZXRDYWNoZS5wcm90b3R5cGUuc2V0VGFyZ2V0c01ldGFkYXRhID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCBoaWdoZXN0TGlzdGVuU2VxdWVuY2VOdW1iZXIsIGxhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24pIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnJldHJpZXZlTWV0YWRhdGEodHJhbnNhY3Rpb24pLm5leHQoZnVuY3Rpb24gKG1ldGFkYXRhKSB7XHJcbiAgICAgICAgICAgIG1ldGFkYXRhLmhpZ2hlc3RMaXN0ZW5TZXF1ZW5jZU51bWJlciA9IGhpZ2hlc3RMaXN0ZW5TZXF1ZW5jZU51bWJlcjtcclxuICAgICAgICAgICAgaWYgKGxhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24pIHtcclxuICAgICAgICAgICAgICAgIG1ldGFkYXRhLmxhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24gPSBsYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uLnRvVGltZXN0YW1wKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGhpZ2hlc3RMaXN0ZW5TZXF1ZW5jZU51bWJlciA+IG1ldGFkYXRhLmhpZ2hlc3RMaXN0ZW5TZXF1ZW5jZU51bWJlcikge1xyXG4gICAgICAgICAgICAgICAgbWV0YWRhdGEuaGlnaGVzdExpc3RlblNlcXVlbmNlTnVtYmVyID0gaGlnaGVzdExpc3RlblNlcXVlbmNlTnVtYmVyO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5zYXZlTWV0YWRhdGEodHJhbnNhY3Rpb24sIG1ldGFkYXRhKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBJbmRleGVkRGJUYXJnZXRDYWNoZS5wcm90b3R5cGUuYWRkVGFyZ2V0RGF0YSA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwgdGFyZ2V0RGF0YSkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc2F2ZVRhcmdldERhdGEodHJhbnNhY3Rpb24sIHRhcmdldERhdGEpLm5leHQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXMucmV0cmlldmVNZXRhZGF0YSh0cmFuc2FjdGlvbikubmV4dChmdW5jdGlvbiAobWV0YWRhdGEpIHtcclxuICAgICAgICAgICAgICAgIG1ldGFkYXRhLnRhcmdldENvdW50ICs9IDE7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy51cGRhdGVNZXRhZGF0YUZyb21UYXJnZXREYXRhKHRhcmdldERhdGEsIG1ldGFkYXRhKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5zYXZlTWV0YWRhdGEodHJhbnNhY3Rpb24sIG1ldGFkYXRhKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgSW5kZXhlZERiVGFyZ2V0Q2FjaGUucHJvdG90eXBlLnVwZGF0ZVRhcmdldERhdGEgPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24sIHRhcmdldERhdGEpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zYXZlVGFyZ2V0RGF0YSh0cmFuc2FjdGlvbiwgdGFyZ2V0RGF0YSk7XHJcbiAgICB9O1xyXG4gICAgSW5kZXhlZERiVGFyZ2V0Q2FjaGUucHJvdG90eXBlLnJlbW92ZVRhcmdldERhdGEgPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24sIHRhcmdldERhdGEpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnJlbW92ZU1hdGNoaW5nS2V5c0ZvclRhcmdldElkKHRyYW5zYWN0aW9uLCB0YXJnZXREYXRhLnRhcmdldElkKVxyXG4gICAgICAgICAgICAubmV4dChmdW5jdGlvbiAoKSB7IHJldHVybiB0YXJnZXRzU3RvcmUodHJhbnNhY3Rpb24pLmRlbGV0ZSh0YXJnZXREYXRhLnRhcmdldElkKTsgfSlcclxuICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMucmV0cmlldmVNZXRhZGF0YSh0cmFuc2FjdGlvbik7IH0pXHJcbiAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uIChtZXRhZGF0YSkge1xyXG4gICAgICAgICAgICBhc3NlcnQobWV0YWRhdGEudGFyZ2V0Q291bnQgPiAwLCAnUmVtb3ZpbmcgZnJvbSBhbiBlbXB0eSB0YXJnZXQgY2FjaGUnKTtcclxuICAgICAgICAgICAgbWV0YWRhdGEudGFyZ2V0Q291bnQgLT0gMTtcclxuICAgICAgICAgICAgcmV0dXJuIF90aGlzLnNhdmVNZXRhZGF0YSh0cmFuc2FjdGlvbiwgbWV0YWRhdGEpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogRHJvcHMgYW55IHRhcmdldHMgd2l0aCBzZXF1ZW5jZSBudW1iZXIgbGVzcyB0aGFuIG9yIGVxdWFsIHRvIHRoZSB1cHBlciBib3VuZCwgZXhjZXB0aW5nIHRob3NlXHJcbiAgICAgKiBwcmVzZW50IGluIGBhY3RpdmVUYXJnZXRJZHNgLiBEb2N1bWVudCBhc3NvY2lhdGlvbnMgZm9yIHRoZSByZW1vdmVkIHRhcmdldHMgYXJlIGFsc28gcmVtb3ZlZC5cclxuICAgICAqIFJldHVybnMgdGhlIG51bWJlciBvZiB0YXJnZXRzIHJlbW92ZWQuXHJcbiAgICAgKi9cclxuICAgIEluZGV4ZWREYlRhcmdldENhY2hlLnByb3RvdHlwZS5yZW1vdmVUYXJnZXRzID0gZnVuY3Rpb24gKHR4biwgdXBwZXJCb3VuZCwgYWN0aXZlVGFyZ2V0SWRzKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgY291bnQgPSAwO1xyXG4gICAgICAgIHZhciBwcm9taXNlcyA9IFtdO1xyXG4gICAgICAgIHJldHVybiB0YXJnZXRzU3RvcmUodHhuKVxyXG4gICAgICAgICAgICAuaXRlcmF0ZShmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xyXG4gICAgICAgICAgICB2YXIgdGFyZ2V0RGF0YSA9IF90aGlzLnNlcmlhbGl6ZXIuZnJvbURiVGFyZ2V0KHZhbHVlKTtcclxuICAgICAgICAgICAgaWYgKHRhcmdldERhdGEuc2VxdWVuY2VOdW1iZXIgPD0gdXBwZXJCb3VuZCAmJlxyXG4gICAgICAgICAgICAgICAgYWN0aXZlVGFyZ2V0SWRzLmdldCh0YXJnZXREYXRhLnRhcmdldElkKSA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgY291bnQrKztcclxuICAgICAgICAgICAgICAgIHByb21pc2VzLnB1c2goX3RoaXMucmVtb3ZlVGFyZ2V0RGF0YSh0eG4sIHRhcmdldERhdGEpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS53YWl0Rm9yKHByb21pc2VzKTsgfSlcclxuICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKCkgeyByZXR1cm4gY291bnQ7IH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQ2FsbCBwcm92aWRlZCBmdW5jdGlvbiB3aXRoIGVhY2ggYFRhcmdldERhdGFgIHRoYXQgd2UgaGF2ZSBjYWNoZWQuXHJcbiAgICAgKi9cclxuICAgIEluZGV4ZWREYlRhcmdldENhY2hlLnByb3RvdHlwZS5mb3JFYWNoVGFyZ2V0ID0gZnVuY3Rpb24gKHR4biwgZikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIHRhcmdldHNTdG9yZSh0eG4pLml0ZXJhdGUoZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcclxuICAgICAgICAgICAgdmFyIHRhcmdldERhdGEgPSBfdGhpcy5zZXJpYWxpemVyLmZyb21EYlRhcmdldCh2YWx1ZSk7XHJcbiAgICAgICAgICAgIGYodGFyZ2V0RGF0YSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgSW5kZXhlZERiVGFyZ2V0Q2FjaGUucHJvdG90eXBlLnJldHJpZXZlTWV0YWRhdGEgPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24pIHtcclxuICAgICAgICByZXR1cm4gcmV0cmlldmVNZXRhZGF0YSh0cmFuc2FjdGlvbi5zaW1wbGVEYlRyYW5zYWN0aW9uKTtcclxuICAgIH07XHJcbiAgICBJbmRleGVkRGJUYXJnZXRDYWNoZS5wcm90b3R5cGUuc2F2ZU1ldGFkYXRhID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCBtZXRhZGF0YSkge1xyXG4gICAgICAgIHJldHVybiBnbG9iYWxUYXJnZXRTdG9yZSh0cmFuc2FjdGlvbikucHV0KERiVGFyZ2V0R2xvYmFsLmtleSwgbWV0YWRhdGEpO1xyXG4gICAgfTtcclxuICAgIEluZGV4ZWREYlRhcmdldENhY2hlLnByb3RvdHlwZS5zYXZlVGFyZ2V0RGF0YSA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwgdGFyZ2V0RGF0YSkge1xyXG4gICAgICAgIHJldHVybiB0YXJnZXRzU3RvcmUodHJhbnNhY3Rpb24pLnB1dCh0aGlzLnNlcmlhbGl6ZXIudG9EYlRhcmdldCh0YXJnZXREYXRhKSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBJbi1wbGFjZSB1cGRhdGVzIHRoZSBwcm92aWRlZCBtZXRhZGF0YSB0byBhY2NvdW50IGZvciB2YWx1ZXMgaW4gdGhlIGdpdmVuXHJcbiAgICAgKiBUYXJnZXREYXRhLiBTYXZpbmcgaXMgZG9uZSBzZXBhcmF0ZWx5LiBSZXR1cm5zIHRydWUgaWYgdGhlcmUgd2VyZSBhbnlcclxuICAgICAqIGNoYW5nZXMgdG8gdGhlIG1ldGFkYXRhLlxyXG4gICAgICovXHJcbiAgICBJbmRleGVkRGJUYXJnZXRDYWNoZS5wcm90b3R5cGUudXBkYXRlTWV0YWRhdGFGcm9tVGFyZ2V0RGF0YSA9IGZ1bmN0aW9uICh0YXJnZXREYXRhLCBtZXRhZGF0YSkge1xyXG4gICAgICAgIHZhciB1cGRhdGVkID0gZmFsc2U7XHJcbiAgICAgICAgaWYgKHRhcmdldERhdGEudGFyZ2V0SWQgPiBtZXRhZGF0YS5oaWdoZXN0VGFyZ2V0SWQpIHtcclxuICAgICAgICAgICAgbWV0YWRhdGEuaGlnaGVzdFRhcmdldElkID0gdGFyZ2V0RGF0YS50YXJnZXRJZDtcclxuICAgICAgICAgICAgdXBkYXRlZCA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0YXJnZXREYXRhLnNlcXVlbmNlTnVtYmVyID4gbWV0YWRhdGEuaGlnaGVzdExpc3RlblNlcXVlbmNlTnVtYmVyKSB7XHJcbiAgICAgICAgICAgIG1ldGFkYXRhLmhpZ2hlc3RMaXN0ZW5TZXF1ZW5jZU51bWJlciA9IHRhcmdldERhdGEuc2VxdWVuY2VOdW1iZXI7XHJcbiAgICAgICAgICAgIHVwZGF0ZWQgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdXBkYXRlZDtcclxuICAgIH07XHJcbiAgICBJbmRleGVkRGJUYXJnZXRDYWNoZS5wcm90b3R5cGUuZ2V0VGFyZ2V0Q291bnQgPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24pIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5yZXRyaWV2ZU1ldGFkYXRhKHRyYW5zYWN0aW9uKS5uZXh0KGZ1bmN0aW9uIChtZXRhZGF0YSkgeyByZXR1cm4gbWV0YWRhdGEudGFyZ2V0Q291bnQ7IH0pO1xyXG4gICAgfTtcclxuICAgIEluZGV4ZWREYlRhcmdldENhY2hlLnByb3RvdHlwZS5nZXRUYXJnZXREYXRhID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCB0YXJnZXQpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIC8vIEl0ZXJhdGluZyBieSB0aGUgY2Fub25pY2FsSWQgbWF5IHlpZWxkIG1vcmUgdGhhbiBvbmUgcmVzdWx0IGJlY2F1c2VcclxuICAgICAgICAvLyBjYW5vbmljYWxJZCB2YWx1ZXMgYXJlIG5vdCByZXF1aXJlZCB0byBiZSB1bmlxdWUgcGVyIHRhcmdldC4gVGhpcyBxdWVyeVxyXG4gICAgICAgIC8vIGRlcGVuZHMgb24gdGhlIHF1ZXJ5VGFyZ2V0cyBpbmRleCB0byBiZSBlZmZpY2llbnQuXHJcbiAgICAgICAgdmFyIGNhbm9uaWNhbElkID0gdGFyZ2V0LmNhbm9uaWNhbElkKCk7XHJcbiAgICAgICAgdmFyIHJhbmdlID0gSURCS2V5UmFuZ2UuYm91bmQoW2Nhbm9uaWNhbElkLCBOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFldLCBbY2Fub25pY2FsSWQsIE51bWJlci5QT1NJVElWRV9JTkZJTklUWV0pO1xyXG4gICAgICAgIHZhciByZXN1bHQgPSBudWxsO1xyXG4gICAgICAgIHJldHVybiB0YXJnZXRzU3RvcmUodHJhbnNhY3Rpb24pXHJcbiAgICAgICAgICAgIC5pdGVyYXRlKHsgcmFuZ2U6IHJhbmdlLCBpbmRleDogRGJUYXJnZXQucXVlcnlUYXJnZXRzSW5kZXhOYW1lIH0sIGZ1bmN0aW9uIChrZXksIHZhbHVlLCBjb250cm9sKSB7XHJcbiAgICAgICAgICAgIHZhciBmb3VuZCA9IF90aGlzLnNlcmlhbGl6ZXIuZnJvbURiVGFyZ2V0KHZhbHVlKTtcclxuICAgICAgICAgICAgLy8gQWZ0ZXIgZmluZGluZyBhIHBvdGVudGlhbCBtYXRjaCwgY2hlY2sgdGhhdCB0aGUgdGFyZ2V0IGlzXHJcbiAgICAgICAgICAgIC8vIGFjdHVhbGx5IGVxdWFsIHRvIHRoZSByZXF1ZXN0ZWQgdGFyZ2V0LlxyXG4gICAgICAgICAgICBpZiAodGFyZ2V0LmlzRXF1YWwoZm91bmQudGFyZ2V0KSkge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gZm91bmQ7XHJcbiAgICAgICAgICAgICAgICBjb250cm9sLmRvbmUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIHJlc3VsdDsgfSk7XHJcbiAgICB9O1xyXG4gICAgSW5kZXhlZERiVGFyZ2V0Q2FjaGUucHJvdG90eXBlLmFkZE1hdGNoaW5nS2V5cyA9IGZ1bmN0aW9uICh0eG4sIGtleXMsIHRhcmdldElkKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICAvLyBQT1JUSU5HIE5PVEU6IFRoZSByZXZlcnNlIGluZGV4IChkb2N1bWVudHNUYXJnZXRzKSBpcyBtYWludGFpbmVkIGJ5XHJcbiAgICAgICAgLy8gSW5kZXhlZERiLlxyXG4gICAgICAgIHZhciBwcm9taXNlcyA9IFtdO1xyXG4gICAgICAgIHZhciBzdG9yZSA9IGRvY3VtZW50VGFyZ2V0U3RvcmUodHhuKTtcclxuICAgICAgICBrZXlzLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgICAgICB2YXIgcGF0aCA9IGVuY29kZShrZXkucGF0aCk7XHJcbiAgICAgICAgICAgIHByb21pc2VzLnB1c2goc3RvcmUucHV0KG5ldyBEYlRhcmdldERvY3VtZW50KHRhcmdldElkLCBwYXRoKSkpO1xyXG4gICAgICAgICAgICBwcm9taXNlcy5wdXNoKF90aGlzLnJlZmVyZW5jZURlbGVnYXRlLmFkZFJlZmVyZW5jZSh0eG4sIGtleSkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2Uud2FpdEZvcihwcm9taXNlcyk7XHJcbiAgICB9O1xyXG4gICAgSW5kZXhlZERiVGFyZ2V0Q2FjaGUucHJvdG90eXBlLnJlbW92ZU1hdGNoaW5nS2V5cyA9IGZ1bmN0aW9uICh0eG4sIGtleXMsIHRhcmdldElkKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICAvLyBQT1JUSU5HIE5PVEU6IFRoZSByZXZlcnNlIGluZGV4IChkb2N1bWVudHNUYXJnZXRzKSBpcyBtYWludGFpbmVkIGJ5XHJcbiAgICAgICAgLy8gSW5kZXhlZERiLlxyXG4gICAgICAgIHZhciBzdG9yZSA9IGRvY3VtZW50VGFyZ2V0U3RvcmUodHhuKTtcclxuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLmZvckVhY2goa2V5cywgZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgICAgICB2YXIgcGF0aCA9IGVuY29kZShrZXkucGF0aCk7XHJcbiAgICAgICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2Uud2FpdEZvcihbXHJcbiAgICAgICAgICAgICAgICBzdG9yZS5kZWxldGUoW3RhcmdldElkLCBwYXRoXSksXHJcbiAgICAgICAgICAgICAgICBfdGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZS5yZW1vdmVSZWZlcmVuY2UodHhuLCBrZXkpXHJcbiAgICAgICAgICAgIF0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIEluZGV4ZWREYlRhcmdldENhY2hlLnByb3RvdHlwZS5yZW1vdmVNYXRjaGluZ0tleXNGb3JUYXJnZXRJZCA9IGZ1bmN0aW9uICh0eG4sIHRhcmdldElkKSB7XHJcbiAgICAgICAgdmFyIHN0b3JlID0gZG9jdW1lbnRUYXJnZXRTdG9yZSh0eG4pO1xyXG4gICAgICAgIHZhciByYW5nZSA9IElEQktleVJhbmdlLmJvdW5kKFt0YXJnZXRJZF0sIFt0YXJnZXRJZCArIDFdLCBcclxuICAgICAgICAvKmxvd2VyT3Blbj0qLyBmYWxzZSwgXHJcbiAgICAgICAgLyp1cHBlck9wZW49Ki8gdHJ1ZSk7XHJcbiAgICAgICAgcmV0dXJuIHN0b3JlLmRlbGV0ZShyYW5nZSk7XHJcbiAgICB9O1xyXG4gICAgSW5kZXhlZERiVGFyZ2V0Q2FjaGUucHJvdG90eXBlLmdldE1hdGNoaW5nS2V5c0ZvclRhcmdldElkID0gZnVuY3Rpb24gKHR4biwgdGFyZ2V0SWQpIHtcclxuICAgICAgICB2YXIgcmFuZ2UgPSBJREJLZXlSYW5nZS5ib3VuZChbdGFyZ2V0SWRdLCBbdGFyZ2V0SWQgKyAxXSwgXHJcbiAgICAgICAgLypsb3dlck9wZW49Ki8gZmFsc2UsIFxyXG4gICAgICAgIC8qdXBwZXJPcGVuPSovIHRydWUpO1xyXG4gICAgICAgIHZhciBzdG9yZSA9IGRvY3VtZW50VGFyZ2V0U3RvcmUodHhuKTtcclxuICAgICAgICB2YXIgcmVzdWx0ID0gZG9jdW1lbnRLZXlTZXQoKTtcclxuICAgICAgICByZXR1cm4gc3RvcmVcclxuICAgICAgICAgICAgLml0ZXJhdGUoeyByYW5nZTogcmFuZ2UsIGtleXNPbmx5OiB0cnVlIH0sIGZ1bmN0aW9uIChrZXksIF8sIGNvbnRyb2wpIHtcclxuICAgICAgICAgICAgdmFyIHBhdGggPSBkZWNvZGUoa2V5WzFdKTtcclxuICAgICAgICAgICAgdmFyIGRvY0tleSA9IG5ldyBEb2N1bWVudEtleShwYXRoKTtcclxuICAgICAgICAgICAgcmVzdWx0ID0gcmVzdWx0LmFkZChkb2NLZXkpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIHJlc3VsdDsgfSk7XHJcbiAgICB9O1xyXG4gICAgSW5kZXhlZERiVGFyZ2V0Q2FjaGUucHJvdG90eXBlLmNvbnRhaW5zS2V5ID0gZnVuY3Rpb24gKHR4biwga2V5KSB7XHJcbiAgICAgICAgdmFyIHBhdGggPSBlbmNvZGUoa2V5LnBhdGgpO1xyXG4gICAgICAgIHZhciByYW5nZSA9IElEQktleVJhbmdlLmJvdW5kKFtwYXRoXSwgW2ltbWVkaWF0ZVN1Y2Nlc3NvcihwYXRoKV0sIFxyXG4gICAgICAgIC8qbG93ZXJPcGVuPSovIGZhbHNlLCBcclxuICAgICAgICAvKnVwcGVyT3Blbj0qLyB0cnVlKTtcclxuICAgICAgICB2YXIgY291bnQgPSAwO1xyXG4gICAgICAgIHJldHVybiBkb2N1bWVudFRhcmdldFN0b3JlKHR4bilcclxuICAgICAgICAgICAgLml0ZXJhdGUoe1xyXG4gICAgICAgICAgICBpbmRleDogRGJUYXJnZXREb2N1bWVudC5kb2N1bWVudFRhcmdldHNJbmRleCxcclxuICAgICAgICAgICAga2V5c09ubHk6IHRydWUsXHJcbiAgICAgICAgICAgIHJhbmdlOiByYW5nZVxyXG4gICAgICAgIH0sIGZ1bmN0aW9uIChfYSwgXywgY29udHJvbCkge1xyXG4gICAgICAgICAgICB2YXIgdGFyZ2V0SWQgPSBfYVswXSwgcGF0aCA9IF9hWzFdO1xyXG4gICAgICAgICAgICAvLyBIYXZpbmcgYSBzZW50aW5lbCByb3cgZm9yIGEgZG9jdW1lbnQgZG9lcyBub3QgY291bnQgYXMgY29udGFpbmluZyB0aGF0IGRvY3VtZW50O1xyXG4gICAgICAgICAgICAvLyBGb3IgdGhlIHRhcmdldCBjYWNoZSwgY29udGFpbmluZyB0aGUgZG9jdW1lbnQgbWVhbnMgdGhlIGRvY3VtZW50IGlzIHBhcnQgb2Ygc29tZVxyXG4gICAgICAgICAgICAvLyB0YXJnZXQuXHJcbiAgICAgICAgICAgIGlmICh0YXJnZXRJZCAhPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgY291bnQrKztcclxuICAgICAgICAgICAgICAgIGNvbnRyb2wuZG9uZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKCkgeyByZXR1cm4gY291bnQgPiAwOyB9KTtcclxuICAgIH07XHJcbiAgICBJbmRleGVkRGJUYXJnZXRDYWNoZS5wcm90b3R5cGUuZ2V0VGFyZ2V0RGF0YUZvclRhcmdldCA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwgdGFyZ2V0SWQpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiB0YXJnZXRzU3RvcmUodHJhbnNhY3Rpb24pXHJcbiAgICAgICAgICAgIC5nZXQodGFyZ2V0SWQpXHJcbiAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uIChmb3VuZCkge1xyXG4gICAgICAgICAgICBpZiAoZm91bmQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5zZXJpYWxpemVyLmZyb21EYlRhcmdldChmb3VuZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBJbmRleGVkRGJUYXJnZXRDYWNoZTtcclxufSgpKTtcclxuLyoqXHJcbiAqIEhlbHBlciB0byBnZXQgYSB0eXBlZCBTaW1wbGVEYlN0b3JlIGZvciB0aGUgcXVlcmllcyBvYmplY3Qgc3RvcmUuXHJcbiAqL1xyXG5mdW5jdGlvbiB0YXJnZXRzU3RvcmUodHhuKSB7XHJcbiAgICByZXR1cm4gSW5kZXhlZERiUGVyc2lzdGVuY2UuZ2V0U3RvcmUodHhuLCBEYlRhcmdldC5zdG9yZSk7XHJcbn1cclxuLyoqXHJcbiAqIEhlbHBlciB0byBnZXQgYSB0eXBlZCBTaW1wbGVEYlN0b3JlIGZvciB0aGUgdGFyZ2V0IGdsb2JhbHMgb2JqZWN0IHN0b3JlLlxyXG4gKi9cclxuZnVuY3Rpb24gZ2xvYmFsVGFyZ2V0U3RvcmUodHhuKSB7XHJcbiAgICByZXR1cm4gSW5kZXhlZERiUGVyc2lzdGVuY2UuZ2V0U3RvcmUodHhuLCBEYlRhcmdldEdsb2JhbC5zdG9yZSk7XHJcbn1cclxuZnVuY3Rpb24gcmV0cmlldmVNZXRhZGF0YSh0eG4pIHtcclxuICAgIHZhciBnbG9iYWxTdG9yZSA9IFNpbXBsZURiLmdldFN0b3JlKHR4biwgRGJUYXJnZXRHbG9iYWwuc3RvcmUpO1xyXG4gICAgcmV0dXJuIGdsb2JhbFN0b3JlLmdldChEYlRhcmdldEdsb2JhbC5rZXkpLm5leHQoZnVuY3Rpb24gKG1ldGFkYXRhKSB7XHJcbiAgICAgICAgYXNzZXJ0KG1ldGFkYXRhICE9PSBudWxsLCAnTWlzc2luZyBtZXRhZGF0YSByb3cuJyk7XHJcbiAgICAgICAgcmV0dXJuIG1ldGFkYXRhO1xyXG4gICAgfSk7XHJcbn1cclxuZnVuY3Rpb24gZ2V0SGlnaGVzdExpc3RlblNlcXVlbmNlTnVtYmVyKHR4bikge1xyXG4gICAgcmV0dXJuIHJldHJpZXZlTWV0YWRhdGEodHhuKS5uZXh0KGZ1bmN0aW9uICh0YXJnZXRHbG9iYWwpIHsgcmV0dXJuIHRhcmdldEdsb2JhbC5oaWdoZXN0TGlzdGVuU2VxdWVuY2VOdW1iZXI7IH0pO1xyXG59XHJcbi8qKlxyXG4gKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmb3IgdGhlIGRvY3VtZW50IHRhcmdldCBvYmplY3Qgc3RvcmUuXHJcbiAqL1xyXG5mdW5jdGlvbiBkb2N1bWVudFRhcmdldFN0b3JlKHR4bikge1xyXG4gICAgcmV0dXJuIEluZGV4ZWREYlBlcnNpc3RlbmNlLmdldFN0b3JlKHR4biwgRGJUYXJnZXREb2N1bWVudC5zdG9yZSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBQcm92aWRlcyBhIHNldCBvZiBmaWVsZHMgdGhhdCBjYW4gYmUgdXNlZCB0byBwYXJ0aWFsbHkgcGF0Y2ggYSBkb2N1bWVudC5cclxuICogRmllbGRNYXNrIGlzIHVzZWQgaW4gY29uanVuY3Rpb24gd2l0aCBPYmplY3RWYWx1ZS5cclxuICogRXhhbXBsZXM6XHJcbiAqICAgZm9vIC0gT3ZlcndyaXRlcyBmb28gZW50aXJlbHkgd2l0aCB0aGUgcHJvdmlkZWQgdmFsdWUuIElmIGZvbyBpcyBub3RcclxuICogICAgICAgICBwcmVzZW50IGluIHRoZSBjb21wYW5pb24gT2JqZWN0VmFsdWUsIHRoZSBmaWVsZCBpcyBkZWxldGVkLlxyXG4gKiAgIGZvby5iYXIgLSBPdmVyd3JpdGVzIG9ubHkgdGhlIGZpZWxkIGJhciBvZiB0aGUgb2JqZWN0IGZvby5cclxuICogICAgICAgICAgICAgSWYgZm9vIGlzIG5vdCBhbiBvYmplY3QsIGZvbyBpcyByZXBsYWNlZCB3aXRoIGFuIG9iamVjdFxyXG4gKiAgICAgICAgICAgICBjb250YWluaW5nIGZvb1xyXG4gKi9cclxudmFyIEZpZWxkTWFzayA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEZpZWxkTWFzayhmaWVsZHMpIHtcclxuICAgICAgICB0aGlzLmZpZWxkcyA9IGZpZWxkcztcclxuICAgICAgICAvLyBUT0RPKGRpbW9uZCk6IHZhbGlkYXRpb24gb2YgRmllbGRNYXNrXHJcbiAgICB9XHJcbiAgICBGaWVsZE1hc2suZnJvbVNldCA9IGZ1bmN0aW9uIChmaWVsZHMpIHtcclxuICAgICAgICByZXR1cm4gbmV3IEZpZWxkTWFzayhmaWVsZHMpO1xyXG4gICAgfTtcclxuICAgIEZpZWxkTWFzay5mcm9tQXJyYXkgPSBmdW5jdGlvbiAoZmllbGRzKSB7XHJcbiAgICAgICAgdmFyIGZpZWxkc0FzU2V0ID0gbmV3IFNvcnRlZFNldChGaWVsZFBhdGguY29tcGFyYXRvcik7XHJcbiAgICAgICAgZmllbGRzLmZvckVhY2goZnVuY3Rpb24gKGZpZWxkUGF0aCkgeyByZXR1cm4gKGZpZWxkc0FzU2V0ID0gZmllbGRzQXNTZXQuYWRkKGZpZWxkUGF0aCkpOyB9KTtcclxuICAgICAgICByZXR1cm4gbmV3IEZpZWxkTWFzayhmaWVsZHNBc1NldCk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBWZXJpZmllcyB0aGF0IGBmaWVsZFBhdGhgIGlzIGluY2x1ZGVkIGJ5IGF0IGxlYXN0IG9uZSBmaWVsZCBpbiB0aGlzIGZpZWxkXHJcbiAgICAgKiBtYXNrLlxyXG4gICAgICpcclxuICAgICAqIFRoaXMgaXMgYW4gTyhuKSBvcGVyYXRpb24sIHdoZXJlIGBuYCBpcyB0aGUgc2l6ZSBvZiB0aGUgZmllbGQgbWFzay5cclxuICAgICAqL1xyXG4gICAgRmllbGRNYXNrLnByb3RvdHlwZS5jb3ZlcnMgPSBmdW5jdGlvbiAoZmllbGRQYXRoKSB7XHJcbiAgICAgICAgdmFyIGZvdW5kID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5maWVsZHMuZm9yRWFjaChmdW5jdGlvbiAoZmllbGRNYXNrUGF0aCkge1xyXG4gICAgICAgICAgICBpZiAoZmllbGRNYXNrUGF0aC5pc1ByZWZpeE9mKGZpZWxkUGF0aCkpIHtcclxuICAgICAgICAgICAgICAgIGZvdW5kID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBmb3VuZDtcclxuICAgIH07XHJcbiAgICBGaWVsZE1hc2sucHJvdG90eXBlLmlzRXF1YWwgPSBmdW5jdGlvbiAob3RoZXIpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5maWVsZHMuaXNFcXVhbChvdGhlci5maWVsZHMpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBGaWVsZE1hc2s7XHJcbn0oKSk7XHJcbi8qKiBBIGZpZWxkIHBhdGggYW5kIHRoZSBUcmFuc2Zvcm1PcGVyYXRpb24gdG8gcGVyZm9ybSB1cG9uIGl0LiAqL1xyXG52YXIgRmllbGRUcmFuc2Zvcm0gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBGaWVsZFRyYW5zZm9ybShmaWVsZCwgdHJhbnNmb3JtKSB7XHJcbiAgICAgICAgdGhpcy5maWVsZCA9IGZpZWxkO1xyXG4gICAgICAgIHRoaXMudHJhbnNmb3JtID0gdHJhbnNmb3JtO1xyXG4gICAgfVxyXG4gICAgRmllbGRUcmFuc2Zvcm0ucHJvdG90eXBlLmlzRXF1YWwgPSBmdW5jdGlvbiAob3RoZXIpIHtcclxuICAgICAgICByZXR1cm4gKHRoaXMuZmllbGQuaXNFcXVhbChvdGhlci5maWVsZCkgJiYgdGhpcy50cmFuc2Zvcm0uaXNFcXVhbChvdGhlci50cmFuc2Zvcm0pKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gRmllbGRUcmFuc2Zvcm07XHJcbn0oKSk7XHJcbi8qKiBUaGUgcmVzdWx0IG9mIHN1Y2Nlc3NmdWxseSBhcHBseWluZyBhIG11dGF0aW9uIHRvIHRoZSBiYWNrZW5kLiAqL1xyXG52YXIgTXV0YXRpb25SZXN1bHQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBNdXRhdGlvblJlc3VsdChcclxuICAgIC8qKlxyXG4gICAgICogVGhlIHZlcnNpb24gYXQgd2hpY2ggdGhlIG11dGF0aW9uIHdhcyBjb21taXR0ZWQ6XHJcbiAgICAgKlxyXG4gICAgICogLSBGb3IgbW9zdCBvcGVyYXRpb25zLCB0aGlzIGlzIHRoZSB1cGRhdGVUaW1lIGluIHRoZSBXcml0ZVJlc3VsdC5cclxuICAgICAqIC0gRm9yIGRlbGV0ZXMsIHRoZSBjb21taXRUaW1lIG9mIHRoZSBXcml0ZVJlc3BvbnNlIChiZWNhdXNlIGRlbGV0ZXMgYXJlXHJcbiAgICAgKiAgIG5vdCBzdG9yZWQgYW5kIGhhdmUgbm8gdXBkYXRlVGltZSkuXHJcbiAgICAgKlxyXG4gICAgICogTm90ZSB0aGF0IHRoZXNlIHZlcnNpb25zIGNhbiBiZSBkaWZmZXJlbnQ6IE5vLW9wIHdyaXRlcyB3aWxsIG5vdCBjaGFuZ2VcclxuICAgICAqIHRoZSB1cGRhdGVUaW1lIGV2ZW4gdGhvdWdoIHRoZSBjb21taXRUaW1lIGFkdmFuY2VzLlxyXG4gICAgICovXHJcbiAgICB2ZXJzaW9uLCBcclxuICAgIC8qKlxyXG4gICAgICogVGhlIHJlc3VsdGluZyBmaWVsZHMgcmV0dXJuZWQgZnJvbSB0aGUgYmFja2VuZCBhZnRlciBhXHJcbiAgICAgKiBUcmFuc2Zvcm1NdXRhdGlvbiBoYXMgYmVlbiBjb21taXR0ZWQuIENvbnRhaW5zIG9uZSBGaWVsZFZhbHVlIGZvciBlYWNoXHJcbiAgICAgKiBGaWVsZFRyYW5zZm9ybSB0aGF0IHdhcyBpbiB0aGUgbXV0YXRpb24uXHJcbiAgICAgKlxyXG4gICAgICogV2lsbCBiZSBudWxsIGlmIHRoZSBtdXRhdGlvbiB3YXMgbm90IGEgVHJhbnNmb3JtTXV0YXRpb24uXHJcbiAgICAgKi9cclxuICAgIHRyYW5zZm9ybVJlc3VsdHMpIHtcclxuICAgICAgICB0aGlzLnZlcnNpb24gPSB2ZXJzaW9uO1xyXG4gICAgICAgIHRoaXMudHJhbnNmb3JtUmVzdWx0cyA9IHRyYW5zZm9ybVJlc3VsdHM7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gTXV0YXRpb25SZXN1bHQ7XHJcbn0oKSk7XHJcbnZhciBNdXRhdGlvblR5cGU7XHJcbihmdW5jdGlvbiAoTXV0YXRpb25UeXBlKSB7XHJcbiAgICBNdXRhdGlvblR5cGVbTXV0YXRpb25UeXBlW1wiU2V0XCJdID0gMF0gPSBcIlNldFwiO1xyXG4gICAgTXV0YXRpb25UeXBlW011dGF0aW9uVHlwZVtcIlBhdGNoXCJdID0gMV0gPSBcIlBhdGNoXCI7XHJcbiAgICBNdXRhdGlvblR5cGVbTXV0YXRpb25UeXBlW1wiVHJhbnNmb3JtXCJdID0gMl0gPSBcIlRyYW5zZm9ybVwiO1xyXG4gICAgTXV0YXRpb25UeXBlW011dGF0aW9uVHlwZVtcIkRlbGV0ZVwiXSA9IDNdID0gXCJEZWxldGVcIjtcclxufSkoTXV0YXRpb25UeXBlIHx8IChNdXRhdGlvblR5cGUgPSB7fSkpO1xyXG4vKipcclxuICogRW5jb2RlcyBhIHByZWNvbmRpdGlvbiBmb3IgYSBtdXRhdGlvbi4gVGhpcyBmb2xsb3dzIHRoZSBtb2RlbCB0aGF0IHRoZVxyXG4gKiBiYWNrZW5kIGFjY2VwdHMgd2l0aCB0aGUgc3BlY2lhbCBjYXNlIG9mIGFuIGV4cGxpY2l0IFwiZW1wdHlcIiBwcmVjb25kaXRpb25cclxuICogKG1lYW5pbmcgbm8gcHJlY29uZGl0aW9uKS5cclxuICovXHJcbnZhciBQcmVjb25kaXRpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBQcmVjb25kaXRpb24odXBkYXRlVGltZSwgZXhpc3RzKSB7XHJcbiAgICAgICAgdGhpcy51cGRhdGVUaW1lID0gdXBkYXRlVGltZTtcclxuICAgICAgICB0aGlzLmV4aXN0cyA9IGV4aXN0cztcclxuICAgICAgICBhc3NlcnQodXBkYXRlVGltZSA9PT0gdW5kZWZpbmVkIHx8IGV4aXN0cyA9PT0gdW5kZWZpbmVkLCAnUHJlY29uZGl0aW9uIGNhbiBzcGVjaWZ5IFwiZXhpc3RzXCIgb3IgXCJ1cGRhdGVUaW1lXCIgYnV0IG5vdCBib3RoJyk7XHJcbiAgICB9XHJcbiAgICAvKiogQ3JlYXRlcyBhIG5ldyBQcmVjb25kaXRpb24gd2l0aCBhbiBleGlzdHMgZmxhZy4gKi9cclxuICAgIFByZWNvbmRpdGlvbi5leGlzdHMgPSBmdW5jdGlvbiAoZXhpc3RzKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcmVjb25kaXRpb24odW5kZWZpbmVkLCBleGlzdHMpO1xyXG4gICAgfTtcclxuICAgIC8qKiBDcmVhdGVzIGEgbmV3IFByZWNvbmRpdGlvbiBiYXNlZCBvbiBhIHZlcnNpb24gYSBkb2N1bWVudCBleGlzdHMgYXQuICovXHJcbiAgICBQcmVjb25kaXRpb24udXBkYXRlVGltZSA9IGZ1bmN0aW9uICh2ZXJzaW9uKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcmVjb25kaXRpb24odmVyc2lvbik7XHJcbiAgICB9O1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFByZWNvbmRpdGlvbi5wcm90b3R5cGUsIFwiaXNOb25lXCIsIHtcclxuICAgICAgICAvKiogUmV0dXJucyB3aGV0aGVyIHRoaXMgUHJlY29uZGl0aW9uIGlzIGVtcHR5LiAqL1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy51cGRhdGVUaW1lID09PSB1bmRlZmluZWQgJiYgdGhpcy5leGlzdHMgPT09IHVuZGVmaW5lZDtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoZSBwcmVjb25kaXRpb25zIGlzIHZhbGlkIGZvciB0aGUgZ2l2ZW4gZG9jdW1lbnRcclxuICAgICAqIChvciBudWxsIGlmIG5vIGRvY3VtZW50IGlzIGF2YWlsYWJsZSkuXHJcbiAgICAgKi9cclxuICAgIFByZWNvbmRpdGlvbi5wcm90b3R5cGUuaXNWYWxpZEZvciA9IGZ1bmN0aW9uIChtYXliZURvYykge1xyXG4gICAgICAgIGlmICh0aGlzLnVwZGF0ZVRpbWUgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gKG1heWJlRG9jIGluc3RhbmNlb2YgRG9jdW1lbnQgJiZcclxuICAgICAgICAgICAgICAgIG1heWJlRG9jLnZlcnNpb24uaXNFcXVhbCh0aGlzLnVwZGF0ZVRpbWUpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodGhpcy5leGlzdHMgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5leGlzdHMgPT09IG1heWJlRG9jIGluc3RhbmNlb2YgRG9jdW1lbnQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBhc3NlcnQodGhpcy5pc05vbmUsICdQcmVjb25kaXRpb24gc2hvdWxkIGJlIGVtcHR5Jyk7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBQcmVjb25kaXRpb24ucHJvdG90eXBlLmlzRXF1YWwgPSBmdW5jdGlvbiAob3RoZXIpIHtcclxuICAgICAgICByZXR1cm4gKGVxdWFscyh0aGlzLnVwZGF0ZVRpbWUsIG90aGVyLnVwZGF0ZVRpbWUpICYmXHJcbiAgICAgICAgICAgIHRoaXMuZXhpc3RzID09PSBvdGhlci5leGlzdHMpO1xyXG4gICAgfTtcclxuICAgIFByZWNvbmRpdGlvbi5OT05FID0gbmV3IFByZWNvbmRpdGlvbigpO1xyXG4gICAgcmV0dXJuIFByZWNvbmRpdGlvbjtcclxufSgpKTtcclxuLyoqXHJcbiAqIEEgbXV0YXRpb24gZGVzY3JpYmVzIGEgc2VsZi1jb250YWluZWQgY2hhbmdlIHRvIGEgZG9jdW1lbnQuIE11dGF0aW9ucyBjYW5cclxuICogY3JlYXRlLCByZXBsYWNlLCBkZWxldGUsIGFuZCB1cGRhdGUgc3Vic2V0cyBvZiBkb2N1bWVudHMuXHJcbiAqXHJcbiAqIE11dGF0aW9ucyBub3Qgb25seSBhY3Qgb24gdGhlIHZhbHVlIG9mIHRoZSBkb2N1bWVudCBidXQgYWxzbyBpdCB2ZXJzaW9uLlxyXG4gKlxyXG4gKiBGb3IgbG9jYWwgbXV0YXRpb25zIChtdXRhdGlvbnMgdGhhdCBoYXZlbid0IGJlZW4gY29tbWl0dGVkIHlldCksIHdlIHByZXNlcnZlXHJcbiAqIHRoZSBleGlzdGluZyB2ZXJzaW9uIGZvciBTZXQsIFBhdGNoLCBhbmQgVHJhbnNmb3JtIG11dGF0aW9ucy4gRm9yIERlbGV0ZVxyXG4gKiBtdXRhdGlvbnMsIHdlIHJlc2V0IHRoZSB2ZXJzaW9uIHRvIDAuXHJcbiAqXHJcbiAqIEhlcmUncyB0aGUgZXhwZWN0ZWQgdHJhbnNpdGlvbiB0YWJsZS5cclxuICpcclxuICogTVVUQVRJT04gICAgICAgICAgIEFQUExJRUQgVE8gICAgICAgICAgICBSRVNVTFRTIElOXHJcbiAqXHJcbiAqIFNldE11dGF0aW9uICAgICAgICBEb2N1bWVudCh2MykgICAgICAgICAgRG9jdW1lbnQodjMpXHJcbiAqIFNldE11dGF0aW9uICAgICAgICBOb0RvY3VtZW50KHYzKSAgICAgICAgRG9jdW1lbnQodjApXHJcbiAqIFNldE11dGF0aW9uICAgICAgICBudWxsICAgICAgICAgICAgICAgICAgRG9jdW1lbnQodjApXHJcbiAqIFBhdGNoTXV0YXRpb24gICAgICBEb2N1bWVudCh2MykgICAgICAgICAgRG9jdW1lbnQodjMpXHJcbiAqIFBhdGNoTXV0YXRpb24gICAgICBOb0RvY3VtZW50KHYzKSAgICAgICAgTm9Eb2N1bWVudCh2MylcclxuICogUGF0Y2hNdXRhdGlvbiAgICAgIG51bGwgICAgICAgICAgICAgICAgICBudWxsXHJcbiAqIFRyYW5zZm9ybU11dGF0aW9uICBEb2N1bWVudCh2MykgICAgICAgICAgRG9jdW1lbnQodjMpXHJcbiAqIFRyYW5zZm9ybU11dGF0aW9uICBOb0RvY3VtZW50KHYzKSAgICAgICAgTm9Eb2N1bWVudCh2MylcclxuICogVHJhbnNmb3JtTXV0YXRpb24gIG51bGwgICAgICAgICAgICAgICAgICBudWxsXHJcbiAqIERlbGV0ZU11dGF0aW9uICAgICBEb2N1bWVudCh2MykgICAgICAgICAgTm9Eb2N1bWVudCh2MClcclxuICogRGVsZXRlTXV0YXRpb24gICAgIE5vRG9jdW1lbnQodjMpICAgICAgICBOb0RvY3VtZW50KHYwKVxyXG4gKiBEZWxldGVNdXRhdGlvbiAgICAgbnVsbCAgICAgICAgICAgICAgICAgIE5vRG9jdW1lbnQodjApXHJcbiAqXHJcbiAqIEZvciBhY2tub3dsZWRnZWQgbXV0YXRpb25zLCB3ZSB1c2UgdGhlIHVwZGF0ZVRpbWUgb2YgdGhlIFdyaXRlUmVzcG9uc2UgYXNcclxuICogdGhlIHJlc3VsdGluZyB2ZXJzaW9uIGZvciBTZXQsIFBhdGNoLCBhbmQgVHJhbnNmb3JtIG11dGF0aW9ucy4gQXMgZGVsZXRlc1xyXG4gKiBoYXZlIG5vIGV4cGxpY2l0IHVwZGF0ZSB0aW1lLCB3ZSB1c2UgdGhlIGNvbW1pdFRpbWUgb2YgdGhlIFdyaXRlUmVzcG9uc2UgZm9yXHJcbiAqIERlbGV0ZSBtdXRhdGlvbnMuXHJcbiAqXHJcbiAqIElmIGEgbXV0YXRpb24gaXMgYWNrbm93bGVkZ2VkIGJ5IHRoZSBiYWNrZW5kIGJ1dCBmYWlscyB0aGUgcHJlY29uZGl0aW9uIGNoZWNrXHJcbiAqIGxvY2FsbHksIHdlIHJldHVybiBhbiBgVW5rbm93bkRvY3VtZW50YCBhbmQgcmVseSBvbiBXYXRjaCB0byBzZW5kIHVzIHRoZVxyXG4gKiB1cGRhdGVkIHZlcnNpb24uXHJcbiAqXHJcbiAqIE5vdGUgdGhhdCBUcmFuc2Zvcm1NdXRhdGlvbnMgZG9uJ3QgY3JlYXRlIERvY3VtZW50cyAoaW4gdGhlIGNhc2Ugb2YgYmVpbmdcclxuICogYXBwbGllZCB0byBhIE5vRG9jdW1lbnQpLCBldmVuIHRob3VnaCB0aGV5IHdvdWxkIG9uIHRoZSBiYWNrZW5kLiBUaGlzIGlzXHJcbiAqIGJlY2F1c2UgdGhlIGNsaWVudCBhbHdheXMgY29tYmluZXMgdGhlIFRyYW5zZm9ybU11dGF0aW9uIHdpdGggYSBTZXRNdXRhdGlvblxyXG4gKiBvciBQYXRjaE11dGF0aW9uIGFuZCB3ZSBvbmx5IHdhbnQgdG8gYXBwbHkgdGhlIHRyYW5zZm9ybSBpZiB0aGUgcHJpb3JcclxuICogbXV0YXRpb24gcmVzdWx0ZWQgaW4gYSBEb2N1bWVudCAoYWx3YXlzIHRydWUgZm9yIGEgU2V0TXV0YXRpb24sIGJ1dCBub3RcclxuICogbmVjZXNzYXJpbHkgZm9yIGEgUGF0Y2hNdXRhdGlvbikuXHJcbiAqXHJcbiAqICMjIFN1YmNsYXNzaW5nIE5vdGVzXHJcbiAqXHJcbiAqIFN1YmNsYXNzZXMgb2YgTXV0YXRpb24gbmVlZCB0byBpbXBsZW1lbnQgYXBwbHlUb1JlbW90ZURvY3VtZW50KCkgYW5kXHJcbiAqIGFwcGx5VG9Mb2NhbFZpZXcoKSB0byBpbXBsZW1lbnQgdGhlIGFjdHVhbCBiZWhhdmlvciBvZiBhcHBseWluZyB0aGUgbXV0YXRpb25cclxuICogdG8gc29tZSBzb3VyY2UgZG9jdW1lbnQuXHJcbiAqL1xyXG52YXIgTXV0YXRpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBNdXRhdGlvbigpIHtcclxuICAgIH1cclxuICAgIE11dGF0aW9uLnByb3RvdHlwZS52ZXJpZnlLZXlNYXRjaGVzID0gZnVuY3Rpb24gKG1heWJlRG9jKSB7XHJcbiAgICAgICAgaWYgKG1heWJlRG9jICE9IG51bGwpIHtcclxuICAgICAgICAgICAgYXNzZXJ0KG1heWJlRG9jLmtleS5pc0VxdWFsKHRoaXMua2V5KSwgJ0NhbiBvbmx5IGFwcGx5IGEgbXV0YXRpb24gdG8gYSBkb2N1bWVudCB3aXRoIHRoZSBzYW1lIGtleScpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdGhlIHZlcnNpb24gZnJvbSB0aGUgZ2l2ZW4gZG9jdW1lbnQgZm9yIHVzZSBhcyB0aGUgcmVzdWx0IG9mIGFcclxuICAgICAqIG11dGF0aW9uLiBNdXRhdGlvbnMgYXJlIGRlZmluZWQgdG8gcmV0dXJuIHRoZSB2ZXJzaW9uIG9mIHRoZSBiYXNlIGRvY3VtZW50XHJcbiAgICAgKiBvbmx5IGlmIGl0IGlzIGFuIGV4aXN0aW5nIGRvY3VtZW50LiBEZWxldGVkIGFuZCB1bmtub3duIGRvY3VtZW50cyBoYXZlIGFcclxuICAgICAqIHBvc3QtbXV0YXRpb24gdmVyc2lvbiBvZiBTbmFwc2hvdFZlcnNpb24uTUlOLlxyXG4gICAgICovXHJcbiAgICBNdXRhdGlvbi5nZXRQb3N0TXV0YXRpb25WZXJzaW9uID0gZnVuY3Rpb24gKG1heWJlRG9jKSB7XHJcbiAgICAgICAgaWYgKG1heWJlRG9jIGluc3RhbmNlb2YgRG9jdW1lbnQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG1heWJlRG9jLnZlcnNpb247XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gU25hcHNob3RWZXJzaW9uLk1JTjtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIE11dGF0aW9uO1xyXG59KCkpO1xyXG4vKipcclxuICogQSBtdXRhdGlvbiB0aGF0IGNyZWF0ZXMgb3IgcmVwbGFjZXMgdGhlIGRvY3VtZW50IGF0IHRoZSBnaXZlbiBrZXkgd2l0aCB0aGVcclxuICogb2JqZWN0IHZhbHVlIGNvbnRlbnRzLlxyXG4gKi9cclxudmFyIFNldE11dGF0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgdHNsaWIuX19leHRlbmRzKFNldE11dGF0aW9uLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gU2V0TXV0YXRpb24oa2V5LCB2YWx1ZSwgcHJlY29uZGl0aW9uKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcclxuICAgICAgICBfdGhpcy5rZXkgPSBrZXk7XHJcbiAgICAgICAgX3RoaXMudmFsdWUgPSB2YWx1ZTtcclxuICAgICAgICBfdGhpcy5wcmVjb25kaXRpb24gPSBwcmVjb25kaXRpb247XHJcbiAgICAgICAgX3RoaXMudHlwZSA9IE11dGF0aW9uVHlwZS5TZXQ7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgU2V0TXV0YXRpb24ucHJvdG90eXBlLmFwcGx5VG9SZW1vdGVEb2N1bWVudCA9IGZ1bmN0aW9uIChtYXliZURvYywgbXV0YXRpb25SZXN1bHQpIHtcclxuICAgICAgICB0aGlzLnZlcmlmeUtleU1hdGNoZXMobWF5YmVEb2MpO1xyXG4gICAgICAgIGFzc2VydChtdXRhdGlvblJlc3VsdC50cmFuc2Zvcm1SZXN1bHRzID09IG51bGwsICdUcmFuc2Zvcm0gcmVzdWx0cyByZWNlaXZlZCBieSBTZXRNdXRhdGlvbi4nKTtcclxuICAgICAgICAvLyBVbmxpa2UgYXBwbHlUb0xvY2FsVmlldywgaWYgd2UncmUgYXBwbHlpbmcgYSBtdXRhdGlvbiB0byBhIHJlbW90ZVxyXG4gICAgICAgIC8vIGRvY3VtZW50IHRoZSBzZXJ2ZXIgaGFzIGFjY2VwdGVkIHRoZSBtdXRhdGlvbiBzbyB0aGUgcHJlY29uZGl0aW9uIG11c3RcclxuICAgICAgICAvLyBoYXZlIGhlbGQuXHJcbiAgICAgICAgdmFyIHZlcnNpb24gPSBtdXRhdGlvblJlc3VsdC52ZXJzaW9uO1xyXG4gICAgICAgIHJldHVybiBuZXcgRG9jdW1lbnQodGhpcy5rZXksIHZlcnNpb24sIHtcclxuICAgICAgICAgICAgaGFzQ29tbWl0dGVkTXV0YXRpb25zOiB0cnVlXHJcbiAgICAgICAgfSwgdGhpcy52YWx1ZSk7XHJcbiAgICB9O1xyXG4gICAgU2V0TXV0YXRpb24ucHJvdG90eXBlLmFwcGx5VG9Mb2NhbFZpZXcgPSBmdW5jdGlvbiAobWF5YmVEb2MsIGJhc2VEb2MsIGxvY2FsV3JpdGVUaW1lKSB7XHJcbiAgICAgICAgdGhpcy52ZXJpZnlLZXlNYXRjaGVzKG1heWJlRG9jKTtcclxuICAgICAgICBpZiAoIXRoaXMucHJlY29uZGl0aW9uLmlzVmFsaWRGb3IobWF5YmVEb2MpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBtYXliZURvYztcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIHZlcnNpb24gPSBNdXRhdGlvbi5nZXRQb3N0TXV0YXRpb25WZXJzaW9uKG1heWJlRG9jKTtcclxuICAgICAgICByZXR1cm4gbmV3IERvY3VtZW50KHRoaXMua2V5LCB2ZXJzaW9uLCB7XHJcbiAgICAgICAgICAgIGhhc0xvY2FsTXV0YXRpb25zOiB0cnVlXHJcbiAgICAgICAgfSwgdGhpcy52YWx1ZSk7XHJcbiAgICB9O1xyXG4gICAgU2V0TXV0YXRpb24ucHJvdG90eXBlLmV4dHJhY3RCYXNlVmFsdWUgPSBmdW5jdGlvbiAobWF5YmVEb2MpIHtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH07XHJcbiAgICBTZXRNdXRhdGlvbi5wcm90b3R5cGUuaXNFcXVhbCA9IGZ1bmN0aW9uIChvdGhlcikge1xyXG4gICAgICAgIHJldHVybiAob3RoZXIgaW5zdGFuY2VvZiBTZXRNdXRhdGlvbiAmJlxyXG4gICAgICAgICAgICB0aGlzLmtleS5pc0VxdWFsKG90aGVyLmtleSkgJiZcclxuICAgICAgICAgICAgdGhpcy52YWx1ZS5pc0VxdWFsKG90aGVyLnZhbHVlKSAmJlxyXG4gICAgICAgICAgICB0aGlzLnByZWNvbmRpdGlvbi5pc0VxdWFsKG90aGVyLnByZWNvbmRpdGlvbikpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBTZXRNdXRhdGlvbjtcclxufShNdXRhdGlvbikpO1xyXG4vKipcclxuICogQSBtdXRhdGlvbiB0aGF0IG1vZGlmaWVzIGZpZWxkcyBvZiB0aGUgZG9jdW1lbnQgYXQgdGhlIGdpdmVuIGtleSB3aXRoIHRoZVxyXG4gKiBnaXZlbiB2YWx1ZXMuIFRoZSB2YWx1ZXMgYXJlIGFwcGxpZWQgdGhyb3VnaCBhIGZpZWxkIG1hc2s6XHJcbiAqXHJcbiAqICAqIFdoZW4gYSBmaWVsZCBpcyBpbiBib3RoIHRoZSBtYXNrIGFuZCB0aGUgdmFsdWVzLCB0aGUgY29ycmVzcG9uZGluZyBmaWVsZFxyXG4gKiAgICBpcyB1cGRhdGVkLlxyXG4gKiAgKiBXaGVuIGEgZmllbGQgaXMgaW4gbmVpdGhlciB0aGUgbWFzayBub3IgdGhlIHZhbHVlcywgdGhlIGNvcnJlc3BvbmRpbmdcclxuICogICAgZmllbGQgaXMgdW5tb2RpZmllZC5cclxuICogICogV2hlbiBhIGZpZWxkIGlzIGluIHRoZSBtYXNrIGJ1dCBub3QgaW4gdGhlIHZhbHVlcywgdGhlIGNvcnJlc3BvbmRpbmcgZmllbGRcclxuICogICAgaXMgZGVsZXRlZC5cclxuICogICogV2hlbiBhIGZpZWxkIGlzIG5vdCBpbiB0aGUgbWFzayBidXQgaXMgaW4gdGhlIHZhbHVlcywgdGhlIHZhbHVlcyBtYXAgaXNcclxuICogICAgaWdub3JlZC5cclxuICovXHJcbnZhciBQYXRjaE11dGF0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgdHNsaWIuX19leHRlbmRzKFBhdGNoTXV0YXRpb24sIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBQYXRjaE11dGF0aW9uKGtleSwgZGF0YSwgZmllbGRNYXNrLCBwcmVjb25kaXRpb24pIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xyXG4gICAgICAgIF90aGlzLmtleSA9IGtleTtcclxuICAgICAgICBfdGhpcy5kYXRhID0gZGF0YTtcclxuICAgICAgICBfdGhpcy5maWVsZE1hc2sgPSBmaWVsZE1hc2s7XHJcbiAgICAgICAgX3RoaXMucHJlY29uZGl0aW9uID0gcHJlY29uZGl0aW9uO1xyXG4gICAgICAgIF90aGlzLnR5cGUgPSBNdXRhdGlvblR5cGUuUGF0Y2g7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgUGF0Y2hNdXRhdGlvbi5wcm90b3R5cGUuYXBwbHlUb1JlbW90ZURvY3VtZW50ID0gZnVuY3Rpb24gKG1heWJlRG9jLCBtdXRhdGlvblJlc3VsdCkge1xyXG4gICAgICAgIHRoaXMudmVyaWZ5S2V5TWF0Y2hlcyhtYXliZURvYyk7XHJcbiAgICAgICAgYXNzZXJ0KG11dGF0aW9uUmVzdWx0LnRyYW5zZm9ybVJlc3VsdHMgPT0gbnVsbCwgJ1RyYW5zZm9ybSByZXN1bHRzIHJlY2VpdmVkIGJ5IFBhdGNoTXV0YXRpb24uJyk7XHJcbiAgICAgICAgaWYgKCF0aGlzLnByZWNvbmRpdGlvbi5pc1ZhbGlkRm9yKG1heWJlRG9jKSkge1xyXG4gICAgICAgICAgICAvLyBTaW5jZSB0aGUgbXV0YXRpb24gd2FzIG5vdCByZWplY3RlZCwgd2Uga25vdyB0aGF0IHRoZSAgcHJlY29uZGl0aW9uXHJcbiAgICAgICAgICAgIC8vIG1hdGNoZWQgb24gdGhlIGJhY2tlbmQuIFdlIHRoZXJlZm9yZSBtdXN0IG5vdCBoYXZlIHRoZSBleHBlY3RlZCB2ZXJzaW9uXHJcbiAgICAgICAgICAgIC8vIG9mIHRoZSBkb2N1bWVudCBpbiBvdXIgY2FjaGUgYW5kIHJldHVybiBhbiBVbmtub3duRG9jdW1lbnQgd2l0aCB0aGVcclxuICAgICAgICAgICAgLy8ga25vd24gdXBkYXRlVGltZS5cclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBVbmtub3duRG9jdW1lbnQodGhpcy5rZXksIG11dGF0aW9uUmVzdWx0LnZlcnNpb24pO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgbmV3RGF0YSA9IHRoaXMucGF0Y2hEb2N1bWVudChtYXliZURvYyk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBEb2N1bWVudCh0aGlzLmtleSwgbXV0YXRpb25SZXN1bHQudmVyc2lvbiwge1xyXG4gICAgICAgICAgICBoYXNDb21taXR0ZWRNdXRhdGlvbnM6IHRydWVcclxuICAgICAgICB9LCBuZXdEYXRhKTtcclxuICAgIH07XHJcbiAgICBQYXRjaE11dGF0aW9uLnByb3RvdHlwZS5hcHBseVRvTG9jYWxWaWV3ID0gZnVuY3Rpb24gKG1heWJlRG9jLCBiYXNlRG9jLCBsb2NhbFdyaXRlVGltZSkge1xyXG4gICAgICAgIHRoaXMudmVyaWZ5S2V5TWF0Y2hlcyhtYXliZURvYyk7XHJcbiAgICAgICAgaWYgKCF0aGlzLnByZWNvbmRpdGlvbi5pc1ZhbGlkRm9yKG1heWJlRG9jKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbWF5YmVEb2M7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciB2ZXJzaW9uID0gTXV0YXRpb24uZ2V0UG9zdE11dGF0aW9uVmVyc2lvbihtYXliZURvYyk7XHJcbiAgICAgICAgdmFyIG5ld0RhdGEgPSB0aGlzLnBhdGNoRG9jdW1lbnQobWF5YmVEb2MpO1xyXG4gICAgICAgIHJldHVybiBuZXcgRG9jdW1lbnQodGhpcy5rZXksIHZlcnNpb24sIHtcclxuICAgICAgICAgICAgaGFzTG9jYWxNdXRhdGlvbnM6IHRydWVcclxuICAgICAgICB9LCBuZXdEYXRhKTtcclxuICAgIH07XHJcbiAgICBQYXRjaE11dGF0aW9uLnByb3RvdHlwZS5leHRyYWN0QmFzZVZhbHVlID0gZnVuY3Rpb24gKG1heWJlRG9jKSB7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9O1xyXG4gICAgUGF0Y2hNdXRhdGlvbi5wcm90b3R5cGUuaXNFcXVhbCA9IGZ1bmN0aW9uIChvdGhlcikge1xyXG4gICAgICAgIHJldHVybiAob3RoZXIgaW5zdGFuY2VvZiBQYXRjaE11dGF0aW9uICYmXHJcbiAgICAgICAgICAgIHRoaXMua2V5LmlzRXF1YWwob3RoZXIua2V5KSAmJlxyXG4gICAgICAgICAgICB0aGlzLmZpZWxkTWFzay5pc0VxdWFsKG90aGVyLmZpZWxkTWFzaykgJiZcclxuICAgICAgICAgICAgdGhpcy5wcmVjb25kaXRpb24uaXNFcXVhbChvdGhlci5wcmVjb25kaXRpb24pKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFBhdGNoZXMgdGhlIGRhdGEgb2YgZG9jdW1lbnQgaWYgYXZhaWxhYmxlIG9yIGNyZWF0ZXMgYSBuZXcgZG9jdW1lbnQuIE5vdGVcclxuICAgICAqIHRoYXQgdGhpcyBkb2VzIG5vdCBjaGVjayB3aGV0aGVyIG9yIG5vdCB0aGUgcHJlY29uZGl0aW9uIG9mIHRoaXMgcGF0Y2hcclxuICAgICAqIGhvbGRzLlxyXG4gICAgICovXHJcbiAgICBQYXRjaE11dGF0aW9uLnByb3RvdHlwZS5wYXRjaERvY3VtZW50ID0gZnVuY3Rpb24gKG1heWJlRG9jKSB7XHJcbiAgICAgICAgdmFyIGRhdGE7XHJcbiAgICAgICAgaWYgKG1heWJlRG9jIGluc3RhbmNlb2YgRG9jdW1lbnQpIHtcclxuICAgICAgICAgICAgZGF0YSA9IG1heWJlRG9jLmRhdGEoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGRhdGEgPSBPYmplY3RWYWx1ZS5FTVBUWTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucGF0Y2hPYmplY3QoZGF0YSk7XHJcbiAgICB9O1xyXG4gICAgUGF0Y2hNdXRhdGlvbi5wcm90b3R5cGUucGF0Y2hPYmplY3QgPSBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5maWVsZE1hc2suZmllbGRzLmZvckVhY2goZnVuY3Rpb24gKGZpZWxkUGF0aCkge1xyXG4gICAgICAgICAgICBpZiAoIWZpZWxkUGF0aC5pc0VtcHR5KCkpIHtcclxuICAgICAgICAgICAgICAgIHZhciBuZXdWYWx1ZSA9IF90aGlzLmRhdGEuZmllbGQoZmllbGRQYXRoKTtcclxuICAgICAgICAgICAgICAgIGlmIChuZXdWYWx1ZSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGEgPSBkYXRhLnNldChmaWVsZFBhdGgsIG5ld1ZhbHVlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGEgPSBkYXRhLmRlbGV0ZShmaWVsZFBhdGgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIGRhdGE7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFBhdGNoTXV0YXRpb247XHJcbn0oTXV0YXRpb24pKTtcclxuLyoqXHJcbiAqIEEgbXV0YXRpb24gdGhhdCBtb2RpZmllcyBzcGVjaWZpYyBmaWVsZHMgb2YgdGhlIGRvY3VtZW50IHdpdGggdHJhbnNmb3JtXHJcbiAqIG9wZXJhdGlvbnMuIEN1cnJlbnRseSB0aGUgb25seSBzdXBwb3J0ZWQgdHJhbnNmb3JtIGlzIGEgc2VydmVyIHRpbWVzdGFtcCwgYnV0XHJcbiAqIElQIEFkZHJlc3MsIGluY3JlbWVudChuKSwgZXRjLiBjb3VsZCBiZSBzdXBwb3J0ZWQgaW4gdGhlIGZ1dHVyZS5cclxuICpcclxuICogSXQgaXMgc29tZXdoYXQgc2ltaWxhciB0byBhIFBhdGNoTXV0YXRpb24gaW4gdGhhdCBpdCBwYXRjaGVzIHNwZWNpZmljIGZpZWxkc1xyXG4gKiBhbmQgaGFzIG5vIGVmZmVjdCB3aGVuIGFwcGxpZWQgdG8gYSBudWxsIG9yIE5vRG9jdW1lbnQgKHNlZSBjb21tZW50IG9uXHJcbiAqIE11dGF0aW9uIGZvciByYXRpb25hbGUpLlxyXG4gKi9cclxudmFyIFRyYW5zZm9ybU11dGF0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgdHNsaWIuX19leHRlbmRzKFRyYW5zZm9ybU11dGF0aW9uLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gVHJhbnNmb3JtTXV0YXRpb24oa2V5LCBmaWVsZFRyYW5zZm9ybXMpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xyXG4gICAgICAgIF90aGlzLmtleSA9IGtleTtcclxuICAgICAgICBfdGhpcy5maWVsZFRyYW5zZm9ybXMgPSBmaWVsZFRyYW5zZm9ybXM7XHJcbiAgICAgICAgX3RoaXMudHlwZSA9IE11dGF0aW9uVHlwZS5UcmFuc2Zvcm07XHJcbiAgICAgICAgLy8gTk9URTogV2Ugc2V0IGEgcHJlY29uZGl0aW9uIG9mIGV4aXN0czogdHJ1ZSBhcyBhIHNhZmV0eS1jaGVjaywgc2luY2Ugd2VcclxuICAgICAgICAvLyBhbHdheXMgY29tYmluZSBUcmFuc2Zvcm1NdXRhdGlvbnMgd2l0aCBhIFNldE11dGF0aW9uIG9yIFBhdGNoTXV0YXRpb24gd2hpY2hcclxuICAgICAgICAvLyAoaWYgc3VjY2Vzc2Z1bCkgc2hvdWxkIGVuZCB1cCB3aXRoIGFuIGV4aXN0aW5nIGRvY3VtZW50LlxyXG4gICAgICAgIF90aGlzLnByZWNvbmRpdGlvbiA9IFByZWNvbmRpdGlvbi5leGlzdHModHJ1ZSk7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgVHJhbnNmb3JtTXV0YXRpb24ucHJvdG90eXBlLmFwcGx5VG9SZW1vdGVEb2N1bWVudCA9IGZ1bmN0aW9uIChtYXliZURvYywgbXV0YXRpb25SZXN1bHQpIHtcclxuICAgICAgICB0aGlzLnZlcmlmeUtleU1hdGNoZXMobWF5YmVEb2MpO1xyXG4gICAgICAgIGFzc2VydChtdXRhdGlvblJlc3VsdC50cmFuc2Zvcm1SZXN1bHRzICE9IG51bGwsICdUcmFuc2Zvcm0gcmVzdWx0cyBtaXNzaW5nIGZvciBUcmFuc2Zvcm1NdXRhdGlvbi4nKTtcclxuICAgICAgICBpZiAoIXRoaXMucHJlY29uZGl0aW9uLmlzVmFsaWRGb3IobWF5YmVEb2MpKSB7XHJcbiAgICAgICAgICAgIC8vIFNpbmNlIHRoZSBtdXRhdGlvbiB3YXMgbm90IHJlamVjdGVkLCB3ZSBrbm93IHRoYXQgdGhlICBwcmVjb25kaXRpb25cclxuICAgICAgICAgICAgLy8gbWF0Y2hlZCBvbiB0aGUgYmFja2VuZC4gV2UgdGhlcmVmb3JlIG11c3Qgbm90IGhhdmUgdGhlIGV4cGVjdGVkIHZlcnNpb25cclxuICAgICAgICAgICAgLy8gb2YgdGhlIGRvY3VtZW50IGluIG91ciBjYWNoZSBhbmQgcmV0dXJuIGFuIFVua25vd25Eb2N1bWVudCB3aXRoIHRoZVxyXG4gICAgICAgICAgICAvLyBrbm93biB1cGRhdGVUaW1lLlxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFVua25vd25Eb2N1bWVudCh0aGlzLmtleSwgbXV0YXRpb25SZXN1bHQudmVyc2lvbik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBkb2MgPSB0aGlzLnJlcXVpcmVEb2N1bWVudChtYXliZURvYyk7XHJcbiAgICAgICAgdmFyIHRyYW5zZm9ybVJlc3VsdHMgPSB0aGlzLnNlcnZlclRyYW5zZm9ybVJlc3VsdHMobWF5YmVEb2MsIG11dGF0aW9uUmVzdWx0LnRyYW5zZm9ybVJlc3VsdHMpO1xyXG4gICAgICAgIHZhciB2ZXJzaW9uID0gbXV0YXRpb25SZXN1bHQudmVyc2lvbjtcclxuICAgICAgICB2YXIgbmV3RGF0YSA9IHRoaXMudHJhbnNmb3JtT2JqZWN0KGRvYy5kYXRhKCksIHRyYW5zZm9ybVJlc3VsdHMpO1xyXG4gICAgICAgIHJldHVybiBuZXcgRG9jdW1lbnQodGhpcy5rZXksIHZlcnNpb24sIHtcclxuICAgICAgICAgICAgaGFzQ29tbWl0dGVkTXV0YXRpb25zOiB0cnVlXHJcbiAgICAgICAgfSwgbmV3RGF0YSk7XHJcbiAgICB9O1xyXG4gICAgVHJhbnNmb3JtTXV0YXRpb24ucHJvdG90eXBlLmFwcGx5VG9Mb2NhbFZpZXcgPSBmdW5jdGlvbiAobWF5YmVEb2MsIGJhc2VEb2MsIGxvY2FsV3JpdGVUaW1lKSB7XHJcbiAgICAgICAgdGhpcy52ZXJpZnlLZXlNYXRjaGVzKG1heWJlRG9jKTtcclxuICAgICAgICBpZiAoIXRoaXMucHJlY29uZGl0aW9uLmlzVmFsaWRGb3IobWF5YmVEb2MpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBtYXliZURvYztcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGRvYyA9IHRoaXMucmVxdWlyZURvY3VtZW50KG1heWJlRG9jKTtcclxuICAgICAgICB2YXIgdHJhbnNmb3JtUmVzdWx0cyA9IHRoaXMubG9jYWxUcmFuc2Zvcm1SZXN1bHRzKGxvY2FsV3JpdGVUaW1lLCBtYXliZURvYywgYmFzZURvYyk7XHJcbiAgICAgICAgdmFyIG5ld0RhdGEgPSB0aGlzLnRyYW5zZm9ybU9iamVjdChkb2MuZGF0YSgpLCB0cmFuc2Zvcm1SZXN1bHRzKTtcclxuICAgICAgICByZXR1cm4gbmV3IERvY3VtZW50KHRoaXMua2V5LCBkb2MudmVyc2lvbiwge1xyXG4gICAgICAgICAgICBoYXNMb2NhbE11dGF0aW9uczogdHJ1ZVxyXG4gICAgICAgIH0sIG5ld0RhdGEpO1xyXG4gICAgfTtcclxuICAgIFRyYW5zZm9ybU11dGF0aW9uLnByb3RvdHlwZS5leHRyYWN0QmFzZVZhbHVlID0gZnVuY3Rpb24gKG1heWJlRG9jKSB7XHJcbiAgICAgICAgdmFyIGJhc2VPYmplY3QgPSBudWxsO1xyXG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSB0aGlzLmZpZWxkVHJhbnNmb3JtczsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgdmFyIGZpZWxkVHJhbnNmb3JtID0gX2FbX2ldO1xyXG4gICAgICAgICAgICB2YXIgZXhpc3RpbmdWYWx1ZSA9IG1heWJlRG9jIGluc3RhbmNlb2YgRG9jdW1lbnRcclxuICAgICAgICAgICAgICAgID8gbWF5YmVEb2MuZmllbGQoZmllbGRUcmFuc2Zvcm0uZmllbGQpXHJcbiAgICAgICAgICAgICAgICA6IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgdmFyIGNvZXJjZWRWYWx1ZSA9IGZpZWxkVHJhbnNmb3JtLnRyYW5zZm9ybS5jb21wdXRlQmFzZVZhbHVlKGV4aXN0aW5nVmFsdWUgfHwgbnVsbCk7XHJcbiAgICAgICAgICAgIGlmIChjb2VyY2VkVmFsdWUgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGJhc2VPYmplY3QgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGJhc2VPYmplY3QgPSBPYmplY3RWYWx1ZS5FTVBUWS5zZXQoZmllbGRUcmFuc2Zvcm0uZmllbGQsIGNvZXJjZWRWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBiYXNlT2JqZWN0ID0gYmFzZU9iamVjdC5zZXQoZmllbGRUcmFuc2Zvcm0uZmllbGQsIGNvZXJjZWRWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGJhc2VPYmplY3Q7XHJcbiAgICB9O1xyXG4gICAgVHJhbnNmb3JtTXV0YXRpb24ucHJvdG90eXBlLmlzRXF1YWwgPSBmdW5jdGlvbiAob3RoZXIpIHtcclxuICAgICAgICByZXR1cm4gKG90aGVyIGluc3RhbmNlb2YgVHJhbnNmb3JtTXV0YXRpb24gJiZcclxuICAgICAgICAgICAgdGhpcy5rZXkuaXNFcXVhbChvdGhlci5rZXkpICYmXHJcbiAgICAgICAgICAgIGFycmF5RXF1YWxzKHRoaXMuZmllbGRUcmFuc2Zvcm1zLCBvdGhlci5maWVsZFRyYW5zZm9ybXMpICYmXHJcbiAgICAgICAgICAgIHRoaXMucHJlY29uZGl0aW9uLmlzRXF1YWwob3RoZXIucHJlY29uZGl0aW9uKSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBBc3NlcnRzIHRoYXQgdGhlIGdpdmVuIE1heWJlRG9jdW1lbnQgaXMgYWN0dWFsbHkgYSBEb2N1bWVudCBhbmQgdmVyaWZpZXNcclxuICAgICAqIHRoYXQgaXQgbWF0Y2hlcyB0aGUga2V5IGZvciB0aGlzIG11dGF0aW9uLiBTaW5jZSB3ZSBvbmx5IHN1cHBvcnRcclxuICAgICAqIHRyYW5zZm9ybWF0aW9ucyB3aXRoIHByZWNvbmRpdGlvbiBleGlzdHMgdGhpcyBtZXRob2QgaXMgZ3VhcmFudGVlZCB0byBiZVxyXG4gICAgICogc2FmZS5cclxuICAgICAqL1xyXG4gICAgVHJhbnNmb3JtTXV0YXRpb24ucHJvdG90eXBlLnJlcXVpcmVEb2N1bWVudCA9IGZ1bmN0aW9uIChtYXliZURvYykge1xyXG4gICAgICAgIGFzc2VydChtYXliZURvYyBpbnN0YW5jZW9mIERvY3VtZW50LCAnVW5rbm93biBNYXliZURvY3VtZW50IHR5cGUgJyArIG1heWJlRG9jKTtcclxuICAgICAgICBhc3NlcnQobWF5YmVEb2Mua2V5LmlzRXF1YWwodGhpcy5rZXkpLCAnQ2FuIG9ubHkgdHJhbnNmb3JtIGEgZG9jdW1lbnQgd2l0aCB0aGUgc2FtZSBrZXknKTtcclxuICAgICAgICByZXR1cm4gbWF5YmVEb2M7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGVzIGEgbGlzdCBvZiBcInRyYW5zZm9ybSByZXN1bHRzXCIgKGEgdHJhbnNmb3JtIHJlc3VsdCBpcyBhIGZpZWxkIHZhbHVlXHJcbiAgICAgKiByZXByZXNlbnRpbmcgdGhlIHJlc3VsdCBvZiBhcHBseWluZyBhIHRyYW5zZm9ybSkgZm9yIHVzZSBhZnRlciBhXHJcbiAgICAgKiBUcmFuc2Zvcm1NdXRhdGlvbiBoYXMgYmVlbiBhY2tub3dsZWRnZWQgYnkgdGhlIHNlcnZlci5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gYmFzZURvYyBUaGUgZG9jdW1lbnQgcHJpb3IgdG8gYXBwbHlpbmcgdGhpcyBtdXRhdGlvbiBiYXRjaC5cclxuICAgICAqIEBwYXJhbSBzZXJ2ZXJUcmFuc2Zvcm1SZXN1bHRzIFRoZSB0cmFuc2Zvcm0gcmVzdWx0cyByZWNlaXZlZCBieSB0aGUgc2VydmVyLlxyXG4gICAgICogQHJldHVybiBUaGUgdHJhbnNmb3JtIHJlc3VsdHMgbGlzdC5cclxuICAgICAqL1xyXG4gICAgVHJhbnNmb3JtTXV0YXRpb24ucHJvdG90eXBlLnNlcnZlclRyYW5zZm9ybVJlc3VsdHMgPSBmdW5jdGlvbiAoYmFzZURvYywgc2VydmVyVHJhbnNmb3JtUmVzdWx0cykge1xyXG4gICAgICAgIHZhciB0cmFuc2Zvcm1SZXN1bHRzID0gW107XHJcbiAgICAgICAgYXNzZXJ0KHRoaXMuZmllbGRUcmFuc2Zvcm1zLmxlbmd0aCA9PT0gc2VydmVyVHJhbnNmb3JtUmVzdWx0cy5sZW5ndGgsIFwic2VydmVyIHRyYW5zZm9ybSByZXN1bHQgY291bnQgKFwiICsgc2VydmVyVHJhbnNmb3JtUmVzdWx0cy5sZW5ndGggKyBcIikgXCIgK1xyXG4gICAgICAgICAgICAoXCJzaG91bGQgbWF0Y2ggZmllbGQgdHJhbnNmb3JtIGNvdW50IChcIiArIHRoaXMuZmllbGRUcmFuc2Zvcm1zLmxlbmd0aCArIFwiKVwiKSk7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZXJ2ZXJUcmFuc2Zvcm1SZXN1bHRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBmaWVsZFRyYW5zZm9ybSA9IHRoaXMuZmllbGRUcmFuc2Zvcm1zW2ldO1xyXG4gICAgICAgICAgICB2YXIgdHJhbnNmb3JtID0gZmllbGRUcmFuc2Zvcm0udHJhbnNmb3JtO1xyXG4gICAgICAgICAgICB2YXIgcHJldmlvdXNWYWx1ZSA9IG51bGw7XHJcbiAgICAgICAgICAgIGlmIChiYXNlRG9jIGluc3RhbmNlb2YgRG9jdW1lbnQpIHtcclxuICAgICAgICAgICAgICAgIHByZXZpb3VzVmFsdWUgPSBiYXNlRG9jLmZpZWxkKGZpZWxkVHJhbnNmb3JtLmZpZWxkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0cmFuc2Zvcm1SZXN1bHRzLnB1c2godHJhbnNmb3JtLmFwcGx5VG9SZW1vdGVEb2N1bWVudChwcmV2aW91c1ZhbHVlLCBzZXJ2ZXJUcmFuc2Zvcm1SZXN1bHRzW2ldKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0cmFuc2Zvcm1SZXN1bHRzO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhIGxpc3Qgb2YgXCJ0cmFuc2Zvcm0gcmVzdWx0c1wiIChhIHRyYW5zZm9ybSByZXN1bHQgaXMgYSBmaWVsZCB2YWx1ZVxyXG4gICAgICogcmVwcmVzZW50aW5nIHRoZSByZXN1bHQgb2YgYXBwbHlpbmcgYSB0cmFuc2Zvcm0pIGZvciB1c2Ugd2hlbiBhcHBseWluZyBhXHJcbiAgICAgKiBUcmFuc2Zvcm1NdXRhdGlvbiBsb2NhbGx5LlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBsb2NhbFdyaXRlVGltZSBUaGUgbG9jYWwgdGltZSBvZiB0aGUgdHJhbnNmb3JtIG11dGF0aW9uICh1c2VkIHRvXHJcbiAgICAgKiAgICAgZ2VuZXJhdGUgU2VydmVyVGltZXN0YW1wVmFsdWVzKS5cclxuICAgICAqIEBwYXJhbSBtYXliZURvYyBUaGUgY3VycmVudCBzdGF0ZSBvZiB0aGUgZG9jdW1lbnQgYWZ0ZXIgYXBwbHlpbmcgYWxsXHJcbiAgICAgKiAgICAgcHJldmlvdXMgbXV0YXRpb25zLlxyXG4gICAgICogQHBhcmFtIGJhc2VEb2MgVGhlIGRvY3VtZW50IHByaW9yIHRvIGFwcGx5aW5nIHRoaXMgbXV0YXRpb24gYmF0Y2guXHJcbiAgICAgKiBAcmV0dXJuIFRoZSB0cmFuc2Zvcm0gcmVzdWx0cyBsaXN0LlxyXG4gICAgICovXHJcbiAgICBUcmFuc2Zvcm1NdXRhdGlvbi5wcm90b3R5cGUubG9jYWxUcmFuc2Zvcm1SZXN1bHRzID0gZnVuY3Rpb24gKGxvY2FsV3JpdGVUaW1lLCBtYXliZURvYywgYmFzZURvYykge1xyXG4gICAgICAgIHZhciB0cmFuc2Zvcm1SZXN1bHRzID0gW107XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHRoaXMuZmllbGRUcmFuc2Zvcm1zOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICB2YXIgZmllbGRUcmFuc2Zvcm0gPSBfYVtfaV07XHJcbiAgICAgICAgICAgIHZhciB0cmFuc2Zvcm0gPSBmaWVsZFRyYW5zZm9ybS50cmFuc2Zvcm07XHJcbiAgICAgICAgICAgIHZhciBwcmV2aW91c1ZhbHVlID0gbnVsbDtcclxuICAgICAgICAgICAgaWYgKG1heWJlRG9jIGluc3RhbmNlb2YgRG9jdW1lbnQpIHtcclxuICAgICAgICAgICAgICAgIHByZXZpb3VzVmFsdWUgPSBtYXliZURvYy5maWVsZChmaWVsZFRyYW5zZm9ybS5maWVsZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHByZXZpb3VzVmFsdWUgPT09IG51bGwgJiYgYmFzZURvYyBpbnN0YW5jZW9mIERvY3VtZW50KSB7XHJcbiAgICAgICAgICAgICAgICAvLyBJZiB0aGUgY3VycmVudCBkb2N1bWVudCBkb2VzIG5vdCBjb250YWluIGEgdmFsdWUgZm9yIHRoZSBtdXRhdGVkXHJcbiAgICAgICAgICAgICAgICAvLyBmaWVsZCwgdXNlIHRoZSB2YWx1ZSB0aGF0IGV4aXN0ZWQgYmVmb3JlIGFwcGx5aW5nIHRoaXMgbXV0YXRpb25cclxuICAgICAgICAgICAgICAgIC8vIGJhdGNoLiBUaGlzIHNvbHZlcyBhbiBlZGdlIGNhc2Ugd2hlcmUgYSBQYXRjaE11dGF0aW9uIGNsZWFycyB0aGVcclxuICAgICAgICAgICAgICAgIC8vIHZhbHVlcyBpbiBhIG5lc3RlZCBtYXAgYmVmb3JlIHRoZSBUcmFuc2Zvcm1NdXRhdGlvbiBpcyBhcHBsaWVkLlxyXG4gICAgICAgICAgICAgICAgcHJldmlvdXNWYWx1ZSA9IGJhc2VEb2MuZmllbGQoZmllbGRUcmFuc2Zvcm0uZmllbGQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRyYW5zZm9ybVJlc3VsdHMucHVzaCh0cmFuc2Zvcm0uYXBwbHlUb0xvY2FsVmlldyhwcmV2aW91c1ZhbHVlLCBsb2NhbFdyaXRlVGltZSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdHJhbnNmb3JtUmVzdWx0cztcclxuICAgIH07XHJcbiAgICBUcmFuc2Zvcm1NdXRhdGlvbi5wcm90b3R5cGUudHJhbnNmb3JtT2JqZWN0ID0gZnVuY3Rpb24gKGRhdGEsIHRyYW5zZm9ybVJlc3VsdHMpIHtcclxuICAgICAgICBhc3NlcnQodHJhbnNmb3JtUmVzdWx0cy5sZW5ndGggPT09IHRoaXMuZmllbGRUcmFuc2Zvcm1zLmxlbmd0aCwgJ1RyYW5zZm9ybVJlc3VsdHMgbGVuZ3RoIG1pc21hdGNoLicpO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5maWVsZFRyYW5zZm9ybXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdmFyIGZpZWxkVHJhbnNmb3JtID0gdGhpcy5maWVsZFRyYW5zZm9ybXNbaV07XHJcbiAgICAgICAgICAgIHZhciBmaWVsZFBhdGggPSBmaWVsZFRyYW5zZm9ybS5maWVsZDtcclxuICAgICAgICAgICAgZGF0YSA9IGRhdGEuc2V0KGZpZWxkUGF0aCwgdHJhbnNmb3JtUmVzdWx0c1tpXSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBUcmFuc2Zvcm1NdXRhdGlvbjtcclxufShNdXRhdGlvbikpO1xyXG4vKiogQSBtdXRhdGlvbiB0aGF0IGRlbGV0ZXMgdGhlIGRvY3VtZW50IGF0IHRoZSBnaXZlbiBrZXkuICovXHJcbnZhciBEZWxldGVNdXRhdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIHRzbGliLl9fZXh0ZW5kcyhEZWxldGVNdXRhdGlvbiwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIERlbGV0ZU11dGF0aW9uKGtleSwgcHJlY29uZGl0aW9uKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcclxuICAgICAgICBfdGhpcy5rZXkgPSBrZXk7XHJcbiAgICAgICAgX3RoaXMucHJlY29uZGl0aW9uID0gcHJlY29uZGl0aW9uO1xyXG4gICAgICAgIF90aGlzLnR5cGUgPSBNdXRhdGlvblR5cGUuRGVsZXRlO1xyXG4gICAgICAgIHJldHVybiBfdGhpcztcclxuICAgIH1cclxuICAgIERlbGV0ZU11dGF0aW9uLnByb3RvdHlwZS5hcHBseVRvUmVtb3RlRG9jdW1lbnQgPSBmdW5jdGlvbiAobWF5YmVEb2MsIG11dGF0aW9uUmVzdWx0KSB7XHJcbiAgICAgICAgdGhpcy52ZXJpZnlLZXlNYXRjaGVzKG1heWJlRG9jKTtcclxuICAgICAgICBhc3NlcnQobXV0YXRpb25SZXN1bHQudHJhbnNmb3JtUmVzdWx0cyA9PSBudWxsLCAnVHJhbnNmb3JtIHJlc3VsdHMgcmVjZWl2ZWQgYnkgRGVsZXRlTXV0YXRpb24uJyk7XHJcbiAgICAgICAgLy8gVW5saWtlIGFwcGx5VG9Mb2NhbFZpZXcsIGlmIHdlJ3JlIGFwcGx5aW5nIGEgbXV0YXRpb24gdG8gYSByZW1vdGVcclxuICAgICAgICAvLyBkb2N1bWVudCB0aGUgc2VydmVyIGhhcyBhY2NlcHRlZCB0aGUgbXV0YXRpb24gc28gdGhlIHByZWNvbmRpdGlvbiBtdXN0XHJcbiAgICAgICAgLy8gaGF2ZSBoZWxkLlxyXG4gICAgICAgIHJldHVybiBuZXcgTm9Eb2N1bWVudCh0aGlzLmtleSwgbXV0YXRpb25SZXN1bHQudmVyc2lvbiwge1xyXG4gICAgICAgICAgICBoYXNDb21taXR0ZWRNdXRhdGlvbnM6IHRydWVcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBEZWxldGVNdXRhdGlvbi5wcm90b3R5cGUuYXBwbHlUb0xvY2FsVmlldyA9IGZ1bmN0aW9uIChtYXliZURvYywgYmFzZURvYywgbG9jYWxXcml0ZVRpbWUpIHtcclxuICAgICAgICB0aGlzLnZlcmlmeUtleU1hdGNoZXMobWF5YmVEb2MpO1xyXG4gICAgICAgIGlmICghdGhpcy5wcmVjb25kaXRpb24uaXNWYWxpZEZvcihtYXliZURvYykpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG1heWJlRG9jO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAobWF5YmVEb2MpIHtcclxuICAgICAgICAgICAgYXNzZXJ0KG1heWJlRG9jLmtleS5pc0VxdWFsKHRoaXMua2V5KSwgJ0NhbiBvbmx5IGFwcGx5IG11dGF0aW9uIHRvIGRvY3VtZW50IHdpdGggc2FtZSBrZXknKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG5ldyBOb0RvY3VtZW50KHRoaXMua2V5LCBTbmFwc2hvdFZlcnNpb24uZm9yRGVsZXRlZERvYygpKTtcclxuICAgIH07XHJcbiAgICBEZWxldGVNdXRhdGlvbi5wcm90b3R5cGUuZXh0cmFjdEJhc2VWYWx1ZSA9IGZ1bmN0aW9uIChtYXliZURvYykge1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfTtcclxuICAgIERlbGV0ZU11dGF0aW9uLnByb3RvdHlwZS5pc0VxdWFsID0gZnVuY3Rpb24gKG90aGVyKSB7XHJcbiAgICAgICAgcmV0dXJuIChvdGhlciBpbnN0YW5jZW9mIERlbGV0ZU11dGF0aW9uICYmXHJcbiAgICAgICAgICAgIHRoaXMua2V5LmlzRXF1YWwob3RoZXIua2V5KSAmJlxyXG4gICAgICAgICAgICB0aGlzLnByZWNvbmRpdGlvbi5pc0VxdWFsKG90aGVyLnByZWNvbmRpdGlvbikpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBEZWxldGVNdXRhdGlvbjtcclxufShNdXRhdGlvbikpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxudmFyIFR5cGVPcmRlcjtcclxuKGZ1bmN0aW9uIChUeXBlT3JkZXIpIHtcclxuICAgIC8vIFRoaXMgb3JkZXIgaXMgZGVmaW5lZCBieSB0aGUgYmFja2VuZC5cclxuICAgIFR5cGVPcmRlcltUeXBlT3JkZXJbXCJOdWxsVmFsdWVcIl0gPSAwXSA9IFwiTnVsbFZhbHVlXCI7XHJcbiAgICBUeXBlT3JkZXJbVHlwZU9yZGVyW1wiQm9vbGVhblZhbHVlXCJdID0gMV0gPSBcIkJvb2xlYW5WYWx1ZVwiO1xyXG4gICAgVHlwZU9yZGVyW1R5cGVPcmRlcltcIk51bWJlclZhbHVlXCJdID0gMl0gPSBcIk51bWJlclZhbHVlXCI7XHJcbiAgICBUeXBlT3JkZXJbVHlwZU9yZGVyW1wiVGltZXN0YW1wVmFsdWVcIl0gPSAzXSA9IFwiVGltZXN0YW1wVmFsdWVcIjtcclxuICAgIFR5cGVPcmRlcltUeXBlT3JkZXJbXCJTdHJpbmdWYWx1ZVwiXSA9IDRdID0gXCJTdHJpbmdWYWx1ZVwiO1xyXG4gICAgVHlwZU9yZGVyW1R5cGVPcmRlcltcIkJsb2JWYWx1ZVwiXSA9IDVdID0gXCJCbG9iVmFsdWVcIjtcclxuICAgIFR5cGVPcmRlcltUeXBlT3JkZXJbXCJSZWZWYWx1ZVwiXSA9IDZdID0gXCJSZWZWYWx1ZVwiO1xyXG4gICAgVHlwZU9yZGVyW1R5cGVPcmRlcltcIkdlb1BvaW50VmFsdWVcIl0gPSA3XSA9IFwiR2VvUG9pbnRWYWx1ZVwiO1xyXG4gICAgVHlwZU9yZGVyW1R5cGVPcmRlcltcIkFycmF5VmFsdWVcIl0gPSA4XSA9IFwiQXJyYXlWYWx1ZVwiO1xyXG4gICAgVHlwZU9yZGVyW1R5cGVPcmRlcltcIk9iamVjdFZhbHVlXCJdID0gOV0gPSBcIk9iamVjdFZhbHVlXCI7XHJcbn0pKFR5cGVPcmRlciB8fCAoVHlwZU9yZGVyID0ge30pKTtcclxuLyoqIERlZmluZXMgdGhlIHJldHVybiB2YWx1ZSBmb3IgcGVuZGluZyBzZXJ2ZXIgdGltZXN0YW1wcy4gKi9cclxudmFyIFNlcnZlclRpbWVzdGFtcEJlaGF2aW9yO1xyXG4oZnVuY3Rpb24gKFNlcnZlclRpbWVzdGFtcEJlaGF2aW9yKSB7XHJcbiAgICBTZXJ2ZXJUaW1lc3RhbXBCZWhhdmlvcltTZXJ2ZXJUaW1lc3RhbXBCZWhhdmlvcltcIkRlZmF1bHRcIl0gPSAwXSA9IFwiRGVmYXVsdFwiO1xyXG4gICAgU2VydmVyVGltZXN0YW1wQmVoYXZpb3JbU2VydmVyVGltZXN0YW1wQmVoYXZpb3JbXCJFc3RpbWF0ZVwiXSA9IDFdID0gXCJFc3RpbWF0ZVwiO1xyXG4gICAgU2VydmVyVGltZXN0YW1wQmVoYXZpb3JbU2VydmVyVGltZXN0YW1wQmVoYXZpb3JbXCJQcmV2aW91c1wiXSA9IDJdID0gXCJQcmV2aW91c1wiO1xyXG59KShTZXJ2ZXJUaW1lc3RhbXBCZWhhdmlvciB8fCAoU2VydmVyVGltZXN0YW1wQmVoYXZpb3IgPSB7fSkpO1xyXG4vKiogSG9sZHMgcHJvcGVydGllcyB0aGF0IGRlZmluZSBmaWVsZCB2YWx1ZSBkZXNlcmlhbGl6YXRpb24gb3B0aW9ucy4gKi9cclxudmFyIEZpZWxkVmFsdWVPcHRpb25zID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gRmllbGRWYWx1ZU9wdGlvbnMoc2VydmVyVGltZXN0YW1wQmVoYXZpb3IsIHRpbWVzdGFtcHNJblNuYXBzaG90cykge1xyXG4gICAgICAgIHRoaXMuc2VydmVyVGltZXN0YW1wQmVoYXZpb3IgPSBzZXJ2ZXJUaW1lc3RhbXBCZWhhdmlvcjtcclxuICAgICAgICB0aGlzLnRpbWVzdGFtcHNJblNuYXBzaG90cyA9IHRpbWVzdGFtcHNJblNuYXBzaG90cztcclxuICAgIH1cclxuICAgIEZpZWxkVmFsdWVPcHRpb25zLmZyb21TbmFwc2hvdE9wdGlvbnMgPSBmdW5jdGlvbiAob3B0aW9ucywgdGltZXN0YW1wc0luU25hcHNob3RzKSB7XHJcbiAgICAgICAgc3dpdGNoIChvcHRpb25zLnNlcnZlclRpbWVzdGFtcHMpIHtcclxuICAgICAgICAgICAgY2FzZSAnZXN0aW1hdGUnOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBGaWVsZFZhbHVlT3B0aW9ucyhTZXJ2ZXJUaW1lc3RhbXBCZWhhdmlvci5Fc3RpbWF0ZSwgdGltZXN0YW1wc0luU25hcHNob3RzKTtcclxuICAgICAgICAgICAgY2FzZSAncHJldmlvdXMnOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBGaWVsZFZhbHVlT3B0aW9ucyhTZXJ2ZXJUaW1lc3RhbXBCZWhhdmlvci5QcmV2aW91cywgdGltZXN0YW1wc0luU25hcHNob3RzKTtcclxuICAgICAgICAgICAgY2FzZSAnbm9uZSc6IC8vIEZhbGwtdGhyb3VnaCBpbnRlbmRlZC5cclxuICAgICAgICAgICAgY2FzZSB1bmRlZmluZWQ6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEZpZWxkVmFsdWVPcHRpb25zKFNlcnZlclRpbWVzdGFtcEJlaGF2aW9yLkRlZmF1bHQsIHRpbWVzdGFtcHNJblNuYXBzaG90cyk7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFpbCgnZnJvbVNuYXBzaG90T3B0aW9ucygpIGNhbGxlZCB3aXRoIGludmFsaWQgb3B0aW9ucy4nKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEZpZWxkVmFsdWVPcHRpb25zO1xyXG59KCkpO1xyXG4vKipcclxuICogQSBmaWVsZCB2YWx1ZSByZXByZXNlbnRzIGEgZGF0YXR5cGUgYXMgc3RvcmVkIGJ5IEZpcmVzdG9yZS5cclxuICovXHJcbnZhciBGaWVsZFZhbHVlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gRmllbGRWYWx1ZSgpIHtcclxuICAgIH1cclxuICAgIEZpZWxkVmFsdWUucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciB2YWwgPSB0aGlzLnZhbHVlKCk7XHJcbiAgICAgICAgcmV0dXJuIHZhbCA9PT0gbnVsbCA/ICdudWxsJyA6IHZhbC50b1N0cmluZygpO1xyXG4gICAgfTtcclxuICAgIEZpZWxkVmFsdWUucHJvdG90eXBlLmRlZmF1bHRDb21wYXJlVG8gPSBmdW5jdGlvbiAob3RoZXIpIHtcclxuICAgICAgICBhc3NlcnQodGhpcy50eXBlT3JkZXIgIT09IG90aGVyLnR5cGVPcmRlciwgJ0RlZmF1bHQgY29tcGFyZVRvIHNob3VsZCBub3QgYmUgdXNlZCBmb3IgdmFsdWVzIG9mIHNhbWUgdHlwZS4nKTtcclxuICAgICAgICB2YXIgY21wID0gcHJpbWl0aXZlQ29tcGFyYXRvcih0aGlzLnR5cGVPcmRlciwgb3RoZXIudHlwZU9yZGVyKTtcclxuICAgICAgICByZXR1cm4gY21wO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBGaWVsZFZhbHVlO1xyXG59KCkpO1xyXG52YXIgTnVsbFZhbHVlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgdHNsaWIuX19leHRlbmRzKE51bGxWYWx1ZSwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIE51bGxWYWx1ZSgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xyXG4gICAgICAgIF90aGlzLnR5cGVPcmRlciA9IFR5cGVPcmRlci5OdWxsVmFsdWU7XHJcbiAgICAgICAgLy8gaW50ZXJuYWxWYWx1ZSBpcyB1bnVzZWQgYnV0IHdlIGFkZCBpdCB0byB3b3JrIGFyb3VuZFxyXG4gICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9NaWNyb3NvZnQvVHlwZVNjcmlwdC9pc3N1ZXMvMTU1ODVcclxuICAgICAgICBfdGhpcy5pbnRlcm5hbFZhbHVlID0gbnVsbDtcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICBOdWxsVmFsdWUucHJvdG90eXBlLnZhbHVlID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH07XHJcbiAgICBOdWxsVmFsdWUucHJvdG90eXBlLmlzRXF1YWwgPSBmdW5jdGlvbiAob3RoZXIpIHtcclxuICAgICAgICByZXR1cm4gb3RoZXIgaW5zdGFuY2VvZiBOdWxsVmFsdWU7XHJcbiAgICB9O1xyXG4gICAgTnVsbFZhbHVlLnByb3RvdHlwZS5jb21wYXJlVG8gPSBmdW5jdGlvbiAob3RoZXIpIHtcclxuICAgICAgICBpZiAob3RoZXIgaW5zdGFuY2VvZiBOdWxsVmFsdWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLmRlZmF1bHRDb21wYXJlVG8ob3RoZXIpO1xyXG4gICAgfTtcclxuICAgIE51bGxWYWx1ZS5JTlNUQU5DRSA9IG5ldyBOdWxsVmFsdWUoKTtcclxuICAgIHJldHVybiBOdWxsVmFsdWU7XHJcbn0oRmllbGRWYWx1ZSkpO1xyXG52YXIgQm9vbGVhblZhbHVlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgdHNsaWIuX19leHRlbmRzKEJvb2xlYW5WYWx1ZSwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIEJvb2xlYW5WYWx1ZShpbnRlcm5hbFZhbHVlKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcclxuICAgICAgICBfdGhpcy5pbnRlcm5hbFZhbHVlID0gaW50ZXJuYWxWYWx1ZTtcclxuICAgICAgICBfdGhpcy50eXBlT3JkZXIgPSBUeXBlT3JkZXIuQm9vbGVhblZhbHVlO1xyXG4gICAgICAgIHJldHVybiBfdGhpcztcclxuICAgIH1cclxuICAgIEJvb2xlYW5WYWx1ZS5wcm90b3R5cGUudmFsdWUgPSBmdW5jdGlvbiAob3B0aW9ucykge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmludGVybmFsVmFsdWU7XHJcbiAgICB9O1xyXG4gICAgQm9vbGVhblZhbHVlLnByb3RvdHlwZS5pc0VxdWFsID0gZnVuY3Rpb24gKG90aGVyKSB7XHJcbiAgICAgICAgcmV0dXJuIChvdGhlciBpbnN0YW5jZW9mIEJvb2xlYW5WYWx1ZSAmJlxyXG4gICAgICAgICAgICB0aGlzLmludGVybmFsVmFsdWUgPT09IG90aGVyLmludGVybmFsVmFsdWUpO1xyXG4gICAgfTtcclxuICAgIEJvb2xlYW5WYWx1ZS5wcm90b3R5cGUuY29tcGFyZVRvID0gZnVuY3Rpb24gKG90aGVyKSB7XHJcbiAgICAgICAgaWYgKG90aGVyIGluc3RhbmNlb2YgQm9vbGVhblZhbHVlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBwcmltaXRpdmVDb21wYXJhdG9yKHRoaXMsIG90aGVyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGVmYXVsdENvbXBhcmVUbyhvdGhlcik7XHJcbiAgICB9O1xyXG4gICAgQm9vbGVhblZhbHVlLm9mID0gZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgICAgcmV0dXJuIHZhbHVlID8gQm9vbGVhblZhbHVlLlRSVUUgOiBCb29sZWFuVmFsdWUuRkFMU0U7XHJcbiAgICB9O1xyXG4gICAgQm9vbGVhblZhbHVlLlRSVUUgPSBuZXcgQm9vbGVhblZhbHVlKHRydWUpO1xyXG4gICAgQm9vbGVhblZhbHVlLkZBTFNFID0gbmV3IEJvb2xlYW5WYWx1ZShmYWxzZSk7XHJcbiAgICByZXR1cm4gQm9vbGVhblZhbHVlO1xyXG59KEZpZWxkVmFsdWUpKTtcclxuLyoqIEJhc2UgY2xhc3MgZm9yIEludGVnZXJWYWx1ZSBhbmQgRG91YmxlVmFsdWUuICovXHJcbnZhciBOdW1iZXJWYWx1ZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIHRzbGliLl9fZXh0ZW5kcyhOdW1iZXJWYWx1ZSwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIE51bWJlclZhbHVlKGludGVybmFsVmFsdWUpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xyXG4gICAgICAgIF90aGlzLmludGVybmFsVmFsdWUgPSBpbnRlcm5hbFZhbHVlO1xyXG4gICAgICAgIF90aGlzLnR5cGVPcmRlciA9IFR5cGVPcmRlci5OdW1iZXJWYWx1ZTtcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICBOdW1iZXJWYWx1ZS5wcm90b3R5cGUudmFsdWUgPSBmdW5jdGlvbiAob3B0aW9ucykge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmludGVybmFsVmFsdWU7XHJcbiAgICB9O1xyXG4gICAgTnVtYmVyVmFsdWUucHJvdG90eXBlLmNvbXBhcmVUbyA9IGZ1bmN0aW9uIChvdGhlcikge1xyXG4gICAgICAgIGlmIChvdGhlciBpbnN0YW5jZW9mIE51bWJlclZhbHVlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudW1lcmljQ29tcGFyYXRvcih0aGlzLmludGVybmFsVmFsdWUsIG90aGVyLmludGVybmFsVmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5kZWZhdWx0Q29tcGFyZVRvKG90aGVyKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gTnVtYmVyVmFsdWU7XHJcbn0oRmllbGRWYWx1ZSkpO1xyXG4vKiogVXRpbGl0eSBmdW5jdGlvbiB0byBjb21wYXJlIGRvdWJsZXMgKHVzaW5nIEZpcmVzdG9yZSBzZW1hbnRpY3MgZm9yIE5hTikuICovXHJcbmZ1bmN0aW9uIG51bWVyaWNDb21wYXJhdG9yKGxlZnQsIHJpZ2h0KSB7XHJcbiAgICBpZiAobGVmdCA8IHJpZ2h0KSB7XHJcbiAgICAgICAgcmV0dXJuIC0xO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAobGVmdCA+IHJpZ2h0KSB7XHJcbiAgICAgICAgcmV0dXJuIDE7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChsZWZ0ID09PSByaWdodCkge1xyXG4gICAgICAgIHJldHVybiAwO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgLy8gb25lIG9yIGJvdGggYXJlIE5hTi5cclxuICAgICAgICBpZiAoaXNOYU4obGVmdCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGlzTmFOKHJpZ2h0KSA/IDAgOiAtMTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiAxO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4vKipcclxuICogVXRpbGl0eSBmdW5jdGlvbiB0byBjaGVjayBudW1iZXJzIGZvciBlcXVhbGl0eSB1c2luZyBGaXJlc3RvcmUgc2VtYW50aWNzXHJcbiAqIChOYU4gPT09IE5hTiwgLTAuMCAhPT0gMC4wKS5cclxuICovXHJcbmZ1bmN0aW9uIG51bWVyaWNFcXVhbHMobGVmdCwgcmlnaHQpIHtcclxuICAgIC8vIEltcGxlbWVudGVkIGJhc2VkIG9uIE9iamVjdC5pcygpIHBvbHlmaWxsIGZyb21cclxuICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL09iamVjdC9pc1xyXG4gICAgaWYgKGxlZnQgPT09IHJpZ2h0KSB7XHJcbiAgICAgICAgLy8gKzAgIT0gLTBcclxuICAgICAgICByZXR1cm4gbGVmdCAhPT0gMCB8fCAxIC8gbGVmdCA9PT0gMSAvIHJpZ2h0O1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgLy8gTmFOID09IE5hTlxyXG4gICAgICAgIHJldHVybiBsZWZ0ICE9PSBsZWZ0ICYmIHJpZ2h0ICE9PSByaWdodDtcclxuICAgIH1cclxufVxyXG52YXIgSW50ZWdlclZhbHVlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgdHNsaWIuX19leHRlbmRzKEludGVnZXJWYWx1ZSwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIEludGVnZXJWYWx1ZSgpIHtcclxuICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XHJcbiAgICB9XHJcbiAgICBJbnRlZ2VyVmFsdWUucHJvdG90eXBlLmlzRXF1YWwgPSBmdW5jdGlvbiAob3RoZXIpIHtcclxuICAgICAgICAvLyBOT1RFOiBEb3VibGVWYWx1ZSBhbmQgSW50ZWdlclZhbHVlIGluc3RhbmNlcyBtYXkgY29tcGFyZVRvKCkgdGhlIHNhbWUsXHJcbiAgICAgICAgLy8gYnV0IHRoYXQgZG9lc24ndCBtYWtlIHRoZW0gZXF1YWwgdmlhIGlzRXF1YWwoKS5cclxuICAgICAgICBpZiAob3RoZXIgaW5zdGFuY2VvZiBJbnRlZ2VyVmFsdWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bWVyaWNFcXVhbHModGhpcy5pbnRlcm5hbFZhbHVlLCBvdGhlci5pbnRlcm5hbFZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEludGVnZXJWYWx1ZTtcclxufShOdW1iZXJWYWx1ZSkpO1xyXG52YXIgRG91YmxlVmFsdWUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICB0c2xpYi5fX2V4dGVuZHMoRG91YmxlVmFsdWUsIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBEb3VibGVWYWx1ZSgpIHtcclxuICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XHJcbiAgICB9XHJcbiAgICBEb3VibGVWYWx1ZS5wcm90b3R5cGUuaXNFcXVhbCA9IGZ1bmN0aW9uIChvdGhlcikge1xyXG4gICAgICAgIC8vIE5PVEU6IERvdWJsZVZhbHVlIGFuZCBJbnRlZ2VyVmFsdWUgaW5zdGFuY2VzIG1heSBjb21wYXJlVG8oKSB0aGUgc2FtZSxcclxuICAgICAgICAvLyBidXQgdGhhdCBkb2Vzbid0IG1ha2UgdGhlbSBlcXVhbCB2aWEgaXNFcXVhbCgpLlxyXG4gICAgICAgIGlmIChvdGhlciBpbnN0YW5jZW9mIERvdWJsZVZhbHVlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudW1lcmljRXF1YWxzKHRoaXMuaW50ZXJuYWxWYWx1ZSwgb3RoZXIuaW50ZXJuYWxWYWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIERvdWJsZVZhbHVlLk5BTiA9IG5ldyBEb3VibGVWYWx1ZShOYU4pO1xyXG4gICAgRG91YmxlVmFsdWUuUE9TSVRJVkVfSU5GSU5JVFkgPSBuZXcgRG91YmxlVmFsdWUoSW5maW5pdHkpO1xyXG4gICAgRG91YmxlVmFsdWUuTkVHQVRJVkVfSU5GSU5JVFkgPSBuZXcgRG91YmxlVmFsdWUoLUluZmluaXR5KTtcclxuICAgIHJldHVybiBEb3VibGVWYWx1ZTtcclxufShOdW1iZXJWYWx1ZSkpO1xyXG4vLyBUT0RPKGIvMzcyNjc4ODUpOiBBZGQgdHJ1bmNhdGlvbiBzdXBwb3J0XHJcbnZhciBTdHJpbmdWYWx1ZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIHRzbGliLl9fZXh0ZW5kcyhTdHJpbmdWYWx1ZSwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIFN0cmluZ1ZhbHVlKGludGVybmFsVmFsdWUpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xyXG4gICAgICAgIF90aGlzLmludGVybmFsVmFsdWUgPSBpbnRlcm5hbFZhbHVlO1xyXG4gICAgICAgIF90aGlzLnR5cGVPcmRlciA9IFR5cGVPcmRlci5TdHJpbmdWYWx1ZTtcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICBTdHJpbmdWYWx1ZS5wcm90b3R5cGUudmFsdWUgPSBmdW5jdGlvbiAob3B0aW9ucykge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmludGVybmFsVmFsdWU7XHJcbiAgICB9O1xyXG4gICAgU3RyaW5nVmFsdWUucHJvdG90eXBlLmlzRXF1YWwgPSBmdW5jdGlvbiAob3RoZXIpIHtcclxuICAgICAgICByZXR1cm4gKG90aGVyIGluc3RhbmNlb2YgU3RyaW5nVmFsdWUgJiYgdGhpcy5pbnRlcm5hbFZhbHVlID09PSBvdGhlci5pbnRlcm5hbFZhbHVlKTtcclxuICAgIH07XHJcbiAgICBTdHJpbmdWYWx1ZS5wcm90b3R5cGUuY29tcGFyZVRvID0gZnVuY3Rpb24gKG90aGVyKSB7XHJcbiAgICAgICAgaWYgKG90aGVyIGluc3RhbmNlb2YgU3RyaW5nVmFsdWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHByaW1pdGl2ZUNvbXBhcmF0b3IodGhpcy5pbnRlcm5hbFZhbHVlLCBvdGhlci5pbnRlcm5hbFZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGVmYXVsdENvbXBhcmVUbyhvdGhlcik7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFN0cmluZ1ZhbHVlO1xyXG59KEZpZWxkVmFsdWUpKTtcclxudmFyIFRpbWVzdGFtcFZhbHVlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgdHNsaWIuX19leHRlbmRzKFRpbWVzdGFtcFZhbHVlLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gVGltZXN0YW1wVmFsdWUoaW50ZXJuYWxWYWx1ZSkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMuaW50ZXJuYWxWYWx1ZSA9IGludGVybmFsVmFsdWU7XHJcbiAgICAgICAgX3RoaXMudHlwZU9yZGVyID0gVHlwZU9yZGVyLlRpbWVzdGFtcFZhbHVlO1xyXG4gICAgICAgIHJldHVybiBfdGhpcztcclxuICAgIH1cclxuICAgIFRpbWVzdGFtcFZhbHVlLnByb3RvdHlwZS52YWx1ZSA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XHJcbiAgICAgICAgaWYgKCFvcHRpb25zIHx8IG9wdGlvbnMudGltZXN0YW1wc0luU25hcHNob3RzKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmludGVybmFsVmFsdWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pbnRlcm5hbFZhbHVlLnRvRGF0ZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBUaW1lc3RhbXBWYWx1ZS5wcm90b3R5cGUuaXNFcXVhbCA9IGZ1bmN0aW9uIChvdGhlcikge1xyXG4gICAgICAgIHJldHVybiAob3RoZXIgaW5zdGFuY2VvZiBUaW1lc3RhbXBWYWx1ZSAmJlxyXG4gICAgICAgICAgICB0aGlzLmludGVybmFsVmFsdWUuaXNFcXVhbChvdGhlci5pbnRlcm5hbFZhbHVlKSk7XHJcbiAgICB9O1xyXG4gICAgVGltZXN0YW1wVmFsdWUucHJvdG90eXBlLmNvbXBhcmVUbyA9IGZ1bmN0aW9uIChvdGhlcikge1xyXG4gICAgICAgIGlmIChvdGhlciBpbnN0YW5jZW9mIFRpbWVzdGFtcFZhbHVlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmludGVybmFsVmFsdWUuX2NvbXBhcmVUbyhvdGhlci5pbnRlcm5hbFZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAob3RoZXIgaW5zdGFuY2VvZiBTZXJ2ZXJUaW1lc3RhbXBWYWx1ZSkge1xyXG4gICAgICAgICAgICAvLyBDb25jcmV0ZSB0aW1lc3RhbXBzIGNvbWUgYmVmb3JlIHNlcnZlciB0aW1lc3RhbXBzLlxyXG4gICAgICAgICAgICByZXR1cm4gLTE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kZWZhdWx0Q29tcGFyZVRvKG90aGVyKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFRpbWVzdGFtcFZhbHVlO1xyXG59KEZpZWxkVmFsdWUpKTtcclxuLyoqXHJcbiAqIFJlcHJlc2VudHMgYSBsb2NhbGx5LWFwcGxpZWQgU2VydmVyVGltZXN0YW1wLlxyXG4gKlxyXG4gKiBOb3RlczpcclxuICogLSBTZXJ2ZXJUaW1lc3RhbXBWYWx1ZSBpbnN0YW5jZXMgYXJlIGNyZWF0ZWQgYXMgdGhlIHJlc3VsdCBvZiBhcHBseWluZyBhXHJcbiAqICAgVHJhbnNmb3JtTXV0YXRpb24gKHNlZSBUcmFuc2Zvcm1NdXRhdGlvbi5hcHBseVRvKCkpLiBUaGV5IGNhbiBvbmx5IGV4aXN0IGluXHJcbiAqICAgdGhlIGxvY2FsIHZpZXcgb2YgYSBkb2N1bWVudC4gVGhlcmVmb3JlIHRoZXkgZG8gbm90IG5lZWQgdG8gYmUgcGFyc2VkIG9yXHJcbiAqICAgc2VyaWFsaXplZC5cclxuICogLSBXaGVuIGV2YWx1YXRlZCBsb2NhbGx5IChlLmcuIGZvciBzbmFwc2hvdC5kYXRhKCkpLCB0aGV5IGJ5IGRlZmF1bHRcclxuICogICBldmFsdWF0ZSB0byBgbnVsbGAuIFRoaXMgYmVoYXZpb3IgY2FuIGJlIGNvbmZpZ3VyZWQgYnkgcGFzc2luZyBjdXN0b21cclxuICogICBGaWVsZFZhbHVlT3B0aW9ucyB0byB2YWx1ZSgpLlxyXG4gKiAtIFdpdGggcmVzcGVjdCB0byBvdGhlciBTZXJ2ZXJUaW1lc3RhbXBWYWx1ZXMsIHRoZXkgc29ydCBieSB0aGVpclxyXG4gKiAgIGxvY2FsV3JpdGVUaW1lLlxyXG4gKi9cclxudmFyIFNlcnZlclRpbWVzdGFtcFZhbHVlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgdHNsaWIuX19leHRlbmRzKFNlcnZlclRpbWVzdGFtcFZhbHVlLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gU2VydmVyVGltZXN0YW1wVmFsdWUobG9jYWxXcml0ZVRpbWUsIHByZXZpb3VzVmFsdWUpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xyXG4gICAgICAgIF90aGlzLmxvY2FsV3JpdGVUaW1lID0gbG9jYWxXcml0ZVRpbWU7XHJcbiAgICAgICAgX3RoaXMucHJldmlvdXNWYWx1ZSA9IHByZXZpb3VzVmFsdWU7XHJcbiAgICAgICAgX3RoaXMudHlwZU9yZGVyID0gVHlwZU9yZGVyLlRpbWVzdGFtcFZhbHVlO1xyXG4gICAgICAgIHJldHVybiBfdGhpcztcclxuICAgIH1cclxuICAgIFNlcnZlclRpbWVzdGFtcFZhbHVlLnByb3RvdHlwZS52YWx1ZSA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XHJcbiAgICAgICAgaWYgKG9wdGlvbnMgJiZcclxuICAgICAgICAgICAgb3B0aW9ucy5zZXJ2ZXJUaW1lc3RhbXBCZWhhdmlvciA9PT0gU2VydmVyVGltZXN0YW1wQmVoYXZpb3IuRXN0aW1hdGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBUaW1lc3RhbXBWYWx1ZSh0aGlzLmxvY2FsV3JpdGVUaW1lKS52YWx1ZShvcHRpb25zKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAob3B0aW9ucyAmJlxyXG4gICAgICAgICAgICBvcHRpb25zLnNlcnZlclRpbWVzdGFtcEJlaGF2aW9yID09PSBTZXJ2ZXJUaW1lc3RhbXBCZWhhdmlvci5QcmV2aW91cykge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcmV2aW91c1ZhbHVlID8gdGhpcy5wcmV2aW91c1ZhbHVlLnZhbHVlKG9wdGlvbnMpIDogbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBTZXJ2ZXJUaW1lc3RhbXBWYWx1ZS5wcm90b3R5cGUuaXNFcXVhbCA9IGZ1bmN0aW9uIChvdGhlcikge1xyXG4gICAgICAgIHJldHVybiAob3RoZXIgaW5zdGFuY2VvZiBTZXJ2ZXJUaW1lc3RhbXBWYWx1ZSAmJlxyXG4gICAgICAgICAgICB0aGlzLmxvY2FsV3JpdGVUaW1lLmlzRXF1YWwob3RoZXIubG9jYWxXcml0ZVRpbWUpKTtcclxuICAgIH07XHJcbiAgICBTZXJ2ZXJUaW1lc3RhbXBWYWx1ZS5wcm90b3R5cGUuY29tcGFyZVRvID0gZnVuY3Rpb24gKG90aGVyKSB7XHJcbiAgICAgICAgaWYgKG90aGVyIGluc3RhbmNlb2YgU2VydmVyVGltZXN0YW1wVmFsdWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubG9jYWxXcml0ZVRpbWUuX2NvbXBhcmVUbyhvdGhlci5sb2NhbFdyaXRlVGltZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKG90aGVyIGluc3RhbmNlb2YgVGltZXN0YW1wVmFsdWUpIHtcclxuICAgICAgICAgICAgLy8gU2VydmVyIHRpbWVzdGFtcHMgY29tZSBhZnRlciBhbGwgY29uY3JldGUgdGltZXN0YW1wcy5cclxuICAgICAgICAgICAgcmV0dXJuIDE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kZWZhdWx0Q29tcGFyZVRvKG90aGVyKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgU2VydmVyVGltZXN0YW1wVmFsdWUucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiAnPFNlcnZlclRpbWVzdGFtcCBsb2NhbFRpbWU9JyArIHRoaXMubG9jYWxXcml0ZVRpbWUudG9TdHJpbmcoKSArICc+JztcclxuICAgIH07XHJcbiAgICByZXR1cm4gU2VydmVyVGltZXN0YW1wVmFsdWU7XHJcbn0oRmllbGRWYWx1ZSkpO1xyXG52YXIgQmxvYlZhbHVlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgdHNsaWIuX19leHRlbmRzKEJsb2JWYWx1ZSwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIEJsb2JWYWx1ZShpbnRlcm5hbFZhbHVlKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcclxuICAgICAgICBfdGhpcy5pbnRlcm5hbFZhbHVlID0gaW50ZXJuYWxWYWx1ZTtcclxuICAgICAgICBfdGhpcy50eXBlT3JkZXIgPSBUeXBlT3JkZXIuQmxvYlZhbHVlO1xyXG4gICAgICAgIHJldHVybiBfdGhpcztcclxuICAgIH1cclxuICAgIEJsb2JWYWx1ZS5wcm90b3R5cGUudmFsdWUgPSBmdW5jdGlvbiAob3B0aW9ucykge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmludGVybmFsVmFsdWU7XHJcbiAgICB9O1xyXG4gICAgQmxvYlZhbHVlLnByb3RvdHlwZS5pc0VxdWFsID0gZnVuY3Rpb24gKG90aGVyKSB7XHJcbiAgICAgICAgcmV0dXJuIChvdGhlciBpbnN0YW5jZW9mIEJsb2JWYWx1ZSAmJlxyXG4gICAgICAgICAgICB0aGlzLmludGVybmFsVmFsdWUuaXNFcXVhbChvdGhlci5pbnRlcm5hbFZhbHVlKSk7XHJcbiAgICB9O1xyXG4gICAgQmxvYlZhbHVlLnByb3RvdHlwZS5jb21wYXJlVG8gPSBmdW5jdGlvbiAob3RoZXIpIHtcclxuICAgICAgICBpZiAob3RoZXIgaW5zdGFuY2VvZiBCbG9iVmFsdWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaW50ZXJuYWxWYWx1ZS5fY29tcGFyZVRvKG90aGVyLmludGVybmFsVmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5kZWZhdWx0Q29tcGFyZVRvKG90aGVyKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gQmxvYlZhbHVlO1xyXG59KEZpZWxkVmFsdWUpKTtcclxudmFyIFJlZlZhbHVlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgdHNsaWIuX19leHRlbmRzKFJlZlZhbHVlLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gUmVmVmFsdWUoZGF0YWJhc2VJZCwga2V5KSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcclxuICAgICAgICBfdGhpcy5kYXRhYmFzZUlkID0gZGF0YWJhc2VJZDtcclxuICAgICAgICBfdGhpcy5rZXkgPSBrZXk7XHJcbiAgICAgICAgX3RoaXMudHlwZU9yZGVyID0gVHlwZU9yZGVyLlJlZlZhbHVlO1xyXG4gICAgICAgIHJldHVybiBfdGhpcztcclxuICAgIH1cclxuICAgIFJlZlZhbHVlLnByb3RvdHlwZS52YWx1ZSA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMua2V5O1xyXG4gICAgfTtcclxuICAgIFJlZlZhbHVlLnByb3RvdHlwZS5pc0VxdWFsID0gZnVuY3Rpb24gKG90aGVyKSB7XHJcbiAgICAgICAgaWYgKG90aGVyIGluc3RhbmNlb2YgUmVmVmFsdWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuICh0aGlzLmtleS5pc0VxdWFsKG90aGVyLmtleSkgJiYgdGhpcy5kYXRhYmFzZUlkLmlzRXF1YWwob3RoZXIuZGF0YWJhc2VJZCkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBSZWZWYWx1ZS5wcm90b3R5cGUuY29tcGFyZVRvID0gZnVuY3Rpb24gKG90aGVyKSB7XHJcbiAgICAgICAgaWYgKG90aGVyIGluc3RhbmNlb2YgUmVmVmFsdWUpIHtcclxuICAgICAgICAgICAgdmFyIGNtcCA9IHRoaXMuZGF0YWJhc2VJZC5jb21wYXJlVG8ob3RoZXIuZGF0YWJhc2VJZCk7XHJcbiAgICAgICAgICAgIHJldHVybiBjbXAgIT09IDAgPyBjbXAgOiBEb2N1bWVudEtleS5jb21wYXJhdG9yKHRoaXMua2V5LCBvdGhlci5rZXkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5kZWZhdWx0Q29tcGFyZVRvKG90aGVyKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gUmVmVmFsdWU7XHJcbn0oRmllbGRWYWx1ZSkpO1xyXG52YXIgR2VvUG9pbnRWYWx1ZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIHRzbGliLl9fZXh0ZW5kcyhHZW9Qb2ludFZhbHVlLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gR2VvUG9pbnRWYWx1ZShpbnRlcm5hbFZhbHVlKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcclxuICAgICAgICBfdGhpcy5pbnRlcm5hbFZhbHVlID0gaW50ZXJuYWxWYWx1ZTtcclxuICAgICAgICBfdGhpcy50eXBlT3JkZXIgPSBUeXBlT3JkZXIuR2VvUG9pbnRWYWx1ZTtcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICBHZW9Qb2ludFZhbHVlLnByb3RvdHlwZS52YWx1ZSA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaW50ZXJuYWxWYWx1ZTtcclxuICAgIH07XHJcbiAgICBHZW9Qb2ludFZhbHVlLnByb3RvdHlwZS5pc0VxdWFsID0gZnVuY3Rpb24gKG90aGVyKSB7XHJcbiAgICAgICAgcmV0dXJuIChvdGhlciBpbnN0YW5jZW9mIEdlb1BvaW50VmFsdWUgJiZcclxuICAgICAgICAgICAgdGhpcy5pbnRlcm5hbFZhbHVlLmlzRXF1YWwob3RoZXIuaW50ZXJuYWxWYWx1ZSkpO1xyXG4gICAgfTtcclxuICAgIEdlb1BvaW50VmFsdWUucHJvdG90eXBlLmNvbXBhcmVUbyA9IGZ1bmN0aW9uIChvdGhlcikge1xyXG4gICAgICAgIGlmIChvdGhlciBpbnN0YW5jZW9mIEdlb1BvaW50VmFsdWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaW50ZXJuYWxWYWx1ZS5fY29tcGFyZVRvKG90aGVyLmludGVybmFsVmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5kZWZhdWx0Q29tcGFyZVRvKG90aGVyKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gR2VvUG9pbnRWYWx1ZTtcclxufShGaWVsZFZhbHVlKSk7XHJcbnZhciBPYmplY3RWYWx1ZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIHRzbGliLl9fZXh0ZW5kcyhPYmplY3RWYWx1ZSwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIE9iamVjdFZhbHVlKGludGVybmFsVmFsdWUpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xyXG4gICAgICAgIF90aGlzLmludGVybmFsVmFsdWUgPSBpbnRlcm5hbFZhbHVlO1xyXG4gICAgICAgIF90aGlzLnR5cGVPcmRlciA9IFR5cGVPcmRlci5PYmplY3RWYWx1ZTtcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICBPYmplY3RWYWx1ZS5wcm90b3R5cGUudmFsdWUgPSBmdW5jdGlvbiAob3B0aW9ucykge1xyXG4gICAgICAgIHZhciByZXN1bHQgPSB7fTtcclxuICAgICAgICB0aGlzLmludGVybmFsVmFsdWUuaW5vcmRlclRyYXZlcnNhbChmdW5jdGlvbiAoa2V5LCB2YWwpIHtcclxuICAgICAgICAgICAgcmVzdWx0W2tleV0gPSB2YWwudmFsdWUob3B0aW9ucyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH07XHJcbiAgICBPYmplY3RWYWx1ZS5wcm90b3R5cGUuZm9yRWFjaCA9IGZ1bmN0aW9uIChhY3Rpb24pIHtcclxuICAgICAgICB0aGlzLmludGVybmFsVmFsdWUuaW5vcmRlclRyYXZlcnNhbChhY3Rpb24pO1xyXG4gICAgfTtcclxuICAgIE9iamVjdFZhbHVlLnByb3RvdHlwZS5pc0VxdWFsID0gZnVuY3Rpb24gKG90aGVyKSB7XHJcbiAgICAgICAgaWYgKG90aGVyIGluc3RhbmNlb2YgT2JqZWN0VmFsdWUpIHtcclxuICAgICAgICAgICAgdmFyIGl0MSA9IHRoaXMuaW50ZXJuYWxWYWx1ZS5nZXRJdGVyYXRvcigpO1xyXG4gICAgICAgICAgICB2YXIgaXQyID0gb3RoZXIuaW50ZXJuYWxWYWx1ZS5nZXRJdGVyYXRvcigpO1xyXG4gICAgICAgICAgICB3aGlsZSAoaXQxLmhhc05leHQoKSAmJiBpdDIuaGFzTmV4dCgpKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbmV4dDEgPSBpdDEuZ2V0TmV4dCgpO1xyXG4gICAgICAgICAgICAgICAgdmFyIG5leHQyID0gaXQyLmdldE5leHQoKTtcclxuICAgICAgICAgICAgICAgIGlmIChuZXh0MS5rZXkgIT09IG5leHQyLmtleSB8fCAhbmV4dDEudmFsdWUuaXNFcXVhbChuZXh0Mi52YWx1ZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuICFpdDEuaGFzTmV4dCgpICYmICFpdDIuaGFzTmV4dCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9O1xyXG4gICAgT2JqZWN0VmFsdWUucHJvdG90eXBlLmNvbXBhcmVUbyA9IGZ1bmN0aW9uIChvdGhlcikge1xyXG4gICAgICAgIGlmIChvdGhlciBpbnN0YW5jZW9mIE9iamVjdFZhbHVlKSB7XHJcbiAgICAgICAgICAgIHZhciBpdDEgPSB0aGlzLmludGVybmFsVmFsdWUuZ2V0SXRlcmF0b3IoKTtcclxuICAgICAgICAgICAgdmFyIGl0MiA9IG90aGVyLmludGVybmFsVmFsdWUuZ2V0SXRlcmF0b3IoKTtcclxuICAgICAgICAgICAgd2hpbGUgKGl0MS5oYXNOZXh0KCkgJiYgaXQyLmhhc05leHQoKSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG5leHQxID0gaXQxLmdldE5leHQoKTtcclxuICAgICAgICAgICAgICAgIHZhciBuZXh0MiA9IGl0Mi5nZXROZXh0KCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgY21wID0gcHJpbWl0aXZlQ29tcGFyYXRvcihuZXh0MS5rZXksIG5leHQyLmtleSkgfHxcclxuICAgICAgICAgICAgICAgICAgICBuZXh0MS52YWx1ZS5jb21wYXJlVG8obmV4dDIudmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGNtcCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjbXA7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gT25seSBlcXVhbCBpZiBib3RoIGl0ZXJhdG9ycyBhcmUgZXhoYXVzdGVkXHJcbiAgICAgICAgICAgIHJldHVybiBwcmltaXRpdmVDb21wYXJhdG9yKGl0MS5oYXNOZXh0KCksIGl0Mi5oYXNOZXh0KCkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGVmYXVsdENvbXBhcmVUbyhvdGhlcik7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIE9iamVjdFZhbHVlLnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAocGF0aCwgdG8pIHtcclxuICAgICAgICBhc3NlcnQoIXBhdGguaXNFbXB0eSgpLCAnQ2Fubm90IHNldCBmaWVsZCBmb3IgZW1wdHkgcGF0aCBvbiBPYmplY3RWYWx1ZScpO1xyXG4gICAgICAgIGlmIChwYXRoLmxlbmd0aCA9PT0gMSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zZXRDaGlsZChwYXRoLmZpcnN0U2VnbWVudCgpLCB0byk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB2YXIgY2hpbGQgPSB0aGlzLmNoaWxkKHBhdGguZmlyc3RTZWdtZW50KCkpO1xyXG4gICAgICAgICAgICBpZiAoIShjaGlsZCBpbnN0YW5jZW9mIE9iamVjdFZhbHVlKSkge1xyXG4gICAgICAgICAgICAgICAgY2hpbGQgPSBPYmplY3RWYWx1ZS5FTVBUWTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgbmV3Q2hpbGQgPSBjaGlsZC5zZXQocGF0aC5wb3BGaXJzdCgpLCB0byk7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNldENoaWxkKHBhdGguZmlyc3RTZWdtZW50KCksIG5ld0NoaWxkKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgT2JqZWN0VmFsdWUucHJvdG90eXBlLmRlbGV0ZSA9IGZ1bmN0aW9uIChwYXRoKSB7XHJcbiAgICAgICAgYXNzZXJ0KCFwYXRoLmlzRW1wdHkoKSwgJ0Nhbm5vdCBkZWxldGUgZmllbGQgZm9yIGVtcHR5IHBhdGggb24gT2JqZWN0VmFsdWUnKTtcclxuICAgICAgICBpZiAocGF0aC5sZW5ndGggPT09IDEpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBPYmplY3RWYWx1ZSh0aGlzLmludGVybmFsVmFsdWUucmVtb3ZlKHBhdGguZmlyc3RTZWdtZW50KCkpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIG5lc3RlZCBmaWVsZFxyXG4gICAgICAgICAgICB2YXIgY2hpbGQgPSB0aGlzLmNoaWxkKHBhdGguZmlyc3RTZWdtZW50KCkpO1xyXG4gICAgICAgICAgICBpZiAoY2hpbGQgaW5zdGFuY2VvZiBPYmplY3RWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG5ld0NoaWxkID0gY2hpbGQuZGVsZXRlKHBhdGgucG9wRmlyc3QoKSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IE9iamVjdFZhbHVlKHRoaXMuaW50ZXJuYWxWYWx1ZS5pbnNlcnQocGF0aC5maXJzdFNlZ21lbnQoKSwgbmV3Q2hpbGQpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIERvbid0IGFjdHVhbGx5IGNoYW5nZSBhIHByaW1pdGl2ZSB2YWx1ZSB0byBhbiBvYmplY3QgZm9yIGEgZGVsZXRlXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBPYmplY3RWYWx1ZS5wcm90b3R5cGUuY29udGFpbnMgPSBmdW5jdGlvbiAocGF0aCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmZpZWxkKHBhdGgpICE9PSBudWxsO1xyXG4gICAgfTtcclxuICAgIE9iamVjdFZhbHVlLnByb3RvdHlwZS5maWVsZCA9IGZ1bmN0aW9uIChwYXRoKSB7XHJcbiAgICAgICAgYXNzZXJ0KCFwYXRoLmlzRW1wdHkoKSwgXCJDYW4ndCBnZXQgZmllbGQgb2YgZW1wdHkgcGF0aFwiKTtcclxuICAgICAgICB2YXIgZmllbGQgPSB0aGlzO1xyXG4gICAgICAgIHBhdGguZm9yRWFjaChmdW5jdGlvbiAocGF0aFNlZ21lbnQpIHtcclxuICAgICAgICAgICAgaWYgKGZpZWxkIGluc3RhbmNlb2YgT2JqZWN0VmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIGZpZWxkID0gZmllbGQuaW50ZXJuYWxWYWx1ZS5nZXQocGF0aFNlZ21lbnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZmllbGQgPSBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIGZpZWxkO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyBhIEZpZWxkTWFzayBidWlsdCBmcm9tIGFsbCBGaWVsZFBhdGhzIHN0YXJ0aW5nIGZyb20gdGhpcyBPYmplY3RWYWx1ZSxcclxuICAgICAqIGluY2x1ZGluZyBwYXRocyBmcm9tIG5lc3RlZCBvYmplY3RzLlxyXG4gICAgICovXHJcbiAgICBPYmplY3RWYWx1ZS5wcm90b3R5cGUuZmllbGRNYXNrID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBmaWVsZHMgPSBuZXcgU29ydGVkU2V0KEZpZWxkUGF0aC5jb21wYXJhdG9yKTtcclxuICAgICAgICB0aGlzLmludGVybmFsVmFsdWUuZm9yRWFjaChmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xyXG4gICAgICAgICAgICB2YXIgY3VycmVudFBhdGggPSBuZXcgRmllbGRQYXRoKFtrZXldKTtcclxuICAgICAgICAgICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgT2JqZWN0VmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIHZhciBuZXN0ZWRNYXNrID0gdmFsdWUuZmllbGRNYXNrKCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgbmVzdGVkRmllbGRzID0gbmVzdGVkTWFzay5maWVsZHM7XHJcbiAgICAgICAgICAgICAgICBpZiAobmVzdGVkRmllbGRzLmlzRW1wdHkoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFByZXNlcnZlIHRoZSBlbXB0eSBtYXAgYnkgYWRkaW5nIGl0IHRvIHRoZSBGaWVsZE1hc2suXHJcbiAgICAgICAgICAgICAgICAgICAgZmllbGRzID0gZmllbGRzLmFkZChjdXJyZW50UGF0aCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBGb3IgbmVzdGVkIGFuZCBub24tZW1wdHkgT2JqZWN0VmFsdWVzLCBhZGQgdGhlIEZpZWxkUGF0aCBvZiB0aGVcclxuICAgICAgICAgICAgICAgICAgICAvLyBsZWFmIG5vZGVzLlxyXG4gICAgICAgICAgICAgICAgICAgIG5lc3RlZEZpZWxkcy5mb3JFYWNoKGZ1bmN0aW9uIChuZXN0ZWRQYXRoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkcyA9IGZpZWxkcy5hZGQoY3VycmVudFBhdGguY2hpbGQobmVzdGVkUGF0aCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZmllbGRzID0gZmllbGRzLmFkZChjdXJyZW50UGF0aCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gRmllbGRNYXNrLmZyb21TZXQoZmllbGRzKTtcclxuICAgIH07XHJcbiAgICBPYmplY3RWYWx1ZS5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaW50ZXJuYWxWYWx1ZS50b1N0cmluZygpO1xyXG4gICAgfTtcclxuICAgIE9iamVjdFZhbHVlLnByb3RvdHlwZS5jaGlsZCA9IGZ1bmN0aW9uIChjaGlsZE5hbWUpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5pbnRlcm5hbFZhbHVlLmdldChjaGlsZE5hbWUpIHx8IHVuZGVmaW5lZDtcclxuICAgIH07XHJcbiAgICBPYmplY3RWYWx1ZS5wcm90b3R5cGUuc2V0Q2hpbGQgPSBmdW5jdGlvbiAoY2hpbGROYW1lLCB2YWx1ZSkge1xyXG4gICAgICAgIHJldHVybiBuZXcgT2JqZWN0VmFsdWUodGhpcy5pbnRlcm5hbFZhbHVlLmluc2VydChjaGlsZE5hbWUsIHZhbHVlKSk7XHJcbiAgICB9O1xyXG4gICAgT2JqZWN0VmFsdWUuRU1QVFkgPSBuZXcgT2JqZWN0VmFsdWUobmV3IFNvcnRlZE1hcChwcmltaXRpdmVDb21wYXJhdG9yKSk7XHJcbiAgICByZXR1cm4gT2JqZWN0VmFsdWU7XHJcbn0oRmllbGRWYWx1ZSkpO1xyXG52YXIgQXJyYXlWYWx1ZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIHRzbGliLl9fZXh0ZW5kcyhBcnJheVZhbHVlLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gQXJyYXlWYWx1ZShpbnRlcm5hbFZhbHVlKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcclxuICAgICAgICBfdGhpcy5pbnRlcm5hbFZhbHVlID0gaW50ZXJuYWxWYWx1ZTtcclxuICAgICAgICBfdGhpcy50eXBlT3JkZXIgPSBUeXBlT3JkZXIuQXJyYXlWYWx1ZTtcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICBBcnJheVZhbHVlLnByb3RvdHlwZS52YWx1ZSA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaW50ZXJuYWxWYWx1ZS5tYXAoZnVuY3Rpb24gKHYpIHsgcmV0dXJuIHYudmFsdWUob3B0aW9ucyk7IH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoZSBnaXZlbiB2YWx1ZSBpcyBjb250YWluZWQgaW4gdGhpcyBhcnJheS5cclxuICAgICAqL1xyXG4gICAgQXJyYXlWYWx1ZS5wcm90b3R5cGUuY29udGFpbnMgPSBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gdGhpcy5pbnRlcm5hbFZhbHVlOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICB2YXIgZWxlbWVudCA9IF9hW19pXTtcclxuICAgICAgICAgICAgaWYgKGVsZW1lbnQuaXNFcXVhbCh2YWx1ZSkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH07XHJcbiAgICBBcnJheVZhbHVlLnByb3RvdHlwZS5mb3JFYWNoID0gZnVuY3Rpb24gKGFjdGlvbikge1xyXG4gICAgICAgIHRoaXMuaW50ZXJuYWxWYWx1ZS5mb3JFYWNoKGFjdGlvbik7XHJcbiAgICB9O1xyXG4gICAgQXJyYXlWYWx1ZS5wcm90b3R5cGUuaXNFcXVhbCA9IGZ1bmN0aW9uIChvdGhlcikge1xyXG4gICAgICAgIGlmIChvdGhlciBpbnN0YW5jZW9mIEFycmF5VmFsdWUpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuaW50ZXJuYWxWYWx1ZS5sZW5ndGggIT09IG90aGVyLmludGVybmFsVmFsdWUubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmludGVybmFsVmFsdWUubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5pbnRlcm5hbFZhbHVlW2ldLmlzRXF1YWwob3RoZXIuaW50ZXJuYWxWYWx1ZVtpXSkpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH07XHJcbiAgICBBcnJheVZhbHVlLnByb3RvdHlwZS5jb21wYXJlVG8gPSBmdW5jdGlvbiAob3RoZXIpIHtcclxuICAgICAgICBpZiAob3RoZXIgaW5zdGFuY2VvZiBBcnJheVZhbHVlKSB7XHJcbiAgICAgICAgICAgIHZhciBtaW5MZW5ndGggPSBNYXRoLm1pbih0aGlzLmludGVybmFsVmFsdWUubGVuZ3RoLCBvdGhlci5pbnRlcm5hbFZhbHVlLmxlbmd0aCk7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWluTGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHZhciBjbXAgPSB0aGlzLmludGVybmFsVmFsdWVbaV0uY29tcGFyZVRvKG90aGVyLmludGVybmFsVmFsdWVbaV0pO1xyXG4gICAgICAgICAgICAgICAgaWYgKGNtcCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjbXA7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHByaW1pdGl2ZUNvbXBhcmF0b3IodGhpcy5pbnRlcm5hbFZhbHVlLmxlbmd0aCwgb3RoZXIuaW50ZXJuYWxWYWx1ZS5sZW5ndGgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGVmYXVsdENvbXBhcmVUbyhvdGhlcik7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIEFycmF5VmFsdWUucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBkZXNjcmlwdGlvbnMgPSB0aGlzLmludGVybmFsVmFsdWUubWFwKGZ1bmN0aW9uICh2KSB7IHJldHVybiB2LnRvU3RyaW5nKCk7IH0pO1xyXG4gICAgICAgIHJldHVybiBcIltcIiArIGRlc2NyaXB0aW9ucy5qb2luKCcsJykgKyBcIl1cIjtcclxuICAgIH07XHJcbiAgICByZXR1cm4gQXJyYXlWYWx1ZTtcclxufShGaWVsZFZhbHVlKSk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogVGhlIHJlc3VsdCBvZiBhIGxvb2t1cCBmb3IgYSBnaXZlbiBwYXRoIG1heSBiZSBhbiBleGlzdGluZyBkb2N1bWVudCBvciBhXHJcbiAqIG1hcmtlciB0aGF0IHRoaXMgZG9jdW1lbnQgZG9lcyBub3QgZXhpc3QgYXQgYSBnaXZlbiB2ZXJzaW9uLlxyXG4gKi9cclxudmFyIE1heWJlRG9jdW1lbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBNYXliZURvY3VtZW50KGtleSwgdmVyc2lvbikge1xyXG4gICAgICAgIHRoaXMua2V5ID0ga2V5O1xyXG4gICAgICAgIHRoaXMudmVyc2lvbiA9IHZlcnNpb247XHJcbiAgICB9XHJcbiAgICBNYXliZURvY3VtZW50LmNvbXBhcmVCeUtleSA9IGZ1bmN0aW9uIChkMSwgZDIpIHtcclxuICAgICAgICByZXR1cm4gRG9jdW1lbnRLZXkuY29tcGFyYXRvcihkMS5rZXksIGQyLmtleSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIE1heWJlRG9jdW1lbnQ7XHJcbn0oKSk7XHJcbi8qKlxyXG4gKiBSZXByZXNlbnRzIGEgZG9jdW1lbnQgaW4gRmlyZXN0b3JlIHdpdGggYSBrZXksIHZlcnNpb24sIGRhdGEgYW5kIHdoZXRoZXIgdGhlXHJcbiAqIGRhdGEgaGFzIGxvY2FsIG11dGF0aW9ucyBhcHBsaWVkIHRvIGl0LlxyXG4gKi9cclxudmFyIERvY3VtZW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgdHNsaWIuX19leHRlbmRzKERvY3VtZW50LCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gRG9jdW1lbnQoa2V5LCB2ZXJzaW9uLCBvcHRpb25zLCBvYmplY3RWYWx1ZSwgcHJvdG8sIGNvbnZlcnRlcikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGtleSwgdmVyc2lvbikgfHwgdGhpcztcclxuICAgICAgICBfdGhpcy5vYmplY3RWYWx1ZSA9IG9iamVjdFZhbHVlO1xyXG4gICAgICAgIF90aGlzLnByb3RvID0gcHJvdG87XHJcbiAgICAgICAgX3RoaXMuY29udmVydGVyID0gY29udmVydGVyO1xyXG4gICAgICAgIGFzc2VydChfdGhpcy5vYmplY3RWYWx1ZSAhPT0gdW5kZWZpbmVkIHx8XHJcbiAgICAgICAgICAgIChfdGhpcy5wcm90byAhPT0gdW5kZWZpbmVkICYmIF90aGlzLmNvbnZlcnRlciAhPT0gdW5kZWZpbmVkKSwgJ0lmIG9iamVjdFZhbHVlIGlzIG5vdCBkZWZpbmVkLCBwcm90byBhbmQgY29udmVydGVyIG5lZWQgdG8gYmUgc2V0LicpO1xyXG4gICAgICAgIF90aGlzLmhhc0xvY2FsTXV0YXRpb25zID0gISFvcHRpb25zLmhhc0xvY2FsTXV0YXRpb25zO1xyXG4gICAgICAgIF90aGlzLmhhc0NvbW1pdHRlZE11dGF0aW9ucyA9ICEhb3B0aW9ucy5oYXNDb21taXR0ZWRNdXRhdGlvbnM7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgRG9jdW1lbnQucHJvdG90eXBlLmZpZWxkID0gZnVuY3Rpb24gKHBhdGgpIHtcclxuICAgICAgICBpZiAodGhpcy5vYmplY3RWYWx1ZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5vYmplY3RWYWx1ZS5maWVsZChwYXRoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5maWVsZFZhbHVlQ2FjaGUpIHtcclxuICAgICAgICAgICAgICAgIC8vIFRPRE8oYi8xMzYwOTA0NDUpOiBSZW1vdmUgdGhlIGNhY2hlIHdoZW4gYGdldEZpZWxkYCBpcyBubyBsb25nZXJcclxuICAgICAgICAgICAgICAgIC8vIGNhbGxlZCBkdXJpbmcgUXVlcnkgb3JkZXJpbmcuXHJcbiAgICAgICAgICAgICAgICB0aGlzLmZpZWxkVmFsdWVDYWNoZSA9IG5ldyBNYXAoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgY2Fub25pY2FsUGF0aCA9IHBhdGguY2Fub25pY2FsU3RyaW5nKCk7XHJcbiAgICAgICAgICAgIHZhciBmaWVsZFZhbHVlID0gdGhpcy5maWVsZFZhbHVlQ2FjaGUuZ2V0KGNhbm9uaWNhbFBhdGgpO1xyXG4gICAgICAgICAgICBpZiAoZmllbGRWYWx1ZSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBJbnN0ZWFkIG9mIGRlc2VyaWFsaXppbmcgdGhlIGZ1bGwgRG9jdW1lbnQgcHJvdG8sIHdlIG9ubHlcclxuICAgICAgICAgICAgICAgIC8vIGRlc2VyaWFsaXplIHRoZSB2YWx1ZSBhdCB0aGUgcmVxdWVzdGVkIGZpZWxkIHBhdGguIFRoaXMgc3BlZWRzIHVwXHJcbiAgICAgICAgICAgICAgICAvLyBRdWVyeSBleGVjdXRpb24gYXMgcXVlcnkgZmlsdGVycyBjYW4gZGlzY2FyZCBkb2N1bWVudHMgYmFzZWQgb24gYVxyXG4gICAgICAgICAgICAgICAgLy8gc2luZ2xlIGZpZWxkLlxyXG4gICAgICAgICAgICAgICAgdmFyIHByb3RvVmFsdWUgPSB0aGlzLmdldFByb3RvRmllbGQocGF0aCk7XHJcbiAgICAgICAgICAgICAgICBpZiAocHJvdG9WYWx1ZSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZmllbGRWYWx1ZSA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBmaWVsZFZhbHVlID0gdGhpcy5jb252ZXJ0ZXIocHJvdG9WYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLmZpZWxkVmFsdWVDYWNoZS5zZXQoY2Fub25pY2FsUGF0aCwgZmllbGRWYWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGZpZWxkVmFsdWU7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIERvY3VtZW50LnByb3RvdHlwZS5kYXRhID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgaWYgKCF0aGlzLm9iamVjdFZhbHVlKSB7XHJcbiAgICAgICAgICAgIHZhciByZXN1bHRfMSA9IE9iamVjdFZhbHVlLkVNUFRZO1xyXG4gICAgICAgICAgICBmb3JFYWNoKHRoaXMucHJvdG8uZmllbGRzIHx8IHt9LCBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0XzEgPSByZXN1bHRfMS5zZXQobmV3IEZpZWxkUGF0aChba2V5XSksIF90aGlzLmNvbnZlcnRlcih2YWx1ZSkpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdGhpcy5vYmplY3RWYWx1ZSA9IHJlc3VsdF8xO1xyXG4gICAgICAgICAgICAvLyBPbmNlIG9iamVjdFZhbHVlIGlzIGNvbXB1dGVkLCB2YWx1ZXMgaW5zaWRlIHRoZSBmaWVsZFZhbHVlQ2FjaGUgYXJlIG5vXHJcbiAgICAgICAgICAgIC8vIGxvbmdlciBhY2Nlc3NlZC5cclxuICAgICAgICAgICAgdGhpcy5maWVsZFZhbHVlQ2FjaGUgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLm9iamVjdFZhbHVlO1xyXG4gICAgfTtcclxuICAgIERvY3VtZW50LnByb3RvdHlwZS52YWx1ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5kYXRhKCkudmFsdWUoKTtcclxuICAgIH07XHJcbiAgICBEb2N1bWVudC5wcm90b3R5cGUuaXNFcXVhbCA9IGZ1bmN0aW9uIChvdGhlcikge1xyXG4gICAgICAgIHJldHVybiAob3RoZXIgaW5zdGFuY2VvZiBEb2N1bWVudCAmJlxyXG4gICAgICAgICAgICB0aGlzLmtleS5pc0VxdWFsKG90aGVyLmtleSkgJiZcclxuICAgICAgICAgICAgdGhpcy52ZXJzaW9uLmlzRXF1YWwob3RoZXIudmVyc2lvbikgJiZcclxuICAgICAgICAgICAgdGhpcy5oYXNMb2NhbE11dGF0aW9ucyA9PT0gb3RoZXIuaGFzTG9jYWxNdXRhdGlvbnMgJiZcclxuICAgICAgICAgICAgdGhpcy5oYXNDb21taXR0ZWRNdXRhdGlvbnMgPT09IG90aGVyLmhhc0NvbW1pdHRlZE11dGF0aW9ucyAmJlxyXG4gICAgICAgICAgICB0aGlzLmRhdGEoKS5pc0VxdWFsKG90aGVyLmRhdGEoKSkpO1xyXG4gICAgfTtcclxuICAgIERvY3VtZW50LnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gKFwiRG9jdW1lbnQoXCIgKyB0aGlzLmtleSArIFwiLCBcIiArIHRoaXMudmVyc2lvbiArIFwiLCBcIiArIHRoaXMuZGF0YSgpLnRvU3RyaW5nKCkgKyBcIiwgXCIgK1xyXG4gICAgICAgICAgICAoXCJ7aGFzTG9jYWxNdXRhdGlvbnM6IFwiICsgdGhpcy5oYXNMb2NhbE11dGF0aW9ucyArIFwifSksIFwiKSArXHJcbiAgICAgICAgICAgIChcIntoYXNDb21taXR0ZWRNdXRhdGlvbnM6IFwiICsgdGhpcy5oYXNDb21taXR0ZWRNdXRhdGlvbnMgKyBcIn0pXCIpKTtcclxuICAgIH07XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoRG9jdW1lbnQucHJvdG90eXBlLCBcImhhc1BlbmRpbmdXcml0ZXNcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5oYXNMb2NhbE11dGF0aW9ucyB8fCB0aGlzLmhhc0NvbW1pdHRlZE11dGF0aW9ucztcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0aGUgbmVzdGVkIFByb3RvYnVmIHZhbHVlIGZvciAncGF0aGAuIENhbiBvbmx5IGJlIGNhbGxlZCBpZlxyXG4gICAgICogYHByb3RvYCB3YXMgcHJvdmlkZWQgYXQgY29uc3RydWN0aW9uIHRpbWUuXHJcbiAgICAgKi9cclxuICAgIERvY3VtZW50LnByb3RvdHlwZS5nZXRQcm90b0ZpZWxkID0gZnVuY3Rpb24gKHBhdGgpIHtcclxuICAgICAgICBhc3NlcnQodGhpcy5wcm90byAhPT0gdW5kZWZpbmVkLCAnQ2FuIG9ubHkgY2FsbCBnZXRQcm90b0ZpZWxkKCkgd2hlbiBwcm90byBpcyBkZWZpbmVkJyk7XHJcbiAgICAgICAgdmFyIHByb3RvVmFsdWUgPSB0aGlzLnByb3RvLmZpZWxkc1xyXG4gICAgICAgICAgICA/IHRoaXMucHJvdG8uZmllbGRzW3BhdGguZmlyc3RTZWdtZW50KCldXHJcbiAgICAgICAgICAgIDogdW5kZWZpbmVkO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgcGF0aC5sZW5ndGg7ICsraSkge1xyXG4gICAgICAgICAgICBpZiAoIXByb3RvVmFsdWUgfHwgIXByb3RvVmFsdWUubWFwVmFsdWUgfHwgIXByb3RvVmFsdWUubWFwVmFsdWUuZmllbGRzKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHByb3RvVmFsdWUgPSBwcm90b1ZhbHVlLm1hcFZhbHVlLmZpZWxkc1twYXRoLmdldChpKV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBwcm90b1ZhbHVlO1xyXG4gICAgfTtcclxuICAgIERvY3VtZW50LmNvbXBhcmVCeUZpZWxkID0gZnVuY3Rpb24gKGZpZWxkLCBkMSwgZDIpIHtcclxuICAgICAgICB2YXIgdjEgPSBkMS5maWVsZChmaWVsZCk7XHJcbiAgICAgICAgdmFyIHYyID0gZDIuZmllbGQoZmllbGQpO1xyXG4gICAgICAgIGlmICh2MSAhPT0gbnVsbCAmJiB2MiAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdjEuY29tcGFyZVRvKHYyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWlsKFwiVHJ5aW5nIHRvIGNvbXBhcmUgZG9jdW1lbnRzIG9uIGZpZWxkcyB0aGF0IGRvbid0IGV4aXN0XCIpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICByZXR1cm4gRG9jdW1lbnQ7XHJcbn0oTWF5YmVEb2N1bWVudCkpO1xyXG4vKipcclxuICogQSBjbGFzcyByZXByZXNlbnRpbmcgYSBkZWxldGVkIGRvY3VtZW50LlxyXG4gKiBWZXJzaW9uIGlzIHNldCB0byAwIGlmIHdlIGRvbid0IHBvaW50IHRvIGFueSBzcGVjaWZpYyB0aW1lLCBvdGhlcndpc2UgaXRcclxuICogZGVub3RlcyB0aW1lIHdlIGtub3cgaXQgZGlkbid0IGV4aXN0IGF0LlxyXG4gKi9cclxudmFyIE5vRG9jdW1lbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICB0c2xpYi5fX2V4dGVuZHMoTm9Eb2N1bWVudCwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIE5vRG9jdW1lbnQoa2V5LCB2ZXJzaW9uLCBvcHRpb25zKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywga2V5LCB2ZXJzaW9uKSB8fCB0aGlzO1xyXG4gICAgICAgIF90aGlzLmhhc0NvbW1pdHRlZE11dGF0aW9ucyA9ICEhKG9wdGlvbnMgJiYgb3B0aW9ucy5oYXNDb21taXR0ZWRNdXRhdGlvbnMpO1xyXG4gICAgICAgIHJldHVybiBfdGhpcztcclxuICAgIH1cclxuICAgIE5vRG9jdW1lbnQucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBcIk5vRG9jdW1lbnQoXCIgKyB0aGlzLmtleSArIFwiLCBcIiArIHRoaXMudmVyc2lvbiArIFwiKVwiO1xyXG4gICAgfTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOb0RvY3VtZW50LnByb3RvdHlwZSwgXCJoYXNQZW5kaW5nV3JpdGVzXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaGFzQ29tbWl0dGVkTXV0YXRpb25zO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgTm9Eb2N1bWVudC5wcm90b3R5cGUuaXNFcXVhbCA9IGZ1bmN0aW9uIChvdGhlcikge1xyXG4gICAgICAgIHJldHVybiAob3RoZXIgaW5zdGFuY2VvZiBOb0RvY3VtZW50ICYmXHJcbiAgICAgICAgICAgIG90aGVyLmhhc0NvbW1pdHRlZE11dGF0aW9ucyA9PT0gdGhpcy5oYXNDb21taXR0ZWRNdXRhdGlvbnMgJiZcclxuICAgICAgICAgICAgb3RoZXIudmVyc2lvbi5pc0VxdWFsKHRoaXMudmVyc2lvbikgJiZcclxuICAgICAgICAgICAgb3RoZXIua2V5LmlzRXF1YWwodGhpcy5rZXkpKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gTm9Eb2N1bWVudDtcclxufShNYXliZURvY3VtZW50KSk7XHJcbi8qKlxyXG4gKiBBIGNsYXNzIHJlcHJlc2VudGluZyBhbiBleGlzdGluZyBkb2N1bWVudCB3aG9zZSBkYXRhIGlzIHVua25vd24gKGUuZy4gYVxyXG4gKiBkb2N1bWVudCB0aGF0IHdhcyB1cGRhdGVkIHdpdGhvdXQgYSBrbm93biBiYXNlIGRvY3VtZW50KS5cclxuICovXHJcbnZhciBVbmtub3duRG9jdW1lbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICB0c2xpYi5fX2V4dGVuZHMoVW5rbm93bkRvY3VtZW50LCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gVW5rbm93bkRvY3VtZW50KCkge1xyXG4gICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcclxuICAgIH1cclxuICAgIFVua25vd25Eb2N1bWVudC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIFwiVW5rbm93bkRvY3VtZW50KFwiICsgdGhpcy5rZXkgKyBcIiwgXCIgKyB0aGlzLnZlcnNpb24gKyBcIilcIjtcclxuICAgIH07XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVW5rbm93bkRvY3VtZW50LnByb3RvdHlwZSwgXCJoYXNQZW5kaW5nV3JpdGVzXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBVbmtub3duRG9jdW1lbnQucHJvdG90eXBlLmlzRXF1YWwgPSBmdW5jdGlvbiAob3RoZXIpIHtcclxuICAgICAgICByZXR1cm4gKG90aGVyIGluc3RhbmNlb2YgVW5rbm93bkRvY3VtZW50ICYmXHJcbiAgICAgICAgICAgIG90aGVyLnZlcnNpb24uaXNFcXVhbCh0aGlzLnZlcnNpb24pICYmXHJcbiAgICAgICAgICAgIG90aGVyLmtleS5pc0VxdWFsKHRoaXMua2V5KSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFVua25vd25Eb2N1bWVudDtcclxufShNYXliZURvY3VtZW50KSk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQSBtYXAgaW1wbGVtZW50YXRpb24gdGhhdCB1c2VzIG9iamVjdHMgYXMga2V5cy4gT2JqZWN0cyBtdXN0IGltcGxlbWVudCB0aGVcclxuICogRXF1YXRhYmxlIGludGVyZmFjZSBhbmQgbXVzdCBiZSBpbW11dGFibGUuIEVudHJpZXMgaW4gdGhlIG1hcCBhcmUgc3RvcmVkXHJcbiAqIHRvZ2V0aGVyIHdpdGggdGhlIGtleSBiZWluZyBwcm9kdWNlZCBmcm9tIHRoZSBtYXBLZXlGbi4gVGhpcyBtYXBcclxuICogYXV0b21hdGljYWxseSBoYW5kbGVzIGNvbGxpc2lvbnMgb2Yga2V5cy5cclxuICovXHJcbnZhciBPYmplY3RNYXAgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBPYmplY3RNYXAobWFwS2V5Rm4pIHtcclxuICAgICAgICB0aGlzLm1hcEtleUZuID0gbWFwS2V5Rm47XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVGhlIGlubmVyIG1hcCBmb3IgYSBrZXkgLT4gdmFsdWUgcGFpci4gRHVlIHRvIHRoZSBwb3NzaWJpbGl0eSBvZlxyXG4gICAgICAgICAqIGNvbGxpc2lvbnMgd2Uga2VlcCBhIGxpc3Qgb2YgZW50cmllcyB0aGF0IHdlIGRvIGEgbGluZWFyIHNlYXJjaCB0aHJvdWdoXHJcbiAgICAgICAgICogdG8gZmluZCBhbiBhY3R1YWwgbWF0Y2guIE5vdGUgdGhhdCBjb2xsaXNpb25zIHNob3VsZCBiZSByYXJlLCBzbyB3ZSBzdGlsbFxyXG4gICAgICAgICAqIGV4cGVjdCBuZWFyIGNvbnN0YW50IHRpbWUgbG9va3VwcyBpbiBwcmFjdGljZS5cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLmlubmVyID0ge307XHJcbiAgICB9XHJcbiAgICAvKiogR2V0IGEgdmFsdWUgZm9yIHRoaXMga2V5LCBvciB1bmRlZmluZWQgaWYgaXQgZG9lcyBub3QgZXhpc3QuICovXHJcbiAgICBPYmplY3RNYXAucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICB2YXIgaWQgPSB0aGlzLm1hcEtleUZuKGtleSk7XHJcbiAgICAgICAgdmFyIG1hdGNoZXMgPSB0aGlzLmlubmVyW2lkXTtcclxuICAgICAgICBpZiAobWF0Y2hlcyA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgbWF0Y2hlc18xID0gbWF0Y2hlczsgX2kgPCBtYXRjaGVzXzEubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBfYSA9IG1hdGNoZXNfMVtfaV0sIG90aGVyS2V5ID0gX2FbMF0sIHZhbHVlID0gX2FbMV07XHJcbiAgICAgICAgICAgIGlmIChvdGhlcktleS5pc0VxdWFsKGtleSkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgfTtcclxuICAgIE9iamVjdE1hcC5wcm90b3R5cGUuaGFzID0gZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldChrZXkpICE9PSB1bmRlZmluZWQ7XHJcbiAgICB9O1xyXG4gICAgLyoqIFB1dCB0aGlzIGtleSBhbmQgdmFsdWUgaW4gdGhlIG1hcC4gKi9cclxuICAgIE9iamVjdE1hcC5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcclxuICAgICAgICB2YXIgaWQgPSB0aGlzLm1hcEtleUZuKGtleSk7XHJcbiAgICAgICAgdmFyIG1hdGNoZXMgPSB0aGlzLmlubmVyW2lkXTtcclxuICAgICAgICBpZiAobWF0Y2hlcyA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaW5uZXJbaWRdID0gW1trZXksIHZhbHVlXV07XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXRjaGVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmIChtYXRjaGVzW2ldWzBdLmlzRXF1YWwoa2V5KSkge1xyXG4gICAgICAgICAgICAgICAgbWF0Y2hlc1tpXSA9IFtrZXksIHZhbHVlXTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBtYXRjaGVzLnB1c2goW2tleSwgdmFsdWVdKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJlbW92ZSB0aGlzIGtleSBmcm9tIHRoZSBtYXAuIFJldHVybnMgYSBib29sZWFuIGlmIGFueXRoaW5nIHdhcyBkZWxldGVkLlxyXG4gICAgICovXHJcbiAgICBPYmplY3RNYXAucHJvdG90eXBlLmRlbGV0ZSA9IGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICB2YXIgaWQgPSB0aGlzLm1hcEtleUZuKGtleSk7XHJcbiAgICAgICAgdmFyIG1hdGNoZXMgPSB0aGlzLmlubmVyW2lkXTtcclxuICAgICAgICBpZiAobWF0Y2hlcyA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXRjaGVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmIChtYXRjaGVzW2ldWzBdLmlzRXF1YWwoa2V5KSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKG1hdGNoZXMubGVuZ3RoID09PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMuaW5uZXJbaWRdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWF0Y2hlcy5zcGxpY2UoaSwgMSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9O1xyXG4gICAgT2JqZWN0TWFwLnByb3RvdHlwZS5mb3JFYWNoID0gZnVuY3Rpb24gKGZuKSB7XHJcbiAgICAgICAgZm9yRWFjaCh0aGlzLmlubmVyLCBmdW5jdGlvbiAoXywgZW50cmllcykge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGVudHJpZXNfMSA9IGVudHJpZXM7IF9pIDwgZW50cmllc18xLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIF9hID0gZW50cmllc18xW19pXSwgayA9IF9hWzBdLCB2ID0gX2FbMV07XHJcbiAgICAgICAgICAgICAgICBmbihrLCB2KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIE9iamVjdE1hcC5wcm90b3R5cGUuaXNFbXB0eSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gaXNFbXB0eSh0aGlzLmlubmVyKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gT2JqZWN0TWFwO1xyXG59KCkpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEFuIGluLW1lbW9yeSBidWZmZXIgb2YgZW50cmllcyB0byBiZSB3cml0dGVuIHRvIGEgUmVtb3RlRG9jdW1lbnRDYWNoZS5cclxuICogSXQgY2FuIGJlIHVzZWQgdG8gYmF0Y2ggdXAgYSBzZXQgb2YgY2hhbmdlcyB0byBiZSB3cml0dGVuIHRvIHRoZSBjYWNoZSwgYnV0XHJcbiAqIGFkZGl0aW9uYWxseSBzdXBwb3J0cyByZWFkaW5nIGVudHJpZXMgYmFjayB3aXRoIHRoZSBgZ2V0RW50cnkoKWAgbWV0aG9kLFxyXG4gKiBmYWxsaW5nIGJhY2sgdG8gdGhlIHVuZGVybHlpbmcgUmVtb3RlRG9jdW1lbnRDYWNoZSBpZiBubyBlbnRyeSBpc1xyXG4gKiBidWZmZXJlZC5cclxuICpcclxuICogRW50cmllcyBhZGRlZCB0byB0aGUgY2FjaGUgKm11c3QqIGJlIHJlYWQgZmlyc3QuIFRoaXMgaXMgdG8gZmFjaWxpdGF0ZVxyXG4gKiBjYWxjdWxhdGluZyB0aGUgc2l6ZSBkZWx0YSBvZiB0aGUgcGVuZGluZyBjaGFuZ2VzLlxyXG4gKlxyXG4gKiBQT1JUSU5HIE5PVEU6IFRoaXMgY2xhc3Mgd2FzIGltcGxlbWVudGVkIHRoZW4gcmVtb3ZlZCBmcm9tIG90aGVyIHBsYXRmb3Jtcy5cclxuICogSWYgYnl0ZS1jb3VudGluZyBlbmRzIHVwIGJlaW5nIG5lZWRlZCBvbiB0aGUgb3RoZXIgcGxhdGZvcm1zLCBjb25zaWRlclxyXG4gKiBwb3J0aW5nIHRoaXMgY2xhc3MgYXMgcGFydCBvZiB0aGF0IGltcGxlbWVudGF0aW9uIHdvcmsuXHJcbiAqL1xyXG52YXIgUmVtb3RlRG9jdW1lbnRDaGFuZ2VCdWZmZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBSZW1vdGVEb2N1bWVudENoYW5nZUJ1ZmZlcigpIHtcclxuICAgICAgICAvLyBBIG1hcHBpbmcgb2YgZG9jdW1lbnQga2V5IHRvIHRoZSBuZXcgY2FjaGUgZW50cnkgdGhhdCBzaG91bGQgYmUgd3JpdHRlbiAob3IgbnVsbCBpZiBhbnlcclxuICAgICAgICAvLyBleGlzdGluZyBjYWNoZSBlbnRyeSBzaG91bGQgYmUgcmVtb3ZlZCkuXHJcbiAgICAgICAgdGhpcy5jaGFuZ2VzID0gbmV3IE9iamVjdE1hcChmdW5jdGlvbiAoa2V5KSB7IHJldHVybiBrZXkudG9TdHJpbmcoKTsgfSk7XHJcbiAgICAgICAgdGhpcy5jaGFuZ2VzQXBwbGllZCA9IGZhbHNlO1xyXG4gICAgfVxyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFJlbW90ZURvY3VtZW50Q2hhbmdlQnVmZmVyLnByb3RvdHlwZSwgXCJyZWFkVGltZVwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGFzc2VydCh0aGlzLl9yZWFkVGltZSAhPT0gdW5kZWZpbmVkLCAnUmVhZCB0aW1lIGlzIG5vdCBzZXQuIEFsbCByZW1vdmVFbnRyeSgpIGNhbGxzIG11c3QgaW5jbHVkZSBhIHJlYWRUaW1lIGlmIGB0cmFja1JlbW92YWxzYCBpcyB1c2VkLicpO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fcmVhZFRpbWU7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgICAgICAvLyBSaWdodCBub3cgKGZvciBzaW1wbGljaXR5KSB3ZSBqdXN0IHRyYWNrIGEgc2luZ2xlIHJlYWRUaW1lIGZvciBhbGwgdGhlXHJcbiAgICAgICAgICAgIC8vIGFkZGVkIGVudHJpZXMgc2luY2Ugd2UgZXhwZWN0IHRoZW0gdG8gYWxsIGJlIHRoZSBzYW1lLCBidXQgd2UgY291bGRcclxuICAgICAgICAgICAgLy8gcmV3b3JrIHRvIHN0b3JlIHBlci1lbnRyeSByZWFkVGltZXMgaWYgbmVjZXNzYXJ5LlxyXG4gICAgICAgICAgICBhc3NlcnQodGhpcy5fcmVhZFRpbWUgPT09IHVuZGVmaW5lZCB8fCB0aGlzLl9yZWFkVGltZS5pc0VxdWFsKHZhbHVlKSwgJ0FsbCBjaGFuZ2VzIGluIGEgUmVtb3RlRG9jdW1lbnRDaGFuZ2VCdWZmZXIgbXVzdCBoYXZlIHRoZSBzYW1lIHJlYWQgdGltZScpO1xyXG4gICAgICAgICAgICB0aGlzLl9yZWFkVGltZSA9IHZhbHVlO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgLyoqXHJcbiAgICAgKiBCdWZmZXJzIGEgYFJlbW90ZURvY3VtZW50Q2FjaGUuYWRkRW50cnkoKWAgY2FsbC5cclxuICAgICAqXHJcbiAgICAgKiBZb3UgY2FuIG9ubHkgbW9kaWZ5IGRvY3VtZW50cyB0aGF0IGhhdmUgYWxyZWFkeSBiZWVuIHJldHJpZXZlZCB2aWFcclxuICAgICAqIGBnZXRFbnRyeSgpL2dldEVudHJpZXMoKWAgKGVuZm9yY2VkIHZpYSBJbmRleGVkRGJzIGBhcHBseSgpYCkuXHJcbiAgICAgKi9cclxuICAgIFJlbW90ZURvY3VtZW50Q2hhbmdlQnVmZmVyLnByb3RvdHlwZS5hZGRFbnRyeSA9IGZ1bmN0aW9uIChtYXliZURvY3VtZW50LCByZWFkVGltZSkge1xyXG4gICAgICAgIHRoaXMuYXNzZXJ0Tm90QXBwbGllZCgpO1xyXG4gICAgICAgIHRoaXMucmVhZFRpbWUgPSByZWFkVGltZTtcclxuICAgICAgICB0aGlzLmNoYW5nZXMuc2V0KG1heWJlRG9jdW1lbnQua2V5LCBtYXliZURvY3VtZW50KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEJ1ZmZlcnMgYSBgUmVtb3RlRG9jdW1lbnRDYWNoZS5yZW1vdmVFbnRyeSgpYCBjYWxsLlxyXG4gICAgICpcclxuICAgICAqIFlvdSBjYW4gb25seSByZW1vdmUgZG9jdW1lbnRzIHRoYXQgaGF2ZSBhbHJlYWR5IGJlZW4gcmV0cmlldmVkIHZpYVxyXG4gICAgICogYGdldEVudHJ5KCkvZ2V0RW50cmllcygpYCAoZW5mb3JjZWQgdmlhIEluZGV4ZWREYnMgYGFwcGx5KClgKS5cclxuICAgICAqL1xyXG4gICAgUmVtb3RlRG9jdW1lbnRDaGFuZ2VCdWZmZXIucHJvdG90eXBlLnJlbW92ZUVudHJ5ID0gZnVuY3Rpb24gKGtleSwgcmVhZFRpbWUpIHtcclxuICAgICAgICB0aGlzLmFzc2VydE5vdEFwcGxpZWQoKTtcclxuICAgICAgICBpZiAocmVhZFRpbWUpIHtcclxuICAgICAgICAgICAgdGhpcy5yZWFkVGltZSA9IHJlYWRUaW1lO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmNoYW5nZXMuc2V0KGtleSwgbnVsbCk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBMb29rcyB1cCBhbiBlbnRyeSBpbiB0aGUgY2FjaGUuIFRoZSBidWZmZXJlZCBjaGFuZ2VzIHdpbGwgZmlyc3QgYmUgY2hlY2tlZCxcclxuICAgICAqIGFuZCBpZiBubyBidWZmZXJlZCBjaGFuZ2UgYXBwbGllcywgdGhpcyB3aWxsIGZvcndhcmQgdG9cclxuICAgICAqIGBSZW1vdGVEb2N1bWVudENhY2hlLmdldEVudHJ5KClgLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB0cmFuc2FjdGlvbiBUaGUgdHJhbnNhY3Rpb24gaW4gd2hpY2ggdG8gcGVyZm9ybSBhbnkgcGVyc2lzdGVuY2VcclxuICAgICAqICAgICBvcGVyYXRpb25zLlxyXG4gICAgICogQHBhcmFtIGRvY3VtZW50S2V5IFRoZSBrZXkgb2YgdGhlIGVudHJ5IHRvIGxvb2sgdXAuXHJcbiAgICAgKiBAcmV0dXJuIFRoZSBjYWNoZWQgRG9jdW1lbnQgb3IgTm9Eb2N1bWVudCBlbnRyeSwgb3IgbnVsbCBpZiB3ZSBoYXZlIG5vdGhpbmdcclxuICAgICAqIGNhY2hlZC5cclxuICAgICAqL1xyXG4gICAgUmVtb3RlRG9jdW1lbnRDaGFuZ2VCdWZmZXIucHJvdG90eXBlLmdldEVudHJ5ID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCBkb2N1bWVudEtleSkge1xyXG4gICAgICAgIHRoaXMuYXNzZXJ0Tm90QXBwbGllZCgpO1xyXG4gICAgICAgIHZhciBidWZmZXJlZEVudHJ5ID0gdGhpcy5jaGFuZ2VzLmdldChkb2N1bWVudEtleSk7XHJcbiAgICAgICAgaWYgKGJ1ZmZlcmVkRW50cnkgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoYnVmZmVyZWRFbnRyeSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRGcm9tQ2FjaGUodHJhbnNhY3Rpb24sIGRvY3VtZW50S2V5KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBMb29rcyB1cCBzZXZlcmFsIGVudHJpZXMgaW4gdGhlIGNhY2hlLCBmb3J3YXJkaW5nIHRvXHJcbiAgICAgKiBgUmVtb3RlRG9jdW1lbnRDYWNoZS5nZXRFbnRyeSgpYC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gdHJhbnNhY3Rpb24gVGhlIHRyYW5zYWN0aW9uIGluIHdoaWNoIHRvIHBlcmZvcm0gYW55IHBlcnNpc3RlbmNlXHJcbiAgICAgKiAgICAgb3BlcmF0aW9ucy5cclxuICAgICAqIEBwYXJhbSBkb2N1bWVudEtleXMgVGhlIGtleXMgb2YgdGhlIGVudHJpZXMgdG8gbG9vayB1cC5cclxuICAgICAqIEByZXR1cm4gQSBtYXAgb2YgY2FjaGVkIGBEb2N1bWVudGBzIG9yIGBOb0RvY3VtZW50YHMsIGluZGV4ZWQgYnkga2V5LiBJZiBhblxyXG4gICAgICogICAgIGVudHJ5IGNhbm5vdCBiZSBmb3VuZCwgdGhlIGNvcnJlc3BvbmRpbmcga2V5IHdpbGwgYmUgbWFwcGVkIHRvIGEgbnVsbFxyXG4gICAgICogICAgIHZhbHVlLlxyXG4gICAgICovXHJcbiAgICBSZW1vdGVEb2N1bWVudENoYW5nZUJ1ZmZlci5wcm90b3R5cGUuZ2V0RW50cmllcyA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwgZG9jdW1lbnRLZXlzKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0QWxsRnJvbUNhY2hlKHRyYW5zYWN0aW9uLCBkb2N1bWVudEtleXMpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQXBwbGllcyBidWZmZXJlZCBjaGFuZ2VzIHRvIHRoZSB1bmRlcmx5aW5nIFJlbW90ZURvY3VtZW50Q2FjaGUsIHVzaW5nXHJcbiAgICAgKiB0aGUgcHJvdmlkZWQgdHJhbnNhY3Rpb24uXHJcbiAgICAgKi9cclxuICAgIFJlbW90ZURvY3VtZW50Q2hhbmdlQnVmZmVyLnByb3RvdHlwZS5hcHBseSA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbikge1xyXG4gICAgICAgIHRoaXMuYXNzZXJ0Tm90QXBwbGllZCgpO1xyXG4gICAgICAgIHRoaXMuY2hhbmdlc0FwcGxpZWQgPSB0cnVlO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmFwcGx5Q2hhbmdlcyh0cmFuc2FjdGlvbik7XHJcbiAgICB9O1xyXG4gICAgLyoqIEhlbHBlciB0byBhc3NlcnQgdGhpcy5jaGFuZ2VzIGlzIG5vdCBudWxsICAqL1xyXG4gICAgUmVtb3RlRG9jdW1lbnRDaGFuZ2VCdWZmZXIucHJvdG90eXBlLmFzc2VydE5vdEFwcGxpZWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgYXNzZXJ0KCF0aGlzLmNoYW5nZXNBcHBsaWVkLCAnQ2hhbmdlcyBoYXZlIGFscmVhZHkgYmVlbiBhcHBsaWVkLicpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBSZW1vdGVEb2N1bWVudENoYW5nZUJ1ZmZlcjtcclxufSgpKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnZhciBJbmRleGVkRGJSZW1vdGVEb2N1bWVudENhY2hlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0ge0xvY2FsU2VyaWFsaXplcn0gc2VyaWFsaXplciBUaGUgZG9jdW1lbnQgc2VyaWFsaXplci5cclxuICAgICAqIEBwYXJhbSB7SW5kZXhNYW5hZ2VyfSBpbmRleE1hbmFnZXIgVGhlIHF1ZXJ5IGluZGV4ZXMgdGhhdCBuZWVkIHRvIGJlIG1haW50YWluZWQuXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIEluZGV4ZWREYlJlbW90ZURvY3VtZW50Q2FjaGUoc2VyaWFsaXplciwgaW5kZXhNYW5hZ2VyKSB7XHJcbiAgICAgICAgdGhpcy5zZXJpYWxpemVyID0gc2VyaWFsaXplcjtcclxuICAgICAgICB0aGlzLmluZGV4TWFuYWdlciA9IGluZGV4TWFuYWdlcjtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQWRkcyB0aGUgc3VwcGxpZWQgZW50cmllcyB0byB0aGUgY2FjaGUuXHJcbiAgICAgKlxyXG4gICAgICogQWxsIGNhbGxzIG9mIGBhZGRFbnRyeWAgYXJlIHJlcXVpcmVkIHRvIGdvIHRocm91Z2ggdGhlIFJlbW90ZURvY3VtZW50Q2hhbmdlQnVmZmVyXHJcbiAgICAgKiByZXR1cm5lZCBieSBgbmV3Q2hhbmdlQnVmZmVyKClgIHRvIGVuc3VyZSBwcm9wZXIgYWNjb3VudGluZyBvZiBtZXRhZGF0YS5cclxuICAgICAqL1xyXG4gICAgSW5kZXhlZERiUmVtb3RlRG9jdW1lbnRDYWNoZS5wcm90b3R5cGUuYWRkRW50cnkgPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24sIGtleSwgZG9jKSB7XHJcbiAgICAgICAgdmFyIGRvY3VtZW50U3RvcmUgPSByZW1vdGVEb2N1bWVudHNTdG9yZSh0cmFuc2FjdGlvbik7XHJcbiAgICAgICAgcmV0dXJuIGRvY3VtZW50U3RvcmUucHV0KGRiS2V5KGtleSksIGRvYyk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZW1vdmVzIGEgZG9jdW1lbnQgZnJvbSB0aGUgY2FjaGUuXHJcbiAgICAgKlxyXG4gICAgICogQWxsIGNhbGxzIG9mIGByZW1vdmVFbnRyeWAgIGFyZSByZXF1aXJlZCB0byBnbyB0aHJvdWdoIHRoZSBSZW1vdGVEb2N1bWVudENoYW5nZUJ1ZmZlclxyXG4gICAgICogcmV0dXJuZWQgYnkgYG5ld0NoYW5nZUJ1ZmZlcigpYCB0byBlbnN1cmUgcHJvcGVyIGFjY291bnRpbmcgb2YgbWV0YWRhdGEuXHJcbiAgICAgKi9cclxuICAgIEluZGV4ZWREYlJlbW90ZURvY3VtZW50Q2FjaGUucHJvdG90eXBlLnJlbW92ZUVudHJ5ID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCBkb2N1bWVudEtleSkge1xyXG4gICAgICAgIHZhciBzdG9yZSA9IHJlbW90ZURvY3VtZW50c1N0b3JlKHRyYW5zYWN0aW9uKTtcclxuICAgICAgICB2YXIga2V5ID0gZGJLZXkoZG9jdW1lbnRLZXkpO1xyXG4gICAgICAgIHJldHVybiBzdG9yZS5kZWxldGUoa2V5KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFVwZGF0ZXMgdGhlIGN1cnJlbnQgY2FjaGUgc2l6ZS5cclxuICAgICAqXHJcbiAgICAgKiBDYWxsZXJzIHRvIGBhZGRFbnRyeSgpYCBhbmQgYHJlbW92ZUVudHJ5KClgICptdXN0KiBjYWxsIHRoaXMgYWZ0ZXJ3YXJkcyB0byB1cGRhdGUgdGhlXHJcbiAgICAgKiBjYWNoZSdzIG1ldGFkYXRhLlxyXG4gICAgICovXHJcbiAgICBJbmRleGVkRGJSZW1vdGVEb2N1bWVudENhY2hlLnByb3RvdHlwZS51cGRhdGVNZXRhZGF0YSA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwgc2l6ZURlbHRhKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRNZXRhZGF0YSh0cmFuc2FjdGlvbikubmV4dChmdW5jdGlvbiAobWV0YWRhdGEpIHtcclxuICAgICAgICAgICAgbWV0YWRhdGEuYnl0ZVNpemUgKz0gc2l6ZURlbHRhO1xyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXMuc2V0TWV0YWRhdGEodHJhbnNhY3Rpb24sIG1ldGFkYXRhKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBJbmRleGVkRGJSZW1vdGVEb2N1bWVudENhY2hlLnByb3RvdHlwZS5nZXRFbnRyeSA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwgZG9jdW1lbnRLZXkpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiByZW1vdGVEb2N1bWVudHNTdG9yZSh0cmFuc2FjdGlvbilcclxuICAgICAgICAgICAgLmdldChkYktleShkb2N1bWVudEtleSkpXHJcbiAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uIChkYlJlbW90ZURvYykge1xyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXMubWF5YmVEZWNvZGVEb2N1bWVudChkYlJlbW90ZURvYyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBMb29rcyB1cCBhbiBlbnRyeSBpbiB0aGUgY2FjaGUuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGRvY3VtZW50S2V5IFRoZSBrZXkgb2YgdGhlIGVudHJ5IHRvIGxvb2sgdXAuXHJcbiAgICAgKiBAcmV0dXJuIFRoZSBjYWNoZWQgTWF5YmVEb2N1bWVudCBlbnRyeSBhbmQgaXRzIHNpemUsIG9yIG51bGwgaWYgd2UgaGF2ZSBub3RoaW5nIGNhY2hlZC5cclxuICAgICAqL1xyXG4gICAgSW5kZXhlZERiUmVtb3RlRG9jdW1lbnRDYWNoZS5wcm90b3R5cGUuZ2V0U2l6ZWRFbnRyeSA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwgZG9jdW1lbnRLZXkpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiByZW1vdGVEb2N1bWVudHNTdG9yZSh0cmFuc2FjdGlvbilcclxuICAgICAgICAgICAgLmdldChkYktleShkb2N1bWVudEtleSkpXHJcbiAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uIChkYlJlbW90ZURvYykge1xyXG4gICAgICAgICAgICB2YXIgZG9jID0gX3RoaXMubWF5YmVEZWNvZGVEb2N1bWVudChkYlJlbW90ZURvYyk7XHJcbiAgICAgICAgICAgIHJldHVybiBkb2NcclxuICAgICAgICAgICAgICAgID8ge1xyXG4gICAgICAgICAgICAgICAgICAgIG1heWJlRG9jdW1lbnQ6IGRvYyxcclxuICAgICAgICAgICAgICAgICAgICBzaXplOiBkYkRvY3VtZW50U2l6ZShkYlJlbW90ZURvYylcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIDogbnVsbDtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBJbmRleGVkRGJSZW1vdGVEb2N1bWVudENhY2hlLnByb3RvdHlwZS5nZXRFbnRyaWVzID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCBkb2N1bWVudEtleXMpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhciByZXN1bHRzID0gbnVsbGFibGVNYXliZURvY3VtZW50TWFwKCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZm9yRWFjaERiRW50cnkodHJhbnNhY3Rpb24sIGRvY3VtZW50S2V5cywgZnVuY3Rpb24gKGtleSwgZGJSZW1vdGVEb2MpIHtcclxuICAgICAgICAgICAgdmFyIGRvYyA9IF90aGlzLm1heWJlRGVjb2RlRG9jdW1lbnQoZGJSZW1vdGVEb2MpO1xyXG4gICAgICAgICAgICByZXN1bHRzID0gcmVzdWx0cy5pbnNlcnQoa2V5LCBkb2MpO1xyXG4gICAgICAgIH0pLm5leHQoZnVuY3Rpb24gKCkgeyByZXR1cm4gcmVzdWx0czsgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBMb29rcyB1cCBzZXZlcmFsIGVudHJpZXMgaW4gdGhlIGNhY2hlLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBkb2N1bWVudEtleXMgVGhlIHNldCBvZiBrZXlzIGVudHJpZXMgdG8gbG9vayB1cC5cclxuICAgICAqIEByZXR1cm4gQSBtYXAgb2YgTWF5YmVEb2N1bWVudHMgaW5kZXhlZCBieSBrZXkgKGlmIGEgZG9jdW1lbnQgY2Fubm90IGJlXHJcbiAgICAgKiAgICAgZm91bmQsIHRoZSBrZXkgd2lsbCBiZSBtYXBwZWQgdG8gbnVsbCkgYW5kIGEgbWFwIG9mIHNpemVzIGluZGV4ZWQgYnlcclxuICAgICAqICAgICBrZXkgKHplcm8gaWYgdGhlIGtleSBjYW5ub3QgYmUgZm91bmQpLlxyXG4gICAgICovXHJcbiAgICBJbmRleGVkRGJSZW1vdGVEb2N1bWVudENhY2hlLnByb3RvdHlwZS5nZXRTaXplZEVudHJpZXMgPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24sIGRvY3VtZW50S2V5cykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIHJlc3VsdHMgPSBudWxsYWJsZU1heWJlRG9jdW1lbnRNYXAoKTtcclxuICAgICAgICB2YXIgc2l6ZU1hcCA9IG5ldyBTb3J0ZWRNYXAoRG9jdW1lbnRLZXkuY29tcGFyYXRvcik7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZm9yRWFjaERiRW50cnkodHJhbnNhY3Rpb24sIGRvY3VtZW50S2V5cywgZnVuY3Rpb24gKGtleSwgZGJSZW1vdGVEb2MpIHtcclxuICAgICAgICAgICAgdmFyIGRvYyA9IF90aGlzLm1heWJlRGVjb2RlRG9jdW1lbnQoZGJSZW1vdGVEb2MpO1xyXG4gICAgICAgICAgICBpZiAoZG9jKSB7XHJcbiAgICAgICAgICAgICAgICByZXN1bHRzID0gcmVzdWx0cy5pbnNlcnQoa2V5LCBkb2MpO1xyXG4gICAgICAgICAgICAgICAgc2l6ZU1hcCA9IHNpemVNYXAuaW5zZXJ0KGtleSwgZGJEb2N1bWVudFNpemUoZGJSZW1vdGVEb2MpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJlc3VsdHMgPSByZXN1bHRzLmluc2VydChrZXksIG51bGwpO1xyXG4gICAgICAgICAgICAgICAgc2l6ZU1hcCA9IHNpemVNYXAuaW5zZXJ0KGtleSwgMCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KS5uZXh0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHsgbWF5YmVEb2N1bWVudHM6IHJlc3VsdHMsIHNpemVNYXA6IHNpemVNYXAgfTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBJbmRleGVkRGJSZW1vdGVEb2N1bWVudENhY2hlLnByb3RvdHlwZS5mb3JFYWNoRGJFbnRyeSA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwgZG9jdW1lbnRLZXlzLCBjYWxsYmFjaykge1xyXG4gICAgICAgIGlmIChkb2N1bWVudEtleXMuaXNFbXB0eSgpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgcmFuZ2UgPSBJREJLZXlSYW5nZS5ib3VuZChkb2N1bWVudEtleXMuZmlyc3QoKS5wYXRoLnRvQXJyYXkoKSwgZG9jdW1lbnRLZXlzLmxhc3QoKS5wYXRoLnRvQXJyYXkoKSk7XHJcbiAgICAgICAgdmFyIGtleUl0ZXIgPSBkb2N1bWVudEtleXMuZ2V0SXRlcmF0b3IoKTtcclxuICAgICAgICB2YXIgbmV4dEtleSA9IGtleUl0ZXIuZ2V0TmV4dCgpO1xyXG4gICAgICAgIHJldHVybiByZW1vdGVEb2N1bWVudHNTdG9yZSh0cmFuc2FjdGlvbilcclxuICAgICAgICAgICAgLml0ZXJhdGUoeyByYW5nZTogcmFuZ2UgfSwgZnVuY3Rpb24gKHBvdGVudGlhbEtleVJhdywgZGJSZW1vdGVEb2MsIGNvbnRyb2wpIHtcclxuICAgICAgICAgICAgdmFyIHBvdGVudGlhbEtleSA9IERvY3VtZW50S2V5LmZyb21TZWdtZW50cyhwb3RlbnRpYWxLZXlSYXcpO1xyXG4gICAgICAgICAgICAvLyBHbyB0aHJvdWdoIGtleXMgbm90IGZvdW5kIGluIGNhY2hlLlxyXG4gICAgICAgICAgICB3aGlsZSAobmV4dEtleSAmJiBEb2N1bWVudEtleS5jb21wYXJhdG9yKG5leHRLZXksIHBvdGVudGlhbEtleSkgPCAwKSB7XHJcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhuZXh0S2V5LCBudWxsKTtcclxuICAgICAgICAgICAgICAgIG5leHRLZXkgPSBrZXlJdGVyLmdldE5leHQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAobmV4dEtleSAmJiBuZXh0S2V5LmlzRXF1YWwocG90ZW50aWFsS2V5KSkge1xyXG4gICAgICAgICAgICAgICAgLy8gS2V5IGZvdW5kIGluIGNhY2hlLlxyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2sobmV4dEtleSwgZGJSZW1vdGVEb2MpO1xyXG4gICAgICAgICAgICAgICAgbmV4dEtleSA9IGtleUl0ZXIuaGFzTmV4dCgpID8ga2V5SXRlci5nZXROZXh0KCkgOiBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIFNraXAgdG8gdGhlIG5leHQga2V5IChpZiB0aGVyZSBpcyBvbmUpLlxyXG4gICAgICAgICAgICBpZiAobmV4dEtleSkge1xyXG4gICAgICAgICAgICAgICAgY29udHJvbC5za2lwKG5leHRLZXkucGF0aC50b0FycmF5KCkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY29udHJvbC5kb25lKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAubmV4dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIC8vIFRoZSByZXN0IG9mIHRoZSBrZXlzIGFyZSBub3QgaW4gdGhlIGNhY2hlLiBPbmUgY2FzZSB3aGVyZSBgaXRlcmF0ZWBcclxuICAgICAgICAgICAgLy8gYWJvdmUgd29uJ3QgZ28gdGhyb3VnaCB0aGVtIGlzIHdoZW4gdGhlIGNhY2hlIGlzIGVtcHR5LlxyXG4gICAgICAgICAgICB3aGlsZSAobmV4dEtleSkge1xyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2sobmV4dEtleSwgbnVsbCk7XHJcbiAgICAgICAgICAgICAgICBuZXh0S2V5ID0ga2V5SXRlci5oYXNOZXh0KCkgPyBrZXlJdGVyLmdldE5leHQoKSA6IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBJbmRleGVkRGJSZW1vdGVEb2N1bWVudENhY2hlLnByb3RvdHlwZS5nZXREb2N1bWVudHNNYXRjaGluZ1F1ZXJ5ID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCBxdWVyeSwgc2luY2VSZWFkVGltZSkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgYXNzZXJ0KCFxdWVyeS5pc0NvbGxlY3Rpb25Hcm91cFF1ZXJ5KCksICdDb2xsZWN0aW9uR3JvdXAgcXVlcmllcyBzaG91bGQgYmUgaGFuZGxlZCBpbiBMb2NhbERvY3VtZW50c1ZpZXcnKTtcclxuICAgICAgICB2YXIgcmVzdWx0cyA9IGRvY3VtZW50TWFwKCk7XHJcbiAgICAgICAgdmFyIGltbWVkaWF0ZUNoaWxkcmVuUGF0aExlbmd0aCA9IHF1ZXJ5LnBhdGgubGVuZ3RoICsgMTtcclxuICAgICAgICB2YXIgaXRlcmF0aW9uT3B0aW9ucyA9IHt9O1xyXG4gICAgICAgIGlmIChzaW5jZVJlYWRUaW1lLmlzRXF1YWwoU25hcHNob3RWZXJzaW9uLk1JTikpIHtcclxuICAgICAgICAgICAgLy8gRG9jdW1lbnRzIGFyZSBvcmRlcmVkIGJ5IGtleSwgc28gd2UgY2FuIHVzZSBhIHByZWZpeCBzY2FuIHRvIG5hcnJvd1xyXG4gICAgICAgICAgICAvLyBkb3duIHRoZSBkb2N1bWVudHMgd2UgbmVlZCB0byBtYXRjaCB0aGUgcXVlcnkgYWdhaW5zdC5cclxuICAgICAgICAgICAgdmFyIHN0YXJ0S2V5ID0gcXVlcnkucGF0aC50b0FycmF5KCk7XHJcbiAgICAgICAgICAgIGl0ZXJhdGlvbk9wdGlvbnMucmFuZ2UgPSBJREJLZXlSYW5nZS5sb3dlckJvdW5kKHN0YXJ0S2V5KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIEV4ZWN1dGUgYW4gaW5kZXgtZnJlZSBxdWVyeSBhbmQgZmlsdGVyIGJ5IHJlYWQgdGltZS4gVGhpcyBpcyBzYWZlXHJcbiAgICAgICAgICAgIC8vIHNpbmNlIGFsbCBkb2N1bWVudCBjaGFuZ2VzIHRvIHF1ZXJpZXMgdGhhdCBoYXZlIGFcclxuICAgICAgICAgICAgLy8gbGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbiAoYHNpbmNlUmVhZFRpbWVgKSBoYXZlIGEgcmVhZCB0aW1lIHNldC5cclxuICAgICAgICAgICAgdmFyIGNvbGxlY3Rpb25LZXkgPSBxdWVyeS5wYXRoLnRvQXJyYXkoKTtcclxuICAgICAgICAgICAgdmFyIHJlYWRUaW1lS2V5ID0gdGhpcy5zZXJpYWxpemVyLnRvRGJUaW1lc3RhbXBLZXkoc2luY2VSZWFkVGltZSk7XHJcbiAgICAgICAgICAgIGl0ZXJhdGlvbk9wdGlvbnMucmFuZ2UgPSBJREJLZXlSYW5nZS5sb3dlckJvdW5kKFtjb2xsZWN0aW9uS2V5LCByZWFkVGltZUtleV0sIFxyXG4gICAgICAgICAgICAvKiBvcGVuPSAqLyB0cnVlKTtcclxuICAgICAgICAgICAgaXRlcmF0aW9uT3B0aW9ucy5pbmRleCA9IERiUmVtb3RlRG9jdW1lbnQuY29sbGVjdGlvblJlYWRUaW1lSW5kZXg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZW1vdGVEb2N1bWVudHNTdG9yZSh0cmFuc2FjdGlvbilcclxuICAgICAgICAgICAgLml0ZXJhdGUoaXRlcmF0aW9uT3B0aW9ucywgZnVuY3Rpb24gKGtleSwgZGJSZW1vdGVEb2MsIGNvbnRyb2wpIHtcclxuICAgICAgICAgICAgLy8gVGhlIHF1ZXJ5IGlzIGFjdHVhbGx5IHJldHVybmluZyBhbnkgcGF0aCB0aGF0IHN0YXJ0cyB3aXRoIHRoZSBxdWVyeVxyXG4gICAgICAgICAgICAvLyBwYXRoIHByZWZpeCB3aGljaCBtYXkgaW5jbHVkZSBkb2N1bWVudHMgaW4gc3ViY29sbGVjdGlvbnMuIEZvclxyXG4gICAgICAgICAgICAvLyBleGFtcGxlLCBhIHF1ZXJ5IG9uICdyb29tcycgd2lsbCByZXR1cm4gcm9vbXMvYWJjL21lc3NhZ2VzL3h5eCBidXQgd2VcclxuICAgICAgICAgICAgLy8gc2hvdWxkbid0IG1hdGNoIGl0LiBGaXggdGhpcyBieSBkaXNjYXJkaW5nIHJvd3Mgd2l0aCBkb2N1bWVudCBrZXlzXHJcbiAgICAgICAgICAgIC8vIG1vcmUgdGhhbiBvbmUgc2VnbWVudCBsb25nZXIgdGhhbiB0aGUgcXVlcnkgcGF0aC5cclxuICAgICAgICAgICAgaWYgKGtleS5sZW5ndGggIT09IGltbWVkaWF0ZUNoaWxkcmVuUGF0aExlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciBtYXliZURvYyA9IF90aGlzLnNlcmlhbGl6ZXIuZnJvbURiUmVtb3RlRG9jdW1lbnQoZGJSZW1vdGVEb2MpO1xyXG4gICAgICAgICAgICBpZiAoIXF1ZXJ5LnBhdGguaXNQcmVmaXhPZihtYXliZURvYy5rZXkucGF0aCkpIHtcclxuICAgICAgICAgICAgICAgIGNvbnRyb2wuZG9uZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKG1heWJlRG9jIGluc3RhbmNlb2YgRG9jdW1lbnQgJiYgcXVlcnkubWF0Y2hlcyhtYXliZURvYykpIHtcclxuICAgICAgICAgICAgICAgIHJlc3VsdHMgPSByZXN1bHRzLmluc2VydChtYXliZURvYy5rZXksIG1heWJlRG9jKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIHJlc3VsdHM7IH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0aGUgc2V0IG9mIGRvY3VtZW50cyB0aGF0IGhhdmUgYmVlbiB1cGRhdGVkIHNpbmNlIHRoZSBzcGVjaWZpZWQgcmVhZFxyXG4gICAgICogdGltZS5cclxuICAgICAqL1xyXG4gICAgLy8gUE9SVElORyBOT1RFOiBUaGlzIGlzIG9ubHkgdXNlZCBmb3IgbXVsdGktdGFiIHN5bmNocm9uaXphdGlvbi5cclxuICAgIEluZGV4ZWREYlJlbW90ZURvY3VtZW50Q2FjaGUucHJvdG90eXBlLmdldE5ld0RvY3VtZW50Q2hhbmdlcyA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwgc2luY2VSZWFkVGltZSkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIGNoYW5nZWREb2NzID0gbWF5YmVEb2N1bWVudE1hcCgpO1xyXG4gICAgICAgIHZhciBsYXN0UmVhZFRpbWUgPSB0aGlzLnNlcmlhbGl6ZXIudG9EYlRpbWVzdGFtcEtleShzaW5jZVJlYWRUaW1lKTtcclxuICAgICAgICB2YXIgZG9jdW1lbnRzU3RvcmUgPSByZW1vdGVEb2N1bWVudHNTdG9yZSh0cmFuc2FjdGlvbik7XHJcbiAgICAgICAgdmFyIHJhbmdlID0gSURCS2V5UmFuZ2UubG93ZXJCb3VuZChsYXN0UmVhZFRpbWUsIHRydWUpO1xyXG4gICAgICAgIHJldHVybiBkb2N1bWVudHNTdG9yZVxyXG4gICAgICAgICAgICAuaXRlcmF0ZSh7IGluZGV4OiBEYlJlbW90ZURvY3VtZW50LnJlYWRUaW1lSW5kZXgsIHJhbmdlOiByYW5nZSB9LCBmdW5jdGlvbiAoXywgZGJSZW1vdGVEb2MpIHtcclxuICAgICAgICAgICAgLy8gVW5saWtlIGBnZXRFbnRyeSgpYCBhbmQgb3RoZXJzLCBgZ2V0TmV3RG9jdW1lbnRDaGFuZ2VzKClgIHBhcnNlc1xyXG4gICAgICAgICAgICAvLyB0aGUgZG9jdW1lbnRzIGRpcmVjdGx5IHNpbmNlIHdlIHdhbnQgdG8ga2VlcCBzZW50aW5lbCBkZWxldGVzLlxyXG4gICAgICAgICAgICB2YXIgZG9jID0gX3RoaXMuc2VyaWFsaXplci5mcm9tRGJSZW1vdGVEb2N1bWVudChkYlJlbW90ZURvYyk7XHJcbiAgICAgICAgICAgIGNoYW5nZWREb2NzID0gY2hhbmdlZERvY3MuaW5zZXJ0KGRvYy5rZXksIGRvYyk7XHJcbiAgICAgICAgICAgIGxhc3RSZWFkVGltZSA9IGRiUmVtb3RlRG9jLnJlYWRUaW1lO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIGNoYW5nZWREb2NzOiBjaGFuZ2VkRG9jcyxcclxuICAgICAgICAgICAgICAgIHJlYWRUaW1lOiBfdGhpcy5zZXJpYWxpemVyLmZyb21EYlRpbWVzdGFtcEtleShsYXN0UmVhZFRpbWUpXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSBsYXN0IGRvY3VtZW50IHRoYXQgaGFzIGNoYW5nZWQsIGFzIHdlbGwgYXMgdGhlIHJlYWQgdGltZSBvZiB0aGVcclxuICAgICAqIGxhc3QgY2hhbmdlLiBJZiBubyBkb2N1bWVudCBoYXMgY2hhbmdlZCwgcmV0dXJucyBTbmFwc2hvdFZlcnNpb24uTUlOLlxyXG4gICAgICovXHJcbiAgICAvLyBQT1JUSU5HIE5PVEU6IFRoaXMgaXMgb25seSB1c2VkIGZvciBtdWx0aS10YWIgc3luY2hyb25pemF0aW9uLlxyXG4gICAgSW5kZXhlZERiUmVtb3RlRG9jdW1lbnRDYWNoZS5wcm90b3R5cGUuZ2V0TGFzdERvY3VtZW50Q2hhbmdlID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgZG9jdW1lbnRzU3RvcmUgPSByZW1vdGVEb2N1bWVudHNTdG9yZSh0cmFuc2FjdGlvbik7XHJcbiAgICAgICAgLy8gSWYgdGhlcmUgYXJlIG5vIGV4aXN0aW5nIGVudHJpZXMsIHdlIHJldHVybiBTbmFwc2hvdFZlcnNpb24uTUlOLlxyXG4gICAgICAgIHZhciByZWFkVGltZSA9IFNuYXBzaG90VmVyc2lvbi5NSU47XHJcbiAgICAgICAgdmFyIGNoYW5nZWREb2M7XHJcbiAgICAgICAgcmV0dXJuIGRvY3VtZW50c1N0b3JlXHJcbiAgICAgICAgICAgIC5pdGVyYXRlKHsgaW5kZXg6IERiUmVtb3RlRG9jdW1lbnQucmVhZFRpbWVJbmRleCwgcmV2ZXJzZTogdHJ1ZSB9LCBmdW5jdGlvbiAoa2V5LCBkYlJlbW90ZURvYywgY29udHJvbCkge1xyXG4gICAgICAgICAgICBjaGFuZ2VkRG9jID0gX3RoaXMuc2VyaWFsaXplci5mcm9tRGJSZW1vdGVEb2N1bWVudChkYlJlbW90ZURvYyk7XHJcbiAgICAgICAgICAgIGlmIChkYlJlbW90ZURvYy5yZWFkVGltZSkge1xyXG4gICAgICAgICAgICAgICAgcmVhZFRpbWUgPSBfdGhpcy5zZXJpYWxpemVyLmZyb21EYlRpbWVzdGFtcEtleShkYlJlbW90ZURvYy5yZWFkVGltZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29udHJvbC5kb25lKCk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4geyBjaGFuZ2VkRG9jOiBjaGFuZ2VkRG9jLCByZWFkVGltZTogcmVhZFRpbWUgfTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBJbmRleGVkRGJSZW1vdGVEb2N1bWVudENhY2hlLnByb3RvdHlwZS5uZXdDaGFuZ2VCdWZmZXIgPSBmdW5jdGlvbiAob3B0aW9ucykge1xyXG4gICAgICAgIHJldHVybiBuZXcgSW5kZXhlZERiUmVtb3RlRG9jdW1lbnRDYWNoZS5SZW1vdGVEb2N1bWVudENoYW5nZUJ1ZmZlcih0aGlzLCAhIW9wdGlvbnMgJiYgb3B0aW9ucy50cmFja1JlbW92YWxzKTtcclxuICAgIH07XHJcbiAgICBJbmRleGVkRGJSZW1vdGVEb2N1bWVudENhY2hlLnByb3RvdHlwZS5nZXRTaXplID0gZnVuY3Rpb24gKHR4bikge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldE1ldGFkYXRhKHR4bikubmV4dChmdW5jdGlvbiAobWV0YWRhdGEpIHsgcmV0dXJuIG1ldGFkYXRhLmJ5dGVTaXplOyB9KTtcclxuICAgIH07XHJcbiAgICBJbmRleGVkRGJSZW1vdGVEb2N1bWVudENhY2hlLnByb3RvdHlwZS5nZXRNZXRhZGF0YSA9IGZ1bmN0aW9uICh0eG4pIHtcclxuICAgICAgICByZXR1cm4gZG9jdW1lbnRHbG9iYWxTdG9yZSh0eG4pXHJcbiAgICAgICAgICAgIC5nZXQoRGJSZW1vdGVEb2N1bWVudEdsb2JhbC5rZXkpXHJcbiAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uIChtZXRhZGF0YSkge1xyXG4gICAgICAgICAgICBhc3NlcnQoISFtZXRhZGF0YSwgJ01pc3NpbmcgZG9jdW1lbnQgY2FjaGUgbWV0YWRhdGEnKTtcclxuICAgICAgICAgICAgcmV0dXJuIG1ldGFkYXRhO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIEluZGV4ZWREYlJlbW90ZURvY3VtZW50Q2FjaGUucHJvdG90eXBlLnNldE1ldGFkYXRhID0gZnVuY3Rpb24gKHR4biwgbWV0YWRhdGEpIHtcclxuICAgICAgICByZXR1cm4gZG9jdW1lbnRHbG9iYWxTdG9yZSh0eG4pLnB1dChEYlJlbW90ZURvY3VtZW50R2xvYmFsLmtleSwgbWV0YWRhdGEpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogRGVjb2RlcyBgcmVtb3RlRG9jYCBhbmQgcmV0dXJucyB0aGUgZG9jdW1lbnQgKG9yIG51bGwsIGlmIHRoZSBkb2N1bWVudFxyXG4gICAgICogY29ycmVzcG9uZHMgdG8gdGhlIGZvcm1hdCB1c2VkIGZvciBzZW50aW5lbCBkZWxldGVzKS5cclxuICAgICAqL1xyXG4gICAgSW5kZXhlZERiUmVtb3RlRG9jdW1lbnRDYWNoZS5wcm90b3R5cGUubWF5YmVEZWNvZGVEb2N1bWVudCA9IGZ1bmN0aW9uIChkYlJlbW90ZURvYykge1xyXG4gICAgICAgIGlmIChkYlJlbW90ZURvYykge1xyXG4gICAgICAgICAgICB2YXIgZG9jID0gdGhpcy5zZXJpYWxpemVyLmZyb21EYlJlbW90ZURvY3VtZW50KGRiUmVtb3RlRG9jKTtcclxuICAgICAgICAgICAgaWYgKGRvYyBpbnN0YW5jZW9mIE5vRG9jdW1lbnQgJiZcclxuICAgICAgICAgICAgICAgIGRvYy52ZXJzaW9uLmlzRXF1YWwoU25hcHNob3RWZXJzaW9uLmZvckRlbGV0ZWREb2MoKSkpIHtcclxuICAgICAgICAgICAgICAgIC8vIFRoZSBkb2N1bWVudCBpcyBhIHNlbnRpbmVsIHJlbW92YWwgYW5kIHNob3VsZCBvbmx5IGJlIHVzZWQgaW4gdGhlXHJcbiAgICAgICAgICAgICAgICAvLyBgZ2V0TmV3RG9jdW1lbnRDaGFuZ2VzKClgLlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGRvYztcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBIYW5kbGVzIHRoZSBkZXRhaWxzIG9mIGFkZGluZyBhbmQgdXBkYXRpbmcgZG9jdW1lbnRzIGluIHRoZSBJbmRleGVkRGJSZW1vdGVEb2N1bWVudENhY2hlLlxyXG4gICAgICpcclxuICAgICAqIFVubGlrZSB0aGUgTWVtb3J5UmVtb3RlRG9jdW1lbnRDaGFuZ2VCdWZmZXIsIHRoZSBJbmRleGVkRGIgaW1wbGVtZW50YXRpb24gY29tcHV0ZXMgdGhlIHNpemVcclxuICAgICAqIGRlbHRhIGZvciBhbGwgc3VibWl0dGVkIGNoYW5nZXMuIFRoaXMgYXZvaWRzIGhhdmluZyB0byByZS1yZWFkIGFsbCBkb2N1bWVudHMgZnJvbSBJbmRleGVkRGJcclxuICAgICAqIHdoZW4gd2UgYXBwbHkgdGhlIGNoYW5nZXMuXHJcbiAgICAgKi9cclxuICAgIEluZGV4ZWREYlJlbW90ZURvY3VtZW50Q2FjaGUuUmVtb3RlRG9jdW1lbnRDaGFuZ2VCdWZmZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICAgICAgdHNsaWIuX19leHRlbmRzKGNsYXNzXzEsIF9zdXBlcik7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQHBhcmFtIGRvY3VtZW50Q2FjaGUgVGhlIEluZGV4ZWREYlJlbW90ZURvY3VtZW50Q2FjaGUgdG8gYXBwbHkgdGhlIGNoYW5nZXMgdG8uXHJcbiAgICAgICAgICogQHBhcmFtIHRyYWNrUmVtb3ZhbHMgV2hldGhlciB0byBjcmVhdGUgc2VudGluZWwgZGVsZXRlcyB0aGF0IGNhbiBiZSB0cmFja2VkIGJ5XHJcbiAgICAgICAgICogYGdldE5ld0RvY3VtZW50Q2hhbmdlcygpYC5cclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBjbGFzc18xKGRvY3VtZW50Q2FjaGUsIHRyYWNrUmVtb3ZhbHMpIHtcclxuICAgICAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcclxuICAgICAgICAgICAgX3RoaXMuZG9jdW1lbnRDYWNoZSA9IGRvY3VtZW50Q2FjaGU7XHJcbiAgICAgICAgICAgIF90aGlzLnRyYWNrUmVtb3ZhbHMgPSB0cmFja1JlbW92YWxzO1xyXG4gICAgICAgICAgICAvLyBBIG1hcCBvZiBkb2N1bWVudCBzaXplcyBwcmlvciB0byBhcHBseWluZyB0aGUgY2hhbmdlcyBpbiB0aGlzIGJ1ZmZlci5cclxuICAgICAgICAgICAgX3RoaXMuZG9jdW1lbnRTaXplcyA9IG5ldyBPYmplY3RNYXAoZnVuY3Rpb24gKGtleSkgeyByZXR1cm4ga2V5LnRvU3RyaW5nKCk7IH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNsYXNzXzEucHJvdG90eXBlLmFwcGx5Q2hhbmdlcyA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbikge1xyXG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgICAgICB2YXIgcHJvbWlzZXMgPSBbXTtcclxuICAgICAgICAgICAgdmFyIHNpemVEZWx0YSA9IDA7XHJcbiAgICAgICAgICAgIHZhciBjb2xsZWN0aW9uUGFyZW50cyA9IG5ldyBTb3J0ZWRTZXQoZnVuY3Rpb24gKGwsIHIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBwcmltaXRpdmVDb21wYXJhdG9yKGwuY2Fub25pY2FsU3RyaW5nKCksIHIuY2Fub25pY2FsU3RyaW5nKCkpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdGhpcy5jaGFuZ2VzLmZvckVhY2goZnVuY3Rpb24gKGtleSwgbWF5YmVEb2N1bWVudCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHByZXZpb3VzU2l6ZSA9IF90aGlzLmRvY3VtZW50U2l6ZXMuZ2V0KGtleSk7XHJcbiAgICAgICAgICAgICAgICBhc3NlcnQocHJldmlvdXNTaXplICE9PSB1bmRlZmluZWQsIFwiQ2Fubm90IG1vZGlmeSBhIGRvY3VtZW50IHRoYXQgd2Fzbid0IHJlYWQgKGZvciBcIiArIGtleSArIFwiKVwiKTtcclxuICAgICAgICAgICAgICAgIGlmIChtYXliZURvY3VtZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXNzZXJ0KCFfdGhpcy5yZWFkVGltZS5pc0VxdWFsKFNuYXBzaG90VmVyc2lvbi5NSU4pLCAnQ2Fubm90IGFkZCBhIGRvY3VtZW50IHdpdGggYSByZWFkIHRpbWUgb2YgemVybycpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBkb2MgPSBfdGhpcy5kb2N1bWVudENhY2hlLnNlcmlhbGl6ZXIudG9EYlJlbW90ZURvY3VtZW50KG1heWJlRG9jdW1lbnQsIF90aGlzLnJlYWRUaW1lKTtcclxuICAgICAgICAgICAgICAgICAgICBjb2xsZWN0aW9uUGFyZW50cyA9IGNvbGxlY3Rpb25QYXJlbnRzLmFkZChrZXkucGF0aC5wb3BMYXN0KCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBzaXplID0gZGJEb2N1bWVudFNpemUoZG9jKTtcclxuICAgICAgICAgICAgICAgICAgICBzaXplRGVsdGEgKz0gc2l6ZSAtIHByZXZpb3VzU2l6ZTtcclxuICAgICAgICAgICAgICAgICAgICBwcm9taXNlcy5wdXNoKF90aGlzLmRvY3VtZW50Q2FjaGUuYWRkRW50cnkodHJhbnNhY3Rpb24sIGtleSwgZG9jKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBzaXplRGVsdGEgLT0gcHJldmlvdXNTaXplO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChfdGhpcy50cmFja1JlbW92YWxzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEluIG9yZGVyIHRvIHRyYWNrIHJlbW92YWxzLCB3ZSBzdG9yZSBhIFwic2VudGluZWwgZGVsZXRlXCIgaW4gdGhlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlbW90ZURvY3VtZW50Q2FjaGUuIFRoaXMgZW50cnkgaXMgcmVwcmVzZW50ZWQgYnkgYSBOb0RvY3VtZW50XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdpdGggYSB2ZXJzaW9uIG9mIDAgYW5kIGlnbm9yZWQgYnkgYG1heWJlRGVjb2RlRG9jdW1lbnQoKWAgYnV0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHByZXNlcnZlZCBpbiBgZ2V0TmV3RG9jdW1lbnRDaGFuZ2VzKClgLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGVsZXRlZERvYyA9IF90aGlzLmRvY3VtZW50Q2FjaGUuc2VyaWFsaXplci50b0RiUmVtb3RlRG9jdW1lbnQobmV3IE5vRG9jdW1lbnQoa2V5LCBTbmFwc2hvdFZlcnNpb24uZm9yRGVsZXRlZERvYygpKSwgX3RoaXMucmVhZFRpbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9taXNlcy5wdXNoKF90aGlzLmRvY3VtZW50Q2FjaGUuYWRkRW50cnkodHJhbnNhY3Rpb24sIGtleSwgZGVsZXRlZERvYykpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvbWlzZXMucHVzaChfdGhpcy5kb2N1bWVudENhY2hlLnJlbW92ZUVudHJ5KHRyYW5zYWN0aW9uLCBrZXkpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBjb2xsZWN0aW9uUGFyZW50cy5mb3JFYWNoKGZ1bmN0aW9uIChwYXJlbnQpIHtcclxuICAgICAgICAgICAgICAgIHByb21pc2VzLnB1c2goX3RoaXMuZG9jdW1lbnRDYWNoZS5pbmRleE1hbmFnZXIuYWRkVG9Db2xsZWN0aW9uUGFyZW50SW5kZXgodHJhbnNhY3Rpb24sIHBhcmVudCkpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcHJvbWlzZXMucHVzaCh0aGlzLmRvY3VtZW50Q2FjaGUudXBkYXRlTWV0YWRhdGEodHJhbnNhY3Rpb24sIHNpemVEZWx0YSkpO1xyXG4gICAgICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLndhaXRGb3IocHJvbWlzZXMpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgY2xhc3NfMS5wcm90b3R5cGUuZ2V0RnJvbUNhY2hlID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCBkb2N1bWVudEtleSkge1xyXG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgICAgICAvLyBSZWNvcmQgdGhlIHNpemUgb2YgZXZlcnl0aGluZyB3ZSBsb2FkIGZyb20gdGhlIGNhY2hlIHNvIHdlIGNhbiBjb21wdXRlIGEgZGVsdGEgbGF0ZXIuXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRvY3VtZW50Q2FjaGVcclxuICAgICAgICAgICAgICAgIC5nZXRTaXplZEVudHJ5KHRyYW5zYWN0aW9uLCBkb2N1bWVudEtleSlcclxuICAgICAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uIChnZXRSZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIGlmIChnZXRSZXN1bHQgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5kb2N1bWVudFNpemVzLnNldChkb2N1bWVudEtleSwgMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5kb2N1bWVudFNpemVzLnNldChkb2N1bWVudEtleSwgZ2V0UmVzdWx0LnNpemUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBnZXRSZXN1bHQubWF5YmVEb2N1bWVudDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBjbGFzc18xLnByb3RvdHlwZS5nZXRBbGxGcm9tQ2FjaGUgPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24sIGRvY3VtZW50S2V5cykge1xyXG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgICAgICAvLyBSZWNvcmQgdGhlIHNpemUgb2YgZXZlcnl0aGluZyB3ZSBsb2FkIGZyb20gdGhlIGNhY2hlIHNvIHdlIGNhbiBjb21wdXRlXHJcbiAgICAgICAgICAgIC8vIGEgZGVsdGEgbGF0ZXIuXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRvY3VtZW50Q2FjaGVcclxuICAgICAgICAgICAgICAgIC5nZXRTaXplZEVudHJpZXModHJhbnNhY3Rpb24sIGRvY3VtZW50S2V5cylcclxuICAgICAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG1heWJlRG9jdW1lbnRzID0gX2EubWF5YmVEb2N1bWVudHMsIHNpemVNYXAgPSBfYS5zaXplTWFwO1xyXG4gICAgICAgICAgICAgICAgLy8gTm90ZTogYGdldEFsbEZyb21DYWNoZWAgcmV0dXJucyB0d28gbWFwcyBpbnN0ZWFkIG9mIGEgc2luZ2xlIG1hcCBmcm9tXHJcbiAgICAgICAgICAgICAgICAvLyBrZXlzIHRvIGBEb2N1bWVudFNpemVFbnRyeWBzLiBUaGlzIGlzIHRvIGFsbG93IHJldHVybmluZyB0aGVcclxuICAgICAgICAgICAgICAgIC8vIGBOdWxsYWJsZU1heWJlRG9jdW1lbnRNYXBgIGRpcmVjdGx5LCB3aXRob3V0IGEgY29udmVyc2lvbi5cclxuICAgICAgICAgICAgICAgIHNpemVNYXAuZm9yRWFjaChmdW5jdGlvbiAoZG9jdW1lbnRLZXksIHNpemUpIHtcclxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5kb2N1bWVudFNpemVzLnNldChkb2N1bWVudEtleSwgc2l6ZSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBtYXliZURvY3VtZW50cztcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gY2xhc3NfMTtcclxuICAgIH0oUmVtb3RlRG9jdW1lbnRDaGFuZ2VCdWZmZXIpKTtcclxuICAgIHJldHVybiBJbmRleGVkRGJSZW1vdGVEb2N1bWVudENhY2hlO1xyXG59KCkpO1xyXG5mdW5jdGlvbiBkb2N1bWVudEdsb2JhbFN0b3JlKHR4bikge1xyXG4gICAgcmV0dXJuIEluZGV4ZWREYlBlcnNpc3RlbmNlLmdldFN0b3JlKHR4biwgRGJSZW1vdGVEb2N1bWVudEdsb2JhbC5zdG9yZSk7XHJcbn1cclxuLyoqXHJcbiAqIEhlbHBlciB0byBnZXQgYSB0eXBlZCBTaW1wbGVEYlN0b3JlIGZvciB0aGUgcmVtb3RlRG9jdW1lbnRzIG9iamVjdCBzdG9yZS5cclxuICovXHJcbmZ1bmN0aW9uIHJlbW90ZURvY3VtZW50c1N0b3JlKHR4bikge1xyXG4gICAgcmV0dXJuIEluZGV4ZWREYlBlcnNpc3RlbmNlLmdldFN0b3JlKHR4biwgRGJSZW1vdGVEb2N1bWVudC5zdG9yZSk7XHJcbn1cclxuZnVuY3Rpb24gZGJLZXkoZG9jS2V5KSB7XHJcbiAgICByZXR1cm4gZG9jS2V5LnBhdGgudG9BcnJheSgpO1xyXG59XHJcbi8qKlxyXG4gKiBSZXRydXNuIGFuIGFwcHJveGltYXRlIHNpemUgZm9yIHRoZSBnaXZlbiBkb2N1bWVudC5cclxuICovXHJcbmZ1bmN0aW9uIGRiRG9jdW1lbnRTaXplKGRvYykge1xyXG4gICAgdmFyIHZhbHVlO1xyXG4gICAgaWYgKGRvYy5kb2N1bWVudCkge1xyXG4gICAgICAgIHZhbHVlID0gZG9jLmRvY3VtZW50O1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoZG9jLnVua25vd25Eb2N1bWVudCkge1xyXG4gICAgICAgIHZhbHVlID0gZG9jLnVua25vd25Eb2N1bWVudDtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGRvYy5ub0RvY3VtZW50KSB7XHJcbiAgICAgICAgdmFsdWUgPSBkb2Mubm9Eb2N1bWVudDtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHRocm93IGZhaWwoJ1Vua25vd24gcmVtb3RlIGRvY3VtZW50IHR5cGUnKTtcclxuICAgIH1cclxuICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh2YWx1ZSkubGVuZ3RoO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQW4gaW4tbWVtb3J5IGltcGxlbWVudGF0aW9uIG9mIEluZGV4TWFuYWdlci5cclxuICovXHJcbnZhciBNZW1vcnlJbmRleE1hbmFnZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBNZW1vcnlJbmRleE1hbmFnZXIoKSB7XHJcbiAgICAgICAgdGhpcy5jb2xsZWN0aW9uUGFyZW50SW5kZXggPSBuZXcgTWVtb3J5Q29sbGVjdGlvblBhcmVudEluZGV4KCk7XHJcbiAgICB9XHJcbiAgICBNZW1vcnlJbmRleE1hbmFnZXIucHJvdG90eXBlLmFkZFRvQ29sbGVjdGlvblBhcmVudEluZGV4ID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCBjb2xsZWN0aW9uUGF0aCkge1xyXG4gICAgICAgIHRoaXMuY29sbGVjdGlvblBhcmVudEluZGV4LmFkZChjb2xsZWN0aW9uUGF0aCk7XHJcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5SW5kZXhNYW5hZ2VyLnByb3RvdHlwZS5nZXRDb2xsZWN0aW9uUGFyZW50cyA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwgY29sbGVjdGlvbklkKSB7XHJcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKHRoaXMuY29sbGVjdGlvblBhcmVudEluZGV4LmdldEVudHJpZXMoY29sbGVjdGlvbklkKSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIE1lbW9yeUluZGV4TWFuYWdlcjtcclxufSgpKTtcclxuLyoqXHJcbiAqIEludGVybmFsIGltcGxlbWVudGF0aW9uIG9mIHRoZSBjb2xsZWN0aW9uLXBhcmVudCBpbmRleCBleHBvc2VkIGJ5IE1lbW9yeUluZGV4TWFuYWdlci5cclxuICogQWxzbyB1c2VkIGZvciBpbi1tZW1vcnkgY2FjaGluZyBieSBJbmRleGVkRGJJbmRleE1hbmFnZXIgYW5kIGluaXRpYWwgaW5kZXggcG9wdWxhdGlvblxyXG4gKiBpbiBpbmRleGVkZGJfc2NoZW1hLnRzXHJcbiAqL1xyXG52YXIgTWVtb3J5Q29sbGVjdGlvblBhcmVudEluZGV4ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gTWVtb3J5Q29sbGVjdGlvblBhcmVudEluZGV4KCkge1xyXG4gICAgICAgIHRoaXMuaW5kZXggPSB7fTtcclxuICAgIH1cclxuICAgIC8vIFJldHVybnMgZmFsc2UgaWYgdGhlIGVudHJ5IGFscmVhZHkgZXhpc3RlZC5cclxuICAgIE1lbW9yeUNvbGxlY3Rpb25QYXJlbnRJbmRleC5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24gKGNvbGxlY3Rpb25QYXRoKSB7XHJcbiAgICAgICAgYXNzZXJ0KGNvbGxlY3Rpb25QYXRoLmxlbmd0aCAlIDIgPT09IDEsICdFeHBlY3RlZCBhIGNvbGxlY3Rpb24gcGF0aC4nKTtcclxuICAgICAgICB2YXIgY29sbGVjdGlvbklkID0gY29sbGVjdGlvblBhdGgubGFzdFNlZ21lbnQoKTtcclxuICAgICAgICB2YXIgcGFyZW50UGF0aCA9IGNvbGxlY3Rpb25QYXRoLnBvcExhc3QoKTtcclxuICAgICAgICB2YXIgZXhpc3RpbmdQYXJlbnRzID0gdGhpcy5pbmRleFtjb2xsZWN0aW9uSWRdIHx8XHJcbiAgICAgICAgICAgIG5ldyBTb3J0ZWRTZXQoUmVzb3VyY2VQYXRoLmNvbXBhcmF0b3IpO1xyXG4gICAgICAgIHZhciBhZGRlZCA9ICFleGlzdGluZ1BhcmVudHMuaGFzKHBhcmVudFBhdGgpO1xyXG4gICAgICAgIHRoaXMuaW5kZXhbY29sbGVjdGlvbklkXSA9IGV4aXN0aW5nUGFyZW50cy5hZGQocGFyZW50UGF0aCk7XHJcbiAgICAgICAgcmV0dXJuIGFkZGVkO1xyXG4gICAgfTtcclxuICAgIE1lbW9yeUNvbGxlY3Rpb25QYXJlbnRJbmRleC5wcm90b3R5cGUuaGFzID0gZnVuY3Rpb24gKGNvbGxlY3Rpb25QYXRoKSB7XHJcbiAgICAgICAgdmFyIGNvbGxlY3Rpb25JZCA9IGNvbGxlY3Rpb25QYXRoLmxhc3RTZWdtZW50KCk7XHJcbiAgICAgICAgdmFyIHBhcmVudFBhdGggPSBjb2xsZWN0aW9uUGF0aC5wb3BMYXN0KCk7XHJcbiAgICAgICAgdmFyIGV4aXN0aW5nUGFyZW50cyA9IHRoaXMuaW5kZXhbY29sbGVjdGlvbklkXTtcclxuICAgICAgICByZXR1cm4gZXhpc3RpbmdQYXJlbnRzICYmIGV4aXN0aW5nUGFyZW50cy5oYXMocGFyZW50UGF0aCk7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5Q29sbGVjdGlvblBhcmVudEluZGV4LnByb3RvdHlwZS5nZXRFbnRyaWVzID0gZnVuY3Rpb24gKGNvbGxlY3Rpb25JZCkge1xyXG4gICAgICAgIHZhciBwYXJlbnRQYXRocyA9IHRoaXMuaW5kZXhbY29sbGVjdGlvbklkXSB8fFxyXG4gICAgICAgICAgICBuZXcgU29ydGVkU2V0KFJlc291cmNlUGF0aC5jb21wYXJhdG9yKTtcclxuICAgICAgICByZXR1cm4gcGFyZW50UGF0aHMudG9BcnJheSgpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBNZW1vcnlDb2xsZWN0aW9uUGFyZW50SW5kZXg7XHJcbn0oKSk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogU2NoZW1hIFZlcnNpb24gZm9yIHRoZSBXZWIgY2xpZW50OlxyXG4gKiAxLiBJbml0aWFsIHZlcnNpb24gaW5jbHVkaW5nIE11dGF0aW9uIFF1ZXVlLCBRdWVyeSBDYWNoZSwgYW5kIFJlbW90ZSBEb2N1bWVudFxyXG4gKiAgICBDYWNoZVxyXG4gKiAyLiBVc2VkIHRvIGVuc3VyZSBhIHRhcmdldEdsb2JhbCBvYmplY3QgZXhpc3RzIGFuZCBhZGQgdGFyZ2V0Q291bnQgdG8gaXQuIE5vXHJcbiAqICAgIGxvbmdlciByZXF1aXJlZCBiZWNhdXNlIG1pZ3JhdGlvbiAzIHVuY29uZGl0aW9uYWxseSBjbGVhcnMgaXQuXHJcbiAqIDMuIERyb3BwZWQgYW5kIHJlLWNyZWF0ZWQgUXVlcnkgQ2FjaGUgdG8gZGVhbCB3aXRoIGNhY2hlIGNvcnJ1cHRpb24gcmVsYXRlZFxyXG4gKiAgICB0byBsaW1ibyByZXNvbHV0aW9uLiBBZGRyZXNzZXNcclxuICogICAgaHR0cHM6Ly9naXRodWIuY29tL2ZpcmViYXNlL2ZpcmViYXNlLWlvcy1zZGsvaXNzdWVzLzE1NDhcclxuICogNC4gTXVsdGktVGFiIFN1cHBvcnQuXHJcbiAqIDUuIFJlbW92YWwgb2YgaGVsZCB3cml0ZSBhY2tzLlxyXG4gKiA2LiBDcmVhdGUgZG9jdW1lbnQgZ2xvYmFsIGZvciB0cmFja2luZyBkb2N1bWVudCBjYWNoZSBzaXplLlxyXG4gKiA3LiBFbnN1cmUgZXZlcnkgY2FjaGVkIGRvY3VtZW50IGhhcyBhIHNlbnRpbmVsIHJvdyB3aXRoIGEgc2VxdWVuY2UgbnVtYmVyLlxyXG4gKiA4LiBBZGQgY29sbGVjdGlvbi1wYXJlbnQgaW5kZXggZm9yIENvbGxlY3Rpb24gR3JvdXAgcXVlcmllcy5cclxuICogOS4gQ2hhbmdlIFJlbW90ZURvY3VtZW50Q2hhbmdlcyBzdG9yZSB0byBiZSBrZXllZCBieSByZWFkVGltZSByYXRoZXIgdGhhblxyXG4gKiAgICBhbiBhdXRvLWluY3JlbWVudGluZyBJRC4gVGhpcyBpcyByZXF1aXJlZCBmb3IgSW5kZXgtRnJlZSBxdWVyaWVzLlxyXG4gKi9cclxudmFyIFNDSEVNQV9WRVJTSU9OID0gOTtcclxuLyoqIFBlcmZvcm1zIGRhdGFiYXNlIGNyZWF0aW9uIGFuZCBzY2hlbWEgdXBncmFkZXMuICovXHJcbnZhciBTY2hlbWFDb252ZXJ0ZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBTY2hlbWFDb252ZXJ0ZXIoc2VyaWFsaXplcikge1xyXG4gICAgICAgIHRoaXMuc2VyaWFsaXplciA9IHNlcmlhbGl6ZXI7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFBlcmZvcm1zIGRhdGFiYXNlIGNyZWF0aW9uIGFuZCBzY2hlbWEgdXBncmFkZXMuXHJcbiAgICAgKlxyXG4gICAgICogTm90ZSB0aGF0IGluIHByb2R1Y3Rpb24sIHRoaXMgbWV0aG9kIGlzIG9ubHkgZXZlciB1c2VkIHRvIHVwZ3JhZGUgdGhlIHNjaGVtYVxyXG4gICAgICogdG8gU0NIRU1BX1ZFUlNJT04uIERpZmZlcmVudCB2YWx1ZXMgb2YgdG9WZXJzaW9uIGFyZSBvbmx5IHVzZWQgZm9yIHRlc3RpbmdcclxuICAgICAqIGFuZCBsb2NhbCBmZWF0dXJlIGRldmVsb3BtZW50LlxyXG4gICAgICovXHJcbiAgICBTY2hlbWFDb252ZXJ0ZXIucHJvdG90eXBlLmNyZWF0ZU9yVXBncmFkZSA9IGZ1bmN0aW9uIChkYiwgdHhuLCBmcm9tVmVyc2lvbiwgdG9WZXJzaW9uKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBhc3NlcnQoZnJvbVZlcnNpb24gPCB0b1ZlcnNpb24gJiZcclxuICAgICAgICAgICAgZnJvbVZlcnNpb24gPj0gMCAmJlxyXG4gICAgICAgICAgICB0b1ZlcnNpb24gPD0gU0NIRU1BX1ZFUlNJT04sIFwiVW5leHBlY3RlZCBzY2hlbWEgdXBncmFkZSBmcm9tIHZcIiArIGZyb21WZXJzaW9uICsgXCIgdG8gdnt0b1ZlcnNpb259LlwiKTtcclxuICAgICAgICB2YXIgc2ltcGxlRGJUcmFuc2FjdGlvbiA9IG5ldyBTaW1wbGVEYlRyYW5zYWN0aW9uKHR4bik7XHJcbiAgICAgICAgaWYgKGZyb21WZXJzaW9uIDwgMSAmJiB0b1ZlcnNpb24gPj0gMSkge1xyXG4gICAgICAgICAgICBjcmVhdGVQcmltYXJ5Q2xpZW50U3RvcmUoZGIpO1xyXG4gICAgICAgICAgICBjcmVhdGVNdXRhdGlvblF1ZXVlKGRiKTtcclxuICAgICAgICAgICAgY3JlYXRlUXVlcnlDYWNoZShkYik7XHJcbiAgICAgICAgICAgIGNyZWF0ZVJlbW90ZURvY3VtZW50Q2FjaGUoZGIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBNaWdyYXRpb24gMiB0byBwb3B1bGF0ZSB0aGUgdGFyZ2V0R2xvYmFsIG9iamVjdCBubyBsb25nZXIgbmVlZGVkIHNpbmNlXHJcbiAgICAgICAgLy8gbWlncmF0aW9uIDMgdW5jb25kaXRpb25hbGx5IGNsZWFycyBpdC5cclxuICAgICAgICB2YXIgcCA9IFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICAgICAgaWYgKGZyb21WZXJzaW9uIDwgMyAmJiB0b1ZlcnNpb24gPj0gMykge1xyXG4gICAgICAgICAgICAvLyBCcmFuZCBuZXcgY2xpZW50cyBkb24ndCBuZWVkIHRvIGRyb3AgYW5kIHJlY3JlYXRlLS1vbmx5IGNsaWVudHMgdGhhdFxyXG4gICAgICAgICAgICAvLyBwb3RlbnRpYWxseSBoYXZlIGNvcnJ1cHQgZGF0YS5cclxuICAgICAgICAgICAgaWYgKGZyb21WZXJzaW9uICE9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBkcm9wUXVlcnlDYWNoZShkYik7XHJcbiAgICAgICAgICAgICAgICBjcmVhdGVRdWVyeUNhY2hlKGRiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBwID0gcC5uZXh0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIHdyaXRlRW1wdHlUYXJnZXRHbG9iYWxFbnRyeShzaW1wbGVEYlRyYW5zYWN0aW9uKTsgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChmcm9tVmVyc2lvbiA8IDQgJiYgdG9WZXJzaW9uID49IDQpIHtcclxuICAgICAgICAgICAgaWYgKGZyb21WZXJzaW9uICE9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBTY2hlbWEgdmVyc2lvbiAzIHVzZXMgYXV0by1nZW5lcmF0ZWQga2V5cyB0byBnZW5lcmF0ZSBnbG9iYWxseSB1bmlxdWVcclxuICAgICAgICAgICAgICAgIC8vIG11dGF0aW9uIGJhdGNoIElEcyAodGhpcyB3YXMgcHJldmlvdXNseSBlbnN1cmVkIGludGVybmFsbHkgYnkgdGhlXHJcbiAgICAgICAgICAgICAgICAvLyBjbGllbnQpLiBUbyBtaWdyYXRlIHRvIHRoZSBuZXcgc2NoZW1hLCB3ZSBoYXZlIHRvIHJlYWQgYWxsIG11dGF0aW9uc1xyXG4gICAgICAgICAgICAgICAgLy8gYW5kIHdyaXRlIHRoZW0gYmFjayBvdXQuIFdlIHByZXNlcnZlIHRoZSBleGlzdGluZyBiYXRjaCBJRHMgdG8gZ3VhcmFudGVlXHJcbiAgICAgICAgICAgICAgICAvLyBjb25zaXN0ZW5jeSB3aXRoIG90aGVyIG9iamVjdCBzdG9yZXMuIEFueSBmdXJ0aGVyIG11dGF0aW9uIGJhdGNoIElEcyB3aWxsXHJcbiAgICAgICAgICAgICAgICAvLyBiZSBhdXRvLWdlbmVyYXRlZC5cclxuICAgICAgICAgICAgICAgIHAgPSBwLm5leHQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB1cGdyYWRlTXV0YXRpb25CYXRjaFNjaGVtYUFuZE1pZ3JhdGVEYXRhKGRiLCBzaW1wbGVEYlRyYW5zYWN0aW9uKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHAgPSBwLm5leHQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgY3JlYXRlQ2xpZW50TWV0YWRhdGFTdG9yZShkYik7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZnJvbVZlcnNpb24gPCA1ICYmIHRvVmVyc2lvbiA+PSA1KSB7XHJcbiAgICAgICAgICAgIHAgPSBwLm5leHQoZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMucmVtb3ZlQWNrbm93bGVkZ2VkTXV0YXRpb25zKHNpbXBsZURiVHJhbnNhY3Rpb24pOyB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGZyb21WZXJzaW9uIDwgNiAmJiB0b1ZlcnNpb24gPj0gNikge1xyXG4gICAgICAgICAgICBwID0gcC5uZXh0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGNyZWF0ZURvY3VtZW50R2xvYmFsU3RvcmUoZGIpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLmFkZERvY3VtZW50R2xvYmFsKHNpbXBsZURiVHJhbnNhY3Rpb24pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGZyb21WZXJzaW9uIDwgNyAmJiB0b1ZlcnNpb24gPj0gNykge1xyXG4gICAgICAgICAgICBwID0gcC5uZXh0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLmVuc3VyZVNlcXVlbmNlTnVtYmVycyhzaW1wbGVEYlRyYW5zYWN0aW9uKTsgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChmcm9tVmVyc2lvbiA8IDggJiYgdG9WZXJzaW9uID49IDgpIHtcclxuICAgICAgICAgICAgcCA9IHAubmV4dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuY3JlYXRlQ29sbGVjdGlvblBhcmVudEluZGV4KGRiLCBzaW1wbGVEYlRyYW5zYWN0aW9uKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChmcm9tVmVyc2lvbiA8IDkgJiYgdG9WZXJzaW9uID49IDkpIHtcclxuICAgICAgICAgICAgcCA9IHAubmV4dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBNdWx0aS1UYWIgdXNlZCB0byBtYW5hZ2UgaXRzIG93biBjaGFuZ2Vsb2csIGJ1dCB0aGlzIGhhcyBiZWVuIG1vdmVkXHJcbiAgICAgICAgICAgICAgICAvLyB0byB0aGUgRGJSZW1vdGVEb2N1bWVudCBvYmplY3Qgc3RvcmUgaXRzZWxmLiBTaW5jZSB0aGUgcHJldmlvdXMgY2hhbmdlXHJcbiAgICAgICAgICAgICAgICAvLyBsb2cgb25seSBjb250YWluZWQgdHJhbnNpZW50IGRhdGEsIHdlIGNhbiBkcm9wIGl0cyBvYmplY3Qgc3RvcmUuXHJcbiAgICAgICAgICAgICAgICBkcm9wUmVtb3RlRG9jdW1lbnRDaGFuZ2VzU3RvcmUoZGIpO1xyXG4gICAgICAgICAgICAgICAgY3JlYXRlUmVtb3RlRG9jdW1lbnRSZWFkVGltZUluZGV4KHR4bik7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcDtcclxuICAgIH07XHJcbiAgICBTY2hlbWFDb252ZXJ0ZXIucHJvdG90eXBlLmFkZERvY3VtZW50R2xvYmFsID0gZnVuY3Rpb24gKHR4bikge1xyXG4gICAgICAgIHZhciBieXRlQ291bnQgPSAwO1xyXG4gICAgICAgIHJldHVybiB0eG5cclxuICAgICAgICAgICAgLnN0b3JlKERiUmVtb3RlRG9jdW1lbnQuc3RvcmUpXHJcbiAgICAgICAgICAgIC5pdGVyYXRlKGZ1bmN0aW9uIChfLCBkb2MpIHtcclxuICAgICAgICAgICAgYnl0ZUNvdW50ICs9IGRiRG9jdW1lbnRTaXplKGRvYyk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgbWV0YWRhdGEgPSBuZXcgRGJSZW1vdGVEb2N1bWVudEdsb2JhbChieXRlQ291bnQpO1xyXG4gICAgICAgICAgICByZXR1cm4gdHhuXHJcbiAgICAgICAgICAgICAgICAuc3RvcmUoRGJSZW1vdGVEb2N1bWVudEdsb2JhbC5zdG9yZSlcclxuICAgICAgICAgICAgICAgIC5wdXQoRGJSZW1vdGVEb2N1bWVudEdsb2JhbC5rZXksIG1ldGFkYXRhKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBTY2hlbWFDb252ZXJ0ZXIucHJvdG90eXBlLnJlbW92ZUFja25vd2xlZGdlZE11dGF0aW9ucyA9IGZ1bmN0aW9uICh0eG4pIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhciBxdWV1ZXNTdG9yZSA9IHR4bi5zdG9yZShEYk11dGF0aW9uUXVldWUuc3RvcmUpO1xyXG4gICAgICAgIHZhciBtdXRhdGlvbnNTdG9yZSA9IHR4bi5zdG9yZShEYk11dGF0aW9uQmF0Y2guc3RvcmUpO1xyXG4gICAgICAgIHJldHVybiBxdWV1ZXNTdG9yZS5sb2FkQWxsKCkubmV4dChmdW5jdGlvbiAocXVldWVzKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UuZm9yRWFjaChxdWV1ZXMsIGZ1bmN0aW9uIChxdWV1ZSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHJhbmdlID0gSURCS2V5UmFuZ2UuYm91bmQoW3F1ZXVlLnVzZXJJZCwgQkFUQ0hJRF9VTktOT1dOXSwgW3F1ZXVlLnVzZXJJZCwgcXVldWUubGFzdEFja25vd2xlZGdlZEJhdGNoSWRdKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBtdXRhdGlvbnNTdG9yZVxyXG4gICAgICAgICAgICAgICAgICAgIC5sb2FkQWxsKERiTXV0YXRpb25CYXRjaC51c2VyTXV0YXRpb25zSW5kZXgsIHJhbmdlKVxyXG4gICAgICAgICAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uIChkYkJhdGNoZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLmZvckVhY2goZGJCYXRjaGVzLCBmdW5jdGlvbiAoZGJCYXRjaCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhc3NlcnQoZGJCYXRjaC51c2VySWQgPT09IHF1ZXVlLnVzZXJJZCwgXCJDYW5ub3QgcHJvY2VzcyBiYXRjaCBcIiArIGRiQmF0Y2guYmF0Y2hJZCArIFwiIGZyb20gdW5leHBlY3RlZCB1c2VyXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYmF0Y2ggPSBfdGhpcy5zZXJpYWxpemVyLmZyb21EYk11dGF0aW9uQmF0Y2goZGJCYXRjaCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZW1vdmVNdXRhdGlvbkJhdGNoKHR4biwgcXVldWUudXNlcklkLCBiYXRjaCkubmV4dChmdW5jdGlvbiAoKSB7IH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogRW5zdXJlcyB0aGF0IGV2ZXJ5IGRvY3VtZW50IGluIHRoZSByZW1vdGUgZG9jdW1lbnQgY2FjaGUgaGFzIGEgY29ycmVzcG9uZGluZyBzZW50aW5lbCByb3dcclxuICAgICAqIHdpdGggYSBzZXF1ZW5jZSBudW1iZXIuIE1pc3Npbmcgcm93cyBhcmUgZ2l2ZW4gdGhlIG1vc3QgcmVjZW50bHkgdXNlZCBzZXF1ZW5jZSBudW1iZXIuXHJcbiAgICAgKi9cclxuICAgIFNjaGVtYUNvbnZlcnRlci5wcm90b3R5cGUuZW5zdXJlU2VxdWVuY2VOdW1iZXJzID0gZnVuY3Rpb24gKHR4bikge1xyXG4gICAgICAgIHZhciBkb2N1bWVudFRhcmdldFN0b3JlID0gdHhuLnN0b3JlKERiVGFyZ2V0RG9jdW1lbnQuc3RvcmUpO1xyXG4gICAgICAgIHZhciBkb2N1bWVudHNTdG9yZSA9IHR4bi5zdG9yZShEYlJlbW90ZURvY3VtZW50LnN0b3JlKTtcclxuICAgICAgICByZXR1cm4gZ2V0SGlnaGVzdExpc3RlblNlcXVlbmNlTnVtYmVyKHR4bikubmV4dChmdW5jdGlvbiAoY3VycmVudFNlcXVlbmNlTnVtYmVyKSB7XHJcbiAgICAgICAgICAgIHZhciB3cml0ZVNlbnRpbmVsS2V5ID0gZnVuY3Rpb24gKHBhdGgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBkb2N1bWVudFRhcmdldFN0b3JlLnB1dChuZXcgRGJUYXJnZXREb2N1bWVudCgwLCBlbmNvZGUocGF0aCksIGN1cnJlbnRTZXF1ZW5jZU51bWJlcikpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB2YXIgcHJvbWlzZXMgPSBbXTtcclxuICAgICAgICAgICAgcmV0dXJuIGRvY3VtZW50c1N0b3JlXHJcbiAgICAgICAgICAgICAgICAuaXRlcmF0ZShmdW5jdGlvbiAoa2V5LCBkb2MpIHtcclxuICAgICAgICAgICAgICAgIHZhciBwYXRoID0gbmV3IFJlc291cmNlUGF0aChrZXkpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGRvY1NlbnRpbmVsS2V5ID0gc2VudGluZWxLZXkocGF0aCk7XHJcbiAgICAgICAgICAgICAgICBwcm9taXNlcy5wdXNoKGRvY3VtZW50VGFyZ2V0U3RvcmUuZ2V0KGRvY1NlbnRpbmVsS2V5KS5uZXh0KGZ1bmN0aW9uIChtYXliZVNlbnRpbmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFtYXliZVNlbnRpbmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB3cml0ZVNlbnRpbmVsS2V5KHBhdGgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKCkgeyByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLndhaXRGb3IocHJvbWlzZXMpOyB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBTY2hlbWFDb252ZXJ0ZXIucHJvdG90eXBlLmNyZWF0ZUNvbGxlY3Rpb25QYXJlbnRJbmRleCA9IGZ1bmN0aW9uIChkYiwgdHhuKSB7XHJcbiAgICAgICAgLy8gQ3JlYXRlIHRoZSBpbmRleC5cclxuICAgICAgICBkYi5jcmVhdGVPYmplY3RTdG9yZShEYkNvbGxlY3Rpb25QYXJlbnQuc3RvcmUsIHtcclxuICAgICAgICAgICAga2V5UGF0aDogRGJDb2xsZWN0aW9uUGFyZW50LmtleVBhdGhcclxuICAgICAgICB9KTtcclxuICAgICAgICB2YXIgY29sbGVjdGlvblBhcmVudHNTdG9yZSA9IHR4bi5zdG9yZShEYkNvbGxlY3Rpb25QYXJlbnQuc3RvcmUpO1xyXG4gICAgICAgIC8vIEhlbHBlciB0byBhZGQgYW4gaW5kZXggZW50cnkgaWZmIHdlIGhhdmVuJ3QgYWxyZWFkeSB3cml0dGVuIGl0LlxyXG4gICAgICAgIHZhciBjYWNoZSA9IG5ldyBNZW1vcnlDb2xsZWN0aW9uUGFyZW50SW5kZXgoKTtcclxuICAgICAgICB2YXIgYWRkRW50cnkgPSBmdW5jdGlvbiAoY29sbGVjdGlvblBhdGgpIHtcclxuICAgICAgICAgICAgaWYgKGNhY2hlLmFkZChjb2xsZWN0aW9uUGF0aCkpIHtcclxuICAgICAgICAgICAgICAgIHZhciBjb2xsZWN0aW9uSWQgPSBjb2xsZWN0aW9uUGF0aC5sYXN0U2VnbWVudCgpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHBhcmVudFBhdGggPSBjb2xsZWN0aW9uUGF0aC5wb3BMYXN0KCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY29sbGVjdGlvblBhcmVudHNTdG9yZS5wdXQoe1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbGxlY3Rpb25JZDogY29sbGVjdGlvbklkLFxyXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudDogZW5jb2RlKHBhcmVudFBhdGgpXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgLy8gSW5kZXggZXhpc3RpbmcgcmVtb3RlIGRvY3VtZW50cy5cclxuICAgICAgICByZXR1cm4gdHhuXHJcbiAgICAgICAgICAgIC5zdG9yZShEYlJlbW90ZURvY3VtZW50LnN0b3JlKVxyXG4gICAgICAgICAgICAuaXRlcmF0ZSh7IGtleXNPbmx5OiB0cnVlIH0sIGZ1bmN0aW9uIChwYXRoU2VnbWVudHMsIF8pIHtcclxuICAgICAgICAgICAgdmFyIHBhdGggPSBuZXcgUmVzb3VyY2VQYXRoKHBhdGhTZWdtZW50cyk7XHJcbiAgICAgICAgICAgIHJldHVybiBhZGRFbnRyeShwYXRoLnBvcExhc3QoKSk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAvLyBJbmRleCBleGlzdGluZyBtdXRhdGlvbnMuXHJcbiAgICAgICAgICAgIHJldHVybiB0eG5cclxuICAgICAgICAgICAgICAgIC5zdG9yZShEYkRvY3VtZW50TXV0YXRpb24uc3RvcmUpXHJcbiAgICAgICAgICAgICAgICAuaXRlcmF0ZSh7IGtleXNPbmx5OiB0cnVlIH0sIGZ1bmN0aW9uIChfYSwgXykge1xyXG4gICAgICAgICAgICAgICAgdmFyIHVzZXJJRCA9IF9hWzBdLCBlbmNvZGVkUGF0aCA9IF9hWzFdLCBiYXRjaElkID0gX2FbMl07XHJcbiAgICAgICAgICAgICAgICB2YXIgcGF0aCA9IGRlY29kZShlbmNvZGVkUGF0aCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYWRkRW50cnkocGF0aC5wb3BMYXN0KCkpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gU2NoZW1hQ29udmVydGVyO1xyXG59KCkpO1xyXG5mdW5jdGlvbiBzZW50aW5lbEtleShwYXRoKSB7XHJcbiAgICByZXR1cm4gWzAsIGVuY29kZShwYXRoKV07XHJcbn1cclxuLyoqXHJcbiAqIFdyYXBwZXIgY2xhc3MgdG8gc3RvcmUgdGltZXN0YW1wcyAoc2Vjb25kcyBhbmQgbmFub3MpIGluIEluZGV4ZWREYiBvYmplY3RzLlxyXG4gKi9cclxudmFyIERiVGltZXN0YW1wID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gRGJUaW1lc3RhbXAoc2Vjb25kcywgbmFub3NlY29uZHMpIHtcclxuICAgICAgICB0aGlzLnNlY29uZHMgPSBzZWNvbmRzO1xyXG4gICAgICAgIHRoaXMubmFub3NlY29uZHMgPSBuYW5vc2Vjb25kcztcclxuICAgIH1cclxuICAgIHJldHVybiBEYlRpbWVzdGFtcDtcclxufSgpKTtcclxuLyoqXHJcbiAqIEEgc2luZ2xldG9uIG9iamVjdCB0byBiZSBzdG9yZWQgaW4gdGhlICdvd25lcicgc3RvcmUgaW4gSW5kZXhlZERiLlxyXG4gKlxyXG4gKiBBIGdpdmVuIGRhdGFiYXNlIGNhbiBoYXZlIGEgc2luZ2xlIHByaW1hcnkgdGFiIGFzc2lnbmVkIGF0IGEgZ2l2ZW4gdGltZS4gVGhhdFxyXG4gKiB0YWIgbXVzdCB2YWxpZGF0ZSB0aGF0IGl0IGlzIHN0aWxsIGhvbGRpbmcgdGhlIHByaW1hcnkgbGVhc2UgYmVmb3JlIGV2ZXJ5XHJcbiAqIG9wZXJhdGlvbiB0aGF0IHJlcXVpcmVzIGxvY2tlZCBhY2Nlc3MuIFRoZSBwcmltYXJ5IHRhYiBzaG91bGQgcmVndWxhcmx5XHJcbiAqIHdyaXRlIGFuIHVwZGF0ZWQgdGltZXN0YW1wIHRvIHRoaXMgbGVhc2UgdG8gcHJldmVudCBvdGhlciB0YWJzIGZyb21cclxuICogXCJzdGVhbGluZ1wiIHRoZSBwcmltYXJ5IGxlYXNlXHJcbiAqL1xyXG52YXIgRGJQcmltYXJ5Q2xpZW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gRGJQcmltYXJ5Q2xpZW50KG93bmVySWQsIFxyXG4gICAgLyoqIFdoZXRoZXIgdG8gYWxsb3cgc2hhcmVkIGFjY2VzcyBmcm9tIG11bHRpcGxlIHRhYnMuICovXHJcbiAgICBhbGxvd1RhYlN5bmNocm9uaXphdGlvbiwgbGVhc2VUaW1lc3RhbXBNcykge1xyXG4gICAgICAgIHRoaXMub3duZXJJZCA9IG93bmVySWQ7XHJcbiAgICAgICAgdGhpcy5hbGxvd1RhYlN5bmNocm9uaXphdGlvbiA9IGFsbG93VGFiU3luY2hyb25pemF0aW9uO1xyXG4gICAgICAgIHRoaXMubGVhc2VUaW1lc3RhbXBNcyA9IGxlYXNlVGltZXN0YW1wTXM7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIE5hbWUgb2YgdGhlIEluZGV4ZWREYiBvYmplY3Qgc3RvcmUuXHJcbiAgICAgKlxyXG4gICAgICogTm90ZSB0aGF0IHRoZSBuYW1lICdvd25lcicgaXMgY2hvc2VuIHRvIGVuc3VyZSBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eSB3aXRoXHJcbiAgICAgKiBvbGRlciBjbGllbnRzIHRoYXQgb25seSBzdXBwb3J0ZWQgc2luZ2xlIGxvY2tlZCBhY2Nlc3MgdG8gdGhlIHBlcnNpc3RlbmNlXHJcbiAgICAgKiBsYXllci5cclxuICAgICAqL1xyXG4gICAgRGJQcmltYXJ5Q2xpZW50LnN0b3JlID0gJ293bmVyJztcclxuICAgIC8qKlxyXG4gICAgICogVGhlIGtleSBzdHJpbmcgdXNlZCBmb3IgdGhlIHNpbmdsZSBvYmplY3QgdGhhdCBleGlzdHMgaW4gdGhlXHJcbiAgICAgKiBEYlByaW1hcnlDbGllbnQgc3RvcmUuXHJcbiAgICAgKi9cclxuICAgIERiUHJpbWFyeUNsaWVudC5rZXkgPSAnb3duZXInO1xyXG4gICAgcmV0dXJuIERiUHJpbWFyeUNsaWVudDtcclxufSgpKTtcclxuZnVuY3Rpb24gY3JlYXRlUHJpbWFyeUNsaWVudFN0b3JlKGRiKSB7XHJcbiAgICBkYi5jcmVhdGVPYmplY3RTdG9yZShEYlByaW1hcnlDbGllbnQuc3RvcmUpO1xyXG59XHJcbi8qKlxyXG4gKiBBbiBvYmplY3QgdG8gYmUgc3RvcmVkIGluIHRoZSAnbXV0YXRpb25RdWV1ZXMnIHN0b3JlIGluIEluZGV4ZWREYi5cclxuICpcclxuICogRWFjaCB1c2VyIGdldHMgYSBzaW5nbGUgcXVldWUgb2YgTXV0YXRpb25CYXRjaGVzIHRvIGFwcGx5IHRvIHRoZSBzZXJ2ZXIuXHJcbiAqIERiTXV0YXRpb25RdWV1ZSB0cmFja3MgdGhlIG1ldGFkYXRhIGFib3V0IHRoZSBxdWV1ZS5cclxuICovXHJcbnZhciBEYk11dGF0aW9uUXVldWUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBEYk11dGF0aW9uUXVldWUoXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBub3JtYWxpemVkIHVzZXIgSUQgdG8gd2hpY2ggdGhpcyBxdWV1ZSBiZWxvbmdzLlxyXG4gICAgICovXHJcbiAgICB1c2VySWQsIFxyXG4gICAgLyoqXHJcbiAgICAgKiBBbiBpZGVudGlmaWVyIGZvciB0aGUgaGlnaGVzdCBudW1iZXJlZCBiYXRjaCB0aGF0IGhhcyBiZWVuIGFja25vd2xlZGdlZFxyXG4gICAgICogYnkgdGhlIHNlcnZlci4gQWxsIE11dGF0aW9uQmF0Y2hlcyBpbiB0aGlzIHF1ZXVlIHdpdGggYmF0Y2hJZHMgbGVzc1xyXG4gICAgICogdGhhbiBvciBlcXVhbCB0byB0aGlzIHZhbHVlIGFyZSBjb25zaWRlcmVkIHRvIGhhdmUgYmVlbiBhY2tub3dsZWRnZWQgYnlcclxuICAgICAqIHRoZSBzZXJ2ZXIuXHJcbiAgICAgKlxyXG4gICAgICogTk9URTogdGhpcyBpcyBkZXByZWNhdGVkIGFuZCBubyBsb25nZXIgdXNlZCBieSB0aGUgY29kZS5cclxuICAgICAqL1xyXG4gICAgbGFzdEFja25vd2xlZGdlZEJhdGNoSWQsIFxyXG4gICAgLyoqXHJcbiAgICAgKiBBIHN0cmVhbSB0b2tlbiB0aGF0IHdhcyBwcmV2aW91c2x5IHNlbnQgYnkgdGhlIHNlcnZlci5cclxuICAgICAqXHJcbiAgICAgKiBTZWUgU3RyZWFtaW5nV3JpdGVSZXF1ZXN0IGluIGRhdGFzdG9yZS5wcm90byBmb3IgbW9yZSBkZXRhaWxzIGFib3V0XHJcbiAgICAgKiB1c2FnZS5cclxuICAgICAqXHJcbiAgICAgKiBBZnRlciBzZW5kaW5nIHRoaXMgdG9rZW4sIGVhcmxpZXIgdG9rZW5zIG1heSBub3QgYmUgdXNlZCBhbnltb3JlIHNvXHJcbiAgICAgKiBvbmx5IGEgc2luZ2xlIHN0cmVhbSB0b2tlbiBpcyByZXRhaW5lZC5cclxuICAgICAqL1xyXG4gICAgbGFzdFN0cmVhbVRva2VuKSB7XHJcbiAgICAgICAgdGhpcy51c2VySWQgPSB1c2VySWQ7XHJcbiAgICAgICAgdGhpcy5sYXN0QWNrbm93bGVkZ2VkQmF0Y2hJZCA9IGxhc3RBY2tub3dsZWRnZWRCYXRjaElkO1xyXG4gICAgICAgIHRoaXMubGFzdFN0cmVhbVRva2VuID0gbGFzdFN0cmVhbVRva2VuO1xyXG4gICAgfVxyXG4gICAgLyoqIE5hbWUgb2YgdGhlIEluZGV4ZWREYiBvYmplY3Qgc3RvcmUuICAqL1xyXG4gICAgRGJNdXRhdGlvblF1ZXVlLnN0b3JlID0gJ211dGF0aW9uUXVldWVzJztcclxuICAgIC8qKiBLZXlzIGFyZSBhdXRvbWF0aWNhbGx5IGFzc2lnbmVkIHZpYSB0aGUgdXNlcklkIHByb3BlcnR5LiAqL1xyXG4gICAgRGJNdXRhdGlvblF1ZXVlLmtleVBhdGggPSAndXNlcklkJztcclxuICAgIHJldHVybiBEYk11dGF0aW9uUXVldWU7XHJcbn0oKSk7XHJcbi8qKlxyXG4gKiBBbiBvYmplY3QgdG8gYmUgc3RvcmVkIGluIHRoZSAnbXV0YXRpb25zJyBzdG9yZSBpbiBJbmRleGVkRGIuXHJcbiAqXHJcbiAqIFJlcHJlc2VudHMgYSBiYXRjaCBvZiB1c2VyLWxldmVsIG11dGF0aW9ucyBpbnRlbmRlZCB0byBiZSBzZW50IHRvIHRoZSBzZXJ2ZXJcclxuICogaW4gYSBzaW5nbGUgd3JpdGUuIEVhY2ggdXNlci1sZXZlbCBiYXRjaCBnZXRzIGEgc2VwYXJhdGUgRGJNdXRhdGlvbkJhdGNoXHJcbiAqIHdpdGggYSBuZXcgYmF0Y2hJZC5cclxuICovXHJcbnZhciBEYk11dGF0aW9uQmF0Y2ggPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBEYk11dGF0aW9uQmF0Y2goXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBub3JtYWxpemVkIHVzZXIgSUQgdG8gd2hpY2ggdGhpcyBiYXRjaCBiZWxvbmdzLlxyXG4gICAgICovXHJcbiAgICB1c2VySWQsIFxyXG4gICAgLyoqXHJcbiAgICAgKiBBbiBpZGVudGlmaWVyIGZvciB0aGlzIGJhdGNoLCBhbGxvY2F0ZWQgdXNpbmcgYW4gYXV0by1nZW5lcmF0ZWQga2V5LlxyXG4gICAgICovXHJcbiAgICBiYXRjaElkLCBcclxuICAgIC8qKlxyXG4gICAgICogVGhlIGxvY2FsIHdyaXRlIHRpbWUgb2YgdGhlIGJhdGNoLCBzdG9yZWQgYXMgbWlsbGlzZWNvbmRzIHNpbmNlIHRoZVxyXG4gICAgICogZXBvY2guXHJcbiAgICAgKi9cclxuICAgIGxvY2FsV3JpdGVUaW1lTXMsIFxyXG4gICAgLyoqXHJcbiAgICAgKiBBIGxpc3Qgb2YgXCJtdXRhdGlvbnNcIiB0aGF0IHJlcHJlc2VudCBhIHBhcnRpYWwgYmFzZSBzdGF0ZSBmcm9tIHdoZW4gdGhpc1xyXG4gICAgICogd3JpdGUgYmF0Y2ggd2FzIGluaXRpYWxseSBjcmVhdGVkLiBEdXJpbmcgbG9jYWwgYXBwbGljYXRpb24gb2YgdGhlIHdyaXRlXHJcbiAgICAgKiBiYXRjaCwgdGhlc2UgYmFzZU11dGF0aW9ucyBhcmUgYXBwbGllZCBwcmlvciB0byB0aGUgcmVhbCB3cml0ZXMgaW4gb3JkZXJcclxuICAgICAqIHRvIG92ZXJyaWRlIGNlcnRhaW4gZG9jdW1lbnQgZmllbGRzIGZyb20gdGhlIHJlbW90ZSBkb2N1bWVudCBjYWNoZS4gVGhpc1xyXG4gICAgICogaXMgbmVjZXNzYXJ5IGluIHRoZSBjYXNlIG9mIG5vbi1pZGVtcG90ZW50IHdyaXRlcyAoZS5nLiBgaW5jcmVtZW50KClgXHJcbiAgICAgKiB0cmFuc2Zvcm1zKSB0byBtYWtlIHN1cmUgdGhhdCB0aGUgbG9jYWwgdmlldyBvZiB0aGUgbW9kaWZpZWQgZG9jdW1lbnRzXHJcbiAgICAgKiBkb2Vzbid0IGZsaWNrZXIgaWYgdGhlIHJlbW90ZSBkb2N1bWVudCBjYWNoZSByZWNlaXZlcyB0aGUgcmVzdWx0IG9mIHRoZVxyXG4gICAgICogbm9uLWlkZW1wb3RlbnQgd3JpdGUgYmVmb3JlIHRoZSB3cml0ZSBpcyByZW1vdmVkIGZyb20gdGhlIHF1ZXVlLlxyXG4gICAgICpcclxuICAgICAqIFRoZXNlIG11dGF0aW9ucyBhcmUgbmV2ZXIgc2VudCB0byB0aGUgYmFja2VuZC5cclxuICAgICAqL1xyXG4gICAgYmFzZU11dGF0aW9ucywgXHJcbiAgICAvKipcclxuICAgICAqIEEgbGlzdCBvZiBtdXRhdGlvbnMgdG8gYXBwbHkuIEFsbCBtdXRhdGlvbnMgd2lsbCBiZSBhcHBsaWVkIGF0b21pY2FsbHkuXHJcbiAgICAgKlxyXG4gICAgICogTXV0YXRpb25zIGFyZSBzZXJpYWxpemVkIHZpYSBKc29uUHJvdG9TZXJpYWxpemVyLnRvTXV0YXRpb24oKS5cclxuICAgICAqL1xyXG4gICAgbXV0YXRpb25zKSB7XHJcbiAgICAgICAgdGhpcy51c2VySWQgPSB1c2VySWQ7XHJcbiAgICAgICAgdGhpcy5iYXRjaElkID0gYmF0Y2hJZDtcclxuICAgICAgICB0aGlzLmxvY2FsV3JpdGVUaW1lTXMgPSBsb2NhbFdyaXRlVGltZU1zO1xyXG4gICAgICAgIHRoaXMuYmFzZU11dGF0aW9ucyA9IGJhc2VNdXRhdGlvbnM7XHJcbiAgICAgICAgdGhpcy5tdXRhdGlvbnMgPSBtdXRhdGlvbnM7XHJcbiAgICB9XHJcbiAgICAvKiogTmFtZSBvZiB0aGUgSW5kZXhlZERiIG9iamVjdCBzdG9yZS4gICovXHJcbiAgICBEYk11dGF0aW9uQmF0Y2guc3RvcmUgPSAnbXV0YXRpb25zJztcclxuICAgIC8qKiBLZXlzIGFyZSBhdXRvbWF0aWNhbGx5IGFzc2lnbmVkIHZpYSB0aGUgdXNlcklkLCBiYXRjaElkIHByb3BlcnRpZXMuICovXHJcbiAgICBEYk11dGF0aW9uQmF0Y2gua2V5UGF0aCA9ICdiYXRjaElkJztcclxuICAgIC8qKiBUaGUgaW5kZXggbmFtZSBmb3IgbG9va3VwIG9mIG11dGF0aW9ucyBieSB1c2VyLiAqL1xyXG4gICAgRGJNdXRhdGlvbkJhdGNoLnVzZXJNdXRhdGlvbnNJbmRleCA9ICd1c2VyTXV0YXRpb25zSW5kZXgnO1xyXG4gICAgLyoqIFRoZSB1c2VyIG11dGF0aW9ucyBpbmRleCBpcyBrZXllZCBieSBbdXNlcklkLCBiYXRjaElkXSBwYWlycy4gKi9cclxuICAgIERiTXV0YXRpb25CYXRjaC51c2VyTXV0YXRpb25zS2V5UGF0aCA9IFsndXNlcklkJywgJ2JhdGNoSWQnXTtcclxuICAgIHJldHVybiBEYk11dGF0aW9uQmF0Y2g7XHJcbn0oKSk7XHJcbmZ1bmN0aW9uIGNyZWF0ZU11dGF0aW9uUXVldWUoZGIpIHtcclxuICAgIGRiLmNyZWF0ZU9iamVjdFN0b3JlKERiTXV0YXRpb25RdWV1ZS5zdG9yZSwge1xyXG4gICAgICAgIGtleVBhdGg6IERiTXV0YXRpb25RdWV1ZS5rZXlQYXRoXHJcbiAgICB9KTtcclxuICAgIHZhciBtdXRhdGlvbkJhdGNoZXNTdG9yZSA9IGRiLmNyZWF0ZU9iamVjdFN0b3JlKERiTXV0YXRpb25CYXRjaC5zdG9yZSwge1xyXG4gICAgICAgIGtleVBhdGg6IERiTXV0YXRpb25CYXRjaC5rZXlQYXRoLFxyXG4gICAgICAgIGF1dG9JbmNyZW1lbnQ6IHRydWVcclxuICAgIH0pO1xyXG4gICAgbXV0YXRpb25CYXRjaGVzU3RvcmUuY3JlYXRlSW5kZXgoRGJNdXRhdGlvbkJhdGNoLnVzZXJNdXRhdGlvbnNJbmRleCwgRGJNdXRhdGlvbkJhdGNoLnVzZXJNdXRhdGlvbnNLZXlQYXRoLCB7IHVuaXF1ZTogdHJ1ZSB9KTtcclxuICAgIGRiLmNyZWF0ZU9iamVjdFN0b3JlKERiRG9jdW1lbnRNdXRhdGlvbi5zdG9yZSk7XHJcbn1cclxuLyoqXHJcbiAqIFVwZ3JhZGUgZnVuY3Rpb24gdG8gbWlncmF0ZSB0aGUgJ211dGF0aW9ucycgc3RvcmUgZnJvbSBWMSB0byBWMy4gTG9hZHNcclxuICogYW5kIHJld3JpdGVzIGFsbCBkYXRhLlxyXG4gKi9cclxuZnVuY3Rpb24gdXBncmFkZU11dGF0aW9uQmF0Y2hTY2hlbWFBbmRNaWdyYXRlRGF0YShkYiwgdHhuKSB7XHJcbiAgICB2YXIgdjFNdXRhdGlvbnNTdG9yZSA9IHR4bi5zdG9yZShEYk11dGF0aW9uQmF0Y2guc3RvcmUpO1xyXG4gICAgcmV0dXJuIHYxTXV0YXRpb25zU3RvcmUubG9hZEFsbCgpLm5leHQoZnVuY3Rpb24gKGV4aXN0aW5nTXV0YXRpb25zKSB7XHJcbiAgICAgICAgZGIuZGVsZXRlT2JqZWN0U3RvcmUoRGJNdXRhdGlvbkJhdGNoLnN0b3JlKTtcclxuICAgICAgICB2YXIgbXV0YXRpb25zU3RvcmUgPSBkYi5jcmVhdGVPYmplY3RTdG9yZShEYk11dGF0aW9uQmF0Y2guc3RvcmUsIHtcclxuICAgICAgICAgICAga2V5UGF0aDogRGJNdXRhdGlvbkJhdGNoLmtleVBhdGgsXHJcbiAgICAgICAgICAgIGF1dG9JbmNyZW1lbnQ6IHRydWVcclxuICAgICAgICB9KTtcclxuICAgICAgICBtdXRhdGlvbnNTdG9yZS5jcmVhdGVJbmRleChEYk11dGF0aW9uQmF0Y2gudXNlck11dGF0aW9uc0luZGV4LCBEYk11dGF0aW9uQmF0Y2gudXNlck11dGF0aW9uc0tleVBhdGgsIHsgdW5pcXVlOiB0cnVlIH0pO1xyXG4gICAgICAgIHZhciB2M011dGF0aW9uc1N0b3JlID0gdHhuLnN0b3JlKERiTXV0YXRpb25CYXRjaC5zdG9yZSk7XHJcbiAgICAgICAgdmFyIHdyaXRlQWxsID0gZXhpc3RpbmdNdXRhdGlvbnMubWFwKGZ1bmN0aW9uIChtdXRhdGlvbikge1xyXG4gICAgICAgICAgICByZXR1cm4gdjNNdXRhdGlvbnNTdG9yZS5wdXQobXV0YXRpb24pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2Uud2FpdEZvcih3cml0ZUFsbCk7XHJcbiAgICB9KTtcclxufVxyXG4vKipcclxuICogQW4gb2JqZWN0IHRvIGJlIHN0b3JlZCBpbiB0aGUgJ2RvY3VtZW50TXV0YXRpb25zJyBzdG9yZSBpbiBJbmRleGVkRGIuXHJcbiAqXHJcbiAqIEEgbWFudWFsbHkgbWFpbnRhaW5lZCBpbmRleCBvZiBhbGwgdGhlIG11dGF0aW9uIGJhdGNoZXMgdGhhdCBhZmZlY3QgYSBnaXZlblxyXG4gKiBkb2N1bWVudCBrZXkuIFRoZSByb3dzIGluIHRoaXMgdGFibGUgYXJlIHJlZmVyZW5jZXMgYmFzZWQgb24gdGhlIGNvbnRlbnRzIG9mXHJcbiAqIERiTXV0YXRpb25CYXRjaC5tdXRhdGlvbnMuXHJcbiAqL1xyXG52YXIgRGJEb2N1bWVudE11dGF0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gRGJEb2N1bWVudE11dGF0aW9uKCkge1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGVzIGEgW3VzZXJJZF0ga2V5IGZvciB1c2UgaW4gdGhlIERiRG9jdW1lbnRNdXRhdGlvbnMgaW5kZXggdG8gaXRlcmF0ZVxyXG4gICAgICogb3ZlciBhbGwgb2YgYSB1c2VyJ3MgZG9jdW1lbnQgbXV0YXRpb25zLlxyXG4gICAgICovXHJcbiAgICBEYkRvY3VtZW50TXV0YXRpb24ucHJlZml4Rm9yVXNlciA9IGZ1bmN0aW9uICh1c2VySWQpIHtcclxuICAgICAgICByZXR1cm4gW3VzZXJJZF07XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGVzIGEgW3VzZXJJZCwgZW5jb2RlZFBhdGhdIGtleSBmb3IgdXNlIGluIHRoZSBEYkRvY3VtZW50TXV0YXRpb25zXHJcbiAgICAgKiBpbmRleCB0byBpdGVyYXRlIG92ZXIgYWxsIGF0IGRvY3VtZW50IG11dGF0aW9ucyBmb3IgYSBnaXZlbiBwYXRoIG9yIGxvd2VyLlxyXG4gICAgICovXHJcbiAgICBEYkRvY3VtZW50TXV0YXRpb24ucHJlZml4Rm9yUGF0aCA9IGZ1bmN0aW9uICh1c2VySWQsIHBhdGgpIHtcclxuICAgICAgICByZXR1cm4gW3VzZXJJZCwgZW5jb2RlKHBhdGgpXTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYSBmdWxsIGluZGV4IGtleSBvZiBbdXNlcklkLCBlbmNvZGVkUGF0aCwgYmF0Y2hJZF0gZm9yIGluc2VydGluZ1xyXG4gICAgICogYW5kIGRlbGV0aW5nIGludG8gdGhlIERiRG9jdW1lbnRNdXRhdGlvbnMgaW5kZXguXHJcbiAgICAgKi9cclxuICAgIERiRG9jdW1lbnRNdXRhdGlvbi5rZXkgPSBmdW5jdGlvbiAodXNlcklkLCBwYXRoLCBiYXRjaElkKSB7XHJcbiAgICAgICAgcmV0dXJuIFt1c2VySWQsIGVuY29kZShwYXRoKSwgYmF0Y2hJZF07XHJcbiAgICB9O1xyXG4gICAgRGJEb2N1bWVudE11dGF0aW9uLnN0b3JlID0gJ2RvY3VtZW50TXV0YXRpb25zJztcclxuICAgIC8qKlxyXG4gICAgICogQmVjYXVzZSB3ZSBzdG9yZSBhbGwgdGhlIHVzZWZ1bCBpbmZvcm1hdGlvbiBmb3IgdGhpcyBzdG9yZSBpbiB0aGUga2V5LFxyXG4gICAgICogdGhlcmUgaXMgbm8gdXNlZnVsIGluZm9ybWF0aW9uIHRvIHN0b3JlIGFzIHRoZSB2YWx1ZS4gVGhlIHJhdyAodW5lbmNvZGVkKVxyXG4gICAgICogcGF0aCBjYW5ub3QgYmUgc3RvcmVkIGJlY2F1c2UgSW5kZXhlZERiIGRvZXNuJ3Qgc3RvcmUgcHJvdG90eXBlXHJcbiAgICAgKiBpbmZvcm1hdGlvbi5cclxuICAgICAqL1xyXG4gICAgRGJEb2N1bWVudE11dGF0aW9uLlBMQUNFSE9MREVSID0gbmV3IERiRG9jdW1lbnRNdXRhdGlvbigpO1xyXG4gICAgcmV0dXJuIERiRG9jdW1lbnRNdXRhdGlvbjtcclxufSgpKTtcclxuZnVuY3Rpb24gY3JlYXRlUmVtb3RlRG9jdW1lbnRDYWNoZShkYikge1xyXG4gICAgZGIuY3JlYXRlT2JqZWN0U3RvcmUoRGJSZW1vdGVEb2N1bWVudC5zdG9yZSk7XHJcbn1cclxuLyoqXHJcbiAqIFJlcHJlc2VudHMgdGhlIGtub3duIGFic2VuY2Ugb2YgYSBkb2N1bWVudCBhdCBhIHBhcnRpY3VsYXIgdmVyc2lvbi5cclxuICogU3RvcmVkIGluIEluZGV4ZWREYiBhcyBwYXJ0IG9mIGEgRGJSZW1vdGVEb2N1bWVudCBvYmplY3QuXHJcbiAqL1xyXG52YXIgRGJOb0RvY3VtZW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gRGJOb0RvY3VtZW50KHBhdGgsIHJlYWRUaW1lKSB7XHJcbiAgICAgICAgdGhpcy5wYXRoID0gcGF0aDtcclxuICAgICAgICB0aGlzLnJlYWRUaW1lID0gcmVhZFRpbWU7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gRGJOb0RvY3VtZW50O1xyXG59KCkpO1xyXG4vKipcclxuICogUmVwcmVzZW50cyBhIGRvY3VtZW50IHRoYXQgaXMga25vd24gdG8gZXhpc3QgYnV0IHdob3NlIGRhdGEgaXMgdW5rbm93bi5cclxuICogU3RvcmVkIGluIEluZGV4ZWREYiBhcyBwYXJ0IG9mIGEgRGJSZW1vdGVEb2N1bWVudCBvYmplY3QuXHJcbiAqL1xyXG52YXIgRGJVbmtub3duRG9jdW1lbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBEYlVua25vd25Eb2N1bWVudChwYXRoLCB2ZXJzaW9uKSB7XHJcbiAgICAgICAgdGhpcy5wYXRoID0gcGF0aDtcclxuICAgICAgICB0aGlzLnZlcnNpb24gPSB2ZXJzaW9uO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIERiVW5rbm93bkRvY3VtZW50O1xyXG59KCkpO1xyXG4vKipcclxuICogQW4gb2JqZWN0IHRvIGJlIHN0b3JlZCBpbiB0aGUgJ3JlbW90ZURvY3VtZW50cycgc3RvcmUgaW4gSW5kZXhlZERiLlxyXG4gKiBJdCByZXByZXNlbnRzIGVpdGhlcjpcclxuICpcclxuICogLSBBIGNvbXBsZXRlIGRvY3VtZW50LlxyXG4gKiAtIEEgXCJubyBkb2N1bWVudFwiIHJlcHJlc2VudGluZyBhIGRvY3VtZW50IHRoYXQgaXMga25vd24gbm90IHRvIGV4aXN0IChhdFxyXG4gKiBzb21lIHZlcnNpb24pLlxyXG4gKiAtIEFuIFwidW5rbm93biBkb2N1bWVudFwiIHJlcHJlc2VudGluZyBhIGRvY3VtZW50IHRoYXQgaXMga25vd24gdG8gZXhpc3QgKGF0XHJcbiAqIHNvbWUgdmVyc2lvbikgYnV0IHdob3NlIGNvbnRlbnRzIGFyZSB1bmtub3duLlxyXG4gKlxyXG4gKiBOb3RlOiBUaGlzIGlzIHRoZSBwZXJzaXN0ZWQgZXF1aXZhbGVudCBvZiBhIE1heWJlRG9jdW1lbnQgYW5kIGNvdWxkIHBlcmhhcHNcclxuICogYmUgbWFkZSBtb3JlIGdlbmVyYWwgaWYgbmVjZXNzYXJ5LlxyXG4gKi9cclxudmFyIERiUmVtb3RlRG9jdW1lbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICAvLyBUT0RPOiBXZSBhcmUgY3VycmVudGx5IHN0b3JpbmcgZnVsbCBkb2N1bWVudCBrZXlzIGFsbW9zdCB0aHJlZSB0aW1lc1xyXG4gICAgLy8gKG9uY2UgYXMgcGFydCBvZiB0aGUgcHJpbWFyeSBrZXksIG9uY2UgLSBwYXJ0bHkgLSBhcyBgcGFyZW50UGF0aGAgYW5kIG9uY2VcclxuICAgIC8vIGluc2lkZSB0aGUgZW5jb2RlZCBkb2N1bWVudHMpLiBEdXJpbmcgb3VyIG5leHQgbWlncmF0aW9uLCB3ZSBzaG91bGRcclxuICAgIC8vIHJld3JpdGUgdGhlIHByaW1hcnkga2V5IGFzIHBhcmVudFBhdGggKyBkb2N1bWVudCBJRCB3aGljaCB3b3VsZCBhbGxvdyB1c1xyXG4gICAgLy8gdG8gZHJvcCBvbmUgdmFsdWUuXHJcbiAgICBmdW5jdGlvbiBEYlJlbW90ZURvY3VtZW50KFxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXQgdG8gYW4gaW5zdGFuY2Ugb2YgRGJVbmtub3duRG9jdW1lbnQgaWYgdGhlIGRhdGEgZm9yIGEgZG9jdW1lbnQgaXNcclxuICAgICAqIG5vdCBrbm93biwgYnV0IGl0IGlzIGtub3duIHRoYXQgYSBkb2N1bWVudCBleGlzdHMgYXQgdGhlIHNwZWNpZmllZFxyXG4gICAgICogdmVyc2lvbiAoZS5nLiBpdCBoYWQgYSBzdWNjZXNzZnVsIHVwZGF0ZSBhcHBsaWVkIHRvIGl0KVxyXG4gICAgICovXHJcbiAgICB1bmtub3duRG9jdW1lbnQsIFxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXQgdG8gYW4gaW5zdGFuY2Ugb2YgYSBEYk5vRG9jdW1lbnQgaWYgaXQgaXMga25vd24gdGhhdCBubyBkb2N1bWVudFxyXG4gICAgICogZXhpc3RzLlxyXG4gICAgICovXHJcbiAgICBub0RvY3VtZW50LCBcclxuICAgIC8qKlxyXG4gICAgICogU2V0IHRvIGFuIGluc3RhbmNlIG9mIGEgRG9jdW1lbnQgaWYgdGhlcmUncyBhIGNhY2hlZCB2ZXJzaW9uIG9mIHRoZVxyXG4gICAgICogZG9jdW1lbnQuXHJcbiAgICAgKi9cclxuICAgIGRvY3VtZW50LCBcclxuICAgIC8qKlxyXG4gICAgICogRG9jdW1lbnRzIHRoYXQgd2VyZSB3cml0dGVuIHRvIHRoZSByZW1vdGUgZG9jdW1lbnQgc3RvcmUgYmFzZWQgb25cclxuICAgICAqIGEgd3JpdGUgYWNrbm93bGVkZ21lbnQgYXJlIG1hcmtlZCB3aXRoIGBoYXNDb21taXR0ZWRNdXRhdGlvbnNgLiBUaGVzZVxyXG4gICAgICogZG9jdW1lbnRzIGFyZSBwb3RlbnRpYWxseSBpbmNvbnNpc3RlbnQgd2l0aCB0aGUgYmFja2VuZCdzIGNvcHkgYW5kIHVzZVxyXG4gICAgICogdGhlIHdyaXRlJ3MgY29tbWl0IHZlcnNpb24gYXMgdGhlaXIgZG9jdW1lbnQgdmVyc2lvbi5cclxuICAgICAqL1xyXG4gICAgaGFzQ29tbWl0dGVkTXV0YXRpb25zLCBcclxuICAgIC8qKlxyXG4gICAgICogV2hlbiB0aGUgZG9jdW1lbnQgd2FzIHJlYWQgZnJvbSB0aGUgYmFja2VuZC4gVW5kZWZpbmVkIGZvciBkYXRhIHdyaXR0ZW5cclxuICAgICAqIHByaW9yIHRvIHNjaGVtYSB2ZXJzaW9uIDkuXHJcbiAgICAgKi9cclxuICAgIHJlYWRUaW1lLCBcclxuICAgIC8qKlxyXG4gICAgICogVGhlIHBhdGggb2YgdGhlIGNvbGxlY3Rpb24gdGhpcyBkb2N1bWVudCBpcyBwYXJ0IG9mLiBVbmRlZmluZWQgZm9yIGRhdGFcclxuICAgICAqIHdyaXR0ZW4gcHJpb3IgdG8gc2NoZW1hIHZlcnNpb24gOS5cclxuICAgICAqL1xyXG4gICAgcGFyZW50UGF0aCkge1xyXG4gICAgICAgIHRoaXMudW5rbm93bkRvY3VtZW50ID0gdW5rbm93bkRvY3VtZW50O1xyXG4gICAgICAgIHRoaXMubm9Eb2N1bWVudCA9IG5vRG9jdW1lbnQ7XHJcbiAgICAgICAgdGhpcy5kb2N1bWVudCA9IGRvY3VtZW50O1xyXG4gICAgICAgIHRoaXMuaGFzQ29tbWl0dGVkTXV0YXRpb25zID0gaGFzQ29tbWl0dGVkTXV0YXRpb25zO1xyXG4gICAgICAgIHRoaXMucmVhZFRpbWUgPSByZWFkVGltZTtcclxuICAgICAgICB0aGlzLnBhcmVudFBhdGggPSBwYXJlbnRQYXRoO1xyXG4gICAgfVxyXG4gICAgRGJSZW1vdGVEb2N1bWVudC5zdG9yZSA9ICdyZW1vdGVEb2N1bWVudHMnO1xyXG4gICAgLyoqXHJcbiAgICAgKiBBbiBpbmRleCB0aGF0IHByb3ZpZGVzIGFjY2VzcyB0byBhbGwgZW50cmllcyBzb3J0ZWQgYnkgcmVhZCB0aW1lICh3aGljaFxyXG4gICAgICogY29ycmVzcG9uZHMgdG8gdGhlIGxhc3QgbW9kaWZpY2F0aW9uIHRpbWUgb2YgZWFjaCByb3cpLlxyXG4gICAgICpcclxuICAgICAqIFRoaXMgaW5kZXggaXMgdXNlZCB0byBwcm92aWRlIGEgY2hhbmdlbG9nIGZvciBNdWx0aS1UYWIuXHJcbiAgICAgKi9cclxuICAgIERiUmVtb3RlRG9jdW1lbnQucmVhZFRpbWVJbmRleCA9ICdyZWFkVGltZUluZGV4JztcclxuICAgIERiUmVtb3RlRG9jdW1lbnQucmVhZFRpbWVJbmRleFBhdGggPSAncmVhZFRpbWUnO1xyXG4gICAgLyoqXHJcbiAgICAgKiBBbiBpbmRleCB0aGF0IHByb3ZpZGVzIGFjY2VzcyB0byBkb2N1bWVudHMgaW4gYSBjb2xsZWN0aW9uIHNvcnRlZCBieSByZWFkXHJcbiAgICAgKiB0aW1lLlxyXG4gICAgICpcclxuICAgICAqIFRoaXMgaW5kZXggaXMgdXNlZCB0byBhbGxvdyB0aGUgUmVtb3RlRG9jdW1lbnRDYWNoZSB0byBmZXRjaCBuZXdseSBjaGFuZ2VkXHJcbiAgICAgKiBkb2N1bWVudHMgaW4gYSBjb2xsZWN0aW9uLlxyXG4gICAgICovXHJcbiAgICBEYlJlbW90ZURvY3VtZW50LmNvbGxlY3Rpb25SZWFkVGltZUluZGV4ID0gJ2NvbGxlY3Rpb25SZWFkVGltZUluZGV4JztcclxuICAgIERiUmVtb3RlRG9jdW1lbnQuY29sbGVjdGlvblJlYWRUaW1lSW5kZXhQYXRoID0gWydwYXJlbnRQYXRoJywgJ3JlYWRUaW1lJ107XHJcbiAgICByZXR1cm4gRGJSZW1vdGVEb2N1bWVudDtcclxufSgpKTtcclxuLyoqXHJcbiAqIENvbnRhaW5zIGEgc2luZ2xlIGVudHJ5IHRoYXQgaGFzIG1ldGFkYXRhIGFib3V0IHRoZSByZW1vdGUgZG9jdW1lbnQgY2FjaGUuXHJcbiAqL1xyXG52YXIgRGJSZW1vdGVEb2N1bWVudEdsb2JhbCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIGJ5dGVTaXplIEFwcHJveGltYXRlbHkgdGhlIHRvdGFsIHNpemUgaW4gYnl0ZXMgb2YgYWxsIHRoZSBkb2N1bWVudHMgaW4gdGhlIGRvY3VtZW50XHJcbiAgICAgKiBjYWNoZS5cclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gRGJSZW1vdGVEb2N1bWVudEdsb2JhbChieXRlU2l6ZSkge1xyXG4gICAgICAgIHRoaXMuYnl0ZVNpemUgPSBieXRlU2l6ZTtcclxuICAgIH1cclxuICAgIERiUmVtb3RlRG9jdW1lbnRHbG9iYWwuc3RvcmUgPSAncmVtb3RlRG9jdW1lbnRHbG9iYWwnO1xyXG4gICAgRGJSZW1vdGVEb2N1bWVudEdsb2JhbC5rZXkgPSAncmVtb3RlRG9jdW1lbnRHbG9iYWxLZXknO1xyXG4gICAgcmV0dXJuIERiUmVtb3RlRG9jdW1lbnRHbG9iYWw7XHJcbn0oKSk7XHJcbmZ1bmN0aW9uIGNyZWF0ZURvY3VtZW50R2xvYmFsU3RvcmUoZGIpIHtcclxuICAgIGRiLmNyZWF0ZU9iamVjdFN0b3JlKERiUmVtb3RlRG9jdW1lbnRHbG9iYWwuc3RvcmUpO1xyXG59XHJcbi8qKlxyXG4gKiBBbiBvYmplY3QgdG8gYmUgc3RvcmVkIGluIHRoZSAndGFyZ2V0cycgc3RvcmUgaW4gSW5kZXhlZERiLlxyXG4gKlxyXG4gKiBUaGlzIGlzIGJhc2VkIG9uIGFuZCBzaG91bGQgYmUga2VwdCBpbiBzeW5jIHdpdGggdGhlIHByb3RvIHVzZWQgaW4gdGhlIGlPU1xyXG4gKiBjbGllbnQuXHJcbiAqXHJcbiAqIEVhY2ggcXVlcnkgdGhlIGNsaWVudCBsaXN0ZW5zIHRvIGFnYWluc3QgdGhlIHNlcnZlciBpcyB0cmFja2VkIG9uIGRpc2sgc29cclxuICogdGhhdCB0aGUgcXVlcnkgY2FuIGJlIGVmZmljaWVudGx5IHJlc3VtZWQgb24gcmVzdGFydC5cclxuICovXHJcbnZhciBEYlRhcmdldCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIERiVGFyZ2V0KFxyXG4gICAgLyoqXHJcbiAgICAgKiBBbiBhdXRvLWdlbmVyYXRlZCBzZXF1ZW50aWFsIG51bWVyaWMgaWRlbnRpZmllciBmb3IgdGhlIHF1ZXJ5LlxyXG4gICAgICpcclxuICAgICAqIFF1ZXJpZXMgYXJlIHN0b3JlZCB1c2luZyB0aGVpciBjYW5vbmljYWxJZCBhcyB0aGUga2V5LCBidXQgdGhlc2VcclxuICAgICAqIGNhbm9uaWNhbElkcyBjYW4gYmUgcXVpdGUgbG9uZyBzbyB3ZSBhZGRpdGlvbmFsbHkgYXNzaWduIGEgdW5pcXVlXHJcbiAgICAgKiBxdWVyeUlkIHdoaWNoIGNhbiBiZSB1c2VkIGJ5IHJlZmVyZW5jZWQgZGF0YSBzdHJ1Y3R1cmVzIChlLmcuXHJcbiAgICAgKiBpbmRleGVzKSB0byBtaW5pbWl6ZSB0aGUgb24tZGlzayBjb3N0LlxyXG4gICAgICovXHJcbiAgICB0YXJnZXRJZCwgXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBjYW5vbmljYWwgc3RyaW5nIHJlcHJlc2VudGluZyB0aGlzIHF1ZXJ5LiBUaGlzIGlzIG5vdCB1bmlxdWUuXHJcbiAgICAgKi9cclxuICAgIGNhbm9uaWNhbElkLCBcclxuICAgIC8qKlxyXG4gICAgICogVGhlIGxhc3QgcmVhZFRpbWUgcmVjZWl2ZWQgZnJvbSB0aGUgV2F0Y2ggU2VydmljZSBmb3IgdGhpcyBxdWVyeS5cclxuICAgICAqXHJcbiAgICAgKiBUaGlzIGlzIHRoZSBzYW1lIHZhbHVlIGFzIFRhcmdldENoYW5nZS5yZWFkX3RpbWUgaW4gdGhlIHByb3Rvcy5cclxuICAgICAqL1xyXG4gICAgcmVhZFRpbWUsIFxyXG4gICAgLyoqXHJcbiAgICAgKiBBbiBvcGFxdWUsIHNlcnZlci1hc3NpZ25lZCB0b2tlbiB0aGF0IGFsbG93cyB3YXRjaGluZyBhIHF1ZXJ5IHRvIGJlXHJcbiAgICAgKiByZXN1bWVkIGFmdGVyIGRpc2Nvbm5lY3Rpbmcgd2l0aG91dCByZXRyYW5zbWl0dGluZyBhbGwgdGhlIGRhdGFcclxuICAgICAqIHRoYXQgbWF0Y2hlcyB0aGUgcXVlcnkuIFRoZSByZXN1bWUgdG9rZW4gZXNzZW50aWFsbHkgaWRlbnRpZmllcyBhXHJcbiAgICAgKiBwb2ludCBpbiB0aW1lIGZyb20gd2hpY2ggdGhlIHNlcnZlciBzaG91bGQgcmVzdW1lIHNlbmRpbmcgcmVzdWx0cy5cclxuICAgICAqXHJcbiAgICAgKiBUaGlzIGlzIHJlbGF0ZWQgdG8gdGhlIHNuYXBzaG90VmVyc2lvbiBpbiB0aGF0IHRoZSByZXN1bWVUb2tlblxyXG4gICAgICogZWZmZWN0aXZlbHkgYWxzbyBlbmNvZGVzIHRoYXQgdmFsdWUsIGJ1dCB0aGUgcmVzdW1lVG9rZW4gaXMgb3BhcXVlXHJcbiAgICAgKiBhbmQgc29tZXRpbWVzIGVuY29kZXMgYWRkaXRpb25hbCBpbmZvcm1hdGlvbi5cclxuICAgICAqXHJcbiAgICAgKiBBIGNvbnNlcXVlbmNlIG9mIHRoaXMgaXMgdGhhdCB0aGUgcmVzdW1lVG9rZW4gc2hvdWxkIGJlIHVzZWQgd2hlblxyXG4gICAgICogYXNraW5nIHRoZSBzZXJ2ZXIgdG8gcmVhc29uIGFib3V0IHdoZXJlIHRoaXMgY2xpZW50IGlzIGluIHRoZSB3YXRjaFxyXG4gICAgICogc3RyZWFtLCBidXQgdGhlIGNsaWVudCBzaG91bGQgdXNlIHRoZSBzbmFwc2hvdFZlcnNpb24gZm9yIGl0cyBvd25cclxuICAgICAqIHB1cnBvc2VzLlxyXG4gICAgICpcclxuICAgICAqIFRoaXMgaXMgdGhlIHNhbWUgdmFsdWUgYXMgVGFyZ2V0Q2hhbmdlLnJlc3VtZV90b2tlbiBpbiB0aGUgcHJvdG9zLlxyXG4gICAgICovXHJcbiAgICByZXN1bWVUb2tlbiwgXHJcbiAgICAvKipcclxuICAgICAqIEEgc2VxdWVuY2UgbnVtYmVyIHJlcHJlc2VudGluZyB0aGUgbGFzdCB0aW1lIHRoaXMgcXVlcnkgd2FzXHJcbiAgICAgKiBsaXN0ZW5lZCB0bywgdXNlZCBmb3IgZ2FyYmFnZSBjb2xsZWN0aW9uIHB1cnBvc2VzLlxyXG4gICAgICpcclxuICAgICAqIENvbnZlbnRpb25hbGx5IHRoaXMgd291bGQgYmUgYSB0aW1lc3RhbXAgdmFsdWUsIGJ1dCBkZXZpY2UtbG9jYWxcclxuICAgICAqIGNsb2NrcyBhcmUgdW5yZWxpYWJsZSBhbmQgdGhleSBtdXN0IGJlIGFibGUgdG8gY3JlYXRlIG5ldyBsaXN0ZW5zXHJcbiAgICAgKiBldmVuIHdoaWxlIGRpc2Nvbm5lY3RlZC4gSW5zdGVhZCB0aGlzIHNob3VsZCBiZSBhIG1vbm90b25pY2FsbHlcclxuICAgICAqIGluY3JlYXNpbmcgbnVtYmVyIHRoYXQncyBpbmNyZW1lbnRlZCBvbiBlYWNoIGxpc3RlbiBjYWxsLlxyXG4gICAgICpcclxuICAgICAqIFRoaXMgaXMgZGlmZmVyZW50IGZyb20gdGhlIHF1ZXJ5SWQgc2luY2UgdGhlIHF1ZXJ5SWQgaXMgYW5cclxuICAgICAqIGltbXV0YWJsZSBpZGVudGlmaWVyIGFzc2lnbmVkIHRvIHRoZSBRdWVyeSBvbiBmaXJzdCB1c2Ugd2hpbGVcclxuICAgICAqIGxhc3RMaXN0ZW5TZXF1ZW5jZU51bWJlciBpcyB1cGRhdGVkIGV2ZXJ5IHRpbWUgdGhlIHF1ZXJ5IGlzXHJcbiAgICAgKiBsaXN0ZW5lZCB0by5cclxuICAgICAqL1xyXG4gICAgbGFzdExpc3RlblNlcXVlbmNlTnVtYmVyLCBcclxuICAgIC8qKlxyXG4gICAgICogRGVub3RlcyB0aGUgbWF4aW11bSBzbmFwc2hvdCB2ZXJzaW9uIGF0IHdoaWNoIHRoZSBhc3NvY2lhdGVkIHF1ZXJ5IHZpZXdcclxuICAgICAqIGNvbnRhaW5lZCBubyBsaW1ibyBkb2N1bWVudHMuICBVbmRlZmluZWQgZm9yIGRhdGEgd3JpdHRlbiBwcmlvciB0b1xyXG4gICAgICogc2NoZW1hIHZlcnNpb24gOS5cclxuICAgICAqL1xyXG4gICAgbGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbiwgXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBxdWVyeSBmb3IgdGhpcyB0YXJnZXQuXHJcbiAgICAgKlxyXG4gICAgICogQmVjYXVzZSBjYW5vbmljYWwgaWRzIGFyZSBub3QgdW5pcXVlIHdlIG11c3Qgc3RvcmUgdGhlIGFjdHVhbCBxdWVyeS4gV2VcclxuICAgICAqIHVzZSB0aGUgcHJvdG8gdG8gaGF2ZSBhbiBvYmplY3Qgd2UgY2FuIHBlcnNpc3Qgd2l0aG91dCBoYXZpbmcgdG9cclxuICAgICAqIGR1cGxpY2F0ZSB0cmFuc2xhdGlvbiBsb2dpYyB0byBhbmQgZnJvbSBhIGBRdWVyeWAgb2JqZWN0LlxyXG4gICAgICovXHJcbiAgICBxdWVyeSkge1xyXG4gICAgICAgIHRoaXMudGFyZ2V0SWQgPSB0YXJnZXRJZDtcclxuICAgICAgICB0aGlzLmNhbm9uaWNhbElkID0gY2Fub25pY2FsSWQ7XHJcbiAgICAgICAgdGhpcy5yZWFkVGltZSA9IHJlYWRUaW1lO1xyXG4gICAgICAgIHRoaXMucmVzdW1lVG9rZW4gPSByZXN1bWVUb2tlbjtcclxuICAgICAgICB0aGlzLmxhc3RMaXN0ZW5TZXF1ZW5jZU51bWJlciA9IGxhc3RMaXN0ZW5TZXF1ZW5jZU51bWJlcjtcclxuICAgICAgICB0aGlzLmxhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24gPSBsYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uO1xyXG4gICAgICAgIHRoaXMucXVlcnkgPSBxdWVyeTtcclxuICAgIH1cclxuICAgIERiVGFyZ2V0LnN0b3JlID0gJ3RhcmdldHMnO1xyXG4gICAgLyoqIEtleXMgYXJlIGF1dG9tYXRpY2FsbHkgYXNzaWduZWQgdmlhIHRoZSB0YXJnZXRJZCBwcm9wZXJ0eS4gKi9cclxuICAgIERiVGFyZ2V0LmtleVBhdGggPSAndGFyZ2V0SWQnO1xyXG4gICAgLyoqIFRoZSBuYW1lIG9mIHRoZSBxdWVyeVRhcmdldHMgaW5kZXguICovXHJcbiAgICBEYlRhcmdldC5xdWVyeVRhcmdldHNJbmRleE5hbWUgPSAncXVlcnlUYXJnZXRzSW5kZXgnO1xyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgaW5kZXggb2YgYWxsIGNhbm9uaWNhbElkcyB0byB0aGUgdGFyZ2V0cyB0aGF0IHRoZXkgbWF0Y2guIFRoaXMgaXMgbm90XHJcbiAgICAgKiBhIHVuaXF1ZSBtYXBwaW5nIGJlY2F1c2UgY2Fub25pY2FsSWQgZG9lcyBub3QgcHJvbWlzZSBhIHVuaXF1ZSBuYW1lIGZvciBhbGxcclxuICAgICAqIHBvc3NpYmxlIHF1ZXJpZXMsIHNvIHdlIGFwcGVuZCB0aGUgdGFyZ2V0SWQgdG8gbWFrZSB0aGUgbWFwcGluZyB1bmlxdWUuXHJcbiAgICAgKi9cclxuICAgIERiVGFyZ2V0LnF1ZXJ5VGFyZ2V0c0tleVBhdGggPSBbJ2Nhbm9uaWNhbElkJywgJ3RhcmdldElkJ107XHJcbiAgICByZXR1cm4gRGJUYXJnZXQ7XHJcbn0oKSk7XHJcbi8qKlxyXG4gKiBBbiBvYmplY3QgcmVwcmVzZW50aW5nIGFuIGFzc29jaWF0aW9uIGJldHdlZW4gYSB0YXJnZXQgYW5kIGEgZG9jdW1lbnQsIG9yIGFcclxuICogc2VudGluZWwgcm93IG1hcmtpbmcgdGhlIGxhc3Qgc2VxdWVuY2UgbnVtYmVyIGF0IHdoaWNoIGEgZG9jdW1lbnQgd2FzIHVzZWQuXHJcbiAqIEVhY2ggZG9jdW1lbnQgY2FjaGVkIG11c3QgaGF2ZSBhIGNvcnJlc3BvbmRpbmcgc2VudGluZWwgcm93IGJlZm9yZSBscnVcclxuICogZ2FyYmFnZSBjb2xsZWN0aW9uIGlzIGVuYWJsZWQuXHJcbiAqXHJcbiAqIFRoZSB0YXJnZXQgYXNzb2NpYXRpb25zIGFuZCBzZW50aW5lbCByb3dzIGFyZSBjby1sb2NhdGVkIHNvIHRoYXQgb3JwaGFuZWRcclxuICogZG9jdW1lbnRzIGFuZCB0aGVpciBzZXF1ZW5jZSBudW1iZXJzIGNhbiBiZSBpZGVudGlmaWVkIGVmZmljaWVudGx5IHZpYSBhIHNjYW5cclxuICogb2YgdGhpcyBzdG9yZS5cclxuICovXHJcbnZhciBEYlRhcmdldERvY3VtZW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gRGJUYXJnZXREb2N1bWVudChcclxuICAgIC8qKlxyXG4gICAgICogVGhlIHRhcmdldElkIGlkZW50aWZ5aW5nIGEgdGFyZ2V0IG9yIDAgZm9yIGEgc2VudGluZWwgcm93LlxyXG4gICAgICovXHJcbiAgICB0YXJnZXRJZCwgXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBwYXRoIHRvIHRoZSBkb2N1bWVudCwgYXMgZW5jb2RlZCBpbiB0aGUga2V5LlxyXG4gICAgICovXHJcbiAgICBwYXRoLCBcclxuICAgIC8qKlxyXG4gICAgICogSWYgdGhpcyBpcyBhIHNlbnRpbmVsIHJvdywgdGhpcyBzaG91bGQgYmUgdGhlIHNlcXVlbmNlIG51bWJlciBvZiB0aGUgbGFzdFxyXG4gICAgICogdGltZSB0aGUgZG9jdW1lbnQgc3BlY2lmaWVkIGJ5IGBwYXRoYCB3YXMgdXNlZC4gT3RoZXJ3aXNlLCBpdCBzaG91bGQgYmVcclxuICAgICAqIGB1bmRlZmluZWRgLlxyXG4gICAgICovXHJcbiAgICBzZXF1ZW5jZU51bWJlcikge1xyXG4gICAgICAgIHRoaXMudGFyZ2V0SWQgPSB0YXJnZXRJZDtcclxuICAgICAgICB0aGlzLnBhdGggPSBwYXRoO1xyXG4gICAgICAgIHRoaXMuc2VxdWVuY2VOdW1iZXIgPSBzZXF1ZW5jZU51bWJlcjtcclxuICAgICAgICBhc3NlcnQoKHRhcmdldElkID09PSAwKSA9PT0gKHNlcXVlbmNlTnVtYmVyICE9PSB1bmRlZmluZWQpLCAnQSB0YXJnZXQtZG9jdW1lbnQgcm93IG11c3QgZWl0aGVyIGhhdmUgdGFyZ2V0SWQgPT0gMCBhbmQgYSBkZWZpbmVkIHNlcXVlbmNlIG51bWJlciwgb3IgYSBub24temVybyB0YXJnZXRJZCBhbmQgbm8gc2VxdWVuY2UgbnVtYmVyJyk7XHJcbiAgICB9XHJcbiAgICAvKiogTmFtZSBvZiB0aGUgSW5kZXhlZERiIG9iamVjdCBzdG9yZS4gICovXHJcbiAgICBEYlRhcmdldERvY3VtZW50LnN0b3JlID0gJ3RhcmdldERvY3VtZW50cyc7XHJcbiAgICAvKiogS2V5cyBhcmUgYXV0b21hdGljYWxseSBhc3NpZ25lZCB2aWEgdGhlIHRhcmdldElkLCBwYXRoIHByb3BlcnRpZXMuICovXHJcbiAgICBEYlRhcmdldERvY3VtZW50LmtleVBhdGggPSBbJ3RhcmdldElkJywgJ3BhdGgnXTtcclxuICAgIC8qKiBUaGUgaW5kZXggbmFtZSBmb3IgdGhlIHJldmVyc2UgaW5kZXguICovXHJcbiAgICBEYlRhcmdldERvY3VtZW50LmRvY3VtZW50VGFyZ2V0c0luZGV4ID0gJ2RvY3VtZW50VGFyZ2V0c0luZGV4JztcclxuICAgIC8qKiBXZSBhbHNvIG5lZWQgdG8gY3JlYXRlIHRoZSByZXZlcnNlIGluZGV4IGZvciB0aGVzZSBwcm9wZXJ0aWVzLiAqL1xyXG4gICAgRGJUYXJnZXREb2N1bWVudC5kb2N1bWVudFRhcmdldHNLZXlQYXRoID0gWydwYXRoJywgJ3RhcmdldElkJ107XHJcbiAgICByZXR1cm4gRGJUYXJnZXREb2N1bWVudDtcclxufSgpKTtcclxuLyoqXHJcbiAqIEEgcmVjb3JkIG9mIGdsb2JhbCBzdGF0ZSB0cmFja2VkIGFjcm9zcyBhbGwgVGFyZ2V0cywgdHJhY2tlZCBzZXBhcmF0ZWx5XHJcbiAqIHRvIGF2b2lkIHRoZSBuZWVkIGZvciBleHRyYSBpbmRleGVzLlxyXG4gKlxyXG4gKiBUaGlzIHNob3VsZCBiZSBrZXB0IGluLXN5bmMgd2l0aCB0aGUgcHJvdG8gdXNlZCBpbiB0aGUgaU9TIGNsaWVudC5cclxuICovXHJcbnZhciBEYlRhcmdldEdsb2JhbCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIERiVGFyZ2V0R2xvYmFsKFxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgaGlnaGVzdCBudW1iZXJlZCB0YXJnZXQgaWQgYWNyb3NzIGFsbCB0YXJnZXRzLlxyXG4gICAgICpcclxuICAgICAqIFNlZSBEYlRhcmdldC50YXJnZXRJZC5cclxuICAgICAqL1xyXG4gICAgaGlnaGVzdFRhcmdldElkLCBcclxuICAgIC8qKlxyXG4gICAgICogVGhlIGhpZ2hlc3QgbnVtYmVyZWQgbGFzdExpc3RlblNlcXVlbmNlTnVtYmVyIGFjcm9zcyBhbGwgdGFyZ2V0cy5cclxuICAgICAqXHJcbiAgICAgKiBTZWUgRGJUYXJnZXQubGFzdExpc3RlblNlcXVlbmNlTnVtYmVyLlxyXG4gICAgICovXHJcbiAgICBoaWdoZXN0TGlzdGVuU2VxdWVuY2VOdW1iZXIsIFxyXG4gICAgLyoqXHJcbiAgICAgKiBBIGdsb2JhbCBzbmFwc2hvdCB2ZXJzaW9uIHJlcHJlc2VudGluZyB0aGUgbGFzdCBjb25zaXN0ZW50IHNuYXBzaG90IHdlXHJcbiAgICAgKiByZWNlaXZlZCBmcm9tIHRoZSBiYWNrZW5kLiBUaGlzIGlzIG1vbm90b25pY2FsbHkgaW5jcmVhc2luZyBhbmQgYW55XHJcbiAgICAgKiBzbmFwc2hvdHMgcmVjZWl2ZWQgZnJvbSB0aGUgYmFja2VuZCBwcmlvciB0byB0aGlzIHZlcnNpb24gKGUuZy4gZm9yXHJcbiAgICAgKiB0YXJnZXRzIHJlc3VtZWQgd2l0aCBhIHJlc3VtZVRva2VuKSBzaG91bGQgYmUgc3VwcHJlc3NlZCAoYnVmZmVyZWQpXHJcbiAgICAgKiB1bnRpbCB0aGUgYmFja2VuZCBoYXMgY2F1Z2h0IHVwIHRvIHRoaXMgc25hcHNob3QgdmVyc2lvbiBhZ2Fpbi4gVGhpc1xyXG4gICAgICogcHJldmVudHMgb3VyIGNhY2hlIGZyb20gZXZlciBnb2luZyBiYWNrd2FyZHMgaW4gdGltZS5cclxuICAgICAqL1xyXG4gICAgbGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbiwgXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBudW1iZXIgb2YgdGFyZ2V0cyBwZXJzaXN0ZWQuXHJcbiAgICAgKi9cclxuICAgIHRhcmdldENvdW50KSB7XHJcbiAgICAgICAgdGhpcy5oaWdoZXN0VGFyZ2V0SWQgPSBoaWdoZXN0VGFyZ2V0SWQ7XHJcbiAgICAgICAgdGhpcy5oaWdoZXN0TGlzdGVuU2VxdWVuY2VOdW1iZXIgPSBoaWdoZXN0TGlzdGVuU2VxdWVuY2VOdW1iZXI7XHJcbiAgICAgICAgdGhpcy5sYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uID0gbGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbjtcclxuICAgICAgICB0aGlzLnRhcmdldENvdW50ID0gdGFyZ2V0Q291bnQ7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFRoZSBrZXkgc3RyaW5nIHVzZWQgZm9yIHRoZSBzaW5nbGUgb2JqZWN0IHRoYXQgZXhpc3RzIGluIHRoZVxyXG4gICAgICogRGJUYXJnZXRHbG9iYWwgc3RvcmUuXHJcbiAgICAgKi9cclxuICAgIERiVGFyZ2V0R2xvYmFsLmtleSA9ICd0YXJnZXRHbG9iYWxLZXknO1xyXG4gICAgRGJUYXJnZXRHbG9iYWwuc3RvcmUgPSAndGFyZ2V0R2xvYmFsJztcclxuICAgIHJldHVybiBEYlRhcmdldEdsb2JhbDtcclxufSgpKTtcclxuLyoqXHJcbiAqIEFuIG9iamVjdCByZXByZXNlbnRpbmcgYW4gYXNzb2NpYXRpb24gYmV0d2VlbiBhIENvbGxlY3Rpb24gaWQgKGUuZy4gJ21lc3NhZ2VzJylcclxuICogdG8gYSBwYXJlbnQgcGF0aCAoZS5nLiAnL2NoYXRzLzEyMycpIHRoYXQgY29udGFpbnMgaXQgYXMgYSAoc3ViKWNvbGxlY3Rpb24uXHJcbiAqIFRoaXMgaXMgdXNlZCB0byBlZmZpY2llbnRseSBmaW5kIGFsbCBjb2xsZWN0aW9ucyB0byBxdWVyeSB3aGVuIHBlcmZvcm1pbmdcclxuICogYSBDb2xsZWN0aW9uIEdyb3VwIHF1ZXJ5LlxyXG4gKi9cclxudmFyIERiQ29sbGVjdGlvblBhcmVudCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIERiQ29sbGVjdGlvblBhcmVudChcclxuICAgIC8qKlxyXG4gICAgICogVGhlIGNvbGxlY3Rpb25JZCAoZS5nLiAnbWVzc2FnZXMnKVxyXG4gICAgICovXHJcbiAgICBjb2xsZWN0aW9uSWQsIFxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgcGF0aCB0byB0aGUgcGFyZW50IChlaXRoZXIgYSBkb2N1bWVudCBsb2NhdGlvbiBvciBhbiBlbXB0eSBwYXRoIGZvclxyXG4gICAgICogYSByb290LWxldmVsIGNvbGxlY3Rpb24pLlxyXG4gICAgICovXHJcbiAgICBwYXJlbnQpIHtcclxuICAgICAgICB0aGlzLmNvbGxlY3Rpb25JZCA9IGNvbGxlY3Rpb25JZDtcclxuICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcclxuICAgIH1cclxuICAgIC8qKiBOYW1lIG9mIHRoZSBJbmRleGVkRGIgb2JqZWN0IHN0b3JlLiAqL1xyXG4gICAgRGJDb2xsZWN0aW9uUGFyZW50LnN0b3JlID0gJ2NvbGxlY3Rpb25QYXJlbnRzJztcclxuICAgIC8qKiBLZXlzIGFyZSBhdXRvbWF0aWNhbGx5IGFzc2lnbmVkIHZpYSB0aGUgY29sbGVjdGlvbklkLCBwYXJlbnQgcHJvcGVydGllcy4gKi9cclxuICAgIERiQ29sbGVjdGlvblBhcmVudC5rZXlQYXRoID0gWydjb2xsZWN0aW9uSWQnLCAncGFyZW50J107XHJcbiAgICByZXR1cm4gRGJDb2xsZWN0aW9uUGFyZW50O1xyXG59KCkpO1xyXG5mdW5jdGlvbiBjcmVhdGVRdWVyeUNhY2hlKGRiKSB7XHJcbiAgICB2YXIgdGFyZ2V0RG9jdW1lbnRzU3RvcmUgPSBkYi5jcmVhdGVPYmplY3RTdG9yZShEYlRhcmdldERvY3VtZW50LnN0b3JlLCB7XHJcbiAgICAgICAga2V5UGF0aDogRGJUYXJnZXREb2N1bWVudC5rZXlQYXRoXHJcbiAgICB9KTtcclxuICAgIHRhcmdldERvY3VtZW50c1N0b3JlLmNyZWF0ZUluZGV4KERiVGFyZ2V0RG9jdW1lbnQuZG9jdW1lbnRUYXJnZXRzSW5kZXgsIERiVGFyZ2V0RG9jdW1lbnQuZG9jdW1lbnRUYXJnZXRzS2V5UGF0aCwgeyB1bmlxdWU6IHRydWUgfSk7XHJcbiAgICB2YXIgdGFyZ2V0U3RvcmUgPSBkYi5jcmVhdGVPYmplY3RTdG9yZShEYlRhcmdldC5zdG9yZSwge1xyXG4gICAgICAgIGtleVBhdGg6IERiVGFyZ2V0LmtleVBhdGhcclxuICAgIH0pO1xyXG4gICAgLy8gTk9URTogVGhpcyBpcyB1bmlxdWUgb25seSBiZWNhdXNlIHRoZSBUYXJnZXRJZCBpcyB0aGUgc3VmZml4LlxyXG4gICAgdGFyZ2V0U3RvcmUuY3JlYXRlSW5kZXgoRGJUYXJnZXQucXVlcnlUYXJnZXRzSW5kZXhOYW1lLCBEYlRhcmdldC5xdWVyeVRhcmdldHNLZXlQYXRoLCB7IHVuaXF1ZTogdHJ1ZSB9KTtcclxuICAgIGRiLmNyZWF0ZU9iamVjdFN0b3JlKERiVGFyZ2V0R2xvYmFsLnN0b3JlKTtcclxufVxyXG5mdW5jdGlvbiBkcm9wUXVlcnlDYWNoZShkYikge1xyXG4gICAgZGIuZGVsZXRlT2JqZWN0U3RvcmUoRGJUYXJnZXREb2N1bWVudC5zdG9yZSk7XHJcbiAgICBkYi5kZWxldGVPYmplY3RTdG9yZShEYlRhcmdldC5zdG9yZSk7XHJcbiAgICBkYi5kZWxldGVPYmplY3RTdG9yZShEYlRhcmdldEdsb2JhbC5zdG9yZSk7XHJcbn1cclxuZnVuY3Rpb24gZHJvcFJlbW90ZURvY3VtZW50Q2hhbmdlc1N0b3JlKGRiKSB7XHJcbiAgICBpZiAoZGIub2JqZWN0U3RvcmVOYW1lcy5jb250YWlucygncmVtb3RlRG9jdW1lbnRDaGFuZ2VzJykpIHtcclxuICAgICAgICBkYi5kZWxldGVPYmplY3RTdG9yZSgncmVtb3RlRG9jdW1lbnRDaGFuZ2VzJyk7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIENyZWF0ZXMgdGhlIHRhcmdldCBnbG9iYWwgc2luZ2xldG9uIHJvdy5cclxuICpcclxuICogQHBhcmFtIHtJREJUcmFuc2FjdGlvbn0gdHhuIFRoZSB2ZXJzaW9uIHVwZ3JhZGUgdHJhbnNhY3Rpb24gZm9yIGluZGV4ZWRkYlxyXG4gKi9cclxuZnVuY3Rpb24gd3JpdGVFbXB0eVRhcmdldEdsb2JhbEVudHJ5KHR4bikge1xyXG4gICAgdmFyIGdsb2JhbFN0b3JlID0gdHhuLnN0b3JlKERiVGFyZ2V0R2xvYmFsLnN0b3JlKTtcclxuICAgIHZhciBtZXRhZGF0YSA9IG5ldyBEYlRhcmdldEdsb2JhbChcclxuICAgIC8qaGlnaGVzdFRhcmdldElkPSovIDAsIFxyXG4gICAgLypsYXN0TGlzdGVuU2VxdWVuY2VOdW1iZXI9Ki8gMCwgU25hcHNob3RWZXJzaW9uLk1JTi50b1RpbWVzdGFtcCgpLCBcclxuICAgIC8qdGFyZ2V0Q291bnQ9Ki8gMCk7XHJcbiAgICByZXR1cm4gZ2xvYmFsU3RvcmUucHV0KERiVGFyZ2V0R2xvYmFsLmtleSwgbWV0YWRhdGEpO1xyXG59XHJcbi8qKlxyXG4gKiBDcmVhdGVzIGluZGljZXMgb24gdGhlIFJlbW90ZURvY3VtZW50cyBzdG9yZSB1c2VkIGZvciBib3RoIG11bHRpLXRhYlxyXG4gKiBhbmQgSW5kZXgtRnJlZSBxdWVyaWVzLlxyXG4gKi9cclxuZnVuY3Rpb24gY3JlYXRlUmVtb3RlRG9jdW1lbnRSZWFkVGltZUluZGV4KHR4bikge1xyXG4gICAgdmFyIHJlbW90ZURvY3VtZW50U3RvcmUgPSB0eG4ub2JqZWN0U3RvcmUoRGJSZW1vdGVEb2N1bWVudC5zdG9yZSk7XHJcbiAgICByZW1vdGVEb2N1bWVudFN0b3JlLmNyZWF0ZUluZGV4KERiUmVtb3RlRG9jdW1lbnQucmVhZFRpbWVJbmRleCwgRGJSZW1vdGVEb2N1bWVudC5yZWFkVGltZUluZGV4UGF0aCwgeyB1bmlxdWU6IGZhbHNlIH0pO1xyXG4gICAgcmVtb3RlRG9jdW1lbnRTdG9yZS5jcmVhdGVJbmRleChEYlJlbW90ZURvY3VtZW50LmNvbGxlY3Rpb25SZWFkVGltZUluZGV4LCBEYlJlbW90ZURvY3VtZW50LmNvbGxlY3Rpb25SZWFkVGltZUluZGV4UGF0aCwgeyB1bmlxdWU6IGZhbHNlIH0pO1xyXG59XHJcbi8qKlxyXG4gKiBBIHJlY29yZCBvZiB0aGUgbWV0YWRhdGEgc3RhdGUgb2YgZWFjaCBjbGllbnQuXHJcbiAqXHJcbiAqIFBPUlRJTkcgTk9URTogVGhpcyBpcyB1c2VkIHRvIHN5bmNocm9uaXplIG11bHRpLXRhYiBzdGF0ZSBhbmQgZG9lcyBub3QgbmVlZFxyXG4gKiB0byBiZSBwb3J0ZWQgdG8gaU9TIG9yIEFuZHJvaWQuXHJcbiAqL1xyXG52YXIgRGJDbGllbnRNZXRhZGF0YSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIERiQ2xpZW50TWV0YWRhdGEoXHJcbiAgICAvLyBOb3RlOiBQcmV2aW91cyBzY2hlbWEgdmVyc2lvbnMgaW5jbHVkZWQgYSBmaWVsZFxyXG4gICAgLy8gXCJsYXN0UHJvY2Vzc2VkRG9jdW1lbnRDaGFuZ2VJZFwiLiBEb24ndCB1c2UgYW55bW9yZS5cclxuICAgIC8qKiBUaGUgYXV0by1nZW5lcmF0ZWQgY2xpZW50IGlkIGFzc2lnbmVkIGF0IGNsaWVudCBzdGFydHVwLiAqL1xyXG4gICAgY2xpZW50SWQsIFxyXG4gICAgLyoqIFRoZSBsYXN0IHRpbWUgdGhpcyBzdGF0ZSB3YXMgdXBkYXRlZC4gKi9cclxuICAgIHVwZGF0ZVRpbWVNcywgXHJcbiAgICAvKiogV2hldGhlciB0aGUgY2xpZW50J3MgbmV0d29yayBjb25uZWN0aW9uIGlzIGVuYWJsZWQuICovXHJcbiAgICBuZXR3b3JrRW5hYmxlZCwgXHJcbiAgICAvKiogV2hldGhlciB0aGlzIGNsaWVudCBpcyBydW5uaW5nIGluIGEgZm9yZWdyb3VuZCB0YWIuICovXHJcbiAgICBpbkZvcmVncm91bmQpIHtcclxuICAgICAgICB0aGlzLmNsaWVudElkID0gY2xpZW50SWQ7XHJcbiAgICAgICAgdGhpcy51cGRhdGVUaW1lTXMgPSB1cGRhdGVUaW1lTXM7XHJcbiAgICAgICAgdGhpcy5uZXR3b3JrRW5hYmxlZCA9IG5ldHdvcmtFbmFibGVkO1xyXG4gICAgICAgIHRoaXMuaW5Gb3JlZ3JvdW5kID0gaW5Gb3JlZ3JvdW5kO1xyXG4gICAgfVxyXG4gICAgLyoqIE5hbWUgb2YgdGhlIEluZGV4ZWREYiBvYmplY3Qgc3RvcmUuICovXHJcbiAgICBEYkNsaWVudE1ldGFkYXRhLnN0b3JlID0gJ2NsaWVudE1ldGFkYXRhJztcclxuICAgIC8qKiBLZXlzIGFyZSBhdXRvbWF0aWNhbGx5IGFzc2lnbmVkIHZpYSB0aGUgY2xpZW50SWQgcHJvcGVydGllcy4gKi9cclxuICAgIERiQ2xpZW50TWV0YWRhdGEua2V5UGF0aCA9ICdjbGllbnRJZCc7XHJcbiAgICByZXR1cm4gRGJDbGllbnRNZXRhZGF0YTtcclxufSgpKTtcclxuZnVuY3Rpb24gY3JlYXRlQ2xpZW50TWV0YWRhdGFTdG9yZShkYikge1xyXG4gICAgZGIuY3JlYXRlT2JqZWN0U3RvcmUoRGJDbGllbnRNZXRhZGF0YS5zdG9yZSwge1xyXG4gICAgICAgIGtleVBhdGg6IERiQ2xpZW50TWV0YWRhdGEua2V5UGF0aFxyXG4gICAgfSk7XHJcbn1cclxuLy8gVmlzaWJsZSBmb3IgdGVzdGluZ1xyXG52YXIgVjFfU1RPUkVTID0gW1xyXG4gICAgRGJNdXRhdGlvblF1ZXVlLnN0b3JlLFxyXG4gICAgRGJNdXRhdGlvbkJhdGNoLnN0b3JlLFxyXG4gICAgRGJEb2N1bWVudE11dGF0aW9uLnN0b3JlLFxyXG4gICAgRGJSZW1vdGVEb2N1bWVudC5zdG9yZSxcclxuICAgIERiVGFyZ2V0LnN0b3JlLFxyXG4gICAgRGJQcmltYXJ5Q2xpZW50LnN0b3JlLFxyXG4gICAgRGJUYXJnZXRHbG9iYWwuc3RvcmUsXHJcbiAgICBEYlRhcmdldERvY3VtZW50LnN0b3JlXHJcbl07XHJcbi8vIFYyIGlzIG5vIGxvbmdlciB1c2FibGUgKHNlZSBjb21tZW50IGF0IHRvcCBvZiBmaWxlKVxyXG4vLyBWaXNpYmxlIGZvciB0ZXN0aW5nXHJcbnZhciBWM19TVE9SRVMgPSBWMV9TVE9SRVM7XHJcbi8vIFZpc2libGUgZm9yIHRlc3RpbmdcclxuLy8gTm90ZTogRGJSZW1vdGVEb2N1bWVudENoYW5nZXMgaXMgbm8gbG9uZ2VyIHVzZWQgYW5kIGRyb3BwZWQgd2l0aCB2OS5cclxudmFyIFY0X1NUT1JFUyA9IHRzbGliLl9fc3ByZWFkQXJyYXlzKFYzX1NUT1JFUywgW0RiQ2xpZW50TWV0YWRhdGEuc3RvcmVdKTtcclxuLy8gVjUgZG9lcyBub3QgY2hhbmdlIHRoZSBzZXQgb2Ygc3RvcmVzLlxyXG52YXIgVjZfU1RPUkVTID0gdHNsaWIuX19zcHJlYWRBcnJheXMoVjRfU1RPUkVTLCBbRGJSZW1vdGVEb2N1bWVudEdsb2JhbC5zdG9yZV0pO1xyXG4vLyBWNyBkb2VzIG5vdCBjaGFuZ2UgdGhlIHNldCBvZiBzdG9yZXMuXHJcbnZhciBWOF9TVE9SRVMgPSB0c2xpYi5fX3NwcmVhZEFycmF5cyhWNl9TVE9SRVMsIFtEYkNvbGxlY3Rpb25QYXJlbnQuc3RvcmVdKTtcclxuLy8gVjkgZG9lcyBub3QgY2hhbmdlIHRoZSBzZXQgb2Ygc3RvcmVzLlxyXG4vKipcclxuICogVGhlIGxpc3Qgb2YgYWxsIGRlZmF1bHQgSW5kZXhlZERCIHN0b3JlcyB1c2VkIHRocm91Z2hvdXQgdGhlIFNESy4gVGhpcyBpc1xyXG4gKiB1c2VkIHdoZW4gY3JlYXRpbmcgdHJhbnNhY3Rpb25zIHNvIHRoYXQgYWNjZXNzIGFjcm9zcyBhbGwgc3RvcmVzIGlzIGRvbmVcclxuICogYXRvbWljYWxseS5cclxuICovXHJcbnZhciBBTExfU1RPUkVTID0gVjhfU1RPUkVTO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEEgcGVyc2lzdGVkIGltcGxlbWVudGF0aW9uIG9mIEluZGV4TWFuYWdlci5cclxuICovXHJcbnZhciBJbmRleGVkRGJJbmRleE1hbmFnZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBJbmRleGVkRGJJbmRleE1hbmFnZXIoKSB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQW4gaW4tbWVtb3J5IGNvcHkgb2YgdGhlIGluZGV4IGVudHJpZXMgd2UndmUgYWxyZWFkeSB3cml0dGVuIHNpbmNlIHRoZSBTREtcclxuICAgICAgICAgKiBsYXVuY2hlZC4gVXNlZCB0byBhdm9pZCByZS13cml0aW5nIHRoZSBzYW1lIGVudHJ5IHJlcGVhdGVkbHkuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBUaGlzIGlzICpOT1QqIGEgY29tcGxldGUgY2FjaGUgb2Ygd2hhdCdzIGluIHBlcnNpc3RlbmNlIGFuZCBzbyBjYW4gbmV2ZXIgYmUgdXNlZCB0b1xyXG4gICAgICAgICAqIHNhdGlzZnkgcmVhZHMuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5jb2xsZWN0aW9uUGFyZW50c0NhY2hlID0gbmV3IE1lbW9yeUNvbGxlY3Rpb25QYXJlbnRJbmRleCgpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBBZGRzIGEgbmV3IGVudHJ5IHRvIHRoZSBjb2xsZWN0aW9uIHBhcmVudCBpbmRleC5cclxuICAgICAqXHJcbiAgICAgKiBSZXBlYXRlZCBjYWxscyBmb3IgdGhlIHNhbWUgY29sbGVjdGlvblBhdGggc2hvdWxkIGJlIGF2b2lkZWQgd2l0aGluIGFcclxuICAgICAqIHRyYW5zYWN0aW9uIGFzIEluZGV4ZWREYkluZGV4TWFuYWdlciBvbmx5IGNhY2hlcyB3cml0ZXMgb25jZSBhIHRyYW5zYWN0aW9uXHJcbiAgICAgKiBoYXMgYmVlbiBjb21taXR0ZWQuXHJcbiAgICAgKi9cclxuICAgIEluZGV4ZWREYkluZGV4TWFuYWdlci5wcm90b3R5cGUuYWRkVG9Db2xsZWN0aW9uUGFyZW50SW5kZXggPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24sIGNvbGxlY3Rpb25QYXRoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBhc3NlcnQoY29sbGVjdGlvblBhdGgubGVuZ3RoICUgMiA9PT0gMSwgJ0V4cGVjdGVkIGEgY29sbGVjdGlvbiBwYXRoLicpO1xyXG4gICAgICAgIGlmICghdGhpcy5jb2xsZWN0aW9uUGFyZW50c0NhY2hlLmhhcyhjb2xsZWN0aW9uUGF0aCkpIHtcclxuICAgICAgICAgICAgdmFyIGNvbGxlY3Rpb25JZCA9IGNvbGxlY3Rpb25QYXRoLmxhc3RTZWdtZW50KCk7XHJcbiAgICAgICAgICAgIHZhciBwYXJlbnRQYXRoID0gY29sbGVjdGlvblBhdGgucG9wTGFzdCgpO1xyXG4gICAgICAgICAgICB0cmFuc2FjdGlvbi5hZGRPbkNvbW1pdHRlZExpc3RlbmVyKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIC8vIEFkZCB0aGUgY29sbGVjdGlvbiB0byB0aGUgaW4gbWVtb3J5IGNhY2hlIG9ubHkgaWYgdGhlIHRyYW5zYWN0aW9uIHdhc1xyXG4gICAgICAgICAgICAgICAgLy8gc3VjY2Vzc2Z1bGx5IGNvbW1pdHRlZC5cclxuICAgICAgICAgICAgICAgIF90aGlzLmNvbGxlY3Rpb25QYXJlbnRzQ2FjaGUuYWRkKGNvbGxlY3Rpb25QYXRoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHZhciBjb2xsZWN0aW9uUGFyZW50ID0ge1xyXG4gICAgICAgICAgICAgICAgY29sbGVjdGlvbklkOiBjb2xsZWN0aW9uSWQsXHJcbiAgICAgICAgICAgICAgICBwYXJlbnQ6IGVuY29kZShwYXJlbnRQYXRoKVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICByZXR1cm4gY29sbGVjdGlvblBhcmVudHNTdG9yZSh0cmFuc2FjdGlvbikucHV0KGNvbGxlY3Rpb25QYXJlbnQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoKTtcclxuICAgIH07XHJcbiAgICBJbmRleGVkRGJJbmRleE1hbmFnZXIucHJvdG90eXBlLmdldENvbGxlY3Rpb25QYXJlbnRzID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCBjb2xsZWN0aW9uSWQpIHtcclxuICAgICAgICB2YXIgcGFyZW50UGF0aHMgPSBbXTtcclxuICAgICAgICB2YXIgcmFuZ2UgPSBJREJLZXlSYW5nZS5ib3VuZChbY29sbGVjdGlvbklkLCAnJ10sIFtpbW1lZGlhdGVTdWNjZXNzb3IoY29sbGVjdGlvbklkKSwgJyddLCBcclxuICAgICAgICAvKmxvd2VyT3Blbj0qLyBmYWxzZSwgXHJcbiAgICAgICAgLyp1cHBlck9wZW49Ki8gdHJ1ZSk7XHJcbiAgICAgICAgcmV0dXJuIGNvbGxlY3Rpb25QYXJlbnRzU3RvcmUodHJhbnNhY3Rpb24pXHJcbiAgICAgICAgICAgIC5sb2FkQWxsKHJhbmdlKVxyXG4gICAgICAgICAgICAubmV4dChmdW5jdGlvbiAoZW50cmllcykge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGVudHJpZXNfMSA9IGVudHJpZXM7IF9pIDwgZW50cmllc18xLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGVudHJ5ID0gZW50cmllc18xW19pXTtcclxuICAgICAgICAgICAgICAgIC8vIFRoaXMgY29sbGVjdGlvbklkIGd1YXJkIHNob3VsZG4ndCBiZSBuZWNlc3NhcnkgKGFuZCBpc24ndCBhcyBsb25nXHJcbiAgICAgICAgICAgICAgICAvLyBhcyB3ZSdyZSBydW5uaW5nIGluIGEgcmVhbCBicm93c2VyKSwgYnV0IHRoZXJlJ3MgYSBidWcgaW5cclxuICAgICAgICAgICAgICAgIC8vIGluZGV4ZWRkYnNoaW0gdGhhdCBicmVha3Mgb3VyIHJhbmdlIGluIG91ciB0ZXN0cyBydW5uaW5nIGluIG5vZGU6XHJcbiAgICAgICAgICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vYXhlbWNsaW9uL0luZGV4ZWREQlNoaW0vaXNzdWVzLzMzNFxyXG4gICAgICAgICAgICAgICAgaWYgKGVudHJ5LmNvbGxlY3Rpb25JZCAhPT0gY29sbGVjdGlvbklkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBwYXJlbnRQYXRocy5wdXNoKGRlY29kZShlbnRyeS5wYXJlbnQpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gcGFyZW50UGF0aHM7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEluZGV4ZWREYkluZGV4TWFuYWdlcjtcclxufSgpKTtcclxuLyoqXHJcbiAqIEhlbHBlciB0byBnZXQgYSB0eXBlZCBTaW1wbGVEYlN0b3JlIGZvciB0aGUgY29sbGVjdGlvblBhcmVudHNcclxuICogZG9jdW1lbnQgc3RvcmUuXHJcbiAqL1xyXG5mdW5jdGlvbiBjb2xsZWN0aW9uUGFyZW50c1N0b3JlKHR4bikge1xyXG4gICAgcmV0dXJuIEluZGV4ZWREYlBlcnNpc3RlbmNlLmdldFN0b3JlKHR4biwgRGJDb2xsZWN0aW9uUGFyZW50LnN0b3JlKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqIEFuIGVudW1lcmF0aW9uIG9mIHRoZSBkaWZmZXJlbnQgcHVycG9zZXMgd2UgaGF2ZSBmb3IgdGFyZ2V0cy4gKi9cclxudmFyIFRhcmdldFB1cnBvc2U7XHJcbihmdW5jdGlvbiAoVGFyZ2V0UHVycG9zZSkge1xyXG4gICAgLyoqIEEgcmVndWxhciwgbm9ybWFsIHF1ZXJ5IHRhcmdldC4gKi9cclxuICAgIFRhcmdldFB1cnBvc2VbVGFyZ2V0UHVycG9zZVtcIkxpc3RlblwiXSA9IDBdID0gXCJMaXN0ZW5cIjtcclxuICAgIC8qKlxyXG4gICAgICogVGhlIHF1ZXJ5IHRhcmdldCB3YXMgdXNlZCB0byByZWZpbGwgYSBxdWVyeSBhZnRlciBhbiBleGlzdGVuY2UgZmlsdGVyIG1pc21hdGNoLlxyXG4gICAgICovXHJcbiAgICBUYXJnZXRQdXJwb3NlW1RhcmdldFB1cnBvc2VbXCJFeGlzdGVuY2VGaWx0ZXJNaXNtYXRjaFwiXSA9IDFdID0gXCJFeGlzdGVuY2VGaWx0ZXJNaXNtYXRjaFwiO1xyXG4gICAgLyoqIFRoZSBxdWVyeSB0YXJnZXQgd2FzIHVzZWQgdG8gcmVzb2x2ZSBhIGxpbWJvIGRvY3VtZW50LiAqL1xyXG4gICAgVGFyZ2V0UHVycG9zZVtUYXJnZXRQdXJwb3NlW1wiTGltYm9SZXNvbHV0aW9uXCJdID0gMl0gPSBcIkxpbWJvUmVzb2x1dGlvblwiO1xyXG59KShUYXJnZXRQdXJwb3NlIHx8IChUYXJnZXRQdXJwb3NlID0ge30pKTtcclxuLyoqXHJcbiAqIEFuIGltbXV0YWJsZSBzZXQgb2YgbWV0YWRhdGEgdGhhdCB0aGUgbG9jYWwgc3RvcmUgdHJhY2tzIGZvciBlYWNoIHRhcmdldC5cclxuICovXHJcbnZhciBUYXJnZXREYXRhID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gVGFyZ2V0RGF0YShcclxuICAgIC8qKiBUaGUgdGFyZ2V0IGJlaW5nIGxpc3RlbmVkIHRvLiAqL1xyXG4gICAgdGFyZ2V0LCBcclxuICAgIC8qKlxyXG4gICAgICogVGhlIHRhcmdldCBJRCB0byB3aGljaCB0aGUgdGFyZ2V0IGNvcnJlc3BvbmRzOyBBc3NpZ25lZCBieSB0aGVcclxuICAgICAqIExvY2FsU3RvcmUgZm9yIHVzZXIgbGlzdGVucyBhbmQgYnkgdGhlIFN5bmNFbmdpbmUgZm9yIGxpbWJvIHdhdGNoZXMuXHJcbiAgICAgKi9cclxuICAgIHRhcmdldElkLCBcclxuICAgIC8qKiBUaGUgcHVycG9zZSBvZiB0aGUgdGFyZ2V0LiAqL1xyXG4gICAgcHVycG9zZSwgXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBzZXF1ZW5jZSBudW1iZXIgb2YgdGhlIGxhc3QgdHJhbnNhY3Rpb24gZHVyaW5nIHdoaWNoIHRoaXMgdGFyZ2V0IGRhdGFcclxuICAgICAqIHdhcyBtb2RpZmllZC5cclxuICAgICAqL1xyXG4gICAgc2VxdWVuY2VOdW1iZXIsIFxyXG4gICAgLyoqIFRoZSBsYXRlc3Qgc25hcHNob3QgdmVyc2lvbiBzZWVuIGZvciB0aGlzIHRhcmdldC4gKi9cclxuICAgIHNuYXBzaG90VmVyc2lvbiwgXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBtYXhpbXVtIHNuYXBzaG90IHZlcnNpb24gYXQgd2hpY2ggdGhlIGFzc29jaWF0ZWQgdmlld1xyXG4gICAgICogY29udGFpbmVkIG5vIGxpbWJvIGRvY3VtZW50cy5cclxuICAgICAqL1xyXG4gICAgbGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbiwgXHJcbiAgICAvKipcclxuICAgICAqIEFuIG9wYXF1ZSwgc2VydmVyLWFzc2lnbmVkIHRva2VuIHRoYXQgYWxsb3dzIHdhdGNoaW5nIGEgdGFyZ2V0IHRvIGJlXHJcbiAgICAgKiByZXN1bWVkIGFmdGVyIGRpc2Nvbm5lY3Rpbmcgd2l0aG91dCByZXRyYW5zbWl0dGluZyBhbGwgdGhlIGRhdGEgdGhhdFxyXG4gICAgICogbWF0Y2hlcyB0aGUgdGFyZ2V0LiBUaGUgcmVzdW1lIHRva2VuIGVzc2VudGlhbGx5IGlkZW50aWZpZXMgYSBwb2ludCBpblxyXG4gICAgICogdGltZSBmcm9tIHdoaWNoIHRoZSBzZXJ2ZXIgc2hvdWxkIHJlc3VtZSBzZW5kaW5nIHJlc3VsdHMuXHJcbiAgICAgKi9cclxuICAgIHJlc3VtZVRva2VuKSB7XHJcbiAgICAgICAgaWYgKHNuYXBzaG90VmVyc2lvbiA9PT0gdm9pZCAwKSB7IHNuYXBzaG90VmVyc2lvbiA9IFNuYXBzaG90VmVyc2lvbi5NSU47IH1cclxuICAgICAgICBpZiAobGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbiA9PT0gdm9pZCAwKSB7IGxhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24gPSBTbmFwc2hvdFZlcnNpb24uTUlOOyB9XHJcbiAgICAgICAgaWYgKHJlc3VtZVRva2VuID09PSB2b2lkIDApIHsgcmVzdW1lVG9rZW4gPSBlbXB0eUJ5dGVTdHJpbmcoKTsgfVxyXG4gICAgICAgIHRoaXMudGFyZ2V0ID0gdGFyZ2V0O1xyXG4gICAgICAgIHRoaXMudGFyZ2V0SWQgPSB0YXJnZXRJZDtcclxuICAgICAgICB0aGlzLnB1cnBvc2UgPSBwdXJwb3NlO1xyXG4gICAgICAgIHRoaXMuc2VxdWVuY2VOdW1iZXIgPSBzZXF1ZW5jZU51bWJlcjtcclxuICAgICAgICB0aGlzLnNuYXBzaG90VmVyc2lvbiA9IHNuYXBzaG90VmVyc2lvbjtcclxuICAgICAgICB0aGlzLmxhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24gPSBsYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uO1xyXG4gICAgICAgIHRoaXMucmVzdW1lVG9rZW4gPSByZXN1bWVUb2tlbjtcclxuICAgIH1cclxuICAgIC8qKiBDcmVhdGVzIGEgbmV3IHRhcmdldCBkYXRhIGluc3RhbmNlIHdpdGggYW4gdXBkYXRlZCBzZXF1ZW5jZSBudW1iZXIuICovXHJcbiAgICBUYXJnZXREYXRhLnByb3RvdHlwZS53aXRoU2VxdWVuY2VOdW1iZXIgPSBmdW5jdGlvbiAoc2VxdWVuY2VOdW1iZXIpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFRhcmdldERhdGEodGhpcy50YXJnZXQsIHRoaXMudGFyZ2V0SWQsIHRoaXMucHVycG9zZSwgc2VxdWVuY2VOdW1iZXIsIHRoaXMuc25hcHNob3RWZXJzaW9uLCB0aGlzLmxhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24sIHRoaXMucmVzdW1lVG9rZW4pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhIG5ldyB0YXJnZXQgZGF0YSBpbnN0YW5jZSB3aXRoIGFuIHVwZGF0ZWQgcmVzdW1lIHRva2VuIGFuZFxyXG4gICAgICogc25hcHNob3QgdmVyc2lvbi5cclxuICAgICAqL1xyXG4gICAgVGFyZ2V0RGF0YS5wcm90b3R5cGUud2l0aFJlc3VtZVRva2VuID0gZnVuY3Rpb24gKHJlc3VtZVRva2VuLCBzbmFwc2hvdFZlcnNpb24pIHtcclxuICAgICAgICByZXR1cm4gbmV3IFRhcmdldERhdGEodGhpcy50YXJnZXQsIHRoaXMudGFyZ2V0SWQsIHRoaXMucHVycG9zZSwgdGhpcy5zZXF1ZW5jZU51bWJlciwgc25hcHNob3RWZXJzaW9uLCB0aGlzLmxhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24sIHJlc3VtZVRva2VuKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYSBuZXcgdGFyZ2V0IGRhdGEgaW5zdGFuY2Ugd2l0aCBhbiB1cGRhdGVkIGxhc3QgbGltYm8gZnJlZVxyXG4gICAgICogc25hcHNob3QgdmVyc2lvbiBudW1iZXIuXHJcbiAgICAgKi9cclxuICAgIFRhcmdldERhdGEucHJvdG90eXBlLndpdGhMYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uID0gZnVuY3Rpb24gKGxhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24pIHtcclxuICAgICAgICByZXR1cm4gbmV3IFRhcmdldERhdGEodGhpcy50YXJnZXQsIHRoaXMudGFyZ2V0SWQsIHRoaXMucHVycG9zZSwgdGhpcy5zZXF1ZW5jZU51bWJlciwgdGhpcy5zbmFwc2hvdFZlcnNpb24sIGxhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24sIHRoaXMucmVzdW1lVG9rZW4pO1xyXG4gICAgfTtcclxuICAgIFRhcmdldERhdGEucHJvdG90eXBlLmlzRXF1YWwgPSBmdW5jdGlvbiAob3RoZXIpIHtcclxuICAgICAgICByZXR1cm4gKHRoaXMudGFyZ2V0SWQgPT09IG90aGVyLnRhcmdldElkICYmXHJcbiAgICAgICAgICAgIHRoaXMucHVycG9zZSA9PT0gb3RoZXIucHVycG9zZSAmJlxyXG4gICAgICAgICAgICB0aGlzLnNlcXVlbmNlTnVtYmVyID09PSBvdGhlci5zZXF1ZW5jZU51bWJlciAmJlxyXG4gICAgICAgICAgICB0aGlzLnNuYXBzaG90VmVyc2lvbi5pc0VxdWFsKG90aGVyLnNuYXBzaG90VmVyc2lvbikgJiZcclxuICAgICAgICAgICAgdGhpcy5sYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uLmlzRXF1YWwob3RoZXIubGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbikgJiZcclxuICAgICAgICAgICAgdGhpcy5yZXN1bWVUb2tlbiA9PT0gb3RoZXIucmVzdW1lVG9rZW4gJiZcclxuICAgICAgICAgICAgdGhpcy50YXJnZXQuaXNFcXVhbChvdGhlci50YXJnZXQpKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gVGFyZ2V0RGF0YTtcclxufSgpKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKiBTZXJpYWxpemVyIGZvciB2YWx1ZXMgc3RvcmVkIGluIHRoZSBMb2NhbFN0b3JlLiAqL1xyXG52YXIgTG9jYWxTZXJpYWxpemVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gTG9jYWxTZXJpYWxpemVyKHJlbW90ZVNlcmlhbGl6ZXIpIHtcclxuICAgICAgICB0aGlzLnJlbW90ZVNlcmlhbGl6ZXIgPSByZW1vdGVTZXJpYWxpemVyO1xyXG4gICAgfVxyXG4gICAgLyoqIERlY29kZXMgYSByZW1vdGUgZG9jdW1lbnQgZnJvbSBzdG9yYWdlIGxvY2FsbHkgdG8gYSBEb2N1bWVudC4gKi9cclxuICAgIExvY2FsU2VyaWFsaXplci5wcm90b3R5cGUuZnJvbURiUmVtb3RlRG9jdW1lbnQgPSBmdW5jdGlvbiAocmVtb3RlRG9jKSB7XHJcbiAgICAgICAgaWYgKHJlbW90ZURvYy5kb2N1bWVudCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yZW1vdGVTZXJpYWxpemVyLmZyb21Eb2N1bWVudChyZW1vdGVEb2MuZG9jdW1lbnQsICEhcmVtb3RlRG9jLmhhc0NvbW1pdHRlZE11dGF0aW9ucyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHJlbW90ZURvYy5ub0RvY3VtZW50KSB7XHJcbiAgICAgICAgICAgIHZhciBrZXkgPSBEb2N1bWVudEtleS5mcm9tU2VnbWVudHMocmVtb3RlRG9jLm5vRG9jdW1lbnQucGF0aCk7XHJcbiAgICAgICAgICAgIHZhciB2ZXJzaW9uID0gdGhpcy5mcm9tRGJUaW1lc3RhbXAocmVtb3RlRG9jLm5vRG9jdW1lbnQucmVhZFRpbWUpO1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IE5vRG9jdW1lbnQoa2V5LCB2ZXJzaW9uLCB7XHJcbiAgICAgICAgICAgICAgICBoYXNDb21taXR0ZWRNdXRhdGlvbnM6ICEhcmVtb3RlRG9jLmhhc0NvbW1pdHRlZE11dGF0aW9uc1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAocmVtb3RlRG9jLnVua25vd25Eb2N1bWVudCkge1xyXG4gICAgICAgICAgICB2YXIga2V5ID0gRG9jdW1lbnRLZXkuZnJvbVNlZ21lbnRzKHJlbW90ZURvYy51bmtub3duRG9jdW1lbnQucGF0aCk7XHJcbiAgICAgICAgICAgIHZhciB2ZXJzaW9uID0gdGhpcy5mcm9tRGJUaW1lc3RhbXAocmVtb3RlRG9jLnVua25vd25Eb2N1bWVudC52ZXJzaW9uKTtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBVbmtub3duRG9jdW1lbnQoa2V5LCB2ZXJzaW9uKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWlsKCdVbmV4cGVjdGVkIERiUmVtb3RlRG9jdW1lbnQnKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqIEVuY29kZXMgYSBkb2N1bWVudCBmb3Igc3RvcmFnZSBsb2NhbGx5LiAqL1xyXG4gICAgTG9jYWxTZXJpYWxpemVyLnByb3RvdHlwZS50b0RiUmVtb3RlRG9jdW1lbnQgPSBmdW5jdGlvbiAobWF5YmVEb2MsIHJlYWRUaW1lKSB7XHJcbiAgICAgICAgdmFyIGRiUmVhZFRpbWUgPSB0aGlzLnRvRGJUaW1lc3RhbXBLZXkocmVhZFRpbWUpO1xyXG4gICAgICAgIHZhciBwYXJlbnRQYXRoID0gbWF5YmVEb2Mua2V5LnBhdGgucG9wTGFzdCgpLnRvQXJyYXkoKTtcclxuICAgICAgICBpZiAobWF5YmVEb2MgaW5zdGFuY2VvZiBEb2N1bWVudCkge1xyXG4gICAgICAgICAgICB2YXIgZG9jID0gbWF5YmVEb2MucHJvdG9cclxuICAgICAgICAgICAgICAgID8gbWF5YmVEb2MucHJvdG9cclxuICAgICAgICAgICAgICAgIDogdGhpcy5yZW1vdGVTZXJpYWxpemVyLnRvRG9jdW1lbnQobWF5YmVEb2MpO1xyXG4gICAgICAgICAgICB2YXIgaGFzQ29tbWl0dGVkTXV0YXRpb25zID0gbWF5YmVEb2MuaGFzQ29tbWl0dGVkTXV0YXRpb25zO1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IERiUmVtb3RlRG9jdW1lbnQoXHJcbiAgICAgICAgICAgIC8qIHVua25vd25Eb2N1bWVudD0gKi8gbnVsbCwgXHJcbiAgICAgICAgICAgIC8qIG5vRG9jdW1lbnQ9ICovIG51bGwsIGRvYywgaGFzQ29tbWl0dGVkTXV0YXRpb25zLCBkYlJlYWRUaW1lLCBwYXJlbnRQYXRoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAobWF5YmVEb2MgaW5zdGFuY2VvZiBOb0RvY3VtZW50KSB7XHJcbiAgICAgICAgICAgIHZhciBwYXRoID0gbWF5YmVEb2Mua2V5LnBhdGgudG9BcnJheSgpO1xyXG4gICAgICAgICAgICB2YXIgcmVhZFRpbWVfMSA9IHRoaXMudG9EYlRpbWVzdGFtcChtYXliZURvYy52ZXJzaW9uKTtcclxuICAgICAgICAgICAgdmFyIGhhc0NvbW1pdHRlZE11dGF0aW9ucyA9IG1heWJlRG9jLmhhc0NvbW1pdHRlZE11dGF0aW9ucztcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBEYlJlbW90ZURvY3VtZW50KFxyXG4gICAgICAgICAgICAvKiB1bmtub3duRG9jdW1lbnQ9ICovIG51bGwsIG5ldyBEYk5vRG9jdW1lbnQocGF0aCwgcmVhZFRpbWVfMSksIFxyXG4gICAgICAgICAgICAvKiBkb2N1bWVudD0gKi8gbnVsbCwgaGFzQ29tbWl0dGVkTXV0YXRpb25zLCBkYlJlYWRUaW1lLCBwYXJlbnRQYXRoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAobWF5YmVEb2MgaW5zdGFuY2VvZiBVbmtub3duRG9jdW1lbnQpIHtcclxuICAgICAgICAgICAgdmFyIHBhdGggPSBtYXliZURvYy5rZXkucGF0aC50b0FycmF5KCk7XHJcbiAgICAgICAgICAgIHZhciByZWFkVGltZV8yID0gdGhpcy50b0RiVGltZXN0YW1wKG1heWJlRG9jLnZlcnNpb24pO1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IERiUmVtb3RlRG9jdW1lbnQobmV3IERiVW5rbm93bkRvY3VtZW50KHBhdGgsIHJlYWRUaW1lXzIpLCBcclxuICAgICAgICAgICAgLyogbm9Eb2N1bWVudD0gKi8gbnVsbCwgXHJcbiAgICAgICAgICAgIC8qIGRvY3VtZW50PSAqLyBudWxsLCBcclxuICAgICAgICAgICAgLyogaGFzQ29tbWl0dGVkTXV0YXRpb25zPSAqLyB0cnVlLCBkYlJlYWRUaW1lLCBwYXJlbnRQYXRoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWlsKCdVbmV4cGVjdGVkIE1heWJlRG9jdW1lbnQnKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgTG9jYWxTZXJpYWxpemVyLnByb3RvdHlwZS50b0RiVGltZXN0YW1wS2V5ID0gZnVuY3Rpb24gKHNuYXBzaG90VmVyc2lvbikge1xyXG4gICAgICAgIHZhciB0aW1lc3RhbXAgPSBzbmFwc2hvdFZlcnNpb24udG9UaW1lc3RhbXAoKTtcclxuICAgICAgICByZXR1cm4gW3RpbWVzdGFtcC5zZWNvbmRzLCB0aW1lc3RhbXAubmFub3NlY29uZHNdO1xyXG4gICAgfTtcclxuICAgIExvY2FsU2VyaWFsaXplci5wcm90b3R5cGUuZnJvbURiVGltZXN0YW1wS2V5ID0gZnVuY3Rpb24gKGRiVGltZXN0YW1wS2V5KSB7XHJcbiAgICAgICAgdmFyIHRpbWVzdGFtcCA9IG5ldyBUaW1lc3RhbXAoZGJUaW1lc3RhbXBLZXlbMF0sIGRiVGltZXN0YW1wS2V5WzFdKTtcclxuICAgICAgICByZXR1cm4gU25hcHNob3RWZXJzaW9uLmZyb21UaW1lc3RhbXAodGltZXN0YW1wKTtcclxuICAgIH07XHJcbiAgICBMb2NhbFNlcmlhbGl6ZXIucHJvdG90eXBlLnRvRGJUaW1lc3RhbXAgPSBmdW5jdGlvbiAoc25hcHNob3RWZXJzaW9uKSB7XHJcbiAgICAgICAgdmFyIHRpbWVzdGFtcCA9IHNuYXBzaG90VmVyc2lvbi50b1RpbWVzdGFtcCgpO1xyXG4gICAgICAgIHJldHVybiBuZXcgRGJUaW1lc3RhbXAodGltZXN0YW1wLnNlY29uZHMsIHRpbWVzdGFtcC5uYW5vc2Vjb25kcyk7XHJcbiAgICB9O1xyXG4gICAgTG9jYWxTZXJpYWxpemVyLnByb3RvdHlwZS5mcm9tRGJUaW1lc3RhbXAgPSBmdW5jdGlvbiAoZGJUaW1lc3RhbXApIHtcclxuICAgICAgICB2YXIgdGltZXN0YW1wID0gbmV3IFRpbWVzdGFtcChkYlRpbWVzdGFtcC5zZWNvbmRzLCBkYlRpbWVzdGFtcC5uYW5vc2Vjb25kcyk7XHJcbiAgICAgICAgcmV0dXJuIFNuYXBzaG90VmVyc2lvbi5mcm9tVGltZXN0YW1wKHRpbWVzdGFtcCk7XHJcbiAgICB9O1xyXG4gICAgLyoqIEVuY29kZXMgYSBiYXRjaCBvZiBtdXRhdGlvbnMgaW50byBhIERiTXV0YXRpb25CYXRjaCBmb3IgbG9jYWwgc3RvcmFnZS4gKi9cclxuICAgIExvY2FsU2VyaWFsaXplci5wcm90b3R5cGUudG9EYk11dGF0aW9uQmF0Y2ggPSBmdW5jdGlvbiAodXNlcklkLCBiYXRjaCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIHNlcmlhbGl6ZWRCYXNlTXV0YXRpb25zID0gYmF0Y2guYmFzZU11dGF0aW9ucy5tYXAoZnVuY3Rpb24gKG0pIHtcclxuICAgICAgICAgICAgcmV0dXJuIF90aGlzLnJlbW90ZVNlcmlhbGl6ZXIudG9NdXRhdGlvbihtKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB2YXIgc2VyaWFsaXplZE11dGF0aW9ucyA9IGJhdGNoLm11dGF0aW9ucy5tYXAoZnVuY3Rpb24gKG0pIHtcclxuICAgICAgICAgICAgcmV0dXJuIF90aGlzLnJlbW90ZVNlcmlhbGl6ZXIudG9NdXRhdGlvbihtKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gbmV3IERiTXV0YXRpb25CYXRjaCh1c2VySWQsIGJhdGNoLmJhdGNoSWQsIGJhdGNoLmxvY2FsV3JpdGVUaW1lLnRvTWlsbGlzKCksIHNlcmlhbGl6ZWRCYXNlTXV0YXRpb25zLCBzZXJpYWxpemVkTXV0YXRpb25zKTtcclxuICAgIH07XHJcbiAgICAvKiogRGVjb2RlcyBhIERiTXV0YXRpb25CYXRjaCBpbnRvIGEgTXV0YXRpb25CYXRjaCAqL1xyXG4gICAgTG9jYWxTZXJpYWxpemVyLnByb3RvdHlwZS5mcm9tRGJNdXRhdGlvbkJhdGNoID0gZnVuY3Rpb24gKGRiQmF0Y2gpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhciBiYXNlTXV0YXRpb25zID0gKGRiQmF0Y2guYmFzZU11dGF0aW9ucyB8fCBbXSkubWFwKGZ1bmN0aW9uIChtKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5yZW1vdGVTZXJpYWxpemVyLmZyb21NdXRhdGlvbihtKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB2YXIgbXV0YXRpb25zID0gZGJCYXRjaC5tdXRhdGlvbnMubWFwKGZ1bmN0aW9uIChtKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5yZW1vdGVTZXJpYWxpemVyLmZyb21NdXRhdGlvbihtKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB2YXIgdGltZXN0YW1wID0gVGltZXN0YW1wLmZyb21NaWxsaXMoZGJCYXRjaC5sb2NhbFdyaXRlVGltZU1zKTtcclxuICAgICAgICByZXR1cm4gbmV3IE11dGF0aW9uQmF0Y2goZGJCYXRjaC5iYXRjaElkLCB0aW1lc3RhbXAsIGJhc2VNdXRhdGlvbnMsIG11dGF0aW9ucyk7XHJcbiAgICB9O1xyXG4gICAgLypcclxuICAgICAqIEVuY29kZXMgYSBzZXQgb2YgZG9jdW1lbnQga2V5cyBpbnRvIGFuIGFycmF5IG9mIEVuY29kZWRSZXNvdXJjZVBhdGhzLlxyXG4gICAgICovXHJcbiAgICBMb2NhbFNlcmlhbGl6ZXIucHJvdG90eXBlLnRvRGJSZXNvdXJjZVBhdGhzID0gZnVuY3Rpb24gKGtleXMpIHtcclxuICAgICAgICB2YXIgZW5jb2RlZEtleXMgPSBbXTtcclxuICAgICAgICBrZXlzLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgICAgICBlbmNvZGVkS2V5cy5wdXNoKGVuY29kZShrZXkucGF0aCkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBlbmNvZGVkS2V5cztcclxuICAgIH07XHJcbiAgICAvKiogRGVjb2RlcyBhbiBhcnJheSBvZiBFbmNvZGVkUmVzb3VyY2VQYXRocyBpbnRvIGEgc2V0IG9mIGRvY3VtZW50IGtleXMuICovXHJcbiAgICBMb2NhbFNlcmlhbGl6ZXIucHJvdG90eXBlLmZyb21EYlJlc291cmNlUGF0aHMgPSBmdW5jdGlvbiAoZW5jb2RlZFBhdGhzKSB7XHJcbiAgICAgICAgdmFyIGtleXMgPSBkb2N1bWVudEtleVNldCgpO1xyXG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgZW5jb2RlZFBhdGhzXzEgPSBlbmNvZGVkUGF0aHM7IF9pIDwgZW5jb2RlZFBhdGhzXzEubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBkb2N1bWVudEtleSA9IGVuY29kZWRQYXRoc18xW19pXTtcclxuICAgICAgICAgICAga2V5cyA9IGtleXMuYWRkKG5ldyBEb2N1bWVudEtleShkZWNvZGUoZG9jdW1lbnRLZXkpKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBrZXlzO1xyXG4gICAgfTtcclxuICAgIC8qKiBEZWNvZGVzIGEgRGJUYXJnZXQgaW50byBUYXJnZXREYXRhICovXHJcbiAgICBMb2NhbFNlcmlhbGl6ZXIucHJvdG90eXBlLmZyb21EYlRhcmdldCA9IGZ1bmN0aW9uIChkYlRhcmdldCkge1xyXG4gICAgICAgIHZhciB2ZXJzaW9uID0gdGhpcy5mcm9tRGJUaW1lc3RhbXAoZGJUYXJnZXQucmVhZFRpbWUpO1xyXG4gICAgICAgIHZhciBsYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uID0gZGJUYXJnZXQubGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbiAhPT0gdW5kZWZpbmVkXHJcbiAgICAgICAgICAgID8gdGhpcy5mcm9tRGJUaW1lc3RhbXAoZGJUYXJnZXQubGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbilcclxuICAgICAgICAgICAgOiBTbmFwc2hvdFZlcnNpb24uTUlOO1xyXG4gICAgICAgIC8vIFRPRE8oYi8xNDA1NzM0ODYpOiBDb252ZXJ0IHRvIHBsYXRmb3JtIHJlcHJlc2VudGF0aW9uXHJcbiAgICAgICAgdmFyIHJlc3VtZVRva2VuID0gZGJUYXJnZXQucmVzdW1lVG9rZW47XHJcbiAgICAgICAgdmFyIHRhcmdldDtcclxuICAgICAgICBpZiAoaXNEb2N1bWVudFF1ZXJ5KGRiVGFyZ2V0LnF1ZXJ5KSkge1xyXG4gICAgICAgICAgICB0YXJnZXQgPSB0aGlzLnJlbW90ZVNlcmlhbGl6ZXIuZnJvbURvY3VtZW50c1RhcmdldChkYlRhcmdldC5xdWVyeSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0YXJnZXQgPSB0aGlzLnJlbW90ZVNlcmlhbGl6ZXIuZnJvbVF1ZXJ5VGFyZ2V0KGRiVGFyZ2V0LnF1ZXJ5KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG5ldyBUYXJnZXREYXRhKHRhcmdldCwgZGJUYXJnZXQudGFyZ2V0SWQsIFRhcmdldFB1cnBvc2UuTGlzdGVuLCBkYlRhcmdldC5sYXN0TGlzdGVuU2VxdWVuY2VOdW1iZXIsIHZlcnNpb24sIGxhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24sIHJlc3VtZVRva2VuKTtcclxuICAgIH07XHJcbiAgICAvKiogRW5jb2RlcyBUYXJnZXREYXRhIGludG8gYSBEYlRhcmdldCBmb3Igc3RvcmFnZSBsb2NhbGx5LiAqL1xyXG4gICAgTG9jYWxTZXJpYWxpemVyLnByb3RvdHlwZS50b0RiVGFyZ2V0ID0gZnVuY3Rpb24gKHRhcmdldERhdGEpIHtcclxuICAgICAgICBhc3NlcnQoVGFyZ2V0UHVycG9zZS5MaXN0ZW4gPT09IHRhcmdldERhdGEucHVycG9zZSwgJ09ubHkgcXVlcmllcyB3aXRoIHB1cnBvc2UgJyArXHJcbiAgICAgICAgICAgIFRhcmdldFB1cnBvc2UuTGlzdGVuICtcclxuICAgICAgICAgICAgJyBtYXkgYmUgc3RvcmVkLCBnb3QgJyArXHJcbiAgICAgICAgICAgIHRhcmdldERhdGEucHVycG9zZSk7XHJcbiAgICAgICAgdmFyIGRiVGltZXN0YW1wID0gdGhpcy50b0RiVGltZXN0YW1wKHRhcmdldERhdGEuc25hcHNob3RWZXJzaW9uKTtcclxuICAgICAgICB2YXIgZGJMYXN0TGltYm9GcmVlVGltZXN0YW1wID0gdGhpcy50b0RiVGltZXN0YW1wKHRhcmdldERhdGEubGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbik7XHJcbiAgICAgICAgdmFyIHF1ZXJ5UHJvdG87XHJcbiAgICAgICAgaWYgKHRhcmdldERhdGEudGFyZ2V0LmlzRG9jdW1lbnRRdWVyeSgpKSB7XHJcbiAgICAgICAgICAgIHF1ZXJ5UHJvdG8gPSB0aGlzLnJlbW90ZVNlcmlhbGl6ZXIudG9Eb2N1bWVudHNUYXJnZXQodGFyZ2V0RGF0YS50YXJnZXQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcXVlcnlQcm90byA9IHRoaXMucmVtb3RlU2VyaWFsaXplci50b1F1ZXJ5VGFyZ2V0KHRhcmdldERhdGEudGFyZ2V0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIHJlc3VtZVRva2VuO1xyXG4gICAgICAgIGlmICh0YXJnZXREYXRhLnJlc3VtZVRva2VuIGluc3RhbmNlb2YgVWludDhBcnJheSkge1xyXG4gICAgICAgICAgICAvLyBUT0RPKGIvNzg3NzE0MDMpOiBDb252ZXJ0IHRva2VucyB0byBzdHJpbmdzIGR1cmluZyBkZXNlcmlhbGl6YXRpb25cclxuICAgICAgICAgICAgYXNzZXJ0KFNpbXBsZURiLmlzTW9ja1BlcnNpc3RlbmNlKCksICdQZXJzaXN0aW5nIG5vbi1zdHJpbmcgc3RyZWFtIHRva2VucyBpcyBvbmx5IHN1cHBvcnRlZCB3aXRoIG1vY2sgcGVyc2lzdGVuY2UgLicpO1xyXG4gICAgICAgICAgICByZXN1bWVUb2tlbiA9IHRhcmdldERhdGEucmVzdW1lVG9rZW4udG9TdHJpbmcoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJlc3VtZVRva2VuID0gdGFyZ2V0RGF0YS5yZXN1bWVUb2tlbjtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gbGFzdExpc3RlblNlcXVlbmNlTnVtYmVyIGlzIGFsd2F5cyAwIHVudGlsIHdlIGRvIHJlYWwgR0MuXHJcbiAgICAgICAgcmV0dXJuIG5ldyBEYlRhcmdldCh0YXJnZXREYXRhLnRhcmdldElkLCB0YXJnZXREYXRhLnRhcmdldC5jYW5vbmljYWxJZCgpLCBkYlRpbWVzdGFtcCwgcmVzdW1lVG9rZW4sIHRhcmdldERhdGEuc2VxdWVuY2VOdW1iZXIsIGRiTGFzdExpbWJvRnJlZVRpbWVzdGFtcCwgcXVlcnlQcm90byk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIExvY2FsU2VyaWFsaXplcjtcclxufSgpKTtcclxuLyoqXHJcbiAqIEEgaGVscGVyIGZ1bmN0aW9uIGZvciBmaWd1cmluZyBvdXQgd2hhdCBraW5kIG9mIHF1ZXJ5IGhhcyBiZWVuIHN0b3JlZC5cclxuICovXHJcbmZ1bmN0aW9uIGlzRG9jdW1lbnRRdWVyeShkYlF1ZXJ5KSB7XHJcbiAgICByZXR1cm4gZGJRdWVyeS5kb2N1bWVudHMgIT09IHVuZGVmaW5lZDtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gYnVmZmVyRW50cnlDb21wYXJhdG9yKF9hLCBfYikge1xyXG4gICAgdmFyIGFTZXF1ZW5jZSA9IF9hWzBdLCBhSW5kZXggPSBfYVsxXTtcclxuICAgIHZhciBiU2VxdWVuY2UgPSBfYlswXSwgYkluZGV4ID0gX2JbMV07XHJcbiAgICB2YXIgc2VxQ21wID0gcHJpbWl0aXZlQ29tcGFyYXRvcihhU2VxdWVuY2UsIGJTZXF1ZW5jZSk7XHJcbiAgICBpZiAoc2VxQ21wID09PSAwKSB7XHJcbiAgICAgICAgLy8gVGhpcyBvcmRlciBkb2Vzbid0IG1hdHRlciwgYnV0IHdlIGNhbiBiaWFzIGFnYWluc3QgY2h1cm4gYnkgc29ydGluZ1xyXG4gICAgICAgIC8vIGVudHJpZXMgY3JlYXRlZCBlYXJsaWVyIGFzIGxlc3MgdGhhbiBuZXdlciBlbnRyaWVzLlxyXG4gICAgICAgIHJldHVybiBwcmltaXRpdmVDb21wYXJhdG9yKGFJbmRleCwgYkluZGV4KTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBzZXFDbXA7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIFVzZWQgdG8gY2FsY3VsYXRlIHRoZSBudGggc2VxdWVuY2UgbnVtYmVyLiBLZWVwcyBhIHJvbGxpbmcgYnVmZmVyIG9mIHRoZVxyXG4gKiBsb3dlc3QgbiB2YWx1ZXMgcGFzc2VkIHRvIGBhZGRFbGVtZW50YCwgYW5kIGZpbmFsbHkgcmVwb3J0cyB0aGUgbGFyZ2VzdCBvZlxyXG4gKiB0aGVtIGluIGBtYXhWYWx1ZWAuXHJcbiAqL1xyXG52YXIgUm9sbGluZ1NlcXVlbmNlTnVtYmVyQnVmZmVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gUm9sbGluZ1NlcXVlbmNlTnVtYmVyQnVmZmVyKG1heEVsZW1lbnRzKSB7XHJcbiAgICAgICAgdGhpcy5tYXhFbGVtZW50cyA9IG1heEVsZW1lbnRzO1xyXG4gICAgICAgIHRoaXMuYnVmZmVyID0gbmV3IFNvcnRlZFNldChidWZmZXJFbnRyeUNvbXBhcmF0b3IpO1xyXG4gICAgICAgIHRoaXMucHJldmlvdXNJbmRleCA9IDA7XHJcbiAgICB9XHJcbiAgICBSb2xsaW5nU2VxdWVuY2VOdW1iZXJCdWZmZXIucHJvdG90eXBlLm5leHRJbmRleCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gKyt0aGlzLnByZXZpb3VzSW5kZXg7XHJcbiAgICB9O1xyXG4gICAgUm9sbGluZ1NlcXVlbmNlTnVtYmVyQnVmZmVyLnByb3RvdHlwZS5hZGRFbGVtZW50ID0gZnVuY3Rpb24gKHNlcXVlbmNlTnVtYmVyKSB7XHJcbiAgICAgICAgdmFyIGVudHJ5ID0gW3NlcXVlbmNlTnVtYmVyLCB0aGlzLm5leHRJbmRleCgpXTtcclxuICAgICAgICBpZiAodGhpcy5idWZmZXIuc2l6ZSA8IHRoaXMubWF4RWxlbWVudHMpIHtcclxuICAgICAgICAgICAgdGhpcy5idWZmZXIgPSB0aGlzLmJ1ZmZlci5hZGQoZW50cnkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdmFyIGhpZ2hlc3RWYWx1ZSA9IHRoaXMuYnVmZmVyLmxhc3QoKTtcclxuICAgICAgICAgICAgaWYgKGJ1ZmZlckVudHJ5Q29tcGFyYXRvcihlbnRyeSwgaGlnaGVzdFZhbHVlKSA8IDApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYnVmZmVyID0gdGhpcy5idWZmZXIuZGVsZXRlKGhpZ2hlc3RWYWx1ZSkuYWRkKGVudHJ5KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoUm9sbGluZ1NlcXVlbmNlTnVtYmVyQnVmZmVyLnByb3RvdHlwZSwgXCJtYXhWYWx1ZVwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIC8vIEd1YXJhbnRlZWQgdG8gYmUgbm9uLWVtcHR5LiBJZiB3ZSBkZWNpZGUgd2UgYXJlIG5vdCBjb2xsZWN0aW5nIGFueVxyXG4gICAgICAgICAgICAvLyBzZXF1ZW5jZSBudW1iZXJzLCBudGhTZXF1ZW5jZU51bWJlciBiZWxvdyBzaG9ydC1jaXJjdWl0cy4gSWYgd2UgaGF2ZVxyXG4gICAgICAgICAgICAvLyBkZWNpZGVkIHRoYXQgd2UgYXJlIGNvbGxlY3RpbmcgbiBzZXF1ZW5jZSBudW1iZXJzLCBpdCdzIGJlY2F1c2UgbiBpcyBzb21lXHJcbiAgICAgICAgICAgIC8vIHBlcmNlbnRhZ2Ugb2YgdGhlIGV4aXN0aW5nIHNlcXVlbmNlIG51bWJlcnMuIFRoYXQgbWVhbnMgd2Ugc2hvdWxkIG5ldmVyXHJcbiAgICAgICAgICAgIC8vIGJlIGluIGEgc2l0dWF0aW9uIHdoZXJlIHdlIGFyZSBjb2xsZWN0aW5nIHNlcXVlbmNlIG51bWJlcnMgYnV0IGRvbid0XHJcbiAgICAgICAgICAgIC8vIGFjdHVhbGx5IGhhdmUgYW55LlxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5idWZmZXIubGFzdCgpWzBdO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIFJvbGxpbmdTZXF1ZW5jZU51bWJlckJ1ZmZlcjtcclxufSgpKTtcclxudmFyIEdDX0RJRF9OT1RfUlVOID0ge1xyXG4gICAgZGlkUnVuOiBmYWxzZSxcclxuICAgIHNlcXVlbmNlTnVtYmVyc0NvbGxlY3RlZDogMCxcclxuICAgIHRhcmdldHNSZW1vdmVkOiAwLFxyXG4gICAgZG9jdW1lbnRzUmVtb3ZlZDogMFxyXG59O1xyXG52YXIgTHJ1UGFyYW1zID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gTHJ1UGFyYW1zKFxyXG4gICAgLy8gV2hlbiB3ZSBhdHRlbXB0IHRvIGNvbGxlY3QsIHdlIHdpbGwgb25seSBkbyBzbyBpZiB0aGUgY2FjaGUgc2l6ZSBpcyBncmVhdGVyIHRoYW4gdGhpc1xyXG4gICAgLy8gdGhyZXNob2xkLiBQYXNzaW5nIGBDT0xMRUNUSU9OX0RJU0FCTEVEYCBoZXJlIHdpbGwgY2F1c2UgY29sbGVjdGlvbiB0byBhbHdheXMgYmUgc2tpcHBlZC5cclxuICAgIGNhY2hlU2l6ZUNvbGxlY3Rpb25UaHJlc2hvbGQsIFxyXG4gICAgLy8gVGhlIHBlcmNlbnRhZ2Ugb2Ygc2VxdWVuY2UgbnVtYmVycyB0aGF0IHdlIHdpbGwgYXR0ZW1wdCB0byBjb2xsZWN0XHJcbiAgICBwZXJjZW50aWxlVG9Db2xsZWN0LCBcclxuICAgIC8vIEEgY2FwIG9uIHRoZSB0b3RhbCBudW1iZXIgb2Ygc2VxdWVuY2UgbnVtYmVycyB0aGF0IHdpbGwgYmUgY29sbGVjdGVkLiBUaGlzIHByZXZlbnRzXHJcbiAgICAvLyB1cyBmcm9tIGNvbGxlY3RpbmcgYSBodWdlIG51bWJlciBvZiBzZXF1ZW5jZSBudW1iZXJzIGlmIHRoZSBjYWNoZSBoYXMgZ3Jvd24gdmVyeSBsYXJnZS5cclxuICAgIG1heGltdW1TZXF1ZW5jZU51bWJlcnNUb0NvbGxlY3QpIHtcclxuICAgICAgICB0aGlzLmNhY2hlU2l6ZUNvbGxlY3Rpb25UaHJlc2hvbGQgPSBjYWNoZVNpemVDb2xsZWN0aW9uVGhyZXNob2xkO1xyXG4gICAgICAgIHRoaXMucGVyY2VudGlsZVRvQ29sbGVjdCA9IHBlcmNlbnRpbGVUb0NvbGxlY3Q7XHJcbiAgICAgICAgdGhpcy5tYXhpbXVtU2VxdWVuY2VOdW1iZXJzVG9Db2xsZWN0ID0gbWF4aW11bVNlcXVlbmNlTnVtYmVyc1RvQ29sbGVjdDtcclxuICAgIH1cclxuICAgIExydVBhcmFtcy53aXRoQ2FjaGVTaXplID0gZnVuY3Rpb24gKGNhY2hlU2l6ZSkge1xyXG4gICAgICAgIHJldHVybiBuZXcgTHJ1UGFyYW1zKGNhY2hlU2l6ZSwgTHJ1UGFyYW1zLkRFRkFVTFRfQ09MTEVDVElPTl9QRVJDRU5USUxFLCBMcnVQYXJhbXMuREVGQVVMVF9NQVhfU0VRVUVOQ0VfTlVNQkVSU19UT19DT0xMRUNUKTtcclxuICAgIH07XHJcbiAgICBMcnVQYXJhbXMuQ09MTEVDVElPTl9ESVNBQkxFRCA9IC0xO1xyXG4gICAgTHJ1UGFyYW1zLk1JTklNVU1fQ0FDSEVfU0laRV9CWVRFUyA9IDEgKiAxMDI0ICogMTAyNDtcclxuICAgIExydVBhcmFtcy5ERUZBVUxUX0NBQ0hFX1NJWkVfQllURVMgPSA0MCAqIDEwMjQgKiAxMDI0O1xyXG4gICAgTHJ1UGFyYW1zLkRFRkFVTFRfQ09MTEVDVElPTl9QRVJDRU5USUxFID0gMTA7XHJcbiAgICBMcnVQYXJhbXMuREVGQVVMVF9NQVhfU0VRVUVOQ0VfTlVNQkVSU19UT19DT0xMRUNUID0gMTAwMDtcclxuICAgIExydVBhcmFtcy5ERUZBVUxUID0gbmV3IExydVBhcmFtcyhMcnVQYXJhbXMuREVGQVVMVF9DQUNIRV9TSVpFX0JZVEVTLCBMcnVQYXJhbXMuREVGQVVMVF9DT0xMRUNUSU9OX1BFUkNFTlRJTEUsIExydVBhcmFtcy5ERUZBVUxUX01BWF9TRVFVRU5DRV9OVU1CRVJTX1RPX0NPTExFQ1QpO1xyXG4gICAgTHJ1UGFyYW1zLkRJU0FCTEVEID0gbmV3IExydVBhcmFtcyhMcnVQYXJhbXMuQ09MTEVDVElPTl9ESVNBQkxFRCwgMCwgMCk7XHJcbiAgICByZXR1cm4gTHJ1UGFyYW1zO1xyXG59KCkpO1xyXG4vKiogSG93IGxvbmcgd2Ugd2FpdCB0byB0cnkgcnVubmluZyBMUlUgR0MgYWZ0ZXIgU0RLIGluaXRpYWxpemF0aW9uLiAqL1xyXG52YXIgSU5JVElBTF9HQ19ERUxBWV9NUyA9IDEgKiA2MCAqIDEwMDA7XHJcbi8qKiBNaW5pbXVtIGFtb3VudCBvZiB0aW1lIGJldHdlZW4gR0MgY2hlY2tzLCBhZnRlciB0aGUgZmlyc3Qgb25lLiAqL1xyXG52YXIgUkVHVUxBUl9HQ19ERUxBWV9NUyA9IDUgKiA2MCAqIDEwMDA7XHJcbi8qKlxyXG4gKiBUaGlzIGNsYXNzIGlzIHJlc3BvbnNpYmxlIGZvciB0aGUgc2NoZWR1bGluZyBvZiBMUlUgZ2FyYmFnZSBjb2xsZWN0aW9uLiBJdCBoYW5kbGVzIGNoZWNraW5nXHJcbiAqIHdoZXRoZXIgb3Igbm90IEdDIGlzIGVuYWJsZWQsIGFzIHdlbGwgYXMgd2hpY2ggZGVsYXkgdG8gdXNlIGJlZm9yZSB0aGUgbmV4dCBydW4uXHJcbiAqL1xyXG52YXIgTHJ1U2NoZWR1bGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gTHJ1U2NoZWR1bGVyKGdhcmJhZ2VDb2xsZWN0b3IsIGFzeW5jUXVldWUsIGxvY2FsU3RvcmUpIHtcclxuICAgICAgICB0aGlzLmdhcmJhZ2VDb2xsZWN0b3IgPSBnYXJiYWdlQ29sbGVjdG9yO1xyXG4gICAgICAgIHRoaXMuYXN5bmNRdWV1ZSA9IGFzeW5jUXVldWU7XHJcbiAgICAgICAgdGhpcy5sb2NhbFN0b3JlID0gbG9jYWxTdG9yZTtcclxuICAgICAgICB0aGlzLmhhc1J1biA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuZ2NUYXNrID0gbnVsbDtcclxuICAgIH1cclxuICAgIExydVNjaGVkdWxlci5wcm90b3R5cGUuc3RhcnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgYXNzZXJ0KHRoaXMuZ2NUYXNrID09PSBudWxsLCAnQ2Fubm90IHN0YXJ0IGFuIGFscmVhZHkgc3RhcnRlZCBMcnVTY2hlZHVsZXInKTtcclxuICAgICAgICBpZiAodGhpcy5nYXJiYWdlQ29sbGVjdG9yLnBhcmFtcy5jYWNoZVNpemVDb2xsZWN0aW9uVGhyZXNob2xkICE9PVxyXG4gICAgICAgICAgICBMcnVQYXJhbXMuQ09MTEVDVElPTl9ESVNBQkxFRCkge1xyXG4gICAgICAgICAgICB0aGlzLnNjaGVkdWxlR0MoKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgTHJ1U2NoZWR1bGVyLnByb3RvdHlwZS5zdG9wID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmdjVGFzaykge1xyXG4gICAgICAgICAgICB0aGlzLmdjVGFzay5jYW5jZWwoKTtcclxuICAgICAgICAgICAgdGhpcy5nY1Rhc2sgPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTHJ1U2NoZWR1bGVyLnByb3RvdHlwZSwgXCJzdGFydGVkXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2NUYXNrICE9PSBudWxsO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgTHJ1U2NoZWR1bGVyLnByb3RvdHlwZS5zY2hlZHVsZUdDID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgYXNzZXJ0KHRoaXMuZ2NUYXNrID09PSBudWxsLCAnQ2Fubm90IHNjaGVkdWxlIEdDIHdoaWxlIGEgdGFzayBpcyBwZW5kaW5nJyk7XHJcbiAgICAgICAgdmFyIGRlbGF5ID0gdGhpcy5oYXNSdW4gPyBSRUdVTEFSX0dDX0RFTEFZX01TIDogSU5JVElBTF9HQ19ERUxBWV9NUztcclxuICAgICAgICBkZWJ1ZygnTHJ1R2FyYmFnZUNvbGxlY3RvcicsIFwiR2FyYmFnZSBjb2xsZWN0aW9uIHNjaGVkdWxlZCBpbiBcIiArIGRlbGF5ICsgXCJtc1wiKTtcclxuICAgICAgICB0aGlzLmdjVGFzayA9IHRoaXMuYXN5bmNRdWV1ZS5lbnF1ZXVlQWZ0ZXJEZWxheShUaW1lcklkLkxydUdhcmJhZ2VDb2xsZWN0aW9uLCBkZWxheSwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBfdGhpcy5nY1Rhc2sgPSBudWxsO1xyXG4gICAgICAgICAgICBfdGhpcy5oYXNSdW4gPSB0cnVlO1xyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXMubG9jYWxTdG9yZVxyXG4gICAgICAgICAgICAgICAgLmNvbGxlY3RHYXJiYWdlKF90aGlzLmdhcmJhZ2VDb2xsZWN0b3IpXHJcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5zY2hlZHVsZUdDKCk7IH0pXHJcbiAgICAgICAgICAgICAgICAuY2F0Y2goaWdub3JlSWZQcmltYXJ5TGVhc2VMb3NzKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gTHJ1U2NoZWR1bGVyO1xyXG59KCkpO1xyXG4vKiogSW1wbGVtZW50cyB0aGUgc3RlcHMgZm9yIExSVSBnYXJiYWdlIGNvbGxlY3Rpb24uICovXHJcbnZhciBMcnVHYXJiYWdlQ29sbGVjdG9yID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gTHJ1R2FyYmFnZUNvbGxlY3RvcihkZWxlZ2F0ZSwgcGFyYW1zKSB7XHJcbiAgICAgICAgdGhpcy5kZWxlZ2F0ZSA9IGRlbGVnYXRlO1xyXG4gICAgICAgIHRoaXMucGFyYW1zID0gcGFyYW1zO1xyXG4gICAgfVxyXG4gICAgLyoqIEdpdmVuIGEgcGVyY2VudGlsZSBvZiB0YXJnZXQgdG8gY29sbGVjdCwgcmV0dXJucyB0aGUgbnVtYmVyIG9mIHRhcmdldHMgdG8gY29sbGVjdC4gKi9cclxuICAgIExydUdhcmJhZ2VDb2xsZWN0b3IucHJvdG90eXBlLmNhbGN1bGF0ZVRhcmdldENvdW50ID0gZnVuY3Rpb24gKHR4biwgcGVyY2VudGlsZSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRlbGVnYXRlLmdldFNlcXVlbmNlTnVtYmVyQ291bnQodHhuKS5uZXh0KGZ1bmN0aW9uICh0YXJnZXRDb3VudCkge1xyXG4gICAgICAgICAgICByZXR1cm4gTWF0aC5mbG9vcigocGVyY2VudGlsZSAvIDEwMC4wKSAqIHRhcmdldENvdW50KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKiogUmV0dXJucyB0aGUgbnRoIHNlcXVlbmNlIG51bWJlciwgY291bnRpbmcgaW4gb3JkZXIgZnJvbSB0aGUgc21hbGxlc3QuICovXHJcbiAgICBMcnVHYXJiYWdlQ29sbGVjdG9yLnByb3RvdHlwZS5udGhTZXF1ZW5jZU51bWJlciA9IGZ1bmN0aW9uICh0eG4sIG4pIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIGlmIChuID09PSAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZShMaXN0ZW5TZXF1ZW5jZS5JTlZBTElEKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGJ1ZmZlciA9IG5ldyBSb2xsaW5nU2VxdWVuY2VOdW1iZXJCdWZmZXIobik7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGVsZWdhdGVcclxuICAgICAgICAgICAgLmZvckVhY2hUYXJnZXQodHhuLCBmdW5jdGlvbiAodGFyZ2V0KSB7IHJldHVybiBidWZmZXIuYWRkRWxlbWVudCh0YXJnZXQuc2VxdWVuY2VOdW1iZXIpOyB9KVxyXG4gICAgICAgICAgICAubmV4dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5kZWxlZ2F0ZS5mb3JFYWNoT3JwaGFuZWREb2N1bWVudFNlcXVlbmNlTnVtYmVyKHR4biwgZnVuY3Rpb24gKHNlcXVlbmNlTnVtYmVyKSB7IHJldHVybiBidWZmZXIuYWRkRWxlbWVudChzZXF1ZW5jZU51bWJlcik7IH0pO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIGJ1ZmZlci5tYXhWYWx1ZTsgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZW1vdmVzIHRhcmdldHMgd2l0aCBhIHNlcXVlbmNlIG51bWJlciBlcXVhbCB0byBvciBsZXNzIHRoYW4gdGhlIGdpdmVuIHVwcGVyIGJvdW5kLCBhbmQgcmVtb3Zlc1xyXG4gICAgICogZG9jdW1lbnQgYXNzb2NpYXRpb25zIHdpdGggdGhvc2UgdGFyZ2V0cy5cclxuICAgICAqL1xyXG4gICAgTHJ1R2FyYmFnZUNvbGxlY3Rvci5wcm90b3R5cGUucmVtb3ZlVGFyZ2V0cyA9IGZ1bmN0aW9uICh0eG4sIHVwcGVyQm91bmQsIGFjdGl2ZVRhcmdldElkcykge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRlbGVnYXRlLnJlbW92ZVRhcmdldHModHhuLCB1cHBlckJvdW5kLCBhY3RpdmVUYXJnZXRJZHMpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmVtb3ZlcyBkb2N1bWVudHMgdGhhdCBoYXZlIGEgc2VxdWVuY2UgbnVtYmVyIGVxdWFsIHRvIG9yIGxlc3MgdGhhbiB0aGUgdXBwZXIgYm91bmQgYW5kIGFyZSBub3RcclxuICAgICAqIG90aGVyd2lzZSBwaW5uZWQuXHJcbiAgICAgKi9cclxuICAgIExydUdhcmJhZ2VDb2xsZWN0b3IucHJvdG90eXBlLnJlbW92ZU9ycGhhbmVkRG9jdW1lbnRzID0gZnVuY3Rpb24gKHR4biwgdXBwZXJCb3VuZCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRlbGVnYXRlLnJlbW92ZU9ycGhhbmVkRG9jdW1lbnRzKHR4biwgdXBwZXJCb3VuZCk7XHJcbiAgICB9O1xyXG4gICAgTHJ1R2FyYmFnZUNvbGxlY3Rvci5wcm90b3R5cGUuY29sbGVjdCA9IGZ1bmN0aW9uICh0eG4sIGFjdGl2ZVRhcmdldElkcykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgaWYgKHRoaXMucGFyYW1zLmNhY2hlU2l6ZUNvbGxlY3Rpb25UaHJlc2hvbGQgPT09IExydVBhcmFtcy5DT0xMRUNUSU9OX0RJU0FCTEVEKSB7XHJcbiAgICAgICAgICAgIGRlYnVnKCdMcnVHYXJiYWdlQ29sbGVjdG9yJywgJ0dhcmJhZ2UgY29sbGVjdGlvbiBza2lwcGVkOyBkaXNhYmxlZCcpO1xyXG4gICAgICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoR0NfRElEX05PVF9SVU4pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRDYWNoZVNpemUodHhuKS5uZXh0KGZ1bmN0aW9uIChjYWNoZVNpemUpIHtcclxuICAgICAgICAgICAgaWYgKGNhY2hlU2l6ZSA8IF90aGlzLnBhcmFtcy5jYWNoZVNpemVDb2xsZWN0aW9uVGhyZXNob2xkKSB7XHJcbiAgICAgICAgICAgICAgICBkZWJ1ZygnTHJ1R2FyYmFnZUNvbGxlY3RvcicsIFwiR2FyYmFnZSBjb2xsZWN0aW9uIHNraXBwZWQ7IENhY2hlIHNpemUgXCIgKyBjYWNoZVNpemUgKyBcIiBcIiArXHJcbiAgICAgICAgICAgICAgICAgICAgKFwiaXMgbG93ZXIgdGhhbiB0aHJlc2hvbGQgXCIgKyBfdGhpcy5wYXJhbXMuY2FjaGVTaXplQ29sbGVjdGlvblRocmVzaG9sZCkpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIEdDX0RJRF9OT1RfUlVOO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLnJ1bkdhcmJhZ2VDb2xsZWN0aW9uKHR4biwgYWN0aXZlVGFyZ2V0SWRzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIExydUdhcmJhZ2VDb2xsZWN0b3IucHJvdG90eXBlLmdldENhY2hlU2l6ZSA9IGZ1bmN0aW9uICh0eG4pIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5kZWxlZ2F0ZS5nZXRDYWNoZVNpemUodHhuKTtcclxuICAgIH07XHJcbiAgICBMcnVHYXJiYWdlQ29sbGVjdG9yLnByb3RvdHlwZS5ydW5HYXJiYWdlQ29sbGVjdGlvbiA9IGZ1bmN0aW9uICh0eG4sIGFjdGl2ZVRhcmdldElkcykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIHVwcGVyQm91bmRTZXF1ZW5jZU51bWJlcjtcclxuICAgICAgICB2YXIgc2VxdWVuY2VOdW1iZXJzVG9Db2xsZWN0LCB0YXJnZXRzUmVtb3ZlZDtcclxuICAgICAgICAvLyBUaW1lc3RhbXBzIGZvciB2YXJpb3VzIHBpZWNlcyBvZiB0aGUgcHJvY2Vzc1xyXG4gICAgICAgIHZhciBjb3VudGVkVGFyZ2V0c1RzLCBmb3VuZFVwcGVyQm91bmRUcywgcmVtb3ZlZFRhcmdldHNUcywgcmVtb3ZlZERvY3VtZW50c1RzO1xyXG4gICAgICAgIHZhciBzdGFydFRzID0gRGF0ZS5ub3coKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5jYWxjdWxhdGVUYXJnZXRDb3VudCh0eG4sIHRoaXMucGFyYW1zLnBlcmNlbnRpbGVUb0NvbGxlY3QpXHJcbiAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uIChzZXF1ZW5jZU51bWJlcnMpIHtcclxuICAgICAgICAgICAgLy8gQ2FwIGF0IHRoZSBjb25maWd1cmVkIG1heFxyXG4gICAgICAgICAgICBpZiAoc2VxdWVuY2VOdW1iZXJzID4gX3RoaXMucGFyYW1zLm1heGltdW1TZXF1ZW5jZU51bWJlcnNUb0NvbGxlY3QpIHtcclxuICAgICAgICAgICAgICAgIGRlYnVnKCdMcnVHYXJiYWdlQ29sbGVjdG9yJywgJ0NhcHBpbmcgc2VxdWVuY2UgbnVtYmVycyB0byBjb2xsZWN0IGRvd24gJyArXHJcbiAgICAgICAgICAgICAgICAgICAgKFwidG8gdGhlIG1heGltdW0gb2YgXCIgKyBfdGhpcy5wYXJhbXMubWF4aW11bVNlcXVlbmNlTnVtYmVyc1RvQ29sbGVjdCArIFwiIFwiKSArXHJcbiAgICAgICAgICAgICAgICAgICAgKFwiZnJvbSBcIiArIHNlcXVlbmNlTnVtYmVycykpO1xyXG4gICAgICAgICAgICAgICAgc2VxdWVuY2VOdW1iZXJzVG9Db2xsZWN0ID0gX3RoaXMucGFyYW1zXHJcbiAgICAgICAgICAgICAgICAgICAgLm1heGltdW1TZXF1ZW5jZU51bWJlcnNUb0NvbGxlY3Q7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBzZXF1ZW5jZU51bWJlcnNUb0NvbGxlY3QgPSBzZXF1ZW5jZU51bWJlcnM7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY291bnRlZFRhcmdldHNUcyA9IERhdGUubm93KCk7XHJcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5udGhTZXF1ZW5jZU51bWJlcih0eG4sIHNlcXVlbmNlTnVtYmVyc1RvQ29sbGVjdCk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKHVwcGVyQm91bmQpIHtcclxuICAgICAgICAgICAgdXBwZXJCb3VuZFNlcXVlbmNlTnVtYmVyID0gdXBwZXJCb3VuZDtcclxuICAgICAgICAgICAgZm91bmRVcHBlckJvdW5kVHMgPSBEYXRlLm5vdygpO1xyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXMucmVtb3ZlVGFyZ2V0cyh0eG4sIHVwcGVyQm91bmRTZXF1ZW5jZU51bWJlciwgYWN0aXZlVGFyZ2V0SWRzKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAubmV4dChmdW5jdGlvbiAobnVtVGFyZ2V0c1JlbW92ZWQpIHtcclxuICAgICAgICAgICAgdGFyZ2V0c1JlbW92ZWQgPSBudW1UYXJnZXRzUmVtb3ZlZDtcclxuICAgICAgICAgICAgcmVtb3ZlZFRhcmdldHNUcyA9IERhdGUubm93KCk7XHJcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5yZW1vdmVPcnBoYW5lZERvY3VtZW50cyh0eG4sIHVwcGVyQm91bmRTZXF1ZW5jZU51bWJlcik7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKGRvY3VtZW50c1JlbW92ZWQpIHtcclxuICAgICAgICAgICAgcmVtb3ZlZERvY3VtZW50c1RzID0gRGF0ZS5ub3coKTtcclxuICAgICAgICAgICAgaWYgKGdldExvZ0xldmVsKCkgPD0gTG9nTGV2ZWwuREVCVUcpIHtcclxuICAgICAgICAgICAgICAgIHZhciBkZXNjID0gJ0xSVSBHYXJiYWdlIENvbGxlY3Rpb25cXG4nICtcclxuICAgICAgICAgICAgICAgICAgICAoXCJcXHRDb3VudGVkIHRhcmdldHMgaW4gXCIgKyAoY291bnRlZFRhcmdldHNUcyAtIHN0YXJ0VHMpICsgXCJtc1xcblwiKSArXHJcbiAgICAgICAgICAgICAgICAgICAgKFwiXFx0RGV0ZXJtaW5lZCBsZWFzdCByZWNlbnRseSB1c2VkIFwiICsgc2VxdWVuY2VOdW1iZXJzVG9Db2xsZWN0ICsgXCIgaW4gXCIpICtcclxuICAgICAgICAgICAgICAgICAgICAoZm91bmRVcHBlckJvdW5kVHMgLSBjb3VudGVkVGFyZ2V0c1RzICsgXCJtc1xcblwiKSArXHJcbiAgICAgICAgICAgICAgICAgICAgKFwiXFx0UmVtb3ZlZCBcIiArIHRhcmdldHNSZW1vdmVkICsgXCIgdGFyZ2V0cyBpbiBcIikgK1xyXG4gICAgICAgICAgICAgICAgICAgIChyZW1vdmVkVGFyZ2V0c1RzIC0gZm91bmRVcHBlckJvdW5kVHMgKyBcIm1zXFxuXCIpICtcclxuICAgICAgICAgICAgICAgICAgICAoXCJcXHRSZW1vdmVkIFwiICsgZG9jdW1lbnRzUmVtb3ZlZCArIFwiIGRvY3VtZW50cyBpbiBcIikgK1xyXG4gICAgICAgICAgICAgICAgICAgIChyZW1vdmVkRG9jdW1lbnRzVHMgLSByZW1vdmVkVGFyZ2V0c1RzICsgXCJtc1xcblwiKSArXHJcbiAgICAgICAgICAgICAgICAgICAgKFwiVG90YWwgRHVyYXRpb246IFwiICsgKHJlbW92ZWREb2N1bWVudHNUcyAtIHN0YXJ0VHMpICsgXCJtc1wiKTtcclxuICAgICAgICAgICAgICAgIGRlYnVnKCdMcnVHYXJiYWdlQ29sbGVjdG9yJywgZGVzYyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKHtcclxuICAgICAgICAgICAgICAgIGRpZFJ1bjogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHNlcXVlbmNlTnVtYmVyc0NvbGxlY3RlZDogc2VxdWVuY2VOdW1iZXJzVG9Db2xsZWN0LFxyXG4gICAgICAgICAgICAgICAgdGFyZ2V0c1JlbW92ZWQ6IHRhcmdldHNSZW1vdmVkLFxyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnRzUmVtb3ZlZDogZG9jdW1lbnRzUmVtb3ZlZFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gTHJ1R2FyYmFnZUNvbGxlY3RvcjtcclxufSgpKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBBIGJhc2UgY2xhc3MgcmVwcmVzZW50aW5nIGEgcGVyc2lzdGVuY2UgdHJhbnNhY3Rpb24sIGVuY2Fwc3VsYXRpbmcgYm90aCB0aGVcclxuICogdHJhbnNhY3Rpb24ncyBzZXF1ZW5jZSBudW1iZXJzIGFzIHdlbGwgYXMgYSBsaXN0IG9mIG9uQ29tbWl0dGVkIGxpc3RlbmVycy5cclxuICpcclxuICogV2hlbiB5b3UgY2FsbCBQZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbigpLCBpdCB3aWxsIGNyZWF0ZSBhIHRyYW5zYWN0aW9uIGFuZFxyXG4gKiBwYXNzIGl0IHRvIHlvdXIgY2FsbGJhY2suIFlvdSB0aGVuIHBhc3MgaXQgdG8gYW55IG1ldGhvZCB0aGF0IG9wZXJhdGVzXHJcbiAqIG9uIHBlcnNpc3RlbmNlLlxyXG4gKi9cclxudmFyIFBlcnNpc3RlbmNlVHJhbnNhY3Rpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBQZXJzaXN0ZW5jZVRyYW5zYWN0aW9uKCkge1xyXG4gICAgICAgIHRoaXMub25Db21taXR0ZWRMaXN0ZW5lcnMgPSBbXTtcclxuICAgIH1cclxuICAgIFBlcnNpc3RlbmNlVHJhbnNhY3Rpb24ucHJvdG90eXBlLmFkZE9uQ29tbWl0dGVkTGlzdGVuZXIgPSBmdW5jdGlvbiAobGlzdGVuZXIpIHtcclxuICAgICAgICB0aGlzLm9uQ29tbWl0dGVkTGlzdGVuZXJzLnB1c2gobGlzdGVuZXIpO1xyXG4gICAgfTtcclxuICAgIFBlcnNpc3RlbmNlVHJhbnNhY3Rpb24ucHJvdG90eXBlLnJhaXNlT25Db21taXR0ZWRFdmVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLm9uQ29tbWl0dGVkTGlzdGVuZXJzLmZvckVhY2goZnVuY3Rpb24gKGxpc3RlbmVyKSB7IHJldHVybiBsaXN0ZW5lcigpOyB9KTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gUGVyc2lzdGVuY2VUcmFuc2FjdGlvbjtcclxufSgpKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnZhciBMT0dfVEFHJDEgPSAnSW5kZXhlZERiUGVyc2lzdGVuY2UnO1xyXG4vKipcclxuICogT2xkZXN0IGFjY2VwdGFibGUgYWdlIGluIG1pbGxpc2Vjb25kcyBmb3IgY2xpZW50IG1ldGFkYXRhIGJlZm9yZSB0aGUgY2xpZW50XHJcbiAqIGlzIGNvbnNpZGVyZWQgaW5hY3RpdmUgYW5kIGl0cyBhc3NvY2lhdGVkIGRhdGEgaXMgZ2FyYmFnZSBjb2xsZWN0ZWQuXHJcbiAqL1xyXG52YXIgTUFYX0NMSUVOVF9BR0VfTVMgPSAzMCAqIDYwICogMTAwMDsgLy8gMzAgbWludXRlc1xyXG4vKipcclxuICogT2xkZXN0IGFjY2VwdGFibGUgbWV0YWRhdGEgYWdlIGZvciBjbGllbnRzIHRoYXQgbWF5IHBhcnRpY2lwYXRlIGluIHRoZVxyXG4gKiBwcmltYXJ5IGxlYXNlIGVsZWN0aW9uLiBDbGllbnRzIHRoYXQgaGF2ZSBub3QgdXBkYXRlZCB0aGVpciBjbGllbnQgbWV0YWRhdGFcclxuICogd2l0aGluIDUgc2Vjb25kcyBhcmUgbm90IGVsaWdpYmxlIHRvIHJlY2VpdmUgYSBwcmltYXJ5IGxlYXNlLlxyXG4gKi9cclxudmFyIE1BWF9QUklNQVJZX0VMSUdJQkxFX0FHRV9NUyA9IDUwMDA7XHJcbi8qKlxyXG4gKiBUaGUgaW50ZXJ2YWwgYXQgd2hpY2ggY2xpZW50cyB3aWxsIHVwZGF0ZSB0aGVpciBtZXRhZGF0YSwgaW5jbHVkaW5nXHJcbiAqIHJlZnJlc2hpbmcgdGhlaXIgcHJpbWFyeSBsZWFzZSBpZiBoZWxkIG9yIHBvdGVudGlhbGx5IHRyeWluZyB0byBhY3F1aXJlIGl0IGlmXHJcbiAqIG5vdCBoZWxkLlxyXG4gKlxyXG4gKiBQcmltYXJ5IGNsaWVudHMgbWF5IG9wcG9ydHVuaXN0aWNhbGx5IHJlZnJlc2ggdGhlaXIgbWV0YWRhdGEgZWFybGllclxyXG4gKiBpZiB0aGV5J3JlIGFscmVhZHkgcGVyZm9ybWluZyBhbiBJbmRleGVkREIgb3BlcmF0aW9uLlxyXG4gKi9cclxudmFyIENMSUVOVF9NRVRBREFUQV9SRUZSRVNIX0lOVEVSVkFMX01TID0gNDAwMDtcclxuLyoqIFVzZXItZmFjaW5nIGVycm9yIHdoZW4gdGhlIHByaW1hcnkgbGVhc2UgaXMgcmVxdWlyZWQgYnV0IG5vdCBhdmFpbGFibGUuICovXHJcbnZhciBQUklNQVJZX0xFQVNFX0xPU1RfRVJST1JfTVNHID0gJ1RoZSBjdXJyZW50IHRhYiBpcyBub3QgaW4gdGhlIHJlcXVpcmVkIHN0YXRlIHRvIHBlcmZvcm0gdGhpcyBvcGVyYXRpb24uICcgK1xyXG4gICAgJ0l0IG1pZ2h0IGJlIG5lY2Vzc2FyeSB0byByZWZyZXNoIHRoZSBicm93c2VyIHRhYi4nO1xyXG52YXIgUFJJTUFSWV9MRUFTRV9FWENMVVNJVkVfRVJST1JfTVNHID0gJ0Fub3RoZXIgdGFiIGhhcyBleGNsdXNpdmUgYWNjZXNzIHRvIHRoZSBwZXJzaXN0ZW5jZSBsYXllci4gJyArXHJcbiAgICAnVG8gYWxsb3cgc2hhcmVkIGFjY2VzcywgbWFrZSBzdXJlIHRvIGludm9rZSAnICtcclxuICAgICdgZW5hYmxlUGVyc2lzdGVuY2UoKWAgd2l0aCBgc3luY2hyb25pemVUYWJzOnRydWVgIGluIGFsbCB0YWJzLic7XHJcbnZhciBVTlNVUFBPUlRFRF9QTEFURk9STV9FUlJPUl9NU0cgPSAnVGhpcyBwbGF0Zm9ybSBpcyBlaXRoZXIgbWlzc2luZycgK1xyXG4gICAgJyBJbmRleGVkREIgb3IgaXMga25vd24gdG8gaGF2ZSBhbiBpbmNvbXBsZXRlIGltcGxlbWVudGF0aW9uLiBPZmZsaW5lJyArXHJcbiAgICAnIHBlcnNpc3RlbmNlIGhhcyBiZWVuIGRpc2FibGVkLic7XHJcbi8vIFRoZSBmb3JtYXQgb2YgdGhlIExvY2FsU3RvcmFnZSBrZXkgdGhhdCBzdG9yZXMgem9tYmllZCBjbGllbnQgaXM6XHJcbi8vICAgICBmaXJlc3RvcmVfem9tYmllXzxwZXJzaXN0ZW5jZV9wcmVmaXg+XzxpbnN0YW5jZV9rZXk+XHJcbnZhciBaT01CSUVEX0NMSUVOVFNfS0VZX1BSRUZJWCA9ICdmaXJlc3RvcmVfem9tYmllJztcclxudmFyIEluZGV4ZWREYlRyYW5zYWN0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgdHNsaWIuX19leHRlbmRzKEluZGV4ZWREYlRyYW5zYWN0aW9uLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gSW5kZXhlZERiVHJhbnNhY3Rpb24oc2ltcGxlRGJUcmFuc2FjdGlvbiwgY3VycmVudFNlcXVlbmNlTnVtYmVyKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcclxuICAgICAgICBfdGhpcy5zaW1wbGVEYlRyYW5zYWN0aW9uID0gc2ltcGxlRGJUcmFuc2FjdGlvbjtcclxuICAgICAgICBfdGhpcy5jdXJyZW50U2VxdWVuY2VOdW1iZXIgPSBjdXJyZW50U2VxdWVuY2VOdW1iZXI7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIEluZGV4ZWREYlRyYW5zYWN0aW9uO1xyXG59KFBlcnNpc3RlbmNlVHJhbnNhY3Rpb24pKTtcclxuLyoqXHJcbiAqIEFuIEluZGV4ZWREQi1iYWNrZWQgaW5zdGFuY2Ugb2YgUGVyc2lzdGVuY2UuIERhdGEgaXMgc3RvcmVkIHBlcnNpc3RlbnRseVxyXG4gKiBhY3Jvc3Mgc2Vzc2lvbnMuXHJcbiAqXHJcbiAqIE9uIFdlYiBvbmx5LCB0aGUgRmlyZXN0b3JlIFNES3Mgc3VwcG9ydCBzaGFyZWQgYWNjZXNzIHRvIGl0cyBwZXJzaXN0ZW5jZVxyXG4gKiBsYXllci4gVGhpcyBhbGxvd3MgbXVsdGlwbGUgYnJvd3NlciB0YWJzIHRvIHJlYWQgYW5kIHdyaXRlIHRvIEluZGV4ZWREYiBhbmRcclxuICogdG8gc3luY2hyb25pemUgc3RhdGUgZXZlbiB3aXRob3V0IG5ldHdvcmsgY29ubmVjdGl2aXR5LiBTaGFyZWQgYWNjZXNzIGlzXHJcbiAqIGN1cnJlbnRseSBvcHRpb25hbCBhbmQgbm90IGVuYWJsZWQgdW5sZXNzIGFsbCBjbGllbnRzIGludm9rZVxyXG4gKiBgZW5hYmxlUGVyc2lzdGVuY2UoKWAgd2l0aCBge3N5bmNocm9uaXplVGFiczp0cnVlfWAuXHJcbiAqXHJcbiAqIEluIG11bHRpLXRhYiBtb2RlLCBpZiBtdWx0aXBsZSBjbGllbnRzIGFyZSBhY3RpdmUgYXQgdGhlIHNhbWUgdGltZSwgdGhlIFNES1xyXG4gKiB3aWxsIGRlc2lnbmF0ZSBvbmUgY2xpZW50IGFzIHRoZSDigJxwcmltYXJ5IGNsaWVudOKAnS4gQW4gZWZmb3J0IGlzIG1hZGUgdG8gcGlja1xyXG4gKiBhIHZpc2libGUsIG5ldHdvcmstY29ubmVjdGVkIGFuZCBhY3RpdmUgY2xpZW50LCBhbmQgdGhpcyBjbGllbnQgaXNcclxuICogcmVzcG9uc2libGUgZm9yIGxldHRpbmcgb3RoZXIgY2xpZW50cyBrbm93IGFib3V0IGl0cyBwcmVzZW5jZS4gVGhlIHByaW1hcnlcclxuICogY2xpZW50IHdyaXRlcyBhIHVuaXF1ZSBjbGllbnQtZ2VuZXJhdGVkIGlkZW50aWZpZXIgKHRoZSBjbGllbnQgSUQpIHRvXHJcbiAqIEluZGV4ZWREYuKAmXMg4oCcb3duZXLigJ0gc3RvcmUgZXZlcnkgNCBzZWNvbmRzLiBJZiB0aGUgcHJpbWFyeSBjbGllbnQgZmFpbHMgdG9cclxuICogdXBkYXRlIHRoaXMgZW50cnksIGFub3RoZXIgY2xpZW50IGNhbiBhY3F1aXJlIHRoZSBsZWFzZSBhbmQgdGFrZSBvdmVyIGFzXHJcbiAqIHByaW1hcnkuXHJcbiAqXHJcbiAqIFNvbWUgcGVyc2lzdGVuY2Ugb3BlcmF0aW9ucyBpbiB0aGUgU0RLIGFyZSBkZXNpZ25hdGVkIGFzIHByaW1hcnktY2xpZW50IG9ubHlcclxuICogb3BlcmF0aW9ucy4gVGhpcyBpbmNsdWRlcyB0aGUgYWNrbm93bGVkZ21lbnQgb2YgbXV0YXRpb25zIGFuZCBhbGwgdXBkYXRlcyBvZlxyXG4gKiByZW1vdGUgZG9jdW1lbnRzLiBUaGUgZWZmZWN0cyBvZiB0aGVzZSBvcGVyYXRpb25zIGFyZSB3cml0dGVuIHRvIHBlcnNpc3RlbmNlXHJcbiAqIGFuZCB0aGVuIGJyb2FkY2FzdCB0byBvdGhlciB0YWJzIHZpYSBMb2NhbFN0b3JhZ2UgKHNlZVxyXG4gKiBgV2ViU3RvcmFnZVNoYXJlZENsaWVudFN0YXRlYCksIHdoaWNoIHRoZW4gcmVmcmVzaCB0aGVpciBzdGF0ZSBmcm9tXHJcbiAqIHBlcnNpc3RlbmNlLlxyXG4gKlxyXG4gKiBTaW1pbGFybHksIHRoZSBwcmltYXJ5IGNsaWVudCBsaXN0ZW5zIHRvIG5vdGlmaWNhdGlvbnMgc2VudCBieSBzZWNvbmRhcnlcclxuICogY2xpZW50cyB0byBkaXNjb3ZlciBwZXJzaXN0ZW5jZSBjaGFuZ2VzIHdyaXR0ZW4gYnkgc2Vjb25kYXJ5IGNsaWVudHMsIHN1Y2ggYXNcclxuICogdGhlIGFkZGl0aW9uIG9mIG5ldyBtdXRhdGlvbnMgYW5kIHF1ZXJ5IHRhcmdldHMuXHJcbiAqXHJcbiAqIElmIG11bHRpLXRhYiBpcyBub3QgZW5hYmxlZCBhbmQgYW5vdGhlciB0YWIgYWxyZWFkeSBvYnRhaW5lZCB0aGUgcHJpbWFyeVxyXG4gKiBsZWFzZSwgSW5kZXhlZERiUGVyc2lzdGVuY2UgZW50ZXJzIGEgZmFpbGVkIHN0YXRlIGFuZCBhbGwgc3Vic2VxdWVudFxyXG4gKiBvcGVyYXRpb25zIHdpbGwgYXV0b21hdGljYWxseSBmYWlsLlxyXG4gKlxyXG4gKiBBZGRpdGlvbmFsbHksIHRoZXJlIGlzIGFuIG9wdGltaXphdGlvbiBzbyB0aGF0IHdoZW4gYSB0YWIgaXMgY2xvc2VkLCB0aGVcclxuICogcHJpbWFyeSBsZWFzZSBpcyByZWxlYXNlZCBpbW1lZGlhdGVseSAodGhpcyBpcyBlc3BlY2lhbGx5IGltcG9ydGFudCB0byBtYWtlXHJcbiAqIHN1cmUgdGhhdCBhIHJlZnJlc2hlZCB0YWIgaXMgYWJsZSB0byBpbW1lZGlhdGVseSByZS1hY3F1aXJlIHRoZSBwcmltYXJ5XHJcbiAqIGxlYXNlKS4gVW5mb3J0dW5hdGVseSwgSW5kZXhlZERCIGNhbm5vdCBiZSByZWxpYWJseSB1c2VkIGluIHdpbmRvdy51bmxvYWRcclxuICogc2luY2UgaXQgaXMgYW4gYXN5bmNocm9ub3VzIEFQSS4gU28gaW4gYWRkaXRpb24gdG8gYXR0ZW1wdGluZyB0byBnaXZlIHVwIHRoZVxyXG4gKiBsZWFzZSwgdGhlIGxlYXNlaG9sZGVyIHdyaXRlcyBpdHMgY2xpZW50IElEIHRvIGEgXCJ6b21iaWVkQ2xpZW50XCIgZW50cnkgaW5cclxuICogTG9jYWxTdG9yYWdlIHdoaWNoIGFjdHMgYXMgYW4gaW5kaWNhdG9yIHRoYXQgYW5vdGhlciB0YWIgc2hvdWxkIGdvIGFoZWFkIGFuZFxyXG4gKiB0YWtlIHRoZSBwcmltYXJ5IGxlYXNlIGltbWVkaWF0ZWx5IHJlZ2FyZGxlc3Mgb2YgdGhlIGN1cnJlbnQgbGVhc2UgdGltZXN0YW1wLlxyXG4gKlxyXG4gKiBUT0RPKGIvMTE0MjI2MjM0KTogUmVtb3ZlIGBzeW5jaHJvbml6ZVRhYnNgIHNlY3Rpb24gd2hlbiBtdWx0aS10YWIgaXMgbm9cclxuICogbG9uZ2VyIG9wdGlvbmFsLlxyXG4gKi9cclxudmFyIEluZGV4ZWREYlBlcnNpc3RlbmNlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gSW5kZXhlZERiUGVyc2lzdGVuY2UoYWxsb3dUYWJTeW5jaHJvbml6YXRpb24sIHBlcnNpc3RlbmNlS2V5LCBjbGllbnRJZCwgcGxhdGZvcm0sIGxydVBhcmFtcywgcXVldWUsIHNlcmlhbGl6ZXIsIHNlcXVlbmNlTnVtYmVyU3luY2VyKSB7XHJcbiAgICAgICAgdGhpcy5hbGxvd1RhYlN5bmNocm9uaXphdGlvbiA9IGFsbG93VGFiU3luY2hyb25pemF0aW9uO1xyXG4gICAgICAgIHRoaXMucGVyc2lzdGVuY2VLZXkgPSBwZXJzaXN0ZW5jZUtleTtcclxuICAgICAgICB0aGlzLmNsaWVudElkID0gY2xpZW50SWQ7XHJcbiAgICAgICAgdGhpcy5xdWV1ZSA9IHF1ZXVlO1xyXG4gICAgICAgIHRoaXMuc2VxdWVuY2VOdW1iZXJTeW5jZXIgPSBzZXF1ZW5jZU51bWJlclN5bmNlcjtcclxuICAgICAgICB0aGlzLl9zdGFydGVkID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5pc1ByaW1hcnkgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLm5ldHdvcmtFbmFibGVkID0gdHJ1ZTtcclxuICAgICAgICAvKiogT3VyIHdpbmRvdy51bmxvYWQgaGFuZGxlciwgaWYgcmVnaXN0ZXJlZC4gKi9cclxuICAgICAgICB0aGlzLndpbmRvd1VubG9hZEhhbmRsZXIgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuaW5Gb3JlZ3JvdW5kID0gZmFsc2U7XHJcbiAgICAgICAgLyoqIE91ciAndmlzaWJpbGl0eWNoYW5nZScgbGlzdGVuZXIgaWYgcmVnaXN0ZXJlZC4gKi9cclxuICAgICAgICB0aGlzLmRvY3VtZW50VmlzaWJpbGl0eUhhbmRsZXIgPSBudWxsO1xyXG4gICAgICAgIC8qKiBUaGUgY2xpZW50IG1ldGFkYXRhIHJlZnJlc2ggdGFzay4gKi9cclxuICAgICAgICB0aGlzLmNsaWVudE1ldGFkYXRhUmVmcmVzaGVyID0gbnVsbDtcclxuICAgICAgICAvKiogVGhlIGxhc3QgdGltZSB3ZSBnYXJiYWdlIGNvbGxlY3RlZCB0aGUgY2xpZW50IG1ldGFkYXRhIG9iamVjdCBzdG9yZS4gKi9cclxuICAgICAgICB0aGlzLmxhc3RHYXJiYWdlQ29sbGVjdGlvblRpbWUgPSBOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFk7XHJcbiAgICAgICAgLyoqIEEgbGlzdGVuZXIgdG8gbm90aWZ5IG9uIHByaW1hcnkgc3RhdGUgY2hhbmdlcy4gKi9cclxuICAgICAgICB0aGlzLnByaW1hcnlTdGF0ZUxpc3RlbmVyID0gZnVuY3Rpb24gKF8pIHsgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpOyB9O1xyXG4gICAgICAgIHRoaXMucmVmZXJlbmNlRGVsZWdhdGUgPSBuZXcgSW5kZXhlZERiTHJ1RGVsZWdhdGUodGhpcywgbHJ1UGFyYW1zKTtcclxuICAgICAgICB0aGlzLmRiTmFtZSA9IHBlcnNpc3RlbmNlS2V5ICsgSW5kZXhlZERiUGVyc2lzdGVuY2UuTUFJTl9EQVRBQkFTRTtcclxuICAgICAgICB0aGlzLnNlcmlhbGl6ZXIgPSBuZXcgTG9jYWxTZXJpYWxpemVyKHNlcmlhbGl6ZXIpO1xyXG4gICAgICAgIHRoaXMuZG9jdW1lbnQgPSBwbGF0Zm9ybS5kb2N1bWVudDtcclxuICAgICAgICB0aGlzLnRhcmdldENhY2hlID0gbmV3IEluZGV4ZWREYlRhcmdldENhY2hlKHRoaXMucmVmZXJlbmNlRGVsZWdhdGUsIHRoaXMuc2VyaWFsaXplcik7XHJcbiAgICAgICAgdGhpcy5pbmRleE1hbmFnZXIgPSBuZXcgSW5kZXhlZERiSW5kZXhNYW5hZ2VyKCk7XHJcbiAgICAgICAgdGhpcy5yZW1vdGVEb2N1bWVudENhY2hlID0gbmV3IEluZGV4ZWREYlJlbW90ZURvY3VtZW50Q2FjaGUodGhpcy5zZXJpYWxpemVyLCB0aGlzLmluZGV4TWFuYWdlcik7XHJcbiAgICAgICAgaWYgKHBsYXRmb3JtLndpbmRvdyAmJiBwbGF0Zm9ybS53aW5kb3cubG9jYWxTdG9yYWdlKSB7XHJcbiAgICAgICAgICAgIHRoaXMud2luZG93ID0gcGxhdGZvcm0ud2luZG93O1xyXG4gICAgICAgICAgICB0aGlzLndlYlN0b3JhZ2UgPSB0aGlzLndpbmRvdy5sb2NhbFN0b3JhZ2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5VTklNUExFTUVOVEVELCAnSW5kZXhlZERCIHBlcnNpc3RlbmNlIGlzIG9ubHkgYXZhaWxhYmxlIG9uIHBsYXRmb3JtcyB0aGF0IHN1cHBvcnQgTG9jYWxTdG9yYWdlLicpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIEluZGV4ZWREYlBlcnNpc3RlbmNlLmdldFN0b3JlID0gZnVuY3Rpb24gKHR4biwgc3RvcmUpIHtcclxuICAgICAgICBpZiAodHhuIGluc3RhbmNlb2YgSW5kZXhlZERiVHJhbnNhY3Rpb24pIHtcclxuICAgICAgICAgICAgcmV0dXJuIFNpbXBsZURiLmdldFN0b3JlKHR4bi5zaW1wbGVEYlRyYW5zYWN0aW9uLCBzdG9yZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aHJvdyBmYWlsKCdJbmRleGVkRGJQZXJzaXN0ZW5jZSBtdXN0IHVzZSBpbnN0YW5jZXMgb2YgSW5kZXhlZERiVHJhbnNhY3Rpb24nKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgSW5kZXhlZERiUGVyc2lzdGVuY2UuY3JlYXRlSW5kZXhlZERiUGVyc2lzdGVuY2UgPSBmdW5jdGlvbiAob3B0aW9ucykge1xyXG4gICAgICAgIHJldHVybiB0c2xpYi5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHBlcnNpc3RlbmNlO1xyXG4gICAgICAgICAgICByZXR1cm4gdHNsaWIuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIUluZGV4ZWREYlBlcnNpc3RlbmNlLmlzQXZhaWxhYmxlKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLlVOSU1QTEVNRU5URUQsIFVOU1VQUE9SVEVEX1BMQVRGT1JNX0VSUk9SX01TRyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgcGVyc2lzdGVuY2UgPSBuZXcgSW5kZXhlZERiUGVyc2lzdGVuY2Uob3B0aW9ucy5hbGxvd1RhYlN5bmNocm9uaXphdGlvbiwgb3B0aW9ucy5wZXJzaXN0ZW5jZUtleSwgb3B0aW9ucy5jbGllbnRJZCwgb3B0aW9ucy5wbGF0Zm9ybSwgb3B0aW9ucy5scnVQYXJhbXMsIG9wdGlvbnMucXVldWUsIG9wdGlvbnMuc2VyaWFsaXplciwgb3B0aW9ucy5zZXF1ZW5jZU51bWJlclN5bmNlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHBlcnNpc3RlbmNlLnN0YXJ0KCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgcGVyc2lzdGVuY2VdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEF0dGVtcHQgdG8gc3RhcnQgSW5kZXhlZERiIHBlcnNpc3RlbmNlLlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm4ge1Byb21pc2U8dm9pZD59IFdoZXRoZXIgcGVyc2lzdGVuY2Ugd2FzIGVuYWJsZWQuXHJcbiAgICAgKi9cclxuICAgIEluZGV4ZWREYlBlcnNpc3RlbmNlLnByb3RvdHlwZS5zdGFydCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIGFzc2VydCghdGhpcy5zdGFydGVkLCAnSW5kZXhlZERiUGVyc2lzdGVuY2UgZG91YmxlLXN0YXJ0ZWQhJyk7XHJcbiAgICAgICAgYXNzZXJ0KHRoaXMud2luZG93ICE9PSBudWxsLCBcIkV4cGVjdGVkICd3aW5kb3cnIHRvIGJlIGRlZmluZWRcIik7XHJcbiAgICAgICAgcmV0dXJuIFNpbXBsZURiLm9wZW5PckNyZWF0ZSh0aGlzLmRiTmFtZSwgU0NIRU1BX1ZFUlNJT04sIG5ldyBTY2hlbWFDb252ZXJ0ZXIodGhpcy5zZXJpYWxpemVyKSlcclxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKGRiKSB7XHJcbiAgICAgICAgICAgIF90aGlzLnNpbXBsZURiID0gZGI7XHJcbiAgICAgICAgICAgIC8vIE5PVEU6IFRoaXMgaXMgZXhwZWN0ZWQgdG8gZmFpbCBzb21ldGltZXMgKGluIHRoZSBjYXNlIG9mIGFub3RoZXIgdGFiIGFscmVhZHlcclxuICAgICAgICAgICAgLy8gaGF2aW5nIHRoZSBwZXJzaXN0ZW5jZSBsb2NrKSwgc28gaXQncyB0aGUgZmlyc3QgdGhpbmcgd2Ugc2hvdWxkIGRvLlxyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXMudXBkYXRlQ2xpZW50TWV0YWRhdGFBbmRUcnlCZWNvbWVQcmltYXJ5KCk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBfdGhpcy5hdHRhY2hWaXNpYmlsaXR5SGFuZGxlcigpO1xyXG4gICAgICAgICAgICBfdGhpcy5hdHRhY2hXaW5kb3dVbmxvYWRIb29rKCk7XHJcbiAgICAgICAgICAgIF90aGlzLnNjaGVkdWxlQ2xpZW50TWV0YWRhdGFBbmRQcmltYXJ5TGVhc2VSZWZyZXNoZXMoKTtcclxuICAgICAgICAgICAgcmV0dXJuIF90aGlzLnNpbXBsZURiLnJ1blRyYW5zYWN0aW9uKCdyZWFkb25seS1pZGVtcG90ZW50JywgW0RiVGFyZ2V0R2xvYmFsLnN0b3JlXSwgZnVuY3Rpb24gKHR4bikgeyByZXR1cm4gZ2V0SGlnaGVzdExpc3RlblNlcXVlbmNlTnVtYmVyKHR4bik7IH0pO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChoaWdoZXN0TGlzdGVuU2VxdWVuY2VOdW1iZXIpIHtcclxuICAgICAgICAgICAgX3RoaXMubGlzdGVuU2VxdWVuY2UgPSBuZXcgTGlzdGVuU2VxdWVuY2UoaGlnaGVzdExpc3RlblNlcXVlbmNlTnVtYmVyLCBfdGhpcy5zZXF1ZW5jZU51bWJlclN5bmNlcik7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBfdGhpcy5fc3RhcnRlZCA9IHRydWU7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uIChyZWFzb24pIHtcclxuICAgICAgICAgICAgX3RoaXMuc2ltcGxlRGIgJiYgX3RoaXMuc2ltcGxlRGIuY2xvc2UoKTtcclxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KHJlYXNvbik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgSW5kZXhlZERiUGVyc2lzdGVuY2UucHJvdG90eXBlLnNldFByaW1hcnlTdGF0ZUxpc3RlbmVyID0gZnVuY3Rpb24gKHByaW1hcnlTdGF0ZUxpc3RlbmVyKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB0aGlzLnByaW1hcnlTdGF0ZUxpc3RlbmVyID0gZnVuY3Rpb24gKHByaW1hcnlTdGF0ZSkgeyByZXR1cm4gdHNsaWIuX19hd2FpdGVyKF90aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHNsaWIuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zdGFydGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHByaW1hcnlTdGF0ZUxpc3RlbmVyKHByaW1hcnlTdGF0ZSldO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTsgfTtcclxuICAgICAgICByZXR1cm4gcHJpbWFyeVN0YXRlTGlzdGVuZXIodGhpcy5pc1ByaW1hcnkpO1xyXG4gICAgfTtcclxuICAgIEluZGV4ZWREYlBlcnNpc3RlbmNlLnByb3RvdHlwZS5zZXREYXRhYmFzZURlbGV0ZWRMaXN0ZW5lciA9IGZ1bmN0aW9uIChkYXRhYmFzZURlbGV0ZWRMaXN0ZW5lcikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5zaW1wbGVEYi5zZXRWZXJzaW9uQ2hhbmdlTGlzdGVuZXIoZnVuY3Rpb24gKGV2ZW50KSB7IHJldHVybiB0c2xpYi5fX2F3YWl0ZXIoX3RoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYi5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKGV2ZW50Lm5ld1ZlcnNpb24gPT09IG51bGwpKSByZXR1cm4gWzMgLypicmVhayovLCAyXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgZGF0YWJhc2VEZWxldGVkTGlzdGVuZXIoKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLmxhYmVsID0gMjtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6IHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7IH0pO1xyXG4gICAgfTtcclxuICAgIEluZGV4ZWREYlBlcnNpc3RlbmNlLnByb3RvdHlwZS5zZXROZXR3b3JrRW5hYmxlZCA9IGZ1bmN0aW9uIChuZXR3b3JrRW5hYmxlZCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgaWYgKHRoaXMubmV0d29ya0VuYWJsZWQgIT09IG5ldHdvcmtFbmFibGVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMubmV0d29ya0VuYWJsZWQgPSBuZXR3b3JrRW5hYmxlZDtcclxuICAgICAgICAgICAgLy8gU2NoZWR1bGUgYSBwcmltYXJ5IGxlYXNlIHJlZnJlc2ggZm9yIGltbWVkaWF0ZSBleGVjdXRpb24uIFRoZSBldmVudHVhbFxyXG4gICAgICAgICAgICAvLyBsZWFzZSB1cGRhdGUgd2lsbCBiZSBwcm9wYWdhdGVkIHZpYSBgcHJpbWFyeVN0YXRlTGlzdGVuZXJgLlxyXG4gICAgICAgICAgICB0aGlzLnF1ZXVlLmVucXVldWVBbmRGb3JnZXQoZnVuY3Rpb24gKCkgeyByZXR1cm4gdHNsaWIuX19hd2FpdGVyKF90aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRzbGliLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLnN0YXJ0ZWQpIHJldHVybiBbMyAvKmJyZWFrKi8sIDJdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy51cGRhdGVDbGllbnRNZXRhZGF0YUFuZFRyeUJlY29tZVByaW1hcnkoKV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9hLmxhYmVsID0gMjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOiByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pOyB9KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBVcGRhdGVzIHRoZSBjbGllbnQgbWV0YWRhdGEgaW4gSW5kZXhlZERiIGFuZCBhdHRlbXB0cyB0byBlaXRoZXIgb2J0YWluIG9yXHJcbiAgICAgKiBleHRlbmQgdGhlIHByaW1hcnkgbGVhc2UgZm9yIHRoZSBsb2NhbCBjbGllbnQuIEFzeW5jaHJvbm91c2x5IG5vdGlmaWVzIHRoZVxyXG4gICAgICogcHJpbWFyeSBzdGF0ZSBsaXN0ZW5lciBpZiB0aGUgY2xpZW50IGVpdGhlciBuZXdseSBvYnRhaW5lZCBvciByZWxlYXNlZCBpdHNcclxuICAgICAqIHByaW1hcnkgbGVhc2UuXHJcbiAgICAgKi9cclxuICAgIEluZGV4ZWREYlBlcnNpc3RlbmNlLnByb3RvdHlwZS51cGRhdGVDbGllbnRNZXRhZGF0YUFuZFRyeUJlY29tZVByaW1hcnkgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICByZXR1cm4gdGhpcy5zaW1wbGVEYlxyXG4gICAgICAgICAgICAucnVuVHJhbnNhY3Rpb24oJ3JlYWR3cml0ZS1pZGVtcG90ZW50JywgQUxMX1NUT1JFUywgZnVuY3Rpb24gKHR4bikge1xyXG4gICAgICAgICAgICB2YXIgbWV0YWRhdGFTdG9yZSA9IGNsaWVudE1ldGFkYXRhU3RvcmUodHhuKTtcclxuICAgICAgICAgICAgcmV0dXJuIG1ldGFkYXRhU3RvcmVcclxuICAgICAgICAgICAgICAgIC5wdXQobmV3IERiQ2xpZW50TWV0YWRhdGEoX3RoaXMuY2xpZW50SWQsIERhdGUubm93KCksIF90aGlzLm5ldHdvcmtFbmFibGVkLCBfdGhpcy5pbkZvcmVncm91bmQpKVxyXG4gICAgICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKF90aGlzLmlzUHJpbWFyeSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy52ZXJpZnlQcmltYXJ5TGVhc2UodHhuKS5uZXh0KGZ1bmN0aW9uIChzdWNjZXNzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuaXNQcmltYXJ5ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5xdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMucHJpbWFyeVN0YXRlTGlzdGVuZXIoZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLmNhbkFjdEFzUHJpbWFyeSh0eG4pOyB9KVxyXG4gICAgICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKGNhbkFjdEFzUHJpbWFyeSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKF90aGlzLmlzUHJpbWFyeSAmJiAhY2FuQWN0QXNQcmltYXJ5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLnJlbGVhc2VQcmltYXJ5TGVhc2VJZkhlbGQodHhuKS5uZXh0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIGZhbHNlOyB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGNhbkFjdEFzUHJpbWFyeSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5hY3F1aXJlT3JFeHRlbmRQcmltYXJ5TGVhc2UodHhuKS5uZXh0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRydWU7IH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC8qIGNhbkFjdEFzUHJpbWFyeT0gKi8gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICBpZiAoIV90aGlzLmFsbG93VGFiU3luY2hyb25pemF0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGRlYnVnKExPR19UQUckMSwgJ1JlbGVhc2luZyBvd25lciBsZWFzZSBhZnRlciBlcnJvciBkdXJpbmcgbGVhc2UgcmVmcmVzaCcsIGUpO1xyXG4gICAgICAgICAgICByZXR1cm4gLyogaXNQcmltYXJ5PSAqLyBmYWxzZTtcclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoaXNQcmltYXJ5KSB7XHJcbiAgICAgICAgICAgIGlmIChfdGhpcy5pc1ByaW1hcnkgIT09IGlzUHJpbWFyeSkge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMucXVldWUuZW5xdWV1ZUFuZEZvcmdldChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLnByaW1hcnlTdGF0ZUxpc3RlbmVyKGlzUHJpbWFyeSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBfdGhpcy5pc1ByaW1hcnkgPSBpc1ByaW1hcnk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgSW5kZXhlZERiUGVyc2lzdGVuY2UucHJvdG90eXBlLnZlcmlmeVByaW1hcnlMZWFzZSA9IGZ1bmN0aW9uICh0eG4pIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhciBzdG9yZSA9IHByaW1hcnlDbGllbnRTdG9yZSh0eG4pO1xyXG4gICAgICAgIHJldHVybiBzdG9yZS5nZXQoRGJQcmltYXJ5Q2xpZW50LmtleSkubmV4dChmdW5jdGlvbiAocHJpbWFyeUNsaWVudCkge1xyXG4gICAgICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoX3RoaXMuaXNMb2NhbENsaWVudChwcmltYXJ5Q2xpZW50KSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgSW5kZXhlZERiUGVyc2lzdGVuY2UucHJvdG90eXBlLnJlbW92ZUNsaWVudE1ldGFkYXRhID0gZnVuY3Rpb24gKHR4bikge1xyXG4gICAgICAgIHZhciBtZXRhZGF0YVN0b3JlID0gY2xpZW50TWV0YWRhdGFTdG9yZSh0eG4pO1xyXG4gICAgICAgIHJldHVybiBtZXRhZGF0YVN0b3JlLmRlbGV0ZSh0aGlzLmNsaWVudElkKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIElmIHRoZSBnYXJiYWdlIGNvbGxlY3Rpb24gdGhyZXNob2xkIGhhcyBwYXNzZWQsIHBydW5lcyB0aGVcclxuICAgICAqIFJlbW90ZURvY3VtZW50Q2hhbmdlcyBhbmQgdGhlIENsaWVudE1ldGFkYXRhIHN0b3JlIGJhc2VkIG9uIHRoZSBsYXN0IHVwZGF0ZVxyXG4gICAgICogdGltZSBvZiBhbGwgY2xpZW50cy5cclxuICAgICAqL1xyXG4gICAgSW5kZXhlZERiUGVyc2lzdGVuY2UucHJvdG90eXBlLm1heWJlR2FyYmFnZUNvbGxlY3RNdWx0aUNsaWVudFN0YXRlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0c2xpYi5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGluYWN0aXZlQ2xpZW50cztcclxuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEodGhpcy5pc1ByaW1hcnkgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICF0aGlzLmlzV2l0aGluQWdlKHRoaXMubGFzdEdhcmJhZ2VDb2xsZWN0aW9uVGltZSwgTUFYX0NMSUVOVF9BR0VfTVMpKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgMl07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubGFzdEdhcmJhZ2VDb2xsZWN0aW9uVGltZSA9IERhdGUubm93KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMucnVuVHJhbnNhY3Rpb24oJ21heWJlR2FyYmFnZUNvbGxlY3RNdWx0aUNsaWVudFN0YXRlJywgJ3JlYWR3cml0ZS1wcmltYXJ5LWlkZW1wb3RlbnQnLCBmdW5jdGlvbiAodHhuKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1ldGFkYXRhU3RvcmUgPSBJbmRleGVkRGJQZXJzaXN0ZW5jZS5nZXRTdG9yZSh0eG4sIERiQ2xpZW50TWV0YWRhdGEuc3RvcmUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBtZXRhZGF0YVN0b3JlLmxvYWRBbGwoKS5uZXh0KGZ1bmN0aW9uIChleGlzdGluZ0NsaWVudHMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFjdGl2ZSA9IF90aGlzLmZpbHRlckFjdGl2ZUNsaWVudHMoZXhpc3RpbmdDbGllbnRzLCBNQVhfQ0xJRU5UX0FHRV9NUyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbmFjdGl2ZSA9IGV4aXN0aW5nQ2xpZW50cy5maWx0ZXIoZnVuY3Rpb24gKGNsaWVudCkgeyByZXR1cm4gYWN0aXZlLmluZGV4T2YoY2xpZW50KSA9PT0gLTE7IH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBEZWxldGUgbWV0YWRhdGEgZm9yIGNsaWVudHMgdGhhdCBhcmUgbm8gbG9uZ2VyIGNvbnNpZGVyZWQgYWN0aXZlLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLmZvckVhY2goaW5hY3RpdmUsIGZ1bmN0aW9uIChpbmFjdGl2ZUNsaWVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1ldGFkYXRhU3RvcmUuZGVsZXRlKGluYWN0aXZlQ2xpZW50LmNsaWVudElkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkubmV4dChmdW5jdGlvbiAoKSB7IHJldHVybiBpbmFjdGl2ZTsgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmFjdGl2ZUNsaWVudHMgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIERlbGV0ZSBwb3RlbnRpYWwgbGVmdG92ZXIgZW50cmllcyB0aGF0IG1heSBjb250aW51ZSB0byBtYXJrIHRoZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBpbmFjdGl2ZSBjbGllbnRzIGFzIHpvbWJpZWQgaW4gTG9jYWxTdG9yYWdlLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBJZGVhbGx5IHdlJ2QgZGVsZXRlIHRoZSBJbmRleGVkRGIgYW5kIExvY2FsU3RvcmFnZSB6b21iaWUgZW50cmllcyBmb3JcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIGNsaWVudCBhdG9taWNhbGx5LCBidXQgd2UgY2FuJ3QuIFNvIHdlIG9wdCB0byBkZWxldGUgdGhlIEluZGV4ZWREYlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBlbnRyaWVzIGZpcnN0IHRvIGF2b2lkIHBvdGVudGlhbGx5IHJldml2aW5nIGEgem9tYmllZCBjbGllbnQuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGluYWN0aXZlQ2xpZW50cy5mb3JFYWNoKGZ1bmN0aW9uIChpbmFjdGl2ZUNsaWVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMud2luZG93LmxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKF90aGlzLnpvbWJpZWRDbGllbnRMb2NhbFN0b3JhZ2VLZXkoaW5hY3RpdmVDbGllbnQuY2xpZW50SWQpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLmxhYmVsID0gMjtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6IHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBTY2hlZHVsZXMgYSByZWN1cnJpbmcgdGltZXIgdG8gdXBkYXRlIHRoZSBjbGllbnQgbWV0YWRhdGEgYW5kIHRvIGVpdGhlclxyXG4gICAgICogZXh0ZW5kIG9yIGFjcXVpcmUgdGhlIHByaW1hcnkgbGVhc2UgaWYgdGhlIGNsaWVudCBpcyBlbGlnaWJsZS5cclxuICAgICAqL1xyXG4gICAgSW5kZXhlZERiUGVyc2lzdGVuY2UucHJvdG90eXBlLnNjaGVkdWxlQ2xpZW50TWV0YWRhdGFBbmRQcmltYXJ5TGVhc2VSZWZyZXNoZXMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB0aGlzLmNsaWVudE1ldGFkYXRhUmVmcmVzaGVyID0gdGhpcy5xdWV1ZS5lbnF1ZXVlQWZ0ZXJEZWxheShUaW1lcklkLkNsaWVudE1ldGFkYXRhUmVmcmVzaCwgQ0xJRU5UX01FVEFEQVRBX1JFRlJFU0hfSU5URVJWQUxfTVMsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIF90aGlzLnVwZGF0ZUNsaWVudE1ldGFkYXRhQW5kVHJ5QmVjb21lUHJpbWFyeSgpXHJcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5tYXliZUdhcmJhZ2VDb2xsZWN0TXVsdGlDbGllbnRTdGF0ZSgpOyB9KVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMuc2NoZWR1bGVDbGllbnRNZXRhZGF0YUFuZFByaW1hcnlMZWFzZVJlZnJlc2hlcygpOyB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKiogQ2hlY2tzIHdoZXRoZXIgYGNsaWVudGAgaXMgdGhlIGxvY2FsIGNsaWVudC4gKi9cclxuICAgIEluZGV4ZWREYlBlcnNpc3RlbmNlLnByb3RvdHlwZS5pc0xvY2FsQ2xpZW50ID0gZnVuY3Rpb24gKGNsaWVudCkge1xyXG4gICAgICAgIHJldHVybiBjbGllbnQgPyBjbGllbnQub3duZXJJZCA9PT0gdGhpcy5jbGllbnRJZCA6IGZhbHNlO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogRXZhbHVhdGUgdGhlIHN0YXRlIG9mIGFsbCBhY3RpdmUgY2xpZW50cyBhbmQgZGV0ZXJtaW5lIHdoZXRoZXIgdGhlIGxvY2FsXHJcbiAgICAgKiBjbGllbnQgaXMgb3IgY2FuIGFjdCBhcyB0aGUgaG9sZGVyIG9mIHRoZSBwcmltYXJ5IGxlYXNlLiBSZXR1cm5zIHdoZXRoZXJcclxuICAgICAqIHRoZSBjbGllbnQgaXMgZWxpZ2libGUgZm9yIHRoZSBsZWFzZSwgYnV0IGRvZXMgbm90IGFjdHVhbGx5IGFjcXVpcmUgaXQuXHJcbiAgICAgKiBNYXkgcmV0dXJuICdmYWxzZScgZXZlbiBpZiB0aGVyZSBpcyBubyBhY3RpdmUgbGVhc2Vob2xkZXIgYW5kIGFub3RoZXJcclxuICAgICAqIChmb3JlZ3JvdW5kKSBjbGllbnQgc2hvdWxkIGJlY29tZSBsZWFzZWhvbGRlciBpbnN0ZWFkLlxyXG4gICAgICovXHJcbiAgICBJbmRleGVkRGJQZXJzaXN0ZW5jZS5wcm90b3R5cGUuY2FuQWN0QXNQcmltYXJ5ID0gZnVuY3Rpb24gKHR4bikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIHN0b3JlID0gcHJpbWFyeUNsaWVudFN0b3JlKHR4bik7XHJcbiAgICAgICAgcmV0dXJuIHN0b3JlXHJcbiAgICAgICAgICAgIC5nZXQoRGJQcmltYXJ5Q2xpZW50LmtleSlcclxuICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKGN1cnJlbnRQcmltYXJ5KSB7XHJcbiAgICAgICAgICAgIHZhciBjdXJyZW50TGVhc2VJc1ZhbGlkID0gY3VycmVudFByaW1hcnkgIT09IG51bGwgJiZcclxuICAgICAgICAgICAgICAgIF90aGlzLmlzV2l0aGluQWdlKGN1cnJlbnRQcmltYXJ5LmxlYXNlVGltZXN0YW1wTXMsIE1BWF9QUklNQVJZX0VMSUdJQkxFX0FHRV9NUykgJiZcclxuICAgICAgICAgICAgICAgICFfdGhpcy5pc0NsaWVudFpvbWJpZWQoY3VycmVudFByaW1hcnkub3duZXJJZCk7XHJcbiAgICAgICAgICAgIC8vIEEgY2xpZW50IGlzIGVsaWdpYmxlIGZvciB0aGUgcHJpbWFyeSBsZWFzZSBpZjpcclxuICAgICAgICAgICAgLy8gLSBpdHMgbmV0d29yayBpcyBlbmFibGVkIGFuZCB0aGUgY2xpZW50J3MgdGFiIGlzIGluIHRoZSBmb3JlZ3JvdW5kLlxyXG4gICAgICAgICAgICAvLyAtIGl0cyBuZXR3b3JrIGlzIGVuYWJsZWQgYW5kIG5vIG90aGVyIGNsaWVudCdzIHRhYiBpcyBpbiB0aGVcclxuICAgICAgICAgICAgLy8gICBmb3JlZ3JvdW5kLlxyXG4gICAgICAgICAgICAvLyAtIGV2ZXJ5IGNsaWVudHMgbmV0d29yayBpcyBkaXNhYmxlZCBhbmQgdGhlIGNsaWVudCdzIHRhYiBpcyBpbiB0aGVcclxuICAgICAgICAgICAgLy8gICBmb3JlZ3JvdW5kLlxyXG4gICAgICAgICAgICAvLyAtIGV2ZXJ5IGNsaWVudHMgbmV0d29yayBpcyBkaXNhYmxlZCBhbmQgbm8gb3RoZXIgY2xpZW50J3MgdGFiIGlzIGluXHJcbiAgICAgICAgICAgIC8vICAgdGhlIGZvcmVncm91bmQuXHJcbiAgICAgICAgICAgIGlmIChjdXJyZW50TGVhc2VJc1ZhbGlkKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoX3RoaXMuaXNMb2NhbENsaWVudChjdXJyZW50UHJpbWFyeSkgJiYgX3RoaXMubmV0d29ya0VuYWJsZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICghX3RoaXMuaXNMb2NhbENsaWVudChjdXJyZW50UHJpbWFyeSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWN1cnJlbnRQcmltYXJ5LmFsbG93VGFiU3luY2hyb25pemF0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZhaWwgdGhlIGBjYW5BY3RBc1ByaW1hcnlgIGNoZWNrIGlmIHRoZSBjdXJyZW50IGxlYXNlaG9sZGVyIGhhc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBub3Qgb3B0ZWQgaW50byBtdWx0aS10YWIgc3luY2hyb25pemF0aW9uLiBJZiB0aGlzIGhhcHBlbnMgYXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2xpZW50IHN0YXJ0dXAsIHdlIHJlamVjdCB0aGUgUHJvbWlzZSByZXR1cm5lZCBieVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBgZW5hYmxlUGVyc2lzdGVuY2UoKWAgYW5kIHRoZSB1c2VyIGNhbiBjb250aW51ZSB0byB1c2UgRmlyZXN0b3JlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdpdGggaW4tbWVtb3J5IHBlcnNpc3RlbmNlLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGlzIGZhaWxzIGR1cmluZyBhIGxlYXNlIHJlZnJlc2gsIHdlIHdpbGwgaW5zdGVhZCBibG9jayB0aGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQXN5bmNRdWV1ZSBmcm9tIGV4ZWN1dGluZyBmdXJ0aGVyIG9wZXJhdGlvbnMuIE5vdGUgdGhhdCB0aGlzIGlzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFjY2VwdGFibGUgc2luY2UgbWl4aW5nICYgbWF0Y2hpbmcgZGlmZmVyZW50IGBzeW5jaHJvbml6ZVRhYnNgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldHRpbmdzIGlzIG5vdCBzdXBwb3J0ZWQuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRPRE8oYi8xMTQyMjYyMzQpOiBSZW1vdmUgdGhpcyBjaGVjayB3aGVuIGBzeW5jaHJvbml6ZVRhYnNgIGNhblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBubyBsb25nZXIgYmUgdHVybmVkIG9mZi5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuRkFJTEVEX1BSRUNPTkRJVElPTiwgUFJJTUFSWV9MRUFTRV9FWENMVVNJVkVfRVJST1JfTVNHKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChfdGhpcy5uZXR3b3JrRW5hYmxlZCAmJiBfdGhpcy5pbkZvcmVncm91bmQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBjbGllbnRNZXRhZGF0YVN0b3JlKHR4bilcclxuICAgICAgICAgICAgICAgIC5sb2FkQWxsKClcclxuICAgICAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uIChleGlzdGluZ0NsaWVudHMpIHtcclxuICAgICAgICAgICAgICAgIC8vIFByb2Nlc3MgYWxsIGV4aXN0aW5nIGNsaWVudHMgYW5kIGRldGVybWluZSB3aGV0aGVyIGF0IGxlYXN0IG9uZSBvZlxyXG4gICAgICAgICAgICAgICAgLy8gdGhlbSBpcyBiZXR0ZXIgc3VpdGVkIHRvIG9idGFpbiB0aGUgcHJpbWFyeSBsZWFzZS5cclxuICAgICAgICAgICAgICAgIHZhciBwcmVmZXJyZWRDYW5kaWRhdGUgPSBfdGhpcy5maWx0ZXJBY3RpdmVDbGllbnRzKGV4aXN0aW5nQ2xpZW50cywgTUFYX1BSSU1BUllfRUxJR0lCTEVfQUdFX01TKS5maW5kKGZ1bmN0aW9uIChvdGhlckNsaWVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChfdGhpcy5jbGllbnRJZCAhPT0gb3RoZXJDbGllbnQuY2xpZW50SWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG90aGVyQ2xpZW50SGFzQmV0dGVyTmV0d29ya1N0YXRlID0gIV90aGlzLm5ldHdvcmtFbmFibGVkICYmIG90aGVyQ2xpZW50Lm5ldHdvcmtFbmFibGVkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgb3RoZXJDbGllbnRIYXNCZXR0ZXJWaXNpYmlsaXR5ID0gIV90aGlzLmluRm9yZWdyb3VuZCAmJiBvdGhlckNsaWVudC5pbkZvcmVncm91bmQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvdGhlckNsaWVudEhhc1NhbWVOZXR3b3JrU3RhdGUgPSBfdGhpcy5uZXR3b3JrRW5hYmxlZCA9PT0gb3RoZXJDbGllbnQubmV0d29ya0VuYWJsZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvdGhlckNsaWVudEhhc0JldHRlck5ldHdvcmtTdGF0ZSB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKG90aGVyQ2xpZW50SGFzQmV0dGVyVmlzaWJpbGl0eSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG90aGVyQ2xpZW50SGFzU2FtZU5ldHdvcmtTdGF0ZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHByZWZlcnJlZENhbmRpZGF0ZSA9PT0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAubmV4dChmdW5jdGlvbiAoY2FuQWN0QXNQcmltYXJ5KSB7XHJcbiAgICAgICAgICAgIGlmIChfdGhpcy5pc1ByaW1hcnkgIT09IGNhbkFjdEFzUHJpbWFyeSkge1xyXG4gICAgICAgICAgICAgICAgZGVidWcoTE9HX1RBRyQxLCBcIkNsaWVudCBcIiArIChjYW5BY3RBc1ByaW1hcnkgPyAnaXMnIDogJ2lzIG5vdCcpICsgXCIgZWxpZ2libGUgZm9yIGEgcHJpbWFyeSBsZWFzZS5cIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGNhbkFjdEFzUHJpbWFyeTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBJbmRleGVkRGJQZXJzaXN0ZW5jZS5wcm90b3R5cGUuc2h1dGRvd24gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRzbGliLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgICAgICByZXR1cm4gdHNsaWIuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGUgc2h1dGRvd24oKSBvcGVyYXRpb25zIGFyZSBpZGVtcG90ZW50IGFuZCBjYW4gYmUgY2FsbGVkIGV2ZW4gd2hlblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBzdGFydCgpIGFib3J0ZWQgKGUuZy4gYmVjYXVzZSBpdCBjb3VsZG4ndCBhY3F1aXJlIHRoZSBwZXJzaXN0ZW5jZSBsZWFzZSkuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3N0YXJ0ZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tYXJrQ2xpZW50Wm9tYmllZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5jbGllbnRNZXRhZGF0YVJlZnJlc2hlcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jbGllbnRNZXRhZGF0YVJlZnJlc2hlci5jYW5jZWwoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2xpZW50TWV0YWRhdGFSZWZyZXNoZXIgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGV0YWNoVmlzaWJpbGl0eUhhbmRsZXIoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZXRhY2hXaW5kb3dVbmxvYWRIb29rKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuc2ltcGxlRGIucnVuVHJhbnNhY3Rpb24oJ3JlYWR3cml0ZS1pZGVtcG90ZW50JywgW0RiUHJpbWFyeUNsaWVudC5zdG9yZSwgRGJDbGllbnRNZXRhZGF0YS5zdG9yZV0sIGZ1bmN0aW9uICh0eG4pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMucmVsZWFzZVByaW1hcnlMZWFzZUlmSGVsZCh0eG4pLm5leHQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMucmVtb3ZlQ2xpZW50TWV0YWRhdGEodHhuKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaW1wbGVEYi5jbG9zZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBSZW1vdmUgdGhlIGVudHJ5IG1hcmtpbmcgdGhlIGNsaWVudCBhcyB6b21iaWVkIGZyb20gTG9jYWxTdG9yYWdlIHNpbmNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdlIHN1Y2Nlc3NmdWxseSBkZWxldGVkIGl0cyBtZXRhZGF0YSBmcm9tIEluZGV4ZWREYi5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVDbGllbnRab21iaWVkRW50cnkoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgY2xpZW50cyB0aGF0IGFyZSBub3Qgem9tYmllZCBhbmQgaGF2ZSBhbiB1cGRhdGVUaW1lIHdpdGhpbiB0aGVcclxuICAgICAqIHByb3ZpZGVkIHRocmVzaG9sZC5cclxuICAgICAqL1xyXG4gICAgSW5kZXhlZERiUGVyc2lzdGVuY2UucHJvdG90eXBlLmZpbHRlckFjdGl2ZUNsaWVudHMgPSBmdW5jdGlvbiAoY2xpZW50cywgYWN0aXZpdHlUaHJlc2hvbGRNcykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIGNsaWVudHMuZmlsdGVyKGZ1bmN0aW9uIChjbGllbnQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIF90aGlzLmlzV2l0aGluQWdlKGNsaWVudC51cGRhdGVUaW1lTXMsIGFjdGl2aXR5VGhyZXNob2xkTXMpICYmXHJcbiAgICAgICAgICAgICAgICAhX3RoaXMuaXNDbGllbnRab21iaWVkKGNsaWVudC5jbGllbnRJZCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgSW5kZXhlZERiUGVyc2lzdGVuY2UucHJvdG90eXBlLmdldEFjdGl2ZUNsaWVudHMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICByZXR1cm4gdGhpcy5zaW1wbGVEYi5ydW5UcmFuc2FjdGlvbigncmVhZG9ubHktaWRlbXBvdGVudCcsIFtEYkNsaWVudE1ldGFkYXRhLnN0b3JlXSwgZnVuY3Rpb24gKHR4bikge1xyXG4gICAgICAgICAgICByZXR1cm4gY2xpZW50TWV0YWRhdGFTdG9yZSh0eG4pXHJcbiAgICAgICAgICAgICAgICAubG9hZEFsbCgpXHJcbiAgICAgICAgICAgICAgICAubmV4dChmdW5jdGlvbiAoY2xpZW50cykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLmZpbHRlckFjdGl2ZUNsaWVudHMoY2xpZW50cywgTUFYX0NMSUVOVF9BR0VfTVMpLm1hcChmdW5jdGlvbiAoY2xpZW50TWV0YWRhdGEpIHsgcmV0dXJuIGNsaWVudE1ldGFkYXRhLmNsaWVudElkOyB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgSW5kZXhlZERiUGVyc2lzdGVuY2UuY2xlYXJQZXJzaXN0ZW5jZSA9IGZ1bmN0aW9uIChwZXJzaXN0ZW5jZUtleSkge1xyXG4gICAgICAgIHJldHVybiB0c2xpYi5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGRiTmFtZTtcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFJbmRleGVkRGJQZXJzaXN0ZW5jZS5pc0F2YWlsYWJsZSgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgUHJvbWlzZS5yZXNvbHZlKCldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRiTmFtZSA9IHBlcnNpc3RlbmNlS2V5ICsgSW5kZXhlZERiUGVyc2lzdGVuY2UuTUFJTl9EQVRBQkFTRTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgU2ltcGxlRGIuZGVsZXRlKGRiTmFtZSldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShJbmRleGVkRGJQZXJzaXN0ZW5jZS5wcm90b3R5cGUsIFwic3RhcnRlZFwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9zdGFydGVkO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgSW5kZXhlZERiUGVyc2lzdGVuY2UucHJvdG90eXBlLmdldE11dGF0aW9uUXVldWUgPSBmdW5jdGlvbiAodXNlcikge1xyXG4gICAgICAgIGFzc2VydCh0aGlzLnN0YXJ0ZWQsICdDYW5ub3QgaW5pdGlhbGl6ZSBNdXRhdGlvblF1ZXVlIGJlZm9yZSBwZXJzaXN0ZW5jZSBpcyBzdGFydGVkLicpO1xyXG4gICAgICAgIHJldHVybiBJbmRleGVkRGJNdXRhdGlvblF1ZXVlLmZvclVzZXIodXNlciwgdGhpcy5zZXJpYWxpemVyLCB0aGlzLmluZGV4TWFuYWdlciwgdGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZSk7XHJcbiAgICB9O1xyXG4gICAgSW5kZXhlZERiUGVyc2lzdGVuY2UucHJvdG90eXBlLmdldFRhcmdldENhY2hlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGFzc2VydCh0aGlzLnN0YXJ0ZWQsICdDYW5ub3QgaW5pdGlhbGl6ZSBUYXJnZXRDYWNoZSBiZWZvcmUgcGVyc2lzdGVuY2UgaXMgc3RhcnRlZC4nKTtcclxuICAgICAgICByZXR1cm4gdGhpcy50YXJnZXRDYWNoZTtcclxuICAgIH07XHJcbiAgICBJbmRleGVkRGJQZXJzaXN0ZW5jZS5wcm90b3R5cGUuZ2V0UmVtb3RlRG9jdW1lbnRDYWNoZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBhc3NlcnQodGhpcy5zdGFydGVkLCAnQ2Fubm90IGluaXRpYWxpemUgUmVtb3RlRG9jdW1lbnRDYWNoZSBiZWZvcmUgcGVyc2lzdGVuY2UgaXMgc3RhcnRlZC4nKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5yZW1vdGVEb2N1bWVudENhY2hlO1xyXG4gICAgfTtcclxuICAgIEluZGV4ZWREYlBlcnNpc3RlbmNlLnByb3RvdHlwZS5nZXRJbmRleE1hbmFnZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgYXNzZXJ0KHRoaXMuc3RhcnRlZCwgJ0Nhbm5vdCBpbml0aWFsaXplIEluZGV4TWFuYWdlciBiZWZvcmUgcGVyc2lzdGVuY2UgaXMgc3RhcnRlZC4nKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5pbmRleE1hbmFnZXI7XHJcbiAgICB9O1xyXG4gICAgSW5kZXhlZERiUGVyc2lzdGVuY2UucHJvdG90eXBlLnJ1blRyYW5zYWN0aW9uID0gZnVuY3Rpb24gKGFjdGlvbiwgbW9kZSwgdHJhbnNhY3Rpb25PcGVyYXRpb24pIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIGRlYnVnKExPR19UQUckMSwgJ1N0YXJ0aW5nIHRyYW5zYWN0aW9uOicsIGFjdGlvbik7XHJcbiAgICAgICAgLy8gVE9ETyhzY2htaWR0LXNlYmFzdGlhbik6IFNpbXBsaWZ5IG9uY2UgYWxsIHRyYW5zYWN0aW9ucyBhcmUgaWRlbXBvdGVudC5cclxuICAgICAgICB2YXIgaWRlbXBvdGVudCA9IG1vZGUuZW5kc1dpdGgoJ2lkZW1wb3RlbnQnKTtcclxuICAgICAgICB2YXIgcmVhZG9ubHkgPSBtb2RlLnN0YXJ0c1dpdGgoJ3JlYWRvbmx5Jyk7XHJcbiAgICAgICAgdmFyIHNpbXBsZURiTW9kZSA9IHJlYWRvbmx5XHJcbiAgICAgICAgICAgID8gaWRlbXBvdGVudFxyXG4gICAgICAgICAgICAgICAgPyAncmVhZG9ubHktaWRlbXBvdGVudCdcclxuICAgICAgICAgICAgICAgIDogJ3JlYWRvbmx5J1xyXG4gICAgICAgICAgICA6IGlkZW1wb3RlbnRcclxuICAgICAgICAgICAgICAgID8gJ3JlYWR3cml0ZS1pZGVtcG90ZW50J1xyXG4gICAgICAgICAgICAgICAgOiAncmVhZHdyaXRlJztcclxuICAgICAgICB2YXIgcGVyc2lzdGVuY2VUcmFuc2FjdGlvbjtcclxuICAgICAgICAvLyBEbyBhbGwgdHJhbnNhY3Rpb25zIGFzIHJlYWR3cml0ZSBhZ2FpbnN0IGFsbCBvYmplY3Qgc3RvcmVzLCBzaW5jZSB3ZVxyXG4gICAgICAgIC8vIGFyZSB0aGUgb25seSByZWFkZXIvd3JpdGVyLlxyXG4gICAgICAgIHJldHVybiB0aGlzLnNpbXBsZURiXHJcbiAgICAgICAgICAgIC5ydW5UcmFuc2FjdGlvbihzaW1wbGVEYk1vZGUsIEFMTF9TVE9SRVMsIGZ1bmN0aW9uIChzaW1wbGVEYlR4bikge1xyXG4gICAgICAgICAgICBwZXJzaXN0ZW5jZVRyYW5zYWN0aW9uID0gbmV3IEluZGV4ZWREYlRyYW5zYWN0aW9uKHNpbXBsZURiVHhuLCBfdGhpcy5saXN0ZW5TZXF1ZW5jZS5uZXh0KCkpO1xyXG4gICAgICAgICAgICBpZiAobW9kZSA9PT0gJ3JlYWR3cml0ZS1wcmltYXJ5JyB8fFxyXG4gICAgICAgICAgICAgICAgbW9kZSA9PT0gJ3JlYWR3cml0ZS1wcmltYXJ5LWlkZW1wb3RlbnQnKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBXaGlsZSB3ZSBtZXJlbHkgdmVyaWZ5IHRoYXQgd2UgaGF2ZSAob3IgY2FuIGFjcXVpcmUpIHRoZSBsZWFzZVxyXG4gICAgICAgICAgICAgICAgLy8gaW1tZWRpYXRlbHksIHdlIHdhaXQgdG8gZXh0ZW5kIHRoZSBwcmltYXJ5IGxlYXNlIHVudGlsIGFmdGVyXHJcbiAgICAgICAgICAgICAgICAvLyBleGVjdXRpbmcgdHJhbnNhY3Rpb25PcGVyYXRpb24oKS4gVGhpcyBlbnN1cmVzIHRoYXQgZXZlbiBpZiB0aGVcclxuICAgICAgICAgICAgICAgIC8vIHRyYW5zYWN0aW9uT3BlcmF0aW9uIHRha2VzIGEgbG9uZyB0aW1lLCB3ZSdsbCB1c2UgYSByZWNlbnRcclxuICAgICAgICAgICAgICAgIC8vIGxlYXNlVGltZXN0YW1wTXMgaW4gdGhlIGV4dGVuZGVkIChvciBuZXdseSBhY3F1aXJlZCkgbGVhc2UuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMudmVyaWZ5UHJpbWFyeUxlYXNlKHNpbXBsZURiVHhuKVxyXG4gICAgICAgICAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uIChob2xkc1ByaW1hcnlMZWFzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChob2xkc1ByaW1hcnlMZWFzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gLyogaG9sZHNQcmltYXJ5TGVhc2U9ICovIHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5jYW5BY3RBc1ByaW1hcnkoc2ltcGxlRGJUeG4pO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAubmV4dChmdW5jdGlvbiAoaG9sZHNQcmltYXJ5TGVhc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWhvbGRzUHJpbWFyeUxlYXNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yKFwiRmFpbGVkIHRvIG9idGFpbiBwcmltYXJ5IGxlYXNlIGZvciBhY3Rpb24gJ1wiICsgYWN0aW9uICsgXCInLlwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuaXNQcmltYXJ5ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnF1ZXVlLmVucXVldWVBbmRGb3JnZXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLnByaW1hcnlTdGF0ZUxpc3RlbmVyKGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLkZBSUxFRF9QUkVDT05ESVRJT04sIFBSSU1BUllfTEVBU0VfTE9TVF9FUlJPUl9NU0cpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJhbnNhY3Rpb25PcGVyYXRpb24ocGVyc2lzdGVuY2VUcmFuc2FjdGlvbik7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuYWNxdWlyZU9yRXh0ZW5kUHJpbWFyeUxlYXNlKHNpbXBsZURiVHhuKS5uZXh0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIHJlc3VsdDsgfSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy52ZXJpZnlBbGxvd1RhYlN5bmNocm9uaXphdGlvbihzaW1wbGVEYlR4bikubmV4dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRyYW5zYWN0aW9uT3BlcmF0aW9uKHBlcnNpc3RlbmNlVHJhbnNhY3Rpb24pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgIHBlcnNpc3RlbmNlVHJhbnNhY3Rpb24ucmFpc2VPbkNvbW1pdHRlZEV2ZW50KCk7XHJcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBWZXJpZmllcyB0aGF0IHRoZSBjdXJyZW50IHRhYiBpcyB0aGUgcHJpbWFyeSBsZWFzZWhvbGRlciBvciBhbHRlcm5hdGl2ZWx5XHJcbiAgICAgKiB0aGF0IHRoZSBsZWFzZWhvbGRlciBoYXMgb3B0ZWQgaW50byBtdWx0aS10YWIgc3luY2hyb25pemF0aW9uLlxyXG4gICAgICovXHJcbiAgICAvLyBUT0RPKGIvMTE0MjI2MjM0KTogUmVtb3ZlIHRoaXMgY2hlY2sgd2hlbiBgc3luY2hyb25pemVUYWJzYCBjYW4gbm8gbG9uZ2VyXHJcbiAgICAvLyBiZSB0dXJuZWQgb2ZmLlxyXG4gICAgSW5kZXhlZERiUGVyc2lzdGVuY2UucHJvdG90eXBlLnZlcmlmeUFsbG93VGFiU3luY2hyb25pemF0aW9uID0gZnVuY3Rpb24gKHR4bikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIHN0b3JlID0gcHJpbWFyeUNsaWVudFN0b3JlKHR4bik7XHJcbiAgICAgICAgcmV0dXJuIHN0b3JlLmdldChEYlByaW1hcnlDbGllbnQua2V5KS5uZXh0KGZ1bmN0aW9uIChjdXJyZW50UHJpbWFyeSkge1xyXG4gICAgICAgICAgICB2YXIgY3VycmVudExlYXNlSXNWYWxpZCA9IGN1cnJlbnRQcmltYXJ5ICE9PSBudWxsICYmXHJcbiAgICAgICAgICAgICAgICBfdGhpcy5pc1dpdGhpbkFnZShjdXJyZW50UHJpbWFyeS5sZWFzZVRpbWVzdGFtcE1zLCBNQVhfUFJJTUFSWV9FTElHSUJMRV9BR0VfTVMpICYmXHJcbiAgICAgICAgICAgICAgICAhX3RoaXMuaXNDbGllbnRab21iaWVkKGN1cnJlbnRQcmltYXJ5Lm93bmVySWQpO1xyXG4gICAgICAgICAgICBpZiAoY3VycmVudExlYXNlSXNWYWxpZCAmJiAhX3RoaXMuaXNMb2NhbENsaWVudChjdXJyZW50UHJpbWFyeSkpIHtcclxuICAgICAgICAgICAgICAgIGlmICghY3VycmVudFByaW1hcnkuYWxsb3dUYWJTeW5jaHJvbml6YXRpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5GQUlMRURfUFJFQ09ORElUSU9OLCBQUklNQVJZX0xFQVNFX0VYQ0xVU0lWRV9FUlJPUl9NU0cpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBPYnRhaW5zIG9yIGV4dGVuZHMgdGhlIG5ldyBwcmltYXJ5IGxlYXNlIGZvciB0aGUgbG9jYWwgY2xpZW50LiBUaGlzXHJcbiAgICAgKiBtZXRob2QgZG9lcyBub3QgdmVyaWZ5IHRoYXQgdGhlIGNsaWVudCBpcyBlbGlnaWJsZSBmb3IgdGhpcyBsZWFzZS5cclxuICAgICAqL1xyXG4gICAgSW5kZXhlZERiUGVyc2lzdGVuY2UucHJvdG90eXBlLmFjcXVpcmVPckV4dGVuZFByaW1hcnlMZWFzZSA9IGZ1bmN0aW9uICh0eG4pIHtcclxuICAgICAgICB2YXIgbmV3UHJpbWFyeSA9IG5ldyBEYlByaW1hcnlDbGllbnQodGhpcy5jbGllbnRJZCwgdGhpcy5hbGxvd1RhYlN5bmNocm9uaXphdGlvbiwgRGF0ZS5ub3coKSk7XHJcbiAgICAgICAgcmV0dXJuIHByaW1hcnlDbGllbnRTdG9yZSh0eG4pLnB1dChEYlByaW1hcnlDbGllbnQua2V5LCBuZXdQcmltYXJ5KTtcclxuICAgIH07XHJcbiAgICBJbmRleGVkRGJQZXJzaXN0ZW5jZS5pc0F2YWlsYWJsZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gU2ltcGxlRGIuaXNBdmFpbGFibGUoKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEdlbmVyYXRlcyBhIHN0cmluZyB1c2VkIGFzIGEgcHJlZml4IHdoZW4gc3RvcmluZyBkYXRhIGluIEluZGV4ZWREQiBhbmRcclxuICAgICAqIExvY2FsU3RvcmFnZS5cclxuICAgICAqL1xyXG4gICAgSW5kZXhlZERiUGVyc2lzdGVuY2UuYnVpbGRTdG9yYWdlUHJlZml4ID0gZnVuY3Rpb24gKGRhdGFiYXNlSW5mbykge1xyXG4gICAgICAgIC8vIFVzZSB0d28gZGlmZmVyZW50IHByZWZpeCBmb3JtYXRzOlxyXG4gICAgICAgIC8vXHJcbiAgICAgICAgLy8gICAqIGZpcmVzdG9yZSAvIHBlcnNpc3RlbmNlS2V5IC8gcHJvamVjdElEIC4gZGF0YWJhc2VJRCAvIC4uLlxyXG4gICAgICAgIC8vICAgKiBmaXJlc3RvcmUgLyBwZXJzaXN0ZW5jZUtleSAvIHByb2plY3RJRCAvIC4uLlxyXG4gICAgICAgIC8vXHJcbiAgICAgICAgLy8gcHJvamVjdElEcyBhcmUgRE5TLWNvbXBhdGlibGUgbmFtZXMgYW5kIGNhbm5vdCBjb250YWluIGRvdHNcclxuICAgICAgICAvLyBzbyB0aGVyZSdzIG5vIGRhbmdlciBvZiBjb2xsaXNpb25zLlxyXG4gICAgICAgIHZhciBkYXRhYmFzZSA9IGRhdGFiYXNlSW5mby5kYXRhYmFzZUlkLnByb2plY3RJZDtcclxuICAgICAgICBpZiAoIWRhdGFiYXNlSW5mby5kYXRhYmFzZUlkLmlzRGVmYXVsdERhdGFiYXNlKSB7XHJcbiAgICAgICAgICAgIGRhdGFiYXNlICs9ICcuJyArIGRhdGFiYXNlSW5mby5kYXRhYmFzZUlkLmRhdGFiYXNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gJ2ZpcmVzdG9yZS8nICsgZGF0YWJhc2VJbmZvLnBlcnNpc3RlbmNlS2V5ICsgJy8nICsgZGF0YWJhc2UgKyAnLyc7XHJcbiAgICB9O1xyXG4gICAgLyoqIENoZWNrcyB0aGUgcHJpbWFyeSBsZWFzZSBhbmQgcmVtb3ZlcyBpdCBpZiB3ZSBhcmUgdGhlIGN1cnJlbnQgcHJpbWFyeS4gKi9cclxuICAgIEluZGV4ZWREYlBlcnNpc3RlbmNlLnByb3RvdHlwZS5yZWxlYXNlUHJpbWFyeUxlYXNlSWZIZWxkID0gZnVuY3Rpb24gKHR4bikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIHN0b3JlID0gcHJpbWFyeUNsaWVudFN0b3JlKHR4bik7XHJcbiAgICAgICAgcmV0dXJuIHN0b3JlLmdldChEYlByaW1hcnlDbGllbnQua2V5KS5uZXh0KGZ1bmN0aW9uIChwcmltYXJ5Q2xpZW50KSB7XHJcbiAgICAgICAgICAgIGlmIChfdGhpcy5pc0xvY2FsQ2xpZW50KHByaW1hcnlDbGllbnQpKSB7XHJcbiAgICAgICAgICAgICAgICBkZWJ1ZyhMT0dfVEFHJDEsICdSZWxlYXNpbmcgcHJpbWFyeSBsZWFzZS4nKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBzdG9yZS5kZWxldGUoRGJQcmltYXJ5Q2xpZW50LmtleSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKiBWZXJpZmllcyB0aGF0IGB1cGRhdGVUaW1lTXNgIGlzIHdpdGhpbiBgbWF4QWdlTXNgLiAqL1xyXG4gICAgSW5kZXhlZERiUGVyc2lzdGVuY2UucHJvdG90eXBlLmlzV2l0aGluQWdlID0gZnVuY3Rpb24gKHVwZGF0ZVRpbWVNcywgbWF4QWdlTXMpIHtcclxuICAgICAgICB2YXIgbm93ID0gRGF0ZS5ub3coKTtcclxuICAgICAgICB2YXIgbWluQWNjZXB0YWJsZSA9IG5vdyAtIG1heEFnZU1zO1xyXG4gICAgICAgIHZhciBtYXhBY2NlcHRhYmxlID0gbm93O1xyXG4gICAgICAgIGlmICh1cGRhdGVUaW1lTXMgPCBtaW5BY2NlcHRhYmxlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodXBkYXRlVGltZU1zID4gbWF4QWNjZXB0YWJsZSkge1xyXG4gICAgICAgICAgICBlcnJvcihcIkRldGVjdGVkIGFuIHVwZGF0ZSB0aW1lIHRoYXQgaXMgaW4gdGhlIGZ1dHVyZTogXCIgKyB1cGRhdGVUaW1lTXMgKyBcIiA+IFwiICsgbWF4QWNjZXB0YWJsZSk7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9O1xyXG4gICAgSW5kZXhlZERiUGVyc2lzdGVuY2UucHJvdG90eXBlLmF0dGFjaFZpc2liaWxpdHlIYW5kbGVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgaWYgKHRoaXMuZG9jdW1lbnQgIT09IG51bGwgJiZcclxuICAgICAgICAgICAgdHlwZW9mIHRoaXMuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lciA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICB0aGlzLmRvY3VtZW50VmlzaWJpbGl0eUhhbmRsZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5xdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5pbkZvcmVncm91bmQgPSBfdGhpcy5kb2N1bWVudC52aXNpYmlsaXR5U3RhdGUgPT09ICd2aXNpYmxlJztcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMudXBkYXRlQ2xpZW50TWV0YWRhdGFBbmRUcnlCZWNvbWVQcmltYXJ5KCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgdGhpcy5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCd2aXNpYmlsaXR5Y2hhbmdlJywgdGhpcy5kb2N1bWVudFZpc2liaWxpdHlIYW5kbGVyKTtcclxuICAgICAgICAgICAgdGhpcy5pbkZvcmVncm91bmQgPSB0aGlzLmRvY3VtZW50LnZpc2liaWxpdHlTdGF0ZSA9PT0gJ3Zpc2libGUnO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBJbmRleGVkRGJQZXJzaXN0ZW5jZS5wcm90b3R5cGUuZGV0YWNoVmlzaWJpbGl0eUhhbmRsZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZG9jdW1lbnRWaXNpYmlsaXR5SGFuZGxlcikge1xyXG4gICAgICAgICAgICBhc3NlcnQodGhpcy5kb2N1bWVudCAhPT0gbnVsbCAmJlxyXG4gICAgICAgICAgICAgICAgdHlwZW9mIHRoaXMuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lciA9PT0gJ2Z1bmN0aW9uJywgXCJFeHBlY3RlZCAnZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcicgdG8gYmUgYSBmdW5jdGlvblwiKTtcclxuICAgICAgICAgICAgdGhpcy5kb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCd2aXNpYmlsaXR5Y2hhbmdlJywgdGhpcy5kb2N1bWVudFZpc2liaWxpdHlIYW5kbGVyKTtcclxuICAgICAgICAgICAgdGhpcy5kb2N1bWVudFZpc2liaWxpdHlIYW5kbGVyID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBBdHRhY2hlcyBhIHdpbmRvdy51bmxvYWQgaGFuZGxlciB0aGF0IHdpbGwgc3luY2hyb25vdXNseSB3cml0ZSBvdXJcclxuICAgICAqIGNsaWVudElkIHRvIGEgXCJ6b21iaWUgY2xpZW50IGlkXCIgbG9jYXRpb24gaW4gTG9jYWxTdG9yYWdlLiBUaGlzIGNhbiBiZSB1c2VkXHJcbiAgICAgKiBieSB0YWJzIHRyeWluZyB0byBhY3F1aXJlIHRoZSBwcmltYXJ5IGxlYXNlIHRvIGRldGVybWluZSB0aGF0IHRoZSBsZWFzZVxyXG4gICAgICogaXMgbm8gbG9uZ2VyIHZhbGlkIGV2ZW4gaWYgdGhlIHRpbWVzdGFtcCBpcyByZWNlbnQuIFRoaXMgaXMgcGFydGljdWxhcmx5XHJcbiAgICAgKiBpbXBvcnRhbnQgZm9yIHRoZSByZWZyZXNoIGNhc2UgKHNvIHRoZSB0YWIgY29ycmVjdGx5IHJlLWFjcXVpcmVzIHRoZVxyXG4gICAgICogcHJpbWFyeSBsZWFzZSkuIExvY2FsU3RvcmFnZSBpcyB1c2VkIGZvciB0aGlzIHJhdGhlciB0aGFuIEluZGV4ZWREYiBiZWNhdXNlXHJcbiAgICAgKiBpdCBpcyBhIHN5bmNocm9ub3VzIEFQSSBhbmQgc28gY2FuIGJlIHVzZWQgcmVsaWFibHkgZnJvbSAgYW4gdW5sb2FkXHJcbiAgICAgKiBoYW5kbGVyLlxyXG4gICAgICovXHJcbiAgICBJbmRleGVkRGJQZXJzaXN0ZW5jZS5wcm90b3R5cGUuYXR0YWNoV2luZG93VW5sb2FkSG9vayA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lciA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICB0aGlzLndpbmRvd1VubG9hZEhhbmRsZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBOb3RlOiBJbiB0aGVvcnksIHRoaXMgc2hvdWxkIGJlIHNjaGVkdWxlZCBvbiB0aGUgQXN5bmNRdWV1ZSBzaW5jZSBpdFxyXG4gICAgICAgICAgICAgICAgLy8gYWNjZXNzZXMgaW50ZXJuYWwgc3RhdGUuIFdlIGV4ZWN1dGUgdGhpcyBjb2RlIGRpcmVjdGx5IGR1cmluZyBzaHV0ZG93blxyXG4gICAgICAgICAgICAgICAgLy8gdG8gbWFrZSBzdXJlIGl0IGdldHMgYSBjaGFuY2UgdG8gcnVuLlxyXG4gICAgICAgICAgICAgICAgX3RoaXMubWFya0NsaWVudFpvbWJpZWQoKTtcclxuICAgICAgICAgICAgICAgIF90aGlzLnF1ZXVlLmVucXVldWVBbmRGb3JnZXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIEF0dGVtcHQgZ3JhY2VmdWwgc2h1dGRvd24gKGluY2x1ZGluZyByZWxlYXNpbmcgb3VyIHByaW1hcnkgbGVhc2UpLFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGJ1dCB0aGVyZSdzIG5vIGd1YXJhbnRlZSBpdCB3aWxsIGNvbXBsZXRlLlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5zaHV0ZG93bigpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHRoaXMud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3VubG9hZCcsIHRoaXMud2luZG93VW5sb2FkSGFuZGxlcik7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIEluZGV4ZWREYlBlcnNpc3RlbmNlLnByb3RvdHlwZS5kZXRhY2hXaW5kb3dVbmxvYWRIb29rID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICh0aGlzLndpbmRvd1VubG9hZEhhbmRsZXIpIHtcclxuICAgICAgICAgICAgYXNzZXJ0KHR5cGVvZiB0aGlzLndpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyID09PSAnZnVuY3Rpb24nLCBcIkV4cGVjdGVkICd3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcicgdG8gYmUgYSBmdW5jdGlvblwiKTtcclxuICAgICAgICAgICAgdGhpcy53aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigndW5sb2FkJywgdGhpcy53aW5kb3dVbmxvYWRIYW5kbGVyKTtcclxuICAgICAgICAgICAgdGhpcy53aW5kb3dVbmxvYWRIYW5kbGVyID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHdoZXRoZXIgYSBjbGllbnQgaXMgXCJ6b21iaWVkXCIgYmFzZWQgb24gaXRzIExvY2FsU3RvcmFnZSBlbnRyeS5cclxuICAgICAqIENsaWVudHMgYmVjb21lIHpvbWJpZWQgd2hlbiB0aGVpciB0YWIgY2xvc2VzIHdpdGhvdXQgcnVubmluZyBhbGwgb2YgdGhlXHJcbiAgICAgKiBjbGVhbnVwIGxvZ2ljIGluIGBzaHV0ZG93bigpYC5cclxuICAgICAqL1xyXG4gICAgSW5kZXhlZERiUGVyc2lzdGVuY2UucHJvdG90eXBlLmlzQ2xpZW50Wm9tYmllZCA9IGZ1bmN0aW9uIChjbGllbnRJZCkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHZhciBpc1pvbWJpZWQgPSB0aGlzLndlYlN0b3JhZ2UuZ2V0SXRlbSh0aGlzLnpvbWJpZWRDbGllbnRMb2NhbFN0b3JhZ2VLZXkoY2xpZW50SWQpKSAhPT1cclxuICAgICAgICAgICAgICAgIG51bGw7XHJcbiAgICAgICAgICAgIGRlYnVnKExPR19UQUckMSwgXCJDbGllbnQgJ1wiICsgY2xpZW50SWQgKyBcIicgXCIgKyAoaXNab21iaWVkID8gJ2lzJyA6ICdpcyBub3QnKSArIFwiIHpvbWJpZWQgaW4gTG9jYWxTdG9yYWdlXCIpO1xyXG4gICAgICAgICAgICByZXR1cm4gaXNab21iaWVkO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAvLyBHcmFjZWZ1bGx5IGhhbmRsZSBpZiBMb2NhbFN0b3JhZ2UgaXNuJ3Qgd29ya2luZy5cclxuICAgICAgICAgICAgZXJyb3IoTE9HX1RBRyQxLCAnRmFpbGVkIHRvIGdldCB6b21iaWVkIGNsaWVudCBpZC4nLCBlKTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJlY29yZCBjbGllbnQgYXMgem9tYmllZCAoYSBjbGllbnQgdGhhdCBoYWQgaXRzIHRhYiBjbG9zZWQpLiBab21iaWVkXHJcbiAgICAgKiBjbGllbnRzIGFyZSBpZ25vcmVkIGR1cmluZyBwcmltYXJ5IHRhYiBzZWxlY3Rpb24uXHJcbiAgICAgKi9cclxuICAgIEluZGV4ZWREYlBlcnNpc3RlbmNlLnByb3RvdHlwZS5tYXJrQ2xpZW50Wm9tYmllZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICB0aGlzLndlYlN0b3JhZ2Uuc2V0SXRlbSh0aGlzLnpvbWJpZWRDbGllbnRMb2NhbFN0b3JhZ2VLZXkodGhpcy5jbGllbnRJZCksIFN0cmluZyhEYXRlLm5vdygpKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIC8vIEdyYWNlZnVsbHkgaGFuZGxlIGlmIExvY2FsU3RvcmFnZSBpc24ndCBhdmFpbGFibGUgLyB3b3JraW5nLlxyXG4gICAgICAgICAgICBlcnJvcignRmFpbGVkIHRvIHNldCB6b21iaWUgY2xpZW50IGlkLicsIGUpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKiogUmVtb3ZlcyB0aGUgem9tYmllZCBjbGllbnQgZW50cnkgaWYgaXQgZXhpc3RzLiAqL1xyXG4gICAgSW5kZXhlZERiUGVyc2lzdGVuY2UucHJvdG90eXBlLnJlbW92ZUNsaWVudFpvbWJpZWRFbnRyeSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICB0aGlzLndlYlN0b3JhZ2UucmVtb3ZlSXRlbSh0aGlzLnpvbWJpZWRDbGllbnRMb2NhbFN0b3JhZ2VLZXkodGhpcy5jbGllbnRJZCkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAvLyBJZ25vcmVcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgSW5kZXhlZERiUGVyc2lzdGVuY2UucHJvdG90eXBlLnpvbWJpZWRDbGllbnRMb2NhbFN0b3JhZ2VLZXkgPSBmdW5jdGlvbiAoY2xpZW50SWQpIHtcclxuICAgICAgICByZXR1cm4gWk9NQklFRF9DTElFTlRTX0tFWV9QUkVGSVggKyBcIl9cIiArIHRoaXMucGVyc2lzdGVuY2VLZXkgKyBcIl9cIiArIGNsaWVudElkO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogVGhlIG5hbWUgb2YgdGhlIG1haW4gKGFuZCBjdXJyZW50bHkgb25seSkgSW5kZXhlZERCIGRhdGFiYXNlLiB0aGlzIG5hbWUgaXNcclxuICAgICAqIGFwcGVuZGVkIHRvIHRoZSBwcmVmaXggcHJvdmlkZWQgdG8gdGhlIEluZGV4ZWREYlBlcnNpc3RlbmNlIGNvbnN0cnVjdG9yLlxyXG4gICAgICovXHJcbiAgICBJbmRleGVkRGJQZXJzaXN0ZW5jZS5NQUlOX0RBVEFCQVNFID0gJ21haW4nO1xyXG4gICAgcmV0dXJuIEluZGV4ZWREYlBlcnNpc3RlbmNlO1xyXG59KCkpO1xyXG5mdW5jdGlvbiBpc1ByaW1hcnlMZWFzZUxvc3RFcnJvcihlcnIpIHtcclxuICAgIHJldHVybiAoZXJyLmNvZGUgPT09IENvZGUuRkFJTEVEX1BSRUNPTkRJVElPTiAmJlxyXG4gICAgICAgIGVyci5tZXNzYWdlID09PSBQUklNQVJZX0xFQVNFX0xPU1RfRVJST1JfTVNHKTtcclxufVxyXG4vKipcclxuICogVmVyaWZpZXMgdGhlIGVycm9yIHRocm93biBieSBhIExvY2FsU3RvcmUgb3BlcmF0aW9uLiBJZiBhIExvY2FsU3RvcmVcclxuICogb3BlcmF0aW9uIGZhaWxzIGJlY2F1c2UgdGhlIHByaW1hcnkgbGVhc2UgaGFzIGJlZW4gdGFrZW4gYnkgYW5vdGhlciBjbGllbnQsXHJcbiAqIHdlIGlnbm9yZSB0aGUgZXJyb3IgKHRoZSBwZXJzaXN0ZW5jZSBsYXllciB3aWxsIGltbWVkaWF0ZWx5IGNhbGxcclxuICogYGFwcGx5UHJpbWFyeUxlYXNlYCB0byBwcm9wYWdhdGUgdGhlIHByaW1hcnkgc3RhdGUgY2hhbmdlKS4gQWxsIG90aGVyIGVycm9yc1xyXG4gKiBhcmUgcmUtdGhyb3duLlxyXG4gKlxyXG4gKiBAcGFyYW0gZXJyIEFuIGVycm9yIHJldHVybmVkIGJ5IGEgTG9jYWxTdG9yZSBvcGVyYXRpb24uXHJcbiAqIEByZXR1cm4gQSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgYWZ0ZXIgd2UgcmVjb3ZlcmVkLCBvciB0aGUgb3JpZ2luYWwgZXJyb3IuXHJcbiAqL1xyXG5mdW5jdGlvbiBpZ25vcmVJZlByaW1hcnlMZWFzZUxvc3MoZXJyKSB7XHJcbiAgICByZXR1cm4gdHNsaWIuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRzbGliLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICBpZiAoaXNQcmltYXJ5TGVhc2VMb3N0RXJyb3IoZXJyKSkge1xyXG4gICAgICAgICAgICAgICAgZGVidWcoTE9HX1RBRyQxLCAnVW5leHBlY3RlZGx5IGxvc3QgcHJpbWFyeSBsZWFzZScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgZXJyO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59XHJcbi8qKlxyXG4gKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmb3IgdGhlIHByaW1hcnkgY2xpZW50IG9iamVjdCBzdG9yZS5cclxuICovXHJcbmZ1bmN0aW9uIHByaW1hcnlDbGllbnRTdG9yZSh0eG4pIHtcclxuICAgIHJldHVybiB0eG4uc3RvcmUoRGJQcmltYXJ5Q2xpZW50LnN0b3JlKTtcclxufVxyXG4vKipcclxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSBjbGllbnQgbWV0YWRhdGEgb2JqZWN0IHN0b3JlLlxyXG4gKi9cclxuZnVuY3Rpb24gY2xpZW50TWV0YWRhdGFTdG9yZSh0eG4pIHtcclxuICAgIHJldHVybiB0eG4uc3RvcmUoRGJDbGllbnRNZXRhZGF0YS5zdG9yZSk7XHJcbn1cclxuLyoqIFByb3ZpZGVzIExSVSBmdW5jdGlvbmFsaXR5IGZvciBJbmRleGVkREIgcGVyc2lzdGVuY2UuICovXHJcbnZhciBJbmRleGVkRGJMcnVEZWxlZ2F0ZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEluZGV4ZWREYkxydURlbGVnYXRlKGRiLCBwYXJhbXMpIHtcclxuICAgICAgICB0aGlzLmRiID0gZGI7XHJcbiAgICAgICAgdGhpcy5pbk1lbW9yeVBpbnMgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuZ2FyYmFnZUNvbGxlY3RvciA9IG5ldyBMcnVHYXJiYWdlQ29sbGVjdG9yKHRoaXMsIHBhcmFtcyk7XHJcbiAgICB9XHJcbiAgICBJbmRleGVkRGJMcnVEZWxlZ2F0ZS5wcm90b3R5cGUuZ2V0U2VxdWVuY2VOdW1iZXJDb3VudCA9IGZ1bmN0aW9uICh0eG4pIHtcclxuICAgICAgICB2YXIgZG9jQ291bnRQcm9taXNlID0gdGhpcy5vcnBoYW5lZERvY21lbnRDb3VudCh0eG4pO1xyXG4gICAgICAgIHZhciB0YXJnZXRDb3VudFByb21pc2UgPSB0aGlzLmRiLmdldFRhcmdldENhY2hlKCkuZ2V0VGFyZ2V0Q291bnQodHhuKTtcclxuICAgICAgICByZXR1cm4gdGFyZ2V0Q291bnRQcm9taXNlLm5leHQoZnVuY3Rpb24gKHRhcmdldENvdW50KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBkb2NDb3VudFByb21pc2UubmV4dChmdW5jdGlvbiAoZG9jQ291bnQpIHsgcmV0dXJuIHRhcmdldENvdW50ICsgZG9jQ291bnQ7IH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIEluZGV4ZWREYkxydURlbGVnYXRlLnByb3RvdHlwZS5vcnBoYW5lZERvY21lbnRDb3VudCA9IGZ1bmN0aW9uICh0eG4pIHtcclxuICAgICAgICB2YXIgb3JwaGFuZWRDb3VudCA9IDA7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZm9yRWFjaE9ycGhhbmVkRG9jdW1lbnRTZXF1ZW5jZU51bWJlcih0eG4sIGZ1bmN0aW9uIChfKSB7XHJcbiAgICAgICAgICAgIG9ycGhhbmVkQ291bnQrKztcclxuICAgICAgICB9KS5uZXh0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIG9ycGhhbmVkQ291bnQ7IH0pO1xyXG4gICAgfTtcclxuICAgIEluZGV4ZWREYkxydURlbGVnYXRlLnByb3RvdHlwZS5mb3JFYWNoVGFyZ2V0ID0gZnVuY3Rpb24gKHR4biwgZikge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRiLmdldFRhcmdldENhY2hlKCkuZm9yRWFjaFRhcmdldCh0eG4sIGYpO1xyXG4gICAgfTtcclxuICAgIEluZGV4ZWREYkxydURlbGVnYXRlLnByb3RvdHlwZS5mb3JFYWNoT3JwaGFuZWREb2N1bWVudFNlcXVlbmNlTnVtYmVyID0gZnVuY3Rpb24gKHR4biwgZikge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmZvckVhY2hPcnBoYW5lZERvY3VtZW50KHR4biwgZnVuY3Rpb24gKGRvY0tleSwgc2VxdWVuY2VOdW1iZXIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGYoc2VxdWVuY2VOdW1iZXIpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIEluZGV4ZWREYkxydURlbGVnYXRlLnByb3RvdHlwZS5zZXRJbk1lbW9yeVBpbnMgPSBmdW5jdGlvbiAoaW5NZW1vcnlQaW5zKSB7XHJcbiAgICAgICAgdGhpcy5pbk1lbW9yeVBpbnMgPSBpbk1lbW9yeVBpbnM7XHJcbiAgICB9O1xyXG4gICAgSW5kZXhlZERiTHJ1RGVsZWdhdGUucHJvdG90eXBlLmFkZFJlZmVyZW5jZSA9IGZ1bmN0aW9uICh0eG4sIGtleSkge1xyXG4gICAgICAgIHJldHVybiB3cml0ZVNlbnRpbmVsS2V5KHR4biwga2V5KTtcclxuICAgIH07XHJcbiAgICBJbmRleGVkRGJMcnVEZWxlZ2F0ZS5wcm90b3R5cGUucmVtb3ZlUmVmZXJlbmNlID0gZnVuY3Rpb24gKHR4biwga2V5KSB7XHJcbiAgICAgICAgcmV0dXJuIHdyaXRlU2VudGluZWxLZXkodHhuLCBrZXkpO1xyXG4gICAgfTtcclxuICAgIEluZGV4ZWREYkxydURlbGVnYXRlLnByb3RvdHlwZS5yZW1vdmVUYXJnZXRzID0gZnVuY3Rpb24gKHR4biwgdXBwZXJCb3VuZCwgYWN0aXZlVGFyZ2V0SWRzKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGJcclxuICAgICAgICAgICAgLmdldFRhcmdldENhY2hlKClcclxuICAgICAgICAgICAgLnJlbW92ZVRhcmdldHModHhuLCB1cHBlckJvdW5kLCBhY3RpdmVUYXJnZXRJZHMpO1xyXG4gICAgfTtcclxuICAgIEluZGV4ZWREYkxydURlbGVnYXRlLnByb3RvdHlwZS5yZW1vdmVNdXRhdGlvblJlZmVyZW5jZSA9IGZ1bmN0aW9uICh0eG4sIGtleSkge1xyXG4gICAgICAgIHJldHVybiB3cml0ZVNlbnRpbmVsS2V5KHR4biwga2V5KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiBhbnl0aGluZyB3b3VsZCBwcmV2ZW50IHRoaXMgZG9jdW1lbnQgZnJvbSBiZWluZyBnYXJiYWdlXHJcbiAgICAgKiBjb2xsZWN0ZWQsIGdpdmVuIHRoYXQgdGhlIGRvY3VtZW50IGluIHF1ZXN0aW9uIGlzIG5vdCBwcmVzZW50IGluIGFueVxyXG4gICAgICogdGFyZ2V0cyBhbmQgaGFzIGEgc2VxdWVuY2UgbnVtYmVyIGxlc3MgdGhhbiBvciBlcXVhbCB0byB0aGUgdXBwZXIgYm91bmQgZm9yXHJcbiAgICAgKiB0aGUgY29sbGVjdGlvbiBydW4uXHJcbiAgICAgKi9cclxuICAgIEluZGV4ZWREYkxydURlbGVnYXRlLnByb3RvdHlwZS5pc1Bpbm5lZCA9IGZ1bmN0aW9uICh0eG4sIGRvY0tleSkge1xyXG4gICAgICAgIGlmICh0aGlzLmluTWVtb3J5UGlucy5jb250YWluc0tleShkb2NLZXkpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSh0cnVlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBtdXRhdGlvblF1ZXVlc0NvbnRhaW5LZXkodHhuLCBkb2NLZXkpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBJbmRleGVkRGJMcnVEZWxlZ2F0ZS5wcm90b3R5cGUucmVtb3ZlT3JwaGFuZWREb2N1bWVudHMgPSBmdW5jdGlvbiAodHhuLCB1cHBlckJvdW5kKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgZG9jdW1lbnRDYWNoZSA9IHRoaXMuZGIuZ2V0UmVtb3RlRG9jdW1lbnRDYWNoZSgpO1xyXG4gICAgICAgIHZhciBjaGFuZ2VCdWZmZXIgPSBkb2N1bWVudENhY2hlLm5ld0NoYW5nZUJ1ZmZlcigpO1xyXG4gICAgICAgIHZhciBwcm9taXNlcyA9IFtdO1xyXG4gICAgICAgIHZhciBkb2N1bWVudENvdW50ID0gMDtcclxuICAgICAgICB2YXIgaXRlcmF0aW9uID0gdGhpcy5mb3JFYWNoT3JwaGFuZWREb2N1bWVudCh0eG4sIGZ1bmN0aW9uIChkb2NLZXksIHNlcXVlbmNlTnVtYmVyKSB7XHJcbiAgICAgICAgICAgIGlmIChzZXF1ZW5jZU51bWJlciA8PSB1cHBlckJvdW5kKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcCA9IF90aGlzLmlzUGlubmVkKHR4biwgZG9jS2V5KS5uZXh0KGZ1bmN0aW9uIChpc1Bpbm5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghaXNQaW5uZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnRDb3VudCsrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBPdXIgc2l6ZSBhY2NvdW50aW5nIHJlcXVpcmVzIHVzIHRvIHJlYWQgYWxsIGRvY3VtZW50cyBiZWZvcmVcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVtb3ZpbmcgdGhlbS5cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNoYW5nZUJ1ZmZlci5nZXRFbnRyeSh0eG4sIGRvY0tleSkubmV4dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VCdWZmZXIucmVtb3ZlRW50cnkoZG9jS2V5KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkb2N1bWVudFRhcmdldFN0b3JlKHR4bikuZGVsZXRlKHNlbnRpbmVsS2V5JDEoZG9jS2V5KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgcHJvbWlzZXMucHVzaChwKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBpdGVyYXRpb25cclxuICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKCkgeyByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLndhaXRGb3IocHJvbWlzZXMpOyB9KVxyXG4gICAgICAgICAgICAubmV4dChmdW5jdGlvbiAoKSB7IHJldHVybiBjaGFuZ2VCdWZmZXIuYXBwbHkodHhuKTsgfSlcclxuICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKCkgeyByZXR1cm4gZG9jdW1lbnRDb3VudDsgfSk7XHJcbiAgICB9O1xyXG4gICAgSW5kZXhlZERiTHJ1RGVsZWdhdGUucHJvdG90eXBlLnJlbW92ZVRhcmdldCA9IGZ1bmN0aW9uICh0eG4sIHRhcmdldERhdGEpIHtcclxuICAgICAgICB2YXIgdXBkYXRlZCA9IHRhcmdldERhdGEud2l0aFNlcXVlbmNlTnVtYmVyKHR4bi5jdXJyZW50U2VxdWVuY2VOdW1iZXIpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRiLmdldFRhcmdldENhY2hlKCkudXBkYXRlVGFyZ2V0RGF0YSh0eG4sIHVwZGF0ZWQpO1xyXG4gICAgfTtcclxuICAgIEluZGV4ZWREYkxydURlbGVnYXRlLnByb3RvdHlwZS51cGRhdGVMaW1ib0RvY3VtZW50ID0gZnVuY3Rpb24gKHR4biwga2V5KSB7XHJcbiAgICAgICAgcmV0dXJuIHdyaXRlU2VudGluZWxLZXkodHhuLCBrZXkpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQ2FsbCBwcm92aWRlZCBmdW5jdGlvbiBmb3IgZWFjaCBkb2N1bWVudCBpbiB0aGUgY2FjaGUgdGhhdCBpcyAnb3JwaGFuZWQnLiBPcnBoYW5lZFxyXG4gICAgICogbWVhbnMgbm90IGEgcGFydCBvZiBhbnkgdGFyZ2V0LCBzbyB0aGUgb25seSBlbnRyeSBpbiB0aGUgdGFyZ2V0LWRvY3VtZW50IGluZGV4IGZvclxyXG4gICAgICogdGhhdCBkb2N1bWVudCB3aWxsIGJlIHRoZSBzZW50aW5lbCByb3cgKHRhcmdldElkIDApLCB3aGljaCB3aWxsIGFsc28gaGF2ZSB0aGUgc2VxdWVuY2VcclxuICAgICAqIG51bWJlciBmb3IgdGhlIGxhc3QgdGltZSB0aGUgZG9jdW1lbnQgd2FzIGFjY2Vzc2VkLlxyXG4gICAgICovXHJcbiAgICBJbmRleGVkRGJMcnVEZWxlZ2F0ZS5wcm90b3R5cGUuZm9yRWFjaE9ycGhhbmVkRG9jdW1lbnQgPSBmdW5jdGlvbiAodHhuLCBmKSB7XHJcbiAgICAgICAgdmFyIHN0b3JlID0gZG9jdW1lbnRUYXJnZXRTdG9yZSh0eG4pO1xyXG4gICAgICAgIHZhciBuZXh0VG9SZXBvcnQgPSBMaXN0ZW5TZXF1ZW5jZS5JTlZBTElEO1xyXG4gICAgICAgIHZhciBuZXh0UGF0aDtcclxuICAgICAgICByZXR1cm4gc3RvcmVcclxuICAgICAgICAgICAgLml0ZXJhdGUoe1xyXG4gICAgICAgICAgICBpbmRleDogRGJUYXJnZXREb2N1bWVudC5kb2N1bWVudFRhcmdldHNJbmRleFxyXG4gICAgICAgIH0sIGZ1bmN0aW9uIChfYSwgX2IpIHtcclxuICAgICAgICAgICAgdmFyIHRhcmdldElkID0gX2FbMF0sIGRvY0tleSA9IF9hWzFdO1xyXG4gICAgICAgICAgICB2YXIgcGF0aCA9IF9iLnBhdGgsIHNlcXVlbmNlTnVtYmVyID0gX2Iuc2VxdWVuY2VOdW1iZXI7XHJcbiAgICAgICAgICAgIGlmICh0YXJnZXRJZCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgLy8gaWYgbmV4dFRvUmVwb3J0IGlzIHZhbGlkLCByZXBvcnQgaXQsIHRoaXMgaXMgYSBuZXcga2V5IHNvIHRoZVxyXG4gICAgICAgICAgICAgICAgLy8gbGFzdCBvbmUgbXVzdCBub3QgYmUgYSBtZW1iZXIgb2YgYW55IHRhcmdldHMuXHJcbiAgICAgICAgICAgICAgICBpZiAobmV4dFRvUmVwb3J0ICE9PSBMaXN0ZW5TZXF1ZW5jZS5JTlZBTElEKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZihuZXcgRG9jdW1lbnRLZXkoZGVjb2RlKG5leHRQYXRoKSksIG5leHRUb1JlcG9ydCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBzZXQgbmV4dFRvUmVwb3J0IHRvIGJlIHRoaXMgc2VxdWVuY2UgbnVtYmVyLiBJdCdzIHRoZSBuZXh0IG9uZSB3ZVxyXG4gICAgICAgICAgICAgICAgLy8gbWlnaHQgcmVwb3J0LCBpZiB3ZSBkb24ndCBmaW5kIGFueSB0YXJnZXRzIGZvciB0aGlzIGRvY3VtZW50LlxyXG4gICAgICAgICAgICAgICAgLy8gTm90ZSB0aGF0IHRoZSBzZXF1ZW5jZSBudW1iZXIgbXVzdCBiZSBkZWZpbmVkIHdoZW4gdGhlIHRhcmdldElkXHJcbiAgICAgICAgICAgICAgICAvLyBpcyAwLlxyXG4gICAgICAgICAgICAgICAgbmV4dFRvUmVwb3J0ID0gc2VxdWVuY2VOdW1iZXI7XHJcbiAgICAgICAgICAgICAgICBuZXh0UGF0aCA9IHBhdGg7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBzZXQgbmV4dFRvUmVwb3J0IHRvIGJlIGludmFsaWQsIHdlIGtub3cgd2UgZG9uJ3QgbmVlZCB0byByZXBvcnRcclxuICAgICAgICAgICAgICAgIC8vIHRoaXMgb25lIHNpbmNlIHdlIGZvdW5kIGEgdGFyZ2V0IGZvciBpdC5cclxuICAgICAgICAgICAgICAgIG5leHRUb1JlcG9ydCA9IExpc3RlblNlcXVlbmNlLklOVkFMSUQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAubmV4dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIC8vIFNpbmNlIHdlIHJlcG9ydCBzZXF1ZW5jZSBudW1iZXJzIGFmdGVyIGdldHRpbmcgdG8gdGhlIG5leHQga2V5LCB3ZVxyXG4gICAgICAgICAgICAvLyBuZWVkIHRvIGNoZWNrIGlmIHRoZSBsYXN0IGtleSB3ZSBpdGVyYXRlZCBvdmVyIHdhcyBhbiBvcnBoYW5lZFxyXG4gICAgICAgICAgICAvLyBkb2N1bWVudCBhbmQgcmVwb3J0IGl0LlxyXG4gICAgICAgICAgICBpZiAobmV4dFRvUmVwb3J0ICE9PSBMaXN0ZW5TZXF1ZW5jZS5JTlZBTElEKSB7XHJcbiAgICAgICAgICAgICAgICBmKG5ldyBEb2N1bWVudEtleShkZWNvZGUobmV4dFBhdGgpKSwgbmV4dFRvUmVwb3J0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIEluZGV4ZWREYkxydURlbGVnYXRlLnByb3RvdHlwZS5nZXRDYWNoZVNpemUgPSBmdW5jdGlvbiAodHhuKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGIuZ2V0UmVtb3RlRG9jdW1lbnRDYWNoZSgpLmdldFNpemUodHhuKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gSW5kZXhlZERiTHJ1RGVsZWdhdGU7XHJcbn0oKSk7XHJcbmZ1bmN0aW9uIHNlbnRpbmVsS2V5JDEoa2V5KSB7XHJcbiAgICByZXR1cm4gWzAsIGVuY29kZShrZXkucGF0aCldO1xyXG59XHJcbi8qKlxyXG4gKiBAcmV0dXJuIEEgdmFsdWUgc3VpdGFibGUgZm9yIHdyaXRpbmcgYSBzZW50aW5lbCByb3cgaW4gdGhlIHRhcmdldC1kb2N1bWVudFxyXG4gKiBzdG9yZS5cclxuICovXHJcbmZ1bmN0aW9uIHNlbnRpbmVsUm93KGtleSwgc2VxdWVuY2VOdW1iZXIpIHtcclxuICAgIHJldHVybiBuZXcgRGJUYXJnZXREb2N1bWVudCgwLCBlbmNvZGUoa2V5LnBhdGgpLCBzZXF1ZW5jZU51bWJlcik7XHJcbn1cclxuZnVuY3Rpb24gd3JpdGVTZW50aW5lbEtleSh0eG4sIGtleSkge1xyXG4gICAgcmV0dXJuIGRvY3VtZW50VGFyZ2V0U3RvcmUodHhuKS5wdXQoc2VudGluZWxSb3coa2V5LCB0eG4uY3VycmVudFNlcXVlbmNlTnVtYmVyKSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8vIFVudHlwZWQgTnVtYmVyIGFsaWFzIHdlIGNhbiB1c2UgdG8gY2hlY2sgZm9yIEVTNiBtZXRob2RzIC8gcHJvcGVydGllcy5cclxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxudmFyIE51bWJlckFzQW55ID0gTnVtYmVyO1xyXG4vKipcclxuICogTWluaW11bSBzYWZlIGludGVnZXIgaW4gSmF2YXNjcmlwdCBiZWNhdXNlIG9mIGZsb2F0aW5nIHBvaW50IHByZWNpc2lvbi5cclxuICogQWRkZWQgdG8gbm90IHJlbHkgb24gRVM2IGZlYXR1cmVzLlxyXG4gKi9cclxudmFyIE1JTl9TQUZFX0lOVEVHRVIgPSBOdW1iZXJBc0FueS5NSU5fU0FGRV9JTlRFR0VSIHx8IC0oTWF0aC5wb3coMiwgNTMpIC0gMSk7XHJcbi8qKlxyXG4gKiBNYXhpbXVtIHNhZmUgaW50ZWdlciBpbiBKYXZhc2NyaXB0IGJlY2F1c2Ugb2YgZmxvYXRpbmcgcG9pbnQgcHJlY2lzaW9uLlxyXG4gKiBBZGRlZCB0byBub3QgcmVseSBvbiBFUzYgZmVhdHVyZXMuXHJcbiAqL1xyXG52YXIgTUFYX1NBRkVfSU5URUdFUiA9IE51bWJlckFzQW55Lk1BWF9TQUZFX0lOVEVHRVIgfHwgTWF0aC5wb3coMiwgNTMpIC0gMTtcclxuLyoqXHJcbiAqIFJldHVybnMgd2hldGhlciBhbiBudW1iZXIgaXMgYW4gaW50ZWdlciwgdXNlcyBuYXRpdmUgaW1wbGVtZW50YXRpb24gaWZcclxuICogYXZhaWxhYmxlLlxyXG4gKiBBZGRlZCB0byBub3QgcmVseSBvbiBFUzYgZmVhdHVyZXMuXHJcbiAqIEBwYXJhbSB2YWx1ZSBUaGUgdmFsdWUgdG8gdGVzdCBmb3IgYmVpbmcgYW4gaW50ZWdlclxyXG4gKi9cclxudmFyIGlzSW50ZWdlciA9IE51bWJlckFzQW55LmlzSW50ZWdlciB8fFxyXG4gICAgKGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInICYmXHJcbiAgICAgICAgICAgIGlzRmluaXRlKHZhbHVlKSAmJlxyXG4gICAgICAgICAgICBNYXRoLmZsb29yKHZhbHVlKSA9PT0gdmFsdWU7XHJcbiAgICB9KTtcclxuLyoqXHJcbiAqIFJldHVybnMgd2hldGhlciBhIHZhcmlhYmxlIGlzIGVpdGhlciB1bmRlZmluZWQgb3IgbnVsbC5cclxuICovXHJcbmZ1bmN0aW9uIGlzTnVsbE9yVW5kZWZpbmVkKHZhbHVlKSB7XHJcbiAgICByZXR1cm4gdmFsdWUgPT09IG51bGwgfHwgdmFsdWUgPT09IHVuZGVmaW5lZDtcclxufVxyXG4vKipcclxuICogUmV0dXJucyB3aGV0aGVyIGEgdmFsdWUgaXMgYW4gaW50ZWdlciBhbmQgaW4gdGhlIHNhZmUgaW50ZWdlciByYW5nZVxyXG4gKiBAcGFyYW0gdmFsdWUgVGhlIHZhbHVlIHRvIHRlc3QgZm9yIGJlaW5nIGFuIGludGVnZXIgYW5kIGluIHRoZSBzYWZlIHJhbmdlXHJcbiAqL1xyXG5mdW5jdGlvbiBpc1NhZmVJbnRlZ2VyKHZhbHVlKSB7XHJcbiAgICByZXR1cm4gKGlzSW50ZWdlcih2YWx1ZSkgJiZcclxuICAgICAgICB2YWx1ZSA8PSBNQVhfU0FGRV9JTlRFR0VSICYmXHJcbiAgICAgICAgdmFsdWUgPj0gTUlOX1NBRkVfSU5URUdFUik7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBBIFRhcmdldCByZXByZXNlbnRzIHRoZSBXYXRjaFRhcmdldCByZXByZXNlbnRhdGlvbiBvZiBhIFF1ZXJ5LCB3aGljaCBpcyB1c2VkXHJcbiAqIGJ5IHRoZSBMb2NhbFN0b3JlIGFuZCB0aGUgUmVtb3RlU3RvcmUgdG8ga2VlcCB0cmFjayBvZiBhbmQgdG8gZXhlY3V0ZVxyXG4gKiBiYWNrZW5kIHF1ZXJpZXMuIFdoaWxlIGEgUXVlcnkgY2FuIHJlcHJlc2VudCBtdWx0aXBsZSBUYXJnZXRzLCBlYWNoIFRhcmdldHNcclxuICogbWFwcyB0byBhIHNpbmdsZSBXYXRjaFRhcmdldCBpbiBSZW1vdGVTdG9yZSBhbmQgYSBzaW5nbGUgVGFyZ2V0RGF0YSBlbnRyeVxyXG4gKiBpbiBwZXJzaXN0ZW5jZS5cclxuICovXHJcbnZhciBUYXJnZXQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICAvKipcclxuICAgICAqIEluaXRpYWxpemVzIGEgVGFyZ2V0IHdpdGggYSBwYXRoIGFuZCBvcHRpb25hbCBhZGRpdGlvbmFsIHF1ZXJ5IGNvbnN0cmFpbnRzLlxyXG4gICAgICogUGF0aCBtdXN0IGN1cnJlbnRseSBiZSBlbXB0eSBpZiB0aGlzIGlzIGEgY29sbGVjdGlvbiBncm91cCBxdWVyeS5cclxuICAgICAqXHJcbiAgICAgKiBOT1RFOiB5b3Ugc2hvdWxkIGFsd2F5cyBjb25zdHJ1Y3QgYFRhcmdldGAgZnJvbSBgUXVlcnkudG9UYXJnZXRgIGluc3RlYWQgb2ZcclxuICAgICAqIHVzaW5nIHRoaXMgY29uc3RydWN0b3IsIGJlY2F1c2UgYFF1ZXJ5YCBwcm92aWRlcyBhbiBpbXBsaWNpdCBgb3JkZXJCeWBcclxuICAgICAqIHByb3BlcnR5LlxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBUYXJnZXQocGF0aCwgY29sbGVjdGlvbkdyb3VwLCBvcmRlckJ5LCBmaWx0ZXJzLCBsaW1pdCwgc3RhcnRBdCwgZW5kQXQpIHtcclxuICAgICAgICBpZiAoY29sbGVjdGlvbkdyb3VwID09PSB2b2lkIDApIHsgY29sbGVjdGlvbkdyb3VwID0gbnVsbDsgfVxyXG4gICAgICAgIGlmIChvcmRlckJ5ID09PSB2b2lkIDApIHsgb3JkZXJCeSA9IFtdOyB9XHJcbiAgICAgICAgaWYgKGZpbHRlcnMgPT09IHZvaWQgMCkgeyBmaWx0ZXJzID0gW107IH1cclxuICAgICAgICBpZiAobGltaXQgPT09IHZvaWQgMCkgeyBsaW1pdCA9IG51bGw7IH1cclxuICAgICAgICBpZiAoc3RhcnRBdCA9PT0gdm9pZCAwKSB7IHN0YXJ0QXQgPSBudWxsOyB9XHJcbiAgICAgICAgaWYgKGVuZEF0ID09PSB2b2lkIDApIHsgZW5kQXQgPSBudWxsOyB9XHJcbiAgICAgICAgdGhpcy5wYXRoID0gcGF0aDtcclxuICAgICAgICB0aGlzLmNvbGxlY3Rpb25Hcm91cCA9IGNvbGxlY3Rpb25Hcm91cDtcclxuICAgICAgICB0aGlzLm9yZGVyQnkgPSBvcmRlckJ5O1xyXG4gICAgICAgIHRoaXMuZmlsdGVycyA9IGZpbHRlcnM7XHJcbiAgICAgICAgdGhpcy5saW1pdCA9IGxpbWl0O1xyXG4gICAgICAgIHRoaXMuc3RhcnRBdCA9IHN0YXJ0QXQ7XHJcbiAgICAgICAgdGhpcy5lbmRBdCA9IGVuZEF0O1xyXG4gICAgICAgIHRoaXMubWVtb2l6ZWRDYW5vbmljYWxJZCA9IG51bGw7XHJcbiAgICB9XHJcbiAgICBUYXJnZXQucHJvdG90eXBlLmNhbm9uaWNhbElkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICh0aGlzLm1lbW9pemVkQ2Fub25pY2FsSWQgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgdmFyIGNhbm9uaWNhbElkID0gdGhpcy5wYXRoLmNhbm9uaWNhbFN0cmluZygpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5jb2xsZWN0aW9uR3JvdXAgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIGNhbm9uaWNhbElkICs9ICd8Y2c6JyArIHRoaXMuY29sbGVjdGlvbkdyb3VwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhbm9uaWNhbElkICs9ICd8ZjonO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gdGhpcy5maWx0ZXJzOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGZpbHRlciA9IF9hW19pXTtcclxuICAgICAgICAgICAgICAgIGNhbm9uaWNhbElkICs9IGZpbHRlci5jYW5vbmljYWxJZCgpO1xyXG4gICAgICAgICAgICAgICAgY2Fub25pY2FsSWQgKz0gJywnO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhbm9uaWNhbElkICs9ICd8b2I6JztcclxuICAgICAgICAgICAgLy8gVE9ETyhkaW1vbmQpOiBtYWtlIHRoaXMgY29sbGlzaW9uIHJlc2lzdGFudFxyXG4gICAgICAgICAgICBmb3IgKHZhciBfYiA9IDAsIF9jID0gdGhpcy5vcmRlckJ5OyBfYiA8IF9jLmxlbmd0aDsgX2IrKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIG9yZGVyQnkgPSBfY1tfYl07XHJcbiAgICAgICAgICAgICAgICBjYW5vbmljYWxJZCArPSBvcmRlckJ5LmNhbm9uaWNhbElkKCk7XHJcbiAgICAgICAgICAgICAgICBjYW5vbmljYWxJZCArPSAnLCc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKCFpc051bGxPclVuZGVmaW5lZCh0aGlzLmxpbWl0KSkge1xyXG4gICAgICAgICAgICAgICAgY2Fub25pY2FsSWQgKz0gJ3xsOic7XHJcbiAgICAgICAgICAgICAgICBjYW5vbmljYWxJZCArPSB0aGlzLmxpbWl0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnN0YXJ0QXQpIHtcclxuICAgICAgICAgICAgICAgIGNhbm9uaWNhbElkICs9ICd8bGI6JztcclxuICAgICAgICAgICAgICAgIGNhbm9uaWNhbElkICs9IHRoaXMuc3RhcnRBdC5jYW5vbmljYWxJZCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmVuZEF0KSB7XHJcbiAgICAgICAgICAgICAgICBjYW5vbmljYWxJZCArPSAnfHViOic7XHJcbiAgICAgICAgICAgICAgICBjYW5vbmljYWxJZCArPSB0aGlzLmVuZEF0LmNhbm9uaWNhbElkKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5tZW1vaXplZENhbm9uaWNhbElkID0gY2Fub25pY2FsSWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLm1lbW9pemVkQ2Fub25pY2FsSWQ7XHJcbiAgICB9O1xyXG4gICAgVGFyZ2V0LnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgc3RyID0gdGhpcy5wYXRoLmNhbm9uaWNhbFN0cmluZygpO1xyXG4gICAgICAgIGlmICh0aGlzLmNvbGxlY3Rpb25Hcm91cCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBzdHIgKz0gJyBjb2xsZWN0aW9uR3JvdXA9JyArIHRoaXMuY29sbGVjdGlvbkdyb3VwO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5maWx0ZXJzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgc3RyICs9IFwiLCBmaWx0ZXJzOiBbXCIgKyB0aGlzLmZpbHRlcnMuam9pbignLCAnKSArIFwiXVwiO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIWlzTnVsbE9yVW5kZWZpbmVkKHRoaXMubGltaXQpKSB7XHJcbiAgICAgICAgICAgIHN0ciArPSAnLCBsaW1pdDogJyArIHRoaXMubGltaXQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLm9yZGVyQnkubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBzdHIgKz0gXCIsIG9yZGVyQnk6IFtcIiArIHRoaXMub3JkZXJCeS5qb2luKCcsICcpICsgXCJdXCI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLnN0YXJ0QXQpIHtcclxuICAgICAgICAgICAgc3RyICs9ICcsIHN0YXJ0QXQ6ICcgKyB0aGlzLnN0YXJ0QXQuY2Fub25pY2FsSWQoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuZW5kQXQpIHtcclxuICAgICAgICAgICAgc3RyICs9ICcsIGVuZEF0OiAnICsgdGhpcy5lbmRBdC5jYW5vbmljYWxJZCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gXCJUYXJnZXQoXCIgKyBzdHIgKyBcIilcIjtcclxuICAgIH07XHJcbiAgICBUYXJnZXQucHJvdG90eXBlLmlzRXF1YWwgPSBmdW5jdGlvbiAob3RoZXIpIHtcclxuICAgICAgICBpZiAodGhpcy5saW1pdCAhPT0gb3RoZXIubGltaXQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5vcmRlckJ5Lmxlbmd0aCAhPT0gb3RoZXIub3JkZXJCeS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMub3JkZXJCeS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMub3JkZXJCeVtpXS5pc0VxdWFsKG90aGVyLm9yZGVyQnlbaV0pKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuZmlsdGVycy5sZW5ndGggIT09IG90aGVyLmZpbHRlcnMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmZpbHRlcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLmZpbHRlcnNbaV0uaXNFcXVhbChvdGhlci5maWx0ZXJzW2ldKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmNvbGxlY3Rpb25Hcm91cCAhPT0gb3RoZXIuY29sbGVjdGlvbkdyb3VwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCF0aGlzLnBhdGguaXNFcXVhbChvdGhlci5wYXRoKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLnN0YXJ0QXQgIT09IG51bGxcclxuICAgICAgICAgICAgPyAhdGhpcy5zdGFydEF0LmlzRXF1YWwob3RoZXIuc3RhcnRBdClcclxuICAgICAgICAgICAgOiBvdGhlci5zdGFydEF0ICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5kQXQgIT09IG51bGxcclxuICAgICAgICAgICAgPyB0aGlzLmVuZEF0LmlzRXF1YWwob3RoZXIuZW5kQXQpXHJcbiAgICAgICAgICAgIDogb3RoZXIuZW5kQXQgPT09IG51bGw7XHJcbiAgICB9O1xyXG4gICAgVGFyZ2V0LnByb3RvdHlwZS5pc0RvY3VtZW50UXVlcnkgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIChEb2N1bWVudEtleS5pc0RvY3VtZW50S2V5KHRoaXMucGF0aCkgJiZcclxuICAgICAgICAgICAgdGhpcy5jb2xsZWN0aW9uR3JvdXAgPT09IG51bGwgJiZcclxuICAgICAgICAgICAgdGhpcy5maWx0ZXJzLmxlbmd0aCA9PT0gMCk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFRhcmdldDtcclxufSgpKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnZhciBMaW1pdFR5cGU7XHJcbihmdW5jdGlvbiAoTGltaXRUeXBlKSB7XHJcbiAgICBMaW1pdFR5cGVbXCJGaXJzdFwiXSA9IFwiRlwiO1xyXG4gICAgTGltaXRUeXBlW1wiTGFzdFwiXSA9IFwiTFwiO1xyXG59KShMaW1pdFR5cGUgfHwgKExpbWl0VHlwZSA9IHt9KSk7XHJcbi8qKlxyXG4gKiBRdWVyeSBlbmNhcHN1bGF0ZXMgYWxsIHRoZSBxdWVyeSBhdHRyaWJ1dGVzIHdlIHN1cHBvcnQgaW4gdGhlIFNESy4gSXQgY2FuXHJcbiAqIGJlIHJ1biBhZ2FpbnN0IHRoZSBMb2NhbFN0b3JlLCBhcyB3ZWxsIGFzIGJlIGNvbnZlcnRlZCB0byBhIGBUYXJnZXRgIHRvXHJcbiAqIHF1ZXJ5IHRoZSBSZW1vdGVTdG9yZSByZXN1bHRzLlxyXG4gKi9cclxudmFyIFF1ZXJ5ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgLyoqXHJcbiAgICAgKiBJbml0aWFsaXplcyBhIFF1ZXJ5IHdpdGggYSBwYXRoIGFuZCBvcHRpb25hbCBhZGRpdGlvbmFsIHF1ZXJ5IGNvbnN0cmFpbnRzLlxyXG4gICAgICogUGF0aCBtdXN0IGN1cnJlbnRseSBiZSBlbXB0eSBpZiB0aGlzIGlzIGEgY29sbGVjdGlvbiBncm91cCBxdWVyeS5cclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gUXVlcnkocGF0aCwgY29sbGVjdGlvbkdyb3VwLCBleHBsaWNpdE9yZGVyQnksIGZpbHRlcnMsIGxpbWl0LCBsaW1pdFR5cGUsIHN0YXJ0QXQsIGVuZEF0KSB7XHJcbiAgICAgICAgaWYgKGNvbGxlY3Rpb25Hcm91cCA9PT0gdm9pZCAwKSB7IGNvbGxlY3Rpb25Hcm91cCA9IG51bGw7IH1cclxuICAgICAgICBpZiAoZXhwbGljaXRPcmRlckJ5ID09PSB2b2lkIDApIHsgZXhwbGljaXRPcmRlckJ5ID0gW107IH1cclxuICAgICAgICBpZiAoZmlsdGVycyA9PT0gdm9pZCAwKSB7IGZpbHRlcnMgPSBbXTsgfVxyXG4gICAgICAgIGlmIChsaW1pdCA9PT0gdm9pZCAwKSB7IGxpbWl0ID0gbnVsbDsgfVxyXG4gICAgICAgIGlmIChsaW1pdFR5cGUgPT09IHZvaWQgMCkgeyBsaW1pdFR5cGUgPSBMaW1pdFR5cGUuRmlyc3Q7IH1cclxuICAgICAgICBpZiAoc3RhcnRBdCA9PT0gdm9pZCAwKSB7IHN0YXJ0QXQgPSBudWxsOyB9XHJcbiAgICAgICAgaWYgKGVuZEF0ID09PSB2b2lkIDApIHsgZW5kQXQgPSBudWxsOyB9XHJcbiAgICAgICAgdGhpcy5wYXRoID0gcGF0aDtcclxuICAgICAgICB0aGlzLmNvbGxlY3Rpb25Hcm91cCA9IGNvbGxlY3Rpb25Hcm91cDtcclxuICAgICAgICB0aGlzLmV4cGxpY2l0T3JkZXJCeSA9IGV4cGxpY2l0T3JkZXJCeTtcclxuICAgICAgICB0aGlzLmZpbHRlcnMgPSBmaWx0ZXJzO1xyXG4gICAgICAgIHRoaXMubGltaXQgPSBsaW1pdDtcclxuICAgICAgICB0aGlzLmxpbWl0VHlwZSA9IGxpbWl0VHlwZTtcclxuICAgICAgICB0aGlzLnN0YXJ0QXQgPSBzdGFydEF0O1xyXG4gICAgICAgIHRoaXMuZW5kQXQgPSBlbmRBdDtcclxuICAgICAgICB0aGlzLm1lbW9pemVkT3JkZXJCeSA9IG51bGw7XHJcbiAgICAgICAgLy8gVGhlIGNvcnJlc3BvbmRpbmcgYFRhcmdldGAgb2YgdGhpcyBgUXVlcnlgIGluc3RhbmNlLlxyXG4gICAgICAgIHRoaXMubWVtb2l6ZWRUYXJnZXQgPSBudWxsO1xyXG4gICAgICAgIGlmICh0aGlzLnN0YXJ0QXQpIHtcclxuICAgICAgICAgICAgdGhpcy5hc3NlcnRWYWxpZEJvdW5kKHRoaXMuc3RhcnRBdCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmVuZEF0KSB7XHJcbiAgICAgICAgICAgIHRoaXMuYXNzZXJ0VmFsaWRCb3VuZCh0aGlzLmVuZEF0KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBRdWVyeS5hdFBhdGggPSBmdW5jdGlvbiAocGF0aCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgUXVlcnkocGF0aCk7XHJcbiAgICB9O1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFF1ZXJ5LnByb3RvdHlwZSwgXCJvcmRlckJ5XCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMubWVtb2l6ZWRPcmRlckJ5ID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgaW5lcXVhbGl0eUZpZWxkID0gdGhpcy5nZXRJbmVxdWFsaXR5RmlsdGVyRmllbGQoKTtcclxuICAgICAgICAgICAgICAgIHZhciBmaXJzdE9yZGVyQnlGaWVsZCA9IHRoaXMuZ2V0Rmlyc3RPcmRlckJ5RmllbGQoKTtcclxuICAgICAgICAgICAgICAgIGlmIChpbmVxdWFsaXR5RmllbGQgIT09IG51bGwgJiYgZmlyc3RPcmRlckJ5RmllbGQgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBJbiBvcmRlciB0byBpbXBsaWNpdGx5IGFkZCBrZXkgb3JkZXJpbmcsIHdlIG11c3QgYWxzbyBhZGQgdGhlXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gaW5lcXVhbGl0eSBmaWx0ZXIgZmllbGQgZm9yIGl0IHRvIGJlIGEgdmFsaWQgcXVlcnkuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gTm90ZSB0aGF0IHRoZSBkZWZhdWx0IGluZXF1YWxpdHkgZmllbGQgYW5kIGtleSBvcmRlcmluZyBpcyBhc2NlbmRpbmcuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGluZXF1YWxpdHlGaWVsZC5pc0tleUZpZWxkKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tZW1vaXplZE9yZGVyQnkgPSBbS0VZX09SREVSSU5HX0FTQ107XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1lbW9pemVkT3JkZXJCeSA9IFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBPcmRlckJ5KGluZXF1YWxpdHlGaWVsZCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBLRVlfT1JERVJJTkdfQVNDXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXNzZXJ0KGluZXF1YWxpdHlGaWVsZCA9PT0gbnVsbCB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAoZmlyc3RPcmRlckJ5RmllbGQgIT09IG51bGwgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZXF1YWxpdHlGaWVsZC5pc0VxdWFsKGZpcnN0T3JkZXJCeUZpZWxkKSksICdGaXJzdCBvcmRlckJ5IHNob3VsZCBtYXRjaCBpbmVxdWFsaXR5IGZpZWxkLicpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubWVtb2l6ZWRPcmRlckJ5ID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGZvdW5kS2V5T3JkZXJpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gdGhpcy5leHBsaWNpdE9yZGVyQnk7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvcmRlckJ5ID0gX2FbX2ldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1lbW9pemVkT3JkZXJCeS5wdXNoKG9yZGVyQnkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob3JkZXJCeS5maWVsZC5pc0tleUZpZWxkKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvdW5kS2V5T3JkZXJpbmcgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghZm91bmRLZXlPcmRlcmluZykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGUgb3JkZXIgb2YgdGhlIGltcGxpY2l0IGtleSBvcmRlcmluZyBhbHdheXMgbWF0Y2hlcyB0aGUgbGFzdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBleHBsaWNpdCBvcmRlciBieVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbGFzdERpcmVjdGlvbiA9IHRoaXMuZXhwbGljaXRPcmRlckJ5Lmxlbmd0aCA+IDBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gdGhpcy5leHBsaWNpdE9yZGVyQnlbdGhpcy5leHBsaWNpdE9yZGVyQnkubGVuZ3RoIC0gMV0uZGlyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IERpcmVjdGlvbi5BU0NFTkRJTkc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWVtb2l6ZWRPcmRlckJ5LnB1c2gobGFzdERpcmVjdGlvbiA9PT0gRGlyZWN0aW9uLkFTQ0VORElOR1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBLRVlfT1JERVJJTkdfQVNDXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IEtFWV9PUkRFUklOR19ERVNDKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubWVtb2l6ZWRPcmRlckJ5O1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgUXVlcnkucHJvdG90eXBlLmFkZEZpbHRlciA9IGZ1bmN0aW9uIChmaWx0ZXIpIHtcclxuICAgICAgICBhc3NlcnQodGhpcy5nZXRJbmVxdWFsaXR5RmlsdGVyRmllbGQoKSA9PSBudWxsIHx8XHJcbiAgICAgICAgICAgICEoZmlsdGVyIGluc3RhbmNlb2YgRmllbGRGaWx0ZXIpIHx8XHJcbiAgICAgICAgICAgICFmaWx0ZXIuaXNJbmVxdWFsaXR5KCkgfHxcclxuICAgICAgICAgICAgZmlsdGVyLmZpZWxkLmlzRXF1YWwodGhpcy5nZXRJbmVxdWFsaXR5RmlsdGVyRmllbGQoKSksICdRdWVyeSBtdXN0IG9ubHkgaGF2ZSBvbmUgaW5lcXVhbGl0eSBmaWVsZC4nKTtcclxuICAgICAgICBhc3NlcnQoIXRoaXMuaXNEb2N1bWVudFF1ZXJ5KCksICdObyBmaWx0ZXJpbmcgYWxsb3dlZCBmb3IgZG9jdW1lbnQgcXVlcnknKTtcclxuICAgICAgICB2YXIgbmV3RmlsdGVycyA9IHRoaXMuZmlsdGVycy5jb25jYXQoW2ZpbHRlcl0pO1xyXG4gICAgICAgIHJldHVybiBuZXcgUXVlcnkodGhpcy5wYXRoLCB0aGlzLmNvbGxlY3Rpb25Hcm91cCwgdGhpcy5leHBsaWNpdE9yZGVyQnkuc2xpY2UoKSwgbmV3RmlsdGVycywgdGhpcy5saW1pdCwgdGhpcy5saW1pdFR5cGUsIHRoaXMuc3RhcnRBdCwgdGhpcy5lbmRBdCk7XHJcbiAgICB9O1xyXG4gICAgUXVlcnkucHJvdG90eXBlLmFkZE9yZGVyQnkgPSBmdW5jdGlvbiAob3JkZXJCeSkge1xyXG4gICAgICAgIGFzc2VydCghdGhpcy5zdGFydEF0ICYmICF0aGlzLmVuZEF0LCAnQm91bmRzIG11c3QgYmUgc2V0IGFmdGVyIG9yZGVyQnknKTtcclxuICAgICAgICAvLyBUT0RPKGRpbW9uZCk6IHZhbGlkYXRlIHRoYXQgb3JkZXJCeSBkb2VzIG5vdCBsaXN0IHRoZSBzYW1lIGtleSB0d2ljZS5cclxuICAgICAgICB2YXIgbmV3T3JkZXJCeSA9IHRoaXMuZXhwbGljaXRPcmRlckJ5LmNvbmNhdChbb3JkZXJCeV0pO1xyXG4gICAgICAgIHJldHVybiBuZXcgUXVlcnkodGhpcy5wYXRoLCB0aGlzLmNvbGxlY3Rpb25Hcm91cCwgbmV3T3JkZXJCeSwgdGhpcy5maWx0ZXJzLnNsaWNlKCksIHRoaXMubGltaXQsIHRoaXMubGltaXRUeXBlLCB0aGlzLnN0YXJ0QXQsIHRoaXMuZW5kQXQpO1xyXG4gICAgfTtcclxuICAgIFF1ZXJ5LnByb3RvdHlwZS53aXRoTGltaXRUb0ZpcnN0ID0gZnVuY3Rpb24gKGxpbWl0KSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBRdWVyeSh0aGlzLnBhdGgsIHRoaXMuY29sbGVjdGlvbkdyb3VwLCB0aGlzLmV4cGxpY2l0T3JkZXJCeS5zbGljZSgpLCB0aGlzLmZpbHRlcnMuc2xpY2UoKSwgbGltaXQsIExpbWl0VHlwZS5GaXJzdCwgdGhpcy5zdGFydEF0LCB0aGlzLmVuZEF0KTtcclxuICAgIH07XHJcbiAgICBRdWVyeS5wcm90b3R5cGUud2l0aExpbWl0VG9MYXN0ID0gZnVuY3Rpb24gKGxpbWl0KSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBRdWVyeSh0aGlzLnBhdGgsIHRoaXMuY29sbGVjdGlvbkdyb3VwLCB0aGlzLmV4cGxpY2l0T3JkZXJCeS5zbGljZSgpLCB0aGlzLmZpbHRlcnMuc2xpY2UoKSwgbGltaXQsIExpbWl0VHlwZS5MYXN0LCB0aGlzLnN0YXJ0QXQsIHRoaXMuZW5kQXQpO1xyXG4gICAgfTtcclxuICAgIFF1ZXJ5LnByb3RvdHlwZS53aXRoU3RhcnRBdCA9IGZ1bmN0aW9uIChib3VuZCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgUXVlcnkodGhpcy5wYXRoLCB0aGlzLmNvbGxlY3Rpb25Hcm91cCwgdGhpcy5leHBsaWNpdE9yZGVyQnkuc2xpY2UoKSwgdGhpcy5maWx0ZXJzLnNsaWNlKCksIHRoaXMubGltaXQsIHRoaXMubGltaXRUeXBlLCBib3VuZCwgdGhpcy5lbmRBdCk7XHJcbiAgICB9O1xyXG4gICAgUXVlcnkucHJvdG90eXBlLndpdGhFbmRBdCA9IGZ1bmN0aW9uIChib3VuZCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgUXVlcnkodGhpcy5wYXRoLCB0aGlzLmNvbGxlY3Rpb25Hcm91cCwgdGhpcy5leHBsaWNpdE9yZGVyQnkuc2xpY2UoKSwgdGhpcy5maWx0ZXJzLnNsaWNlKCksIHRoaXMubGltaXQsIHRoaXMubGltaXRUeXBlLCB0aGlzLnN0YXJ0QXQsIGJvdW5kKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEhlbHBlciB0byBjb252ZXJ0IGEgY29sbGVjdGlvbiBncm91cCBxdWVyeSBpbnRvIGEgY29sbGVjdGlvbiBxdWVyeSBhdCBhXHJcbiAgICAgKiBzcGVjaWZpYyBwYXRoLiBUaGlzIGlzIHVzZWQgd2hlbiBleGVjdXRpbmcgY29sbGVjdGlvbiBncm91cCBxdWVyaWVzLCBzaW5jZVxyXG4gICAgICogd2UgaGF2ZSB0byBzcGxpdCB0aGUgcXVlcnkgaW50byBhIHNldCBvZiBjb2xsZWN0aW9uIHF1ZXJpZXMgYXQgbXVsdGlwbGVcclxuICAgICAqIHBhdGhzLlxyXG4gICAgICovXHJcbiAgICBRdWVyeS5wcm90b3R5cGUuYXNDb2xsZWN0aW9uUXVlcnlBdFBhdGggPSBmdW5jdGlvbiAocGF0aCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgUXVlcnkocGF0aCwgXHJcbiAgICAgICAgLypjb2xsZWN0aW9uR3JvdXA9Ki8gbnVsbCwgdGhpcy5leHBsaWNpdE9yZGVyQnkuc2xpY2UoKSwgdGhpcy5maWx0ZXJzLnNsaWNlKCksIHRoaXMubGltaXQsIHRoaXMubGltaXRUeXBlLCB0aGlzLnN0YXJ0QXQsIHRoaXMuZW5kQXQpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoaXMgcXVlcnkgZG9lcyBub3Qgc3BlY2lmeSBhbnkgcXVlcnkgY29uc3RyYWludHMgdGhhdFxyXG4gICAgICogY291bGQgcmVtb3ZlIHJlc3VsdHMuXHJcbiAgICAgKi9cclxuICAgIFF1ZXJ5LnByb3RvdHlwZS5tYXRjaGVzQWxsRG9jdW1lbnRzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiAodGhpcy5maWx0ZXJzLmxlbmd0aCA9PT0gMCAmJlxyXG4gICAgICAgICAgICB0aGlzLmxpbWl0ID09PSBudWxsICYmXHJcbiAgICAgICAgICAgIHRoaXMuc3RhcnRBdCA9PSBudWxsICYmXHJcbiAgICAgICAgICAgIHRoaXMuZW5kQXQgPT0gbnVsbCAmJlxyXG4gICAgICAgICAgICAodGhpcy5leHBsaWNpdE9yZGVyQnkubGVuZ3RoID09PSAwIHx8XHJcbiAgICAgICAgICAgICAgICAodGhpcy5leHBsaWNpdE9yZGVyQnkubGVuZ3RoID09PSAxICYmXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5leHBsaWNpdE9yZGVyQnlbMF0uZmllbGQuaXNLZXlGaWVsZCgpKSkpO1xyXG4gICAgfTtcclxuICAgIC8vIFRPRE8oYi8yOTE4MzE2NSk6IFRoaXMgaXMgdXNlZCB0byBnZXQgYSB1bmlxdWUgc3RyaW5nIGZyb20gYSBxdWVyeSB0bywgZm9yXHJcbiAgICAvLyBleGFtcGxlLCB1c2UgYXMgYSBkaWN0aW9uYXJ5IGtleSwgYnV0IHRoZSBpbXBsZW1lbnRhdGlvbiBpcyBzdWJqZWN0IHRvXHJcbiAgICAvLyBjb2xsaXNpb25zLiBNYWtlIGl0IGNvbGxpc2lvbi1mcmVlLlxyXG4gICAgUXVlcnkucHJvdG90eXBlLmNhbm9uaWNhbElkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnRvVGFyZ2V0KCkuY2Fub25pY2FsSWQoKSArIFwifGx0OlwiICsgdGhpcy5saW1pdFR5cGU7XHJcbiAgICB9O1xyXG4gICAgUXVlcnkucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBcIlF1ZXJ5KHRhcmdldD1cIiArIHRoaXMudG9UYXJnZXQoKS50b1N0cmluZygpICsgXCI7IGxpbWl0VHlwZT1cIiArIHRoaXMubGltaXRUeXBlICsgXCIpXCI7XHJcbiAgICB9O1xyXG4gICAgUXVlcnkucHJvdG90eXBlLmlzRXF1YWwgPSBmdW5jdGlvbiAob3RoZXIpIHtcclxuICAgICAgICByZXR1cm4gKHRoaXMudG9UYXJnZXQoKS5pc0VxdWFsKG90aGVyLnRvVGFyZ2V0KCkpICYmXHJcbiAgICAgICAgICAgIHRoaXMubGltaXRUeXBlID09PSBvdGhlci5saW1pdFR5cGUpO1xyXG4gICAgfTtcclxuICAgIFF1ZXJ5LnByb3RvdHlwZS5kb2NDb21wYXJhdG9yID0gZnVuY3Rpb24gKGQxLCBkMikge1xyXG4gICAgICAgIHZhciBjb21wYXJlZE9uS2V5RmllbGQgPSBmYWxzZTtcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gdGhpcy5vcmRlckJ5OyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICB2YXIgb3JkZXJCeSA9IF9hW19pXTtcclxuICAgICAgICAgICAgdmFyIGNvbXAgPSBvcmRlckJ5LmNvbXBhcmUoZDEsIGQyKTtcclxuICAgICAgICAgICAgaWYgKGNvbXAgIT09IDApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBjb21wO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbXBhcmVkT25LZXlGaWVsZCA9IGNvbXBhcmVkT25LZXlGaWVsZCB8fCBvcmRlckJ5LmZpZWxkLmlzS2V5RmllbGQoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gQXNzZXJ0IHRoYXQgd2UgYWN0dWFsbHkgY29tcGFyZWQgYnkga2V5XHJcbiAgICAgICAgYXNzZXJ0KGNvbXBhcmVkT25LZXlGaWVsZCwgXCJvcmRlckJ5IHVzZWQgdGhhdCBkb2Vzbid0IGNvbXBhcmUgb24ga2V5IGZpZWxkXCIpO1xyXG4gICAgICAgIHJldHVybiAwO1xyXG4gICAgfTtcclxuICAgIFF1ZXJ5LnByb3RvdHlwZS5tYXRjaGVzID0gZnVuY3Rpb24gKGRvYykge1xyXG4gICAgICAgIHJldHVybiAodGhpcy5tYXRjaGVzUGF0aEFuZENvbGxlY3Rpb25Hcm91cChkb2MpICYmXHJcbiAgICAgICAgICAgIHRoaXMubWF0Y2hlc09yZGVyQnkoZG9jKSAmJlxyXG4gICAgICAgICAgICB0aGlzLm1hdGNoZXNGaWx0ZXJzKGRvYykgJiZcclxuICAgICAgICAgICAgdGhpcy5tYXRjaGVzQm91bmRzKGRvYykpO1xyXG4gICAgfTtcclxuICAgIFF1ZXJ5LnByb3RvdHlwZS5oYXNMaW1pdFRvRmlyc3QgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuICFpc051bGxPclVuZGVmaW5lZCh0aGlzLmxpbWl0KSAmJiB0aGlzLmxpbWl0VHlwZSA9PT0gTGltaXRUeXBlLkZpcnN0O1xyXG4gICAgfTtcclxuICAgIFF1ZXJ5LnByb3RvdHlwZS5oYXNMaW1pdFRvTGFzdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gIWlzTnVsbE9yVW5kZWZpbmVkKHRoaXMubGltaXQpICYmIHRoaXMubGltaXRUeXBlID09PSBMaW1pdFR5cGUuTGFzdDtcclxuICAgIH07XHJcbiAgICBRdWVyeS5wcm90b3R5cGUuZ2V0Rmlyc3RPcmRlckJ5RmllbGQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZXhwbGljaXRPcmRlckJ5Lmxlbmd0aCA+IDBcclxuICAgICAgICAgICAgPyB0aGlzLmV4cGxpY2l0T3JkZXJCeVswXS5maWVsZFxyXG4gICAgICAgICAgICA6IG51bGw7XHJcbiAgICB9O1xyXG4gICAgUXVlcnkucHJvdG90eXBlLmdldEluZXF1YWxpdHlGaWx0ZXJGaWVsZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gdGhpcy5maWx0ZXJzOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICB2YXIgZmlsdGVyID0gX2FbX2ldO1xyXG4gICAgICAgICAgICBpZiAoZmlsdGVyIGluc3RhbmNlb2YgRmllbGRGaWx0ZXIgJiYgZmlsdGVyLmlzSW5lcXVhbGl0eSgpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmlsdGVyLmZpZWxkO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfTtcclxuICAgIC8vIENoZWNrcyBpZiBhbnkgb2YgdGhlIHByb3ZpZGVkIE9wZXJhdG9ycyBhcmUgaW5jbHVkZWQgaW4gdGhlIHF1ZXJ5IGFuZFxyXG4gICAgLy8gcmV0dXJucyB0aGUgZmlyc3Qgb25lIHRoYXQgaXMsIG9yIG51bGwgaWYgbm9uZSBhcmUuXHJcbiAgICBRdWVyeS5wcm90b3R5cGUuZmluZEZpbHRlck9wZXJhdG9yID0gZnVuY3Rpb24gKG9wZXJhdG9ycykge1xyXG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSB0aGlzLmZpbHRlcnM7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBmaWx0ZXIgPSBfYVtfaV07XHJcbiAgICAgICAgICAgIGlmIChmaWx0ZXIgaW5zdGFuY2VvZiBGaWVsZEZpbHRlcikge1xyXG4gICAgICAgICAgICAgICAgaWYgKG9wZXJhdG9ycy5pbmRleE9mKGZpbHRlci5vcCkgPj0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmaWx0ZXIub3A7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9O1xyXG4gICAgUXVlcnkucHJvdG90eXBlLmlzRG9jdW1lbnRRdWVyeSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy50b1RhcmdldCgpLmlzRG9jdW1lbnRRdWVyeSgpO1xyXG4gICAgfTtcclxuICAgIFF1ZXJ5LnByb3RvdHlwZS5pc0NvbGxlY3Rpb25Hcm91cFF1ZXJ5ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNvbGxlY3Rpb25Hcm91cCAhPT0gbnVsbDtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIENvbnZlcnRzIHRoaXMgYFF1ZXJ5YCBpbnN0YW5jZSB0byBpdCdzIGNvcnJlc3BvbmRpbmcgYFRhcmdldGBcclxuICAgICAqIHJlcHJlc2VudGF0aW9uLlxyXG4gICAgICovXHJcbiAgICBRdWVyeS5wcm90b3R5cGUudG9UYXJnZXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLm1lbW9pemVkVGFyZ2V0KSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmxpbWl0VHlwZSA9PT0gTGltaXRUeXBlLkZpcnN0KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1lbW9pemVkVGFyZ2V0ID0gbmV3IFRhcmdldCh0aGlzLnBhdGgsIHRoaXMuY29sbGVjdGlvbkdyb3VwLCB0aGlzLm9yZGVyQnksIHRoaXMuZmlsdGVycywgdGhpcy5saW1pdCwgdGhpcy5zdGFydEF0LCB0aGlzLmVuZEF0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIEZsaXAgdGhlIG9yZGVyQnkgZGlyZWN0aW9ucyBzaW5jZSB3ZSB3YW50IHRoZSBsYXN0IHJlc3VsdHNcclxuICAgICAgICAgICAgICAgIHZhciBvcmRlckJ5cyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHRoaXMub3JkZXJCeTsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgb3JkZXJCeSA9IF9hW19pXTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZGlyID0gb3JkZXJCeS5kaXIgPT09IERpcmVjdGlvbi5ERVNDRU5ESU5HXHJcbiAgICAgICAgICAgICAgICAgICAgICAgID8gRGlyZWN0aW9uLkFTQ0VORElOR1xyXG4gICAgICAgICAgICAgICAgICAgICAgICA6IERpcmVjdGlvbi5ERVNDRU5ESU5HO1xyXG4gICAgICAgICAgICAgICAgICAgIG9yZGVyQnlzLnB1c2gobmV3IE9yZGVyQnkob3JkZXJCeS5maWVsZCwgZGlyKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBXZSBuZWVkIHRvIHN3YXAgdGhlIGN1cnNvcnMgdG8gbWF0Y2ggdGhlIG5vdy1mbGlwcGVkIHF1ZXJ5IG9yZGVyaW5nLlxyXG4gICAgICAgICAgICAgICAgdmFyIHN0YXJ0QXQgPSB0aGlzLmVuZEF0XHJcbiAgICAgICAgICAgICAgICAgICAgPyBuZXcgQm91bmQodGhpcy5lbmRBdC5wb3NpdGlvbiwgIXRoaXMuZW5kQXQuYmVmb3JlKVxyXG4gICAgICAgICAgICAgICAgICAgIDogbnVsbDtcclxuICAgICAgICAgICAgICAgIHZhciBlbmRBdCA9IHRoaXMuc3RhcnRBdFxyXG4gICAgICAgICAgICAgICAgICAgID8gbmV3IEJvdW5kKHRoaXMuc3RhcnRBdC5wb3NpdGlvbiwgIXRoaXMuc3RhcnRBdC5iZWZvcmUpXHJcbiAgICAgICAgICAgICAgICAgICAgOiBudWxsO1xyXG4gICAgICAgICAgICAgICAgLy8gTm93IHJldHVybiBhcyBhIExpbWl0VHlwZS5GaXJzdCBxdWVyeS5cclxuICAgICAgICAgICAgICAgIHRoaXMubWVtb2l6ZWRUYXJnZXQgPSBuZXcgVGFyZ2V0KHRoaXMucGF0aCwgdGhpcy5jb2xsZWN0aW9uR3JvdXAsIG9yZGVyQnlzLCB0aGlzLmZpbHRlcnMsIHRoaXMubGltaXQsIHN0YXJ0QXQsIGVuZEF0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5tZW1vaXplZFRhcmdldDtcclxuICAgIH07XHJcbiAgICBRdWVyeS5wcm90b3R5cGUubWF0Y2hlc1BhdGhBbmRDb2xsZWN0aW9uR3JvdXAgPSBmdW5jdGlvbiAoZG9jKSB7XHJcbiAgICAgICAgdmFyIGRvY1BhdGggPSBkb2Mua2V5LnBhdGg7XHJcbiAgICAgICAgaWYgKHRoaXMuY29sbGVjdGlvbkdyb3VwICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIC8vIE5PVEU6IHRoaXMucGF0aCBpcyBjdXJyZW50bHkgYWx3YXlzIGVtcHR5IHNpbmNlIHdlIGRvbid0IGV4cG9zZSBDb2xsZWN0aW9uXHJcbiAgICAgICAgICAgIC8vIEdyb3VwIHF1ZXJpZXMgcm9vdGVkIGF0IGEgZG9jdW1lbnQgcGF0aCB5ZXQuXHJcbiAgICAgICAgICAgIHJldHVybiAoZG9jLmtleS5oYXNDb2xsZWN0aW9uSWQodGhpcy5jb2xsZWN0aW9uR3JvdXApICYmXHJcbiAgICAgICAgICAgICAgICB0aGlzLnBhdGguaXNQcmVmaXhPZihkb2NQYXRoKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKERvY3VtZW50S2V5LmlzRG9jdW1lbnRLZXkodGhpcy5wYXRoKSkge1xyXG4gICAgICAgICAgICAvLyBleGFjdCBtYXRjaCBmb3IgZG9jdW1lbnQgcXVlcmllc1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wYXRoLmlzRXF1YWwoZG9jUGF0aCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBzaGFsbG93IGFuY2VzdG9yIHF1ZXJpZXMgYnkgZGVmYXVsdFxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wYXRoLmlzSW1tZWRpYXRlUGFyZW50T2YoZG9jUGF0aCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQSBkb2N1bWVudCBtdXN0IGhhdmUgYSB2YWx1ZSBmb3IgZXZlcnkgb3JkZXJpbmcgY2xhdXNlIGluIG9yZGVyIHRvIHNob3cgdXBcclxuICAgICAqIGluIHRoZSByZXN1bHRzLlxyXG4gICAgICovXHJcbiAgICBRdWVyeS5wcm90b3R5cGUubWF0Y2hlc09yZGVyQnkgPSBmdW5jdGlvbiAoZG9jKSB7XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHRoaXMuZXhwbGljaXRPcmRlckJ5OyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICB2YXIgb3JkZXJCeSA9IF9hW19pXTtcclxuICAgICAgICAgICAgLy8gb3JkZXIgYnkga2V5IGFsd2F5cyBtYXRjaGVzXHJcbiAgICAgICAgICAgIGlmICghb3JkZXJCeS5maWVsZC5pc0tleUZpZWxkKCkgJiYgZG9jLmZpZWxkKG9yZGVyQnkuZmllbGQpID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9O1xyXG4gICAgUXVlcnkucHJvdG90eXBlLm1hdGNoZXNGaWx0ZXJzID0gZnVuY3Rpb24gKGRvYykge1xyXG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSB0aGlzLmZpbHRlcnM7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBmaWx0ZXIgPSBfYVtfaV07XHJcbiAgICAgICAgICAgIGlmICghZmlsdGVyLm1hdGNoZXMoZG9jKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogTWFrZXMgc3VyZSBhIGRvY3VtZW50IGlzIHdpdGhpbiB0aGUgYm91bmRzLCBpZiBwcm92aWRlZC5cclxuICAgICAqL1xyXG4gICAgUXVlcnkucHJvdG90eXBlLm1hdGNoZXNCb3VuZHMgPSBmdW5jdGlvbiAoZG9jKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuc3RhcnRBdCAmJiAhdGhpcy5zdGFydEF0LnNvcnRzQmVmb3JlRG9jdW1lbnQodGhpcy5vcmRlckJ5LCBkb2MpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuZW5kQXQgJiYgdGhpcy5lbmRBdC5zb3J0c0JlZm9yZURvY3VtZW50KHRoaXMub3JkZXJCeSwgZG9jKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfTtcclxuICAgIFF1ZXJ5LnByb3RvdHlwZS5hc3NlcnRWYWxpZEJvdW5kID0gZnVuY3Rpb24gKGJvdW5kKSB7XHJcbiAgICAgICAgYXNzZXJ0KGJvdW5kLnBvc2l0aW9uLmxlbmd0aCA8PSB0aGlzLm9yZGVyQnkubGVuZ3RoLCAnQm91bmQgaXMgbG9uZ2VyIHRoYW4gb3JkZXJCeScpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBRdWVyeTtcclxufSgpKTtcclxudmFyIEZpbHRlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEZpbHRlcigpIHtcclxuICAgIH1cclxuICAgIHJldHVybiBGaWx0ZXI7XHJcbn0oKSk7XHJcbnZhciBPcGVyYXRvciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIE9wZXJhdG9yKG5hbWUpIHtcclxuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xyXG4gICAgfVxyXG4gICAgT3BlcmF0b3IuZnJvbVN0cmluZyA9IGZ1bmN0aW9uIChvcCkge1xyXG4gICAgICAgIHN3aXRjaCAob3ApIHtcclxuICAgICAgICAgICAgY2FzZSAnPCc6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gT3BlcmF0b3IuTEVTU19USEFOO1xyXG4gICAgICAgICAgICBjYXNlICc8PSc6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gT3BlcmF0b3IuTEVTU19USEFOX09SX0VRVUFMO1xyXG4gICAgICAgICAgICBjYXNlICc9PSc6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gT3BlcmF0b3IuRVFVQUw7XHJcbiAgICAgICAgICAgIGNhc2UgJz49JzpcclxuICAgICAgICAgICAgICAgIHJldHVybiBPcGVyYXRvci5HUkVBVEVSX1RIQU5fT1JfRVFVQUw7XHJcbiAgICAgICAgICAgIGNhc2UgJz4nOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIE9wZXJhdG9yLkdSRUFURVJfVEhBTjtcclxuICAgICAgICAgICAgY2FzZSAnYXJyYXktY29udGFpbnMnOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIE9wZXJhdG9yLkFSUkFZX0NPTlRBSU5TO1xyXG4gICAgICAgICAgICBjYXNlICdpbic6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gT3BlcmF0b3IuSU47XHJcbiAgICAgICAgICAgIGNhc2UgJ2FycmF5LWNvbnRhaW5zLWFueSc6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gT3BlcmF0b3IuQVJSQVlfQ09OVEFJTlNfQU5ZO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhaWwoJ1Vua25vd24gRmllbGRGaWx0ZXIgb3BlcmF0b3I6ICcgKyBvcCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIE9wZXJhdG9yLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5uYW1lO1xyXG4gICAgfTtcclxuICAgIE9wZXJhdG9yLnByb3RvdHlwZS5pc0VxdWFsID0gZnVuY3Rpb24gKG90aGVyKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubmFtZSA9PT0gb3RoZXIubmFtZTtcclxuICAgIH07XHJcbiAgICBPcGVyYXRvci5MRVNTX1RIQU4gPSBuZXcgT3BlcmF0b3IoJzwnKTtcclxuICAgIE9wZXJhdG9yLkxFU1NfVEhBTl9PUl9FUVVBTCA9IG5ldyBPcGVyYXRvcignPD0nKTtcclxuICAgIE9wZXJhdG9yLkVRVUFMID0gbmV3IE9wZXJhdG9yKCc9PScpO1xyXG4gICAgT3BlcmF0b3IuR1JFQVRFUl9USEFOID0gbmV3IE9wZXJhdG9yKCc+Jyk7XHJcbiAgICBPcGVyYXRvci5HUkVBVEVSX1RIQU5fT1JfRVFVQUwgPSBuZXcgT3BlcmF0b3IoJz49Jyk7XHJcbiAgICBPcGVyYXRvci5BUlJBWV9DT05UQUlOUyA9IG5ldyBPcGVyYXRvcignYXJyYXktY29udGFpbnMnKTtcclxuICAgIE9wZXJhdG9yLklOID0gbmV3IE9wZXJhdG9yKCdpbicpO1xyXG4gICAgT3BlcmF0b3IuQVJSQVlfQ09OVEFJTlNfQU5ZID0gbmV3IE9wZXJhdG9yKCdhcnJheS1jb250YWlucy1hbnknKTtcclxuICAgIHJldHVybiBPcGVyYXRvcjtcclxufSgpKTtcclxudmFyIEZpZWxkRmlsdGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgdHNsaWIuX19leHRlbmRzKEZpZWxkRmlsdGVyLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gRmllbGRGaWx0ZXIoZmllbGQsIG9wLCB2YWx1ZSkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMuZmllbGQgPSBmaWVsZDtcclxuICAgICAgICBfdGhpcy5vcCA9IG9wO1xyXG4gICAgICAgIF90aGlzLnZhbHVlID0gdmFsdWU7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGVzIGEgZmlsdGVyIGJhc2VkIG9uIHRoZSBwcm92aWRlZCBhcmd1bWVudHMuXHJcbiAgICAgKi9cclxuICAgIEZpZWxkRmlsdGVyLmNyZWF0ZSA9IGZ1bmN0aW9uIChmaWVsZCwgb3AsIHZhbHVlKSB7XHJcbiAgICAgICAgaWYgKGZpZWxkLmlzS2V5RmllbGQoKSkge1xyXG4gICAgICAgICAgICBpZiAob3AgPT09IE9wZXJhdG9yLklOKSB7XHJcbiAgICAgICAgICAgICAgICBhc3NlcnQodmFsdWUgaW5zdGFuY2VvZiBBcnJheVZhbHVlLCAnQ29tcGFyaW5nIG9uIGtleSB3aXRoIElOLCBidXQgZmlsdGVyIHZhbHVlIG5vdCBhbiBBcnJheVZhbHVlJyk7XHJcbiAgICAgICAgICAgICAgICBhc3NlcnQodmFsdWUuaW50ZXJuYWxWYWx1ZS5ldmVyeShmdW5jdGlvbiAoZWxlbSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBlbGVtIGluc3RhbmNlb2YgUmVmVmFsdWU7XHJcbiAgICAgICAgICAgICAgICB9KSwgJ0NvbXBhcmluZyBvbiBrZXkgd2l0aCBJTiwgYnV0IGFuIGFycmF5IHZhbHVlIHdhcyBub3QgYSBSZWZWYWx1ZScpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBLZXlGaWVsZEluRmlsdGVyKGZpZWxkLCB2YWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBhc3NlcnQodmFsdWUgaW5zdGFuY2VvZiBSZWZWYWx1ZSwgJ0NvbXBhcmluZyBvbiBrZXksIGJ1dCBmaWx0ZXIgdmFsdWUgbm90IGEgUmVmVmFsdWUnKTtcclxuICAgICAgICAgICAgICAgIGFzc2VydChvcCAhPT0gT3BlcmF0b3IuQVJSQVlfQ09OVEFJTlMgJiYgb3AgIT09IE9wZXJhdG9yLkFSUkFZX0NPTlRBSU5TX0FOWSwgXCInXCIgKyBvcC50b1N0cmluZygpICsgXCInIHF1ZXJpZXMgZG9uJ3QgbWFrZSBzZW5zZSBvbiBkb2N1bWVudCBrZXlzLlwiKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgS2V5RmllbGRGaWx0ZXIoZmllbGQsIG9wLCB2YWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodmFsdWUuaXNFcXVhbChOdWxsVmFsdWUuSU5TVEFOQ0UpKSB7XHJcbiAgICAgICAgICAgIGlmIChvcCAhPT0gT3BlcmF0b3IuRVFVQUwpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLklOVkFMSURfQVJHVU1FTlQsICdJbnZhbGlkIHF1ZXJ5LiBOdWxsIHN1cHBvcnRzIG9ubHkgZXF1YWxpdHkgY29tcGFyaXNvbnMuJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBGaWVsZEZpbHRlcihmaWVsZCwgb3AsIHZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodmFsdWUuaXNFcXVhbChEb3VibGVWYWx1ZS5OQU4pKSB7XHJcbiAgICAgICAgICAgIGlmIChvcCAhPT0gT3BlcmF0b3IuRVFVQUwpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLklOVkFMSURfQVJHVU1FTlQsICdJbnZhbGlkIHF1ZXJ5LiBOYU4gc3VwcG9ydHMgb25seSBlcXVhbGl0eSBjb21wYXJpc29ucy4nKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEZpZWxkRmlsdGVyKGZpZWxkLCBvcCwgdmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChvcCA9PT0gT3BlcmF0b3IuQVJSQVlfQ09OVEFJTlMpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBBcnJheUNvbnRhaW5zRmlsdGVyKGZpZWxkLCB2YWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKG9wID09PSBPcGVyYXRvci5JTikge1xyXG4gICAgICAgICAgICBhc3NlcnQodmFsdWUgaW5zdGFuY2VvZiBBcnJheVZhbHVlLCAnSU4gZmlsdGVyIGhhcyBpbnZhbGlkIHZhbHVlOiAnICsgdmFsdWUudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgSW5GaWx0ZXIoZmllbGQsIHZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAob3AgPT09IE9wZXJhdG9yLkFSUkFZX0NPTlRBSU5TX0FOWSkge1xyXG4gICAgICAgICAgICBhc3NlcnQodmFsdWUgaW5zdGFuY2VvZiBBcnJheVZhbHVlLCAnQVJSQVlfQ09OVEFJTlNfQU5ZIGZpbHRlciBoYXMgaW52YWxpZCB2YWx1ZTogJyArIHZhbHVlLnRvU3RyaW5nKCkpO1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEFycmF5Q29udGFpbnNBbnlGaWx0ZXIoZmllbGQsIHZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgRmllbGRGaWx0ZXIoZmllbGQsIG9wLCB2YWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIEZpZWxkRmlsdGVyLnByb3RvdHlwZS5tYXRjaGVzID0gZnVuY3Rpb24gKGRvYykge1xyXG4gICAgICAgIHZhciBvdGhlciA9IGRvYy5maWVsZCh0aGlzLmZpZWxkKTtcclxuICAgICAgICAvLyBPbmx5IGNvbXBhcmUgdHlwZXMgd2l0aCBtYXRjaGluZyBiYWNrZW5kIG9yZGVyIChzdWNoIGFzIGRvdWJsZSBhbmQgaW50KS5cclxuICAgICAgICByZXR1cm4gKG90aGVyICE9PSBudWxsICYmXHJcbiAgICAgICAgICAgIHRoaXMudmFsdWUudHlwZU9yZGVyID09PSBvdGhlci50eXBlT3JkZXIgJiZcclxuICAgICAgICAgICAgdGhpcy5tYXRjaGVzQ29tcGFyaXNvbihvdGhlci5jb21wYXJlVG8odGhpcy52YWx1ZSkpKTtcclxuICAgIH07XHJcbiAgICBGaWVsZEZpbHRlci5wcm90b3R5cGUubWF0Y2hlc0NvbXBhcmlzb24gPSBmdW5jdGlvbiAoY29tcGFyaXNvbikge1xyXG4gICAgICAgIHN3aXRjaCAodGhpcy5vcCkge1xyXG4gICAgICAgICAgICBjYXNlIE9wZXJhdG9yLkxFU1NfVEhBTjpcclxuICAgICAgICAgICAgICAgIHJldHVybiBjb21wYXJpc29uIDwgMDtcclxuICAgICAgICAgICAgY2FzZSBPcGVyYXRvci5MRVNTX1RIQU5fT1JfRVFVQUw6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY29tcGFyaXNvbiA8PSAwO1xyXG4gICAgICAgICAgICBjYXNlIE9wZXJhdG9yLkVRVUFMOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbXBhcmlzb24gPT09IDA7XHJcbiAgICAgICAgICAgIGNhc2UgT3BlcmF0b3IuR1JFQVRFUl9USEFOOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbXBhcmlzb24gPiAwO1xyXG4gICAgICAgICAgICBjYXNlIE9wZXJhdG9yLkdSRUFURVJfVEhBTl9PUl9FUVVBTDpcclxuICAgICAgICAgICAgICAgIHJldHVybiBjb21wYXJpc29uID49IDA7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFpbCgnVW5rbm93biBGaWVsZEZpbHRlciBvcGVyYXRvcjogJyArIHRoaXMub3ApO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBGaWVsZEZpbHRlci5wcm90b3R5cGUuaXNJbmVxdWFsaXR5ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiAoW1xyXG4gICAgICAgICAgICBPcGVyYXRvci5MRVNTX1RIQU4sXHJcbiAgICAgICAgICAgIE9wZXJhdG9yLkxFU1NfVEhBTl9PUl9FUVVBTCxcclxuICAgICAgICAgICAgT3BlcmF0b3IuR1JFQVRFUl9USEFOLFxyXG4gICAgICAgICAgICBPcGVyYXRvci5HUkVBVEVSX1RIQU5fT1JfRVFVQUxcclxuICAgICAgICBdLmluZGV4T2YodGhpcy5vcCkgPj0gMCk7XHJcbiAgICB9O1xyXG4gICAgRmllbGRGaWx0ZXIucHJvdG90eXBlLmNhbm9uaWNhbElkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vIFRPRE8oYi8yOTE4MzE2NSk6IFRlY2huaWNhbGx5LCB0aGlzIHdvbid0IGJlIHVuaXF1ZSBpZiB0d28gdmFsdWVzIGhhdmVcclxuICAgICAgICAvLyB0aGUgc2FtZSBkZXNjcmlwdGlvbiwgc3VjaCBhcyB0aGUgaW50IDMgYW5kIHRoZSBzdHJpbmcgXCIzXCIuIFNvIHdlIHNob3VsZFxyXG4gICAgICAgIC8vIGFkZCB0aGUgdHlwZXMgaW4gaGVyZSBzb21laG93LCB0b28uXHJcbiAgICAgICAgcmV0dXJuICh0aGlzLmZpZWxkLmNhbm9uaWNhbFN0cmluZygpICsgdGhpcy5vcC50b1N0cmluZygpICsgdGhpcy52YWx1ZS50b1N0cmluZygpKTtcclxuICAgIH07XHJcbiAgICBGaWVsZEZpbHRlci5wcm90b3R5cGUuaXNFcXVhbCA9IGZ1bmN0aW9uIChvdGhlcikge1xyXG4gICAgICAgIGlmIChvdGhlciBpbnN0YW5jZW9mIEZpZWxkRmlsdGVyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAodGhpcy5vcC5pc0VxdWFsKG90aGVyLm9wKSAmJlxyXG4gICAgICAgICAgICAgICAgdGhpcy5maWVsZC5pc0VxdWFsKG90aGVyLmZpZWxkKSAmJlxyXG4gICAgICAgICAgICAgICAgdGhpcy52YWx1ZS5pc0VxdWFsKG90aGVyLnZhbHVlKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIEZpZWxkRmlsdGVyLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5maWVsZC5jYW5vbmljYWxTdHJpbmcoKSArIFwiIFwiICsgdGhpcy5vcCArIFwiIFwiICsgdGhpcy52YWx1ZS52YWx1ZSgpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBGaWVsZEZpbHRlcjtcclxufShGaWx0ZXIpKTtcclxuLyoqIEZpbHRlciB0aGF0IG1hdGNoZXMgb24ga2V5IGZpZWxkcyAoaS5lLiAnX19uYW1lX18nKS4gKi9cclxudmFyIEtleUZpZWxkRmlsdGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgdHNsaWIuX19leHRlbmRzKEtleUZpZWxkRmlsdGVyLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gS2V5RmllbGRGaWx0ZXIoKSB7XHJcbiAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xyXG4gICAgfVxyXG4gICAgS2V5RmllbGRGaWx0ZXIucHJvdG90eXBlLm1hdGNoZXMgPSBmdW5jdGlvbiAoZG9jKSB7XHJcbiAgICAgICAgdmFyIHJlZlZhbHVlID0gdGhpcy52YWx1ZTtcclxuICAgICAgICB2YXIgY29tcGFyaXNvbiA9IERvY3VtZW50S2V5LmNvbXBhcmF0b3IoZG9jLmtleSwgcmVmVmFsdWUua2V5KTtcclxuICAgICAgICByZXR1cm4gdGhpcy5tYXRjaGVzQ29tcGFyaXNvbihjb21wYXJpc29uKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gS2V5RmllbGRGaWx0ZXI7XHJcbn0oRmllbGRGaWx0ZXIpKTtcclxuLyoqIEZpbHRlciB0aGF0IG1hdGNoZXMgb24ga2V5IGZpZWxkcyB3aXRoaW4gYW4gYXJyYXkuICovXHJcbnZhciBLZXlGaWVsZEluRmlsdGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgdHNsaWIuX19leHRlbmRzKEtleUZpZWxkSW5GaWx0ZXIsIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBLZXlGaWVsZEluRmlsdGVyKGZpZWxkLCB2YWx1ZSkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGZpZWxkLCBPcGVyYXRvci5JTiwgdmFsdWUpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMudmFsdWUgPSB2YWx1ZTtcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICBLZXlGaWVsZEluRmlsdGVyLnByb3RvdHlwZS5tYXRjaGVzID0gZnVuY3Rpb24gKGRvYykge1xyXG4gICAgICAgIHZhciBhcnJheVZhbHVlID0gdGhpcy52YWx1ZTtcclxuICAgICAgICByZXR1cm4gYXJyYXlWYWx1ZS5pbnRlcm5hbFZhbHVlLnNvbWUoZnVuY3Rpb24gKHJlZlZhbHVlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBkb2Mua2V5LmlzRXF1YWwocmVmVmFsdWUua2V5KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gS2V5RmllbGRJbkZpbHRlcjtcclxufShGaWVsZEZpbHRlcikpO1xyXG4vKiogQSBGaWx0ZXIgdGhhdCBpbXBsZW1lbnRzIHRoZSBhcnJheS1jb250YWlucyBvcGVyYXRvci4gKi9cclxudmFyIEFycmF5Q29udGFpbnNGaWx0ZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICB0c2xpYi5fX2V4dGVuZHMoQXJyYXlDb250YWluc0ZpbHRlciwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIEFycmF5Q29udGFpbnNGaWx0ZXIoZmllbGQsIHZhbHVlKSB7XHJcbiAgICAgICAgcmV0dXJuIF9zdXBlci5jYWxsKHRoaXMsIGZpZWxkLCBPcGVyYXRvci5BUlJBWV9DT05UQUlOUywgdmFsdWUpIHx8IHRoaXM7XHJcbiAgICB9XHJcbiAgICBBcnJheUNvbnRhaW5zRmlsdGVyLnByb3RvdHlwZS5tYXRjaGVzID0gZnVuY3Rpb24gKGRvYykge1xyXG4gICAgICAgIHZhciBvdGhlciA9IGRvYy5maWVsZCh0aGlzLmZpZWxkKTtcclxuICAgICAgICByZXR1cm4gb3RoZXIgaW5zdGFuY2VvZiBBcnJheVZhbHVlICYmIG90aGVyLmNvbnRhaW5zKHRoaXMudmFsdWUpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBBcnJheUNvbnRhaW5zRmlsdGVyO1xyXG59KEZpZWxkRmlsdGVyKSk7XHJcbi8qKiBBIEZpbHRlciB0aGF0IGltcGxlbWVudHMgdGhlIElOIG9wZXJhdG9yLiAqL1xyXG52YXIgSW5GaWx0ZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICB0c2xpYi5fX2V4dGVuZHMoSW5GaWx0ZXIsIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBJbkZpbHRlcihmaWVsZCwgdmFsdWUpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBmaWVsZCwgT3BlcmF0b3IuSU4sIHZhbHVlKSB8fCB0aGlzO1xyXG4gICAgICAgIF90aGlzLnZhbHVlID0gdmFsdWU7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgSW5GaWx0ZXIucHJvdG90eXBlLm1hdGNoZXMgPSBmdW5jdGlvbiAoZG9jKSB7XHJcbiAgICAgICAgdmFyIGFycmF5VmFsdWUgPSB0aGlzLnZhbHVlO1xyXG4gICAgICAgIHZhciBvdGhlciA9IGRvYy5maWVsZCh0aGlzLmZpZWxkKTtcclxuICAgICAgICByZXR1cm4gb3RoZXIgIT09IG51bGwgJiYgYXJyYXlWYWx1ZS5jb250YWlucyhvdGhlcik7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEluRmlsdGVyO1xyXG59KEZpZWxkRmlsdGVyKSk7XHJcbi8qKiBBIEZpbHRlciB0aGF0IGltcGxlbWVudHMgdGhlIGFycmF5LWNvbnRhaW5zLWFueSBvcGVyYXRvci4gKi9cclxudmFyIEFycmF5Q29udGFpbnNBbnlGaWx0ZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICB0c2xpYi5fX2V4dGVuZHMoQXJyYXlDb250YWluc0FueUZpbHRlciwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIEFycmF5Q29udGFpbnNBbnlGaWx0ZXIoZmllbGQsIHZhbHVlKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgZmllbGQsIE9wZXJhdG9yLkFSUkFZX0NPTlRBSU5TX0FOWSwgdmFsdWUpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMudmFsdWUgPSB2YWx1ZTtcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICBBcnJheUNvbnRhaW5zQW55RmlsdGVyLnByb3RvdHlwZS5tYXRjaGVzID0gZnVuY3Rpb24gKGRvYykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIG90aGVyID0gZG9jLmZpZWxkKHRoaXMuZmllbGQpO1xyXG4gICAgICAgIHJldHVybiAob3RoZXIgaW5zdGFuY2VvZiBBcnJheVZhbHVlICYmXHJcbiAgICAgICAgICAgIG90aGVyLmludGVybmFsVmFsdWUuc29tZShmdW5jdGlvbiAobGhzRWxlbSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLnZhbHVlLmNvbnRhaW5zKGxoc0VsZW0pO1xyXG4gICAgICAgICAgICB9KSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEFycmF5Q29udGFpbnNBbnlGaWx0ZXI7XHJcbn0oRmllbGRGaWx0ZXIpKTtcclxuLyoqXHJcbiAqIFRoZSBkaXJlY3Rpb24gb2Ygc29ydGluZyBpbiBhbiBvcmRlciBieS5cclxuICovXHJcbnZhciBEaXJlY3Rpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBEaXJlY3Rpb24obmFtZSkge1xyXG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XHJcbiAgICB9XHJcbiAgICBEaXJlY3Rpb24ucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm5hbWU7XHJcbiAgICB9O1xyXG4gICAgRGlyZWN0aW9uLkFTQ0VORElORyA9IG5ldyBEaXJlY3Rpb24oJ2FzYycpO1xyXG4gICAgRGlyZWN0aW9uLkRFU0NFTkRJTkcgPSBuZXcgRGlyZWN0aW9uKCdkZXNjJyk7XHJcbiAgICByZXR1cm4gRGlyZWN0aW9uO1xyXG59KCkpO1xyXG4vKipcclxuICogUmVwcmVzZW50cyBhIGJvdW5kIG9mIGEgcXVlcnkuXHJcbiAqXHJcbiAqIFRoZSBib3VuZCBpcyBzcGVjaWZpZWQgd2l0aCB0aGUgZ2l2ZW4gY29tcG9uZW50cyByZXByZXNlbnRpbmcgYSBwb3NpdGlvbiBhbmRcclxuICogd2hldGhlciBpdCdzIGp1c3QgYmVmb3JlIG9yIGp1c3QgYWZ0ZXIgdGhlIHBvc2l0aW9uIChyZWxhdGl2ZSB0byB3aGF0ZXZlciB0aGVcclxuICogcXVlcnkgb3JkZXIgaXMpLlxyXG4gKlxyXG4gKiBUaGUgcG9zaXRpb24gcmVwcmVzZW50cyBhIGxvZ2ljYWwgaW5kZXggcG9zaXRpb24gZm9yIGEgcXVlcnkuIEl0J3MgYSBwcmVmaXhcclxuICogb2YgdmFsdWVzIGZvciB0aGUgKHBvdGVudGlhbGx5IGltcGxpY2l0KSBvcmRlciBieSBjbGF1c2VzIG9mIGEgcXVlcnkuXHJcbiAqXHJcbiAqIEJvdW5kIHByb3ZpZGVzIGEgZnVuY3Rpb24gdG8gZGV0ZXJtaW5lIHdoZXRoZXIgYSBkb2N1bWVudCBjb21lcyBiZWZvcmUgb3JcclxuICogYWZ0ZXIgYSBib3VuZC4gVGhpcyBpcyBpbmZsdWVuY2VkIGJ5IHdoZXRoZXIgdGhlIHBvc2l0aW9uIGlzIGp1c3QgYmVmb3JlIG9yXHJcbiAqIGp1c3QgYWZ0ZXIgdGhlIHByb3ZpZGVkIHZhbHVlcy5cclxuICovXHJcbnZhciBCb3VuZCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEJvdW5kKHBvc2l0aW9uLCBiZWZvcmUpIHtcclxuICAgICAgICB0aGlzLnBvc2l0aW9uID0gcG9zaXRpb247XHJcbiAgICAgICAgdGhpcy5iZWZvcmUgPSBiZWZvcmU7XHJcbiAgICB9XHJcbiAgICBCb3VuZC5wcm90b3R5cGUuY2Fub25pY2FsSWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy8gVE9ETyhiLzI5MTgzMTY1KTogTWFrZSB0aGlzIGNvbGxpc2lvbiByb2J1c3QuXHJcbiAgICAgICAgdmFyIGNhbm9uaWNhbElkID0gdGhpcy5iZWZvcmUgPyAnYjonIDogJ2E6JztcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gdGhpcy5wb3NpdGlvbjsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgdmFyIGNvbXBvbmVudCA9IF9hW19pXTtcclxuICAgICAgICAgICAgY2Fub25pY2FsSWQgKz0gY29tcG9uZW50LnRvU3RyaW5nKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBjYW5vbmljYWxJZDtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiBhIGRvY3VtZW50IHNvcnRzIGJlZm9yZSBhIGJvdW5kIHVzaW5nIHRoZSBwcm92aWRlZCBzb3J0XHJcbiAgICAgKiBvcmRlci5cclxuICAgICAqL1xyXG4gICAgQm91bmQucHJvdG90eXBlLnNvcnRzQmVmb3JlRG9jdW1lbnQgPSBmdW5jdGlvbiAob3JkZXJCeSwgZG9jKSB7XHJcbiAgICAgICAgYXNzZXJ0KHRoaXMucG9zaXRpb24ubGVuZ3RoIDw9IG9yZGVyQnkubGVuZ3RoLCBcIkJvdW5kIGhhcyBtb3JlIGNvbXBvbmVudHMgdGhhbiBxdWVyeSdzIG9yZGVyQnlcIik7XHJcbiAgICAgICAgdmFyIGNvbXBhcmlzb24gPSAwO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5wb3NpdGlvbi5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB2YXIgb3JkZXJCeUNvbXBvbmVudCA9IG9yZGVyQnlbaV07XHJcbiAgICAgICAgICAgIHZhciBjb21wb25lbnQgPSB0aGlzLnBvc2l0aW9uW2ldO1xyXG4gICAgICAgICAgICBpZiAob3JkZXJCeUNvbXBvbmVudC5maWVsZC5pc0tleUZpZWxkKCkpIHtcclxuICAgICAgICAgICAgICAgIGFzc2VydChjb21wb25lbnQgaW5zdGFuY2VvZiBSZWZWYWx1ZSwgJ0JvdW5kIGhhcyBhIG5vbi1rZXkgdmFsdWUgd2hlcmUgdGhlIGtleSBwYXRoIGlzIGJlaW5nIHVzZWQuJyk7XHJcbiAgICAgICAgICAgICAgICBjb21wYXJpc29uID0gRG9jdW1lbnRLZXkuY29tcGFyYXRvcihjb21wb25lbnQua2V5LCBkb2Mua2V5KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHZhciBkb2NWYWx1ZSA9IGRvYy5maWVsZChvcmRlckJ5Q29tcG9uZW50LmZpZWxkKTtcclxuICAgICAgICAgICAgICAgIGFzc2VydChkb2NWYWx1ZSAhPT0gbnVsbCwgJ0ZpZWxkIHNob3VsZCBleGlzdCBzaW5jZSBkb2N1bWVudCBtYXRjaGVkIHRoZSBvcmRlckJ5IGFscmVhZHkuJyk7XHJcbiAgICAgICAgICAgICAgICBjb21wYXJpc29uID0gY29tcG9uZW50LmNvbXBhcmVUbyhkb2NWYWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKG9yZGVyQnlDb21wb25lbnQuZGlyID09PSBEaXJlY3Rpb24uREVTQ0VORElORykge1xyXG4gICAgICAgICAgICAgICAgY29tcGFyaXNvbiA9IGNvbXBhcmlzb24gKiAtMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoY29tcGFyaXNvbiAhPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYmVmb3JlID8gY29tcGFyaXNvbiA8PSAwIDogY29tcGFyaXNvbiA8IDA7XHJcbiAgICB9O1xyXG4gICAgQm91bmQucHJvdG90eXBlLmlzRXF1YWwgPSBmdW5jdGlvbiAob3RoZXIpIHtcclxuICAgICAgICBpZiAob3RoZXIgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5iZWZvcmUgIT09IG90aGVyLmJlZm9yZSB8fFxyXG4gICAgICAgICAgICB0aGlzLnBvc2l0aW9uLmxlbmd0aCAhPT0gb3RoZXIucG9zaXRpb24ubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnBvc2l0aW9uLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciB0aGlzUG9zaXRpb24gPSB0aGlzLnBvc2l0aW9uW2ldO1xyXG4gICAgICAgICAgICB2YXIgb3RoZXJQb3NpdGlvbiA9IG90aGVyLnBvc2l0aW9uW2ldO1xyXG4gICAgICAgICAgICBpZiAoIXRoaXNQb3NpdGlvbi5pc0VxdWFsKG90aGVyUG9zaXRpb24pKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEJvdW5kO1xyXG59KCkpO1xyXG4vKipcclxuICogQW4gb3JkZXJpbmcgb24gYSBmaWVsZCwgaW4gc29tZSBEaXJlY3Rpb24uIERpcmVjdGlvbiBkZWZhdWx0cyB0byBBU0NFTkRJTkcuXHJcbiAqL1xyXG52YXIgT3JkZXJCeSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIE9yZGVyQnkoZmllbGQsIGRpcikge1xyXG4gICAgICAgIHRoaXMuZmllbGQgPSBmaWVsZDtcclxuICAgICAgICBpZiAoZGlyID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgZGlyID0gRGlyZWN0aW9uLkFTQ0VORElORztcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5kaXIgPSBkaXI7XHJcbiAgICAgICAgdGhpcy5pc0tleU9yZGVyQnkgPSBmaWVsZC5pc0tleUZpZWxkKCk7XHJcbiAgICB9XHJcbiAgICBPcmRlckJ5LnByb3RvdHlwZS5jb21wYXJlID0gZnVuY3Rpb24gKGQxLCBkMikge1xyXG4gICAgICAgIHZhciBjb21wYXJpc29uID0gdGhpcy5pc0tleU9yZGVyQnlcclxuICAgICAgICAgICAgPyBEb2N1bWVudC5jb21wYXJlQnlLZXkoZDEsIGQyKVxyXG4gICAgICAgICAgICA6IERvY3VtZW50LmNvbXBhcmVCeUZpZWxkKHRoaXMuZmllbGQsIGQxLCBkMik7XHJcbiAgICAgICAgc3dpdGNoICh0aGlzLmRpcikge1xyXG4gICAgICAgICAgICBjYXNlIERpcmVjdGlvbi5BU0NFTkRJTkc6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY29tcGFyaXNvbjtcclxuICAgICAgICAgICAgY2FzZSBEaXJlY3Rpb24uREVTQ0VORElORzpcclxuICAgICAgICAgICAgICAgIHJldHVybiAtMSAqIGNvbXBhcmlzb247XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFpbCgnVW5rbm93biBkaXJlY3Rpb246ICcgKyB0aGlzLmRpcik7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIE9yZGVyQnkucHJvdG90eXBlLmNhbm9uaWNhbElkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vIFRPRE8oYi8yOTE4MzE2NSk6IE1ha2UgdGhpcyBjb2xsaXNpb24gcm9idXN0LlxyXG4gICAgICAgIHJldHVybiB0aGlzLmZpZWxkLmNhbm9uaWNhbFN0cmluZygpICsgdGhpcy5kaXIudG9TdHJpbmcoKTtcclxuICAgIH07XHJcbiAgICBPcmRlckJ5LnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5maWVsZC5jYW5vbmljYWxTdHJpbmcoKSArIFwiIChcIiArIHRoaXMuZGlyICsgXCIpXCI7XHJcbiAgICB9O1xyXG4gICAgT3JkZXJCeS5wcm90b3R5cGUuaXNFcXVhbCA9IGZ1bmN0aW9uIChvdGhlcikge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRpciA9PT0gb3RoZXIuZGlyICYmIHRoaXMuZmllbGQuaXNFcXVhbChvdGhlci5maWVsZCk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIE9yZGVyQnk7XHJcbn0oKSk7XHJcbnZhciBLRVlfT1JERVJJTkdfQVNDID0gbmV3IE9yZGVyQnkoRmllbGRQYXRoLmtleUZpZWxkKCksIERpcmVjdGlvbi5BU0NFTkRJTkcpO1xyXG52YXIgS0VZX09SREVSSU5HX0RFU0MgPSBuZXcgT3JkZXJCeShGaWVsZFBhdGgua2V5RmllbGQoKSwgRGlyZWN0aW9uLkRFU0NFTkRJTkcpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLy8gVE9PRChiLzE0MDkzODUxMik6IERyb3AgU2ltcGxlUXVlcnlFbmdpbmUgYW5kIHJlbmFtZSBJbmRleEZyZWVRdWVyeUVuZ2luZS5cclxuLyoqXHJcbiAqIEEgcXVlcnkgZW5naW5lIHRoYXQgdGFrZXMgYWR2YW50YWdlIG9mIHRoZSB0YXJnZXQgZG9jdW1lbnQgbWFwcGluZyBpbiB0aGVcclxuICogUXVlcnlDYWNoZS4gVGhlIEluZGV4RnJlZVF1ZXJ5RW5naW5lIG9wdGltaXplcyBxdWVyeSBleGVjdXRpb24gYnkgb25seVxyXG4gKiByZWFkaW5nIHRoZSBkb2N1bWVudHMgdGhhdCBwcmV2aW91c2x5IG1hdGNoZWQgYSBxdWVyeSBwbHVzIGFueSBkb2N1bWVudHMgdGhhdCB3ZXJlXHJcbiAqIGVkaXRlZCBhZnRlciB0aGUgcXVlcnkgd2FzIGxhc3QgbGlzdGVuZWQgdG8uXHJcbiAqXHJcbiAqIFRoZXJlIGFyZSBzb21lIGNhc2VzIHdoZXJlIEluZGV4LUZyZWUgcXVlcmllcyBhcmUgbm90IGd1YXJhbnRlZWQgdG8gcHJvZHVjZVxyXG4gKiB0aGUgc2FtZSByZXN1bHRzIGFzIGZ1bGwgY29sbGVjdGlvbiBzY2Fucy4gSW4gdGhlc2UgY2FzZXMsIHRoZVxyXG4gKiBJbmRleEZyZWVRdWVyeUVuZ2luZSBmYWxscyBiYWNrIHRvIGZ1bGwgcXVlcnkgcHJvY2Vzc2luZy4gVGhlc2UgY2FzZXMgYXJlOlxyXG4gKlxyXG4gKiAtIExpbWl0IHF1ZXJpZXMgd2hlcmUgYSBkb2N1bWVudCB0aGF0IG1hdGNoZWQgdGhlIHF1ZXJ5IHByZXZpb3VzbHkgbm8gbG9uZ2VyXHJcbiAqICAgbWF0Y2hlcyB0aGUgcXVlcnkuXHJcbiAqXHJcbiAqIC0gTGltaXQgcXVlcmllcyB3aGVyZSBhIGRvY3VtZW50IGVkaXQgbWF5IGNhdXNlIHRoZSBkb2N1bWVudCB0byBzb3J0IGJlbG93XHJcbiAqICAgYW5vdGhlciBkb2N1bWVudCB0aGF0IGlzIGluIHRoZSBsb2NhbCBjYWNoZS5cclxuICpcclxuICogLSBRdWVyaWVzIHRoYXQgaGF2ZSBuZXZlciBiZWVuIENVUlJFTlQgb3IgZnJlZSBvZiBMaW1ibyBkb2N1bWVudHMuXHJcbiAqL1xyXG52YXIgSW5kZXhGcmVlUXVlcnlFbmdpbmUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBJbmRleEZyZWVRdWVyeUVuZ2luZSgpIHtcclxuICAgIH1cclxuICAgIEluZGV4RnJlZVF1ZXJ5RW5naW5lLnByb3RvdHlwZS5zZXRMb2NhbERvY3VtZW50c1ZpZXcgPSBmdW5jdGlvbiAobG9jYWxEb2N1bWVudHMpIHtcclxuICAgICAgICB0aGlzLmxvY2FsRG9jdW1lbnRzVmlldyA9IGxvY2FsRG9jdW1lbnRzO1xyXG4gICAgfTtcclxuICAgIEluZGV4RnJlZVF1ZXJ5RW5naW5lLnByb3RvdHlwZS5nZXREb2N1bWVudHNNYXRjaGluZ1F1ZXJ5ID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCBxdWVyeSwgbGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbiwgcmVtb3RlS2V5cykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgYXNzZXJ0KHRoaXMubG9jYWxEb2N1bWVudHNWaWV3ICE9PSB1bmRlZmluZWQsICdzZXRMb2NhbERvY3VtZW50c1ZpZXcoKSBub3QgY2FsbGVkJyk7XHJcbiAgICAgICAgLy8gUXVlcmllcyB0aGF0IG1hdGNoIGFsbCBkb2N1bWVudHMgZG9uJ3QgYmVuZWZpdCBmcm9tIHVzaW5nXHJcbiAgICAgICAgLy8gSW5kZXhGcmVlUXVlcmllcy4gSXQgaXMgbW9yZSBlZmZpY2llbnQgdG8gc2NhbiBhbGwgZG9jdW1lbnRzIGluIGFcclxuICAgICAgICAvLyBjb2xsZWN0aW9uLCByYXRoZXIgdGhhbiB0byBwZXJmb3JtIGluZGl2aWR1YWwgbG9va3Vwcy5cclxuICAgICAgICBpZiAocXVlcnkubWF0Y2hlc0FsbERvY3VtZW50cygpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmV4ZWN1dGVGdWxsQ29sbGVjdGlvblNjYW4odHJhbnNhY3Rpb24sIHF1ZXJ5KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gUXVlcmllcyB0aGF0IGhhdmUgbmV2ZXIgc2VlbiBhIHNuYXBzaG90IHdpdGhvdXQgbGltYm8gZnJlZSBkb2N1bWVudHNcclxuICAgICAgICAvLyBzaG91bGQgYWxzbyBiZSBydW4gYXMgYSBmdWxsIGNvbGxlY3Rpb24gc2Nhbi5cclxuICAgICAgICBpZiAobGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbi5pc0VxdWFsKFNuYXBzaG90VmVyc2lvbi5NSU4pKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmV4ZWN1dGVGdWxsQ29sbGVjdGlvblNjYW4odHJhbnNhY3Rpb24sIHF1ZXJ5KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubG9jYWxEb2N1bWVudHNWaWV3LmdldERvY3VtZW50cyh0cmFuc2FjdGlvbiwgcmVtb3RlS2V5cykubmV4dChmdW5jdGlvbiAoZG9jdW1lbnRzKSB7XHJcbiAgICAgICAgICAgIHZhciBwcmV2aW91c1Jlc3VsdHMgPSBfdGhpcy5hcHBseVF1ZXJ5KHF1ZXJ5LCBkb2N1bWVudHMpO1xyXG4gICAgICAgICAgICBpZiAoKHF1ZXJ5Lmhhc0xpbWl0VG9GaXJzdCgpIHx8IHF1ZXJ5Lmhhc0xpbWl0VG9MYXN0KCkpICYmXHJcbiAgICAgICAgICAgICAgICBfdGhpcy5uZWVkc1JlZmlsbChxdWVyeS5saW1pdFR5cGUsIHByZXZpb3VzUmVzdWx0cywgcmVtb3RlS2V5cywgbGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbikpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5leGVjdXRlRnVsbENvbGxlY3Rpb25TY2FuKHRyYW5zYWN0aW9uLCBxdWVyeSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGdldExvZ0xldmVsKCkgPD0gTG9nTGV2ZWwuREVCVUcpIHtcclxuICAgICAgICAgICAgICAgIGRlYnVnKCdJbmRleEZyZWVRdWVyeUVuZ2luZScsICdSZS11c2luZyBwcmV2aW91cyByZXN1bHQgZnJvbSAlcyB0byBleGVjdXRlIHF1ZXJ5OiAlcycsIGxhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24udG9TdHJpbmcoKSwgcXVlcnkudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gUmV0cmlldmUgYWxsIHJlc3VsdHMgZm9yIGRvY3VtZW50cyB0aGF0IHdlcmUgdXBkYXRlZCBzaW5jZSB0aGUgbGFzdFxyXG4gICAgICAgICAgICAvLyBsaW1iby1kb2N1bWVudCBmcmVlIHJlbW90ZSBzbmFwc2hvdC5cclxuICAgICAgICAgICAgcmV0dXJuIF90aGlzLmxvY2FsRG9jdW1lbnRzVmlldy5nZXREb2N1bWVudHNNYXRjaGluZ1F1ZXJ5KHRyYW5zYWN0aW9uLCBxdWVyeSwgbGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbikubmV4dChmdW5jdGlvbiAodXBkYXRlZFJlc3VsdHMpIHtcclxuICAgICAgICAgICAgICAgIC8vIFdlIG1lcmdlIGBwcmV2aW91c1Jlc3VsdHNgIGludG8gYHVwZGF0ZVJlc3VsdHNgLCBzaW5jZVxyXG4gICAgICAgICAgICAgICAgLy8gYHVwZGF0ZVJlc3VsdHNgIGlzIGFscmVhZHkgYSBEb2N1bWVudE1hcC4gSWYgYSBkb2N1bWVudCBpc1xyXG4gICAgICAgICAgICAgICAgLy8gY29udGFpbmVkIGluIGJvdGggbGlzdHMsIHRoZW4gaXRzIGNvbnRlbnRzIGFyZSB0aGUgc2FtZS5cclxuICAgICAgICAgICAgICAgIHByZXZpb3VzUmVzdWx0cy5mb3JFYWNoKGZ1bmN0aW9uIChkb2MpIHtcclxuICAgICAgICAgICAgICAgICAgICB1cGRhdGVkUmVzdWx0cyA9IHVwZGF0ZWRSZXN1bHRzLmluc2VydChkb2Mua2V5LCBkb2MpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdXBkYXRlZFJlc3VsdHM7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKiBBcHBsaWVzIHRoZSBxdWVyeSBmaWx0ZXIgYW5kIHNvcnRpbmcgdG8gdGhlIHByb3ZpZGVkIGRvY3VtZW50cy4gICovXHJcbiAgICBJbmRleEZyZWVRdWVyeUVuZ2luZS5wcm90b3R5cGUuYXBwbHlRdWVyeSA9IGZ1bmN0aW9uIChxdWVyeSwgZG9jdW1lbnRzKSB7XHJcbiAgICAgICAgLy8gU29ydCB0aGUgZG9jdW1lbnRzIGFuZCByZS1hcHBseSB0aGUgcXVlcnkgZmlsdGVyIHNpbmNlIHByZXZpb3VzbHlcclxuICAgICAgICAvLyBtYXRjaGluZyBkb2N1bWVudHMgZG8gbm90IG5lY2Vzc2FyaWx5IHN0aWxsIG1hdGNoIHRoZSBxdWVyeS5cclxuICAgICAgICB2YXIgcXVlcnlSZXN1bHRzID0gbmV3IFNvcnRlZFNldChmdW5jdGlvbiAoZDEsIGQyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBxdWVyeS5kb2NDb21wYXJhdG9yKGQxLCBkMik7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgZG9jdW1lbnRzLmZvckVhY2goZnVuY3Rpb24gKF8sIG1heWJlRG9jKSB7XHJcbiAgICAgICAgICAgIGlmIChtYXliZURvYyBpbnN0YW5jZW9mIERvY3VtZW50ICYmIHF1ZXJ5Lm1hdGNoZXMobWF5YmVEb2MpKSB7XHJcbiAgICAgICAgICAgICAgICBxdWVyeVJlc3VsdHMgPSBxdWVyeVJlc3VsdHMuYWRkKG1heWJlRG9jKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBxdWVyeVJlc3VsdHM7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBEZXRlcm1pbmVzIGlmIGEgbGltaXQgcXVlcnkgbmVlZHMgdG8gYmUgcmVmaWxsZWQgZnJvbSBjYWNoZSwgbWFraW5nIGl0XHJcbiAgICAgKiBpbmVsaWdpYmxlIGZvciBpbmRleC1mcmVlIGV4ZWN1dGlvbi5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gc29ydGVkUHJldmlvdXNSZXN1bHRzIFRoZSBkb2N1bWVudHMgdGhhdCBtYXRjaGVkIHRoZSBxdWVyeSB3aGVuIGl0XHJcbiAgICAgKiB3YXMgbGFzdCBzeW5jaHJvbml6ZWQsIHNvcnRlZCBieSB0aGUgcXVlcnkncyBjb21wYXJhdG9yLlxyXG4gICAgICogQHBhcmFtIHJlbW90ZUtleXMgVGhlIGRvY3VtZW50IGtleXMgdGhhdCBtYXRjaGVkIHRoZSBxdWVyeSBhdCB0aGUgbGFzdFxyXG4gICAgICogc25hcHNob3QuXHJcbiAgICAgKiBAcGFyYW0gbGltYm9GcmVlU25hcHNob3RWZXJzaW9uIFRoZSB2ZXJzaW9uIG9mIHRoZSBzbmFwc2hvdCB3aGVuIHRoZSBxdWVyeVxyXG4gICAgICogd2FzIGxhc3Qgc3luY2hyb25pemVkLlxyXG4gICAgICovXHJcbiAgICBJbmRleEZyZWVRdWVyeUVuZ2luZS5wcm90b3R5cGUubmVlZHNSZWZpbGwgPSBmdW5jdGlvbiAobGltaXRUeXBlLCBzb3J0ZWRQcmV2aW91c1Jlc3VsdHMsIHJlbW90ZUtleXMsIGxpbWJvRnJlZVNuYXBzaG90VmVyc2lvbikge1xyXG4gICAgICAgIC8vIFRoZSBxdWVyeSBuZWVkcyB0byBiZSByZWZpbGxlZCBpZiBhIHByZXZpb3VzbHkgbWF0Y2hpbmcgZG9jdW1lbnQgbm9cclxuICAgICAgICAvLyBsb25nZXIgbWF0Y2hlcy5cclxuICAgICAgICBpZiAocmVtb3RlS2V5cy5zaXplICE9PSBzb3J0ZWRQcmV2aW91c1Jlc3VsdHMuc2l6ZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gTGltaXQgcXVlcmllcyBhcmUgbm90IGVsaWdpYmxlIGZvciBpbmRleC1mcmVlIHF1ZXJ5IGV4ZWN1dGlvbiBpZiB0aGVyZSBpc1xyXG4gICAgICAgIC8vIGEgcG90ZW50aWFsIHRoYXQgYW4gb2xkZXIgZG9jdW1lbnQgZnJvbSBjYWNoZSBub3cgc29ydHMgYmVmb3JlIGEgZG9jdW1lbnRcclxuICAgICAgICAvLyB0aGF0IHdhcyBwcmV2aW91c2x5IHBhcnQgb2YgdGhlIGxpbWl0LiBUaGlzLCBob3dldmVyLCBjYW4gb25seSBoYXBwZW4gaWZcclxuICAgICAgICAvLyB0aGUgZG9jdW1lbnQgYXQgdGhlIGVkZ2Ugb2YgdGhlIGxpbWl0IGdvZXMgb3V0IG9mIGxpbWl0LlxyXG4gICAgICAgIC8vIElmIGEgZG9jdW1lbnQgdGhhdCBpcyBub3QgdGhlIGxpbWl0IGJvdW5kYXJ5IHNvcnRzIGRpZmZlcmVudGx5LFxyXG4gICAgICAgIC8vIHRoZSBib3VuZGFyeSBvZiB0aGUgbGltaXQgaXRzZWxmIGRpZCBub3QgY2hhbmdlIGFuZCBkb2N1bWVudHMgZnJvbSBjYWNoZVxyXG4gICAgICAgIC8vIHdpbGwgY29udGludWUgdG8gYmUgXCJyZWplY3RlZFwiIGJ5IHRoaXMgYm91bmRhcnkuIFRoZXJlZm9yZSwgd2UgY2FuIGlnbm9yZVxyXG4gICAgICAgIC8vIGFueSBtb2RpZmljYXRpb25zIHRoYXQgZG9uJ3QgYWZmZWN0IHRoZSBsYXN0IGRvY3VtZW50LlxyXG4gICAgICAgIHZhciBkb2NBdExpbWl0RWRnZSA9IGxpbWl0VHlwZSA9PT0gTGltaXRUeXBlLkZpcnN0XHJcbiAgICAgICAgICAgID8gc29ydGVkUHJldmlvdXNSZXN1bHRzLmxhc3QoKVxyXG4gICAgICAgICAgICA6IHNvcnRlZFByZXZpb3VzUmVzdWx0cy5maXJzdCgpO1xyXG4gICAgICAgIGlmICghZG9jQXRMaW1pdEVkZ2UpIHtcclxuICAgICAgICAgICAgLy8gV2UgZG9uJ3QgbmVlZCB0byByZWZpbGwgdGhlIHF1ZXJ5IGlmIHRoZXJlIHdlcmUgYWxyZWFkeSBubyBkb2N1bWVudHMuXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIChkb2NBdExpbWl0RWRnZS5oYXNQZW5kaW5nV3JpdGVzIHx8XHJcbiAgICAgICAgICAgIGRvY0F0TGltaXRFZGdlLnZlcnNpb24uY29tcGFyZVRvKGxpbWJvRnJlZVNuYXBzaG90VmVyc2lvbikgPiAwKTtcclxuICAgIH07XHJcbiAgICBJbmRleEZyZWVRdWVyeUVuZ2luZS5wcm90b3R5cGUuZXhlY3V0ZUZ1bGxDb2xsZWN0aW9uU2NhbiA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwgcXVlcnkpIHtcclxuICAgICAgICBpZiAoZ2V0TG9nTGV2ZWwoKSA8PSBMb2dMZXZlbC5ERUJVRykge1xyXG4gICAgICAgICAgICBkZWJ1ZygnSW5kZXhGcmVlUXVlcnlFbmdpbmUnLCAnVXNpbmcgZnVsbCBjb2xsZWN0aW9uIHNjYW4gdG8gZXhlY3V0ZSBxdWVyeTogJXMnLCBxdWVyeS50b1N0cmluZygpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubG9jYWxEb2N1bWVudHNWaWV3LmdldERvY3VtZW50c01hdGNoaW5nUXVlcnkodHJhbnNhY3Rpb24sIHF1ZXJ5LCBTbmFwc2hvdFZlcnNpb24uTUlOKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gSW5kZXhGcmVlUXVlcnlFbmdpbmU7XHJcbn0oKSk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQSByZWFkb25seSB2aWV3IG9mIHRoZSBsb2NhbCBzdGF0ZSBvZiBhbGwgZG9jdW1lbnRzIHdlJ3JlIHRyYWNraW5nIChpLmUuIHdlXHJcbiAqIGhhdmUgYSBjYWNoZWQgdmVyc2lvbiBpbiByZW1vdGVEb2N1bWVudENhY2hlIG9yIGxvY2FsIG11dGF0aW9ucyBmb3IgdGhlXHJcbiAqIGRvY3VtZW50KS4gVGhlIHZpZXcgaXMgY29tcHV0ZWQgYnkgYXBwbHlpbmcgdGhlIG11dGF0aW9ucyBpbiB0aGVcclxuICogTXV0YXRpb25RdWV1ZSB0byB0aGUgUmVtb3RlRG9jdW1lbnRDYWNoZS5cclxuICovXHJcbnZhciBMb2NhbERvY3VtZW50c1ZpZXcgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBMb2NhbERvY3VtZW50c1ZpZXcocmVtb3RlRG9jdW1lbnRDYWNoZSwgbXV0YXRpb25RdWV1ZSwgaW5kZXhNYW5hZ2VyKSB7XHJcbiAgICAgICAgdGhpcy5yZW1vdGVEb2N1bWVudENhY2hlID0gcmVtb3RlRG9jdW1lbnRDYWNoZTtcclxuICAgICAgICB0aGlzLm11dGF0aW9uUXVldWUgPSBtdXRhdGlvblF1ZXVlO1xyXG4gICAgICAgIHRoaXMuaW5kZXhNYW5hZ2VyID0gaW5kZXhNYW5hZ2VyO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgdGhlIGxvY2FsIHZpZXcgb2YgdGhlIGRvY3VtZW50IGlkZW50aWZpZWQgYnkgYGtleWAuXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybiBMb2NhbCB2aWV3IG9mIHRoZSBkb2N1bWVudCBvciBudWxsIGlmIHdlIGRvbid0IGhhdmUgYW55IGNhY2hlZFxyXG4gICAgICogc3RhdGUgZm9yIGl0LlxyXG4gICAgICovXHJcbiAgICBMb2NhbERvY3VtZW50c1ZpZXcucHJvdG90eXBlLmdldERvY3VtZW50ID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCBrZXkpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiB0aGlzLm11dGF0aW9uUXVldWVcclxuICAgICAgICAgICAgLmdldEFsbE11dGF0aW9uQmF0Y2hlc0FmZmVjdGluZ0RvY3VtZW50S2V5KHRyYW5zYWN0aW9uLCBrZXkpXHJcbiAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uIChiYXRjaGVzKSB7IHJldHVybiBfdGhpcy5nZXREb2N1bWVudEludGVybmFsKHRyYW5zYWN0aW9uLCBrZXksIGJhdGNoZXMpOyB9KTtcclxuICAgIH07XHJcbiAgICAvKiogSW50ZXJuYWwgdmVyc2lvbiBvZiBgZ2V0RG9jdW1lbnRgIHRoYXQgYWxsb3dzIHJldXNpbmcgYmF0Y2hlcy4gKi9cclxuICAgIExvY2FsRG9jdW1lbnRzVmlldy5wcm90b3R5cGUuZ2V0RG9jdW1lbnRJbnRlcm5hbCA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwga2V5LCBpbkJhdGNoZXMpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5yZW1vdGVEb2N1bWVudENhY2hlLmdldEVudHJ5KHRyYW5zYWN0aW9uLCBrZXkpLm5leHQoZnVuY3Rpb24gKGRvYykge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGluQmF0Y2hlc18xID0gaW5CYXRjaGVzOyBfaSA8IGluQmF0Y2hlc18xLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGJhdGNoID0gaW5CYXRjaGVzXzFbX2ldO1xyXG4gICAgICAgICAgICAgICAgZG9jID0gYmF0Y2guYXBwbHlUb0xvY2FsVmlldyhrZXksIGRvYyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGRvYztcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvLyBSZXR1cm5zIHRoZSB2aWV3IG9mIHRoZSBnaXZlbiBgZG9jc2AgYXMgdGhleSB3b3VsZCBhcHBlYXIgYWZ0ZXIgYXBwbHlpbmdcclxuICAgIC8vIGFsbCBtdXRhdGlvbnMgaW4gdGhlIGdpdmVuIGBiYXRjaGVzYC5cclxuICAgIExvY2FsRG9jdW1lbnRzVmlldy5wcm90b3R5cGUuYXBwbHlMb2NhbE11dGF0aW9uc1RvRG9jdW1lbnRzID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCBkb2NzLCBiYXRjaGVzKSB7XHJcbiAgICAgICAgdmFyIHJlc3VsdHMgPSBudWxsYWJsZU1heWJlRG9jdW1lbnRNYXAoKTtcclxuICAgICAgICBkb2NzLmZvckVhY2goZnVuY3Rpb24gKGtleSwgbG9jYWxWaWV3KSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgYmF0Y2hlc18xID0gYmF0Y2hlczsgX2kgPCBiYXRjaGVzXzEubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYmF0Y2ggPSBiYXRjaGVzXzFbX2ldO1xyXG4gICAgICAgICAgICAgICAgbG9jYWxWaWV3ID0gYmF0Y2guYXBwbHlUb0xvY2FsVmlldyhrZXksIGxvY2FsVmlldyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmVzdWx0cyA9IHJlc3VsdHMuaW5zZXJ0KGtleSwgbG9jYWxWaWV3KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gcmVzdWx0cztcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEdldHMgdGhlIGxvY2FsIHZpZXcgb2YgdGhlIGRvY3VtZW50cyBpZGVudGlmaWVkIGJ5IGBrZXlzYC5cclxuICAgICAqXHJcbiAgICAgKiBJZiB3ZSBkb24ndCBoYXZlIGNhY2hlZCBzdGF0ZSBmb3IgYSBkb2N1bWVudCBpbiBga2V5c2AsIGEgTm9Eb2N1bWVudCB3aWxsXHJcbiAgICAgKiBiZSBzdG9yZWQgZm9yIHRoYXQga2V5IGluIHRoZSByZXN1bHRpbmcgc2V0LlxyXG4gICAgICovXHJcbiAgICBMb2NhbERvY3VtZW50c1ZpZXcucHJvdG90eXBlLmdldERvY3VtZW50cyA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwga2V5cykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucmVtb3RlRG9jdW1lbnRDYWNoZVxyXG4gICAgICAgICAgICAuZ2V0RW50cmllcyh0cmFuc2FjdGlvbiwga2V5cylcclxuICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKGRvY3MpIHsgcmV0dXJuIF90aGlzLmdldExvY2FsVmlld09mRG9jdW1lbnRzKHRyYW5zYWN0aW9uLCBkb2NzKTsgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBTaW1pbGFyIHRvIGBnZXREb2N1bWVudHNgLCBidXQgY3JlYXRlcyB0aGUgbG9jYWwgdmlldyBmcm9tIHRoZSBnaXZlblxyXG4gICAgICogYGJhc2VEb2NzYCB3aXRob3V0IHJldHJpZXZpbmcgZG9jdW1lbnRzIGZyb20gdGhlIGxvY2FsIHN0b3JlLlxyXG4gICAgICovXHJcbiAgICBMb2NhbERvY3VtZW50c1ZpZXcucHJvdG90eXBlLmdldExvY2FsVmlld09mRG9jdW1lbnRzID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCBiYXNlRG9jcykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubXV0YXRpb25RdWV1ZVxyXG4gICAgICAgICAgICAuZ2V0QWxsTXV0YXRpb25CYXRjaGVzQWZmZWN0aW5nRG9jdW1lbnRLZXlzKHRyYW5zYWN0aW9uLCBiYXNlRG9jcylcclxuICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKGJhdGNoZXMpIHtcclxuICAgICAgICAgICAgdmFyIGRvY3MgPSBfdGhpcy5hcHBseUxvY2FsTXV0YXRpb25zVG9Eb2N1bWVudHModHJhbnNhY3Rpb24sIGJhc2VEb2NzLCBiYXRjaGVzKTtcclxuICAgICAgICAgICAgdmFyIHJlc3VsdHMgPSBtYXliZURvY3VtZW50TWFwKCk7XHJcbiAgICAgICAgICAgIGRvY3MuZm9yRWFjaChmdW5jdGlvbiAoa2V5LCBtYXliZURvYykge1xyXG4gICAgICAgICAgICAgICAgLy8gVE9ETyhodHRwOi8vYi8zMjI3NTM3OCk6IERvbid0IGNvbmZsYXRlIG1pc3NpbmcgLyBkZWxldGVkLlxyXG4gICAgICAgICAgICAgICAgaWYgKCFtYXliZURvYykge1xyXG4gICAgICAgICAgICAgICAgICAgIG1heWJlRG9jID0gbmV3IE5vRG9jdW1lbnQoa2V5LCBTbmFwc2hvdFZlcnNpb24uZm9yRGVsZXRlZERvYygpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJlc3VsdHMgPSByZXN1bHRzLmluc2VydChrZXksIG1heWJlRG9jKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiByZXN1bHRzO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUGVyZm9ybXMgYSBxdWVyeSBhZ2FpbnN0IHRoZSBsb2NhbCB2aWV3IG9mIGFsbCBkb2N1bWVudHMuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHRyYW5zYWN0aW9uIFRoZSBwZXJzaXN0ZW5jZSB0cmFuc2FjdGlvbi5cclxuICAgICAqIEBwYXJhbSBxdWVyeSBUaGUgcXVlcnkgdG8gbWF0Y2ggZG9jdW1lbnRzIGFnYWluc3QuXHJcbiAgICAgKiBAcGFyYW0gc2luY2VSZWFkVGltZSBJZiBub3Qgc2V0IHRvIFNuYXBzaG90VmVyc2lvbi5NSU4sIHJldHVybiBvbmx5XHJcbiAgICAgKiAgICAgZG9jdW1lbnRzIHRoYXQgaGF2ZSBiZWVuIHJlYWQgc2luY2UgdGhpcyBzbmFwc2hvdCB2ZXJzaW9uIChleGNsdXNpdmUpLlxyXG4gICAgICovXHJcbiAgICBMb2NhbERvY3VtZW50c1ZpZXcucHJvdG90eXBlLmdldERvY3VtZW50c01hdGNoaW5nUXVlcnkgPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24sIHF1ZXJ5LCBzaW5jZVJlYWRUaW1lKSB7XHJcbiAgICAgICAgaWYgKHF1ZXJ5LmlzRG9jdW1lbnRRdWVyeSgpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldERvY3VtZW50c01hdGNoaW5nRG9jdW1lbnRRdWVyeSh0cmFuc2FjdGlvbiwgcXVlcnkucGF0aCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHF1ZXJ5LmlzQ29sbGVjdGlvbkdyb3VwUXVlcnkoKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXREb2N1bWVudHNNYXRjaGluZ0NvbGxlY3Rpb25Hcm91cFF1ZXJ5KHRyYW5zYWN0aW9uLCBxdWVyeSwgc2luY2VSZWFkVGltZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXREb2N1bWVudHNNYXRjaGluZ0NvbGxlY3Rpb25RdWVyeSh0cmFuc2FjdGlvbiwgcXVlcnksIHNpbmNlUmVhZFRpbWUpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBMb2NhbERvY3VtZW50c1ZpZXcucHJvdG90eXBlLmdldERvY3VtZW50c01hdGNoaW5nRG9jdW1lbnRRdWVyeSA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwgZG9jUGF0aCkge1xyXG4gICAgICAgIC8vIEp1c3QgZG8gYSBzaW1wbGUgZG9jdW1lbnQgbG9va3VwLlxyXG4gICAgICAgIHJldHVybiB0aGlzLmdldERvY3VtZW50KHRyYW5zYWN0aW9uLCBuZXcgRG9jdW1lbnRLZXkoZG9jUGF0aCkpLm5leHQoZnVuY3Rpb24gKG1heWJlRG9jKSB7XHJcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSBkb2N1bWVudE1hcCgpO1xyXG4gICAgICAgICAgICBpZiAobWF5YmVEb2MgaW5zdGFuY2VvZiBEb2N1bWVudCkge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gcmVzdWx0Lmluc2VydChtYXliZURvYy5rZXksIG1heWJlRG9jKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIExvY2FsRG9jdW1lbnRzVmlldy5wcm90b3R5cGUuZ2V0RG9jdW1lbnRzTWF0Y2hpbmdDb2xsZWN0aW9uR3JvdXBRdWVyeSA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwgcXVlcnksIHNpbmNlUmVhZFRpbWUpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIGFzc2VydChxdWVyeS5wYXRoLmlzRW1wdHkoKSwgJ0N1cnJlbnRseSB3ZSBvbmx5IHN1cHBvcnQgY29sbGVjdGlvbiBncm91cCBxdWVyaWVzIGF0IHRoZSByb290LicpO1xyXG4gICAgICAgIHZhciBjb2xsZWN0aW9uSWQgPSBxdWVyeS5jb2xsZWN0aW9uR3JvdXA7XHJcbiAgICAgICAgdmFyIHJlc3VsdHMgPSBkb2N1bWVudE1hcCgpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmluZGV4TWFuYWdlclxyXG4gICAgICAgICAgICAuZ2V0Q29sbGVjdGlvblBhcmVudHModHJhbnNhY3Rpb24sIGNvbGxlY3Rpb25JZClcclxuICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKHBhcmVudHMpIHtcclxuICAgICAgICAgICAgLy8gUGVyZm9ybSBhIGNvbGxlY3Rpb24gcXVlcnkgYWdhaW5zdCBlYWNoIHBhcmVudCB0aGF0IGNvbnRhaW5zIHRoZVxyXG4gICAgICAgICAgICAvLyBjb2xsZWN0aW9uSWQgYW5kIGFnZ3JlZ2F0ZSB0aGUgcmVzdWx0cy5cclxuICAgICAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5mb3JFYWNoKHBhcmVudHMsIGZ1bmN0aW9uIChwYXJlbnQpIHtcclxuICAgICAgICAgICAgICAgIHZhciBjb2xsZWN0aW9uUXVlcnkgPSBxdWVyeS5hc0NvbGxlY3Rpb25RdWVyeUF0UGF0aChwYXJlbnQuY2hpbGQoY29sbGVjdGlvbklkKSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuZ2V0RG9jdW1lbnRzTWF0Y2hpbmdDb2xsZWN0aW9uUXVlcnkodHJhbnNhY3Rpb24sIGNvbGxlY3Rpb25RdWVyeSwgc2luY2VSZWFkVGltZSkubmV4dChmdW5jdGlvbiAocikge1xyXG4gICAgICAgICAgICAgICAgICAgIHIuZm9yRWFjaChmdW5jdGlvbiAoa2V5LCBkb2MpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0cyA9IHJlc3VsdHMuaW5zZXJ0KGtleSwgZG9jKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KS5uZXh0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIHJlc3VsdHM7IH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIExvY2FsRG9jdW1lbnRzVmlldy5wcm90b3R5cGUuZ2V0RG9jdW1lbnRzTWF0Y2hpbmdDb2xsZWN0aW9uUXVlcnkgPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24sIHF1ZXJ5LCBzaW5jZVJlYWRUaW1lKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICAvLyBRdWVyeSB0aGUgcmVtb3RlIGRvY3VtZW50cyBhbmQgb3ZlcmxheSBtdXRhdGlvbnMuXHJcbiAgICAgICAgdmFyIHJlc3VsdHM7XHJcbiAgICAgICAgdmFyIG11dGF0aW9uQmF0Y2hlcztcclxuICAgICAgICByZXR1cm4gdGhpcy5yZW1vdGVEb2N1bWVudENhY2hlXHJcbiAgICAgICAgICAgIC5nZXREb2N1bWVudHNNYXRjaGluZ1F1ZXJ5KHRyYW5zYWN0aW9uLCBxdWVyeSwgc2luY2VSZWFkVGltZSlcclxuICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKHF1ZXJ5UmVzdWx0cykge1xyXG4gICAgICAgICAgICByZXN1bHRzID0gcXVlcnlSZXN1bHRzO1xyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXMubXV0YXRpb25RdWV1ZS5nZXRBbGxNdXRhdGlvbkJhdGNoZXNBZmZlY3RpbmdRdWVyeSh0cmFuc2FjdGlvbiwgcXVlcnkpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uIChtYXRjaGluZ011dGF0aW9uQmF0Y2hlcykge1xyXG4gICAgICAgICAgICBtdXRhdGlvbkJhdGNoZXMgPSBtYXRjaGluZ011dGF0aW9uQmF0Y2hlcztcclxuICAgICAgICAgICAgLy8gSXQgaXMgcG9zc2libGUgdGhhdCBhIFBhdGNoTXV0YXRpb24gY2FuIG1ha2UgYSBkb2N1bWVudCBtYXRjaCBhIHF1ZXJ5LCBldmVuIGlmXHJcbiAgICAgICAgICAgIC8vIHRoZSB2ZXJzaW9uIGluIHRoZSBSZW1vdGVEb2N1bWVudENhY2hlIGlzIG5vdCBhIG1hdGNoIHlldCAod2FpdGluZyBmb3Igc2VydmVyXHJcbiAgICAgICAgICAgIC8vIHRvIGFjaykuIFRvIGhhbmRsZSB0aGlzLCB3ZSBmaW5kIGFsbCBkb2N1bWVudCBrZXlzIGFmZmVjdGVkIGJ5IHRoZSBQYXRjaE11dGF0aW9uc1xyXG4gICAgICAgICAgICAvLyB0aGF0IGFyZSBub3QgaW4gYHJlc3VsdGAgeWV0LCBhbmQgYmFjayBmaWxsIHRoZW0gdmlhIGByZW1vdGVEb2N1bWVudENhY2hlLmdldEVudHJpZXNgLFxyXG4gICAgICAgICAgICAvLyBvdGhlcndpc2UgdGhvc2UgYFBhdGNoTXV0YXRpb25zYCB3aWxsIGJlIGlnbm9yZWQgYmVjYXVzZSBubyBiYXNlIGRvY3VtZW50IGNhbiBiZSBmb3VuZCxcclxuICAgICAgICAgICAgLy8gYW5kIGxlYWQgdG8gbWlzc2luZyByZXN1bHQgZm9yIHRoZSBxdWVyeS5cclxuICAgICAgICAgICAgcmV0dXJuIF90aGlzLmFkZE1pc3NpbmdCYXNlRG9jdW1lbnRzKHRyYW5zYWN0aW9uLCBtdXRhdGlvbkJhdGNoZXMsIHJlc3VsdHMpLm5leHQoZnVuY3Rpb24gKG1lcmdlZERvY3VtZW50cykge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0cyA9IG1lcmdlZERvY3VtZW50cztcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgbXV0YXRpb25CYXRjaGVzXzEgPSBtdXRhdGlvbkJhdGNoZXM7IF9pIDwgbXV0YXRpb25CYXRjaGVzXzEubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJhdGNoID0gbXV0YXRpb25CYXRjaGVzXzFbX2ldO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIF9hID0gMCwgX2IgPSBiYXRjaC5tdXRhdGlvbnM7IF9hIDwgX2IubGVuZ3RoOyBfYSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtdXRhdGlvbiA9IF9iW19hXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGtleSA9IG11dGF0aW9uLmtleTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJhc2VEb2MgPSByZXN1bHRzLmdldChrZXkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbXV0YXRlZERvYyA9IG11dGF0aW9uLmFwcGx5VG9Mb2NhbFZpZXcoYmFzZURvYywgYmFzZURvYywgYmF0Y2gubG9jYWxXcml0ZVRpbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobXV0YXRlZERvYyBpbnN0YW5jZW9mIERvY3VtZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRzID0gcmVzdWx0cy5pbnNlcnQoa2V5LCBtdXRhdGVkRG9jKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdHMgPSByZXN1bHRzLnJlbW92ZShrZXkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAubmV4dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIC8vIEZpbmFsbHksIGZpbHRlciBvdXQgYW55IGRvY3VtZW50cyB0aGF0IGRvbid0IGFjdHVhbGx5IG1hdGNoXHJcbiAgICAgICAgICAgIC8vIHRoZSBxdWVyeS5cclxuICAgICAgICAgICAgcmVzdWx0cy5mb3JFYWNoKGZ1bmN0aW9uIChrZXksIGRvYykge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFxdWVyeS5tYXRjaGVzKGRvYykpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHRzID0gcmVzdWx0cy5yZW1vdmUoa2V5KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiByZXN1bHRzO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIExvY2FsRG9jdW1lbnRzVmlldy5wcm90b3R5cGUuYWRkTWlzc2luZ0Jhc2VEb2N1bWVudHMgPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24sIG1hdGNoaW5nTXV0YXRpb25CYXRjaGVzLCBleGlzdGluZ0RvY3VtZW50cykge1xyXG4gICAgICAgIHZhciBtaXNzaW5nQmFzZURvY0VudHJpZXNGb3JQYXRjaGluZyA9IGRvY3VtZW50S2V5U2V0KCk7XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBtYXRjaGluZ011dGF0aW9uQmF0Y2hlc18xID0gbWF0Y2hpbmdNdXRhdGlvbkJhdGNoZXM7IF9pIDwgbWF0Y2hpbmdNdXRhdGlvbkJhdGNoZXNfMS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgdmFyIGJhdGNoID0gbWF0Y2hpbmdNdXRhdGlvbkJhdGNoZXNfMVtfaV07XHJcbiAgICAgICAgICAgIGZvciAodmFyIF9hID0gMCwgX2IgPSBiYXRjaC5tdXRhdGlvbnM7IF9hIDwgX2IubGVuZ3RoOyBfYSsrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbXV0YXRpb24gPSBfYltfYV07XHJcbiAgICAgICAgICAgICAgICBpZiAobXV0YXRpb24gaW5zdGFuY2VvZiBQYXRjaE11dGF0aW9uICYmXHJcbiAgICAgICAgICAgICAgICAgICAgZXhpc3RpbmdEb2N1bWVudHMuZ2V0KG11dGF0aW9uLmtleSkgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICBtaXNzaW5nQmFzZURvY0VudHJpZXNGb3JQYXRjaGluZyA9IG1pc3NpbmdCYXNlRG9jRW50cmllc0ZvclBhdGNoaW5nLmFkZChtdXRhdGlvbi5rZXkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBtZXJnZWREb2N1bWVudHMgPSBleGlzdGluZ0RvY3VtZW50cztcclxuICAgICAgICByZXR1cm4gdGhpcy5yZW1vdGVEb2N1bWVudENhY2hlXHJcbiAgICAgICAgICAgIC5nZXRFbnRyaWVzKHRyYW5zYWN0aW9uLCBtaXNzaW5nQmFzZURvY0VudHJpZXNGb3JQYXRjaGluZylcclxuICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKG1pc3NpbmdCYXNlRG9jcykge1xyXG4gICAgICAgICAgICBtaXNzaW5nQmFzZURvY3MuZm9yRWFjaChmdW5jdGlvbiAoa2V5LCBkb2MpIHtcclxuICAgICAgICAgICAgICAgIGlmIChkb2MgIT09IG51bGwgJiYgZG9jIGluc3RhbmNlb2YgRG9jdW1lbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICBtZXJnZWREb2N1bWVudHMgPSBtZXJnZWREb2N1bWVudHMuaW5zZXJ0KGtleSwgZG9jKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiBtZXJnZWREb2N1bWVudHM7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIExvY2FsRG9jdW1lbnRzVmlldztcclxufSgpKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBBIGNvbGxlY3Rpb24gb2YgcmVmZXJlbmNlcyB0byBhIGRvY3VtZW50IGZyb20gc29tZSBraW5kIG9mIG51bWJlcmVkIGVudGl0eVxyXG4gKiAoZWl0aGVyIGEgdGFyZ2V0IElEIG9yIGJhdGNoIElEKS4gQXMgcmVmZXJlbmNlcyBhcmUgYWRkZWQgdG8gb3IgcmVtb3ZlZCBmcm9tXHJcbiAqIHRoZSBzZXQgY29ycmVzcG9uZGluZyBldmVudHMgYXJlIGVtaXR0ZWQgdG8gYSByZWdpc3RlcmVkIGdhcmJhZ2UgY29sbGVjdG9yLlxyXG4gKlxyXG4gKiBFYWNoIHJlZmVyZW5jZSBpcyByZXByZXNlbnRlZCBieSBhIERvY3VtZW50UmVmZXJlbmNlIG9iamVjdC4gRWFjaCBvZiB0aGVtXHJcbiAqIGNvbnRhaW5zIGVub3VnaCBpbmZvcm1hdGlvbiB0byB1bmlxdWVseSBpZGVudGlmeSB0aGUgcmVmZXJlbmNlLiBUaGV5IGFyZSBhbGxcclxuICogc3RvcmVkIHByaW1hcmlseSBpbiBhIHNldCBzb3J0ZWQgYnkga2V5LiBBIGRvY3VtZW50IGlzIGNvbnNpZGVyZWQgZ2FyYmFnZSBpZlxyXG4gKiB0aGVyZSdzIG5vIHJlZmVyZW5jZXMgaW4gdGhhdCBzZXQgKHRoaXMgY2FuIGJlIGVmZmljaWVudGx5IGNoZWNrZWQgdGhhbmtzIHRvXHJcbiAqIHNvcnRpbmcgYnkga2V5KS5cclxuICpcclxuICogUmVmZXJlbmNlU2V0IGFsc28ga2VlcHMgYSBzZWNvbmRhcnkgc2V0IHRoYXQgY29udGFpbnMgcmVmZXJlbmNlcyBzb3J0ZWQgYnlcclxuICogSURzLiBUaGlzIG9uZSBpcyB1c2VkIHRvIGVmZmljaWVudGx5IGltcGxlbWVudCByZW1vdmFsIG9mIGFsbCByZWZlcmVuY2VzIGJ5XHJcbiAqIHNvbWUgdGFyZ2V0IElELlxyXG4gKi9cclxudmFyIFJlZmVyZW5jZVNldCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFJlZmVyZW5jZVNldCgpIHtcclxuICAgICAgICAvLyBBIHNldCBvZiBvdXRzdGFuZGluZyByZWZlcmVuY2VzIHRvIGEgZG9jdW1lbnQgc29ydGVkIGJ5IGtleS5cclxuICAgICAgICB0aGlzLnJlZnNCeUtleSA9IG5ldyBTb3J0ZWRTZXQoRG9jUmVmZXJlbmNlLmNvbXBhcmVCeUtleSk7XHJcbiAgICAgICAgLy8gQSBzZXQgb2Ygb3V0c3RhbmRpbmcgcmVmZXJlbmNlcyB0byBhIGRvY3VtZW50IHNvcnRlZCBieSB0YXJnZXQgaWQuXHJcbiAgICAgICAgdGhpcy5yZWZzQnlUYXJnZXQgPSBuZXcgU29ydGVkU2V0KERvY1JlZmVyZW5jZS5jb21wYXJlQnlUYXJnZXRJZCk7XHJcbiAgICB9XHJcbiAgICAvKiogUmV0dXJucyB0cnVlIGlmIHRoZSByZWZlcmVuY2Ugc2V0IGNvbnRhaW5zIG5vIHJlZmVyZW5jZXMuICovXHJcbiAgICBSZWZlcmVuY2VTZXQucHJvdG90eXBlLmlzRW1wdHkgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucmVmc0J5S2V5LmlzRW1wdHkoKTtcclxuICAgIH07XHJcbiAgICAvKiogQWRkcyBhIHJlZmVyZW5jZSB0byB0aGUgZ2l2ZW4gZG9jdW1lbnQga2V5IGZvciB0aGUgZ2l2ZW4gSUQuICovXHJcbiAgICBSZWZlcmVuY2VTZXQucHJvdG90eXBlLmFkZFJlZmVyZW5jZSA9IGZ1bmN0aW9uIChrZXksIGlkKSB7XHJcbiAgICAgICAgdmFyIHJlZiA9IG5ldyBEb2NSZWZlcmVuY2Uoa2V5LCBpZCk7XHJcbiAgICAgICAgdGhpcy5yZWZzQnlLZXkgPSB0aGlzLnJlZnNCeUtleS5hZGQocmVmKTtcclxuICAgICAgICB0aGlzLnJlZnNCeVRhcmdldCA9IHRoaXMucmVmc0J5VGFyZ2V0LmFkZChyZWYpO1xyXG4gICAgfTtcclxuICAgIC8qKiBBZGQgcmVmZXJlbmNlcyB0byB0aGUgZ2l2ZW4gZG9jdW1lbnQga2V5cyBmb3IgdGhlIGdpdmVuIElELiAqL1xyXG4gICAgUmVmZXJlbmNlU2V0LnByb3RvdHlwZS5hZGRSZWZlcmVuY2VzID0gZnVuY3Rpb24gKGtleXMsIGlkKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBrZXlzLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyByZXR1cm4gX3RoaXMuYWRkUmVmZXJlbmNlKGtleSwgaWQpOyB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJlbW92ZXMgYSByZWZlcmVuY2UgdG8gdGhlIGdpdmVuIGRvY3VtZW50IGtleSBmb3IgdGhlIGdpdmVuXHJcbiAgICAgKiBJRC5cclxuICAgICAqL1xyXG4gICAgUmVmZXJlbmNlU2V0LnByb3RvdHlwZS5yZW1vdmVSZWZlcmVuY2UgPSBmdW5jdGlvbiAoa2V5LCBpZCkge1xyXG4gICAgICAgIHRoaXMucmVtb3ZlUmVmKG5ldyBEb2NSZWZlcmVuY2Uoa2V5LCBpZCkpO1xyXG4gICAgfTtcclxuICAgIFJlZmVyZW5jZVNldC5wcm90b3R5cGUucmVtb3ZlUmVmZXJlbmNlcyA9IGZ1bmN0aW9uIChrZXlzLCBpZCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAga2V5cy5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgcmV0dXJuIF90aGlzLnJlbW92ZVJlZmVyZW5jZShrZXksIGlkKTsgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBDbGVhcnMgYWxsIHJlZmVyZW5jZXMgd2l0aCBhIGdpdmVuIElELiBDYWxscyByZW1vdmVSZWYoKSBmb3IgZWFjaCBrZXlcclxuICAgICAqIHJlbW92ZWQuXHJcbiAgICAgKi9cclxuICAgIFJlZmVyZW5jZVNldC5wcm90b3R5cGUucmVtb3ZlUmVmZXJlbmNlc0ZvcklkID0gZnVuY3Rpb24gKGlkKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgZW1wdHlLZXkgPSBEb2N1bWVudEtleS5FTVBUWTtcclxuICAgICAgICB2YXIgc3RhcnRSZWYgPSBuZXcgRG9jUmVmZXJlbmNlKGVtcHR5S2V5LCBpZCk7XHJcbiAgICAgICAgdmFyIGVuZFJlZiA9IG5ldyBEb2NSZWZlcmVuY2UoZW1wdHlLZXksIGlkICsgMSk7XHJcbiAgICAgICAgdmFyIGtleXMgPSBbXTtcclxuICAgICAgICB0aGlzLnJlZnNCeVRhcmdldC5mb3JFYWNoSW5SYW5nZShbc3RhcnRSZWYsIGVuZFJlZl0sIGZ1bmN0aW9uIChyZWYpIHtcclxuICAgICAgICAgICAgX3RoaXMucmVtb3ZlUmVmKHJlZik7XHJcbiAgICAgICAgICAgIGtleXMucHVzaChyZWYua2V5KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4ga2V5cztcclxuICAgIH07XHJcbiAgICBSZWZlcmVuY2VTZXQucHJvdG90eXBlLnJlbW92ZUFsbFJlZmVyZW5jZXMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB0aGlzLnJlZnNCeUtleS5mb3JFYWNoKGZ1bmN0aW9uIChyZWYpIHsgcmV0dXJuIF90aGlzLnJlbW92ZVJlZihyZWYpOyB9KTtcclxuICAgIH07XHJcbiAgICBSZWZlcmVuY2VTZXQucHJvdG90eXBlLnJlbW92ZVJlZiA9IGZ1bmN0aW9uIChyZWYpIHtcclxuICAgICAgICB0aGlzLnJlZnNCeUtleSA9IHRoaXMucmVmc0J5S2V5LmRlbGV0ZShyZWYpO1xyXG4gICAgICAgIHRoaXMucmVmc0J5VGFyZ2V0ID0gdGhpcy5yZWZzQnlUYXJnZXQuZGVsZXRlKHJlZik7XHJcbiAgICB9O1xyXG4gICAgUmVmZXJlbmNlU2V0LnByb3RvdHlwZS5yZWZlcmVuY2VzRm9ySWQgPSBmdW5jdGlvbiAoaWQpIHtcclxuICAgICAgICB2YXIgZW1wdHlLZXkgPSBEb2N1bWVudEtleS5FTVBUWTtcclxuICAgICAgICB2YXIgc3RhcnRSZWYgPSBuZXcgRG9jUmVmZXJlbmNlKGVtcHR5S2V5LCBpZCk7XHJcbiAgICAgICAgdmFyIGVuZFJlZiA9IG5ldyBEb2NSZWZlcmVuY2UoZW1wdHlLZXksIGlkICsgMSk7XHJcbiAgICAgICAgdmFyIGtleXMgPSBkb2N1bWVudEtleVNldCgpO1xyXG4gICAgICAgIHRoaXMucmVmc0J5VGFyZ2V0LmZvckVhY2hJblJhbmdlKFtzdGFydFJlZiwgZW5kUmVmXSwgZnVuY3Rpb24gKHJlZikge1xyXG4gICAgICAgICAgICBrZXlzID0ga2V5cy5hZGQocmVmLmtleSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIGtleXM7XHJcbiAgICB9O1xyXG4gICAgUmVmZXJlbmNlU2V0LnByb3RvdHlwZS5jb250YWluc0tleSA9IGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICB2YXIgcmVmID0gbmV3IERvY1JlZmVyZW5jZShrZXksIDApO1xyXG4gICAgICAgIHZhciBmaXJzdFJlZiA9IHRoaXMucmVmc0J5S2V5LmZpcnN0QWZ0ZXJPckVxdWFsKHJlZik7XHJcbiAgICAgICAgcmV0dXJuIGZpcnN0UmVmICE9PSBudWxsICYmIGtleS5pc0VxdWFsKGZpcnN0UmVmLmtleSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFJlZmVyZW5jZVNldDtcclxufSgpKTtcclxudmFyIERvY1JlZmVyZW5jZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIERvY1JlZmVyZW5jZShrZXksIHRhcmdldE9yQmF0Y2hJZCkge1xyXG4gICAgICAgIHRoaXMua2V5ID0ga2V5O1xyXG4gICAgICAgIHRoaXMudGFyZ2V0T3JCYXRjaElkID0gdGFyZ2V0T3JCYXRjaElkO1xyXG4gICAgfVxyXG4gICAgLyoqIENvbXBhcmUgYnkga2V5IHRoZW4gYnkgSUQgKi9cclxuICAgIERvY1JlZmVyZW5jZS5jb21wYXJlQnlLZXkgPSBmdW5jdGlvbiAobGVmdCwgcmlnaHQpIHtcclxuICAgICAgICByZXR1cm4gKERvY3VtZW50S2V5LmNvbXBhcmF0b3IobGVmdC5rZXksIHJpZ2h0LmtleSkgfHxcclxuICAgICAgICAgICAgcHJpbWl0aXZlQ29tcGFyYXRvcihsZWZ0LnRhcmdldE9yQmF0Y2hJZCwgcmlnaHQudGFyZ2V0T3JCYXRjaElkKSk7XHJcbiAgICB9O1xyXG4gICAgLyoqIENvbXBhcmUgYnkgSUQgdGhlbiBieSBrZXkgKi9cclxuICAgIERvY1JlZmVyZW5jZS5jb21wYXJlQnlUYXJnZXRJZCA9IGZ1bmN0aW9uIChsZWZ0LCByaWdodCkge1xyXG4gICAgICAgIHJldHVybiAocHJpbWl0aXZlQ29tcGFyYXRvcihsZWZ0LnRhcmdldE9yQmF0Y2hJZCwgcmlnaHQudGFyZ2V0T3JCYXRjaElkKSB8fFxyXG4gICAgICAgICAgICBEb2N1bWVudEtleS5jb21wYXJhdG9yKGxlZnQua2V5LCByaWdodC5rZXkpKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gRG9jUmVmZXJlbmNlO1xyXG59KCkpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxudmFyIExPR19UQUckMiA9ICdMb2NhbFN0b3JlJztcclxuLyoqXHJcbiAqIExvY2FsIHN0b3JhZ2UgaW4gdGhlIEZpcmVzdG9yZSBjbGllbnQuIENvb3JkaW5hdGVzIHBlcnNpc3RlbmNlIGNvbXBvbmVudHNcclxuICogbGlrZSB0aGUgbXV0YXRpb24gcXVldWUgYW5kIHJlbW90ZSBkb2N1bWVudCBjYWNoZSB0byBwcmVzZW50IGFcclxuICogbGF0ZW5jeS1jb21wZW5zYXRlZCB2aWV3IG9mIHN0b3JlZCBkYXRhLlxyXG4gKlxyXG4gKiBUaGUgTG9jYWxTdG9yZSBpcyByZXNwb25zaWJsZSBmb3IgYWNjZXB0aW5nIG11dGF0aW9ucyBmcm9tIHRoZSBTeW5jIEVuZ2luZS5cclxuICogV3JpdGVzIGZyb20gdGhlIGNsaWVudCBhcmUgcHV0IGludG8gYSBxdWV1ZSBhcyBwcm92aXNpb25hbCBNdXRhdGlvbnMgdW50aWxcclxuICogdGhleSBhcmUgcHJvY2Vzc2VkIGJ5IHRoZSBSZW1vdGVTdG9yZSBhbmQgY29uZmlybWVkIGFzIGhhdmluZyBiZWVuIHdyaXR0ZW5cclxuICogdG8gdGhlIHNlcnZlci5cclxuICpcclxuICogVGhlIGxvY2FsIHN0b3JlIHByb3ZpZGVzIHRoZSBsb2NhbCB2ZXJzaW9uIG9mIGRvY3VtZW50cyB0aGF0IGhhdmUgYmVlblxyXG4gKiBtb2RpZmllZCBsb2NhbGx5LiBJdCBtYWludGFpbnMgdGhlIGNvbnN0cmFpbnQ6XHJcbiAqXHJcbiAqICAgTG9jYWxEb2N1bWVudCA9IFJlbW90ZURvY3VtZW50ICsgQWN0aXZlKExvY2FsTXV0YXRpb25zKVxyXG4gKlxyXG4gKiAoQWN0aXZlIG11dGF0aW9ucyBhcmUgdGhvc2UgdGhhdCBhcmUgZW5xdWV1ZWQgYW5kIGhhdmUgbm90IGJlZW4gcHJldmlvdXNseVxyXG4gKiBhY2tub3dsZWRnZWQgb3IgcmVqZWN0ZWQpLlxyXG4gKlxyXG4gKiBUaGUgUmVtb3RlRG9jdW1lbnQgKFwiZ3JvdW5kIHRydXRoXCIpIHN0YXRlIGlzIHByb3ZpZGVkIHZpYSB0aGVcclxuICogYXBwbHlDaGFuZ2VCYXRjaCBtZXRob2QuIEl0IHdpbGwgYmUgc29tZSB2ZXJzaW9uIG9mIGEgc2VydmVyLXByb3ZpZGVkXHJcbiAqIGRvY3VtZW50IE9SIHdpbGwgYmUgYSBzZXJ2ZXItcHJvdmlkZWQgZG9jdW1lbnQgUExVUyBhY2tub3dsZWRnZWQgbXV0YXRpb25zOlxyXG4gKlxyXG4gKiAgIFJlbW90ZURvY3VtZW50JyA9IFJlbW90ZURvY3VtZW50ICsgQWNrbm93bGVkZ2VkKExvY2FsTXV0YXRpb25zKVxyXG4gKlxyXG4gKiBOb3RlIHRoYXQgdGhpcyBcImRpcnR5XCIgdmVyc2lvbiBvZiBhIFJlbW90ZURvY3VtZW50IHdpbGwgbm90IGJlIGlkZW50aWNhbCB0byBhXHJcbiAqIHNlcnZlciBiYXNlIHZlcnNpb24sIHNpbmNlIGl0IGhhcyBMb2NhbE11dGF0aW9ucyBhZGRlZCB0byBpdCBwZW5kaW5nIGdldHRpbmdcclxuICogYW4gYXV0aG9yaXRhdGl2ZSBjb3B5IGZyb20gdGhlIHNlcnZlci5cclxuICpcclxuICogU2luY2UgTG9jYWxNdXRhdGlvbnMgY2FuIGJlIHJlamVjdGVkIGJ5IHRoZSBzZXJ2ZXIsIHdlIGhhdmUgdG8gYmUgYWJsZSB0b1xyXG4gKiByZXZlcnQgYSBMb2NhbE11dGF0aW9uIHRoYXQgaGFzIGFscmVhZHkgYmVlbiBhcHBsaWVkIHRvIHRoZSBMb2NhbERvY3VtZW50XHJcbiAqICh0eXBpY2FsbHkgZG9uZSBieSByZXBsYXlpbmcgYWxsIHJlbWFpbmluZyBMb2NhbE11dGF0aW9ucyB0byB0aGVcclxuICogUmVtb3RlRG9jdW1lbnQgdG8gcmUtYXBwbHkpLlxyXG4gKlxyXG4gKiBUaGUgTG9jYWxTdG9yZSBpcyByZXNwb25zaWJsZSBmb3IgdGhlIGdhcmJhZ2UgY29sbGVjdGlvbiBvZiB0aGUgZG9jdW1lbnRzIGl0XHJcbiAqIGNvbnRhaW5zLiBGb3Igbm93LCBpdCBldmVyeSBkb2MgcmVmZXJlbmNlZCBieSBhIHZpZXcsIHRoZSBtdXRhdGlvbiBxdWV1ZSwgb3JcclxuICogdGhlIFJlbW90ZVN0b3JlLlxyXG4gKlxyXG4gKiBJdCBhbHNvIG1haW50YWlucyB0aGUgcGVyc2lzdGVuY2Ugb2YgbWFwcGluZyBxdWVyaWVzIHRvIHJlc3VtZSB0b2tlbnMgYW5kXHJcbiAqIHRhcmdldCBpZHMuIEl0IG5lZWRzIHRvIGtub3cgdGhpcyBkYXRhIGFib3V0IHF1ZXJpZXMgdG8gcHJvcGVybHkga25vdyB3aGF0XHJcbiAqIGRvY3MgaXQgd291bGQgYmUgYWxsb3dlZCB0byBnYXJiYWdlIGNvbGxlY3QuXHJcbiAqXHJcbiAqIFRoZSBMb2NhbFN0b3JlIG11c3QgYmUgYWJsZSB0byBlZmZpY2llbnRseSBleGVjdXRlIHF1ZXJpZXMgYWdhaW5zdCBpdHMgbG9jYWxcclxuICogY2FjaGUgb2YgdGhlIGRvY3VtZW50cywgdG8gcHJvdmlkZSB0aGUgaW5pdGlhbCBzZXQgb2YgcmVzdWx0cyBiZWZvcmUgYW55XHJcbiAqIHJlbW90ZSBjaGFuZ2VzIGhhdmUgYmVlbiByZWNlaXZlZC5cclxuICpcclxuICogTm90ZTogSW4gVHlwZVNjcmlwdCwgbW9zdCBtZXRob2RzIHJldHVybiBQcm9taXNlcyBzaW5jZSB0aGUgaW1wbGVtZW50YXRpb25cclxuICogbWF5IHJlbHkgb24gZmV0Y2hpbmcgZGF0YSBmcm9tIEluZGV4ZWREQiB3aGljaCBpcyBhc3luYy5cclxuICogVGhlc2UgUHJvbWlzZXMgd2lsbCBvbmx5IGJlIHJlamVjdGVkIG9uIGFuIEkvTyBlcnJvciBvciBvdGhlciBpbnRlcm5hbFxyXG4gKiAodW5leHBlY3RlZCkgZmFpbHVyZSAoZS5nLiBmYWlsZWQgYXNzZXJ0KSBhbmQgYWx3YXlzIHJlcHJlc2VudCBhblxyXG4gKiB1bnJlY292ZXJhYmxlIGVycm9yIChzaG91bGQgYmUgY2F1Z2h0IC8gcmVwb3J0ZWQgYnkgdGhlIGFzeW5jX3F1ZXVlKS5cclxuICovXHJcbnZhciBMb2NhbFN0b3JlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gTG9jYWxTdG9yZShcclxuICAgIC8qKiBNYW5hZ2VzIG91ciBpbi1tZW1vcnkgb3IgZHVyYWJsZSBwZXJzaXN0ZW5jZS4gKi9cclxuICAgIHBlcnNpc3RlbmNlLCBxdWVyeUVuZ2luZSwgaW5pdGlhbFVzZXIpIHtcclxuICAgICAgICB0aGlzLnBlcnNpc3RlbmNlID0gcGVyc2lzdGVuY2U7XHJcbiAgICAgICAgdGhpcy5xdWVyeUVuZ2luZSA9IHF1ZXJ5RW5naW5lO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRoZSBzZXQgb2YgZG9jdW1lbnQgcmVmZXJlbmNlcyBtYWludGFpbmVkIGJ5IGFueSBsb2NhbCB2aWV3cy5cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLmxvY2FsVmlld1JlZmVyZW5jZXMgPSBuZXcgUmVmZXJlbmNlU2V0KCk7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogTWFwcyBhIHRhcmdldElEIHRvIGRhdGEgYWJvdXQgaXRzIHRhcmdldC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFBPUlRJTkcgTk9URTogV2UgYXJlIHVzaW5nIGFuIGltbXV0YWJsZSBkYXRhIHN0cnVjdHVyZSBvbiBXZWIgdG8gbWFrZSByZS1ydW5zXHJcbiAgICAgICAgICogb2YgYGFwcGx5UmVtb3RlRXZlbnQoKWAgaWRlbXBvdGVudC5cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLnRhcmdldERhdGFCeVRhcmdldCA9IG5ldyBTb3J0ZWRNYXAocHJpbWl0aXZlQ29tcGFyYXRvcik7XHJcbiAgICAgICAgLyoqIE1hcHMgYSB0YXJnZXQgdG8gaXRzIHRhcmdldElELiAqL1xyXG4gICAgICAgIC8vIFRPRE8od3VhbmR5KTogRXZhbHVhdGUgaWYgVGFyZ2V0SWQgY2FuIGJlIHBhcnQgb2YgVGFyZ2V0LlxyXG4gICAgICAgIHRoaXMudGFyZ2V0SWRCeVRhcmdldCA9IG5ldyBPYmplY3RNYXAoZnVuY3Rpb24gKHQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHQuY2Fub25pY2FsSWQoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBUaGUgcmVhZCB0aW1lIG9mIHRoZSBsYXN0IGVudHJ5IHByb2Nlc3NlZCBieSBgZ2V0TmV3RG9jdW1lbnRDaGFuZ2VzKClgLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogUE9SVElORyBOT1RFOiBUaGlzIGlzIG9ubHkgdXNlZCBmb3IgbXVsdGktdGFiIHN5bmNocm9uaXphdGlvbi5cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLmxhc3REb2N1bWVudENoYW5nZVJlYWRUaW1lID0gU25hcHNob3RWZXJzaW9uLk1JTjtcclxuICAgICAgICBhc3NlcnQocGVyc2lzdGVuY2Uuc3RhcnRlZCwgJ0xvY2FsU3RvcmUgd2FzIHBhc3NlZCBhbiB1bnN0YXJ0ZWQgcGVyc2lzdGVuY2UgaW1wbGVtZW50YXRpb24nKTtcclxuICAgICAgICB0aGlzLnBlcnNpc3RlbmNlLnJlZmVyZW5jZURlbGVnYXRlLnNldEluTWVtb3J5UGlucyh0aGlzLmxvY2FsVmlld1JlZmVyZW5jZXMpO1xyXG4gICAgICAgIHRoaXMubXV0YXRpb25RdWV1ZSA9IHBlcnNpc3RlbmNlLmdldE11dGF0aW9uUXVldWUoaW5pdGlhbFVzZXIpO1xyXG4gICAgICAgIHRoaXMucmVtb3RlRG9jdW1lbnRzID0gcGVyc2lzdGVuY2UuZ2V0UmVtb3RlRG9jdW1lbnRDYWNoZSgpO1xyXG4gICAgICAgIHRoaXMudGFyZ2V0Q2FjaGUgPSBwZXJzaXN0ZW5jZS5nZXRUYXJnZXRDYWNoZSgpO1xyXG4gICAgICAgIHRoaXMubG9jYWxEb2N1bWVudHMgPSBuZXcgTG9jYWxEb2N1bWVudHNWaWV3KHRoaXMucmVtb3RlRG9jdW1lbnRzLCB0aGlzLm11dGF0aW9uUXVldWUsIHRoaXMucGVyc2lzdGVuY2UuZ2V0SW5kZXhNYW5hZ2VyKCkpO1xyXG4gICAgICAgIHRoaXMucXVlcnlFbmdpbmUuc2V0TG9jYWxEb2N1bWVudHNWaWV3KHRoaXMubG9jYWxEb2N1bWVudHMpO1xyXG4gICAgfVxyXG4gICAgLyoqIFN0YXJ0cyB0aGUgTG9jYWxTdG9yZS4gKi9cclxuICAgIExvY2FsU3RvcmUucHJvdG90eXBlLnN0YXJ0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnN5bmNocm9uaXplTGFzdERvY3VtZW50Q2hhbmdlUmVhZFRpbWUoKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFRlbGxzIHRoZSBMb2NhbFN0b3JlIHRoYXQgdGhlIGN1cnJlbnRseSBhdXRoZW50aWNhdGVkIHVzZXIgaGFzIGNoYW5nZWQuXHJcbiAgICAgKlxyXG4gICAgICogSW4gcmVzcG9uc2UgdGhlIGxvY2FsIHN0b3JlIHN3aXRjaGVzIHRoZSBtdXRhdGlvbiBxdWV1ZSB0byB0aGUgbmV3IHVzZXIgYW5kXHJcbiAgICAgKiByZXR1cm5zIGFueSByZXN1bHRpbmcgZG9jdW1lbnQgY2hhbmdlcy5cclxuICAgICAqL1xyXG4gICAgLy8gUE9SVElORyBOT1RFOiBBbmRyb2lkIGFuZCBpT1Mgb25seSByZXR1cm4gdGhlIGRvY3VtZW50cyBhZmZlY3RlZCBieSB0aGVcclxuICAgIC8vIGNoYW5nZS5cclxuICAgIExvY2FsU3RvcmUucHJvdG90eXBlLmhhbmRsZVVzZXJDaGFuZ2UgPSBmdW5jdGlvbiAodXNlcikge1xyXG4gICAgICAgIHJldHVybiB0c2xpYi5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIG5ld011dGF0aW9uUXVldWUsIG5ld0xvY2FsRG9jdW1lbnRzLCByZXN1bHQ7XHJcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYi5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld011dGF0aW9uUXVldWUgPSB0aGlzLm11dGF0aW9uUXVldWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld0xvY2FsRG9jdW1lbnRzID0gdGhpcy5sb2NhbERvY3VtZW50cztcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbignSGFuZGxlIHVzZXIgY2hhbmdlJywgJ3JlYWRvbmx5LWlkZW1wb3RlbnQnLCBmdW5jdGlvbiAodHhuKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU3dhcCBvdXQgdGhlIG11dGF0aW9uIHF1ZXVlLCBncmFiYmluZyB0aGUgcGVuZGluZyBtdXRhdGlvbiBiYXRjaGVzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYmVmb3JlIGFuZCBhZnRlci5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgb2xkQmF0Y2hlcztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMubXV0YXRpb25RdWV1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZ2V0QWxsTXV0YXRpb25CYXRjaGVzKHR4bilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKHByb21pc2VkT2xkQmF0Y2hlcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbGRCYXRjaGVzID0gcHJvbWlzZWRPbGRCYXRjaGVzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdNdXRhdGlvblF1ZXVlID0gX3RoaXMucGVyc2lzdGVuY2UuZ2V0TXV0YXRpb25RdWV1ZSh1c2VyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVjcmVhdGUgb3VyIExvY2FsRG9jdW1lbnRzVmlldyB1c2luZyB0aGUgbmV3XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE11dGF0aW9uUXVldWUuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld0xvY2FsRG9jdW1lbnRzID0gbmV3IExvY2FsRG9jdW1lbnRzVmlldyhfdGhpcy5yZW1vdGVEb2N1bWVudHMsIG5ld011dGF0aW9uUXVldWUsIF90aGlzLnBlcnNpc3RlbmNlLmdldEluZGV4TWFuYWdlcigpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ld011dGF0aW9uUXVldWUuZ2V0QWxsTXV0YXRpb25CYXRjaGVzKHR4bik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKG5ld0JhdGNoZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlbW92ZWRCYXRjaElkcyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYWRkZWRCYXRjaElkcyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBVbmlvbiB0aGUgb2xkL25ldyBjaGFuZ2VkIGtleXMuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjaGFuZ2VkS2V5cyA9IGRvY3VtZW50S2V5U2V0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgb2xkQmF0Y2hlc18xID0gb2xkQmF0Y2hlczsgX2kgPCBvbGRCYXRjaGVzXzEubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYmF0Y2ggPSBvbGRCYXRjaGVzXzFbX2ldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3ZlZEJhdGNoSWRzLnB1c2goYmF0Y2guYmF0Y2hJZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBfYSA9IDAsIF9iID0gYmF0Y2gubXV0YXRpb25zOyBfYSA8IF9iLmxlbmd0aDsgX2ErKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtdXRhdGlvbiA9IF9iW19hXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VkS2V5cyA9IGNoYW5nZWRLZXlzLmFkZChtdXRhdGlvbi5rZXkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIF9jID0gMCwgbmV3QmF0Y2hlc18xID0gbmV3QmF0Y2hlczsgX2MgPCBuZXdCYXRjaGVzXzEubGVuZ3RoOyBfYysrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYmF0Y2ggPSBuZXdCYXRjaGVzXzFbX2NdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkZWRCYXRjaElkcy5wdXNoKGJhdGNoLmJhdGNoSWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgX2QgPSAwLCBfZSA9IGJhdGNoLm11dGF0aW9uczsgX2QgPCBfZS5sZW5ndGg7IF9kKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbXV0YXRpb24gPSBfZVtfZF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlZEtleXMgPSBjaGFuZ2VkS2V5cy5hZGQobXV0YXRpb24ua2V5KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBSZXR1cm4gdGhlIHNldCBvZiBhbGwgKHBvdGVudGlhbGx5KSBjaGFuZ2VkIGRvY3VtZW50cyBhbmQgdGhlIGxpc3RcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gb2YgbXV0YXRpb24gYmF0Y2ggSURzIHRoYXQgd2VyZSBhZmZlY3RlZCBieSBjaGFuZ2UuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXdMb2NhbERvY3VtZW50c1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmdldERvY3VtZW50cyh0eG4sIGNoYW5nZWRLZXlzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKGFmZmVjdGVkRG9jdW1lbnRzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFmZmVjdGVkRG9jdW1lbnRzOiBhZmZlY3RlZERvY3VtZW50cyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW1vdmVkQmF0Y2hJZHM6IHJlbW92ZWRCYXRjaElkcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGRlZEJhdGNoSWRzOiBhZGRlZEJhdGNoSWRzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tdXRhdGlvblF1ZXVlID0gbmV3TXV0YXRpb25RdWV1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2NhbERvY3VtZW50cyA9IG5ld0xvY2FsRG9jdW1lbnRzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnF1ZXJ5RW5naW5lLnNldExvY2FsRG9jdW1lbnRzVmlldyh0aGlzLmxvY2FsRG9jdW1lbnRzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHJlc3VsdF07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qIEFjY2VwdCBsb2NhbGx5IGdlbmVyYXRlZCBNdXRhdGlvbnMgYW5kIGNvbW1pdCB0aGVtIHRvIHN0b3JhZ2UuICovXHJcbiAgICBMb2NhbFN0b3JlLnByb3RvdHlwZS5sb2NhbFdyaXRlID0gZnVuY3Rpb24gKG11dGF0aW9ucykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIGxvY2FsV3JpdGVUaW1lID0gVGltZXN0YW1wLm5vdygpO1xyXG4gICAgICAgIHZhciBrZXlzID0gbXV0YXRpb25zLnJlZHVjZShmdW5jdGlvbiAoa2V5cywgbSkgeyByZXR1cm4ga2V5cy5hZGQobS5rZXkpOyB9LCBkb2N1bWVudEtleVNldCgpKTtcclxuICAgICAgICB2YXIgZXhpc3RpbmdEb2NzO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnBlcnNpc3RlbmNlXHJcbiAgICAgICAgICAgIC5ydW5UcmFuc2FjdGlvbignTG9jYWxseSB3cml0ZSBtdXRhdGlvbnMnLCAncmVhZHdyaXRlLWlkZW1wb3RlbnQnLCBmdW5jdGlvbiAodHhuKSB7XHJcbiAgICAgICAgICAgIC8vIExvYWQgYW5kIGFwcGx5IGFsbCBleGlzdGluZyBtdXRhdGlvbnMuIFRoaXMgbGV0cyB1cyBjb21wdXRlIHRoZVxyXG4gICAgICAgICAgICAvLyBjdXJyZW50IGJhc2Ugc3RhdGUgZm9yIGFsbCBub24taWRlbXBvdGVudCB0cmFuc2Zvcm1zIGJlZm9yZSBhcHBseWluZ1xyXG4gICAgICAgICAgICAvLyBhbnkgYWRkaXRpb25hbCB1c2VyLXByb3ZpZGVkIHdyaXRlcy5cclxuICAgICAgICAgICAgcmV0dXJuIF90aGlzLmxvY2FsRG9jdW1lbnRzLmdldERvY3VtZW50cyh0eG4sIGtleXMpLm5leHQoZnVuY3Rpb24gKGRvY3MpIHtcclxuICAgICAgICAgICAgICAgIGV4aXN0aW5nRG9jcyA9IGRvY3M7XHJcbiAgICAgICAgICAgICAgICAvLyBGb3Igbm9uLWlkZW1wb3RlbnQgbXV0YXRpb25zIChzdWNoIGFzIGBGaWVsZFZhbHVlLmluY3JlbWVudCgpYCksXHJcbiAgICAgICAgICAgICAgICAvLyB3ZSByZWNvcmQgdGhlIGJhc2Ugc3RhdGUgaW4gYSBzZXBhcmF0ZSBwYXRjaCBtdXRhdGlvbi4gVGhpcyBpc1xyXG4gICAgICAgICAgICAgICAgLy8gbGF0ZXIgdXNlZCB0byBndWFyYW50ZWUgY29uc2lzdGVudCB2YWx1ZXMgYW5kIHByZXZlbnRzIGZsaWNrZXJcclxuICAgICAgICAgICAgICAgIC8vIGV2ZW4gaWYgdGhlIGJhY2tlbmQgc2VuZHMgdXMgYW4gdXBkYXRlIHRoYXQgYWxyZWFkeSBpbmNsdWRlcyBvdXJcclxuICAgICAgICAgICAgICAgIC8vIHRyYW5zZm9ybS5cclxuICAgICAgICAgICAgICAgIHZhciBiYXNlTXV0YXRpb25zID0gW107XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIG11dGF0aW9uc18xID0gbXV0YXRpb25zOyBfaSA8IG11dGF0aW9uc18xLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBtdXRhdGlvbiA9IG11dGF0aW9uc18xW19pXTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgYmFzZVZhbHVlID0gbXV0YXRpb24uZXh0cmFjdEJhc2VWYWx1ZShleGlzdGluZ0RvY3MuZ2V0KG11dGF0aW9uLmtleSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChiYXNlVmFsdWUgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBOT1RFOiBUaGUgYmFzZSBzdGF0ZSBzaG91bGQgb25seSBiZSBhcHBsaWVkIGlmIHRoZXJlJ3Mgc29tZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBleGlzdGluZyBkb2N1bWVudCB0byBvdmVycmlkZSwgc28gdXNlIGEgUHJlY29uZGl0aW9uIG9mXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGV4aXN0cz10cnVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VNdXRhdGlvbnMucHVzaChuZXcgUGF0Y2hNdXRhdGlvbihtdXRhdGlvbi5rZXksIGJhc2VWYWx1ZSwgYmFzZVZhbHVlLmZpZWxkTWFzaygpLCBQcmVjb25kaXRpb24uZXhpc3RzKHRydWUpKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLm11dGF0aW9uUXVldWUuYWRkTXV0YXRpb25CYXRjaCh0eG4sIGxvY2FsV3JpdGVUaW1lLCBiYXNlTXV0YXRpb25zLCBtdXRhdGlvbnMpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoYmF0Y2gpIHtcclxuICAgICAgICAgICAgdmFyIGNoYW5nZXMgPSBiYXRjaC5hcHBseVRvTG9jYWxEb2N1bWVudFNldChleGlzdGluZ0RvY3MpO1xyXG4gICAgICAgICAgICByZXR1cm4geyBiYXRjaElkOiBiYXRjaC5iYXRjaElkLCBjaGFuZ2VzOiBjaGFuZ2VzIH07XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqIFJldHVybnMgdGhlIGxvY2FsIHZpZXcgb2YgdGhlIGRvY3VtZW50cyBhZmZlY3RlZCBieSBhIG11dGF0aW9uIGJhdGNoLiAqL1xyXG4gICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS10YWIgb25seS5cclxuICAgIExvY2FsU3RvcmUucHJvdG90eXBlLmxvb2t1cE11dGF0aW9uRG9jdW1lbnRzID0gZnVuY3Rpb24gKGJhdGNoSWQpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKCdMb29rdXAgbXV0YXRpb24gZG9jdW1lbnRzJywgJ3JlYWRvbmx5LWlkZW1wb3RlbnQnLCBmdW5jdGlvbiAodHhuKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5tdXRhdGlvblF1ZXVlXHJcbiAgICAgICAgICAgICAgICAubG9va3VwTXV0YXRpb25LZXlzKHR4biwgYmF0Y2hJZClcclxuICAgICAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uIChrZXlzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoa2V5cykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5sb2NhbERvY3VtZW50cy5nZXREb2N1bWVudHModHhuLCBrZXlzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZShudWxsKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBBY2tub3dsZWRnZSB0aGUgZ2l2ZW4gYmF0Y2guXHJcbiAgICAgKlxyXG4gICAgICogT24gdGhlIGhhcHB5IHBhdGggd2hlbiBhIGJhdGNoIGlzIGFja25vd2xlZGdlZCwgdGhlIGxvY2FsIHN0b3JlIHdpbGxcclxuICAgICAqXHJcbiAgICAgKiAgKyByZW1vdmUgdGhlIGJhdGNoIGZyb20gdGhlIG11dGF0aW9uIHF1ZXVlO1xyXG4gICAgICogICsgYXBwbHkgdGhlIGNoYW5nZXMgdG8gdGhlIHJlbW90ZSBkb2N1bWVudCBjYWNoZTtcclxuICAgICAqICArIHJlY2FsY3VsYXRlIHRoZSBsYXRlbmN5IGNvbXBlbnNhdGVkIHZpZXcgaW1wbGllZCBieSB0aG9zZSBjaGFuZ2VzICh0aGVyZVxyXG4gICAgICogICAgbWF5IGJlIG11dGF0aW9ucyBpbiB0aGUgcXVldWUgdGhhdCBhZmZlY3QgdGhlIGRvY3VtZW50cyBidXQgaGF2ZW4ndCBiZWVuXHJcbiAgICAgKiAgICBhY2tub3dsZWRnZWQgeWV0KTsgYW5kXHJcbiAgICAgKiAgKyBnaXZlIHRoZSBjaGFuZ2VkIGRvY3VtZW50cyBiYWNrIHRoZSBzeW5jIGVuZ2luZVxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm5zIFRoZSByZXN1bHRpbmcgKG1vZGlmaWVkKSBkb2N1bWVudHMuXHJcbiAgICAgKi9cclxuICAgIExvY2FsU3RvcmUucHJvdG90eXBlLmFja25vd2xlZGdlQmF0Y2ggPSBmdW5jdGlvbiAoYmF0Y2hSZXN1bHQpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKCdBY2tub3dsZWRnZSBiYXRjaCcsICdyZWFkd3JpdGUtcHJpbWFyeS1pZGVtcG90ZW50JywgZnVuY3Rpb24gKHR4bikge1xyXG4gICAgICAgICAgICB2YXIgYWZmZWN0ZWQgPSBiYXRjaFJlc3VsdC5iYXRjaC5rZXlzKCk7XHJcbiAgICAgICAgICAgIHZhciBkb2N1bWVudEJ1ZmZlciA9IF90aGlzLnJlbW90ZURvY3VtZW50cy5uZXdDaGFuZ2VCdWZmZXIoe1xyXG4gICAgICAgICAgICAgICAgdHJhY2tSZW1vdmFsczogdHJ1ZSAvLyBNYWtlIHN1cmUgZG9jdW1lbnQgcmVtb3ZhbHMgc2hvdyB1cCBpbiBgZ2V0TmV3RG9jdW1lbnRDaGFuZ2VzKClgXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXMubXV0YXRpb25RdWV1ZVxyXG4gICAgICAgICAgICAgICAgLmFja25vd2xlZGdlQmF0Y2godHhuLCBiYXRjaFJlc3VsdC5iYXRjaCwgYmF0Y2hSZXN1bHQuc3RyZWFtVG9rZW4pXHJcbiAgICAgICAgICAgICAgICAubmV4dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuYXBwbHlXcml0ZVRvUmVtb3RlRG9jdW1lbnRzKHR4biwgYmF0Y2hSZXN1bHQsIGRvY3VtZW50QnVmZmVyKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIGRvY3VtZW50QnVmZmVyLmFwcGx5KHR4bik7IH0pXHJcbiAgICAgICAgICAgICAgICAubmV4dChmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5tdXRhdGlvblF1ZXVlLnBlcmZvcm1Db25zaXN0ZW5jeUNoZWNrKHR4bik7IH0pXHJcbiAgICAgICAgICAgICAgICAubmV4dChmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5sb2NhbERvY3VtZW50cy5nZXREb2N1bWVudHModHhuLCBhZmZlY3RlZCk7IH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmVtb3ZlIG11dGF0aW9ucyBmcm9tIHRoZSBNdXRhdGlvblF1ZXVlIGZvciB0aGUgc3BlY2lmaWVkIGJhdGNoO1xyXG4gICAgICogTG9jYWxEb2N1bWVudHMgd2lsbCBiZSByZWNhbGN1bGF0ZWQuXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybnMgVGhlIHJlc3VsdGluZyBtb2RpZmllZCBkb2N1bWVudHMuXHJcbiAgICAgKi9cclxuICAgIExvY2FsU3RvcmUucHJvdG90eXBlLnJlamVjdEJhdGNoID0gZnVuY3Rpb24gKGJhdGNoSWQpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKCdSZWplY3QgYmF0Y2gnLCAncmVhZHdyaXRlLXByaW1hcnktaWRlbXBvdGVudCcsIGZ1bmN0aW9uICh0eG4pIHtcclxuICAgICAgICAgICAgdmFyIGFmZmVjdGVkS2V5cztcclxuICAgICAgICAgICAgcmV0dXJuIF90aGlzLm11dGF0aW9uUXVldWVcclxuICAgICAgICAgICAgICAgIC5sb29rdXBNdXRhdGlvbkJhdGNoKHR4biwgYmF0Y2hJZClcclxuICAgICAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uIChiYXRjaCkge1xyXG4gICAgICAgICAgICAgICAgYXNzZXJ0KGJhdGNoICE9PSBudWxsLCAnQXR0ZW1wdCB0byByZWplY3Qgbm9uZXhpc3RlbnQgYmF0Y2ghJyk7XHJcbiAgICAgICAgICAgICAgICBhZmZlY3RlZEtleXMgPSBiYXRjaC5rZXlzKCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMubXV0YXRpb25RdWV1ZS5yZW1vdmVNdXRhdGlvbkJhdGNoKHR4biwgYmF0Y2gpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLm11dGF0aW9uUXVldWUucGVyZm9ybUNvbnNpc3RlbmN5Q2hlY2sodHhuKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5sb2NhbERvY3VtZW50cy5nZXREb2N1bWVudHModHhuLCBhZmZlY3RlZEtleXMpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdGhlIGxhcmdlc3QgKGxhdGVzdCkgYmF0Y2ggaWQgaW4gbXV0YXRpb24gcXVldWUgdGhhdCBpcyBwZW5kaW5nIHNlcnZlciByZXNwb25zZS5cclxuICAgICAqIFJldHVybnMgYEJBVENISURfVU5LTk9XTmAgaWYgdGhlIHF1ZXVlIGlzIGVtcHR5LlxyXG4gICAgICovXHJcbiAgICBMb2NhbFN0b3JlLnByb3RvdHlwZS5nZXRIaWdoZXN0VW5hY2tub3dsZWRnZWRCYXRjaElkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oJ0dldCBoaWdoZXN0IHVuYWNrbm93bGVkZ2VkIGJhdGNoIGlkJywgJ3JlYWRvbmx5LWlkZW1wb3RlbnQnLCBmdW5jdGlvbiAodHhuKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5tdXRhdGlvblF1ZXVlLmdldEhpZ2hlc3RVbmFja25vd2xlZGdlZEJhdGNoSWQodHhuKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKiogUmV0dXJucyB0aGUgbGFzdCByZWNvcmRlZCBzdHJlYW0gdG9rZW4gZm9yIHRoZSBjdXJyZW50IHVzZXIuICovXHJcbiAgICBMb2NhbFN0b3JlLnByb3RvdHlwZS5nZXRMYXN0U3RyZWFtVG9rZW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICByZXR1cm4gdGhpcy5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbignR2V0IGxhc3Qgc3RyZWFtIHRva2VuJywgJ3JlYWRvbmx5LWlkZW1wb3RlbnQnLCBmdW5jdGlvbiAodHhuKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5tdXRhdGlvblF1ZXVlLmdldExhc3RTdHJlYW1Ub2tlbih0eG4pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogU2V0cyB0aGUgc3RyZWFtIHRva2VuIGZvciB0aGUgY3VycmVudCB1c2VyIHdpdGhvdXQgYWNrbm93bGVkZ2luZyBhbnlcclxuICAgICAqIG11dGF0aW9uIGJhdGNoLiBUaGlzIGlzIHVzdWFsbHkgb25seSB1c2VmdWwgYWZ0ZXIgYSBzdHJlYW0gaGFuZHNoYWtlIG9yIGluXHJcbiAgICAgKiByZXNwb25zZSB0byBhbiBlcnJvciB0aGF0IHJlcXVpcmVzIGNsZWFyaW5nIHRoZSBzdHJlYW0gdG9rZW4uXHJcbiAgICAgKi9cclxuICAgIExvY2FsU3RvcmUucHJvdG90eXBlLnNldExhc3RTdHJlYW1Ub2tlbiA9IGZ1bmN0aW9uIChzdHJlYW1Ub2tlbikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oJ1NldCBsYXN0IHN0cmVhbSB0b2tlbicsICdyZWFkd3JpdGUtcHJpbWFyeS1pZGVtcG90ZW50JywgZnVuY3Rpb24gKHR4bikge1xyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXMubXV0YXRpb25RdWV1ZS5zZXRMYXN0U3RyZWFtVG9rZW4odHhuLCBzdHJlYW1Ub2tlbik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSBsYXN0IGNvbnNpc3RlbnQgc25hcHNob3QgcHJvY2Vzc2VkICh1c2VkIGJ5IHRoZSBSZW1vdGVTdG9yZSB0b1xyXG4gICAgICogZGV0ZXJtaW5lIHdoZXRoZXIgdG8gYnVmZmVyIGluY29taW5nIHNuYXBzaG90cyBmcm9tIHRoZSBiYWNrZW5kKS5cclxuICAgICAqL1xyXG4gICAgTG9jYWxTdG9yZS5wcm90b3R5cGUuZ2V0TGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKCdHZXQgbGFzdCByZW1vdGUgc25hcHNob3QgdmVyc2lvbicsICdyZWFkb25seS1pZGVtcG90ZW50JywgZnVuY3Rpb24gKHR4bikgeyByZXR1cm4gX3RoaXMudGFyZ2V0Q2FjaGUuZ2V0TGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbih0eG4pOyB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFVwZGF0ZSB0aGUgXCJncm91bmQtc3RhdGVcIiAocmVtb3RlKSBkb2N1bWVudHMuIFdlIGFzc3VtZSB0aGF0IHRoZSByZW1vdGVcclxuICAgICAqIGV2ZW50IHJlZmxlY3RzIGFueSB3cml0ZSBiYXRjaGVzIHRoYXQgaGF2ZSBiZWVuIGFja25vd2xlZGdlZCBvciByZWplY3RlZFxyXG4gICAgICogKGkuZS4gd2UgZG8gbm90IHJlLWFwcGx5IGxvY2FsIG11dGF0aW9ucyB0byB1cGRhdGVzIGZyb20gdGhpcyBldmVudCkuXHJcbiAgICAgKlxyXG4gICAgICogTG9jYWxEb2N1bWVudHMgYXJlIHJlLWNhbGN1bGF0ZWQgaWYgdGhlcmUgYXJlIHJlbWFpbmluZyBtdXRhdGlvbnMgaW4gdGhlXHJcbiAgICAgKiBxdWV1ZS5cclxuICAgICAqL1xyXG4gICAgTG9jYWxTdG9yZS5wcm90b3R5cGUuYXBwbHlSZW1vdGVFdmVudCA9IGZ1bmN0aW9uIChyZW1vdGVFdmVudCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIHJlbW90ZVZlcnNpb24gPSByZW1vdGVFdmVudC5zbmFwc2hvdFZlcnNpb247XHJcbiAgICAgICAgdmFyIG5ld1RhcmdldERhdGFCeVRhcmdldE1hcCA9IHRoaXMudGFyZ2V0RGF0YUJ5VGFyZ2V0O1xyXG4gICAgICAgIHJldHVybiB0aGlzLnBlcnNpc3RlbmNlXHJcbiAgICAgICAgICAgIC5ydW5UcmFuc2FjdGlvbignQXBwbHkgcmVtb3RlIGV2ZW50JywgJ3JlYWR3cml0ZS1wcmltYXJ5LWlkZW1wb3RlbnQnLCBmdW5jdGlvbiAodHhuKSB7XHJcbiAgICAgICAgICAgIHZhciBkb2N1bWVudEJ1ZmZlciA9IF90aGlzLnJlbW90ZURvY3VtZW50cy5uZXdDaGFuZ2VCdWZmZXIoe1xyXG4gICAgICAgICAgICAgICAgdHJhY2tSZW1vdmFsczogdHJ1ZSAvLyBNYWtlIHN1cmUgZG9jdW1lbnQgcmVtb3ZhbHMgc2hvdyB1cCBpbiBgZ2V0TmV3RG9jdW1lbnRDaGFuZ2VzKClgXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAvLyBSZXNldCBuZXdUYXJnZXREYXRhQnlUYXJnZXRNYXAgaW4gY2FzZSB0aGlzIHRyYW5zYWN0aW9uIGdldHMgcmUtcnVuLlxyXG4gICAgICAgICAgICBuZXdUYXJnZXREYXRhQnlUYXJnZXRNYXAgPSBfdGhpcy50YXJnZXREYXRhQnlUYXJnZXQ7XHJcbiAgICAgICAgICAgIHZhciBwcm9taXNlcyA9IFtdO1xyXG4gICAgICAgICAgICBmb3JFYWNoTnVtYmVyKHJlbW90ZUV2ZW50LnRhcmdldENoYW5nZXMsIGZ1bmN0aW9uICh0YXJnZXRJZCwgY2hhbmdlKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgb2xkVGFyZ2V0RGF0YSA9IG5ld1RhcmdldERhdGFCeVRhcmdldE1hcC5nZXQodGFyZ2V0SWQpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFvbGRUYXJnZXREYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gT25seSB1cGRhdGUgdGhlIHJlbW90ZSBrZXlzIGlmIHRoZSB0YXJnZXQgaXMgc3RpbGwgYWN0aXZlLiBUaGlzXHJcbiAgICAgICAgICAgICAgICAvLyBlbnN1cmVzIHRoYXQgd2UgY2FuIHBlcnNpc3QgdGhlIHVwZGF0ZWQgdGFyZ2V0IGRhdGEgYWxvbmcgd2l0aFxyXG4gICAgICAgICAgICAgICAgLy8gdGhlIHVwZGF0ZWQgYXNzaWdubWVudC5cclxuICAgICAgICAgICAgICAgIHByb21pc2VzLnB1c2goX3RoaXMudGFyZ2V0Q2FjaGVcclxuICAgICAgICAgICAgICAgICAgICAucmVtb3ZlTWF0Y2hpbmdLZXlzKHR4biwgY2hhbmdlLnJlbW92ZWREb2N1bWVudHMsIHRhcmdldElkKVxyXG4gICAgICAgICAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMudGFyZ2V0Q2FjaGUuYWRkTWF0Y2hpbmdLZXlzKHR4biwgY2hhbmdlLmFkZGVkRG9jdW1lbnRzLCB0YXJnZXRJZCk7XHJcbiAgICAgICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgcmVzdW1lVG9rZW4gPSBjaGFuZ2UucmVzdW1lVG9rZW47XHJcbiAgICAgICAgICAgICAgICAvLyBVcGRhdGUgdGhlIHJlc3VtZSB0b2tlbiBpZiB0aGUgY2hhbmdlIGluY2x1ZGVzIG9uZS5cclxuICAgICAgICAgICAgICAgIGlmIChyZXN1bWVUb2tlbi5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5ld1RhcmdldERhdGEgPSBvbGRUYXJnZXREYXRhXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC53aXRoUmVzdW1lVG9rZW4ocmVzdW1lVG9rZW4sIHJlbW90ZVZlcnNpb24pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC53aXRoU2VxdWVuY2VOdW1iZXIodHhuLmN1cnJlbnRTZXF1ZW5jZU51bWJlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3VGFyZ2V0RGF0YUJ5VGFyZ2V0TWFwID0gbmV3VGFyZ2V0RGF0YUJ5VGFyZ2V0TWFwLmluc2VydCh0YXJnZXRJZCwgbmV3VGFyZ2V0RGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gVXBkYXRlIHRoZSB0YXJnZXQgZGF0YSBpZiB0aGVyZSBhcmUgdGFyZ2V0IGNoYW5nZXMgKG9yIGlmXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gc3VmZmljaWVudCB0aW1lIGhhcyBwYXNzZWQgc2luY2UgdGhlIGxhc3QgdXBkYXRlKS5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoTG9jYWxTdG9yZS5zaG91bGRQZXJzaXN0VGFyZ2V0RGF0YShvbGRUYXJnZXREYXRhLCBuZXdUYXJnZXREYXRhLCBjaGFuZ2UpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb21pc2VzLnB1c2goX3RoaXMudGFyZ2V0Q2FjaGUudXBkYXRlVGFyZ2V0RGF0YSh0eG4sIG5ld1RhcmdldERhdGEpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB2YXIgY2hhbmdlZERvY3MgPSBtYXliZURvY3VtZW50TWFwKCk7XHJcbiAgICAgICAgICAgIHZhciB1cGRhdGVkS2V5cyA9IGRvY3VtZW50S2V5U2V0KCk7XHJcbiAgICAgICAgICAgIHJlbW90ZUV2ZW50LmRvY3VtZW50VXBkYXRlcy5mb3JFYWNoKGZ1bmN0aW9uIChrZXksIGRvYykge1xyXG4gICAgICAgICAgICAgICAgdXBkYXRlZEtleXMgPSB1cGRhdGVkS2V5cy5hZGQoa2V5KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIC8vIEVhY2ggbG9vcCBpdGVyYXRpb24gb25seSBhZmZlY3RzIGl0cyBcIm93blwiIGRvYywgc28gaXQncyBzYWZlIHRvIGdldCBhbGwgdGhlIHJlbW90ZVxyXG4gICAgICAgICAgICAvLyBkb2N1bWVudHMgaW4gYWR2YW5jZSBpbiBhIHNpbmdsZSBjYWxsLlxyXG4gICAgICAgICAgICBwcm9taXNlcy5wdXNoKGRvY3VtZW50QnVmZmVyLmdldEVudHJpZXModHhuLCB1cGRhdGVkS2V5cykubmV4dChmdW5jdGlvbiAoZXhpc3RpbmdEb2NzKSB7XHJcbiAgICAgICAgICAgICAgICByZW1vdGVFdmVudC5kb2N1bWVudFVwZGF0ZXMuZm9yRWFjaChmdW5jdGlvbiAoa2V5LCBkb2MpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZXhpc3RpbmdEb2MgPSBleGlzdGluZ0RvY3MuZ2V0KGtleSk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gTm90ZTogVGhlIG9yZGVyIG9mIHRoZSBzdGVwcyBiZWxvdyBpcyBpbXBvcnRhbnQsIHNpbmNlIHdlIHdhbnRcclxuICAgICAgICAgICAgICAgICAgICAvLyB0byBlbnN1cmUgdGhhdCByZWplY3RlZCBsaW1ibyByZXNvbHV0aW9ucyAod2hpY2ggZmFicmljYXRlXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gTm9Eb2N1bWVudHMgd2l0aCBTbmFwc2hvdFZlcnNpb24uTUlOKSBuZXZlciBhZGQgZG9jdW1lbnRzIHRvXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY2FjaGUuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRvYyBpbnN0YW5jZW9mIE5vRG9jdW1lbnQgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgZG9jLnZlcnNpb24uaXNFcXVhbChTbmFwc2hvdFZlcnNpb24uTUlOKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBOb0RvY3VtZW50cyB3aXRoIFNuYXBzaG90VmVyc2lvbi5NSU4gYXJlIHVzZWQgaW4gbWFudWZhY3R1cmVkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGV2ZW50cy4gV2UgcmVtb3ZlIHRoZXNlIGRvY3VtZW50cyBmcm9tIGNhY2hlIHNpbmNlIHdlIGxvc3RcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYWNjZXNzLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudEJ1ZmZlci5yZW1vdmVFbnRyeShrZXksIHJlbW90ZVZlcnNpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VkRG9jcyA9IGNoYW5nZWREb2NzLmluc2VydChrZXksIGRvYyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGV4aXN0aW5nRG9jID09IG51bGwgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZG9jLnZlcnNpb24uY29tcGFyZVRvKGV4aXN0aW5nRG9jLnZlcnNpb24pID4gMCB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAoZG9jLnZlcnNpb24uY29tcGFyZVRvKGV4aXN0aW5nRG9jLnZlcnNpb24pID09PSAwICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGlzdGluZ0RvYy5oYXNQZW5kaW5nV3JpdGVzKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhc3NlcnQoIVNuYXBzaG90VmVyc2lvbi5NSU4uaXNFcXVhbChyZW1vdGVWZXJzaW9uKSwgJ0Nhbm5vdCBhZGQgYSBkb2N1bWVudCB3aGVuIHRoZSByZW1vdGUgdmVyc2lvbiBpcyB6ZXJvJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50QnVmZmVyLmFkZEVudHJ5KGRvYywgcmVtb3RlVmVyc2lvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZWREb2NzID0gY2hhbmdlZERvY3MuaW5zZXJ0KGtleSwgZG9jKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlYnVnKExPR19UQUckMiwgJ0lnbm9yaW5nIG91dGRhdGVkIHdhdGNoIHVwZGF0ZSBmb3IgJywga2V5LCAnLiBDdXJyZW50IHZlcnNpb246JywgZXhpc3RpbmdEb2MudmVyc2lvbiwgJyBXYXRjaCB2ZXJzaW9uOicsIGRvYy52ZXJzaW9uKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlbW90ZUV2ZW50LnJlc29sdmVkTGltYm9Eb2N1bWVudHMuaGFzKGtleSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvbWlzZXMucHVzaChfdGhpcy5wZXJzaXN0ZW5jZS5yZWZlcmVuY2VEZWxlZ2F0ZS51cGRhdGVMaW1ib0RvY3VtZW50KHR4biwga2V5KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pKTtcclxuICAgICAgICAgICAgLy8gSEFDSzogVGhlIG9ubHkgcmVhc29uIHdlIGFsbG93IGEgbnVsbCBzbmFwc2hvdCB2ZXJzaW9uIGlzIHNvIHRoYXQgd2VcclxuICAgICAgICAgICAgLy8gY2FuIHN5bnRoZXNpemUgcmVtb3RlIGV2ZW50cyB3aGVuIHdlIGdldCBwZXJtaXNzaW9uIGRlbmllZCBlcnJvcnMgd2hpbGVcclxuICAgICAgICAgICAgLy8gdHJ5aW5nIHRvIHJlc29sdmUgdGhlIHN0YXRlIG9mIGEgbG9jYWxseSBjYWNoZWQgZG9jdW1lbnQgdGhhdCBpcyBpblxyXG4gICAgICAgICAgICAvLyBsaW1iby5cclxuICAgICAgICAgICAgaWYgKCFyZW1vdGVWZXJzaW9uLmlzRXF1YWwoU25hcHNob3RWZXJzaW9uLk1JTikpIHtcclxuICAgICAgICAgICAgICAgIHZhciB1cGRhdGVSZW1vdGVWZXJzaW9uID0gX3RoaXMudGFyZ2V0Q2FjaGVcclxuICAgICAgICAgICAgICAgICAgICAuZ2V0TGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbih0eG4pXHJcbiAgICAgICAgICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKGxhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBhc3NlcnQocmVtb3RlVmVyc2lvbi5jb21wYXJlVG8obGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbikgPj0gMCwgJ1dhdGNoIHN0cmVhbSByZXZlcnRlZCB0byBwcmV2aW91cyBzbmFwc2hvdD8/ICcgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZW1vdGVWZXJzaW9uICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJyA8ICcgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMudGFyZ2V0Q2FjaGUuc2V0VGFyZ2V0c01ldGFkYXRhKHR4biwgdHhuLmN1cnJlbnRTZXF1ZW5jZU51bWJlciwgcmVtb3RlVmVyc2lvbik7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHByb21pc2VzLnB1c2godXBkYXRlUmVtb3RlVmVyc2lvbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS53YWl0Rm9yKHByb21pc2VzKVxyXG4gICAgICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKCkgeyByZXR1cm4gZG9jdW1lbnRCdWZmZXIuYXBwbHkodHhuKTsgfSlcclxuICAgICAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5sb2NhbERvY3VtZW50cy5nZXRMb2NhbFZpZXdPZkRvY3VtZW50cyh0eG4sIGNoYW5nZWREb2NzKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKGNoYW5nZWREb2NzKSB7XHJcbiAgICAgICAgICAgIF90aGlzLnRhcmdldERhdGFCeVRhcmdldCA9IG5ld1RhcmdldERhdGFCeVRhcmdldE1hcDtcclxuICAgICAgICAgICAgcmV0dXJuIGNoYW5nZWREb2NzO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoZSBuZXdUYXJnZXREYXRhIHNob3VsZCBiZSBwZXJzaXN0ZWQgZHVyaW5nIGFuIHVwZGF0ZSBvZlxyXG4gICAgICogYW4gYWN0aXZlIHRhcmdldC4gVGFyZ2V0RGF0YSBzaG91bGQgYWx3YXlzIGJlIHBlcnNpc3RlZCB3aGVuIGEgdGFyZ2V0IGlzXHJcbiAgICAgKiBiZWluZyByZWxlYXNlZCBhbmQgc2hvdWxkIG5vdCBjYWxsIHRoaXMgZnVuY3Rpb24uXHJcbiAgICAgKlxyXG4gICAgICogV2hpbGUgdGhlIHRhcmdldCBpcyBhY3RpdmUsIFRhcmdldERhdGEgdXBkYXRlcyBjYW4gYmUgb21pdHRlZCB3aGVuIG5vdGhpbmdcclxuICAgICAqIGFib3V0IHRoZSB0YXJnZXQgaGFzIGNoYW5nZWQgZXhjZXB0IG1ldGFkYXRhIGxpa2UgdGhlIHJlc3VtZSB0b2tlbiBvclxyXG4gICAgICogc25hcHNob3QgdmVyc2lvbi4gT2NjYXNpb25hbGx5IGl0J3Mgd29ydGggdGhlIGV4dHJhIHdyaXRlIHRvIHByZXZlbnQgdGhlc2VcclxuICAgICAqIHZhbHVlcyBmcm9tIGdldHRpbmcgdG9vIHN0YWxlIGFmdGVyIGEgY3Jhc2gsIGJ1dCB0aGlzIGRvZXNuJ3QgaGF2ZSB0byBiZVxyXG4gICAgICogdG9vIGZyZXF1ZW50LlxyXG4gICAgICovXHJcbiAgICBMb2NhbFN0b3JlLnNob3VsZFBlcnNpc3RUYXJnZXREYXRhID0gZnVuY3Rpb24gKG9sZFRhcmdldERhdGEsIG5ld1RhcmdldERhdGEsIGNoYW5nZSkge1xyXG4gICAgICAgIGFzc2VydChuZXdUYXJnZXREYXRhLnJlc3VtZVRva2VuLmxlbmd0aCA+IDAsICdBdHRlbXB0ZWQgdG8gcGVyc2lzdCB0YXJnZXQgZGF0YSB3aXRoIG5vIHJlc3VtZSB0b2tlbicpO1xyXG4gICAgICAgIC8vIEFsd2F5cyBwZXJzaXN0IHRhcmdldCBkYXRhIGlmIHdlIGRvbid0IGFscmVhZHkgaGF2ZSBhIHJlc3VtZSB0b2tlbi5cclxuICAgICAgICBpZiAob2xkVGFyZ2V0RGF0YS5yZXN1bWVUb2tlbi5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIERvbid0IGFsbG93IHJlc3VtZSB0b2tlbiBjaGFuZ2VzIHRvIGJlIGJ1ZmZlcmVkIGluZGVmaW5pdGVseS4gVGhpc1xyXG4gICAgICAgIC8vIGFsbG93cyB1cyB0byBiZSByZWFzb25hYmx5IHVwLXRvLWRhdGUgYWZ0ZXIgYSBjcmFzaCBhbmQgYXZvaWRzIG5lZWRpbmdcclxuICAgICAgICAvLyB0byBsb29wIG92ZXIgYWxsIGFjdGl2ZSBxdWVyaWVzIG9uIHNodXRkb3duLiBFc3BlY2lhbGx5IGluIHRoZSBicm93c2VyXHJcbiAgICAgICAgLy8gd2UgbWF5IG5vdCBnZXQgdGltZSB0byBkbyBhbnl0aGluZyBpbnRlcmVzdGluZyB3aGlsZSB0aGUgY3VycmVudCB0YWIgaXNcclxuICAgICAgICAvLyBjbG9zaW5nLlxyXG4gICAgICAgIHZhciB0aW1lRGVsdGEgPSBuZXdUYXJnZXREYXRhLnNuYXBzaG90VmVyc2lvbi50b01pY3Jvc2Vjb25kcygpIC1cclxuICAgICAgICAgICAgb2xkVGFyZ2V0RGF0YS5zbmFwc2hvdFZlcnNpb24udG9NaWNyb3NlY29uZHMoKTtcclxuICAgICAgICBpZiAodGltZURlbHRhID49IHRoaXMuUkVTVU1FX1RPS0VOX01BWF9BR0VfTUlDUk9TKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBPdGhlcndpc2UgaWYgdGhlIG9ubHkgdGhpbmcgdGhhdCBoYXMgY2hhbmdlZCBhYm91dCBhIHRhcmdldCBpcyBpdHMgcmVzdW1lXHJcbiAgICAgICAgLy8gdG9rZW4gaXQncyBub3Qgd29ydGggcGVyc2lzdGluZy4gTm90ZSB0aGF0IHRoZSBSZW1vdGVTdG9yZSBrZWVwcyBhblxyXG4gICAgICAgIC8vIGluLW1lbW9yeSB2aWV3IG9mIHRoZSBjdXJyZW50bHkgYWN0aXZlIHRhcmdldHMgd2hpY2ggaW5jbHVkZXMgdGhlIGN1cnJlbnRcclxuICAgICAgICAvLyByZXN1bWUgdG9rZW4sIHNvIHN0cmVhbSBmYWlsdXJlIG9yIHVzZXIgY2hhbmdlcyB3aWxsIHN0aWxsIHVzZSBhblxyXG4gICAgICAgIC8vIHVwLXRvLWRhdGUgcmVzdW1lIHRva2VuIHJlZ2FyZGxlc3Mgb2Ygd2hhdCB3ZSBkbyBoZXJlLlxyXG4gICAgICAgIHZhciBjaGFuZ2VzID0gY2hhbmdlLmFkZGVkRG9jdW1lbnRzLnNpemUgK1xyXG4gICAgICAgICAgICBjaGFuZ2UubW9kaWZpZWREb2N1bWVudHMuc2l6ZSArXHJcbiAgICAgICAgICAgIGNoYW5nZS5yZW1vdmVkRG9jdW1lbnRzLnNpemU7XHJcbiAgICAgICAgcmV0dXJuIGNoYW5nZXMgPiAwO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogTm90aWZ5IGxvY2FsIHN0b3JlIG9mIHRoZSBjaGFuZ2VkIHZpZXdzIHRvIGxvY2FsbHkgcGluIGRvY3VtZW50cy5cclxuICAgICAqL1xyXG4gICAgTG9jYWxTdG9yZS5wcm90b3R5cGUubm90aWZ5TG9jYWxWaWV3Q2hhbmdlcyA9IGZ1bmN0aW9uICh2aWV3Q2hhbmdlcykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCB2aWV3Q2hhbmdlc18xID0gdmlld0NoYW5nZXM7IF9pIDwgdmlld0NoYW5nZXNfMS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgdmFyIHZpZXdDaGFuZ2UgPSB2aWV3Q2hhbmdlc18xW19pXTtcclxuICAgICAgICAgICAgdmFyIHRhcmdldElkID0gdmlld0NoYW5nZS50YXJnZXRJZDtcclxuICAgICAgICAgICAgdGhpcy5sb2NhbFZpZXdSZWZlcmVuY2VzLmFkZFJlZmVyZW5jZXModmlld0NoYW5nZS5hZGRlZEtleXMsIHRhcmdldElkKTtcclxuICAgICAgICAgICAgdGhpcy5sb2NhbFZpZXdSZWZlcmVuY2VzLnJlbW92ZVJlZmVyZW5jZXModmlld0NoYW5nZS5yZW1vdmVkS2V5cywgdGFyZ2V0SWQpO1xyXG4gICAgICAgICAgICBpZiAoIXZpZXdDaGFuZ2UuZnJvbUNhY2hlKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0RGF0YSA9IHRoaXMudGFyZ2V0RGF0YUJ5VGFyZ2V0LmdldCh0YXJnZXRJZCk7XHJcbiAgICAgICAgICAgICAgICBhc3NlcnQodGFyZ2V0RGF0YSAhPT0gbnVsbCwgXCJDYW4ndCBzZXQgbGltYm8tZnJlZSBzbmFwc2hvdCB2ZXJzaW9uIGZvciB1bmtub3duIHRhcmdldDogXCIgKyB0YXJnZXRJZCk7XHJcbiAgICAgICAgICAgICAgICAvLyBBZHZhbmNlIHRoZSBsYXN0IGxpbWJvIGZyZWUgc25hcHNob3QgdmVyc2lvblxyXG4gICAgICAgICAgICAgICAgdmFyIGxhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24gPSB0YXJnZXREYXRhLnNuYXBzaG90VmVyc2lvbjtcclxuICAgICAgICAgICAgICAgIHZhciB1cGRhdGVkVGFyZ2V0RGF0YSA9IHRhcmdldERhdGEud2l0aExhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24obGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRhcmdldERhdGFCeVRhcmdldCA9IHRoaXMudGFyZ2V0RGF0YUJ5VGFyZ2V0Lmluc2VydCh0YXJnZXRJZCwgdXBkYXRlZFRhcmdldERhdGEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKCdub3RpZnlMb2NhbFZpZXdDaGFuZ2VzJywgJ3JlYWR3cml0ZS1pZGVtcG90ZW50JywgZnVuY3Rpb24gKHR4bikge1xyXG4gICAgICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLmZvckVhY2godmlld0NoYW5nZXMsIGZ1bmN0aW9uICh2aWV3Q2hhbmdlKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLmZvckVhY2godmlld0NoYW5nZS5yZW1vdmVkS2V5cywgZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5wZXJzaXN0ZW5jZS5yZWZlcmVuY2VEZWxlZ2F0ZS5yZW1vdmVSZWZlcmVuY2UodHhuLCBrZXkpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogR2V0cyB0aGUgbXV0YXRpb24gYmF0Y2ggYWZ0ZXIgdGhlIHBhc3NlZCBpbiBiYXRjaElkIGluIHRoZSBtdXRhdGlvbiBxdWV1ZVxyXG4gICAgICogb3IgbnVsbCBpZiBlbXB0eS5cclxuICAgICAqIEBwYXJhbSBhZnRlckJhdGNoSWQgSWYgcHJvdmlkZWQsIHRoZSBiYXRjaCB0byBzZWFyY2ggYWZ0ZXIuXHJcbiAgICAgKiBAcmV0dXJucyBUaGUgbmV4dCBtdXRhdGlvbiBvciBudWxsIGlmIHRoZXJlIHdhc24ndCBvbmUuXHJcbiAgICAgKi9cclxuICAgIExvY2FsU3RvcmUucHJvdG90eXBlLm5leHRNdXRhdGlvbkJhdGNoID0gZnVuY3Rpb24gKGFmdGVyQmF0Y2hJZCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oJ0dldCBuZXh0IG11dGF0aW9uIGJhdGNoJywgJ3JlYWRvbmx5LWlkZW1wb3RlbnQnLCBmdW5jdGlvbiAodHhuKSB7XHJcbiAgICAgICAgICAgIGlmIChhZnRlckJhdGNoSWQgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgYWZ0ZXJCYXRjaElkID0gQkFUQ0hJRF9VTktOT1dOO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5tdXRhdGlvblF1ZXVlLmdldE5leHRNdXRhdGlvbkJhdGNoQWZ0ZXJCYXRjaElkKHR4biwgYWZ0ZXJCYXRjaElkKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJlYWQgdGhlIGN1cnJlbnQgdmFsdWUgb2YgYSBEb2N1bWVudCB3aXRoIGEgZ2l2ZW4ga2V5IG9yIG51bGwgaWYgbm90XHJcbiAgICAgKiBmb3VuZCAtIHVzZWQgZm9yIHRlc3RpbmcuXHJcbiAgICAgKi9cclxuICAgIExvY2FsU3RvcmUucHJvdG90eXBlLnJlYWREb2N1bWVudCA9IGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKCdyZWFkIGRvY3VtZW50JywgJ3JlYWRvbmx5LWlkZW1wb3RlbnQnLCBmdW5jdGlvbiAodHhuKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5sb2NhbERvY3VtZW50cy5nZXREb2N1bWVudCh0eG4sIGtleSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBBc3NpZ25zIHRoZSBnaXZlbiB0YXJnZXQgYW4gaW50ZXJuYWwgSUQgc28gdGhhdCBpdHMgcmVzdWx0cyBjYW4gYmUgcGlubmVkIHNvXHJcbiAgICAgKiB0aGV5IGRvbid0IGdldCBHQydkLiBBIHRhcmdldCBtdXN0IGJlIGFsbG9jYXRlZCBpbiB0aGUgbG9jYWwgc3RvcmUgYmVmb3JlXHJcbiAgICAgKiB0aGUgc3RvcmUgY2FuIGJlIHVzZWQgdG8gbWFuYWdlIGl0cyB2aWV3LlxyXG4gICAgICpcclxuICAgICAqIEFsbG9jYXRpbmcgYW4gYWxyZWFkeSBhbGxvY2F0ZWQgYFRhcmdldGAgd2lsbCByZXR1cm4gdGhlIGV4aXN0aW5nIGBUYXJnZXREYXRhYFxyXG4gICAgICogZm9yIHRoYXQgYFRhcmdldGAuXHJcbiAgICAgKi9cclxuICAgIExvY2FsU3RvcmUucHJvdG90eXBlLmFsbG9jYXRlVGFyZ2V0ID0gZnVuY3Rpb24gKHRhcmdldCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucGVyc2lzdGVuY2VcclxuICAgICAgICAgICAgLnJ1blRyYW5zYWN0aW9uKCdBbGxvY2F0ZSB0YXJnZXQnLCAncmVhZHdyaXRlLWlkZW1wb3RlbnQnLCBmdW5jdGlvbiAodHhuKSB7XHJcbiAgICAgICAgICAgIHZhciB0YXJnZXREYXRhO1xyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXMudGFyZ2V0Q2FjaGVcclxuICAgICAgICAgICAgICAgIC5nZXRUYXJnZXREYXRhKHR4biwgdGFyZ2V0KVxyXG4gICAgICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKGNhY2hlZCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGNhY2hlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgdGFyZ2V0IGhhcyBiZWVuIGxpc3RlbmVkIHRvIHByZXZpb3VzbHksIHNvIHJldXNlIHRoZVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIHByZXZpb3VzIHRhcmdldElELlxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFRPRE8obWNnKTogZnJlc2hlbiBsYXN0IGFjY2Vzc2VkIGRhdGU/XHJcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0RGF0YSA9IGNhY2hlZDtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUodGFyZ2V0RGF0YSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMudGFyZ2V0Q2FjaGUuYWxsb2NhdGVUYXJnZXRJZCh0eG4pLm5leHQoZnVuY3Rpb24gKHRhcmdldElkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldERhdGEgPSBuZXcgVGFyZ2V0RGF0YSh0YXJnZXQsIHRhcmdldElkLCBUYXJnZXRQdXJwb3NlLkxpc3RlbiwgdHhuLmN1cnJlbnRTZXF1ZW5jZU51bWJlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy50YXJnZXRDYWNoZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFkZFRhcmdldERhdGEodHhuLCB0YXJnZXREYXRhKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKCkgeyByZXR1cm4gdGFyZ2V0RGF0YTsgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICh0YXJnZXREYXRhKSB7XHJcbiAgICAgICAgICAgIGlmIChfdGhpcy50YXJnZXREYXRhQnlUYXJnZXQuZ2V0KHRhcmdldERhdGEudGFyZ2V0SWQpID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy50YXJnZXREYXRhQnlUYXJnZXQgPSBfdGhpcy50YXJnZXREYXRhQnlUYXJnZXQuaW5zZXJ0KHRhcmdldERhdGEudGFyZ2V0SWQsIHRhcmdldERhdGEpO1xyXG4gICAgICAgICAgICAgICAgX3RoaXMudGFyZ2V0SWRCeVRhcmdldC5zZXQodGFyZ2V0LCB0YXJnZXREYXRhLnRhcmdldElkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gdGFyZ2V0RGF0YTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdGhlIFRhcmdldERhdGEgYXMgc2VlbiBieSB0aGUgTG9jYWxTdG9yZSwgaW5jbHVkaW5nIHVwZGF0ZXMgdGhhdCBtYXlcclxuICAgICAqIGhhdmUgbm90IHlldCBiZWVuIHBlcnNpc3RlZCB0byB0aGUgVGFyZ2V0Q2FjaGUuXHJcbiAgICAgKi9cclxuICAgIC8vIFZpc2libGUgZm9yIHRlc3RpbmcuXHJcbiAgICBMb2NhbFN0b3JlLnByb3RvdHlwZS5nZXRUYXJnZXREYXRhID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCB0YXJnZXQpIHtcclxuICAgICAgICB2YXIgdGFyZ2V0SWQgPSB0aGlzLnRhcmdldElkQnlUYXJnZXQuZ2V0KHRhcmdldCk7XHJcbiAgICAgICAgaWYgKHRhcmdldElkICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKHRoaXMudGFyZ2V0RGF0YUJ5VGFyZ2V0LmdldCh0YXJnZXRJZCkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMudGFyZ2V0Q2FjaGUuZ2V0VGFyZ2V0RGF0YSh0cmFuc2FjdGlvbiwgdGFyZ2V0KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBVbnBpbiBhbGwgdGhlIGRvY3VtZW50cyBhc3NvY2lhdGVkIHdpdGggdGhlIGdpdmVuIHRhcmdldC4gSWZcclxuICAgICAqIGBrZWVwUGVyc2lzdGVkVGFyZ2V0RGF0YWAgaXMgc2V0IHRvIGZhbHNlIGFuZCBFYWdlciBHQyBlbmFibGVkLCB0aGUgbWV0aG9kXHJcbiAgICAgKiBkaXJlY3RseSByZW1vdmVzIHRoZSBhc3NvY2lhdGVkIHRhcmdldCBkYXRhIGZyb20gdGhlIHRhcmdldCBjYWNoZS5cclxuICAgICAqXHJcbiAgICAgKiBSZWxlYXNpbmcgYSBub24tZXhpc3RpbmcgYFRhcmdldGAgaXMgYSBuby1vcC5cclxuICAgICAqL1xyXG4gICAgLy8gUE9SVElORyBOT1RFOiBga2VlcFBlcnNpc3RlZFRhcmdldERhdGFgIGlzIG11bHRpLXRhYiBvbmx5LlxyXG4gICAgTG9jYWxTdG9yZS5wcm90b3R5cGUucmVsZWFzZVRhcmdldCA9IGZ1bmN0aW9uICh0YXJnZXRJZCwga2VlcFBlcnNpc3RlZFRhcmdldERhdGEpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhciB0YXJnZXREYXRhID0gdGhpcy50YXJnZXREYXRhQnlUYXJnZXQuZ2V0KHRhcmdldElkKTtcclxuICAgICAgICBhc3NlcnQodGFyZ2V0RGF0YSAhPT0gbnVsbCwgXCJUcmllZCB0byByZWxlYXNlIG5vbmV4aXN0ZW50IHRhcmdldDogXCIgKyB0YXJnZXRJZCk7XHJcbiAgICAgICAgdmFyIG1vZGUgPSBrZWVwUGVyc2lzdGVkVGFyZ2V0RGF0YVxyXG4gICAgICAgICAgICA/ICdyZWFkd3JpdGUtaWRlbXBvdGVudCdcclxuICAgICAgICAgICAgOiAncmVhZHdyaXRlLXByaW1hcnktaWRlbXBvdGVudCc7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucGVyc2lzdGVuY2VcclxuICAgICAgICAgICAgLnJ1blRyYW5zYWN0aW9uKCdSZWxlYXNlIHRhcmdldCcsIG1vZGUsIGZ1bmN0aW9uICh0eG4pIHtcclxuICAgICAgICAgICAgLy8gUmVmZXJlbmNlcyBmb3IgZG9jdW1lbnRzIHNlbnQgdmlhIFdhdGNoIGFyZSBhdXRvbWF0aWNhbGx5IHJlbW92ZWRcclxuICAgICAgICAgICAgLy8gd2hlbiB3ZSBkZWxldGUgYSB0YXJnZXQncyBkYXRhIGZyb20gdGhlIHJlZmVyZW5jZSBkZWxlZ2F0ZS5cclxuICAgICAgICAgICAgLy8gU2luY2UgdGhpcyBkb2VzIG5vdCByZW1vdmUgcmVmZXJlbmNlcyBmb3IgbG9jYWxseSBtdXRhdGVkIGRvY3VtZW50cyxcclxuICAgICAgICAgICAgLy8gd2UgaGF2ZSB0byByZW1vdmUgdGhlIHRhcmdldCBhc3NvY2lhdGlvbnMgZm9yIHRoZXNlIGRvY3VtZW50c1xyXG4gICAgICAgICAgICAvLyBtYW51YWxseS5cclxuICAgICAgICAgICAgLy8gVGhpcyBvcGVyYXRpb24gbmVlZHMgdG8gYmUgcnVuIGluc2lkZSB0aGUgdHJhbnNhY3Rpb24gc2luY2UgRWFnZXJHQ1xyXG4gICAgICAgICAgICAvLyB1c2VzIHRoZSBsb2NhbCB2aWV3IHJlZmVyZW5jZXMgZHVyaW5nIHRoZSB0cmFuc2FjdGlvbidzIGNvbW1pdC5cclxuICAgICAgICAgICAgLy8gRm9ydHVuYXRlbHksIHRoZSBvcGVyYXRpb24gaXMgc2FmZSB0byBiZSByZS1ydW4gaW4gY2FzZSB0aGVcclxuICAgICAgICAgICAgLy8gdHJhbnNhY3Rpb24gZmFpbHMgc2luY2UgdGhlcmUgYXJlIG5vIHNpZGUgZWZmZWN0cyBpZiB0aGUgdGFyZ2V0IGhhc1xyXG4gICAgICAgICAgICAvLyBhbHJlYWR5IGJlZW4gcmVtb3ZlZC5cclxuICAgICAgICAgICAgdmFyIHJlbW92ZWQgPSBfdGhpcy5sb2NhbFZpZXdSZWZlcmVuY2VzLnJlbW92ZVJlZmVyZW5jZXNGb3JJZCh0YXJnZXRJZCk7XHJcbiAgICAgICAgICAgIGlmICgha2VlcFBlcnNpc3RlZFRhcmdldERhdGEpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UuZm9yRWFjaChyZW1vdmVkLCBmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLnBlcnNpc3RlbmNlLnJlZmVyZW5jZURlbGVnYXRlLnJlbW92ZVJlZmVyZW5jZSh0eG4sIGtleSk7XHJcbiAgICAgICAgICAgICAgICB9KS5uZXh0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5wZXJzaXN0ZW5jZS5yZWZlcmVuY2VEZWxlZ2F0ZS5yZW1vdmVUYXJnZXQodHhuLCB0YXJnZXREYXRhKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIF90aGlzLnRhcmdldERhdGFCeVRhcmdldCA9IF90aGlzLnRhcmdldERhdGFCeVRhcmdldC5yZW1vdmUodGFyZ2V0SWQpO1xyXG4gICAgICAgICAgICBfdGhpcy50YXJnZXRJZEJ5VGFyZ2V0LmRlbGV0ZSh0YXJnZXREYXRhLnRhcmdldCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSdW5zIHRoZSBzcGVjaWZpZWQgcXVlcnkgYWdhaW5zdCB0aGUgbG9jYWwgc3RvcmUgYW5kIHJldHVybnMgdGhlIHJlc3VsdHMsXHJcbiAgICAgKiBwb3RlbnRpYWxseSB0YWtpbmcgYWR2YW50YWdlIG9mIHF1ZXJ5IGRhdGEgZnJvbSBwcmV2aW91cyBleGVjdXRpb25zIChzdWNoXHJcbiAgICAgKiBhcyB0aGUgc2V0IG9mIHJlbW90ZSBrZXlzKS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gdXNlUHJldmlvdXNSZXN1bHRzIFdoZXRoZXIgcmVzdWx0cyBmcm9tIHByZXZpb3VzIGV4ZWN1dGlvbnMgY2FuXHJcbiAgICAgKiBiZSB1c2VkIHRvIG9wdGltaXplIHRoaXMgcXVlcnkgZXhlY3V0aW9uLlxyXG4gICAgICovXHJcbiAgICBMb2NhbFN0b3JlLnByb3RvdHlwZS5leGVjdXRlUXVlcnkgPSBmdW5jdGlvbiAocXVlcnksIHVzZVByZXZpb3VzUmVzdWx0cykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIGxhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24gPSBTbmFwc2hvdFZlcnNpb24uTUlOO1xyXG4gICAgICAgIHZhciByZW1vdGVLZXlzID0gZG9jdW1lbnRLZXlTZXQoKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbignRXhlY3V0ZSBxdWVyeScsICdyZWFkb25seS1pZGVtcG90ZW50JywgZnVuY3Rpb24gKHR4bikge1xyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXMuZ2V0VGFyZ2V0RGF0YSh0eG4sIHF1ZXJ5LnRvVGFyZ2V0KCkpXHJcbiAgICAgICAgICAgICAgICAubmV4dChmdW5jdGlvbiAodGFyZ2V0RGF0YSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRhcmdldERhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICBsYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uID1cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0RGF0YS5sYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy50YXJnZXRDYWNoZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuZ2V0TWF0Y2hpbmdLZXlzRm9yVGFyZ2V0SWQodHhuLCB0YXJnZXREYXRhLnRhcmdldElkKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAubmV4dChmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlbW90ZUtleXMgPSByZXN1bHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAubmV4dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMucXVlcnlFbmdpbmUuZ2V0RG9jdW1lbnRzTWF0Y2hpbmdRdWVyeSh0eG4sIHF1ZXJ5LCB1c2VQcmV2aW91c1Jlc3VsdHNcclxuICAgICAgICAgICAgICAgICAgICA/IGxhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb25cclxuICAgICAgICAgICAgICAgICAgICA6IFNuYXBzaG90VmVyc2lvbi5NSU4sIHVzZVByZXZpb3VzUmVzdWx0cyA/IHJlbW90ZUtleXMgOiBkb2N1bWVudEtleVNldCgpKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uIChkb2N1bWVudHMpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7IGRvY3VtZW50czogZG9jdW1lbnRzLCByZW1vdGVLZXlzOiByZW1vdGVLZXlzIH07XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0aGUga2V5cyBvZiB0aGUgZG9jdW1lbnRzIHRoYXQgYXJlIGFzc29jaWF0ZWQgd2l0aCB0aGUgZ2l2ZW5cclxuICAgICAqIHRhcmdldCBpZCBpbiB0aGUgcmVtb3RlIHRhYmxlLlxyXG4gICAgICovXHJcbiAgICBMb2NhbFN0b3JlLnByb3RvdHlwZS5yZW1vdGVEb2N1bWVudEtleXMgPSBmdW5jdGlvbiAodGFyZ2V0SWQpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKCdSZW1vdGUgZG9jdW1lbnQga2V5cycsICdyZWFkb25seS1pZGVtcG90ZW50JywgZnVuY3Rpb24gKHR4bikge1xyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXMudGFyZ2V0Q2FjaGUuZ2V0TWF0Y2hpbmdLZXlzRm9yVGFyZ2V0SWQodHhuLCB0YXJnZXRJZCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS10YWIgb25seS5cclxuICAgIExvY2FsU3RvcmUucHJvdG90eXBlLmdldEFjdGl2ZUNsaWVudHMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucGVyc2lzdGVuY2UuZ2V0QWN0aXZlQ2xpZW50cygpO1xyXG4gICAgfTtcclxuICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktdGFiIG9ubHkuXHJcbiAgICBMb2NhbFN0b3JlLnByb3RvdHlwZS5yZW1vdmVDYWNoZWRNdXRhdGlvbkJhdGNoTWV0YWRhdGEgPSBmdW5jdGlvbiAoYmF0Y2hJZCkge1xyXG4gICAgICAgIHRoaXMubXV0YXRpb25RdWV1ZS5yZW1vdmVDYWNoZWRNdXRhdGlvbktleXMoYmF0Y2hJZCk7XHJcbiAgICB9O1xyXG4gICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS10YWIgb25seS5cclxuICAgIExvY2FsU3RvcmUucHJvdG90eXBlLnNldE5ldHdvcmtFbmFibGVkID0gZnVuY3Rpb24gKG5ldHdvcmtFbmFibGVkKSB7XHJcbiAgICAgICAgdGhpcy5wZXJzaXN0ZW5jZS5zZXROZXR3b3JrRW5hYmxlZChuZXR3b3JrRW5hYmxlZCk7XHJcbiAgICB9O1xyXG4gICAgTG9jYWxTdG9yZS5wcm90b3R5cGUuYXBwbHlXcml0ZVRvUmVtb3RlRG9jdW1lbnRzID0gZnVuY3Rpb24gKHR4biwgYmF0Y2hSZXN1bHQsIGRvY3VtZW50QnVmZmVyKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgYmF0Y2ggPSBiYXRjaFJlc3VsdC5iYXRjaDtcclxuICAgICAgICB2YXIgZG9jS2V5cyA9IGJhdGNoLmtleXMoKTtcclxuICAgICAgICB2YXIgcHJvbWlzZUNoYWluID0gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoKTtcclxuICAgICAgICBkb2NLZXlzLmZvckVhY2goZnVuY3Rpb24gKGRvY0tleSkge1xyXG4gICAgICAgICAgICBwcm9taXNlQ2hhaW4gPSBwcm9taXNlQ2hhaW5cclxuICAgICAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBkb2N1bWVudEJ1ZmZlci5nZXRFbnRyeSh0eG4sIGRvY0tleSk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAubmV4dChmdW5jdGlvbiAocmVtb3RlRG9jKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZG9jID0gcmVtb3RlRG9jO1xyXG4gICAgICAgICAgICAgICAgdmFyIGFja1ZlcnNpb24gPSBiYXRjaFJlc3VsdC5kb2NWZXJzaW9ucy5nZXQoZG9jS2V5KTtcclxuICAgICAgICAgICAgICAgIGFzc2VydChhY2tWZXJzaW9uICE9PSBudWxsLCAnYWNrVmVyc2lvbnMgc2hvdWxkIGNvbnRhaW4gZXZlcnkgZG9jIGluIHRoZSB3cml0ZS4nKTtcclxuICAgICAgICAgICAgICAgIGlmICghZG9jIHx8IGRvYy52ZXJzaW9uLmNvbXBhcmVUbyhhY2tWZXJzaW9uKSA8IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBkb2MgPSBiYXRjaC5hcHBseVRvUmVtb3RlRG9jdW1lbnQoZG9jS2V5LCBkb2MsIGJhdGNoUmVzdWx0KTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWRvYykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhc3NlcnQoIXJlbW90ZURvYywgJ011dGF0aW9uIGJhdGNoICcgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmF0Y2ggK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJyBhcHBsaWVkIHRvIGRvY3VtZW50ICcgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3RlRG9jICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICcgcmVzdWx0ZWQgaW4gbnVsbCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gV2UgdXNlIHRoZSBjb21taXRWZXJzaW9uIGFzIHRoZSByZWFkVGltZSByYXRoZXIgdGhhbiB0aGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZG9jdW1lbnQncyB1cGRhdGVUaW1lIHNpbmNlIHRoZSB1cGRhdGVUaW1lIGlzIG5vdCBhZHZhbmNlZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBmb3IgdXBkYXRlcyB0aGF0IGRvIG5vdCBtb2RpZnkgdGhlIHVuZGVybHlpbmcgZG9jdW1lbnQuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50QnVmZmVyLmFkZEVudHJ5KGRvYywgYmF0Y2hSZXN1bHQuY29tbWl0VmVyc2lvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gcHJvbWlzZUNoYWluLm5leHQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXMubXV0YXRpb25RdWV1ZS5yZW1vdmVNdXRhdGlvbkJhdGNoKHR4biwgYmF0Y2gpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIExvY2FsU3RvcmUucHJvdG90eXBlLmNvbGxlY3RHYXJiYWdlID0gZnVuY3Rpb24gKGdhcmJhZ2VDb2xsZWN0b3IpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKCdDb2xsZWN0IGdhcmJhZ2UnLCAncmVhZHdyaXRlLXByaW1hcnktaWRlbXBvdGVudCcsIGZ1bmN0aW9uICh0eG4pIHsgcmV0dXJuIGdhcmJhZ2VDb2xsZWN0b3IuY29sbGVjdCh0eG4sIF90aGlzLnRhcmdldERhdGFCeVRhcmdldCk7IH0pO1xyXG4gICAgfTtcclxuICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktdGFiIG9ubHkuXHJcbiAgICBMb2NhbFN0b3JlLnByb3RvdHlwZS5nZXRUYXJnZXQgPSBmdW5jdGlvbiAodGFyZ2V0SWQpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhciBjYWNoZWRUYXJnZXREYXRhID0gdGhpcy50YXJnZXREYXRhQnlUYXJnZXQuZ2V0KHRhcmdldElkKTtcclxuICAgICAgICBpZiAoY2FjaGVkVGFyZ2V0RGF0YSkge1xyXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGNhY2hlZFRhcmdldERhdGEudGFyZ2V0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKCdHZXQgdGFyZ2V0IGRhdGEnLCAncmVhZG9ubHktaWRlbXBvdGVudCcsIGZ1bmN0aW9uICh0eG4pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy50YXJnZXRDYWNoZVxyXG4gICAgICAgICAgICAgICAgICAgIC5nZXRUYXJnZXREYXRhRm9yVGFyZ2V0KHR4biwgdGFyZ2V0SWQpXHJcbiAgICAgICAgICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKHRhcmdldERhdGEpIHsgcmV0dXJuICh0YXJnZXREYXRhID8gdGFyZ2V0RGF0YS50YXJnZXQgOiBudWxsKTsgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdGhlIHNldCBvZiBkb2N1bWVudHMgdGhhdCBoYXZlIGJlZW4gdXBkYXRlZCBzaW5jZSB0aGUgbGFzdCBjYWxsLlxyXG4gICAgICogSWYgdGhpcyBpcyB0aGUgZmlyc3QgY2FsbCwgcmV0dXJucyB0aGUgc2V0IG9mIGNoYW5nZXMgc2luY2UgY2xpZW50XHJcbiAgICAgKiBpbml0aWFsaXphdGlvbi4gRnVydGhlciBpbnZvY2F0aW9ucyB3aWxsIHJldHVybiBkb2N1bWVudCBjaGFuZ2VzIHNpbmNlXHJcbiAgICAgKiB0aGUgcG9pbnQgb2YgcmVqZWN0aW9uLlxyXG4gICAgICovXHJcbiAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLXRhYiBvbmx5LlxyXG4gICAgTG9jYWxTdG9yZS5wcm90b3R5cGUuZ2V0TmV3RG9jdW1lbnRDaGFuZ2VzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucGVyc2lzdGVuY2VcclxuICAgICAgICAgICAgLnJ1blRyYW5zYWN0aW9uKCdHZXQgbmV3IGRvY3VtZW50IGNoYW5nZXMnLCAncmVhZG9ubHktaWRlbXBvdGVudCcsIGZ1bmN0aW9uICh0eG4pIHtcclxuICAgICAgICAgICAgcmV0dXJuIF90aGlzLnJlbW90ZURvY3VtZW50cy5nZXROZXdEb2N1bWVudENoYW5nZXModHhuLCBfdGhpcy5sYXN0RG9jdW1lbnRDaGFuZ2VSZWFkVGltZSk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgIHZhciBjaGFuZ2VkRG9jcyA9IF9hLmNoYW5nZWREb2NzLCByZWFkVGltZSA9IF9hLnJlYWRUaW1lO1xyXG4gICAgICAgICAgICBfdGhpcy5sYXN0RG9jdW1lbnRDaGFuZ2VSZWFkVGltZSA9IHJlYWRUaW1lO1xyXG4gICAgICAgICAgICByZXR1cm4gY2hhbmdlZERvY3M7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZWFkcyB0aGUgbmV3ZXN0IGRvY3VtZW50IGNoYW5nZSBmcm9tIHBlcnNpc3RlbmNlIGFuZCBmb3J3YXJkcyB0aGUgaW50ZXJuYWxcclxuICAgICAqIHN5bmNocm9uaXphdGlvbiBtYXJrZXIgc28gdGhhdCBjYWxscyB0byBgZ2V0TmV3RG9jdW1lbnRDaGFuZ2VzKClgXHJcbiAgICAgKiBvbmx5IHJldHVybiBjaGFuZ2VzIHRoYXQgaGFwcGVuZWQgYWZ0ZXIgY2xpZW50IGluaXRpYWxpemF0aW9uLlxyXG4gICAgICovXHJcbiAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLXRhYiBvbmx5LlxyXG4gICAgTG9jYWxTdG9yZS5wcm90b3R5cGUuc3luY2hyb25pemVMYXN0RG9jdW1lbnRDaGFuZ2VSZWFkVGltZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdHNsaWIuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciByZW1vdGVEb2N1bWVudENhY2hlXzE7XHJcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYi5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnJlbW90ZURvY3VtZW50cyBpbnN0YW5jZW9mIEluZGV4ZWREYlJlbW90ZURvY3VtZW50Q2FjaGUpIHtcclxuICAgICAgICAgICAgICAgICAgICByZW1vdGVEb2N1bWVudENhY2hlXzEgPSB0aGlzLnJlbW90ZURvY3VtZW50cztcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdGhpcy5wZXJzaXN0ZW5jZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJ1blRyYW5zYWN0aW9uKCdTeW5jaHJvbml6ZSBsYXN0IGRvY3VtZW50IGNoYW5nZSByZWFkIHRpbWUnLCAncmVhZG9ubHktaWRlbXBvdGVudCcsIGZ1bmN0aW9uICh0eG4pIHsgcmV0dXJuIHJlbW90ZURvY3VtZW50Q2FjaGVfMS5nZXRMYXN0RG9jdW1lbnRDaGFuZ2UodHhuKTsgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlYWRUaW1lID0gX2EucmVhZFRpbWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5sYXN0RG9jdW1lbnRDaGFuZ2VSZWFkVGltZSA9IHJlYWRUaW1lO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KV07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogVGhlIG1heGltdW0gdGltZSB0byBsZWF2ZSBhIHJlc3VtZSB0b2tlbiBidWZmZXJlZCB3aXRob3V0IHdyaXRpbmcgaXQgb3V0LlxyXG4gICAgICogVGhpcyB2YWx1ZSBpcyBhcmJpdHJhcnk6IGl0J3MgbG9uZyBlbm91Z2ggdG8gYXZvaWQgc2V2ZXJhbCB3cml0ZXNcclxuICAgICAqIChwb3NzaWJseSBpbmRlZmluaXRlbHkgaWYgdXBkYXRlcyBjb21lIG1vcmUgZnJlcXVlbnRseSB0aGFuIHRoaXMpIGJ1dFxyXG4gICAgICogc2hvcnQgZW5vdWdoIHRoYXQgcmVzdGFydGluZyBhZnRlciBjcmFzaGluZyB3aWxsIHN0aWxsIGhhdmUgYSBwcmV0dHlcclxuICAgICAqIHJlY2VudCByZXN1bWUgdG9rZW4uXHJcbiAgICAgKi9cclxuICAgIExvY2FsU3RvcmUuUkVTVU1FX1RPS0VOX01BWF9BR0VfTUlDUk9TID0gNSAqIDYwICogMWU2O1xyXG4gICAgcmV0dXJuIExvY2FsU3RvcmU7XHJcbn0oKSk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG52YXIgTWVtb3J5TXV0YXRpb25RdWV1ZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIE1lbW9yeU11dGF0aW9uUXVldWUoaW5kZXhNYW5hZ2VyLCByZWZlcmVuY2VEZWxlZ2F0ZSkge1xyXG4gICAgICAgIHRoaXMuaW5kZXhNYW5hZ2VyID0gaW5kZXhNYW5hZ2VyO1xyXG4gICAgICAgIHRoaXMucmVmZXJlbmNlRGVsZWdhdGUgPSByZWZlcmVuY2VEZWxlZ2F0ZTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBUaGUgc2V0IG9mIGFsbCBtdXRhdGlvbnMgdGhhdCBoYXZlIGJlZW4gc2VudCBidXQgbm90IHlldCBiZWVuIGFwcGxpZWQgdG9cclxuICAgICAgICAgKiB0aGUgYmFja2VuZC5cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLm11dGF0aW9uUXVldWUgPSBbXTtcclxuICAgICAgICAvKiogTmV4dCB2YWx1ZSB0byB1c2Ugd2hlbiBhc3NpZ25pbmcgc2VxdWVudGlhbCBJRHMgdG8gZWFjaCBtdXRhdGlvbiBiYXRjaC4gKi9cclxuICAgICAgICB0aGlzLm5leHRCYXRjaElkID0gMTtcclxuICAgICAgICAvKiogVGhlIGxhc3QgcmVjZWl2ZWQgc3RyZWFtIHRva2VuIGZyb20gdGhlIHNlcnZlciwgdXNlZCB0byBhY2tub3dsZWRnZSB3aGljaFxyXG4gICAgICAgICAqIHJlc3BvbnNlcyB0aGUgY2xpZW50IGhhcyBwcm9jZXNzZWQuIFN0cmVhbSB0b2tlbnMgYXJlIG9wYXF1ZSBjaGVja3BvaW50XHJcbiAgICAgICAgICogbWFya2VycyB3aG9zZSBvbmx5IHJlYWwgdmFsdWUgaXMgdGhlaXIgaW5jbHVzaW9uIGluIHRoZSBuZXh0IHJlcXVlc3QuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5sYXN0U3RyZWFtVG9rZW4gPSBlbXB0eUJ5dGVTdHJpbmcoKTtcclxuICAgICAgICAvKiogQW4gb3JkZXJlZCBtYXBwaW5nIGJldHdlZW4gZG9jdW1lbnRzIGFuZCB0aGUgbXV0YXRpb25zIGJhdGNoIElEcy4gKi9cclxuICAgICAgICB0aGlzLmJhdGNoZXNCeURvY3VtZW50S2V5ID0gbmV3IFNvcnRlZFNldChEb2NSZWZlcmVuY2UuY29tcGFyZUJ5S2V5KTtcclxuICAgIH1cclxuICAgIE1lbW9yeU11dGF0aW9uUXVldWUucHJvdG90eXBlLmNoZWNrRW1wdHkgPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24pIHtcclxuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUodGhpcy5tdXRhdGlvblF1ZXVlLmxlbmd0aCA9PT0gMCk7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5TXV0YXRpb25RdWV1ZS5wcm90b3R5cGUuYWNrbm93bGVkZ2VCYXRjaCA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwgYmF0Y2gsIHN0cmVhbVRva2VuKSB7XHJcbiAgICAgICAgdmFyIGJhdGNoSWQgPSBiYXRjaC5iYXRjaElkO1xyXG4gICAgICAgIHZhciBiYXRjaEluZGV4ID0gdGhpcy5pbmRleE9mRXhpc3RpbmdCYXRjaElkKGJhdGNoSWQsICdhY2tub3dsZWRnZWQnKTtcclxuICAgICAgICBhc3NlcnQoYmF0Y2hJbmRleCA9PT0gMCwgJ0NhbiBvbmx5IGFja25vd2xlZGdlIHRoZSBmaXJzdCBiYXRjaCBpbiB0aGUgbXV0YXRpb24gcXVldWUnKTtcclxuICAgICAgICAvLyBWZXJpZnkgdGhhdCB0aGUgYmF0Y2ggaW4gdGhlIHF1ZXVlIGlzIHRoZSBvbmUgdG8gYmUgYWNrbm93bGVkZ2VkLlxyXG4gICAgICAgIHZhciBjaGVjayA9IHRoaXMubXV0YXRpb25RdWV1ZVtiYXRjaEluZGV4XTtcclxuICAgICAgICBhc3NlcnQoYmF0Y2hJZCA9PT0gY2hlY2suYmF0Y2hJZCwgJ1F1ZXVlIG9yZGVyaW5nIGZhaWx1cmU6IGV4cGVjdGVkIGJhdGNoICcgK1xyXG4gICAgICAgICAgICBiYXRjaElkICtcclxuICAgICAgICAgICAgJywgZ290IGJhdGNoICcgK1xyXG4gICAgICAgICAgICBjaGVjay5iYXRjaElkKTtcclxuICAgICAgICB0aGlzLmxhc3RTdHJlYW1Ub2tlbiA9IHN0cmVhbVRva2VuO1xyXG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgfTtcclxuICAgIE1lbW9yeU11dGF0aW9uUXVldWUucHJvdG90eXBlLmdldExhc3RTdHJlYW1Ub2tlbiA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbikge1xyXG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSh0aGlzLmxhc3RTdHJlYW1Ub2tlbik7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5TXV0YXRpb25RdWV1ZS5wcm90b3R5cGUuc2V0TGFzdFN0cmVhbVRva2VuID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCBzdHJlYW1Ub2tlbikge1xyXG4gICAgICAgIHRoaXMubGFzdFN0cmVhbVRva2VuID0gc3RyZWFtVG9rZW47XHJcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5TXV0YXRpb25RdWV1ZS5wcm90b3R5cGUuYWRkTXV0YXRpb25CYXRjaCA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwgbG9jYWxXcml0ZVRpbWUsIGJhc2VNdXRhdGlvbnMsIG11dGF0aW9ucykge1xyXG4gICAgICAgIGFzc2VydChtdXRhdGlvbnMubGVuZ3RoICE9PSAwLCAnTXV0YXRpb24gYmF0Y2hlcyBzaG91bGQgbm90IGJlIGVtcHR5Jyk7XHJcbiAgICAgICAgdmFyIGJhdGNoSWQgPSB0aGlzLm5leHRCYXRjaElkO1xyXG4gICAgICAgIHRoaXMubmV4dEJhdGNoSWQrKztcclxuICAgICAgICBpZiAodGhpcy5tdXRhdGlvblF1ZXVlLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgdmFyIHByaW9yID0gdGhpcy5tdXRhdGlvblF1ZXVlW3RoaXMubXV0YXRpb25RdWV1ZS5sZW5ndGggLSAxXTtcclxuICAgICAgICAgICAgYXNzZXJ0KHByaW9yLmJhdGNoSWQgPCBiYXRjaElkLCAnTXV0YXRpb24gYmF0Y2hJRHMgbXVzdCBiZSBtb25vdG9uaWNhbGx5IGluY3JlYXNpbmcgb3JkZXInKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGJhdGNoID0gbmV3IE11dGF0aW9uQmF0Y2goYmF0Y2hJZCwgbG9jYWxXcml0ZVRpbWUsIGJhc2VNdXRhdGlvbnMsIG11dGF0aW9ucyk7XHJcbiAgICAgICAgdGhpcy5tdXRhdGlvblF1ZXVlLnB1c2goYmF0Y2gpO1xyXG4gICAgICAgIC8vIFRyYWNrIHJlZmVyZW5jZXMgYnkgZG9jdW1lbnQga2V5IGFuZCBpbmRleCBjb2xsZWN0aW9uIHBhcmVudHMuXHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBtdXRhdGlvbnNfMSA9IG11dGF0aW9uczsgX2kgPCBtdXRhdGlvbnNfMS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgdmFyIG11dGF0aW9uID0gbXV0YXRpb25zXzFbX2ldO1xyXG4gICAgICAgICAgICB0aGlzLmJhdGNoZXNCeURvY3VtZW50S2V5ID0gdGhpcy5iYXRjaGVzQnlEb2N1bWVudEtleS5hZGQobmV3IERvY1JlZmVyZW5jZShtdXRhdGlvbi5rZXksIGJhdGNoSWQpKTtcclxuICAgICAgICAgICAgdGhpcy5pbmRleE1hbmFnZXIuYWRkVG9Db2xsZWN0aW9uUGFyZW50SW5kZXgodHJhbnNhY3Rpb24sIG11dGF0aW9uLmtleS5wYXRoLnBvcExhc3QoKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZShiYXRjaCk7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5TXV0YXRpb25RdWV1ZS5wcm90b3R5cGUubG9va3VwTXV0YXRpb25CYXRjaCA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwgYmF0Y2hJZCkge1xyXG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSh0aGlzLmZpbmRNdXRhdGlvbkJhdGNoKGJhdGNoSWQpKTtcclxuICAgIH07XHJcbiAgICBNZW1vcnlNdXRhdGlvblF1ZXVlLnByb3RvdHlwZS5sb29rdXBNdXRhdGlvbktleXMgPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24sIGJhdGNoSWQpIHtcclxuICAgICAgICB2YXIgbXV0YXRpb25CYXRjaCA9IHRoaXMuZmluZE11dGF0aW9uQmF0Y2goYmF0Y2hJZCk7XHJcbiAgICAgICAgYXNzZXJ0KG11dGF0aW9uQmF0Y2ggIT0gbnVsbCwgJ0ZhaWxlZCB0byBmaW5kIGxvY2FsIG11dGF0aW9uIGJhdGNoLicpO1xyXG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZShtdXRhdGlvbkJhdGNoLmtleXMoKSk7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5TXV0YXRpb25RdWV1ZS5wcm90b3R5cGUuZ2V0TmV4dE11dGF0aW9uQmF0Y2hBZnRlckJhdGNoSWQgPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24sIGJhdGNoSWQpIHtcclxuICAgICAgICB2YXIgbmV4dEJhdGNoSWQgPSBiYXRjaElkICsgMTtcclxuICAgICAgICAvLyBUaGUgcmVxdWVzdGVkIGJhdGNoSWQgbWF5IHN0aWxsIGJlIG91dCBvZiByYW5nZSBzbyBub3JtYWxpemUgaXQgdG8gdGhlXHJcbiAgICAgICAgLy8gc3RhcnQgb2YgdGhlIHF1ZXVlLlxyXG4gICAgICAgIHZhciByYXdJbmRleCA9IHRoaXMuaW5kZXhPZkJhdGNoSWQobmV4dEJhdGNoSWQpO1xyXG4gICAgICAgIHZhciBpbmRleCA9IHJhd0luZGV4IDwgMCA/IDAgOiByYXdJbmRleDtcclxuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUodGhpcy5tdXRhdGlvblF1ZXVlLmxlbmd0aCA+IGluZGV4ID8gdGhpcy5tdXRhdGlvblF1ZXVlW2luZGV4XSA6IG51bGwpO1xyXG4gICAgfTtcclxuICAgIE1lbW9yeU11dGF0aW9uUXVldWUucHJvdG90eXBlLmdldEhpZ2hlc3RVbmFja25vd2xlZGdlZEJhdGNoSWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKHRoaXMubXV0YXRpb25RdWV1ZS5sZW5ndGggPT09IDAgPyBCQVRDSElEX1VOS05PV04gOiB0aGlzLm5leHRCYXRjaElkIC0gMSk7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5TXV0YXRpb25RdWV1ZS5wcm90b3R5cGUuZ2V0QWxsTXV0YXRpb25CYXRjaGVzID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uKSB7XHJcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKHRoaXMubXV0YXRpb25RdWV1ZS5zbGljZSgpKTtcclxuICAgIH07XHJcbiAgICBNZW1vcnlNdXRhdGlvblF1ZXVlLnByb3RvdHlwZS5nZXRBbGxNdXRhdGlvbkJhdGNoZXNBZmZlY3RpbmdEb2N1bWVudEtleSA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwgZG9jdW1lbnRLZXkpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhciBzdGFydCA9IG5ldyBEb2NSZWZlcmVuY2UoZG9jdW1lbnRLZXksIDApO1xyXG4gICAgICAgIHZhciBlbmQgPSBuZXcgRG9jUmVmZXJlbmNlKGRvY3VtZW50S2V5LCBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFkpO1xyXG4gICAgICAgIHZhciByZXN1bHQgPSBbXTtcclxuICAgICAgICB0aGlzLmJhdGNoZXNCeURvY3VtZW50S2V5LmZvckVhY2hJblJhbmdlKFtzdGFydCwgZW5kXSwgZnVuY3Rpb24gKHJlZikge1xyXG4gICAgICAgICAgICBhc3NlcnQoZG9jdW1lbnRLZXkuaXNFcXVhbChyZWYua2V5KSwgXCJTaG91bGQgb25seSBpdGVyYXRlIG92ZXIgYSBzaW5nbGUga2V5J3MgYmF0Y2hlc1wiKTtcclxuICAgICAgICAgICAgdmFyIGJhdGNoID0gX3RoaXMuZmluZE11dGF0aW9uQmF0Y2gocmVmLnRhcmdldE9yQmF0Y2hJZCk7XHJcbiAgICAgICAgICAgIGFzc2VydChiYXRjaCAhPT0gbnVsbCwgJ0JhdGNoZXMgaW4gdGhlIGluZGV4IG11c3QgZXhpc3QgaW4gdGhlIG1haW4gdGFibGUnKTtcclxuICAgICAgICAgICAgcmVzdWx0LnB1c2goYmF0Y2gpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZShyZXN1bHQpO1xyXG4gICAgfTtcclxuICAgIE1lbW9yeU11dGF0aW9uUXVldWUucHJvdG90eXBlLmdldEFsbE11dGF0aW9uQmF0Y2hlc0FmZmVjdGluZ0RvY3VtZW50S2V5cyA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwgZG9jdW1lbnRLZXlzKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgdW5pcXVlQmF0Y2hJRHMgPSBuZXcgU29ydGVkU2V0KHByaW1pdGl2ZUNvbXBhcmF0b3IpO1xyXG4gICAgICAgIGRvY3VtZW50S2V5cy5mb3JFYWNoKGZ1bmN0aW9uIChkb2N1bWVudEtleSkge1xyXG4gICAgICAgICAgICB2YXIgc3RhcnQgPSBuZXcgRG9jUmVmZXJlbmNlKGRvY3VtZW50S2V5LCAwKTtcclxuICAgICAgICAgICAgdmFyIGVuZCA9IG5ldyBEb2NSZWZlcmVuY2UoZG9jdW1lbnRLZXksIE51bWJlci5QT1NJVElWRV9JTkZJTklUWSk7XHJcbiAgICAgICAgICAgIF90aGlzLmJhdGNoZXNCeURvY3VtZW50S2V5LmZvckVhY2hJblJhbmdlKFtzdGFydCwgZW5kXSwgZnVuY3Rpb24gKHJlZikge1xyXG4gICAgICAgICAgICAgICAgYXNzZXJ0KGRvY3VtZW50S2V5LmlzRXF1YWwocmVmLmtleSksIFwiRm9yIGVhY2gga2V5LCBzaG91bGQgb25seSBpdGVyYXRlIG92ZXIgYSBzaW5nbGUga2V5J3MgYmF0Y2hlc1wiKTtcclxuICAgICAgICAgICAgICAgIHVuaXF1ZUJhdGNoSURzID0gdW5pcXVlQmF0Y2hJRHMuYWRkKHJlZi50YXJnZXRPckJhdGNoSWQpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUodGhpcy5maW5kTXV0YXRpb25CYXRjaGVzKHVuaXF1ZUJhdGNoSURzKSk7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5TXV0YXRpb25RdWV1ZS5wcm90b3R5cGUuZ2V0QWxsTXV0YXRpb25CYXRjaGVzQWZmZWN0aW5nUXVlcnkgPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24sIHF1ZXJ5KSB7XHJcbiAgICAgICAgYXNzZXJ0KCFxdWVyeS5pc0NvbGxlY3Rpb25Hcm91cFF1ZXJ5KCksICdDb2xsZWN0aW9uR3JvdXAgcXVlcmllcyBzaG91bGQgYmUgaGFuZGxlZCBpbiBMb2NhbERvY3VtZW50c1ZpZXcnKTtcclxuICAgICAgICAvLyBVc2UgdGhlIHF1ZXJ5IHBhdGggYXMgYSBwcmVmaXggZm9yIHRlc3RpbmcgaWYgYSBkb2N1bWVudCBtYXRjaGVzIHRoZVxyXG4gICAgICAgIC8vIHF1ZXJ5LlxyXG4gICAgICAgIHZhciBwcmVmaXggPSBxdWVyeS5wYXRoO1xyXG4gICAgICAgIHZhciBpbW1lZGlhdGVDaGlsZHJlblBhdGhMZW5ndGggPSBwcmVmaXgubGVuZ3RoICsgMTtcclxuICAgICAgICAvLyBDb25zdHJ1Y3QgYSBkb2N1bWVudCByZWZlcmVuY2UgZm9yIGFjdHVhbGx5IHNjYW5uaW5nIHRoZSBpbmRleC4gVW5saWtlXHJcbiAgICAgICAgLy8gdGhlIHByZWZpeCB0aGUgZG9jdW1lbnQga2V5IGluIHRoaXMgcmVmZXJlbmNlIG11c3QgaGF2ZSBhbiBldmVuIG51bWJlciBvZlxyXG4gICAgICAgIC8vIHNlZ21lbnRzLiBUaGUgZW1wdHkgc2VnbWVudCBjYW4gYmUgdXNlZCBhIHN1ZmZpeCBvZiB0aGUgcXVlcnkgcGF0aFxyXG4gICAgICAgIC8vIGJlY2F1c2UgaXQgcHJlY2VkZXMgYWxsIG90aGVyIHNlZ21lbnRzIGluIGFuIG9yZGVyZWQgdHJhdmVyc2FsLlxyXG4gICAgICAgIHZhciBzdGFydFBhdGggPSBwcmVmaXg7XHJcbiAgICAgICAgaWYgKCFEb2N1bWVudEtleS5pc0RvY3VtZW50S2V5KHN0YXJ0UGF0aCkpIHtcclxuICAgICAgICAgICAgc3RhcnRQYXRoID0gc3RhcnRQYXRoLmNoaWxkKCcnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIHN0YXJ0ID0gbmV3IERvY1JlZmVyZW5jZShuZXcgRG9jdW1lbnRLZXkoc3RhcnRQYXRoKSwgMCk7XHJcbiAgICAgICAgLy8gRmluZCB1bmlxdWUgYmF0Y2hJRHMgcmVmZXJlbmNlZCBieSBhbGwgZG9jdW1lbnRzIHBvdGVudGlhbGx5IG1hdGNoaW5nIHRoZVxyXG4gICAgICAgIC8vIHF1ZXJ5LlxyXG4gICAgICAgIHZhciB1bmlxdWVCYXRjaElEcyA9IG5ldyBTb3J0ZWRTZXQocHJpbWl0aXZlQ29tcGFyYXRvcik7XHJcbiAgICAgICAgdGhpcy5iYXRjaGVzQnlEb2N1bWVudEtleS5mb3JFYWNoV2hpbGUoZnVuY3Rpb24gKHJlZikge1xyXG4gICAgICAgICAgICB2YXIgcm93S2V5UGF0aCA9IHJlZi5rZXkucGF0aDtcclxuICAgICAgICAgICAgaWYgKCFwcmVmaXguaXNQcmVmaXhPZihyb3dLZXlQYXRoKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gUm93cyB3aXRoIGRvY3VtZW50IGtleXMgbW9yZSB0aGFuIG9uZSBzZWdtZW50IGxvbmdlciB0aGFuIHRoZSBxdWVyeVxyXG4gICAgICAgICAgICAgICAgLy8gcGF0aCBjYW4ndCBiZSBtYXRjaGVzLiBGb3IgZXhhbXBsZSwgYSBxdWVyeSBvbiAncm9vbXMnIGNhbid0IG1hdGNoXHJcbiAgICAgICAgICAgICAgICAvLyB0aGUgZG9jdW1lbnQgL3Jvb21zL2FiYy9tZXNzYWdlcy94eXguXHJcbiAgICAgICAgICAgICAgICAvLyBUT0RPKG1jZyk6IHdlJ2xsIG5lZWQgYSBkaWZmZXJlbnQgc2Nhbm5lciB3aGVuIHdlIGltcGxlbWVudFxyXG4gICAgICAgICAgICAgICAgLy8gYW5jZXN0b3IgcXVlcmllcy5cclxuICAgICAgICAgICAgICAgIGlmIChyb3dLZXlQYXRoLmxlbmd0aCA9PT0gaW1tZWRpYXRlQ2hpbGRyZW5QYXRoTGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdW5pcXVlQmF0Y2hJRHMgPSB1bmlxdWVCYXRjaElEcy5hZGQocmVmLnRhcmdldE9yQmF0Y2hJZCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sIHN0YXJ0KTtcclxuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUodGhpcy5maW5kTXV0YXRpb25CYXRjaGVzKHVuaXF1ZUJhdGNoSURzKSk7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5TXV0YXRpb25RdWV1ZS5wcm90b3R5cGUuZmluZE11dGF0aW9uQmF0Y2hlcyA9IGZ1bmN0aW9uIChiYXRjaElEcykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgLy8gQ29uc3RydWN0IGFuIGFycmF5IG9mIG1hdGNoaW5nIGJhdGNoZXMsIHNvcnRlZCBieSBiYXRjaElEIHRvIGVuc3VyZSB0aGF0XHJcbiAgICAgICAgLy8gbXVsdGlwbGUgbXV0YXRpb25zIGFmZmVjdGluZyB0aGUgc2FtZSBkb2N1bWVudCBrZXkgYXJlIGFwcGxpZWQgaW4gb3JkZXIuXHJcbiAgICAgICAgdmFyIHJlc3VsdCA9IFtdO1xyXG4gICAgICAgIGJhdGNoSURzLmZvckVhY2goZnVuY3Rpb24gKGJhdGNoSWQpIHtcclxuICAgICAgICAgICAgdmFyIGJhdGNoID0gX3RoaXMuZmluZE11dGF0aW9uQmF0Y2goYmF0Y2hJZCk7XHJcbiAgICAgICAgICAgIGlmIChiYXRjaCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0LnB1c2goYmF0Y2gpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH07XHJcbiAgICBNZW1vcnlNdXRhdGlvblF1ZXVlLnByb3RvdHlwZS5yZW1vdmVNdXRhdGlvbkJhdGNoID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCBiYXRjaCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgLy8gRmluZCB0aGUgcG9zaXRpb24gb2YgdGhlIGZpcnN0IGJhdGNoIGZvciByZW1vdmFsLiBUaGlzIG5lZWQgbm90IGJlIHRoZVxyXG4gICAgICAgIC8vIGZpcnN0IGVudHJ5IGluIHRoZSBxdWV1ZS5cclxuICAgICAgICB2YXIgYmF0Y2hJbmRleCA9IHRoaXMuaW5kZXhPZkV4aXN0aW5nQmF0Y2hJZChiYXRjaC5iYXRjaElkLCAncmVtb3ZlZCcpO1xyXG4gICAgICAgIGFzc2VydChiYXRjaEluZGV4ID09PSAwLCAnQ2FuIG9ubHkgcmVtb3ZlIHRoZSBmaXJzdCBlbnRyeSBvZiB0aGUgbXV0YXRpb24gcXVldWUnKTtcclxuICAgICAgICB0aGlzLm11dGF0aW9uUXVldWUuc2hpZnQoKTtcclxuICAgICAgICB2YXIgcmVmZXJlbmNlcyA9IHRoaXMuYmF0Y2hlc0J5RG9jdW1lbnRLZXk7XHJcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5mb3JFYWNoKGJhdGNoLm11dGF0aW9ucywgZnVuY3Rpb24gKG11dGF0aW9uKSB7XHJcbiAgICAgICAgICAgIHZhciByZWYgPSBuZXcgRG9jUmVmZXJlbmNlKG11dGF0aW9uLmtleSwgYmF0Y2guYmF0Y2hJZCk7XHJcbiAgICAgICAgICAgIHJlZmVyZW5jZXMgPSByZWZlcmVuY2VzLmRlbGV0ZShyZWYpO1xyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXMucmVmZXJlbmNlRGVsZWdhdGUucmVtb3ZlTXV0YXRpb25SZWZlcmVuY2UodHJhbnNhY3Rpb24sIG11dGF0aW9uLmtleSk7XHJcbiAgICAgICAgfSkubmV4dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIF90aGlzLmJhdGNoZXNCeURvY3VtZW50S2V5ID0gcmVmZXJlbmNlcztcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBNZW1vcnlNdXRhdGlvblF1ZXVlLnByb3RvdHlwZS5yZW1vdmVDYWNoZWRNdXRhdGlvbktleXMgPSBmdW5jdGlvbiAoYmF0Y2hJZCkge1xyXG4gICAgICAgIC8vIE5vLW9wIHNpbmNlIHRoZSBtZW1vcnkgbXV0YXRpb24gcXVldWUgZG9lcyBub3QgbWFpbnRhaW4gYSBzZXBhcmF0ZSBjYWNoZS5cclxuICAgIH07XHJcbiAgICBNZW1vcnlNdXRhdGlvblF1ZXVlLnByb3RvdHlwZS5jb250YWluc0tleSA9IGZ1bmN0aW9uICh0eG4sIGtleSkge1xyXG4gICAgICAgIHZhciByZWYgPSBuZXcgRG9jUmVmZXJlbmNlKGtleSwgMCk7XHJcbiAgICAgICAgdmFyIGZpcnN0UmVmID0gdGhpcy5iYXRjaGVzQnlEb2N1bWVudEtleS5maXJzdEFmdGVyT3JFcXVhbChyZWYpO1xyXG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZShrZXkuaXNFcXVhbChmaXJzdFJlZiAmJiBmaXJzdFJlZi5rZXkpKTtcclxuICAgIH07XHJcbiAgICBNZW1vcnlNdXRhdGlvblF1ZXVlLnByb3RvdHlwZS5wZXJmb3JtQ29uc2lzdGVuY3lDaGVjayA9IGZ1bmN0aW9uICh0eG4pIHtcclxuICAgICAgICBpZiAodGhpcy5tdXRhdGlvblF1ZXVlLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICBhc3NlcnQodGhpcy5iYXRjaGVzQnlEb2N1bWVudEtleS5pc0VtcHR5KCksICdEb2N1bWVudCBsZWFrIC0tIGRldGVjdGVkIGRhbmdsaW5nIG11dGF0aW9uIHJlZmVyZW5jZXMgd2hlbiBxdWV1ZSBpcyBlbXB0eS4nKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBGaW5kcyB0aGUgaW5kZXggb2YgdGhlIGdpdmVuIGJhdGNoSWQgaW4gdGhlIG11dGF0aW9uIHF1ZXVlIGFuZCBhc3NlcnRzIHRoYXRcclxuICAgICAqIHRoZSByZXN1bHRpbmcgaW5kZXggaXMgd2l0aGluIHRoZSBib3VuZHMgb2YgdGhlIHF1ZXVlLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBiYXRjaElkIFRoZSBiYXRjaElkIHRvIHNlYXJjaCBmb3JcclxuICAgICAqIEBwYXJhbSBhY3Rpb24gQSBkZXNjcmlwdGlvbiBvZiB3aGF0IHRoZSBjYWxsZXIgaXMgZG9pbmcsIHBocmFzZWQgaW4gcGFzc2l2ZVxyXG4gICAgICogZm9ybSAoZS5nLiBcImFja25vd2xlZGdlZFwiIGluIGEgcm91dGluZSB0aGF0IGFja25vd2xlZGdlcyBiYXRjaGVzKS5cclxuICAgICAqL1xyXG4gICAgTWVtb3J5TXV0YXRpb25RdWV1ZS5wcm90b3R5cGUuaW5kZXhPZkV4aXN0aW5nQmF0Y2hJZCA9IGZ1bmN0aW9uIChiYXRjaElkLCBhY3Rpb24pIHtcclxuICAgICAgICB2YXIgaW5kZXggPSB0aGlzLmluZGV4T2ZCYXRjaElkKGJhdGNoSWQpO1xyXG4gICAgICAgIGFzc2VydChpbmRleCA+PSAwICYmIGluZGV4IDwgdGhpcy5tdXRhdGlvblF1ZXVlLmxlbmd0aCwgJ0JhdGNoZXMgbXVzdCBleGlzdCB0byBiZSAnICsgYWN0aW9uKTtcclxuICAgICAgICByZXR1cm4gaW5kZXg7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBGaW5kcyB0aGUgaW5kZXggb2YgdGhlIGdpdmVuIGJhdGNoSWQgaW4gdGhlIG11dGF0aW9uIHF1ZXVlLiBUaGlzIG9wZXJhdGlvblxyXG4gICAgICogaXMgTygxKS5cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJuIFRoZSBjb21wdXRlZCBpbmRleCBvZiB0aGUgYmF0Y2ggd2l0aCB0aGUgZ2l2ZW4gYmF0Y2hJZCwgYmFzZWQgb25cclxuICAgICAqIHRoZSBzdGF0ZSBvZiB0aGUgcXVldWUuIE5vdGUgdGhpcyBpbmRleCBjYW4gYmUgbmVnYXRpdmUgaWYgdGhlIHJlcXVlc3RlZFxyXG4gICAgICogYmF0Y2hJZCBoYXMgYWxyZWFkeSBiZWVuIHJlbXZvZWQgZnJvbSB0aGUgcXVldWUgb3IgcGFzdCB0aGUgZW5kIG9mIHRoZVxyXG4gICAgICogcXVldWUgaWYgdGhlIGJhdGNoSWQgaXMgbGFyZ2VyIHRoYW4gdGhlIGxhc3QgYWRkZWQgYmF0Y2guXHJcbiAgICAgKi9cclxuICAgIE1lbW9yeU11dGF0aW9uUXVldWUucHJvdG90eXBlLmluZGV4T2ZCYXRjaElkID0gZnVuY3Rpb24gKGJhdGNoSWQpIHtcclxuICAgICAgICBpZiAodGhpcy5tdXRhdGlvblF1ZXVlLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAvLyBBcyBhbiBpbmRleCB0aGlzIGlzIHBhc3QgdGhlIGVuZCBvZiB0aGUgcXVldWVcclxuICAgICAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIEV4YW1pbmUgdGhlIGZyb250IG9mIHRoZSBxdWV1ZSB0byBmaWd1cmUgb3V0IHRoZSBkaWZmZXJlbmNlIGJldHdlZW4gdGhlXHJcbiAgICAgICAgLy8gYmF0Y2hJZCBhbmQgaW5kZXhlcyBpbiB0aGUgYXJyYXkuIE5vdGUgdGhhdCBzaW5jZSB0aGUgcXVldWUgaXMgb3JkZXJlZFxyXG4gICAgICAgIC8vIGJ5IGJhdGNoSWQsIGlmIHRoZSBmaXJzdCBiYXRjaCBoYXMgYSBsYXJnZXIgYmF0Y2hJZCB0aGVuIHRoZSByZXF1ZXN0ZWRcclxuICAgICAgICAvLyBiYXRjaElkIGRvZXNuJ3QgZXhpc3QgaW4gdGhlIHF1ZXVlLlxyXG4gICAgICAgIHZhciBmaXJzdEJhdGNoSWQgPSB0aGlzLm11dGF0aW9uUXVldWVbMF0uYmF0Y2hJZDtcclxuICAgICAgICByZXR1cm4gYmF0Y2hJZCAtIGZpcnN0QmF0Y2hJZDtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEEgdmVyc2lvbiBvZiBsb29rdXBNdXRhdGlvbkJhdGNoIHRoYXQgZG9lc24ndCByZXR1cm4gYSBwcm9taXNlLCB0aGlzIG1ha2VzXHJcbiAgICAgKiBvdGhlciBmdW5jdGlvbnMgdGhhdCB1c2VzIHRoaXMgY29kZSBlYXNpZXIgdG8gcmVhZCBhbmQgbW9yZSBlZmZpY2VudC5cclxuICAgICAqL1xyXG4gICAgTWVtb3J5TXV0YXRpb25RdWV1ZS5wcm90b3R5cGUuZmluZE11dGF0aW9uQmF0Y2ggPSBmdW5jdGlvbiAoYmF0Y2hJZCkge1xyXG4gICAgICAgIHZhciBpbmRleCA9IHRoaXMuaW5kZXhPZkJhdGNoSWQoYmF0Y2hJZCk7XHJcbiAgICAgICAgaWYgKGluZGV4IDwgMCB8fCBpbmRleCA+PSB0aGlzLm11dGF0aW9uUXVldWUubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgYmF0Y2ggPSB0aGlzLm11dGF0aW9uUXVldWVbaW5kZXhdO1xyXG4gICAgICAgIGFzc2VydChiYXRjaC5iYXRjaElkID09PSBiYXRjaElkLCAnSWYgZm91bmQgYmF0Y2ggbXVzdCBtYXRjaCcpO1xyXG4gICAgICAgIHJldHVybiBiYXRjaDtcclxuICAgIH07XHJcbiAgICByZXR1cm4gTWVtb3J5TXV0YXRpb25RdWV1ZTtcclxufSgpKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIGRvY3VtZW50RW50cnlNYXAoKSB7XHJcbiAgICByZXR1cm4gbmV3IFNvcnRlZE1hcChEb2N1bWVudEtleS5jb21wYXJhdG9yKTtcclxufVxyXG52YXIgTWVtb3J5UmVtb3RlRG9jdW1lbnRDYWNoZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIHNpemVyIFVzZWQgdG8gYXNzZXNzIHRoZSBzaXplIG9mIGEgZG9jdW1lbnQuIEZvciBlYWdlciBHQywgdGhpcyBpcyBleHBlY3RlZCB0byBqdXN0XHJcbiAgICAgKiByZXR1cm4gMCB0byBhdm9pZCB1bm5lY2Vzc2FyaWx5IGRvaW5nIHRoZSB3b3JrIG9mIGNhbGN1bGF0aW5nIHRoZSBzaXplLlxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBNZW1vcnlSZW1vdGVEb2N1bWVudENhY2hlKGluZGV4TWFuYWdlciwgc2l6ZXIpIHtcclxuICAgICAgICB0aGlzLmluZGV4TWFuYWdlciA9IGluZGV4TWFuYWdlcjtcclxuICAgICAgICB0aGlzLnNpemVyID0gc2l6ZXI7XHJcbiAgICAgICAgLyoqIFVuZGVybHlpbmcgY2FjaGUgb2YgZG9jdW1lbnRzIGFuZCB0aGVpciByZWFkIHRpbWVzLiAqL1xyXG4gICAgICAgIHRoaXMuZG9jcyA9IGRvY3VtZW50RW50cnlNYXAoKTtcclxuICAgICAgICAvKiogU2l6ZSBvZiBhbGwgY2FjaGVkIGRvY3VtZW50cy4gKi9cclxuICAgICAgICB0aGlzLnNpemUgPSAwO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBBZGRzIHRoZSBzdXBwbGllZCBlbnRyeSB0byB0aGUgY2FjaGUgYW5kIHVwZGF0ZXMgdGhlIGNhY2hlIHNpemUgYXMgYXBwcm9wcmlhdGUuXHJcbiAgICAgKlxyXG4gICAgICogQWxsIGNhbGxzIG9mIGBhZGRFbnRyeWAgIGFyZSByZXF1aXJlZCB0byBnbyB0aHJvdWdoIHRoZSBSZW1vdGVEb2N1bWVudENoYW5nZUJ1ZmZlclxyXG4gICAgICogcmV0dXJuZWQgYnkgYG5ld0NoYW5nZUJ1ZmZlcigpYC5cclxuICAgICAqL1xyXG4gICAgTWVtb3J5UmVtb3RlRG9jdW1lbnRDYWNoZS5wcm90b3R5cGUuYWRkRW50cnkgPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24sIGRvYywgcmVhZFRpbWUpIHtcclxuICAgICAgICBhc3NlcnQoIXJlYWRUaW1lLmlzRXF1YWwoU25hcHNob3RWZXJzaW9uLk1JTiksICdDYW5ub3QgYWRkIGEgZG9jdW1lbnQgd2l0aCBhIHJlYWQgdGltZSBvZiB6ZXJvJyk7XHJcbiAgICAgICAgdmFyIGtleSA9IGRvYy5rZXk7XHJcbiAgICAgICAgdmFyIGVudHJ5ID0gdGhpcy5kb2NzLmdldChrZXkpO1xyXG4gICAgICAgIHZhciBwcmV2aW91c1NpemUgPSBlbnRyeSA/IGVudHJ5LnNpemUgOiAwO1xyXG4gICAgICAgIHZhciBjdXJyZW50U2l6ZSA9IHRoaXMuc2l6ZXIoZG9jKTtcclxuICAgICAgICB0aGlzLmRvY3MgPSB0aGlzLmRvY3MuaW5zZXJ0KGtleSwge1xyXG4gICAgICAgICAgICBtYXliZURvY3VtZW50OiBkb2MsXHJcbiAgICAgICAgICAgIHNpemU6IGN1cnJlbnRTaXplLFxyXG4gICAgICAgICAgICByZWFkVGltZTogcmVhZFRpbWVcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLnNpemUgKz0gY3VycmVudFNpemUgLSBwcmV2aW91c1NpemU7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5kZXhNYW5hZ2VyLmFkZFRvQ29sbGVjdGlvblBhcmVudEluZGV4KHRyYW5zYWN0aW9uLCBrZXkucGF0aC5wb3BMYXN0KCkpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmVtb3ZlcyB0aGUgc3BlY2lmaWVkIGVudHJ5IGZyb20gdGhlIGNhY2hlIGFuZCB1cGRhdGVzIHRoZSBjYWNoZSBzaXplIGFzIGFwcHJvcHJpYXRlLlxyXG4gICAgICpcclxuICAgICAqIEFsbCBjYWxscyBvZiBgcmVtb3ZlRW50cnlgIGFyZSByZXF1aXJlZCB0byBnbyB0aHJvdWdoIHRoZSBSZW1vdGVEb2N1bWVudENoYW5nZUJ1ZmZlclxyXG4gICAgICogcmV0dXJuZWQgYnkgYG5ld0NoYW5nZUJ1ZmZlcigpYC5cclxuICAgICAqL1xyXG4gICAgTWVtb3J5UmVtb3RlRG9jdW1lbnRDYWNoZS5wcm90b3R5cGUucmVtb3ZlRW50cnkgPSBmdW5jdGlvbiAoZG9jdW1lbnRLZXkpIHtcclxuICAgICAgICB2YXIgZW50cnkgPSB0aGlzLmRvY3MuZ2V0KGRvY3VtZW50S2V5KTtcclxuICAgICAgICBpZiAoZW50cnkpIHtcclxuICAgICAgICAgICAgdGhpcy5kb2NzID0gdGhpcy5kb2NzLnJlbW92ZShkb2N1bWVudEtleSk7XHJcbiAgICAgICAgICAgIHRoaXMuc2l6ZSAtPSBlbnRyeS5zaXplO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBNZW1vcnlSZW1vdGVEb2N1bWVudENhY2hlLnByb3RvdHlwZS5nZXRFbnRyeSA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwgZG9jdW1lbnRLZXkpIHtcclxuICAgICAgICB2YXIgZW50cnkgPSB0aGlzLmRvY3MuZ2V0KGRvY3VtZW50S2V5KTtcclxuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoZW50cnkgPyBlbnRyeS5tYXliZURvY3VtZW50IDogbnVsbCk7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5UmVtb3RlRG9jdW1lbnRDYWNoZS5wcm90b3R5cGUuZ2V0RW50cmllcyA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwgZG9jdW1lbnRLZXlzKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgcmVzdWx0cyA9IG51bGxhYmxlTWF5YmVEb2N1bWVudE1hcCgpO1xyXG4gICAgICAgIGRvY3VtZW50S2V5cy5mb3JFYWNoKGZ1bmN0aW9uIChkb2N1bWVudEtleSkge1xyXG4gICAgICAgICAgICB2YXIgZW50cnkgPSBfdGhpcy5kb2NzLmdldChkb2N1bWVudEtleSk7XHJcbiAgICAgICAgICAgIHJlc3VsdHMgPSByZXN1bHRzLmluc2VydChkb2N1bWVudEtleSwgZW50cnkgPyBlbnRyeS5tYXliZURvY3VtZW50IDogbnVsbCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKHJlc3VsdHMpO1xyXG4gICAgfTtcclxuICAgIE1lbW9yeVJlbW90ZURvY3VtZW50Q2FjaGUucHJvdG90eXBlLmdldERvY3VtZW50c01hdGNoaW5nUXVlcnkgPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24sIHF1ZXJ5LCBzaW5jZVJlYWRUaW1lKSB7XHJcbiAgICAgICAgYXNzZXJ0KCFxdWVyeS5pc0NvbGxlY3Rpb25Hcm91cFF1ZXJ5KCksICdDb2xsZWN0aW9uR3JvdXAgcXVlcmllcyBzaG91bGQgYmUgaGFuZGxlZCBpbiBMb2NhbERvY3VtZW50c1ZpZXcnKTtcclxuICAgICAgICB2YXIgcmVzdWx0cyA9IGRvY3VtZW50TWFwKCk7XHJcbiAgICAgICAgLy8gRG9jdW1lbnRzIGFyZSBvcmRlcmVkIGJ5IGtleSwgc28gd2UgY2FuIHVzZSBhIHByZWZpeCBzY2FuIHRvIG5hcnJvdyBkb3duXHJcbiAgICAgICAgLy8gdGhlIGRvY3VtZW50cyB3ZSBuZWVkIHRvIG1hdGNoIHRoZSBxdWVyeSBhZ2FpbnN0LlxyXG4gICAgICAgIHZhciBwcmVmaXggPSBuZXcgRG9jdW1lbnRLZXkocXVlcnkucGF0aC5jaGlsZCgnJykpO1xyXG4gICAgICAgIHZhciBpdGVyYXRvciA9IHRoaXMuZG9jcy5nZXRJdGVyYXRvckZyb20ocHJlZml4KTtcclxuICAgICAgICB3aGlsZSAoaXRlcmF0b3IuaGFzTmV4dCgpKSB7XHJcbiAgICAgICAgICAgIHZhciBfYSA9IGl0ZXJhdG9yLmdldE5leHQoKSwga2V5ID0gX2Eua2V5LCBfYiA9IF9hLnZhbHVlLCBtYXliZURvY3VtZW50ID0gX2IubWF5YmVEb2N1bWVudCwgcmVhZFRpbWUgPSBfYi5yZWFkVGltZTtcclxuICAgICAgICAgICAgaWYgKCFxdWVyeS5wYXRoLmlzUHJlZml4T2Yoa2V5LnBhdGgpKSB7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAocmVhZFRpbWUuY29tcGFyZVRvKHNpbmNlUmVhZFRpbWUpIDw9IDApIHtcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChtYXliZURvY3VtZW50IGluc3RhbmNlb2YgRG9jdW1lbnQgJiYgcXVlcnkubWF0Y2hlcyhtYXliZURvY3VtZW50KSkge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0cyA9IHJlc3VsdHMuaW5zZXJ0KG1heWJlRG9jdW1lbnQua2V5LCBtYXliZURvY3VtZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUocmVzdWx0cyk7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5UmVtb3RlRG9jdW1lbnRDYWNoZS5wcm90b3R5cGUuZm9yRWFjaERvY3VtZW50S2V5ID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCBmKSB7XHJcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5mb3JFYWNoKHRoaXMuZG9jcywgZnVuY3Rpb24gKGtleSkgeyByZXR1cm4gZihrZXkpOyB9KTtcclxuICAgIH07XHJcbiAgICBNZW1vcnlSZW1vdGVEb2N1bWVudENhY2hlLnByb3RvdHlwZS5nZXROZXdEb2N1bWVudENoYW5nZXMgPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24sIHNpbmNlUmVhZFRpbWUpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2dldE5ld0RvY3VtZW50Q2hhbmdlcygpIGlzIG5vdCBzdXBwb3J0ZWQgd2l0aCBNZW1vcnlQZXJzaXN0ZW5jZScpO1xyXG4gICAgfTtcclxuICAgIE1lbW9yeVJlbW90ZURvY3VtZW50Q2FjaGUucHJvdG90eXBlLm5ld0NoYW5nZUJ1ZmZlciA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XHJcbiAgICAgICAgLy8gYHRyYWNrUmVtb3ZhbHNgIGlzIGlnbm9yZXMgc2luY2UgdGhlIE1lbW9yeVJlbW90ZURvY3VtZW50Q2FjaGUga2VlcHNcclxuICAgICAgICAvLyBhIHNlcGFyYXRlIGNoYW5nZWxvZyBhbmQgZG9lcyBub3QgbmVlZCBzcGVjaWFsIGhhbmRsaW5nIGZvciByZW1vdmFscy5cclxuICAgICAgICByZXR1cm4gbmV3IE1lbW9yeVJlbW90ZURvY3VtZW50Q2FjaGUuUmVtb3RlRG9jdW1lbnRDaGFuZ2VCdWZmZXIodGhpcyk7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5UmVtb3RlRG9jdW1lbnRDYWNoZS5wcm90b3R5cGUuZ2V0U2l6ZSA9IGZ1bmN0aW9uICh0eG4pIHtcclxuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUodGhpcy5zaXplKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEhhbmRsZXMgdGhlIGRldGFpbHMgb2YgYWRkaW5nIGFuZCB1cGRhdGluZyBkb2N1bWVudHMgaW4gdGhlIE1lbW9yeVJlbW90ZURvY3VtZW50Q2FjaGUuXHJcbiAgICAgKi9cclxuICAgIE1lbW9yeVJlbW90ZURvY3VtZW50Q2FjaGUuUmVtb3RlRG9jdW1lbnRDaGFuZ2VCdWZmZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICAgICAgdHNsaWIuX19leHRlbmRzKGNsYXNzXzEsIF9zdXBlcik7XHJcbiAgICAgICAgZnVuY3Rpb24gY2xhc3NfMShkb2N1bWVudENhY2hlKSB7XHJcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XHJcbiAgICAgICAgICAgIF90aGlzLmRvY3VtZW50Q2FjaGUgPSBkb2N1bWVudENhY2hlO1xyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNsYXNzXzEucHJvdG90eXBlLmFwcGx5Q2hhbmdlcyA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbikge1xyXG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgICAgICB2YXIgcHJvbWlzZXMgPSBbXTtcclxuICAgICAgICAgICAgdGhpcy5jaGFuZ2VzLmZvckVhY2goZnVuY3Rpb24gKGtleSwgZG9jKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZG9jKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcHJvbWlzZXMucHVzaChfdGhpcy5kb2N1bWVudENhY2hlLmFkZEVudHJ5KHRyYW5zYWN0aW9uLCBkb2MsIF90aGlzLnJlYWRUaW1lKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5kb2N1bWVudENhY2hlLnJlbW92ZUVudHJ5KGtleSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLndhaXRGb3IocHJvbWlzZXMpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgY2xhc3NfMS5wcm90b3R5cGUuZ2V0RnJvbUNhY2hlID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCBkb2N1bWVudEtleSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kb2N1bWVudENhY2hlLmdldEVudHJ5KHRyYW5zYWN0aW9uLCBkb2N1bWVudEtleSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBjbGFzc18xLnByb3RvdHlwZS5nZXRBbGxGcm9tQ2FjaGUgPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24sIGRvY3VtZW50S2V5cykge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kb2N1bWVudENhY2hlLmdldEVudHJpZXModHJhbnNhY3Rpb24sIGRvY3VtZW50S2V5cyk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gY2xhc3NfMTtcclxuICAgIH0oUmVtb3RlRG9jdW1lbnRDaGFuZ2VCdWZmZXIpKTtcclxuICAgIHJldHVybiBNZW1vcnlSZW1vdGVEb2N1bWVudENhY2hlO1xyXG59KCkpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxudmFyIE1lbW9yeVRhcmdldENhY2hlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gTWVtb3J5VGFyZ2V0Q2FjaGUocGVyc2lzdGVuY2UpIHtcclxuICAgICAgICB0aGlzLnBlcnNpc3RlbmNlID0gcGVyc2lzdGVuY2U7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogTWFwcyBhIHRhcmdldCB0byB0aGUgZGF0YSBhYm91dCB0aGF0IHRhcmdldFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMudGFyZ2V0cyA9IG5ldyBPYmplY3RNYXAoZnVuY3Rpb24gKHQpIHsgcmV0dXJuIHQuY2Fub25pY2FsSWQoKTsgfSk7XHJcbiAgICAgICAgLyoqIFRoZSBsYXN0IHJlY2VpdmVkIHNuYXBzaG90IHZlcnNpb24uICovXHJcbiAgICAgICAgdGhpcy5sYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uID0gU25hcHNob3RWZXJzaW9uLk1JTjtcclxuICAgICAgICAvKiogVGhlIGhpZ2hlc3QgbnVtYmVyZWQgdGFyZ2V0IElEIGVuY291bnRlcmVkLiAqL1xyXG4gICAgICAgIHRoaXMuaGlnaGVzdFRhcmdldElkID0gMDtcclxuICAgICAgICAvKiogVGhlIGhpZ2hlc3Qgc2VxdWVuY2UgbnVtYmVyIGVuY291bnRlcmVkLiAqL1xyXG4gICAgICAgIHRoaXMuaGlnaGVzdFNlcXVlbmNlTnVtYmVyID0gMDtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBBIG9yZGVyZWQgYmlkaXJlY3Rpb25hbCBtYXBwaW5nIGJldHdlZW4gZG9jdW1lbnRzIGFuZCB0aGUgcmVtb3RlIHRhcmdldFxyXG4gICAgICAgICAqIElEcy5cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLnJlZmVyZW5jZXMgPSBuZXcgUmVmZXJlbmNlU2V0KCk7XHJcbiAgICAgICAgdGhpcy50YXJnZXRDb3VudCA9IDA7XHJcbiAgICAgICAgdGhpcy50YXJnZXRJZEdlbmVyYXRvciA9IFRhcmdldElkR2VuZXJhdG9yLmZvclRhcmdldENhY2hlKCk7XHJcbiAgICB9XHJcbiAgICBNZW1vcnlUYXJnZXRDYWNoZS5wcm90b3R5cGUuZm9yRWFjaFRhcmdldCA9IGZ1bmN0aW9uICh0eG4sIGYpIHtcclxuICAgICAgICB0aGlzLnRhcmdldHMuZm9yRWFjaChmdW5jdGlvbiAoXywgdGFyZ2V0RGF0YSkgeyByZXR1cm4gZih0YXJnZXREYXRhKTsgfSk7XHJcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5VGFyZ2V0Q2FjaGUucHJvdG90eXBlLmdldExhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24gPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24pIHtcclxuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUodGhpcy5sYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uKTtcclxuICAgIH07XHJcbiAgICBNZW1vcnlUYXJnZXRDYWNoZS5wcm90b3R5cGUuZ2V0SGlnaGVzdFNlcXVlbmNlTnVtYmVyID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uKSB7XHJcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKHRoaXMuaGlnaGVzdFNlcXVlbmNlTnVtYmVyKTtcclxuICAgIH07XHJcbiAgICBNZW1vcnlUYXJnZXRDYWNoZS5wcm90b3R5cGUuYWxsb2NhdGVUYXJnZXRJZCA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbikge1xyXG4gICAgICAgIHZhciBuZXh0VGFyZ2V0SWQgPSB0aGlzLnRhcmdldElkR2VuZXJhdG9yLmFmdGVyKHRoaXMuaGlnaGVzdFRhcmdldElkKTtcclxuICAgICAgICB0aGlzLmhpZ2hlc3RUYXJnZXRJZCA9IG5leHRUYXJnZXRJZDtcclxuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUobmV4dFRhcmdldElkKTtcclxuICAgIH07XHJcbiAgICBNZW1vcnlUYXJnZXRDYWNoZS5wcm90b3R5cGUuc2V0VGFyZ2V0c01ldGFkYXRhID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCBoaWdoZXN0TGlzdGVuU2VxdWVuY2VOdW1iZXIsIGxhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24pIHtcclxuICAgICAgICBpZiAobGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbikge1xyXG4gICAgICAgICAgICB0aGlzLmxhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24gPSBsYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoaGlnaGVzdExpc3RlblNlcXVlbmNlTnVtYmVyID4gdGhpcy5oaWdoZXN0U2VxdWVuY2VOdW1iZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5oaWdoZXN0U2VxdWVuY2VOdW1iZXIgPSBoaWdoZXN0TGlzdGVuU2VxdWVuY2VOdW1iZXI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgfTtcclxuICAgIE1lbW9yeVRhcmdldENhY2hlLnByb3RvdHlwZS5zYXZlVGFyZ2V0RGF0YSA9IGZ1bmN0aW9uICh0YXJnZXREYXRhKSB7XHJcbiAgICAgICAgdGhpcy50YXJnZXRzLnNldCh0YXJnZXREYXRhLnRhcmdldCwgdGFyZ2V0RGF0YSk7XHJcbiAgICAgICAgdmFyIHRhcmdldElkID0gdGFyZ2V0RGF0YS50YXJnZXRJZDtcclxuICAgICAgICBpZiAodGFyZ2V0SWQgPiB0aGlzLmhpZ2hlc3RUYXJnZXRJZCkge1xyXG4gICAgICAgICAgICB0aGlzLmhpZ2hlc3RUYXJnZXRJZCA9IHRhcmdldElkO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGFyZ2V0RGF0YS5zZXF1ZW5jZU51bWJlciA+IHRoaXMuaGlnaGVzdFNlcXVlbmNlTnVtYmVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaGlnaGVzdFNlcXVlbmNlTnVtYmVyID0gdGFyZ2V0RGF0YS5zZXF1ZW5jZU51bWJlcjtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5VGFyZ2V0Q2FjaGUucHJvdG90eXBlLmFkZFRhcmdldERhdGEgPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24sIHRhcmdldERhdGEpIHtcclxuICAgICAgICBhc3NlcnQoIXRoaXMudGFyZ2V0cy5oYXModGFyZ2V0RGF0YS50YXJnZXQpLCAnQWRkaW5nIGEgdGFyZ2V0IHRoYXQgYWxyZWFkeSBleGlzdHMnKTtcclxuICAgICAgICB0aGlzLnNhdmVUYXJnZXREYXRhKHRhcmdldERhdGEpO1xyXG4gICAgICAgIHRoaXMudGFyZ2V0Q291bnQgKz0gMTtcclxuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoKTtcclxuICAgIH07XHJcbiAgICBNZW1vcnlUYXJnZXRDYWNoZS5wcm90b3R5cGUudXBkYXRlVGFyZ2V0RGF0YSA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwgdGFyZ2V0RGF0YSkge1xyXG4gICAgICAgIGFzc2VydCh0aGlzLnRhcmdldHMuaGFzKHRhcmdldERhdGEudGFyZ2V0KSwgJ1VwZGF0aW5nIGEgbm9uLWV4aXN0ZW50IHRhcmdldCcpO1xyXG4gICAgICAgIHRoaXMuc2F2ZVRhcmdldERhdGEodGFyZ2V0RGF0YSk7XHJcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5VGFyZ2V0Q2FjaGUucHJvdG90eXBlLnJlbW92ZVRhcmdldERhdGEgPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24sIHRhcmdldERhdGEpIHtcclxuICAgICAgICBhc3NlcnQodGhpcy50YXJnZXRDb3VudCA+IDAsICdSZW1vdmluZyBhIHRhcmdldCBmcm9tIGFuIGVtcHR5IGNhY2hlJyk7XHJcbiAgICAgICAgYXNzZXJ0KHRoaXMudGFyZ2V0cy5oYXModGFyZ2V0RGF0YS50YXJnZXQpLCAnUmVtb3ZpbmcgYSBub24tZXhpc3RlbnQgdGFyZ2V0IGZyb20gdGhlIGNhY2hlJyk7XHJcbiAgICAgICAgdGhpcy50YXJnZXRzLmRlbGV0ZSh0YXJnZXREYXRhLnRhcmdldCk7XHJcbiAgICAgICAgdGhpcy5yZWZlcmVuY2VzLnJlbW92ZVJlZmVyZW5jZXNGb3JJZCh0YXJnZXREYXRhLnRhcmdldElkKTtcclxuICAgICAgICB0aGlzLnRhcmdldENvdW50IC09IDE7XHJcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5VGFyZ2V0Q2FjaGUucHJvdG90eXBlLnJlbW92ZVRhcmdldHMgPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24sIHVwcGVyQm91bmQsIGFjdGl2ZVRhcmdldElkcykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIGNvdW50ID0gMDtcclxuICAgICAgICB2YXIgcmVtb3ZhbHMgPSBbXTtcclxuICAgICAgICB0aGlzLnRhcmdldHMuZm9yRWFjaChmdW5jdGlvbiAoa2V5LCB0YXJnZXREYXRhKSB7XHJcbiAgICAgICAgICAgIGlmICh0YXJnZXREYXRhLnNlcXVlbmNlTnVtYmVyIDw9IHVwcGVyQm91bmQgJiZcclxuICAgICAgICAgICAgICAgIGFjdGl2ZVRhcmdldElkcy5nZXQodGFyZ2V0RGF0YS50YXJnZXRJZCkgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLnRhcmdldHMuZGVsZXRlKGtleSk7XHJcbiAgICAgICAgICAgICAgICByZW1vdmFscy5wdXNoKF90aGlzLnJlbW92ZU1hdGNoaW5nS2V5c0ZvclRhcmdldElkKHRyYW5zYWN0aW9uLCB0YXJnZXREYXRhLnRhcmdldElkKSk7XHJcbiAgICAgICAgICAgICAgICBjb3VudCsrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS53YWl0Rm9yKHJlbW92YWxzKS5uZXh0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIGNvdW50OyB9KTtcclxuICAgIH07XHJcbiAgICBNZW1vcnlUYXJnZXRDYWNoZS5wcm90b3R5cGUuZ2V0VGFyZ2V0Q291bnQgPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24pIHtcclxuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUodGhpcy50YXJnZXRDb3VudCk7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5VGFyZ2V0Q2FjaGUucHJvdG90eXBlLmdldFRhcmdldERhdGEgPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24sIHRhcmdldCkge1xyXG4gICAgICAgIHZhciB0YXJnZXREYXRhID0gdGhpcy50YXJnZXRzLmdldCh0YXJnZXQpIHx8IG51bGw7XHJcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKHRhcmdldERhdGEpO1xyXG4gICAgfTtcclxuICAgIE1lbW9yeVRhcmdldENhY2hlLnByb3RvdHlwZS5nZXRUYXJnZXREYXRhRm9yVGFyZ2V0ID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCB0YXJnZXRJZCkge1xyXG4gICAgICAgIC8vIFRoaXMgbWV0aG9kIGlzIG9ubHkgbmVlZGVkIGZvciBtdWx0aS10YWIgYW5kIHdlIGNhbid0IGltcGxlbWVudCBpdFxyXG4gICAgICAgIC8vIGVmZmljaWVudGx5IHdpdGhvdXQgYWRkaXRpb25hbCBkYXRhIHN0cnVjdHVyZXMuXHJcbiAgICAgICAgcmV0dXJuIGZhaWwoJ05vdCB5ZXQgaW1wbGVtZW50ZWQuJyk7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5VGFyZ2V0Q2FjaGUucHJvdG90eXBlLmFkZE1hdGNoaW5nS2V5cyA9IGZ1bmN0aW9uICh0eG4sIGtleXMsIHRhcmdldElkKSB7XHJcbiAgICAgICAgdGhpcy5yZWZlcmVuY2VzLmFkZFJlZmVyZW5jZXMoa2V5cywgdGFyZ2V0SWQpO1xyXG4gICAgICAgIHZhciByZWZlcmVuY2VEZWxlZ2F0ZSA9IHRoaXMucGVyc2lzdGVuY2UucmVmZXJlbmNlRGVsZWdhdGU7XHJcbiAgICAgICAgdmFyIHByb21pc2VzID0gW107XHJcbiAgICAgICAgaWYgKHJlZmVyZW5jZURlbGVnYXRlKSB7XHJcbiAgICAgICAgICAgIGtleXMuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgICAgICAgICAgICBwcm9taXNlcy5wdXNoKHJlZmVyZW5jZURlbGVnYXRlLmFkZFJlZmVyZW5jZSh0eG4sIGtleSkpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS53YWl0Rm9yKHByb21pc2VzKTtcclxuICAgIH07XHJcbiAgICBNZW1vcnlUYXJnZXRDYWNoZS5wcm90b3R5cGUucmVtb3ZlTWF0Y2hpbmdLZXlzID0gZnVuY3Rpb24gKHR4biwga2V5cywgdGFyZ2V0SWQpIHtcclxuICAgICAgICB0aGlzLnJlZmVyZW5jZXMucmVtb3ZlUmVmZXJlbmNlcyhrZXlzLCB0YXJnZXRJZCk7XHJcbiAgICAgICAgdmFyIHJlZmVyZW5jZURlbGVnYXRlID0gdGhpcy5wZXJzaXN0ZW5jZS5yZWZlcmVuY2VEZWxlZ2F0ZTtcclxuICAgICAgICB2YXIgcHJvbWlzZXMgPSBbXTtcclxuICAgICAgICBpZiAocmVmZXJlbmNlRGVsZWdhdGUpIHtcclxuICAgICAgICAgICAga2V5cy5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICAgICAgICAgIHByb21pc2VzLnB1c2gocmVmZXJlbmNlRGVsZWdhdGUucmVtb3ZlUmVmZXJlbmNlKHR4biwga2V5KSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLndhaXRGb3IocHJvbWlzZXMpO1xyXG4gICAgfTtcclxuICAgIE1lbW9yeVRhcmdldENhY2hlLnByb3RvdHlwZS5yZW1vdmVNYXRjaGluZ0tleXNGb3JUYXJnZXRJZCA9IGZ1bmN0aW9uICh0eG4sIHRhcmdldElkKSB7XHJcbiAgICAgICAgdGhpcy5yZWZlcmVuY2VzLnJlbW92ZVJlZmVyZW5jZXNGb3JJZCh0YXJnZXRJZCk7XHJcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5VGFyZ2V0Q2FjaGUucHJvdG90eXBlLmdldE1hdGNoaW5nS2V5c0ZvclRhcmdldElkID0gZnVuY3Rpb24gKHR4biwgdGFyZ2V0SWQpIHtcclxuICAgICAgICB2YXIgbWF0Y2hpbmdLZXlzID0gdGhpcy5yZWZlcmVuY2VzLnJlZmVyZW5jZXNGb3JJZCh0YXJnZXRJZCk7XHJcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKG1hdGNoaW5nS2V5cyk7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5VGFyZ2V0Q2FjaGUucHJvdG90eXBlLmNvbnRhaW5zS2V5ID0gZnVuY3Rpb24gKHR4biwga2V5KSB7XHJcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKHRoaXMucmVmZXJlbmNlcy5jb250YWluc0tleShrZXkpKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gTWVtb3J5VGFyZ2V0Q2FjaGU7XHJcbn0oKSk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG52YXIgTE9HX1RBRyQzID0gJ01lbW9yeVBlcnNpc3RlbmNlJztcclxuLyoqXHJcbiAqIEEgbWVtb3J5LWJhY2tlZCBpbnN0YW5jZSBvZiBQZXJzaXN0ZW5jZS4gRGF0YSBpcyBzdG9yZWQgb25seSBpbiBSQU0gYW5kXHJcbiAqIG5vdCBwZXJzaXN0ZWQgYWNyb3NzIHNlc3Npb25zLlxyXG4gKi9cclxudmFyIE1lbW9yeVBlcnNpc3RlbmNlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgY29uc3RydWN0b3IgYWNjZXB0cyBhIGZhY3RvcnkgZm9yIGNyZWF0aW5nIGEgcmVmZXJlbmNlIGRlbGVnYXRlLiBUaGlzXHJcbiAgICAgKiBhbGxvd3MgYm90aCB0aGUgZGVsZWdhdGUgYW5kIHRoaXMgaW5zdGFuY2UgdG8gaGF2ZSBzdHJvbmcgcmVmZXJlbmNlcyB0b1xyXG4gICAgICogZWFjaCBvdGhlciB3aXRob3V0IGhhdmluZyBudWxsYWJsZSBmaWVsZHMgdGhhdCB3b3VsZCB0aGVuIG5lZWQgdG8gYmVcclxuICAgICAqIGNoZWNrZWQgb3IgYXNzZXJ0ZWQgb24gZXZlcnkgYWNjZXNzLlxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBNZW1vcnlQZXJzaXN0ZW5jZShjbGllbnRJZCwgcmVmZXJlbmNlRGVsZWdhdGVGYWN0b3J5KSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB0aGlzLmNsaWVudElkID0gY2xpZW50SWQ7XHJcbiAgICAgICAgdGhpcy5tdXRhdGlvblF1ZXVlcyA9IHt9O1xyXG4gICAgICAgIHRoaXMubGlzdGVuU2VxdWVuY2UgPSBuZXcgTGlzdGVuU2VxdWVuY2UoMCk7XHJcbiAgICAgICAgdGhpcy5fc3RhcnRlZCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuX3N0YXJ0ZWQgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMucmVmZXJlbmNlRGVsZWdhdGUgPSByZWZlcmVuY2VEZWxlZ2F0ZUZhY3RvcnkodGhpcyk7XHJcbiAgICAgICAgdGhpcy50YXJnZXRDYWNoZSA9IG5ldyBNZW1vcnlUYXJnZXRDYWNoZSh0aGlzKTtcclxuICAgICAgICB2YXIgc2l6ZXIgPSBmdW5jdGlvbiAoZG9jKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZS5kb2N1bWVudFNpemUoZG9jKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuaW5kZXhNYW5hZ2VyID0gbmV3IE1lbW9yeUluZGV4TWFuYWdlcigpO1xyXG4gICAgICAgIHRoaXMucmVtb3RlRG9jdW1lbnRDYWNoZSA9IG5ldyBNZW1vcnlSZW1vdGVEb2N1bWVudENhY2hlKHRoaXMuaW5kZXhNYW5hZ2VyLCBzaXplcik7XHJcbiAgICB9XHJcbiAgICBNZW1vcnlQZXJzaXN0ZW5jZS5jcmVhdGVMcnVQZXJzaXN0ZW5jZSA9IGZ1bmN0aW9uIChjbGllbnRJZCwgc2VyaWFsaXplciwgcGFyYW1zKSB7XHJcbiAgICAgICAgdmFyIGZhY3RvcnkgPSBmdW5jdGlvbiAocCkge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IE1lbW9yeUxydURlbGVnYXRlKHAsIG5ldyBMb2NhbFNlcmlhbGl6ZXIoc2VyaWFsaXplciksIHBhcmFtcyk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gbmV3IE1lbW9yeVBlcnNpc3RlbmNlKGNsaWVudElkLCBmYWN0b3J5KTtcclxuICAgIH07XHJcbiAgICBNZW1vcnlQZXJzaXN0ZW5jZS5jcmVhdGVFYWdlclBlcnNpc3RlbmNlID0gZnVuY3Rpb24gKGNsaWVudElkKSB7XHJcbiAgICAgICAgdmFyIGZhY3RvcnkgPSBmdW5jdGlvbiAocCkge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IE1lbW9yeUVhZ2VyRGVsZWdhdGUocCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gbmV3IE1lbW9yeVBlcnNpc3RlbmNlKGNsaWVudElkLCBmYWN0b3J5KTtcclxuICAgIH07XHJcbiAgICBNZW1vcnlQZXJzaXN0ZW5jZS5wcm90b3R5cGUuc2h1dGRvd24gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy8gTm8gZHVyYWJsZSBzdGF0ZSB0byBlbnN1cmUgaXMgY2xvc2VkIG9uIHNodXRkb3duLlxyXG4gICAgICAgIHRoaXMuX3N0YXJ0ZWQgPSBmYWxzZTtcclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICB9O1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE1lbW9yeVBlcnNpc3RlbmNlLnByb3RvdHlwZSwgXCJzdGFydGVkXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3N0YXJ0ZWQ7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBNZW1vcnlQZXJzaXN0ZW5jZS5wcm90b3R5cGUuZ2V0QWN0aXZlQ2xpZW50cyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdHNsaWIuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYi5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBbdGhpcy5jbGllbnRJZF1dO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBNZW1vcnlQZXJzaXN0ZW5jZS5wcm90b3R5cGUuc2V0UHJpbWFyeVN0YXRlTGlzdGVuZXIgPSBmdW5jdGlvbiAocHJpbWFyeVN0YXRlTGlzdGVuZXIpIHtcclxuICAgICAgICAvLyBBbGwgY2xpZW50cyB1c2luZyBtZW1vcnkgcGVyc2lzdGVuY2UgYWN0IGFzIHByaW1hcnkuXHJcbiAgICAgICAgcmV0dXJuIHByaW1hcnlTdGF0ZUxpc3RlbmVyKHRydWUpO1xyXG4gICAgfTtcclxuICAgIE1lbW9yeVBlcnNpc3RlbmNlLnByb3RvdHlwZS5zZXREYXRhYmFzZURlbGV0ZWRMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvLyBObyBvcC5cclxuICAgIH07XHJcbiAgICBNZW1vcnlQZXJzaXN0ZW5jZS5wcm90b3R5cGUuc2V0TmV0d29ya0VuYWJsZWQgPSBmdW5jdGlvbiAobmV0d29ya0VuYWJsZWQpIHtcclxuICAgICAgICAvLyBObyBvcC5cclxuICAgIH07XHJcbiAgICBNZW1vcnlQZXJzaXN0ZW5jZS5wcm90b3R5cGUuZ2V0SW5kZXhNYW5hZ2VyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmluZGV4TWFuYWdlcjtcclxuICAgIH07XHJcbiAgICBNZW1vcnlQZXJzaXN0ZW5jZS5wcm90b3R5cGUuZ2V0TXV0YXRpb25RdWV1ZSA9IGZ1bmN0aW9uICh1c2VyKSB7XHJcbiAgICAgICAgdmFyIHF1ZXVlID0gdGhpcy5tdXRhdGlvblF1ZXVlc1t1c2VyLnRvS2V5KCldO1xyXG4gICAgICAgIGlmICghcXVldWUpIHtcclxuICAgICAgICAgICAgcXVldWUgPSBuZXcgTWVtb3J5TXV0YXRpb25RdWV1ZSh0aGlzLmluZGV4TWFuYWdlciwgdGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZSk7XHJcbiAgICAgICAgICAgIHRoaXMubXV0YXRpb25RdWV1ZXNbdXNlci50b0tleSgpXSA9IHF1ZXVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcXVldWU7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5UGVyc2lzdGVuY2UucHJvdG90eXBlLmdldFRhcmdldENhY2hlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnRhcmdldENhY2hlO1xyXG4gICAgfTtcclxuICAgIE1lbW9yeVBlcnNpc3RlbmNlLnByb3RvdHlwZS5nZXRSZW1vdGVEb2N1bWVudENhY2hlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnJlbW90ZURvY3VtZW50Q2FjaGU7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5UGVyc2lzdGVuY2UucHJvdG90eXBlLnJ1blRyYW5zYWN0aW9uID0gZnVuY3Rpb24gKGFjdGlvbiwgbW9kZSwgdHJhbnNhY3Rpb25PcGVyYXRpb24pIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIGRlYnVnKExPR19UQUckMywgJ1N0YXJ0aW5nIHRyYW5zYWN0aW9uOicsIGFjdGlvbik7XHJcbiAgICAgICAgdmFyIHR4biA9IG5ldyBNZW1vcnlUcmFuc2FjdGlvbih0aGlzLmxpc3RlblNlcXVlbmNlLm5leHQoKSk7XHJcbiAgICAgICAgdGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZS5vblRyYW5zYWN0aW9uU3RhcnRlZCgpO1xyXG4gICAgICAgIHJldHVybiB0cmFuc2FjdGlvbk9wZXJhdGlvbih0eG4pXHJcbiAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIF90aGlzLnJlZmVyZW5jZURlbGVnYXRlXHJcbiAgICAgICAgICAgICAgICAub25UcmFuc2FjdGlvbkNvbW1pdHRlZCh0eG4pXHJcbiAgICAgICAgICAgICAgICAubmV4dChmdW5jdGlvbiAoKSB7IHJldHVybiByZXN1bHQ7IH0pO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC50b1Byb21pc2UoKVxyXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgIHR4bi5yYWlzZU9uQ29tbWl0dGVkRXZlbnQoKTtcclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBNZW1vcnlQZXJzaXN0ZW5jZS5wcm90b3R5cGUubXV0YXRpb25RdWV1ZXNDb250YWluS2V5ID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCBrZXkpIHtcclxuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLm9yKHZhbHVlcyh0aGlzLm11dGF0aW9uUXVldWVzKVxyXG4gICAgICAgICAgICAubWFwKGZ1bmN0aW9uIChxdWV1ZSkgeyByZXR1cm4gZnVuY3Rpb24gKCkgeyByZXR1cm4gcXVldWUuY29udGFpbnNLZXkodHJhbnNhY3Rpb24sIGtleSk7IH07IH0pKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gTWVtb3J5UGVyc2lzdGVuY2U7XHJcbn0oKSk7XHJcbi8qKlxyXG4gKiBNZW1vcnkgcGVyc2lzdGVuY2UgaXMgbm90IGFjdHVhbGx5IHRyYW5zYWN0aW9uYWwsIGJ1dCBmdXR1cmUgaW1wbGVtZW50YXRpb25zXHJcbiAqIG1heSBoYXZlIHRyYW5zYWN0aW9uLXNjb3BlZCBzdGF0ZS5cclxuICovXHJcbnZhciBNZW1vcnlUcmFuc2FjdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIHRzbGliLl9fZXh0ZW5kcyhNZW1vcnlUcmFuc2FjdGlvbiwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIE1lbW9yeVRyYW5zYWN0aW9uKGN1cnJlbnRTZXF1ZW5jZU51bWJlcikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMuY3VycmVudFNlcXVlbmNlTnVtYmVyID0gY3VycmVudFNlcXVlbmNlTnVtYmVyO1xyXG4gICAgICAgIHJldHVybiBfdGhpcztcclxuICAgIH1cclxuICAgIHJldHVybiBNZW1vcnlUcmFuc2FjdGlvbjtcclxufShQZXJzaXN0ZW5jZVRyYW5zYWN0aW9uKSk7XHJcbnZhciBNZW1vcnlFYWdlckRlbGVnYXRlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gTWVtb3J5RWFnZXJEZWxlZ2F0ZShwZXJzaXN0ZW5jZSkge1xyXG4gICAgICAgIHRoaXMucGVyc2lzdGVuY2UgPSBwZXJzaXN0ZW5jZTtcclxuICAgICAgICB0aGlzLmluTWVtb3J5UGlucyA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5fb3JwaGFuZWREb2N1bWVudHMgPSBudWxsO1xyXG4gICAgfVxyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE1lbW9yeUVhZ2VyRGVsZWdhdGUucHJvdG90eXBlLCBcIm9ycGhhbmVkRG9jdW1lbnRzXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLl9vcnBoYW5lZERvY3VtZW50cykge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgZmFpbCgnb3JwaGFuZWREb2N1bWVudHMgaXMgb25seSB2YWxpZCBkdXJpbmcgYSB0cmFuc2FjdGlvbi4nKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9vcnBoYW5lZERvY3VtZW50cztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgTWVtb3J5RWFnZXJEZWxlZ2F0ZS5wcm90b3R5cGUuc2V0SW5NZW1vcnlQaW5zID0gZnVuY3Rpb24gKGluTWVtb3J5UGlucykge1xyXG4gICAgICAgIHRoaXMuaW5NZW1vcnlQaW5zID0gaW5NZW1vcnlQaW5zO1xyXG4gICAgfTtcclxuICAgIE1lbW9yeUVhZ2VyRGVsZWdhdGUucHJvdG90eXBlLmFkZFJlZmVyZW5jZSA9IGZ1bmN0aW9uICh0eG4sIGtleSkge1xyXG4gICAgICAgIHRoaXMub3JwaGFuZWREb2N1bWVudHMuZGVsZXRlKGtleSk7XHJcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5RWFnZXJEZWxlZ2F0ZS5wcm90b3R5cGUucmVtb3ZlUmVmZXJlbmNlID0gZnVuY3Rpb24gKHR4biwga2V5KSB7XHJcbiAgICAgICAgdGhpcy5vcnBoYW5lZERvY3VtZW50cy5hZGQoa2V5KTtcclxuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoKTtcclxuICAgIH07XHJcbiAgICBNZW1vcnlFYWdlckRlbGVnYXRlLnByb3RvdHlwZS5yZW1vdmVNdXRhdGlvblJlZmVyZW5jZSA9IGZ1bmN0aW9uICh0eG4sIGtleSkge1xyXG4gICAgICAgIHRoaXMub3JwaGFuZWREb2N1bWVudHMuYWRkKGtleSk7XHJcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5RWFnZXJEZWxlZ2F0ZS5wcm90b3R5cGUucmVtb3ZlVGFyZ2V0ID0gZnVuY3Rpb24gKHR4biwgdGFyZ2V0RGF0YSkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIGNhY2hlID0gdGhpcy5wZXJzaXN0ZW5jZS5nZXRUYXJnZXRDYWNoZSgpO1xyXG4gICAgICAgIHJldHVybiBjYWNoZVxyXG4gICAgICAgICAgICAuZ2V0TWF0Y2hpbmdLZXlzRm9yVGFyZ2V0SWQodHhuLCB0YXJnZXREYXRhLnRhcmdldElkKVxyXG4gICAgICAgICAgICAubmV4dChmdW5jdGlvbiAoa2V5cykge1xyXG4gICAgICAgICAgICBrZXlzLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyByZXR1cm4gX3RoaXMub3JwaGFuZWREb2N1bWVudHMuYWRkKGtleSk7IH0pO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIGNhY2hlLnJlbW92ZVRhcmdldERhdGEodHhuLCB0YXJnZXREYXRhKTsgfSk7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5RWFnZXJEZWxlZ2F0ZS5wcm90b3R5cGUub25UcmFuc2FjdGlvblN0YXJ0ZWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5fb3JwaGFuZWREb2N1bWVudHMgPSBuZXcgU2V0KCk7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5RWFnZXJEZWxlZ2F0ZS5wcm90b3R5cGUub25UcmFuc2FjdGlvbkNvbW1pdHRlZCA9IGZ1bmN0aW9uICh0eG4pIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIC8vIFJlbW92ZSBuZXdseSBvcnBoYW5lZCBkb2N1bWVudHMuXHJcbiAgICAgICAgdmFyIGNhY2hlID0gdGhpcy5wZXJzaXN0ZW5jZS5nZXRSZW1vdGVEb2N1bWVudENhY2hlKCk7XHJcbiAgICAgICAgdmFyIGNoYW5nZUJ1ZmZlciA9IGNhY2hlLm5ld0NoYW5nZUJ1ZmZlcigpO1xyXG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UuZm9yRWFjaCh0aGlzLm9ycGhhbmVkRG9jdW1lbnRzLCBmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5pc1JlZmVyZW5jZWQodHhuLCBrZXkpLm5leHQoZnVuY3Rpb24gKGlzUmVmZXJlbmNlZCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFpc1JlZmVyZW5jZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBjaGFuZ2VCdWZmZXIucmVtb3ZlRW50cnkoa2V5KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSkubmV4dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIF90aGlzLl9vcnBoYW5lZERvY3VtZW50cyA9IG51bGw7XHJcbiAgICAgICAgICAgIHJldHVybiBjaGFuZ2VCdWZmZXIuYXBwbHkodHhuKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBNZW1vcnlFYWdlckRlbGVnYXRlLnByb3RvdHlwZS51cGRhdGVMaW1ib0RvY3VtZW50ID0gZnVuY3Rpb24gKHR4biwga2V5KSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICByZXR1cm4gdGhpcy5pc1JlZmVyZW5jZWQodHhuLCBrZXkpLm5leHQoZnVuY3Rpb24gKGlzUmVmZXJlbmNlZCkge1xyXG4gICAgICAgICAgICBpZiAoaXNSZWZlcmVuY2VkKSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5vcnBoYW5lZERvY3VtZW50cy5kZWxldGUoa2V5KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLm9ycGhhbmVkRG9jdW1lbnRzLmFkZChrZXkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5RWFnZXJEZWxlZ2F0ZS5wcm90b3R5cGUuZG9jdW1lbnRTaXplID0gZnVuY3Rpb24gKGRvYykge1xyXG4gICAgICAgIC8vIEZvciBlYWdlciBHQywgd2UgZG9uJ3QgY2FyZSBhYm91dCB0aGUgZG9jdW1lbnQgc2l6ZSwgdGhlcmUgYXJlIG5vIHNpemUgdGhyZXNob2xkcy5cclxuICAgICAgICByZXR1cm4gMDtcclxuICAgIH07XHJcbiAgICBNZW1vcnlFYWdlckRlbGVnYXRlLnByb3RvdHlwZS5pc1JlZmVyZW5jZWQgPSBmdW5jdGlvbiAodHhuLCBrZXkpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2Uub3IoW1xyXG4gICAgICAgICAgICBmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5wZXJzaXN0ZW5jZS5nZXRUYXJnZXRDYWNoZSgpLmNvbnRhaW5zS2V5KHR4biwga2V5KTsgfSxcclxuICAgICAgICAgICAgZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMucGVyc2lzdGVuY2UubXV0YXRpb25RdWV1ZXNDb250YWluS2V5KHR4biwga2V5KTsgfSxcclxuICAgICAgICAgICAgZnVuY3Rpb24gKCkgeyByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoX3RoaXMuaW5NZW1vcnlQaW5zLmNvbnRhaW5zS2V5KGtleSkpOyB9XHJcbiAgICAgICAgXSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIE1lbW9yeUVhZ2VyRGVsZWdhdGU7XHJcbn0oKSk7XHJcbnZhciBNZW1vcnlMcnVEZWxlZ2F0ZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIE1lbW9yeUxydURlbGVnYXRlKHBlcnNpc3RlbmNlLCBzZXJpYWxpemVyLCBscnVQYXJhbXMpIHtcclxuICAgICAgICB0aGlzLnBlcnNpc3RlbmNlID0gcGVyc2lzdGVuY2U7XHJcbiAgICAgICAgdGhpcy5zZXJpYWxpemVyID0gc2VyaWFsaXplcjtcclxuICAgICAgICB0aGlzLmluTWVtb3J5UGlucyA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5vcnBoYW5lZFNlcXVlbmNlTnVtYmVycyA9IG5ldyBPYmplY3RNYXAoZnVuY3Rpb24gKGspIHsgcmV0dXJuIGVuY29kZShrLnBhdGgpOyB9KTtcclxuICAgICAgICB0aGlzLmdhcmJhZ2VDb2xsZWN0b3IgPSBuZXcgTHJ1R2FyYmFnZUNvbGxlY3Rvcih0aGlzLCBscnVQYXJhbXMpO1xyXG4gICAgfVxyXG4gICAgLy8gTm8tb3BzLCBwcmVzZW50IHNvIG1lbW9yeSBwZXJzaXN0ZW5jZSBkb2Vzbid0IGhhdmUgdG8gY2FyZSB3aGljaCBkZWxlZ2F0ZVxyXG4gICAgLy8gaXQgaGFzLlxyXG4gICAgTWVtb3J5THJ1RGVsZWdhdGUucHJvdG90eXBlLm9uVHJhbnNhY3Rpb25TdGFydGVkID0gZnVuY3Rpb24gKCkgeyB9O1xyXG4gICAgTWVtb3J5THJ1RGVsZWdhdGUucHJvdG90eXBlLm9uVHJhbnNhY3Rpb25Db21taXR0ZWQgPSBmdW5jdGlvbiAodHhuKSB7XHJcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5THJ1RGVsZWdhdGUucHJvdG90eXBlLmZvckVhY2hUYXJnZXQgPSBmdW5jdGlvbiAodHhuLCBmKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucGVyc2lzdGVuY2UuZ2V0VGFyZ2V0Q2FjaGUoKS5mb3JFYWNoVGFyZ2V0KHR4biwgZik7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5THJ1RGVsZWdhdGUucHJvdG90eXBlLmdldFNlcXVlbmNlTnVtYmVyQ291bnQgPSBmdW5jdGlvbiAodHhuKSB7XHJcbiAgICAgICAgdmFyIGRvY0NvdW50UHJvbWlzZSA9IHRoaXMub3JwaGFuZWREb2N1bWVudENvdW50KHR4bik7XHJcbiAgICAgICAgdmFyIHRhcmdldENvdW50UHJvbWlzZSA9IHRoaXMucGVyc2lzdGVuY2VcclxuICAgICAgICAgICAgLmdldFRhcmdldENhY2hlKClcclxuICAgICAgICAgICAgLmdldFRhcmdldENvdW50KHR4bik7XHJcbiAgICAgICAgcmV0dXJuIHRhcmdldENvdW50UHJvbWlzZS5uZXh0KGZ1bmN0aW9uICh0YXJnZXRDb3VudCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZG9jQ291bnRQcm9taXNlLm5leHQoZnVuY3Rpb24gKGRvY0NvdW50KSB7IHJldHVybiB0YXJnZXRDb3VudCArIGRvY0NvdW50OyB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBNZW1vcnlMcnVEZWxlZ2F0ZS5wcm90b3R5cGUub3JwaGFuZWREb2N1bWVudENvdW50ID0gZnVuY3Rpb24gKHR4bikge1xyXG4gICAgICAgIHZhciBvcnBoYW5lZENvdW50ID0gMDtcclxuICAgICAgICByZXR1cm4gdGhpcy5mb3JFYWNoT3JwaGFuZWREb2N1bWVudFNlcXVlbmNlTnVtYmVyKHR4biwgZnVuY3Rpb24gKF8pIHtcclxuICAgICAgICAgICAgb3JwaGFuZWRDb3VudCsrO1xyXG4gICAgICAgIH0pLm5leHQoZnVuY3Rpb24gKCkgeyByZXR1cm4gb3JwaGFuZWRDb3VudDsgfSk7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5THJ1RGVsZWdhdGUucHJvdG90eXBlLmZvckVhY2hPcnBoYW5lZERvY3VtZW50U2VxdWVuY2VOdW1iZXIgPSBmdW5jdGlvbiAodHhuLCBmKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLmZvckVhY2godGhpcy5vcnBoYW5lZFNlcXVlbmNlTnVtYmVycywgZnVuY3Rpb24gKGtleSwgc2VxdWVuY2VOdW1iZXIpIHtcclxuICAgICAgICAgICAgLy8gUGFzcyBpbiB0aGUgZXhhY3Qgc2VxdWVuY2UgbnVtYmVyIGFzIHRoZSB1cHBlciBib3VuZCBzbyB3ZSBrbm93IGl0IHdvbid0IGJlIHBpbm5lZCBieVxyXG4gICAgICAgICAgICAvLyBiZWluZyB0b28gcmVjZW50LlxyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXMuaXNQaW5uZWQodHhuLCBrZXksIHNlcXVlbmNlTnVtYmVyKS5uZXh0KGZ1bmN0aW9uIChpc1Bpbm5lZCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFpc1Bpbm5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmKHNlcXVlbmNlTnVtYmVyKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBNZW1vcnlMcnVEZWxlZ2F0ZS5wcm90b3R5cGUuc2V0SW5NZW1vcnlQaW5zID0gZnVuY3Rpb24gKGluTWVtb3J5UGlucykge1xyXG4gICAgICAgIHRoaXMuaW5NZW1vcnlQaW5zID0gaW5NZW1vcnlQaW5zO1xyXG4gICAgfTtcclxuICAgIE1lbW9yeUxydURlbGVnYXRlLnByb3RvdHlwZS5yZW1vdmVUYXJnZXRzID0gZnVuY3Rpb24gKHR4biwgdXBwZXJCb3VuZCwgYWN0aXZlVGFyZ2V0SWRzKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucGVyc2lzdGVuY2VcclxuICAgICAgICAgICAgLmdldFRhcmdldENhY2hlKClcclxuICAgICAgICAgICAgLnJlbW92ZVRhcmdldHModHhuLCB1cHBlckJvdW5kLCBhY3RpdmVUYXJnZXRJZHMpO1xyXG4gICAgfTtcclxuICAgIE1lbW9yeUxydURlbGVnYXRlLnByb3RvdHlwZS5yZW1vdmVPcnBoYW5lZERvY3VtZW50cyA9IGZ1bmN0aW9uICh0eG4sIHVwcGVyQm91bmQpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhciBjb3VudCA9IDA7XHJcbiAgICAgICAgdmFyIGNhY2hlID0gdGhpcy5wZXJzaXN0ZW5jZS5nZXRSZW1vdGVEb2N1bWVudENhY2hlKCk7XHJcbiAgICAgICAgdmFyIGNoYW5nZUJ1ZmZlciA9IGNhY2hlLm5ld0NoYW5nZUJ1ZmZlcigpO1xyXG4gICAgICAgIHZhciBwID0gY2FjaGUuZm9yRWFjaERvY3VtZW50S2V5KHR4biwgZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXMuaXNQaW5uZWQodHhuLCBrZXksIHVwcGVyQm91bmQpLm5leHQoZnVuY3Rpb24gKGlzUGlubmVkKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWlzUGlubmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY291bnQrKztcclxuICAgICAgICAgICAgICAgICAgICBjaGFuZ2VCdWZmZXIucmVtb3ZlRW50cnkoa2V5KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHAubmV4dChmdW5jdGlvbiAoKSB7IHJldHVybiBjaGFuZ2VCdWZmZXIuYXBwbHkodHhuKTsgfSkubmV4dChmdW5jdGlvbiAoKSB7IHJldHVybiBjb3VudDsgfSk7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5THJ1RGVsZWdhdGUucHJvdG90eXBlLnJlbW92ZU11dGF0aW9uUmVmZXJlbmNlID0gZnVuY3Rpb24gKHR4biwga2V5KSB7XHJcbiAgICAgICAgdGhpcy5vcnBoYW5lZFNlcXVlbmNlTnVtYmVycy5zZXQoa2V5LCB0eG4uY3VycmVudFNlcXVlbmNlTnVtYmVyKTtcclxuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoKTtcclxuICAgIH07XHJcbiAgICBNZW1vcnlMcnVEZWxlZ2F0ZS5wcm90b3R5cGUucmVtb3ZlVGFyZ2V0ID0gZnVuY3Rpb24gKHR4biwgdGFyZ2V0RGF0YSkge1xyXG4gICAgICAgIHZhciB1cGRhdGVkID0gdGFyZ2V0RGF0YS53aXRoU2VxdWVuY2VOdW1iZXIodHhuLmN1cnJlbnRTZXF1ZW5jZU51bWJlcik7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucGVyc2lzdGVuY2UuZ2V0VGFyZ2V0Q2FjaGUoKS51cGRhdGVUYXJnZXREYXRhKHR4biwgdXBkYXRlZCk7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5THJ1RGVsZWdhdGUucHJvdG90eXBlLmFkZFJlZmVyZW5jZSA9IGZ1bmN0aW9uICh0eG4sIGtleSkge1xyXG4gICAgICAgIHRoaXMub3JwaGFuZWRTZXF1ZW5jZU51bWJlcnMuc2V0KGtleSwgdHhuLmN1cnJlbnRTZXF1ZW5jZU51bWJlcik7XHJcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5THJ1RGVsZWdhdGUucHJvdG90eXBlLnJlbW92ZVJlZmVyZW5jZSA9IGZ1bmN0aW9uICh0eG4sIGtleSkge1xyXG4gICAgICAgIHRoaXMub3JwaGFuZWRTZXF1ZW5jZU51bWJlcnMuc2V0KGtleSwgdHhuLmN1cnJlbnRTZXF1ZW5jZU51bWJlcik7XHJcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5THJ1RGVsZWdhdGUucHJvdG90eXBlLnVwZGF0ZUxpbWJvRG9jdW1lbnQgPSBmdW5jdGlvbiAodHhuLCBrZXkpIHtcclxuICAgICAgICB0aGlzLm9ycGhhbmVkU2VxdWVuY2VOdW1iZXJzLnNldChrZXksIHR4bi5jdXJyZW50U2VxdWVuY2VOdW1iZXIpO1xyXG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgfTtcclxuICAgIE1lbW9yeUxydURlbGVnYXRlLnByb3RvdHlwZS5kb2N1bWVudFNpemUgPSBmdW5jdGlvbiAobWF5YmVEb2MpIHtcclxuICAgICAgICB2YXIgcmVtb3RlRG9jdW1lbnQgPSB0aGlzLnNlcmlhbGl6ZXIudG9EYlJlbW90ZURvY3VtZW50KG1heWJlRG9jLCBtYXliZURvYy52ZXJzaW9uKTtcclxuICAgICAgICB2YXIgdmFsdWU7XHJcbiAgICAgICAgaWYgKHJlbW90ZURvY3VtZW50LmRvY3VtZW50KSB7XHJcbiAgICAgICAgICAgIHZhbHVlID0gcmVtb3RlRG9jdW1lbnQuZG9jdW1lbnQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHJlbW90ZURvY3VtZW50LnVua25vd25Eb2N1bWVudCkge1xyXG4gICAgICAgICAgICB2YWx1ZSA9IHJlbW90ZURvY3VtZW50LnVua25vd25Eb2N1bWVudDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAocmVtb3RlRG9jdW1lbnQubm9Eb2N1bWVudCkge1xyXG4gICAgICAgICAgICB2YWx1ZSA9IHJlbW90ZURvY3VtZW50Lm5vRG9jdW1lbnQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aHJvdyBmYWlsKCdVbmtub3duIHJlbW90ZSBkb2N1bWVudCB0eXBlJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh2YWx1ZSkubGVuZ3RoO1xyXG4gICAgfTtcclxuICAgIE1lbW9yeUxydURlbGVnYXRlLnByb3RvdHlwZS5pc1Bpbm5lZCA9IGZ1bmN0aW9uICh0eG4sIGtleSwgdXBwZXJCb3VuZCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5vcihbXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLnBlcnNpc3RlbmNlLm11dGF0aW9uUXVldWVzQ29udGFpbktleSh0eG4sIGtleSk7IH0sXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uICgpIHsgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKF90aGlzLmluTWVtb3J5UGlucy5jb250YWluc0tleShrZXkpKTsgfSxcclxuICAgICAgICAgICAgZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMucGVyc2lzdGVuY2UuZ2V0VGFyZ2V0Q2FjaGUoKS5jb250YWluc0tleSh0eG4sIGtleSk7IH0sXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHZhciBvcnBoYW5lZEF0ID0gX3RoaXMub3JwaGFuZWRTZXF1ZW5jZU51bWJlcnMuZ2V0KGtleSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUob3JwaGFuZWRBdCAhPT0gdW5kZWZpbmVkICYmIG9ycGhhbmVkQXQgPiB1cHBlckJvdW5kKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIF0pO1xyXG4gICAgfTtcclxuICAgIE1lbW9yeUxydURlbGVnYXRlLnByb3RvdHlwZS5nZXRDYWNoZVNpemUgPSBmdW5jdGlvbiAodHhuKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucGVyc2lzdGVuY2UuZ2V0UmVtb3RlRG9jdW1lbnRDYWNoZSgpLmdldFNpemUodHhuKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gTWVtb3J5THJ1RGVsZWdhdGU7XHJcbn0oKSk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG52YXIgTE9HX1RBRyQ0ID0gJ0V4cG9uZW50aWFsQmFja29mZic7XHJcbi8qKlxyXG4gKiBJbml0aWFsIGJhY2tvZmYgdGltZSBpbiBtaWxsaXNlY29uZHMgYWZ0ZXIgYW4gZXJyb3IuXHJcbiAqIFNldCB0byAxcyBhY2NvcmRpbmcgdG8gaHR0cHM6Ly9jbG91ZC5nb29nbGUuY29tL2FwaXMvZGVzaWduL2Vycm9ycy5cclxuICovXHJcbnZhciBERUZBVUxUX0JBQ0tPRkZfSU5JVElBTF9ERUxBWV9NUyA9IDEwMDA7XHJcbnZhciBERUZBVUxUX0JBQ0tPRkZfRkFDVE9SID0gMS41O1xyXG4vKiogTWF4aW11bSBiYWNrb2ZmIHRpbWUgaW4gbWlsbGlzZWNvbmRzICovXHJcbnZhciBERUZBVUxUX0JBQ0tPRkZfTUFYX0RFTEFZX01TID0gNjAgKiAxMDAwO1xyXG4vKipcclxuICogQSBoZWxwZXIgZm9yIHJ1bm5pbmcgZGVsYXllZCB0YXNrcyBmb2xsb3dpbmcgYW4gZXhwb25lbnRpYWwgYmFja29mZiBjdXJ2ZVxyXG4gKiBiZXR3ZWVuIGF0dGVtcHRzLlxyXG4gKlxyXG4gKiBFYWNoIGRlbGF5IGlzIG1hZGUgdXAgb2YgYSBcImJhc2VcIiBkZWxheSB3aGljaCBmb2xsb3dzIHRoZSBleHBvbmVudGlhbFxyXG4gKiBiYWNrb2ZmIGN1cnZlLCBhbmQgYSArLy0gNTAlIFwiaml0dGVyXCIgdGhhdCBpcyBjYWxjdWxhdGVkIGFuZCBhZGRlZCB0byB0aGVcclxuICogYmFzZSBkZWxheS4gVGhpcyBwcmV2ZW50cyBjbGllbnRzIGZyb20gYWNjaWRlbnRhbGx5IHN5bmNocm9uaXppbmcgdGhlaXJcclxuICogZGVsYXlzIGNhdXNpbmcgc3Bpa2VzIG9mIGxvYWQgdG8gdGhlIGJhY2tlbmQuXHJcbiAqL1xyXG52YXIgRXhwb25lbnRpYWxCYWNrb2ZmID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gRXhwb25lbnRpYWxCYWNrb2ZmKFxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgQXN5bmNRdWV1ZSB0byBydW4gYmFja29mZiBvcGVyYXRpb25zIG9uLlxyXG4gICAgICovXHJcbiAgICBxdWV1ZSwgXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBJRCB0byB1c2Ugd2hlbiBzY2hlZHVsaW5nIGJhY2tvZmYgb3BlcmF0aW9ucyBvbiB0aGUgQXN5bmNRdWV1ZS5cclxuICAgICAqL1xyXG4gICAgdGltZXJJZCwgXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBpbml0aWFsIGRlbGF5ICh1c2VkIGFzIHRoZSBiYXNlIGRlbGF5IG9uIHRoZSBmaXJzdCByZXRyeSBhdHRlbXB0KS5cclxuICAgICAqIE5vdGUgdGhhdCBqaXR0ZXIgd2lsbCBzdGlsbCBiZSBhcHBsaWVkLCBzbyB0aGUgYWN0dWFsIGRlbGF5IGNvdWxkIGJlIGFzXHJcbiAgICAgKiBsaXR0bGUgYXMgMC41KmluaXRpYWxEZWxheU1zLlxyXG4gICAgICovXHJcbiAgICBpbml0aWFsRGVsYXlNcywgXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBtdWx0aXBsaWVyIHRvIHVzZSB0byBkZXRlcm1pbmUgdGhlIGV4dGVuZGVkIGJhc2UgZGVsYXkgYWZ0ZXIgZWFjaFxyXG4gICAgICogYXR0ZW1wdC5cclxuICAgICAqL1xyXG4gICAgYmFja29mZkZhY3RvciwgXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBtYXhpbXVtIGJhc2UgZGVsYXkgYWZ0ZXIgd2hpY2ggbm8gZnVydGhlciBiYWNrb2ZmIGlzIHBlcmZvcm1lZC5cclxuICAgICAqIE5vdGUgdGhhdCBqaXR0ZXIgd2lsbCBzdGlsbCBiZSBhcHBsaWVkLCBzbyB0aGUgYWN0dWFsIGRlbGF5IGNvdWxkIGJlIGFzXHJcbiAgICAgKiBtdWNoIGFzIDEuNSptYXhEZWxheU1zLlxyXG4gICAgICovXHJcbiAgICBtYXhEZWxheU1zKSB7XHJcbiAgICAgICAgaWYgKGluaXRpYWxEZWxheU1zID09PSB2b2lkIDApIHsgaW5pdGlhbERlbGF5TXMgPSBERUZBVUxUX0JBQ0tPRkZfSU5JVElBTF9ERUxBWV9NUzsgfVxyXG4gICAgICAgIGlmIChiYWNrb2ZmRmFjdG9yID09PSB2b2lkIDApIHsgYmFja29mZkZhY3RvciA9IERFRkFVTFRfQkFDS09GRl9GQUNUT1I7IH1cclxuICAgICAgICBpZiAobWF4RGVsYXlNcyA9PT0gdm9pZCAwKSB7IG1heERlbGF5TXMgPSBERUZBVUxUX0JBQ0tPRkZfTUFYX0RFTEFZX01TOyB9XHJcbiAgICAgICAgdGhpcy5xdWV1ZSA9IHF1ZXVlO1xyXG4gICAgICAgIHRoaXMudGltZXJJZCA9IHRpbWVySWQ7XHJcbiAgICAgICAgdGhpcy5pbml0aWFsRGVsYXlNcyA9IGluaXRpYWxEZWxheU1zO1xyXG4gICAgICAgIHRoaXMuYmFja29mZkZhY3RvciA9IGJhY2tvZmZGYWN0b3I7XHJcbiAgICAgICAgdGhpcy5tYXhEZWxheU1zID0gbWF4RGVsYXlNcztcclxuICAgICAgICB0aGlzLmN1cnJlbnRCYXNlTXMgPSAwO1xyXG4gICAgICAgIHRoaXMudGltZXJQcm9taXNlID0gbnVsbDtcclxuICAgICAgICAvKiogVGhlIGxhc3QgYmFja29mZiBhdHRlbXB0LCBhcyBlcG9jaCBtaWxsaXNlY29uZHMuICovXHJcbiAgICAgICAgdGhpcy5sYXN0QXR0ZW1wdFRpbWUgPSBEYXRlLm5vdygpO1xyXG4gICAgICAgIHRoaXMucmVzZXQoKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogUmVzZXRzIHRoZSBiYWNrb2ZmIGRlbGF5LlxyXG4gICAgICpcclxuICAgICAqIFRoZSB2ZXJ5IG5leHQgYmFja29mZkFuZFdhaXQoKSB3aWxsIGhhdmUgbm8gZGVsYXkuIElmIGl0IGlzIGNhbGxlZCBhZ2FpblxyXG4gICAgICogKGkuZS4gZHVlIHRvIGFuIGVycm9yKSwgaW5pdGlhbERlbGF5TXMgKHBsdXMgaml0dGVyKSB3aWxsIGJlIHVzZWQsIGFuZFxyXG4gICAgICogc3Vic2VxdWVudCBvbmVzIHdpbGwgaW5jcmVhc2UgYWNjb3JkaW5nIHRvIHRoZSBiYWNrb2ZmRmFjdG9yLlxyXG4gICAgICovXHJcbiAgICBFeHBvbmVudGlhbEJhY2tvZmYucHJvdG90eXBlLnJlc2V0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuY3VycmVudEJhc2VNcyA9IDA7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZXNldHMgdGhlIGJhY2tvZmYgZGVsYXkgdG8gdGhlIG1heGltdW0gZGVsYXkgKGUuZy4gZm9yIHVzZSBhZnRlciBhXHJcbiAgICAgKiBSRVNPVVJDRV9FWEhBVVNURUQgZXJyb3IpLlxyXG4gICAgICovXHJcbiAgICBFeHBvbmVudGlhbEJhY2tvZmYucHJvdG90eXBlLnJlc2V0VG9NYXggPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5jdXJyZW50QmFzZU1zID0gdGhpcy5tYXhEZWxheU1zO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyBhIHByb21pc2UgdGhhdCByZXNvbHZlcyBhZnRlciBjdXJyZW50RGVsYXlNcywgYW5kIGluY3JlYXNlcyB0aGVcclxuICAgICAqIGRlbGF5IGZvciBhbnkgc3Vic2VxdWVudCBhdHRlbXB0cy4gSWYgdGhlcmUgd2FzIGEgcGVuZGluZyBiYWNrb2ZmIG9wZXJhdGlvblxyXG4gICAgICogYWxyZWFkeSwgaXQgd2lsbCBiZSBjYW5jZWxlZC5cclxuICAgICAqL1xyXG4gICAgRXhwb25lbnRpYWxCYWNrb2ZmLnByb3RvdHlwZS5iYWNrb2ZmQW5kUnVuID0gZnVuY3Rpb24gKG9wKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICAvLyBDYW5jZWwgYW55IHBlbmRpbmcgYmFja29mZiBvcGVyYXRpb24uXHJcbiAgICAgICAgdGhpcy5jYW5jZWwoKTtcclxuICAgICAgICAvLyBGaXJzdCBzY2hlZHVsZSB1c2luZyB0aGUgY3VycmVudCBiYXNlICh3aGljaCBtYXkgYmUgMCBhbmQgc2hvdWxkIGJlXHJcbiAgICAgICAgLy8gaG9ub3JlZCBhcyBzdWNoKS5cclxuICAgICAgICB2YXIgZGVzaXJlZERlbGF5V2l0aEppdHRlck1zID0gTWF0aC5mbG9vcih0aGlzLmN1cnJlbnRCYXNlTXMgKyB0aGlzLmppdHRlckRlbGF5TXMoKSk7XHJcbiAgICAgICAgLy8gR3VhcmQgYWdhaW5zdCBsYXN0QXR0ZW1wdFRpbWUgYmVpbmcgaW4gdGhlIGZ1dHVyZSBkdWUgdG8gYSBjbG9jayBjaGFuZ2UuXHJcbiAgICAgICAgdmFyIGRlbGF5U29GYXJNcyA9IE1hdGgubWF4KDAsIERhdGUubm93KCkgLSB0aGlzLmxhc3RBdHRlbXB0VGltZSk7XHJcbiAgICAgICAgLy8gR3VhcmQgYWdhaW5zdCB0aGUgYmFja29mZiBkZWxheSBhbHJlYWR5IGJlaW5nIHBhc3QuXHJcbiAgICAgICAgdmFyIHJlbWFpbmluZ0RlbGF5TXMgPSBNYXRoLm1heCgwLCBkZXNpcmVkRGVsYXlXaXRoSml0dGVyTXMgLSBkZWxheVNvRmFyTXMpO1xyXG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRCYXNlTXMgPiAwKSB7XHJcbiAgICAgICAgICAgIGRlYnVnKExPR19UQUckNCwgXCJCYWNraW5nIG9mZiBmb3IgXCIgKyByZW1haW5pbmdEZWxheU1zICsgXCIgbXMgXCIgK1xyXG4gICAgICAgICAgICAgICAgKFwiKGJhc2UgZGVsYXk6IFwiICsgdGhpcy5jdXJyZW50QmFzZU1zICsgXCIgbXMsIFwiKSArXHJcbiAgICAgICAgICAgICAgICAoXCJkZWxheSB3aXRoIGppdHRlcjogXCIgKyBkZXNpcmVkRGVsYXlXaXRoSml0dGVyTXMgKyBcIiBtcywgXCIpICtcclxuICAgICAgICAgICAgICAgIChcImxhc3QgYXR0ZW1wdDogXCIgKyBkZWxheVNvRmFyTXMgKyBcIiBtcyBhZ28pXCIpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy50aW1lclByb21pc2UgPSB0aGlzLnF1ZXVlLmVucXVldWVBZnRlckRlbGF5KHRoaXMudGltZXJJZCwgcmVtYWluaW5nRGVsYXlNcywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBfdGhpcy5sYXN0QXR0ZW1wdFRpbWUgPSBEYXRlLm5vdygpO1xyXG4gICAgICAgICAgICByZXR1cm4gb3AoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyBBcHBseSBiYWNrb2ZmIGZhY3RvciB0byBkZXRlcm1pbmUgbmV4dCBkZWxheSBhbmQgZW5zdXJlIGl0IGlzIHdpdGhpblxyXG4gICAgICAgIC8vIGJvdW5kcy5cclxuICAgICAgICB0aGlzLmN1cnJlbnRCYXNlTXMgKj0gdGhpcy5iYWNrb2ZmRmFjdG9yO1xyXG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRCYXNlTXMgPCB0aGlzLmluaXRpYWxEZWxheU1zKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY3VycmVudEJhc2VNcyA9IHRoaXMuaW5pdGlhbERlbGF5TXM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRCYXNlTXMgPiB0aGlzLm1heERlbGF5TXMpIHtcclxuICAgICAgICAgICAgdGhpcy5jdXJyZW50QmFzZU1zID0gdGhpcy5tYXhEZWxheU1zO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBFeHBvbmVudGlhbEJhY2tvZmYucHJvdG90eXBlLmNhbmNlbCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAodGhpcy50aW1lclByb21pc2UgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgdGhpcy50aW1lclByb21pc2UuY2FuY2VsKCk7XHJcbiAgICAgICAgICAgIHRoaXMudGltZXJQcm9taXNlID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqIFJldHVybnMgYSByYW5kb20gdmFsdWUgaW4gdGhlIHJhbmdlIFstY3VycmVudEJhc2VNcy8yLCBjdXJyZW50QmFzZU1zLzJdICovXHJcbiAgICBFeHBvbmVudGlhbEJhY2tvZmYucHJvdG90eXBlLmppdHRlckRlbGF5TXMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIChNYXRoLnJhbmRvbSgpIC0gMC41KSAqIHRoaXMuY3VycmVudEJhc2VNcztcclxuICAgIH07XHJcbiAgICByZXR1cm4gRXhwb25lbnRpYWxCYWNrb2ZmO1xyXG59KCkpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxudmFyIExPR19UQUckNSA9ICdQZXJzaXN0ZW50U3RyZWFtJztcclxuLyoqXHJcbiAqIFBlcnNpc3RlbnRTdHJlYW0gY2FuIGJlIGluIG9uZSBvZiA1IHN0YXRlcyAoZWFjaCBkZXNjcmliZWQgaW4gZGV0YWlsIGJlbG93KVxyXG4gKiBiYXNlZCBvbiB0aGUgZm9sbG93aW5nIHN0YXRlIHRyYW5zaXRpb24gZGlhZ3JhbTpcclxuICpcclxuICogICAgICAgICAgc3RhcnQoKSBjYWxsZWQgICAgICAgICAgICAgYXV0aCAmIGNvbm5lY3Rpb24gc3VjY2VlZGVkXHJcbiAqIElOSVRJQUwgLS0tLS0tLS0tLS0tLS0tLT4gU1RBUlRJTkcgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+IE9QRU5cclxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgIF4gIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcclxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgIHwgICAgICAgICAgICAgICAgICAgIGVycm9yIG9jY3VycmVkIHxcclxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgIFxcLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS12LS0tLS0vXHJcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XHJcbiAqICAgICAgICAgICAgICAgICAgICBiYWNrb2ZmICB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XHJcbiAqICAgICAgICAgICAgICAgICAgICBlbGFwc2VkICB8ICAgICAgICAgICAgICBzdGFydCgpIGNhbGxlZCAgICB8XHJcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXC0tLSBCQUNLT0ZGIDwtLS0tLS0tLS0tLS0tLS0tIEVSUk9SXHJcbiAqXHJcbiAqIFthbnkgc3RhdGVdIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPiBJTklUSUFMXHJcbiAqICAgICAgICAgICAgICAgc3RvcCgpIGNhbGxlZCBvclxyXG4gKiAgICAgICAgICAgICAgIGlkbGUgdGltZXIgZXhwaXJlZFxyXG4gKi9cclxudmFyIFBlcnNpc3RlbnRTdHJlYW1TdGF0ZTtcclxuKGZ1bmN0aW9uIChQZXJzaXN0ZW50U3RyZWFtU3RhdGUpIHtcclxuICAgIC8qKlxyXG4gICAgICogVGhlIHN0cmVhbWluZyBSUEMgaXMgbm90IHlldCBydW5uaW5nIGFuZCB0aGVyZSdzIG5vIGVycm9yIGNvbmRpdGlvbi5cclxuICAgICAqIENhbGxpbmcgc3RhcnQoKSB3aWxsIHN0YXJ0IHRoZSBzdHJlYW0gaW1tZWRpYXRlbHkgd2l0aG91dCBiYWNrb2ZmLlxyXG4gICAgICogV2hpbGUgaW4gdGhpcyBzdGF0ZSBpc1N0YXJ0ZWQoKSB3aWxsIHJldHVybiBmYWxzZS5cclxuICAgICAqL1xyXG4gICAgUGVyc2lzdGVudFN0cmVhbVN0YXRlW1BlcnNpc3RlbnRTdHJlYW1TdGF0ZVtcIkluaXRpYWxcIl0gPSAwXSA9IFwiSW5pdGlhbFwiO1xyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgc3RyZWFtIGlzIHN0YXJ0aW5nLCBlaXRoZXIgd2FpdGluZyBmb3IgYW4gYXV0aCB0b2tlbiBvciBmb3IgdGhlIHN0cmVhbVxyXG4gICAgICogdG8gc3VjY2Vzc2Z1bGx5IG9wZW4uIFdoaWxlIGluIHRoaXMgc3RhdGUsIGlzU3RhcnRlZCgpIHdpbGwgcmV0dXJuIHRydWUgYnV0XHJcbiAgICAgKiBpc09wZW4oKSB3aWxsIHJldHVybiBmYWxzZS5cclxuICAgICAqL1xyXG4gICAgUGVyc2lzdGVudFN0cmVhbVN0YXRlW1BlcnNpc3RlbnRTdHJlYW1TdGF0ZVtcIlN0YXJ0aW5nXCJdID0gMV0gPSBcIlN0YXJ0aW5nXCI7XHJcbiAgICAvKipcclxuICAgICAqIFRoZSBzdHJlYW1pbmcgUlBDIGlzIHVwIGFuZCBydW5uaW5nLiBSZXF1ZXN0cyBhbmQgcmVzcG9uc2VzIGNhbiBmbG93XHJcbiAgICAgKiBmcmVlbHkuIEJvdGggaXNTdGFydGVkKCkgYW5kIGlzT3BlbigpIHdpbGwgcmV0dXJuIHRydWUuXHJcbiAgICAgKi9cclxuICAgIFBlcnNpc3RlbnRTdHJlYW1TdGF0ZVtQZXJzaXN0ZW50U3RyZWFtU3RhdGVbXCJPcGVuXCJdID0gMl0gPSBcIk9wZW5cIjtcclxuICAgIC8qKlxyXG4gICAgICogVGhlIHN0cmVhbSBlbmNvdW50ZXJlZCBhbiBlcnJvci4gVGhlIG5leHQgc3RhcnQgYXR0ZW1wdCB3aWxsIGJhY2sgb2ZmLlxyXG4gICAgICogV2hpbGUgaW4gdGhpcyBzdGF0ZSBpc1N0YXJ0ZWQoKSB3aWxsIHJldHVybiBmYWxzZS5cclxuICAgICAqL1xyXG4gICAgUGVyc2lzdGVudFN0cmVhbVN0YXRlW1BlcnNpc3RlbnRTdHJlYW1TdGF0ZVtcIkVycm9yXCJdID0gM10gPSBcIkVycm9yXCI7XHJcbiAgICAvKipcclxuICAgICAqIEFuIGluLWJldHdlZW4gc3RhdGUgYWZ0ZXIgYW4gZXJyb3Igd2hlcmUgdGhlIHN0cmVhbSBpcyB3YWl0aW5nIGJlZm9yZVxyXG4gICAgICogcmUtc3RhcnRpbmcuIEFmdGVyIHdhaXRpbmcgaXMgY29tcGxldGUsIHRoZSBzdHJlYW0gd2lsbCB0cnkgdG8gb3Blbi5cclxuICAgICAqIFdoaWxlIGluIHRoaXMgc3RhdGUgaXNTdGFydGVkKCkgd2lsbCByZXR1cm4gdHJ1ZSBidXQgaXNPcGVuKCkgd2lsbCByZXR1cm5cclxuICAgICAqIGZhbHNlLlxyXG4gICAgICovXHJcbiAgICBQZXJzaXN0ZW50U3RyZWFtU3RhdGVbUGVyc2lzdGVudFN0cmVhbVN0YXRlW1wiQmFja29mZlwiXSA9IDRdID0gXCJCYWNrb2ZmXCI7XHJcbn0pKFBlcnNpc3RlbnRTdHJlYW1TdGF0ZSB8fCAoUGVyc2lzdGVudFN0cmVhbVN0YXRlID0ge30pKTtcclxuLyoqIFRoZSB0aW1lIGEgc3RyZWFtIHN0YXlzIG9wZW4gYWZ0ZXIgaXQgaXMgbWFya2VkIGlkbGUuICovXHJcbnZhciBJRExFX1RJTUVPVVRfTVMgPSA2MCAqIDEwMDA7XHJcbi8qKlxyXG4gKiBBIFBlcnNpc3RlbnRTdHJlYW0gaXMgYW4gYWJzdHJhY3QgYmFzZSBjbGFzcyB0aGF0IHJlcHJlc2VudHMgYSBzdHJlYW1pbmcgUlBDXHJcbiAqIHRvIHRoZSBGaXJlc3RvcmUgYmFja2VuZC4gSXQncyBidWlsdCBvbiB0b3Agb2YgdGhlIGNvbm5lY3Rpb25zIG93biBzdXBwb3J0XHJcbiAqIGZvciBzdHJlYW1pbmcgUlBDcywgYW5kIGFkZHMgc2V2ZXJhbCBjcml0aWNhbCBmZWF0dXJlcyBmb3Igb3VyIGNsaWVudHM6XHJcbiAqXHJcbiAqICAgLSBFeHBvbmVudGlhbCBiYWNrb2ZmIG9uIGZhaWx1cmVcclxuICogICAtIEF1dGhlbnRpY2F0aW9uIHZpYSBDcmVkZW50aWFsc1Byb3ZpZGVyXHJcbiAqICAgLSBEaXNwYXRjaGluZyBhbGwgY2FsbGJhY2tzIGludG8gdGhlIHNoYXJlZCB3b3JrZXIgcXVldWVcclxuICogICAtIENsb3NpbmcgaWRsZSBzdHJlYW1zIGFmdGVyIDYwIHNlY29uZHMgb2YgaW5hY3Rpdml0eVxyXG4gKlxyXG4gKiBTdWJjbGFzc2VzIG9mIFBlcnNpc3RlbnRTdHJlYW0gaW1wbGVtZW50IHNlcmlhbGl6YXRpb24gb2YgbW9kZWxzIHRvIGFuZFxyXG4gKiBmcm9tIHRoZSBKU09OIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBwcm90b2NvbCBidWZmZXJzIGZvciBhIHNwZWNpZmljXHJcbiAqIHN0cmVhbWluZyBSUEMuXHJcbiAqXHJcbiAqICMjIFN0YXJ0aW5nIGFuZCBTdG9wcGluZ1xyXG4gKlxyXG4gKiBTdHJlYW1pbmcgUlBDcyBhcmUgc3RhdGVmdWwgYW5kIG5lZWQgdG8gYmUgc3RhcnQoKWVkIGJlZm9yZSBtZXNzYWdlcyBjYW5cclxuICogYmUgc2VudCBhbmQgcmVjZWl2ZWQuIFRoZSBQZXJzaXN0ZW50U3RyZWFtIHdpbGwgY2FsbCB0aGUgb25PcGVuKCkgZnVuY3Rpb25cclxuICogb2YgdGhlIGxpc3RlbmVyIG9uY2UgdGhlIHN0cmVhbSBpcyByZWFkeSB0byBhY2NlcHQgcmVxdWVzdHMuXHJcbiAqXHJcbiAqIFNob3VsZCBhIHN0YXJ0KCkgZmFpbCwgUGVyc2lzdGVudFN0cmVhbSB3aWxsIGNhbGwgdGhlIHJlZ2lzdGVyZWQgb25DbG9zZSgpXHJcbiAqIGxpc3RlbmVyIHdpdGggYSBGaXJlc3RvcmVFcnJvciBpbmRpY2F0aW5nIHdoYXQgd2VudCB3cm9uZy5cclxuICpcclxuICogQSBQZXJzaXN0ZW50U3RyZWFtIGNhbiBiZSBzdGFydGVkIGFuZCBzdG9wcGVkIHJlcGVhdGVkbHkuXHJcbiAqXHJcbiAqIEdlbmVyaWMgdHlwZXM6XHJcbiAqICBTZW5kVHlwZTogVGhlIHR5cGUgb2YgdGhlIG91dGdvaW5nIG1lc3NhZ2Ugb2YgdGhlIHVuZGVybHlpbmdcclxuICogICAgY29ubmVjdGlvbiBzdHJlYW1cclxuICogIFJlY2VpdmVUeXBlOiBUaGUgdHlwZSBvZiB0aGUgaW5jb21pbmcgbWVzc2FnZSBvZiB0aGUgdW5kZXJseWluZ1xyXG4gKiAgICBjb25uZWN0aW9uIHN0cmVhbVxyXG4gKiAgTGlzdGVuZXJUeXBlOiBUaGUgdHlwZSBvZiB0aGUgbGlzdGVuZXIgdGhhdCB3aWxsIGJlIHVzZWQgZm9yIGNhbGxiYWNrc1xyXG4gKi9cclxudmFyIFBlcnNpc3RlbnRTdHJlYW0gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBQZXJzaXN0ZW50U3RyZWFtKHF1ZXVlLCBjb25uZWN0aW9uVGltZXJJZCwgaWRsZVRpbWVySWQsIGNvbm5lY3Rpb24sIGNyZWRlbnRpYWxzUHJvdmlkZXIsIGxpc3RlbmVyKSB7XHJcbiAgICAgICAgdGhpcy5xdWV1ZSA9IHF1ZXVlO1xyXG4gICAgICAgIHRoaXMuaWRsZVRpbWVySWQgPSBpZGxlVGltZXJJZDtcclxuICAgICAgICB0aGlzLmNvbm5lY3Rpb24gPSBjb25uZWN0aW9uO1xyXG4gICAgICAgIHRoaXMuY3JlZGVudGlhbHNQcm92aWRlciA9IGNyZWRlbnRpYWxzUHJvdmlkZXI7XHJcbiAgICAgICAgdGhpcy5saXN0ZW5lciA9IGxpc3RlbmVyO1xyXG4gICAgICAgIHRoaXMuc3RhdGUgPSBQZXJzaXN0ZW50U3RyZWFtU3RhdGUuSW5pdGlhbDtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBBIGNsb3NlIGNvdW50IHRoYXQncyBpbmNyZW1lbnRlZCBldmVyeSB0aW1lIHRoZSBzdHJlYW0gaXMgY2xvc2VkOyB1c2VkIGJ5XHJcbiAgICAgICAgICogZ2V0Q2xvc2VHdWFyZGVkRGlzcGF0Y2hlcigpIHRvIGludmFsaWRhdGUgY2FsbGJhY2tzIHRoYXQgaGFwcGVuIGFmdGVyXHJcbiAgICAgICAgICogY2xvc2UuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5jbG9zZUNvdW50ID0gMDtcclxuICAgICAgICB0aGlzLmlkbGVUaW1lciA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5zdHJlYW0gPSBudWxsO1xyXG4gICAgICAgIHRoaXMuYmFja29mZiA9IG5ldyBFeHBvbmVudGlhbEJhY2tvZmYocXVldWUsIGNvbm5lY3Rpb25UaW1lcklkKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHN0YXJ0KCkgaGFzIGJlZW4gY2FsbGVkIGFuZCBubyBlcnJvciBoYXMgb2NjdXJyZWQuIFRydWVcclxuICAgICAqIGluZGljYXRlcyB0aGUgc3RyZWFtIGlzIG9wZW4gb3IgaW4gdGhlIHByb2Nlc3Mgb2Ygb3BlbmluZyAod2hpY2hcclxuICAgICAqIGVuY29tcGFzc2VzIHJlc3BlY3RpbmcgYmFja29mZiwgZ2V0dGluZyBhdXRoIHRva2VucywgYW5kIHN0YXJ0aW5nIHRoZVxyXG4gICAgICogYWN0dWFsIFJQQykuIFVzZSBpc09wZW4oKSB0byBkZXRlcm1pbmUgaWYgdGhlIHN0cmVhbSBpcyBvcGVuIGFuZCByZWFkeSBmb3JcclxuICAgICAqIG91dGJvdW5kIHJlcXVlc3RzLlxyXG4gICAgICovXHJcbiAgICBQZXJzaXN0ZW50U3RyZWFtLnByb3RvdHlwZS5pc1N0YXJ0ZWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuICh0aGlzLnN0YXRlID09PSBQZXJzaXN0ZW50U3RyZWFtU3RhdGUuU3RhcnRpbmcgfHxcclxuICAgICAgICAgICAgdGhpcy5zdGF0ZSA9PT0gUGVyc2lzdGVudFN0cmVhbVN0YXRlLk9wZW4gfHxcclxuICAgICAgICAgICAgdGhpcy5zdGF0ZSA9PT0gUGVyc2lzdGVudFN0cmVhbVN0YXRlLkJhY2tvZmYpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoZSB1bmRlcmx5aW5nIFJQQyBpcyBvcGVuICh0aGUgb25PcGVuKCkgbGlzdGVuZXIgaGFzIGJlZW5cclxuICAgICAqIGNhbGxlZCkgYW5kIHRoZSBzdHJlYW0gaXMgcmVhZHkgZm9yIG91dGJvdW5kIHJlcXVlc3RzLlxyXG4gICAgICovXHJcbiAgICBQZXJzaXN0ZW50U3RyZWFtLnByb3RvdHlwZS5pc09wZW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdGUgPT09IFBlcnNpc3RlbnRTdHJlYW1TdGF0ZS5PcGVuO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogU3RhcnRzIHRoZSBSUEMuIE9ubHkgYWxsb3dlZCBpZiBpc1N0YXJ0ZWQoKSByZXR1cm5zIGZhbHNlLiBUaGUgc3RyZWFtIGlzXHJcbiAgICAgKiBub3QgaW1tZWRpYXRlbHkgcmVhZHkgZm9yIHVzZTogb25PcGVuKCkgd2lsbCBiZSBpbnZva2VkIHdoZW4gdGhlIFJQQyBpc1xyXG4gICAgICogcmVhZHkgZm9yIG91dGJvdW5kIHJlcXVlc3RzLCBhdCB3aGljaCBwb2ludCBpc09wZW4oKSB3aWxsIHJldHVybiB0cnVlLlxyXG4gICAgICpcclxuICAgICAqIFdoZW4gc3RhcnQgcmV0dXJucywgaXNTdGFydGVkKCkgd2lsbCByZXR1cm4gdHJ1ZS5cclxuICAgICAqL1xyXG4gICAgUGVyc2lzdGVudFN0cmVhbS5wcm90b3R5cGUuc3RhcnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUgPT09IFBlcnNpc3RlbnRTdHJlYW1TdGF0ZS5FcnJvcikge1xyXG4gICAgICAgICAgICB0aGlzLnBlcmZvcm1CYWNrb2ZmKCk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgYXNzZXJ0KHRoaXMuc3RhdGUgPT09IFBlcnNpc3RlbnRTdHJlYW1TdGF0ZS5Jbml0aWFsLCAnQWxyZWFkeSBzdGFydGVkJyk7XHJcbiAgICAgICAgdGhpcy5hdXRoKCk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBTdG9wcyB0aGUgUlBDLiBUaGlzIGNhbGwgaXMgaWRlbXBvdGVudCBhbmQgYWxsb3dlZCByZWdhcmRsZXNzIG9mIHRoZVxyXG4gICAgICogY3VycmVudCBpc1N0YXJ0ZWQoKSBzdGF0ZS5cclxuICAgICAqXHJcbiAgICAgKiBXaGVuIHN0b3AgcmV0dXJucywgaXNTdGFydGVkKCkgYW5kIGlzT3BlbigpIHdpbGwgYm90aCByZXR1cm4gZmFsc2UuXHJcbiAgICAgKi9cclxuICAgIFBlcnNpc3RlbnRTdHJlYW0ucHJvdG90eXBlLnN0b3AgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRzbGliLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHNsaWIuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuaXNTdGFydGVkKCkpIHJldHVybiBbMyAvKmJyZWFrKi8sIDJdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmNsb3NlKFBlcnNpc3RlbnRTdHJlYW1TdGF0ZS5Jbml0aWFsKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLmxhYmVsID0gMjtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6IHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBBZnRlciBhbiBlcnJvciB0aGUgc3RyZWFtIHdpbGwgdXN1YWxseSBiYWNrIG9mZiBvbiB0aGUgbmV4dCBhdHRlbXB0IHRvXHJcbiAgICAgKiBzdGFydCBpdC4gSWYgdGhlIGVycm9yIHdhcnJhbnRzIGFuIGltbWVkaWF0ZSByZXN0YXJ0IG9mIHRoZSBzdHJlYW0sIHRoZVxyXG4gICAgICogc2VuZGVyIGNhbiB1c2UgdGhpcyB0byBpbmRpY2F0ZSB0aGF0IHRoZSByZWNlaXZlciBzaG91bGQgbm90IGJhY2sgb2ZmLlxyXG4gICAgICpcclxuICAgICAqIEVhY2ggZXJyb3Igd2lsbCBjYWxsIHRoZSBvbkNsb3NlKCkgbGlzdGVuZXIuIFRoYXQgZnVuY3Rpb24gY2FuIGRlY2lkZSB0b1xyXG4gICAgICogaW5oaWJpdCBiYWNrb2ZmIGlmIHJlcXVpcmVkLlxyXG4gICAgICovXHJcbiAgICBQZXJzaXN0ZW50U3RyZWFtLnByb3RvdHlwZS5pbmhpYml0QmFja29mZiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBhc3NlcnQoIXRoaXMuaXNTdGFydGVkKCksICdDYW4gb25seSBpbmhpYml0IGJhY2tvZmYgaW4gYSBzdG9wcGVkIHN0YXRlJyk7XHJcbiAgICAgICAgdGhpcy5zdGF0ZSA9IFBlcnNpc3RlbnRTdHJlYW1TdGF0ZS5Jbml0aWFsO1xyXG4gICAgICAgIHRoaXMuYmFja29mZi5yZXNldCgpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogTWFya3MgdGhpcyBzdHJlYW0gYXMgaWRsZS4gSWYgbm8gZnVydGhlciBhY3Rpb25zIGFyZSBwZXJmb3JtZWQgb24gdGhlXHJcbiAgICAgKiBzdHJlYW0gZm9yIG9uZSBtaW51dGUsIHRoZSBzdHJlYW0gd2lsbCBhdXRvbWF0aWNhbGx5IGNsb3NlIGl0c2VsZiBhbmRcclxuICAgICAqIG5vdGlmeSB0aGUgc3RyZWFtJ3Mgb25DbG9zZSgpIGhhbmRsZXIgd2l0aCBTdGF0dXMuT0suIFRoZSBzdHJlYW0gd2lsbCB0aGVuXHJcbiAgICAgKiBiZSBpbiBhICFpc1N0YXJ0ZWQoKSBzdGF0ZSwgcmVxdWlyaW5nIHRoZSBjYWxsZXIgdG8gc3RhcnQgdGhlIHN0cmVhbSBhZ2FpblxyXG4gICAgICogYmVmb3JlIGZ1cnRoZXIgdXNlLlxyXG4gICAgICpcclxuICAgICAqIE9ubHkgc3RyZWFtcyB0aGF0IGFyZSBpbiBzdGF0ZSAnT3BlbicgY2FuIGJlIG1hcmtlZCBpZGxlLCBhcyBhbGwgb3RoZXJcclxuICAgICAqIHN0YXRlcyBpbXBseSBwZW5kaW5nIG5ldHdvcmsgb3BlcmF0aW9ucy5cclxuICAgICAqL1xyXG4gICAgUGVyc2lzdGVudFN0cmVhbS5wcm90b3R5cGUubWFya0lkbGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICAvLyBTdGFydHMgdGhlIGlkbGUgdGltZSBpZiB3ZSBhcmUgaW4gc3RhdGUgJ09wZW4nIGFuZCBhcmUgbm90IHlldCBhbHJlYWR5XHJcbiAgICAgICAgLy8gcnVubmluZyBhIHRpbWVyIChpbiB3aGljaCBjYXNlIHRoZSBwcmV2aW91cyBpZGxlIHRpbWVvdXQgc3RpbGwgYXBwbGllcykuXHJcbiAgICAgICAgaWYgKHRoaXMuaXNPcGVuKCkgJiYgdGhpcy5pZGxlVGltZXIgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgdGhpcy5pZGxlVGltZXIgPSB0aGlzLnF1ZXVlLmVucXVldWVBZnRlckRlbGF5KHRoaXMuaWRsZVRpbWVySWQsIElETEVfVElNRU9VVF9NUywgZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMuaGFuZGxlSWRsZUNsb3NlVGltZXIoKTsgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKiBTZW5kcyBhIG1lc3NhZ2UgdG8gdGhlIHVuZGVybHlpbmcgc3RyZWFtLiAqL1xyXG4gICAgUGVyc2lzdGVudFN0cmVhbS5wcm90b3R5cGUuc2VuZFJlcXVlc3QgPSBmdW5jdGlvbiAobXNnKSB7XHJcbiAgICAgICAgdGhpcy5jYW5jZWxJZGxlQ2hlY2soKTtcclxuICAgICAgICB0aGlzLnN0cmVhbS5zZW5kKG1zZyk7XHJcbiAgICB9O1xyXG4gICAgLyoqIENhbGxlZCBieSB0aGUgaWRsZSB0aW1lciB3aGVuIHRoZSBzdHJlYW0gc2hvdWxkIGNsb3NlIGR1ZSB0byBpbmFjdGl2aXR5LiAqL1xyXG4gICAgUGVyc2lzdGVudFN0cmVhbS5wcm90b3R5cGUuaGFuZGxlSWRsZUNsb3NlVGltZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRzbGliLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHNsaWIuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pc09wZW4oKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFdoZW4gdGltaW5nIG91dCBhbiBpZGxlIHN0cmVhbSB0aGVyZSdzIG5vIHJlYXNvbiB0byBmb3JjZSB0aGUgc3RyZWFtIGludG8gYmFja29mZiB3aGVuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gaXQgcmVzdGFydHMgc28gc2V0IHRoZSBzdHJlYW0gc3RhdGUgdG8gSW5pdGlhbCBpbnN0ZWFkIG9mIEVycm9yLlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0aGlzLmNsb3NlKFBlcnNpc3RlbnRTdHJlYW1TdGF0ZS5Jbml0aWFsKV07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKiBNYXJrcyB0aGUgc3RyZWFtIGFzIGFjdGl2ZSBhZ2Fpbi4gKi9cclxuICAgIFBlcnNpc3RlbnRTdHJlYW0ucHJvdG90eXBlLmNhbmNlbElkbGVDaGVjayA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAodGhpcy5pZGxlVGltZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5pZGxlVGltZXIuY2FuY2VsKCk7XHJcbiAgICAgICAgICAgIHRoaXMuaWRsZVRpbWVyID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBDbG9zZXMgdGhlIHN0cmVhbSBhbmQgY2xlYW5zIHVwIGFzIG5lY2Vzc2FyeTpcclxuICAgICAqXHJcbiAgICAgKiAqIGNsb3NlcyB0aGUgdW5kZXJseWluZyBHUlBDIHN0cmVhbTtcclxuICAgICAqICogY2FsbHMgdGhlIG9uQ2xvc2UgaGFuZGxlciB3aXRoIHRoZSBnaXZlbiAnZXJyb3InO1xyXG4gICAgICogKiBzZXRzIGludGVybmFsIHN0cmVhbSBzdGF0ZSB0byAnZmluYWxTdGF0ZSc7XHJcbiAgICAgKiAqIGFkanVzdHMgdGhlIGJhY2tvZmYgdGltZXIgYmFzZWQgb24gdGhlIGVycm9yXHJcbiAgICAgKlxyXG4gICAgICogQSBuZXcgc3RyZWFtIGNhbiBiZSBvcGVuZWQgYnkgY2FsbGluZyBzdGFydCgpLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBmaW5hbFN0YXRlIHRoZSBpbnRlbmRlZCBzdGF0ZSBvZiB0aGUgc3RyZWFtIGFmdGVyIGNsb3NpbmcuXHJcbiAgICAgKiBAcGFyYW0gZXJyb3IgdGhlIGVycm9yIHRoZSBjb25uZWN0aW9uIHdhcyBjbG9zZWQgd2l0aC5cclxuICAgICAqL1xyXG4gICAgUGVyc2lzdGVudFN0cmVhbS5wcm90b3R5cGUuY2xvc2UgPSBmdW5jdGlvbiAoZmluYWxTdGF0ZSwgZXJyb3IkMSkge1xyXG4gICAgICAgIHJldHVybiB0c2xpYi5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXJ0KHRoaXMuaXNTdGFydGVkKCksICdPbmx5IHN0YXJ0ZWQgc3RyZWFtcyBzaG91bGQgYmUgY2xvc2VkLicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhc3NlcnQoZmluYWxTdGF0ZSA9PT0gUGVyc2lzdGVudFN0cmVhbVN0YXRlLkVycm9yIHx8IGlzTnVsbE9yVW5kZWZpbmVkKGVycm9yJDEpLCBcIkNhbid0IHByb3ZpZGUgYW4gZXJyb3Igd2hlbiBub3QgaW4gYW4gZXJyb3Igc3RhdGUuXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBDYW5jZWwgYW55IG91dHN0YW5kaW5nIHRpbWVycyAodGhleSdyZSBndWFyYW50ZWVkIG5vdCB0byBleGVjdXRlKS5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jYW5jZWxJZGxlQ2hlY2soKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5iYWNrb2ZmLmNhbmNlbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBJbnZhbGlkYXRlcyBhbnkgc3RyZWFtLXJlbGF0ZWQgY2FsbGJhY2tzIChlLmcuIGZyb20gYXV0aCBvciB0aGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdW5kZXJseWluZyBzdHJlYW0pLCBndWFyYW50ZWVpbmcgdGhleSB3b24ndCBleGVjdXRlLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlQ291bnQrKztcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZpbmFsU3RhdGUgIT09IFBlcnNpc3RlbnRTdHJlYW1TdGF0ZS5FcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhpcyBpcyBhbiBpbnRlbnRpb25hbCBjbG9zZSBlbnN1cmUgd2UgZG9uJ3QgZGVsYXkgb3VyIG5leHQgY29ubmVjdGlvbiBhdHRlbXB0LlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5iYWNrb2ZmLnJlc2V0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoZXJyb3IkMSAmJiBlcnJvciQxLmNvZGUgPT09IENvZGUuUkVTT1VSQ0VfRVhIQVVTVEVEKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBMb2cgdGhlIGVycm9yLiAoUHJvYmFibHkgZWl0aGVyICdxdW90YSBleGNlZWRlZCcgb3IgJ21heCBxdWV1ZSBsZW5ndGggcmVhY2hlZCcuKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3IoZXJyb3IkMS50b1N0cmluZygpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yKCdVc2luZyBtYXhpbXVtIGJhY2tvZmYgZGVsYXkgdG8gcHJldmVudCBvdmVybG9hZGluZyB0aGUgYmFja2VuZC4nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYmFja29mZi5yZXNldFRvTWF4KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoZXJyb3IkMSAmJiBlcnJvciQxLmNvZGUgPT09IENvZGUuVU5BVVRIRU5USUNBVEVEKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBcInVuYXV0aGVudGljYXRlZFwiIGVycm9yIG1lYW5zIHRoZSB0b2tlbiB3YXMgcmVqZWN0ZWQuIFRyeSBmb3JjZSByZWZyZXNoaW5nIGl0IGluIGNhc2UgaXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGp1c3QgZXhwaXJlZC5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3JlZGVudGlhbHNQcm92aWRlci5pbnZhbGlkYXRlVG9rZW4oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBDbGVhbiB1cCB0aGUgdW5kZXJseWluZyBzdHJlYW0gYmVjYXVzZSB3ZSBhcmUgbm8gbG9uZ2VyIGludGVyZXN0ZWQgaW4gZXZlbnRzLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5zdHJlYW0gIT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudGVhckRvd24oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RyZWFtLmNsb3NlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0cmVhbSA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhpcyBzdGF0ZSBtdXN0IGJlIGFzc2lnbmVkIGJlZm9yZSBjYWxsaW5nIG9uQ2xvc2UoKSB0byBhbGxvdyB0aGUgY2FsbGJhY2sgdG9cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gaW5oaWJpdCBiYWNrb2ZmIG9yIG90aGVyd2lzZSBtYW5pcHVsYXRlIHRoZSBzdGF0ZSBpbiBpdHMgbm9uLXN0YXJ0ZWQgc3RhdGUuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBmaW5hbFN0YXRlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBOb3RpZnkgdGhlIGxpc3RlbmVyIHRoYXQgdGhlIHN0cmVhbSBjbG9zZWQuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMubGlzdGVuZXIub25DbG9zZShlcnJvciQxKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBOb3RpZnkgdGhlIGxpc3RlbmVyIHRoYXQgdGhlIHN0cmVhbSBjbG9zZWQuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIENhbiBiZSBvdmVycmlkZGVuIHRvIHBlcmZvcm0gYWRkaXRpb25hbCBjbGVhbnVwIGJlZm9yZSB0aGUgc3RyZWFtIGlzIGNsb3NlZC5cclxuICAgICAqIENhbGxpbmcgc3VwZXIudGVhckRvd24oKSBpcyBub3QgcmVxdWlyZWQuXHJcbiAgICAgKi9cclxuICAgIFBlcnNpc3RlbnRTdHJlYW0ucHJvdG90eXBlLnRlYXJEb3duID0gZnVuY3Rpb24gKCkgeyB9O1xyXG4gICAgUGVyc2lzdGVudFN0cmVhbS5wcm90b3R5cGUuYXV0aCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIGFzc2VydCh0aGlzLnN0YXRlID09PSBQZXJzaXN0ZW50U3RyZWFtU3RhdGUuSW5pdGlhbCwgJ011c3QgYmUgaW4gaW5pdGlhbCBzdGF0ZSB0byBhdXRoJyk7XHJcbiAgICAgICAgdGhpcy5zdGF0ZSA9IFBlcnNpc3RlbnRTdHJlYW1TdGF0ZS5TdGFydGluZztcclxuICAgICAgICB2YXIgZGlzcGF0Y2hJZk5vdENsb3NlZCA9IHRoaXMuZ2V0Q2xvc2VHdWFyZGVkRGlzcGF0Y2hlcih0aGlzLmNsb3NlQ291bnQpO1xyXG4gICAgICAgIC8vIFRPRE8obWlrZWxlaGVuKTogSnVzdCB1c2UgZGlzcGF0Y2hJZk5vdENsb3NlZCwgYnV0IHNlZSBUT0RPIGJlbG93LlxyXG4gICAgICAgIHZhciBjbG9zZUNvdW50ID0gdGhpcy5jbG9zZUNvdW50O1xyXG4gICAgICAgIHRoaXMuY3JlZGVudGlhbHNQcm92aWRlci5nZXRUb2tlbigpLnRoZW4oZnVuY3Rpb24gKHRva2VuKSB7XHJcbiAgICAgICAgICAgIC8vIFN0cmVhbSBjYW4gYmUgc3RvcHBlZCB3aGlsZSB3YWl0aW5nIGZvciBhdXRoZW50aWNhdGlvbi5cclxuICAgICAgICAgICAgLy8gVE9ETyhtaWtlbGVoZW4pOiBXZSByZWFsbHkgc2hvdWxkIGp1c3QgdXNlIGRpc3BhdGNoSWZOb3RDbG9zZWRcclxuICAgICAgICAgICAgLy8gYW5kIGxldCB0aGlzIGRpc3BhdGNoIG9udG8gdGhlIHF1ZXVlLCBidXQgdGhhdCBvcGVuZWQgYSBzcGVjIHRlc3QgY2FuXHJcbiAgICAgICAgICAgIC8vIG9mIHdvcm1zIHRoYXQgSSBkb24ndCB3YW50IHRvIGRlYWwgd2l0aCBpbiB0aGlzIFBSLlxyXG4gICAgICAgICAgICBpZiAoX3RoaXMuY2xvc2VDb3VudCA9PT0gY2xvc2VDb3VudCkge1xyXG4gICAgICAgICAgICAgICAgLy8gTm9ybWFsbHkgd2UnZCBoYXZlIHRvIHNjaGVkdWxlIHRoZSBjYWxsYmFjayBvbiB0aGUgQXN5bmNRdWV1ZS5cclxuICAgICAgICAgICAgICAgIC8vIEhvd2V2ZXIsIHRoZSBmb2xsb3dpbmcgY2FsbHMgYXJlIHNhZmUgdG8gYmUgY2FsbGVkIG91dHNpZGUgdGhlXHJcbiAgICAgICAgICAgICAgICAvLyBBc3luY1F1ZXVlIHNpbmNlIHRoZXkgZG9uJ3QgY2hhaW4gYXN5bmNocm9ub3VzIGNhbGxzXHJcbiAgICAgICAgICAgICAgICBfdGhpcy5zdGFydFN0cmVhbSh0b2tlbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgZGlzcGF0Y2hJZk5vdENsb3NlZChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcnBjRXJyb3IgPSBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5VTktOT1dOLCAnRmV0Y2hpbmcgYXV0aCB0b2tlbiBmYWlsZWQ6ICcgKyBlcnJvci5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5oYW5kbGVTdHJlYW1DbG9zZShycGNFcnJvcik7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIFBlcnNpc3RlbnRTdHJlYW0ucHJvdG90eXBlLnN0YXJ0U3RyZWFtID0gZnVuY3Rpb24gKHRva2VuKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBhc3NlcnQodGhpcy5zdGF0ZSA9PT0gUGVyc2lzdGVudFN0cmVhbVN0YXRlLlN0YXJ0aW5nLCAnVHJ5aW5nIHRvIHN0YXJ0IHN0cmVhbSBpbiBhIG5vbi1zdGFydGluZyBzdGF0ZScpO1xyXG4gICAgICAgIHZhciBkaXNwYXRjaElmTm90Q2xvc2VkID0gdGhpcy5nZXRDbG9zZUd1YXJkZWREaXNwYXRjaGVyKHRoaXMuY2xvc2VDb3VudCk7XHJcbiAgICAgICAgdGhpcy5zdHJlYW0gPSB0aGlzLnN0YXJ0UnBjKHRva2VuKTtcclxuICAgICAgICB0aGlzLnN0cmVhbS5vbk9wZW4oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBkaXNwYXRjaElmTm90Q2xvc2VkKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGFzc2VydChfdGhpcy5zdGF0ZSA9PT0gUGVyc2lzdGVudFN0cmVhbVN0YXRlLlN0YXJ0aW5nLCAnRXhwZWN0ZWQgc3RyZWFtIHRvIGJlIGluIHN0YXRlIFN0YXJ0aW5nLCBidXQgd2FzICcgKyBfdGhpcy5zdGF0ZSk7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5zdGF0ZSA9IFBlcnNpc3RlbnRTdHJlYW1TdGF0ZS5PcGVuO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLmxpc3RlbmVyLm9uT3BlbigpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLnN0cmVhbS5vbkNsb3NlKGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgICAgICBkaXNwYXRjaElmTm90Q2xvc2VkKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5oYW5kbGVTdHJlYW1DbG9zZShlcnJvcik7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuc3RyZWFtLm9uTWVzc2FnZShmdW5jdGlvbiAobXNnKSB7XHJcbiAgICAgICAgICAgIGRpc3BhdGNoSWZOb3RDbG9zZWQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLm9uTWVzc2FnZShtc2cpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBQZXJzaXN0ZW50U3RyZWFtLnByb3RvdHlwZS5wZXJmb3JtQmFja29mZiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIGFzc2VydCh0aGlzLnN0YXRlID09PSBQZXJzaXN0ZW50U3RyZWFtU3RhdGUuRXJyb3IsICdTaG91bGQgb25seSBwZXJmb3JtIGJhY2tvZmYgd2hlbiBpbiBFcnJvciBzdGF0ZScpO1xyXG4gICAgICAgIHRoaXMuc3RhdGUgPSBQZXJzaXN0ZW50U3RyZWFtU3RhdGUuQmFja29mZjtcclxuICAgICAgICB0aGlzLmJhY2tvZmYuYmFja29mZkFuZFJ1bihmdW5jdGlvbiAoKSB7IHJldHVybiB0c2xpYi5fX2F3YWl0ZXIoX3RoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYi5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIGFzc2VydCh0aGlzLnN0YXRlID09PSBQZXJzaXN0ZW50U3RyZWFtU3RhdGUuQmFja29mZiwgJ0JhY2tvZmYgZWxhcHNlZCBidXQgc3RhdGUgaXMgbm93OiAnICsgdGhpcy5zdGF0ZSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXRlID0gUGVyc2lzdGVudFN0cmVhbVN0YXRlLkluaXRpYWw7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0KCk7XHJcbiAgICAgICAgICAgICAgICBhc3NlcnQodGhpcy5pc1N0YXJ0ZWQoKSwgJ1BlcnNpc3RlbnRTdHJlYW0gc2hvdWxkIGhhdmUgc3RhcnRlZCcpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTsgfSk7XHJcbiAgICB9O1xyXG4gICAgLy8gVmlzaWJsZSBmb3IgdGVzdHNcclxuICAgIFBlcnNpc3RlbnRTdHJlYW0ucHJvdG90eXBlLmhhbmRsZVN0cmVhbUNsb3NlID0gZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICAgICAgYXNzZXJ0KHRoaXMuaXNTdGFydGVkKCksIFwiQ2FuJ3QgaGFuZGxlIHNlcnZlciBjbG9zZSBvbiBub24tc3RhcnRlZCBzdHJlYW1cIik7XHJcbiAgICAgICAgZGVidWcoTE9HX1RBRyQ1LCBcImNsb3NlIHdpdGggZXJyb3I6IFwiICsgZXJyb3IpO1xyXG4gICAgICAgIHRoaXMuc3RyZWFtID0gbnVsbDtcclxuICAgICAgICAvLyBJbiB0aGVvcnkgdGhlIHN0cmVhbSBjb3VsZCBjbG9zZSBjbGVhbmx5LCBob3dldmVyLCBpbiBvdXIgY3VycmVudCBtb2RlbFxyXG4gICAgICAgIC8vIHdlIG5ldmVyIGV4cGVjdCB0aGlzIHRvIGhhcHBlbiBiZWNhdXNlIGlmIHdlIHN0b3AgYSBzdHJlYW0gb3Vyc2VsdmVzLFxyXG4gICAgICAgIC8vIHRoaXMgY2FsbGJhY2sgd2lsbCBuZXZlciBiZSBjYWxsZWQuIFRvIHByZXZlbnQgY2FzZXMgd2hlcmUgd2UgcmV0cnlcclxuICAgICAgICAvLyB3aXRob3V0IGEgYmFja29mZiBhY2NpZGVudGFsbHksIHdlIHNldCB0aGUgc3RyZWFtIHRvIGVycm9yIGluIGFsbCBjYXNlcy5cclxuICAgICAgICByZXR1cm4gdGhpcy5jbG9zZShQZXJzaXN0ZW50U3RyZWFtU3RhdGUuRXJyb3IsIGVycm9yKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgYSBcImRpc3BhdGNoZXJcIiBmdW5jdGlvbiB0aGF0IGRpc3BhdGNoZXMgb3BlcmF0aW9ucyBvbnRvIHRoZVxyXG4gICAgICogQXN5bmNRdWV1ZSBidXQgb25seSBydW5zIHRoZW0gaWYgY2xvc2VDb3VudCByZW1haW5zIHVuY2hhbmdlZC4gVGhpcyBhbGxvd3NcclxuICAgICAqIHVzIHRvIHR1cm4gYXV0aCAvIHN0cmVhbSBjYWxsYmFja3MgaW50byBuby1vcHMgaWYgdGhlIHN0cmVhbSBpcyBjbG9zZWQgL1xyXG4gICAgICogcmUtb3BlbmVkLCBldGMuXHJcbiAgICAgKi9cclxuICAgIFBlcnNpc3RlbnRTdHJlYW0ucHJvdG90eXBlLmdldENsb3NlR3VhcmRlZERpc3BhdGNoZXIgPSBmdW5jdGlvbiAoc3RhcnRDbG9zZUNvdW50KSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGZuKSB7XHJcbiAgICAgICAgICAgIF90aGlzLnF1ZXVlLmVucXVldWVBbmRGb3JnZXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKF90aGlzLmNsb3NlQ291bnQgPT09IHN0YXJ0Q2xvc2VDb3VudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmbigpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVidWcoTE9HX1RBRyQ1LCAnc3RyZWFtIGNhbGxiYWNrIHNraXBwZWQgYnkgZ2V0Q2xvc2VHdWFyZGVkRGlzcGF0Y2hlci4nKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFBlcnNpc3RlbnRTdHJlYW07XHJcbn0oKSk7XHJcbi8qKlxyXG4gKiBBIFBlcnNpc3RlbnRTdHJlYW0gdGhhdCBpbXBsZW1lbnRzIHRoZSBMaXN0ZW4gUlBDLlxyXG4gKlxyXG4gKiBPbmNlIHRoZSBMaXN0ZW4gc3RyZWFtIGhhcyBjYWxsZWQgdGhlIG9uT3BlbigpIGxpc3RlbmVyLCBhbnkgbnVtYmVyIG9mXHJcbiAqIGxpc3RlbigpIGFuZCB1bmxpc3RlbigpIGNhbGxzIGNhbiBiZSBtYWRlIHRvIGNvbnRyb2wgd2hhdCBjaGFuZ2VzIHdpbGwgYmVcclxuICogc2VudCBmcm9tIHRoZSBzZXJ2ZXIgZm9yIExpc3RlblJlc3BvbnNlcy5cclxuICovXHJcbnZhciBQZXJzaXN0ZW50TGlzdGVuU3RyZWFtID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgdHNsaWIuX19leHRlbmRzKFBlcnNpc3RlbnRMaXN0ZW5TdHJlYW0sIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBQZXJzaXN0ZW50TGlzdGVuU3RyZWFtKHF1ZXVlLCBjb25uZWN0aW9uLCBjcmVkZW50aWFscywgc2VyaWFsaXplciwgbGlzdGVuZXIpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBxdWV1ZSwgVGltZXJJZC5MaXN0ZW5TdHJlYW1Db25uZWN0aW9uQmFja29mZiwgVGltZXJJZC5MaXN0ZW5TdHJlYW1JZGxlLCBjb25uZWN0aW9uLCBjcmVkZW50aWFscywgbGlzdGVuZXIpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMuc2VyaWFsaXplciA9IHNlcmlhbGl6ZXI7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgUGVyc2lzdGVudExpc3RlblN0cmVhbS5wcm90b3R5cGUuc3RhcnRScGMgPSBmdW5jdGlvbiAodG9rZW4pIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jb25uZWN0aW9uLm9wZW5TdHJlYW0oJ0xpc3RlbicsIHRva2VuKTtcclxuICAgIH07XHJcbiAgICBQZXJzaXN0ZW50TGlzdGVuU3RyZWFtLnByb3RvdHlwZS5vbk1lc3NhZ2UgPSBmdW5jdGlvbiAod2F0Y2hDaGFuZ2VQcm90bykge1xyXG4gICAgICAgIC8vIEEgc3VjY2Vzc2Z1bCByZXNwb25zZSBtZWFucyB0aGUgc3RyZWFtIGlzIGhlYWx0aHlcclxuICAgICAgICB0aGlzLmJhY2tvZmYucmVzZXQoKTtcclxuICAgICAgICB2YXIgd2F0Y2hDaGFuZ2UgPSB0aGlzLnNlcmlhbGl6ZXIuZnJvbVdhdGNoQ2hhbmdlKHdhdGNoQ2hhbmdlUHJvdG8pO1xyXG4gICAgICAgIHZhciBzbmFwc2hvdCA9IHRoaXMuc2VyaWFsaXplci52ZXJzaW9uRnJvbUxpc3RlblJlc3BvbnNlKHdhdGNoQ2hhbmdlUHJvdG8pO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmxpc3RlbmVyLm9uV2F0Y2hDaGFuZ2Uod2F0Y2hDaGFuZ2UsIHNuYXBzaG90KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJlZ2lzdGVycyBpbnRlcmVzdCBpbiB0aGUgcmVzdWx0cyBvZiB0aGUgZ2l2ZW4gdGFyZ2V0LiBJZiB0aGUgdGFyZ2V0XHJcbiAgICAgKiBpbmNsdWRlcyBhIHJlc3VtZVRva2VuIGl0IHdpbGwgYmUgaW5jbHVkZWQgaW4gdGhlIHJlcXVlc3QuIFJlc3VsdHMgdGhhdFxyXG4gICAgICogYWZmZWN0IHRoZSB0YXJnZXQgd2lsbCBiZSBzdHJlYW1lZCBiYWNrIGFzIFdhdGNoQ2hhbmdlIG1lc3NhZ2VzIHRoYXRcclxuICAgICAqIHJlZmVyZW5jZSB0aGUgdGFyZ2V0SWQuXHJcbiAgICAgKi9cclxuICAgIFBlcnNpc3RlbnRMaXN0ZW5TdHJlYW0ucHJvdG90eXBlLndhdGNoID0gZnVuY3Rpb24gKHRhcmdldERhdGEpIHtcclxuICAgICAgICB2YXIgcmVxdWVzdCA9IHt9O1xyXG4gICAgICAgIHJlcXVlc3QuZGF0YWJhc2UgPSB0aGlzLnNlcmlhbGl6ZXIuZW5jb2RlZERhdGFiYXNlSWQ7XHJcbiAgICAgICAgcmVxdWVzdC5hZGRUYXJnZXQgPSB0aGlzLnNlcmlhbGl6ZXIudG9UYXJnZXQodGFyZ2V0RGF0YSk7XHJcbiAgICAgICAgdmFyIGxhYmVscyA9IHRoaXMuc2VyaWFsaXplci50b0xpc3RlblJlcXVlc3RMYWJlbHModGFyZ2V0RGF0YSk7XHJcbiAgICAgICAgaWYgKGxhYmVscykge1xyXG4gICAgICAgICAgICByZXF1ZXN0LmxhYmVscyA9IGxhYmVscztcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zZW5kUmVxdWVzdChyZXF1ZXN0KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFVucmVnaXN0ZXJzIGludGVyZXN0IGluIHRoZSByZXN1bHRzIG9mIHRoZSB0YXJnZXQgYXNzb2NpYXRlZCB3aXRoIHRoZVxyXG4gICAgICogZ2l2ZW4gdGFyZ2V0SWQuXHJcbiAgICAgKi9cclxuICAgIFBlcnNpc3RlbnRMaXN0ZW5TdHJlYW0ucHJvdG90eXBlLnVud2F0Y2ggPSBmdW5jdGlvbiAodGFyZ2V0SWQpIHtcclxuICAgICAgICB2YXIgcmVxdWVzdCA9IHt9O1xyXG4gICAgICAgIHJlcXVlc3QuZGF0YWJhc2UgPSB0aGlzLnNlcmlhbGl6ZXIuZW5jb2RlZERhdGFiYXNlSWQ7XHJcbiAgICAgICAgcmVxdWVzdC5yZW1vdmVUYXJnZXQgPSB0YXJnZXRJZDtcclxuICAgICAgICB0aGlzLnNlbmRSZXF1ZXN0KHJlcXVlc3QpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBQZXJzaXN0ZW50TGlzdGVuU3RyZWFtO1xyXG59KFBlcnNpc3RlbnRTdHJlYW0pKTtcclxuLyoqXHJcbiAqIEEgU3RyZWFtIHRoYXQgaW1wbGVtZW50cyB0aGUgV3JpdGUgUlBDLlxyXG4gKlxyXG4gKiBUaGUgV3JpdGUgUlBDIHJlcXVpcmVzIHRoZSBjYWxsZXIgdG8gbWFpbnRhaW4gc3BlY2lhbCBzdHJlYW1Ub2tlblxyXG4gKiBzdGF0ZSBpbiBiZXR3ZWVuIGNhbGxzLCB0byBoZWxwIHRoZSBzZXJ2ZXIgdW5kZXJzdGFuZCB3aGljaCByZXNwb25zZXMgdGhlXHJcbiAqIGNsaWVudCBoYXMgcHJvY2Vzc2VkIGJ5IHRoZSB0aW1lIHRoZSBuZXh0IHJlcXVlc3QgaXMgbWFkZS4gRXZlcnkgcmVzcG9uc2VcclxuICogd2lsbCBjb250YWluIGEgc3RyZWFtVG9rZW47IHRoaXMgdmFsdWUgbXVzdCBiZSBwYXNzZWQgdG8gdGhlIG5leHRcclxuICogcmVxdWVzdC5cclxuICpcclxuICogQWZ0ZXIgY2FsbGluZyBzdGFydCgpIG9uIHRoaXMgc3RyZWFtLCB0aGUgbmV4dCByZXF1ZXN0IG11c3QgYmUgYSBoYW5kc2hha2UsXHJcbiAqIGNvbnRhaW5pbmcgd2hhdGV2ZXIgc3RyZWFtVG9rZW4gaXMgb24gaGFuZC4gT25jZSBhIHJlc3BvbnNlIHRvIHRoaXNcclxuICogcmVxdWVzdCBpcyByZWNlaXZlZCwgYWxsIHBlbmRpbmcgbXV0YXRpb25zIG1heSBiZSBzdWJtaXR0ZWQuIFdoZW5cclxuICogc3VibWl0dGluZyBtdWx0aXBsZSBiYXRjaGVzIG9mIG11dGF0aW9ucyBhdCB0aGUgc2FtZSB0aW1lLCBpdCdzXHJcbiAqIG9rYXkgdG8gdXNlIHRoZSBzYW1lIHN0cmVhbVRva2VuIGZvciB0aGUgY2FsbHMgdG8gd3JpdGVNdXRhdGlvbnMuXHJcbiAqXHJcbiAqIFRPRE8oYi8zMzI3MTIzNSk6IFVzZSBwcm90byB0eXBlc1xyXG4gKi9cclxudmFyIFBlcnNpc3RlbnRXcml0ZVN0cmVhbSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIHRzbGliLl9fZXh0ZW5kcyhQZXJzaXN0ZW50V3JpdGVTdHJlYW0sIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBQZXJzaXN0ZW50V3JpdGVTdHJlYW0ocXVldWUsIGNvbm5lY3Rpb24sIGNyZWRlbnRpYWxzLCBzZXJpYWxpemVyLCBsaXN0ZW5lcikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHF1ZXVlLCBUaW1lcklkLldyaXRlU3RyZWFtQ29ubmVjdGlvbkJhY2tvZmYsIFRpbWVySWQuV3JpdGVTdHJlYW1JZGxlLCBjb25uZWN0aW9uLCBjcmVkZW50aWFscywgbGlzdGVuZXIpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMuc2VyaWFsaXplciA9IHNlcmlhbGl6ZXI7XHJcbiAgICAgICAgX3RoaXMuaGFuZHNoYWtlQ29tcGxldGVfID0gZmFsc2U7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVGhlIGxhc3QgcmVjZWl2ZWQgc3RyZWFtIHRva2VuIGZyb20gdGhlIHNlcnZlciwgdXNlZCB0byBhY2tub3dsZWRnZSB3aGljaFxyXG4gICAgICAgICAqIHJlc3BvbnNlcyB0aGUgY2xpZW50IGhhcyBwcm9jZXNzZWQuIFN0cmVhbSB0b2tlbnMgYXJlIG9wYXF1ZSBjaGVja3BvaW50XHJcbiAgICAgICAgICogbWFya2VycyB3aG9zZSBvbmx5IHJlYWwgdmFsdWUgaXMgdGhlaXIgaW5jbHVzaW9uIGluIHRoZSBuZXh0IHJlcXVlc3QuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBQZXJzaXN0ZW50V3JpdGVTdHJlYW0gbWFuYWdlcyBwcm9wYWdhdGluZyB0aGlzIHZhbHVlIGZyb20gcmVzcG9uc2VzIHRvIHRoZVxyXG4gICAgICAgICAqIG5leHQgcmVxdWVzdC5cclxuICAgICAgICAgKi9cclxuICAgICAgICBfdGhpcy5sYXN0U3RyZWFtVG9rZW4gPSBlbXB0eUJ5dGVTdHJpbmcoKTtcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoUGVyc2lzdGVudFdyaXRlU3RyZWFtLnByb3RvdHlwZSwgXCJoYW5kc2hha2VDb21wbGV0ZVwiLCB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVHJhY2tzIHdoZXRoZXIgb3Igbm90IGEgaGFuZHNoYWtlIGhhcyBiZWVuIHN1Y2Nlc3NmdWxseSBleGNoYW5nZWQgYW5kXHJcbiAgICAgICAgICogdGhlIHN0cmVhbSBpcyByZWFkeSB0byBhY2NlcHQgbXV0YXRpb25zLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5oYW5kc2hha2VDb21wbGV0ZV87XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICAvLyBPdmVycmlkZSBvZiBQZXJzaXN0ZW50U3RyZWFtLnN0YXJ0XHJcbiAgICBQZXJzaXN0ZW50V3JpdGVTdHJlYW0ucHJvdG90eXBlLnN0YXJ0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuaGFuZHNoYWtlQ29tcGxldGVfID0gZmFsc2U7XHJcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5zdGFydC5jYWxsKHRoaXMpO1xyXG4gICAgfTtcclxuICAgIFBlcnNpc3RlbnRXcml0ZVN0cmVhbS5wcm90b3R5cGUudGVhckRvd24gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaGFuZHNoYWtlQ29tcGxldGVfKSB7XHJcbiAgICAgICAgICAgIHRoaXMud3JpdGVNdXRhdGlvbnMoW10pO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBQZXJzaXN0ZW50V3JpdGVTdHJlYW0ucHJvdG90eXBlLnN0YXJ0UnBjID0gZnVuY3Rpb24gKHRva2VuKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY29ubmVjdGlvbi5vcGVuU3RyZWFtKCdXcml0ZScsIHRva2VuKTtcclxuICAgIH07XHJcbiAgICBQZXJzaXN0ZW50V3JpdGVTdHJlYW0ucHJvdG90eXBlLm9uTWVzc2FnZSA9IGZ1bmN0aW9uIChyZXNwb25zZVByb3RvKSB7XHJcbiAgICAgICAgLy8gQWx3YXlzIGNhcHR1cmUgdGhlIGxhc3Qgc3RyZWFtIHRva2VuLlxyXG4gICAgICAgIGFzc2VydCghIXJlc3BvbnNlUHJvdG8uc3RyZWFtVG9rZW4sICdHb3QgYSB3cml0ZSByZXNwb25zZSB3aXRob3V0IGEgc3RyZWFtIHRva2VuJyk7XHJcbiAgICAgICAgdGhpcy5sYXN0U3RyZWFtVG9rZW4gPSByZXNwb25zZVByb3RvLnN0cmVhbVRva2VuO1xyXG4gICAgICAgIGlmICghdGhpcy5oYW5kc2hha2VDb21wbGV0ZV8pIHtcclxuICAgICAgICAgICAgLy8gVGhlIGZpcnN0IHJlc3BvbnNlIGlzIGFsd2F5cyB0aGUgaGFuZHNoYWtlIHJlc3BvbnNlXHJcbiAgICAgICAgICAgIGFzc2VydCghcmVzcG9uc2VQcm90by53cml0ZVJlc3VsdHMgfHwgcmVzcG9uc2VQcm90by53cml0ZVJlc3VsdHMubGVuZ3RoID09PSAwLCAnR290IG11dGF0aW9uIHJlc3VsdHMgZm9yIGhhbmRzaGFrZScpO1xyXG4gICAgICAgICAgICB0aGlzLmhhbmRzaGFrZUNvbXBsZXRlXyA9IHRydWU7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmxpc3RlbmVyLm9uSGFuZHNoYWtlQ29tcGxldGUoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIEEgc3VjY2Vzc2Z1bCBmaXJzdCB3cml0ZSByZXNwb25zZSBtZWFucyB0aGUgc3RyZWFtIGlzIGhlYWx0aHksXHJcbiAgICAgICAgICAgIC8vIE5vdGUsIHRoYXQgd2UgY291bGQgY29uc2lkZXIgYSBzdWNjZXNzZnVsIGhhbmRzaGFrZSBoZWFsdGh5LCBob3dldmVyLFxyXG4gICAgICAgICAgICAvLyB0aGUgd3JpdGUgaXRzZWxmIG1pZ2h0IGJlIGNhdXNpbmcgYW4gZXJyb3Igd2Ugd2FudCB0byBiYWNrIG9mZiBmcm9tLlxyXG4gICAgICAgICAgICB0aGlzLmJhY2tvZmYucmVzZXQoKTtcclxuICAgICAgICAgICAgdmFyIHJlc3VsdHMgPSB0aGlzLnNlcmlhbGl6ZXIuZnJvbVdyaXRlUmVzdWx0cyhyZXNwb25zZVByb3RvLndyaXRlUmVzdWx0cywgcmVzcG9uc2VQcm90by5jb21taXRUaW1lKTtcclxuICAgICAgICAgICAgdmFyIGNvbW1pdFZlcnNpb24gPSB0aGlzLnNlcmlhbGl6ZXIuZnJvbVZlcnNpb24ocmVzcG9uc2VQcm90by5jb21taXRUaW1lKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubGlzdGVuZXIub25NdXRhdGlvblJlc3VsdChjb21taXRWZXJzaW9uLCByZXN1bHRzKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBTZW5kcyBhbiBpbml0aWFsIHN0cmVhbVRva2VuIHRvIHRoZSBzZXJ2ZXIsIHBlcmZvcm1pbmcgdGhlIGhhbmRzaGFrZVxyXG4gICAgICogcmVxdWlyZWQgdG8gbWFrZSB0aGUgU3RyZWFtaW5nV3JpdGUgUlBDIHdvcmsuIFN1YnNlcXVlbnRcclxuICAgICAqIGNhbGxzIHNob3VsZCB3YWl0IHVudGlsIG9uSGFuZHNoYWtlQ29tcGxldGUgd2FzIGNhbGxlZC5cclxuICAgICAqL1xyXG4gICAgUGVyc2lzdGVudFdyaXRlU3RyZWFtLnByb3RvdHlwZS53cml0ZUhhbmRzaGFrZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBhc3NlcnQodGhpcy5pc09wZW4oKSwgJ1dyaXRpbmcgaGFuZHNoYWtlIHJlcXVpcmVzIGFuIG9wZW5lZCBzdHJlYW0nKTtcclxuICAgICAgICBhc3NlcnQoIXRoaXMuaGFuZHNoYWtlQ29tcGxldGVfLCAnSGFuZHNoYWtlIGFscmVhZHkgY29tcGxldGVkJyk7XHJcbiAgICAgICAgLy8gVE9ETyhkaW1vbmQpOiBTdXBwb3J0IHN0cmVhbSByZXN1bXB0aW9uLiBXZSBpbnRlbnRpb25hbGx5IGRvIG5vdCBzZXQgdGhlXHJcbiAgICAgICAgLy8gc3RyZWFtIHRva2VuIG9uIHRoZSBoYW5kc2hha2UsIGlnbm9yaW5nIGFueSBzdHJlYW0gdG9rZW4gd2UgbWlnaHQgaGF2ZS5cclxuICAgICAgICB2YXIgcmVxdWVzdCA9IHt9O1xyXG4gICAgICAgIHJlcXVlc3QuZGF0YWJhc2UgPSB0aGlzLnNlcmlhbGl6ZXIuZW5jb2RlZERhdGFiYXNlSWQ7XHJcbiAgICAgICAgdGhpcy5zZW5kUmVxdWVzdChyZXF1ZXN0KTtcclxuICAgIH07XHJcbiAgICAvKiogU2VuZHMgYSBncm91cCBvZiBtdXRhdGlvbnMgdG8gdGhlIEZpcmVzdG9yZSBiYWNrZW5kIHRvIGFwcGx5LiAqL1xyXG4gICAgUGVyc2lzdGVudFdyaXRlU3RyZWFtLnByb3RvdHlwZS53cml0ZU11dGF0aW9ucyA9IGZ1bmN0aW9uIChtdXRhdGlvbnMpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIGFzc2VydCh0aGlzLmlzT3BlbigpLCAnV3JpdGluZyBtdXRhdGlvbnMgcmVxdWlyZXMgYW4gb3BlbmVkIHN0cmVhbScpO1xyXG4gICAgICAgIGFzc2VydCh0aGlzLmhhbmRzaGFrZUNvbXBsZXRlXywgJ0hhbmRzaGFrZSBtdXN0IGJlIGNvbXBsZXRlIGJlZm9yZSB3cml0aW5nIG11dGF0aW9ucycpO1xyXG4gICAgICAgIGFzc2VydCh0aGlzLmxhc3RTdHJlYW1Ub2tlbi5sZW5ndGggPiAwLCAnVHJ5aW5nIHRvIHdyaXRlIG11dGF0aW9uIHdpdGhvdXQgYSB0b2tlbicpO1xyXG4gICAgICAgIHZhciByZXF1ZXN0ID0ge1xyXG4gICAgICAgICAgICAvLyBQcm90b3MgYXJlIHR5cGVkIHdpdGggc3RyaW5nLCBidXQgd2Ugc3VwcG9ydCBVSW50OEFycmF5IG9uIE5vZGVcclxuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuICAgICAgICAgICAgc3RyZWFtVG9rZW46IHRoaXMubGFzdFN0cmVhbVRva2VuLFxyXG4gICAgICAgICAgICB3cml0ZXM6IG11dGF0aW9ucy5tYXAoZnVuY3Rpb24gKG11dGF0aW9uKSB7IHJldHVybiBfdGhpcy5zZXJpYWxpemVyLnRvTXV0YXRpb24obXV0YXRpb24pOyB9KVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5zZW5kUmVxdWVzdChyZXF1ZXN0KTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gUGVyc2lzdGVudFdyaXRlU3RyZWFtO1xyXG59KFBlcnNpc3RlbnRTdHJlYW0pKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBEYXRhc3RvcmUgaXMgYSB3cmFwcGVyIGFyb3VuZCB0aGUgZXh0ZXJuYWwgR29vZ2xlIENsb3VkIERhdGFzdG9yZSBncnBjIEFQSSxcclxuICogd2hpY2ggcHJvdmlkZXMgYW4gaW50ZXJmYWNlIHRoYXQgaXMgbW9yZSBjb252ZW5pZW50IGZvciB0aGUgcmVzdCBvZiB0aGVcclxuICogY2xpZW50IFNESyBhcmNoaXRlY3R1cmUgdG8gY29uc3VtZS5cclxuICovXHJcbnZhciBEYXRhc3RvcmUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBEYXRhc3RvcmUocXVldWUsIGNvbm5lY3Rpb24sIGNyZWRlbnRpYWxzLCBzZXJpYWxpemVyKSB7XHJcbiAgICAgICAgdGhpcy5xdWV1ZSA9IHF1ZXVlO1xyXG4gICAgICAgIHRoaXMuY29ubmVjdGlvbiA9IGNvbm5lY3Rpb247XHJcbiAgICAgICAgdGhpcy5jcmVkZW50aWFscyA9IGNyZWRlbnRpYWxzO1xyXG4gICAgICAgIHRoaXMuc2VyaWFsaXplciA9IHNlcmlhbGl6ZXI7XHJcbiAgICB9XHJcbiAgICBEYXRhc3RvcmUucHJvdG90eXBlLm5ld1BlcnNpc3RlbnRXcml0ZVN0cmVhbSA9IGZ1bmN0aW9uIChsaXN0ZW5lcikge1xyXG4gICAgICAgIHJldHVybiBuZXcgUGVyc2lzdGVudFdyaXRlU3RyZWFtKHRoaXMucXVldWUsIHRoaXMuY29ubmVjdGlvbiwgdGhpcy5jcmVkZW50aWFscywgdGhpcy5zZXJpYWxpemVyLCBsaXN0ZW5lcik7XHJcbiAgICB9O1xyXG4gICAgRGF0YXN0b3JlLnByb3RvdHlwZS5uZXdQZXJzaXN0ZW50V2F0Y2hTdHJlYW0gPSBmdW5jdGlvbiAobGlzdGVuZXIpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFBlcnNpc3RlbnRMaXN0ZW5TdHJlYW0odGhpcy5xdWV1ZSwgdGhpcy5jb25uZWN0aW9uLCB0aGlzLmNyZWRlbnRpYWxzLCB0aGlzLnNlcmlhbGl6ZXIsIGxpc3RlbmVyKTtcclxuICAgIH07XHJcbiAgICBEYXRhc3RvcmUucHJvdG90eXBlLmNvbW1pdCA9IGZ1bmN0aW9uIChtdXRhdGlvbnMpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhciBwYXJhbXMgPSB7XHJcbiAgICAgICAgICAgIGRhdGFiYXNlOiB0aGlzLnNlcmlhbGl6ZXIuZW5jb2RlZERhdGFiYXNlSWQsXHJcbiAgICAgICAgICAgIHdyaXRlczogbXV0YXRpb25zLm1hcChmdW5jdGlvbiAobSkgeyByZXR1cm4gX3RoaXMuc2VyaWFsaXplci50b011dGF0aW9uKG0pOyB9KVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaW52b2tlUlBDKCdDb21taXQnLCBwYXJhbXMpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5zZXJpYWxpemVyLmZyb21Xcml0ZVJlc3VsdHMocmVzcG9uc2Uud3JpdGVSZXN1bHRzLCByZXNwb25zZS5jb21taXRUaW1lKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBEYXRhc3RvcmUucHJvdG90eXBlLmxvb2t1cCA9IGZ1bmN0aW9uIChrZXlzKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgcGFyYW1zID0ge1xyXG4gICAgICAgICAgICBkYXRhYmFzZTogdGhpcy5zZXJpYWxpemVyLmVuY29kZWREYXRhYmFzZUlkLFxyXG4gICAgICAgICAgICBkb2N1bWVudHM6IGtleXMubWFwKGZ1bmN0aW9uIChrKSB7IHJldHVybiBfdGhpcy5zZXJpYWxpemVyLnRvTmFtZShrKTsgfSlcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiB0aGlzLmludm9rZVN0cmVhbWluZ1JQQygnQmF0Y2hHZXREb2N1bWVudHMnLCBwYXJhbXMpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgIHZhciBkb2NzID0gbWF5YmVEb2N1bWVudE1hcCgpO1xyXG4gICAgICAgICAgICByZXNwb25zZS5mb3JFYWNoKGZ1bmN0aW9uIChwcm90bykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGRvYyA9IF90aGlzLnNlcmlhbGl6ZXIuZnJvbU1heWJlRG9jdW1lbnQocHJvdG8pO1xyXG4gICAgICAgICAgICAgICAgZG9jcyA9IGRvY3MuaW5zZXJ0KGRvYy5rZXksIGRvYyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gW107XHJcbiAgICAgICAgICAgIGtleXMuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZG9jID0gZG9jcy5nZXQoa2V5KTtcclxuICAgICAgICAgICAgICAgIGFzc2VydCghIWRvYywgJ01pc3NpbmcgZW50aXR5IGluIHdyaXRlIHJlc3BvbnNlIGZvciAnICsga2V5KTtcclxuICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKGRvYyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKiBHZXRzIGFuIGF1dGggdG9rZW4gYW5kIGludm9rZXMgdGhlIHByb3ZpZGVkIFJQQy4gKi9cclxuICAgIERhdGFzdG9yZS5wcm90b3R5cGUuaW52b2tlUlBDID0gZnVuY3Rpb24gKHJwY05hbWUsIHJlcXVlc3QpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNyZWRlbnRpYWxzXHJcbiAgICAgICAgICAgIC5nZXRUb2tlbigpXHJcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICh0b2tlbikge1xyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXMuY29ubmVjdGlvbi5pbnZva2VSUEMocnBjTmFtZSwgcmVxdWVzdCwgdG9rZW4pO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgaWYgKGVycm9yLmNvZGUgPT09IENvZGUuVU5BVVRIRU5USUNBVEVEKSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5jcmVkZW50aWFscy5pbnZhbGlkYXRlVG9rZW4oKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKiogR2V0cyBhbiBhdXRoIHRva2VuIGFuZCBpbnZva2VzIHRoZSBwcm92aWRlZCBSUEMgd2l0aCBzdHJlYW1lZCByZXN1bHRzLiAqL1xyXG4gICAgRGF0YXN0b3JlLnByb3RvdHlwZS5pbnZva2VTdHJlYW1pbmdSUEMgPSBmdW5jdGlvbiAocnBjTmFtZSwgcmVxdWVzdCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY3JlZGVudGlhbHNcclxuICAgICAgICAgICAgLmdldFRva2VuKClcclxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHRva2VuKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5jb25uZWN0aW9uLmludm9rZVN0cmVhbWluZ1JQQyhycGNOYW1lLCByZXF1ZXN0LCB0b2tlbik7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgICAgICBpZiAoZXJyb3IuY29kZSA9PT0gQ29kZS5VTkFVVEhFTlRJQ0FURUQpIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLmNyZWRlbnRpYWxzLmludmFsaWRhdGVUb2tlbigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRocm93IGVycm9yO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBEYXRhc3RvcmU7XHJcbn0oKSk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogSW50ZXJuYWwgdHJhbnNhY3Rpb24gb2JqZWN0IHJlc3BvbnNpYmxlIGZvciBhY2N1bXVsYXRpbmcgdGhlIG11dGF0aW9ucyB0b1xyXG4gKiBwZXJmb3JtIGFuZCB0aGUgYmFzZSB2ZXJzaW9ucyBmb3IgYW55IGRvY3VtZW50cyByZWFkLlxyXG4gKi9cclxudmFyIFRyYW5zYWN0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gVHJhbnNhY3Rpb24oZGF0YXN0b3JlKSB7XHJcbiAgICAgICAgdGhpcy5kYXRhc3RvcmUgPSBkYXRhc3RvcmU7XHJcbiAgICAgICAgLy8gVGhlIHZlcnNpb24gb2YgZWFjaCBkb2N1bWVudCB0aGF0IHdhcyByZWFkIGR1cmluZyB0aGlzIHRyYW5zYWN0aW9uLlxyXG4gICAgICAgIHRoaXMucmVhZFZlcnNpb25zID0gZG9jdW1lbnRWZXJzaW9uTWFwKCk7XHJcbiAgICAgICAgdGhpcy5tdXRhdGlvbnMgPSBbXTtcclxuICAgICAgICB0aGlzLmNvbW1pdHRlZCA9IGZhbHNlO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEEgZGVmZXJyZWQgdXNhZ2UgZXJyb3IgdGhhdCBvY2N1cnJlZCBwcmV2aW91c2x5IGluIHRoaXMgdHJhbnNhY3Rpb24gdGhhdFxyXG4gICAgICAgICAqIHdpbGwgY2F1c2UgdGhlIHRyYW5zYWN0aW9uIHRvIGZhaWwgb25jZSBpdCBhY3R1YWxseSBjb21taXRzLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMubGFzdFdyaXRlRXJyb3IgPSBudWxsO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFNldCBvZiBkb2N1bWVudHMgdGhhdCBoYXZlIGJlZW4gd3JpdHRlbiBpbiB0aGUgdHJhbnNhY3Rpb24uXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBXaGVuIHRoZXJlJ3MgbW9yZSB0aGFuIG9uZSB3cml0ZSB0byB0aGUgc2FtZSBrZXkgaW4gYSB0cmFuc2FjdGlvbiwgYW55XHJcbiAgICAgICAgICogd3JpdGVzIGFmdGVyIGh0ZSBmaXJzdCBhcmUgaGFuZGxlZCBkaWZmZXJlbnRseS5cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLndyaXR0ZW5Eb2NzID0gbmV3IFNldCgpO1xyXG4gICAgfVxyXG4gICAgVHJhbnNhY3Rpb24ucHJvdG90eXBlLmxvb2t1cCA9IGZ1bmN0aW9uIChrZXlzKSB7XHJcbiAgICAgICAgcmV0dXJuIHRzbGliLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgZG9jcztcclxuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbnN1cmVDb21taXROb3RDYWxsZWQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMubXV0YXRpb25zLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLklOVkFMSURfQVJHVU1FTlQsICdGaXJlc3RvcmUgdHJhbnNhY3Rpb25zIHJlcXVpcmUgYWxsIHJlYWRzIHRvIGJlIGV4ZWN1dGVkIGJlZm9yZSBhbGwgd3JpdGVzLicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuZGF0YXN0b3JlLmxvb2t1cChrZXlzKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkb2NzID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkb2NzLmZvckVhY2goZnVuY3Rpb24gKGRvYykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRvYyBpbnN0YW5jZW9mIE5vRG9jdW1lbnQgfHwgZG9jIGluc3RhbmNlb2YgRG9jdW1lbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5yZWNvcmRWZXJzaW9uKGRvYyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmYWlsKCdEb2N1bWVudCBpbiBhIHRyYW5zYWN0aW9uIHdhcyBhICcgKyBkb2MuY29uc3RydWN0b3IubmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgZG9jc107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIFRyYW5zYWN0aW9uLnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAoa2V5LCBkYXRhKSB7XHJcbiAgICAgICAgdGhpcy53cml0ZShkYXRhLnRvTXV0YXRpb25zKGtleSwgdGhpcy5wcmVjb25kaXRpb24oa2V5KSkpO1xyXG4gICAgICAgIHRoaXMud3JpdHRlbkRvY3MuYWRkKGtleSk7XHJcbiAgICB9O1xyXG4gICAgVHJhbnNhY3Rpb24ucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uIChrZXksIGRhdGEpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICB0aGlzLndyaXRlKGRhdGEudG9NdXRhdGlvbnMoa2V5LCB0aGlzLnByZWNvbmRpdGlvbkZvclVwZGF0ZShrZXkpKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIHRoaXMubGFzdFdyaXRlRXJyb3IgPSBlO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLndyaXR0ZW5Eb2NzLmFkZChrZXkpO1xyXG4gICAgfTtcclxuICAgIFRyYW5zYWN0aW9uLnByb3RvdHlwZS5kZWxldGUgPSBmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgICAgdGhpcy53cml0ZShbbmV3IERlbGV0ZU11dGF0aW9uKGtleSwgdGhpcy5wcmVjb25kaXRpb24oa2V5KSldKTtcclxuICAgICAgICB0aGlzLndyaXR0ZW5Eb2NzLmFkZChrZXkpO1xyXG4gICAgfTtcclxuICAgIFRyYW5zYWN0aW9uLnByb3RvdHlwZS5jb21taXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRzbGliLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgdW53cml0dGVuO1xyXG4gICAgICAgICAgICByZXR1cm4gdHNsaWIuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVuc3VyZUNvbW1pdE5vdENhbGxlZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5sYXN0V3JpdGVFcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgdGhpcy5sYXN0V3JpdGVFcnJvcjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB1bndyaXR0ZW4gPSB0aGlzLnJlYWRWZXJzaW9ucztcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRm9yIGVhY2ggbXV0YXRpb24sIG5vdGUgdGhhdCB0aGUgZG9jIHdhcyB3cml0dGVuLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm11dGF0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uIChtdXRhdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdW53cml0dGVuID0gdW53cml0dGVuLnJlbW92ZShtdXRhdGlvbi5rZXkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF1bndyaXR0ZW4uaXNFbXB0eSgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5JTlZBTElEX0FSR1VNRU5ULCAnRXZlcnkgZG9jdW1lbnQgcmVhZCBpbiBhIHRyYW5zYWN0aW9uIG11c3QgYWxzbyBiZSB3cml0dGVuLicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuZGF0YXN0b3JlLmNvbW1pdCh0aGlzLm11dGF0aW9ucyldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbW1pdHRlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgVHJhbnNhY3Rpb24ucHJvdG90eXBlLnJlY29yZFZlcnNpb24gPSBmdW5jdGlvbiAoZG9jKSB7XHJcbiAgICAgICAgdmFyIGRvY1ZlcnNpb247XHJcbiAgICAgICAgaWYgKGRvYyBpbnN0YW5jZW9mIERvY3VtZW50KSB7XHJcbiAgICAgICAgICAgIGRvY1ZlcnNpb24gPSBkb2MudmVyc2lvbjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoZG9jIGluc3RhbmNlb2YgTm9Eb2N1bWVudCkge1xyXG4gICAgICAgICAgICAvLyBGb3IgZGVsZXRlZCBkb2NzLCB3ZSBtdXN0IHVzZSBiYXNlVmVyc2lvbiAwIHdoZW4gd2Ugb3ZlcndyaXRlIHRoZW0uXHJcbiAgICAgICAgICAgIGRvY1ZlcnNpb24gPSBTbmFwc2hvdFZlcnNpb24uZm9yRGVsZXRlZERvYygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhyb3cgZmFpbCgnRG9jdW1lbnQgaW4gYSB0cmFuc2FjdGlvbiB3YXMgYSAnICsgZG9jLmNvbnN0cnVjdG9yLm5hbWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgZXhpc3RpbmdWZXJzaW9uID0gdGhpcy5yZWFkVmVyc2lvbnMuZ2V0KGRvYy5rZXkpO1xyXG4gICAgICAgIGlmIChleGlzdGluZ1ZlcnNpb24gIT09IG51bGwpIHtcclxuICAgICAgICAgICAgaWYgKCFkb2NWZXJzaW9uLmlzRXF1YWwoZXhpc3RpbmdWZXJzaW9uKSkge1xyXG4gICAgICAgICAgICAgICAgLy8gVGhpcyB0cmFuc2FjdGlvbiB3aWxsIGZhaWwgbm8gbWF0dGVyIHdoYXQuXHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5BQk9SVEVELCAnRG9jdW1lbnQgdmVyc2lvbiBjaGFuZ2VkIGJldHdlZW4gdHdvIHJlYWRzLicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnJlYWRWZXJzaW9ucyA9IHRoaXMucmVhZFZlcnNpb25zLmluc2VydChkb2Mua2V5LCBkb2NWZXJzaW9uKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSB2ZXJzaW9uIG9mIHRoaXMgZG9jdW1lbnQgd2hlbiBpdCB3YXMgcmVhZCBpbiB0aGlzIHRyYW5zYWN0aW9uLFxyXG4gICAgICogYXMgYSBwcmVjb25kaXRpb24sIG9yIG5vIHByZWNvbmRpdGlvbiBpZiBpdCB3YXMgbm90IHJlYWQuXHJcbiAgICAgKi9cclxuICAgIFRyYW5zYWN0aW9uLnByb3RvdHlwZS5wcmVjb25kaXRpb24gPSBmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgICAgdmFyIHZlcnNpb24gPSB0aGlzLnJlYWRWZXJzaW9ucy5nZXQoa2V5KTtcclxuICAgICAgICBpZiAoIXRoaXMud3JpdHRlbkRvY3MuaGFzKGtleSkgJiYgdmVyc2lvbikge1xyXG4gICAgICAgICAgICByZXR1cm4gUHJlY29uZGl0aW9uLnVwZGF0ZVRpbWUodmVyc2lvbik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gUHJlY29uZGl0aW9uLk5PTkU7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0aGUgcHJlY29uZGl0aW9uIGZvciBhIGRvY3VtZW50IGlmIHRoZSBvcGVyYXRpb24gaXMgYW4gdXBkYXRlLlxyXG4gICAgICovXHJcbiAgICBUcmFuc2FjdGlvbi5wcm90b3R5cGUucHJlY29uZGl0aW9uRm9yVXBkYXRlID0gZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgIHZhciB2ZXJzaW9uID0gdGhpcy5yZWFkVmVyc2lvbnMuZ2V0KGtleSk7XHJcbiAgICAgICAgLy8gVGhlIGZpcnN0IHRpbWUgYSBkb2N1bWVudCBpcyB3cml0dGVuLCB3ZSB3YW50IHRvIHRha2UgaW50byBhY2NvdW50IHRoZVxyXG4gICAgICAgIC8vIHJlYWQgdGltZSBhbmQgZXhpc3RlbmNlXHJcbiAgICAgICAgaWYgKCF0aGlzLndyaXR0ZW5Eb2NzLmhhcyhrZXkpICYmIHZlcnNpb24pIHtcclxuICAgICAgICAgICAgaWYgKHZlcnNpb24uaXNFcXVhbChTbmFwc2hvdFZlcnNpb24uZm9yRGVsZXRlZERvYygpKSkge1xyXG4gICAgICAgICAgICAgICAgLy8gVGhlIGRvY3VtZW50IGRvZXNuJ3QgZXhpc3QsIHNvIGZhaWwgdGhlIHRyYW5zYWN0aW9uLlxyXG4gICAgICAgICAgICAgICAgLy8gVGhpcyBoYXMgdG8gYmUgdmFsaWRhdGVkIGxvY2FsbHkgYmVjYXVzZSB5b3UgY2FuJ3Qgc2VuZCBhXHJcbiAgICAgICAgICAgICAgICAvLyBwcmVjb25kaXRpb24gdGhhdCBhIGRvY3VtZW50IGRvZXMgbm90IGV4aXN0IHdpdGhvdXQgY2hhbmdpbmcgdGhlXHJcbiAgICAgICAgICAgICAgICAvLyBzZW1hbnRpY3Mgb2YgdGhlIGJhY2tlbmQgd3JpdGUgdG8gYmUgYW4gaW5zZXJ0LiBUaGlzIGlzIHRoZSByZXZlcnNlXHJcbiAgICAgICAgICAgICAgICAvLyBvZiB3aGF0IHdlIHdhbnQsIHNpbmNlIHdlIHdhbnQgdG8gYXNzZXJ0IHRoYXQgdGhlIGRvY3VtZW50IGRvZXNuJ3RcclxuICAgICAgICAgICAgICAgIC8vIGV4aXN0IGJ1dCB0aGVuIHNlbmQgdGhlIHVwZGF0ZSBhbmQgaGF2ZSBpdCBmYWlsLiBTaW5jZSB3ZSBjYW4ndFxyXG4gICAgICAgICAgICAgICAgLy8gZXhwcmVzcyB0aGF0IHRvIHRoZSBiYWNrZW5kLCB3ZSBoYXZlIHRvIHZhbGlkYXRlIGxvY2FsbHkuXHJcbiAgICAgICAgICAgICAgICAvLyBOb3RlOiB0aGlzIGNhbiBjaGFuZ2Ugb25jZSB3ZSBjYW4gc2VuZCBzZXBhcmF0ZSB2ZXJpZnkgd3JpdGVzIGluIHRoZVxyXG4gICAgICAgICAgICAgICAgLy8gdHJhbnNhY3Rpb24uXHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5JTlZBTElEX0FSR1VNRU5ULCBcIkNhbid0IHVwZGF0ZSBhIGRvY3VtZW50IHRoYXQgZG9lc24ndCBleGlzdC5cIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gRG9jdW1lbnQgZXhpc3RzLCBiYXNlIHByZWNvbmRpdGlvbiBvbiBkb2N1bWVudCB1cGRhdGUgdGltZS5cclxuICAgICAgICAgICAgcmV0dXJuIFByZWNvbmRpdGlvbi51cGRhdGVUaW1lKHZlcnNpb24pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gRG9jdW1lbnQgd2FzIG5vdCByZWFkLCBzbyB3ZSBqdXN0IHVzZSB0aGUgcHJlY29uZGl0aW9ucyBmb3IgYSBibGluZFxyXG4gICAgICAgICAgICAvLyB1cGRhdGUuXHJcbiAgICAgICAgICAgIHJldHVybiBQcmVjb25kaXRpb24uZXhpc3RzKHRydWUpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBUcmFuc2FjdGlvbi5wcm90b3R5cGUud3JpdGUgPSBmdW5jdGlvbiAobXV0YXRpb25zKSB7XHJcbiAgICAgICAgdGhpcy5lbnN1cmVDb21taXROb3RDYWxsZWQoKTtcclxuICAgICAgICB0aGlzLm11dGF0aW9ucyA9IHRoaXMubXV0YXRpb25zLmNvbmNhdChtdXRhdGlvbnMpO1xyXG4gICAgfTtcclxuICAgIFRyYW5zYWN0aW9uLnByb3RvdHlwZS5lbnN1cmVDb21taXROb3RDYWxsZWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgYXNzZXJ0KCF0aGlzLmNvbW1pdHRlZCwgJ0EgdHJhbnNhY3Rpb24gb2JqZWN0IGNhbm5vdCBiZSB1c2VkIGFmdGVyIGl0cyB1cGRhdGUgY2FsbGJhY2sgaGFzIGJlZW4gaW52b2tlZC4nKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gVHJhbnNhY3Rpb247XHJcbn0oKSk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogRGVzY3JpYmVzIHRoZSBvbmxpbmUgc3RhdGUgb2YgdGhlIEZpcmVzdG9yZSBjbGllbnQuIE5vdGUgdGhhdCB0aGlzIGRvZXMgbm90XHJcbiAqIGluZGljYXRlIHdoZXRoZXIgb3Igbm90IHRoZSByZW1vdGUgc3RvcmUgaXMgdHJ5aW5nIHRvIGNvbm5lY3Qgb3Igbm90LiBUaGlzIGlzXHJcbiAqIHByaW1hcmlseSB1c2VkIGJ5IHRoZSBWaWV3IC8gRXZlbnRNYW5hZ2VyIGNvZGUgdG8gY2hhbmdlIHRoZWlyIGJlaGF2aW9yIHdoaWxlXHJcbiAqIG9mZmxpbmUgKGUuZy4gZ2V0KCkgY2FsbHMgc2hvdWxkbid0IHdhaXQgZm9yIGRhdGEgZnJvbSB0aGUgc2VydmVyIGFuZFxyXG4gKiBzbmFwc2hvdCBldmVudHMgc2hvdWxkIHNldCBtZXRhZGF0YS5pc0Zyb21DYWNoZT10cnVlKS5cclxuICovXHJcbnZhciBPbmxpbmVTdGF0ZTtcclxuKGZ1bmN0aW9uIChPbmxpbmVTdGF0ZSkge1xyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgRmlyZXN0b3JlIGNsaWVudCBpcyBpbiBhbiB1bmtub3duIG9ubGluZSBzdGF0ZS4gVGhpcyBtZWFucyB0aGUgY2xpZW50XHJcbiAgICAgKiBpcyBlaXRoZXIgbm90IGFjdGl2ZWx5IHRyeWluZyB0byBlc3RhYmxpc2ggYSBjb25uZWN0aW9uIG9yIGl0IGlzIGN1cnJlbnRseVxyXG4gICAgICogdHJ5aW5nIHRvIGVzdGFibGlzaCBhIGNvbm5lY3Rpb24sIGJ1dCBpdCBoYXMgbm90IHN1Y2NlZWRlZCBvciBmYWlsZWQgeWV0LlxyXG4gICAgICogSGlnaGVyLWxldmVsIGNvbXBvbmVudHMgc2hvdWxkIG5vdCBvcGVyYXRlIGluIG9mZmxpbmUgbW9kZS5cclxuICAgICAqL1xyXG4gICAgT25saW5lU3RhdGVbT25saW5lU3RhdGVbXCJVbmtub3duXCJdID0gMF0gPSBcIlVua25vd25cIjtcclxuICAgIC8qKlxyXG4gICAgICogVGhlIGNsaWVudCBpcyBjb25uZWN0ZWQgYW5kIHRoZSBjb25uZWN0aW9ucyBhcmUgaGVhbHRoeS4gVGhpcyBzdGF0ZSBpc1xyXG4gICAgICogcmVhY2hlZCBhZnRlciBhIHN1Y2Nlc3NmdWwgY29ubmVjdGlvbiBhbmQgdGhlcmUgaGFzIGJlZW4gYXQgbGVhc3Qgb25lXHJcbiAgICAgKiBzdWNjZXNzZnVsIG1lc3NhZ2UgcmVjZWl2ZWQgZnJvbSB0aGUgYmFja2VuZHMuXHJcbiAgICAgKi9cclxuICAgIE9ubGluZVN0YXRlW09ubGluZVN0YXRlW1wiT25saW5lXCJdID0gMV0gPSBcIk9ubGluZVwiO1xyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgY2xpZW50IGlzIGVpdGhlciB0cnlpbmcgdG8gZXN0YWJsaXNoIGEgY29ubmVjdGlvbiBidXQgZmFpbGluZywgb3IgaXRcclxuICAgICAqIGhhcyBiZWVuIGV4cGxpY2l0bHkgbWFya2VkIG9mZmxpbmUgdmlhIGEgY2FsbCB0byBkaXNhYmxlTmV0d29yaygpLlxyXG4gICAgICogSGlnaGVyLWxldmVsIGNvbXBvbmVudHMgc2hvdWxkIG9wZXJhdGUgaW4gb2ZmbGluZSBtb2RlLlxyXG4gICAgICovXHJcbiAgICBPbmxpbmVTdGF0ZVtPbmxpbmVTdGF0ZVtcIk9mZmxpbmVcIl0gPSAyXSA9IFwiT2ZmbGluZVwiO1xyXG59KShPbmxpbmVTdGF0ZSB8fCAoT25saW5lU3RhdGUgPSB7fSkpO1xyXG4vKiogVGhlIHNvdXJjZSBvZiBhbiBvbmxpbmUgc3RhdGUgZXZlbnQuICovXHJcbnZhciBPbmxpbmVTdGF0ZVNvdXJjZTtcclxuKGZ1bmN0aW9uIChPbmxpbmVTdGF0ZVNvdXJjZSkge1xyXG4gICAgT25saW5lU3RhdGVTb3VyY2VbT25saW5lU3RhdGVTb3VyY2VbXCJSZW1vdGVTdG9yZVwiXSA9IDBdID0gXCJSZW1vdGVTdG9yZVwiO1xyXG4gICAgT25saW5lU3RhdGVTb3VyY2VbT25saW5lU3RhdGVTb3VyY2VbXCJTaGFyZWRDbGllbnRTdGF0ZVwiXSA9IDFdID0gXCJTaGFyZWRDbGllbnRTdGF0ZVwiO1xyXG59KShPbmxpbmVTdGF0ZVNvdXJjZSB8fCAoT25saW5lU3RhdGVTb3VyY2UgPSB7fSkpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxudmFyIExPR19UQUckNiA9ICdPbmxpbmVTdGF0ZVRyYWNrZXInO1xyXG4vLyBUbyBkZWFsIHdpdGggdHJhbnNpZW50IGZhaWx1cmVzLCB3ZSBhbGxvdyBtdWx0aXBsZSBzdHJlYW0gYXR0ZW1wdHMgYmVmb3JlXHJcbi8vIGdpdmluZyB1cCBhbmQgdHJhbnNpdGlvbmluZyBmcm9tIE9ubGluZVN0YXRlLlVua25vd24gdG8gT2ZmbGluZS5cclxuLy8gVE9ETyhtaWtlbGVoZW4pOiBUaGlzIHVzZWQgdG8gYmUgc2V0IHRvIDIgYXMgYSBtaXRpZ2F0aW9uIGZvciBiLzY2MjI4Mzk0LlxyXG4vLyBAamRpbW9uZCB0aGlua3MgdGhhdCBidWcgaXMgc3VmZmljaWVudGx5IGZpeGVkIHNvIHRoYXQgd2UgY2FuIHNldCB0aGlzIGJhY2tcclxuLy8gdG8gMS4gSWYgdGhhdCB3b3JrcyBva2F5LCB3ZSBjb3VsZCBwb3RlbnRpYWxseSByZW1vdmUgdGhpcyBsb2dpYyBlbnRpcmVseS5cclxudmFyIE1BWF9XQVRDSF9TVFJFQU1fRkFJTFVSRVMgPSAxO1xyXG4vLyBUbyBkZWFsIHdpdGggc3RyZWFtIGF0dGVtcHRzIHRoYXQgZG9uJ3Qgc3VjY2VlZCBvciBmYWlsIGluIGEgdGltZWx5IG1hbm5lcixcclxuLy8gd2UgaGF2ZSBhIHRpbWVvdXQgZm9yIE9ubGluZVN0YXRlIHRvIHJlYWNoIE9ubGluZSBvciBPZmZsaW5lLlxyXG4vLyBJZiB0aGUgdGltZW91dCBpcyByZWFjaGVkLCB3ZSB0cmFuc2l0aW9uIHRvIE9mZmxpbmUgcmF0aGVyIHRoYW4gd2FpdGluZ1xyXG4vLyBpbmRlZmluaXRlbHkuXHJcbnZhciBPTkxJTkVfU1RBVEVfVElNRU9VVF9NUyA9IDEwICogMTAwMDtcclxuLyoqXHJcbiAqIEEgY29tcG9uZW50IHVzZWQgYnkgdGhlIFJlbW90ZVN0b3JlIHRvIHRyYWNrIHRoZSBPbmxpbmVTdGF0ZSAodGhhdCBpcyxcclxuICogd2hldGhlciBvciBub3QgdGhlIGNsaWVudCBhcyBhIHdob2xlIHNob3VsZCBiZSBjb25zaWRlcmVkIHRvIGJlIG9ubGluZSBvclxyXG4gKiBvZmZsaW5lKSwgaW1wbGVtZW50aW5nIHRoZSBhcHByb3ByaWF0ZSBoZXVyaXN0aWNzLlxyXG4gKlxyXG4gKiBJbiBwYXJ0aWN1bGFyLCB3aGVuIHRoZSBjbGllbnQgaXMgdHJ5aW5nIHRvIGNvbm5lY3QgdG8gdGhlIGJhY2tlbmQsIHdlXHJcbiAqIGFsbG93IHVwIHRvIE1BWF9XQVRDSF9TVFJFQU1fRkFJTFVSRVMgd2l0aGluIE9OTElORV9TVEFURV9USU1FT1VUX01TIGZvclxyXG4gKiBhIGNvbm5lY3Rpb24gdG8gc3VjY2VlZC4gSWYgd2UgaGF2ZSB0b28gbWFueSBmYWlsdXJlcyBvciB0aGUgdGltZW91dCBlbGFwc2VzLFxyXG4gKiB0aGVuIHdlIHNldCB0aGUgT25saW5lU3RhdGUgdG8gT2ZmbGluZSwgYW5kIHRoZSBjbGllbnQgd2lsbCBiZWhhdmUgYXMgaWZcclxuICogaXQgaXMgb2ZmbGluZSAoZ2V0KClzIHdpbGwgcmV0dXJuIGNhY2hlZCBkYXRhLCBldGMuKS5cclxuICovXHJcbnZhciBPbmxpbmVTdGF0ZVRyYWNrZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBPbmxpbmVTdGF0ZVRyYWNrZXIoYXN5bmNRdWV1ZSwgb25saW5lU3RhdGVIYW5kbGVyKSB7XHJcbiAgICAgICAgdGhpcy5hc3luY1F1ZXVlID0gYXN5bmNRdWV1ZTtcclxuICAgICAgICB0aGlzLm9ubGluZVN0YXRlSGFuZGxlciA9IG9ubGluZVN0YXRlSGFuZGxlcjtcclxuICAgICAgICAvKiogVGhlIGN1cnJlbnQgT25saW5lU3RhdGUuICovXHJcbiAgICAgICAgdGhpcy5zdGF0ZSA9IE9ubGluZVN0YXRlLlVua25vd247XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQSBjb3VudCBvZiBjb25zZWN1dGl2ZSBmYWlsdXJlcyB0byBvcGVuIHRoZSBzdHJlYW0uIElmIGl0IHJlYWNoZXMgdGhlXHJcbiAgICAgICAgICogbWF4aW11bSBkZWZpbmVkIGJ5IE1BWF9XQVRDSF9TVFJFQU1fRkFJTFVSRVMsIHdlJ2xsIHNldCB0aGUgT25saW5lU3RhdGUgdG9cclxuICAgICAgICAgKiBPZmZsaW5lLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMud2F0Y2hTdHJlYW1GYWlsdXJlcyA9IDA7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQSB0aW1lciB0aGF0IGVsYXBzZXMgYWZ0ZXIgT05MSU5FX1NUQVRFX1RJTUVPVVRfTVMsIGF0IHdoaWNoIHBvaW50IHdlXHJcbiAgICAgICAgICogdHJhbnNpdGlvbiBmcm9tIE9ubGluZVN0YXRlLlVua25vd24gdG8gT25saW5lU3RhdGUuT2ZmbGluZSB3aXRob3V0IHdhaXRpbmdcclxuICAgICAgICAgKiBmb3IgdGhlIHN0cmVhbSB0byBhY3R1YWxseSBmYWlsIChNQVhfV0FUQ0hfU1RSRUFNX0ZBSUxVUkVTIHRpbWVzKS5cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLm9ubGluZVN0YXRlVGltZXIgPSBudWxsO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFdoZXRoZXIgdGhlIGNsaWVudCBzaG91bGQgbG9nIGEgd2FybmluZyBtZXNzYWdlIGlmIGl0IGZhaWxzIHRvIGNvbm5lY3QgdG9cclxuICAgICAgICAgKiB0aGUgYmFja2VuZCAoaW5pdGlhbGx5IHRydWUsIGNsZWFyZWQgYWZ0ZXIgYSBzdWNjZXNzZnVsIHN0cmVhbSwgb3IgaWYgd2UndmVcclxuICAgICAgICAgKiBsb2dnZWQgdGhlIG1lc3NhZ2UgYWxyZWFkeSkuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5zaG91bGRXYXJuQ2xpZW50SXNPZmZsaW5lID0gdHJ1ZTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQ2FsbGVkIGJ5IFJlbW90ZVN0b3JlIHdoZW4gYSB3YXRjaCBzdHJlYW0gaXMgc3RhcnRlZCAoaW5jbHVkaW5nIG9uIGVhY2hcclxuICAgICAqIGJhY2tvZmYgYXR0ZW1wdCkuXHJcbiAgICAgKlxyXG4gICAgICogSWYgdGhpcyBpcyB0aGUgZmlyc3QgYXR0ZW1wdCwgaXQgc2V0cyB0aGUgT25saW5lU3RhdGUgdG8gVW5rbm93biBhbmQgc3RhcnRzXHJcbiAgICAgKiB0aGUgb25saW5lU3RhdGVUaW1lci5cclxuICAgICAqL1xyXG4gICAgT25saW5lU3RhdGVUcmFja2VyLnByb3RvdHlwZS5oYW5kbGVXYXRjaFN0cmVhbVN0YXJ0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgaWYgKHRoaXMud2F0Y2hTdHJlYW1GYWlsdXJlcyA9PT0gMCkge1xyXG4gICAgICAgICAgICB0aGlzLnNldEFuZEJyb2FkY2FzdChPbmxpbmVTdGF0ZS5Vbmtub3duKTtcclxuICAgICAgICAgICAgYXNzZXJ0KHRoaXMub25saW5lU3RhdGVUaW1lciA9PT0gbnVsbCwgXCJvbmxpbmVTdGF0ZVRpbWVyIHNob3VsZG4ndCBiZSBzdGFydGVkIHlldFwiKTtcclxuICAgICAgICAgICAgdGhpcy5vbmxpbmVTdGF0ZVRpbWVyID0gdGhpcy5hc3luY1F1ZXVlLmVucXVldWVBZnRlckRlbGF5KFRpbWVySWQuT25saW5lU3RhdGVUaW1lb3V0LCBPTkxJTkVfU1RBVEVfVElNRU9VVF9NUywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMub25saW5lU3RhdGVUaW1lciA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICBhc3NlcnQoX3RoaXMuc3RhdGUgPT09IE9ubGluZVN0YXRlLlVua25vd24sICdUaW1lciBzaG91bGQgYmUgY2FuY2VsZWQgaWYgd2UgdHJhbnNpdGlvbmVkIHRvIGEgZGlmZmVyZW50IHN0YXRlLicpO1xyXG4gICAgICAgICAgICAgICAgX3RoaXMubG9nQ2xpZW50T2ZmbGluZVdhcm5pbmdJZk5lY2Vzc2FyeShcIkJhY2tlbmQgZGlkbid0IHJlc3BvbmQgd2l0aGluIFwiICsgT05MSU5FX1NUQVRFX1RJTUVPVVRfTVMgLyAxMDAwICsgXCIgXCIgK1xyXG4gICAgICAgICAgICAgICAgICAgIFwic2Vjb25kcy5cIik7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5zZXRBbmRCcm9hZGNhc3QoT25saW5lU3RhdGUuT2ZmbGluZSk7XHJcbiAgICAgICAgICAgICAgICAvLyBOT1RFOiBoYW5kbGVXYXRjaFN0cmVhbUZhaWx1cmUoKSB3aWxsIGNvbnRpbnVlIHRvIGluY3JlbWVudFxyXG4gICAgICAgICAgICAgICAgLy8gd2F0Y2hTdHJlYW1GYWlsdXJlcyBldmVuIHRob3VnaCB3ZSBhcmUgYWxyZWFkeSBtYXJrZWQgT2ZmbGluZSxcclxuICAgICAgICAgICAgICAgIC8vIGJ1dCB0aGlzIGlzIG5vbi1oYXJtZnVsLlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBVcGRhdGVzIG91ciBPbmxpbmVTdGF0ZSBhcyBhcHByb3ByaWF0ZSBhZnRlciB0aGUgd2F0Y2ggc3RyZWFtIHJlcG9ydHMgYVxyXG4gICAgICogZmFpbHVyZS4gVGhlIGZpcnN0IGZhaWx1cmUgbW92ZXMgdXMgdG8gdGhlICdVbmtub3duJyBzdGF0ZS4gV2UgdGhlbiBtYXlcclxuICAgICAqIGFsbG93IG11bHRpcGxlIGZhaWx1cmVzIChiYXNlZCBvbiBNQVhfV0FUQ0hfU1RSRUFNX0ZBSUxVUkVTKSBiZWZvcmUgd2VcclxuICAgICAqIGFjdHVhbGx5IHRyYW5zaXRpb24gdG8gdGhlICdPZmZsaW5lJyBzdGF0ZS5cclxuICAgICAqL1xyXG4gICAgT25saW5lU3RhdGVUcmFja2VyLnByb3RvdHlwZS5oYW5kbGVXYXRjaFN0cmVhbUZhaWx1cmUgPSBmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICBpZiAodGhpcy5zdGF0ZSA9PT0gT25saW5lU3RhdGUuT25saW5lKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0QW5kQnJvYWRjYXN0KE9ubGluZVN0YXRlLlVua25vd24pO1xyXG4gICAgICAgICAgICAvLyBUbyBnZXQgdG8gT25saW5lU3RhdGUuT25saW5lLCBzZXQoKSBtdXN0IGhhdmUgYmVlbiBjYWxsZWQgd2hpY2ggd291bGRcclxuICAgICAgICAgICAgLy8gaGF2ZSByZXNldCBvdXIgaGV1cmlzdGljcy5cclxuICAgICAgICAgICAgYXNzZXJ0KHRoaXMud2F0Y2hTdHJlYW1GYWlsdXJlcyA9PT0gMCwgJ3dhdGNoU3RyZWFtRmFpbHVyZXMgbXVzdCBiZSAwJyk7XHJcbiAgICAgICAgICAgIGFzc2VydCh0aGlzLm9ubGluZVN0YXRlVGltZXIgPT09IG51bGwsICdvbmxpbmVTdGF0ZVRpbWVyIG11c3QgYmUgbnVsbCcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy53YXRjaFN0cmVhbUZhaWx1cmVzKys7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLndhdGNoU3RyZWFtRmFpbHVyZXMgPj0gTUFYX1dBVENIX1NUUkVBTV9GQUlMVVJFUykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jbGVhck9ubGluZVN0YXRlVGltZXIoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMubG9nQ2xpZW50T2ZmbGluZVdhcm5pbmdJZk5lY2Vzc2FyeShcIkNvbm5lY3Rpb24gZmFpbGVkIFwiICsgTUFYX1dBVENIX1NUUkVBTV9GQUlMVVJFUyArIFwiIFwiICtcclxuICAgICAgICAgICAgICAgICAgICAoXCJ0aW1lcy4gTW9zdCByZWNlbnQgZXJyb3I6IFwiICsgZXJyb3IudG9TdHJpbmcoKSkpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRBbmRCcm9hZGNhc3QoT25saW5lU3RhdGUuT2ZmbGluZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBFeHBsaWNpdGx5IHNldHMgdGhlIE9ubGluZVN0YXRlIHRvIHRoZSBzcGVjaWZpZWQgc3RhdGUuXHJcbiAgICAgKlxyXG4gICAgICogTm90ZSB0aGF0IHRoaXMgcmVzZXRzIG91ciB0aW1lcnMgLyBmYWlsdXJlIGNvdW50ZXJzLCBldGMuIHVzZWQgYnkgb3VyXHJcbiAgICAgKiBPZmZsaW5lIGhldXJpc3RpY3MsIHNvIG11c3Qgbm90IGJlIHVzZWQgaW4gcGxhY2Ugb2ZcclxuICAgICAqIGhhbmRsZVdhdGNoU3RyZWFtU3RhcnQoKSBhbmQgaGFuZGxlV2F0Y2hTdHJlYW1GYWlsdXJlKCkuXHJcbiAgICAgKi9cclxuICAgIE9ubGluZVN0YXRlVHJhY2tlci5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24gKG5ld1N0YXRlKSB7XHJcbiAgICAgICAgdGhpcy5jbGVhck9ubGluZVN0YXRlVGltZXIoKTtcclxuICAgICAgICB0aGlzLndhdGNoU3RyZWFtRmFpbHVyZXMgPSAwO1xyXG4gICAgICAgIGlmIChuZXdTdGF0ZSA9PT0gT25saW5lU3RhdGUuT25saW5lKSB7XHJcbiAgICAgICAgICAgIC8vIFdlJ3ZlIGNvbm5lY3RlZCB0byB3YXRjaCBhdCBsZWFzdCBvbmNlLiBEb24ndCB3YXJuIHRoZSBkZXZlbG9wZXJcclxuICAgICAgICAgICAgLy8gYWJvdXQgYmVpbmcgb2ZmbGluZSBnb2luZyBmb3J3YXJkLlxyXG4gICAgICAgICAgICB0aGlzLnNob3VsZFdhcm5DbGllbnRJc09mZmxpbmUgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zZXRBbmRCcm9hZGNhc3QobmV3U3RhdGUpO1xyXG4gICAgfTtcclxuICAgIE9ubGluZVN0YXRlVHJhY2tlci5wcm90b3R5cGUuc2V0QW5kQnJvYWRjYXN0ID0gZnVuY3Rpb24gKG5ld1N0YXRlKSB7XHJcbiAgICAgICAgaWYgKG5ld1N0YXRlICE9PSB0aGlzLnN0YXRlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBuZXdTdGF0ZTtcclxuICAgICAgICAgICAgdGhpcy5vbmxpbmVTdGF0ZUhhbmRsZXIobmV3U3RhdGUpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBPbmxpbmVTdGF0ZVRyYWNrZXIucHJvdG90eXBlLmxvZ0NsaWVudE9mZmxpbmVXYXJuaW5nSWZOZWNlc3NhcnkgPSBmdW5jdGlvbiAoZGV0YWlscykge1xyXG4gICAgICAgIHZhciBtZXNzYWdlID0gXCJDb3VsZCBub3QgcmVhY2ggQ2xvdWQgRmlyZXN0b3JlIGJhY2tlbmQuIFwiICsgZGV0YWlscyArIFwiXFxuXCIgK1xyXG4gICAgICAgICAgICBcIlRoaXMgdHlwaWNhbGx5IGluZGljYXRlcyB0aGF0IHlvdXIgZGV2aWNlIGRvZXMgbm90IGhhdmUgYSBoZWFsdGh5IFwiICtcclxuICAgICAgICAgICAgXCJJbnRlcm5ldCBjb25uZWN0aW9uIGF0IHRoZSBtb21lbnQuIFRoZSBjbGllbnQgd2lsbCBvcGVyYXRlIGluIG9mZmxpbmUgXCIgK1xyXG4gICAgICAgICAgICBcIm1vZGUgdW50aWwgaXQgaXMgYWJsZSB0byBzdWNjZXNzZnVsbHkgY29ubmVjdCB0byB0aGUgYmFja2VuZC5cIjtcclxuICAgICAgICBpZiAodGhpcy5zaG91bGRXYXJuQ2xpZW50SXNPZmZsaW5lKSB7XHJcbiAgICAgICAgICAgIGVycm9yKG1lc3NhZ2UpO1xyXG4gICAgICAgICAgICB0aGlzLnNob3VsZFdhcm5DbGllbnRJc09mZmxpbmUgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGRlYnVnKExPR19UQUckNiwgbWVzc2FnZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIE9ubGluZVN0YXRlVHJhY2tlci5wcm90b3R5cGUuY2xlYXJPbmxpbmVTdGF0ZVRpbWVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICh0aGlzLm9ubGluZVN0YXRlVGltZXIgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgdGhpcy5vbmxpbmVTdGF0ZVRpbWVyLmNhbmNlbCgpO1xyXG4gICAgICAgICAgICB0aGlzLm9ubGluZVN0YXRlVGltZXIgPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICByZXR1cm4gT25saW5lU3RhdGVUcmFja2VyO1xyXG59KCkpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEVycm9yIENvZGVzIGRlc2NyaWJpbmcgdGhlIGRpZmZlcmVudCB3YXlzIEdSUEMgY2FuIGZhaWwuIFRoZXNlIGFyZSBjb3BpZWRcclxuICogZGlyZWN0bHkgZnJvbSBHUlBDJ3Mgc291cmNlcyBoZXJlOlxyXG4gKlxyXG4gKiBodHRwczovL2dpdGh1Yi5jb20vZ3JwYy9ncnBjL2Jsb2IvYmNlZWM5NGVhNGZjNWYwMDg1ZDgxMjM1ZDhlMWMwNjc5OGRjMzQxYS9pbmNsdWRlL2dycGMlMkIlMkIvaW1wbC9jb2RlZ2VuL3N0YXR1c19jb2RlX2VudW0uaFxyXG4gKlxyXG4gKiBJbXBvcnRhbnQhIFRoZSBuYW1lcyBvZiB0aGVzZSBpZGVudGlmaWVycyBtYXR0ZXIgYmVjYXVzZSB0aGUgc3RyaW5nIGZvcm1zXHJcbiAqIGFyZSB1c2VkIGZvciByZXZlcnNlIGxvb2t1cHMgZnJvbSB0aGUgd2ViY2hhbm5lbCBzdHJlYW0uIERvIE5PVCBjaGFuZ2UgdGhlXHJcbiAqIG5hbWVzIG9mIHRoZXNlIGlkZW50aWZpZXJzLlxyXG4gKi9cclxudmFyIFJwY0NvZGU7XHJcbihmdW5jdGlvbiAoUnBjQ29kZSkge1xyXG4gICAgUnBjQ29kZVtScGNDb2RlW1wiT0tcIl0gPSAwXSA9IFwiT0tcIjtcclxuICAgIFJwY0NvZGVbUnBjQ29kZVtcIkNBTkNFTExFRFwiXSA9IDFdID0gXCJDQU5DRUxMRURcIjtcclxuICAgIFJwY0NvZGVbUnBjQ29kZVtcIlVOS05PV05cIl0gPSAyXSA9IFwiVU5LTk9XTlwiO1xyXG4gICAgUnBjQ29kZVtScGNDb2RlW1wiSU5WQUxJRF9BUkdVTUVOVFwiXSA9IDNdID0gXCJJTlZBTElEX0FSR1VNRU5UXCI7XHJcbiAgICBScGNDb2RlW1JwY0NvZGVbXCJERUFETElORV9FWENFRURFRFwiXSA9IDRdID0gXCJERUFETElORV9FWENFRURFRFwiO1xyXG4gICAgUnBjQ29kZVtScGNDb2RlW1wiTk9UX0ZPVU5EXCJdID0gNV0gPSBcIk5PVF9GT1VORFwiO1xyXG4gICAgUnBjQ29kZVtScGNDb2RlW1wiQUxSRUFEWV9FWElTVFNcIl0gPSA2XSA9IFwiQUxSRUFEWV9FWElTVFNcIjtcclxuICAgIFJwY0NvZGVbUnBjQ29kZVtcIlBFUk1JU1NJT05fREVOSUVEXCJdID0gN10gPSBcIlBFUk1JU1NJT05fREVOSUVEXCI7XHJcbiAgICBScGNDb2RlW1JwY0NvZGVbXCJVTkFVVEhFTlRJQ0FURURcIl0gPSAxNl0gPSBcIlVOQVVUSEVOVElDQVRFRFwiO1xyXG4gICAgUnBjQ29kZVtScGNDb2RlW1wiUkVTT1VSQ0VfRVhIQVVTVEVEXCJdID0gOF0gPSBcIlJFU09VUkNFX0VYSEFVU1RFRFwiO1xyXG4gICAgUnBjQ29kZVtScGNDb2RlW1wiRkFJTEVEX1BSRUNPTkRJVElPTlwiXSA9IDldID0gXCJGQUlMRURfUFJFQ09ORElUSU9OXCI7XHJcbiAgICBScGNDb2RlW1JwY0NvZGVbXCJBQk9SVEVEXCJdID0gMTBdID0gXCJBQk9SVEVEXCI7XHJcbiAgICBScGNDb2RlW1JwY0NvZGVbXCJPVVRfT0ZfUkFOR0VcIl0gPSAxMV0gPSBcIk9VVF9PRl9SQU5HRVwiO1xyXG4gICAgUnBjQ29kZVtScGNDb2RlW1wiVU5JTVBMRU1FTlRFRFwiXSA9IDEyXSA9IFwiVU5JTVBMRU1FTlRFRFwiO1xyXG4gICAgUnBjQ29kZVtScGNDb2RlW1wiSU5URVJOQUxcIl0gPSAxM10gPSBcIklOVEVSTkFMXCI7XHJcbiAgICBScGNDb2RlW1JwY0NvZGVbXCJVTkFWQUlMQUJMRVwiXSA9IDE0XSA9IFwiVU5BVkFJTEFCTEVcIjtcclxuICAgIFJwY0NvZGVbUnBjQ29kZVtcIkRBVEFfTE9TU1wiXSA9IDE1XSA9IFwiREFUQV9MT1NTXCI7XHJcbn0pKFJwY0NvZGUgfHwgKFJwY0NvZGUgPSB7fSkpO1xyXG4vKipcclxuICogRGV0ZXJtaW5lcyB3aGV0aGVyIGFuIGVycm9yIGNvZGUgcmVwcmVzZW50cyBhIHBlcm1hbmVudCBlcnJvciB3aGVuIHJlY2VpdmVkXHJcbiAqIGluIHJlc3BvbnNlIHRvIGEgbm9uLXdyaXRlIG9wZXJhdGlvbi5cclxuICpcclxuICogU2VlIGlzUGVybWFuZW50V3JpdGVFcnJvciBmb3IgY2xhc3NpZnlpbmcgd3JpdGUgZXJyb3JzLlxyXG4gKi9cclxuZnVuY3Rpb24gaXNQZXJtYW5lbnRFcnJvcihjb2RlKSB7XHJcbiAgICBzd2l0Y2ggKGNvZGUpIHtcclxuICAgICAgICBjYXNlIENvZGUuT0s6XHJcbiAgICAgICAgICAgIHJldHVybiBmYWlsKCdUcmVhdGVkIHN0YXR1cyBPSyBhcyBlcnJvcicpO1xyXG4gICAgICAgIGNhc2UgQ29kZS5DQU5DRUxMRUQ6XHJcbiAgICAgICAgY2FzZSBDb2RlLlVOS05PV046XHJcbiAgICAgICAgY2FzZSBDb2RlLkRFQURMSU5FX0VYQ0VFREVEOlxyXG4gICAgICAgIGNhc2UgQ29kZS5SRVNPVVJDRV9FWEhBVVNURUQ6XHJcbiAgICAgICAgY2FzZSBDb2RlLklOVEVSTkFMOlxyXG4gICAgICAgIGNhc2UgQ29kZS5VTkFWQUlMQUJMRTpcclxuICAgICAgICAvLyBVbmF1dGhlbnRpY2F0ZWQgbWVhbnMgc29tZXRoaW5nIHdlbnQgd3Jvbmcgd2l0aCBvdXIgdG9rZW4gYW5kIHdlIG5lZWRcclxuICAgICAgICAvLyB0byByZXRyeSB3aXRoIG5ldyBjcmVkZW50aWFscyB3aGljaCB3aWxsIGhhcHBlbiBhdXRvbWF0aWNhbGx5LlxyXG4gICAgICAgIGNhc2UgQ29kZS5VTkFVVEhFTlRJQ0FURUQ6XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICBjYXNlIENvZGUuSU5WQUxJRF9BUkdVTUVOVDpcclxuICAgICAgICBjYXNlIENvZGUuTk9UX0ZPVU5EOlxyXG4gICAgICAgIGNhc2UgQ29kZS5BTFJFQURZX0VYSVNUUzpcclxuICAgICAgICBjYXNlIENvZGUuUEVSTUlTU0lPTl9ERU5JRUQ6XHJcbiAgICAgICAgY2FzZSBDb2RlLkZBSUxFRF9QUkVDT05ESVRJT046XHJcbiAgICAgICAgLy8gQWJvcnRlZCBtaWdodCBiZSByZXRyaWVkIGluIHNvbWUgc2NlbmFyaW9zLCBidXQgdGhhdCBpcyBkZXBlbmRhbnQgb25cclxuICAgICAgICAvLyB0aGUgY29udGV4dCBhbmQgc2hvdWxkIGhhbmRsZWQgaW5kaXZpZHVhbGx5IGJ5IHRoZSBjYWxsaW5nIGNvZGUuXHJcbiAgICAgICAgLy8gU2VlIGh0dHBzOi8vY2xvdWQuZ29vZ2xlLmNvbS9hcGlzL2Rlc2lnbi9lcnJvcnMuXHJcbiAgICAgICAgY2FzZSBDb2RlLkFCT1JURUQ6XHJcbiAgICAgICAgY2FzZSBDb2RlLk9VVF9PRl9SQU5HRTpcclxuICAgICAgICBjYXNlIENvZGUuVU5JTVBMRU1FTlRFRDpcclxuICAgICAgICBjYXNlIENvZGUuREFUQV9MT1NTOlxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICByZXR1cm4gZmFpbCgnVW5rbm93biBzdGF0dXMgY29kZTogJyArIGNvZGUpO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBEZXRlcm1pbmVzIHdoZXRoZXIgYW4gZXJyb3IgY29kZSByZXByZXNlbnRzIGEgcGVybWFuZW50IGVycm9yIHdoZW4gcmVjZWl2ZWRcclxuICogaW4gcmVzcG9uc2UgdG8gYSB3cml0ZSBvcGVyYXRpb24uXHJcbiAqXHJcbiAqIFdyaXRlIG9wZXJhdGlvbnMgbXVzdCBiZSBoYW5kbGVkIHNwZWNpYWxseSBiZWNhdXNlIGFzIG9mIGIvMTE5NDM3NzY0LCBBQk9SVEVEXHJcbiAqIGVycm9ycyBvbiB0aGUgd3JpdGUgc3RyZWFtIHNob3VsZCBiZSByZXRyaWVkIHRvbyAoZXZlbiB0aG91Z2ggQUJPUlRFRCBlcnJvcnNcclxuICogYXJlIG5vdCBnZW5lcmFsbHkgcmV0cnlhYmxlKS5cclxuICpcclxuICogTm90ZSB0aGF0IGR1cmluZyB0aGUgaW5pdGlhbCBoYW5kc2hha2Ugb24gdGhlIHdyaXRlIHN0cmVhbSBhbiBBQk9SVEVEIGVycm9yXHJcbiAqIHNpZ25hbHMgdGhhdCB3ZSBzaG91bGQgZGlzY2FyZCBvdXIgc3RyZWFtIHRva2VuIChpLmUuIGl0IGlzIHBlcm1hbmVudCkuIFRoaXNcclxuICogbWVhbnMgYSBoYW5kc2hha2UgZXJyb3Igc2hvdWxkIGJlIGNsYXNzaWZpZWQgd2l0aCBpc1Blcm1hbmVudEVycm9yLCBhYm92ZS5cclxuICovXHJcbmZ1bmN0aW9uIGlzUGVybWFuZW50V3JpdGVFcnJvcihjb2RlKSB7XHJcbiAgICByZXR1cm4gaXNQZXJtYW5lbnRFcnJvcihjb2RlKSAmJiBjb2RlICE9PSBDb2RlLkFCT1JURUQ7XHJcbn1cclxuLyoqXHJcbiAqIE1hcHMgYW4gZXJyb3IgQ29kZSBmcm9tIGEgR1JQQyBzdGF0dXMgaWRlbnRpZmllciBsaWtlICdOT1RfRk9VTkQnLlxyXG4gKlxyXG4gKiBAcmV0dXJucyBUaGUgQ29kZSBlcXVpdmFsZW50IHRvIHRoZSBnaXZlbiBzdGF0dXMgc3RyaW5nIG9yIHVuZGVmaW5lZCBpZlxyXG4gKiAgICAgdGhlcmUgaXMgbm8gbWF0Y2guXHJcbiAqL1xyXG5mdW5jdGlvbiBtYXBDb2RlRnJvbVJwY1N0YXR1cyhzdGF0dXMpIHtcclxuICAgIC8vIGxvb2t1cCBieSBzdHJpbmdcclxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbiAgICB2YXIgY29kZSA9IFJwY0NvZGVbc3RhdHVzXTtcclxuICAgIGlmIChjb2RlID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG1hcENvZGVGcm9tUnBjQ29kZShjb2RlKTtcclxufVxyXG4vKipcclxuICogTWFwcyBhbiBlcnJvciBDb2RlIGZyb20gR1JQQyBzdGF0dXMgY29kZSBudW1iZXIsIGxpa2UgMCwgMSwgb3IgMTQuIFRoZXNlXHJcbiAqIGFyZSBub3QgdGhlIHNhbWUgYXMgSFRUUCBzdGF0dXMgY29kZXMuXHJcbiAqXHJcbiAqIEByZXR1cm5zIFRoZSBDb2RlIGVxdWl2YWxlbnQgdG8gdGhlIGdpdmVuIEdSUEMgc3RhdHVzIGNvZGUuIEZhaWxzIGlmIHRoZXJlXHJcbiAqICAgICBpcyBubyBtYXRjaC5cclxuICovXHJcbmZ1bmN0aW9uIG1hcENvZGVGcm9tUnBjQ29kZShjb2RlKSB7XHJcbiAgICBpZiAoY29kZSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgLy8gVGhpcyBzaG91bGRuJ3Qgbm9ybWFsbHkgaGFwcGVuLCBidXQgaW4gY2VydGFpbiBlcnJvciBjYXNlcyAobGlrZSB0cnlpbmdcclxuICAgICAgICAvLyB0byBzZW5kIGludmFsaWQgcHJvdG8gbWVzc2FnZXMpIHdlIG1heSBnZXQgYW4gZXJyb3Igd2l0aCBubyBHUlBDIGNvZGUuXHJcbiAgICAgICAgZXJyb3IoJ0dSUEMgZXJyb3IgaGFzIG5vIC5jb2RlJyk7XHJcbiAgICAgICAgcmV0dXJuIENvZGUuVU5LTk9XTjtcclxuICAgIH1cclxuICAgIHN3aXRjaCAoY29kZSkge1xyXG4gICAgICAgIGNhc2UgUnBjQ29kZS5PSzpcclxuICAgICAgICAgICAgcmV0dXJuIENvZGUuT0s7XHJcbiAgICAgICAgY2FzZSBScGNDb2RlLkNBTkNFTExFRDpcclxuICAgICAgICAgICAgcmV0dXJuIENvZGUuQ0FOQ0VMTEVEO1xyXG4gICAgICAgIGNhc2UgUnBjQ29kZS5VTktOT1dOOlxyXG4gICAgICAgICAgICByZXR1cm4gQ29kZS5VTktOT1dOO1xyXG4gICAgICAgIGNhc2UgUnBjQ29kZS5ERUFETElORV9FWENFRURFRDpcclxuICAgICAgICAgICAgcmV0dXJuIENvZGUuREVBRExJTkVfRVhDRUVERUQ7XHJcbiAgICAgICAgY2FzZSBScGNDb2RlLlJFU09VUkNFX0VYSEFVU1RFRDpcclxuICAgICAgICAgICAgcmV0dXJuIENvZGUuUkVTT1VSQ0VfRVhIQVVTVEVEO1xyXG4gICAgICAgIGNhc2UgUnBjQ29kZS5JTlRFUk5BTDpcclxuICAgICAgICAgICAgcmV0dXJuIENvZGUuSU5URVJOQUw7XHJcbiAgICAgICAgY2FzZSBScGNDb2RlLlVOQVZBSUxBQkxFOlxyXG4gICAgICAgICAgICByZXR1cm4gQ29kZS5VTkFWQUlMQUJMRTtcclxuICAgICAgICBjYXNlIFJwY0NvZGUuVU5BVVRIRU5USUNBVEVEOlxyXG4gICAgICAgICAgICByZXR1cm4gQ29kZS5VTkFVVEhFTlRJQ0FURUQ7XHJcbiAgICAgICAgY2FzZSBScGNDb2RlLklOVkFMSURfQVJHVU1FTlQ6XHJcbiAgICAgICAgICAgIHJldHVybiBDb2RlLklOVkFMSURfQVJHVU1FTlQ7XHJcbiAgICAgICAgY2FzZSBScGNDb2RlLk5PVF9GT1VORDpcclxuICAgICAgICAgICAgcmV0dXJuIENvZGUuTk9UX0ZPVU5EO1xyXG4gICAgICAgIGNhc2UgUnBjQ29kZS5BTFJFQURZX0VYSVNUUzpcclxuICAgICAgICAgICAgcmV0dXJuIENvZGUuQUxSRUFEWV9FWElTVFM7XHJcbiAgICAgICAgY2FzZSBScGNDb2RlLlBFUk1JU1NJT05fREVOSUVEOlxyXG4gICAgICAgICAgICByZXR1cm4gQ29kZS5QRVJNSVNTSU9OX0RFTklFRDtcclxuICAgICAgICBjYXNlIFJwY0NvZGUuRkFJTEVEX1BSRUNPTkRJVElPTjpcclxuICAgICAgICAgICAgcmV0dXJuIENvZGUuRkFJTEVEX1BSRUNPTkRJVElPTjtcclxuICAgICAgICBjYXNlIFJwY0NvZGUuQUJPUlRFRDpcclxuICAgICAgICAgICAgcmV0dXJuIENvZGUuQUJPUlRFRDtcclxuICAgICAgICBjYXNlIFJwY0NvZGUuT1VUX09GX1JBTkdFOlxyXG4gICAgICAgICAgICByZXR1cm4gQ29kZS5PVVRfT0ZfUkFOR0U7XHJcbiAgICAgICAgY2FzZSBScGNDb2RlLlVOSU1QTEVNRU5URUQ6XHJcbiAgICAgICAgICAgIHJldHVybiBDb2RlLlVOSU1QTEVNRU5URUQ7XHJcbiAgICAgICAgY2FzZSBScGNDb2RlLkRBVEFfTE9TUzpcclxuICAgICAgICAgICAgcmV0dXJuIENvZGUuREFUQV9MT1NTO1xyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgIHJldHVybiBmYWlsKCdVbmtub3duIHN0YXR1cyBjb2RlOiAnICsgY29kZSk7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIE1hcHMgYW4gUlBDIGNvZGUgZnJvbSBhIENvZGUuIFRoaXMgaXMgdGhlIHJldmVyc2Ugb3BlcmF0aW9uIGZyb21cclxuICogbWFwQ29kZUZyb21ScGNDb2RlIGFuZCBzaG91bGQgcmVhbGx5IG9ubHkgYmUgdXNlZCBpbiB0ZXN0cy5cclxuICovXHJcbmZ1bmN0aW9uIG1hcFJwY0NvZGVGcm9tQ29kZShjb2RlKSB7XHJcbiAgICBpZiAoY29kZSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgcmV0dXJuIFJwY0NvZGUuT0s7XHJcbiAgICB9XHJcbiAgICBzd2l0Y2ggKGNvZGUpIHtcclxuICAgICAgICBjYXNlIENvZGUuT0s6XHJcbiAgICAgICAgICAgIHJldHVybiBScGNDb2RlLk9LO1xyXG4gICAgICAgIGNhc2UgQ29kZS5DQU5DRUxMRUQ6XHJcbiAgICAgICAgICAgIHJldHVybiBScGNDb2RlLkNBTkNFTExFRDtcclxuICAgICAgICBjYXNlIENvZGUuVU5LTk9XTjpcclxuICAgICAgICAgICAgcmV0dXJuIFJwY0NvZGUuVU5LTk9XTjtcclxuICAgICAgICBjYXNlIENvZGUuREVBRExJTkVfRVhDRUVERUQ6XHJcbiAgICAgICAgICAgIHJldHVybiBScGNDb2RlLkRFQURMSU5FX0VYQ0VFREVEO1xyXG4gICAgICAgIGNhc2UgQ29kZS5SRVNPVVJDRV9FWEhBVVNURUQ6XHJcbiAgICAgICAgICAgIHJldHVybiBScGNDb2RlLlJFU09VUkNFX0VYSEFVU1RFRDtcclxuICAgICAgICBjYXNlIENvZGUuSU5URVJOQUw6XHJcbiAgICAgICAgICAgIHJldHVybiBScGNDb2RlLklOVEVSTkFMO1xyXG4gICAgICAgIGNhc2UgQ29kZS5VTkFWQUlMQUJMRTpcclxuICAgICAgICAgICAgcmV0dXJuIFJwY0NvZGUuVU5BVkFJTEFCTEU7XHJcbiAgICAgICAgY2FzZSBDb2RlLlVOQVVUSEVOVElDQVRFRDpcclxuICAgICAgICAgICAgcmV0dXJuIFJwY0NvZGUuVU5BVVRIRU5USUNBVEVEO1xyXG4gICAgICAgIGNhc2UgQ29kZS5JTlZBTElEX0FSR1VNRU5UOlxyXG4gICAgICAgICAgICByZXR1cm4gUnBjQ29kZS5JTlZBTElEX0FSR1VNRU5UO1xyXG4gICAgICAgIGNhc2UgQ29kZS5OT1RfRk9VTkQ6XHJcbiAgICAgICAgICAgIHJldHVybiBScGNDb2RlLk5PVF9GT1VORDtcclxuICAgICAgICBjYXNlIENvZGUuQUxSRUFEWV9FWElTVFM6XHJcbiAgICAgICAgICAgIHJldHVybiBScGNDb2RlLkFMUkVBRFlfRVhJU1RTO1xyXG4gICAgICAgIGNhc2UgQ29kZS5QRVJNSVNTSU9OX0RFTklFRDpcclxuICAgICAgICAgICAgcmV0dXJuIFJwY0NvZGUuUEVSTUlTU0lPTl9ERU5JRUQ7XHJcbiAgICAgICAgY2FzZSBDb2RlLkZBSUxFRF9QUkVDT05ESVRJT046XHJcbiAgICAgICAgICAgIHJldHVybiBScGNDb2RlLkZBSUxFRF9QUkVDT05ESVRJT047XHJcbiAgICAgICAgY2FzZSBDb2RlLkFCT1JURUQ6XHJcbiAgICAgICAgICAgIHJldHVybiBScGNDb2RlLkFCT1JURUQ7XHJcbiAgICAgICAgY2FzZSBDb2RlLk9VVF9PRl9SQU5HRTpcclxuICAgICAgICAgICAgcmV0dXJuIFJwY0NvZGUuT1VUX09GX1JBTkdFO1xyXG4gICAgICAgIGNhc2UgQ29kZS5VTklNUExFTUVOVEVEOlxyXG4gICAgICAgICAgICByZXR1cm4gUnBjQ29kZS5VTklNUExFTUVOVEVEO1xyXG4gICAgICAgIGNhc2UgQ29kZS5EQVRBX0xPU1M6XHJcbiAgICAgICAgICAgIHJldHVybiBScGNDb2RlLkRBVEFfTE9TUztcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICByZXR1cm4gZmFpbCgnVW5rbm93biBzdGF0dXMgY29kZTogJyArIGNvZGUpO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBDb252ZXJ0cyBhbiBIVFRQIHJlc3BvbnNlJ3MgZXJyb3Igc3RhdHVzIHRvIHRoZSBlcXVpdmFsZW50IGVycm9yIGNvZGUuXHJcbiAqXHJcbiAqIEBwYXJhbSBzdGF0dXMgQW4gSFRUUCBlcnJvciByZXNwb25zZSBzdGF0dXMgKFwiRkFJTEVEX1BSRUNPTkRJVElPTlwiLFxyXG4gKiBcIlVOS05PV05cIiwgZXRjLilcclxuICogQHJldHVybnMgVGhlIGVxdWl2YWxlbnQgQ29kZS4gTm9uLW1hdGNoaW5nIHJlc3BvbnNlcyBhcmUgbWFwcGVkIHRvXHJcbiAqICAgICBDb2RlLlVOS05PV04uXHJcbiAqL1xyXG5mdW5jdGlvbiBtYXBDb2RlRnJvbUh0dHBSZXNwb25zZUVycm9yU3RhdHVzKHN0YXR1cykge1xyXG4gICAgdmFyIHNlcnZlckVycm9yID0gc3RhdHVzLnRvTG93ZXJDYXNlKCkucmVwbGFjZSgnXycsICctJyk7XHJcbiAgICByZXR1cm4gT2JqZWN0LnZhbHVlcyhDb2RlKS5pbmRleE9mKHNlcnZlckVycm9yKSA+PSAwXHJcbiAgICAgICAgPyBzZXJ2ZXJFcnJvclxyXG4gICAgICAgIDogQ29kZS5VTktOT1dOO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogRG9jdW1lbnRTZXQgaXMgYW4gaW1tdXRhYmxlIChjb3B5LW9uLXdyaXRlKSBjb2xsZWN0aW9uIHRoYXQgaG9sZHMgZG9jdW1lbnRzXHJcbiAqIGluIG9yZGVyIHNwZWNpZmllZCBieSB0aGUgcHJvdmlkZWQgY29tcGFyYXRvci4gV2UgYWx3YXlzIGFkZCBhIGRvY3VtZW50IGtleVxyXG4gKiBjb21wYXJhdG9yIG9uIHRvcCBvZiB3aGF0IGlzIHByb3ZpZGVkIHRvIGd1YXJhbnRlZSBkb2N1bWVudCBlcXVhbGl0eSBiYXNlZCBvblxyXG4gKiB0aGUga2V5LlxyXG4gKi9cclxudmFyIERvY3VtZW50U2V0ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgLyoqIFRoZSBkZWZhdWx0IG9yZGVyaW5nIGlzIGJ5IGtleSBpZiB0aGUgY29tcGFyYXRvciBpcyBvbWl0dGVkICovXHJcbiAgICBmdW5jdGlvbiBEb2N1bWVudFNldChjb21wKSB7XHJcbiAgICAgICAgLy8gV2UgYXJlIGFkZGluZyBkb2N1bWVudCBrZXkgY29tcGFyYXRvciB0byB0aGUgZW5kIGFzIGl0J3MgdGhlIG9ubHlcclxuICAgICAgICAvLyBndWFyYW50ZWVkIHVuaXF1ZSBwcm9wZXJ0eSBvZiBhIGRvY3VtZW50LlxyXG4gICAgICAgIGlmIChjb21wKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29tcGFyYXRvciA9IGZ1bmN0aW9uIChkMSwgZDIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBjb21wKGQxLCBkMikgfHwgRG9jdW1lbnRLZXkuY29tcGFyYXRvcihkMS5rZXksIGQyLmtleSk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmNvbXBhcmF0b3IgPSBmdW5jdGlvbiAoZDEsIGQyKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gRG9jdW1lbnRLZXkuY29tcGFyYXRvcihkMS5rZXksIGQyLmtleSk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMua2V5ZWRNYXAgPSBkb2N1bWVudE1hcCgpO1xyXG4gICAgICAgIHRoaXMuc29ydGVkU2V0ID0gbmV3IFNvcnRlZE1hcCh0aGlzLmNvbXBhcmF0b3IpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIGFuIGVtcHR5IGNvcHkgb2YgdGhlIGV4aXN0aW5nIERvY3VtZW50U2V0LCB1c2luZyB0aGUgc2FtZVxyXG4gICAgICogY29tcGFyYXRvci5cclxuICAgICAqL1xyXG4gICAgRG9jdW1lbnRTZXQuZW1wdHlTZXQgPSBmdW5jdGlvbiAob2xkU2V0KSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBEb2N1bWVudFNldChvbGRTZXQuY29tcGFyYXRvcik7XHJcbiAgICB9O1xyXG4gICAgRG9jdW1lbnRTZXQucHJvdG90eXBlLmhhcyA9IGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5rZXllZE1hcC5nZXQoa2V5KSAhPSBudWxsO1xyXG4gICAgfTtcclxuICAgIERvY3VtZW50U2V0LnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMua2V5ZWRNYXAuZ2V0KGtleSk7XHJcbiAgICB9O1xyXG4gICAgRG9jdW1lbnRTZXQucHJvdG90eXBlLmZpcnN0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNvcnRlZFNldC5taW5LZXkoKTtcclxuICAgIH07XHJcbiAgICBEb2N1bWVudFNldC5wcm90b3R5cGUubGFzdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zb3J0ZWRTZXQubWF4S2V5KCk7XHJcbiAgICB9O1xyXG4gICAgRG9jdW1lbnRTZXQucHJvdG90eXBlLmlzRW1wdHkgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc29ydGVkU2V0LmlzRW1wdHkoKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdGhlIGluZGV4IG9mIHRoZSBwcm92aWRlZCBrZXkgaW4gdGhlIGRvY3VtZW50IHNldCwgb3IgLTEgaWYgdGhlXHJcbiAgICAgKiBkb2N1bWVudCBrZXkgaXMgbm90IHByZXNlbnQgaW4gdGhlIHNldDtcclxuICAgICAqL1xyXG4gICAgRG9jdW1lbnRTZXQucHJvdG90eXBlLmluZGV4T2YgPSBmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgICAgdmFyIGRvYyA9IHRoaXMua2V5ZWRNYXAuZ2V0KGtleSk7XHJcbiAgICAgICAgcmV0dXJuIGRvYyA/IHRoaXMuc29ydGVkU2V0LmluZGV4T2YoZG9jKSA6IC0xO1xyXG4gICAgfTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShEb2N1bWVudFNldC5wcm90b3R5cGUsIFwic2l6ZVwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNvcnRlZFNldC5zaXplO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgLyoqIEl0ZXJhdGVzIGRvY3VtZW50cyBpbiBvcmRlciBkZWZpbmVkIGJ5IFwiY29tcGFyYXRvclwiICovXHJcbiAgICBEb2N1bWVudFNldC5wcm90b3R5cGUuZm9yRWFjaCA9IGZ1bmN0aW9uIChjYikge1xyXG4gICAgICAgIHRoaXMuc29ydGVkU2V0Lmlub3JkZXJUcmF2ZXJzYWwoZnVuY3Rpb24gKGssIHYpIHtcclxuICAgICAgICAgICAgY2Ioayk7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKiogSW5zZXJ0cyBvciB1cGRhdGVzIGEgZG9jdW1lbnQgd2l0aCB0aGUgc2FtZSBrZXkgKi9cclxuICAgIERvY3VtZW50U2V0LnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbiAoZG9jKSB7XHJcbiAgICAgICAgLy8gRmlyc3QgcmVtb3ZlIHRoZSBlbGVtZW50IGlmIHdlIGhhdmUgaXQuXHJcbiAgICAgICAgdmFyIHNldCA9IHRoaXMuZGVsZXRlKGRvYy5rZXkpO1xyXG4gICAgICAgIHJldHVybiBzZXQuY29weShzZXQua2V5ZWRNYXAuaW5zZXJ0KGRvYy5rZXksIGRvYyksIHNldC5zb3J0ZWRTZXQuaW5zZXJ0KGRvYywgbnVsbCkpO1xyXG4gICAgfTtcclxuICAgIC8qKiBEZWxldGVzIGEgZG9jdW1lbnQgd2l0aCBhIGdpdmVuIGtleSAqL1xyXG4gICAgRG9jdW1lbnRTZXQucHJvdG90eXBlLmRlbGV0ZSA9IGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICB2YXIgZG9jID0gdGhpcy5nZXQoa2V5KTtcclxuICAgICAgICBpZiAoIWRvYykge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY29weSh0aGlzLmtleWVkTWFwLnJlbW92ZShrZXkpLCB0aGlzLnNvcnRlZFNldC5yZW1vdmUoZG9jKSk7XHJcbiAgICB9O1xyXG4gICAgRG9jdW1lbnRTZXQucHJvdG90eXBlLmlzRXF1YWwgPSBmdW5jdGlvbiAob3RoZXIpIHtcclxuICAgICAgICBpZiAoIShvdGhlciBpbnN0YW5jZW9mIERvY3VtZW50U2V0KSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLnNpemUgIT09IG90aGVyLnNpemUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgdGhpc0l0ID0gdGhpcy5zb3J0ZWRTZXQuZ2V0SXRlcmF0b3IoKTtcclxuICAgICAgICB2YXIgb3RoZXJJdCA9IG90aGVyLnNvcnRlZFNldC5nZXRJdGVyYXRvcigpO1xyXG4gICAgICAgIHdoaWxlICh0aGlzSXQuaGFzTmV4dCgpKSB7XHJcbiAgICAgICAgICAgIHZhciB0aGlzRG9jID0gdGhpc0l0LmdldE5leHQoKS5rZXk7XHJcbiAgICAgICAgICAgIHZhciBvdGhlckRvYyA9IG90aGVySXQuZ2V0TmV4dCgpLmtleTtcclxuICAgICAgICAgICAgaWYgKCF0aGlzRG9jLmlzRXF1YWwob3RoZXJEb2MpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9O1xyXG4gICAgRG9jdW1lbnRTZXQucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBkb2NTdHJpbmdzID0gW107XHJcbiAgICAgICAgdGhpcy5mb3JFYWNoKGZ1bmN0aW9uIChkb2MpIHtcclxuICAgICAgICAgICAgZG9jU3RyaW5ncy5wdXNoKGRvYy50b1N0cmluZygpKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBpZiAoZG9jU3RyaW5ncy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuICdEb2N1bWVudFNldCAoKSc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gJ0RvY3VtZW50U2V0IChcXG4gICcgKyBkb2NTdHJpbmdzLmpvaW4oJyAgXFxuJykgKyAnXFxuKSc7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIERvY3VtZW50U2V0LnByb3RvdHlwZS5jb3B5ID0gZnVuY3Rpb24gKGtleWVkTWFwLCBzb3J0ZWRTZXQpIHtcclxuICAgICAgICB2YXIgbmV3U2V0ID0gbmV3IERvY3VtZW50U2V0KCk7XHJcbiAgICAgICAgbmV3U2V0LmNvbXBhcmF0b3IgPSB0aGlzLmNvbXBhcmF0b3I7XHJcbiAgICAgICAgbmV3U2V0LmtleWVkTWFwID0ga2V5ZWRNYXA7XHJcbiAgICAgICAgbmV3U2V0LnNvcnRlZFNldCA9IHNvcnRlZFNldDtcclxuICAgICAgICByZXR1cm4gbmV3U2V0O1xyXG4gICAgfTtcclxuICAgIHJldHVybiBEb2N1bWVudFNldDtcclxufSgpKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnZhciBDaGFuZ2VUeXBlO1xyXG4oZnVuY3Rpb24gKENoYW5nZVR5cGUpIHtcclxuICAgIENoYW5nZVR5cGVbQ2hhbmdlVHlwZVtcIkFkZGVkXCJdID0gMF0gPSBcIkFkZGVkXCI7XHJcbiAgICBDaGFuZ2VUeXBlW0NoYW5nZVR5cGVbXCJSZW1vdmVkXCJdID0gMV0gPSBcIlJlbW92ZWRcIjtcclxuICAgIENoYW5nZVR5cGVbQ2hhbmdlVHlwZVtcIk1vZGlmaWVkXCJdID0gMl0gPSBcIk1vZGlmaWVkXCI7XHJcbiAgICBDaGFuZ2VUeXBlW0NoYW5nZVR5cGVbXCJNZXRhZGF0YVwiXSA9IDNdID0gXCJNZXRhZGF0YVwiO1xyXG59KShDaGFuZ2VUeXBlIHx8IChDaGFuZ2VUeXBlID0ge30pKTtcclxudmFyIFN5bmNTdGF0ZTtcclxuKGZ1bmN0aW9uIChTeW5jU3RhdGUpIHtcclxuICAgIFN5bmNTdGF0ZVtTeW5jU3RhdGVbXCJMb2NhbFwiXSA9IDBdID0gXCJMb2NhbFwiO1xyXG4gICAgU3luY1N0YXRlW1N5bmNTdGF0ZVtcIlN5bmNlZFwiXSA9IDFdID0gXCJTeW5jZWRcIjtcclxufSkoU3luY1N0YXRlIHx8IChTeW5jU3RhdGUgPSB7fSkpO1xyXG4vKipcclxuICogRG9jdW1lbnRDaGFuZ2VTZXQga2VlcHMgdHJhY2sgb2YgYSBzZXQgb2YgY2hhbmdlcyB0byBkb2NzIGluIGEgcXVlcnksIG1lcmdpbmdcclxuICogZHVwbGljYXRlIGV2ZW50cyBmb3IgdGhlIHNhbWUgZG9jLlxyXG4gKi9cclxudmFyIERvY3VtZW50Q2hhbmdlU2V0ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gRG9jdW1lbnRDaGFuZ2VTZXQoKSB7XHJcbiAgICAgICAgdGhpcy5jaGFuZ2VNYXAgPSBuZXcgU29ydGVkTWFwKERvY3VtZW50S2V5LmNvbXBhcmF0b3IpO1xyXG4gICAgfVxyXG4gICAgRG9jdW1lbnRDaGFuZ2VTZXQucHJvdG90eXBlLnRyYWNrID0gZnVuY3Rpb24gKGNoYW5nZSkge1xyXG4gICAgICAgIHZhciBrZXkgPSBjaGFuZ2UuZG9jLmtleTtcclxuICAgICAgICB2YXIgb2xkQ2hhbmdlID0gdGhpcy5jaGFuZ2VNYXAuZ2V0KGtleSk7XHJcbiAgICAgICAgaWYgKCFvbGRDaGFuZ2UpIHtcclxuICAgICAgICAgICAgdGhpcy5jaGFuZ2VNYXAgPSB0aGlzLmNoYW5nZU1hcC5pbnNlcnQoa2V5LCBjaGFuZ2UpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIE1lcmdlIHRoZSBuZXcgY2hhbmdlIHdpdGggdGhlIGV4aXN0aW5nIGNoYW5nZS5cclxuICAgICAgICBpZiAoY2hhbmdlLnR5cGUgIT09IENoYW5nZVR5cGUuQWRkZWQgJiZcclxuICAgICAgICAgICAgb2xkQ2hhbmdlLnR5cGUgPT09IENoYW5nZVR5cGUuTWV0YWRhdGEpIHtcclxuICAgICAgICAgICAgdGhpcy5jaGFuZ2VNYXAgPSB0aGlzLmNoYW5nZU1hcC5pbnNlcnQoa2V5LCBjaGFuZ2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChjaGFuZ2UudHlwZSA9PT0gQ2hhbmdlVHlwZS5NZXRhZGF0YSAmJlxyXG4gICAgICAgICAgICBvbGRDaGFuZ2UudHlwZSAhPT0gQ2hhbmdlVHlwZS5SZW1vdmVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlTWFwID0gdGhpcy5jaGFuZ2VNYXAuaW5zZXJ0KGtleSwge1xyXG4gICAgICAgICAgICAgICAgdHlwZTogb2xkQ2hhbmdlLnR5cGUsXHJcbiAgICAgICAgICAgICAgICBkb2M6IGNoYW5nZS5kb2NcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGNoYW5nZS50eXBlID09PSBDaGFuZ2VUeXBlLk1vZGlmaWVkICYmXHJcbiAgICAgICAgICAgIG9sZENoYW5nZS50eXBlID09PSBDaGFuZ2VUeXBlLk1vZGlmaWVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlTWFwID0gdGhpcy5jaGFuZ2VNYXAuaW5zZXJ0KGtleSwge1xyXG4gICAgICAgICAgICAgICAgdHlwZTogQ2hhbmdlVHlwZS5Nb2RpZmllZCxcclxuICAgICAgICAgICAgICAgIGRvYzogY2hhbmdlLmRvY1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoY2hhbmdlLnR5cGUgPT09IENoYW5nZVR5cGUuTW9kaWZpZWQgJiZcclxuICAgICAgICAgICAgb2xkQ2hhbmdlLnR5cGUgPT09IENoYW5nZVR5cGUuQWRkZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5jaGFuZ2VNYXAgPSB0aGlzLmNoYW5nZU1hcC5pbnNlcnQoa2V5LCB7XHJcbiAgICAgICAgICAgICAgICB0eXBlOiBDaGFuZ2VUeXBlLkFkZGVkLFxyXG4gICAgICAgICAgICAgICAgZG9jOiBjaGFuZ2UuZG9jXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChjaGFuZ2UudHlwZSA9PT0gQ2hhbmdlVHlwZS5SZW1vdmVkICYmXHJcbiAgICAgICAgICAgIG9sZENoYW5nZS50eXBlID09PSBDaGFuZ2VUeXBlLkFkZGVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlTWFwID0gdGhpcy5jaGFuZ2VNYXAucmVtb3ZlKGtleSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGNoYW5nZS50eXBlID09PSBDaGFuZ2VUeXBlLlJlbW92ZWQgJiZcclxuICAgICAgICAgICAgb2xkQ2hhbmdlLnR5cGUgPT09IENoYW5nZVR5cGUuTW9kaWZpZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5jaGFuZ2VNYXAgPSB0aGlzLmNoYW5nZU1hcC5pbnNlcnQoa2V5LCB7XHJcbiAgICAgICAgICAgICAgICB0eXBlOiBDaGFuZ2VUeXBlLlJlbW92ZWQsXHJcbiAgICAgICAgICAgICAgICBkb2M6IG9sZENoYW5nZS5kb2NcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGNoYW5nZS50eXBlID09PSBDaGFuZ2VUeXBlLkFkZGVkICYmXHJcbiAgICAgICAgICAgIG9sZENoYW5nZS50eXBlID09PSBDaGFuZ2VUeXBlLlJlbW92ZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5jaGFuZ2VNYXAgPSB0aGlzLmNoYW5nZU1hcC5pbnNlcnQoa2V5LCB7XHJcbiAgICAgICAgICAgICAgICB0eXBlOiBDaGFuZ2VUeXBlLk1vZGlmaWVkLFxyXG4gICAgICAgICAgICAgICAgZG9jOiBjaGFuZ2UuZG9jXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gVGhpcyBpbmNsdWRlcyB0aGVzZSBjYXNlcywgd2hpY2ggZG9uJ3QgbWFrZSBzZW5zZTpcclxuICAgICAgICAgICAgLy8gQWRkZWQtPkFkZGVkXHJcbiAgICAgICAgICAgIC8vIFJlbW92ZWQtPlJlbW92ZWRcclxuICAgICAgICAgICAgLy8gTW9kaWZpZWQtPkFkZGVkXHJcbiAgICAgICAgICAgIC8vIFJlbW92ZWQtPk1vZGlmaWVkXHJcbiAgICAgICAgICAgIC8vIE1ldGFkYXRhLT5BZGRlZFxyXG4gICAgICAgICAgICAvLyBSZW1vdmVkLT5NZXRhZGF0YVxyXG4gICAgICAgICAgICBmYWlsKCd1bnN1cHBvcnRlZCBjb21iaW5hdGlvbiBvZiBjaGFuZ2VzOiAnICtcclxuICAgICAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KGNoYW5nZSkgK1xyXG4gICAgICAgICAgICAgICAgJyBhZnRlciAnICtcclxuICAgICAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KG9sZENoYW5nZSkpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBEb2N1bWVudENoYW5nZVNldC5wcm90b3R5cGUuZ2V0Q2hhbmdlcyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgY2hhbmdlcyA9IFtdO1xyXG4gICAgICAgIHRoaXMuY2hhbmdlTWFwLmlub3JkZXJUcmF2ZXJzYWwoZnVuY3Rpb24gKGtleSwgY2hhbmdlKSB7XHJcbiAgICAgICAgICAgIGNoYW5nZXMucHVzaChjaGFuZ2UpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBjaGFuZ2VzO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBEb2N1bWVudENoYW5nZVNldDtcclxufSgpKTtcclxudmFyIFZpZXdTbmFwc2hvdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFZpZXdTbmFwc2hvdChxdWVyeSwgZG9jcywgb2xkRG9jcywgZG9jQ2hhbmdlcywgbXV0YXRlZEtleXMsIGZyb21DYWNoZSwgc3luY1N0YXRlQ2hhbmdlZCwgZXhjbHVkZXNNZXRhZGF0YUNoYW5nZXMpIHtcclxuICAgICAgICB0aGlzLnF1ZXJ5ID0gcXVlcnk7XHJcbiAgICAgICAgdGhpcy5kb2NzID0gZG9jcztcclxuICAgICAgICB0aGlzLm9sZERvY3MgPSBvbGREb2NzO1xyXG4gICAgICAgIHRoaXMuZG9jQ2hhbmdlcyA9IGRvY0NoYW5nZXM7XHJcbiAgICAgICAgdGhpcy5tdXRhdGVkS2V5cyA9IG11dGF0ZWRLZXlzO1xyXG4gICAgICAgIHRoaXMuZnJvbUNhY2hlID0gZnJvbUNhY2hlO1xyXG4gICAgICAgIHRoaXMuc3luY1N0YXRlQ2hhbmdlZCA9IHN5bmNTdGF0ZUNoYW5nZWQ7XHJcbiAgICAgICAgdGhpcy5leGNsdWRlc01ldGFkYXRhQ2hhbmdlcyA9IGV4Y2x1ZGVzTWV0YWRhdGFDaGFuZ2VzO1xyXG4gICAgfVxyXG4gICAgLyoqIFJldHVybnMgYSB2aWV3IHNuYXBzaG90IGFzIGlmIGFsbCBkb2N1bWVudHMgaW4gdGhlIHNuYXBzaG90IHdlcmUgYWRkZWQuICovXHJcbiAgICBWaWV3U25hcHNob3QuZnJvbUluaXRpYWxEb2N1bWVudHMgPSBmdW5jdGlvbiAocXVlcnksIGRvY3VtZW50cywgbXV0YXRlZEtleXMsIGZyb21DYWNoZSkge1xyXG4gICAgICAgIHZhciBjaGFuZ2VzID0gW107XHJcbiAgICAgICAgZG9jdW1lbnRzLmZvckVhY2goZnVuY3Rpb24gKGRvYykge1xyXG4gICAgICAgICAgICBjaGFuZ2VzLnB1c2goeyB0eXBlOiBDaGFuZ2VUeXBlLkFkZGVkLCBkb2M6IGRvYyB9KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gbmV3IFZpZXdTbmFwc2hvdChxdWVyeSwgZG9jdW1lbnRzLCBEb2N1bWVudFNldC5lbXB0eVNldChkb2N1bWVudHMpLCBjaGFuZ2VzLCBtdXRhdGVkS2V5cywgZnJvbUNhY2hlLCBcclxuICAgICAgICAvKiBzeW5jU3RhdGVDaGFuZ2VkPSAqLyB0cnVlLCBcclxuICAgICAgICAvKiBleGNsdWRlc01ldGFkYXRhQ2hhbmdlcz0gKi8gZmFsc2UpO1xyXG4gICAgfTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShWaWV3U25hcHNob3QucHJvdG90eXBlLCBcImhhc1BlbmRpbmdXcml0ZXNcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gIXRoaXMubXV0YXRlZEtleXMuaXNFbXB0eSgpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgVmlld1NuYXBzaG90LnByb3RvdHlwZS5pc0VxdWFsID0gZnVuY3Rpb24gKG90aGVyKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZnJvbUNhY2hlICE9PSBvdGhlci5mcm9tQ2FjaGUgfHxcclxuICAgICAgICAgICAgdGhpcy5zeW5jU3RhdGVDaGFuZ2VkICE9PSBvdGhlci5zeW5jU3RhdGVDaGFuZ2VkIHx8XHJcbiAgICAgICAgICAgICF0aGlzLm11dGF0ZWRLZXlzLmlzRXF1YWwob3RoZXIubXV0YXRlZEtleXMpIHx8XHJcbiAgICAgICAgICAgICF0aGlzLnF1ZXJ5LmlzRXF1YWwob3RoZXIucXVlcnkpIHx8XHJcbiAgICAgICAgICAgICF0aGlzLmRvY3MuaXNFcXVhbChvdGhlci5kb2NzKSB8fFxyXG4gICAgICAgICAgICAhdGhpcy5vbGREb2NzLmlzRXF1YWwob3RoZXIub2xkRG9jcykpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgY2hhbmdlcyA9IHRoaXMuZG9jQ2hhbmdlcztcclxuICAgICAgICB2YXIgb3RoZXJDaGFuZ2VzID0gb3RoZXIuZG9jQ2hhbmdlcztcclxuICAgICAgICBpZiAoY2hhbmdlcy5sZW5ndGggIT09IG90aGVyQ2hhbmdlcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNoYW5nZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKGNoYW5nZXNbaV0udHlwZSAhPT0gb3RoZXJDaGFuZ2VzW2ldLnR5cGUgfHxcclxuICAgICAgICAgICAgICAgICFjaGFuZ2VzW2ldLmRvYy5pc0VxdWFsKG90aGVyQ2hhbmdlc1tpXS5kb2MpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFZpZXdTbmFwc2hvdDtcclxufSgpKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBBbiBldmVudCBmcm9tIHRoZSBSZW1vdGVTdG9yZS4gSXQgaXMgc3BsaXQgaW50byB0YXJnZXRDaGFuZ2VzIChjaGFuZ2VzIHRvIHRoZVxyXG4gKiBzdGF0ZSBvciB0aGUgc2V0IG9mIGRvY3VtZW50cyBpbiBvdXIgd2F0Y2hlZCB0YXJnZXRzKSBhbmQgZG9jdW1lbnRVcGRhdGVzXHJcbiAqIChjaGFuZ2VzIHRvIHRoZSBhY3R1YWwgZG9jdW1lbnRzKS5cclxuICovXHJcbnZhciBSZW1vdGVFdmVudCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFJlbW90ZUV2ZW50KFxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgc25hcHNob3QgdmVyc2lvbiB0aGlzIGV2ZW50IGJyaW5ncyB1cyB1cCB0bywgb3IgTUlOIGlmIG5vdCBzZXQuXHJcbiAgICAgKi9cclxuICAgIHNuYXBzaG90VmVyc2lvbiwgXHJcbiAgICAvKipcclxuICAgICAqIEEgbWFwIGZyb20gdGFyZ2V0IHRvIGNoYW5nZXMgdG8gdGhlIHRhcmdldC4gU2VlIFRhcmdldENoYW5nZS5cclxuICAgICAqL1xyXG4gICAgdGFyZ2V0Q2hhbmdlcywgXHJcbiAgICAvKipcclxuICAgICAqIEEgc2V0IG9mIHRhcmdldHMgdGhhdCBpcyBrbm93biB0byBiZSBpbmNvbnNpc3RlbnQuIExpc3RlbnMgZm9yIHRoZXNlXHJcbiAgICAgKiB0YXJnZXRzIHNob3VsZCBiZSByZS1lc3RhYmxpc2hlZCB3aXRob3V0IHJlc3VtZSB0b2tlbnMuXHJcbiAgICAgKi9cclxuICAgIHRhcmdldE1pc21hdGNoZXMsIFxyXG4gICAgLyoqXHJcbiAgICAgKiBBIHNldCBvZiB3aGljaCBkb2N1bWVudHMgaGF2ZSBjaGFuZ2VkIG9yIGJlZW4gZGVsZXRlZCwgYWxvbmcgd2l0aCB0aGVcclxuICAgICAqIGRvYydzIG5ldyB2YWx1ZXMgKGlmIG5vdCBkZWxldGVkKS5cclxuICAgICAqL1xyXG4gICAgZG9jdW1lbnRVcGRhdGVzLCBcclxuICAgIC8qKlxyXG4gICAgICogQSBzZXQgb2Ygd2hpY2ggZG9jdW1lbnQgdXBkYXRlcyBhcmUgZHVlIG9ubHkgdG8gbGltYm8gcmVzb2x1dGlvbiB0YXJnZXRzLlxyXG4gICAgICovXHJcbiAgICByZXNvbHZlZExpbWJvRG9jdW1lbnRzKSB7XHJcbiAgICAgICAgdGhpcy5zbmFwc2hvdFZlcnNpb24gPSBzbmFwc2hvdFZlcnNpb247XHJcbiAgICAgICAgdGhpcy50YXJnZXRDaGFuZ2VzID0gdGFyZ2V0Q2hhbmdlcztcclxuICAgICAgICB0aGlzLnRhcmdldE1pc21hdGNoZXMgPSB0YXJnZXRNaXNtYXRjaGVzO1xyXG4gICAgICAgIHRoaXMuZG9jdW1lbnRVcGRhdGVzID0gZG9jdW1lbnRVcGRhdGVzO1xyXG4gICAgICAgIHRoaXMucmVzb2x2ZWRMaW1ib0RvY3VtZW50cyA9IHJlc29sdmVkTGltYm9Eb2N1bWVudHM7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEhBQ0s6IFZpZXdzIHJlcXVpcmUgUmVtb3RlRXZlbnRzIGluIG9yZGVyIHRvIGRldGVybWluZSB3aGV0aGVyIHRoZSB2aWV3IGlzXHJcbiAgICAgKiBDVVJSRU5ULCBidXQgc2Vjb25kYXJ5IHRhYnMgZG9uJ3QgcmVjZWl2ZSByZW1vdGUgZXZlbnRzLiBTbyB0aGlzIG1ldGhvZCBpc1xyXG4gICAgICogdXNlZCB0byBjcmVhdGUgYSBzeW50aGVzaXplZCBSZW1vdGVFdmVudCB0aGF0IGNhbiBiZSB1c2VkIHRvIGFwcGx5IGFcclxuICAgICAqIENVUlJFTlQgc3RhdHVzIGNoYW5nZSB0byBhIFZpZXcsIGZvciBxdWVyaWVzIGV4ZWN1dGVkIGluIGEgZGlmZmVyZW50IHRhYi5cclxuICAgICAqL1xyXG4gICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS10YWIgb25seVxyXG4gICAgUmVtb3RlRXZlbnQuY3JlYXRlU3ludGhlc2l6ZWRSZW1vdGVFdmVudEZvckN1cnJlbnRDaGFuZ2UgPSBmdW5jdGlvbiAodGFyZ2V0SWQsIGN1cnJlbnQpIHtcclxuICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgdmFyIHRhcmdldENoYW5nZXMgPSAoX2EgPSB7fSxcclxuICAgICAgICAgICAgX2FbdGFyZ2V0SWRdID0gVGFyZ2V0Q2hhbmdlLmNyZWF0ZVN5bnRoZXNpemVkVGFyZ2V0Q2hhbmdlRm9yQ3VycmVudENoYW5nZSh0YXJnZXRJZCwgY3VycmVudCksXHJcbiAgICAgICAgICAgIF9hKTtcclxuICAgICAgICByZXR1cm4gbmV3IFJlbW90ZUV2ZW50KFNuYXBzaG90VmVyc2lvbi5NSU4sIHRhcmdldENoYW5nZXMsIHRhcmdldElkU2V0KCksIG1heWJlRG9jdW1lbnRNYXAoKSwgZG9jdW1lbnRLZXlTZXQoKSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFJlbW90ZUV2ZW50O1xyXG59KCkpO1xyXG4vKipcclxuICogQSBUYXJnZXRDaGFuZ2Ugc3BlY2lmaWVzIHRoZSBzZXQgb2YgY2hhbmdlcyBmb3IgYSBzcGVjaWZpYyB0YXJnZXQgYXMgcGFydCBvZlxyXG4gKiBhIFJlbW90ZUV2ZW50LiBUaGVzZSBjaGFuZ2VzIHRyYWNrIHdoaWNoIGRvY3VtZW50cyBhcmUgYWRkZWQsIG1vZGlmaWVkIG9yXHJcbiAqIHJlbW92ZWQsIGFzIHdlbGwgYXMgdGhlIHRhcmdldCdzIHJlc3VtZSB0b2tlbiBhbmQgd2hldGhlciB0aGUgdGFyZ2V0IGlzXHJcbiAqIG1hcmtlZCBDVVJSRU5ULlxyXG4gKiBUaGUgYWN0dWFsIGNoYW5nZXMgKnRvKiBkb2N1bWVudHMgYXJlIG5vdCBwYXJ0IG9mIHRoZSBUYXJnZXRDaGFuZ2Ugc2luY2VcclxuICogZG9jdW1lbnRzIG1heSBiZSBwYXJ0IG9mIG11bHRpcGxlIHRhcmdldHMuXHJcbiAqL1xyXG52YXIgVGFyZ2V0Q2hhbmdlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gVGFyZ2V0Q2hhbmdlKFxyXG4gICAgLyoqXHJcbiAgICAgKiBBbiBvcGFxdWUsIHNlcnZlci1hc3NpZ25lZCB0b2tlbiB0aGF0IGFsbG93cyB3YXRjaGluZyBhIHF1ZXJ5IHRvIGJlIHJlc3VtZWRcclxuICAgICAqIGFmdGVyIGRpc2Nvbm5lY3Rpbmcgd2l0aG91dCByZXRyYW5zbWl0dGluZyBhbGwgdGhlIGRhdGEgdGhhdCBtYXRjaGVzIHRoZVxyXG4gICAgICogcXVlcnkuIFRoZSByZXN1bWUgdG9rZW4gZXNzZW50aWFsbHkgaWRlbnRpZmllcyBhIHBvaW50IGluIHRpbWUgZnJvbSB3aGljaFxyXG4gICAgICogdGhlIHNlcnZlciBzaG91bGQgcmVzdW1lIHNlbmRpbmcgcmVzdWx0cy5cclxuICAgICAqL1xyXG4gICAgcmVzdW1lVG9rZW4sIFxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgXCJjdXJyZW50XCIgKHN5bmNlZCkgc3RhdHVzIG9mIHRoaXMgdGFyZ2V0LiBOb3RlIHRoYXQgXCJjdXJyZW50XCJcclxuICAgICAqIGhhcyBzcGVjaWFsIG1lYW5pbmcgaW4gdGhlIFJQQyBwcm90b2NvbCB0aGF0IGltcGxpZXMgdGhhdCBhIHRhcmdldCBpc1xyXG4gICAgICogYm90aCB1cC10by1kYXRlIGFuZCBjb25zaXN0ZW50IHdpdGggdGhlIHJlc3Qgb2YgdGhlIHdhdGNoIHN0cmVhbS5cclxuICAgICAqL1xyXG4gICAgY3VycmVudCwgXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBzZXQgb2YgZG9jdW1lbnRzIHRoYXQgd2VyZSBuZXdseSBhc3NpZ25lZCB0byB0aGlzIHRhcmdldCBhcyBwYXJ0IG9mXHJcbiAgICAgKiB0aGlzIHJlbW90ZSBldmVudC5cclxuICAgICAqL1xyXG4gICAgYWRkZWREb2N1bWVudHMsIFxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgc2V0IG9mIGRvY3VtZW50cyB0aGF0IHdlcmUgYWxyZWFkeSBhc3NpZ25lZCB0byB0aGlzIHRhcmdldCBidXQgcmVjZWl2ZWRcclxuICAgICAqIGFuIHVwZGF0ZSBkdXJpbmcgdGhpcyByZW1vdGUgZXZlbnQuXHJcbiAgICAgKi9cclxuICAgIG1vZGlmaWVkRG9jdW1lbnRzLCBcclxuICAgIC8qKlxyXG4gICAgICogVGhlIHNldCBvZiBkb2N1bWVudHMgdGhhdCB3ZXJlIHJlbW92ZWQgZnJvbSB0aGlzIHRhcmdldCBhcyBwYXJ0IG9mIHRoaXNcclxuICAgICAqIHJlbW90ZSBldmVudC5cclxuICAgICAqL1xyXG4gICAgcmVtb3ZlZERvY3VtZW50cykge1xyXG4gICAgICAgIHRoaXMucmVzdW1lVG9rZW4gPSByZXN1bWVUb2tlbjtcclxuICAgICAgICB0aGlzLmN1cnJlbnQgPSBjdXJyZW50O1xyXG4gICAgICAgIHRoaXMuYWRkZWREb2N1bWVudHMgPSBhZGRlZERvY3VtZW50cztcclxuICAgICAgICB0aGlzLm1vZGlmaWVkRG9jdW1lbnRzID0gbW9kaWZpZWREb2N1bWVudHM7XHJcbiAgICAgICAgdGhpcy5yZW1vdmVkRG9jdW1lbnRzID0gcmVtb3ZlZERvY3VtZW50cztcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogVGhpcyBtZXRob2QgaXMgdXNlZCB0byBjcmVhdGUgYSBzeW50aGVzaXplZCBUYXJnZXRDaGFuZ2VzIHRoYXQgY2FuIGJlIHVzZWQgdG9cclxuICAgICAqIGFwcGx5IGEgQ1VSUkVOVCBzdGF0dXMgY2hhbmdlIHRvIGEgVmlldyAoZm9yIHF1ZXJpZXMgZXhlY3V0ZWQgaW4gYSBkaWZmZXJlbnRcclxuICAgICAqIHRhYikgb3IgZm9yIG5ldyBxdWVyaWVzICh0byByYWlzZSBzbmFwc2hvdHMgd2l0aCBjb3JyZWN0IENVUlJFTlQgc3RhdHVzKS5cclxuICAgICAqL1xyXG4gICAgVGFyZ2V0Q2hhbmdlLmNyZWF0ZVN5bnRoZXNpemVkVGFyZ2V0Q2hhbmdlRm9yQ3VycmVudENoYW5nZSA9IGZ1bmN0aW9uICh0YXJnZXRJZCwgY3VycmVudCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgVGFyZ2V0Q2hhbmdlKGVtcHR5Qnl0ZVN0cmluZygpLCBjdXJyZW50LCBkb2N1bWVudEtleVNldCgpLCBkb2N1bWVudEtleVNldCgpLCBkb2N1bWVudEtleVNldCgpKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gVGFyZ2V0Q2hhbmdlO1xyXG59KCkpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFJlcHJlc2VudHMgYSBjaGFuZ2VkIGRvY3VtZW50IGFuZCBhIGxpc3Qgb2YgdGFyZ2V0IGlkcyB0byB3aGljaCB0aGlzIGNoYW5nZVxyXG4gKiBhcHBsaWVzLlxyXG4gKlxyXG4gKiBJZiBkb2N1bWVudCBoYXMgYmVlbiBkZWxldGVkIE5vRG9jdW1lbnQgd2lsbCBiZSBwcm92aWRlZC5cclxuICovXHJcbnZhciBEb2N1bWVudFdhdGNoQ2hhbmdlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gRG9jdW1lbnRXYXRjaENoYW5nZShcclxuICAgIC8qKiBUaGUgbmV3IGRvY3VtZW50IGFwcGxpZXMgdG8gYWxsIG9mIHRoZXNlIHRhcmdldHMuICovXHJcbiAgICB1cGRhdGVkVGFyZ2V0SWRzLCBcclxuICAgIC8qKiBUaGUgbmV3IGRvY3VtZW50IGlzIHJlbW92ZWQgZnJvbSBhbGwgb2YgdGhlc2UgdGFyZ2V0cy4gKi9cclxuICAgIHJlbW92ZWRUYXJnZXRJZHMsIFxyXG4gICAgLyoqIFRoZSBrZXkgb2YgdGhlIGRvY3VtZW50IGZvciB0aGlzIGNoYW5nZS4gKi9cclxuICAgIGtleSwgXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBuZXcgZG9jdW1lbnQgb3IgTm9Eb2N1bWVudCBpZiBpdCB3YXMgZGVsZXRlZC4gSXMgbnVsbCBpZiB0aGVcclxuICAgICAqIGRvY3VtZW50IHdlbnQgb3V0IG9mIHZpZXcgd2l0aG91dCB0aGUgc2VydmVyIHNlbmRpbmcgYSBuZXcgZG9jdW1lbnQuXHJcbiAgICAgKi9cclxuICAgIG5ld0RvYykge1xyXG4gICAgICAgIHRoaXMudXBkYXRlZFRhcmdldElkcyA9IHVwZGF0ZWRUYXJnZXRJZHM7XHJcbiAgICAgICAgdGhpcy5yZW1vdmVkVGFyZ2V0SWRzID0gcmVtb3ZlZFRhcmdldElkcztcclxuICAgICAgICB0aGlzLmtleSA9IGtleTtcclxuICAgICAgICB0aGlzLm5ld0RvYyA9IG5ld0RvYztcclxuICAgIH1cclxuICAgIHJldHVybiBEb2N1bWVudFdhdGNoQ2hhbmdlO1xyXG59KCkpO1xyXG52YXIgRXhpc3RlbmNlRmlsdGVyQ2hhbmdlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gRXhpc3RlbmNlRmlsdGVyQ2hhbmdlKHRhcmdldElkLCBleGlzdGVuY2VGaWx0ZXIpIHtcclxuICAgICAgICB0aGlzLnRhcmdldElkID0gdGFyZ2V0SWQ7XHJcbiAgICAgICAgdGhpcy5leGlzdGVuY2VGaWx0ZXIgPSBleGlzdGVuY2VGaWx0ZXI7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gRXhpc3RlbmNlRmlsdGVyQ2hhbmdlO1xyXG59KCkpO1xyXG52YXIgV2F0Y2hUYXJnZXRDaGFuZ2VTdGF0ZTtcclxuKGZ1bmN0aW9uIChXYXRjaFRhcmdldENoYW5nZVN0YXRlKSB7XHJcbiAgICBXYXRjaFRhcmdldENoYW5nZVN0YXRlW1dhdGNoVGFyZ2V0Q2hhbmdlU3RhdGVbXCJOb0NoYW5nZVwiXSA9IDBdID0gXCJOb0NoYW5nZVwiO1xyXG4gICAgV2F0Y2hUYXJnZXRDaGFuZ2VTdGF0ZVtXYXRjaFRhcmdldENoYW5nZVN0YXRlW1wiQWRkZWRcIl0gPSAxXSA9IFwiQWRkZWRcIjtcclxuICAgIFdhdGNoVGFyZ2V0Q2hhbmdlU3RhdGVbV2F0Y2hUYXJnZXRDaGFuZ2VTdGF0ZVtcIlJlbW92ZWRcIl0gPSAyXSA9IFwiUmVtb3ZlZFwiO1xyXG4gICAgV2F0Y2hUYXJnZXRDaGFuZ2VTdGF0ZVtXYXRjaFRhcmdldENoYW5nZVN0YXRlW1wiQ3VycmVudFwiXSA9IDNdID0gXCJDdXJyZW50XCI7XHJcbiAgICBXYXRjaFRhcmdldENoYW5nZVN0YXRlW1dhdGNoVGFyZ2V0Q2hhbmdlU3RhdGVbXCJSZXNldFwiXSA9IDRdID0gXCJSZXNldFwiO1xyXG59KShXYXRjaFRhcmdldENoYW5nZVN0YXRlIHx8IChXYXRjaFRhcmdldENoYW5nZVN0YXRlID0ge30pKTtcclxudmFyIFdhdGNoVGFyZ2V0Q2hhbmdlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gV2F0Y2hUYXJnZXRDaGFuZ2UoXHJcbiAgICAvKiogV2hhdCBraW5kIG9mIGNoYW5nZSBvY2N1cnJlZCB0byB0aGUgd2F0Y2ggdGFyZ2V0LiAqL1xyXG4gICAgc3RhdGUsIFxyXG4gICAgLyoqIFRoZSB0YXJnZXQgSURzIHRoYXQgd2VyZSBhZGRlZC9yZW1vdmVkL3NldC4gKi9cclxuICAgIHRhcmdldElkcywgXHJcbiAgICAvKipcclxuICAgICAqIEFuIG9wYXF1ZSwgc2VydmVyLWFzc2lnbmVkIHRva2VuIHRoYXQgYWxsb3dzIHdhdGNoaW5nIGEgdGFyZ2V0IHRvIGJlXHJcbiAgICAgKiByZXN1bWVkIGFmdGVyIGRpc2Nvbm5lY3Rpbmcgd2l0aG91dCByZXRyYW5zbWl0dGluZyBhbGwgdGhlIGRhdGEgdGhhdFxyXG4gICAgICogbWF0Y2hlcyB0aGUgdGFyZ2V0LiBUaGUgcmVzdW1lIHRva2VuIGVzc2VudGlhbGx5IGlkZW50aWZpZXMgYSBwb2ludCBpblxyXG4gICAgICogdGltZSBmcm9tIHdoaWNoIHRoZSBzZXJ2ZXIgc2hvdWxkIHJlc3VtZSBzZW5kaW5nIHJlc3VsdHMuXHJcbiAgICAgKi9cclxuICAgIHJlc3VtZVRva2VuLCBcclxuICAgIC8qKiBBbiBSUEMgZXJyb3IgaW5kaWNhdGluZyB3aHkgdGhlIHdhdGNoIGZhaWxlZC4gKi9cclxuICAgIGNhdXNlKSB7XHJcbiAgICAgICAgaWYgKHJlc3VtZVRva2VuID09PSB2b2lkIDApIHsgcmVzdW1lVG9rZW4gPSBlbXB0eUJ5dGVTdHJpbmcoKTsgfVxyXG4gICAgICAgIGlmIChjYXVzZSA9PT0gdm9pZCAwKSB7IGNhdXNlID0gbnVsbDsgfVxyXG4gICAgICAgIHRoaXMuc3RhdGUgPSBzdGF0ZTtcclxuICAgICAgICB0aGlzLnRhcmdldElkcyA9IHRhcmdldElkcztcclxuICAgICAgICB0aGlzLnJlc3VtZVRva2VuID0gcmVzdW1lVG9rZW47XHJcbiAgICAgICAgdGhpcy5jYXVzZSA9IGNhdXNlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIFdhdGNoVGFyZ2V0Q2hhbmdlO1xyXG59KCkpO1xyXG4vKiogVHJhY2tzIHRoZSBpbnRlcm5hbCBzdGF0ZSBvZiBhIFdhdGNoIHRhcmdldC4gKi9cclxudmFyIFRhcmdldFN0YXRlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gVGFyZ2V0U3RhdGUoKSB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVGhlIG51bWJlciBvZiBwZW5kaW5nIHJlc3BvbnNlcyAoYWRkcyBvciByZW1vdmVzKSB0aGF0IHdlIGFyZSB3YWl0aW5nIG9uLlxyXG4gICAgICAgICAqIFdlIG9ubHkgY29uc2lkZXIgdGFyZ2V0cyBhY3RpdmUgdGhhdCBoYXZlIG5vIHBlbmRpbmcgcmVzcG9uc2VzLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMucGVuZGluZ1Jlc3BvbnNlcyA9IDA7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogS2VlcHMgdHJhY2sgb2YgdGhlIGRvY3VtZW50IGNoYW5nZXMgc2luY2UgdGhlIGxhc3QgcmFpc2VkIHNuYXBzaG90LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogVGhlc2UgY2hhbmdlcyBhcmUgY29udGludW91c2x5IHVwZGF0ZWQgYXMgd2UgcmVjZWl2ZSBkb2N1bWVudCB1cGRhdGVzIGFuZFxyXG4gICAgICAgICAqIGFsd2F5cyByZWZsZWN0IHRoZSBjdXJyZW50IHNldCBvZiBjaGFuZ2VzIGFnYWluc3QgdGhlIGxhc3QgaXNzdWVkIHNuYXBzaG90LlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuZG9jdW1lbnRDaGFuZ2VzID0gc25hcHNob3RDaGFuZ2VzTWFwKCk7XHJcbiAgICAgICAgLyoqIFNlZSBwdWJsaWMgZ2V0dGVycyBmb3IgZXhwbGFuYXRpb25zIG9mIHRoZXNlIGZpZWxkcy4gKi9cclxuICAgICAgICB0aGlzLl9yZXN1bWVUb2tlbiA9IGVtcHR5Qnl0ZVN0cmluZygpO1xyXG4gICAgICAgIHRoaXMuX2N1cnJlbnQgPSBmYWxzZTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBXaGV0aGVyIHRoaXMgdGFyZ2V0IHN0YXRlIHNob3VsZCBiZSBpbmNsdWRlZCBpbiB0aGUgbmV4dCBzbmFwc2hvdC4gV2VcclxuICAgICAgICAgKiBpbml0aWFsaXplIHRvIHRydWUgc28gdGhhdCBuZXdseS1hZGRlZCB0YXJnZXRzIGFyZSBpbmNsdWRlZCBpbiB0aGUgbmV4dFxyXG4gICAgICAgICAqIFJlbW90ZUV2ZW50LlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuX2hhc1BlbmRpbmdDaGFuZ2VzID0gdHJ1ZTtcclxuICAgIH1cclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShUYXJnZXRTdGF0ZS5wcm90b3R5cGUsIFwiY3VycmVudFwiLCB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogV2hldGhlciB0aGlzIHRhcmdldCBoYXMgYmVlbiBtYXJrZWQgJ2N1cnJlbnQnLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogJ0N1cnJlbnQnIGhhcyBzcGVjaWFsIG1lYW5pbmcgaW4gdGhlIFJQQyBwcm90b2NvbDogSXQgaW1wbGllcyB0aGF0IHRoZVxyXG4gICAgICAgICAqIFdhdGNoIGJhY2tlbmQgaGFzIHNlbnQgdXMgYWxsIGNoYW5nZXMgdXAgdG8gdGhlIHBvaW50IGF0IHdoaWNoIHRoZSB0YXJnZXRcclxuICAgICAgICAgKiB3YXMgYWRkZWQgYW5kIHRoYXQgdGhlIHRhcmdldCBpcyBjb25zaXN0ZW50IHdpdGggdGhlIHJlc3Qgb2YgdGhlIHdhdGNoXHJcbiAgICAgICAgICogc3RyZWFtLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fY3VycmVudDtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShUYXJnZXRTdGF0ZS5wcm90b3R5cGUsIFwicmVzdW1lVG9rZW5cIiwge1xyXG4gICAgICAgIC8qKiBUaGUgbGFzdCByZXN1bWUgdG9rZW4gc2VudCB0byB1cyBmb3IgdGhpcyB0YXJnZXQuICovXHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9yZXN1bWVUb2tlbjtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShUYXJnZXRTdGF0ZS5wcm90b3R5cGUsIFwiaXNQZW5kaW5nXCIsIHtcclxuICAgICAgICAvKiogV2hldGhlciB0aGlzIHRhcmdldCBoYXMgcGVuZGluZyB0YXJnZXQgYWRkcyBvciB0YXJnZXQgcmVtb3Zlcy4gKi9cclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucGVuZGluZ1Jlc3BvbnNlcyAhPT0gMDtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShUYXJnZXRTdGF0ZS5wcm90b3R5cGUsIFwiaGFzUGVuZGluZ0NoYW5nZXNcIiwge1xyXG4gICAgICAgIC8qKiBXaGV0aGVyIHdlIGhhdmUgbW9kaWZpZWQgYW55IHN0YXRlIHRoYXQgc2hvdWxkIHRyaWdnZXIgYSBzbmFwc2hvdC4gKi9cclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2hhc1BlbmRpbmdDaGFuZ2VzO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgLyoqXHJcbiAgICAgKiBBcHBsaWVzIHRoZSByZXN1bWUgdG9rZW4gdG8gdGhlIFRhcmdldENoYW5nZSwgYnV0IG9ubHkgd2hlbiBpdCBoYXMgYSBuZXdcclxuICAgICAqIHZhbHVlLiBFbXB0eSByZXN1bWVUb2tlbnMgYXJlIGRpc2NhcmRlZC5cclxuICAgICAqL1xyXG4gICAgVGFyZ2V0U3RhdGUucHJvdG90eXBlLnVwZGF0ZVJlc3VtZVRva2VuID0gZnVuY3Rpb24gKHJlc3VtZVRva2VuKSB7XHJcbiAgICAgICAgaWYgKHJlc3VtZVRva2VuLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgdGhpcy5faGFzUGVuZGluZ0NoYW5nZXMgPSB0cnVlO1xyXG4gICAgICAgICAgICB0aGlzLl9yZXN1bWVUb2tlbiA9IHJlc3VtZVRva2VuO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYSB0YXJnZXQgY2hhbmdlIGZyb20gdGhlIGN1cnJlbnQgc2V0IG9mIGNoYW5nZXMuXHJcbiAgICAgKlxyXG4gICAgICogVG8gcmVzZXQgdGhlIGRvY3VtZW50IGNoYW5nZXMgYWZ0ZXIgcmFpc2luZyB0aGlzIHNuYXBzaG90LCBjYWxsXHJcbiAgICAgKiBgY2xlYXJQZW5kaW5nQ2hhbmdlcygpYC5cclxuICAgICAqL1xyXG4gICAgVGFyZ2V0U3RhdGUucHJvdG90eXBlLnRvVGFyZ2V0Q2hhbmdlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBhZGRlZERvY3VtZW50cyA9IGRvY3VtZW50S2V5U2V0KCk7XHJcbiAgICAgICAgdmFyIG1vZGlmaWVkRG9jdW1lbnRzID0gZG9jdW1lbnRLZXlTZXQoKTtcclxuICAgICAgICB2YXIgcmVtb3ZlZERvY3VtZW50cyA9IGRvY3VtZW50S2V5U2V0KCk7XHJcbiAgICAgICAgdGhpcy5kb2N1bWVudENoYW5nZXMuZm9yRWFjaChmdW5jdGlvbiAoa2V5LCBjaGFuZ2VUeXBlKSB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAoY2hhbmdlVHlwZSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSBDaGFuZ2VUeXBlLkFkZGVkOlxyXG4gICAgICAgICAgICAgICAgICAgIGFkZGVkRG9jdW1lbnRzID0gYWRkZWREb2N1bWVudHMuYWRkKGtleSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIENoYW5nZVR5cGUuTW9kaWZpZWQ6XHJcbiAgICAgICAgICAgICAgICAgICAgbW9kaWZpZWREb2N1bWVudHMgPSBtb2RpZmllZERvY3VtZW50cy5hZGQoa2V5KTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgQ2hhbmdlVHlwZS5SZW1vdmVkOlxyXG4gICAgICAgICAgICAgICAgICAgIHJlbW92ZWREb2N1bWVudHMgPSByZW1vdmVkRG9jdW1lbnRzLmFkZChrZXkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICBmYWlsKCdFbmNvdW50ZXJlZCBpbnZhbGlkIGNoYW5nZSB0eXBlOiAnICsgY2hhbmdlVHlwZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gbmV3IFRhcmdldENoYW5nZSh0aGlzLl9yZXN1bWVUb2tlbiwgdGhpcy5fY3VycmVudCwgYWRkZWREb2N1bWVudHMsIG1vZGlmaWVkRG9jdW1lbnRzLCByZW1vdmVkRG9jdW1lbnRzKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJlc2V0cyB0aGUgZG9jdW1lbnQgY2hhbmdlcyBhbmQgc2V0cyBgaGFzUGVuZGluZ0NoYW5nZXNgIHRvIGZhbHNlLlxyXG4gICAgICovXHJcbiAgICBUYXJnZXRTdGF0ZS5wcm90b3R5cGUuY2xlYXJQZW5kaW5nQ2hhbmdlcyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLl9oYXNQZW5kaW5nQ2hhbmdlcyA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuZG9jdW1lbnRDaGFuZ2VzID0gc25hcHNob3RDaGFuZ2VzTWFwKCk7XHJcbiAgICB9O1xyXG4gICAgVGFyZ2V0U3RhdGUucHJvdG90eXBlLmFkZERvY3VtZW50Q2hhbmdlID0gZnVuY3Rpb24gKGtleSwgY2hhbmdlVHlwZSkge1xyXG4gICAgICAgIHRoaXMuX2hhc1BlbmRpbmdDaGFuZ2VzID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLmRvY3VtZW50Q2hhbmdlcyA9IHRoaXMuZG9jdW1lbnRDaGFuZ2VzLmluc2VydChrZXksIGNoYW5nZVR5cGUpO1xyXG4gICAgfTtcclxuICAgIFRhcmdldFN0YXRlLnByb3RvdHlwZS5yZW1vdmVEb2N1bWVudENoYW5nZSA9IGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICB0aGlzLl9oYXNQZW5kaW5nQ2hhbmdlcyA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5kb2N1bWVudENoYW5nZXMgPSB0aGlzLmRvY3VtZW50Q2hhbmdlcy5yZW1vdmUoa2V5KTtcclxuICAgIH07XHJcbiAgICBUYXJnZXRTdGF0ZS5wcm90b3R5cGUucmVjb3JkUGVuZGluZ1RhcmdldFJlcXVlc3QgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5wZW5kaW5nUmVzcG9uc2VzICs9IDE7XHJcbiAgICB9O1xyXG4gICAgVGFyZ2V0U3RhdGUucHJvdG90eXBlLnJlY29yZFRhcmdldFJlc3BvbnNlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMucGVuZGluZ1Jlc3BvbnNlcyAtPSAxO1xyXG4gICAgfTtcclxuICAgIFRhcmdldFN0YXRlLnByb3RvdHlwZS5tYXJrQ3VycmVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLl9oYXNQZW5kaW5nQ2hhbmdlcyA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5fY3VycmVudCA9IHRydWU7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFRhcmdldFN0YXRlO1xyXG59KCkpO1xyXG52YXIgTE9HX1RBRyQ3ID0gJ1dhdGNoQ2hhbmdlQWdncmVnYXRvcic7XHJcbi8qKlxyXG4gKiBBIGhlbHBlciBjbGFzcyB0byBhY2N1bXVsYXRlIHdhdGNoIGNoYW5nZXMgaW50byBhIFJlbW90ZUV2ZW50LlxyXG4gKi9cclxudmFyIFdhdGNoQ2hhbmdlQWdncmVnYXRvciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFdhdGNoQ2hhbmdlQWdncmVnYXRvcihtZXRhZGF0YVByb3ZpZGVyKSB7XHJcbiAgICAgICAgdGhpcy5tZXRhZGF0YVByb3ZpZGVyID0gbWV0YWRhdGFQcm92aWRlcjtcclxuICAgICAgICAvKiogVGhlIGludGVybmFsIHN0YXRlIG9mIGFsbCB0cmFja2VkIHRhcmdldHMuICovXHJcbiAgICAgICAgdGhpcy50YXJnZXRTdGF0ZXMgPSB7fTtcclxuICAgICAgICAvKiogS2VlcHMgdHJhY2sgb2YgdGhlIGRvY3VtZW50cyB0byB1cGRhdGUgc2luY2UgdGhlIGxhc3QgcmFpc2VkIHNuYXBzaG90LiAqL1xyXG4gICAgICAgIHRoaXMucGVuZGluZ0RvY3VtZW50VXBkYXRlcyA9IG1heWJlRG9jdW1lbnRNYXAoKTtcclxuICAgICAgICAvKiogQSBtYXBwaW5nIG9mIGRvY3VtZW50IGtleXMgdG8gdGhlaXIgc2V0IG9mIHRhcmdldCBJRHMuICovXHJcbiAgICAgICAgdGhpcy5wZW5kaW5nRG9jdW1lbnRUYXJnZXRNYXBwaW5nID0gZG9jdW1lbnRUYXJnZXRNYXAoKTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBBIGxpc3Qgb2YgdGFyZ2V0cyB3aXRoIGV4aXN0ZW5jZSBmaWx0ZXIgbWlzbWF0Y2hlcy4gVGhlc2UgdGFyZ2V0cyBhcmVcclxuICAgICAgICAgKiBrbm93biB0byBiZSBpbmNvbnNpc3RlbnQgYW5kIHRoZWlyIGxpc3RlbnMgbmVlZHMgdG8gYmUgcmUtZXN0YWJsaXNoZWQgYnlcclxuICAgICAgICAgKiBSZW1vdGVTdG9yZS5cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLnBlbmRpbmdUYXJnZXRSZXNldHMgPSBuZXcgU29ydGVkU2V0KHByaW1pdGl2ZUNvbXBhcmF0b3IpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBQcm9jZXNzZXMgYW5kIGFkZHMgdGhlIERvY3VtZW50V2F0Y2hDaGFuZ2UgdG8gdGhlIGN1cnJlbnQgc2V0IG9mIGNoYW5nZXMuXHJcbiAgICAgKi9cclxuICAgIFdhdGNoQ2hhbmdlQWdncmVnYXRvci5wcm90b3R5cGUuaGFuZGxlRG9jdW1lbnRDaGFuZ2UgPSBmdW5jdGlvbiAoZG9jQ2hhbmdlKSB7XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IGRvY0NoYW5nZS51cGRhdGVkVGFyZ2V0SWRzOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICB2YXIgdGFyZ2V0SWQgPSBfYVtfaV07XHJcbiAgICAgICAgICAgIGlmIChkb2NDaGFuZ2UubmV3RG9jIGluc3RhbmNlb2YgRG9jdW1lbnQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYWRkRG9jdW1lbnRUb1RhcmdldCh0YXJnZXRJZCwgZG9jQ2hhbmdlLm5ld0RvYyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoZG9jQ2hhbmdlLm5ld0RvYyBpbnN0YW5jZW9mIE5vRG9jdW1lbnQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlRG9jdW1lbnRGcm9tVGFyZ2V0KHRhcmdldElkLCBkb2NDaGFuZ2Uua2V5LCBkb2NDaGFuZ2UubmV3RG9jKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKHZhciBfYiA9IDAsIF9jID0gZG9jQ2hhbmdlLnJlbW92ZWRUYXJnZXRJZHM7IF9iIDwgX2MubGVuZ3RoOyBfYisrKSB7XHJcbiAgICAgICAgICAgIHZhciB0YXJnZXRJZCA9IF9jW19iXTtcclxuICAgICAgICAgICAgdGhpcy5yZW1vdmVEb2N1bWVudEZyb21UYXJnZXQodGFyZ2V0SWQsIGRvY0NoYW5nZS5rZXksIGRvY0NoYW5nZS5uZXdEb2MpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKiogUHJvY2Vzc2VzIGFuZCBhZGRzIHRoZSBXYXRjaFRhcmdldENoYW5nZSB0byB0aGUgY3VycmVudCBzZXQgb2YgY2hhbmdlcy4gKi9cclxuICAgIFdhdGNoQ2hhbmdlQWdncmVnYXRvci5wcm90b3R5cGUuaGFuZGxlVGFyZ2V0Q2hhbmdlID0gZnVuY3Rpb24gKHRhcmdldENoYW5nZSkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5mb3JFYWNoVGFyZ2V0KHRhcmdldENoYW5nZSwgZnVuY3Rpb24gKHRhcmdldElkKSB7XHJcbiAgICAgICAgICAgIHZhciB0YXJnZXRTdGF0ZSA9IF90aGlzLmVuc3VyZVRhcmdldFN0YXRlKHRhcmdldElkKTtcclxuICAgICAgICAgICAgc3dpdGNoICh0YXJnZXRDaGFuZ2Uuc3RhdGUpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgV2F0Y2hUYXJnZXRDaGFuZ2VTdGF0ZS5Ob0NoYW5nZTpcclxuICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMuaXNBY3RpdmVUYXJnZXQodGFyZ2V0SWQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldFN0YXRlLnVwZGF0ZVJlc3VtZVRva2VuKHRhcmdldENoYW5nZS5yZXN1bWVUb2tlbik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBXYXRjaFRhcmdldENoYW5nZVN0YXRlLkFkZGVkOlxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFdlIG5lZWQgdG8gZGVjcmVtZW50IHRoZSBudW1iZXIgb2YgcGVuZGluZyBhY2tzIG5lZWRlZCBmcm9tIHdhdGNoXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gZm9yIHRoaXMgdGFyZ2V0SWQuXHJcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0U3RhdGUucmVjb3JkVGFyZ2V0UmVzcG9uc2UoKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXRhcmdldFN0YXRlLmlzUGVuZGluZykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBXZSBoYXZlIGEgZnJlc2hseSBhZGRlZCB0YXJnZXQsIHNvIHdlIG5lZWQgdG8gcmVzZXQgYW55IHN0YXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoYXQgd2UgaGFkIHByZXZpb3VzbHkuIFRoaXMgY2FuIGhhcHBlbiBlLmcuIHdoZW4gcmVtb3ZlIGFuZCBhZGRcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYmFjayBhIHRhcmdldCBmb3IgZXhpc3RlbmNlIGZpbHRlciBtaXNtYXRjaGVzLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRTdGF0ZS5jbGVhclBlbmRpbmdDaGFuZ2VzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldFN0YXRlLnVwZGF0ZVJlc3VtZVRva2VuKHRhcmdldENoYW5nZS5yZXN1bWVUb2tlbik7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFdhdGNoVGFyZ2V0Q2hhbmdlU3RhdGUuUmVtb3ZlZDpcclxuICAgICAgICAgICAgICAgICAgICAvLyBXZSBuZWVkIHRvIGtlZXAgdHJhY2sgb2YgcmVtb3ZlZCB0YXJnZXRzIHRvIHdlIGNhbiBwb3N0LWZpbHRlciBhbmRcclxuICAgICAgICAgICAgICAgICAgICAvLyByZW1vdmUgYW55IHRhcmdldCBjaGFuZ2VzLlxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFdlIG5lZWQgdG8gZGVjcmVtZW50IHRoZSBudW1iZXIgb2YgcGVuZGluZyBhY2tzIG5lZWRlZCBmcm9tIHdhdGNoXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gZm9yIHRoaXMgdGFyZ2V0SWQuXHJcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0U3RhdGUucmVjb3JkVGFyZ2V0UmVzcG9uc2UoKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXRhcmdldFN0YXRlLmlzUGVuZGluZykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5yZW1vdmVUYXJnZXQodGFyZ2V0SWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBhc3NlcnQoIXRhcmdldENoYW5nZS5jYXVzZSwgJ1dhdGNoQ2hhbmdlQWdncmVnYXRvciBkb2VzIG5vdCBoYW5kbGUgZXJyb3JlZCB0YXJnZXRzJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFdhdGNoVGFyZ2V0Q2hhbmdlU3RhdGUuQ3VycmVudDpcclxuICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMuaXNBY3RpdmVUYXJnZXQodGFyZ2V0SWQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldFN0YXRlLm1hcmtDdXJyZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldFN0YXRlLnVwZGF0ZVJlc3VtZVRva2VuKHRhcmdldENoYW5nZS5yZXN1bWVUb2tlbik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBXYXRjaFRhcmdldENoYW5nZVN0YXRlLlJlc2V0OlxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChfdGhpcy5pc0FjdGl2ZVRhcmdldCh0YXJnZXRJZCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVzZXQgdGhlIHRhcmdldCBhbmQgc3ludGhlc2l6ZXMgcmVtb3ZlcyBmb3IgYWxsIGV4aXN0aW5nXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRvY3VtZW50cy4gVGhlIGJhY2tlbmQgd2lsbCByZS1hZGQgYW55IGRvY3VtZW50cyB0aGF0IHN0aWxsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIG1hdGNoIHRoZSB0YXJnZXQgYmVmb3JlIGl0IHNlbmRzIHRoZSBuZXh0IGdsb2JhbCBzbmFwc2hvdC5cclxuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMucmVzZXRUYXJnZXQodGFyZ2V0SWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRTdGF0ZS51cGRhdGVSZXN1bWVUb2tlbih0YXJnZXRDaGFuZ2UucmVzdW1lVG9rZW4pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgZmFpbCgnVW5rbm93biB0YXJnZXQgd2F0Y2ggY2hhbmdlIHN0YXRlOiAnICsgdGFyZ2V0Q2hhbmdlLnN0YXRlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogSXRlcmF0ZXMgb3ZlciBhbGwgdGFyZ2V0SWRzIHRoYXQgdGhlIHdhdGNoIGNoYW5nZSBhcHBsaWVzIHRvOiBlaXRoZXIgdGhlXHJcbiAgICAgKiB0YXJnZXRJZHMgZXhwbGljaXRseSBsaXN0ZWQgaW4gdGhlIGNoYW5nZSBvciB0aGUgdGFyZ2V0SWRzIG9mIGFsbCBjdXJyZW50bHlcclxuICAgICAqIGFjdGl2ZSB0YXJnZXRzLlxyXG4gICAgICovXHJcbiAgICBXYXRjaENoYW5nZUFnZ3JlZ2F0b3IucHJvdG90eXBlLmZvckVhY2hUYXJnZXQgPSBmdW5jdGlvbiAodGFyZ2V0Q2hhbmdlLCBmbikge1xyXG4gICAgICAgIGlmICh0YXJnZXRDaGFuZ2UudGFyZ2V0SWRzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgdGFyZ2V0Q2hhbmdlLnRhcmdldElkcy5mb3JFYWNoKGZuKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGZvckVhY2hOdW1iZXIodGhpcy50YXJnZXRTdGF0ZXMsIGZuKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBIYW5kbGVzIGV4aXN0ZW5jZSBmaWx0ZXJzIGFuZCBzeW50aGVzaXplcyBkZWxldGVzIGZvciBmaWx0ZXIgbWlzbWF0Y2hlcy5cclxuICAgICAqIFRhcmdldHMgdGhhdCBhcmUgaW52YWxpZGF0ZWQgYnkgZmlsdGVyIG1pc21hdGNoZXMgYXJlIGFkZGVkIHRvXHJcbiAgICAgKiBgcGVuZGluZ1RhcmdldFJlc2V0c2AuXHJcbiAgICAgKi9cclxuICAgIFdhdGNoQ2hhbmdlQWdncmVnYXRvci5wcm90b3R5cGUuaGFuZGxlRXhpc3RlbmNlRmlsdGVyID0gZnVuY3Rpb24gKHdhdGNoQ2hhbmdlKSB7XHJcbiAgICAgICAgdmFyIHRhcmdldElkID0gd2F0Y2hDaGFuZ2UudGFyZ2V0SWQ7XHJcbiAgICAgICAgdmFyIGV4cGVjdGVkQ291bnQgPSB3YXRjaENoYW5nZS5leGlzdGVuY2VGaWx0ZXIuY291bnQ7XHJcbiAgICAgICAgdmFyIHRhcmdldERhdGEgPSB0aGlzLnRhcmdldERhdGFGb3JBY3RpdmVUYXJnZXQodGFyZ2V0SWQpO1xyXG4gICAgICAgIGlmICh0YXJnZXREYXRhKSB7XHJcbiAgICAgICAgICAgIHZhciB0YXJnZXQgPSB0YXJnZXREYXRhLnRhcmdldDtcclxuICAgICAgICAgICAgaWYgKHRhcmdldC5pc0RvY3VtZW50UXVlcnkoKSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGV4cGVjdGVkQ291bnQgPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBUaGUgZXhpc3RlbmNlIGZpbHRlciB0b2xkIHVzIHRoZSBkb2N1bWVudCBkb2VzIG5vdCBleGlzdC4gV2UgZGVkdWNlXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhhdCB0aGlzIGRvY3VtZW50IGRvZXMgbm90IGV4aXN0IGFuZCBhcHBseSBhIGRlbGV0ZWQgZG9jdW1lbnQgdG9cclxuICAgICAgICAgICAgICAgICAgICAvLyBvdXIgdXBkYXRlcy4gV2l0aG91dCBhcHBseWluZyB0aGlzIGRlbGV0ZWQgZG9jdW1lbnQgdGhlcmUgbWlnaHQgYmVcclxuICAgICAgICAgICAgICAgICAgICAvLyBhbm90aGVyIHF1ZXJ5IHRoYXQgd2lsbCByYWlzZSB0aGlzIGRvY3VtZW50IGFzIHBhcnQgb2YgYSBzbmFwc2hvdFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIHVudGlsIGl0IGlzIHJlc29sdmVkLCBlc3NlbnRpYWxseSBleHBvc2luZyBpbmNvbnNpc3RlbmN5IGJldHdlZW5cclxuICAgICAgICAgICAgICAgICAgICAvLyBxdWVyaWVzLlxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBrZXkgPSBuZXcgRG9jdW1lbnRLZXkodGFyZ2V0LnBhdGgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlRG9jdW1lbnRGcm9tVGFyZ2V0KHRhcmdldElkLCBrZXksIG5ldyBOb0RvY3VtZW50KGtleSwgU25hcHNob3RWZXJzaW9uLmZvckRlbGV0ZWREb2MoKSkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXNzZXJ0KGV4cGVjdGVkQ291bnQgPT09IDEsICdTaW5nbGUgZG9jdW1lbnQgZXhpc3RlbmNlIGZpbHRlciB3aXRoIGNvdW50OiAnICsgZXhwZWN0ZWRDb3VudCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgY3VycmVudFNpemUgPSB0aGlzLmdldEN1cnJlbnREb2N1bWVudENvdW50Rm9yVGFyZ2V0KHRhcmdldElkKTtcclxuICAgICAgICAgICAgICAgIGlmIChjdXJyZW50U2l6ZSAhPT0gZXhwZWN0ZWRDb3VudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIEV4aXN0ZW5jZSBmaWx0ZXIgbWlzbWF0Y2g6IFdlIHJlc2V0IHRoZSBtYXBwaW5nIGFuZCByYWlzZSBhIG5ld1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHNuYXBzaG90IHdpdGggYGlzRnJvbUNhY2hlOnRydWVgLlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVzZXRUYXJnZXQodGFyZ2V0SWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGVuZGluZ1RhcmdldFJlc2V0cyA9IHRoaXMucGVuZGluZ1RhcmdldFJlc2V0cy5hZGQodGFyZ2V0SWQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQ29udmVydHMgdGhlIGN1cnJlbnRseSBhY2N1bXVsYXRlZCBzdGF0ZSBpbnRvIGEgcmVtb3RlIGV2ZW50IGF0IHRoZVxyXG4gICAgICogcHJvdmlkZWQgc25hcHNob3QgdmVyc2lvbi4gUmVzZXRzIHRoZSBhY2N1bXVsYXRlZCBjaGFuZ2VzIGJlZm9yZSByZXR1cm5pbmcuXHJcbiAgICAgKi9cclxuICAgIFdhdGNoQ2hhbmdlQWdncmVnYXRvci5wcm90b3R5cGUuY3JlYXRlUmVtb3RlRXZlbnQgPSBmdW5jdGlvbiAoc25hcHNob3RWZXJzaW9uKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgdGFyZ2V0Q2hhbmdlcyA9IHt9O1xyXG4gICAgICAgIGZvckVhY2hOdW1iZXIodGhpcy50YXJnZXRTdGF0ZXMsIGZ1bmN0aW9uICh0YXJnZXRJZCwgdGFyZ2V0U3RhdGUpIHtcclxuICAgICAgICAgICAgdmFyIHRhcmdldERhdGEgPSBfdGhpcy50YXJnZXREYXRhRm9yQWN0aXZlVGFyZ2V0KHRhcmdldElkKTtcclxuICAgICAgICAgICAgaWYgKHRhcmdldERhdGEpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0YXJnZXRTdGF0ZS5jdXJyZW50ICYmIHRhcmdldERhdGEudGFyZ2V0LmlzRG9jdW1lbnRRdWVyeSgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gRG9jdW1lbnQgcXVlcmllcyBmb3IgZG9jdW1lbnQgdGhhdCBkb24ndCBleGlzdCBjYW4gcHJvZHVjZSBhbiBlbXB0eVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIHJlc3VsdCBzZXQuIFRvIHVwZGF0ZSBvdXIgbG9jYWwgY2FjaGUsIHdlIHN5bnRoZXNpemUgYSBkb2N1bWVudFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGRlbGV0ZSBpZiB3ZSBoYXZlIG5vdCBwcmV2aW91c2x5IHJlY2VpdmVkIHRoZSBkb2N1bWVudC4gVGhpc1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHJlc29sdmVzIHRoZSBsaW1ibyBzdGF0ZSBvZiB0aGUgZG9jdW1lbnQsIHJlbW92aW5nIGl0IGZyb21cclxuICAgICAgICAgICAgICAgICAgICAvLyBsaW1ib0RvY3VtZW50UmVmcy5cclxuICAgICAgICAgICAgICAgICAgICAvL1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFRPRE8oZGltb25kKTogSWRlYWxseSB3ZSB3b3VsZCBoYXZlIGFuIGV4cGxpY2l0IGxvb2t1cCB0YXJnZXRcclxuICAgICAgICAgICAgICAgICAgICAvLyBpbnN0ZWFkIHJlc3VsdGluZyBpbiBhbiBleHBsaWNpdCBkZWxldGUgbWVzc2FnZSBhbmQgd2UgY291bGRcclxuICAgICAgICAgICAgICAgICAgICAvLyByZW1vdmUgdGhpcyBzcGVjaWFsIGxvZ2ljLlxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBrZXkgPSBuZXcgRG9jdW1lbnRLZXkodGFyZ2V0RGF0YS50YXJnZXQucGF0aCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLnBlbmRpbmdEb2N1bWVudFVwZGF0ZXMuZ2V0KGtleSkgPT09IG51bGwgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgIV90aGlzLnRhcmdldENvbnRhaW5zRG9jdW1lbnQodGFyZ2V0SWQsIGtleSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMucmVtb3ZlRG9jdW1lbnRGcm9tVGFyZ2V0KHRhcmdldElkLCBrZXksIG5ldyBOb0RvY3VtZW50KGtleSwgc25hcHNob3RWZXJzaW9uKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKHRhcmdldFN0YXRlLmhhc1BlbmRpbmdDaGFuZ2VzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0Q2hhbmdlc1t0YXJnZXRJZF0gPSB0YXJnZXRTdGF0ZS50b1RhcmdldENoYW5nZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldFN0YXRlLmNsZWFyUGVuZGluZ0NoYW5nZXMoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHZhciByZXNvbHZlZExpbWJvRG9jdW1lbnRzID0gZG9jdW1lbnRLZXlTZXQoKTtcclxuICAgICAgICAvLyBXZSBleHRyYWN0IHRoZSBzZXQgb2YgbGltYm8tb25seSBkb2N1bWVudCB1cGRhdGVzIGFzIHRoZSBHQyBsb2dpY1xyXG4gICAgICAgIC8vIHNwZWNpYWwtY2FzZXMgZG9jdW1lbnRzIHRoYXQgZG8gbm90IGFwcGVhciBpbiB0aGUgdGFyZ2V0IGNhY2hlLlxyXG4gICAgICAgIC8vXHJcbiAgICAgICAgLy8gVE9ETyhnc29sdGlzKTogRXhwYW5kIG9uIHRoaXMgY29tbWVudCBvbmNlIEdDIGlzIGF2YWlsYWJsZSBpbiB0aGUgSlNcclxuICAgICAgICAvLyBjbGllbnQuXHJcbiAgICAgICAgdGhpcy5wZW5kaW5nRG9jdW1lbnRUYXJnZXRNYXBwaW5nLmZvckVhY2goZnVuY3Rpb24gKGtleSwgdGFyZ2V0cykge1xyXG4gICAgICAgICAgICB2YXIgaXNPbmx5TGltYm9UYXJnZXQgPSB0cnVlO1xyXG4gICAgICAgICAgICB0YXJnZXRzLmZvckVhY2hXaGlsZShmdW5jdGlvbiAodGFyZ2V0SWQpIHtcclxuICAgICAgICAgICAgICAgIHZhciB0YXJnZXREYXRhID0gX3RoaXMudGFyZ2V0RGF0YUZvckFjdGl2ZVRhcmdldCh0YXJnZXRJZCk7XHJcbiAgICAgICAgICAgICAgICBpZiAodGFyZ2V0RGF0YSAmJlxyXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldERhdGEucHVycG9zZSAhPT0gVGFyZ2V0UHVycG9zZS5MaW1ib1Jlc29sdXRpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBpc09ubHlMaW1ib1RhcmdldCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgaWYgKGlzT25seUxpbWJvVGFyZ2V0KSB7XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlZExpbWJvRG9jdW1lbnRzID0gcmVzb2x2ZWRMaW1ib0RvY3VtZW50cy5hZGQoa2V5KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHZhciByZW1vdGVFdmVudCA9IG5ldyBSZW1vdGVFdmVudChzbmFwc2hvdFZlcnNpb24sIHRhcmdldENoYW5nZXMsIHRoaXMucGVuZGluZ1RhcmdldFJlc2V0cywgdGhpcy5wZW5kaW5nRG9jdW1lbnRVcGRhdGVzLCByZXNvbHZlZExpbWJvRG9jdW1lbnRzKTtcclxuICAgICAgICB0aGlzLnBlbmRpbmdEb2N1bWVudFVwZGF0ZXMgPSBtYXliZURvY3VtZW50TWFwKCk7XHJcbiAgICAgICAgdGhpcy5wZW5kaW5nRG9jdW1lbnRUYXJnZXRNYXBwaW5nID0gZG9jdW1lbnRUYXJnZXRNYXAoKTtcclxuICAgICAgICB0aGlzLnBlbmRpbmdUYXJnZXRSZXNldHMgPSBuZXcgU29ydGVkU2V0KHByaW1pdGl2ZUNvbXBhcmF0b3IpO1xyXG4gICAgICAgIHJldHVybiByZW1vdGVFdmVudDtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEFkZHMgdGhlIHByb3ZpZGVkIGRvY3VtZW50IHRvIHRoZSBpbnRlcm5hbCBsaXN0IG9mIGRvY3VtZW50IHVwZGF0ZXMgYW5kXHJcbiAgICAgKiBpdHMgZG9jdW1lbnQga2V5IHRvIHRoZSBnaXZlbiB0YXJnZXQncyBtYXBwaW5nLlxyXG4gICAgICovXHJcbiAgICAvLyBWaXNpYmxlIGZvciB0ZXN0aW5nLlxyXG4gICAgV2F0Y2hDaGFuZ2VBZ2dyZWdhdG9yLnByb3RvdHlwZS5hZGREb2N1bWVudFRvVGFyZ2V0ID0gZnVuY3Rpb24gKHRhcmdldElkLCBkb2N1bWVudCkge1xyXG4gICAgICAgIGlmICghdGhpcy5pc0FjdGl2ZVRhcmdldCh0YXJnZXRJZCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgY2hhbmdlVHlwZSA9IHRoaXMudGFyZ2V0Q29udGFpbnNEb2N1bWVudCh0YXJnZXRJZCwgZG9jdW1lbnQua2V5KVxyXG4gICAgICAgICAgICA/IENoYW5nZVR5cGUuTW9kaWZpZWRcclxuICAgICAgICAgICAgOiBDaGFuZ2VUeXBlLkFkZGVkO1xyXG4gICAgICAgIHZhciB0YXJnZXRTdGF0ZSA9IHRoaXMuZW5zdXJlVGFyZ2V0U3RhdGUodGFyZ2V0SWQpO1xyXG4gICAgICAgIHRhcmdldFN0YXRlLmFkZERvY3VtZW50Q2hhbmdlKGRvY3VtZW50LmtleSwgY2hhbmdlVHlwZSk7XHJcbiAgICAgICAgdGhpcy5wZW5kaW5nRG9jdW1lbnRVcGRhdGVzID0gdGhpcy5wZW5kaW5nRG9jdW1lbnRVcGRhdGVzLmluc2VydChkb2N1bWVudC5rZXksIGRvY3VtZW50KTtcclxuICAgICAgICB0aGlzLnBlbmRpbmdEb2N1bWVudFRhcmdldE1hcHBpbmcgPSB0aGlzLnBlbmRpbmdEb2N1bWVudFRhcmdldE1hcHBpbmcuaW5zZXJ0KGRvY3VtZW50LmtleSwgdGhpcy5lbnN1cmVEb2N1bWVudFRhcmdldE1hcHBpbmcoZG9jdW1lbnQua2V5KS5hZGQodGFyZ2V0SWQpKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJlbW92ZXMgdGhlIHByb3ZpZGVkIGRvY3VtZW50IGZyb20gdGhlIHRhcmdldCBtYXBwaW5nLiBJZiB0aGVcclxuICAgICAqIGRvY3VtZW50IG5vIGxvbmdlciBtYXRjaGVzIHRoZSB0YXJnZXQsIGJ1dCB0aGUgZG9jdW1lbnQncyBzdGF0ZSBpcyBzdGlsbFxyXG4gICAgICoga25vd24gKGUuZy4gd2Uga25vdyB0aGF0IHRoZSBkb2N1bWVudCB3YXMgZGVsZXRlZCBvciB3ZSByZWNlaXZlZCB0aGUgY2hhbmdlXHJcbiAgICAgKiB0aGF0IGNhdXNlZCB0aGUgZmlsdGVyIG1pc21hdGNoKSwgdGhlIG5ldyBkb2N1bWVudCBjYW4gYmUgcHJvdmlkZWRcclxuICAgICAqIHRvIHVwZGF0ZSB0aGUgcmVtb3RlIGRvY3VtZW50IGNhY2hlLlxyXG4gICAgICovXHJcbiAgICAvLyBWaXNpYmxlIGZvciB0ZXN0aW5nLlxyXG4gICAgV2F0Y2hDaGFuZ2VBZ2dyZWdhdG9yLnByb3RvdHlwZS5yZW1vdmVEb2N1bWVudEZyb21UYXJnZXQgPSBmdW5jdGlvbiAodGFyZ2V0SWQsIGtleSwgdXBkYXRlZERvY3VtZW50KSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmlzQWN0aXZlVGFyZ2V0KHRhcmdldElkKSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciB0YXJnZXRTdGF0ZSA9IHRoaXMuZW5zdXJlVGFyZ2V0U3RhdGUodGFyZ2V0SWQpO1xyXG4gICAgICAgIGlmICh0aGlzLnRhcmdldENvbnRhaW5zRG9jdW1lbnQodGFyZ2V0SWQsIGtleSkpIHtcclxuICAgICAgICAgICAgdGFyZ2V0U3RhdGUuYWRkRG9jdW1lbnRDaGFuZ2Uoa2V5LCBDaGFuZ2VUeXBlLlJlbW92ZWQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gVGhlIGRvY3VtZW50IG1heSBoYXZlIGVudGVyZWQgYW5kIGxlZnQgdGhlIHRhcmdldCBiZWZvcmUgd2UgcmFpc2VkIGFcclxuICAgICAgICAgICAgLy8gc25hcHNob3QsIHNvIHdlIGNhbiBqdXN0IGlnbm9yZSB0aGUgY2hhbmdlLlxyXG4gICAgICAgICAgICB0YXJnZXRTdGF0ZS5yZW1vdmVEb2N1bWVudENoYW5nZShrZXkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnBlbmRpbmdEb2N1bWVudFRhcmdldE1hcHBpbmcgPSB0aGlzLnBlbmRpbmdEb2N1bWVudFRhcmdldE1hcHBpbmcuaW5zZXJ0KGtleSwgdGhpcy5lbnN1cmVEb2N1bWVudFRhcmdldE1hcHBpbmcoa2V5KS5kZWxldGUodGFyZ2V0SWQpKTtcclxuICAgICAgICBpZiAodXBkYXRlZERvY3VtZW50KSB7XHJcbiAgICAgICAgICAgIHRoaXMucGVuZGluZ0RvY3VtZW50VXBkYXRlcyA9IHRoaXMucGVuZGluZ0RvY3VtZW50VXBkYXRlcy5pbnNlcnQoa2V5LCB1cGRhdGVkRG9jdW1lbnQpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBXYXRjaENoYW5nZUFnZ3JlZ2F0b3IucHJvdG90eXBlLnJlbW92ZVRhcmdldCA9IGZ1bmN0aW9uICh0YXJnZXRJZCkge1xyXG4gICAgICAgIGRlbGV0ZSB0aGlzLnRhcmdldFN0YXRlc1t0YXJnZXRJZF07XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSBjdXJyZW50IGNvdW50IG9mIGRvY3VtZW50cyBpbiB0aGUgdGFyZ2V0LiBUaGlzIGluY2x1ZGVzIGJvdGhcclxuICAgICAqIHRoZSBudW1iZXIgb2YgZG9jdW1lbnRzIHRoYXQgdGhlIExvY2FsU3RvcmUgY29uc2lkZXJzIHRvIGJlIHBhcnQgb2YgdGhlXHJcbiAgICAgKiB0YXJnZXQgYXMgd2VsbCBhcyBhbnkgYWNjdW11bGF0ZWQgY2hhbmdlcy5cclxuICAgICAqL1xyXG4gICAgV2F0Y2hDaGFuZ2VBZ2dyZWdhdG9yLnByb3RvdHlwZS5nZXRDdXJyZW50RG9jdW1lbnRDb3VudEZvclRhcmdldCA9IGZ1bmN0aW9uICh0YXJnZXRJZCkge1xyXG4gICAgICAgIHZhciB0YXJnZXRTdGF0ZSA9IHRoaXMuZW5zdXJlVGFyZ2V0U3RhdGUodGFyZ2V0SWQpO1xyXG4gICAgICAgIHZhciB0YXJnZXRDaGFuZ2UgPSB0YXJnZXRTdGF0ZS50b1RhcmdldENoYW5nZSgpO1xyXG4gICAgICAgIHJldHVybiAodGhpcy5tZXRhZGF0YVByb3ZpZGVyLmdldFJlbW90ZUtleXNGb3JUYXJnZXQodGFyZ2V0SWQpLnNpemUgK1xyXG4gICAgICAgICAgICB0YXJnZXRDaGFuZ2UuYWRkZWREb2N1bWVudHMuc2l6ZSAtXHJcbiAgICAgICAgICAgIHRhcmdldENoYW5nZS5yZW1vdmVkRG9jdW1lbnRzLnNpemUpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogSW5jcmVtZW50IHRoZSBudW1iZXIgb2YgYWNrcyBuZWVkZWQgZnJvbSB3YXRjaCBiZWZvcmUgd2UgY2FuIGNvbnNpZGVyIHRoZVxyXG4gICAgICogc2VydmVyIHRvIGJlICdpbi1zeW5jJyB3aXRoIHRoZSBjbGllbnQncyBhY3RpdmUgdGFyZ2V0cy5cclxuICAgICAqL1xyXG4gICAgV2F0Y2hDaGFuZ2VBZ2dyZWdhdG9yLnByb3RvdHlwZS5yZWNvcmRQZW5kaW5nVGFyZ2V0UmVxdWVzdCA9IGZ1bmN0aW9uICh0YXJnZXRJZCkge1xyXG4gICAgICAgIC8vIEZvciBlYWNoIHJlcXVlc3Qgd2UgZ2V0IHdlIG5lZWQgdG8gcmVjb3JkIHdlIG5lZWQgYSByZXNwb25zZSBmb3IgaXQuXHJcbiAgICAgICAgdmFyIHRhcmdldFN0YXRlID0gdGhpcy5lbnN1cmVUYXJnZXRTdGF0ZSh0YXJnZXRJZCk7XHJcbiAgICAgICAgdGFyZ2V0U3RhdGUucmVjb3JkUGVuZGluZ1RhcmdldFJlcXVlc3QoKTtcclxuICAgIH07XHJcbiAgICBXYXRjaENoYW5nZUFnZ3JlZ2F0b3IucHJvdG90eXBlLmVuc3VyZVRhcmdldFN0YXRlID0gZnVuY3Rpb24gKHRhcmdldElkKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnRhcmdldFN0YXRlc1t0YXJnZXRJZF0pIHtcclxuICAgICAgICAgICAgdGhpcy50YXJnZXRTdGF0ZXNbdGFyZ2V0SWRdID0gbmV3IFRhcmdldFN0YXRlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLnRhcmdldFN0YXRlc1t0YXJnZXRJZF07XHJcbiAgICB9O1xyXG4gICAgV2F0Y2hDaGFuZ2VBZ2dyZWdhdG9yLnByb3RvdHlwZS5lbnN1cmVEb2N1bWVudFRhcmdldE1hcHBpbmcgPSBmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgICAgdmFyIHRhcmdldE1hcHBpbmcgPSB0aGlzLnBlbmRpbmdEb2N1bWVudFRhcmdldE1hcHBpbmcuZ2V0KGtleSk7XHJcbiAgICAgICAgaWYgKCF0YXJnZXRNYXBwaW5nKSB7XHJcbiAgICAgICAgICAgIHRhcmdldE1hcHBpbmcgPSBuZXcgU29ydGVkU2V0KHByaW1pdGl2ZUNvbXBhcmF0b3IpO1xyXG4gICAgICAgICAgICB0aGlzLnBlbmRpbmdEb2N1bWVudFRhcmdldE1hcHBpbmcgPSB0aGlzLnBlbmRpbmdEb2N1bWVudFRhcmdldE1hcHBpbmcuaW5zZXJ0KGtleSwgdGFyZ2V0TWFwcGluZyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0YXJnZXRNYXBwaW5nO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogVmVyaWZpZXMgdGhhdCB0aGUgdXNlciBpcyBzdGlsbCBpbnRlcmVzdGVkIGluIHRoaXMgdGFyZ2V0IChieSBjYWxsaW5nXHJcbiAgICAgKiBgZ2V0VGFyZ2V0RGF0YUZvclRhcmdldCgpYCkgYW5kIHRoYXQgd2UgYXJlIG5vdCB3YWl0aW5nIGZvciBwZW5kaW5nIEFERHNcclxuICAgICAqIGZyb20gd2F0Y2guXHJcbiAgICAgKi9cclxuICAgIFdhdGNoQ2hhbmdlQWdncmVnYXRvci5wcm90b3R5cGUuaXNBY3RpdmVUYXJnZXQgPSBmdW5jdGlvbiAodGFyZ2V0SWQpIHtcclxuICAgICAgICB2YXIgdGFyZ2V0QWN0aXZlID0gdGhpcy50YXJnZXREYXRhRm9yQWN0aXZlVGFyZ2V0KHRhcmdldElkKSAhPT0gbnVsbDtcclxuICAgICAgICBpZiAoIXRhcmdldEFjdGl2ZSkge1xyXG4gICAgICAgICAgICBkZWJ1ZyhMT0dfVEFHJDcsICdEZXRlY3RlZCBpbmFjdGl2ZSB0YXJnZXQnLCB0YXJnZXRJZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0YXJnZXRBY3RpdmU7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSBUYXJnZXREYXRhIGZvciBhbiBhY3RpdmUgdGFyZ2V0IChpLmUuIGEgdGFyZ2V0IHRoYXQgdGhlIHVzZXJcclxuICAgICAqIGlzIHN0aWxsIGludGVyZXN0ZWQgaW4gdGhhdCBoYXMgbm8gb3V0c3RhbmRpbmcgdGFyZ2V0IGNoYW5nZSByZXF1ZXN0cykuXHJcbiAgICAgKi9cclxuICAgIFdhdGNoQ2hhbmdlQWdncmVnYXRvci5wcm90b3R5cGUudGFyZ2V0RGF0YUZvckFjdGl2ZVRhcmdldCA9IGZ1bmN0aW9uICh0YXJnZXRJZCkge1xyXG4gICAgICAgIHZhciB0YXJnZXRTdGF0ZSA9IHRoaXMudGFyZ2V0U3RhdGVzW3RhcmdldElkXTtcclxuICAgICAgICByZXR1cm4gdGFyZ2V0U3RhdGUgJiYgdGFyZ2V0U3RhdGUuaXNQZW5kaW5nXHJcbiAgICAgICAgICAgID8gbnVsbFxyXG4gICAgICAgICAgICA6IHRoaXMubWV0YWRhdGFQcm92aWRlci5nZXRUYXJnZXREYXRhRm9yVGFyZ2V0KHRhcmdldElkKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJlc2V0cyB0aGUgc3RhdGUgb2YgYSBXYXRjaCB0YXJnZXQgdG8gaXRzIGluaXRpYWwgc3RhdGUgKGUuZy4gc2V0c1xyXG4gICAgICogJ2N1cnJlbnQnIHRvIGZhbHNlLCBjbGVhcnMgdGhlIHJlc3VtZSB0b2tlbiBhbmQgcmVtb3ZlcyBpdHMgdGFyZ2V0IG1hcHBpbmdcclxuICAgICAqIGZyb20gYWxsIGRvY3VtZW50cykuXHJcbiAgICAgKi9cclxuICAgIFdhdGNoQ2hhbmdlQWdncmVnYXRvci5wcm90b3R5cGUucmVzZXRUYXJnZXQgPSBmdW5jdGlvbiAodGFyZ2V0SWQpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIGFzc2VydCghdGhpcy50YXJnZXRTdGF0ZXNbdGFyZ2V0SWRdLmlzUGVuZGluZywgJ1Nob3VsZCBvbmx5IHJlc2V0IGFjdGl2ZSB0YXJnZXRzJyk7XHJcbiAgICAgICAgdGhpcy50YXJnZXRTdGF0ZXNbdGFyZ2V0SWRdID0gbmV3IFRhcmdldFN0YXRlKCk7XHJcbiAgICAgICAgLy8gVHJpZ2dlciByZW1vdmFsIGZvciBhbnkgZG9jdW1lbnRzIGN1cnJlbnRseSBtYXBwZWQgdG8gdGhpcyB0YXJnZXQuXHJcbiAgICAgICAgLy8gVGhlc2UgcmVtb3ZhbHMgd2lsbCBiZSBwYXJ0IG9mIHRoZSBpbml0aWFsIHNuYXBzaG90IGlmIFdhdGNoIGRvZXMgbm90XHJcbiAgICAgICAgLy8gcmVzZW5kIHRoZXNlIGRvY3VtZW50cy5cclxuICAgICAgICB2YXIgZXhpc3RpbmdLZXlzID0gdGhpcy5tZXRhZGF0YVByb3ZpZGVyLmdldFJlbW90ZUtleXNGb3JUYXJnZXQodGFyZ2V0SWQpO1xyXG4gICAgICAgIGV4aXN0aW5nS2V5cy5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICAgICAgX3RoaXMucmVtb3ZlRG9jdW1lbnRGcm9tVGFyZ2V0KHRhcmdldElkLCBrZXksIC8qdXBkYXRlZERvY3VtZW50PSovIG51bGwpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB3aGV0aGVyIHRoZSBMb2NhbFN0b3JlIGNvbnNpZGVycyB0aGUgZG9jdW1lbnQgdG8gYmUgcGFydCBvZiB0aGVcclxuICAgICAqIHNwZWNpZmllZCB0YXJnZXQuXHJcbiAgICAgKi9cclxuICAgIFdhdGNoQ2hhbmdlQWdncmVnYXRvci5wcm90b3R5cGUudGFyZ2V0Q29udGFpbnNEb2N1bWVudCA9IGZ1bmN0aW9uICh0YXJnZXRJZCwga2V5KSB7XHJcbiAgICAgICAgdmFyIGV4aXN0aW5nS2V5cyA9IHRoaXMubWV0YWRhdGFQcm92aWRlci5nZXRSZW1vdGVLZXlzRm9yVGFyZ2V0KHRhcmdldElkKTtcclxuICAgICAgICByZXR1cm4gZXhpc3RpbmdLZXlzLmhhcyhrZXkpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBXYXRjaENoYW5nZUFnZ3JlZ2F0b3I7XHJcbn0oKSk7XHJcbmZ1bmN0aW9uIGRvY3VtZW50VGFyZ2V0TWFwKCkge1xyXG4gICAgcmV0dXJuIG5ldyBTb3J0ZWRNYXAoRG9jdW1lbnRLZXkuY29tcGFyYXRvcik7XHJcbn1cclxuZnVuY3Rpb24gc25hcHNob3RDaGFuZ2VzTWFwKCkge1xyXG4gICAgcmV0dXJuIG5ldyBTb3J0ZWRNYXAoRG9jdW1lbnRLZXkuY29tcGFyYXRvcik7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnZhciBMT0dfVEFHJDggPSAnUmVtb3RlU3RvcmUnO1xyXG4vLyBUT0RPKGIvMzU4NTM0MDIpOiBOZWdvdGlhdGUgdGhpcyB3aXRoIHRoZSBzdHJlYW0uXHJcbnZhciBNQVhfUEVORElOR19XUklURVMgPSAxMDtcclxuLyoqXHJcbiAqIFJlbW90ZVN0b3JlIC0gQW4gaW50ZXJmYWNlIHRvIHJlbW90ZWx5IHN0b3JlZCBkYXRhLCBiYXNpY2FsbHkgcHJvdmlkaW5nIGFcclxuICogd3JhcHBlciBhcm91bmQgdGhlIERhdGFzdG9yZSB0aGF0IGlzIG1vcmUgcmVsaWFibGUgZm9yIHRoZSByZXN0IG9mIHRoZVxyXG4gKiBzeXN0ZW0uXHJcbiAqXHJcbiAqIFJlbW90ZVN0b3JlIGlzIHJlc3BvbnNpYmxlIGZvciBtYWludGFpbmluZyB0aGUgY29ubmVjdGlvbiB0byB0aGUgc2VydmVyLlxyXG4gKiAtIG1haW50YWluaW5nIGEgbGlzdCBvZiBhY3RpdmUgbGlzdGVucy5cclxuICogLSByZWNvbm5lY3Rpbmcgd2hlbiB0aGUgY29ubmVjdGlvbiBpcyBkcm9wcGVkLlxyXG4gKiAtIHJlc3VtaW5nIGFsbCB0aGUgYWN0aXZlIGxpc3RlbnMgb24gcmVjb25uZWN0LlxyXG4gKlxyXG4gKiBSZW1vdGVTdG9yZSBoYW5kbGVzIGFsbCBpbmNvbWluZyBldmVudHMgZnJvbSB0aGUgRGF0YXN0b3JlLlxyXG4gKiAtIGxpc3RlbmluZyB0byB0aGUgd2F0Y2ggc3RyZWFtIGFuZCByZXBhY2thZ2luZyB0aGUgZXZlbnRzIGFzIFJlbW90ZUV2ZW50c1xyXG4gKiAtIG5vdGlmeWluZyBTeW5jRW5naW5lIG9mIGFueSBjaGFuZ2VzIHRvIHRoZSBhY3RpdmUgbGlzdGVucy5cclxuICpcclxuICogUmVtb3RlU3RvcmUgdGFrZXMgd3JpdGVzIGZyb20gb3RoZXIgY29tcG9uZW50cyBhbmQgaGFuZGxlcyB0aGVtIHJlbGlhYmx5LlxyXG4gKiAtIHB1bGxpbmcgcGVuZGluZyBtdXRhdGlvbnMgZnJvbSBMb2NhbFN0b3JlIGFuZCBzZW5kaW5nIHRoZW0gdG8gRGF0YXN0b3JlLlxyXG4gKiAtIHJldHJ5aW5nIG11dGF0aW9ucyB0aGF0IGZhaWxlZCBiZWNhdXNlIG9mIG5ldHdvcmsgcHJvYmxlbXMuXHJcbiAqIC0gYWNraW5nIG11dGF0aW9ucyB0byB0aGUgU3luY0VuZ2luZSBvbmNlIHRoZXkgYXJlIGFjY2VwdGVkIG9yIHJlamVjdGVkLlxyXG4gKi9cclxudmFyIFJlbW90ZVN0b3JlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gUmVtb3RlU3RvcmUoXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBsb2NhbCBzdG9yZSwgdXNlZCB0byBmaWxsIHRoZSB3cml0ZSBwaXBlbGluZSB3aXRoIG91dGJvdW5kIG11dGF0aW9ucy5cclxuICAgICAqL1xyXG4gICAgbG9jYWxTdG9yZSwgXHJcbiAgICAvKiogVGhlIGNsaWVudC1zaWRlIHByb3h5IGZvciBpbnRlcmFjdGluZyB3aXRoIHRoZSBiYWNrZW5kLiAqL1xyXG4gICAgZGF0YXN0b3JlLCBhc3luY1F1ZXVlLCBvbmxpbmVTdGF0ZUhhbmRsZXIsIGNvbm5lY3Rpdml0eU1vbml0b3IpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMubG9jYWxTdG9yZSA9IGxvY2FsU3RvcmU7XHJcbiAgICAgICAgdGhpcy5kYXRhc3RvcmUgPSBkYXRhc3RvcmU7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQSBsaXN0IG9mIHVwIHRvIE1BWF9QRU5ESU5HX1dSSVRFUyB3cml0ZXMgdGhhdCB3ZSBoYXZlIGZldGNoZWQgZnJvbSB0aGVcclxuICAgICAgICAgKiBMb2NhbFN0b3JlIHZpYSBmaWxsV3JpdGVQaXBlbGluZSgpIGFuZCBoYXZlIG9yIHdpbGwgc2VuZCB0byB0aGUgd3JpdGVcclxuICAgICAgICAgKiBzdHJlYW0uXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBXaGVuZXZlciB3cml0ZVBpcGVsaW5lLmxlbmd0aCA+IDAgdGhlIFJlbW90ZVN0b3JlIHdpbGwgYXR0ZW1wdCB0byBzdGFydCBvclxyXG4gICAgICAgICAqIHJlc3RhcnQgdGhlIHdyaXRlIHN0cmVhbS4gV2hlbiB0aGUgc3RyZWFtIGlzIGVzdGFibGlzaGVkIHRoZSB3cml0ZXMgaW4gdGhlXHJcbiAgICAgICAgICogcGlwZWxpbmUgd2lsbCBiZSBzZW50IGluIG9yZGVyLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogV3JpdGVzIHJlbWFpbiBpbiB3cml0ZVBpcGVsaW5lIHVudGlsIHRoZXkgYXJlIGFja25vd2xlZGdlZCBieSB0aGUgYmFja2VuZFxyXG4gICAgICAgICAqIGFuZCB0aHVzIHdpbGwgYXV0b21hdGljYWxseSBiZSByZS1zZW50IGlmIHRoZSBzdHJlYW0gaXMgaW50ZXJydXB0ZWQgL1xyXG4gICAgICAgICAqIHJlc3RhcnRlZCBiZWZvcmUgdGhleSdyZSBhY2tub3dsZWRnZWQuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBXcml0ZSByZXNwb25zZXMgZnJvbSB0aGUgYmFja2VuZCBhcmUgbGlua2VkIHRvIHRoZWlyIG9yaWdpbmF0aW5nIHJlcXVlc3RcclxuICAgICAgICAgKiBwdXJlbHkgYmFzZWQgb24gb3JkZXIsIGFuZCBzbyB3ZSBjYW4ganVzdCBzaGlmdCgpIHdyaXRlcyBmcm9tIHRoZSBmcm9udCBvZlxyXG4gICAgICAgICAqIHRoZSB3cml0ZVBpcGVsaW5lIGFzIHdlIHJlY2VpdmUgcmVzcG9uc2VzLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMud3JpdGVQaXBlbGluZSA9IFtdO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEEgbWFwcGluZyBvZiB3YXRjaGVkIHRhcmdldHMgdGhhdCB0aGUgY2xpZW50IGNhcmVzIGFib3V0IHRyYWNraW5nIGFuZCB0aGVcclxuICAgICAgICAgKiB1c2VyIGhhcyBleHBsaWNpdGx5IGNhbGxlZCBhICdsaXN0ZW4nIGZvciB0aGlzIHRhcmdldC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFRoZXNlIHRhcmdldHMgbWF5IG9yIG1heSBub3QgaGF2ZSBiZWVuIHNlbnQgdG8gb3IgYWNrbm93bGVkZ2VkIGJ5IHRoZVxyXG4gICAgICAgICAqIHNlcnZlci4gT24gcmUtZXN0YWJsaXNoaW5nIHRoZSBsaXN0ZW4gc3RyZWFtLCB0aGVzZSB0YXJnZXRzIHNob3VsZCBiZSBzZW50XHJcbiAgICAgICAgICogdG8gdGhlIHNlcnZlci4gVGhlIHRhcmdldHMgcmVtb3ZlZCB3aXRoIHVubGlzdGVucyBhcmUgcmVtb3ZlZCBlYWdlcmx5XHJcbiAgICAgICAgICogd2l0aG91dCB3YWl0aW5nIGZvciBjb25maXJtYXRpb24gZnJvbSB0aGUgbGlzdGVuIHN0cmVhbS5cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLmxpc3RlblRhcmdldHMgPSB7fTtcclxuICAgICAgICB0aGlzLndhdGNoQ2hhbmdlQWdncmVnYXRvciA9IG51bGw7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogU2V0IHRvIHRydWUgYnkgZW5hYmxlTmV0d29yaygpIGFuZCBmYWxzZSBieSBkaXNhYmxlTmV0d29yaygpIGFuZCBpbmRpY2F0ZXNcclxuICAgICAgICAgKiB0aGUgdXNlci1wcmVmZXJyZWQgbmV0d29yayBzdGF0ZS5cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLm5ldHdvcmtFbmFibGVkID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5pc1ByaW1hcnkgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmNvbm5lY3Rpdml0eU1vbml0b3IgPSBjb25uZWN0aXZpdHlNb25pdG9yO1xyXG4gICAgICAgIHRoaXMuY29ubmVjdGl2aXR5TW9uaXRvci5hZGRDYWxsYmFjayhmdW5jdGlvbiAoc3RhdHVzKSB7XHJcbiAgICAgICAgICAgIGFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldChmdW5jdGlvbiAoKSB7IHJldHVybiB0c2xpYi5fX2F3YWl0ZXIoX3RoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHNsaWIuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuY2FuVXNlTmV0d29yaygpKSByZXR1cm4gWzMgLypicmVhayovLCAyXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlYnVnKExPR19UQUckOCwgJ1Jlc3RhcnRpbmcgc3RyZWFtcyBmb3IgbmV0d29yayByZWFjaGFiaWxpdHkgY2hhbmdlLicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5yZXN0YXJ0TmV0d29yaygpXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSAyO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI6IHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7IH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMub25saW5lU3RhdGVUcmFja2VyID0gbmV3IE9ubGluZVN0YXRlVHJhY2tlcihhc3luY1F1ZXVlLCBvbmxpbmVTdGF0ZUhhbmRsZXIpO1xyXG4gICAgICAgIC8vIENyZWF0ZSBzdHJlYW1zIChidXQgbm90ZSB0aGV5J3JlIG5vdCBzdGFydGVkIHlldCkuXHJcbiAgICAgICAgdGhpcy53YXRjaFN0cmVhbSA9IHRoaXMuZGF0YXN0b3JlLm5ld1BlcnNpc3RlbnRXYXRjaFN0cmVhbSh7XHJcbiAgICAgICAgICAgIG9uT3BlbjogdGhpcy5vbldhdGNoU3RyZWFtT3Blbi5iaW5kKHRoaXMpLFxyXG4gICAgICAgICAgICBvbkNsb3NlOiB0aGlzLm9uV2F0Y2hTdHJlYW1DbG9zZS5iaW5kKHRoaXMpLFxyXG4gICAgICAgICAgICBvbldhdGNoQ2hhbmdlOiB0aGlzLm9uV2F0Y2hTdHJlYW1DaGFuZ2UuYmluZCh0aGlzKVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMud3JpdGVTdHJlYW0gPSB0aGlzLmRhdGFzdG9yZS5uZXdQZXJzaXN0ZW50V3JpdGVTdHJlYW0oe1xyXG4gICAgICAgICAgICBvbk9wZW46IHRoaXMub25Xcml0ZVN0cmVhbU9wZW4uYmluZCh0aGlzKSxcclxuICAgICAgICAgICAgb25DbG9zZTogdGhpcy5vbldyaXRlU3RyZWFtQ2xvc2UuYmluZCh0aGlzKSxcclxuICAgICAgICAgICAgb25IYW5kc2hha2VDb21wbGV0ZTogdGhpcy5vbldyaXRlSGFuZHNoYWtlQ29tcGxldGUuYmluZCh0aGlzKSxcclxuICAgICAgICAgICAgb25NdXRhdGlvblJlc3VsdDogdGhpcy5vbk11dGF0aW9uUmVzdWx0LmJpbmQodGhpcylcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogU3RhcnRzIHVwIHRoZSByZW1vdGUgc3RvcmUsIGNyZWF0aW5nIHN0cmVhbXMsIHJlc3RvcmluZyBzdGF0ZSBmcm9tXHJcbiAgICAgKiBMb2NhbFN0b3JlLCBldGMuXHJcbiAgICAgKi9cclxuICAgIFJlbW90ZVN0b3JlLnByb3RvdHlwZS5zdGFydCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5lbmFibGVOZXR3b3JrKCk7XHJcbiAgICB9O1xyXG4gICAgLyoqIFJlLWVuYWJsZXMgdGhlIG5ldHdvcmsuIElkZW1wb3RlbnQuICovXHJcbiAgICBSZW1vdGVTdG9yZS5wcm90b3R5cGUuZW5hYmxlTmV0d29yayA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdHNsaWIuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBfYTtcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYikge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYi5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5uZXR3b3JrRW5hYmxlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5jYW5Vc2VOZXR3b3JrKCkpIHJldHVybiBbMyAvKmJyZWFrKi8sIDNdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYSA9IHRoaXMud3JpdGVTdHJlYW07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMubG9jYWxTdG9yZS5nZXRMYXN0U3RyZWFtVG9rZW4oKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5sYXN0U3RyZWFtVG9rZW4gPSBfYi5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnNob3VsZFN0YXJ0V2F0Y2hTdHJlYW0oKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGFydFdhdGNoU3RyZWFtKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9ubGluZVN0YXRlVHJhY2tlci5zZXQoT25saW5lU3RhdGUuVW5rbm93bik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhpcyB3aWxsIHN0YXJ0IHRoZSB3cml0ZSBzdHJlYW0gaWYgbmVjZXNzYXJ5LlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmZpbGxXcml0ZVBpcGVsaW5lKCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhpcyB3aWxsIHN0YXJ0IHRoZSB3cml0ZSBzdHJlYW0gaWYgbmVjZXNzYXJ5LlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYi5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9iLmxhYmVsID0gMztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6IHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBUZW1wb3JhcmlseSBkaXNhYmxlcyB0aGUgbmV0d29yay4gVGhlIG5ldHdvcmsgY2FuIGJlIHJlLWVuYWJsZWQgdXNpbmdcclxuICAgICAqIGVuYWJsZU5ldHdvcmsoKS5cclxuICAgICAqL1xyXG4gICAgUmVtb3RlU3RvcmUucHJvdG90eXBlLmRpc2FibGVOZXR3b3JrID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0c2xpYi5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5uZXR3b3JrRW5hYmxlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmRpc2FibGVOZXR3b3JrSW50ZXJuYWwoKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNldCB0aGUgT25saW5lU3RhdGUgdG8gT2ZmbGluZSBzbyBnZXQoKXMgcmV0dXJuIGZyb20gY2FjaGUsIGV0Yy5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vbmxpbmVTdGF0ZVRyYWNrZXIuc2V0KE9ubGluZVN0YXRlLk9mZmxpbmUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIFJlbW90ZVN0b3JlLnByb3RvdHlwZS5kaXNhYmxlTmV0d29ya0ludGVybmFsID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0c2xpYi5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDogcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy53cml0ZVN0cmVhbS5zdG9wKCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLndhdGNoU3RyZWFtLnN0b3AoKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLndyaXRlUGlwZWxpbmUubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVidWcoTE9HX1RBRyQ4LCBcIlN0b3BwaW5nIHdyaXRlIHN0cmVhbSB3aXRoIFwiICsgdGhpcy53cml0ZVBpcGVsaW5lLmxlbmd0aCArIFwiIHBlbmRpbmcgd3JpdGVzXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy53cml0ZVBpcGVsaW5lID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jbGVhblVwV2F0Y2hTdHJlYW1TdGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIFJlbW90ZVN0b3JlLnByb3RvdHlwZS5zaHV0ZG93biA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdHNsaWIuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYi5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlYnVnKExPR19UQUckOCwgJ1JlbW90ZVN0b3JlIHNodXR0aW5nIGRvd24uJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubmV0d29ya0VuYWJsZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5kaXNhYmxlTmV0d29ya0ludGVybmFsKCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbm5lY3Rpdml0eU1vbml0b3Iuc2h1dGRvd24oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2V0IHRoZSBPbmxpbmVTdGF0ZSB0byBVbmtub3duIChyYXRoZXIgdGhhbiBPZmZsaW5lKSB0byBhdm9pZCBwb3RlbnRpYWxseVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB0cmlnZ2VyaW5nIHNwdXJpb3VzIGxpc3RlbmVyIGV2ZW50cyB3aXRoIGNhY2hlZCBkYXRhLCBldGMuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub25saW5lU3RhdGVUcmFja2VyLnNldChPbmxpbmVTdGF0ZS5Vbmtub3duKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFN0YXJ0cyBuZXcgbGlzdGVuIGZvciB0aGUgZ2l2ZW4gdGFyZ2V0LiBVc2VzIHJlc3VtZSB0b2tlbiBpZiBwcm92aWRlZC4gSXRcclxuICAgICAqIGlzIGEgbm8tb3AgaWYgdGhlIHRhcmdldCBvZiBnaXZlbiBgVGFyZ2V0RGF0YWAgaXMgYWxyZWFkeSBiZWluZyBsaXN0ZW5lZCB0by5cclxuICAgICAqL1xyXG4gICAgUmVtb3RlU3RvcmUucHJvdG90eXBlLmxpc3RlbiA9IGZ1bmN0aW9uICh0YXJnZXREYXRhKSB7XHJcbiAgICAgICAgaWYgKGNvbnRhaW5zKHRoaXMubGlzdGVuVGFyZ2V0cywgdGFyZ2V0RGF0YS50YXJnZXRJZCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBNYXJrIHRoaXMgYXMgc29tZXRoaW5nIHRoZSBjbGllbnQgaXMgY3VycmVudGx5IGxpc3RlbmluZyBmb3IuXHJcbiAgICAgICAgdGhpcy5saXN0ZW5UYXJnZXRzW3RhcmdldERhdGEudGFyZ2V0SWRdID0gdGFyZ2V0RGF0YTtcclxuICAgICAgICBpZiAodGhpcy5zaG91bGRTdGFydFdhdGNoU3RyZWFtKCkpIHtcclxuICAgICAgICAgICAgLy8gVGhlIGxpc3RlbiB3aWxsIGJlIHNlbnQgaW4gb25XYXRjaFN0cmVhbU9wZW5cclxuICAgICAgICAgICAgdGhpcy5zdGFydFdhdGNoU3RyZWFtKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHRoaXMud2F0Y2hTdHJlYW0uaXNPcGVuKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5zZW5kV2F0Y2hSZXF1ZXN0KHRhcmdldERhdGEpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJlbW92ZXMgdGhlIGxpc3RlbiBmcm9tIHNlcnZlci4gSXQgaXMgYSBuby1vcCBpZiB0aGUgZ2l2ZW4gdGFyZ2V0IGlkIGlzXHJcbiAgICAgKiBub3QgYmVpbmcgbGlzdGVuZWQgdG8uXHJcbiAgICAgKi9cclxuICAgIFJlbW90ZVN0b3JlLnByb3RvdHlwZS51bmxpc3RlbiA9IGZ1bmN0aW9uICh0YXJnZXRJZCkge1xyXG4gICAgICAgIGFzc2VydChjb250YWlucyh0aGlzLmxpc3RlblRhcmdldHMsIHRhcmdldElkKSwgXCJ1bmxpc3RlbiBjYWxsZWQgb24gdGFyZ2V0IG5vIGN1cnJlbnRseSB3YXRjaGVkOiBcIiArIHRhcmdldElkKTtcclxuICAgICAgICBkZWxldGUgdGhpcy5saXN0ZW5UYXJnZXRzW3RhcmdldElkXTtcclxuICAgICAgICBpZiAodGhpcy53YXRjaFN0cmVhbS5pc09wZW4oKSkge1xyXG4gICAgICAgICAgICB0aGlzLnNlbmRVbndhdGNoUmVxdWVzdCh0YXJnZXRJZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChpc0VtcHR5KHRoaXMubGlzdGVuVGFyZ2V0cykpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMud2F0Y2hTdHJlYW0uaXNPcGVuKCkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMud2F0Y2hTdHJlYW0ubWFya0lkbGUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmICh0aGlzLmNhblVzZU5ldHdvcmsoKSkge1xyXG4gICAgICAgICAgICAgICAgLy8gUmV2ZXJ0IHRvIE9ubGluZVN0YXRlLlVua25vd24gaWYgdGhlIHdhdGNoIHN0cmVhbSBpcyBub3Qgb3BlbiBhbmQgd2VcclxuICAgICAgICAgICAgICAgIC8vIGhhdmUgbm8gbGlzdGVuZXJzLCBzaW5jZSB3aXRob3V0IGFueSBsaXN0ZW5zIHRvIHNlbmQgd2UgY2Fubm90XHJcbiAgICAgICAgICAgICAgICAvLyBjb25maXJtIGlmIHRoZSBzdHJlYW0gaXMgaGVhbHRoeSBhbmQgdXBncmFkZSB0byBPbmxpbmVTdGF0ZS5PbmxpbmUuXHJcbiAgICAgICAgICAgICAgICB0aGlzLm9ubGluZVN0YXRlVHJhY2tlci5zZXQoT25saW5lU3RhdGUuVW5rbm93bik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqIHtAbGluayBUYXJnZXRNZXRhZGF0YVByb3ZpZGVyLmdldFRhcmdldERhdGFGb3JUYXJnZXR9ICovXHJcbiAgICBSZW1vdGVTdG9yZS5wcm90b3R5cGUuZ2V0VGFyZ2V0RGF0YUZvclRhcmdldCA9IGZ1bmN0aW9uICh0YXJnZXRJZCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmxpc3RlblRhcmdldHNbdGFyZ2V0SWRdIHx8IG51bGw7XHJcbiAgICB9O1xyXG4gICAgLyoqIHtAbGluayBUYXJnZXRNZXRhZGF0YVByb3ZpZGVyLmdldFJlbW90ZUtleXNGb3JUYXJnZXR9ICovXHJcbiAgICBSZW1vdGVTdG9yZS5wcm90b3R5cGUuZ2V0UmVtb3RlS2V5c0ZvclRhcmdldCA9IGZ1bmN0aW9uICh0YXJnZXRJZCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnN5bmNFbmdpbmUuZ2V0UmVtb3RlS2V5c0ZvclRhcmdldCh0YXJnZXRJZCk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBXZSBuZWVkIHRvIGluY3JlbWVudCB0aGUgdGhlIGV4cGVjdGVkIG51bWJlciBvZiBwZW5kaW5nIHJlc3BvbnNlcyB3ZSdyZSBkdWVcclxuICAgICAqIGZyb20gd2F0Y2ggc28gd2Ugd2FpdCBmb3IgdGhlIGFjayB0byBwcm9jZXNzIGFueSBtZXNzYWdlcyBmcm9tIHRoaXMgdGFyZ2V0LlxyXG4gICAgICovXHJcbiAgICBSZW1vdGVTdG9yZS5wcm90b3R5cGUuc2VuZFdhdGNoUmVxdWVzdCA9IGZ1bmN0aW9uICh0YXJnZXREYXRhKSB7XHJcbiAgICAgICAgdGhpcy53YXRjaENoYW5nZUFnZ3JlZ2F0b3IucmVjb3JkUGVuZGluZ1RhcmdldFJlcXVlc3QodGFyZ2V0RGF0YS50YXJnZXRJZCk7XHJcbiAgICAgICAgdGhpcy53YXRjaFN0cmVhbS53YXRjaCh0YXJnZXREYXRhKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFdlIG5lZWQgdG8gaW5jcmVtZW50IHRoZSBleHBlY3RlZCBudW1iZXIgb2YgcGVuZGluZyByZXNwb25zZXMgd2UncmUgZHVlXHJcbiAgICAgKiBmcm9tIHdhdGNoIHNvIHdlIHdhaXQgZm9yIHRoZSByZW1vdmFsIG9uIHRoZSBzZXJ2ZXIgYmVmb3JlIHdlIHByb2Nlc3MgYW55XHJcbiAgICAgKiBtZXNzYWdlcyBmcm9tIHRoaXMgdGFyZ2V0LlxyXG4gICAgICovXHJcbiAgICBSZW1vdGVTdG9yZS5wcm90b3R5cGUuc2VuZFVud2F0Y2hSZXF1ZXN0ID0gZnVuY3Rpb24gKHRhcmdldElkKSB7XHJcbiAgICAgICAgdGhpcy53YXRjaENoYW5nZUFnZ3JlZ2F0b3IucmVjb3JkUGVuZGluZ1RhcmdldFJlcXVlc3QodGFyZ2V0SWQpO1xyXG4gICAgICAgIHRoaXMud2F0Y2hTdHJlYW0udW53YXRjaCh0YXJnZXRJZCk7XHJcbiAgICB9O1xyXG4gICAgUmVtb3RlU3RvcmUucHJvdG90eXBlLnN0YXJ0V2F0Y2hTdHJlYW0gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgYXNzZXJ0KHRoaXMuc2hvdWxkU3RhcnRXYXRjaFN0cmVhbSgpLCAnc3RhcnRXYXRjaFN0cmVhbSgpIGNhbGxlZCB3aGVuIHNob3VsZFN0YXJ0V2F0Y2hTdHJlYW0oKSBpcyBmYWxzZS4nKTtcclxuICAgICAgICB0aGlzLndhdGNoQ2hhbmdlQWdncmVnYXRvciA9IG5ldyBXYXRjaENoYW5nZUFnZ3JlZ2F0b3IodGhpcyk7XHJcbiAgICAgICAgdGhpcy53YXRjaFN0cmVhbS5zdGFydCgpO1xyXG4gICAgICAgIHRoaXMub25saW5lU3RhdGVUcmFja2VyLmhhbmRsZVdhdGNoU3RyZWFtU3RhcnQoKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgd2hldGhlciB0aGUgd2F0Y2ggc3RyZWFtIHNob3VsZCBiZSBzdGFydGVkIGJlY2F1c2UgaXQncyBuZWNlc3NhcnlcclxuICAgICAqIGFuZCBoYXMgbm90IHlldCBiZWVuIHN0YXJ0ZWQuXHJcbiAgICAgKi9cclxuICAgIFJlbW90ZVN0b3JlLnByb3RvdHlwZS5zaG91bGRTdGFydFdhdGNoU3RyZWFtID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiAodGhpcy5jYW5Vc2VOZXR3b3JrKCkgJiZcclxuICAgICAgICAgICAgIXRoaXMud2F0Y2hTdHJlYW0uaXNTdGFydGVkKCkgJiZcclxuICAgICAgICAgICAgIWlzRW1wdHkodGhpcy5saXN0ZW5UYXJnZXRzKSk7XHJcbiAgICB9O1xyXG4gICAgUmVtb3RlU3RvcmUucHJvdG90eXBlLmNhblVzZU5ldHdvcmsgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNQcmltYXJ5ICYmIHRoaXMubmV0d29ya0VuYWJsZWQ7XHJcbiAgICB9O1xyXG4gICAgUmVtb3RlU3RvcmUucHJvdG90eXBlLmNsZWFuVXBXYXRjaFN0cmVhbVN0YXRlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMud2F0Y2hDaGFuZ2VBZ2dyZWdhdG9yID0gbnVsbDtcclxuICAgIH07XHJcbiAgICBSZW1vdGVTdG9yZS5wcm90b3R5cGUub25XYXRjaFN0cmVhbU9wZW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRzbGliLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgICAgICByZXR1cm4gdHNsaWIuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBmb3JFYWNoTnVtYmVyKHRoaXMubGlzdGVuVGFyZ2V0cywgZnVuY3Rpb24gKHRhcmdldElkLCB0YXJnZXREYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuc2VuZFdhdGNoUmVxdWVzdCh0YXJnZXREYXRhKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBSZW1vdGVTdG9yZS5wcm90b3R5cGUub25XYXRjaFN0cmVhbUNsb3NlID0gZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICAgICAgcmV0dXJuIHRzbGliLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHNsaWIuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIEdyYWNlZnVsIHN0b3AgKGR1ZSB0byBzdG9wKCkgb3IgaWRsZSB0aW1lb3V0KS4gTWFrZSBzdXJlIHRoYXQnc1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGRlc2lyYWJsZS5cclxuICAgICAgICAgICAgICAgICAgICBhc3NlcnQoIXRoaXMuc2hvdWxkU3RhcnRXYXRjaFN0cmVhbSgpLCAnV2F0Y2ggc3RyZWFtIHdhcyBzdG9wcGVkIGdyYWNlZnVsbHkgd2hpbGUgc3RpbGwgbmVlZGVkLicpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5jbGVhblVwV2F0Y2hTdHJlYW1TdGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgLy8gSWYgd2Ugc3RpbGwgbmVlZCB0aGUgd2F0Y2ggc3RyZWFtLCByZXRyeSB0aGUgY29ubmVjdGlvbi5cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNob3VsZFN0YXJ0V2F0Y2hTdHJlYW0oKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMub25saW5lU3RhdGVUcmFja2VyLmhhbmRsZVdhdGNoU3RyZWFtRmFpbHVyZShlcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGFydFdhdGNoU3RyZWFtKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBObyBuZWVkIHRvIHJlc3RhcnQgd2F0Y2ggc3RyZWFtIGJlY2F1c2UgdGhlcmUgYXJlIG5vIGFjdGl2ZSB0YXJnZXRzLlxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFRoZSBvbmxpbmUgc3RhdGUgaXMgc2V0IHRvIHVua25vd24gYmVjYXVzZSB0aGVyZSBpcyBubyBhY3RpdmUgYXR0ZW1wdFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGF0IGVzdGFibGlzaGluZyBhIGNvbm5lY3Rpb25cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm9ubGluZVN0YXRlVHJhY2tlci5zZXQoT25saW5lU3RhdGUuVW5rbm93bik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIFJlbW90ZVN0b3JlLnByb3RvdHlwZS5vbldhdGNoU3RyZWFtQ2hhbmdlID0gZnVuY3Rpb24gKHdhdGNoQ2hhbmdlLCBzbmFwc2hvdFZlcnNpb24pIHtcclxuICAgICAgICByZXR1cm4gdHNsaWIuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBsYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uO1xyXG4gICAgICAgICAgICByZXR1cm4gdHNsaWIuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBNYXJrIHRoZSBjbGllbnQgYXMgb25saW5lIHNpbmNlIHdlIGdvdCBhIG1lc3NhZ2UgZnJvbSB0aGUgc2VydmVyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub25saW5lU3RhdGVUcmFja2VyLnNldChPbmxpbmVTdGF0ZS5PbmxpbmUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAod2F0Y2hDaGFuZ2UgaW5zdGFuY2VvZiBXYXRjaFRhcmdldENoYW5nZSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2F0Y2hDaGFuZ2Uuc3RhdGUgPT09IFdhdGNoVGFyZ2V0Q2hhbmdlU3RhdGUuUmVtb3ZlZCAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2F0Y2hDaGFuZ2UuY2F1c2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoZXJlIHdhcyBhbiBlcnJvciBvbiBhIHRhcmdldCwgZG9uJ3Qgd2FpdCBmb3IgYSBjb25zaXN0ZW50IHNuYXBzaG90XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0byByYWlzZSBldmVudHNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0aGlzLmhhbmRsZVRhcmdldEVycm9yKHdhdGNoQ2hhbmdlKV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHdhdGNoQ2hhbmdlIGluc3RhbmNlb2YgRG9jdW1lbnRXYXRjaENoYW5nZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy53YXRjaENoYW5nZUFnZ3JlZ2F0b3IuaGFuZGxlRG9jdW1lbnRDaGFuZ2Uod2F0Y2hDaGFuZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHdhdGNoQ2hhbmdlIGluc3RhbmNlb2YgRXhpc3RlbmNlRmlsdGVyQ2hhbmdlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLndhdGNoQ2hhbmdlQWdncmVnYXRvci5oYW5kbGVFeGlzdGVuY2VGaWx0ZXIod2F0Y2hDaGFuZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXJ0KHdhdGNoQ2hhbmdlIGluc3RhbmNlb2YgV2F0Y2hUYXJnZXRDaGFuZ2UsICdFeHBlY3RlZCB3YXRjaENoYW5nZSB0byBiZSBhbiBpbnN0YW5jZSBvZiBXYXRjaFRhcmdldENoYW5nZScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy53YXRjaENoYW5nZUFnZ3JlZ2F0b3IuaGFuZGxlVGFyZ2V0Q2hhbmdlKHdhdGNoQ2hhbmdlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoISFzbmFwc2hvdFZlcnNpb24uaXNFcXVhbChTbmFwc2hvdFZlcnNpb24uTUlOKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgM107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMubG9jYWxTdG9yZS5nZXRMYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uKCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbiA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEoc25hcHNob3RWZXJzaW9uLmNvbXBhcmVUbyhsYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uKSA+PSAwKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgM107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdlIGhhdmUgcmVjZWl2ZWQgYSB0YXJnZXQgY2hhbmdlIHdpdGggYSBnbG9iYWwgc25hcHNob3QgaWYgdGhlIHNuYXBzaG90XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHZlcnNpb24gaXMgbm90IGVxdWFsIHRvIFNuYXBzaG90VmVyc2lvbi5NSU4uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMucmFpc2VXYXRjaFNuYXBzaG90KHNuYXBzaG90VmVyc2lvbildO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gV2UgaGF2ZSByZWNlaXZlZCBhIHRhcmdldCBjaGFuZ2Ugd2l0aCBhIGdsb2JhbCBzbmFwc2hvdCBpZiB0aGUgc25hcHNob3RcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdmVyc2lvbiBpcyBub3QgZXF1YWwgdG8gU25hcHNob3RWZXJzaW9uLk1JTi5cclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDM7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOiByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogVGFrZXMgYSBiYXRjaCBvZiBjaGFuZ2VzIGZyb20gdGhlIERhdGFzdG9yZSwgcmVwYWNrYWdlcyB0aGVtIGFzIGFcclxuICAgICAqIFJlbW90ZUV2ZW50LCBhbmQgcGFzc2VzIHRoYXQgb24gdG8gdGhlIGxpc3RlbmVyLCB3aGljaCBpcyB0eXBpY2FsbHkgdGhlXHJcbiAgICAgKiBTeW5jRW5naW5lLlxyXG4gICAgICovXHJcbiAgICBSZW1vdGVTdG9yZS5wcm90b3R5cGUucmFpc2VXYXRjaFNuYXBzaG90ID0gZnVuY3Rpb24gKHNuYXBzaG90VmVyc2lvbikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgYXNzZXJ0KCFzbmFwc2hvdFZlcnNpb24uaXNFcXVhbChTbmFwc2hvdFZlcnNpb24uTUlOKSwgXCJDYW4ndCByYWlzZSBldmVudCBmb3IgdW5rbm93biBTbmFwc2hvdFZlcnNpb25cIik7XHJcbiAgICAgICAgdmFyIHJlbW90ZUV2ZW50ID0gdGhpcy53YXRjaENoYW5nZUFnZ3JlZ2F0b3IuY3JlYXRlUmVtb3RlRXZlbnQoc25hcHNob3RWZXJzaW9uKTtcclxuICAgICAgICAvLyBVcGRhdGUgaW4tbWVtb3J5IHJlc3VtZSB0b2tlbnMuIExvY2FsU3RvcmUgd2lsbCB1cGRhdGUgdGhlXHJcbiAgICAgICAgLy8gcGVyc2lzdGVudCB2aWV3IG9mIHRoZXNlIHdoZW4gYXBwbHlpbmcgdGhlIGNvbXBsZXRlZCBSZW1vdGVFdmVudC5cclxuICAgICAgICBmb3JFYWNoTnVtYmVyKHJlbW90ZUV2ZW50LnRhcmdldENoYW5nZXMsIGZ1bmN0aW9uICh0YXJnZXRJZCwgY2hhbmdlKSB7XHJcbiAgICAgICAgICAgIGlmIChjaGFuZ2UucmVzdW1lVG9rZW4ubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHRhcmdldERhdGEgPSBfdGhpcy5saXN0ZW5UYXJnZXRzW3RhcmdldElkXTtcclxuICAgICAgICAgICAgICAgIC8vIEEgd2F0Y2hlZCB0YXJnZXQgbWlnaHQgaGF2ZSBiZWVuIHJlbW92ZWQgYWxyZWFkeS5cclxuICAgICAgICAgICAgICAgIGlmICh0YXJnZXREYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMubGlzdGVuVGFyZ2V0c1t0YXJnZXRJZF0gPSB0YXJnZXREYXRhLndpdGhSZXN1bWVUb2tlbihjaGFuZ2UucmVzdW1lVG9rZW4sIHNuYXBzaG90VmVyc2lvbik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyBSZS1lc3RhYmxpc2ggbGlzdGVucyBmb3IgdGhlIHRhcmdldHMgdGhhdCBoYXZlIGJlZW4gaW52YWxpZGF0ZWQgYnlcclxuICAgICAgICAvLyBleGlzdGVuY2UgZmlsdGVyIG1pc21hdGNoZXMuXHJcbiAgICAgICAgcmVtb3RlRXZlbnQudGFyZ2V0TWlzbWF0Y2hlcy5mb3JFYWNoKGZ1bmN0aW9uICh0YXJnZXRJZCkge1xyXG4gICAgICAgICAgICB2YXIgdGFyZ2V0RGF0YSA9IF90aGlzLmxpc3RlblRhcmdldHNbdGFyZ2V0SWRdO1xyXG4gICAgICAgICAgICBpZiAoIXRhcmdldERhdGEpIHtcclxuICAgICAgICAgICAgICAgIC8vIEEgd2F0Y2hlZCB0YXJnZXQgbWlnaHQgaGF2ZSBiZWVuIHJlbW92ZWQgYWxyZWFkeS5cclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBDbGVhciB0aGUgcmVzdW1lIHRva2VuIGZvciB0aGUgdGFyZ2V0LCBzaW5jZSB3ZSdyZSBpbiBhIGtub3duIG1pc21hdGNoXHJcbiAgICAgICAgICAgIC8vIHN0YXRlLlxyXG4gICAgICAgICAgICBfdGhpcy5saXN0ZW5UYXJnZXRzW3RhcmdldElkXSA9IHRhcmdldERhdGEud2l0aFJlc3VtZVRva2VuKGVtcHR5Qnl0ZVN0cmluZygpLCB0YXJnZXREYXRhLnNuYXBzaG90VmVyc2lvbik7XHJcbiAgICAgICAgICAgIC8vIENhdXNlIGEgaGFyZCByZXNldCBieSB1bndhdGNoaW5nIGFuZCByZXdhdGNoaW5nIGltbWVkaWF0ZWx5LCBidXRcclxuICAgICAgICAgICAgLy8gZGVsaWJlcmF0ZWx5IGRvbid0IHNlbmQgYSByZXN1bWUgdG9rZW4gc28gdGhhdCB3ZSBnZXQgYSBmdWxsIHVwZGF0ZS5cclxuICAgICAgICAgICAgX3RoaXMuc2VuZFVud2F0Y2hSZXF1ZXN0KHRhcmdldElkKTtcclxuICAgICAgICAgICAgLy8gTWFyayB0aGUgdGFyZ2V0IHdlIHNlbmQgYXMgYmVpbmcgb24gYmVoYWxmIG9mIGFuIGV4aXN0ZW5jZSBmaWx0ZXJcclxuICAgICAgICAgICAgLy8gbWlzbWF0Y2gsIGJ1dCBkb24ndCBhY3R1YWxseSByZXRhaW4gdGhhdCBpbiBsaXN0ZW5UYXJnZXRzLiBUaGlzIGVuc3VyZXNcclxuICAgICAgICAgICAgLy8gdGhhdCB3ZSBmbGFnIHRoZSBmaXJzdCByZS1saXN0ZW4gdGhpcyB3YXkgd2l0aG91dCBpbXBhY3RpbmcgZnV0dXJlXHJcbiAgICAgICAgICAgIC8vIGxpc3RlbnMgb2YgdGhpcyB0YXJnZXQgKHRoYXQgbWlnaHQgaGFwcGVuIGUuZy4gb24gcmVjb25uZWN0KS5cclxuICAgICAgICAgICAgdmFyIHJlcXVlc3RUYXJnZXREYXRhID0gbmV3IFRhcmdldERhdGEodGFyZ2V0RGF0YS50YXJnZXQsIHRhcmdldElkLCBUYXJnZXRQdXJwb3NlLkV4aXN0ZW5jZUZpbHRlck1pc21hdGNoLCB0YXJnZXREYXRhLnNlcXVlbmNlTnVtYmVyKTtcclxuICAgICAgICAgICAgX3RoaXMuc2VuZFdhdGNoUmVxdWVzdChyZXF1ZXN0VGFyZ2V0RGF0YSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gRmluYWxseSByYWlzZSByZW1vdGUgZXZlbnRcclxuICAgICAgICByZXR1cm4gdGhpcy5zeW5jRW5naW5lLmFwcGx5UmVtb3RlRXZlbnQocmVtb3RlRXZlbnQpO1xyXG4gICAgfTtcclxuICAgIC8qKiBIYW5kbGVzIGFuIGVycm9yIG9uIGEgdGFyZ2V0ICovXHJcbiAgICBSZW1vdGVTdG9yZS5wcm90b3R5cGUuaGFuZGxlVGFyZ2V0RXJyb3IgPSBmdW5jdGlvbiAod2F0Y2hDaGFuZ2UpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIGFzc2VydCghIXdhdGNoQ2hhbmdlLmNhdXNlLCAnSGFuZGxpbmcgdGFyZ2V0IGVycm9yIHdpdGhvdXQgYSBjYXVzZScpO1xyXG4gICAgICAgIHZhciBlcnJvciA9IHdhdGNoQ2hhbmdlLmNhdXNlO1xyXG4gICAgICAgIHZhciBwcm9taXNlQ2hhaW4gPSBQcm9taXNlLnJlc29sdmUoKTtcclxuICAgICAgICB3YXRjaENoYW5nZS50YXJnZXRJZHMuZm9yRWFjaChmdW5jdGlvbiAodGFyZ2V0SWQpIHtcclxuICAgICAgICAgICAgcHJvbWlzZUNoYWluID0gcHJvbWlzZUNoYWluLnRoZW4oZnVuY3Rpb24gKCkgeyByZXR1cm4gdHNsaWIuX19hd2FpdGVyKF90aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRzbGliLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIEEgd2F0Y2hlZCB0YXJnZXQgbWlnaHQgaGF2ZSBiZWVuIHJlbW92ZWQgYWxyZWFkeS5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoY29udGFpbnModGhpcy5saXN0ZW5UYXJnZXRzLCB0YXJnZXRJZCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMubGlzdGVuVGFyZ2V0c1t0YXJnZXRJZF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMud2F0Y2hDaGFuZ2VBZ2dyZWdhdG9yLnJlbW92ZVRhcmdldCh0YXJnZXRJZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0aGlzLnN5bmNFbmdpbmUucmVqZWN0TGlzdGVuKHRhcmdldElkLCBlcnJvcildO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7IH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBwcm9taXNlQ2hhaW47XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBBdHRlbXB0cyB0byBmaWxsIG91ciB3cml0ZSBwaXBlbGluZSB3aXRoIHdyaXRlcyBmcm9tIHRoZSBMb2NhbFN0b3JlLlxyXG4gICAgICpcclxuICAgICAqIENhbGxlZCBpbnRlcm5hbGx5IHRvIGJvb3RzdHJhcCBvciByZWZpbGwgdGhlIHdyaXRlIHBpcGVsaW5lIGFuZCBieVxyXG4gICAgICogU3luY0VuZ2luZSB3aGVuZXZlciB0aGVyZSBhcmUgbmV3IG11dGF0aW9ucyB0byBwcm9jZXNzLlxyXG4gICAgICpcclxuICAgICAqIFN0YXJ0cyB0aGUgd3JpdGUgc3RyZWFtIGlmIG5lY2Vzc2FyeS5cclxuICAgICAqL1xyXG4gICAgUmVtb3RlU3RvcmUucHJvdG90eXBlLmZpbGxXcml0ZVBpcGVsaW5lID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0c2xpYi5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGxhc3RCYXRjaElkUmV0cmlldmVkLCBiYXRjaDtcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLmNhbkFkZFRvV3JpdGVQaXBlbGluZSgpKSByZXR1cm4gWzMgLypicmVhayovLCA0XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGFzdEJhdGNoSWRSZXRyaWV2ZWQgPSB0aGlzLndyaXRlUGlwZWxpbmUubGVuZ3RoID4gMFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB0aGlzLndyaXRlUGlwZWxpbmVbdGhpcy53cml0ZVBpcGVsaW5lLmxlbmd0aCAtIDFdLmJhdGNoSWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogQkFUQ0hJRF9VTktOT1dOO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmxvY2FsU3RvcmUubmV4dE11dGF0aW9uQmF0Y2gobGFzdEJhdGNoSWRSZXRyaWV2ZWQpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhdGNoID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShiYXRjaCA9PT0gbnVsbCkpIHJldHVybiBbMyAvKmJyZWFrKi8sIDJdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy53cml0ZVBpcGVsaW5lLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy53cml0ZVN0cmVhbS5tYXJrSWRsZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDRdO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRUb1dyaXRlUGlwZWxpbmUoYmF0Y2gpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmZpbGxXcml0ZVBpcGVsaW5lKCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDQ7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5zaG91bGRTdGFydFdyaXRlU3RyZWFtKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhcnRXcml0ZVN0cmVhbSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgd2UgY2FuIGFkZCB0byB0aGUgd3JpdGUgcGlwZWxpbmUgKGkuZS4gdGhlIG5ldHdvcmsgaXNcclxuICAgICAqIGVuYWJsZWQgYW5kIHRoZSB3cml0ZSBwaXBlbGluZSBpcyBub3QgZnVsbCkuXHJcbiAgICAgKi9cclxuICAgIFJlbW90ZVN0b3JlLnByb3RvdHlwZS5jYW5BZGRUb1dyaXRlUGlwZWxpbmUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuICh0aGlzLmNhblVzZU5ldHdvcmsoKSAmJiB0aGlzLndyaXRlUGlwZWxpbmUubGVuZ3RoIDwgTUFYX1BFTkRJTkdfV1JJVEVTKTtcclxuICAgIH07XHJcbiAgICAvLyBGb3IgdGVzdGluZ1xyXG4gICAgUmVtb3RlU3RvcmUucHJvdG90eXBlLm91dHN0YW5kaW5nV3JpdGVzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLndyaXRlUGlwZWxpbmUubGVuZ3RoO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUXVldWVzIGFkZGl0aW9uYWwgd3JpdGVzIHRvIGJlIHNlbnQgdG8gdGhlIHdyaXRlIHN0cmVhbSwgc2VuZGluZyB0aGVtXHJcbiAgICAgKiBpbW1lZGlhdGVseSBpZiB0aGUgd3JpdGUgc3RyZWFtIGlzIGVzdGFibGlzaGVkLlxyXG4gICAgICovXHJcbiAgICBSZW1vdGVTdG9yZS5wcm90b3R5cGUuYWRkVG9Xcml0ZVBpcGVsaW5lID0gZnVuY3Rpb24gKGJhdGNoKSB7XHJcbiAgICAgICAgYXNzZXJ0KHRoaXMuY2FuQWRkVG9Xcml0ZVBpcGVsaW5lKCksICdhZGRUb1dyaXRlUGlwZWxpbmUgY2FsbGVkIHdoZW4gcGlwZWxpbmUgaXMgZnVsbCcpO1xyXG4gICAgICAgIHRoaXMud3JpdGVQaXBlbGluZS5wdXNoKGJhdGNoKTtcclxuICAgICAgICBpZiAodGhpcy53cml0ZVN0cmVhbS5pc09wZW4oKSAmJiB0aGlzLndyaXRlU3RyZWFtLmhhbmRzaGFrZUNvbXBsZXRlKSB7XHJcbiAgICAgICAgICAgIHRoaXMud3JpdGVTdHJlYW0ud3JpdGVNdXRhdGlvbnMoYmF0Y2gubXV0YXRpb25zKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgUmVtb3RlU3RvcmUucHJvdG90eXBlLnNob3VsZFN0YXJ0V3JpdGVTdHJlYW0gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuICh0aGlzLmNhblVzZU5ldHdvcmsoKSAmJlxyXG4gICAgICAgICAgICAhdGhpcy53cml0ZVN0cmVhbS5pc1N0YXJ0ZWQoKSAmJlxyXG4gICAgICAgICAgICB0aGlzLndyaXRlUGlwZWxpbmUubGVuZ3RoID4gMCk7XHJcbiAgICB9O1xyXG4gICAgUmVtb3RlU3RvcmUucHJvdG90eXBlLnN0YXJ0V3JpdGVTdHJlYW0gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgYXNzZXJ0KHRoaXMuc2hvdWxkU3RhcnRXcml0ZVN0cmVhbSgpLCAnc3RhcnRXcml0ZVN0cmVhbSgpIGNhbGxlZCB3aGVuIHNob3VsZFN0YXJ0V3JpdGVTdHJlYW0oKSBpcyBmYWxzZS4nKTtcclxuICAgICAgICB0aGlzLndyaXRlU3RyZWFtLnN0YXJ0KCk7XHJcbiAgICB9O1xyXG4gICAgUmVtb3RlU3RvcmUucHJvdG90eXBlLm9uV3JpdGVTdHJlYW1PcGVuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0c2xpYi5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy53cml0ZVN0cmVhbS53cml0ZUhhbmRzaGFrZSgpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBSZW1vdGVTdG9yZS5wcm90b3R5cGUub25Xcml0ZUhhbmRzaGFrZUNvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgLy8gUmVjb3JkIHRoZSBzdHJlYW0gdG9rZW4uXHJcbiAgICAgICAgcmV0dXJuIHRoaXMubG9jYWxTdG9yZVxyXG4gICAgICAgICAgICAuc2V0TGFzdFN0cmVhbVRva2VuKHRoaXMud3JpdGVTdHJlYW0ubGFzdFN0cmVhbVRva2VuKVxyXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIC8vIFNlbmQgdGhlIHdyaXRlIHBpcGVsaW5lIG5vdyB0aGF0IHRoZSBzdHJlYW0gaXMgZXN0YWJsaXNoZWQuXHJcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBfdGhpcy53cml0ZVBpcGVsaW5lOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGJhdGNoID0gX2FbX2ldO1xyXG4gICAgICAgICAgICAgICAgX3RoaXMud3JpdGVTdHJlYW0ud3JpdGVNdXRhdGlvbnMoYmF0Y2gubXV0YXRpb25zKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5jYXRjaChpZ25vcmVJZlByaW1hcnlMZWFzZUxvc3MpO1xyXG4gICAgfTtcclxuICAgIFJlbW90ZVN0b3JlLnByb3RvdHlwZS5vbk11dGF0aW9uUmVzdWx0ID0gZnVuY3Rpb24gKGNvbW1pdFZlcnNpb24sIHJlc3VsdHMpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIC8vIFRoaXMgaXMgYSByZXNwb25zZSB0byBhIHdyaXRlIGNvbnRhaW5pbmcgbXV0YXRpb25zIGFuZCBzaG91bGQgYmVcclxuICAgICAgICAvLyBjb3JyZWxhdGVkIHRvIHRoZSBmaXJzdCB3cml0ZSBpbiBvdXIgd3JpdGUgcGlwZWxpbmUuXHJcbiAgICAgICAgYXNzZXJ0KHRoaXMud3JpdGVQaXBlbGluZS5sZW5ndGggPiAwLCAnR290IHJlc3VsdCBmb3IgZW1wdHkgd3JpdGUgcGlwZWxpbmUnKTtcclxuICAgICAgICB2YXIgYmF0Y2ggPSB0aGlzLndyaXRlUGlwZWxpbmUuc2hpZnQoKTtcclxuICAgICAgICB2YXIgc3VjY2VzcyA9IE11dGF0aW9uQmF0Y2hSZXN1bHQuZnJvbShiYXRjaCwgY29tbWl0VmVyc2lvbiwgcmVzdWx0cywgdGhpcy53cml0ZVN0cmVhbS5sYXN0U3RyZWFtVG9rZW4pO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnN5bmNFbmdpbmUuYXBwbHlTdWNjZXNzZnVsV3JpdGUoc3VjY2VzcykudGhlbihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIC8vIEl0J3MgcG9zc2libGUgdGhhdCB3aXRoIHRoZSBjb21wbGV0aW9uIG9mIHRoaXMgbXV0YXRpb24gYW5vdGhlclxyXG4gICAgICAgICAgICAvLyBzbG90IGhhcyBmcmVlZCB1cC5cclxuICAgICAgICAgICAgcmV0dXJuIF90aGlzLmZpbGxXcml0ZVBpcGVsaW5lKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgUmVtb3RlU3RvcmUucHJvdG90eXBlLm9uV3JpdGVTdHJlYW1DbG9zZSA9IGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgIHJldHVybiB0c2xpYi5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGVycm9ySGFuZGxpbmc7XHJcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYi5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIGlmIChlcnJvciA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gR3JhY2VmdWwgc3RvcCAoZHVlIHRvIHN0b3AoKSBvciBpZGxlIHRpbWVvdXQpLiBNYWtlIHN1cmUgdGhhdCdzXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gZGVzaXJhYmxlLlxyXG4gICAgICAgICAgICAgICAgICAgIGFzc2VydCghdGhpcy5zaG91bGRTdGFydFdyaXRlU3RyZWFtKCksICdXcml0ZSBzdHJlYW0gd2FzIHN0b3BwZWQgZ3JhY2VmdWxseSB3aGlsZSBzdGlsbCBuZWVkZWQuJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBJZiB0aGUgd3JpdGUgc3RyZWFtIGNsb3NlZCBkdWUgdG8gYW4gZXJyb3IsIGludm9rZSB0aGUgZXJyb3IgY2FsbGJhY2tzIGlmXHJcbiAgICAgICAgICAgICAgICAvLyB0aGVyZSBhcmUgcGVuZGluZyB3cml0ZXMuXHJcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IgJiYgdGhpcy53cml0ZVBpcGVsaW5lLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBlcnJvckhhbmRsaW5nID0gdm9pZCAwO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLndyaXRlU3RyZWFtLmhhbmRzaGFrZUNvbXBsZXRlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgZXJyb3IgYWZmZWN0cyB0aGUgYWN0dWFsIHdyaXRlLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvckhhbmRsaW5nID0gdGhpcy5oYW5kbGVXcml0ZUVycm9yKGVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZXJlIHdhcyBhbiBlcnJvciBiZWZvcmUgdGhlIGhhbmRzaGFrZSBoYXMgZmluaXNoZWQsIGl0J3NcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gcG9zc2libGUgdGhhdCB0aGUgc2VydmVyIGlzIHVuYWJsZSB0byBwcm9jZXNzIHRoZSBzdHJlYW0gdG9rZW5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gd2UncmUgc2VuZGluZy4gKFBlcmhhcHMgaXQncyB0b28gb2xkPylcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JIYW5kbGluZyA9IHRoaXMuaGFuZGxlSGFuZHNoYWtlRXJyb3IoZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgZXJyb3JIYW5kbGluZy50aGVuKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoZSB3cml0ZSBzdHJlYW0gbWlnaHQgaGF2ZSBiZWVuIHN0YXJ0ZWQgYnkgcmVmaWxsaW5nIHRoZSB3cml0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcGlwZWxpbmUgZm9yIGZhaWxlZCB3cml0ZXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfdGhpcy5zaG91bGRTdGFydFdyaXRlU3RyZWFtKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5zdGFydFdyaXRlU3RyZWFtKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgUmVtb3RlU3RvcmUucHJvdG90eXBlLmhhbmRsZUhhbmRzaGFrZUVycm9yID0gZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICAgICAgcmV0dXJuIHRzbGliLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHNsaWIuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBSZXNldCB0aGUgdG9rZW4gaWYgaXQncyBhIHBlcm1hbmVudCBlcnJvciwgc2lnbmFsaW5nIHRoZSB3cml0ZSBzdHJlYW0gaXNcclxuICAgICAgICAgICAgICAgIC8vIG5vIGxvbmdlciB2YWxpZC4gTm90ZSB0aGF0IHRoZSBoYW5kc2hha2UgZG9lcyBub3QgY291bnQgYXMgYSB3cml0ZTogc2VlXHJcbiAgICAgICAgICAgICAgICAvLyBjb21tZW50cyBvbiBpc1Blcm1hbmVudFdyaXRlRXJyb3IgZm9yIGRldGFpbHMuXHJcbiAgICAgICAgICAgICAgICBpZiAoaXNQZXJtYW5lbnRFcnJvcihlcnJvci5jb2RlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlYnVnKExPR19UQUckOCwgJ1JlbW90ZVN0b3JlIGVycm9yIGJlZm9yZSBjb21wbGV0ZWQgaGFuZHNoYWtlOyByZXNldHRpbmcgc3RyZWFtIHRva2VuOiAnLCB0aGlzLndyaXRlU3RyZWFtLmxhc3RTdHJlYW1Ub2tlbik7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy53cml0ZVN0cmVhbS5sYXN0U3RyZWFtVG9rZW4gPSBlbXB0eUJ5dGVTdHJpbmcoKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdGhpcy5sb2NhbFN0b3JlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2V0TGFzdFN0cmVhbVRva2VuKGVtcHR5Qnl0ZVN0cmluZygpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGlnbm9yZUlmUHJpbWFyeUxlYXNlTG9zcyldO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBSZW1vdGVTdG9yZS5wcm90b3R5cGUuaGFuZGxlV3JpdGVFcnJvciA9IGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgIHJldHVybiB0c2xpYi5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGJhdGNoO1xyXG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgICAgICByZXR1cm4gdHNsaWIuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBPbmx5IGhhbmRsZSBwZXJtYW5lbnQgZXJyb3JzIGhlcmUuIElmIGl0J3MgdHJhbnNpZW50LCBqdXN0IGxldCB0aGUgcmV0cnlcclxuICAgICAgICAgICAgICAgIC8vIGxvZ2ljIGtpY2sgaW4uXHJcbiAgICAgICAgICAgICAgICBpZiAoaXNQZXJtYW5lbnRXcml0ZUVycm9yKGVycm9yLmNvZGUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYmF0Y2ggPSB0aGlzLndyaXRlUGlwZWxpbmUuc2hpZnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBJbiB0aGlzIGNhc2UgaXQncyBhbHNvIHVubGlrZWx5IHRoYXQgdGhlIHNlcnZlciBpdHNlbGYgaXMgbWVsdGluZ1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGRvd24gLS0gdGhpcyB3YXMganVzdCBhIGJhZCByZXF1ZXN0IHNvIGluaGliaXQgYmFja29mZiBvbiB0aGUgbmV4dFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIHJlc3RhcnQuXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy53cml0ZVN0cmVhbS5pbmhpYml0QmFja29mZigpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0aGlzLnN5bmNFbmdpbmVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZWplY3RGYWlsZWRXcml0ZShiYXRjaC5iYXRjaElkLCBlcnJvcilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEl0J3MgcG9zc2libGUgdGhhdCB3aXRoIHRoZSBjb21wbGV0aW9uIG9mIHRoaXMgbXV0YXRpb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFub3RoZXIgc2xvdCBoYXMgZnJlZWQgdXAuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuZmlsbFdyaXRlUGlwZWxpbmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSldO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBSZW1vdGVTdG9yZS5wcm90b3R5cGUuY3JlYXRlVHJhbnNhY3Rpb24gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBUcmFuc2FjdGlvbih0aGlzLmRhdGFzdG9yZSk7XHJcbiAgICB9O1xyXG4gICAgUmVtb3RlU3RvcmUucHJvdG90eXBlLnJlc3RhcnROZXR3b3JrID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0c2xpYi5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5uZXR3b3JrRW5hYmxlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmRpc2FibGVOZXR3b3JrSW50ZXJuYWwoKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub25saW5lU3RhdGVUcmFja2VyLnNldChPbmxpbmVTdGF0ZS5Vbmtub3duKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5lbmFibGVOZXR3b3JrKCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIFJlbW90ZVN0b3JlLnByb3RvdHlwZS5oYW5kbGVDcmVkZW50aWFsQ2hhbmdlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0c2xpYi5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLmNhblVzZU5ldHdvcmsoKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgMl07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRlYXIgZG93biBhbmQgcmUtY3JlYXRlIG91ciBuZXR3b3JrIHN0cmVhbXMuIFRoaXMgd2lsbCBlbnN1cmUgd2UgZ2V0IGEgZnJlc2ggYXV0aCB0b2tlblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBmb3IgdGhlIG5ldyB1c2VyIGFuZCByZS1maWxsIHRoZSB3cml0ZSBwaXBlbGluZSB3aXRoIG5ldyBtdXRhdGlvbnMgZnJvbSB0aGUgTG9jYWxTdG9yZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAoc2luY2UgbXV0YXRpb25zIGFyZSBwZXItdXNlcikuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlYnVnKExPR19UQUckOCwgJ1JlbW90ZVN0b3JlIHJlc3RhcnRpbmcgc3RyZWFtcyBmb3IgbmV3IGNyZWRlbnRpYWwnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5yZXN0YXJ0TmV0d29yaygpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSAyO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFRvZ2dsZXMgdGhlIG5ldHdvcmsgc3RhdGUgd2hlbiB0aGUgY2xpZW50IGdhaW5zIG9yIGxvc2VzIGl0cyBwcmltYXJ5IGxlYXNlLlxyXG4gICAgICovXHJcbiAgICBSZW1vdGVTdG9yZS5wcm90b3R5cGUuYXBwbHlQcmltYXJ5U3RhdGUgPSBmdW5jdGlvbiAoaXNQcmltYXJ5KSB7XHJcbiAgICAgICAgcmV0dXJuIHRzbGliLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHNsaWIuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmlzUHJpbWFyeSA9IGlzUHJpbWFyeTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEoaXNQcmltYXJ5ICYmIHRoaXMubmV0d29ya0VuYWJsZWQpKSByZXR1cm4gWzMgLypicmVhayovLCAyXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5lbmFibGVOZXR3b3JrKCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCA0XTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghIWlzUHJpbWFyeSkgcmV0dXJuIFszIC8qYnJlYWsqLywgNF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuZGlzYWJsZU5ldHdvcmtJbnRlcm5hbCgpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vbmxpbmVTdGF0ZVRyYWNrZXIuc2V0KE9ubGluZVN0YXRlLlVua25vd24pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDQ7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OiByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBSZW1vdGVTdG9yZTtcclxufSgpKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBJbW11dGFibGUgY2xhc3MgcmVwcmVzZW50aW5nIGEgZ2VvIHBvaW50IGFzIGxhdGl0dWRlLWxvbmdpdHVkZSBwYWlyLlxyXG4gKiBUaGlzIGNsYXNzIGlzIGRpcmVjdGx5IGV4cG9zZWQgaW4gdGhlIHB1YmxpYyBBUEksIGluY2x1ZGluZyBpdHMgY29uc3RydWN0b3IuXHJcbiAqL1xyXG52YXIgR2VvUG9pbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBHZW9Qb2ludChsYXRpdHVkZSwgbG9uZ2l0dWRlKSB7XHJcbiAgICAgICAgdmFsaWRhdGVFeGFjdE51bWJlck9mQXJncygnR2VvUG9pbnQnLCBhcmd1bWVudHMsIDIpO1xyXG4gICAgICAgIHZhbGlkYXRlQXJnVHlwZSgnR2VvUG9pbnQnLCAnbnVtYmVyJywgMSwgbGF0aXR1ZGUpO1xyXG4gICAgICAgIHZhbGlkYXRlQXJnVHlwZSgnR2VvUG9pbnQnLCAnbnVtYmVyJywgMiwgbG9uZ2l0dWRlKTtcclxuICAgICAgICBpZiAoIWlzRmluaXRlKGxhdGl0dWRlKSB8fCBsYXRpdHVkZSA8IC05MCB8fCBsYXRpdHVkZSA+IDkwKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLklOVkFMSURfQVJHVU1FTlQsICdMYXRpdHVkZSBtdXN0IGJlIGEgbnVtYmVyIGJldHdlZW4gLTkwIGFuZCA5MCwgYnV0IHdhczogJyArIGxhdGl0dWRlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCFpc0Zpbml0ZShsb25naXR1ZGUpIHx8IGxvbmdpdHVkZSA8IC0xODAgfHwgbG9uZ2l0dWRlID4gMTgwKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLklOVkFMSURfQVJHVU1FTlQsICdMb25naXR1ZGUgbXVzdCBiZSBhIG51bWJlciBiZXR3ZWVuIC0xODAgYW5kIDE4MCwgYnV0IHdhczogJyArIGxvbmdpdHVkZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX2xhdCA9IGxhdGl0dWRlO1xyXG4gICAgICAgIHRoaXMuX2xvbmcgPSBsb25naXR1ZGU7XHJcbiAgICB9XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoR2VvUG9pbnQucHJvdG90eXBlLCBcImxhdGl0dWRlXCIsIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBSZXR1cm5zIHRoZSBsYXRpdHVkZSBvZiB0aGlzIGdlbyBwb2ludCwgYSBudW1iZXIgYmV0d2VlbiAtOTAgYW5kIDkwLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fbGF0O1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEdlb1BvaW50LnByb3RvdHlwZSwgXCJsb25naXR1ZGVcIiwge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFJldHVybnMgdGhlIGxvbmdpdHVkZSBvZiB0aGlzIGdlbyBwb2ludCwgYSBudW1iZXIgYmV0d2VlbiAtMTgwIGFuZCAxODAuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9sb25nO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgR2VvUG9pbnQucHJvdG90eXBlLmlzRXF1YWwgPSBmdW5jdGlvbiAob3RoZXIpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fbGF0ID09PSBvdGhlci5fbGF0ICYmIHRoaXMuX2xvbmcgPT09IG90aGVyLl9sb25nO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQWN0dWFsbHkgcHJpdmF0ZSB0byBKUyBjb25zdW1lcnMgb2Ygb3VyIEFQSSwgc28gdGhpcyBmdW5jdGlvbiBpcyBwcmVmaXhlZFxyXG4gICAgICogd2l0aCBhbiB1bmRlcnNjb3JlLlxyXG4gICAgICovXHJcbiAgICBHZW9Qb2ludC5wcm90b3R5cGUuX2NvbXBhcmVUbyA9IGZ1bmN0aW9uIChvdGhlcikge1xyXG4gICAgICAgIHJldHVybiAocHJpbWl0aXZlQ29tcGFyYXRvcih0aGlzLl9sYXQsIG90aGVyLl9sYXQpIHx8XHJcbiAgICAgICAgICAgIHByaW1pdGl2ZUNvbXBhcmF0b3IodGhpcy5fbG9uZywgb3RoZXIuX2xvbmcpKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gR2VvUG9pbnQ7XHJcbn0oKSk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKiogVHJhbnNmb3JtcyBhIHZhbHVlIGludG8gYSBzZXJ2ZXItZ2VuZXJhdGVkIHRpbWVzdGFtcC4gKi9cclxudmFyIFNlcnZlclRpbWVzdGFtcFRyYW5zZm9ybSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFNlcnZlclRpbWVzdGFtcFRyYW5zZm9ybSgpIHtcclxuICAgIH1cclxuICAgIFNlcnZlclRpbWVzdGFtcFRyYW5zZm9ybS5wcm90b3R5cGUuYXBwbHlUb0xvY2FsVmlldyA9IGZ1bmN0aW9uIChwcmV2aW91c1ZhbHVlLCBsb2NhbFdyaXRlVGltZSkge1xyXG4gICAgICAgIHJldHVybiBuZXcgU2VydmVyVGltZXN0YW1wVmFsdWUobG9jYWxXcml0ZVRpbWUsIHByZXZpb3VzVmFsdWUpO1xyXG4gICAgfTtcclxuICAgIFNlcnZlclRpbWVzdGFtcFRyYW5zZm9ybS5wcm90b3R5cGUuYXBwbHlUb1JlbW90ZURvY3VtZW50ID0gZnVuY3Rpb24gKHByZXZpb3VzVmFsdWUsIHRyYW5zZm9ybVJlc3VsdCkge1xyXG4gICAgICAgIHJldHVybiB0cmFuc2Zvcm1SZXN1bHQ7XHJcbiAgICB9O1xyXG4gICAgU2VydmVyVGltZXN0YW1wVHJhbnNmb3JtLnByb3RvdHlwZS5jb21wdXRlQmFzZVZhbHVlID0gZnVuY3Rpb24gKHByZXZpb3VzVmFsdWUpIHtcclxuICAgICAgICByZXR1cm4gbnVsbDsgLy8gU2VydmVyIHRpbWVzdGFtcHMgYXJlIGlkZW1wb3RlbnQgYW5kIGRvbid0IHJlcXVpcmUgYSBiYXNlIHZhbHVlLlxyXG4gICAgfTtcclxuICAgIFNlcnZlclRpbWVzdGFtcFRyYW5zZm9ybS5wcm90b3R5cGUuaXNFcXVhbCA9IGZ1bmN0aW9uIChvdGhlcikge1xyXG4gICAgICAgIHJldHVybiBvdGhlciBpbnN0YW5jZW9mIFNlcnZlclRpbWVzdGFtcFRyYW5zZm9ybTtcclxuICAgIH07XHJcbiAgICBTZXJ2ZXJUaW1lc3RhbXBUcmFuc2Zvcm0uaW5zdGFuY2UgPSBuZXcgU2VydmVyVGltZXN0YW1wVHJhbnNmb3JtKCk7XHJcbiAgICByZXR1cm4gU2VydmVyVGltZXN0YW1wVHJhbnNmb3JtO1xyXG59KCkpO1xyXG4vKiogVHJhbnNmb3JtcyBhbiBhcnJheSB2YWx1ZSB2aWEgYSB1bmlvbiBvcGVyYXRpb24uICovXHJcbnZhciBBcnJheVVuaW9uVHJhbnNmb3JtT3BlcmF0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gQXJyYXlVbmlvblRyYW5zZm9ybU9wZXJhdGlvbihlbGVtZW50cykge1xyXG4gICAgICAgIHRoaXMuZWxlbWVudHMgPSBlbGVtZW50cztcclxuICAgIH1cclxuICAgIEFycmF5VW5pb25UcmFuc2Zvcm1PcGVyYXRpb24ucHJvdG90eXBlLmFwcGx5VG9Mb2NhbFZpZXcgPSBmdW5jdGlvbiAocHJldmlvdXNWYWx1ZSwgbG9jYWxXcml0ZVRpbWUpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5hcHBseShwcmV2aW91c1ZhbHVlKTtcclxuICAgIH07XHJcbiAgICBBcnJheVVuaW9uVHJhbnNmb3JtT3BlcmF0aW9uLnByb3RvdHlwZS5hcHBseVRvUmVtb3RlRG9jdW1lbnQgPSBmdW5jdGlvbiAocHJldmlvdXNWYWx1ZSwgdHJhbnNmb3JtUmVzdWx0KSB7XHJcbiAgICAgICAgLy8gVGhlIHNlcnZlciBqdXN0IHNlbmRzIG51bGwgYXMgdGhlIHRyYW5zZm9ybSByZXN1bHQgZm9yIGFycmF5IG9wZXJhdGlvbnMsXHJcbiAgICAgICAgLy8gc28gd2UgaGF2ZSB0byBjYWxjdWxhdGUgYSByZXN1bHQgdGhlIHNhbWUgYXMgd2UgZG8gZm9yIGxvY2FsXHJcbiAgICAgICAgLy8gYXBwbGljYXRpb25zLlxyXG4gICAgICAgIHJldHVybiB0aGlzLmFwcGx5KHByZXZpb3VzVmFsdWUpO1xyXG4gICAgfTtcclxuICAgIEFycmF5VW5pb25UcmFuc2Zvcm1PcGVyYXRpb24ucHJvdG90eXBlLmFwcGx5ID0gZnVuY3Rpb24gKHByZXZpb3VzVmFsdWUpIHtcclxuICAgICAgICB2YXIgcmVzdWx0ID0gY29lcmNlZEZpZWxkVmFsdWVzQXJyYXkocHJldmlvdXNWYWx1ZSk7XHJcbiAgICAgICAgdmFyIF9sb29wXzEgPSBmdW5jdGlvbiAodG9Vbmlvbikge1xyXG4gICAgICAgICAgICBpZiAoIXJlc3VsdC5maW5kKGZ1bmN0aW9uIChlbGVtZW50KSB7IHJldHVybiBlbGVtZW50LmlzRXF1YWwodG9Vbmlvbik7IH0pKSB7XHJcbiAgICAgICAgICAgICAgICByZXN1bHQucHVzaCh0b1VuaW9uKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHRoaXMuZWxlbWVudHM7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciB0b1VuaW9uID0gX2FbX2ldO1xyXG4gICAgICAgICAgICBfbG9vcF8xKHRvVW5pb24pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbmV3IEFycmF5VmFsdWUocmVzdWx0KTtcclxuICAgIH07XHJcbiAgICBBcnJheVVuaW9uVHJhbnNmb3JtT3BlcmF0aW9uLnByb3RvdHlwZS5jb21wdXRlQmFzZVZhbHVlID0gZnVuY3Rpb24gKHByZXZpb3VzVmFsdWUpIHtcclxuICAgICAgICByZXR1cm4gbnVsbDsgLy8gQXJyYXkgdHJhbnNmb3JtcyBhcmUgaWRlbXBvdGVudCBhbmQgZG9uJ3QgcmVxdWlyZSBhIGJhc2UgdmFsdWUuXHJcbiAgICB9O1xyXG4gICAgQXJyYXlVbmlvblRyYW5zZm9ybU9wZXJhdGlvbi5wcm90b3R5cGUuaXNFcXVhbCA9IGZ1bmN0aW9uIChvdGhlcikge1xyXG4gICAgICAgIHJldHVybiAob3RoZXIgaW5zdGFuY2VvZiBBcnJheVVuaW9uVHJhbnNmb3JtT3BlcmF0aW9uICYmXHJcbiAgICAgICAgICAgIGFycmF5RXF1YWxzKG90aGVyLmVsZW1lbnRzLCB0aGlzLmVsZW1lbnRzKSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEFycmF5VW5pb25UcmFuc2Zvcm1PcGVyYXRpb247XHJcbn0oKSk7XHJcbi8qKiBUcmFuc2Zvcm1zIGFuIGFycmF5IHZhbHVlIHZpYSBhIHJlbW92ZSBvcGVyYXRpb24uICovXHJcbnZhciBBcnJheVJlbW92ZVRyYW5zZm9ybU9wZXJhdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEFycmF5UmVtb3ZlVHJhbnNmb3JtT3BlcmF0aW9uKGVsZW1lbnRzKSB7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50cyA9IGVsZW1lbnRzO1xyXG4gICAgfVxyXG4gICAgQXJyYXlSZW1vdmVUcmFuc2Zvcm1PcGVyYXRpb24ucHJvdG90eXBlLmFwcGx5VG9Mb2NhbFZpZXcgPSBmdW5jdGlvbiAocHJldmlvdXNWYWx1ZSwgbG9jYWxXcml0ZVRpbWUpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5hcHBseShwcmV2aW91c1ZhbHVlKTtcclxuICAgIH07XHJcbiAgICBBcnJheVJlbW92ZVRyYW5zZm9ybU9wZXJhdGlvbi5wcm90b3R5cGUuYXBwbHlUb1JlbW90ZURvY3VtZW50ID0gZnVuY3Rpb24gKHByZXZpb3VzVmFsdWUsIHRyYW5zZm9ybVJlc3VsdCkge1xyXG4gICAgICAgIC8vIFRoZSBzZXJ2ZXIganVzdCBzZW5kcyBudWxsIGFzIHRoZSB0cmFuc2Zvcm0gcmVzdWx0IGZvciBhcnJheSBvcGVyYXRpb25zLFxyXG4gICAgICAgIC8vIHNvIHdlIGhhdmUgdG8gY2FsY3VsYXRlIGEgcmVzdWx0IHRoZSBzYW1lIGFzIHdlIGRvIGZvciBsb2NhbFxyXG4gICAgICAgIC8vIGFwcGxpY2F0aW9ucy5cclxuICAgICAgICByZXR1cm4gdGhpcy5hcHBseShwcmV2aW91c1ZhbHVlKTtcclxuICAgIH07XHJcbiAgICBBcnJheVJlbW92ZVRyYW5zZm9ybU9wZXJhdGlvbi5wcm90b3R5cGUuYXBwbHkgPSBmdW5jdGlvbiAocHJldmlvdXNWYWx1ZSkge1xyXG4gICAgICAgIHZhciByZXN1bHQgPSBjb2VyY2VkRmllbGRWYWx1ZXNBcnJheShwcmV2aW91c1ZhbHVlKTtcclxuICAgICAgICB2YXIgX2xvb3BfMiA9IGZ1bmN0aW9uICh0b1JlbW92ZSkge1xyXG4gICAgICAgICAgICByZXN1bHQgPSByZXN1bHQuZmlsdGVyKGZ1bmN0aW9uIChlbGVtZW50KSB7IHJldHVybiAhZWxlbWVudC5pc0VxdWFsKHRvUmVtb3ZlKTsgfSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gdGhpcy5lbGVtZW50czsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgdmFyIHRvUmVtb3ZlID0gX2FbX2ldO1xyXG4gICAgICAgICAgICBfbG9vcF8yKHRvUmVtb3ZlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG5ldyBBcnJheVZhbHVlKHJlc3VsdCk7XHJcbiAgICB9O1xyXG4gICAgQXJyYXlSZW1vdmVUcmFuc2Zvcm1PcGVyYXRpb24ucHJvdG90eXBlLmNvbXB1dGVCYXNlVmFsdWUgPSBmdW5jdGlvbiAocHJldmlvdXNWYWx1ZSkge1xyXG4gICAgICAgIHJldHVybiBudWxsOyAvLyBBcnJheSB0cmFuc2Zvcm1zIGFyZSBpZGVtcG90ZW50IGFuZCBkb24ndCByZXF1aXJlIGEgYmFzZSB2YWx1ZS5cclxuICAgIH07XHJcbiAgICBBcnJheVJlbW92ZVRyYW5zZm9ybU9wZXJhdGlvbi5wcm90b3R5cGUuaXNFcXVhbCA9IGZ1bmN0aW9uIChvdGhlcikge1xyXG4gICAgICAgIHJldHVybiAob3RoZXIgaW5zdGFuY2VvZiBBcnJheVJlbW92ZVRyYW5zZm9ybU9wZXJhdGlvbiAmJlxyXG4gICAgICAgICAgICBhcnJheUVxdWFscyhvdGhlci5lbGVtZW50cywgdGhpcy5lbGVtZW50cykpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBBcnJheVJlbW92ZVRyYW5zZm9ybU9wZXJhdGlvbjtcclxufSgpKTtcclxuLyoqXHJcbiAqIEltcGxlbWVudHMgdGhlIGJhY2tlbmQgc2VtYW50aWNzIGZvciBsb2NhbGx5IGNvbXB1dGVkIE5VTUVSSUNfQUREIChpbmNyZW1lbnQpXHJcbiAqIHRyYW5zZm9ybXMuIENvbnZlcnRzIGFsbCBmaWVsZCB2YWx1ZXMgdG8gaW50ZWdlcnMgb3IgZG91YmxlcywgYnV0IHVubGlrZSB0aGVcclxuICogYmFja2VuZCBkb2VzIG5vdCBjYXAgaW50ZWdlciB2YWx1ZXMgYXQgMl42My4gSW5zdGVhZCwgSmF2YVNjcmlwdCBudW1iZXJcclxuICogYXJpdGhtZXRpYyBpcyB1c2VkIGFuZCBwcmVjaXNpb24gbG9zcyBjYW4gb2NjdXIgZm9yIHZhbHVlcyBncmVhdGVyIHRoYW4gMl41My5cclxuICovXHJcbnZhciBOdW1lcmljSW5jcmVtZW50VHJhbnNmb3JtT3BlcmF0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gTnVtZXJpY0luY3JlbWVudFRyYW5zZm9ybU9wZXJhdGlvbihvcGVyYW5kKSB7XHJcbiAgICAgICAgdGhpcy5vcGVyYW5kID0gb3BlcmFuZDtcclxuICAgIH1cclxuICAgIE51bWVyaWNJbmNyZW1lbnRUcmFuc2Zvcm1PcGVyYXRpb24ucHJvdG90eXBlLmFwcGx5VG9Mb2NhbFZpZXcgPSBmdW5jdGlvbiAocHJldmlvdXNWYWx1ZSwgbG9jYWxXcml0ZVRpbWUpIHtcclxuICAgICAgICB2YXIgYmFzZVZhbHVlID0gdGhpcy5jb21wdXRlQmFzZVZhbHVlKHByZXZpb3VzVmFsdWUpO1xyXG4gICAgICAgIC8vIFBPUlRJTkcgTk9URTogU2luY2UgSmF2YVNjcmlwdCdzIGludGVnZXIgYXJpdGhtZXRpYyBpcyBsaW1pdGVkIHRvIDUzIGJpdFxyXG4gICAgICAgIC8vIHByZWNpc2lvbiBhbmQgcmVzb2x2ZXMgb3ZlcmZsb3dzIGJ5IHJlZHVjaW5nIHByZWNpc2lvbiwgd2UgZG8gbm90XHJcbiAgICAgICAgLy8gbWFudWFsbHkgY2FwIG92ZXJmbG93cyBhdCAyXjYzLlxyXG4gICAgICAgIC8vIFJldHVybiBhbiBpbnRlZ2VyIHZhbHVlIGlmZiB0aGUgcHJldmlvdXMgdmFsdWUgYW5kIHRoZSBvcGVyYW5kIGlzIGFuXHJcbiAgICAgICAgLy8gaW50ZWdlci5cclxuICAgICAgICBpZiAoYmFzZVZhbHVlIGluc3RhbmNlb2YgSW50ZWdlclZhbHVlICYmXHJcbiAgICAgICAgICAgIHRoaXMub3BlcmFuZCBpbnN0YW5jZW9mIEludGVnZXJWYWx1ZSkge1xyXG4gICAgICAgICAgICB2YXIgc3VtID0gYmFzZVZhbHVlLmludGVybmFsVmFsdWUgKyB0aGlzLm9wZXJhbmQuaW50ZXJuYWxWYWx1ZTtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBJbnRlZ2VyVmFsdWUoc3VtKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHZhciBzdW0gPSBiYXNlVmFsdWUuaW50ZXJuYWxWYWx1ZSArIHRoaXMub3BlcmFuZC5pbnRlcm5hbFZhbHVlO1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IERvdWJsZVZhbHVlKHN1bSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIE51bWVyaWNJbmNyZW1lbnRUcmFuc2Zvcm1PcGVyYXRpb24ucHJvdG90eXBlLmFwcGx5VG9SZW1vdGVEb2N1bWVudCA9IGZ1bmN0aW9uIChwcmV2aW91c1ZhbHVlLCB0cmFuc2Zvcm1SZXN1bHQpIHtcclxuICAgICAgICBhc3NlcnQodHJhbnNmb3JtUmVzdWx0ICE9PSBudWxsLCBcIkRpZG4ndCByZWNlaXZlIHRyYW5zZm9ybVJlc3VsdCBmb3IgTlVNRVJJQ19BREQgdHJhbnNmb3JtXCIpO1xyXG4gICAgICAgIHJldHVybiB0cmFuc2Zvcm1SZXN1bHQ7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBJbnNwZWN0cyB0aGUgcHJvdmlkZWQgdmFsdWUsIHJldHVybmluZyB0aGUgcHJvdmlkZWQgdmFsdWUgaWYgaXQgaXMgYWxyZWFkeVxyXG4gICAgICogYSBOdW1iZXJWYWx1ZSwgb3RoZXJ3aXNlIHJldHVybmluZyBhIGNvZXJjZWQgSW50ZWdlclZhbHVlIG9mIDAuXHJcbiAgICAgKi9cclxuICAgIE51bWVyaWNJbmNyZW1lbnRUcmFuc2Zvcm1PcGVyYXRpb24ucHJvdG90eXBlLmNvbXB1dGVCYXNlVmFsdWUgPSBmdW5jdGlvbiAocHJldmlvdXNWYWx1ZSkge1xyXG4gICAgICAgIHJldHVybiBwcmV2aW91c1ZhbHVlIGluc3RhbmNlb2YgTnVtYmVyVmFsdWVcclxuICAgICAgICAgICAgPyBwcmV2aW91c1ZhbHVlXHJcbiAgICAgICAgICAgIDogbmV3IEludGVnZXJWYWx1ZSgwKTtcclxuICAgIH07XHJcbiAgICBOdW1lcmljSW5jcmVtZW50VHJhbnNmb3JtT3BlcmF0aW9uLnByb3RvdHlwZS5pc0VxdWFsID0gZnVuY3Rpb24gKG90aGVyKSB7XHJcbiAgICAgICAgcmV0dXJuIChvdGhlciBpbnN0YW5jZW9mIE51bWVyaWNJbmNyZW1lbnRUcmFuc2Zvcm1PcGVyYXRpb24gJiZcclxuICAgICAgICAgICAgdGhpcy5vcGVyYW5kLmlzRXF1YWwob3RoZXIub3BlcmFuZCkpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBOdW1lcmljSW5jcmVtZW50VHJhbnNmb3JtT3BlcmF0aW9uO1xyXG59KCkpO1xyXG5mdW5jdGlvbiBjb2VyY2VkRmllbGRWYWx1ZXNBcnJheSh2YWx1ZSkge1xyXG4gICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgQXJyYXlWYWx1ZSkge1xyXG4gICAgICAgIHJldHVybiB2YWx1ZS5pbnRlcm5hbFZhbHVlLnNsaWNlKCk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICAvLyBjb2VyY2UgdG8gZW1wdHkgYXJyYXkuXHJcbiAgICAgICAgcmV0dXJuIFtdO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG52YXIgRXhpc3RlbmNlRmlsdGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgLy8gVE9ETyhiLzMzMDc4MTYzKToganVzdCB1c2Ugc2ltcGxlc3QgZm9ybSBvZiBleGlzdGVuY2UgZmlsdGVyIGZvciBub3dcclxuICAgIGZ1bmN0aW9uIEV4aXN0ZW5jZUZpbHRlcihjb3VudCkge1xyXG4gICAgICAgIHRoaXMuY291bnQgPSBjb3VudDtcclxuICAgIH1cclxuICAgIEV4aXN0ZW5jZUZpbHRlci5wcm90b3R5cGUuaXNFcXVhbCA9IGZ1bmN0aW9uIChvdGhlcikge1xyXG4gICAgICAgIHJldHVybiBvdGhlciAmJiBvdGhlci5jb3VudCA9PT0gdGhpcy5jb3VudDtcclxuICAgIH07XHJcbiAgICByZXR1cm4gRXhpc3RlbmNlRmlsdGVyO1xyXG59KCkpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxudmFyIERJUkVDVElPTlMgPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGRpcnMgPSB7fTtcclxuICAgIGRpcnNbRGlyZWN0aW9uLkFTQ0VORElORy5uYW1lXSA9ICdBU0NFTkRJTkcnO1xyXG4gICAgZGlyc1tEaXJlY3Rpb24uREVTQ0VORElORy5uYW1lXSA9ICdERVNDRU5ESU5HJztcclxuICAgIHJldHVybiBkaXJzO1xyXG59KSgpO1xyXG52YXIgT1BFUkFUT1JTID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBvcHMgPSB7fTtcclxuICAgIG9wc1tPcGVyYXRvci5MRVNTX1RIQU4ubmFtZV0gPSAnTEVTU19USEFOJztcclxuICAgIG9wc1tPcGVyYXRvci5MRVNTX1RIQU5fT1JfRVFVQUwubmFtZV0gPSAnTEVTU19USEFOX09SX0VRVUFMJztcclxuICAgIG9wc1tPcGVyYXRvci5HUkVBVEVSX1RIQU4ubmFtZV0gPSAnR1JFQVRFUl9USEFOJztcclxuICAgIG9wc1tPcGVyYXRvci5HUkVBVEVSX1RIQU5fT1JfRVFVQUwubmFtZV0gPSAnR1JFQVRFUl9USEFOX09SX0VRVUFMJztcclxuICAgIG9wc1tPcGVyYXRvci5FUVVBTC5uYW1lXSA9ICdFUVVBTCc7XHJcbiAgICBvcHNbT3BlcmF0b3IuQVJSQVlfQ09OVEFJTlMubmFtZV0gPSAnQVJSQVlfQ09OVEFJTlMnO1xyXG4gICAgb3BzW09wZXJhdG9yLklOLm5hbWVdID0gJ0lOJztcclxuICAgIG9wc1tPcGVyYXRvci5BUlJBWV9DT05UQUlOU19BTlkubmFtZV0gPSAnQVJSQVlfQ09OVEFJTlNfQU5ZJztcclxuICAgIHJldHVybiBvcHM7XHJcbn0pKCk7XHJcbi8vIEEgUmVnRXhwIG1hdGNoaW5nIElTTyA4NjAxIFVUQyB0aW1lc3RhbXBzIHdpdGggb3B0aW9uYWwgZnJhY3Rpb24uXHJcbnZhciBJU09fUkVHX0VYUCA9IG5ldyBSZWdFeHAoL15cXGR7NH0tXFxkXFxkLVxcZFxcZFRcXGRcXGQ6XFxkXFxkOlxcZFxcZCg/OlxcLihcXGQrKSk/WiQvKTtcclxuZnVuY3Rpb24gYXNzZXJ0UHJlc2VudCh2YWx1ZSwgZGVzY3JpcHRpb24pIHtcclxuICAgIGFzc2VydCghaXNOdWxsT3JVbmRlZmluZWQodmFsdWUpLCBkZXNjcmlwdGlvbiArICcgaXMgbWlzc2luZycpO1xyXG59XHJcbmZ1bmN0aW9uIHBhcnNlSW50NjQodmFsdWUpIHtcclxuICAgIC8vIFRPRE8oYmpvcm5pY2spOiBIYW5kbGUgaW50NjQgZ3JlYXRlciB0aGFuIDUzIGJpdHMuXHJcbiAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJykge1xyXG4gICAgICAgIHJldHVybiB2YWx1ZTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICByZXR1cm4gTnVtYmVyKHZhbHVlKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBmYWlsKFwiY2FuJ3QgcGFyc2UgXCIgKyB2YWx1ZSk7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIEdlbmVyYXRlcyBKc29uT2JqZWN0IHZhbHVlcyBmb3IgdGhlIERhdGFzdG9yZSBBUEkgc3VpdGFibGUgZm9yIHNlbmRpbmcgdG9cclxuICogZWl0aGVyIEdSUEMgc3R1YiBtZXRob2RzIG9yIHZpYSB0aGUgSlNPTi9IVFRQIFJFU1QgQVBJLlxyXG4gKiBUT0RPKGtsaW10KTogV2UgY2FuIHJlbW92ZSB0aGUgZGF0YWJhc2VJZCBhcmd1bWVudCBpZiB3ZSBrZWVwIHRoZSBmdWxsXHJcbiAqIHJlc291cmNlIG5hbWUgaW4gZG9jdW1lbnRzLlxyXG4gKi9cclxudmFyIEpzb25Qcm90b1NlcmlhbGl6ZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBKc29uUHJvdG9TZXJpYWxpemVyKGRhdGFiYXNlSWQsIG9wdGlvbnMpIHtcclxuICAgICAgICB0aGlzLmRhdGFiYXNlSWQgPSBkYXRhYmFzZUlkO1xyXG4gICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XHJcbiAgICB9XHJcbiAgICBKc29uUHJvdG9TZXJpYWxpemVyLnByb3RvdHlwZS5lbXB0eUJ5dGVTdHJpbmcgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy51c2VQcm90bzNKc29uKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAnJztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgVWludDhBcnJheSgwKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgSnNvblByb3RvU2VyaWFsaXplci5wcm90b3R5cGUudW5zYWZlQ2FzdFByb3RvQnl0ZVN0cmluZyA9IGZ1bmN0aW9uIChieXRlU3RyaW5nKSB7XHJcbiAgICAgICAgLy8gYnl0ZVN0cmluZ3MgY2FuIGJlIGVpdGhlciBzdHJpbmcgb3IgVUludDhBcnJheSwgYnV0IHRoZSB0eXBpbmdzIHNheVxyXG4gICAgICAgIC8vIGl0J3MgYWx3YXlzIGEgc3RyaW5nLiBDYXN0IGFzIHN0cmluZyB0byBhdm9pZCB0eXBlIGNoZWNrIGZhaWxpbmdcclxuICAgICAgICByZXR1cm4gYnl0ZVN0cmluZztcclxuICAgIH07XHJcbiAgICBKc29uUHJvdG9TZXJpYWxpemVyLnByb3RvdHlwZS5mcm9tUnBjU3RhdHVzID0gZnVuY3Rpb24gKHN0YXR1cykge1xyXG4gICAgICAgIHZhciBjb2RlID0gc3RhdHVzLmNvZGUgPT09IHVuZGVmaW5lZFxyXG4gICAgICAgICAgICA/IENvZGUuVU5LTk9XTlxyXG4gICAgICAgICAgICA6IG1hcENvZGVGcm9tUnBjQ29kZShzdGF0dXMuY29kZSk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBGaXJlc3RvcmVFcnJvcihjb2RlLCBzdGF0dXMubWVzc2FnZSB8fCAnJyk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIGEgdmFsdWUgZm9yIGEgbnVtYmVyIChvciBudWxsKSB0aGF0J3MgYXBwcm9wcmlhdGUgdG8gcHV0IGludG9cclxuICAgICAqIGEgZ29vZ2xlLnByb3RvYnVmLkludDMyVmFsdWUgcHJvdG8uXHJcbiAgICAgKiBETyBOT1QgVVNFIFRISVMgRk9SIEFOWVRISU5HIEVMU0UuXHJcbiAgICAgKiBUaGlzIG1ldGhvZCBjaGVhdHMuIEl0J3MgdHlwZWQgYXMgcmV0dXJuaW5nIFwibnVtYmVyXCIgYmVjYXVzZSB0aGF0J3Mgd2hhdFxyXG4gICAgICogb3VyIGdlbmVyYXRlZCBwcm90byBpbnRlcmZhY2VzIHNheSBJbnQzMlZhbHVlIG11c3QgYmUuIEJ1dCBHUlBDIGFjdHVhbGx5XHJcbiAgICAgKiBleHBlY3RzIGEgeyB2YWx1ZTogPG51bWJlcj4gfSBzdHJ1Y3QuXHJcbiAgICAgKi9cclxuICAgIEpzb25Qcm90b1NlcmlhbGl6ZXIucHJvdG90eXBlLnRvSW50MzJWYWx1ZSA9IGZ1bmN0aW9uICh2YWwpIHtcclxuICAgICAgICBpZiAodGhpcy5vcHRpb25zLnVzZVByb3RvM0pzb24gfHwgaXNOdWxsT3JVbmRlZmluZWQodmFsKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdmFsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gUHJvdG9idWZKUyByZXF1aXJlcyB0aGF0IHdlIHdyYXAgSW50MzJWYWx1ZXMuXHJcbiAgICAgICAgICAgIC8vIFVzZSBhbnkgYmVjYXVzZSB3ZSBuZWVkIHRvIG1hdGNoIGdlbmVyYXRlZCBQcm90byB0eXBlcy5cclxuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IHZhbCB9O1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgYSBudW1iZXIgKG9yIG51bGwpIGZyb20gYSBnb29nbGUucHJvdG9idWYuSW50MzJWYWx1ZSBwcm90by5cclxuICAgICAqIERPIE5PVCBVU0UgVEhJUyBGT1IgQU5ZVEhJTkcgRUxTRS5cclxuICAgICAqIFRoaXMgbWV0aG9kIGNoZWF0cy4gSXQncyB0eXBlZCBhcyBhY2NlcHRpbmcgXCJudW1iZXJcIiBiZWNhdXNlIHRoYXQncyB3aGF0XHJcbiAgICAgKiBvdXIgZ2VuZXJhdGVkIHByb3RvIGludGVyZmFjZXMgc2F5IEludDMyVmFsdWUgbXVzdCBiZSwgYnV0IGl0IGFjdHVhbGx5XHJcbiAgICAgKiBhY2NlcHRzIHsgdmFsdWU6IG51bWJlciB9IHRvIG1hdGNoIG91ciBzZXJpYWxpemF0aW9uIGluIHRvSW50MzJWYWx1ZSgpLlxyXG4gICAgICovXHJcbiAgICBKc29uUHJvdG9TZXJpYWxpemVyLnByb3RvdHlwZS5mcm9tSW50MzJWYWx1ZSA9IGZ1bmN0aW9uICh2YWwpIHtcclxuICAgICAgICB2YXIgcmVzdWx0O1xyXG4gICAgICAgIGlmICh0eXBlb2YgdmFsID09PSAnb2JqZWN0Jykge1xyXG4gICAgICAgICAgICAvLyBVc2UgYW55IGJlY2F1c2Ugd2UgbmVlZCB0byBtYXRjaCBnZW5lcmF0ZWQgUHJvdG8gdHlwZXMuXHJcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbiAgICAgICAgICAgIHJlc3VsdCA9IHZhbC52YWx1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIFdlIGFjY2VwdCByYXcgbnVtYmVycyAod2l0aG91dCB0aGUge3ZhbHVlOiAuLi4gfSB3cmFwcGVyKSBmb3JcclxuICAgICAgICAgICAgLy8gY29tcGF0aWJpbGl0eSB3aXRoIGxlZ2FjeSBwZXJzaXN0ZWQgZGF0YS5cclxuICAgICAgICAgICAgcmVzdWx0ID0gdmFsO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gaXNOdWxsT3JVbmRlZmluZWQocmVzdWx0KSA/IG51bGwgOiByZXN1bHQ7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIGEgdmFsdWUgZm9yIGEgRGF0ZSB0aGF0J3MgYXBwcm9wcmlhdGUgdG8gcHV0IGludG8gYSBwcm90by5cclxuICAgICAqIERPIE5PVCBVU0UgVEhJUyBGT1IgQU5ZVEhJTkcgRUxTRS5cclxuICAgICAqIFRoaXMgbWV0aG9kIGNoZWF0cy4gSXQncyB0eXBlZCBhcyByZXR1cm5pbmcgXCJzdHJpbmdcIiBiZWNhdXNlIHRoYXQncyB3aGF0XHJcbiAgICAgKiBvdXIgZ2VuZXJhdGVkIHByb3RvIGludGVyZmFjZXMgc2F5IGRhdGVzIG11c3QgYmUuIEJ1dCBpdCdzIGVhc2llciBhbmQgc2FmZXJcclxuICAgICAqIHRvIGFjdHVhbGx5IHJldHVybiBhIFRpbWVzdGFtcCBwcm90by5cclxuICAgICAqL1xyXG4gICAgSnNvblByb3RvU2VyaWFsaXplci5wcm90b3R5cGUudG9UaW1lc3RhbXAgPSBmdW5jdGlvbiAodGltZXN0YW1wKSB7XHJcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy51c2VQcm90bzNKc29uKSB7XHJcbiAgICAgICAgICAgIC8vIFNlcmlhbGl6ZSB0byBJU08tODYwMSBkYXRlIGZvcm1hdCwgYnV0IHdpdGggZnVsbCBuYW5vIHJlc29sdXRpb24uXHJcbiAgICAgICAgICAgIC8vIFNpbmNlIEpTIERhdGUgaGFzIG9ubHkgbWlsbGlzLCBsZXQncyBvbmx5IHVzZSBpdCBmb3IgdGhlIHNlY29uZHMgYW5kXHJcbiAgICAgICAgICAgIC8vIHRoZW4gbWFudWFsbHkgYWRkIHRoZSBmcmFjdGlvbnMgdG8gdGhlIGVuZC5cclxuICAgICAgICAgICAgdmFyIGpzRGF0ZVN0ciA9IG5ldyBEYXRlKHRpbWVzdGFtcC5zZWNvbmRzICogMTAwMCkudG9JU09TdHJpbmcoKTtcclxuICAgICAgICAgICAgLy8gUmVtb3ZlIC54eHggZnJhYyBwYXJ0IGFuZCBaIGluIHRoZSBlbmQuXHJcbiAgICAgICAgICAgIHZhciBzdHJVbnRpbFNlY29uZHMgPSBqc0RhdGVTdHIucmVwbGFjZSgvXFwuXFxkKi8sICcnKS5yZXBsYWNlKCdaJywgJycpO1xyXG4gICAgICAgICAgICAvLyBQYWQgdGhlIGZyYWN0aW9uIG91dCB0byA5IGRpZ2l0cyAobmFub3MpLlxyXG4gICAgICAgICAgICB2YXIgbmFub1N0ciA9ICgnMDAwMDAwMDAwJyArIHRpbWVzdGFtcC5uYW5vc2Vjb25kcykuc2xpY2UoLTkpO1xyXG4gICAgICAgICAgICByZXR1cm4gc3RyVW50aWxTZWNvbmRzICsgXCIuXCIgKyBuYW5vU3RyICsgXCJaXCI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgc2Vjb25kczogJycgKyB0aW1lc3RhbXAuc2Vjb25kcyxcclxuICAgICAgICAgICAgICAgIG5hbm9zOiB0aW1lc3RhbXAubmFub3NlY29uZHNcclxuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIEpzb25Qcm90b1NlcmlhbGl6ZXIucHJvdG90eXBlLmZyb21UaW1lc3RhbXAgPSBmdW5jdGlvbiAoZGF0ZSkge1xyXG4gICAgICAgIC8vIFRoZSBqc29uIGludGVyZmFjZSAoZm9yIHRoZSBicm93c2VyKSB3aWxsIHJldHVybiBhbiBpc28gdGltZXN0YW1wIHN0cmluZyxcclxuICAgICAgICAvLyB3aGlsZSB0aGUgcHJvdG8ganMgbGlicmFyeSAoZm9yIG5vZGUpIHdpbGwgcmV0dXJuIGFcclxuICAgICAgICAvLyBnb29nbGUucHJvdG9idWYuVGltZXN0YW1wIGluc3RhbmNlLlxyXG4gICAgICAgIGlmICh0eXBlb2YgZGF0ZSA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgLy8gVE9ETyhiLzM3MjgyMjM3KTogVXNlIHN0cmluZ3MgZm9yIFByb3RvMyB0aW1lc3RhbXBzXHJcbiAgICAgICAgICAgIC8vIGFzc2VydCh0aGlzLm9wdGlvbnMudXNlUHJvdG8zSnNvbixcclxuICAgICAgICAgICAgLy8gICAnVGhlIHRpbWVzdGFtcCBzdHJpbmcgZm9ybWF0IHJlcXVpcmVzIFByb3RvMy4nKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZnJvbUlzbzg2MDFTdHJpbmcoZGF0ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBhc3NlcnQoISFkYXRlLCAnQ2Fubm90IGRlc2VyaWFsaXplIG51bGwgb3IgdW5kZWZpbmVkIHRpbWVzdGFtcC4nKTtcclxuICAgICAgICAgICAgLy8gVE9ETyhiLzM3MjgyMjM3KTogVXNlIHN0cmluZ3MgZm9yIFByb3RvMyB0aW1lc3RhbXBzXHJcbiAgICAgICAgICAgIC8vIGFzc2VydCghdGhpcy5vcHRpb25zLnVzZVByb3RvM0pzb24sXHJcbiAgICAgICAgICAgIC8vICAgJ1RoZSB0aW1lc3RhbXAgaW5zdGFuY2UgZm9ybWF0IHJlcXVpcmVzIFByb3RvIEpTLicpO1xyXG4gICAgICAgICAgICB2YXIgc2Vjb25kcyA9IHBhcnNlSW50NjQoZGF0ZS5zZWNvbmRzIHx8ICcwJyk7XHJcbiAgICAgICAgICAgIHZhciBuYW5vcyA9IGRhdGUubmFub3MgfHwgMDtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBUaW1lc3RhbXAoc2Vjb25kcywgbmFub3MpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBKc29uUHJvdG9TZXJpYWxpemVyLnByb3RvdHlwZS5mcm9tSXNvODYwMVN0cmluZyA9IGZ1bmN0aW9uICh1dGMpIHtcclxuICAgICAgICAvLyBUaGUgZGF0ZSBzdHJpbmcgY2FuIGhhdmUgaGlnaGVyIHByZWNpc2lvbiAobmFub3MpIHRoYW4gdGhlIERhdGUgY2xhc3NcclxuICAgICAgICAvLyAobWlsbGlzKSwgc28gd2UgZG8gc29tZSBjdXN0b20gcGFyc2luZyBoZXJlLlxyXG4gICAgICAgIC8vIFBhcnNlIHRoZSBuYW5vcyByaWdodCBvdXQgb2YgdGhlIHN0cmluZy5cclxuICAgICAgICB2YXIgbmFub3MgPSAwO1xyXG4gICAgICAgIHZhciBmcmFjdGlvbiA9IElTT19SRUdfRVhQLmV4ZWModXRjKTtcclxuICAgICAgICBhc3NlcnQoISFmcmFjdGlvbiwgJ2ludmFsaWQgdGltZXN0YW1wOiAnICsgdXRjKTtcclxuICAgICAgICBpZiAoZnJhY3Rpb25bMV0pIHtcclxuICAgICAgICAgICAgLy8gUGFkIHRoZSBmcmFjdGlvbiBvdXQgdG8gOSBkaWdpdHMgKG5hbm9zKS5cclxuICAgICAgICAgICAgdmFyIG5hbm9TdHIgPSBmcmFjdGlvblsxXTtcclxuICAgICAgICAgICAgbmFub1N0ciA9IChuYW5vU3RyICsgJzAwMDAwMDAwMCcpLnN1YnN0cigwLCA5KTtcclxuICAgICAgICAgICAgbmFub3MgPSBOdW1iZXIobmFub1N0cik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFBhcnNlIHRoZSBkYXRlIHRvIGdldCB0aGUgc2Vjb25kcy5cclxuICAgICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKHV0Yyk7XHJcbiAgICAgICAgdmFyIHNlY29uZHMgPSBNYXRoLmZsb29yKGRhdGUuZ2V0VGltZSgpIC8gMTAwMCk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBUaW1lc3RhbXAoc2Vjb25kcywgbmFub3MpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyBhIHZhbHVlIGZvciBieXRlcyB0aGF0J3MgYXBwcm9wcmlhdGUgdG8gcHV0IGluIGEgcHJvdG8uXHJcbiAgICAgKiBETyBOT1QgVVNFIFRISVMgRk9SIEFOWVRISU5HIEVMU0UuXHJcbiAgICAgKiBUaGlzIG1ldGhvZCBjaGVhdHMuIEl0J3MgdHlwZWQgYXMgcmV0dXJuaW5nIFwic3RyaW5nXCIgYmVjYXVzZSB0aGF0J3Mgd2hhdFxyXG4gICAgICogb3VyIGdlbmVyYXRlZCBwcm90byBpbnRlcmZhY2VzIHNheSBieXRlcyBtdXN0IGJlLiBCdXQgaXQgc2hvdWxkIHJldHVyblxyXG4gICAgICogYW4gVWludDhBcnJheSBpbiBOb2RlLlxyXG4gICAgICovXHJcbiAgICBKc29uUHJvdG9TZXJpYWxpemVyLnByb3RvdHlwZS50b0J5dGVzID0gZnVuY3Rpb24gKGJ5dGVzKSB7XHJcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy51c2VQcm90bzNKc29uKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBieXRlcy50b0Jhc2U2NCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gVGhlIHR5cGluZ3Mgc2F5IGl0J3MgYSBzdHJpbmcsIGJ1dCBpdCBuZWVkcyB0byBiZSBhIFVpbnQ4QXJyYXkgaW4gTm9kZS5cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMudW5zYWZlQ2FzdFByb3RvQnl0ZVN0cmluZyhieXRlcy50b1VpbnQ4QXJyYXkoKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUGFyc2UgdGhlIGJsb2IgZnJvbSB0aGUgcHJvdG9zIGludG8gdGhlIGludGVybmFsIEJsb2IgY2xhc3MuIE5vdGUgdGhhdCB0aGVcclxuICAgICAqIHR5cGluZ3MgYXNzdW1lIGFsbCBibG9icyBhcmUgc3RyaW5ncywgYnV0IHRoZXkgYXJlIGFjdHVhbGx5IFVpbnQ4QXJyYXlzXHJcbiAgICAgKiBvbiBOb2RlLlxyXG4gICAgICovXHJcbiAgICBKc29uUHJvdG9TZXJpYWxpemVyLnByb3RvdHlwZS5mcm9tQmxvYiA9IGZ1bmN0aW9uIChibG9iKSB7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBibG9iID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICBhc3NlcnQodGhpcy5vcHRpb25zLnVzZVByb3RvM0pzb24sICdFeHBlY3RlZCBieXRlcyB0byBiZSBwYXNzZWQgaW4gYXMgVWludDhBcnJheSwgYnV0IGdvdCBhIHN0cmluZyBpbnN0ZWFkLicpO1xyXG4gICAgICAgICAgICByZXR1cm4gQmxvYi5mcm9tQmFzZTY0U3RyaW5nKGJsb2IpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgYXNzZXJ0KCF0aGlzLm9wdGlvbnMudXNlUHJvdG8zSnNvbiwgJ0V4cGVjdGVkIGJ5dGVzIHRvIGJlIHBhc3NlZCBpbiBhcyBVaW50OEFycmF5LCBidXQgZ290IGEgc3RyaW5nIGluc3RlYWQuJyk7XHJcbiAgICAgICAgICAgIHJldHVybiBCbG9iLmZyb21VaW50OEFycmF5KGJsb2IpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBKc29uUHJvdG9TZXJpYWxpemVyLnByb3RvdHlwZS50b1ZlcnNpb24gPSBmdW5jdGlvbiAodmVyc2lvbikge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnRvVGltZXN0YW1wKHZlcnNpb24udG9UaW1lc3RhbXAoKSk7XHJcbiAgICB9O1xyXG4gICAgSnNvblByb3RvU2VyaWFsaXplci5wcm90b3R5cGUuZnJvbVZlcnNpb24gPSBmdW5jdGlvbiAodmVyc2lvbikge1xyXG4gICAgICAgIGFzc2VydCghIXZlcnNpb24sIFwiVHJ5aW5nIHRvIGRlc2VyaWFsaXplIHZlcnNpb24gdGhhdCBpc24ndCBzZXRcIik7XHJcbiAgICAgICAgcmV0dXJuIFNuYXBzaG90VmVyc2lvbi5mcm9tVGltZXN0YW1wKHRoaXMuZnJvbVRpbWVzdGFtcCh2ZXJzaW9uKSk7XHJcbiAgICB9O1xyXG4gICAgSnNvblByb3RvU2VyaWFsaXplci5wcm90b3R5cGUudG9SZXNvdXJjZU5hbWUgPSBmdW5jdGlvbiAoZGF0YWJhc2VJZCwgcGF0aCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmZ1bGx5UXVhbGlmaWVkUHJlZml4UGF0aChkYXRhYmFzZUlkKVxyXG4gICAgICAgICAgICAuY2hpbGQoJ2RvY3VtZW50cycpXHJcbiAgICAgICAgICAgIC5jaGlsZChwYXRoKVxyXG4gICAgICAgICAgICAuY2Fub25pY2FsU3RyaW5nKCk7XHJcbiAgICB9O1xyXG4gICAgSnNvblByb3RvU2VyaWFsaXplci5wcm90b3R5cGUuZnJvbVJlc291cmNlTmFtZSA9IGZ1bmN0aW9uIChuYW1lKSB7XHJcbiAgICAgICAgdmFyIHJlc291cmNlID0gUmVzb3VyY2VQYXRoLmZyb21TdHJpbmcobmFtZSk7XHJcbiAgICAgICAgYXNzZXJ0KHRoaXMuaXNWYWxpZFJlc291cmNlTmFtZShyZXNvdXJjZSksICdUcmllZCB0byBkZXNlcmlhbGl6ZSBpbnZhbGlkIGtleSAnICsgcmVzb3VyY2UudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgcmV0dXJuIHJlc291cmNlO1xyXG4gICAgfTtcclxuICAgIEpzb25Qcm90b1NlcmlhbGl6ZXIucHJvdG90eXBlLnRvTmFtZSA9IGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy50b1Jlc291cmNlTmFtZSh0aGlzLmRhdGFiYXNlSWQsIGtleS5wYXRoKTtcclxuICAgIH07XHJcbiAgICBKc29uUHJvdG9TZXJpYWxpemVyLnByb3RvdHlwZS5mcm9tTmFtZSA9IGZ1bmN0aW9uIChuYW1lKSB7XHJcbiAgICAgICAgdmFyIHJlc291cmNlID0gdGhpcy5mcm9tUmVzb3VyY2VOYW1lKG5hbWUpO1xyXG4gICAgICAgIGFzc2VydChyZXNvdXJjZS5nZXQoMSkgPT09IHRoaXMuZGF0YWJhc2VJZC5wcm9qZWN0SWQsICdUcmllZCB0byBkZXNlcmlhbGl6ZSBrZXkgZnJvbSBkaWZmZXJlbnQgcHJvamVjdDogJyArXHJcbiAgICAgICAgICAgIHJlc291cmNlLmdldCgxKSArXHJcbiAgICAgICAgICAgICcgdnMgJyArXHJcbiAgICAgICAgICAgIHRoaXMuZGF0YWJhc2VJZC5wcm9qZWN0SWQpO1xyXG4gICAgICAgIGFzc2VydCgoIXJlc291cmNlLmdldCgzKSAmJiAhdGhpcy5kYXRhYmFzZUlkLmRhdGFiYXNlKSB8fFxyXG4gICAgICAgICAgICByZXNvdXJjZS5nZXQoMykgPT09IHRoaXMuZGF0YWJhc2VJZC5kYXRhYmFzZSwgJ1RyaWVkIHRvIGRlc2VyaWFsaXplIGtleSBmcm9tIGRpZmZlcmVudCBkYXRhYmFzZTogJyArXHJcbiAgICAgICAgICAgIHJlc291cmNlLmdldCgzKSArXHJcbiAgICAgICAgICAgICcgdnMgJyArXHJcbiAgICAgICAgICAgIHRoaXMuZGF0YWJhc2VJZC5kYXRhYmFzZSk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBEb2N1bWVudEtleSh0aGlzLmV4dHJhY3RMb2NhbFBhdGhGcm9tUmVzb3VyY2VOYW1lKHJlc291cmNlKSk7XHJcbiAgICB9O1xyXG4gICAgSnNvblByb3RvU2VyaWFsaXplci5wcm90b3R5cGUudG9RdWVyeVBhdGggPSBmdW5jdGlvbiAocGF0aCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnRvUmVzb3VyY2VOYW1lKHRoaXMuZGF0YWJhc2VJZCwgcGF0aCk7XHJcbiAgICB9O1xyXG4gICAgSnNvblByb3RvU2VyaWFsaXplci5wcm90b3R5cGUuZnJvbVF1ZXJ5UGF0aCA9IGZ1bmN0aW9uIChuYW1lKSB7XHJcbiAgICAgICAgdmFyIHJlc291cmNlTmFtZSA9IHRoaXMuZnJvbVJlc291cmNlTmFtZShuYW1lKTtcclxuICAgICAgICAvLyBJbiB2MWJldGExIHF1ZXJpZXMgZm9yIGNvbGxlY3Rpb25zIGF0IHRoZSByb290IGRpZCBub3QgaGF2ZSBhIHRyYWlsaW5nXHJcbiAgICAgICAgLy8gXCIvZG9jdW1lbnRzXCIuIEluIHYxIGFsbCByZXNvdXJjZSBwYXRocyBjb250YWluIFwiL2RvY3VtZW50c1wiLiBQcmVzZXJ2ZSB0aGVcclxuICAgICAgICAvLyBhYmlsaXR5IHRvIHJlYWQgdGhlIHYxYmV0YTEgZm9ybSBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIHF1ZXJpZXMgcGVyc2lzdGVkXHJcbiAgICAgICAgLy8gaW4gdGhlIGxvY2FsIHRhcmdldCBjYWNoZS5cclxuICAgICAgICBpZiAocmVzb3VyY2VOYW1lLmxlbmd0aCA9PT0gNCkge1xyXG4gICAgICAgICAgICByZXR1cm4gUmVzb3VyY2VQYXRoLkVNUFRZX1BBVEg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLmV4dHJhY3RMb2NhbFBhdGhGcm9tUmVzb3VyY2VOYW1lKHJlc291cmNlTmFtZSk7XHJcbiAgICB9O1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEpzb25Qcm90b1NlcmlhbGl6ZXIucHJvdG90eXBlLCBcImVuY29kZWREYXRhYmFzZUlkXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHBhdGggPSBuZXcgUmVzb3VyY2VQYXRoKFtcclxuICAgICAgICAgICAgICAgICdwcm9qZWN0cycsXHJcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGFiYXNlSWQucHJvamVjdElkLFxyXG4gICAgICAgICAgICAgICAgJ2RhdGFiYXNlcycsXHJcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGFiYXNlSWQuZGF0YWJhc2VcclxuICAgICAgICAgICAgXSk7XHJcbiAgICAgICAgICAgIHJldHVybiBwYXRoLmNhbm9uaWNhbFN0cmluZygpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgSnNvblByb3RvU2VyaWFsaXplci5wcm90b3R5cGUuZnVsbHlRdWFsaWZpZWRQcmVmaXhQYXRoID0gZnVuY3Rpb24gKGRhdGFiYXNlSWQpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFJlc291cmNlUGF0aChbXHJcbiAgICAgICAgICAgICdwcm9qZWN0cycsXHJcbiAgICAgICAgICAgIGRhdGFiYXNlSWQucHJvamVjdElkLFxyXG4gICAgICAgICAgICAnZGF0YWJhc2VzJyxcclxuICAgICAgICAgICAgZGF0YWJhc2VJZC5kYXRhYmFzZVxyXG4gICAgICAgIF0pO1xyXG4gICAgfTtcclxuICAgIEpzb25Qcm90b1NlcmlhbGl6ZXIucHJvdG90eXBlLmV4dHJhY3RMb2NhbFBhdGhGcm9tUmVzb3VyY2VOYW1lID0gZnVuY3Rpb24gKHJlc291cmNlTmFtZSkge1xyXG4gICAgICAgIGFzc2VydChyZXNvdXJjZU5hbWUubGVuZ3RoID4gNCAmJiByZXNvdXJjZU5hbWUuZ2V0KDQpID09PSAnZG9jdW1lbnRzJywgJ3RyaWVkIHRvIGRlc2VyaWFsaXplIGludmFsaWQga2V5ICcgKyByZXNvdXJjZU5hbWUudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgcmV0dXJuIHJlc291cmNlTmFtZS5wb3BGaXJzdCg1KTtcclxuICAgIH07XHJcbiAgICBKc29uUHJvdG9TZXJpYWxpemVyLnByb3RvdHlwZS5pc1ZhbGlkUmVzb3VyY2VOYW1lID0gZnVuY3Rpb24gKHBhdGgpIHtcclxuICAgICAgICAvLyBSZXNvdXJjZSBuYW1lcyBoYXZlIGF0IGxlYXN0IDQgY29tcG9uZW50cyAocHJvamVjdCBJRCwgZGF0YWJhc2UgSUQpXHJcbiAgICAgICAgcmV0dXJuIChwYXRoLmxlbmd0aCA+PSA0ICYmXHJcbiAgICAgICAgICAgIHBhdGguZ2V0KDApID09PSAncHJvamVjdHMnICYmXHJcbiAgICAgICAgICAgIHBhdGguZ2V0KDIpID09PSAnZGF0YWJhc2VzJyk7XHJcbiAgICB9O1xyXG4gICAgSnNvblByb3RvU2VyaWFsaXplci5wcm90b3R5cGUudG9WYWx1ZSA9IGZ1bmN0aW9uICh2YWwpIHtcclxuICAgICAgICBpZiAodmFsIGluc3RhbmNlb2YgTnVsbFZhbHVlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7IG51bGxWYWx1ZTogJ05VTExfVkFMVUUnIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHZhbCBpbnN0YW5jZW9mIEJvb2xlYW5WYWx1ZSkge1xyXG4gICAgICAgICAgICByZXR1cm4geyBib29sZWFuVmFsdWU6IHZhbC52YWx1ZSgpIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHZhbCBpbnN0YW5jZW9mIEludGVnZXJWYWx1ZSkge1xyXG4gICAgICAgICAgICByZXR1cm4geyBpbnRlZ2VyVmFsdWU6ICcnICsgdmFsLnZhbHVlKCkgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodmFsIGluc3RhbmNlb2YgRG91YmxlVmFsdWUpIHtcclxuICAgICAgICAgICAgdmFyIGRvdWJsZVZhbHVlID0gdmFsLnZhbHVlKCk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMudXNlUHJvdG8zSnNvbikge1xyXG4gICAgICAgICAgICAgICAgLy8gUHJvdG8gMyBsZXQncyB1cyBlbmNvZGUgTmFOIGFuZCBJbmZpbml0eSBhcyBzdHJpbmcgdmFsdWVzIGFzXHJcbiAgICAgICAgICAgICAgICAvLyBleHBlY3RlZCBieSB0aGUgYmFja2VuZC4gVGhpcyBpcyBjdXJyZW50bHkgbm90IGNoZWNrZWQgYnkgb3VyIHVuaXRcclxuICAgICAgICAgICAgICAgIC8vIHRlc3RzIGJlY2F1c2UgdGhleSByZWx5IG9uIHByb3RvYnVmLmpzLlxyXG4gICAgICAgICAgICAgICAgaWYgKGlzTmFOKGRvdWJsZVZhbHVlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7IGRvdWJsZVZhbHVlOiAnTmFOJyB9O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoZG91YmxlVmFsdWUgPT09IEluZmluaXR5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgZG91YmxlVmFsdWU6ICdJbmZpbml0eScgfTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGRvdWJsZVZhbHVlID09PSAtSW5maW5pdHkpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4geyBkb3VibGVWYWx1ZTogJy1JbmZpbml0eScgfTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4geyBkb3VibGVWYWx1ZTogdmFsLnZhbHVlKCkgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodmFsIGluc3RhbmNlb2YgU3RyaW5nVmFsdWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHsgc3RyaW5nVmFsdWU6IHZhbC52YWx1ZSgpIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHZhbCBpbnN0YW5jZW9mIE9iamVjdFZhbHVlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7IG1hcFZhbHVlOiB0aGlzLnRvTWFwVmFsdWUodmFsKSB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh2YWwgaW5zdGFuY2VvZiBBcnJheVZhbHVlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7IGFycmF5VmFsdWU6IHRoaXMudG9BcnJheVZhbHVlKHZhbCkgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodmFsIGluc3RhbmNlb2YgVGltZXN0YW1wVmFsdWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHRpbWVzdGFtcFZhbHVlOiB0aGlzLnRvVGltZXN0YW1wKHZhbC5pbnRlcm5hbFZhbHVlKVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh2YWwgaW5zdGFuY2VvZiBHZW9Qb2ludFZhbHVlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBnZW9Qb2ludFZhbHVlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGF0aXR1ZGU6IHZhbC52YWx1ZSgpLmxhdGl0dWRlLFxyXG4gICAgICAgICAgICAgICAgICAgIGxvbmdpdHVkZTogdmFsLnZhbHVlKCkubG9uZ2l0dWRlXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHZhbCBpbnN0YW5jZW9mIEJsb2JWYWx1ZSkge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgYnl0ZXNWYWx1ZTogdGhpcy50b0J5dGVzKHZhbC52YWx1ZSgpKVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh2YWwgaW5zdGFuY2VvZiBSZWZWYWx1ZSkge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgcmVmZXJlbmNlVmFsdWU6IHRoaXMudG9SZXNvdXJjZU5hbWUodmFsLmRhdGFiYXNlSWQsIHZhbC5rZXkucGF0aClcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWlsKCdVbmtub3duIEZpZWxkVmFsdWUgJyArIEpTT04uc3RyaW5naWZ5KHZhbCkpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBKc29uUHJvdG9TZXJpYWxpemVyLnByb3RvdHlwZS5mcm9tVmFsdWUgPSBmdW5jdGlvbiAob2JqKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBpZiAoJ251bGxWYWx1ZScgaW4gb2JqKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBOdWxsVmFsdWUuSU5TVEFOQ0U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKCdib29sZWFuVmFsdWUnIGluIG9iaikge1xyXG4gICAgICAgICAgICByZXR1cm4gQm9vbGVhblZhbHVlLm9mKG9iai5ib29sZWFuVmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICgnaW50ZWdlclZhbHVlJyBpbiBvYmopIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBJbnRlZ2VyVmFsdWUocGFyc2VJbnQ2NChvYmouaW50ZWdlclZhbHVlKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKCdkb3VibGVWYWx1ZScgaW4gb2JqKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMudXNlUHJvdG8zSnNvbikge1xyXG4gICAgICAgICAgICAgICAgLy8gUHJvdG8gMyB1c2VzIHRoZSBzdHJpbmcgdmFsdWVzICdOYU4nIGFuZCAnSW5maW5pdHknLlxyXG4gICAgICAgICAgICAgICAgaWYgKG9iai5kb3VibGVWYWx1ZSA9PT0gJ05hTicpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gRG91YmxlVmFsdWUuTkFOO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAob2JqLmRvdWJsZVZhbHVlID09PSAnSW5maW5pdHknKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIERvdWJsZVZhbHVlLlBPU0lUSVZFX0lORklOSVRZO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAob2JqLmRvdWJsZVZhbHVlID09PSAnLUluZmluaXR5Jykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBEb3VibGVWYWx1ZS5ORUdBVElWRV9JTkZJTklUWTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IERvdWJsZVZhbHVlKG9iai5kb3VibGVWYWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKCdzdHJpbmdWYWx1ZScgaW4gb2JqKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgU3RyaW5nVmFsdWUob2JqLnN0cmluZ1ZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoJ21hcFZhbHVlJyBpbiBvYmopIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZnJvbUZpZWxkcyhvYmoubWFwVmFsdWUuZmllbGRzIHx8IHt9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoJ2FycmF5VmFsdWUnIGluIG9iaikge1xyXG4gICAgICAgICAgICAvLyBcInZhbHVlc1wiIGlzIG5vdCBwcmVzZW50IGlmIHRoZSBhcnJheSBpcyBlbXB0eVxyXG4gICAgICAgICAgICBhc3NlcnRQcmVzZW50KG9iai5hcnJheVZhbHVlLCAnYXJyYXlWYWx1ZScpO1xyXG4gICAgICAgICAgICB2YXIgdmFsdWVzID0gb2JqLmFycmF5VmFsdWUudmFsdWVzIHx8IFtdO1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEFycmF5VmFsdWUodmFsdWVzLm1hcChmdW5jdGlvbiAodikgeyByZXR1cm4gX3RoaXMuZnJvbVZhbHVlKHYpOyB9KSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKCd0aW1lc3RhbXBWYWx1ZScgaW4gb2JqKSB7XHJcbiAgICAgICAgICAgIGFzc2VydFByZXNlbnQob2JqLnRpbWVzdGFtcFZhbHVlLCAndGltZXN0YW1wVmFsdWUnKTtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBUaW1lc3RhbXBWYWx1ZSh0aGlzLmZyb21UaW1lc3RhbXAob2JqLnRpbWVzdGFtcFZhbHVlKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKCdnZW9Qb2ludFZhbHVlJyBpbiBvYmopIHtcclxuICAgICAgICAgICAgYXNzZXJ0UHJlc2VudChvYmouZ2VvUG9pbnRWYWx1ZSwgJ2dlb1BvaW50VmFsdWUnKTtcclxuICAgICAgICAgICAgdmFyIGxhdGl0dWRlID0gb2JqLmdlb1BvaW50VmFsdWUubGF0aXR1ZGUgfHwgMDtcclxuICAgICAgICAgICAgdmFyIGxvbmdpdHVkZSA9IG9iai5nZW9Qb2ludFZhbHVlLmxvbmdpdHVkZSB8fCAwO1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEdlb1BvaW50VmFsdWUobmV3IEdlb1BvaW50KGxhdGl0dWRlLCBsb25naXR1ZGUpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoJ2J5dGVzVmFsdWUnIGluIG9iaikge1xyXG4gICAgICAgICAgICBhc3NlcnRQcmVzZW50KG9iai5ieXRlc1ZhbHVlLCAnYnl0ZXNWYWx1ZScpO1xyXG4gICAgICAgICAgICB2YXIgYmxvYiA9IHRoaXMuZnJvbUJsb2Iob2JqLmJ5dGVzVmFsdWUpO1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEJsb2JWYWx1ZShibG9iKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoJ3JlZmVyZW5jZVZhbHVlJyBpbiBvYmopIHtcclxuICAgICAgICAgICAgYXNzZXJ0UHJlc2VudChvYmoucmVmZXJlbmNlVmFsdWUsICdyZWZlcmVuY2VWYWx1ZScpO1xyXG4gICAgICAgICAgICB2YXIgcmVzb3VyY2VOYW1lID0gdGhpcy5mcm9tUmVzb3VyY2VOYW1lKG9iai5yZWZlcmVuY2VWYWx1ZSk7XHJcbiAgICAgICAgICAgIHZhciBkYklkID0gbmV3IERhdGFiYXNlSWQocmVzb3VyY2VOYW1lLmdldCgxKSwgcmVzb3VyY2VOYW1lLmdldCgzKSk7XHJcbiAgICAgICAgICAgIHZhciBrZXkgPSBuZXcgRG9jdW1lbnRLZXkodGhpcy5leHRyYWN0TG9jYWxQYXRoRnJvbVJlc291cmNlTmFtZShyZXNvdXJjZU5hbWUpKTtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBSZWZWYWx1ZShkYklkLCBrZXkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhaWwoJ1Vua25vd24gVmFsdWUgcHJvdG8gJyArIEpTT04uc3RyaW5naWZ5KG9iaikpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKiogQ3JlYXRlcyBhbiBhcGkuRG9jdW1lbnQgZnJvbSBrZXkgYW5kIGZpZWxkcyAoYnV0IG5vIGNyZWF0ZS91cGRhdGUgdGltZSkgKi9cclxuICAgIEpzb25Qcm90b1NlcmlhbGl6ZXIucHJvdG90eXBlLnRvTXV0YXRpb25Eb2N1bWVudCA9IGZ1bmN0aW9uIChrZXksIGZpZWxkcykge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIG5hbWU6IHRoaXMudG9OYW1lKGtleSksXHJcbiAgICAgICAgICAgIGZpZWxkczogdGhpcy50b0ZpZWxkcyhmaWVsZHMpXHJcbiAgICAgICAgfTtcclxuICAgIH07XHJcbiAgICBKc29uUHJvdG9TZXJpYWxpemVyLnByb3RvdHlwZS50b0RvY3VtZW50ID0gZnVuY3Rpb24gKGRvY3VtZW50KSB7XHJcbiAgICAgICAgYXNzZXJ0KCFkb2N1bWVudC5oYXNMb2NhbE11dGF0aW9ucywgXCJDYW4ndCBzZXJpYWxpemUgZG9jdW1lbnRzIHdpdGggbXV0YXRpb25zLlwiKTtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBuYW1lOiB0aGlzLnRvTmFtZShkb2N1bWVudC5rZXkpLFxyXG4gICAgICAgICAgICBmaWVsZHM6IHRoaXMudG9GaWVsZHMoZG9jdW1lbnQuZGF0YSgpKSxcclxuICAgICAgICAgICAgdXBkYXRlVGltZTogdGhpcy50b1RpbWVzdGFtcChkb2N1bWVudC52ZXJzaW9uLnRvVGltZXN0YW1wKCkpXHJcbiAgICAgICAgfTtcclxuICAgIH07XHJcbiAgICBKc29uUHJvdG9TZXJpYWxpemVyLnByb3RvdHlwZS5mcm9tRG9jdW1lbnQgPSBmdW5jdGlvbiAoZG9jdW1lbnQsIGhhc0NvbW1pdHRlZE11dGF0aW9ucykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIGtleSA9IHRoaXMuZnJvbU5hbWUoZG9jdW1lbnQubmFtZSk7XHJcbiAgICAgICAgdmFyIHZlcnNpb24gPSB0aGlzLmZyb21WZXJzaW9uKGRvY3VtZW50LnVwZGF0ZVRpbWUpO1xyXG4gICAgICAgIHJldHVybiBuZXcgRG9jdW1lbnQoa2V5LCB2ZXJzaW9uLCB7IGhhc0NvbW1pdHRlZE11dGF0aW9uczogISFoYXNDb21taXR0ZWRNdXRhdGlvbnMgfSwgdW5kZWZpbmVkLCBkb2N1bWVudCwgZnVuY3Rpb24gKHYpIHsgcmV0dXJuIF90aGlzLmZyb21WYWx1ZSh2KTsgfSk7XHJcbiAgICB9O1xyXG4gICAgSnNvblByb3RvU2VyaWFsaXplci5wcm90b3R5cGUudG9GaWVsZHMgPSBmdW5jdGlvbiAoZmllbGRzKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgcmVzdWx0ID0ge307XHJcbiAgICAgICAgZmllbGRzLmZvckVhY2goZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcclxuICAgICAgICAgICAgcmVzdWx0W2tleV0gPSBfdGhpcy50b1ZhbHVlKHZhbHVlKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfTtcclxuICAgIEpzb25Qcm90b1NlcmlhbGl6ZXIucHJvdG90eXBlLmZyb21GaWVsZHMgPSBmdW5jdGlvbiAob2JqZWN0KSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICAvLyBQcm90byBtYXA8c3RyaW5nLCBWYWx1ZT4gZ2V0cyBtYXBwZWQgdG8gT2JqZWN0LCBzbyBjYXN0IGl0LlxyXG4gICAgICAgIHZhciBtYXAgPSBvYmplY3Q7XHJcbiAgICAgICAgdmFyIHJlc3VsdCA9IE9iamVjdFZhbHVlLkVNUFRZO1xyXG4gICAgICAgIGZvckVhY2gobWFwLCBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xyXG4gICAgICAgICAgICByZXN1bHQgPSByZXN1bHQuc2V0KG5ldyBGaWVsZFBhdGgoW2tleV0pLCBfdGhpcy5mcm9tVmFsdWUodmFsdWUpKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfTtcclxuICAgIEpzb25Qcm90b1NlcmlhbGl6ZXIucHJvdG90eXBlLnRvTWFwVmFsdWUgPSBmdW5jdGlvbiAobWFwKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgZmllbGRzOiB0aGlzLnRvRmllbGRzKG1hcClcclxuICAgICAgICB9O1xyXG4gICAgfTtcclxuICAgIEpzb25Qcm90b1NlcmlhbGl6ZXIucHJvdG90eXBlLnRvQXJyYXlWYWx1ZSA9IGZ1bmN0aW9uIChhcnJheSkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIHJlc3VsdCA9IFtdO1xyXG4gICAgICAgIGFycmF5LmZvckVhY2goZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKF90aGlzLnRvVmFsdWUodmFsdWUpKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4geyB2YWx1ZXM6IHJlc3VsdCB9O1xyXG4gICAgfTtcclxuICAgIEpzb25Qcm90b1NlcmlhbGl6ZXIucHJvdG90eXBlLmZyb21Gb3VuZCA9IGZ1bmN0aW9uIChkb2MpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIGFzc2VydCghIWRvYy5mb3VuZCwgJ1RyaWVkIHRvIGRlc2VyaWFsaXplIGEgZm91bmQgZG9jdW1lbnQgZnJvbSBhIG1pc3NpbmcgZG9jdW1lbnQuJyk7XHJcbiAgICAgICAgYXNzZXJ0UHJlc2VudChkb2MuZm91bmQubmFtZSwgJ2RvYy5mb3VuZC5uYW1lJyk7XHJcbiAgICAgICAgYXNzZXJ0UHJlc2VudChkb2MuZm91bmQudXBkYXRlVGltZSwgJ2RvYy5mb3VuZC51cGRhdGVUaW1lJyk7XHJcbiAgICAgICAgdmFyIGtleSA9IHRoaXMuZnJvbU5hbWUoZG9jLmZvdW5kLm5hbWUpO1xyXG4gICAgICAgIHZhciB2ZXJzaW9uID0gdGhpcy5mcm9tVmVyc2lvbihkb2MuZm91bmQudXBkYXRlVGltZSk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBEb2N1bWVudChrZXksIHZlcnNpb24sIHt9LCB1bmRlZmluZWQsIGRvYy5mb3VuZCwgZnVuY3Rpb24gKHYpIHtcclxuICAgICAgICAgICAgcmV0dXJuIF90aGlzLmZyb21WYWx1ZSh2KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBKc29uUHJvdG9TZXJpYWxpemVyLnByb3RvdHlwZS5mcm9tTWlzc2luZyA9IGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICBhc3NlcnQoISFyZXN1bHQubWlzc2luZywgJ1RyaWVkIHRvIGRlc2VyaWFsaXplIGEgbWlzc2luZyBkb2N1bWVudCBmcm9tIGEgZm91bmQgZG9jdW1lbnQuJyk7XHJcbiAgICAgICAgYXNzZXJ0KCEhcmVzdWx0LnJlYWRUaW1lLCAnVHJpZWQgdG8gZGVzZXJpYWxpemUgYSBtaXNzaW5nIGRvY3VtZW50IHdpdGhvdXQgYSByZWFkIHRpbWUuJyk7XHJcbiAgICAgICAgdmFyIGtleSA9IHRoaXMuZnJvbU5hbWUocmVzdWx0Lm1pc3NpbmcpO1xyXG4gICAgICAgIHZhciB2ZXJzaW9uID0gdGhpcy5mcm9tVmVyc2lvbihyZXN1bHQucmVhZFRpbWUpO1xyXG4gICAgICAgIHJldHVybiBuZXcgTm9Eb2N1bWVudChrZXksIHZlcnNpb24pO1xyXG4gICAgfTtcclxuICAgIEpzb25Qcm90b1NlcmlhbGl6ZXIucHJvdG90eXBlLmZyb21NYXliZURvY3VtZW50ID0gZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgIGlmICgnZm91bmQnIGluIHJlc3VsdCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5mcm9tRm91bmQocmVzdWx0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoJ21pc3NpbmcnIGluIHJlc3VsdCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5mcm9tTWlzc2luZyhyZXN1bHQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFpbCgnaW52YWxpZCBiYXRjaCBnZXQgcmVzcG9uc2U6ICcgKyBKU09OLnN0cmluZ2lmeShyZXN1bHQpKTtcclxuICAgIH07XHJcbiAgICBKc29uUHJvdG9TZXJpYWxpemVyLnByb3RvdHlwZS50b1dhdGNoVGFyZ2V0Q2hhbmdlU3RhdGUgPSBmdW5jdGlvbiAoc3RhdGUpIHtcclxuICAgICAgICBzd2l0Y2ggKHN0YXRlKSB7XHJcbiAgICAgICAgICAgIGNhc2UgV2F0Y2hUYXJnZXRDaGFuZ2VTdGF0ZS5BZGRlZDpcclxuICAgICAgICAgICAgICAgIHJldHVybiAnQUREJztcclxuICAgICAgICAgICAgY2FzZSBXYXRjaFRhcmdldENoYW5nZVN0YXRlLkN1cnJlbnQ6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJ0NVUlJFTlQnO1xyXG4gICAgICAgICAgICBjYXNlIFdhdGNoVGFyZ2V0Q2hhbmdlU3RhdGUuTm9DaGFuZ2U6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJ05PX0NIQU5HRSc7XHJcbiAgICAgICAgICAgIGNhc2UgV2F0Y2hUYXJnZXRDaGFuZ2VTdGF0ZS5SZW1vdmVkOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuICdSRU1PVkUnO1xyXG4gICAgICAgICAgICBjYXNlIFdhdGNoVGFyZ2V0Q2hhbmdlU3RhdGUuUmVzZXQ6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJ1JFU0VUJztcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWlsKCdVbmtub3duIFdhdGNoVGFyZ2V0Q2hhbmdlU3RhdGU6ICcgKyBzdGF0ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIEpzb25Qcm90b1NlcmlhbGl6ZXIucHJvdG90eXBlLnRvVGVzdFdhdGNoQ2hhbmdlID0gZnVuY3Rpb24gKHdhdGNoQ2hhbmdlKSB7XHJcbiAgICAgICAgaWYgKHdhdGNoQ2hhbmdlIGluc3RhbmNlb2YgRXhpc3RlbmNlRmlsdGVyQ2hhbmdlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBmaWx0ZXI6IHtcclxuICAgICAgICAgICAgICAgICAgICBjb3VudDogd2F0Y2hDaGFuZ2UuZXhpc3RlbmNlRmlsdGVyLmNvdW50LFxyXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldElkOiB3YXRjaENoYW5nZS50YXJnZXRJZFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAod2F0Y2hDaGFuZ2UgaW5zdGFuY2VvZiBEb2N1bWVudFdhdGNoQ2hhbmdlKSB7XHJcbiAgICAgICAgICAgIGlmICh3YXRjaENoYW5nZS5uZXdEb2MgaW5zdGFuY2VvZiBEb2N1bWVudCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGRvYyA9IHdhdGNoQ2hhbmdlLm5ld0RvYztcclxuICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnRDaGFuZ2U6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQ6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IHRoaXMudG9OYW1lKGRvYy5rZXkpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRzOiB0aGlzLnRvRmllbGRzKGRvYy5kYXRhKCkpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlVGltZTogdGhpcy50b1ZlcnNpb24oZG9jLnZlcnNpb24pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldElkczogd2F0Y2hDaGFuZ2UudXBkYXRlZFRhcmdldElkcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3ZlZFRhcmdldElkczogd2F0Y2hDaGFuZ2UucmVtb3ZlZFRhcmdldElkc1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAod2F0Y2hDaGFuZ2UubmV3RG9jIGluc3RhbmNlb2YgTm9Eb2N1bWVudCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGRvYyA9IHdhdGNoQ2hhbmdlLm5ld0RvYztcclxuICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnREZWxldGU6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQ6IHRoaXMudG9OYW1lKGRvYy5rZXkpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWFkVGltZTogdGhpcy50b1ZlcnNpb24oZG9jLnZlcnNpb24pLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZW1vdmVkVGFyZ2V0SWRzOiB3YXRjaENoYW5nZS5yZW1vdmVkVGFyZ2V0SWRzXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmICh3YXRjaENoYW5nZS5uZXdEb2MgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnRSZW1vdmU6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQ6IHRoaXMudG9OYW1lKHdhdGNoQ2hhbmdlLmtleSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZWRUYXJnZXRJZHM6IHdhdGNoQ2hhbmdlLnJlbW92ZWRUYXJnZXRJZHNcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh3YXRjaENoYW5nZSBpbnN0YW5jZW9mIFdhdGNoVGFyZ2V0Q2hhbmdlKSB7XHJcbiAgICAgICAgICAgIHZhciBjYXVzZSA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgaWYgKHdhdGNoQ2hhbmdlLmNhdXNlKSB7XHJcbiAgICAgICAgICAgICAgICBjYXVzZSA9IHtcclxuICAgICAgICAgICAgICAgICAgICBjb2RlOiBtYXBScGNDb2RlRnJvbUNvZGUod2F0Y2hDaGFuZ2UuY2F1c2UuY29kZSksXHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogd2F0Y2hDaGFuZ2UuY2F1c2UubWVzc2FnZVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgdGFyZ2V0Q2hhbmdlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0Q2hhbmdlVHlwZTogdGhpcy50b1dhdGNoVGFyZ2V0Q2hhbmdlU3RhdGUod2F0Y2hDaGFuZ2Uuc3RhdGUpLFxyXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldElkczogd2F0Y2hDaGFuZ2UudGFyZ2V0SWRzLFxyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VtZVRva2VuOiB0aGlzLnVuc2FmZUNhc3RQcm90b0J5dGVTdHJpbmcod2F0Y2hDaGFuZ2UucmVzdW1lVG9rZW4pLFxyXG4gICAgICAgICAgICAgICAgICAgIGNhdXNlOiBjYXVzZVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFpbCgnVW5yZWNvZ25pemVkIHdhdGNoIGNoYW5nZTogJyArIEpTT04uc3RyaW5naWZ5KHdhdGNoQ2hhbmdlKSk7XHJcbiAgICB9O1xyXG4gICAgSnNvblByb3RvU2VyaWFsaXplci5wcm90b3R5cGUuZnJvbVdhdGNoQ2hhbmdlID0gZnVuY3Rpb24gKGNoYW5nZSkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIHdhdGNoQ2hhbmdlO1xyXG4gICAgICAgIGlmICgndGFyZ2V0Q2hhbmdlJyBpbiBjaGFuZ2UpIHtcclxuICAgICAgICAgICAgYXNzZXJ0UHJlc2VudChjaGFuZ2UudGFyZ2V0Q2hhbmdlLCAndGFyZ2V0Q2hhbmdlJyk7XHJcbiAgICAgICAgICAgIC8vIHByb3RvMyBkZWZhdWx0IHZhbHVlIGlzIHVuc2V0IGluIEpTT04gKHVuZGVmaW5lZCksIHNvIHVzZSAnTk9fQ0hBTkdFJ1xyXG4gICAgICAgICAgICAvLyBpZiB1bnNldFxyXG4gICAgICAgICAgICB2YXIgc3RhdGUgPSB0aGlzLmZyb21XYXRjaFRhcmdldENoYW5nZVN0YXRlKGNoYW5nZS50YXJnZXRDaGFuZ2UudGFyZ2V0Q2hhbmdlVHlwZSB8fCAnTk9fQ0hBTkdFJyk7XHJcbiAgICAgICAgICAgIHZhciB0YXJnZXRJZHMgPSBjaGFuZ2UudGFyZ2V0Q2hhbmdlLnRhcmdldElkcyB8fCBbXTtcclxuICAgICAgICAgICAgdmFyIHJlc3VtZVRva2VuID0gY2hhbmdlLnRhcmdldENoYW5nZS5yZXN1bWVUb2tlbiB8fCB0aGlzLmVtcHR5Qnl0ZVN0cmluZygpO1xyXG4gICAgICAgICAgICB2YXIgY2F1c2VQcm90byA9IGNoYW5nZS50YXJnZXRDaGFuZ2UuY2F1c2U7XHJcbiAgICAgICAgICAgIHZhciBjYXVzZSA9IGNhdXNlUHJvdG8gJiYgdGhpcy5mcm9tUnBjU3RhdHVzKGNhdXNlUHJvdG8pO1xyXG4gICAgICAgICAgICB3YXRjaENoYW5nZSA9IG5ldyBXYXRjaFRhcmdldENoYW5nZShzdGF0ZSwgdGFyZ2V0SWRzLCByZXN1bWVUb2tlbiwgY2F1c2UgfHwgbnVsbCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKCdkb2N1bWVudENoYW5nZScgaW4gY2hhbmdlKSB7XHJcbiAgICAgICAgICAgIGFzc2VydFByZXNlbnQoY2hhbmdlLmRvY3VtZW50Q2hhbmdlLCAnZG9jdW1lbnRDaGFuZ2UnKTtcclxuICAgICAgICAgICAgdmFyIGVudGl0eUNoYW5nZSA9IGNoYW5nZS5kb2N1bWVudENoYW5nZTtcclxuICAgICAgICAgICAgYXNzZXJ0UHJlc2VudChlbnRpdHlDaGFuZ2UuZG9jdW1lbnQsICdkb2N1bWVudENoYW5nZS5uYW1lJyk7XHJcbiAgICAgICAgICAgIGFzc2VydFByZXNlbnQoZW50aXR5Q2hhbmdlLmRvY3VtZW50Lm5hbWUsICdkb2N1bWVudENoYW5nZS5kb2N1bWVudC5uYW1lJyk7XHJcbiAgICAgICAgICAgIGFzc2VydFByZXNlbnQoZW50aXR5Q2hhbmdlLmRvY3VtZW50LnVwZGF0ZVRpbWUsICdkb2N1bWVudENoYW5nZS5kb2N1bWVudC51cGRhdGVUaW1lJyk7XHJcbiAgICAgICAgICAgIHZhciBrZXkgPSB0aGlzLmZyb21OYW1lKGVudGl0eUNoYW5nZS5kb2N1bWVudC5uYW1lKTtcclxuICAgICAgICAgICAgdmFyIHZlcnNpb24gPSB0aGlzLmZyb21WZXJzaW9uKGVudGl0eUNoYW5nZS5kb2N1bWVudC51cGRhdGVUaW1lKTtcclxuICAgICAgICAgICAgdmFyIGRvYyA9IG5ldyBEb2N1bWVudChrZXksIHZlcnNpb24sIHt9LCB1bmRlZmluZWQsIGVudGl0eUNoYW5nZS5kb2N1bWVudCwgZnVuY3Rpb24gKHYpIHsgcmV0dXJuIF90aGlzLmZyb21WYWx1ZSh2KTsgfSk7XHJcbiAgICAgICAgICAgIHZhciB1cGRhdGVkVGFyZ2V0SWRzID0gZW50aXR5Q2hhbmdlLnRhcmdldElkcyB8fCBbXTtcclxuICAgICAgICAgICAgdmFyIHJlbW92ZWRUYXJnZXRJZHMgPSBlbnRpdHlDaGFuZ2UucmVtb3ZlZFRhcmdldElkcyB8fCBbXTtcclxuICAgICAgICAgICAgd2F0Y2hDaGFuZ2UgPSBuZXcgRG9jdW1lbnRXYXRjaENoYW5nZSh1cGRhdGVkVGFyZ2V0SWRzLCByZW1vdmVkVGFyZ2V0SWRzLCBkb2Mua2V5LCBkb2MpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICgnZG9jdW1lbnREZWxldGUnIGluIGNoYW5nZSkge1xyXG4gICAgICAgICAgICBhc3NlcnRQcmVzZW50KGNoYW5nZS5kb2N1bWVudERlbGV0ZSwgJ2RvY3VtZW50RGVsZXRlJyk7XHJcbiAgICAgICAgICAgIHZhciBkb2NEZWxldGUgPSBjaGFuZ2UuZG9jdW1lbnREZWxldGU7XHJcbiAgICAgICAgICAgIGFzc2VydFByZXNlbnQoZG9jRGVsZXRlLmRvY3VtZW50LCAnZG9jdW1lbnREZWxldGUuZG9jdW1lbnQnKTtcclxuICAgICAgICAgICAgdmFyIGtleSA9IHRoaXMuZnJvbU5hbWUoZG9jRGVsZXRlLmRvY3VtZW50KTtcclxuICAgICAgICAgICAgdmFyIHZlcnNpb24gPSBkb2NEZWxldGUucmVhZFRpbWVcclxuICAgICAgICAgICAgICAgID8gdGhpcy5mcm9tVmVyc2lvbihkb2NEZWxldGUucmVhZFRpbWUpXHJcbiAgICAgICAgICAgICAgICA6IFNuYXBzaG90VmVyc2lvbi5mb3JEZWxldGVkRG9jKCk7XHJcbiAgICAgICAgICAgIHZhciBkb2MgPSBuZXcgTm9Eb2N1bWVudChrZXksIHZlcnNpb24pO1xyXG4gICAgICAgICAgICB2YXIgcmVtb3ZlZFRhcmdldElkcyA9IGRvY0RlbGV0ZS5yZW1vdmVkVGFyZ2V0SWRzIHx8IFtdO1xyXG4gICAgICAgICAgICB3YXRjaENoYW5nZSA9IG5ldyBEb2N1bWVudFdhdGNoQ2hhbmdlKFtdLCByZW1vdmVkVGFyZ2V0SWRzLCBkb2Mua2V5LCBkb2MpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICgnZG9jdW1lbnRSZW1vdmUnIGluIGNoYW5nZSkge1xyXG4gICAgICAgICAgICBhc3NlcnRQcmVzZW50KGNoYW5nZS5kb2N1bWVudFJlbW92ZSwgJ2RvY3VtZW50UmVtb3ZlJyk7XHJcbiAgICAgICAgICAgIHZhciBkb2NSZW1vdmUgPSBjaGFuZ2UuZG9jdW1lbnRSZW1vdmU7XHJcbiAgICAgICAgICAgIGFzc2VydFByZXNlbnQoZG9jUmVtb3ZlLmRvY3VtZW50LCAnZG9jdW1lbnRSZW1vdmUnKTtcclxuICAgICAgICAgICAgdmFyIGtleSA9IHRoaXMuZnJvbU5hbWUoZG9jUmVtb3ZlLmRvY3VtZW50KTtcclxuICAgICAgICAgICAgdmFyIHJlbW92ZWRUYXJnZXRJZHMgPSBkb2NSZW1vdmUucmVtb3ZlZFRhcmdldElkcyB8fCBbXTtcclxuICAgICAgICAgICAgd2F0Y2hDaGFuZ2UgPSBuZXcgRG9jdW1lbnRXYXRjaENoYW5nZShbXSwgcmVtb3ZlZFRhcmdldElkcywga2V5LCBudWxsKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoJ2ZpbHRlcicgaW4gY2hhbmdlKSB7XHJcbiAgICAgICAgICAgIC8vIFRPRE8oZGltb25kKTogaW1wbGVtZW50IGV4aXN0ZW5jZSBmaWx0ZXIgcGFyc2luZyB3aXRoIHN0cmF0ZWd5LlxyXG4gICAgICAgICAgICBhc3NlcnRQcmVzZW50KGNoYW5nZS5maWx0ZXIsICdmaWx0ZXInKTtcclxuICAgICAgICAgICAgdmFyIGZpbHRlciA9IGNoYW5nZS5maWx0ZXI7XHJcbiAgICAgICAgICAgIGFzc2VydFByZXNlbnQoZmlsdGVyLnRhcmdldElkLCAnZmlsdGVyLnRhcmdldElkJyk7XHJcbiAgICAgICAgICAgIHZhciBjb3VudCA9IGZpbHRlci5jb3VudCB8fCAwO1xyXG4gICAgICAgICAgICB2YXIgZXhpc3RlbmNlRmlsdGVyID0gbmV3IEV4aXN0ZW5jZUZpbHRlcihjb3VudCk7XHJcbiAgICAgICAgICAgIHZhciB0YXJnZXRJZCA9IGZpbHRlci50YXJnZXRJZDtcclxuICAgICAgICAgICAgd2F0Y2hDaGFuZ2UgPSBuZXcgRXhpc3RlbmNlRmlsdGVyQ2hhbmdlKHRhcmdldElkLCBleGlzdGVuY2VGaWx0ZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhaWwoJ1Vua25vd24gY2hhbmdlIHR5cGUgJyArIEpTT04uc3RyaW5naWZ5KGNoYW5nZSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gd2F0Y2hDaGFuZ2U7XHJcbiAgICB9O1xyXG4gICAgSnNvblByb3RvU2VyaWFsaXplci5wcm90b3R5cGUuZnJvbVdhdGNoVGFyZ2V0Q2hhbmdlU3RhdGUgPSBmdW5jdGlvbiAoc3RhdGUpIHtcclxuICAgICAgICBpZiAoc3RhdGUgPT09ICdOT19DSEFOR0UnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBXYXRjaFRhcmdldENoYW5nZVN0YXRlLk5vQ2hhbmdlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChzdGF0ZSA9PT0gJ0FERCcpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFdhdGNoVGFyZ2V0Q2hhbmdlU3RhdGUuQWRkZWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHN0YXRlID09PSAnUkVNT1ZFJykge1xyXG4gICAgICAgICAgICByZXR1cm4gV2F0Y2hUYXJnZXRDaGFuZ2VTdGF0ZS5SZW1vdmVkO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChzdGF0ZSA9PT0gJ0NVUlJFTlQnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBXYXRjaFRhcmdldENoYW5nZVN0YXRlLkN1cnJlbnQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHN0YXRlID09PSAnUkVTRVQnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBXYXRjaFRhcmdldENoYW5nZVN0YXRlLlJlc2V0O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhaWwoJ0dvdCB1bmV4cGVjdGVkIFRhcmdldENoYW5nZS5zdGF0ZTogJyArIHN0YXRlKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgSnNvblByb3RvU2VyaWFsaXplci5wcm90b3R5cGUudmVyc2lvbkZyb21MaXN0ZW5SZXNwb25zZSA9IGZ1bmN0aW9uIChjaGFuZ2UpIHtcclxuICAgICAgICAvLyBXZSBoYXZlIG9ubHkgcmVhY2hlZCBhIGNvbnNpc3RlbnQgc25hcHNob3QgZm9yIHRoZSBlbnRpcmUgc3RyZWFtIGlmIHRoZXJlXHJcbiAgICAgICAgLy8gaXMgYSByZWFkX3RpbWUgc2V0IGFuZCBpdCBhcHBsaWVzIHRvIGFsbCB0YXJnZXRzIChpLmUuIHRoZSBsaXN0IG9mXHJcbiAgICAgICAgLy8gdGFyZ2V0cyBpcyBlbXB0eSkuIFRoZSBiYWNrZW5kIGlzIGd1YXJhbnRlZWQgdG8gc2VuZCBzdWNoIHJlc3BvbnNlcy5cclxuICAgICAgICBpZiAoISgndGFyZ2V0Q2hhbmdlJyBpbiBjaGFuZ2UpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBTbmFwc2hvdFZlcnNpb24uTUlOO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgdGFyZ2V0Q2hhbmdlID0gY2hhbmdlLnRhcmdldENoYW5nZTtcclxuICAgICAgICBpZiAodGFyZ2V0Q2hhbmdlLnRhcmdldElkcyAmJiB0YXJnZXRDaGFuZ2UudGFyZ2V0SWRzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICByZXR1cm4gU25hcHNob3RWZXJzaW9uLk1JTjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCF0YXJnZXRDaGFuZ2UucmVhZFRpbWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFNuYXBzaG90VmVyc2lvbi5NSU47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLmZyb21WZXJzaW9uKHRhcmdldENoYW5nZS5yZWFkVGltZSk7XHJcbiAgICB9O1xyXG4gICAgSnNvblByb3RvU2VyaWFsaXplci5wcm90b3R5cGUudG9NdXRhdGlvbiA9IGZ1bmN0aW9uIChtdXRhdGlvbikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIHJlc3VsdDtcclxuICAgICAgICBpZiAobXV0YXRpb24gaW5zdGFuY2VvZiBTZXRNdXRhdGlvbikge1xyXG4gICAgICAgICAgICByZXN1bHQgPSB7XHJcbiAgICAgICAgICAgICAgICB1cGRhdGU6IHRoaXMudG9NdXRhdGlvbkRvY3VtZW50KG11dGF0aW9uLmtleSwgbXV0YXRpb24udmFsdWUpXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKG11dGF0aW9uIGluc3RhbmNlb2YgRGVsZXRlTXV0YXRpb24pIHtcclxuICAgICAgICAgICAgcmVzdWx0ID0geyBkZWxldGU6IHRoaXMudG9OYW1lKG11dGF0aW9uLmtleSkgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAobXV0YXRpb24gaW5zdGFuY2VvZiBQYXRjaE11dGF0aW9uKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdCA9IHtcclxuICAgICAgICAgICAgICAgIHVwZGF0ZTogdGhpcy50b011dGF0aW9uRG9jdW1lbnQobXV0YXRpb24ua2V5LCBtdXRhdGlvbi5kYXRhKSxcclxuICAgICAgICAgICAgICAgIHVwZGF0ZU1hc2s6IHRoaXMudG9Eb2N1bWVudE1hc2sobXV0YXRpb24uZmllbGRNYXNrKVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChtdXRhdGlvbiBpbnN0YW5jZW9mIFRyYW5zZm9ybU11dGF0aW9uKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdCA9IHtcclxuICAgICAgICAgICAgICAgIHRyYW5zZm9ybToge1xyXG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50OiB0aGlzLnRvTmFtZShtdXRhdGlvbi5rZXkpLFxyXG4gICAgICAgICAgICAgICAgICAgIGZpZWxkVHJhbnNmb3JtczogbXV0YXRpb24uZmllbGRUcmFuc2Zvcm1zLm1hcChmdW5jdGlvbiAodHJhbnNmb3JtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy50b0ZpZWxkVHJhbnNmb3JtKHRyYW5zZm9ybSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWlsKCdVbmtub3duIG11dGF0aW9uIHR5cGUgJyArIG11dGF0aW9uLnR5cGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIW11dGF0aW9uLnByZWNvbmRpdGlvbi5pc05vbmUpIHtcclxuICAgICAgICAgICAgcmVzdWx0LmN1cnJlbnREb2N1bWVudCA9IHRoaXMudG9QcmVjb25kaXRpb24obXV0YXRpb24ucHJlY29uZGl0aW9uKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH07XHJcbiAgICBKc29uUHJvdG9TZXJpYWxpemVyLnByb3RvdHlwZS5mcm9tTXV0YXRpb24gPSBmdW5jdGlvbiAocHJvdG8pIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhciBwcmVjb25kaXRpb24gPSBwcm90by5jdXJyZW50RG9jdW1lbnRcclxuICAgICAgICAgICAgPyB0aGlzLmZyb21QcmVjb25kaXRpb24ocHJvdG8uY3VycmVudERvY3VtZW50KVxyXG4gICAgICAgICAgICA6IFByZWNvbmRpdGlvbi5OT05FO1xyXG4gICAgICAgIGlmIChwcm90by51cGRhdGUpIHtcclxuICAgICAgICAgICAgYXNzZXJ0UHJlc2VudChwcm90by51cGRhdGUubmFtZSwgJ25hbWUnKTtcclxuICAgICAgICAgICAgdmFyIGtleSA9IHRoaXMuZnJvbU5hbWUocHJvdG8udXBkYXRlLm5hbWUpO1xyXG4gICAgICAgICAgICB2YXIgdmFsdWUgPSB0aGlzLmZyb21GaWVsZHMocHJvdG8udXBkYXRlLmZpZWxkcyB8fCB7fSk7XHJcbiAgICAgICAgICAgIGlmIChwcm90by51cGRhdGVNYXNrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZmllbGRNYXNrID0gdGhpcy5mcm9tRG9jdW1lbnRNYXNrKHByb3RvLnVwZGF0ZU1hc2spO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBQYXRjaE11dGF0aW9uKGtleSwgdmFsdWUsIGZpZWxkTWFzaywgcHJlY29uZGl0aW9uKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgU2V0TXV0YXRpb24oa2V5LCB2YWx1ZSwgcHJlY29uZGl0aW9uKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChwcm90by5kZWxldGUpIHtcclxuICAgICAgICAgICAgdmFyIGtleSA9IHRoaXMuZnJvbU5hbWUocHJvdG8uZGVsZXRlKTtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBEZWxldGVNdXRhdGlvbihrZXksIHByZWNvbmRpdGlvbik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHByb3RvLnRyYW5zZm9ybSkge1xyXG4gICAgICAgICAgICB2YXIga2V5ID0gdGhpcy5mcm9tTmFtZShwcm90by50cmFuc2Zvcm0uZG9jdW1lbnQpO1xyXG4gICAgICAgICAgICB2YXIgZmllbGRUcmFuc2Zvcm1zID0gcHJvdG8udHJhbnNmb3JtLmZpZWxkVHJhbnNmb3Jtcy5tYXAoZnVuY3Rpb24gKHRyYW5zZm9ybSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLmZyb21GaWVsZFRyYW5zZm9ybSh0cmFuc2Zvcm0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgYXNzZXJ0KHByZWNvbmRpdGlvbi5leGlzdHMgPT09IHRydWUsICdUcmFuc2Zvcm1zIG9ubHkgc3VwcG9ydCBwcmVjb25kaXRpb24gXCJleGlzdHMgPT0gdHJ1ZVwiJyk7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgVHJhbnNmb3JtTXV0YXRpb24oa2V5LCBmaWVsZFRyYW5zZm9ybXMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhaWwoJ3Vua25vd24gbXV0YXRpb24gcHJvdG86ICcgKyBKU09OLnN0cmluZ2lmeShwcm90bykpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBKc29uUHJvdG9TZXJpYWxpemVyLnByb3RvdHlwZS50b1ByZWNvbmRpdGlvbiA9IGZ1bmN0aW9uIChwcmVjb25kaXRpb24pIHtcclxuICAgICAgICBhc3NlcnQoIXByZWNvbmRpdGlvbi5pc05vbmUsIFwiQ2FuJ3Qgc2VyaWFsaXplIGFuIGVtcHR5IHByZWNvbmRpdGlvblwiKTtcclxuICAgICAgICBpZiAocHJlY29uZGl0aW9uLnVwZGF0ZVRpbWUgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgdXBkYXRlVGltZTogdGhpcy50b1ZlcnNpb24ocHJlY29uZGl0aW9uLnVwZGF0ZVRpbWUpXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHByZWNvbmRpdGlvbi5leGlzdHMgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICByZXR1cm4geyBleGlzdHM6IHByZWNvbmRpdGlvbi5leGlzdHMgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWlsKCdVbmtub3duIHByZWNvbmRpdGlvbicpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBKc29uUHJvdG9TZXJpYWxpemVyLnByb3RvdHlwZS5mcm9tUHJlY29uZGl0aW9uID0gZnVuY3Rpb24gKHByZWNvbmRpdGlvbikge1xyXG4gICAgICAgIGlmIChwcmVjb25kaXRpb24udXBkYXRlVGltZSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBQcmVjb25kaXRpb24udXBkYXRlVGltZSh0aGlzLmZyb21WZXJzaW9uKHByZWNvbmRpdGlvbi51cGRhdGVUaW1lKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHByZWNvbmRpdGlvbi5leGlzdHMgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gUHJlY29uZGl0aW9uLmV4aXN0cyhwcmVjb25kaXRpb24uZXhpc3RzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBQcmVjb25kaXRpb24uTk9ORTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgSnNvblByb3RvU2VyaWFsaXplci5wcm90b3R5cGUuZnJvbVdyaXRlUmVzdWx0ID0gZnVuY3Rpb24gKHByb3RvLCBjb21taXRUaW1lKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICAvLyBOT1RFOiBEZWxldGVzIGRvbid0IGhhdmUgYW4gdXBkYXRlVGltZS5cclxuICAgICAgICB2YXIgdmVyc2lvbiA9IHByb3RvLnVwZGF0ZVRpbWVcclxuICAgICAgICAgICAgPyB0aGlzLmZyb21WZXJzaW9uKHByb3RvLnVwZGF0ZVRpbWUpXHJcbiAgICAgICAgICAgIDogdGhpcy5mcm9tVmVyc2lvbihjb21taXRUaW1lKTtcclxuICAgICAgICBpZiAodmVyc2lvbi5pc0VxdWFsKFNuYXBzaG90VmVyc2lvbi5NSU4pKSB7XHJcbiAgICAgICAgICAgIC8vIFRoZSBGaXJlc3RvcmUgRW11bGF0b3IgY3VycmVudGx5IHJldHVybnMgYW4gdXBkYXRlIHRpbWUgb2YgMCBmb3JcclxuICAgICAgICAgICAgLy8gZGVsZXRlcyBvZiBub24tZXhpc3RpbmcgZG9jdW1lbnRzIChyYXRoZXIgdGhhbiBudWxsKS4gVGhpcyBicmVha3MgdGhlXHJcbiAgICAgICAgICAgIC8vIHRlc3QgXCJnZXQgZGVsZXRlZCBkb2Mgd2hpbGUgb2ZmbGluZSB3aXRoIHNvdXJjZT1jYWNoZVwiIGFzIE5vRG9jdW1lbnRzXHJcbiAgICAgICAgICAgIC8vIHdpdGggdmVyc2lvbiAwIGFyZSBmaWx0ZXJlZCBieSBJbmRleGVkRGIncyBSZW1vdGVEb2N1bWVudENhY2hlLlxyXG4gICAgICAgICAgICAvLyBUT0RPKCMyMTQ5KTogUmVtb3ZlIHRoaXMgd2hlbiBFbXVsYXRvciBpcyBmaXhlZFxyXG4gICAgICAgICAgICB2ZXJzaW9uID0gdGhpcy5mcm9tVmVyc2lvbihjb21taXRUaW1lKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIHRyYW5zZm9ybVJlc3VsdHMgPSBudWxsO1xyXG4gICAgICAgIGlmIChwcm90by50cmFuc2Zvcm1SZXN1bHRzICYmIHByb3RvLnRyYW5zZm9ybVJlc3VsdHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICB0cmFuc2Zvcm1SZXN1bHRzID0gcHJvdG8udHJhbnNmb3JtUmVzdWx0cy5tYXAoZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLmZyb21WYWx1ZShyZXN1bHQpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG5ldyBNdXRhdGlvblJlc3VsdCh2ZXJzaW9uLCB0cmFuc2Zvcm1SZXN1bHRzKTtcclxuICAgIH07XHJcbiAgICBKc29uUHJvdG9TZXJpYWxpemVyLnByb3RvdHlwZS5mcm9tV3JpdGVSZXN1bHRzID0gZnVuY3Rpb24gKHByb3RvcywgY29tbWl0VGltZSkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgaWYgKHByb3RvcyAmJiBwcm90b3MubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBhc3NlcnQoY29tbWl0VGltZSAhPT0gdW5kZWZpbmVkLCAnUmVjZWl2ZWQgYSB3cml0ZSByZXN1bHQgd2l0aG91dCBhIGNvbW1pdCB0aW1lJyk7XHJcbiAgICAgICAgICAgIHJldHVybiBwcm90b3MubWFwKGZ1bmN0aW9uIChwcm90bykgeyByZXR1cm4gX3RoaXMuZnJvbVdyaXRlUmVzdWx0KHByb3RvLCBjb21taXRUaW1lKTsgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gW107XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIEpzb25Qcm90b1NlcmlhbGl6ZXIucHJvdG90eXBlLnRvRmllbGRUcmFuc2Zvcm0gPSBmdW5jdGlvbiAoZmllbGRUcmFuc2Zvcm0pIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhciB0cmFuc2Zvcm0gPSBmaWVsZFRyYW5zZm9ybS50cmFuc2Zvcm07XHJcbiAgICAgICAgaWYgKHRyYW5zZm9ybSBpbnN0YW5jZW9mIFNlcnZlclRpbWVzdGFtcFRyYW5zZm9ybSkge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgZmllbGRQYXRoOiBmaWVsZFRyYW5zZm9ybS5maWVsZC5jYW5vbmljYWxTdHJpbmcoKSxcclxuICAgICAgICAgICAgICAgIHNldFRvU2VydmVyVmFsdWU6ICdSRVFVRVNUX1RJTUUnXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHRyYW5zZm9ybSBpbnN0YW5jZW9mIEFycmF5VW5pb25UcmFuc2Zvcm1PcGVyYXRpb24pIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIGZpZWxkUGF0aDogZmllbGRUcmFuc2Zvcm0uZmllbGQuY2Fub25pY2FsU3RyaW5nKCksXHJcbiAgICAgICAgICAgICAgICBhcHBlbmRNaXNzaW5nRWxlbWVudHM6IHtcclxuICAgICAgICAgICAgICAgICAgICB2YWx1ZXM6IHRyYW5zZm9ybS5lbGVtZW50cy5tYXAoZnVuY3Rpb24gKHYpIHsgcmV0dXJuIF90aGlzLnRvVmFsdWUodik7IH0pXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHRyYW5zZm9ybSBpbnN0YW5jZW9mIEFycmF5UmVtb3ZlVHJhbnNmb3JtT3BlcmF0aW9uKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBmaWVsZFBhdGg6IGZpZWxkVHJhbnNmb3JtLmZpZWxkLmNhbm9uaWNhbFN0cmluZygpLFxyXG4gICAgICAgICAgICAgICAgcmVtb3ZlQWxsRnJvbUFycmF5OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWVzOiB0cmFuc2Zvcm0uZWxlbWVudHMubWFwKGZ1bmN0aW9uICh2KSB7IHJldHVybiBfdGhpcy50b1ZhbHVlKHYpOyB9KVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh0cmFuc2Zvcm0gaW5zdGFuY2VvZiBOdW1lcmljSW5jcmVtZW50VHJhbnNmb3JtT3BlcmF0aW9uKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBmaWVsZFBhdGg6IGZpZWxkVHJhbnNmb3JtLmZpZWxkLmNhbm9uaWNhbFN0cmluZygpLFxyXG4gICAgICAgICAgICAgICAgaW5jcmVtZW50OiB0aGlzLnRvVmFsdWUodHJhbnNmb3JtLm9wZXJhbmQpXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aHJvdyBmYWlsKCdVbmtub3duIHRyYW5zZm9ybTogJyArIGZpZWxkVHJhbnNmb3JtLnRyYW5zZm9ybSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIEpzb25Qcm90b1NlcmlhbGl6ZXIucHJvdG90eXBlLmZyb21GaWVsZFRyYW5zZm9ybSA9IGZ1bmN0aW9uIChwcm90bykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIHRyYW5zZm9ybSA9IG51bGw7XHJcbiAgICAgICAgaWYgKCdzZXRUb1NlcnZlclZhbHVlJyBpbiBwcm90bykge1xyXG4gICAgICAgICAgICBhc3NlcnQocHJvdG8uc2V0VG9TZXJ2ZXJWYWx1ZSA9PT0gJ1JFUVVFU1RfVElNRScsICdVbmtub3duIHNlcnZlciB2YWx1ZSB0cmFuc2Zvcm0gcHJvdG86ICcgKyBKU09OLnN0cmluZ2lmeShwcm90bykpO1xyXG4gICAgICAgICAgICB0cmFuc2Zvcm0gPSBTZXJ2ZXJUaW1lc3RhbXBUcmFuc2Zvcm0uaW5zdGFuY2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKCdhcHBlbmRNaXNzaW5nRWxlbWVudHMnIGluIHByb3RvKSB7XHJcbiAgICAgICAgICAgIHZhciB2YWx1ZXMgPSBwcm90by5hcHBlbmRNaXNzaW5nRWxlbWVudHMudmFsdWVzIHx8IFtdO1xyXG4gICAgICAgICAgICB0cmFuc2Zvcm0gPSBuZXcgQXJyYXlVbmlvblRyYW5zZm9ybU9wZXJhdGlvbih2YWx1ZXMubWFwKGZ1bmN0aW9uICh2KSB7IHJldHVybiBfdGhpcy5mcm9tVmFsdWUodik7IH0pKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoJ3JlbW92ZUFsbEZyb21BcnJheScgaW4gcHJvdG8pIHtcclxuICAgICAgICAgICAgdmFyIHZhbHVlcyA9IHByb3RvLnJlbW92ZUFsbEZyb21BcnJheS52YWx1ZXMgfHwgW107XHJcbiAgICAgICAgICAgIHRyYW5zZm9ybSA9IG5ldyBBcnJheVJlbW92ZVRyYW5zZm9ybU9wZXJhdGlvbih2YWx1ZXMubWFwKGZ1bmN0aW9uICh2KSB7IHJldHVybiBfdGhpcy5mcm9tVmFsdWUodik7IH0pKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoJ2luY3JlbWVudCcgaW4gcHJvdG8pIHtcclxuICAgICAgICAgICAgdmFyIG9wZXJhbmQgPSB0aGlzLmZyb21WYWx1ZShwcm90by5pbmNyZW1lbnQpO1xyXG4gICAgICAgICAgICBhc3NlcnQob3BlcmFuZCBpbnN0YW5jZW9mIE51bWJlclZhbHVlLCAnTlVNRVJJQ19BREQgdHJhbnNmb3JtIHJlcXVpcmVzIGEgTnVtYmVyVmFsdWUnKTtcclxuICAgICAgICAgICAgdHJhbnNmb3JtID0gbmV3IE51bWVyaWNJbmNyZW1lbnRUcmFuc2Zvcm1PcGVyYXRpb24ob3BlcmFuZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBmYWlsKCdVbmtub3duIHRyYW5zZm9ybSBwcm90bzogJyArIEpTT04uc3RyaW5naWZ5KHByb3RvKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBmaWVsZFBhdGggPSBGaWVsZFBhdGguZnJvbVNlcnZlckZvcm1hdChwcm90by5maWVsZFBhdGgpO1xyXG4gICAgICAgIHJldHVybiBuZXcgRmllbGRUcmFuc2Zvcm0oZmllbGRQYXRoLCB0cmFuc2Zvcm0pO1xyXG4gICAgfTtcclxuICAgIEpzb25Qcm90b1NlcmlhbGl6ZXIucHJvdG90eXBlLnRvRG9jdW1lbnRzVGFyZ2V0ID0gZnVuY3Rpb24gKHRhcmdldCkge1xyXG4gICAgICAgIHJldHVybiB7IGRvY3VtZW50czogW3RoaXMudG9RdWVyeVBhdGgodGFyZ2V0LnBhdGgpXSB9O1xyXG4gICAgfTtcclxuICAgIEpzb25Qcm90b1NlcmlhbGl6ZXIucHJvdG90eXBlLmZyb21Eb2N1bWVudHNUYXJnZXQgPSBmdW5jdGlvbiAoZG9jdW1lbnRzVGFyZ2V0KSB7XHJcbiAgICAgICAgdmFyIGNvdW50ID0gZG9jdW1lbnRzVGFyZ2V0LmRvY3VtZW50cy5sZW5ndGg7XHJcbiAgICAgICAgYXNzZXJ0KGNvdW50ID09PSAxLCAnRG9jdW1lbnRzVGFyZ2V0IGNvbnRhaW5lZCBvdGhlciB0aGFuIDEgZG9jdW1lbnQ6ICcgKyBjb3VudCk7XHJcbiAgICAgICAgdmFyIG5hbWUgPSBkb2N1bWVudHNUYXJnZXQuZG9jdW1lbnRzWzBdO1xyXG4gICAgICAgIHJldHVybiBRdWVyeS5hdFBhdGgodGhpcy5mcm9tUXVlcnlQYXRoKG5hbWUpKS50b1RhcmdldCgpO1xyXG4gICAgfTtcclxuICAgIEpzb25Qcm90b1NlcmlhbGl6ZXIucHJvdG90eXBlLnRvUXVlcnlUYXJnZXQgPSBmdW5jdGlvbiAodGFyZ2V0KSB7XHJcbiAgICAgICAgLy8gRGlzc2VjdCB0aGUgcGF0aCBpbnRvIHBhcmVudCwgY29sbGVjdGlvbklkLCBhbmQgb3B0aW9uYWwga2V5IGZpbHRlci5cclxuICAgICAgICB2YXIgcmVzdWx0ID0geyBzdHJ1Y3R1cmVkUXVlcnk6IHt9IH07XHJcbiAgICAgICAgdmFyIHBhdGggPSB0YXJnZXQucGF0aDtcclxuICAgICAgICBpZiAodGFyZ2V0LmNvbGxlY3Rpb25Hcm91cCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBhc3NlcnQocGF0aC5sZW5ndGggJSAyID09PSAwLCAnQ29sbGVjdGlvbiBHcm91cCBxdWVyaWVzIHNob3VsZCBiZSB3aXRoaW4gYSBkb2N1bWVudCBwYXRoIG9yIHJvb3QuJyk7XHJcbiAgICAgICAgICAgIHJlc3VsdC5wYXJlbnQgPSB0aGlzLnRvUXVlcnlQYXRoKHBhdGgpO1xyXG4gICAgICAgICAgICByZXN1bHQuc3RydWN0dXJlZFF1ZXJ5LmZyb20gPSBbXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29sbGVjdGlvbklkOiB0YXJnZXQuY29sbGVjdGlvbkdyb3VwLFxyXG4gICAgICAgICAgICAgICAgICAgIGFsbERlc2NlbmRhbnRzOiB0cnVlXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBhc3NlcnQocGF0aC5sZW5ndGggJSAyICE9PSAwLCAnRG9jdW1lbnQgcXVlcmllcyB3aXRoIGZpbHRlcnMgYXJlIG5vdCBzdXBwb3J0ZWQuJyk7XHJcbiAgICAgICAgICAgIHJlc3VsdC5wYXJlbnQgPSB0aGlzLnRvUXVlcnlQYXRoKHBhdGgucG9wTGFzdCgpKTtcclxuICAgICAgICAgICAgcmVzdWx0LnN0cnVjdHVyZWRRdWVyeS5mcm9tID0gW3sgY29sbGVjdGlvbklkOiBwYXRoLmxhc3RTZWdtZW50KCkgfV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciB3aGVyZSA9IHRoaXMudG9GaWx0ZXIodGFyZ2V0LmZpbHRlcnMpO1xyXG4gICAgICAgIGlmICh3aGVyZSkge1xyXG4gICAgICAgICAgICByZXN1bHQuc3RydWN0dXJlZFF1ZXJ5LndoZXJlID0gd2hlcmU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBvcmRlckJ5ID0gdGhpcy50b09yZGVyKHRhcmdldC5vcmRlckJ5KTtcclxuICAgICAgICBpZiAob3JkZXJCeSkge1xyXG4gICAgICAgICAgICByZXN1bHQuc3RydWN0dXJlZFF1ZXJ5Lm9yZGVyQnkgPSBvcmRlckJ5O1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgbGltaXQgPSB0aGlzLnRvSW50MzJWYWx1ZSh0YXJnZXQubGltaXQpO1xyXG4gICAgICAgIGlmIChsaW1pdCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICByZXN1bHQuc3RydWN0dXJlZFF1ZXJ5LmxpbWl0ID0gbGltaXQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0YXJnZXQuc3RhcnRBdCkge1xyXG4gICAgICAgICAgICByZXN1bHQuc3RydWN0dXJlZFF1ZXJ5LnN0YXJ0QXQgPSB0aGlzLnRvQ3Vyc29yKHRhcmdldC5zdGFydEF0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRhcmdldC5lbmRBdCkge1xyXG4gICAgICAgICAgICByZXN1bHQuc3RydWN0dXJlZFF1ZXJ5LmVuZEF0ID0gdGhpcy50b0N1cnNvcih0YXJnZXQuZW5kQXQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfTtcclxuICAgIEpzb25Qcm90b1NlcmlhbGl6ZXIucHJvdG90eXBlLmZyb21RdWVyeVRhcmdldCA9IGZ1bmN0aW9uICh0YXJnZXQpIHtcclxuICAgICAgICB2YXIgcGF0aCA9IHRoaXMuZnJvbVF1ZXJ5UGF0aCh0YXJnZXQucGFyZW50KTtcclxuICAgICAgICB2YXIgcXVlcnkgPSB0YXJnZXQuc3RydWN0dXJlZFF1ZXJ5O1xyXG4gICAgICAgIHZhciBmcm9tQ291bnQgPSBxdWVyeS5mcm9tID8gcXVlcnkuZnJvbS5sZW5ndGggOiAwO1xyXG4gICAgICAgIHZhciBjb2xsZWN0aW9uR3JvdXAgPSBudWxsO1xyXG4gICAgICAgIGlmIChmcm9tQ291bnQgPiAwKSB7XHJcbiAgICAgICAgICAgIGFzc2VydChmcm9tQ291bnQgPT09IDEsICdTdHJ1Y3R1cmVkUXVlcnkuZnJvbSB3aXRoIG1vcmUgdGhhbiBvbmUgY29sbGVjdGlvbiBpcyBub3Qgc3VwcG9ydGVkLicpO1xyXG4gICAgICAgICAgICB2YXIgZnJvbSA9IHF1ZXJ5LmZyb21bMF07XHJcbiAgICAgICAgICAgIGlmIChmcm9tLmFsbERlc2NlbmRhbnRzKSB7XHJcbiAgICAgICAgICAgICAgICBjb2xsZWN0aW9uR3JvdXAgPSBmcm9tLmNvbGxlY3Rpb25JZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHBhdGggPSBwYXRoLmNoaWxkKGZyb20uY29sbGVjdGlvbklkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgZmlsdGVyQnkgPSBbXTtcclxuICAgICAgICBpZiAocXVlcnkud2hlcmUpIHtcclxuICAgICAgICAgICAgZmlsdGVyQnkgPSB0aGlzLmZyb21GaWx0ZXIocXVlcnkud2hlcmUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgb3JkZXJCeSA9IFtdO1xyXG4gICAgICAgIGlmIChxdWVyeS5vcmRlckJ5KSB7XHJcbiAgICAgICAgICAgIG9yZGVyQnkgPSB0aGlzLmZyb21PcmRlcihxdWVyeS5vcmRlckJ5KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGxpbWl0ID0gbnVsbDtcclxuICAgICAgICBpZiAocXVlcnkubGltaXQpIHtcclxuICAgICAgICAgICAgbGltaXQgPSB0aGlzLmZyb21JbnQzMlZhbHVlKHF1ZXJ5LmxpbWl0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIHN0YXJ0QXQgPSBudWxsO1xyXG4gICAgICAgIGlmIChxdWVyeS5zdGFydEF0KSB7XHJcbiAgICAgICAgICAgIHN0YXJ0QXQgPSB0aGlzLmZyb21DdXJzb3IocXVlcnkuc3RhcnRBdCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBlbmRBdCA9IG51bGw7XHJcbiAgICAgICAgaWYgKHF1ZXJ5LmVuZEF0KSB7XHJcbiAgICAgICAgICAgIGVuZEF0ID0gdGhpcy5mcm9tQ3Vyc29yKHF1ZXJ5LmVuZEF0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG5ldyBRdWVyeShwYXRoLCBjb2xsZWN0aW9uR3JvdXAsIG9yZGVyQnksIGZpbHRlckJ5LCBsaW1pdCwgTGltaXRUeXBlLkZpcnN0LCBzdGFydEF0LCBlbmRBdCkudG9UYXJnZXQoKTtcclxuICAgIH07XHJcbiAgICBKc29uUHJvdG9TZXJpYWxpemVyLnByb3RvdHlwZS50b0xpc3RlblJlcXVlc3RMYWJlbHMgPSBmdW5jdGlvbiAodGFyZ2V0RGF0YSkge1xyXG4gICAgICAgIHZhciB2YWx1ZSA9IHRoaXMudG9MYWJlbCh0YXJnZXREYXRhLnB1cnBvc2UpO1xyXG4gICAgICAgIGlmICh2YWx1ZSA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICdnb29nLWxpc3Rlbi10YWdzJzogdmFsdWVcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgSnNvblByb3RvU2VyaWFsaXplci5wcm90b3R5cGUudG9MYWJlbCA9IGZ1bmN0aW9uIChwdXJwb3NlKSB7XHJcbiAgICAgICAgc3dpdGNoIChwdXJwb3NlKSB7XHJcbiAgICAgICAgICAgIGNhc2UgVGFyZ2V0UHVycG9zZS5MaXN0ZW46XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgY2FzZSBUYXJnZXRQdXJwb3NlLkV4aXN0ZW5jZUZpbHRlck1pc21hdGNoOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuICdleGlzdGVuY2UtZmlsdGVyLW1pc21hdGNoJztcclxuICAgICAgICAgICAgY2FzZSBUYXJnZXRQdXJwb3NlLkxpbWJvUmVzb2x1dGlvbjpcclxuICAgICAgICAgICAgICAgIHJldHVybiAnbGltYm8tZG9jdW1lbnQnO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhaWwoJ1VucmVjb2duaXplZCBxdWVyeSBwdXJwb3NlOiAnICsgcHVycG9zZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIEpzb25Qcm90b1NlcmlhbGl6ZXIucHJvdG90eXBlLnRvVGFyZ2V0ID0gZnVuY3Rpb24gKHRhcmdldERhdGEpIHtcclxuICAgICAgICB2YXIgcmVzdWx0O1xyXG4gICAgICAgIHZhciB0YXJnZXQgPSB0YXJnZXREYXRhLnRhcmdldDtcclxuICAgICAgICBpZiAodGFyZ2V0LmlzRG9jdW1lbnRRdWVyeSgpKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdCA9IHsgZG9jdW1lbnRzOiB0aGlzLnRvRG9jdW1lbnRzVGFyZ2V0KHRhcmdldCkgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJlc3VsdCA9IHsgcXVlcnk6IHRoaXMudG9RdWVyeVRhcmdldCh0YXJnZXQpIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJlc3VsdC50YXJnZXRJZCA9IHRhcmdldERhdGEudGFyZ2V0SWQ7XHJcbiAgICAgICAgaWYgKHRhcmdldERhdGEucmVzdW1lVG9rZW4ubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICByZXN1bHQucmVzdW1lVG9rZW4gPSB0aGlzLnVuc2FmZUNhc3RQcm90b0J5dGVTdHJpbmcodGFyZ2V0RGF0YS5yZXN1bWVUb2tlbik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9O1xyXG4gICAgSnNvblByb3RvU2VyaWFsaXplci5wcm90b3R5cGUudG9GaWx0ZXIgPSBmdW5jdGlvbiAoZmlsdGVycykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgaWYgKGZpbHRlcnMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIHByb3RvcyA9IGZpbHRlcnMubWFwKGZ1bmN0aW9uIChmaWx0ZXIpIHtcclxuICAgICAgICAgICAgaWYgKGZpbHRlciBpbnN0YW5jZW9mIEZpZWxkRmlsdGVyKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMudG9VbmFyeU9yRmllbGRGaWx0ZXIoZmlsdGVyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWlsKCdVbnJlY29nbml6ZWQgZmlsdGVyOiAnICsgSlNPTi5zdHJpbmdpZnkoZmlsdGVyKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICBpZiAocHJvdG9zLmxlbmd0aCA9PT0gMSkge1xyXG4gICAgICAgICAgICByZXR1cm4gcHJvdG9zWzBdO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4geyBjb21wb3NpdGVGaWx0ZXI6IHsgb3A6ICdBTkQnLCBmaWx0ZXJzOiBwcm90b3MgfSB9O1xyXG4gICAgfTtcclxuICAgIEpzb25Qcm90b1NlcmlhbGl6ZXIucHJvdG90eXBlLmZyb21GaWx0ZXIgPSBmdW5jdGlvbiAoZmlsdGVyKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBpZiAoIWZpbHRlcikge1xyXG4gICAgICAgICAgICByZXR1cm4gW107XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGZpbHRlci51bmFyeUZpbHRlciAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBbdGhpcy5mcm9tVW5hcnlGaWx0ZXIoZmlsdGVyKV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGZpbHRlci5maWVsZEZpbHRlciAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBbdGhpcy5mcm9tRmllbGRGaWx0ZXIoZmlsdGVyKV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGZpbHRlci5jb21wb3NpdGVGaWx0ZXIgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmlsdGVyLmNvbXBvc2l0ZUZpbHRlclxyXG4gICAgICAgICAgICAgICAgLmZpbHRlcnMubWFwKGZ1bmN0aW9uIChmKSB7IHJldHVybiBfdGhpcy5mcm9tRmlsdGVyKGYpOyB9KVxyXG4gICAgICAgICAgICAgICAgLnJlZHVjZShmdW5jdGlvbiAoYWNjdW0sIGN1cnJlbnQpIHsgcmV0dXJuIGFjY3VtLmNvbmNhdChjdXJyZW50KTsgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFpbCgnVW5rbm93biBmaWx0ZXI6ICcgKyBKU09OLnN0cmluZ2lmeShmaWx0ZXIpKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgSnNvblByb3RvU2VyaWFsaXplci5wcm90b3R5cGUudG9PcmRlciA9IGZ1bmN0aW9uIChvcmRlckJ5cykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgaWYgKG9yZGVyQnlzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBvcmRlckJ5cy5tYXAoZnVuY3Rpb24gKG9yZGVyKSB7IHJldHVybiBfdGhpcy50b1Byb3BlcnR5T3JkZXIob3JkZXIpOyB9KTtcclxuICAgIH07XHJcbiAgICBKc29uUHJvdG9TZXJpYWxpemVyLnByb3RvdHlwZS5mcm9tT3JkZXIgPSBmdW5jdGlvbiAob3JkZXJCeXMpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiBvcmRlckJ5cy5tYXAoZnVuY3Rpb24gKG9yZGVyKSB7IHJldHVybiBfdGhpcy5mcm9tUHJvcGVydHlPcmRlcihvcmRlcik7IH0pO1xyXG4gICAgfTtcclxuICAgIEpzb25Qcm90b1NlcmlhbGl6ZXIucHJvdG90eXBlLnRvQ3Vyc29yID0gZnVuY3Rpb24gKGN1cnNvcikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgYmVmb3JlOiBjdXJzb3IuYmVmb3JlLFxyXG4gICAgICAgICAgICB2YWx1ZXM6IGN1cnNvci5wb3NpdGlvbi5tYXAoZnVuY3Rpb24gKGNvbXBvbmVudCkgeyByZXR1cm4gX3RoaXMudG9WYWx1ZShjb21wb25lbnQpOyB9KVxyXG4gICAgICAgIH07XHJcbiAgICB9O1xyXG4gICAgSnNvblByb3RvU2VyaWFsaXplci5wcm90b3R5cGUuZnJvbUN1cnNvciA9IGZ1bmN0aW9uIChjdXJzb3IpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhciBiZWZvcmUgPSAhIWN1cnNvci5iZWZvcmU7XHJcbiAgICAgICAgdmFyIHBvc2l0aW9uID0gY3Vyc29yLnZhbHVlcy5tYXAoZnVuY3Rpb24gKGNvbXBvbmVudCkgeyByZXR1cm4gX3RoaXMuZnJvbVZhbHVlKGNvbXBvbmVudCk7IH0pO1xyXG4gICAgICAgIHJldHVybiBuZXcgQm91bmQocG9zaXRpb24sIGJlZm9yZSk7XHJcbiAgICB9O1xyXG4gICAgLy8gdmlzaWJsZSBmb3IgdGVzdGluZ1xyXG4gICAgSnNvblByb3RvU2VyaWFsaXplci5wcm90b3R5cGUudG9EaXJlY3Rpb24gPSBmdW5jdGlvbiAoZGlyKSB7XHJcbiAgICAgICAgcmV0dXJuIERJUkVDVElPTlNbZGlyLm5hbWVdO1xyXG4gICAgfTtcclxuICAgIC8vIHZpc2libGUgZm9yIHRlc3RpbmdcclxuICAgIEpzb25Qcm90b1NlcmlhbGl6ZXIucHJvdG90eXBlLmZyb21EaXJlY3Rpb24gPSBmdW5jdGlvbiAoZGlyKSB7XHJcbiAgICAgICAgc3dpdGNoIChkaXIpIHtcclxuICAgICAgICAgICAgY2FzZSAnQVNDRU5ESU5HJzpcclxuICAgICAgICAgICAgICAgIHJldHVybiBEaXJlY3Rpb24uQVNDRU5ESU5HO1xyXG4gICAgICAgICAgICBjYXNlICdERVNDRU5ESU5HJzpcclxuICAgICAgICAgICAgICAgIHJldHVybiBEaXJlY3Rpb24uREVTQ0VORElORztcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8vIHZpc2libGUgZm9yIHRlc3RpbmdcclxuICAgIEpzb25Qcm90b1NlcmlhbGl6ZXIucHJvdG90eXBlLnRvT3BlcmF0b3JOYW1lID0gZnVuY3Rpb24gKG9wKSB7XHJcbiAgICAgICAgcmV0dXJuIE9QRVJBVE9SU1tvcC5uYW1lXTtcclxuICAgIH07XHJcbiAgICBKc29uUHJvdG9TZXJpYWxpemVyLnByb3RvdHlwZS5mcm9tT3BlcmF0b3JOYW1lID0gZnVuY3Rpb24gKG9wKSB7XHJcbiAgICAgICAgc3dpdGNoIChvcCkge1xyXG4gICAgICAgICAgICBjYXNlICdFUVVBTCc6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gT3BlcmF0b3IuRVFVQUw7XHJcbiAgICAgICAgICAgIGNhc2UgJ0dSRUFURVJfVEhBTic6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gT3BlcmF0b3IuR1JFQVRFUl9USEFOO1xyXG4gICAgICAgICAgICBjYXNlICdHUkVBVEVSX1RIQU5fT1JfRVFVQUwnOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIE9wZXJhdG9yLkdSRUFURVJfVEhBTl9PUl9FUVVBTDtcclxuICAgICAgICAgICAgY2FzZSAnTEVTU19USEFOJzpcclxuICAgICAgICAgICAgICAgIHJldHVybiBPcGVyYXRvci5MRVNTX1RIQU47XHJcbiAgICAgICAgICAgIGNhc2UgJ0xFU1NfVEhBTl9PUl9FUVVBTCc6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gT3BlcmF0b3IuTEVTU19USEFOX09SX0VRVUFMO1xyXG4gICAgICAgICAgICBjYXNlICdBUlJBWV9DT05UQUlOUyc6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gT3BlcmF0b3IuQVJSQVlfQ09OVEFJTlM7XHJcbiAgICAgICAgICAgIGNhc2UgJ0lOJzpcclxuICAgICAgICAgICAgICAgIHJldHVybiBPcGVyYXRvci5JTjtcclxuICAgICAgICAgICAgY2FzZSAnQVJSQVlfQ09OVEFJTlNfQU5ZJzpcclxuICAgICAgICAgICAgICAgIHJldHVybiBPcGVyYXRvci5BUlJBWV9DT05UQUlOU19BTlk7XHJcbiAgICAgICAgICAgIGNhc2UgJ09QRVJBVE9SX1VOU1BFQ0lGSUVEJzpcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWlsKCdVbnNwZWNpZmllZCBvcGVyYXRvcicpO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhaWwoJ1Vua25vd24gb3BlcmF0b3InKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgSnNvblByb3RvU2VyaWFsaXplci5wcm90b3R5cGUudG9GaWVsZFBhdGhSZWZlcmVuY2UgPSBmdW5jdGlvbiAocGF0aCkge1xyXG4gICAgICAgIHJldHVybiB7IGZpZWxkUGF0aDogcGF0aC5jYW5vbmljYWxTdHJpbmcoKSB9O1xyXG4gICAgfTtcclxuICAgIEpzb25Qcm90b1NlcmlhbGl6ZXIucHJvdG90eXBlLmZyb21GaWVsZFBhdGhSZWZlcmVuY2UgPSBmdW5jdGlvbiAoZmllbGRSZWZlcmVuY2UpIHtcclxuICAgICAgICByZXR1cm4gRmllbGRQYXRoLmZyb21TZXJ2ZXJGb3JtYXQoZmllbGRSZWZlcmVuY2UuZmllbGRQYXRoKTtcclxuICAgIH07XHJcbiAgICAvLyB2aXNpYmxlIGZvciB0ZXN0aW5nXHJcbiAgICBKc29uUHJvdG9TZXJpYWxpemVyLnByb3RvdHlwZS50b1Byb3BlcnR5T3JkZXIgPSBmdW5jdGlvbiAob3JkZXJCeSkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGZpZWxkOiB0aGlzLnRvRmllbGRQYXRoUmVmZXJlbmNlKG9yZGVyQnkuZmllbGQpLFxyXG4gICAgICAgICAgICBkaXJlY3Rpb246IHRoaXMudG9EaXJlY3Rpb24ob3JkZXJCeS5kaXIpXHJcbiAgICAgICAgfTtcclxuICAgIH07XHJcbiAgICBKc29uUHJvdG9TZXJpYWxpemVyLnByb3RvdHlwZS5mcm9tUHJvcGVydHlPcmRlciA9IGZ1bmN0aW9uIChvcmRlckJ5KSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBPcmRlckJ5KHRoaXMuZnJvbUZpZWxkUGF0aFJlZmVyZW5jZShvcmRlckJ5LmZpZWxkKSwgdGhpcy5mcm9tRGlyZWN0aW9uKG9yZGVyQnkuZGlyZWN0aW9uKSk7XHJcbiAgICB9O1xyXG4gICAgSnNvblByb3RvU2VyaWFsaXplci5wcm90b3R5cGUuZnJvbUZpZWxkRmlsdGVyID0gZnVuY3Rpb24gKGZpbHRlcikge1xyXG4gICAgICAgIHJldHVybiBGaWVsZEZpbHRlci5jcmVhdGUodGhpcy5mcm9tRmllbGRQYXRoUmVmZXJlbmNlKGZpbHRlci5maWVsZEZpbHRlci5maWVsZCksIHRoaXMuZnJvbU9wZXJhdG9yTmFtZShmaWx0ZXIuZmllbGRGaWx0ZXIub3ApLCB0aGlzLmZyb21WYWx1ZShmaWx0ZXIuZmllbGRGaWx0ZXIudmFsdWUpKTtcclxuICAgIH07XHJcbiAgICAvLyB2aXNpYmxlIGZvciB0ZXN0aW5nXHJcbiAgICBKc29uUHJvdG9TZXJpYWxpemVyLnByb3RvdHlwZS50b1VuYXJ5T3JGaWVsZEZpbHRlciA9IGZ1bmN0aW9uIChmaWx0ZXIpIHtcclxuICAgICAgICBpZiAoZmlsdGVyLm9wID09PSBPcGVyYXRvci5FUVVBTCkge1xyXG4gICAgICAgICAgICBpZiAoZmlsdGVyLnZhbHVlLmlzRXF1YWwoRG91YmxlVmFsdWUuTkFOKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICAgICB1bmFyeUZpbHRlcjoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWVsZDogdGhpcy50b0ZpZWxkUGF0aFJlZmVyZW5jZShmaWx0ZXIuZmllbGQpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvcDogJ0lTX05BTidcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGZpbHRlci52YWx1ZS5pc0VxdWFsKE51bGxWYWx1ZS5JTlNUQU5DRSkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdW5hcnlGaWx0ZXI6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmllbGQ6IHRoaXMudG9GaWVsZFBhdGhSZWZlcmVuY2UoZmlsdGVyLmZpZWxkKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3A6ICdJU19OVUxMJ1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgZmllbGRGaWx0ZXI6IHtcclxuICAgICAgICAgICAgICAgIGZpZWxkOiB0aGlzLnRvRmllbGRQYXRoUmVmZXJlbmNlKGZpbHRlci5maWVsZCksXHJcbiAgICAgICAgICAgICAgICBvcDogdGhpcy50b09wZXJhdG9yTmFtZShmaWx0ZXIub3ApLFxyXG4gICAgICAgICAgICAgICAgdmFsdWU6IHRoaXMudG9WYWx1ZShmaWx0ZXIudmFsdWUpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfTtcclxuICAgIEpzb25Qcm90b1NlcmlhbGl6ZXIucHJvdG90eXBlLmZyb21VbmFyeUZpbHRlciA9IGZ1bmN0aW9uIChmaWx0ZXIpIHtcclxuICAgICAgICBzd2l0Y2ggKGZpbHRlci51bmFyeUZpbHRlci5vcCkge1xyXG4gICAgICAgICAgICBjYXNlICdJU19OQU4nOlxyXG4gICAgICAgICAgICAgICAgdmFyIG5hbkZpZWxkID0gdGhpcy5mcm9tRmllbGRQYXRoUmVmZXJlbmNlKGZpbHRlci51bmFyeUZpbHRlci5maWVsZCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gRmllbGRGaWx0ZXIuY3JlYXRlKG5hbkZpZWxkLCBPcGVyYXRvci5FUVVBTCwgRG91YmxlVmFsdWUuTkFOKTtcclxuICAgICAgICAgICAgY2FzZSAnSVNfTlVMTCc6XHJcbiAgICAgICAgICAgICAgICB2YXIgbnVsbEZpZWxkID0gdGhpcy5mcm9tRmllbGRQYXRoUmVmZXJlbmNlKGZpbHRlci51bmFyeUZpbHRlci5maWVsZCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gRmllbGRGaWx0ZXIuY3JlYXRlKG51bGxGaWVsZCwgT3BlcmF0b3IuRVFVQUwsIE51bGxWYWx1ZS5JTlNUQU5DRSk7XHJcbiAgICAgICAgICAgIGNhc2UgJ09QRVJBVE9SX1VOU1BFQ0lGSUVEJzpcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWlsKCdVbnNwZWNpZmllZCBmaWx0ZXInKTtcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWlsKCdVbmtub3duIGZpbHRlcicpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBKc29uUHJvdG9TZXJpYWxpemVyLnByb3RvdHlwZS50b0RvY3VtZW50TWFzayA9IGZ1bmN0aW9uIChmaWVsZE1hc2spIHtcclxuICAgICAgICB2YXIgY2Fub25pY2FsRmllbGRzID0gW107XHJcbiAgICAgICAgZmllbGRNYXNrLmZpZWxkcy5mb3JFYWNoKGZ1bmN0aW9uIChmaWVsZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gY2Fub25pY2FsRmllbGRzLnB1c2goZmllbGQuY2Fub25pY2FsU3RyaW5nKCkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGZpZWxkUGF0aHM6IGNhbm9uaWNhbEZpZWxkc1xyXG4gICAgICAgIH07XHJcbiAgICB9O1xyXG4gICAgSnNvblByb3RvU2VyaWFsaXplci5wcm90b3R5cGUuZnJvbURvY3VtZW50TWFzayA9IGZ1bmN0aW9uIChwcm90bykge1xyXG4gICAgICAgIHZhciBwYXRocyA9IHByb3RvLmZpZWxkUGF0aHMgfHwgW107XHJcbiAgICAgICAgdmFyIGZpZWxkcyA9IHBhdGhzLm1hcChmdW5jdGlvbiAocGF0aCkgeyByZXR1cm4gRmllbGRQYXRoLmZyb21TZXJ2ZXJGb3JtYXQocGF0aCk7IH0pO1xyXG4gICAgICAgIHJldHVybiBGaWVsZE1hc2suZnJvbUFycmF5KGZpZWxkcyk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEpzb25Qcm90b1NlcmlhbGl6ZXI7XHJcbn0oKSk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogSG9sZHMgdGhlIGxpc3RlbmVycyBhbmQgdGhlIGxhc3QgcmVjZWl2ZWQgVmlld1NuYXBzaG90IGZvciBhIHF1ZXJ5IGJlaW5nXHJcbiAqIHRyYWNrZWQgYnkgRXZlbnRNYW5hZ2VyLlxyXG4gKi9cclxudmFyIFF1ZXJ5TGlzdGVuZXJzSW5mbyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFF1ZXJ5TGlzdGVuZXJzSW5mbygpIHtcclxuICAgICAgICB0aGlzLnZpZXdTbmFwID0gbnVsbDtcclxuICAgICAgICB0aGlzLnRhcmdldElkID0gMDtcclxuICAgICAgICB0aGlzLmxpc3RlbmVycyA9IFtdO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIFF1ZXJ5TGlzdGVuZXJzSW5mbztcclxufSgpKTtcclxuLyoqXHJcbiAqIEV2ZW50TWFuYWdlciBpcyByZXNwb25zaWJsZSBmb3IgbWFwcGluZyBxdWVyaWVzIHRvIHF1ZXJ5IGV2ZW50IGVtaXR0ZXJzLlxyXG4gKiBJdCBoYW5kbGVzIFwiZmFuLW91dFwiLiAtLSBJZGVudGljYWwgcXVlcmllcyB3aWxsIHJlLXVzZSB0aGUgc2FtZSB3YXRjaCBvbiB0aGVcclxuICogYmFja2VuZC5cclxuICovXHJcbnZhciBFdmVudE1hbmFnZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBFdmVudE1hbmFnZXIoc3luY0VuZ2luZSkge1xyXG4gICAgICAgIHRoaXMuc3luY0VuZ2luZSA9IHN5bmNFbmdpbmU7XHJcbiAgICAgICAgdGhpcy5xdWVyaWVzID0gbmV3IE9iamVjdE1hcChmdW5jdGlvbiAocSkge1xyXG4gICAgICAgICAgICByZXR1cm4gcS5jYW5vbmljYWxJZCgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMub25saW5lU3RhdGUgPSBPbmxpbmVTdGF0ZS5Vbmtub3duO1xyXG4gICAgICAgIHRoaXMuc25hcHNob3RzSW5TeW5jTGlzdGVuZXJzID0gbmV3IFNldCgpO1xyXG4gICAgICAgIHRoaXMuc3luY0VuZ2luZS5zdWJzY3JpYmUodGhpcyk7XHJcbiAgICB9XHJcbiAgICBFdmVudE1hbmFnZXIucHJvdG90eXBlLmxpc3RlbiA9IGZ1bmN0aW9uIChsaXN0ZW5lcikge1xyXG4gICAgICAgIHZhciBxdWVyeSA9IGxpc3RlbmVyLnF1ZXJ5O1xyXG4gICAgICAgIHZhciBmaXJzdExpc3RlbiA9IGZhbHNlO1xyXG4gICAgICAgIHZhciBxdWVyeUluZm8gPSB0aGlzLnF1ZXJpZXMuZ2V0KHF1ZXJ5KTtcclxuICAgICAgICBpZiAoIXF1ZXJ5SW5mbykge1xyXG4gICAgICAgICAgICBmaXJzdExpc3RlbiA9IHRydWU7XHJcbiAgICAgICAgICAgIHF1ZXJ5SW5mbyA9IG5ldyBRdWVyeUxpc3RlbmVyc0luZm8oKTtcclxuICAgICAgICAgICAgdGhpcy5xdWVyaWVzLnNldChxdWVyeSwgcXVlcnlJbmZvKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcXVlcnlJbmZvLmxpc3RlbmVycy5wdXNoKGxpc3RlbmVyKTtcclxuICAgICAgICAvLyBSdW4gZ2xvYmFsIHNuYXBzaG90IGxpc3RlbmVycyBpZiBhIGNvbnNpc3RlbnQgc25hcHNob3QgaGFzIGJlZW4gZW1pdHRlZC5cclxuICAgICAgICB2YXIgcmFpc2VkRXZlbnQgPSBsaXN0ZW5lci5hcHBseU9ubGluZVN0YXRlQ2hhbmdlKHRoaXMub25saW5lU3RhdGUpO1xyXG4gICAgICAgIGFzc2VydCghcmFpc2VkRXZlbnQsIFwiYXBwbHlPbmxpbmVTdGF0ZUNoYW5nZSgpIHNob3VsZG4ndCByYWlzZSBhbiBldmVudCBmb3IgYnJhbmQtbmV3IGxpc3RlbmVycy5cIik7XHJcbiAgICAgICAgaWYgKHF1ZXJ5SW5mby52aWV3U25hcCkge1xyXG4gICAgICAgICAgICB2YXIgcmFpc2VkRXZlbnRfMSA9IGxpc3RlbmVyLm9uVmlld1NuYXBzaG90KHF1ZXJ5SW5mby52aWV3U25hcCk7XHJcbiAgICAgICAgICAgIGlmIChyYWlzZWRFdmVudF8xKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJhaXNlU25hcHNob3RzSW5TeW5jRXZlbnQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZmlyc3RMaXN0ZW4pIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3luY0VuZ2luZS5saXN0ZW4ocXVlcnkpLnRoZW4oZnVuY3Rpb24gKHRhcmdldElkKSB7XHJcbiAgICAgICAgICAgICAgICBxdWVyeUluZm8udGFyZ2V0SWQgPSB0YXJnZXRJZDtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0YXJnZXRJZDtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHF1ZXJ5SW5mby50YXJnZXRJZCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIEV2ZW50TWFuYWdlci5wcm90b3R5cGUudW5saXN0ZW4gPSBmdW5jdGlvbiAobGlzdGVuZXIpIHtcclxuICAgICAgICByZXR1cm4gdHNsaWIuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBxdWVyeSwgbGFzdExpc3RlbiwgcXVlcnlJbmZvLCBpO1xyXG4gICAgICAgICAgICByZXR1cm4gdHNsaWIuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBxdWVyeSA9IGxpc3RlbmVyLnF1ZXJ5O1xyXG4gICAgICAgICAgICAgICAgbGFzdExpc3RlbiA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgcXVlcnlJbmZvID0gdGhpcy5xdWVyaWVzLmdldChxdWVyeSk7XHJcbiAgICAgICAgICAgICAgICBpZiAocXVlcnlJbmZvKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaSA9IHF1ZXJ5SW5mby5saXN0ZW5lcnMuaW5kZXhPZihsaXN0ZW5lcik7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGkgPj0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBxdWVyeUluZm8ubGlzdGVuZXJzLnNwbGljZShpLCAxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGFzdExpc3RlbiA9IHF1ZXJ5SW5mby5saXN0ZW5lcnMubGVuZ3RoID09PSAwO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChsYXN0TGlzdGVuKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5xdWVyaWVzLmRlbGV0ZShxdWVyeSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMuc3luY0VuZ2luZS51bmxpc3RlbihxdWVyeSldO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBFdmVudE1hbmFnZXIucHJvdG90eXBlLm9uV2F0Y2hDaGFuZ2UgPSBmdW5jdGlvbiAodmlld1NuYXBzKSB7XHJcbiAgICAgICAgdmFyIHJhaXNlZEV2ZW50ID0gZmFsc2U7XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCB2aWV3U25hcHNfMSA9IHZpZXdTbmFwczsgX2kgPCB2aWV3U25hcHNfMS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgdmFyIHZpZXdTbmFwID0gdmlld1NuYXBzXzFbX2ldO1xyXG4gICAgICAgICAgICB2YXIgcXVlcnkgPSB2aWV3U25hcC5xdWVyeTtcclxuICAgICAgICAgICAgdmFyIHF1ZXJ5SW5mbyA9IHRoaXMucXVlcmllcy5nZXQocXVlcnkpO1xyXG4gICAgICAgICAgICBpZiAocXVlcnlJbmZvKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBfYSA9IDAsIF9iID0gcXVlcnlJbmZvLmxpc3RlbmVyczsgX2EgPCBfYi5sZW5ndGg7IF9hKyspIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbGlzdGVuZXIgPSBfYltfYV07XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGxpc3RlbmVyLm9uVmlld1NuYXBzaG90KHZpZXdTbmFwKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByYWlzZWRFdmVudCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcXVlcnlJbmZvLnZpZXdTbmFwID0gdmlld1NuYXA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHJhaXNlZEV2ZW50KSB7XHJcbiAgICAgICAgICAgIHRoaXMucmFpc2VTbmFwc2hvdHNJblN5bmNFdmVudCgpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBFdmVudE1hbmFnZXIucHJvdG90eXBlLm9uV2F0Y2hFcnJvciA9IGZ1bmN0aW9uIChxdWVyeSwgZXJyb3IpIHtcclxuICAgICAgICB2YXIgcXVlcnlJbmZvID0gdGhpcy5xdWVyaWVzLmdldChxdWVyeSk7XHJcbiAgICAgICAgaWYgKHF1ZXJ5SW5mbykge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gcXVlcnlJbmZvLmxpc3RlbmVyczsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgICAgIHZhciBsaXN0ZW5lciA9IF9hW19pXTtcclxuICAgICAgICAgICAgICAgIGxpc3RlbmVyLm9uRXJyb3IoZXJyb3IpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFJlbW92ZSBhbGwgbGlzdGVuZXJzLiBOT1RFOiBXZSBkb24ndCBuZWVkIHRvIGNhbGwgc3luY0VuZ2luZS51bmxpc3RlbigpXHJcbiAgICAgICAgLy8gYWZ0ZXIgYW4gZXJyb3IuXHJcbiAgICAgICAgdGhpcy5xdWVyaWVzLmRlbGV0ZShxdWVyeSk7XHJcbiAgICB9O1xyXG4gICAgRXZlbnRNYW5hZ2VyLnByb3RvdHlwZS5vbk9ubGluZVN0YXRlQ2hhbmdlID0gZnVuY3Rpb24gKG9ubGluZVN0YXRlKSB7XHJcbiAgICAgICAgdGhpcy5vbmxpbmVTdGF0ZSA9IG9ubGluZVN0YXRlO1xyXG4gICAgICAgIHZhciByYWlzZWRFdmVudCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMucXVlcmllcy5mb3JFYWNoKGZ1bmN0aW9uIChfLCBxdWVyeUluZm8pIHtcclxuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHF1ZXJ5SW5mby5saXN0ZW5lcnM7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbGlzdGVuZXIgPSBfYVtfaV07XHJcbiAgICAgICAgICAgICAgICAvLyBSdW4gZ2xvYmFsIHNuYXBzaG90IGxpc3RlbmVycyBpZiBhIGNvbnNpc3RlbnQgc25hcHNob3QgaGFzIGJlZW4gZW1pdHRlZC5cclxuICAgICAgICAgICAgICAgIGlmIChsaXN0ZW5lci5hcHBseU9ubGluZVN0YXRlQ2hhbmdlKG9ubGluZVN0YXRlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJhaXNlZEV2ZW50ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGlmIChyYWlzZWRFdmVudCkge1xyXG4gICAgICAgICAgICB0aGlzLnJhaXNlU25hcHNob3RzSW5TeW5jRXZlbnQoKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgRXZlbnRNYW5hZ2VyLnByb3RvdHlwZS5hZGRTbmFwc2hvdHNJblN5bmNMaXN0ZW5lciA9IGZ1bmN0aW9uIChvYnNlcnZlcikge1xyXG4gICAgICAgIHRoaXMuc25hcHNob3RzSW5TeW5jTGlzdGVuZXJzLmFkZChvYnNlcnZlcik7XHJcbiAgICAgICAgLy8gSW1tZWRpYXRlbHkgZmlyZSBhbiBpbml0aWFsIGV2ZW50LCBpbmRpY2F0aW5nIGFsbCBleGlzdGluZyBsaXN0ZW5lcnNcclxuICAgICAgICAvLyBhcmUgaW4tc3luYy5cclxuICAgICAgICBvYnNlcnZlci5uZXh0KCk7XHJcbiAgICB9O1xyXG4gICAgRXZlbnRNYW5hZ2VyLnByb3RvdHlwZS5yZW1vdmVTbmFwc2hvdHNJblN5bmNMaXN0ZW5lciA9IGZ1bmN0aW9uIChvYnNlcnZlcikge1xyXG4gICAgICAgIHRoaXMuc25hcHNob3RzSW5TeW5jTGlzdGVuZXJzLmRlbGV0ZShvYnNlcnZlcik7XHJcbiAgICB9O1xyXG4gICAgLy8gQ2FsbCBhbGwgZ2xvYmFsIHNuYXBzaG90IGxpc3RlbmVycyB0aGF0IGhhdmUgYmVlbiBzZXQuXHJcbiAgICBFdmVudE1hbmFnZXIucHJvdG90eXBlLnJhaXNlU25hcHNob3RzSW5TeW5jRXZlbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5zbmFwc2hvdHNJblN5bmNMaXN0ZW5lcnMuZm9yRWFjaChmdW5jdGlvbiAob2JzZXJ2ZXIpIHtcclxuICAgICAgICAgICAgb2JzZXJ2ZXIubmV4dCgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBFdmVudE1hbmFnZXI7XHJcbn0oKSk7XHJcbi8qKlxyXG4gKiBRdWVyeUxpc3RlbmVyIHRha2VzIGEgc2VyaWVzIG9mIGludGVybmFsIHZpZXcgc25hcHNob3RzIGFuZCBkZXRlcm1pbmVzXHJcbiAqIHdoZW4gdG8gcmFpc2UgdGhlIGV2ZW50LlxyXG4gKlxyXG4gKiBJdCB1c2VzIGFuIE9ic2VydmVyIHRvIGRpc3BhdGNoIGV2ZW50cy5cclxuICovXHJcbnZhciBRdWVyeUxpc3RlbmVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gUXVlcnlMaXN0ZW5lcihxdWVyeSwgcXVlcnlPYnNlcnZlciwgb3B0aW9ucykge1xyXG4gICAgICAgIHRoaXMucXVlcnkgPSBxdWVyeTtcclxuICAgICAgICB0aGlzLnF1ZXJ5T2JzZXJ2ZXIgPSBxdWVyeU9ic2VydmVyO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEluaXRpYWwgc25hcHNob3RzIChlLmcuIGZyb20gY2FjaGUpIG1heSBub3QgYmUgcHJvcGFnYXRlZCB0byB0aGUgd3JhcHBlZFxyXG4gICAgICAgICAqIG9ic2VydmVyLiBUaGlzIGZsYWcgaXMgc2V0IHRvIHRydWUgb25jZSB3ZSd2ZSBhY3R1YWxseSByYWlzZWQgYW4gZXZlbnQuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5yYWlzZWRJbml0aWFsRXZlbnQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLnNuYXAgPSBudWxsO1xyXG4gICAgICAgIHRoaXMub25saW5lU3RhdGUgPSBPbmxpbmVTdGF0ZS5Vbmtub3duO1xyXG4gICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnMgfHwge307XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEFwcGxpZXMgdGhlIG5ldyBWaWV3U25hcHNob3QgdG8gdGhpcyBsaXN0ZW5lciwgcmFpc2luZyBhIHVzZXItZmFjaW5nIGV2ZW50XHJcbiAgICAgKiBpZiBhcHBsaWNhYmxlIChkZXBlbmRpbmcgb24gd2hhdCBjaGFuZ2VkLCB3aGV0aGVyIHRoZSB1c2VyIGhhcyBvcHRlZCBpbnRvXHJcbiAgICAgKiBtZXRhZGF0YS1vbmx5IGNoYW5nZXMsIGV0Yy4pLiBSZXR1cm5zIHRydWUgaWYgYSB1c2VyLWZhY2luZyBldmVudCB3YXNcclxuICAgICAqIGluZGVlZCByYWlzZWQuXHJcbiAgICAgKi9cclxuICAgIFF1ZXJ5TGlzdGVuZXIucHJvdG90eXBlLm9uVmlld1NuYXBzaG90ID0gZnVuY3Rpb24gKHNuYXApIHtcclxuICAgICAgICBhc3NlcnQoc25hcC5kb2NDaGFuZ2VzLmxlbmd0aCA+IDAgfHwgc25hcC5zeW5jU3RhdGVDaGFuZ2VkLCAnV2UgZ290IGEgbmV3IHNuYXBzaG90IHdpdGggbm8gY2hhbmdlcz8nKTtcclxuICAgICAgICBpZiAoIXRoaXMub3B0aW9ucy5pbmNsdWRlTWV0YWRhdGFDaGFuZ2VzKSB7XHJcbiAgICAgICAgICAgIC8vIFJlbW92ZSB0aGUgbWV0YWRhdGEgb25seSBjaGFuZ2VzLlxyXG4gICAgICAgICAgICB2YXIgZG9jQ2hhbmdlcyA9IFtdO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gc25hcC5kb2NDaGFuZ2VzOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGRvY0NoYW5nZSA9IF9hW19pXTtcclxuICAgICAgICAgICAgICAgIGlmIChkb2NDaGFuZ2UudHlwZSAhPT0gQ2hhbmdlVHlwZS5NZXRhZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRvY0NoYW5nZXMucHVzaChkb2NDaGFuZ2UpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHNuYXAgPSBuZXcgVmlld1NuYXBzaG90KHNuYXAucXVlcnksIHNuYXAuZG9jcywgc25hcC5vbGREb2NzLCBkb2NDaGFuZ2VzLCBzbmFwLm11dGF0ZWRLZXlzLCBzbmFwLmZyb21DYWNoZSwgc25hcC5zeW5jU3RhdGVDaGFuZ2VkLCBcclxuICAgICAgICAgICAgLyogZXhjbHVkZXNNZXRhZGF0YUNoYW5nZXM9ICovIHRydWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgcmFpc2VkRXZlbnQgPSBmYWxzZTtcclxuICAgICAgICBpZiAoIXRoaXMucmFpc2VkSW5pdGlhbEV2ZW50KSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNob3VsZFJhaXNlSW5pdGlhbEV2ZW50KHNuYXAsIHRoaXMub25saW5lU3RhdGUpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJhaXNlSW5pdGlhbEV2ZW50KHNuYXApO1xyXG4gICAgICAgICAgICAgICAgcmFpc2VkRXZlbnQgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHRoaXMuc2hvdWxkUmFpc2VFdmVudChzbmFwKSkge1xyXG4gICAgICAgICAgICB0aGlzLnF1ZXJ5T2JzZXJ2ZXIubmV4dChzbmFwKTtcclxuICAgICAgICAgICAgcmFpc2VkRXZlbnQgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnNuYXAgPSBzbmFwO1xyXG4gICAgICAgIHJldHVybiByYWlzZWRFdmVudDtcclxuICAgIH07XHJcbiAgICBRdWVyeUxpc3RlbmVyLnByb3RvdHlwZS5vbkVycm9yID0gZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICAgICAgdGhpcy5xdWVyeU9ic2VydmVyLmVycm9yKGVycm9yKTtcclxuICAgIH07XHJcbiAgICAvKiogUmV0dXJucyB3aGV0aGVyIGEgc25hcHNob3Qgd2FzIHJhaXNlZC4gKi9cclxuICAgIFF1ZXJ5TGlzdGVuZXIucHJvdG90eXBlLmFwcGx5T25saW5lU3RhdGVDaGFuZ2UgPSBmdW5jdGlvbiAob25saW5lU3RhdGUpIHtcclxuICAgICAgICB0aGlzLm9ubGluZVN0YXRlID0gb25saW5lU3RhdGU7XHJcbiAgICAgICAgdmFyIHJhaXNlZEV2ZW50ID0gZmFsc2U7XHJcbiAgICAgICAgaWYgKHRoaXMuc25hcCAmJlxyXG4gICAgICAgICAgICAhdGhpcy5yYWlzZWRJbml0aWFsRXZlbnQgJiZcclxuICAgICAgICAgICAgdGhpcy5zaG91bGRSYWlzZUluaXRpYWxFdmVudCh0aGlzLnNuYXAsIG9ubGluZVN0YXRlKSkge1xyXG4gICAgICAgICAgICB0aGlzLnJhaXNlSW5pdGlhbEV2ZW50KHRoaXMuc25hcCk7XHJcbiAgICAgICAgICAgIHJhaXNlZEV2ZW50ID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJhaXNlZEV2ZW50O1xyXG4gICAgfTtcclxuICAgIFF1ZXJ5TGlzdGVuZXIucHJvdG90eXBlLnNob3VsZFJhaXNlSW5pdGlhbEV2ZW50ID0gZnVuY3Rpb24gKHNuYXAsIG9ubGluZVN0YXRlKSB7XHJcbiAgICAgICAgYXNzZXJ0KCF0aGlzLnJhaXNlZEluaXRpYWxFdmVudCwgJ0RldGVybWluaW5nIHdoZXRoZXIgdG8gcmFpc2UgZmlyc3QgZXZlbnQgYnV0IGFscmVhZHkgaGFkIGZpcnN0IGV2ZW50Jyk7XHJcbiAgICAgICAgLy8gQWx3YXlzIHJhaXNlIHRoZSBmaXJzdCBldmVudCB3aGVuIHdlJ3JlIHN5bmNlZFxyXG4gICAgICAgIGlmICghc25hcC5mcm9tQ2FjaGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIE5PVEU6IFdlIGNvbnNpZGVyIE9ubGluZVN0YXRlLlVua25vd24gYXMgb25saW5lIChpdCBzaG91bGQgYmVjb21lIE9mZmxpbmVcclxuICAgICAgICAvLyBvciBPbmxpbmUgaWYgd2Ugd2FpdCBsb25nIGVub3VnaCkuXHJcbiAgICAgICAgdmFyIG1heWJlT25saW5lID0gb25saW5lU3RhdGUgIT09IE9ubGluZVN0YXRlLk9mZmxpbmU7XHJcbiAgICAgICAgLy8gRG9uJ3QgcmFpc2UgdGhlIGV2ZW50IGlmIHdlJ3JlIG9ubGluZSwgYXJlbid0IHN5bmNlZCB5ZXQgKGNoZWNrZWRcclxuICAgICAgICAvLyBhYm92ZSkgYW5kIGFyZSB3YWl0aW5nIGZvciBhIHN5bmMuXHJcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy53YWl0Rm9yU3luY1doZW5PbmxpbmUgJiYgbWF5YmVPbmxpbmUpIHtcclxuICAgICAgICAgICAgYXNzZXJ0KHNuYXAuZnJvbUNhY2hlLCAnV2FpdGluZyBmb3Igc3luYywgYnV0IHNuYXBzaG90IGlzIG5vdCBmcm9tIGNhY2hlJyk7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gUmFpc2UgZGF0YSBmcm9tIGNhY2hlIGlmIHdlIGhhdmUgYW55IGRvY3VtZW50cyBvciB3ZSBhcmUgb2ZmbGluZVxyXG4gICAgICAgIHJldHVybiAhc25hcC5kb2NzLmlzRW1wdHkoKSB8fCBvbmxpbmVTdGF0ZSA9PT0gT25saW5lU3RhdGUuT2ZmbGluZTtcclxuICAgIH07XHJcbiAgICBRdWVyeUxpc3RlbmVyLnByb3RvdHlwZS5zaG91bGRSYWlzZUV2ZW50ID0gZnVuY3Rpb24gKHNuYXApIHtcclxuICAgICAgICAvLyBXZSBkb24ndCBuZWVkIHRvIGhhbmRsZSBpbmNsdWRlRG9jdW1lbnRNZXRhZGF0YUNoYW5nZXMgaGVyZSBiZWNhdXNlXHJcbiAgICAgICAgLy8gdGhlIE1ldGFkYXRhIG9ubHkgY2hhbmdlcyBoYXZlIGFscmVhZHkgYmVlbiBzdHJpcHBlZCBvdXQgaWYgbmVlZGVkLlxyXG4gICAgICAgIC8vIEF0IHRoaXMgcG9pbnQgdGhlIG9ubHkgY2hhbmdlcyB3ZSB3aWxsIHNlZSBhcmUgdGhlIG9uZXMgd2Ugc2hvdWxkXHJcbiAgICAgICAgLy8gcHJvcGFnYXRlLlxyXG4gICAgICAgIGlmIChzbmFwLmRvY0NoYW5nZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGhhc1BlbmRpbmdXcml0ZXNDaGFuZ2VkID0gdGhpcy5zbmFwICYmIHRoaXMuc25hcC5oYXNQZW5kaW5nV3JpdGVzICE9PSBzbmFwLmhhc1BlbmRpbmdXcml0ZXM7XHJcbiAgICAgICAgaWYgKHNuYXAuc3luY1N0YXRlQ2hhbmdlZCB8fCBoYXNQZW5kaW5nV3JpdGVzQ2hhbmdlZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zLmluY2x1ZGVNZXRhZGF0YUNoYW5nZXMgPT09IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIEdlbmVyYWxseSB3ZSBzaG91bGQgaGF2ZSBoaXQgb25lIG9mIHRoZSBjYXNlcyBhYm92ZSwgYnV0IGl0J3MgcG9zc2libGVcclxuICAgICAgICAvLyB0byBnZXQgaGVyZSBpZiB0aGVyZSB3ZXJlIG9ubHkgbWV0YWRhdGEgZG9jQ2hhbmdlcyBhbmQgdGhleSBnb3RcclxuICAgICAgICAvLyBzdHJpcHBlZCBvdXQuXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfTtcclxuICAgIFF1ZXJ5TGlzdGVuZXIucHJvdG90eXBlLnJhaXNlSW5pdGlhbEV2ZW50ID0gZnVuY3Rpb24gKHNuYXApIHtcclxuICAgICAgICBhc3NlcnQoIXRoaXMucmFpc2VkSW5pdGlhbEV2ZW50LCAnVHJ5aW5nIHRvIHJhaXNlIGluaXRpYWwgZXZlbnRzIGZvciBzZWNvbmQgdGltZScpO1xyXG4gICAgICAgIHNuYXAgPSBWaWV3U25hcHNob3QuZnJvbUluaXRpYWxEb2N1bWVudHMoc25hcC5xdWVyeSwgc25hcC5kb2NzLCBzbmFwLm11dGF0ZWRLZXlzLCBzbmFwLmZyb21DYWNoZSk7XHJcbiAgICAgICAgdGhpcy5yYWlzZWRJbml0aWFsRXZlbnQgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMucXVlcnlPYnNlcnZlci5uZXh0KHNuYXApO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBRdWVyeUxpc3RlbmVyO1xyXG59KCkpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEEgc2V0IG9mIGNoYW5nZXMgdG8gd2hhdCBkb2N1bWVudHMgYXJlIGN1cnJlbnRseSBpbiB2aWV3IGFuZCBvdXQgb2YgdmlldyBmb3JcclxuICogYSBnaXZlbiBxdWVyeS4gVGhlc2UgY2hhbmdlcyBhcmUgc2VudCB0byB0aGUgTG9jYWxTdG9yZSBieSB0aGUgVmlldyAodmlhXHJcbiAqIHRoZSBTeW5jRW5naW5lKSBhbmQgYXJlIHVzZWQgdG8gcGluIC8gdW5waW4gZG9jdW1lbnRzIGFzIGFwcHJvcHJpYXRlLlxyXG4gKi9cclxudmFyIExvY2FsVmlld0NoYW5nZXMgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBMb2NhbFZpZXdDaGFuZ2VzKHRhcmdldElkLCBmcm9tQ2FjaGUsIGFkZGVkS2V5cywgcmVtb3ZlZEtleXMpIHtcclxuICAgICAgICB0aGlzLnRhcmdldElkID0gdGFyZ2V0SWQ7XHJcbiAgICAgICAgdGhpcy5mcm9tQ2FjaGUgPSBmcm9tQ2FjaGU7XHJcbiAgICAgICAgdGhpcy5hZGRlZEtleXMgPSBhZGRlZEtleXM7XHJcbiAgICAgICAgdGhpcy5yZW1vdmVkS2V5cyA9IHJlbW92ZWRLZXlzO1xyXG4gICAgfVxyXG4gICAgTG9jYWxWaWV3Q2hhbmdlcy5mcm9tU25hcHNob3QgPSBmdW5jdGlvbiAodGFyZ2V0SWQsIHZpZXdTbmFwc2hvdCkge1xyXG4gICAgICAgIHZhciBhZGRlZEtleXMgPSBkb2N1bWVudEtleVNldCgpO1xyXG4gICAgICAgIHZhciByZW1vdmVkS2V5cyA9IGRvY3VtZW50S2V5U2V0KCk7XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHZpZXdTbmFwc2hvdC5kb2NDaGFuZ2VzOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICB2YXIgZG9jQ2hhbmdlID0gX2FbX2ldO1xyXG4gICAgICAgICAgICBzd2l0Y2ggKGRvY0NoYW5nZS50eXBlKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIENoYW5nZVR5cGUuQWRkZWQ6XHJcbiAgICAgICAgICAgICAgICAgICAgYWRkZWRLZXlzID0gYWRkZWRLZXlzLmFkZChkb2NDaGFuZ2UuZG9jLmtleSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIENoYW5nZVR5cGUuUmVtb3ZlZDpcclxuICAgICAgICAgICAgICAgICAgICByZW1vdmVkS2V5cyA9IHJlbW92ZWRLZXlzLmFkZChkb2NDaGFuZ2UuZG9jLmtleSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAvLyBkbyBub3RoaW5nXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG5ldyBMb2NhbFZpZXdDaGFuZ2VzKHRhcmdldElkLCB2aWV3U25hcHNob3QuZnJvbUNhY2hlLCBhZGRlZEtleXMsIHJlbW92ZWRLZXlzKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gTG9jYWxWaWV3Q2hhbmdlcztcclxufSgpKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnZhciBBZGRlZExpbWJvRG9jdW1lbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBBZGRlZExpbWJvRG9jdW1lbnQoa2V5KSB7XHJcbiAgICAgICAgdGhpcy5rZXkgPSBrZXk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gQWRkZWRMaW1ib0RvY3VtZW50O1xyXG59KCkpO1xyXG52YXIgUmVtb3ZlZExpbWJvRG9jdW1lbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBSZW1vdmVkTGltYm9Eb2N1bWVudChrZXkpIHtcclxuICAgICAgICB0aGlzLmtleSA9IGtleTtcclxuICAgIH1cclxuICAgIHJldHVybiBSZW1vdmVkTGltYm9Eb2N1bWVudDtcclxufSgpKTtcclxuLyoqXHJcbiAqIFZpZXcgaXMgcmVzcG9uc2libGUgZm9yIGNvbXB1dGluZyB0aGUgZmluYWwgbWVyZ2VkIHRydXRoIG9mIHdoYXQgZG9jcyBhcmUgaW5cclxuICogYSBxdWVyeS4gSXQgZ2V0cyBub3RpZmllZCBvZiBsb2NhbCBhbmQgcmVtb3RlIGNoYW5nZXMgdG8gZG9jcywgYW5kIGFwcGxpZXNcclxuICogdGhlIHF1ZXJ5IGZpbHRlcnMgYW5kIGxpbWl0cyB0byBkZXRlcm1pbmUgdGhlIG1vc3QgY29ycmVjdCBwb3NzaWJsZSByZXN1bHRzLlxyXG4gKi9cclxudmFyIFZpZXcgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBWaWV3KHF1ZXJ5LCBcclxuICAgIC8qKiBEb2N1bWVudHMgaW5jbHVkZWQgaW4gdGhlIHJlbW90ZSB0YXJnZXQgKi9cclxuICAgIF9zeW5jZWREb2N1bWVudHMpIHtcclxuICAgICAgICB0aGlzLnF1ZXJ5ID0gcXVlcnk7XHJcbiAgICAgICAgdGhpcy5fc3luY2VkRG9jdW1lbnRzID0gX3N5bmNlZERvY3VtZW50cztcclxuICAgICAgICB0aGlzLnN5bmNTdGF0ZSA9IG51bGw7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQSBmbGFnIHdoZXRoZXIgdGhlIHZpZXcgaXMgY3VycmVudCB3aXRoIHRoZSBiYWNrZW5kLiBBIHZpZXcgaXMgY29uc2lkZXJlZFxyXG4gICAgICAgICAqIGN1cnJlbnQgYWZ0ZXIgaXQgaGFzIHNlZW4gdGhlIGN1cnJlbnQgZmxhZyBmcm9tIHRoZSBiYWNrZW5kIGFuZCBkaWQgbm90XHJcbiAgICAgICAgICogbG9zZSBjb25zaXN0ZW5jeSB3aXRoaW4gdGhlIHdhdGNoIHN0cmVhbSAoZS5nLiBiZWNhdXNlIG9mIGFuIGV4aXN0ZW5jZVxyXG4gICAgICAgICAqIGZpbHRlciBtaXNtYXRjaCkuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5jdXJyZW50ID0gZmFsc2U7XHJcbiAgICAgICAgLyoqIERvY3VtZW50cyBpbiB0aGUgdmlldyBidXQgbm90IGluIHRoZSByZW1vdGUgdGFyZ2V0ICovXHJcbiAgICAgICAgdGhpcy5saW1ib0RvY3VtZW50cyA9IGRvY3VtZW50S2V5U2V0KCk7XHJcbiAgICAgICAgLyoqIERvY3VtZW50IEtleXMgdGhhdCBoYXZlIGxvY2FsIGNoYW5nZXMgKi9cclxuICAgICAgICB0aGlzLm11dGF0ZWRLZXlzID0gZG9jdW1lbnRLZXlTZXQoKTtcclxuICAgICAgICB0aGlzLmRvY3VtZW50U2V0ID0gbmV3IERvY3VtZW50U2V0KHF1ZXJ5LmRvY0NvbXBhcmF0b3IuYmluZChxdWVyeSkpO1xyXG4gICAgfVxyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFZpZXcucHJvdG90eXBlLCBcInN5bmNlZERvY3VtZW50c1wiLCB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVGhlIHNldCBvZiByZW1vdGUgZG9jdW1lbnRzIHRoYXQgdGhlIHNlcnZlciBoYXMgdG9sZCB1cyBiZWxvbmdzIHRvIHRoZSB0YXJnZXQgYXNzb2NpYXRlZCB3aXRoXHJcbiAgICAgICAgICogdGhpcyB2aWV3LlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fc3luY2VkRG9jdW1lbnRzO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgLyoqXHJcbiAgICAgKiBJdGVyYXRlcyBvdmVyIGEgc2V0IG9mIGRvYyBjaGFuZ2VzLCBhcHBsaWVzIHRoZSBxdWVyeSBsaW1pdCwgYW5kIGNvbXB1dGVzXHJcbiAgICAgKiB3aGF0IHRoZSBuZXcgcmVzdWx0cyBzaG91bGQgYmUsIHdoYXQgdGhlIGNoYW5nZXMgd2VyZSwgYW5kIHdoZXRoZXIgd2UgbWF5XHJcbiAgICAgKiBuZWVkIHRvIGdvIGJhY2sgdG8gdGhlIGxvY2FsIGNhY2hlIGZvciBtb3JlIHJlc3VsdHMuIERvZXMgbm90IG1ha2UgYW55XHJcbiAgICAgKiBjaGFuZ2VzIHRvIHRoZSB2aWV3LlxyXG4gICAgICogQHBhcmFtIGRvY0NoYW5nZXMgVGhlIGRvYyBjaGFuZ2VzIHRvIGFwcGx5IHRvIHRoaXMgdmlldy5cclxuICAgICAqIEBwYXJhbSBwcmV2aW91c0NoYW5nZXMgSWYgdGhpcyBpcyBiZWluZyBjYWxsZWQgd2l0aCBhIHJlZmlsbCwgdGhlbiBzdGFydFxyXG4gICAgICogICAgICAgIHdpdGggdGhpcyBzZXQgb2YgZG9jcyBhbmQgY2hhbmdlcyBpbnN0ZWFkIG9mIHRoZSBjdXJyZW50IHZpZXcuXHJcbiAgICAgKiBAcmV0dXJuIGEgbmV3IHNldCBvZiBkb2NzLCBjaGFuZ2VzLCBhbmQgcmVmaWxsIGZsYWcuXHJcbiAgICAgKi9cclxuICAgIFZpZXcucHJvdG90eXBlLmNvbXB1dGVEb2NDaGFuZ2VzID0gZnVuY3Rpb24gKGRvY0NoYW5nZXMsIHByZXZpb3VzQ2hhbmdlcykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIGNoYW5nZVNldCA9IHByZXZpb3VzQ2hhbmdlc1xyXG4gICAgICAgICAgICA/IHByZXZpb3VzQ2hhbmdlcy5jaGFuZ2VTZXRcclxuICAgICAgICAgICAgOiBuZXcgRG9jdW1lbnRDaGFuZ2VTZXQoKTtcclxuICAgICAgICB2YXIgb2xkRG9jdW1lbnRTZXQgPSBwcmV2aW91c0NoYW5nZXNcclxuICAgICAgICAgICAgPyBwcmV2aW91c0NoYW5nZXMuZG9jdW1lbnRTZXRcclxuICAgICAgICAgICAgOiB0aGlzLmRvY3VtZW50U2V0O1xyXG4gICAgICAgIHZhciBuZXdNdXRhdGVkS2V5cyA9IHByZXZpb3VzQ2hhbmdlc1xyXG4gICAgICAgICAgICA/IHByZXZpb3VzQ2hhbmdlcy5tdXRhdGVkS2V5c1xyXG4gICAgICAgICAgICA6IHRoaXMubXV0YXRlZEtleXM7XHJcbiAgICAgICAgdmFyIG5ld0RvY3VtZW50U2V0ID0gb2xkRG9jdW1lbnRTZXQ7XHJcbiAgICAgICAgdmFyIG5lZWRzUmVmaWxsID0gZmFsc2U7XHJcbiAgICAgICAgLy8gVHJhY2sgdGhlIGxhc3QgZG9jIGluIGEgKGZ1bGwpIGxpbWl0LiBUaGlzIGlzIG5lY2Vzc2FyeSwgYmVjYXVzZSBzb21lXHJcbiAgICAgICAgLy8gdXBkYXRlIChhIGRlbGV0ZSwgb3IgYW4gdXBkYXRlIG1vdmluZyBhIGRvYyBwYXN0IHRoZSBvbGQgbGltaXQpIG1pZ2h0XHJcbiAgICAgICAgLy8gbWVhbiB0aGVyZSBpcyBzb21lIG90aGVyIGRvY3VtZW50IGluIHRoZSBsb2NhbCBjYWNoZSB0aGF0IGVpdGhlciBzaG91bGRcclxuICAgICAgICAvLyBjb21lICgxKSBiZXR3ZWVuIHRoZSBvbGQgbGFzdCBsaW1pdCBkb2MgYW5kIHRoZSBuZXcgbGFzdCBkb2N1bWVudCwgaW4gdGhlXHJcbiAgICAgICAgLy8gY2FzZSBvZiB1cGRhdGVzLCBvciAoMikgYWZ0ZXIgdGhlIG5ldyBsYXN0IGRvY3VtZW50LCBpbiB0aGUgY2FzZSBvZlxyXG4gICAgICAgIC8vIGRlbGV0ZXMuIFNvIHdlIGtlZXAgdGhpcyBkb2MgYXQgdGhlIG9sZCBsaW1pdCB0byBjb21wYXJlIHRoZSB1cGRhdGVzIHRvLlxyXG4gICAgICAgIC8vXHJcbiAgICAgICAgLy8gTm90ZSB0aGF0IHRoaXMgc2hvdWxkIG5ldmVyIGdldCB1c2VkIGluIGEgcmVmaWxsICh3aGVuIHByZXZpb3VzQ2hhbmdlcyBpc1xyXG4gICAgICAgIC8vIHNldCksIGJlY2F1c2UgdGhlcmUgd2lsbCBvbmx5IGJlIGFkZHMgLS0gbm8gZGVsZXRlcyBvciB1cGRhdGVzLlxyXG4gICAgICAgIHZhciBsYXN0RG9jSW5MaW1pdCA9IHRoaXMucXVlcnkuaGFzTGltaXRUb0ZpcnN0KCkgJiYgb2xkRG9jdW1lbnRTZXQuc2l6ZSA9PT0gdGhpcy5xdWVyeS5saW1pdFxyXG4gICAgICAgICAgICA/IG9sZERvY3VtZW50U2V0Lmxhc3QoKVxyXG4gICAgICAgICAgICA6IG51bGw7XHJcbiAgICAgICAgdmFyIGZpcnN0RG9jSW5MaW1pdCA9IHRoaXMucXVlcnkuaGFzTGltaXRUb0xhc3QoKSAmJiBvbGREb2N1bWVudFNldC5zaXplID09PSB0aGlzLnF1ZXJ5LmxpbWl0XHJcbiAgICAgICAgICAgID8gb2xkRG9jdW1lbnRTZXQuZmlyc3QoKVxyXG4gICAgICAgICAgICA6IG51bGw7XHJcbiAgICAgICAgZG9jQ2hhbmdlcy5pbm9yZGVyVHJhdmVyc2FsKGZ1bmN0aW9uIChrZXksIG5ld01heWJlRG9jKSB7XHJcbiAgICAgICAgICAgIHZhciBvbGREb2MgPSBvbGREb2N1bWVudFNldC5nZXQoa2V5KTtcclxuICAgICAgICAgICAgdmFyIG5ld0RvYyA9IG5ld01heWJlRG9jIGluc3RhbmNlb2YgRG9jdW1lbnQgPyBuZXdNYXliZURvYyA6IG51bGw7XHJcbiAgICAgICAgICAgIGlmIChuZXdEb2MpIHtcclxuICAgICAgICAgICAgICAgIGFzc2VydChrZXkuaXNFcXVhbChuZXdEb2Mua2V5KSwgJ01pc21hdGNoaW5nIGtleXMgZm91bmQgaW4gZG9jdW1lbnQgY2hhbmdlczogJyArXHJcbiAgICAgICAgICAgICAgICAgICAga2V5ICtcclxuICAgICAgICAgICAgICAgICAgICAnICE9ICcgK1xyXG4gICAgICAgICAgICAgICAgICAgIG5ld0RvYy5rZXkpO1xyXG4gICAgICAgICAgICAgICAgbmV3RG9jID0gX3RoaXMucXVlcnkubWF0Y2hlcyhuZXdEb2MpID8gbmV3RG9jIDogbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgb2xkRG9jSGFkUGVuZGluZ011dGF0aW9ucyA9IG9sZERvY1xyXG4gICAgICAgICAgICAgICAgPyBfdGhpcy5tdXRhdGVkS2V5cy5oYXMob2xkRG9jLmtleSlcclxuICAgICAgICAgICAgICAgIDogZmFsc2U7XHJcbiAgICAgICAgICAgIHZhciBuZXdEb2NIYXNQZW5kaW5nTXV0YXRpb25zID0gbmV3RG9jXHJcbiAgICAgICAgICAgICAgICA/IG5ld0RvYy5oYXNMb2NhbE11dGF0aW9ucyB8fFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFdlIG9ubHkgY29uc2lkZXIgY29tbWl0dGVkIG11dGF0aW9ucyBmb3IgZG9jdW1lbnRzIHRoYXQgd2VyZVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIG11dGF0ZWQgZHVyaW5nIHRoZSBsaWZldGltZSBvZiB0aGUgdmlldy5cclxuICAgICAgICAgICAgICAgICAgICAoX3RoaXMubXV0YXRlZEtleXMuaGFzKG5ld0RvYy5rZXkpICYmIG5ld0RvYy5oYXNDb21taXR0ZWRNdXRhdGlvbnMpXHJcbiAgICAgICAgICAgICAgICA6IGZhbHNlO1xyXG4gICAgICAgICAgICB2YXIgY2hhbmdlQXBwbGllZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAvLyBDYWxjdWxhdGUgY2hhbmdlXHJcbiAgICAgICAgICAgIGlmIChvbGREb2MgJiYgbmV3RG9jKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZG9jc0VxdWFsID0gb2xkRG9jLmRhdGEoKS5pc0VxdWFsKG5ld0RvYy5kYXRhKCkpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFkb2NzRXF1YWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIV90aGlzLnNob3VsZFdhaXRGb3JTeW5jZWREb2N1bWVudChvbGREb2MsIG5ld0RvYykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlU2V0LnRyYWNrKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IENoYW5nZVR5cGUuTW9kaWZpZWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2M6IG5ld0RvY1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlQXBwbGllZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgobGFzdERvY0luTGltaXQgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnF1ZXJ5LmRvY0NvbXBhcmF0b3IobmV3RG9jLCBsYXN0RG9jSW5MaW1pdCkgPiAwKSB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKGZpcnN0RG9jSW5MaW1pdCAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnF1ZXJ5LmRvY0NvbXBhcmF0b3IobmV3RG9jLCBmaXJzdERvY0luTGltaXQpIDwgMCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgZG9jIG1vdmVkIGZyb20gaW5zaWRlIHRoZSBsaW1pdCB0byBvdXRzaWRlIHRoZSBsaW1pdC5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoYXQgbWVhbnMgdGhlcmUgbWF5IGJlIHNvbWUgb3RoZXIgZG9jIGluIHRoZSBsb2NhbCBjYWNoZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhhdCBzaG91bGQgYmUgaW5jbHVkZWQgaW5zdGVhZC5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5lZWRzUmVmaWxsID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKG9sZERvY0hhZFBlbmRpbmdNdXRhdGlvbnMgIT09IG5ld0RvY0hhc1BlbmRpbmdNdXRhdGlvbnMpIHtcclxuICAgICAgICAgICAgICAgICAgICBjaGFuZ2VTZXQudHJhY2soeyB0eXBlOiBDaGFuZ2VUeXBlLk1ldGFkYXRhLCBkb2M6IG5ld0RvYyB9KTtcclxuICAgICAgICAgICAgICAgICAgICBjaGFuZ2VBcHBsaWVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmICghb2xkRG9jICYmIG5ld0RvYykge1xyXG4gICAgICAgICAgICAgICAgY2hhbmdlU2V0LnRyYWNrKHsgdHlwZTogQ2hhbmdlVHlwZS5BZGRlZCwgZG9jOiBuZXdEb2MgfSk7XHJcbiAgICAgICAgICAgICAgICBjaGFuZ2VBcHBsaWVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChvbGREb2MgJiYgIW5ld0RvYykge1xyXG4gICAgICAgICAgICAgICAgY2hhbmdlU2V0LnRyYWNrKHsgdHlwZTogQ2hhbmdlVHlwZS5SZW1vdmVkLCBkb2M6IG9sZERvYyB9KTtcclxuICAgICAgICAgICAgICAgIGNoYW5nZUFwcGxpZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgaWYgKGxhc3REb2NJbkxpbWl0IHx8IGZpcnN0RG9jSW5MaW1pdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIEEgZG9jIHdhcyByZW1vdmVkIGZyb20gYSBmdWxsIGxpbWl0IHF1ZXJ5LiBXZSdsbCBuZWVkIHRvXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gcmVxdWVyeSBmcm9tIHRoZSBsb2NhbCBjYWNoZSB0byBzZWUgaWYgd2Uga25vdyBhYm91dCBzb21lIG90aGVyXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gZG9jIHRoYXQgc2hvdWxkIGJlIGluIHRoZSByZXN1bHRzLlxyXG4gICAgICAgICAgICAgICAgICAgIG5lZWRzUmVmaWxsID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoY2hhbmdlQXBwbGllZCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKG5ld0RvYykge1xyXG4gICAgICAgICAgICAgICAgICAgIG5ld0RvY3VtZW50U2V0ID0gbmV3RG9jdW1lbnRTZXQuYWRkKG5ld0RvYyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5ld0RvY0hhc1BlbmRpbmdNdXRhdGlvbnMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3TXV0YXRlZEtleXMgPSBuZXdNdXRhdGVkS2V5cy5hZGQoa2V5KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld011dGF0ZWRLZXlzID0gbmV3TXV0YXRlZEtleXMuZGVsZXRlKGtleSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3RG9jdW1lbnRTZXQgPSBuZXdEb2N1bWVudFNldC5kZWxldGUoa2V5KTtcclxuICAgICAgICAgICAgICAgICAgICBuZXdNdXRhdGVkS2V5cyA9IG5ld011dGF0ZWRLZXlzLmRlbGV0ZShrZXkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gRHJvcCBkb2N1bWVudHMgb3V0IHRvIG1lZXQgbGltaXQvbGltaXRUb0xhc3QgcmVxdWlyZW1lbnQuXHJcbiAgICAgICAgaWYgKHRoaXMucXVlcnkuaGFzTGltaXRUb0ZpcnN0KCkgfHwgdGhpcy5xdWVyeS5oYXNMaW1pdFRvTGFzdCgpKSB7XHJcbiAgICAgICAgICAgIHdoaWxlIChuZXdEb2N1bWVudFNldC5zaXplID4gdGhpcy5xdWVyeS5saW1pdCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG9sZERvYyA9IHRoaXMucXVlcnkuaGFzTGltaXRUb0ZpcnN0KClcclxuICAgICAgICAgICAgICAgICAgICA/IG5ld0RvY3VtZW50U2V0Lmxhc3QoKVxyXG4gICAgICAgICAgICAgICAgICAgIDogbmV3RG9jdW1lbnRTZXQuZmlyc3QoKTtcclxuICAgICAgICAgICAgICAgIG5ld0RvY3VtZW50U2V0ID0gbmV3RG9jdW1lbnRTZXQuZGVsZXRlKG9sZERvYy5rZXkpO1xyXG4gICAgICAgICAgICAgICAgbmV3TXV0YXRlZEtleXMgPSBuZXdNdXRhdGVkS2V5cy5kZWxldGUob2xkRG9jLmtleSk7XHJcbiAgICAgICAgICAgICAgICBjaGFuZ2VTZXQudHJhY2soeyB0eXBlOiBDaGFuZ2VUeXBlLlJlbW92ZWQsIGRvYzogb2xkRG9jIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGFzc2VydCghbmVlZHNSZWZpbGwgfHwgIXByZXZpb3VzQ2hhbmdlcywgJ1ZpZXcgd2FzIHJlZmlsbGVkIHVzaW5nIGRvY3MgdGhhdCB0aGVtc2VsdmVzIG5lZWRlZCByZWZpbGxpbmcuJyk7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgZG9jdW1lbnRTZXQ6IG5ld0RvY3VtZW50U2V0LFxyXG4gICAgICAgICAgICBjaGFuZ2VTZXQ6IGNoYW5nZVNldCxcclxuICAgICAgICAgICAgbmVlZHNSZWZpbGw6IG5lZWRzUmVmaWxsLFxyXG4gICAgICAgICAgICBtdXRhdGVkS2V5czogbmV3TXV0YXRlZEtleXNcclxuICAgICAgICB9O1xyXG4gICAgfTtcclxuICAgIFZpZXcucHJvdG90eXBlLnNob3VsZFdhaXRGb3JTeW5jZWREb2N1bWVudCA9IGZ1bmN0aW9uIChvbGREb2MsIG5ld0RvYykge1xyXG4gICAgICAgIC8vIFdlIHN1cHByZXNzIHRoZSBpbml0aWFsIGNoYW5nZSBldmVudCBmb3IgZG9jdW1lbnRzIHRoYXQgd2VyZSBtb2RpZmllZCBhc1xyXG4gICAgICAgIC8vIHBhcnQgb2YgYSB3cml0ZSBhY2tub3dsZWRnbWVudCAoZS5nLiB3aGVuIHRoZSB2YWx1ZSBvZiBhIHNlcnZlciB0cmFuc2Zvcm1cclxuICAgICAgICAvLyBpcyBhcHBsaWVkKSBhcyBXYXRjaCB3aWxsIHNlbmQgdXMgdGhlIHNhbWUgZG9jdW1lbnQgYWdhaW4uXHJcbiAgICAgICAgLy8gQnkgc3VwcHJlc3NpbmcgdGhlIGV2ZW50LCB3ZSBvbmx5IHJhaXNlIHR3byB1c2VyIHZpc2libGUgZXZlbnRzIChvbmUgd2l0aFxyXG4gICAgICAgIC8vIGBoYXNQZW5kaW5nV3JpdGVzYCBhbmQgdGhlIGZpbmFsIHN0YXRlIG9mIHRoZSBkb2N1bWVudCkgaW5zdGVhZCBvZiB0aHJlZVxyXG4gICAgICAgIC8vIChvbmUgd2l0aCBgaGFzUGVuZGluZ1dyaXRlc2AsIHRoZSBtb2RpZmllZCBkb2N1bWVudCB3aXRoXHJcbiAgICAgICAgLy8gYGhhc1BlbmRpbmdXcml0ZXNgIGFuZCB0aGUgZmluYWwgc3RhdGUgb2YgdGhlIGRvY3VtZW50KS5cclxuICAgICAgICByZXR1cm4gKG9sZERvYy5oYXNMb2NhbE11dGF0aW9ucyAmJlxyXG4gICAgICAgICAgICBuZXdEb2MuaGFzQ29tbWl0dGVkTXV0YXRpb25zICYmXHJcbiAgICAgICAgICAgICFuZXdEb2MuaGFzTG9jYWxNdXRhdGlvbnMpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogVXBkYXRlcyB0aGUgdmlldyB3aXRoIHRoZSBnaXZlbiBWaWV3RG9jdW1lbnRDaGFuZ2VzIGFuZCBvcHRpb25hbGx5IHVwZGF0ZXNcclxuICAgICAqIGxpbWJvIGRvY3MgYW5kIHN5bmMgc3RhdGUgZnJvbSB0aGUgcHJvdmlkZWQgdGFyZ2V0IGNoYW5nZS5cclxuICAgICAqIEBwYXJhbSBkb2NDaGFuZ2VzIFRoZSBzZXQgb2YgY2hhbmdlcyB0byBtYWtlIHRvIHRoZSB2aWV3J3MgZG9jcy5cclxuICAgICAqIEBwYXJhbSB1cGRhdGVMaW1ib0RvY3VtZW50cyBXaGV0aGVyIHRvIHVwZGF0ZSBsaW1ibyBkb2N1bWVudHMgYmFzZWQgb24gdGhpc1xyXG4gICAgICogICAgICAgIGNoYW5nZS5cclxuICAgICAqIEBwYXJhbSB0YXJnZXRDaGFuZ2UgQSB0YXJnZXQgY2hhbmdlIHRvIGFwcGx5IGZvciBjb21wdXRpbmcgbGltYm8gZG9jcyBhbmRcclxuICAgICAqICAgICAgICBzeW5jIHN0YXRlLlxyXG4gICAgICogQHJldHVybiBBIG5ldyBWaWV3Q2hhbmdlIHdpdGggdGhlIGdpdmVuIGRvY3MsIGNoYW5nZXMsIGFuZCBzeW5jIHN0YXRlLlxyXG4gICAgICovXHJcbiAgICAvLyBQT1JUSU5HIE5PVEU6IFRoZSBpT1MvQW5kcm9pZCBjbGllbnRzIGFsd2F5cyBjb21wdXRlIGxpbWJvIGRvY3VtZW50IGNoYW5nZXMuXHJcbiAgICBWaWV3LnByb3RvdHlwZS5hcHBseUNoYW5nZXMgPSBmdW5jdGlvbiAoZG9jQ2hhbmdlcywgdXBkYXRlTGltYm9Eb2N1bWVudHMsIHRhcmdldENoYW5nZSkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgYXNzZXJ0KCFkb2NDaGFuZ2VzLm5lZWRzUmVmaWxsLCAnQ2Fubm90IGFwcGx5IGNoYW5nZXMgdGhhdCBuZWVkIGEgcmVmaWxsJyk7XHJcbiAgICAgICAgdmFyIG9sZERvY3MgPSB0aGlzLmRvY3VtZW50U2V0O1xyXG4gICAgICAgIHRoaXMuZG9jdW1lbnRTZXQgPSBkb2NDaGFuZ2VzLmRvY3VtZW50U2V0O1xyXG4gICAgICAgIHRoaXMubXV0YXRlZEtleXMgPSBkb2NDaGFuZ2VzLm11dGF0ZWRLZXlzO1xyXG4gICAgICAgIC8vIFNvcnQgY2hhbmdlcyBiYXNlZCBvbiB0eXBlIGFuZCBxdWVyeSBjb21wYXJhdG9yXHJcbiAgICAgICAgdmFyIGNoYW5nZXMgPSBkb2NDaGFuZ2VzLmNoYW5nZVNldC5nZXRDaGFuZ2VzKCk7XHJcbiAgICAgICAgY2hhbmdlcy5zb3J0KGZ1bmN0aW9uIChjMSwgYzIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIChjb21wYXJlQ2hhbmdlVHlwZShjMS50eXBlLCBjMi50eXBlKSB8fFxyXG4gICAgICAgICAgICAgICAgX3RoaXMucXVlcnkuZG9jQ29tcGFyYXRvcihjMS5kb2MsIGMyLmRvYykpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuYXBwbHlUYXJnZXRDaGFuZ2UodGFyZ2V0Q2hhbmdlKTtcclxuICAgICAgICB2YXIgbGltYm9DaGFuZ2VzID0gdXBkYXRlTGltYm9Eb2N1bWVudHNcclxuICAgICAgICAgICAgPyB0aGlzLnVwZGF0ZUxpbWJvRG9jdW1lbnRzKClcclxuICAgICAgICAgICAgOiBbXTtcclxuICAgICAgICB2YXIgc3luY2VkID0gdGhpcy5saW1ib0RvY3VtZW50cy5zaXplID09PSAwICYmIHRoaXMuY3VycmVudDtcclxuICAgICAgICB2YXIgbmV3U3luY1N0YXRlID0gc3luY2VkID8gU3luY1N0YXRlLlN5bmNlZCA6IFN5bmNTdGF0ZS5Mb2NhbDtcclxuICAgICAgICB2YXIgc3luY1N0YXRlQ2hhbmdlZCA9IG5ld1N5bmNTdGF0ZSAhPT0gdGhpcy5zeW5jU3RhdGU7XHJcbiAgICAgICAgdGhpcy5zeW5jU3RhdGUgPSBuZXdTeW5jU3RhdGU7XHJcbiAgICAgICAgaWYgKGNoYW5nZXMubGVuZ3RoID09PSAwICYmICFzeW5jU3RhdGVDaGFuZ2VkKSB7XHJcbiAgICAgICAgICAgIC8vIG5vIGNoYW5nZXNcclxuICAgICAgICAgICAgcmV0dXJuIHsgbGltYm9DaGFuZ2VzOiBsaW1ib0NoYW5nZXMgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHZhciBzbmFwID0gbmV3IFZpZXdTbmFwc2hvdCh0aGlzLnF1ZXJ5LCBkb2NDaGFuZ2VzLmRvY3VtZW50U2V0LCBvbGREb2NzLCBjaGFuZ2VzLCBkb2NDaGFuZ2VzLm11dGF0ZWRLZXlzLCBuZXdTeW5jU3RhdGUgPT09IFN5bmNTdGF0ZS5Mb2NhbCwgc3luY1N0YXRlQ2hhbmdlZCwgXHJcbiAgICAgICAgICAgIC8qIGV4Y2x1ZGVzTWV0YWRhdGFDaGFuZ2VzPSAqLyBmYWxzZSk7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBzbmFwc2hvdDogc25hcCxcclxuICAgICAgICAgICAgICAgIGxpbWJvQ2hhbmdlczogbGltYm9DaGFuZ2VzXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQXBwbGllcyBhbiBPbmxpbmVTdGF0ZSBjaGFuZ2UgdG8gdGhlIHZpZXcsIHBvdGVudGlhbGx5IGdlbmVyYXRpbmcgYVxyXG4gICAgICogVmlld0NoYW5nZSBpZiB0aGUgdmlldydzIHN5bmNTdGF0ZSBjaGFuZ2VzIGFzIGEgcmVzdWx0LlxyXG4gICAgICovXHJcbiAgICBWaWV3LnByb3RvdHlwZS5hcHBseU9ubGluZVN0YXRlQ2hhbmdlID0gZnVuY3Rpb24gKG9ubGluZVN0YXRlKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudCAmJiBvbmxpbmVTdGF0ZSA9PT0gT25saW5lU3RhdGUuT2ZmbGluZSkge1xyXG4gICAgICAgICAgICAvLyBJZiB3ZSdyZSBvZmZsaW5lLCBzZXQgYGN1cnJlbnRgIHRvIGZhbHNlIGFuZCB0aGVuIGNhbGwgYXBwbHlDaGFuZ2VzKClcclxuICAgICAgICAgICAgLy8gdG8gcmVmcmVzaCBvdXIgc3luY1N0YXRlIGFuZCBnZW5lcmF0ZSBhIFZpZXdDaGFuZ2UgYXMgYXBwcm9wcmlhdGUuIFdlXHJcbiAgICAgICAgICAgIC8vIGFyZSBndWFyYW50ZWVkIHRvIGdldCBhIG5ldyBUYXJnZXRDaGFuZ2UgdGhhdCBzZXRzIGBjdXJyZW50YCBiYWNrIHRvXHJcbiAgICAgICAgICAgIC8vIHRydWUgb25jZSB0aGUgY2xpZW50IGlzIGJhY2sgb25saW5lLlxyXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnQgPSBmYWxzZTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYXBwbHlDaGFuZ2VzKHtcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50U2V0OiB0aGlzLmRvY3VtZW50U2V0LFxyXG4gICAgICAgICAgICAgICAgY2hhbmdlU2V0OiBuZXcgRG9jdW1lbnRDaGFuZ2VTZXQoKSxcclxuICAgICAgICAgICAgICAgIG11dGF0ZWRLZXlzOiB0aGlzLm11dGF0ZWRLZXlzLFxyXG4gICAgICAgICAgICAgICAgbmVlZHNSZWZpbGw6IGZhbHNlXHJcbiAgICAgICAgICAgIH0sIFxyXG4gICAgICAgICAgICAvKiB1cGRhdGVMaW1ib0RvY3VtZW50cz0gKi8gZmFsc2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gTm8gZWZmZWN0LCBqdXN0IHJldHVybiBhIG5vLW9wIFZpZXdDaGFuZ2UuXHJcbiAgICAgICAgICAgIHJldHVybiB7IGxpbWJvQ2hhbmdlczogW10gfTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHdoZXRoZXIgdGhlIGRvYyBmb3IgdGhlIGdpdmVuIGtleSBzaG91bGQgYmUgaW4gbGltYm8uXHJcbiAgICAgKi9cclxuICAgIFZpZXcucHJvdG90eXBlLnNob3VsZEJlSW5MaW1ibyA9IGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICAvLyBJZiB0aGUgcmVtb3RlIGVuZCBzYXlzIGl0J3MgcGFydCBvZiB0aGlzIHF1ZXJ5LCBpdCdzIG5vdCBpbiBsaW1iby5cclxuICAgICAgICBpZiAodGhpcy5fc3luY2VkRG9jdW1lbnRzLmhhcyhrZXkpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gVGhlIGxvY2FsIHN0b3JlIGRvZXNuJ3QgdGhpbmsgaXQncyBhIHJlc3VsdCwgc28gaXQgc2hvdWxkbid0IGJlIGluIGxpbWJvLlxyXG4gICAgICAgIGlmICghdGhpcy5kb2N1bWVudFNldC5oYXMoa2V5KSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIElmIHRoZXJlIGFyZSBsb2NhbCBjaGFuZ2VzIHRvIHRoZSBkb2MsIHRoZXkgbWlnaHQgZXhwbGFpbiB3aHkgdGhlIHNlcnZlclxyXG4gICAgICAgIC8vIGRvZXNuJ3Qga25vdyB0aGF0IGl0J3MgcGFydCBvZiB0aGUgcXVlcnkuIFNvIGRvbid0IHB1dCBpdCBpbiBsaW1iby5cclxuICAgICAgICAvLyBUT0RPKGtsaW10KTogSWRlYWxseSwgd2Ugd291bGQgb25seSBjb25zaWRlciBjaGFuZ2VzIHRoYXQgbWlnaHQgYWN0dWFsbHlcclxuICAgICAgICAvLyBhZmZlY3QgdGhpcyBzcGVjaWZpYyBxdWVyeS5cclxuICAgICAgICBpZiAodGhpcy5kb2N1bWVudFNldC5nZXQoa2V5KS5oYXNMb2NhbE11dGF0aW9ucykge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIEV2ZXJ5dGhpbmcgZWxzZSBpcyBpbiBsaW1iby5cclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFVwZGF0ZXMgc3luY2VkRG9jdW1lbnRzLCBjdXJyZW50LCBhbmQgbGltYm8gZG9jcyBiYXNlZCBvbiB0aGUgZ2l2ZW4gY2hhbmdlLlxyXG4gICAgICogUmV0dXJucyB0aGUgbGlzdCBvZiBjaGFuZ2VzIHRvIHdoaWNoIGRvY3MgYXJlIGluIGxpbWJvLlxyXG4gICAgICovXHJcbiAgICBWaWV3LnByb3RvdHlwZS5hcHBseVRhcmdldENoYW5nZSA9IGZ1bmN0aW9uICh0YXJnZXRDaGFuZ2UpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIGlmICh0YXJnZXRDaGFuZ2UpIHtcclxuICAgICAgICAgICAgdGFyZ2V0Q2hhbmdlLmFkZGVkRG9jdW1lbnRzLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyByZXR1cm4gKF90aGlzLl9zeW5jZWREb2N1bWVudHMgPSBfdGhpcy5fc3luY2VkRG9jdW1lbnRzLmFkZChrZXkpKTsgfSk7XHJcbiAgICAgICAgICAgIHRhcmdldENoYW5nZS5tb2RpZmllZERvY3VtZW50cy5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBhc3NlcnQoX3RoaXMuX3N5bmNlZERvY3VtZW50cy5oYXMoa2V5KSwgXCJNb2RpZmllZCBkb2N1bWVudCBcIiArIGtleSArIFwiIG5vdCBmb3VuZCBpbiB2aWV3LlwiKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHRhcmdldENoYW5nZS5yZW1vdmVkRG9jdW1lbnRzLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyByZXR1cm4gKF90aGlzLl9zeW5jZWREb2N1bWVudHMgPSBfdGhpcy5fc3luY2VkRG9jdW1lbnRzLmRlbGV0ZShrZXkpKTsgfSk7XHJcbiAgICAgICAgICAgIHRoaXMuY3VycmVudCA9IHRhcmdldENoYW5nZS5jdXJyZW50O1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBWaWV3LnByb3RvdHlwZS51cGRhdGVMaW1ib0RvY3VtZW50cyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIC8vIFdlIGNhbiBvbmx5IGRldGVybWluZSBsaW1ibyBkb2N1bWVudHMgd2hlbiB3ZSdyZSBpbi1zeW5jIHdpdGggdGhlIHNlcnZlci5cclxuICAgICAgICBpZiAoIXRoaXMuY3VycmVudCkge1xyXG4gICAgICAgICAgICByZXR1cm4gW107XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFRPRE8oa2xpbXQpOiBEbyB0aGlzIGluY3JlbWVudGFsbHkgc28gdGhhdCBpdCdzIG5vdCBxdWFkcmF0aWMgd2hlblxyXG4gICAgICAgIC8vIHVwZGF0aW5nIG1hbnkgZG9jdW1lbnRzLlxyXG4gICAgICAgIHZhciBvbGRMaW1ib0RvY3VtZW50cyA9IHRoaXMubGltYm9Eb2N1bWVudHM7XHJcbiAgICAgICAgdGhpcy5saW1ib0RvY3VtZW50cyA9IGRvY3VtZW50S2V5U2V0KCk7XHJcbiAgICAgICAgdGhpcy5kb2N1bWVudFNldC5mb3JFYWNoKGZ1bmN0aW9uIChkb2MpIHtcclxuICAgICAgICAgICAgaWYgKF90aGlzLnNob3VsZEJlSW5MaW1ibyhkb2Mua2V5KSkge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMubGltYm9Eb2N1bWVudHMgPSBfdGhpcy5saW1ib0RvY3VtZW50cy5hZGQoZG9jLmtleSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyBEaWZmIHRoZSBuZXcgbGltYm8gZG9jcyB3aXRoIHRoZSBvbGQgbGltYm8gZG9jcy5cclxuICAgICAgICB2YXIgY2hhbmdlcyA9IFtdO1xyXG4gICAgICAgIG9sZExpbWJvRG9jdW1lbnRzLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgICAgICBpZiAoIV90aGlzLmxpbWJvRG9jdW1lbnRzLmhhcyhrZXkpKSB7XHJcbiAgICAgICAgICAgICAgICBjaGFuZ2VzLnB1c2gobmV3IFJlbW92ZWRMaW1ib0RvY3VtZW50KGtleSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5saW1ib0RvY3VtZW50cy5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICAgICAgaWYgKCFvbGRMaW1ib0RvY3VtZW50cy5oYXMoa2V5KSkge1xyXG4gICAgICAgICAgICAgICAgY2hhbmdlcy5wdXNoKG5ldyBBZGRlZExpbWJvRG9jdW1lbnQoa2V5KSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gY2hhbmdlcztcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFVwZGF0ZSB0aGUgaW4tbWVtb3J5IHN0YXRlIG9mIHRoZSBjdXJyZW50IHZpZXcgd2l0aCB0aGUgc3RhdGUgcmVhZCBmcm9tXHJcbiAgICAgKiBwZXJzaXN0ZW5jZS5cclxuICAgICAqXHJcbiAgICAgKiBXZSB1cGRhdGUgdGhlIHF1ZXJ5IHZpZXcgd2hlbmV2ZXIgYSBjbGllbnQncyBwcmltYXJ5IHN0YXR1cyBjaGFuZ2VzOlxyXG4gICAgICogLSBXaGVuIGEgY2xpZW50IHRyYW5zaXRpb25zIGZyb20gcHJpbWFyeSB0byBzZWNvbmRhcnksIGl0IGNhbiBtaXNzXHJcbiAgICAgKiAgIExvY2FsU3RvcmFnZSB1cGRhdGVzIGFuZCBpdHMgcXVlcnkgdmlld3MgbWF5IHRlbXBvcmFyaWx5IG5vdCBiZVxyXG4gICAgICogICBzeW5jaHJvbml6ZWQgd2l0aCB0aGUgc3RhdGUgb24gZGlzay5cclxuICAgICAqIC0gRm9yIHNlY29uZGFyeSB0byBwcmltYXJ5IHRyYW5zaXRpb25zLCB0aGUgY2xpZW50IG5lZWRzIHRvIHVwZGF0ZSB0aGUgbGlzdFxyXG4gICAgICogICBvZiBgc3luY2VkRG9jdW1lbnRzYCBzaW5jZSBzZWNvbmRhcnkgY2xpZW50cyB1cGRhdGUgdGhlaXIgcXVlcnkgdmlld3NcclxuICAgICAqICAgYmFzZWQgcHVyZWx5IG9uIHN5bnRoZXNpemVkIFJlbW90ZUV2ZW50cy5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gcXVlcnlSZXN1bHQuZG9jdW1lbnRzIC0gVGhlIGRvY3VtZW50cyB0aGF0IG1hdGNoIHRoZSBxdWVyeSBhY2NvcmRpbmdcclxuICAgICAqIHRvIHRoZSBMb2NhbFN0b3JlLlxyXG4gICAgICogQHBhcmFtIHF1ZXJ5UmVzdWx0LnJlbW90ZUtleXMgLSBUaGUga2V5cyBvZiB0aGUgZG9jdW1lbnRzIHRoYXQgbWF0Y2ggdGhlXHJcbiAgICAgKiBxdWVyeSBhY2NvcmRpbmcgdG8gdGhlIGJhY2tlbmQuXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybiBUaGUgVmlld0NoYW5nZSB0aGF0IHJlc3VsdGVkIGZyb20gdGhpcyBzeW5jaHJvbml6YXRpb24uXHJcbiAgICAgKi9cclxuICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktdGFiIG9ubHkuXHJcbiAgICBWaWV3LnByb3RvdHlwZS5zeW5jaHJvbml6ZVdpdGhQZXJzaXN0ZWRTdGF0ZSA9IGZ1bmN0aW9uIChxdWVyeVJlc3VsdCkge1xyXG4gICAgICAgIHRoaXMuX3N5bmNlZERvY3VtZW50cyA9IHF1ZXJ5UmVzdWx0LnJlbW90ZUtleXM7XHJcbiAgICAgICAgdGhpcy5saW1ib0RvY3VtZW50cyA9IGRvY3VtZW50S2V5U2V0KCk7XHJcbiAgICAgICAgdmFyIGRvY0NoYW5nZXMgPSB0aGlzLmNvbXB1dGVEb2NDaGFuZ2VzKHF1ZXJ5UmVzdWx0LmRvY3VtZW50cyk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYXBwbHlDaGFuZ2VzKGRvY0NoYW5nZXMsIC8qdXBkYXRlTGltYm9Eb2N1bWVudHM9Ki8gdHJ1ZSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIGEgdmlldyBzbmFwc2hvdCBhcyBpZiB0aGlzIHF1ZXJ5IHdhcyBqdXN0IGxpc3RlbmVkIHRvLiBDb250YWluc1xyXG4gICAgICogYSBkb2N1bWVudCBhZGQgZm9yIGV2ZXJ5IGV4aXN0aW5nIGRvY3VtZW50IGFuZCB0aGUgYGZyb21DYWNoZWAgYW5kXHJcbiAgICAgKiBgaGFzUGVuZGluZ1dyaXRlc2Agc3RhdHVzIG9mIHRoZSBhbHJlYWR5IGVzdGFibGlzaGVkIHZpZXcuXHJcbiAgICAgKi9cclxuICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktdGFiIG9ubHkuXHJcbiAgICBWaWV3LnByb3RvdHlwZS5jb21wdXRlSW5pdGlhbFNuYXBzaG90ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBWaWV3U25hcHNob3QuZnJvbUluaXRpYWxEb2N1bWVudHModGhpcy5xdWVyeSwgdGhpcy5kb2N1bWVudFNldCwgdGhpcy5tdXRhdGVkS2V5cywgdGhpcy5zeW5jU3RhdGUgPT09IFN5bmNTdGF0ZS5Mb2NhbCk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFZpZXc7XHJcbn0oKSk7XHJcbmZ1bmN0aW9uIGNvbXBhcmVDaGFuZ2VUeXBlKGMxLCBjMikge1xyXG4gICAgdmFyIG9yZGVyID0gZnVuY3Rpb24gKGNoYW5nZSkge1xyXG4gICAgICAgIHN3aXRjaCAoY2hhbmdlKSB7XHJcbiAgICAgICAgICAgIGNhc2UgQ2hhbmdlVHlwZS5BZGRlZDpcclxuICAgICAgICAgICAgICAgIHJldHVybiAxO1xyXG4gICAgICAgICAgICBjYXNlIENoYW5nZVR5cGUuTW9kaWZpZWQ6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gMjtcclxuICAgICAgICAgICAgY2FzZSBDaGFuZ2VUeXBlLk1ldGFkYXRhOlxyXG4gICAgICAgICAgICAgICAgLy8gQSBtZXRhZGF0YSBjaGFuZ2UgaXMgY29udmVydGVkIHRvIGEgbW9kaWZpZWQgY2hhbmdlIGF0IHRoZSBwdWJsaWNcclxuICAgICAgICAgICAgICAgIC8vIGFwaSBsYXllci4gIFNpbmNlIHdlIHNvcnQgYnkgZG9jdW1lbnQga2V5IGFuZCB0aGVuIGNoYW5nZSB0eXBlLFxyXG4gICAgICAgICAgICAgICAgLy8gbWV0YWRhdGEgYW5kIG1vZGlmaWVkIGNoYW5nZXMgbXVzdCBiZSBzb3J0ZWQgZXF1aXZhbGVudGx5LlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIDI7XHJcbiAgICAgICAgICAgIGNhc2UgQ2hhbmdlVHlwZS5SZW1vdmVkOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFpbCgnVW5rbm93biBDaGFuZ2VUeXBlOiAnICsgY2hhbmdlKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIG9yZGVyKGMxKSAtIG9yZGVyKGMyKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxudmFyIFJFVFJZX0NPVU5UID0gNTtcclxuLyoqXHJcbiAqIFRyYW5zYWN0aW9uUnVubmVyIGVuY2Fwc3VsYXRlcyB0aGUgbG9naWMgbmVlZGVkIHRvIHJ1biBhbmQgcmV0cnkgdHJhbnNhY3Rpb25zXHJcbiAqIHdpdGggYmFja29mZi5cclxuICovXHJcbnZhciBUcmFuc2FjdGlvblJ1bm5lciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFRyYW5zYWN0aW9uUnVubmVyKGFzeW5jUXVldWUsIHJlbW90ZVN0b3JlLCB1cGRhdGVGdW5jdGlvbiwgZGVmZXJyZWQpIHtcclxuICAgICAgICB0aGlzLmFzeW5jUXVldWUgPSBhc3luY1F1ZXVlO1xyXG4gICAgICAgIHRoaXMucmVtb3RlU3RvcmUgPSByZW1vdGVTdG9yZTtcclxuICAgICAgICB0aGlzLnVwZGF0ZUZ1bmN0aW9uID0gdXBkYXRlRnVuY3Rpb247XHJcbiAgICAgICAgdGhpcy5kZWZlcnJlZCA9IGRlZmVycmVkO1xyXG4gICAgICAgIHRoaXMucmV0cmllcyA9IFJFVFJZX0NPVU5UO1xyXG4gICAgICAgIHRoaXMuYmFja29mZiA9IG5ldyBFeHBvbmVudGlhbEJhY2tvZmYodGhpcy5hc3luY1F1ZXVlLCBUaW1lcklkLlJldHJ5VHJhbnNhY3Rpb24pO1xyXG4gICAgfVxyXG4gICAgLyoqIFJ1bnMgdGhlIHRyYW5zYWN0aW9uIGFuZCBzZXRzIHRoZSByZXN1bHQgb24gZGVmZXJyZWQuICovXHJcbiAgICBUcmFuc2FjdGlvblJ1bm5lci5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMucnVuV2l0aEJhY2tPZmYoKTtcclxuICAgIH07XHJcbiAgICBUcmFuc2FjdGlvblJ1bm5lci5wcm90b3R5cGUucnVuV2l0aEJhY2tPZmYgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB0aGlzLmJhY2tvZmYuYmFja29mZkFuZFJ1bihmdW5jdGlvbiAoKSB7IHJldHVybiB0c2xpYi5fX2F3YWl0ZXIoX3RoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciB0cmFuc2FjdGlvbiwgdXNlclByb21pc2U7XHJcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYi5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uID0gdGhpcy5yZW1vdGVTdG9yZS5jcmVhdGVUcmFuc2FjdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgdXNlclByb21pc2UgPSB0aGlzLnRyeVJ1blVwZGF0ZUZ1bmN0aW9uKHRyYW5zYWN0aW9uKTtcclxuICAgICAgICAgICAgICAgIGlmICh1c2VyUHJvbWlzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHVzZXJQcm9taXNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cmFuc2FjdGlvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jb21taXQoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5kZWZlcnJlZC5yZXNvbHZlKHJlc3VsdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbiAoY29tbWl0RXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5oYW5kbGVUcmFuc2FjdGlvbkVycm9yKGNvbW1pdEVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKHVzZXJQcm9taXNlRXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuaGFuZGxlVHJhbnNhY3Rpb25FcnJvcih1c2VyUHJvbWlzZUVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7IH0pO1xyXG4gICAgfTtcclxuICAgIFRyYW5zYWN0aW9uUnVubmVyLnByb3RvdHlwZS50cnlSdW5VcGRhdGVGdW5jdGlvbiA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbikge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHZhciB1c2VyUHJvbWlzZSA9IHRoaXMudXBkYXRlRnVuY3Rpb24odHJhbnNhY3Rpb24pO1xyXG4gICAgICAgICAgICBpZiAoaXNOdWxsT3JVbmRlZmluZWQodXNlclByb21pc2UpIHx8XHJcbiAgICAgICAgICAgICAgICAhdXNlclByb21pc2UuY2F0Y2ggfHxcclxuICAgICAgICAgICAgICAgICF1c2VyUHJvbWlzZS50aGVuKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRlZmVycmVkLnJlamVjdChFcnJvcignVHJhbnNhY3Rpb24gY2FsbGJhY2sgbXVzdCByZXR1cm4gYSBQcm9taXNlJykpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHVzZXJQcm9taXNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgLy8gRG8gbm90IHJldHJ5IGVycm9ycyB0aHJvd24gYnkgdXNlciBwcm92aWRlZCB1cGRhdGVGdW5jdGlvbi5cclxuICAgICAgICAgICAgdGhpcy5kZWZlcnJlZC5yZWplY3QoZXJyb3IpO1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgVHJhbnNhY3Rpb25SdW5uZXIucHJvdG90eXBlLmhhbmRsZVRyYW5zYWN0aW9uRXJyb3IgPSBmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIGlmICh0aGlzLnJldHJpZXMgPiAwICYmIHRoaXMuaXNSZXRyeWFibGVUcmFuc2FjdGlvbkVycm9yKGVycm9yKSkge1xyXG4gICAgICAgICAgICB0aGlzLnJldHJpZXMgLT0gMTtcclxuICAgICAgICAgICAgdGhpcy5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMucnVuV2l0aEJhY2tPZmYoKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmRlZmVycmVkLnJlamVjdChlcnJvcik7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFRyYW5zYWN0aW9uUnVubmVyLnByb3RvdHlwZS5pc1JldHJ5YWJsZVRyYW5zYWN0aW9uRXJyb3IgPSBmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICBpZiAoZXJyb3IubmFtZSA9PT0gJ0ZpcmViYXNlRXJyb3InKSB7XHJcbiAgICAgICAgICAgIC8vIEluIHRyYW5zYWN0aW9ucywgdGhlIGJhY2tlbmQgd2lsbCBmYWlsIG91dGRhdGVkIHJlYWRzIHdpdGggRkFJTEVEX1BSRUNPTkRJVElPTiBhbmRcclxuICAgICAgICAgICAgLy8gbm9uLW1hdGNoaW5nIGRvY3VtZW50IHZlcnNpb25zIHdpdGggQUJPUlRFRC4gVGhlc2UgZXJyb3JzIHNob3VsZCBiZSByZXRyaWVkLlxyXG4gICAgICAgICAgICB2YXIgY29kZSA9IGVycm9yLmNvZGU7XHJcbiAgICAgICAgICAgIHJldHVybiAoY29kZSA9PT0gJ2Fib3J0ZWQnIHx8XHJcbiAgICAgICAgICAgICAgICBjb2RlID09PSAnZmFpbGVkLXByZWNvbmRpdGlvbicgfHxcclxuICAgICAgICAgICAgICAgICFpc1Blcm1hbmVudEVycm9yKGNvZGUpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBUcmFuc2FjdGlvblJ1bm5lcjtcclxufSgpKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnZhciBMT0dfVEFHJDkgPSAnU3luY0VuZ2luZSc7XHJcbi8qKlxyXG4gKiBRdWVyeVZpZXcgY29udGFpbnMgYWxsIG9mIHRoZSBkYXRhIHRoYXQgU3luY0VuZ2luZSBuZWVkcyB0byBrZWVwIHRyYWNrIG9mIGZvclxyXG4gKiBhIHBhcnRpY3VsYXIgcXVlcnkuXHJcbiAqL1xyXG52YXIgUXVlcnlWaWV3ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gUXVlcnlWaWV3KFxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgcXVlcnkgaXRzZWxmLlxyXG4gICAgICovXHJcbiAgICBxdWVyeSwgXHJcbiAgICAvKipcclxuICAgICAqIFRoZSB0YXJnZXQgbnVtYmVyIGNyZWF0ZWQgYnkgdGhlIGNsaWVudCB0aGF0IGlzIHVzZWQgaW4gdGhlIHdhdGNoXHJcbiAgICAgKiBzdHJlYW0gdG8gaWRlbnRpZnkgdGhpcyBxdWVyeS5cclxuICAgICAqL1xyXG4gICAgdGFyZ2V0SWQsIFxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgdmlldyBpcyByZXNwb25zaWJsZSBmb3IgY29tcHV0aW5nIHRoZSBmaW5hbCBtZXJnZWQgdHJ1dGggb2Ygd2hhdFxyXG4gICAgICogZG9jcyBhcmUgaW4gdGhlIHF1ZXJ5LiBJdCBnZXRzIG5vdGlmaWVkIG9mIGxvY2FsIGFuZCByZW1vdGUgY2hhbmdlcyxcclxuICAgICAqIGFuZCBhcHBsaWVzIHRoZSBxdWVyeSBmaWx0ZXJzIGFuZCBsaW1pdHMgdG8gZGV0ZXJtaW5lIHRoZSBtb3N0IGNvcnJlY3RcclxuICAgICAqIHBvc3NpYmxlIHJlc3VsdHMuXHJcbiAgICAgKi9cclxuICAgIHZpZXcpIHtcclxuICAgICAgICB0aGlzLnF1ZXJ5ID0gcXVlcnk7XHJcbiAgICAgICAgdGhpcy50YXJnZXRJZCA9IHRhcmdldElkO1xyXG4gICAgICAgIHRoaXMudmlldyA9IHZpZXc7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gUXVlcnlWaWV3O1xyXG59KCkpO1xyXG4vKiogVHJhY2tzIGEgbGltYm8gcmVzb2x1dGlvbi4gKi9cclxudmFyIExpbWJvUmVzb2x1dGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIExpbWJvUmVzb2x1dGlvbihrZXkpIHtcclxuICAgICAgICB0aGlzLmtleSA9IGtleTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBTZXQgdG8gdHJ1ZSBvbmNlIHdlJ3ZlIHJlY2VpdmVkIGEgZG9jdW1lbnQuIFRoaXMgaXMgdXNlZCBpblxyXG4gICAgICAgICAqIGdldFJlbW90ZUtleXNGb3JUYXJnZXQoKSBhbmQgdWx0aW1hdGVseSB1c2VkIGJ5IFdhdGNoQ2hhbmdlQWdncmVnYXRvciB0b1xyXG4gICAgICAgICAqIGRlY2lkZSB3aGV0aGVyIGl0IG5lZWRzIHRvIG1hbnVmYWN0dXJlIGEgZGVsZXRlIGV2ZW50IGZvciB0aGUgdGFyZ2V0IG9uY2VcclxuICAgICAgICAgKiB0aGUgdGFyZ2V0IGlzIENVUlJFTlQuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5yZWNlaXZlZERvY3VtZW50ID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gTGltYm9SZXNvbHV0aW9uO1xyXG59KCkpO1xyXG4vKipcclxuICogU3luY0VuZ2luZSBpcyB0aGUgY2VudHJhbCBjb250cm9sbGVyIGluIHRoZSBjbGllbnQgU0RLIGFyY2hpdGVjdHVyZS4gSXQgaXNcclxuICogdGhlIGdsdWUgY29kZSBiZXR3ZWVuIHRoZSBFdmVudE1hbmFnZXIsIExvY2FsU3RvcmUsIGFuZCBSZW1vdGVTdG9yZS4gU29tZSBvZlxyXG4gKiBTeW5jRW5naW5lJ3MgcmVzcG9uc2liaWxpdGllcyBpbmNsdWRlOlxyXG4gKiAxLiBDb29yZGluYXRpbmcgY2xpZW50IHJlcXVlc3RzIGFuZCByZW1vdGUgZXZlbnRzIGJldHdlZW4gdGhlIEV2ZW50TWFuYWdlclxyXG4gKiAgICBhbmQgdGhlIGxvY2FsIGFuZCByZW1vdGUgZGF0YSBzdG9yZXMuXHJcbiAqIDIuIE1hbmFnaW5nIGEgVmlldyBvYmplY3QgZm9yIGVhY2ggcXVlcnksIHByb3ZpZGluZyB0aGUgdW5pZmllZCB2aWV3IGJldHdlZW5cclxuICogICAgdGhlIGxvY2FsIGFuZCByZW1vdGUgZGF0YSBzdG9yZXMuXHJcbiAqIDMuIE5vdGlmeWluZyB0aGUgUmVtb3RlU3RvcmUgd2hlbiB0aGUgTG9jYWxTdG9yZSBoYXMgbmV3IG11dGF0aW9ucyBpbiBpdHNcclxuICogICAgcXVldWUgdGhhdCBuZWVkIHNlbmRpbmcgdG8gdGhlIGJhY2tlbmQuXHJcbiAqXHJcbiAqIFRoZSBTeW5jRW5naW5l4oCZcyBtZXRob2RzIHNob3VsZCBvbmx5IGV2ZXIgYmUgY2FsbGVkIGJ5IG1ldGhvZHMgcnVubmluZyBpbiB0aGVcclxuICogZ2xvYmFsIGFzeW5jIHF1ZXVlLlxyXG4gKi9cclxudmFyIFN5bmNFbmdpbmUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBTeW5jRW5naW5lKGxvY2FsU3RvcmUsIHJlbW90ZVN0b3JlLCBcclxuICAgIC8vIFBPUlRJTkcgTk9URTogTWFuYWdlcyBzdGF0ZSBzeW5jaHJvbml6YXRpb24gaW4gbXVsdGktdGFiIGVudmlyb25tZW50cy5cclxuICAgIHNoYXJlZENsaWVudFN0YXRlLCBjdXJyZW50VXNlcikge1xyXG4gICAgICAgIHRoaXMubG9jYWxTdG9yZSA9IGxvY2FsU3RvcmU7XHJcbiAgICAgICAgdGhpcy5yZW1vdGVTdG9yZSA9IHJlbW90ZVN0b3JlO1xyXG4gICAgICAgIHRoaXMuc2hhcmVkQ2xpZW50U3RhdGUgPSBzaGFyZWRDbGllbnRTdGF0ZTtcclxuICAgICAgICB0aGlzLmN1cnJlbnRVc2VyID0gY3VycmVudFVzZXI7XHJcbiAgICAgICAgdGhpcy5zeW5jRW5naW5lTGlzdGVuZXIgPSBudWxsO1xyXG4gICAgICAgIHRoaXMucXVlcnlWaWV3c0J5UXVlcnkgPSBuZXcgT2JqZWN0TWFwKGZ1bmN0aW9uIChxKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBxLmNhbm9uaWNhbElkKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5xdWVyaWVzQnlUYXJnZXQgPSB7fTtcclxuICAgICAgICB0aGlzLmxpbWJvVGFyZ2V0c0J5S2V5ID0gbmV3IFNvcnRlZE1hcChEb2N1bWVudEtleS5jb21wYXJhdG9yKTtcclxuICAgICAgICB0aGlzLmxpbWJvUmVzb2x1dGlvbnNCeVRhcmdldCA9IHt9O1xyXG4gICAgICAgIHRoaXMubGltYm9Eb2N1bWVudFJlZnMgPSBuZXcgUmVmZXJlbmNlU2V0KCk7XHJcbiAgICAgICAgLyoqIFN0b3JlcyB1c2VyIGNvbXBsZXRpb24gaGFuZGxlcnMsIGluZGV4ZWQgYnkgVXNlciBhbmQgQmF0Y2hJZC4gKi9cclxuICAgICAgICB0aGlzLm11dGF0aW9uVXNlckNhbGxiYWNrcyA9IHt9O1xyXG4gICAgICAgIC8qKiBTdG9yZXMgdXNlciBjYWxsYmFja3Mgd2FpdGluZyBmb3IgYWxsIHBlbmRpbmcgd3JpdGVzIHRvIGJlIGFja25vd2xlZGdlZC4gKi9cclxuICAgICAgICB0aGlzLnBlbmRpbmdXcml0ZXNDYWxsYmFja3MgPSBuZXcgTWFwKCk7XHJcbiAgICAgICAgdGhpcy5saW1ib1RhcmdldElkR2VuZXJhdG9yID0gVGFyZ2V0SWRHZW5lcmF0b3IuZm9yU3luY0VuZ2luZSgpO1xyXG4gICAgICAgIC8vIFRoZSBwcmltYXJ5IHN0YXRlIGlzIHNldCB0byBgdHJ1ZWAgb3IgYGZhbHNlYCBpbW1lZGlhdGVseSBhZnRlciBGaXJlc3RvcmVcclxuICAgICAgICAvLyBzdGFydHVwLiBJbiB0aGUgaW50ZXJpbSwgYSBjbGllbnQgc2hvdWxkIG9ubHkgYmUgY29uc2lkZXJlZCBwcmltYXJ5IGlmXHJcbiAgICAgICAgLy8gYGlzUHJpbWFyeWAgaXMgdHJ1ZS5cclxuICAgICAgICB0aGlzLmlzUHJpbWFyeSA9IHVuZGVmaW5lZDtcclxuICAgICAgICB0aGlzLm9ubGluZVN0YXRlID0gT25saW5lU3RhdGUuVW5rbm93bjtcclxuICAgIH1cclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTeW5jRW5naW5lLnByb3RvdHlwZSwgXCJpc1ByaW1hcnlDbGllbnRcIiwge1xyXG4gICAgICAgIC8vIE9ubHkgdXNlZCBmb3IgdGVzdGluZy5cclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaXNQcmltYXJ5ID09PSB0cnVlO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgLyoqIFN1YnNjcmliZXMgdG8gU3luY0VuZ2luZSBub3RpZmljYXRpb25zLiBIYXMgdG8gYmUgY2FsbGVkIGV4YWN0bHkgb25jZS4gKi9cclxuICAgIFN5bmNFbmdpbmUucHJvdG90eXBlLnN1YnNjcmliZSA9IGZ1bmN0aW9uIChzeW5jRW5naW5lTGlzdGVuZXIpIHtcclxuICAgICAgICBhc3NlcnQoc3luY0VuZ2luZUxpc3RlbmVyICE9PSBudWxsLCAnU3luY0VuZ2luZSBsaXN0ZW5lciBjYW5ub3QgYmUgbnVsbCcpO1xyXG4gICAgICAgIGFzc2VydCh0aGlzLnN5bmNFbmdpbmVMaXN0ZW5lciA9PT0gbnVsbCwgJ1N5bmNFbmdpbmUgYWxyZWFkeSBoYXMgYSBzdWJzY3JpYmVyLicpO1xyXG4gICAgICAgIHRoaXMuc3luY0VuZ2luZUxpc3RlbmVyID0gc3luY0VuZ2luZUxpc3RlbmVyO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogSW5pdGlhdGVzIHRoZSBuZXcgbGlzdGVuLCByZXNvbHZlcyBwcm9taXNlIHdoZW4gbGlzdGVuIGVucXVldWVkIHRvIHRoZVxyXG4gICAgICogc2VydmVyLiBBbGwgdGhlIHN1YnNlcXVlbnQgdmlldyBzbmFwc2hvdHMgb3IgZXJyb3JzIGFyZSBzZW50IHRvIHRoZVxyXG4gICAgICogc3Vic2NyaWJlZCBoYW5kbGVycy4gUmV0dXJucyB0aGUgdGFyZ2V0SWQgb2YgdGhlIHF1ZXJ5LlxyXG4gICAgICovXHJcbiAgICBTeW5jRW5naW5lLnByb3RvdHlwZS5saXN0ZW4gPSBmdW5jdGlvbiAocXVlcnkpIHtcclxuICAgICAgICByZXR1cm4gdHNsaWIuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciB0YXJnZXRJZCwgdmlld1NuYXBzaG90LCBxdWVyeVZpZXcsIHRhcmdldERhdGEsIHN0YXR1c18xO1xyXG4gICAgICAgICAgICByZXR1cm4gdHNsaWIuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFzc2VydFN1YnNjcmliZWQoJ2xpc3RlbigpJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5VmlldyA9IHRoaXMucXVlcnlWaWV3c0J5UXVlcnkuZ2V0KHF1ZXJ5KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFxdWVyeVZpZXcpIHJldHVybiBbMyAvKmJyZWFrKi8sIDFdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBQT1JUSU5HIE5PVEU6IFdpdGggTXVsdGktVGFiIFdlYiwgaXQgaXMgcG9zc2libGUgdGhhdCBhIHF1ZXJ5IHZpZXdcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYWxyZWFkeSBleGlzdHMgd2hlbiBFdmVudE1hbmFnZXIgY2FsbHMgdXMgZm9yIHRoZSBmaXJzdCB0aW1lLiBUaGlzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGhhcHBlbnMgd2hlbiB0aGUgcHJpbWFyeSB0YWIgaXMgYWxyZWFkeSBsaXN0ZW5pbmcgdG8gdGhpcyBxdWVyeSBvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBiZWhhbGYgb2YgYW5vdGhlciB0YWIgYW5kIHRoZSB1c2VyIG9mIHRoZSBwcmltYXJ5IGFsc28gc3RhcnRzIGxpc3RlbmluZ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB0byB0aGUgcXVlcnkuIEV2ZW50TWFuYWdlciB3aWxsIG5vdCBoYXZlIGFuIGFzc2lnbmVkIHRhcmdldCBJRCBpbiB0aGlzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNhc2UgYW5kIGNhbGxzIGBsaXN0ZW5gIHRvIG9idGFpbiB0aGlzIElELlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRJZCA9IHF1ZXJ5Vmlldy50YXJnZXRJZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaGFyZWRDbGllbnRTdGF0ZS5hZGRMb2NhbFF1ZXJ5VGFyZ2V0KHRhcmdldElkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmlld1NuYXBzaG90ID0gcXVlcnlWaWV3LnZpZXcuY29tcHV0ZUluaXRpYWxTbmFwc2hvdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCA0XTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6IHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMubG9jYWxTdG9yZS5hbGxvY2F0ZVRhcmdldChxdWVyeS50b1RhcmdldCgpKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXREYXRhID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXNfMSA9IHRoaXMuc2hhcmVkQ2xpZW50U3RhdGUuYWRkTG9jYWxRdWVyeVRhcmdldCh0YXJnZXREYXRhLnRhcmdldElkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0SWQgPSB0YXJnZXREYXRhLnRhcmdldElkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmluaXRpYWxpemVWaWV3QW5kQ29tcHV0ZVNuYXBzaG90KHF1ZXJ5LCB0YXJnZXRJZCwgc3RhdHVzXzEgPT09ICdjdXJyZW50JyldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmlld1NuYXBzaG90ID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5pc1ByaW1hcnkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3RlU3RvcmUubGlzdGVuKHRhcmdldERhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLmxhYmVsID0gNDtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3luY0VuZ2luZUxpc3RlbmVyLm9uV2F0Y2hDaGFuZ2UoW3ZpZXdTbmFwc2hvdF0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdGFyZ2V0SWRdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJlZ2lzdGVycyBhIHZpZXcgZm9yIGEgcHJldmlvdXNseSB1bmtub3duIHF1ZXJ5IGFuZCBjb21wdXRlcyBpdHMgaW5pdGlhbFxyXG4gICAgICogc25hcHNob3QuXHJcbiAgICAgKi9cclxuICAgIFN5bmNFbmdpbmUucHJvdG90eXBlLmluaXRpYWxpemVWaWV3QW5kQ29tcHV0ZVNuYXBzaG90ID0gZnVuY3Rpb24gKHF1ZXJ5LCB0YXJnZXRJZCwgY3VycmVudCkge1xyXG4gICAgICAgIHJldHVybiB0c2xpYi5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHF1ZXJ5UmVzdWx0LCB2aWV3LCB2aWV3RG9jQ2hhbmdlcywgc3ludGhlc2l6ZWRUYXJnZXRDaGFuZ2UsIHZpZXdDaGFuZ2UsIGRhdGE7XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYi5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6IHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMubG9jYWxTdG9yZS5leGVjdXRlUXVlcnkocXVlcnksIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiB1c2VQcmV2aW91c1Jlc3VsdHM9ICovIHRydWUpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5UmVzdWx0ID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2aWV3ID0gbmV3IFZpZXcocXVlcnksIHF1ZXJ5UmVzdWx0LnJlbW90ZUtleXMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2aWV3RG9jQ2hhbmdlcyA9IHZpZXcuY29tcHV0ZURvY0NoYW5nZXMocXVlcnlSZXN1bHQuZG9jdW1lbnRzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3ludGhlc2l6ZWRUYXJnZXRDaGFuZ2UgPSBUYXJnZXRDaGFuZ2UuY3JlYXRlU3ludGhlc2l6ZWRUYXJnZXRDaGFuZ2VGb3JDdXJyZW50Q2hhbmdlKHRhcmdldElkLCBjdXJyZW50ICYmIHRoaXMub25saW5lU3RhdGUgIT09IE9ubGluZVN0YXRlLk9mZmxpbmUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2aWV3Q2hhbmdlID0gdmlldy5hcHBseUNoYW5nZXModmlld0RvY0NoYW5nZXMsIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiB1cGRhdGVMaW1ib0RvY3VtZW50cz0gKi8gdGhpcy5pc1ByaW1hcnkgPT09IHRydWUsIHN5bnRoZXNpemVkVGFyZ2V0Q2hhbmdlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXJ0KHZpZXdDaGFuZ2UubGltYm9DaGFuZ2VzLmxlbmd0aCA9PT0gMCwgJ1ZpZXcgcmV0dXJuZWQgbGltYm8gZG9jcyBiZWZvcmUgdGFyZ2V0IGFjayBmcm9tIHRoZSBzZXJ2ZXIuJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFzc2VydCghIXZpZXdDaGFuZ2Uuc25hcHNob3QsICdhcHBseUNoYW5nZXMgZm9yIG5ldyB2aWV3IHNob3VsZCBhbHdheXMgcmV0dXJuIGEgc25hcHNob3QnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YSA9IG5ldyBRdWVyeVZpZXcocXVlcnksIHRhcmdldElkLCB2aWV3KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5xdWVyeVZpZXdzQnlRdWVyeS5zZXQocXVlcnksIGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMucXVlcmllc0J5VGFyZ2V0W3RhcmdldElkXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5xdWVyaWVzQnlUYXJnZXRbdGFyZ2V0SWRdID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5xdWVyaWVzQnlUYXJnZXRbdGFyZ2V0SWRdLnB1c2gocXVlcnkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdmlld0NoYW5nZS5zbmFwc2hvdF07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmVjb25jaWxlIHRoZSBsaXN0IG9mIHN5bmNlZCBkb2N1bWVudHMgaW4gYW4gZXhpc3RpbmcgdmlldyB3aXRoIHRob3NlXHJcbiAgICAgKiBmcm9tIHBlcnNpc3RlbmNlLlxyXG4gICAgICovXHJcbiAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLXRhYiBvbmx5LlxyXG4gICAgU3luY0VuZ2luZS5wcm90b3R5cGUuc3luY2hyb25pemVWaWV3QW5kQ29tcHV0ZVNuYXBzaG90ID0gZnVuY3Rpb24gKHF1ZXJ5Vmlldykge1xyXG4gICAgICAgIHJldHVybiB0c2xpYi5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHF1ZXJ5UmVzdWx0LCB2aWV3U25hcHNob3Q7XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYi5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6IHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMubG9jYWxTdG9yZS5leGVjdXRlUXVlcnkocXVlcnlWaWV3LnF1ZXJ5LCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgLyogdXNlUHJldmlvdXNSZXN1bHRzPSAqLyB0cnVlKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBxdWVyeVJlc3VsdCA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmlld1NuYXBzaG90ID0gcXVlcnlWaWV3LnZpZXcuc3luY2hyb25pemVXaXRoUGVyc2lzdGVkU3RhdGUocXVlcnlSZXN1bHQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5pc1ByaW1hcnkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlVHJhY2tlZExpbWJvcyhxdWVyeVZpZXcudGFyZ2V0SWQsIHZpZXdTbmFwc2hvdC5saW1ib0NoYW5nZXMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB2aWV3U25hcHNob3RdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKiogU3RvcHMgbGlzdGVuaW5nIHRvIHRoZSBxdWVyeS4gKi9cclxuICAgIFN5bmNFbmdpbmUucHJvdG90eXBlLnVubGlzdGVuID0gZnVuY3Rpb24gKHF1ZXJ5KSB7XHJcbiAgICAgICAgcmV0dXJuIHRzbGliLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgcXVlcnlWaWV3LCBxdWVyaWVzLCB0YXJnZXRSZW1haW5zQWN0aXZlO1xyXG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgICAgICByZXR1cm4gdHNsaWIuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFzc2VydFN1YnNjcmliZWQoJ3VubGlzdGVuKCknKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcXVlcnlWaWV3ID0gdGhpcy5xdWVyeVZpZXdzQnlRdWVyeS5nZXQocXVlcnkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhc3NlcnQoISFxdWVyeVZpZXcsICdUcnlpbmcgdG8gdW5saXN0ZW4gb24gcXVlcnkgbm90IGZvdW5kOicgKyBxdWVyeSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJpZXMgPSB0aGlzLnF1ZXJpZXNCeVRhcmdldFtxdWVyeVZpZXcudGFyZ2V0SWRdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocXVlcmllcy5sZW5ndGggPiAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnF1ZXJpZXNCeVRhcmdldFtxdWVyeVZpZXcudGFyZ2V0SWRdID0gcXVlcmllcy5maWx0ZXIoZnVuY3Rpb24gKHEpIHsgcmV0dXJuICFxLmlzRXF1YWwocXVlcnkpOyB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucXVlcnlWaWV3c0J5UXVlcnkuZGVsZXRlKHF1ZXJ5KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuaXNQcmltYXJ5KSByZXR1cm4gWzMgLypicmVhayovLCAzXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gV2UgbmVlZCB0byByZW1vdmUgdGhlIGxvY2FsIHF1ZXJ5IHRhcmdldCBmaXJzdCB0byBhbGxvdyB1cyB0byB2ZXJpZnlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gd2hldGhlciBhbnkgb3RoZXIgY2xpZW50IGlzIHN0aWxsIGludGVyZXN0ZWQgaW4gdGhpcyB0YXJnZXQuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hhcmVkQ2xpZW50U3RhdGUucmVtb3ZlTG9jYWxRdWVyeVRhcmdldChxdWVyeVZpZXcudGFyZ2V0SWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRSZW1haW5zQWN0aXZlID0gdGhpcy5zaGFyZWRDbGllbnRTdGF0ZS5pc0FjdGl2ZVF1ZXJ5VGFyZ2V0KHF1ZXJ5Vmlldy50YXJnZXRJZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghIXRhcmdldFJlbWFpbnNBY3RpdmUpIHJldHVybiBbMyAvKmJyZWFrKi8sIDJdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmxvY2FsU3RvcmVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVsZWFzZVRhcmdldChxdWVyeVZpZXcudGFyZ2V0SWQsIC8qa2VlcFBlcnNpc3RlZFRhcmdldERhdGE9Ki8gZmFsc2UpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnNoYXJlZENsaWVudFN0YXRlLmNsZWFyUXVlcnlTdGF0ZShxdWVyeVZpZXcudGFyZ2V0SWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnJlbW90ZVN0b3JlLnVubGlzdGVuKHF1ZXJ5Vmlldy50YXJnZXRJZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMucmVtb3ZlQW5kQ2xlYW51cFRhcmdldChxdWVyeVZpZXcudGFyZ2V0SWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY2F0Y2goaWdub3JlSWZQcmltYXJ5TGVhc2VMb3NzKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLmxhYmVsID0gMjtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6IHJldHVybiBbMyAvKmJyZWFrKi8sIDVdO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVBbmRDbGVhbnVwVGFyZ2V0KHF1ZXJ5Vmlldy50YXJnZXRJZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMubG9jYWxTdG9yZS5yZWxlYXNlVGFyZ2V0KHF1ZXJ5Vmlldy50YXJnZXRJZCwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKmtlZXBQZXJzaXN0ZWRUYXJnZXREYXRhPSovIHRydWUpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSA1O1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNTogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEluaXRpYXRlcyB0aGUgd3JpdGUgb2YgbG9jYWwgbXV0YXRpb24gYmF0Y2ggd2hpY2ggaW52b2x2ZXMgYWRkaW5nIHRoZVxyXG4gICAgICogd3JpdGVzIHRvIHRoZSBtdXRhdGlvbiBxdWV1ZSwgbm90aWZ5aW5nIHRoZSByZW1vdGUgc3RvcmUgYWJvdXQgbmV3XHJcbiAgICAgKiBtdXRhdGlvbnMgYW5kIHJhaXNpbmcgZXZlbnRzIGZvciBhbnkgY2hhbmdlcyB0aGlzIHdyaXRlIGNhdXNlZC5cclxuICAgICAqXHJcbiAgICAgKiBUaGUgcHJvbWlzZSByZXR1cm5lZCBieSB0aGlzIGNhbGwgaXMgcmVzb2x2ZWQgd2hlbiB0aGUgYWJvdmUgc3RlcHNcclxuICAgICAqIGhhdmUgY29tcGxldGVkLCAqbm90KiB3aGVuIHRoZSB3cml0ZSB3YXMgYWNrZWQgYnkgdGhlIGJhY2tlbmQuIFRoZVxyXG4gICAgICogdXNlckNhbGxiYWNrIGlzIHJlc29sdmVkIG9uY2UgdGhlIHdyaXRlIHdhcyBhY2tlZC9yZWplY3RlZCBieSB0aGVcclxuICAgICAqIGJhY2tlbmQgKG9yIGZhaWxlZCBsb2NhbGx5IGZvciBhbnkgb3RoZXIgcmVhc29uKS5cclxuICAgICAqL1xyXG4gICAgU3luY0VuZ2luZS5wcm90b3R5cGUud3JpdGUgPSBmdW5jdGlvbiAoYmF0Y2gsIHVzZXJDYWxsYmFjaykge1xyXG4gICAgICAgIHJldHVybiB0c2xpYi5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHJlc3VsdDtcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hc3NlcnRTdWJzY3JpYmVkKCd3cml0ZSgpJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMubG9jYWxTdG9yZS5sb2NhbFdyaXRlKGJhdGNoKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hhcmVkQ2xpZW50U3RhdGUuYWRkUGVuZGluZ011dGF0aW9uKHJlc3VsdC5iYXRjaElkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRNdXRhdGlvbkNhbGxiYWNrKHJlc3VsdC5iYXRjaElkLCB1c2VyQ2FsbGJhY2spO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmVtaXROZXdTbmFwc0FuZE5vdGlmeUxvY2FsU3RvcmUocmVzdWx0LmNoYW5nZXMpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5yZW1vdGVTdG9yZS5maWxsV3JpdGVQaXBlbGluZSgpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFRha2VzIGFuIHVwZGF0ZUZ1bmN0aW9uIGluIHdoaWNoIGEgc2V0IG9mIHJlYWRzIGFuZCB3cml0ZXMgY2FuIGJlIHBlcmZvcm1lZFxyXG4gICAgICogYXRvbWljYWxseS4gSW4gdGhlIHVwZGF0ZUZ1bmN0aW9uLCB0aGUgY2xpZW50IGNhbiByZWFkIGFuZCB3cml0ZSB2YWx1ZXNcclxuICAgICAqIHVzaW5nIHRoZSBzdXBwbGllZCB0cmFuc2FjdGlvbiBvYmplY3QuIEFmdGVyIHRoZSB1cGRhdGVGdW5jdGlvbiwgYWxsXHJcbiAgICAgKiBjaGFuZ2VzIHdpbGwgYmUgY29tbWl0dGVkLiBJZiBhIHJldHJ5YWJsZSBlcnJvciBvY2N1cnMgKGV4OiBzb21lIG90aGVyXHJcbiAgICAgKiBjbGllbnQgaGFzIGNoYW5nZWQgYW55IG9mIHRoZSBkYXRhIHJlZmVyZW5jZWQpLCB0aGVuIHRoZSB1cGRhdGVGdW5jdGlvblxyXG4gICAgICogd2lsbCBiZSBjYWxsZWQgYWdhaW4gYWZ0ZXIgYSBiYWNrb2ZmLiBJZiB0aGUgdXBkYXRlRnVuY3Rpb24gc3RpbGwgZmFpbHNcclxuICAgICAqIGFmdGVyIGFsbCByZXRyaWVzLCB0aGVuIHRoZSB0cmFuc2FjdGlvbiB3aWxsIGJlIHJlamVjdGVkLlxyXG4gICAgICpcclxuICAgICAqIFRoZSB0cmFuc2FjdGlvbiBvYmplY3QgcGFzc2VkIHRvIHRoZSB1cGRhdGVGdW5jdGlvbiBjb250YWlucyBtZXRob2RzIGZvclxyXG4gICAgICogYWNjZXNzaW5nIGRvY3VtZW50cyBhbmQgY29sbGVjdGlvbnMuIFVubGlrZSBvdGhlciBkYXRhc3RvcmUgYWNjZXNzLCBkYXRhXHJcbiAgICAgKiBhY2Nlc3NlZCB3aXRoIHRoZSB0cmFuc2FjdGlvbiB3aWxsIG5vdCByZWZsZWN0IGxvY2FsIGNoYW5nZXMgdGhhdCBoYXZlIG5vdFxyXG4gICAgICogYmVlbiBjb21taXR0ZWQuIEZvciB0aGlzIHJlYXNvbiwgaXQgaXMgcmVxdWlyZWQgdGhhdCBhbGwgcmVhZHMgYXJlXHJcbiAgICAgKiBwZXJmb3JtZWQgYmVmb3JlIGFueSB3cml0ZXMuIFRyYW5zYWN0aW9ucyBtdXN0IGJlIHBlcmZvcm1lZCB3aGlsZSBvbmxpbmUuXHJcbiAgICAgKlxyXG4gICAgICogVGhlIERlZmVycmVkIGlucHV0IGlzIHJlc29sdmVkIHdoZW4gdGhlIHRyYW5zYWN0aW9uIGlzIGZ1bGx5IGNvbW1pdHRlZC5cclxuICAgICAqL1xyXG4gICAgU3luY0VuZ2luZS5wcm90b3R5cGUucnVuVHJhbnNhY3Rpb24gPSBmdW5jdGlvbiAoYXN5bmNRdWV1ZSwgdXBkYXRlRnVuY3Rpb24sIGRlZmVycmVkKSB7XHJcbiAgICAgICAgbmV3IFRyYW5zYWN0aW9uUnVubmVyKGFzeW5jUXVldWUsIHRoaXMucmVtb3RlU3RvcmUsIHVwZGF0ZUZ1bmN0aW9uLCBkZWZlcnJlZCkucnVuKCk7XHJcbiAgICB9O1xyXG4gICAgU3luY0VuZ2luZS5wcm90b3R5cGUuYXBwbHlSZW1vdGVFdmVudCA9IGZ1bmN0aW9uIChyZW1vdGVFdmVudCkge1xyXG4gICAgICAgIHJldHVybiB0c2xpYi5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGNoYW5nZXMsIGVycm9yXzE7XHJcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYi5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYXNzZXJ0U3Vic2NyaWJlZCgnYXBwbHlSZW1vdGVFdmVudCgpJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLmxhYmVsID0gMTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnRyeXMucHVzaChbMSwgNCwgLCA2XSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMubG9jYWxTdG9yZS5hcHBseVJlbW90ZUV2ZW50KHJlbW90ZUV2ZW50KV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VzID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBVcGRhdGUgYHJlY2VpdmVkRG9jdW1lbnRgIGFzIGFwcHJvcHJpYXRlIGZvciBhbnkgbGltYm8gdGFyZ2V0cy5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yRWFjaChyZW1vdGVFdmVudC50YXJnZXRDaGFuZ2VzLCBmdW5jdGlvbiAodGFyZ2V0SWQsIHRhcmdldENoYW5nZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxpbWJvUmVzb2x1dGlvbiA9IF90aGlzLmxpbWJvUmVzb2x1dGlvbnNCeVRhcmdldFtOdW1iZXIodGFyZ2V0SWQpXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsaW1ib1Jlc29sdXRpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaW5jZSB0aGlzIGlzIGEgbGltYm8gcmVzb2x1dGlvbiBsb29rdXAsIGl0J3MgZm9yIGEgc2luZ2xlIGRvY3VtZW50XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYW5kIGl0IGNvdWxkIGJlIGFkZGVkLCBtb2RpZmllZCwgb3IgcmVtb3ZlZCwgYnV0IG5vdCBhIGNvbWJpbmF0aW9uLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2VydCh0YXJnZXRDaGFuZ2UuYWRkZWREb2N1bWVudHMuc2l6ZSArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldENoYW5nZS5tb2RpZmllZERvY3VtZW50cy5zaXplICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0Q2hhbmdlLnJlbW92ZWREb2N1bWVudHMuc2l6ZSA8PVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAxLCAnTGltYm8gcmVzb2x1dGlvbiBmb3Igc2luZ2xlIGRvY3VtZW50IGNvbnRhaW5zIG11bHRpcGxlIGNoYW5nZXMuJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRhcmdldENoYW5nZS5hZGRlZERvY3VtZW50cy5zaXplID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaW1ib1Jlc29sdXRpb24ucmVjZWl2ZWREb2N1bWVudCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHRhcmdldENoYW5nZS5tb2RpZmllZERvY3VtZW50cy5zaXplID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NlcnQobGltYm9SZXNvbHV0aW9uLnJlY2VpdmVkRG9jdW1lbnQsICdSZWNlaXZlZCBjaGFuZ2UgZm9yIGxpbWJvIHRhcmdldCBkb2N1bWVudCB3aXRob3V0IGFkZC4nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodGFyZ2V0Q2hhbmdlLnJlbW92ZWREb2N1bWVudHMuc2l6ZSA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXJ0KGxpbWJvUmVzb2x1dGlvbi5yZWNlaXZlZERvY3VtZW50LCAnUmVjZWl2ZWQgcmVtb3ZlIGZvciBsaW1ibyB0YXJnZXQgZG9jdW1lbnQgd2l0aG91dCBhZGQuJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpbWJvUmVzb2x1dGlvbi5yZWNlaXZlZERvY3VtZW50ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5lbWl0TmV3U25hcHNBbmROb3RpZnlMb2NhbFN0b3JlKGNoYW5nZXMsIHJlbW90ZUV2ZW50KV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDZdO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JfMSA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgaWdub3JlSWZQcmltYXJ5TGVhc2VMb3NzKGVycm9yXzEpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgNl07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA2OiByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQXBwbGllcyBhbiBPbmxpbmVTdGF0ZSBjaGFuZ2UgdG8gdGhlIHN5bmMgZW5naW5lIGFuZCBub3RpZmllcyBhbnkgdmlld3Mgb2ZcclxuICAgICAqIHRoZSBjaGFuZ2UuXHJcbiAgICAgKi9cclxuICAgIFN5bmNFbmdpbmUucHJvdG90eXBlLmFwcGx5T25saW5lU3RhdGVDaGFuZ2UgPSBmdW5jdGlvbiAob25saW5lU3RhdGUsIHNvdXJjZSkge1xyXG4gICAgICAgIC8vIElmIHdlIGFyZSB0aGUgc2Vjb25kYXJ5IGNsaWVudCwgd2UgZXhwbGljaXRseSBpZ25vcmUgdGhlIHJlbW90ZSBzdG9yZSdzXHJcbiAgICAgICAgLy8gb25saW5lIHN0YXRlICh0aGUgbG9jYWwgY2xpZW50IG1heSBnbyBvZmZsaW5lLCBldmVuIHRob3VnaCB0aGUgcHJpbWFyeVxyXG4gICAgICAgIC8vIHRhYiByZW1haW5zIG9ubGluZSkgYW5kIG9ubHkgYXBwbHkgdGhlIHByaW1hcnkgdGFiJ3Mgb25saW5lIHN0YXRlIGZyb21cclxuICAgICAgICAvLyBTaGFyZWRDbGllbnRTdGF0ZS5cclxuICAgICAgICBpZiAoKHRoaXMuaXNQcmltYXJ5ICYmIHNvdXJjZSA9PT0gT25saW5lU3RhdGVTb3VyY2UuUmVtb3RlU3RvcmUpIHx8XHJcbiAgICAgICAgICAgICghdGhpcy5pc1ByaW1hcnkgJiYgc291cmNlID09PSBPbmxpbmVTdGF0ZVNvdXJjZS5TaGFyZWRDbGllbnRTdGF0ZSkpIHtcclxuICAgICAgICAgICAgdGhpcy5hc3NlcnRTdWJzY3JpYmVkKCdhcHBseU9ubGluZVN0YXRlQ2hhbmdlKCknKTtcclxuICAgICAgICAgICAgdmFyIG5ld1ZpZXdTbmFwc2hvdHNfMSA9IFtdO1xyXG4gICAgICAgICAgICB0aGlzLnF1ZXJ5Vmlld3NCeVF1ZXJ5LmZvckVhY2goZnVuY3Rpb24gKHF1ZXJ5LCBxdWVyeVZpZXcpIHtcclxuICAgICAgICAgICAgICAgIHZhciB2aWV3Q2hhbmdlID0gcXVlcnlWaWV3LnZpZXcuYXBwbHlPbmxpbmVTdGF0ZUNoYW5nZShvbmxpbmVTdGF0ZSk7XHJcbiAgICAgICAgICAgICAgICBhc3NlcnQodmlld0NoYW5nZS5saW1ib0NoYW5nZXMubGVuZ3RoID09PSAwLCAnT25saW5lU3RhdGUgc2hvdWxkIG5vdCBhZmZlY3QgbGltYm8gZG9jdW1lbnRzLicpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHZpZXdDaGFuZ2Uuc25hcHNob3QpIHtcclxuICAgICAgICAgICAgICAgICAgICBuZXdWaWV3U25hcHNob3RzXzEucHVzaCh2aWV3Q2hhbmdlLnNuYXBzaG90KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHRoaXMuc3luY0VuZ2luZUxpc3RlbmVyLm9uT25saW5lU3RhdGVDaGFuZ2Uob25saW5lU3RhdGUpO1xyXG4gICAgICAgICAgICB0aGlzLnN5bmNFbmdpbmVMaXN0ZW5lci5vbldhdGNoQ2hhbmdlKG5ld1ZpZXdTbmFwc2hvdHNfMSk7XHJcbiAgICAgICAgICAgIHRoaXMub25saW5lU3RhdGUgPSBvbmxpbmVTdGF0ZTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuaXNQcmltYXJ5KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNoYXJlZENsaWVudFN0YXRlLnNldE9ubGluZVN0YXRlKG9ubGluZVN0YXRlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBTeW5jRW5naW5lLnByb3RvdHlwZS5yZWplY3RMaXN0ZW4gPSBmdW5jdGlvbiAodGFyZ2V0SWQsIGVycikge1xyXG4gICAgICAgIHJldHVybiB0c2xpYi5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGxpbWJvUmVzb2x1dGlvbiwgbGltYm9LZXksIGRvY3VtZW50VXBkYXRlcywgcmVzb2x2ZWRMaW1ib0RvY3VtZW50cywgZXZlbnRfMTtcclxuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hc3NlcnRTdWJzY3JpYmVkKCdyZWplY3RMaXN0ZW5zKCknKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS10YWIgb25seS5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaGFyZWRDbGllbnRTdGF0ZS51cGRhdGVRdWVyeVN0YXRlKHRhcmdldElkLCAncmVqZWN0ZWQnLCBlcnIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsaW1ib1Jlc29sdXRpb24gPSB0aGlzLmxpbWJvUmVzb2x1dGlvbnNCeVRhcmdldFt0YXJnZXRJZF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpbWJvS2V5ID0gbGltYm9SZXNvbHV0aW9uICYmIGxpbWJvUmVzb2x1dGlvbi5rZXk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbGltYm9LZXkpIHJldHVybiBbMyAvKmJyZWFrKi8sIDFdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBTaW5jZSB0aGlzIHF1ZXJ5IGZhaWxlZCwgd2Ugd29uJ3Qgd2FudCB0byBtYW51YWxseSB1bmxpc3RlbiB0byBpdC5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gU28gZ28gYWhlYWQgYW5kIHJlbW92ZSBpdCBmcm9tIGJvb2trZWVwaW5nLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxpbWJvVGFyZ2V0c0J5S2V5ID0gdGhpcy5saW1ib1RhcmdldHNCeUtleS5yZW1vdmUobGltYm9LZXkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5saW1ib1Jlc29sdXRpb25zQnlUYXJnZXRbdGFyZ2V0SWRdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudFVwZGF0ZXMgPSBuZXcgU29ydGVkTWFwKERvY3VtZW50S2V5LmNvbXBhcmF0b3IpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudFVwZGF0ZXMgPSBkb2N1bWVudFVwZGF0ZXMuaW5zZXJ0KGxpbWJvS2V5LCBuZXcgTm9Eb2N1bWVudChsaW1ib0tleSwgU25hcHNob3RWZXJzaW9uLmZvckRlbGV0ZWREb2MoKSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlZExpbWJvRG9jdW1lbnRzID0gZG9jdW1lbnRLZXlTZXQoKS5hZGQobGltYm9LZXkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudF8xID0gbmV3IFJlbW90ZUV2ZW50KFNuYXBzaG90VmVyc2lvbi5NSU4sIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiB0YXJnZXRDaGFuZ2VzPSAqLyB7fSwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIHRhcmdldE1pc21hdGNoZXM9ICovIG5ldyBTb3J0ZWRTZXQocHJpbWl0aXZlQ29tcGFyYXRvciksIGRvY3VtZW50VXBkYXRlcywgcmVzb2x2ZWRMaW1ib0RvY3VtZW50cyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0aGlzLmFwcGx5UmVtb3RlRXZlbnQoZXZlbnRfMSldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTogcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5sb2NhbFN0b3JlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVsZWFzZVRhcmdldCh0YXJnZXRJZCwgLyoga2VlcFBlcnNpc3RlZFRhcmdldERhdGEgKi8gZmFsc2UpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5yZW1vdmVBbmRDbGVhbnVwVGFyZ2V0KHRhcmdldElkLCBlcnIpOyB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGlnbm9yZUlmUHJpbWFyeUxlYXNlTG9zcyldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDM7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOiByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktdGFiIG9ubHlcclxuICAgIFN5bmNFbmdpbmUucHJvdG90eXBlLmFwcGx5QmF0Y2hTdGF0ZSA9IGZ1bmN0aW9uIChiYXRjaElkLCBiYXRjaFN0YXRlLCBlcnJvcikge1xyXG4gICAgICAgIHJldHVybiB0c2xpYi5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGRvY3VtZW50cztcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hc3NlcnRTdWJzY3JpYmVkKCdhcHBseUJhdGNoU3RhdGUoKScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmxvY2FsU3RvcmUubG9va3VwTXV0YXRpb25Eb2N1bWVudHMoYmF0Y2hJZCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnRzID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZG9jdW1lbnRzID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBBIHRocm90dGxlZCB0YWIgbWF5IG5vdCBoYXZlIHNlZW4gdGhlIG11dGF0aW9uIGJlZm9yZSBpdCB3YXMgY29tcGxldGVkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhbmQgcmVtb3ZlZCBmcm9tIHRoZSBtdXRhdGlvbiBxdWV1ZSwgaW4gd2hpY2ggY2FzZSB3ZSB3b24ndCBoYXZlIGNhY2hlZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIGFmZmVjdGVkIGRvY3VtZW50cy4gSW4gdGhpcyBjYXNlIHdlIGNhbiBzYWZlbHkgaWdub3JlIHRoZSB1cGRhdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNpbmNlIHRoYXQgbWVhbnMgd2UgZGlkbid0IGFwcGx5IHRoZSBtdXRhdGlvbiBsb2NhbGx5IGF0IGFsbCAoaWYgd2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGhhZCwgd2Ugd291bGQgaGF2ZSBjYWNoZWQgdGhlIGFmZmVjdGVkIGRvY3VtZW50cyksIGFuZCBzbyB3ZSB3aWxsIGp1c3RcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNlZSBhbnkgcmVzdWx0aW5nIGRvY3VtZW50IGNoYW5nZXMgdmlhIG5vcm1hbCByZW1vdGUgZG9jdW1lbnQgdXBkYXRlc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYXMgYXBwbGljYWJsZS5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlYnVnKExPR19UQUckOSwgJ0Nhbm5vdCBhcHBseSBtdXRhdGlvbiBiYXRjaCB3aXRoIGlkOiAnICsgYmF0Y2hJZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEoYmF0Y2hTdGF0ZSA9PT0gJ3BlbmRpbmcnKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgM107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIHdlIGFyZSB0aGUgcHJpbWFyeSBjbGllbnQsIHdlIG5lZWQgdG8gc2VuZCB0aGlzIHdyaXRlIHRvIHRoZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBiYWNrZW5kLiBTZWNvbmRhcnkgY2xpZW50cyB3aWxsIGlnbm9yZSB0aGVzZSB3cml0ZXMgc2luY2UgdGhlaXIgcmVtb3RlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbm5lY3Rpb24gaXMgZGlzYWJsZWQuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMucmVtb3RlU3RvcmUuZmlsbFdyaXRlUGlwZWxpbmUoKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiB3ZSBhcmUgdGhlIHByaW1hcnkgY2xpZW50LCB3ZSBuZWVkIHRvIHNlbmQgdGhpcyB3cml0ZSB0byB0aGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYmFja2VuZC4gU2Vjb25kYXJ5IGNsaWVudHMgd2lsbCBpZ25vcmUgdGhlc2Ugd3JpdGVzIHNpbmNlIHRoZWlyIHJlbW90ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25uZWN0aW9uIGlzIGRpc2FibGVkLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDRdO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJhdGNoU3RhdGUgPT09ICdhY2tub3dsZWRnZWQnIHx8IGJhdGNoU3RhdGUgPT09ICdyZWplY3RlZCcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5PVEU6IEJvdGggdGhlc2UgbWV0aG9kcyBhcmUgbm8tb3BzIGZvciBiYXRjaGVzIHRoYXQgb3JpZ2luYXRlZCBmcm9tXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBvdGhlciBjbGllbnRzLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzVXNlckNhbGxiYWNrKGJhdGNoSWQsIGVycm9yID8gZXJyb3IgOiBudWxsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9jYWxTdG9yZS5yZW1vdmVDYWNoZWRNdXRhdGlvbkJhdGNoTWV0YWRhdGEoYmF0Y2hJZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmYWlsKFwiVW5rbm93biBiYXRjaFN0YXRlOiBcIiArIGJhdGNoU3RhdGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLmxhYmVsID0gNDtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6IHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuZW1pdE5ld1NuYXBzQW5kTm90aWZ5TG9jYWxTdG9yZShkb2N1bWVudHMpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBTeW5jRW5naW5lLnByb3RvdHlwZS5hcHBseVN1Y2Nlc3NmdWxXcml0ZSA9IGZ1bmN0aW9uIChtdXRhdGlvbkJhdGNoUmVzdWx0KSB7XHJcbiAgICAgICAgcmV0dXJuIHRzbGliLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgYmF0Y2hJZCwgY2hhbmdlcywgZXJyb3JfMjtcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hc3NlcnRTdWJzY3JpYmVkKCdhcHBseVN1Y2Nlc3NmdWxXcml0ZSgpJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhdGNoSWQgPSBtdXRhdGlvbkJhdGNoUmVzdWx0LmJhdGNoLmJhdGNoSWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoZSBsb2NhbCBzdG9yZSBtYXkgb3IgbWF5IG5vdCBiZSBhYmxlIHRvIGFwcGx5IHRoZSB3cml0ZSByZXN1bHQgYW5kXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJhaXNlIGV2ZW50cyBpbW1lZGlhdGVseSAoZGVwZW5kaW5nIG9uIHdoZXRoZXIgdGhlIHdhdGNoZXIgaXMgY2F1Z2h0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHVwKSwgc28gd2UgcmFpc2UgdXNlciBjYWxsYmFja3MgZmlyc3Qgc28gdGhhdCB0aGV5IGNvbnNpc3RlbnRseSBoYXBwZW5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYmVmb3JlIGxpc3RlbiBldmVudHMuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvY2Vzc1VzZXJDYWxsYmFjayhiYXRjaElkLCAvKmVycm9yPSovIG51bGwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXJQZW5kaW5nV3JpdGVzQ2FsbGJhY2tzKGJhdGNoSWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS50cnlzLnB1c2goWzEsIDQsICwgNl0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmxvY2FsU3RvcmUuYWNrbm93bGVkZ2VCYXRjaChtdXRhdGlvbkJhdGNoUmVzdWx0KV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VzID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNoYXJlZENsaWVudFN0YXRlLnVwZGF0ZU11dGF0aW9uU3RhdGUoYmF0Y2hJZCwgJ2Fja25vd2xlZGdlZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmVtaXROZXdTbmFwc0FuZE5vdGlmeUxvY2FsU3RvcmUoY2hhbmdlcyldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCA2XTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yXzIgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIGlnbm9yZUlmUHJpbWFyeUxlYXNlTG9zcyhlcnJvcl8yKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA1OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDZdO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNjogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBTeW5jRW5naW5lLnByb3RvdHlwZS5yZWplY3RGYWlsZWRXcml0ZSA9IGZ1bmN0aW9uIChiYXRjaElkLCBlcnJvcikge1xyXG4gICAgICAgIHJldHVybiB0c2xpYi5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGNoYW5nZXMsIGVycm9yXzM7XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYi5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYXNzZXJ0U3Vic2NyaWJlZCgncmVqZWN0RmFpbGVkV3JpdGUoKScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGUgbG9jYWwgc3RvcmUgbWF5IG9yIG1heSBub3QgYmUgYWJsZSB0byBhcHBseSB0aGUgd3JpdGUgcmVzdWx0IGFuZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyByYWlzZSBldmVudHMgaW1tZWRpYXRlbHkgKGRlcGVuZGluZyBvbiB3aGV0aGVyIHRoZSB3YXRjaGVyIGlzIGNhdWdodCB1cCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNvIHdlIHJhaXNlIHVzZXIgY2FsbGJhY2tzIGZpcnN0IHNvIHRoYXQgdGhleSBjb25zaXN0ZW50bHkgaGFwcGVuIGJlZm9yZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBsaXN0ZW4gZXZlbnRzLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3NVc2VyQ2FsbGJhY2soYmF0Y2hJZCwgZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXJQZW5kaW5nV3JpdGVzQ2FsbGJhY2tzKGJhdGNoSWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS50cnlzLnB1c2goWzEsIDQsICwgNl0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmxvY2FsU3RvcmUucmVqZWN0QmF0Y2goYmF0Y2hJZCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlcyA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaGFyZWRDbGllbnRTdGF0ZS51cGRhdGVNdXRhdGlvblN0YXRlKGJhdGNoSWQsICdyZWplY3RlZCcsIGVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5lbWl0TmV3U25hcHNBbmROb3RpZnlMb2NhbFN0b3JlKGNoYW5nZXMpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgNl07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcl8zID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBpZ25vcmVJZlByaW1hcnlMZWFzZUxvc3MoZXJyb3JfMyldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCA2XTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDY6IHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZWdpc3RlcnMgYSB1c2VyIGNhbGxiYWNrIHRoYXQgcmVzb2x2ZXMgd2hlbiBhbGwgcGVuZGluZyBtdXRhdGlvbnMgYXQgdGhlIG1vbWVudCBvZiBjYWxsaW5nXHJcbiAgICAgKiBhcmUgYWNrbm93bGVkZ2VkIC5cclxuICAgICAqL1xyXG4gICAgU3luY0VuZ2luZS5wcm90b3R5cGUucmVnaXN0ZXJQZW5kaW5nV3JpdGVzQ2FsbGJhY2sgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcclxuICAgICAgICByZXR1cm4gdHNsaWIuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBoaWdoZXN0QmF0Y2hJZCwgY2FsbGJhY2tzO1xyXG4gICAgICAgICAgICByZXR1cm4gdHNsaWIuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMucmVtb3RlU3RvcmUuY2FuVXNlTmV0d29yaygpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWJ1ZyhMT0dfVEFHJDksICdUaGUgbmV0d29yayBpcyBkaXNhYmxlZC4gVGhlIHRhc2sgcmV0dXJuZWQgYnkgJyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCInYXdhaXRQZW5kaW5nV3JpdGVzKCknIHdpbGwgbm90IGNvbXBsZXRlIHVudGlsIHRoZSBuZXR3b3JrIGlzIGVuYWJsZWQuXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMubG9jYWxTdG9yZS5nZXRIaWdoZXN0VW5hY2tub3dsZWRnZWRCYXRjaElkKCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGlnaGVzdEJhdGNoSWQgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChoaWdoZXN0QmF0Y2hJZCA9PT0gQkFUQ0hJRF9VTktOT1dOKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBUcmlnZ2VyIHRoZSBjYWxsYmFjayByaWdodCBhd2F5IGlmIHRoZXJlIGlzIG5vIHBlbmRpbmcgd3JpdGVzIGF0IHRoZSBtb21lbnQuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjay5yZXNvbHZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2tzID0gdGhpcy5wZW5kaW5nV3JpdGVzQ2FsbGJhY2tzLmdldChoaWdoZXN0QmF0Y2hJZCkgfHwgW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrcy5wdXNoKGNhbGxiYWNrKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wZW5kaW5nV3JpdGVzQ2FsbGJhY2tzLnNldChoaWdoZXN0QmF0Y2hJZCwgY2FsbGJhY2tzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFRyaWdnZXJzIHRoZSBjYWxsYmFja3MgdGhhdCBhcmUgd2FpdGluZyBmb3IgdGhpcyBiYXRjaCBpZCB0byBnZXQgYWNrbm93bGVkZ2VkIGJ5IHNlcnZlcixcclxuICAgICAqIGlmIHRoZXJlIGFyZSBhbnkuXHJcbiAgICAgKi9cclxuICAgIFN5bmNFbmdpbmUucHJvdG90eXBlLnRyaWdnZXJQZW5kaW5nV3JpdGVzQ2FsbGJhY2tzID0gZnVuY3Rpb24gKGJhdGNoSWQpIHtcclxuICAgICAgICAodGhpcy5wZW5kaW5nV3JpdGVzQ2FsbGJhY2tzLmdldChiYXRjaElkKSB8fCBbXSkuZm9yRWFjaChmdW5jdGlvbiAoY2FsbGJhY2spIHtcclxuICAgICAgICAgICAgY2FsbGJhY2sucmVzb2x2ZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMucGVuZGluZ1dyaXRlc0NhbGxiYWNrcy5kZWxldGUoYmF0Y2hJZCk7XHJcbiAgICB9O1xyXG4gICAgLyoqIFJlamVjdCBhbGwgb3V0c3RhbmRpbmcgY2FsbGJhY2tzIHdhaXRpbmcgZm9yIHBlbmRpbmcgd3JpdGVzIHRvIGNvbXBsZXRlLiAqL1xyXG4gICAgU3luY0VuZ2luZS5wcm90b3R5cGUucmVqZWN0T3V0c3RhbmRpbmdQZW5kaW5nV3JpdGVzQ2FsbGJhY2tzID0gZnVuY3Rpb24gKGVycm9yTWVzc2FnZSkge1xyXG4gICAgICAgIHRoaXMucGVuZGluZ1dyaXRlc0NhbGxiYWNrcy5mb3JFYWNoKGZ1bmN0aW9uIChjYWxsYmFja3MpIHtcclxuICAgICAgICAgICAgY2FsbGJhY2tzLmZvckVhY2goZnVuY3Rpb24gKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgICAgICBjYWxsYmFjay5yZWplY3QobmV3IEZpcmVzdG9yZUVycm9yKENvZGUuQ0FOQ0VMTEVELCBlcnJvck1lc3NhZ2UpKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5wZW5kaW5nV3JpdGVzQ2FsbGJhY2tzLmNsZWFyKCk7XHJcbiAgICB9O1xyXG4gICAgU3luY0VuZ2luZS5wcm90b3R5cGUuYWRkTXV0YXRpb25DYWxsYmFjayA9IGZ1bmN0aW9uIChiYXRjaElkLCBjYWxsYmFjaykge1xyXG4gICAgICAgIHZhciBuZXdDYWxsYmFja3MgPSB0aGlzLm11dGF0aW9uVXNlckNhbGxiYWNrc1t0aGlzLmN1cnJlbnRVc2VyLnRvS2V5KCldO1xyXG4gICAgICAgIGlmICghbmV3Q2FsbGJhY2tzKSB7XHJcbiAgICAgICAgICAgIG5ld0NhbGxiYWNrcyA9IG5ldyBTb3J0ZWRNYXAocHJpbWl0aXZlQ29tcGFyYXRvcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIG5ld0NhbGxiYWNrcyA9IG5ld0NhbGxiYWNrcy5pbnNlcnQoYmF0Y2hJZCwgY2FsbGJhY2spO1xyXG4gICAgICAgIHRoaXMubXV0YXRpb25Vc2VyQ2FsbGJhY2tzW3RoaXMuY3VycmVudFVzZXIudG9LZXkoKV0gPSBuZXdDYWxsYmFja3M7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZXNvbHZlcyBvciByZWplY3RzIHRoZSB1c2VyIGNhbGxiYWNrIGZvciB0aGUgZ2l2ZW4gYmF0Y2ggYW5kIHRoZW4gZGlzY2FyZHNcclxuICAgICAqIGl0LlxyXG4gICAgICovXHJcbiAgICBTeW5jRW5naW5lLnByb3RvdHlwZS5wcm9jZXNzVXNlckNhbGxiYWNrID0gZnVuY3Rpb24gKGJhdGNoSWQsIGVycm9yKSB7XHJcbiAgICAgICAgdmFyIG5ld0NhbGxiYWNrcyA9IHRoaXMubXV0YXRpb25Vc2VyQ2FsbGJhY2tzW3RoaXMuY3VycmVudFVzZXIudG9LZXkoKV07XHJcbiAgICAgICAgLy8gTk9URTogTXV0YXRpb25zIHJlc3RvcmVkIGZyb20gcGVyc2lzdGVuY2Ugd29uJ3QgaGF2ZSBjYWxsYmFja3MsIHNvIGl0J3NcclxuICAgICAgICAvLyBva2F5IGZvciB0aGVyZSB0byBiZSBubyBjYWxsYmFjayBmb3IgdGhpcyBJRC5cclxuICAgICAgICBpZiAobmV3Q2FsbGJhY2tzKSB7XHJcbiAgICAgICAgICAgIHZhciBjYWxsYmFjayA9IG5ld0NhbGxiYWNrcy5nZXQoYmF0Y2hJZCk7XHJcbiAgICAgICAgICAgIGlmIChjYWxsYmFjaykge1xyXG4gICAgICAgICAgICAgICAgYXNzZXJ0KGJhdGNoSWQgPT09IG5ld0NhbGxiYWNrcy5taW5LZXkoKSwgJ011dGF0aW9uIGNhbGxiYWNrcyBwcm9jZXNzZWQgb3V0LW9mLW9yZGVyPycpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2sucmVqZWN0KGVycm9yKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrLnJlc29sdmUoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIG5ld0NhbGxiYWNrcyA9IG5ld0NhbGxiYWNrcy5yZW1vdmUoYmF0Y2hJZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5tdXRhdGlvblVzZXJDYWxsYmFja3NbdGhpcy5jdXJyZW50VXNlci50b0tleSgpXSA9IG5ld0NhbGxiYWNrcztcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgU3luY0VuZ2luZS5wcm90b3R5cGUucmVtb3ZlQW5kQ2xlYW51cFRhcmdldCA9IGZ1bmN0aW9uICh0YXJnZXRJZCwgZXJyb3IpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIGlmIChlcnJvciA9PT0gdm9pZCAwKSB7IGVycm9yID0gbnVsbDsgfVxyXG4gICAgICAgIHRoaXMuc2hhcmVkQ2xpZW50U3RhdGUucmVtb3ZlTG9jYWxRdWVyeVRhcmdldCh0YXJnZXRJZCk7XHJcbiAgICAgICAgYXNzZXJ0KHRoaXMucXVlcmllc0J5VGFyZ2V0W3RhcmdldElkXSAmJlxyXG4gICAgICAgICAgICB0aGlzLnF1ZXJpZXNCeVRhcmdldFt0YXJnZXRJZF0ubGVuZ3RoICE9PSAwLCBcIlRoZXJlIGFyZSBubyBxdWVyaWVzIG1hcHBlZCB0byB0YXJnZXQgaWQgXCIgKyB0YXJnZXRJZCk7XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHRoaXMucXVlcmllc0J5VGFyZ2V0W3RhcmdldElkXTsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgdmFyIHF1ZXJ5ID0gX2FbX2ldO1xyXG4gICAgICAgICAgICB0aGlzLnF1ZXJ5Vmlld3NCeVF1ZXJ5LmRlbGV0ZShxdWVyeSk7XHJcbiAgICAgICAgICAgIGlmIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zeW5jRW5naW5lTGlzdGVuZXIub25XYXRjaEVycm9yKHF1ZXJ5LCBlcnJvcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZGVsZXRlIHRoaXMucXVlcmllc0J5VGFyZ2V0W3RhcmdldElkXTtcclxuICAgICAgICBpZiAodGhpcy5pc1ByaW1hcnkpIHtcclxuICAgICAgICAgICAgdmFyIGxpbWJvS2V5cyA9IHRoaXMubGltYm9Eb2N1bWVudFJlZnMucmVmZXJlbmNlc0ZvcklkKHRhcmdldElkKTtcclxuICAgICAgICAgICAgdGhpcy5saW1ib0RvY3VtZW50UmVmcy5yZW1vdmVSZWZlcmVuY2VzRm9ySWQodGFyZ2V0SWQpO1xyXG4gICAgICAgICAgICBsaW1ib0tleXMuZm9yRWFjaChmdW5jdGlvbiAobGltYm9LZXkpIHtcclxuICAgICAgICAgICAgICAgIHZhciBpc1JlZmVyZW5jZWQgPSBfdGhpcy5saW1ib0RvY3VtZW50UmVmcy5jb250YWluc0tleShsaW1ib0tleSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWlzUmVmZXJlbmNlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFdlIHJlbW92ZWQgdGhlIGxhc3QgcmVmZXJlbmNlIGZvciB0aGlzIGtleVxyXG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnJlbW92ZUxpbWJvVGFyZ2V0KGxpbWJvS2V5KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFN5bmNFbmdpbmUucHJvdG90eXBlLnJlbW92ZUxpbWJvVGFyZ2V0ID0gZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgIC8vIEl0J3MgcG9zc2libGUgdGhhdCB0aGUgdGFyZ2V0IGFscmVhZHkgZ290IHJlbW92ZWQgYmVjYXVzZSB0aGUgcXVlcnkgZmFpbGVkLiBJbiB0aGF0IGNhc2UsXHJcbiAgICAgICAgLy8gdGhlIGtleSB3b24ndCBleGlzdCBpbiBgbGltYm9UYXJnZXRzQnlLZXlgLiBPbmx5IGRvIHRoZSBjbGVhbnVwIGlmIHdlIHN0aWxsIGhhdmUgdGhlIHRhcmdldC5cclxuICAgICAgICB2YXIgbGltYm9UYXJnZXRJZCA9IHRoaXMubGltYm9UYXJnZXRzQnlLZXkuZ2V0KGtleSk7XHJcbiAgICAgICAgaWYgKGxpbWJvVGFyZ2V0SWQgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgLy8gVGhpcyB0YXJnZXQgYWxyZWFkeSBnb3QgcmVtb3ZlZCwgYmVjYXVzZSB0aGUgcXVlcnkgZmFpbGVkLlxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMucmVtb3RlU3RvcmUudW5saXN0ZW4obGltYm9UYXJnZXRJZCk7XHJcbiAgICAgICAgdGhpcy5saW1ib1RhcmdldHNCeUtleSA9IHRoaXMubGltYm9UYXJnZXRzQnlLZXkucmVtb3ZlKGtleSk7XHJcbiAgICAgICAgZGVsZXRlIHRoaXMubGltYm9SZXNvbHV0aW9uc0J5VGFyZ2V0W2xpbWJvVGFyZ2V0SWRdO1xyXG4gICAgfTtcclxuICAgIFN5bmNFbmdpbmUucHJvdG90eXBlLnVwZGF0ZVRyYWNrZWRMaW1ib3MgPSBmdW5jdGlvbiAodGFyZ2V0SWQsIGxpbWJvQ2hhbmdlcykge1xyXG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgbGltYm9DaGFuZ2VzXzEgPSBsaW1ib0NoYW5nZXM7IF9pIDwgbGltYm9DaGFuZ2VzXzEubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBsaW1ib0NoYW5nZSA9IGxpbWJvQ2hhbmdlc18xW19pXTtcclxuICAgICAgICAgICAgaWYgKGxpbWJvQ2hhbmdlIGluc3RhbmNlb2YgQWRkZWRMaW1ib0RvY3VtZW50KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxpbWJvRG9jdW1lbnRSZWZzLmFkZFJlZmVyZW5jZShsaW1ib0NoYW5nZS5rZXksIHRhcmdldElkKTtcclxuICAgICAgICAgICAgICAgIHRoaXMudHJhY2tMaW1ib0NoYW5nZShsaW1ib0NoYW5nZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAobGltYm9DaGFuZ2UgaW5zdGFuY2VvZiBSZW1vdmVkTGltYm9Eb2N1bWVudCkge1xyXG4gICAgICAgICAgICAgICAgZGVidWcoTE9HX1RBRyQ5LCAnRG9jdW1lbnQgbm8gbG9uZ2VyIGluIGxpbWJvOiAnICsgbGltYm9DaGFuZ2Uua2V5KTtcclxuICAgICAgICAgICAgICAgIHRoaXMubGltYm9Eb2N1bWVudFJlZnMucmVtb3ZlUmVmZXJlbmNlKGxpbWJvQ2hhbmdlLmtleSwgdGFyZ2V0SWQpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGlzUmVmZXJlbmNlZCA9IHRoaXMubGltYm9Eb2N1bWVudFJlZnMuY29udGFpbnNLZXkobGltYm9DaGFuZ2Uua2V5KTtcclxuICAgICAgICAgICAgICAgIGlmICghaXNSZWZlcmVuY2VkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gV2UgcmVtb3ZlZCB0aGUgbGFzdCByZWZlcmVuY2UgZm9yIHRoaXMga2V5XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVMaW1ib1RhcmdldChsaW1ib0NoYW5nZS5rZXkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZmFpbCgnVW5rbm93biBsaW1ibyBjaGFuZ2U6ICcgKyBKU09OLnN0cmluZ2lmeShsaW1ib0NoYW5nZSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFN5bmNFbmdpbmUucHJvdG90eXBlLnRyYWNrTGltYm9DaGFuZ2UgPSBmdW5jdGlvbiAobGltYm9DaGFuZ2UpIHtcclxuICAgICAgICB2YXIga2V5ID0gbGltYm9DaGFuZ2Uua2V5O1xyXG4gICAgICAgIGlmICghdGhpcy5saW1ib1RhcmdldHNCeUtleS5nZXQoa2V5KSkge1xyXG4gICAgICAgICAgICBkZWJ1ZyhMT0dfVEFHJDksICdOZXcgZG9jdW1lbnQgaW4gbGltYm86ICcgKyBrZXkpO1xyXG4gICAgICAgICAgICB2YXIgbGltYm9UYXJnZXRJZCA9IHRoaXMubGltYm9UYXJnZXRJZEdlbmVyYXRvci5uZXh0KCk7XHJcbiAgICAgICAgICAgIHZhciBxdWVyeSA9IFF1ZXJ5LmF0UGF0aChrZXkucGF0aCk7XHJcbiAgICAgICAgICAgIHRoaXMubGltYm9SZXNvbHV0aW9uc0J5VGFyZ2V0W2xpbWJvVGFyZ2V0SWRdID0gbmV3IExpbWJvUmVzb2x1dGlvbihrZXkpO1xyXG4gICAgICAgICAgICB0aGlzLnJlbW90ZVN0b3JlLmxpc3RlbihuZXcgVGFyZ2V0RGF0YShxdWVyeS50b1RhcmdldCgpLCBsaW1ib1RhcmdldElkLCBUYXJnZXRQdXJwb3NlLkxpbWJvUmVzb2x1dGlvbiwgTGlzdGVuU2VxdWVuY2UuSU5WQUxJRCkpO1xyXG4gICAgICAgICAgICB0aGlzLmxpbWJvVGFyZ2V0c0J5S2V5ID0gdGhpcy5saW1ib1RhcmdldHNCeUtleS5pbnNlcnQoa2V5LCBsaW1ib1RhcmdldElkKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLy8gVmlzaWJsZSBmb3IgdGVzdGluZ1xyXG4gICAgU3luY0VuZ2luZS5wcm90b3R5cGUuY3VycmVudExpbWJvRG9jcyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5saW1ib1RhcmdldHNCeUtleTtcclxuICAgIH07XHJcbiAgICBTeW5jRW5naW5lLnByb3RvdHlwZS5lbWl0TmV3U25hcHNBbmROb3RpZnlMb2NhbFN0b3JlID0gZnVuY3Rpb24gKGNoYW5nZXMsIHJlbW90ZUV2ZW50KSB7XHJcbiAgICAgICAgcmV0dXJuIHRzbGliLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgbmV3U25hcHMsIGRvY0NoYW5nZXNJbkFsbFZpZXdzLCBxdWVyaWVzUHJvY2Vzc2VkO1xyXG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgICAgICByZXR1cm4gdHNsaWIuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdTbmFwcyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkb2NDaGFuZ2VzSW5BbGxWaWV3cyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBxdWVyaWVzUHJvY2Vzc2VkID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucXVlcnlWaWV3c0J5UXVlcnkuZm9yRWFjaChmdW5jdGlvbiAoXywgcXVlcnlWaWV3KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdWVyaWVzUHJvY2Vzc2VkLnB1c2goUHJvbWlzZS5yZXNvbHZlKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZpZXdEb2NDaGFuZ2VzID0gcXVlcnlWaWV3LnZpZXcuY29tcHV0ZURvY0NoYW5nZXMoY2hhbmdlcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF2aWV3RG9jQ2hhbmdlcy5uZWVkc1JlZmlsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdmlld0RvY0NoYW5nZXM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoZSBxdWVyeSBoYXMgYSBsaW1pdCBhbmQgc29tZSBkb2NzIHdlcmUgcmVtb3ZlZCwgc28gd2UgbmVlZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRvIHJlLXJ1biB0aGUgcXVlcnkgYWdhaW5zdCB0aGUgbG9jYWwgc3RvcmUgdG8gbWFrZSBzdXJlIHdlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZGlkbid0IGxvc2UgYW55IGdvb2QgZG9jcyB0aGF0IGhhZCBiZWVuIHBhc3QgdGhlIGxpbWl0LlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5sb2NhbFN0b3JlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5leGVjdXRlUXVlcnkocXVlcnlWaWV3LnF1ZXJ5LCAvKiB1c2VQcmV2aW91c1Jlc3VsdHM9ICovIGZhbHNlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRvY3VtZW50cyA9IF9hLmRvY3VtZW50cztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHF1ZXJ5Vmlldy52aWV3LmNvbXB1dGVEb2NDaGFuZ2VzKGRvY3VtZW50cywgdmlld0RvY0NoYW5nZXMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAodmlld0RvY0NoYW5nZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0Q2hhbmdlID0gcmVtb3RlRXZlbnQgJiYgcmVtb3RlRXZlbnQudGFyZ2V0Q2hhbmdlc1txdWVyeVZpZXcudGFyZ2V0SWRdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2aWV3Q2hhbmdlID0gcXVlcnlWaWV3LnZpZXcuYXBwbHlDaGFuZ2VzKHZpZXdEb2NDaGFuZ2VzLCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiB1cGRhdGVMaW1ib0RvY3VtZW50cz0gKi8gX3RoaXMuaXNQcmltYXJ5ID09PSB0cnVlLCB0YXJnZXRDaGFuZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnVwZGF0ZVRyYWNrZWRMaW1ib3MocXVlcnlWaWV3LnRhcmdldElkLCB2aWV3Q2hhbmdlLmxpbWJvQ2hhbmdlcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZpZXdDaGFuZ2Uuc25hcHNob3QpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLmlzUHJpbWFyeSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuc2hhcmVkQ2xpZW50U3RhdGUudXBkYXRlUXVlcnlTdGF0ZShxdWVyeVZpZXcudGFyZ2V0SWQsIHZpZXdDaGFuZ2Uuc25hcHNob3QuZnJvbUNhY2hlID8gJ25vdC1jdXJyZW50JyA6ICdjdXJyZW50Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3U25hcHMucHVzaCh2aWV3Q2hhbmdlLnNuYXBzaG90KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRvY0NoYW5nZXMgPSBMb2NhbFZpZXdDaGFuZ2VzLmZyb21TbmFwc2hvdChxdWVyeVZpZXcudGFyZ2V0SWQsIHZpZXdDaGFuZ2Uuc25hcHNob3QpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2NDaGFuZ2VzSW5BbGxWaWV3cy5wdXNoKGRvY0NoYW5nZXMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIFByb21pc2UuYWxsKHF1ZXJpZXNQcm9jZXNzZWQpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zeW5jRW5naW5lTGlzdGVuZXIub25XYXRjaENoYW5nZShuZXdTbmFwcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMubG9jYWxTdG9yZS5ub3RpZnlMb2NhbFZpZXdDaGFuZ2VzKGRvY0NoYW5nZXNJbkFsbFZpZXdzKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgU3luY0VuZ2luZS5wcm90b3R5cGUuYXNzZXJ0U3Vic2NyaWJlZCA9IGZ1bmN0aW9uIChmbk5hbWUpIHtcclxuICAgICAgICBhc3NlcnQodGhpcy5zeW5jRW5naW5lTGlzdGVuZXIgIT09IG51bGwsICdUcnlpbmcgdG8gY2FsbCAnICsgZm5OYW1lICsgJyBiZWZvcmUgY2FsbGluZyBzdWJzY3JpYmUoKS4nKTtcclxuICAgIH07XHJcbiAgICBTeW5jRW5naW5lLnByb3RvdHlwZS5oYW5kbGVDcmVkZW50aWFsQ2hhbmdlID0gZnVuY3Rpb24gKHVzZXIpIHtcclxuICAgICAgICByZXR1cm4gdHNsaWIuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciB1c2VyQ2hhbmdlZCwgcmVzdWx0O1xyXG4gICAgICAgICAgICByZXR1cm4gdHNsaWIuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB1c2VyQ2hhbmdlZCA9ICF0aGlzLmN1cnJlbnRVc2VyLmlzRXF1YWwodXNlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudFVzZXIgPSB1c2VyO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXVzZXJDaGFuZ2VkKSByZXR1cm4gWzMgLypicmVhayovLCAzXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRmFpbHMgdGFza3Mgd2FpdGluZyBmb3IgcGVuZGluZyB3cml0ZXMgcmVxdWVzdGVkIGJ5IHByZXZpb3VzIHVzZXIuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVqZWN0T3V0c3RhbmRpbmdQZW5kaW5nV3JpdGVzQ2FsbGJhY2tzKFwiJ3dhaXRGb3JQZW5kaW5nV3JpdGVzJyBwcm9taXNlIGlzIHJlamVjdGVkIGR1ZSB0byBhIHVzZXIgY2hhbmdlLlwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5sb2NhbFN0b3JlLmhhbmRsZVVzZXJDaGFuZ2UodXNlcildO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUT0RPKGIvMTE0MjI2NDE3KTogQ29uc2lkZXIgY2FsbGluZyB0aGlzIG9ubHkgaW4gdGhlIHByaW1hcnkgdGFiLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNoYXJlZENsaWVudFN0YXRlLmhhbmRsZVVzZXJDaGFuZ2UodXNlciwgcmVzdWx0LnJlbW92ZWRCYXRjaElkcywgcmVzdWx0LmFkZGVkQmF0Y2hJZHMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmVtaXROZXdTbmFwc0FuZE5vdGlmeUxvY2FsU3RvcmUocmVzdWx0LmFmZmVjdGVkRG9jdW1lbnRzKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLmxhYmVsID0gMztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6IHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMucmVtb3RlU3RvcmUuaGFuZGxlQ3JlZGVudGlhbENoYW5nZSgpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLXRhYiBvbmx5XHJcbiAgICBTeW5jRW5naW5lLnByb3RvdHlwZS5hcHBseVByaW1hcnlTdGF0ZSA9IGZ1bmN0aW9uIChpc1ByaW1hcnkpIHtcclxuICAgICAgICByZXR1cm4gdHNsaWIuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBhY3RpdmVUYXJnZXRzLCBhY3RpdmVRdWVyaWVzLCBfaSwgYWN0aXZlUXVlcmllc18xLCB0YXJnZXREYXRhLCBhY3RpdmVUYXJnZXRzXzEsIHBfMTtcclxuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEoaXNQcmltYXJ5ID09PSB0cnVlICYmIHRoaXMuaXNQcmltYXJ5ICE9PSB0cnVlKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgM107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaXNQcmltYXJ5ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5yZW1vdGVTdG9yZS5hcHBseVByaW1hcnlTdGF0ZSh0cnVlKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZVRhcmdldHMgPSB0aGlzLnNoYXJlZENsaWVudFN0YXRlLmdldEFsbEFjdGl2ZVF1ZXJ5VGFyZ2V0cygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLnN5bmNocm9uaXplUXVlcnlWaWV3c0FuZFJhaXNlU25hcHNob3RzKGFjdGl2ZVRhcmdldHMudG9BcnJheSgpKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmVRdWVyaWVzID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKF9pID0gMCwgYWN0aXZlUXVlcmllc18xID0gYWN0aXZlUXVlcmllczsgX2kgPCBhY3RpdmVRdWVyaWVzXzEubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXREYXRhID0gYWN0aXZlUXVlcmllc18xW19pXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3RlU3RvcmUubGlzdGVuKHRhcmdldERhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDddO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEoaXNQcmltYXJ5ID09PSBmYWxzZSAmJiB0aGlzLmlzUHJpbWFyeSAhPT0gZmFsc2UpKSByZXR1cm4gWzMgLypicmVhayovLCA3XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pc1ByaW1hcnkgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlVGFyZ2V0c18xID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBfMSA9IFByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JFYWNoTnVtYmVyKHRoaXMucXVlcmllc0J5VGFyZ2V0LCBmdW5jdGlvbiAodGFyZ2V0SWQsIF8pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfdGhpcy5zaGFyZWRDbGllbnRTdGF0ZS5pc0xvY2FsUXVlcnlUYXJnZXQodGFyZ2V0SWQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlVGFyZ2V0c18xLnB1c2godGFyZ2V0SWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcF8xID0gcF8xLnRoZW4oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5yZW1vdmVBbmRDbGVhbnVwVGFyZ2V0KHRhcmdldElkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLmxvY2FsU3RvcmUucmVsZWFzZVRhcmdldCh0YXJnZXRJZCwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qa2VlcFBlcnNpc3RlZFRhcmdldERhdGE9Ki8gdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5yZW1vdGVTdG9yZS51bmxpc3Rlbih0YXJnZXRJZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBwXzFdO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLnN5bmNocm9uaXplUXVlcnlWaWV3c0FuZFJhaXNlU25hcHNob3RzKGFjdGl2ZVRhcmdldHNfMSldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlc2V0TGltYm9Eb2N1bWVudHMoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5yZW1vdGVTdG9yZS5hcHBseVByaW1hcnlTdGF0ZShmYWxzZSldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDc7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA3OiByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktdGFiIG9ubHkuXHJcbiAgICBTeW5jRW5naW5lLnByb3RvdHlwZS5yZXNldExpbWJvRG9jdW1lbnRzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgZm9yRWFjaE51bWJlcih0aGlzLmxpbWJvUmVzb2x1dGlvbnNCeVRhcmdldCwgZnVuY3Rpb24gKHRhcmdldElkKSB7XHJcbiAgICAgICAgICAgIF90aGlzLnJlbW90ZVN0b3JlLnVubGlzdGVuKHRhcmdldElkKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmxpbWJvRG9jdW1lbnRSZWZzLnJlbW92ZUFsbFJlZmVyZW5jZXMoKTtcclxuICAgICAgICB0aGlzLmxpbWJvUmVzb2x1dGlvbnNCeVRhcmdldCA9IFtdO1xyXG4gICAgICAgIHRoaXMubGltYm9UYXJnZXRzQnlLZXkgPSBuZXcgU29ydGVkTWFwKERvY3VtZW50S2V5LmNvbXBhcmF0b3IpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmVjb25jaWxlIHRoZSBxdWVyeSB2aWV3cyBvZiB0aGUgcHJvdmlkZWQgcXVlcnkgdGFyZ2V0cyB3aXRoIHRoZSBzdGF0ZSBmcm9tXHJcbiAgICAgKiBwZXJzaXN0ZW5jZS4gUmFpc2VzIHNuYXBzaG90cyBmb3IgYW55IGNoYW5nZXMgdGhhdCBhZmZlY3QgdGhlIGxvY2FsXHJcbiAgICAgKiBjbGllbnQgYW5kIHJldHVybnMgdGhlIHVwZGF0ZWQgc3RhdGUgb2YgYWxsIHRhcmdldCdzIHF1ZXJ5IGRhdGEuXHJcbiAgICAgKi9cclxuICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktdGFiIG9ubHkuXHJcbiAgICBTeW5jRW5naW5lLnByb3RvdHlwZS5zeW5jaHJvbml6ZVF1ZXJ5Vmlld3NBbmRSYWlzZVNuYXBzaG90cyA9IGZ1bmN0aW9uICh0YXJnZXRzKSB7XHJcbiAgICAgICAgcmV0dXJuIHRzbGliLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgYWN0aXZlUXVlcmllcywgbmV3Vmlld1NuYXBzaG90cywgX2ksIHRhcmdldHNfMSwgdGFyZ2V0SWQsIHRhcmdldERhdGEsIHF1ZXJpZXMsIF9hLCBxdWVyaWVzXzEsIHF1ZXJ5LCBxdWVyeVZpZXcsIHZpZXdDaGFuZ2UsIHRhcmdldDtcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYikge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYi5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlUXVlcmllcyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdWaWV3U25hcHNob3RzID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9pID0gMCwgdGFyZ2V0c18xID0gdGFyZ2V0cztcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2IubGFiZWwgPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEoX2kgPCB0YXJnZXRzXzEubGVuZ3RoKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgMTRdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRJZCA9IHRhcmdldHNfMVtfaV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldERhdGEgPSB2b2lkIDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJpZXMgPSB0aGlzLnF1ZXJpZXNCeVRhcmdldFt0YXJnZXRJZF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKHF1ZXJpZXMgJiYgcXVlcmllcy5sZW5ndGggIT09IDApKSByZXR1cm4gWzMgLypicmVhayovLCA4XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRm9yIHF1ZXJpZXMgdGhhdCBoYXZlIGEgbG9jYWwgVmlldywgd2UgbmVlZCB0byB1cGRhdGUgdGhlaXIgc3RhdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gaW4gTG9jYWxTdG9yZSAoYXMgdGhlIHJlc3VtZSB0b2tlbiBhbmQgdGhlIHNuYXBzaG90IHZlcnNpb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gbWlnaHQgaGF2ZSBjaGFuZ2VkKSBhbmQgcmVjb25jaWxlIHRoZWlyIHZpZXdzIHdpdGggdGhlIHBlcnNpc3RlZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBzdGF0ZSAodGhlIGxpc3Qgb2Ygc3luY2VkRG9jdW1lbnRzIG1heSBoYXZlIGdvdHRlbiBvdXQgb2Ygc3luYykuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMubG9jYWxTdG9yZS5yZWxlYXNlVGFyZ2V0KHRhcmdldElkLCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qa2VlcFBlcnNpc3RlZFRhcmdldERhdGE9Ki8gdHJ1ZSldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRm9yIHF1ZXJpZXMgdGhhdCBoYXZlIGEgbG9jYWwgVmlldywgd2UgbmVlZCB0byB1cGRhdGUgdGhlaXIgc3RhdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gaW4gTG9jYWxTdG9yZSAoYXMgdGhlIHJlc3VtZSB0b2tlbiBhbmQgdGhlIHNuYXBzaG90IHZlcnNpb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gbWlnaHQgaGF2ZSBjaGFuZ2VkKSBhbmQgcmVjb25jaWxlIHRoZWlyIHZpZXdzIHdpdGggdGhlIHBlcnNpc3RlZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBzdGF0ZSAodGhlIGxpc3Qgb2Ygc3luY2VkRG9jdW1lbnRzIG1heSBoYXZlIGdvdHRlbiBvdXQgb2Ygc3luYykuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9iLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5sb2NhbFN0b3JlLmFsbG9jYXRlVGFyZ2V0KHF1ZXJpZXNbMF0udG9UYXJnZXQoKSldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0RGF0YSA9IF9iLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2EgPSAwLCBxdWVyaWVzXzEgPSBxdWVyaWVzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYi5sYWJlbCA9IDQ7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShfYSA8IHF1ZXJpZXNfMS5sZW5ndGgpKSByZXR1cm4gWzMgLypicmVhayovLCA3XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcXVlcnkgPSBxdWVyaWVzXzFbX2FdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBxdWVyeVZpZXcgPSB0aGlzLnF1ZXJ5Vmlld3NCeVF1ZXJ5LmdldChxdWVyeSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFzc2VydCghIXF1ZXJ5VmlldywgXCJObyBxdWVyeSB2aWV3IGZvdW5kIGZvciBcIiArIHF1ZXJ5KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5zeW5jaHJvbml6ZVZpZXdBbmRDb21wdXRlU25hcHNob3QocXVlcnlWaWV3KV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA1OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2aWV3Q2hhbmdlID0gX2Iuc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodmlld0NoYW5nZS5zbmFwc2hvdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3Vmlld1NuYXBzaG90cy5wdXNoKHZpZXdDaGFuZ2Uuc25hcHNob3QpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9iLmxhYmVsID0gNjtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDY6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hKys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDRdO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNzogcmV0dXJuIFszIC8qYnJlYWsqLywgMTJdO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgODpcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXJ0KHRoaXMuaXNQcmltYXJ5ID09PSB0cnVlLCAnQSBzZWNvbmRhcnkgdGFiIHNob3VsZCBuZXZlciBoYXZlIGFuIGFjdGl2ZSB0YXJnZXQgd2l0aG91dCBhbiBhY3RpdmUgcXVlcnkuJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMubG9jYWxTdG9yZS5nZXRUYXJnZXQodGFyZ2V0SWQpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDk6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldCA9IF9iLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXJ0KCEhdGFyZ2V0LCBcIlRhcmdldCBmb3IgaWQgXCIgKyB0YXJnZXRJZCArIFwiIG5vdCBmb3VuZFwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5sb2NhbFN0b3JlLmFsbG9jYXRlVGFyZ2V0KHRhcmdldCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldERhdGEgPSBfYi5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuaW5pdGlhbGl6ZVZpZXdBbmRDb21wdXRlU25hcHNob3QodGhpcy5zeW50aGVzaXplVGFyZ2V0VG9RdWVyeSh0YXJnZXQpLCB0YXJnZXRJZCwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKmN1cnJlbnQ9Ki8gZmFsc2UpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDExOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYi5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9iLmxhYmVsID0gMTI7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxMjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlUXVlcmllcy5wdXNoKHRhcmdldERhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYi5sYWJlbCA9IDEzO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTM6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9pKys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDFdO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3luY0VuZ2luZUxpc3RlbmVyLm9uV2F0Y2hDaGFuZ2UobmV3Vmlld1NuYXBzaG90cyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBhY3RpdmVRdWVyaWVzXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGVzIGEgYFF1ZXJ5YCBvYmplY3QgZnJvbSB0aGUgc3BlY2lmaWVkIGBUYXJnZXRgLiBUaGVyZSBpcyBubyB3YXkgdG9cclxuICAgICAqIG9idGFpbiB0aGUgb3JpZ2luYWwgYFF1ZXJ5YCwgc28gd2Ugc3ludGhlc2l6ZSBhIGBRdWVyeWAgZnJvbSB0aGUgYFRhcmdldGBcclxuICAgICAqIG9iamVjdC5cclxuICAgICAqXHJcbiAgICAgKiBUaGUgc3ludGhlc2l6ZWQgcmVzdWx0IG1pZ2h0IGJlIGRpZmZlcmVudCBmcm9tIHRoZSBvcmlnaW5hbCBgUXVlcnlgLCBidXRcclxuICAgICAqIHNpbmNlIHRoZSBzeW50aGVzaXplZCBgUXVlcnlgIHNob3VsZCByZXR1cm4gdGhlIHNhbWUgcmVzdWx0cyBhcyB0aGVcclxuICAgICAqIG9yaWdpbmFsIG9uZSAob25seSB0aGUgcHJlc2VudGF0aW9uIG9mIHJlc3VsdHMgbWlnaHQgZGlmZmVyKSwgdGhlIHBvdGVudGlhbFxyXG4gICAgICogZGlmZmVyZW5jZSB3aWxsIG5vdCBjYXVzZSBpc3N1ZXMuXHJcbiAgICAgKi9cclxuICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktdGFiIG9ubHlcclxuICAgIFN5bmNFbmdpbmUucHJvdG90eXBlLnN5bnRoZXNpemVUYXJnZXRUb1F1ZXJ5ID0gZnVuY3Rpb24gKHRhcmdldCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgUXVlcnkodGFyZ2V0LnBhdGgsIHRhcmdldC5jb2xsZWN0aW9uR3JvdXAsIHRhcmdldC5vcmRlckJ5LCB0YXJnZXQuZmlsdGVycywgdGFyZ2V0LmxpbWl0LCBMaW1pdFR5cGUuRmlyc3QsIHRhcmdldC5zdGFydEF0LCB0YXJnZXQuZW5kQXQpO1xyXG4gICAgfTtcclxuICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktdGFiIG9ubHlcclxuICAgIFN5bmNFbmdpbmUucHJvdG90eXBlLmdldEFjdGl2ZUNsaWVudHMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubG9jYWxTdG9yZS5nZXRBY3RpdmVDbGllbnRzKCk7XHJcbiAgICB9O1xyXG4gICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS10YWIgb25seVxyXG4gICAgU3luY0VuZ2luZS5wcm90b3R5cGUuYXBwbHlUYXJnZXRTdGF0ZSA9IGZ1bmN0aW9uICh0YXJnZXRJZCwgc3RhdGUsIGVycm9yKSB7XHJcbiAgICAgICAgcmV0dXJuIHRzbGliLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgX2EsIGNoYW5nZXMsIHN5bnRoZXNpemVkUmVtb3RlRXZlbnQ7XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYi5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2IpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2IubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzUHJpbWFyeSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgd2UgcmVjZWl2ZSBhIHRhcmdldCBzdGF0ZSBub3RpZmljYXRpb24gdmlhIFdlYlN0b3JhZ2UsIHdlIGFyZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZWl0aGVyIGFscmVhZHkgc2Vjb25kYXJ5IG9yIGFub3RoZXIgdGFiIGhhcyB0YWtlbiB0aGUgcHJpbWFyeSBsZWFzZS5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlYnVnKExPR19UQUckOSwgJ0lnbm9yaW5nIHVuZXhwZWN0ZWQgcXVlcnkgc3RhdGUgbm90aWZpY2F0aW9uLicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5xdWVyaWVzQnlUYXJnZXRbdGFyZ2V0SWRdKSByZXR1cm4gWzMgLypicmVhayovLCA3XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2EgPSBzdGF0ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfYSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnY3VycmVudCc6IHJldHVybiBbMyAvKmJyZWFrKi8sIDFdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnbm90LWN1cnJlbnQnOiByZXR1cm4gWzMgLypicmVhayovLCAxXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3JlamVjdGVkJzogcmV0dXJuIFszIC8qYnJlYWsqLywgNF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgNl07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOiByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmxvY2FsU3RvcmUuZ2V0TmV3RG9jdW1lbnRDaGFuZ2VzKCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlcyA9IF9iLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3ludGhlc2l6ZWRSZW1vdGVFdmVudCA9IFJlbW90ZUV2ZW50LmNyZWF0ZVN5bnRoZXNpemVkUmVtb3RlRXZlbnRGb3JDdXJyZW50Q2hhbmdlKHRhcmdldElkLCBzdGF0ZSA9PT0gJ2N1cnJlbnQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5lbWl0TmV3U25hcHNBbmROb3RpZnlMb2NhbFN0b3JlKGNoYW5nZXMsIHN5bnRoZXNpemVkUmVtb3RlRXZlbnQpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9iLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgN107XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OiByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmxvY2FsU3RvcmUucmVsZWFzZVRhcmdldCh0YXJnZXRJZCwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIGtlZXBQZXJzaXN0ZWRUYXJnZXREYXRhICovIHRydWUpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9iLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVBbmRDbGVhbnVwVGFyZ2V0KHRhcmdldElkLCBlcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDddO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmFpbCgnVW5leHBlY3RlZCB0YXJnZXQgc3RhdGU6ICcgKyBzdGF0ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9iLmxhYmVsID0gNztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDc6IHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS10YWIgb25seVxyXG4gICAgU3luY0VuZ2luZS5wcm90b3R5cGUuYXBwbHlBY3RpdmVUYXJnZXRzQ2hhbmdlID0gZnVuY3Rpb24gKGFkZGVkLCByZW1vdmVkKSB7XHJcbiAgICAgICAgcmV0dXJuIHRzbGliLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgX2ksIGFkZGVkXzEsIHRhcmdldElkLCB0YXJnZXQsIHRhcmdldERhdGEsIF9sb29wXzEsIHRoaXNfMSwgX2EsIHJlbW92ZWRfMSwgdGFyZ2V0SWQ7XHJcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYi5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2IpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2IubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5pc1ByaW1hcnkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfaSA9IDAsIGFkZGVkXzEgPSBhZGRlZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2IubGFiZWwgPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEoX2kgPCBhZGRlZF8xLmxlbmd0aCkpIHJldHVybiBbMyAvKmJyZWFrKi8sIDZdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRJZCA9IGFkZGVkXzFbX2ldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhc3NlcnQoIXRoaXMucXVlcmllc0J5VGFyZ2V0W3RhcmdldElkXSwgJ1RyeWluZyB0byBhZGQgYW4gYWxyZWFkeSBhY3RpdmUgdGFyZ2V0Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMubG9jYWxTdG9yZS5nZXRUYXJnZXQodGFyZ2V0SWQpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldCA9IF9iLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXJ0KCEhdGFyZ2V0LCBcIlF1ZXJ5IGRhdGEgZm9yIGFjdGl2ZSB0YXJnZXQgXCIgKyB0YXJnZXRJZCArIFwiIG5vdCBmb3VuZFwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5sb2NhbFN0b3JlLmFsbG9jYXRlVGFyZ2V0KHRhcmdldCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0RGF0YSA9IF9iLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5pbml0aWFsaXplVmlld0FuZENvbXB1dGVTbmFwc2hvdCh0aGlzLnN5bnRoZXNpemVUYXJnZXRUb1F1ZXJ5KHRhcmdldCksIHRhcmdldERhdGEudGFyZ2V0SWQsIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLypjdXJyZW50PSovIGZhbHNlKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYi5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3RlU3RvcmUubGlzdGVuKHRhcmdldERhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYi5sYWJlbCA9IDU7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA1OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfaSsrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCAxXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDY6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9sb29wXzEgPSBmdW5jdGlvbiAodGFyZ2V0SWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0c2xpYi5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIHRoYXQgdGhlIHRhcmdldCBpcyBzdGlsbCBhY3RpdmUgc2luY2UgdGhlIHRhcmdldCBtaWdodCBoYXZlIGJlZW5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlbW92ZWQgaWYgaXQgaGFzIGJlZW4gcmVqZWN0ZWQgYnkgdGhlIGJhY2tlbmQuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXNfMS5xdWVyaWVzQnlUYXJnZXRbdGFyZ2V0SWRdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIFwiY29udGludWVcIl07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBSZWxlYXNlIHF1ZXJpZXMgdGhhdCBhcmUgc3RpbGwgYWN0aXZlLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpc18xLmxvY2FsU3RvcmVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlbGVhc2VUYXJnZXQodGFyZ2V0SWQsIC8qIGtlZXBQZXJzaXN0ZWRUYXJnZXREYXRhICovIGZhbHNlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnJlbW90ZVN0b3JlLnVubGlzdGVuKHRhcmdldElkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMucmVtb3ZlQW5kQ2xlYW51cFRhcmdldCh0YXJnZXRJZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGlnbm9yZUlmUHJpbWFyeUxlYXNlTG9zcyldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBSZWxlYXNlIHF1ZXJpZXMgdGhhdCBhcmUgc3RpbGwgYWN0aXZlLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzXzEgPSB0aGlzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYSA9IDAsIHJlbW92ZWRfMSA9IHJlbW92ZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9iLmxhYmVsID0gNztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDc6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKF9hIDwgcmVtb3ZlZF8xLmxlbmd0aCkpIHJldHVybiBbMyAvKmJyZWFrKi8sIDEwXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0SWQgPSByZW1vdmVkXzFbX2FdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzUgLyp5aWVsZCoqLywgX2xvb3BfMSh0YXJnZXRJZCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgODpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Iuc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYi5sYWJlbCA9IDk7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA5OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYSsrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCA3XTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDEwOiByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktdGFiIG9ubHkuIEluIG90aGVyIGNsaWVudHMsIExvY2FsU3RvcmUgaXMgdW5hd2FyZSBvZlxyXG4gICAgLy8gdGhlIG9ubGluZSBzdGF0ZS5cclxuICAgIFN5bmNFbmdpbmUucHJvdG90eXBlLmVuYWJsZU5ldHdvcmsgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5sb2NhbFN0b3JlLnNldE5ldHdvcmtFbmFibGVkKHRydWUpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnJlbW90ZVN0b3JlLmVuYWJsZU5ldHdvcmsoKTtcclxuICAgIH07XHJcbiAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLXRhYiBvbmx5LiBJbiBvdGhlciBjbGllbnRzLCBMb2NhbFN0b3JlIGlzIHVuYXdhcmUgb2ZcclxuICAgIC8vIHRoZSBvbmxpbmUgc3RhdGUuXHJcbiAgICBTeW5jRW5naW5lLnByb3RvdHlwZS5kaXNhYmxlTmV0d29yayA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmxvY2FsU3RvcmUuc2V0TmV0d29ya0VuYWJsZWQoZmFsc2UpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnJlbW90ZVN0b3JlLmRpc2FibGVOZXR3b3JrKCk7XHJcbiAgICB9O1xyXG4gICAgU3luY0VuZ2luZS5wcm90b3R5cGUuZ2V0UmVtb3RlS2V5c0ZvclRhcmdldCA9IGZ1bmN0aW9uICh0YXJnZXRJZCkge1xyXG4gICAgICAgIHZhciBsaW1ib1Jlc29sdXRpb24gPSB0aGlzLmxpbWJvUmVzb2x1dGlvbnNCeVRhcmdldFt0YXJnZXRJZF07XHJcbiAgICAgICAgaWYgKGxpbWJvUmVzb2x1dGlvbiAmJiBsaW1ib1Jlc29sdXRpb24ucmVjZWl2ZWREb2N1bWVudCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZG9jdW1lbnRLZXlTZXQoKS5hZGQobGltYm9SZXNvbHV0aW9uLmtleSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB2YXIga2V5U2V0ID0gZG9jdW1lbnRLZXlTZXQoKTtcclxuICAgICAgICAgICAgdmFyIHF1ZXJpZXMgPSB0aGlzLnF1ZXJpZXNCeVRhcmdldFt0YXJnZXRJZF07XHJcbiAgICAgICAgICAgIGlmICghcXVlcmllcykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGtleVNldDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIHF1ZXJpZXNfMiA9IHF1ZXJpZXM7IF9pIDwgcXVlcmllc18yLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIHF1ZXJ5ID0gcXVlcmllc18yW19pXTtcclxuICAgICAgICAgICAgICAgIHZhciBxdWVyeVZpZXcgPSB0aGlzLnF1ZXJ5Vmlld3NCeVF1ZXJ5LmdldChxdWVyeSk7XHJcbiAgICAgICAgICAgICAgICBhc3NlcnQoISFxdWVyeVZpZXcsIFwiTm8gcXVlcnkgdmlldyBmb3VuZCBmb3IgXCIgKyBxdWVyeSk7XHJcbiAgICAgICAgICAgICAgICBrZXlTZXQgPSBrZXlTZXQudW5pb25XaXRoKHF1ZXJ5Vmlldy52aWV3LnN5bmNlZERvY3VtZW50cyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGtleVNldDtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFN5bmNFbmdpbmU7XHJcbn0oKSk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogU2ltcGxlIHdyYXBwZXIgYXJvdW5kIGEgbnVsbGFibGUgVUlELiBNb3N0bHkgZXhpc3RzIHRvIG1ha2UgY29kZSBtb3JlXHJcbiAqIHJlYWRhYmxlLlxyXG4gKi9cclxudmFyIFVzZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBVc2VyKHVpZCkge1xyXG4gICAgICAgIHRoaXMudWlkID0gdWlkO1xyXG4gICAgfVxyXG4gICAgVXNlci5wcm90b3R5cGUuaXNBdXRoZW50aWNhdGVkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnVpZCAhPSBudWxsO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyBhIGtleSByZXByZXNlbnRpbmcgdGhpcyB1c2VyLCBzdWl0YWJsZSBmb3IgaW5jbHVzaW9uIGluIGFcclxuICAgICAqIGRpY3Rpb25hcnkuXHJcbiAgICAgKi9cclxuICAgIFVzZXIucHJvdG90eXBlLnRvS2V5ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmlzQXV0aGVudGljYXRlZCgpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAndWlkOicgKyB0aGlzLnVpZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiAnYW5vbnltb3VzLXVzZXInO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBVc2VyLnByb3RvdHlwZS5pc0VxdWFsID0gZnVuY3Rpb24gKG90aGVyVXNlcikge1xyXG4gICAgICAgIHJldHVybiBvdGhlclVzZXIudWlkID09PSB0aGlzLnVpZDtcclxuICAgIH07XHJcbiAgICAvKiogQSB1c2VyIHdpdGggYSBudWxsIFVJRC4gKi9cclxuICAgIFVzZXIuVU5BVVRIRU5USUNBVEVEID0gbmV3IFVzZXIobnVsbCk7XHJcbiAgICAvLyBUT0RPKG1pa2VsZWhlbik6IExvb2sgaW50byBnZXR0aW5nIGEgcHJvcGVyIHVpZC1lcXVpdmFsZW50IGZvclxyXG4gICAgLy8gbm9uLUZpcmViYXNlQXV0aCBwcm92aWRlcnMuXHJcbiAgICBVc2VyLkdPT0dMRV9DUkVERU5USUFMUyA9IG5ldyBVc2VyKCdnb29nbGUtY3JlZGVudGlhbHMtdWlkJyk7XHJcbiAgICBVc2VyLkZJUlNUX1BBUlRZID0gbmV3IFVzZXIoJ2ZpcnN0LXBhcnR5LXVpZCcpO1xyXG4gICAgcmV0dXJuIFVzZXI7XHJcbn0oKSk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vLyBUaGUgZm9ybWF0IG9mIHRoZSBMb2NhbFN0b3JhZ2Uga2V5IHRoYXQgc3RvcmVzIHRoZSBjbGllbnQgc3RhdGUgaXM6XHJcbi8vICAgICBmaXJlc3RvcmVfY2xpZW50c188cGVyc2lzdGVuY2VfcHJlZml4Pl88aW5zdGFuY2Vfa2V5PlxyXG52YXIgQ0xJRU5UX1NUQVRFX0tFWV9QUkVGSVggPSAnZmlyZXN0b3JlX2NsaWVudHMnO1xyXG4vKiogQXNzZW1ibGVzIHRoZSBrZXkgZm9yIGEgY2xpZW50IHN0YXRlIGluIFdlYlN0b3JhZ2UgKi9cclxuZnVuY3Rpb24gY3JlYXRlV2ViU3RvcmFnZUNsaWVudFN0YXRlS2V5KHBlcnNpc3RlbmNlS2V5LCBjbGllbnRJZCkge1xyXG4gICAgYXNzZXJ0KGNsaWVudElkLmluZGV4T2YoJ18nKSA9PT0gLTEsIFwiQ2xpZW50IGtleSBjYW5ub3QgY29udGFpbiAnXycsIGJ1dCB3YXMgJ1wiICsgY2xpZW50SWQgKyBcIidcIik7XHJcbiAgICByZXR1cm4gQ0xJRU5UX1NUQVRFX0tFWV9QUkVGSVggKyBcIl9cIiArIHBlcnNpc3RlbmNlS2V5ICsgXCJfXCIgKyBjbGllbnRJZDtcclxufVxyXG4vLyBUaGUgZm9ybWF0IG9mIHRoZSBXZWJTdG9yYWdlIGtleSB0aGF0IHN0b3JlcyB0aGUgbXV0YXRpb24gc3RhdGUgaXM6XHJcbi8vICAgICBmaXJlc3RvcmVfbXV0YXRpb25zXzxwZXJzaXN0ZW5jZV9wcmVmaXg+XzxiYXRjaF9pZD5cclxuLy8gICAgIChmb3IgdW5hdXRoZW50aWNhdGVkIHVzZXJzKVxyXG4vLyBvcjogZmlyZXN0b3JlX211dGF0aW9uc188cGVyc2lzdGVuY2VfcHJlZml4Pl88YmF0Y2hfaWQ+Xzx1c2VyX3VpZD5cclxuLy9cclxuLy8gJ3VzZXJfdWlkJyBpcyBsYXN0IHRvIGF2b2lkIG5lZWRpbmcgdG8gZXNjYXBlICdfJyBjaGFyYWN0ZXJzIHRoYXQgaXQgbWlnaHRcclxuLy8gY29udGFpbi5cclxudmFyIE1VVEFUSU9OX0JBVENIX0tFWV9QUkVGSVggPSAnZmlyZXN0b3JlX211dGF0aW9ucyc7XHJcbi8qKiBBc3NlbWJsZXMgdGhlIGtleSBmb3IgYSBtdXRhdGlvbiBiYXRjaCBpbiBXZWJTdG9yYWdlICovXHJcbmZ1bmN0aW9uIGNyZWF0ZVdlYlN0b3JhZ2VNdXRhdGlvbkJhdGNoS2V5KHBlcnNpc3RlbmNlS2V5LCB1c2VyLCBiYXRjaElkKSB7XHJcbiAgICB2YXIgbXV0YXRpb25LZXkgPSBNVVRBVElPTl9CQVRDSF9LRVlfUFJFRklYICsgXCJfXCIgKyBwZXJzaXN0ZW5jZUtleSArIFwiX1wiICsgYmF0Y2hJZDtcclxuICAgIGlmICh1c2VyLmlzQXV0aGVudGljYXRlZCgpKSB7XHJcbiAgICAgICAgbXV0YXRpb25LZXkgKz0gXCJfXCIgKyB1c2VyLnVpZDtcclxuICAgIH1cclxuICAgIHJldHVybiBtdXRhdGlvbktleTtcclxufVxyXG4vLyBUaGUgZm9ybWF0IG9mIHRoZSBXZWJTdG9yYWdlIGtleSB0aGF0IHN0b3JlcyBhIHF1ZXJ5IHRhcmdldCdzIG1ldGFkYXRhIGlzOlxyXG4vLyAgICAgZmlyZXN0b3JlX3RhcmdldHNfPHBlcnNpc3RlbmNlX3ByZWZpeD5fPHRhcmdldF9pZD5cclxudmFyIFFVRVJZX1RBUkdFVF9LRVlfUFJFRklYID0gJ2ZpcmVzdG9yZV90YXJnZXRzJztcclxuLyoqIEFzc2VtYmxlcyB0aGUga2V5IGZvciBhIHF1ZXJ5IHN0YXRlIGluIFdlYlN0b3JhZ2UgKi9cclxuZnVuY3Rpb24gY3JlYXRlV2ViU3RvcmFnZVF1ZXJ5VGFyZ2V0TWV0YWRhdGFLZXkocGVyc2lzdGVuY2VLZXksIHRhcmdldElkKSB7XHJcbiAgICByZXR1cm4gUVVFUllfVEFSR0VUX0tFWV9QUkVGSVggKyBcIl9cIiArIHBlcnNpc3RlbmNlS2V5ICsgXCJfXCIgKyB0YXJnZXRJZDtcclxufVxyXG4vLyBUaGUgV2ViU3RvcmFnZSBwcmVmaXggdGhhdCBzdG9yZXMgdGhlIHByaW1hcnkgdGFiJ3Mgb25saW5lIHN0YXRlLiBUaGVcclxuLy8gZm9ybWF0IG9mIHRoZSBrZXkgaXM6XHJcbi8vICAgICBmaXJlc3RvcmVfb25saW5lX3N0YXRlXzxwZXJzaXN0ZW5jZV9wcmVmaXg+XHJcbnZhciBPTkxJTkVfU1RBVEVfS0VZX1BSRUZJWCA9ICdmaXJlc3RvcmVfb25saW5lX3N0YXRlJztcclxuLyoqIEFzc2VtYmxlcyB0aGUga2V5IGZvciB0aGUgb25saW5lIHN0YXRlIG9mIHRoZSBwcmltYXJ5IHRhYi4gKi9cclxuZnVuY3Rpb24gY3JlYXRlV2ViU3RvcmFnZU9ubGluZVN0YXRlS2V5KHBlcnNpc3RlbmNlS2V5KSB7XHJcbiAgICByZXR1cm4gT05MSU5FX1NUQVRFX0tFWV9QUkVGSVggKyBcIl9cIiArIHBlcnNpc3RlbmNlS2V5O1xyXG59XHJcbi8vIFRoZSBXZWJTdG9yYWdlIGtleSBwcmVmaXggZm9yIHRoZSBrZXkgdGhhdCBzdG9yZXMgdGhlIGxhc3Qgc2VxdWVuY2UgbnVtYmVyIGFsbG9jYXRlZC4gVGhlIGtleVxyXG4vLyBsb29rcyBsaWtlICdmaXJlc3RvcmVfc2VxdWVuY2VfbnVtYmVyXzxwZXJzaXN0ZW5jZV9wcmVmaXg+Jy5cclxudmFyIFNFUVVFTkNFX05VTUJFUl9LRVlfUFJFRklYID0gJ2ZpcmVzdG9yZV9zZXF1ZW5jZV9udW1iZXInO1xyXG4vKiogQXNzZW1ibGVzIHRoZSBrZXkgZm9yIHRoZSBjdXJyZW50IHNlcXVlbmNlIG51bWJlci4gKi9cclxuZnVuY3Rpb24gY3JlYXRlV2ViU3RvcmFnZVNlcXVlbmNlTnVtYmVyS2V5KHBlcnNpc3RlbmNlS2V5KSB7XHJcbiAgICByZXR1cm4gU0VRVUVOQ0VfTlVNQkVSX0tFWV9QUkVGSVggKyBcIl9cIiArIHBlcnNpc3RlbmNlS2V5O1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG52YXIgTE9HX1RBRyRhID0gJ1NoYXJlZENsaWVudFN0YXRlJztcclxuLyoqXHJcbiAqIEhvbGRzIHRoZSBzdGF0ZSBvZiBhIG11dGF0aW9uIGJhdGNoLCBpbmNsdWRpbmcgaXRzIHVzZXIgSUQsIGJhdGNoIElEIGFuZFxyXG4gKiB3aGV0aGVyIHRoZSBiYXRjaCBpcyAncGVuZGluZycsICdhY2tub3dsZWRnZWQnIG9yICdyZWplY3RlZCcuXHJcbiAqL1xyXG4vLyBWaXNpYmxlIGZvciB0ZXN0aW5nXHJcbnZhciBNdXRhdGlvbk1ldGFkYXRhID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gTXV0YXRpb25NZXRhZGF0YSh1c2VyLCBiYXRjaElkLCBzdGF0ZSwgZXJyb3IpIHtcclxuICAgICAgICB0aGlzLnVzZXIgPSB1c2VyO1xyXG4gICAgICAgIHRoaXMuYmF0Y2hJZCA9IGJhdGNoSWQ7XHJcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHN0YXRlO1xyXG4gICAgICAgIHRoaXMuZXJyb3IgPSBlcnJvcjtcclxuICAgICAgICBhc3NlcnQoKGVycm9yICE9PSB1bmRlZmluZWQpID09PSAoc3RhdGUgPT09ICdyZWplY3RlZCcpLCBcIk11dGF0aW9uTWV0YWRhdGEgbXVzdCBjb250YWluIGFuIGVycm9yIGlmZiBzdGF0ZSBpcyAncmVqZWN0ZWQnXCIpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBQYXJzZXMgYSBNdXRhdGlvbk1ldGFkYXRhIGZyb20gaXRzIEpTT04gcmVwcmVzZW50YXRpb24gaW4gV2ViU3RvcmFnZS5cclxuICAgICAqIExvZ3MgYSB3YXJuaW5nIGFuZCByZXR1cm5zIG51bGwgaWYgdGhlIGZvcm1hdCBvZiB0aGUgZGF0YSBpcyBub3QgdmFsaWQuXHJcbiAgICAgKi9cclxuICAgIE11dGF0aW9uTWV0YWRhdGEuZnJvbVdlYlN0b3JhZ2VFbnRyeSA9IGZ1bmN0aW9uICh1c2VyLCBiYXRjaElkLCB2YWx1ZSkge1xyXG4gICAgICAgIHZhciBtdXRhdGlvbkJhdGNoID0gSlNPTi5wYXJzZSh2YWx1ZSk7XHJcbiAgICAgICAgdmFyIHZhbGlkRGF0YSA9IHR5cGVvZiBtdXRhdGlvbkJhdGNoID09PSAnb2JqZWN0JyAmJlxyXG4gICAgICAgICAgICBbJ3BlbmRpbmcnLCAnYWNrbm93bGVkZ2VkJywgJ3JlamVjdGVkJ10uaW5kZXhPZihtdXRhdGlvbkJhdGNoLnN0YXRlKSAhPT1cclxuICAgICAgICAgICAgICAgIC0xICYmXHJcbiAgICAgICAgICAgIChtdXRhdGlvbkJhdGNoLmVycm9yID09PSB1bmRlZmluZWQgfHxcclxuICAgICAgICAgICAgICAgIHR5cGVvZiBtdXRhdGlvbkJhdGNoLmVycm9yID09PSAnb2JqZWN0Jyk7XHJcbiAgICAgICAgdmFyIGZpcmVzdG9yZUVycm9yID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIGlmICh2YWxpZERhdGEgJiYgbXV0YXRpb25CYXRjaC5lcnJvcikge1xyXG4gICAgICAgICAgICB2YWxpZERhdGEgPVxyXG4gICAgICAgICAgICAgICAgdHlwZW9mIG11dGF0aW9uQmF0Y2guZXJyb3IubWVzc2FnZSA9PT0gJ3N0cmluZycgJiZcclxuICAgICAgICAgICAgICAgICAgICB0eXBlb2YgbXV0YXRpb25CYXRjaC5lcnJvci5jb2RlID09PSAnc3RyaW5nJztcclxuICAgICAgICAgICAgaWYgKHZhbGlkRGF0YSkge1xyXG4gICAgICAgICAgICAgICAgZmlyZXN0b3JlRXJyb3IgPSBuZXcgRmlyZXN0b3JlRXJyb3IobXV0YXRpb25CYXRjaC5lcnJvci5jb2RlLCBtdXRhdGlvbkJhdGNoLmVycm9yLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh2YWxpZERhdGEpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBNdXRhdGlvbk1ldGFkYXRhKHVzZXIsIGJhdGNoSWQsIG11dGF0aW9uQmF0Y2guc3RhdGUsIGZpcmVzdG9yZUVycm9yKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGVycm9yKExPR19UQUckYSwgXCJGYWlsZWQgdG8gcGFyc2UgbXV0YXRpb24gc3RhdGUgZm9yIElEICdcIiArIGJhdGNoSWQgKyBcIic6IFwiICsgdmFsdWUpO1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgTXV0YXRpb25NZXRhZGF0YS5wcm90b3R5cGUudG9XZWJTdG9yYWdlSlNPTiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgYmF0Y2hNZXRhZGF0YSA9IHtcclxuICAgICAgICAgICAgc3RhdGU6IHRoaXMuc3RhdGUsXHJcbiAgICAgICAgICAgIHVwZGF0ZVRpbWVNczogRGF0ZS5ub3coKSAvLyBNb2RpZnkgdGhlIGV4aXN0aW5nIHZhbHVlIHRvIHRyaWdnZXIgdXBkYXRlLlxyXG4gICAgICAgIH07XHJcbiAgICAgICAgaWYgKHRoaXMuZXJyb3IpIHtcclxuICAgICAgICAgICAgYmF0Y2hNZXRhZGF0YS5lcnJvciA9IHtcclxuICAgICAgICAgICAgICAgIGNvZGU6IHRoaXMuZXJyb3IuY29kZSxcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IHRoaXMuZXJyb3IubWVzc2FnZVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoYmF0Y2hNZXRhZGF0YSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIE11dGF0aW9uTWV0YWRhdGE7XHJcbn0oKSk7XHJcbi8qKlxyXG4gKiBIb2xkcyB0aGUgc3RhdGUgb2YgYSBxdWVyeSB0YXJnZXQsIGluY2x1ZGluZyBpdHMgdGFyZ2V0IElEIGFuZCB3aGV0aGVyIHRoZVxyXG4gKiB0YXJnZXQgaXMgJ25vdC1jdXJyZW50JywgJ2N1cnJlbnQnIG9yICdyZWplY3RlZCcuXHJcbiAqL1xyXG4vLyBWaXNpYmxlIGZvciB0ZXN0aW5nXHJcbnZhciBRdWVyeVRhcmdldE1ldGFkYXRhID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gUXVlcnlUYXJnZXRNZXRhZGF0YSh0YXJnZXRJZCwgc3RhdGUsIGVycm9yKSB7XHJcbiAgICAgICAgdGhpcy50YXJnZXRJZCA9IHRhcmdldElkO1xyXG4gICAgICAgIHRoaXMuc3RhdGUgPSBzdGF0ZTtcclxuICAgICAgICB0aGlzLmVycm9yID0gZXJyb3I7XHJcbiAgICAgICAgYXNzZXJ0KChlcnJvciAhPT0gdW5kZWZpbmVkKSA9PT0gKHN0YXRlID09PSAncmVqZWN0ZWQnKSwgXCJRdWVyeVRhcmdldE1ldGFkYXRhIG11c3QgY29udGFpbiBhbiBlcnJvciBpZmYgc3RhdGUgaXMgJ3JlamVjdGVkJ1wiKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogUGFyc2VzIGEgUXVlcnlUYXJnZXRNZXRhZGF0YSBmcm9tIGl0cyBKU09OIHJlcHJlc2VudGF0aW9uIGluIFdlYlN0b3JhZ2UuXHJcbiAgICAgKiBMb2dzIGEgd2FybmluZyBhbmQgcmV0dXJucyBudWxsIGlmIHRoZSBmb3JtYXQgb2YgdGhlIGRhdGEgaXMgbm90IHZhbGlkLlxyXG4gICAgICovXHJcbiAgICBRdWVyeVRhcmdldE1ldGFkYXRhLmZyb21XZWJTdG9yYWdlRW50cnkgPSBmdW5jdGlvbiAodGFyZ2V0SWQsIHZhbHVlKSB7XHJcbiAgICAgICAgdmFyIHRhcmdldFN0YXRlID0gSlNPTi5wYXJzZSh2YWx1ZSk7XHJcbiAgICAgICAgdmFyIHZhbGlkRGF0YSA9IHR5cGVvZiB0YXJnZXRTdGF0ZSA9PT0gJ29iamVjdCcgJiZcclxuICAgICAgICAgICAgWydub3QtY3VycmVudCcsICdjdXJyZW50JywgJ3JlamVjdGVkJ10uaW5kZXhPZih0YXJnZXRTdGF0ZS5zdGF0ZSkgIT09XHJcbiAgICAgICAgICAgICAgICAtMSAmJlxyXG4gICAgICAgICAgICAodGFyZ2V0U3RhdGUuZXJyb3IgPT09IHVuZGVmaW5lZCB8fFxyXG4gICAgICAgICAgICAgICAgdHlwZW9mIHRhcmdldFN0YXRlLmVycm9yID09PSAnb2JqZWN0Jyk7XHJcbiAgICAgICAgdmFyIGZpcmVzdG9yZUVycm9yID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIGlmICh2YWxpZERhdGEgJiYgdGFyZ2V0U3RhdGUuZXJyb3IpIHtcclxuICAgICAgICAgICAgdmFsaWREYXRhID1cclxuICAgICAgICAgICAgICAgIHR5cGVvZiB0YXJnZXRTdGF0ZS5lcnJvci5tZXNzYWdlID09PSAnc3RyaW5nJyAmJlxyXG4gICAgICAgICAgICAgICAgICAgIHR5cGVvZiB0YXJnZXRTdGF0ZS5lcnJvci5jb2RlID09PSAnc3RyaW5nJztcclxuICAgICAgICAgICAgaWYgKHZhbGlkRGF0YSkge1xyXG4gICAgICAgICAgICAgICAgZmlyZXN0b3JlRXJyb3IgPSBuZXcgRmlyZXN0b3JlRXJyb3IodGFyZ2V0U3RhdGUuZXJyb3IuY29kZSwgdGFyZ2V0U3RhdGUuZXJyb3IubWVzc2FnZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHZhbGlkRGF0YSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFF1ZXJ5VGFyZ2V0TWV0YWRhdGEodGFyZ2V0SWQsIHRhcmdldFN0YXRlLnN0YXRlLCBmaXJlc3RvcmVFcnJvcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBlcnJvcihMT0dfVEFHJGEsIFwiRmFpbGVkIHRvIHBhcnNlIHRhcmdldCBzdGF0ZSBmb3IgSUQgJ1wiICsgdGFyZ2V0SWQgKyBcIic6IFwiICsgdmFsdWUpO1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgUXVlcnlUYXJnZXRNZXRhZGF0YS5wcm90b3R5cGUudG9XZWJTdG9yYWdlSlNPTiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgdGFyZ2V0U3RhdGUgPSB7XHJcbiAgICAgICAgICAgIHN0YXRlOiB0aGlzLnN0YXRlLFxyXG4gICAgICAgICAgICB1cGRhdGVUaW1lTXM6IERhdGUubm93KCkgLy8gTW9kaWZ5IHRoZSBleGlzdGluZyB2YWx1ZSB0byB0cmlnZ2VyIHVwZGF0ZS5cclxuICAgICAgICB9O1xyXG4gICAgICAgIGlmICh0aGlzLmVycm9yKSB7XHJcbiAgICAgICAgICAgIHRhcmdldFN0YXRlLmVycm9yID0ge1xyXG4gICAgICAgICAgICAgICAgY29kZTogdGhpcy5lcnJvci5jb2RlLFxyXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogdGhpcy5lcnJvci5tZXNzYWdlXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh0YXJnZXRTdGF0ZSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFF1ZXJ5VGFyZ2V0TWV0YWRhdGE7XHJcbn0oKSk7XHJcbi8qKlxyXG4gKiBUaGlzIGNsYXNzIHJlcHJlc2VudHMgdGhlIGltbXV0YWJsZSBDbGllbnRTdGF0ZSBmb3IgYSBjbGllbnQgcmVhZCBmcm9tXHJcbiAqIFdlYlN0b3JhZ2UsIGNvbnRhaW5pbmcgdGhlIGxpc3Qgb2YgYWN0aXZlIHF1ZXJ5IHRhcmdldHMuXHJcbiAqL1xyXG52YXIgUmVtb3RlQ2xpZW50U3RhdGUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBSZW1vdGVDbGllbnRTdGF0ZShjbGllbnRJZCwgYWN0aXZlVGFyZ2V0SWRzKSB7XHJcbiAgICAgICAgdGhpcy5jbGllbnRJZCA9IGNsaWVudElkO1xyXG4gICAgICAgIHRoaXMuYWN0aXZlVGFyZ2V0SWRzID0gYWN0aXZlVGFyZ2V0SWRzO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBQYXJzZXMgYSBSZW1vdGVDbGllbnRTdGF0ZSBmcm9tIHRoZSBKU09OIHJlcHJlc2VudGF0aW9uIGluIFdlYlN0b3JhZ2UuXHJcbiAgICAgKiBMb2dzIGEgd2FybmluZyBhbmQgcmV0dXJucyBudWxsIGlmIHRoZSBmb3JtYXQgb2YgdGhlIGRhdGEgaXMgbm90IHZhbGlkLlxyXG4gICAgICovXHJcbiAgICBSZW1vdGVDbGllbnRTdGF0ZS5mcm9tV2ViU3RvcmFnZUVudHJ5ID0gZnVuY3Rpb24gKGNsaWVudElkLCB2YWx1ZSkge1xyXG4gICAgICAgIHZhciBjbGllbnRTdGF0ZSA9IEpTT04ucGFyc2UodmFsdWUpO1xyXG4gICAgICAgIHZhciB2YWxpZERhdGEgPSB0eXBlb2YgY2xpZW50U3RhdGUgPT09ICdvYmplY3QnICYmXHJcbiAgICAgICAgICAgIGNsaWVudFN0YXRlLmFjdGl2ZVRhcmdldElkcyBpbnN0YW5jZW9mIEFycmF5O1xyXG4gICAgICAgIHZhciBhY3RpdmVUYXJnZXRJZHNTZXQgPSB0YXJnZXRJZFNldCgpO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyB2YWxpZERhdGEgJiYgaSA8IGNsaWVudFN0YXRlLmFjdGl2ZVRhcmdldElkcy5sZW5ndGg7ICsraSkge1xyXG4gICAgICAgICAgICB2YWxpZERhdGEgPSBpc1NhZmVJbnRlZ2VyKGNsaWVudFN0YXRlLmFjdGl2ZVRhcmdldElkc1tpXSk7XHJcbiAgICAgICAgICAgIGFjdGl2ZVRhcmdldElkc1NldCA9IGFjdGl2ZVRhcmdldElkc1NldC5hZGQoY2xpZW50U3RhdGUuYWN0aXZlVGFyZ2V0SWRzW2ldKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHZhbGlkRGF0YSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFJlbW90ZUNsaWVudFN0YXRlKGNsaWVudElkLCBhY3RpdmVUYXJnZXRJZHNTZXQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgZXJyb3IoTE9HX1RBRyRhLCBcIkZhaWxlZCB0byBwYXJzZSBjbGllbnQgZGF0YSBmb3IgaW5zdGFuY2UgJ1wiICsgY2xpZW50SWQgKyBcIic6IFwiICsgdmFsdWUpO1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFJlbW90ZUNsaWVudFN0YXRlO1xyXG59KCkpO1xyXG4vKipcclxuICogVGhpcyBjbGFzcyByZXByZXNlbnRzIHRoZSBvbmxpbmUgc3RhdGUgZm9yIGFsbCBjbGllbnRzIHBhcnRpY2lwYXRpbmcgaW5cclxuICogbXVsdGktdGFiLiBUaGUgb25saW5lIHN0YXRlIGlzIG9ubHkgd3JpdHRlbiB0byBieSB0aGUgcHJpbWFyeSBjbGllbnQsIGFuZFxyXG4gKiB1c2VkIGluIHNlY29uZGFyeSBjbGllbnRzIHRvIHVwZGF0ZSB0aGVpciBxdWVyeSB2aWV3cy5cclxuICovXHJcbnZhciBTaGFyZWRPbmxpbmVTdGF0ZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFNoYXJlZE9ubGluZVN0YXRlKGNsaWVudElkLCBvbmxpbmVTdGF0ZSkge1xyXG4gICAgICAgIHRoaXMuY2xpZW50SWQgPSBjbGllbnRJZDtcclxuICAgICAgICB0aGlzLm9ubGluZVN0YXRlID0gb25saW5lU3RhdGU7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFBhcnNlcyBhIFNoYXJlZE9ubGluZVN0YXRlIGZyb20gaXRzIEpTT04gcmVwcmVzZW50YXRpb24gaW4gV2ViU3RvcmFnZS5cclxuICAgICAqIExvZ3MgYSB3YXJuaW5nIGFuZCByZXR1cm5zIG51bGwgaWYgdGhlIGZvcm1hdCBvZiB0aGUgZGF0YSBpcyBub3QgdmFsaWQuXHJcbiAgICAgKi9cclxuICAgIFNoYXJlZE9ubGluZVN0YXRlLmZyb21XZWJTdG9yYWdlRW50cnkgPSBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICB2YXIgb25saW5lU3RhdGUgPSBKU09OLnBhcnNlKHZhbHVlKTtcclxuICAgICAgICB2YXIgdmFsaWREYXRhID0gdHlwZW9mIG9ubGluZVN0YXRlID09PSAnb2JqZWN0JyAmJlxyXG4gICAgICAgICAgICBvbmxpbmVTdGF0ZS5vbmxpbmVTdGF0ZSBpbiBPbmxpbmVTdGF0ZSAmJlxyXG4gICAgICAgICAgICB0eXBlb2Ygb25saW5lU3RhdGUuY2xpZW50SWQgPT09ICdzdHJpbmcnO1xyXG4gICAgICAgIGlmICh2YWxpZERhdGEpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBTaGFyZWRPbmxpbmVTdGF0ZShvbmxpbmVTdGF0ZS5jbGllbnRJZCwgT25saW5lU3RhdGVbb25saW5lU3RhdGUub25saW5lU3RhdGVdKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGVycm9yKExPR19UQUckYSwgXCJGYWlsZWQgdG8gcGFyc2Ugb25saW5lIHN0YXRlOiBcIiArIHZhbHVlKTtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHJldHVybiBTaGFyZWRPbmxpbmVTdGF0ZTtcclxufSgpKTtcclxuLyoqXHJcbiAqIE1ldGFkYXRhIHN0YXRlIG9mIHRoZSBsb2NhbCBjbGllbnQuIFVubGlrZSBgUmVtb3RlQ2xpZW50U3RhdGVgLCB0aGlzIGNsYXNzIGlzXHJcbiAqIG11dGFibGUgYW5kIGtlZXBzIHRyYWNrIG9mIGFsbCBwZW5kaW5nIG11dGF0aW9ucywgd2hpY2ggYWxsb3dzIHVzIHRvXHJcbiAqIHVwZGF0ZSB0aGUgcmFuZ2Ugb2YgcGVuZGluZyBtdXRhdGlvbiBiYXRjaCBJRHMgYXMgbmV3IG11dGF0aW9ucyBhcmUgYWRkZWQgb3JcclxuICogcmVtb3ZlZC5cclxuICpcclxuICogVGhlIGRhdGEgaW4gYExvY2FsQ2xpZW50U3RhdGVgIGlzIG5vdCByZWFkIGZyb20gV2ViU3RvcmFnZSBhbmQgaW5zdGVhZFxyXG4gKiB1cGRhdGVkIHZpYSBpdHMgaW5zdGFuY2UgbWV0aG9kcy4gVGhlIHVwZGF0ZWQgc3RhdGUgY2FuIGJlIHNlcmlhbGl6ZWQgdmlhXHJcbiAqIGB0b1dlYlN0b3JhZ2VKU09OKClgLlxyXG4gKi9cclxuLy8gVmlzaWJsZSBmb3IgdGVzdGluZy5cclxudmFyIExvY2FsQ2xpZW50U3RhdGUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBMb2NhbENsaWVudFN0YXRlKCkge1xyXG4gICAgICAgIHRoaXMuYWN0aXZlVGFyZ2V0SWRzID0gdGFyZ2V0SWRTZXQoKTtcclxuICAgIH1cclxuICAgIExvY2FsQ2xpZW50U3RhdGUucHJvdG90eXBlLmFkZFF1ZXJ5VGFyZ2V0ID0gZnVuY3Rpb24gKHRhcmdldElkKSB7XHJcbiAgICAgICAgdGhpcy5hY3RpdmVUYXJnZXRJZHMgPSB0aGlzLmFjdGl2ZVRhcmdldElkcy5hZGQodGFyZ2V0SWQpO1xyXG4gICAgfTtcclxuICAgIExvY2FsQ2xpZW50U3RhdGUucHJvdG90eXBlLnJlbW92ZVF1ZXJ5VGFyZ2V0ID0gZnVuY3Rpb24gKHRhcmdldElkKSB7XHJcbiAgICAgICAgdGhpcy5hY3RpdmVUYXJnZXRJZHMgPSB0aGlzLmFjdGl2ZVRhcmdldElkcy5kZWxldGUodGFyZ2V0SWQpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQ29udmVydHMgdGhpcyBlbnRyeSBpbnRvIGEgSlNPTi1lbmNvZGVkIGZvcm1hdCB3ZSBjYW4gdXNlIGZvciBXZWJTdG9yYWdlLlxyXG4gICAgICogRG9lcyBub3QgZW5jb2RlIGBjbGllbnRJZGAgYXMgaXQgaXMgcGFydCBvZiB0aGUga2V5IGluIFdlYlN0b3JhZ2UuXHJcbiAgICAgKi9cclxuICAgIExvY2FsQ2xpZW50U3RhdGUucHJvdG90eXBlLnRvV2ViU3RvcmFnZUpTT04gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGRhdGEgPSB7XHJcbiAgICAgICAgICAgIGFjdGl2ZVRhcmdldElkczogdGhpcy5hY3RpdmVUYXJnZXRJZHMudG9BcnJheSgpLFxyXG4gICAgICAgICAgICB1cGRhdGVUaW1lTXM6IERhdGUubm93KCkgLy8gTW9kaWZ5IHRoZSBleGlzdGluZyB2YWx1ZSB0byB0cmlnZ2VyIHVwZGF0ZS5cclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShkYXRhKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gTG9jYWxDbGllbnRTdGF0ZTtcclxufSgpKTtcclxuLyoqXHJcbiAqIGBXZWJTdG9yYWdlU2hhcmVkQ2xpZW50U3RhdGVgIHVzZXMgV2ViU3RvcmFnZSAod2luZG93LmxvY2FsU3RvcmFnZSkgYXMgdGhlXHJcbiAqIGJhY2tpbmcgc3RvcmUgZm9yIHRoZSBTaGFyZWRDbGllbnRTdGF0ZS4gSXQga2VlcHMgdHJhY2sgb2YgYWxsIGFjdGl2ZVxyXG4gKiBjbGllbnRzIGFuZCBzdXBwb3J0cyBtb2RpZmljYXRpb25zIG9mIHRoZSBsb2NhbCBjbGllbnQncyBkYXRhLlxyXG4gKi9cclxudmFyIFdlYlN0b3JhZ2VTaGFyZWRDbGllbnRTdGF0ZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFdlYlN0b3JhZ2VTaGFyZWRDbGllbnRTdGF0ZShxdWV1ZSwgcGxhdGZvcm0sIHBlcnNpc3RlbmNlS2V5LCBsb2NhbENsaWVudElkLCBpbml0aWFsVXNlcikge1xyXG4gICAgICAgIHRoaXMucXVldWUgPSBxdWV1ZTtcclxuICAgICAgICB0aGlzLnBsYXRmb3JtID0gcGxhdGZvcm07XHJcbiAgICAgICAgdGhpcy5wZXJzaXN0ZW5jZUtleSA9IHBlcnNpc3RlbmNlS2V5O1xyXG4gICAgICAgIHRoaXMubG9jYWxDbGllbnRJZCA9IGxvY2FsQ2xpZW50SWQ7XHJcbiAgICAgICAgdGhpcy5zeW5jRW5naW5lID0gbnVsbDtcclxuICAgICAgICB0aGlzLm9ubGluZVN0YXRlSGFuZGxlciA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5zZXF1ZW5jZU51bWJlckhhbmRsZXIgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuYWN0aXZlQ2xpZW50cyA9IHt9O1xyXG4gICAgICAgIHRoaXMuc3RvcmFnZUxpc3RlbmVyID0gdGhpcy5oYW5kbGVXZWJTdG9yYWdlRXZlbnQuYmluZCh0aGlzKTtcclxuICAgICAgICB0aGlzLnN0YXJ0ZWQgPSBmYWxzZTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDYXB0dXJlcyBXZWJTdG9yYWdlIGV2ZW50cyB0aGF0IG9jY3VyIGJlZm9yZSBgc3RhcnQoKWAgaXMgY2FsbGVkLiBUaGVzZVxyXG4gICAgICAgICAqIGV2ZW50cyBhcmUgcmVwbGF5ZWQgb25jZSBgV2ViU3RvcmFnZVNoYXJlZENsaWVudFN0YXRlYCBpcyBzdGFydGVkLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuZWFybHlFdmVudHMgPSBbXTtcclxuICAgICAgICBpZiAoIVdlYlN0b3JhZ2VTaGFyZWRDbGllbnRTdGF0ZS5pc0F2YWlsYWJsZSh0aGlzLnBsYXRmb3JtKSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5VTklNUExFTUVOVEVELCAnTG9jYWxTdG9yYWdlIGlzIG5vdCBhdmFpbGFibGUgb24gdGhpcyBwbGF0Zm9ybS4nKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gRXNjYXBlIHRoZSBzcGVjaWFsIGNoYXJhY3RlcnMgbWVudGlvbmVkIGhlcmU6XHJcbiAgICAgICAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9HdWlkZS9SZWd1bGFyX0V4cHJlc3Npb25zXHJcbiAgICAgICAgdmFyIGVzY2FwZWRQZXJzaXN0ZW5jZUtleSA9IHBlcnNpc3RlbmNlS2V5LnJlcGxhY2UoL1suKis/XiR7fSgpfFtcXF1cXFxcXS9nLCAnXFxcXCQmJyk7XHJcbiAgICAgICAgdGhpcy5zdG9yYWdlID0gdGhpcy5wbGF0Zm9ybS53aW5kb3cubG9jYWxTdG9yYWdlO1xyXG4gICAgICAgIHRoaXMuY3VycmVudFVzZXIgPSBpbml0aWFsVXNlcjtcclxuICAgICAgICB0aGlzLmxvY2FsQ2xpZW50U3RvcmFnZUtleSA9IGNyZWF0ZVdlYlN0b3JhZ2VDbGllbnRTdGF0ZUtleSh0aGlzLnBlcnNpc3RlbmNlS2V5LCB0aGlzLmxvY2FsQ2xpZW50SWQpO1xyXG4gICAgICAgIHRoaXMuc2VxdWVuY2VOdW1iZXJLZXkgPSBjcmVhdGVXZWJTdG9yYWdlU2VxdWVuY2VOdW1iZXJLZXkodGhpcy5wZXJzaXN0ZW5jZUtleSk7XHJcbiAgICAgICAgdGhpcy5hY3RpdmVDbGllbnRzW3RoaXMubG9jYWxDbGllbnRJZF0gPSBuZXcgTG9jYWxDbGllbnRTdGF0ZSgpO1xyXG4gICAgICAgIHRoaXMuY2xpZW50U3RhdGVLZXlSZSA9IG5ldyBSZWdFeHAoXCJeXCIgKyBDTElFTlRfU1RBVEVfS0VZX1BSRUZJWCArIFwiX1wiICsgZXNjYXBlZFBlcnNpc3RlbmNlS2V5ICsgXCJfKFteX10qKSRcIik7XHJcbiAgICAgICAgdGhpcy5tdXRhdGlvbkJhdGNoS2V5UmUgPSBuZXcgUmVnRXhwKFwiXlwiICsgTVVUQVRJT05fQkFUQ0hfS0VZX1BSRUZJWCArIFwiX1wiICsgZXNjYXBlZFBlcnNpc3RlbmNlS2V5ICsgXCJfKFxcXFxkKykoPzpfKC4qKSk/JFwiKTtcclxuICAgICAgICB0aGlzLnF1ZXJ5VGFyZ2V0S2V5UmUgPSBuZXcgUmVnRXhwKFwiXlwiICsgUVVFUllfVEFSR0VUX0tFWV9QUkVGSVggKyBcIl9cIiArIGVzY2FwZWRQZXJzaXN0ZW5jZUtleSArIFwiXyhcXFxcZCspJFwiKTtcclxuICAgICAgICB0aGlzLm9ubGluZVN0YXRlS2V5ID0gY3JlYXRlV2ViU3RvcmFnZU9ubGluZVN0YXRlS2V5KHRoaXMucGVyc2lzdGVuY2VLZXkpO1xyXG4gICAgICAgIC8vIFJhdGhlciB0aGFuIGFkZGluZyB0aGUgc3RvcmFnZSBvYnNlcnZlciBkdXJpbmcgc3RhcnQoKSwgd2UgYWRkIHRoZVxyXG4gICAgICAgIC8vIHN0b3JhZ2Ugb2JzZXJ2ZXIgZHVyaW5nIGluaXRpYWxpemF0aW9uLiBUaGlzIGVuc3VyZXMgdGhhdCB3ZSBjb2xsZWN0XHJcbiAgICAgICAgLy8gZXZlbnRzIGJlZm9yZSBvdGhlciBjb21wb25lbnRzIHBvcHVsYXRlIHRoZWlyIGluaXRpYWwgc3RhdGUgKGR1cmluZyB0aGVpclxyXG4gICAgICAgIC8vIHJlc3BlY3RpdmUgc3RhcnQoKSBjYWxscykuIE90aGVyd2lzZSwgd2UgbWlnaHQgZm9yIGV4YW1wbGUgbWlzcyBhXHJcbiAgICAgICAgLy8gbXV0YXRpb24gdGhhdCBpcyBhZGRlZCBhZnRlciBMb2NhbFN0b3JlJ3Mgc3RhcnQoKSBwcm9jZXNzZWQgdGhlIGV4aXN0aW5nXHJcbiAgICAgICAgLy8gbXV0YXRpb25zIGJ1dCBiZWZvcmUgd2Ugb2JzZXJ2ZSBXZWJTdG9yYWdlIGV2ZW50cy5cclxuICAgICAgICB0aGlzLnBsYXRmb3JtLndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdzdG9yYWdlJywgdGhpcy5zdG9yYWdlTGlzdGVuZXIpO1xyXG4gICAgfVxyXG4gICAgLyoqIFJldHVybnMgJ3RydWUnIGlmIFdlYlN0b3JhZ2UgaXMgYXZhaWxhYmxlIGluIHRoZSBjdXJyZW50IGVudmlyb25tZW50LiAqL1xyXG4gICAgV2ViU3RvcmFnZVNoYXJlZENsaWVudFN0YXRlLmlzQXZhaWxhYmxlID0gZnVuY3Rpb24gKHBsYXRmb3JtKSB7XHJcbiAgICAgICAgcmV0dXJuICEhKHBsYXRmb3JtLndpbmRvdyAmJiBwbGF0Zm9ybS53aW5kb3cubG9jYWxTdG9yYWdlICE9IG51bGwpO1xyXG4gICAgfTtcclxuICAgIFdlYlN0b3JhZ2VTaGFyZWRDbGllbnRTdGF0ZS5wcm90b3R5cGUuc3RhcnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRzbGliLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgZXhpc3RpbmdDbGllbnRzLCBfaSwgZXhpc3RpbmdDbGllbnRzXzEsIGNsaWVudElkLCBzdG9yYWdlSXRlbSwgY2xpZW50U3RhdGUsIG9ubGluZVN0YXRlSlNPTiwgb25saW5lU3RhdGUsIF9hLCBfYiwgZXZlbnRfMTtcclxuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYykge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYy5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXJ0KCF0aGlzLnN0YXJ0ZWQsICdXZWJTdG9yYWdlU2hhcmVkQ2xpZW50U3RhdGUgYWxyZWFkeSBzdGFydGVkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFzc2VydCh0aGlzLnN5bmNFbmdpbmUgIT09IG51bGwsICdzeW5jRW5naW5lIHByb3BlcnR5IG11c3QgYmUgc2V0IGJlZm9yZSBjYWxsaW5nIHN0YXJ0KCknKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXJ0KHRoaXMub25saW5lU3RhdGVIYW5kbGVyICE9PSBudWxsLCAnb25saW5lU3RhdGVIYW5kbGVyIHByb3BlcnR5IG11c3QgYmUgc2V0IGJlZm9yZSBjYWxsaW5nIHN0YXJ0KCknKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5zeW5jRW5naW5lLmdldEFjdGl2ZUNsaWVudHMoKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBleGlzdGluZ0NsaWVudHMgPSBfYy5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoX2kgPSAwLCBleGlzdGluZ0NsaWVudHNfMSA9IGV4aXN0aW5nQ2xpZW50czsgX2kgPCBleGlzdGluZ0NsaWVudHNfMS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWVudElkID0gZXhpc3RpbmdDbGllbnRzXzFbX2ldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNsaWVudElkID09PSB0aGlzLmxvY2FsQ2xpZW50SWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0b3JhZ2VJdGVtID0gdGhpcy5nZXRJdGVtKGNyZWF0ZVdlYlN0b3JhZ2VDbGllbnRTdGF0ZUtleSh0aGlzLnBlcnNpc3RlbmNlS2V5LCBjbGllbnRJZCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN0b3JhZ2VJdGVtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpZW50U3RhdGUgPSBSZW1vdGVDbGllbnRTdGF0ZS5mcm9tV2ViU3RvcmFnZUVudHJ5KGNsaWVudElkLCBzdG9yYWdlSXRlbSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNsaWVudFN0YXRlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZlQ2xpZW50c1tjbGllbnRTdGF0ZS5jbGllbnRJZF0gPSBjbGllbnRTdGF0ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wZXJzaXN0Q2xpZW50U3RhdGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb25saW5lU3RhdGVKU09OID0gdGhpcy5zdG9yYWdlLmdldEl0ZW0odGhpcy5vbmxpbmVTdGF0ZUtleSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvbmxpbmVTdGF0ZUpTT04pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9ubGluZVN0YXRlID0gdGhpcy5mcm9tV2ViU3RvcmFnZU9ubGluZVN0YXRlKG9ubGluZVN0YXRlSlNPTik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob25saW5lU3RhdGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZU9ubGluZVN0YXRlRXZlbnQob25saW5lU3RhdGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoX2EgPSAwLCBfYiA9IHRoaXMuZWFybHlFdmVudHM7IF9hIDwgX2IubGVuZ3RoOyBfYSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudF8xID0gX2JbX2FdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVXZWJTdG9yYWdlRXZlbnQoZXZlbnRfMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lYXJseUV2ZW50cyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBSZWdpc3RlciBhIHdpbmRvdyB1bmxvYWQgaG9vayB0byByZW1vdmUgdGhlIGNsaWVudCBtZXRhZGF0YSBlbnRyeSBmcm9tXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdlYlN0b3JhZ2UgZXZlbiBpZiBgc2h1dGRvd24oKWAgd2FzIG5vdCBjYWxsZWQuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGxhdGZvcm0ud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3VubG9hZCcsIGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLnNodXRkb3duKCk7IH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIFdlYlN0b3JhZ2VTaGFyZWRDbGllbnRTdGF0ZS5wcm90b3R5cGUud3JpdGVTZXF1ZW5jZU51bWJlciA9IGZ1bmN0aW9uIChzZXF1ZW5jZU51bWJlcikge1xyXG4gICAgICAgIHRoaXMuc2V0SXRlbSh0aGlzLnNlcXVlbmNlTnVtYmVyS2V5LCBKU09OLnN0cmluZ2lmeShzZXF1ZW5jZU51bWJlcikpO1xyXG4gICAgfTtcclxuICAgIFdlYlN0b3JhZ2VTaGFyZWRDbGllbnRTdGF0ZS5wcm90b3R5cGUuZ2V0QWxsQWN0aXZlUXVlcnlUYXJnZXRzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBhY3RpdmVUYXJnZXRzID0gdGFyZ2V0SWRTZXQoKTtcclxuICAgICAgICBmb3JFYWNoKHRoaXMuYWN0aXZlQ2xpZW50cywgZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcclxuICAgICAgICAgICAgYWN0aXZlVGFyZ2V0cyA9IGFjdGl2ZVRhcmdldHMudW5pb25XaXRoKHZhbHVlLmFjdGl2ZVRhcmdldElkcyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIGFjdGl2ZVRhcmdldHM7XHJcbiAgICB9O1xyXG4gICAgV2ViU3RvcmFnZVNoYXJlZENsaWVudFN0YXRlLnByb3RvdHlwZS5pc0FjdGl2ZVF1ZXJ5VGFyZ2V0ID0gZnVuY3Rpb24gKHRhcmdldElkKSB7XHJcbiAgICAgICAgLy8gVGhpcyBpcyBub3QgdXNpbmcgYG9iai5mb3JFYWNoYCBzaW5jZSBgZm9yRWFjaGAgZG9lc24ndCBzdXBwb3J0IGVhcmx5XHJcbiAgICAgICAgLy8gcmV0dXJuLlxyXG4gICAgICAgIGZvciAodmFyIGNsaWVudElkIGluIHRoaXMuYWN0aXZlQ2xpZW50cykge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5hY3RpdmVDbGllbnRzLmhhc093blByb3BlcnR5KGNsaWVudElkKSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuYWN0aXZlQ2xpZW50c1tjbGllbnRJZF0uYWN0aXZlVGFyZ2V0SWRzLmhhcyh0YXJnZXRJZCkpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9O1xyXG4gICAgV2ViU3RvcmFnZVNoYXJlZENsaWVudFN0YXRlLnByb3RvdHlwZS5hZGRQZW5kaW5nTXV0YXRpb24gPSBmdW5jdGlvbiAoYmF0Y2hJZCkge1xyXG4gICAgICAgIHRoaXMucGVyc2lzdE11dGF0aW9uU3RhdGUoYmF0Y2hJZCwgJ3BlbmRpbmcnKTtcclxuICAgIH07XHJcbiAgICBXZWJTdG9yYWdlU2hhcmVkQ2xpZW50U3RhdGUucHJvdG90eXBlLnVwZGF0ZU11dGF0aW9uU3RhdGUgPSBmdW5jdGlvbiAoYmF0Y2hJZCwgc3RhdGUsIGVycm9yKSB7XHJcbiAgICAgICAgdGhpcy5wZXJzaXN0TXV0YXRpb25TdGF0ZShiYXRjaElkLCBzdGF0ZSwgZXJyb3IpO1xyXG4gICAgICAgIC8vIE9uY2UgYSBmaW5hbCBtdXRhdGlvbiByZXN1bHQgaXMgb2JzZXJ2ZWQgYnkgb3RoZXIgY2xpZW50cywgdGhleSBubyBsb25nZXJcclxuICAgICAgICAvLyBhY2Nlc3MgdGhlIG11dGF0aW9uJ3MgbWV0YWRhdGEgZW50cnkuIFNpbmNlIFdlYlN0b3JhZ2UgcmVwbGF5cyBldmVudHNcclxuICAgICAgICAvLyBpbiBvcmRlciwgaXQgaXMgc2FmZSB0byBkZWxldGUgdGhlIGVudHJ5IHJpZ2h0IGFmdGVyIHVwZGF0aW5nIGl0LlxyXG4gICAgICAgIHRoaXMucmVtb3ZlTXV0YXRpb25TdGF0ZShiYXRjaElkKTtcclxuICAgIH07XHJcbiAgICBXZWJTdG9yYWdlU2hhcmVkQ2xpZW50U3RhdGUucHJvdG90eXBlLmFkZExvY2FsUXVlcnlUYXJnZXQgPSBmdW5jdGlvbiAodGFyZ2V0SWQpIHtcclxuICAgICAgICB2YXIgcXVlcnlTdGF0ZSA9ICdub3QtY3VycmVudCc7XHJcbiAgICAgICAgLy8gTG9va3VwIGFuIGV4aXN0aW5nIHF1ZXJ5IHN0YXRlIGlmIHRoZSB0YXJnZXQgSUQgd2FzIGFscmVhZHkgcmVnaXN0ZXJlZFxyXG4gICAgICAgIC8vIGJ5IGFub3RoZXIgdGFiXHJcbiAgICAgICAgaWYgKHRoaXMuaXNBY3RpdmVRdWVyeVRhcmdldCh0YXJnZXRJZCkpIHtcclxuICAgICAgICAgICAgdmFyIHN0b3JhZ2VJdGVtID0gdGhpcy5zdG9yYWdlLmdldEl0ZW0oY3JlYXRlV2ViU3RvcmFnZVF1ZXJ5VGFyZ2V0TWV0YWRhdGFLZXkodGhpcy5wZXJzaXN0ZW5jZUtleSwgdGFyZ2V0SWQpKTtcclxuICAgICAgICAgICAgaWYgKHN0b3JhZ2VJdGVtKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbWV0YWRhdGEgPSBRdWVyeVRhcmdldE1ldGFkYXRhLmZyb21XZWJTdG9yYWdlRW50cnkodGFyZ2V0SWQsIHN0b3JhZ2VJdGVtKTtcclxuICAgICAgICAgICAgICAgIGlmIChtZXRhZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHF1ZXJ5U3RhdGUgPSBtZXRhZGF0YS5zdGF0ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmxvY2FsQ2xpZW50U3RhdGUuYWRkUXVlcnlUYXJnZXQodGFyZ2V0SWQpO1xyXG4gICAgICAgIHRoaXMucGVyc2lzdENsaWVudFN0YXRlKCk7XHJcbiAgICAgICAgcmV0dXJuIHF1ZXJ5U3RhdGU7XHJcbiAgICB9O1xyXG4gICAgV2ViU3RvcmFnZVNoYXJlZENsaWVudFN0YXRlLnByb3RvdHlwZS5yZW1vdmVMb2NhbFF1ZXJ5VGFyZ2V0ID0gZnVuY3Rpb24gKHRhcmdldElkKSB7XHJcbiAgICAgICAgdGhpcy5sb2NhbENsaWVudFN0YXRlLnJlbW92ZVF1ZXJ5VGFyZ2V0KHRhcmdldElkKTtcclxuICAgICAgICB0aGlzLnBlcnNpc3RDbGllbnRTdGF0ZSgpO1xyXG4gICAgfTtcclxuICAgIFdlYlN0b3JhZ2VTaGFyZWRDbGllbnRTdGF0ZS5wcm90b3R5cGUuaXNMb2NhbFF1ZXJ5VGFyZ2V0ID0gZnVuY3Rpb24gKHRhcmdldElkKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubG9jYWxDbGllbnRTdGF0ZS5hY3RpdmVUYXJnZXRJZHMuaGFzKHRhcmdldElkKTtcclxuICAgIH07XHJcbiAgICBXZWJTdG9yYWdlU2hhcmVkQ2xpZW50U3RhdGUucHJvdG90eXBlLmNsZWFyUXVlcnlTdGF0ZSA9IGZ1bmN0aW9uICh0YXJnZXRJZCkge1xyXG4gICAgICAgIHRoaXMucmVtb3ZlSXRlbShjcmVhdGVXZWJTdG9yYWdlUXVlcnlUYXJnZXRNZXRhZGF0YUtleSh0aGlzLnBlcnNpc3RlbmNlS2V5LCB0YXJnZXRJZCkpO1xyXG4gICAgfTtcclxuICAgIFdlYlN0b3JhZ2VTaGFyZWRDbGllbnRTdGF0ZS5wcm90b3R5cGUudXBkYXRlUXVlcnlTdGF0ZSA9IGZ1bmN0aW9uICh0YXJnZXRJZCwgc3RhdGUsIGVycm9yKSB7XHJcbiAgICAgICAgdGhpcy5wZXJzaXN0UXVlcnlUYXJnZXRTdGF0ZSh0YXJnZXRJZCwgc3RhdGUsIGVycm9yKTtcclxuICAgIH07XHJcbiAgICBXZWJTdG9yYWdlU2hhcmVkQ2xpZW50U3RhdGUucHJvdG90eXBlLmhhbmRsZVVzZXJDaGFuZ2UgPSBmdW5jdGlvbiAodXNlciwgcmVtb3ZlZEJhdGNoSWRzLCBhZGRlZEJhdGNoSWRzKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICByZW1vdmVkQmF0Y2hJZHMuZm9yRWFjaChmdW5jdGlvbiAoYmF0Y2hJZCkge1xyXG4gICAgICAgICAgICBfdGhpcy5yZW1vdmVNdXRhdGlvblN0YXRlKGJhdGNoSWQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuY3VycmVudFVzZXIgPSB1c2VyO1xyXG4gICAgICAgIGFkZGVkQmF0Y2hJZHMuZm9yRWFjaChmdW5jdGlvbiAoYmF0Y2hJZCkge1xyXG4gICAgICAgICAgICBfdGhpcy5hZGRQZW5kaW5nTXV0YXRpb24oYmF0Y2hJZCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgV2ViU3RvcmFnZVNoYXJlZENsaWVudFN0YXRlLnByb3RvdHlwZS5zZXRPbmxpbmVTdGF0ZSA9IGZ1bmN0aW9uIChvbmxpbmVTdGF0ZSkge1xyXG4gICAgICAgIHRoaXMucGVyc2lzdE9ubGluZVN0YXRlKG9ubGluZVN0YXRlKTtcclxuICAgIH07XHJcbiAgICBXZWJTdG9yYWdlU2hhcmVkQ2xpZW50U3RhdGUucHJvdG90eXBlLnNodXRkb3duID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICh0aGlzLnN0YXJ0ZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5wbGF0Zm9ybS53aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignc3RvcmFnZScsIHRoaXMuc3RvcmFnZUxpc3RlbmVyKTtcclxuICAgICAgICAgICAgdGhpcy5yZW1vdmVJdGVtKHRoaXMubG9jYWxDbGllbnRTdG9yYWdlS2V5KTtcclxuICAgICAgICAgICAgdGhpcy5zdGFydGVkID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFdlYlN0b3JhZ2VTaGFyZWRDbGllbnRTdGF0ZS5wcm90b3R5cGUuZ2V0SXRlbSA9IGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICB2YXIgdmFsdWUgPSB0aGlzLnN0b3JhZ2UuZ2V0SXRlbShrZXkpO1xyXG4gICAgICAgIGRlYnVnKExPR19UQUckYSwgJ1JFQUQnLCBrZXksIHZhbHVlKTtcclxuICAgICAgICByZXR1cm4gdmFsdWU7XHJcbiAgICB9O1xyXG4gICAgV2ViU3RvcmFnZVNoYXJlZENsaWVudFN0YXRlLnByb3RvdHlwZS5zZXRJdGVtID0gZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcclxuICAgICAgICBkZWJ1ZyhMT0dfVEFHJGEsICdTRVQnLCBrZXksIHZhbHVlKTtcclxuICAgICAgICB0aGlzLnN0b3JhZ2Uuc2V0SXRlbShrZXksIHZhbHVlKTtcclxuICAgIH07XHJcbiAgICBXZWJTdG9yYWdlU2hhcmVkQ2xpZW50U3RhdGUucHJvdG90eXBlLnJlbW92ZUl0ZW0gPSBmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgICAgZGVidWcoTE9HX1RBRyRhLCAnUkVNT1ZFJywga2V5KTtcclxuICAgICAgICB0aGlzLnN0b3JhZ2UucmVtb3ZlSXRlbShrZXkpO1xyXG4gICAgfTtcclxuICAgIFdlYlN0b3JhZ2VTaGFyZWRDbGllbnRTdGF0ZS5wcm90b3R5cGUuaGFuZGxlV2ViU3RvcmFnZUV2ZW50ID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBpZiAoZXZlbnQuc3RvcmFnZUFyZWEgPT09IHRoaXMuc3RvcmFnZSkge1xyXG4gICAgICAgICAgICBkZWJ1ZyhMT0dfVEFHJGEsICdFVkVOVCcsIGV2ZW50LmtleSwgZXZlbnQubmV3VmFsdWUpO1xyXG4gICAgICAgICAgICBpZiAoZXZlbnQua2V5ID09PSB0aGlzLmxvY2FsQ2xpZW50U3RvcmFnZUtleSkge1xyXG4gICAgICAgICAgICAgICAgZXJyb3IoJ1JlY2VpdmVkIFdlYlN0b3JhZ2Ugbm90aWZpY2F0aW9uIGZvciBsb2NhbCBjaGFuZ2UuIEFub3RoZXIgY2xpZW50IG1pZ2h0IGhhdmUgJyArXHJcbiAgICAgICAgICAgICAgICAgICAgJ2dhcmJhZ2UtY29sbGVjdGVkIG91ciBzdGF0ZScpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMucXVldWUuZW5xdWV1ZUFuZEZvcmdldChmdW5jdGlvbiAoKSB7IHJldHVybiB0c2xpYi5fX2F3YWl0ZXIoX3RoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgY2xpZW50U3RhdGUsIGNsaWVudElkLCBtdXRhdGlvbk1ldGFkYXRhLCBxdWVyeVRhcmdldE1ldGFkYXRhLCBvbmxpbmVTdGF0ZSwgc2VxdWVuY2VOdW1iZXI7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHNsaWIuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLnN0YXJ0ZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lYXJseUV2ZW50cy5wdXNoKGV2ZW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAoZXZlbnQua2V5ID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuY2xpZW50U3RhdGVLZXlSZS50ZXN0KGV2ZW50LmtleSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50Lm5ld1ZhbHVlICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWVudFN0YXRlID0gdGhpcy5mcm9tV2ViU3RvcmFnZUNsaWVudFN0YXRlKGV2ZW50LmtleSwgZXZlbnQubmV3VmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNsaWVudFN0YXRlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMuaGFuZGxlQ2xpZW50U3RhdGVFdmVudChjbGllbnRTdGF0ZS5jbGllbnRJZCwgY2xpZW50U3RhdGUpXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWVudElkID0gdGhpcy5mcm9tV2ViU3RvcmFnZUNsaWVudFN0YXRlS2V5KGV2ZW50LmtleSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdGhpcy5oYW5kbGVDbGllbnRTdGF0ZUV2ZW50KGNsaWVudElkLCBudWxsKV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5tdXRhdGlvbkJhdGNoS2V5UmUudGVzdChldmVudC5rZXkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChldmVudC5uZXdWYWx1ZSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbXV0YXRpb25NZXRhZGF0YSA9IHRoaXMuZnJvbVdlYlN0b3JhZ2VNdXRhdGlvbk1ldGFkYXRhKGV2ZW50LmtleSwgZXZlbnQubmV3VmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG11dGF0aW9uTWV0YWRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdGhpcy5oYW5kbGVNdXRhdGlvbkJhdGNoRXZlbnQobXV0YXRpb25NZXRhZGF0YSldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMucXVlcnlUYXJnZXRLZXlSZS50ZXN0KGV2ZW50LmtleSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50Lm5ld1ZhbHVlICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdWVyeVRhcmdldE1ldGFkYXRhID0gdGhpcy5mcm9tV2ViU3RvcmFnZVF1ZXJ5VGFyZ2V0TWV0YWRhdGEoZXZlbnQua2V5LCBldmVudC5uZXdWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocXVlcnlUYXJnZXRNZXRhZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0aGlzLmhhbmRsZVF1ZXJ5VGFyZ2V0RXZlbnQocXVlcnlUYXJnZXRNZXRhZGF0YSldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGV2ZW50LmtleSA9PT0gdGhpcy5vbmxpbmVTdGF0ZUtleSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXZlbnQubmV3VmFsdWUgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9ubGluZVN0YXRlID0gdGhpcy5mcm9tV2ViU3RvcmFnZU9ubGluZVN0YXRlKGV2ZW50Lm5ld1ZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvbmxpbmVTdGF0ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0aGlzLmhhbmRsZU9ubGluZVN0YXRlRXZlbnQob25saW5lU3RhdGUpXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChldmVudC5rZXkgPT09IHRoaXMuc2VxdWVuY2VOdW1iZXJLZXkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXJ0KCEhdGhpcy5zZXF1ZW5jZU51bWJlckhhbmRsZXIsICdNaXNzaW5nIHNlcXVlbmNlTnVtYmVySGFuZGxlcicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXF1ZW5jZU51bWJlciA9IGZyb21XZWJTdG9yYWdlU2VxdWVuY2VOdW1iZXIoZXZlbnQubmV3VmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2VxdWVuY2VOdW1iZXIgIT09IExpc3RlblNlcXVlbmNlLklOVkFMSUQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VxdWVuY2VOdW1iZXJIYW5kbGVyKHNlcXVlbmNlTnVtYmVyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7IH0pO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoV2ViU3RvcmFnZVNoYXJlZENsaWVudFN0YXRlLnByb3RvdHlwZSwgXCJsb2NhbENsaWVudFN0YXRlXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYWN0aXZlQ2xpZW50c1t0aGlzLmxvY2FsQ2xpZW50SWRdO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgV2ViU3RvcmFnZVNoYXJlZENsaWVudFN0YXRlLnByb3RvdHlwZS5wZXJzaXN0Q2xpZW50U3RhdGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5zZXRJdGVtKHRoaXMubG9jYWxDbGllbnRTdG9yYWdlS2V5LCB0aGlzLmxvY2FsQ2xpZW50U3RhdGUudG9XZWJTdG9yYWdlSlNPTigpKTtcclxuICAgIH07XHJcbiAgICBXZWJTdG9yYWdlU2hhcmVkQ2xpZW50U3RhdGUucHJvdG90eXBlLnBlcnNpc3RNdXRhdGlvblN0YXRlID0gZnVuY3Rpb24gKGJhdGNoSWQsIHN0YXRlLCBlcnJvcikge1xyXG4gICAgICAgIHZhciBtdXRhdGlvblN0YXRlID0gbmV3IE11dGF0aW9uTWV0YWRhdGEodGhpcy5jdXJyZW50VXNlciwgYmF0Y2hJZCwgc3RhdGUsIGVycm9yKTtcclxuICAgICAgICB2YXIgbXV0YXRpb25LZXkgPSBjcmVhdGVXZWJTdG9yYWdlTXV0YXRpb25CYXRjaEtleSh0aGlzLnBlcnNpc3RlbmNlS2V5LCB0aGlzLmN1cnJlbnRVc2VyLCBiYXRjaElkKTtcclxuICAgICAgICB0aGlzLnNldEl0ZW0obXV0YXRpb25LZXksIG11dGF0aW9uU3RhdGUudG9XZWJTdG9yYWdlSlNPTigpKTtcclxuICAgIH07XHJcbiAgICBXZWJTdG9yYWdlU2hhcmVkQ2xpZW50U3RhdGUucHJvdG90eXBlLnJlbW92ZU11dGF0aW9uU3RhdGUgPSBmdW5jdGlvbiAoYmF0Y2hJZCkge1xyXG4gICAgICAgIHZhciBtdXRhdGlvbktleSA9IGNyZWF0ZVdlYlN0b3JhZ2VNdXRhdGlvbkJhdGNoS2V5KHRoaXMucGVyc2lzdGVuY2VLZXksIHRoaXMuY3VycmVudFVzZXIsIGJhdGNoSWQpO1xyXG4gICAgICAgIHRoaXMucmVtb3ZlSXRlbShtdXRhdGlvbktleSk7XHJcbiAgICB9O1xyXG4gICAgV2ViU3RvcmFnZVNoYXJlZENsaWVudFN0YXRlLnByb3RvdHlwZS5wZXJzaXN0T25saW5lU3RhdGUgPSBmdW5jdGlvbiAob25saW5lU3RhdGUpIHtcclxuICAgICAgICB2YXIgZW50cnkgPSB7XHJcbiAgICAgICAgICAgIGNsaWVudElkOiB0aGlzLmxvY2FsQ2xpZW50SWQsXHJcbiAgICAgICAgICAgIG9ubGluZVN0YXRlOiBPbmxpbmVTdGF0ZVtvbmxpbmVTdGF0ZV1cclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuc3RvcmFnZS5zZXRJdGVtKHRoaXMub25saW5lU3RhdGVLZXksIEpTT04uc3RyaW5naWZ5KGVudHJ5KSk7XHJcbiAgICB9O1xyXG4gICAgV2ViU3RvcmFnZVNoYXJlZENsaWVudFN0YXRlLnByb3RvdHlwZS5wZXJzaXN0UXVlcnlUYXJnZXRTdGF0ZSA9IGZ1bmN0aW9uICh0YXJnZXRJZCwgc3RhdGUsIGVycm9yKSB7XHJcbiAgICAgICAgdmFyIHRhcmdldEtleSA9IGNyZWF0ZVdlYlN0b3JhZ2VRdWVyeVRhcmdldE1ldGFkYXRhS2V5KHRoaXMucGVyc2lzdGVuY2VLZXksIHRhcmdldElkKTtcclxuICAgICAgICB2YXIgdGFyZ2V0TWV0YWRhdGEgPSBuZXcgUXVlcnlUYXJnZXRNZXRhZGF0YSh0YXJnZXRJZCwgc3RhdGUsIGVycm9yKTtcclxuICAgICAgICB0aGlzLnNldEl0ZW0odGFyZ2V0S2V5LCB0YXJnZXRNZXRhZGF0YS50b1dlYlN0b3JhZ2VKU09OKCkpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUGFyc2VzIGEgY2xpZW50IHN0YXRlIGtleSBpbiBXZWJTdG9yYWdlLiBSZXR1cm5zIG51bGwgaWYgdGhlIGtleSBkb2VzIG5vdFxyXG4gICAgICogbWF0Y2ggdGhlIGV4cGVjdGVkIGtleSBmb3JtYXQuXHJcbiAgICAgKi9cclxuICAgIFdlYlN0b3JhZ2VTaGFyZWRDbGllbnRTdGF0ZS5wcm90b3R5cGUuZnJvbVdlYlN0b3JhZ2VDbGllbnRTdGF0ZUtleSA9IGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICB2YXIgbWF0Y2ggPSB0aGlzLmNsaWVudFN0YXRlS2V5UmUuZXhlYyhrZXkpO1xyXG4gICAgICAgIHJldHVybiBtYXRjaCA/IG1hdGNoWzFdIDogbnVsbDtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFBhcnNlcyBhIGNsaWVudCBzdGF0ZSBpbiBXZWJTdG9yYWdlLiBSZXR1cm5zICdudWxsJyBpZiB0aGUgdmFsdWUgY291bGQgbm90XHJcbiAgICAgKiBiZSBwYXJzZWQuXHJcbiAgICAgKi9cclxuICAgIFdlYlN0b3JhZ2VTaGFyZWRDbGllbnRTdGF0ZS5wcm90b3R5cGUuZnJvbVdlYlN0b3JhZ2VDbGllbnRTdGF0ZSA9IGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XHJcbiAgICAgICAgdmFyIGNsaWVudElkID0gdGhpcy5mcm9tV2ViU3RvcmFnZUNsaWVudFN0YXRlS2V5KGtleSk7XHJcbiAgICAgICAgYXNzZXJ0KGNsaWVudElkICE9PSBudWxsLCBcIkNhbm5vdCBwYXJzZSBjbGllbnQgc3RhdGUga2V5ICdcIiArIGtleSArIFwiJ1wiKTtcclxuICAgICAgICByZXR1cm4gUmVtb3RlQ2xpZW50U3RhdGUuZnJvbVdlYlN0b3JhZ2VFbnRyeShjbGllbnRJZCwgdmFsdWUpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUGFyc2VzIGEgbXV0YXRpb24gYmF0Y2ggc3RhdGUgaW4gV2ViU3RvcmFnZS4gUmV0dXJucyAnbnVsbCcgaWYgdGhlIHZhbHVlXHJcbiAgICAgKiBjb3VsZCBub3QgYmUgcGFyc2VkLlxyXG4gICAgICovXHJcbiAgICBXZWJTdG9yYWdlU2hhcmVkQ2xpZW50U3RhdGUucHJvdG90eXBlLmZyb21XZWJTdG9yYWdlTXV0YXRpb25NZXRhZGF0YSA9IGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XHJcbiAgICAgICAgdmFyIG1hdGNoID0gdGhpcy5tdXRhdGlvbkJhdGNoS2V5UmUuZXhlYyhrZXkpO1xyXG4gICAgICAgIGFzc2VydChtYXRjaCAhPT0gbnVsbCwgXCJDYW5ub3QgcGFyc2UgbXV0YXRpb24gYmF0Y2gga2V5ICdcIiArIGtleSArIFwiJ1wiKTtcclxuICAgICAgICB2YXIgYmF0Y2hJZCA9IE51bWJlcihtYXRjaFsxXSk7XHJcbiAgICAgICAgdmFyIHVzZXJJZCA9IG1hdGNoWzJdICE9PSB1bmRlZmluZWQgPyBtYXRjaFsyXSA6IG51bGw7XHJcbiAgICAgICAgcmV0dXJuIE11dGF0aW9uTWV0YWRhdGEuZnJvbVdlYlN0b3JhZ2VFbnRyeShuZXcgVXNlcih1c2VySWQpLCBiYXRjaElkLCB2YWx1ZSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBQYXJzZXMgYSBxdWVyeSB0YXJnZXQgc3RhdGUgZnJvbSBXZWJTdG9yYWdlLiBSZXR1cm5zICdudWxsJyBpZiB0aGUgdmFsdWVcclxuICAgICAqIGNvdWxkIG5vdCBiZSBwYXJzZWQuXHJcbiAgICAgKi9cclxuICAgIFdlYlN0b3JhZ2VTaGFyZWRDbGllbnRTdGF0ZS5wcm90b3R5cGUuZnJvbVdlYlN0b3JhZ2VRdWVyeVRhcmdldE1ldGFkYXRhID0gZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcclxuICAgICAgICB2YXIgbWF0Y2ggPSB0aGlzLnF1ZXJ5VGFyZ2V0S2V5UmUuZXhlYyhrZXkpO1xyXG4gICAgICAgIGFzc2VydChtYXRjaCAhPT0gbnVsbCwgXCJDYW5ub3QgcGFyc2UgcXVlcnkgdGFyZ2V0IGtleSAnXCIgKyBrZXkgKyBcIidcIik7XHJcbiAgICAgICAgdmFyIHRhcmdldElkID0gTnVtYmVyKG1hdGNoWzFdKTtcclxuICAgICAgICByZXR1cm4gUXVlcnlUYXJnZXRNZXRhZGF0YS5mcm9tV2ViU3RvcmFnZUVudHJ5KHRhcmdldElkLCB2YWx1ZSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBQYXJzZXMgYW4gb25saW5lIHN0YXRlIGZyb20gV2ViU3RvcmFnZS4gUmV0dXJucyAnbnVsbCcgaWYgdGhlIHZhbHVlXHJcbiAgICAgKiBjb3VsZCBub3QgYmUgcGFyc2VkLlxyXG4gICAgICovXHJcbiAgICBXZWJTdG9yYWdlU2hhcmVkQ2xpZW50U3RhdGUucHJvdG90eXBlLmZyb21XZWJTdG9yYWdlT25saW5lU3RhdGUgPSBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICByZXR1cm4gU2hhcmVkT25saW5lU3RhdGUuZnJvbVdlYlN0b3JhZ2VFbnRyeSh2YWx1ZSk7XHJcbiAgICB9O1xyXG4gICAgV2ViU3RvcmFnZVNoYXJlZENsaWVudFN0YXRlLnByb3RvdHlwZS5oYW5kbGVNdXRhdGlvbkJhdGNoRXZlbnQgPSBmdW5jdGlvbiAobXV0YXRpb25CYXRjaCkge1xyXG4gICAgICAgIHJldHVybiB0c2xpYi5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKG11dGF0aW9uQmF0Y2gudXNlci51aWQgIT09IHRoaXMuY3VycmVudFVzZXIudWlkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVidWcoTE9HX1RBRyRhLCBcIklnbm9yaW5nIG11dGF0aW9uIGZvciBub24tYWN0aXZlIHVzZXIgXCIgKyBtdXRhdGlvbkJhdGNoLnVzZXIudWlkKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdGhpcy5zeW5jRW5naW5lLmFwcGx5QmF0Y2hTdGF0ZShtdXRhdGlvbkJhdGNoLmJhdGNoSWQsIG11dGF0aW9uQmF0Y2guc3RhdGUsIG11dGF0aW9uQmF0Y2guZXJyb3IpXTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgV2ViU3RvcmFnZVNoYXJlZENsaWVudFN0YXRlLnByb3RvdHlwZS5oYW5kbGVRdWVyeVRhcmdldEV2ZW50ID0gZnVuY3Rpb24gKHRhcmdldE1ldGFkYXRhKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc3luY0VuZ2luZS5hcHBseVRhcmdldFN0YXRlKHRhcmdldE1ldGFkYXRhLnRhcmdldElkLCB0YXJnZXRNZXRhZGF0YS5zdGF0ZSwgdGFyZ2V0TWV0YWRhdGEuZXJyb3IpO1xyXG4gICAgfTtcclxuICAgIFdlYlN0b3JhZ2VTaGFyZWRDbGllbnRTdGF0ZS5wcm90b3R5cGUuaGFuZGxlQ2xpZW50U3RhdGVFdmVudCA9IGZ1bmN0aW9uIChjbGllbnRJZCwgY2xpZW50U3RhdGUpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhciBleGlzdGluZ1RhcmdldHMgPSB0aGlzLmdldEFsbEFjdGl2ZVF1ZXJ5VGFyZ2V0cygpO1xyXG4gICAgICAgIGlmIChjbGllbnRTdGF0ZSkge1xyXG4gICAgICAgICAgICB0aGlzLmFjdGl2ZUNsaWVudHNbY2xpZW50SWRdID0gY2xpZW50U3RhdGU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBkZWxldGUgdGhpcy5hY3RpdmVDbGllbnRzW2NsaWVudElkXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIG5ld1RhcmdldHMgPSB0aGlzLmdldEFsbEFjdGl2ZVF1ZXJ5VGFyZ2V0cygpO1xyXG4gICAgICAgIHZhciBhZGRlZFRhcmdldHMgPSBbXTtcclxuICAgICAgICB2YXIgcmVtb3ZlZFRhcmdldHMgPSBbXTtcclxuICAgICAgICBuZXdUYXJnZXRzLmZvckVhY2goZnVuY3Rpb24gKHRhcmdldElkKSB7IHJldHVybiB0c2xpYi5fX2F3YWl0ZXIoX3RoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYi5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIGlmICghZXhpc3RpbmdUYXJnZXRzLmhhcyh0YXJnZXRJZCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBhZGRlZFRhcmdldHMucHVzaCh0YXJnZXRJZCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pOyB9KTtcclxuICAgICAgICBleGlzdGluZ1RhcmdldHMuZm9yRWFjaChmdW5jdGlvbiAodGFyZ2V0SWQpIHsgcmV0dXJuIHRzbGliLl9fYXdhaXRlcihfdGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFuZXdUYXJnZXRzLmhhcyh0YXJnZXRJZCkpIHtcclxuICAgICAgICAgICAgICAgICAgICByZW1vdmVkVGFyZ2V0cy5wdXNoKHRhcmdldElkKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7IH0pO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnN5bmNFbmdpbmUuYXBwbHlBY3RpdmVUYXJnZXRzQ2hhbmdlKGFkZGVkVGFyZ2V0cywgcmVtb3ZlZFRhcmdldHMpO1xyXG4gICAgfTtcclxuICAgIFdlYlN0b3JhZ2VTaGFyZWRDbGllbnRTdGF0ZS5wcm90b3R5cGUuaGFuZGxlT25saW5lU3RhdGVFdmVudCA9IGZ1bmN0aW9uIChvbmxpbmVTdGF0ZSkge1xyXG4gICAgICAgIC8vIFdlIGNoZWNrIHdoZXRoZXIgdGhlIGNsaWVudCB0aGF0IHdyb3RlIHRoaXMgb25saW5lIHN0YXRlIGlzIHN0aWxsIGFjdGl2ZVxyXG4gICAgICAgIC8vIGJ5IGNvbXBhcmluZyBpdHMgY2xpZW50IElEIHRvIHRoZSBsaXN0IG9mIGNsaWVudHMga2VwdCBhY3RpdmUgaW5cclxuICAgICAgICAvLyBJbmRleGVkRGIuIElmIGEgY2xpZW50IGRvZXMgbm90IHVwZGF0ZSB0aGVpciBJbmRleGVkRGIgY2xpZW50IHN0YXRlXHJcbiAgICAgICAgLy8gd2l0aGluIDUgc2Vjb25kcywgaXQgaXMgY29uc2lkZXJlZCBpbmFjdGl2ZSBhbmQgd2UgZG9uJ3QgZW1pdCBhbiBvbmxpbmVcclxuICAgICAgICAvLyBzdGF0ZSBldmVudC5cclxuICAgICAgICBpZiAodGhpcy5hY3RpdmVDbGllbnRzW29ubGluZVN0YXRlLmNsaWVudElkXSkge1xyXG4gICAgICAgICAgICB0aGlzLm9ubGluZVN0YXRlSGFuZGxlcihvbmxpbmVTdGF0ZS5vbmxpbmVTdGF0ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHJldHVybiBXZWJTdG9yYWdlU2hhcmVkQ2xpZW50U3RhdGU7XHJcbn0oKSk7XHJcbmZ1bmN0aW9uIGZyb21XZWJTdG9yYWdlU2VxdWVuY2VOdW1iZXIoc2VxU3RyaW5nKSB7XHJcbiAgICB2YXIgc2VxdWVuY2VOdW1iZXIgPSBMaXN0ZW5TZXF1ZW5jZS5JTlZBTElEO1xyXG4gICAgaWYgKHNlcVN0cmluZyAhPSBudWxsKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgdmFyIHBhcnNlZCA9IEpTT04ucGFyc2Uoc2VxU3RyaW5nKTtcclxuICAgICAgICAgICAgYXNzZXJ0KHR5cGVvZiBwYXJzZWQgPT09ICdudW1iZXInLCAnRm91bmQgbm9uLW51bWVyaWMgc2VxdWVuY2UgbnVtYmVyJyk7XHJcbiAgICAgICAgICAgIHNlcXVlbmNlTnVtYmVyID0gcGFyc2VkO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICBlcnJvcihMT0dfVEFHJGEsICdGYWlsZWQgdG8gcmVhZCBzZXF1ZW5jZSBudW1iZXIgZnJvbSBXZWJTdG9yYWdlJywgZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHNlcXVlbmNlTnVtYmVyO1xyXG59XHJcbi8qKlxyXG4gKiBgTWVtb3J5U2hhcmVkQ2xpZW50U3RhdGVgIGlzIGEgc2ltcGxlIGltcGxlbWVudGF0aW9uIG9mIFNoYXJlZENsaWVudFN0YXRlIGZvclxyXG4gKiBjbGllbnRzIHVzaW5nIG1lbW9yeSBwZXJzaXN0ZW5jZS4gVGhlIHN0YXRlIGluIHRoaXMgY2xhc3MgcmVtYWlucyBmdWxseVxyXG4gKiBpc29sYXRlZCBhbmQgbm8gc3luY2hyb25pemF0aW9uIGlzIHBlcmZvcm1lZC5cclxuICovXHJcbnZhciBNZW1vcnlTaGFyZWRDbGllbnRTdGF0ZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIE1lbW9yeVNoYXJlZENsaWVudFN0YXRlKCkge1xyXG4gICAgICAgIHRoaXMubG9jYWxTdGF0ZSA9IG5ldyBMb2NhbENsaWVudFN0YXRlKCk7XHJcbiAgICAgICAgdGhpcy5xdWVyeVN0YXRlID0ge307XHJcbiAgICAgICAgdGhpcy5zeW5jRW5naW5lID0gbnVsbDtcclxuICAgICAgICB0aGlzLm9ubGluZVN0YXRlSGFuZGxlciA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5zZXF1ZW5jZU51bWJlckhhbmRsZXIgPSBudWxsO1xyXG4gICAgfVxyXG4gICAgTWVtb3J5U2hhcmVkQ2xpZW50U3RhdGUucHJvdG90eXBlLmFkZFBlbmRpbmdNdXRhdGlvbiA9IGZ1bmN0aW9uIChiYXRjaElkKSB7XHJcbiAgICAgICAgLy8gTm8gb3AuXHJcbiAgICB9O1xyXG4gICAgTWVtb3J5U2hhcmVkQ2xpZW50U3RhdGUucHJvdG90eXBlLnVwZGF0ZU11dGF0aW9uU3RhdGUgPSBmdW5jdGlvbiAoYmF0Y2hJZCwgc3RhdGUsIGVycm9yKSB7XHJcbiAgICAgICAgLy8gTm8gb3AuXHJcbiAgICB9O1xyXG4gICAgTWVtb3J5U2hhcmVkQ2xpZW50U3RhdGUucHJvdG90eXBlLmFkZExvY2FsUXVlcnlUYXJnZXQgPSBmdW5jdGlvbiAodGFyZ2V0SWQpIHtcclxuICAgICAgICB0aGlzLmxvY2FsU3RhdGUuYWRkUXVlcnlUYXJnZXQodGFyZ2V0SWQpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnF1ZXJ5U3RhdGVbdGFyZ2V0SWRdIHx8ICdub3QtY3VycmVudCc7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5U2hhcmVkQ2xpZW50U3RhdGUucHJvdG90eXBlLnVwZGF0ZVF1ZXJ5U3RhdGUgPSBmdW5jdGlvbiAodGFyZ2V0SWQsIHN0YXRlLCBlcnJvcikge1xyXG4gICAgICAgIHRoaXMucXVlcnlTdGF0ZVt0YXJnZXRJZF0gPSBzdGF0ZTtcclxuICAgIH07XHJcbiAgICBNZW1vcnlTaGFyZWRDbGllbnRTdGF0ZS5wcm90b3R5cGUucmVtb3ZlTG9jYWxRdWVyeVRhcmdldCA9IGZ1bmN0aW9uICh0YXJnZXRJZCkge1xyXG4gICAgICAgIHRoaXMubG9jYWxTdGF0ZS5yZW1vdmVRdWVyeVRhcmdldCh0YXJnZXRJZCk7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5U2hhcmVkQ2xpZW50U3RhdGUucHJvdG90eXBlLmlzTG9jYWxRdWVyeVRhcmdldCA9IGZ1bmN0aW9uICh0YXJnZXRJZCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmxvY2FsU3RhdGUuYWN0aXZlVGFyZ2V0SWRzLmhhcyh0YXJnZXRJZCk7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5U2hhcmVkQ2xpZW50U3RhdGUucHJvdG90eXBlLmNsZWFyUXVlcnlTdGF0ZSA9IGZ1bmN0aW9uICh0YXJnZXRJZCkge1xyXG4gICAgICAgIGRlbGV0ZSB0aGlzLnF1ZXJ5U3RhdGVbdGFyZ2V0SWRdO1xyXG4gICAgfTtcclxuICAgIE1lbW9yeVNoYXJlZENsaWVudFN0YXRlLnByb3RvdHlwZS5nZXRBbGxBY3RpdmVRdWVyeVRhcmdldHMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubG9jYWxTdGF0ZS5hY3RpdmVUYXJnZXRJZHM7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5U2hhcmVkQ2xpZW50U3RhdGUucHJvdG90eXBlLmlzQWN0aXZlUXVlcnlUYXJnZXQgPSBmdW5jdGlvbiAodGFyZ2V0SWQpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5sb2NhbFN0YXRlLmFjdGl2ZVRhcmdldElkcy5oYXModGFyZ2V0SWQpO1xyXG4gICAgfTtcclxuICAgIE1lbW9yeVNoYXJlZENsaWVudFN0YXRlLnByb3RvdHlwZS5zdGFydCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmxvY2FsU3RhdGUgPSBuZXcgTG9jYWxDbGllbnRTdGF0ZSgpO1xyXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcclxuICAgIH07XHJcbiAgICBNZW1vcnlTaGFyZWRDbGllbnRTdGF0ZS5wcm90b3R5cGUuaGFuZGxlVXNlckNoYW5nZSA9IGZ1bmN0aW9uICh1c2VyLCByZW1vdmVkQmF0Y2hJZHMsIGFkZGVkQmF0Y2hJZHMpIHtcclxuICAgICAgICAvLyBObyBvcC5cclxuICAgIH07XHJcbiAgICBNZW1vcnlTaGFyZWRDbGllbnRTdGF0ZS5wcm90b3R5cGUuc2V0T25saW5lU3RhdGUgPSBmdW5jdGlvbiAob25saW5lU3RhdGUpIHtcclxuICAgICAgICAvLyBObyBvcC5cclxuICAgIH07XHJcbiAgICBNZW1vcnlTaGFyZWRDbGllbnRTdGF0ZS5wcm90b3R5cGUuc2h1dGRvd24gPSBmdW5jdGlvbiAoKSB7IH07XHJcbiAgICBNZW1vcnlTaGFyZWRDbGllbnRTdGF0ZS5wcm90b3R5cGUud3JpdGVTZXF1ZW5jZU51bWJlciA9IGZ1bmN0aW9uIChzZXF1ZW5jZU51bWJlcikgeyB9O1xyXG4gICAgcmV0dXJuIE1lbW9yeVNoYXJlZENsaWVudFN0YXRlO1xyXG59KCkpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxudmFyIExPR19UQUckYiA9ICdGaXJlc3RvcmVDbGllbnQnO1xyXG4vKiogRE9NRXhjZXB0aW9uIGVycm9yIGNvZGUgY29uc3RhbnRzLiAqL1xyXG52YXIgRE9NX0VYQ0VQVElPTl9JTlZBTElEX1NUQVRFID0gMTE7XHJcbnZhciBET01fRVhDRVBUSU9OX0FCT1JURUQgPSAyMDtcclxudmFyIERPTV9FWENFUFRJT05fUVVPVEFfRVhDRUVERUQgPSAyMjtcclxudmFyIEluZGV4ZWREYlBlcnNpc3RlbmNlU2V0dGluZ3MgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBJbmRleGVkRGJQZXJzaXN0ZW5jZVNldHRpbmdzKGNhY2hlU2l6ZUJ5dGVzLCBzeW5jaHJvbml6ZVRhYnMpIHtcclxuICAgICAgICB0aGlzLmNhY2hlU2l6ZUJ5dGVzID0gY2FjaGVTaXplQnl0ZXM7XHJcbiAgICAgICAgdGhpcy5zeW5jaHJvbml6ZVRhYnMgPSBzeW5jaHJvbml6ZVRhYnM7XHJcbiAgICB9XHJcbiAgICBJbmRleGVkRGJQZXJzaXN0ZW5jZVNldHRpbmdzLnByb3RvdHlwZS5scnVQYXJhbXMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIExydVBhcmFtcy53aXRoQ2FjaGVTaXplKHRoaXMuY2FjaGVTaXplQnl0ZXMpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBJbmRleGVkRGJQZXJzaXN0ZW5jZVNldHRpbmdzO1xyXG59KCkpO1xyXG52YXIgTWVtb3J5UGVyc2lzdGVuY2VTZXR0aW5ncyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIE1lbW9yeVBlcnNpc3RlbmNlU2V0dGluZ3MoKSB7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gTWVtb3J5UGVyc2lzdGVuY2VTZXR0aW5ncztcclxufSgpKTtcclxuLyoqXHJcbiAqIEZpcmVzdG9yZUNsaWVudCBpcyBhIHRvcC1sZXZlbCBjbGFzcyB0aGF0IGNvbnN0cnVjdHMgYW5kIG93bnMgYWxsIG9mIHRoZVxyXG4gKiBwaWVjZXMgb2YgdGhlIGNsaWVudCBTREsgYXJjaGl0ZWN0dXJlLiBJdCBpcyByZXNwb25zaWJsZSBmb3IgY3JlYXRpbmcgdGhlXHJcbiAqIGFzeW5jIHF1ZXVlIHRoYXQgaXMgc2hhcmVkIGJ5IGFsbCBvZiB0aGUgb3RoZXIgY29tcG9uZW50cyBpbiB0aGUgc3lzdGVtLlxyXG4gKi9cclxudmFyIEZpcmVzdG9yZUNsaWVudCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEZpcmVzdG9yZUNsaWVudChwbGF0Zm9ybSwgZGF0YWJhc2VJbmZvLCBjcmVkZW50aWFscywgXHJcbiAgICAvKipcclxuICAgICAqIEFzeW5jaHJvbm91cyBxdWV1ZSByZXNwb25zaWJsZSBmb3IgYWxsIG9mIG91ciBpbnRlcm5hbCBwcm9jZXNzaW5nLiBXaGVuXHJcbiAgICAgKiB3ZSBnZXQgaW5jb21pbmcgd29yayBmcm9tIHRoZSB1c2VyICh2aWEgcHVibGljIEFQSSkgb3IgdGhlIG5ldHdvcmtcclxuICAgICAqIChpbmNvbWluZyBHUlBDIG1lc3NhZ2VzKSwgd2Ugc2hvdWxkIGFsd2F5cyBzY2hlZHVsZSBvbnRvIHRoaXMgcXVldWUuXHJcbiAgICAgKiBUaGlzIGVuc3VyZXMgYWxsIG9mIG91ciB3b3JrIGlzIHByb3Blcmx5IHNlcmlhbGl6ZWQgKGUuZy4gd2UgZG9uJ3RcclxuICAgICAqIHN0YXJ0IHByb2Nlc3NpbmcgYSBuZXcgb3BlcmF0aW9uIHdoaWxlIHRoZSBwcmV2aW91cyBvbmUgaXMgd2FpdGluZyBmb3JcclxuICAgICAqIGFuIGFzeW5jIEkvTyB0byBjb21wbGV0ZSkuXHJcbiAgICAgKi9cclxuICAgIGFzeW5jUXVldWUpIHtcclxuICAgICAgICB0aGlzLnBsYXRmb3JtID0gcGxhdGZvcm07XHJcbiAgICAgICAgdGhpcy5kYXRhYmFzZUluZm8gPSBkYXRhYmFzZUluZm87XHJcbiAgICAgICAgdGhpcy5jcmVkZW50aWFscyA9IGNyZWRlbnRpYWxzO1xyXG4gICAgICAgIHRoaXMuYXN5bmNRdWV1ZSA9IGFzeW5jUXVldWU7XHJcbiAgICAgICAgdGhpcy5jbGllbnRJZCA9IEF1dG9JZC5uZXdJZCgpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBTdGFydHMgdXAgdGhlIEZpcmVzdG9yZUNsaWVudCwgcmV0dXJuaW5nIG9ubHkgd2hldGhlciBvciBub3QgZW5hYmxpbmdcclxuICAgICAqIHBlcnNpc3RlbmNlIHN1Y2NlZWRlZC5cclxuICAgICAqXHJcbiAgICAgKiBUaGUgaW50ZW50IGhlcmUgaXMgdG8gXCJkbyB0aGUgcmlnaHQgdGhpbmdcIiBhcyBmYXIgYXMgdXNlcnMgYXJlIGNvbmNlcm5lZC5cclxuICAgICAqIE5hbWVseSwgaW4gY2FzZXMgd2hlcmUgb2ZmbGluZSBwZXJzaXN0ZW5jZSBpcyByZXF1ZXN0ZWQgYW5kIHBvc3NpYmxlLFxyXG4gICAgICogZW5hYmxlIGl0LCBidXQgb3RoZXJ3aXNlIGZhbGwgYmFjayB0byBwZXJzaXN0ZW5jZSBkaXNhYmxlZC4gRm9yIHRoZSBtb3N0XHJcbiAgICAgKiBwYXJ0IHdlIGV4cGVjdCB0aGlzIHRvIHN1Y2NlZWQgb25lIHdheSBvciB0aGUgb3RoZXIgc28gd2UgZG9uJ3QgZXhwZWN0IG91clxyXG4gICAgICogdXNlcnMgdG8gYWN0dWFsbHkgd2FpdCBvbiB0aGUgZmlyZXN0b3JlLmVuYWJsZVBlcnNpc3RlbmNlIFByb21pc2Ugc2luY2VcclxuICAgICAqIHRoZXkgZ2VuZXJhbGx5IHdvbid0IGNhcmUuXHJcbiAgICAgKlxyXG4gICAgICogT2YgY291cnNlIHNvbWUgdXNlcnMgYWN0dWFsbHkgZG8gY2FyZSBhYm91dCB3aGV0aGVyIG9yIG5vdCBwZXJzaXN0ZW5jZVxyXG4gICAgICogd2FzIHN1Y2Nlc3NmdWxseSBlbmFibGVkLCBzbyB0aGUgUHJvbWlzZSByZXR1cm5lZCBmcm9tIHRoaXMgbWV0aG9kXHJcbiAgICAgKiBpbmRpY2F0ZXMgdGhpcyBvdXRjb21lLlxyXG4gICAgICpcclxuICAgICAqIFRoaXMgcHJlc2VudHMgYSBwcm9ibGVtIHRob3VnaDogZXZlbiBiZWZvcmUgZW5hYmxlUGVyc2lzdGVuY2UgcmVzb2x2ZXMgb3JcclxuICAgICAqIHJlamVjdHMsIHVzZXJzIG1heSBoYXZlIG1hZGUgY2FsbHMgdG8gZS5nLiBmaXJlc3RvcmUuY29sbGVjdGlvbigpIHdoaWNoXHJcbiAgICAgKiBtZWFucyB0aGF0IHRoZSBGaXJlc3RvcmVDbGllbnQgaW4gdGhlcmUgd2lsbCBiZSBhdmFpbGFibGUgYW5kIHdpbGwgYmVcclxuICAgICAqIGVucXVldWluZyBhY3Rpb25zIG9uIHRoZSBhc3luYyBxdWV1ZS5cclxuICAgICAqXHJcbiAgICAgKiBNZWFud2hpbGUgYW55IGZhaWx1cmUgb2YgYW4gb3BlcmF0aW9uIG9uIHRoZSBhc3luYyBxdWV1ZSBjYXVzZXMgaXQgdG9cclxuICAgICAqIHBhbmljIGFuZCByZWplY3QgYW55IGZ1cnRoZXIgd29yaywgb24gdGhlIHByZW1pc2UgdGhhdCB1bmhhbmRsZWQgZXJyb3JzXHJcbiAgICAgKiBhcmUgZmF0YWwuXHJcbiAgICAgKlxyXG4gICAgICogQ29uc2VxdWVudGx5IHRoZSBmYWxsYmFjayBpcyBoYW5kbGVkIGludGVybmFsbHkgaGVyZSBpbiBzdGFydCwgYW5kIGlmIHRoZVxyXG4gICAgICogZmFsbGJhY2sgc3VjY2VlZHMgd2Ugc2lnbmFsIHN1Y2Nlc3MgdG8gdGhlIGFzeW5jIHF1ZXVlIGV2ZW4gdGhvdWdoIHRoZVxyXG4gICAgICogc3RhcnQoKSBpdHNlbGYgc2lnbmFscyBmYWlsdXJlLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBwZXJzaXN0ZW5jZVNldHRpbmdzIFNldHRpbmdzIG9iamVjdCB0byBjb25maWd1cmUgb2ZmbGluZVxyXG4gICAgICogICAgIHBlcnNpc3RlbmNlLlxyXG4gICAgICogQHJldHVybnMgQSBkZWZlcnJlZCByZXN1bHQgaW5kaWNhdGluZyB0aGUgdXNlci12aXNpYmxlIHJlc3VsdCBvZiBlbmFibGluZ1xyXG4gICAgICogICAgIG9mZmxpbmUgcGVyc2lzdGVuY2UuIFRoaXMgbWV0aG9kIHdpbGwgcmVqZWN0IHRoaXMgaWYgSW5kZXhlZERCIGZhaWxzIHRvXHJcbiAgICAgKiAgICAgc3RhcnQgZm9yIGFueSByZWFzb24uIElmIHVzZVBlcnNpc3RlbmNlIGlzIGZhbHNlIHRoaXMgaXNcclxuICAgICAqICAgICB1bmNvbmRpdGlvbmFsbHkgcmVzb2x2ZWQuXHJcbiAgICAgKi9cclxuICAgIEZpcmVzdG9yZUNsaWVudC5wcm90b3R5cGUuc3RhcnQgPSBmdW5jdGlvbiAocGVyc2lzdGVuY2VTZXR0aW5ncykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy52ZXJpZnlOb3RUZXJtaW5hdGVkKCk7XHJcbiAgICAgICAgLy8gV2UgZGVmZXIgb3VyIGluaXRpYWxpemF0aW9uIHVudGlsIHdlIGdldCB0aGUgY3VycmVudCB1c2VyIGZyb21cclxuICAgICAgICAvLyBzZXRDaGFuZ2VMaXN0ZW5lcigpLiBXZSBibG9jayB0aGUgYXN5bmMgcXVldWUgdW50aWwgd2UgZ290IHRoZSBpbml0aWFsXHJcbiAgICAgICAgLy8gdXNlciBhbmQgdGhlIGluaXRpYWxpemF0aW9uIGlzIGNvbXBsZXRlZC4gVGhpcyB3aWxsIHByZXZlbnQgYW55IHNjaGVkdWxlZFxyXG4gICAgICAgIC8vIHdvcmsgZnJvbSBoYXBwZW5pbmcgYmVmb3JlIGluaXRpYWxpemF0aW9uIGlzIGNvbXBsZXRlZC5cclxuICAgICAgICAvL1xyXG4gICAgICAgIC8vIElmIGluaXRpYWxpemF0aW9uRG9uZSByZXNvbHZlZCB0aGVuIHRoZSBGaXJlc3RvcmVDbGllbnQgaXMgaW4gYSB1c2FibGVcclxuICAgICAgICAvLyBzdGF0ZS5cclxuICAgICAgICB2YXIgaW5pdGlhbGl6YXRpb25Eb25lID0gbmV3IERlZmVycmVkKCk7XHJcbiAgICAgICAgLy8gSWYgdXNlUGVyc2lzdGVuY2UgaXMgdHJ1ZSwgY2VydGFpbiBjbGFzc2VzIG9mIGVycm9ycyB3aGlsZSBzdGFydGluZyBhcmVcclxuICAgICAgICAvLyByZWNvdmVyYWJsZSBidXQgb25seSBieSBmYWxsaW5nIGJhY2sgdG8gcGVyc2lzdGVuY2UgZGlzYWJsZWQuXHJcbiAgICAgICAgLy9cclxuICAgICAgICAvLyBJZiB0aGVyZSdzIGFuIGVycm9yIGluIHRoZSBmaXJzdCBjYXNlIGJ1dCBub3QgaW4gcmVjb3Zlcnkgd2UgY2Fubm90XHJcbiAgICAgICAgLy8gcmVqZWN0IHRoZSBwcm9taXNlIGJsb2NraW5nIHRoZSBhc3luYyBxdWV1ZSBiZWNhdXNlIHRoaXMgd2lsbCBjYXVzZSB0aGVcclxuICAgICAgICAvLyBhc3luYyBxdWV1ZSB0byBwYW5pYy5cclxuICAgICAgICB2YXIgcGVyc2lzdGVuY2VSZXN1bHQgPSBuZXcgRGVmZXJyZWQoKTtcclxuICAgICAgICB2YXIgaW5pdGlhbGl6ZWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmNyZWRlbnRpYWxzLnNldENoYW5nZUxpc3RlbmVyKGZ1bmN0aW9uICh1c2VyKSB7XHJcbiAgICAgICAgICAgIGlmICghaW5pdGlhbGl6ZWQpIHtcclxuICAgICAgICAgICAgICAgIGluaXRpYWxpemVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIF90aGlzLmluaXRpYWxpemVQZXJzaXN0ZW5jZShwZXJzaXN0ZW5jZVNldHRpbmdzLCBwZXJzaXN0ZW5jZVJlc3VsdCwgdXNlcilcclxuICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAobWF5YmVMcnVHYykgeyByZXR1cm4gX3RoaXMuaW5pdGlhbGl6ZVJlc3QodXNlciwgbWF5YmVMcnVHYyk7IH0pXHJcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oaW5pdGlhbGl6YXRpb25Eb25lLnJlc29sdmUsIGluaXRpYWxpemF0aW9uRG9uZS5yZWplY3QpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuaGFuZGxlQ3JlZGVudGlhbENoYW5nZSh1c2VyKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gQmxvY2sgdGhlIGFzeW5jIHF1ZXVlIHVudGlsIGluaXRpYWxpemF0aW9uIGlzIGRvbmVcclxuICAgICAgICB0aGlzLmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBpbml0aWFsaXphdGlvbkRvbmUucHJvbWlzZTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyBSZXR1cm4gb25seSB0aGUgcmVzdWx0IG9mIGVuYWJsaW5nIHBlcnNpc3RlbmNlLiBOb3RlIHRoYXQgdGhpcyBkb2VzIG5vdFxyXG4gICAgICAgIC8vIG5lZWQgdG8gYXdhaXQgdGhlIGNvbXBsZXRpb24gb2YgaW5pdGlhbGl6YXRpb25Eb25lIGJlY2F1c2UgdGhlIHJlc3VsdCBvZlxyXG4gICAgICAgIC8vIHRoaXMgbWV0aG9kIHNob3VsZCBub3QgcmVmbGVjdCBhbnkgb3RoZXIga2luZCBvZiBmYWlsdXJlIHRvIHN0YXJ0LlxyXG4gICAgICAgIHJldHVybiBwZXJzaXN0ZW5jZVJlc3VsdC5wcm9taXNlO1xyXG4gICAgfTtcclxuICAgIC8qKiBFbmFibGVzIHRoZSBuZXR3b3JrIGNvbm5lY3Rpb24gYW5kIHJlcXVldWVzIGFsbCBwZW5kaW5nIG9wZXJhdGlvbnMuICovXHJcbiAgICBGaXJlc3RvcmVDbGllbnQucHJvdG90eXBlLmVuYWJsZU5ldHdvcmsgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB0aGlzLnZlcmlmeU5vdFRlcm1pbmF0ZWQoKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5hc3luY1F1ZXVlLmVucXVldWUoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXMuc3luY0VuZ2luZS5lbmFibGVOZXR3b3JrKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBJbml0aWFsaXplcyBwZXJzaXN0ZW50IHN0b3JhZ2UsIGF0dGVtcHRpbmcgdG8gdXNlIEluZGV4ZWREQiBpZlxyXG4gICAgICogdXNlUGVyc2lzdGVuY2UgaXMgdHJ1ZSBvciBtZW1vcnktb25seSBpZiBmYWxzZS5cclxuICAgICAqXHJcbiAgICAgKiBJZiBJbmRleGVkREIgZmFpbHMgYmVjYXVzZSBpdCdzIGFscmVhZHkgb3BlbiBpbiBhbm90aGVyIHRhYiBvciBiZWNhdXNlIHRoZVxyXG4gICAgICogcGxhdGZvcm0gY2FuJ3QgcG9zc2libHkgc3VwcG9ydCBvdXIgaW1wbGVtZW50YXRpb24gdGhlbiB0aGlzIG1ldGhvZCByZWplY3RzXHJcbiAgICAgKiB0aGUgcGVyc2lzdGVuY2VSZXN1bHQgYW5kIGZhbGxzIGJhY2sgb24gbWVtb3J5LW9ubHkgcGVyc2lzdGVuY2UuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHBlcnNpc3RlbmNlU2V0dGluZ3MgU2V0dGluZ3Mgb2JqZWN0IHRvIGNvbmZpZ3VyZSBvZmZsaW5lIHBlcnNpc3RlbmNlXHJcbiAgICAgKiBAcGFyYW0gcGVyc2lzdGVuY2VSZXN1bHQgQSBkZWZlcnJlZCByZXN1bHQgaW5kaWNhdGluZyB0aGUgdXNlci12aXNpYmxlXHJcbiAgICAgKiAgICAgcmVzdWx0IG9mIGVuYWJsaW5nIG9mZmxpbmUgcGVyc2lzdGVuY2UuIFRoaXMgbWV0aG9kIHdpbGwgcmVqZWN0IHRoaXMgaWZcclxuICAgICAqICAgICBJbmRleGVkREIgZmFpbHMgdG8gc3RhcnQgZm9yIGFueSByZWFzb24uIElmIHVzZVBlcnNpc3RlbmNlIGlzIGZhbHNlXHJcbiAgICAgKiAgICAgdGhpcyBpcyB1bmNvbmRpdGlvbmFsbHkgcmVzb2x2ZWQuXHJcbiAgICAgKiBAcmV0dXJucyBhIFByb21pc2UgaW5kaWNhdGluZyB3aGV0aGVyIG9yIG5vdCBpbml0aWFsaXphdGlvbiBzaG91bGRcclxuICAgICAqICAgICBjb250aW51ZSwgaS5lLiB0aGF0IG9uZSBvZiB0aGUgcGVyc2lzdGVuY2UgaW1wbGVtZW50YXRpb25zIGFjdHVhbGx5XHJcbiAgICAgKiAgICAgc3VjY2VlZGVkLlxyXG4gICAgICovXHJcbiAgICBGaXJlc3RvcmVDbGllbnQucHJvdG90eXBlLmluaXRpYWxpemVQZXJzaXN0ZW5jZSA9IGZ1bmN0aW9uIChwZXJzaXN0ZW5jZVNldHRpbmdzLCBwZXJzaXN0ZW5jZVJlc3VsdCwgdXNlcikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgaWYgKHBlcnNpc3RlbmNlU2V0dGluZ3MgaW5zdGFuY2VvZiBJbmRleGVkRGJQZXJzaXN0ZW5jZVNldHRpbmdzKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnN0YXJ0SW5kZXhlZERiUGVyc2lzdGVuY2UodXNlciwgcGVyc2lzdGVuY2VTZXR0aW5ncylcclxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChtYXliZUxydUdjKSB7XHJcbiAgICAgICAgICAgICAgICBwZXJzaXN0ZW5jZVJlc3VsdC5yZXNvbHZlKCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbWF5YmVMcnVHYztcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIC8vIFJlZ2FyZGxlc3Mgb2Ygd2hldGhlciBvciBub3QgdGhlIHJldHJ5IHN1Y2NlZWRzLCBmcm9tIGFuIHVzZXJcclxuICAgICAgICAgICAgICAgIC8vIHBlcnNwZWN0aXZlLCBvZmZsaW5lIHBlcnNpc3RlbmNlIGhhcyBmYWlsZWQuXHJcbiAgICAgICAgICAgICAgICBwZXJzaXN0ZW5jZVJlc3VsdC5yZWplY3QoZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgLy8gQW4gdW5rbm93biBmYWlsdXJlIG9uIHRoZSBmaXJzdCBzdGFnZSBzaHV0cyBldmVyeXRoaW5nIGRvd24uXHJcbiAgICAgICAgICAgICAgICBpZiAoIV90aGlzLmNhbkZhbGxiYWNrKGVycm9yKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdFcnJvciBlbmFibGluZyBvZmZsaW5lIHBlcnNpc3RlbmNlLiBGYWxsaW5nIGJhY2sgdG8nICtcclxuICAgICAgICAgICAgICAgICAgICAnIHBlcnNpc3RlbmNlIGRpc2FibGVkOiAnICtcclxuICAgICAgICAgICAgICAgICAgICBlcnJvcik7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuc3RhcnRNZW1vcnlQZXJzaXN0ZW5jZSgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIFdoZW4gdXNlUGVyc2lzdGVuY2UgPT0gZmFsc2UsIGVuYWJsaW5nIG9mZmxpbmUgcGVyc2lzdGVuY2UgaXMgZGVmaW5lZFxyXG4gICAgICAgICAgICAvLyB0byB1bmNvbmRpdGlvbmFsbHkgc3VjY2VlZC4gVGhpcyBhbGxvd3Mgc3RhcnQoKSB0byBoYXZlIHRoZSBzYW1lXHJcbiAgICAgICAgICAgIC8vIHNpZ25hdHVyZSBmb3IgYm90aCBjYXNlcywgZGVzcGl0ZSB0aGUgZmFjdCB0aGF0IHRoZSByZXR1cm5lZCBwcm9taXNlXHJcbiAgICAgICAgICAgIC8vIGlzIG9ubHkgdXNlZCBpbiB0aGUgZW5hYmxlUGVyc2lzdGVuY2UgY2FsbC5cclxuICAgICAgICAgICAgcGVyc2lzdGVuY2VSZXN1bHQucmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zdGFydE1lbW9yeVBlcnNpc3RlbmNlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogRGVjaWRlcyB3aGV0aGVyIHRoZSBwcm92aWRlZCBlcnJvciBhbGxvd3MgdXMgdG8gZ3JhY2VmdWxseSBkaXNhYmxlXHJcbiAgICAgKiBwZXJzaXN0ZW5jZSAoYXMgb3Bwb3NlZCB0byBjcmFzaGluZyB0aGUgY2xpZW50KS5cclxuICAgICAqL1xyXG4gICAgRmlyZXN0b3JlQ2xpZW50LnByb3RvdHlwZS5jYW5GYWxsYmFjayA9IGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEZpcmVzdG9yZUVycm9yKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAoZXJyb3IuY29kZSA9PT0gQ29kZS5GQUlMRURfUFJFQ09ORElUSU9OIHx8XHJcbiAgICAgICAgICAgICAgICBlcnJvci5jb2RlID09PSBDb2RlLlVOSU1QTEVNRU5URUQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh0eXBlb2YgRE9NRXhjZXB0aW9uICE9PSAndW5kZWZpbmVkJyAmJlxyXG4gICAgICAgICAgICBlcnJvciBpbnN0YW5jZW9mIERPTUV4Y2VwdGlvbikge1xyXG4gICAgICAgICAgICAvLyBUaGVyZSBhcmUgYSBmZXcga25vd24gY2lyY3Vtc3RhbmNlcyB3aGVyZSB3ZSBjYW4gb3BlbiBJbmRleGVkRGIgYnV0XHJcbiAgICAgICAgICAgIC8vIHRyeWluZyB0byByZWFkL3dyaXRlIHdpbGwgZmFpbCAoZS5nLiBxdW90YSBleGNlZWRlZCkuIEZvclxyXG4gICAgICAgICAgICAvLyB3ZWxsLXVuZGVyc3Rvb2QgY2FzZXMsIHdlIGF0dGVtcHQgdG8gZGV0ZWN0IHRoZXNlIGFuZCB0aGVuIGdyYWNlZnVsbHlcclxuICAgICAgICAgICAgLy8gZmFsbCBiYWNrIHRvIG1lbW9yeSBwZXJzaXN0ZW5jZS5cclxuICAgICAgICAgICAgLy8gTk9URTogUmF0aGVyIHRoYW4gY29udGludWUgdG8gYWRkIHRvIHRoaXMgbGlzdCwgd2UgY291bGQgZGVjaWRlIHRvXHJcbiAgICAgICAgICAgIC8vIGFsd2F5cyBmYWxsIGJhY2ssIHdpdGggdGhlIHJpc2sgdGhhdCB3ZSBtaWdodCBhY2NpZGVudGFsbHkgaGlkZSBlcnJvcnNcclxuICAgICAgICAgICAgLy8gcmVwcmVzZW50aW5nIGFjdHVhbCBTREsgYnVncy5cclxuICAgICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgLy8gV2hlbiB0aGUgYnJvd3NlciBpcyBvdXQgb2YgcXVvdGEgd2UgY291bGQgZ2V0IGVpdGhlciBxdW90YSBleGNlZWRlZFxyXG4gICAgICAgICAgICAvLyBvciBhbiBhYm9ydGVkIGVycm9yIGRlcGVuZGluZyBvbiB3aGV0aGVyIHRoZSBlcnJvciBoYXBwZW5lZCBkdXJpbmdcclxuICAgICAgICAgICAgLy8gc2NoZW1hIG1pZ3JhdGlvbi5cclxuICAgICAgICAgICAgZXJyb3IuY29kZSA9PT0gRE9NX0VYQ0VQVElPTl9RVU9UQV9FWENFRURFRCB8fFxyXG4gICAgICAgICAgICAgICAgZXJyb3IuY29kZSA9PT0gRE9NX0VYQ0VQVElPTl9BQk9SVEVEIHx8XHJcbiAgICAgICAgICAgICAgICAvLyBGaXJlZm94IFByaXZhdGUgQnJvd3NpbmcgbW9kZSBkaXNhYmxlcyBJbmRleGVkRGIgYW5kIHJldHVybnNcclxuICAgICAgICAgICAgICAgIC8vIElOVkFMSURfU1RBVEUgZm9yIGFueSB1c2FnZS5cclxuICAgICAgICAgICAgICAgIGVycm9yLmNvZGUgPT09IERPTV9FWENFUFRJT05fSU5WQUxJRF9TVEFURSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQ2hlY2tzIHRoYXQgdGhlIGNsaWVudCBoYXMgbm90IGJlZW4gdGVybWluYXRlZC4gRW5zdXJlcyB0aGF0IG90aGVyIG1ldGhvZHMgb25cclxuICAgICAqIHRoaXMgY2xhc3MgY2Fubm90IGJlIGNhbGxlZCBhZnRlciB0aGUgY2xpZW50IGlzIHRlcm1pbmF0ZWQuXHJcbiAgICAgKi9cclxuICAgIEZpcmVzdG9yZUNsaWVudC5wcm90b3R5cGUudmVyaWZ5Tm90VGVybWluYXRlZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAodGhpcy5hc3luY1F1ZXVlLmlzU2h1dHRpbmdEb3duKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLkZBSUxFRF9QUkVDT05ESVRJT04sICdUaGUgY2xpZW50IGhhcyBhbHJlYWR5IGJlZW4gdGVybWluYXRlZC4nKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBTdGFydHMgSW5kZXhlZERCLWJhc2VkIHBlcnNpc3RlbmNlLlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm5zIEEgcHJvbWlzZSBpbmRpY2F0aW5nIHN1Y2Nlc3Mgb3IgZmFpbHVyZS5cclxuICAgICAqL1xyXG4gICAgRmlyZXN0b3JlQ2xpZW50LnByb3RvdHlwZS5zdGFydEluZGV4ZWREYlBlcnNpc3RlbmNlID0gZnVuY3Rpb24gKHVzZXIsIHNldHRpbmdzKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICAvLyBUT0RPKGh0dHA6Ly9iLzMzMzg0NTIzKTogRm9yIG5vdyB3ZSBqdXN0IGRpc2FibGUgZ2FyYmFnZSBjb2xsZWN0aW9uXHJcbiAgICAgICAgLy8gd2hlbiBwZXJzaXN0ZW5jZSBpcyBlbmFibGVkLlxyXG4gICAgICAgIHZhciBwZXJzaXN0ZW5jZUtleSA9IEluZGV4ZWREYlBlcnNpc3RlbmNlLmJ1aWxkU3RvcmFnZVByZWZpeCh0aGlzLmRhdGFiYXNlSW5mbyk7XHJcbiAgICAgICAgLy8gT3B0IHRvIHVzZSBwcm90bzMgSlNPTiBpbiBjYXNlIHRoZSBwbGF0Zm9ybSBkb2Vzbid0IHN1cHBvcnQgVWludDhBcnJheS5cclxuICAgICAgICB2YXIgc2VyaWFsaXplciA9IG5ldyBKc29uUHJvdG9TZXJpYWxpemVyKHRoaXMuZGF0YWJhc2VJbmZvLmRhdGFiYXNlSWQsIHtcclxuICAgICAgICAgICAgdXNlUHJvdG8zSnNvbjogdHJ1ZVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKS50aGVuKGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRzbGliLl9fYXdhaXRlcihfdGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGxydVBhcmFtcywgcGVyc2lzdGVuY2U7XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYi5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZXR0aW5ncy5zeW5jaHJvbml6ZVRhYnMgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICFXZWJTdG9yYWdlU2hhcmVkQ2xpZW50U3RhdGUuaXNBdmFpbGFibGUodGhpcy5wbGF0Zm9ybSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLlVOSU1QTEVNRU5URUQsICdJbmRleGVkREIgcGVyc2lzdGVuY2UgaXMgb25seSBhdmFpbGFibGUgb24gcGxhdGZvcm1zIHRoYXQgc3VwcG9ydCBMb2NhbFN0b3JhZ2UuJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgbHJ1UGFyYW1zID0gc2V0dGluZ3MubHJ1UGFyYW1zKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hhcmVkQ2xpZW50U3RhdGUgPSBzZXR0aW5ncy5zeW5jaHJvbml6ZVRhYnNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gbmV3IFdlYlN0b3JhZ2VTaGFyZWRDbGllbnRTdGF0ZSh0aGlzLmFzeW5jUXVldWUsIHRoaXMucGxhdGZvcm0sIHBlcnNpc3RlbmNlS2V5LCB0aGlzLmNsaWVudElkLCB1c2VyKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBuZXcgTWVtb3J5U2hhcmVkQ2xpZW50U3RhdGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgSW5kZXhlZERiUGVyc2lzdGVuY2UuY3JlYXRlSW5kZXhlZERiUGVyc2lzdGVuY2Uoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsbG93VGFiU3luY2hyb25pemF0aW9uOiBzZXR0aW5ncy5zeW5jaHJvbml6ZVRhYnMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVyc2lzdGVuY2VLZXk6IHBlcnNpc3RlbmNlS2V5LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWVudElkOiB0aGlzLmNsaWVudElkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYXRmb3JtOiB0aGlzLnBsYXRmb3JtLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXVlOiB0aGlzLmFzeW5jUXVldWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VyaWFsaXplcjogc2VyaWFsaXplcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBscnVQYXJhbXM6IGxydVBhcmFtcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXF1ZW5jZU51bWJlclN5bmNlcjogdGhpcy5zaGFyZWRDbGllbnRTdGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGVyc2lzdGVuY2UgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGVyc2lzdGVuY2UgPSBwZXJzaXN0ZW5jZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHBlcnNpc3RlbmNlLnJlZmVyZW5jZURlbGVnYXRlLmdhcmJhZ2VDb2xsZWN0b3JdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTsgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBTdGFydHMgTWVtb3J5LWJhY2tlZCBwZXJzaXN0ZW5jZS4gSW4gcHJhY3RpY2UgdGhpcyBjYW5ub3QgZmFpbC5cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyBBIHByb21pc2UgdGhhdCB3aWxsIHN1Y2Nlc3NmdWxseSByZXNvbHZlLlxyXG4gICAgICovXHJcbiAgICBGaXJlc3RvcmVDbGllbnQucHJvdG90eXBlLnN0YXJ0TWVtb3J5UGVyc2lzdGVuY2UgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5wZXJzaXN0ZW5jZSA9IE1lbW9yeVBlcnNpc3RlbmNlLmNyZWF0ZUVhZ2VyUGVyc2lzdGVuY2UodGhpcy5jbGllbnRJZCk7XHJcbiAgICAgICAgdGhpcy5zaGFyZWRDbGllbnRTdGF0ZSA9IG5ldyBNZW1vcnlTaGFyZWRDbGllbnRTdGF0ZSgpO1xyXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUobnVsbCk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBJbml0aWFsaXplcyB0aGUgcmVzdCBvZiB0aGUgRmlyZXN0b3JlQ2xpZW50LCBhc3N1bWluZyB0aGUgaW5pdGlhbCB1c2VyXHJcbiAgICAgKiBoYXMgYmVlbiBvYnRhaW5lZCBmcm9tIHRoZSBjcmVkZW50aWFsIHByb3ZpZGVyIGFuZCBzb21lIHBlcnNpc3RlbmNlXHJcbiAgICAgKiBpbXBsZW1lbnRhdGlvbiBpcyBhdmFpbGFibGUgaW4gdGhpcy5wZXJzaXN0ZW5jZS5cclxuICAgICAqL1xyXG4gICAgRmlyZXN0b3JlQ2xpZW50LnByb3RvdHlwZS5pbml0aWFsaXplUmVzdCA9IGZ1bmN0aW9uICh1c2VyLCBtYXliZUxydUdjKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBkZWJ1ZyhMT0dfVEFHJGIsICdJbml0aWFsaXppbmcuIHVzZXI9JywgdXNlci51aWQpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnBsYXRmb3JtXHJcbiAgICAgICAgICAgIC5sb2FkQ29ubmVjdGlvbih0aGlzLmRhdGFiYXNlSW5mbylcclxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKGNvbm5lY3Rpb24pIHsgcmV0dXJuIHRzbGliLl9fYXdhaXRlcihfdGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHF1ZXJ5RW5naW5lLCBjb25uZWN0aXZpdHlNb25pdG9yLCBzZXJpYWxpemVyLCBkYXRhc3RvcmUsIHJlbW90ZVN0b3JlT25saW5lU3RhdGVDaGFuZ2VkSGFuZGxlciwgc2hhcmVkQ2xpZW50U3RhdGVPbmxpbmVTdGF0ZUNoYW5nZWRIYW5kbGVyO1xyXG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgICAgICByZXR1cm4gdHNsaWIuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBxdWVyeUVuZ2luZSA9IG5ldyBJbmRleEZyZWVRdWVyeUVuZ2luZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvY2FsU3RvcmUgPSBuZXcgTG9jYWxTdG9yZSh0aGlzLnBlcnNpc3RlbmNlLCBxdWVyeUVuZ2luZSwgdXNlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMubG9jYWxTdG9yZS5zdGFydCgpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1heWJlTHJ1R2MpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdlJ3JlIHJ1bm5pbmcgTFJVIEdhcmJhZ2UgY29sbGVjdGlvbi4gU2V0IHVwIHRoZSBzY2hlZHVsZXIuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxydVNjaGVkdWxlciA9IG5ldyBMcnVTY2hlZHVsZXIobWF5YmVMcnVHYywgdGhpcy5hc3luY1F1ZXVlLCB0aGlzLmxvY2FsU3RvcmUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpdml0eU1vbml0b3IgPSB0aGlzLnBsYXRmb3JtLm5ld0Nvbm5lY3Rpdml0eU1vbml0b3IoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VyaWFsaXplciA9IHRoaXMucGxhdGZvcm0ubmV3U2VyaWFsaXplcih0aGlzLmRhdGFiYXNlSW5mby5kYXRhYmFzZUlkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YXN0b3JlID0gbmV3IERhdGFzdG9yZSh0aGlzLmFzeW5jUXVldWUsIGNvbm5lY3Rpb24sIHRoaXMuY3JlZGVudGlhbHMsIHNlcmlhbGl6ZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZW1vdGVTdG9yZU9ubGluZVN0YXRlQ2hhbmdlZEhhbmRsZXIgPSBmdW5jdGlvbiAob25saW5lU3RhdGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5zeW5jRW5naW5lLmFwcGx5T25saW5lU3RhdGVDaGFuZ2Uob25saW5lU3RhdGUsIE9ubGluZVN0YXRlU291cmNlLlJlbW90ZVN0b3JlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2hhcmVkQ2xpZW50U3RhdGVPbmxpbmVTdGF0ZUNoYW5nZWRIYW5kbGVyID0gZnVuY3Rpb24gKG9ubGluZVN0YXRlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuc3luY0VuZ2luZS5hcHBseU9ubGluZVN0YXRlQ2hhbmdlKG9ubGluZVN0YXRlLCBPbmxpbmVTdGF0ZVNvdXJjZS5TaGFyZWRDbGllbnRTdGF0ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3RlU3RvcmUgPSBuZXcgUmVtb3RlU3RvcmUodGhpcy5sb2NhbFN0b3JlLCBkYXRhc3RvcmUsIHRoaXMuYXN5bmNRdWV1ZSwgcmVtb3RlU3RvcmVPbmxpbmVTdGF0ZUNoYW5nZWRIYW5kbGVyLCBjb25uZWN0aXZpdHlNb25pdG9yKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zeW5jRW5naW5lID0gbmV3IFN5bmNFbmdpbmUodGhpcy5sb2NhbFN0b3JlLCB0aGlzLnJlbW90ZVN0b3JlLCB0aGlzLnNoYXJlZENsaWVudFN0YXRlLCB1c2VyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaGFyZWRDbGllbnRTdGF0ZS5vbmxpbmVTdGF0ZUhhbmRsZXIgPSBzaGFyZWRDbGllbnRTdGF0ZU9ubGluZVN0YXRlQ2hhbmdlZEhhbmRsZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNldCB1cCB3aXJpbmcgYmV0d2VlbiBzeW5jIGVuZ2luZSBhbmQgb3RoZXIgY29tcG9uZW50c1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbW90ZVN0b3JlLnN5bmNFbmdpbmUgPSB0aGlzLnN5bmNFbmdpbmU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hhcmVkQ2xpZW50U3RhdGUuc3luY0VuZ2luZSA9IHRoaXMuc3luY0VuZ2luZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ldmVudE1nciA9IG5ldyBFdmVudE1hbmFnZXIodGhpcy5zeW5jRW5naW5lKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gUE9SVElORyBOT1RFOiBMb2NhbFN0b3JlIGRvZXNuJ3QgbmVlZCBhbiBleHBsaWNpdCBzdGFydCgpIG9uIHRoZSBXZWIuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuc2hhcmVkQ2xpZW50U3RhdGUuc3RhcnQoKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBQT1JUSU5HIE5PVEU6IExvY2FsU3RvcmUgZG9lc24ndCBuZWVkIGFuIGV4cGxpY2l0IHN0YXJ0KCkgb24gdGhlIFdlYi5cclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLnJlbW90ZVN0b3JlLnN0YXJ0KCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBOT1RFOiBUaGlzIHdpbGwgaW1tZWRpYXRlbHkgY2FsbCB0aGUgbGlzdGVuZXIsIHNvIHdlIG1ha2Ugc3VyZSB0b1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgaXQgYWZ0ZXIgbG9jYWxTdG9yZSAvIHJlbW90ZVN0b3JlIGFyZSBzdGFydGVkLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLnBlcnNpc3RlbmNlLnNldFByaW1hcnlTdGF0ZUxpc3RlbmVyKGZ1bmN0aW9uIChpc1ByaW1hcnkpIHsgcmV0dXJuIHRzbGliLl9fYXdhaXRlcihfdGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHNsaWIuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDogcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5zeW5jRW5naW5lLmFwcGx5UHJpbWFyeVN0YXRlKGlzUHJpbWFyeSldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5scnVTY2hlZHVsZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzUHJpbWFyeSAmJiAhdGhpcy5scnVTY2hlZHVsZXIuc3RhcnRlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5scnVTY2hlZHVsZXIuc3RhcnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICghaXNQcmltYXJ5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxydVNjaGVkdWxlci5zdG9wKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsgfSldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTk9URTogVGhpcyB3aWxsIGltbWVkaWF0ZWx5IGNhbGwgdGhlIGxpc3RlbmVyLCBzbyB3ZSBtYWtlIHN1cmUgdG9cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IGl0IGFmdGVyIGxvY2FsU3RvcmUgLyByZW1vdGVTdG9yZSBhcmUgc3RhcnRlZC5cclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBXaGVuIGEgdXNlciBjYWxscyBjbGVhclBlcnNpc3RlbmNlKCkgaW4gb25lIGNsaWVudCwgYWxsIG90aGVyIGNsaWVudHNcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gbmVlZCB0byBiZSB0ZXJtaW5hdGVkIHRvIGFsbG93IHRoZSBkZWxldGUgdG8gc3VjY2VlZC5cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5wZXJzaXN0ZW5jZS5zZXREYXRhYmFzZURlbGV0ZWRMaXN0ZW5lcihmdW5jdGlvbiAoKSB7IHJldHVybiB0c2xpYi5fX2F3YWl0ZXIoX3RoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRzbGliLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6IHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMudGVybWluYXRlKCldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOyB9KV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA1OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBXaGVuIGEgdXNlciBjYWxscyBjbGVhclBlcnNpc3RlbmNlKCkgaW4gb25lIGNsaWVudCwgYWxsIG90aGVyIGNsaWVudHNcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gbmVlZCB0byBiZSB0ZXJtaW5hdGVkIHRvIGFsbG93IHRoZSBkZWxldGUgdG8gc3VjY2VlZC5cclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pOyB9KTtcclxuICAgIH07XHJcbiAgICBGaXJlc3RvcmVDbGllbnQucHJvdG90eXBlLmhhbmRsZUNyZWRlbnRpYWxDaGFuZ2UgPSBmdW5jdGlvbiAodXNlcikge1xyXG4gICAgICAgIHRoaXMuYXN5bmNRdWV1ZS52ZXJpZnlPcGVyYXRpb25JblByb2dyZXNzKCk7XHJcbiAgICAgICAgZGVidWcoTE9HX1RBRyRiLCAnQ3JlZGVudGlhbCBDaGFuZ2VkLiBDdXJyZW50IHVzZXI6ICcgKyB1c2VyLnVpZCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc3luY0VuZ2luZS5oYW5kbGVDcmVkZW50aWFsQ2hhbmdlKHVzZXIpO1xyXG4gICAgfTtcclxuICAgIC8qKiBEaXNhYmxlcyB0aGUgbmV0d29yayBjb25uZWN0aW9uLiBQZW5kaW5nIG9wZXJhdGlvbnMgd2lsbCBub3QgY29tcGxldGUuICovXHJcbiAgICBGaXJlc3RvcmVDbGllbnQucHJvdG90eXBlLmRpc2FibGVOZXR3b3JrID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy52ZXJpZnlOb3RUZXJtaW5hdGVkKCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYXN5bmNRdWV1ZS5lbnF1ZXVlKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIF90aGlzLnN5bmNFbmdpbmUuZGlzYWJsZU5ldHdvcmsoKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBGaXJlc3RvcmVDbGllbnQucHJvdG90eXBlLnRlcm1pbmF0ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmFzeW5jUXVldWUuZW5xdWV1ZUFuZEluaXRpYXRlU2h1dGRvd24oZnVuY3Rpb24gKCkgeyByZXR1cm4gdHNsaWIuX19hd2FpdGVyKF90aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHNsaWIuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBQT1JUSU5HIE5PVEU6IExvY2FsU3RvcmUgZG9lcyBub3QgbmVlZCBhbiBleHBsaWNpdCBzaHV0ZG93biBvbiB3ZWIuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmxydVNjaGVkdWxlcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5scnVTY2hlZHVsZXIuc3RvcCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMucmVtb3RlU3RvcmUuc2h1dGRvd24oKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuc2hhcmVkQ2xpZW50U3RhdGUuc2h1dGRvd24oKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMucGVyc2lzdGVuY2Uuc2h1dGRvd24oKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGByZW1vdmVDaGFuZ2VMaXN0ZW5lcmAgbXVzdCBiZSBjYWxsZWQgYWZ0ZXIgc2h1dHRpbmcgZG93biB0aGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVtb3RlU3RvcmUgYXMgaXQgd2lsbCBwcmV2ZW50IHRoZSBSZW1vdGVTdG9yZSBmcm9tIHJldHJpZXZpbmdcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYXV0aCB0b2tlbnMuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3JlZGVudGlhbHMucmVtb3ZlQ2hhbmdlTGlzdGVuZXIoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTsgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIGEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHdoZW4gYWxsIHdyaXRlcyB0aGF0IHdlcmUgcGVuZGluZyBhdCB0aGUgdGltZSB0aGlzXHJcbiAgICAgKiBtZXRob2Qgd2FzIGNhbGxlZCByZWNlaXZlZCBzZXJ2ZXIgYWNrbm93bGVkZ2VtZW50LiBBbiBhY2tub3dsZWRnZW1lbnQgY2FuIGJlIGVpdGhlciBhY2NlcHRhbmNlXHJcbiAgICAgKiBvciByZWplY3Rpb24uXHJcbiAgICAgKi9cclxuICAgIEZpcmVzdG9yZUNsaWVudC5wcm90b3R5cGUud2FpdEZvclBlbmRpbmdXcml0ZXMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB0aGlzLnZlcmlmeU5vdFRlcm1pbmF0ZWQoKTtcclxuICAgICAgICB2YXIgZGVmZXJyZWQgPSBuZXcgRGVmZXJyZWQoKTtcclxuICAgICAgICB0aGlzLmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5zeW5jRW5naW5lLnJlZ2lzdGVyUGVuZGluZ1dyaXRlc0NhbGxiYWNrKGRlZmVycmVkKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcclxuICAgIH07XHJcbiAgICBGaXJlc3RvcmVDbGllbnQucHJvdG90eXBlLmxpc3RlbiA9IGZ1bmN0aW9uIChxdWVyeSwgb2JzZXJ2ZXIsIG9wdGlvbnMpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMudmVyaWZ5Tm90VGVybWluYXRlZCgpO1xyXG4gICAgICAgIHZhciBsaXN0ZW5lciA9IG5ldyBRdWVyeUxpc3RlbmVyKHF1ZXJ5LCBvYnNlcnZlciwgb3B0aW9ucyk7XHJcbiAgICAgICAgdGhpcy5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXMuZXZlbnRNZ3IubGlzdGVuKGxpc3RlbmVyKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gbGlzdGVuZXI7XHJcbiAgICB9O1xyXG4gICAgRmlyZXN0b3JlQ2xpZW50LnByb3RvdHlwZS51bmxpc3RlbiA9IGZ1bmN0aW9uIChsaXN0ZW5lcikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgLy8gQ2hlY2tzIGZvciB0ZXJtaW5hdGlvbiBidXQgZG9lcyBub3QgcmFpc2UgZXJyb3IsIGFsbG93aW5nIHVubGlzdGVuIGFmdGVyXHJcbiAgICAgICAgLy8gdGVybWluYXRpb24gdG8gYmUgYSBuby1vcC5cclxuICAgICAgICBpZiAodGhpcy5jbGllbnRUZXJtaW5hdGVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXMuZXZlbnRNZ3IudW5saXN0ZW4obGlzdGVuZXIpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIEZpcmVzdG9yZUNsaWVudC5wcm90b3R5cGUuZ2V0RG9jdW1lbnRGcm9tTG9jYWxDYWNoZSA9IGZ1bmN0aW9uIChkb2NLZXkpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMudmVyaWZ5Tm90VGVybWluYXRlZCgpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmFzeW5jUXVldWVcclxuICAgICAgICAgICAgLmVucXVldWUoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXMubG9jYWxTdG9yZS5yZWFkRG9jdW1lbnQoZG9jS2V5KTtcclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAobWF5YmVEb2MpIHtcclxuICAgICAgICAgICAgaWYgKG1heWJlRG9jIGluc3RhbmNlb2YgRG9jdW1lbnQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBtYXliZURvYztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChtYXliZURvYyBpbnN0YW5jZW9mIE5vRG9jdW1lbnQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuVU5BVkFJTEFCTEUsICdGYWlsZWQgdG8gZ2V0IGRvY3VtZW50IGZyb20gY2FjaGUuIChIb3dldmVyLCB0aGlzIGRvY3VtZW50IG1heSAnICtcclxuICAgICAgICAgICAgICAgICAgICBcImV4aXN0IG9uIHRoZSBzZXJ2ZXIuIFJ1biBhZ2FpbiB3aXRob3V0IHNldHRpbmcgJ3NvdXJjZScgaW4gXCIgK1xyXG4gICAgICAgICAgICAgICAgICAgICd0aGUgR2V0T3B0aW9ucyB0byBhdHRlbXB0IHRvIHJldHJpZXZlIHRoZSBkb2N1bWVudCBmcm9tIHRoZSAnICtcclxuICAgICAgICAgICAgICAgICAgICAnc2VydmVyLiknKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIEZpcmVzdG9yZUNsaWVudC5wcm90b3R5cGUuZ2V0RG9jdW1lbnRzRnJvbUxvY2FsQ2FjaGUgPSBmdW5jdGlvbiAocXVlcnkpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMudmVyaWZ5Tm90VGVybWluYXRlZCgpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmFzeW5jUXVldWUuZW5xdWV1ZShmdW5jdGlvbiAoKSB7IHJldHVybiB0c2xpYi5fX2F3YWl0ZXIoX3RoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBxdWVyeVJlc3VsdCwgdmlldywgdmlld0RvY0NoYW5nZXM7XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYi5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6IHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMubG9jYWxTdG9yZS5leGVjdXRlUXVlcnkocXVlcnksIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiB1c2VQcmV2aW91c1Jlc3VsdHM9ICovIHRydWUpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5UmVzdWx0ID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2aWV3ID0gbmV3IFZpZXcocXVlcnksIHF1ZXJ5UmVzdWx0LnJlbW90ZUtleXMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2aWV3RG9jQ2hhbmdlcyA9IHZpZXcuY29tcHV0ZURvY0NoYW5nZXMocXVlcnlSZXN1bHQuZG9jdW1lbnRzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHZpZXcuYXBwbHlDaGFuZ2VzKHZpZXdEb2NDaGFuZ2VzLCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIHVwZGF0ZUxpbWJvRG9jdW1lbnRzPSAqLyBmYWxzZSkuc25hcHNob3RdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTsgfSk7XHJcbiAgICB9O1xyXG4gICAgRmlyZXN0b3JlQ2xpZW50LnByb3RvdHlwZS53cml0ZSA9IGZ1bmN0aW9uIChtdXRhdGlvbnMpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMudmVyaWZ5Tm90VGVybWluYXRlZCgpO1xyXG4gICAgICAgIHZhciBkZWZlcnJlZCA9IG5ldyBEZWZlcnJlZCgpO1xyXG4gICAgICAgIHRoaXMuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIF90aGlzLnN5bmNFbmdpbmUud3JpdGUobXV0YXRpb25zLCBkZWZlcnJlZCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XHJcbiAgICB9O1xyXG4gICAgRmlyZXN0b3JlQ2xpZW50LnByb3RvdHlwZS5kYXRhYmFzZUlkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRhdGFiYXNlSW5mby5kYXRhYmFzZUlkO1xyXG4gICAgfTtcclxuICAgIEZpcmVzdG9yZUNsaWVudC5wcm90b3R5cGUuYWRkU25hcHNob3RzSW5TeW5jTGlzdGVuZXIgPSBmdW5jdGlvbiAob2JzZXJ2ZXIpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMudmVyaWZ5Tm90VGVybWluYXRlZCgpO1xyXG4gICAgICAgIHRoaXMuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgX3RoaXMuZXZlbnRNZ3IuYWRkU25hcHNob3RzSW5TeW5jTGlzdGVuZXIob2JzZXJ2ZXIpO1xyXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgRmlyZXN0b3JlQ2xpZW50LnByb3RvdHlwZS5yZW1vdmVTbmFwc2hvdHNJblN5bmNMaXN0ZW5lciA9IGZ1bmN0aW9uIChvYnNlcnZlcikge1xyXG4gICAgICAgIC8vIENoZWNrcyBmb3Igc2h1dGRvd24gYnV0IGRvZXMgbm90IHJhaXNlIGVycm9yLCBhbGxvd2luZyByZW1vdmUgYWZ0ZXJcclxuICAgICAgICAvLyBzaHV0ZG93biB0byBiZSBhIG5vLW9wLlxyXG4gICAgICAgIGlmICh0aGlzLmNsaWVudFRlcm1pbmF0ZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmV2ZW50TWdyLnJlbW92ZVNuYXBzaG90c0luU3luY0xpc3RlbmVyKG9ic2VydmVyKTtcclxuICAgIH07XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoRmlyZXN0b3JlQ2xpZW50LnByb3RvdHlwZSwgXCJjbGllbnRUZXJtaW5hdGVkXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgLy8gVGVjaG5pY2FsbHksIHRoZSBhc3luY1F1ZXVlIGlzIHN0aWxsIHJ1bm5pbmcsIGJ1dCBvbmx5IGFjY2VwdGluZyBvcGVyYXRpb25zXHJcbiAgICAgICAgICAgIC8vIHJlbGF0ZWQgdG8gdGVybWluYXRpb24gb3Igc3VwcG9zZWQgdG8gYmUgcnVuIGFmdGVyIHRlcm1pbmF0aW9uLiBJdCBpcyBlZmZlY3RpdmVseVxyXG4gICAgICAgICAgICAvLyB0ZXJtaW5hdGVkIHRvIHRoZSBleWVzIG9mIHVzZXJzLlxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5hc3luY1F1ZXVlLmlzU2h1dHRpbmdEb3duO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgRmlyZXN0b3JlQ2xpZW50LnByb3RvdHlwZS50cmFuc2FjdGlvbiA9IGZ1bmN0aW9uICh1cGRhdGVGdW5jdGlvbikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy52ZXJpZnlOb3RUZXJtaW5hdGVkKCk7XHJcbiAgICAgICAgdmFyIGRlZmVycmVkID0gbmV3IERlZmVycmVkKCk7XHJcbiAgICAgICAgdGhpcy5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBfdGhpcy5zeW5jRW5naW5lLnJ1blRyYW5zYWN0aW9uKF90aGlzLmFzeW5jUXVldWUsIHVwZGF0ZUZ1bmN0aW9uLCBkZWZlcnJlZCk7XHJcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gRmlyZXN0b3JlQ2xpZW50O1xyXG59KCkpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLypcclxuICogQSB3cmFwcGVyIGltcGxlbWVudGF0aW9uIG9mIE9ic2VydmVyPFQ+IHRoYXQgd2lsbCBkaXNwYXRjaCBldmVudHNcclxuICogYXN5bmNocm9ub3VzbHkuIFRvIGFsbG93IGltbWVkaWF0ZSBzaWxlbmNpbmcsIGEgbXV0ZSBjYWxsIGlzIGFkZGVkIHdoaWNoXHJcbiAqIGNhdXNlcyBldmVudHMgc2NoZWR1bGVkIHRvIG5vIGxvbmdlciBiZSByYWlzZWQuXHJcbiAqL1xyXG52YXIgQXN5bmNPYnNlcnZlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEFzeW5jT2JzZXJ2ZXIob2JzZXJ2ZXIpIHtcclxuICAgICAgICB0aGlzLm9ic2VydmVyID0gb2JzZXJ2ZXI7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogV2hlbiBzZXQgdG8gdHJ1ZSwgd2lsbCBub3QgcmFpc2UgZnV0dXJlIGV2ZW50cy4gTmVjZXNzYXJ5IHRvIGRlYWwgd2l0aFxyXG4gICAgICAgICAqIGFzeW5jIGRldGFjaG1lbnQgb2YgbGlzdGVuZXIuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5tdXRlZCA9IGZhbHNlO1xyXG4gICAgfVxyXG4gICAgQXN5bmNPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMuc2NoZWR1bGVFdmVudCh0aGlzLm9ic2VydmVyLm5leHQsIHZhbHVlKTtcclxuICAgIH07XHJcbiAgICBBc3luY09ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgIHRoaXMuc2NoZWR1bGVFdmVudCh0aGlzLm9ic2VydmVyLmVycm9yLCBlcnJvcik7XHJcbiAgICB9O1xyXG4gICAgQXN5bmNPYnNlcnZlci5wcm90b3R5cGUubXV0ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLm11dGVkID0gdHJ1ZTtcclxuICAgIH07XHJcbiAgICBBc3luY09ic2VydmVyLnByb3RvdHlwZS5zY2hlZHVsZUV2ZW50ID0gZnVuY3Rpb24gKGV2ZW50SGFuZGxlciwgZXZlbnQpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIGlmICghdGhpcy5tdXRlZCkge1xyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGlmICghX3RoaXMubXV0ZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBldmVudEhhbmRsZXIoZXZlbnQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LCAwKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEFzeW5jT2JzZXJ2ZXI7XHJcbn0oKSk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vLyBUaGUgb2JqZWN0cyB0aGF0IGFyZSBhIHBhcnQgb2YgdGhpcyBBUEkgYXJlIGV4cG9zZWQgdG8gdGhpcmQtcGFydGllcyBhc1xyXG4vLyBjb21waWxlZCBqYXZhc2NyaXB0IHNvIHdlIHdhbnQgdG8gZmxhZyBvdXIgcHJpdmF0ZSBtZW1iZXJzIHdpdGggYSBsZWFkaW5nXHJcbi8vIHVuZGVyc2NvcmUgdG8gZGlzY291cmFnZSB0aGVpciB1c2UuXHJcbi8qKlxyXG4gKiBBIEZpZWxkUGF0aCByZWZlcnMgdG8gYSBmaWVsZCBpbiBhIGRvY3VtZW50LiBUaGUgcGF0aCBtYXkgY29uc2lzdCBvZiBhIHNpbmdsZVxyXG4gKiBmaWVsZCBuYW1lIChyZWZlcnJpbmcgdG8gYSB0b3AtbGV2ZWwgZmllbGQgaW4gdGhlIGRvY3VtZW50KSwgb3IgYSBsaXN0IG9mXHJcbiAqIGZpZWxkIG5hbWVzIChyZWZlcnJpbmcgdG8gYSBuZXN0ZWQgZmllbGQgaW4gdGhlIGRvY3VtZW50KS5cclxuICovXHJcbnZhciBGaWVsZFBhdGgkMSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhIEZpZWxkUGF0aCBmcm9tIHRoZSBwcm92aWRlZCBmaWVsZCBuYW1lcy4gSWYgbW9yZSB0aGFuIG9uZSBmaWVsZFxyXG4gICAgICogbmFtZSBpcyBwcm92aWRlZCwgdGhlIHBhdGggd2lsbCBwb2ludCB0byBhIG5lc3RlZCBmaWVsZCBpbiBhIGRvY3VtZW50LlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBmaWVsZE5hbWVzIEEgbGlzdCBvZiBmaWVsZCBuYW1lcy5cclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gRmllbGRQYXRoJDEoKSB7XHJcbiAgICAgICAgdmFyIGZpZWxkTmFtZXMgPSBbXTtcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICBmaWVsZE5hbWVzW19pXSA9IGFyZ3VtZW50c1tfaV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhbGlkYXRlTmFtZWRBcnJheUF0TGVhc3ROdW1iZXJPZkVsZW1lbnRzKCdGaWVsZFBhdGgnLCBmaWVsZE5hbWVzLCAnZmllbGROYW1lcycsIDEpO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZmllbGROYW1lcy5sZW5ndGg7ICsraSkge1xyXG4gICAgICAgICAgICB2YWxpZGF0ZUFyZ1R5cGUoJ0ZpZWxkUGF0aCcsICdzdHJpbmcnLCBpLCBmaWVsZE5hbWVzW2ldKTtcclxuICAgICAgICAgICAgaWYgKGZpZWxkTmFtZXNbaV0ubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5JTlZBTElEX0FSR1VNRU5ULCBcIkludmFsaWQgZmllbGQgbmFtZSBhdCBhcmd1bWVudCAkKGkgKyAxKS4gXCIgK1xyXG4gICAgICAgICAgICAgICAgICAgICdGaWVsZCBuYW1lcyBtdXN0IG5vdCBiZSBlbXB0eS4nKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9pbnRlcm5hbFBhdGggPSBuZXcgRmllbGRQYXRoKGZpZWxkTmFtZXMpO1xyXG4gICAgfVxyXG4gICAgRmllbGRQYXRoJDEuZG9jdW1lbnRJZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gRmllbGRQYXRoJDEuX0RPQ1VNRU5UX0lEO1xyXG4gICAgfTtcclxuICAgIEZpZWxkUGF0aCQxLnByb3RvdHlwZS5pc0VxdWFsID0gZnVuY3Rpb24gKG90aGVyKSB7XHJcbiAgICAgICAgaWYgKCEob3RoZXIgaW5zdGFuY2VvZiBGaWVsZFBhdGgkMSkpIHtcclxuICAgICAgICAgICAgdGhyb3cgaW52YWxpZENsYXNzRXJyb3IoJ2lzRXF1YWwnLCAnRmllbGRQYXRoJywgMSwgb3RoZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5faW50ZXJuYWxQYXRoLmlzRXF1YWwob3RoZXIuX2ludGVybmFsUGF0aCk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBJbnRlcm5hbCBOb3RlOiBUaGUgYmFja2VuZCBkb2Vzbid0IHRlY2huaWNhbGx5IHN1cHBvcnQgcXVlcnlpbmcgYnlcclxuICAgICAqIGRvY3VtZW50IElELiBJbnN0ZWFkIGl0IHF1ZXJpZXMgYnkgdGhlIGVudGlyZSBkb2N1bWVudCBuYW1lIChmdWxsIHBhdGhcclxuICAgICAqIGluY2x1ZGVkKSwgYnV0IGluIHRoZSBjYXNlcyB3ZSBjdXJyZW50bHkgc3VwcG9ydCBkb2N1bWVudElkKCksIHRoZSBuZXRcclxuICAgICAqIGVmZmVjdCBpcyB0aGUgc2FtZS5cclxuICAgICAqL1xyXG4gICAgRmllbGRQYXRoJDEuX0RPQ1VNRU5UX0lEID0gbmV3IEZpZWxkUGF0aCQxKEZpZWxkUGF0aC5rZXlGaWVsZCgpLmNhbm9uaWNhbFN0cmluZygpKTtcclxuICAgIHJldHVybiBGaWVsZFBhdGgkMTtcclxufSgpKTtcclxuLyoqXHJcbiAqIE1hdGNoZXMgYW55IGNoYXJhY3RlcnMgaW4gYSBmaWVsZCBwYXRoIHN0cmluZyB0aGF0IGFyZSByZXNlcnZlZC5cclxuICovXHJcbnZhciBSRVNFUlZFRCA9IG5ldyBSZWdFeHAoJ1t+XFxcXCovXFxcXFtcXFxcXV0nKTtcclxuLyoqXHJcbiAqIFBhcnNlcyBhIGZpZWxkIHBhdGggc3RyaW5nIGludG8gYSBGaWVsZFBhdGgsIHRyZWF0aW5nIGRvdHMgYXMgc2VwYXJhdG9ycy5cclxuICovXHJcbmZ1bmN0aW9uIGZyb21Eb3RTZXBhcmF0ZWRTdHJpbmcocGF0aCkge1xyXG4gICAgdmFyIGZvdW5kID0gcGF0aC5zZWFyY2goUkVTRVJWRUQpO1xyXG4gICAgaWYgKGZvdW5kID49IDApIHtcclxuICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5JTlZBTElEX0FSR1VNRU5ULCBcIkludmFsaWQgZmllbGQgcGF0aCAoXCIgKyBwYXRoICsgXCIpLiBQYXRocyBtdXN0IG5vdCBjb250YWluIFwiICtcclxuICAgICAgICAgICAgXCInficsICcqJywgJy8nLCAnWycsIG9yICddJ1wiKTtcclxuICAgIH1cclxuICAgIHRyeSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyAoRmllbGRQYXRoJDEuYmluZC5hcHBseShGaWVsZFBhdGgkMSwgdHNsaWIuX19zcHJlYWRBcnJheXMoW3ZvaWQgMF0sIHBhdGguc3BsaXQoJy4nKSkpKSgpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5JTlZBTElEX0FSR1VNRU5ULCBcIkludmFsaWQgZmllbGQgcGF0aCAoXCIgKyBwYXRoICsgXCIpLiBQYXRocyBtdXN0IG5vdCBiZSBlbXB0eSwgXCIgK1xyXG4gICAgICAgICAgICBcImJlZ2luIHdpdGggJy4nLCBlbmQgd2l0aCAnLicsIG9yIGNvbnRhaW4gJy4uJ1wiKTtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxudmFyIE9BdXRoVG9rZW4gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBPQXV0aFRva2VuKHZhbHVlLCB1c2VyKSB7XHJcbiAgICAgICAgdGhpcy51c2VyID0gdXNlcjtcclxuICAgICAgICB0aGlzLnR5cGUgPSAnT0F1dGgnO1xyXG4gICAgICAgIHRoaXMuYXV0aEhlYWRlcnMgPSB7fTtcclxuICAgICAgICAvLyBTZXQgdGhlIGhlYWRlcnMgdXNpbmcgT2JqZWN0IExpdGVyYWwgbm90YXRpb24gdG8gYXZvaWQgbWluaWZpY2F0aW9uXHJcbiAgICAgICAgdGhpcy5hdXRoSGVhZGVyc1snQXV0aG9yaXphdGlvbiddID0gXCJCZWFyZXIgXCIgKyB2YWx1ZTtcclxuICAgIH1cclxuICAgIHJldHVybiBPQXV0aFRva2VuO1xyXG59KCkpO1xyXG4vKiogQSBDcmVkZW50aWFsc1Byb3ZpZGVyIHRoYXQgYWx3YXlzIHlpZWxkcyBhbiBlbXB0eSB0b2tlbi4gKi9cclxudmFyIEVtcHR5Q3JlZGVudGlhbHNQcm92aWRlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEVtcHR5Q3JlZGVudGlhbHNQcm92aWRlcigpIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBTdG9yZXMgdGhlIGxpc3RlbmVyIHJlZ2lzdGVyZWQgd2l0aCBzZXRDaGFuZ2VMaXN0ZW5lcigpXHJcbiAgICAgICAgICogVGhpcyBpc24ndCBhY3R1YWxseSBuZWNlc3Nhcnkgc2luY2UgdGhlIFVJRCBuZXZlciBjaGFuZ2VzLCBidXQgd2UgdXNlIHRoaXNcclxuICAgICAgICAgKiB0byB2ZXJpZnkgdGhlIGxpc3RlbiBjb250cmFjdCBpcyBhZGhlcmVkIHRvIGluIHRlc3RzLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuY2hhbmdlTGlzdGVuZXIgPSBudWxsO1xyXG4gICAgfVxyXG4gICAgRW1wdHlDcmVkZW50aWFsc1Byb3ZpZGVyLnByb3RvdHlwZS5nZXRUb2tlbiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKG51bGwpO1xyXG4gICAgfTtcclxuICAgIEVtcHR5Q3JlZGVudGlhbHNQcm92aWRlci5wcm90b3R5cGUuaW52YWxpZGF0ZVRva2VuID0gZnVuY3Rpb24gKCkgeyB9O1xyXG4gICAgRW1wdHlDcmVkZW50aWFsc1Byb3ZpZGVyLnByb3RvdHlwZS5zZXRDaGFuZ2VMaXN0ZW5lciA9IGZ1bmN0aW9uIChjaGFuZ2VMaXN0ZW5lcikge1xyXG4gICAgICAgIGFzc2VydCghdGhpcy5jaGFuZ2VMaXN0ZW5lciwgJ0NhbiBvbmx5IGNhbGwgc2V0Q2hhbmdlTGlzdGVuZXIoKSBvbmNlLicpO1xyXG4gICAgICAgIHRoaXMuY2hhbmdlTGlzdGVuZXIgPSBjaGFuZ2VMaXN0ZW5lcjtcclxuICAgICAgICAvLyBGaXJlIHdpdGggaW5pdGlhbCB1c2VyLlxyXG4gICAgICAgIGNoYW5nZUxpc3RlbmVyKFVzZXIuVU5BVVRIRU5USUNBVEVEKTtcclxuICAgIH07XHJcbiAgICBFbXB0eUNyZWRlbnRpYWxzUHJvdmlkZXIucHJvdG90eXBlLnJlbW92ZUNoYW5nZUxpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGFzc2VydCh0aGlzLmNoYW5nZUxpc3RlbmVyICE9PSBudWxsLCAncmVtb3ZlQ2hhbmdlTGlzdGVuZXIoKSB3aGVuIG5vIGxpc3RlbmVyIHJlZ2lzdGVyZWQnKTtcclxuICAgICAgICB0aGlzLmNoYW5nZUxpc3RlbmVyID0gbnVsbDtcclxuICAgIH07XHJcbiAgICByZXR1cm4gRW1wdHlDcmVkZW50aWFsc1Byb3ZpZGVyO1xyXG59KCkpO1xyXG52YXIgRmlyZWJhc2VDcmVkZW50aWFsc1Byb3ZpZGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gRmlyZWJhc2VDcmVkZW50aWFsc1Byb3ZpZGVyKGF1dGhQcm92aWRlcikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVGhlIGF1dGggdG9rZW4gbGlzdGVuZXIgcmVnaXN0ZXJlZCB3aXRoIEZpcmViYXNlQXBwLCByZXRhaW5lZCBoZXJlIHNvIHdlXHJcbiAgICAgICAgICogY2FuIHVucmVnaXN0ZXIgaXQuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy50b2tlbkxpc3RlbmVyID0gbnVsbDtcclxuICAgICAgICAvKiogVHJhY2tzIHRoZSBjdXJyZW50IFVzZXIuICovXHJcbiAgICAgICAgdGhpcy5jdXJyZW50VXNlciA9IFVzZXIuVU5BVVRIRU5USUNBVEVEO1xyXG4gICAgICAgIHRoaXMucmVjZWl2ZWRJbml0aWFsVXNlciA9IGZhbHNlO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENvdW50ZXIgdXNlZCB0byBkZXRlY3QgaWYgdGhlIHRva2VuIGNoYW5nZWQgd2hpbGUgYSBnZXRUb2tlbiByZXF1ZXN0IHdhc1xyXG4gICAgICAgICAqIG91dHN0YW5kaW5nLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMudG9rZW5Db3VudGVyID0gMDtcclxuICAgICAgICAvKiogVGhlIGxpc3RlbmVyIHJlZ2lzdGVyZWQgd2l0aCBzZXRDaGFuZ2VMaXN0ZW5lcigpLiAqL1xyXG4gICAgICAgIHRoaXMuY2hhbmdlTGlzdGVuZXIgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuZm9yY2VSZWZyZXNoID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy50b2tlbkxpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBfdGhpcy50b2tlbkNvdW50ZXIrKztcclxuICAgICAgICAgICAgX3RoaXMuY3VycmVudFVzZXIgPSBfdGhpcy5nZXRVc2VyKCk7XHJcbiAgICAgICAgICAgIF90aGlzLnJlY2VpdmVkSW5pdGlhbFVzZXIgPSB0cnVlO1xyXG4gICAgICAgICAgICBpZiAoX3RoaXMuY2hhbmdlTGlzdGVuZXIpIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLmNoYW5nZUxpc3RlbmVyKF90aGlzLmN1cnJlbnRVc2VyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy50b2tlbkNvdW50ZXIgPSAwO1xyXG4gICAgICAgIHRoaXMuYXV0aCA9IGF1dGhQcm92aWRlci5nZXRJbW1lZGlhdGUoeyBvcHRpb25hbDogdHJ1ZSB9KTtcclxuICAgICAgICBpZiAodGhpcy5hdXRoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYXV0aC5hZGRBdXRoVG9rZW5MaXN0ZW5lcih0aGlzLnRva2VuTGlzdGVuZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gaWYgYXV0aCBpcyBub3QgYXZhaWxhYmxlLCBpbnZva2UgdG9rZW5MaXN0ZW5lciBvbmNlIHdpdGggbnVsbCB0b2tlblxyXG4gICAgICAgICAgICB0aGlzLnRva2VuTGlzdGVuZXIobnVsbCk7XHJcbiAgICAgICAgICAgIGF1dGhQcm92aWRlci5nZXQoKS50aGVuKGZ1bmN0aW9uIChhdXRoKSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5hdXRoID0gYXV0aDtcclxuICAgICAgICAgICAgICAgIGlmIChfdGhpcy50b2tlbkxpc3RlbmVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gdG9rZW5MaXN0ZW5lciBjYW4gYmUgcmVtb3ZlZCBieSByZW1vdmVDaGFuZ2VMaXN0ZW5lcigpXHJcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuYXV0aC5hZGRBdXRoVG9rZW5MaXN0ZW5lcihfdGhpcy50b2tlbkxpc3RlbmVyKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgLyogdGhpcy5hdXRoUHJvdmlkZXIuZ2V0KCkgbmV2ZXIgcmVqZWN0cyAqL1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBGaXJlYmFzZUNyZWRlbnRpYWxzUHJvdmlkZXIucHJvdG90eXBlLmdldFRva2VuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgYXNzZXJ0KHRoaXMudG9rZW5MaXN0ZW5lciAhPSBudWxsLCAnZ2V0VG9rZW4gY2Fubm90IGJlIGNhbGxlZCBhZnRlciBsaXN0ZW5lciByZW1vdmVkLicpO1xyXG4gICAgICAgIC8vIFRha2Ugbm90ZSBvZiB0aGUgY3VycmVudCB2YWx1ZSBvZiB0aGUgdG9rZW5Db3VudGVyIHNvIHRoYXQgdGhpcyBtZXRob2RcclxuICAgICAgICAvLyBjYW4gZmFpbCAod2l0aCBhbiBBQk9SVEVEIGVycm9yKSBpZiB0aGVyZSBpcyBhIHRva2VuIGNoYW5nZSB3aGlsZSB0aGVcclxuICAgICAgICAvLyByZXF1ZXN0IGlzIG91dHN0YW5kaW5nLlxyXG4gICAgICAgIHZhciBpbml0aWFsVG9rZW5Db3VudGVyID0gdGhpcy50b2tlbkNvdW50ZXI7XHJcbiAgICAgICAgdmFyIGZvcmNlUmVmcmVzaCA9IHRoaXMuZm9yY2VSZWZyZXNoO1xyXG4gICAgICAgIHRoaXMuZm9yY2VSZWZyZXNoID0gZmFsc2U7XHJcbiAgICAgICAgaWYgKCF0aGlzLmF1dGgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShudWxsKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYXV0aC5nZXRUb2tlbihmb3JjZVJlZnJlc2gpLnRoZW4oZnVuY3Rpb24gKHRva2VuRGF0YSkge1xyXG4gICAgICAgICAgICAvLyBDYW5jZWwgdGhlIHJlcXVlc3Qgc2luY2UgdGhlIHRva2VuIGNoYW5nZWQgd2hpbGUgdGhlIHJlcXVlc3Qgd2FzXHJcbiAgICAgICAgICAgIC8vIG91dHN0YW5kaW5nIHNvIHRoZSByZXNwb25zZSBpcyBwb3RlbnRpYWxseSBmb3IgYSBwcmV2aW91cyB1c2VyICh3aGljaFxyXG4gICAgICAgICAgICAvLyB1c2VyLCB3ZSBjYW4ndCBiZSBzdXJlKS5cclxuICAgICAgICAgICAgaWYgKF90aGlzLnRva2VuQ291bnRlciAhPT0gaW5pdGlhbFRva2VuQ291bnRlcikge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuQUJPUlRFRCwgJ2dldFRva2VuIGFib3J0ZWQgZHVlIHRvIHRva2VuIGNoYW5nZS4nKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmICh0b2tlbkRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICBhc3NlcnQodHlwZW9mIHRva2VuRGF0YS5hY2Nlc3NUb2tlbiA9PT0gJ3N0cmluZycsICdJbnZhbGlkIHRva2VuRGF0YSByZXR1cm5lZCBmcm9tIGdldFRva2VuKCk6JyArIHRva2VuRGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBPQXV0aFRva2VuKHRva2VuRGF0YS5hY2Nlc3NUb2tlbiwgX3RoaXMuY3VycmVudFVzZXIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBGaXJlYmFzZUNyZWRlbnRpYWxzUHJvdmlkZXIucHJvdG90eXBlLmludmFsaWRhdGVUb2tlbiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmZvcmNlUmVmcmVzaCA9IHRydWU7XHJcbiAgICB9O1xyXG4gICAgRmlyZWJhc2VDcmVkZW50aWFsc1Byb3ZpZGVyLnByb3RvdHlwZS5zZXRDaGFuZ2VMaXN0ZW5lciA9IGZ1bmN0aW9uIChjaGFuZ2VMaXN0ZW5lcikge1xyXG4gICAgICAgIGFzc2VydCghdGhpcy5jaGFuZ2VMaXN0ZW5lciwgJ0NhbiBvbmx5IGNhbGwgc2V0Q2hhbmdlTGlzdGVuZXIoKSBvbmNlLicpO1xyXG4gICAgICAgIHRoaXMuY2hhbmdlTGlzdGVuZXIgPSBjaGFuZ2VMaXN0ZW5lcjtcclxuICAgICAgICAvLyBGaXJlIHRoZSBpbml0aWFsIGV2ZW50XHJcbiAgICAgICAgaWYgKHRoaXMucmVjZWl2ZWRJbml0aWFsVXNlcikge1xyXG4gICAgICAgICAgICBjaGFuZ2VMaXN0ZW5lcih0aGlzLmN1cnJlbnRVc2VyKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgRmlyZWJhc2VDcmVkZW50aWFsc1Byb3ZpZGVyLnByb3RvdHlwZS5yZW1vdmVDaGFuZ2VMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBhc3NlcnQodGhpcy50b2tlbkxpc3RlbmVyICE9IG51bGwsICdyZW1vdmVDaGFuZ2VMaXN0ZW5lcigpIGNhbGxlZCB0d2ljZScpO1xyXG4gICAgICAgIGFzc2VydCh0aGlzLmNoYW5nZUxpc3RlbmVyICE9PSBudWxsLCAncmVtb3ZlQ2hhbmdlTGlzdGVuZXIoKSBjYWxsZWQgd2hlbiBubyBsaXN0ZW5lciByZWdpc3RlcmVkJyk7XHJcbiAgICAgICAgaWYgKHRoaXMuYXV0aCkge1xyXG4gICAgICAgICAgICB0aGlzLmF1dGgucmVtb3ZlQXV0aFRva2VuTGlzdGVuZXIodGhpcy50b2tlbkxpc3RlbmVyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy50b2tlbkxpc3RlbmVyID0gbnVsbDtcclxuICAgICAgICB0aGlzLmNoYW5nZUxpc3RlbmVyID0gbnVsbDtcclxuICAgIH07XHJcbiAgICAvLyBBdXRoLmdldFVpZCgpIGNhbiByZXR1cm4gbnVsbCBldmVuIHdpdGggYSB1c2VyIGxvZ2dlZCBpbi4gSXQgaXMgYmVjYXVzZVxyXG4gICAgLy8gZ2V0VWlkKCkgaXMgc3luY2hyb25vdXMsIGJ1dCB0aGUgYXV0aCBjb2RlIHBvcHVsYXRpbmcgVWlkIGlzIGFzeW5jaHJvbm91cy5cclxuICAgIC8vIFRoaXMgbWV0aG9kIHNob3VsZCBvbmx5IGJlIGNhbGxlZCBpbiB0aGUgQXV0aFRva2VuTGlzdGVuZXIgY2FsbGJhY2tcclxuICAgIC8vIHRvIGd1YXJhbnRlZSB0byBnZXQgdGhlIGFjdHVhbCB1c2VyLlxyXG4gICAgRmlyZWJhc2VDcmVkZW50aWFsc1Byb3ZpZGVyLnByb3RvdHlwZS5nZXRVc2VyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBjdXJyZW50VWlkID0gdGhpcy5hdXRoICYmIHRoaXMuYXV0aC5nZXRVaWQoKTtcclxuICAgICAgICBhc3NlcnQoY3VycmVudFVpZCA9PT0gbnVsbCB8fCB0eXBlb2YgY3VycmVudFVpZCA9PT0gJ3N0cmluZycsICdSZWNlaXZlZCBpbnZhbGlkIFVJRDogJyArIGN1cnJlbnRVaWQpO1xyXG4gICAgICAgIHJldHVybiBuZXcgVXNlcihjdXJyZW50VWlkKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gRmlyZWJhc2VDcmVkZW50aWFsc1Byb3ZpZGVyO1xyXG59KCkpO1xyXG4vKlxyXG4gKiBGaXJzdFBhcnR5VG9rZW4gcHJvdmlkZXMgYSBmcmVzaCB0b2tlbiBlYWNoIHRpbWUgaXRzIHZhbHVlXHJcbiAqIGlzIHJlcXVlc3RlZCwgYmVjYXVzZSBpZiB0aGUgdG9rZW4gaXMgdG9vIG9sZCwgcmVxdWVzdHMgd2lsbCBiZSByZWplY3RlZC5cclxuICogVGVjaG5pY2FsbHkgdGhpcyBtYXkgbm8gbG9uZ2VyIGJlIG5lY2Vzc2FyeSBzaW5jZSB0aGUgU0RLIHNob3VsZCBncmFjZWZ1bGx5XHJcbiAqIHJlY292ZXIgZnJvbSB1bmF1dGhlbnRpY2F0ZWQgZXJyb3JzIChzZWUgYi8zMzE0NzgxOCBmb3IgY29udGV4dCksIGJ1dCBpdCdzXHJcbiAqIHNhZmVyIHRvIGtlZXAgdGhlIGltcGxlbWVudGF0aW9uIGFzLWlzLlxyXG4gKi9cclxudmFyIEZpcnN0UGFydHlUb2tlbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEZpcnN0UGFydHlUb2tlbihnYXBpLCBzZXNzaW9uSW5kZXgpIHtcclxuICAgICAgICB0aGlzLmdhcGkgPSBnYXBpO1xyXG4gICAgICAgIHRoaXMuc2Vzc2lvbkluZGV4ID0gc2Vzc2lvbkluZGV4O1xyXG4gICAgICAgIHRoaXMudHlwZSA9ICdGaXJzdFBhcnR5JztcclxuICAgICAgICB0aGlzLnVzZXIgPSBVc2VyLkZJUlNUX1BBUlRZO1xyXG4gICAgfVxyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEZpcnN0UGFydHlUb2tlbi5wcm90b3R5cGUsIFwiYXV0aEhlYWRlcnNcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgaGVhZGVycyA9IHtcclxuICAgICAgICAgICAgICAgICdYLUdvb2ctQXV0aFVzZXInOiB0aGlzLnNlc3Npb25JbmRleFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB2YXIgYXV0aEhlYWRlciA9IHRoaXMuZ2FwaS5hdXRoLmdldEF1dGhIZWFkZXJWYWx1ZUZvckZpcnN0UGFydHkoW10pO1xyXG4gICAgICAgICAgICBpZiAoYXV0aEhlYWRlcikge1xyXG4gICAgICAgICAgICAgICAgaGVhZGVyc1snQXV0aG9yaXphdGlvbiddID0gYXV0aEhlYWRlcjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gaGVhZGVycztcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIHJldHVybiBGaXJzdFBhcnR5VG9rZW47XHJcbn0oKSk7XHJcbi8qXHJcbiAqIFByb3ZpZGVzIHVzZXIgY3JlZGVudGlhbHMgcmVxdWlyZWQgZm9yIHRoZSBGaXJlc3RvcmUgSmF2YVNjcmlwdCBTREtcclxuICogdG8gYXV0aGVudGljYXRlIHRoZSB1c2VyLCB1c2luZyB0ZWNobmlxdWUgdGhhdCBpcyBvbmx5IGF2YWlsYWJsZVxyXG4gKiB0byBhcHBsaWNhdGlvbnMgaG9zdGVkIGJ5IEdvb2dsZS5cclxuICovXHJcbnZhciBGaXJzdFBhcnR5Q3JlZGVudGlhbHNQcm92aWRlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEZpcnN0UGFydHlDcmVkZW50aWFsc1Byb3ZpZGVyKGdhcGksIHNlc3Npb25JbmRleCkge1xyXG4gICAgICAgIHRoaXMuZ2FwaSA9IGdhcGk7XHJcbiAgICAgICAgdGhpcy5zZXNzaW9uSW5kZXggPSBzZXNzaW9uSW5kZXg7XHJcbiAgICB9XHJcbiAgICBGaXJzdFBhcnR5Q3JlZGVudGlhbHNQcm92aWRlci5wcm90b3R5cGUuZ2V0VG9rZW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShuZXcgRmlyc3RQYXJ0eVRva2VuKHRoaXMuZ2FwaSwgdGhpcy5zZXNzaW9uSW5kZXgpKTtcclxuICAgIH07XHJcbiAgICBGaXJzdFBhcnR5Q3JlZGVudGlhbHNQcm92aWRlci5wcm90b3R5cGUuc2V0Q2hhbmdlTGlzdGVuZXIgPSBmdW5jdGlvbiAoY2hhbmdlTGlzdGVuZXIpIHtcclxuICAgICAgICAvLyBGaXJlIHdpdGggaW5pdGlhbCB1aWQuXHJcbiAgICAgICAgY2hhbmdlTGlzdGVuZXIoVXNlci5GSVJTVF9QQVJUWSk7XHJcbiAgICB9O1xyXG4gICAgRmlyc3RQYXJ0eUNyZWRlbnRpYWxzUHJvdmlkZXIucHJvdG90eXBlLnJlbW92ZUNoYW5nZUxpc3RlbmVyID0gZnVuY3Rpb24gKCkgeyB9O1xyXG4gICAgRmlyc3RQYXJ0eUNyZWRlbnRpYWxzUHJvdmlkZXIucHJvdG90eXBlLmludmFsaWRhdGVUb2tlbiA9IGZ1bmN0aW9uICgpIHsgfTtcclxuICAgIHJldHVybiBGaXJzdFBhcnR5Q3JlZGVudGlhbHNQcm92aWRlcjtcclxufSgpKTtcclxuLyoqXHJcbiAqIEJ1aWxkcyBhIENyZWRlbnRpYWxzUHJvdmlkZXIgZGVwZW5kaW5nIG9uIHRoZSB0eXBlIG9mXHJcbiAqIHRoZSBjcmVkZW50aWFscyBwYXNzZWQgaW4uXHJcbiAqL1xyXG5mdW5jdGlvbiBtYWtlQ3JlZGVudGlhbHNQcm92aWRlcihjcmVkZW50aWFscykge1xyXG4gICAgaWYgKCFjcmVkZW50aWFscykge1xyXG4gICAgICAgIHJldHVybiBuZXcgRW1wdHlDcmVkZW50aWFsc1Byb3ZpZGVyKCk7XHJcbiAgICB9XHJcbiAgICBzd2l0Y2ggKGNyZWRlbnRpYWxzLnR5cGUpIHtcclxuICAgICAgICBjYXNlICdnYXBpJzpcclxuICAgICAgICAgICAgdmFyIGNsaWVudCA9IGNyZWRlbnRpYWxzLmNsaWVudDtcclxuICAgICAgICAgICAgLy8gTWFrZSBzdXJlIHRoaXMgcmVhbGx5IGlzIGEgR2FwaSBjbGllbnQuXHJcbiAgICAgICAgICAgIGFzc2VydCghISh0eXBlb2YgY2xpZW50ID09PSAnb2JqZWN0JyAmJlxyXG4gICAgICAgICAgICAgICAgY2xpZW50ICE9PSBudWxsICYmXHJcbiAgICAgICAgICAgICAgICBjbGllbnRbJ2F1dGgnXSAmJlxyXG4gICAgICAgICAgICAgICAgY2xpZW50WydhdXRoJ11bJ2dldEF1dGhIZWFkZXJWYWx1ZUZvckZpcnN0UGFydHknXSksICd1bmV4cGVjdGVkIGdhcGkgaW50ZXJmYWNlJyk7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgRmlyc3RQYXJ0eUNyZWRlbnRpYWxzUHJvdmlkZXIoY2xpZW50LCBjcmVkZW50aWFscy5zZXNzaW9uSW5kZXggfHwgJzAnKTtcclxuICAgICAgICBjYXNlICdwcm92aWRlcic6XHJcbiAgICAgICAgICAgIHJldHVybiBjcmVkZW50aWFscy5jbGllbnQ7XHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuSU5WQUxJRF9BUkdVTUVOVCwgJ21ha2VDcmVkZW50aWFsc1Byb3ZpZGVyIGZhaWxlZCBkdWUgdG8gaW52YWxpZCBjcmVkZW50aWFsIHR5cGUnKTtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gaXNQYXJ0aWFsT2JzZXJ2ZXIob2JqKSB7XHJcbiAgICByZXR1cm4gaW1wbGVtZW50c0FueU1ldGhvZHMob2JqLCBbJ25leHQnLCAnZXJyb3InLCAnY29tcGxldGUnXSk7XHJcbn1cclxuLyoqXHJcbiAqIFJldHVybnMgdHJ1ZSBpZiBvYmogaXMgYW4gb2JqZWN0IGFuZCBjb250YWlucyBhdCBsZWFzdCBvbmUgb2YgdGhlIHNwZWNpZmllZFxyXG4gKiBtZXRob2RzLlxyXG4gKi9cclxuZnVuY3Rpb24gaW1wbGVtZW50c0FueU1ldGhvZHMob2JqLCBtZXRob2RzKSB7XHJcbiAgICBpZiAodHlwZW9mIG9iaiAhPT0gJ29iamVjdCcgfHwgb2JqID09PSBudWxsKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgdmFyIG9iamVjdCA9IG9iajtcclxuICAgIGZvciAodmFyIF9pID0gMCwgbWV0aG9kc18xID0gbWV0aG9kczsgX2kgPCBtZXRob2RzXzEubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgdmFyIG1ldGhvZCA9IG1ldGhvZHNfMVtfaV07XHJcbiAgICAgICAgaWYgKG1ldGhvZCBpbiBvYmplY3QgJiYgdHlwZW9mIG9iamVjdFttZXRob2RdID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBmYWxzZTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEFuIG9wYXF1ZSBiYXNlIGNsYXNzIGZvciBGaWVsZFZhbHVlIHNlbnRpbmVsIG9iamVjdHMgaW4gb3VyIHB1YmxpYyBBUEksXHJcbiAqIHdpdGggcHVibGljIHN0YXRpYyBtZXRob2RzIGZvciBjcmVhdGluZyBzYWlkIHNlbnRpbmVsIG9iamVjdHMuXHJcbiAqL1xyXG52YXIgRmllbGRWYWx1ZUltcGwgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBGaWVsZFZhbHVlSW1wbChfbWV0aG9kTmFtZSkge1xyXG4gICAgICAgIHRoaXMuX21ldGhvZE5hbWUgPSBfbWV0aG9kTmFtZTtcclxuICAgIH1cclxuICAgIEZpZWxkVmFsdWVJbXBsLmRlbGV0ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YWxpZGF0ZU5vQXJncygnRmllbGRWYWx1ZS5kZWxldGUnLCBhcmd1bWVudHMpO1xyXG4gICAgICAgIHJldHVybiBEZWxldGVGaWVsZFZhbHVlSW1wbC5pbnN0YW5jZTtcclxuICAgIH07XHJcbiAgICBGaWVsZFZhbHVlSW1wbC5zZXJ2ZXJUaW1lc3RhbXAgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFsaWRhdGVOb0FyZ3MoJ0ZpZWxkVmFsdWUuc2VydmVyVGltZXN0YW1wJywgYXJndW1lbnRzKTtcclxuICAgICAgICByZXR1cm4gU2VydmVyVGltZXN0YW1wRmllbGRWYWx1ZUltcGwuaW5zdGFuY2U7XHJcbiAgICB9O1xyXG4gICAgRmllbGRWYWx1ZUltcGwuYXJyYXlVbmlvbiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgZWxlbWVudHMgPSBbXTtcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICBlbGVtZW50c1tfaV0gPSBhcmd1bWVudHNbX2ldO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YWxpZGF0ZUF0TGVhc3ROdW1iZXJPZkFyZ3MoJ0ZpZWxkVmFsdWUuYXJyYXlVbmlvbicsIGFyZ3VtZW50cywgMSk7XHJcbiAgICAgICAgLy8gTk9URTogV2UgZG9uJ3QgYWN0dWFsbHkgcGFyc2UgdGhlIGRhdGEgdW50aWwgaXQncyB1c2VkIGluIHNldCgpIG9yXHJcbiAgICAgICAgLy8gdXBkYXRlKCkgc2luY2Ugd2UgbmVlZCBhY2Nlc3MgdG8gdGhlIEZpcmVzdG9yZSBpbnN0YW5jZS5cclxuICAgICAgICByZXR1cm4gbmV3IEFycmF5VW5pb25GaWVsZFZhbHVlSW1wbChlbGVtZW50cyk7XHJcbiAgICB9O1xyXG4gICAgRmllbGRWYWx1ZUltcGwuYXJyYXlSZW1vdmUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGVsZW1lbnRzID0gW107XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgZWxlbWVudHNbX2ldID0gYXJndW1lbnRzW19pXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFsaWRhdGVBdExlYXN0TnVtYmVyT2ZBcmdzKCdGaWVsZFZhbHVlLmFycmF5UmVtb3ZlJywgYXJndW1lbnRzLCAxKTtcclxuICAgICAgICAvLyBOT1RFOiBXZSBkb24ndCBhY3R1YWxseSBwYXJzZSB0aGUgZGF0YSB1bnRpbCBpdCdzIHVzZWQgaW4gc2V0KCkgb3JcclxuICAgICAgICAvLyB1cGRhdGUoKSBzaW5jZSB3ZSBuZWVkIGFjY2VzcyB0byB0aGUgRmlyZXN0b3JlIGluc3RhbmNlLlxyXG4gICAgICAgIHJldHVybiBuZXcgQXJyYXlSZW1vdmVGaWVsZFZhbHVlSW1wbChlbGVtZW50cyk7XHJcbiAgICB9O1xyXG4gICAgRmllbGRWYWx1ZUltcGwuaW5jcmVtZW50ID0gZnVuY3Rpb24gKG4pIHtcclxuICAgICAgICB2YWxpZGF0ZUFyZ1R5cGUoJ0ZpZWxkVmFsdWUuaW5jcmVtZW50JywgJ251bWJlcicsIDEsIG4pO1xyXG4gICAgICAgIHZhbGlkYXRlRXhhY3ROdW1iZXJPZkFyZ3MoJ0ZpZWxkVmFsdWUuaW5jcmVtZW50JywgYXJndW1lbnRzLCAxKTtcclxuICAgICAgICByZXR1cm4gbmV3IE51bWVyaWNJbmNyZW1lbnRGaWVsZFZhbHVlSW1wbChuKTtcclxuICAgIH07XHJcbiAgICBGaWVsZFZhbHVlSW1wbC5wcm90b3R5cGUuaXNFcXVhbCA9IGZ1bmN0aW9uIChvdGhlcikge1xyXG4gICAgICAgIHJldHVybiB0aGlzID09PSBvdGhlcjtcclxuICAgIH07XHJcbiAgICByZXR1cm4gRmllbGRWYWx1ZUltcGw7XHJcbn0oKSk7XHJcbnZhciBEZWxldGVGaWVsZFZhbHVlSW1wbCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIHRzbGliLl9fZXh0ZW5kcyhEZWxldGVGaWVsZFZhbHVlSW1wbCwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIERlbGV0ZUZpZWxkVmFsdWVJbXBsKCkge1xyXG4gICAgICAgIHJldHVybiBfc3VwZXIuY2FsbCh0aGlzLCAnRmllbGRWYWx1ZS5kZWxldGUnKSB8fCB0aGlzO1xyXG4gICAgfVxyXG4gICAgLyoqIFNpbmdsZXRvbiBpbnN0YW5jZS4gKi9cclxuICAgIERlbGV0ZUZpZWxkVmFsdWVJbXBsLmluc3RhbmNlID0gbmV3IERlbGV0ZUZpZWxkVmFsdWVJbXBsKCk7XHJcbiAgICByZXR1cm4gRGVsZXRlRmllbGRWYWx1ZUltcGw7XHJcbn0oRmllbGRWYWx1ZUltcGwpKTtcclxudmFyIFNlcnZlclRpbWVzdGFtcEZpZWxkVmFsdWVJbXBsID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgdHNsaWIuX19leHRlbmRzKFNlcnZlclRpbWVzdGFtcEZpZWxkVmFsdWVJbXBsLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gU2VydmVyVGltZXN0YW1wRmllbGRWYWx1ZUltcGwoKSB7XHJcbiAgICAgICAgcmV0dXJuIF9zdXBlci5jYWxsKHRoaXMsICdGaWVsZFZhbHVlLnNlcnZlclRpbWVzdGFtcCcpIHx8IHRoaXM7XHJcbiAgICB9XHJcbiAgICAvKiogU2luZ2xldG9uIGluc3RhbmNlLiAqL1xyXG4gICAgU2VydmVyVGltZXN0YW1wRmllbGRWYWx1ZUltcGwuaW5zdGFuY2UgPSBuZXcgU2VydmVyVGltZXN0YW1wRmllbGRWYWx1ZUltcGwoKTtcclxuICAgIHJldHVybiBTZXJ2ZXJUaW1lc3RhbXBGaWVsZFZhbHVlSW1wbDtcclxufShGaWVsZFZhbHVlSW1wbCkpO1xyXG52YXIgQXJyYXlVbmlvbkZpZWxkVmFsdWVJbXBsID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgdHNsaWIuX19leHRlbmRzKEFycmF5VW5pb25GaWVsZFZhbHVlSW1wbCwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIEFycmF5VW5pb25GaWVsZFZhbHVlSW1wbChfZWxlbWVudHMpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCAnRmllbGRWYWx1ZS5hcnJheVVuaW9uJykgfHwgdGhpcztcclxuICAgICAgICBfdGhpcy5fZWxlbWVudHMgPSBfZWxlbWVudHM7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIEFycmF5VW5pb25GaWVsZFZhbHVlSW1wbDtcclxufShGaWVsZFZhbHVlSW1wbCkpO1xyXG52YXIgQXJyYXlSZW1vdmVGaWVsZFZhbHVlSW1wbCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIHRzbGliLl9fZXh0ZW5kcyhBcnJheVJlbW92ZUZpZWxkVmFsdWVJbXBsLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gQXJyYXlSZW1vdmVGaWVsZFZhbHVlSW1wbChfZWxlbWVudHMpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCAnRmllbGRWYWx1ZS5hcnJheVJlbW92ZScpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMuX2VsZW1lbnRzID0gX2VsZW1lbnRzO1xyXG4gICAgICAgIHJldHVybiBfdGhpcztcclxuICAgIH1cclxuICAgIHJldHVybiBBcnJheVJlbW92ZUZpZWxkVmFsdWVJbXBsO1xyXG59KEZpZWxkVmFsdWVJbXBsKSk7XHJcbnZhciBOdW1lcmljSW5jcmVtZW50RmllbGRWYWx1ZUltcGwgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICB0c2xpYi5fX2V4dGVuZHMoTnVtZXJpY0luY3JlbWVudEZpZWxkVmFsdWVJbXBsLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gTnVtZXJpY0luY3JlbWVudEZpZWxkVmFsdWVJbXBsKF9vcGVyYW5kKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgJ0ZpZWxkVmFsdWUuaW5jcmVtZW50JykgfHwgdGhpcztcclxuICAgICAgICBfdGhpcy5fb3BlcmFuZCA9IF9vcGVyYW5kO1xyXG4gICAgICAgIHJldHVybiBfdGhpcztcclxuICAgIH1cclxuICAgIHJldHVybiBOdW1lcmljSW5jcmVtZW50RmllbGRWYWx1ZUltcGw7XHJcbn0oRmllbGRWYWx1ZUltcGwpKTtcclxuLy8gUHVibGljIGluc3RhbmNlIHRoYXQgZGlzYWxsb3dzIGNvbnN0cnVjdGlvbiBhdCBydW50aW1lLiBUaGlzIGNvbnN0cnVjdG9yIGlzXHJcbi8vIHVzZWQgd2hlbiBleHBvcnRpbmcgRmllbGRWYWx1ZUltcGwgb24gZmlyZWJhc2UuZmlyZXN0b3JlLkZpZWxkVmFsdWUgYW5kIHdpbGxcclxuLy8gYmUgY2FsbGVkIEZpZWxkVmFsdWUgcHVibGljbHkuIEludGVybmFsbHkgd2Ugc3RpbGwgdXNlIEZpZWxkVmFsdWVJbXBsIHdoaWNoXHJcbi8vIGhhcyBhIHR5cGUtY2hlY2tlZCBwcml2YXRlIGNvbnN0cnVjdG9yLiBOb3RlIHRoYXQgRmllbGRWYWx1ZUltcGwgYW5kXHJcbi8vIFB1YmxpY0ZpZWxkVmFsdWUgY2FuIGJlIHVzZWQgaW50ZXJjaGFuZ2VhYmx5IGluIGluc3RhbmNlb2YgY2hlY2tzLlxyXG4vLyBGb3Igb3VyIGludGVybmFsIFR5cGVTY3JpcHQgY29kZSBQdWJsaWNGaWVsZFZhbHVlIGRvZXNuJ3QgZXhpc3QgYXMgYSB0eXBlLFxyXG4vLyBhbmQgc28gd2UgbmVlZCB0byB1c2UgRmllbGRWYWx1ZUltcGwgYXMgdHlwZSBhbmQgZXhwb3J0IGl0IHRvby5cclxudmFyIFB1YmxpY0ZpZWxkVmFsdWUgPSBtYWtlQ29uc3RydWN0b3JQcml2YXRlKEZpZWxkVmFsdWVJbXBsLCAnVXNlIEZpZWxkVmFsdWUuPGZpZWxkPigpIGluc3RlYWQuJyk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG52YXIgUkVTRVJWRURfRklFTERfUkVHRVggPSAvXl9fLipfXyQvO1xyXG4vKiogVGhlIHJlc3VsdCBvZiBwYXJzaW5nIGRvY3VtZW50IGRhdGEgKGUuZy4gZm9yIGEgc2V0RGF0YSBjYWxsKS4gKi9cclxudmFyIFBhcnNlZFNldERhdGEgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBQYXJzZWRTZXREYXRhKGRhdGEsIGZpZWxkTWFzaywgZmllbGRUcmFuc2Zvcm1zKSB7XHJcbiAgICAgICAgdGhpcy5kYXRhID0gZGF0YTtcclxuICAgICAgICB0aGlzLmZpZWxkTWFzayA9IGZpZWxkTWFzaztcclxuICAgICAgICB0aGlzLmZpZWxkVHJhbnNmb3JtcyA9IGZpZWxkVHJhbnNmb3JtcztcclxuICAgIH1cclxuICAgIFBhcnNlZFNldERhdGEucHJvdG90eXBlLnRvTXV0YXRpb25zID0gZnVuY3Rpb24gKGtleSwgcHJlY29uZGl0aW9uKSB7XHJcbiAgICAgICAgdmFyIG11dGF0aW9ucyA9IFtdO1xyXG4gICAgICAgIGlmICh0aGlzLmZpZWxkTWFzayAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBtdXRhdGlvbnMucHVzaChuZXcgUGF0Y2hNdXRhdGlvbihrZXksIHRoaXMuZGF0YSwgdGhpcy5maWVsZE1hc2ssIHByZWNvbmRpdGlvbikpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgbXV0YXRpb25zLnB1c2gobmV3IFNldE11dGF0aW9uKGtleSwgdGhpcy5kYXRhLCBwcmVjb25kaXRpb24pKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuZmllbGRUcmFuc2Zvcm1zLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgbXV0YXRpb25zLnB1c2gobmV3IFRyYW5zZm9ybU11dGF0aW9uKGtleSwgdGhpcy5maWVsZFRyYW5zZm9ybXMpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG11dGF0aW9ucztcclxuICAgIH07XHJcbiAgICByZXR1cm4gUGFyc2VkU2V0RGF0YTtcclxufSgpKTtcclxuLyoqIFRoZSByZXN1bHQgb2YgcGFyc2luZyBcInVwZGF0ZVwiIGRhdGEgKGkuZS4gZm9yIGFuIHVwZGF0ZURhdGEgY2FsbCkuICovXHJcbnZhciBQYXJzZWRVcGRhdGVEYXRhID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gUGFyc2VkVXBkYXRlRGF0YShkYXRhLCBmaWVsZE1hc2ssIGZpZWxkVHJhbnNmb3Jtcykge1xyXG4gICAgICAgIHRoaXMuZGF0YSA9IGRhdGE7XHJcbiAgICAgICAgdGhpcy5maWVsZE1hc2sgPSBmaWVsZE1hc2s7XHJcbiAgICAgICAgdGhpcy5maWVsZFRyYW5zZm9ybXMgPSBmaWVsZFRyYW5zZm9ybXM7XHJcbiAgICB9XHJcbiAgICBQYXJzZWRVcGRhdGVEYXRhLnByb3RvdHlwZS50b011dGF0aW9ucyA9IGZ1bmN0aW9uIChrZXksIHByZWNvbmRpdGlvbikge1xyXG4gICAgICAgIHZhciBtdXRhdGlvbnMgPSBbXHJcbiAgICAgICAgICAgIG5ldyBQYXRjaE11dGF0aW9uKGtleSwgdGhpcy5kYXRhLCB0aGlzLmZpZWxkTWFzaywgcHJlY29uZGl0aW9uKVxyXG4gICAgICAgIF07XHJcbiAgICAgICAgaWYgKHRoaXMuZmllbGRUcmFuc2Zvcm1zLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgbXV0YXRpb25zLnB1c2gobmV3IFRyYW5zZm9ybU11dGF0aW9uKGtleSwgdGhpcy5maWVsZFRyYW5zZm9ybXMpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG11dGF0aW9ucztcclxuICAgIH07XHJcbiAgICByZXR1cm4gUGFyc2VkVXBkYXRlRGF0YTtcclxufSgpKTtcclxuLypcclxuICogUmVwcmVzZW50cyB3aGF0IHR5cGUgb2YgQVBJIG1ldGhvZCBwcm92aWRlZCB0aGUgZGF0YSBiZWluZyBwYXJzZWQ7IHVzZWZ1bFxyXG4gKiBmb3IgZGV0ZXJtaW5pbmcgd2hpY2ggZXJyb3IgY29uZGl0aW9ucyBhcHBseSBkdXJpbmcgcGFyc2luZyBhbmQgcHJvdmlkaW5nXHJcbiAqIGJldHRlciBlcnJvciBtZXNzYWdlcy5cclxuICovXHJcbnZhciBVc2VyRGF0YVNvdXJjZTtcclxuKGZ1bmN0aW9uIChVc2VyRGF0YVNvdXJjZSkge1xyXG4gICAgVXNlckRhdGFTb3VyY2VbVXNlckRhdGFTb3VyY2VbXCJTZXRcIl0gPSAwXSA9IFwiU2V0XCI7XHJcbiAgICBVc2VyRGF0YVNvdXJjZVtVc2VyRGF0YVNvdXJjZVtcIlVwZGF0ZVwiXSA9IDFdID0gXCJVcGRhdGVcIjtcclxuICAgIFVzZXJEYXRhU291cmNlW1VzZXJEYXRhU291cmNlW1wiTWVyZ2VTZXRcIl0gPSAyXSA9IFwiTWVyZ2VTZXRcIjtcclxuICAgIC8qKlxyXG4gICAgICogSW5kaWNhdGVzIHRoZSBzb3VyY2UgaXMgYSB3aGVyZSBjbGF1c2UsIGN1cnNvciBib3VuZCwgYXJyYXlVbmlvbigpXHJcbiAgICAgKiBlbGVtZW50LCBldGMuIE9mIG5vdGUsIGlzV3JpdGUoc291cmNlKSB3aWxsIHJldHVybiBmYWxzZS5cclxuICAgICAqL1xyXG4gICAgVXNlckRhdGFTb3VyY2VbVXNlckRhdGFTb3VyY2VbXCJBcmd1bWVudFwiXSA9IDNdID0gXCJBcmd1bWVudFwiO1xyXG4gICAgLyoqXHJcbiAgICAgKiBJbmRpY2F0ZXMgdGhhdCB0aGUgc291cmNlIGlzIGFuIEFyZ3VtZW50IHRoYXQgbWF5IGRpcmVjdGx5IGNvbnRhaW4gbmVzdGVkXHJcbiAgICAgKiBhcnJheXMgKGUuZy4gdGhlIG9wZXJhbmQgb2YgYW4gYGluYCBxdWVyeSkuXHJcbiAgICAgKi9cclxuICAgIFVzZXJEYXRhU291cmNlW1VzZXJEYXRhU291cmNlW1wiQXJyYXlBcmd1bWVudFwiXSA9IDRdID0gXCJBcnJheUFyZ3VtZW50XCI7XHJcbn0pKFVzZXJEYXRhU291cmNlIHx8IChVc2VyRGF0YVNvdXJjZSA9IHt9KSk7XHJcbmZ1bmN0aW9uIGlzV3JpdGUoZGF0YVNvdXJjZSkge1xyXG4gICAgc3dpdGNoIChkYXRhU291cmNlKSB7XHJcbiAgICAgICAgY2FzZSBVc2VyRGF0YVNvdXJjZS5TZXQ6IC8vIGZhbGwgdGhyb3VnaFxyXG4gICAgICAgIGNhc2UgVXNlckRhdGFTb3VyY2UuTWVyZ2VTZXQ6IC8vIGZhbGwgdGhyb3VnaFxyXG4gICAgICAgIGNhc2UgVXNlckRhdGFTb3VyY2UuVXBkYXRlOlxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICBjYXNlIFVzZXJEYXRhU291cmNlLkFyZ3VtZW50OlxyXG4gICAgICAgIGNhc2UgVXNlckRhdGFTb3VyY2UuQXJyYXlBcmd1bWVudDpcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgIHRocm93IGZhaWwoXCJVbmV4cGVjdGVkIGNhc2UgZm9yIFVzZXJEYXRhU291cmNlOiBcIiArIGRhdGFTb3VyY2UpO1xyXG4gICAgfVxyXG59XHJcbi8qKiBBIFwiY29udGV4dFwiIG9iamVjdCBwYXNzZWQgYXJvdW5kIHdoaWxlIHBhcnNpbmcgdXNlciBkYXRhLiAqL1xyXG52YXIgUGFyc2VDb250ZXh0ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgLyoqXHJcbiAgICAgKiBJbml0aWFsaXplcyBhIFBhcnNlQ29udGV4dCB3aXRoIHRoZSBnaXZlbiBzb3VyY2UgYW5kIHBhdGguXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGRhdGFTb3VyY2UgSW5kaWNhdGVzIHdoYXQga2luZCBvZiBBUEkgbWV0aG9kIHRoaXMgZGF0YSBjYW1lIGZyb20uXHJcbiAgICAgKiBAcGFyYW0gbWV0aG9kTmFtZSBUaGUgbmFtZSBvZiB0aGUgbWV0aG9kIHRoZSB1c2VyIGNhbGxlZCB0byBjcmVhdGUgdGhpc1xyXG4gICAgICogICAgIFBhcnNlQ29udGV4dC5cclxuICAgICAqIEBwYXJhbSBwYXRoIEEgcGF0aCB3aXRoaW4gdGhlIG9iamVjdCBiZWluZyBwYXJzZWQuIFRoaXMgY291bGQgYmUgYW4gZW1wdHlcclxuICAgICAqICAgICBwYXRoIChpbiB3aGljaCBjYXNlIHRoZSBjb250ZXh0IHJlcHJlc2VudHMgdGhlIHJvb3Qgb2YgdGhlIGRhdGEgYmVpbmdcclxuICAgICAqICAgICBwYXJzZWQpLCBvciBhIG5vbmVtcHR5IHBhdGggKGluZGljYXRpbmcgdGhlIGNvbnRleHQgcmVwcmVzZW50cyBhIG5lc3RlZFxyXG4gICAgICogICAgIGxvY2F0aW9uIHdpdGhpbiB0aGUgZGF0YSkuXHJcbiAgICAgKiBAcGFyYW0gYXJyYXlFbGVtZW50IFdoZXRoZXIgb3Igbm90IHRoaXMgY29udGV4dCBjb3JyZXNwb25kcyB0byBhbiBlbGVtZW50XHJcbiAgICAgKiAgICAgb2YgYW4gYXJyYXkuXHJcbiAgICAgKiBAcGFyYW0gZmllbGRUcmFuc2Zvcm1zIEEgbXV0YWJsZSBsaXN0IG9mIGZpZWxkIHRyYW5zZm9ybXMgZW5jb3VudGVyZWQgd2hpbGVcclxuICAgICAqICAgICBwYXJzaW5nIHRoZSBkYXRhLlxyXG4gICAgICogQHBhcmFtIGZpZWxkTWFzayBBIG11dGFibGUgbGlzdCBvZiBmaWVsZCBwYXRocyBlbmNvdW50ZXJlZCB3aGlsZSBwYXJzaW5nXHJcbiAgICAgKiAgICAgdGhlIGRhdGEuXHJcbiAgICAgKlxyXG4gICAgICogVE9ETyhiLzM0ODcxMTMxKTogV2UgZG9uJ3Qgc3VwcG9ydCBhcnJheSBwYXRocyByaWdodCBub3csIHNvIHBhdGggY2FuIGJlXHJcbiAgICAgKiBudWxsIHRvIGluZGljYXRlIHRoZSBjb250ZXh0IHJlcHJlc2VudHMgYW55IGxvY2F0aW9uIHdpdGhpbiBhbiBhcnJheSAoaW5cclxuICAgICAqIHdoaWNoIGNhc2UgY2VydGFpbiBmZWF0dXJlcyB3aWxsIG5vdCB3b3JrIGFuZCBlcnJvcnMgd2lsbCBiZSBzb21ld2hhdFxyXG4gICAgICogY29tcHJvbWlzZWQpLlxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBQYXJzZUNvbnRleHQoZGF0YVNvdXJjZSwgbWV0aG9kTmFtZSwgcGF0aCwgYXJyYXlFbGVtZW50LCBmaWVsZFRyYW5zZm9ybXMsIGZpZWxkTWFzaykge1xyXG4gICAgICAgIHRoaXMuZGF0YVNvdXJjZSA9IGRhdGFTb3VyY2U7XHJcbiAgICAgICAgdGhpcy5tZXRob2ROYW1lID0gbWV0aG9kTmFtZTtcclxuICAgICAgICB0aGlzLnBhdGggPSBwYXRoO1xyXG4gICAgICAgIHRoaXMuYXJyYXlFbGVtZW50ID0gYXJyYXlFbGVtZW50O1xyXG4gICAgICAgIC8vIE1pbm9yIGhhY2s6IElmIGZpZWxkVHJhbnNmb3JtcyBpcyB1bmRlZmluZWQsIHdlIGFzc3VtZSB0aGlzIGlzIGFuXHJcbiAgICAgICAgLy8gZXh0ZXJuYWwgY2FsbCBhbmQgd2UgbmVlZCB0byB2YWxpZGF0ZSB0aGUgZW50aXJlIHBhdGguXHJcbiAgICAgICAgaWYgKGZpZWxkVHJhbnNmb3JtcyA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMudmFsaWRhdGVQYXRoKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuYXJyYXlFbGVtZW50ID0gYXJyYXlFbGVtZW50ICE9PSB1bmRlZmluZWQgPyBhcnJheUVsZW1lbnQgOiBmYWxzZTtcclxuICAgICAgICB0aGlzLmZpZWxkVHJhbnNmb3JtcyA9IGZpZWxkVHJhbnNmb3JtcyB8fCBbXTtcclxuICAgICAgICB0aGlzLmZpZWxkTWFzayA9IGZpZWxkTWFzayB8fCBbXTtcclxuICAgIH1cclxuICAgIFBhcnNlQ29udGV4dC5wcm90b3R5cGUuY2hpbGRDb250ZXh0Rm9yRmllbGQgPSBmdW5jdGlvbiAoZmllbGQpIHtcclxuICAgICAgICB2YXIgY2hpbGRQYXRoID0gdGhpcy5wYXRoID09IG51bGwgPyBudWxsIDogdGhpcy5wYXRoLmNoaWxkKGZpZWxkKTtcclxuICAgICAgICB2YXIgY29udGV4dCA9IG5ldyBQYXJzZUNvbnRleHQodGhpcy5kYXRhU291cmNlLCB0aGlzLm1ldGhvZE5hbWUsIGNoaWxkUGF0aCwgXHJcbiAgICAgICAgLyphcnJheUVsZW1lbnQ9Ki8gZmFsc2UsIHRoaXMuZmllbGRUcmFuc2Zvcm1zLCB0aGlzLmZpZWxkTWFzayk7XHJcbiAgICAgICAgY29udGV4dC52YWxpZGF0ZVBhdGhTZWdtZW50KGZpZWxkKTtcclxuICAgICAgICByZXR1cm4gY29udGV4dDtcclxuICAgIH07XHJcbiAgICBQYXJzZUNvbnRleHQucHJvdG90eXBlLmNoaWxkQ29udGV4dEZvckZpZWxkUGF0aCA9IGZ1bmN0aW9uIChmaWVsZCkge1xyXG4gICAgICAgIHZhciBjaGlsZFBhdGggPSB0aGlzLnBhdGggPT0gbnVsbCA/IG51bGwgOiB0aGlzLnBhdGguY2hpbGQoZmllbGQpO1xyXG4gICAgICAgIHZhciBjb250ZXh0ID0gbmV3IFBhcnNlQ29udGV4dCh0aGlzLmRhdGFTb3VyY2UsIHRoaXMubWV0aG9kTmFtZSwgY2hpbGRQYXRoLCBcclxuICAgICAgICAvKmFycmF5RWxlbWVudD0qLyBmYWxzZSwgdGhpcy5maWVsZFRyYW5zZm9ybXMsIHRoaXMuZmllbGRNYXNrKTtcclxuICAgICAgICBjb250ZXh0LnZhbGlkYXRlUGF0aCgpO1xyXG4gICAgICAgIHJldHVybiBjb250ZXh0O1xyXG4gICAgfTtcclxuICAgIFBhcnNlQ29udGV4dC5wcm90b3R5cGUuY2hpbGRDb250ZXh0Rm9yQXJyYXkgPSBmdW5jdGlvbiAoaW5kZXgpIHtcclxuICAgICAgICAvLyBUT0RPKGIvMzQ4NzExMzEpOiBXZSBkb24ndCBzdXBwb3J0IGFycmF5IHBhdGhzIHJpZ2h0IG5vdzsgc28gbWFrZSBwYXRoXHJcbiAgICAgICAgLy8gbnVsbC5cclxuICAgICAgICByZXR1cm4gbmV3IFBhcnNlQ29udGV4dCh0aGlzLmRhdGFTb3VyY2UsIHRoaXMubWV0aG9kTmFtZSwgXHJcbiAgICAgICAgLypwYXRoPSovIG51bGwsIFxyXG4gICAgICAgIC8qYXJyYXlFbGVtZW50PSovIHRydWUsIHRoaXMuZmllbGRUcmFuc2Zvcm1zLCB0aGlzLmZpZWxkTWFzayk7XHJcbiAgICB9O1xyXG4gICAgUGFyc2VDb250ZXh0LnByb3RvdHlwZS5jcmVhdGVFcnJvciA9IGZ1bmN0aW9uIChyZWFzb24pIHtcclxuICAgICAgICB2YXIgZmllbGREZXNjcmlwdGlvbiA9IHRoaXMucGF0aCA9PT0gbnVsbCB8fCB0aGlzLnBhdGguaXNFbXB0eSgpXHJcbiAgICAgICAgICAgID8gJydcclxuICAgICAgICAgICAgOiBcIiAoZm91bmQgaW4gZmllbGQgXCIgKyB0aGlzLnBhdGgudG9TdHJpbmcoKSArIFwiKVwiO1xyXG4gICAgICAgIHJldHVybiBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5JTlZBTElEX0FSR1VNRU5ULCBcIkZ1bmN0aW9uIFwiICsgdGhpcy5tZXRob2ROYW1lICsgXCIoKSBjYWxsZWQgd2l0aCBpbnZhbGlkIGRhdGEuIFwiICtcclxuICAgICAgICAgICAgcmVhc29uICtcclxuICAgICAgICAgICAgZmllbGREZXNjcmlwdGlvbik7XHJcbiAgICB9O1xyXG4gICAgLyoqIFJldHVybnMgJ3RydWUnIGlmICdmaWVsZFBhdGgnIHdhcyB0cmF2ZXJzZWQgd2hlbiBjcmVhdGluZyB0aGlzIGNvbnRleHQuICovXHJcbiAgICBQYXJzZUNvbnRleHQucHJvdG90eXBlLmNvbnRhaW5zID0gZnVuY3Rpb24gKGZpZWxkUGF0aCkge1xyXG4gICAgICAgIHJldHVybiAodGhpcy5maWVsZE1hc2suZmluZChmdW5jdGlvbiAoZmllbGQpIHsgcmV0dXJuIGZpZWxkUGF0aC5pc1ByZWZpeE9mKGZpZWxkKTsgfSkgIT09IHVuZGVmaW5lZCB8fFxyXG4gICAgICAgICAgICB0aGlzLmZpZWxkVHJhbnNmb3Jtcy5maW5kKGZ1bmN0aW9uICh0cmFuc2Zvcm0pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmaWVsZFBhdGguaXNQcmVmaXhPZih0cmFuc2Zvcm0uZmllbGQpO1xyXG4gICAgICAgICAgICB9KSAhPT0gdW5kZWZpbmVkKTtcclxuICAgIH07XHJcbiAgICBQYXJzZUNvbnRleHQucHJvdG90eXBlLnZhbGlkYXRlUGF0aCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvLyBUT0RPKGIvMzQ4NzExMzEpOiBSZW1vdmUgbnVsbCBjaGVjayBvbmNlIHdlIGhhdmUgcHJvcGVyIHBhdGhzIGZvciBmaWVsZHNcclxuICAgICAgICAvLyB3aXRoaW4gYXJyYXlzLlxyXG4gICAgICAgIGlmICh0aGlzLnBhdGggPT09IG51bGwpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMucGF0aC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB0aGlzLnZhbGlkYXRlUGF0aFNlZ21lbnQodGhpcy5wYXRoLmdldChpKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFBhcnNlQ29udGV4dC5wcm90b3R5cGUudmFsaWRhdGVQYXRoU2VnbWVudCA9IGZ1bmN0aW9uIChzZWdtZW50KSB7XHJcbiAgICAgICAgaWYgKHNlZ21lbnQubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIHRocm93IHRoaXMuY3JlYXRlRXJyb3IoJ0RvY3VtZW50IGZpZWxkcyBtdXN0IG5vdCBiZSBlbXB0eScpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoaXNXcml0ZSh0aGlzLmRhdGFTb3VyY2UpICYmIFJFU0VSVkVEX0ZJRUxEX1JFR0VYLnRlc3Qoc2VnbWVudCkpIHtcclxuICAgICAgICAgICAgdGhyb3cgdGhpcy5jcmVhdGVFcnJvcignRG9jdW1lbnQgZmllbGRzIGNhbm5vdCBiZWdpbiBhbmQgZW5kIHdpdGggXCJfX1wiJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHJldHVybiBQYXJzZUNvbnRleHQ7XHJcbn0oKSk7XHJcbi8qKlxyXG4gKiBBIHBsYWNlaG9sZGVyIG9iamVjdCBmb3IgRG9jdW1lbnRSZWZlcmVuY2VzIGluIHRoaXMgZmlsZSwgaW4gb3JkZXIgdG9cclxuICogYXZvaWQgYSBjaXJjdWxhciBkZXBlbmRlbmN5LiBTZWUgdGhlIGNvbW1lbnRzIGZvciBgRGF0YVByZUNvbnZlcnRlcmAgZm9yXHJcbiAqIHRoZSBmdWxsIGNvbnRleHQuXHJcbiAqL1xyXG52YXIgRG9jdW1lbnRLZXlSZWZlcmVuY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBEb2N1bWVudEtleVJlZmVyZW5jZShkYXRhYmFzZUlkLCBrZXkpIHtcclxuICAgICAgICB0aGlzLmRhdGFiYXNlSWQgPSBkYXRhYmFzZUlkO1xyXG4gICAgICAgIHRoaXMua2V5ID0ga2V5O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIERvY3VtZW50S2V5UmVmZXJlbmNlO1xyXG59KCkpO1xyXG4vKipcclxuICogSGVscGVyIGZvciBwYXJzaW5nIHJhdyB1c2VyIGlucHV0IChwcm92aWRlZCB2aWEgdGhlIEFQSSkgaW50byBpbnRlcm5hbCBtb2RlbFxyXG4gKiBjbGFzc2VzLlxyXG4gKi9cclxudmFyIFVzZXJEYXRhQ29udmVydGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gVXNlckRhdGFDb252ZXJ0ZXIocHJlQ29udmVydGVyKSB7XHJcbiAgICAgICAgdGhpcy5wcmVDb252ZXJ0ZXIgPSBwcmVDb252ZXJ0ZXI7XHJcbiAgICB9XHJcbiAgICAvKiogUGFyc2UgZG9jdW1lbnQgZGF0YSBmcm9tIGEgbm9uLW1lcmdlIHNldCgpIGNhbGwuICovXHJcbiAgICBVc2VyRGF0YUNvbnZlcnRlci5wcm90b3R5cGUucGFyc2VTZXREYXRhID0gZnVuY3Rpb24gKG1ldGhvZE5hbWUsIGlucHV0KSB7XHJcbiAgICAgICAgdmFyIGNvbnRleHQgPSBuZXcgUGFyc2VDb250ZXh0KFVzZXJEYXRhU291cmNlLlNldCwgbWV0aG9kTmFtZSwgRmllbGRQYXRoLkVNUFRZX1BBVEgpO1xyXG4gICAgICAgIHZhbGlkYXRlUGxhaW5PYmplY3QoJ0RhdGEgbXVzdCBiZSBhbiBvYmplY3QsIGJ1dCBpdCB3YXM6JywgY29udGV4dCwgaW5wdXQpO1xyXG4gICAgICAgIHZhciB1cGRhdGVEYXRhID0gdGhpcy5wYXJzZURhdGEoaW5wdXQsIGNvbnRleHQpO1xyXG4gICAgICAgIHJldHVybiBuZXcgUGFyc2VkU2V0RGF0YSh1cGRhdGVEYXRhLCBcclxuICAgICAgICAvKiBmaWVsZE1hc2s9ICovIG51bGwsIGNvbnRleHQuZmllbGRUcmFuc2Zvcm1zKTtcclxuICAgIH07XHJcbiAgICAvKiogUGFyc2UgZG9jdW1lbnQgZGF0YSBmcm9tIGEgc2V0KCkgY2FsbCB3aXRoICd7bWVyZ2U6dHJ1ZX0nLiAqL1xyXG4gICAgVXNlckRhdGFDb252ZXJ0ZXIucHJvdG90eXBlLnBhcnNlTWVyZ2VEYXRhID0gZnVuY3Rpb24gKG1ldGhvZE5hbWUsIGlucHV0LCBmaWVsZFBhdGhzKSB7XHJcbiAgICAgICAgdmFyIGNvbnRleHQgPSBuZXcgUGFyc2VDb250ZXh0KFVzZXJEYXRhU291cmNlLk1lcmdlU2V0LCBtZXRob2ROYW1lLCBGaWVsZFBhdGguRU1QVFlfUEFUSCk7XHJcbiAgICAgICAgdmFsaWRhdGVQbGFpbk9iamVjdCgnRGF0YSBtdXN0IGJlIGFuIG9iamVjdCwgYnV0IGl0IHdhczonLCBjb250ZXh0LCBpbnB1dCk7XHJcbiAgICAgICAgdmFyIHVwZGF0ZURhdGEgPSB0aGlzLnBhcnNlRGF0YShpbnB1dCwgY29udGV4dCk7XHJcbiAgICAgICAgdmFyIGZpZWxkTWFzaztcclxuICAgICAgICB2YXIgZmllbGRUcmFuc2Zvcm1zO1xyXG4gICAgICAgIGlmICghZmllbGRQYXRocykge1xyXG4gICAgICAgICAgICBmaWVsZE1hc2sgPSBGaWVsZE1hc2suZnJvbUFycmF5KGNvbnRleHQuZmllbGRNYXNrKTtcclxuICAgICAgICAgICAgZmllbGRUcmFuc2Zvcm1zID0gY29udGV4dC5maWVsZFRyYW5zZm9ybXM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB2YXIgdmFsaWRhdGVkRmllbGRQYXRocyA9IG5ldyBTb3J0ZWRTZXQoRmllbGRQYXRoLmNvbXBhcmF0b3IpO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGZpZWxkUGF0aHNfMSA9IGZpZWxkUGF0aHM7IF9pIDwgZmllbGRQYXRoc18xLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIHN0cmluZ09yRmllbGRQYXRoID0gZmllbGRQYXRoc18xW19pXTtcclxuICAgICAgICAgICAgICAgIHZhciBmaWVsZFBhdGggPSB2b2lkIDA7XHJcbiAgICAgICAgICAgICAgICBpZiAoc3RyaW5nT3JGaWVsZFBhdGggaW5zdGFuY2VvZiBGaWVsZFBhdGgkMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZpZWxkUGF0aCA9IHN0cmluZ09yRmllbGRQYXRoLl9pbnRlcm5hbFBhdGg7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmICh0eXBlb2Ygc3RyaW5nT3JGaWVsZFBhdGggPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZmllbGRQYXRoID0gZmllbGRQYXRoRnJvbURvdFNlcGFyYXRlZFN0cmluZyhtZXRob2ROYW1lLCBzdHJpbmdPckZpZWxkUGF0aCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBmYWlsKCdFeHBlY3RlZCBzdHJpbmdPckZpZWxkUGF0aCB0byBiZSBhIHN0cmluZyBvciBhIEZpZWxkUGF0aCcpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKCFjb250ZXh0LmNvbnRhaW5zKGZpZWxkUGF0aCkpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5JTlZBTElEX0FSR1VNRU5ULCBcIkZpZWxkICdcIiArIGZpZWxkUGF0aCArIFwiJyBpcyBzcGVjaWZpZWQgaW4geW91ciBmaWVsZCBtYXNrIGJ1dCBtaXNzaW5nIGZyb20geW91ciBpbnB1dCBkYXRhLlwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHZhbGlkYXRlZEZpZWxkUGF0aHMgPSB2YWxpZGF0ZWRGaWVsZFBhdGhzLmFkZChmaWVsZFBhdGgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGZpZWxkTWFzayA9IEZpZWxkTWFzay5mcm9tU2V0KHZhbGlkYXRlZEZpZWxkUGF0aHMpO1xyXG4gICAgICAgICAgICBmaWVsZFRyYW5zZm9ybXMgPSBjb250ZXh0LmZpZWxkVHJhbnNmb3Jtcy5maWx0ZXIoZnVuY3Rpb24gKHRyYW5zZm9ybSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZpZWxkTWFzay5jb3ZlcnModHJhbnNmb3JtLmZpZWxkKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBuZXcgUGFyc2VkU2V0RGF0YSh1cGRhdGVEYXRhLCBmaWVsZE1hc2ssIGZpZWxkVHJhbnNmb3Jtcyk7XHJcbiAgICB9O1xyXG4gICAgLyoqIFBhcnNlIHVwZGF0ZSBkYXRhIGZyb20gYW4gdXBkYXRlKCkgY2FsbC4gKi9cclxuICAgIFVzZXJEYXRhQ29udmVydGVyLnByb3RvdHlwZS5wYXJzZVVwZGF0ZURhdGEgPSBmdW5jdGlvbiAobWV0aG9kTmFtZSwgaW5wdXQpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhciBjb250ZXh0ID0gbmV3IFBhcnNlQ29udGV4dChVc2VyRGF0YVNvdXJjZS5VcGRhdGUsIG1ldGhvZE5hbWUsIEZpZWxkUGF0aC5FTVBUWV9QQVRIKTtcclxuICAgICAgICB2YWxpZGF0ZVBsYWluT2JqZWN0KCdEYXRhIG11c3QgYmUgYW4gb2JqZWN0LCBidXQgaXQgd2FzOicsIGNvbnRleHQsIGlucHV0KTtcclxuICAgICAgICB2YXIgZmllbGRNYXNrUGF0aHMgPSBuZXcgU29ydGVkU2V0KEZpZWxkUGF0aC5jb21wYXJhdG9yKTtcclxuICAgICAgICB2YXIgdXBkYXRlRGF0YSA9IE9iamVjdFZhbHVlLkVNUFRZO1xyXG4gICAgICAgIGZvckVhY2goaW5wdXQsIGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XHJcbiAgICAgICAgICAgIHZhciBwYXRoID0gZmllbGRQYXRoRnJvbURvdFNlcGFyYXRlZFN0cmluZyhtZXRob2ROYW1lLCBrZXkpO1xyXG4gICAgICAgICAgICB2YXIgY2hpbGRDb250ZXh0ID0gY29udGV4dC5jaGlsZENvbnRleHRGb3JGaWVsZFBhdGgocGF0aCk7XHJcbiAgICAgICAgICAgIHZhbHVlID0gX3RoaXMucnVuUHJlQ29udmVydGVyKHZhbHVlLCBjaGlsZENvbnRleHQpO1xyXG4gICAgICAgICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBEZWxldGVGaWVsZFZhbHVlSW1wbCkge1xyXG4gICAgICAgICAgICAgICAgLy8gQWRkIGl0IHRvIHRoZSBmaWVsZCBtYXNrLCBidXQgZG9uJ3QgYWRkIGFueXRoaW5nIHRvIHVwZGF0ZURhdGEuXHJcbiAgICAgICAgICAgICAgICBmaWVsZE1hc2tQYXRocyA9IGZpZWxkTWFza1BhdGhzLmFkZChwYXRoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHZhciBwYXJzZWRWYWx1ZSA9IF90aGlzLnBhcnNlRGF0YSh2YWx1ZSwgY2hpbGRDb250ZXh0KTtcclxuICAgICAgICAgICAgICAgIGlmIChwYXJzZWRWYWx1ZSAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZmllbGRNYXNrUGF0aHMgPSBmaWVsZE1hc2tQYXRocy5hZGQocGF0aCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlRGF0YSA9IHVwZGF0ZURhdGEuc2V0KHBhdGgsIHBhcnNlZFZhbHVlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHZhciBtYXNrID0gRmllbGRNYXNrLmZyb21TZXQoZmllbGRNYXNrUGF0aHMpO1xyXG4gICAgICAgIHJldHVybiBuZXcgUGFyc2VkVXBkYXRlRGF0YSh1cGRhdGVEYXRhLCBtYXNrLCBjb250ZXh0LmZpZWxkVHJhbnNmb3Jtcyk7XHJcbiAgICB9O1xyXG4gICAgLyoqIFBhcnNlIHVwZGF0ZSBkYXRhIGZyb20gYSBsaXN0IG9mIGZpZWxkL3ZhbHVlIGFyZ3VtZW50cy4gKi9cclxuICAgIFVzZXJEYXRhQ29udmVydGVyLnByb3RvdHlwZS5wYXJzZVVwZGF0ZVZhcmFyZ3MgPSBmdW5jdGlvbiAobWV0aG9kTmFtZSwgZmllbGQsIHZhbHVlLCBtb3JlRmllbGRzQW5kVmFsdWVzKSB7XHJcbiAgICAgICAgdmFyIGNvbnRleHQgPSBuZXcgUGFyc2VDb250ZXh0KFVzZXJEYXRhU291cmNlLlVwZGF0ZSwgbWV0aG9kTmFtZSwgRmllbGRQYXRoLkVNUFRZX1BBVEgpO1xyXG4gICAgICAgIHZhciBrZXlzID0gW2ZpZWxkUGF0aEZyb21Bcmd1bWVudChtZXRob2ROYW1lLCBmaWVsZCldO1xyXG4gICAgICAgIHZhciB2YWx1ZXMgPSBbdmFsdWVdO1xyXG4gICAgICAgIGlmIChtb3JlRmllbGRzQW5kVmFsdWVzLmxlbmd0aCAlIDIgIT09IDApIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuSU5WQUxJRF9BUkdVTUVOVCwgXCJGdW5jdGlvbiBcIiArIG1ldGhvZE5hbWUgKyBcIigpIG5lZWRzIHRvIGJlIGNhbGxlZCB3aXRoIGFuIGV2ZW4gbnVtYmVyIFwiICtcclxuICAgICAgICAgICAgICAgICdvZiBhcmd1bWVudHMgdGhhdCBhbHRlcm5hdGUgYmV0d2VlbiBmaWVsZCBuYW1lcyBhbmQgdmFsdWVzLicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1vcmVGaWVsZHNBbmRWYWx1ZXMubGVuZ3RoOyBpICs9IDIpIHtcclxuICAgICAgICAgICAga2V5cy5wdXNoKGZpZWxkUGF0aEZyb21Bcmd1bWVudChtZXRob2ROYW1lLCBtb3JlRmllbGRzQW5kVmFsdWVzW2ldKSk7XHJcbiAgICAgICAgICAgIHZhbHVlcy5wdXNoKG1vcmVGaWVsZHNBbmRWYWx1ZXNbaSArIDFdKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGZpZWxkTWFza1BhdGhzID0gbmV3IFNvcnRlZFNldChGaWVsZFBhdGguY29tcGFyYXRvcik7XHJcbiAgICAgICAgdmFyIHVwZGF0ZURhdGEgPSBPYmplY3RWYWx1ZS5FTVBUWTtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpIHtcclxuICAgICAgICAgICAgdmFyIHBhdGggPSBrZXlzW2ldO1xyXG4gICAgICAgICAgICB2YXIgY2hpbGRDb250ZXh0ID0gY29udGV4dC5jaGlsZENvbnRleHRGb3JGaWVsZFBhdGgocGF0aCk7XHJcbiAgICAgICAgICAgIHZhciB2YWx1ZV8xID0gdGhpcy5ydW5QcmVDb252ZXJ0ZXIodmFsdWVzW2ldLCBjaGlsZENvbnRleHQpO1xyXG4gICAgICAgICAgICBpZiAodmFsdWVfMSBpbnN0YW5jZW9mIERlbGV0ZUZpZWxkVmFsdWVJbXBsKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBBZGQgaXQgdG8gdGhlIGZpZWxkIG1hc2ssIGJ1dCBkb24ndCBhZGQgYW55dGhpbmcgdG8gdXBkYXRlRGF0YS5cclxuICAgICAgICAgICAgICAgIGZpZWxkTWFza1BhdGhzID0gZmllbGRNYXNrUGF0aHMuYWRkKHBhdGgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdmFyIHBhcnNlZFZhbHVlID0gdGhpcy5wYXJzZURhdGEodmFsdWVfMSwgY2hpbGRDb250ZXh0KTtcclxuICAgICAgICAgICAgICAgIGlmIChwYXJzZWRWYWx1ZSAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZmllbGRNYXNrUGF0aHMgPSBmaWVsZE1hc2tQYXRocy5hZGQocGF0aCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlRGF0YSA9IHVwZGF0ZURhdGEuc2V0KHBhdGgsIHBhcnNlZFZhbHVlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgbWFzayA9IEZpZWxkTWFzay5mcm9tU2V0KGZpZWxkTWFza1BhdGhzKTtcclxuICAgICAgICByZXR1cm4gbmV3IFBhcnNlZFVwZGF0ZURhdGEodXBkYXRlRGF0YSwgbWFzaywgY29udGV4dC5maWVsZFRyYW5zZm9ybXMpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUGFyc2UgYSBcInF1ZXJ5IHZhbHVlXCIgKGUuZy4gdmFsdWUgaW4gYSB3aGVyZSBmaWx0ZXIgb3IgYSB2YWx1ZSBpbiBhIGN1cnNvclxyXG4gICAgICogYm91bmQpLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBhbGxvd0FycmF5cyBXaGV0aGVyIHRoZSBxdWVyeSB2YWx1ZSBpcyBhbiBhcnJheSB0aGF0IG1heSBkaXJlY3RseVxyXG4gICAgICogY29udGFpbiBhZGRpdGlvbmFsIGFycmF5cyAoZS5nLiB0aGUgb3BlcmFuZCBvZiBhbiBgaW5gIHF1ZXJ5KS5cclxuICAgICAqL1xyXG4gICAgVXNlckRhdGFDb252ZXJ0ZXIucHJvdG90eXBlLnBhcnNlUXVlcnlWYWx1ZSA9IGZ1bmN0aW9uIChtZXRob2ROYW1lLCBpbnB1dCwgYWxsb3dBcnJheXMpIHtcclxuICAgICAgICBpZiAoYWxsb3dBcnJheXMgPT09IHZvaWQgMCkgeyBhbGxvd0FycmF5cyA9IGZhbHNlOyB9XHJcbiAgICAgICAgdmFyIGNvbnRleHQgPSBuZXcgUGFyc2VDb250ZXh0KGFsbG93QXJyYXlzID8gVXNlckRhdGFTb3VyY2UuQXJyYXlBcmd1bWVudCA6IFVzZXJEYXRhU291cmNlLkFyZ3VtZW50LCBtZXRob2ROYW1lLCBGaWVsZFBhdGguRU1QVFlfUEFUSCk7XHJcbiAgICAgICAgdmFyIHBhcnNlZCA9IHRoaXMucGFyc2VEYXRhKGlucHV0LCBjb250ZXh0KTtcclxuICAgICAgICBhc3NlcnQocGFyc2VkICE9IG51bGwsICdQYXJzZWQgZGF0YSBzaG91bGQgbm90IGJlIG51bGwuJyk7XHJcbiAgICAgICAgYXNzZXJ0KGNvbnRleHQuZmllbGRUcmFuc2Zvcm1zLmxlbmd0aCA9PT0gMCwgJ0ZpZWxkIHRyYW5zZm9ybXMgc2hvdWxkIGhhdmUgYmVlbiBkaXNhbGxvd2VkLicpO1xyXG4gICAgICAgIHJldHVybiBwYXJzZWQ7XHJcbiAgICB9O1xyXG4gICAgLyoqIFNlbmRzIGRhdGEgdGhyb3VnaCB0aGlzLnByZUNvbnZlcnRlciwgaGFuZGxpbmcgYW55IHRocm93biBlcnJvcnMuICovXHJcbiAgICBVc2VyRGF0YUNvbnZlcnRlci5wcm90b3R5cGUucnVuUHJlQ29udmVydGVyID0gZnVuY3Rpb24gKGlucHV0LCBjb250ZXh0KSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJlQ29udmVydGVyKGlucHV0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgdmFyIG1lc3NhZ2UgPSBlcnJvck1lc3NhZ2UoZSk7XHJcbiAgICAgICAgICAgIHRocm93IGNvbnRleHQuY3JlYXRlRXJyb3IobWVzc2FnZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogSW50ZXJuYWwgaGVscGVyIGZvciBwYXJzaW5nIHVzZXIgZGF0YS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gaW5wdXQgRGF0YSB0byBiZSBwYXJzZWQuXHJcbiAgICAgKiBAcGFyYW0gY29udGV4dCBBIGNvbnRleHQgb2JqZWN0IHJlcHJlc2VudGluZyB0aGUgY3VycmVudCBwYXRoIGJlaW5nIHBhcnNlZCxcclxuICAgICAqIHRoZSBzb3VyY2Ugb2YgdGhlIGRhdGEgYmVpbmcgcGFyc2VkLCBldGMuXHJcbiAgICAgKiBAcmV0dXJuIFRoZSBwYXJzZWQgdmFsdWUsIG9yIG51bGwgaWYgdGhlIHZhbHVlIHdhcyBhIEZpZWxkVmFsdWUgc2VudGluZWxcclxuICAgICAqIHRoYXQgc2hvdWxkIG5vdCBiZSBpbmNsdWRlZCBpbiB0aGUgcmVzdWx0aW5nIHBhcnNlZCBkYXRhLlxyXG4gICAgICovXHJcbiAgICBVc2VyRGF0YUNvbnZlcnRlci5wcm90b3R5cGUucGFyc2VEYXRhID0gZnVuY3Rpb24gKGlucHV0LCBjb250ZXh0KSB7XHJcbiAgICAgICAgaW5wdXQgPSB0aGlzLnJ1blByZUNvbnZlcnRlcihpbnB1dCwgY29udGV4dCk7XHJcbiAgICAgICAgaWYgKGxvb2tzTGlrZUpzb25PYmplY3QoaW5wdXQpKSB7XHJcbiAgICAgICAgICAgIHZhbGlkYXRlUGxhaW5PYmplY3QoJ1Vuc3VwcG9ydGVkIGZpZWxkIHZhbHVlOicsIGNvbnRleHQsIGlucHV0KTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VPYmplY3QoaW5wdXQsIGNvbnRleHQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChpbnB1dCBpbnN0YW5jZW9mIEZpZWxkVmFsdWVJbXBsKSB7XHJcbiAgICAgICAgICAgIC8vIEZpZWxkVmFsdWVzIHVzdWFsbHkgcGFyc2UgaW50byB0cmFuc2Zvcm1zIChleGNlcHQgRmllbGRWYWx1ZS5kZWxldGUoKSlcclxuICAgICAgICAgICAgLy8gaW4gd2hpY2ggY2FzZSB3ZSBkbyBub3Qgd2FudCB0byBpbmNsdWRlIHRoaXMgZmllbGQgaW4gb3VyIHBhcnNlZCBkYXRhXHJcbiAgICAgICAgICAgIC8vIChhcyBkb2luZyBzbyB3aWxsIG92ZXJ3cml0ZSB0aGUgZmllbGQgZGlyZWN0bHkgcHJpb3IgdG8gdGhlIHRyYW5zZm9ybVxyXG4gICAgICAgICAgICAvLyB0cnlpbmcgdG8gdHJhbnNmb3JtIGl0KS4gU28gd2UgZG9uJ3QgYWRkIHRoaXMgbG9jYXRpb24gdG9cclxuICAgICAgICAgICAgLy8gY29udGV4dC5maWVsZE1hc2sgYW5kIHdlIHJldHVybiBudWxsIGFzIG91ciBwYXJzaW5nIHJlc3VsdC5cclxuICAgICAgICAgICAgdGhpcy5wYXJzZVNlbnRpbmVsRmllbGRWYWx1ZShpbnB1dCwgY29udGV4dCk7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gSWYgY29udGV4dC5wYXRoIGlzIG51bGwgd2UgYXJlIGluc2lkZSBhbiBhcnJheSBhbmQgd2UgZG9uJ3Qgc3VwcG9ydFxyXG4gICAgICAgICAgICAvLyBmaWVsZCBtYXNrIHBhdGhzIG1vcmUgZ3JhbnVsYXIgdGhhbiB0aGUgdG9wLWxldmVsIGFycmF5LlxyXG4gICAgICAgICAgICBpZiAoY29udGV4dC5wYXRoKSB7XHJcbiAgICAgICAgICAgICAgICBjb250ZXh0LmZpZWxkTWFzay5wdXNoKGNvbnRleHQucGF0aCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGlucHV0IGluc3RhbmNlb2YgQXJyYXkpIHtcclxuICAgICAgICAgICAgICAgIC8vIFRPRE8oYi8zNDg3MTEzMSk6IEluY2x1ZGUgdGhlIHBhdGggY29udGFpbmluZyB0aGUgYXJyYXkgaW4gdGhlIGVycm9yXHJcbiAgICAgICAgICAgICAgICAvLyBtZXNzYWdlLlxyXG4gICAgICAgICAgICAgICAgLy8gSW4gdGhlIGNhc2Ugb2YgSU4gcXVlcmllcywgdGhlIHBhcnNlZCBkYXRhIGlzIGFuIGFycmF5IChyZXByZXNlbnRpbmdcclxuICAgICAgICAgICAgICAgIC8vIHRoZSBzZXQgb2YgdmFsdWVzIHRvIGJlIGluY2x1ZGVkIGZvciB0aGUgSU4gcXVlcnkpIHRoYXQgbWF5IGRpcmVjdGx5XHJcbiAgICAgICAgICAgICAgICAvLyBjb250YWluIGFkZGl0aW9uYWwgYXJyYXlzIChlYWNoIHJlcHJlc2VudGluZyBhbiBpbmRpdmlkdWFsIGZpZWxkXHJcbiAgICAgICAgICAgICAgICAvLyB2YWx1ZSksIHNvIHdlIGRpc2FibGUgdGhpcyB2YWxpZGF0aW9uLlxyXG4gICAgICAgICAgICAgICAgaWYgKGNvbnRleHQuYXJyYXlFbGVtZW50ICYmXHJcbiAgICAgICAgICAgICAgICAgICAgY29udGV4dC5kYXRhU291cmNlICE9PSBVc2VyRGF0YVNvdXJjZS5BcnJheUFyZ3VtZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgY29udGV4dC5jcmVhdGVFcnJvcignTmVzdGVkIGFycmF5cyBhcmUgbm90IHN1cHBvcnRlZCcpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VBcnJheShpbnB1dCwgY29udGV4dCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5wYXJzZVNjYWxhclZhbHVlKGlucHV0LCBjb250ZXh0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBVc2VyRGF0YUNvbnZlcnRlci5wcm90b3R5cGUucGFyc2VPYmplY3QgPSBmdW5jdGlvbiAob2JqLCBjb250ZXh0KSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IFNvcnRlZE1hcChwcmltaXRpdmVDb21wYXJhdG9yKTtcclxuICAgICAgICBpZiAoaXNFbXB0eShvYmopKSB7XHJcbiAgICAgICAgICAgIC8vIElmIHdlIGVuY291bnRlciBhbiBlbXB0eSBvYmplY3QsIHdlIGV4cGxpY2l0bHkgYWRkIGl0IHRvIHRoZSB1cGRhdGVcclxuICAgICAgICAgICAgLy8gbWFzayB0byBlbnN1cmUgdGhhdCB0aGUgc2VydmVyIGNyZWF0ZXMgYSBtYXAgZW50cnkuXHJcbiAgICAgICAgICAgIGlmIChjb250ZXh0LnBhdGggJiYgY29udGV4dC5wYXRoLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIGNvbnRleHQuZmllbGRNYXNrLnB1c2goY29udGV4dC5wYXRoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgZm9yRWFjaChvYmosIGZ1bmN0aW9uIChrZXksIHZhbCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHBhcnNlZFZhbHVlID0gX3RoaXMucGFyc2VEYXRhKHZhbCwgY29udGV4dC5jaGlsZENvbnRleHRGb3JGaWVsZChrZXkpKTtcclxuICAgICAgICAgICAgICAgIGlmIChwYXJzZWRWYWx1ZSAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gcmVzdWx0Lmluc2VydChrZXksIHBhcnNlZFZhbHVlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBuZXcgT2JqZWN0VmFsdWUocmVzdWx0KTtcclxuICAgIH07XHJcbiAgICBVc2VyRGF0YUNvbnZlcnRlci5wcm90b3R5cGUucGFyc2VBcnJheSA9IGZ1bmN0aW9uIChhcnJheSwgY29udGV4dCkge1xyXG4gICAgICAgIHZhciByZXN1bHQgPSBbXTtcclxuICAgICAgICB2YXIgZW50cnlJbmRleCA9IDA7XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBhcnJheV8xID0gYXJyYXk7IF9pIDwgYXJyYXlfMS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgdmFyIGVudHJ5ID0gYXJyYXlfMVtfaV07XHJcbiAgICAgICAgICAgIHZhciBwYXJzZWRFbnRyeSA9IHRoaXMucGFyc2VEYXRhKGVudHJ5LCBjb250ZXh0LmNoaWxkQ29udGV4dEZvckFycmF5KGVudHJ5SW5kZXgpKTtcclxuICAgICAgICAgICAgaWYgKHBhcnNlZEVudHJ5ID09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIC8vIEp1c3QgaW5jbHVkZSBudWxscyBpbiB0aGUgYXJyYXkgZm9yIGZpZWxkcyBiZWluZyByZXBsYWNlZCB3aXRoIGFcclxuICAgICAgICAgICAgICAgIC8vIHNlbnRpbmVsLlxyXG4gICAgICAgICAgICAgICAgcGFyc2VkRW50cnkgPSBOdWxsVmFsdWUuSU5TVEFOQ0U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmVzdWx0LnB1c2gocGFyc2VkRW50cnkpO1xyXG4gICAgICAgICAgICBlbnRyeUluZGV4Kys7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBuZXcgQXJyYXlWYWx1ZShyZXN1bHQpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogXCJQYXJzZXNcIiB0aGUgcHJvdmlkZWQgRmllbGRWYWx1ZUltcGwsIGFkZGluZyBhbnkgbmVjZXNzYXJ5IHRyYW5zZm9ybXMgdG9cclxuICAgICAqIGNvbnRleHQuZmllbGRUcmFuc2Zvcm1zLlxyXG4gICAgICovXHJcbiAgICBVc2VyRGF0YUNvbnZlcnRlci5wcm90b3R5cGUucGFyc2VTZW50aW5lbEZpZWxkVmFsdWUgPSBmdW5jdGlvbiAodmFsdWUsIGNvbnRleHQpIHtcclxuICAgICAgICAvLyBTZW50aW5lbHMgYXJlIG9ubHkgc3VwcG9ydGVkIHdpdGggd3JpdGVzLCBhbmQgbm90IHdpdGhpbiBhcnJheXMuXHJcbiAgICAgICAgaWYgKCFpc1dyaXRlKGNvbnRleHQuZGF0YVNvdXJjZSkpIHtcclxuICAgICAgICAgICAgdGhyb3cgY29udGV4dC5jcmVhdGVFcnJvcih2YWx1ZS5fbWV0aG9kTmFtZSArIFwiKCkgY2FuIG9ubHkgYmUgdXNlZCB3aXRoIHVwZGF0ZSgpIGFuZCBzZXQoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGNvbnRleHQucGF0aCA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aHJvdyBjb250ZXh0LmNyZWF0ZUVycm9yKHZhbHVlLl9tZXRob2ROYW1lICsgXCIoKSBpcyBub3QgY3VycmVudGx5IHN1cHBvcnRlZCBpbnNpZGUgYXJyYXlzXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBEZWxldGVGaWVsZFZhbHVlSW1wbCkge1xyXG4gICAgICAgICAgICBpZiAoY29udGV4dC5kYXRhU291cmNlID09PSBVc2VyRGF0YVNvdXJjZS5NZXJnZVNldCkge1xyXG4gICAgICAgICAgICAgICAgLy8gTm8gdHJhbnNmb3JtIHRvIGFkZCBmb3IgYSBkZWxldGUsIGJ1dCB3ZSBuZWVkIHRvIGFkZCBpdCB0byBvdXJcclxuICAgICAgICAgICAgICAgIC8vIGZpZWxkTWFzayBzbyBpdCBnZXRzIGRlbGV0ZWQuXHJcbiAgICAgICAgICAgICAgICBjb250ZXh0LmZpZWxkTWFzay5wdXNoKGNvbnRleHQucGF0aCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoY29udGV4dC5kYXRhU291cmNlID09PSBVc2VyRGF0YVNvdXJjZS5VcGRhdGUpIHtcclxuICAgICAgICAgICAgICAgIGFzc2VydChjb250ZXh0LnBhdGgubGVuZ3RoID4gMCwgJ0ZpZWxkVmFsdWUuZGVsZXRlKCkgYXQgdGhlIHRvcCBsZXZlbCBzaG91bGQgaGF2ZSBhbHJlYWR5JyArXHJcbiAgICAgICAgICAgICAgICAgICAgJyBiZWVuIGhhbmRsZWQuJyk7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBjb250ZXh0LmNyZWF0ZUVycm9yKCdGaWVsZFZhbHVlLmRlbGV0ZSgpIGNhbiBvbmx5IGFwcGVhciBhdCB0aGUgdG9wIGxldmVsICcgK1xyXG4gICAgICAgICAgICAgICAgICAgICdvZiB5b3VyIHVwZGF0ZSBkYXRhJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBXZSBzaG91bGRuJ3QgZW5jb3VudGVyIGRlbGV0ZSBzZW50aW5lbHMgZm9yIHF1ZXJpZXMgb3Igbm9uLW1lcmdlIHNldCgpIGNhbGxzLlxyXG4gICAgICAgICAgICAgICAgdGhyb3cgY29udGV4dC5jcmVhdGVFcnJvcignRmllbGRWYWx1ZS5kZWxldGUoKSBjYW5ub3QgYmUgdXNlZCB3aXRoIHNldCgpIHVubGVzcyB5b3UgcGFzcyAnICtcclxuICAgICAgICAgICAgICAgICAgICAne21lcmdlOnRydWV9Jyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodmFsdWUgaW5zdGFuY2VvZiBTZXJ2ZXJUaW1lc3RhbXBGaWVsZFZhbHVlSW1wbCkge1xyXG4gICAgICAgICAgICBjb250ZXh0LmZpZWxkVHJhbnNmb3Jtcy5wdXNoKG5ldyBGaWVsZFRyYW5zZm9ybShjb250ZXh0LnBhdGgsIFNlcnZlclRpbWVzdGFtcFRyYW5zZm9ybS5pbnN0YW5jZSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh2YWx1ZSBpbnN0YW5jZW9mIEFycmF5VW5pb25GaWVsZFZhbHVlSW1wbCkge1xyXG4gICAgICAgICAgICB2YXIgcGFyc2VkRWxlbWVudHMgPSB0aGlzLnBhcnNlQXJyYXlUcmFuc2Zvcm1FbGVtZW50cyh2YWx1ZS5fbWV0aG9kTmFtZSwgdmFsdWUuX2VsZW1lbnRzKTtcclxuICAgICAgICAgICAgdmFyIGFycmF5VW5pb24gPSBuZXcgQXJyYXlVbmlvblRyYW5zZm9ybU9wZXJhdGlvbihwYXJzZWRFbGVtZW50cyk7XHJcbiAgICAgICAgICAgIGNvbnRleHQuZmllbGRUcmFuc2Zvcm1zLnB1c2gobmV3IEZpZWxkVHJhbnNmb3JtKGNvbnRleHQucGF0aCwgYXJyYXlVbmlvbikpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh2YWx1ZSBpbnN0YW5jZW9mIEFycmF5UmVtb3ZlRmllbGRWYWx1ZUltcGwpIHtcclxuICAgICAgICAgICAgdmFyIHBhcnNlZEVsZW1lbnRzID0gdGhpcy5wYXJzZUFycmF5VHJhbnNmb3JtRWxlbWVudHModmFsdWUuX21ldGhvZE5hbWUsIHZhbHVlLl9lbGVtZW50cyk7XHJcbiAgICAgICAgICAgIHZhciBhcnJheVJlbW92ZSA9IG5ldyBBcnJheVJlbW92ZVRyYW5zZm9ybU9wZXJhdGlvbihwYXJzZWRFbGVtZW50cyk7XHJcbiAgICAgICAgICAgIGNvbnRleHQuZmllbGRUcmFuc2Zvcm1zLnB1c2gobmV3IEZpZWxkVHJhbnNmb3JtKGNvbnRleHQucGF0aCwgYXJyYXlSZW1vdmUpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodmFsdWUgaW5zdGFuY2VvZiBOdW1lcmljSW5jcmVtZW50RmllbGRWYWx1ZUltcGwpIHtcclxuICAgICAgICAgICAgdmFyIG9wZXJhbmQgPSB0aGlzLnBhcnNlUXVlcnlWYWx1ZSgnRmllbGRWYWx1ZS5pbmNyZW1lbnQnLCB2YWx1ZS5fb3BlcmFuZCk7XHJcbiAgICAgICAgICAgIHZhciBudW1lcmljSW5jcmVtZW50ID0gbmV3IE51bWVyaWNJbmNyZW1lbnRUcmFuc2Zvcm1PcGVyYXRpb24ob3BlcmFuZCk7XHJcbiAgICAgICAgICAgIGNvbnRleHQuZmllbGRUcmFuc2Zvcm1zLnB1c2gobmV3IEZpZWxkVHJhbnNmb3JtKGNvbnRleHQucGF0aCwgbnVtZXJpY0luY3JlbWVudCkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgZmFpbCgnVW5rbm93biBGaWVsZFZhbHVlIHR5cGU6ICcgKyB2YWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogSGVscGVyIHRvIHBhcnNlIGEgc2NhbGFyIHZhbHVlIChpLmUuIG5vdCBhbiBPYmplY3QsIEFycmF5LCBvciBGaWVsZFZhbHVlKVxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm4gVGhlIHBhcnNlZCB2YWx1ZVxyXG4gICAgICovXHJcbiAgICBVc2VyRGF0YUNvbnZlcnRlci5wcm90b3R5cGUucGFyc2VTY2FsYXJWYWx1ZSA9IGZ1bmN0aW9uICh2YWx1ZSwgY29udGV4dCkge1xyXG4gICAgICAgIGlmICh2YWx1ZSA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICByZXR1cm4gTnVsbFZhbHVlLklOU1RBTkNFO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInKSB7XHJcbiAgICAgICAgICAgIGlmIChpc1NhZmVJbnRlZ2VyKHZhbHVlKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBJbnRlZ2VyVmFsdWUodmFsdWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBEb3VibGVWYWx1ZSh2YWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodHlwZW9mIHZhbHVlID09PSAnYm9vbGVhbicpIHtcclxuICAgICAgICAgICAgcmV0dXJuIEJvb2xlYW5WYWx1ZS5vZih2YWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBTdHJpbmdWYWx1ZSh2YWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHZhbHVlIGluc3RhbmNlb2YgRGF0ZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFRpbWVzdGFtcFZhbHVlKFRpbWVzdGFtcC5mcm9tRGF0ZSh2YWx1ZSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh2YWx1ZSBpbnN0YW5jZW9mIFRpbWVzdGFtcCkge1xyXG4gICAgICAgICAgICAvLyBGaXJlc3RvcmUgYmFja2VuZCB0cnVuY2F0ZXMgcHJlY2lzaW9uIGRvd24gdG8gbWljcm9zZWNvbmRzLiBUbyBlbnN1cmVcclxuICAgICAgICAgICAgLy8gb2ZmbGluZSBtb2RlIHdvcmtzIHRoZSBzYW1lIHdpdGggcmVnYXJkcyB0byB0cnVuY2F0aW9uLCBwZXJmb3JtIHRoZVxyXG4gICAgICAgICAgICAvLyB0cnVuY2F0aW9uIGltbWVkaWF0ZWx5IHdpdGhvdXQgd2FpdGluZyBmb3IgdGhlIGJhY2tlbmQgdG8gZG8gdGhhdC5cclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBUaW1lc3RhbXBWYWx1ZShuZXcgVGltZXN0YW1wKHZhbHVlLnNlY29uZHMsIE1hdGguZmxvb3IodmFsdWUubmFub3NlY29uZHMgLyAxMDAwKSAqIDEwMDApKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodmFsdWUgaW5zdGFuY2VvZiBHZW9Qb2ludCkge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEdlb1BvaW50VmFsdWUodmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh2YWx1ZSBpbnN0YW5jZW9mIEJsb2IpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBCbG9iVmFsdWUodmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh2YWx1ZSBpbnN0YW5jZW9mIERvY3VtZW50S2V5UmVmZXJlbmNlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgUmVmVmFsdWUodmFsdWUuZGF0YWJhc2VJZCwgdmFsdWUua2V5KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRocm93IGNvbnRleHQuY3JlYXRlRXJyb3IoXCJVbnN1cHBvcnRlZCBmaWVsZCB2YWx1ZTogXCIgKyB2YWx1ZURlc2NyaXB0aW9uKHZhbHVlKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFVzZXJEYXRhQ29udmVydGVyLnByb3RvdHlwZS5wYXJzZUFycmF5VHJhbnNmb3JtRWxlbWVudHMgPSBmdW5jdGlvbiAobWV0aG9kTmFtZSwgZWxlbWVudHMpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiBlbGVtZW50cy5tYXAoZnVuY3Rpb24gKGVsZW1lbnQsIGkpIHtcclxuICAgICAgICAgICAgLy8gQWx0aG91Z2ggYXJyYXkgdHJhbnNmb3JtcyBhcmUgdXNlZCB3aXRoIHdyaXRlcywgdGhlIGFjdHVhbCBlbGVtZW50c1xyXG4gICAgICAgICAgICAvLyBiZWluZyB1bmlvbmVkIG9yIHJlbW92ZWQgYXJlIG5vdCBjb25zaWRlcmVkIHdyaXRlcyBzaW5jZSB0aGV5IGNhbm5vdFxyXG4gICAgICAgICAgICAvLyBjb250YWluIGFueSBGaWVsZFZhbHVlIHNlbnRpbmVscywgZXRjLlxyXG4gICAgICAgICAgICB2YXIgY29udGV4dCA9IG5ldyBQYXJzZUNvbnRleHQoVXNlckRhdGFTb3VyY2UuQXJndW1lbnQsIG1ldGhvZE5hbWUsIEZpZWxkUGF0aC5FTVBUWV9QQVRIKTtcclxuICAgICAgICAgICAgcmV0dXJuIF90aGlzLnBhcnNlRGF0YShlbGVtZW50LCBjb250ZXh0LmNoaWxkQ29udGV4dEZvckFycmF5KGkpKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gVXNlckRhdGFDb252ZXJ0ZXI7XHJcbn0oKSk7XHJcbi8qKlxyXG4gKiBDaGVja3Mgd2hldGhlciBhbiBvYmplY3QgbG9va3MgbGlrZSBhIEpTT04gb2JqZWN0IHRoYXQgc2hvdWxkIGJlIGNvbnZlcnRlZFxyXG4gKiBpbnRvIGEgc3RydWN0LiBOb3JtYWwgY2xhc3MvcHJvdG90eXBlIGluc3RhbmNlcyBhcmUgY29uc2lkZXJlZCB0byBsb29rIGxpa2VcclxuICogSlNPTiBvYmplY3RzIHNpbmNlIHRoZXkgc2hvdWxkIGJlIGNvbnZlcnRlZCB0byBhIHN0cnVjdCB2YWx1ZS4gQXJyYXlzLCBEYXRlcyxcclxuICogR2VvUG9pbnRzLCBldGMuIGFyZSBub3QgY29uc2lkZXJlZCB0byBsb29rIGxpa2UgSlNPTiBvYmplY3RzIHNpbmNlIHRoZXkgbWFwXHJcbiAqIHRvIHNwZWNpZmljIEZpZWxkVmFsdWUgdHlwZXMgb3RoZXIgdGhhbiBPYmplY3RWYWx1ZS5cclxuICovXHJcbmZ1bmN0aW9uIGxvb2tzTGlrZUpzb25PYmplY3QoaW5wdXQpIHtcclxuICAgIHJldHVybiAodHlwZW9mIGlucHV0ID09PSAnb2JqZWN0JyAmJlxyXG4gICAgICAgIGlucHV0ICE9PSBudWxsICYmXHJcbiAgICAgICAgIShpbnB1dCBpbnN0YW5jZW9mIEFycmF5KSAmJlxyXG4gICAgICAgICEoaW5wdXQgaW5zdGFuY2VvZiBEYXRlKSAmJlxyXG4gICAgICAgICEoaW5wdXQgaW5zdGFuY2VvZiBUaW1lc3RhbXApICYmXHJcbiAgICAgICAgIShpbnB1dCBpbnN0YW5jZW9mIEdlb1BvaW50KSAmJlxyXG4gICAgICAgICEoaW5wdXQgaW5zdGFuY2VvZiBCbG9iKSAmJlxyXG4gICAgICAgICEoaW5wdXQgaW5zdGFuY2VvZiBEb2N1bWVudEtleVJlZmVyZW5jZSkgJiZcclxuICAgICAgICAhKGlucHV0IGluc3RhbmNlb2YgRmllbGRWYWx1ZUltcGwpKTtcclxufVxyXG5mdW5jdGlvbiB2YWxpZGF0ZVBsYWluT2JqZWN0KG1lc3NhZ2UsIGNvbnRleHQsIGlucHV0KSB7XHJcbiAgICBpZiAoIWxvb2tzTGlrZUpzb25PYmplY3QoaW5wdXQpIHx8ICFpc1BsYWluT2JqZWN0KGlucHV0KSkge1xyXG4gICAgICAgIHZhciBkZXNjcmlwdGlvbiA9IHZhbHVlRGVzY3JpcHRpb24oaW5wdXQpO1xyXG4gICAgICAgIGlmIChkZXNjcmlwdGlvbiA9PT0gJ2FuIG9iamVjdCcpIHtcclxuICAgICAgICAgICAgLy8gTWFzc2FnZSB0aGUgZXJyb3IgaWYgaXQgd2FzIGFuIG9iamVjdC5cclxuICAgICAgICAgICAgdGhyb3cgY29udGV4dC5jcmVhdGVFcnJvcihtZXNzYWdlICsgJyBhIGN1c3RvbSBvYmplY3QnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRocm93IGNvbnRleHQuY3JlYXRlRXJyb3IobWVzc2FnZSArICcgJyArIGRlc2NyaXB0aW9uKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIEhlbHBlciB0aGF0IGNhbGxzIGZyb21Eb3RTZXBhcmF0ZWRTdHJpbmcoKSBidXQgd3JhcHMgYW55IGVycm9yIHRocm93bi5cclxuICovXHJcbmZ1bmN0aW9uIGZpZWxkUGF0aEZyb21Bcmd1bWVudChtZXRob2ROYW1lLCBwYXRoKSB7XHJcbiAgICBpZiAocGF0aCBpbnN0YW5jZW9mIEZpZWxkUGF0aCQxKSB7XHJcbiAgICAgICAgcmV0dXJuIHBhdGguX2ludGVybmFsUGF0aDtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKHR5cGVvZiBwYXRoID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgIHJldHVybiBmaWVsZFBhdGhGcm9tRG90U2VwYXJhdGVkU3RyaW5nKG1ldGhvZE5hbWUsIHBhdGgpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgdmFyIG1lc3NhZ2UgPSAnRmllbGQgcGF0aCBhcmd1bWVudHMgbXVzdCBiZSBvZiB0eXBlIHN0cmluZyBvciBGaWVsZFBhdGguJztcclxuICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5JTlZBTElEX0FSR1VNRU5ULCBcIkZ1bmN0aW9uIFwiICsgbWV0aG9kTmFtZSArIFwiKCkgY2FsbGVkIHdpdGggaW52YWxpZCBkYXRhLiBcIiArIG1lc3NhZ2UpO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBXcmFwcyBmcm9tRG90U2VwYXJhdGVkU3RyaW5nIHdpdGggYW4gZXJyb3IgbWVzc2FnZSBhYm91dCB0aGUgbWV0aG9kIHRoYXRcclxuICogd2FzIHRocm93bi5cclxuICogQHBhcmFtIG1ldGhvZE5hbWUgVGhlIHB1YmxpY2x5IHZpc2libGUgbWV0aG9kIG5hbWVcclxuICogQHBhcmFtIHBhdGggVGhlIGRvdC1zZXBhcmF0ZWQgc3RyaW5nIGZvcm0gb2YgYSBmaWVsZCBwYXRoIHdoaWNoIHdpbGwgYmUgc3BsaXRcclxuICogb24gZG90cy5cclxuICovXHJcbmZ1bmN0aW9uIGZpZWxkUGF0aEZyb21Eb3RTZXBhcmF0ZWRTdHJpbmcobWV0aG9kTmFtZSwgcGF0aCkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICByZXR1cm4gZnJvbURvdFNlcGFyYXRlZFN0cmluZyhwYXRoKS5faW50ZXJuYWxQYXRoO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICB2YXIgbWVzc2FnZSA9IGVycm9yTWVzc2FnZShlKTtcclxuICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5JTlZBTElEX0FSR1VNRU5ULCBcIkZ1bmN0aW9uIFwiICsgbWV0aG9kTmFtZSArIFwiKCkgY2FsbGVkIHdpdGggaW52YWxpZCBkYXRhLiBcIiArIG1lc3NhZ2UpO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBFeHRyYWN0cyB0aGUgbWVzc2FnZSBmcm9tIGEgY2F1Z2h0IGV4Y2VwdGlvbiwgd2hpY2ggc2hvdWxkIGJlIGFuIEVycm9yIG9iamVjdFxyXG4gKiB0aG91Z2ggSlMgZG9lc24ndCBndWFyYW50ZWUgdGhhdC5cclxuICovXHJcbmZ1bmN0aW9uIGVycm9yTWVzc2FnZShlcnJvcikge1xyXG4gICAgcmV0dXJuIGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogZXJyb3IudG9TdHJpbmcoKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLy8gc2V0dGluZ3MoKSBkZWZhdWx0czpcclxudmFyIERFRkFVTFRfSE9TVCA9ICdmaXJlc3RvcmUuZ29vZ2xlYXBpcy5jb20nO1xyXG52YXIgREVGQVVMVF9TU0wgPSB0cnVlO1xyXG52YXIgREVGQVVMVF9USU1FU1RBTVBTX0lOX1NOQVBTSE9UUyA9IHRydWU7XHJcbnZhciBERUZBVUxUX0ZPUkNFX0xPTkdfUE9MTElORyA9IGZhbHNlO1xyXG4vKipcclxuICogQ29uc3RhbnQgdXNlZCB0byBpbmRpY2F0ZSB0aGUgTFJVIGdhcmJhZ2UgY29sbGVjdGlvbiBzaG91bGQgYmUgZGlzYWJsZWQuXHJcbiAqIFNldCB0aGlzIHZhbHVlIGFzIHRoZSBgY2FjaGVTaXplQnl0ZXNgIG9uIHRoZSBzZXR0aW5ncyBwYXNzZWQgdG8gdGhlXHJcbiAqIGBGaXJlc3RvcmVgIGluc3RhbmNlLlxyXG4gKi9cclxudmFyIENBQ0hFX1NJWkVfVU5MSU1JVEVEID0gTHJ1UGFyYW1zLkNPTExFQ1RJT05fRElTQUJMRUQ7XHJcbi8vIGVuYWJsZVBlcnNpc3RlbmNlKCkgZGVmYXVsdHM6XHJcbnZhciBERUZBVUxUX1NZTkNIUk9OSVpFX1RBQlMgPSBmYWxzZTtcclxuLyoqXHJcbiAqIEEgY29uY3JldGUgdHlwZSBkZXNjcmliaW5nIGFsbCB0aGUgdmFsdWVzIHRoYXQgY2FuIGJlIGFwcGxpZWQgdmlhIGFcclxuICogdXNlci1zdXBwbGllZCBmaXJlc3RvcmUuU2V0dGluZ3Mgb2JqZWN0LiBUaGlzIGlzIGEgc2VwYXJhdGUgdHlwZSBzbyB0aGF0XHJcbiAqIGRlZmF1bHRzIGNhbiBiZSBzdXBwbGllZCBhbmQgdGhlIHZhbHVlIGNhbiBiZSBjaGVja2VkIGZvciBlcXVhbGl0eS5cclxuICovXHJcbnZhciBGaXJlc3RvcmVTZXR0aW5ncyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEZpcmVzdG9yZVNldHRpbmdzKHNldHRpbmdzKSB7XHJcbiAgICAgICAgaWYgKHNldHRpbmdzLmhvc3QgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBpZiAoc2V0dGluZ3Muc3NsICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLklOVkFMSURfQVJHVU1FTlQsIFwiQ2FuJ3QgcHJvdmlkZSBzc2wgb3B0aW9uIGlmIGhvc3Qgb3B0aW9uIGlzIG5vdCBzZXRcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5ob3N0ID0gREVGQVVMVF9IT1NUO1xyXG4gICAgICAgICAgICB0aGlzLnNzbCA9IERFRkFVTFRfU1NMO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdmFsaWRhdGVOYW1lZFR5cGUoJ3NldHRpbmdzJywgJ25vbi1lbXB0eSBzdHJpbmcnLCAnaG9zdCcsIHNldHRpbmdzLmhvc3QpO1xyXG4gICAgICAgICAgICB0aGlzLmhvc3QgPSBzZXR0aW5ncy5ob3N0O1xyXG4gICAgICAgICAgICB2YWxpZGF0ZU5hbWVkT3B0aW9uYWxUeXBlKCdzZXR0aW5ncycsICdib29sZWFuJywgJ3NzbCcsIHNldHRpbmdzLnNzbCk7XHJcbiAgICAgICAgICAgIHRoaXMuc3NsID0gZGVmYXVsdGVkKHNldHRpbmdzLnNzbCwgREVGQVVMVF9TU0wpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YWxpZGF0ZU9wdGlvbk5hbWVzKCdzZXR0aW5ncycsIHNldHRpbmdzLCBbXHJcbiAgICAgICAgICAgICdob3N0JyxcclxuICAgICAgICAgICAgJ3NzbCcsXHJcbiAgICAgICAgICAgICdjcmVkZW50aWFscycsXHJcbiAgICAgICAgICAgICd0aW1lc3RhbXBzSW5TbmFwc2hvdHMnLFxyXG4gICAgICAgICAgICAnY2FjaGVTaXplQnl0ZXMnLFxyXG4gICAgICAgICAgICAnZXhwZXJpbWVudGFsRm9yY2VMb25nUG9sbGluZydcclxuICAgICAgICBdKTtcclxuICAgICAgICB2YWxpZGF0ZU5hbWVkT3B0aW9uYWxUeXBlKCdzZXR0aW5ncycsICdvYmplY3QnLCAnY3JlZGVudGlhbHMnLCBzZXR0aW5ncy5jcmVkZW50aWFscyk7XHJcbiAgICAgICAgdGhpcy5jcmVkZW50aWFscyA9IHNldHRpbmdzLmNyZWRlbnRpYWxzO1xyXG4gICAgICAgIHZhbGlkYXRlTmFtZWRPcHRpb25hbFR5cGUoJ3NldHRpbmdzJywgJ2Jvb2xlYW4nLCAndGltZXN0YW1wc0luU25hcHNob3RzJywgc2V0dGluZ3MudGltZXN0YW1wc0luU25hcHNob3RzKTtcclxuICAgICAgICAvLyBOb2JvZHkgc2hvdWxkIHNldCB0aW1lc3RhbXBzSW5TbmFwc2hvdHMgYW55bW9yZSwgYnV0IHRoZSBlcnJvciBkZXBlbmRzIG9uXHJcbiAgICAgICAgLy8gd2hldGhlciB0aGV5IHNldCBpdCB0byB0cnVlIG9yIGZhbHNlLi4uXHJcbiAgICAgICAgaWYgKHNldHRpbmdzLnRpbWVzdGFtcHNJblNuYXBzaG90cyA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICBlcnJvcihcIlxcbiAgVGhlIHRpbWVzdGFtcHNJblNuYXBzaG90cyBzZXR0aW5nIG5vdyBkZWZhdWx0cyB0byB0cnVlIGFuZCB5b3Ugbm9cXG4gIGxvbmdlciBuZWVkIHRvIGV4cGxpY2l0bHkgc2V0IGl0LiBJbiBhIGZ1dHVyZSByZWxlYXNlLCB0aGUgc2V0dGluZ1xcbiAgd2lsbCBiZSByZW1vdmVkIGVudGlyZWx5IGFuZCBzbyBpdCBpcyByZWNvbW1lbmRlZCB0aGF0IHlvdSByZW1vdmUgaXRcXG4gIGZyb20geW91ciBmaXJlc3RvcmUuc2V0dGluZ3MoKSBjYWxsIG5vdy5cIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHNldHRpbmdzLnRpbWVzdGFtcHNJblNuYXBzaG90cyA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgZXJyb3IoXCJcXG4gIFRoZSB0aW1lc3RhbXBzSW5TbmFwc2hvdHMgc2V0dGluZyB3aWxsIHNvb24gYmUgcmVtb3ZlZC4gWU9VIE1VU1QgVVBEQVRFXFxuICBZT1VSIENPREUuXFxuXFxuICBUbyBoaWRlIHRoaXMgd2FybmluZywgc3RvcCB1c2luZyB0aGUgdGltZXN0YW1wc0luU25hcHNob3RzIHNldHRpbmcgaW4geW91clxcbiAgZmlyZXN0b3JlLnNldHRpbmdzKHsgLi4uIH0pIGNhbGwuXFxuXFxuICBPbmNlIHlvdSByZW1vdmUgdGhlIHNldHRpbmcsIFRpbWVzdGFtcHMgc3RvcmVkIGluIENsb3VkIEZpcmVzdG9yZSB3aWxsIGJlXFxuICByZWFkIGJhY2sgYXMgRmlyZWJhc2UgVGltZXN0YW1wIG9iamVjdHMgaW5zdGVhZCBvZiBhcyBzeXN0ZW0gRGF0ZSBvYmplY3RzLlxcbiAgU28geW91IHdpbGwgYWxzbyBuZWVkIHRvIHVwZGF0ZSBjb2RlIGV4cGVjdGluZyBhIERhdGUgdG8gaW5zdGVhZCBleHBlY3QgYVxcbiAgVGltZXN0YW1wLiBGb3IgZXhhbXBsZTpcXG5cXG4gIC8vIE9sZDpcXG4gIGNvbnN0IGRhdGUgPSBzbmFwc2hvdC5nZXQoJ2NyZWF0ZWRfYXQnKTtcXG4gIC8vIE5ldzpcXG4gIGNvbnN0IHRpbWVzdGFtcCA9IHNuYXBzaG90LmdldCgnY3JlYXRlZF9hdCcpOyBjb25zdCBkYXRlID1cXG4gIHRpbWVzdGFtcC50b0RhdGUoKTtcXG5cXG4gIFBsZWFzZSBhdWRpdCBhbGwgZXhpc3RpbmcgdXNhZ2VzIG9mIERhdGUgd2hlbiB5b3UgZW5hYmxlIHRoZSBuZXdcXG4gIGJlaGF2aW9yLlwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy50aW1lc3RhbXBzSW5TbmFwc2hvdHMgPSBkZWZhdWx0ZWQoc2V0dGluZ3MudGltZXN0YW1wc0luU25hcHNob3RzLCBERUZBVUxUX1RJTUVTVEFNUFNfSU5fU05BUFNIT1RTKTtcclxuICAgICAgICB2YWxpZGF0ZU5hbWVkT3B0aW9uYWxUeXBlKCdzZXR0aW5ncycsICdudW1iZXInLCAnY2FjaGVTaXplQnl0ZXMnLCBzZXR0aW5ncy5jYWNoZVNpemVCeXRlcyk7XHJcbiAgICAgICAgaWYgKHNldHRpbmdzLmNhY2hlU2l6ZUJ5dGVzID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5jYWNoZVNpemVCeXRlcyA9IExydVBhcmFtcy5ERUZBVUxUX0NBQ0hFX1NJWkVfQllURVM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAoc2V0dGluZ3MuY2FjaGVTaXplQnl0ZXMgIT09IENBQ0hFX1NJWkVfVU5MSU1JVEVEICYmXHJcbiAgICAgICAgICAgICAgICBzZXR0aW5ncy5jYWNoZVNpemVCeXRlcyA8IExydVBhcmFtcy5NSU5JTVVNX0NBQ0hFX1NJWkVfQllURVMpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLklOVkFMSURfQVJHVU1FTlQsIFwiY2FjaGVTaXplQnl0ZXMgbXVzdCBiZSBhdCBsZWFzdCBcIiArIExydVBhcmFtcy5NSU5JTVVNX0NBQ0hFX1NJWkVfQllURVMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jYWNoZVNpemVCeXRlcyA9IHNldHRpbmdzLmNhY2hlU2l6ZUJ5dGVzO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhbGlkYXRlTmFtZWRPcHRpb25hbFR5cGUoJ3NldHRpbmdzJywgJ2Jvb2xlYW4nLCAnZXhwZXJpbWVudGFsRm9yY2VMb25nUG9sbGluZycsIHNldHRpbmdzLmV4cGVyaW1lbnRhbEZvcmNlTG9uZ1BvbGxpbmcpO1xyXG4gICAgICAgIHRoaXMuZm9yY2VMb25nUG9sbGluZyA9XHJcbiAgICAgICAgICAgIHNldHRpbmdzLmV4cGVyaW1lbnRhbEZvcmNlTG9uZ1BvbGxpbmcgPT09IHVuZGVmaW5lZFxyXG4gICAgICAgICAgICAgICAgPyBERUZBVUxUX0ZPUkNFX0xPTkdfUE9MTElOR1xyXG4gICAgICAgICAgICAgICAgOiBzZXR0aW5ncy5leHBlcmltZW50YWxGb3JjZUxvbmdQb2xsaW5nO1xyXG4gICAgfVxyXG4gICAgRmlyZXN0b3JlU2V0dGluZ3MucHJvdG90eXBlLmlzRXF1YWwgPSBmdW5jdGlvbiAob3RoZXIpIHtcclxuICAgICAgICByZXR1cm4gKHRoaXMuaG9zdCA9PT0gb3RoZXIuaG9zdCAmJlxyXG4gICAgICAgICAgICB0aGlzLnNzbCA9PT0gb3RoZXIuc3NsICYmXHJcbiAgICAgICAgICAgIHRoaXMudGltZXN0YW1wc0luU25hcHNob3RzID09PSBvdGhlci50aW1lc3RhbXBzSW5TbmFwc2hvdHMgJiZcclxuICAgICAgICAgICAgdGhpcy5jcmVkZW50aWFscyA9PT0gb3RoZXIuY3JlZGVudGlhbHMgJiZcclxuICAgICAgICAgICAgdGhpcy5jYWNoZVNpemVCeXRlcyA9PT0gb3RoZXIuY2FjaGVTaXplQnl0ZXMgJiZcclxuICAgICAgICAgICAgdGhpcy5mb3JjZUxvbmdQb2xsaW5nID09PSBvdGhlci5mb3JjZUxvbmdQb2xsaW5nKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gRmlyZXN0b3JlU2V0dGluZ3M7XHJcbn0oKSk7XHJcbi8qKlxyXG4gKiBUaGUgcm9vdCByZWZlcmVuY2UgdG8gdGhlIGRhdGFiYXNlLlxyXG4gKi9cclxudmFyIEZpcmVzdG9yZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEZpcmVzdG9yZShkYXRhYmFzZUlkT3JBcHAsIGF1dGhQcm92aWRlcikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5fZmlyZWJhc2VBcHAgPSBudWxsO1xyXG4gICAgICAgIC8vIFB1YmxpYyBmb3IgdXNlIGluIHRlc3RzLlxyXG4gICAgICAgIC8vIFRPRE8obWlrZWxlaGVuKTogVXNlIG1vZHVsYXJpemVkIGluaXRpYWxpemF0aW9uIGluc3RlYWQuXHJcbiAgICAgICAgdGhpcy5fcXVldWUgPSBuZXcgQXN5bmNRdWV1ZSgpO1xyXG4gICAgICAgIHRoaXMuSU5URVJOQUwgPSB7XHJcbiAgICAgICAgICAgIGRlbGV0ZTogZnVuY3Rpb24gKCkgeyByZXR1cm4gdHNsaWIuX19hd2FpdGVyKF90aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRzbGliLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlIGNsaWVudCBtdXN0IGJlIGluaXRhbGl6ZWQgdG8gZW5zdXJlIHRoYXQgYWxsIHN1YnNlcXVlbnQgQVBJIHVzYWdlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0aHJvd3MgYW4gZXhjZXB0aW9uLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbnN1cmVDbGllbnRDb25maWd1cmVkKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLl9maXJlc3RvcmVDbGllbnQudGVybWluYXRlKCldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pOyB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICBpZiAodHlwZW9mIGRhdGFiYXNlSWRPckFwcC5vcHRpb25zID09PSAnb2JqZWN0Jykge1xyXG4gICAgICAgICAgICAvLyBUaGlzIGlzIHZlcnkgbGlrZWx5IGEgRmlyZWJhc2UgYXBwIG9iamVjdFxyXG4gICAgICAgICAgICAvLyBUT0RPKGIvMzQxNzc2MDUpOiBDYW4gd2Ugc29tZWhvdyB1c2UgaW5zdGFuY2VvZj9cclxuICAgICAgICAgICAgdmFyIGFwcCA9IGRhdGFiYXNlSWRPckFwcDtcclxuICAgICAgICAgICAgdGhpcy5fZmlyZWJhc2VBcHAgPSBhcHA7XHJcbiAgICAgICAgICAgIHRoaXMuX2RhdGFiYXNlSWQgPSBGaXJlc3RvcmUuZGF0YWJhc2VJZEZyb21BcHAoYXBwKTtcclxuICAgICAgICAgICAgdGhpcy5fcGVyc2lzdGVuY2VLZXkgPSBhcHAubmFtZTtcclxuICAgICAgICAgICAgdGhpcy5fY3JlZGVudGlhbHMgPSBuZXcgRmlyZWJhc2VDcmVkZW50aWFsc1Byb3ZpZGVyKGF1dGhQcm92aWRlcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB2YXIgZXh0ZXJuYWxfMSA9IGRhdGFiYXNlSWRPckFwcDtcclxuICAgICAgICAgICAgaWYgKCFleHRlcm5hbF8xLnByb2plY3RJZCkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuSU5WQUxJRF9BUkdVTUVOVCwgJ011c3QgcHJvdmlkZSBwcm9qZWN0SWQnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLl9kYXRhYmFzZUlkID0gbmV3IERhdGFiYXNlSWQoZXh0ZXJuYWxfMS5wcm9qZWN0SWQsIGV4dGVybmFsXzEuZGF0YWJhc2UpO1xyXG4gICAgICAgICAgICAvLyBVc2UgYSBkZWZhdWx0IHBlcnNpc3RlbmNlS2V5IHRoYXQgbGluZXMgdXAgd2l0aCBGaXJlYmFzZUFwcC5cclxuICAgICAgICAgICAgdGhpcy5fcGVyc2lzdGVuY2VLZXkgPSAnW0RFRkFVTFRdJztcclxuICAgICAgICAgICAgdGhpcy5fY3JlZGVudGlhbHMgPSBuZXcgRW1wdHlDcmVkZW50aWFsc1Byb3ZpZGVyKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX3NldHRpbmdzID0gbmV3IEZpcmVzdG9yZVNldHRpbmdzKHt9KTtcclxuICAgICAgICB0aGlzLl9kYXRhQ29udmVydGVyID0gdGhpcy5jcmVhdGVEYXRhQ29udmVydGVyKHRoaXMuX2RhdGFiYXNlSWQpO1xyXG4gICAgfVxyXG4gICAgRmlyZXN0b3JlLnByb3RvdHlwZS5zZXR0aW5ncyA9IGZ1bmN0aW9uIChzZXR0aW5nc0xpdGVyYWwpIHtcclxuICAgICAgICB2YWxpZGF0ZUV4YWN0TnVtYmVyT2ZBcmdzKCdGaXJlc3RvcmUuc2V0dGluZ3MnLCBhcmd1bWVudHMsIDEpO1xyXG4gICAgICAgIHZhbGlkYXRlQXJnVHlwZSgnRmlyZXN0b3JlLnNldHRpbmdzJywgJ29iamVjdCcsIDEsIHNldHRpbmdzTGl0ZXJhbCk7XHJcbiAgICAgICAgaWYgKGNvbnRhaW5zKHNldHRpbmdzTGl0ZXJhbCwgJ3BlcnNpc3RlbmNlJykpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuSU5WQUxJRF9BUkdVTUVOVCwgJ1wicGVyc2lzdGVuY2VcIiBpcyBub3cgc3BlY2lmaWVkIHdpdGggYSBzZXBhcmF0ZSBjYWxsIHRvICcgK1xyXG4gICAgICAgICAgICAgICAgJ2ZpcmVzdG9yZS5lbmFibGVQZXJzaXN0ZW5jZSgpLicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgbmV3U2V0dGluZ3MgPSBuZXcgRmlyZXN0b3JlU2V0dGluZ3Moc2V0dGluZ3NMaXRlcmFsKTtcclxuICAgICAgICBpZiAodGhpcy5fZmlyZXN0b3JlQ2xpZW50ICYmICF0aGlzLl9zZXR0aW5ncy5pc0VxdWFsKG5ld1NldHRpbmdzKSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5GQUlMRURfUFJFQ09ORElUSU9OLCAnRmlyZXN0b3JlIGhhcyBhbHJlYWR5IGJlZW4gc3RhcnRlZCBhbmQgaXRzIHNldHRpbmdzIGNhbiBubyBsb25nZXIgJyArXHJcbiAgICAgICAgICAgICAgICAnYmUgY2hhbmdlZC4gWW91IGNhbiBvbmx5IGNhbGwgc2V0dGluZ3MoKSBiZWZvcmUgY2FsbGluZyBhbnkgb3RoZXIgJyArXHJcbiAgICAgICAgICAgICAgICAnbWV0aG9kcyBvbiBhIEZpcmVzdG9yZSBvYmplY3QuJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX3NldHRpbmdzID0gbmV3U2V0dGluZ3M7XHJcbiAgICAgICAgaWYgKG5ld1NldHRpbmdzLmNyZWRlbnRpYWxzICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5fY3JlZGVudGlhbHMgPSBtYWtlQ3JlZGVudGlhbHNQcm92aWRlcihuZXdTZXR0aW5ncy5jcmVkZW50aWFscyk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIEZpcmVzdG9yZS5wcm90b3R5cGUuZW5hYmxlTmV0d29yayA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmVuc3VyZUNsaWVudENvbmZpZ3VyZWQoKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZmlyZXN0b3JlQ2xpZW50LmVuYWJsZU5ldHdvcmsoKTtcclxuICAgIH07XHJcbiAgICBGaXJlc3RvcmUucHJvdG90eXBlLmRpc2FibGVOZXR3b3JrID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuZW5zdXJlQ2xpZW50Q29uZmlndXJlZCgpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9maXJlc3RvcmVDbGllbnQuZGlzYWJsZU5ldHdvcmsoKTtcclxuICAgIH07XHJcbiAgICBGaXJlc3RvcmUucHJvdG90eXBlLmVuYWJsZVBlcnNpc3RlbmNlID0gZnVuY3Rpb24gKHNldHRpbmdzKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2ZpcmVzdG9yZUNsaWVudCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5GQUlMRURfUFJFQ09ORElUSU9OLCAnRmlyZXN0b3JlIGhhcyBhbHJlYWR5IGJlZW4gc3RhcnRlZCBhbmQgcGVyc2lzdGVuY2UgY2FuIG5vIGxvbmdlciAnICtcclxuICAgICAgICAgICAgICAgICdiZSBlbmFibGVkLiBZb3UgY2FuIG9ubHkgY2FsbCBlbmFibGVQZXJzaXN0ZW5jZSgpIGJlZm9yZSBjYWxsaW5nICcgK1xyXG4gICAgICAgICAgICAgICAgJ2FueSBvdGhlciBtZXRob2RzIG9uIGEgRmlyZXN0b3JlIG9iamVjdC4nKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIHN5bmNocm9uaXplVGFicyA9IGZhbHNlO1xyXG4gICAgICAgIGlmIChzZXR0aW5ncykge1xyXG4gICAgICAgICAgICBpZiAoc2V0dGluZ3MuZXhwZXJpbWVudGFsVGFiU3luY2hyb25pemF0aW9uICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIGVycm9yKFwiVGhlICdleHBlcmltZW50YWxUYWJTeW5jaHJvbml6YXRpb24nIHNldHRpbmcgaGFzIGJlZW4gcmVuYW1lZCB0byBcIiArXHJcbiAgICAgICAgICAgICAgICAgICAgXCInc3luY2hyb25pemVUYWJzJy4gSW4gYSBmdXR1cmUgcmVsZWFzZSwgdGhlIHNldHRpbmcgd2lsbCBiZSByZW1vdmVkIFwiICtcclxuICAgICAgICAgICAgICAgICAgICAnYW5kIGl0IGlzIHJlY29tbWVuZGVkIHRoYXQgeW91IHVwZGF0ZSB5b3VyICcgK1xyXG4gICAgICAgICAgICAgICAgICAgIFwiZmlyZXN0b3JlLmVuYWJsZVBlcnNpc3RlbmNlKCkgY2FsbCB0byB1c2UgJ3N5bmNocm9uaXplVGFicycuXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHN5bmNocm9uaXplVGFicyA9IGRlZmF1bHRlZChzZXR0aW5ncy5zeW5jaHJvbml6ZVRhYnMgIT09IHVuZGVmaW5lZFxyXG4gICAgICAgICAgICAgICAgPyBzZXR0aW5ncy5zeW5jaHJvbml6ZVRhYnNcclxuICAgICAgICAgICAgICAgIDogc2V0dGluZ3MuZXhwZXJpbWVudGFsVGFiU3luY2hyb25pemF0aW9uLCBERUZBVUxUX1NZTkNIUk9OSVpFX1RBQlMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5jb25maWd1cmVDbGllbnQobmV3IEluZGV4ZWREYlBlcnNpc3RlbmNlU2V0dGluZ3ModGhpcy5fc2V0dGluZ3MuY2FjaGVTaXplQnl0ZXMsIHN5bmNocm9uaXplVGFicykpO1xyXG4gICAgfTtcclxuICAgIEZpcmVzdG9yZS5wcm90b3R5cGUuY2xlYXJQZXJzaXN0ZW5jZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhciBwZXJzaXN0ZW5jZUtleSA9IEluZGV4ZWREYlBlcnNpc3RlbmNlLmJ1aWxkU3RvcmFnZVByZWZpeCh0aGlzLm1ha2VEYXRhYmFzZUluZm8oKSk7XHJcbiAgICAgICAgdmFyIGRlZmVycmVkID0gbmV3IERlZmVycmVkKCk7XHJcbiAgICAgICAgdGhpcy5fcXVldWUuZW5xdWV1ZUFuZEZvcmdldEV2ZW5BZnRlclNodXRkb3duKGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRzbGliLl9fYXdhaXRlcihfdGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGVfMTtcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2EudHJ5cy5wdXNoKFswLCAyLCAsIDNdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX2ZpcmVzdG9yZUNsaWVudCAhPT0gdW5kZWZpbmVkICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAhdGhpcy5fZmlyZXN0b3JlQ2xpZW50LmNsaWVudFRlcm1pbmF0ZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLkZBSUxFRF9QUkVDT05ESVRJT04sICdQZXJzaXN0ZW5jZSBjYW5ub3QgYmUgY2xlYXJlZCBhZnRlciB0aGlzIEZpcmVzdG9yZSBpbnN0YW5jZSBpcyBpbml0aWFsaXplZC4nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBJbmRleGVkRGJQZXJzaXN0ZW5jZS5jbGVhclBlcnNpc3RlbmNlKHBlcnNpc3RlbmNlS2V5KV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgM107XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlXzEgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlamVjdChlXzEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCAzXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6IHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7IH0pO1xyXG4gICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xyXG4gICAgfTtcclxuICAgIEZpcmVzdG9yZS5wcm90b3R5cGUudGVybWluYXRlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuYXBwLl9yZW1vdmVTZXJ2aWNlSW5zdGFuY2UoJ2ZpcmVzdG9yZScpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLklOVEVSTkFMLmRlbGV0ZSgpO1xyXG4gICAgfTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShGaXJlc3RvcmUucHJvdG90eXBlLCBcIl9pc1Rlcm1pbmF0ZWRcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB0aGlzLmVuc3VyZUNsaWVudENvbmZpZ3VyZWQoKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2ZpcmVzdG9yZUNsaWVudC5jbGllbnRUZXJtaW5hdGVkO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgRmlyZXN0b3JlLnByb3RvdHlwZS53YWl0Rm9yUGVuZGluZ1dyaXRlcyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmVuc3VyZUNsaWVudENvbmZpZ3VyZWQoKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZmlyZXN0b3JlQ2xpZW50LndhaXRGb3JQZW5kaW5nV3JpdGVzKCk7XHJcbiAgICB9O1xyXG4gICAgRmlyZXN0b3JlLnByb3RvdHlwZS5vblNuYXBzaG90c0luU3luYyA9IGZ1bmN0aW9uIChhcmcpIHtcclxuICAgICAgICB0aGlzLmVuc3VyZUNsaWVudENvbmZpZ3VyZWQoKTtcclxuICAgICAgICBpZiAoaXNQYXJ0aWFsT2JzZXJ2ZXIoYXJnKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5vblNuYXBzaG90c0luU3luY0ludGVybmFsKGFyZyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB2YWxpZGF0ZUFyZ1R5cGUoJ0ZpcmVzdG9yZS5vblNuYXBzaG90c0luU3luYycsICdmdW5jdGlvbicsIDEsIGFyZyk7XHJcbiAgICAgICAgICAgIHZhciBvYnNlcnZlciA9IHtcclxuICAgICAgICAgICAgICAgIG5leHQ6IGFyZ1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5vblNuYXBzaG90c0luU3luY0ludGVybmFsKG9ic2VydmVyKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgRmlyZXN0b3JlLnByb3RvdHlwZS5vblNuYXBzaG90c0luU3luY0ludGVybmFsID0gZnVuY3Rpb24gKG9ic2VydmVyKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgZXJySGFuZGxlciA9IGZ1bmN0aW9uIChlcnIpIHtcclxuICAgICAgICAgICAgdGhyb3cgZmFpbCgnVW5jYXVnaHQgRXJyb3IgaW4gb25TbmFwc2hvdHNJblN5bmMnKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHZhciBhc3luY09ic2VydmVyID0gbmV3IEFzeW5jT2JzZXJ2ZXIoe1xyXG4gICAgICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAob2JzZXJ2ZXIubmV4dCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG9ic2VydmVyLm5leHQoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZXJyb3I6IGVyckhhbmRsZXJcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLl9maXJlc3RvcmVDbGllbnQuYWRkU25hcHNob3RzSW5TeW5jTGlzdGVuZXIoYXN5bmNPYnNlcnZlcik7XHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgYXN5bmNPYnNlcnZlci5tdXRlKCk7XHJcbiAgICAgICAgICAgIF90aGlzLl9maXJlc3RvcmVDbGllbnQucmVtb3ZlU25hcHNob3RzSW5TeW5jTGlzdGVuZXIoYXN5bmNPYnNlcnZlcik7XHJcbiAgICAgICAgfTtcclxuICAgIH07XHJcbiAgICBGaXJlc3RvcmUucHJvdG90eXBlLmVuc3VyZUNsaWVudENvbmZpZ3VyZWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLl9maXJlc3RvcmVDbGllbnQpIHtcclxuICAgICAgICAgICAgLy8gS2ljayBvZmYgc3RhcnRpbmcgdGhlIGNsaWVudCBidXQgZG9uJ3QgYWN0dWFsbHkgd2FpdCBmb3IgaXQuXHJcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZmxvYXRpbmctcHJvbWlzZXNcclxuICAgICAgICAgICAgdGhpcy5jb25maWd1cmVDbGllbnQobmV3IE1lbW9yeVBlcnNpc3RlbmNlU2V0dGluZ3MoKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLl9maXJlc3RvcmVDbGllbnQ7XHJcbiAgICB9O1xyXG4gICAgRmlyZXN0b3JlLnByb3RvdHlwZS5tYWtlRGF0YWJhc2VJbmZvID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgRGF0YWJhc2VJbmZvKHRoaXMuX2RhdGFiYXNlSWQsIHRoaXMuX3BlcnNpc3RlbmNlS2V5LCB0aGlzLl9zZXR0aW5ncy5ob3N0LCB0aGlzLl9zZXR0aW5ncy5zc2wsIHRoaXMuX3NldHRpbmdzLmZvcmNlTG9uZ1BvbGxpbmcpO1xyXG4gICAgfTtcclxuICAgIEZpcmVzdG9yZS5wcm90b3R5cGUuY29uZmlndXJlQ2xpZW50ID0gZnVuY3Rpb24gKHBlcnNpc3RlbmNlU2V0dGluZ3MpIHtcclxuICAgICAgICBhc3NlcnQoISF0aGlzLl9zZXR0aW5ncy5ob3N0LCAnRmlyZXN0b3JlU2V0dGluZ3MuaG9zdCBpcyBub3Qgc2V0Jyk7XHJcbiAgICAgICAgYXNzZXJ0KCF0aGlzLl9maXJlc3RvcmVDbGllbnQsICdjb25maWd1cmVDbGllbnQoKSBjYWxsZWQgbXVsdGlwbGUgdGltZXMnKTtcclxuICAgICAgICB2YXIgZGF0YWJhc2VJbmZvID0gdGhpcy5tYWtlRGF0YWJhc2VJbmZvKCk7XHJcbiAgICAgICAgdGhpcy5fZmlyZXN0b3JlQ2xpZW50ID0gbmV3IEZpcmVzdG9yZUNsaWVudChQbGF0Zm9ybVN1cHBvcnQuZ2V0UGxhdGZvcm0oKSwgZGF0YWJhc2VJbmZvLCB0aGlzLl9jcmVkZW50aWFscywgdGhpcy5fcXVldWUpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9maXJlc3RvcmVDbGllbnQuc3RhcnQocGVyc2lzdGVuY2VTZXR0aW5ncyk7XHJcbiAgICB9O1xyXG4gICAgRmlyZXN0b3JlLnByb3RvdHlwZS5jcmVhdGVEYXRhQ29udmVydGVyID0gZnVuY3Rpb24gKGRhdGFiYXNlSWQpIHtcclxuICAgICAgICB2YXIgcHJlQ29udmVydGVyID0gZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgICAgICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIERvY3VtZW50UmVmZXJlbmNlKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdGhpc0RiID0gZGF0YWJhc2VJZDtcclxuICAgICAgICAgICAgICAgIHZhciBvdGhlckRiID0gdmFsdWUuZmlyZXN0b3JlLl9kYXRhYmFzZUlkO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFvdGhlckRiLmlzRXF1YWwodGhpc0RiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLklOVkFMSURfQVJHVU1FTlQsICdEb2N1bWVudCByZWZlcmVuY2UgaXMgZm9yIGRhdGFiYXNlICcgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAob3RoZXJEYi5wcm9qZWN0SWQgKyBcIi9cIiArIG90aGVyRGIuZGF0YWJhc2UgKyBcIiBidXQgc2hvdWxkIGJlIFwiKSArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIChcImZvciBkYXRhYmFzZSBcIiArIHRoaXNEYi5wcm9qZWN0SWQgKyBcIi9cIiArIHRoaXNEYi5kYXRhYmFzZSkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBEb2N1bWVudEtleVJlZmVyZW5jZShkYXRhYmFzZUlkLCB2YWx1ZS5fa2V5KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIG5ldyBVc2VyRGF0YUNvbnZlcnRlcihwcmVDb252ZXJ0ZXIpO1xyXG4gICAgfTtcclxuICAgIEZpcmVzdG9yZS5kYXRhYmFzZUlkRnJvbUFwcCA9IGZ1bmN0aW9uIChhcHApIHtcclxuICAgICAgICB2YXIgb3B0aW9ucyA9IGFwcC5vcHRpb25zO1xyXG4gICAgICAgIGlmICghY29udGFpbnMob3B0aW9ucywgJ3Byb2plY3RJZCcpKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLklOVkFMSURfQVJHVU1FTlQsICdcInByb2plY3RJZFwiIG5vdCBwcm92aWRlZCBpbiBmaXJlYmFzZS5pbml0aWFsaXplQXBwLicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgcHJvamVjdElkID0gb3B0aW9uc1sncHJvamVjdElkJ107XHJcbiAgICAgICAgaWYgKCFwcm9qZWN0SWQgfHwgdHlwZW9mIHByb2plY3RJZCAhPT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuSU5WQUxJRF9BUkdVTUVOVCwgJ3Byb2plY3RJZCBtdXN0IGJlIGEgc3RyaW5nIGluIEZpcmViYXNlQXBwLm9wdGlvbnMnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG5ldyBEYXRhYmFzZUlkKHByb2plY3RJZCk7XHJcbiAgICB9O1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEZpcmVzdG9yZS5wcm90b3R5cGUsIFwiYXBwXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLl9maXJlYmFzZUFwcCkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuRkFJTEVEX1BSRUNPTkRJVElPTiwgXCJGaXJlc3RvcmUgd2FzIG5vdCBpbml0aWFsaXplZCB1c2luZyB0aGUgRmlyZWJhc2UgU0RLLiAnYXBwJyBpcyBcIiArXHJcbiAgICAgICAgICAgICAgICAgICAgJ25vdCBhdmFpbGFibGUnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZmlyZWJhc2VBcHA7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBGaXJlc3RvcmUucHJvdG90eXBlLmNvbGxlY3Rpb24gPSBmdW5jdGlvbiAocGF0aFN0cmluZykge1xyXG4gICAgICAgIHZhbGlkYXRlRXhhY3ROdW1iZXJPZkFyZ3MoJ0ZpcmVzdG9yZS5jb2xsZWN0aW9uJywgYXJndW1lbnRzLCAxKTtcclxuICAgICAgICB2YWxpZGF0ZUFyZ1R5cGUoJ0ZpcmVzdG9yZS5jb2xsZWN0aW9uJywgJ25vbi1lbXB0eSBzdHJpbmcnLCAxLCBwYXRoU3RyaW5nKTtcclxuICAgICAgICB0aGlzLmVuc3VyZUNsaWVudENvbmZpZ3VyZWQoKTtcclxuICAgICAgICByZXR1cm4gbmV3IENvbGxlY3Rpb25SZWZlcmVuY2UoUmVzb3VyY2VQYXRoLmZyb21TdHJpbmcocGF0aFN0cmluZyksIHRoaXMpO1xyXG4gICAgfTtcclxuICAgIEZpcmVzdG9yZS5wcm90b3R5cGUuZG9jID0gZnVuY3Rpb24gKHBhdGhTdHJpbmcpIHtcclxuICAgICAgICB2YWxpZGF0ZUV4YWN0TnVtYmVyT2ZBcmdzKCdGaXJlc3RvcmUuZG9jJywgYXJndW1lbnRzLCAxKTtcclxuICAgICAgICB2YWxpZGF0ZUFyZ1R5cGUoJ0ZpcmVzdG9yZS5kb2MnLCAnbm9uLWVtcHR5IHN0cmluZycsIDEsIHBhdGhTdHJpbmcpO1xyXG4gICAgICAgIHRoaXMuZW5zdXJlQ2xpZW50Q29uZmlndXJlZCgpO1xyXG4gICAgICAgIHJldHVybiBEb2N1bWVudFJlZmVyZW5jZS5mb3JQYXRoKFJlc291cmNlUGF0aC5mcm9tU3RyaW5nKHBhdGhTdHJpbmcpLCB0aGlzKTtcclxuICAgIH07XHJcbiAgICBGaXJlc3RvcmUucHJvdG90eXBlLmNvbGxlY3Rpb25Hcm91cCA9IGZ1bmN0aW9uIChjb2xsZWN0aW9uSWQpIHtcclxuICAgICAgICB2YWxpZGF0ZUV4YWN0TnVtYmVyT2ZBcmdzKCdGaXJlc3RvcmUuY29sbGVjdGlvbkdyb3VwJywgYXJndW1lbnRzLCAxKTtcclxuICAgICAgICB2YWxpZGF0ZUFyZ1R5cGUoJ0ZpcmVzdG9yZS5jb2xsZWN0aW9uR3JvdXAnLCAnbm9uLWVtcHR5IHN0cmluZycsIDEsIGNvbGxlY3Rpb25JZCk7XHJcbiAgICAgICAgaWYgKGNvbGxlY3Rpb25JZC5pbmRleE9mKCcvJykgPj0gMCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5JTlZBTElEX0FSR1VNRU5ULCBcIkludmFsaWQgY29sbGVjdGlvbiBJRCAnXCIgKyBjb2xsZWN0aW9uSWQgKyBcIicgcGFzc2VkIHRvIGZ1bmN0aW9uIFwiICtcclxuICAgICAgICAgICAgICAgIFwiRmlyZXN0b3JlLmNvbGxlY3Rpb25Hcm91cCgpLiBDb2xsZWN0aW9uIElEcyBtdXN0IG5vdCBjb250YWluICcvJy5cIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZW5zdXJlQ2xpZW50Q29uZmlndXJlZCgpO1xyXG4gICAgICAgIHJldHVybiBuZXcgUXVlcnkkMShuZXcgUXVlcnkoUmVzb3VyY2VQYXRoLkVNUFRZX1BBVEgsIGNvbGxlY3Rpb25JZCksIHRoaXMpO1xyXG4gICAgfTtcclxuICAgIEZpcmVzdG9yZS5wcm90b3R5cGUucnVuVHJhbnNhY3Rpb24gPSBmdW5jdGlvbiAodXBkYXRlRnVuY3Rpb24pIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhbGlkYXRlRXhhY3ROdW1iZXJPZkFyZ3MoJ0ZpcmVzdG9yZS5ydW5UcmFuc2FjdGlvbicsIGFyZ3VtZW50cywgMSk7XHJcbiAgICAgICAgdmFsaWRhdGVBcmdUeXBlKCdGaXJlc3RvcmUucnVuVHJhbnNhY3Rpb24nLCAnZnVuY3Rpb24nLCAxLCB1cGRhdGVGdW5jdGlvbik7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5zdXJlQ2xpZW50Q29uZmlndXJlZCgpLnRyYW5zYWN0aW9uKGZ1bmN0aW9uICh0cmFuc2FjdGlvbikge1xyXG4gICAgICAgICAgICByZXR1cm4gdXBkYXRlRnVuY3Rpb24obmV3IFRyYW5zYWN0aW9uJDEoX3RoaXMsIHRyYW5zYWN0aW9uKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgRmlyZXN0b3JlLnByb3RvdHlwZS5iYXRjaCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmVuc3VyZUNsaWVudENvbmZpZ3VyZWQoKTtcclxuICAgICAgICByZXR1cm4gbmV3IFdyaXRlQmF0Y2godGhpcyk7XHJcbiAgICB9O1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEZpcmVzdG9yZSwgXCJsb2dMZXZlbFwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAoZ2V0TG9nTGV2ZWwoKSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSBMb2dMZXZlbC5ERUJVRzpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ2RlYnVnJztcclxuICAgICAgICAgICAgICAgIGNhc2UgTG9nTGV2ZWwuRVJST1I6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdlcnJvcic7XHJcbiAgICAgICAgICAgICAgICBjYXNlIExvZ0xldmVsLlNJTEVOVDpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ3NpbGVudCc7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWlsKCdVbmtub3duIGxvZyBsZXZlbDogJyArIGdldExvZ0xldmVsKCkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBGaXJlc3RvcmUuc2V0TG9nTGV2ZWwgPSBmdW5jdGlvbiAobGV2ZWwpIHtcclxuICAgICAgICB2YWxpZGF0ZUV4YWN0TnVtYmVyT2ZBcmdzKCdGaXJlc3RvcmUuc2V0TG9nTGV2ZWwnLCBhcmd1bWVudHMsIDEpO1xyXG4gICAgICAgIHZhbGlkYXRlQXJnVHlwZSgnRmlyZXN0b3JlLnNldExvZ0xldmVsJywgJ25vbi1lbXB0eSBzdHJpbmcnLCAxLCBsZXZlbCk7XHJcbiAgICAgICAgc3dpdGNoIChsZXZlbCkge1xyXG4gICAgICAgICAgICBjYXNlICdkZWJ1Zyc6XHJcbiAgICAgICAgICAgICAgICBzZXRMb2dMZXZlbChMb2dMZXZlbC5ERUJVRyk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnZXJyb3InOlxyXG4gICAgICAgICAgICAgICAgc2V0TG9nTGV2ZWwoTG9nTGV2ZWwuRVJST1IpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ3NpbGVudCc6XHJcbiAgICAgICAgICAgICAgICBzZXRMb2dMZXZlbChMb2dMZXZlbC5TSUxFTlQpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5JTlZBTElEX0FSR1VNRU5ULCAnSW52YWxpZCBsb2cgbGV2ZWw6ICcgKyBsZXZlbCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8vIE5vdGU6IHRoaXMgaXMgbm90IGEgcHJvcGVydHkgYmVjYXVzZSB0aGUgbWluaWZpZXIgY2FuJ3Qgd29yayBjb3JyZWN0bHkgd2l0aFxyXG4gICAgLy8gdGhlIHdheSBUeXBlU2NyaXB0IGNvbXBpbGVyIG91dHB1dHMgcHJvcGVydGllcy5cclxuICAgIEZpcmVzdG9yZS5wcm90b3R5cGUuX2FyZVRpbWVzdGFtcHNJblNuYXBzaG90c0VuYWJsZWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NldHRpbmdzLnRpbWVzdGFtcHNJblNuYXBzaG90cztcclxuICAgIH07XHJcbiAgICByZXR1cm4gRmlyZXN0b3JlO1xyXG59KCkpO1xyXG4vKipcclxuICogQSByZWZlcmVuY2UgdG8gYSB0cmFuc2FjdGlvbi5cclxuICovXHJcbnZhciBUcmFuc2FjdGlvbiQxID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gVHJhbnNhY3Rpb24oX2ZpcmVzdG9yZSwgX3RyYW5zYWN0aW9uKSB7XHJcbiAgICAgICAgdGhpcy5fZmlyZXN0b3JlID0gX2ZpcmVzdG9yZTtcclxuICAgICAgICB0aGlzLl90cmFuc2FjdGlvbiA9IF90cmFuc2FjdGlvbjtcclxuICAgIH1cclxuICAgIFRyYW5zYWN0aW9uLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoZG9jdW1lbnRSZWYpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhbGlkYXRlRXhhY3ROdW1iZXJPZkFyZ3MoJ1RyYW5zYWN0aW9uLmdldCcsIGFyZ3VtZW50cywgMSk7XHJcbiAgICAgICAgdmFyIHJlZiA9IHZhbGlkYXRlUmVmZXJlbmNlKCdUcmFuc2FjdGlvbi5nZXQnLCBkb2N1bWVudFJlZiwgdGhpcy5fZmlyZXN0b3JlKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fdHJhbnNhY3Rpb25cclxuICAgICAgICAgICAgLmxvb2t1cChbcmVmLl9rZXldKVxyXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoZG9jcykge1xyXG4gICAgICAgICAgICBpZiAoIWRvY3MgfHwgZG9jcy5sZW5ndGggIT09IDEpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWlsKCdNaXNtYXRjaCBpbiBkb2NzIHJldHVybmVkIGZyb20gZG9jdW1lbnQgbG9va3VwLicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciBkb2MgPSBkb2NzWzBdO1xyXG4gICAgICAgICAgICBpZiAoZG9jIGluc3RhbmNlb2YgTm9Eb2N1bWVudCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBEb2N1bWVudFNuYXBzaG90KF90aGlzLl9maXJlc3RvcmUsIHJlZi5fa2V5LCBudWxsLCBcclxuICAgICAgICAgICAgICAgIC8qIGZyb21DYWNoZT0gKi8gZmFsc2UsIFxyXG4gICAgICAgICAgICAgICAgLyogaGFzUGVuZGluZ1dyaXRlcz0gKi8gZmFsc2UsIHJlZi5fY29udmVydGVyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChkb2MgaW5zdGFuY2VvZiBEb2N1bWVudCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBEb2N1bWVudFNuYXBzaG90KF90aGlzLl9maXJlc3RvcmUsIHJlZi5fa2V5LCBkb2MsIFxyXG4gICAgICAgICAgICAgICAgLyogZnJvbUNhY2hlPSAqLyBmYWxzZSwgXHJcbiAgICAgICAgICAgICAgICAvKiBoYXNQZW5kaW5nV3JpdGVzPSAqLyBmYWxzZSwgcmVmLl9jb252ZXJ0ZXIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgZmFpbChcIkJhdGNoR2V0RG9jdW1lbnRzUmVxdWVzdCByZXR1cm5lZCB1bmV4cGVjdGVkIGRvY3VtZW50IHR5cGU6IFwiICsgZG9jLmNvbnN0cnVjdG9yLm5hbWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgVHJhbnNhY3Rpb24ucHJvdG90eXBlLnNldCA9IGZ1bmN0aW9uIChkb2N1bWVudFJlZiwgdmFsdWUsIG9wdGlvbnMpIHtcclxuICAgICAgICB2YWxpZGF0ZUJldHdlZW5OdW1iZXJPZkFyZ3MoJ1RyYW5zYWN0aW9uLnNldCcsIGFyZ3VtZW50cywgMiwgMyk7XHJcbiAgICAgICAgdmFyIHJlZiA9IHZhbGlkYXRlUmVmZXJlbmNlKCdUcmFuc2FjdGlvbi5zZXQnLCBkb2N1bWVudFJlZiwgdGhpcy5fZmlyZXN0b3JlKTtcclxuICAgICAgICBvcHRpb25zID0gdmFsaWRhdGVTZXRPcHRpb25zKCdUcmFuc2FjdGlvbi5zZXQnLCBvcHRpb25zKTtcclxuICAgICAgICB2YXIgX2EgPSBhcHBseUZpcmVzdG9yZURhdGFDb252ZXJ0ZXIocmVmLl9jb252ZXJ0ZXIsIHZhbHVlLCAnVHJhbnNhY3Rpb24uc2V0JyksIGNvbnZlcnRlZFZhbHVlID0gX2FbMF0sIGZ1bmN0aW9uTmFtZSA9IF9hWzFdO1xyXG4gICAgICAgIHZhciBwYXJzZWQgPSBvcHRpb25zLm1lcmdlIHx8IG9wdGlvbnMubWVyZ2VGaWVsZHNcclxuICAgICAgICAgICAgPyB0aGlzLl9maXJlc3RvcmUuX2RhdGFDb252ZXJ0ZXIucGFyc2VNZXJnZURhdGEoZnVuY3Rpb25OYW1lLCBjb252ZXJ0ZWRWYWx1ZSwgb3B0aW9ucy5tZXJnZUZpZWxkcylcclxuICAgICAgICAgICAgOiB0aGlzLl9maXJlc3RvcmUuX2RhdGFDb252ZXJ0ZXIucGFyc2VTZXREYXRhKGZ1bmN0aW9uTmFtZSwgY29udmVydGVkVmFsdWUpO1xyXG4gICAgICAgIHRoaXMuX3RyYW5zYWN0aW9uLnNldChyZWYuX2tleSwgcGFyc2VkKTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH07XHJcbiAgICBUcmFuc2FjdGlvbi5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKGRvY3VtZW50UmVmLCBmaWVsZE9yVXBkYXRlRGF0YSwgdmFsdWUpIHtcclxuICAgICAgICB2YXIgbW9yZUZpZWxkc0FuZFZhbHVlcyA9IFtdO1xyXG4gICAgICAgIGZvciAodmFyIF9pID0gMzsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIG1vcmVGaWVsZHNBbmRWYWx1ZXNbX2kgLSAzXSA9IGFyZ3VtZW50c1tfaV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciByZWY7XHJcbiAgICAgICAgdmFyIHBhcnNlZDtcclxuICAgICAgICBpZiAodHlwZW9mIGZpZWxkT3JVcGRhdGVEYXRhID09PSAnc3RyaW5nJyB8fFxyXG4gICAgICAgICAgICBmaWVsZE9yVXBkYXRlRGF0YSBpbnN0YW5jZW9mIEZpZWxkUGF0aCQxKSB7XHJcbiAgICAgICAgICAgIHZhbGlkYXRlQXRMZWFzdE51bWJlck9mQXJncygnVHJhbnNhY3Rpb24udXBkYXRlJywgYXJndW1lbnRzLCAzKTtcclxuICAgICAgICAgICAgcmVmID0gdmFsaWRhdGVSZWZlcmVuY2UoJ1RyYW5zYWN0aW9uLnVwZGF0ZScsIGRvY3VtZW50UmVmLCB0aGlzLl9maXJlc3RvcmUpO1xyXG4gICAgICAgICAgICBwYXJzZWQgPSB0aGlzLl9maXJlc3RvcmUuX2RhdGFDb252ZXJ0ZXIucGFyc2VVcGRhdGVWYXJhcmdzKCdUcmFuc2FjdGlvbi51cGRhdGUnLCBmaWVsZE9yVXBkYXRlRGF0YSwgdmFsdWUsIG1vcmVGaWVsZHNBbmRWYWx1ZXMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdmFsaWRhdGVFeGFjdE51bWJlck9mQXJncygnVHJhbnNhY3Rpb24udXBkYXRlJywgYXJndW1lbnRzLCAyKTtcclxuICAgICAgICAgICAgcmVmID0gdmFsaWRhdGVSZWZlcmVuY2UoJ1RyYW5zYWN0aW9uLnVwZGF0ZScsIGRvY3VtZW50UmVmLCB0aGlzLl9maXJlc3RvcmUpO1xyXG4gICAgICAgICAgICBwYXJzZWQgPSB0aGlzLl9maXJlc3RvcmUuX2RhdGFDb252ZXJ0ZXIucGFyc2VVcGRhdGVEYXRhKCdUcmFuc2FjdGlvbi51cGRhdGUnLCBmaWVsZE9yVXBkYXRlRGF0YSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX3RyYW5zYWN0aW9uLnVwZGF0ZShyZWYuX2tleSwgcGFyc2VkKTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH07XHJcbiAgICBUcmFuc2FjdGlvbi5wcm90b3R5cGUuZGVsZXRlID0gZnVuY3Rpb24gKGRvY3VtZW50UmVmKSB7XHJcbiAgICAgICAgdmFsaWRhdGVFeGFjdE51bWJlck9mQXJncygnVHJhbnNhY3Rpb24uZGVsZXRlJywgYXJndW1lbnRzLCAxKTtcclxuICAgICAgICB2YXIgcmVmID0gdmFsaWRhdGVSZWZlcmVuY2UoJ1RyYW5zYWN0aW9uLmRlbGV0ZScsIGRvY3VtZW50UmVmLCB0aGlzLl9maXJlc3RvcmUpO1xyXG4gICAgICAgIHRoaXMuX3RyYW5zYWN0aW9uLmRlbGV0ZShyZWYuX2tleSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFRyYW5zYWN0aW9uO1xyXG59KCkpO1xyXG52YXIgV3JpdGVCYXRjaCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFdyaXRlQmF0Y2goX2ZpcmVzdG9yZSkge1xyXG4gICAgICAgIHRoaXMuX2ZpcmVzdG9yZSA9IF9maXJlc3RvcmU7XHJcbiAgICAgICAgdGhpcy5fbXV0YXRpb25zID0gW107XHJcbiAgICAgICAgdGhpcy5fY29tbWl0dGVkID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBXcml0ZUJhdGNoLnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAoZG9jdW1lbnRSZWYsIHZhbHVlLCBvcHRpb25zKSB7XHJcbiAgICAgICAgdmFsaWRhdGVCZXR3ZWVuTnVtYmVyT2ZBcmdzKCdXcml0ZUJhdGNoLnNldCcsIGFyZ3VtZW50cywgMiwgMyk7XHJcbiAgICAgICAgdGhpcy52ZXJpZnlOb3RDb21taXR0ZWQoKTtcclxuICAgICAgICB2YXIgcmVmID0gdmFsaWRhdGVSZWZlcmVuY2UoJ1dyaXRlQmF0Y2guc2V0JywgZG9jdW1lbnRSZWYsIHRoaXMuX2ZpcmVzdG9yZSk7XHJcbiAgICAgICAgb3B0aW9ucyA9IHZhbGlkYXRlU2V0T3B0aW9ucygnV3JpdGVCYXRjaC5zZXQnLCBvcHRpb25zKTtcclxuICAgICAgICB2YXIgX2EgPSBhcHBseUZpcmVzdG9yZURhdGFDb252ZXJ0ZXIocmVmLl9jb252ZXJ0ZXIsIHZhbHVlLCAnV3JpdGVCYXRjaC5zZXQnKSwgY29udmVydGVkVmFsdWUgPSBfYVswXSwgZnVuY3Rpb25OYW1lID0gX2FbMV07XHJcbiAgICAgICAgdmFyIHBhcnNlZCA9IG9wdGlvbnMubWVyZ2UgfHwgb3B0aW9ucy5tZXJnZUZpZWxkc1xyXG4gICAgICAgICAgICA/IHRoaXMuX2ZpcmVzdG9yZS5fZGF0YUNvbnZlcnRlci5wYXJzZU1lcmdlRGF0YShmdW5jdGlvbk5hbWUsIGNvbnZlcnRlZFZhbHVlLCBvcHRpb25zLm1lcmdlRmllbGRzKVxyXG4gICAgICAgICAgICA6IHRoaXMuX2ZpcmVzdG9yZS5fZGF0YUNvbnZlcnRlci5wYXJzZVNldERhdGEoZnVuY3Rpb25OYW1lLCBjb252ZXJ0ZWRWYWx1ZSk7XHJcbiAgICAgICAgdGhpcy5fbXV0YXRpb25zID0gdGhpcy5fbXV0YXRpb25zLmNvbmNhdChwYXJzZWQudG9NdXRhdGlvbnMocmVmLl9rZXksIFByZWNvbmRpdGlvbi5OT05FKSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9O1xyXG4gICAgV3JpdGVCYXRjaC5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKGRvY3VtZW50UmVmLCBmaWVsZE9yVXBkYXRlRGF0YSwgdmFsdWUpIHtcclxuICAgICAgICB2YXIgbW9yZUZpZWxkc0FuZFZhbHVlcyA9IFtdO1xyXG4gICAgICAgIGZvciAodmFyIF9pID0gMzsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIG1vcmVGaWVsZHNBbmRWYWx1ZXNbX2kgLSAzXSA9IGFyZ3VtZW50c1tfaV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMudmVyaWZ5Tm90Q29tbWl0dGVkKCk7XHJcbiAgICAgICAgdmFyIHJlZjtcclxuICAgICAgICB2YXIgcGFyc2VkO1xyXG4gICAgICAgIGlmICh0eXBlb2YgZmllbGRPclVwZGF0ZURhdGEgPT09ICdzdHJpbmcnIHx8XHJcbiAgICAgICAgICAgIGZpZWxkT3JVcGRhdGVEYXRhIGluc3RhbmNlb2YgRmllbGRQYXRoJDEpIHtcclxuICAgICAgICAgICAgdmFsaWRhdGVBdExlYXN0TnVtYmVyT2ZBcmdzKCdXcml0ZUJhdGNoLnVwZGF0ZScsIGFyZ3VtZW50cywgMyk7XHJcbiAgICAgICAgICAgIHJlZiA9IHZhbGlkYXRlUmVmZXJlbmNlKCdXcml0ZUJhdGNoLnVwZGF0ZScsIGRvY3VtZW50UmVmLCB0aGlzLl9maXJlc3RvcmUpO1xyXG4gICAgICAgICAgICBwYXJzZWQgPSB0aGlzLl9maXJlc3RvcmUuX2RhdGFDb252ZXJ0ZXIucGFyc2VVcGRhdGVWYXJhcmdzKCdXcml0ZUJhdGNoLnVwZGF0ZScsIGZpZWxkT3JVcGRhdGVEYXRhLCB2YWx1ZSwgbW9yZUZpZWxkc0FuZFZhbHVlcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB2YWxpZGF0ZUV4YWN0TnVtYmVyT2ZBcmdzKCdXcml0ZUJhdGNoLnVwZGF0ZScsIGFyZ3VtZW50cywgMik7XHJcbiAgICAgICAgICAgIHJlZiA9IHZhbGlkYXRlUmVmZXJlbmNlKCdXcml0ZUJhdGNoLnVwZGF0ZScsIGRvY3VtZW50UmVmLCB0aGlzLl9maXJlc3RvcmUpO1xyXG4gICAgICAgICAgICBwYXJzZWQgPSB0aGlzLl9maXJlc3RvcmUuX2RhdGFDb252ZXJ0ZXIucGFyc2VVcGRhdGVEYXRhKCdXcml0ZUJhdGNoLnVwZGF0ZScsIGZpZWxkT3JVcGRhdGVEYXRhKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fbXV0YXRpb25zID0gdGhpcy5fbXV0YXRpb25zLmNvbmNhdChwYXJzZWQudG9NdXRhdGlvbnMocmVmLl9rZXksIFByZWNvbmRpdGlvbi5leGlzdHModHJ1ZSkpKTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH07XHJcbiAgICBXcml0ZUJhdGNoLnByb3RvdHlwZS5kZWxldGUgPSBmdW5jdGlvbiAoZG9jdW1lbnRSZWYpIHtcclxuICAgICAgICB2YWxpZGF0ZUV4YWN0TnVtYmVyT2ZBcmdzKCdXcml0ZUJhdGNoLmRlbGV0ZScsIGFyZ3VtZW50cywgMSk7XHJcbiAgICAgICAgdGhpcy52ZXJpZnlOb3RDb21taXR0ZWQoKTtcclxuICAgICAgICB2YXIgcmVmID0gdmFsaWRhdGVSZWZlcmVuY2UoJ1dyaXRlQmF0Y2guZGVsZXRlJywgZG9jdW1lbnRSZWYsIHRoaXMuX2ZpcmVzdG9yZSk7XHJcbiAgICAgICAgdGhpcy5fbXV0YXRpb25zID0gdGhpcy5fbXV0YXRpb25zLmNvbmNhdChuZXcgRGVsZXRlTXV0YXRpb24ocmVmLl9rZXksIFByZWNvbmRpdGlvbi5OT05FKSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9O1xyXG4gICAgV3JpdGVCYXRjaC5wcm90b3R5cGUuY29tbWl0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0c2xpYi5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy52ZXJpZnlOb3RDb21taXR0ZWQoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2NvbW1pdHRlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5fbXV0YXRpb25zLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdGhpcy5fZmlyZXN0b3JlLmVuc3VyZUNsaWVudENvbmZpZ3VyZWQoKS53cml0ZSh0aGlzLl9tdXRhdGlvbnMpXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgV3JpdGVCYXRjaC5wcm90b3R5cGUudmVyaWZ5Tm90Q29tbWl0dGVkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICh0aGlzLl9jb21taXR0ZWQpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuRkFJTEVEX1BSRUNPTkRJVElPTiwgJ0Egd3JpdGUgYmF0Y2ggY2FuIG5vIGxvbmdlciBiZSB1c2VkIGFmdGVyIGNvbW1pdCgpICcgK1xyXG4gICAgICAgICAgICAgICAgJ2hhcyBiZWVuIGNhbGxlZC4nKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFdyaXRlQmF0Y2g7XHJcbn0oKSk7XHJcbi8qKlxyXG4gKiBBIHJlZmVyZW5jZSB0byBhIHBhcnRpY3VsYXIgZG9jdW1lbnQgaW4gYSBjb2xsZWN0aW9uIGluIHRoZSBkYXRhYmFzZS5cclxuICovXHJcbnZhciBEb2N1bWVudFJlZmVyZW5jZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIERvY3VtZW50UmVmZXJlbmNlKF9rZXksIGZpcmVzdG9yZSwgX2NvbnZlcnRlcikge1xyXG4gICAgICAgIHRoaXMuX2tleSA9IF9rZXk7XHJcbiAgICAgICAgdGhpcy5maXJlc3RvcmUgPSBmaXJlc3RvcmU7XHJcbiAgICAgICAgdGhpcy5fY29udmVydGVyID0gX2NvbnZlcnRlcjtcclxuICAgICAgICB0aGlzLl9maXJlc3RvcmVDbGllbnQgPSB0aGlzLmZpcmVzdG9yZS5lbnN1cmVDbGllbnRDb25maWd1cmVkKCk7XHJcbiAgICB9XHJcbiAgICBEb2N1bWVudFJlZmVyZW5jZS5mb3JQYXRoID0gZnVuY3Rpb24gKHBhdGgsIGZpcmVzdG9yZSwgY29udmVydGVyKSB7XHJcbiAgICAgICAgaWYgKHBhdGgubGVuZ3RoICUgMiAhPT0gMCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5JTlZBTElEX0FSR1VNRU5ULCAnSW52YWxpZCBkb2N1bWVudCByZWZlcmVuY2UuIERvY3VtZW50ICcgK1xyXG4gICAgICAgICAgICAgICAgJ3JlZmVyZW5jZXMgbXVzdCBoYXZlIGFuIGV2ZW4gbnVtYmVyIG9mIHNlZ21lbnRzLCBidXQgJyArXHJcbiAgICAgICAgICAgICAgICAocGF0aC5jYW5vbmljYWxTdHJpbmcoKSArIFwiIGhhcyBcIiArIHBhdGgubGVuZ3RoKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBuZXcgRG9jdW1lbnRSZWZlcmVuY2UobmV3IERvY3VtZW50S2V5KHBhdGgpLCBmaXJlc3RvcmUsIGNvbnZlcnRlcik7XHJcbiAgICB9O1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KERvY3VtZW50UmVmZXJlbmNlLnByb3RvdHlwZSwgXCJpZFwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9rZXkucGF0aC5sYXN0U2VnbWVudCgpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KERvY3VtZW50UmVmZXJlbmNlLnByb3RvdHlwZSwgXCJwYXJlbnRcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IENvbGxlY3Rpb25SZWZlcmVuY2UodGhpcy5fa2V5LnBhdGgucG9wTGFzdCgpLCB0aGlzLmZpcmVzdG9yZSwgdGhpcy5fY29udmVydGVyKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShEb2N1bWVudFJlZmVyZW5jZS5wcm90b3R5cGUsIFwicGF0aFwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9rZXkucGF0aC5jYW5vbmljYWxTdHJpbmcoKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIERvY3VtZW50UmVmZXJlbmNlLnByb3RvdHlwZS5jb2xsZWN0aW9uID0gZnVuY3Rpb24gKHBhdGhTdHJpbmcpIHtcclxuICAgICAgICB2YWxpZGF0ZUV4YWN0TnVtYmVyT2ZBcmdzKCdEb2N1bWVudFJlZmVyZW5jZS5jb2xsZWN0aW9uJywgYXJndW1lbnRzLCAxKTtcclxuICAgICAgICB2YWxpZGF0ZUFyZ1R5cGUoJ0RvY3VtZW50UmVmZXJlbmNlLmNvbGxlY3Rpb24nLCAnbm9uLWVtcHR5IHN0cmluZycsIDEsIHBhdGhTdHJpbmcpO1xyXG4gICAgICAgIGlmICghcGF0aFN0cmluZykge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5JTlZBTElEX0FSR1VNRU5ULCAnTXVzdCBwcm92aWRlIGEgbm9uLWVtcHR5IGNvbGxlY3Rpb24gbmFtZSB0byBjb2xsZWN0aW9uKCknKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIHBhdGggPSBSZXNvdXJjZVBhdGguZnJvbVN0cmluZyhwYXRoU3RyaW5nKTtcclxuICAgICAgICByZXR1cm4gbmV3IENvbGxlY3Rpb25SZWZlcmVuY2UodGhpcy5fa2V5LnBhdGguY2hpbGQocGF0aCksIHRoaXMuZmlyZXN0b3JlKTtcclxuICAgIH07XHJcbiAgICBEb2N1bWVudFJlZmVyZW5jZS5wcm90b3R5cGUuaXNFcXVhbCA9IGZ1bmN0aW9uIChvdGhlcikge1xyXG4gICAgICAgIGlmICghKG90aGVyIGluc3RhbmNlb2YgRG9jdW1lbnRSZWZlcmVuY2UpKSB7XHJcbiAgICAgICAgICAgIHRocm93IGludmFsaWRDbGFzc0Vycm9yKCdpc0VxdWFsJywgJ0RvY3VtZW50UmVmZXJlbmNlJywgMSwgb3RoZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gKHRoaXMuZmlyZXN0b3JlID09PSBvdGhlci5maXJlc3RvcmUgJiZcclxuICAgICAgICAgICAgdGhpcy5fa2V5LmlzRXF1YWwob3RoZXIuX2tleSkgJiZcclxuICAgICAgICAgICAgdGhpcy5fY29udmVydGVyID09PSBvdGhlci5fY29udmVydGVyKTtcclxuICAgIH07XHJcbiAgICBEb2N1bWVudFJlZmVyZW5jZS5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24gKHZhbHVlLCBvcHRpb25zKSB7XHJcbiAgICAgICAgdmFsaWRhdGVCZXR3ZWVuTnVtYmVyT2ZBcmdzKCdEb2N1bWVudFJlZmVyZW5jZS5zZXQnLCBhcmd1bWVudHMsIDEsIDIpO1xyXG4gICAgICAgIG9wdGlvbnMgPSB2YWxpZGF0ZVNldE9wdGlvbnMoJ0RvY3VtZW50UmVmZXJlbmNlLnNldCcsIG9wdGlvbnMpO1xyXG4gICAgICAgIHZhciBfYSA9IGFwcGx5RmlyZXN0b3JlRGF0YUNvbnZlcnRlcih0aGlzLl9jb252ZXJ0ZXIsIHZhbHVlLCAnRG9jdW1lbnRSZWZlcmVuY2Uuc2V0JyksIGNvbnZlcnRlZFZhbHVlID0gX2FbMF0sIGZ1bmN0aW9uTmFtZSA9IF9hWzFdO1xyXG4gICAgICAgIHZhciBwYXJzZWQgPSBvcHRpb25zLm1lcmdlIHx8IG9wdGlvbnMubWVyZ2VGaWVsZHNcclxuICAgICAgICAgICAgPyB0aGlzLmZpcmVzdG9yZS5fZGF0YUNvbnZlcnRlci5wYXJzZU1lcmdlRGF0YShmdW5jdGlvbk5hbWUsIGNvbnZlcnRlZFZhbHVlLCBvcHRpb25zLm1lcmdlRmllbGRzKVxyXG4gICAgICAgICAgICA6IHRoaXMuZmlyZXN0b3JlLl9kYXRhQ29udmVydGVyLnBhcnNlU2V0RGF0YShmdW5jdGlvbk5hbWUsIGNvbnZlcnRlZFZhbHVlKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZmlyZXN0b3JlQ2xpZW50LndyaXRlKHBhcnNlZC50b011dGF0aW9ucyh0aGlzLl9rZXksIFByZWNvbmRpdGlvbi5OT05FKSk7XHJcbiAgICB9O1xyXG4gICAgRG9jdW1lbnRSZWZlcmVuY2UucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uIChmaWVsZE9yVXBkYXRlRGF0YSwgdmFsdWUpIHtcclxuICAgICAgICB2YXIgbW9yZUZpZWxkc0FuZFZhbHVlcyA9IFtdO1xyXG4gICAgICAgIGZvciAodmFyIF9pID0gMjsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIG1vcmVGaWVsZHNBbmRWYWx1ZXNbX2kgLSAyXSA9IGFyZ3VtZW50c1tfaV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBwYXJzZWQ7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBmaWVsZE9yVXBkYXRlRGF0YSA9PT0gJ3N0cmluZycgfHxcclxuICAgICAgICAgICAgZmllbGRPclVwZGF0ZURhdGEgaW5zdGFuY2VvZiBGaWVsZFBhdGgkMSkge1xyXG4gICAgICAgICAgICB2YWxpZGF0ZUF0TGVhc3ROdW1iZXJPZkFyZ3MoJ0RvY3VtZW50UmVmZXJlbmNlLnVwZGF0ZScsIGFyZ3VtZW50cywgMik7XHJcbiAgICAgICAgICAgIHBhcnNlZCA9IHRoaXMuZmlyZXN0b3JlLl9kYXRhQ29udmVydGVyLnBhcnNlVXBkYXRlVmFyYXJncygnRG9jdW1lbnRSZWZlcmVuY2UudXBkYXRlJywgZmllbGRPclVwZGF0ZURhdGEsIHZhbHVlLCBtb3JlRmllbGRzQW5kVmFsdWVzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHZhbGlkYXRlRXhhY3ROdW1iZXJPZkFyZ3MoJ0RvY3VtZW50UmVmZXJlbmNlLnVwZGF0ZScsIGFyZ3VtZW50cywgMSk7XHJcbiAgICAgICAgICAgIHBhcnNlZCA9IHRoaXMuZmlyZXN0b3JlLl9kYXRhQ29udmVydGVyLnBhcnNlVXBkYXRlRGF0YSgnRG9jdW1lbnRSZWZlcmVuY2UudXBkYXRlJywgZmllbGRPclVwZGF0ZURhdGEpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5fZmlyZXN0b3JlQ2xpZW50LndyaXRlKHBhcnNlZC50b011dGF0aW9ucyh0aGlzLl9rZXksIFByZWNvbmRpdGlvbi5leGlzdHModHJ1ZSkpKTtcclxuICAgIH07XHJcbiAgICBEb2N1bWVudFJlZmVyZW5jZS5wcm90b3R5cGUuZGVsZXRlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhbGlkYXRlRXhhY3ROdW1iZXJPZkFyZ3MoJ0RvY3VtZW50UmVmZXJlbmNlLmRlbGV0ZScsIGFyZ3VtZW50cywgMCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ZpcmVzdG9yZUNsaWVudC53cml0ZShbXHJcbiAgICAgICAgICAgIG5ldyBEZWxldGVNdXRhdGlvbih0aGlzLl9rZXksIFByZWNvbmRpdGlvbi5OT05FKVxyXG4gICAgICAgIF0pO1xyXG4gICAgfTtcclxuICAgIERvY3VtZW50UmVmZXJlbmNlLnByb3RvdHlwZS5vblNuYXBzaG90ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBhcmdzID0gW107XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YWxpZGF0ZUJldHdlZW5OdW1iZXJPZkFyZ3MoJ0RvY3VtZW50UmVmZXJlbmNlLm9uU25hcHNob3QnLCBhcmd1bWVudHMsIDEsIDQpO1xyXG4gICAgICAgIHZhciBvcHRpb25zID0ge1xyXG4gICAgICAgICAgICBpbmNsdWRlTWV0YWRhdGFDaGFuZ2VzOiBmYWxzZVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdmFyIG9ic2VydmVyO1xyXG4gICAgICAgIHZhciBjdXJyQXJnID0gMDtcclxuICAgICAgICBpZiAodHlwZW9mIGFyZ3NbY3VyckFyZ10gPT09ICdvYmplY3QnICYmXHJcbiAgICAgICAgICAgICFpc1BhcnRpYWxPYnNlcnZlcihhcmdzW2N1cnJBcmddKSkge1xyXG4gICAgICAgICAgICBvcHRpb25zID0gYXJnc1tjdXJyQXJnXTtcclxuICAgICAgICAgICAgdmFsaWRhdGVPcHRpb25OYW1lcygnRG9jdW1lbnRSZWZlcmVuY2Uub25TbmFwc2hvdCcsIG9wdGlvbnMsIFtcclxuICAgICAgICAgICAgICAgICdpbmNsdWRlTWV0YWRhdGFDaGFuZ2VzJ1xyXG4gICAgICAgICAgICBdKTtcclxuICAgICAgICAgICAgdmFsaWRhdGVOYW1lZE9wdGlvbmFsVHlwZSgnRG9jdW1lbnRSZWZlcmVuY2Uub25TbmFwc2hvdCcsICdib29sZWFuJywgJ2luY2x1ZGVNZXRhZGF0YUNoYW5nZXMnLCBvcHRpb25zLmluY2x1ZGVNZXRhZGF0YUNoYW5nZXMpO1xyXG4gICAgICAgICAgICBjdXJyQXJnKys7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBpbnRlcm5hbE9wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgIGluY2x1ZGVNZXRhZGF0YUNoYW5nZXM6IG9wdGlvbnMuaW5jbHVkZU1ldGFkYXRhQ2hhbmdlc1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgaWYgKGlzUGFydGlhbE9ic2VydmVyKGFyZ3NbY3VyckFyZ10pKSB7XHJcbiAgICAgICAgICAgIG9ic2VydmVyID0gYXJnc1tjdXJyQXJnXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHZhbGlkYXRlQXJnVHlwZSgnRG9jdW1lbnRSZWZlcmVuY2Uub25TbmFwc2hvdCcsICdmdW5jdGlvbicsIGN1cnJBcmcsIGFyZ3NbY3VyckFyZ10pO1xyXG4gICAgICAgICAgICB2YWxpZGF0ZU9wdGlvbmFsQXJnVHlwZSgnRG9jdW1lbnRSZWZlcmVuY2Uub25TbmFwc2hvdCcsICdmdW5jdGlvbicsIGN1cnJBcmcgKyAxLCBhcmdzW2N1cnJBcmcgKyAxXSk7XHJcbiAgICAgICAgICAgIHZhbGlkYXRlT3B0aW9uYWxBcmdUeXBlKCdEb2N1bWVudFJlZmVyZW5jZS5vblNuYXBzaG90JywgJ2Z1bmN0aW9uJywgY3VyckFyZyArIDIsIGFyZ3NbY3VyckFyZyArIDJdKTtcclxuICAgICAgICAgICAgb2JzZXJ2ZXIgPSB7XHJcbiAgICAgICAgICAgICAgICBuZXh0OiBhcmdzW2N1cnJBcmddLFxyXG4gICAgICAgICAgICAgICAgZXJyb3I6IGFyZ3NbY3VyckFyZyArIDFdLFxyXG4gICAgICAgICAgICAgICAgY29tcGxldGU6IGFyZ3NbY3VyckFyZyArIDJdXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLm9uU25hcHNob3RJbnRlcm5hbChpbnRlcm5hbE9wdGlvbnMsIG9ic2VydmVyKTtcclxuICAgIH07XHJcbiAgICBEb2N1bWVudFJlZmVyZW5jZS5wcm90b3R5cGUub25TbmFwc2hvdEludGVybmFsID0gZnVuY3Rpb24gKG9wdGlvbnMsIG9ic2VydmVyKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgZXJySGFuZGxlciA9IGZ1bmN0aW9uIChlcnIpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignVW5jYXVnaHQgRXJyb3IgaW4gb25TbmFwc2hvdDonLCBlcnIpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgaWYgKG9ic2VydmVyLmVycm9yKSB7XHJcbiAgICAgICAgICAgIGVyckhhbmRsZXIgPSBvYnNlcnZlci5lcnJvci5iaW5kKG9ic2VydmVyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGFzeW5jT2JzZXJ2ZXIgPSBuZXcgQXN5bmNPYnNlcnZlcih7XHJcbiAgICAgICAgICAgIG5leHQ6IGZ1bmN0aW9uIChzbmFwc2hvdCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKG9ic2VydmVyLm5leHQpIHtcclxuICAgICAgICAgICAgICAgICAgICBhc3NlcnQoc25hcHNob3QuZG9jcy5zaXplIDw9IDEsICdUb28gbWFueSBkb2N1bWVudHMgcmV0dXJuZWQgb24gYSBkb2N1bWVudCBxdWVyeScpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBkb2MgPSBzbmFwc2hvdC5kb2NzLmdldChfdGhpcy5fa2V5KTtcclxuICAgICAgICAgICAgICAgICAgICBvYnNlcnZlci5uZXh0KG5ldyBEb2N1bWVudFNuYXBzaG90KF90aGlzLmZpcmVzdG9yZSwgX3RoaXMuX2tleSwgZG9jLCBzbmFwc2hvdC5mcm9tQ2FjaGUsIHNuYXBzaG90Lmhhc1BlbmRpbmdXcml0ZXMsIF90aGlzLl9jb252ZXJ0ZXIpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZXJyb3I6IGVyckhhbmRsZXJcclxuICAgICAgICB9KTtcclxuICAgICAgICB2YXIgaW50ZXJuYWxMaXN0ZW5lciA9IHRoaXMuX2ZpcmVzdG9yZUNsaWVudC5saXN0ZW4oUXVlcnkuYXRQYXRoKHRoaXMuX2tleS5wYXRoKSwgYXN5bmNPYnNlcnZlciwgb3B0aW9ucyk7XHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgYXN5bmNPYnNlcnZlci5tdXRlKCk7XHJcbiAgICAgICAgICAgIF90aGlzLl9maXJlc3RvcmVDbGllbnQudW5saXN0ZW4oaW50ZXJuYWxMaXN0ZW5lcik7XHJcbiAgICAgICAgfTtcclxuICAgIH07XHJcbiAgICBEb2N1bWVudFJlZmVyZW5jZS5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhbGlkYXRlQmV0d2Vlbk51bWJlck9mQXJncygnRG9jdW1lbnRSZWZlcmVuY2UuZ2V0JywgYXJndW1lbnRzLCAwLCAxKTtcclxuICAgICAgICB2YWxpZGF0ZUdldE9wdGlvbnMoJ0RvY3VtZW50UmVmZXJlbmNlLmdldCcsIG9wdGlvbnMpO1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMuc291cmNlID09PSAnY2FjaGUnKSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5maXJlc3RvcmVcclxuICAgICAgICAgICAgICAgICAgICAuZW5zdXJlQ2xpZW50Q29uZmlndXJlZCgpXHJcbiAgICAgICAgICAgICAgICAgICAgLmdldERvY3VtZW50RnJvbUxvY2FsQ2FjaGUoX3RoaXMuX2tleSlcclxuICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoZG9jKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShuZXcgRG9jdW1lbnRTbmFwc2hvdChfdGhpcy5maXJlc3RvcmUsIF90aGlzLl9rZXksIGRvYywgXHJcbiAgICAgICAgICAgICAgICAgICAgLypmcm9tQ2FjaGU9Ki8gdHJ1ZSwgZG9jIGluc3RhbmNlb2YgRG9jdW1lbnQgPyBkb2MuaGFzTG9jYWxNdXRhdGlvbnMgOiBmYWxzZSwgX3RoaXMuX2NvbnZlcnRlcikpO1xyXG4gICAgICAgICAgICAgICAgfSwgcmVqZWN0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLmdldFZpYVNuYXBzaG90TGlzdGVuZXIocmVzb2x2ZSwgcmVqZWN0LCBvcHRpb25zKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIERvY3VtZW50UmVmZXJlbmNlLnByb3RvdHlwZS5nZXRWaWFTbmFwc2hvdExpc3RlbmVyID0gZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCwgb3B0aW9ucykge1xyXG4gICAgICAgIHZhciB1bmxpc3RlbiA9IHRoaXMub25TbmFwc2hvdEludGVybmFsKHtcclxuICAgICAgICAgICAgaW5jbHVkZU1ldGFkYXRhQ2hhbmdlczogdHJ1ZSxcclxuICAgICAgICAgICAgd2FpdEZvclN5bmNXaGVuT25saW5lOiB0cnVlXHJcbiAgICAgICAgfSwge1xyXG4gICAgICAgICAgICBuZXh0OiBmdW5jdGlvbiAoc25hcCkge1xyXG4gICAgICAgICAgICAgICAgLy8gUmVtb3ZlIHF1ZXJ5IGZpcnN0IGJlZm9yZSBwYXNzaW5nIGV2ZW50IHRvIHVzZXIgdG8gYXZvaWRcclxuICAgICAgICAgICAgICAgIC8vIHVzZXIgYWN0aW9ucyBhZmZlY3RpbmcgdGhlIG5vdyBzdGFsZSBxdWVyeS5cclxuICAgICAgICAgICAgICAgIHVubGlzdGVuKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXNuYXAuZXhpc3RzICYmIHNuYXAubWV0YWRhdGEuZnJvbUNhY2hlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gVE9ETyhkaW1vbmQpOiBJZiB3ZSdyZSBvbmxpbmUgYW5kIHRoZSBkb2N1bWVudCBkb2Vzbid0XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gZXhpc3QgdGhlbiB3ZSByZXNvbHZlIHdpdGggYSBkb2MuZXhpc3RzIHNldCB0byBmYWxzZS4gSWZcclxuICAgICAgICAgICAgICAgICAgICAvLyB3ZSdyZSBvZmZsaW5lIGhvd2V2ZXIsIHdlIHJlamVjdCB0aGUgUHJvbWlzZSBpbiB0aGlzXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY2FzZS4gVHdvIG9wdGlvbnM6IDEpIENhY2hlIHRoZSBuZWdhdGl2ZSByZXNwb25zZSBmcm9tXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhlIHNlcnZlciBzbyB3ZSBjYW4gZGVsaXZlciB0aGF0IGV2ZW4gd2hlbiB5b3UncmVcclxuICAgICAgICAgICAgICAgICAgICAvLyBvZmZsaW5lIDIpIEFjdHVhbGx5IHJlamVjdCB0aGUgUHJvbWlzZSBpbiB0aGUgb25saW5lIGNhc2VcclxuICAgICAgICAgICAgICAgICAgICAvLyBpZiB0aGUgZG9jdW1lbnQgZG9lc24ndCBleGlzdC5cclxuICAgICAgICAgICAgICAgICAgICByZWplY3QobmV3IEZpcmVzdG9yZUVycm9yKENvZGUuVU5BVkFJTEFCTEUsICdGYWlsZWQgdG8gZ2V0IGRvY3VtZW50IGJlY2F1c2UgdGhlIGNsaWVudCBpcyAnICsgJ29mZmxpbmUuJykpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoc25hcC5leGlzdHMgJiZcclxuICAgICAgICAgICAgICAgICAgICBzbmFwLm1ldGFkYXRhLmZyb21DYWNoZSAmJlxyXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnMgJiZcclxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zLnNvdXJjZSA9PT0gJ3NlcnZlcicpIHtcclxuICAgICAgICAgICAgICAgICAgICByZWplY3QobmV3IEZpcmVzdG9yZUVycm9yKENvZGUuVU5BVkFJTEFCTEUsICdGYWlsZWQgdG8gZ2V0IGRvY3VtZW50IGZyb20gc2VydmVyLiAoSG93ZXZlciwgdGhpcyAnICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ2RvY3VtZW50IGRvZXMgZXhpc3QgaW4gdGhlIGxvY2FsIGNhY2hlLiBSdW4gYWdhaW4gJyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICd3aXRob3V0IHNldHRpbmcgc291cmNlIHRvIFwic2VydmVyXCIgdG8gJyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICdyZXRyaWV2ZSB0aGUgY2FjaGVkIGRvY3VtZW50LiknKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHNuYXApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBlcnJvcjogcmVqZWN0XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgRG9jdW1lbnRSZWZlcmVuY2UucHJvdG90eXBlLndpdGhDb252ZXJ0ZXIgPSBmdW5jdGlvbiAoY29udmVydGVyKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBEb2N1bWVudFJlZmVyZW5jZSh0aGlzLl9rZXksIHRoaXMuZmlyZXN0b3JlLCBjb252ZXJ0ZXIpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBEb2N1bWVudFJlZmVyZW5jZTtcclxufSgpKTtcclxudmFyIFNuYXBzaG90TWV0YWRhdGEgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBTbmFwc2hvdE1ldGFkYXRhKGhhc1BlbmRpbmdXcml0ZXMsIGZyb21DYWNoZSkge1xyXG4gICAgICAgIHRoaXMuaGFzUGVuZGluZ1dyaXRlcyA9IGhhc1BlbmRpbmdXcml0ZXM7XHJcbiAgICAgICAgdGhpcy5mcm9tQ2FjaGUgPSBmcm9tQ2FjaGU7XHJcbiAgICB9XHJcbiAgICBTbmFwc2hvdE1ldGFkYXRhLnByb3RvdHlwZS5pc0VxdWFsID0gZnVuY3Rpb24gKG90aGVyKSB7XHJcbiAgICAgICAgcmV0dXJuICh0aGlzLmhhc1BlbmRpbmdXcml0ZXMgPT09IG90aGVyLmhhc1BlbmRpbmdXcml0ZXMgJiZcclxuICAgICAgICAgICAgdGhpcy5mcm9tQ2FjaGUgPT09IG90aGVyLmZyb21DYWNoZSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFNuYXBzaG90TWV0YWRhdGE7XHJcbn0oKSk7XHJcbnZhciBEb2N1bWVudFNuYXBzaG90ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gRG9jdW1lbnRTbmFwc2hvdChfZmlyZXN0b3JlLCBfa2V5LCBfZG9jdW1lbnQsIF9mcm9tQ2FjaGUsIF9oYXNQZW5kaW5nV3JpdGVzLCBfY29udmVydGVyKSB7XHJcbiAgICAgICAgdGhpcy5fZmlyZXN0b3JlID0gX2ZpcmVzdG9yZTtcclxuICAgICAgICB0aGlzLl9rZXkgPSBfa2V5O1xyXG4gICAgICAgIHRoaXMuX2RvY3VtZW50ID0gX2RvY3VtZW50O1xyXG4gICAgICAgIHRoaXMuX2Zyb21DYWNoZSA9IF9mcm9tQ2FjaGU7XHJcbiAgICAgICAgdGhpcy5faGFzUGVuZGluZ1dyaXRlcyA9IF9oYXNQZW5kaW5nV3JpdGVzO1xyXG4gICAgICAgIHRoaXMuX2NvbnZlcnRlciA9IF9jb252ZXJ0ZXI7XHJcbiAgICB9XHJcbiAgICBEb2N1bWVudFNuYXBzaG90LnByb3RvdHlwZS5kYXRhID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcclxuICAgICAgICB2YWxpZGF0ZUJldHdlZW5OdW1iZXJPZkFyZ3MoJ0RvY3VtZW50U25hcHNob3QuZGF0YScsIGFyZ3VtZW50cywgMCwgMSk7XHJcbiAgICAgICAgb3B0aW9ucyA9IHZhbGlkYXRlU25hcHNob3RPcHRpb25zKCdEb2N1bWVudFNuYXBzaG90LmRhdGEnLCBvcHRpb25zKTtcclxuICAgICAgICBpZiAoIXRoaXMuX2RvY3VtZW50KSB7XHJcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBXZSBvbmx5IHdhbnQgdG8gdXNlIHRoZSBjb252ZXJ0ZXIgYW5kIGNyZWF0ZSBhIG5ldyBEb2N1bWVudFNuYXBzaG90XHJcbiAgICAgICAgICAgIC8vIGlmIGEgY29udmVydGVyIGhhcyBiZWVuIHByb3ZpZGVkLlxyXG4gICAgICAgICAgICBpZiAodGhpcy5fY29udmVydGVyKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgc25hcHNob3QgPSBuZXcgUXVlcnlEb2N1bWVudFNuYXBzaG90KHRoaXMuX2ZpcmVzdG9yZSwgdGhpcy5fa2V5LCB0aGlzLl9kb2N1bWVudCwgdGhpcy5fZnJvbUNhY2hlLCB0aGlzLl9oYXNQZW5kaW5nV3JpdGVzKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9jb252ZXJ0ZXIuZnJvbUZpcmVzdG9yZShzbmFwc2hvdCwgb3B0aW9ucyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy50b0pTT2JqZWN0KHRoaXMuX2RvY3VtZW50LmRhdGEoKSwgRmllbGRWYWx1ZU9wdGlvbnMuZnJvbVNuYXBzaG90T3B0aW9ucyhvcHRpb25zLCB0aGlzLl9maXJlc3RvcmUuX2FyZVRpbWVzdGFtcHNJblNuYXBzaG90c0VuYWJsZWQoKSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIERvY3VtZW50U25hcHNob3QucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uIChmaWVsZFBhdGgsIG9wdGlvbnMpIHtcclxuICAgICAgICB2YWxpZGF0ZUJldHdlZW5OdW1iZXJPZkFyZ3MoJ0RvY3VtZW50U25hcHNob3QuZ2V0JywgYXJndW1lbnRzLCAxLCAyKTtcclxuICAgICAgICBvcHRpb25zID0gdmFsaWRhdGVTbmFwc2hvdE9wdGlvbnMoJ0RvY3VtZW50U25hcHNob3QuZ2V0Jywgb3B0aW9ucyk7XHJcbiAgICAgICAgaWYgKHRoaXMuX2RvY3VtZW50KSB7XHJcbiAgICAgICAgICAgIHZhciB2YWx1ZSA9IHRoaXMuX2RvY3VtZW50XHJcbiAgICAgICAgICAgICAgICAuZGF0YSgpXHJcbiAgICAgICAgICAgICAgICAuZmllbGQoZmllbGRQYXRoRnJvbUFyZ3VtZW50KCdEb2N1bWVudFNuYXBzaG90LmdldCcsIGZpZWxkUGF0aCkpO1xyXG4gICAgICAgICAgICBpZiAodmFsdWUgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnRvSlNWYWx1ZSh2YWx1ZSwgRmllbGRWYWx1ZU9wdGlvbnMuZnJvbVNuYXBzaG90T3B0aW9ucyhvcHRpb25zLCB0aGlzLl9maXJlc3RvcmUuX2FyZVRpbWVzdGFtcHNJblNuYXBzaG90c0VuYWJsZWQoKSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICB9O1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KERvY3VtZW50U25hcHNob3QucHJvdG90eXBlLCBcImlkXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2tleS5wYXRoLmxhc3RTZWdtZW50KCk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoRG9jdW1lbnRTbmFwc2hvdC5wcm90b3R5cGUsIFwicmVmXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBEb2N1bWVudFJlZmVyZW5jZSh0aGlzLl9rZXksIHRoaXMuX2ZpcmVzdG9yZSwgdGhpcy5fY29udmVydGVyKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShEb2N1bWVudFNuYXBzaG90LnByb3RvdHlwZSwgXCJleGlzdHNcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZG9jdW1lbnQgIT09IG51bGw7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoRG9jdW1lbnRTbmFwc2hvdC5wcm90b3R5cGUsIFwibWV0YWRhdGFcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFNuYXBzaG90TWV0YWRhdGEodGhpcy5faGFzUGVuZGluZ1dyaXRlcywgdGhpcy5fZnJvbUNhY2hlKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIERvY3VtZW50U25hcHNob3QucHJvdG90eXBlLmlzRXF1YWwgPSBmdW5jdGlvbiAob3RoZXIpIHtcclxuICAgICAgICBpZiAoIShvdGhlciBpbnN0YW5jZW9mIERvY3VtZW50U25hcHNob3QpKSB7XHJcbiAgICAgICAgICAgIHRocm93IGludmFsaWRDbGFzc0Vycm9yKCdpc0VxdWFsJywgJ0RvY3VtZW50U25hcHNob3QnLCAxLCBvdGhlcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiAodGhpcy5fZmlyZXN0b3JlID09PSBvdGhlci5fZmlyZXN0b3JlICYmXHJcbiAgICAgICAgICAgIHRoaXMuX2Zyb21DYWNoZSA9PT0gb3RoZXIuX2Zyb21DYWNoZSAmJlxyXG4gICAgICAgICAgICB0aGlzLl9rZXkuaXNFcXVhbChvdGhlci5fa2V5KSAmJlxyXG4gICAgICAgICAgICAodGhpcy5fZG9jdW1lbnQgPT09IG51bGxcclxuICAgICAgICAgICAgICAgID8gb3RoZXIuX2RvY3VtZW50ID09PSBudWxsXHJcbiAgICAgICAgICAgICAgICA6IHRoaXMuX2RvY3VtZW50LmlzRXF1YWwob3RoZXIuX2RvY3VtZW50KSkgJiZcclxuICAgICAgICAgICAgdGhpcy5fY29udmVydGVyID09PSBvdGhlci5fY29udmVydGVyKTtcclxuICAgIH07XHJcbiAgICBEb2N1bWVudFNuYXBzaG90LnByb3RvdHlwZS50b0pTT2JqZWN0ID0gZnVuY3Rpb24gKGRhdGEsIG9wdGlvbnMpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhciByZXN1bHQgPSB7fTtcclxuICAgICAgICBkYXRhLmZvckVhY2goZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcclxuICAgICAgICAgICAgcmVzdWx0W2tleV0gPSBfdGhpcy50b0pTVmFsdWUodmFsdWUsIG9wdGlvbnMpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9O1xyXG4gICAgRG9jdW1lbnRTbmFwc2hvdC5wcm90b3R5cGUudG9KU1ZhbHVlID0gZnVuY3Rpb24gKHZhbHVlLCBvcHRpb25zKSB7XHJcbiAgICAgICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgT2JqZWN0VmFsdWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMudG9KU09iamVjdCh2YWx1ZSwgb3B0aW9ucyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHZhbHVlIGluc3RhbmNlb2YgQXJyYXlWYWx1ZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy50b0pTQXJyYXkodmFsdWUsIG9wdGlvbnMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh2YWx1ZSBpbnN0YW5jZW9mIFJlZlZhbHVlKSB7XHJcbiAgICAgICAgICAgIHZhciBrZXkgPSB2YWx1ZS52YWx1ZShvcHRpb25zKTtcclxuICAgICAgICAgICAgdmFyIGRhdGFiYXNlID0gdGhpcy5fZmlyZXN0b3JlLmVuc3VyZUNsaWVudENvbmZpZ3VyZWQoKS5kYXRhYmFzZUlkKCk7XHJcbiAgICAgICAgICAgIGlmICghdmFsdWUuZGF0YWJhc2VJZC5pc0VxdWFsKGRhdGFiYXNlKSkge1xyXG4gICAgICAgICAgICAgICAgLy8gVE9ETyhiLzY0MTMwMjAyKTogU29tZWhvdyBzdXBwb3J0IGZvcmVpZ24gcmVmZXJlbmNlcy5cclxuICAgICAgICAgICAgICAgIGVycm9yKFwiRG9jdW1lbnQgXCIgKyB0aGlzLl9rZXkucGF0aCArIFwiIGNvbnRhaW5zIGEgZG9jdW1lbnQgXCIgK1xyXG4gICAgICAgICAgICAgICAgICAgIFwicmVmZXJlbmNlIHdpdGhpbiBhIGRpZmZlcmVudCBkYXRhYmFzZSAoXCIgK1xyXG4gICAgICAgICAgICAgICAgICAgICh2YWx1ZS5kYXRhYmFzZUlkLnByb2plY3RJZCArIFwiL1wiICsgdmFsdWUuZGF0YWJhc2VJZC5kYXRhYmFzZSArIFwiKSB3aGljaCBpcyBub3QgXCIpICtcclxuICAgICAgICAgICAgICAgICAgICBcInN1cHBvcnRlZC4gSXQgd2lsbCBiZSB0cmVhdGVkIGFzIGEgcmVmZXJlbmNlIGluIHRoZSBjdXJyZW50IFwiICtcclxuICAgICAgICAgICAgICAgICAgICAoXCJkYXRhYmFzZSAoXCIgKyBkYXRhYmFzZS5wcm9qZWN0SWQgKyBcIi9cIiArIGRhdGFiYXNlLmRhdGFiYXNlICsgXCIpIFwiKSArXHJcbiAgICAgICAgICAgICAgICAgICAgXCJpbnN0ZWFkLlwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IERvY3VtZW50UmVmZXJlbmNlKGtleSwgdGhpcy5fZmlyZXN0b3JlLCB0aGlzLl9jb252ZXJ0ZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlLnZhbHVlKG9wdGlvbnMpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBEb2N1bWVudFNuYXBzaG90LnByb3RvdHlwZS50b0pTQXJyYXkgPSBmdW5jdGlvbiAoZGF0YSwgb3B0aW9ucykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIGRhdGEuaW50ZXJuYWxWYWx1ZS5tYXAoZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy50b0pTVmFsdWUodmFsdWUsIG9wdGlvbnMpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBEb2N1bWVudFNuYXBzaG90O1xyXG59KCkpO1xyXG52YXIgUXVlcnlEb2N1bWVudFNuYXBzaG90ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgdHNsaWIuX19leHRlbmRzKFF1ZXJ5RG9jdW1lbnRTbmFwc2hvdCwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIFF1ZXJ5RG9jdW1lbnRTbmFwc2hvdCgpIHtcclxuICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XHJcbiAgICB9XHJcbiAgICBRdWVyeURvY3VtZW50U25hcHNob3QucHJvdG90eXBlLmRhdGEgPSBmdW5jdGlvbiAob3B0aW9ucykge1xyXG4gICAgICAgIHZhciBkYXRhID0gX3N1cGVyLnByb3RvdHlwZS5kYXRhLmNhbGwodGhpcywgb3B0aW9ucyk7XHJcbiAgICAgICAgYXNzZXJ0KGRhdGEgIT09IHVuZGVmaW5lZCwgJ0RvY3VtZW50IGluIGEgUXVlcnlEb2N1bWVudFNuYXBzaG90IHNob3VsZCBleGlzdCcpO1xyXG4gICAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBRdWVyeURvY3VtZW50U25hcHNob3Q7XHJcbn0oRG9jdW1lbnRTbmFwc2hvdCkpO1xyXG52YXIgUXVlcnkkMSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFF1ZXJ5KF9xdWVyeSwgZmlyZXN0b3JlLCBfY29udmVydGVyKSB7XHJcbiAgICAgICAgdGhpcy5fcXVlcnkgPSBfcXVlcnk7XHJcbiAgICAgICAgdGhpcy5maXJlc3RvcmUgPSBmaXJlc3RvcmU7XHJcbiAgICAgICAgdGhpcy5fY29udmVydGVyID0gX2NvbnZlcnRlcjtcclxuICAgIH1cclxuICAgIFF1ZXJ5LnByb3RvdHlwZS53aGVyZSA9IGZ1bmN0aW9uIChmaWVsZCwgb3BTdHIsIHZhbHVlKSB7XHJcbiAgICAgICAgdmFsaWRhdGVFeGFjdE51bWJlck9mQXJncygnUXVlcnkud2hlcmUnLCBhcmd1bWVudHMsIDMpO1xyXG4gICAgICAgIHZhbGlkYXRlRGVmaW5lZCgnUXVlcnkud2hlcmUnLCAzLCB2YWx1ZSk7XHJcbiAgICAgICAgLy8gRW51bWVyYXRlZCBmcm9tIHRoZSBXaGVyZUZpbHRlck9wIHR5cGUgaW4gaW5kZXguZC50cy5cclxuICAgICAgICB2YXIgd2hlcmVGaWx0ZXJPcEVudW1zID0gW1xyXG4gICAgICAgICAgICAnPCcsXHJcbiAgICAgICAgICAgICc8PScsXHJcbiAgICAgICAgICAgICc9PScsXHJcbiAgICAgICAgICAgICc+PScsXHJcbiAgICAgICAgICAgICc+JyxcclxuICAgICAgICAgICAgJ2FycmF5LWNvbnRhaW5zJyxcclxuICAgICAgICAgICAgJ2luJyxcclxuICAgICAgICAgICAgJ2FycmF5LWNvbnRhaW5zLWFueSdcclxuICAgICAgICBdO1xyXG4gICAgICAgIHZhbGlkYXRlU3RyaW5nRW51bSgnUXVlcnkud2hlcmUnLCB3aGVyZUZpbHRlck9wRW51bXMsIDIsIG9wU3RyKTtcclxuICAgICAgICB2YXIgZmllbGRWYWx1ZTtcclxuICAgICAgICB2YXIgZmllbGRQYXRoID0gZmllbGRQYXRoRnJvbUFyZ3VtZW50KCdRdWVyeS53aGVyZScsIGZpZWxkKTtcclxuICAgICAgICB2YXIgb3BlcmF0b3IgPSBPcGVyYXRvci5mcm9tU3RyaW5nKG9wU3RyKTtcclxuICAgICAgICBpZiAoZmllbGRQYXRoLmlzS2V5RmllbGQoKSkge1xyXG4gICAgICAgICAgICBpZiAob3BlcmF0b3IgPT09IE9wZXJhdG9yLkFSUkFZX0NPTlRBSU5TIHx8XHJcbiAgICAgICAgICAgICAgICBvcGVyYXRvciA9PT0gT3BlcmF0b3IuQVJSQVlfQ09OVEFJTlNfQU5ZKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5JTlZBTElEX0FSR1VNRU5ULCBcIkludmFsaWQgUXVlcnkuIFlvdSBjYW4ndCBwZXJmb3JtICdcIiArIG9wZXJhdG9yLnRvU3RyaW5nKCkgKyBcIicgXCIgK1xyXG4gICAgICAgICAgICAgICAgICAgICdxdWVyaWVzIG9uIEZpZWxkUGF0aC5kb2N1bWVudElkKCkuJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAob3BlcmF0b3IgPT09IE9wZXJhdG9yLklOKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnZhbGlkYXRlRGlzanVuY3RpdmVGaWx0ZXJFbGVtZW50cyh2YWx1ZSwgb3BlcmF0b3IpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHJlZmVyZW5jZUxpc3QgPSBbXTtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSB2YWx1ZTsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgYXJyYXlWYWx1ZSA9IF9hW19pXTtcclxuICAgICAgICAgICAgICAgICAgICByZWZlcmVuY2VMaXN0LnB1c2godGhpcy5wYXJzZURvY3VtZW50SWRWYWx1ZShhcnJheVZhbHVlKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBmaWVsZFZhbHVlID0gbmV3IEFycmF5VmFsdWUocmVmZXJlbmNlTGlzdCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBmaWVsZFZhbHVlID0gdGhpcy5wYXJzZURvY3VtZW50SWRWYWx1ZSh2YWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGlmIChvcGVyYXRvciA9PT0gT3BlcmF0b3IuSU4gfHxcclxuICAgICAgICAgICAgICAgIG9wZXJhdG9yID09PSBPcGVyYXRvci5BUlJBWV9DT05UQUlOU19BTlkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudmFsaWRhdGVEaXNqdW5jdGl2ZUZpbHRlckVsZW1lbnRzKHZhbHVlLCBvcGVyYXRvcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZmllbGRWYWx1ZSA9IHRoaXMuZmlyZXN0b3JlLl9kYXRhQ29udmVydGVyLnBhcnNlUXVlcnlWYWx1ZSgnUXVlcnkud2hlcmUnLCB2YWx1ZSwgXHJcbiAgICAgICAgICAgIC8vIFdlIG9ubHkgYWxsb3cgbmVzdGVkIGFycmF5cyBmb3IgSU4gcXVlcmllcy5cclxuICAgICAgICAgICAgLyoqIGFsbG93QXJyYXlzID0gKi8gb3BlcmF0b3IgPT09IE9wZXJhdG9yLklOID8gdHJ1ZSA6IGZhbHNlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGZpbHRlciA9IEZpZWxkRmlsdGVyLmNyZWF0ZShmaWVsZFBhdGgsIG9wZXJhdG9yLCBmaWVsZFZhbHVlKTtcclxuICAgICAgICB0aGlzLnZhbGlkYXRlTmV3RmlsdGVyKGZpbHRlcik7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBRdWVyeSh0aGlzLl9xdWVyeS5hZGRGaWx0ZXIoZmlsdGVyKSwgdGhpcy5maXJlc3RvcmUsIHRoaXMuX2NvbnZlcnRlcik7XHJcbiAgICB9O1xyXG4gICAgUXVlcnkucHJvdG90eXBlLm9yZGVyQnkgPSBmdW5jdGlvbiAoZmllbGQsIGRpcmVjdGlvblN0cikge1xyXG4gICAgICAgIHZhbGlkYXRlQmV0d2Vlbk51bWJlck9mQXJncygnUXVlcnkub3JkZXJCeScsIGFyZ3VtZW50cywgMSwgMik7XHJcbiAgICAgICAgdmFsaWRhdGVPcHRpb25hbEFyZ1R5cGUoJ1F1ZXJ5Lm9yZGVyQnknLCAnbm9uLWVtcHR5IHN0cmluZycsIDIsIGRpcmVjdGlvblN0cik7XHJcbiAgICAgICAgdmFyIGRpcmVjdGlvbjtcclxuICAgICAgICBpZiAoZGlyZWN0aW9uU3RyID09PSB1bmRlZmluZWQgfHwgZGlyZWN0aW9uU3RyID09PSAnYXNjJykge1xyXG4gICAgICAgICAgICBkaXJlY3Rpb24gPSBEaXJlY3Rpb24uQVNDRU5ESU5HO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChkaXJlY3Rpb25TdHIgPT09ICdkZXNjJykge1xyXG4gICAgICAgICAgICBkaXJlY3Rpb24gPSBEaXJlY3Rpb24uREVTQ0VORElORztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLklOVkFMSURfQVJHVU1FTlQsIFwiRnVuY3Rpb24gUXVlcnkub3JkZXJCeSgpIGhhcyB1bmtub3duIGRpcmVjdGlvbiAnXCIgKyBkaXJlY3Rpb25TdHIgKyBcIicsIFwiICtcclxuICAgICAgICAgICAgICAgIFwiZXhwZWN0ZWQgJ2FzYycgb3IgJ2Rlc2MnLlwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuX3F1ZXJ5LnN0YXJ0QXQgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuSU5WQUxJRF9BUkdVTUVOVCwgJ0ludmFsaWQgcXVlcnkuIFlvdSBtdXN0IG5vdCBjYWxsIFF1ZXJ5LnN0YXJ0QXQoKSBvciAnICtcclxuICAgICAgICAgICAgICAgICdRdWVyeS5zdGFydEFmdGVyKCkgYmVmb3JlIGNhbGxpbmcgUXVlcnkub3JkZXJCeSgpLicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5fcXVlcnkuZW5kQXQgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuSU5WQUxJRF9BUkdVTUVOVCwgJ0ludmFsaWQgcXVlcnkuIFlvdSBtdXN0IG5vdCBjYWxsIFF1ZXJ5LmVuZEF0KCkgb3IgJyArXHJcbiAgICAgICAgICAgICAgICAnUXVlcnkuZW5kQmVmb3JlKCkgYmVmb3JlIGNhbGxpbmcgUXVlcnkub3JkZXJCeSgpLicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgZmllbGRQYXRoID0gZmllbGRQYXRoRnJvbUFyZ3VtZW50KCdRdWVyeS5vcmRlckJ5JywgZmllbGQpO1xyXG4gICAgICAgIHZhciBvcmRlckJ5ID0gbmV3IE9yZGVyQnkoZmllbGRQYXRoLCBkaXJlY3Rpb24pO1xyXG4gICAgICAgIHRoaXMudmFsaWRhdGVOZXdPcmRlckJ5KG9yZGVyQnkpO1xyXG4gICAgICAgIHJldHVybiBuZXcgUXVlcnkodGhpcy5fcXVlcnkuYWRkT3JkZXJCeShvcmRlckJ5KSwgdGhpcy5maXJlc3RvcmUsIHRoaXMuX2NvbnZlcnRlcik7XHJcbiAgICB9O1xyXG4gICAgUXVlcnkucHJvdG90eXBlLmxpbWl0ID0gZnVuY3Rpb24gKG4pIHtcclxuICAgICAgICB2YWxpZGF0ZUV4YWN0TnVtYmVyT2ZBcmdzKCdRdWVyeS5saW1pdCcsIGFyZ3VtZW50cywgMSk7XHJcbiAgICAgICAgdmFsaWRhdGVBcmdUeXBlKCdRdWVyeS5saW1pdCcsICdudW1iZXInLCAxLCBuKTtcclxuICAgICAgICB2YWxpZGF0ZVBvc2l0aXZlTnVtYmVyKCdRdWVyeS5saW1pdCcsIDEsIG4pO1xyXG4gICAgICAgIHJldHVybiBuZXcgUXVlcnkodGhpcy5fcXVlcnkud2l0aExpbWl0VG9GaXJzdChuKSwgdGhpcy5maXJlc3RvcmUsIHRoaXMuX2NvbnZlcnRlcik7XHJcbiAgICB9O1xyXG4gICAgUXVlcnkucHJvdG90eXBlLmxpbWl0VG9MYXN0ID0gZnVuY3Rpb24gKG4pIHtcclxuICAgICAgICB2YWxpZGF0ZUV4YWN0TnVtYmVyT2ZBcmdzKCdRdWVyeS5saW1pdFRvTGFzdCcsIGFyZ3VtZW50cywgMSk7XHJcbiAgICAgICAgdmFsaWRhdGVBcmdUeXBlKCdRdWVyeS5saW1pdFRvTGFzdCcsICdudW1iZXInLCAxLCBuKTtcclxuICAgICAgICB2YWxpZGF0ZVBvc2l0aXZlTnVtYmVyKCdRdWVyeS5saW1pdFRvTGFzdCcsIDEsIG4pO1xyXG4gICAgICAgIHJldHVybiBuZXcgUXVlcnkodGhpcy5fcXVlcnkud2l0aExpbWl0VG9MYXN0KG4pLCB0aGlzLmZpcmVzdG9yZSwgdGhpcy5fY29udmVydGVyKTtcclxuICAgIH07XHJcbiAgICBRdWVyeS5wcm90b3R5cGUuc3RhcnRBdCA9IGZ1bmN0aW9uIChkb2NPckZpZWxkKSB7XHJcbiAgICAgICAgdmFyIGZpZWxkcyA9IFtdO1xyXG4gICAgICAgIGZvciAodmFyIF9pID0gMTsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIGZpZWxkc1tfaSAtIDFdID0gYXJndW1lbnRzW19pXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFsaWRhdGVBdExlYXN0TnVtYmVyT2ZBcmdzKCdRdWVyeS5zdGFydEF0JywgYXJndW1lbnRzLCAxKTtcclxuICAgICAgICB2YXIgYm91bmQgPSB0aGlzLmJvdW5kRnJvbURvY09yRmllbGRzKCdRdWVyeS5zdGFydEF0JywgZG9jT3JGaWVsZCwgZmllbGRzLCBcclxuICAgICAgICAvKmJlZm9yZT0qLyB0cnVlKTtcclxuICAgICAgICByZXR1cm4gbmV3IFF1ZXJ5KHRoaXMuX3F1ZXJ5LndpdGhTdGFydEF0KGJvdW5kKSwgdGhpcy5maXJlc3RvcmUsIHRoaXMuX2NvbnZlcnRlcik7XHJcbiAgICB9O1xyXG4gICAgUXVlcnkucHJvdG90eXBlLnN0YXJ0QWZ0ZXIgPSBmdW5jdGlvbiAoZG9jT3JGaWVsZCkge1xyXG4gICAgICAgIHZhciBmaWVsZHMgPSBbXTtcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDE7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICBmaWVsZHNbX2kgLSAxXSA9IGFyZ3VtZW50c1tfaV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhbGlkYXRlQXRMZWFzdE51bWJlck9mQXJncygnUXVlcnkuc3RhcnRBZnRlcicsIGFyZ3VtZW50cywgMSk7XHJcbiAgICAgICAgdmFyIGJvdW5kID0gdGhpcy5ib3VuZEZyb21Eb2NPckZpZWxkcygnUXVlcnkuc3RhcnRBZnRlcicsIGRvY09yRmllbGQsIGZpZWxkcywgXHJcbiAgICAgICAgLypiZWZvcmU9Ki8gZmFsc2UpO1xyXG4gICAgICAgIHJldHVybiBuZXcgUXVlcnkodGhpcy5fcXVlcnkud2l0aFN0YXJ0QXQoYm91bmQpLCB0aGlzLmZpcmVzdG9yZSwgdGhpcy5fY29udmVydGVyKTtcclxuICAgIH07XHJcbiAgICBRdWVyeS5wcm90b3R5cGUuZW5kQmVmb3JlID0gZnVuY3Rpb24gKGRvY09yRmllbGQpIHtcclxuICAgICAgICB2YXIgZmllbGRzID0gW107XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAxOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgZmllbGRzW19pIC0gMV0gPSBhcmd1bWVudHNbX2ldO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YWxpZGF0ZUF0TGVhc3ROdW1iZXJPZkFyZ3MoJ1F1ZXJ5LmVuZEJlZm9yZScsIGFyZ3VtZW50cywgMSk7XHJcbiAgICAgICAgdmFyIGJvdW5kID0gdGhpcy5ib3VuZEZyb21Eb2NPckZpZWxkcygnUXVlcnkuZW5kQmVmb3JlJywgZG9jT3JGaWVsZCwgZmllbGRzLCBcclxuICAgICAgICAvKmJlZm9yZT0qLyB0cnVlKTtcclxuICAgICAgICByZXR1cm4gbmV3IFF1ZXJ5KHRoaXMuX3F1ZXJ5LndpdGhFbmRBdChib3VuZCksIHRoaXMuZmlyZXN0b3JlLCB0aGlzLl9jb252ZXJ0ZXIpO1xyXG4gICAgfTtcclxuICAgIFF1ZXJ5LnByb3RvdHlwZS5lbmRBdCA9IGZ1bmN0aW9uIChkb2NPckZpZWxkKSB7XHJcbiAgICAgICAgdmFyIGZpZWxkcyA9IFtdO1xyXG4gICAgICAgIGZvciAodmFyIF9pID0gMTsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIGZpZWxkc1tfaSAtIDFdID0gYXJndW1lbnRzW19pXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFsaWRhdGVBdExlYXN0TnVtYmVyT2ZBcmdzKCdRdWVyeS5lbmRBdCcsIGFyZ3VtZW50cywgMSk7XHJcbiAgICAgICAgdmFyIGJvdW5kID0gdGhpcy5ib3VuZEZyb21Eb2NPckZpZWxkcygnUXVlcnkuZW5kQXQnLCBkb2NPckZpZWxkLCBmaWVsZHMsIFxyXG4gICAgICAgIC8qYmVmb3JlPSovIGZhbHNlKTtcclxuICAgICAgICByZXR1cm4gbmV3IFF1ZXJ5KHRoaXMuX3F1ZXJ5LndpdGhFbmRBdChib3VuZCksIHRoaXMuZmlyZXN0b3JlLCB0aGlzLl9jb252ZXJ0ZXIpO1xyXG4gICAgfTtcclxuICAgIFF1ZXJ5LnByb3RvdHlwZS5pc0VxdWFsID0gZnVuY3Rpb24gKG90aGVyKSB7XHJcbiAgICAgICAgaWYgKCEob3RoZXIgaW5zdGFuY2VvZiBRdWVyeSkpIHtcclxuICAgICAgICAgICAgdGhyb3cgaW52YWxpZENsYXNzRXJyb3IoJ2lzRXF1YWwnLCAnUXVlcnknLCAxLCBvdGhlcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiAodGhpcy5maXJlc3RvcmUgPT09IG90aGVyLmZpcmVzdG9yZSAmJiB0aGlzLl9xdWVyeS5pc0VxdWFsKG90aGVyLl9xdWVyeSkpO1xyXG4gICAgfTtcclxuICAgIFF1ZXJ5LnByb3RvdHlwZS53aXRoQ29udmVydGVyID0gZnVuY3Rpb24gKGNvbnZlcnRlcikge1xyXG4gICAgICAgIHJldHVybiBuZXcgUXVlcnkodGhpcy5fcXVlcnksIHRoaXMuZmlyZXN0b3JlLCBjb252ZXJ0ZXIpO1xyXG4gICAgfTtcclxuICAgIC8qKiBIZWxwZXIgZnVuY3Rpb24gdG8gY3JlYXRlIGEgYm91bmQgZnJvbSBhIGRvY3VtZW50IG9yIGZpZWxkcyAqL1xyXG4gICAgUXVlcnkucHJvdG90eXBlLmJvdW5kRnJvbURvY09yRmllbGRzID0gZnVuY3Rpb24gKG1ldGhvZE5hbWUsIGRvY09yRmllbGQsIGZpZWxkcywgYmVmb3JlKSB7XHJcbiAgICAgICAgdmFsaWRhdGVEZWZpbmVkKG1ldGhvZE5hbWUsIDEsIGRvY09yRmllbGQpO1xyXG4gICAgICAgIGlmIChkb2NPckZpZWxkIGluc3RhbmNlb2YgRG9jdW1lbnRTbmFwc2hvdCkge1xyXG4gICAgICAgICAgICBpZiAoZmllbGRzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLklOVkFMSURfQVJHVU1FTlQsIFwiVG9vIG1hbnkgYXJndW1lbnRzIHByb3ZpZGVkIHRvIFwiICsgbWV0aG9kTmFtZSArIFwiKCkuXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciBzbmFwID0gZG9jT3JGaWVsZDtcclxuICAgICAgICAgICAgaWYgKCFzbmFwLmV4aXN0cykge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuTk9UX0ZPVU5ELCBcIkNhbid0IHVzZSBhIERvY3VtZW50U25hcHNob3QgdGhhdCBkb2Vzbid0IGV4aXN0IGZvciBcIiArXHJcbiAgICAgICAgICAgICAgICAgICAgKG1ldGhvZE5hbWUgKyBcIigpLlwiKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYm91bmRGcm9tRG9jdW1lbnQobWV0aG9kTmFtZSwgc25hcC5fZG9jdW1lbnQsIGJlZm9yZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB2YXIgYWxsRmllbGRzID0gW2RvY09yRmllbGRdLmNvbmNhdChmaWVsZHMpO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5ib3VuZEZyb21GaWVsZHMobWV0aG9kTmFtZSwgYWxsRmllbGRzLCBiZWZvcmUpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZSBhIEJvdW5kIGZyb20gYSBxdWVyeSBhbmQgYSBkb2N1bWVudC5cclxuICAgICAqXHJcbiAgICAgKiBOb3RlIHRoYXQgdGhlIEJvdW5kIHdpbGwgYWx3YXlzIGluY2x1ZGUgdGhlIGtleSBvZiB0aGUgZG9jdW1lbnRcclxuICAgICAqIGFuZCBzbyBvbmx5IHRoZSBwcm92aWRlZCBkb2N1bWVudCB3aWxsIGNvbXBhcmUgZXF1YWwgdG8gdGhlIHJldHVybmVkXHJcbiAgICAgKiBwb3NpdGlvbi5cclxuICAgICAqXHJcbiAgICAgKiBXaWxsIHRocm93IGlmIHRoZSBkb2N1bWVudCBkb2VzIG5vdCBjb250YWluIGFsbCBmaWVsZHMgb2YgdGhlIG9yZGVyIGJ5XHJcbiAgICAgKiBvZiB0aGUgcXVlcnkgb3IgaWYgYW55IG9mIHRoZSBmaWVsZHMgaW4gdGhlIG9yZGVyIGJ5IGFyZSBhbiB1bmNvbW1pdHRlZFxyXG4gICAgICogc2VydmVyIHRpbWVzdGFtcC5cclxuICAgICAqL1xyXG4gICAgUXVlcnkucHJvdG90eXBlLmJvdW5kRnJvbURvY3VtZW50ID0gZnVuY3Rpb24gKG1ldGhvZE5hbWUsIGRvYywgYmVmb3JlKSB7XHJcbiAgICAgICAgdmFyIGNvbXBvbmVudHMgPSBbXTtcclxuICAgICAgICAvLyBCZWNhdXNlIHBlb3BsZSBleHBlY3QgdG8gY29udGludWUvZW5kIGEgcXVlcnkgYXQgdGhlIGV4YWN0IGRvY3VtZW50XHJcbiAgICAgICAgLy8gcHJvdmlkZWQsIHdlIG5lZWQgdG8gdXNlIHRoZSBpbXBsaWNpdCBzb3J0IG9yZGVyIHJhdGhlciB0aGFuIHRoZSBleHBsaWNpdFxyXG4gICAgICAgIC8vIHNvcnQgb3JkZXIsIGJlY2F1c2UgaXQncyBndWFyYW50ZWVkIHRvIGNvbnRhaW4gdGhlIGRvY3VtZW50IGtleS4gVGhhdCB3YXlcclxuICAgICAgICAvLyB0aGUgcG9zaXRpb24gYmVjb21lcyB1bmFtYmlndW91cyBhbmQgdGhlIHF1ZXJ5IGNvbnRpbnVlcy9lbmRzIGV4YWN0bHkgYXRcclxuICAgICAgICAvLyB0aGUgcHJvdmlkZWQgZG9jdW1lbnQuIFdpdGhvdXQgdGhlIGtleSAoYnkgdXNpbmcgdGhlIGV4cGxpY2l0IHNvcnRcclxuICAgICAgICAvLyBvcmRlcnMpLCBtdWx0aXBsZSBkb2N1bWVudHMgY291bGQgbWF0Y2ggdGhlIHBvc2l0aW9uLCB5aWVsZGluZyBkdXBsaWNhdGVcclxuICAgICAgICAvLyByZXN1bHRzLlxyXG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSB0aGlzLl9xdWVyeS5vcmRlckJ5OyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICB2YXIgb3JkZXJCeSA9IF9hW19pXTtcclxuICAgICAgICAgICAgaWYgKG9yZGVyQnkuZmllbGQuaXNLZXlGaWVsZCgpKSB7XHJcbiAgICAgICAgICAgICAgICBjb21wb25lbnRzLnB1c2gobmV3IFJlZlZhbHVlKHRoaXMuZmlyZXN0b3JlLl9kYXRhYmFzZUlkLCBkb2Mua2V5KSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSBkb2MuZmllbGQob3JkZXJCeS5maWVsZCk7XHJcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBTZXJ2ZXJUaW1lc3RhbXBWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLklOVkFMSURfQVJHVU1FTlQsICdJbnZhbGlkIHF1ZXJ5LiBZb3UgYXJlIHRyeWluZyB0byBzdGFydCBvciBlbmQgYSBxdWVyeSB1c2luZyBhICcgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnZG9jdW1lbnQgZm9yIHdoaWNoIHRoZSBmaWVsZCBcIicgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvcmRlckJ5LmZpZWxkICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ1wiIGlzIGFuIHVuY29tbWl0dGVkIHNlcnZlciB0aW1lc3RhbXAuIChTaW5jZSB0aGUgdmFsdWUgb2YgJyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICd0aGlzIGZpZWxkIGlzIHVua25vd24sIHlvdSBjYW5ub3Qgc3RhcnQvZW5kIGEgcXVlcnkgd2l0aCBpdC4pJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmICh2YWx1ZSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudHMucHVzaCh2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZmllbGQgPSBvcmRlckJ5LmZpZWxkLmNhbm9uaWNhbFN0cmluZygpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLklOVkFMSURfQVJHVU1FTlQsIFwiSW52YWxpZCBxdWVyeS4gWW91IGFyZSB0cnlpbmcgdG8gc3RhcnQgb3IgZW5kIGEgcXVlcnkgdXNpbmcgYSBcIiArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIChcImRvY3VtZW50IGZvciB3aGljaCB0aGUgZmllbGQgJ1wiICsgZmllbGQgKyBcIicgKHVzZWQgYXMgdGhlIFwiKSArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwib3JkZXJCeSkgZG9lcyBub3QgZXhpc3QuXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBuZXcgQm91bmQoY29tcG9uZW50cywgYmVmb3JlKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIENvbnZlcnRzIGEgbGlzdCBvZiBmaWVsZCB2YWx1ZXMgdG8gYSBCb3VuZCBmb3IgdGhlIGdpdmVuIHF1ZXJ5LlxyXG4gICAgICovXHJcbiAgICBRdWVyeS5wcm90b3R5cGUuYm91bmRGcm9tRmllbGRzID0gZnVuY3Rpb24gKG1ldGhvZE5hbWUsIHZhbHVlcywgYmVmb3JlKSB7XHJcbiAgICAgICAgLy8gVXNlIGV4cGxpY2l0IG9yZGVyIGJ5J3MgYmVjYXVzZSBpdCBoYXMgdG8gbWF0Y2ggdGhlIHF1ZXJ5IHRoZSB1c2VyIG1hZGVcclxuICAgICAgICB2YXIgb3JkZXJCeSA9IHRoaXMuX3F1ZXJ5LmV4cGxpY2l0T3JkZXJCeTtcclxuICAgICAgICBpZiAodmFsdWVzLmxlbmd0aCA+IG9yZGVyQnkubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLklOVkFMSURfQVJHVU1FTlQsIFwiVG9vIG1hbnkgYXJndW1lbnRzIHByb3ZpZGVkIHRvIFwiICsgbWV0aG9kTmFtZSArIFwiKCkuIFwiICtcclxuICAgICAgICAgICAgICAgIFwiVGhlIG51bWJlciBvZiBhcmd1bWVudHMgbXVzdCBiZSBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gdGhlIFwiICtcclxuICAgICAgICAgICAgICAgIFwibnVtYmVyIG9mIFF1ZXJ5Lm9yZGVyQnkoKSBjbGF1c2VzXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgY29tcG9uZW50cyA9IFtdO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdmFsdWVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciByYXdWYWx1ZSA9IHZhbHVlc1tpXTtcclxuICAgICAgICAgICAgdmFyIG9yZGVyQnlDb21wb25lbnQgPSBvcmRlckJ5W2ldO1xyXG4gICAgICAgICAgICBpZiAob3JkZXJCeUNvbXBvbmVudC5maWVsZC5pc0tleUZpZWxkKCkpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgcmF3VmFsdWUgIT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuSU5WQUxJRF9BUkdVTUVOVCwgXCJJbnZhbGlkIHF1ZXJ5LiBFeHBlY3RlZCBhIHN0cmluZyBmb3IgZG9jdW1lbnQgSUQgaW4gXCIgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAobWV0aG9kTmFtZSArIFwiKCksIGJ1dCBnb3QgYSBcIiArIHR5cGVvZiByYXdWYWx1ZSkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLl9xdWVyeS5pc0NvbGxlY3Rpb25Hcm91cFF1ZXJ5KCkgJiZcclxuICAgICAgICAgICAgICAgICAgICByYXdWYWx1ZS5pbmRleE9mKCcvJykgIT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuSU5WQUxJRF9BUkdVTUVOVCwgXCJJbnZhbGlkIHF1ZXJ5LiBXaGVuIHF1ZXJ5aW5nIGEgY29sbGVjdGlvbiBhbmQgb3JkZXJpbmcgYnkgRmllbGRQYXRoLmRvY3VtZW50SWQoKSwgXCIgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAoXCJ0aGUgdmFsdWUgcGFzc2VkIHRvIFwiICsgbWV0aG9kTmFtZSArIFwiKCkgbXVzdCBiZSBhIHBsYWluIGRvY3VtZW50IElELCBidXQgXCIpICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgKFwiJ1wiICsgcmF3VmFsdWUgKyBcIicgY29udGFpbnMgYSBzbGFzaC5cIikpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdmFyIHBhdGggPSB0aGlzLl9xdWVyeS5wYXRoLmNoaWxkKFJlc291cmNlUGF0aC5mcm9tU3RyaW5nKHJhd1ZhbHVlKSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoIURvY3VtZW50S2V5LmlzRG9jdW1lbnRLZXkocGF0aCkpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5JTlZBTElEX0FSR1VNRU5ULCBcIkludmFsaWQgcXVlcnkuIFdoZW4gcXVlcnlpbmcgYSBjb2xsZWN0aW9uIGdyb3VwIGFuZCBvcmRlcmluZyBieSBcIiArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIChcIkZpZWxkUGF0aC5kb2N1bWVudElkKCksIHRoZSB2YWx1ZSBwYXNzZWQgdG8gXCIgKyBtZXRob2ROYW1lICsgXCIoKSBtdXN0IHJlc3VsdCBpbiBhIFwiKSArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIChcInZhbGlkIGRvY3VtZW50IHBhdGgsIGJ1dCAnXCIgKyBwYXRoICsgXCInIGlzIG5vdCBiZWNhdXNlIGl0IGNvbnRhaW5zIGFuIG9kZCBudW1iZXIgXCIpICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJvZiBzZWdtZW50cy5cIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB2YXIga2V5ID0gbmV3IERvY3VtZW50S2V5KHBhdGgpO1xyXG4gICAgICAgICAgICAgICAgY29tcG9uZW50cy5wdXNoKG5ldyBSZWZWYWx1ZSh0aGlzLmZpcmVzdG9yZS5fZGF0YWJhc2VJZCwga2V5KSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgd3JhcHBlZCA9IHRoaXMuZmlyZXN0b3JlLl9kYXRhQ29udmVydGVyLnBhcnNlUXVlcnlWYWx1ZShtZXRob2ROYW1lLCByYXdWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICBjb21wb25lbnRzLnB1c2god3JhcHBlZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG5ldyBCb3VuZChjb21wb25lbnRzLCBiZWZvcmUpO1xyXG4gICAgfTtcclxuICAgIFF1ZXJ5LnByb3RvdHlwZS5vblNuYXBzaG90ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBhcmdzID0gW107XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YWxpZGF0ZUJldHdlZW5OdW1iZXJPZkFyZ3MoJ1F1ZXJ5Lm9uU25hcHNob3QnLCBhcmd1bWVudHMsIDEsIDQpO1xyXG4gICAgICAgIHZhciBvcHRpb25zID0ge307XHJcbiAgICAgICAgdmFyIG9ic2VydmVyO1xyXG4gICAgICAgIHZhciBjdXJyQXJnID0gMDtcclxuICAgICAgICBpZiAodHlwZW9mIGFyZ3NbY3VyckFyZ10gPT09ICdvYmplY3QnICYmXHJcbiAgICAgICAgICAgICFpc1BhcnRpYWxPYnNlcnZlcihhcmdzW2N1cnJBcmddKSkge1xyXG4gICAgICAgICAgICBvcHRpb25zID0gYXJnc1tjdXJyQXJnXTtcclxuICAgICAgICAgICAgdmFsaWRhdGVPcHRpb25OYW1lcygnUXVlcnkub25TbmFwc2hvdCcsIG9wdGlvbnMsIFtcclxuICAgICAgICAgICAgICAgICdpbmNsdWRlTWV0YWRhdGFDaGFuZ2VzJ1xyXG4gICAgICAgICAgICBdKTtcclxuICAgICAgICAgICAgdmFsaWRhdGVOYW1lZE9wdGlvbmFsVHlwZSgnUXVlcnkub25TbmFwc2hvdCcsICdib29sZWFuJywgJ2luY2x1ZGVNZXRhZGF0YUNoYW5nZXMnLCBvcHRpb25zLmluY2x1ZGVNZXRhZGF0YUNoYW5nZXMpO1xyXG4gICAgICAgICAgICBjdXJyQXJnKys7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChpc1BhcnRpYWxPYnNlcnZlcihhcmdzW2N1cnJBcmddKSkge1xyXG4gICAgICAgICAgICBvYnNlcnZlciA9IGFyZ3NbY3VyckFyZ107XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB2YWxpZGF0ZUFyZ1R5cGUoJ1F1ZXJ5Lm9uU25hcHNob3QnLCAnZnVuY3Rpb24nLCBjdXJyQXJnLCBhcmdzW2N1cnJBcmddKTtcclxuICAgICAgICAgICAgdmFsaWRhdGVPcHRpb25hbEFyZ1R5cGUoJ1F1ZXJ5Lm9uU25hcHNob3QnLCAnZnVuY3Rpb24nLCBjdXJyQXJnICsgMSwgYXJnc1tjdXJyQXJnICsgMV0pO1xyXG4gICAgICAgICAgICB2YWxpZGF0ZU9wdGlvbmFsQXJnVHlwZSgnUXVlcnkub25TbmFwc2hvdCcsICdmdW5jdGlvbicsIGN1cnJBcmcgKyAyLCBhcmdzW2N1cnJBcmcgKyAyXSk7XHJcbiAgICAgICAgICAgIG9ic2VydmVyID0ge1xyXG4gICAgICAgICAgICAgICAgbmV4dDogYXJnc1tjdXJyQXJnXSxcclxuICAgICAgICAgICAgICAgIGVycm9yOiBhcmdzW2N1cnJBcmcgKyAxXSxcclxuICAgICAgICAgICAgICAgIGNvbXBsZXRlOiBhcmdzW2N1cnJBcmcgKyAyXVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnZhbGlkYXRlSGFzRXhwbGljaXRPcmRlckJ5Rm9yTGltaXRUb0xhc3QodGhpcy5fcXVlcnkpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLm9uU25hcHNob3RJbnRlcm5hbChvcHRpb25zLCBvYnNlcnZlcik7XHJcbiAgICB9O1xyXG4gICAgUXVlcnkucHJvdG90eXBlLm9uU25hcHNob3RJbnRlcm5hbCA9IGZ1bmN0aW9uIChvcHRpb25zLCBvYnNlcnZlcikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIGVyckhhbmRsZXIgPSBmdW5jdGlvbiAoZXJyKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1VuY2F1Z2h0IEVycm9yIGluIG9uU25hcHNob3Q6JywgZXJyKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIGlmIChvYnNlcnZlci5lcnJvcikge1xyXG4gICAgICAgICAgICBlcnJIYW5kbGVyID0gb2JzZXJ2ZXIuZXJyb3IuYmluZChvYnNlcnZlcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBhc3luY09ic2VydmVyID0gbmV3IEFzeW5jT2JzZXJ2ZXIoe1xyXG4gICAgICAgICAgICBuZXh0OiBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAob2JzZXJ2ZXIubmV4dCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG9ic2VydmVyLm5leHQobmV3IFF1ZXJ5U25hcHNob3QoX3RoaXMuZmlyZXN0b3JlLCBfdGhpcy5fcXVlcnksIHJlc3VsdCwgX3RoaXMuX2NvbnZlcnRlcikpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBlcnJvcjogZXJySGFuZGxlclxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHZhciBmaXJlc3RvcmVDbGllbnQgPSB0aGlzLmZpcmVzdG9yZS5lbnN1cmVDbGllbnRDb25maWd1cmVkKCk7XHJcbiAgICAgICAgdmFyIGludGVybmFsTGlzdGVuZXIgPSBmaXJlc3RvcmVDbGllbnQubGlzdGVuKHRoaXMuX3F1ZXJ5LCBhc3luY09ic2VydmVyLCBvcHRpb25zKTtcclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBhc3luY09ic2VydmVyLm11dGUoKTtcclxuICAgICAgICAgICAgZmlyZXN0b3JlQ2xpZW50LnVubGlzdGVuKGludGVybmFsTGlzdGVuZXIpO1xyXG4gICAgICAgIH07XHJcbiAgICB9O1xyXG4gICAgUXVlcnkucHJvdG90eXBlLnZhbGlkYXRlSGFzRXhwbGljaXRPcmRlckJ5Rm9yTGltaXRUb0xhc3QgPSBmdW5jdGlvbiAocXVlcnkpIHtcclxuICAgICAgICBpZiAocXVlcnkuaGFzTGltaXRUb0xhc3QoKSAmJiBxdWVyeS5leHBsaWNpdE9yZGVyQnkubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLlVOSU1QTEVNRU5URUQsICdsaW1pdFRvTGFzdCgpIHF1ZXJpZXMgcmVxdWlyZSBzcGVjaWZ5aW5nIGF0IGxlYXN0IG9uZSBvcmRlckJ5KCkgY2xhdXNlJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFF1ZXJ5LnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAob3B0aW9ucykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFsaWRhdGVCZXR3ZWVuTnVtYmVyT2ZBcmdzKCdRdWVyeS5nZXQnLCBhcmd1bWVudHMsIDAsIDEpO1xyXG4gICAgICAgIHZhbGlkYXRlR2V0T3B0aW9ucygnUXVlcnkuZ2V0Jywgb3B0aW9ucyk7XHJcbiAgICAgICAgdGhpcy52YWxpZGF0ZUhhc0V4cGxpY2l0T3JkZXJCeUZvckxpbWl0VG9MYXN0KHRoaXMuX3F1ZXJ5KTtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLnNvdXJjZSA9PT0gJ2NhY2hlJykge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuZmlyZXN0b3JlXHJcbiAgICAgICAgICAgICAgICAgICAgLmVuc3VyZUNsaWVudENvbmZpZ3VyZWQoKVxyXG4gICAgICAgICAgICAgICAgICAgIC5nZXREb2N1bWVudHNGcm9tTG9jYWxDYWNoZShfdGhpcy5fcXVlcnkpXHJcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHZpZXdTbmFwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShuZXcgUXVlcnlTbmFwc2hvdChfdGhpcy5maXJlc3RvcmUsIF90aGlzLl9xdWVyeSwgdmlld1NuYXAsIF90aGlzLl9jb252ZXJ0ZXIpKTtcclxuICAgICAgICAgICAgICAgIH0sIHJlamVjdCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5nZXRWaWFTbmFwc2hvdExpc3RlbmVyKHJlc29sdmUsIHJlamVjdCwgb3B0aW9ucyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBRdWVyeS5wcm90b3R5cGUuZ2V0VmlhU25hcHNob3RMaXN0ZW5lciA9IGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QsIG9wdGlvbnMpIHtcclxuICAgICAgICB2YXIgdW5saXN0ZW4gPSB0aGlzLm9uU25hcHNob3RJbnRlcm5hbCh7XHJcbiAgICAgICAgICAgIGluY2x1ZGVNZXRhZGF0YUNoYW5nZXM6IHRydWUsXHJcbiAgICAgICAgICAgIHdhaXRGb3JTeW5jV2hlbk9ubGluZTogdHJ1ZVxyXG4gICAgICAgIH0sIHtcclxuICAgICAgICAgICAgbmV4dDogZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgLy8gUmVtb3ZlIHF1ZXJ5IGZpcnN0IGJlZm9yZSBwYXNzaW5nIGV2ZW50IHRvIHVzZXIgdG8gYXZvaWRcclxuICAgICAgICAgICAgICAgIC8vIHVzZXIgYWN0aW9ucyBhZmZlY3RpbmcgdGhlIG5vdyBzdGFsZSBxdWVyeS5cclxuICAgICAgICAgICAgICAgIHVubGlzdGVuKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0Lm1ldGFkYXRhLmZyb21DYWNoZSAmJlxyXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnMgJiZcclxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zLnNvdXJjZSA9PT0gJ3NlcnZlcicpIHtcclxuICAgICAgICAgICAgICAgICAgICByZWplY3QobmV3IEZpcmVzdG9yZUVycm9yKENvZGUuVU5BVkFJTEFCTEUsICdGYWlsZWQgdG8gZ2V0IGRvY3VtZW50cyBmcm9tIHNlcnZlci4gKEhvd2V2ZXIsIHRoZXNlICcgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnZG9jdW1lbnRzIG1heSBleGlzdCBpbiB0aGUgbG9jYWwgY2FjaGUuIFJ1biBhZ2FpbiAnICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ3dpdGhvdXQgc2V0dGluZyBzb3VyY2UgdG8gXCJzZXJ2ZXJcIiB0byAnICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ3JldHJpZXZlIHRoZSBjYWNoZWQgZG9jdW1lbnRzLiknKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHJlc3VsdCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGVycm9yOiByZWplY3RcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFBhcnNlcyB0aGUgZ2l2ZW4gZG9jdW1lbnRJZFZhbHVlIGludG8gYSBSZWZlcmVuY2VWYWx1ZSwgdGhyb3dpbmdcclxuICAgICAqIGFwcHJvcHJpYXRlIGVycm9ycyBpZiB0aGUgdmFsdWUgaXMgYW55dGhpbmcgb3RoZXIgdGhhbiBhIERvY3VtZW50UmVmZXJlbmNlXHJcbiAgICAgKiBvciBTdHJpbmcsIG9yIGlmIHRoZSBzdHJpbmcgaXMgbWFsZm9ybWVkLlxyXG4gICAgICovXHJcbiAgICBRdWVyeS5wcm90b3R5cGUucGFyc2VEb2N1bWVudElkVmFsdWUgPSBmdW5jdGlvbiAoZG9jdW1lbnRJZFZhbHVlKSB7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBkb2N1bWVudElkVmFsdWUgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgIGlmIChkb2N1bWVudElkVmFsdWUgPT09ICcnKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5JTlZBTElEX0FSR1VNRU5ULCAnSW52YWxpZCBxdWVyeS4gV2hlbiBxdWVyeWluZyB3aXRoIEZpZWxkUGF0aC5kb2N1bWVudElkKCksIHlvdSAnICtcclxuICAgICAgICAgICAgICAgICAgICAnbXVzdCBwcm92aWRlIGEgdmFsaWQgZG9jdW1lbnQgSUQsIGJ1dCBpdCB3YXMgYW4gZW1wdHkgc3RyaW5nLicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5fcXVlcnkuaXNDb2xsZWN0aW9uR3JvdXBRdWVyeSgpICYmXHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudElkVmFsdWUuaW5kZXhPZignLycpICE9PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuSU5WQUxJRF9BUkdVTUVOVCwgXCJJbnZhbGlkIHF1ZXJ5LiBXaGVuIHF1ZXJ5aW5nIGEgY29sbGVjdGlvbiBieSBcIiArXHJcbiAgICAgICAgICAgICAgICAgICAgXCJGaWVsZFBhdGguZG9jdW1lbnRJZCgpLCB5b3UgbXVzdCBwcm92aWRlIGEgcGxhaW4gZG9jdW1lbnQgSUQsIGJ1dCBcIiArXHJcbiAgICAgICAgICAgICAgICAgICAgKFwiJ1wiICsgZG9jdW1lbnRJZFZhbHVlICsgXCInIGNvbnRhaW5zIGEgJy8nIGNoYXJhY3Rlci5cIikpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciBwYXRoID0gdGhpcy5fcXVlcnkucGF0aC5jaGlsZChSZXNvdXJjZVBhdGguZnJvbVN0cmluZyhkb2N1bWVudElkVmFsdWUpKTtcclxuICAgICAgICAgICAgaWYgKCFEb2N1bWVudEtleS5pc0RvY3VtZW50S2V5KHBhdGgpKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5JTlZBTElEX0FSR1VNRU5ULCBcIkludmFsaWQgcXVlcnkuIFdoZW4gcXVlcnlpbmcgYSBjb2xsZWN0aW9uIGdyb3VwIGJ5IFwiICtcclxuICAgICAgICAgICAgICAgICAgICBcIkZpZWxkUGF0aC5kb2N1bWVudElkKCksIHRoZSB2YWx1ZSBwcm92aWRlZCBtdXN0IHJlc3VsdCBpbiBhIHZhbGlkIGRvY3VtZW50IHBhdGgsIFwiICtcclxuICAgICAgICAgICAgICAgICAgICAoXCJidXQgJ1wiICsgcGF0aCArIFwiJyBpcyBub3QgYmVjYXVzZSBpdCBoYXMgYW4gb2RkIG51bWJlciBvZiBzZWdtZW50cyAoXCIgKyBwYXRoLmxlbmd0aCArIFwiKS5cIikpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgUmVmVmFsdWUodGhpcy5maXJlc3RvcmUuX2RhdGFiYXNlSWQsIG5ldyBEb2N1bWVudEtleShwYXRoKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGRvY3VtZW50SWRWYWx1ZSBpbnN0YW5jZW9mIERvY3VtZW50UmVmZXJlbmNlKSB7XHJcbiAgICAgICAgICAgIHZhciByZWYgPSBkb2N1bWVudElkVmFsdWU7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgUmVmVmFsdWUodGhpcy5maXJlc3RvcmUuX2RhdGFiYXNlSWQsIHJlZi5fa2V5KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLklOVkFMSURfQVJHVU1FTlQsIFwiSW52YWxpZCBxdWVyeS4gV2hlbiBxdWVyeWluZyB3aXRoIEZpZWxkUGF0aC5kb2N1bWVudElkKCksIHlvdSBtdXN0IHByb3ZpZGUgYSB2YWxpZCBcIiArXHJcbiAgICAgICAgICAgICAgICBcInN0cmluZyBvciBhIERvY3VtZW50UmVmZXJlbmNlLCBidXQgaXQgd2FzOiBcIiArXHJcbiAgICAgICAgICAgICAgICAodmFsdWVEZXNjcmlwdGlvbihkb2N1bWVudElkVmFsdWUpICsgXCIuXCIpKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBWYWxpZGF0ZXMgdGhhdCB0aGUgdmFsdWUgcGFzc2VkIGludG8gYSBkaXNqdW5jdHJpdmUgZmlsdGVyIHNhdGlzZmllcyBhbGxcclxuICAgICAqIGFycmF5IHJlcXVpcmVtZW50cy5cclxuICAgICAqL1xyXG4gICAgUXVlcnkucHJvdG90eXBlLnZhbGlkYXRlRGlzanVuY3RpdmVGaWx0ZXJFbGVtZW50cyA9IGZ1bmN0aW9uICh2YWx1ZSwgb3BlcmF0b3IpIHtcclxuICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkodmFsdWUpIHx8IHZhbHVlLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5JTlZBTElEX0FSR1VNRU5ULCAnSW52YWxpZCBRdWVyeS4gQSBub24tZW1wdHkgYXJyYXkgaXMgcmVxdWlyZWQgZm9yICcgK1xyXG4gICAgICAgICAgICAgICAgKFwiJ1wiICsgb3BlcmF0b3IudG9TdHJpbmcoKSArIFwiJyBmaWx0ZXJzLlwiKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh2YWx1ZS5sZW5ndGggPiAxMCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5JTlZBTElEX0FSR1VNRU5ULCBcIkludmFsaWQgUXVlcnkuICdcIiArIG9wZXJhdG9yLnRvU3RyaW5nKCkgKyBcIicgZmlsdGVycyBzdXBwb3J0IGEgXCIgK1xyXG4gICAgICAgICAgICAgICAgJ21heGltdW0gb2YgMTAgZWxlbWVudHMgaW4gdGhlIHZhbHVlIGFycmF5LicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodmFsdWUuaW5kZXhPZihudWxsKSA+PSAwKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLklOVkFMSURfQVJHVU1FTlQsIFwiSW52YWxpZCBRdWVyeS4gJ1wiICsgb3BlcmF0b3IudG9TdHJpbmcoKSArIFwiJyBmaWx0ZXJzIGNhbm5vdCBjb250YWluICdudWxsJyBcIiArXHJcbiAgICAgICAgICAgICAgICAnaW4gdGhlIHZhbHVlIGFycmF5LicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodmFsdWUuZmlsdGVyKGZ1bmN0aW9uIChlbGVtZW50KSB7IHJldHVybiBOdW1iZXIuaXNOYU4oZWxlbWVudCk7IH0pLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuSU5WQUxJRF9BUkdVTUVOVCwgXCJJbnZhbGlkIFF1ZXJ5LiAnXCIgKyBvcGVyYXRvci50b1N0cmluZygpICsgXCInIGZpbHRlcnMgY2Fubm90IGNvbnRhaW4gJ05hTicgXCIgK1xyXG4gICAgICAgICAgICAgICAgJ2luIHRoZSB2YWx1ZSBhcnJheS4nKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgUXVlcnkucHJvdG90eXBlLnZhbGlkYXRlTmV3RmlsdGVyID0gZnVuY3Rpb24gKGZpbHRlcikge1xyXG4gICAgICAgIGlmIChmaWx0ZXIgaW5zdGFuY2VvZiBGaWVsZEZpbHRlcikge1xyXG4gICAgICAgICAgICB2YXIgYXJyYXlPcHMgPSBbT3BlcmF0b3IuQVJSQVlfQ09OVEFJTlMsIE9wZXJhdG9yLkFSUkFZX0NPTlRBSU5TX0FOWV07XHJcbiAgICAgICAgICAgIHZhciBkaXNqdW5jdGl2ZU9wcyA9IFtPcGVyYXRvci5JTiwgT3BlcmF0b3IuQVJSQVlfQ09OVEFJTlNfQU5ZXTtcclxuICAgICAgICAgICAgdmFyIGlzQXJyYXlPcCA9IGFycmF5T3BzLmluZGV4T2YoZmlsdGVyLm9wKSA+PSAwO1xyXG4gICAgICAgICAgICB2YXIgaXNEaXNqdW5jdGl2ZU9wID0gZGlzanVuY3RpdmVPcHMuaW5kZXhPZihmaWx0ZXIub3ApID49IDA7XHJcbiAgICAgICAgICAgIGlmIChmaWx0ZXIuaXNJbmVxdWFsaXR5KCkpIHtcclxuICAgICAgICAgICAgICAgIHZhciBleGlzdGluZ0ZpZWxkID0gdGhpcy5fcXVlcnkuZ2V0SW5lcXVhbGl0eUZpbHRlckZpZWxkKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXhpc3RpbmdGaWVsZCAhPT0gbnVsbCAmJiAhZXhpc3RpbmdGaWVsZC5pc0VxdWFsKGZpbHRlci5maWVsZCkpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5JTlZBTElEX0FSR1VNRU5ULCAnSW52YWxpZCBxdWVyeS4gQWxsIHdoZXJlIGZpbHRlcnMgd2l0aCBhbiBpbmVxdWFsaXR5JyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICcgKDwsIDw9LCA+LCBvciA+PSkgbXVzdCBiZSBvbiB0aGUgc2FtZSBmaWVsZC4gQnV0IHlvdSBoYXZlJyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIChcIiBpbmVxdWFsaXR5IGZpbHRlcnMgb24gJ1wiICsgZXhpc3RpbmdGaWVsZC50b1N0cmluZygpICsgXCInXCIpICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgKFwiIGFuZCAnXCIgKyBmaWx0ZXIuZmllbGQudG9TdHJpbmcoKSArIFwiJ1wiKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB2YXIgZmlyc3RPcmRlckJ5RmllbGQgPSB0aGlzLl9xdWVyeS5nZXRGaXJzdE9yZGVyQnlGaWVsZCgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGZpcnN0T3JkZXJCeUZpZWxkICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52YWxpZGF0ZU9yZGVyQnlBbmRJbmVxdWFsaXR5TWF0Y2goZmlsdGVyLmZpZWxkLCBmaXJzdE9yZGVyQnlGaWVsZCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoaXNEaXNqdW5jdGl2ZU9wIHx8IGlzQXJyYXlPcCkge1xyXG4gICAgICAgICAgICAgICAgLy8gWW91IGNhbiBoYXZlIGF0IG1vc3QgMSBkaXNqdW5jdGl2ZSBmaWx0ZXIgYW5kIDEgYXJyYXkgZmlsdGVyLiBDaGVjayBpZlxyXG4gICAgICAgICAgICAgICAgLy8gdGhlIG5ldyBmaWx0ZXIgY29uZmxpY3RzIHdpdGggYW4gZXhpc3Rpbmcgb25lLlxyXG4gICAgICAgICAgICAgICAgdmFyIGNvbmZsaWN0aW5nT3AgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgaWYgKGlzRGlzanVuY3RpdmVPcCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbmZsaWN0aW5nT3AgPSB0aGlzLl9xdWVyeS5maW5kRmlsdGVyT3BlcmF0b3IoZGlzanVuY3RpdmVPcHMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKGNvbmZsaWN0aW5nT3AgPT09IG51bGwgJiYgaXNBcnJheU9wKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uZmxpY3RpbmdPcCA9IHRoaXMuX3F1ZXJ5LmZpbmRGaWx0ZXJPcGVyYXRvcihhcnJheU9wcyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoY29uZmxpY3RpbmdPcCAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gV2Ugc3BlY2lhbCBjYXNlIHdoZW4gaXQncyBhIGR1cGxpY2F0ZSBvcCB0byBnaXZlIGEgc2xpZ2h0bHkgY2xlYXJlciBlcnJvciBtZXNzYWdlLlxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjb25mbGljdGluZ09wID09PSBmaWx0ZXIub3ApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuSU5WQUxJRF9BUkdVTUVOVCwgJ0ludmFsaWQgcXVlcnkuIFlvdSBjYW5ub3QgdXNlIG1vcmUgdGhhbiBvbmUgJyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoXCInXCIgKyBmaWx0ZXIub3AudG9TdHJpbmcoKSArIFwiJyBmaWx0ZXIuXCIpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLklOVkFMSURfQVJHVU1FTlQsIFwiSW52YWxpZCBxdWVyeS4gWW91IGNhbm5vdCB1c2UgJ1wiICsgZmlsdGVyLm9wLnRvU3RyaW5nKCkgKyBcIicgZmlsdGVycyBcIiArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoXCJ3aXRoICdcIiArIGNvbmZsaWN0aW5nT3AudG9TdHJpbmcoKSArIFwiJyBmaWx0ZXJzLlwiKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFF1ZXJ5LnByb3RvdHlwZS52YWxpZGF0ZU5ld09yZGVyQnkgPSBmdW5jdGlvbiAob3JkZXJCeSkge1xyXG4gICAgICAgIGlmICh0aGlzLl9xdWVyeS5nZXRGaXJzdE9yZGVyQnlGaWVsZCgpID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgIC8vIFRoaXMgaXMgdGhlIGZpcnN0IG9yZGVyIGJ5LiBJdCBtdXN0IG1hdGNoIGFueSBpbmVxdWFsaXR5LlxyXG4gICAgICAgICAgICB2YXIgaW5lcXVhbGl0eUZpZWxkID0gdGhpcy5fcXVlcnkuZ2V0SW5lcXVhbGl0eUZpbHRlckZpZWxkKCk7XHJcbiAgICAgICAgICAgIGlmIChpbmVxdWFsaXR5RmllbGQgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudmFsaWRhdGVPcmRlckJ5QW5kSW5lcXVhbGl0eU1hdGNoKGluZXF1YWxpdHlGaWVsZCwgb3JkZXJCeS5maWVsZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgUXVlcnkucHJvdG90eXBlLnZhbGlkYXRlT3JkZXJCeUFuZEluZXF1YWxpdHlNYXRjaCA9IGZ1bmN0aW9uIChpbmVxdWFsaXR5LCBvcmRlckJ5KSB7XHJcbiAgICAgICAgaWYgKCFvcmRlckJ5LmlzRXF1YWwoaW5lcXVhbGl0eSkpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuSU5WQUxJRF9BUkdVTUVOVCwgXCJJbnZhbGlkIHF1ZXJ5LiBZb3UgaGF2ZSBhIHdoZXJlIGZpbHRlciB3aXRoIGFuIGluZXF1YWxpdHkgXCIgK1xyXG4gICAgICAgICAgICAgICAgKFwiKDwsIDw9LCA+LCBvciA+PSkgb24gZmllbGQgJ1wiICsgaW5lcXVhbGl0eS50b1N0cmluZygpICsgXCInIFwiKSArXHJcbiAgICAgICAgICAgICAgICAoXCJhbmQgc28geW91IG11c3QgYWxzbyB1c2UgJ1wiICsgaW5lcXVhbGl0eS50b1N0cmluZygpICsgXCInIFwiKSArXHJcbiAgICAgICAgICAgICAgICBcImFzIHlvdXIgZmlyc3QgUXVlcnkub3JkZXJCeSgpLCBidXQgeW91ciBmaXJzdCBRdWVyeS5vcmRlckJ5KCkgXCIgK1xyXG4gICAgICAgICAgICAgICAgKFwiaXMgb24gZmllbGQgJ1wiICsgb3JkZXJCeS50b1N0cmluZygpICsgXCInIGluc3RlYWQuXCIpKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFF1ZXJ5O1xyXG59KCkpO1xyXG52YXIgUXVlcnlTbmFwc2hvdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFF1ZXJ5U25hcHNob3QoX2ZpcmVzdG9yZSwgX29yaWdpbmFsUXVlcnksIF9zbmFwc2hvdCwgX2NvbnZlcnRlcikge1xyXG4gICAgICAgIHRoaXMuX2ZpcmVzdG9yZSA9IF9maXJlc3RvcmU7XHJcbiAgICAgICAgdGhpcy5fb3JpZ2luYWxRdWVyeSA9IF9vcmlnaW5hbFF1ZXJ5O1xyXG4gICAgICAgIHRoaXMuX3NuYXBzaG90ID0gX3NuYXBzaG90O1xyXG4gICAgICAgIHRoaXMuX2NvbnZlcnRlciA9IF9jb252ZXJ0ZXI7XHJcbiAgICAgICAgdGhpcy5fY2FjaGVkQ2hhbmdlcyA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5fY2FjaGVkQ2hhbmdlc0luY2x1ZGVNZXRhZGF0YUNoYW5nZXMgPSBudWxsO1xyXG4gICAgICAgIHRoaXMubWV0YWRhdGEgPSBuZXcgU25hcHNob3RNZXRhZGF0YShfc25hcHNob3QuaGFzUGVuZGluZ1dyaXRlcywgX3NuYXBzaG90LmZyb21DYWNoZSk7XHJcbiAgICB9XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoUXVlcnlTbmFwc2hvdC5wcm90b3R5cGUsIFwiZG9jc1wiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSBbXTtcclxuICAgICAgICAgICAgdGhpcy5mb3JFYWNoKGZ1bmN0aW9uIChkb2MpIHsgcmV0dXJuIHJlc3VsdC5wdXNoKGRvYyk7IH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFF1ZXJ5U25hcHNob3QucHJvdG90eXBlLCBcImVtcHR5XCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3NuYXBzaG90LmRvY3MuaXNFbXB0eSgpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFF1ZXJ5U25hcHNob3QucHJvdG90eXBlLCBcInNpemVcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fc25hcHNob3QuZG9jcy5zaXplO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgUXVlcnlTbmFwc2hvdC5wcm90b3R5cGUuZm9yRWFjaCA9IGZ1bmN0aW9uIChjYWxsYmFjaywgdGhpc0FyZykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFsaWRhdGVCZXR3ZWVuTnVtYmVyT2ZBcmdzKCdRdWVyeVNuYXBzaG90LmZvckVhY2gnLCBhcmd1bWVudHMsIDEsIDIpO1xyXG4gICAgICAgIHZhbGlkYXRlQXJnVHlwZSgnUXVlcnlTbmFwc2hvdC5mb3JFYWNoJywgJ2Z1bmN0aW9uJywgMSwgY2FsbGJhY2spO1xyXG4gICAgICAgIHRoaXMuX3NuYXBzaG90LmRvY3MuZm9yRWFjaChmdW5jdGlvbiAoZG9jKSB7XHJcbiAgICAgICAgICAgIGNhbGxiYWNrLmNhbGwodGhpc0FyZywgX3RoaXMuY29udmVydFRvRG9jdW1lbnRJbXBsKGRvYykpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShRdWVyeVNuYXBzaG90LnByb3RvdHlwZSwgXCJxdWVyeVwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgUXVlcnkkMSh0aGlzLl9vcmlnaW5hbFF1ZXJ5LCB0aGlzLl9maXJlc3RvcmUsIHRoaXMuX2NvbnZlcnRlcik7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBRdWVyeVNuYXBzaG90LnByb3RvdHlwZS5kb2NDaGFuZ2VzID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcclxuICAgICAgICBpZiAob3B0aW9ucykge1xyXG4gICAgICAgICAgICB2YWxpZGF0ZU9wdGlvbk5hbWVzKCdRdWVyeVNuYXBzaG90LmRvY0NoYW5nZXMnLCBvcHRpb25zLCBbXHJcbiAgICAgICAgICAgICAgICAnaW5jbHVkZU1ldGFkYXRhQ2hhbmdlcydcclxuICAgICAgICAgICAgXSk7XHJcbiAgICAgICAgICAgIHZhbGlkYXRlTmFtZWRPcHRpb25hbFR5cGUoJ1F1ZXJ5U25hcHNob3QuZG9jQ2hhbmdlcycsICdib29sZWFuJywgJ2luY2x1ZGVNZXRhZGF0YUNoYW5nZXMnLCBvcHRpb25zLmluY2x1ZGVNZXRhZGF0YUNoYW5nZXMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgaW5jbHVkZU1ldGFkYXRhQ2hhbmdlcyA9ICEhKG9wdGlvbnMgJiYgb3B0aW9ucy5pbmNsdWRlTWV0YWRhdGFDaGFuZ2VzKTtcclxuICAgICAgICBpZiAoaW5jbHVkZU1ldGFkYXRhQ2hhbmdlcyAmJiB0aGlzLl9zbmFwc2hvdC5leGNsdWRlc01ldGFkYXRhQ2hhbmdlcykge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5JTlZBTElEX0FSR1VNRU5ULCAnVG8gaW5jbHVkZSBtZXRhZGF0YSBjaGFuZ2VzIHdpdGggeW91ciBkb2N1bWVudCBjaGFuZ2VzLCB5b3UgbXVzdCAnICtcclxuICAgICAgICAgICAgICAgICdhbHNvIHBhc3MgeyBpbmNsdWRlTWV0YWRhdGFDaGFuZ2VzOnRydWUgfSB0byBvblNuYXBzaG90KCkuJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghdGhpcy5fY2FjaGVkQ2hhbmdlcyB8fFxyXG4gICAgICAgICAgICB0aGlzLl9jYWNoZWRDaGFuZ2VzSW5jbHVkZU1ldGFkYXRhQ2hhbmdlcyAhPT0gaW5jbHVkZU1ldGFkYXRhQ2hhbmdlcykge1xyXG4gICAgICAgICAgICB0aGlzLl9jYWNoZWRDaGFuZ2VzID0gY2hhbmdlc0Zyb21TbmFwc2hvdCh0aGlzLl9maXJlc3RvcmUsIGluY2x1ZGVNZXRhZGF0YUNoYW5nZXMsIHRoaXMuX3NuYXBzaG90LCB0aGlzLl9jb252ZXJ0ZXIpO1xyXG4gICAgICAgICAgICB0aGlzLl9jYWNoZWRDaGFuZ2VzSW5jbHVkZU1ldGFkYXRhQ2hhbmdlcyA9IGluY2x1ZGVNZXRhZGF0YUNoYW5nZXM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLl9jYWNoZWRDaGFuZ2VzO1xyXG4gICAgfTtcclxuICAgIC8qKiBDaGVjayB0aGUgZXF1YWxpdHkuIFRoZSBjYWxsIGNhbiBiZSB2ZXJ5IGV4cGVuc2l2ZS4gKi9cclxuICAgIFF1ZXJ5U25hcHNob3QucHJvdG90eXBlLmlzRXF1YWwgPSBmdW5jdGlvbiAob3RoZXIpIHtcclxuICAgICAgICBpZiAoIShvdGhlciBpbnN0YW5jZW9mIFF1ZXJ5U25hcHNob3QpKSB7XHJcbiAgICAgICAgICAgIHRocm93IGludmFsaWRDbGFzc0Vycm9yKCdpc0VxdWFsJywgJ1F1ZXJ5U25hcHNob3QnLCAxLCBvdGhlcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiAodGhpcy5fZmlyZXN0b3JlID09PSBvdGhlci5fZmlyZXN0b3JlICYmXHJcbiAgICAgICAgICAgIHRoaXMuX29yaWdpbmFsUXVlcnkuaXNFcXVhbChvdGhlci5fb3JpZ2luYWxRdWVyeSkgJiZcclxuICAgICAgICAgICAgdGhpcy5fc25hcHNob3QuaXNFcXVhbChvdGhlci5fc25hcHNob3QpICYmXHJcbiAgICAgICAgICAgIHRoaXMuX2NvbnZlcnRlciA9PT0gb3RoZXIuX2NvbnZlcnRlcik7XHJcbiAgICB9O1xyXG4gICAgUXVlcnlTbmFwc2hvdC5wcm90b3R5cGUuY29udmVydFRvRG9jdW1lbnRJbXBsID0gZnVuY3Rpb24gKGRvYykge1xyXG4gICAgICAgIHJldHVybiBuZXcgUXVlcnlEb2N1bWVudFNuYXBzaG90KHRoaXMuX2ZpcmVzdG9yZSwgZG9jLmtleSwgZG9jLCB0aGlzLm1ldGFkYXRhLmZyb21DYWNoZSwgdGhpcy5fc25hcHNob3QubXV0YXRlZEtleXMuaGFzKGRvYy5rZXkpLCB0aGlzLl9jb252ZXJ0ZXIpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBRdWVyeVNuYXBzaG90O1xyXG59KCkpO1xyXG4vLyBUT0RPKDIwMTgvMTEvMDEpOiBBcyBvZiAyMDE4LzA0LzE3IHdlJ3JlIGNoYW5naW5nIGRvY0NoYW5nZXMgZnJvbSBhbiBhcnJheVxyXG4vLyBpbnRvIGEgbWV0aG9kLiBCZWNhdXNlIHRoaXMgaXMgYSBydW50aW1lIGJyZWFraW5nIGNoYW5nZSBhbmQgc29tZXdoYXQgc3VidGxlXHJcbi8vIChib3RoIEFycmF5IGFuZCBGdW5jdGlvbiBoYXZlIGEgLmxlbmd0aCwgZXRjLiksIHdlJ2xsIHJlcGxhY2UgY29tbW9ubHktdXNlZFxyXG4vLyBwcm9wZXJ0aWVzIChpbmNsdWRpbmcgU3ltYm9sLml0ZXJhdG9yKSB0byB0aHJvdyBhIGN1c3RvbSBlcnJvciBtZXNzYWdlLiBJblxyXG4vLyB+NiBtb250aHMgd2UgY2FuIGRlbGV0ZSB0aGUgY3VzdG9tIGVycm9yIGFzIG1vc3QgZm9sa3Mgd2lsbCBoYXZlIGhvcGVmdWxseVxyXG4vLyBtaWdyYXRlZC5cclxuZnVuY3Rpb24gdGhyb3dEb2NDaGFuZ2VzTWV0aG9kRXJyb3IoKSB7XHJcbiAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5JTlZBTElEX0FSR1VNRU5ULCAnUXVlcnlTbmFwc2hvdC5kb2NDaGFuZ2VzIGhhcyBiZWVuIGNoYW5nZWQgZnJvbSBhIHByb3BlcnR5IGludG8gYSAnICtcclxuICAgICAgICAnbWV0aG9kLCBzbyB1c2FnZXMgbGlrZSBcInF1ZXJ5U25hcHNob3QuZG9jQ2hhbmdlc1wiIHNob3VsZCBiZWNvbWUgJyArXHJcbiAgICAgICAgJ1wicXVlcnlTbmFwc2hvdC5kb2NDaGFuZ2VzKClcIicpO1xyXG59XHJcbnZhciBkb2NDaGFuZ2VzUHJvcGVydGllc1RvT3ZlcnJpZGUgPSB0c2xpYi5fX3NwcmVhZEFycmF5cyhbXHJcbiAgICAnbGVuZ3RoJyxcclxuICAgICdmb3JFYWNoJyxcclxuICAgICdtYXAnXHJcbl0sICh0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyA/IFtTeW1ib2wuaXRlcmF0b3JdIDogW10pKTtcclxuZG9jQ2hhbmdlc1Byb3BlcnRpZXNUb092ZXJyaWRlLmZvckVhY2goZnVuY3Rpb24gKHByb3BlcnR5KSB7XHJcbiAgICAvKipcclxuICAgICAqIFdlIGFyZSAocmUtKWRlZmluaW5nIHByb3BlcnRpZXMgb24gUXVlcnlTbmFwc2hvdC5wcm90b3R5cGUuZG9jQ2hhbmdlcyB3aGljaFxyXG4gICAgICogaXMgYSBGdW5jdGlvbi4gVGhpcyBjb3VsZCBmYWlsLCBpbiBwYXJ0aWN1bGFyIGluIHRoZSBjYXNlIG9mICdsZW5ndGgnIHdoaWNoXHJcbiAgICAgKiBhbHJlYWR5IGV4aXN0cyBvbiBGdW5jdGlvbi5wcm90b3R5cGUgYW5kIG9uIElFMTEgaXMgaW1wcm9wZXJseSBkZWZpbmVkIHdpdGhcclxuICAgICAqIGB7IGNvbmZpZ3VyYWJsZTogZmFsc2UgfWAuIFNvIHdlIHdyYXAgdGhpcyBpbiBhIHRyeS9jYXRjaCB0byBlbnN1cmUgdGhhdCB3ZVxyXG4gICAgICogc3RpbGwgaGF2ZSBhIGZ1bmN0aW9uYWwgU0RLLlxyXG4gICAgICovXHJcbiAgICB0cnkge1xyXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShRdWVyeVNuYXBzaG90LnByb3RvdHlwZS5kb2NDaGFuZ2VzLCBwcm9wZXJ0eSwge1xyXG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRocm93RG9jQ2hhbmdlc01ldGhvZEVycm9yKCk7IH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlcnIpIHsgfSAvLyBJZ25vcmUgdGhpcyBmYWlsdXJlIGludGVudGlvbmFsbHlcclxufSk7XHJcbnZhciBDb2xsZWN0aW9uUmVmZXJlbmNlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgdHNsaWIuX19leHRlbmRzKENvbGxlY3Rpb25SZWZlcmVuY2UsIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBDb2xsZWN0aW9uUmVmZXJlbmNlKF9wYXRoLCBmaXJlc3RvcmUsIF9jb252ZXJ0ZXIpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBRdWVyeS5hdFBhdGgoX3BhdGgpLCBmaXJlc3RvcmUsIF9jb252ZXJ0ZXIpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMuX3BhdGggPSBfcGF0aDtcclxuICAgICAgICBpZiAoX3BhdGgubGVuZ3RoICUgMiAhPT0gMSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5JTlZBTElEX0FSR1VNRU5ULCAnSW52YWxpZCBjb2xsZWN0aW9uIHJlZmVyZW5jZS4gQ29sbGVjdGlvbiAnICtcclxuICAgICAgICAgICAgICAgICdyZWZlcmVuY2VzIG11c3QgaGF2ZSBhbiBvZGQgbnVtYmVyIG9mIHNlZ21lbnRzLCBidXQgJyArXHJcbiAgICAgICAgICAgICAgICAoX3BhdGguY2Fub25pY2FsU3RyaW5nKCkgKyBcIiBoYXMgXCIgKyBfcGF0aC5sZW5ndGgpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KENvbGxlY3Rpb25SZWZlcmVuY2UucHJvdG90eXBlLCBcImlkXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3F1ZXJ5LnBhdGgubGFzdFNlZ21lbnQoKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDb2xsZWN0aW9uUmVmZXJlbmNlLnByb3RvdHlwZSwgXCJwYXJlbnRcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgcGFyZW50UGF0aCA9IHRoaXMuX3F1ZXJ5LnBhdGgucG9wTGFzdCgpO1xyXG4gICAgICAgICAgICBpZiAocGFyZW50UGF0aC5pc0VtcHR5KCkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBEb2N1bWVudFJlZmVyZW5jZShuZXcgRG9jdW1lbnRLZXkocGFyZW50UGF0aCksIHRoaXMuZmlyZXN0b3JlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KENvbGxlY3Rpb25SZWZlcmVuY2UucHJvdG90eXBlLCBcInBhdGhcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fcXVlcnkucGF0aC5jYW5vbmljYWxTdHJpbmcoKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIENvbGxlY3Rpb25SZWZlcmVuY2UucHJvdG90eXBlLmRvYyA9IGZ1bmN0aW9uIChwYXRoU3RyaW5nKSB7XHJcbiAgICAgICAgdmFsaWRhdGVCZXR3ZWVuTnVtYmVyT2ZBcmdzKCdDb2xsZWN0aW9uUmVmZXJlbmNlLmRvYycsIGFyZ3VtZW50cywgMCwgMSk7XHJcbiAgICAgICAgLy8gV2UgYWxsb3cgb21pc3Npb24gb2YgJ3BhdGhTdHJpbmcnIGJ1dCBleHBsaWNpdGx5IHByb2hpYml0IHBhc3NpbmcgaW4gYm90aFxyXG4gICAgICAgIC8vICd1bmRlZmluZWQnIGFuZCAnbnVsbCcuXHJcbiAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgcGF0aFN0cmluZyA9IEF1dG9JZC5uZXdJZCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YWxpZGF0ZUFyZ1R5cGUoJ0NvbGxlY3Rpb25SZWZlcmVuY2UuZG9jJywgJ25vbi1lbXB0eSBzdHJpbmcnLCAxLCBwYXRoU3RyaW5nKTtcclxuICAgICAgICBpZiAocGF0aFN0cmluZyA9PT0gJycpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuSU5WQUxJRF9BUkdVTUVOVCwgJ0RvY3VtZW50IHBhdGggbXVzdCBiZSBhIG5vbi1lbXB0eSBzdHJpbmcnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIHBhdGggPSBSZXNvdXJjZVBhdGguZnJvbVN0cmluZyhwYXRoU3RyaW5nKTtcclxuICAgICAgICByZXR1cm4gRG9jdW1lbnRSZWZlcmVuY2UuZm9yUGF0aCh0aGlzLl9xdWVyeS5wYXRoLmNoaWxkKHBhdGgpLCB0aGlzLmZpcmVzdG9yZSwgdGhpcy5fY29udmVydGVyKTtcclxuICAgIH07XHJcbiAgICBDb2xsZWN0aW9uUmVmZXJlbmNlLnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICB2YWxpZGF0ZUV4YWN0TnVtYmVyT2ZBcmdzKCdDb2xsZWN0aW9uUmVmZXJlbmNlLmFkZCcsIGFyZ3VtZW50cywgMSk7XHJcbiAgICAgICAgdmFsaWRhdGVBcmdUeXBlKCdDb2xsZWN0aW9uUmVmZXJlbmNlLmFkZCcsICdvYmplY3QnLCAxLCB2YWx1ZSk7XHJcbiAgICAgICAgdmFyIGRvY1JlZiA9IHRoaXMuZG9jKCk7XHJcbiAgICAgICAgcmV0dXJuIGRvY1JlZi5zZXQodmFsdWUpLnRoZW4oZnVuY3Rpb24gKCkgeyByZXR1cm4gZG9jUmVmOyB9KTtcclxuICAgIH07XHJcbiAgICBDb2xsZWN0aW9uUmVmZXJlbmNlLnByb3RvdHlwZS53aXRoQ29udmVydGVyID0gZnVuY3Rpb24gKGNvbnZlcnRlcikge1xyXG4gICAgICAgIHJldHVybiBuZXcgQ29sbGVjdGlvblJlZmVyZW5jZSh0aGlzLl9wYXRoLCB0aGlzLmZpcmVzdG9yZSwgY29udmVydGVyKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gQ29sbGVjdGlvblJlZmVyZW5jZTtcclxufShRdWVyeSQxKSk7XHJcbmZ1bmN0aW9uIHZhbGlkYXRlU2V0T3B0aW9ucyhtZXRob2ROYW1lLCBvcHRpb25zKSB7XHJcbiAgICBpZiAob3B0aW9ucyA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgbWVyZ2U6IGZhbHNlXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIHZhbGlkYXRlT3B0aW9uTmFtZXMobWV0aG9kTmFtZSwgb3B0aW9ucywgWydtZXJnZScsICdtZXJnZUZpZWxkcyddKTtcclxuICAgIHZhbGlkYXRlTmFtZWRPcHRpb25hbFR5cGUobWV0aG9kTmFtZSwgJ2Jvb2xlYW4nLCAnbWVyZ2UnLCBvcHRpb25zLm1lcmdlKTtcclxuICAgIHZhbGlkYXRlT3B0aW9uYWxBcnJheUVsZW1lbnRzKG1ldGhvZE5hbWUsICdtZXJnZUZpZWxkcycsICdhIHN0cmluZyBvciBhIEZpZWxkUGF0aCcsIG9wdGlvbnMubWVyZ2VGaWVsZHMsIGZ1bmN0aW9uIChlbGVtZW50KSB7XHJcbiAgICAgICAgcmV0dXJuIHR5cGVvZiBlbGVtZW50ID09PSAnc3RyaW5nJyB8fCBlbGVtZW50IGluc3RhbmNlb2YgRmllbGRQYXRoJDE7XHJcbiAgICB9KTtcclxuICAgIGlmIChvcHRpb25zLm1lcmdlRmllbGRzICE9PSB1bmRlZmluZWQgJiYgb3B0aW9ucy5tZXJnZSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuSU5WQUxJRF9BUkdVTUVOVCwgXCJJbnZhbGlkIG9wdGlvbnMgcGFzc2VkIHRvIGZ1bmN0aW9uIFwiICsgbWV0aG9kTmFtZSArIFwiKCk6IFlvdSBjYW5ub3Qgc3BlY2lmeSBib3RoIFxcXCJtZXJnZVxcXCIgXCIgK1xyXG4gICAgICAgICAgICBcImFuZCBcXFwibWVyZ2VGaWVsZHNcXFwiLlwiKTtcclxuICAgIH1cclxuICAgIHJldHVybiBvcHRpb25zO1xyXG59XHJcbmZ1bmN0aW9uIHZhbGlkYXRlU25hcHNob3RPcHRpb25zKG1ldGhvZE5hbWUsIG9wdGlvbnMpIHtcclxuICAgIGlmIChvcHRpb25zID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICByZXR1cm4ge307XHJcbiAgICB9XHJcbiAgICB2YWxpZGF0ZU9wdGlvbk5hbWVzKG1ldGhvZE5hbWUsIG9wdGlvbnMsIFsnc2VydmVyVGltZXN0YW1wcyddKTtcclxuICAgIHZhbGlkYXRlTmFtZWRPcHRpb25hbFByb3BlcnR5RXF1YWxzKG1ldGhvZE5hbWUsICdvcHRpb25zJywgJ3NlcnZlclRpbWVzdGFtcHMnLCBvcHRpb25zLnNlcnZlclRpbWVzdGFtcHMsIFsnZXN0aW1hdGUnLCAncHJldmlvdXMnLCAnbm9uZSddKTtcclxuICAgIHJldHVybiBvcHRpb25zO1xyXG59XHJcbmZ1bmN0aW9uIHZhbGlkYXRlR2V0T3B0aW9ucyhtZXRob2ROYW1lLCBvcHRpb25zKSB7XHJcbiAgICB2YWxpZGF0ZU9wdGlvbmFsQXJnVHlwZShtZXRob2ROYW1lLCAnb2JqZWN0JywgMSwgb3B0aW9ucyk7XHJcbiAgICBpZiAob3B0aW9ucykge1xyXG4gICAgICAgIHZhbGlkYXRlT3B0aW9uTmFtZXMobWV0aG9kTmFtZSwgb3B0aW9ucywgWydzb3VyY2UnXSk7XHJcbiAgICAgICAgdmFsaWRhdGVOYW1lZE9wdGlvbmFsUHJvcGVydHlFcXVhbHMobWV0aG9kTmFtZSwgJ29wdGlvbnMnLCAnc291cmNlJywgb3B0aW9ucy5zb3VyY2UsIFsnZGVmYXVsdCcsICdzZXJ2ZXInLCAnY2FjaGUnXSk7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gdmFsaWRhdGVSZWZlcmVuY2UobWV0aG9kTmFtZSwgZG9jdW1lbnRSZWYsIGZpcmVzdG9yZSkge1xyXG4gICAgaWYgKCEoZG9jdW1lbnRSZWYgaW5zdGFuY2VvZiBEb2N1bWVudFJlZmVyZW5jZSkpIHtcclxuICAgICAgICB0aHJvdyBpbnZhbGlkQ2xhc3NFcnJvcihtZXRob2ROYW1lLCAnRG9jdW1lbnRSZWZlcmVuY2UnLCAxLCBkb2N1bWVudFJlZik7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChkb2N1bWVudFJlZi5maXJlc3RvcmUgIT09IGZpcmVzdG9yZSkge1xyXG4gICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLklOVkFMSURfQVJHVU1FTlQsICdQcm92aWRlZCBkb2N1bWVudCByZWZlcmVuY2UgaXMgZnJvbSBhIGRpZmZlcmVudCBGaXJlc3RvcmUgaW5zdGFuY2UuJyk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICByZXR1cm4gZG9jdW1lbnRSZWY7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIENhbGN1bGF0ZXMgdGhlIGFycmF5IG9mIGZpcmVzdG9yZS5Eb2N1bWVudENoYW5nZSdzIGZvciBhIGdpdmVuIFZpZXdTbmFwc2hvdC5cclxuICpcclxuICogRXhwb3J0ZWQgZm9yIHRlc3RpbmcuXHJcbiAqL1xyXG5mdW5jdGlvbiBjaGFuZ2VzRnJvbVNuYXBzaG90KGZpcmVzdG9yZSwgaW5jbHVkZU1ldGFkYXRhQ2hhbmdlcywgc25hcHNob3QsIGNvbnZlcnRlcikge1xyXG4gICAgaWYgKHNuYXBzaG90Lm9sZERvY3MuaXNFbXB0eSgpKSB7XHJcbiAgICAgICAgLy8gU3BlY2lhbCBjYXNlIHRoZSBmaXJzdCBzbmFwc2hvdCBiZWNhdXNlIGluZGV4IGNhbGN1bGF0aW9uIGlzIGVhc3kgYW5kXHJcbiAgICAgICAgLy8gZmFzdFxyXG4gICAgICAgIHZhciBsYXN0RG9jXzE7XHJcbiAgICAgICAgdmFyIGluZGV4XzEgPSAwO1xyXG4gICAgICAgIHJldHVybiBzbmFwc2hvdC5kb2NDaGFuZ2VzLm1hcChmdW5jdGlvbiAoY2hhbmdlKSB7XHJcbiAgICAgICAgICAgIHZhciBkb2MgPSBuZXcgUXVlcnlEb2N1bWVudFNuYXBzaG90KGZpcmVzdG9yZSwgY2hhbmdlLmRvYy5rZXksIGNoYW5nZS5kb2MsIHNuYXBzaG90LmZyb21DYWNoZSwgc25hcHNob3QubXV0YXRlZEtleXMuaGFzKGNoYW5nZS5kb2Mua2V5KSwgY29udmVydGVyKTtcclxuICAgICAgICAgICAgYXNzZXJ0KGNoYW5nZS50eXBlID09PSBDaGFuZ2VUeXBlLkFkZGVkLCAnSW52YWxpZCBldmVudCB0eXBlIGZvciBmaXJzdCBzbmFwc2hvdCcpO1xyXG4gICAgICAgICAgICBhc3NlcnQoIWxhc3REb2NfMSB8fCBzbmFwc2hvdC5xdWVyeS5kb2NDb21wYXJhdG9yKGxhc3REb2NfMSwgY2hhbmdlLmRvYykgPCAwLCAnR290IGFkZGVkIGV2ZW50cyBpbiB3cm9uZyBvcmRlcicpO1xyXG4gICAgICAgICAgICBsYXN0RG9jXzEgPSBjaGFuZ2UuZG9jO1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgdHlwZTogJ2FkZGVkJyxcclxuICAgICAgICAgICAgICAgIGRvYzogZG9jLFxyXG4gICAgICAgICAgICAgICAgb2xkSW5kZXg6IC0xLFxyXG4gICAgICAgICAgICAgICAgbmV3SW5kZXg6IGluZGV4XzErK1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgLy8gQSBEb2N1bWVudFNldCB0aGF0IGlzIHVwZGF0ZWQgaW5jcmVtZW50YWxseSBhcyBjaGFuZ2VzIGFyZSBhcHBsaWVkIHRvIHVzZVxyXG4gICAgICAgIC8vIHRvIGxvb2t1cCB0aGUgaW5kZXggb2YgYSBkb2N1bWVudC5cclxuICAgICAgICB2YXIgaW5kZXhUcmFja2VyXzEgPSBzbmFwc2hvdC5vbGREb2NzO1xyXG4gICAgICAgIHJldHVybiBzbmFwc2hvdC5kb2NDaGFuZ2VzXHJcbiAgICAgICAgICAgIC5maWx0ZXIoZnVuY3Rpb24gKGNoYW5nZSkgeyByZXR1cm4gaW5jbHVkZU1ldGFkYXRhQ2hhbmdlcyB8fCBjaGFuZ2UudHlwZSAhPT0gQ2hhbmdlVHlwZS5NZXRhZGF0YTsgfSlcclxuICAgICAgICAgICAgLm1hcChmdW5jdGlvbiAoY2hhbmdlKSB7XHJcbiAgICAgICAgICAgIHZhciBkb2MgPSBuZXcgUXVlcnlEb2N1bWVudFNuYXBzaG90KGZpcmVzdG9yZSwgY2hhbmdlLmRvYy5rZXksIGNoYW5nZS5kb2MsIHNuYXBzaG90LmZyb21DYWNoZSwgc25hcHNob3QubXV0YXRlZEtleXMuaGFzKGNoYW5nZS5kb2Mua2V5KSwgY29udmVydGVyKTtcclxuICAgICAgICAgICAgdmFyIG9sZEluZGV4ID0gLTE7XHJcbiAgICAgICAgICAgIHZhciBuZXdJbmRleCA9IC0xO1xyXG4gICAgICAgICAgICBpZiAoY2hhbmdlLnR5cGUgIT09IENoYW5nZVR5cGUuQWRkZWQpIHtcclxuICAgICAgICAgICAgICAgIG9sZEluZGV4ID0gaW5kZXhUcmFja2VyXzEuaW5kZXhPZihjaGFuZ2UuZG9jLmtleSk7XHJcbiAgICAgICAgICAgICAgICBhc3NlcnQob2xkSW5kZXggPj0gMCwgJ0luZGV4IGZvciBkb2N1bWVudCBub3QgZm91bmQnKTtcclxuICAgICAgICAgICAgICAgIGluZGV4VHJhY2tlcl8xID0gaW5kZXhUcmFja2VyXzEuZGVsZXRlKGNoYW5nZS5kb2Mua2V5KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoY2hhbmdlLnR5cGUgIT09IENoYW5nZVR5cGUuUmVtb3ZlZCkge1xyXG4gICAgICAgICAgICAgICAgaW5kZXhUcmFja2VyXzEgPSBpbmRleFRyYWNrZXJfMS5hZGQoY2hhbmdlLmRvYyk7XHJcbiAgICAgICAgICAgICAgICBuZXdJbmRleCA9IGluZGV4VHJhY2tlcl8xLmluZGV4T2YoY2hhbmdlLmRvYy5rZXkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB7IHR5cGU6IHJlc3VsdENoYW5nZVR5cGUoY2hhbmdlLnR5cGUpLCBkb2M6IGRvYywgb2xkSW5kZXg6IG9sZEluZGV4LCBuZXdJbmRleDogbmV3SW5kZXggfTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiByZXN1bHRDaGFuZ2VUeXBlKHR5cGUpIHtcclxuICAgIHN3aXRjaCAodHlwZSkge1xyXG4gICAgICAgIGNhc2UgQ2hhbmdlVHlwZS5BZGRlZDpcclxuICAgICAgICAgICAgcmV0dXJuICdhZGRlZCc7XHJcbiAgICAgICAgY2FzZSBDaGFuZ2VUeXBlLk1vZGlmaWVkOlxyXG4gICAgICAgIGNhc2UgQ2hhbmdlVHlwZS5NZXRhZGF0YTpcclxuICAgICAgICAgICAgcmV0dXJuICdtb2RpZmllZCc7XHJcbiAgICAgICAgY2FzZSBDaGFuZ2VUeXBlLlJlbW92ZWQ6XHJcbiAgICAgICAgICAgIHJldHVybiAncmVtb3ZlZCc7XHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgcmV0dXJuIGZhaWwoJ1Vua25vd24gY2hhbmdlIHR5cGU6ICcgKyB0eXBlKTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogQ29udmVydHMgY3VzdG9tIG1vZGVsIG9iamVjdCBvZiB0eXBlIFQgaW50byBEb2N1bWVudERhdGEgYnkgYXBwbHlpbmcgdGhlXHJcbiAqIGNvbnZlcnRlciBpZiBpdCBleGlzdHMuXHJcbiAqXHJcbiAqIFRoaXMgZnVuY3Rpb24gaXMgdXNlZCB3aGVuIGNvbnZlcnRpbmcgdXNlciBvYmplY3RzIHRvIERvY3VtZW50RGF0YVxyXG4gKiBiZWNhdXNlIHdlIHdhbnQgdG8gcHJvdmlkZSB0aGUgdXNlciB3aXRoIGEgbW9yZSBzcGVjaWZpYyBlcnJvciBtZXNzYWdlIGlmXHJcbiAqIHRoZWlyIHNldCgpIG9yIGZhaWxzIGR1ZSB0byBpbnZhbGlkIGRhdGEgb3JpZ2luYXRpbmcgZnJvbSBhIHRvRmlyZXN0b3JlKClcclxuICogY2FsbC5cclxuICovXHJcbmZ1bmN0aW9uIGFwcGx5RmlyZXN0b3JlRGF0YUNvbnZlcnRlcihjb252ZXJ0ZXIsIHZhbHVlLCBmdW5jdGlvbk5hbWUpIHtcclxuICAgIHZhciBjb252ZXJ0ZWRWYWx1ZTtcclxuICAgIGlmIChjb252ZXJ0ZXIpIHtcclxuICAgICAgICBjb252ZXJ0ZWRWYWx1ZSA9IGNvbnZlcnRlci50b0ZpcmVzdG9yZSh2YWx1ZSk7XHJcbiAgICAgICAgZnVuY3Rpb25OYW1lID0gJ3RvRmlyZXN0b3JlKCkgaW4gJyArIGZ1bmN0aW9uTmFtZTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIGNvbnZlcnRlZFZhbHVlID0gdmFsdWU7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gW2NvbnZlcnRlZFZhbHVlLCBmdW5jdGlvbk5hbWVdO1xyXG59XHJcbi8vIEV4cG9ydCB0aGUgY2xhc3NlcyB3aXRoIGEgcHJpdmF0ZSBjb25zdHJ1Y3RvciAoaXQgd2lsbCBmYWlsIGlmIGludm9rZWRcclxuLy8gYXQgcnVudGltZSkuIE5vdGUgdGhhdCB0aGlzIHN0aWxsIGFsbG93cyBpbnN0YW5jZW9mIGNoZWNrcy5cclxuLy8gV2UncmUgdHJlYXRpbmcgdGhlIHZhcmlhYmxlcyBhcyBjbGFzcyBuYW1lcywgc28gZGlzYWJsZSBjaGVja2luZyBmb3IgbG93ZXJcclxuLy8gY2FzZSB2YXJpYWJsZSBuYW1lcy5cclxudmFyIFB1YmxpY0ZpcmVzdG9yZSA9IG1ha2VDb25zdHJ1Y3RvclByaXZhdGUoRmlyZXN0b3JlLCAnVXNlIGZpcmViYXNlLmZpcmVzdG9yZSgpIGluc3RlYWQuJyk7XHJcbnZhciBQdWJsaWNUcmFuc2FjdGlvbiA9IG1ha2VDb25zdHJ1Y3RvclByaXZhdGUoVHJhbnNhY3Rpb24kMSwgJ1VzZSBmaXJlYmFzZS5maXJlc3RvcmUoKS5ydW5UcmFuc2FjdGlvbigpIGluc3RlYWQuJyk7XHJcbnZhciBQdWJsaWNXcml0ZUJhdGNoID0gbWFrZUNvbnN0cnVjdG9yUHJpdmF0ZShXcml0ZUJhdGNoLCAnVXNlIGZpcmViYXNlLmZpcmVzdG9yZSgpLmJhdGNoKCkgaW5zdGVhZC4nKTtcclxudmFyIFB1YmxpY0RvY3VtZW50UmVmZXJlbmNlID0gbWFrZUNvbnN0cnVjdG9yUHJpdmF0ZShEb2N1bWVudFJlZmVyZW5jZSwgJ1VzZSBmaXJlYmFzZS5maXJlc3RvcmUoKS5kb2MoKSBpbnN0ZWFkLicpO1xyXG52YXIgUHVibGljRG9jdW1lbnRTbmFwc2hvdCA9IG1ha2VDb25zdHJ1Y3RvclByaXZhdGUoRG9jdW1lbnRTbmFwc2hvdCk7XHJcbnZhciBQdWJsaWNRdWVyeURvY3VtZW50U25hcHNob3QgPSBtYWtlQ29uc3RydWN0b3JQcml2YXRlKFF1ZXJ5RG9jdW1lbnRTbmFwc2hvdCk7XHJcbnZhciBQdWJsaWNRdWVyeSA9IG1ha2VDb25zdHJ1Y3RvclByaXZhdGUoUXVlcnkkMSk7XHJcbnZhciBQdWJsaWNRdWVyeVNuYXBzaG90ID0gbWFrZUNvbnN0cnVjdG9yUHJpdmF0ZShRdWVyeVNuYXBzaG90KTtcclxudmFyIFB1YmxpY0NvbGxlY3Rpb25SZWZlcmVuY2UgPSBtYWtlQ29uc3RydWN0b3JQcml2YXRlKENvbGxlY3Rpb25SZWZlcmVuY2UsICdVc2UgZmlyZWJhc2UuZmlyZXN0b3JlKCkuY29sbGVjdGlvbigpIGluc3RlYWQuJyk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG52YXIgZmlyZXN0b3JlTmFtZXNwYWNlID0ge1xyXG4gICAgRmlyZXN0b3JlOiBQdWJsaWNGaXJlc3RvcmUsXHJcbiAgICBHZW9Qb2ludDogR2VvUG9pbnQsXHJcbiAgICBUaW1lc3RhbXA6IFRpbWVzdGFtcCxcclxuICAgIEJsb2I6IFB1YmxpY0Jsb2IsXHJcbiAgICBUcmFuc2FjdGlvbjogUHVibGljVHJhbnNhY3Rpb24sXHJcbiAgICBXcml0ZUJhdGNoOiBQdWJsaWNXcml0ZUJhdGNoLFxyXG4gICAgRG9jdW1lbnRSZWZlcmVuY2U6IFB1YmxpY0RvY3VtZW50UmVmZXJlbmNlLFxyXG4gICAgRG9jdW1lbnRTbmFwc2hvdDogUHVibGljRG9jdW1lbnRTbmFwc2hvdCxcclxuICAgIFF1ZXJ5OiBQdWJsaWNRdWVyeSxcclxuICAgIFF1ZXJ5RG9jdW1lbnRTbmFwc2hvdDogUHVibGljUXVlcnlEb2N1bWVudFNuYXBzaG90LFxyXG4gICAgUXVlcnlTbmFwc2hvdDogUHVibGljUXVlcnlTbmFwc2hvdCxcclxuICAgIENvbGxlY3Rpb25SZWZlcmVuY2U6IFB1YmxpY0NvbGxlY3Rpb25SZWZlcmVuY2UsXHJcbiAgICBGaWVsZFBhdGg6IEZpZWxkUGF0aCQxLFxyXG4gICAgRmllbGRWYWx1ZTogUHVibGljRmllbGRWYWx1ZSxcclxuICAgIHNldExvZ0xldmVsOiBGaXJlc3RvcmUuc2V0TG9nTGV2ZWwsXHJcbiAgICBDQUNIRV9TSVpFX1VOTElNSVRFRDogQ0FDSEVfU0laRV9VTkxJTUlURURcclxufTtcclxuLyoqXHJcbiAqIENvbmZpZ3VyZXMgRmlyZXN0b3JlIGFzIHBhcnQgb2YgdGhlIEZpcmViYXNlIFNESyBieSBjYWxsaW5nIHJlZ2lzdGVyU2VydmljZS5cclxuICovXHJcbmZ1bmN0aW9uIGNvbmZpZ3VyZUZvckZpcmViYXNlKGZpcmViYXNlKSB7XHJcbiAgICBmaXJlYmFzZS5JTlRFUk5BTC5yZWdpc3RlckNvbXBvbmVudChuZXcgY29tcG9uZW50LkNvbXBvbmVudCgnZmlyZXN0b3JlJywgZnVuY3Rpb24gKGNvbnRhaW5lcikge1xyXG4gICAgICAgIHZhciBhcHAgPSBjb250YWluZXIuZ2V0UHJvdmlkZXIoJ2FwcCcpLmdldEltbWVkaWF0ZSgpO1xyXG4gICAgICAgIHJldHVybiBuZXcgRmlyZXN0b3JlKGFwcCwgY29udGFpbmVyLmdldFByb3ZpZGVyKCdhdXRoLWludGVybmFsJykpO1xyXG4gICAgfSwgXCJQVUJMSUNcIiAvKiBQVUJMSUMgKi8pLnNldFNlcnZpY2VQcm9wcyhzaGFsbG93Q29weShmaXJlc3RvcmVOYW1lc3BhY2UpKSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnZhciBOb29wQ29ubmVjdGl2aXR5TW9uaXRvciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIE5vb3BDb25uZWN0aXZpdHlNb25pdG9yKCkge1xyXG4gICAgfVxyXG4gICAgTm9vcENvbm5lY3Rpdml0eU1vbml0b3IucHJvdG90eXBlLmFkZENhbGxiYWNrID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgLy8gTm8tb3AuXHJcbiAgICB9O1xyXG4gICAgTm9vcENvbm5lY3Rpdml0eU1vbml0b3IucHJvdG90eXBlLnNodXRkb3duID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vIE5vLW9wLlxyXG4gICAgfTtcclxuICAgIHJldHVybiBOb29wQ29ubmVjdGl2aXR5TW9uaXRvcjtcclxufSgpKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnZhciBMT0dfVEFHJGMgPSAnQ29ubmVjdGl2aXR5TW9uaXRvcic7XHJcbi8qKlxyXG4gKiBCcm93c2VyIGltcGxlbWVudGF0aW9uIG9mIENvbm5lY3Rpdml0eU1vbml0b3IuXHJcbiAqL1xyXG52YXIgQnJvd3NlckNvbm5lY3Rpdml0eU1vbml0b3IgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBCcm93c2VyQ29ubmVjdGl2aXR5TW9uaXRvcigpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMubmV0d29ya0F2YWlsYWJsZUxpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXMub25OZXR3b3JrQXZhaWxhYmxlKCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLm5ldHdvcmtVbmF2YWlsYWJsZUxpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXMub25OZXR3b3JrVW5hdmFpbGFibGUoKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuY2FsbGJhY2tzID0gW107XHJcbiAgICAgICAgdGhpcy5jb25maWd1cmVOZXR3b3JrTW9uaXRvcmluZygpO1xyXG4gICAgfVxyXG4gICAgQnJvd3NlckNvbm5lY3Rpdml0eU1vbml0b3IucHJvdG90eXBlLmFkZENhbGxiYWNrID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgdGhpcy5jYWxsYmFja3MucHVzaChjYWxsYmFjayk7XHJcbiAgICB9O1xyXG4gICAgQnJvd3NlckNvbm5lY3Rpdml0eU1vbml0b3IucHJvdG90eXBlLnNodXRkb3duID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdvbmxpbmUnLCB0aGlzLm5ldHdvcmtBdmFpbGFibGVMaXN0ZW5lcik7XHJcbiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ29mZmxpbmUnLCB0aGlzLm5ldHdvcmtVbmF2YWlsYWJsZUxpc3RlbmVyKTtcclxuICAgIH07XHJcbiAgICBCcm93c2VyQ29ubmVjdGl2aXR5TW9uaXRvci5wcm90b3R5cGUuY29uZmlndXJlTmV0d29ya01vbml0b3JpbmcgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ29ubGluZScsIHRoaXMubmV0d29ya0F2YWlsYWJsZUxpc3RlbmVyKTtcclxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignb2ZmbGluZScsIHRoaXMubmV0d29ya1VuYXZhaWxhYmxlTGlzdGVuZXIpO1xyXG4gICAgfTtcclxuICAgIEJyb3dzZXJDb25uZWN0aXZpdHlNb25pdG9yLnByb3RvdHlwZS5vbk5ldHdvcmtBdmFpbGFibGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgZGVidWcoTE9HX1RBRyRjLCAnTmV0d29yayBjb25uZWN0aXZpdHkgY2hhbmdlZDogQVZBSUxBQkxFJyk7XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHRoaXMuY2FsbGJhY2tzOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICB2YXIgY2FsbGJhY2sgPSBfYVtfaV07XHJcbiAgICAgICAgICAgIGNhbGxiYWNrKDAgLyogQVZBSUxBQkxFICovKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgQnJvd3NlckNvbm5lY3Rpdml0eU1vbml0b3IucHJvdG90eXBlLm9uTmV0d29ya1VuYXZhaWxhYmxlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGRlYnVnKExPR19UQUckYywgJ05ldHdvcmsgY29ubmVjdGl2aXR5IGNoYW5nZWQ6IFVOQVZBSUxBQkxFJyk7XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHRoaXMuY2FsbGJhY2tzOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICB2YXIgY2FsbGJhY2sgPSBfYVtfaV07XHJcbiAgICAgICAgICAgIGNhbGxiYWNrKDEgLyogVU5BVkFJTEFCTEUgKi8pO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvLyBUT0RPKGNoZW5icmlhbik6IENvbnNpZGVyIHBhc3NpbmcgaW4gd2luZG93IGVpdGhlciBpbnRvIHRoaXMgY29tcG9uZW50IG9yXHJcbiAgICAvLyBoZXJlIGZvciB0ZXN0aW5nIHZpYSBGYWtlV2luZG93LlxyXG4gICAgLyoqIENoZWNrcyB0aGF0IGFsbCB1c2VkIGF0dHJpYnV0ZXMgb2Ygd2luZG93IGFyZSBhdmFpbGFibGUuICovXHJcbiAgICBCcm93c2VyQ29ubmVjdGl2aXR5TW9uaXRvci5pc0F2YWlsYWJsZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmXHJcbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyICE9PSB1bmRlZmluZWQgJiZcclxuICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIgIT09IHVuZGVmaW5lZCk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEJyb3dzZXJDb25uZWN0aXZpdHlNb25pdG9yO1xyXG59KCkpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFByb3ZpZGVzIGEgc2ltcGxlIGhlbHBlciBjbGFzcyB0aGF0IGltcGxlbWVudHMgdGhlIFN0cmVhbSBpbnRlcmZhY2UgdG9cclxuICogYnJpZGdlIHRvIG90aGVyIGltcGxlbWVudGF0aW9ucyB0aGF0IGFyZSBzdHJlYW1zIGJ1dCBkbyBub3QgaW1wbGVtZW50IHRoZVxyXG4gKiBpbnRlcmZhY2UuIFRoZSBzdHJlYW0gY2FsbGJhY2tzIGFyZSBpbnZva2VkIHdpdGggdGhlIGNhbGxPbi4uLiBtZXRob2RzLlxyXG4gKi9cclxudmFyIFN0cmVhbUJyaWRnZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFN0cmVhbUJyaWRnZShhcmdzKSB7XHJcbiAgICAgICAgdGhpcy5zZW5kRm4gPSBhcmdzLnNlbmRGbjtcclxuICAgICAgICB0aGlzLmNsb3NlRm4gPSBhcmdzLmNsb3NlRm47XHJcbiAgICB9XHJcbiAgICBTdHJlYW1CcmlkZ2UucHJvdG90eXBlLm9uT3BlbiA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xyXG4gICAgICAgIGFzc2VydCghdGhpcy53cmFwcGVkT25PcGVuLCAnQ2FsbGVkIG9uT3BlbiBvbiBzdHJlYW0gdHdpY2UhJyk7XHJcbiAgICAgICAgdGhpcy53cmFwcGVkT25PcGVuID0gY2FsbGJhY2s7XHJcbiAgICB9O1xyXG4gICAgU3RyZWFtQnJpZGdlLnByb3RvdHlwZS5vbkNsb3NlID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgYXNzZXJ0KCF0aGlzLndyYXBwZWRPbkNsb3NlLCAnQ2FsbGVkIG9uQ2xvc2Ugb24gc3RyZWFtIHR3aWNlIScpO1xyXG4gICAgICAgIHRoaXMud3JhcHBlZE9uQ2xvc2UgPSBjYWxsYmFjaztcclxuICAgIH07XHJcbiAgICBTdHJlYW1CcmlkZ2UucHJvdG90eXBlLm9uTWVzc2FnZSA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xyXG4gICAgICAgIGFzc2VydCghdGhpcy53cmFwcGVkT25NZXNzYWdlLCAnQ2FsbGVkIG9uTWVzc2FnZSBvbiBzdHJlYW0gdHdpY2UhJyk7XHJcbiAgICAgICAgdGhpcy53cmFwcGVkT25NZXNzYWdlID0gY2FsbGJhY2s7XHJcbiAgICB9O1xyXG4gICAgU3RyZWFtQnJpZGdlLnByb3RvdHlwZS5jbG9zZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmNsb3NlRm4oKTtcclxuICAgIH07XHJcbiAgICBTdHJlYW1CcmlkZ2UucHJvdG90eXBlLnNlbmQgPSBmdW5jdGlvbiAobXNnKSB7XHJcbiAgICAgICAgdGhpcy5zZW5kRm4obXNnKTtcclxuICAgIH07XHJcbiAgICBTdHJlYW1CcmlkZ2UucHJvdG90eXBlLmNhbGxPbk9wZW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgYXNzZXJ0KHRoaXMud3JhcHBlZE9uT3BlbiAhPT0gdW5kZWZpbmVkLCAnQ2Fubm90IGNhbGwgb25PcGVuIGJlY2F1c2Ugbm8gY2FsbGJhY2sgd2FzIHNldCcpO1xyXG4gICAgICAgIHRoaXMud3JhcHBlZE9uT3BlbigpO1xyXG4gICAgfTtcclxuICAgIFN0cmVhbUJyaWRnZS5wcm90b3R5cGUuY2FsbE9uQ2xvc2UgPSBmdW5jdGlvbiAoZXJyKSB7XHJcbiAgICAgICAgYXNzZXJ0KHRoaXMud3JhcHBlZE9uQ2xvc2UgIT09IHVuZGVmaW5lZCwgJ0Nhbm5vdCBjYWxsIG9uQ2xvc2UgYmVjYXVzZSBubyBjYWxsYmFjayB3YXMgc2V0Jyk7XHJcbiAgICAgICAgdGhpcy53cmFwcGVkT25DbG9zZShlcnIpO1xyXG4gICAgfTtcclxuICAgIFN0cmVhbUJyaWRnZS5wcm90b3R5cGUuY2FsbE9uTWVzc2FnZSA9IGZ1bmN0aW9uIChtc2cpIHtcclxuICAgICAgICBhc3NlcnQodGhpcy53cmFwcGVkT25NZXNzYWdlICE9PSB1bmRlZmluZWQsICdDYW5ub3QgY2FsbCBvbk1lc3NhZ2UgYmVjYXVzZSBubyBjYWxsYmFjayB3YXMgc2V0Jyk7XHJcbiAgICAgICAgdGhpcy53cmFwcGVkT25NZXNzYWdlKG1zZyk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFN0cmVhbUJyaWRnZTtcclxufSgpKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnZhciBMT0dfVEFHJGQgPSAnQ29ubmVjdGlvbic7XHJcbnZhciBSUENfU1RSRUFNX1NFUlZJQ0UgPSAnZ29vZ2xlLmZpcmVzdG9yZS52MS5GaXJlc3RvcmUnO1xyXG52YXIgUlBDX1VSTF9WRVJTSU9OID0gJ3YxJztcclxuLyoqXHJcbiAqIE1hcHMgUlBDIG5hbWVzIHRvIHRoZSBjb3JyZXNwb25kaW5nIFJFU1QgZW5kcG9pbnQgbmFtZS5cclxuICogVXNlcyBPYmplY3QgTGl0ZXJhbCBub3RhdGlvbiB0byBhdm9pZCByZW5hbWluZy5cclxuICovXHJcbnZhciBSUENfTkFNRV9SRVNUX01BUFBJTkcgPSB7fTtcclxuUlBDX05BTUVfUkVTVF9NQVBQSU5HWydCYXRjaEdldERvY3VtZW50cyddID0gJ2JhdGNoR2V0JztcclxuUlBDX05BTUVfUkVTVF9NQVBQSU5HWydDb21taXQnXSA9ICdjb21taXQnO1xyXG4vLyBUT0RPKGIvMzgyMDMzNDQpOiBUaGUgU0RLX1ZFUlNJT04gaXMgc2V0IGluZGVwZW5kZW50bHkgZnJvbSBGaXJlYmFzZSBiZWNhdXNlXHJcbi8vIHdlIGFyZSBkb2luZyBvdXQtb2YtYmFuZCByZWxlYXNlcy4gT25jZSB3ZSByZWxlYXNlIGFzIHBhcnQgb2YgRmlyZWJhc2UsIHdlXHJcbi8vIHNob3VsZCB1c2UgdGhlIEZpcmViYXNlIHZlcnNpb24gaW5zdGVhZC5cclxudmFyIFhfR09PR19BUElfQ0xJRU5UX1ZBTFVFID0gJ2dsLWpzLyBmaXJlLycgKyBTREtfVkVSU0lPTjtcclxudmFyIFhIUl9USU1FT1VUX1NFQ1MgPSAxNTtcclxudmFyIFdlYkNoYW5uZWxDb25uZWN0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gV2ViQ2hhbm5lbENvbm5lY3Rpb24oaW5mbykge1xyXG4gICAgICAgIHRoaXMuZGF0YWJhc2VJZCA9IGluZm8uZGF0YWJhc2VJZDtcclxuICAgICAgICB2YXIgcHJvdG8gPSBpbmZvLnNzbCA/ICdodHRwcycgOiAnaHR0cCc7XHJcbiAgICAgICAgdGhpcy5iYXNlVXJsID0gcHJvdG8gKyAnOi8vJyArIGluZm8uaG9zdDtcclxuICAgICAgICB0aGlzLmZvcmNlTG9uZ1BvbGxpbmcgPSBpbmZvLmZvcmNlTG9uZ1BvbGxpbmc7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIE1vZGlmaWVzIHRoZSBoZWFkZXJzIGZvciBhIHJlcXVlc3QsIGFkZGluZyBhbnkgYXV0aG9yaXphdGlvbiB0b2tlbiBpZlxyXG4gICAgICogcHJlc2VudCBhbmQgYW55IGFkZGl0aW9uYWwgaGVhZGVycyBmb3IgdGhlIHJlcXVlc3QuXHJcbiAgICAgKi9cclxuICAgIFdlYkNoYW5uZWxDb25uZWN0aW9uLnByb3RvdHlwZS5tb2RpZnlIZWFkZXJzRm9yUmVxdWVzdCA9IGZ1bmN0aW9uIChoZWFkZXJzLCB0b2tlbikge1xyXG4gICAgICAgIGlmICh0b2tlbikge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBoZWFkZXIgaW4gdG9rZW4uYXV0aEhlYWRlcnMpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0b2tlbi5hdXRoSGVhZGVycy5oYXNPd25Qcm9wZXJ0eShoZWFkZXIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyc1toZWFkZXJdID0gdG9rZW4uYXV0aEhlYWRlcnNbaGVhZGVyXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBoZWFkZXJzWydYLUdvb2ctQXBpLUNsaWVudCddID0gWF9HT09HX0FQSV9DTElFTlRfVkFMVUU7XHJcbiAgICB9O1xyXG4gICAgV2ViQ2hhbm5lbENvbm5lY3Rpb24ucHJvdG90eXBlLmludm9rZVJQQyA9IGZ1bmN0aW9uIChycGNOYW1lLCByZXF1ZXN0LCB0b2tlbikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIHVybCA9IHRoaXMubWFrZVVybChycGNOYW1lKTtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICB2YXIgeGhyID0gbmV3IHdlYmNoYW5uZWxXcmFwcGVyLlhocklvKCk7XHJcbiAgICAgICAgICAgIHhoci5saXN0ZW5PbmNlKHdlYmNoYW5uZWxXcmFwcGVyLkV2ZW50VHlwZS5DT01QTEVURSwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHhoci5nZXRMYXN0RXJyb3JDb2RlKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSB3ZWJjaGFubmVsV3JhcHBlci5FcnJvckNvZGUuTk9fRVJST1I6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIganNvbiA9IHhoci5nZXRSZXNwb25zZUpzb24oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlYnVnKExPR19UQUckZCwgJ1hIUiByZWNlaXZlZDonLCBKU09OLnN0cmluZ2lmeShqc29uKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGpzb24pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2Ugd2ViY2hhbm5lbFdyYXBwZXIuRXJyb3JDb2RlLlRJTUVPVVQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWJ1ZyhMT0dfVEFHJGQsICdSUEMgXCInICsgcnBjTmFtZSArICdcIiB0aW1lZCBvdXQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5ERUFETElORV9FWENFRURFRCwgJ1JlcXVlc3QgdGltZSBvdXQnKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSB3ZWJjaGFubmVsV3JhcHBlci5FcnJvckNvZGUuSFRUUF9FUlJPUjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzdGF0dXNfMSA9IHhoci5nZXRTdGF0dXMoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlYnVnKExPR19UQUckZCwgJ1JQQyBcIicgKyBycGNOYW1lICsgJ1wiIGZhaWxlZCB3aXRoIHN0YXR1czonLCBzdGF0dXNfMSwgJ3Jlc3BvbnNlIHRleHQ6JywgeGhyLmdldFJlc3BvbnNlVGV4dCgpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdGF0dXNfMSA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVzcG9uc2VFcnJvciA9IHhoci5nZXRSZXNwb25zZUpzb24oKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZXJyb3I7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEhcmVzcG9uc2VFcnJvciAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAhIXJlc3BvbnNlRXJyb3Iuc3RhdHVzICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICEhcmVzcG9uc2VFcnJvci5tZXNzYWdlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmaXJlc3RvcmVFcnJvckNvZGUgPSBtYXBDb2RlRnJvbUh0dHBSZXNwb25zZUVycm9yU3RhdHVzKHJlc3BvbnNlRXJyb3Iuc3RhdHVzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KG5ldyBGaXJlc3RvcmVFcnJvcihmaXJlc3RvcmVFcnJvckNvZGUsIHJlc3BvbnNlRXJyb3IubWVzc2FnZSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLlVOS05PV04sICdTZXJ2ZXIgcmVzcG9uZGVkIHdpdGggc3RhdHVzICcgKyB4aHIuZ2V0U3RhdHVzKCkpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiB3ZSByZWNlaXZlZCBhbiBIVFRQX0VSUk9SIGJ1dCB0aGVyZSdzIG5vIHN0YXR1cyBjb2RlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGl0J3MgbW9zdCBwcm9iYWJseSBhIGNvbm5lY3Rpb24gaXNzdWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWJ1ZyhMT0dfVEFHJGQsICdSUEMgXCInICsgcnBjTmFtZSArICdcIiBmYWlsZWQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWplY3QobmV3IEZpcmVzdG9yZUVycm9yKENvZGUuVU5BVkFJTEFCTEUsICdDb25uZWN0aW9uIGZhaWxlZC4nKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZhaWwoJ1JQQyBcIicgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJwY05hbWUgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdcIiBmYWlsZWQgd2l0aCB1bmFudGljaXBhdGVkICcgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICd3ZWJjaGFubmVsIGVycm9yICcgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHhoci5nZXRMYXN0RXJyb3JDb2RlKCkgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICc6ICcgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHhoci5nZXRMYXN0RXJyb3IoKSArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJywgZ2l2aW5nIHVwLicpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGZpbmFsbHkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlYnVnKExPR19UQUckZCwgJ1JQQyBcIicgKyBycGNOYW1lICsgJ1wiIGNvbXBsZXRlZC4nKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIC8vIFRoZSBkYXRhYmFzZSBmaWVsZCBpcyBhbHJlYWR5IGVuY29kZWQgaW4gVVJMLiBTcGVjaWZ5aW5nIGl0IGFnYWluIGluXHJcbiAgICAgICAgICAgIC8vIHRoZSBib2R5IGlzIG5vdCBuZWNlc3NhcnkgaW4gcHJvZHVjdGlvbiwgYW5kIHdpbGwgY2F1c2UgZHVwbGljYXRlIGZpZWxkXHJcbiAgICAgICAgICAgIC8vIGVycm9ycyBpbiB0aGUgRmlyZXN0b3JlIEVtdWxhdG9yLiBMZXQncyByZW1vdmUgaXQuXHJcbiAgICAgICAgICAgIHZhciBqc29uT2JqID0gdHNsaWIuX19hc3NpZ24oe30sIHJlcXVlc3QpO1xyXG4gICAgICAgICAgICBkZWxldGUganNvbk9iai5kYXRhYmFzZTtcclxuICAgICAgICAgICAgdmFyIHJlcXVlc3RTdHJpbmcgPSBKU09OLnN0cmluZ2lmeShqc29uT2JqKTtcclxuICAgICAgICAgICAgZGVidWcoTE9HX1RBRyRkLCAnWEhSIHNlbmRpbmc6ICcsIHVybCArICcgJyArIHJlcXVlc3RTdHJpbmcpO1xyXG4gICAgICAgICAgICAvLyBDb250ZW50LVR5cGU6IHRleHQvcGxhaW4gd2lsbCBhdm9pZCBwcmVmbGlnaHQgcmVxdWVzdHMgd2hpY2ggbWlnaHRcclxuICAgICAgICAgICAgLy8gbWVzcyB3aXRoIENPUlMgYW5kIHJlZGlyZWN0cyBieSBwcm94aWVzLiBJZiB3ZSBhZGQgY3VzdG9tIGhlYWRlcnNcclxuICAgICAgICAgICAgLy8gd2Ugd2lsbCBuZWVkIHRvIGNoYW5nZSB0aGlzIGNvZGUgdG8gcG90ZW50aWFsbHkgdXNlIHRoZVxyXG4gICAgICAgICAgICAvLyAkaHR0cE92ZXJ3cml0ZSBwYXJhbWV0ZXIgc3VwcG9ydGVkIGJ5IEVTRiB0byBhdm9pZFxyXG4gICAgICAgICAgICAvLyB0cmlnZ2VyaW5nIHByZWZsaWdodCByZXF1ZXN0cy5cclxuICAgICAgICAgICAgdmFyIGhlYWRlcnMgPSB7ICdDb250ZW50LVR5cGUnOiAndGV4dC9wbGFpbicgfTtcclxuICAgICAgICAgICAgX3RoaXMubW9kaWZ5SGVhZGVyc0ZvclJlcXVlc3QoaGVhZGVycywgdG9rZW4pO1xyXG4gICAgICAgICAgICB4aHIuc2VuZCh1cmwsICdQT1NUJywgcmVxdWVzdFN0cmluZywgaGVhZGVycywgWEhSX1RJTUVPVVRfU0VDUyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgV2ViQ2hhbm5lbENvbm5lY3Rpb24ucHJvdG90eXBlLmludm9rZVN0cmVhbWluZ1JQQyA9IGZ1bmN0aW9uIChycGNOYW1lLCByZXF1ZXN0LCB0b2tlbikge1xyXG4gICAgICAgIC8vIFRoZSBSRVNUIEFQSSBhdXRvbWF0aWNhbGx5IGFnZ3JlZ2F0ZXMgYWxsIG9mIHRoZSBzdHJlYW1lZCByZXN1bHRzLCBzbyB3ZVxyXG4gICAgICAgIC8vIGNhbiBqdXN0IHVzZSB0aGUgbm9ybWFsIGludm9rZSgpIG1ldGhvZC5cclxuICAgICAgICByZXR1cm4gdGhpcy5pbnZva2VSUEMocnBjTmFtZSwgcmVxdWVzdCwgdG9rZW4pO1xyXG4gICAgfTtcclxuICAgIFdlYkNoYW5uZWxDb25uZWN0aW9uLnByb3RvdHlwZS5vcGVuU3RyZWFtID0gZnVuY3Rpb24gKHJwY05hbWUsIHRva2VuKSB7XHJcbiAgICAgICAgdmFyIHVybFBhcnRzID0gW1xyXG4gICAgICAgICAgICB0aGlzLmJhc2VVcmwsXHJcbiAgICAgICAgICAgICcvJyxcclxuICAgICAgICAgICAgUlBDX1NUUkVBTV9TRVJWSUNFLFxyXG4gICAgICAgICAgICAnLycsXHJcbiAgICAgICAgICAgIHJwY05hbWUsXHJcbiAgICAgICAgICAgICcvY2hhbm5lbCdcclxuICAgICAgICBdO1xyXG4gICAgICAgIHZhciB3ZWJjaGFubmVsVHJhbnNwb3J0ID0gd2ViY2hhbm5lbFdyYXBwZXIuY3JlYXRlV2ViQ2hhbm5lbFRyYW5zcG9ydCgpO1xyXG4gICAgICAgIHZhciByZXF1ZXN0ID0ge1xyXG4gICAgICAgICAgICAvLyBCYWNrZ3JvdW5kIGNoYW5uZWwgdGVzdCBhdm9pZHMgdGhlIGluaXRpYWwgdHdvIHRlc3QgY2FsbHMgYW5kIGRlY3JlYXNlc1xyXG4gICAgICAgICAgICAvLyBpbml0aWFsIGNvbGQgc3RhcnQgdGltZS5cclxuICAgICAgICAgICAgLy8gVE9ETyhkaW1vbmQpOiB3ZW5ib3pAIG1lbnRpb25lZCB0aGlzIG1pZ2h0IGFmZmVjdCB1c2Ugd2l0aCBwcm94aWVzIGFuZFxyXG4gICAgICAgICAgICAvLyB3ZSBzaG91bGQgbW9uaXRvciBjbG9zZWx5IGZvciBhbnkgcmVwb3J0cy5cclxuICAgICAgICAgICAgYmFja2dyb3VuZENoYW5uZWxUZXN0OiB0cnVlLFxyXG4gICAgICAgICAgICAvLyBSZXF1aXJlZCBmb3IgYmFja2VuZCBzdGlja2luZXNzLCByb3V0aW5nIGJlaGF2aW9yIGlzIGJhc2VkIG9uIHRoaXNcclxuICAgICAgICAgICAgLy8gcGFyYW1ldGVyLlxyXG4gICAgICAgICAgICBodHRwU2Vzc2lvbklkUGFyYW06ICdnc2Vzc2lvbmlkJyxcclxuICAgICAgICAgICAgaW5pdE1lc3NhZ2VIZWFkZXJzOiB7fSxcclxuICAgICAgICAgICAgbWVzc2FnZVVybFBhcmFtczoge1xyXG4gICAgICAgICAgICAgICAgLy8gVGhpcyBwYXJhbSBpcyB1c2VkIHRvIGltcHJvdmUgcm91dGluZyBhbmQgcHJvamVjdCBpc29sYXRpb24gYnkgdGhlXHJcbiAgICAgICAgICAgICAgICAvLyBiYWNrZW5kIGFuZCBtdXN0IGJlIGluY2x1ZGVkIGluIGV2ZXJ5IHJlcXVlc3QuXHJcbiAgICAgICAgICAgICAgICBkYXRhYmFzZTogXCJwcm9qZWN0cy9cIiArIHRoaXMuZGF0YWJhc2VJZC5wcm9qZWN0SWQgKyBcIi9kYXRhYmFzZXMvXCIgKyB0aGlzLmRhdGFiYXNlSWQuZGF0YWJhc2VcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgc2VuZFJhd0pzb246IHRydWUsXHJcbiAgICAgICAgICAgIHN1cHBvcnRzQ3Jvc3NEb21haW5YaHI6IHRydWUsXHJcbiAgICAgICAgICAgIGludGVybmFsQ2hhbm5lbFBhcmFtczoge1xyXG4gICAgICAgICAgICAgICAgLy8gT3ZlcnJpZGUgdGhlIGRlZmF1bHQgdGltZW91dCAocmFuZG9taXplZCBiZXR3ZWVuIDEwLTIwIHNlY29uZHMpIHNpbmNlXHJcbiAgICAgICAgICAgICAgICAvLyBhIGxhcmdlIHdyaXRlIGJhdGNoIG9uIGEgc2xvdyBpbnRlcm5ldCBjb25uZWN0aW9uIG1heSB0YWtlIGEgbG9uZ1xyXG4gICAgICAgICAgICAgICAgLy8gdGltZSB0byBzZW5kIHRvIHRoZSBiYWNrZW5kLiBSYXRoZXIgdGhhbiBoYXZlIFdlYkNoYW5uZWwgaW1wb3NlIGFcclxuICAgICAgICAgICAgICAgIC8vIHRpZ2h0IHRpbWVvdXQgd2hpY2ggY291bGQgbGVhZCB0byBpbmZpbml0ZSB0aW1lb3V0cyBhbmQgcmV0cmllcywgd2VcclxuICAgICAgICAgICAgICAgIC8vIHNldCBpdCB2ZXJ5IGxhcmdlICg1LTEwIG1pbnV0ZXMpIGFuZCByZWx5IG9uIHRoZSBicm93c2VyJ3MgYnVpbHRpblxyXG4gICAgICAgICAgICAgICAgLy8gdGltZW91dHMgdG8ga2ljayBpbiBpZiB0aGUgcmVxdWVzdCBpc24ndCB3b3JraW5nLlxyXG4gICAgICAgICAgICAgICAgZm9yd2FyZENoYW5uZWxSZXF1ZXN0VGltZW91dE1zOiAxMCAqIDYwICogMTAwMFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBmb3JjZUxvbmdQb2xsaW5nOiB0aGlzLmZvcmNlTG9uZ1BvbGxpbmdcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMubW9kaWZ5SGVhZGVyc0ZvclJlcXVlc3QocmVxdWVzdC5pbml0TWVzc2FnZUhlYWRlcnMsIHRva2VuKTtcclxuICAgICAgICAvLyBTZW5kaW5nIHRoZSBjdXN0b20gaGVhZGVycyB3ZSBqdXN0IGFkZGVkIHRvIHJlcXVlc3QuaW5pdE1lc3NhZ2VIZWFkZXJzXHJcbiAgICAgICAgLy8gKEF1dGhvcml6YXRpb24sIGV0Yy4pIHdpbGwgdHJpZ2dlciB0aGUgYnJvd3NlciB0byBtYWtlIGEgQ09SUyBwcmVmbGlnaHRcclxuICAgICAgICAvLyByZXF1ZXN0IGJlY2F1c2UgdGhlIFhIUiB3aWxsIG5vIGxvbmdlciBtZWV0IHRoZSBjcml0ZXJpYSBmb3IgYSBcInNpbXBsZVwiXHJcbiAgICAgICAgLy8gQ09SUyByZXF1ZXN0OlxyXG4gICAgICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0hUVFAvQ09SUyNTaW1wbGVfcmVxdWVzdHNcclxuICAgICAgICAvL1xyXG4gICAgICAgIC8vIFRoZXJlZm9yZSB0byBhdm9pZCB0aGUgQ09SUyBwcmVmbGlnaHQgcmVxdWVzdCAoYW4gZXh0cmEgbmV0d29ya1xyXG4gICAgICAgIC8vIHJvdW5kdHJpcCksIHdlIHVzZSB0aGUgaHR0cEhlYWRlcnNPdmVyd3JpdGVQYXJhbSBvcHRpb24gdG8gc3BlY2lmeSB0aGF0XHJcbiAgICAgICAgLy8gdGhlIGhlYWRlcnMgc2hvdWxkIGluc3RlYWQgYmUgZW5jb2RlZCBpbnRvIGEgc3BlY2lhbCBcIiRodHRwSGVhZGVyc1wiIHF1ZXJ5XHJcbiAgICAgICAgLy8gcGFyYW1ldGVyLCB3aGljaCBpcyByZWNvZ25pemVkIGJ5IHRoZSB3ZWJjaGFubmVsIGJhY2tlbmQuIFRoaXMgaXNcclxuICAgICAgICAvLyBmb3JtYWxseSBkZWZpbmVkIGhlcmU6XHJcbiAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2dvb2dsZS9jbG9zdXJlLWxpYnJhcnkvYmxvYi9iMGUxODE1YjEzZmI5MmE0NmQ3YzliM2MzMGRlNWQ2YTM5NmEzMjQ1L2Nsb3N1cmUvZ29vZy9uZXQvcnBjL2h0dHBjb3JzLmpzI0wzMlxyXG4gICAgICAgIC8vXHJcbiAgICAgICAgLy8gQnV0IGZvciBzb21lIHVuY2xlYXIgcmVhc29uIChzZWVcclxuICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vZmlyZWJhc2UvZmlyZWJhc2UtanMtc2RrL2lzc3Vlcy83MDMpLCB0aGlzIGJyZWFrc1xyXG4gICAgICAgIC8vIFJlYWN0TmF0aXZlIGFuZCBzbyB3ZSBleGNsdWRlIGl0LCB3aGljaCBqdXN0IG1lYW5zIFJlYWN0TmF0aXZlIG1heSBiZVxyXG4gICAgICAgIC8vIHN1YmplY3QgdG8gdGhlIGV4dHJhIG5ldHdvcmsgcm91bmR0cmlwIGZvciBDT1JTIHByZWZsaWdodC5cclxuICAgICAgICBpZiAoIXV0aWwuaXNSZWFjdE5hdGl2ZSgpKSB7XHJcbiAgICAgICAgICAgIHJlcXVlc3QuaHR0cEhlYWRlcnNPdmVyd3JpdGVQYXJhbSA9ICckaHR0cEhlYWRlcnMnO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgdXJsID0gdXJsUGFydHMuam9pbignJyk7XHJcbiAgICAgICAgZGVidWcoTE9HX1RBRyRkLCAnQ3JlYXRpbmcgV2ViQ2hhbm5lbDogJyArIHVybCArICcgJyArIHJlcXVlc3QpO1xyXG4gICAgICAgIHZhciBjaGFubmVsID0gd2ViY2hhbm5lbFRyYW5zcG9ydC5jcmVhdGVXZWJDaGFubmVsKHVybCwgcmVxdWVzdCk7XHJcbiAgICAgICAgLy8gV2ViQ2hhbm5lbCBzdXBwb3J0cyBzZW5kaW5nIHRoZSBmaXJzdCBtZXNzYWdlIHdpdGggdGhlIGhhbmRzaGFrZSAtIHNhdmluZ1xyXG4gICAgICAgIC8vIGEgbmV0d29yayByb3VuZCB0cmlwLiBIb3dldmVyLCBpdCB3aWxsIGhhdmUgdG8gY2FsbCBzZW5kIGluIHRoZSBzYW1lXHJcbiAgICAgICAgLy8gSlMgZXZlbnQgbG9vcCBhcyBvcGVuLiBJbiBvcmRlciB0byBlbmZvcmNlIHRoaXMsIHdlIGRlbGF5IGFjdHVhbGx5XHJcbiAgICAgICAgLy8gb3BlbmluZyB0aGUgV2ViQ2hhbm5lbCB1bnRpbCBzZW5kIGlzIGNhbGxlZC4gV2hldGhlciB3ZSBoYXZlIGNhbGxlZFxyXG4gICAgICAgIC8vIG9wZW4gaXMgdHJhY2tlZCB3aXRoIHRoaXMgdmFyaWFibGUuXHJcbiAgICAgICAgdmFyIG9wZW5lZCA9IGZhbHNlO1xyXG4gICAgICAgIC8vIEEgZmxhZyB0byBkZXRlcm1pbmUgd2hldGhlciB0aGUgc3RyZWFtIHdhcyBjbG9zZWQgKGJ5IHVzIG9yIHRocm91Z2ggYW5cclxuICAgICAgICAvLyBlcnJvci9jbG9zZSBldmVudCkgdG8gYXZvaWQgZGVsaXZlcmluZyBtdWx0aXBsZSBjbG9zZSBldmVudHMgb3Igc2VuZGluZ1xyXG4gICAgICAgIC8vIG9uIGEgY2xvc2VkIHN0cmVhbVxyXG4gICAgICAgIHZhciBjbG9zZWQgPSBmYWxzZTtcclxuICAgICAgICB2YXIgc3RyZWFtQnJpZGdlID0gbmV3IFN0cmVhbUJyaWRnZSh7XHJcbiAgICAgICAgICAgIHNlbmRGbjogZnVuY3Rpb24gKG1zZykge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFjbG9zZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIW9wZW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWJ1ZyhMT0dfVEFHJGQsICdPcGVuaW5nIFdlYkNoYW5uZWwgdHJhbnNwb3J0LicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGFubmVsLm9wZW4oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3BlbmVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZGVidWcoTE9HX1RBRyRkLCAnV2ViQ2hhbm5lbCBzZW5kaW5nOicsIG1zZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgY2hhbm5lbC5zZW5kKG1zZyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBkZWJ1ZyhMT0dfVEFHJGQsICdOb3Qgc2VuZGluZyBiZWNhdXNlIFdlYkNoYW5uZWwgaXMgY2xvc2VkOicsIG1zZyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGNsb3NlRm46IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGNoYW5uZWwuY2xvc2UoKTsgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIENsb3N1cmUgZXZlbnRzIGFyZSBndWFyZGVkIGFuZCBleGNlcHRpb25zIGFyZSBzd2FsbG93ZWQsIHNvIGNhdGNoIGFueVxyXG4gICAgICAgIC8vIGV4Y2VwdGlvbiBhbmQgcmV0aHJvdyB1c2luZyBhIHNldFRpbWVvdXQgc28gdGhleSBiZWNvbWUgdmlzaWJsZSBhZ2Fpbi5cclxuICAgICAgICAvLyBOb3RlIHRoYXQgZXZlbnR1YWxseSB0aGlzIGZ1bmN0aW9uIGNvdWxkIGdvIGF3YXkgaWYgd2UgYXJlIGNvbmZpZGVudFxyXG4gICAgICAgIC8vIGVub3VnaCB0aGUgY29kZSBpcyBleGNlcHRpb24gZnJlZS5cclxuICAgICAgICB2YXIgdW5ndWFyZGVkRXZlbnRMaXN0ZW4gPSBmdW5jdGlvbiAodHlwZSwgZm4pIHtcclxuICAgICAgICAgICAgLy8gVE9ETyhkaW1vbmQpOiBjbG9zdXJlIHR5cGluZyBzZWVtcyBicm9rZW4gYmVjYXVzZSBXZWJDaGFubmVsIGRvZXNcclxuICAgICAgICAgICAgLy8gbm90IGltcGxlbWVudCBnb29nLmV2ZW50cy5MaXN0ZW5hYmxlXHJcbiAgICAgICAgICAgIGNoYW5uZWwubGlzdGVuKHR5cGUsIGZ1bmN0aW9uIChwYXJhbSkge1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBmbihwYXJhbSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBlO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sIDApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHVuZ3VhcmRlZEV2ZW50TGlzdGVuKHdlYmNoYW5uZWxXcmFwcGVyLldlYkNoYW5uZWwuRXZlbnRUeXBlLk9QRU4sIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKCFjbG9zZWQpIHtcclxuICAgICAgICAgICAgICAgIGRlYnVnKExPR19UQUckZCwgJ1dlYkNoYW5uZWwgdHJhbnNwb3J0IG9wZW5lZC4nKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHVuZ3VhcmRlZEV2ZW50TGlzdGVuKHdlYmNoYW5uZWxXcmFwcGVyLldlYkNoYW5uZWwuRXZlbnRUeXBlLkNMT1NFLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmICghY2xvc2VkKSB7XHJcbiAgICAgICAgICAgICAgICBjbG9zZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgZGVidWcoTE9HX1RBRyRkLCAnV2ViQ2hhbm5lbCB0cmFuc3BvcnQgY2xvc2VkJyk7XHJcbiAgICAgICAgICAgICAgICBzdHJlYW1CcmlkZ2UuY2FsbE9uQ2xvc2UoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHVuZ3VhcmRlZEV2ZW50TGlzdGVuKHdlYmNoYW5uZWxXcmFwcGVyLldlYkNoYW5uZWwuRXZlbnRUeXBlLkVSUk9SLCBmdW5jdGlvbiAoZXJyKSB7XHJcbiAgICAgICAgICAgIGlmICghY2xvc2VkKSB7XHJcbiAgICAgICAgICAgICAgICBjbG9zZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgZGVidWcoTE9HX1RBRyRkLCAnV2ViQ2hhbm5lbCB0cmFuc3BvcnQgZXJyb3JlZDonLCBlcnIpO1xyXG4gICAgICAgICAgICAgICAgc3RyZWFtQnJpZGdlLmNhbGxPbkNsb3NlKG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLlVOQVZBSUxBQkxFLCAnVGhlIG9wZXJhdGlvbiBjb3VsZCBub3QgYmUgY29tcGxldGVkJykpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdW5ndWFyZGVkRXZlbnRMaXN0ZW4od2ViY2hhbm5lbFdyYXBwZXIuV2ViQ2hhbm5lbC5FdmVudFR5cGUuTUVTU0FHRSwgZnVuY3Rpb24gKG1zZykge1xyXG4gICAgICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgICAgIGlmICghY2xvc2VkKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbXNnRGF0YSA9IG1zZy5kYXRhWzBdO1xyXG4gICAgICAgICAgICAgICAgYXNzZXJ0KCEhbXNnRGF0YSwgJ0dvdCBhIHdlYmNoYW5uZWwgbWVzc2FnZSB3aXRob3V0IGRhdGEuJyk7XHJcbiAgICAgICAgICAgICAgICAvLyBUT0RPKGIvMzUxNDM4OTEpOiBUaGVyZSBpcyBhIGJ1ZyBpbiBPbmUgUGxhdGZvcm0gdGhhdCBjYXVzZWQgZXJyb3JzXHJcbiAgICAgICAgICAgICAgICAvLyAoYW5kIG9ubHkgZXJyb3JzKSB0byBiZSB3cmFwcGVkIGluIGFuIGV4dHJhIGFycmF5LiBUbyBiZSBmb3J3YXJkXHJcbiAgICAgICAgICAgICAgICAvLyBjb21wYXRpYmxlIHdpdGggdGhlIGJ1ZyB3ZSBuZWVkIHRvIGNoZWNrIGVpdGhlciBjb25kaXRpb24uIFRoZSBsYXR0ZXJcclxuICAgICAgICAgICAgICAgIC8vIGNhbiBiZSByZW1vdmVkIG9uY2UgdGhlIGZpeCBoYXMgYmVlbiByb2xsZWQgb3V0LlxyXG4gICAgICAgICAgICAgICAgLy8gVXNlIGFueSBiZWNhdXNlIG1zZ0RhdGEuZXJyb3IgaXMgbm90IHR5cGVkLlxyXG4gICAgICAgICAgICAgICAgdmFyIG1zZ0RhdGFPckVycm9yID0gbXNnRGF0YTtcclxuICAgICAgICAgICAgICAgIHZhciBlcnJvciA9IG1zZ0RhdGFPckVycm9yLmVycm9yIHx8ICgoX2EgPSBtc2dEYXRhT3JFcnJvclswXSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmVycm9yKTtcclxuICAgICAgICAgICAgICAgIGlmIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlYnVnKExPR19UQUckZCwgJ1dlYkNoYW5uZWwgcmVjZWl2ZWQgZXJyb3I6JywgZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGVycm9yLnN0YXR1cyB3aWxsIGJlIGEgc3RyaW5nIGxpa2UgJ09LJyBvciAnTk9UX0ZPVU5EJy5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgc3RhdHVzXzIgPSBlcnJvci5zdGF0dXM7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvZGUgPSBtYXBDb2RlRnJvbVJwY1N0YXR1cyhzdGF0dXNfMik7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1lc3NhZ2UgPSBlcnJvci5tZXNzYWdlO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjb2RlID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29kZSA9IENvZGUuSU5URVJOQUw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UgPVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1Vua25vd24gZXJyb3Igc3RhdHVzOiAnICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXNfMiArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJyB3aXRoIG1lc3NhZ2UgJyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3IubWVzc2FnZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gTWFyayBjbG9zZWQgc28gbm8gZnVydGhlciBldmVudHMgYXJlIHByb3BhZ2F0ZWRcclxuICAgICAgICAgICAgICAgICAgICBjbG9zZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIHN0cmVhbUJyaWRnZS5jYWxsT25DbG9zZShuZXcgRmlyZXN0b3JlRXJyb3IoY29kZSwgbWVzc2FnZSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNoYW5uZWwuY2xvc2UoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlYnVnKExPR19UQUckZCwgJ1dlYkNoYW5uZWwgcmVjZWl2ZWQ6JywgbXNnRGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgc3RyZWFtQnJpZGdlLmNhbGxPbk1lc3NhZ2UobXNnRGF0YSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgLy8gVGVjaG5pY2FsbHkgd2UgY291bGQvc2hvdWxkIHdhaXQgZm9yIHRoZSBXZWJDaGFubmVsIG9wZW5lZCBldmVudCxcclxuICAgICAgICAgICAgLy8gYnV0IGJlY2F1c2Ugd2Ugd2FudCB0byBzZW5kIHRoZSBmaXJzdCBtZXNzYWdlIHdpdGggdGhlIFdlYkNoYW5uZWxcclxuICAgICAgICAgICAgLy8gaGFuZHNoYWtlIHdlIHByZXRlbmQgdGhlIGNoYW5uZWwgb3BlbmVkIGhlcmUgKGFzeW5jaHJvbm91c2x5KSwgYW5kXHJcbiAgICAgICAgICAgIC8vIHRoZW4gZGVsYXkgdGhlIGFjdHVhbCBvcGVuIHVudGlsIHRoZSBmaXJzdCBtZXNzYWdlIGlzIHNlbnQuXHJcbiAgICAgICAgICAgIHN0cmVhbUJyaWRnZS5jYWxsT25PcGVuKCk7XHJcbiAgICAgICAgfSwgMCk7XHJcbiAgICAgICAgcmV0dXJuIHN0cmVhbUJyaWRnZTtcclxuICAgIH07XHJcbiAgICAvLyB2aXNpYmxlIGZvciB0ZXN0aW5nXHJcbiAgICBXZWJDaGFubmVsQ29ubmVjdGlvbi5wcm90b3R5cGUubWFrZVVybCA9IGZ1bmN0aW9uIChycGNOYW1lKSB7XHJcbiAgICAgICAgdmFyIHVybFJwY05hbWUgPSBSUENfTkFNRV9SRVNUX01BUFBJTkdbcnBjTmFtZV07XHJcbiAgICAgICAgYXNzZXJ0KHVybFJwY05hbWUgIT09IHVuZGVmaW5lZCwgJ1Vua25vd24gUkVTVCBtYXBwaW5nIGZvcjogJyArIHJwY05hbWUpO1xyXG4gICAgICAgIHJldHVybiAodGhpcy5iYXNlVXJsICtcclxuICAgICAgICAgICAgJy8nICtcclxuICAgICAgICAgICAgUlBDX1VSTF9WRVJTSU9OICtcclxuICAgICAgICAgICAgJy9wcm9qZWN0cy8nICtcclxuICAgICAgICAgICAgdGhpcy5kYXRhYmFzZUlkLnByb2plY3RJZCArXHJcbiAgICAgICAgICAgICcvZGF0YWJhc2VzLycgK1xyXG4gICAgICAgICAgICB0aGlzLmRhdGFiYXNlSWQuZGF0YWJhc2UgK1xyXG4gICAgICAgICAgICAnL2RvY3VtZW50czonICtcclxuICAgICAgICAgICAgdXJsUnBjTmFtZSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFdlYkNoYW5uZWxDb25uZWN0aW9uO1xyXG59KCkpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxudmFyIEJyb3dzZXJQbGF0Zm9ybSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEJyb3dzZXJQbGF0Zm9ybSgpIHtcclxuICAgICAgICB0aGlzLmVtcHR5Qnl0ZVN0cmluZyA9ICcnO1xyXG4gICAgICAgIHRoaXMuYmFzZTY0QXZhaWxhYmxlID0gdHlwZW9mIGF0b2IgIT09ICd1bmRlZmluZWQnO1xyXG4gICAgfVxyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEJyb3dzZXJQbGF0Zm9ybS5wcm90b3R5cGUsIFwiZG9jdW1lbnRcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHlwZW9mIGRvY3VtZW50ICE9PSAndW5kZWZpbmVkJyA/IGRvY3VtZW50IDogbnVsbDtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShCcm93c2VyUGxhdGZvcm0ucHJvdG90eXBlLCBcIndpbmRvd1wiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHdpbmRvdyA6IG51bGw7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBCcm93c2VyUGxhdGZvcm0ucHJvdG90eXBlLmxvYWRDb25uZWN0aW9uID0gZnVuY3Rpb24gKGRhdGFiYXNlSW5mbykge1xyXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUobmV3IFdlYkNoYW5uZWxDb25uZWN0aW9uKGRhdGFiYXNlSW5mbykpO1xyXG4gICAgfTtcclxuICAgIEJyb3dzZXJQbGF0Zm9ybS5wcm90b3R5cGUubmV3Q29ubmVjdGl2aXR5TW9uaXRvciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoQnJvd3NlckNvbm5lY3Rpdml0eU1vbml0b3IuaXNBdmFpbGFibGUoKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEJyb3dzZXJDb25uZWN0aXZpdHlNb25pdG9yKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IE5vb3BDb25uZWN0aXZpdHlNb25pdG9yKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIEJyb3dzZXJQbGF0Zm9ybS5wcm90b3R5cGUubmV3U2VyaWFsaXplciA9IGZ1bmN0aW9uIChkYXRhYmFzZUlkKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBKc29uUHJvdG9TZXJpYWxpemVyKGRhdGFiYXNlSWQsIHsgdXNlUHJvdG8zSnNvbjogdHJ1ZSB9KTtcclxuICAgIH07XHJcbiAgICBCcm93c2VyUGxhdGZvcm0ucHJvdG90eXBlLmZvcm1hdEpTT04gPSBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkodmFsdWUpO1xyXG4gICAgfTtcclxuICAgIEJyb3dzZXJQbGF0Zm9ybS5wcm90b3R5cGUuYXRvYiA9IGZ1bmN0aW9uIChlbmNvZGVkKSB7XHJcbiAgICAgICAgcmV0dXJuIGF0b2IoZW5jb2RlZCk7XHJcbiAgICB9O1xyXG4gICAgQnJvd3NlclBsYXRmb3JtLnByb3RvdHlwZS5idG9hID0gZnVuY3Rpb24gKHJhdykge1xyXG4gICAgICAgIHJldHVybiBidG9hKHJhdyk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEJyb3dzZXJQbGF0Zm9ybTtcclxufSgpKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBUaGlzIGNvZGUgbmVlZHMgdG8gcnVuIGJlZm9yZSBGaXJlc3RvcmUgaXMgdXNlZC4gVGhpcyBjYW4gYmUgYWNoaWV2ZWQgaW5cclxuICogc2V2ZXJhbCB3YXlzOlxyXG4gKiAgIDEpIFRocm91Z2ggdGhlIEpTQ29tcGlsZXIgY29tcGlsaW5nIHRoaXMgY29kZSBhbmQgdGhlbiAoYXV0b21hdGljYWxseSlcclxuICogICAgICBleGVjdXRpbmcgaXQgYmVmb3JlIGV4cG9ydGluZyB0aGUgRmlyZXN0b3JlIHN5bWJvbHMuXHJcbiAqICAgMikgVGhyb3VnaCBpbXBvcnRpbmcgdGhpcyBtb2R1bGUgZmlyc3QgaW4gYSBGaXJlc3RvcmUgbWFpbiBtb2R1bGVcclxuICovXHJcblBsYXRmb3JtU3VwcG9ydC5zZXRQbGF0Zm9ybShuZXcgQnJvd3NlclBsYXRmb3JtKCkpO1xuXG52YXIgbmFtZSA9IFwiQGZpcmViYXNlL2ZpcmVzdG9yZVwiO1xudmFyIHZlcnNpb24gPSBcIjEuOS4xXCI7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiByZWdpc3RlckZpcmVzdG9yZShpbnN0YW5jZSkge1xyXG4gICAgY29uZmlndXJlRm9yRmlyZWJhc2UoaW5zdGFuY2UpO1xyXG4gICAgaW5zdGFuY2UucmVnaXN0ZXJWZXJzaW9uKG5hbWUsIHZlcnNpb24pO1xyXG59XHJcbnJlZ2lzdGVyRmlyZXN0b3JlKGZpcmViYXNlKTtcblxuZXhwb3J0cy5yZWdpc3RlckZpcmVzdG9yZSA9IHJlZ2lzdGVyRmlyZXN0b3JlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguY2pzLmpzLm1hcFxuIiwiLy8gc2hpbSBmb3IgdXNpbmcgcHJvY2VzcyBpbiBicm93c2VyXG52YXIgcHJvY2VzcyA9IG1vZHVsZS5leHBvcnRzID0ge307XG5cbi8vIGNhY2hlZCBmcm9tIHdoYXRldmVyIGdsb2JhbCBpcyBwcmVzZW50IHNvIHRoYXQgdGVzdCBydW5uZXJzIHRoYXQgc3R1YiBpdFxuLy8gZG9uJ3QgYnJlYWsgdGhpbmdzLiAgQnV0IHdlIG5lZWQgdG8gd3JhcCBpdCBpbiBhIHRyeSBjYXRjaCBpbiBjYXNlIGl0IGlzXG4vLyB3cmFwcGVkIGluIHN0cmljdCBtb2RlIGNvZGUgd2hpY2ggZG9lc24ndCBkZWZpbmUgYW55IGdsb2JhbHMuICBJdCdzIGluc2lkZSBhXG4vLyBmdW5jdGlvbiBiZWNhdXNlIHRyeS9jYXRjaGVzIGRlb3B0aW1pemUgaW4gY2VydGFpbiBlbmdpbmVzLlxuXG52YXIgY2FjaGVkU2V0VGltZW91dDtcbnZhciBjYWNoZWRDbGVhclRpbWVvdXQ7XG5cbmZ1bmN0aW9uIGRlZmF1bHRTZXRUaW1vdXQoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdzZXRUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkJyk7XG59XG5mdW5jdGlvbiBkZWZhdWx0Q2xlYXJUaW1lb3V0ICgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2NsZWFyVGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpO1xufVxuKGZ1bmN0aW9uICgpIHtcbiAgICB0cnkge1xuICAgICAgICBpZiAodHlwZW9mIHNldFRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IGRlZmF1bHRTZXRUaW1vdXQ7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0O1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICBpZiAodHlwZW9mIGNsZWFyVGltZW91dCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gZGVmYXVsdENsZWFyVGltZW91dDtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gZGVmYXVsdENsZWFyVGltZW91dDtcbiAgICB9XG59ICgpKVxuZnVuY3Rpb24gcnVuVGltZW91dChmdW4pIHtcbiAgICBpZiAoY2FjaGVkU2V0VGltZW91dCA9PT0gc2V0VGltZW91dCkge1xuICAgICAgICAvL25vcm1hbCBlbnZpcm9tZW50cyBpbiBzYW5lIHNpdHVhdGlvbnNcbiAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9XG4gICAgLy8gaWYgc2V0VGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcbiAgICBpZiAoKGNhY2hlZFNldFRpbWVvdXQgPT09IGRlZmF1bHRTZXRUaW1vdXQgfHwgIWNhY2hlZFNldFRpbWVvdXQpICYmIHNldFRpbWVvdXQpIHtcbiAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7XG4gICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3NcbiAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9IGNhdGNoKGUpe1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0IHRydXN0IHRoZSBnbG9iYWwgb2JqZWN0IHdoZW4gY2FsbGVkIG5vcm1hbGx5XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dC5jYWxsKG51bGwsIGZ1biwgMCk7XG4gICAgICAgIH0gY2F0Y2goZSl7XG4gICAgICAgICAgICAvLyBzYW1lIGFzIGFib3ZlIGJ1dCB3aGVuIGl0J3MgYSB2ZXJzaW9uIG9mIEkuRS4gdGhhdCBtdXN0IGhhdmUgdGhlIGdsb2JhbCBvYmplY3QgZm9yICd0aGlzJywgaG9wZnVsbHkgb3VyIGNvbnRleHQgY29ycmVjdCBvdGhlcndpc2UgaXQgd2lsbCB0aHJvdyBhIGdsb2JhbCBlcnJvclxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbCh0aGlzLCBmdW4sIDApO1xuICAgICAgICB9XG4gICAgfVxuXG5cbn1cbmZ1bmN0aW9uIHJ1bkNsZWFyVGltZW91dChtYXJrZXIpIHtcbiAgICBpZiAoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBjbGVhclRpbWVvdXQpIHtcbiAgICAgICAgLy9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zXG4gICAgICAgIHJldHVybiBjbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9XG4gICAgLy8gaWYgY2xlYXJUaW1lb3V0IHdhc24ndCBhdmFpbGFibGUgYnV0IHdhcyBsYXR0ZXIgZGVmaW5lZFxuICAgIGlmICgoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBkZWZhdWx0Q2xlYXJUaW1lb3V0IHx8ICFjYWNoZWRDbGVhclRpbWVvdXQpICYmIGNsZWFyVGltZW91dCkge1xuICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBjbGVhclRpbWVvdXQ7XG4gICAgICAgIHJldHVybiBjbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gd2hlbiB3aGVuIHNvbWVib2R5IGhhcyBzY3Jld2VkIHdpdGggc2V0VGltZW91dCBidXQgbm8gSS5FLiBtYWRkbmVzc1xuICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfSBjYXRjaCAoZSl7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBXaGVuIHdlIGFyZSBpbiBJLkUuIGJ1dCB0aGUgc2NyaXB0IGhhcyBiZWVuIGV2YWxlZCBzbyBJLkUuIGRvZXNuJ3QgIHRydXN0IHRoZSBnbG9iYWwgb2JqZWN0IHdoZW4gY2FsbGVkIG5vcm1hbGx5XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwobnVsbCwgbWFya2VyKTtcbiAgICAgICAgfSBjYXRjaCAoZSl7XG4gICAgICAgICAgICAvLyBzYW1lIGFzIGFib3ZlIGJ1dCB3aGVuIGl0J3MgYSB2ZXJzaW9uIG9mIEkuRS4gdGhhdCBtdXN0IGhhdmUgdGhlIGdsb2JhbCBvYmplY3QgZm9yICd0aGlzJywgaG9wZnVsbHkgb3VyIGNvbnRleHQgY29ycmVjdCBvdGhlcndpc2UgaXQgd2lsbCB0aHJvdyBhIGdsb2JhbCBlcnJvci5cbiAgICAgICAgICAgIC8vIFNvbWUgdmVyc2lvbnMgb2YgSS5FLiBoYXZlIGRpZmZlcmVudCBydWxlcyBmb3IgY2xlYXJUaW1lb3V0IHZzIHNldFRpbWVvdXRcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQuY2FsbCh0aGlzLCBtYXJrZXIpO1xuICAgICAgICB9XG4gICAgfVxuXG5cblxufVxudmFyIHF1ZXVlID0gW107XG52YXIgZHJhaW5pbmcgPSBmYWxzZTtcbnZhciBjdXJyZW50UXVldWU7XG52YXIgcXVldWVJbmRleCA9IC0xO1xuXG5mdW5jdGlvbiBjbGVhblVwTmV4dFRpY2soKSB7XG4gICAgaWYgKCFkcmFpbmluZyB8fCAhY3VycmVudFF1ZXVlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZHJhaW5pbmcgPSBmYWxzZTtcbiAgICBpZiAoY3VycmVudFF1ZXVlLmxlbmd0aCkge1xuICAgICAgICBxdWV1ZSA9IGN1cnJlbnRRdWV1ZS5jb25jYXQocXVldWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcbiAgICB9XG4gICAgaWYgKHF1ZXVlLmxlbmd0aCkge1xuICAgICAgICBkcmFpblF1ZXVlKCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBkcmFpblF1ZXVlKCkge1xuICAgIGlmIChkcmFpbmluZykge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciB0aW1lb3V0ID0gcnVuVGltZW91dChjbGVhblVwTmV4dFRpY2spO1xuICAgIGRyYWluaW5nID0gdHJ1ZTtcblxuICAgIHZhciBsZW4gPSBxdWV1ZS5sZW5ndGg7XG4gICAgd2hpbGUobGVuKSB7XG4gICAgICAgIGN1cnJlbnRRdWV1ZSA9IHF1ZXVlO1xuICAgICAgICBxdWV1ZSA9IFtdO1xuICAgICAgICB3aGlsZSAoKytxdWV1ZUluZGV4IDwgbGVuKSB7XG4gICAgICAgICAgICBpZiAoY3VycmVudFF1ZXVlKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudFF1ZXVlW3F1ZXVlSW5kZXhdLnJ1bigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcbiAgICAgICAgbGVuID0gcXVldWUubGVuZ3RoO1xuICAgIH1cbiAgICBjdXJyZW50UXVldWUgPSBudWxsO1xuICAgIGRyYWluaW5nID0gZmFsc2U7XG4gICAgcnVuQ2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xufVxuXG5wcm9jZXNzLm5leHRUaWNrID0gZnVuY3Rpb24gKGZ1bikge1xuICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGggLSAxKTtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGFyZ3NbaSAtIDFdID0gYXJndW1lbnRzW2ldO1xuICAgICAgICB9XG4gICAgfVxuICAgIHF1ZXVlLnB1c2gobmV3IEl0ZW0oZnVuLCBhcmdzKSk7XG4gICAgaWYgKHF1ZXVlLmxlbmd0aCA9PT0gMSAmJiAhZHJhaW5pbmcpIHtcbiAgICAgICAgcnVuVGltZW91dChkcmFpblF1ZXVlKTtcbiAgICB9XG59O1xuXG4vLyB2OCBsaWtlcyBwcmVkaWN0aWJsZSBvYmplY3RzXG5mdW5jdGlvbiBJdGVtKGZ1biwgYXJyYXkpIHtcbiAgICB0aGlzLmZ1biA9IGZ1bjtcbiAgICB0aGlzLmFycmF5ID0gYXJyYXk7XG59XG5JdGVtLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5mdW4uYXBwbHkobnVsbCwgdGhpcy5hcnJheSk7XG59O1xucHJvY2Vzcy50aXRsZSA9ICdicm93c2VyJztcbnByb2Nlc3MuYnJvd3NlciA9IHRydWU7XG5wcm9jZXNzLmVudiA9IHt9O1xucHJvY2Vzcy5hcmd2ID0gW107XG5wcm9jZXNzLnZlcnNpb24gPSAnJzsgLy8gZW1wdHkgc3RyaW5nIHRvIGF2b2lkIHJlZ2V4cCBpc3N1ZXNcbnByb2Nlc3MudmVyc2lvbnMgPSB7fTtcblxuZnVuY3Rpb24gbm9vcCgpIHt9XG5cbnByb2Nlc3Mub24gPSBub29wO1xucHJvY2Vzcy5hZGRMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLm9uY2UgPSBub29wO1xucHJvY2Vzcy5vZmYgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLnJlbW92ZUFsbExpc3RlbmVycyA9IG5vb3A7XG5wcm9jZXNzLmVtaXQgPSBub29wO1xucHJvY2Vzcy5wcmVwZW5kTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5wcmVwZW5kT25jZUxpc3RlbmVyID0gbm9vcDtcblxucHJvY2Vzcy5saXN0ZW5lcnMgPSBmdW5jdGlvbiAobmFtZSkgeyByZXR1cm4gW10gfVxuXG5wcm9jZXNzLmJpbmRpbmcgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5iaW5kaW5nIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbn07XG5cbnByb2Nlc3MuY3dkID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gJy8nIH07XG5wcm9jZXNzLmNoZGlyID0gZnVuY3Rpb24gKGRpcikge1xuICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5jaGRpciBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xucHJvY2Vzcy51bWFzayA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gMDsgfTtcbiIsInZhciBjb21tb25qc0dsb2JhbCA9IHR5cGVvZiBnbG9iYWxUaGlzICE9PSAndW5kZWZpbmVkJyA/IGdsb2JhbFRoaXMgOiB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHdpbmRvdyA6IHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnID8gZ2xvYmFsIDogdHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnID8gc2VsZiA6IHt9O1xuXG52YXIgZyxnb29nPWdvb2d8fHt9LGs9Y29tbW9uanNHbG9iYWw7ZnVuY3Rpb24gbShhKXtyZXR1cm4gXCJzdHJpbmdcIj09dHlwZW9mIGF9ZnVuY3Rpb24gYWEoYSl7cmV0dXJuIFwibnVtYmVyXCI9PXR5cGVvZiBhfWZ1bmN0aW9uIG4oYSxiKXthPWEuc3BsaXQoXCIuXCIpO2I9Ynx8aztmb3IodmFyIGM9MDtjPGEubGVuZ3RoO2MrKylpZihiPWJbYVtjXV0sbnVsbD09YilyZXR1cm4gbnVsbDtyZXR1cm4gYn1mdW5jdGlvbiBiYSgpe31cbmZ1bmN0aW9uIHAoYSl7dmFyIGI9dHlwZW9mIGE7aWYoXCJvYmplY3RcIj09YilpZihhKXtpZihhIGluc3RhbmNlb2YgQXJyYXkpcmV0dXJuIFwiYXJyYXlcIjtpZihhIGluc3RhbmNlb2YgT2JqZWN0KXJldHVybiBiO3ZhciBjPU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChhKTtpZihcIltvYmplY3QgV2luZG93XVwiPT1jKXJldHVybiBcIm9iamVjdFwiO2lmKFwiW29iamVjdCBBcnJheV1cIj09Y3x8XCJudW1iZXJcIj09dHlwZW9mIGEubGVuZ3RoJiZcInVuZGVmaW5lZFwiIT10eXBlb2YgYS5zcGxpY2UmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBhLnByb3BlcnR5SXNFbnVtZXJhYmxlJiYhYS5wcm9wZXJ0eUlzRW51bWVyYWJsZShcInNwbGljZVwiKSlyZXR1cm4gXCJhcnJheVwiO2lmKFwiW29iamVjdCBGdW5jdGlvbl1cIj09Y3x8XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGEuY2FsbCYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGEucHJvcGVydHlJc0VudW1lcmFibGUmJiFhLnByb3BlcnR5SXNFbnVtZXJhYmxlKFwiY2FsbFwiKSlyZXR1cm4gXCJmdW5jdGlvblwifWVsc2UgcmV0dXJuIFwibnVsbFwiO1xuZWxzZSBpZihcImZ1bmN0aW9uXCI9PWImJlwidW5kZWZpbmVkXCI9PXR5cGVvZiBhLmNhbGwpcmV0dXJuIFwib2JqZWN0XCI7cmV0dXJuIGJ9ZnVuY3Rpb24gcShhKXtyZXR1cm4gXCJhcnJheVwiPT1wKGEpfWZ1bmN0aW9uIGNhKGEpe3ZhciBiPXAoYSk7cmV0dXJuIFwiYXJyYXlcIj09Ynx8XCJvYmplY3RcIj09YiYmXCJudW1iZXJcIj09dHlwZW9mIGEubGVuZ3RofWZ1bmN0aW9uIHIoYSl7dmFyIGI9dHlwZW9mIGE7cmV0dXJuIFwib2JqZWN0XCI9PWImJm51bGwhPWF8fFwiZnVuY3Rpb25cIj09Yn12YXIgdD1cImNsb3N1cmVfdWlkX1wiKygxRTkqTWF0aC5yYW5kb20oKT4+PjApLGRhPTA7ZnVuY3Rpb24gZWEoYSxiLGMpe3JldHVybiBhLmNhbGwuYXBwbHkoYS5iaW5kLGFyZ3VtZW50cyl9XG5mdW5jdGlvbiBmYShhLGIsYyl7aWYoIWEpdGhyb3cgRXJyb3IoKTtpZigyPGFyZ3VtZW50cy5sZW5ndGgpe3ZhciBkPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywyKTtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgZT1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpO0FycmF5LnByb3RvdHlwZS51bnNoaWZ0LmFwcGx5KGUsZCk7cmV0dXJuIGEuYXBwbHkoYixlKX19cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGEuYXBwbHkoYixhcmd1bWVudHMpfX1mdW5jdGlvbiB1KGEsYixjKXtGdW5jdGlvbi5wcm90b3R5cGUuYmluZCYmLTEhPUZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kLnRvU3RyaW5nKCkuaW5kZXhPZihcIm5hdGl2ZSBjb2RlXCIpP3U9ZWE6dT1mYTtyZXR1cm4gdS5hcHBseShudWxsLGFyZ3VtZW50cyl9XG5mdW5jdGlvbiB2KGEsYil7dmFyIGM9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpO3JldHVybiBmdW5jdGlvbigpe3ZhciBkPWMuc2xpY2UoKTtkLnB1c2guYXBwbHkoZCxhcmd1bWVudHMpO3JldHVybiBhLmFwcGx5KHRoaXMsZCl9fXZhciB3PURhdGUubm93fHxmdW5jdGlvbigpe3JldHVybiArbmV3IERhdGV9O2Z1bmN0aW9uIHgoYSxiKXtmdW5jdGlvbiBjKCl7fWMucHJvdG90eXBlPWIucHJvdG90eXBlO2EuTj1iLnByb3RvdHlwZTthLnByb3RvdHlwZT1uZXcgYzthLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1hO2EueGI9ZnVuY3Rpb24oZCxlLGYpe2Zvcih2YXIgaD1BcnJheShhcmd1bWVudHMubGVuZ3RoLTIpLGw9MjtsPGFyZ3VtZW50cy5sZW5ndGg7bCsrKWhbbC0yXT1hcmd1bWVudHNbbF07cmV0dXJuIGIucHJvdG90eXBlW2VdLmFwcGx5KGQsaCl9O31mdW5jdGlvbiB5KCl7dGhpcy5qPXRoaXMuajt0aGlzLmk9dGhpcy5pO312YXIgaGE9MDt5LnByb3RvdHlwZS5qPSExO3kucHJvdG90eXBlLmxhPWZ1bmN0aW9uKCl7aWYoIXRoaXMuaiYmKHRoaXMuaj0hMCx0aGlzLkcoKSwwIT1oYSkpe3ZhciBhPXRoaXNbdF18fCh0aGlzW3RdPSsrZGEpO319O3kucHJvdG90eXBlLkc9ZnVuY3Rpb24oKXtpZih0aGlzLmkpZm9yKDt0aGlzLmkubGVuZ3RoOyl0aGlzLmkuc2hpZnQoKSgpO307dmFyIGphPUFycmF5LnByb3RvdHlwZS5pbmRleE9mP2Z1bmN0aW9uKGEsYil7cmV0dXJuIEFycmF5LnByb3RvdHlwZS5pbmRleE9mLmNhbGwoYSxiLHZvaWQgMCl9OmZ1bmN0aW9uKGEsYil7aWYobShhKSlyZXR1cm4gbShiKSYmMT09Yi5sZW5ndGg/YS5pbmRleE9mKGIsMCk6LTE7Zm9yKHZhciBjPTA7YzxhLmxlbmd0aDtjKyspaWYoYyBpbiBhJiZhW2NdPT09YilyZXR1cm4gYztyZXR1cm4gLTF9LGxhPUFycmF5LnByb3RvdHlwZS5mb3JFYWNoP2Z1bmN0aW9uKGEsYixjKXtBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGEsYixjKTt9OmZ1bmN0aW9uKGEsYixjKXtmb3IodmFyIGQ9YS5sZW5ndGgsZT1tKGEpP2Euc3BsaXQoXCJcIik6YSxmPTA7ZjxkO2YrKylmIGluIGUmJmIuY2FsbChjLGVbZl0sZixhKTt9O1xuZnVuY3Rpb24gbWEoYSl7YTp7dmFyIGI9bmE7Zm9yKHZhciBjPWEubGVuZ3RoLGQ9bShhKT9hLnNwbGl0KFwiXCIpOmEsZT0wO2U8YztlKyspaWYoZSBpbiBkJiZiLmNhbGwodm9pZCAwLGRbZV0sZSxhKSl7Yj1lO2JyZWFrIGF9Yj0tMTt9cmV0dXJuIDA+Yj9udWxsOm0oYSk/YS5jaGFyQXQoYik6YVtiXX1mdW5jdGlvbiBvYShhKXtyZXR1cm4gQXJyYXkucHJvdG90eXBlLmNvbmNhdC5hcHBseShbXSxhcmd1bWVudHMpfWZ1bmN0aW9uIHBhKGEpe3ZhciBiPWEubGVuZ3RoO2lmKDA8Yil7Zm9yKHZhciBjPUFycmF5KGIpLGQ9MDtkPGI7ZCsrKWNbZF09YVtkXTtyZXR1cm4gY31yZXR1cm4gW119ZnVuY3Rpb24gcWEoYSl7cmV0dXJuIC9eW1xcc1xceGEwXSokLy50ZXN0KGEpfXZhciByYT1TdHJpbmcucHJvdG90eXBlLnRyaW0/ZnVuY3Rpb24oYSl7cmV0dXJuIGEudHJpbSgpfTpmdW5jdGlvbihhKXtyZXR1cm4gL15bXFxzXFx4YTBdKihbXFxzXFxTXSo/KVtcXHNcXHhhMF0qJC8uZXhlYyhhKVsxXX07ZnVuY3Rpb24geihhLGIpe3JldHVybiAtMSE9YS5pbmRleE9mKGIpfWZ1bmN0aW9uIHNhKGEsYil7cmV0dXJuIGE8Yj8tMTphPmI/MTowfXZhciBBO2E6e3ZhciB0YT1rLm5hdmlnYXRvcjtpZih0YSl7dmFyIHVhPXRhLnVzZXJBZ2VudDtpZih1YSl7QT11YTticmVhayBhfX1BPVwiXCI7fWZ1bmN0aW9uIHZhKGEsYixjKXtmb3IodmFyIGQgaW4gYSliLmNhbGwoYyxhW2RdLGQsYSk7fWZ1bmN0aW9uIHdhKGEpe3ZhciBiPXt9LGM7Zm9yKGMgaW4gYSliW2NdPWFbY107cmV0dXJuIGJ9dmFyIHhhPVwiY29uc3RydWN0b3IgaGFzT3duUHJvcGVydHkgaXNQcm90b3R5cGVPZiBwcm9wZXJ0eUlzRW51bWVyYWJsZSB0b0xvY2FsZVN0cmluZyB0b1N0cmluZyB2YWx1ZU9mXCIuc3BsaXQoXCIgXCIpO2Z1bmN0aW9uIHlhKGEsYil7Zm9yKHZhciBjLGQsZT0xO2U8YXJndW1lbnRzLmxlbmd0aDtlKyspe2Q9YXJndW1lbnRzW2VdO2ZvcihjIGluIGQpYVtjXT1kW2NdO2Zvcih2YXIgZj0wO2Y8eGEubGVuZ3RoO2YrKyljPXhhW2ZdLE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChkLGMpJiYoYVtjXT1kW2NdKTt9fWZ1bmN0aW9uIHphKGEpe3phW1wiIFwiXShhKTtyZXR1cm4gYX16YVtcIiBcIl09YmE7ZnVuY3Rpb24gQWEoYSxiKXt2YXIgYz1CYTtyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGMsYSk/Y1thXTpjW2FdPWIoYSl9dmFyIENhPXooQSxcIk9wZXJhXCIpLEI9eihBLFwiVHJpZGVudFwiKXx8eihBLFwiTVNJRVwiKSxEYT16KEEsXCJFZGdlXCIpLEVhPURhfHxCLEZhPXooQSxcIkdlY2tvXCIpJiYhKHooQS50b0xvd2VyQ2FzZSgpLFwid2Via2l0XCIpJiYheihBLFwiRWRnZVwiKSkmJiEoeihBLFwiVHJpZGVudFwiKXx8eihBLFwiTVNJRVwiKSkmJiF6KEEsXCJFZGdlXCIpLEdhPXooQS50b0xvd2VyQ2FzZSgpLFwid2Via2l0XCIpJiYheihBLFwiRWRnZVwiKTtmdW5jdGlvbiBIYSgpe3ZhciBhPWsuZG9jdW1lbnQ7cmV0dXJuIGE/YS5kb2N1bWVudE1vZGU6dm9pZCAwfXZhciBJYTtcbmE6e3ZhciBKYT1cIlwiLEthPWZ1bmN0aW9uKCl7dmFyIGE9QTtpZihGYSlyZXR1cm4gL3J2OihbXlxcKTtdKykoXFwpfDspLy5leGVjKGEpO2lmKERhKXJldHVybiAvRWRnZVxcLyhbXFxkXFwuXSspLy5leGVjKGEpO2lmKEIpcmV0dXJuIC9cXGIoPzpNU0lFfHJ2KVs6IF0oW15cXCk7XSspKFxcKXw7KS8uZXhlYyhhKTtpZihHYSlyZXR1cm4gL1dlYktpdFxcLyhcXFMrKS8uZXhlYyhhKTtpZihDYSlyZXR1cm4gLyg/OlZlcnNpb24pWyBcXC9dPyhcXFMrKS8uZXhlYyhhKX0oKTtLYSYmKEphPUthP0thWzFdOlwiXCIpO2lmKEIpe3ZhciBMYT1IYSgpO2lmKG51bGwhPUxhJiZMYT5wYXJzZUZsb2F0KEphKSl7SWE9U3RyaW5nKExhKTticmVhayBhfX1JYT1KYTt9dmFyIEJhPXt9O1xuZnVuY3Rpb24gTWEoYSl7cmV0dXJuIEFhKGEsZnVuY3Rpb24oKXtmb3IodmFyIGI9MCxjPXJhKFN0cmluZyhJYSkpLnNwbGl0KFwiLlwiKSxkPXJhKFN0cmluZyhhKSkuc3BsaXQoXCIuXCIpLGU9TWF0aC5tYXgoYy5sZW5ndGgsZC5sZW5ndGgpLGY9MDswPT1iJiZmPGU7ZisrKXt2YXIgaD1jW2ZdfHxcIlwiLGw9ZFtmXXx8XCJcIjtkb3toPS8oXFxkKikoXFxEKikoLiopLy5leGVjKGgpfHxbXCJcIixcIlwiLFwiXCIsXCJcIl07bD0vKFxcZCopKFxcRCopKC4qKS8uZXhlYyhsKXx8W1wiXCIsXCJcIixcIlwiLFwiXCJdO2lmKDA9PWhbMF0ubGVuZ3RoJiYwPT1sWzBdLmxlbmd0aClicmVhaztiPXNhKDA9PWhbMV0ubGVuZ3RoPzA6cGFyc2VJbnQoaFsxXSwxMCksMD09bFsxXS5sZW5ndGg/MDpwYXJzZUludChsWzFdLDEwKSl8fHNhKDA9PWhbMl0ubGVuZ3RoLDA9PWxbMl0ubGVuZ3RoKXx8c2EoaFsyXSxsWzJdKTtoPWhbM107bD1sWzNdO313aGlsZSgwPT1iKX1yZXR1cm4gMDw9Yn0pfXZhciBOYTt2YXIgT2E9ay5kb2N1bWVudDtcbk5hPU9hJiZCP0hhKCl8fChcIkNTUzFDb21wYXRcIj09T2EuY29tcGF0TW9kZT9wYXJzZUludChJYSwxMCk6NSk6dm9pZCAwO3ZhciBQYT0hQnx8OTw9TnVtYmVyKE5hKSxRYT1CJiYhTWEoXCI5XCIpLFJhPWZ1bmN0aW9uKCl7aWYoIWsuYWRkRXZlbnRMaXN0ZW5lcnx8IU9iamVjdC5kZWZpbmVQcm9wZXJ0eSlyZXR1cm4gITE7dmFyIGE9ITEsYj1PYmplY3QuZGVmaW5lUHJvcGVydHkoe30sXCJwYXNzaXZlXCIse2dldDpmdW5jdGlvbigpe2E9ITA7fX0pO3RyeXtrLmFkZEV2ZW50TGlzdGVuZXIoXCJ0ZXN0XCIsYmEsYiksay5yZW1vdmVFdmVudExpc3RlbmVyKFwidGVzdFwiLGJhLGIpO31jYXRjaChjKXt9cmV0dXJuIGF9KCk7ZnVuY3Rpb24gQyhhLGIpe3RoaXMudHlwZT1hO3RoaXMuYT10aGlzLnRhcmdldD1iO3RoaXMuSWE9ITA7fUMucHJvdG90eXBlLmI9ZnVuY3Rpb24oKXt0aGlzLklhPSExO307ZnVuY3Rpb24gRChhLGIpe0MuY2FsbCh0aGlzLGE/YS50eXBlOlwiXCIpO3RoaXMucmVsYXRlZFRhcmdldD10aGlzLmE9dGhpcy50YXJnZXQ9bnVsbDt0aGlzLmJ1dHRvbj10aGlzLnNjcmVlblk9dGhpcy5zY3JlZW5YPXRoaXMuY2xpZW50WT10aGlzLmNsaWVudFg9MDt0aGlzLmtleT1cIlwiO3RoaXMubWV0YUtleT10aGlzLnNoaWZ0S2V5PXRoaXMuYWx0S2V5PXRoaXMuY3RybEtleT0hMTt0aGlzLnBvaW50ZXJJZD0wO3RoaXMucG9pbnRlclR5cGU9XCJcIjt0aGlzLmM9bnVsbDtpZihhKXt2YXIgYz10aGlzLnR5cGU9YS50eXBlLGQ9YS5jaGFuZ2VkVG91Y2hlcyYmYS5jaGFuZ2VkVG91Y2hlcy5sZW5ndGg/YS5jaGFuZ2VkVG91Y2hlc1swXTpudWxsO3RoaXMudGFyZ2V0PWEudGFyZ2V0fHxhLnNyY0VsZW1lbnQ7dGhpcy5hPWI7aWYoYj1hLnJlbGF0ZWRUYXJnZXQpe2lmKEZhKXthOnt0cnl7emEoYi5ub2RlTmFtZSk7dmFyIGU9ITA7YnJlYWsgYX1jYXRjaChmKXt9ZT0hMTt9ZXx8KGI9bnVsbCk7fX1lbHNlXCJtb3VzZW92ZXJcIj09XG5jP2I9YS5mcm9tRWxlbWVudDpcIm1vdXNlb3V0XCI9PWMmJihiPWEudG9FbGVtZW50KTt0aGlzLnJlbGF0ZWRUYXJnZXQ9YjtkPyh0aGlzLmNsaWVudFg9dm9pZCAwIT09ZC5jbGllbnRYP2QuY2xpZW50WDpkLnBhZ2VYLHRoaXMuY2xpZW50WT12b2lkIDAhPT1kLmNsaWVudFk/ZC5jbGllbnRZOmQucGFnZVksdGhpcy5zY3JlZW5YPWQuc2NyZWVuWHx8MCx0aGlzLnNjcmVlblk9ZC5zY3JlZW5ZfHwwKToodGhpcy5jbGllbnRYPXZvaWQgMCE9PWEuY2xpZW50WD9hLmNsaWVudFg6YS5wYWdlWCx0aGlzLmNsaWVudFk9dm9pZCAwIT09YS5jbGllbnRZP2EuY2xpZW50WTphLnBhZ2VZLHRoaXMuc2NyZWVuWD1hLnNjcmVlblh8fDAsdGhpcy5zY3JlZW5ZPWEuc2NyZWVuWXx8MCk7dGhpcy5idXR0b249YS5idXR0b247dGhpcy5rZXk9YS5rZXl8fFwiXCI7dGhpcy5jdHJsS2V5PWEuY3RybEtleTt0aGlzLmFsdEtleT1hLmFsdEtleTt0aGlzLnNoaWZ0S2V5PWEuc2hpZnRLZXk7dGhpcy5tZXRhS2V5PVxuYS5tZXRhS2V5O3RoaXMucG9pbnRlcklkPWEucG9pbnRlcklkfHwwO3RoaXMucG9pbnRlclR5cGU9bShhLnBvaW50ZXJUeXBlKT9hLnBvaW50ZXJUeXBlOlNhW2EucG9pbnRlclR5cGVdfHxcIlwiO3RoaXMuYz1hO2EuZGVmYXVsdFByZXZlbnRlZCYmdGhpcy5iKCk7fX14KEQsQyk7dmFyIFNhPXsyOlwidG91Y2hcIiwzOlwicGVuXCIsNDpcIm1vdXNlXCJ9O0QucHJvdG90eXBlLmI9ZnVuY3Rpb24oKXtELk4uYi5jYWxsKHRoaXMpO3ZhciBhPXRoaXMuYztpZihhLnByZXZlbnREZWZhdWx0KWEucHJldmVudERlZmF1bHQoKTtlbHNlIGlmKGEucmV0dXJuVmFsdWU9ITEsUWEpdHJ5e2lmKGEuY3RybEtleXx8MTEyPD1hLmtleUNvZGUmJjEyMz49YS5rZXlDb2RlKWEua2V5Q29kZT0tMTt9Y2F0Y2goYil7fX07dmFyIEY9XCJjbG9zdXJlX2xpc3RlbmFibGVfXCIrKDFFNipNYXRoLnJhbmRvbSgpfDApLFRhPTA7ZnVuY3Rpb24gVWEoYSxiLGMsZCxlKXt0aGlzLmxpc3RlbmVyPWE7dGhpcy5wcm94eT1udWxsO3RoaXMuc3JjPWI7dGhpcy50eXBlPWM7dGhpcy5jYXB0dXJlPSEhZDt0aGlzLmRhPWU7dGhpcy5rZXk9KytUYTt0aGlzLlg9dGhpcy5aPSExO31mdW5jdGlvbiBWYShhKXthLlg9ITA7YS5saXN0ZW5lcj1udWxsO2EucHJveHk9bnVsbDthLnNyYz1udWxsO2EuZGE9bnVsbDt9ZnVuY3Rpb24gV2EoYSl7dGhpcy5zcmM9YTt0aGlzLmE9e307dGhpcy5iPTA7fVdhLnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24oYSxiLGMsZCxlKXt2YXIgZj1hLnRvU3RyaW5nKCk7YT10aGlzLmFbZl07YXx8KGE9dGhpcy5hW2ZdPVtdLHRoaXMuYisrKTt2YXIgaD1YYShhLGIsZCxlKTstMTxoPyhiPWFbaF0sY3x8KGIuWj0hMSkpOihiPW5ldyBVYShiLHRoaXMuc3JjLGYsISFkLGUpLGIuWj1jLGEucHVzaChiKSk7cmV0dXJuIGJ9O2Z1bmN0aW9uIFlhKGEsYil7dmFyIGM9Yi50eXBlO2lmKGMgaW4gYS5hKXt2YXIgZD1hLmFbY10sZT1qYShkLGIpLGY7KGY9MDw9ZSkmJkFycmF5LnByb3RvdHlwZS5zcGxpY2UuY2FsbChkLGUsMSk7ZiYmKFZhKGIpLDA9PWEuYVtjXS5sZW5ndGgmJihkZWxldGUgYS5hW2NdLGEuYi0tKSk7fX1cbmZ1bmN0aW9uIFhhKGEsYixjLGQpe2Zvcih2YXIgZT0wO2U8YS5sZW5ndGg7KytlKXt2YXIgZj1hW2VdO2lmKCFmLlgmJmYubGlzdGVuZXI9PWImJmYuY2FwdHVyZT09ISFjJiZmLmRhPT1kKXJldHVybiBlfXJldHVybiAtMX12YXIgWmE9XCJjbG9zdXJlX2xtX1wiKygxRTYqTWF0aC5yYW5kb20oKXwwKSwkYT17fTtmdW5jdGlvbiBiYihhLGIsYyxkLGUpe2lmKGQmJmQub25jZSlyZXR1cm4gY2IoYSxiLGMsZCxlKTtpZihxKGIpKXtmb3IodmFyIGY9MDtmPGIubGVuZ3RoO2YrKyliYihhLGJbZl0sYyxkLGUpO3JldHVybiBudWxsfWM9ZGIoYyk7cmV0dXJuIGEmJmFbRl0/YS56YShiLGMscihkKT8hIWQuY2FwdHVyZTohIWQsZSk6ZWIoYSxiLGMsITEsZCxlKX1cbmZ1bmN0aW9uIGViKGEsYixjLGQsZSxmKXtpZighYil0aHJvdyBFcnJvcihcIkludmFsaWQgZXZlbnQgdHlwZVwiKTt2YXIgaD1yKGUpPyEhZS5jYXB0dXJlOiEhZTtpZihoJiYhUGEpcmV0dXJuIG51bGw7dmFyIGw9ZmIoYSk7bHx8KGFbWmFdPWw9bmV3IFdhKGEpKTtjPWwuYWRkKGIsYyxkLGgsZik7aWYoYy5wcm94eSlyZXR1cm4gYztkPWdiKCk7Yy5wcm94eT1kO2Quc3JjPWE7ZC5saXN0ZW5lcj1jO2lmKGEuYWRkRXZlbnRMaXN0ZW5lcilSYXx8KGU9aCksdm9pZCAwPT09ZSYmKGU9ITEpLGEuYWRkRXZlbnRMaXN0ZW5lcihiLnRvU3RyaW5nKCksZCxlKTtlbHNlIGlmKGEuYXR0YWNoRXZlbnQpYS5hdHRhY2hFdmVudChoYihiLnRvU3RyaW5nKCkpLGQpO2Vsc2UgaWYoYS5hZGRMaXN0ZW5lciYmYS5yZW1vdmVMaXN0ZW5lcilhLmFkZExpc3RlbmVyKGQpO2Vsc2UgdGhyb3cgRXJyb3IoXCJhZGRFdmVudExpc3RlbmVyIGFuZCBhdHRhY2hFdmVudCBhcmUgdW5hdmFpbGFibGUuXCIpO3JldHVybiBjfWZ1bmN0aW9uIGdiKCl7dmFyIGE9aWIsYj1QYT9mdW5jdGlvbihjKXtyZXR1cm4gYS5jYWxsKGIuc3JjLGIubGlzdGVuZXIsYyl9OmZ1bmN0aW9uKGMpe2M9YS5jYWxsKGIuc3JjLGIubGlzdGVuZXIsYyk7aWYoIWMpcmV0dXJuIGN9O3JldHVybiBifWZ1bmN0aW9uIGNiKGEsYixjLGQsZSl7aWYocShiKSl7Zm9yKHZhciBmPTA7ZjxiLmxlbmd0aDtmKyspY2IoYSxiW2ZdLGMsZCxlKTtyZXR1cm4gbnVsbH1jPWRiKGMpO3JldHVybiBhJiZhW0ZdP2EuQWEoYixjLHIoZCk/ISFkLmNhcHR1cmU6ISFkLGUpOmViKGEsYixjLCEwLGQsZSl9XG5mdW5jdGlvbiBqYihhLGIsYyxkLGUpe2lmKHEoYikpZm9yKHZhciBmPTA7ZjxiLmxlbmd0aDtmKyspamIoYSxiW2ZdLGMsZCxlKTtlbHNlKGQ9cihkKT8hIWQuY2FwdHVyZTohIWQsYz1kYihjKSxhJiZhW0ZdKT8oYT1hLmMsYj1TdHJpbmcoYikudG9TdHJpbmcoKSxiIGluIGEuYSYmKGY9YS5hW2JdLGM9WGEoZixjLGQsZSksLTE8YyYmKFZhKGZbY10pLEFycmF5LnByb3RvdHlwZS5zcGxpY2UuY2FsbChmLGMsMSksMD09Zi5sZW5ndGgmJihkZWxldGUgYS5hW2JdLGEuYi0tKSkpKTphJiYoYT1mYihhKSkmJihiPWEuYVtiLnRvU3RyaW5nKCldLGE9LTEsYiYmKGE9WGEoYixjLGQsZSkpLChjPS0xPGE/YlthXTpudWxsKSYma2IoYykpO31cbmZ1bmN0aW9uIGtiKGEpe2lmKCFhYShhKSYmYSYmIWEuWCl7dmFyIGI9YS5zcmM7aWYoYiYmYltGXSlZYShiLmMsYSk7ZWxzZXt2YXIgYz1hLnR5cGUsZD1hLnByb3h5O2IucmVtb3ZlRXZlbnRMaXN0ZW5lcj9iLnJlbW92ZUV2ZW50TGlzdGVuZXIoYyxkLGEuY2FwdHVyZSk6Yi5kZXRhY2hFdmVudD9iLmRldGFjaEV2ZW50KGhiKGMpLGQpOmIuYWRkTGlzdGVuZXImJmIucmVtb3ZlTGlzdGVuZXImJmIucmVtb3ZlTGlzdGVuZXIoZCk7KGM9ZmIoYikpPyhZYShjLGEpLDA9PWMuYiYmKGMuc3JjPW51bGwsYltaYV09bnVsbCkpOlZhKGEpO319fWZ1bmN0aW9uIGhiKGEpe3JldHVybiBhIGluICRhPyRhW2FdOiRhW2FdPVwib25cIithfWZ1bmN0aW9uIGxiKGEsYil7dmFyIGM9YS5saXN0ZW5lcixkPWEuZGF8fGEuc3JjO2EuWiYma2IoYSk7cmV0dXJuIGMuY2FsbChkLGIpfVxuZnVuY3Rpb24gaWIoYSxiKXtyZXR1cm4gYS5YPyEwOlBhP2xiKGEsbmV3IEQoYix0aGlzKSk6KGI9bmV3IEQoYnx8bihcIndpbmRvdy5ldmVudFwiKSx0aGlzKSxsYihhLGIpKX1mdW5jdGlvbiBmYihhKXthPWFbWmFdO3JldHVybiBhIGluc3RhbmNlb2YgV2E/YTpudWxsfXZhciBtYj1cIl9fY2xvc3VyZV9ldmVudHNfZm5fXCIrKDFFOSpNYXRoLnJhbmRvbSgpPj4+MCk7ZnVuY3Rpb24gZGIoYSl7aWYoXCJmdW5jdGlvblwiPT1wKGEpKXJldHVybiBhO2FbbWJdfHwoYVttYl09ZnVuY3Rpb24oYil7cmV0dXJuIGEuaGFuZGxlRXZlbnQoYil9KTtyZXR1cm4gYVttYl19ZnVuY3Rpb24gRygpe3kuY2FsbCh0aGlzKTt0aGlzLmM9bmV3IFdhKHRoaXMpO3RoaXMuSj10aGlzO3RoaXMuQj1udWxsO314KEcseSk7Ry5wcm90b3R5cGVbRl09ITA7Zz1HLnByb3RvdHlwZTtnLmFkZEV2ZW50TGlzdGVuZXI9ZnVuY3Rpb24oYSxiLGMsZCl7YmIodGhpcyxhLGIsYyxkKTt9O2cucmVtb3ZlRXZlbnRMaXN0ZW5lcj1mdW5jdGlvbihhLGIsYyxkKXtqYih0aGlzLGEsYixjLGQpO307XG5nLmRpc3BhdGNoRXZlbnQ9ZnVuY3Rpb24oYSl7dmFyIGIsYz10aGlzLkI7aWYoYylmb3IoYj1bXTtjO2M9Yy5CKWIucHVzaChjKTtjPXRoaXMuSjt2YXIgZD1hLnR5cGV8fGE7aWYobShhKSlhPW5ldyBDKGEsYyk7ZWxzZSBpZihhIGluc3RhbmNlb2YgQylhLnRhcmdldD1hLnRhcmdldHx8YztlbHNle3ZhciBlPWE7YT1uZXcgQyhkLGMpO3lhKGEsZSk7fWU9ITA7aWYoYilmb3IodmFyIGY9Yi5sZW5ndGgtMTswPD1mO2YtLSl7dmFyIGg9YS5hPWJbZl07ZT1uYihoLGQsITAsYSkmJmU7fWg9YS5hPWM7ZT1uYihoLGQsITAsYSkmJmU7ZT1uYihoLGQsITEsYSkmJmU7aWYoYilmb3IoZj0wO2Y8Yi5sZW5ndGg7ZisrKWg9YS5hPWJbZl0sZT1uYihoLGQsITEsYSkmJmU7cmV0dXJuIGV9O1xuZy5HPWZ1bmN0aW9uKCl7Ry5OLkcuY2FsbCh0aGlzKTtpZih0aGlzLmMpe3ZhciBhPXRoaXMuYyxjO2ZvcihjIGluIGEuYSl7Zm9yKHZhciBkPWEuYVtjXSxlPTA7ZTxkLmxlbmd0aDtlKyspVmEoZFtlXSk7ZGVsZXRlIGEuYVtjXTthLmItLTt9fXRoaXMuQj1udWxsO307Zy56YT1mdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4gdGhpcy5jLmFkZChTdHJpbmcoYSksYiwhMSxjLGQpfTtnLkFhPWZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiB0aGlzLmMuYWRkKFN0cmluZyhhKSxiLCEwLGMsZCl9O1xuZnVuY3Rpb24gbmIoYSxiLGMsZCl7Yj1hLmMuYVtTdHJpbmcoYildO2lmKCFiKXJldHVybiAhMDtiPWIuY29uY2F0KCk7Zm9yKHZhciBlPSEwLGY9MDtmPGIubGVuZ3RoOysrZil7dmFyIGg9YltmXTtpZihoJiYhaC5YJiZoLmNhcHR1cmU9PWMpe3ZhciBsPWgubGlzdGVuZXIsRT1oLmRhfHxoLnNyYztoLlomJllhKGEuYyxoKTtlPSExIT09bC5jYWxsKEUsZCkmJmU7fX1yZXR1cm4gZSYmMCE9ZC5JYX12YXIgb2I9ay5KU09OLnN0cmluZ2lmeTtmdW5jdGlvbiBwYihhLGIpe3RoaXMuYz1hO3RoaXMuZj1iO3RoaXMuYj0wO3RoaXMuYT1udWxsO31wYi5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKCl7aWYoMDx0aGlzLmIpe3RoaXMuYi0tO3ZhciBhPXRoaXMuYTt0aGlzLmE9YS5uZXh0O2EubmV4dD1udWxsO31lbHNlIGE9dGhpcy5jKCk7cmV0dXJuIGF9O2Z1bmN0aW9uIHFiKCl7dGhpcy5iPXRoaXMuYT1udWxsO312YXIgc2I9bmV3IHBiKGZ1bmN0aW9uKCl7cmV0dXJuIG5ldyByYn0sZnVuY3Rpb24oYSl7YS5yZXNldCgpO30pO3FiLnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24oYSxiKXt2YXIgYz1zYi5nZXQoKTtjLnNldChhLGIpO3RoaXMuYj90aGlzLmIubmV4dD1jOnRoaXMuYT1jO3RoaXMuYj1jO307ZnVuY3Rpb24gdGIoKXt2YXIgYT11YixiPW51bGw7YS5hJiYoYj1hLmEsYS5hPWEuYS5uZXh0LGEuYXx8KGEuYj1udWxsKSxiLm5leHQ9bnVsbCk7cmV0dXJuIGJ9ZnVuY3Rpb24gcmIoKXt0aGlzLm5leHQ9dGhpcy5iPXRoaXMuYT1udWxsO31yYi5wcm90b3R5cGUuc2V0PWZ1bmN0aW9uKGEsYil7dGhpcy5hPWE7dGhpcy5iPWI7dGhpcy5uZXh0PW51bGw7fTtyYi5wcm90b3R5cGUucmVzZXQ9ZnVuY3Rpb24oKXt0aGlzLm5leHQ9dGhpcy5iPXRoaXMuYT1udWxsO307ZnVuY3Rpb24gdmIoYSl7ay5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dGhyb3cgYTt9LDApO31mdW5jdGlvbiB3YihhLGIpe3hifHx5YigpO3pifHwoeGIoKSx6Yj0hMCk7dWIuYWRkKGEsYik7fXZhciB4YjtmdW5jdGlvbiB5Yigpe3ZhciBhPWsuUHJvbWlzZS5yZXNvbHZlKHZvaWQgMCk7eGI9ZnVuY3Rpb24oKXthLnRoZW4oQWIpO307fXZhciB6Yj0hMSx1Yj1uZXcgcWI7ZnVuY3Rpb24gQWIoKXtmb3IodmFyIGE7YT10YigpOyl7dHJ5e2EuYS5jYWxsKGEuYik7fWNhdGNoKGMpe3ZiKGMpO312YXIgYj1zYjtiLmYoYSk7MTAwPmIuYiYmKGIuYisrLGEubmV4dD1iLmEsYi5hPWEpO316Yj0hMTt9ZnVuY3Rpb24gQ2IoYSxiKXtHLmNhbGwodGhpcyk7dGhpcy5iPWF8fDE7dGhpcy5hPWJ8fGs7dGhpcy5mPXUodGhpcy5mYix0aGlzKTt0aGlzLmc9dygpO314KENiLEcpO2c9Q2IucHJvdG90eXBlO2cuYmE9ITE7Zy5MPW51bGw7Zy5mYj1mdW5jdGlvbigpe2lmKHRoaXMuYmEpe3ZhciBhPXcoKS10aGlzLmc7MDxhJiZhPC44KnRoaXMuYj90aGlzLkw9dGhpcy5hLnNldFRpbWVvdXQodGhpcy5mLHRoaXMuYi1hKToodGhpcy5MJiYodGhpcy5hLmNsZWFyVGltZW91dCh0aGlzLkwpLHRoaXMuTD1udWxsKSx0aGlzLmRpc3BhdGNoRXZlbnQoXCJ0aWNrXCIpLHRoaXMuYmEmJihEYih0aGlzKSx0aGlzLnN0YXJ0KCkpKTt9fTtnLnN0YXJ0PWZ1bmN0aW9uKCl7dGhpcy5iYT0hMDt0aGlzLkx8fCh0aGlzLkw9dGhpcy5hLnNldFRpbWVvdXQodGhpcy5mLHRoaXMuYiksdGhpcy5nPXcoKSk7fTtmdW5jdGlvbiBEYihhKXthLmJhPSExO2EuTCYmKGEuYS5jbGVhclRpbWVvdXQoYS5MKSxhLkw9bnVsbCk7fVxuZy5HPWZ1bmN0aW9uKCl7Q2IuTi5HLmNhbGwodGhpcyk7RGIodGhpcyk7ZGVsZXRlIHRoaXMuYTt9O2Z1bmN0aW9uIEViKGEsYixjKXtpZihcImZ1bmN0aW9uXCI9PXAoYSkpYyYmKGE9dShhLGMpKTtlbHNlIGlmKGEmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGEuaGFuZGxlRXZlbnQpYT11KGEuaGFuZGxlRXZlbnQsYSk7ZWxzZSB0aHJvdyBFcnJvcihcIkludmFsaWQgbGlzdGVuZXIgYXJndW1lbnRcIik7cmV0dXJuIDIxNDc0ODM2NDc8TnVtYmVyKGIpPy0xOmsuc2V0VGltZW91dChhLGJ8fDApfWZ1bmN0aW9uIEZiKGEsYixjKXt5LmNhbGwodGhpcyk7dGhpcy5mPW51bGwhPWM/dShhLGMpOmE7dGhpcy5jPWI7dGhpcy5iPXUodGhpcy4kYSx0aGlzKTt0aGlzLmE9W107fXgoRmIseSk7Zz1GYi5wcm90b3R5cGU7Zy5lYT0hMTtnLlU9bnVsbDtnLlRhPWZ1bmN0aW9uKGEpe3RoaXMuYT1hcmd1bWVudHM7dGhpcy5VP3RoaXMuZWE9ITA6R2IodGhpcyk7fTtnLkc9ZnVuY3Rpb24oKXtGYi5OLkcuY2FsbCh0aGlzKTt0aGlzLlUmJihrLmNsZWFyVGltZW91dCh0aGlzLlUpLHRoaXMuVT1udWxsLHRoaXMuZWE9ITEsdGhpcy5hPVtdKTt9O2cuJGE9ZnVuY3Rpb24oKXt0aGlzLlU9bnVsbDt0aGlzLmVhJiYodGhpcy5lYT0hMSxHYih0aGlzKSk7fTtmdW5jdGlvbiBHYihhKXthLlU9RWIoYS5iLGEuYyk7YS5mLmFwcGx5KG51bGwsYS5hKTt9ZnVuY3Rpb24gSChhKXt5LmNhbGwodGhpcyk7dGhpcy5iPWE7dGhpcy5hPXt9O314KEgseSk7dmFyIEhiPVtdO2Z1bmN0aW9uIEliKGEsYixjLGQpe3EoYyl8fChjJiYoSGJbMF09Yy50b1N0cmluZygpKSxjPUhiKTtmb3IodmFyIGU9MDtlPGMubGVuZ3RoO2UrKyl7dmFyIGY9YmIoYixjW2VdLGR8fGEuaGFuZGxlRXZlbnQsITEsYS5ifHxhKTtpZighZilicmVhazthLmFbZi5rZXldPWY7fX1mdW5jdGlvbiBKYihhKXt2YShhLmEsZnVuY3Rpb24oYixjKXt0aGlzLmEuaGFzT3duUHJvcGVydHkoYykmJmtiKGIpO30sYSk7YS5hPXt9O31ILnByb3RvdHlwZS5HPWZ1bmN0aW9uKCl7SC5OLkcuY2FsbCh0aGlzKTtKYih0aGlzKTt9O0gucHJvdG90eXBlLmhhbmRsZUV2ZW50PWZ1bmN0aW9uKCl7dGhyb3cgRXJyb3IoXCJFdmVudEhhbmRsZXIuaGFuZGxlRXZlbnQgbm90IGltcGxlbWVudGVkXCIpO307ZnVuY3Rpb24gS2IoKXt9dmFyIEk9bmV3IEc7ZnVuY3Rpb24gTGIoYSl7Qy5jYWxsKHRoaXMsXCJzZXJ2ZXJyZWFjaGFiaWxpdHlcIixhKTt9eChMYixDKTtmdW5jdGlvbiBKKGEpe0kuZGlzcGF0Y2hFdmVudChuZXcgTGIoSSxhKSk7fWZ1bmN0aW9uIE1iKGEpe0MuY2FsbCh0aGlzLFwic3RhdGV2ZW50XCIsYSk7fXgoTWIsQyk7ZnVuY3Rpb24gSyhhKXtJLmRpc3BhdGNoRXZlbnQobmV3IE1iKEksYSkpO31mdW5jdGlvbiBOYihhKXtDLmNhbGwodGhpcyxcInRpbWluZ2V2ZW50XCIsYSk7fXgoTmIsQyk7ZnVuY3Rpb24gT2IoYSxiKXtpZihcImZ1bmN0aW9uXCIhPXAoYSkpdGhyb3cgRXJyb3IoXCJGbiBtdXN0IG5vdCBiZSBudWxsIGFuZCBtdXN0IGJlIGEgZnVuY3Rpb25cIik7cmV0dXJuIGsuc2V0VGltZW91dChmdW5jdGlvbigpe2EoKTt9LGIpfXZhciBQYj17Tk9fRVJST1I6MCxnYjoxLG5iOjIsbWI6MyxqYjo0LGxiOjUsb2I6NixMYTo3LFRJTUVPVVQ6OCxyYjo5fTt2YXIgUWI9e2liOlwiY29tcGxldGVcIix2YjpcInN1Y2Nlc3NcIixNYTpcImVycm9yXCIsTGE6XCJhYm9ydFwiLHRiOlwicmVhZHlcIix1YjpcInJlYWR5c3RhdGVjaGFuZ2VcIixUSU1FT1VUOlwidGltZW91dFwiLHBiOlwiaW5jcmVtZW50YWxkYXRhXCIsc2I6XCJwcm9ncmVzc1wiLGtiOlwiZG93bmxvYWRwcm9ncmVzc1wiLHdiOlwidXBsb2FkcHJvZ3Jlc3NcIn07ZnVuY3Rpb24gUmIoKXt9UmIucHJvdG90eXBlLmE9bnVsbDtmdW5jdGlvbiBTYihhKXt2YXIgYjsoYj1hLmEpfHwoYj1hLmE9e30pO3JldHVybiBifWZ1bmN0aW9uIFRiKCl7fXZhciBMPXtPUEVOOlwiYVwiLGhiOlwiYlwiLE1hOlwiY1wiLHFiOlwiZFwifTtmdW5jdGlvbiBVYigpe0MuY2FsbCh0aGlzLFwiZFwiKTt9eChVYixDKTtmdW5jdGlvbiBWYigpe0MuY2FsbCh0aGlzLFwiY1wiKTt9eChWYixDKTt2YXIgV2I7ZnVuY3Rpb24gWGIoKXt9eChYYixSYik7V2I9bmV3IFhiO2Z1bmN0aW9uIE0oYSxiLGMpe3RoaXMuZz1hO3RoaXMuVz1iO3RoaXMuVj1jfHwxO3RoaXMuST1uZXcgSCh0aGlzKTt0aGlzLk89WWI7YT1FYT8xMjU6dm9pZCAwO3RoaXMuUD1uZXcgQ2IoYSk7dGhpcy5oPW51bGw7dGhpcy5iPSExO3RoaXMubD10aGlzLkQ9dGhpcy5mPXRoaXMuRj10aGlzLnY9dGhpcy5SPXRoaXMuaT1udWxsO3RoaXMuaj1bXTt0aGlzLmE9bnVsbDt0aGlzLkE9MDt0aGlzLmM9dGhpcy53PW51bGw7dGhpcy5vPS0xO3RoaXMubT0hMTt0aGlzLko9MDt0aGlzLkI9bnVsbDt0aGlzLnM9dGhpcy5TPXRoaXMuSD0hMTt9dmFyIFliPTQ1RTMsWmI9e30sJGI9e307Zz1NLnByb3RvdHlwZTtnLnNldFRpbWVvdXQ9ZnVuY3Rpb24oYSl7dGhpcy5PPWE7fTtmdW5jdGlvbiBhYyhhLGIsYyl7YS5GPTE7YS5mPWJjKE4oYikpO2EubD1jO2EuSD0hMDtjYyhhLG51bGwpO31mdW5jdGlvbiBkYyhhLGIsYyxkKXthLkY9MTthLmY9YmMoTihiKSk7YS5sPW51bGw7YS5IPWM7Y2MoYSxkKTt9XG5mdW5jdGlvbiBjYyhhLGIpe2Eudj13KCk7ZWMoYSk7YS5EPU4oYS5mKTtmYyhhLkQsXCJ0XCIsYS5WKTthLkE9MDthLmE9YS5nLiQoYS5nLlkoKT9iOm51bGwpOzA8YS5KJiYoYS5CPW5ldyBGYih1KGEuSmEsYSxhLmEpLGEuSikpO0liKGEuSSxhLmEsXCJyZWFkeXN0YXRlY2hhbmdlXCIsYS5jYik7Yj1hLmg/d2EoYS5oKTp7fTthLmw/KGEud3x8KGEudz1cIlBPU1RcIiksYltcIkNvbnRlbnQtVHlwZVwiXT1cImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZFwiLGEuYS5jYShhLkQsYS53LGEubCxiKSk6KGEudz1cIkdFVFwiLGEuYS5jYShhLkQsYS53LG51bGwsYikpO0ooMSk7fWcuY2I9ZnVuY3Rpb24oYSl7YT1hLnRhcmdldDt2YXIgYj10aGlzLkI7YiYmMz09TyhhKT9iLlRhKCk6dGhpcy5KYShhKTt9O1xuZy5KYT1mdW5jdGlvbihhKXt0cnl7aWYoYT09dGhpcy5hKWE6e3ZhciBiPU8odGhpcy5hKSxjPXRoaXMuYS55YSgpLGQ9dGhpcy5hLlQoKTtpZighKDM+Ynx8Mz09YiYmIUVhJiYhdGhpcy5hLmFhKCkpKXt0aGlzLm18fDQhPWJ8fDc9PWN8fCg4PT1jfHwwPj1kP0ooMyk6SigyKSk7Z2ModGhpcyk7dmFyIGU9dGhpcy5hLlQoKTt0aGlzLm89ZTt2YXIgZj10aGlzLmEuYWEoKTtpZih0aGlzLmI9MjAwPT1lKXtpZih0aGlzLlMmJiF0aGlzLnMpe2I6e2lmKHRoaXMuYSl7dmFyIGg9aGModGhpcy5hLFwiWC1IVFRQLUluaXRpYWwtUmVzcG9uc2VcIik7aWYoaCYmIXFhKGgpKXt2YXIgbD1oO2JyZWFrIGJ9fWw9bnVsbDt9aWYobCl0aGlzLnM9ITAsaWModGhpcyxsKTtlbHNle3RoaXMuYj0hMTt0aGlzLmM9MztLKDEyKTtQKHRoaXMpO2pjKHRoaXMpO2JyZWFrIGF9fXRoaXMuSD8oa2ModGhpcyxiLGYpLEVhJiZ0aGlzLmImJjM9PWImJihJYih0aGlzLkksdGhpcy5QLFwidGlja1wiLHRoaXMuYmIpLHRoaXMuUC5zdGFydCgpKSk6XG5pYyh0aGlzLGYpOzQ9PWImJlAodGhpcyk7dGhpcy5iJiYhdGhpcy5tJiYoND09Yj90aGlzLmcubmEodGhpcyk6KHRoaXMuYj0hMSxlYyh0aGlzKSkpO31lbHNlIDQwMD09ZSYmMDxmLmluZGV4T2YoXCJVbmtub3duIFNJRFwiKT8odGhpcy5jPTMsSygxMikpOih0aGlzLmM9MCxLKDEzKSksUCh0aGlzKSxqYyh0aGlzKTt9fX1jYXRjaChFKXt9ZmluYWxseXt9fTtmdW5jdGlvbiBrYyhhLGIsYyl7Zm9yKHZhciBkPSEwOyFhLm0mJmEuQTxjLmxlbmd0aDspe3ZhciBlPWxjKGEsYyk7aWYoZT09JGIpezQ9PWImJihhLmM9NCxLKDE0KSxkPSExKTticmVha31lbHNlIGlmKGU9PVpiKXthLmM9NDtLKDE1KTtkPSExO2JyZWFrfWVsc2UgaWMoYSxlKTt9ND09YiYmMD09Yy5sZW5ndGgmJihhLmM9MSxLKDE2KSxkPSExKTthLmI9YS5iJiZkO2R8fChQKGEpLGpjKGEpKTt9XG5nLmJiPWZ1bmN0aW9uKCl7aWYodGhpcy5hKXt2YXIgYT1PKHRoaXMuYSksYj10aGlzLmEuYWEoKTt0aGlzLkE8Yi5sZW5ndGgmJihnYyh0aGlzKSxrYyh0aGlzLGEsYiksdGhpcy5iJiY0IT1hJiZlYyh0aGlzKSk7fX07ZnVuY3Rpb24gbGMoYSxiKXt2YXIgYz1hLkEsZD1iLmluZGV4T2YoXCJcXG5cIixjKTtpZigtMT09ZClyZXR1cm4gJGI7Yz1OdW1iZXIoYi5zdWJzdHJpbmcoYyxkKSk7aWYoaXNOYU4oYykpcmV0dXJuIFpiO2QrPTE7aWYoZCtjPmIubGVuZ3RoKXJldHVybiAkYjtiPWIuc3Vic3RyKGQsYyk7YS5BPWQrYztyZXR1cm4gYn1nLmNhbmNlbD1mdW5jdGlvbigpe3RoaXMubT0hMDtQKHRoaXMpO307ZnVuY3Rpb24gZWMoYSl7YS5SPXcoKSthLk87bWMoYSxhLk8pO31mdW5jdGlvbiBtYyhhLGIpe2lmKG51bGwhPWEuaSl0aHJvdyBFcnJvcihcIldhdGNoRG9nIHRpbWVyIG5vdCBudWxsXCIpO2EuaT1PYih1KGEuYWIsYSksYik7fVxuZnVuY3Rpb24gZ2MoYSl7YS5pJiYoay5jbGVhclRpbWVvdXQoYS5pKSxhLmk9bnVsbCk7fWcuYWI9ZnVuY3Rpb24oKXt0aGlzLmk9bnVsbDt2YXIgYT13KCk7MDw9YS10aGlzLlI/KDIhPXRoaXMuRiYmKEooMyksSygxNykpLFAodGhpcyksdGhpcy5jPTIsamModGhpcykpOm1jKHRoaXMsdGhpcy5SLWEpO307ZnVuY3Rpb24gamMoYSl7YS5nLkNhKCl8fGEubXx8YS5nLm5hKGEpO31mdW5jdGlvbiBQKGEpe2djKGEpO3ZhciBiPWEuQjtiJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBiLmxhJiZiLmxhKCk7YS5CPW51bGw7RGIoYS5QKTtKYihhLkkpO2EuYSYmKGI9YS5hLGEuYT1udWxsLGIuYWJvcnQoKSxiLmxhKCkpO31mdW5jdGlvbiBpYyhhLGIpe3RyeXthLmcuRmEoYSxiKSxKKDQpO31jYXRjaChjKXt9fWZ1bmN0aW9uIG5jKGEpe2lmKGEuQyYmXCJmdW5jdGlvblwiPT10eXBlb2YgYS5DKXJldHVybiBhLkMoKTtpZihtKGEpKXJldHVybiBhLnNwbGl0KFwiXCIpO2lmKGNhKGEpKXtmb3IodmFyIGI9W10sYz1hLmxlbmd0aCxkPTA7ZDxjO2QrKyliLnB1c2goYVtkXSk7cmV0dXJuIGJ9Yj1bXTtjPTA7Zm9yKGQgaW4gYSliW2MrK109YVtkXTtyZXR1cm4gYn1cbmZ1bmN0aW9uIG9jKGEsYil7aWYoYS5mb3JFYWNoJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBhLmZvckVhY2gpYS5mb3JFYWNoKGIsdm9pZCAwKTtlbHNlIGlmKGNhKGEpfHxtKGEpKWxhKGEsYix2b2lkIDApO2Vsc2V7aWYoYS5LJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBhLkspdmFyIGM9YS5LKCk7ZWxzZSBpZihhLkMmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGEuQyljPXZvaWQgMDtlbHNlIGlmKGNhKGEpfHxtKGEpKXtjPVtdO2Zvcih2YXIgZD1hLmxlbmd0aCxlPTA7ZTxkO2UrKyljLnB1c2goZSk7fWVsc2UgZm9yKGUgaW4gYz1bXSxkPTAsYSljW2QrK109ZTtkPW5jKGEpO2U9ZC5sZW5ndGg7Zm9yKHZhciBmPTA7ZjxlO2YrKyliLmNhbGwodm9pZCAwLGRbZl0sYyYmY1tmXSxhKTt9fWZ1bmN0aW9uIFEoYSxiKXt0aGlzLmI9e307dGhpcy5hPVtdO3RoaXMuYz0wO3ZhciBjPWFyZ3VtZW50cy5sZW5ndGg7aWYoMTxjKXtpZihjJTIpdGhyb3cgRXJyb3IoXCJVbmV2ZW4gbnVtYmVyIG9mIGFyZ3VtZW50c1wiKTtmb3IodmFyIGQ9MDtkPGM7ZCs9Mil0aGlzLnNldChhcmd1bWVudHNbZF0sYXJndW1lbnRzW2QrMV0pO31lbHNlIGlmKGEpaWYoYSBpbnN0YW5jZW9mIFEpZm9yKGM9YS5LKCksZD0wO2Q8Yy5sZW5ndGg7ZCsrKXRoaXMuc2V0KGNbZF0sYS5nZXQoY1tkXSkpO2Vsc2UgZm9yKGQgaW4gYSl0aGlzLnNldChkLGFbZF0pO31nPVEucHJvdG90eXBlO2cuQz1mdW5jdGlvbigpe3BjKHRoaXMpO2Zvcih2YXIgYT1bXSxiPTA7Yjx0aGlzLmEubGVuZ3RoO2IrKylhLnB1c2godGhpcy5iW3RoaXMuYVtiXV0pO3JldHVybiBhfTtnLks9ZnVuY3Rpb24oKXtwYyh0aGlzKTtyZXR1cm4gdGhpcy5hLmNvbmNhdCgpfTtcbmZ1bmN0aW9uIHFjKGEpe2EuYj17fTthLmEubGVuZ3RoPTA7YS5jPTA7fWZ1bmN0aW9uIHJjKGEsYil7UihhLmIsYikmJihkZWxldGUgYS5iW2JdLGEuYy0tLGEuYS5sZW5ndGg+MiphLmMmJnBjKGEpKTt9ZnVuY3Rpb24gcGMoYSl7aWYoYS5jIT1hLmEubGVuZ3RoKXtmb3IodmFyIGI9MCxjPTA7YjxhLmEubGVuZ3RoOyl7dmFyIGQ9YS5hW2JdO1IoYS5iLGQpJiYoYS5hW2MrK109ZCk7YisrO31hLmEubGVuZ3RoPWM7fWlmKGEuYyE9YS5hLmxlbmd0aCl7dmFyIGU9e307Zm9yKGM9Yj0wO2I8YS5hLmxlbmd0aDspZD1hLmFbYl0sUihlLGQpfHwoYS5hW2MrK109ZCxlW2RdPTEpLGIrKzthLmEubGVuZ3RoPWM7fX1nLmdldD1mdW5jdGlvbihhLGIpe3JldHVybiBSKHRoaXMuYixhKT90aGlzLmJbYV06Yn07Zy5zZXQ9ZnVuY3Rpb24oYSxiKXtSKHRoaXMuYixhKXx8KHRoaXMuYysrLHRoaXMuYS5wdXNoKGEpKTt0aGlzLmJbYV09Yjt9O1xuZy5mb3JFYWNoPWZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPXRoaXMuSygpLGQ9MDtkPGMubGVuZ3RoO2QrKyl7dmFyIGU9Y1tkXSxmPXRoaXMuZ2V0KGUpO2EuY2FsbChiLGYsZSx0aGlzKTt9fTtmdW5jdGlvbiBSKGEsYil7cmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChhLGIpfXZhciBzYz0vXig/OihbXjovPyMuXSspOik/KD86XFwvXFwvKD86KFteLz8jXSopQCk/KFteLyM/XSo/KSg/OjooWzAtOV0rKSk/KD89Wy8jP118JCkpPyhbXj8jXSspPyg/OlxcPyhbXiNdKikpPyg/OiMoW1xcc1xcU10qKSk/JC87ZnVuY3Rpb24gdGMoYSxiKXtpZihhKXthPWEuc3BsaXQoXCImXCIpO2Zvcih2YXIgYz0wO2M8YS5sZW5ndGg7YysrKXt2YXIgZD1hW2NdLmluZGV4T2YoXCI9XCIpLGU9bnVsbDtpZigwPD1kKXt2YXIgZj1hW2NdLnN1YnN0cmluZygwLGQpO2U9YVtjXS5zdWJzdHJpbmcoZCsxKTt9ZWxzZSBmPWFbY107YihmLGU/ZGVjb2RlVVJJQ29tcG9uZW50KGUucmVwbGFjZSgvXFwrL2csXCIgXCIpKTpcIlwiKTt9fX1mdW5jdGlvbiBTKGEsYil7dGhpcy5iPXRoaXMuaj10aGlzLmY9XCJcIjt0aGlzLmk9bnVsbDt0aGlzLmc9dGhpcy5hPVwiXCI7dGhpcy5oPSExO3ZhciBjO2EgaW5zdGFuY2VvZiBTPyh0aGlzLmg9dm9pZCAwIT09Yj9iOmEuaCx1Yyh0aGlzLGEuZiksdGhpcy5qPWEuaix2Yyh0aGlzLGEuYiksd2ModGhpcyxhLmkpLHRoaXMuYT1hLmEseGModGhpcyx5YyhhLmMpKSx0aGlzLmc9YS5nKTphJiYoYz1TdHJpbmcoYSkubWF0Y2goc2MpKT8odGhpcy5oPSEhYix1Yyh0aGlzLGNbMV18fFwiXCIsITApLHRoaXMuaj16YyhjWzJdfHxcIlwiKSx2Yyh0aGlzLGNbM118fFwiXCIsITApLHdjKHRoaXMsY1s0XSksdGhpcy5hPXpjKGNbNV18fFwiXCIsITApLHhjKHRoaXMsY1s2XXx8XCJcIiwhMCksdGhpcy5nPXpjKGNbN118fFwiXCIpKToodGhpcy5oPSEhYix0aGlzLmM9bmV3IEFjKG51bGwsdGhpcy5oKSk7fVxuUy5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXt2YXIgYT1bXSxiPXRoaXMuZjtiJiZhLnB1c2goQmMoYixDYywhMCksXCI6XCIpO3ZhciBjPXRoaXMuYjtpZihjfHxcImZpbGVcIj09YilhLnB1c2goXCIvL1wiKSwoYj10aGlzLmopJiZhLnB1c2goQmMoYixDYywhMCksXCJAXCIpLGEucHVzaChlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGMpKS5yZXBsYWNlKC8lMjUoWzAtOWEtZkEtRl17Mn0pL2csXCIlJDFcIikpLGM9dGhpcy5pLG51bGwhPWMmJmEucHVzaChcIjpcIixTdHJpbmcoYykpO2lmKGM9dGhpcy5hKXRoaXMuYiYmXCIvXCIhPWMuY2hhckF0KDApJiZhLnB1c2goXCIvXCIpLGEucHVzaChCYyhjLFwiL1wiPT1jLmNoYXJBdCgwKT9EYzpFYywhMCkpOyhjPXRoaXMuYy50b1N0cmluZygpKSYmYS5wdXNoKFwiP1wiLGMpOyhjPXRoaXMuZykmJmEucHVzaChcIiNcIixCYyhjLEZjKSk7cmV0dXJuIGEuam9pbihcIlwiKX07XG5TLnByb3RvdHlwZS5yZXNvbHZlPWZ1bmN0aW9uKGEpe3ZhciBiPU4odGhpcyksYz0hIWEuZjtjP3VjKGIsYS5mKTpjPSEhYS5qO2M/Yi5qPWEuajpjPSEhYS5iO2M/dmMoYixhLmIpOmM9bnVsbCE9YS5pO3ZhciBkPWEuYTtpZihjKXdjKGIsYS5pKTtlbHNlIGlmKGM9ISFhLmEpe2lmKFwiL1wiIT1kLmNoYXJBdCgwKSlpZih0aGlzLmImJiF0aGlzLmEpZD1cIi9cIitkO2Vsc2V7dmFyIGU9Yi5hLmxhc3RJbmRleE9mKFwiL1wiKTstMSE9ZSYmKGQ9Yi5hLnN1YnN0cigwLGUrMSkrZCk7fWU9ZDtpZihcIi4uXCI9PWV8fFwiLlwiPT1lKWQ9XCJcIjtlbHNlIGlmKHooZSxcIi4vXCIpfHx6KGUsXCIvLlwiKSl7ZD0wPT1lLmxhc3RJbmRleE9mKFwiL1wiLDApO2U9ZS5zcGxpdChcIi9cIik7Zm9yKHZhciBmPVtdLGg9MDtoPGUubGVuZ3RoOyl7dmFyIGw9ZVtoKytdO1wiLlwiPT1sP2QmJmg9PWUubGVuZ3RoJiZmLnB1c2goXCJcIik6XCIuLlwiPT1sPygoMTxmLmxlbmd0aHx8MT09Zi5sZW5ndGgmJlwiXCIhPWZbMF0pJiZmLnBvcCgpLGQmJlxuaD09ZS5sZW5ndGgmJmYucHVzaChcIlwiKSk6KGYucHVzaChsKSxkPSEwKTt9ZD1mLmpvaW4oXCIvXCIpO31lbHNlIGQ9ZTt9Yz9iLmE9ZDpjPVwiXCIhPT1hLmMudG9TdHJpbmcoKTtjP3hjKGIseWMoYS5jKSk6Yz0hIWEuZztjJiYoYi5nPWEuZyk7cmV0dXJuIGJ9O2Z1bmN0aW9uIE4oYSl7cmV0dXJuIG5ldyBTKGEpfWZ1bmN0aW9uIHVjKGEsYixjKXthLmY9Yz96YyhiLCEwKTpiO2EuZiYmKGEuZj1hLmYucmVwbGFjZSgvOiQvLFwiXCIpKTt9ZnVuY3Rpb24gdmMoYSxiLGMpe2EuYj1jP3pjKGIsITApOmI7fWZ1bmN0aW9uIHdjKGEsYil7aWYoYil7Yj1OdW1iZXIoYik7aWYoaXNOYU4oYil8fDA+Yil0aHJvdyBFcnJvcihcIkJhZCBwb3J0IG51bWJlciBcIitiKTthLmk9Yjt9ZWxzZSBhLmk9bnVsbDt9ZnVuY3Rpb24geGMoYSxiLGMpe2IgaW5zdGFuY2VvZiBBYz8oYS5jPWIsR2MoYS5jLGEuaCkpOihjfHwoYj1CYyhiLEhjKSksYS5jPW5ldyBBYyhiLGEuaCkpO31cbmZ1bmN0aW9uIFQoYSxiLGMpe2EuYy5zZXQoYixjKTt9ZnVuY3Rpb24gZmMoYSxiLGMpe3EoYyl8fChjPVtTdHJpbmcoYyldKTtJYyhhLmMsYixjKTt9ZnVuY3Rpb24gYmMoYSl7VChhLFwienhcIixNYXRoLmZsb29yKDIxNDc0ODM2NDgqTWF0aC5yYW5kb20oKSkudG9TdHJpbmcoMzYpK01hdGguYWJzKE1hdGguZmxvb3IoMjE0NzQ4MzY0OCpNYXRoLnJhbmRvbSgpKV53KCkpLnRvU3RyaW5nKDM2KSk7cmV0dXJuIGF9ZnVuY3Rpb24gSmMoYSl7cmV0dXJuIGEgaW5zdGFuY2VvZiBTP04oYSk6bmV3IFMoYSx2b2lkIDApfWZ1bmN0aW9uIEtjKGEsYixjLGQpe3ZhciBlPW5ldyBTKG51bGwsdm9pZCAwKTthJiZ1YyhlLGEpO2ImJnZjKGUsYik7YyYmd2MoZSxjKTtkJiYoZS5hPWQpO3JldHVybiBlfWZ1bmN0aW9uIHpjKGEsYil7cmV0dXJuIGE/Yj9kZWNvZGVVUkkoYS5yZXBsYWNlKC8lMjUvZyxcIiUyNTI1XCIpKTpkZWNvZGVVUklDb21wb25lbnQoYSk6XCJcIn1cbmZ1bmN0aW9uIEJjKGEsYixjKXtyZXR1cm4gbShhKT8oYT1lbmNvZGVVUkkoYSkucmVwbGFjZShiLExjKSxjJiYoYT1hLnJlcGxhY2UoLyUyNShbMC05YS1mQS1GXXsyfSkvZyxcIiUkMVwiKSksYSk6bnVsbH1mdW5jdGlvbiBMYyhhKXthPWEuY2hhckNvZGVBdCgwKTtyZXR1cm4gXCIlXCIrKGE+PjQmMTUpLnRvU3RyaW5nKDE2KSsoYSYxNSkudG9TdHJpbmcoMTYpfXZhciBDYz0vWyNcXC9cXD9AXS9nLEVjPS9bI1xcPzpdL2csRGM9L1sjXFw/XS9nLEhjPS9bI1xcP0BdL2csRmM9LyMvZztmdW5jdGlvbiBBYyhhLGIpe3RoaXMuYj10aGlzLmE9bnVsbDt0aGlzLmM9YXx8bnVsbDt0aGlzLmY9ISFiO31mdW5jdGlvbiBVKGEpe2EuYXx8KGEuYT1uZXcgUSxhLmI9MCxhLmMmJnRjKGEuYyxmdW5jdGlvbihiLGMpe2EuYWRkKGRlY29kZVVSSUNvbXBvbmVudChiLnJlcGxhY2UoL1xcKy9nLFwiIFwiKSksYyk7fSkpO31nPUFjLnByb3RvdHlwZTtcbmcuYWRkPWZ1bmN0aW9uKGEsYil7VSh0aGlzKTt0aGlzLmM9bnVsbDthPVYodGhpcyxhKTt2YXIgYz10aGlzLmEuZ2V0KGEpO2N8fHRoaXMuYS5zZXQoYSxjPVtdKTtjLnB1c2goYik7dGhpcy5iKz0xO3JldHVybiB0aGlzfTtmdW5jdGlvbiBNYyhhLGIpe1UoYSk7Yj1WKGEsYik7UihhLmEuYixiKSYmKGEuYz1udWxsLGEuYi09YS5hLmdldChiKS5sZW5ndGgscmMoYS5hLGIpKTt9ZnVuY3Rpb24gTmMoYSxiKXtVKGEpO2I9VihhLGIpO3JldHVybiBSKGEuYS5iLGIpfWcuZm9yRWFjaD1mdW5jdGlvbihhLGIpe1UodGhpcyk7dGhpcy5hLmZvckVhY2goZnVuY3Rpb24oYyxkKXtsYShjLGZ1bmN0aW9uKGUpe2EuY2FsbChiLGUsZCx0aGlzKTt9LHRoaXMpO30sdGhpcyk7fTtcbmcuSz1mdW5jdGlvbigpe1UodGhpcyk7Zm9yKHZhciBhPXRoaXMuYS5DKCksYj10aGlzLmEuSygpLGM9W10sZD0wO2Q8Yi5sZW5ndGg7ZCsrKWZvcih2YXIgZT1hW2RdLGY9MDtmPGUubGVuZ3RoO2YrKyljLnB1c2goYltkXSk7cmV0dXJuIGN9O2cuQz1mdW5jdGlvbihhKXtVKHRoaXMpO3ZhciBiPVtdO2lmKG0oYSkpTmModGhpcyxhKSYmKGI9b2EoYix0aGlzLmEuZ2V0KFYodGhpcyxhKSkpKTtlbHNle2E9dGhpcy5hLkMoKTtmb3IodmFyIGM9MDtjPGEubGVuZ3RoO2MrKyliPW9hKGIsYVtjXSk7fXJldHVybiBifTtnLnNldD1mdW5jdGlvbihhLGIpe1UodGhpcyk7dGhpcy5jPW51bGw7YT1WKHRoaXMsYSk7TmModGhpcyxhKSYmKHRoaXMuYi09dGhpcy5hLmdldChhKS5sZW5ndGgpO3RoaXMuYS5zZXQoYSxbYl0pO3RoaXMuYis9MTtyZXR1cm4gdGhpc307XG5nLmdldD1mdW5jdGlvbihhLGIpe2lmKCFhKXJldHVybiBiO2E9dGhpcy5DKGEpO3JldHVybiAwPGEubGVuZ3RoP1N0cmluZyhhWzBdKTpifTtmdW5jdGlvbiBJYyhhLGIsYyl7TWMoYSxiKTswPGMubGVuZ3RoJiYoYS5jPW51bGwsYS5hLnNldChWKGEsYikscGEoYykpLGEuYis9Yy5sZW5ndGgpO31nLnRvU3RyaW5nPWZ1bmN0aW9uKCl7aWYodGhpcy5jKXJldHVybiB0aGlzLmM7aWYoIXRoaXMuYSlyZXR1cm4gXCJcIjtmb3IodmFyIGE9W10sYj10aGlzLmEuSygpLGM9MDtjPGIubGVuZ3RoO2MrKyl7dmFyIGQ9YltjXSxlPWVuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoZCkpO2Q9dGhpcy5DKGQpO2Zvcih2YXIgZj0wO2Y8ZC5sZW5ndGg7ZisrKXt2YXIgaD1lO1wiXCIhPT1kW2ZdJiYoaCs9XCI9XCIrZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhkW2ZdKSkpO2EucHVzaChoKTt9fXJldHVybiB0aGlzLmM9YS5qb2luKFwiJlwiKX07XG5mdW5jdGlvbiB5YyhhKXt2YXIgYj1uZXcgQWM7Yi5jPWEuYzthLmEmJihiLmE9bmV3IFEoYS5hKSxiLmI9YS5iKTtyZXR1cm4gYn1mdW5jdGlvbiBWKGEsYil7Yj1TdHJpbmcoYik7YS5mJiYoYj1iLnRvTG93ZXJDYXNlKCkpO3JldHVybiBifWZ1bmN0aW9uIEdjKGEsYil7YiYmIWEuZiYmKFUoYSksYS5jPW51bGwsYS5hLmZvckVhY2goZnVuY3Rpb24oYyxkKXt2YXIgZT1kLnRvTG93ZXJDYXNlKCk7ZCE9ZSYmKE1jKHRoaXMsZCksSWModGhpcyxlLGMpKTt9LGEpKTthLmY9Yjt9ZnVuY3Rpb24gUWMoKXt9ZnVuY3Rpb24gUmMoKXt9eChSYyxRYyk7ZnVuY3Rpb24gU2MoYSl7dGhpcy5hPWE7dGhpcy5iPXRoaXMuaD1udWxsO3RoaXMuZz0hMTt0aGlzLmk9bnVsbDt0aGlzLmM9LTE7dGhpcy5sPXRoaXMuZj1udWxsO31nPVNjLnByb3RvdHlwZTtnLk09bnVsbDtmdW5jdGlvbiBVYyhhKXt2YXIgYj1hLmEuRi5hO2lmKG51bGwhPWIpSyg0KSxiPyhLKDEwKSxWYyhhLmEsYSwhMSkpOihLKDExKSxWYyhhLmEsYSwhMCkpO2Vsc2V7YS5iPW5ldyBNKGEsdm9pZCAwLHZvaWQgMCk7YS5iLmg9YS5oO2I9YS5hO2I9V2MoYixiLlkoKT9hLmY6bnVsbCxhLmkpO0soNCk7ZmMoYixcIlRZUEVcIixcInhtbGh0dHBcIik7dmFyIGM9YS5hLmosZD1hLmEuSTtjJiZkJiZUKGIsYyxkKTtkYyhhLmIsYiwhMSxhLmYpO319Zy4kPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmEuJChhKX07Zy5hYm9ydD1mdW5jdGlvbigpe3RoaXMuYiYmKHRoaXMuYi5jYW5jZWwoKSx0aGlzLmI9bnVsbCk7dGhpcy5jPS0xO307Zy5DYT1mdW5jdGlvbigpe3JldHVybiAhMX07XG5nLkZhPWZ1bmN0aW9uKGEsYil7dGhpcy5jPWEubztpZigwPT10aGlzLk0pe2lmKCF0aGlzLmEubyYmKGE9YS5hKSl7dmFyIGM9aGMoYSxcIlgtQ2xpZW50LVdpcmUtUHJvdG9jb2xcIik7dGhpcy5sPWM/YzpudWxsO3RoaXMuYS5qJiYoYT1oYyhhLFwiWC1IVFRQLVNlc3Npb24tSWRcIikpJiYodGhpcy5hLkk9YSk7fWlmKGIpe3RyeXt2YXIgZD10aGlzLmEuamEuYS5wYXJzZShiKTt9Y2F0Y2goZSl7Yj10aGlzLmE7Yi5tPXRoaXMuYztXKGIsMik7cmV0dXJufXRoaXMuZj1kWzBdO31lbHNlIGI9dGhpcy5hLGIubT10aGlzLmMsVyhiLDIpO31lbHNlIGlmKDE9PXRoaXMuTSlpZih0aGlzLmcpSyg2KTtlbHNlIGlmKFwiMTExMTFcIj09Yil7aWYoSyg1KSx0aGlzLmc9ITAsIUJ8fDEwPD1OdW1iZXIoTmEpKXRoaXMuYz0yMDAsdGhpcy5iLmNhbmNlbCgpLEsoMTEpLFZjKHRoaXMuYSx0aGlzLCEwKTt9ZWxzZSBLKDcpLHRoaXMuZz0hMTt9O1xuZy5uYT1mdW5jdGlvbigpe3RoaXMuYz10aGlzLmIubztpZih0aGlzLmIuYikwPT10aGlzLk0/KHRoaXMuTT0xLFVjKHRoaXMpKToxPT10aGlzLk0mJih0aGlzLmc/KEsoMTEpLFZjKHRoaXMuYSx0aGlzLCEwKSk6KEsoMTApLFZjKHRoaXMuYSx0aGlzLCExKSkpO2Vsc2V7MD09dGhpcy5NP0soOCk6MT09dGhpcy5NJiZLKDkpO3ZhciBhPXRoaXMuYTthLm09dGhpcy5jO1coYSwyKTt9fTtnLlk9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hLlkoKX07Zy5tYT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmEubWEoKX07ZnVuY3Rpb24gWGMoKXt0aGlzLmE9dGhpcy5iPW51bGw7fWZ1bmN0aW9uIFljKCl7dGhpcy5hPW5ldyBRO31mdW5jdGlvbiBaYyhhKXt2YXIgYj10eXBlb2YgYTtyZXR1cm4gXCJvYmplY3RcIj09YiYmYXx8XCJmdW5jdGlvblwiPT1iP1wib1wiKyhhW3RdfHwoYVt0XT0rK2RhKSk6Yi5jaGFyQXQoMCkrYX1ZYy5wcm90b3R5cGUuYWRkPWZ1bmN0aW9uKGEpe3RoaXMuYS5zZXQoWmMoYSksYSk7fTtZYy5wcm90b3R5cGUuQz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmEuQygpfTtmdW5jdGlvbiAkYyhhLGIpe3RoaXMuYj1hO3RoaXMuYT1iO31mdW5jdGlvbiBhZChhKXt0aGlzLmc9YXx8YmQ7ay5QZXJmb3JtYW5jZU5hdmlnYXRpb25UaW1pbmc/KGE9ay5wZXJmb3JtYW5jZS5nZXRFbnRyaWVzQnlUeXBlKFwibmF2aWdhdGlvblwiKSxhPTA8YS5sZW5ndGgmJihcImhxXCI9PWFbMF0ubmV4dEhvcFByb3RvY29sfHxcImgyXCI9PWFbMF0ubmV4dEhvcFByb3RvY29sKSk6YT0hIShrLmthJiZrLmthLkRhJiZrLmthLkRhKCkmJmsua2EuRGEoKS55Yik7dGhpcy5mPWE/dGhpcy5nOjE7dGhpcy5hPW51bGw7MTx0aGlzLmYmJih0aGlzLmE9bmV3IFljKTt0aGlzLmI9bnVsbDt0aGlzLmM9W107fXZhciBiZD0xMDtmdW5jdGlvbiBjZChhLGIpeyFhLmEmJih6KGIsXCJzcGR5XCIpfHx6KGIsXCJxdWljXCIpfHx6KGIsXCJoMlwiKSkmJihhLmY9YS5nLGEuYT1uZXcgWWMsYS5iJiYoZGQoYSxhLmIpLGEuYj1udWxsKSk7fWZ1bmN0aW9uIGVkKGEpe3JldHVybiBhLmI/ITA6YS5hP2EuYS5hLmM+PWEuZjohMX1cbmZ1bmN0aW9uIGZkKGEpe3JldHVybiBhLmI/MTphLmE/YS5hLmEuYzowfWZ1bmN0aW9uIGdkKGEsYil7YS5iP2E9YS5iPT1iOmEuYT8oYj1aYyhiKSxhPVIoYS5hLmEuYixiKSk6YT0hMTtyZXR1cm4gYX1mdW5jdGlvbiBkZChhLGIpe2EuYT9hLmEuYWRkKGIpOmEuYj1iO31mdW5jdGlvbiBoZChhLGIpe2lmKGEuYiYmYS5iPT1iKWEuYj1udWxsO2Vsc2V7dmFyIGM7aWYoYz1hLmEpYz1aYyhiKSxjPVIoYS5hLmEuYixjKTtjJiZyYyhhLmEuYSxaYyhiKSk7fX1hZC5wcm90b3R5cGUuY2FuY2VsPWZ1bmN0aW9uKCl7dGhpcy5jPWlkKHRoaXMpO3RoaXMuYj8odGhpcy5iLmNhbmNlbCgpLHRoaXMuYj1udWxsKTp0aGlzLmEmJjAhPXRoaXMuYS5hLmMmJihsYSh0aGlzLmEuQygpLGZ1bmN0aW9uKGEpe2EuY2FuY2VsKCk7fSkscWModGhpcy5hLmEpKTt9O1xuZnVuY3Rpb24gaWQoYSl7aWYobnVsbCE9YS5iKXJldHVybiBhLmMuY29uY2F0KGEuYi5qKTtpZihudWxsIT1hLmEmJjAhPWEuYS5hLmMpe3ZhciBiPWEuYztsYShhLmEuQygpLGZ1bmN0aW9uKGMpe2I9Yi5jb25jYXQoYy5qKTt9KTtyZXR1cm4gYn1yZXR1cm4gcGEoYS5jKX1mdW5jdGlvbiBqZCgpe31qZC5wcm90b3R5cGUuc3RyaW5naWZ5PWZ1bmN0aW9uKGEpe3JldHVybiBrLkpTT04uc3RyaW5naWZ5KGEsdm9pZCAwKX07amQucHJvdG90eXBlLnBhcnNlPWZ1bmN0aW9uKGEpe3JldHVybiBrLkpTT04ucGFyc2UoYSx2b2lkIDApfTtmdW5jdGlvbiBrZCgpe3RoaXMuYT1uZXcgamQ7fWZ1bmN0aW9uIGxkKGEsYixjKXt2YXIgZD1jfHxcIlwiO3RyeXtvYyhhLGZ1bmN0aW9uKGUsZil7dmFyIGg9ZTtyKGUpJiYoaD1vYihlKSk7Yi5wdXNoKGQrZitcIj1cIitlbmNvZGVVUklDb21wb25lbnQoaCkpO30pO31jYXRjaChlKXt0aHJvdyBiLnB1c2goZCtcInR5cGU9XCIrZW5jb2RlVVJJQ29tcG9uZW50KFwiX2JhZG1hcFwiKSksZTt9fWZ1bmN0aW9uIG1kKGEsYil7dmFyIGM9bmV3IEtiO2lmKGsuSW1hZ2Upe3ZhciBkPW5ldyBJbWFnZTtkLm9ubG9hZD12KG5kLGMsZCxcIlRlc3RMb2FkSW1hZ2U6IGxvYWRlZFwiLCEwLGIpO2Qub25lcnJvcj12KG5kLGMsZCxcIlRlc3RMb2FkSW1hZ2U6IGVycm9yXCIsITEsYik7ZC5vbmFib3J0PXYobmQsYyxkLFwiVGVzdExvYWRJbWFnZTogYWJvcnRcIiwhMSxiKTtkLm9udGltZW91dD12KG5kLGMsZCxcIlRlc3RMb2FkSW1hZ2U6IHRpbWVvdXRcIiwhMSxiKTtrLnNldFRpbWVvdXQoZnVuY3Rpb24oKXtpZihkLm9udGltZW91dClkLm9udGltZW91dCgpO30sMUU0KTtkLnNyYz1hO31lbHNlIGIoITEpO31mdW5jdGlvbiBuZChhLGIsYyxkLGUpe3RyeXtiLm9ubG9hZD1udWxsLGIub25lcnJvcj1udWxsLGIub25hYm9ydD1udWxsLGIub250aW1lb3V0PW51bGwsZShkKTt9Y2F0Y2goZil7fX12YXIgb2Q9ay5KU09OLnBhcnNlO2Z1bmN0aW9uIFgoYSl7Ry5jYWxsKHRoaXMpO3RoaXMuaGVhZGVycz1uZXcgUTt0aGlzLkg9YXx8bnVsbDt0aGlzLmI9ITE7dGhpcy5zPXRoaXMuYT1udWxsO3RoaXMuQT1cIlwiO3RoaXMuaD0wO3RoaXMuZj1cIlwiO3RoaXMuZz10aGlzLnc9dGhpcy5sPXRoaXMudj0hMTt0aGlzLm89MDt0aGlzLm09bnVsbDt0aGlzLkk9cGQ7dGhpcy5EPXRoaXMuRj0hMTt9eChYLEcpO3ZhciBwZD1cIlwiLHFkPS9eaHR0cHM/JC9pLHJkPVtcIlBPU1RcIixcIlBVVFwiXTtnPVgucHJvdG90eXBlO1xuZy5jYT1mdW5jdGlvbihhLGIsYyxkKXtpZih0aGlzLmEpdGhyb3cgRXJyb3IoXCJbZ29vZy5uZXQuWGhySW9dIE9iamVjdCBpcyBhY3RpdmUgd2l0aCBhbm90aGVyIHJlcXVlc3Q9XCIrdGhpcy5BK1wiOyBuZXdVcmk9XCIrYSk7Yj1iP2IudG9VcHBlckNhc2UoKTpcIkdFVFwiO3RoaXMuQT1hO3RoaXMuZj1cIlwiO3RoaXMuaD0wO3RoaXMudj0hMTt0aGlzLmI9ITA7dGhpcy5hPW5ldyBYTUxIdHRwUmVxdWVzdDt0aGlzLnM9dGhpcy5IP1NiKHRoaXMuSCk6U2IoV2IpO3RoaXMuYS5vbnJlYWR5c3RhdGVjaGFuZ2U9dSh0aGlzLkVhLHRoaXMpO3RyeXt0aGlzLnc9ITAsdGhpcy5hLm9wZW4oYixTdHJpbmcoYSksITApLHRoaXMudz0hMTt9Y2F0Y2goZil7c2QodGhpcyxmKTtyZXR1cm59YT1jfHxcIlwiO3ZhciBlPW5ldyBRKHRoaXMuaGVhZGVycyk7ZCYmb2MoZCxmdW5jdGlvbihmLGgpe2Uuc2V0KGgsZik7fSk7ZD1tYShlLksoKSk7Yz1rLkZvcm1EYXRhJiZhIGluc3RhbmNlb2Ygay5Gb3JtRGF0YTshKDA8PVxuamEocmQsYikpfHxkfHxjfHxlLnNldChcIkNvbnRlbnQtVHlwZVwiLFwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkO2NoYXJzZXQ9dXRmLThcIik7ZS5mb3JFYWNoKGZ1bmN0aW9uKGYsaCl7dGhpcy5hLnNldFJlcXVlc3RIZWFkZXIoaCxmKTt9LHRoaXMpO3RoaXMuSSYmKHRoaXMuYS5yZXNwb25zZVR5cGU9dGhpcy5JKTtcIndpdGhDcmVkZW50aWFsc1wiaW4gdGhpcy5hJiZ0aGlzLmEud2l0aENyZWRlbnRpYWxzIT09dGhpcy5GJiYodGhpcy5hLndpdGhDcmVkZW50aWFscz10aGlzLkYpO3RyeXt0ZCh0aGlzKSwwPHRoaXMubyYmKCh0aGlzLkQ9dWQodGhpcy5hKSk/KHRoaXMuYS50aW1lb3V0PXRoaXMubyx0aGlzLmEub250aW1lb3V0PXUodGhpcy5CYSx0aGlzKSk6dGhpcy5tPUViKHRoaXMuQmEsdGhpcy5vLHRoaXMpKSx0aGlzLmw9ITAsdGhpcy5hLnNlbmQoYSksdGhpcy5sPSExO31jYXRjaChmKXtzZCh0aGlzLGYpO319O1xuZnVuY3Rpb24gdWQoYSl7cmV0dXJuIEImJk1hKDkpJiZhYShhLnRpbWVvdXQpJiZ2b2lkIDAhPT1hLm9udGltZW91dH1mdW5jdGlvbiBuYShhKXtyZXR1cm4gXCJjb250ZW50LXR5cGVcIj09YS50b0xvd2VyQ2FzZSgpfWcuQmE9ZnVuY3Rpb24oKXtcInVuZGVmaW5lZFwiIT10eXBlb2YgZ29vZyYmdGhpcy5hJiYodGhpcy5mPVwiVGltZWQgb3V0IGFmdGVyIFwiK3RoaXMubytcIm1zLCBhYm9ydGluZ1wiLHRoaXMuaD04LHRoaXMuZGlzcGF0Y2hFdmVudChcInRpbWVvdXRcIiksdGhpcy5hYm9ydCg4KSk7fTtmdW5jdGlvbiBzZChhLGIpe2EuYj0hMTthLmEmJihhLmc9ITAsYS5hLmFib3J0KCksYS5nPSExKTthLmY9YjthLmg9NTt2ZChhKTt3ZChhKTt9ZnVuY3Rpb24gdmQoYSl7YS52fHwoYS52PSEwLGEuZGlzcGF0Y2hFdmVudChcImNvbXBsZXRlXCIpLGEuZGlzcGF0Y2hFdmVudChcImVycm9yXCIpKTt9XG5nLmFib3J0PWZ1bmN0aW9uKGEpe3RoaXMuYSYmdGhpcy5iJiYodGhpcy5iPSExLHRoaXMuZz0hMCx0aGlzLmEuYWJvcnQoKSx0aGlzLmc9ITEsdGhpcy5oPWF8fDcsdGhpcy5kaXNwYXRjaEV2ZW50KFwiY29tcGxldGVcIiksdGhpcy5kaXNwYXRjaEV2ZW50KFwiYWJvcnRcIiksd2QodGhpcykpO307Zy5HPWZ1bmN0aW9uKCl7dGhpcy5hJiYodGhpcy5iJiYodGhpcy5iPSExLHRoaXMuZz0hMCx0aGlzLmEuYWJvcnQoKSx0aGlzLmc9ITEpLHdkKHRoaXMsITApKTtYLk4uRy5jYWxsKHRoaXMpO307Zy5FYT1mdW5jdGlvbigpe3RoaXMuanx8KHRoaXMud3x8dGhpcy5sfHx0aGlzLmc/eGQodGhpcyk6dGhpcy5aYSgpKTt9O2cuWmE9ZnVuY3Rpb24oKXt4ZCh0aGlzKTt9O1xuZnVuY3Rpb24geGQoYSl7aWYoYS5iJiZcInVuZGVmaW5lZFwiIT10eXBlb2YgZ29vZyYmKCFhLnNbMV18fDQhPU8oYSl8fDIhPWEuVCgpKSlpZihhLmwmJjQ9PU8oYSkpRWIoYS5FYSwwLGEpO2Vsc2UgaWYoYS5kaXNwYXRjaEV2ZW50KFwicmVhZHlzdGF0ZWNoYW5nZVwiKSw0PT1PKGEpKXthLmI9ITE7dHJ5e3ZhciBiPWEuVCgpO2E6c3dpdGNoKGIpe2Nhc2UgMjAwOmNhc2UgMjAxOmNhc2UgMjAyOmNhc2UgMjA0OmNhc2UgMjA2OmNhc2UgMzA0OmNhc2UgMTIyMzp2YXIgYz0hMDticmVhayBhO2RlZmF1bHQ6Yz0hMTt9dmFyIGQ7aWYoIShkPWMpKXt2YXIgZTtpZihlPTA9PT1iKXt2YXIgZj1TdHJpbmcoYS5BKS5tYXRjaChzYylbMV18fG51bGw7aWYoIWYmJmsuc2VsZiYmay5zZWxmLmxvY2F0aW9uKXt2YXIgaD1rLnNlbGYubG9jYXRpb24ucHJvdG9jb2w7Zj1oLnN1YnN0cigwLGgubGVuZ3RoLTEpO31lPSFxZC50ZXN0KGY/Zi50b0xvd2VyQ2FzZSgpOlwiXCIpO31kPWU7fWlmKGQpYS5kaXNwYXRjaEV2ZW50KFwiY29tcGxldGVcIiksXG5hLmRpc3BhdGNoRXZlbnQoXCJzdWNjZXNzXCIpO2Vsc2V7YS5oPTY7dHJ5e3ZhciBsPTI8TyhhKT9hLmEuc3RhdHVzVGV4dDpcIlwiO31jYXRjaChFKXtsPVwiXCI7fWEuZj1sK1wiIFtcIithLlQoKStcIl1cIjt2ZChhKTt9fWZpbmFsbHl7d2QoYSk7fX19ZnVuY3Rpb24gd2QoYSxiKXtpZihhLmEpe3RkKGEpO3ZhciBjPWEuYSxkPWEuc1swXT9iYTpudWxsO2EuYT1udWxsO2Eucz1udWxsO2J8fGEuZGlzcGF0Y2hFdmVudChcInJlYWR5XCIpO3RyeXtjLm9ucmVhZHlzdGF0ZWNoYW5nZT1kO31jYXRjaChlKXt9fX1mdW5jdGlvbiB0ZChhKXthLmEmJmEuRCYmKGEuYS5vbnRpbWVvdXQ9bnVsbCk7YS5tJiYoay5jbGVhclRpbWVvdXQoYS5tKSxhLm09bnVsbCk7fWZ1bmN0aW9uIE8oYSl7cmV0dXJuIGEuYT9hLmEucmVhZHlTdGF0ZTowfWcuVD1mdW5jdGlvbigpe3RyeXtyZXR1cm4gMjxPKHRoaXMpP3RoaXMuYS5zdGF0dXM6LTF9Y2F0Y2goYSl7cmV0dXJuIC0xfX07XG5nLmFhPWZ1bmN0aW9uKCl7dHJ5e3JldHVybiB0aGlzLmE/dGhpcy5hLnJlc3BvbnNlVGV4dDpcIlwifWNhdGNoKGEpe3JldHVybiBcIlwifX07Zy5VYT1mdW5jdGlvbihhKXtpZih0aGlzLmEpe3ZhciBiPXRoaXMuYS5yZXNwb25zZVRleHQ7YSYmMD09Yi5pbmRleE9mKGEpJiYoYj1iLnN1YnN0cmluZyhhLmxlbmd0aCkpO3JldHVybiBvZChiKX19O2Z1bmN0aW9uIGhjKGEsYil7cmV0dXJuIGEuYT9hLmEuZ2V0UmVzcG9uc2VIZWFkZXIoYik6bnVsbH1nLnlhPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaH07Zy5YYT1mdW5jdGlvbigpe3JldHVybiBtKHRoaXMuZik/dGhpcy5mOlN0cmluZyh0aGlzLmYpfTtmdW5jdGlvbiB5ZChhKXt2YXIgYj1cIlwiO3ZhKGEsZnVuY3Rpb24oYyxkKXtiKz1kO2IrPVwiOlwiO2IrPWM7Yis9XCJcXHJcXG5cIjt9KTtyZXR1cm4gYn1mdW5jdGlvbiB6ZChhLGIsYyl7YTp7Zm9yKGQgaW4gYyl7dmFyIGQ9ITE7YnJlYWsgYX1kPSEwO31pZihkKXJldHVybiBhO2M9eWQoYyk7aWYobShhKSl7Yj1lbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGIpKTtjPW51bGwhPWM/XCI9XCIrZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhjKSk6XCJcIjtpZihiKz1jKXtjPWEuaW5kZXhPZihcIiNcIik7MD5jJiYoYz1hLmxlbmd0aCk7ZD1hLmluZGV4T2YoXCI/XCIpO2lmKDA+ZHx8ZD5jKXtkPWM7dmFyIGU9XCJcIjt9ZWxzZSBlPWEuc3Vic3RyaW5nKGQrMSxjKTthPVthLnN1YnN0cigwLGQpLGUsYS5zdWJzdHIoYyldO2M9YVsxXTthWzFdPWI/Yz9jK1wiJlwiK2I6YjpjO2E9YVswXSsoYVsxXT9cIj9cIithWzFdOlwiXCIpK2FbMl07fXJldHVybiBhfVQoYSxiLGMpO3JldHVybiBhfWZ1bmN0aW9uIEFkKGEpe3RoaXMuZj1bXTt0aGlzLkY9bmV3IFhjO3RoaXMuZ2E9dGhpcy5wYT10aGlzLkI9dGhpcy5oYT10aGlzLmE9dGhpcy5JPXRoaXMuaj10aGlzLlY9dGhpcy5nPXRoaXMuSj10aGlzLmk9bnVsbDt0aGlzLlFhPXRoaXMuUD0wO3RoaXMuT2E9ISFuKFwiaW50ZXJuYWxDaGFubmVsUGFyYW1zLmZhaWxGYXN0XCIsYSk7dGhpcy5pYT10aGlzLnc9dGhpcy5zPXRoaXMubD10aGlzLmg9dGhpcy5jPW51bGw7dGhpcy5vYT0hMDt0aGlzLm09dGhpcy5yYT10aGlzLk89LTE7dGhpcy5TPXRoaXMudj10aGlzLkE9MDt0aGlzLk5hPW4oXCJpbnRlcm5hbENoYW5uZWxQYXJhbXMuYmFzZVJldHJ5RGVsYXlNc1wiLGEpfHw1RTM7dGhpcy5SYT1uKFwiaW50ZXJuYWxDaGFubmVsUGFyYW1zLnJldHJ5RGVsYXlTZWVkTXNcIixhKXx8MUU0O3RoaXMuUGE9bihcImludGVybmFsQ2hhbm5lbFBhcmFtcy5mb3J3YXJkQ2hhbm5lbE1heFJldHJpZXNcIixhKXx8Mjt0aGlzLnFhPW4oXCJpbnRlcm5hbENoYW5uZWxQYXJhbXMuZm9yd2FyZENoYW5uZWxSZXF1ZXN0VGltZW91dE1zXCIsXG5hKXx8MkU0O3RoaXMuS2E9YSYmYS56Ynx8dm9pZCAwO3RoaXMuRD12b2lkIDA7dGhpcy5SPWEmJmEuc3VwcG9ydHNDcm9zc0RvbWFpblhocnx8ITE7dGhpcy5IPVwiXCI7dGhpcy5iPW5ldyBhZChhJiZhLmNvbmN1cnJlbnRSZXF1ZXN0TGltaXQpO3RoaXMuamE9bmV3IGtkO3RoaXMubz1hJiZ2b2lkIDAhPT1hLmJhY2tncm91bmRDaGFubmVsVGVzdD9hLmJhY2tncm91bmRDaGFubmVsVGVzdDohMDsodGhpcy5XPWEmJmEuZmFzdEhhbmRzaGFrZXx8ITEpJiYhdGhpcy5vJiYodGhpcy5vPSEwKTthJiZhLmZvcmNlTG9uZ1BvbGxpbmcmJih0aGlzLm9hPSExKTt0aGlzLmZhPXZvaWQgMDt9Zz1BZC5wcm90b3R5cGU7Zy53YT04O2cudT0xO1xuZnVuY3Rpb24gQmQoYSl7Q2QoYSk7aWYoMz09YS51KXt2YXIgYj1hLlArKyxjPU4oYS5CKTtUKGMsXCJTSURcIixhLkgpO1QoYyxcIlJJRFwiLGIpO1QoYyxcIlRZUEVcIixcInRlcm1pbmF0ZVwiKTtEZChhLGMpO2I9bmV3IE0oYSxiLHZvaWQgMCk7Yi5GPTI7Yi5mPWJjKE4oYykpO2M9ITE7ay5uYXZpZ2F0b3ImJmsubmF2aWdhdG9yLnNlbmRCZWFjb24mJihjPWsubmF2aWdhdG9yLnNlbmRCZWFjb24oYi5mLnRvU3RyaW5nKCksXCJcIikpOyFjJiZrLkltYWdlJiYoKG5ldyBJbWFnZSkuc3JjPWIuZixjPSEwKTtjfHwoYi5hPWIuZy4kKG51bGwpLGIuYS5jYShiLmYpKTtiLnY9dygpO2VjKGIpO31FZChhKTt9XG5mdW5jdGlvbiBDZChhKXthLncmJihhLncuYWJvcnQoKSxhLnc9bnVsbCk7YS5hJiYoYS5hLmNhbmNlbCgpLGEuYT1udWxsKTthLmwmJihrLmNsZWFyVGltZW91dChhLmwpLGEubD1udWxsKTtGZChhKTthLmIuY2FuY2VsKCk7YS5oJiYoYWEoYS5oKSYmay5jbGVhclRpbWVvdXQoYS5oKSxhLmg9bnVsbCk7fWZ1bmN0aW9uIEdkKGEsYil7YS5mLnB1c2gobmV3ICRjKGEuUWErKyxiKSk7Mz09YS51JiZIZChhKTt9Zy5DYT1mdW5jdGlvbigpe3JldHVybiAwPT10aGlzLnV9O2Z1bmN0aW9uIEhkKGEpe2VkKGEuYil8fGEuaHx8KGEuaD0hMCx3YihhLkhhLGEpLGEuQT0wKTt9XG5mdW5jdGlvbiBJZChhLGIpe2lmKGZkKGEuYik+PWEuYi5mLShhLmg/MTowKSlyZXR1cm4gITE7aWYoYS5oKXJldHVybiBhLmY9Yi5qLmNvbmNhdChhLmYpLCEwO2lmKDE9PWEudXx8Mj09YS51fHxhLkE+PShhLk9hPzA6YS5QYSkpcmV0dXJuICExO2EuaD1PYih1KGEuSGEsYSxiKSxKZChhLGEuQSkpO2EuQSsrO3JldHVybiAhMH1cbmcuSGE9ZnVuY3Rpb24oYSl7aWYodGhpcy5oKWlmKHRoaXMuaD1udWxsLDE9PXRoaXMudSl7aWYoIWEpe3RoaXMuUD1NYXRoLmZsb29yKDFFNSpNYXRoLnJhbmRvbSgpKTthPXRoaXMuUCsrO3ZhciBiPW5ldyBNKHRoaXMsYSx2b2lkIDApLGM9dGhpcy5pO3RoaXMuSiYmKGM/KGM9d2EoYykseWEoYyx0aGlzLkopKTpjPXRoaXMuSik7bnVsbD09PXRoaXMuZyYmKGIuaD1jKTt2YXIgZDtpZih0aGlzLlcpYTp7Zm9yKHZhciBlPWQ9MDtlPHRoaXMuZi5sZW5ndGg7ZSsrKXtiOnt2YXIgZj10aGlzLmZbZV07aWYoXCJfX2RhdGFfX1wiaW4gZi5hJiYoZj1mLmEuX19kYXRhX18sbShmKSkpe2Y9Zi5sZW5ndGg7YnJlYWsgYn1mPXZvaWQgMDt9aWYodm9pZCAwPT09ZilicmVhaztkKz1mO2lmKDQwOTY8ZCl7ZD1lO2JyZWFrIGF9aWYoNDA5Nj09PWR8fGU9PT10aGlzLmYubGVuZ3RoLTEpe2Q9ZSsxO2JyZWFrIGF9fWQ9MUUzO31lbHNlIGQ9MUUzO2Q9S2QodGhpcyxiLGQpO2U9Tih0aGlzLkIpO1QoZSxcblwiUklEXCIsYSk7VChlLFwiQ1ZFUlwiLDIyKTt0aGlzLm8mJnRoaXMuaiYmVChlLFwiWC1IVFRQLVNlc3Npb24tSWRcIix0aGlzLmopO0RkKHRoaXMsZSk7dGhpcy5nJiZjJiZ6ZChlLHRoaXMuZyxjKTtkZCh0aGlzLmIsYik7dGhpcy5XPyhUKGUsXCIkcmVxXCIsZCksVChlLFwiU0lEXCIsXCJudWxsXCIpLGIuUz0hMCxhYyhiLGUsbnVsbCkpOmFjKGIsZSxkKTt0aGlzLnU9Mjt9fWVsc2UgMz09dGhpcy51JiYoYT9MZCh0aGlzLGEpOjA9PXRoaXMuZi5sZW5ndGh8fGVkKHRoaXMuYil8fExkKHRoaXMpKTt9O1xuZnVuY3Rpb24gTGQoYSxiKXt2YXIgYztiP2M9Yi5XOmM9YS5QKys7dmFyIGQ9TihhLkIpO1QoZCxcIlNJRFwiLGEuSCk7VChkLFwiUklEXCIsYyk7VChkLFwiQUlEXCIsYS5PKTtEZChhLGQpO2EuZyYmYS5pJiZ6ZChkLGEuZyxhLmkpO2M9bmV3IE0oYSxjLGEuQSsxKTtudWxsPT09YS5nJiYoYy5oPWEuaSk7YiYmKGEuZj1iLmouY29uY2F0KGEuZikpO2I9S2QoYSxjLDFFMyk7Yy5zZXRUaW1lb3V0KE1hdGgucm91bmQoLjUqYS5xYSkrTWF0aC5yb3VuZCguNSphLnFhKk1hdGgucmFuZG9tKCkpKTtkZChhLmIsYyk7YWMoYyxkLGIpO31mdW5jdGlvbiBEZChhLGIpe2EuYyYmb2Moe30sZnVuY3Rpb24oYyxkKXtUKGIsZCxjKTt9KTt9XG5mdW5jdGlvbiBLZChhLGIsYyl7Yz1NYXRoLm1pbihhLmYubGVuZ3RoLGMpO3ZhciBkPWEuYz91KGEuYy5TYSxhLmMsYSk6bnVsbDthOmZvcih2YXIgZT1hLmYsZj0tMTs7KXt2YXIgaD1bXCJjb3VudD1cIitjXTstMT09Zj8wPGM/KGY9ZVswXS5iLGgucHVzaChcIm9mcz1cIitmKSk6Zj0wOmgucHVzaChcIm9mcz1cIitmKTtmb3IodmFyIGw9ITAsRT0wO0U8YztFKyspe3ZhciBCYj1lW0VdLmIsVGM9ZVtFXS5hO0JiLT1mO2lmKDA+QmIpZj1NYXRoLm1heCgwLGVbRV0uYi0xMDApLGw9ITE7ZWxzZSB0cnl7bGQoVGMsaCxcInJlcVwiK0JiK1wiX1wiKTt9Y2F0Y2goVWQpe2QmJmQoVGMpO319aWYobCl7ZD1oLmpvaW4oXCImXCIpO2JyZWFrIGF9fWE9YS5mLnNwbGljZSgwLGMpO2Iuaj1hO3JldHVybiBkfWZ1bmN0aW9uIE1kKGEpe2EuYXx8YS5sfHwoYS5TPTEsd2IoYS5HYSxhKSxhLnY9MCk7fVxuZnVuY3Rpb24gTmQoYSl7aWYoYS5hfHxhLmx8fDM8PWEudilyZXR1cm4gITE7YS5TKys7YS5sPU9iKHUoYS5HYSxhKSxKZChhLGEudikpO2EudisrO3JldHVybiAhMH1nLkdhPWZ1bmN0aW9uKCl7dGhpcy5sPW51bGw7dGhpcy5hPW5ldyBNKHRoaXMsXCJycGNcIix0aGlzLlMpO251bGw9PT10aGlzLmcmJih0aGlzLmEuaD10aGlzLmkpO3RoaXMuYS5KPTA7dmFyIGE9Tih0aGlzLnBhKTtUKGEsXCJSSURcIixcInJwY1wiKTtUKGEsXCJTSURcIix0aGlzLkgpO1QoYSxcIkNJXCIsdGhpcy5pYT9cIjBcIjpcIjFcIik7VChhLFwiQUlEXCIsdGhpcy5PKTtEZCh0aGlzLGEpO1QoYSxcIlRZUEVcIixcInhtbGh0dHBcIik7dGhpcy5nJiZ0aGlzLmkmJnpkKGEsdGhpcy5nLHRoaXMuaSk7dGhpcy5EJiZ0aGlzLmEuc2V0VGltZW91dCh0aGlzLkQpO2RjKHRoaXMuYSxhLCEwLHRoaXMuZ2EpO307XG5mdW5jdGlvbiBWYyhhLGIsYyl7dmFyIGQ9Yi5sO2QmJmNkKGEuYixkKTthLmlhPWEub2EmJmM7YS5tPWIuYzthLkI9V2MoYSxudWxsLGEuaGEpO0hkKGEpO31cbmcuRmE9ZnVuY3Rpb24oYSxiKXtpZigwIT10aGlzLnUmJih0aGlzLmE9PWF8fGdkKHRoaXMuYixhKSkpaWYodGhpcy5tPWEubywhYS5zJiZnZCh0aGlzLmIsYSkmJjM9PXRoaXMudSl7dHJ5e3ZhciBjPXRoaXMuamEuYS5wYXJzZShiKTt9Y2F0Y2goZil7Yz1udWxsO31pZihxKGMpJiYzPT1jLmxlbmd0aCl7Yj1jO2lmKDA9PWJbMF0pYTp7aWYoIXRoaXMubCl7aWYodGhpcy5hKWlmKHRoaXMuYS52KzNFMzxhLnYpRmQodGhpcyksdGhpcy5hLmNhbmNlbCgpLHRoaXMuYT1udWxsO2Vsc2UgYnJlYWsgYTtOZCh0aGlzKTtLKDE4KTt9fWVsc2UgdGhpcy5yYT1iWzFdLDA8dGhpcy5yYS10aGlzLk8mJjM3NTAwPmJbMl0mJnRoaXMuaWEmJjA9PXRoaXMudiYmIXRoaXMucyYmKHRoaXMucz1PYih1KHRoaXMuWWEsdGhpcyksNkUzKSk7aWYoMT49ZmQodGhpcy5iKSYmdGhpcy5mYSl7dHJ5e3RoaXMuZmEoKTt9Y2F0Y2goZil7fXRoaXMuZmE9dm9pZCAwO319ZWxzZSBXKHRoaXMsMTEpO31lbHNlIGlmKChhLnN8fFxudGhpcy5hPT1hKSYmRmQodGhpcyksIXFhKGIpKWZvcihiPWM9dGhpcy5qYS5hLnBhcnNlKGIpLGM9MDtjPGIubGVuZ3RoO2MrKyl7dmFyIGQ9YltjXTt0aGlzLk89ZFswXTtkPWRbMV07aWYoMj09dGhpcy51KWlmKFwiY1wiPT1kWzBdKXt0aGlzLkg9ZFsxXTt0aGlzLmdhPWRbMl07dmFyIGU9ZFszXTtudWxsIT1lJiYodGhpcy53YT1lKTtkPWRbNV07bnVsbCE9ZCYmYWEoZCkmJjA8ZCYmKHRoaXMuRD0xLjUqZCk7dGhpcy5vJiYoZD1hLmEpJiYoKGU9aGMoZCxcIlgtQ2xpZW50LVdpcmUtUHJvdG9jb2xcIikpJiZjZCh0aGlzLmIsZSksdGhpcy5qJiYoZD1oYyhkLFwiWC1IVFRQLVNlc3Npb24tSWRcIikpKSYmKHRoaXMuST1kLFQodGhpcy5CLHRoaXMuaixkKSk7dGhpcy51PTM7dGhpcy5jJiZ0aGlzLmMudmEoKTtkPWE7dGhpcy5wYT1XYyh0aGlzLHRoaXMuWSgpP3RoaXMuZ2E6bnVsbCx0aGlzLmhhKTtkLnM/KGhkKHRoaXMuYixkKSwoZT10aGlzLkQpJiZkLnNldFRpbWVvdXQoZSksZC5pJiYoZ2MoZCksXG5lYyhkKSksdGhpcy5hPWQpOk1kKHRoaXMpOzA8dGhpcy5mLmxlbmd0aCYmSGQodGhpcyk7fWVsc2VcInN0b3BcIiE9ZFswXSYmXCJjbG9zZVwiIT1kWzBdfHxXKHRoaXMsNyk7ZWxzZSAzPT10aGlzLnUmJihcInN0b3BcIj09ZFswXXx8XCJjbG9zZVwiPT1kWzBdP1wic3RvcFwiPT1kWzBdP1codGhpcyw3KTpCZCh0aGlzKTpcIm5vb3BcIiE9ZFswXSYmdGhpcy5jJiZ0aGlzLmMudWEoZCksdGhpcy52PTApO319O2cuWWE9ZnVuY3Rpb24oKXtudWxsIT10aGlzLnMmJih0aGlzLnM9bnVsbCx0aGlzLmEuY2FuY2VsKCksdGhpcy5hPW51bGwsTmQodGhpcyksSygxOSkpO307ZnVuY3Rpb24gRmQoYSl7bnVsbCE9YS5zJiYoay5jbGVhclRpbWVvdXQoYS5zKSxhLnM9bnVsbCk7fVxuZy5uYT1mdW5jdGlvbihhKXt2YXIgYj1udWxsO2lmKHRoaXMuYT09YSl7RmQodGhpcyk7dGhpcy5hPW51bGw7dmFyIGM9Mjt9ZWxzZSBpZihnZCh0aGlzLmIsYSkpYj1hLmosaGQodGhpcy5iLGEpLGM9MTtlbHNlIHJldHVybjt0aGlzLm09YS5vO2lmKDAhPXRoaXMudSlpZihhLmIpMT09Yz8oYj13KCktYS52LEkuZGlzcGF0Y2hFdmVudChuZXcgTmIoSSxhLmw/YS5sLmxlbmd0aDowLGIsdGhpcy5BKSksSGQodGhpcykpOk1kKHRoaXMpO2Vsc2V7dmFyIGQ9YS5jO2lmKDM9PWR8fDA9PWQmJjA8dGhpcy5tfHwhKDE9PWMmJklkKHRoaXMsYSl8fDI9PWMmJk5kKHRoaXMpKSlzd2l0Y2goYiYmMDxiLmxlbmd0aCYmKGE9dGhpcy5iLGEuYz1hLmMuY29uY2F0KGIpKSxkKXtjYXNlIDE6Vyh0aGlzLDUpO2JyZWFrO2Nhc2UgNDpXKHRoaXMsMTApO2JyZWFrO2Nhc2UgMzpXKHRoaXMsNik7YnJlYWs7ZGVmYXVsdDpXKHRoaXMsMik7fX19O1xuZnVuY3Rpb24gSmQoYSxiKXt2YXIgYz1hLk5hK01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSphLlJhKTthLm1hKCl8fChjKj0yKTtyZXR1cm4gYypifWZ1bmN0aW9uIFcoYSxiKXtpZigyPT1iKXt2YXIgYz1udWxsO2EuYyYmKGM9bnVsbCk7dmFyIGQ9dShhLmViLGEpO2N8fChjPW5ldyBTKFwiLy93d3cuZ29vZ2xlLmNvbS9pbWFnZXMvY2xlYXJkb3QuZ2lmXCIpLGsubG9jYXRpb24mJlwiaHR0cFwiPT1rLmxvY2F0aW9uLnByb3RvY29sfHx1YyhjLFwiaHR0cHNcIiksYmMoYykpO21kKGMudG9TdHJpbmcoKSxkKTt9ZWxzZSBLKDIpO2EudT0wO2EuYyYmYS5jLnRhKGIpO0VkKGEpO0NkKGEpO31nLmViPWZ1bmN0aW9uKGEpe2E/SygyKTpLKDEpO307ZnVuY3Rpb24gRWQoYSl7YS51PTA7YS5tPS0xO2lmKGEuYyl7aWYoMCE9aWQoYS5iKS5sZW5ndGh8fDAhPWEuZi5sZW5ndGgpYS5iLmMubGVuZ3RoPTAscGEoYS5mKSxhLmYubGVuZ3RoPTA7YS5jLnNhKCk7fX1cbmZ1bmN0aW9uIFdjKGEsYixjKXt2YXIgZD1KYyhjKTtpZihcIlwiIT1kLmIpYiYmdmMoZCxiK1wiLlwiK2QuYiksd2MoZCxkLmkpO2Vsc2V7dmFyIGU9ay5sb2NhdGlvbixmO2I/Zj1iK1wiLlwiK2UuaG9zdG5hbWU6Zj1lLmhvc3RuYW1lO2Q9S2MoZS5wcm90b2NvbCxmLCtlLnBvcnQsYyk7fWEuViYmdmEoYS5WLGZ1bmN0aW9uKGgsbCl7VChkLGwsaCk7fSk7Yj1hLmo7Yz1hLkk7YiYmYyYmVChkLGIsYyk7VChkLFwiVkVSXCIsYS53YSk7RGQoYSxkKTtyZXR1cm4gZH1nLiQ9ZnVuY3Rpb24oYSl7aWYoYSYmIXRoaXMuUil0aHJvdyBFcnJvcihcIkNhbid0IGNyZWF0ZSBzZWNvbmRhcnkgZG9tYWluIGNhcGFibGUgWGhySW8gb2JqZWN0LlwiKTthPW5ldyBYKHRoaXMuS2EpO2EuRj10aGlzLlI7cmV0dXJuIGF9O2cubWE9ZnVuY3Rpb24oKXtyZXR1cm4gISF0aGlzLmMmJiEwfTtnLlk9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5SfTtmdW5jdGlvbiBPZCgpe31nPU9kLnByb3RvdHlwZTtnLnZhPWZ1bmN0aW9uKCl7fTtcbmcudWE9ZnVuY3Rpb24oKXt9O2cudGE9ZnVuY3Rpb24oKXt9O2cuc2E9ZnVuY3Rpb24oKXt9O2cuU2E9ZnVuY3Rpb24oKXt9O2Z1bmN0aW9uIFBkKGEpe2Zvcih2YXIgYj1hcmd1bWVudHNbMF0sYz0xO2M8YXJndW1lbnRzLmxlbmd0aDtjKyspe3ZhciBkPWFyZ3VtZW50c1tjXTtpZigwPT1kLmxhc3RJbmRleE9mKFwiL1wiLDApKWI9ZDtlbHNle3ZhciBlOyhlPVwiXCI9PWIpfHwoZT1iLmxlbmd0aC0xLGU9MDw9ZSYmYi5pbmRleE9mKFwiL1wiLGUpPT1lKTtlP2IrPWQ6Yis9XCIvXCIrZDt9fXJldHVybiBifWZ1bmN0aW9uIFFkKCl7aWYoQiYmISgxMDw9TnVtYmVyKE5hKSkpdGhyb3cgRXJyb3IoXCJFbnZpcm9ubWVudGFsIGVycm9yOiBubyBhdmFpbGFibGUgdHJhbnNwb3J0LlwiKTt9UWQucHJvdG90eXBlLmE9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbmV3IFkoYSxiKX07XG5mdW5jdGlvbiBZKGEsYil7Ry5jYWxsKHRoaXMpO3RoaXMuYT1uZXcgQWQoYik7dGhpcy5nPWE7dGhpcy5tPWImJmIudGVzdFVybD9iLnRlc3RVcmw6UGQodGhpcy5nLFwidGVzdFwiKTt0aGlzLmI9YiYmYi5tZXNzYWdlVXJsUGFyYW1zfHxudWxsO2E9YiYmYi5tZXNzYWdlSGVhZGVyc3x8bnVsbDtiJiZiLmNsaWVudFByb3RvY29sSGVhZGVyUmVxdWlyZWQmJihhP2FbXCJYLUNsaWVudC1Qcm90b2NvbFwiXT1cIndlYmNoYW5uZWxcIjphPXtcIlgtQ2xpZW50LVByb3RvY29sXCI6XCJ3ZWJjaGFubmVsXCJ9KTt0aGlzLmEuaT1hO2E9YiYmYi5pbml0TWVzc2FnZUhlYWRlcnN8fG51bGw7YiYmYi5tZXNzYWdlQ29udGVudFR5cGUmJihhP2FbXCJYLVdlYkNoYW5uZWwtQ29udGVudC1UeXBlXCJdPWIubWVzc2FnZUNvbnRlbnRUeXBlOmE9e1wiWC1XZWJDaGFubmVsLUNvbnRlbnQtVHlwZVwiOmIubWVzc2FnZUNvbnRlbnRUeXBlfSk7YiYmYi54YSYmKGE/YVtcIlgtV2ViQ2hhbm5lbC1DbGllbnQtUHJvZmlsZVwiXT1iLnhhOlxuYT17XCJYLVdlYkNoYW5uZWwtQ2xpZW50LVByb2ZpbGVcIjpiLnhhfSk7dGhpcy5hLko9YTsoYT1iJiZiLmh0dHBIZWFkZXJzT3ZlcndyaXRlUGFyYW0pJiYhcWEoYSkmJih0aGlzLmEuZz1hKTt0aGlzLmw9YiYmYi5zdXBwb3J0c0Nyb3NzRG9tYWluWGhyfHwhMTt0aGlzLmg9YiYmYi5zZW5kUmF3SnNvbnx8ITE7KGI9YiYmYi5odHRwU2Vzc2lvbklkUGFyYW0pJiYhcWEoYikmJih0aGlzLmEuaj1iLGE9dGhpcy5iLG51bGwhPT1hJiZiIGluIGEmJihhPXRoaXMuYixiIGluIGEmJmRlbGV0ZSBhW2JdKSk7dGhpcy5mPW5ldyBaKHRoaXMpO314KFksRyk7Zz1ZLnByb3RvdHlwZTtnLmFkZEV2ZW50TGlzdGVuZXI9ZnVuY3Rpb24oYSxiLGMsZCl7WS5OLmFkZEV2ZW50TGlzdGVuZXIuY2FsbCh0aGlzLGEsYixjLGQpO307Zy5yZW1vdmVFdmVudExpc3RlbmVyPWZ1bmN0aW9uKGEsYixjLGQpe1kuTi5yZW1vdmVFdmVudExpc3RlbmVyLmNhbGwodGhpcyxhLGIsYyxkKTt9O1xuZy5WYT1mdW5jdGlvbigpe3RoaXMuYS5jPXRoaXMuZjt0aGlzLmwmJih0aGlzLmEuUj0hMCk7dmFyIGE9dGhpcy5hLGI9dGhpcy5tLGM9dGhpcy5nLGQ9dGhpcy5ifHx2b2lkIDA7SygwKTthLmhhPWM7YS5WPWR8fHt9O2EubyYmKGEuRi5iPVtdLGEuRi5hPSExKTthLnc9bmV3IFNjKGEpO251bGw9PT1hLmcmJihhLncuaD1hLmkpO2M9YjthLmcmJmEuaSYmKGM9emQoYixhLmcsYS5pKSk7YT1hLnc7YS5pPWM7Yj1XYyhhLmEsbnVsbCxhLmkpO0soMyk7Yz1hLmEuRi5iO251bGwhPWM/KGEuZj1jWzBdLGEuTT0xLFVjKGEpKTooZmMoYixcIk1PREVcIixcImluaXRcIiksIWEuYS5vJiZhLmEuaiYmZmMoYixcIlgtSFRUUC1TZXNzaW9uLUlkXCIsYS5hLmopLGEuYj1uZXcgTShhLHZvaWQgMCx2b2lkIDApLGEuYi5oPWEuaCxkYyhhLmIsYiwhMSxudWxsKSxhLk09MCk7fTtnLmNsb3NlPWZ1bmN0aW9uKCl7QmQodGhpcy5hKTt9O1xuZy5XYT1mdW5jdGlvbihhKXtpZihtKGEpKXt2YXIgYj17fTtiLl9fZGF0YV9fPWE7R2QodGhpcy5hLGIpO31lbHNlIHRoaXMuaD8oYj17fSxiLl9fZGF0YV9fPW9iKGEpLEdkKHRoaXMuYSxiKSk6R2QodGhpcy5hLGEpO307Zy5HPWZ1bmN0aW9uKCl7dGhpcy5hLmM9bnVsbDtkZWxldGUgdGhpcy5mO0JkKHRoaXMuYSk7ZGVsZXRlIHRoaXMuYTtZLk4uRy5jYWxsKHRoaXMpO307ZnVuY3Rpb24gUmQoYSl7VWIuY2FsbCh0aGlzKTt2YXIgYj1hLl9fc21fXztpZihiKXthOntmb3IodmFyIGMgaW4gYil7YT1jO2JyZWFrIGF9YT12b2lkIDA7fSh0aGlzLmM9YSk/KGE9dGhpcy5jLHRoaXMuZGF0YT1udWxsIT09YiYmYSBpbiBiP2JbYV06dm9pZCAwKTp0aGlzLmRhdGE9Yjt9ZWxzZSB0aGlzLmRhdGE9YTt9eChSZCxVYik7ZnVuY3Rpb24gU2QoKXtWYi5jYWxsKHRoaXMpO3RoaXMuc3RhdHVzPTE7fXgoU2QsVmIpO2Z1bmN0aW9uIFooYSl7dGhpcy5hPWE7fXgoWixPZCk7Wi5wcm90b3R5cGUudmE9ZnVuY3Rpb24oKXt0aGlzLmEuZGlzcGF0Y2hFdmVudChcImFcIik7fTtcbloucHJvdG90eXBlLnVhPWZ1bmN0aW9uKGEpe3RoaXMuYS5kaXNwYXRjaEV2ZW50KG5ldyBSZChhKSk7fTtaLnByb3RvdHlwZS50YT1mdW5jdGlvbihhKXt0aGlzLmEuZGlzcGF0Y2hFdmVudChuZXcgU2QoYSkpO307Wi5wcm90b3R5cGUuc2E9ZnVuY3Rpb24oKXt0aGlzLmEuZGlzcGF0Y2hFdmVudChcImJcIik7fTt2YXIgVGQ9dihmdW5jdGlvbihhLGIpe2Z1bmN0aW9uIGMoKXt9Yy5wcm90b3R5cGU9YS5wcm90b3R5cGU7dmFyIGQ9bmV3IGM7YS5hcHBseShkLEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKSk7cmV0dXJuIGR9LFFkKTsvKlxuXG4gQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cblxuIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4geW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuXG4gICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcblxuIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuKi9cblFkLnByb3RvdHlwZS5jcmVhdGVXZWJDaGFubmVsPVFkLnByb3RvdHlwZS5hO1kucHJvdG90eXBlLnNlbmQ9WS5wcm90b3R5cGUuV2E7WS5wcm90b3R5cGUub3Blbj1ZLnByb3RvdHlwZS5WYTtZLnByb3RvdHlwZS5jbG9zZT1ZLnByb3RvdHlwZS5jbG9zZTtQYi5OT19FUlJPUj0wO1BiLlRJTUVPVVQ9ODtQYi5IVFRQX0VSUk9SPTY7UWIuQ09NUExFVEU9XCJjb21wbGV0ZVwiO1RiLkV2ZW50VHlwZT1MO0wuT1BFTj1cImFcIjtMLkNMT1NFPVwiYlwiO0wuRVJST1I9XCJjXCI7TC5NRVNTQUdFPVwiZFwiO0cucHJvdG90eXBlLmxpc3Rlbj1HLnByb3RvdHlwZS56YTtYLnByb3RvdHlwZS5saXN0ZW5PbmNlPVgucHJvdG90eXBlLkFhO1gucHJvdG90eXBlLmdldExhc3RFcnJvcj1YLnByb3RvdHlwZS5YYTtYLnByb3RvdHlwZS5nZXRMYXN0RXJyb3JDb2RlPVgucHJvdG90eXBlLnlhO1gucHJvdG90eXBlLmdldFN0YXR1cz1YLnByb3RvdHlwZS5UO1gucHJvdG90eXBlLmdldFJlc3BvbnNlSnNvbj1YLnByb3RvdHlwZS5VYTtcblgucHJvdG90eXBlLmdldFJlc3BvbnNlVGV4dD1YLnByb3RvdHlwZS5hYTtYLnByb3RvdHlwZS5zZW5kPVgucHJvdG90eXBlLmNhO3ZhciB0bXA9e2NyZWF0ZVdlYkNoYW5uZWxUcmFuc3BvcnQ6VGQsRXJyb3JDb2RlOlBiLEV2ZW50VHlwZTpRYixXZWJDaGFubmVsOlRiLFhocklvOlh9O1xudmFyIHRtcF8xID0gdG1wLmNyZWF0ZVdlYkNoYW5uZWxUcmFuc3BvcnQ7XG52YXIgdG1wXzIgPSB0bXAuRXJyb3JDb2RlO1xudmFyIHRtcF8zID0gdG1wLkV2ZW50VHlwZTtcbnZhciB0bXBfNCA9IHRtcC5XZWJDaGFubmVsO1xudmFyIHRtcF81ID0gdG1wLlhocklvO1xuXG5leHBvcnQgZGVmYXVsdCB0bXA7XG5leHBvcnQgeyB0bXBfMiBhcyBFcnJvckNvZGUsIHRtcF8zIGFzIEV2ZW50VHlwZSwgdG1wXzQgYXMgV2ViQ2hhbm5lbCwgdG1wXzUgYXMgWGhySW8sIHRtcF8xIGFzIGNyZWF0ZVdlYkNoYW5uZWxUcmFuc3BvcnQgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmVzbS5qcy5tYXBcbiIsImV4cG9ydCBjbGFzcyBQb2ludDJkIHtcclxuICB4OiBudW1iZXI7XHJcbiAgeTogbnVtYmVyO1xyXG5cclxuICBjb25zdHJ1Y3Rvcih4OiBudW1iZXIsIHk6IG51bWJlcikge1xyXG4gICAgeCA9IHg7XHJcbiAgICB5ID0geTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBMaW5lIHtcclxuICAwOiBQb2ludDJkO1xyXG4gIDE6IFBvaW50MmQ7XHJcblxyXG4gIGNvbnN0cnVjdG9yKHBvaW50MTogUG9pbnQyZCwgcG9pbnQyOiBQb2ludDJkKSB7XHJcbiAgICB0aGlzWzBdID0gcG9pbnQxO1xyXG4gICAgdGhpc1sxXSA9IHBvaW50MjtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBlbnVtIE9ydGhvTGluZUxpbmVSZWxhdGlvbnNoaXBUeXBlIHtcclxuICBOb3RoaW5nLFxyXG4gIEludGVyc2VjdCxcclxuICBPdmVybGFwXHJcbn1cclxuXHJcbmV4cG9ydCBlbnVtIFJlY3RSZWN0UmVsYXRpb25zaGlwVHlwZSB7XHJcbiAgRGlzam9pbnQsXHJcbiAgTWF0Y2gsXHJcbiAgSW50ZXJzZWN0LFxyXG4gIEFJbnNpZGVCLFxyXG4gIEJJbnNpZGVBLFxyXG4gIFRhbmdlbnQgXHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBPcnRob0xpbmVMaW5lUmVsYXRpb25zaGlwIHtcclxuICB0eXBlOiBPcnRob0xpbmVMaW5lUmVsYXRpb25zaGlwVHlwZTtcclxuICBpbnRlcnNlY3Rpb246IFBvaW50MmQ7XHJcbiAgb3ZlcmxhcDogTGluZTtcclxuXHJcbiAgLy8gKG9ydGhvTGluZUxpbmVSZWxhdGlvbnNoaXBUeXBlLCB7aW50ZXJzZWN0aW9uPXVuZGVmaW5lZCwgb3ZlcmxhcD11bmRlZmluZWR9ID0ge30pXHJcbiAgY29uc3RydWN0b3Iob3J0aG9MaW5lTGluZVJlbGF0aW9uc2hpcFR5cGU6IE9ydGhvTGluZUxpbmVSZWxhdGlvbnNoaXBUeXBlLCBpbnRlcnNlY3Rpb246IFBvaW50MmQgPSB1bmRlZmluZWQsIG92ZXJsYXA6IExpbmUgPSB1bmRlZmluZWQpIHtcclxuICAgIHRoaXMudHlwZSA9IG9ydGhvTGluZUxpbmVSZWxhdGlvbnNoaXBUeXBlO1xyXG4gICAgdGhpcy5pbnRlcnNlY3Rpb24gPSBpbnRlcnNlY3Rpb247XHJcbiAgICB0aGlzLm92ZXJsYXAgPSBvdmVybGFwO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFJlY3RhbmdsZSB7XHJcbiAgeDogbnVtYmVyO1xyXG4gIHk6IG51bWJlcjtcclxuICB3aWR0aDogbnVtYmVyO1xyXG4gIGhlaWdodDogbnVtYmVyO1xyXG5cclxuICBjb25zdHJ1Y3Rvcih4OiBudW1iZXIsIHk6IG51bWJlciwgd2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIpIHtcclxuICAgIHggPSB4O1xyXG4gICAgeSA9IHk7XHJcbiAgICB3aWR0aCA9IHdpZHRoO1xyXG4gICAgaGVpZ2h0ID0gaGVpZ2h0O1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEdlb21ldHJ5Q2FsYyB7XHJcblxyXG4gIHN0YXRpYyBwdHNEaXN0YW5jZShwdDE6IFBvaW50MmQsIHB0MjogUG9pbnQyZCkge1xyXG4gICAgcmV0dXJuIE1hdGguc3FydChNYXRoLnBvdygocHQyLnggLSBwdDEueCksIDIpICsgKE1hdGgucG93KChwdDIueSAtIHB0MS55KSwgMikpKTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBsaW5lTWlkZGxlUHQobGluZTogTGluZSkge1xyXG4gICAgcmV0dXJuIHsgeDogKGxpbmVbMF0ueCArIGxpbmVbMV0ueCkgLyAyLCB5OiAobGluZVswXS55ICsgbGluZVsxXS55KSAvIDIgfTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBhcmVMaW5lc0VxdWFsKGxpbmUxOiBMaW5lLCBsaW5lMjogTGluZSkge1xyXG4gICAgcmV0dXJuICh0aGlzLmFyZVBvaW50c0VxdWFsKGxpbmUxWzBdLCBsaW5lMlswXSkgJiYgdGhpcy5hcmVQb2ludHNFcXVhbChsaW5lMVsxXSwgbGluZTJbMV0pKSB8fCAodGhpcy5hcmVQb2ludHNFcXVhbChsaW5lMVswXSwgbGluZTJbMV0pICYmIHRoaXMuYXJlUG9pbnRzRXF1YWwobGluZTFbMV0sIGxpbmUyWzBdKSk7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgYXJlUG9pbnRzRXF1YWwocG9pbnQxOiBQb2ludDJkLCBwb2ludDI6IFBvaW50MmQpIHtcclxuICAgIHJldHVybiBwb2ludDEueCA9PT0gcG9pbnQyLnggJiYgcG9pbnQxLnkgPT09IHBvaW50Mi55O1xyXG4gIH1cclxuXHJcbn1cclxuIiwiaW1wb3J0IHsgT3J0aG9MaW5lTGluZVJlbGF0aW9uc2hpcCwgT3J0aG9MaW5lTGluZVJlbGF0aW9uc2hpcFR5cGUsIFJlY3RSZWN0UmVsYXRpb25zaGlwVHlwZSwgR2VvbWV0cnlDYWxjLCBSZWN0YW5nbGUsIExpbmUsIFBvaW50MmQgfSBmcm9tICcuL2dlb21ldHJ5JztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIHtcclxuXHJcbiAgLyoqXHJcbiAgKiBSZWFkIHRoZSBjb250ZW50IG9mIGEgZmlsZS5cclxuICAqL1xyXG4gIHN0YXRpYyByZWFkSW5wdXRGaWxlKGZpbGU6IEJsb2IpIHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzLCByZWopID0+IHtcclxuICAgICAgY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcclxuICAgICAgcmVhZGVyLnJlYWRBc1RleHQoZmlsZSwgXCJVVEYtOFwiKTtcclxuICAgICAgcmVhZGVyLm9ubG9hZCA9ICgpID0+IHtcclxuICAgICAgICByZXMocmVhZGVyLnJlc3VsdCk7XHJcbiAgICAgIH1cclxuICAgICAgcmVhZGVyLm9uZXJyb3IgPSAoKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJFcnJvciByZWFkaW5nIHRoZSBmaWxlLlwiKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAqIEdldCB0aGUgVVJMIHBhcmFtZXRlcnMuXHJcbiAgKiBTb3VyY2U6IGh0dHBzOi8vY3NzLXRyaWNrcy5jb20vc25pcHBldHMvamF2YXNjcmlwdC9nZXQtdXJsLXZhcmlhYmxlcy9cclxuICAqIEByZXR1cm4ge09iamVjdH0gICAgIFRoZSBVUkwgcGFyYW1ldGVyc1xyXG4gICovXHJcbiAgc3RhdGljIGdldFVybFBhcmFtcyh1cmw6IHN0cmluZykge1xyXG4gICAgY29uc3QgcGFyYW1zOiBhbnkgPSB7fTtcclxuICAgIGNvbnN0IHBhcnNlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcclxuICAgIHBhcnNlci5ocmVmID0gdXJsO1xyXG4gICAgY29uc3QgdmFycyA9IHBhcnNlci5zZWFyY2guc3Vic3RyaW5nKDEpLnNwbGl0KCcmJyk7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHZhcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgY29uc3QgcGFpciA9IHZhcnNbaV0uc3BsaXQoJz0nKTtcclxuICAgICAgcGFyYW1zW3BhaXJbMF1dID0gZGVjb2RlVVJJQ29tcG9uZW50KHBhaXJbMV0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHBhcmFtcztcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFJlbW92ZXMgYWxsIHRoZSBjaGlsZHMgb2YgdGhlIEhUTUwgZWxlbWVudC5cclxuICAgKi9cclxuICBzdGF0aWMgZW1wdHlOb2RlKG5vZGU6IEhUTUxFbGVtZW50KSB7XHJcbiAgICB3aGlsZSAobm9kZS5maXJzdENoaWxkICYmIG5vZGUucmVtb3ZlQ2hpbGQobm9kZS5maXJzdENoaWxkKSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBDcmVhdGVzIGEgZmlsbGV0IGJvdW5kaW5nIGJveCBhcm91bmQgdGhlIHByb3ZpZGVkIGVsZW1lbnQuXHJcbiAgICogQHBhcmFtIG9mZnNldCBkZWZhdWx0IDUuXHJcbiAgICogQHBhcmFtIGZpbGxldCBkZWZhdWx0IDUuXHJcbiAgICovXHJcbiAgc3RhdGljIGNyZWF0ZUJCb3goZWxlbWVudDogU1ZHR3JhcGhpY3NFbGVtZW50LCBvZmZzZXQgPSA1LCBmaWxsZXQgPSA1KSB7XHJcbiAgICBjb25zdCByZWN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsICdyZWN0Jyk7XHJcbiAgICByZWN0LnNldEF0dHJpYnV0ZSgneCcsIChlbGVtZW50LmdldEJCb3goKS54IC0gb2Zmc2V0KS50b1N0cmluZygpKTtcclxuICAgIHJlY3Quc2V0QXR0cmlidXRlKCd5JywgKGVsZW1lbnQuZ2V0QkJveCgpLnkgLSBvZmZzZXQpLnRvU3RyaW5nKCkpO1xyXG4gICAgcmVjdC5zZXRBdHRyaWJ1dGUoJ3dpZHRoJywgKGVsZW1lbnQuZ2V0QkJveCgpLndpZHRoICsgb2Zmc2V0ICogMikudG9TdHJpbmcoKSk7XHJcbiAgICByZWN0LnNldEF0dHJpYnV0ZSgnaGVpZ2h0JywgKGVsZW1lbnQuZ2V0QkJveCgpLmhlaWdodCArIG9mZnNldCAqIDIpLnRvU3RyaW5nKCkpO1xyXG4gICAgcmVjdC5zZXRBdHRyaWJ1dGUoJ3J4JywgZmlsbGV0LnRvU3RyaW5nKCkpO1xyXG4gICAgcmVjdC5zZXRBdHRyaWJ1dGUoJ3J5JywgZmlsbGV0LnRvU3RyaW5nKCkpO1xyXG4gICAgcmV0dXJuIHJlY3Q7XHJcbiAgfVxyXG5cclxuICAvLyBSZW5hbWUgdGhlIGFib3ZlIGFzIGNyZWF0ZVNWR0JCb3hcclxuICAvLyBUaGlzIG9uZSByZXR1cm5zIGEgcmVjdCBvYmplY3Qge3gseSx3aWR0aCxoZWlnaHR9XHJcbiAgLy8gc2FtZSBhcyBkZWZhdWx0IGJib3ggYnV0IHdpdGggb3B0aW9uYWwgb2Zmc2V0XHJcbiAgc3RhdGljIGNyZWF0ZUJCb3gyKGVsZW1lbnQ6IFNWR0dyYXBoaWNzRWxlbWVudCwgb2Zmc2V0ID0gMCkgeyAvLyBUT0RPIGlzIGRlcHJlY2F0ZWQ/XHJcbiAgICBpZiAob2Zmc2V0ICE9PSAwKSB7XHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgeDogZWxlbWVudC5nZXRCQm94KCkueCAtIG9mZnNldCxcclxuICAgICAgICB5OiBlbGVtZW50LmdldEJCb3goKS55IC0gb2Zmc2V0LFxyXG4gICAgICAgIHdpZHRoOiBlbGVtZW50LmdldEJCb3goKS53aWR0aCArIG9mZnNldCAqIDIsXHJcbiAgICAgICAgaGVpZ2h0OiBlbGVtZW50LmdldEJCb3goKS5oZWlnaHQgKyBvZmZzZXQgKiAyXHJcbiAgICAgIH07XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gZWxlbWVudC5nZXRCQm94KCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBnZXQgdGhlIGNvb3JkaW5hdGVzIG9mIHRoZSBtb3VzZSBvbiB0aGUgU1ZHIGNhbnZhcy5cclxuICAgKi9cclxuICBzdGF0aWMgZ2V0UmVsYXRpdmVDb29yZHMoZTogTW91c2VFdmVudCwgc3ZnRG9jOiBTVkdTVkdFbGVtZW50KTogRE9NUG9pbnQge1xyXG4gICAgY29uc3Qgb3JpZ2luUHQgPSBzdmdEb2MuY3JlYXRlU1ZHUG9pbnQoKTtcclxuICAgIG9yaWdpblB0LnggPSBlLmNsaWVudFg7XHJcbiAgICBvcmlnaW5QdC55ID0gZS5jbGllbnRZO1xyXG4gICAgLy8gVGhlIGN1cnNvciBwb2ludCwgdHJhbnNsYXRlZCBpbnRvIHN2ZyBjb29yZGluYXRlc1xyXG4gICAgcmV0dXJuIG9yaWdpblB0Lm1hdHJpeFRyYW5zZm9ybShzdmdEb2MuZ2V0U2NyZWVuQ1RNKCkuaW52ZXJzZSgpKTtcclxuICB9XHJcblxyXG4gIC8vIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzEwNTAzNC9jcmVhdGUtZ3VpZC11dWlkLWluLWphdmFzY3JpcHRcclxuICBzdGF0aWMgdXVpZHY0KCkge1xyXG4gICAgcmV0dXJuICgoMWU3KS50b1N0cmluZygpICsgLTFlMyArIC00ZTMgKyAtOGUzICsgLTFlMTEpLnJlcGxhY2UoL1swMThdL2csIGMgPT5cclxuICAgICAgKE51bWJlcihjKSBeIGNyeXB0by5nZXRSYW5kb21WYWx1ZXMobmV3IFVpbnQ4QXJyYXkoMSkpWzBdICYgMTUgPj4gTnVtYmVyKGMpIC8gNCkudG9TdHJpbmcoMTYpXHJcbiAgICApO1xyXG4gIH1cclxuXHJcblxyXG4gIHN0YXRpYyBnZXRSZWN0U2VnbWVudHMocmVjdDogUmVjdGFuZ2xlKTogTGluZVtdIHtcclxuICAgIGNvbnN0IGNvcm5lckEgPSB7IHg6IHJlY3QueCwgeTogcmVjdC55IH07XHJcbiAgICBjb25zdCBjb3JuZXJCID0geyB4OiByZWN0LnggKyByZWN0LndpZHRoLCB5OiByZWN0LnkgfTtcclxuICAgIGNvbnN0IGNvcm5lckMgPSB7IHg6IHJlY3QueCArIHJlY3Qud2lkdGgsIHk6IHJlY3QueSArIHJlY3QuaGVpZ2h0IH07XHJcbiAgICBjb25zdCBjb3JuZXJEID0geyB4OiByZWN0LngsIHk6IHJlY3QueSArIHJlY3QuaGVpZ2h0IH07XHJcbiAgICByZXR1cm4gW1xyXG4gICAgICBbY29ybmVyQSwgY29ybmVyQl0sXHJcbiAgICAgIFtjb3JuZXJCLCBjb3JuZXJDXSxcclxuICAgICAgW2Nvcm5lckMsIGNvcm5lckRdLFxyXG4gICAgICBbY29ybmVyRCwgY29ybmVyQV1cclxuICAgIF07XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBcclxuICAgKiBAcGFyYW0gaW5jbHVzaXZlIEluY2x1ZGUgcG9pbnRzIG9uIHRoZSBlZGdlcy4gRGVmYXVsdCB0cnVlLlxyXG4gICAqL1xyXG4gIHN0YXRpYyBpc1B0SW5SZWN0KHJlY3Q6IFJlY3RhbmdsZSwgcHQ6IFBvaW50MmQsIGluY2x1c2l2ZSA9IHRydWUpIHtcclxuICAgIGlmIChpbmNsdXNpdmUpIHtcclxuICAgICAgcmV0dXJuIChwdC54ID49IHJlY3QueCAmJiBwdC54IDw9IChyZWN0LnggKyByZWN0LndpZHRoKSkgJiYgKHB0LnkgPj0gcmVjdC55ICYmIHB0LnkgPD0gKHJlY3QueSArIHJlY3QuaGVpZ2h0KSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gKHB0LnggPiByZWN0LnggJiYgcHQueCA8IChyZWN0LnggKyByZWN0LndpZHRoKSkgJiYgKHB0LnkgPiByZWN0LnkgJiYgcHQueSA8IChyZWN0LnkgKyByZWN0LmhlaWdodCkpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ2hlY2tzIGlmIGEgbGluZSBpcyBjb21wbGV0ZWx5IGluc2lkZSBhIHJlY3RhbmdsZS5cclxuICAgKiBFdmVuIGlmIHRoZSBsaW5lIGlzIGNvbXBsZXRlbHkgaW5zaWRlIGJ1dCB0b3VjaGluZyBhIHNlZ21lbnQgb2YgdGhlIHJlY3RhbmdsZSBpdCdzIGNvbnNpZGVyZWQgaW5zaWRlLFxyXG4gICAqIHRoaXMgaW5jbHVkZXMgYSBsaW5lIHRoYXQgaXMgY29tcGxldGVseSBvdmVybGFwcGVkIHdpdGggYSBzZWdtZW50IG9mIHRoZSByZWN0YW5nbGUuXHJcbiAgICogQHBhcmFtIHtMaW5lfSBsaW5lIFRoZSBsaW5lIHRvIHRlc3QuXHJcbiAgICogQHBhcmFtIHtSZWN0YW5nbGV9IHJlY3QgVGhlIHJlY3RhbmdsZSB0byB0ZXN0IGFnYWluc3QuXHJcbiAgICogQHJldHVybnMge2Jvb2xlYW59IEJvb2wgaW5kaWNhdGluZyBpZiBpdCBpcyBjb21wbGV0ZWx5IGluc2lkZSBvciBub3QuXHJcbiAgICovXHJcbiAgc3RhdGljIGlzTGluZUluUmVjdChsaW5lOiBMaW5lLCByZWN0OiBSZWN0YW5nbGUpIHtcclxuICAgIHJldHVybiAodGhpcy5pc1B0SW5SZWN0KHJlY3QsIGxpbmVbMF0gYXMgUG9pbnQyZCkgJiYgdGhpcy5pc1B0SW5SZWN0KHJlY3QsIGxpbmVbMV0pKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIENoZWNrIGlmIGEgbnVtZXJpY2FsIHZhbHVlIGlzIGJldHdlZW4gdHdvIGxpbWl0cy5cclxuICAgKiBAcGFyYW0gdmFsdWUgVmFsdWUgdG8gY29tcGFyZS5cclxuICAgKiBAcGFyYW0gbGltaXQxIEZpcnN0IGxpbWl0LlxyXG4gICAqIEBwYXJhbSBsaW1pdDIgU2Vjb25kIGxpbWl0LCBvcG9zaXRlIHRvIHRoZSBmaXJzdCBvbmUuXHJcbiAgICogQHBhcmFtIGluY2x1c2l2ZSBXZWF0aGVyIHRvIGluY2x1ZGUgdGhlIGxpbWl0cyBpbiB0aGUgY29tcGFyaXNvbiBvciBub3QuIERlZmF1bHQgdHJ1ZS5cclxuICAgKi9cclxuICBzdGF0aWMgaXNOdW1CZXR3ZWVuKHZhbHVlOiBudW1iZXIsIGxpbWl0MTogbnVtYmVyLCBsaW1pdDI6IG51bWJlciwgaW5jbHVzaXZlID0gdHJ1ZSk6IGJvb2xlYW4ge1xyXG4gICAgaWYgKGluY2x1c2l2ZSkge1xyXG4gICAgICByZXR1cm4gdmFsdWUgPj0gTWF0aC5taW4obGltaXQxLCBsaW1pdDIpICYmIHZhbHVlIDw9IE1hdGgubWF4KGxpbWl0MSwgbGltaXQyKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiB2YWx1ZSA+IE1hdGgubWluKGxpbWl0MSwgbGltaXQyKSAmJiB2YWx1ZSA8IE1hdGgubWF4KGxpbWl0MSwgbGltaXQyKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHN0YXRpYyBpc0xpbmVIb3Jpem9udGFsKGxpbmU6IExpbmUpIHtcclxuICAgIHJldHVybiBsaW5lWzBdLnkgPT09IGxpbmVbMV0ueTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBpc0xpbmVWZXJ0aWNhbChsaW5lOiBMaW5lKSB7XHJcbiAgICByZXR1cm4gbGluZVswXS54ID09PSBsaW5lWzFdLng7XHJcbiAgfVxyXG5cclxuICAvLyBJZiByZWZQdCBpcyBwcm92aWRlZCB3aWxsIGJlIGNhbGN1bGF0ZWQgZnJvbSB0aGlzXHJcbiAgLy8gSWYgbm90IHByb3ZpZGVkIHdpbGwgYmUgY2FsY3VsYXRlZCBmcm9tIHRoZSBmaXJzdCBwb2ludFxyXG4gIHN0YXRpYyBzb3J0UHRzQnlEaXN0YW5jZShwdHM6IFBvaW50MmRbXSwgcmVmUHQ6IFBvaW50MmQgPSB1bmRlZmluZWQsIGluY2x1ZGVSZWZQdCA9IGZhbHNlKSB7XHJcbiAgICBjb25zdCByZWZlcmVuY2VQdCA9IHJlZlB0ICE9PSB1bmRlZmluZWQgPyByZWZQdCA6IHB0c1swXTtcclxuICAgIGNvbnN0IHNvcnRlZFB0cyA9IHB0cy5zb3J0KChhLCBiKSA9PiB7XHJcbiAgICAgIGlmIChHZW9tZXRyeUNhbGMucHRzRGlzdGFuY2UocmVmZXJlbmNlUHQsIGEpIDwgR2VvbWV0cnlDYWxjLnB0c0Rpc3RhbmNlKHJlZmVyZW5jZVB0LCBiKSlcclxuICAgICAgICByZXR1cm4gLTE7XHJcbiAgICAgIGVsc2UgaWYgKEdlb21ldHJ5Q2FsYy5wdHNEaXN0YW5jZShyZWZlcmVuY2VQdCwgYSkgPiBHZW9tZXRyeUNhbGMucHRzRGlzdGFuY2UocmVmZXJlbmNlUHQsIGIpKVxyXG4gICAgICAgIHJldHVybiAxO1xyXG4gICAgICBlbHNlXHJcbiAgICAgICAgcmV0dXJuIDA7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiAocmVmUHQgIT09IHVuZGVmaW5lZCAmJiBpbmNsdWRlUmVmUHQgPT09IHRydWUpID8gW3JlZlB0LCAuLi5zb3J0ZWRQdHNdIDogc29ydGVkUHRzO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogR2l2ZW4gYW4gYXJyYXkgb2YgcG9pbnRzIHJldHVybnMgYW4gYXJyYXkgb2YgbGluZXMgYmV0d2VlbiB0aGUgcG9pbnRzLlxyXG4gICAqL1xyXG4gIHN0YXRpYyBsaW5lc0JldHdlZW5QdHMocHRzOiBQb2ludDJkW10pOiBMaW5lW10ge1xyXG4gICAgaWYgKHB0cy5sZW5ndGggPiAxKSB7XHJcbiAgICAgIGNvbnN0IHNlZ21lbnRzOiBMaW5lW10gPSBbXTtcclxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwdHMubGVuZ3RoIC0gMTsgaSsrKSB7XHJcbiAgICAgICAgc2VnbWVudHMucHVzaChbcHRzW2ldLCBwdHNbaSArIDFdXSk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHNlZ21lbnRzO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuXHJcbiAgLy8gaWYgYSByZWN0YW5nbGUgaXMgdG90YWx5IG92ZXJsYXBwZWQgb3IgcGFydGlhbGx5IGFuZCBjb21wbGV0ZWx5IGluc2lkZSBpdCBpcyBub3QgY29uc2lkZXJlZCBpbnRlcnNlY3Rpb24gYnV0IEluc2lkZS4gZnVsbENvbnRhaW5tZW50SW50ZXJzZWN0aW9ucyBcclxuICAvLyBpbnRlcnNlY3Rpb24gaW5jbHVkZXMgb3ZlcmxhcGVkIHBhcnRpYWxseSBidXQgbm8gb25lIGluc2lkZSB0aGUgb3RoZXJcclxuICBzdGF0aWMgcmVjdFJlY3RSZWxhdGlvbnNoaXAocmVjdDE6IFJlY3RhbmdsZSwgcmVjdDI6IFJlY3RhbmdsZSkge1xyXG4gICAgaWYgKHJlY3QxLnggPT09IHJlY3QyLnggJiYgcmVjdDEueSA9PT0gcmVjdDIueSAmJiByZWN0MS53aWR0aCA9PT0gcmVjdDIud2lkdGggJiYgcmVjdDEuaGVpZ2h0ID09PSByZWN0Mi5oZWlnaHQpIHtcclxuICAgICAgcmV0dXJuIFJlY3RSZWN0UmVsYXRpb25zaGlwVHlwZS5NYXRjaDtcclxuICAgIH0gZWxzZSBpZiAodGhpcy5pc1B0SW5SZWN0KHJlY3QyLCB7IHg6IHJlY3QxLngsIHk6IHJlY3QxLnkgfSkgJiZcclxuICAgICAgdGhpcy5pc1B0SW5SZWN0KHJlY3QyLCB7IHg6IHJlY3QxLnggKyByZWN0MS53aWR0aCwgeTogcmVjdDEueSB9KSAmJlxyXG4gICAgICB0aGlzLmlzUHRJblJlY3QocmVjdDIsIHsgeDogcmVjdDEueCArIHJlY3QxLndpZHRoLCB5OiByZWN0MS55ICsgcmVjdDEuaGVpZ2h0IH0pICYmXHJcbiAgICAgIHRoaXMuaXNQdEluUmVjdChyZWN0MiwgeyB4OiByZWN0MS54LCB5OiByZWN0MS55ICsgcmVjdDEuaGVpZ2h0IH0pKSB7XHJcbiAgICAgIHJldHVybiBSZWN0UmVjdFJlbGF0aW9uc2hpcFR5cGUuQUluc2lkZUI7XHJcbiAgICB9IGVsc2UgaWYgKHRoaXMuaXNQdEluUmVjdChyZWN0MSwgeyB4OiByZWN0Mi54LCB5OiByZWN0Mi55IH0pICYmXHJcbiAgICAgIHRoaXMuaXNQdEluUmVjdChyZWN0MSwgeyB4OiByZWN0Mi54ICsgcmVjdDIud2lkdGgsIHk6IHJlY3QyLnkgfSkgJiZcclxuICAgICAgdGhpcy5pc1B0SW5SZWN0KHJlY3QxLCB7IHg6IHJlY3QyLnggKyByZWN0Mi53aWR0aCwgeTogcmVjdDIueSArIHJlY3QyLmhlaWdodCB9KSAmJlxyXG4gICAgICB0aGlzLmlzUHRJblJlY3QocmVjdDEsIHsgeDogcmVjdDIueCwgeTogcmVjdDIueSArIHJlY3QyLmhlaWdodCB9KSkge1xyXG4gICAgICByZXR1cm4gUmVjdFJlY3RSZWxhdGlvbnNoaXBUeXBlLkJJbnNpZGVBO1xyXG4gICAgfSBlbHNlIGlmICh0aGlzLmlzUHRJblJlY3QocmVjdDIsIHsgeDogcmVjdDEueCwgeTogcmVjdDEueSB9LCBmYWxzZSkgfHxcclxuICAgICAgdGhpcy5pc1B0SW5SZWN0KHJlY3QyLCB7IHg6IHJlY3QxLnggKyByZWN0MS53aWR0aCwgeTogcmVjdDEueSB9LCBmYWxzZSkgfHxcclxuICAgICAgdGhpcy5pc1B0SW5SZWN0KHJlY3QyLCB7IHg6IHJlY3QxLnggKyByZWN0MS53aWR0aCwgeTogcmVjdDEueSArIHJlY3QxLmhlaWdodCB9LCBmYWxzZSkgfHxcclxuICAgICAgdGhpcy5pc1B0SW5SZWN0KHJlY3QyLCB7IHg6IHJlY3QxLngsIHk6IHJlY3QxLnkgKyByZWN0MS5oZWlnaHQgfSwgZmFsc2UpIHx8XHJcbiAgICAgIHRoaXMuaXNQdEluUmVjdChyZWN0MSwgeyB4OiByZWN0Mi54LCB5OiByZWN0Mi55IH0sIGZhbHNlKSB8fFxyXG4gICAgICB0aGlzLmlzUHRJblJlY3QocmVjdDEsIHsgeDogcmVjdDIueCArIHJlY3QyLndpZHRoLCB5OiByZWN0Mi55IH0sIGZhbHNlKSB8fFxyXG4gICAgICB0aGlzLmlzUHRJblJlY3QocmVjdDEsIHsgeDogcmVjdDIueCArIHJlY3QyLndpZHRoLCB5OiByZWN0Mi55ICsgcmVjdDIuaGVpZ2h0IH0sIGZhbHNlKSB8fFxyXG4gICAgICB0aGlzLmlzUHRJblJlY3QocmVjdDEsIHsgeDogcmVjdDIueCwgeTogcmVjdDIueSArIHJlY3QyLmhlaWdodCB9LCBmYWxzZSkgfHxcclxuICAgICAgKHRoaXMuaXNOdW1CZXR3ZWVuKHJlY3QxLnksIHJlY3QyLnksIHJlY3QyLnkgKyByZWN0Mi5oZWlnaHQsIGZhbHNlKSAmJiByZWN0MS54IDw9IHJlY3QyLnggJiYgKHJlY3QxLnggKyByZWN0MS53aWR0aCkgPj0gKHJlY3QyLnggKyByZWN0Mi53aWR0aCkpIHx8IC8vIGlzTnVtQmV0d2VlbihyZWN0Mi54LCByZWN0MS54LCByZWN0MS54ICsgcmVjdDEud2lkdGgpICYmIGlzTnVtQmV0d2VlbigpKSB8fFxyXG4gICAgICAodGhpcy5pc051bUJldHdlZW4ocmVjdDIueSwgcmVjdDEueSwgcmVjdDEueSArIHJlY3QxLmhlaWdodCwgZmFsc2UpICYmIHJlY3QyLnggPD0gcmVjdDEueCAmJiAocmVjdDIueCArIHJlY3QyLndpZHRoKSA+PSAocmVjdDEueCArIHJlY3QxLndpZHRoKSkpIHsgLy8gaXNOdW1CZXR3ZWVuKHJlY3QxLngsIHJlY3QyLngsIHJlY3QyLnggKyByZWN0Mi53aWR0aCkpKSB7XHJcbiAgICAgIHJldHVybiBSZWN0UmVjdFJlbGF0aW9uc2hpcFR5cGUuSW50ZXJzZWN0O1xyXG4gICAgfSBlbHNlIGlmICh0aGlzLmlzUHRJblJlY3QocmVjdDIsIHsgeDogcmVjdDEueCwgeTogcmVjdDEueSB9KSB8fFxyXG4gICAgICB0aGlzLmlzUHRJblJlY3QocmVjdDIsIHsgeDogcmVjdDEueCArIHJlY3QxLndpZHRoLCB5OiByZWN0MS55IH0pIHx8XHJcbiAgICAgIHRoaXMuaXNQdEluUmVjdChyZWN0MiwgeyB4OiByZWN0MS54ICsgcmVjdDEud2lkdGgsIHk6IHJlY3QxLnkgKyByZWN0MS5oZWlnaHQgfSkgfHxcclxuICAgICAgdGhpcy5pc1B0SW5SZWN0KHJlY3QyLCB7IHg6IHJlY3QxLngsIHk6IHJlY3QxLnkgKyByZWN0MS5oZWlnaHQgfSkgfHxcclxuICAgICAgdGhpcy5pc1B0SW5SZWN0KHJlY3QxLCB7IHg6IHJlY3QyLngsIHk6IHJlY3QyLnkgfSkgfHxcclxuICAgICAgdGhpcy5pc1B0SW5SZWN0KHJlY3QxLCB7IHg6IHJlY3QyLnggKyByZWN0Mi53aWR0aCwgeTogcmVjdDIueSB9KSB8fFxyXG4gICAgICB0aGlzLmlzUHRJblJlY3QocmVjdDEsIHsgeDogcmVjdDIueCArIHJlY3QyLndpZHRoLCB5OiByZWN0Mi55ICsgcmVjdDIuaGVpZ2h0IH0pIHx8XHJcbiAgICAgIHRoaXMuaXNQdEluUmVjdChyZWN0MSwgeyB4OiByZWN0Mi54LCB5OiByZWN0Mi55ICsgcmVjdDIuaGVpZ2h0IH0pKSB7XHJcbiAgICAgIHJldHVybiBSZWN0UmVjdFJlbGF0aW9uc2hpcFR5cGUuVGFuZ2VudDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBSZWN0UmVjdFJlbGF0aW9uc2hpcFR5cGUuRGlzam9pbnQ7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBSZWxhdGlvbnNoaXAgYmV0d2VlbiB0d28gb3J0aG9nb25hbCBsaW5lcy5cclxuICAgKi9cclxuICBzdGF0aWMgZ2V0T3J0aG9MaW5lTGluZVJlbGF0aW9uc2hpcChsaW5lMTogTGluZSwgbGluZTI6IExpbmUpIHtcclxuICAgIGlmICh0aGlzLmlzTGluZUhvcml6b250YWwobGluZTEpICYmIHRoaXMuaXNMaW5lVmVydGljYWwobGluZTIpKSB7XHJcbiAgICAgIGlmICh0aGlzLmlzTnVtQmV0d2VlbihsaW5lMVswXS55LCBsaW5lMlswXS55LCBsaW5lMlsxXS55KSAmJiB0aGlzLmlzTnVtQmV0d2VlbihsaW5lMlswXS54LCBsaW5lMVswXS54LCBsaW5lMVsxXS54KSkge1xyXG4gICAgICAgIHJldHVybiBuZXcgT3J0aG9MaW5lTGluZVJlbGF0aW9uc2hpcChPcnRob0xpbmVMaW5lUmVsYXRpb25zaGlwVHlwZS5JbnRlcnNlY3QsIHsgeDogbGluZTJbMF0ueCwgeTogbGluZTFbMF0ueSB9KTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gbmV3IE9ydGhvTGluZUxpbmVSZWxhdGlvbnNoaXAoT3J0aG9MaW5lTGluZVJlbGF0aW9uc2hpcFR5cGUuTm90aGluZyk7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSBpZiAodGhpcy5pc0xpbmVIb3Jpem9udGFsKGxpbmUyKSAmJiB0aGlzLmlzTGluZVZlcnRpY2FsKGxpbmUxKSkge1xyXG4gICAgICBpZiAodGhpcy5pc051bUJldHdlZW4obGluZTJbMF0ueSwgbGluZTFbMF0ueSwgbGluZTFbMV0ueSkgJiYgdGhpcy5pc051bUJldHdlZW4obGluZTFbMF0ueCwgbGluZTJbMF0ueCwgbGluZTJbMV0ueCkpIHtcclxuICAgICAgICByZXR1cm4gbmV3IE9ydGhvTGluZUxpbmVSZWxhdGlvbnNoaXAoT3J0aG9MaW5lTGluZVJlbGF0aW9uc2hpcFR5cGUuSW50ZXJzZWN0LCB7IHg6IGxpbmUxWzBdLngsIHk6IGxpbmUyWzBdLnkgfSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBPcnRob0xpbmVMaW5lUmVsYXRpb25zaGlwKE9ydGhvTGluZUxpbmVSZWxhdGlvbnNoaXBUeXBlLk5vdGhpbmcpO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2UgaWYgKHRoaXMuaXNMaW5lSG9yaXpvbnRhbChsaW5lMSkgJiYgdGhpcy5pc0xpbmVIb3Jpem9udGFsKGxpbmUyKSkge1xyXG4gICAgICBpZiAobGluZTFbMF0ueSA9PT0gbGluZTJbMF0ueSkge1xyXG4gICAgICAgIGNvbnN0IHN0YXJ0UG9pbnRYID0gTWF0aC5taW4oTWF0aC5tYXgobGluZTFbMF0ueCwgbGluZTFbMV0ueCksIE1hdGgubWF4KGxpbmUyWzBdLngsIGxpbmUyWzFdLngpKTtcclxuICAgICAgICBjb25zdCBlbmRQb2ludFggPSBNYXRoLm1heChNYXRoLm1pbihsaW5lMVswXS54LCBsaW5lMVsxXS54KSwgTWF0aC5taW4obGluZTJbMF0ueCwgbGluZTJbMV0ueCkpO1xyXG4gICAgICAgIGlmIChzdGFydFBvaW50WCA+PSBlbmRQb2ludFgpIHtcclxuICAgICAgICAgIHJldHVybiBuZXcgT3J0aG9MaW5lTGluZVJlbGF0aW9uc2hpcChPcnRob0xpbmVMaW5lUmVsYXRpb25zaGlwVHlwZS5PdmVybGFwLCB1bmRlZmluZWQsIFt7IHg6IHN0YXJ0UG9pbnRYLCB5OiBsaW5lMVswXS55IH0sIHsgeDogZW5kUG9pbnRYLCB5OiBsaW5lMVswXS55IH1dKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgcmV0dXJuIG5ldyBPcnRob0xpbmVMaW5lUmVsYXRpb25zaGlwKE9ydGhvTGluZUxpbmVSZWxhdGlvbnNoaXBUeXBlLk5vdGhpbmcpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gbmV3IE9ydGhvTGluZUxpbmVSZWxhdGlvbnNoaXAoT3J0aG9MaW5lTGluZVJlbGF0aW9uc2hpcFR5cGUuTm90aGluZyk7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSBpZiAodGhpcy5pc0xpbmVWZXJ0aWNhbChsaW5lMSkgJiYgdGhpcy5pc0xpbmVWZXJ0aWNhbChsaW5lMikpIHtcclxuICAgICAgaWYgKGxpbmUxWzBdLnggPT09IGxpbmUyWzBdLngpIHtcclxuICAgICAgICBjb25zdCBzdGFydFBvaW50WSA9IE1hdGgubWluKE1hdGgubWF4KGxpbmUxWzBdLnksIGxpbmUxWzFdLnkpLCBNYXRoLm1heChsaW5lMlswXS55LCBsaW5lMlsxXS55KSk7XHJcbiAgICAgICAgY29uc3QgZW5kUG9pbnRZID0gTWF0aC5tYXgoTWF0aC5taW4obGluZTFbMF0ueSwgbGluZTFbMV0ueSksIE1hdGgubWluKGxpbmUyWzBdLnksIGxpbmUyWzFdLnkpKTtcclxuICAgICAgICBpZiAoc3RhcnRQb2ludFkgPj0gZW5kUG9pbnRZKSB7XHJcbiAgICAgICAgICByZXR1cm4gbmV3IE9ydGhvTGluZUxpbmVSZWxhdGlvbnNoaXAoT3J0aG9MaW5lTGluZVJlbGF0aW9uc2hpcFR5cGUuT3ZlcmxhcCwgdW5kZWZpbmVkLCBbeyB4OiBsaW5lMVswXS54LCB5OiBzdGFydFBvaW50WSB9LCB7IHg6IGxpbmUxWzBdLngsIHk6IGVuZFBvaW50WSB9XSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHJldHVybiBuZXcgT3J0aG9MaW5lTGluZVJlbGF0aW9uc2hpcChPcnRob0xpbmVMaW5lUmVsYXRpb25zaGlwVHlwZS5Ob3RoaW5nKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBPcnRob0xpbmVMaW5lUmVsYXRpb25zaGlwKE9ydGhvTGluZUxpbmVSZWxhdGlvbnNoaXBUeXBlLk5vdGhpbmcpO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gbmV3IE9ydGhvTGluZUxpbmVSZWxhdGlvbnNoaXAoT3J0aG9MaW5lTGluZVJlbGF0aW9uc2hpcFR5cGUuTm90aGluZyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuXHJcbiAgc3RhdGljIHJlY3RhbmdsZXNTaWxob3VldHRlKHJlY3RzOiBSZWN0YW5nbGVbXSk6IExpbmVbXSB7XHJcbiAgICBjb25zdCByZWN0c1NlZ21lbnRzID0gW107XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlY3RzLmxlbmd0aDsgaSsrKVxyXG4gICAgICByZWN0c1NlZ21lbnRzLnB1c2godGhpcy5nZXRSZWN0U2VnbWVudHMocmVjdHNbaV0pKTtcclxuICAgIGNvbnN0IGZpbmFsU2VnbWVudHMgPSBbXTtcclxuICAgIGNvbnN0IG92ZXJsYXBwZWRTZWdtZW50czogTGluZVtdID0gW107XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlY3RzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIGxldCBjdXJyZW50UmVjdFNlZ21lbnRzID0gdGhpcy5nZXRSZWN0U2VnbWVudHMocmVjdHNbaV0pO1xyXG4gICAgICBmb3IgKGxldCBiID0gMDsgYiA8IHJlY3RzLmxlbmd0aDsgYisrKSB7XHJcbiAgICAgICAgLy8gU2tpcCBjaGVja2luZyB3aXRoIHRoZSByZWN0YW5nbGUgaXRzZWxmLlxyXG4gICAgICAgIGlmIChiICE9IGkpIHtcclxuICAgICAgICAgIGNvbnN0IG5ld0N1cnJlbnRSZWN0U2VnbWVudHMgPSBbXTtcclxuICAgICAgICAgIGNvbnN0IHJlY3RzUmVsYXRpb24gPSB0aGlzLnJlY3RSZWN0UmVsYXRpb25zaGlwKHJlY3RzW2JdLCByZWN0c1tpXSk7XHJcbiAgICAgICAgICAvLyBJZiB0aGUgJ2knIHJlY3RhbmdsZSBpcyBpbnNpZGUgb2YgdGhlICdiJyBvciBpZiB0aGUgJ2knIGlzIGVxdWFsIHRvIGEgcHJldmlvdXMgJ2InIHRoZW4gc2tpcCBpdHMgc2VnbWVudHMuXHJcbiAgICAgICAgICBpZiAocmVjdHNSZWxhdGlvbiA9PT0gUmVjdFJlY3RSZWxhdGlvbnNoaXBUeXBlLkJJbnNpZGVBIHx8IChpID4gYiAmJiByZWN0c1JlbGF0aW9uID09PSBSZWN0UmVjdFJlbGF0aW9uc2hpcFR5cGUuTWF0Y2gpKSB7XHJcbiAgICAgICAgICAgIGN1cnJlbnRSZWN0U2VnbWVudHMubGVuZ3RoID0gMDtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICB9IGVsc2UgaWYgKHJlY3RzUmVsYXRpb24gPT09IFJlY3RSZWN0UmVsYXRpb25zaGlwVHlwZS5JbnRlcnNlY3QgfHwgcmVjdHNSZWxhdGlvbiA9PT0gUmVjdFJlY3RSZWxhdGlvbnNoaXBUeXBlLlRhbmdlbnQpIHtcclxuICAgICAgICAgICAgY29uc3QgdGVtcE92ZXJsYXBwZWRTZWdtZW50czogTGluZVtdID0gW107XHJcbiAgICAgICAgICAgIGZvciAobGV0IGsgPSAwOyBrIDwgY3VycmVudFJlY3RTZWdtZW50cy5sZW5ndGg7IGsrKykge1xyXG4gICAgICAgICAgICAgIGNvbnN0IHNlZ21lbnRJbnRlcnNlY3Rpb25zID0gW107XHJcbiAgICAgICAgICAgICAgY29uc3QgbGluZTEgPSBjdXJyZW50UmVjdFNlZ21lbnRzW2tdO1xyXG4gICAgICAgICAgICAgIGlmICghdGhpcy5pc0xpbmVJblJlY3QobGluZTEsIHJlY3RzW2JdKSkge1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgbiA9IDA7IG4gPCByZWN0c1NlZ21lbnRzW2JdLmxlbmd0aDsgbisrKSB7XHJcbiAgICAgICAgICAgICAgICAgIGNvbnN0IGxpbmUyID0gcmVjdHNTZWdtZW50c1tiXVtuXTtcclxuICAgICAgICAgICAgICAgICAgY29uc3QgbGluZXNSZWxhdGlvbnNoaXAgPSB0aGlzLmdldE9ydGhvTGluZUxpbmVSZWxhdGlvbnNoaXAobGluZTEsIGxpbmUyKTtcclxuICAgICAgICAgICAgICAgICAgaWYgKGxpbmVzUmVsYXRpb25zaGlwLnR5cGUgPT09IE9ydGhvTGluZUxpbmVSZWxhdGlvbnNoaXBUeXBlLkludGVyc2VjdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChsaW5lc1JlbGF0aW9uc2hpcC5pbnRlcnNlY3Rpb24pXHJcbiAgICAgICAgICAgICAgICAgICAgICBzZWdtZW50SW50ZXJzZWN0aW9ucy5wdXNoKGxpbmVzUmVsYXRpb25zaGlwLmludGVyc2VjdGlvbik7XHJcbiAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobGluZXNSZWxhdGlvbnNoaXAudHlwZSA9PT0gT3J0aG9MaW5lTGluZVJlbGF0aW9uc2hpcFR5cGUuT3ZlcmxhcCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChsaW5lc1JlbGF0aW9uc2hpcC5vdmVybGFwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgdGVtcE92ZXJsYXBwZWRTZWdtZW50cy5wdXNoKGxpbmVzUmVsYXRpb25zaGlwLm92ZXJsYXApO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoc2VnbWVudEludGVyc2VjdGlvbnMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICBjb25zdCBzb3J0ZWRJbnRlcnNlY3Rpb25zID0gdGhpcy5zb3J0UHRzQnlEaXN0YW5jZShzZWdtZW50SW50ZXJzZWN0aW9ucywgY3VycmVudFJlY3RTZWdtZW50c1trXVswXSwgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgIGNvbnN0IHNwbGl0ZWRTZWdtZW50cyA9IHRoaXMubGluZXNCZXR3ZWVuUHRzKFsuLi5zb3J0ZWRJbnRlcnNlY3Rpb25zLCBjdXJyZW50UmVjdFNlZ21lbnRzW2tdWzFdXSk7XHJcbiAgICAgICAgICAgICAgICAgIGZvciAobGV0IHAgPSAwOyBwIDwgc3BsaXRlZFNlZ21lbnRzLmxlbmd0aDsgcCsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLmlzUHRJblJlY3QocmVjdHNbYl0sIEdlb21ldHJ5Q2FsYy5saW5lTWlkZGxlUHQoc3BsaXRlZFNlZ21lbnRzW3BdKSkpXHJcbiAgICAgICAgICAgICAgICAgICAgICBuZXdDdXJyZW50UmVjdFNlZ21lbnRzLnB1c2goc3BsaXRlZFNlZ21lbnRzW3BdKTtcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgbmV3Q3VycmVudFJlY3RTZWdtZW50cy5wdXNoKGN1cnJlbnRSZWN0U2VnbWVudHNba10pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodGVtcE92ZXJsYXBwZWRTZWdtZW50cy5sZW5ndGggPiAwICYmIHJlY3RzUmVsYXRpb24gIT09IFJlY3RSZWN0UmVsYXRpb25zaGlwVHlwZS5UYW5nZW50KSB7XHJcbiAgICAgICAgICAgICAgZm9yIChsZXQgbSA9IDA7IG0gPCB0ZW1wT3ZlcmxhcHBlZFNlZ21lbnRzLmxlbmd0aDsgbSsrKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIW92ZXJsYXBwZWRTZWdtZW50cy5maW5kKHNlZ21lbnQgPT4gR2VvbWV0cnlDYWxjLmFyZUxpbmVzRXF1YWwoc2VnbWVudCwgdGVtcE92ZXJsYXBwZWRTZWdtZW50c1ttXSkpKVxyXG4gICAgICAgICAgICAgICAgICBvdmVybGFwcGVkU2VnbWVudHMucHVzaCh0ZW1wT3ZlcmxhcHBlZFNlZ21lbnRzW21dKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gVXBkYXRlIHRoZSBzZWdtZW50cyBhZnRlciBwcm9jZXNzaW5nIHRoZW0gd2l0aCB0aGlzIGl0ZXJhdGlvbiByZWN0YW5nbGUuXHJcbiAgICAgICAgICAgIGN1cnJlbnRSZWN0U2VnbWVudHMgPSBuZXdDdXJyZW50UmVjdFNlZ21lbnRzO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBpZiAoY3VycmVudFJlY3RTZWdtZW50cy5sZW5ndGggPiAwKVxyXG4gICAgICAgIGZpbmFsU2VnbWVudHMucHVzaCguLi5jdXJyZW50UmVjdFNlZ21lbnRzKTtcclxuICAgIH1cclxuICAgIGlmIChvdmVybGFwcGVkU2VnbWVudHMubGVuZ3RoID4gMClcclxuICAgICAgZmluYWxTZWdtZW50cy5wdXNoKC4uLm92ZXJsYXBwZWRTZWdtZW50cyk7XHJcbiAgICByZXR1cm4gZmluYWxTZWdtZW50cztcclxuICB9XHJcblxyXG5cclxuICBzdGF0aWMgc3ZnUGF0aEZyb21MaW5lcyhzZWdtZW50czogTGluZVtdKSB7XHJcbiAgICBjb25zdCBwYXRoID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsICdwYXRoJyk7XHJcbiAgICBjb25zdCBwYXRoQ29udGVudCA9IFtdO1xyXG4gICAgY29uc3QgcHJlY2lzaW9uID0gMzsgLy8gVE9ETyBUYWtlIGZyb20gdGhlIGRvY3VtZW50P1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzZWdtZW50cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICBwYXRoQ29udGVudC5wdXNoKGBNJHtzZWdtZW50c1tpXVswXS54LnRvRml4ZWQocHJlY2lzaW9uKX0sJHtzZWdtZW50c1tpXVswXS55LnRvRml4ZWQocHJlY2lzaW9uKX0gJHtzZWdtZW50c1tpXVsxXS54LnRvRml4ZWQocHJlY2lzaW9uKX0sJHtzZWdtZW50c1tpXVsxXS55LnRvRml4ZWQocHJlY2lzaW9uKX1gKTtcclxuICAgIH1cclxuICAgIHBhdGguc2V0QXR0cmlidXRlKCdkJywgcGF0aENvbnRlbnQuam9pbignJykpO1xyXG4gICAgcmV0dXJuIHBhdGg7XHJcbiAgfVxyXG59IiwiaW1wb3J0IEdlbmVyaWNzIGZyb20gJy4vZ2VuZXJpY3MnO1xyXG5cclxuZXhwb3J0IGNsYXNzIERyYXdpbmcge1xyXG4gIG5hbWU6IHN0cmluZztcclxuICBpZDogYW55OyAvLyBUT0RPXHJcbiAgY29udGVudDogSFRNTEVsZW1lbnQ7XHJcbiAgc3ZnQ2FudmFzOiBTVkdTVkdFbGVtZW50O1xyXG4gIGNvbW1lbnRzR3JvdXA6IFNWR0dFbGVtZW50O1xyXG4gIGNvbW1lbnRzQ2hhbmdlZDogYm9vbGVhbjtcclxuICBtb3VzZVBvc2l0aW9uOiBET01Qb2ludDtcclxuICAvLyBab29tXHJcbiAgcmVhZG9ubHkgU1ZHV0lEVEggPSA1MDA7XHJcbiAgcmVhZG9ubHkgWk9PTVNQRUVEID0gMS4yNTtcclxuICAvLyBQYW5cclxuICBhbGxvd1Bhbm5pbmcgPSBmYWxzZTtcclxuICBzdmdJbml0aWFsQ2xpY2s6IERPTVBvaW50O1xyXG4gIHByZXZWaWV3Qm94OiBTVkdSZWN0O1xyXG5cclxuICBjb25zdHJ1Y3RvcihuYW1lOiBzdHJpbmcsIGlkOiBhbnkpIHsgLy8gVE9ETyBzdHJpbmcgb3IgbnVtYmVyP1xyXG4gICAgdGhpcy5uYW1lID0gbmFtZTtcclxuICAgIHRoaXMuaWQgPSBpZDtcclxuICAgIHRoaXMuY29udGVudDtcclxuXHJcbiAgICB0aGlzLnpvb20gPSB0aGlzLnpvb20uYmluZCh0aGlzKTtcclxuICB9XHJcblxyXG4gIHNldENvbnRlbnQoY29udGVudDogc3RyaW5nKSB7XHJcbiAgICB0aGlzLmNvbnRlbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgIGNvbnN0IGRvbXBhcnNlciA9IG5ldyBET01QYXJzZXIoKTtcclxuICAgIHRoaXMuc3ZnQ2FudmFzID0gZG9tcGFyc2VyLnBhcnNlRnJvbVN0cmluZyhjb250ZW50LCAnaW1hZ2Uvc3ZnK3htbCcpLmRvY3VtZW50RWxlbWVudCBhcyB1bmtub3duIGFzIFNWR1NWR0VsZW1lbnQ7XHJcbiAgICB0aGlzLmNvbnRlbnQuYXBwZW5kQ2hpbGQodGhpcy5zdmdDYW52YXMpO1xyXG4gICAgLy8gWm9vbVxyXG4gICAgdGhpcy5zdmdDYW52YXMuYWRkRXZlbnRMaXN0ZW5lcignd2hlZWwnLCB0aGlzLnpvb20pO1xyXG4gICAgLy8gUGFuXHJcbiAgICB0aGlzLnN2Z0NhbnZhcy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBlID0+IHtcclxuICAgICAgaWYgKGUuYnV0dG9ucyA9PT0gMikge1xyXG4gICAgICAgIHRoaXMuYWxsb3dQYW5uaW5nID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLnN2Z0luaXRpYWxDbGljayA9IEdlbmVyaWNzLmdldFJlbGF0aXZlQ29vcmRzKGUsIHRoaXMuc3ZnQ2FudmFzKTtcclxuICAgICAgICB0aGlzLnByZXZWaWV3Qm94ID0gdGhpcy5zdmdDYW52YXMudmlld0JveC5iYXNlVmFsOyAvLyBWaWV3Qm94IHZhbHVlIGF0IHN0YXJ0ICBcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICB0aGlzLnN2Z0NhbnZhcy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgKCkgPT4gdGhpcy5hbGxvd1Bhbm5pbmcgPSBmYWxzZSk7XHJcbiAgICB0aGlzLnN2Z0NhbnZhcy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgKCkgPT4gdGhpcy5hbGxvd1Bhbm5pbmcgPSBmYWxzZSk7XHJcbiAgICB0aGlzLnN2Z0NhbnZhcy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBlID0+IHtcclxuICAgICAgaWYgKGUuYnV0dG9ucyA9PT0gMiAmJiB0aGlzLmFsbG93UGFubmluZyA9PT0gZmFsc2UpIHtcclxuICAgICAgICB0aGlzLmFsbG93UGFubmluZyA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5zdmdJbml0aWFsQ2xpY2sgPSBHZW5lcmljcy5nZXRSZWxhdGl2ZUNvb3JkcyhlLCB0aGlzLnN2Z0NhbnZhcyk7XHJcbiAgICAgICAgdGhpcy5wcmV2Vmlld0JveCA9IHRoaXMuc3ZnQ2FudmFzLnZpZXdCb3guYmFzZVZhbDsgLy8gVmlld0JveCB2YWx1ZSBhdCBzdGFydFxyXG4gICAgICB9XHJcbiAgICAgIGlmICh0aGlzLmFsbG93UGFubmluZykge1xyXG4gICAgICAgIHRoaXMubW91c2VQb3NpdGlvbiA9IEdlbmVyaWNzLmdldFJlbGF0aXZlQ29vcmRzKGUsIHRoaXMuc3ZnQ2FudmFzKTtcclxuICAgICAgICB0aGlzLnN2Z0NhbnZhcy52aWV3Qm94LmJhc2VWYWwueCA9IC10aGlzLm1vdXNlUG9zaXRpb24ueCAtICgtdGhpcy5zdmdJbml0aWFsQ2xpY2sueCAtIHRoaXMucHJldlZpZXdCb3gueCk7XHJcbiAgICAgICAgdGhpcy5zdmdDYW52YXMudmlld0JveC5iYXNlVmFsLnkgPSAtdGhpcy5tb3VzZVBvc2l0aW9uLnkgLSAoLXRoaXMuc3ZnSW5pdGlhbENsaWNrLnkgLSB0aGlzLnByZXZWaWV3Qm94LnkpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGNyZWF0ZUNvbW1lbnRzR3JvdXAoKSB7XHJcbiAgICB0aGlzLmNvbW1lbnRzR3JvdXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywgJ2cnKTtcclxuICAgIC8vIGdyb3VwLnNldEF0dHJpYnV0ZSgnY29tbWVudHMnLCAnJyk7XHJcbiAgICB0aGlzLnN2Z0NhbnZhcy5hcHBlbmRDaGlsZCh0aGlzLmNvbW1lbnRzR3JvdXApO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSB6b29tKGU6IFdoZWVsRXZlbnQpIHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIHRoaXMubW91c2VQb3NpdGlvbiA9IEdlbmVyaWNzLmdldFJlbGF0aXZlQ29vcmRzKGUsIHRoaXMuc3ZnQ2FudmFzKTtcclxuICAgIGxldCB6b29tRmFjdG9yID0gKGUuZGVsdGFZID4gMCA/IHRoaXMuWk9PTVNQRUVEIDogMSAvIHRoaXMuWk9PTVNQRUVEKTtcclxuICAgIGxldCB4UHJvcCA9ICh0aGlzLm1vdXNlUG9zaXRpb24ueCAtIHRoaXMuc3ZnQ2FudmFzLnZpZXdCb3guYmFzZVZhbC54KSAvIHRoaXMuc3ZnQ2FudmFzLnZpZXdCb3guYmFzZVZhbC53aWR0aDtcclxuICAgIGxldCB4SW5jID0gdGhpcy5zdmdDYW52YXMudmlld0JveC5iYXNlVmFsLndpZHRoICogem9vbUZhY3RvciAtIHRoaXMuc3ZnQ2FudmFzLnZpZXdCb3guYmFzZVZhbC53aWR0aDtcclxuICAgIGxldCB5UHJvcCA9ICh0aGlzLm1vdXNlUG9zaXRpb24ueSAtIHRoaXMuc3ZnQ2FudmFzLnZpZXdCb3guYmFzZVZhbC55KSAvIHRoaXMuc3ZnQ2FudmFzLnZpZXdCb3guYmFzZVZhbC5oZWlnaHQ7XHJcbiAgICBsZXQgeUluYyA9IHRoaXMuc3ZnQ2FudmFzLnZpZXdCb3guYmFzZVZhbC5oZWlnaHQgKiB6b29tRmFjdG9yIC0gdGhpcy5zdmdDYW52YXMudmlld0JveC5iYXNlVmFsLmhlaWdodDtcclxuICAgIGlmIChlLmRlbHRhWSA+IDAgPyB0aGlzLnN2Z0NhbnZhcy52aWV3Qm94LmJhc2VWYWwud2lkdGggPCB0aGlzLlNWR1dJRFRIICogMTAgOiB0aGlzLnN2Z0NhbnZhcy52aWV3Qm94LmJhc2VWYWwud2lkdGggPiB0aGlzLlNWR1dJRFRIIC8gMTApIHtcclxuICAgICAgdGhpcy5zdmdDYW52YXMudmlld0JveC5iYXNlVmFsLnggLT0geEluYyAqIHhQcm9wO1xyXG4gICAgICB0aGlzLnN2Z0NhbnZhcy52aWV3Qm94LmJhc2VWYWwud2lkdGggKz0geEluYztcclxuICAgICAgdGhpcy5zdmdDYW52YXMudmlld0JveC5iYXNlVmFsLnkgLT0geUluYyAqIHlQcm9wO1xyXG4gICAgICB0aGlzLnN2Z0NhbnZhcy52aWV3Qm94LmJhc2VWYWwuaGVpZ2h0ICs9IHlJbmM7XHJcbiAgICB9XHJcbiAgfVxyXG59IiwiaW1wb3J0IEdlbmVyaWNzIGZyb20gJy4vZ2VuZXJpY3MnO1xyXG5pbXBvcnQgeyBEcmF3aW5nIH0gZnJvbSAnLi9kcmF3aW5nJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIHtcclxuXHJcbiAgLyoqKioqKiBCQVNJQyBHT09HTEUgQVBJIEZVTkNUSU9OUyAqKioqKiovXHJcblxyXG4gIC8qKlxyXG4gICAqIFJldHJpZXZlcyBpZCBhbmQgbmFtZSBvZiB0aGUgZmlsZXMgdGhhdCBtYXRjaCB0aGUgcXVlcnkgb2JqZWN0LlxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBxdWVyeSBPYmplY3Qgd2l0aCBvcHRpb25hbCBlbnRyaWVzOiBuYW1lIChzdHIpLCBwYXJlbnRJZCAoc3RyKSwgdHJhc2hlZCAoYm9vbCksIGV4Y2x1ZGVOYW1lIChzdHIpLCBhbmQgb25seUZvbGRlciAoYm9vbClcclxuICAgKiBAcGFyYW0ge1N0cmluZ30gbWV0YWRhdGFGaWVsZHMgT3B0aW9uYWwsIGJ5IGRlZmF1bHQgaXQgaW5jbHVkZXMgaWQgYW5kIG5hbWUgb2YgdGhlIGZpbGUsIGJ1dCBhbnkgb3RoZXIgY2FuIGJlIGFkZGVkOiAnZmllbGQsIGZpZWxkJ1xyXG4gICAqL1xyXG4gIHN0YXRpYyBsaXN0RmlsZXMocXVlcnksIG1ldGFkYXRhRmllbGRzKSB7XHJcbiAgICBjb25zdCBxdWVyeUl0ZW1zID0gW107XHJcbiAgICBpZiAocXVlcnkubmFtZSkgcXVlcnlJdGVtcy5wdXNoKCduYW1lPVxcJycgKyBxdWVyeS5uYW1lICsgJ1xcJycpO1xyXG4gICAgaWYgKHF1ZXJ5LnBhcmVudElkKSBxdWVyeUl0ZW1zLnB1c2goJ1xcJycgKyBxdWVyeS5wYXJlbnRJZCArICdcXCcgaW4gcGFyZW50cycpO1xyXG4gICAgaWYgKHF1ZXJ5LnRyYXNoZWQgPT09IGZhbHNlKSBxdWVyeUl0ZW1zLnB1c2goJ3RyYXNoZWQ9ZmFsc2UnKTtcclxuICAgIGlmIChxdWVyeS5leGNsdWRlTmFtZSkgcXVlcnlJdGVtcy5wdXNoKCdub3QgbmFtZSBjb250YWlucyBcXCcnICsgcXVlcnkuZXhjbHVkZU5hbWUgKyAnXFwnJyk7XHJcbiAgICBpZiAocXVlcnkub25seUZvbGRlcikgcXVlcnlJdGVtcy5wdXNoKCdtaW1lVHlwZT1cXCdhcHBsaWNhdGlvbi92bmQuZ29vZ2xlLWFwcHMuZm9sZGVyXFwnJyk7XHJcbiAgICBsZXQgcmVxdWVzdCA9IGdhcGkuY2xpZW50LmRyaXZlLmZpbGVzLmxpc3Qoe1xyXG4gICAgICAncGFnZVNpemUnOiAxNSxcclxuICAgICAgJ2ZpZWxkcyc6IGBuZXh0UGFnZVRva2VuLCBmaWxlcyhpZCwgbmFtZSR7bWV0YWRhdGFGaWVsZHMgPyAnLCAnICsgbWV0YWRhdGFGaWVsZHMgOiAnJ30pYCxcclxuICAgICAgJ3EnOiBxdWVyeUl0ZW1zLmpvaW4oJyBhbmQgJylcclxuICAgIH0pO1xyXG4gICAgcmVxdWVzdC50aGVuKHJlcyA9PiB7XHJcbiAgICAgIGNvbnN0IGZpbGVzID0gcmVzLnJlc3VsdC5maWxlcztcclxuICAgICAgaWYgKGZpbGVzICYmIGZpbGVzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhmaWxlcyk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ05vIGZpbGVzIGZvdW5kIHdpdGggdGhpcyBxdWVyeTonLCBxdWVyeUl0ZW1zLmpvaW4oJyBhbmQgJykpO1xyXG4gICAgICB9XHJcbiAgICB9LCBlcnIgPT4ge1xyXG4gICAgICBjb25zb2xlLmVycm9yKGVyci5ib2R5KTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHJlcXVlc3Q7XHJcbiAgfVxyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogUmV0dXJucyBhIHByb21pc2Ugd2l0aCB0aGUgY29udGVudHMgb2YgdGhlIGZpbGUuXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IGZpbGVJZFxyXG4gICAqL1xyXG4gIHN0YXRpYyBnZXRGaWxlQ29udGVudChmaWxlSWQpIHtcclxuICAgIGxldCByZXF1ZXN0ID0gZ2FwaS5jbGllbnQuZHJpdmUuZmlsZXMuZ2V0KHtcclxuICAgICAgZmlsZUlkOiBmaWxlSWQsXHJcbiAgICAgIGFsdDogJ21lZGlhJ1xyXG4gICAgfSk7XHJcbiAgICByZXF1ZXN0LnRoZW4ocmVzID0+IHtcclxuICAgICAgaWYgKHJlcy5zdGF0dXMgPT09IDIwMClcclxuICAgICAgICBjb25zb2xlLmxvZygnRmlsZSB3aXRoIGlkICcgKyBmaWxlSWQgKyAnIGZldGNoZWQgc3VjY2Vzc2Z1bGx5LicpO1xyXG4gICAgfSwgZXJyID0+IHtcclxuICAgICAgY29uc29sZS5lcnJvcihlcnIuYm9keSk7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiByZXF1ZXN0O1xyXG4gIH1cclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIFJldHVybnMgYSBwcm9taXNlIHdpdGggdGhlIHJlcXVlc3RlZCBkYXRhIG9mIHRoZSBmaWxlLlxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBmaWxlSWQgVGhlIGlkIG9mIHRoZSBmaWxlIHRvIGdldCB0aGUgZGF0YSBvZi5cclxuICAgKiBAcGFyYW0ge1N0cmluZ30gZmllbGRzIFRoZSBkYXRhIHRvIGJlIGZldGNoZWQgaW4gZm9ybWF0OiAnZmllbGQxLCBmaWVsZDInLlxyXG4gICAqL1xyXG4gIHN0YXRpYyBnZXRGaWxlRGF0YShmaWxlSWQsIGZpZWxkcykge1xyXG4gICAgbGV0IHJlcXVlc3QgPSBnYXBpLmNsaWVudC5kcml2ZS5maWxlcy5nZXQoe1xyXG4gICAgICBmaWxlSWQ6IGZpbGVJZCxcclxuICAgICAgZmllbGRzOiBmaWVsZHNcclxuICAgIH0pO1xyXG4gICAgcmVxdWVzdC50aGVuKHJlcyA9PiB7XHJcbiAgICAgIGlmIChyZXMuc3RhdHVzID09PSAyMDApIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnRmlsZSBkYXRhIGZldGNoZWQgc3VjY2VzZnVsbHkuJyk7XHJcbiAgICAgIH1cclxuICAgIH0sIGVyciA9PiB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHJlcXVlc3Q7XHJcbiAgfVxyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogQ3JlYXRlcyBhIG5ldyBmb2xkZXIgYW5kIHJldHVybnMgaXRzIGlkLlxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB0aXRsZSBUaGUgbmFtZSBvZiB0aGUgZm9sZGVyLlxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBwYXJlbnRJZCBPcHRpb25hbCBpZCBvZiB0aGUgcGFyZW50IGZvbGRlciwgaWYgbm9uZSBpdCB3aWxsIGJlIGNyZWF0ZWQgb24gdGhlIHJvb3QuXHJcbiAgICovXHJcbiAgc3RhdGljIGNyZWF0ZUZvbGRlcih0aXRsZSwgcGFyZW50SWQgPSAnZHJpdmUnKSB7XHJcbiAgICBjb25zdCBib2R5ID0ge1xyXG4gICAgICBcIm5hbWVcIjogdGl0bGUsXHJcbiAgICAgIFwibWltZVR5cGVcIjogXCJhcHBsaWNhdGlvbi92bmQuZ29vZ2xlLWFwcHMuZm9sZGVyXCIsXHJcbiAgICAgIFwicGFyZW50c1wiOiBwYXJlbnRJZCAhPT0gJ2RyaXZlJyA/IFtwYXJlbnRJZF0gOiBbXVxyXG4gICAgfVxyXG4gICAgY29uc3QgcmVxdWVzdCA9IGdhcGkuY2xpZW50LnJlcXVlc3Qoe1xyXG4gICAgICAncGF0aCc6ICdodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9kcml2ZS92My9maWxlcy8nLFxyXG4gICAgICAnbWV0aG9kJzogJ1BPU1QnLFxyXG4gICAgICAnYm9keSc6IGJvZHlcclxuICAgIH0pO1xyXG4gICAgcmVxdWVzdC50aGVuKHJlcyA9PiB7XHJcbiAgICAgIGNvbnNvbGUubG9nKHRpdGxlICsgJyBmb2xkZXIgY3JlYXRlZC4gSWQ6ICcgKyBKU09OLnBhcnNlKHJlcy5ib2R5KS5pZCk7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiByZXF1ZXN0O1xyXG4gIH1cclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIFVwbG9hZCBhIGZpbGUgdG8gdGhlIHNwZWNpZmljIGZvbGRlci5cclxuICAgKiBAcGFyYW0ge1N0cmluZ30gZmlsZUNvbnRlbnQgVGhlIGNvbnRlbnQgb2YgdGhlIGZpbGUgYXMgYSBzdHJpbmcuXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IGZpbGVNaW1lVHlwZSBUaGUgTUlNRSBUeXBlIG9mIHRoZSBmaWxlLiBGb3IgZXhhbXBsZTogJ2FwcGxpY2F0aW9uL2pzb24nXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IGZpbGVOYW1lIE5hbWUgZm9yIHRoZSBmaWxlLlxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBmb2xkZXJJZCBJZCBvZiB0aGUgcGFyZW50IGZvbGRlci5cclxuICAgKi9cclxuICBzdGF0aWMgdXBsb2FkRmlsZShmaWxlQ29udGVudCwgZmlsZU1pbWVUeXBlLCBmaWxlTmFtZSwgZm9sZGVySWQpIHtcclxuICAgIGNvbnN0IGZpbGUgPSBuZXcgQmxvYihbZmlsZUNvbnRlbnRdLCB7IHR5cGU6IGZpbGVNaW1lVHlwZSB9KTtcclxuICAgIGNvbnN0IG1ldGFkYXRhID0ge1xyXG4gICAgICAnbmFtZSc6IGZpbGVOYW1lLFxyXG4gICAgICAnbWltZVR5cGUnOiBmaWxlTWltZVR5cGUsXHJcbiAgICAgICdwYXJlbnRzJzogW2ZvbGRlcklkXVxyXG4gICAgfTtcclxuICAgIGNvbnN0IGFjY2Vzc1Rva2VuID0gZ2FwaS5hdXRoLmdldFRva2VuKCkuYWNjZXNzX3Rva2VuOyAvLyBHYXBpIGlzIHVzZWQgZm9yIHJldHJpZXZpbmcgdGhlIGFjY2VzcyB0b2tlbi5cclxuICAgIGNvbnN0IGZvcm0gPSBuZXcgRm9ybURhdGEoKTtcclxuICAgIGZvcm0uYXBwZW5kKCdtZXRhZGF0YScsIG5ldyBCbG9iKFtKU09OLnN0cmluZ2lmeShtZXRhZGF0YSldLCB7IHR5cGU6ICdhcHBsaWNhdGlvbi9qc29uJyB9KSk7XHJcbiAgICBmb3JtLmFwcGVuZCgnZmlsZScsIGZpbGUpO1xyXG5cclxuICAgIGxldCByZXF1ZXN0ID0gZmV0Y2goJ2h0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL3VwbG9hZC9kcml2ZS92My9maWxlcz91cGxvYWRUeXBlPW11bHRpcGFydCZmaWVsZHM9aWQnLCB7XHJcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICBoZWFkZXJzOiBuZXcgSGVhZGVycyh7ICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgYWNjZXNzVG9rZW4gfSksXHJcbiAgICAgIGJvZHk6IGZvcm1cclxuICAgIH0pO1xyXG4gICAgcmVxdWVzdC50aGVuKHJlcyA9PiB7XHJcbiAgICAgIGlmIChyZXMub2sgPT09IHRydWUgJiYgcmVzLnN0YXR1cyA9PT0gMjAwKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ1VwbG9hZCBvZiAnICsgZmlsZU5hbWUgKyAnIHN1Y2Nlc3NmdWwuJyk7XHJcbiAgICAgIH1cclxuICAgIH0sIGVyciA9PiB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHJlcXVlc3Q7XHJcbiAgfVxyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogVXBkYXRlIHRoZSBjb250ZW50cyBvZiBhIGZpbGUuXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IGZpbGVDb250ZW50IFRoZSBjb250ZW50IG9mIHRoZSBmaWxlIGFzIGEgc3RyaW5nLlxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBmaWxlTWltZVR5cGUgVGhlIE1JTUUgVHlwZSBvZiB0aGUgZmlsZS4gRm9yIGV4YW1wbGU6ICdhcHBsaWNhdGlvbi9qc29uJy5cclxuICAgKiBAcGFyYW0ge1N0cmluZ30gZmlsZUlkIElEIG9mIHRoZSBmaWxlIHRvIHVwZGF0ZSBpdHMgY29udGVudC5cclxuICAgKi9cclxuICBzdGF0aWMgdXBkYXRlRmlsZUNvbnRlbnQoZmlsZUNvbnRlbnQsIGZpbGVNaW1lVHlwZSwgZmlsZUlkKSB7XHJcbiAgICBjb25zdCBmaWxlID0gbmV3IEJsb2IoW2ZpbGVDb250ZW50XSwgeyB0eXBlOiBmaWxlTWltZVR5cGUgfSk7XHJcbiAgICBjb25zdCBtZXRhZGF0YSA9IHtcclxuICAgICAgJ21pbWVUeXBlJzogZmlsZU1pbWVUeXBlXHJcbiAgICB9O1xyXG4gICAgY29uc3QgYWNjZXNzVG9rZW4gPSBnYXBpLmF1dGguZ2V0VG9rZW4oKS5hY2Nlc3NfdG9rZW47IC8vIEdhcGkgaXMgdXNlZCBmb3IgcmV0cmlldmluZyB0aGUgYWNjZXNzIHRva2VuLlxyXG4gICAgY29uc3QgZm9ybSA9IG5ldyBGb3JtRGF0YSgpO1xyXG4gICAgZm9ybS5hcHBlbmQoJ21ldGFkYXRhJywgbmV3IEJsb2IoW0pTT04uc3RyaW5naWZ5KG1ldGFkYXRhKV0sIHsgdHlwZTogJ2FwcGxpY2F0aW9uL2pzb24nIH0pKTtcclxuICAgIGZvcm0uYXBwZW5kKCdmaWxlJywgZmlsZSk7XHJcblxyXG4gICAgbGV0IHJlcXVlc3QgPSBmZXRjaChgaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vdXBsb2FkL2RyaXZlL3YzL2ZpbGVzLyR7ZmlsZUlkfT91cGxvYWRUeXBlPW11bHRpcGFydGAsIHsgLy8gT3RoZXJ3aXNlIHRyeSB1cGxvYWRUeXBlPW1lZGlhXHJcbiAgICAgIG1ldGhvZDogJ1BBVENIJyxcclxuICAgICAgaGVhZGVyczogbmV3IEhlYWRlcnMoeyAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIGFjY2Vzc1Rva2VuIH0pLFxyXG4gICAgICBib2R5OiBmb3JtLFxyXG4gICAgfSk7XHJcbiAgICByZXF1ZXN0LnRoZW4ocmVzID0+IHtcclxuICAgICAgaWYgKHJlcy5vayA9PT0gdHJ1ZSAmJiByZXMuc3RhdHVzID09PSAyMDApIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnVXBkYXRlIHN1Y2Nlc3NmdWwuJyk7XHJcbiAgICAgIH1cclxuICAgIH0sIGVyciA9PiB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHJlcXVlc3Q7XHJcbiAgfVxyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogVmVyc2lvbiBvZiB1cGxvYWQgZmlsZSBmcm9tIGRvY3VtZW50YXRpb24gdGhhdCBkb2VzbnQgd29yay5cclxuICAgKiBJdCBqdXN0IGNyZWF0ZXMgYW4gdW50aXRsZWQgZW1wdHkgZmlsZSBpbiB0aGUgZHJpdmUgcm9vdC5cclxuICAgKiBAcGFyYW0geyp9IGZpbGVDb250ZW50IFxyXG4gICAqIEBwYXJhbSB7Kn0gZmlsZU1pbWVUeXBlIFxyXG4gICAqIEBwYXJhbSB7Kn0gZmlsZU5hbWUgXHJcbiAgICogQHBhcmFtIHsqfSBmb2xkZXJJZCBcclxuICAgKi9cclxuICAvLyBzdGF0aWMgdXBsb2FkRmlsZTIoZmlsZUNvbnRlbnQsIGZpbGVNaW1lVHlwZSwgZmlsZU5hbWUsIGZvbGRlcklkKSB7XHJcbiAgLy8gICBjb25zdCBmaWxlID0gbmV3IEJsb2IoW2ZpbGVDb250ZW50XSwgeyB0eXBlOiBmaWxlTWltZVR5cGUgfSk7XHJcbiAgLy8gICBjb25zdCBmaWxlTWV0YWRhdGEgPSB7XHJcbiAgLy8gICAgICduYW1lJzogZmlsZU5hbWUsXHJcbiAgLy8gICAgICdwYXJlbnRzJzogW2ZvbGRlcklkXVxyXG4gIC8vICAgfTtcclxuICAvLyAgIGNvbnN0IGZvcm0gPSBuZXcgRm9ybURhdGEoKTtcclxuICAvLyAgIGZvcm0uYXBwZW5kKCdtZXRhZGF0YScsIG5ldyBCbG9iKFtKU09OLnN0cmluZ2lmeShmaWxlTWV0YWRhdGEpXSwgeyB0eXBlOiAnYXBwbGljYXRpb24vanNvbicgfSkpO1xyXG4gIC8vICAgZm9ybS5hcHBlbmQoJ2ZpbGUnLCBmaWxlKTtcclxuICAvLyAgIGNvbnN0IG1lZGlhID0ge1xyXG4gIC8vICAgICBtaW1lVHlwZTogZmlsZU1pbWVUeXBlLFxyXG4gIC8vICAgICBib2R5OiBmb3JtXHJcbiAgLy8gICB9O1xyXG4gIC8vICAgcmV0dXJuIGdhcGkuY2xpZW50LmRyaXZlLmZpbGVzLmNyZWF0ZSh7XHJcbiAgLy8gICAgIHJlc291cmNlOiBmaWxlTWV0YWRhdGEsXHJcbiAgLy8gICAgIG1lZGlhOiBtZWRpYSxcclxuICAvLyAgICAgZmllbGRzOiAnaWQnXHJcbiAgLy8gICB9LCAoZXJyLCBmaWxlKSA9PiB7XHJcbiAgLy8gICAgIGlmIChlcnIpIHtcclxuICAvLyAgICAgICAvLyBIYW5kbGUgZXJyb3JcclxuICAvLyAgICAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgLy8gICAgIH0gZWxzZSB7XHJcbiAgLy8gICAgICAgY29uc29sZS5sb2coJ0ZpbGUgSWQ6ICcsIGZpbGUuaWQpO1xyXG4gIC8vICAgICB9XHJcbiAgLy8gICB9KTtcclxuICAvLyB9XHJcblxyXG5cclxuICAvKipcclxuICAgKiBSZW5hbWUgYSBmaWxlLlxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBmaWxlSWQgSUQgb2YgdGhlIGZpbGUgdG8gcmVuYW1lLlxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBuZXdUaXRsZSBOZXcgdGl0bGUgZm9yIHRoZSBmaWxlLlxyXG4gICAqL1xyXG4gIHN0YXRpYyByZW5hbWVGaWxlKGZpbGVJZCwgbmV3VGl0bGUpIHtcclxuICAgIGNvbnN0IHJlcXVlc3QgPSBnYXBpLmNsaWVudC5kcml2ZS5maWxlcy51cGRhdGUoe1xyXG4gICAgICAnZmlsZUlkJzogZmlsZUlkLFxyXG4gICAgICAnbmFtZSc6IG5ld1RpdGxlLFxyXG4gICAgICAndXBsb2FkVHlwZSc6ICdtZWRpYSdcclxuICAgIH0pO1xyXG4gICAgcmVxdWVzdC50aGVuKHJlcyA9PiB7XHJcbiAgICAgIC8vY29uc29sZS5sb2cocmVzKTtcclxuICAgIH0sIHJlaiA9PiB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHJlbmFtaW5nIGZpbGU6ICcgKyBmaWxlSWQsIHJlaik7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiByZXF1ZXN0O1xyXG4gIH1cclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIE1vdmVzIGEgZmlsZSBvciBmb2xkZXIgaW5zaWRlIGFub3RoZXIgZm9sZGVyLlxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBmaWxlSWQgXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IHBhcmVudElkIFxyXG4gICAqL1xyXG4gIHN0YXRpYyBtb3ZlRmlsZVYyKGZpbGVJZCwgcGFyZW50SWQpIHtcclxuICAgIGNvbnN0IHJlcXVlc3QgPSBnYXBpLmNsaWVudC5yZXF1ZXN0KHtcclxuICAgICAgJ3BhdGgnOiAnaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vZHJpdmUvdjIvZmlsZXMvJyArIGZpbGVJZCArICcvcGFyZW50cycsXHJcbiAgICAgICdtZXRob2QnOiAnUE9TVCcsXHJcbiAgICAgICdoZWFkZXJzJzoge1xyXG4gICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcclxuICAgICAgfSxcclxuICAgICAgJ2JvZHknOiB7XHJcbiAgICAgICAgJ2lkJzogcGFyZW50SWRcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICByZXF1ZXN0LnRoZW4ocmVzID0+IHtcclxuICAgICAgY29uc29sZS5sb2cocmVzKTtcclxuICAgIH0sIHJlaiA9PiB7XHJcbiAgICAgIGNvbnNvbGUubG9nKHJlaik7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiByZXF1ZXN0O1xyXG4gIH1cclxuXHJcblxyXG4gIHN0YXRpYyBtb3ZlRmlsZShmaWxlSWQsIHBhcmVudElkKSB7XHJcbiAgICBjb25zdCBib2R5ID0geyAnaWQnOiBwYXJlbnRJZCB9O1xyXG4gICAgY29uc3QgcmVxdWVzdCA9IGdhcGkuY2xpZW50LmRyaXZlLnBhcmVudHMuaW5zZXJ0KHtcclxuICAgICAgJ2ZpbGVJZCc6IGZpbGVJZCxcclxuICAgICAgJ3Jlc291cmNlJzogYm9keVxyXG4gICAgfSk7XHJcbiAgICByZXF1ZXN0LmV4ZWN1dGUoZnVuY3Rpb24gKHJlc3ApIHsgfSk7XHJcbiAgfVxyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogUGVybWFuZW50bHkgZGVsZXRlIGEgZmlsZSwgc2tpcHBpbmcgdGhlIHRyYXNoLlxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBmaWxlSWQgSUQgb2YgdGhlIGZpbGUgdG8gZGVsZXRlLlxyXG4gICAqL1xyXG4gIHN0YXRpYyBkZWxldGVGaWxlKGZpbGVJZCkge1xyXG4gICAgbGV0IHJlcXVlc3QgPSBnYXBpLmNsaWVudC5kcml2ZS5maWxlcy5kZWxldGUoe1xyXG4gICAgICAnZmlsZUlkJzogZmlsZUlkXHJcbiAgICB9KTtcclxuICAgIHJlcXVlc3QudGhlbihyZXMgPT4ge1xyXG4gICAgICBjb25zb2xlLmxvZyhyZXMpO1xyXG4gICAgfSwgcmVqID0+IHtcclxuICAgICAgY29uc29sZS5sb2cocmVqKTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHJlcXVlc3Q7XHJcbiAgfVxyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogTk9UIFdPUktJTkcuIFRISVMgV09VTEQgT05MWSBNQUtFIFNFTlNFIElOIEEgU0VSVkVSLlxyXG4gICAqIFN1YnNjcmliZXMgdG8gY2hhbmdlcyB0byBhIGZpbGUuXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IGZpbGVJZCBJRCBvZiB0aGUgZmlsZSB0byB3YXRjaC5cclxuICAgKi9cclxuICAvLyBzdGF0aWMgd2F0Y2hGaWxlKGZpbGVJZCkge1xyXG4gIC8vICAgY29uc3QgYm9keSA9IHtcclxuICAvLyAgICAgXCJraW5kXCI6IFwiYXBpI2NoYW5uZWxcIixcclxuICAvLyAgICAgXCJpZFwiOiBcIjAxMjM0NTY3LTg5YWItY2RlZi0wMTIzNDU2Nzg5YWJcIiwgLy8gVE9ETyBVc2UgYSB1dWlkIGdlbmVyYXRvclxyXG4gIC8vICAgICAvL1wicmVzb3VyY2VJZFwiOiBzdHJpbmcsXHJcbiAgLy8gICAgIC8vXCJyZXNvdXJjZVVyaVwiOiBzdHJpbmcsXHJcbiAgLy8gICAgIFwidHlwZVwiOiBcIndlYl9ob29rXCIsXHJcbiAgLy8gICAgIFwiYWRkcmVzc1wiOiBcImh0dHBzOi8vdmlzdWFsYXJxYXBwLnJhbW9uY2FyY2VsZXMuY29tXCJcclxuICAvLyAgIH1cclxuICAvLyAgIGNvbnN0IHJlcXVlc3QgPSBnYXBpLmNsaWVudC5yZXF1ZXN0KHtcclxuICAvLyAgICAgJ3BhdGgnOiBgaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vZHJpdmUvdjMvZmlsZXMvJHtmaWxlSWR9L3dhdGNoYCxcclxuICAvLyAgICAgJ21ldGhvZCc6ICdQT1NUJyxcclxuICAvLyAgICAgJ2JvZHknOiBib2R5XHJcbiAgLy8gICB9KTtcclxuICAvLyAgIHJlcXVlc3QudGhlbihyZXMgPT4ge1xyXG4gIC8vICAgICBjb25zb2xlLmxvZyhyZXMpO1xyXG4gIC8vICAgfSk7XHJcbiAgLy8gICByZXR1cm4gcmVxdWVzdDtcclxuICAvLyB9XHJcblxyXG4gIC8vIE5PVCBXT1JLSU5HLiBUSElTIFdPVUxEIE9OTFkgTUFLRSBTRU5TRSBJTiBBIFNFUlZFUi5cclxuICAvLyBzdGF0aWMgc3RvcFdhdGNoaW5nKGNoYW5uZWxJZCwgcmVzb3VyY2VJZCkge1xyXG4gIC8vICAgY29uc3QgYm9keSA9IHtcclxuICAvLyAgICAgXCJpZFwiOiBjaGFubmVsSWQsIC8vIFNob3VsZCBiZSB0aGUgb25lIHRvIHN0b3AgY3JlYXRlZCBwcmV2aW91c2x5LlxyXG4gIC8vICAgICBcInJlc291cmNlSWRcIjogcmVzb3VyY2VJZFxyXG4gIC8vICAgfVxyXG4gIC8vICAgY29uc3QgcmVxdWVzdCA9IGdhcGkuY2xpZW50LnJlcXVlc3Qoe1xyXG4gIC8vICAgICAncGF0aCc6IGBodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9kcml2ZS92My9jaGFubmVscy9zdG9wYCxcclxuICAvLyAgICAgJ21ldGhvZCc6ICdQT1NUJyxcclxuICAvLyAgICAgJ2JvZHknOiBib2R5XHJcbiAgLy8gICB9KTtcclxuICAvLyAgIHJlcXVlc3QudGhlbihyZXMgPT4ge1xyXG4gIC8vICAgICBjb25zb2xlLmxvZyhyZXMpO1xyXG4gIC8vICAgfSk7XHJcbiAgLy8gICByZXR1cm4gcmVxdWVzdDtcclxuICAvLyB9XHJcblxyXG5cclxuICAvKipcclxuICAgKiBDcmVhdGVzIHBlcm1pc3Npb25zIGZvciBhIHNwZWNpZmljIGZpbGUuXHJcbiAgICogVGhlIGRlbGF5IGhhcyBiZWVuIGFkZGVkIGJlY2F1c2UgdGhlIEdEIEFQSSBkb2VzbnQgYWxsb3cgdG8gY3JlYXRlIHNldmVyYWwgcGVybWlzc2lvbnMgYXQgdGhlIHNhbWUgdGltZS5cclxuICAgKiBAcGFyYW0ge1N0cmluZ30gZmlsZUlkIFxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBlbWFpbEFkZHJlc3NcclxuICAgKiBAcGFyYW0ge051bWJlcn0gZGVsYXkgQW1vdW50IG9mIG1pbGxpc2Vjb25kcyB0byB3YWl0IGJlZm9yZSBzZW5kaW5nIHRoZSByZXF1ZXN0LlxyXG4gICAqL1xyXG4gIHN0YXRpYyBzaGFyZUZpbGUoZmlsZUlkLCBlbWFpbEFkZHJlc3MsIGRlbGF5ID0gMCkge1xyXG4gICAgY29uc3QgZGVsYXllZFByb21pc2UgPSBuZXcgUHJvbWlzZShyZXMgPT4gc2V0VGltZW91dChyZXMsIGRlbGF5KSk7XHJcbiAgICByZXR1cm4gZGVsYXllZFByb21pc2UudGhlbihyZXMgPT4ge1xyXG4gICAgICBjb25zdCByZXF1ZXN0ID0gZ2FwaS5jbGllbnQucmVxdWVzdCh7XHJcbiAgICAgICAgJ3BhdGgnOiBgaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vZHJpdmUvdjMvZmlsZXMvJHtmaWxlSWR9L3Blcm1pc3Npb25zP3NlbmROb3RpZmljYXRpb25FbWFpbD1mYWxzZSZmaWVsZHM9aWQsZGlzcGxheU5hbWUsZW1haWxBZGRyZXNzLHBob3RvTGluayxyb2xlYCxcclxuICAgICAgICAnbWV0aG9kJzogJ1BPU1QnLFxyXG4gICAgICAgICdoZWFkZXJzJzoge1xyXG4gICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgJ2JvZHknOiB7XHJcbiAgICAgICAgICAncm9sZSc6ICd3cml0ZXInLCAvLyBvd25lciwgd3JpdGVyLCBjb21tZW50ZXIsIHJlYWRlclxyXG4gICAgICAgICAgJ3R5cGUnOiAndXNlcicsXHJcbiAgICAgICAgICAnZW1haWxBZGRyZXNzJzogZW1haWxBZGRyZXNzXHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgICAgcmVxdWVzdC50aGVuKHJlcyA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2cocmVzKTtcclxuICAgICAgfSk7XHJcbiAgICAgIHJldHVybiByZXF1ZXN0O1xyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gT1JJR0lOQUwgQ09ERSBXSVRIT1VUIERFTEFZXHJcbiAgICAvLyBjb25zdCByZXF1ZXN0ID0gZ2FwaS5jbGllbnQucmVxdWVzdCh7XHJcbiAgICAvLyAgICdwYXRoJzogJ3NhbWUgcGF0aCBhcyBhYm92ZScsXHJcbiAgICAvLyAgICdtZXRob2QnOiAnUE9TVCcsXHJcbiAgICAvLyAgICdoZWFkZXJzJzoge1xyXG4gICAgLy8gICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcclxuICAgIC8vICAgfSxcclxuICAgIC8vICAgJ2JvZHknOiB7XHJcbiAgICAvLyAgICAgJ3JvbGUnOiAnd3JpdGVyJywgLy8gb3duZXIsIHdyaXRlciwgY29tbWVudGVyLCByZWFkZXJcclxuICAgIC8vICAgICAndHlwZSc6ICd1c2VyJyxcclxuICAgIC8vICAgICAnZW1haWxBZGRyZXNzJzogZW1haWxBZGRyZXNzXHJcbiAgICAvLyAgIH1cclxuICAgIC8vIH0pO1xyXG4gICAgLy8gcmVxdWVzdC50aGVuKHJlcyA9PiB7XHJcbiAgICAvLyAgIGNvbnNvbGUubG9nKHJlcyk7XHJcbiAgICAvLyB9KTtcclxuICAgIC8vIHJldHVybiByZXF1ZXN0O1xyXG4gIH1cclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIERlbGV0ZXMgcGVybWlzc2lvbnMgZm9yIGEgc3BlY2lmaWMgZmlsZS5cclxuICAgKiBAcGFyYW0ge1N0cmluZ30gZmlsZUlkIFxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBwZXJtaXNzaW9uSWQgXHJcbiAgICovXHJcbiAgc3RhdGljIHN0b3BTaGFyaW5nRmlsZShmaWxlSWQsIHBlcm1pc3Npb25JZCkge1xyXG4gICAgY29uc3QgcmVxdWVzdCA9IGdhcGkuY2xpZW50LnJlcXVlc3Qoe1xyXG4gICAgICAncGF0aCc6ICdodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9kcml2ZS92My9maWxlcy8nICsgZmlsZUlkICsgJy9wZXJtaXNzaW9ucy8nICsgcGVybWlzc2lvbklkLFxyXG4gICAgICAnbWV0aG9kJzogJ0RFTEVURScsXHJcbiAgICAgICdoZWFkZXJzJzoge1xyXG4gICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICByZXF1ZXN0LnRoZW4ocmVzID0+IHtcclxuICAgICAgY29uc29sZS5sb2cocmVzKTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHJlcXVlc3Q7XHJcbiAgfVxyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogT2J0YWlucyBkYXRhIG9mIHRoZSB1c2VycyBzaGFyaW5nIGEgcHJvamVjdC4gTWluaW11bSByZXN1bHQgd291bGQgYmUgdGhlIG9ubHkgdGhlIG93bmVyLlxyXG4gICAqIEZvciBlYWNoIHVzZXIgcmV0dXJucyB0aGUgaWQgb2YgdGhlIHNoYXJpbmcgcGVybWlzc2lvbiwgbmFtZSwgZW1haWwgYWRkcmVzcywgcm9sZSBhbmQgcHJvZmlsZSBpbWFnZSB1cmwuXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IHByb2plY3RJZCBUaGUgcHJvamVjdCBpZC5cclxuICAgKi9cclxuICBzdGF0aWMgZ2V0UHJvamVjdFRlYW1EYXRhKHByb2plY3RJZCkge1xyXG4gICAgLy8gaHR0cHM6Ly9kZXZlbG9wZXJzLmdvb2dsZS5jb20vZHJpdmUvYXBpL3YzL3JlZmVyZW5jZS9wZXJtaXNzaW9ucy9saXN0XHJcbiAgICBjb25zdCByZXF1ZXN0ID0gZ2FwaS5jbGllbnQucmVxdWVzdCh7XHJcbiAgICAgICdwYXRoJzogYGh0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL2RyaXZlL3YzL2ZpbGVzLyR7cHJvamVjdElkfS9wZXJtaXNzaW9ucz9maWVsZHM9cGVybWlzc2lvbnMoaWQsZGlzcGxheU5hbWUsZW1haWxBZGRyZXNzLHJvbGUscGhvdG9MaW5rKWAsXHJcbiAgICAgICdtZXRob2QnOiAnR0VUJyxcclxuICAgICAgJ2hlYWRlcnMnOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfVxyXG4gICAgfSk7XHJcbiAgICByZXF1ZXN0LnRoZW4ocmVzID0+IHtcclxuICAgICAgY29uc29sZS5sb2cocmVzKTtcclxuICAgIH0sIHJlaiA9PiB7XHJcbiAgICAgIGNvbnNvbGUubG9nKHJlaik7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiByZXF1ZXN0O1xyXG4gIH1cclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIEdldHMgaW5mb3JtYXRpb24gYWJvdXQgdGhlIGN1cnJlbnQgdXNlciBsb2dnZWQgaW4gd2l0aCBHb29nbGUuXHJcbiAgICovXHJcbiAgc3RhdGljIGdldFVzZXJJbmZvKCkge1xyXG4gICAgY29uc3QgcmVxdWVzdCA9IGdhcGkuY2xpZW50LmRyaXZlLmFib3V0LmdldCh7XHJcbiAgICAgIGZpZWxkczogJ3VzZXInXHJcbiAgICB9KTtcclxuICAgIHJlcXVlc3QudGhlbihyZXMgPT4ge1xyXG4gICAgICBjb25zb2xlLmxvZyhKU09OLnBhcnNlKHJlcy5ib2R5KS51c2VyKTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHJlcXVlc3Q7XHJcbiAgfVxyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogU2VuZHMgYW4gZW1haWwgaW5kaWNhdGluZyB0aGF0IGEgcHJvamVjdCBhcyBiZWVuIHNoYXJlZCB3aXRoIHRoZSByZWNlaXZlci5cclxuICAgKiBAcGFyYW0ge1N0cmluZ30gc2hhcmVyIE5hbWUgb2YgdGhlIHVzZXIgd2hvIHNoYXJlZCB0aGUgcHJvamVjdC5cclxuICAgKiBAcGFyYW0ge1N0cmluZyB8IFN0cmluZ1tdfSByZWNpcGllbnRzIENvbW1hIHNlcGFyYXRlZCBsaXN0IG9yIGFuIGFycmF5IG9mIHJlY2lwaWVudHMgZW1haWwgYWRkcmVzc2VzLlxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBwcm9qZWN0TmFtZSBUaGUgbmFtZSBvZiB0aGUgcHJvamVjdCB0aGF0IGhhcyBiZWVuIHNoYXJlZC5cclxuICAgKiBAcGFyYW0ge1N0cmluZ30gcHJvamVjdElkIFRoaXMgaXMgcmVxdWlyZWQgdG8gY3JlYXRlIHRoZSB1cmwgbGluayB0byB0aGUgcHJvamVjdC5cclxuICAgKi9cclxuICBzdGF0aWMgc2VuZFNoYXJpbmdQcm9qZWN0RW1haWwoc2hhcmVyLCByZWNpcGllbnRzLCBwcm9qZWN0TmFtZSwgcHJvamVjdElkKSB7XHJcbiAgICBjb25zdCByZXF1ZXN0ID0gZmV0Y2goJ2h0dHBzOi8vdXMtY2VudHJhbDEtdGVzdGdkcHJvamVjdC0xNTcwMDM2NDM5OTMxLmNsb3VkZnVuY3Rpb25zLm5ldC9zZW5kTWFpbCcsIHtcclxuICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXHJcbiAgICAgIH0sXHJcbiAgICAgIC8vIGJvZHkgZGF0YSB0eXBlIG11c3QgbWF0Y2ggXCJDb250ZW50LVR5cGVcIiBoZWFkZXIuXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgc2hhcmVyLCByZWNpcGllbnRzLCBwcm9qZWN0TmFtZSwgcHJvamVjdElkIH0pXHJcbiAgICB9KTtcclxuICAgIHJlcXVlc3QudGhlbihyZXMgPT4ge1xyXG4gICAgICBjb25zb2xlLmxvZyhyZXMpO1xyXG4gICAgICAvLyBpZiAocmVzLm9rID09PSB0cnVlICYmIHJlcy5zdGF0dXMgPT09IDIwMCkge1xyXG4gICAgICAvLyAgIGNvbnNvbGUubG9nKCdTZW5kIHN1Y2Nlc3NmdWwuJyk7XHJcbiAgICAgIC8vIH1cclxuICAgIH0sIGVyciA9PiB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHJlcXVlc3Q7XHJcbiAgfVxyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogU2VuZHMgYSBwdXNoIG5vdGlmaWNhdGlvbiB0byBhIHVzZXIgaWRlbnRpZmllZCBieSBoaXMvaGVyIGVtYWlsIGFkZHJlc3MuXHJcbiAgICogSXQgdXNlcyB0aGUgRmlyZWJhc2UgZGF0YWJhc2UgdG8gb2J0YWluIHRoZSBkZXZpY2UgdG9rZW5zIGFzc29jaWF0ZWQgdG8gZWFjaCBlbWFpbCBhZGRyZXNzLlxyXG4gICAqIEBwYXJhbSB7U3RyaW5nW119IGVtYWlscyBhcnJheSBvZiBlbWFpbHMgb2YgdGhlIHVzZXJzIHRvIHNlbmQgdGhlIG5vdGlmaWNhdGlvbiB0by5cclxuICAgKiBAcGFyYW0ge1N0cmluZ30gYXV0aG9yIG5hbWUgb2YgdGhlIGF1dGhvciB0aGF0IGdlbmVyYXRlZCB0aGUgbm90aWZpY2F0aW9uLlxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBwaG90b0xpbmsgdXJsIG9mIHRoZSBpbWFnZSB0byBpZGVudGlmeSB0aGUgbWVzc2FnZS5cclxuICAgKiBAcGFyYW0ge1N0cmluZ30gdGV4dCB0aGUgdGV4dHVhbCBjb250ZW50IG9mIHRoZSBub3RpZmljYXRpb24gbWVzc2FnZS5cclxuICAgKiBAcGFyYW0ge1N0cmluZ30gcHJvamVjdE5hbWUgdGhlIG5hbWUgb2YgdGhlIHByb2plY3QgZm9yIHdoaWNoIHRoZSBub3RpZmljYXRpb24gaXMgc2VudC5cclxuICAgKiBAcGFyYW0ge1N0cmluZ30gcHJvamVjdElkIHRoZSBpZCBvZiB0aGUgcHJvamVjdCBmb3Igd2hpY2ggdGhlIG5vdGlmaWNhdGlvbiBpcyBzZW50LlxyXG4gICAqL1xyXG4gIHN0YXRpYyBzZW5kTm90aWZpY2F0aW9uKGVtYWlscywgYXV0aG9yLCBwaG90b0xpbmssIHRleHQsIHByb2plY3ROYW1lLCBwcm9qZWN0SWQpIHtcclxuICAgIGNvbnN0IHJlcXVlc3QgPSBmZXRjaCgnaHR0cHM6Ly91cy1jZW50cmFsMS10ZXN0Z2Rwcm9qZWN0LTE1NzAwMzY0Mzk5MzEuY2xvdWRmdW5jdGlvbnMubmV0L3NlbmRQdXNoTm90aWZpY2F0aW9uJywge1xyXG4gICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcclxuICAgICAgfSxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBlbWFpbHMsIGF1dGhvciwgcGhvdG9MaW5rLCB0ZXh0LCBwcm9qZWN0TmFtZSwgcHJvamVjdElkIH0pIC8vIGJvZHkgZGF0YSB0eXBlIG11c3QgbWF0Y2ggXCJDb250ZW50LVR5cGVcIiBoZWFkZXJcclxuICAgIH0pO1xyXG4gICAgcmVxdWVzdC50aGVuKHJlcyA9PiB7XHJcbiAgICAgIGNvbnNvbGUubG9nKHJlcyk7XHJcbiAgICAgIC8vIGlmIChyZXMub2sgPT09IHRydWUgJiYgcmVzLnN0YXR1cyA9PT0gMjAwKSB7XHJcbiAgICAgIC8vICAgY29uc29sZS5sb2coJ1NlbmQgc3VjY2Vzc2Z1bC4nKTtcclxuICAgICAgLy8gfVxyXG4gICAgfSwgZXJyID0+IHtcclxuICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gcmVxdWVzdDtcclxuICB9XHJcblxyXG5cclxuICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuICAvKioqKioqKioqKioqKioqKiogQVBQTElDQVRJT04gU1BFQ0lGSUMgRlVOQ1RJT05TICoqKioqKioqKioqKioqKioqKi9cclxuICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbiAgLyoqXHJcbiAgICogQ3JlYXRlcyBhIG5ldyBwcm9qZWN0IGZvbGRlciBhbmQgYSBzdWJ0cnVjdHVyZSB3aXRoIGFsbCB0aGUgY29udGVudHMgb2YgdGhlIHByb2plY3Qgb24gdGhlIGZpbGUuXHJcbiAgICogQHBhcmFtIHtGaWxlfSBmaWxlIFRoZSBWaXN1YWxBUlEgRHJhd2luZ3MgZmlsZSBjcmVhdGVkIGJ5IHRoZSBleHBvcnRlci5cclxuICAgKiBAcGFyYW0ge09iamVjdH0gQXBwRGF0YSBUaGUgQXBwRGF0YSBvYmplY3QgdGhhdCBjb250YWlucyBpbmZvIGFib3V0IHRoZSBhcHAgcmVzb3VyY2VzLlxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBsYXN0VXBsb2FkZWRQcm9qZWN0IE9iamVjdCB3aXRoIHRoZSBjb250ZW50cyBvZiB0aGUgbGFzdCB1cGxvYWRlZCBwcm9qZWN0LlxyXG4gICAqL1xyXG4gIHN0YXRpYyBhc3luYyBjcmVhdGVQcm9qZWN0KGZpbGUsIEFwcERhdGEsIGxhc3RVcGxvYWRlZFByb2plY3QpIHtcclxuICAgIC8vIEVycm9yIG1lc3NhZ2Ugd2lsbCBiZSBzdG9yZWQgaGVyZSBpZiBuZWVkZWQuXHJcbiAgICBsZXQgZXJyb3JNc2c7XHJcblxyXG4gICAgY29uc3QgZmlsZUNvbnRlbnRSYXcgPSBhd2FpdCBHZW5lcmljcy5yZWFkSW5wdXRGaWxlKGZpbGUpO1xyXG4gICAgY29uc3QgZmlsZUNvbnRlbnQgPSBKU09OLnBhcnNlKGZpbGVDb250ZW50UmF3KTtcclxuICAgIGNvbnNvbGUubG9nKCdGaWxlIGNvbnRlbnRzOicsIGZpbGVDb250ZW50KTtcclxuICAgIC8vIFRPRE86IENoZWNrIGlmIHRoZSBmaWxlIGlzIHZhbGlkLi4uIG1pbmltdW0gcmVxdWlyZWQgZmllbGRzPyBjb250ZW50cz8uLi5cclxuXHJcbiAgICAvLyBUaGUgY29udGVudHMgb2YgdGhlIGZpbGUgaWYgdmFsaWQgd2lsbCBiZSBzYXZlZCBpbiB0aGUgbGFzdFVwbG9hZGVkUHJvamVjdCB2YXJpYWJsZSB0byBiZSB1c2VkXHJcbiAgICAvLyB3aXRob3V0IHRoZSBuZWVkIHRvIGZldGNoIHRoZW0uIFRoaXMgYWxsb3dzIHRvIHZpZXcgdGhlIHByb2plY3QgZXZlbiB3aXRob3V0IGludGVybmV0IGNvbm5leGlvbi5cclxuICAgIGxhc3RVcGxvYWRlZFByb2plY3QubmFtZSA9IGZpbGVDb250ZW50LnByb2plY3RJbmZvLnRpdGxlO1xyXG5cclxuICAgIC8vIENoZWNrIGlmIHRoZSBpZCBvZiB0aGUgYXBwTWFpbkZvbGRlciBpcyBpbiB0aGUgYXBwRGF0YSBnbG9iYWwgb2JqZWN0LlxyXG4gICAgLy8gSWYgdGhlcmUgaXMgbm9uZSB0aGVuIHRyeSB0byBnZXQgaXQsIGFuZCBpZiB0aGVyZSBpcyBub25lIG9uZSBzaG91bGQgYmUgY3JlYXRlZC5cclxuICAgIGlmICghQXBwRGF0YS5hcHBNYWluRm9sZGVySWQpIHtcclxuICAgICAgY29uc3QgYXBwTWFpbkZvbGRlclJlcyA9IGF3YWl0IHRoaXMubGlzdEZpbGVzKHsgbmFtZTogJ1ZBdmlld2VyRGF0YScsIG9ubHlGb2xkZXI6IHRydWUsIHRyYXNoZWQ6IGZhbHNlIH0pO1xyXG4gICAgICBjb25zdCBhcHBNYWluRm9sZGVyRGF0YSA9IGFwcE1haW5Gb2xkZXJSZXMucmVzdWx0LmZpbGVzO1xyXG4gICAgICBpZiAoYXBwTWFpbkZvbGRlckRhdGEgJiYgYXBwTWFpbkZvbGRlckRhdGEubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIEFwcERhdGEuYXBwTWFpbkZvbGRlcklkID0gYXBwTWFpbkZvbGRlckRhdGFbMF0uaWQ7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy8gVE9ETzogVGhpcyBzaG91bGQgcmV0dXJuIGEgcHJvbWlzZSB0byBrbm93IGlmIHNvbWV0aGluZyB3ZW50IHdyb25nLlxyXG4gICAgICAgIGNvbnN0IGFwcE1haW5Gb2xkZXJSZXMgPSBhd2FpdCB0aGlzLmNyZWF0ZUZvbGRlcignVkF2aWV3ZXJEYXRhJyk7XHJcbiAgICAgICAgQXBwRGF0YS5hcHBNYWluRm9sZGVySWQgPSBKU09OLnBhcnNlKGFwcE1haW5Gb2xkZXJSZXMuYm9keSkuaWQ7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ05vIGFwcEZvbGRlciBmb3VuZCwgb25lIGlzIGdvaW5nIHRvIGJlIGNyZWF0ZWQuJyk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBsZXQgcHJvamVjdEZvbGRlcklkO1xyXG5cclxuICAgIC8vIENoZWNrIGlmIHRoZXJlIGlzIGFscmVhZHkgYSBwcm9qZWN0IHdpdGggdGhpcyBuYW1lIGluIHRoZSBhcHBEYXRhIG9iamVjdC5cclxuICAgIGlmIChBcHBEYXRhLnByb2plY3RzRGF0YSA9PT0gdW5kZWZpbmVkIHx8ICFBcHBEYXRhLnByb2plY3RzRGF0YS5maW5kKHByb2ogPT4gcHJvai5uYW1lID09PSBmaWxlQ29udGVudC5wcm9qZWN0SW5mby50aXRsZSkpIHtcclxuICAgICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBmb2xkZXJDcmVhdGlvblByb21pc2UgPSBhd2FpdCB0aGlzLmNyZWF0ZUZvbGRlcihmaWxlQ29udGVudC5wcm9qZWN0SW5mby50aXRsZSwgQXBwRGF0YS5hcHBNYWluRm9sZGVySWQpO1xyXG4gICAgICAgIHByb2plY3RGb2xkZXJJZCA9IEpTT04ucGFyc2UoZm9sZGVyQ3JlYXRpb25Qcm9taXNlLmJvZHkpLmlkO1xyXG4gICAgICAgIGxhc3RVcGxvYWRlZFByb2plY3QuaWQgPSBwcm9qZWN0Rm9sZGVySWQ7XHJcbiAgICAgICAgY29uc3QgcHJvamVjdEZvbGRlckRhdGEgPSB7IGlkOiBwcm9qZWN0Rm9sZGVySWQsIG5hbWU6IGZpbGVDb250ZW50LnByb2plY3RJbmZvLnRpdGxlIH07XHJcbiAgICAgICAgaWYgKEFwcERhdGEucHJvamVjdHNEYXRhID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgIEFwcERhdGEucHJvamVjdHNEYXRhID0gW3Byb2plY3RGb2xkZXJEYXRhXTtcclxuICAgICAgICB9IGVsc2UgaWYgKCFBcHBEYXRhLnByb2plY3RzRGF0YS5maW5kKHByb2ogPT4gcHJvai5uYW1lID09PSBmaWxlQ29udGVudC5wcm9qZWN0SW5mby50aXRsZSkpIHtcclxuICAgICAgICAgIEFwcERhdGEucHJvamVjdHNEYXRhLnB1c2gocHJvamVjdEZvbGRlckRhdGEpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgICAgICBsYXN0VXBsb2FkZWRQcm9qZWN0LmlkID0gJ3RlbXBvcmFsJztcclxuICAgICAgICBlcnJvck1zZyA9IEpTT04ucGFyc2UoZXJyLmJvZHkpLmVycm9yLm1lc3NhZ2U7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSBpZiAoQXBwRGF0YS5wcm9qZWN0c0RhdGEuZmluZChwcm9qID0+IHByb2oubmFtZSA9PT0gZmlsZUNvbnRlbnQucHJvamVjdEluZm8udGl0bGUpKSB7XHJcbiAgICAgIC8vIFRPRE86IEluIGNhc2Ugbm90IGFsbCBwcm9qZWN0cyBhcmUgbG9hZGVkIGhvdyB0byBjaGVjayBpZiB0aGVyZSBpcyBhbHJlYWR5IG9uZSB3aXRoIHRoaXMgbmFtZSBpbiB0aGUgYmFja2VuZD9cclxuICAgICAgLy8gVE9ETzogSWYgdGhlcmUgaXMgb25lIGFscmVhZHksIHByb3ZpZGUgYW4gb3B0aW9uIHRvIHByb3Bvc2UgYW5vdGhlciBuYW1lLlxyXG4gICAgICBlcnJvck1zZyA9ICdObyBwcm9qZWN0IHdhcyBjcmVhdGVkIGJlY2F1c2UgdGhlcmUgaXMgYWxyZWFkeSBhIHByb2plY3Qgd2l0aCB0aGlzIG5hbWUuJztcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1Vua25vd24gZXJyb3Igd2hpbGUgYXR0ZW1wdGluZyB0byBjcmVhdGUgdGhlIHByb2plY3QgZm9sZGVyLicpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIENyZWF0ZSB0aGUgZHJhd2luZ3Mgc3ViZm9sZGVyIG9ubHkgaWYgdGhlcmUgYXJlIGRyYXdpbmdzIGFuZCBpZiB0aGUgcHJvamVjdCBmb2xkZXIgd2FzIGNyZWF0ZWQgc3VjY2VzZnVsbHkuXHJcbiAgICBpZiAocHJvamVjdEZvbGRlcklkICYmIGZpbGVDb250ZW50LmRyYXdpbmdzKSB7XHJcbiAgICAgIGNvbnN0IGRyYXdpbmdzRm9sZGVyUHJvbWlzZSA9IGF3YWl0IHRoaXMuY3JlYXRlRm9sZGVyKCdkcmF3aW5ncycsIHByb2plY3RGb2xkZXJJZCk7XHJcbiAgICAgIGNvbnN0IGRyYXdpbmdzRm9sZGVySWQgPSBKU09OLnBhcnNlKGRyYXdpbmdzRm9sZGVyUHJvbWlzZS5ib2R5KS5pZDtcclxuICAgICAgQXBwRGF0YS5wcm9qZWN0c0RhdGFbQXBwRGF0YS5wcm9qZWN0c0RhdGEubGVuZ3RoIC0gMV0uZHJhd2luZ3NGb2xkZXJJZCA9IGRyYXdpbmdzRm9sZGVySWQ7XHJcbiAgICAgIC8vIFRvIHN0b3JlIGFsbCB0aGUgdXBsb2FkIGRyYXdpbmdzIHByb21pc2VzLlxyXG4gICAgICBjb25zdCBkcmF3aW5nc1Byb21pc2VzID0gW107XHJcbiAgICAgIC8vIFZhcmlhYmxlIGZvciB0aGUgbGFzdCB1cGxvYWRlZCBkYXRhLlxyXG4gICAgICBsYXN0VXBsb2FkZWRQcm9qZWN0LmRyYXdpbmdzID0gW107XHJcbiAgICAgIGZvciAoY29uc3QgZHJhd2luZyBpbiBmaWxlQ29udGVudC5kcmF3aW5ncykge1xyXG4gICAgICAgIGNvbnN0IGRyYXdpbmdQcm9taXNlID0gdGhpcy51cGxvYWRGaWxlKGZpbGVDb250ZW50LmRyYXdpbmdzW2RyYXdpbmddLCAnaW1hZ2Uvc3ZnK3htbCcsIGRyYXdpbmcuY29uY2F0KCcuc3ZnJyksIGRyYXdpbmdzRm9sZGVySWQpO1xyXG4gICAgICAgIGRyYXdpbmdzUHJvbWlzZXMucHVzaChkcmF3aW5nUHJvbWlzZSk7XHJcbiAgICAgICAgLy8gU3RvcmUgb24gbGFzdFVwbG9hZGVkUHJvamVjdCB2YXJpYWJsZS5cclxuICAgICAgICBjb25zdCBkcmF3aW5nT2JqID0gbmV3IERyYXdpbmcoZHJhd2luZywgdW5kZWZpbmVkKTtcclxuICAgICAgICBkcmF3aW5nT2JqLnNldENvbnRlbnQoZmlsZUNvbnRlbnQuZHJhd2luZ3NbZHJhd2luZ10pO1xyXG4gICAgICAgIGxhc3RVcGxvYWRlZFByb2plY3QuZHJhd2luZ3MucHVzaChkcmF3aW5nT2JqKTtcclxuICAgICAgfVxyXG4gICAgICAvLyBSZXF1aXJlZCB0byBkZWNvZGUgdGhlIGJvZHkgb2YgdGhlIHJlc3BvbnNlLlxyXG4gICAgICBjb25zdCBkZWNvZGVyID0gbmV3IFRleHREZWNvZGVyKCd1dGYtOCcpO1xyXG4gICAgICBhd2FpdCBQcm9taXNlLmFsbChkcmF3aW5nc1Byb21pc2VzKS50aGVuKHJlc3BvbnNlcyA9PiB7XHJcbiAgICAgICAgcmVzcG9uc2VzLmZvckVhY2goKHJlcywgaSkgPT4ge1xyXG4gICAgICAgICAgaWYgKHJlcy5vayA9PT0gdHJ1ZSAmJiByZXMuc3RhdHVzID09PSAyMDApIHtcclxuICAgICAgICAgICAgcmVzLmJvZHkuZ2V0UmVhZGVyKCkucmVhZCgpLnRoZW4oKHsgdmFsdWUsIGRvbmUgfSkgPT4ge1xyXG4gICAgICAgICAgICAgIGNvbnN0IGlkID0gSlNPTi5wYXJzZShkZWNvZGVyLmRlY29kZSh2YWx1ZSkpLmlkO1xyXG4gICAgICAgICAgICAgIC8vIFNldCB0aGUgaWQgb2YgdGhlIGRyYXdpbmcgZmlsZSB0aGF0IGhhcyBiZWVuIGNyZWF0ZWQuXHJcbiAgICAgICAgICAgICAgbGFzdFVwbG9hZGVkUHJvamVjdC5kcmF3aW5nc1tpXS5pZCA9IGlkO1xyXG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdEcmF3aW5nIHdpdGggaWQgJyArIGlkICsgJyB1cGxvYWRlZCBzdWNjZXNzZnVsbHkuJyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9LCBlcnIgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQ3JlYXRlIHRoZSBlbGVtZW50c0RhdGEgc3ViZm9sZGVyIG9ubHkgaWYgdGhlcmUgaXMgZGF0YSBhbmQgaWYgdGhlIHByb2plY3QgZm9sZGVyIHdhcyBjcmVhdGVkIHN1Y2Nlc2Z1bGx5LlxyXG4gICAgaWYgKHByb2plY3RGb2xkZXJJZCAmJiBmaWxlQ29udGVudC5lbGVtZW50c0RhdGEpIHtcclxuICAgICAgY29uc3QgZWxlbWVudHNEYXRhRm9sZGVyUHJvbWlzZSA9IGF3YWl0IHRoaXMuY3JlYXRlRm9sZGVyKCdlbGVtZW50c0RhdGEnLCBwcm9qZWN0Rm9sZGVySWQpO1xyXG4gICAgICBjb25zdCBlbGVtZW50c0RhdGFGb2xkZXJJZCA9IEpTT04ucGFyc2UoZWxlbWVudHNEYXRhRm9sZGVyUHJvbWlzZS5ib2R5KS5pZDtcclxuICAgICAgQXBwRGF0YS5wcm9qZWN0c0RhdGFbQXBwRGF0YS5wcm9qZWN0c0RhdGEubGVuZ3RoIC0gMV0uZWxlbWVudHNEYXRhRm9sZGVySWQgPSBlbGVtZW50c0RhdGFGb2xkZXJJZDtcclxuICAgICAgLy8gU3RvcmUgb24gdGhlIGxhc3QgdXBsb2FkZWQgdmFyaWFibGUuXHJcbiAgICAgIGxhc3RVcGxvYWRlZFByb2plY3QuZWxlbWVudHNEYXRhID0gZmlsZUNvbnRlbnQuZWxlbWVudHNEYXRhO1xyXG4gICAgICAvLyBVcGxvYWQgdGhlIGVsZW1lbnRzIGRhdGEgZmlsZXMuXHJcbiAgICAgIGNvbnN0IGVsZW1lbnRzRGF0YVByb21pc2VzID0gW107XHJcbiAgICAgIGZvciAoY29uc3QgZWxlbWVudERhdGEgaW4gZmlsZUNvbnRlbnQuZWxlbWVudHNEYXRhKSB7XHJcbiAgICAgICAgY29uc3QgZWxlbWVudERhdGFQcm9taXNlID0gdGhpcy51cGxvYWRGaWxlKEpTT04uc3RyaW5naWZ5KGZpbGVDb250ZW50LmVsZW1lbnRzRGF0YVtlbGVtZW50RGF0YV0pLCAnYXBwbGljYXRpb24vanNvbicsIGVsZW1lbnREYXRhLmNvbmNhdCgnLmpzb24nKSwgZWxlbWVudHNEYXRhRm9sZGVySWQpO1xyXG4gICAgICAgIGVsZW1lbnRzRGF0YVByb21pc2VzLnB1c2goZWxlbWVudERhdGFQcm9taXNlKTtcclxuICAgICAgfVxyXG4gICAgICBhd2FpdCBQcm9taXNlLmFsbChlbGVtZW50c0RhdGFQcm9taXNlcylcclxuICAgICAgICAudGhlbihyZXMgPT4ge1xyXG4gICAgICAgICAgLy8gVE9ETzogSXMgaXQgbmVjZXNzYXJ5IHRvIGNoZWNrIGlmIGVhY2ggcmVzcG9uc2Ugd2FzIChyZXMub2sgPT09IHRydWUgJiYgcmVzLnN0YXR1cyA9PT0gMjAwKT9cclxuICAgICAgICAgIGNvbnNvbGUubG9nKCdFbGVtZW50c0RhdGEgZmlsZXMgdXBsb2FkZWQgc3VjY2Vzc2Z1bGx5LicpO1xyXG4gICAgICAgIH0sIGVyciA9PiB7XHJcbiAgICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gVE9ETzogQ2hlY2sgaW4gbW9yZSBkZXRhaWwgaWYgdGhlIHByb2plY3Qgd2FzIGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5LlxyXG4gICAgaWYgKHByb2plY3RGb2xkZXJJZCkge1xyXG4gICAgICBjb25zb2xlLmxvZygnVXBsb2FkIHN1Y2Nlc3NmdWwuIFVwbG9hZGVkICcgKyBPYmplY3Qua2V5cyhmaWxlQ29udGVudC5kcmF3aW5ncykubGVuZ3RoICsgJyBkcmF3aW5ncy4nKTtcclxuICAgICAgcmV0dXJuIHsgaWQ6IHByb2plY3RGb2xkZXJJZCwgbmFtZTogZmlsZUNvbnRlbnQucHJvamVjdEluZm8udGl0bGUgfTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIC8vIFRPRE86IElmIHRoZSBwcm9qZWN0IHVwbG9hZCBmYWlscyB0aGUgcHJvamVjdCBmb2xkZXIsIGlmIGNyZWF0ZWQsIHNob3VsZCBiZSBkZWxldGVkLlxyXG4gICAgICAvLyBUT0RPOiBDcmVhdGUgbWVzc2FnZSB3aXRoIGNvbnRlbnQ6IFJldHJ5IGFnYWluIG9yIHdvcmsgb2ZmbGluZSB3aXRoIHRoZSB1cGxvYWRlZCBwcm9qZWN0LlxyXG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCdQcm9qZWN0IHVwbG9hZCBmYWlsZWQuICcgKyBlcnJvck1zZykpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIExpc3RzIHRoZSBwcm9qZWN0IGl0ZW1zLlxyXG4gICAqIFRPRE86IExpbWl0IHRoZSBhbW91bnQgb2YgcHJvamVjdHMgdG8gZmV0Y2guXHJcbiAgICogQHBhcmFtIHtPYmplY3R9IEFwcERhdGEgVGhlIEFwcERhdGEgb2JqZWN0IHRoYXQgY29udGFpbnMgaW5mbyBhYm91dCB0aGUgYXBwIHJlc291cmNlcy5cclxuICAgKi9cclxuICBzdGF0aWMgYXN5bmMgbGlzdFByb2plY3RJdGVtcyhBcHBEYXRhKSB7XHJcbiAgICAvLyBHZXRzIHRoZSBpZCBvZiB0aGUgYXBwIGZvbGRlciB1c2luZyBpdHMgbmFtZSBpZiBpdCB3YXMgbm90IGFscmVhZHkgaW4gdGhlIGFwcERhdGEgb2JqZWN0LlxyXG4gICAgaWYgKCFBcHBEYXRhLmFwcE1haW5Gb2xkZXJJZCkge1xyXG4gICAgICBjb25zdCBhcHBNYWluRm9sZGVyUmVzID0gYXdhaXQgdGhpcy5saXN0RmlsZXMoeyBuYW1lOiAnVkF2aWV3ZXJEYXRhJywgb25seUZvbGRlcjogdHJ1ZSwgdHJhc2hlZDogZmFsc2UgfSk7XHJcbiAgICAgIGNvbnN0IGFwcE1haW5Gb2xkZXJEYXRhID0gYXBwTWFpbkZvbGRlclJlcy5yZXN1bHQuZmlsZXM7XHJcbiAgICAgIGlmIChhcHBNYWluRm9sZGVyRGF0YSAmJiBhcHBNYWluRm9sZGVyRGF0YS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgQXBwRGF0YS5hcHBNYWluRm9sZGVySWQgPSBhcHBNYWluRm9sZGVyRGF0YVswXS5pZDtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnTm8gYXBwRm9sZGVyIGZvdW5kLicpO1xyXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoJ05vIGFwcEZvbGRlciBmb3VuZC4nKSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBHZXRzIHRoZSBwcm9qZWN0IGZvbGRlcnMgbmFtZXMgYW5kIGlkcy5cclxuICAgIGNvbnN0IHByb2plY3RzRm9sZGVyc1JlcyA9IGF3YWl0IHRoaXMubGlzdEZpbGVzKHsgcGFyZW50SWQ6IEFwcERhdGEuYXBwTWFpbkZvbGRlcklkLCBvbmx5Rm9sZGVyOiB0cnVlLCBleGNsdWRlTmFtZTogJ2FwcFNldHRpbmdzJywgdHJhc2hlZDogZmFsc2UgfSwgJ3NoYXJlZCwgcGVybWlzc2lvbnMnKTtcclxuICAgIGxldCBuZXdQcm9qZWN0cztcclxuICAgIGNvbnN0IHByb2plY3RzRm9sZGVyc0RhdGEgPSBwcm9qZWN0c0ZvbGRlcnNSZXMucmVzdWx0LmZpbGVzO1xyXG4gICAgaWYgKHByb2plY3RzRm9sZGVyc0RhdGEgJiYgcHJvamVjdHNGb2xkZXJzRGF0YS5sZW5ndGggPiAwKSB7XHJcbiAgICAgIGlmIChBcHBEYXRhLnByb2plY3RzRGF0YSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgbmV3UHJvamVjdHMgPSBwcm9qZWN0c0ZvbGRlcnNEYXRhO1xyXG4gICAgICAgIEFwcERhdGEucHJvamVjdHNEYXRhID0gbmV3UHJvamVjdHM7XHJcbiAgICAgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShBcHBEYXRhLnByb2plY3RzRGF0YSkpIHtcclxuICAgICAgICBuZXdQcm9qZWN0cyA9IHByb2plY3RzRm9sZGVyc1Jlcy5yZXN1bHQuZmlsZXMuZmlsdGVyKG5ld1Byb2ogPT4gQXBwRGF0YS5wcm9qZWN0c0RhdGEuZmluZChwcm9qID0+IHByb2ouaWQgPT09IG5ld1Byb2ouaWQpID09PSB1bmRlZmluZWQpO1xyXG4gICAgICAgIG5ld1Byb2plY3RzLmZvckVhY2gocHJvaiA9PiB7XHJcbiAgICAgICAgICBBcHBEYXRhLnByb2plY3RzRGF0YS5wdXNoKHByb2opO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBjb25zb2xlLmFzc2VydChBcHBEYXRhLnByb2plY3RzRGF0YS5sZW5ndGggPiAwLCAnVGhlcmUgYXJlIG5vIHByb2plY3QgZm9sZGVycy4nKTtcclxuXHJcbiAgICAvLyBHZXRzIHRoZSBpZCBvZiB0aGUgYXBwU2V0dGluZ3MgZm9sZGVyLlxyXG4gICAgY29uc3QgYXBwU2V0dEZvbGRlclJlcyA9IGF3YWl0IHRoaXMubGlzdEZpbGVzKHsgcGFyZW50SWQ6IEFwcERhdGEuYXBwTWFpbkZvbGRlcklkLCBuYW1lOiAnYXBwU2V0dGluZ3MnLCBvbmx5Rm9sZGVyOiB0cnVlIH0pO1xyXG4gICAgY29uc3QgYXBwU2V0dEZvbGRlckRhdGEgPSBhcHBTZXR0Rm9sZGVyUmVzLnJlc3VsdC5maWxlcztcclxuICAgIGlmIChhcHBTZXR0Rm9sZGVyRGF0YSAmJiBhcHBTZXR0Rm9sZGVyRGF0YS5sZW5ndGggPiAwKSB7XHJcbiAgICAgIEFwcERhdGEuYXBwU2V0dGluZ3NGb2xkZXJJZCA9IGFwcFNldHRGb2xkZXJEYXRhWzBdLmlkO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29uc29sZS5sb2coJ05vIHNldHRpbmdzIGZvbGRlciBmb3VuZC4nKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBHZXRzIHRoZSBpZCBvZiB0aGUgcHJvamVjdHNUaHVtYnMgZm9sZGVyLlxyXG4gICAgY29uc3QgdGh1bWJzRm9sZGVyUmVzID0gYXdhaXQgdGhpcy5saXN0RmlsZXMoeyBwYXJlbnRJZDogQXBwRGF0YS5hcHBTZXR0aW5nc0ZvbGRlcklkLCBuYW1lOiAncHJvamVjdHNUaHVtYnMnLCBvbmx5Rm9sZGVyOiB0cnVlIH0pO1xyXG4gICAgY29uc3QgdGh1bWJzRm9sZGVyRGF0YSA9IHRodW1ic0ZvbGRlclJlcy5yZXN1bHQuZmlsZXM7XHJcbiAgICBpZiAodGh1bWJzRm9sZGVyRGF0YSAmJiB0aHVtYnNGb2xkZXJEYXRhLmxlbmd0aCA+IDApIHtcclxuICAgICAgQXBwRGF0YS50aHVtYnNGb2xkZXJJZCA9IHRodW1ic0ZvbGRlckRhdGFbMF0uaWQ7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25zb2xlLmxvZygnTm8gdGh1bWJzIGZvbGRlciBmb3VuZC4nKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBHZXRzIHRoZSBkYXRhIG9mIGVhY2ggdGh1bWJuYWlsIGFuZCBhc3NpZ24gaXQgdG8gaXRzIGNvcnJlc3BvbmRpbmcgcHJvamVjdC5cclxuICAgIGNvbnN0IGltZ1JlcyA9IGF3YWl0IHRoaXMubGlzdEZpbGVzKHsgcGFyZW50SWQ6IEFwcERhdGEudGh1bWJzRm9sZGVySWQgfSk7XHJcbiAgICBjb25zdCBpbWdEYXRhID0gaW1nUmVzLnJlc3VsdC5maWxlcztcclxuICAgIEFwcERhdGEucHJvamVjdHNEYXRhLmZvckVhY2gocHJvaiA9PiB7XHJcbiAgICAgIGNvbnN0IHByb2plY3RUaHVtYkRhdGEgPSBpbWdEYXRhLmZpbmQoaW1nID0+IHByb2ouaWQgPT09IGltZy5uYW1lLnJlcGxhY2UoJy5qcGcnLCAnJykpO1xyXG4gICAgICBpZiAocHJvamVjdFRodW1iRGF0YSkge1xyXG4gICAgICAgIHByb2oudGh1bWJJZCA9IHByb2plY3RUaHVtYkRhdGEuaWQ7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgY29uc29sZS5hc3NlcnQoaW1nRGF0YS5sZW5ndGggPiAwLCAnVGhlcmUgYXJlIG5vIHRodW1ibmFpbHMuJyk7XHJcblxyXG4gICAgLy8gVE9ETzogTWlzc2luZyB0aGUgbWFuYWdlbWVudCBvZiBhbiBlcnJvciB3aGlsZSBsaXN0aW5nIHRoZSBwcm9qZWN0cy5cclxuXHJcbiAgICAvLyBJZiBhbGwgdGhlIHJlcXVpcmVkIGRhdGEgYWJvdXQgdGhlIHByb2plY3RzIHdhcyBmZXRjaGVkIHN1Y2Nlc3NmdWxseSBpdCBpcyByZXR1cm5lZC5cclxuICAgIHJldHVybiBuZXdQcm9qZWN0cztcclxuICB9XHJcblxyXG5cclxuICAvKipcclxuICAgKiBGZXRjaGVzIHRoZSBwcm9qZWN0IGNvbnRlbnRzLiBTcGVjaWZpY2FsbHkgdGhlIGlkIGFuZCB0aGUgbmFtZSBvZiBhbGwgdGhlIGRyYXdpbmdzIGFuZCBlbGVtZW50c0RhdGEgZmlsZXMuXHJcbiAgICogSXQgb25seSBmZXRjaGVzIHRoZSByZXNvdXJjZXMgdGhhdCBhcmUgbm90IGFscmVhZHkgaW4gdGhlIGFwcERhdGEgb2JqZWN0LlxyXG4gICAqIFRPRE86IEltcHJvdmUgdGhlIGRldGVjdGlvbiBvZiByZXNvdXJjZXMgdGhhdCBzaG91bGQgYmUgZmV0Y2hlZC4gQ3VycmVudGx5IGlmIHRoZXJlIGlzIGFscmVhZHkgYW55IHByb2plY3RcclxuICAgKiBkYXRhIGZvciB0aGF0IGNhdGVnb3J5IChlLmc6IGRyYXdpbmdzKSBpbiB0aGUgZnJvbnQgaXQgZG9lbnN0IGZldGNoIGFueSBuZXcgZmlsZSBvZiB0aGF0IGNhdGVnb3J5LlxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBwcm9qZWN0SWQgVGhlIGlkIG9mIHRoZSBwcm9qZWN0LlxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBBcHBEYXRhIFRoZSBBcHBEYXRhIG9iamVjdCB0aGF0IGNvbnRhaW5zIGluZm8gYWJvdXQgdGhlIGFwcCByZXNvdXJjZXMuXHJcbiAgICovXHJcbiAgc3RhdGljIGFzeW5jIGZldGNoUHJvamVjdChwcm9qZWN0SWQsIEFwcERhdGEpIHtcclxuICAgIGNvbnNvbGUubG9nKCdGZXRjaGluZyBwcm9qZWN0OiAnICsgcHJvamVjdElkKTtcclxuXHJcbiAgICBsZXQgcHJvamVjdEluZGV4O1xyXG4gICAgLy8gSW4gY2FzZSB0aGUgcHJvamVjdHNEYXRhIGVudHJ5IGlzIHN0aWxsIHVuZGVmaW5lZCB0aGlzIHdpbGwgYmUgdGhlIGZpcnN0IHByb2plY3QgdG8gYmUgZmV0Y2hlZC5cclxuICAgIC8vIFRoaXMgd2lsbCBoYXBwZW4gd2hlbiBzb21lb25lIGFjY2VzcyBhIHByb2plY3QgZGlyZWN0bHkgd2l0aCBpdHMgaWQgaW4gdGhlIHVybC5cclxuICAgIGlmIChBcHBEYXRhLnByb2plY3RzRGF0YSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgIGNvbnN0IHByb2plY3ROYW1lUmVzID0gYXdhaXQgdGhpcy5nZXRGaWxlRGF0YShwcm9qZWN0SWQsICduYW1lLCB0cmFzaGVkJyk7XHJcbiAgICAgIGlmICghSlNPTi5wYXJzZShwcm9qZWN0TmFtZVJlcy5ib2R5KS50cmFzaGVkKSB7XHJcbiAgICAgICAgQXBwRGF0YS5wcm9qZWN0c0RhdGEgPSBbeyBpZDogcHJvamVjdElkLCBuYW1lOiBKU09OLnBhcnNlKHByb2plY3ROYW1lUmVzLmJvZHkpLm5hbWUgfV07XHJcbiAgICAgICAgcHJvamVjdEluZGV4ID0gMDtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIGlmIChwcm9qZWN0SWQgIT09ICd0ZW1wb3JhbCcpIHtcclxuICAgICAgcHJvamVjdEluZGV4ID0gQXBwRGF0YS5wcm9qZWN0c0RhdGEuZmluZEluZGV4KHByb2ogPT4gcHJvai5pZCA9PT0gcHJvamVjdElkKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBHZXRzIHRoZSBwcm9qZWN0IHRlYW0gbWVtYmVycyBkYXRhIGFuZCBhZGRzIGl0IHRvIHRoZSBjb3JyZXNwb25kaW5nIHByb2plY3REYXRhIG9iamVjdC5cclxuICAgIGlmIChwcm9qZWN0SW5kZXggPj0gMCAmJiAhQXBwRGF0YS5wcm9qZWN0c0RhdGFbcHJvamVjdEluZGV4XS5wZXJtaXNzaW9ucykge1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHByb2pQZXJtaXNzaW9uc1JlcyA9IGF3YWl0IHRoaXMuZ2V0UHJvamVjdFRlYW1EYXRhKHByb2plY3RJZCk7XHJcbiAgICAgICAgY29uc3QgcHJvalBlcm1pc3Npb25zRGF0YSA9IHByb2pQZXJtaXNzaW9uc1Jlcy5yZXN1bHQucGVybWlzc2lvbnM7XHJcbiAgICAgICAgaWYgKHByb2pQZXJtaXNzaW9uc0RhdGEgJiYgcHJvalBlcm1pc3Npb25zRGF0YS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICBBcHBEYXRhLnByb2plY3RzRGF0YVtwcm9qZWN0SW5kZXhdLnBlcm1pc3Npb25zID0gcHJvalBlcm1pc3Npb25zRGF0YTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgY29uc29sZS5sb2coJ05vIHByb2plY3QgdGVhbSBtZW1iZXJzIGZvdW5kLicpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnRXJyb3IgZmV0Y2hpbmcgdGhlIHRlYW0gbWVtYmVycyBkYXRhLicpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gSWYgdGhlcmUgaXMgbm8gZGF0YSBmb3IgcHJvamVjdFNldHRpbmdzLmpzb24gZmlsZSBpbiB0aGUgYXBwRGF0YSB5ZXQgZmV0Y2ggaXQuXHJcbiAgICBpZiAocHJvamVjdEluZGV4ID49IDAgJiYgIUFwcERhdGEucHJvamVjdHNEYXRhW3Byb2plY3RJbmRleF0ucHJvalNldHRpbmdzKSB7XHJcbiAgICAgIGNvbnN0IHByb2pTZXR0aW5nc1JlcyA9IGF3YWl0IHRoaXMubGlzdEZpbGVzKHsgcGFyZW50SWQ6IHByb2plY3RJZCwgbmFtZTogJ3Byb2plY3RTZXR0aW5ncy5qc29uJyB9KTtcclxuICAgICAgY29uc3QgcHJvalNldHRpbmdzRGF0YSA9IHByb2pTZXR0aW5nc1Jlcy5yZXN1bHQuZmlsZXM7XHJcbiAgICAgIGlmIChwcm9qU2V0dGluZ3NEYXRhICYmIHByb2pTZXR0aW5nc0RhdGEubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIGNvbnN0IHByb2pTZXR0aW5nc0NvbnRlbnRSZXMgPSBhd2FpdCB0aGlzLmdldEZpbGVDb250ZW50KHByb2pTZXR0aW5nc0RhdGFbMF0uaWQpO1xyXG4gICAgICAgIEFwcERhdGEucHJvamVjdHNEYXRhW3Byb2plY3RJbmRleF0ucHJvalNldHRpbmdzID0gcHJvalNldHRpbmdzQ29udGVudFJlcy5ib2R5O1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdObyBwcm9qZWN0U2V0dGluZ3MuanNvbiBmb3VuZC4nKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIElmIHRoZXJlIGlzIG5vIGRhdGEgZm9yIGRyYXdpbmdzIGFscmVhZHkgZmV0Y2ggdGhlIGlkIG9mIHRoZSBkcmF3aW5ncyBmb2xkZXIgYW5kIHRoZSBuYW1lIGFuZCBpZCBvZiBlYWNoIG9uZS5cclxuICAgIGlmIChwcm9qZWN0SW5kZXggPj0gMCAmJiAhQXBwRGF0YS5wcm9qZWN0c0RhdGFbcHJvamVjdEluZGV4XS5kcmF3aW5ncykge1xyXG4gICAgICBjb25zdCBkcmF3aW5nc0ZvbGRlclJlcyA9IGF3YWl0IHRoaXMubGlzdEZpbGVzKHsgcGFyZW50SWQ6IHByb2plY3RJZCwgb25seUZvbGRlcjogdHJ1ZSwgbmFtZTogJ2RyYXdpbmdzJyB9KTtcclxuICAgICAgY29uc3QgZHJhd2luZ3NGb2xkZXJEYXRhID0gZHJhd2luZ3NGb2xkZXJSZXMucmVzdWx0LmZpbGVzO1xyXG4gICAgICBpZiAoZHJhd2luZ3NGb2xkZXJEYXRhICYmIGRyYXdpbmdzRm9sZGVyRGF0YS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgY29uc3QgZHJhd2luZ3NSZXMgPSBhd2FpdCB0aGlzLmxpc3RGaWxlcyh7IHBhcmVudElkOiBkcmF3aW5nc0ZvbGRlckRhdGFbMF0uaWQsIHRyYXNoZWQ6IGZhbHNlIH0pO1xyXG4gICAgICAgIEFwcERhdGEucHJvamVjdHNEYXRhW3Byb2plY3RJbmRleF0uZHJhd2luZ3MgPSBbXTtcclxuICAgICAgICBkcmF3aW5nc1Jlcy5yZXN1bHQuZmlsZXMuZm9yRWFjaChkcmF3aW5nID0+IHtcclxuICAgICAgICAgIGlmIChkcmF3aW5nLm5hbWUgPT09ICdkcmF3aW5nc1N0eWxlcy5jc3MnKSB7XHJcbiAgICAgICAgICAgIEFwcERhdGEucHJvamVjdHNEYXRhW3Byb2plY3RJbmRleF0uZHJhd2luZ3NTdHlsZXNJZCA9IGRyYXdpbmcuaWQ7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBBcHBEYXRhLnByb2plY3RzRGF0YVtwcm9qZWN0SW5kZXhdLmRyYXdpbmdzLnB1c2gobmV3IERyYXdpbmcoZHJhd2luZy5uYW1lLnJlcGxhY2UoLy5zdmckLywgJycpLCBkcmF3aW5nLmlkKSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ05vIGRyYXdpbmdzIGZvbGRlciBmb3VuZC4nKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIElmIHRoZXJlIGlzIG5vIGRhdGEgZm9yIGVsZW1lbnRzRGF0YSBhbHJlYWR5IGZldGNoIHRoZSBpZCBvZiB0aGUgZWxlbWVudHNEYXRhIGZvbGRlciBhbmQgdGhlIG5hbWUgYW5kIGlkIG9mIGVhY2ggb25lLlxyXG4gICAgaWYgKHByb2plY3RJbmRleCA+PSAwICYmICFBcHBEYXRhLnByb2plY3RzRGF0YVtwcm9qZWN0SW5kZXhdLmVsZW1lbnRzRGF0YSkge1xyXG4gICAgICBjb25zdCBlbGVtZW50c0RhdGFGb2xkZXJSZXMgPSBhd2FpdCB0aGlzLmxpc3RGaWxlcyh7IHBhcmVudElkOiBwcm9qZWN0SWQsIG9ubHlGb2xkZXI6IHRydWUsIG5hbWU6ICdlbGVtZW50c0RhdGEnIH0pO1xyXG4gICAgICBjb25zdCBlbGVtZW50c0RhdGFGb2xkZXJEYXRhID0gZWxlbWVudHNEYXRhRm9sZGVyUmVzLnJlc3VsdC5maWxlcztcclxuICAgICAgaWYgKGVsZW1lbnRzRGF0YUZvbGRlckRhdGEgJiYgZWxlbWVudHNEYXRhRm9sZGVyRGF0YS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgY29uc3QgZWxlbWVudHNEYXRhUmVzID0gYXdhaXQgdGhpcy5saXN0RmlsZXMoeyBwYXJlbnRJZDogZWxlbWVudHNEYXRhRm9sZGVyRGF0YVswXS5pZCwgdHJhc2hlZDogZmFsc2UgfSk7XHJcbiAgICAgICAgQXBwRGF0YS5wcm9qZWN0c0RhdGFbcHJvamVjdEluZGV4XS5lbGVtZW50c0RhdGEgPSBlbGVtZW50c0RhdGFSZXMucmVzdWx0LmZpbGVzO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdObyBlbGVtZW50c0RhdGEgZm9sZGVyIGZvdW5kLicpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gSWYgdGhlcmUgaXMgbm8gZGF0YSBmb3IgY29tbWVudHMgaW4gdGhlIGFwcERhdGEgeWV0IGZldGNoIGl0LlxyXG4gICAgaWYgKHByb2plY3RJbmRleCA+PSAwICYmICFBcHBEYXRhLnByb2plY3RzRGF0YVtwcm9qZWN0SW5kZXhdLmNvbW1lbnRzKSB7XHJcbiAgICAgIC8vIFRPRE86IENvdWxkIGJlIHRoYXQgdGhlIGlkIG9mIHRoZSBmaWxlIGlzIGFscmVhZHkgaW4gdGhlIHByb2plY3RzRGF0YSBhbmQgbGlzdEZpbGVzIGlzIG5vIG5lY2Vzc2FyeT9cclxuICAgICAgY29uc3QgY29tbWVudHNSZXMgPSBhd2FpdCB0aGlzLmxpc3RGaWxlcyh7IHBhcmVudElkOiBwcm9qZWN0SWQsIG5hbWU6ICdjb21tZW50cy5qc29uJywgdHJhc2hlZDogZmFsc2UgfSk7XHJcbiAgICAgIGNvbnN0IGNvbW1lbnRzRGF0YSA9IGNvbW1lbnRzUmVzLnJlc3VsdC5maWxlcztcclxuICAgICAgaWYgKGNvbW1lbnRzRGF0YSAmJiBjb21tZW50c0RhdGEubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIEFwcERhdGEucHJvamVjdHNEYXRhW3Byb2plY3RJbmRleF0uY29tbWVudHNGaWxlSWQgPSBjb21tZW50c0RhdGFbMF0uaWQ7XHJcbiAgICAgICAgY29uc3QgY29tbWVudHNDb250ZW50UmVzID0gYXdhaXQgdGhpcy5nZXRGaWxlQ29udGVudChjb21tZW50c0RhdGFbMF0uaWQpO1xyXG4gICAgICAgIEFwcERhdGEucHJvamVjdHNEYXRhW3Byb2plY3RJbmRleF0uY29tbWVudHMgPSBKU09OLnBhcnNlKGNvbW1lbnRzQ29udGVudFJlcy5ib2R5KTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnTm8gY29tbWVudHMuanNvbiBmaWxlIGZvdW5kLicpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gSWYgdGhlcmUgaXMgbm8gZGF0YSBmb3IgaW1hZ2VzIGFscmVhZHkgZmV0Y2ggdGhlIGlkIG9mIHRoZSBpbWFnZXMgZm9sZGVyIGFuZCB0aGUgbmFtZSBhbmQgaWQgb2YgZWFjaCBvbmUuXHJcbiAgICBpZiAocHJvamVjdEluZGV4ID49IDAgJiYgIUFwcERhdGEucHJvamVjdHNEYXRhW3Byb2plY3RJbmRleF0uaW1hZ2VzKSB7XHJcbiAgICAgIGNvbnN0IGltYWdlc0ZvbGRlclJlcyA9IGF3YWl0IHRoaXMubGlzdEZpbGVzKHsgcGFyZW50SWQ6IHByb2plY3RJZCwgb25seUZvbGRlcjogdHJ1ZSwgbmFtZTogJ2ltYWdlcycgfSk7XHJcbiAgICAgIGNvbnN0IGltYWdlc0ZvbGRlckRhdGEgPSBpbWFnZXNGb2xkZXJSZXMucmVzdWx0LmZpbGVzO1xyXG4gICAgICBpZiAoaW1hZ2VzRm9sZGVyRGF0YSAmJiBpbWFnZXNGb2xkZXJEYXRhLmxlbmd0aCA+IDApIHtcclxuICAgICAgICBjb25zdCBpbWFnZXNSZXMgPSBhd2FpdCB0aGlzLmxpc3RGaWxlcyh7IHBhcmVudElkOiBpbWFnZXNGb2xkZXJEYXRhWzBdLmlkIH0pO1xyXG4gICAgICAgIEFwcERhdGEucHJvamVjdHNEYXRhW3Byb2plY3RJbmRleF0uaW1hZ2VzID0gaW1hZ2VzUmVzLnJlc3VsdC5maWxlcztcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnTm8gaW1hZ2VzIGZvbGRlciBmb3VuZC4nKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlmIChwcm9qZWN0SW5kZXggPj0gMCkge1xyXG4gICAgICBjb25zb2xlLmxvZygnUHJvamVjdCByZXNvdXJjZXMgZmV0Y2hlZCBzdWNjZXNmdWxseS4nKTtcclxuICAgICAgcmV0dXJuIEFwcERhdGEucHJvamVjdHNEYXRhW3Byb2plY3RJbmRleF07XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCdQcm9qZWN0IHJlc291cmNlcyBjb3VsZCBub3QgYmUgZmV0Y2hlZC4nKSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxufSIsImltcG9ydCBHZW5lcmljcyBmcm9tICcuL2dlbmVyaWNzJztcclxuXHJcbmV4cG9ydCBjbGFzcyBDb21tZW50IHtcclxuICBlbGVtZW50c0lkczogc3RyaW5nW10gPSBbXTtcclxuICBjb250ZW50OiBzdHJpbmc7XHJcbiAgbWVudGlvbnM6IHN0cmluZ1tdO1xyXG4gIGlkOiBzdHJpbmc7XHJcbiAgcmVwcmVzZW50YXRpb25zOiBTVkdFbGVtZW50W10gPSBbXTtcclxuXHJcbiAgY29uc3RydWN0b3IoZWxlbWVudHNJZHM6IHN0cmluZ1tdLCBjb250ZW50OiBzdHJpbmcsIG1lbnRpb25zOiBzdHJpbmdbXSA9IFtdKSB7XHJcbiAgICB0aGlzLmVsZW1lbnRzSWRzLnB1c2goLi4uZWxlbWVudHNJZHMpO1xyXG4gICAgdGhpcy5jb250ZW50ID0gY29udGVudDtcclxuICAgIHRoaXMubWVudGlvbnMgPSBtZW50aW9ucztcclxuICAgIHRoaXMuaWQgPSAnYy0nICsgR2VuZXJpY3MudXVpZHY0KCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBDcmVhdGVzIGFuIHN2ZyByZXByZXNlbnRhdGlvbiBmb3IgdGhlIGNvbW1lbnQgb24gdGhlIHByb3ZpZGVkIGVsZW1lbnQgYW5kXHJcbiAgICogYWRkcyBpdCB0byB0aGUgZ3JvdXAgb2YgY29tbWVudCByZXByZXNlbnRhdGlvbnMgb24gdGhlIHN2ZyBkcmF3aW5nLlxyXG4gICAqIEBwYXJhbSB7U1ZHR0VsZW1lbnR9IGNvbW1lbnRzR3JvdXBcclxuICAgKiBAcGFyYW0ge1NWR0VsZW1lbnR9IGVsZW1lbnQgXHJcbiAgICovXHJcbiAgLy8gY3JlYXRlUmVwcmVzZW50YXRpb24oY29tbWVudHNHcm91cCwgZWxlbWVudCkge1xyXG4gIC8vICAgY29uc3QgcmVwcmVzZW50YXRpb24gPSBHZW5lcmljcy5jcmVhdGVCQm94KGVsZW1lbnQsIDE1LCAxNSk7XHJcbiAgLy8gICAvLyBUT0RPOiB0aGUgc3R5bGUgdmFsdWVzIHdpbGwgY29tZSBmcm9tIHRoZSBhcHAgc2V0dGluZ3MgZmlsZSBpZiBhbnkuXHJcbiAgLy8gICByZXByZXNlbnRhdGlvbi5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgJ2ZpbGw6bm9uZTtzdHJva2U6I2UyMmEyYTtzdHJva2Utd2lkdGg6OHB4O3N0cm9rZS1kYXNoYXJyYXk6MTg7Jyk7XHJcbiAgLy8gICByZXByZXNlbnRhdGlvbi5kYXRhc2V0LmlkID0gdGhpcy5pZDtcclxuICAvLyAgIGNvbW1lbnRzR3JvdXAuYXBwZW5kQ2hpbGQocmVwcmVzZW50YXRpb24pO1xyXG4gIC8vICAgdGhpcy5yZXByZXNlbnRhdGlvbnMucHVzaChyZXByZXNlbnRhdGlvbik7XHJcbiAgLy8gfVxyXG5cclxuICAvKipcclxuICAgKiBSZXBsYWNlcyB0aGUgcHJldmlvdXMgb25lXHJcbiAgICovXHJcbiAgY3JlYXRlUmVwcmVzZW50YXRpb24oY29tbWVudHNHcm91cDogU1ZHR0VsZW1lbnQsIGVsZW1lbnRzOiBTVkdHRWxlbWVudFtdKSB7XHJcbiAgICAvLyBUT0RPIG5ldyBmdW5jdGlvblxyXG4gICAgY29uc3QgcmVjdGFuZ2xlcyA9IFtdO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBlbGVtZW50cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICByZWN0YW5nbGVzLnB1c2goR2VuZXJpY3MuY3JlYXRlQkJveDIoZWxlbWVudHNbaV0sIDE1KSk7XHJcbiAgICB9XHJcbiAgICBjb25zdCBzZWdtZW50cyA9IEdlbmVyaWNzLnJlY3RhbmdsZXNTaWxob3VldHRlKHJlY3RhbmdsZXMpO1xyXG4gICAgY29uc3QgcmVwcmVzZW50YXRpb24gPSBHZW5lcmljcy5zdmdQYXRoRnJvbUxpbmVzKHNlZ21lbnRzKTtcclxuICAgIHJlcHJlc2VudGF0aW9uLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCAnZmlsbDpub25lO3N0cm9rZTojZTIyYTJhO3N0cm9rZS13aWR0aDo4cHg7c3Ryb2tlLWRhc2hhcnJheTozMDtzdHJva2UtbGluZWNhcDpyb3VuZDsnKTtcclxuICAgIHJlcHJlc2VudGF0aW9uLmRhdGFzZXQuaWQgPSB0aGlzLmlkO1xyXG4gICAgY29tbWVudHNHcm91cC5hcHBlbmRDaGlsZChyZXByZXNlbnRhdGlvbik7XHJcbiAgICB0aGlzLnJlcHJlc2VudGF0aW9ucy5wdXNoKHJlcHJlc2VudGF0aW9uKTtcclxuICB9XHJcblxyXG5cclxuXHJcblxyXG59IiwiZXhwb3J0IGNsYXNzIE1haW5QYW5lbCB7XHJcbiAgY29uc3RydWN0b3IocGFuZWxzU3RvcmFnZSwgV29ya3NwYWNlKSB7XHJcbiAgICB0aGlzLnBhbmVsc1N0b3JhZ2UgPSBwYW5lbHNTdG9yYWdlO1xyXG5cclxuICAgIC8vIENyZWF0aW9uIG9mIEhUTUwgc3RydWN0dXJlLlxyXG4gICAgdGhpcy5wYW5lbENvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgdGhpcy5wYW5lbENvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdtYWluUGFuZWwnLCAncmlnaHQnKTtcclxuICAgIHRoaXMucGFuZWxHcmlwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICB0aGlzLnBhbmVsR3JpcC5jbGFzc0xpc3QuYWRkKCdwYW5lbC1ncmlwJyk7XHJcbiAgICB0aGlzLnBhbmVsQ29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMucGFuZWxHcmlwKTtcclxuICAgIHRoaXMucGFuZWxDb250ZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICB0aGlzLnBhbmVsQ29udGVudC5jbGFzc0xpc3QuYWRkKCdwYW5lbC1jb250ZW50Jyk7XHJcbiAgICB0aGlzLnBhbmVsSGVhZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICB0aGlzLnBhbmVsSGVhZGVyLmNsYXNzTGlzdC5hZGQoJ3BhbmVsLWhlYWRlcicpO1xyXG4gICAgdGhpcy5wYW5lbEJvZHkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgIHRoaXMucGFuZWxCb2R5LmNsYXNzTGlzdC5hZGQoJ3BhbmVsLWJvZHknKTtcclxuICAgIHRoaXMucGFuZWxGb290ZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgIHRoaXMucGFuZWxGb290ZXIuY2xhc3NMaXN0LmFkZCgncGFuZWwtZm9vdGVyJyk7XHJcbiAgICB0aGlzLnBhbmVsQ29udGVudC5hcHBlbmRDaGlsZCh0aGlzLnBhbmVsSGVhZGVyKTtcclxuICAgIHRoaXMucGFuZWxDb250ZW50LmFwcGVuZENoaWxkKHRoaXMucGFuZWxCb2R5KTtcclxuICAgIHRoaXMucGFuZWxDb250ZW50LmFwcGVuZENoaWxkKHRoaXMucGFuZWxGb290ZXIpO1xyXG4gICAgdGhpcy5wYW5lbENvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLnBhbmVsQ29udGVudCk7XHJcblxyXG5cclxuICAgIC8vIFRPRE8gUmVtb3ZlIHRoaXMgZXZlbnQgbGlzdGVuZXJzIHdoZW4gdGhlIHBhbmVsIGlzIGRlbGV0ZWQuXHJcbiAgICBXb3Jrc3BhY2Uud29ya3NwYWNlQ29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIGUgPT4ge1xyXG4gICAgICBpZiAodGhpcy5yZXNpemluZ1dpZHRoKSB7XHJcbiAgICAgICAgdGhpcy5yZXNpemVXaWR0aChlKTtcclxuICAgICAgfSBlbHNlIGlmICh0aGlzLnJlc2l6aW5nSGVpZ2h0KSB7XHJcbiAgICAgICAgdGhpcy5yZXNpemVIZWlnaHQoZSk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgV29ya3NwYWNlLndvcmtzcGFjZUNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgKCkgPT4geyAvLyBBZGQgYWxzbyB0aGUgc2FtZSBmb3IgbW91c2VsZWF2ZT9cclxuICAgICAgdGhpcy5yZXNpemluZ1dpZHRoID0gZmFsc2U7XHJcbiAgICAgIHRoaXMucmVzaXppbmdIZWlnaHQgPSBmYWxzZTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuYWN0aXZlU2VjdGlvbjtcclxuICAgIHRoaXMuaXNPcGVuO1xyXG4gICAgdGhpcy5wYW5lbFNpZGU7XHJcbiAgICB0aGlzLnNlY3Rpb25zID0gW107XHJcbiAgICB0aGlzLnNldEFjdGl2ZSA9IHRoaXMuc2V0QWN0aXZlLmJpbmQodGhpcyk7XHJcbiAgICB0aGlzLnBhbmVsSGVhZGVyLm9uY2xpY2sgPSBlID0+IHtcclxuICAgICAgY29uc3QgYnV0dG9uID0gZS50YXJnZXQuY2xvc2VzdCgnW2RhdGEtYnRuXScpO1xyXG4gICAgICBpZiAoYnV0dG9uICYmICFidXR0b24uY2xhc3NMaXN0LmNvbnRhaW5zKCdhY3RpdmUnKSlcclxuICAgICAgICB0aGlzLnNldEFjdGl2ZShidXR0b24uaW5uZXJUZXh0KTtcclxuICAgIH07XHJcbiAgICAvLyBNZWRpYSBicmVha3BvaW50IHRvIGRldGVybWluZSB0aGUgcGFuZWwgcG9zaXRpb24uXHJcbiAgICB0aGlzLm1lZGl1bUJyZWFrcG9pbnQgPSB3aW5kb3cubWF0Y2hNZWRpYSgnKG1heC13aWR0aDogNzAwcHgpJyk7XHJcbiAgICB0aGlzLnBhbmVsUG9zaXRvbiA9IHRoaXMucGFuZWxQb3NpdG9uLmJpbmQodGhpcyk7XHJcbiAgICB0aGlzLm1lZGl1bUJyZWFrcG9pbnQuYWRkTGlzdGVuZXIodGhpcy5wYW5lbFBvc2l0b24pO1xyXG4gICAgdGhpcy5wYW5lbFNpZGVzID0ge1xyXG4gICAgICByaWdodDogJ3InLFxyXG4gICAgICBib3R0b206ICdiJ1xyXG4gICAgfVxyXG4gICAgdGhpcy5wYW5lbFBvc2l0b24odGhpcy5tZWRpdW1CcmVha3BvaW50KTtcclxuICAgIC8vIFBhbmVsIGRpbWVuc2lvbnMgYW5kIHJlc2l6aW5nLlxyXG4gICAgdGhpcy5wYW5lbFdpZHRoID0gMjUwO1xyXG4gICAgdGhpcy5wYW5lbENvbnRhaW5lci5zdHlsZS5zZXRQcm9wZXJ0eShcIi0td2lkdGhcIiwgdGhpcy5wYW5lbFdpZHRoICsgJ3B4Jyk7XHJcbiAgICB0aGlzLnBhbmVsSGVpZ2h0ID0gMjAwO1xyXG4gICAgdGhpcy5wYW5lbENvbnRhaW5lci5zdHlsZS5zZXRQcm9wZXJ0eShcIi0taGVpZ2h0XCIsIHRoaXMucGFuZWxIZWlnaHQgKyAncHgnKTtcclxuICAgIHRoaXMucmVzaXppbmdXaWR0aCA9IGZhbHNlO1xyXG4gICAgdGhpcy5yZXNpemluZ0hlaWdodCA9IGZhbHNlO1xyXG4gICAgdGhpcy5zdGFydFg7XHJcbiAgICB0aGlzLnN0YXJ0V2lkdGg7XHJcbiAgICB0aGlzLnN0YXJ0WTtcclxuICAgIHRoaXMuc3RhcnRIZWlnaHQ7XHJcbiAgICB0aGlzLnBhbmVsR3JpcC5vbm1vdXNlZG93biA9IGUgPT4ge1xyXG4gICAgICBpZiAodGhpcy5wYW5lbFNpZGUgPT09IHRoaXMucGFuZWxTaWRlcy5yaWdodCkge1xyXG4gICAgICAgIHRoaXMucmVzaXppbmdXaWR0aCA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5yZXNpemluZ0hlaWdodCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuc3RhcnRYID0gZS5wYWdlWDtcclxuICAgICAgICB0aGlzLnN0YXJ0V2lkdGggPSB0aGlzLnBhbmVsV2lkdGg7XHJcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5wYW5lbFNpZGUgPT09IHRoaXMucGFuZWxTaWRlcy5ib3R0b20pIHtcclxuICAgICAgICB0aGlzLnJlc2l6aW5nSGVpZ2h0ID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLnJlc2l6aW5nV2lkdGggPSBmYWxzZTtcclxuICAgICAgICB0aGlzLnN0YXJ0WSA9IGUucGFnZVk7XHJcbiAgICAgICAgdGhpcy5zdGFydEhlaWdodCA9IHRoaXMucGFuZWxIZWlnaHQ7XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgICBXb3Jrc3BhY2Uud29ya3NwYWNlQ29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMucGFuZWxDb250YWluZXIpO1xyXG4gIH1cclxuXHJcbiAgcmVzaXplV2lkdGgobW91c2VFdmVudCkge1xyXG4gICAgdGhpcy5wYW5lbFdpZHRoID0gdGhpcy5zdGFydFdpZHRoIC0gKG1vdXNlRXZlbnQucGFnZVggLSB0aGlzLnN0YXJ0WCk7XHJcbiAgICB0aGlzLnBhbmVsQ29udGFpbmVyLnN0eWxlLnNldFByb3BlcnR5KFwiLS13aWR0aFwiLCB0aGlzLnBhbmVsV2lkdGggKyAncHgnKTtcclxuICB9XHJcblxyXG4gIHJlc2l6ZUhlaWdodChtb3VzZUV2ZW50KSB7XHJcbiAgICB0aGlzLnBhbmVsSGVpZ2h0ID0gdGhpcy5zdGFydEhlaWdodCAtIChtb3VzZUV2ZW50LnBhZ2VZIC0gdGhpcy5zdGFydFkpO1xyXG4gICAgdGhpcy5wYW5lbENvbnRhaW5lci5zdHlsZS5zZXRQcm9wZXJ0eShcIi0taGVpZ2h0XCIsIHRoaXMucGFuZWxIZWlnaHQgKyAncHgnKTtcclxuICB9XHJcblxyXG4gIG9wZW4oKSB7XHJcbiAgICB0aGlzLnBhbmVsQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ29wZW4nKTtcclxuICAgIHRoaXMucGFuZWxQb3NpdG9uKHRoaXMubWVkaXVtQnJlYWtwb2ludCk7XHJcbiAgICB0aGlzLmlzT3BlbiA9IHRydWU7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHRoaXMucGFuZWxDb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZSgnb3BlbicpO1xyXG4gICAgdGhpcy5pc09wZW4gPSBmYWxzZTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIERvY2tzIHRoZSBwYW5lbCBvbiB0aGUgc3BlY2lmaWVkIHNpZGUuXHJcbiAgICogQHBhcmFtIHtPYmplY3QgZmllbGR9IHNpZGUgVXNlIHRoZSBNYWluUGFuZWwucGFuZWxzU2lkZXMgZmllbGRzLlxyXG4gICAqL1xyXG4gIGRvY2tUbyhzaWRlKSB7XHJcbiAgICBpZiAoc2lkZSA9PT0gdGhpcy5wYW5lbFNpZGVzLnJpZ2h0KSB7XHJcbiAgICAgIHRoaXMucGFuZWxTaWRlID0gc2lkZTtcclxuICAgICAgdGhpcy5wYW5lbENvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKCdib3R0b20nKTtcclxuICAgICAgdGhpcy5wYW5lbENvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdyaWdodCcpO1xyXG4gICAgICB0aGlzLnBhbmVsQm9keS5jaGlsZE5vZGVzLmZvckVhY2goY29udGVudCA9PiB7XHJcbiAgICAgICAgY29udGVudC5jbGFzc0xpc3QucmVtb3ZlKCdob3Jpem9udGFsJyk7XHJcbiAgICAgICAgY29udGVudC5jbGFzc0xpc3QuYWRkKCd2ZXJ0aWNhbCcpO1xyXG4gICAgICB9KTtcclxuICAgIH0gZWxzZSBpZiAoc2lkZSA9PT0gdGhpcy5wYW5lbFNpZGVzLmJvdHRvbSkge1xyXG4gICAgICB0aGlzLnBhbmVsU2lkZSA9IHNpZGU7XHJcbiAgICAgIHRoaXMucGFuZWxDb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZSgncmlnaHQnKTtcclxuICAgICAgdGhpcy5wYW5lbENvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdib3R0b20nKTtcclxuICAgICAgdGhpcy5wYW5lbEJvZHkuY2hpbGROb2Rlcy5mb3JFYWNoKGNvbnRlbnQgPT4ge1xyXG4gICAgICAgIGNvbnRlbnQuY2xhc3NMaXN0LnJlbW92ZSgndmVydGljYWwnKTtcclxuICAgICAgICBjb250ZW50LmNsYXNzTGlzdC5hZGQoJ2hvcml6b250YWwnKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBTZXRzIGEgc2VjdGlvbiBhcyBhY3RpdmUuXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IG5hbWUgVGhlIG5hbWUgb2YgdGhlIHNlY3Rpb24gdG8gYWN0aXZhdGUuXHJcbiAgICovXHJcbiAgc2V0QWN0aXZlKG5hbWUpIHtcclxuICAgIGlmICh0aGlzLmFjdGl2ZVNlY3Rpb24pXHJcbiAgICAgIHRoaXMuc2V0SW5hY3RpdmUodGhpcy5hY3RpdmVTZWN0aW9uKTtcclxuICAgIC8vIFRoaXMgbWVhbnMgdGhhdCBzZWN0aW9ucyBzaG91bGQgaGF2ZSB1bmlxdWUgbmFtZXMuXHJcbiAgICB0aGlzLmFjdGl2ZVNlY3Rpb24gPSB0aGlzLnNlY3Rpb25zLmZpbmQocyA9PiBzLm5hbWUgPT09IG5hbWUpO1xyXG4gICAgdGhpcy5hY3RpdmVTZWN0aW9uLmJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcclxuICAgIHRoaXMuYWN0aXZlU2VjdGlvbi5ib2R5LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogU2V0cyBhIHNlY3Rpb24gYXMgaW5hY3RpdmUsIHNvIGluIHRoZSBiYWNrLlxyXG4gICAqIElmIHRoZXJlIGlzIG9ubHkgb25lIGFuZCBpdCBpcyBpbmFjdGl2ZSB0aGUgYm9keSB3b250IGJlIHZpc2libGUuXHJcbiAgICogQHBhcmFtIHtPYmplY3R9IHNlY3Rpb24gU2VjdGlvbiBvYmplY3Qge25hbWU6IHN0cmluZywgYnV0dG9uOiBTcGFuRWxlbWVudCwgYm9keTogSFRNTEVsZW1lbnQgfVxyXG4gICAqL1xyXG4gIHNldEluYWN0aXZlKHNlY3Rpb24pIHtcclxuICAgIHNlY3Rpb24uYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xyXG4gICAgc2VjdGlvbi5ib2R5LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQWRkcyBhIG5ldyBzZWN0aW9uIHRvIHRoZSBwYW5lbCBjb250ZW50cyBhbmQgc2V0cyBpdCBhcyBhY3RpdmUuXHJcbiAgICogSWYgYSBzZWN0aW9uIHdpdGggdGhpcyBuYW1lIGFscmVhZHkgZXhpc3RzIHRoZW4gaXQgaXMgb25seSBhY3RpdmF0ZWQuXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IG5hbWVcclxuICAgKiBAcGFyYW0ge0hNTFRFbGVtZW50fSBib2R5XHJcbiAgICogQHBhcmFtIHtCb29sZWFufSBhY3RpdmF0ZSBTZXQgdGhlIHNlY3Rpb24gYXMgYWN0aXZlICh0aGUgb25lIHZpc2libGUpLiBEZWZhdWx0IHRydWUuXHJcbiAgICogQHBhcmFtIHtCb29sZWFufSBmaXJzdCBJZiB0cnVlIHNldHMgdGhlIHNlY3Rpb24gYXMgdGhlIGZpcnN0IG9uZSAobGVmdCBzaWRlKS4gRGVmYXVsdCBmYWxzZS5cclxuICAgKi9cclxuICBhZGRTZWN0aW9uKG5hbWUsIGJvZHksIGFjdGl2YXRlID0gdHJ1ZSwgZmlyc3QgPSBmYWxzZSkge1xyXG4gICAgbGV0IHNlY3Rpb24gPSB0aGlzLnNlY3Rpb25zLmZpbmQocyA9PiBzLm5hbWUgPT09IG5hbWUpO1xyXG4gICAgaWYgKHNlY3Rpb24gPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAvLyBUaGUgc2VjdGlvbiBidXR0b24uXHJcbiAgICAgIGNvbnN0IGJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcclxuICAgICAgYnV0dG9uLmlubmVyVGV4dCA9IG5hbWU7XHJcbiAgICAgIGJ1dHRvbi5kYXRhc2V0LmJ0biA9ICcnO1xyXG4gICAgICB0aGlzLnBhbmVsSGVhZGVyLmFwcGVuZENoaWxkKGJ1dHRvbik7XHJcbiAgICAgIHRoaXMucGFuZWxCb2R5LmFwcGVuZENoaWxkKGJvZHkpO1xyXG4gICAgICBzZWN0aW9uID0geyBuYW1lLCBidXR0b24sIGJvZHkgfTtcclxuICAgICAgLy8gQWRkZWQgdG8gc2VjdGlvbnMgYXJyYXkuXHJcbiAgICAgIGlmIChmaXJzdClcclxuICAgICAgICB0aGlzLnNlY3Rpb25zLnVuc2hpZnQoc2VjdGlvbik7XHJcbiAgICAgIGVsc2VcclxuICAgICAgICB0aGlzLnNlY3Rpb25zLnB1c2goc2VjdGlvbik7XHJcbiAgICB9XHJcbiAgICBpZiAoYWN0aXZhdGUpXHJcbiAgICAgIHRoaXMuc2V0QWN0aXZlKHNlY3Rpb24ubmFtZSk7XHJcbiAgICBlbHNlXHJcbiAgICAgIHRoaXMuc2V0SW5hY3RpdmUoc2VjdGlvbik7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBBZGRzIGEgc2V0IG9mIHNlY3Rpb25zIHRvIHRoZSBwYW5lbC5cclxuICAgKiBUaGUgZmlyc3Qgb25lIGluIHRoZSBhcnJheSB3aWxsIGJlIHNldCBhcyBhY3RpdmUuXHJcbiAgICogQHBhcmFtIHtBcnJheX0gc2VjdGlvbnNBcnJheSBFYWNoIG9iamVjdCBpbiB0aGUgYXJyYXkgc2hvdWxkIGhhdmUgYSBuYW1lIGFuZCBhIGJvZHkgZW50cnkuXHJcbiAgICovXHJcbiAgYWRkU2VjdGlvbnMoc2VjdGlvbnNBcnJheSkge1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzZWN0aW9uc0FycmF5Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIHRoaXMuYWRkU2VjdGlvbihzZWN0aW9uc0FycmF5W2ldLm5hbWUsIHNlY3Rpb25zQXJyYXlbaV0uYm9keSwgaSA9PT0gMCA/IHRydWUgOiBmYWxzZSlcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFJlbW92ZXMgYSBzZWN0aW9uIGZyb20gdGhlIHBhbmVsIGNvbnRlbnRzLlxyXG4gICAqIElmIHRoaXMgd2FzIHRoZSBvbmx5IHNlY3Rpb24gdGhlIHBhbmVsIHdpbGwgY2xvc2UuXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IG5hbWUgXHJcbiAgICovXHJcbiAgcmVtb3ZlU2VjdGlvbihuYW1lKSB7XHJcbiAgICBjb25zdCBzZWN0aW9uSW5kZXggPSB0aGlzLnNlY3Rpb25zLmZpbmRJbmRleChzID0+IHMubmFtZSA9PT0gbmFtZSk7XHJcbiAgICBpZiAoc2VjdGlvbkluZGV4ID49IDApIHtcclxuICAgICAgY29uc3Qgc2VjdGlvbiA9IHRoaXMuc2VjdGlvbnMuc3BsaWNlKHNlY3Rpb25JbmRleCwgMSlbMF07XHJcbiAgICAgIHNlY3Rpb24uYnV0dG9uLnJlbW92ZSgpO1xyXG4gICAgICB0aGlzLnBhbmVsc1N0b3JhZ2UuYXBwZW5kQ2hpbGQoc2VjdGlvbi5ib2R5KTtcclxuICAgICAgaWYgKHRoaXMuc2VjdGlvbnMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIC8vIEkgc2V0IGFzIGFjdGl2ZSB0aGUgZmlyc3QuXHJcbiAgICAgICAgdGhpcy5zZXRBY3RpdmUodGhpcy5zZWN0aW9uc1swXS5uYW1lKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNvbnNvbGUud2FybignSW1wb3NzaWJsZSB0byByZW1vdmUgdGhlIHNlY3Rpb24uIE5vIHNlY3Rpb24gd2FzIGZvdW5kIHdpdGggdGhhdCBuYW1lLicpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcGFuZWxQb3NpdG9uKGJyZWFrcG9pbnQpIHtcclxuICAgIGlmIChicmVha3BvaW50Lm1hdGNoZXMpIHtcclxuICAgICAgdGhpcy5kb2NrVG8odGhpcy5wYW5lbFNpZGVzLmJvdHRvbSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmRvY2tUbyh0aGlzLnBhbmVsU2lkZXMucmlnaHQpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAga2lsbCgpIHtcclxuICAgIC8vIFJlbW92ZSBldmVudCBsaXNlbmVyc1xyXG4gICAgdGhpcy5wYW5lbEhlYWRlci5vbmNsaWNrID0gbnVsbDtcclxuICAgIHRoaXMucGFuZWxHcmlwLm9ubW91c2Vkb3duID0gbnVsbDtcclxuICB9XHJcbn0iLCJpbXBvcnQgR2VuZXJpY3MgZnJvbSAnLi9nZW5lcmljcyc7XHJcbmltcG9ydCB0eXBlIHsgV29ya3NwYWNlIH0gZnJvbSAnLi93b3Jrc3BhY2UnO1xyXG5pbXBvcnQgdHlwZSB7IENvbW1lbnQgfSBmcm9tICcuL2NvbW1lbnQnO1xyXG5cclxuZXhwb3J0IGNsYXNzIENvbW1lbnRGb3JtIHtcclxuICBmb3JtRWxlbWVudDogSFRNTEZvcm1FbGVtZW50O1xyXG4gIHdvcmtzcGFjZTogV29ya3NwYWNlO1xyXG4gIGNhbmNlbENyZWF0ZUJ0bjogSFRNTEVsZW1lbnQ7XHJcbiAgYWRkQ29tbWVudEJ0bjogSFRNTEVsZW1lbnQ7XHJcbiAgZGVsZXRlQnRuOiBIVE1MRWxlbWVudDtcclxuICBlZGl0QnRuOiBIVE1MRWxlbWVudDtcclxuICBjYW5jZWxVcGRhdGVCdG46IEhUTUxFbGVtZW50O1xyXG4gIGNvbmZpcm1VcGRhdGVCdG46IEhUTUxFbGVtZW50O1xyXG4gIHRleHRJbnB1dDogSFRNTFRleHRBcmVhRWxlbWVudDtcclxuICBtZW50aW9uc1NlY3Rpb246IEhUTUxFbGVtZW50O1xyXG4gIG1lbnRpb25zSW5wdXQ6IEhUTUxTZWxlY3RFbGVtZW50O1xyXG4gIGJ1dHRvbnNNb2RlczogSFRNTEVsZW1lbnQ7XHJcbiAgY29tbWVudElkOiBzdHJpbmc7XHJcblxyXG4gIGNvbnN0cnVjdG9yKGZvcm1FbGVtZW50OiBIVE1MRm9ybUVsZW1lbnQsIHdvcmtzcGFjZTogV29ya3NwYWNlKSB7XHJcbiAgICB0aGlzLmZvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQ7XHJcbiAgICB0aGlzLndvcmtzcGFjZSA9IHdvcmtzcGFjZTtcclxuICAgIGZvcm1FbGVtZW50Lm9uc3VibWl0ID0gZSA9PiB7IGUucHJldmVudERlZmF1bHQoKSB9XHJcbiAgICB0aGlzLmNhbmNlbENyZWF0ZUJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb21tZW50Rm9ybUNhbmNlbCcpO1xyXG4gICAgdGhpcy5hZGRDb21tZW50QnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FkZENvbW1lbnRCdG4nKTtcclxuICAgIHRoaXMuZGVsZXRlQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbW1lbnRGb3JtRGVsZXRlJyk7XHJcbiAgICB0aGlzLmRlbGV0ZUJ0bi5vbmNsaWNrID0gKCkgPT4gdGhpcy5kZWxldGVDb21tZW50KHRoaXMuY29tbWVudElkKTtcclxuICAgIHRoaXMuZWRpdEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb21tZW50Rm9ybUVkaXQnKTtcclxuICAgIHRoaXMuZWRpdEJ0bi5vbmNsaWNrID0gKCkgPT4gdGhpcy5lbmFibGVFZGl0Q29tbWVudCh0aGlzLmNvbW1lbnRJZCk7XHJcbiAgICB0aGlzLmNhbmNlbFVwZGF0ZUJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkaXNjYXJkQ2hhbmdlcycpO1xyXG4gICAgdGhpcy5jYW5jZWxVcGRhdGVCdG4ub25jbGljayA9ICgpID0+IHRoaXMuZGlzY2FyZFVwZGF0ZSgpO1xyXG4gICAgdGhpcy5jb25maXJtVXBkYXRlQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbmZpcm1DaGFuZ2VzJyk7XHJcbiAgICB0aGlzLnRleHRJbnB1dCA9IGZvcm1FbGVtZW50LmVsZW1lbnRzLm5hbWVkSXRlbShcImNvbW1lbnRcIikgYXMgSFRNTFRleHRBcmVhRWxlbWVudDtcclxuICAgIHRoaXMubWVudGlvbnNTZWN0aW9uID0gZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcignLm1lbWJlcnMnKTtcclxuICAgIHRoaXMubWVudGlvbnNJbnB1dCA9IGZvcm1FbGVtZW50LmVsZW1lbnRzLm5hbWVkSXRlbShcIm1lbWJlcnNcIikgYXMgSFRNTFNlbGVjdEVsZW1lbnQ7XHJcbiAgICB0aGlzLmJ1dHRvbnNNb2RlcyA9IGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mb3JtQnV0dG9uc01vZGVzJyk7XHJcbiAgfVxyXG5cclxuICBzaG93TWVudGlvbnNTZWN0aW9uKCkge1xyXG4gICAgdGhpcy5tZW50aW9uc1NlY3Rpb24uY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XHJcbiAgfVxyXG5cclxuICBoaWRlTWVudGlvbnNTZWN0aW9uKCkge1xyXG4gICAgdGhpcy5tZW50aW9uc1NlY3Rpb24uY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBUT0RPOiBoZXJlIGkgY2FuIGNoYW5nZSBvdGhlciB0aGluZ3MgbGlrZSBpbnB1dCBsYWJlbHM/XHJcbiAgICovXHJcbiAgYnV0dG9uc1Zpc2liaWxpdHlNb2RlKG1vZGU6ICdjcmVhdGUnIHwgJ3ZpZXcnIHwgJ2VkaXQnKSB7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuYnV0dG9uc01vZGVzLmNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIGlmICgodGhpcy5idXR0b25zTW9kZXMuY2hpbGRyZW5baV0gYXMgSFRNTEVsZW1lbnQpLmRhdGFzZXQubW9kZSAhPT0gbW9kZSkge1xyXG4gICAgICAgICh0aGlzLmJ1dHRvbnNNb2Rlcy5jaGlsZHJlbltpXSBhcyBIVE1MRWxlbWVudCkuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAodGhpcy5idXR0b25zTW9kZXMuY2hpbGRyZW5baV0gYXMgSFRNTEVsZW1lbnQpLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIGRlbGV0ZUNvbW1lbnQoY29tbWVudElkOiBzdHJpbmcpIHtcclxuICAgIGNvbnN0IGluZGV4ID0gdGhpcy53b3Jrc3BhY2UuY29tbWVudHMuZmluZEluZGV4KGMgPT4gYy5pZCA9PT0gY29tbWVudElkKTtcclxuICAgIC8vIERlbGV0ZSByZXByZXNlbnRhdGlvbnMgZnJvbSB0aGUgU1ZHcy5cclxuICAgIHRoaXMud29ya3NwYWNlLmNvbW1lbnRzW2luZGV4XS5yZXByZXNlbnRhdGlvbnMuZm9yRWFjaChyID0+IHIucmVtb3ZlKCkpO1xyXG4gICAgLy8gUmVtb3ZlIGNvbW1lbnQgb2JqZWN0IGZyb20gdGhlIGFycmF5LlxyXG4gICAgdGhpcy53b3Jrc3BhY2UuY29tbWVudHMuc3BsaWNlKGluZGV4LCAxKTtcclxuICAgIC8vIEluZGljYXRlIHRoYXQgdGhlcmUgYXJlIGNoYW5nZXMgdG8gc2F2ZS5cclxuICAgIHRoaXMud29ya3NwYWNlLnVuc2F2ZWRDb21tZW50c0RhdGEoKTtcclxuXHJcbiAgICAvLyBJTVBPUlRBTlQgdGhpcyBtYXkgYmEgd3Jvbmcgc2hvdWxkIGJlIG91dHNpZGUgb2YgdGhpcyBtZXRob2RcclxuICAgIC8vIElmIGl0IGhhcyBiZWVuIGNhbGxlZCBmcm9tIHRoZSBwYW5lbCB0aGVuIHJlbW92ZSB0aGUgQ29tbWVudCBzZWN0aW9uID8/IG1heWJlIG5vdCBpbnNpZGUgdGhpcyBmdW5jdGlvblxyXG4gICAgdGhpcy53b3Jrc3BhY2UubWFpblBhbmVsLnJlbW92ZVNlY3Rpb24oJ0NvbW1lbnQnKTtcclxuICB9XHJcblxyXG4gIGRpc2FibGVGb3JtKCkge1xyXG4gICAgdGhpcy50ZXh0SW5wdXQuZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgdGhpcy5tZW50aW9uc0lucHV0LmRpc2FibGVkID0gdHJ1ZTtcclxuICB9XHJcblxyXG4gIGVuYWJsZUZvcm0oKSB7XHJcbiAgICB0aGlzLnRleHRJbnB1dC5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgdGhpcy5tZW50aW9uc0lucHV0LmRpc2FibGVkID0gZmFsc2U7XHJcbiAgfVxyXG5cclxuICB2aWV3Q29tbWVudChjb21tZW50SWQ6IHN0cmluZykge1xyXG4gICAgY29uc3QgY29tbWVudCA9IHRoaXMud29ya3NwYWNlLmNvbW1lbnRzLmZpbmQoYyA9PiBjLmlkID09PSBjb21tZW50SWQpO1xyXG4gICAgaWYgKGNvbW1lbnQpIHtcclxuICAgICAgdGhpcy5maWxsSW5wdXRzKGNvbW1lbnQpO1xyXG4gICAgICB0aGlzLmNvbW1lbnRJZCA9IGNvbW1lbnQuaWQ7XHJcbiAgICAgIHRoaXMuZGlzYWJsZUZvcm0oKTtcclxuICAgICAgdGhpcy5idXR0b25zVmlzaWJpbGl0eU1vZGUoJ3ZpZXcnKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNvbnNvbGUud2FybignTm8gY29tbWVudCBmb3VuZCB3aXRoIHRoYXQgaWQ6JywgY29tbWVudElkKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGVuYWJsZUVkaXRDb21tZW50KGNvbW1lbnRJZDogc3RyaW5nKSB7XHJcbiAgICBjb25zdCBjb21tZW50ID0gdGhpcy53b3Jrc3BhY2UuY29tbWVudHMuZmluZChjID0+IGMuaWQgPT09IGNvbW1lbnRJZCk7XHJcbiAgICBpZiAoY29tbWVudCkge1xyXG4gICAgICB0aGlzLmZpbGxJbnB1dHMoY29tbWVudCk7XHJcbiAgICAgIHRoaXMuY29tbWVudElkID0gY29tbWVudElkO1xyXG4gICAgICB0aGlzLmVuYWJsZUZvcm0oKTtcclxuICAgICAgdGhpcy5idXR0b25zVmlzaWJpbGl0eU1vZGUoJ2VkaXQnKTtcclxuICAgICAgdGhpcy5mb3JtRWxlbWVudC5vbmNoYW5nZSA9ICgpID0+IHtcclxuICAgICAgICB0aGlzLmNvbmZpcm1VcGRhdGVCdG4uY2xhc3NMaXN0LnJlbW92ZSgnZGlzYWJsZWQnKTtcclxuICAgICAgICB0aGlzLmNvbmZpcm1VcGRhdGVCdG4ub25jbGljayA9ICgpID0+IHRoaXMudXBkYXRlQ29tbWVudChjb21tZW50SWQsIHRoaXMudGV4dElucHV0LnZhbHVlLCB0aGlzLmdldFNlbGVjdGVkTWVtYmVycygpKTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29uc29sZS53YXJuKCdObyBjb21tZW50IGZvdW5kIHdpdGggdGhhdCBpZDonLCBjb21tZW50SWQpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgdXBkYXRlQ29tbWVudChjb21tZW50SWQ6IHN0cmluZywgdGV4dDogc3RyaW5nLCBtZW50aW9uczogc3RyaW5nW10pIHtcclxuICAgIGNvbnN0IGNvbW1lbnQgPSB0aGlzLndvcmtzcGFjZS5jb21tZW50cy5maW5kKGMgPT4gYy5pZCA9PT0gY29tbWVudElkKTtcclxuICAgIGlmIChjb21tZW50KSB7XHJcbiAgICAgIGNvbW1lbnQuY29udGVudCA9IHRleHQ7XHJcbiAgICAgIGNvbW1lbnQubWVudGlvbnMgPSBtZW50aW9ucztcclxuICAgICAgdGhpcy53b3Jrc3BhY2UudW5zYXZlZENvbW1lbnRzRGF0YSgpO1xyXG4gICAgICB0aGlzLmZvcm1FbGVtZW50Lm9uY2hhbmdlID0gbnVsbDtcclxuICAgICAgdGhpcy5kaXNhYmxlRm9ybSgpO1xyXG4gICAgICB0aGlzLmJ1dHRvbnNWaXNpYmlsaXR5TW9kZSgndmlldycpO1xyXG4gICAgICB0aGlzLmNvbmZpcm1VcGRhdGVCdG4uY2xhc3NMaXN0LmFkZCgnZGlzYWJsZWQnKTtcclxuICAgICAgdGhpcy5jYW5jZWxVcGRhdGVCdG4uY2xhc3NMaXN0LmFkZCgnZGlzYWJsZWQnKTtcclxuICAgICAgdGhpcy5jb25maXJtVXBkYXRlQnRuLm9uY2xpY2sgPSBudWxsO1xyXG4gICAgICB0aGlzLmNhbmNlbFVwZGF0ZUJ0bi5vbmNsaWNrID0gbnVsbDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNvbnNvbGUud2FybignTm8gY29tbWVudCBmb3VuZCB3aXRoIHRoYXQgaWQ6JywgY29tbWVudElkKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGRpc2NhcmRVcGRhdGUoKSB7XHJcbiAgICBjb25zdCBjb21tZW50ID0gdGhpcy53b3Jrc3BhY2UuY29tbWVudHMuZmluZChjID0+IGMuaWQgPT09IHRoaXMuY29tbWVudElkKTtcclxuICAgIGlmIChjb21tZW50KSB7XHJcbiAgICAgIHRoaXMudGV4dElucHV0LnZhbHVlID0gY29tbWVudC5jb250ZW50O1xyXG4gICAgICAvLyBUT0RPIHRoaXMubWVudGlvbnNJbnB1dCA9ICcnIGlmIHNlbGVjdGlvbiBjaGFuZ2VkIHB1dCBpbml0aWFsIHNlbGVjdGlvblxyXG4gICAgICB0aGlzLmZvcm1FbGVtZW50Lm9uY2hhbmdlID0gbnVsbDtcclxuICAgICAgdGhpcy5kaXNhYmxlRm9ybSgpO1xyXG4gICAgICB0aGlzLmJ1dHRvbnNWaXNpYmlsaXR5TW9kZSgndmlldycpO1xyXG4gICAgICB0aGlzLmNvbmZpcm1VcGRhdGVCdG4uY2xhc3NMaXN0LmFkZCgnZGlzYWJsZWQnKTtcclxuICAgICAgdGhpcy5jb25maXJtVXBkYXRlQnRuLm9uY2xpY2sgPSBudWxsO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29uc29sZS53YXJuKCdObyBjb21tZW50IGZvdW5kIHdpdGggdGhhdCBpZDonLCB0aGlzLmNvbW1lbnRJZCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBSZXR1cm5zIGFuIGFycmF5IG9mIHRoZSB2YWx1ZXMgb2YgdGhlIHNlbGVjdGVkIG9wdGlvbnMuXHJcbiAgICovXHJcbiAgZ2V0U2VsZWN0ZWRNZW1iZXJzKCkge1xyXG4gICAgY29uc3Qgc2VsZWN0ZWRPcHRpb25zID0gW107XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubWVudGlvbnNJbnB1dC5zZWxlY3RlZE9wdGlvbnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgc2VsZWN0ZWRPcHRpb25zLnB1c2godGhpcy5tZW50aW9uc0lucHV0LnNlbGVjdGVkT3B0aW9uc1tpXS52YWx1ZSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gc2VsZWN0ZWRPcHRpb25zO1xyXG4gIH1cclxuXHJcbiAgZmlsbElucHV0cyhjb21tZW50OiBDb21tZW50KSB7XHJcbiAgICB0aGlzLnRleHRJbnB1dC52YWx1ZSA9IGNvbW1lbnQuY29udGVudDtcclxuICAgIGlmIChjb21tZW50Lm1lbnRpb25zLmxlbmd0aCA+IDApIHtcclxuICAgICAgY29uc3QgbWVudGlvbnM6IHN0cmluZ1tdID0gW107XHJcbiAgICAgIC8vIEl0IHNob3VsZCBiZSBzdGlsbCBhIG1lbWJlciBvZiB0aGUgdGVhbSBvdGhlcndpc2UgaXRzIG5hbWUgaXMgc2V0IHRvICdyZW1vdmVkIHVzZXInXHJcbiAgICAgIC8vIFRPRE86IGlmIGEgbWVudGlvbmVkIHRlYW0gbWVtYmVyIHdhcyByZW1vdmVkIGl0IHNob3VsZCBiZSByZW1vdmVkIGZyb20gYW55IG1lbnRpb24gPyB3aGVuID9cclxuICAgICAgLy8gPyBBbGwgbWVtYmVycyBzaG91bGQgYmUgYWRkZWQgaGVyZSA/XHJcbiAgICAgIGNvbW1lbnQubWVudGlvbnMuZm9yRWFjaChtZW50aW9uRW1haWwgPT4ge1xyXG4gICAgICAgIGNvbnN0IHBlcm1pc3Npb24gPSB0aGlzLndvcmtzcGFjZS5wZXJtaXNzaW9ucy5maW5kKHAgPT4gcC5lbWFpbEFkZHJlc3MgPT09IG1lbnRpb25FbWFpbCk7XHJcbiAgICAgICAgbWVudGlvbnMucHVzaChgPG9wdGlvbiB2YWx1ZT1cIiR7bWVudGlvbkVtYWlsfVwiPiR7cGVybWlzc2lvbiA/IHBlcm1pc3Npb24uZGlzcGxheU5hbWUgOiAnUmVtb3ZlZCB1c2VyJ308L29wdGlvbj5gKTtcclxuICAgICAgfSk7XHJcbiAgICAgIHRoaXMubWVudGlvbnNJbnB1dC5pbm5lckhUTUwgPSBtZW50aW9ucy5qb2luKCcnKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIC8vIFRPRE8gU2hvdyBhIG1lc3NhZ2UgaW5kaWNhdGluZyBubyBtZW50aW9ucz8gc2hvdyB0aGUgZW1wdHkgc2VsZWN0P1xyXG4gICAgICBHZW5lcmljcy5lbXB0eU5vZGUodGhpcy5tZW50aW9uc0lucHV0KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJlc2V0KCkge1xyXG4gICAgdGhpcy5mb3JtRWxlbWVudC5yZXNldCgpO1xyXG4gIH1cclxufSIsImltcG9ydCBHZW5lcmljcyBmcm9tICcuL2dlbmVyaWNzJztcclxuaW1wb3J0IHsgQ29tbWVudCB9IGZyb20gJy4vY29tbWVudCc7XHJcbmltcG9ydCB7IE1haW5QYW5lbCB9IGZyb20gJy4vbWFpblBhbmVsJztcclxuaW1wb3J0IHsgQ29tbWVudEZvcm0gfSBmcm9tICcuL2NvbW1lbnRGb3JtJztcclxuaW1wb3J0IHR5cGUgeyBEcmF3aW5nIH0gZnJvbSAnLi9kcmF3aW5nJztcclxuaW1wb3J0IHR5cGUgeyBBcHBsaWNhdGlvbiB9IGZyb20gJy4vYXBwJztcclxuaW1wb3J0IHR5cGUgeyBFbGVtZW50U2VsZWN0aW9uIH0gZnJvbSAnLi9hcHBUb29scy9lbGVtZW50U2VsZWN0aW9uJztcclxuXHJcbmV4cG9ydCBjbGFzcyBXb3Jrc3BhY2Uge1xyXG4gIHdvcmtzcGFjZUNvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XHJcbiAgcHJvamVjdE5hbWU6IHN0cmluZztcclxuICBwcm9qZWN0SWQ6IHN0cmluZztcclxuICBwZXJtaXNzaW9uczogZ2FwaS5jbGllbnQuZHJpdmUuUGVybWlzc2lvbltdO1xyXG4gIHByb2plY3RJbmRleDogbnVtYmVyO1xyXG4gIGRyYXdpbmdzOiBEcmF3aW5nW107XHJcbiAgZWxlbWVudHNEYXRhOiBhbnk7IC8vIFRPRE8gY3JlYXRlIGludGVyZmFjZVxyXG4gIGRyYXdpbmdzU3R5bGVzSWQ6IGFueTsgLy8gVE9ETyBudW1iZXIgb3Igc3RyaW5nP1xyXG4gIGFjdGl2ZVRvb2w6IEVsZW1lbnRTZWxlY3Rpb247XHJcbiAgLy8gdG9vbFNldHRpbmdzOiBhbnk7XHJcbiAgYXBwZW5kZWREcmF3aW5nc0lkczogc3RyaW5nW10gPSBbXTtcclxuICBhY3RpdmVEcmF3aW5nOiBEcmF3aW5nO1xyXG4gIGRyYXdpbmdzQnRuczogSFRNTEVsZW1lbnQ7XHJcbiAgZHJhd2luZ3NTdHlsZXNUYWc6IEhUTUxTdHlsZUVsZW1lbnQ7XHJcbiAgc2F2ZUJ0bjogSFRNTEVsZW1lbnQ7XHJcbiAgcHJvamVjdHNEYXRhOiBhbnkgLy8gUHJvamVjdERhdGFbXVxyXG4gIHByb3BzVGFibGVzQ29udGFpbmVyOiBIVE1MRWxlbWVudDtcclxuICBwYXJhbXNUYWJsZXNDb250YWluZXI6IEhUTUxFbGVtZW50O1xyXG4gIGNvbW1lbnRzQ2hhbmdlc1Vuc2F2ZWQ6IGJvb2xlYW47XHJcbiAgY29tbWVudHNGaWxlSWQ6IGFueTsgLy8gc3RyaW5nIG9yIG51bWJlcj9cclxuICBjb21tZW50czogQ29tbWVudFtdID0gW107XHJcbiAgLy8gVXNlZCB0byBzdG9yZSBhcnJheXMgb2YgYWxsIHRoZSBjb21tZW50cyB0aGF0IGVhY2ggZWxlbWVudCBoYXMsIG5lY2Vzc2FyeSB3aGVuIGFuIGVsZW1lbnQgaXMgY2xpY2tlZC5cclxuICBlbGVtZW50c0NvbW1lbnRzOiBhbnkgPSB7fTsgLy8gVE9ETyBpcyBhbiBvYmplY3QgYnV0IHdoaWNoIHR5cGU/XHJcbiAgcGVuZGluZ05vdGlmaWNhdGlvbnNUb1NlbmQ6IGFueTsgLy8gVE9ETyBpcyBhbiBhcnJheSBidXQgb2Y/XHJcbiAgbWFpblBhbmVsOiBNYWluUGFuZWw7XHJcbiAgY29tbWVudEZvcm06IENvbW1lbnRGb3JtO1xyXG4gIGRyYXdpbmdzQ29udGFpbmVyOiBIVE1MRWxlbWVudDtcclxuXHJcbiAgY29uc3RydWN0b3IocHJvamVjdERhdGE6IGFueSwgQXBwOiBBcHBsaWNhdGlvbikgeyAvLyBUT0RPIHVzZSBwcm9qZWN0RGF0YSBpbnN0ZWFkXHJcbiAgICAvLyBDcmVhdGUgdGhlIHdvcmtzcGFjZSBIVE1MIGNvbnRhaW5lci5cclxuICAgIHRoaXMud29ya3NwYWNlQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICB0aGlzLndvcmtzcGFjZUNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCd3b3Jrc3BhY2UnKTtcclxuICAgIC8vIFRPRE8gY3JlYXRlIHZpZXdwb3J0IG1lc3NhZ2UgYXMgY29tcG9uZW50LiBUaGlzIGVsZW1lbnQgY3VycmVudGx5IGhhcyBpZCB2aWV3cG9ydE1lc3NhZ2VcclxuICAgIC8vdGhpcy52aWV3cG9ydE1lc3NhZ2UgPSBuZXcgVmlld3BvcnRNZXNzYWdlKCk7ICAgIFxyXG5cclxuICAgIHRoaXMucHJvamVjdE5hbWUgPSBwcm9qZWN0RGF0YS5uYW1lO1xyXG4gICAgdGhpcy5wcm9qZWN0SWQgPSBwcm9qZWN0RGF0YS5pZDtcclxuICAgIHRoaXMucGVybWlzc2lvbnMgPSBwcm9qZWN0RGF0YS5wZXJtaXNzaW9ucztcclxuICAgIHRoaXMucHJvamVjdEluZGV4ID0gQXBwLnByb2plY3RzRGF0YS5maW5kSW5kZXgoKG9iajogYW55KSA9PiBvYmoubmFtZSA9PT0gcHJvamVjdERhdGEubmFtZSk7IC8vIFRPRE8gdXNlIHR5cGUgcHJvamVjdERhdGEgaW5zdGVhZFxyXG4gICAgaWYgKEFwcC5sYXN0VXBsb2FkZWRQcm9qZWN0ICYmIHByb2plY3REYXRhLmlkID09PSBBcHAubGFzdFVwbG9hZGVkUHJvamVjdC5pZCkge1xyXG4gICAgICAvL3RoaXMuZHJhd2luZ3MgPSBBcHAubGFzdFVwbG9hZGVkUHJvamVjdC5kcmF3aW5nczsgLy8gVE9ETyB3aGVuIGxhc3RVcGxvYWRlZFByb2plY3QgaW50ZXJmYWNlIGlzIGF2YWlhYmxlIHVuY29tbWVudCBpdFxyXG4gICAgICAvL3RoaXMuZHJhd2luZ3NTdHlsZXNJZCA9IEFwcC5sYXN0VXBsb2FkZWRQcm9qZWN0LmRyYXdpbmdzU3R5bGVzSWQ7XHJcbiAgICAgIHRoaXMuZWxlbWVudHNEYXRhID0gQXBwLmxhc3RVcGxvYWRlZFByb2plY3QuZWxlbWVudHNEYXRhO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgLy8gU3RvcmUgdGhlIGNvbnRlbnQgb2YgdGhlIGRyYXdpbmdzIGFzIGVudHJpZXMgbmFtZTonY29udGVudCdcclxuICAgICAgdGhpcy5kcmF3aW5ncyA9IHByb2plY3REYXRhLmRyYXdpbmdzO1xyXG4gICAgICB0aGlzLmRyYXdpbmdzU3R5bGVzSWQgPSBwcm9qZWN0RGF0YS5kcmF3aW5nc1N0eWxlc0lkO1xyXG4gICAgICAvLyBUT0RPOiBFbGVtZW50cyBkYXRhIGNvdWxkIGJlIGNoYW5nZWQgdG8gYSBzaW1pbGFyIHN5c3RlbSBsaWtlIHRoZSBkcmF3aW5nIG9iamVjdHMuXHJcbiAgICAgIHRoaXMuZWxlbWVudHNEYXRhID0ge307XHJcbiAgICB9XHJcbiAgICAvLyBTZXQgdGl0bGUgb2YgdGhlIHByb2plY3QgaW4gdGhlIGJ1dHRvbiB0byBsaXN0IHRoZSBwcm9qZWN0cy5cclxuICAgIEFwcC5wcm9qZWN0c0xpc3RCdG4uaW5uZXJIVE1MID0gJzxzcGFuPicgKyBwcm9qZWN0RGF0YS5uYW1lICsgJzwvc3Bhbj4nO1xyXG4gICAgdGhpcy5kcmF3aW5nc0J0bnMgPSBBcHAuZHJhd2luZ3NCdG5zO1xyXG4gICAgdGhpcy5zYXZlQnRuID0gQXBwLnNhdmVCdG47XHJcbiAgICB0aGlzLmNyZWF0ZURyYXdpbmdzQnRucyh0aGlzLmRyYXdpbmdzKTtcclxuICAgIC8vIFNob3cgZHJhd2luZ3MgYW5kIHRvb2xzIGJ1dHRvbnMuXHJcbiAgICAodGhpcy5kcmF3aW5nc0J0bnMuY2hpbGRyZW5bMF0gYXMgSFRNTEVsZW1lbnQpLmlubmVyVGV4dCA9ICdQaWNrIGEgZHJhd2luZyc7XHJcbiAgICB0aGlzLmRyYXdpbmdzQnRucy5zdHlsZS5kaXNwbGF5ID0gJ3Vuc2V0JztcclxuICAgIEFwcC50b29sYmFyc0NvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xyXG4gICAgdGhpcy5wcm9qZWN0c0RhdGEgPSBBcHAucHJvamVjdHNEYXRhO1xyXG4gICAgdGhpcy5wcm9wc1RhYmxlc0NvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9wc1RhYmxlc0NvbnRhaW5lcicpO1xyXG4gICAgdGhpcy5wYXJhbXNUYWJsZXNDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGFyYW1zVGFibGVzQ29udGFpbmVyJyk7XHJcbiAgICBpZiAocHJvamVjdERhdGEuY29tbWVudHNGaWxlSWQpIHtcclxuICAgICAgdGhpcy5jb21tZW50c0ZpbGVJZCA9IHByb2plY3REYXRhLmNvbW1lbnRzRmlsZUlkO1xyXG4gICAgfVxyXG4gICAgaWYgKHByb2plY3REYXRhLmNvbW1lbnRzKSB7XHJcbiAgICAgIHByb2plY3REYXRhLmNvbW1lbnRzLmZvckVhY2goKGNvbW1lbnREYXRhOiBhbnkpID0+IHtcclxuICAgICAgICBjb25zdCBjb21tZW50T2JqID0gbmV3IENvbW1lbnQoY29tbWVudERhdGEuZWxlbWVudHNJZHMsIGNvbW1lbnREYXRhLmNvbnRlbnQsIGNvbW1lbnREYXRhLm1lbnRpb25zKTtcclxuICAgICAgICB0aGlzLmNvbW1lbnRzLnB1c2goY29tbWVudE9iaik7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb21tZW50RGF0YS5lbGVtZW50c0lkcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgaWYgKCF0aGlzLmVsZW1lbnRzQ29tbWVudHMuaGFzT3duUHJvcGVydHkoY29tbWVudERhdGEuZWxlbWVudHNJZHNbaV0pKVxyXG4gICAgICAgICAgICB0aGlzLmVsZW1lbnRzQ29tbWVudHNbY29tbWVudERhdGEuZWxlbWVudHNJZHNbaV1dID0gW107XHJcbiAgICAgICAgICB0aGlzLmVsZW1lbnRzQ29tbWVudHNbY29tbWVudERhdGEuZWxlbWVudHNJZHNbaV1dLnB1c2goY29tbWVudE9iai5pZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgICAgdGhpcy5kcmF3aW5ncy5mb3JFYWNoKGRyYXdpbmcgPT4gZHJhd2luZy5jb21tZW50c0NoYW5nZWQgPSB0cnVlKTtcclxuICAgIH1cclxuICAgIHRoaXMubWFpblBhbmVsID0gbmV3IE1haW5QYW5lbChBcHAucGFuZWxzU3RvcmFnZSwgdGhpcyk7XHJcbiAgICB0aGlzLmNvbW1lbnRGb3JtID0gbmV3IENvbW1lbnRGb3JtKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb21tZW50Rm9ybScpIGFzIEhUTUxGb3JtRWxlbWVudCwgdGhpcyk7XHJcbiAgICAvLyBDcmVhdGUgYW5kIGFwcGVuZCB0aGUgSFRNTCBkcmF3aW5ncyBjb250YWluZXIuXHJcbiAgICB0aGlzLmRyYXdpbmdzQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICB0aGlzLmRyYXdpbmdzQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ2RyYXdpbmdzQ29udGFpbmVyJyk7XHJcbiAgICB0aGlzLndvcmtzcGFjZUNvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLmRyYXdpbmdzQ29udGFpbmVyKTtcclxuICAgIC8vIEFwcGVuZCB0aGUgd29ya3NwYWNlIGNvbnRhaW5lciB0byB0aGUgRE9NLlxyXG4gICAgQXBwLndvcmtzcGFjZXNDb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy53b3Jrc3BhY2VDb250YWluZXIpO1xyXG4gIH1cclxuXHJcbiAgLy8gVE9ETzogU2V0IGEgZGVmYXVsdCAnYWN0aXZlRHJhd2luZycgd2l0aCB0aGUgJ2VsZW1lbnRzRGF0YScgdG9vbCBhY3RpdmUgYnkgZGVmYXVsdD8gdGhpcy5hY3RpdmVUb29sID0gbmV3IEVsZW1lbnRzRGF0YSgnZWxlbWVudHNEYXRhVG9vbCcsIHRoaXMpO1xyXG5cclxuXHJcbiAgLyoqKioqKioqKioqKioqKioqKioqKioqIFRPT0xTIE1BTkFHRU1FTlQgKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuICAvKipcclxuICAgKiBTZXRzIHRoZSBzZWxlY3RlZCB0b29sIGFzIGFjdGl2ZSBhbmQgdHVybnMgb2ZmIHRoZSBwcmV2aW91cyBvbmUgaWYgc3RpbGwgYWN0aXZlLlxyXG4gICAqL1xyXG4gIG1hbmFnZVRvb2xzKGU6IEV2ZW50LCBUb29sOiB0eXBlb2YgRWxlbWVudFNlbGVjdGlvbiwgbmFtZTogc3RyaW5nKSB7XHJcbiAgICBpZiAodGhpcy5hY3RpdmVEcmF3aW5nID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgLy8gVE9ETzogU2hvdyBhIG1lc3NhZ2Ugc2F5aW5nIHRoYXQgYSBkcmF3aW5nIG11c3QgYmUgYWN0aXZlLlxyXG4gICAgICBjb25zb2xlLmxvZygnQSBkcmF3aW5nIG11c3QgYmUgYWN0aXZlLicpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5hY3RpdmVUb29sID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgdGhpcy5hY3RpdmVUb29sID0gbmV3IFRvb2wobmFtZSwgZS5jdXJyZW50VGFyZ2V0IGFzIEhUTUxFbGVtZW50LCB0aGlzKTtcclxuICAgIH0gZWxzZSBpZiAodGhpcy5hY3RpdmVUb29sLm5hbWUgIT09IG5hbWUpIHtcclxuICAgICAgdGhpcy5hY3RpdmVUb29sLmtpbGwoKTtcclxuICAgICAgdGhpcy5hY3RpdmVUb29sID0gbmV3IFRvb2wobmFtZSwgZS5jdXJyZW50VGFyZ2V0IGFzIEhUTUxFbGVtZW50LCB0aGlzKTtcclxuICAgIH0gZWxzZSBpZiAodGhpcy5hY3RpdmVUb29sLm5hbWUgPT09IG5hbWUpIHtcclxuICAgICAgdGhpcy5hY3RpdmVUb29sLmtpbGwoKTtcclxuICAgICAgdGhpcy5hY3RpdmVUb29sID0gdW5kZWZpbmVkO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcblxyXG4gIHVuc2F2ZWRDb21tZW50c0RhdGEoKSB7XHJcbiAgICB0aGlzLmNvbW1lbnRzQ2hhbmdlc1Vuc2F2ZWQgPSB0cnVlO1xyXG4gICAgdGhpcy5zYXZlQnRuLmNsYXNzTGlzdC5yZW1vdmUoJ2Rpc2FibGVkJyk7XHJcbiAgICB0aGlzLnNhdmVCdG4uY2xhc3NMaXN0LmFkZCgnZW5hYmxlZCcpO1xyXG4gIH1cclxuXHJcblxyXG4gIC8qKioqKioqKioqKioqKioqKioqKioqIERSQVdJTkdTIE1BTkFHRU1FTlQgKioqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbiAgLyoqXHJcbiAgICogTWFuYWdlcyB0aGUgZHJhd2luZ3MgdmlzaWJpbGl0eS4gVGhlIHByb3ZpZGVkIGRyYXdpbmcgb2JqZWN0XHJcbiAgICogc2hvdWxkIGhhdmUgdGhlICdjb250ZW50JyBwcm9wZXJ0eSBhbHJlYWR5IHdpdGggdmFsdWUuXHJcbiAgICovXHJcbiAgc2V0RHJhd2luZyhkcmF3aW5nOiBEcmF3aW5nKSB7XHJcbiAgICAvLyBJZiB0aGVyZSBpcyBhIHByZXZpb3VzIHZpc2libGUgZHJhd2luZyBoaWRlIGl0LlxyXG4gICAgaWYgKHRoaXMuYWN0aXZlRHJhd2luZyAmJiB0aGlzLmFjdGl2ZURyYXdpbmcubmFtZSAhPT0gZHJhd2luZy5uYW1lKSB7XHJcbiAgICAgIC8vIElmIGluIHRoZSBkcmF3aW5nIHRvIGJlIGhpZGRlbiB0aGVyZSBhcmUgc2VsZWN0ZWQgZWxlbWVudHMgcmVtb3ZlIHRoZWlyIHNlbGVjdGlvbiBhcHBlYXJhbmNlLlxyXG4gICAgICBpZiAodGhpcy5hY3RpdmVUb29sICYmIHRoaXMuYWN0aXZlVG9vbC5jdXJyZW50U2VsZWN0aW9uLmxlbmd0aCA+IDApIHtcclxuICAgICAgICB0aGlzLmFjdGl2ZVRvb2wucmVtb3ZlRHJhd2luZ1NlbGVjdGlvbkFwcGVhcmFuY2UodGhpcy5hY3RpdmVEcmF3aW5nKTtcclxuICAgICAgfVxyXG4gICAgICB0aGlzLmFjdGl2ZURyYXdpbmcuY29udGVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgfSBlbHNlIGlmICh0aGlzLmFjdGl2ZURyYXdpbmcgJiYgdGhpcy5hY3RpdmVEcmF3aW5nLm5hbWUgPT09IGRyYXdpbmcubmFtZSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgLy8gTWFrZSBpdCBub3QgdmlzaWJsZSB1bnRpbCB0aGUgZW5kIG9mIHRoZSBwcm9jZXNzLiBVc2UgdmlzaWJpbGl0eVxyXG4gICAgLy8gYmVjYXVzZSBzb21lIGJyb3dzZXJzIGxpa2UgQ2hyb21lIGNhbm5vdCBkcmF3IG5ldyBzdmcgZWxlbWVudHMgaWZcclxuICAgIC8vIHRoZSBjYW52YXMgaGFzICdkaXNwbGF5Om5vbmUnLlxyXG4gICAgZHJhd2luZy5jb250ZW50LnN0eWxlLnZpc2liaWxpdHkgPSAnaGlkZGVuJztcclxuXHJcbiAgICAvLyBJZiBpdCBpcyBub3QgaW4gdGhlIERPTSBhbHJlYWR5IGFwcGVuZCBpdC5cclxuICAgIC8vIElmIGl0IGlzIGFscmVhZHkgaW4gdGhlIERPTSB0aGVuIHJlbW92ZSB0aGUgJ2Rpc3BsYXk6bm9uZScuXHJcbiAgICBpZiAoIXRoaXMuYXBwZW5kZWREcmF3aW5nc0lkcy5pbmNsdWRlcyhkcmF3aW5nLmlkKSkge1xyXG4gICAgICB0aGlzLmFwcGVuZGVkRHJhd2luZ3NJZHMucHVzaChkcmF3aW5nLmlkKTtcclxuICAgICAgdGhpcy5kcmF3aW5nc0NvbnRhaW5lci5hcHBlbmQoZHJhd2luZy5jb250ZW50KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGRyYXdpbmcuY29udGVudC5zdHlsZS5kaXNwbGF5ID0gJ3Vuc2V0JztcclxuICAgIH1cclxuXHJcbiAgICAvLyBJZiB0aGUgdmFsdWUgb2YgY29tbWVudHNDaGFuZ2VkIGlzIHVuZGVmaW5lZCB0aGVuIHRoZXJlIGFyZSBzdGlsbFxyXG4gICAgLy8gbm8gY29tbWVudHMgaW4gdGhlIHByb2plY3QuIElmIGl0IGlzIGZhbHNlIHRoZW4gdGhlcmUgYXJlIG5vIGNoYW5nZXMuXHJcbiAgICBpZiAoZHJhd2luZy5jb21tZW50c0NoYW5nZWQpIHtcclxuICAgICAgLy8gVXBkYXRlIHRoZSBjb21tZW50cyByZXByZXNlbnRhdGlvbnMgZm9yIHRoZSBuZXcgZHJhd2luZy5cclxuICAgICAgLy8gSWYgc3RpbGwgdGhlcmUgaXMgbm8gY29tbWVudHMgZ3JvdXAgY2hlY2sgdGhlIGRyYXdpbmcsIG90aGVyd2lzZSBjaGVja1xyXG4gICAgICAvLyB0aGUgb25lcyB3aXRob3V0IHJlcHJlc2VudGF0aW9uIGluIHRoZSBjb21tZW50cyBncm91cC5cclxuICAgICAgaWYgKGRyYXdpbmcuY29tbWVudHNHcm91cCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgbGV0IGdyb3VwQ3JlYXRlZCA9IGZhbHNlO1xyXG4gICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgdGhpcy5jb21tZW50cy5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgY29uc3QgZWxlbXNGb3JDb21tZW50UmVwcmVzZW50YXRpb246IFNWR0dFbGVtZW50W10gPSBbXTtcclxuICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5jb21tZW50c1tqXS5lbGVtZW50c0lkcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCBlbGVtZW50ID0gZHJhd2luZy5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWlkPVwiJyArIHRoaXMuY29tbWVudHNbal0uZWxlbWVudHNJZHNbaV0gKyAnXCJdJykgYXMgU1ZHR0VsZW1lbnQ7XHJcbiAgICAgICAgICAgIGlmIChlbGVtZW50ICE9PSBudWxsKVxyXG4gICAgICAgICAgICAgIGVsZW1zRm9yQ29tbWVudFJlcHJlc2VudGF0aW9uLnB1c2goZWxlbWVudCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICAvLyBJZiBhdCBsZWFzdCBvbmUgaXMgZm91bmQgY3JlYXRlIHRoZSByZXByZXNlbnRhdGlvbi5cclxuICAgICAgICAgIGlmIChlbGVtc0ZvckNvbW1lbnRSZXByZXNlbnRhdGlvbi5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIC8vIE9ubHkgaWYgYXQgbGVhc3Qgb25lIGNvbW1lbnQgcmVxdWlyZXMgcmVwcmVzZW50YXRpb24gdGhlIGNvbW1lbnRzIGdyb3VwIGlzIGNyZWF0ZWQuXHJcbiAgICAgICAgICAgIGlmICghZ3JvdXBDcmVhdGVkKSB7XHJcbiAgICAgICAgICAgICAgZHJhd2luZy5jcmVhdGVDb21tZW50c0dyb3VwKCk7XHJcbiAgICAgICAgICAgICAgLy8gVE9ETzogU2V0IHZpc2liaWxpdHkgb2YgdGhlIGdyb3VwLlxyXG4gICAgICAgICAgICAgIGdyb3VwQ3JlYXRlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5jb21tZW50c1tqXS5jcmVhdGVSZXByZXNlbnRhdGlvbihkcmF3aW5nLmNvbW1lbnRzR3JvdXAsIGVsZW1zRm9yQ29tbWVudFJlcHJlc2VudGF0aW9uKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy8gTG9vayBmb3IgaW4gdGhlIGNvbW1lbnRzIGdyb3VwLCBhbmQgYWRkIHRoZSBtaXNzaW5nIG9uZXMuXHJcbiAgICAgICAgLy8gT25seSBpZiB0aGUgZWxlbWVudCBpcyBpbiB0aGUgZHJhd2luZyBhbmQgaXQgZG9lc250IGhhdmUgcmVwcmVzZW50YXRpb24uXHJcbiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCB0aGlzLmNvbW1lbnRzLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAvLyBJZiB0aGlzIGVsZW1lbnQgYWxyZWFkeSBoYXMgYSByZXByZXNlbnRhdGlvbiBpbiB0aGlzIGRyYXdpbmcgc2tpcCBpdC5cclxuICAgICAgICAgIGlmIChkcmF3aW5nLmNvbW1lbnRzR3JvdXAucXVlcnlTZWxlY3RvcignW2RhdGEtaWQ9XCInICsgdGhpcy5jb21tZW50c1tqXS5pZCArICdcIl0nKSAhPT0gbnVsbCkgY29udGludWU7XHJcbiAgICAgICAgICAvLyBUT0RPIERvIHNvbWV0aGluZyB0byBhdm9pZCBjaGVja2luZyBjb21tZW50cyB0aGF0IGRvZXNudCBoYXZlIGFueSBlbGVtZW50IGluIHRoaXMgZHJhd2luZy5cclxuICAgICAgICAgIC8vIElmIHRoZXJlIGlzIG5vIHJlcHJlc2VudGF0aW9uIGZvciBpdCBnZXQgYWxsIGl0cyBlbGVtZW50cyBhbmQgaWYgYXQgbGVhc3Qgb25lIGlzIGZvdW5kIGNyZWF0ZSB0aGUgcmVwcmVzZW50YXRpb24uXHJcbiAgICAgICAgICBjb25zdCBlbGVtc0ZvckNvbW1lbnRSZXByZXNlbnRhdGlvbjogU1ZHR0VsZW1lbnRbXSA9IFtdO1xyXG4gICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmNvbW1lbnRzW2pdLmVsZW1lbnRzSWRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGVsZW1lbnQgPSBkcmF3aW5nLmNvbnRlbnQucXVlcnlTZWxlY3RvcignW2RhdGEtaWQ9XCInICsgdGhpcy5jb21tZW50c1tqXS5lbGVtZW50c0lkc1tpXSArICdcIl0nKSBhcyBTVkdHRWxlbWVudDtcclxuICAgICAgICAgICAgaWYgKGVsZW1lbnQgIT09IG51bGwpXHJcbiAgICAgICAgICAgICAgZWxlbXNGb3JDb21tZW50UmVwcmVzZW50YXRpb24ucHVzaChlbGVtZW50KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGlmIChlbGVtc0ZvckNvbW1lbnRSZXByZXNlbnRhdGlvbi5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29tbWVudHNbal0uY3JlYXRlUmVwcmVzZW50YXRpb24oZHJhd2luZy5jb21tZW50c0dyb3VwLCBlbGVtc0ZvckNvbW1lbnRSZXByZXNlbnRhdGlvbik7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFRPRE86IFNldCB2aXNpYmlsaXR5IG9mIHRoZSBncm91cC5cclxuICAgICAgfVxyXG4gICAgICAvLyBTZXQgdGhlIGNvbW1lbnRzQ2hhbmdlZCBwcm9wZXJ0eSB0byBmYWxzZSB0byBpbmRpY2F0ZSB0aGF0IGl0IGlzIHVwZGF0ZWQuXHJcbiAgICAgIGRyYXdpbmcuY29tbWVudHNDaGFuZ2VkID0gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gVE9ETyBDb3VsZCBiZSByZW1vdmVkIGJlY2F1c2UgdG9vbCB0YWtlcyB0aGUgYWN0aXZlIGRyYXdpZ24gZnJvbSB0aGUgd29ya3NwYWNlXHJcbiAgICAvLyBVcGRhdGUgdGhlICdhY3RpdmVEcmF3aW5nJyBpbiB0aGUgJ2FjdGl2ZVRvb2wnLlxyXG4gICAgLy8gaWYgKHRoaXMuYWN0aXZlVG9vbCkge1xyXG4gICAgLy8gICB0aGlzLmFjdGl2ZVRvb2wuYWN0aXZlRHJhd2luZyA9IGRyYXdpbmc7XHJcbiAgICAvLyB9XHJcblxyXG4gICAgLy8gSWYgdGhlcmUgYXJlIHNlbGVjdGVkIGVsZW1lbnRzIGluIHRoZSBuZXcgZHJhd2luZyBhZGQgdGhlIHNlbGVjdGlvbiBhcHBlYXJhbmNlIHRvIHRoZW0uXHJcbiAgICBpZiAodGhpcy5hY3RpdmVUb29sICYmIHRoaXMuYWN0aXZlVG9vbC5jdXJyZW50U2VsZWN0aW9uLmxlbmd0aCA+IDApIHtcclxuICAgICAgdGhpcy5hY3RpdmVUb29sLmFkZERyYXdpbmdTZWxlY3Rpb25BcHBlYXJhbmNlKGRyYXdpbmcpO1xyXG4gICAgfVxyXG5cclxuICAgIGRyYXdpbmcuY29udGVudC5zdHlsZS52aXNpYmlsaXR5ID0gJ3Vuc2V0JztcclxuXHJcbiAgICAvLyBTZXQgdGhlIGRyYXdpbmcgYXMgYWN0aXZlLlxyXG4gICAgdGhpcy5hY3RpdmVEcmF3aW5nID0gZHJhd2luZztcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIENyZWF0ZXMgdGhlIGJ1dHRvbnMgZm9yIHRoZSBkcmF3aW5ncyB0byBiZSBkaXNwbGF5ZWQuXHJcbiAgICogQHBhcmFtIHtBcnJheX0gZHJhd2luZ3MgQXJyYXkgd2l0aCB0aGUgZHJhd2luZyBvYmplY3RzLlxyXG4gICAqL1xyXG4gIGNyZWF0ZURyYXdpbmdzQnRucyhkcmF3aW5nczogRHJhd2luZ1tdKSB7XHJcbiAgICBsZXQgZHJhd2luZ3NJdGVtczogc3RyaW5nW10gPSBbXTtcclxuICAgIGRyYXdpbmdzLmZvckVhY2goZHJhd2luZyA9PiB7XHJcbiAgICAgIC8vIENvdWxkIGJlIHRoYXQgdGhlcmUgaXMgbm8gaWQgaWYgdGhlIHByb2plY3Qgd2FzIHVwbG9hZGVkIGFuZCBpdCBpcyBvbmx5IGxvY2FsLlxyXG4gICAgICBkcmF3aW5nc0l0ZW1zLnB1c2goYDxsaSAke2RyYXdpbmcuaWQgPyAnZGF0YS1pZD1cXFwiJyArIGRyYXdpbmcuaWQgKyAnXFxcIicgOiAnJ30+JHtkcmF3aW5nLm5hbWV9PC9saT5gKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5kcmF3aW5nc0J0bnMucXVlcnlTZWxlY3RvcignLmRyb3Bkb3duLWNvbnRlbnQnKS5pbm5lckhUTUwgPSBkcmF3aW5nc0l0ZW1zLmpvaW4oJycpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ2xlYW5zIHRoZSB3b3Jrc3BhY2UgYnkgZW1wdHlpbmcgdGhlIGRyYXdpbmcgY29udGFpbmVyIGFuZCB0aGUgbGlzdCBvZiBkcmF3aW5ncy5cclxuICAgKiBUT0RPOiBSZW1vdmUgcG9zc2libGUgZXZlbnQgbGlzdGVuZXJzIGJlZm9yZSBlbXB0eWluZyBjb250YWluZXJzID9cclxuICAgKi9cclxuICBjbG9zZSgpIHtcclxuICAgIC8vIEVtcHR5IHRoZSBkcmF3aW5ncyBidXR0b25zIGNvbnRhaW5lci5cclxuICAgIEdlbmVyaWNzLmVtcHR5Tm9kZSh0aGlzLmRyYXdpbmdzQnRucy5xdWVyeVNlbGVjdG9yKCcuZHJvcGRvd24tY29udGVudCcpKTtcclxuICAgIC8vIFJlbW92ZSB0aGUgY3JlYXRlIHN0eWxlIHRhZyBmb3IgdGhlIHN0eWxlcyBvZiB0aGUgZHJhd2luZ3MuXHJcbiAgICBpZiAodGhpcy5kcmF3aW5nc1N0eWxlc1RhZyAhPT0gdW5kZWZpbmVkKVxyXG4gICAgICB0aGlzLmRyYXdpbmdzU3R5bGVzVGFnLnJlbW92ZSgpO1xyXG4gICAgLy8gUmVtb3ZlIHRoZSBtYWluIHBhbmVsLiAgIFxyXG4gICAgLy90aGlzLm1haW5QYW5lbC5raWxsKCk7XHJcbiAgICAvLyBUT0RPOiBJZiBpbiBmdXR1cmUgdmVyc2lvbiB0aGVyZSBhcmUgZWxlbWVudHMgaW4gdGhlIHN2ZyB3aXRoIGV2ZW50IGxpc3RlbmVycyB0aG9zZSBzaG91bGQgYmUgZGVsZXRlZFxyXG4gICAgdGhpcy5kcmF3aW5nc0NvbnRhaW5lci5pbm5lckhUTUwgPSAnJztcclxuICB9XHJcbn0iLCJpbXBvcnQgdHlwZSB7IFdvcmtzcGFjZSB9IGZyb20gXCIuLi93b3Jrc3BhY2VcIjtcclxuXHJcbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBUb29sIHtcclxuICBuYW1lOiBzdHJpbmc7XHJcbiAgdG9vbEJ0bjogSFRNTEVsZW1lbnQ7XHJcbiAgd29ya3NwYWNlOiBXb3Jrc3BhY2U7XHJcbiAgXHJcbiAgY29uc3RydWN0b3IobmFtZTogc3RyaW5nLCB0b29sQnRuOiBIVE1MRWxlbWVudCwgd29ya3NwYWNlOiBXb3Jrc3BhY2UpIHtcclxuICAgIHRoaXMubmFtZSA9IG5hbWU7XHJcbiAgICB0aGlzLnRvb2xCdG4gPSB0b29sQnRuO1xyXG4gICAgdGhpcy53b3Jrc3BhY2UgPSB3b3Jrc3BhY2U7XHJcbiAgICB0aGlzLnRvb2xCdG4uY2xhc3NMaXN0LmFkZCgnYnRuLXRvb2wtZW5hYmxlZCcpO1xyXG4gIH1cclxuXHJcbiAga2lsbCgpIHtcclxuICAgIHRoaXMudG9vbEJ0bi5jbGFzc0xpc3QucmVtb3ZlKCdidG4tdG9vbC1lbmFibGVkJyk7XHJcbiAgfVxyXG59IiwiaW1wb3J0IHsgVG9vbCB9IGZyb20gJy4vdG9vbCc7XHJcbmltcG9ydCB0eXBlIHsgV29ya3NwYWNlIH0gZnJvbSAnLi4vd29ya3NwYWNlJztcclxuaW1wb3J0IHR5cGUgeyBEcmF3aW5nIH0gZnJvbSAnLi4vZHJhd2luZyc7XHJcblxyXG5leHBvcnQgY2xhc3MgRWxlbWVudFNlbGVjdGlvbiBleHRlbmRzIFRvb2wge1xyXG4gIGN1cnJlbnRTZWxlY3Rpb246IGFueSA9IFtdOyAvLyBUT0RPIGFycmF5IG9mIHdoYXQ/IFRPRE8gVGhpcyBjb3VsZCBiZSBhIHByb3BlcnR5IG9mIHRoZSB3b3Jrc3BhY2U/XHJcbiAgc2VsZWN0aW9uOiBTVkdHRWxlbWVudDsgLy8gVE9ETzogUmVuYW1lIGFzIGNsaWNrZWRFbGVtZW50ID9cclxuICAvKipcclxuICAgKiBPdmVycmlkZSB0aGlzIHZhbHVlIHRvIGFsbG93IG11bHRpcGxlIHNlbGVjdGlvbiBvbiBhIHRvb2wuIERlZmF1bHQgZmFsc2UuXHJcbiAgICovXHJcbiAgbXVsdGlwbGVTZWxlY3Rpb24gPSBmYWxzZTtcclxuXHJcbiAgY29uc3RydWN0b3IobmFtZTogc3RyaW5nLCB0b29sQnRuOiBIVE1MRWxlbWVudCwgd29ya3NwYWNlOiBXb3Jrc3BhY2UpIHtcclxuICAgIHN1cGVyKG5hbWUsIHRvb2xCdG4sIHdvcmtzcGFjZSk7XHJcblxyXG4gICAgdGhpcy5tYW5hZ2VTZWxlY3Rpb24gPSB0aGlzLm1hbmFnZVNlbGVjdGlvbi5iaW5kKHRoaXMpO1xyXG4gICAgd29ya3NwYWNlLmRyYXdpbmdzQ29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5tYW5hZ2VTZWxlY3Rpb24pO1xyXG4gIH1cclxuXHJcblxyXG4gIC8qKioqKioqKioqKioqKioqKioqKiogU0VMRUNUSU9OIE9GIEVMRU1FTlRTICoqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbiAgLyoqXHJcbiAgICogTWFuYWdlcyB0aGUgc2VsZWN0aW9uIGFuZCBkZXNlbGVjdGlvbiBvZiB0aGUgc3ZnIGVsZW1lbnRzLlxyXG4gICAqIFRoaXMgc2hvdWxkIGJlIGV4dGVuZGVkIHRvIG9idGFpbiB0aGUgc2VsZWN0ZWQgZWxlbWVudC9zLlxyXG4gICAqIElmIG11bHRpcGxlIHNlbGVjdGlvbiBpcyByZXF1aXJlZCBzZXQgdGhlIGluaGVyaXRlZCBmaWVsZCAnbXVsdGlwbGVTZWxlY3Rpb24nXHJcbiAgICogdG8gdHJ1ZSBmb3IgZXhhbXBsZSBpbiB0aGUgY29uc3RydWN0b3Igb2YgdGhlIGV4dGVuZGluZyBjbGFzcy4gRGVmYXVsdCBpcyBmYWxzZS5cclxuICAgKi9cclxuICBtYW5hZ2VTZWxlY3Rpb24oZTogTW91c2VFdmVudCkge1xyXG4gICAgdGhpcy5zZWxlY3Rpb24gPSAoZS50YXJnZXQgYXMgU1ZHRWxlbWVudCkuY2xvc2VzdCgnW3NlbGVjdGFibGVdJyk7XHJcbiAgICBpZiAodGhpcy5zZWxlY3Rpb24gIT09IG51bGwpIHtcclxuICAgICAgaWYgKHRoaXMubXVsdGlwbGVTZWxlY3Rpb24pIHtcclxuICAgICAgICBjb25zdCBpbmRleCA9IHRoaXMuY3VycmVudFNlbGVjdGlvbi5pbmRleE9mKHRoaXMuc2VsZWN0aW9uLmRhdGFzZXQuaWQpO1xyXG4gICAgICAgIGlmIChpbmRleCA9PT0gLTEpIHtcclxuICAgICAgICAgIHRoaXMuc2VsZWN0KHRoaXMuc2VsZWN0aW9uKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgdGhpcy5kZXNlbGVjdCh0aGlzLnNlbGVjdGlvbi5kYXRhc2V0LmlkKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudFNlbGVjdGlvbi5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgIHRoaXMuc2VsZWN0KHRoaXMuc2VsZWN0aW9uKTtcclxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuc2VsZWN0aW9uLmRhdGFzZXQuaWQgIT09IHRoaXMuY3VycmVudFNlbGVjdGlvblswXSkge1xyXG4gICAgICAgICAgdGhpcy5kZXNlbGVjdCh0aGlzLmN1cnJlbnRTZWxlY3Rpb25bMF0pO1xyXG4gICAgICAgICAgdGhpcy5zZWxlY3QodGhpcy5zZWxlY3Rpb24pO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5zZWxlY3Rpb24uZGF0YXNldC5pZCA9PT0gdGhpcy5jdXJyZW50U2VsZWN0aW9uWzBdKSB7XHJcbiAgICAgICAgICB0aGlzLmRlc2VsZWN0KHRoaXMuY3VycmVudFNlbGVjdGlvblswXSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmNsZWFyQWxsU2VsZWN0aW9uKCk7XHJcbiAgICB9XHJcbiAgICBjb25zb2xlLmxvZygnU2VsZWN0aW9uICcsIHRoaXMuY3VycmVudFNlbGVjdGlvbik7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBTZWxlY3RzIHRoZSBzcGVjaWZpZWQgZWxlbWVudCBieSBhZGRpbmcgaXQgdG8gdGhlIGFycmF5IG9mIHNlbGVjdGVkXHJcbiAgICogZWxlbWVudHMgYW5kIHNldHRpbmcgaXRzIGFwcGVhcmFuY2UgYXMgc2VsZWN0ZWQuXHJcbiAgICogQHBhcmFtIGVsZW1lbnQgQW4gU1ZHIHNlbGVjdGFibGUgZWxlbWVudC5cclxuICAgKi9cclxuICBzZWxlY3QoZWxlbWVudDogU1ZHR0VsZW1lbnQpIHtcclxuICAgIHRoaXMuY3VycmVudFNlbGVjdGlvbi5wdXNoKGVsZW1lbnQuZGF0YXNldC5pZCk7XHJcbiAgICB0aGlzLmFkZFNlbGVjdGlvbkFwcGVhcmFuY2UoZWxlbWVudCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBEZXNlbGVjdHMgdGhlIHNwZWNpZmllZCBlbGVtZW50IGJ5IHJlbW92aW5nIGl0IGZyb20gdGhlIGFycmF5IG9mIHNlbGVjdGVkIGVsZW1lbnRzXHJcbiAgICogYW5kIHJlbW92aW5nIHRoZSBzZWxlY3RlZCBhcHBlYXJhbmNlIGl0IGhhcyBpbiB0aGUgYWN0aXZlIGRyYXdpbmcuXHJcbiAgICogQHBhcmFtIGVsZW1lbnRJZCBBbiBTVkcgc2VsZWN0YWJsZSBlbGVtZW50LlxyXG4gICAqL1xyXG4gIGRlc2VsZWN0KGVsZW1lbnRJZDogc3RyaW5nKSB7XHJcbiAgICAvL2NvbnN0IGluZGV4ID0gdGhpcy5jdXJyZW50U2VsZWN0aW9uLmZpbmRJbmRleChlbCA9PiBlbC5kYXRhc2V0LmlkID09PSBlbGVtZW50LmRhdGFzZXQuaWQpO1xyXG4gICAgY29uc3QgaW5kZXggPSB0aGlzLmN1cnJlbnRTZWxlY3Rpb24uaW5kZXhPZihlbGVtZW50SWQpO1xyXG4gICAgaWYgKGluZGV4ID4gLTEpIHtcclxuICAgICAgdGhpcy5jdXJyZW50U2VsZWN0aW9uLnNwbGljZShpbmRleCwgMSk7XHJcbiAgICAgIGNvbnN0IGVsID0gdGhpcy53b3Jrc3BhY2UuYWN0aXZlRHJhd2luZy5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWlkPVwiJyArIGVsZW1lbnRJZCArICdcIl0nKSBhcyBTVkdHRWxlbWVudDtcclxuICAgICAgaWYgKGVsKSB0aGlzLmNsZWFyU2VsZWN0aW9uQXBwZWFyYW5jZShlbCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBSZW1vdmVzIHRoZSBzZWxlY3Rpb24gYXBwZWFyYW5jZSBmcm9tIGFueSBzZWxlY3RlZCBlbGVtZW50IGluIHRoZSBwcm92aWRlZCBkcmF3aW5nLlxyXG4gICAqIEl0IGRvZXMgbm90IHJlbW92ZSBpdHMgaWQgZnJvbSB0aGUgYXJyYXkgb2Ygc2VsZWN0ZWQgZWxlbWVudHMuIFxyXG4gICAqL1xyXG4gIHJlbW92ZURyYXdpbmdTZWxlY3Rpb25BcHBlYXJhbmNlKGRyYXdpbmc6IERyYXdpbmcpIHtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5jdXJyZW50U2VsZWN0aW9uLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIGNvbnN0IGVsZW1lbnQgPSBkcmF3aW5nLmNvbnRlbnQucXVlcnlTZWxlY3RvcignW2RhdGEtaWQ9XCInICsgdGhpcy5jdXJyZW50U2VsZWN0aW9uW2ldICsgJ1wiXScpIGFzIFNWR0dFbGVtZW50O1xyXG4gICAgICBpZiAoZWxlbWVudCkgdGhpcy5jbGVhclNlbGVjdGlvbkFwcGVhcmFuY2UoZWxlbWVudCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBBZGRzIHRoZSBzZWxlY3Rpb24gYXBwZWFyYW5jZSB0byBhbnkgZWxlbWVudCBpbiB0aGUgYXJyYXkgb2Ygc2VsZWN0ZWQgZWxlbWVudHMgdGhhdFxyXG4gICAqIGlzIGluIHRoZSBwcm92aWRlZCBkcmF3aW5nLlxyXG4gICAqL1xyXG4gIGFkZERyYXdpbmdTZWxlY3Rpb25BcHBlYXJhbmNlKGRyYXdpbmc6IERyYXdpbmcpIHtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5jdXJyZW50U2VsZWN0aW9uLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIGNvbnN0IGVsZW1lbnQgPSBkcmF3aW5nLmNvbnRlbnQucXVlcnlTZWxlY3RvcignW2RhdGEtaWQ9XCInICsgdGhpcy5jdXJyZW50U2VsZWN0aW9uW2ldICsgJ1wiXScpIGFzIFNWR0dFbGVtZW50O1xyXG4gICAgICBpZiAoZWxlbWVudCkgdGhpcy5hZGRTZWxlY3Rpb25BcHBlYXJhbmNlKGVsZW1lbnQpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogUmVtb3ZlcyB0aGUgc2VsZWN0ZWQgYXBwZWFyYW5jZSBvZiB0aGUgcHJvdmlkZWQgZWxlbWVudC5cclxuICAgKiBJdCBkb2VzIG5vdCByZW1vdmVzIHRoZSBlbGVtZW50IGZyb20gdGhlIGFycmF5IG9mIHNlbGVjdGVkIGVsZW1lbnRzLlxyXG4gICAqIEBwYXJhbSBlbGVtZW50IEFuIFNWRyBzZWxlY3RhYmxlIGVsZW1lbnQuXHJcbiAgICovXHJcbiAgY2xlYXJTZWxlY3Rpb25BcHBlYXJhbmNlKGVsZW1lbnQ6IFNWR0dFbGVtZW50KSB7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGVsZW1lbnQuY2hpbGRyZW4ubGVuZ3RoOyBpKyspXHJcbiAgICAgIGVsZW1lbnQuY2hpbGRyZW5baV0uY2xhc3NMaXN0LnJlbW92ZSgnc2VsZWN0ZWQnKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFNldHMgdGhlIGFwcGVhcmFuY2Ugb2YgdGhlIHByb3ZpZGVkIGVsZW1lbnQgYXMgc2VsZWN0ZWQuXHJcbiAgICogSXQgZG9lcyBub3QgYWRkIHRoZSBlbGVtZW50IHRvIHRoZSBhcnJheSBvZiBzZWxlY3RlZCBlbGVtZW50cy5cclxuICAgKiBAcGFyYW0gZWxlbWVudCBBbiBTVkcgc2VsZWN0YWJsZSBlbGVtZW50LlxyXG4gICAqL1xyXG4gIGFkZFNlbGVjdGlvbkFwcGVhcmFuY2UoZWxlbWVudDogU1ZHR0VsZW1lbnQpIHtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZWxlbWVudC5jaGlsZHJlbi5sZW5ndGg7IGkrKylcclxuICAgICAgZWxlbWVudC5jaGlsZHJlbltpXS5jbGFzc0xpc3QuYWRkKCdzZWxlY3RlZCcpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogUmVtb3ZlcyB0aGUgc2VsZWN0aW9uIGZyb20gYWxsIHRoZSBzZWxlY3RlZCBlbGVtZW50cyBhcyB3ZWxsIGFzIHRoZVxyXG4gICAqIHNlbGVjdGlvbiBhcHBlYXJhbmNlIGZyb20gYWxsIHRoZSBzZWxlY3RlZCBlbGVtZW50cyBpbiB0aGUgYWN0aXZlIGRyYXdpbmcuXHJcbiAgICovXHJcbiAgY2xlYXJBbGxTZWxlY3Rpb24oKSB7XHJcbiAgICBpZiAodGhpcy5jdXJyZW50U2VsZWN0aW9uLmxlbmd0aCA+IDApIHtcclxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmN1cnJlbnRTZWxlY3Rpb24ubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBjb25zdCBlbGVtZW50ID0gdGhpcy53b3Jrc3BhY2UuYWN0aXZlRHJhd2luZy5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWlkPVwiJyArIHRoaXMuY3VycmVudFNlbGVjdGlvbltpXSArICdcIl0nKSBhcyBTVkdHRWxlbWVudDtcclxuICAgICAgICBpZiAoZWxlbWVudCkgdGhpcy5jbGVhclNlbGVjdGlvbkFwcGVhcmFuY2UoZWxlbWVudCk7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5jdXJyZW50U2VsZWN0aW9uLmxlbmd0aCA9IDA7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBHZXRzIGFuIGFycmF5IG9mIHJlZmVyZW5jZXMgb2YgU1ZHR0VsZW1lbnRzIGluIHRoZSBkcmF3aW5nIHRoYXQgYXJlIGN1cnJlbnRseSBzZWxlY3RlZC5cclxuICAgKiBOZWVkZWQgYmVjYXVzZSBub3QgYWxsIHNlbGVjdGVkIGVsZW1lbnRzIG1heSBhcHBlYXIgaW4gYSBkcmF3aW5nLiBcclxuICAgKi9cclxuICBnZXREcmF3aW5nU2VsZWN0ZWRFbGVtZW50c1JlZnMoZHJhd2luZzogRHJhd2luZykge1xyXG4gICAgY29uc3Qgc2VsZWN0ZWRFbGVtZW50cyA9IFtdO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmN1cnJlbnRTZWxlY3Rpb24ubGVuZ3RoOyBpKyspIHtcclxuICAgICAgY29uc3QgZWxlbWVudCA9IGRyYXdpbmcuY29udGVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1pZD1cIicgKyB0aGlzLmN1cnJlbnRTZWxlY3Rpb25baV0gKyAnXCJdJyk7XHJcbiAgICAgIGlmIChlbGVtZW50KSBzZWxlY3RlZEVsZW1lbnRzLnB1c2goZWxlbWVudCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gc2VsZWN0ZWRFbGVtZW50cztcclxuICB9XHJcblxyXG4gIGtpbGwoKSB7XHJcbiAgICBzdXBlci5raWxsKCk7XHJcbiAgICB0aGlzLndvcmtzcGFjZS5kcmF3aW5nc0NvbnRhaW5lci5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMubWFuYWdlU2VsZWN0aW9uKTtcclxuICAgIHRoaXMuY2xlYXJBbGxTZWxlY3Rpb24oKTtcclxuICB9XHJcbn0iLCJpbXBvcnQgeyBFbGVtZW50U2VsZWN0aW9uIH0gZnJvbSAnLi9lbGVtZW50U2VsZWN0aW9uJztcclxuaW1wb3J0IHsgQ29tbWVudCB9IGZyb20gJy4vLi4vY29tbWVudCc7XHJcbmltcG9ydCBBUEkgZnJvbSAnLi8uLi9hcGknO1xyXG5cclxuZXhwb3J0IGNsYXNzIEFkZENvbW1lbnQgZXh0ZW5kcyBFbGVtZW50U2VsZWN0aW9uIHtcclxuICBjb25zdHJ1Y3RvcihuYW1lLCB0b29sQnRuLCB3b3Jrc3BhY2UpIHtcclxuICAgIHN1cGVyKG5hbWUsIHRvb2xCdG4sIHdvcmtzcGFjZSk7XHJcbiAgICBjb25zb2xlLmxvZygnQ29tbWVudCBlbGVtZW50IHRvb2wgZW5hYmxlZC4nKTtcclxuICAgIHRoaXMubXVsdGlwbGVTZWxlY3Rpb24gPSB0cnVlO1xyXG4gICAgdGhpcy5ib3VuZGluZ0JveDtcclxuICAgIHRoaXMud2FpdGluZ0ZvckNvbW1lbnQgPSBmYWxzZTsgLy8gVE9ETyB1c2UgdGhpcyBpbnN0ZWFkIHRvIGF2b2lkIGNoYW5naW5nIGRyYXdpbmc/XHJcbiAgICB0aGlzLmNhbmNlbENvbW1lbnQgPSB0aGlzLmNhbmNlbENvbW1lbnQuYmluZCh0aGlzKTtcclxuICAgIHdvcmtzcGFjZS5jb21tZW50Rm9ybS5jYW5jZWxDcmVhdGVCdG4ub25jbGljayA9IHRoaXMuY2FuY2VsQ29tbWVudDtcclxuICAgIGlmICh3b3Jrc3BhY2UucGVybWlzc2lvbnMubGVuZ3RoID4gMSkgeyAvLyBUaGVyZSBpcyBhbHdheXMgYXQgbGVhc3QgdGhlIG93bmVyLlxyXG4gICAgICBjb25zdCBtZW1iZXJzRW1haWxzID0gW107XHJcbiAgICAgIGNvbnN0IGN1cnJlbnRVc2VyRW1haWwgPSB3aW5kb3cuZ2V0Q3VycmVudFVzZXIoKS5lbWFpbEFkZHJlc3M7XHJcbiAgICAgIHdvcmtzcGFjZS5wZXJtaXNzaW9ucy5mb3JFYWNoKG1lbWJlciA9PiB7XHJcbiAgICAgICAgaWYgKG1lbWJlci5lbWFpbEFkZHJlc3MgIT09IGN1cnJlbnRVc2VyRW1haWwpIHtcclxuICAgICAgICAgIG1lbWJlcnNFbWFpbHMucHVzaChgPG9wdGlvbiB2YWx1ZT1cIiR7bWVtYmVyLmVtYWlsQWRkcmVzc31cIj4ke21lbWJlci5kaXNwbGF5TmFtZX08L29wdGlvbj5gKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgICB3b3Jrc3BhY2UuY29tbWVudEZvcm0ubWVudGlvbnNJbnB1dC5pbm5lckhUTUwgPSBtZW1iZXJzRW1haWxzLmpvaW4oJycpO1xyXG4gICAgICB3b3Jrc3BhY2UuY29tbWVudEZvcm0uc2hvd01lbnRpb25zU2VjdGlvbigpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgd29ya3NwYWNlLmNvbW1lbnRGb3JtLmhpZGVNZW50aW9uc1NlY3Rpb24oKTtcclxuICAgIH1cclxuICAgIHRoaXMuYWRkQ29tbWVudCA9IHRoaXMuYWRkQ29tbWVudC5iaW5kKHRoaXMpO1xyXG4gICAgd29ya3NwYWNlLmNvbW1lbnRGb3JtLmFkZENvbW1lbnRCdG4ub25jbGljayA9IHRoaXMuYWRkQ29tbWVudDtcclxuICAgIC8vIEl0IGNvdWxkIGJlIGRpc2FibGVkIGFuZCBvciBmdWxsIGlmIHRoZSBwcmV2aW91cyB1c2Ugd2FzIHZpZXcgbW9kZS5cclxuICAgIHdvcmtzcGFjZS5jb21tZW50Rm9ybS5lbmFibGVGb3JtKCk7XHJcbiAgICB3b3Jrc3BhY2UuY29tbWVudEZvcm0ucmVzZXQoKTtcclxuICAgIC8vIFRoaXMgY291bGQgYmUgYSBwcm9wZXJ0eSBvZiB0aGUgVG9vbCBjbGFzcy5cclxuICAgIHRoaXMuaGFzVXNlZFBhbmVsID0gZmFsc2U7XHJcbiAgfVxyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kcyB0aGUgbWV0aG9kIG9mIHRoZSBzdXBlciBjbGFzcyB0byBnZXQgdGhlIHNlbGVjdGVkIGVsZW1lbnQuXHJcbiAgICogQHBhcmFtIHtNb3VzZUV2ZW50fSBlIFRoZSBjbGljayBldmVudC5cclxuICAgKi9cclxuICBtYW5hZ2VTZWxlY3Rpb24oZSkge1xyXG4gICAgc3VwZXIubWFuYWdlU2VsZWN0aW9uKGUpO1xyXG4gICAgaWYgKHRoaXMuY3VycmVudFNlbGVjdGlvbi5sZW5ndGggPiAwKSB7XHJcbiAgICAgIHRoaXMud2FpdGluZ0ZvckNvbW1lbnQgPSB0cnVlO1xyXG4gICAgICAvLyBTaG93IHRoZSBmb3JtIHRvIGFkZCB0aGUgY29tbWVudC5cclxuICAgICAgLy8gVE9ETyBPcGVuIHRoZSBwYW5lbCB3aGVuIGFjdGl2YXRpbmcgdGhlIHRvb2wgaW5zdGVhZC5cclxuICAgICAgdGhpcy53b3Jrc3BhY2UuY29tbWVudEZvcm0uYnV0dG9uc1Zpc2liaWxpdHlNb2RlKCdjcmVhdGUnKTtcclxuICAgICAgdGhpcy53b3Jrc3BhY2UubWFpblBhbmVsLmFkZFNlY3Rpb24oJ0NvbW1lbnQnLCB0aGlzLndvcmtzcGFjZS5jb21tZW50Rm9ybS5mb3JtRWxlbWVudCk7XHJcbiAgICAgIHRoaXMud29ya3NwYWNlLm1haW5QYW5lbC5vcGVuKCk7XHJcbiAgICAgIHRoaXMuaGFzVXNlZFBhbmVsID0gdHJ1ZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMud2FpdGluZ0ZvckNvbW1lbnQgPSBmYWxzZTtcclxuICAgIH1cclxuICB9XHJcblxyXG5cclxuICBhZGRDb21tZW50KCkge1xyXG4gICAgaWYgKHRoaXMuY3VycmVudFNlbGVjdGlvbi5sZW5ndGggPT09IDApIHJldHVybjtcclxuICAgIC8vIElmICdhY3RpdmVEcmF3aW5nJyBkb2VzbnQgaGF2ZSBhIGdyb3VwIGZvciBjb21tZW50cyBjcmVhdGUgaXQuXHJcbiAgICBpZiAodGhpcy53b3Jrc3BhY2UuYWN0aXZlRHJhd2luZy5jb21tZW50c0dyb3VwID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgdGhpcy53b3Jrc3BhY2UuYWN0aXZlRHJhd2luZy5jcmVhdGVDb21tZW50c0dyb3VwKCk7XHJcbiAgICB9XHJcbiAgICAvLyBNZW50aW9ucyBpcyBvbmx5IHRyZWF0ZWQgaWYgdGhlcmUgaXMgbW9yZSB0aGFuIG9uZSBtZW1iZXIgaW4gdGhlIHRlYW0uXHJcbiAgICBsZXQgc2VsZWN0ZWRFbWFpbHM7XHJcbiAgICBpZiAodGhpcy53b3Jrc3BhY2UucGVybWlzc2lvbnMubGVuZ3RoID4gMSkgeyAvLyB0aGVyZSBpcyBhbHdheXMgYXQgbGVhc3QgdGhlIG93bmVyXHJcbiAgICAgIHNlbGVjdGVkRW1haWxzID0gdGhpcy53b3Jrc3BhY2UuY29tbWVudEZvcm0uZ2V0U2VsZWN0ZWRNZW1iZXJzKCk7XHJcbiAgICAgIGlmIChzZWxlY3RlZEVtYWlscy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgY29uc3QgY3VycmVudFVzZXJOYW1lID0gd2luZG93LmdldEN1cnJlbnRVc2VyKCkuZGlzcGxheU5hbWU7XHJcbiAgICAgICAgY29uc3QgY3VycmVudFVzZXJQaG90byA9IHdpbmRvdy5nZXRDdXJyZW50VXNlcigpLnBob3RvTGluaztcclxuICAgICAgICB0aGlzLndvcmtzcGFjZS5wZW5kaW5nTm90aWZpY2F0aW9uc1RvU2VuZC5wdXNoKHtcclxuICAgICAgICAgIGVtYWlsczogc2VsZWN0ZWRFbWFpbHMsXHJcbiAgICAgICAgICB1c2VyTmFtZTogY3VycmVudFVzZXJOYW1lLFxyXG4gICAgICAgICAgdXNlclBob3RvOiBjdXJyZW50VXNlclBob3RvLFxyXG4gICAgICAgICAgdGV4dENvbnRlbnQ6IHRoaXMud29ya3NwYWNlLmNvbW1lbnRGb3JtLnRleHRJbnB1dC52YWx1ZSxcclxuICAgICAgICAgIHByb2plY3ROYW1lOiB0aGlzLndvcmtzcGFjZS5wcm9qZWN0TmFtZSxcclxuICAgICAgICAgIHByb2plY3RJZDogdGhpcy53b3Jrc3BhY2UucHJvamVjdElkXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGNvbnN0IGNvbW1lbnQgPSBuZXcgQ29tbWVudCh0aGlzLmN1cnJlbnRTZWxlY3Rpb24sIHRoaXMud29ya3NwYWNlLmNvbW1lbnRGb3JtLnRleHRJbnB1dC52YWx1ZSwgc2VsZWN0ZWRFbWFpbHMpO1xyXG4gICAgLy8gR2V0IHJlZmVyZW5jZXMgdG8gdGhlIGVsZW1lbnRzIGluIHRoZSBkcmF3aW5nIHRvIHBhc3MgdGhlbVxyXG4gICAgY29uc3Qgc2VsRWxlbWVudHNSZWYgPSB0aGlzLmdldERyYXdpbmdTZWxlY3RlZEVsZW1lbnRzUmVmcyh0aGlzLndvcmtzcGFjZS5hY3RpdmVEcmF3aW5nKTtcclxuICAgIGNvbW1lbnQuY3JlYXRlUmVwcmVzZW50YXRpb24odGhpcy53b3Jrc3BhY2UuYWN0aXZlRHJhd2luZy5jb21tZW50c0dyb3VwLCBzZWxFbGVtZW50c1JlZik7IC8vIFRPRE8gcmVwbGFjZSBieSB0aGUgbmV3IG1ldGhvZCEhIVxyXG4gICAgLy8gQWRkIGNvbW1lbnQgaWQgdG8gYWxsIHRoZSBlbGVtZW50IGFycmF5cyBpbiB0aGUgb2JqIFdvcmtzcGFjZS5lbGVtZW50c0NvbW1lbnRzLlxyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmN1cnJlbnRTZWxlY3Rpb24ubGVuZ3RoOyBpKyspIHtcclxuICAgICAgaWYgKCF0aGlzLndvcmtzcGFjZS5lbGVtZW50c0NvbW1lbnRzLmhhc093blByb3BlcnR5KHRoaXMuY3VycmVudFNlbGVjdGlvbltpXSkpXHJcbiAgICAgICAgdGhpcy53b3Jrc3BhY2UuZWxlbWVudHNDb21tZW50c1t0aGlzLmN1cnJlbnRTZWxlY3Rpb25baV1dID0gW107XHJcbiAgICAgIHRoaXMud29ya3NwYWNlLmVsZW1lbnRzQ29tbWVudHNbdGhpcy5jdXJyZW50U2VsZWN0aW9uW2ldXS5wdXNoKGNvbW1lbnQuaWQpO1xyXG4gICAgfVxyXG4gICAgY29uc29sZS5sb2coJ2VsZW1lbnRzQ29tbWVudHMgJywgdGhpcy53b3Jrc3BhY2UuZWxlbWVudHNDb21tZW50cyk7XHJcbiAgICB0aGlzLndvcmtzcGFjZS5jb21tZW50cy5wdXNoKGNvbW1lbnQpO1xyXG4gICAgY29uc29sZS5sb2codGhpcy53b3Jrc3BhY2UuY29tbWVudHMpO1xyXG4gICAgdGhpcy53b3Jrc3BhY2UuY29tbWVudEZvcm0ucmVzZXQoKTtcclxuICAgIHRoaXMud29ya3NwYWNlLm1haW5QYW5lbC5jbG9zZSgpO1xyXG4gICAgdGhpcy53YWl0aW5nRm9yQ29tbWVudCA9IGZhbHNlO1xyXG4gICAgLy8gV29ya3NwYWNlIG1ldGhvZCB0byBpbmRpY2F0ZSB0aGF0IHRoZXJlIGFyZSB1bnNhdmVkIGNoYW5nZXMgb24gY29tbWVudHMuXHJcbiAgICB0aGlzLndvcmtzcGFjZS51bnNhdmVkQ29tbWVudHNEYXRhKCk7XHJcbiAgICB0aGlzLndvcmtzcGFjZS5kcmF3aW5ncy5mb3JFYWNoKGRyYXdpbmcgPT4ge1xyXG4gICAgICBpZiAoZHJhd2luZy5pZCAhPT0gdGhpcy53b3Jrc3BhY2UuYWN0aXZlRHJhd2luZy5pZCkge1xyXG4gICAgICAgIGRyYXdpbmcuY29tbWVudHNDaGFuZ2VkID0gdHJ1ZTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICBzdXBlci5jbGVhckFsbFNlbGVjdGlvbigpO1xyXG4gIH1cclxuXHJcblxyXG4gIGNhbmNlbENvbW1lbnQoKSB7XHJcbiAgICB0aGlzLndvcmtzcGFjZS5tYWluUGFuZWwuY2xvc2UoKTtcclxuICAgIHRoaXMud29ya3NwYWNlLmNvbW1lbnRGb3JtLnJlc2V0KCk7XHJcbiAgICB0aGlzLndhaXRpbmdGb3JDb21tZW50ID0gZmFsc2U7XHJcbiAgICBzdXBlci5jbGVhckFsbFNlbGVjdGlvbigpO1xyXG4gIH1cclxuXHJcblxyXG4gIGtpbGwoKSB7XHJcbiAgICBzdXBlci5raWxsKCk7XHJcbiAgICBjb25zb2xlLmxvZygnQ29tbWVudCBlbGVtZW50IHRvb2wgZGlzYWJsZWQuJyk7XHJcbiAgICBpZiAodGhpcy53YWl0aW5nRm9yQ29tbWVudCkge1xyXG4gICAgICB0aGlzLndvcmtzcGFjZS5jb21tZW50Rm9ybS5yZXNldCgpO1xyXG4gICAgICB0aGlzLndvcmtzcGFjZS5tYWluUGFuZWwuY2xvc2UoKTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzLmhhc1VzZWRQYW5lbCkge1xyXG4gICAgICB0aGlzLndvcmtzcGFjZS5tYWluUGFuZWwucmVtb3ZlU2VjdGlvbignQ29tbWVudCcpO1xyXG4gICAgfVxyXG4gICAgLy8gUmVtb3ZlIHRoZSB0b29sIGV2ZW50IGxpc3RlbmVycy5cclxuICAgIHRoaXMud29ya3NwYWNlLmNvbW1lbnRGb3JtLmFkZENvbW1lbnRCdG4ub25jbGljayA9IG51bGw7XHJcbiAgICB0aGlzLndvcmtzcGFjZS5jb21tZW50Rm9ybS5jYW5jZWxDcmVhdGVCdG4ub25jbGljayA9IG51bGw7XHJcbiAgfVxyXG59IiwiaW1wb3J0IEFQSSBmcm9tICcuLi9hcGknO1xyXG5pbXBvcnQgeyBFbGVtZW50U2VsZWN0aW9uIH0gZnJvbSAnLi9lbGVtZW50U2VsZWN0aW9uJztcclxuaW1wb3J0IEdlbmVyaWNzIGZyb20gJy4uL2dlbmVyaWNzJztcclxuXHJcbmV4cG9ydCBjbGFzcyBFbGVtZW50RGF0YSBleHRlbmRzIEVsZW1lbnRTZWxlY3Rpb24ge1xyXG4gIGNvbnN0cnVjdG9yKG5hbWUsIHRvb2xCdG4sIHdvcmtzcGFjZSkge1xyXG4gICAgc3VwZXIobmFtZSwgdG9vbEJ0biwgd29ya3NwYWNlKTtcclxuICAgIGNvbnNvbGUubG9nKCdFbGVtZW50cyBkYXRhIHRvb2wgZW5hYmxlZC4nKTtcclxuICAgIHRoaXMuZWxlbWVudHNEYXRhID0gd29ya3NwYWNlLmVsZW1lbnRzRGF0YTtcclxuICAgIHRoaXMucHJvamVjdHNEYXRhID0gd29ya3NwYWNlLnByb2plY3RzRGF0YTtcclxuICAgIHRoaXMucHJvamVjdEluZGV4ID0gd29ya3NwYWNlLnByb2plY3RJbmRleDtcclxuICAgIHRoaXMuY3VycmVudEVsZW1lbnREYXRhO1xyXG4gICAgLy8gSWYgYSB0b29sIHJlcXVpcmVzIHRoZSBwYW5lbCBpdCBpcyBzcGVjaWZpZWQgaGVyZS5cclxuICAgIC8vIFRoaXMgY291bGQgYmUgYSBwcm9wZXJ0eSBvZiB0aGUgVG9vbCBjbGFzcy5cclxuICAgIHRoaXMuaGFzVXNlZFBhbmVsID0gZmFsc2U7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBFeHRlbmRzIHRoZSBtZXRob2Qgb2YgdGhlIHN1cGVyIGNsYXNzIHRvIGdldCB0aGUgc2VsZWN0ZWQgZWxlbWVudC5cclxuICAgKiBAcGFyYW0ge01vdXNlRXZlbnR9IGUgVGhlIGNsaWNrIGV2ZW50LlxyXG4gICAqL1xyXG4gIG1hbmFnZVNlbGVjdGlvbihlKSB7XHJcbiAgICBzdXBlci5tYW5hZ2VTZWxlY3Rpb24oZSk7XHJcbiAgICAvLyBPbmx5IGlmIGFuIGVsZW1lbnQgaGFzIGJlZW4gY2xpY2tlZCBhbmQgYWRkZWQsIHNpbmNlIGl0IGNvdWxkIGhhdmUgYmVlbiByZW1vdmVkLlxyXG4gICAgaWYgKHRoaXMuc2VsZWN0aW9uICE9PSBudWxsICYmIHRoaXMuY3VycmVudFNlbGVjdGlvbi5sZW5ndGggPiAwKSB7XHJcbiAgICAgIHRoaXMuc2hvd0VsZW1lbnREYXRhKHRoaXMuc2VsZWN0aW9uLmRhdGFzZXQuY2F0ZWdvcnksIHRoaXMuc2VsZWN0aW9uLmRhdGFzZXQuaWQpO1xyXG4gICAgICBpZiAodGhpcy5zZWxlY3Rpb24uZGF0YXNldC5jb21tZW50KSB7XHJcbiAgICAgICAgdGhpcy53b3Jrc3BhY2UuY29tbWVudEZvcm0udmlld0NvbW1lbnQodGhpcy5zZWxlY3Rpb24uZGF0YXNldC5jb21tZW50KTtcclxuICAgICAgICB0aGlzLndvcmtzcGFjZS5tYWluUGFuZWwuYWRkU2VjdGlvbignQ29tbWVudCcsIHRoaXMud29ya3NwYWNlLmNvbW1lbnRGb3JtLmZvcm1FbGVtZW50KTtcclxuICAgICAgfSBlbHNlIGlmICh0aGlzLndvcmtzcGFjZS5tYWluUGFuZWwuc2VjdGlvbnMuZmluZChzID0+IHMubmFtZSA9PT0gJ0NvbW1lbnQnKSkge1xyXG4gICAgICAgIC8vIElmIHRoZSBjb21tZW50cyBzZWN0aW9uIGlzIHRoZXJlIGZyb20gdGhlIHByZXZpb3VzIHNlbGVjdGVkIGVsZW1lbnQgaXQgc2hvdWxkIGJlIHJlbW92ZWQuXHJcbiAgICAgICAgdGhpcy53b3Jrc3BhY2UubWFpblBhbmVsLnJlbW92ZVNlY3Rpb24oJ0NvbW1lbnQnKTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIGlmICh0aGlzLmN1cnJlbnRFbGVtZW50RGF0YSkge1xyXG4gICAgICB0aGlzLmN1cnJlbnRFbGVtZW50RGF0YSA9IHVuZGVmaW5lZDtcclxuICAgICAgdGhpcy53b3Jrc3BhY2UubWFpblBhbmVsLmNsb3NlKCk7XHJcbiAgICAgIC8vIFRPRE86IENsZWFuIGRhdGEgdGFibGVzIGNvbnRlbnQuXHJcbiAgICAgIGNvbnNvbGUubG9nKCdEYXRhIHRhYmxlIGNsZWFuZWQuJyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuXHJcbiAgLyoqKioqKioqKioqKioqKioqKioqIEVMRU1FTlRTIEFTU09DSUFURUQgREFUQSAqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuICAvKipcclxuICAgKiBTaG93cyB0aGUgZGF0YSBhc3NvY2lhdGVkIHdpdGggdGhlIHNlbGVjdGVkIGVsZW1lbnQgYnkgZmV0Y2hpbmcgaXQgaWYgbmVlZGVkLlxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBjYXRlZ29yeSBcclxuICAgKiBAcGFyYW0ge1N0cmluZ30gaWQgXHJcbiAgICovXHJcbiAgYXN5bmMgc2hvd0VsZW1lbnREYXRhKGNhdGVnb3J5LCBpZCkge1xyXG4gICAgbGV0IHN1Y2Nlc3MgPSB0cnVlO1xyXG4gICAgaWYgKHRoaXMuZWxlbWVudHNEYXRhW2NhdGVnb3J5XSkge1xyXG4gICAgICB0aGlzLmN1cnJlbnRFbGVtZW50RGF0YSA9IHRoaXMuZWxlbWVudHNEYXRhW2NhdGVnb3J5XS5pbnN0YW5jZXNbaWRdO1xyXG4gICAgICBjb25zb2xlLmxvZyh0aGlzLmN1cnJlbnRFbGVtZW50RGF0YSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25zdCBjYXRlZ29yeURhdGEgPSB0aGlzLnByb2plY3RzRGF0YVt0aGlzLnByb2plY3RJbmRleF0uZWxlbWVudHNEYXRhLmZpbmQob2JqID0+IG9iai5uYW1lLnJlcGxhY2UoJy5qc29uJywgJycpID09PSBjYXRlZ29yeSk7XHJcbiAgICAgIGlmIChjYXRlZ29yeURhdGEgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIC8vIFRPRE86IHNob3cgYSBsb2FkZXIgaW4gdGhlIHRhYmxlLlxyXG4gICAgICAgIGF3YWl0IEFQSS5nZXRGaWxlQ29udGVudChjYXRlZ29yeURhdGEuaWQpLnRoZW4ocmVzID0+IHtcclxuICAgICAgICAgIHRoaXMuZWxlbWVudHNEYXRhW2NhdGVnb3J5XSA9IEpTT04ucGFyc2UocmVzLmJvZHkpO1xyXG4gICAgICAgICAgLy8gVE9ETzogaGlkZSB0aGUgbG9hZGVyIGluIHRoZSB0YWJsZS5cclxuICAgICAgICAgIHRoaXMuY3VycmVudEVsZW1lbnREYXRhID0gdGhpcy5lbGVtZW50c0RhdGFbY2F0ZWdvcnldLmluc3RhbmNlc1tpZF07XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmN1cnJlbnRFbGVtZW50RGF0YSk7XHJcbiAgICAgICAgfSwgZXJyID0+IHtcclxuICAgICAgICAgIC8vIFRPRE86IGhpZGUgdGhlIGxvYWRlciBpbiB0aGUgdGFibGUuXHJcbiAgICAgICAgICBzdWNjZXNzID0gZmFsc2U7XHJcbiAgICAgICAgICAvLyBUT0RPOiBzaG93IGVycm9yIG1lc3NhZ2UuXHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdUaGVyZSBpcyBubyBkYXRhIGZvciB0aGF0IGVsZW1lbnQuJyk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGlmIChzdWNjZXNzKSB7XHJcbiAgICAgIC8vIFNldHMgdGhlIGNvbnRlbnRzIG9uIHRoZSBwcm9wZXJ0aWVzIGFuZCBwYXJhbWV0ZXJzIHBhbmVscy5cclxuICAgICAgdGhpcy53b3Jrc3BhY2UucHJvcHNUYWJsZXNDb250YWluZXIuaW5uZXJIVE1MID0gdGhpcy5jcmVhdGVEYXRhVGFibGUodGhpcy5jdXJyZW50RWxlbWVudERhdGEucHJvcGVydGllcyk7XHJcbiAgICAgIGNvbnN0IHNlY3Rpb25zID0gW3tcclxuICAgICAgICBuYW1lOiAnUHJvcGVydGllcycsXHJcbiAgICAgICAgYm9keTogdGhpcy53b3Jrc3BhY2UucHJvcHNUYWJsZXNDb250YWluZXJcclxuICAgICAgfV07XHJcbiAgICAgIGlmICh0aGlzLmN1cnJlbnRFbGVtZW50RGF0YS5wYXJhbWV0ZXJzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICB0aGlzLndvcmtzcGFjZS5wYXJhbXNUYWJsZXNDb250YWluZXIuaW5uZXJIVE1MID0gdGhpcy5jcmVhdGVEYXRhVGFibGUodGhpcy5jdXJyZW50RWxlbWVudERhdGEucGFyYW1ldGVycyk7XHJcbiAgICAgICAgc2VjdGlvbnMucHVzaCh7XHJcbiAgICAgICAgICBuYW1lOiAnUGFyYW1ldGVycycsXHJcbiAgICAgICAgICBib2R5OiB0aGlzLndvcmtzcGFjZS5wYXJhbXNUYWJsZXNDb250YWluZXJcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgICB0aGlzLndvcmtzcGFjZS5tYWluUGFuZWwuYWRkU2VjdGlvbnMoc2VjdGlvbnMpO1xyXG4gICAgICB0aGlzLndvcmtzcGFjZS5tYWluUGFuZWwub3BlbigpO1xyXG4gICAgICB0aGlzLmhhc1VzZWRQYW5lbCA9IHRydWU7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogQ3JlYXRlcyB2YXJpb3VzIEhUTUwgdGFibGVzIHdpdGggdGhlIGRhdGEgb2YgdGhlIG9iamVjdHMgYXJyYXkuXHJcbiAgICogRWFjaCBvYmplY3QgaW4gdGhlIGFycmF5IHNob3VsZCBjb250YWluICduYW1lJywgJ3ZhbHVlJyBhbmQgJ2NhdGVnb3J5Jy5cclxuICAgKiBAcGFyYW0ge0FycmF5fSBlbnRyaWVzQXJyYXkgXHJcbiAgICovXHJcbiAgY3JlYXRlRGF0YVRhYmxlKGVudHJpZXNBcnJheSkge1xyXG4gICAgY29uc3QgY2F0ZWdvcmllc1RpdGxlcyA9IFtdO1xyXG4gICAgY29uc3QgZGF0YUJ5Q2F0ZWdvcmllcyA9IFtdO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBlbnRyaWVzQXJyYXkubGVuZ3RoOyBpKyspIHtcclxuICAgICAgY29uc3QgY2F0ZWdvcnkgPSBlbnRyaWVzQXJyYXlbaV0uY2F0ZWdvcnk7XHJcbiAgICAgIGNvbnN0IGNhdGVnb3J5SW5kZXggPSBjYXRlZ29yaWVzVGl0bGVzLmluZGV4T2YoY2F0ZWdvcnkpO1xyXG4gICAgICBjb25zdCB0YWJsZVJvdyA9IGA8dHI+PHRoPiR7ZW50cmllc0FycmF5W2ldLm5hbWV9PC90aD48dGQ+JHtlbnRyaWVzQXJyYXlbaV0udmFsdWV9PC90ZD48L3RyPmA7XHJcbiAgICAgIGlmIChjYXRlZ29yeUluZGV4ICE9PSAtMSkge1xyXG4gICAgICAgIGRhdGFCeUNhdGVnb3JpZXNbY2F0ZWdvcnlJbmRleF0ucHVzaCh0YWJsZVJvdyk7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgZGF0YUJ5Q2F0ZWdvcmllcy5wdXNoKFtgPHRhYmxlIGNsYXNzPVwiZGF0YS10YWJsZVwiPjx0aGVhZD48dHI+PHRoIGNvbHNwYW49XCIyXCI+JHtjYXRlZ29yeX08L3RoPjwvdHI+PC90aGVhZD5gLCB0YWJsZVJvd10pO1xyXG4gICAgICAgIGNhdGVnb3JpZXNUaXRsZXMucHVzaChjYXRlZ29yeSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGNvbnN0IGRhdGFUYWJsZSA9IFtdO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkYXRhQnlDYXRlZ29yaWVzLmxlbmd0aDsgaSsrKVxyXG4gICAgICBkYXRhVGFibGUucHVzaChkYXRhQnlDYXRlZ29yaWVzW2ldLmpvaW4oJycpICsgJzwvdGJvZHk+PC90YWJsZT4nKTtcclxuXHJcbiAgICByZXR1cm4gZGF0YVRhYmxlLmpvaW4oJycpO1xyXG4gIH1cclxuXHJcblxyXG4gIGtpbGwoKSB7XHJcbiAgICBzdXBlci5raWxsKCk7XHJcbiAgICAvLyBUT0RPOiBDbGVhciB0aGUgZGF0YSB0YWJsZS5cclxuICAgIC8vIFRPRE86IElmIHRoZSB1c2VyIGhhcyB0aGUgb3B0aW9uIHRvIGFuY2hvciB0aGUgcGFuZWwgdGhpcyB3b3VsZCBiZSB3cm9uZy5cclxuICAgIGlmICh0aGlzLndvcmtzcGFjZS5tYWluUGFuZWwuaXNPcGVuKSB7XHJcbiAgICAgIHRoaXMud29ya3NwYWNlLm1haW5QYW5lbC5jbG9zZSgpO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMuaGFzVXNlZFBhbmVsKSB7XHJcbiAgICAgIHRoaXMud29ya3NwYWNlLm1haW5QYW5lbC5yZW1vdmVTZWN0aW9uKCdQcm9wZXJ0aWVzJyk7XHJcbiAgICAgIHRoaXMud29ya3NwYWNlLm1haW5QYW5lbC5yZW1vdmVTZWN0aW9uKCdQYXJhbWV0ZXJzJyk7XHJcbiAgICAgIC8vIFRPRE8gSWYgaXQgaGFzIHVzZWQgYWxzbyB0aGUgQ29tbWVudCBzZWN0aW9uIGl0IHNob3VsZCBiZSByZW1vdmVkLlxyXG4gICAgfVxyXG4gICAgY29uc29sZS5sb2coJ0VsZW1lbnRzIGRhdGEgdG9vbCBkaXNhYmxlZC4nKTtcclxuICB9XHJcbn0iLCJpbXBvcnQgQVBJIGZyb20gJy4vYXBpJztcclxuaW1wb3J0IEdlbmVyaWNzIGZyb20gJy4vZ2VuZXJpY3MnO1xyXG5pbXBvcnQgdHlwZSB7IEFwcGxpY2F0aW9uIH0gZnJvbSAnLi9hcHAnO1xyXG5pbXBvcnQgeyBQcm9qZWN0RGF0YSB9IGZyb20gJy4vcHJvamVjdERhdGEnO1xyXG5cclxuZXhwb3J0IGNsYXNzIFNoYXJlUHJvamVjdCB7XHJcbiAgaHRtbENvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XHJcbiAgc2hhcmVGb3JtOiBIVE1MRWxlbWVudDtcclxuICBzaGFyZUZvcm1FcnJvck1zZzogSFRNTEVsZW1lbnQ7XHJcbiAgY29uZmlybUNoYW5nZXNCdG5zOiBIVE1MRWxlbWVudDtcclxuICBzYXZlQ2hhbmdlc0J0bjogSFRNTEVsZW1lbnQ7XHJcbiAgY2FuY2VsQ2hhbmdlc0J0bjogSFRNTEVsZW1lbnQ7XHJcbiAgd2FpdGluZ0FuaW1hdGlvbjogSFRNTEVsZW1lbnQ7XHJcbiAgY3VycmVudFVzZXJzQ29udGVudDogSFRNTEVsZW1lbnQ7XHJcbiAgY3VycmVudFVzZXJzVGFibGU6IEhUTUxFbGVtZW50O1xyXG4gIHBlbmRpbmdVc2Vyc0NvbnRlbnQ6IEhUTUxFbGVtZW50O1xyXG4gIHBlbmRpbmdVc2Vyc1RvQWRkVGFibGU6IEhUTUxFbGVtZW50O1xyXG4gIHNoYXJlTm90aWZpY2F0aW9uQ29udGFpbmVyOiBIVE1MRWxlbWVudDtcclxuICBzaGFyZU5vdGlmaWNhdGlvbklucHV0OiBIVE1MSW5wdXRFbGVtZW50O1xyXG4gIGFwcDogQXBwbGljYXRpb247XHJcbiAgLy8gVGhlIEFwcCBwcm9qZWN0c0xpc3QgaXMgbmVlZGVkIHRvIGdldCB0aGUgSFRNTCBpdGVtIG9mIHRoZSBwcm9qZWN0IHRvIHNoYXJlLlxyXG4gIHByb2plY3RzTGlzdDogSFRNTEVsZW1lbnQ7XHJcbiAgcHJvamVjdERhdGE6IFByb2plY3REYXRhO1xyXG4gIC8vIFJlZmVyZW5jZSB0byB0aGUgcHJvamVjdCBIVE1MIGl0ZW0gZWxlbWVudCBpbiB0aGUgbGlzdC5cclxuICBwcm9qZWN0SXRlbTogSFRNTEVsZW1lbnQ7XHJcbiAgLy8gUGVybWlzc2lvbiBpZHMgcGVuZGluZyB0byBkZWxldGUgZm9yIHRoZSBjdXJyZW50IHByb2plY3QuXHJcbiAgcGVuZGluZ1RvUmVtb3ZlOiBzdHJpbmdbXSA9IFtdO1xyXG4gIC8vIEVtYWlscyB0byBzaGFyZSB3aXRoLlxyXG4gIHBlbmRpbmdUb0FkZDogc3RyaW5nW10gPSBbXTtcclxuXHJcbiAgY29uc3RydWN0b3Ioc2hhcmVQcm9qZWN0Q29udGFpbmVyOiBIVE1MRWxlbWVudCwgQXBwOiBBcHBsaWNhdGlvbikge1xyXG4gICAgdGhpcy5odG1sQ29udGFpbmVyID0gc2hhcmVQcm9qZWN0Q29udGFpbmVyOyAvLyBUaGlzIGlzIHVzZWQgaW4gdGhlIGNvbnRleHQgbWVudSB0byBwYXNzIGl0IHRvIHRoZSBzaG93TW9kYWxEaWFsb2coKVxyXG4gICAgdGhpcy5zaGFyZUZvcm0gPSBzaGFyZVByb2plY3RDb250YWluZXIucXVlcnlTZWxlY3RvcignLnNoYXJlLWZvcm0nKTtcclxuICAgIHRoaXMuc2hhcmVGb3JtRXJyb3JNc2cgPSBzaGFyZVByb2plY3RDb250YWluZXIucXVlcnlTZWxlY3RvcignLnNoYXJlLWZvcm0gPiAuZXJyb3ItbXNnJyk7XHJcbiAgICB0aGlzLmNvbmZpcm1DaGFuZ2VzQnRucyA9IHNoYXJlUHJvamVjdENvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcubW9kYWwtbWFpbi1idG5zJyk7XHJcbiAgICB0aGlzLnNhdmVDaGFuZ2VzQnRuID0gc2hhcmVQcm9qZWN0Q29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5zYXZlLWNoYW5nZXMtYnRuJyk7XHJcbiAgICB0aGlzLmNhbmNlbENoYW5nZXNCdG4gPSBzaGFyZVByb2plY3RDb250YWluZXIucXVlcnlTZWxlY3RvcignLmNhbmNlbC1jaGFuZ2VzLWJ0bicpO1xyXG4gICAgdGhpcy53YWl0aW5nQW5pbWF0aW9uID0gc2hhcmVQcm9qZWN0Q29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5sb2FkZXItY29udGFpbmVyJyk7XHJcbiAgICB0aGlzLmN1cnJlbnRVc2Vyc0NvbnRlbnQgPSBzaGFyZVByb2plY3RDb250YWluZXIucXVlcnlTZWxlY3RvcignLmN1cnJlbnQtdXNlcnMnKTtcclxuICAgIHRoaXMuY3VycmVudFVzZXJzVGFibGUgPSBzaGFyZVByb2plY3RDb250YWluZXIucXVlcnlTZWxlY3RvcignLmN1cnJlbnQtdXNlcnMgdGJvZHknKTtcclxuICAgIHRoaXMucGVuZGluZ1VzZXJzQ29udGVudCA9IHNoYXJlUHJvamVjdENvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcucGVuZGluZy11c2VycycpO1xyXG4gICAgdGhpcy5wZW5kaW5nVXNlcnNUb0FkZFRhYmxlID0gc2hhcmVQcm9qZWN0Q29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5wZW5kaW5nLXVzZXJzIHRib2R5Jyk7XHJcbiAgICB0aGlzLnNoYXJlTm90aWZpY2F0aW9uQ29udGFpbmVyID0gc2hhcmVQcm9qZWN0Q29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5zaGFyZS1ub3RpZmljYXRpb24nKTtcclxuICAgIHRoaXMuc2hhcmVOb3RpZmljYXRpb25JbnB1dCA9IHNoYXJlUHJvamVjdENvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuc2hhcmUtbm90aWZpY2F0aW9uID4gaW5wdXQnKTtcclxuXHJcbiAgICAvLyBUaGUgQXBwIGlzIG5lZWRlZCB0byBhY2Nlc3Mgc29tZSBvZiBpdHMgbWV0aG9kcy5cclxuICAgIHRoaXMuYXBwID0gQXBwO1xyXG4gICAgXHJcbiAgICB0aGlzLnByb2plY3RzTGlzdCA9IEFwcC5wcm9qZWN0c0xpc3Q7XHJcblxyXG4gICAgdGhpcy5jdXJyZW50VXNlcnNUYWJsZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4ge1xyXG4gICAgICBpZiAoKGUudGFyZ2V0IGFzIEhUTUxFbGVtZW50KS5jbG9zZXN0KCdbZGF0YS1hY3Rpb25dJykpIHtcclxuICAgICAgICBjb25zdCBhY3Rpb25CdG4gPSAoZS50YXJnZXQgYXMgSFRNTEVsZW1lbnQpLmNsb3Nlc3QoJ1tkYXRhLWFjdGlvbl0nKSBhcyBIVE1MRWxlbWVudDtcclxuICAgICAgICBpZiAoYWN0aW9uQnRuLmRhdGFzZXQuYWN0aW9uID09PSAnc3RhZ2UnKSB7XHJcbiAgICAgICAgICB0aGlzLnN0YWdlTWVtYmVyVG9SZW1vdmUoYWN0aW9uQnRuLnBhcmVudEVsZW1lbnQgYXMgSFRNTFRhYmxlUm93RWxlbWVudCk7XHJcbiAgICAgICAgfSBlbHNlIHsgLy8gZS50YXJnZXQuZGF0YXNldC5hY3Rpb24gPT09ICd1bnN0YWdlJ1xyXG4gICAgICAgICAgdGhpcy51bnN0YWdlTWVtYmVyVG9SZW1vdmUoYWN0aW9uQnRuLnBhcmVudEVsZW1lbnQgYXMgSFRNTFRhYmxlUm93RWxlbWVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLnBlbmRpbmdVc2Vyc1RvQWRkVGFibGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHtcclxuICAgICAgaWYgKChlLnRhcmdldCBhcyBIVE1MRWxlbWVudCkuY2xvc2VzdCgnW2RhdGEtYWN0aW9uXScpKSB7XHJcbiAgICAgICAgdGhpcy51bnN0YWdlTWVtYmVyVG9BZGQoKGUudGFyZ2V0IGFzIEhUTUxFbGVtZW50KS5jbG9zZXN0KCdbZGF0YS1hY3Rpb25dJykucGFyZW50RWxlbWVudCBhcyBIVE1MVGFibGVSb3dFbGVtZW50KTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5zYXZlQ2hhbmdlcyA9IHRoaXMuc2F2ZUNoYW5nZXMuYmluZCh0aGlzKTtcclxuXHJcbiAgICB0aGlzLnN0YWdlTWVtYmVyVG9BZGQgPSB0aGlzLnN0YWdlTWVtYmVyVG9BZGQuYmluZCh0aGlzKTtcclxuICAgIHRoaXMuc2hhcmVGb3JtLm9uc3VibWl0ID0gdGhpcy5zdGFnZU1lbWJlclRvQWRkO1xyXG4gIH1cclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIFdoZW4gdGhlIG1vZGFsIGRpYWxvZyB0aGF0IGNvbnRhaW5zIHRoaXMgaXMgb3BlbiB0aGlzIG1ldGhvZCBzaG91bGQgYmUgY2FsbGVkLlxyXG4gICAqL1xyXG4gIHNldFVwRGlhbG9nKHByb2plY3REYXRhOiBQcm9qZWN0RGF0YSkge1xyXG4gICAgLy8gUmVzZXQgdG8gYW4gaW5pdGlhbCBzdGF0ZS4gTWF5YmUgaXQgaXMgYmV0dGVyIHRvIGRvIHRoaXMgd2hlbiB0aGUgcHJldmlvdXMgZGlhbG9nIGlzIGNsb3NlZD9cclxuICAgIHRoaXMucGVuZGluZ1RvUmVtb3ZlID0gW107XHJcbiAgICBHZW5lcmljcy5lbXB0eU5vZGUodGhpcy5jdXJyZW50VXNlcnNUYWJsZSk7XHJcbiAgICB0aGlzLnBlbmRpbmdUb0FkZCA9IFtdO1xyXG4gICAgR2VuZXJpY3MuZW1wdHlOb2RlKHRoaXMucGVuZGluZ1VzZXJzVG9BZGRUYWJsZSk7XHJcbiAgICB0aGlzLnBlbmRpbmdVc2Vyc0NvbnRlbnQuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XHJcbiAgICB0aGlzLnNoYXJlTm90aWZpY2F0aW9uQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmNvbmZpcm1DaGFuZ2VzQnRucy5jaGlsZHJlbi5sZW5ndGg7IGkrKykge1xyXG4gICAgICB0aGlzLmNvbmZpcm1DaGFuZ2VzQnRucy5jaGlsZHJlbltpXS5jbGFzc0xpc3QuYWRkKCdkaXNhYmxlZCcpO1xyXG4gICAgfVxyXG4gICAgLy8gRGlzYWJsZSB0aGUgbWFuYWdlIGNoYW5nZXMgYnV0dG9ucy5cclxuICAgIHRoaXMuc2F2ZUNoYW5nZXNCdG4ub25jbGljayA9IG51bGw7XHJcbiAgICB0aGlzLmNhbmNlbENoYW5nZXNCdG4ub25jbGljayA9IG51bGw7XHJcbiAgICAvLyBHZXQgdGhlIHByb2plY3QgaW5mby5cclxuICAgIHRoaXMucHJvamVjdERhdGEgPSBwcm9qZWN0RGF0YTtcclxuICAgIHRoaXMucHJvamVjdEl0ZW0gPSB0aGlzLnByb2plY3RzTGlzdC5xdWVyeVNlbGVjdG9yKCdidXR0b25bZGF0YS1wcm9qLWlkPVwiJyArIHByb2plY3REYXRhLmlkICsgJ1wiXScpO1xyXG4gICAgLy8gQ3JlYXRlIGxpc3Qgb2YgdXNlcnMgaWYgYW55LlxyXG4gICAgaWYgKHByb2plY3REYXRhLnNoYXJlZCkge1xyXG4gICAgICBjb25zdCB1c2Vyczogc3RyaW5nW10gPSBbXTtcclxuICAgICAgY29uc3QgY3VycmVudFVzZXJFbWFpbCA9IHdpbmRvdy5nZXRDdXJyZW50VXNlcigpLmVtYWlsQWRkcmVzcztcclxuICAgICAgY29uc3Qgb3duZXIgPSAnPHRkIHRpdGxlPVwiUHJvamVjdCBvd25lclwiPjxzdmc+PHVzZSBocmVmPVwiI2tleUljb25cIj48L3VzZT48L3N2Zz48L3RkPic7XHJcbiAgICAgIGNvbnN0IGNvbGxhYiA9ICc8dGQgY2xhc3M9XCJhY3Rpb24tYnRuXCIgZGF0YS1hY3Rpb249XCJzdGFnZVwiPjxzdmc+PHVzZSBocmVmPVwiI2Nyb3NzSWNvblwiPjwvdXNlPjwvc3ZnPjwvdGQ+JztcclxuICAgICAgcHJvamVjdERhdGEucGVybWlzc2lvbnMuZm9yRWFjaCh1c2VyID0+IHtcclxuICAgICAgICB1c2Vycy5wdXNoKGBcclxuICAgICAgICAgIDx0ciBkYXRhLXBlcm1pc3Npb249XCIke3VzZXIuaWR9XCI+XHJcbiAgICAgICAgICAgIDx0ZCBjbGFzcz1cInVzZXItZGF0YVwiPlxyXG4gICAgICAgICAgICAgIDxpbWcgc3JjPVwiJHt1c2VyLnBob3RvTGlua31cIj5cclxuICAgICAgICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgICAgICAgPHNwYW4+JHt1c2VyLmVtYWlsQWRkcmVzcyA9PT0gY3VycmVudFVzZXJFbWFpbCA/ICdZb3UnIDogdXNlci5kaXNwbGF5TmFtZX08L3NwYW4+XHJcbiAgICAgICAgICAgICAgICA8c3Bhbj4ke3VzZXIuZW1haWxBZGRyZXNzfTwvc3Bhbj5cclxuICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgJHt1c2VyLnJvbGUgPT09ICdvd25lcicgPyBvd25lciA6IGNvbGxhYn1cclxuICAgICAgICAgIDwvdHI+YCk7XHJcbiAgICAgIH0pO1xyXG4gICAgICB0aGlzLmN1cnJlbnRVc2Vyc1RhYmxlLmlubmVySFRNTCA9IHVzZXJzLmpvaW4oJycpO1xyXG4gICAgICAvLyBTaG93IHRoZSB0YWJsZSBiZWNhdXNlIGl0IGNvdWxkIGJlIGhpZGRlbiBmcm9tIHRoZSBwcmV2aW91cyB0aW1lLlxyXG4gICAgICB0aGlzLmN1cnJlbnRVc2Vyc0NvbnRlbnQuY2xhc3NMaXN0LnJlbW92ZSgnZW1wdHknKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuY3VycmVudFVzZXJzQ29udGVudC5jbGFzc0xpc3QuYWRkKCdlbXB0eScpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIEFkZCBhIG1lbWJlciBlbWFpbCB0byB0aGUgd2FpdGluZyBsaXN0IHRvIGJlIGFkZGVkIGFzIG1lbWJlci5cclxuICAgKiBAcGFyYW0gZSBUaGUgc3VibWl0IGV2ZW50IG9mIHRoZSBmb3JtIHRvIHN0YWdlIG1lbWJlcnMgdG8gYWRkLlxyXG4gICAqL1xyXG4gIHN0YWdlTWVtYmVyVG9BZGQoZTogRXZlbnQpIHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIGNvbnN0IGVtYWlsQWRkcmVzcyA9ICgoZS50YXJnZXQgYXMgSFRNTEZvcm1FbGVtZW50KS5lbGVtZW50cy5uYW1lZEl0ZW0oJ2VtYWlsJykgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWU7XHJcbiAgICBpZiAoZW1haWxBZGRyZXNzICE9PSAnJyAmJiAhdGhpcy5wZW5kaW5nVG9BZGQuaW5jbHVkZXMoZW1haWxBZGRyZXNzKSAmJiB0aGlzLnByb2plY3REYXRhLnBlcm1pc3Npb25zLmZpbmQocCA9PiBwLmVtYWlsQWRkcmVzcyA9PT0gZW1haWxBZGRyZXNzKSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgIHRoaXMuc2hhcmVGb3JtRXJyb3JNc2cuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XHJcbiAgICAgIHRoaXMucGVuZGluZ1RvQWRkLnB1c2goZW1haWxBZGRyZXNzKTtcclxuICAgICAgdGhpcy5wZW5kaW5nVXNlcnNUb0FkZFRhYmxlLmluc2VydEFkamFjZW50SFRNTCgnYmVmb3JlZW5kJywgYFxyXG4gICAgICAgIDx0ciBkYXRhLWVtYWlsPVwiJHtlbWFpbEFkZHJlc3N9XCI+XHJcbiAgICAgICAgICA8dGQgY2xhc3M9XCJ1c2VyLWRhdGFcIj48c3Bhbj4ke2VtYWlsQWRkcmVzc308L3NwYW4+PC90ZD5cclxuICAgICAgICAgIDx0ZCBjbGFzcz1cImFjdGlvbi1idG5cIiBkYXRhLWFjdGlvbj1cInN0YWdlXCI+PHN2Zz48dXNlIGhyZWY9XCIjY3Jvc3NJY29uXCI+PC91c2U+PC9zdmc+PC90ZD5cclxuICAgICAgICA8L3RyPmApO1xyXG4gICAgICAoKGUudGFyZ2V0IGFzIEhUTUxGb3JtRWxlbWVudCkuZWxlbWVudHMubmFtZWRJdGVtKCdlbWFpbCcpIGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlID0gJyc7XHJcbiAgICAgIC8vIEFjdGlvbnMgd2hlbiB0aGUgZmlyc3QgZW1haWwgaXMgYWRkZWQgdG8gdGhlIHRhYmxlLlxyXG4gICAgICBpZiAodGhpcy5wZW5kaW5nVG9BZGQubGVuZ3RoID09PSAxKSB7XHJcbiAgICAgICAgdGhpcy5wZW5kaW5nVXNlcnNDb250ZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xyXG4gICAgICAgIHRoaXMuc2hhcmVOb3RpZmljYXRpb25Db250YWluZXIuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XHJcbiAgICAgICAgdGhpcy5zaGFyZU5vdGlmaWNhdGlvbklucHV0LmNoZWNrZWQgPSB0cnVlO1xyXG4gICAgICAgIC8vIElmIHRoaXMgbWFrZXMgdGhhdCB0aGVyZSBhcmUgY2hhbmdlcyB0byBzYXZlIGVuYWJsZSB0aGUgYnV0dG9ucy5cclxuICAgICAgICBpZiAodGhpcy5wZW5kaW5nVG9SZW1vdmUubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuY29uZmlybUNoYW5nZXNCdG5zLmNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29uZmlybUNoYW5nZXNCdG5zLmNoaWxkcmVuW2ldLmNsYXNzTGlzdC5yZW1vdmUoJ2Rpc2FibGVkJyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICAvLyBFbmFibGUgdGhlIG1hbmFnZSBjaGFuZ2VzIGJ1dHRvbnMuXHJcbiAgICAgICAgICB0aGlzLnNhdmVDaGFuZ2VzQnRuLm9uY2xpY2sgPSB0aGlzLnNhdmVDaGFuZ2VzO1xyXG4gICAgICAgICAgdGhpcy5jYW5jZWxDaGFuZ2VzQnRuLm9uY2xpY2sgPSB0aGlzLmFwcC5jbG9zZU1vZGFsRGlhbG9nO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5zaGFyZUZvcm1FcnJvck1zZy5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcclxuICAgICAgY29uc29sZS5sb2coJ05vdCB2YWxpZCBpbnB1dC4nKTtcclxuICAgIH1cclxuICB9XHJcblxyXG5cclxuICAvKipcclxuICAgKiBSZW1vdmVzIGZyb20gdGhlIHN0YWdlZCBzdGF0ZSBhIG1lbWJlciBwZW5kaW5nIHRvIGJlIGFkZGVkLlxyXG4gICAqIEBwYXJhbSBlbGVtZW50IFRhYmxlIHJvdyBIVE1MIGVsZW1lbnQgd2l0aCB0aGUgZGF0YSBvZiB0aGUgbWVtYmVyIHRvIHVuc3RhZ2UuIEl0IHNob3VsZCBoYXZlIGEgZGF0YSBhdHRyIHdpdGggdGhlIGVtYWlsLlxyXG4gICAqL1xyXG4gIHVuc3RhZ2VNZW1iZXJUb0FkZChlbGVtZW50OiBIVE1MVGFibGVSb3dFbGVtZW50KSB7XHJcbiAgICBjb25zdCBpdGVtSW5kZXggPSB0aGlzLnBlbmRpbmdUb0FkZC5pbmRleE9mKGVsZW1lbnQuZGF0YXNldC5lbWFpbCk7XHJcbiAgICB0aGlzLnBlbmRpbmdUb0FkZC5zcGxpY2UoaXRlbUluZGV4LCAxKTtcclxuICAgIGVsZW1lbnQucmVtb3ZlKCk7XHJcbiAgICAvLyBBY3Rpb25zIHdoZW4gdGhlIHRhYmxlIGhhcyBiZWNvbWUgZW1wdHkuXHJcbiAgICBpZiAodGhpcy5wZW5kaW5nVG9BZGQubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIHRoaXMucGVuZGluZ1VzZXJzQ29udGVudC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcclxuICAgICAgdGhpcy5zaGFyZU5vdGlmaWNhdGlvbkNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcclxuICAgICAgaWYgKHRoaXMucGVuZGluZ1RvUmVtb3ZlLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5jb25maXJtQ2hhbmdlc0J0bnMuY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgIHRoaXMuY29uZmlybUNoYW5nZXNCdG5zLmNoaWxkcmVuW2ldLmNsYXNzTGlzdC5hZGQoJ2Rpc2FibGVkJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIERpc2FibGUgdGhlIG1hbmFnZSBjaGFuZ2VzIGJ1dHRvbnMuXHJcbiAgICAgICAgdGhpcy5zYXZlQ2hhbmdlc0J0bi5vbmNsaWNrID0gbnVsbDtcclxuICAgICAgICB0aGlzLmNhbmNlbENoYW5nZXNCdG4ub25jbGljayA9IG51bGw7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG5cclxuICAvKipcclxuICAgKiBBZGRzIGEgY3VycmVudCBtZW1iZXIgdG8gdGhlIHdhaXRpbmcgbGlzdCB0byBiZSByZW1vdmVkIGFzIG1lbWJlci5cclxuICAgKiBAcGFyYW0gZWxlbWVudCBUYWJsZSByb3cgSFRNTCBlbGVtZW50IHdpdGggdGhlIGRhdGEgb2YgdGhlIG1lbWJlciB0byBkZWxldGUuIEl0IHNob3VsZCBoYXZlIGEgZGF0YSBhdHRyIHdpdGggdGhlIHBlcm1pc3Npb24gaWQuXHJcbiAgICovXHJcbiAgc3RhZ2VNZW1iZXJUb1JlbW92ZShlbGVtZW50OiBIVE1MVGFibGVSb3dFbGVtZW50KSB7XHJcbiAgICB0aGlzLnBlbmRpbmdUb1JlbW92ZS5wdXNoKGVsZW1lbnQuZGF0YXNldC5wZXJtaXNzaW9uKTtcclxuICAgIC8vIFNldCB0aGUgcm93IGVsZW1lbnQgYXMgcGVuZGluZyB0byBkZWxldGUuXHJcbiAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoJ3RvLWRlbGV0ZScpO1xyXG4gICAgLy8gQ2hhbmdlIHRoZSByb3cgYnV0dG9uIGFjdGlvbiBhbmQgaWNvbi5cclxuICAgIGNvbnN0IGFjdGlvbkJ0biA9IGVsZW1lbnQucXVlcnlTZWxlY3RvcignLmFjdGlvbi1idG4nKSBhcyBIVE1MRWxlbWVudDtcclxuICAgIGFjdGlvbkJ0bi5pbm5lckhUTUwgPSAnPHN2Zz48dXNlIGhyZWY9XCIjcmVsb2FkSWNvblwiPjwvdXNlPjwvc3ZnPic7XHJcbiAgICBhY3Rpb25CdG4uZGF0YXNldC5hY3Rpb24gPSBcInVuc3RhZ2VcIjtcclxuICAgIC8vIElmIHRoaXMgbWFrZXMgdGhhdCB0aGVyZSBhcmUgY2hhbmdlcyB0byBzYXZlIGVuYWJsZSB0aGUgJ2NvbmZpcm0gY2hhbmdlcycgYnV0dG9ucy5cclxuICAgIGlmICh0aGlzLnBlbmRpbmdUb0FkZC5sZW5ndGggPT09IDAgJiYgdGhpcy5wZW5kaW5nVG9SZW1vdmUubGVuZ3RoID09PSAxKSB7XHJcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5jb25maXJtQ2hhbmdlc0J0bnMuY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICB0aGlzLmNvbmZpcm1DaGFuZ2VzQnRucy5jaGlsZHJlbltpXS5jbGFzc0xpc3QucmVtb3ZlKCdkaXNhYmxlZCcpO1xyXG4gICAgICB9XHJcbiAgICAgIC8vIEVuYWJsZSB0aGUgbWFuYWdlIGNoYW5nZXMgYnV0dG9ucy5cclxuICAgICAgdGhpcy5zYXZlQ2hhbmdlc0J0bi5vbmNsaWNrID0gdGhpcy5zYXZlQ2hhbmdlcztcclxuICAgICAgdGhpcy5jYW5jZWxDaGFuZ2VzQnRuLm9uY2xpY2sgPSB0aGlzLmFwcC5jbG9zZU1vZGFsRGlhbG9nO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIFJlbW92ZXMgZnJvbSB0aGUgc3RhZ2VkIHN0YXRlIGEgbWVtYmVyIHBlbmRpbmcgdG8gYmUgcmVtb3ZlZC5cclxuICAgKiBAcGFyYW0gZWxlbWVudCBUYWJsZSByb3cgSFRNTCBlbGVtZW50IHdpdGggdGhlIGRhdGEgb2YgdGhlIG1lbWJlciB0byBkZWxldGUuIEl0IHNob3VsZCBoYXZlIGEgZGF0YSBhdHRyIHdpdGggdGhlIHBlcm1pc3Npb24gaWQuXHJcbiAgICovXHJcbiAgdW5zdGFnZU1lbWJlclRvUmVtb3ZlKGVsZW1lbnQ6IEhUTUxUYWJsZVJvd0VsZW1lbnQpIHtcclxuICAgIC8vIFJlbW92ZSB0aGUgcGVybWlzc2lvbiBpZCBmcm9tIHRoZSBhcnJheS5cclxuICAgIGNvbnN0IGluZGV4ID0gdGhpcy5wZW5kaW5nVG9SZW1vdmUuaW5kZXhPZihlbGVtZW50LmRhdGFzZXQucGVybWlzc2lvbik7XHJcbiAgICB0aGlzLnBlbmRpbmdUb1JlbW92ZS5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgLy8gUmVtb3ZlIGl0cyB0by1kZWxldGUgY2xhc3MuXHJcbiAgICBlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ3RvLWRlbGV0ZScpO1xyXG4gICAgLy8gQ2hhbmdlIHRoZSByb3cgYnV0dG9uIGFjdGlvbiBhbmQgaWNvbi5cclxuICAgIGNvbnN0IGFjdGlvbkJ0biA9IGVsZW1lbnQucXVlcnlTZWxlY3RvcignLmFjdGlvbi1idG4nKSBhcyBIVE1MRWxlbWVudDtcclxuICAgIGFjdGlvbkJ0bi5pbm5lckhUTUwgPSAnPHN2Zz48dXNlIGhyZWY9XCIjY3Jvc3NJY29uXCI+PC91c2U+PC9zdmc+JztcclxuICAgIGFjdGlvbkJ0bi5kYXRhc2V0LmFjdGlvbiA9IFwic3RhZ2VcIjtcclxuICAgIC8vIElmIHRoaXMgbWFrZXMgdGhhdCB0aGVyZSBhcmUgbm8gY2hhbmdlcyB0aGVuIGRpc2FibGUgdGhlICdjb25maXJtIGNoYW5nZXMnIGJ1dHRvbnMuXHJcbiAgICBpZiAodGhpcy5wZW5kaW5nVG9SZW1vdmUubGVuZ3RoID09PSAwICYmIHRoaXMucGVuZGluZ1RvQWRkLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuY29uZmlybUNoYW5nZXNCdG5zLmNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgdGhpcy5jb25maXJtQ2hhbmdlc0J0bnMuY2hpbGRyZW5baV0uY2xhc3NMaXN0LmFkZCgnZGlzYWJsZWQnKTtcclxuICAgICAgfVxyXG4gICAgICAvLyBEaXNhYmxlIHRoZSBtYW5hZ2UgY2hhbmdlcyBidXR0b25zLlxyXG4gICAgICB0aGlzLnNhdmVDaGFuZ2VzQnRuLm9uY2xpY2sgPSBudWxsO1xyXG4gICAgICB0aGlzLmNhbmNlbENoYW5nZXNCdG4ub25jbGljayA9IG51bGw7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogUmVtb3ZlcyBmcm9tIHRoZSBzdGFnZWQgc3RhdGUgYWxsIGN1cnJlbnQgbWVtYmVycyB0aGF0IHdlcmUgcGVuZGluZyB0byBiZSByZW1vdmVkLlxyXG4gICAqL1xyXG4gIC8vIFRPRE86IENoYW5nZSB0byBhIHJlc2V0IG1ldGhvZCB0aGF0IGNsZWFucyBhbnkgc3RhZ2VkIG1lbWJlcj9cclxuICAvLyB1bnN0YWdlQWxsTWVtYmVyc1RvUmVtb3ZlKCkge1xyXG4gIC8vICAgLy8gUmVtb3ZlIHRoZSBwZW5kaW5nIHRvIGRlbHRlIHN0YXRlIGZyb20gdGhlIHJvdyBlbGVtZW50cy5cclxuICAvLyAgIHRoaXMucGVuZGluZ1RvUmVtb3ZlLmZvckVhY2goZWxlbWVudCA9PiB7XHJcbiAgLy8gICAgIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgndG8tZGVsZXRlJyk7XHJcbiAgLy8gICB9KTtcclxuICAvLyAgIC8vIENsZWFyIHRoZSBzdGFnZWQgdXNlcnMuXHJcbiAgLy8gICB0aGlzLnBlbmRpbmdUb1JlbW92ZSA9IFtdO1xyXG4gIC8vICAgLy8gSWYgdGhpcyBtYWtlcyB0aGF0IHRoZXJlIGFyZSBubyBjaGFuZ2VzIHRoZW4gZGlzYWJsZSB0aGUgJ2NvbmZpcm0gY2hhbmdlcycgYnV0dG9ucy5cclxuICAvLyAgIGlmICh0aGlzLnBlbmRpbmdUb0FkZC5sZW5ndGggPT09IDApIHtcclxuICAvLyAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmNvbmZpcm1DaGFuZ2VzQnRucy5jaGlsZHJlbi5sZW5ndGg7IGkrKykge1xyXG4gIC8vICAgICAgIHRoaXMuY29uZmlybUNoYW5nZXNCdG5zLmNoaWxkcmVuW2ldLmNsYXNzTGlzdC5hZGQoJ2Rpc2FibGVkJyk7XHJcbiAgLy8gICAgIH1cclxuICAvLyAgICAgLy8gVE9ETyB0byBkaXNhYmxlIHRoZSBidG5zIGFkZCB0aGUgZXZlbnQgbGlzdGVuZXIgb3IgY2hhbmdlIGEgYm9vbFxyXG4gIC8vICAgfVxyXG4gIC8vIH1cclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIEFkZHMgYWxsIG1lbWJlcnMgdGhhdCB3ZXJlIGluIHRoZSBwZW5kaW5nVG9BZGQgYXJyYXkgdG8gdGhlIHRlYW0uXHJcbiAgICovXHJcbiAgYWRkU3RhZ2VkTWVtYmVycygpIHtcclxuICAgIGNvbnN0IGFkZE1lbWJlcnNQcm9taXNlczogUHJvbWlzZTxnYXBpLmNsaWVudC5SZXNwb25zZTxnYXBpLmNsaWVudC5kcml2ZS5QZXJtaXNzaW9uPj5bXSA9IFtdO1xyXG4gICAgLy8gRGVsYXkgaXMgcmVxdWlyZWQgYmVjYXVzZSBHRCBBUEkgZG9lc250IGFsbG93IHRvIGNyZWF0ZSBzZXZlcmFsIHBlcm1pc3Npb25zIGF0IHRoZSBzYW1lIHRpbWUuXHJcbiAgICBjb25zdCBkZWxheSA9IDYwMDtcclxuICAgIHRoaXMucGVuZGluZ1RvQWRkLmZvckVhY2goKGVtYWlsLCBpKSA9PiB7XHJcbiAgICAgIGFkZE1lbWJlcnNQcm9taXNlcy5wdXNoKEFQSS5zaGFyZUZpbGUodGhpcy5wcm9qZWN0RGF0YS5pZCwgZW1haWwsIGRlbGF5ICogaSkpO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gUHJvbWlzZS5hbGwoYWRkTWVtYmVyc1Byb21pc2VzKTtcclxuICB9XHJcblxyXG5cclxuICAvKipcclxuICAgKiBSZW1vdmVzIGFsbCBjdXJyZW50IG1lbWJlcnMgdGhhdCB3ZXJlIGluIHRoZSBwZW5kaW5nVG9SZW1vdmUgYXJyYXkgZnJvbSB0aGUgdGVhbS5cclxuICAgKi9cclxuICByZW1vdmVTdGFnZWRNZW1iZXJzKCkge1xyXG4gICAgY29uc3QgcmVtb3ZlTWVtYmVyc1Byb21pc2VzOiBQcm9taXNlPGdhcGkuY2xpZW50LlJlc3BvbnNlPHt9Pj5bXSA9IFtdO1xyXG4gICAgdGhpcy5wZW5kaW5nVG9SZW1vdmUuZm9yRWFjaChwZXJtaXNzaW9uSWQgPT4ge1xyXG4gICAgICByZW1vdmVNZW1iZXJzUHJvbWlzZXMucHVzaChBUEkuc3RvcFNoYXJpbmdGaWxlKHRoaXMucHJvamVjdERhdGEuaWQsIHBlcm1pc3Npb25JZCkpO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gUHJvbWlzZS5hbGwocmVtb3ZlTWVtYmVyc1Byb21pc2VzKTtcclxuICB9XHJcblxyXG5cclxuICAvKipcclxuICAgKiBTYXZlIGFsbCB0aGUgY2hhbmdlcyBvZiBhZGRpdGlvbiBhbmQgcmVtb3ZhbCBvZiBtZW1iZXJzLlxyXG4gICAqL1xyXG4gIGFzeW5jIHNhdmVDaGFuZ2VzKCkge1xyXG4gICAgdGhpcy53YWl0aW5nQW5pbWF0aW9uLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xyXG4gICAgbGV0IGFkZGl0aW9uU3VjY2VzcyA9IHRydWU7XHJcbiAgICBsZXQgcmVtb3ZhbFN1Y2Nlc3MgPSB0cnVlO1xyXG4gICAgLy8gUmVtb3ZhbCBwcm9jZXNzLlxyXG4gICAgaWYgKHRoaXMucGVuZGluZ1RvUmVtb3ZlLmxlbmd0aCA+IDApIHtcclxuICAgICAgYXdhaXQgdGhpcy5yZW1vdmVTdGFnZWRNZW1iZXJzKCkudGhlbihyZXNBcnIgPT4ge1xyXG4gICAgICAgIC8vIFJlbW92ZSB0aGUgcGVybWlzc2lvbklkcyBhbHNvIGZyb20gdGhlIGNvcnJlc3BvbmRpbmcgcHJvamVjdHNEYXRhIG9iamVjdC5cclxuICAgICAgICB0aGlzLnBlbmRpbmdUb1JlbW92ZS5mb3JFYWNoKHBlcm1pc3Npb25JZCA9PiB7XHJcbiAgICAgICAgICBjb25zdCBpbmRleCA9IHRoaXMucHJvamVjdERhdGEucGVybWlzc2lvbnMuZmluZEluZGV4KHBlcm1pc3Npb24gPT4gcGVybWlzc2lvbi5pZCA9PT0gcGVybWlzc2lvbklkKTtcclxuICAgICAgICAgIHRoaXMucHJvamVjdERhdGEucGVybWlzc2lvbnMuc3BsaWNlKGluZGV4LCAxKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfSwgcmVqID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhyZWopO1xyXG4gICAgICAgIHJlbW92YWxTdWNjZXNzID0gZmFsc2U7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgLy8gQWRkaXRpb24gcHJvY2Vzcy5cclxuICAgIGlmICh0aGlzLnBlbmRpbmdUb0FkZC5sZW5ndGggPiAwKSB7XHJcbiAgICAgIGF3YWl0IHRoaXMuYWRkU3RhZ2VkTWVtYmVycygpLnRoZW4ocmVzQXJyID0+IHtcclxuICAgICAgICAvLyAncmVzQXJyJyBpcyBhbiBhcnJheSB3aXRoIGFsbCB0aGUgcmVzb2x2ZWQgcHJvbWlzZXMuXHJcbiAgICAgICAgcmVzQXJyLmZvckVhY2goKHJlcywgaSkgPT4ge1xyXG4gICAgICAgICAgdGhpcy5wcm9qZWN0RGF0YS5wZXJtaXNzaW9ucy5wdXNoKHtcclxuICAgICAgICAgICAgaWQ6IHJlcy5yZXN1bHQuaWQsXHJcbiAgICAgICAgICAgIGVtYWlsQWRkcmVzczogdGhpcy5wZW5kaW5nVG9BZGRbaV0sXHJcbiAgICAgICAgICAgIHJvbGU6IHJlcy5yZXN1bHQucm9sZSxcclxuICAgICAgICAgICAgZGlzcGxheU5hbWU6IHJlcy5yZXN1bHQuZGlzcGxheU5hbWUsXHJcbiAgICAgICAgICAgIHBob3RvTGluazogcmVzLnJlc3VsdC5waG90b0xpbmtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGlmICh0aGlzLnNoYXJlTm90aWZpY2F0aW9uSW5wdXQuY2hlY2tlZCkge1xyXG4gICAgICAgICAgQVBJLnNlbmRTaGFyaW5nUHJvamVjdEVtYWlsKHdpbmRvdy5nZXRDdXJyZW50VXNlcigpLmRpc3BsYXlOYW1lLCB0aGlzLnBlbmRpbmdUb0FkZCwgdGhpcy5wcm9qZWN0RGF0YS5uYW1lLCB0aGlzLnByb2plY3REYXRhLmlkKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gSXQgY291bGQgYmUgdGhhdCBpcyB0aGUgZmlyc3QgdGltZSBhIGNvbGxhYm9yYXRvclxyXG4gICAgICAgIC8vIGlzIGFkZGVkIHNvIHRoZSBGQ00gZGV2aWNlIHRva2VuIHdpbGwgYmUgYXNrZWQuXHJcbiAgICAgICAgd2luZG93LnNhdmVNZXNzYWdpbmdEZXZpY2VUb2tlbigpO1xyXG4gICAgICB9LCByZWogPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKHJlaik7XHJcbiAgICAgICAgYWRkaXRpb25TdWNjZXNzID0gZmFsc2U7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgLy8gQWN0aW9ucyBkZXBlbmRpbmcgb24gdGhlIHN1Y2Nlc3Mgb3IgZmFpbHVyZS5cclxuICAgIGlmIChhZGRpdGlvblN1Y2Nlc3MgJiYgcmVtb3ZhbFN1Y2Nlc3MpIHtcclxuICAgICAgaWYgKHRoaXMucHJvamVjdERhdGEucGVybWlzc2lvbnMubGVuZ3RoID09PSAxKSB7IC8vIDEgYmVjYXVzZSB0aGVyZSBpcyBhbHdheXMgYXQgbGVhc3QgdGhlIG93bmVyLlxyXG4gICAgICAgIHRoaXMucHJvamVjdERhdGEuc2hhcmVkID0gZmFsc2U7XHJcbiAgICAgICAgaWYgKHRoaXMucHJvamVjdEl0ZW0ucXVlcnlTZWxlY3RvcignLnNoYXJlZEljb24nKSkge1xyXG4gICAgICAgICAgdGhpcy5wcm9qZWN0SXRlbS5xdWVyeVNlbGVjdG9yKCcuc2hhcmVkSWNvbicpLnJlbW92ZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLnByb2plY3REYXRhLnNoYXJlZCA9IHRydWU7XHJcbiAgICAgICAgaWYgKCF0aGlzLnByb2plY3RJdGVtLnF1ZXJ5U2VsZWN0b3IoJy5zaGFyZWRJY29uJykpIHtcclxuICAgICAgICAgIHRoaXMucHJvamVjdEl0ZW0uaW5zZXJ0QWRqYWNlbnRIVE1MKCdhZnRlcmJlZ2luJywgJzxpbWcgY2xhc3M9XCJzaGFyZWRJY29uXCIgc3JjPVwic3JjL2Fzc2V0cy9pY29ucy9zaGFyZUljb24uc3ZnXCI+Jyk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIHRoaXMuYXBwLnNob3dNZXNzYWdlKCdzdWNjZXNzJywgJ1Byb2plY3QgbWVtYmVycyB1cGRhdGVkIHN1Y2Nlc3NmdWxseS4nLCA1MDAwKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuYXBwLnNob3dNZXNzYWdlKCdlcnJvcicsICdTb21ldGhpbmcgd2VudCB3cm9uZywgbWVtYmVyIGNoYW5nZXMgY291bGQgbm8gYmUgc2F2ZWQuJyk7XHJcbiAgICB9XHJcbiAgICB0aGlzLndhaXRpbmdBbmltYXRpb24uY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XHJcbiAgICB0aGlzLmFwcC5jbG9zZU1vZGFsRGlhbG9nKCk7XHJcbiAgfVxyXG59IiwiaW1wb3J0IEdlbmVyaWNzIGZyb20gJy4vZ2VuZXJpY3MnO1xyXG5cclxuZXhwb3J0IGNsYXNzIE5vdGlmaWNhdGlvbnNNYW5hZ2VyIHtcclxuICBjb25zdHJ1Y3RvcigpIHtcclxuICAgIHRoaXMubm90aWZpY2F0aW9uc0J0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdub3RpZmljYXRpb25CdG4nKTtcclxuICAgIHRoaXMubm90aWZpY2F0aW9uc0NvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdub3RpZmljYXRpb25zQ29udGFpbmVyJyk7XHJcbiAgICB0aGlzLm5vdGlmaWNhdGlvbnNMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI25vdGlmaWNhdGlvbnNDb250YWluZXIgPiAubm90aWZpY2F0aW9ucy1ib2R5Jyk7XHJcbiAgICB0aGlzLm5vdGlmaWNhdGlvbnNCdG4ub25jbGljayA9ICgpID0+IHRoaXMubm90aWZpY2F0aW9uc0NvbnRhaW5lci5jbGFzc0xpc3QudG9nZ2xlKCdvcGVuJyk7XHJcbiAgICB0aGlzLm5vdGlmaWNhdGlvbnNMaXN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiB7XHJcbiAgICAgIGlmIChlLnRhcmdldC5jbG9zZXN0KCdsaScpKSB0aGlzLnZpZXdOb3RpZmljYXRpb24oZS50YXJnZXQuY2xvc2VzdCgnbGknKS5kYXRhc2V0LmlkKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5ub3RpZmljYXRpb25zID0gW107XHJcbiAgfVxyXG5cclxuICAvLyBTaG93IG5vdGlmaWNhdGlvbnMgcGFuZWxcclxuICAvLyBzaG93Tm90aWZpY2F0aW9uc1BhbmVsKCkge1xyXG5cclxuICAvLyB9XHJcblxyXG4gIC8vIEhpZGUgbm90aWZpY2F0aW9ucyBwYW5lbFxyXG4gIC8vIGhpZGVOb3RpZmljYXRpb25zUGFuZWwoKSB7XHJcblxyXG4gIC8vIH1cclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIENyZWF0ZXMgYSBub3RpZmljYXRpb24gcmVwcmVzZW50YXRpb24gdGhhdCBhcHBlYXJzIGluIHRoZSBVSSBhbmQgYWRkcyBhbiBvYmplY3RcclxuICAgKiB3aXRoIGFsbCB0aGUgbm90aWZpY2F0aW9uIGRhdGEgdG8gdGhlIG5vdGlmaWNhdGlvbnMgYXJyYXkuXHJcbiAgICogICBzcmMvYXNzZXRzL2F2YXRhci1wbGFjZWhvbGRlci5wbmdcclxuICAgKiBAcGFyYW0ge09iamVjdH0gbm90aWZpY2F0aW9uT2JqIEl0IHNob3VsZCBoYXZlIGF1dGhvciwgcHJvamVjdE5hbWUsIHByb2plY3RJZCwgdGV4dCBhbmQgcGhvdG9MaW5rIGVudHJpZXMuXHJcbiAgICovXHJcbiAgY3JlYXRlTm90aWZpY2FjdGlvbihub3RpZmljYXRpb25PYmopIHtcclxuICAgIGNvbnN0IG5vdGlmaWNhdGlvbkVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xyXG4gICAgY29uc3Qgbm90aWZpY2F0aW9uSWQgPSBHZW5lcmljcy51dWlkdjQoKTtcclxuICAgIG5vdGlmaWNhdGlvbkVsZW1lbnQuZGF0YXNldC5pZCA9IG5vdGlmaWNhdGlvbklkO1xyXG4gICAgbm90aWZpY2F0aW9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKCdwZW5kaW5nJyk7XHJcbiAgICBub3RpZmljYXRpb25FbGVtZW50LmlubmVySFRNTCA9IGBcclxuICAgICAgPGltZyBjbGFzcz1cIm5vdGlmaWNhdGlvbi10aHVtYlwiIHNyYz1cIiR7bm90aWZpY2F0aW9uT2JqLnBob3RvTGlua31cIj5cclxuICAgICAgPGRpdiBjbGFzcz1cIm5vdGlmaWNhdGlvbi1jb250ZW50XCI+XHJcbiAgICAgICAgPGg0PiR7bm90aWZpY2F0aW9uT2JqLmF1dGhvcn0gbWVudGlvbmVkIHlvdSBpbiBhIGNvbW1lbnQgb24gdGhlIHByb2plY3QgJHtub3RpZmljYXRpb25PYmoucHJvamVjdE5hbWV9PC9oND5cclxuICAgICAgICA8cD4ke25vdGlmaWNhdGlvbk9iai50ZXh0fTwvcD5cclxuICAgICAgPC9kaXY+YDtcclxuICAgIHRoaXMubm90aWZpY2F0aW9uc0xpc3QucHJlcGVuZChub3RpZmljYXRpb25FbGVtZW50KTtcclxuICAgIHRoaXMubm90aWZpY2F0aW9ucy5wdXNoKHsgaWQ6IG5vdGlmaWNhdGlvbklkLCByZXByZXNlbnRhdGlvbjogbm90aWZpY2F0aW9uRWxlbWVudCwgc3RhdGU6ICdwZW5kaW5nJywgZGF0YTogbm90aWZpY2F0aW9uT2JqIH0pO1xyXG4gICAgLy8gRW5hYmxlcyB0aGUgaWNvbiB0byBpbmRpY2F0ZSB0aGF0IHRoZXJlIGFyZSBwZW5kaW5nIG5vdGlmaWNhdGlvbnMuXHJcbiAgICAvLyBUT0RPOiBEb250IGRvIGl0IGVhY2ggdGltZS5cclxuICAgIHRoaXMubm90aWZpY2F0aW9uc0J0bi5jbGFzc0xpc3QuYWRkKCdlbmFibGVkJyk7XHJcbiAgICBpZiAodGhpcy5ub3RpZmljYXRpb25zLmxlbmd0aCA9PT0gMSkge1xyXG4gICAgICB0aGlzLm5vdGlmaWNhdGlvbnNDb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZSgnZW1wdHknKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIEN1cnJlbnRseSB3aGVuIGEgbm90aWZpY2F0aW9uIGlzIHZpc2l0ZWQgaXQgaXMgcmVtb3ZlZFxyXG4gIC8vIGJ1dCBpdCBjYW4gYmUgY2hhbmdlZCB0byBrZWVwIHRoZW0gaW4gaGlzdG9yeS5cclxuXHJcbiAgLyoqXHJcbiAgICogbWF4aW11bSBvZiAxMCByZWFkIG5vdGlmaWNhdGlvbnMgb3Igbm8gbGltaXQgaWYgdGhleSBhcmUgdW5yZWFkXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IG5vdGlmaWNhdGlvbklkIFxyXG4gICAqL1xyXG4gIGRlbGV0ZU5vdGlmaWNhY3Rpb24obm90aWZpY2F0aW9uSWQpIHtcclxuICAgIGNvbnN0IGluZGV4ID0gdGhpcy5ub3RpZmljYXRpb25zLmZpbmRJbmRleChuID0+IG4uaWQgPT09IG5vdGlmaWNhdGlvbklkKTtcclxuICAgIHRoaXMubm90aWZpY2F0aW9uc1tpbmRleF0ucmVwcmVzZW50YXRpb24ucmVtb3ZlKCk7XHJcbiAgICB0aGlzLm5vdGlmaWNhdGlvbnMuc3BsaWNlKGluZGV4LCAxKTtcclxuICAgIC8vIFRPRE86IElmIHRoZXJlIGFyZSBubyBtb3JlIG5vdGlmaWNhdGlvbnMgdGhlbiBhZGQgdGhlIGVtcHR5IGNsYXNzIHRvIHRoaXMubm90aWZpY2F0aW9uc0NvbnRhaW5lclxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVE9ETzogc2VwYXJhdGUgZ29Ub05vdGlmaWNhdGlvbiBhbmQgbWFya0FzUmVhZCA/XHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IG5vdGlmaWNhdGlvbklkIFxyXG4gICAqL1xyXG4gIHZpZXdOb3RpZmljYXRpb24obm90aWZpY2F0aW9uSWQpIHtcclxuICAgIGNvbnN0IG5vdGlmaWNhdGlvbiA9IHRoaXMubm90aWZpY2F0aW9ucy5maW5kKG4gPT4gbi5pZCA9PT0gbm90aWZpY2F0aW9uSWQpO1xyXG4gICAgbm90aWZpY2F0aW9uLnN0YXRlID0gJ3JlYWQnO1xyXG4gICAgbm90aWZpY2F0aW9uLnJlcHJlc2VudGF0aW9uLmNsYXNzTGlzdC5yZW1vdmUoJ3BlbmRpbmcnKTtcclxuICAgIC8vIFRPRE86IGdvIHRvIHRoZSBub3RpZmljYXRpb24sIGluIGEgbmV3IHRhYj8gdGhlIHByb2plY3QgaWQgaXMgaW4gbm90aWZpY2F0aW9uLmRhdGEucHJvamVjdElkXHJcbiAgICAvLyBJZiB0aGVyZSBhcmUgbm8gbW9yZSBwZW5kaW5nIG5vdGlmaWNhdGlvbnMgc2V0IHRoZSBpY29uIG5vcm1hbC5cclxuICAgIGlmICh0aGlzLm5vdGlmaWNhdGlvbnMuZmluZChuID0+IG4uc3RhdGUgPT09ICdwZW5kaW5nJykgPT09IHVuZGVmaW5lZClcclxuICAgICAgdGhpcy5ub3RpZmljYXRpb25zQnRuLmNsYXNzTGlzdC5yZW1vdmUoJ2VuYWJsZWQnKTtcclxuICAgIC8vIFRPRE86IERlbGV0ZSBub3RpZmljYXRpb24gb3Iga2VlcCBpdCBpbiBoaXN0b3J5ID9cclxuICAgIC8vIHRoaXMuZGVsZXRlTm90aWZpY2FjdGlvbihub3RpZmljYXRpb25JZCk7XHJcbiAgfVxyXG5cclxufVxyXG4iLCJpbXBvcnQgQVBJIGZyb20gJy4vYXBpJztcclxuaW1wb3J0IHR5cGUgeyBBcHBsaWNhdGlvbiB9IGZyb20gJy4vYXBwJztcclxuXHJcbmV4cG9ydCBjbGFzcyBSZW5hbWVQcm9qZWN0IHtcclxuICBodG1sQ29udGFpbmVyOiBIVE1MRWxlbWVudDtcclxuICByZW5hbWVGb3JtOiBIVE1MRm9ybUVsZW1lbnQ7XHJcbiAgaW5wdXQ6IEhUTUxJbnB1dEVsZW1lbnQ7XHJcbiAgcmVuYW1lUHJvamVjdEVycm9yTXNnOiBIVE1MRWxlbWVudDtcclxuICBjYW5jZWxCdG46IEhUTUxFbGVtZW50O1xyXG4gIGFwcDogQXBwbGljYXRpb247XHJcbiAgcHJvamVjdExpc3RJdGVtOiBIVE1MRWxlbWVudDtcclxuICBwcm9qZWN0SWQ6IHN0cmluZztcclxuICBjdXJyZW50TmFtZTogc3RyaW5nO1xyXG4gIGVtcHR5SW5wdXRWYWx1ZSA9IG5ldyBSZWdFeHAoL14oXFxzfFxcdCkqJC8pO1xyXG5cclxuICBjb25zdHJ1Y3RvcihyZW5hbWVQcm9qZWN0Q29udGFpbmVyOiBIVE1MRWxlbWVudCwgQXBwOiBBcHBsaWNhdGlvbikge1xyXG4gICAgdGhpcy5odG1sQ29udGFpbmVyID0gcmVuYW1lUHJvamVjdENvbnRhaW5lcjtcclxuICAgIHRoaXMucmVuYW1lRm9ybSA9IHJlbmFtZVByb2plY3RDb250YWluZXIucXVlcnlTZWxlY3RvcignZm9ybScpO1xyXG4gICAgdGhpcy5pbnB1dCA9IHJlbmFtZVByb2plY3RDb250YWluZXIucXVlcnlTZWxlY3RvcignZm9ybSA+IGRpdjpmaXJzdC1jaGlsZCA+IGlucHV0Jyk7XHJcbiAgICB0aGlzLnJlbmFtZVByb2plY3RFcnJvck1zZyA9IHJlbmFtZVByb2plY3RDb250YWluZXIucXVlcnlTZWxlY3RvcignLmVycm9yLW1zZycpO1xyXG4gICAgdGhpcy5jYW5jZWxCdG4gPSByZW5hbWVQcm9qZWN0Q29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJ2Zvcm0gPiBkaXY6bGFzdC1jaGlsZCA+IC5jYW5jZWwtYnRuJyk7XHJcblxyXG4gICAgLy8gVGhlIEFwcCBpcyBuZWVkZWQgdG8gYWNjZXNzIHNvbWUgb2YgaXRzIG1ldGhvZHMuXHJcbiAgICB0aGlzLmFwcCA9IEFwcDtcclxuXHJcbiAgICB0aGlzLnJlbmFtZVByb2plY3QgPSB0aGlzLnJlbmFtZVByb2plY3QuYmluZCh0aGlzKTtcclxuICAgIHRoaXMucmVuYW1lRm9ybS5vbnN1Ym1pdCA9IHRoaXMucmVuYW1lUHJvamVjdDtcclxuXHJcbiAgICB0aGlzLmNhbmNlbEJ0bi5vbmNsaWNrID0gZSA9PiB7XHJcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdGhpcy5zZXRJbnB1dFZhbHVlKCcnKTtcclxuICAgICAgQXBwLmNsb3NlTW9kYWxEaWFsb2coKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFdoZW4gdGhlIG1vZGFsIGRpYWxvZyB0aGF0IGNvbnRhaW5zIHRoaXMgaXMgb3BlbiB0aGlzIG1ldGhvZCBzaG91bGQgYmUgY2FsbGVkLlxyXG4gICAqL1xyXG4gIHNldFVwRGlhbG9nKHByb2plY3RMaXN0SXRlbTogSFRNTEVsZW1lbnQpIHtcclxuICAgIHRoaXMucHJvamVjdExpc3RJdGVtID0gcHJvamVjdExpc3RJdGVtO1xyXG4gICAgdGhpcy5wcm9qZWN0SWQgPSBwcm9qZWN0TGlzdEl0ZW0uZGF0YXNldC5wcm9qSWQ7XHJcbiAgICB0aGlzLmN1cnJlbnROYW1lID0gcHJvamVjdExpc3RJdGVtLmRhdGFzZXQubmFtZTtcclxuICAgIHRoaXMucmVuYW1lUHJvamVjdEVycm9yTXNnLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xyXG4gICAgdGhpcy5zZXRJbnB1dFZhbHVlKHRoaXMuY3VycmVudE5hbWUpO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgcmVuYW1lUHJvamVjdChlOiBFdmVudCkge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgaWYgKHRoaXMuaW5wdXQudmFsdWUgPT09ICcnIHx8IHRoaXMuZW1wdHlJbnB1dFZhbHVlLnRlc3QodGhpcy5pbnB1dC52YWx1ZSkpIHtcclxuICAgICAgdGhpcy5yZW5hbWVQcm9qZWN0RXJyb3JNc2cuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XHJcbiAgICB9IGVsc2UgaWYgKHRoaXMuaW5wdXQudmFsdWUudHJpbSgpID09PSB0aGlzLmN1cnJlbnROYW1lKSB7XHJcbiAgICAgIHRoaXMuc2V0SW5wdXRWYWx1ZSgnJyk7XHJcbiAgICAgIHRoaXMuYXBwLmNsb3NlTW9kYWxEaWFsb2coKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMucmVuYW1lUHJvamVjdEVycm9yTXNnLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIC8vIFRPRE8gZGlzYWJsZSBidXR0b24gd2hpbGUgcHJvY2Vzc2luZyBhbmQgbWF5YmUgYWRkIHdhaXRpbmcgYW5pbWF0aW9uLlxyXG4gICAgICAgIGNvbnN0IHByb2plY3RSZW5hbWVkUmVzID0gYXdhaXQgQVBJLnJlbmFtZUZpbGUodGhpcy5wcm9qZWN0SWQsIHRoaXMuaW5wdXQudmFsdWUudHJpbSgpKTtcclxuICAgICAgICBpZiAocHJvamVjdFJlbmFtZWRSZXMuc3RhdHVzID09PSAyMDApIHtcclxuICAgICAgICAgIHRoaXMucHJvamVjdExpc3RJdGVtLnF1ZXJ5U2VsZWN0b3IoJ2g0JykuaW5uZXJUZXh0ID0gcHJvamVjdFJlbmFtZWRSZXMucmVzdWx0Lm5hbWU7XHJcbiAgICAgICAgICB0aGlzLnByb2plY3RMaXN0SXRlbS5kYXRhc2V0Lm5hbWUgPSBwcm9qZWN0UmVuYW1lZFJlcy5yZXN1bHQubmFtZTtcclxuICAgICAgICAgIHRoaXMuc2V0SW5wdXRWYWx1ZSgnJyk7XHJcbiAgICAgICAgICB0aGlzLmFwcC5jbG9zZU1vZGFsRGlhbG9nKCk7XHJcbiAgICAgICAgICB0aGlzLmFwcC5zaG93TWVzc2FnZSgnc3VjY2VzcycsICdQcm9qZWN0IHJlbmFtZWQgc3VjY2Vzc2Z1bGx5LicsIDUwMDApO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB0aGlzLmFwcC5zaG93TWVzc2FnZSgnZXJyb3InLCAnSXQgd2FzIG5vdCBwb3NzaWJsZSB0byByZW5hbWUgdGhlIHByb2plY3QuJyk7XHJcbiAgICAgICAgICB0aGlzLmFwcC5jbG9zZU1vZGFsRGlhbG9nKCk7XHJcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdTb21ldGhpbmcgd2VudCB3cm9uZyByZW5hbWluZyBhIHByb2plY3QuICcsIHByb2plY3RSZW5hbWVkUmVzKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICAgIHRoaXMuYXBwLnNob3dNZXNzYWdlKCdlcnJvcicsICdJdCB3YXMgbm90IHBvc3NpYmxlIHRvIHJlbmFtZSB0aGUgcHJvamVjdC4nKTtcclxuICAgICAgICB0aGlzLmFwcC5jbG9zZU1vZGFsRGlhbG9nKCk7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignU29tZXRoaW5nIHdlbnQgd3JvbmcgcmVuYW1pbmcgYSBwcm9qZWN0LiAnLCBlcnIpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZXRJbnB1dFZhbHVlKHZhbHVlOiBzdHJpbmcpIHtcclxuICAgIHRoaXMuaW5wdXQudmFsdWUgPSB2YWx1ZTtcclxuICB9XHJcbn0iLCJpbXBvcnQgR2VuZXJpY3MgZnJvbSAnLi9nZW5lcmljcyc7XHJcblxyXG5pbnRlcmZhY2UgSFRNTEVsZW1lbnRXaXRoQ29udGV4dCBleHRlbmRzIEhUTUxFbGVtZW50IHtcclxuICBjb250ZXh0TWVudURhdGE6IENvbnRleHRNZW51RGF0YTtcclxufVxyXG5cclxuaW50ZXJmYWNlIENvbnRleHRNZW51SXRlbSB7XHJcbiAgbmFtZTogc3RyaW5nO1xyXG4gIGFjdGlvbjogKHRoaXM6IEdsb2JhbEV2ZW50SGFuZGxlcnMpID0+IHZvaWQ7XHJcbn1cclxuXHJcbmludGVyZmFjZSBDb250ZXh0TWVudURhdGEgZXh0ZW5kcyBBcnJheTxDb250ZXh0TWVudUl0ZW0+e31cclxuXHJcblxyXG5leHBvcnQgY2xhc3MgQ29udGV4dE1lbnUge1xyXG4gIEhUTUxDb250YWluZXI6IEhUTUxFbGVtZW50O1xyXG4gIG1lbnVMaXN0Q29udGFpbmVyOiBIVE1MRWxlbWVudDtcclxuICB2aXNpYmxlID0gZmFsc2U7XHJcblxyXG4gIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgdGhpcy5IVE1MQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICB0aGlzLkhUTUxDb250YWluZXIuaWQgPSAnY29udGV4dE1lbnUnO1xyXG4gICAgdGhpcy5tZW51TGlzdENvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3VsJyk7XHJcbiAgICB0aGlzLkhUTUxDb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5tZW51TGlzdENvbnRhaW5lcik7XHJcbiAgICB0aGlzLkhUTUxDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgaWYgKHRoaXMudmlzaWJsZSkgdGhpcy50b2dnbGVNZW51KCdoaWRlJyk7XHJcbiAgICB9KTtcclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdjb250ZXh0bWVudScsIGUgPT4ge1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIGNvbnN0IHRhcmdldEVsZW1lbnQgPSAoZS50YXJnZXQgYXMgSFRNTEVsZW1lbnQpLmNsb3Nlc3QoJ1tkYXRhLWN4bWVudV0nKSBhcyBIVE1MRWxlbWVudFdpdGhDb250ZXh0O1xyXG4gICAgICBpZiAodGFyZ2V0RWxlbWVudCAmJiB0YXJnZXRFbGVtZW50Lmhhc093blByb3BlcnR5KCdjb250ZXh0TWVudURhdGEnKSkge1xyXG4gICAgICAgIC8vIENsZWFuIHByZXZpb3VzIGNvbnRlbnQgb2YgdGhlIGNvbnRleHQgbWVudS5cclxuICAgICAgICB0aGlzLmNsZWFyTWVudSgpO1xyXG4gICAgICAgIC8vIFNldCB0aGUgbmV3IGNvbnRlbnQuXHJcbiAgICAgICAgdGhpcy5nZW5lcmF0ZU1lbnUodGFyZ2V0RWxlbWVudC5jb250ZXh0TWVudURhdGEpO1xyXG4gICAgICAgIC8vIFRoZSBwb3NpdGlvbi5cclxuICAgICAgICB0aGlzLnNldFBvc2l0aW9uKGUucGFnZVksIGUucGFnZVgpO1xyXG4gICAgICB9IGVsc2UgaWYgKHRoaXMudmlzaWJsZSkge1xyXG4gICAgICAgIHRoaXMudG9nZ2xlTWVudShcImhpZGVcIik7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgd2luZG93LmRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGhpcy5IVE1MQ29udGFpbmVyKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFRvZ2dsZXMgdGhlIHZpc2liaWxpdHkgb2YgdGhlIGNvbnRleHQgbWVudS5cclxuICAgKi9cclxuICB0b2dnbGVNZW51KGNvbW1hbmQ6ICdzaG93JyB8ICdoaWRlJykge1xyXG4gICAgdGhpcy5IVE1MQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSBjb21tYW5kID09PSBcInNob3dcIiA/IFwiYmxvY2tcIiA6IFwibm9uZVwiO1xyXG4gICAgdGhpcy52aXNpYmxlID0gIXRoaXMudmlzaWJsZTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFNldHMgdGhlIHBvc2l0aW9uIG9mIHRoZSBjb250ZXh0IG1lbnUgb24gdGhlIHdpbmRvdy5cclxuICAgKi9cclxuICBzZXRQb3NpdGlvbih0b3A6IG51bWJlciwgbGVmdDogbnVtYmVyKSB7XHJcbiAgICB0aGlzLkhUTUxDb250YWluZXIuc3R5bGUubGVmdCA9IGAke2xlZnR9cHhgO1xyXG4gICAgdGhpcy5IVE1MQ29udGFpbmVyLnN0eWxlLnRvcCA9IGAke3RvcH1weGA7XHJcbiAgICB0aGlzLnRvZ2dsZU1lbnUoXCJzaG93XCIpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogUmVtb3ZlcyB0aGUgY29udGVudHMgb2YgdGhlIGNvbnRleHQgbWVudSBhcyB3ZWxsIGFzIGFueSBhc3NvY2lhdGVkIGV2ZW50IGxpc3RlbmVyLlxyXG4gICAqL1xyXG4gIGNsZWFyTWVudSgpIHtcclxuICAgIHRoaXMubWVudUxpc3RDb250YWluZXIuY2hpbGROb2Rlcy5mb3JFYWNoKChidG46IEhUTUxFbGVtZW50KSA9PiBidG4ub25jbGljayA9IG51bGwpO1xyXG4gICAgR2VuZXJpY3MuZW1wdHlOb2RlKHRoaXMubWVudUxpc3RDb250YWluZXIpO1xyXG4gIH0gIFxyXG5cclxuICAvKipcclxuICAgKiBDcmVhdGVzIHRoZSBjb250ZW50cyBvZiB0aGUgY29udGV4dCBtZW51IGFuZCBhcHBlbmRzIHRoZW0uXHJcbiAgICovXHJcbiAgZ2VuZXJhdGVNZW51KGNvbnRleHRNZW51RGF0YTogQ29udGV4dE1lbnVEYXRhKSB7XHJcbiAgICBjb25zdCBpdGVtc0NvbnRhaW5lciA9IG5ldyBEb2N1bWVudEZyYWdtZW50KCk7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvbnRleHRNZW51RGF0YS5sZW5ndGg7IGkrKykge1xyXG4gICAgICBjb25zdCBpdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcclxuICAgICAgaXRlbS5pbm5lclRleHQgPSBjb250ZXh0TWVudURhdGFbaV0ubmFtZTtcclxuICAgICAgaXRlbS5vbmNsaWNrID0gY29udGV4dE1lbnVEYXRhW2ldLmFjdGlvbjtcclxuICAgICAgaXRlbXNDb250YWluZXIuYXBwZW5kQ2hpbGQoaXRlbSk7XHJcbiAgICB9XHJcbiAgICB0aGlzLm1lbnVMaXN0Q29udGFpbmVyLmFwcGVuZENoaWxkKGl0ZW1zQ29udGFpbmVyKTtcclxuICB9XHJcblxyXG59XHJcblxyXG4iLCJpbXBvcnQgQVBJIGZyb20gJy4vYXBpJztcclxuXHJcbmV4cG9ydCBjbGFzcyBQcm9qZWN0SXRlbSB7XHJcbiAgLyoqXHJcbiAgICogQHBhcmFtIHtQcm9qZWN0RGF0YX0gcHJvamVjdERhdGEgT2JqZWN0IHdpdGggbmFtZSwgaWQgYW5kIG9wdGlvbmFsIHRodW1iSWQgZW50cmllcy5cclxuICAgKiBAcGFyYW0ge0FwcGxpY2F0aW9ufSBhcHAgUmVmZXJlbmNlIHRvIHRoZSBhcHAgdG8gYWNjZXNzIHNvbWUgb2YgaXRzIHByb3BlcnRpZXMgYW5kIG1ldGhvZHMuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3IocHJvamVjdERhdGEsIGFwcCkge1xyXG4gICAgdGhpcy5IVE1MQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XHJcbiAgICAvLyBQcm9qZWN0cyB0aGF0IGhhdmUgYmVlbiB1cGxvYWRlZCBidXQgbm90IHNlbmQgdG8gdGhlIGJhY2tlbmQgaGF2ZSBhbiBpZCBvZiAndGVtcG9yYWwnLlxyXG4gICAgaWYgKHByb2plY3REYXRhLmlkID09PSAndGVtcG9yYWwnKSB7XHJcbiAgICAgIHRoaXMuSFRNTENvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCd1bnN5bmMnKTtcclxuICAgIH1cclxuICAgIHRoaXMuSFRNTENvbnRhaW5lci5kYXRhc2V0LnByb2pJZCA9IHByb2plY3REYXRhLmlkO1xyXG4gICAgdGhpcy5IVE1MQ29udGFpbmVyLmRhdGFzZXQubmFtZSA9IHByb2plY3REYXRhLm5hbWU7XHJcbiAgICB0aGlzLkhUTUxDb250YWluZXIuY2xhc3NMaXN0LmFkZCgncHJvamVjdEl0ZW0nKTtcclxuICAgIGxldCBwcm9qSXRlbUNvbnRlbnQgPSBbXTtcclxuICAgIGlmIChwcm9qZWN0RGF0YS5zaGFyZWQpIHtcclxuICAgICAgcHJvakl0ZW1Db250ZW50LnB1c2goJzxzdmcgY2xhc3M9XCJzaGFyZWRJY29uXCI+PHVzZSBocmVmPVwiI3NoYXJlZEljb25cIiAvPjwvc3ZnPicpO1xyXG4gICAgfVxyXG4gICAgaWYgKHByb2plY3REYXRhLnRodW1iSWQpIHtcclxuICAgICAgcHJvakl0ZW1Db250ZW50LnB1c2goYDxpbWcgY2xhc3M9XCJ0aHVtYlwiIHNyYz1cImh0dHBzOi8vZHJpdmUuZ29vZ2xlLmNvbS91Yz9pZD0ke3Byb2plY3REYXRhLnRodW1iSWR9XCI+YCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBwcm9qSXRlbUNvbnRlbnQucHVzaChgPHN2ZyBjbGFzcz1cInRodW1iXCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHZpZXdCb3g9XCItMTAwIC01MCAzNTAgMjEwXCI+PHBhdGggZD1cIk0xNDMsMTAuNDRINjUuMjdWN2E3LDcsMCwwLDAtNy03SDdBNyw3LDAsMCwwLDAsN1YxMDNhNyw3LDAsMCwwLDcsN0g2NVY3MC4xOEg4NVYxMTBoNThhNyw3LDAsMCwwLDctN1YxNy40MUE3LDcsMCwwLDAsMTQzLDEwLjQ0Wk0xMjUsNTMuNDlIMTA1di0yMGgyMFpcIiBzdHlsZT1cImZpbGw6I2U2ZTZlNlwiLz48L3N2Zz5gKTtcclxuICAgIH1cclxuICAgIHByb2pJdGVtQ29udGVudC5wdXNoKGA8aDQ+JHtwcm9qZWN0RGF0YS5uYW1lfTwvaDQ+YCk7XHJcbiAgICB0aGlzLkhUTUxDb250YWluZXIuaW5uZXJIVE1MID0gcHJvakl0ZW1Db250ZW50LmpvaW4oJycpO1xyXG5cclxuICAgIC8vIEluZGljYXRlIHRoYXQgdGhpcyBvYmplY3QgaGFzIGNvbnRleHQgbWVudS5cclxuICAgIHRoaXMuSFRNTENvbnRhaW5lci5kYXRhc2V0LmN4bWVudSA9ICcnO1xyXG5cclxuICAgIC8vIEFwcGVuZCBhIG5ldyBwcm9wZXJ0eSB0byB0aGUgSFRNTCBjb250YWluZXIgZWxlbWVudCB3aXRoIHRoZSBjb250ZXh0IG1lbnUgZGF0YS5cclxuICAgIHRoaXMuSFRNTENvbnRhaW5lci5jb250ZXh0TWVudURhdGEgPSBbXHJcbiAgICAgIHtcclxuICAgICAgICBuYW1lOiAnRGVsZXRlJyxcclxuICAgICAgICBhY3Rpb246ICgpID0+IHtcclxuICAgICAgICAgIGFwcC5zaG93Vmlld3BvcnREaWFsb2coJ2FjdGlvbicsIGBBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gZGVsZXRlIHRoZSAke3Byb2plY3REYXRhLm5hbWV9IHByb2plY3Q/YCwgW1xyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgbmFtZTogJ0RlbGV0ZScsXHJcbiAgICAgICAgICAgICAgZnVuY3Rpb246ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGFwcC5zaG93Vmlld3BvcnREaWFsb2coJ2xvYWRlcicsIGBEZWxldGluZyAke3Byb2plY3REYXRhLm5hbWV9IHByb2plY3QuYCk7XHJcbiAgICAgICAgICAgICAgICBBUEkuZGVsZXRlRmlsZShwcm9qZWN0RGF0YS5pZCkudGhlbihyZXMgPT4ge1xyXG4gICAgICAgICAgICAgICAgICB0aGlzLkhUTUxDb250YWluZXIucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICAgIGNvbnN0IHByb2pJbmRleCA9IGFwcC5wcm9qZWN0c0RhdGEuZmluZEluZGV4KHByb2ogPT4gcHJvai5pZCA9PT0gcHJvamVjdERhdGEuaWQpO1xyXG4gICAgICAgICAgICAgICAgICBhcHAucHJvamVjdHNEYXRhLnNwbGljZShwcm9qSW5kZXgsIDEpO1xyXG4gICAgICAgICAgICAgICAgICAvLyBUT0RPIGNoZWNrIGFsc28gaWYgaXQgaXMgaW4gdGhlIHZhbHVlIG9mIGN1cnJlbnRQcm9qZWN0IG9yIGxhc3RVcGxvYWRlZFByb2plY3QgYW5kIGRlbGV0ZSBpdCBhcyB3ZWxsXHJcbiAgICAgICAgICAgICAgICAgIGFwcC5oaWRlVmlld3BvcnRNZXNzYWdlKCk7XHJcbiAgICAgICAgICAgICAgICAgIGFwcC5zaG93TWVzc2FnZSgnc3VjY2VzcycsICdQcm9qZWN0IGRlbGV0ZWQgc3VjY2Vzc2Z1bGx5Jyk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICBuYW1lOiAnQ2FuY2VsJyxcclxuICAgICAgICAgICAgICBmdW5jdGlvbjogKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgYXBwLmhpZGVWaWV3cG9ydE1lc3NhZ2UoKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIF0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfSxcclxuICAgICAge1xyXG4gICAgICAgIG5hbWU6ICdTaGFyZSBwcm9qZWN0JyxcclxuICAgICAgICBhY3Rpb246ICgpID0+IHtcclxuICAgICAgICAgIGFwcC5zaGFyZVByb2plY3REaWFsb2cuc2V0VXBEaWFsb2cocHJvamVjdERhdGEpO1xyXG4gICAgICAgICAgYXBwLnNob3dNb2RhbERpYWxvZyhhcHAuc2hhcmVQcm9qZWN0RGlhbG9nLmh0bWxDb250YWluZXIpO1xyXG4gICAgICAgICAgYXBwLm1vZGFsRGlhbG9nQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ2dyYXlUcmFuc2x1Y2VudCcpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSxcclxuICAgICAge1xyXG4gICAgICAgIG5hbWU6ICdSZW5hbWUnLFxyXG4gICAgICAgIGFjdGlvbjogKCkgPT4ge1xyXG4gICAgICAgICAgYXBwLnJlbmFtZVByb2plY3REaWFsb2cuc2V0VXBEaWFsb2codGhpcy5IVE1MQ29udGFpbmVyKTtcclxuICAgICAgICAgIGFwcC5zaG93TW9kYWxEaWFsb2coYXBwLnJlbmFtZVByb2plY3REaWFsb2cuaHRtbENvbnRhaW5lcik7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICBdO1xyXG4gIH1cclxufSIsImltcG9ydCBmaXJlYmFzZSBmcm9tICdAZmlyZWJhc2UvYXBwJztcbmltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gJ0BmaXJlYmFzZS9jb21wb25lbnQnO1xuaW1wb3J0IHsgX19hd2FpdGVyLCBfX2dlbmVyYXRvciwgX19zcHJlYWQsIF9fYXNzaWduLCBfX3ZhbHVlcyB9IGZyb20gJ3RzbGliJztcbmltcG9ydCB7IEVycm9yRmFjdG9yeSwgRmlyZWJhc2VFcnJvciB9IGZyb20gJ0BmaXJlYmFzZS91dGlsJztcbmltcG9ydCB7IG9wZW5EYiB9IGZyb20gJ2lkYic7XG5cbnZhciBuYW1lID0gXCJAZmlyZWJhc2UvaW5zdGFsbGF0aW9uc1wiO1xudmFyIHZlcnNpb24gPSBcIjAuMy44XCI7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG52YXIgUEVORElOR19USU1FT1VUX01TID0gMTAwMDA7XHJcbnZhciBQQUNLQUdFX1ZFUlNJT04gPSBcInc6XCIgKyB2ZXJzaW9uO1xyXG52YXIgSU5URVJOQUxfQVVUSF9WRVJTSU9OID0gJ0ZJU192Mic7XHJcbnZhciBJTlNUQUxMQVRJT05TX0FQSV9VUkwgPSAnaHR0cHM6Ly9maXJlYmFzZWluc3RhbGxhdGlvbnMuZ29vZ2xlYXBpcy5jb20vdjEnO1xyXG52YXIgVE9LRU5fRVhQSVJBVElPTl9CVUZGRVIgPSA2MCAqIDYwICogMTAwMDsgLy8gT25lIGhvdXJcclxudmFyIFNFUlZJQ0UgPSAnaW5zdGFsbGF0aW9ucyc7XHJcbnZhciBTRVJWSUNFX05BTUUgPSAnSW5zdGFsbGF0aW9ucyc7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG52YXIgX2E7XHJcbnZhciBFUlJPUl9ERVNDUklQVElPTl9NQVAgPSAoX2EgPSB7fSxcclxuICAgIF9hW1wibWlzc2luZy1hcHAtY29uZmlnLXZhbHVlc1wiIC8qIE1JU1NJTkdfQVBQX0NPTkZJR19WQUxVRVMgKi9dID0gJ01pc3NpbmcgQXBwIGNvbmZpZ3VyYXRpb24gdmFsdWU6IFwieyR2YWx1ZU5hbWV9XCInLFxyXG4gICAgX2FbXCJub3QtcmVnaXN0ZXJlZFwiIC8qIE5PVF9SRUdJU1RFUkVEICovXSA9ICdGaXJlYmFzZSBJbnN0YWxsYXRpb24gaXMgbm90IHJlZ2lzdGVyZWQuJyxcclxuICAgIF9hW1wiaW5zdGFsbGF0aW9uLW5vdC1mb3VuZFwiIC8qIElOU1RBTExBVElPTl9OT1RfRk9VTkQgKi9dID0gJ0ZpcmViYXNlIEluc3RhbGxhdGlvbiBub3QgZm91bmQuJyxcclxuICAgIF9hW1wicmVxdWVzdC1mYWlsZWRcIiAvKiBSRVFVRVNUX0ZBSUxFRCAqL10gPSAneyRyZXF1ZXN0TmFtZX0gcmVxdWVzdCBmYWlsZWQgd2l0aCBlcnJvciBcInskc2VydmVyQ29kZX0geyRzZXJ2ZXJTdGF0dXN9OiB7JHNlcnZlck1lc3NhZ2V9XCInLFxyXG4gICAgX2FbXCJhcHAtb2ZmbGluZVwiIC8qIEFQUF9PRkZMSU5FICovXSA9ICdDb3VsZCBub3QgcHJvY2VzcyByZXF1ZXN0LiBBcHBsaWNhdGlvbiBvZmZsaW5lLicsXHJcbiAgICBfYVtcImRlbGV0ZS1wZW5kaW5nLXJlZ2lzdHJhdGlvblwiIC8qIERFTEVURV9QRU5ESU5HX1JFR0lTVFJBVElPTiAqL10gPSBcIkNhbid0IGRlbGV0ZSBpbnN0YWxsYXRpb24gd2hpbGUgdGhlcmUgaXMgYSBwZW5kaW5nIHJlZ2lzdHJhdGlvbiByZXF1ZXN0LlwiLFxyXG4gICAgX2EpO1xyXG52YXIgRVJST1JfRkFDVE9SWSA9IG5ldyBFcnJvckZhY3RvcnkoU0VSVklDRSwgU0VSVklDRV9OQU1FLCBFUlJPUl9ERVNDUklQVElPTl9NQVApO1xyXG4vKiogUmV0dXJucyB0cnVlIGlmIGVycm9yIGlzIGEgRmlyZWJhc2VFcnJvciB0aGF0IGlzIGJhc2VkIG9uIGFuIGVycm9yIGZyb20gdGhlIHNlcnZlci4gKi9cclxuZnVuY3Rpb24gaXNTZXJ2ZXJFcnJvcihlcnJvcikge1xyXG4gICAgcmV0dXJuIChlcnJvciBpbnN0YW5jZW9mIEZpcmViYXNlRXJyb3IgJiZcclxuICAgICAgICBlcnJvci5jb2RlLmluY2x1ZGVzKFwicmVxdWVzdC1mYWlsZWRcIiAvKiBSRVFVRVNUX0ZBSUxFRCAqLykpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRJbnN0YWxsYXRpb25zRW5kcG9pbnQoX2EpIHtcclxuICAgIHZhciBwcm9qZWN0SWQgPSBfYS5wcm9qZWN0SWQ7XHJcbiAgICByZXR1cm4gSU5TVEFMTEFUSU9OU19BUElfVVJMICsgXCIvcHJvamVjdHMvXCIgKyBwcm9qZWN0SWQgKyBcIi9pbnN0YWxsYXRpb25zXCI7XHJcbn1cclxuZnVuY3Rpb24gZXh0cmFjdEF1dGhUb2tlbkluZm9Gcm9tUmVzcG9uc2UocmVzcG9uc2UpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgdG9rZW46IHJlc3BvbnNlLnRva2VuLFxyXG4gICAgICAgIHJlcXVlc3RTdGF0dXM6IDIgLyogQ09NUExFVEVEICovLFxyXG4gICAgICAgIGV4cGlyZXNJbjogZ2V0RXhwaXJlc0luRnJvbVJlc3BvbnNlRXhwaXJlc0luKHJlc3BvbnNlLmV4cGlyZXNJbiksXHJcbiAgICAgICAgY3JlYXRpb25UaW1lOiBEYXRlLm5vdygpXHJcbiAgICB9O1xyXG59XHJcbmZ1bmN0aW9uIGdldEVycm9yRnJvbVJlc3BvbnNlKHJlcXVlc3ROYW1lLCByZXNwb25zZSkge1xyXG4gICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciByZXNwb25zZUpzb24sIGVycm9yRGF0YTtcclxuICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMDogcmV0dXJuIFs0IC8qeWllbGQqLywgcmVzcG9uc2UuanNvbigpXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICByZXNwb25zZUpzb24gPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgZXJyb3JEYXRhID0gcmVzcG9uc2VKc29uLmVycm9yO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcInJlcXVlc3QtZmFpbGVkXCIgLyogUkVRVUVTVF9GQUlMRUQgKi8sIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3ROYW1lOiByZXF1ZXN0TmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlcnZlckNvZGU6IGVycm9yRGF0YS5jb2RlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VydmVyTWVzc2FnZTogZXJyb3JEYXRhLm1lc3NhZ2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXJ2ZXJTdGF0dXM6IGVycm9yRGF0YS5zdGF0dXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSldO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufVxyXG5mdW5jdGlvbiBnZXRIZWFkZXJzKF9hKSB7XHJcbiAgICB2YXIgYXBpS2V5ID0gX2EuYXBpS2V5O1xyXG4gICAgcmV0dXJuIG5ldyBIZWFkZXJzKHtcclxuICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICAgIEFjY2VwdDogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICAgICd4LWdvb2ctYXBpLWtleSc6IGFwaUtleVxyXG4gICAgfSk7XHJcbn1cclxuZnVuY3Rpb24gZ2V0SGVhZGVyc1dpdGhBdXRoKGFwcENvbmZpZywgX2EpIHtcclxuICAgIHZhciByZWZyZXNoVG9rZW4gPSBfYS5yZWZyZXNoVG9rZW47XHJcbiAgICB2YXIgaGVhZGVycyA9IGdldEhlYWRlcnMoYXBwQ29uZmlnKTtcclxuICAgIGhlYWRlcnMuYXBwZW5kKCdBdXRob3JpemF0aW9uJywgZ2V0QXV0aG9yaXphdGlvbkhlYWRlcihyZWZyZXNoVG9rZW4pKTtcclxuICAgIHJldHVybiBoZWFkZXJzO1xyXG59XHJcbi8qKlxyXG4gKiBDYWxscyB0aGUgcGFzc2VkIGluIGZldGNoIHdyYXBwZXIgYW5kIHJldHVybnMgdGhlIHJlc3BvbnNlLlxyXG4gKiBJZiB0aGUgcmV0dXJuZWQgcmVzcG9uc2UgaGFzIGEgc3RhdHVzIG9mIDV4eCwgcmUtcnVucyB0aGUgZnVuY3Rpb24gb25jZSBhbmRcclxuICogcmV0dXJucyB0aGUgcmVzcG9uc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiByZXRyeUlmU2VydmVyRXJyb3IoZm4pIHtcclxuICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgcmVzdWx0O1xyXG4gICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAwOiByZXR1cm4gWzQgLyp5aWVsZCovLCBmbigpXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5zdGF0dXMgPj0gNTAwICYmIHJlc3VsdC5zdGF0dXMgPCA2MDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSW50ZXJuYWwgU2VydmVyIEVycm9yLiBSZXRyeSByZXF1ZXN0LlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgZm4oKV07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCByZXN1bHRdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufVxyXG5mdW5jdGlvbiBnZXRFeHBpcmVzSW5Gcm9tUmVzcG9uc2VFeHBpcmVzSW4ocmVzcG9uc2VFeHBpcmVzSW4pIHtcclxuICAgIC8vIFRoaXMgd29ya3MgYmVjYXVzZSB0aGUgc2VydmVyIHdpbGwgbmV2ZXIgcmVzcG9uZCB3aXRoIGZyYWN0aW9ucyBvZiBhIHNlY29uZC5cclxuICAgIHJldHVybiBOdW1iZXIocmVzcG9uc2VFeHBpcmVzSW4ucmVwbGFjZSgncycsICcwMDAnKSk7XHJcbn1cclxuZnVuY3Rpb24gZ2V0QXV0aG9yaXphdGlvbkhlYWRlcihyZWZyZXNoVG9rZW4pIHtcclxuICAgIHJldHVybiBJTlRFUk5BTF9BVVRIX1ZFUlNJT04gKyBcIiBcIiArIHJlZnJlc2hUb2tlbjtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gY3JlYXRlSW5zdGFsbGF0aW9uUmVxdWVzdChhcHBDb25maWcsIF9hKSB7XHJcbiAgICB2YXIgZmlkID0gX2EuZmlkO1xyXG4gICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBlbmRwb2ludCwgaGVhZGVycywgYm9keSwgcmVxdWVzdCwgcmVzcG9uc2UsIHJlc3BvbnNlVmFsdWUsIHJlZ2lzdGVyZWRJbnN0YWxsYXRpb25FbnRyeTtcclxuICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9iKSB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAoX2IubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICBlbmRwb2ludCA9IGdldEluc3RhbGxhdGlvbnNFbmRwb2ludChhcHBDb25maWcpO1xyXG4gICAgICAgICAgICAgICAgICAgIGhlYWRlcnMgPSBnZXRIZWFkZXJzKGFwcENvbmZpZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgYm9keSA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmlkOiBmaWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF1dGhWZXJzaW9uOiBJTlRFUk5BTF9BVVRIX1ZFUlNJT04sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFwcElkOiBhcHBDb25maWcuYXBwSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNka1ZlcnNpb246IFBBQ0tBR0VfVkVSU0lPTlxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgcmVxdWVzdCA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGJvZHkpXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCByZXRyeUlmU2VydmVyRXJyb3IoZnVuY3Rpb24gKCkgeyByZXR1cm4gZmV0Y2goZW5kcG9pbnQsIHJlcXVlc3QpOyB9KV07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBfYi5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFyZXNwb25zZS5vaykgcmV0dXJuIFszIC8qYnJlYWsqLywgM107XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgcmVzcG9uc2UuanNvbigpXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICByZXNwb25zZVZhbHVlID0gX2Iuc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlZ2lzdGVyZWRJbnN0YWxsYXRpb25FbnRyeSA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmlkOiByZXNwb25zZVZhbHVlLmZpZCB8fCBmaWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZ2lzdHJhdGlvblN0YXR1czogMiAvKiBDT01QTEVURUQgKi8sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZnJlc2hUb2tlbjogcmVzcG9uc2VWYWx1ZS5yZWZyZXNoVG9rZW4sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF1dGhUb2tlbjogZXh0cmFjdEF1dGhUb2tlbkluZm9Gcm9tUmVzcG9uc2UocmVzcG9uc2VWYWx1ZS5hdXRoVG9rZW4pXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgcmVnaXN0ZXJlZEluc3RhbGxhdGlvbkVudHJ5XTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMzogcmV0dXJuIFs0IC8qeWllbGQqLywgZ2V0RXJyb3JGcm9tUmVzcG9uc2UoJ0NyZWF0ZSBJbnN0YWxsYXRpb24nLCByZXNwb25zZSldO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA0OiB0aHJvdyBfYi5zZW50KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKiogUmV0dXJucyBhIHByb21pc2UgdGhhdCByZXNvbHZlcyBhZnRlciBnaXZlbiB0aW1lIHBhc3Nlcy4gKi9cclxuZnVuY3Rpb24gc2xlZXAobXMpIHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xyXG4gICAgICAgIHNldFRpbWVvdXQocmVzb2x2ZSwgbXMpO1xyXG4gICAgfSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIGJ1ZmZlclRvQmFzZTY0VXJsU2FmZShhcnJheSkge1xyXG4gICAgdmFyIGI2NCA9IGJ0b2EoU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShTdHJpbmcsIF9fc3ByZWFkKGFycmF5KSkpO1xyXG4gICAgcmV0dXJuIGI2NC5yZXBsYWNlKC9cXCsvZywgJy0nKS5yZXBsYWNlKC9cXC8vZywgJ18nKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxudmFyIFZBTElEX0ZJRF9QQVRURVJOID0gL15bY2RlZl1bXFx3LV17MjF9JC87XHJcbnZhciBJTlZBTElEX0ZJRCA9ICcnO1xyXG4vKipcclxuICogR2VuZXJhdGVzIGEgbmV3IEZJRCB1c2luZyByYW5kb20gdmFsdWVzIGZyb20gV2ViIENyeXB0byBBUEkuXHJcbiAqIFJldHVybnMgYW4gZW1wdHkgc3RyaW5nIGlmIEZJRCBnZW5lcmF0aW9uIGZhaWxzIGZvciBhbnkgcmVhc29uLlxyXG4gKi9cclxuZnVuY3Rpb24gZ2VuZXJhdGVGaWQoKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIC8vIEEgdmFsaWQgRklEIGhhcyBleGFjdGx5IDIyIGJhc2U2NCBjaGFyYWN0ZXJzLCB3aGljaCBpcyAxMzIgYml0cywgb3IgMTYuNVxyXG4gICAgICAgIC8vIGJ5dGVzLiBvdXIgaW1wbGVtZW50YXRpb24gZ2VuZXJhdGVzIGEgMTcgYnl0ZSBhcnJheSBpbnN0ZWFkLlxyXG4gICAgICAgIHZhciBmaWRCeXRlQXJyYXkgPSBuZXcgVWludDhBcnJheSgxNyk7XHJcbiAgICAgICAgdmFyIGNyeXB0b18xID0gc2VsZi5jcnlwdG8gfHwgc2VsZi5tc0NyeXB0bztcclxuICAgICAgICBjcnlwdG9fMS5nZXRSYW5kb21WYWx1ZXMoZmlkQnl0ZUFycmF5KTtcclxuICAgICAgICAvLyBSZXBsYWNlIHRoZSBmaXJzdCA0IHJhbmRvbSBiaXRzIHdpdGggdGhlIGNvbnN0YW50IEZJRCBoZWFkZXIgb2YgMGIwMTExLlxyXG4gICAgICAgIGZpZEJ5dGVBcnJheVswXSA9IDExMiArIChmaWRCeXRlQXJyYXlbMF0gJSAxNik7XHJcbiAgICAgICAgdmFyIGZpZCA9IGVuY29kZShmaWRCeXRlQXJyYXkpO1xyXG4gICAgICAgIHJldHVybiBWQUxJRF9GSURfUEFUVEVSTi50ZXN0KGZpZCkgPyBmaWQgOiBJTlZBTElEX0ZJRDtcclxuICAgIH1cclxuICAgIGNhdGNoIChfYSkge1xyXG4gICAgICAgIC8vIEZJRCBnZW5lcmF0aW9uIGVycm9yZWRcclxuICAgICAgICByZXR1cm4gSU5WQUxJRF9GSUQ7XHJcbiAgICB9XHJcbn1cclxuLyoqIENvbnZlcnRzIGEgRklEIFVpbnQ4QXJyYXkgdG8gYSBiYXNlNjQgc3RyaW5nIHJlcHJlc2VudGF0aW9uLiAqL1xyXG5mdW5jdGlvbiBlbmNvZGUoZmlkQnl0ZUFycmF5KSB7XHJcbiAgICB2YXIgYjY0U3RyaW5nID0gYnVmZmVyVG9CYXNlNjRVcmxTYWZlKGZpZEJ5dGVBcnJheSk7XHJcbiAgICAvLyBSZW1vdmUgdGhlIDIzcmQgY2hhcmFjdGVyIHRoYXQgd2FzIGFkZGVkIGJlY2F1c2Ugb2YgdGhlIGV4dHJhIDQgYml0cyBhdCB0aGVcclxuICAgIC8vIGVuZCBvZiBvdXIgMTcgYnl0ZSBhcnJheSwgYW5kIHRoZSAnPScgcGFkZGluZy5cclxuICAgIHJldHVybiBiNjRTdHJpbmcuc3Vic3RyKDAsIDIyKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxudmFyIERBVEFCQVNFX05BTUUgPSAnZmlyZWJhc2UtaW5zdGFsbGF0aW9ucy1kYXRhYmFzZSc7XHJcbnZhciBEQVRBQkFTRV9WRVJTSU9OID0gMTtcclxudmFyIE9CSkVDVF9TVE9SRV9OQU1FID0gJ2ZpcmViYXNlLWluc3RhbGxhdGlvbnMtc3RvcmUnO1xyXG52YXIgZGJQcm9taXNlID0gbnVsbDtcclxuZnVuY3Rpb24gZ2V0RGJQcm9taXNlKCkge1xyXG4gICAgaWYgKCFkYlByb21pc2UpIHtcclxuICAgICAgICBkYlByb21pc2UgPSBvcGVuRGIoREFUQUJBU0VfTkFNRSwgREFUQUJBU0VfVkVSU0lPTiwgZnVuY3Rpb24gKHVwZ3JhZGVEQikge1xyXG4gICAgICAgICAgICAvLyBXZSBkb24ndCB1c2UgJ2JyZWFrJyBpbiB0aGlzIHN3aXRjaCBzdGF0ZW1lbnQsIHRoZSBmYWxsLXRocm91Z2hcclxuICAgICAgICAgICAgLy8gYmVoYXZpb3IgaXMgd2hhdCB3ZSB3YW50LCBiZWNhdXNlIGlmIHRoZXJlIGFyZSBtdWx0aXBsZSB2ZXJzaW9ucyBiZXR3ZWVuXHJcbiAgICAgICAgICAgIC8vIHRoZSBvbGQgdmVyc2lvbiBhbmQgdGhlIGN1cnJlbnQgdmVyc2lvbiwgd2Ugd2FudCBBTEwgdGhlIG1pZ3JhdGlvbnNcclxuICAgICAgICAgICAgLy8gdGhhdCBjb3JyZXNwb25kIHRvIHRob3NlIHZlcnNpb25zIHRvIHJ1biwgbm90IG9ubHkgdGhlIGxhc3Qgb25lLlxyXG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZGVmYXVsdC1jYXNlXHJcbiAgICAgICAgICAgIHN3aXRjaCAodXBncmFkZURCLm9sZFZlcnNpb24pIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICB1cGdyYWRlREIuY3JlYXRlT2JqZWN0U3RvcmUoT0JKRUNUX1NUT1JFX05BTUUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZGJQcm9taXNlO1xyXG59XHJcbi8qKiBBc3NpZ25zIG9yIG92ZXJ3cml0ZXMgdGhlIHJlY29yZCBmb3IgdGhlIGdpdmVuIGtleSB3aXRoIHRoZSBnaXZlbiB2YWx1ZS4gKi9cclxuZnVuY3Rpb24gc2V0KGFwcENvbmZpZywgdmFsdWUpIHtcclxuICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIga2V5LCBkYiwgdHg7XHJcbiAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAga2V5ID0gZ2V0S2V5KGFwcENvbmZpZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgZ2V0RGJQcm9taXNlKCldO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgIGRiID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHR4ID0gZGIudHJhbnNhY3Rpb24oT0JKRUNUX1NUT1JFX05BTUUsICdyZWFkd3JpdGUnKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0eC5vYmplY3RTdG9yZShPQkpFQ1RfU1RPUkVfTkFNRSkucHV0KHZhbHVlLCBrZXkpXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdHguY29tcGxldGVdO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdmFsdWVdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufVxyXG4vKiogUmVtb3ZlcyByZWNvcmQocykgZnJvbSB0aGUgb2JqZWN0U3RvcmUgdGhhdCBtYXRjaCB0aGUgZ2l2ZW4ga2V5LiAqL1xyXG5mdW5jdGlvbiByZW1vdmUoYXBwQ29uZmlnKSB7XHJcbiAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGtleSwgZGIsIHR4O1xyXG4gICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgIGtleSA9IGdldEtleShhcHBDb25maWcpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIGdldERiUHJvbWlzZSgpXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICBkYiA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICB0eCA9IGRiLnRyYW5zYWN0aW9uKE9CSkVDVF9TVE9SRV9OQU1FLCAncmVhZHdyaXRlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdHgub2JqZWN0U3RvcmUoT0JKRUNUX1NUT1JFX05BTUUpLmRlbGV0ZShrZXkpXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdHguY29tcGxldGVdO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59XHJcbi8qKlxyXG4gKiBBdG9taWNhbGx5IHVwZGF0ZXMgYSByZWNvcmQgd2l0aCB0aGUgcmVzdWx0IG9mIHVwZGF0ZUZuLCB3aGljaCBnZXRzXHJcbiAqIGNhbGxlZCB3aXRoIHRoZSBjdXJyZW50IHZhbHVlLiBJZiBuZXdWYWx1ZSBpcyB1bmRlZmluZWQsIHRoZSByZWNvcmQgaXNcclxuICogZGVsZXRlZCBpbnN0ZWFkLlxyXG4gKiBAcmV0dXJuIFVwZGF0ZWQgdmFsdWVcclxuICovXHJcbmZ1bmN0aW9uIHVwZGF0ZShhcHBDb25maWcsIHVwZGF0ZUZuKSB7XHJcbiAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGtleSwgZGIsIHR4LCBzdG9yZSwgb2xkVmFsdWUsIG5ld1ZhbHVlO1xyXG4gICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgIGtleSA9IGdldEtleShhcHBDb25maWcpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIGdldERiUHJvbWlzZSgpXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICBkYiA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICB0eCA9IGRiLnRyYW5zYWN0aW9uKE9CSkVDVF9TVE9SRV9OQU1FLCAncmVhZHdyaXRlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgc3RvcmUgPSB0eC5vYmplY3RTdG9yZShPQkpFQ1RfU1RPUkVfTkFNRSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgc3RvcmUuZ2V0KGtleSldO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgIG9sZFZhbHVlID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIG5ld1ZhbHVlID0gdXBkYXRlRm4ob2xkVmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghKG5ld1ZhbHVlID09PSB1bmRlZmluZWQpKSByZXR1cm4gWzMgLypicmVhayovLCA0XTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBzdG9yZS5kZWxldGUoa2V5KV07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDZdO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA0OiByZXR1cm4gWzQgLyp5aWVsZCovLCBzdG9yZS5wdXQobmV3VmFsdWUsIGtleSldO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA1OlxyXG4gICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDY7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDY6IHJldHVybiBbNCAvKnlpZWxkKi8sIHR4LmNvbXBsZXRlXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNzpcclxuICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIG5ld1ZhbHVlXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn1cclxuZnVuY3Rpb24gZ2V0S2V5KGFwcENvbmZpZykge1xyXG4gICAgcmV0dXJuIGFwcENvbmZpZy5hcHBOYW1lICsgXCIhXCIgKyBhcHBDb25maWcuYXBwSWQ7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBVcGRhdGVzIGFuZCByZXR1cm5zIHRoZSBJbnN0YWxsYXRpb25FbnRyeSBmcm9tIHRoZSBkYXRhYmFzZS5cclxuICogQWxzbyB0cmlnZ2VycyBhIHJlZ2lzdHJhdGlvbiByZXF1ZXN0IGlmIGl0IGlzIG5lY2Vzc2FyeSBhbmQgcG9zc2libGUuXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRJbnN0YWxsYXRpb25FbnRyeShhcHBDb25maWcpIHtcclxuICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgcmVnaXN0cmF0aW9uUHJvbWlzZSwgaW5zdGFsbGF0aW9uRW50cnksIF9hO1xyXG4gICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2IpIHtcclxuICAgICAgICAgICAgc3dpdGNoIChfYi5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAwOiByZXR1cm4gWzQgLyp5aWVsZCovLCB1cGRhdGUoYXBwQ29uZmlnLCBmdW5jdGlvbiAob2xkRW50cnkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGluc3RhbGxhdGlvbkVudHJ5ID0gdXBkYXRlT3JDcmVhdGVJbnN0YWxsYXRpb25FbnRyeShvbGRFbnRyeSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlbnRyeVdpdGhQcm9taXNlID0gdHJpZ2dlclJlZ2lzdHJhdGlvbklmTmVjZXNzYXJ5KGFwcENvbmZpZywgaW5zdGFsbGF0aW9uRW50cnkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWdpc3RyYXRpb25Qcm9taXNlID0gZW50cnlXaXRoUHJvbWlzZS5yZWdpc3RyYXRpb25Qcm9taXNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZW50cnlXaXRoUHJvbWlzZS5pbnN0YWxsYXRpb25FbnRyeTtcclxuICAgICAgICAgICAgICAgICAgICB9KV07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgaW5zdGFsbGF0aW9uRW50cnkgPSBfYi5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEoaW5zdGFsbGF0aW9uRW50cnkuZmlkID09PSBJTlZBTElEX0ZJRCkpIHJldHVybiBbMyAvKmJyZWFrKi8sIDNdO1xyXG4gICAgICAgICAgICAgICAgICAgIF9hID0ge307XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgcmVnaXN0cmF0aW9uUHJvbWlzZV07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDI6IFxyXG4gICAgICAgICAgICAgICAgLy8gRklEIGdlbmVyYXRpb24gZmFpbGVkLiBXYWl0aW5nIGZvciB0aGUgRklEIGZyb20gdGhlIHNlcnZlci5cclxuICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCAoX2EuaW5zdGFsbGF0aW9uRW50cnkgPSBfYi5zZW50KCksIF9hKV07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDM6IHJldHVybiBbMiAvKnJldHVybiovLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGluc3RhbGxhdGlvbkVudHJ5OiBpbnN0YWxsYXRpb25FbnRyeSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVnaXN0cmF0aW9uUHJvbWlzZTogcmVnaXN0cmF0aW9uUHJvbWlzZVxyXG4gICAgICAgICAgICAgICAgICAgIH1dO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufVxyXG4vKipcclxuICogQ3JlYXRlcyBhIG5ldyBJbnN0YWxsYXRpb24gRW50cnkgaWYgb25lIGRvZXMgbm90IGV4aXN0LlxyXG4gKiBBbHNvIGNsZWFycyB0aW1lZCBvdXQgcGVuZGluZyByZXF1ZXN0cy5cclxuICovXHJcbmZ1bmN0aW9uIHVwZGF0ZU9yQ3JlYXRlSW5zdGFsbGF0aW9uRW50cnkob2xkRW50cnkpIHtcclxuICAgIHZhciBlbnRyeSA9IG9sZEVudHJ5IHx8IHtcclxuICAgICAgICBmaWQ6IGdlbmVyYXRlRmlkKCksXHJcbiAgICAgICAgcmVnaXN0cmF0aW9uU3RhdHVzOiAwIC8qIE5PVF9TVEFSVEVEICovXHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIGNsZWFyVGltZWRPdXRSZXF1ZXN0KGVudHJ5KTtcclxufVxyXG4vKipcclxuICogSWYgdGhlIEZpcmViYXNlIEluc3RhbGxhdGlvbiBpcyBub3QgcmVnaXN0ZXJlZCB5ZXQsIHRoaXMgd2lsbCB0cmlnZ2VyIHRoZVxyXG4gKiByZWdpc3RyYXRpb24gYW5kIHJldHVybiBhbiBJblByb2dyZXNzSW5zdGFsbGF0aW9uRW50cnkuXHJcbiAqXHJcbiAqIElmIHJlZ2lzdHJhdGlvblByb21pc2UgZG9lcyBub3QgZXhpc3QsIHRoZSBpbnN0YWxsYXRpb25FbnRyeSBpcyBndWFyYW50ZWVkXHJcbiAqIHRvIGJlIHJlZ2lzdGVyZWQuXHJcbiAqL1xyXG5mdW5jdGlvbiB0cmlnZ2VyUmVnaXN0cmF0aW9uSWZOZWNlc3NhcnkoYXBwQ29uZmlnLCBpbnN0YWxsYXRpb25FbnRyeSkge1xyXG4gICAgaWYgKGluc3RhbGxhdGlvbkVudHJ5LnJlZ2lzdHJhdGlvblN0YXR1cyA9PT0gMCAvKiBOT1RfU1RBUlRFRCAqLykge1xyXG4gICAgICAgIGlmICghbmF2aWdhdG9yLm9uTGluZSkge1xyXG4gICAgICAgICAgICAvLyBSZWdpc3RyYXRpb24gcmVxdWlyZWQgYnV0IGFwcCBpcyBvZmZsaW5lLlxyXG4gICAgICAgICAgICB2YXIgcmVnaXN0cmF0aW9uUHJvbWlzZVdpdGhFcnJvciA9IFByb21pc2UucmVqZWN0KEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiYXBwLW9mZmxpbmVcIiAvKiBBUFBfT0ZGTElORSAqLykpO1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgaW5zdGFsbGF0aW9uRW50cnk6IGluc3RhbGxhdGlvbkVudHJ5LFxyXG4gICAgICAgICAgICAgICAgcmVnaXN0cmF0aW9uUHJvbWlzZTogcmVnaXN0cmF0aW9uUHJvbWlzZVdpdGhFcnJvclxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBUcnkgcmVnaXN0ZXJpbmcuIENoYW5nZSBzdGF0dXMgdG8gSU5fUFJPR1JFU1MuXHJcbiAgICAgICAgdmFyIGluUHJvZ3Jlc3NFbnRyeSA9IHtcclxuICAgICAgICAgICAgZmlkOiBpbnN0YWxsYXRpb25FbnRyeS5maWQsXHJcbiAgICAgICAgICAgIHJlZ2lzdHJhdGlvblN0YXR1czogMSAvKiBJTl9QUk9HUkVTUyAqLyxcclxuICAgICAgICAgICAgcmVnaXN0cmF0aW9uVGltZTogRGF0ZS5ub3coKVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdmFyIHJlZ2lzdHJhdGlvblByb21pc2UgPSByZWdpc3Rlckluc3RhbGxhdGlvbihhcHBDb25maWcsIGluUHJvZ3Jlc3NFbnRyeSk7XHJcbiAgICAgICAgcmV0dXJuIHsgaW5zdGFsbGF0aW9uRW50cnk6IGluUHJvZ3Jlc3NFbnRyeSwgcmVnaXN0cmF0aW9uUHJvbWlzZTogcmVnaXN0cmF0aW9uUHJvbWlzZSB9O1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoaW5zdGFsbGF0aW9uRW50cnkucmVnaXN0cmF0aW9uU3RhdHVzID09PSAxIC8qIElOX1BST0dSRVNTICovKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgaW5zdGFsbGF0aW9uRW50cnk6IGluc3RhbGxhdGlvbkVudHJ5LFxyXG4gICAgICAgICAgICByZWdpc3RyYXRpb25Qcm9taXNlOiB3YWl0VW50aWxGaWRSZWdpc3RyYXRpb24oYXBwQ29uZmlnKVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICByZXR1cm4geyBpbnN0YWxsYXRpb25FbnRyeTogaW5zdGFsbGF0aW9uRW50cnkgfTtcclxuICAgIH1cclxufVxyXG4vKiogVGhpcyB3aWxsIGJlIGV4ZWN1dGVkIG9ubHkgb25jZSBmb3IgZWFjaCBuZXcgRmlyZWJhc2UgSW5zdGFsbGF0aW9uLiAqL1xyXG5mdW5jdGlvbiByZWdpc3Rlckluc3RhbGxhdGlvbihhcHBDb25maWcsIGluc3RhbGxhdGlvbkVudHJ5KSB7XHJcbiAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHJlZ2lzdGVyZWRJbnN0YWxsYXRpb25FbnRyeSwgZV8xO1xyXG4gICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgIF9hLnRyeXMucHVzaChbMCwgMiwgLCA3XSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgY3JlYXRlSW5zdGFsbGF0aW9uUmVxdWVzdChhcHBDb25maWcsIGluc3RhbGxhdGlvbkVudHJ5KV07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgcmVnaXN0ZXJlZEluc3RhbGxhdGlvbkVudHJ5ID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBzZXQoYXBwQ29uZmlnLCByZWdpc3RlcmVkSW5zdGFsbGF0aW9uRW50cnkpXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICBlXzEgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEoaXNTZXJ2ZXJFcnJvcihlXzEpICYmIGVfMS5zZXJ2ZXJDb2RlID09PSA0MDkpKSByZXR1cm4gWzMgLypicmVhayovLCA0XTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBTZXJ2ZXIgcmV0dXJuZWQgYSBcIkZJRCBjYW4gbm90IGJlIHVzZWRcIiBlcnJvci5cclxuICAgICAgICAgICAgICAgICAgICAvLyBHZW5lcmF0ZSBhIG5ldyBJRCBuZXh0IHRpbWUuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgcmVtb3ZlKGFwcENvbmZpZyldO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFNlcnZlciByZXR1cm5lZCBhIFwiRklEIGNhbiBub3QgYmUgdXNlZFwiIGVycm9yLlxyXG4gICAgICAgICAgICAgICAgICAgIC8vIEdlbmVyYXRlIGEgbmV3IElEIG5leHQgdGltZS5cclxuICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgNl07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDQ6IFxyXG4gICAgICAgICAgICAgICAgLy8gUmVnaXN0cmF0aW9uIGZhaWxlZC4gU2V0IEZJRCBhcyBub3QgcmVnaXN0ZXJlZC5cclxuICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHNldChhcHBDb25maWcsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmlkOiBpbnN0YWxsYXRpb25FbnRyeS5maWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZ2lzdHJhdGlvblN0YXR1czogMCAvKiBOT1RfU1RBUlRFRCAqL1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNTpcclxuICAgICAgICAgICAgICAgICAgICAvLyBSZWdpc3RyYXRpb24gZmFpbGVkLiBTZXQgRklEIGFzIG5vdCByZWdpc3RlcmVkLlxyXG4gICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDY7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDY6IHRocm93IGVfMTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNzogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufVxyXG4vKiogQ2FsbCBpZiBGSUQgcmVnaXN0cmF0aW9uIGlzIHBlbmRpbmcgaW4gYW5vdGhlciByZXF1ZXN0LiAqL1xyXG5mdW5jdGlvbiB3YWl0VW50aWxGaWRSZWdpc3RyYXRpb24oYXBwQ29uZmlnKSB7XHJcbiAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGVudHJ5LCBfYSwgaW5zdGFsbGF0aW9uRW50cnksIHJlZ2lzdHJhdGlvblByb21pc2U7XHJcbiAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYikge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKF9iLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6IHJldHVybiBbNCAvKnlpZWxkKi8sIHVwZGF0ZUluc3RhbGxhdGlvblJlcXVlc3QoYXBwQ29uZmlnKV07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgZW50cnkgPSBfYi5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgX2IubGFiZWwgPSAyO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghKGVudHJ5LnJlZ2lzdHJhdGlvblN0YXR1cyA9PT0gMSAvKiBJTl9QUk9HUkVTUyAqLykpIHJldHVybiBbMyAvKmJyZWFrKi8sIDVdO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGNyZWF0ZUluc3RhbGxhdGlvbiByZXF1ZXN0IHN0aWxsIGluIHByb2dyZXNzLlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHNsZWVwKDEwMCldO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGNyZWF0ZUluc3RhbGxhdGlvbiByZXF1ZXN0IHN0aWxsIGluIHByb2dyZXNzLlxyXG4gICAgICAgICAgICAgICAgICAgIF9iLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB1cGRhdGVJbnN0YWxsYXRpb25SZXF1ZXN0KGFwcENvbmZpZyldO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA0OlxyXG4gICAgICAgICAgICAgICAgICAgIGVudHJ5ID0gX2Iuc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDJdO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA1OlxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghKGVudHJ5LnJlZ2lzdHJhdGlvblN0YXR1cyA9PT0gMCAvKiBOT1RfU1RBUlRFRCAqLykpIHJldHVybiBbMyAvKmJyZWFrKi8sIDddO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIGdldEluc3RhbGxhdGlvbkVudHJ5KGFwcENvbmZpZyldO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA2OlxyXG4gICAgICAgICAgICAgICAgICAgIF9hID0gX2Iuc2VudCgpLCBpbnN0YWxsYXRpb25FbnRyeSA9IF9hLmluc3RhbGxhdGlvbkVudHJ5LCByZWdpc3RyYXRpb25Qcm9taXNlID0gX2EucmVnaXN0cmF0aW9uUHJvbWlzZTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocmVnaXN0cmF0aW9uUHJvbWlzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgcmVnaXN0cmF0aW9uUHJvbWlzZV07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiB0aGVyZSBpcyBubyByZWdpc3RyYXRpb25Qcm9taXNlLCBlbnRyeSBpcyByZWdpc3RlcmVkLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgaW5zdGFsbGF0aW9uRW50cnldO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhc2UgNzogcmV0dXJuIFsyIC8qcmV0dXJuKi8sIGVudHJ5XTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn1cclxuLyoqXHJcbiAqIENhbGxlZCBvbmx5IGlmIHRoZXJlIGlzIGEgQ3JlYXRlSW5zdGFsbGF0aW9uIHJlcXVlc3QgaW4gcHJvZ3Jlc3MuXHJcbiAqXHJcbiAqIFVwZGF0ZXMgdGhlIEluc3RhbGxhdGlvbkVudHJ5IGluIHRoZSBEQiBiYXNlZCBvbiB0aGUgc3RhdHVzIG9mIHRoZVxyXG4gKiBDcmVhdGVJbnN0YWxsYXRpb24gcmVxdWVzdC5cclxuICpcclxuICogUmV0dXJucyB0aGUgdXBkYXRlZCBJbnN0YWxsYXRpb25FbnRyeS5cclxuICovXHJcbmZ1bmN0aW9uIHVwZGF0ZUluc3RhbGxhdGlvblJlcXVlc3QoYXBwQ29uZmlnKSB7XHJcbiAgICByZXR1cm4gdXBkYXRlKGFwcENvbmZpZywgZnVuY3Rpb24gKG9sZEVudHJ5KSB7XHJcbiAgICAgICAgaWYgKCFvbGRFbnRyeSkge1xyXG4gICAgICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImluc3RhbGxhdGlvbi1ub3QtZm91bmRcIiAvKiBJTlNUQUxMQVRJT05fTk9UX0ZPVU5EICovKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGNsZWFyVGltZWRPdXRSZXF1ZXN0KG9sZEVudHJ5KTtcclxuICAgIH0pO1xyXG59XHJcbmZ1bmN0aW9uIGNsZWFyVGltZWRPdXRSZXF1ZXN0KGVudHJ5KSB7XHJcbiAgICBpZiAoaGFzSW5zdGFsbGF0aW9uUmVxdWVzdFRpbWVkT3V0KGVudHJ5KSkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGZpZDogZW50cnkuZmlkLFxyXG4gICAgICAgICAgICByZWdpc3RyYXRpb25TdGF0dXM6IDAgLyogTk9UX1NUQVJURUQgKi9cclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGVudHJ5O1xyXG59XHJcbmZ1bmN0aW9uIGhhc0luc3RhbGxhdGlvblJlcXVlc3RUaW1lZE91dChpbnN0YWxsYXRpb25FbnRyeSkge1xyXG4gICAgcmV0dXJuIChpbnN0YWxsYXRpb25FbnRyeS5yZWdpc3RyYXRpb25TdGF0dXMgPT09IDEgLyogSU5fUFJPR1JFU1MgKi8gJiZcclxuICAgICAgICBpbnN0YWxsYXRpb25FbnRyeS5yZWdpc3RyYXRpb25UaW1lICsgUEVORElOR19USU1FT1VUX01TIDwgRGF0ZS5ub3coKSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIGdlbmVyYXRlQXV0aFRva2VuUmVxdWVzdChfYSwgaW5zdGFsbGF0aW9uRW50cnkpIHtcclxuICAgIHZhciBhcHBDb25maWcgPSBfYS5hcHBDb25maWcsIHBsYXRmb3JtTG9nZ2VyUHJvdmlkZXIgPSBfYS5wbGF0Zm9ybUxvZ2dlclByb3ZpZGVyO1xyXG4gICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBlbmRwb2ludCwgaGVhZGVycywgcGxhdGZvcm1Mb2dnZXIsIGJvZHksIHJlcXVlc3QsIHJlc3BvbnNlLCByZXNwb25zZVZhbHVlLCBjb21wbGV0ZWRBdXRoVG9rZW47XHJcbiAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYikge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKF9iLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgZW5kcG9pbnQgPSBnZXRHZW5lcmF0ZUF1dGhUb2tlbkVuZHBvaW50KGFwcENvbmZpZywgaW5zdGFsbGF0aW9uRW50cnkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGhlYWRlcnMgPSBnZXRIZWFkZXJzV2l0aEF1dGgoYXBwQ29uZmlnLCBpbnN0YWxsYXRpb25FbnRyeSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcGxhdGZvcm1Mb2dnZXIgPSBwbGF0Zm9ybUxvZ2dlclByb3ZpZGVyLmdldEltbWVkaWF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbmFsOiB0cnVlXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBsYXRmb3JtTG9nZ2VyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnMuYXBwZW5kKCd4LWZpcmViYXNlLWNsaWVudCcsIHBsYXRmb3JtTG9nZ2VyLmdldFBsYXRmb3JtSW5mb1N0cmluZygpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYm9keSA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5zdGFsbGF0aW9uOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZGtWZXJzaW9uOiBQQUNLQUdFX1ZFUlNJT05cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgcmVxdWVzdCA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGJvZHkpXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCByZXRyeUlmU2VydmVyRXJyb3IoZnVuY3Rpb24gKCkgeyByZXR1cm4gZmV0Y2goZW5kcG9pbnQsIHJlcXVlc3QpOyB9KV07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBfYi5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFyZXNwb25zZS5vaykgcmV0dXJuIFszIC8qYnJlYWsqLywgM107XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgcmVzcG9uc2UuanNvbigpXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICByZXNwb25zZVZhbHVlID0gX2Iuc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbXBsZXRlZEF1dGhUb2tlbiA9IGV4dHJhY3RBdXRoVG9rZW5JbmZvRnJvbVJlc3BvbnNlKHJlc3BvbnNlVmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBjb21wbGV0ZWRBdXRoVG9rZW5dO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAzOiByZXR1cm4gWzQgLyp5aWVsZCovLCBnZXRFcnJvckZyb21SZXNwb25zZSgnR2VuZXJhdGUgQXV0aCBUb2tlbicsIHJlc3BvbnNlKV07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDQ6IHRocm93IF9iLnNlbnQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn1cclxuZnVuY3Rpb24gZ2V0R2VuZXJhdGVBdXRoVG9rZW5FbmRwb2ludChhcHBDb25maWcsIF9hKSB7XHJcbiAgICB2YXIgZmlkID0gX2EuZmlkO1xyXG4gICAgcmV0dXJuIGdldEluc3RhbGxhdGlvbnNFbmRwb2ludChhcHBDb25maWcpICsgXCIvXCIgKyBmaWQgKyBcIi9hdXRoVG9rZW5zOmdlbmVyYXRlXCI7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBSZXR1cm5zIGEgdmFsaWQgYXV0aGVudGljYXRpb24gdG9rZW4gZm9yIHRoZSBpbnN0YWxsYXRpb24uIEdlbmVyYXRlcyBhIG5ld1xyXG4gKiB0b2tlbiBpZiBvbmUgZG9lc24ndCBleGlzdCwgaXMgZXhwaXJlZCBvciBhYm91dCB0byBleHBpcmUuXHJcbiAqXHJcbiAqIFNob3VsZCBvbmx5IGJlIGNhbGxlZCBpZiB0aGUgRmlyZWJhc2UgSW5zdGFsbGF0aW9uIGlzIHJlZ2lzdGVyZWQuXHJcbiAqL1xyXG5mdW5jdGlvbiByZWZyZXNoQXV0aFRva2VuKGRlcGVuZGVuY2llcywgZm9yY2VSZWZyZXNoKSB7XHJcbiAgICBpZiAoZm9yY2VSZWZyZXNoID09PSB2b2lkIDApIHsgZm9yY2VSZWZyZXNoID0gZmFsc2U7IH1cclxuICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgdG9rZW5Qcm9taXNlLCBlbnRyeSwgYXV0aFRva2VuLCBfYTtcclxuICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9iKSB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAoX2IubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMDogcmV0dXJuIFs0IC8qeWllbGQqLywgdXBkYXRlKGRlcGVuZGVuY2llcy5hcHBDb25maWcsIGZ1bmN0aW9uIChvbGRFbnRyeSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWlzRW50cnlSZWdpc3RlcmVkKG9sZEVudHJ5KSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJub3QtcmVnaXN0ZXJlZFwiIC8qIE5PVF9SRUdJU1RFUkVEICovKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgb2xkQXV0aFRva2VuID0gb2xkRW50cnkuYXV0aFRva2VuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWZvcmNlUmVmcmVzaCAmJiBpc0F1dGhUb2tlblZhbGlkKG9sZEF1dGhUb2tlbikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoZXJlIGlzIGEgdmFsaWQgdG9rZW4gaW4gdGhlIERCLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9sZEVudHJ5O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKG9sZEF1dGhUb2tlbi5yZXF1ZXN0U3RhdHVzID09PSAxIC8qIElOX1BST0dSRVNTICovKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGVyZSBhbHJlYWR5IGlzIGEgdG9rZW4gcmVxdWVzdCBpbiBwcm9ncmVzcy5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRva2VuUHJvbWlzZSA9IHdhaXRVbnRpbEF1dGhUb2tlblJlcXVlc3QoZGVwZW5kZW5jaWVzLCBmb3JjZVJlZnJlc2gpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9sZEVudHJ5O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm8gdG9rZW4gb3IgdG9rZW4gZXhwaXJlZC5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbmF2aWdhdG9yLm9uTGluZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiYXBwLW9mZmxpbmVcIiAvKiBBUFBfT0ZGTElORSAqLyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW5Qcm9ncmVzc0VudHJ5ID0gbWFrZUF1dGhUb2tlblJlcXVlc3RJblByb2dyZXNzRW50cnkob2xkRW50cnkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9rZW5Qcm9taXNlID0gZmV0Y2hBdXRoVG9rZW5Gcm9tU2VydmVyKGRlcGVuZGVuY2llcywgaW5Qcm9ncmVzc0VudHJ5KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpblByb2dyZXNzRW50cnk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KV07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgZW50cnkgPSBfYi5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0b2tlblByb21pc2UpIHJldHVybiBbMyAvKmJyZWFrKi8sIDNdO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRva2VuUHJvbWlzZV07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgX2EgPSBfYi5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgNF07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICAgICAgX2EgPSBlbnRyeS5hdXRoVG9rZW47XHJcbiAgICAgICAgICAgICAgICAgICAgX2IubGFiZWwgPSA0O1xyXG4gICAgICAgICAgICAgICAgY2FzZSA0OlxyXG4gICAgICAgICAgICAgICAgICAgIGF1dGhUb2tlbiA9IF9hO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBhdXRoVG9rZW5dO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufVxyXG4vKipcclxuICogQ2FsbCBvbmx5IGlmIEZJRCBpcyByZWdpc3RlcmVkIGFuZCBBdXRoIFRva2VuIHJlcXVlc3QgaXMgaW4gcHJvZ3Jlc3MuXHJcbiAqXHJcbiAqIFdhaXRzIHVudGlsIHRoZSBjdXJyZW50IHBlbmRpbmcgcmVxdWVzdCBmaW5pc2hlcy4gSWYgdGhlIHJlcXVlc3QgdGltZXMgb3V0LFxyXG4gKiB0cmllcyBvbmNlIGluIHRoaXMgdGhyZWFkIGFzIHdlbGwuXHJcbiAqL1xyXG5mdW5jdGlvbiB3YWl0VW50aWxBdXRoVG9rZW5SZXF1ZXN0KGRlcGVuZGVuY2llcywgZm9yY2VSZWZyZXNoKSB7XHJcbiAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGVudHJ5LCBhdXRoVG9rZW47XHJcbiAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6IHJldHVybiBbNCAvKnlpZWxkKi8sIHVwZGF0ZUF1dGhUb2tlblJlcXVlc3QoZGVwZW5kZW5jaWVzLmFwcENvbmZpZyldO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgIGVudHJ5ID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIF9hLmxhYmVsID0gMjtcclxuICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIShlbnRyeS5hdXRoVG9rZW4ucmVxdWVzdFN0YXR1cyA9PT0gMSAvKiBJTl9QUk9HUkVTUyAqLykpIHJldHVybiBbMyAvKmJyZWFrKi8sIDVdO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGdlbmVyYXRlQXV0aFRva2VuIHN0aWxsIGluIHByb2dyZXNzLlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHNsZWVwKDEwMCldO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGdlbmVyYXRlQXV0aFRva2VuIHN0aWxsIGluIHByb2dyZXNzLlxyXG4gICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB1cGRhdGVBdXRoVG9rZW5SZXF1ZXN0KGRlcGVuZGVuY2llcy5hcHBDb25maWcpXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNDpcclxuICAgICAgICAgICAgICAgICAgICBlbnRyeSA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCAyXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNTpcclxuICAgICAgICAgICAgICAgICAgICBhdXRoVG9rZW4gPSBlbnRyeS5hdXRoVG9rZW47XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGF1dGhUb2tlbi5yZXF1ZXN0U3RhdHVzID09PSAwIC8qIE5PVF9TVEFSVEVEICovKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoZSByZXF1ZXN0IHRpbWVkIG91dCBvciBmYWlsZWQgaW4gYSBkaWZmZXJlbnQgY2FsbC4gVHJ5IGFnYWluLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgcmVmcmVzaEF1dGhUb2tlbihkZXBlbmRlbmNpZXMsIGZvcmNlUmVmcmVzaCldO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIGF1dGhUb2tlbl07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufVxyXG4vKipcclxuICogQ2FsbGVkIG9ubHkgaWYgdGhlcmUgaXMgYSBHZW5lcmF0ZUF1dGhUb2tlbiByZXF1ZXN0IGluIHByb2dyZXNzLlxyXG4gKlxyXG4gKiBVcGRhdGVzIHRoZSBJbnN0YWxsYXRpb25FbnRyeSBpbiB0aGUgREIgYmFzZWQgb24gdGhlIHN0YXR1cyBvZiB0aGVcclxuICogR2VuZXJhdGVBdXRoVG9rZW4gcmVxdWVzdC5cclxuICpcclxuICogUmV0dXJucyB0aGUgdXBkYXRlZCBJbnN0YWxsYXRpb25FbnRyeS5cclxuICovXHJcbmZ1bmN0aW9uIHVwZGF0ZUF1dGhUb2tlblJlcXVlc3QoYXBwQ29uZmlnKSB7XHJcbiAgICByZXR1cm4gdXBkYXRlKGFwcENvbmZpZywgZnVuY3Rpb24gKG9sZEVudHJ5KSB7XHJcbiAgICAgICAgaWYgKCFpc0VudHJ5UmVnaXN0ZXJlZChvbGRFbnRyeSkpIHtcclxuICAgICAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJub3QtcmVnaXN0ZXJlZFwiIC8qIE5PVF9SRUdJU1RFUkVEICovKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIG9sZEF1dGhUb2tlbiA9IG9sZEVudHJ5LmF1dGhUb2tlbjtcclxuICAgICAgICBpZiAoaGFzQXV0aFRva2VuUmVxdWVzdFRpbWVkT3V0KG9sZEF1dGhUb2tlbikpIHtcclxuICAgICAgICAgICAgcmV0dXJuIF9fYXNzaWduKF9fYXNzaWduKHt9LCBvbGRFbnRyeSksIHsgYXV0aFRva2VuOiB7IHJlcXVlc3RTdGF0dXM6IDAgLyogTk9UX1NUQVJURUQgKi8gfSB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG9sZEVudHJ5O1xyXG4gICAgfSk7XHJcbn1cclxuZnVuY3Rpb24gZmV0Y2hBdXRoVG9rZW5Gcm9tU2VydmVyKGRlcGVuZGVuY2llcywgaW5zdGFsbGF0aW9uRW50cnkpIHtcclxuICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgYXV0aFRva2VuLCB1cGRhdGVkSW5zdGFsbGF0aW9uRW50cnksIGVfMSwgdXBkYXRlZEluc3RhbGxhdGlvbkVudHJ5O1xyXG4gICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgIF9hLnRyeXMucHVzaChbMCwgMywgLCA4XSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgZ2VuZXJhdGVBdXRoVG9rZW5SZXF1ZXN0KGRlcGVuZGVuY2llcywgaW5zdGFsbGF0aW9uRW50cnkpXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICBhdXRoVG9rZW4gPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlZEluc3RhbGxhdGlvbkVudHJ5ID0gX19hc3NpZ24oX19hc3NpZ24oe30sIGluc3RhbGxhdGlvbkVudHJ5KSwgeyBhdXRoVG9rZW46IGF1dGhUb2tlbiB9KTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBzZXQoZGVwZW5kZW5jaWVzLmFwcENvbmZpZywgdXBkYXRlZEluc3RhbGxhdGlvbkVudHJ5KV07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBhdXRoVG9rZW5dO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICAgICAgICAgIGVfMSA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIShpc1NlcnZlckVycm9yKGVfMSkgJiYgKGVfMS5zZXJ2ZXJDb2RlID09PSA0MDEgfHwgZV8xLnNlcnZlckNvZGUgPT09IDQwNCkpKSByZXR1cm4gWzMgLypicmVhayovLCA1XTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBTZXJ2ZXIgcmV0dXJuZWQgYSBcIkZJRCBub3QgZm91bmRcIiBvciBhIFwiSW52YWxpZCBhdXRoZW50aWNhdGlvblwiIGVycm9yLlxyXG4gICAgICAgICAgICAgICAgICAgIC8vIEdlbmVyYXRlIGEgbmV3IElEIG5leHQgdGltZS5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCByZW1vdmUoZGVwZW5kZW5jaWVzLmFwcENvbmZpZyldO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA0OlxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFNlcnZlciByZXR1cm5lZCBhIFwiRklEIG5vdCBmb3VuZFwiIG9yIGEgXCJJbnZhbGlkIGF1dGhlbnRpY2F0aW9uXCIgZXJyb3IuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gR2VuZXJhdGUgYSBuZXcgSUQgbmV4dCB0aW1lLlxyXG4gICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCA3XTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNTpcclxuICAgICAgICAgICAgICAgICAgICB1cGRhdGVkSW5zdGFsbGF0aW9uRW50cnkgPSBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgaW5zdGFsbGF0aW9uRW50cnkpLCB7IGF1dGhUb2tlbjogeyByZXF1ZXN0U3RhdHVzOiAwIC8qIE5PVF9TVEFSVEVEICovIH0gfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgc2V0KGRlcGVuZGVuY2llcy5hcHBDb25maWcsIHVwZGF0ZWRJbnN0YWxsYXRpb25FbnRyeSldO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA2OlxyXG4gICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDc7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDc6IHRocm93IGVfMTtcclxuICAgICAgICAgICAgICAgIGNhc2UgODogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufVxyXG5mdW5jdGlvbiBpc0VudHJ5UmVnaXN0ZXJlZChpbnN0YWxsYXRpb25FbnRyeSkge1xyXG4gICAgcmV0dXJuIChpbnN0YWxsYXRpb25FbnRyeSAhPT0gdW5kZWZpbmVkICYmXHJcbiAgICAgICAgaW5zdGFsbGF0aW9uRW50cnkucmVnaXN0cmF0aW9uU3RhdHVzID09PSAyIC8qIENPTVBMRVRFRCAqLyk7XHJcbn1cclxuZnVuY3Rpb24gaXNBdXRoVG9rZW5WYWxpZChhdXRoVG9rZW4pIHtcclxuICAgIHJldHVybiAoYXV0aFRva2VuLnJlcXVlc3RTdGF0dXMgPT09IDIgLyogQ09NUExFVEVEICovICYmXHJcbiAgICAgICAgIWlzQXV0aFRva2VuRXhwaXJlZChhdXRoVG9rZW4pKTtcclxufVxyXG5mdW5jdGlvbiBpc0F1dGhUb2tlbkV4cGlyZWQoYXV0aFRva2VuKSB7XHJcbiAgICB2YXIgbm93ID0gRGF0ZS5ub3coKTtcclxuICAgIHJldHVybiAobm93IDwgYXV0aFRva2VuLmNyZWF0aW9uVGltZSB8fFxyXG4gICAgICAgIGF1dGhUb2tlbi5jcmVhdGlvblRpbWUgKyBhdXRoVG9rZW4uZXhwaXJlc0luIDwgbm93ICsgVE9LRU5fRVhQSVJBVElPTl9CVUZGRVIpO1xyXG59XHJcbi8qKiBSZXR1cm5zIGFuIHVwZGF0ZWQgSW5zdGFsbGF0aW9uRW50cnkgd2l0aCBhbiBJblByb2dyZXNzQXV0aFRva2VuLiAqL1xyXG5mdW5jdGlvbiBtYWtlQXV0aFRva2VuUmVxdWVzdEluUHJvZ3Jlc3NFbnRyeShvbGRFbnRyeSkge1xyXG4gICAgdmFyIGluUHJvZ3Jlc3NBdXRoVG9rZW4gPSB7XHJcbiAgICAgICAgcmVxdWVzdFN0YXR1czogMSAvKiBJTl9QUk9HUkVTUyAqLyxcclxuICAgICAgICByZXF1ZXN0VGltZTogRGF0ZS5ub3coKVxyXG4gICAgfTtcclxuICAgIHJldHVybiBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgb2xkRW50cnkpLCB7IGF1dGhUb2tlbjogaW5Qcm9ncmVzc0F1dGhUb2tlbiB9KTtcclxufVxyXG5mdW5jdGlvbiBoYXNBdXRoVG9rZW5SZXF1ZXN0VGltZWRPdXQoYXV0aFRva2VuKSB7XHJcbiAgICByZXR1cm4gKGF1dGhUb2tlbi5yZXF1ZXN0U3RhdHVzID09PSAxIC8qIElOX1BST0dSRVNTICovICYmXHJcbiAgICAgICAgYXV0aFRva2VuLnJlcXVlc3RUaW1lICsgUEVORElOR19USU1FT1VUX01TIDwgRGF0ZS5ub3coKSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIGdldElkKGRlcGVuZGVuY2llcykge1xyXG4gICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfYSwgaW5zdGFsbGF0aW9uRW50cnksIHJlZ2lzdHJhdGlvblByb21pc2U7XHJcbiAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYikge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKF9iLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6IHJldHVybiBbNCAvKnlpZWxkKi8sIGdldEluc3RhbGxhdGlvbkVudHJ5KGRlcGVuZGVuY2llcy5hcHBDb25maWcpXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICBfYSA9IF9iLnNlbnQoKSwgaW5zdGFsbGF0aW9uRW50cnkgPSBfYS5pbnN0YWxsYXRpb25FbnRyeSwgcmVnaXN0cmF0aW9uUHJvbWlzZSA9IF9hLnJlZ2lzdHJhdGlvblByb21pc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlZ2lzdHJhdGlvblByb21pc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVnaXN0cmF0aW9uUHJvbWlzZS5jYXRjaChjb25zb2xlLmVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZSBpbnN0YWxsYXRpb24gaXMgYWxyZWFkeSByZWdpc3RlcmVkLCB1cGRhdGUgdGhlIGF1dGhlbnRpY2F0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRva2VuIGlmIG5lZWRlZC5cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVmcmVzaEF1dGhUb2tlbihkZXBlbmRlbmNpZXMpLmNhdGNoKGNvbnNvbGUuZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgaW5zdGFsbGF0aW9uRW50cnkuZmlkXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIGdldFRva2VuKGRlcGVuZGVuY2llcywgZm9yY2VSZWZyZXNoKSB7XHJcbiAgICBpZiAoZm9yY2VSZWZyZXNoID09PSB2b2lkIDApIHsgZm9yY2VSZWZyZXNoID0gZmFsc2U7IH1cclxuICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgYXV0aFRva2VuO1xyXG4gICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAwOiByZXR1cm4gWzQgLyp5aWVsZCovLCBjb21wbGV0ZUluc3RhbGxhdGlvblJlZ2lzdHJhdGlvbihkZXBlbmRlbmNpZXMuYXBwQ29uZmlnKV07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHJlZnJlc2hBdXRoVG9rZW4oZGVwZW5kZW5jaWVzLCBmb3JjZVJlZnJlc2gpXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICBhdXRoVG9rZW4gPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIGF1dGhUb2tlbi50b2tlbl07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59XHJcbmZ1bmN0aW9uIGNvbXBsZXRlSW5zdGFsbGF0aW9uUmVnaXN0cmF0aW9uKGFwcENvbmZpZykge1xyXG4gICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciByZWdpc3RyYXRpb25Qcm9taXNlO1xyXG4gICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAwOiByZXR1cm4gWzQgLyp5aWVsZCovLCBnZXRJbnN0YWxsYXRpb25FbnRyeShhcHBDb25maWcpXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICByZWdpc3RyYXRpb25Qcm9taXNlID0gKF9hLnNlbnQoKSkucmVnaXN0cmF0aW9uUHJvbWlzZTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXJlZ2lzdHJhdGlvblByb21pc2UpIHJldHVybiBbMyAvKmJyZWFrKi8sIDNdO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIEEgY3JlYXRlSW5zdGFsbGF0aW9uIHJlcXVlc3QgaXMgaW4gcHJvZ3Jlc3MuIFdhaXQgdW50aWwgaXQgZmluaXNoZXMuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgcmVnaXN0cmF0aW9uUHJvbWlzZV07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gQSBjcmVhdGVJbnN0YWxsYXRpb24gcmVxdWVzdCBpcyBpbiBwcm9ncmVzcy4gV2FpdCB1bnRpbCBpdCBmaW5pc2hlcy5cclxuICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSAzO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAzOiByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBkZWxldGVJbnN0YWxsYXRpb25SZXF1ZXN0KGFwcENvbmZpZywgaW5zdGFsbGF0aW9uRW50cnkpIHtcclxuICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgZW5kcG9pbnQsIGhlYWRlcnMsIHJlcXVlc3QsIHJlc3BvbnNlO1xyXG4gICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgIGVuZHBvaW50ID0gZ2V0RGVsZXRlRW5kcG9pbnQoYXBwQ29uZmlnLCBpbnN0YWxsYXRpb25FbnRyeSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVycyA9IGdldEhlYWRlcnNXaXRoQXV0aChhcHBDb25maWcsIGluc3RhbGxhdGlvbkVudHJ5KTtcclxuICAgICAgICAgICAgICAgICAgICByZXF1ZXN0ID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdERUxFVEUnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCByZXRyeUlmU2VydmVyRXJyb3IoZnVuY3Rpb24gKCkgeyByZXR1cm4gZmV0Y2goZW5kcG9pbnQsIHJlcXVlc3QpOyB9KV07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEhcmVzcG9uc2Uub2spIHJldHVybiBbMyAvKmJyZWFrKi8sIDNdO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIGdldEVycm9yRnJvbVJlc3BvbnNlKCdEZWxldGUgSW5zdGFsbGF0aW9uJywgcmVzcG9uc2UpXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMjogdGhyb3cgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAzOiByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59XHJcbmZ1bmN0aW9uIGdldERlbGV0ZUVuZHBvaW50KGFwcENvbmZpZywgX2EpIHtcclxuICAgIHZhciBmaWQgPSBfYS5maWQ7XHJcbiAgICByZXR1cm4gZ2V0SW5zdGFsbGF0aW9uc0VuZHBvaW50KGFwcENvbmZpZykgKyBcIi9cIiArIGZpZDtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gZGVsZXRlSW5zdGFsbGF0aW9uKGRlcGVuZGVuY2llcykge1xyXG4gICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBhcHBDb25maWcsIGVudHJ5O1xyXG4gICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgIGFwcENvbmZpZyA9IGRlcGVuZGVuY2llcy5hcHBDb25maWc7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdXBkYXRlKGFwcENvbmZpZywgZnVuY3Rpb24gKG9sZEVudHJ5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob2xkRW50cnkgJiYgb2xkRW50cnkucmVnaXN0cmF0aW9uU3RhdHVzID09PSAwIC8qIE5PVF9TVEFSVEVEICovKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRGVsZXRlIHRoZSB1bnJlZ2lzdGVyZWQgZW50cnkgd2l0aG91dCBzZW5kaW5nIGEgZGVsZXRlSW5zdGFsbGF0aW9uIHJlcXVlc3QuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvbGRFbnRyeTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSldO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgIGVudHJ5ID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghZW50cnkpIHJldHVybiBbMyAvKmJyZWFrKi8sIDZdO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghKGVudHJ5LnJlZ2lzdHJhdGlvblN0YXR1cyA9PT0gMSAvKiBJTl9QUk9HUkVTUyAqLykpIHJldHVybiBbMyAvKmJyZWFrKi8sIDJdO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIENhbid0IGRlbGV0ZSB3aGlsZSB0cnlpbmcgdG8gcmVnaXN0ZXIuXHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJkZWxldGUtcGVuZGluZy1yZWdpc3RyYXRpb25cIiAvKiBERUxFVEVfUEVORElOR19SRUdJU1RSQVRJT04gKi8pO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghKGVudHJ5LnJlZ2lzdHJhdGlvblN0YXR1cyA9PT0gMiAvKiBDT01QTEVURUQgKi8pKSByZXR1cm4gWzMgLypicmVhayovLCA2XTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoISFuYXZpZ2F0b3Iub25MaW5lKSByZXR1cm4gWzMgLypicmVhayovLCAzXTtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImFwcC1vZmZsaW5lXCIgLyogQVBQX09GRkxJTkUgKi8pO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAzOiByZXR1cm4gWzQgLyp5aWVsZCovLCBkZWxldGVJbnN0YWxsYXRpb25SZXF1ZXN0KGFwcENvbmZpZywgZW50cnkpXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNDpcclxuICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgcmVtb3ZlKGFwcENvbmZpZyldO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA1OlxyXG4gICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDY7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDY6IHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIGV4dHJhY3RBcHBDb25maWcoYXBwKSB7XHJcbiAgICB2YXIgZV8xLCBfYTtcclxuICAgIGlmICghYXBwIHx8ICFhcHAub3B0aW9ucykge1xyXG4gICAgICAgIHRocm93IGdldE1pc3NpbmdWYWx1ZUVycm9yKCdBcHAgQ29uZmlndXJhdGlvbicpO1xyXG4gICAgfVxyXG4gICAgaWYgKCFhcHAubmFtZSkge1xyXG4gICAgICAgIHRocm93IGdldE1pc3NpbmdWYWx1ZUVycm9yKCdBcHAgTmFtZScpO1xyXG4gICAgfVxyXG4gICAgLy8gUmVxdWlyZWQgYXBwIGNvbmZpZyBrZXlzXHJcbiAgICB2YXIgY29uZmlnS2V5cyA9IFtcclxuICAgICAgICAncHJvamVjdElkJyxcclxuICAgICAgICAnYXBpS2V5JyxcclxuICAgICAgICAnYXBwSWQnXHJcbiAgICBdO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBmb3IgKHZhciBjb25maWdLZXlzXzEgPSBfX3ZhbHVlcyhjb25maWdLZXlzKSwgY29uZmlnS2V5c18xXzEgPSBjb25maWdLZXlzXzEubmV4dCgpOyAhY29uZmlnS2V5c18xXzEuZG9uZTsgY29uZmlnS2V5c18xXzEgPSBjb25maWdLZXlzXzEubmV4dCgpKSB7XHJcbiAgICAgICAgICAgIHZhciBrZXlOYW1lID0gY29uZmlnS2V5c18xXzEudmFsdWU7XHJcbiAgICAgICAgICAgIGlmICghYXBwLm9wdGlvbnNba2V5TmFtZV0pIHtcclxuICAgICAgICAgICAgICAgIHRocm93IGdldE1pc3NpbmdWYWx1ZUVycm9yKGtleU5hbWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH1cclxuICAgIGZpbmFsbHkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChjb25maWdLZXlzXzFfMSAmJiAhY29uZmlnS2V5c18xXzEuZG9uZSAmJiAoX2EgPSBjb25maWdLZXlzXzEucmV0dXJuKSkgX2EuY2FsbChjb25maWdLZXlzXzEpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGFwcE5hbWU6IGFwcC5uYW1lLFxyXG4gICAgICAgIHByb2plY3RJZDogYXBwLm9wdGlvbnMucHJvamVjdElkLFxyXG4gICAgICAgIGFwaUtleTogYXBwLm9wdGlvbnMuYXBpS2V5LFxyXG4gICAgICAgIGFwcElkOiBhcHAub3B0aW9ucy5hcHBJZFxyXG4gICAgfTtcclxufVxyXG5mdW5jdGlvbiBnZXRNaXNzaW5nVmFsdWVFcnJvcih2YWx1ZU5hbWUpIHtcclxuICAgIHJldHVybiBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcIm1pc3NpbmctYXBwLWNvbmZpZy12YWx1ZXNcIiAvKiBNSVNTSU5HX0FQUF9DT05GSUdfVkFMVUVTICovLCB7XHJcbiAgICAgICAgdmFsdWVOYW1lOiB2YWx1ZU5hbWVcclxuICAgIH0pO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiByZWdpc3Rlckluc3RhbGxhdGlvbnMoaW5zdGFuY2UpIHtcclxuICAgIHZhciBpbnN0YWxsYXRpb25zTmFtZSA9ICdpbnN0YWxsYXRpb25zJztcclxuICAgIGluc3RhbmNlLklOVEVSTkFMLnJlZ2lzdGVyQ29tcG9uZW50KG5ldyBDb21wb25lbnQoaW5zdGFsbGF0aW9uc05hbWUsIGZ1bmN0aW9uIChjb250YWluZXIpIHtcclxuICAgICAgICB2YXIgYXBwID0gY29udGFpbmVyLmdldFByb3ZpZGVyKCdhcHAnKS5nZXRJbW1lZGlhdGUoKTtcclxuICAgICAgICAvLyBUaHJvd3MgaWYgYXBwIGlzbid0IGNvbmZpZ3VyZWQgcHJvcGVybHkuXHJcbiAgICAgICAgdmFyIGFwcENvbmZpZyA9IGV4dHJhY3RBcHBDb25maWcoYXBwKTtcclxuICAgICAgICB2YXIgcGxhdGZvcm1Mb2dnZXJQcm92aWRlciA9IGNvbnRhaW5lci5nZXRQcm92aWRlcigncGxhdGZvcm0tbG9nZ2VyJyk7XHJcbiAgICAgICAgdmFyIGRlcGVuZGVuY2llcyA9IHtcclxuICAgICAgICAgICAgYXBwQ29uZmlnOiBhcHBDb25maWcsXHJcbiAgICAgICAgICAgIHBsYXRmb3JtTG9nZ2VyUHJvdmlkZXI6IHBsYXRmb3JtTG9nZ2VyUHJvdmlkZXJcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGFwcDogYXBwLFxyXG4gICAgICAgICAgICBnZXRJZDogZnVuY3Rpb24gKCkgeyByZXR1cm4gZ2V0SWQoZGVwZW5kZW5jaWVzKTsgfSxcclxuICAgICAgICAgICAgZ2V0VG9rZW46IGZ1bmN0aW9uIChmb3JjZVJlZnJlc2gpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBnZXRUb2tlbihkZXBlbmRlbmNpZXMsIGZvcmNlUmVmcmVzaCk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGRlbGV0ZTogZnVuY3Rpb24gKCkgeyByZXR1cm4gZGVsZXRlSW5zdGFsbGF0aW9uKGRlcGVuZGVuY2llcyk7IH1cclxuICAgICAgICB9O1xyXG4gICAgfSwgXCJQVUJMSUNcIiAvKiBQVUJMSUMgKi8pKTtcclxuICAgIGluc3RhbmNlLnJlZ2lzdGVyVmVyc2lvbihuYW1lLCB2ZXJzaW9uKTtcclxufVxyXG5yZWdpc3Rlckluc3RhbGxhdGlvbnMoZmlyZWJhc2UpO1xuXG5leHBvcnQgeyByZWdpc3Rlckluc3RhbGxhdGlvbnMgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmVzbS5qcy5tYXBcbiIsImltcG9ydCBBUEkgZnJvbSAnLi9hcGknO1xyXG5pbXBvcnQgeyBXb3Jrc3BhY2UgfSBmcm9tICcuL3dvcmtzcGFjZSc7XHJcbmltcG9ydCB7IFByb2plY3REYXRhIH0gZnJvbSAnLi9wcm9qZWN0RGF0YSc7XHJcbmltcG9ydCBHZW5lcmljcyBmcm9tICcuL2dlbmVyaWNzJztcclxuaW1wb3J0IHsgQWRkQ29tbWVudCB9IGZyb20gJy4vYXBwVG9vbHMvYWRkQ29tbWVudCc7XHJcbmltcG9ydCB7IEVsZW1lbnREYXRhIH0gZnJvbSAnLi9hcHBUb29scy9lbGVtZW50RGF0YSc7XHJcbmltcG9ydCB7IFNoYXJlUHJvamVjdCB9IGZyb20gJy4vc2hhcmVQcm9qZWN0JztcclxuaW1wb3J0IHsgTm90aWZpY2F0aW9uc01hbmFnZXIgfSBmcm9tICcuL25vdGlmaWNhdGlvbnNNYW5hZ2VyJztcclxuaW1wb3J0IHsgUmVuYW1lUHJvamVjdCB9IGZyb20gJy4vcmVuYW1lUHJvamVjdCc7XHJcbmltcG9ydCB7IENvbnRleHRNZW51IH0gZnJvbSAnLi9jb250ZXh0TWVudSc7XHJcbmltcG9ydCB7IFByb2plY3RJdGVtIH0gZnJvbSAnLi9wcm9qZWN0SXRlbSc7XHJcblxyXG5leHBvcnQgY2xhc3MgQXBwbGljYXRpb24ge1xyXG4gIGFwcE1haW5Gb2xkZXJJZDogc3RyaW5nO1xyXG4gIC8vIEFycmF5IG9mIG9iamVjdHMgd2l0aCBkYXRhIGxpa2UgJ25hbWUnIGFuZCAnaWQnIG9mIHRoZSBwcm9qZWN0cy5cclxuICBwcm9qZWN0c0RhdGE6IGFueTsgLy8gVE9ETyBhcnJheSBvZiA/XHJcbiAgYXBwU2V0dGluZ3NGb2xkZXJJZDogc3RyaW5nO1xyXG4gIHRodW1ic0ZvbGRlcklkOiBzdHJpbmc7XHJcbiAgLy8gSWYgYSB1c2VyIGlzIGxvZ2dlZCBpdCBwcm9maWxlIGluZm8gaXMgc3RvcmVkIGhlcmUuXHJcbiAgdXNlckluZm86IGdhcGkuY2xpZW50LmRyaXZlLlVzZXI7XHJcbiAgdXNlckluZm9Db250YWluZXI6IEhUTUxFbGVtZW50O1xyXG4gIC8vIFRoZSBjdXJyZW50IHdvcmtzcGFjZSBvYmplY3Qgd2lsbCBiZSByZWZlcmVuY2VkIGhlcmUuXHJcbiAgY3VycmVudFdvcmtzcGFjZTogV29ya3NwYWNlO1xyXG4gIHdvcmtzcGFjZXNDb250YWluZXI6IEhUTUxFbGVtZW50O1xyXG4gIGxhc3RVcGxvYWRlZFByb2plY3Q6IFByb2plY3REYXRhO1xyXG4gIC8vIFN0b3JlcyB0aGUgYWN0aXZlIGl0ZW0gaW4gdGhlIHByb2plY3RzIGxpc3QuXHJcbiAgcHJldmlvdXNBY3RpdmVJdGVtOiBhbnk7IC8vIFRPRE9cclxuICBwcm9qZWN0c0xpc3RCdG46IEhUTUxFbGVtZW50O1xyXG4gIGRyYXdpbmdzQnRuczogSFRNTEVsZW1lbnQ7XHJcbiAgdG9vbGJhcnNDb250YWluZXI6IEhUTUxFbGVtZW50O1xyXG4gIC8vIE1vZGFsIGRpYWxvZy5cclxuICBtb2RhbERpYWxvZ0NvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XHJcbiAgbW9kYWxEaWFsb2dDb250ZW50OiBIVE1MRWxlbWVudDtcclxuICBtb2RhbERpYWxvZ3NTdG9yYWdlOiBIVE1MRWxlbWVudDtcclxuICBjbG9zZU1vZGFsQnRuOiBIVE1MRWxlbWVudDtcclxuICAvLyBWaWV3cG9ydCBtZXNzYWdlLlxyXG4gIHZpZXdwb3J0TWVzc2FnZTogSFRNTEVsZW1lbnQ7XHJcbiAgLy8gUHJvamVjdHMgbGlzdC5cclxuICBwcm9qZWN0c0xpc3RDb250YWluZXI6IEhUTUxFbGVtZW50O1xyXG4gIHByb2plY3RzTGlzdDogSFRNTEVsZW1lbnQ7XHJcbiAgY2xvc2VQcm9qZWN0c0xpc3RCdG46IEhUTUxFbGVtZW50O1xyXG4gIC8vIFBhbmVscyBzdG9yYWdlLlxyXG4gIHBhbmVsc1N0b3JhZ2U6IEhUTUxFbGVtZW50O1xyXG4gIC8vIFNhdmUgYnV0dG9uLlxyXG4gIHNhdmVCdG46IEhUTUxFbGVtZW50O1xyXG4gIC8vIFVwbG9hZCBwcm9qZWN0IGZvcm1cclxuICB1cGxvYWRGaWxlRm9ybTogSFRNTEVsZW1lbnQ7XHJcbiAgZmlsZUlucHV0OiBIVE1MSW5wdXRFbGVtZW50O1xyXG4gIHN1Ym1pdEZpbGVCdG46IEhUTUxFbGVtZW50O1xyXG4gIC8vIFJlbmFtZSBwcm9qZWN0IGZvcm1cclxuICByZW5hbWVQcm9qZWN0RGlhbG9nOiBSZW5hbWVQcm9qZWN0O1xyXG4gIC8vIFNoYXJlIHByb2plY3QgZm9ybVxyXG4gIHNoYXJlUHJvamVjdERpYWxvZzogU2hhcmVQcm9qZWN0O1xyXG4gIC8vIE1lc3NhZ2UgY29udGFpbmVyXHJcbiAgbWVzc2FnZUNvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XHJcbiAgbWVzc2FnZVRpbWVySWQ6IG51bWJlcjtcclxuICAvLyBOb3RpZmljYXRpb25zIG1hbmFnZXJcclxuICBub3RpZmljYXRpb25zTWFuYWdlcjogTm90aWZpY2F0aW9uc01hbmFnZXI7XHJcbiAgLy8gQ29udGV4dCBtZW51XHJcbiAgY29udGV4dE1lbnU6IENvbnRleHRNZW51O1xyXG4gIGNvbW1lbnRzQ2hhbmdlc1Vuc2F2ZWQ6IGJvb2xlYW47XHJcblxyXG4gIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgdGhpcy51c2VySW5mb0NvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1c2VyLWluZm8nKTtcclxuICAgIHRoaXMud29ya3NwYWNlc0NvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd3b3Jrc3BhY2VzJyk7XHJcbiAgICB0aGlzLnByb2plY3RzTGlzdEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9qZWN0c0xpc3RCdG4nKTtcclxuICAgIHRoaXMuZHJhd2luZ3NCdG5zID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RyYXdpbmdzQnRucycpO1xyXG4gICAgdGhpcy50b29sYmFyc0NvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0b29sYmFyc0NvbnRhaW5lcicpO1xyXG4gICAgLy8gTW9kYWwgZGlhbG9nLlxyXG4gICAgdGhpcy5tb2RhbERpYWxvZ0NvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtb2RhbERpYWxvZ0NvbnRhaW5lcicpO1xyXG4gICAgdGhpcy5tb2RhbERpYWxvZ0NvbnRlbnQgPSB0aGlzLm1vZGFsRGlhbG9nQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbC1jb250ZW50Jyk7XHJcbiAgICB0aGlzLm1vZGFsRGlhbG9nc1N0b3JhZ2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbW9kYWxEaWFsb2dzU3RvcmFnZScpO1xyXG4gICAgdGhpcy5jbG9zZU1vZGFsQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Nsb3NlTW9kYWxCdG4nKTtcclxuICAgIHRoaXMuY2xvc2VNb2RhbERpYWxvZyA9IHRoaXMuY2xvc2VNb2RhbERpYWxvZy5iaW5kKHRoaXMpO1xyXG4gICAgdGhpcy5jbG9zZU1vZGFsQnRuLm9uY2xpY2sgPSB0aGlzLmNsb3NlTW9kYWxEaWFsb2c7XHJcbiAgICAvLyBWaWV3cG9ydCBtZXNzYWdlLlxyXG4gICAgdGhpcy52aWV3cG9ydE1lc3NhZ2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndmlld3BvcnRNZXNzYWdlJyk7IC8vIFRPRE8gQ3JlYXRlIGFzIGEgbmV3IGNvbXBvbmVudCBvZiB0aGUgd29ya3NwYWNlXHJcbiAgICAvLyBQcm9qZWN0cyBsaXN0LlxyXG4gICAgdGhpcy5wcm9qZWN0c0xpc3RDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvamVjdHNMaXN0Q29udGFpbmVyJyk7XHJcbiAgICB0aGlzLnByb2plY3RzTGlzdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9qZWN0c0xpc3QnKTtcclxuICAgIHRoaXMuY2xvc2VQcm9qZWN0c0xpc3RCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2xvc2VQcm9qZWN0c0xpc3RCdG4nKTtcclxuICAgIC8vIFBhbmVscyBzdG9yYWdlLlxyXG4gICAgdGhpcy5wYW5lbHNTdG9yYWdlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BhbmVsc1N0b3JhZ2UnKTtcclxuICAgIC8vIFNhdmUgYnV0dG9uLlxyXG4gICAgdGhpcy5zYXZlQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NhdmVCdG4nKTtcclxuICAgIHRoaXMuc2F2ZUNvbW1lbnRzRGF0YSA9IHRoaXMuc2F2ZUNvbW1lbnRzRGF0YS5iaW5kKHRoaXMpO1xyXG4gICAgdGhpcy5zYXZlQnRuLm9uY2xpY2sgPSB0aGlzLnNhdmVDb21tZW50c0RhdGE7XHJcbiAgICAvLyBQcm9qZWN0cyBsaXN0LlxyXG4gICAgdGhpcy5jbG9zZVByb2plY3RzTGlzdCA9IHRoaXMuY2xvc2VQcm9qZWN0c0xpc3QuYmluZCh0aGlzKTtcclxuICAgIHRoaXMucHJvamVjdHNMaXN0QnRuLm9uY2xpY2sgPSAoKSA9PiB7XHJcbiAgICAgIGlmICh0aGlzLnByb2plY3RzTGlzdEJ0bi5kYXRhc2V0Lm9wZW4gPT09ICd0cnVlJykge1xyXG4gICAgICAgIHRoaXMuY2xvc2VQcm9qZWN0c0xpc3QoKTtcclxuICAgICAgfSBlbHNlIGlmICh0aGlzLnByb2plY3RzTGlzdEJ0bi5kYXRhc2V0Lm9wZW4gPT09ICdmYWxzZScpIHtcclxuICAgICAgICB0aGlzLm9wZW5Qcm9qZWN0c0xpc3QoKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgdGhpcy5jbG9zZVByb2plY3RzTGlzdEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuY2xvc2VQcm9qZWN0c0xpc3QpO1xyXG4gICAgdGhpcy5nb1RvUHJvamVjdCA9IHRoaXMuZ29Ub1Byb2plY3QuYmluZCh0aGlzKTtcclxuICAgIHRoaXMucHJvamVjdHNMaXN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5nb1RvUHJvamVjdCk7XHJcbiAgICAvKioqKioqKioqKioqKioqKioqKioqIFVwbG9hZCBwcm9qZWN0IGZvcm0gKioqKioqKioqKioqKioqKioqKioqL1xyXG4gICAgdGhpcy51cGxvYWRGaWxlRm9ybSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1cGxvYWRGaWxlRm9ybScpO1xyXG4gICAgdGhpcy5maWxlSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmlsZUlucHV0JykgYXMgSFRNTElucHV0RWxlbWVudDtcclxuICAgIHRoaXMuc3VibWl0RmlsZUJ0biA9IHRoaXMudXBsb2FkRmlsZUZvcm0ucXVlcnlTZWxlY3RvcignYnV0dG9uW3R5cGU9XCJzdWJtaXRcIl0nKTtcclxuICAgIC8vIFNob3cgdGhlIHVwbG9hZCBwcm9qZWN0IGZvcm0uXHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbmV3UHJvamVjdEJ0bicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICB0aGlzLnNob3dNb2RhbERpYWxvZyh0aGlzLnVwbG9hZEZpbGVGb3JtKTtcclxuICAgICAgdGhpcy5tb2RhbERpYWxvZ0NvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdncmF5VHJhbnNsdWNlbnQnKTtcclxuICAgIH0pO1xyXG4gICAgLy8gSGlkZSB0aGUgdXBsb2FkIHByb2plY3QgZm9ybS5cclxuICAgIC8vIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjbG9zZVVwbG9hZEZvcm0nKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgIC8vICAgdGhpcy5jbG9zZU1vZGFsRGlhbG9nKHRoaXMudXBsb2FkRmlsZUZvcm0pO1xyXG4gICAgLy8gICB0aGlzLm1vZGFsRGlhbG9nQ29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoJ2dyYXlUcmFuc2x1Y2VudCcpO1xyXG4gICAgLy8gfSk7XHJcbiAgICAvLyBMaXN0ZW4gdG8gZmlsZSBpbnB1dCBjaGFuZ2VzLlxyXG4gICAgdGhpcy5maWxlSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKCkgPT4ge1xyXG4gICAgICBpZiAodGhpcy5maWxlSW5wdXQuZmlsZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIHRoaXMuZmlsZUlucHV0Lm5leHRFbGVtZW50U2libGluZy5pbm5lckhUTUwgPSB0aGlzLmZpbGVJbnB1dC5maWxlc1swXS5uYW1lO1xyXG4gICAgICAgIHRoaXMuc3VibWl0RmlsZUJ0bi5jbGFzc0xpc3QucmVtb3ZlKCdkaXNhYmxlZCcpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMuZmlsZUlucHV0Lm5leHRFbGVtZW50U2libGluZy5pbm5lckhUTUwgPSAnQ2hvb3NlIGEgZmlsZSc7XHJcbiAgICAgICAgdGhpcy5zdWJtaXRGaWxlQnRuLmNsYXNzTGlzdC5hZGQoJ2Rpc2FibGVkJyk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgLy8gU3VibWl0IGZpbGUgbG9naWMuXHJcbiAgICB0aGlzLnVwbG9hZEZpbGVGb3JtLm9uc3VibWl0ID0gZSA9PiB7XHJcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgLy8gU2V0IGxvYWRpbmcgc3RhdGUgb24gVUkuXHJcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2FkaW5nRmlsZScpLnN0eWxlLmRpc3BsYXkgPSAndW5zZXQnO1xyXG4gICAgICB0aGlzLnN1Ym1pdEZpbGVCdG4uY2xhc3NMaXN0LmFkZCgnZGlzYWJsZWQnKTtcclxuICAgICAgdGhpcy5zdWJtaXRGaWxlQnRuLmlubmVySFRNTCA9ICdVcGxvYWRpbmcgZmlsZSc7XHJcbiAgICAgICh0aGlzLmZpbGVJbnB1dC5uZXh0RWxlbWVudFNpYmxpbmcgYXMgSFRNTEVsZW1lbnQpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICAgIGNvbnN0IGZpbGUgPSAoKGUudGFyZ2V0IGFzIEhUTUxGb3JtRWxlbWVudCkuZWxlbWVudHMubmFtZWRJdGVtKFwiZmlsZVwiKSBhcyBIVE1MSW5wdXRFbGVtZW50KS5maWxlc1swXTtcclxuICAgICAgLy8gVE9ETzogU2hvdyBzb21lIHJlYWwgcHJvZ3Jlc3Mgd2hpbGUgY3JlYXRpbmcgdGhlIHByb2plY3QuXHJcbiAgICAgIEFQSS5jcmVhdGVQcm9qZWN0KGZpbGUsIHRoaXMsIHRoaXMubGFzdFVwbG9hZGVkUHJvamVjdCkudGhlbigocmVzOiBQcm9qZWN0RGF0YSkgPT4ge1xyXG4gICAgICAgIHRoaXMudXBkYXRlUHJvamVjdHNMaXN0KHJlcyk7XHJcbiAgICAgICAgdGhpcy5jbG9zZU1vZGFsRGlhbG9nKCk7XHJcbiAgICAgICAgdGhpcy5zaG93TWVzc2FnZSgnc3VjY2VzcycsICdQcm9qZWN0IHVwbG9hZGVkIHN1Y2Nlc3NmdWxseS4nKTtcclxuICAgICAgICB0aGlzLmZpbGVJbnB1dC52YWx1ZSA9ICcnO1xyXG4gICAgICAgIC8vIFJlc2V0IHVwbG9hZCBmb3JtIFVJLlxyXG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2FkaW5nRmlsZScpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICAgICAgdGhpcy5maWxlSW5wdXQubmV4dEVsZW1lbnRTaWJsaW5nLmlubmVySFRNTCA9ICdDaG9vc2UgYSBmaWxlJztcclxuICAgICAgICB0aGlzLnN1Ym1pdEZpbGVCdG4uaW5uZXJIVE1MID0gJ1VwbG9hZCc7XHJcbiAgICAgICAgKHRoaXMuZmlsZUlucHV0Lm5leHRFbGVtZW50U2libGluZyBhcyBIVE1MRWxlbWVudCkuc3R5bGUuZGlzcGxheSA9ICd1bnNldCc7XHJcbiAgICAgIH0sIGVyciA9PiB7XHJcbiAgICAgICAgdGhpcy5jbG9zZU1vZGFsRGlhbG9nKCk7XHJcbiAgICAgICAgdGhpcy51cGRhdGVQcm9qZWN0c0xpc3QodGhpcy5sYXN0VXBsb2FkZWRQcm9qZWN0KTtcclxuICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgLyoqKioqKioqKioqKioqKioqKioqIFJlbmFtZSBwcm9qZWN0IGZvcm0gKioqKioqKioqKioqKioqKioqKioqL1xyXG4gICAgdGhpcy5yZW5hbWVQcm9qZWN0RGlhbG9nID0gbmV3IFJlbmFtZVByb2plY3QoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JlbmFtZVByb2plY3RGb3JtJyksIHRoaXMpO1xyXG4gICAgLyoqKioqKioqKioqKioqKioqKioqKiBTaGFyZSBwcm9qZWN0IGZvcm0gKioqKioqKioqKioqKioqKioqKioqL1xyXG4gICAgdGhpcy5zaGFyZVByb2plY3REaWFsb2cgPSBuZXcgU2hhcmVQcm9qZWN0KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaGFyZVByb2plY3REaWFsb2cnKSwgdGhpcyk7XHJcbiAgICAvKioqKioqKioqKioqKioqKioqKioqKiBNZXNzYWdlIGNvbnRhaW5lciAqKioqKioqKioqKioqKioqKioqKioqL1xyXG4gICAgdGhpcy5tZXNzYWdlQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21lc3NhZ2VDb250YWluZXInKTtcclxuICAgIHRoaXMuY2xvc2VNZXNzYWdlID0gdGhpcy5jbG9zZU1lc3NhZ2UuYmluZCh0aGlzKTtcclxuICAgIHRoaXMubWVzc2FnZUNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCdidXR0b24nKS5vbmNsaWNrID0gdGhpcy5jbG9zZU1lc3NhZ2U7XHJcbiAgICAvKioqKioqKioqKioqKioqIFByb2plY3RzIGxpc3QgaXRlbXMgZGlzdHJpYnV0aW9uICoqKioqKioqKioqKioqL1xyXG4gICAgd2luZG93Lm9ucmVzaXplID0gdGhpcy5hZGp1c3RJdGVtcztcclxuICAgIC8qKioqKioqKioqKioqKioqIFRvb2xzIGJ1dHRvbnMgZXZlbnQgbGlzdGVuZXJzICoqKioqKioqKioqKioqKiovXHJcbiAgICAvLyBUT0RPOiBUaGlzIHdvdWxkIG1ha2UgbW9yZSBzZW5zZSBhcyBwYXJ0IG9mIHRoZSB3b3Jrc3BhY2UgP1xyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Rvb2wtNCcpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHRoaXMuY3VycmVudFdvcmtzcGFjZS5tYW5hZ2VUb29scyhlLCBFbGVtZW50RGF0YSwgJ2VsZW1lbnRzRGF0YVRvb2wnKSk7XHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndG9vbC01JykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4gdGhpcy5jdXJyZW50V29ya3NwYWNlLm1hbmFnZVRvb2xzKGUsIEFkZENvbW1lbnQsICdjb21tZW50c1Rvb2wnKSk7XHJcbiAgICAvKioqKioqKioqKioqKioqKioqKiogTm90aWZpY2F0aW9ucyBtYW5hZ2VyICoqKioqKioqKioqKioqKioqKioqL1xyXG4gICAgdGhpcy5ub3RpZmljYXRpb25zTWFuYWdlciA9IG5ldyBOb3RpZmljYXRpb25zTWFuYWdlcigpO1xyXG4gICAgLyoqKioqKioqKioqKioqKioqKioqKioqKiBDb250ZXh0IG1lbnUgKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuICAgIHRoaXMuY29udGV4dE1lbnUgPSBuZXcgQ29udGV4dE1lbnUoKTtcclxuICB9XHJcblxyXG5cclxuICAvKipcclxuICAgKiBTdG9yZXMgdGhlIGN1cnJlbnQgbG9nZ2VkIHVzZXIgaW5mbyBhcyBhIHByb3BlcnR5IG9mIHRoZSBhcHAgYW5kXHJcbiAgICogcG9wdWxhdGVzIHRoZSBVSSB3aXRoIHRoZSB1c2VyIGluZm8uXHJcbiAgICovXHJcbiAgYXN5bmMgc2V0VXNlckluZm8oKSB7XHJcbiAgICBjb25zdCB1c2VySW5mb1JlcyA9IGF3YWl0IEFQSS5nZXRVc2VySW5mbygpO1xyXG4gICAgdGhpcy51c2VySW5mbyA9IEpTT04ucGFyc2UodXNlckluZm9SZXMuYm9keSkudXNlcjtcclxuICAgIHRoaXMudXNlckluZm9Db250YWluZXIuaW5uZXJIVE1MID0gYFxyXG4gICAgICA8aW1nIHNyYz0ke3RoaXMudXNlckluZm8ucGhvdG9MaW5rfT5cclxuICAgICAgPHNwYW4+XHJcbiAgICAgICAgPHNwYW4+JHt0aGlzLnVzZXJJbmZvLmRpc3BsYXlOYW1lfTwvc3Bhbj48c3BhbiBjbGFzcz1cImVtYWlsXCI+JHt0aGlzLnVzZXJJbmZvLmVtYWlsQWRkcmVzc308L3NwYW4+XHJcbiAgICAgIDwvc3Bhbj5gO1xyXG4gIH1cclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIFNhdmVzIHRoZSBjb21tZW50cyBkYXRhIHVzaW5nIHRoZSBjb21tZW50cyBhcnJheSBmcm9tIHRoZSBjdXJyZW50IHdvcmtzcGFjZS5cclxuICAgKiBJdCBhbHNvIG5vdGlmaWVzIHRoZSBtZW50aW9uZWQgY29sbGFib3JhdG9ycyBpbiB0aGUgY29tbWVudHMgaWYgYW55IHdhcyBtZW50aW9uZWQgaW4gbmV3IGNvbW1lbnRzLlxyXG4gICAqIEl0IGNyZWF0ZXMgdGhlIGZpbGUgKGNvbW1lbnRzLmpzb24pIGlmIGl0IHN0aWxsIGRvZXNudCBleGlzdCBvciB1cGRhdGVzIGl0cyBjb250ZW50cyBpZiBpdCBleGlzdHMuXHJcbiAgICovXHJcbiAgYXN5bmMgc2F2ZUNvbW1lbnRzRGF0YSgpIHtcclxuICAgIGlmICh0aGlzLmN1cnJlbnRXb3Jrc3BhY2UgJiYgdGhpcy5jdXJyZW50V29ya3NwYWNlLmNvbW1lbnRzQ2hhbmdlc1Vuc2F2ZWQpIHtcclxuICAgICAgdGhpcy5jb21tZW50c0NoYW5nZXNVbnNhdmVkID0gZmFsc2U7XHJcbiAgICAgIHRoaXMuc2F2ZUJ0bi5jbGFzc0xpc3QucmVtb3ZlKCdlbmFibGVkJyk7XHJcbiAgICAgIHRoaXMuc2F2ZUJ0bi5jbGFzc0xpc3QuYWRkKCdwcm9ncmVzcycpO1xyXG4gICAgICBsZXQgc2F2aW5nU3VjY2Vzc2Z1bDtcclxuICAgICAgLy8gQ29sbGVjdCB0aGUgZGF0YSB0byBzYXZlIGluIGJhY2tlbmQuXHJcbiAgICAgIGNvbnN0IGRhdGFUb1NhdmU6IE9iamVjdFtdID0gW107XHJcbiAgICAgIHRoaXMuY3VycmVudFdvcmtzcGFjZS5jb21tZW50cy5mb3JFYWNoKGNvbW1lbnQgPT4ge1xyXG4gICAgICAgIGRhdGFUb1NhdmUucHVzaCh7XHJcbiAgICAgICAgICBlbGVtZW50c0lkczogY29tbWVudC5lbGVtZW50c0lkcyxcclxuICAgICAgICAgIGNvbnRlbnQ6IGNvbW1lbnQuY29udGVudCxcclxuICAgICAgICAgIG1lbnRpb25zOiBjb21tZW50Lm1lbnRpb25zXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0pO1xyXG4gICAgICBjb25zdCBqc29uRGF0YVRvU2F2ZSA9IEpTT04uc3RyaW5naWZ5KGRhdGFUb1NhdmUpO1xyXG4gICAgICAvLyBJZiB0aGVyZSBpcyBubyBpZCBmb3IgdGhlIGNvbW1lbnRzLmpzb24gZmlsZSBjcmVhdGUgdGhlIGZpbGUgd2l0aCB0aGUgY29udGVudHMgYW5kIGdldCB0aGUgaWQgb2YgaXQuXHJcbiAgICAgIGlmICghdGhpcy5jdXJyZW50V29ya3NwYWNlLmNvbW1lbnRzRmlsZUlkKSB7XHJcbiAgICAgICAgY29uc3QgY29tbWVudHNGaWxlQ3JlYXRpb25SZXMgPSBhd2FpdCBBUEkudXBsb2FkRmlsZShqc29uRGF0YVRvU2F2ZSwgJ2FwcGxpY2F0aW9uL2pzb24nLCAnY29tbWVudHMuanNvbicsIHRoaXMuY3VycmVudFdvcmtzcGFjZS5wcm9qZWN0SWQpO1xyXG4gICAgICAgIGlmIChjb21tZW50c0ZpbGVDcmVhdGlvblJlcy5vayAmJiBjb21tZW50c0ZpbGVDcmVhdGlvblJlcy5zdGF0dXMgPT09IDIwMCkge1xyXG4gICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgZGVjb2RlciA9IG5ldyBUZXh0RGVjb2RlcigndXRmLTgnKTtcclxuICAgICAgICAgICAgbGV0IHsgdmFsdWUsIGRvbmUgfSA9IGF3YWl0IGNvbW1lbnRzRmlsZUNyZWF0aW9uUmVzLmJvZHkuZ2V0UmVhZGVyKCkucmVhZCgpO1xyXG4gICAgICAgICAgICBjb25zdCBpZCA9IEpTT04ucGFyc2UoZGVjb2Rlci5kZWNvZGUodmFsdWUpKS5pZDtcclxuICAgICAgICAgICAgLy8gU2V0IHRoZSBpZCBvZiB0aGUgY29tbWVudHMuanNvbiBmaWxlIHRoYXQgaGFzIGJlZW4gY3JlYXRlZC5cclxuICAgICAgICAgICAgdGhpcy5jdXJyZW50V29ya3NwYWNlLmNvbW1lbnRzRmlsZUlkID0gaWQ7XHJcbiAgICAgICAgICAgIHNhdmluZ1N1Y2Nlc3NmdWwgPSB0cnVlO1xyXG4gICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdFcnJvciBkZWNvZGluZyB0aGUgbmV3IGNvbW1lbnRzLmpzb24gZmlsZSBpZDogJywgZXJyKTsgLy8gSlNPTi5wYXJzZShlcnIuYm9keSkuZXJyb3IubWVzc2FnZVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBzYXZpbmdTdWNjZXNzZnVsID0gZmFsc2U7XHJcbiAgICAgICAgICAvLyBUT0RPOiBEZWxldGUgZXhpc3RpbmcgY3JlYXRlZCBmaWxlL3Mgd2l0aCBuYW1lICdjb21tZW50cy5qc29uJywgaWYgdGhlcmUgaXMgbm8gaWQgdGhlbiB1c2UgdGhlIG5hbWU/XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vIFVwZGF0ZSB0aGUgZXhpc3RpbmcgY29tbWVudHMuanNvbiBmaWxlLlxyXG4gICAgICAgIGNvbnN0IGNvbW1lbnRzRmlsZVVwZGF0ZVJlcyA9IGF3YWl0IEFQSS51cGRhdGVGaWxlQ29udGVudChqc29uRGF0YVRvU2F2ZSwgJ2FwcGxpY2F0aW9uL2pzb24nLCB0aGlzLmN1cnJlbnRXb3Jrc3BhY2UuY29tbWVudHNGaWxlSWQpO1xyXG4gICAgICAgIGlmIChjb21tZW50c0ZpbGVVcGRhdGVSZXMub2sgJiYgY29tbWVudHNGaWxlVXBkYXRlUmVzLnN0YXR1cyA9PT0gMjAwKSB7XHJcbiAgICAgICAgICBzYXZpbmdTdWNjZXNzZnVsID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgLy8gSWYgc2F2aW5nU3VjY2Vzc2Z1bCBwcm9jZWVkIHdpdGggdGhlIG5vdGlmaWNhdGlvbnMgaWYgYW55LlxyXG4gICAgICBpZiAoc2F2aW5nU3VjY2Vzc2Z1bCAmJiB0aGlzLmN1cnJlbnRXb3Jrc3BhY2UucGVuZGluZ05vdGlmaWNhdGlvbnNUb1NlbmQubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIGNvbnN0IG5vdGlmaWNhdGlvbnNQcm9taXNlczogUHJvbWlzZTxSZXNwb25zZT5bXSA9IFtdO1xyXG4gICAgICAgIHRoaXMuY3VycmVudFdvcmtzcGFjZS5wZW5kaW5nTm90aWZpY2F0aW9uc1RvU2VuZC5mb3JFYWNoKChuOiBhbnkpID0+IHsgLy8gVE9ETyBjaGFuZ2UgYW55XHJcbiAgICAgICAgICBjb25zdCBub3RpZmljYXRpb25Qcm9taXNlID0gQVBJLnNlbmROb3RpZmljYXRpb24obi5lbWFpbHMsIG4udXNlck5hbWUsIG4udXNlclBob3RvLCBuLnRleHRDb250ZW50LCBuLnByb2plY3ROYW1lLCBuLnByb2plY3RJZCk7XHJcbiAgICAgICAgICBub3RpZmljYXRpb25zUHJvbWlzZXMucHVzaChub3RpZmljYXRpb25Qcm9taXNlKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChub3RpZmljYXRpb25zUHJvbWlzZXMpLnRoZW4ocmVzcG9uc2VzID0+IHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKCdVc2VycyBub3RpZmllZCBzdWNjZXNzZnVsbHknKTtcclxuICAgICAgICAgIHRoaXMuY3VycmVudFdvcmtzcGFjZS5wZW5kaW5nTm90aWZpY2F0aW9uc1RvU2VuZC5sZW5ndGggPSAwO1xyXG4gICAgICAgICAgLy8gcmVzcG9uc2VzLmZvckVhY2gocmVzID0+IGNvbnNvbGUubG9nKHJlcykpO1xyXG4gICAgICAgIH0sIGVyciA9PiB7XHJcbiAgICAgICAgICBjb25zb2xlLndhcm4oJ1VzZXJzIGNvdWxkblxcJ3QgYmUgbm90aWZpZWQuICcsIGVycik7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHNhdmluZ1N1Y2Nlc3NmdWwpIHtcclxuICAgICAgICB0aGlzLnNhdmVCdG4uY2xhc3NMaXN0LnJlbW92ZSgncHJvZ3Jlc3MnKTtcclxuICAgICAgICB0aGlzLnNhdmVCdG4uY2xhc3NMaXN0LmFkZCgnZGlzYWJsZWQnKTtcclxuICAgICAgICBjb25zb2xlLmxvZygnRGF0YSBzYXZlZCBzdWNjZXNzZnVsbHkuJyk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5jb21tZW50c0NoYW5nZXNVbnNhdmVkID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLnNhdmVCdG4uY2xhc3NMaXN0LnJlbW92ZSgncHJvZ3Jlc3MnKTtcclxuICAgICAgICB0aGlzLnNhdmVCdG4uY2xhc3NMaXN0LmFkZCgnZW5hYmxlZCcpO1xyXG4gICAgICAgIHRoaXMuc2hvd01lc3NhZ2UoJ2Vycm9yJywgJ1NvbWV0aGluZyB3ZW50IHdyb25nIGFuZCBkYXRhIGNvdWxkIG5vdCBiZSBzYXZlZC4nKTtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdTb21ldGhpbmcgd2VudCB3cm9uZyB0cnlpbmcgdG8gc2F2ZS4gUmV0cnkgYWdhaW4uJyk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG5cclxuICAvKioqKioqKioqKioqKioqKioqKioqKioqIFRIRSBQUk9KRUNUUyBMSVNUICoqKioqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbiAgLyoqXHJcbiAgICogU2VsZWN0cyBhIHByb2plY3QgZnJvbSB0aGUgbGlzdCBhbmQgbWFuYWdlcyBpdHMgcmVzb3VyY2VzIGJlZm9yZSBvcGVuaW5nIHRoZSBwcm9qZWN0LlxyXG4gICAqIEBwYXJhbSBlIE1vdXNlIGNsaWNrIGV2ZW50LlxyXG4gICAqL1xyXG4gIGdvVG9Qcm9qZWN0KGU6IE1vdXNlRXZlbnQpIHtcclxuICAgIGNvbnN0IHByb2plY3RJdGVtID0gKGUudGFyZ2V0IGFzIEhUTUxFbGVtZW50KS5jbG9zZXN0KCdbZGF0YS1wcm9qLWlkXScpIGFzIEhUTUxFbGVtZW50O1xyXG4gICAgaWYgKHByb2plY3RJdGVtID09PSBudWxsKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIC8vIElmIGl0IGlzIHRoZSBjdXJyZW50IHByb2plY3QgY2xvc2UgdGhlIGxpc3Qgd2luZG93LlxyXG4gICAgaWYgKHRoaXMuY3VycmVudFdvcmtzcGFjZSAmJiB0aGlzLmN1cnJlbnRXb3Jrc3BhY2UucHJvamVjdElkID09PSBwcm9qZWN0SXRlbS5kYXRhc2V0LnByb2pJZCkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICAvLyBUT0RPOiBJZiB0aGVyZSBoYXZlIGJlZW4gY2hhbmdlcyBpbiB0aGUgcHJvamVjdCBhc2sgdG8gc2F2ZSBvciBkaXNjYXJkIHRoZW0gYmVmb3JlIGNsb3NpbmcgaXQuXHJcbiAgICAvLyBUT0RPOiBJZiBpdCB3YXMgYW4gb2ZmbGluZSBwcm9qZWN0IHRyeSB0byBzeW5jIGl0IGJlZm9yZSBjbG9zaW5nIGl0LiBUaGUgaWQgd291bGQgYmUgJ3RlbXBvcmFsJyBhbmQgdGhlIGNvbnRlbnRzIGluIGN1cnJlbnRQcm9qZWN0XHJcbiAgICBpZiAodGhpcy5sYXN0VXBsb2FkZWRQcm9qZWN0ICYmIHByb2plY3RJdGVtLmRhdGFzZXQucHJvaklkID09PSB0aGlzLmxhc3RVcGxvYWRlZFByb2plY3QuaWQpIHtcclxuICAgICAgaWYgKHRoaXMubGFzdFVwbG9hZGVkUHJvamVjdC5pZCA9PT0gJ3RlbXBvcmFsJykge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdTaG93IGEgbWVzc2FnZSBpbmRpY2F0aW5nIHRoYXQgdGhlIHByb2plY3QgY2FuIGJlIGFjY2Vzc2VkIGJ1dCBpbiB2aWV3ZXIgbW9kZSBiZWNhdXNlIGl0IGNvdWxkbnQgYmUgc2F2ZWQuJyk7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5vcGVuUHJvamVjdCh0aGlzLmxhc3RVcGxvYWRlZFByb2plY3QpO1xyXG4gICAgICBpZiAodGhpcy5wcmV2aW91c0FjdGl2ZUl0ZW0pIHtcclxuICAgICAgICB0aGlzLnByZXZpb3VzQWN0aXZlSXRlbS5jbGFzc0xpc3QucmVtb3ZlKCdjdXJyZW50Jyk7XHJcbiAgICAgIH1cclxuICAgICAgcHJvamVjdEl0ZW0uY2xhc3NMaXN0LmFkZCgnY3VycmVudCcpO1xyXG4gICAgICB0aGlzLnByZXZpb3VzQWN0aXZlSXRlbSA9IHByb2plY3RJdGVtO1xyXG4gICAgICB0aGlzLnByb2plY3RzTGlzdEJ0bi5zdHlsZS5kaXNwbGF5ID0gJ3Vuc2V0JztcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuc2hvd1ZpZXdwb3J0RGlhbG9nKCdsb2FkZXInLCBgTG9hZGluZyBwcm9qZWN0ICR7cHJvamVjdEl0ZW0uZGF0YXNldC5uYW1lfWApO1xyXG4gICAgICBBUEkuZmV0Y2hQcm9qZWN0KHByb2plY3RJdGVtLmRhdGFzZXQucHJvaklkLCB0aGlzKVxyXG4gICAgICAgIC50aGVuKHJlcyA9PiB7XHJcbiAgICAgICAgICB0aGlzLm9wZW5Qcm9qZWN0KHJlcyk7XHJcbiAgICAgICAgICBpZiAodGhpcy5wcmV2aW91c0FjdGl2ZUl0ZW0pIHtcclxuICAgICAgICAgICAgdGhpcy5wcmV2aW91c0FjdGl2ZUl0ZW0uY2xhc3NMaXN0LnJlbW92ZSgnY3VycmVudCcpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgcHJvamVjdEl0ZW0uY2xhc3NMaXN0LmFkZCgnY3VycmVudCcpO1xyXG4gICAgICAgICAgdGhpcy5wcmV2aW91c0FjdGl2ZUl0ZW0gPSBwcm9qZWN0SXRlbTtcclxuICAgICAgICAgIHRoaXMucHJvamVjdHNMaXN0QnRuLnN0eWxlLmRpc3BsYXkgPSAndW5zZXQnO1xyXG4gICAgICAgICAgdGhpcy5oaWRlVmlld3BvcnRNZXNzYWdlKCk7XHJcbiAgICAgICAgfSwgZXJyID0+IHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBDcmVhdGVzIGEgd29ya3NwYWNlIHdpdGggdGhlIHByb3ZpZGVkIHByb2plY3QuXHJcbiAgICovXHJcbiAgb3BlblByb2plY3QocHJvamVjdDogUHJvamVjdERhdGEpIHtcclxuICAgIGlmICh0aGlzLmN1cnJlbnRXb3Jrc3BhY2UpIHtcclxuICAgICAgdGhpcy5jdXJyZW50V29ya3NwYWNlLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgICB0aGlzLmN1cnJlbnRXb3Jrc3BhY2UgPSBuZXcgV29ya3NwYWNlKHByb2plY3QsIHRoaXMpO1xyXG4gICAgdGhpcy5wcm9qZWN0c0xpc3RDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgIGhpc3RvcnkucmVwbGFjZVN0YXRlKHsgcHJvamVjdFRpdGxlOiBwcm9qZWN0Lm5hbWUgfSwgcHJvamVjdC5uYW1lLCBcIj9pZD1cIiArIHByb2plY3QuaWQpOyAvLyBlbmNvZGVVUklDb21wb25lbnQgPyB1c2UgcHVzaFN0YXRlKCkgP1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ2xvc2VzIHRoZSBwcm9qZWN0cyBsaXN0IGFuZCBzaG93cyB0aGUgY3VycmVudCBwcm9qZWN0IHRvb2xiYXIuXHJcbiAgICogU2V0cyB0aGUgc3RhdGUgb2YgdGhlIHVpIGFzIHByb2plY3RzIGxpc3QgY2xvc2VkLlxyXG4gICAqL1xyXG4gIGNsb3NlUHJvamVjdHNMaXN0KCkge1xyXG4gICAgdGhpcy5wcm9qZWN0c0xpc3RDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgIHRoaXMuZHJhd2luZ3NCdG5zLnN0eWxlLmRpc3BsYXkgPSAndW5zZXQnO1xyXG4gICAgdGhpcy50b29sYmFyc0NvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xyXG4gICAgdGhpcy5wcm9qZWN0c0xpc3RCdG4uZGF0YXNldC5vcGVuID0gJ2ZhbHNlJztcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIE9wZW5zIHRoZSBsaXN0IG9mIHByb2plY3RzIGNvbnRhaW5lciBhbmQgZmV0Y2hlcyBwcm9qZWN0cyBpZiByZXF1aXJlZC5cclxuICAgKiBTZXRzIHRoZSBzdGF0ZSBvZiB0aGUgdWkgYXMgcHJvamVjdHMgbGlzdCBjbG9zZWQuXHJcbiAgICovXHJcbiAgb3BlblByb2plY3RzTGlzdCgpIHtcclxuICAgIGlmICh0aGlzLmN1cnJlbnRXb3Jrc3BhY2UgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICB0aGlzLmNsb3NlUHJvamVjdHNMaXN0QnRuLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5jbG9zZVByb2plY3RzTGlzdEJ0bi5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcclxuICAgIH1cclxuICAgIHRoaXMucHJvamVjdHNMaXN0Q29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xyXG4gICAgdGhpcy5wcm9qZWN0c0xpc3RCdG4uZGF0YXNldC5vcGVuID0gJ3RydWUnO1xyXG4gICAgLy8gSGlkZSB0aGUgZHJhd2luZ3MgYW5kIHRvb2xzIGJ1dHRvbnNcclxuICAgIHRoaXMuZHJhd2luZ3NCdG5zLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICB0aGlzLnRvb2xiYXJzQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICAvLyBJZiB0aGVyZSBpcyBubyBwcm9qZWN0c0RhdGEgb3IgaWYgdGhlcmUgaXMgb25seSBvbmUgZmV0Y2ggcHJvamVjdHMuXHJcbiAgICBpZiAodGhpcy5wcm9qZWN0c0RhdGEgPT09IHVuZGVmaW5lZCB8fCB0aGlzLnByb2plY3RzRGF0YS5sZW5ndGggPD0gMSkge1xyXG4gICAgICB0aGlzLnNob3dWaWV3cG9ydERpYWxvZygnbG9hZGVyJywgJ0xvYWRpbmcgcHJvamVjdHMnKTtcclxuICAgICAgQVBJLmxpc3RQcm9qZWN0SXRlbXModGhpcykudGhlbigocmVzOiBQcm9qZWN0RGF0YVtdKSA9PiB7XHJcbiAgICAgICAgdGhpcy5jcmVhdGVIVE1MUHJvamVjdHNMaXN0KHJlcyk7XHJcbiAgICAgICAgLy8gU2V0IHRoZSAnY3VycmVudCcgY2xhc3MgaW4gdGhlIGN1cnJlbnQgcHJvamVjdC5cclxuICAgICAgICB0aGlzLnByb2plY3RzTGlzdC5jaGlsZE5vZGVzLmZvckVhY2goKHByb2o6IEhUTUxFbGVtZW50KSA9PiB7XHJcbiAgICAgICAgICBpZiAocHJvai5kYXRhc2V0ICYmIHByb2ouZGF0YXNldC5wcm9qSWQgPT09IHRoaXMuY3VycmVudFdvcmtzcGFjZS5wcm9qZWN0SWQpIHtcclxuICAgICAgICAgICAgcHJvai5jbGFzc0xpc3QuYWRkKCdjdXJyZW50Jyk7XHJcbiAgICAgICAgICAgIHRoaXMucHJldmlvdXNBY3RpdmVJdGVtID0gcHJvajtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmhpZGVWaWV3cG9ydE1lc3NhZ2UoKTtcclxuICAgICAgfSwgcmVqID0+IHtcclxuICAgICAgICB0aGlzLnByb2plY3RzTGlzdC5pbm5lckhUTUwgPSAnPHAgY2xhc3M9XCJlbXB0eS1tc2dcIj5UaGVyZSBhcmUgbm8gcHJvamVjdHMuIFVwbG9hZCBvbmUhPC9wPic7XHJcbiAgICAgICAgdGhpcy5oaWRlVmlld3BvcnRNZXNzYWdlKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogUmVjZWl2ZXMgYW4gYXJyYXkgb2YgcHJvamVjdHMgZGF0YSBhbmQgY3JlYXRlcyBhbmQgYXBwZW5kcyB0aGUgSFRNTCBpdGVtcy5cclxuICAgKi9cclxuICBjcmVhdGVIVE1MUHJvamVjdHNMaXN0KHByb2plY3RzRGF0YTogUHJvamVjdERhdGFbXSkge1xyXG4gICAgcHJvamVjdHNEYXRhLmZvckVhY2gocHJvakRhdGEgPT4ge1xyXG4gICAgICBjb25zdCBwcm9qZWN0SXRlbSA9IG5ldyBQcm9qZWN0SXRlbShwcm9qRGF0YSwgdGhpcyk7XHJcbiAgICAgIHRoaXMucHJvamVjdHNMaXN0LmFwcGVuZENoaWxkKHByb2plY3RJdGVtLkhUTUxDb250YWluZXIpO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLmFkanVzdEl0ZW1zKCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBBZGp1c3RzIHRoZSBwb3NpdGlvbiBvZiBwcm9qZWN0IGl0ZW1zIGluIHRoZSBjb250YWluZXIuXHJcbiAgICovXHJcbiAgYWRqdXN0SXRlbXMoKSB7XHJcbiAgICBjb25zdCBpdGVtc0ggPSBOdW1iZXIoZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLnByb2plY3RzTGlzdCkuZ2V0UHJvcGVydHlWYWx1ZSgnLS1pdGVtcy1oJykpO1xyXG4gICAgY29uc3QgaXRlbXNUb3RhbCA9IHRoaXMucHJvamVjdHNMaXN0LmNoaWxkcmVuLmxlbmd0aDtcclxuICAgIHRoaXMucHJvamVjdHNMaXN0LnN0eWxlLnNldFByb3BlcnR5KCctLXJlbWFpbmluZy1pdGVtcycsICgoTWF0aC5jZWlsKGl0ZW1zVG90YWwgLyBpdGVtc0gpICogaXRlbXNIKSAtIGl0ZW1zVG90YWwpLnRvU3RyaW5nKCkpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogIEFkZHMgYSBuZXcgSFRNTCBlbGVtZW50IGl0ZW0gdG8gdGhlIGxpc3Qgb2YgcHJvamVjdHMuXHJcbiAgICovXHJcbiAgdXBkYXRlUHJvamVjdHNMaXN0KHByb2pEYXRhOiBQcm9qZWN0RGF0YSkge1xyXG4gICAgLy8gUmVtb3ZlIHRoZSAnbm8gcHJvamVjdHMgeWV0JyBtZXNzYWdlIGlmIGl0IGlzIHRoZSBmaXJzdC5cclxuICAgIGlmICh0aGlzLnByb2plY3RzRGF0YS5sZW5ndGggPD0gMSkge1xyXG4gICAgICB0aGlzLnByb2plY3RzTGlzdC5xdWVyeVNlbGVjdG9yKCcuZW1wdHktbXNnJykucmVtb3ZlKCk7XHJcbiAgICB9XHJcbiAgICBjb25zdCBwcm9qZWN0SXRlbSA9IG5ldyBQcm9qZWN0SXRlbShwcm9qRGF0YSwgdGhpcyk7XHJcbiAgICB0aGlzLnByb2plY3RzTGlzdC5wcmVwZW5kKHByb2plY3RJdGVtLkhUTUxDb250YWluZXIpO1xyXG4gICAgdGhpcy5hZGp1c3RJdGVtcygpO1xyXG4gIH1cclxuXHJcblxyXG4gIC8qKioqKioqKioqKioqKioqKioqKioqKiBNRVNTQUdFIENPTlRBSU5FUiAqKioqKioqKioqKioqKioqKioqKioqKi9cclxuICAvKlxyXG4gICAqIEEgbWVzc2FnZSB0aGF0IHdvcmtzIGFzIGEgZmVlZGJhY2sgYW5kIHRoYXQgZG9lc250IGludGVycnVwdC5cclxuICAgKi9cclxuXHJcbiAgLyoqXHJcbiAgKiBEaXNhcGxheXMgZmVlZGJhY2sgbWVzc2FnZS5cclxuICAqIEBwYXJhbSB0eXBlIFVzZSBrZXl3b3JkcyAnc3VjY2VzcycsICd3YXJuaW5nJyBvciAnZXJyb3InIHRvIHNwZWNpZnkgdGhlIHR5cGUgb2YgbWVzc2FnZS5cclxuICAqIEBwYXJhbSBtZXNzYWdlIFRoZSBhY3R1YWwgbWVzc2FnZS5cclxuICAqIEBwYXJhbSB0aW1lciBPcHRpb25hbC4gVGltZSAobXMpIGJlZm9yZSBpdCBhdXRvY2xvc2VzLlxyXG4gICovXHJcbiAgc2hvd01lc3NhZ2UodHlwZTogc3RyaW5nLCBtZXNzYWdlOiBzdHJpbmcsIHRpbWVyOiBudW1iZXIgPSB1bmRlZmluZWQpIHtcclxuICAgIC8vIElmIHRoZSBkYXRhLXR5cGUgYXR0ciBoYXMgdmFsdWUgaXMgYmVjYXVzZSB0aGUgbWVzc2FnZSBpcyBzdGlsbCBvcGVuLlxyXG4gICAgaWYgKHRoaXMubWVzc2FnZUNvbnRhaW5lci5kYXRhc2V0LnR5cGUgIT09ICcnKSB7XHJcbiAgICAgIHRoaXMubWVzc2FnZUNvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKHRoaXMubWVzc2FnZUNvbnRhaW5lci5kYXRhc2V0LnR5cGUpO1xyXG4gICAgICBpZiAodGhpcy5tZXNzYWdlVGltZXJJZCkge1xyXG4gICAgICAgIHdpbmRvdy5jbGVhclRpbWVvdXQodGhpcy5tZXNzYWdlVGltZXJJZCk7XHJcbiAgICAgICAgdGhpcy5tZXNzYWdlVGltZXJJZCA9IHVuZGVmaW5lZDtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5tZXNzYWdlQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7XHJcbiAgICB9XHJcbiAgICB0aGlzLm1lc3NhZ2VDb250YWluZXIuZGF0YXNldC50eXBlID0gdHlwZTtcclxuICAgIHRoaXMubWVzc2FnZUNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCdwJykuaW5uZXJUZXh0ID0gbWVzc2FnZTtcclxuICAgIHN3aXRjaCAodHlwZSkge1xyXG4gICAgICBjYXNlICdzdWNjZXNzJzpcclxuICAgICAgICB0aGlzLm1lc3NhZ2VDb250YWluZXIuY2xhc3NMaXN0LmFkZCgnc3VjY2VzcycpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlICd3YXJuaW5nJzpcclxuICAgICAgICB0aGlzLm1lc3NhZ2VDb250YWluZXIuY2xhc3NMaXN0LmFkZCgnd2FybmluZycpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlICdlcnJvcic6XHJcbiAgICAgICAgdGhpcy5tZXNzYWdlQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ2Vycm9yJyk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICB9XHJcbiAgICBpZiAodGltZXIpIHtcclxuICAgICAgdGhpcy5tZXNzYWdlVGltZXJJZCA9IHdpbmRvdy5zZXRUaW1lb3V0KCgpID0+IHRoaXMuY2xvc2VNZXNzYWdlKCksIHRpbWVyKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIENsb3NlcyB0aGUgbWVzc2FnZSBjb250YWluZXIgYW5kIHJlbW92ZXMgdGhlIGNsYXNzIHRoYXQgZ2l2ZXMgdGhlIHR5cGUgb2YgbWVzc2FnZSBzdHlsZS5cclxuICAgKi9cclxuICBjbG9zZU1lc3NhZ2UoKSB7XHJcbiAgICB0aGlzLm1lc3NhZ2VDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgIHRoaXMubWVzc2FnZUNvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKHRoaXMubWVzc2FnZUNvbnRhaW5lci5kYXRhc2V0LnR5cGUpO1xyXG4gICAgdGhpcy5tZXNzYWdlQ29udGFpbmVyLmRhdGFzZXQudHlwZSA9ICcnO1xyXG4gICAgaWYgKHRoaXMubWVzc2FnZVRpbWVySWQpIHtcclxuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMubWVzc2FnZVRpbWVySWQpO1xyXG4gICAgICB0aGlzLm1lc3NhZ2VUaW1lcklkID0gdW5kZWZpbmVkO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcblxyXG4gIC8qKioqKioqKioqKioqKioqKioqKioqKiBWSUVXUE9SVCBNRVNTQUdFUyAqKioqKioqKioqKioqKioqKioqKioqKi9cclxuICAvKlxyXG4gICAqIEEgbWVzc2FnZSBvbiB0aGUgbWlkZGxlIG9mIHRoZSB2aWV3cG9ydCB0aGF0IGludGVycnVwdHMuXHJcbiAgICovXHJcblxyXG4gIC8qKlxyXG4gICAqIE1hbmFnZXMgdGhlIGNyZWF0aW9uIG9mIGEgbWVzc2FnZSBvbiB0aGUgdmlld3BvcnQuXHJcbiAgICogQHBhcmFtIHR5cGUgSWYgYWN0aW9uIGFuIG9iamVjdCB3aXRoIGEgZnVuY3Rpb24gcmVmZXJlbmNlIGFuZCBhIG5hbWUgc2hvdWxkIGJlIHByb3ZpZGVkLlxyXG4gICAqIEBwYXJhbSBtZXNzYWdlIFxyXG4gICAqIEBwYXJhbSBhY3Rpb25zIEFycmF5IG9mIG9iamVjdHMgd2l0aCBuYW1lIGFuZCBmdW5jdGlvbiBlbnRyaWVzLlxyXG4gICAqL1xyXG4gIHNob3dWaWV3cG9ydERpYWxvZyh0eXBlOiAnbG9hZGVyJyB8ICdtZXNzYWdlJyB8ICdhY3Rpb24nLCBtZXNzYWdlOiBzdHJpbmcsIGFjdGlvbnM6IGFueVtdID0gW10pIHsgLy8gVE9ETyBzZXQgdGhlIGFueSBhcnJheSB0eXBlXHJcbiAgICBpZiAodGhpcy52aWV3cG9ydE1lc3NhZ2UucXVlcnlTZWxlY3RvcignLmJ0bnMtY29udGFpbmVyJykpIHtcclxuICAgICAgdGhpcy52aWV3cG9ydE1lc3NhZ2UucXVlcnlTZWxlY3RvckFsbCgnLmJ0bnMtY29udGFpbmVyID4gYnV0dG9uJykuZm9yRWFjaCgoYnRuOiBIVE1MRWxlbWVudCkgPT4gYnRuLm9uY2xpY2sgPSBudWxsKTtcclxuICAgIH1cclxuICAgIEdlbmVyaWNzLmVtcHR5Tm9kZSh0aGlzLnZpZXdwb3J0TWVzc2FnZSk7XHJcbiAgICAvLyBDcmVhdGUgdGhlIG5ldyBjb250ZW50LlxyXG4gICAgY29uc3QgaW5uZXJDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgIGlmICh0eXBlID09PSAnbG9hZGVyJykge1xyXG4gICAgICBpbm5lckNvbnRhaW5lci5pbm5lckhUTUwgPSBgPHA+JHttZXNzYWdlfTwvcD48c3ZnIGNsYXNzPVwic3ZnLWxvYWRlclwiPjx1c2UgaHJlZj1cIiN2YUxvYWRlclwiLz48L3N2Zz5gO1xyXG4gICAgfSBlbHNlIGlmICh0eXBlID09PSAnYWN0aW9uJyAmJiBhY3Rpb25zLmxlbmd0aCA+IDApIHtcclxuICAgICAgaW5uZXJDb250YWluZXIuaW5uZXJIVE1MID0gYDxwPiR7bWVzc2FnZX08L3A+YDtcclxuICAgICAgY29uc3QgYnRuc0NvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICBidG5zQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ2J0bnMtY29udGFpbmVyJyk7XHJcbiAgICAgIGFjdGlvbnMuZm9yRWFjaChhY3Rpb24gPT4ge1xyXG4gICAgICAgIGNvbnN0IGJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xyXG4gICAgICAgIGJ1dHRvbi5pbm5lckhUTUwgPSBhY3Rpb24ubmFtZTtcclxuICAgICAgICBidXR0b24uY2xhc3NMaXN0LmFkZCgnYnV0dG9uQmFzZScsICdsaWdodCcpO1xyXG4gICAgICAgIGJ1dHRvbi5vbmNsaWNrID0gYWN0aW9uLmZ1bmN0aW9uO1xyXG4gICAgICAgIGJ0bnNDb250YWluZXIuYXBwZW5kQ2hpbGQoYnV0dG9uKTtcclxuICAgICAgfSk7XHJcbiAgICAgIGlubmVyQ29udGFpbmVyLmFwcGVuZENoaWxkKGJ0bnNDb250YWluZXIpO1xyXG4gICAgfSBlbHNlIGlmICh0eXBlID09PSAnbWVzc2FnZScpIHsgLy8gSXMgdGhpcyBvbmUgdXNlZnVsPyBNYXliZSB3aXRoIGEgc2V0VGltZW91dD9cclxuICAgICAgaW5uZXJDb250YWluZXIuaW5uZXJIVE1MID0gJzxwPicgKyBtZXNzYWdlICsgJzwvcD4nO1xyXG4gICAgfVxyXG4gICAgdGhpcy52aWV3cG9ydE1lc3NhZ2UuYXBwZW5kQ2hpbGQoaW5uZXJDb250YWluZXIpO1xyXG4gICAgdGhpcy52aWV3cG9ydE1lc3NhZ2UuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBIaWRlcyB0aGUgdmlld3BvcnQgbWVzc2FnZSBpZiB2aXNpYmxlLlxyXG4gICAqL1xyXG4gIGhpZGVWaWV3cG9ydE1lc3NhZ2UoKSB7XHJcbiAgICB0aGlzLnZpZXdwb3J0TWVzc2FnZS5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcclxuICB9XHJcblxyXG5cclxuICAvKioqKioqKioqKioqKioqKioqKioqIE1PREFMIERJQUxPR1MgKioqKioqKioqKioqKioqKioqKioqL1xyXG4gIC8qXHJcbiAgICogQWxsIG1vZGFsIGRpYWxvZyBjb250ZW50cyBhcmUgc3RvcmVkIGluIGEgY29udGFpbmVyIGFuZCBmZXRjaGVkIHdoZW4gbmVlZGVkLlxyXG4gICAqL1xyXG5cclxuICAvKipcclxuICAgKiBTaG93cyB0aGUgbW9kYWwgZGlhbG9nIHByb3ZpZGVkIGZyb20gdGhlIHNhbWUgZG9jdW1lbnQuXHJcbiAgICogQHBhcmFtIGNvbnRlbnQgUmVmZXJlbmNlIHRvIHRoZSBvdXRlciBIVE1MIGVsZW1lbnQgb2YgdGhlIGRpYWxvZy5cclxuICAgKiBAcGFyYW0gYmFja2dyb3VuZCBJdCBjYW4gYmUgJ3RyYW5zbHVjZW50JyBvciAnb3BhcXVlJy4gRGVmYXVsdCB2YWx1ZSBpcyAndHJhbnNsdWNlbnQnLlxyXG4gICAqIEBwYXJhbSBjbG9zYWJsZSBXaGVhdGVyIHRvIHNob3cgYSBidXR0b24gdG8gY2xvc2UgaXQgb3Igbm90LiBCeSBkZWFmdWx0IGl0IGhhcyBhIGJ1dHRvbi5cclxuICAgKi9cclxuICBzaG93TW9kYWxEaWFsb2coY29udGVudDogSFRNTEVsZW1lbnQsIGJhY2tncm91bmQgPSAndHJhbnNsdWNlbnQnLCBjbG9zYWJsZSA9IHRydWUpIHtcclxuICAgIHRoaXMubW9kYWxEaWFsb2dDb250YWluZXIuY2xhc3NMaXN0LnZhbHVlID0gJyc7XHJcbiAgICBpZiAoYmFja2dyb3VuZCA9PT0gJ3RyYW5zbHVjZW50Jykge1xyXG4gICAgICB0aGlzLm1vZGFsRGlhbG9nQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ2dyYXlUcmFuc2x1Y2VudCcpO1xyXG4gICAgfSBlbHNlIGlmIChiYWNrZ3JvdW5kID09PSAnb3BhcXVlJykge1xyXG4gICAgICB0aGlzLm1vZGFsRGlhbG9nQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ2xpZ2h0T3BhcXVlJyk7XHJcbiAgICB9XHJcbiAgICBpZiAoY2xvc2FibGUpIHtcclxuICAgICAgdGhpcy5jbG9zZU1vZGFsQnRuLnN0eWxlLmRpc3BsYXkgPSAndW5zZXQnO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5jbG9zZU1vZGFsQnRuLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICB9XHJcbiAgICB0aGlzLm1vZGFsRGlhbG9nQ29udGVudC5hcHBlbmRDaGlsZChjb250ZW50KTtcclxuICAgIHRoaXMubW9kYWxEaWFsb2dDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdmbGV4JztcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEhpZGVzIHRoZSBjdXJyZW50IG1vZGFsIGRpYWxvZy5cclxuICAgKi9cclxuICBjbG9zZU1vZGFsRGlhbG9nKCkge1xyXG4gICAgY29uc3QgY29udGVudCA9IHRoaXMubW9kYWxEaWFsb2dDb250ZW50LmZpcnN0RWxlbWVudENoaWxkO1xyXG4gICAgdGhpcy5tb2RhbERpYWxvZ0NvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgdGhpcy5tb2RhbERpYWxvZ3NTdG9yYWdlLmFwcGVuZENoaWxkKGNvbnRlbnQpO1xyXG4gIH1cclxuXHJcblxyXG4gIC8qKioqKioqKioqKioqKioqKioqKiogU1RBUlQgVEhFIEFQUExJQ0FUSU9OICoqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbiAgLyoqXHJcbiAgICogU3RhcnRzIHRoZSBhcHAsIGlmIGEgcHJvamVjdCBpZCBpcyBwcm92aWRlZCBpdCB3aWxsIHN0YXJ0IGZyb20gdGhhdCBwcm9qZWMgdmlldy5cclxuICAgKiBJZiBubyBwcm9qZWN0IGlkIGlzIHByb3ZpZGVkIGl0IHdpbGwgc3RhcnQgZnJvbSB0aGUgcHJvamVjdHMgbGlzdCB2aWV3LlxyXG4gICAqL1xyXG4gIHN0YXJ0KHByb2plY3RJZDogc3RyaW5nID0gJycpIHtcclxuICAgIC8vIFNob3cgdGhlIGFwcCBpbnRlcmZhY2UuXHJcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdoZWFkZXInKS5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignbWFpbicpLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xyXG4gICAgLy8gU3RhcnQgb3B0aW9ucyBkZXBlbmRpbmcgaWYgdGhlcmUgaXMgYSBwcm9qZWN0SWQuXHJcbiAgICBpZiAocHJvamVjdElkICE9PSAnJykge1xyXG4gICAgICB0aGlzLnNob3dWaWV3cG9ydERpYWxvZygnbG9hZGVyJywgJ0xvYWRpbmcgcHJvamVjdCcpO1xyXG4gICAgICBBUEkuZmV0Y2hQcm9qZWN0KHByb2plY3RJZCwgdGhpcylcclxuICAgICAgICAudGhlbihyZXMgPT4ge1xyXG4gICAgICAgICAgdGhpcy5jdXJyZW50V29ya3NwYWNlID0gbmV3IFdvcmtzcGFjZShyZXMsIHRoaXMpO1xyXG4gICAgICAgICAgdGhpcy5jcmVhdGVIVE1MUHJvamVjdHNMaXN0KFtyZXNdKTtcclxuICAgICAgICAgIHRoaXMucHJvamVjdHNMaXN0QnRuLnN0eWxlLmRpc3BsYXkgPSAndW5zZXQnO1xyXG4gICAgICAgICAgdGhpcy5oaWRlVmlld3BvcnRNZXNzYWdlKCk7XHJcbiAgICAgICAgICAvLyBJZiB0aGUgcHJvamVjdCBoYXMgY29sbGFib3JhdG9ycyBhc2tzIHRoZSBkZXZpY2UgdG9rZW5cclxuICAgICAgICAgIC8vIGluIGNhc2UgaXQgaXMgbmVlZGVkIHRvIHJlY2VpdmUgbm90aWZpY2F0aW9ucy5cclxuICAgICAgICAgIC8vIFRPRE86IElmIHRoaXMgcHJvamVjdCBkb2VzdCBoYXZlIGNvbGxhYm9yYXRvcnMgYnV0IG90aGVyIHllcyBJXHJcbiAgICAgICAgICAvLyB3b3VsZCBuZWVkIHRvIGtub3cgb3RoZXJ3aXNlIHRoZSBkZXZpY2UgdG9rZW4gd291bGQgbm90IGJlIGFza2VkLlxyXG4gICAgICAgICAgLy8gVE9ETzogQ2hlY2sgaWYgYW55IG9mIHRoZSBwcm9qZWN0IGZvbGRlcnMgaGFzIG1vcmUgdGhhbiBvbmUgcGVybWlzc2lvbi5cclxuICAgICAgICAgIGlmIChyZXMucGVybWlzc2lvbnMubGVuZ3RoID4gMSkge1xyXG4gICAgICAgICAgICB3aW5kb3cuc2F2ZU1lc3NhZ2luZ0RldmljZVRva2VuKCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSwgcmVqID0+IHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKHJlaik7XHJcbiAgICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSByZWouYm9keSA9PT0gdW5kZWZpbmVkID8gcmVqIDogYE1lc3NhZ2U6ICR7SlNPTi5wYXJzZShyZWouYm9keSkuZXJyb3IubWVzc2FnZX0gQ29kZTogJHtKU09OLnBhcnNlKHJlai5ib2R5KS5lcnJvci5jb2RlfWA7XHJcbiAgICAgICAgICB0aGlzLnNob3dWaWV3cG9ydERpYWxvZygnYWN0aW9uJywgZXJyb3JNZXNzYWdlLCBbXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICBuYW1lOiAnVmlldyBwcm9qZWN0cyBsaXN0JyxcclxuICAgICAgICAgICAgICBmdW5jdGlvbjogKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vcGVuUHJvamVjdHNMaXN0KCk7XHJcbiAgICAgICAgICAgICAgICBpZiAobG9jYXRpb24uc2VhcmNoICE9PSBcIlwiKSB7XHJcbiAgICAgICAgICAgICAgICAgIGhpc3RvcnkucmVwbGFjZVN0YXRlKHsgcGFnZTogJ1Byb2plY3RzIGxpc3QnIH0sICdQcm9qZWN0cyBsaXN0JywgbG9jYXRpb24uaHJlZi5yZXBsYWNlKGxvY2F0aW9uLnNlYXJjaCwgJycpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIF0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgLy8gRGVsZXRlIGFueSBpbnZhbGlkIHNlYXJjaCBwYXJhbWV0ZXIgaWYgYW55LlxyXG4gICAgICBpZiAobG9jYXRpb24uc2VhcmNoICE9PSBcIlwiKSB7XHJcbiAgICAgICAgaGlzdG9yeS5yZXBsYWNlU3RhdGUoeyBwYWdlOiAnUHJvamVjdHMgbGlzdCcgfSwgJ1Byb2plY3RzIGxpc3QnLCBsb2NhdGlvbi5ocmVmLnJlcGxhY2UobG9jYXRpb24uc2VhcmNoLCAnJykpO1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMucHJvamVjdHNMaXN0Q29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xyXG4gICAgICB0aGlzLnNob3dWaWV3cG9ydERpYWxvZygnbG9hZGVyJywgJ0xvYWRpbmcgcHJvamVjdHMnKTtcclxuICAgICAgLy8gVE9ETzogTGltaXQgdGhlIG51bWJlciBvZiBwcm9qZWN0cyB0byBsaXN0XHJcbiAgICAgIEFQSS5saXN0UHJvamVjdEl0ZW1zKHRoaXMpLnRoZW4oKHJlczogUHJvamVjdERhdGFbXSkgPT4ge1xyXG4gICAgICAgIHRoaXMuY3JlYXRlSFRNTFByb2plY3RzTGlzdChyZXMpO1xyXG4gICAgICAgIHRoaXMuaGlkZVZpZXdwb3J0TWVzc2FnZSgpO1xyXG4gICAgICAgIC8vIENoZWNrcyBpZiBhdCBsZWFzdCBvbmUgcHJvamVjdCBoYXMgY29sbGFib3JhdG9ycyBhbmQgaWYgc28gYXNrcyBmb3IgdGhlXHJcbiAgICAgICAgLy8gZGV2aWNlIG1lc3NhZ2luZyB0b2tlbiB0aGF0IGNvdWxkIGJlIG5lZWRlZCB0byByZWNlaXZlIG5vdGlmaWNhdGlvbnMuXHJcbiAgICAgICAgaWYgKHdpbmRvdy50aGVyZUlzTWVzc2FnaW5nKSB7XHJcbiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAocmVzW2ldLnBlcm1pc3Npb25zLmxlbmd0aCA+IDEpIHtcclxuICAgICAgICAgICAgICB3aW5kb3cuc2F2ZU1lc3NhZ2luZ0RldmljZVRva2VuKCk7XHJcbiAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH0sIHJlaiA9PiB7XHJcbiAgICAgICAgdGhpcy5wcm9qZWN0c0xpc3QuaW5uZXJIVE1MID0gJzxwIGNsYXNzPVwiZW1wdHktbXNnXCI+VGhlcmUgYXJlIG5vIHByb2plY3RzLiBVcGxvYWQgb25lITwvcD4nO1xyXG4gICAgICAgIHRoaXMuaGlkZVZpZXdwb3J0TWVzc2FnZSgpO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcbn0iLCJpbXBvcnQgZmlyZWJhc2UgZnJvbSAnQGZpcmViYXNlL2FwcCc7XG5pbXBvcnQgJ0BmaXJlYmFzZS9pbnN0YWxsYXRpb25zJztcbmltcG9ydCB7IF9fYXNzaWduLCBfX2F3YWl0ZXIsIF9fZ2VuZXJhdG9yIH0gZnJvbSAndHNsaWInO1xuaW1wb3J0IHsgRXJyb3JGYWN0b3J5IH0gZnJvbSAnQGZpcmViYXNlL3V0aWwnO1xuaW1wb3J0IHsgQ29tcG9uZW50IH0gZnJvbSAnQGZpcmViYXNlL2NvbXBvbmVudCc7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG52YXIgQU5BTFlUSUNTX0lEX0ZJRUxEID0gJ21lYXN1cmVtZW50SWQnO1xyXG4vLyBLZXkgdG8gYXR0YWNoIEZJRCB0byBpbiBndGFnIHBhcmFtcy5cclxudmFyIEdBX0ZJRF9LRVkgPSAnZmlyZWJhc2VfaWQnO1xyXG52YXIgT1JJR0lOX0tFWSA9ICdvcmlnaW4nO1xyXG52YXIgR1RBR19VUkwgPSAnaHR0cHM6Ly93d3cuZ29vZ2xldGFnbWFuYWdlci5jb20vZ3RhZy9qcyc7XHJcbnZhciBHdGFnQ29tbWFuZDtcclxuKGZ1bmN0aW9uIChHdGFnQ29tbWFuZCkge1xyXG4gICAgR3RhZ0NvbW1hbmRbXCJFVkVOVFwiXSA9IFwiZXZlbnRcIjtcclxuICAgIEd0YWdDb21tYW5kW1wiU0VUXCJdID0gXCJzZXRcIjtcclxuICAgIEd0YWdDb21tYW5kW1wiQ09ORklHXCJdID0gXCJjb25maWdcIjtcclxufSkoR3RhZ0NvbW1hbmQgfHwgKEd0YWdDb21tYW5kID0ge30pKTtcclxuLypcclxuICogT2ZmaWNpYWxseSByZWNvbW1lbmRlZCBldmVudCBuYW1lcyBmb3IgZ3RhZy5qc1xyXG4gKiBBbnkgb3RoZXIgc3RyaW5nIGlzIGFsc28gYWxsb3dlZC5cclxuICovXHJcbnZhciBFdmVudE5hbWU7XHJcbihmdW5jdGlvbiAoRXZlbnROYW1lKSB7XHJcbiAgICBFdmVudE5hbWVbXCJBRERfUEFZTUVOVF9JTkZPXCJdID0gXCJhZGRfcGF5bWVudF9pbmZvXCI7XHJcbiAgICBFdmVudE5hbWVbXCJBRERfVE9fQ0FSVFwiXSA9IFwiYWRkX3RvX2NhcnRcIjtcclxuICAgIEV2ZW50TmFtZVtcIkFERF9UT19XSVNITElTVFwiXSA9IFwiYWRkX3RvX3dpc2hsaXN0XCI7XHJcbiAgICBFdmVudE5hbWVbXCJCRUdJTl9DSEVDS09VVFwiXSA9IFwiYmVnaW5fY2hlY2tvdXRcIjtcclxuICAgIEV2ZW50TmFtZVtcIkNIRUNLT1VUX1BST0dSRVNTXCJdID0gXCJjaGVja291dF9wcm9ncmVzc1wiO1xyXG4gICAgRXZlbnROYW1lW1wiRVhDRVBUSU9OXCJdID0gXCJleGNlcHRpb25cIjtcclxuICAgIEV2ZW50TmFtZVtcIkdFTkVSQVRFX0xFQURcIl0gPSBcImdlbmVyYXRlX2xlYWRcIjtcclxuICAgIEV2ZW50TmFtZVtcIkxPR0lOXCJdID0gXCJsb2dpblwiO1xyXG4gICAgRXZlbnROYW1lW1wiUEFHRV9WSUVXXCJdID0gXCJwYWdlX3ZpZXdcIjtcclxuICAgIEV2ZW50TmFtZVtcIlBVUkNIQVNFXCJdID0gXCJwdXJjaGFzZVwiO1xyXG4gICAgRXZlbnROYW1lW1wiUkVGVU5EXCJdID0gXCJyZWZ1bmRcIjtcclxuICAgIEV2ZW50TmFtZVtcIlJFTU9WRV9GUk9NX0NBUlRcIl0gPSBcInJlbW92ZV9mcm9tX2NhcnRcIjtcclxuICAgIEV2ZW50TmFtZVtcIlNDUkVFTl9WSUVXXCJdID0gXCJzY3JlZW5fdmlld1wiO1xyXG4gICAgRXZlbnROYW1lW1wiU0VBUkNIXCJdID0gXCJzZWFyY2hcIjtcclxuICAgIEV2ZW50TmFtZVtcIlNFTEVDVF9DT05URU5UXCJdID0gXCJzZWxlY3RfY29udGVudFwiO1xyXG4gICAgRXZlbnROYW1lW1wiU0VUX0NIRUNLT1VUX09QVElPTlwiXSA9IFwic2V0X2NoZWNrb3V0X29wdGlvblwiO1xyXG4gICAgRXZlbnROYW1lW1wiU0hBUkVcIl0gPSBcInNoYXJlXCI7XHJcbiAgICBFdmVudE5hbWVbXCJTSUdOX1VQXCJdID0gXCJzaWduX3VwXCI7XHJcbiAgICBFdmVudE5hbWVbXCJUSU1JTkdfQ09NUExFVEVcIl0gPSBcInRpbWluZ19jb21wbGV0ZVwiO1xyXG4gICAgRXZlbnROYW1lW1wiVklFV19JVEVNXCJdID0gXCJ2aWV3X2l0ZW1cIjtcclxuICAgIEV2ZW50TmFtZVtcIlZJRVdfSVRFTV9MSVNUXCJdID0gXCJ2aWV3X2l0ZW1fbGlzdFwiO1xyXG4gICAgRXZlbnROYW1lW1wiVklFV19QUk9NT1RJT05cIl0gPSBcInZpZXdfcHJvbW90aW9uXCI7XHJcbiAgICBFdmVudE5hbWVbXCJWSUVXX1NFQVJDSF9SRVNVTFRTXCJdID0gXCJ2aWV3X3NlYXJjaF9yZXN1bHRzXCI7XHJcbn0pKEV2ZW50TmFtZSB8fCAoRXZlbnROYW1lID0ge30pKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBMb2dzIGFuIGFuYWx5dGljcyBldmVudCB0aHJvdWdoIHRoZSBGaXJlYmFzZSBTREsuXHJcbiAqXHJcbiAqIEBwYXJhbSBndGFnRnVuY3Rpb24gV3JhcHBlZCBndGFnIGZ1bmN0aW9uIHRoYXQgd2FpdHMgZm9yIGZpZCB0byBiZSBzZXQgYmVmb3JlIHNlbmRpbmcgYW4gZXZlbnRcclxuICogQHBhcmFtIGV2ZW50TmFtZSBHb29nbGUgQW5hbHl0aWNzIGV2ZW50IG5hbWUsIGNob29zZSBmcm9tIHN0YW5kYXJkIGxpc3Qgb3IgdXNlIGEgY3VzdG9tIHN0cmluZy5cclxuICogQHBhcmFtIGV2ZW50UGFyYW1zIEFuYWx5dGljcyBldmVudCBwYXJhbWV0ZXJzLlxyXG4gKi9cclxuZnVuY3Rpb24gbG9nRXZlbnQoZ3RhZ0Z1bmN0aW9uLCBhbmFseXRpY3NJZCwgZXZlbnROYW1lLCBldmVudFBhcmFtcywgb3B0aW9ucykge1xyXG4gICAgdmFyIHBhcmFtcyA9IGV2ZW50UGFyYW1zIHx8IHt9O1xyXG4gICAgaWYgKCFvcHRpb25zIHx8ICFvcHRpb25zLmdsb2JhbCkge1xyXG4gICAgICAgIHBhcmFtcyA9IF9fYXNzaWduKF9fYXNzaWduKHt9LCBldmVudFBhcmFtcyksIHsgJ3NlbmRfdG8nOiBhbmFseXRpY3NJZCB9KTtcclxuICAgIH1cclxuICAgIC8vIFdvcmthcm91bmQgZm9yIGh0dHA6Ly9iLzE0MTM3MDQ0OSAtIHRoaXJkIGFyZ3VtZW50IGNhbm5vdCBiZSB1bmRlZmluZWQuXHJcbiAgICBndGFnRnVuY3Rpb24oR3RhZ0NvbW1hbmQuRVZFTlQsIGV2ZW50TmFtZSwgcGFyYW1zIHx8IHt9KTtcclxufVxyXG4vLyBUT0RPOiBCcmFkIGlzIGdvaW5nIHRvIGFkZCBgc2NyZWVuX25hbWVgIHRvIEdBIEdvbGQgY29uZmlnIHBhcmFtZXRlciBzY2hlbWFcclxuLyoqXHJcbiAqIFNldCBzY3JlZW5fbmFtZSBwYXJhbWV0ZXIgZm9yIHRoaXMgR29vZ2xlIEFuYWx5dGljcyBJRC5cclxuICpcclxuICogQHBhcmFtIGd0YWdGdW5jdGlvbiBXcmFwcGVkIGd0YWcgZnVuY3Rpb24gdGhhdCB3YWl0cyBmb3IgZmlkIHRvIGJlIHNldCBiZWZvcmUgc2VuZGluZyBhbiBldmVudFxyXG4gKiBAcGFyYW0gc2NyZWVuTmFtZSBTY3JlZW4gbmFtZSBzdHJpbmcgdG8gc2V0LlxyXG4gKi9cclxuZnVuY3Rpb24gc2V0Q3VycmVudFNjcmVlbihndGFnRnVuY3Rpb24sIGFuYWx5dGljc0lkLCBzY3JlZW5OYW1lLCBvcHRpb25zKSB7XHJcbiAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLmdsb2JhbCkge1xyXG4gICAgICAgIGd0YWdGdW5jdGlvbihHdGFnQ29tbWFuZC5TRVQsIHsgJ3NjcmVlbl9uYW1lJzogc2NyZWVuTmFtZSB9KTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIGd0YWdGdW5jdGlvbihHdGFnQ29tbWFuZC5DT05GSUcsIGFuYWx5dGljc0lkLCB7XHJcbiAgICAgICAgICAgIHVwZGF0ZTogdHJ1ZSxcclxuICAgICAgICAgICAgJ3NjcmVlbl9uYW1lJzogc2NyZWVuTmFtZVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBTZXQgdXNlcl9pZCBwYXJhbWV0ZXIgZm9yIHRoaXMgR29vZ2xlIEFuYWx5dGljcyBJRC5cclxuICpcclxuICogQHBhcmFtIGd0YWdGdW5jdGlvbiBXcmFwcGVkIGd0YWcgZnVuY3Rpb24gdGhhdCB3YWl0cyBmb3IgZmlkIHRvIGJlIHNldCBiZWZvcmUgc2VuZGluZyBhbiBldmVudFxyXG4gKiBAcGFyYW0gaWQgVXNlciBJRCBzdHJpbmcgdG8gc2V0XHJcbiAqL1xyXG5mdW5jdGlvbiBzZXRVc2VySWQoZ3RhZ0Z1bmN0aW9uLCBhbmFseXRpY3NJZCwgaWQsIG9wdGlvbnMpIHtcclxuICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMuZ2xvYmFsKSB7XHJcbiAgICAgICAgZ3RhZ0Z1bmN0aW9uKEd0YWdDb21tYW5kLlNFVCwgeyAndXNlcl9pZCc6IGlkIH0pO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgZ3RhZ0Z1bmN0aW9uKEd0YWdDb21tYW5kLkNPTkZJRywgYW5hbHl0aWNzSWQsIHtcclxuICAgICAgICAgICAgdXBkYXRlOiB0cnVlLFxyXG4gICAgICAgICAgICAndXNlcl9pZCc6IGlkXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIFNldCBhbGwgb3RoZXIgdXNlciBwcm9wZXJ0aWVzIG90aGVyIHRoYW4gdXNlcl9pZCBhbmQgc2NyZWVuX25hbWUuXHJcbiAqXHJcbiAqIEBwYXJhbSBndGFnRnVuY3Rpb24gV3JhcHBlZCBndGFnIGZ1bmN0aW9uIHRoYXQgd2FpdHMgZm9yIGZpZCB0byBiZSBzZXQgYmVmb3JlIHNlbmRpbmcgYW4gZXZlbnRcclxuICogQHBhcmFtIHByb3BlcnRpZXMgTWFwIG9mIHVzZXIgcHJvcGVydGllcyB0byBzZXRcclxuICovXHJcbmZ1bmN0aW9uIHNldFVzZXJQcm9wZXJ0aWVzKGd0YWdGdW5jdGlvbiwgYW5hbHl0aWNzSWQsIHByb3BlcnRpZXMsIG9wdGlvbnMpIHtcclxuICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMuZ2xvYmFsKSB7XHJcbiAgICAgICAgdmFyIGZsYXRQcm9wZXJ0aWVzID0ge307XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IE9iamVjdC5rZXlzKHByb3BlcnRpZXMpOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICB2YXIga2V5ID0gX2FbX2ldO1xyXG4gICAgICAgICAgICAvLyB1c2UgZG90IG5vdGF0aW9uIGZvciBtZXJnZSBiZWhhdmlvciBpbiBndGFnLmpzXHJcbiAgICAgICAgICAgIGZsYXRQcm9wZXJ0aWVzW1widXNlcl9wcm9wZXJ0aWVzLlwiICsga2V5XSA9IHByb3BlcnRpZXNba2V5XTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZ3RhZ0Z1bmN0aW9uKEd0YWdDb21tYW5kLlNFVCwgZmxhdFByb3BlcnRpZXMpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgZ3RhZ0Z1bmN0aW9uKEd0YWdDb21tYW5kLkNPTkZJRywgYW5hbHl0aWNzSWQsIHtcclxuICAgICAgICAgICAgdXBkYXRlOiB0cnVlLFxyXG4gICAgICAgICAgICAndXNlcl9wcm9wZXJ0aWVzJzogcHJvcGVydGllc1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBTZXQgd2hldGhlciBjb2xsZWN0aW9uIGlzIGVuYWJsZWQgZm9yIHRoaXMgSUQuXHJcbiAqXHJcbiAqIEBwYXJhbSBlbmFibGVkIElmIHRydWUsIGNvbGxlY3Rpb24gaXMgZW5hYmxlZCBmb3IgdGhpcyBJRC5cclxuICovXHJcbmZ1bmN0aW9uIHNldEFuYWx5dGljc0NvbGxlY3Rpb25FbmFibGVkKGFuYWx5dGljc0lkLCBlbmFibGVkKSB7XHJcbiAgICB3aW5kb3dbXCJnYS1kaXNhYmxlLVwiICsgYW5hbHl0aWNzSWRdID0gIWVuYWJsZWQ7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBJbml0aWFsaXplIHRoZSBhbmFseXRpY3MgaW5zdGFuY2UgaW4gZ3RhZy5qcyBieSBjYWxsaW5nIGNvbmZpZyBjb21tYW5kIHdpdGggZmlkLlxyXG4gKlxyXG4gKiBOT1RFOiBXZSBjb21iaW5lIGFuYWx5dGljcyBpbml0aWFsaXphdGlvbiBhbmQgc2V0dGluZyBmaWQgdG9nZXRoZXIgYmVjYXVzZSB3ZSB3YW50IGZpZCB0byBiZVxyXG4gKiBwYXJ0IG9mIHRoZSBgcGFnZV92aWV3YCBldmVudCB0aGF0J3Mgc2VudCBkdXJpbmcgdGhlIGluaXRpYWxpemF0aW9uXHJcbiAqIEBwYXJhbSBhcHAgRmlyZWJhc2UgYXBwXHJcbiAqIEBwYXJhbSBndGFnQ29yZSBUaGUgZ3RhZyBmdW5jdGlvbiB0aGF0J3Mgbm90IHdyYXBwZWQuXHJcbiAqL1xyXG5mdW5jdGlvbiBpbml0aWFsaXplR0FJZChhcHAsIGluc3RhbGxhdGlvbnMsIGd0YWdDb3JlKSB7XHJcbiAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGZpZDtcclxuICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYikge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKF9iLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6IHJldHVybiBbNCAvKnlpZWxkKi8sIGluc3RhbGxhdGlvbnMuZ2V0SWQoKV07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgZmlkID0gX2Iuc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgY29tbWFuZCBpbml0aWFsaXplcyBndGFnLmpzIGFuZCBvbmx5IG5lZWRzIHRvIGJlIGNhbGxlZCBvbmNlIGZvciB0aGUgZW50aXJlIHdlYiBhcHAsXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gYnV0IHNpbmNlIGl0IGlzIGlkZW1wb3RlbnQsIHdlIGNhbiBjYWxsIGl0IG11bHRpcGxlIHRpbWVzLlxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFdlIGtlZXAgaXQgdG9nZXRoZXIgd2l0aCBvdGhlciBpbml0aWFsaXphdGlvbiBsb2dpYyBmb3IgYmV0dGVyIGNvZGUgc3RydWN0dXJlLlxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbiAgICAgICAgICAgICAgICAgICAgZ3RhZ0NvcmUoJ2pzJywgbmV3IERhdGUoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gSXQgc2hvdWxkIGJlIHRoZSBmaXJzdCBjb25maWcgY29tbWFuZCBjYWxsZWQgb24gdGhpcyBHQS1JRFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIEluaXRpYWxpemUgdGhpcyBHQS1JRCBhbmQgc2V0IEZJRCBvbiBpdCB1c2luZyB0aGUgZ3RhZyBjb25maWcgQVBJLlxyXG4gICAgICAgICAgICAgICAgICAgIGd0YWdDb3JlKEd0YWdDb21tYW5kLkNPTkZJRywgYXBwLm9wdGlvbnNbQU5BTFlUSUNTX0lEX0ZJRUxEXSwgKF9hID0ge30sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hW0dBX0ZJRF9LRVldID0gZmlkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBndWFyZCBhZ2FpbnN0IGRldmVsb3BlcnMgYWNjaWRlbnRhbGx5IHNldHRpbmcgcHJvcGVydGllcyB3aXRoIHByZWZpeCBgZmlyZWJhc2VfYFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYVtPUklHSU5fS0VZXSA9ICdmaXJlYmFzZScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnVwZGF0ZSA9IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufVxyXG5mdW5jdGlvbiBpbnNlcnRTY3JpcHRUYWcoZGF0YUxheWVyTmFtZSkge1xyXG4gICAgdmFyIHNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xyXG4gICAgLy8gV2UgYXJlIG5vdCBwcm92aWRpbmcgYW4gYW5hbHl0aWNzSWQgaW4gdGhlIFVSTCBiZWNhdXNlIGl0IHdvdWxkIHRyaWdnZXIgYSBgcGFnZV92aWV3YFxyXG4gICAgLy8gd2l0aG91dCBmaWQuIFdlIHdpbGwgaW5pdGlhbGl6ZSBnYS1pZCB1c2luZyBndGFnIChjb25maWcpIGNvbW1hbmQgdG9nZXRoZXIgd2l0aCBmaWQuXHJcbiAgICBzY3JpcHQuc3JjID0gR1RBR19VUkwgKyBcIj9sPVwiICsgZGF0YUxheWVyTmFtZTtcclxuICAgIHNjcmlwdC5hc3luYyA9IHRydWU7XHJcbiAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHNjcmlwdCk7XHJcbn1cclxuLyoqIEdldCByZWZlcmVuY2UgdG8sIG9yIGNyZWF0ZSwgZ2xvYmFsIGRhdGFsYXllci5cclxuICogQHBhcmFtIGRhdGFMYXllck5hbWUgTmFtZSBvZiBkYXRhbGF5ZXIgKG1vc3Qgb2Z0ZW4gdGhlIGRlZmF1bHQsIFwiX2RhdGFMYXllclwiKVxyXG4gKi9cclxuZnVuY3Rpb24gZ2V0T3JDcmVhdGVEYXRhTGF5ZXIoZGF0YUxheWVyTmFtZSkge1xyXG4gICAgLy8gQ2hlY2sgZm9yIGV4aXN0aW5nIGRhdGFMYXllciBhbmQgY3JlYXRlIGlmIG5lZWRlZC5cclxuICAgIHZhciBkYXRhTGF5ZXIgPSBbXTtcclxuICAgIGlmIChBcnJheS5pc0FycmF5KHdpbmRvd1tkYXRhTGF5ZXJOYW1lXSkpIHtcclxuICAgICAgICBkYXRhTGF5ZXIgPSB3aW5kb3dbZGF0YUxheWVyTmFtZV07XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICB3aW5kb3dbZGF0YUxheWVyTmFtZV0gPSBkYXRhTGF5ZXI7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZGF0YUxheWVyO1xyXG59XHJcbi8qKlxyXG4gKiBXcmFwcyBhIHN0YW5kYXJkIGd0YWcgZnVuY3Rpb24gd2l0aCBleHRyYSBjb2RlIHRvIHdhaXQgZm9yIGNvbXBsZXRpb24gb2ZcclxuICogcmVsZXZhbnQgaW5pdGlhbGl6YXRpb24gcHJvbWlzZXMgYmVmb3JlIHNlbmRpbmcgcmVxdWVzdHMuXHJcbiAqXHJcbiAqIEBwYXJhbSBndGFnQ29yZSBCYXNpYyBndGFnIGZ1bmN0aW9uIHRoYXQganVzdCBhcHBlbmRzIHRvIGRhdGFMYXllclxyXG4gKiBAcGFyYW0gaW5pdGlhbGl6ZWRJZFByb21pc2VzTWFwIE1hcCBvZiBnYUlkcyB0byB0aGVpciBpbml0aWFsaXphdGlvbiBwcm9taXNlc1xyXG4gKi9cclxuZnVuY3Rpb24gd3JhcEd0YWcoZ3RhZ0NvcmUsIGluaXRpYWxpemVkSWRQcm9taXNlc01hcCkge1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChjb21tYW5kLCBpZE9yTmFtZU9yUGFyYW1zLCBndGFnUGFyYW1zKSB7XHJcbiAgICAgICAgLy8gSWYgZXZlbnQsIGNoZWNrIHRoYXQgcmVsZXZhbnQgaW5pdGlhbGl6YXRpb24gcHJvbWlzZXMgaGF2ZSBjb21wbGV0ZWQuXHJcbiAgICAgICAgaWYgKGNvbW1hbmQgPT09IEd0YWdDb21tYW5kLkVWRU5UKSB7XHJcbiAgICAgICAgICAgIHZhciBpbml0aWFsaXphdGlvblByb21pc2VzVG9XYWl0Rm9yID0gW107XHJcbiAgICAgICAgICAgIC8vIElmIHRoZXJlJ3MgYSAnc2VuZF90bycgcGFyYW0sIGNoZWNrIGlmIGFueSBJRCBzcGVjaWZpZWQgbWF0Y2hlc1xyXG4gICAgICAgICAgICAvLyBhIEZJRCB3ZSBoYXZlIGJlZ3VuIGEgZmV0Y2ggb24uXHJcbiAgICAgICAgICAgIGlmIChndGFnUGFyYW1zICYmIGd0YWdQYXJhbXNbJ3NlbmRfdG8nXSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGdhU2VuZFRvTGlzdCA9IGd0YWdQYXJhbXNbJ3NlbmRfdG8nXTtcclxuICAgICAgICAgICAgICAgIC8vIE1ha2UgaXQgYW4gYXJyYXkgaWYgaXMgaXNuJ3QsIHNvIGl0IGNhbiBiZSBkZWFsdCB3aXRoIHRoZSBzYW1lIHdheS5cclxuICAgICAgICAgICAgICAgIGlmICghQXJyYXkuaXNBcnJheShnYVNlbmRUb0xpc3QpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZ2FTZW5kVG9MaXN0ID0gW2dhU2VuZFRvTGlzdF07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGdhU2VuZFRvTGlzdF8xID0gZ2FTZW5kVG9MaXN0OyBfaSA8IGdhU2VuZFRvTGlzdF8xLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBzZW5kVG9JZCA9IGdhU2VuZFRvTGlzdF8xW19pXTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgaW5pdGlhbGl6YXRpb25Qcm9taXNlID0gaW5pdGlhbGl6ZWRJZFByb21pc2VzTWFwW3NlbmRUb0lkXTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBHcm91cHMgd2lsbCBub3QgYmUgaW4gdGhlIG1hcC5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoaW5pdGlhbGl6YXRpb25Qcm9taXNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGluaXRpYWxpemF0aW9uUHJvbWlzZXNUb1dhaXRGb3IucHVzaChpbml0aWFsaXphdGlvblByb21pc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlcmUgaXMgYW4gaXRlbSBpbiAnc2VuZF90bycgdGhhdCBpcyBub3QgYXNzb2NpYXRlZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBkaXJlY3RseSB3aXRoIGFuIEZJRCwgcG9zc2libHkgYSBncm91cC4gIEVtcHR5IHRoaXMgYXJyYXlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYW5kIGxldCBpdCBnZXQgcG9wdWxhdGVkIGJlbG93LlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbml0aWFsaXphdGlvblByb21pc2VzVG9XYWl0Rm9yID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBUaGlzIHdpbGwgYmUgdW5wb3B1bGF0ZWQgaWYgdGhlcmUgd2FzIG5vICdzZW5kX3RvJyBmaWVsZCAsIG9yXHJcbiAgICAgICAgICAgIC8vIGlmIG5vdCBhbGwgZW50cmllcyBpbiB0aGUgJ3NlbmRfdG8nIGZpZWxkIGNvdWxkIGJlIG1hcHBlZCB0b1xyXG4gICAgICAgICAgICAvLyBhIEZJRC4gSW4gdGhlc2UgY2FzZXMsIHdhaXQgb24gYWxsIHBlbmRpbmcgaW5pdGlhbGl6YXRpb24gcHJvbWlzZXMuXHJcbiAgICAgICAgICAgIGlmIChpbml0aWFsaXphdGlvblByb21pc2VzVG9XYWl0Rm9yLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgX2EgPSAwLCBfYiA9IE9iamVjdC52YWx1ZXMoaW5pdGlhbGl6ZWRJZFByb21pc2VzTWFwKTsgX2EgPCBfYi5sZW5ndGg7IF9hKyspIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgaWRQcm9taXNlID0gX2JbX2FdO1xyXG4gICAgICAgICAgICAgICAgICAgIGluaXRpYWxpemF0aW9uUHJvbWlzZXNUb1dhaXRGb3IucHVzaChpZFByb21pc2UpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIFJ1biBjb3JlIGd0YWcgZnVuY3Rpb24gd2l0aCBhcmdzIGFmdGVyIGFsbCByZWxldmFudCBpbml0aWFsaXphdGlvblxyXG4gICAgICAgICAgICAvLyBwcm9taXNlcyBoYXZlIGJlZW4gcmVzb2x2ZWQuXHJcbiAgICAgICAgICAgIFByb21pc2UuYWxsKGluaXRpYWxpemF0aW9uUHJvbWlzZXNUb1dhaXRGb3IpXHJcbiAgICAgICAgICAgICAgICAvLyBXb3JrYXJvdW5kIGZvciBodHRwOi8vYi8xNDEzNzA0NDkgLSB0aGlyZCBhcmd1bWVudCBjYW5ub3QgYmUgdW5kZWZpbmVkLlxyXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGd0YWdDb3JlKEd0YWdDb21tYW5kLkVWRU5ULCBpZE9yTmFtZU9yUGFyYW1zLCBndGFnUGFyYW1zIHx8IHt9KTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbiAoZSkgeyByZXR1cm4gY29uc29sZS5lcnJvcihlKTsgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGNvbW1hbmQgPT09IEd0YWdDb21tYW5kLkNPTkZJRykge1xyXG4gICAgICAgICAgICB2YXIgaW5pdGlhbGl6YXRpb25Qcm9taXNlVG9XYWl0ID0gaW5pdGlhbGl6ZWRJZFByb21pc2VzTWFwW2lkT3JOYW1lT3JQYXJhbXNdIHx8XHJcbiAgICAgICAgICAgICAgICBQcm9taXNlLnJlc29sdmUoKTtcclxuICAgICAgICAgICAgaW5pdGlhbGl6YXRpb25Qcm9taXNlVG9XYWl0XHJcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBndGFnQ29yZShHdGFnQ29tbWFuZC5DT05GSUcsIGlkT3JOYW1lT3JQYXJhbXMsIGd0YWdQYXJhbXMpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlKSB7IHJldHVybiBjb25zb2xlLmVycm9yKGUpOyB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIFNFVCBjb21tYW5kLlxyXG4gICAgICAgICAgICAvLyBTcGxpdHRpbmcgY2FsbHMgZm9yIENPTkZJRyBhbmQgU0VUIHRvIG1ha2UgaXQgY2xlYXIgd2hpY2ggc2lnbmF0dXJlXHJcbiAgICAgICAgICAgIC8vIFR5cGVzY3JpcHQgaXMgY2hlY2tpbmcuXHJcbiAgICAgICAgICAgIGd0YWdDb3JlKEd0YWdDb21tYW5kLlNFVCwgaWRPck5hbWVPclBhcmFtcyk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxufVxyXG4vKipcclxuICogQ3JlYXRlcyBnbG9iYWwgZ3RhZyBmdW5jdGlvbiBvciB3cmFwcyBleGlzdGluZyBvbmUgaWYgZm91bmQuXHJcbiAqIFRoaXMgd3JhcHBlZCBmdW5jdGlvbiBhdHRhY2hlcyBGaXJlYmFzZSBpbnN0YW5jZSBJRCAoRklEKSB0byBndGFnICdjb25maWcnIGFuZFxyXG4gKiAnZXZlbnQnIGNhbGxzIHRoYXQgYmVsb25nIHRvIHRoZSBHQUlEIGFzc29jaWF0ZWQgd2l0aCB0aGlzIEZpcmViYXNlIGluc3RhbmNlLlxyXG4gKlxyXG4gKiBAcGFyYW0gaW5pdGlhbGl6ZWRJZFByb21pc2VzTWFwIE1hcCBvZiBnYUlkIHRvIGluaXRpYWxpemF0aW9uIHByb21pc2VzLlxyXG4gKiBAcGFyYW0gZGF0YUxheWVyTmFtZSBOYW1lIG9mIGdsb2JhbCBHQSBkYXRhbGF5ZXIgYXJyYXkuXHJcbiAqIEBwYXJhbSBndGFnRnVuY3Rpb25OYW1lIE5hbWUgb2YgZ2xvYmFsIGd0YWcgZnVuY3Rpb24gKFwiZ3RhZ1wiIGlmIG5vdCB1c2VyLXNwZWNpZmllZClcclxuICovXHJcbmZ1bmN0aW9uIHdyYXBPckNyZWF0ZUd0YWcoaW5pdGlhbGl6ZWRJZFByb21pc2VzTWFwLCBkYXRhTGF5ZXJOYW1lLCBndGFnRnVuY3Rpb25OYW1lKSB7XHJcbiAgICAvLyBDcmVhdGUgYSBiYXNpYyBjb3JlIGd0YWcgZnVuY3Rpb25cclxuICAgIHZhciBndGFnQ29yZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX2FyZ3MgPSBbXTtcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICBfYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBNdXN0IHB1c2ggSUFyZ3VtZW50cyBvYmplY3QsIG5vdCBhbiBhcnJheS5cclxuICAgICAgICB3aW5kb3dbZGF0YUxheWVyTmFtZV0ucHVzaChhcmd1bWVudHMpO1xyXG4gICAgfTtcclxuICAgIC8vIFJlcGxhY2UgaXQgd2l0aCBleGlzdGluZyBvbmUgaWYgZm91bmRcclxuICAgIGlmICh3aW5kb3dbZ3RhZ0Z1bmN0aW9uTmFtZV0gJiZcclxuICAgICAgICB0eXBlb2Ygd2luZG93W2d0YWdGdW5jdGlvbk5hbWVdID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgIGd0YWdDb3JlID0gd2luZG93W2d0YWdGdW5jdGlvbk5hbWVdO1xyXG4gICAgfVxyXG4gICAgd2luZG93W2d0YWdGdW5jdGlvbk5hbWVdID0gd3JhcEd0YWcoZ3RhZ0NvcmUsIGluaXRpYWxpemVkSWRQcm9taXNlc01hcCk7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGd0YWdDb3JlOiBndGFnQ29yZSxcclxuICAgICAgICB3cmFwcGVkR3RhZzogd2luZG93W2d0YWdGdW5jdGlvbk5hbWVdXHJcbiAgICB9O1xyXG59XHJcbi8qKlxyXG4gKiBSZXR1cm5zIGZpcnN0IHNjcmlwdCB0YWcgaW4gRE9NIG1hdGNoaW5nIG91ciBndGFnIHVybCBwYXR0ZXJuLlxyXG4gKi9cclxuZnVuY3Rpb24gZmluZEd0YWdTY3JpcHRPblBhZ2UoKSB7XHJcbiAgICB2YXIgc2NyaXB0VGFncyA9IHdpbmRvdy5kb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnc2NyaXB0Jyk7XHJcbiAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gT2JqZWN0LnZhbHVlcyhzY3JpcHRUYWdzKTsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICB2YXIgdGFnID0gX2FbX2ldO1xyXG4gICAgICAgIGlmICh0YWcuc3JjICYmIHRhZy5zcmMuaW5jbHVkZXMoR1RBR19VUkwpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0YWc7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG51bGw7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnZhciBfYTtcclxudmFyIEVSUk9SUyA9IChfYSA9IHt9LFxyXG4gICAgX2FbXCJuby1nYS1pZFwiIC8qIE5PX0dBX0lEICovXSA9IFwiXFxcIlwiICsgQU5BTFlUSUNTX0lEX0ZJRUxEICsgXCJcXFwiIGZpZWxkIGlzIGVtcHR5IGluIFwiICtcclxuICAgICAgICAnRmlyZWJhc2UgY29uZmlnLiBGaXJlYmFzZSBBbmFseXRpY3MgJyArXHJcbiAgICAgICAgJ3JlcXVpcmVzIHRoaXMgZmllbGQgdG8gY29udGFpbiBhIHZhbGlkIG1lYXN1cmVtZW50IElELicsXHJcbiAgICBfYVtcImFscmVhZHktZXhpc3RzXCIgLyogQUxSRUFEWV9FWElTVFMgKi9dID0gJ0EgRmlyZWJhc2UgQW5hbHl0aWNzIGluc3RhbmNlIHdpdGggdGhlIG1lYXN1cmVtZW50IElEICR7aWR9ICcgK1xyXG4gICAgICAgICcgYWxyZWFkeSBleGlzdHMuICcgK1xyXG4gICAgICAgICdPbmx5IG9uZSBGaXJlYmFzZSBBbmFseXRpY3MgaW5zdGFuY2UgY2FuIGJlIGNyZWF0ZWQgZm9yIGVhY2ggbWVhc3VyZW1lbnQgSUQuJyxcclxuICAgIF9hW1wiYWxyZWFkeS1pbml0aWFsaXplZFwiIC8qIEFMUkVBRFlfSU5JVElBTElaRUQgKi9dID0gJ0ZpcmViYXNlIEFuYWx5dGljcyBoYXMgYWxyZWFkeSBiZWVuIGluaXRpYWxpemVkLicgK1xyXG4gICAgICAgICdzZXR0aW5ncygpIG11c3QgYmUgY2FsbGVkIGJlZm9yZSBpbml0aWFsaXppbmcgYW55IEFuYWx5dGljcyBpbnN0YW5jZScgK1xyXG4gICAgICAgICdvciBpdCB3aWxsIGhhdmUgbm8gZWZmZWN0LicsXHJcbiAgICBfYVtcImludGVyb3AtY29tcG9uZW50LXJlZy1mYWlsZWRcIiAvKiBJTlRFUk9QX0NPTVBPTkVOVF9SRUdfRkFJTEVEICovXSA9ICdGaXJlYmFzZSBBbmFseXRpY3MgSW50ZXJvcCBDb21wb25lbnQgZmFpbGVkIHRvIGluc3RhbnRpYXRlJyxcclxuICAgIF9hKTtcclxudmFyIEVSUk9SX0ZBQ1RPUlkgPSBuZXcgRXJyb3JGYWN0b3J5KCdhbmFseXRpY3MnLCAnQW5hbHl0aWNzJywgRVJST1JTKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBNYXBzIGdhSWQgdG8gRklEIGZldGNoIHByb21pc2VzLlxyXG4gKi9cclxudmFyIGluaXRpYWxpemVkSWRQcm9taXNlc01hcCA9IHt9O1xyXG4vKipcclxuICogTmFtZSBmb3Igd2luZG93IGdsb2JhbCBkYXRhIGxheWVyIGFycmF5IHVzZWQgYnkgR0E6IGRlZmF1bHRzIHRvICdkYXRhTGF5ZXInLlxyXG4gKi9cclxudmFyIGRhdGFMYXllck5hbWUgPSAnZGF0YUxheWVyJztcclxuLyoqXHJcbiAqIE5hbWUgZm9yIHdpbmRvdyBnbG9iYWwgZ3RhZyBmdW5jdGlvbiB1c2VkIGJ5IEdBOiBkZWZhdWx0cyB0byAnZ3RhZycuXHJcbiAqL1xyXG52YXIgZ3RhZ05hbWUgPSAnZ3RhZyc7XHJcbi8qKlxyXG4gKiBSZXByb2R1Y3Rpb24gb2Ygc3RhbmRhcmQgZ3RhZyBmdW5jdGlvbiBvciByZWZlcmVuY2UgdG8gZXhpc3RpbmdcclxuICogZ3RhZyBmdW5jdGlvbiBvbiB3aW5kb3cgb2JqZWN0LlxyXG4gKi9cclxudmFyIGd0YWdDb3JlRnVuY3Rpb247XHJcbi8qKlxyXG4gKiBXcmFwcGVyIGFyb3VuZCBndGFnIGZ1bmN0aW9uIHRoYXQgZW5zdXJlcyBGSUQgaXMgc2VudCB3aXRoIGFsbFxyXG4gKiByZWxldmFudCBldmVudCBhbmQgY29uZmlnIGNhbGxzLlxyXG4gKi9cclxudmFyIHdyYXBwZWRHdGFnRnVuY3Rpb247XHJcbi8qKlxyXG4gKiBGbGFnIHRvIGVuc3VyZSBwYWdlIGluaXRpYWxpemF0aW9uIHN0ZXBzIChjcmVhdGlvbiBvciB3cmFwcGluZyBvZlxyXG4gKiBkYXRhTGF5ZXIgYW5kIGd0YWcgc2NyaXB0KSBhcmUgb25seSBydW4gb25jZSBwZXIgcGFnZSBsb2FkLlxyXG4gKi9cclxudmFyIGdsb2JhbEluaXREb25lID0gZmFsc2U7XHJcbi8qKlxyXG4gKiBGb3IgdGVzdGluZ1xyXG4gKi9cclxuZnVuY3Rpb24gcmVzZXRHbG9iYWxWYXJzKG5ld0dsb2JhbEluaXREb25lLCBuZXdHYUluaXRpYWxpemVkUHJvbWlzZSkge1xyXG4gICAgaWYgKG5ld0dsb2JhbEluaXREb25lID09PSB2b2lkIDApIHsgbmV3R2xvYmFsSW5pdERvbmUgPSBmYWxzZTsgfVxyXG4gICAgaWYgKG5ld0dhSW5pdGlhbGl6ZWRQcm9taXNlID09PSB2b2lkIDApIHsgbmV3R2FJbml0aWFsaXplZFByb21pc2UgPSB7fTsgfVxyXG4gICAgZ2xvYmFsSW5pdERvbmUgPSBuZXdHbG9iYWxJbml0RG9uZTtcclxuICAgIGluaXRpYWxpemVkSWRQcm9taXNlc01hcCA9IG5ld0dhSW5pdGlhbGl6ZWRQcm9taXNlO1xyXG4gICAgZGF0YUxheWVyTmFtZSA9ICdkYXRhTGF5ZXInO1xyXG4gICAgZ3RhZ05hbWUgPSAnZ3RhZyc7XHJcbn1cclxuLyoqXHJcbiAqIFRoaXMgbXVzdCBiZSBydW4gYmVmb3JlIGNhbGxpbmcgZmlyZWJhc2UuYW5hbHl0aWNzKCkgb3IgaXQgd29uJ3RcclxuICogaGF2ZSBhbnkgZWZmZWN0LlxyXG4gKiBAcGFyYW0gb3B0aW9ucyBDdXN0b20gZ3RhZyBhbmQgZGF0YUxheWVyIG5hbWVzLlxyXG4gKi9cclxuZnVuY3Rpb24gc2V0dGluZ3Mob3B0aW9ucykge1xyXG4gICAgaWYgKGdsb2JhbEluaXREb25lKSB7XHJcbiAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJhbHJlYWR5LWluaXRpYWxpemVkXCIgLyogQUxSRUFEWV9JTklUSUFMSVpFRCAqLyk7XHJcbiAgICB9XHJcbiAgICBpZiAob3B0aW9ucy5kYXRhTGF5ZXJOYW1lKSB7XHJcbiAgICAgICAgZGF0YUxheWVyTmFtZSA9IG9wdGlvbnMuZGF0YUxheWVyTmFtZTtcclxuICAgIH1cclxuICAgIGlmIChvcHRpb25zLmd0YWdOYW1lKSB7XHJcbiAgICAgICAgZ3RhZ05hbWUgPSBvcHRpb25zLmd0YWdOYW1lO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGZhY3RvcnkoYXBwLCBpbnN0YWxsYXRpb25zKSB7XHJcbiAgICB2YXIgYW5hbHl0aWNzSWQgPSBhcHAub3B0aW9uc1tBTkFMWVRJQ1NfSURfRklFTERdO1xyXG4gICAgaWYgKCFhbmFseXRpY3NJZCkge1xyXG4gICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwibm8tZ2EtaWRcIiAvKiBOT19HQV9JRCAqLyk7XHJcbiAgICB9XHJcbiAgICBpZiAoaW5pdGlhbGl6ZWRJZFByb21pc2VzTWFwW2FuYWx5dGljc0lkXSAhPSBudWxsKSB7XHJcbiAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJhbHJlYWR5LWV4aXN0c1wiIC8qIEFMUkVBRFlfRVhJU1RTICovLCB7XHJcbiAgICAgICAgICAgIGlkOiBhbmFseXRpY3NJZFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKCFnbG9iYWxJbml0RG9uZSkge1xyXG4gICAgICAgIC8vIFN0ZXBzIGhlcmUgc2hvdWxkIG9ubHkgYmUgZG9uZSBvbmNlIHBlciBwYWdlOiBjcmVhdGlvbiBvciB3cmFwcGluZ1xyXG4gICAgICAgIC8vIG9mIGRhdGFMYXllciBhbmQgZ2xvYmFsIGd0YWcgZnVuY3Rpb24uXHJcbiAgICAgICAgLy8gRGV0ZWN0IGlmIHVzZXIgaGFzIGFscmVhZHkgcHV0IHRoZSBndGFnIDxzY3JpcHQ+IHRhZyBvbiB0aGlzIHBhZ2UuXHJcbiAgICAgICAgaWYgKCFmaW5kR3RhZ1NjcmlwdE9uUGFnZSgpKSB7XHJcbiAgICAgICAgICAgIGluc2VydFNjcmlwdFRhZyhkYXRhTGF5ZXJOYW1lKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZ2V0T3JDcmVhdGVEYXRhTGF5ZXIoZGF0YUxheWVyTmFtZSk7XHJcbiAgICAgICAgdmFyIF9hID0gd3JhcE9yQ3JlYXRlR3RhZyhpbml0aWFsaXplZElkUHJvbWlzZXNNYXAsIGRhdGFMYXllck5hbWUsIGd0YWdOYW1lKSwgd3JhcHBlZEd0YWcgPSBfYS53cmFwcGVkR3RhZywgZ3RhZ0NvcmUgPSBfYS5ndGFnQ29yZTtcclxuICAgICAgICB3cmFwcGVkR3RhZ0Z1bmN0aW9uID0gd3JhcHBlZEd0YWc7XHJcbiAgICAgICAgZ3RhZ0NvcmVGdW5jdGlvbiA9IGd0YWdDb3JlO1xyXG4gICAgICAgIGdsb2JhbEluaXREb25lID0gdHJ1ZTtcclxuICAgIH1cclxuICAgIC8vIEFzeW5jIGJ1dCBub24tYmxvY2tpbmcuXHJcbiAgICBpbml0aWFsaXplZElkUHJvbWlzZXNNYXBbYW5hbHl0aWNzSWRdID0gaW5pdGlhbGl6ZUdBSWQoYXBwLCBpbnN0YWxsYXRpb25zLCBndGFnQ29yZUZ1bmN0aW9uKTtcclxuICAgIHZhciBhbmFseXRpY3NJbnN0YW5jZSA9IHtcclxuICAgICAgICBhcHA6IGFwcCxcclxuICAgICAgICBsb2dFdmVudDogZnVuY3Rpb24gKGV2ZW50TmFtZSwgZXZlbnRQYXJhbXMsIG9wdGlvbnMpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGxvZ0V2ZW50KHdyYXBwZWRHdGFnRnVuY3Rpb24sIGFuYWx5dGljc0lkLCBldmVudE5hbWUsIGV2ZW50UGFyYW1zLCBvcHRpb25zKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNldEN1cnJlbnRTY3JlZW46IGZ1bmN0aW9uIChzY3JlZW5OYW1lLCBvcHRpb25zKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBzZXRDdXJyZW50U2NyZWVuKHdyYXBwZWRHdGFnRnVuY3Rpb24sIGFuYWx5dGljc0lkLCBzY3JlZW5OYW1lLCBvcHRpb25zKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNldFVzZXJJZDogZnVuY3Rpb24gKGlkLCBvcHRpb25zKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBzZXRVc2VySWQod3JhcHBlZEd0YWdGdW5jdGlvbiwgYW5hbHl0aWNzSWQsIGlkLCBvcHRpb25zKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNldFVzZXJQcm9wZXJ0aWVzOiBmdW5jdGlvbiAocHJvcGVydGllcywgb3B0aW9ucykge1xyXG4gICAgICAgICAgICByZXR1cm4gc2V0VXNlclByb3BlcnRpZXMod3JhcHBlZEd0YWdGdW5jdGlvbiwgYW5hbHl0aWNzSWQsIHByb3BlcnRpZXMsIG9wdGlvbnMpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2V0QW5hbHl0aWNzQ29sbGVjdGlvbkVuYWJsZWQ6IGZ1bmN0aW9uIChlbmFibGVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBzZXRBbmFseXRpY3NDb2xsZWN0aW9uRW5hYmxlZChhbmFseXRpY3NJZCwgZW5hYmxlZCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHJldHVybiBhbmFseXRpY3NJbnN0YW5jZTtcclxufVxuXG52YXIgbmFtZSA9IFwiQGZpcmViYXNlL2FuYWx5dGljc1wiO1xudmFyIHZlcnNpb24gPSBcIjAuMi45XCI7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogVHlwZSBjb25zdGFudCBmb3IgRmlyZWJhc2UgQW5hbHl0aWNzLlxyXG4gKi9cclxudmFyIEFOQUxZVElDU19UWVBFID0gJ2FuYWx5dGljcyc7XHJcbmZ1bmN0aW9uIHJlZ2lzdGVyQW5hbHl0aWNzKGluc3RhbmNlKSB7XHJcbiAgICBpbnN0YW5jZS5JTlRFUk5BTC5yZWdpc3RlckNvbXBvbmVudChuZXcgQ29tcG9uZW50KEFOQUxZVElDU19UWVBFLCBmdW5jdGlvbiAoY29udGFpbmVyKSB7XHJcbiAgICAgICAgLy8gZ2V0SW1tZWRpYXRlIGZvciBGaXJlYmFzZUFwcCB3aWxsIGFsd2F5cyBzdWNjZWVkXHJcbiAgICAgICAgdmFyIGFwcCA9IGNvbnRhaW5lci5nZXRQcm92aWRlcignYXBwJykuZ2V0SW1tZWRpYXRlKCk7XHJcbiAgICAgICAgdmFyIGluc3RhbGxhdGlvbnMgPSBjb250YWluZXJcclxuICAgICAgICAgICAgLmdldFByb3ZpZGVyKCdpbnN0YWxsYXRpb25zJylcclxuICAgICAgICAgICAgLmdldEltbWVkaWF0ZSgpO1xyXG4gICAgICAgIHJldHVybiBmYWN0b3J5KGFwcCwgaW5zdGFsbGF0aW9ucyk7XHJcbiAgICB9LCBcIlBVQkxJQ1wiIC8qIFBVQkxJQyAqLykuc2V0U2VydmljZVByb3BzKHtcclxuICAgICAgICBzZXR0aW5nczogc2V0dGluZ3MsXHJcbiAgICAgICAgRXZlbnROYW1lOiBFdmVudE5hbWVcclxuICAgIH0pKTtcclxuICAgIGluc3RhbmNlLklOVEVSTkFMLnJlZ2lzdGVyQ29tcG9uZW50KG5ldyBDb21wb25lbnQoJ2FuYWx5dGljcy1pbnRlcm5hbCcsIGludGVybmFsRmFjdG9yeSwgXCJQUklWQVRFXCIgLyogUFJJVkFURSAqLykpO1xyXG4gICAgaW5zdGFuY2UucmVnaXN0ZXJWZXJzaW9uKG5hbWUsIHZlcnNpb24pO1xyXG4gICAgZnVuY3Rpb24gaW50ZXJuYWxGYWN0b3J5KGNvbnRhaW5lcikge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHZhciBhbmFseXRpY3MgPSBjb250YWluZXIuZ2V0UHJvdmlkZXIoQU5BTFlUSUNTX1RZUEUpLmdldEltbWVkaWF0ZSgpO1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgbG9nRXZlbnQ6IGFuYWx5dGljcy5sb2dFdmVudFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImludGVyb3AtY29tcG9uZW50LXJlZy1mYWlsZWRcIiAvKiBJTlRFUk9QX0NPTVBPTkVOVF9SRUdfRkFJTEVEICovLCB7XHJcbiAgICAgICAgICAgICAgICByZWFzb246IGVcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbnJlZ2lzdGVyQW5hbHl0aWNzKGZpcmViYXNlKTtcblxuZXhwb3J0IHsgZmFjdG9yeSwgcmVnaXN0ZXJBbmFseXRpY3MsIHJlc2V0R2xvYmFsVmFycywgc2V0dGluZ3MgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmVzbS5qcy5tYXBcbiIsImltcG9ydCBmaXJlYmFzZSBmcm9tICdAZmlyZWJhc2UvYXBwJztcbmltcG9ydCAnQGZpcmViYXNlL2luc3RhbGxhdGlvbnMnO1xuaW1wb3J0IHsgX19zcHJlYWQsIF9fYXdhaXRlciwgX19nZW5lcmF0b3IsIF9fZXh0ZW5kcywgX19hc3NpZ24gfSBmcm9tICd0c2xpYic7XG5pbXBvcnQgeyBFcnJvckZhY3RvcnksIGNyZWF0ZVN1YnNjcmliZSB9IGZyb20gJ0BmaXJlYmFzZS91dGlsJztcbmltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gJ0BmaXJlYmFzZS9jb21wb25lbnQnO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxudmFyIF9hO1xyXG52YXIgRVJST1JfTUFQID0gKF9hID0ge30sXHJcbiAgICBfYVtcIm9ubHktYXZhaWxhYmxlLWluLXdpbmRvd1wiIC8qIEFWQUlMQUJMRV9JTl9XSU5ET1cgKi9dID0gJ1RoaXMgbWV0aG9kIGlzIGF2YWlsYWJsZSBpbiBhIFdpbmRvdyBjb250ZXh0LicsXHJcbiAgICBfYVtcIm9ubHktYXZhaWxhYmxlLWluLXN3XCIgLyogQVZBSUxBQkxFX0lOX1NXICovXSA9ICdUaGlzIG1ldGhvZCBpcyBhdmFpbGFibGUgaW4gYSBzZXJ2aWNlIHdvcmtlciBjb250ZXh0LicsXHJcbiAgICBfYVtcInNob3VsZC1iZS1vdmVycmlkZW5cIiAvKiBTSE9VTERfQkVfSU5IRVJJVEVEICovXSA9ICdUaGlzIG1ldGhvZCBzaG91bGQgYmUgb3ZlcnJpZGVuIGJ5IGV4dGVuZGVkIGNsYXNzZXMuJyxcclxuICAgIF9hW1wiYmFkLXNlbmRlci1pZFwiIC8qIEJBRF9TRU5ERVJfSUQgKi9dID0gXCJQbGVhc2UgZW5zdXJlIHRoYXQgJ21lc3NhZ2luZ1NlbmRlcklkJyBpcyBzZXQgXCIgK1xyXG4gICAgICAgICdjb3JyZWN0bHkgaW4gdGhlIG9wdGlvbnMgcGFzc2VkIGludG8gZmlyZWJhc2UuaW5pdGlhbGl6ZUFwcCgpLicsXHJcbiAgICBfYVtcInBlcm1pc3Npb24tZGVmYXVsdFwiIC8qIFBFUk1JU1NJT05fREVGQVVMVCAqL10gPSAnVGhlIHJlcXVpcmVkIHBlcm1pc3Npb25zIHdlcmUgbm90IGdyYW50ZWQgYW5kIGRpc21pc3NlZCBpbnN0ZWFkLicsXHJcbiAgICBfYVtcInBlcm1pc3Npb24tYmxvY2tlZFwiIC8qIFBFUk1JU1NJT05fQkxPQ0tFRCAqL10gPSAnVGhlIHJlcXVpcmVkIHBlcm1pc3Npb25zIHdlcmUgbm90IGdyYW50ZWQgYW5kIGJsb2NrZWQgaW5zdGVhZC4nLFxyXG4gICAgX2FbXCJ1bnN1cHBvcnRlZC1icm93c2VyXCIgLyogVU5TVVBQT1JURURfQlJPV1NFUiAqL10gPSBcIlRoaXMgYnJvd3NlciBkb2Vzbid0IHN1cHBvcnQgdGhlIEFQSSdzIFwiICtcclxuICAgICAgICAncmVxdWlyZWQgdG8gdXNlIHRoZSBmaXJlYmFzZSBTREsuJyxcclxuICAgIF9hW1wibm90aWZpY2F0aW9ucy1ibG9ja2VkXCIgLyogTk9USUZJQ0FUSU9OU19CTE9DS0VEICovXSA9ICdOb3RpZmljYXRpb25zIGhhdmUgYmVlbiBibG9ja2VkLicsXHJcbiAgICBfYVtcImZhaWxlZC1zZXJ2aWNld29ya2VyLXJlZ2lzdHJhdGlvblwiIC8qIEZBSUxFRF9ERUZBVUxUX1JFR0lTVFJBVElPTiAqL10gPSAnV2UgYXJlIHVuYWJsZSB0byByZWdpc3RlciB0aGUgJyArXHJcbiAgICAgICAgJ2RlZmF1bHQgc2VydmljZSB3b3JrZXIuIHskYnJvd3NlckVycm9yTWVzc2FnZX0nLFxyXG4gICAgX2FbXCJzdy1yZWdpc3RyYXRpb24tZXhwZWN0ZWRcIiAvKiBTV19SRUdJU1RSQVRJT05fRVhQRUNURUQgKi9dID0gJ0Egc2VydmljZSB3b3JrZXIgcmVnaXN0cmF0aW9uIHdhcyB0aGUgZXhwZWN0ZWQgaW5wdXQuJyxcclxuICAgIF9hW1wiZ2V0LXN1YnNjcmlwdGlvbi1mYWlsZWRcIiAvKiBHRVRfU1VCU0NSSVBUSU9OX0ZBSUxFRCAqL10gPSAnVGhlcmUgd2FzIGFuIGVycm9yIHdoZW4gdHJ5aW5nIHRvIGdldCAnICtcclxuICAgICAgICAnYW55IGV4aXN0aW5nIFB1c2ggU3Vic2NyaXB0aW9ucy4nLFxyXG4gICAgX2FbXCJpbnZhbGlkLXNhdmVkLXRva2VuXCIgLyogSU5WQUxJRF9TQVZFRF9UT0tFTiAqL10gPSAnVW5hYmxlIHRvIGFjY2VzcyBkZXRhaWxzIG9mIHRoZSBzYXZlZCB0b2tlbi4nLFxyXG4gICAgX2FbXCJzdy1yZWctcmVkdW5kYW50XCIgLyogU1dfUkVHX1JFRFVOREFOVCAqL10gPSAnVGhlIHNlcnZpY2Ugd29ya2VyIGJlaW5nIHVzZWQgZm9yIHB1c2ggd2FzIG1hZGUgcmVkdW5kYW50LicsXHJcbiAgICBfYVtcInRva2VuLXN1YnNjcmliZS1mYWlsZWRcIiAvKiBUT0tFTl9TVUJTQ1JJQkVfRkFJTEVEICovXSA9ICdBIHByb2JsZW0gb2NjdXJlZCB3aGlsZSBzdWJzY3JpYmluZyB0aGUgdXNlciB0byBGQ006IHskZXJyb3JJbmZvfScsXHJcbiAgICBfYVtcInRva2VuLXN1YnNjcmliZS1uby10b2tlblwiIC8qIFRPS0VOX1NVQlNDUklCRV9OT19UT0tFTiAqL10gPSAnRkNNIHJldHVybmVkIG5vIHRva2VuIHdoZW4gc3Vic2NyaWJpbmcgdGhlIHVzZXIgdG8gcHVzaC4nLFxyXG4gICAgX2FbXCJ0b2tlbi11bnN1YnNjcmliZS1mYWlsZWRcIiAvKiBUT0tFTl9VTlNVQlNDUklCRV9GQUlMRUQgKi9dID0gJ0EgcHJvYmxlbSBvY2N1cmVkIHdoaWxlIHVuc3Vic2NyaWJpbmcgdGhlICcgK1xyXG4gICAgICAgICd1c2VyIGZyb20gRkNNOiB7JGVycm9ySW5mb30nLFxyXG4gICAgX2FbXCJ0b2tlbi11cGRhdGUtZmFpbGVkXCIgLyogVE9LRU5fVVBEQVRFX0ZBSUxFRCAqL10gPSAnQSBwcm9ibGVtIG9jY3VyZWQgd2hpbGUgdXBkYXRpbmcgdGhlIHVzZXIgZnJvbSBGQ006IHskZXJyb3JJbmZvfScsXHJcbiAgICBfYVtcInRva2VuLXVwZGF0ZS1uby10b2tlblwiIC8qIFRPS0VOX1VQREFURV9OT19UT0tFTiAqL10gPSAnRkNNIHJldHVybmVkIG5vIHRva2VuIHdoZW4gdXBkYXRpbmcgdGhlIHVzZXIgdG8gcHVzaC4nLFxyXG4gICAgX2FbXCJ1c2Utc3ctYmVmb3JlLWdldC10b2tlblwiIC8qIFVTRV9TV19CRUZPUkVfR0VUX1RPS0VOICovXSA9ICdUaGUgdXNlU2VydmljZVdvcmtlcigpIG1ldGhvZCBtYXkgb25seSBiZSBjYWxsZWQgb25jZSBhbmQgbXVzdCBiZSAnICtcclxuICAgICAgICAnY2FsbGVkIGJlZm9yZSBjYWxsaW5nIGdldFRva2VuKCkgdG8gZW5zdXJlIHlvdXIgc2VydmljZSB3b3JrZXIgaXMgdXNlZC4nLFxyXG4gICAgX2FbXCJpbnZhbGlkLWRlbGV0ZS10b2tlblwiIC8qIElOVkFMSURfREVMRVRFX1RPS0VOICovXSA9ICdZb3UgbXVzdCBwYXNzIGEgdmFsaWQgdG9rZW4gaW50byAnICtcclxuICAgICAgICAnZGVsZXRlVG9rZW4oKSwgaS5lLiB0aGUgdG9rZW4gZnJvbSBnZXRUb2tlbigpLicsXHJcbiAgICBfYVtcImRlbGV0ZS10b2tlbi1ub3QtZm91bmRcIiAvKiBERUxFVEVfVE9LRU5fTk9UX0ZPVU5EICovXSA9ICdUaGUgZGVsZXRpb24gYXR0ZW1wdCBmb3IgdG9rZW4gY291bGQgbm90ICcgK1xyXG4gICAgICAgICdiZSBwZXJmb3JtZWQgYXMgdGhlIHRva2VuIHdhcyBub3QgZm91bmQuJyxcclxuICAgIF9hW1wiZGVsZXRlLXNjb3BlLW5vdC1mb3VuZFwiIC8qIERFTEVURV9TQ09QRV9OT1RfRk9VTkQgKi9dID0gJ1RoZSBkZWxldGlvbiBhdHRlbXB0IGZvciBzZXJ2aWNlIHdvcmtlciAnICtcclxuICAgICAgICAnc2NvcGUgY291bGQgbm90IGJlIHBlcmZvcm1lZCBhcyB0aGUgc2NvcGUgd2FzIG5vdCBmb3VuZC4nLFxyXG4gICAgX2FbXCJiZy1oYW5kbGVyLWZ1bmN0aW9uLWV4cGVjdGVkXCIgLyogQkdfSEFORExFUl9GVU5DVElPTl9FWFBFQ1RFRCAqL10gPSAnVGhlIGlucHV0IHRvIHNldEJhY2tncm91bmRNZXNzYWdlSGFuZGxlcigpIG11c3QgYmUgYSBmdW5jdGlvbi4nLFxyXG4gICAgX2FbXCJuby13aW5kb3ctY2xpZW50LXRvLW1zZ1wiIC8qIE5PX1dJTkRPV19DTElFTlRfVE9fTVNHICovXSA9ICdBbiBhdHRlbXB0IHdhcyBtYWRlIHRvIG1lc3NhZ2UgYSBub24tZXhpc3RhbnQgd2luZG93IGNsaWVudC4nLFxyXG4gICAgX2FbXCJ1bmFibGUtdG8tcmVzdWJzY3JpYmVcIiAvKiBVTkFCTEVfVE9fUkVTVUJTQ1JJQkUgKi9dID0gJ1RoZXJlIHdhcyBhbiBlcnJvciB3aGlsZSByZS1zdWJzY3JpYmluZyAnICtcclxuICAgICAgICAndGhlIEZDTSB0b2tlbiBmb3IgcHVzaCBtZXNzYWdpbmcuIFdpbGwgaGF2ZSB0byByZXN1YnNjcmliZSB0aGUgJyArXHJcbiAgICAgICAgJ3VzZXIgb24gbmV4dCB2aXNpdC4geyRlcnJvckluZm99JyxcclxuICAgIF9hW1wibm8tZmNtLXRva2VuLWZvci1yZXN1YnNjcmliZVwiIC8qIE5PX0ZDTV9UT0tFTl9GT1JfUkVTVUJTQ1JJQkUgKi9dID0gJ0NvdWxkIG5vdCBmaW5kIGFuIEZDTSB0b2tlbiAnICtcclxuICAgICAgICAnYW5kIGFzIGEgcmVzdWx0LCB1bmFibGUgdG8gcmVzdWJzY3JpYmUuIFdpbGwgaGF2ZSB0byByZXN1YnNjcmliZSB0aGUgJyArXHJcbiAgICAgICAgJ3VzZXIgb24gbmV4dCB2aXNpdC4nLFxyXG4gICAgX2FbXCJmYWlsZWQtdG8tZGVsZXRlLXRva2VuXCIgLyogRkFJTEVEX1RPX0RFTEVURV9UT0tFTiAqL10gPSAnVW5hYmxlIHRvIGRlbGV0ZSB0aGUgY3VycmVudGx5IHNhdmVkIHRva2VuLicsXHJcbiAgICBfYVtcIm5vLXN3LWluLXJlZ1wiIC8qIE5PX1NXX0lOX1JFRyAqL10gPSAnRXZlbiB0aG91Z2ggdGhlIHNlcnZpY2Ugd29ya2VyIHJlZ2lzdHJhdGlvbiB3YXMgJyArXHJcbiAgICAgICAgJ3N1Y2Nlc3NmdWwsIHRoZXJlIHdhcyBhIHByb2JsZW0gYWNjZXNzaW5nIHRoZSBzZXJ2aWNlIHdvcmtlciBpdHNlbGYuJyxcclxuICAgIF9hW1wiYmFkLXNjb3BlXCIgLyogQkFEX1NDT1BFICovXSA9ICdUaGUgc2VydmljZSB3b3JrZXIgc2NvcGUgbXVzdCBiZSBhIHN0cmluZyB3aXRoIGF0ICcgK1xyXG4gICAgICAgICdsZWFzdCBvbmUgY2hhcmFjdGVyLicsXHJcbiAgICBfYVtcImJhZC12YXBpZC1rZXlcIiAvKiBCQURfVkFQSURfS0VZICovXSA9ICdUaGUgcHVibGljIFZBUElEIGtleSBpcyBub3QgYSBVaW50OEFycmF5IHdpdGggNjUgYnl0ZXMuJyxcclxuICAgIF9hW1wiYmFkLXN1YnNjcmlwdGlvblwiIC8qIEJBRF9TVUJTQ1JJUFRJT04gKi9dID0gJ1RoZSBzdWJzY3JpcHRpb24gbXVzdCBiZSBhIHZhbGlkIFB1c2hTdWJzY3JpcHRpb24uJyxcclxuICAgIF9hW1wiYmFkLXRva2VuXCIgLyogQkFEX1RPS0VOICovXSA9ICdUaGUgRkNNIFRva2VuIHVzZWQgZm9yIHN0b3JhZ2UgLyBsb29rdXAgd2FzIG5vdCAnICtcclxuICAgICAgICAnYSB2YWxpZCB0b2tlbiBzdHJpbmcuJyxcclxuICAgIF9hW1wiZmFpbGVkLWRlbGV0ZS12YXBpZC1rZXlcIiAvKiBGQUlMRURfREVMRVRFX1ZBUElEX0tFWSAqL10gPSAnVGhlIFZBUElEIGtleSBjb3VsZCBub3QgYmUgZGVsZXRlZC4nLFxyXG4gICAgX2FbXCJpbnZhbGlkLXB1YmxpYy12YXBpZC1rZXlcIiAvKiBJTlZBTElEX1BVQkxJQ19WQVBJRF9LRVkgKi9dID0gJ1RoZSBwdWJsaWMgVkFQSUQga2V5IG11c3QgYmUgYSBzdHJpbmcuJyxcclxuICAgIF9hW1widXNlLXB1YmxpYy1rZXktYmVmb3JlLWdldC10b2tlblwiIC8qIFVTRV9QVUJMSUNfS0VZX0JFRk9SRV9HRVRfVE9LRU4gKi9dID0gJ1RoZSB1c2VQdWJsaWNWYXBpZEtleSgpIG1ldGhvZCBtYXkgb25seSBiZSBjYWxsZWQgb25jZSBhbmQgbXVzdCBiZSAnICtcclxuICAgICAgICAnY2FsbGVkIGJlZm9yZSBjYWxsaW5nIGdldFRva2VuKCkgdG8gZW5zdXJlIHlvdXIgVkFQSUQga2V5IGlzIHVzZWQuJyxcclxuICAgIF9hW1wicHVibGljLXZhcGlkLWtleS1kZWNyeXB0aW9uLWZhaWxlZFwiIC8qIFBVQkxJQ19LRVlfREVDUllQVElPTl9GQUlMRUQgKi9dID0gJ1RoZSBwdWJsaWMgVkFQSUQga2V5IGRpZCBub3QgZXF1YWwgNjUgYnl0ZXMgd2hlbiBkZWNyeXB0ZWQuJyxcclxuICAgIF9hKTtcclxudmFyIGVycm9yRmFjdG9yeSA9IG5ldyBFcnJvckZhY3RvcnkoJ21lc3NhZ2luZycsICdNZXNzYWdpbmcnLCBFUlJPUl9NQVApO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxudmFyIERFRkFVTFRfUFVCTElDX1ZBUElEX0tFWSA9IG5ldyBVaW50OEFycmF5KFtcclxuICAgIDB4MDQsXHJcbiAgICAweDMzLFxyXG4gICAgMHg5NCxcclxuICAgIDB4ZjcsXHJcbiAgICAweGRmLFxyXG4gICAgMHhhMSxcclxuICAgIDB4ZWIsXHJcbiAgICAweGIxLFxyXG4gICAgMHhkYyxcclxuICAgIDB4MDMsXHJcbiAgICAweGEyLFxyXG4gICAgMHg1ZSxcclxuICAgIDB4MTUsXHJcbiAgICAweDcxLFxyXG4gICAgMHhkYixcclxuICAgIDB4NDgsXHJcbiAgICAweGQzLFxyXG4gICAgMHgyZSxcclxuICAgIDB4ZWQsXHJcbiAgICAweGVkLFxyXG4gICAgMHhiMixcclxuICAgIDB4MzQsXHJcbiAgICAweGRiLFxyXG4gICAgMHhiNyxcclxuICAgIDB4NDcsXHJcbiAgICAweDNhLFxyXG4gICAgMHgwYyxcclxuICAgIDB4OGYsXHJcbiAgICAweGM0LFxyXG4gICAgMHhjYyxcclxuICAgIDB4ZTEsXHJcbiAgICAweDZmLFxyXG4gICAgMHgzYyxcclxuICAgIDB4OGMsXHJcbiAgICAweDg0LFxyXG4gICAgMHhkZixcclxuICAgIDB4YWIsXHJcbiAgICAweGI2LFxyXG4gICAgMHg2NixcclxuICAgIDB4M2UsXHJcbiAgICAweGYyLFxyXG4gICAgMHgwYyxcclxuICAgIDB4ZDQsXHJcbiAgICAweDhiLFxyXG4gICAgMHhmZSxcclxuICAgIDB4ZTMsXHJcbiAgICAweGY5LFxyXG4gICAgMHg3NixcclxuICAgIDB4MmYsXHJcbiAgICAweDE0LFxyXG4gICAgMHgxYyxcclxuICAgIDB4NjMsXHJcbiAgICAweDA4LFxyXG4gICAgMHg2YSxcclxuICAgIDB4NmYsXHJcbiAgICAweDJkLFxyXG4gICAgMHhiMSxcclxuICAgIDB4MWEsXHJcbiAgICAweDk1LFxyXG4gICAgMHhiMCxcclxuICAgIDB4Y2UsXHJcbiAgICAweDM3LFxyXG4gICAgMHhjMCxcclxuICAgIDB4OWMsXHJcbiAgICAweDZlXHJcbl0pO1xyXG52YXIgRU5EUE9JTlQgPSAnaHR0cHM6Ly9mY21yZWdpc3RyYXRpb25zLmdvb2dsZWFwaXMuY29tL3YxJztcclxudmFyIEZOX0NBTVBBSUdOX0lEID0gJ2dvb2dsZS5jLmEuY19pZCc7XHJcbnZhciBGTl9DQU1QQUlHTl9OQU1FID0gJ2dvb2dsZS5jLmEuY19sJztcclxudmFyIEZOX0NBTVBBSUdOX1RJTUUgPSAnZ29vZ2xlLmMuYS50cyc7XHJcbi8qKiBTZXQgdG8gJzEnIGlmIEFuYWx5dGljcyBpcyBlbmFibGVkIGZvciB0aGUgY2FtcGFpZ24gKi9cclxudmFyIEZOX0NBTVBBSUdOX0FOQUxZVElDU19FTkFCTEVEID0gJ2dvb2dsZS5jLmEuZSc7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG52YXIgTWVzc2FnZVR5cGU7XHJcbihmdW5jdGlvbiAoTWVzc2FnZVR5cGUpIHtcclxuICAgIE1lc3NhZ2VUeXBlW1wiUFVTSF9NU0dfUkVDRUlWRURcIl0gPSBcInB1c2gtbXNnLXJlY2VpdmVkXCI7XHJcbiAgICBNZXNzYWdlVHlwZVtcIk5PVElGSUNBVElPTl9DTElDS0VEXCJdID0gXCJub3RpZmljYXRpb24tY2xpY2tlZFwiO1xyXG59KShNZXNzYWdlVHlwZSB8fCAoTWVzc2FnZVR5cGUgPSB7fSkpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gaXNBcnJheUJ1ZmZlckVxdWFsKGEsIGIpIHtcclxuICAgIGlmIChhID09IG51bGwgfHwgYiA9PSBudWxsKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgaWYgKGEgPT09IGIpIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuICAgIGlmIChhLmJ5dGVMZW5ndGggIT09IGIuYnl0ZUxlbmd0aCkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIHZhciB2aWV3QSA9IG5ldyBEYXRhVmlldyhhKTtcclxuICAgIHZhciB2aWV3QiA9IG5ldyBEYXRhVmlldyhiKTtcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYS5ieXRlTGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBpZiAodmlld0EuZ2V0VWludDgoaSkgIT09IHZpZXdCLmdldFVpbnQ4KGkpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gdG9CYXNlNjQoYXJyYXlCdWZmZXIpIHtcclxuICAgIHZhciB1aW50OFZlcnNpb24gPSBuZXcgVWludDhBcnJheShhcnJheUJ1ZmZlcik7XHJcbiAgICByZXR1cm4gYnRvYShTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KFN0cmluZywgX19zcHJlYWQodWludDhWZXJzaW9uKSkpO1xyXG59XHJcbmZ1bmN0aW9uIGFycmF5QnVmZmVyVG9CYXNlNjQoYXJyYXlCdWZmZXIpIHtcclxuICAgIHZhciBiYXNlNjRTdHJpbmcgPSB0b0Jhc2U2NChhcnJheUJ1ZmZlcik7XHJcbiAgICByZXR1cm4gYmFzZTY0U3RyaW5nXHJcbiAgICAgICAgLnJlcGxhY2UoLz0vZywgJycpXHJcbiAgICAgICAgLnJlcGxhY2UoL1xcKy9nLCAnLScpXHJcbiAgICAgICAgLnJlcGxhY2UoL1xcLy9nLCAnXycpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG52YXIgU3Vic2NyaXB0aW9uTWFuYWdlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFN1YnNjcmlwdGlvbk1hbmFnZXIoKSB7XHJcbiAgICB9XHJcbiAgICBTdWJzY3JpcHRpb25NYW5hZ2VyLnByb3RvdHlwZS5nZXRUb2tlbiA9IGZ1bmN0aW9uIChzZXJ2aWNlcywgc3Vic2NyaXB0aW9uLCB2YXBpZEtleSkge1xyXG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGhlYWRlcnMsIGJvZHksIHN1YnNjcmliZU9wdGlvbnMsIHJlc3BvbnNlRGF0YSwgcmVzcG9uc2UsIGVycl8xLCBtZXNzYWdlO1xyXG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOiByZXR1cm4gWzQgLyp5aWVsZCovLCBnZXRIZWFkZXJzKHNlcnZpY2VzKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBib2R5ID0gZ2V0Qm9keShzdWJzY3JpcHRpb24sIHZhcGlkS2V5KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3Vic2NyaWJlT3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGJvZHkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLmxhYmVsID0gMjtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnRyeXMucHVzaChbMiwgNSwgLCA2XSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIGZldGNoKGdldEVuZHBvaW50KHNlcnZpY2VzLmFwcCksIHN1YnNjcmliZU9wdGlvbnMpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCByZXNwb25zZS5qc29uKCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2VEYXRhID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCA2XTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycl8xID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnJvckZhY3RvcnkuY3JlYXRlKFwidG9rZW4tc3Vic2NyaWJlLWZhaWxlZFwiIC8qIFRPS0VOX1NVQlNDUklCRV9GQUlMRUQgKi8sIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9ySW5mbzogZXJyXzFcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA2OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2VEYXRhLmVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlID0gcmVzcG9uc2VEYXRhLmVycm9yLm1lc3NhZ2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnJvckZhY3RvcnkuY3JlYXRlKFwidG9rZW4tc3Vic2NyaWJlLWZhaWxlZFwiIC8qIFRPS0VOX1NVQlNDUklCRV9GQUlMRUQgKi8sIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvckluZm86IG1lc3NhZ2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghcmVzcG9uc2VEYXRhLnRva2VuKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnJvckZhY3RvcnkuY3JlYXRlKFwidG9rZW4tc3Vic2NyaWJlLW5vLXRva2VuXCIgLyogVE9LRU5fU1VCU0NSSUJFX05PX1RPS0VOICovKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgcmVzcG9uc2VEYXRhLnRva2VuXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBVcGRhdGUgdGhlIHVuZGVybHlpbmcgdG9rZW4gZGV0YWlscyBmb3IgZmNtVG9rZW4uXHJcbiAgICAgKi9cclxuICAgIFN1YnNjcmlwdGlvbk1hbmFnZXIucHJvdG90eXBlLnVwZGF0ZVRva2VuID0gZnVuY3Rpb24gKHRva2VuRGV0YWlscywgc2VydmljZXMsIHN1YnNjcmlwdGlvbiwgdmFwaWRLZXkpIHtcclxuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBoZWFkZXJzLCBib2R5LCB1cGRhdGVPcHRpb25zLCByZXNwb25zZURhdGEsIHJlc3BvbnNlLCBlcnJfMiwgbWVzc2FnZTtcclxuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDogcmV0dXJuIFs0IC8qeWllbGQqLywgZ2V0SGVhZGVycyhzZXJ2aWNlcyldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVycyA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYm9keSA9IGdldEJvZHkoc3Vic2NyaXB0aW9uLCB2YXBpZEtleSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZU9wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQQVRDSCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoYm9keSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSAyO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2EudHJ5cy5wdXNoKFsyLCA1LCAsIDZdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgZmV0Y2goZ2V0RW5kcG9pbnQoc2VydmljZXMuYXBwKSArIFwiL1wiICsgdG9rZW5EZXRhaWxzLmZjbVRva2VuLCB1cGRhdGVPcHRpb25zKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZSA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgcmVzcG9uc2UuanNvbigpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlRGF0YSA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgNl07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA1OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJfMiA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyb3JGYWN0b3J5LmNyZWF0ZShcInRva2VuLXVwZGF0ZS1mYWlsZWRcIiAvKiBUT0tFTl9VUERBVEVfRkFJTEVEICovLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvckluZm86IGVycl8yXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlRGF0YS5lcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSA9IHJlc3BvbnNlRGF0YS5lcnJvci5tZXNzYWdlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyb3JGYWN0b3J5LmNyZWF0ZShcInRva2VuLXVwZGF0ZS1mYWlsZWRcIiAvKiBUT0tFTl9VUERBVEVfRkFJTEVEICovLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JJbmZvOiBtZXNzYWdlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXJlc3BvbnNlRGF0YS50b2tlbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyb3JGYWN0b3J5LmNyZWF0ZShcInRva2VuLXVwZGF0ZS1uby10b2tlblwiIC8qIFRPS0VOX1VQREFURV9OT19UT0tFTiAqLyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHJlc3BvbnNlRGF0YS50b2tlbl07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIFN1YnNjcmlwdGlvbk1hbmFnZXIucHJvdG90eXBlLmRlbGV0ZVRva2VuID0gZnVuY3Rpb24gKHNlcnZpY2VzLCB0b2tlbkRldGFpbHMpIHtcclxuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBoZWFkZXJzLCB1bnN1YnNjcmliZU9wdGlvbnMsIHJlc3BvbnNlLCByZXNwb25zZURhdGEsIG1lc3NhZ2UsIGVycl8zO1xyXG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOiByZXR1cm4gWzQgLyp5aWVsZCovLCBnZXRIZWFkZXJzKHNlcnZpY2VzKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB1bnN1YnNjcmliZU9wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdERUxFVEUnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVyc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDI7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS50cnlzLnB1c2goWzIsIDUsICwgNl0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBmZXRjaChnZXRFbmRwb2ludChzZXJ2aWNlcy5hcHApICsgXCIvXCIgKyB0b2tlbkRldGFpbHMuZmNtVG9rZW4sIHVuc3Vic2NyaWJlT3B0aW9ucyldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHJlc3BvbnNlLmpzb24oKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZURhdGEgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZURhdGEuZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSByZXNwb25zZURhdGEuZXJyb3IubWVzc2FnZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IGVycm9yRmFjdG9yeS5jcmVhdGUoXCJ0b2tlbi11bnN1YnNjcmliZS1mYWlsZWRcIiAvKiBUT0tFTl9VTlNVQlNDUklCRV9GQUlMRUQgKi8sIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvckluZm86IG1lc3NhZ2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDZdO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyXzMgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IGVycm9yRmFjdG9yeS5jcmVhdGUoXCJ0b2tlbi11bnN1YnNjcmliZS1mYWlsZWRcIiAvKiBUT0tFTl9VTlNVQlNDUklCRV9GQUlMRUQgKi8sIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9ySW5mbzogZXJyXzNcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA2OiByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBTdWJzY3JpcHRpb25NYW5hZ2VyO1xyXG59KCkpO1xyXG5mdW5jdGlvbiBnZXRFbmRwb2ludChhcHApIHtcclxuICAgIHJldHVybiBFTkRQT0lOVCArIFwiL3Byb2plY3RzL1wiICsgYXBwLm9wdGlvbnMucHJvamVjdElkICsgXCIvcmVnaXN0cmF0aW9uc1wiO1xyXG59XHJcbmZ1bmN0aW9uIGdldEhlYWRlcnMoX2EpIHtcclxuICAgIHZhciBhcHAgPSBfYS5hcHAsIGluc3RhbGxhdGlvbnMgPSBfYS5pbnN0YWxsYXRpb25zO1xyXG4gICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBhdXRoVG9rZW47XHJcbiAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYikge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKF9iLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6IHJldHVybiBbNCAvKnlpZWxkKi8sIGluc3RhbGxhdGlvbnMuZ2V0VG9rZW4oKV07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgYXV0aFRva2VuID0gX2Iuc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBuZXcgSGVhZGVycyh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgQWNjZXB0OiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAneC1nb29nLWFwaS1rZXknOiBhcHAub3B0aW9ucy5hcGlLZXksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAneC1nb29nLWZpcmViYXNlLWluc3RhbGxhdGlvbnMtYXV0aCc6IFwiRklTIFwiICsgYXV0aFRva2VuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn1cclxuZnVuY3Rpb24gZ2V0Qm9keShzdWJzY3JpcHRpb24sIHZhcGlkS2V5KSB7XHJcbiAgICB2YXIgcDI1NmRoID0gYXJyYXlCdWZmZXJUb0Jhc2U2NChzdWJzY3JpcHRpb24uZ2V0S2V5KCdwMjU2ZGgnKSk7XHJcbiAgICB2YXIgYXV0aCA9IGFycmF5QnVmZmVyVG9CYXNlNjQoc3Vic2NyaXB0aW9uLmdldEtleSgnYXV0aCcpKTtcclxuICAgIHZhciBib2R5ID0ge1xyXG4gICAgICAgIHdlYjoge1xyXG4gICAgICAgICAgICBlbmRwb2ludDogc3Vic2NyaXB0aW9uLmVuZHBvaW50LFxyXG4gICAgICAgICAgICBwMjU2ZGg6IHAyNTZkaCxcclxuICAgICAgICAgICAgYXV0aDogYXV0aFxyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBpZiAoIWlzQXJyYXlCdWZmZXJFcXVhbCh2YXBpZEtleS5idWZmZXIsIERFRkFVTFRfUFVCTElDX1ZBUElEX0tFWS5idWZmZXIpKSB7XHJcbiAgICAgICAgYm9keS53ZWIuYXBwbGljYXRpb25QdWJLZXkgPSBhcnJheUJ1ZmZlclRvQmFzZTY0KHZhcGlkS2V5KTtcclxuICAgIH1cclxuICAgIHJldHVybiBib2R5O1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBiYXNlNjRUb0FycmF5QnVmZmVyKGJhc2U2NFN0cmluZykge1xyXG4gICAgdmFyIHBhZGRpbmcgPSAnPScucmVwZWF0KCg0IC0gKGJhc2U2NFN0cmluZy5sZW5ndGggJSA0KSkgJSA0KTtcclxuICAgIHZhciBiYXNlNjQgPSAoYmFzZTY0U3RyaW5nICsgcGFkZGluZylcclxuICAgICAgICAucmVwbGFjZSgvXFwtL2csICcrJylcclxuICAgICAgICAucmVwbGFjZSgvXy9nLCAnLycpO1xyXG4gICAgdmFyIHJhd0RhdGEgPSBhdG9iKGJhc2U2NCk7XHJcbiAgICB2YXIgb3V0cHV0QXJyYXkgPSBuZXcgVWludDhBcnJheShyYXdEYXRhLmxlbmd0aCk7XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJhd0RhdGEubGVuZ3RoOyArK2kpIHtcclxuICAgICAgICBvdXRwdXRBcnJheVtpXSA9IHJhd0RhdGEuY2hhckNvZGVBdChpKTtcclxuICAgIH1cclxuICAgIHJldHVybiBvdXRwdXRBcnJheTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxudmFyIE9MRF9EQl9OQU1FID0gJ3VuZGVmaW5lZCc7XHJcbnZhciBPTERfT0JKRUNUX1NUT1JFX05BTUUgPSAnZmNtX3Rva2VuX29iamVjdF9TdG9yZSc7XHJcbmZ1bmN0aW9uIGhhbmRsZURiKGRiLCBzZXJ2aWNlcykge1xyXG4gICAgaWYgKCFkYi5vYmplY3RTdG9yZU5hbWVzLmNvbnRhaW5zKE9MRF9PQkpFQ1RfU1RPUkVfTkFNRSkpIHtcclxuICAgICAgICAvLyBXZSBmb3VuZCBhIGRhdGFiYXNlIHdpdGggdGhlIG5hbWUgJ3VuZGVmaW5lZCcsIGJ1dCBvdXIgZXhwZWN0ZWQgb2JqZWN0XHJcbiAgICAgICAgLy8gc3RvcmUgaXNuJ3QgZGVmaW5lZC5cclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICB2YXIgdHJhbnNhY3Rpb24gPSBkYi50cmFuc2FjdGlvbihPTERfT0JKRUNUX1NUT1JFX05BTUUpO1xyXG4gICAgdmFyIG9iamVjdFN0b3JlID0gdHJhbnNhY3Rpb24ub2JqZWN0U3RvcmUoT0xEX09CSkVDVF9TVE9SRV9OQU1FKTtcclxuICAgIHZhciBzdWJzY3JpcHRpb25NYW5hZ2VyID0gbmV3IFN1YnNjcmlwdGlvbk1hbmFnZXIoKTtcclxuICAgIHZhciBvcGVuQ3Vyc29yUmVxdWVzdCA9IG9iamVjdFN0b3JlLm9wZW5DdXJzb3IoKTtcclxuICAgIG9wZW5DdXJzb3JSZXF1ZXN0Lm9uZXJyb3IgPSBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAvLyBOT09QIC0gTm90aGluZyB3ZSBjYW4gZG8uXHJcbiAgICAgICAgY29uc29sZS53YXJuKCdVbmFibGUgdG8gY2xlYW51cCBvbGQgSURCLicsIGV2ZW50KTtcclxuICAgIH07XHJcbiAgICBvcGVuQ3Vyc29yUmVxdWVzdC5vbnN1Y2Nlc3MgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGN1cnNvciA9IG9wZW5DdXJzb3JSZXF1ZXN0LnJlc3VsdDtcclxuICAgICAgICBpZiAoY3Vyc29yKSB7XHJcbiAgICAgICAgICAgIC8vIGN1cnNvci52YWx1ZSBjb250YWlucyB0aGUgY3VycmVudCByZWNvcmQgYmVpbmcgaXRlcmF0ZWQgdGhyb3VnaFxyXG4gICAgICAgICAgICAvLyB0aGlzIGlzIHdoZXJlIHlvdSdkIGRvIHNvbWV0aGluZyB3aXRoIHRoZSByZXN1bHRcclxuICAgICAgICAgICAgdmFyIHRva2VuRGV0YWlscyA9IGN1cnNvci52YWx1ZTtcclxuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1mbG9hdGluZy1wcm9taXNlc1xyXG4gICAgICAgICAgICBzdWJzY3JpcHRpb25NYW5hZ2VyLmRlbGV0ZVRva2VuKHNlcnZpY2VzLCB0b2tlbkRldGFpbHMpO1xyXG4gICAgICAgICAgICBjdXJzb3IuY29udGludWUoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGRiLmNsb3NlKCk7XHJcbiAgICAgICAgICAgIGluZGV4ZWREQi5kZWxldGVEYXRhYmFzZShPTERfREJfTkFNRSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxufVxyXG5mdW5jdGlvbiBjbGVhblYxKHNlcnZpY2VzKSB7XHJcbiAgICB2YXIgcmVxdWVzdCA9IGluZGV4ZWREQi5vcGVuKE9MRF9EQl9OQU1FKTtcclxuICAgIHJlcXVlc3Qub25lcnJvciA9IGZ1bmN0aW9uIChfZXZlbnQpIHtcclxuICAgICAgICAvLyBOT09QIC0gTm90aGluZyB3ZSBjYW4gZG8uXHJcbiAgICB9O1xyXG4gICAgcmVxdWVzdC5vbnN1Y2Nlc3MgPSBmdW5jdGlvbiAoX2V2ZW50KSB7XHJcbiAgICAgICAgdmFyIGRiID0gcmVxdWVzdC5yZXN1bHQ7XHJcbiAgICAgICAgaGFuZGxlRGIoZGIsIHNlcnZpY2VzKTtcclxuICAgIH07XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnZhciBEYkludGVyZmFjZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIERiSW50ZXJmYWNlKCkge1xyXG4gICAgICAgIHRoaXMuZGJQcm9taXNlID0gbnVsbDtcclxuICAgIH1cclxuICAgIC8qKiBHZXRzIHJlY29yZChzKSBmcm9tIHRoZSBvYmplY3RTdG9yZSB0aGF0IG1hdGNoIHRoZSBnaXZlbiBrZXkuICovXHJcbiAgICBEYkludGVyZmFjZS5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNyZWF0ZVRyYW5zYWN0aW9uKGZ1bmN0aW9uIChvYmplY3RTdG9yZSkgeyByZXR1cm4gb2JqZWN0U3RvcmUuZ2V0KGtleSk7IH0pO1xyXG4gICAgfTtcclxuICAgIC8qKiBHZXRzIHJlY29yZChzKSBmcm9tIHRoZSBvYmplY3RTdG9yZSB0aGF0IG1hdGNoIHRoZSBnaXZlbiBpbmRleC4gKi9cclxuICAgIERiSW50ZXJmYWNlLnByb3RvdHlwZS5nZXRJbmRleCA9IGZ1bmN0aW9uIChpbmRleCwga2V5KSB7XHJcbiAgICAgICAgZnVuY3Rpb24gcnVuUmVxdWVzdChvYmplY3RTdG9yZSkge1xyXG4gICAgICAgICAgICB2YXIgaWRiSW5kZXggPSBvYmplY3RTdG9yZS5pbmRleChpbmRleCk7XHJcbiAgICAgICAgICAgIHJldHVybiBpZGJJbmRleC5nZXQoa2V5KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY3JlYXRlVHJhbnNhY3Rpb24ocnVuUmVxdWVzdCk7XHJcbiAgICB9O1xyXG4gICAgLyoqIEFzc2lnbnMgb3Igb3ZlcndyaXRlcyB0aGUgcmVjb3JkIGZvciB0aGUgZ2l2ZW4gdmFsdWUuICovXHJcbiAgICAvLyBJbmRleGVkREIgdmFsdWVzIGFyZSBvZiB0eXBlIFwiYW55XCJcclxuICAgIERiSW50ZXJmYWNlLnByb3RvdHlwZS5wdXQgPSBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jcmVhdGVUcmFuc2FjdGlvbihmdW5jdGlvbiAob2JqZWN0U3RvcmUpIHsgcmV0dXJuIG9iamVjdFN0b3JlLnB1dCh2YWx1ZSk7IH0sICdyZWFkd3JpdGUnKTtcclxuICAgIH07XHJcbiAgICAvKiogRGVsZXRlcyByZWNvcmQocykgZnJvbSB0aGUgb2JqZWN0U3RvcmUgdGhhdCBtYXRjaCB0aGUgZ2l2ZW4ga2V5LiAqL1xyXG4gICAgRGJJbnRlcmZhY2UucHJvdG90eXBlLmRlbGV0ZSA9IGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jcmVhdGVUcmFuc2FjdGlvbihmdW5jdGlvbiAob2JqZWN0U3RvcmUpIHsgcmV0dXJuIG9iamVjdFN0b3JlLmRlbGV0ZShrZXkpOyB9LCAncmVhZHdyaXRlJyk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBDbG9zZSB0aGUgY3VycmVudGx5IG9wZW4gZGF0YWJhc2UuXHJcbiAgICAgKi9cclxuICAgIERiSW50ZXJmYWNlLnByb3RvdHlwZS5jbG9zZURhdGFiYXNlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGRiO1xyXG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuZGJQcm9taXNlKSByZXR1cm4gWzMgLypicmVhayovLCAyXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5kYlByb21pc2VdO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGIgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRiLmNsb3NlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGJQcm9taXNlID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSAyO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYW4gSW5kZXhlZERCIFRyYW5zYWN0aW9uIGFuZCBwYXNzZXMgaXRzIG9iamVjdFN0b3JlIHRvIHRoZVxyXG4gICAgICogcnVuUmVxdWVzdCBmdW5jdGlvbiwgd2hpY2ggcnVucyB0aGUgZGF0YWJhc2UgcmVxdWVzdC5cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJuIFByb21pc2UgdGhhdCByZXNvbHZlcyB3aXRoIHRoZSByZXN1bHQgb2YgdGhlIHJ1blJlcXVlc3QgZnVuY3Rpb25cclxuICAgICAqL1xyXG4gICAgRGJJbnRlcmZhY2UucHJvdG90eXBlLmNyZWF0ZVRyYW5zYWN0aW9uID0gZnVuY3Rpb24gKHJ1blJlcXVlc3QsIG1vZGUpIHtcclxuICAgICAgICBpZiAobW9kZSA9PT0gdm9pZCAwKSB7IG1vZGUgPSAncmVhZG9ubHknOyB9XHJcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgZGIsIHRyYW5zYWN0aW9uLCByZXF1ZXN0LCByZXN1bHQ7XHJcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6IHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuZ2V0RGIoKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYiA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb24gPSBkYi50cmFuc2FjdGlvbih0aGlzLm9iamVjdFN0b3JlTmFtZSwgbW9kZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3QgPSB0cmFuc2FjdGlvbi5vYmplY3RTdG9yZSh0aGlzLm9iamVjdFN0b3JlTmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHByb21pc2lmeShydW5SZXF1ZXN0KHJlcXVlc3QpKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb24ub25jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShyZXN1bHQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb24ub25lcnJvciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHRyYW5zYWN0aW9uLmVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSldO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKiogR2V0cyB0aGUgY2FjaGVkIGRiIGNvbm5lY3Rpb24gb3Igb3BlbnMgYSBuZXcgb25lLiAqL1xyXG4gICAgRGJJbnRlcmZhY2UucHJvdG90eXBlLmdldERiID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgaWYgKCF0aGlzLmRiUHJvbWlzZSkge1xyXG4gICAgICAgICAgICB0aGlzLmRiUHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgICAgIHZhciByZXF1ZXN0ID0gaW5kZXhlZERCLm9wZW4oX3RoaXMuZGJOYW1lLCBfdGhpcy5kYlZlcnNpb24pO1xyXG4gICAgICAgICAgICAgICAgcmVxdWVzdC5vbnN1Y2Nlc3MgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShyZXF1ZXN0LnJlc3VsdCk7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgcmVxdWVzdC5vbmVycm9yID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmRiUHJvbWlzZSA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHJlcXVlc3QuZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIHJlcXVlc3Qub251cGdyYWRlbmVlZGVkID0gZnVuY3Rpb24gKGV2ZW50KSB7IHJldHVybiBfdGhpcy5vbkRiVXBncmFkZShyZXF1ZXN0LCBldmVudCk7IH07XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5kYlByb21pc2U7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIERiSW50ZXJmYWNlO1xyXG59KCkpO1xyXG4vKiogUHJvbWlzaWZpZXMgYW4gSURCUmVxdWVzdC4gUmVzb2x2ZXMgd2l0aCB0aGUgSURCUmVxdWVzdCdzIHJlc3VsdC4gKi9cclxuZnVuY3Rpb24gcHJvbWlzaWZ5KHJlcXVlc3QpIHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgcmVxdWVzdC5vbnN1Y2Nlc3MgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJlc29sdmUocmVxdWVzdC5yZXN1bHQpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmVxdWVzdC5vbmVycm9yID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZWplY3QocmVxdWVzdC5lcnJvcik7XHJcbiAgICAgICAgfTtcclxuICAgIH0pO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG52YXIgVG9rZW5EZXRhaWxzTW9kZWwgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICBfX2V4dGVuZHMoVG9rZW5EZXRhaWxzTW9kZWwsIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBUb2tlbkRldGFpbHNNb2RlbChzZXJ2aWNlcykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMuc2VydmljZXMgPSBzZXJ2aWNlcztcclxuICAgICAgICBfdGhpcy5kYk5hbWUgPSAnZmNtX3Rva2VuX2RldGFpbHNfZGInO1xyXG4gICAgICAgIF90aGlzLmRiVmVyc2lvbiA9IDQ7XHJcbiAgICAgICAgX3RoaXMub2JqZWN0U3RvcmVOYW1lID0gJ2ZjbV90b2tlbl9vYmplY3RfU3RvcmUnO1xyXG4gICAgICAgIHJldHVybiBfdGhpcztcclxuICAgIH1cclxuICAgIFRva2VuRGV0YWlsc01vZGVsLnByb3RvdHlwZS5vbkRiVXBncmFkZSA9IGZ1bmN0aW9uIChyZXF1ZXN0LCBldmVudCkge1xyXG4gICAgICAgIHZhciBkYiA9IHJlcXVlc3QucmVzdWx0O1xyXG4gICAgICAgIC8vIExhY2sgb2YgJ2JyZWFrJyBzdGF0ZW1lbnRzIGlzIGludGVudGlvbmFsLlxyXG4gICAgICAgIHN3aXRjaCAoZXZlbnQub2xkVmVyc2lvbikge1xyXG4gICAgICAgICAgICBjYXNlIDA6IHtcclxuICAgICAgICAgICAgICAgIC8vIE5ldyBJREIgaW5zdGFuY2VcclxuICAgICAgICAgICAgICAgIHZhciBvYmplY3RTdG9yZSA9IGRiLmNyZWF0ZU9iamVjdFN0b3JlKHRoaXMub2JqZWN0U3RvcmVOYW1lLCB7XHJcbiAgICAgICAgICAgICAgICAgICAga2V5UGF0aDogJ3N3U2NvcGUnXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIC8vIE1ha2Ugc3VyZSB0aGUgc2VuZGVyIElEIGNhbiBiZSBzZWFyY2hlZFxyXG4gICAgICAgICAgICAgICAgb2JqZWN0U3RvcmUuY3JlYXRlSW5kZXgoJ2ZjbVNlbmRlcklkJywgJ2ZjbVNlbmRlcklkJywge1xyXG4gICAgICAgICAgICAgICAgICAgIHVuaXF1ZTogZmFsc2VcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgb2JqZWN0U3RvcmUuY3JlYXRlSW5kZXgoJ2ZjbVRva2VuJywgJ2ZjbVRva2VuJywgeyB1bmlxdWU6IHRydWUgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2FzZSAxOiB7XHJcbiAgICAgICAgICAgICAgICAvLyBQcmlvciB0byB2ZXJzaW9uIDIsIHdlIHdlcmUgdXNpbmcgZWl0aGVyICdmY21fdG9rZW5fZGV0YWlsc19kYidcclxuICAgICAgICAgICAgICAgIC8vIG9yICd1bmRlZmluZWQnIGFzIHRoZSBkYXRhYmFzZSBuYW1lIGR1ZSB0byBidWcgaW4gdGhlIFNES1xyXG4gICAgICAgICAgICAgICAgLy8gU28gcmVtb3ZlIHRoZSBvbGQgdG9rZW5zIGFuZCBkYXRhYmFzZXMuXHJcbiAgICAgICAgICAgICAgICBjbGVhblYxKHRoaXMuc2VydmljZXMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhc2UgMjoge1xyXG4gICAgICAgICAgICAgICAgLy8gVXBkYXRlIGZyb20gdjIgdG8gdjQgZGlyZWN0bHkgaW4gYSBzaW5nbGUgb3BlbkN1cnNvciByZXF1ZXN0LlxyXG4gICAgICAgICAgICAgICAgLy8gV2UgbmVlZCB0byBkbyB0aGlzIGJlY2F1c2UgZm9yIHNvbWUgcmVhc29uLCBkb2luZyBhIHN1YnNlcXVlbnQgdXBkYXRlIG9uIHRoZSBzYW1lIGRhdGFcclxuICAgICAgICAgICAgICAgIC8vIGluIHRoZSBzYW1lIHRyYW5zYWN0aW9uIGRyb3BzIHRoZSBmaXJzdCB1cGRhdGUuXHJcbiAgICAgICAgICAgICAgICB2YXIgb2JqZWN0U3RvcmUgPSByZXF1ZXN0LnRyYW5zYWN0aW9uLm9iamVjdFN0b3JlKHRoaXMub2JqZWN0U3RvcmVOYW1lKTtcclxuICAgICAgICAgICAgICAgIHZhciBjdXJzb3JSZXF1ZXN0XzEgPSBvYmplY3RTdG9yZS5vcGVuQ3Vyc29yKCk7XHJcbiAgICAgICAgICAgICAgICBjdXJzb3JSZXF1ZXN0XzEub25zdWNjZXNzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjdXJzb3IgPSBjdXJzb3JSZXF1ZXN0XzEucmVzdWx0O1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjdXJzb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gY3Vyc29yLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbmV3VmFsdWUgPSBfX2Fzc2lnbih7fSwgdmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXZhbHVlLmNyZWF0ZVRpbWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1ZhbHVlLmNyZWF0ZVRpbWUgPSBEYXRlLm5vdygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUudmFwaWRLZXkgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdWYWx1ZS52YXBpZEtleSA9IGJhc2U2NFRvQXJyYXlCdWZmZXIodmFsdWUudmFwaWRLZXkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUuYXV0aCA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1ZhbHVlLmF1dGggPSBiYXNlNjRUb0FycmF5QnVmZmVyKHZhbHVlLmF1dGgpLmJ1ZmZlcjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHZhbHVlLmF1dGggPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdWYWx1ZS5wMjU2ZGggPSBiYXNlNjRUb0FycmF5QnVmZmVyKHZhbHVlLnAyNTZkaCkuYnVmZmVyO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUuZmNtUHVzaFNldCA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBuZXdWYWx1ZS5mY21QdXNoU2V0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnNvci51cGRhdGUobmV3VmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJzb3IuY29udGludWUoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgLy8gQnJlYWsgaGVyZSBhcyB3ZSd2ZSBhbHJlYWR5IHVwZGF0ZWQgdG8gdjQuXHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXNlIDM6IHtcclxuICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSBmcm9tIFYzIHRvIFY0LlxyXG4gICAgICAgICAgICAgICAgdmFyIG9iamVjdFN0b3JlID0gcmVxdWVzdC50cmFuc2FjdGlvbi5vYmplY3RTdG9yZSh0aGlzLm9iamVjdFN0b3JlTmFtZSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgY3Vyc29yUmVxdWVzdF8yID0gb2JqZWN0U3RvcmUub3BlbkN1cnNvcigpO1xyXG4gICAgICAgICAgICAgICAgY3Vyc29yUmVxdWVzdF8yLm9uc3VjY2VzcyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgY3Vyc29yID0gY3Vyc29yUmVxdWVzdF8yLnJlc3VsdDtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY3Vyc29yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IGN1cnNvci52YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5ld1ZhbHVlID0gX19hc3NpZ24oe30sIHZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZS5mY21QdXNoU2V0ID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIG5ld1ZhbHVlLmZjbVB1c2hTZXQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgY3Vyc29yLnVwZGF0ZShuZXdWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnNvci5jb250aW51ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBHaXZlbiBhIHRva2VuLCB0aGlzIG1ldGhvZCB3aWxsIGxvb2sgdXAgdGhlIGRldGFpbHMgaW4gaW5kZXhlZERCLlxyXG4gICAgICovXHJcbiAgICBUb2tlbkRldGFpbHNNb2RlbC5wcm90b3R5cGUuZ2V0VG9rZW5EZXRhaWxzRnJvbVRva2VuID0gZnVuY3Rpb24gKGZjbVRva2VuKSB7XHJcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWZjbVRva2VuKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyb3JGYWN0b3J5LmNyZWF0ZShcImJhZC10b2tlblwiIC8qIEJBRF9UT0tFTiAqLyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB2YWxpZGF0ZUlucHV0cyh7IGZjbVRva2VuOiBmY21Ub2tlbiB9KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0aGlzLmdldEluZGV4KCdmY21Ub2tlbicsIGZjbVRva2VuKV07XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogR2l2ZW4gYSBzZXJ2aWNlIHdvcmtlciBzY29wZSwgdGhpcyBtZXRob2Qgd2lsbCBsb29rIHVwIHRoZSBkZXRhaWxzIGluXHJcbiAgICAgKiBpbmRleGVkREIuXHJcbiAgICAgKiBAcmV0dXJuIFRoZSBkZXRhaWxzIGFzc29jaWF0ZWQgd2l0aCB0aGF0IHRva2VuLlxyXG4gICAgICovXHJcbiAgICBUb2tlbkRldGFpbHNNb2RlbC5wcm90b3R5cGUuZ2V0VG9rZW5EZXRhaWxzRnJvbVNXU2NvcGUgPSBmdW5jdGlvbiAoc3dTY29wZSkge1xyXG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFzd1Njb3BlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyb3JGYWN0b3J5LmNyZWF0ZShcImJhZC1zY29wZVwiIC8qIEJBRF9TQ09QRSAqLyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB2YWxpZGF0ZUlucHV0cyh7IHN3U2NvcGU6IHN3U2NvcGUgfSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdGhpcy5nZXQoc3dTY29wZSldO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFNhdmUgdGhlIGRldGFpbHMgZm9yIHRoZSBmY20gdG9rZW4gZm9yIHJlLXVzZSBhdCBhIGxhdGVyIGRhdGUuXHJcbiAgICAgKiBAcGFyYW0gaW5wdXQgQSBwbGFpbiBqcyBvYmplY3QgY29udGFpbmluZyBhcmdzIHRvIHNhdmUuXHJcbiAgICAgKi9cclxuICAgIFRva2VuRGV0YWlsc01vZGVsLnByb3RvdHlwZS5zYXZlVG9rZW5EZXRhaWxzID0gZnVuY3Rpb24gKHRva2VuRGV0YWlscykge1xyXG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCF0b2tlbkRldGFpbHMuc3dTY29wZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IGVycm9yRmFjdG9yeS5jcmVhdGUoXCJiYWQtc2NvcGVcIiAvKiBCQURfU0NPUEUgKi8pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKCF0b2tlbkRldGFpbHMudmFwaWRLZXkpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnJvckZhY3RvcnkuY3JlYXRlKFwiYmFkLXZhcGlkLWtleVwiIC8qIEJBRF9WQVBJRF9LRVkgKi8pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKCF0b2tlbkRldGFpbHMuZW5kcG9pbnQgfHwgIXRva2VuRGV0YWlscy5hdXRoIHx8ICF0b2tlbkRldGFpbHMucDI1NmRoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyb3JGYWN0b3J5LmNyZWF0ZShcImJhZC1zdWJzY3JpcHRpb25cIiAvKiBCQURfU1VCU0NSSVBUSU9OICovKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICghdG9rZW5EZXRhaWxzLmZjbVNlbmRlcklkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyb3JGYWN0b3J5LmNyZWF0ZShcImJhZC1zZW5kZXItaWRcIiAvKiBCQURfU0VOREVSX0lEICovKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICghdG9rZW5EZXRhaWxzLmZjbVRva2VuKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyb3JGYWN0b3J5LmNyZWF0ZShcImJhZC10b2tlblwiIC8qIEJBRF9UT0tFTiAqLyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB2YWxpZGF0ZUlucHV0cyh0b2tlbkRldGFpbHMpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMucHV0KHRva2VuRGV0YWlscyldO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFRoaXMgbWV0aG9kIGRlbGV0ZXMgZGV0YWlscyBvZiB0aGUgY3VycmVudCBGQ00gdG9rZW4uXHJcbiAgICAgKiBJdCdzIHJldHVybmluZyBhIHByb21pc2UgaW4gY2FzZSB3ZSBuZWVkIHRvIG1vdmUgdG8gYW4gYXN5bmNcclxuICAgICAqIG1ldGhvZCBmb3IgZGVsZXRpbmcgYXQgYSBsYXRlciBkYXRlLlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm4gUmVzb2x2ZXMgb25jZSB0aGUgRkNNIHRva2VuIGRldGFpbHMgaGF2ZSBiZWVuIGRlbGV0ZWQgYW5kIHJldHVybnNcclxuICAgICAqIHRoZSBkZWxldGVkIGRldGFpbHMuXHJcbiAgICAgKi9cclxuICAgIFRva2VuRGV0YWlsc01vZGVsLnByb3RvdHlwZS5kZWxldGVUb2tlbiA9IGZ1bmN0aW9uICh0b2tlbikge1xyXG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGRldGFpbHM7XHJcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdG9rZW4gIT09ICdzdHJpbmcnIHx8IHRva2VuLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIFByb21pc2UucmVqZWN0KGVycm9yRmFjdG9yeS5jcmVhdGUoXCJpbnZhbGlkLWRlbGV0ZS10b2tlblwiIC8qIElOVkFMSURfREVMRVRFX1RPS0VOICovKSldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuZ2V0VG9rZW5EZXRhaWxzRnJvbVRva2VuKHRva2VuKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZXRhaWxzID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWRldGFpbHMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IGVycm9yRmFjdG9yeS5jcmVhdGUoXCJkZWxldGUtdG9rZW4tbm90LWZvdW5kXCIgLyogREVMRVRFX1RPS0VOX05PVF9GT1VORCAqLyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5kZWxldGUoZGV0YWlscy5zd1Njb3BlKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBkZXRhaWxzXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFRva2VuRGV0YWlsc01vZGVsO1xyXG59KERiSW50ZXJmYWNlKSk7XHJcbi8qKlxyXG4gKiBUaGlzIG1ldGhvZCB0YWtlcyBhbiBvYmplY3QgYW5kIHdpbGwgY2hlY2sgZm9yIGtub3duIGFyZ3VtZW50cyBhbmRcclxuICogdmFsaWRhdGUgdGhlIGlucHV0LlxyXG4gKiBAcmV0dXJuIFByb21pc2UgdGhhdCByZXNvbHZlcyBpZiBpbnB1dCBpcyB2YWxpZCwgcmVqZWN0cyBvdGhlcndpc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiB2YWxpZGF0ZUlucHV0cyhpbnB1dCkge1xyXG4gICAgaWYgKGlucHV0LmZjbVRva2VuKSB7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBpbnB1dC5mY21Ub2tlbiAhPT0gJ3N0cmluZycgfHwgaW5wdXQuZmNtVG9rZW4ubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIHRocm93IGVycm9yRmFjdG9yeS5jcmVhdGUoXCJiYWQtdG9rZW5cIiAvKiBCQURfVE9LRU4gKi8pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGlmIChpbnB1dC5zd1Njb3BlKSB7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBpbnB1dC5zd1Njb3BlICE9PSAnc3RyaW5nJyB8fCBpbnB1dC5zd1Njb3BlLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICB0aHJvdyBlcnJvckZhY3RvcnkuY3JlYXRlKFwiYmFkLXNjb3BlXCIgLyogQkFEX1NDT1BFICovKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAoaW5wdXQudmFwaWRLZXkpIHtcclxuICAgICAgICBpZiAoIShpbnB1dC52YXBpZEtleSBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpIHx8XHJcbiAgICAgICAgICAgIGlucHV0LnZhcGlkS2V5Lmxlbmd0aCAhPT0gNjUpIHtcclxuICAgICAgICAgICAgdGhyb3cgZXJyb3JGYWN0b3J5LmNyZWF0ZShcImJhZC12YXBpZC1rZXlcIiAvKiBCQURfVkFQSURfS0VZICovKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAoaW5wdXQuZW5kcG9pbnQpIHtcclxuICAgICAgICBpZiAodHlwZW9mIGlucHV0LmVuZHBvaW50ICE9PSAnc3RyaW5nJyB8fCBpbnB1dC5lbmRwb2ludC5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgdGhyb3cgZXJyb3JGYWN0b3J5LmNyZWF0ZShcImJhZC1zdWJzY3JpcHRpb25cIiAvKiBCQURfU1VCU0NSSVBUSU9OICovKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAoaW5wdXQuYXV0aCkge1xyXG4gICAgICAgIGlmICghKGlucHV0LmF1dGggaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikpIHtcclxuICAgICAgICAgICAgdGhyb3cgZXJyb3JGYWN0b3J5LmNyZWF0ZShcImJhZC1zdWJzY3JpcHRpb25cIiAvKiBCQURfU1VCU0NSSVBUSU9OICovKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAoaW5wdXQucDI1NmRoKSB7XHJcbiAgICAgICAgaWYgKCEoaW5wdXQucDI1NmRoIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpKSB7XHJcbiAgICAgICAgICAgIHRocm93IGVycm9yRmFjdG9yeS5jcmVhdGUoXCJiYWQtc3Vic2NyaXB0aW9uXCIgLyogQkFEX1NVQlNDUklQVElPTiAqLyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKGlucHV0LmZjbVNlbmRlcklkKSB7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBpbnB1dC5mY21TZW5kZXJJZCAhPT0gJ3N0cmluZycgfHxcclxuICAgICAgICAgICAgaW5wdXQuZmNtU2VuZGVySWQubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIHRocm93IGVycm9yRmFjdG9yeS5jcmVhdGUoXCJiYWQtc2VuZGVyLWlkXCIgLyogQkFEX1NFTkRFUl9JRCAqLyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG52YXIgVU5DT01QUkVTU0VEX1BVQkxJQ19LRVlfU0laRSA9IDY1O1xyXG52YXIgVmFwaWREZXRhaWxzTW9kZWwgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICBfX2V4dGVuZHMoVmFwaWREZXRhaWxzTW9kZWwsIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBWYXBpZERldGFpbHNNb2RlbCgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcclxuICAgICAgICBfdGhpcy5kYk5hbWUgPSAnZmNtX3ZhcGlkX2RldGFpbHNfZGInO1xyXG4gICAgICAgIF90aGlzLmRiVmVyc2lvbiA9IDE7XHJcbiAgICAgICAgX3RoaXMub2JqZWN0U3RvcmVOYW1lID0gJ2ZjbV92YXBpZF9vYmplY3RfU3RvcmUnO1xyXG4gICAgICAgIHJldHVybiBfdGhpcztcclxuICAgIH1cclxuICAgIFZhcGlkRGV0YWlsc01vZGVsLnByb3RvdHlwZS5vbkRiVXBncmFkZSA9IGZ1bmN0aW9uIChyZXF1ZXN0KSB7XHJcbiAgICAgICAgdmFyIGRiID0gcmVxdWVzdC5yZXN1bHQ7XHJcbiAgICAgICAgZGIuY3JlYXRlT2JqZWN0U3RvcmUodGhpcy5vYmplY3RTdG9yZU5hbWUsIHsga2V5UGF0aDogJ3N3U2NvcGUnIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogR2l2ZW4gYSBzZXJ2aWNlIHdvcmtlciBzY29wZSwgdGhpcyBtZXRob2Qgd2lsbCBsb29rIHVwIHRoZSB2YXBpZCBrZXlcclxuICAgICAqIGluIGluZGV4ZWREQi5cclxuICAgICAqL1xyXG4gICAgVmFwaWREZXRhaWxzTW9kZWwucHJvdG90eXBlLmdldFZhcGlkRnJvbVNXU2NvcGUgPSBmdW5jdGlvbiAoc3dTY29wZSkge1xyXG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHJlc3VsdDtcclxuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBzd1Njb3BlICE9PSAnc3RyaW5nJyB8fCBzd1Njb3BlLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyb3JGYWN0b3J5LmNyZWF0ZShcImJhZC1zY29wZVwiIC8qIEJBRF9TQ09QRSAqLyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5nZXQoc3dTY29wZSldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgcmVzdWx0ID8gcmVzdWx0LnZhcGlkS2V5IDogdW5kZWZpbmVkXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBTYXZlIGEgdmFwaWQga2V5IGFnYWluc3QgYSBzd1Njb3BlIGZvciBsYXRlciBkYXRlLlxyXG4gICAgICovXHJcbiAgICBWYXBpZERldGFpbHNNb2RlbC5wcm90b3R5cGUuc2F2ZVZhcGlkRGV0YWlscyA9IGZ1bmN0aW9uIChzd1Njb3BlLCB2YXBpZEtleSkge1xyXG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGRldGFpbHM7XHJcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygc3dTY29wZSAhPT0gJ3N0cmluZycgfHwgc3dTY29wZS5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnJvckZhY3RvcnkuY3JlYXRlKFwiYmFkLXNjb3BlXCIgLyogQkFEX1NDT1BFICovKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICh2YXBpZEtleSA9PT0gbnVsbCB8fCB2YXBpZEtleS5sZW5ndGggIT09IFVOQ09NUFJFU1NFRF9QVUJMSUNfS0VZX1NJWkUpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnJvckZhY3RvcnkuY3JlYXRlKFwiYmFkLXZhcGlkLWtleVwiIC8qIEJBRF9WQVBJRF9LRVkgKi8pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZGV0YWlscyA9IHtcclxuICAgICAgICAgICAgICAgICAgICBzd1Njb3BlOiBzd1Njb3BlLFxyXG4gICAgICAgICAgICAgICAgICAgIHZhcGlkS2V5OiB2YXBpZEtleVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0aGlzLnB1dChkZXRhaWxzKV07XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogVGhpcyBtZXRob2QgZGVsZXRlcyBkZXRhaWxzIG9mIHRoZSBjdXJyZW50IEZDTSBWQVBJRCBrZXkgZm9yIGEgU1cgc2NvcGUuXHJcbiAgICAgKiBSZXNvbHZlcyBvbmNlIHRoZSBzY29wZS92YXBpZCBkZXRhaWxzIGhhdmUgYmVlbiBkZWxldGVkIGFuZCByZXR1cm5zIHRoZVxyXG4gICAgICogZGVsZXRlZCB2YXBpZCBrZXkuXHJcbiAgICAgKi9cclxuICAgIFZhcGlkRGV0YWlsc01vZGVsLnByb3RvdHlwZS5kZWxldGVWYXBpZERldGFpbHMgPSBmdW5jdGlvbiAoc3dTY29wZSkge1xyXG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHZhcGlkS2V5O1xyXG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOiByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmdldFZhcGlkRnJvbVNXU2NvcGUoc3dTY29wZSldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFwaWRLZXkgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdmFwaWRLZXkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IGVycm9yRmFjdG9yeS5jcmVhdGUoXCJkZWxldGUtc2NvcGUtbm90LWZvdW5kXCIgLyogREVMRVRFX1NDT1BFX05PVF9GT1VORCAqLyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5kZWxldGUoc3dTY29wZSldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdmFwaWRLZXldO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gVmFwaWREZXRhaWxzTW9kZWw7XHJcbn0oRGJJbnRlcmZhY2UpKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8vIFRva2VuIHNob3VsZCBiZSByZWZyZXNoZWQgb25jZSBhIHdlZWsuXHJcbnZhciBUT0tFTl9FWFBJUkFUSU9OX01JTExJUyA9IDcgKiAyNCAqIDYwICogNjAgKiAxMDAwOyAvLyA3IGRheXNcclxudmFyIEJhc2VDb250cm9sbGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gQmFzZUNvbnRyb2xsZXIoc2VydmljZXMpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMuc2VydmljZXMgPSBzZXJ2aWNlcztcclxuICAgICAgICB0aGlzLnZhcGlkRGV0YWlsc01vZGVsID0gbmV3IFZhcGlkRGV0YWlsc01vZGVsKCk7XHJcbiAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25NYW5hZ2VyID0gbmV3IFN1YnNjcmlwdGlvbk1hbmFnZXIoKTtcclxuICAgICAgICB2YXIgYXBwID0gc2VydmljZXMuYXBwO1xyXG4gICAgICAgIHRoaXMuYXBwID0gYXBwO1xyXG4gICAgICAgIGlmICghYXBwLm9wdGlvbnMubWVzc2FnaW5nU2VuZGVySWQgfHxcclxuICAgICAgICAgICAgdHlwZW9mIGFwcC5vcHRpb25zLm1lc3NhZ2luZ1NlbmRlcklkICE9PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICB0aHJvdyBlcnJvckZhY3RvcnkuY3JlYXRlKFwiYmFkLXNlbmRlci1pZFwiIC8qIEJBRF9TRU5ERVJfSUQgKi8pO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLklOVEVSTkFMID0ge1xyXG4gICAgICAgICAgICBkZWxldGU6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLmRlbGV0ZSgpOyB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLnRva2VuRGV0YWlsc01vZGVsID0gbmV3IFRva2VuRGV0YWlsc01vZGVsKHNlcnZpY2VzKTtcclxuICAgIH1cclxuICAgIEJhc2VDb250cm9sbGVyLnByb3RvdHlwZS5nZXRUb2tlbiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBwZXJtaXNzaW9uLCBzd1JlZywgcHVibGljVmFwaWRLZXksIHB1c2hTdWJzY3JpcHRpb24sIHRva2VuRGV0YWlscztcclxuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGVybWlzc2lvbiA9IHRoaXMuZ2V0Tm90aWZpY2F0aW9uUGVybWlzc2lvbigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShwZXJtaXNzaW9uID09PSAnZGVmYXVsdCcpKSByZXR1cm4gWzMgLypicmVhayovLCAyXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5yZXF1ZXN0Tm90aWZpY2F0aW9uUGVybWlzc2lvbigpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoZSB1c2VyIGhhc24ndCBhbGxvd2VkIG9yIGRlbmllZCBub3RpZmljYXRpb25zIHlldC4gQXNrIHRoZW0uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBlcm1pc3Npb24gPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLmxhYmVsID0gMjtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwZXJtaXNzaW9uICE9PSAnZ3JhbnRlZCcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IGVycm9yRmFjdG9yeS5jcmVhdGUoXCJub3RpZmljYXRpb25zLWJsb2NrZWRcIiAvKiBOT1RJRklDQVRJT05TX0JMT0NLRUQgKi8pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuZ2V0U1dSZWdpc3RyYXRpb25fKCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3dSZWcgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuZ2V0UHVibGljVmFwaWRLZXlfKCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHVibGljVmFwaWRLZXkgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuZ2V0UHVzaFN1YnNjcmlwdGlvbihzd1JlZywgcHVibGljVmFwaWRLZXkpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHB1c2hTdWJzY3JpcHRpb24gPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMudG9rZW5EZXRhaWxzTW9kZWwuZ2V0VG9rZW5EZXRhaWxzRnJvbVNXU2NvcGUoc3dSZWcuc2NvcGUpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDY6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRva2VuRGV0YWlscyA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRva2VuRGV0YWlscykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMubWFuYWdlRXhpc3RpbmdUb2tlbihzd1JlZywgcHVzaFN1YnNjcmlwdGlvbiwgcHVibGljVmFwaWRLZXksIHRva2VuRGV0YWlscyldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0aGlzLmdldE5ld1Rva2VuKHN3UmVnLCBwdXNoU3Vic2NyaXB0aW9uLCBwdWJsaWNWYXBpZEtleSldO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIG1hbmFnZUV4aXN0aW5nVG9rZW4gaXMgdHJpZ2dlcmVkIGlmIHRoZXJlJ3MgYW4gZXhpc3RpbmcgRkNNIHRva2VuIGluIHRoZVxyXG4gICAgICogZGF0YWJhc2UgYW5kIGl0IGNhbiB0YWtlIDMgZGlmZmVyZW50IGFjdGlvbnM6XHJcbiAgICAgKiAxKSBSZXRyaWV2ZSB0aGUgZXhpc3RpbmcgRkNNIHRva2VuIGZyb20gdGhlIGRhdGFiYXNlLlxyXG4gICAgICogMikgSWYgVkFQSUQgZGV0YWlscyBoYXZlIGNoYW5nZWQ6IERlbGV0ZSB0aGUgZXhpc3RpbmcgdG9rZW4gYW5kIGNyZWF0ZSBhXHJcbiAgICAgKiBuZXcgb25lIHdpdGggdGhlIG5ldyBWQVBJRCBrZXkuXHJcbiAgICAgKiAzKSBJZiB0aGUgZGF0YWJhc2UgY2FjaGUgaXMgaW52YWxpZGF0ZWQ6IFNlbmQgYSByZXF1ZXN0IHRvIEZDTSB0byB1cGRhdGVcclxuICAgICAqIHRoZSB0b2tlbiwgYW5kIHRvIGNoZWNrIGlmIHRoZSB0b2tlbiBpcyBzdGlsbCB2YWxpZCBvbiBGQ00tc2lkZS5cclxuICAgICAqL1xyXG4gICAgQmFzZUNvbnRyb2xsZXIucHJvdG90eXBlLm1hbmFnZUV4aXN0aW5nVG9rZW4gPSBmdW5jdGlvbiAoc3dSZWcsIHB1c2hTdWJzY3JpcHRpb24sIHB1YmxpY1ZhcGlkS2V5LCB0b2tlbkRldGFpbHMpIHtcclxuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBpc1Rva2VuVmFsaWQsIG5vdztcclxuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXNUb2tlblZhbGlkID0gaXNUb2tlblN0aWxsVmFsaWQocHVzaFN1YnNjcmlwdGlvbiwgcHVibGljVmFwaWRLZXksIHRva2VuRGV0YWlscyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaXNUb2tlblZhbGlkKSByZXR1cm4gWzMgLypicmVhayovLCAxXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbm93ID0gRGF0ZS5ub3coKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5vdyA8IHRva2VuRGV0YWlscy5jcmVhdGVUaW1lICsgVE9LRU5fRVhQSVJBVElPTl9NSUxMSVMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0b2tlbkRldGFpbHMuZmNtVG9rZW5dO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMudXBkYXRlVG9rZW4oc3dSZWcsIHB1c2hTdWJzY3JpcHRpb24sIHB1YmxpY1ZhcGlkS2V5LCB0b2tlbkRldGFpbHMpXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTogXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlIHRva2VuIGlzIG5vIGxvbmdlciB2YWxpZCAoZm9yIGV4YW1wbGUgaWYgdGhlIFZBUElEIGRldGFpbHNcclxuICAgICAgICAgICAgICAgICAgICAvLyBoYXZlIGNoYW5nZWQpLCBkZWxldGUgdGhlIGV4aXN0aW5nIHRva2VuIGZyb20gdGhlIEZDTSBjbGllbnQgYW5kIHNlcnZlclxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGRhdGFiYXNlLiBObyBuZWVkIHRvIHVuc3Vic2NyaWJlIGZyb20gdGhlIFNlcnZpY2UgV29ya2VyIGFzIHdlIGhhdmUgYVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGdvb2QgcHVzaCBzdWJzY3JpcHRpb24gdGhhdCB3ZSdkIGxpa2UgdG8gdXNlIGluIGdldE5ld1Rva2VuLlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuZGVsZXRlVG9rZW5Gcm9tREIodG9rZW5EZXRhaWxzLmZjbVRva2VuKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGUgdG9rZW4gaXMgbm8gbG9uZ2VyIHZhbGlkIChmb3IgZXhhbXBsZSBpZiB0aGUgVkFQSUQgZGV0YWlsc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBoYXZlIGNoYW5nZWQpLCBkZWxldGUgdGhlIGV4aXN0aW5nIHRva2VuIGZyb20gdGhlIEZDTSBjbGllbnQgYW5kIHNlcnZlclxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBkYXRhYmFzZS4gTm8gbmVlZCB0byB1bnN1YnNjcmliZSBmcm9tIHRoZSBTZXJ2aWNlIFdvcmtlciBhcyB3ZSBoYXZlIGFcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZ29vZCBwdXNoIHN1YnNjcmlwdGlvbiB0aGF0IHdlJ2QgbGlrZSB0byB1c2UgaW4gZ2V0TmV3VG9rZW4uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMuZ2V0TmV3VG9rZW4oc3dSZWcsIHB1c2hTdWJzY3JpcHRpb24sIHB1YmxpY1ZhcGlkS2V5KV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOiByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIEJhc2VDb250cm9sbGVyLnByb3RvdHlwZS51cGRhdGVUb2tlbiA9IGZ1bmN0aW9uIChzd1JlZywgcHVzaFN1YnNjcmlwdGlvbiwgcHVibGljVmFwaWRLZXksIHRva2VuRGV0YWlscykge1xyXG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHVwZGF0ZWRUb2tlbiwgYWxsRGV0YWlscywgZV8xO1xyXG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS50cnlzLnB1c2goWzAsIDQsICwgNl0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLnN1YnNjcmlwdGlvbk1hbmFnZXIudXBkYXRlVG9rZW4odG9rZW5EZXRhaWxzLCB0aGlzLnNlcnZpY2VzLCBwdXNoU3Vic2NyaXB0aW9uLCBwdWJsaWNWYXBpZEtleSldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlZFRva2VuID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbGxEZXRhaWxzID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dTY29wZTogc3dSZWcuc2NvcGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXBpZEtleTogcHVibGljVmFwaWRLZXksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmY21TZW5kZXJJZDogdGhpcy5zZXJ2aWNlcy5hcHAub3B0aW9ucy5tZXNzYWdpbmdTZW5kZXJJZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZjbVRva2VuOiB1cGRhdGVkVG9rZW4sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcmVhdGVUaW1lOiBEYXRlLm5vdygpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kcG9pbnQ6IHB1c2hTdWJzY3JpcHRpb24uZW5kcG9pbnQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdXRoOiBwdXNoU3Vic2NyaXB0aW9uLmdldEtleSgnYXV0aCcpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcDI1NmRoOiBwdXNoU3Vic2NyaXB0aW9uLmdldEtleSgncDI1NmRoJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy50b2tlbkRldGFpbHNNb2RlbC5zYXZlVG9rZW5EZXRhaWxzKGFsbERldGFpbHMpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy52YXBpZERldGFpbHNNb2RlbC5zYXZlVmFwaWREZXRhaWxzKHN3UmVnLnNjb3BlLCBwdWJsaWNWYXBpZEtleSldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdXBkYXRlZFRva2VuXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVfMSA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5kZWxldGVUb2tlbih0b2tlbkRldGFpbHMuZmNtVG9rZW4pXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgZV8xO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNjogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBCYXNlQ29udHJvbGxlci5wcm90b3R5cGUuZ2V0TmV3VG9rZW4gPSBmdW5jdGlvbiAoc3dSZWcsIHB1c2hTdWJzY3JpcHRpb24sIHB1YmxpY1ZhcGlkS2V5KSB7XHJcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgbmV3VG9rZW4sIGFsbERldGFpbHM7XHJcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6IHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuc3Vic2NyaXB0aW9uTWFuYWdlci5nZXRUb2tlbih0aGlzLnNlcnZpY2VzLCBwdXNoU3Vic2NyaXB0aW9uLCBwdWJsaWNWYXBpZEtleSldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3VG9rZW4gPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFsbERldGFpbHMgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd1Njb3BlOiBzd1JlZy5zY29wZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhcGlkS2V5OiBwdWJsaWNWYXBpZEtleSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZjbVNlbmRlcklkOiB0aGlzLmFwcC5vcHRpb25zLm1lc3NhZ2luZ1NlbmRlcklkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmNtVG9rZW46IG5ld1Rva2VuLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3JlYXRlVGltZTogRGF0ZS5ub3coKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZHBvaW50OiBwdXNoU3Vic2NyaXB0aW9uLmVuZHBvaW50LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXV0aDogcHVzaFN1YnNjcmlwdGlvbi5nZXRLZXkoJ2F1dGgnKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHAyNTZkaDogcHVzaFN1YnNjcmlwdGlvbi5nZXRLZXkoJ3AyNTZkaCcpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMudG9rZW5EZXRhaWxzTW9kZWwuc2F2ZVRva2VuRGV0YWlscyhhbGxEZXRhaWxzKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMudmFwaWREZXRhaWxzTW9kZWwuc2F2ZVZhcGlkRGV0YWlscyhzd1JlZy5zY29wZSwgcHVibGljVmFwaWRLZXkpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIG5ld1Rva2VuXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBUaGlzIG1ldGhvZCBkZWxldGVzIHRva2VucyB0aGF0IHRoZSB0b2tlbiBtYW5hZ2VyIGxvb2tzIGFmdGVyLFxyXG4gICAgICogdW5zdWJzY3JpYmVzIHRoZSB0b2tlbiBmcm9tIEZDTSAgYW5kIHRoZW4gdW5yZWdpc3RlcnMgdGhlIHB1c2hcclxuICAgICAqIHN1YnNjcmlwdGlvbiBpZiBpdCBleGlzdHMuIEl0IHJldHVybnMgYSBwcm9taXNlIHRoYXQgaW5kaWNhdGVzXHJcbiAgICAgKiB3aGV0aGVyIG9yIG5vdCB0aGUgdW5zdWJzY3JpYmUgcmVxdWVzdCB3YXMgcHJvY2Vzc2VkIHN1Y2Nlc3NmdWxseS5cclxuICAgICAqL1xyXG4gICAgQmFzZUNvbnRyb2xsZXIucHJvdG90eXBlLmRlbGV0ZVRva2VuID0gZnVuY3Rpb24gKHRva2VuKSB7XHJcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgcmVnaXN0cmF0aW9uLCBwdXNoU3Vic2NyaXB0aW9uO1xyXG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOiBcclxuICAgICAgICAgICAgICAgICAgICAvLyBEZWxldGUgdGhlIHRva2VuIGRldGFpbHMgZnJvbSB0aGUgZGF0YWJhc2UuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5kZWxldGVUb2tlbkZyb21EQih0b2tlbildO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRGVsZXRlIHRoZSB0b2tlbiBkZXRhaWxzIGZyb20gdGhlIGRhdGFiYXNlLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuZ2V0U1dSZWdpc3RyYXRpb25fKCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVnaXN0cmF0aW9uID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXJlZ2lzdHJhdGlvbikgcmV0dXJuIFszIC8qYnJlYWsqLywgNF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHJlZ2lzdHJhdGlvbi5wdXNoTWFuYWdlci5nZXRTdWJzY3JpcHRpb24oKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwdXNoU3Vic2NyaXB0aW9uID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocHVzaFN1YnNjcmlwdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHB1c2hTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSA0O1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDogXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlcmUncyBubyBTVywgY29uc2lkZXIgaXQgYSBzdWNjZXNzLlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0cnVlXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBUaGlzIG1ldGhvZCB3aWxsIGRlbGV0ZSB0aGUgdG9rZW4gZnJvbSB0aGUgY2xpZW50IGRhdGFiYXNlLCBhbmQgbWFrZSBhXHJcbiAgICAgKiBjYWxsIHRvIEZDTSB0byByZW1vdmUgaXQgZnJvbSB0aGUgc2VydmVyIERCLiBEb2VzIG5vdCB0ZW1wZXIgd2l0aCB0aGVcclxuICAgICAqIHB1c2ggc3Vic2NyaXB0aW9uLlxyXG4gICAgICovXHJcbiAgICBCYXNlQ29udHJvbGxlci5wcm90b3R5cGUuZGVsZXRlVG9rZW5Gcm9tREIgPSBmdW5jdGlvbiAodG9rZW4pIHtcclxuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciB0b2tlbkRldGFpbHMsIGVfMjtcclxuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDogcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy50b2tlbkRldGFpbHNNb2RlbC5kZWxldGVUb2tlbih0b2tlbildO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG9rZW5EZXRhaWxzID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDI7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS50cnlzLnB1c2goWzIsIDQsICwgNV0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLnN1YnNjcmlwdGlvbk1hbmFnZXIuZGVsZXRlVG9rZW4odGhpcy5zZXJ2aWNlcywgdG9rZW5EZXRhaWxzKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDVdO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgZV8yID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBBIGZhaWxlZCBzZXJ2ZXItc2lkZSBkZWxldGUgZG9lcyBub3QgbmVlZCB0byBicmVhayB0aGUgYXBwLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVfMik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDVdO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNTogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEdldHMgYSBQdXNoU3Vic2NyaXB0aW9uIGZvciB0aGUgY3VycmVudCB1c2VyLlxyXG4gICAgICovXHJcbiAgICBCYXNlQ29udHJvbGxlci5wcm90b3R5cGUuZ2V0UHVzaFN1YnNjcmlwdGlvbiA9IGZ1bmN0aW9uIChzd1JlZ2lzdHJhdGlvbiwgcHVibGljVmFwaWRLZXkpIHtcclxuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBzdWJzY3JpcHRpb247XHJcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6IHJldHVybiBbNCAvKnlpZWxkKi8sIHN3UmVnaXN0cmF0aW9uLnB1c2hNYW5hZ2VyLmdldFN1YnNjcmlwdGlvbigpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1YnNjcmlwdGlvbiA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN1YnNjcmlwdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHN1YnNjcmlwdGlvbl07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHN3UmVnaXN0cmF0aW9uLnB1c2hNYW5hZ2VyLnN1YnNjcmliZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlclZpc2libGVPbmx5OiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwcGxpY2F0aW9uU2VydmVyS2V5OiBwdWJsaWNWYXBpZEtleVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSldO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvL1xyXG4gICAgLy8gVGhlIGZvbGxvd2luZyBtZXRob2RzIHNob3VsZCBvbmx5IGJlIGF2YWlsYWJsZSBpbiB0aGUgd2luZG93LlxyXG4gICAgLy9cclxuICAgIC8qKlxyXG4gICAgICogQGRlcHJlY2F0ZWQgVXNlIE5vdGlmaWNhdGlvbi5yZXF1ZXN0UGVybWlzc2lvbigpIGluc3RlYWQuXHJcbiAgICAgKiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvTm90aWZpY2F0aW9uL3JlcXVlc3RQZXJtaXNzaW9uXHJcbiAgICAgKi9cclxuICAgIEJhc2VDb250cm9sbGVyLnByb3RvdHlwZS5yZXF1ZXN0UGVybWlzc2lvbiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aHJvdyBlcnJvckZhY3RvcnkuY3JlYXRlKFwib25seS1hdmFpbGFibGUtaW4td2luZG93XCIgLyogQVZBSUxBQkxFX0lOX1dJTkRPVyAqLyk7XHJcbiAgICB9O1xyXG4gICAgQmFzZUNvbnRyb2xsZXIucHJvdG90eXBlLnVzZVNlcnZpY2VXb3JrZXIgPSBmdW5jdGlvbiAoX3JlZ2lzdHJhdGlvbikge1xyXG4gICAgICAgIHRocm93IGVycm9yRmFjdG9yeS5jcmVhdGUoXCJvbmx5LWF2YWlsYWJsZS1pbi13aW5kb3dcIiAvKiBBVkFJTEFCTEVfSU5fV0lORE9XICovKTtcclxuICAgIH07XHJcbiAgICBCYXNlQ29udHJvbGxlci5wcm90b3R5cGUudXNlUHVibGljVmFwaWRLZXkgPSBmdW5jdGlvbiAoX2I2NFB1YmxpY0tleSkge1xyXG4gICAgICAgIHRocm93IGVycm9yRmFjdG9yeS5jcmVhdGUoXCJvbmx5LWF2YWlsYWJsZS1pbi13aW5kb3dcIiAvKiBBVkFJTEFCTEVfSU5fV0lORE9XICovKTtcclxuICAgIH07XHJcbiAgICBCYXNlQ29udHJvbGxlci5wcm90b3R5cGUub25NZXNzYWdlID0gZnVuY3Rpb24gKF9uZXh0T3JPYnNlcnZlciwgX2Vycm9yLCBfY29tcGxldGVkKSB7XHJcbiAgICAgICAgdGhyb3cgZXJyb3JGYWN0b3J5LmNyZWF0ZShcIm9ubHktYXZhaWxhYmxlLWluLXdpbmRvd1wiIC8qIEFWQUlMQUJMRV9JTl9XSU5ET1cgKi8pO1xyXG4gICAgfTtcclxuICAgIEJhc2VDb250cm9sbGVyLnByb3RvdHlwZS5vblRva2VuUmVmcmVzaCA9IGZ1bmN0aW9uIChfbmV4dE9yT2JzZXJ2ZXIsIF9lcnJvciwgX2NvbXBsZXRlZCkge1xyXG4gICAgICAgIHRocm93IGVycm9yRmFjdG9yeS5jcmVhdGUoXCJvbmx5LWF2YWlsYWJsZS1pbi13aW5kb3dcIiAvKiBBVkFJTEFCTEVfSU5fV0lORE9XICovKTtcclxuICAgIH07XHJcbiAgICAvL1xyXG4gICAgLy8gVGhlIGZvbGxvd2luZyBtZXRob2RzIGFyZSB1c2VkIGJ5IHRoZSBzZXJ2aWNlIHdvcmtlciBvbmx5LlxyXG4gICAgLy9cclxuICAgIEJhc2VDb250cm9sbGVyLnByb3RvdHlwZS5zZXRCYWNrZ3JvdW5kTWVzc2FnZUhhbmRsZXIgPSBmdW5jdGlvbiAoX2NhbGxiYWNrKSB7XHJcbiAgICAgICAgdGhyb3cgZXJyb3JGYWN0b3J5LmNyZWF0ZShcIm9ubHktYXZhaWxhYmxlLWluLXN3XCIgLyogQVZBSUxBQkxFX0lOX1NXICovKTtcclxuICAgIH07XHJcbiAgICAvL1xyXG4gICAgLy8gVGhlIGZvbGxvd2luZyBtZXRob2RzIGFyZSB1c2VkIGJ5IHRoZSBzZXJ2aWNlIHRoZW1zZWx2ZXMgYW5kIG5vdCBleHBvc2VkXHJcbiAgICAvLyBwdWJsaWNseSBvciBub3QgZXhwZWN0ZWQgdG8gYmUgdXNlZCBieSBkZXZlbG9wZXJzLlxyXG4gICAgLy9cclxuICAgIC8qKlxyXG4gICAgICogVGhpcyBtZXRob2QgaXMgcmVxdWlyZWQgdG8gYWRoZXJlIHRvIHRoZSBGaXJlYmFzZSBpbnRlcmZhY2UuXHJcbiAgICAgKiBJdCBjbG9zZXMgYW55IGN1cnJlbnRseSBvcGVuIGluZGV4ZGIgZGF0YWJhc2UgY29ubmVjdGlvbnMuXHJcbiAgICAgKi9cclxuICAgIEJhc2VDb250cm9sbGVyLnByb3RvdHlwZS5kZWxldGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOiByZXR1cm4gWzQgLyp5aWVsZCovLCBQcm9taXNlLmFsbChbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRva2VuRGV0YWlsc01vZGVsLmNsb3NlRGF0YWJhc2UoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudmFwaWREZXRhaWxzTW9kZWwuY2xvc2VEYXRhYmFzZSgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF0pXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdGhlIGN1cnJlbnQgTm90aWZpY2F0aW9uIFBlcm1pc3Npb24gc3RhdGUuXHJcbiAgICAgKi9cclxuICAgIEJhc2VDb250cm9sbGVyLnByb3RvdHlwZS5nZXROb3RpZmljYXRpb25QZXJtaXNzaW9uID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBOb3RpZmljYXRpb24ucGVybWlzc2lvbjtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJlcXVlc3RzIG5vdGlmaWNhdGlvbiBwZXJtaXNzaW9uIGZyb20gdGhlIHVzZXIuXHJcbiAgICAgKi9cclxuICAgIEJhc2VDb250cm9sbGVyLnByb3RvdHlwZS5yZXF1ZXN0Tm90aWZpY2F0aW9uUGVybWlzc2lvbiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIGlmICghTm90aWZpY2F0aW9uLnJlcXVlc3RQZXJtaXNzaW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gTm90aWZpY2F0aW9uLnJlcXVlc3RQZXJtaXNzaW9uKCkgaXMgbm90IGF2YWlsYWJsZSBpbiBzZXJ2aWNlIHdvcmtlcnMuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gUmV0dXJuIHRoZSBjdXJyZW50IHBlcm1pc3Npb24uXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIE5vdGlmaWNhdGlvbi5wZXJtaXNzaW9uXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBOb3RpZmljYXRpb24ucmVxdWVzdFBlcm1pc3Npb24oKV07XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIEJhc2VDb250cm9sbGVyLnByb3RvdHlwZS5nZXRUb2tlbkRldGFpbHNNb2RlbCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy50b2tlbkRldGFpbHNNb2RlbDtcclxuICAgIH07XHJcbiAgICBCYXNlQ29udHJvbGxlci5wcm90b3R5cGUuZ2V0VmFwaWREZXRhaWxzTW9kZWwgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudmFwaWREZXRhaWxzTW9kZWw7XHJcbiAgICB9O1xyXG4gICAgLy8gVmlzaWJsZSBmb3IgdGVzdGluZ1xyXG4gICAgLy8gVE9ETzogbWFrZSBwcm90ZWN0ZWRcclxuICAgIEJhc2VDb250cm9sbGVyLnByb3RvdHlwZS5nZXRTdWJzY3JpcHRpb25NYW5hZ2VyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnN1YnNjcmlwdGlvbk1hbmFnZXI7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEJhc2VDb250cm9sbGVyO1xyXG59KCkpO1xyXG4vKipcclxuICogQ2hlY2tzIGlmIHRoZSB0b2tlbkRldGFpbHMgbWF0Y2ggdGhlIGRldGFpbHMgcHJvdmlkZWQgaW4gdGhlIGNsaWVudHMuXHJcbiAqL1xyXG5mdW5jdGlvbiBpc1Rva2VuU3RpbGxWYWxpZChwdXNoU3Vic2NyaXB0aW9uLCBwdWJsaWNWYXBpZEtleSwgdG9rZW5EZXRhaWxzKSB7XHJcbiAgICBpZiAoIXRva2VuRGV0YWlscy52YXBpZEtleSB8fFxyXG4gICAgICAgICFpc0FycmF5QnVmZmVyRXF1YWwocHVibGljVmFwaWRLZXkuYnVmZmVyLCB0b2tlbkRldGFpbHMudmFwaWRLZXkuYnVmZmVyKSkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIHZhciBpc0VuZHBvaW50RXF1YWwgPSBwdXNoU3Vic2NyaXB0aW9uLmVuZHBvaW50ID09PSB0b2tlbkRldGFpbHMuZW5kcG9pbnQ7XHJcbiAgICB2YXIgaXNBdXRoRXF1YWwgPSBpc0FycmF5QnVmZmVyRXF1YWwocHVzaFN1YnNjcmlwdGlvbi5nZXRLZXkoJ2F1dGgnKSwgdG9rZW5EZXRhaWxzLmF1dGgpO1xyXG4gICAgdmFyIGlzUDI1NmRoRXF1YWwgPSBpc0FycmF5QnVmZmVyRXF1YWwocHVzaFN1YnNjcmlwdGlvbi5nZXRLZXkoJ3AyNTZkaCcpLCB0b2tlbkRldGFpbHMucDI1NmRoKTtcclxuICAgIHJldHVybiBpc0VuZHBvaW50RXF1YWwgJiYgaXNBdXRoRXF1YWwgJiYgaXNQMjU2ZGhFcXVhbDtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxudmFyIEZDTV9NU0cgPSAnRkNNX01TRyc7XHJcbnZhciBTd0NvbnRyb2xsZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICBfX2V4dGVuZHMoU3dDb250cm9sbGVyLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gU3dDb250cm9sbGVyKHNlcnZpY2VzKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgc2VydmljZXMpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMuYmdNZXNzYWdlSGFuZGxlciA9IG51bGw7XHJcbiAgICAgICAgc2VsZi5hZGRFdmVudExpc3RlbmVyKCdwdXNoJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgX3RoaXMub25QdXNoKGUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHNlbGYuYWRkRXZlbnRMaXN0ZW5lcigncHVzaHN1YnNjcmlwdGlvbmNoYW5nZScsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIF90aGlzLm9uU3ViQ2hhbmdlKGUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHNlbGYuYWRkRXZlbnRMaXN0ZW5lcignbm90aWZpY2F0aW9uY2xpY2snLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICBfdGhpcy5vbk5vdGlmaWNhdGlvbkNsaWNrKGUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBfdGhpcztcclxuICAgIH1cclxuICAgIC8vIFZpc2libGUgZm9yIHRlc3RpbmdcclxuICAgIC8vIFRPRE86IE1ha2UgcHJpdmF0ZVxyXG4gICAgU3dDb250cm9sbGVyLnByb3RvdHlwZS5vblB1c2ggPSBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICBldmVudC53YWl0VW50aWwodGhpcy5vblB1c2hfKGV2ZW50KSk7XHJcbiAgICB9O1xyXG4gICAgLy8gVmlzaWJsZSBmb3IgdGVzdGluZ1xyXG4gICAgLy8gVE9ETzogTWFrZSBwcml2YXRlXHJcbiAgICBTd0NvbnRyb2xsZXIucHJvdG90eXBlLm9uU3ViQ2hhbmdlID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgZXZlbnQud2FpdFVudGlsKHRoaXMub25TdWJDaGFuZ2VfKGV2ZW50KSk7XHJcbiAgICB9O1xyXG4gICAgLy8gVmlzaWJsZSBmb3IgdGVzdGluZ1xyXG4gICAgLy8gVE9ETzogTWFrZSBwcml2YXRlXHJcbiAgICBTd0NvbnRyb2xsZXIucHJvdG90eXBlLm9uTm90aWZpY2F0aW9uQ2xpY2sgPSBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICBldmVudC53YWl0VW50aWwodGhpcy5vbk5vdGlmaWNhdGlvbkNsaWNrXyhldmVudCkpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQSBoYW5kbGVyIGZvciBwdXNoIGV2ZW50cyB0aGF0IHNob3dzIG5vdGlmaWNhdGlvbnMgYmFzZWQgb24gdGhlIGNvbnRlbnQgb2ZcclxuICAgICAqIHRoZSBwYXlsb2FkLlxyXG4gICAgICpcclxuICAgICAqIFRoZSBwYXlsb2FkIG11c3QgYmUgYSBKU09OLWVuY29kZWQgT2JqZWN0IHdpdGggYSBgbm90aWZpY2F0aW9uYCBrZXkuIFRoZVxyXG4gICAgICogdmFsdWUgb2YgdGhlIGBub3RpZmljYXRpb25gIHByb3BlcnR5IHdpbGwgYmUgdXNlZCBhcyB0aGUgTm90aWZpY2F0aW9uT3B0aW9uc1xyXG4gICAgICogb2JqZWN0IHBhc3NlZCB0byBzaG93Tm90aWZpY2F0aW9uLiBBZGRpdGlvbmFsbHksIHRoZSBgdGl0bGVgIHByb3BlcnR5IG9mIHRoZVxyXG4gICAgICogbm90aWZpY2F0aW9uIG9iamVjdCB3aWxsIGJlIHVzZWQgYXMgdGhlIHRpdGxlLlxyXG4gICAgICpcclxuICAgICAqIElmIHRoZXJlIGlzIG5vIG5vdGlmaWNhdGlvbiBkYXRhIGluIHRoZSBwYXlsb2FkIHRoZW4gbm8gbm90aWZpY2F0aW9uIHdpbGwgYmVcclxuICAgICAqIHNob3duLlxyXG4gICAgICovXHJcbiAgICBTd0NvbnRyb2xsZXIucHJvdG90eXBlLm9uUHVzaF8gPSBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBtc2dQYXlsb2FkLCBoYXNWaXNpYmxlQ2xpZW50cywgbm90aWZpY2F0aW9uRGV0YWlscywgbm90aWZpY2F0aW9uVGl0bGUsIHJlZywgYWN0aW9ucywgbWF4QWN0aW9ucztcclxuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFldmVudC5kYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1zZ1BheWxvYWQgPSBldmVudC5kYXRhLmpzb24oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBOb3QgSlNPTiBzbyBub3QgYW4gRkNNIG1lc3NhZ2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmhhc1Zpc2libGVDbGllbnRzXygpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhhc1Zpc2libGVDbGllbnRzID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaGFzVmlzaWJsZUNsaWVudHMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFwcCBpbiBmb3JlZ3JvdW5kLiBTZW5kIHRvIHBhZ2UuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdGhpcy5zZW5kTWVzc2FnZVRvV2luZG93Q2xpZW50c18obXNnUGF5bG9hZCldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vdGlmaWNhdGlvbkRldGFpbHMgPSB0aGlzLmdldE5vdGlmaWNhdGlvbkRhdGFfKG1zZ1BheWxvYWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW5vdGlmaWNhdGlvbkRldGFpbHMpIHJldHVybiBbMyAvKmJyZWFrKi8sIDNdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBub3RpZmljYXRpb25UaXRsZSA9IG5vdGlmaWNhdGlvbkRldGFpbHMudGl0bGUgfHwgJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuZ2V0U1dSZWdpc3RyYXRpb25fKCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVnID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhY3Rpb25zID0gbm90aWZpY2F0aW9uRGV0YWlscy5hY3Rpb25zO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXhBY3Rpb25zID0gTm90aWZpY2F0aW9uLm1heEFjdGlvbnM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhY3Rpb25zICYmIG1heEFjdGlvbnMgJiYgYWN0aW9ucy5sZW5ndGggPiBtYXhBY3Rpb25zKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oXCJUaGlzIGJyb3dzZXIgb25seSBzdXBwb3J0cyBcIiArIG1heEFjdGlvbnMgKyBcIiBhY3Rpb25zLlwiICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIlRoZSByZW1haW5pbmcgYWN0aW9ucyB3aWxsIG5vdCBiZSBkaXNwbGF5ZWQuXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCByZWcuc2hvd05vdGlmaWNhdGlvbihub3RpZmljYXRpb25UaXRsZSwgbm90aWZpY2F0aW9uRGV0YWlscyldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLmJnTWVzc2FnZUhhbmRsZXIpIHJldHVybiBbMyAvKmJyZWFrKi8sIDVdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmJnTWVzc2FnZUhhbmRsZXIobXNnUGF5bG9hZCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA1OiByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIFN3Q29udHJvbGxlci5wcm90b3R5cGUub25TdWJDaGFuZ2VfID0gZnVuY3Rpb24gKF9ldmVudCkge1xyXG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHJlZ2lzdHJhdGlvbiwgZXJyXzEsIGVycl8yLCB0b2tlbkRldGFpbHNNb2RlbCwgdG9rZW5EZXRhaWxzO1xyXG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS50cnlzLnB1c2goWzAsIDIsICwgM10pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmdldFNXUmVnaXN0cmF0aW9uXygpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZ2lzdHJhdGlvbiA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgM107XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJfMSA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyb3JGYWN0b3J5LmNyZWF0ZShcInVuYWJsZS10by1yZXN1YnNjcmliZVwiIC8qIFVOQUJMRV9UT19SRVNVQlNDUklCRSAqLywge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JJbmZvOiBlcnJfMVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnRyeXMucHVzaChbMywgNSwgLCA4XSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHJlZ2lzdHJhdGlvbi5wdXNoTWFuYWdlci5nZXRTdWJzY3JpcHRpb24oKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDhdO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyXzIgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRva2VuRGV0YWlsc01vZGVsID0gdGhpcy5nZXRUb2tlbkRldGFpbHNNb2RlbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0b2tlbkRldGFpbHNNb2RlbC5nZXRUb2tlbkRldGFpbHNGcm9tU1dTY29wZShyZWdpc3RyYXRpb24uc2NvcGUpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDY6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRva2VuRGV0YWlscyA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0b2tlbkRldGFpbHMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgc2hvdWxkIHJhcmVseSBvY2N1cmUsIGJ1dCBjb3VsZCBpZiBpbmRleGVkREJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlzIGNvcnJ1cHRlZCBvciB3aXBlZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyXzI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQXR0ZW1wdCB0byBkZWxldGUgdGhlIHRva2VuIGlmIHdlIGtub3cgaXQncyBiYWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5kZWxldGVUb2tlbih0b2tlbkRldGFpbHMuZmNtVG9rZW4pXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDc6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEF0dGVtcHQgdG8gZGVsZXRlIHRoZSB0b2tlbiBpZiB3ZSBrbm93IGl0J3MgYmFkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyXzI7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA4OiByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIFN3Q29udHJvbGxlci5wcm90b3R5cGUub25Ob3RpZmljYXRpb25DbGlja18gPSBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBtc2dQYXlsb2FkLCBsaW5rLCB3aW5kb3dDbGllbnQsIGludGVybmFsTXNnO1xyXG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWV2ZW50Lm5vdGlmaWNhdGlvbiB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIWV2ZW50Lm5vdGlmaWNhdGlvbi5kYXRhIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAhZXZlbnQubm90aWZpY2F0aW9uLmRhdGFbRkNNX01TR10pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5vdCBhbiBGQ00gbm90aWZpY2F0aW9uLCBkbyBub3RoaW5nLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGV2ZW50LmFjdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVXNlciBjbGlja2VkIG9uIGFuIGFjdGlvbiBidXR0b24uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGlzIHdpbGwgYWxsb3cgZGV2cyB0byBhY3Qgb24gYWN0aW9uIGJ1dHRvbiBjbGlja3MgYnkgdXNpbmcgYSBjdXN0b21cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9uTm90aWZpY2F0aW9uQ2xpY2sgbGlzdGVuZXIgdGhhdCB0aGV5IGRlZmluZS5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBQcmV2ZW50IG90aGVyIGxpc3RlbmVycyBmcm9tIHJlY2VpdmluZyB0aGUgZXZlbnRcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50Lm5vdGlmaWNhdGlvbi5jbG9zZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtc2dQYXlsb2FkID0gZXZlbnQubm90aWZpY2F0aW9uLmRhdGFbRkNNX01TR107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbXNnUGF5bG9hZC5ub3RpZmljYXRpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5vdGhpbmcgdG8gZG8uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgbGluayA9IChtc2dQYXlsb2FkLmZjbU9wdGlvbnMgJiYgbXNnUGF5bG9hZC5mY21PcHRpb25zLmxpbmspIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtc2dQYXlsb2FkLm5vdGlmaWNhdGlvbi5jbGlja19hY3Rpb247XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbGluaykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1zZ1BheWxvYWQuZGF0YSAmJiBGTl9DQU1QQUlHTl9JRCBpbiBtc2dQYXlsb2FkLmRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaW5rID0gc2VsZi5sb2NhdGlvbi5vcmlnaW47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBOb3RoaW5nIHRvIGRvLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmdldFdpbmRvd0NsaWVudF8obGluayldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93Q2xpZW50ID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoISF3aW5kb3dDbGllbnQpIHJldHVybiBbMyAvKmJyZWFrKi8sIDRdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBzZWxmLmNsaWVudHMub3BlbldpbmRvdyhsaW5rKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBVbmFibGUgdG8gZmluZCB3aW5kb3cgY2xpZW50IHNvIG5lZWQgdG8gb3BlbiBvbmUuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvd0NsaWVudCA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gV2FpdCB0aHJlZSBzZWNvbmRzIGZvciB0aGUgY2xpZW50IHRvIGluaXRpYWxpemUgYW5kIHNldCB1cCB0aGUgbWVzc2FnZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBoYW5kbGVyIHNvIHRoYXQgaXQgY2FuIHJlY2VpdmUgdGhlIG1lc3NhZ2UuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHNsZWVwKDMwMDApXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdhaXQgdGhyZWUgc2Vjb25kcyBmb3IgdGhlIGNsaWVudCB0byBpbml0aWFsaXplIGFuZCBzZXQgdXAgdGhlIG1lc3NhZ2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gaGFuZGxlciBzbyB0aGF0IGl0IGNhbiByZWNlaXZlIHRoZSBtZXNzYWdlLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDZdO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDogcmV0dXJuIFs0IC8qeWllbGQqLywgd2luZG93Q2xpZW50LmZvY3VzKCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93Q2xpZW50ID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDY7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA2OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXdpbmRvd0NsaWVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gV2luZG93IENsaWVudCB3aWxsIG5vdCBiZSByZXR1cm5lZCBpZiBpdCdzIGZvciBhIHRoaXJkIHBhcnR5IG9yaWdpbi5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBEZWxldGUgbm90aWZpY2F0aW9uIGFuZCBmY21PcHRpb25zIGRhdGEgZnJvbSBwYXlsb2FkIGJlZm9yZSBzZW5kaW5nIHRvXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoZSBwYWdlLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgbXNnUGF5bG9hZC5ub3RpZmljYXRpb247XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBtc2dQYXlsb2FkLmZjbU9wdGlvbnM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGludGVybmFsTXNnID0gY3JlYXRlTmV3TXNnKE1lc3NhZ2VUeXBlLk5PVElGSUNBVElPTl9DTElDS0VELCBtc2dQYXlsb2FkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQXR0ZW1wdCB0byBzZW5kIGEgbWVzc2FnZSB0byB0aGUgY2xpZW50IHRvIGhhbmRsZSB0aGUgZGF0YVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBJcyBhZmZlY3RlZCBieTogaHR0cHM6Ly9naXRodWIuY29tL3NsaWdodGx5b2ZmL1NlcnZpY2VXb3JrZXIvaXNzdWVzLzcyOFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdGhpcy5hdHRlbXB0VG9NZXNzYWdlQ2xpZW50Xyh3aW5kb3dDbGllbnQsIGludGVybmFsTXNnKV07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8vIFZpc2libGUgZm9yIHRlc3RpbmdcclxuICAgIC8vIFRPRE86IE1ha2UgcHJpdmF0ZVxyXG4gICAgU3dDb250cm9sbGVyLnByb3RvdHlwZS5nZXROb3RpZmljYXRpb25EYXRhXyA9IGZ1bmN0aW9uIChtc2dQYXlsb2FkKSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIGlmICghbXNnUGF5bG9hZCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0eXBlb2YgbXNnUGF5bG9hZC5ub3RpZmljYXRpb24gIT09ICdvYmplY3QnKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIG5vdGlmaWNhdGlvbkluZm9ybWF0aW9uID0gX19hc3NpZ24oe30sIG1zZ1BheWxvYWQubm90aWZpY2F0aW9uKTtcclxuICAgICAgICAvLyBQdXQgdGhlIG1lc3NhZ2UgcGF5bG9hZCB1bmRlciBGQ01fTVNHIG5hbWUgc28gd2UgY2FuIGlkZW50aWZ5IHRoZVxyXG4gICAgICAgIC8vIG5vdGlmaWNhdGlvbiBhcyBiZWluZyBhbiBGQ00gbm90aWZpY2F0aW9uIHZzIGEgbm90aWZpY2F0aW9uIGZyb21cclxuICAgICAgICAvLyBzb21ld2hlcmUgZWxzZSAoaS5lLiBub3JtYWwgd2ViIHB1c2ggb3IgZGV2ZWxvcGVyIGdlbmVyYXRlZFxyXG4gICAgICAgIC8vIG5vdGlmaWNhdGlvbikuXHJcbiAgICAgICAgbm90aWZpY2F0aW9uSW5mb3JtYXRpb24uZGF0YSA9IF9fYXNzaWduKF9fYXNzaWduKHt9LCBtc2dQYXlsb2FkLm5vdGlmaWNhdGlvbi5kYXRhKSwgKF9hID0ge30sIF9hW0ZDTV9NU0ddID0gbXNnUGF5bG9hZCwgX2EpKTtcclxuICAgICAgICByZXR1cm4gbm90aWZpY2F0aW9uSW5mb3JtYXRpb247XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBDYWxsaW5nIHNldEJhY2tncm91bmRNZXNzYWdlSGFuZGxlciB3aWxsIG9wdCBpbiB0byBzb21lIHNwZWNpZmljXHJcbiAgICAgKiBiZWhhdmlvdXJzLlxyXG4gICAgICogMS4pIElmIGEgbm90aWZpY2F0aW9uIGRvZXNuJ3QgbmVlZCB0byBiZSBzaG93biBkdWUgdG8gYSB3aW5kb3cgYWxyZWFkeVxyXG4gICAgICogYmVpbmcgdmlzaWJsZSwgdGhlbiBwdXNoIG1lc3NhZ2VzIHdpbGwgYmUgc2VudCB0byB0aGUgcGFnZS5cclxuICAgICAqIDIuKSBJZiBhIG5vdGlmaWNhdGlvbiBuZWVkcyB0byBiZSBzaG93biwgYW5kIHRoZSBtZXNzYWdlIGNvbnRhaW5zIG5vXHJcbiAgICAgKiBub3RpZmljYXRpb24gZGF0YSB0aGlzIG1ldGhvZCB3aWxsIGJlIGNhbGxlZFxyXG4gICAgICogYW5kIHRoZSBwcm9taXNlIGl0IHJldHVybnMgd2lsbCBiZSBwYXNzZWQgdG8gZXZlbnQud2FpdFVudGlsLlxyXG4gICAgICogSWYgeW91IGRvIG5vdCBzZXQgdGhpcyBjYWxsYmFjayB0aGVuIGFsbCBwdXNoIG1lc3NhZ2VzIHdpbGwgbGV0IGFuZCB0aGVcclxuICAgICAqIGRldmVsb3BlciBjYW4gaGFuZGxlIHRoZW0gaW4gYSB0aGVpciBvd24gJ3B1c2gnIGV2ZW50IGNhbGxiYWNrXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGNhbGxiYWNrIFRoZSBjYWxsYmFjayB0byBiZSBjYWxsZWQgd2hlbiBhIHB1c2ggbWVzc2FnZSBpcyByZWNlaXZlZFxyXG4gICAgICogYW5kIGEgbm90aWZpY2F0aW9uIG11c3QgYmUgc2hvd24uIFRoZSBjYWxsYmFjayB3aWxsIGJlIGdpdmVuIHRoZSBkYXRhIGZyb21cclxuICAgICAqIHRoZSBwdXNoIG1lc3NhZ2UuXHJcbiAgICAgKi9cclxuICAgIFN3Q29udHJvbGxlci5wcm90b3R5cGUuc2V0QmFja2dyb3VuZE1lc3NhZ2VIYW5kbGVyID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgaWYgKCFjYWxsYmFjayB8fCB0eXBlb2YgY2FsbGJhY2sgIT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgdGhyb3cgZXJyb3JGYWN0b3J5LmNyZWF0ZShcImJnLWhhbmRsZXItZnVuY3Rpb24tZXhwZWN0ZWRcIiAvKiBCR19IQU5ETEVSX0ZVTkNUSU9OX0VYUEVDVEVEICovKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5iZ01lc3NhZ2VIYW5kbGVyID0gY2FsbGJhY2s7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0gdXJsIFRoZSBVUkwgdG8gbG9vayBmb3Igd2hlbiBmb2N1c2luZyBhIGNsaWVudC5cclxuICAgICAqIEByZXR1cm4gUmV0dXJucyBhbiBleGlzdGluZyB3aW5kb3cgY2xpZW50IG9yIGEgbmV3bHkgb3BlbmVkIFdpbmRvd0NsaWVudC5cclxuICAgICAqL1xyXG4gICAgLy8gVmlzaWJsZSBmb3IgdGVzdGluZ1xyXG4gICAgLy8gVE9ETzogTWFrZSBwcml2YXRlXHJcbiAgICBTd0NvbnRyb2xsZXIucHJvdG90eXBlLmdldFdpbmRvd0NsaWVudF8gPSBmdW5jdGlvbiAodXJsKSB7XHJcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgcGFyc2VkVVJMLCBjbGllbnRMaXN0LCBzdWl0YWJsZUNsaWVudCwgaSwgcGFyc2VkQ2xpZW50VXJsO1xyXG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZWRVUkwgPSBuZXcgVVJMKHVybCwgc2VsZi5sb2NhdGlvbi5ocmVmKS5ocmVmO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBnZXRDbGllbnRMaXN0KCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xpZW50TGlzdCA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3VpdGFibGVDbGllbnQgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgY2xpZW50TGlzdC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VkQ2xpZW50VXJsID0gbmV3IFVSTChjbGllbnRMaXN0W2ldLnVybCwgc2VsZi5sb2NhdGlvbi5ocmVmKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5ocmVmO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnNlZENsaWVudFVybCA9PT0gcGFyc2VkVVJMKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VpdGFibGVDbGllbnQgPSBjbGllbnRMaXN0W2ldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBzdWl0YWJsZUNsaWVudF07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogVGhpcyBtZXNzYWdlIHdpbGwgYXR0ZW1wdCB0byBzZW5kIHRoZSBtZXNzYWdlIHRvIGEgd2luZG93IGNsaWVudC5cclxuICAgICAqIEBwYXJhbSBjbGllbnQgVGhlIFdpbmRvd0NsaWVudCB0byBzZW5kIHRoZSBtZXNzYWdlIHRvLlxyXG4gICAgICogQHBhcmFtIG1lc3NhZ2UgVGhlIG1lc3NhZ2UgdG8gc2VuZCB0byB0aGUgY2xpZW50LlxyXG4gICAgICogQHJldHVybnMgUmV0dXJucyBhIHByb21pc2UgdGhhdCByZXNvbHZlcyBhZnRlciBzZW5kaW5nIHRoZSBtZXNzYWdlLiBUaGlzXHJcbiAgICAgKiBkb2VzIG5vdCBndWFyYW50ZWUgdGhhdCB0aGUgbWVzc2FnZSB3YXMgc3VjY2Vzc2Z1bGx5IHJlY2VpdmVkLlxyXG4gICAgICovXHJcbiAgICAvLyBWaXNpYmxlIGZvciB0ZXN0aW5nXHJcbiAgICAvLyBUT0RPOiBNYWtlIHByaXZhdGVcclxuICAgIFN3Q29udHJvbGxlci5wcm90b3R5cGUuYXR0ZW1wdFRvTWVzc2FnZUNsaWVudF8gPSBmdW5jdGlvbiAoY2xpZW50LCBtZXNzYWdlKSB7XHJcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBOT1RFOiBUaGlzIHJldHVybnMgYSBwcm9taXNlIGluIGNhc2UgdGhpcyBBUEkgaXMgYWJzdHJhY3RlZCBsYXRlciBvbiB0b1xyXG4gICAgICAgICAgICAgICAgLy8gZG8gYWRkaXRpb25hbCB3b3JrXHJcbiAgICAgICAgICAgICAgICBpZiAoIWNsaWVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IGVycm9yRmFjdG9yeS5jcmVhdGUoXCJuby13aW5kb3ctY2xpZW50LXRvLW1zZ1wiIC8qIE5PX1dJTkRPV19DTElFTlRfVE9fTVNHICovKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNsaWVudC5wb3N0TWVzc2FnZShtZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBAcmV0dXJucyBJZiB0aGVyZSBpcyBjdXJyZW50bHkgYSB2aXNpYmxlIFdpbmRvd0NsaWVudCwgdGhpcyBtZXRob2Qgd2lsbFxyXG4gICAgICogcmVzb2x2ZSB0byB0cnVlLCBvdGhlcndpc2UgZmFsc2UuXHJcbiAgICAgKi9cclxuICAgIC8vIFZpc2libGUgZm9yIHRlc3RpbmdcclxuICAgIC8vIFRPRE86IE1ha2UgcHJpdmF0ZVxyXG4gICAgU3dDb250cm9sbGVyLnByb3RvdHlwZS5oYXNWaXNpYmxlQ2xpZW50c18gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgY2xpZW50TGlzdDtcclxuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDogcmV0dXJuIFs0IC8qeWllbGQqLywgZ2V0Q2xpZW50TGlzdCgpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsaWVudExpc3QgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBjbGllbnRMaXN0LnNvbWUoZnVuY3Rpb24gKGNsaWVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjbGllbnQudmlzaWJpbGl0eVN0YXRlID09PSAndmlzaWJsZScgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWdub3JlIGNocm9tZS1leHRlbnNpb24gY2xpZW50cyBhcyB0aGF0IG1hdGNoZXMgdGhlIGJhY2tncm91bmQgcGFnZXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gb2YgZXh0ZW5zaW9ucywgd2hpY2ggYXJlIGFsd2F5cyBjb25zaWRlcmVkIHZpc2libGUuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICFjbGllbnQudXJsLnN0YXJ0c1dpdGgoJ2Nocm9tZS1leHRlbnNpb246Ly8nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0gbXNnUGF5bG9hZCBUaGUgZGF0YSBmcm9tIHRoZSBwdXNoIGV2ZW50IHRoYXQgc2hvdWxkIGJlIHNlbnQgdG8gYWxsXHJcbiAgICAgKiBhdmFpbGFibGUgcGFnZXMuXHJcbiAgICAgKiBAcmV0dXJucyBSZXR1cm5zIGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIG9uY2UgdGhlIG1lc3NhZ2UgaGFzIGJlZW4gc2VudCB0b1xyXG4gICAgICogYWxsIFdpbmRvd0NsaWVudHMuXHJcbiAgICAgKi9cclxuICAgIC8vIFZpc2libGUgZm9yIHRlc3RpbmdcclxuICAgIC8vIFRPRE86IE1ha2UgcHJpdmF0ZVxyXG4gICAgU3dDb250cm9sbGVyLnByb3RvdHlwZS5zZW5kTWVzc2FnZVRvV2luZG93Q2xpZW50c18gPSBmdW5jdGlvbiAobXNnUGF5bG9hZCkge1xyXG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGNsaWVudExpc3QsIGludGVybmFsTXNnO1xyXG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOiByZXR1cm4gWzQgLyp5aWVsZCovLCBnZXRDbGllbnRMaXN0KCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xpZW50TGlzdCA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW50ZXJuYWxNc2cgPSBjcmVhdGVOZXdNc2coTWVzc2FnZVR5cGUuUFVTSF9NU0dfUkVDRUlWRUQsIG1zZ1BheWxvYWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBQcm9taXNlLmFsbChjbGllbnRMaXN0Lm1hcChmdW5jdGlvbiAoY2xpZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLmF0dGVtcHRUb01lc3NhZ2VDbGllbnRfKGNsaWVudCwgaW50ZXJuYWxNc2cpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFRoaXMgd2lsbCByZWdpc3RlciB0aGUgZGVmYXVsdCBzZXJ2aWNlIHdvcmtlciBhbmQgcmV0dXJuIHRoZSByZWdpc3RyYXRpb24uXHJcbiAgICAgKiBAcmV0dXJuIGhlIHNlcnZpY2Ugd29ya2VyIHJlZ2lzdHJhdGlvbiB0byBiZSB1c2VkIGZvciB0aGUgcHVzaCBzZXJ2aWNlLlxyXG4gICAgICovXHJcbiAgICBTd0NvbnRyb2xsZXIucHJvdG90eXBlLmdldFNXUmVnaXN0cmF0aW9uXyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBzZWxmLnJlZ2lzdHJhdGlvbl07XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogVGhpcyB3aWxsIHJldHVybiB0aGUgZGVmYXVsdCBWQVBJRCBrZXkgb3IgdGhlIHVpbnQ4YXJyYXkgdmVyc2lvbiBvZiB0aGVcclxuICAgICAqIHB1YmxpYyBWQVBJRCBrZXkgcHJvdmlkZWQgYnkgdGhlIGRldmVsb3Blci5cclxuICAgICAqL1xyXG4gICAgU3dDb250cm9sbGVyLnByb3RvdHlwZS5nZXRQdWJsaWNWYXBpZEtleV8gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgc3dSZWcsIHZhcGlkS2V5RnJvbURhdGFiYXNlO1xyXG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOiByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmdldFNXUmVnaXN0cmF0aW9uXygpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN3UmVnID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXN3UmVnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnJvckZhY3RvcnkuY3JlYXRlKFwic3ctcmVnaXN0cmF0aW9uLWV4cGVjdGVkXCIgLyogU1dfUkVHSVNUUkFUSU9OX0VYUEVDVEVEICovKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmdldFZhcGlkRGV0YWlsc01vZGVsKCkuZ2V0VmFwaWRGcm9tU1dTY29wZShzd1JlZy5zY29wZSldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFwaWRLZXlGcm9tRGF0YWJhc2UgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YXBpZEtleUZyb21EYXRhYmFzZSA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgREVGQVVMVF9QVUJMSUNfVkFQSURfS0VZXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdmFwaWRLZXlGcm9tRGF0YWJhc2VdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gU3dDb250cm9sbGVyO1xyXG59KEJhc2VDb250cm9sbGVyKSk7XHJcbmZ1bmN0aW9uIGdldENsaWVudExpc3QoKSB7XHJcbiAgICByZXR1cm4gc2VsZi5jbGllbnRzLm1hdGNoQWxsKHtcclxuICAgICAgICB0eXBlOiAnd2luZG93JyxcclxuICAgICAgICBpbmNsdWRlVW5jb250cm9sbGVkOiB0cnVlXHJcbiAgICAgICAgLy8gVFMgZG9lc24ndCBrbm93IHRoYXQgXCJ0eXBlOiAnd2luZG93J1wiIG1lYW5zIGl0J2xsIHJldHVybiBXaW5kb3dDbGllbnRbXVxyXG4gICAgfSk7XHJcbn1cclxuZnVuY3Rpb24gY3JlYXRlTmV3TXNnKG1zZ1R5cGUsIG1zZ0RhdGEpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgZmlyZWJhc2VNZXNzYWdpbmdUeXBlOiBtc2dUeXBlLFxyXG4gICAgICAgIGZpcmViYXNlTWVzc2FnaW5nRGF0YTogbXNnRGF0YVxyXG4gICAgfTtcclxufVxyXG5mdW5jdGlvbiBzbGVlcChtcykge1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7XHJcbiAgICAgICAgc2V0VGltZW91dChyZXNvbHZlLCBtcyk7XHJcbiAgICB9KTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxudmFyIERFRkFVTFRfU1dfUEFUSCA9ICcvZmlyZWJhc2UtbWVzc2FnaW5nLXN3LmpzJztcclxudmFyIERFRkFVTFRfU1dfU0NPUEUgPSAnL2ZpcmViYXNlLWNsb3VkLW1lc3NhZ2luZy1wdXNoLXNjb3BlJztcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnZhciBXaW5kb3dDb250cm9sbGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgX19leHRlbmRzKFdpbmRvd0NvbnRyb2xsZXIsIF9zdXBlcik7XHJcbiAgICAvKipcclxuICAgICAqIEEgc2VydmljZSB0aGF0IHByb3ZpZGVzIGEgTWVzc2FnaW5nU2VydmljZSBpbnN0YW5jZS5cclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gV2luZG93Q29udHJvbGxlcihzZXJ2aWNlcykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHNlcnZpY2VzKSB8fCB0aGlzO1xyXG4gICAgICAgIF90aGlzLnJlZ2lzdHJhdGlvblRvVXNlID0gbnVsbDtcclxuICAgICAgICBfdGhpcy5wdWJsaWNWYXBpZEtleVRvVXNlID0gbnVsbDtcclxuICAgICAgICBfdGhpcy5tZXNzYWdlT2JzZXJ2ZXIgPSBudWxsO1xyXG4gICAgICAgIC8vIEB0cy1pZ25vcmU6IFVudXNlZCB2YXJpYWJsZSBlcnJvciwgdGhpcyBpcyBub3QgaW1wbGVtZW50ZWQgeWV0LlxyXG4gICAgICAgIF90aGlzLnRva2VuUmVmcmVzaE9ic2VydmVyID0gbnVsbDtcclxuICAgICAgICBfdGhpcy5vbk1lc3NhZ2VJbnRlcm5hbCA9IGNyZWF0ZVN1YnNjcmliZShmdW5jdGlvbiAob2JzZXJ2ZXIpIHtcclxuICAgICAgICAgICAgX3RoaXMubWVzc2FnZU9ic2VydmVyID0gb2JzZXJ2ZXI7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgX3RoaXMub25Ub2tlblJlZnJlc2hJbnRlcm5hbCA9IGNyZWF0ZVN1YnNjcmliZShmdW5jdGlvbiAob2JzZXJ2ZXIpIHtcclxuICAgICAgICAgICAgX3RoaXMudG9rZW5SZWZyZXNoT2JzZXJ2ZXIgPSBvYnNlcnZlcjtcclxuICAgICAgICB9KTtcclxuICAgICAgICBfdGhpcy5zZXR1cFNXTWVzc2FnZUxpc3RlbmVyXygpO1xyXG4gICAgICAgIHJldHVybiBfdGhpcztcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogUmVxdWVzdCBwZXJtaXNzaW9uIGlmIGl0IGlzIG5vdCBjdXJyZW50bHkgZ3JhbnRlZFxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm4gUmVzb2x2ZXMgaWYgdGhlIHBlcm1pc3Npb24gd2FzIGdyYW50ZWQsIG90aGVyd2lzZSByZWplY3RzXHJcbiAgICAgKlxyXG4gICAgICogQGRlcHJlY2F0ZWQgVXNlIE5vdGlmaWNhdGlvbi5yZXF1ZXN0UGVybWlzc2lvbigpIGluc3RlYWQuXHJcbiAgICAgKiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvTm90aWZpY2F0aW9uL3JlcXVlc3RQZXJtaXNzaW9uXHJcbiAgICAgKi9cclxuICAgIFdpbmRvd0NvbnRyb2xsZXIucHJvdG90eXBlLnJlcXVlc3RQZXJtaXNzaW9uID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHBlcm1pc3Npb25SZXN1bHQ7XHJcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChOb3RpZmljYXRpb24ucGVybWlzc2lvbiA9PT0gJ2dyYW50ZWQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgTm90aWZpY2F0aW9uLnJlcXVlc3RQZXJtaXNzaW9uKCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGVybWlzc2lvblJlc3VsdCA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBlcm1pc3Npb25SZXN1bHQgPT09ICdncmFudGVkJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHBlcm1pc3Npb25SZXN1bHQgPT09ICdkZW5pZWQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnJvckZhY3RvcnkuY3JlYXRlKFwicGVybWlzc2lvbi1ibG9ja2VkXCIgLyogUEVSTUlTU0lPTl9CTE9DS0VEICovKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IGVycm9yRmFjdG9yeS5jcmVhdGUoXCJwZXJtaXNzaW9uLWRlZmF1bHRcIiAvKiBQRVJNSVNTSU9OX0RFRkFVTFQgKi8pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogVGhpcyBtZXRob2QgYWxsb3dzIGEgZGV2ZWxvcGVyIHRvIG92ZXJyaWRlIHRoZSBkZWZhdWx0IHNlcnZpY2Ugd29ya2VyIGFuZFxyXG4gICAgICogaW5zdGVhZCB1c2UgYSBjdXN0b20gc2VydmljZSB3b3JrZXIuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHJlZ2lzdHJhdGlvbiBUaGUgc2VydmljZSB3b3JrZXIgcmVnaXN0cmF0aW9uIHRoYXQgc2hvdWxkIGJlIHVzZWQgdG9cclxuICAgICAqIHJlY2VpdmUgdGhlIHB1c2ggbWVzc2FnZXMuXHJcbiAgICAgKi9cclxuICAgIFdpbmRvd0NvbnRyb2xsZXIucHJvdG90eXBlLnVzZVNlcnZpY2VXb3JrZXIgPSBmdW5jdGlvbiAocmVnaXN0cmF0aW9uKSB7XHJcbiAgICAgICAgaWYgKCEocmVnaXN0cmF0aW9uIGluc3RhbmNlb2YgU2VydmljZVdvcmtlclJlZ2lzdHJhdGlvbikpIHtcclxuICAgICAgICAgICAgdGhyb3cgZXJyb3JGYWN0b3J5LmNyZWF0ZShcInN3LXJlZ2lzdHJhdGlvbi1leHBlY3RlZFwiIC8qIFNXX1JFR0lTVFJBVElPTl9FWFBFQ1RFRCAqLyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLnJlZ2lzdHJhdGlvblRvVXNlICE9IG51bGwpIHtcclxuICAgICAgICAgICAgdGhyb3cgZXJyb3JGYWN0b3J5LmNyZWF0ZShcInVzZS1zdy1iZWZvcmUtZ2V0LXRva2VuXCIgLyogVVNFX1NXX0JFRk9SRV9HRVRfVE9LRU4gKi8pO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnJlZ2lzdHJhdGlvblRvVXNlID0gcmVnaXN0cmF0aW9uO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogVGhpcyBtZXRob2QgYWxsb3dzIGEgZGV2ZWxvcGVyIHRvIG92ZXJyaWRlIHRoZSBkZWZhdWx0IHZhcGlkIGtleVxyXG4gICAgICogYW5kIGluc3RlYWQgdXNlIGEgY3VzdG9tIFZBUElEIHB1YmxpYyBrZXkuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHB1YmxpY0tleSBBIFVSTCBzYWZlIGJhc2U2NCBlbmNvZGVkIHN0cmluZy5cclxuICAgICAqL1xyXG4gICAgV2luZG93Q29udHJvbGxlci5wcm90b3R5cGUudXNlUHVibGljVmFwaWRLZXkgPSBmdW5jdGlvbiAocHVibGljS2V5KSB7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBwdWJsaWNLZXkgIT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgIHRocm93IGVycm9yRmFjdG9yeS5jcmVhdGUoXCJpbnZhbGlkLXB1YmxpYy12YXBpZC1rZXlcIiAvKiBJTlZBTElEX1BVQkxJQ19WQVBJRF9LRVkgKi8pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5wdWJsaWNWYXBpZEtleVRvVXNlICE9IG51bGwpIHtcclxuICAgICAgICAgICAgdGhyb3cgZXJyb3JGYWN0b3J5LmNyZWF0ZShcInVzZS1wdWJsaWMta2V5LWJlZm9yZS1nZXQtdG9rZW5cIiAvKiBVU0VfUFVCTElDX0tFWV9CRUZPUkVfR0VUX1RPS0VOICovKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIHBhcnNlZEtleSA9IGJhc2U2NFRvQXJyYXlCdWZmZXIocHVibGljS2V5KTtcclxuICAgICAgICBpZiAocGFyc2VkS2V5Lmxlbmd0aCAhPT0gNjUpIHtcclxuICAgICAgICAgICAgdGhyb3cgZXJyb3JGYWN0b3J5LmNyZWF0ZShcInB1YmxpYy12YXBpZC1rZXktZGVjcnlwdGlvbi1mYWlsZWRcIiAvKiBQVUJMSUNfS0VZX0RFQ1JZUFRJT05fRkFJTEVEICovKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5wdWJsaWNWYXBpZEtleVRvVXNlID0gcGFyc2VkS2V5O1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQGV4cG9ydFxyXG4gICAgICogQHBhcmFtIG5leHRPck9ic2VydmVyIEFuIG9ic2VydmVyIG9iamVjdCBvciBhIGZ1bmN0aW9uIHRyaWdnZXJlZCBvblxyXG4gICAgICogbWVzc2FnZS5cclxuICAgICAqIEBwYXJhbSBlcnJvciBBIGZ1bmN0aW9uIHRyaWdnZXJlZCBvbiBtZXNzYWdlIGVycm9yLlxyXG4gICAgICogQHBhcmFtIGNvbXBsZXRlZCBmdW5jdGlvbiB0cmlnZ2VyZWQgd2hlbiB0aGUgb2JzZXJ2ZXIgaXMgcmVtb3ZlZC5cclxuICAgICAqIEByZXR1cm4gVGhlIHVuc3Vic2NyaWJlIGZ1bmN0aW9uIGZvciB0aGUgb2JzZXJ2ZXIuXHJcbiAgICAgKi9cclxuICAgIFdpbmRvd0NvbnRyb2xsZXIucHJvdG90eXBlLm9uTWVzc2FnZSA9IGZ1bmN0aW9uIChuZXh0T3JPYnNlcnZlciwgZXJyb3IsIGNvbXBsZXRlZCkge1xyXG4gICAgICAgIGlmICh0eXBlb2YgbmV4dE9yT2JzZXJ2ZXIgPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMub25NZXNzYWdlSW50ZXJuYWwobmV4dE9yT2JzZXJ2ZXIsIGVycm9yLCBjb21wbGV0ZWQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMub25NZXNzYWdlSW50ZXJuYWwobmV4dE9yT2JzZXJ2ZXIpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSBuZXh0T3JPYnNlcnZlciBBbiBvYnNlcnZlciBvYmplY3Qgb3IgYSBmdW5jdGlvbiB0cmlnZ2VyZWQgb24gdG9rZW5cclxuICAgICAqIHJlZnJlc2guXHJcbiAgICAgKiBAcGFyYW0gZXJyb3IgQSBmdW5jdGlvbiB0cmlnZ2VyZWQgb24gdG9rZW4gcmVmcmVzaCBlcnJvci5cclxuICAgICAqIEBwYXJhbSBjb21wbGV0ZWQgZnVuY3Rpb24gdHJpZ2dlcmVkIHdoZW4gdGhlIG9ic2VydmVyIGlzIHJlbW92ZWQuXHJcbiAgICAgKiBAcmV0dXJuIFRoZSB1bnN1YnNjcmliZSBmdW5jdGlvbiBmb3IgdGhlIG9ic2VydmVyLlxyXG4gICAgICovXHJcbiAgICBXaW5kb3dDb250cm9sbGVyLnByb3RvdHlwZS5vblRva2VuUmVmcmVzaCA9IGZ1bmN0aW9uIChuZXh0T3JPYnNlcnZlciwgZXJyb3IsIGNvbXBsZXRlZCkge1xyXG4gICAgICAgIGlmICh0eXBlb2YgbmV4dE9yT2JzZXJ2ZXIgPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMub25Ub2tlblJlZnJlc2hJbnRlcm5hbChuZXh0T3JPYnNlcnZlciwgZXJyb3IsIGNvbXBsZXRlZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5vblRva2VuUmVmcmVzaEludGVybmFsKG5leHRPck9ic2VydmVyKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBHaXZlbiBhIHJlZ2lzdHJhdGlvbiwgd2FpdCBmb3IgdGhlIHNlcnZpY2Ugd29ya2VyIGl0IHJlbGF0ZXMgdG9cclxuICAgICAqIGJlY29tZSBhY3RpdmVyXHJcbiAgICAgKiBAcGFyYW0gcmVnaXN0cmF0aW9uIFJlZ2lzdHJhdGlvbiB0byB3YWl0IGZvciBzZXJ2aWNlIHdvcmtlciB0byBiZWNvbWUgYWN0aXZlXHJcbiAgICAgKiBAcmV0dXJuIFdhaXQgZm9yIHNlcnZpY2Ugd29ya2VyIHJlZ2lzdHJhdGlvbiB0byBiZWNvbWUgYWN0aXZlXHJcbiAgICAgKi9cclxuICAgIC8vIFZpc2libGUgZm9yIHRlc3RpbmdcclxuICAgIC8vIFRPRE86IE1ha2UgcHJpdmF0ZVxyXG4gICAgV2luZG93Q29udHJvbGxlci5wcm90b3R5cGUud2FpdEZvclJlZ2lzdHJhdGlvblRvQWN0aXZhdGVfID0gZnVuY3Rpb24gKHJlZ2lzdHJhdGlvbikge1xyXG4gICAgICAgIHZhciBzZXJ2aWNlV29ya2VyID0gcmVnaXN0cmF0aW9uLmluc3RhbGxpbmcgfHwgcmVnaXN0cmF0aW9uLndhaXRpbmcgfHwgcmVnaXN0cmF0aW9uLmFjdGl2ZTtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICBpZiAoIXNlcnZpY2VXb3JrZXIpIHtcclxuICAgICAgICAgICAgICAgIC8vIFRoaXMgaXMgYSByYXJlIHNjZW5hcmlvIGJ1dCBoYXMgb2NjdXJlZCBpbiBmaXJlZm94XHJcbiAgICAgICAgICAgICAgICByZWplY3QoZXJyb3JGYWN0b3J5LmNyZWF0ZShcIm5vLXN3LWluLXJlZ1wiIC8qIE5PX1NXX0lOX1JFRyAqLykpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIEJlY2F1c2UgdGhlIFByb21pc2UgZnVuY3Rpb24gaXMgY2FsbGVkIG9uIG5leHQgdGljayB0aGVyZSBpcyBhXHJcbiAgICAgICAgICAgIC8vIHNtYWxsIGNoYW5jZSB0aGF0IHRoZSB3b3JrZXIgYmVjYW1lIGFjdGl2ZSBvciByZWR1bmRhbnQgYWxyZWFkeS5cclxuICAgICAgICAgICAgaWYgKHNlcnZpY2VXb3JrZXIuc3RhdGUgPT09ICdhY3RpdmF0ZWQnKSB7XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKHJlZ2lzdHJhdGlvbik7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHNlcnZpY2VXb3JrZXIuc3RhdGUgPT09ICdyZWR1bmRhbnQnKSB7XHJcbiAgICAgICAgICAgICAgICByZWplY3QoZXJyb3JGYWN0b3J5LmNyZWF0ZShcInN3LXJlZy1yZWR1bmRhbnRcIiAvKiBTV19SRUdfUkVEVU5EQU5UICovKSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIHN0YXRlQ2hhbmdlTGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoc2VydmljZVdvcmtlci5zdGF0ZSA9PT0gJ2FjdGl2YXRlZCcpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHJlZ2lzdHJhdGlvbik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChzZXJ2aWNlV29ya2VyLnN0YXRlID09PSAncmVkdW5kYW50Jykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChlcnJvckZhY3RvcnkuY3JlYXRlKFwic3ctcmVnLXJlZHVuZGFudFwiIC8qIFNXX1JFR19SRURVTkRBTlQgKi8pKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFJldHVybiBlYXJseSBhbmQgd2FpdCB0byBuZXh0IHN0YXRlIGNoYW5nZVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHNlcnZpY2VXb3JrZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcignc3RhdGVjaGFuZ2UnLCBzdGF0ZUNoYW5nZUxpc3RlbmVyKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgc2VydmljZVdvcmtlci5hZGRFdmVudExpc3RlbmVyKCdzdGF0ZWNoYW5nZScsIHN0YXRlQ2hhbmdlTGlzdGVuZXIpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogVGhpcyB3aWxsIHJlZ2lzdGVyIHRoZSBkZWZhdWx0IHNlcnZpY2Ugd29ya2VyIGFuZCByZXR1cm4gdGhlIHJlZ2lzdHJhdGlvblxyXG4gICAgICogQHJldHVybiBUaGUgc2VydmljZSB3b3JrZXIgcmVnaXN0cmF0aW9uIHRvIGJlIHVzZWQgZm9yIHRoZSBwdXNoIHNlcnZpY2UuXHJcbiAgICAgKi9cclxuICAgIFdpbmRvd0NvbnRyb2xsZXIucHJvdG90eXBlLmdldFNXUmVnaXN0cmF0aW9uXyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIGlmICh0aGlzLnJlZ2lzdHJhdGlvblRvVXNlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLndhaXRGb3JSZWdpc3RyYXRpb25Ub0FjdGl2YXRlXyh0aGlzLnJlZ2lzdHJhdGlvblRvVXNlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gTWFrZSB0aGUgcmVnaXN0cmF0aW9uIG51bGwgc28gd2Uga25vdyB1c2VTZXJ2aWNlV29ya2VyIHdpbGwgbm90XHJcbiAgICAgICAgLy8gdXNlIGEgbmV3IHNlcnZpY2Ugd29ya2VyIGFzIHJlZ2lzdHJhdGlvblRvVXNlIGlzIG5vIGxvbmdlciB1bmRlZmluZWRcclxuICAgICAgICB0aGlzLnJlZ2lzdHJhdGlvblRvVXNlID0gbnVsbDtcclxuICAgICAgICByZXR1cm4gbmF2aWdhdG9yLnNlcnZpY2VXb3JrZXJcclxuICAgICAgICAgICAgLnJlZ2lzdGVyKERFRkFVTFRfU1dfUEFUSCwge1xyXG4gICAgICAgICAgICBzY29wZTogREVGQVVMVF9TV19TQ09QRVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbiAoZXJyKSB7XHJcbiAgICAgICAgICAgIHRocm93IGVycm9yRmFjdG9yeS5jcmVhdGUoXCJmYWlsZWQtc2VydmljZXdvcmtlci1yZWdpc3RyYXRpb25cIiAvKiBGQUlMRURfREVGQVVMVF9SRUdJU1RSQVRJT04gKi8sIHtcclxuICAgICAgICAgICAgICAgIGJyb3dzZXJFcnJvck1lc3NhZ2U6IGVyci5tZXNzYWdlXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZWdpc3RyYXRpb24pIHtcclxuICAgICAgICAgICAgcmV0dXJuIF90aGlzLndhaXRGb3JSZWdpc3RyYXRpb25Ub0FjdGl2YXRlXyhyZWdpc3RyYXRpb24pLnRoZW4oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMucmVnaXN0cmF0aW9uVG9Vc2UgPSByZWdpc3RyYXRpb247XHJcbiAgICAgICAgICAgICAgICAvLyBXZSB1cGRhdGUgYWZ0ZXIgYWN0aXZhdGlvbiBkdWUgdG8gYW4gaXNzdWUgd2l0aCBGaXJlZm94IHY0OSB3aGVyZVxyXG4gICAgICAgICAgICAgICAgLy8gYSByYWNlIGNvbmRpdGlvbiBvY2Nhc3Npb25hbGx5IGNhdXNlcyB0aGUgc2VydmljZSB3b3JrZXIgdG8gbm90XHJcbiAgICAgICAgICAgICAgICAvLyBpbnN0YWxsXHJcbiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWZsb2F0aW5nLXByb21pc2VzXHJcbiAgICAgICAgICAgICAgICByZWdpc3RyYXRpb24udXBkYXRlKCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVnaXN0cmF0aW9uO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFRoaXMgd2lsbCByZXR1cm4gdGhlIGRlZmF1bHQgVkFQSUQga2V5IG9yIHRoZSB1aW50OGFycmF5IHZlcnNpb24gb2YgdGhlXHJcbiAgICAgKiBwdWJsaWMgVkFQSUQga2V5IHByb3ZpZGVkIGJ5IHRoZSBkZXZlbG9wZXIuXHJcbiAgICAgKi9cclxuICAgIFdpbmRvd0NvbnRyb2xsZXIucHJvdG90eXBlLmdldFB1YmxpY1ZhcGlkS2V5XyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnB1YmxpY1ZhcGlkS2V5VG9Vc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdGhpcy5wdWJsaWNWYXBpZEtleVRvVXNlXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBERUZBVUxUX1BVQkxJQ19WQVBJRF9LRVldO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFRoaXMgbWV0aG9kIHdpbGwgc2V0IHVwIGEgbWVzc2FnZSBsaXN0ZW5lciB0byBoYW5kbGVcclxuICAgICAqIGV2ZW50cyBmcm9tIHRoZSBzZXJ2aWNlIHdvcmtlciB0aGF0IHNob3VsZCB0cmlnZ2VyXHJcbiAgICAgKiBldmVudHMgaW4gdGhlIHBhZ2UuXHJcbiAgICAgKi9cclxuICAgIC8vIFZpc2libGUgZm9yIHRlc3RpbmdcclxuICAgIC8vIFRPRE86IE1ha2UgcHJpdmF0ZVxyXG4gICAgV2luZG93Q29udHJvbGxlci5wcm90b3R5cGUuc2V0dXBTV01lc3NhZ2VMaXN0ZW5lcl8gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBuYXZpZ2F0b3Iuc2VydmljZVdvcmtlci5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgZnVuY3Rpb24gKGV2ZW50KSB7IHJldHVybiBfX2F3YWl0ZXIoX3RoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBfYSwgZmlyZWJhc2VNZXNzYWdpbmdUeXBlLCBmaXJlYmFzZU1lc3NhZ2luZ0RhdGEsIGRhdGEsIGV2ZW50VHlwZSwgYW5hbHl0aWNzO1xyXG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9iKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9iLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWV2ZW50LmRhdGEgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICFldmVudC5kYXRhLmZpcmViYXNlTWVzc2FnaW5nVHlwZSB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIWV2ZW50LmRhdGEuZmlyZWJhc2VNZXNzYWdpbmdEYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBOb3QgYSBtZXNzYWdlIGZyb20gRkNNXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgX2EgPSBldmVudC5kYXRhLCBmaXJlYmFzZU1lc3NhZ2luZ1R5cGUgPSBfYS5maXJlYmFzZU1lc3NhZ2luZ1R5cGUsIGZpcmViYXNlTWVzc2FnaW5nRGF0YSA9IF9hLmZpcmViYXNlTWVzc2FnaW5nRGF0YTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMubWVzc2FnZU9ic2VydmVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2VPYnNlcnZlci5uZXh0KGZpcmViYXNlTWVzc2FnaW5nRGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YSA9IGZpcmViYXNlTWVzc2FnaW5nRGF0YS5kYXRhO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShkYXRhICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBGTl9DQU1QQUlHTl9JRCBpbiBkYXRhICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhW0ZOX0NBTVBBSUdOX0FOQUxZVElDU19FTkFCTEVEXSA9PT0gJzEnKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgMl07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50VHlwZSA9IGdldEV2ZW50VHlwZShmaXJlYmFzZU1lc3NhZ2luZ1R5cGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLnNlcnZpY2VzLmFuYWx5dGljc1Byb3ZpZGVyLmdldCgpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFuYWx5dGljcyA9IF9iLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYW5hbHl0aWNzLmxvZ0V2ZW50KGV2ZW50VHlwZSwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIGVzbGludC1kaXNhYmxlIGNhbWVsY2FzZSAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlX25hbWU6IGRhdGFbRk5fQ0FNUEFJR05fTkFNRV0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlX2lkOiBkYXRhW0ZOX0NBTVBBSUdOX0lEXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VfdGltZTogZGF0YVtGTl9DQU1QQUlHTl9USU1FXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VfZGV2aWNlX3RpbWU6IE1hdGguZmxvb3IoRGF0ZS5ub3coKSAvIDEwMDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLyogZXNsaW50LWVuYWJsZSBjYW1lbGNhc2UgKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2IubGFiZWwgPSAyO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTsgfSwgZmFsc2UpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBXaW5kb3dDb250cm9sbGVyO1xyXG59KEJhc2VDb250cm9sbGVyKSk7XHJcbmZ1bmN0aW9uIGdldEV2ZW50VHlwZShtZXNzYWdlVHlwZSkge1xyXG4gICAgc3dpdGNoIChtZXNzYWdlVHlwZSkge1xyXG4gICAgICAgIGNhc2UgTWVzc2FnZVR5cGUuTk9USUZJQ0FUSU9OX0NMSUNLRUQ6XHJcbiAgICAgICAgICAgIHJldHVybiAnbm90aWZpY2F0aW9uX29wZW4nO1xyXG4gICAgICAgIGNhc2UgTWVzc2FnZVR5cGUuUFVTSF9NU0dfUkVDRUlWRUQ6XHJcbiAgICAgICAgICAgIHJldHVybiAnbm90aWZpY2F0aW9uX2ZvcmVncm91bmQnO1xyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigpO1xyXG4gICAgfVxyXG59XG5cbnZhciBuYW1lID0gXCJAZmlyZWJhc2UvbWVzc2FnaW5nXCI7XG52YXIgdmVyc2lvbiA9IFwiMC42LjBcIjtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIHJlZ2lzdGVyTWVzc2FnaW5nKGluc3RhbmNlKSB7XHJcbiAgICB2YXIgbWVzc2FnaW5nTmFtZSA9ICdtZXNzYWdpbmcnO1xyXG4gICAgdmFyIGZhY3RvcnlNZXRob2QgPSBmdW5jdGlvbiAoY29udGFpbmVyKSB7XHJcbiAgICAgICAgLyogRGVwZW5kZW5jaWVzICovXHJcbiAgICAgICAgdmFyIGFwcCA9IGNvbnRhaW5lci5nZXRQcm92aWRlcignYXBwJykuZ2V0SW1tZWRpYXRlKCk7XHJcbiAgICAgICAgdmFyIGluc3RhbGxhdGlvbnMgPSBjb250YWluZXIuZ2V0UHJvdmlkZXIoJ2luc3RhbGxhdGlvbnMnKS5nZXRJbW1lZGlhdGUoKTtcclxuICAgICAgICB2YXIgYW5hbHl0aWNzUHJvdmlkZXIgPSBjb250YWluZXIuZ2V0UHJvdmlkZXIoJ2FuYWx5dGljcy1pbnRlcm5hbCcpO1xyXG4gICAgICAgIHZhciBmaXJlYmFzZVNlcnZpY2VzID0ge1xyXG4gICAgICAgICAgICBhcHA6IGFwcCxcclxuICAgICAgICAgICAgaW5zdGFsbGF0aW9uczogaW5zdGFsbGF0aW9ucyxcclxuICAgICAgICAgICAgYW5hbHl0aWNzUHJvdmlkZXI6IGFuYWx5dGljc1Byb3ZpZGVyXHJcbiAgICAgICAgfTtcclxuICAgICAgICBpZiAoIWlzU3VwcG9ydGVkKCkpIHtcclxuICAgICAgICAgICAgdGhyb3cgZXJyb3JGYWN0b3J5LmNyZWF0ZShcInVuc3VwcG9ydGVkLWJyb3dzZXJcIiAvKiBVTlNVUFBPUlRFRF9CUk9XU0VSICovKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHNlbGYgJiYgJ1NlcnZpY2VXb3JrZXJHbG9iYWxTY29wZScgaW4gc2VsZikge1xyXG4gICAgICAgICAgICAvLyBSdW5uaW5nIGluIFNlcnZpY2VXb3JrZXIgY29udGV4dFxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFN3Q29udHJvbGxlcihmaXJlYmFzZVNlcnZpY2VzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIEFzc3VtZSB3ZSBhcmUgaW4gdGhlIHdpbmRvdyBjb250ZXh0LlxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFdpbmRvd0NvbnRyb2xsZXIoZmlyZWJhc2VTZXJ2aWNlcyk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHZhciBuYW1lc3BhY2VFeHBvcnRzID0ge1xyXG4gICAgICAgIGlzU3VwcG9ydGVkOiBpc1N1cHBvcnRlZFxyXG4gICAgfTtcclxuICAgIGluc3RhbmNlLklOVEVSTkFMLnJlZ2lzdGVyQ29tcG9uZW50KG5ldyBDb21wb25lbnQobWVzc2FnaW5nTmFtZSwgZmFjdG9yeU1ldGhvZCwgXCJQVUJMSUNcIiAvKiBQVUJMSUMgKi8pLnNldFNlcnZpY2VQcm9wcyhuYW1lc3BhY2VFeHBvcnRzKSk7XHJcbiAgICBpbnN0YW5jZS5yZWdpc3RlclZlcnNpb24obmFtZSwgdmVyc2lvbik7XHJcbn1cclxucmVnaXN0ZXJNZXNzYWdpbmcoZmlyZWJhc2UpO1xyXG5mdW5jdGlvbiBpc1N1cHBvcnRlZCgpIHtcclxuICAgIGlmIChzZWxmICYmICdTZXJ2aWNlV29ya2VyR2xvYmFsU2NvcGUnIGluIHNlbGYpIHtcclxuICAgICAgICAvLyBSdW5uaW5nIGluIFNlcnZpY2VXb3JrZXIgY29udGV4dFxyXG4gICAgICAgIHJldHVybiBpc1NXQ29udHJvbGxlclN1cHBvcnRlZCgpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgLy8gQXNzdW1lIHdlIGFyZSBpbiB0aGUgd2luZG93IGNvbnRleHQuXHJcbiAgICAgICAgcmV0dXJuIGlzV2luZG93Q29udHJvbGxlclN1cHBvcnRlZCgpO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBDaGVja3MgdG8gc2VlIGlmIHRoZSByZXF1aXJlZCBBUElzIGV4aXN0LlxyXG4gKi9cclxuZnVuY3Rpb24gaXNXaW5kb3dDb250cm9sbGVyU3VwcG9ydGVkKCkge1xyXG4gICAgcmV0dXJuIChuYXZpZ2F0b3IuY29va2llRW5hYmxlZCAmJlxyXG4gICAgICAgICdzZXJ2aWNlV29ya2VyJyBpbiBuYXZpZ2F0b3IgJiZcclxuICAgICAgICAnUHVzaE1hbmFnZXInIGluIHdpbmRvdyAmJlxyXG4gICAgICAgICdOb3RpZmljYXRpb24nIGluIHdpbmRvdyAmJlxyXG4gICAgICAgICdmZXRjaCcgaW4gd2luZG93ICYmXHJcbiAgICAgICAgU2VydmljZVdvcmtlclJlZ2lzdHJhdGlvbi5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkoJ3Nob3dOb3RpZmljYXRpb24nKSAmJlxyXG4gICAgICAgIFB1c2hTdWJzY3JpcHRpb24ucHJvdG90eXBlLmhhc093blByb3BlcnR5KCdnZXRLZXknKSk7XHJcbn1cclxuLyoqXHJcbiAqIENoZWNrcyB0byBzZWUgaWYgdGhlIHJlcXVpcmVkIEFQSXMgZXhpc3Qgd2l0aGluIFNXIENvbnRleHQuXHJcbiAqL1xyXG5mdW5jdGlvbiBpc1NXQ29udHJvbGxlclN1cHBvcnRlZCgpIHtcclxuICAgIHJldHVybiAoJ1B1c2hNYW5hZ2VyJyBpbiBzZWxmICYmXHJcbiAgICAgICAgJ05vdGlmaWNhdGlvbicgaW4gc2VsZiAmJlxyXG4gICAgICAgIFNlcnZpY2VXb3JrZXJSZWdpc3RyYXRpb24ucHJvdG90eXBlLmhhc093blByb3BlcnR5KCdzaG93Tm90aWZpY2F0aW9uJykgJiZcclxuICAgICAgICBQdXNoU3Vic2NyaXB0aW9uLnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eSgnZ2V0S2V5JykpO1xyXG59XG5cbmV4cG9ydCB7IGlzU3VwcG9ydGVkLCByZWdpc3Rlck1lc3NhZ2luZyB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguZXNtLmpzLm1hcFxuIiwiLy8gRmlyZWJhc2UgQXBwICh0aGUgY29yZSBGaXJlYmFzZSBTREspIGlzIGFsd2F5cyByZXF1aXJlZCBhbmQgbXVzdCBiZSBsaXN0ZWQgZmlyc3QuXHJcbmltcG9ydCAqIGFzIGZpcmViYXNlIGZyb20gXCJmaXJlYmFzZS9hcHBcIjtcclxuXHJcbi8vIFRoZSBGaXJlYmFzZSBTREsgZm9yIEFuYWx5dGljcy5cclxuaW1wb3J0IFwiZmlyZWJhc2UvYW5hbHl0aWNzXCI7XHJcblxyXG4vLyBUaGUgRmlyZWJhc2UgcHJvZHVjdHMgdGhhdCBhcmUgdXNlZCBmb3IgbWVzc2FnaW5nLlxyXG5pbXBvcnQgXCJmaXJlYmFzZS9maXJlc3RvcmVcIjtcclxuaW1wb3J0IFwiZmlyZWJhc2UvbWVzc2FnaW5nXCI7XHJcblxyXG5cclxuLyoqKioqKioqKioqKioqKioqKioqKiBGSVJFQkFTRSBJTklUSUFMSVpBVElPTiAqKioqKioqKioqKioqKioqKioqKiovXHJcblxyXG4vLyBUaGUgRmlyZWJhc2UgY29uZmlndXJhdGlvbiBmb3IgdGhlIGFwcC5cclxuY29uc3QgZmlyZWJhc2VDb25maWcgPSB7XHJcbiAgYXBpS2V5OiBcIkFJemFTeUI5S0M5UTNOek10N2I2VHNwTmNLeHFXcW56elBMdmRGZ1wiLFxyXG4gIGF1dGhEb21haW46IFwidGVzdGdkcHJvamVjdC0xNTcwMDM2NDM5OTMxLmZpcmViYXNlYXBwLmNvbVwiLFxyXG4gIGRhdGFiYXNlVVJMOiBcImh0dHBzOi8vdGVzdGdkcHJvamVjdC0xNTcwMDM2NDM5OTMxLmZpcmViYXNlaW8uY29tXCIsXHJcbiAgcHJvamVjdElkOiBcInRlc3RnZHByb2plY3QtMTU3MDAzNjQzOTkzMVwiLFxyXG4gIHN0b3JhZ2VCdWNrZXQ6IFwidGVzdGdkcHJvamVjdC0xNTcwMDM2NDM5OTMxLmFwcHNwb3QuY29tXCIsXHJcbiAgbWVzc2FnaW5nU2VuZGVySWQ6IFwiMTk5ODQ0NDUzNjQzXCIsXHJcbiAgYXBwSWQ6IFwiMToxOTk4NDQ0NTM2NDM6d2ViOjRhYTdiYTk3ZDFhZTJlNDI4YjU2MGVcIlxyXG59O1xyXG5cclxuLy8gSW5pdGlhbGl6YXRpb24gb2YgRmlyZWJhc2UuXHJcbmZpcmViYXNlLmluaXRpYWxpemVBcHAoZmlyZWJhc2VDb25maWcpO1xyXG5cclxuXHJcbi8qKioqKioqKioqKioqKioqKioqKiBGSVJFQkFTRSBDTE9VRCBNRVNTQUdJTkcgKioqKioqKioqKioqKioqKioqKioqKlxyXG4gKiBNYW5hZ2VzIHRoZSBjcmVhdGlvbiBvZiBkZXZpY2UgdG9rZW5zIHRvIHJlY2VpdmUgcHVzaCBub3RpZmljYXRpb25zLlxyXG4qL1xyXG5leHBvcnQgY2xhc3MgTWVzc2FnaW5nIHtcclxuICBjb25zdHJ1Y3RvcihhcHApIHtcclxuICAgIC8vIFJldHJpZXZlIHRoZSBGaXJlYmFzZSBNZXNzYWdpbmcgb2JqZWN0LlxyXG4gICAgdGhpcy5tZXNzYWdpbmcgPSBmaXJlYmFzZS5tZXNzYWdpbmcoKTtcclxuXHJcbiAgICAvLyBIYW5kbGUgaW5jb21pbmcgbWVzc2FnZXMgd2hlbiB0aGUgYXBwIGlzIGluIHRoZSBmb3JlZ3JvdW5kIC8gZm9jdXMuXHJcbiAgICB0aGlzLm1lc3NhZ2luZy5vbk1lc3NhZ2UocGF5bG9hZCA9PiB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdNZXNzYWdlIHJlY2VpdmVkLiAnLCBwYXlsb2FkKTtcclxuICAgICAgY29uc3QgZGF0YSA9IHBheWxvYWQuZGF0YTtcclxuICAgICAgYXBwLm5vdGlmaWNhdGlvbnNNYW5hZ2VyLmNyZWF0ZU5vdGlmaWNhY3Rpb24oZGF0YSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBDYWxsYmFjayBmaXJlZCBpZiBJbnN0YW5jZSBJRCB0b2tlbiBpcyB1cGRhdGVkLlxyXG4gICAgdGhpcy5tZXNzYWdpbmcub25Ub2tlblJlZnJlc2goKCkgPT4ge1xyXG4gICAgICB0aGlzLm1lc3NhZ2luZy5nZXRUb2tlbigpLnRoZW4ocmVmcmVzaGVkVG9rZW4gPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdGQ00gdG9rZW4gcmVmcmVzaGVkOicsIHJlZnJlc2hlZFRva2VuKTtcclxuICAgICAgICAvLyBTZW5kIHRoZSBuZXcgRGV2aWNlIFRva2VuIHRvIHRoZSBkYXRhc3RvcmUuXHJcbiAgICAgICAgZmlyZWJhc2UuZmlyZXN0b3JlKCkuY29sbGVjdGlvbignZmNtVG9rZW5zJykuZG9jKHJlZnJlc2hlZFRva2VuKVxyXG4gICAgICAgICAgLnNldCh7IGVtYWlsOiBhcHAudXNlckluZm8uZW1haWxBZGRyZXNzIH0pO1xyXG4gICAgICB9KS5jYXRjaChlcnIgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdVbmFibGUgdG8gcmV0cmlldmUgcmVmcmVzaGVkIHRva2VuICcsIGVycik7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQXV4aWxpYXJ5IGZ1bmN0aW9uIHRvIHZpZXcgdGhlIGRldmljZSB0b2tlbiBmb3IgRkNNLlxyXG4gICAgICovXHJcbiAgICB3aW5kb3cuZ2V0TWVzc2FnaW5nVG9rZW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgIGZpcmViYXNlLm1lc3NhZ2luZygpLmdldFRva2VuKClcclxuICAgICAgICAudGhlbih0b2tlbiA9PiB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyh0b2tlbik7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAuY2F0Y2goZXJyID0+IHtcclxuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2F2ZXMgdGhlIEZDTSB0b2tlbiB0byB0aGUgZGF0YXN0b3JlIGFuZCBzZXNzaW9uIHN0b3JhZ2UuXHJcbiAgICAgKiBJZiBub3RpZmljYXRpb24gcGVybWlzc2lvbnMgaGF2ZSBub3QgYmVlbiBncmFudGVkIGl0IGFza3MgZm9yIHRoZW0uXHJcbiAgICAgKi9cclxuICAgIHdpbmRvdy5zYXZlTWVzc2FnaW5nRGV2aWNlVG9rZW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgIGlmICghc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgnZGV2aWNlVG9rZW4nKSkge1xyXG4gICAgICAgIGZpcmViYXNlLm1lc3NhZ2luZygpLmdldFRva2VuKCkudGhlbih0b2tlbiA9PiB7XHJcbiAgICAgICAgICBpZiAodG9rZW4pIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ0ZDTSB0b2tlbiBnZW5lcmF0ZWQ6JywgdG9rZW4pO1xyXG4gICAgICAgICAgICAvLyBTYXZpbmcgdGhlIEZDTSB0b2tlbiBpbiBGaXJlc3RvcmUuXHJcbiAgICAgICAgICAgIGZpcmViYXNlLmZpcmVzdG9yZSgpLmNvbGxlY3Rpb24oJ2ZjbVRva2VucycpLmRvYyh0b2tlbilcclxuICAgICAgICAgICAgICAuc2V0KHsgZW1haWw6IGFwcC51c2VySW5mby5lbWFpbEFkZHJlc3MgfSk7XHJcbiAgICAgICAgICAgIC8vIFNhdmluZyB0b2tlbiBpbiBTZXNzaW9uIFN0b3JhZ2UuXHJcbiAgICAgICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oJ2RldmljZVRva2VuJywgdG9rZW4pO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gTmVlZCB0byByZXF1ZXN0IHBlcm1pc3Npb25zIHRvIHNob3cgbm90aWZpY2F0aW9ucy5cclxuICAgICAgICAgICAgdGhpcy5yZXF1ZXN0Tm90aWZpY2F0aW9uc1Blcm1pc3Npb25zKCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSkuY2F0Y2goZXJyID0+IHtcclxuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1VuYWJsZSB0byBnZXQgRkNNIHRva2VuLicsIGVycik7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgfVxyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogUmVxdWVzdHMgcGVybWlzc2lvbiB0byBzaG93IG5vdGlmaWNhdGlvbnMuXHJcbiAgICovXHJcbiAgcmVxdWVzdE5vdGlmaWNhdGlvbnNQZXJtaXNzaW9ucygpIHtcclxuICAgIGNvbnNvbGUubG9nKCdSZXF1ZXN0aW5nIG5vdGlmaWNhdGlvbnMgcGVybWlzc2lvbi4uLicpO1xyXG4gICAgZmlyZWJhc2UubWVzc2FnaW5nKCkucmVxdWVzdFBlcm1pc3Npb24oKS50aGVuKCgpID0+IHtcclxuICAgICAgY29uc29sZS5sb2coJ05vdGlmaWNhdGlvbiBwZXJtaXNzaW9uIGdyYW50ZWQuJyk7XHJcbiAgICAgIHdpbmRvdy5zYXZlTWVzc2FnaW5nRGV2aWNlVG9rZW4oKTtcclxuICAgIH0pLmNhdGNoKGVyciA9PiB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1VuYWJsZSB0byBnZXQgcGVybWlzc2lvbiB0byBub3RpZnk6JywgZXJyKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcblxyXG4gIC8vIEVxdWl2YWxlbnQgdG8gdGhlIHByZXZpb3VzIGJ1dCB3aXRob3V0IEZpcmViYXNlLlxyXG4gIC8vIGZ1bmN0aW9uIHJlcXVlc3RQZXJtaXNzaW9uKCkge1xyXG4gIC8vICAgY29uc29sZS5sb2coJ1JlcXVlc3RpbmcgcGVybWlzc2lvbi4uLicpO1xyXG4gIC8vICAgTm90aWZpY2F0aW9uLnJlcXVlc3RQZXJtaXNzaW9uKCkudGhlbihwZXJtaXNzaW9uID0+IHtcclxuICAvLyAgICAgaWYgKHBlcm1pc3Npb24gPT09ICdncmFudGVkJykge1xyXG4gIC8vICAgICAgIGNvbnNvbGUubG9nKCdOb3RpZmljYXRpb24gcGVybWlzc2lvbiBncmFudGVkLicpO1xyXG4gIC8vICAgICAgIC8vIFRPRE86IFJldHJpZXZlIGFuIEluc3RhbmNlIElEIHRva2VuIGZvciB1c2Ugd2l0aCBGQ00uXHJcbiAgLy8gICAgICAgLy8gSWYgYW4gYXBwIGhhcyBiZWVuIGdyYW50ZWQgbm90aWZpY2F0aW9uIHBlcm1pc3Npb24gaXQgY2FuIHVwZGF0ZSBpdHMgVUkgcmVmbGVjdGluZyB0aGlzLlxyXG4gIC8vICAgICAgIC8vIHJlc2V0VUkoKTtcclxuICAvLyAgICAgfSBlbHNlIHtcclxuICAvLyAgICAgICBjb25zb2xlLmxvZygnVW5hYmxlIHRvIGdldCBwZXJtaXNzaW9uIHRvIG5vdGlmeS4nKTtcclxuICAvLyAgICAgfVxyXG4gIC8vICAgfSk7XHJcbiAgLy8gfSAgXHJcblxyXG59IiwiaW1wb3J0ICcuL3N0eWxlcy9zdHlsZXMuc2Nzcyc7XHJcbmltcG9ydCB7IEFwcGxpY2F0aW9uIH0gZnJvbSAnLi9hcHAnO1xyXG5pbXBvcnQgR2VuZXJpY3MgZnJvbSAnLi9nZW5lcmljcyc7XHJcbmltcG9ydCBBUEkgZnJvbSAnLi9hcGknO1xyXG5pbXBvcnQgeyBNZXNzYWdpbmcgfSBmcm9tICcuL21lc3NhZ2luZyc7XHJcbmltcG9ydCB7IERyYXdpbmcgfSBmcm9tICcuL2RyYXdpbmcnO1xyXG5cclxuXHJcbi8qKioqKioqKioqKioqKioqKioqKioqKiogVEhFIEdMT0JBTCBPQkpFQ1QgKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuZGVjbGFyZSBnbG9iYWwge1xyXG4gIGludGVyZmFjZSBXaW5kb3cge1xyXG4gICAgdGhlcmVJc01lc3NhZ2luZzogYm9vbGVhbjtcclxuICAgIGdldEN1cnJlbnRVc2VyKCk6IGdhcGkuY2xpZW50LmRyaXZlLlVzZXI7XHJcbiAgICBzYXZlTWVzc2FnaW5nRGV2aWNlVG9rZW4oKTogdm9pZDtcclxuICB9XHJcbn1cclxuXHJcbi8vIGRlY2xhcmUgZ2xvYmFsIHtcclxuLy8gICBuYW1lc3BhY2UgTm9kZUpTIHtcclxuLy8gICAgIGludGVyZmFjZSBQcm9jZXNzRW52IHtcclxuLy8gICAgICAgLy8gUFJPQ0VTUzogc3RyaW5nO1xyXG4vLyAgICAgfVxyXG4vLyAgIH1cclxuLy8gfVxyXG5cclxuXHJcbi8qKioqKioqKioqKioqKioqKiogVEhFIE9OTFkgSU5TVEFOQ0UgT0YgVEhFIEFQUCAqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuY29uc3QgQXBwID0gbmV3IEFwcGxpY2F0aW9uKCk7XHJcblxyXG5cclxuLyoqKioqKiBUSEUgT05MWSBJTlNUQU5DRSBPRiBUSEUgTUVTU0FHSU5HIExPR0lDIEJZIEZJUkVCQVNFICoqKioqKiovXHJcblxyXG5jb25zdCBNc2cgPSBuZXcgTWVzc2FnaW5nKEFwcCk7XHJcblxyXG4vLyBTZXQgdG8gdHJ1ZSBvbmx5IGlmIHRoZSBNZXNzYWdpbmcgaW5zdGFuY2UgaXMgY3JlYXRlZC5cclxud2luZG93LnRoZXJlSXNNZXNzYWdpbmcgPSB0cnVlO1xyXG5cclxuXHJcbi8qKioqKioqKioqKioqKioqKioqIFNFUlZJQ0UgV09SS0VSIFJFR0lTVFJBVElPTiAqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuLy8gVE9ETzogRG8gdGhpcyBvbmx5IGlmIHRoZSB1c2VyIGF1dGhlbnRpY2F0ZXM/XHJcbmlmICgnc2VydmljZVdvcmtlcicgaW4gbmF2aWdhdG9yKSB7XHJcbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCAoKSA9PiB7XHJcbiAgICBuYXZpZ2F0b3Iuc2VydmljZVdvcmtlci5yZWdpc3RlcignL3NlcnZpY2Utd29ya2VyLmpzJylcclxuICAgICAgLnRoZW4ocmVnID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZygnU2VydmljZSB3b3JrZXIgcmVnaXN0ZXJlZC4nLCByZWcpO1xyXG4gICAgICAgIC8vIEZpcmViYXNlIG1lc3NhZ2luZyByZXF1aXJlcyB0byB1c2UgYSBzZXJ2aWNlIHdvcmtlci5cclxuICAgICAgICBpZiAod2luZG93LnRoZXJlSXNNZXNzYWdpbmcpIE1zZy5tZXNzYWdpbmcudXNlU2VydmljZVdvcmtlcihyZWcpO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goZXJyID0+IHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdTZXJ2aWNlIFdvcmtlciBFcnJvcicsIGVycik7XHJcbiAgICAgIH0pO1xyXG4gIH0pO1xyXG59XHJcblxyXG5cclxuLyoqKioqKioqKioqKioqKioqKioqKioqKiogR0xPQkFMIE1FVEhPRFMgKioqKioqKioqKioqKioqKioqKioqKioqKiovXHJcblxyXG53aW5kb3cuZ2V0Q3VycmVudFVzZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgcmV0dXJuIEFwcC51c2VySW5mbztcclxufVxyXG5cclxuXHJcbi8qKioqKioqKioqKioqKioqKioqKioqKiogQlJPQURDQVNUIENIQU5ORUwgKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG4gKiBUbyBjb211bmljYXRlIHdpdGggdGhlIFNlcnZpY2UgV29ya2VyIGFuZCB2aWNldmVyc2EuXHJcbiovXHJcblxyXG5pZiAod2luZG93LkJyb2FkY2FzdENoYW5uZWwpIHtcclxuICBjb25zdCBicm9hZENhc3RDaGFubmVsID0gbmV3IEJyb2FkY2FzdENoYW5uZWwoJ2FwcC1jaGFubmVsJyk7XHJcblxyXG4gIGJyb2FkQ2FzdENoYW5uZWwub25tZXNzYWdlID0gZSA9PiB7XHJcbiAgICBpZiAoZS5kYXRhLmFjdGlvbiA9PT0gJ25ld05vdGlmaWNhdGlvbicpIHtcclxuICAgICAgY29uc29sZS5sb2coJ0FkZCBub3RpZmljYXRpb24gdG8gdGhlIGxpc3QuJyk7XHJcbiAgICAgIEFwcC5ub3RpZmljYXRpb25zTWFuYWdlci5jcmVhdGVOb3RpZmljYWN0aW9uKGUuZGF0YS5jb250ZW50KTtcclxuICAgIH1cclxuICB9O1xyXG59IGVsc2Uge1xyXG4gIGNvbnNvbGUud2FybignVGhpcyBicm93c2VyIGRvZXMgbm90IHN1cHBvcnQgQnJvYWRjYXN0Q2hhbm5lbC4nKTtcclxufVxyXG5cclxuXHJcbi8qKioqKioqKioqKioqKioqKioqIFZJRVcgU0FNUExFIFBST0pFQ1QgT1BUSU9OICoqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuY29uc3Qgc2FtcGxlUHJvamVjdEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzYW1wbGVQcm9qZWN0QnRuJyk7XHJcblxyXG5zYW1wbGVQcm9qZWN0QnRuLm9uY2xpY2sgPSAoKSA9PiB7XHJcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2plY3RzTGlzdEJ0bicpLm9uY2xpY2sgPSBudWxsO1xyXG4gIEFwcC5zYXZlQnRuLnN0eWxlLnZpc2liaWxpdHkgPSAnaGlkZGVuJztcclxuICBBcHAucHJvamVjdHNMaXN0QnRuLmNsYXNzTGlzdC5hZGQoJ2xvY2tlZCcpO1xyXG4gIC8vIFRPRE86IENoYW5nZSB0aGUgU2lnbiBPdXQgYnV0dG9uIGZvciB0aGUgTG9nIEluIGJ1dHRvbiBvbiB0aGUgc2lkZSBtZW51LlxyXG4gIEFwcC5zdGFydCgnMUQ0RVNZOTd6S3ZKb1oxQldlTFdZcThHeGhRTldzWHBnJyk7XHJcbn1cclxuXHJcblxyXG4vKioqKioqKioqKioqKioqKioqKiBHT09HTEUgRFJJVkUgQVVUSEVOVElDQVRJT04gKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbi8vIE9BdXRoIDIuMCBDbGllbnQgSUQgZm9yIEdvb2dsZSBBUElzLlxyXG5jb25zdCBDTElFTlRfSUQgPSBwcm9jZXNzLmVudi5HT09HTEVfQ0xJRU5UX0lEO1xyXG5cclxuLy8gQVBJIGtleSBmb3IgR29vZ2xlIERyaXZlLlxyXG5sZXQgQVBJX0tFWTogc3RyaW5nO1xyXG5pZiAocHJvY2Vzcy5lbnYuUFJPQ0VTUyA9PT0gJ3Byb2R1Y3Rpb24nKSB7IC8vIFRPRE8gd29yayA/IG9yIGxlYXZlIGp1c3QgUFJPQ0VTUyA/XHJcbiAgQVBJX0tFWSA9IHByb2Nlc3MuZW52LkdPT0dMRV9BUElfS0VZX1BST0Q7XHJcbn0gZWxzZSB7XHJcbiAgQVBJX0tFWSA9IHByb2Nlc3MuZW52LkdPT0dMRV9BUElfS0VZX0RFVjtcclxufVxyXG5cclxuLy8gQXJyYXkgb2YgQVBJIGRpc2NvdmVyeSBkb2MgVVJMcyBmb3IgQVBJcyB1c2VkIGJ5IHRoZSBhcHAuXHJcbmNvbnN0IERJU0NPVkVSWV9ET0NTID0gW1wiaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vZGlzY292ZXJ5L3YxL2FwaXMvZHJpdmUvdjMvcmVzdFwiXTtcclxuXHJcbi8vIEF1dGhvcml6YXRpb24gc2NvcGVzIHJlcXVpcmVkIGJ5IHRoZSBBUEk7IG11bHRpcGxlIHNjb3BlcyBjYW4gYmUgaW5jbHVkZWQsIHNlcGFyYXRlZCBieSBzcGFjZXMuXHJcbmNvbnN0IFNDT1BFUyA9IFwiaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vYXV0aC9kcml2ZVwiO1xyXG5cclxuY29uc3QgYXV0aG9yaXplQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2F1dGhvcml6ZUJ0bicpO1xyXG5jb25zdCBzaWdub3V0QnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NpZ25vdXRCdG4nKTtcclxuXHJcblxyXG4vKipcclxuICogIE9uIGxvYWQsIGNhbGxlZCB0byBsb2FkIHRoZSBhdXRoMiBsaWJyYXJ5IGFuZCBBUEkgY2xpZW50IGxpYnJhcnkuXHJcbiAqL1xyXG4oZnVuY3Rpb24gKCkge1xyXG4gIGNvbnN0IHNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xyXG4gIHNjcmlwdC50eXBlID0gXCJ0ZXh0L2phdmFzY3JpcHRcIjtcclxuICBzY3JpcHQuZGVmZXIgPSB0cnVlO1xyXG4gIHNjcmlwdC5vbmxvYWQgPSAoKSA9PiBoYW5kbGVDbGllbnRMb2FkKCk7XHJcbiAgc2NyaXB0LnNyYyA9ICdodHRwczovL2FwaXMuZ29vZ2xlLmNvbS9qcy9hcGkuanMnO1xyXG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2JvZHknKS5hcHBlbmRDaGlsZChzY3JpcHQpO1xyXG59KSgpO1xyXG5cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUNsaWVudExvYWQoKSB7XHJcbiAgZ2FwaS5sb2FkKCdjbGllbnQ6YXV0aDInLCBpbml0Q2xpZW50KTtcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiAgSW5pdGlhbGl6ZXMgdGhlIEFQSSBjbGllbnQgbGlicmFyeSBhbmQgc2V0cyB1cCBzaWduLWluIHN0YXRlIGxpc3RlbmVycy5cclxuICovXHJcbmZ1bmN0aW9uIGluaXRDbGllbnQoKSB7XHJcbiAgZ2FwaS5jbGllbnQuaW5pdCh7XHJcbiAgICBhcGlLZXk6IEFQSV9LRVksXHJcbiAgICBjbGllbnRJZDogQ0xJRU5UX0lELFxyXG4gICAgZGlzY292ZXJ5RG9jczogRElTQ09WRVJZX0RPQ1MsXHJcbiAgICBzY29wZTogU0NPUEVTXHJcbiAgfSkudGhlbihmdW5jdGlvbiAoKSB7XHJcbiAgICAvLyBMaXN0ZW4gZm9yIHNpZ24taW4gc3RhdGUgY2hhbmdlcy5cclxuICAgIGdhcGkuYXV0aDIuZ2V0QXV0aEluc3RhbmNlKCkuaXNTaWduZWRJbi5saXN0ZW4odXBkYXRlU2lnbmluU3RhdHVzKTtcclxuXHJcbiAgICAvLyBIYW5kbGUgdGhlIGluaXRpYWwgc2lnbi1pbiBzdGF0ZS5cclxuICAgIHVwZGF0ZVNpZ25pblN0YXR1cyhnYXBpLmF1dGgyLmdldEF1dGhJbnN0YW5jZSgpLmlzU2lnbmVkSW4uZ2V0KCkpO1xyXG4gICAgYXV0aG9yaXplQnV0dG9uLm9uY2xpY2sgPSBoYW5kbGVBdXRoQ2xpY2s7XHJcbiAgICBzaWdub3V0QnV0dG9uLm9uY2xpY2sgPSBoYW5kbGVTaWdub3V0Q2xpY2s7XHJcbiAgfSwgZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmxvZyhKU09OLnN0cmluZ2lmeShlcnJvciwgbnVsbCwgMikpO1xyXG4gIH0pO1xyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqICBDYWxsZWQgd2hlbiB0aGUgc2lnbmVkIGluIHN0YXR1cyBjaGFuZ2VzLCB0byB1cGRhdGUgdGhlIFVJXHJcbiAqICBhcHByb3ByaWF0ZWx5LiBBZnRlciBhIHNpZ24taW4sIHRoZSBBUEkgaXMgY2FsbGVkLlxyXG4gKi9cclxuZnVuY3Rpb24gdXBkYXRlU2lnbmluU3RhdHVzKGlzU2lnbmVkSW46IGJvb2xlYW4pIHtcclxuICBpZiAoaXNTaWduZWRJbikge1xyXG4gICAgY29uc29sZS5sb2coJ0F1dGhvcml6ZWQuJyk7XHJcbiAgICAvLyBHZXQgdGhlIFVSTCBwYXJhbXMuXHJcbiAgICBjb25zdCBwcm9qZWN0SWQgPSBHZW5lcmljcy5nZXRVcmxQYXJhbXMod2luZG93LmxvY2F0aW9uLmhyZWYpLmlkO1xyXG4gICAgLy8gSGlkZSB0aGUgbG9naW4gZGlhbG9nIGluIGNhc2UgaXQgd2FzIHZpc2libGUuXHJcbiAgICBpZiAoQXBwLm1vZGFsRGlhbG9nQ29udGVudC5maXJzdEVsZW1lbnRDaGlsZCkge1xyXG4gICAgICBBcHAuY2xvc2VNb2RhbERpYWxvZygpO1xyXG4gICAgfVxyXG4gICAgLy8gTWFuYWdlIHRoZSBsb2dnZWQgdXNlciBwZXJzb25hbCBpbmZvLlxyXG4gICAgQXBwLnNldFVzZXJJbmZvKCk7XHJcbiAgICAvLyBJZiBhIHByb2plY3QgaWQgaXMgcHJvdmlkZWQgdG8gc3RhcnQoKSBtZXRob2QgdGhlIGFwcCB3aWxsIHN0YXJ0IGZyb20gdGhlIHByb2plY3Qgdmlldy5cclxuICAgIEFwcC5zdGFydChwcm9qZWN0SWQpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBjb25zb2xlLmxvZygnTm90IGF1dGhvcml6ZWQnKTtcclxuICAgIHNob3dMb2dpbkRpYWxvZygpO1xyXG4gIH1cclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiAgU2lnbiBpbiB0aGUgdXNlciB1cG9uIGJ1dHRvbiBjbGljay5cclxuICovXHJcbmZ1bmN0aW9uIGhhbmRsZUF1dGhDbGljaygpIHtcclxuICBnYXBpLmF1dGgyLmdldEF1dGhJbnN0YW5jZSgpLnNpZ25JbigpO1xyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqICBTaWduIG91dCB0aGUgdXNlciB1cG9uIGJ1dHRvbiBjbGljay5cclxuICovXHJcbmZ1bmN0aW9uIGhhbmRsZVNpZ25vdXRDbGljaygpIHtcclxuICBnYXBpLmF1dGgyLmdldEF1dGhJbnN0YW5jZSgpLnNpZ25PdXQoKTtcclxufVxyXG5cclxuXHJcbi8qKioqKioqKioqKioqKioqKioqKioqKioqKiBMT0dJTiBESUFMT0cgKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuXHJcbmNvbnN0IGF1dGhvcml6ZURpYWxvZyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhdXRob3JpemVEaWFsb2cnKTtcclxuXHJcbi8qKlxyXG4gKiBTaG93cyB0aGUgbG9naW4gZGlhbG9nIGFuZCBoaWRlcyBhbmQgY2xlYXJzIGFueXRoaW5nIGVsc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBzaG93TG9naW5EaWFsb2coKSB7XHJcbiAgQXBwLnNob3dNb2RhbERpYWxvZyhhdXRob3JpemVEaWFsb2csICdvcGFxdWUnLCBmYWxzZSk7XHJcbiAgLy8gSGlkZSBhbnl0aGluZyBlbHNlLlxyXG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2hlYWRlcicpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignbWFpbicpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgQXBwLnByb2plY3RzTGlzdENvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gIC8vIFRPRE86IERlbGV0ZSB0aGUgY29udGVudHMgb2YgdGhlIGdsb2JhbCBvYmplY3RzIGlmIGFueS5cclxuICAvLyBhcHBEYXRhLmNsZWFyKCk7XHJcbiAgLy8gY3VycmVudFByb2plY3QuY2xlYXIoKTtcclxuICAvLyBsYXN0VXBsb2FkZWRQcm9qZWN0LmNsZWFyKCk7XHJcbiAgR2VuZXJpY3MuZW1wdHlOb2RlKEFwcC5wcm9qZWN0c0xpc3QpO1xyXG4gIGhpc3RvcnkucmVwbGFjZVN0YXRlKHsgcGFnZTogJ1NpZ24gaW4gZGlhbG9nJyB9LCAnU2lnbiBpbiBkaWFsb2cnLCBsb2NhdGlvbi5ocmVmLnJlcGxhY2UobG9jYXRpb24uc2VhcmNoLCAnJykpO1xyXG59XHJcblxyXG5cclxuLyoqKioqKioqKioqKioqKioqKioqKioqKiBQV0EgaW5zdGFsbGF0aW9uICoqKioqKioqKioqKioqKioqKioqKioqKiovXHJcbi8vIFRPRE8gQ3JlYXRlIGEgc2VwYXJhdGUgY2xhc3MgYW5kIGltcG9ydD9cclxuXHJcbmxldCBkZWZlcnJlZEluc3RhbGxQcm9tcHQ6IEJlZm9yZUluc3RhbGxQcm9tcHRFdmVudCA9IG51bGw7XHJcblxyXG5jb25zdCBpbnN0YWxsQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2luc3RhbGxCdG4nKTtcclxuXHJcbmluc3RhbGxCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBpbnN0YWxsQXBwKTtcclxuXHJcblxyXG4vLyBFdmVudCBsaXN0ZW5lciBmb3IgYmVmb3JlaW5zdGFsbHByb21wdCBldmVudC5cclxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2JlZm9yZWluc3RhbGxwcm9tcHQnLCBzYXZlQmVmb3JlSW5zdGFsbFByb21wdEV2ZW50KTtcclxuXHJcblxyXG4vKipcclxuICogRXZlbnQgaGFuZGxlciBmb3IgYmVmb3JlaW5zdGFsbHByb21wdCBldmVudC5cclxuICogU2F2ZXMgdGhlIGV2ZW50IGFuZCBzaG93cyBpbnN0YWxsIGJ1dHRvbi5cclxuICogQHBhcmFtIHtFdmVudH0gZVxyXG4gKi9cclxuZnVuY3Rpb24gc2F2ZUJlZm9yZUluc3RhbGxQcm9tcHRFdmVudChlOiBCZWZvcmVJbnN0YWxsUHJvbXB0RXZlbnQpIHtcclxuICAvLyBQcmV2ZW50IGZyb20gYXV0b21hdGljYWxseSBzaG93aW5nIHRoZSBwcm9tcHQgd2hpY2ggY291bGQgaGFwcGVuXHJcbiAgLy8gaW4gc29tZSBicm93c2VycyBhbmQgY3JlYXRlIGEgY3VzdG9tIG9uZS5cclxuICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgLy8gU3Rhc2ggdGhlIGV2ZW50IHNvIGl0IGNhbiBiZSB0cmlnZ2VyZWQgbGF0ZXIuXHJcbiAgZGVmZXJyZWRJbnN0YWxsUHJvbXB0ID0gZTtcclxuICAvLyBVcGRhdGUgVUkgdG8gbm90aWZ5IHRoZSB1c2VyIHRoZXkgY2FuIGFkZCB0byBob21lIHNjcmVlblxyXG4gIGluc3RhbGxCdXR0b24ucmVtb3ZlQXR0cmlidXRlKCdoaWRkZW4nKTtcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBFdmVudCBoYW5kbGVyIGZvciB0aGUgaW5zdGFsbCBidXR0b24uXHJcbiAqIEBwYXJhbSB7RXZlbnR9IGVcclxuICovXHJcbmZ1bmN0aW9uIGluc3RhbGxBcHAoZTogRXZlbnQpIHtcclxuICAvLyBTaG93IGluc3RhbGwgcHJvbXB0LlxyXG4gIGRlZmVycmVkSW5zdGFsbFByb21wdC5wcm9tcHQoKTtcclxuICAvLyBIaWRlIHRoZSBpbnN0YWxsIGJ1dHRvbiwgaXQgY2FudCBiZSBjYWxsZWQgdHdpY2UuXHJcbiAgKGUudGFyZ2V0IGFzIEhUTUxFbGVtZW50KS5oaWRkZW4gPSB0cnVlOyAvLyBUT0RPIHVzZSBjc3MgaW5zdGVhZFxyXG4gIC8vIExvZyB1c2VyIHJlc3BvbnNlIHRvIHByb21wdC5cclxuICBkZWZlcnJlZEluc3RhbGxQcm9tcHQudXNlckNob2ljZVxyXG4gICAgLnRoZW4oY2hvaWNlID0+IHtcclxuICAgICAgaWYgKGNob2ljZS5vdXRjb21lID09PSAnYWNjZXB0ZWQnKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ1VzZXIgYWNjZXB0ZWQgdGhlIEEySFMgcHJvbXB0JywgY2hvaWNlKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnVXNlciBkaXNtaXNzZWQgdGhlIEEySFMgcHJvbXB0JywgY2hvaWNlKTtcclxuICAgICAgfVxyXG4gICAgICBkZWZlcnJlZEluc3RhbGxQcm9tcHQgPSBudWxsO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcblxyXG4vLyBBZGQgZXZlbnQgbGlzdGVuZXIgZm9yIHRoZSBhcHBpbnN0YWxsZWQgZXZlbnQuXHJcbi8vIFNpbmNlIGFwcCBjYW4gYmUgaW5zdGFsbGVkIGluIG1vcmUgdGhhbiBvbmUgd2F5IGl0IGlzIGdvb2QgdG8gbGlzdGVuIGZvciB0aGlzIGV2ZW50LlxyXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignYXBwaW5zdGFsbGVkJywgbG9nQXBwSW5zdGFsbGVkKTtcclxuXHJcblxyXG4vKipcclxuICogVGhlIGV2ZW50IGhhbmRsZXIgZm9yIHRoZSBhcHBpbnN0YWxsZWQgZXZlbnQuXHJcbiAqIEBwYXJhbSB7RXZlbnR9IGVcclxuICovXHJcbmZ1bmN0aW9uIGxvZ0FwcEluc3RhbGxlZChlOiBFdmVudCkge1xyXG4gIGNvbnNvbGUubG9nKCdWaXN1YWxBUlEgRHJhd2luZ3MgVmlld2VyIHdhcyBpbnN0YWxsZWQuJywgZSk7XHJcbiAgLy8gVE9ETzogTG9nIHRoZSBpbnN0YWxsYXRpb24gZm9yIGV4YW1wbGUgdG8gYW4gYW5hbHl0aWNzIHNvZnR3YXJlIG9yIHNhdmUgdGhlIGV2ZW50IHNvbWVob3cuXHJcbn1cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcbi8vIFRPRE8gbW92ZSB0byBhIHNlcGFyYXRlIGZpbGVcclxuXHJcbi8qKioqKioqKioqKioqKioqKioqKioqIERSQVdJTkdTIEJVVFRPTlMgTElTVCAqKioqKioqKioqKioqKioqKioqKioqL1xyXG4vKlxyXG4gKiBBIHNpbmdsZSBldmVudCBsaXN0ZW5lciBpbiB0aGUgY29udGFpbmVyIG9mIHRoZSBkcmF3aW5ncyBidXR0b25zIG1hbmFnZXMgdGhlIGNsaWNrZWQgZHJhd2luZy5cclxuICovXHJcblxyXG5sZXQgY3VycmVudERyYXdpbmdCdG46IEhUTUxFbGVtZW50O1xyXG5cclxuQXBwLmRyYXdpbmdzQnRucy5xdWVyeVNlbGVjdG9yKCcuZHJvcGRvd24tY29udGVudCcpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgZnVuY3Rpb24gKGUpIHtcclxuICBpZiAoY3VycmVudERyYXdpbmdCdG4pIHtcclxuICAgIGN1cnJlbnREcmF3aW5nQnRuLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xyXG4gIH1cclxuICBjdXJyZW50RHJhd2luZ0J0biA9IChlLnRhcmdldCBhcyBIVE1MRWxlbWVudCk7XHJcbiAgY29uc3QgZHJhd2luZ0lkID0gY3VycmVudERyYXdpbmdCdG4uZGF0YXNldC5pZDtcclxuICAvLyBTZXQgdGhlIG5hbWUgb2YgdGhlIGRyYXdpbmcgb24gdGhlIGRyb3Bkb3duIGJ1dHRvbi5cclxuICAvLyBUT0RPOiBEbyB0aGlzIG9ubHkgaWYgaXQgd2FzIHN1Y2Nlc3NmdWwuXHJcbiAgKEFwcC5kcmF3aW5nc0J0bnMuY2hpbGRyZW5bMF0gYXMgSFRNTEVsZW1lbnQpLmlubmVyVGV4dCA9IGN1cnJlbnREcmF3aW5nQnRuLmlubmVyVGV4dDtcclxuICBjdXJyZW50RHJhd2luZ0J0bi5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcclxuXHJcbiAgLy8gR2V0IHRoZSBjb3JyZXNwb25kaW5nIGRyYXdpbmcgb2JqZWN0LlxyXG4gIGNvbnN0IHJlcXVlc3RlZERyYXdpbmcgPSBBcHAuY3VycmVudFdvcmtzcGFjZS5kcmF3aW5ncy5maW5kKGQgPT4gZC5pZCA9PT0gZHJhd2luZ0lkKTtcclxuXHJcbiAgLy8gTG9hZCB0aGUgZHJhd2luZ3Mgc3R5bGVzIGlmIGl0IGlzIHRoZSBmaXJzdCB0aW1lLlxyXG4gIC8vIFRPRE86IElmIHRoaXMgaXMgcmVxdWlyZWQgYWx3YXlzIHRoZSBmaXJzdCB0aW1lIG1heWJlIGRvIGl0IGluIHRoZSBXb3Jrc3BhY2UgY29uc3RydWN0b3IuXHJcbiAgLy8gVE9ETzogSWYgdGhpcyBmaW5hbGx5IGV4dHJhY3RlZCB0aGVuIHRoZSBmdW5jdGlvbiB3b250IG5lZWQgdG8gYmUgYXN5bmMgYW55bW9yZS5cclxuICBpZiAoQXBwLmN1cnJlbnRXb3Jrc3BhY2UuZHJhd2luZ3NTdHlsZXNUYWcgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgaWYgKEFwcC5jdXJyZW50V29ya3NwYWNlLmRyYXdpbmdzU3R5bGVzSWQgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICBsZXQgc3R5bGVzUmVzO1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIHN0eWxlc1JlcyA9IGF3YWl0IEFQSS5nZXRGaWxlQ29udGVudChBcHAuY3VycmVudFdvcmtzcGFjZS5kcmF3aW5nc1N0eWxlc0lkKTtcclxuICAgICAgfSBjYXRjaCB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIHdoaWxlIHRyeWluZyB0byBmZXRjaCB0aGUgZHJhd2luZ3Mgc3R5bGVzLlwiKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoc3R5bGVzUmVzKSB7XHJcbiAgICAgICAgY29uc3Qgc3R5bGVUYWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xyXG4gICAgICAgIHN0eWxlVGFnLmlubmVyVGV4dCA9IHN0eWxlc1Jlcy5ib2R5O1xyXG4gICAgICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoc3R5bGVUYWcpO1xyXG4gICAgICAgIEFwcC5jdXJyZW50V29ya3NwYWNlLmRyYXdpbmdzU3R5bGVzVGFnID0gc3R5bGVUYWc7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNvbnNvbGUud2FybignVGhpcyBwcm9qZWN0IGRvZXNuXFwndCBoYXZlIGEgY3NzIHN0eWxlcyBmaWxlIGZvciB0aGUgZHJhd2luZ3MuJyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBDaGVjayBpZiB0aGUgcmVxdWVzdGVkIGRyYXdpbmcgaGFzIGFscmVhZHkgdGhlIGNvbnRlbnQuXHJcbiAgaWYgKHJlcXVlc3RlZERyYXdpbmcuY29udGVudCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICBBcHAuY3VycmVudFdvcmtzcGFjZS5zZXREcmF3aW5nKHJlcXVlc3RlZERyYXdpbmcpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBBcHAuc2hvd1ZpZXdwb3J0RGlhbG9nKCdsb2FkZXInLCAnTG9hZGluZyBkcmF3aW5nJyk7XHJcbiAgICBBUEkuZ2V0RmlsZUNvbnRlbnQoZHJhd2luZ0lkKS50aGVuKHJlcyA9PiB7XHJcbiAgICAgIHJlcXVlc3RlZERyYXdpbmcuc2V0Q29udGVudChyZXMuYm9keSk7XHJcbiAgICAgIEFwcC5jdXJyZW50V29ya3NwYWNlLnNldERyYXdpbmcocmVxdWVzdGVkRHJhd2luZyk7XHJcbiAgICAgIEFwcC5oaWRlVmlld3BvcnRNZXNzYWdlKCk7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdEcmF3aW5nIGZldGNoZWQuJyk7XHJcbiAgICB9LCBlcnIgPT4ge1xyXG4gICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59KTtcclxuXHJcblxyXG4vKioqKioqKioqKioqKioqKioqKioqIERST1BET1dOUyBGVU5DVElPTkFMSVRZICoqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbmNvbnN0IGRyb3Bkb3ducyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2Ryb3Bkb3duLWNvbnRhaW5lcicpO1xyXG5cclxuZm9yIChsZXQgaSA9IDA7IGkgPCBkcm9wZG93bnMubGVuZ3RoOyBpKyspIHtcclxuICBkcm9wZG93bnNbaV0uY2hpbGRyZW5bMF0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICBkcm9wZG93bnNbaV0uY2xhc3NMaXN0LnRvZ2dsZSgnb3BlbicpO1xyXG4gIH0pO1xyXG4gIGRyb3Bkb3duc1tpXS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgZSA9PiB7XHJcbiAgICAoZS5jdXJyZW50VGFyZ2V0IGFzIEhUTUxFbGVtZW50KS5jbGFzc0xpc3QucmVtb3ZlKCdvcGVuJyk7XHJcbiAgfSk7XHJcbn1cclxuXHJcblxyXG4vKioqKioqKioqKioqKioqKioqKioqKioqIFNJREUgTkFWRSBNRU5VICoqKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbmNvbnN0IHNpZGVOYXZUb2dnbGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2lkZU5hdlRvZ2dsZScpO1xyXG5cclxuc2lkZU5hdlRvZ2dsZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2lkZU5hdkNvbnRhaW5lcicpLmNsYXNzTGlzdC50b2dnbGUoJ2FjdGl2ZScpO1xyXG4gIHNpZGVOYXZUb2dnbGUuY2xhc3NMaXN0LnRvZ2dsZSgnYWN0aXZlJyk7XHJcbn0pOyJdLCJzb3VyY2VSb290IjoiIn0=